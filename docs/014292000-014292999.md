# StackOverflow 问答 14292000-14292999

# batch-file - 将零 KB 文件移动到另一个文件夹

> ID：14292001
> 
> 赞同：0
> 
> 时间：2013-01-12T09:28:52.790
> 
> 标签：batch-file

我有一个文件夹，其中有不同大小的不同文件。现在我必须编写一个批处理脚本，首先找出零 kb 文件大小的文件，然后将这些文件移动到另一个文件夹中。我在下面尝试过，但它不起作用。有人可以请调查一下。

```
For /r %%F in ('E:/ABC/*.*') do
if %%~zF==0
Move E:\ABC\%%F E:\ABC\DEL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:19:05.737

```
pushd "E:\ABC\"
for /r %%F in (*) do if "%%~zF"=="0" move "%%~fF" "E:\ABC\DEL\%%~nxF"
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:30:13.603

试试这个例子

（我有一个不同的目录和名称中包含空格的文件）

```
@Echo off
for %%I IN (*.*) DO if %%~zI==0 Move "D:\TEMP\%%I" D:\TEMP2 
```

# c++ - 类变为 NULL 的 SDL_Surface 指针

> ID：14292009
> 
> 赞同：0
> 
> 时间：2013-01-12T09:30:08.660
> 
> 标签：c++, pointers, sdl

在我加载 SDL_Surface 后，我自己定义的类 Actor 中的 SDL_Surface 将返回 NULL。经过大量控制台输出并使用 GDB 查找可能出现错误的位置。Actor 类包含一个指向 SDL_Surface 的指针，并且 Actor::getSurface 返回指向 SDL_Surface 的指针。

当然，您相信显示的更多代码将有助于解决问题，我很乐意分享。

我的程序输出是：

```
--Surface was loaded.
Surface is NULL after loading. 
```

我删掉了代码中不重要的部分。

主.cpp：

```
SDL_Init( SDL_INIT_EVERYTHING );

Actor sprite;
sprite.loadSurface("images/bg.bmp");
if( sprite.getSurface() == NULL )
  std::clog << "Surface is NULL after loading." << std::endl; 
```

演员.cpp

```
bool Actor::loadSurface(std::string t_filename)
{
  std::clog << "-ACTOR " << m_id << " LOADSURFACE" << std::endl;
  SDL_Surface * loadedImage = NULL;
  m_surface = NULL;

  loadedImage = IMG_Load( t_filename.c_str() );
  if( loadedImage != NULL )
  {
    std::clog << "--Surface was loaded." << std::endl;
    m_surface = SDL_DisplayFormatAlpha( loadedImage );
    SDL_FreeSurface( loadedImage );
    return true;
  }
  std::clog << "--Surface was not loaded." << std::endl;
  return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:48:51.107

看来你的`SDL_DisplayFormatAlpha`回报`NULL`。

`SDL_SetVideoMode`如果您在尝试转换图像之前没有调用，则可能会发生这种情况，请确认是这种情况。

另一个会导致`NULL`返回值的选项是内存不足。

# linux - 从另一个变量的内容中获取一个变量的内容，两个变量名的尾数相同

> ID：14292025
> 
> 赞同：1
> 
> 时间：2013-01-12T09:33:32.663
> 
> 标签：linux, bash, variables

在 bash 脚本中，如何从另一个变量的内容中获取变量的内容，两个变量名具有相同的尾随数字？

```
IP1=192.168.0.17
DIR1=/mnt/2tb/archive/src/
IP2=192.168.0.11
DIR2=~/src/
IP3=192.168.0.113
DIR3=~/src/

#get local ip and set variable HOST to local ip
HOST=$(ifconfig | grep 'inet addr:'| grep -v '127.0.0.1' | cut -d: -f2 | awk '{ print $1}')

# get HOST source DIR as variable from ip and preset variables

echo $HOSTDIR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:59:11.553

您可以使用 eval 如下：

```
HOSTDIR=$(for i in {1..3}; do eval if [[ \$IP$i == "$HOST" ]] \; then echo \$DIR$i \; fi; done) 
```

但是使用另一个解决方案中建议的关联数组是一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:37:46.213

如果只有 3 个，请使用 if 语句

```
if [ $HOST = $IP1 ]; then
    HOSTDIR=$DIR1
elif [ $HOST = $IP2 ]; then
    HOSTDIR=$DIR2
... 
```

另一种方法是使用间接扩展：

```
for num in 1 2 3 4 5 6 7 8 9 10
do
    ip=IP$num
    MYIP=${!ip}
    if [ $HOST = $MYIP ]; then
        dir=DIR$num
        HOSTDIR=${!dir}
        break
    fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:42:25.187

您可以使用关联数组来执行此操作。

以下是如何使用它们的示例：

```
#! /bin/bash

typeset -A dirs           # -A for associative array, -a for indexed arrays

dirs["192.168.0.17"]=foo  # build your map of ip -> dirs
dirs["192.168.0.18"]=bar

ip=192.168.0.17
echo ${dirs[$ip]}         # print the value associated with $ip
ip=192.168.0.18
echo ${dirs[$ip]} 
```

# scala - 在处理中使用 Scala 库

> ID：14292026
> 
> 赞同：2
> 
> 时间：2013-01-12T09:33:44.183
> 
> 标签：scala, processing

我不是一个java程序员。我真的比 java 更喜欢 Scala。如果可以的话，我宁愿在 Scala 中制作处理库以在处理中使用。我已经能够在 Processing 中从我的库中启动新对象，但我还不知道如何从我的 Scala 对象中访问方法或字段。我似乎也无法将当前的 PApplet 传递给 Scala 对象而不会出错。我是如何做到的，是将 scala-library.jar 复制到 Processing 的 lib 文件夹中，以便它可以使用 scalaObjects。

如果我做：

```
new Foo();
//or
Foo bar = new Foo(); 
```

这里没有问题。

但如果我这样做：

```
Foo bar = new Foo();
println(bar.baz); 
```

它说 baz 不存在， baz 只是一个字符串。

如果我做：

```
new Foo(this); 
```

它说 Foo(library) 不存在。

**我显然错过了一些东西，有没有比我更有知识的人可以给我一个提示？**

[更新]另外，我注意到当我在处理中这样做时：

```
println(new Foo()); 
```

控制台打印出 library.Foo@aa233f

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:01:14.143

这些是典型的 Java/Scala 互操作问题。您应该给出 Foo 的定义代码以获得具体帮助，但是您可以通过搜索 scala interop 找到很多现有的帮助/信息。

你看过SPDE吗？它是支持 Scala 的 Processing 的一个分支。如果它足够成熟，您最好使用它而不是处理所有这些互操作问题。

# iphone - NSArray enumerateObjectsUsingBlock：延迟枚举

> ID：14292027
> 
> 赞同：2
> 
> 时间：2013-01-12T09:33:53.787
> 
> 标签：iphone, ios, xcode, cocoa-touch

我使用快速枚举并在枚举块中异步发送网络请求。

因此发生的是 enumerateObjectsUsingBlock：只需超快速地调用该块并让枚举块在一段时间后完成。

这会导致不同的结果，因为某些请求比其他请求完成得更快。所以它没有按我想要的方式排序。

有什么办法可以将block设置为freeze，在异步网络请求完成后，告诉它去下一个吗？

这是一些代码

```
 NSArray *sites = [self.fetchedResultsController.fetchedObjects copy];
    NSLog(@"sites - %@",sites);
    [sites enumerateObjectsUsingBlock:^(Sites *site, NSUInteger idx, BOOL *stop) {
        NSLog(@"site name - %@,",site.name);

        [[Wrapper sharedWrapper] sendRequestTo:site completionBlock:{

                NSLog(@"site name - %@",site.name);
        }];
    }]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-04T23:16:25.773

> 有什么办法可以将block设置为freeze，在异步网络请求完成后，告诉它去下一个吗？

```
NSArray *sites = [self.fetchedResultsController.fetchedObjects copy];
NSLog(@"sites - %@",sites);
[sites enumerateObjectsUsingBlock:^(Sites *site, NSUInteger idx, BOOL *stop) {
    NSLog(@"site name - %@,",site.name);
dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);
    [[Wrapper sharedWrapper] sendRequestTo:site completionBlock:{

            NSLog(@"site name - %@",site.name);
dispatch_semaphore_signal(semaphore);
    }];
dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
}]; 
```

^ 并不是真正的理想方式，但如果您想在等待异步请求完成的同时进行同步迭代，然后再继续前进，上述将通过 GCD 完成。还有其他方法可以在等待异步任务完成后留下所有组的同时迭代和增加 dispatch_group，例如：

```
dispatch_group_t downloadGroup = dispatch_group_create();

        dispatch_group_enter(downloadGroup);
        [self fetchStuffInBackground:background withCompletion:^(NSArray *stuff, NSError *error) {
            NSLog(@"leaving stuff");
            dispatch_group_leave(downloadGroup);
        }];
        dispatch_group_enter(downloadGroup);
        [self fetchAOtherStuffInBackground:background withCompletion:^(NSArray *stuff, NSError *error) {
            NSLog(@"leaving other stuff");
            dispatch_group_leave(downloadGroup);
        }];
              dispatch_group_enter(downloadGroup);
        [self fetchLastStuffInBackground:background withCompletion:^(NSArray *lastStuff, NSError *error) {
            NSLog(@"leaving last stuff");
            dispatch_group_leave(downloadGroup);
        }];      
    }

}
dispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^{
    if (callback) {
        callback(error);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T22:36:10.737

我想实现同样的目标，但继续使用块来简化我的代码，而不是通过递归方法传递参数的麻烦。我想出了这个 NSArray 类别：

```
NS_ASSUME_NONNULL_BEGIN

@interface NSArray(MH)

- (void)mh_asyncEnumerateObjectsUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL* stop, dispatch_block_t next))block;

@end

NS_ASSUME_NONNULL_END

@implementation NSArray(MH)

- (void)mh_asyncEnumerateObjectsUsingBlock:(void (^)(id  _Nonnull obj, NSUInteger idx, BOOL* stop, dispatch_block_t next))block{
    __block NSUInteger index = 0;
    __block BOOL stop = NO;

    void (^next)();
    __block __weak typeof(next) weakNext;
    weakNext = next = ^void() {
        void (^strongNext)() = weakNext;
        // check if finished
        if(stop || index == self.count){
            return;
        }
        id obj = self[index];
        index++;
        block(obj, index - 1, &stop, strongNext);
    };
    next();
}

@end 
```

它是这样使用的：

```
NSArray* a = @[@"Malc", @"Bob", @"Jim"];
[a mh_asyncEnumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL *stop, dispatch_block_t next) {
    // simulate an async network call
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        NSLog(@"%@", obj);
        next();
    });
}]; 
```

输出：

```
2016-01-04 22:41:04.631 Malc
2016-01-04 22:41:05.632 Bob
2016-01-04 22:41:06.720 Jim 
```

如您所见，此演示以 1 秒的延迟输出数组中的每个字符串。您可以通过在块内进行网络调用来使用它，然后在完成后调用 next。如果您遇到错误并想取消设置 *stop = YES; 在调用 next() 之前，与普通枚举一样。

```
NSArray *sites = [self.fetchedResultsController.fetchedObjects copy];
NSLog(@"sites - %@",sites);
[sites mh_asyncEnumerateObjectsUsingBlock:^(Site *site, NSUInteger idx, BOOL *stop, dispatch_block_t next){
    NSLog(@"site name - %@,",site.name);

    [[Wrapper sharedWrapper] sendRequestTo:site completionBlock:{
          if(error){ // your completion block should have an error param!!!
              *stop = YES;
          }
          NSLog(@"site name - %@",site.name);
          next();
     }];
 }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:17:12.073

> 有什么办法可以将block设置为freeze，在异步网络请求完成后，告诉它去下一个吗？

您可以通过重新组织代码来实现该结果：而不是使用枚举，只需从完成块执行异步请求，一次一个：

```
- (void) doRequestAsync:(NSArray*)sites index:(NSUInteger)index {

    if (index >= [sites count]) return;

    NSString* site = [sites objectAtIndex:index];
    [[Wrapper sharedWrapper] sendRequestTo:site completionBlock:{
            NSLog(@"site name - %@",site.name);
            [self doRequestAsync:sites index:++index];
    }];

} 
```

对此的替代方法是修改您的`Wrapper`类，使其使用异步网络（但在辅助线程上使用它，以避免阻塞 UI）。

或者您可以实现[异步完成令牌模式](http://www.cs.wustl.edu/~schmidt/PDF/ACT.pdf)，以便能够在收到响应时重新排序。

# django - 使用现有对象编辑 Django 模型？

> ID：14292028
> 
> 赞同：1
> 
> 时间：2013-01-12T09:33:55.117
> 
> 标签：django, sqlite, django-models

有没有办法编辑现有的 Django 模型类（添加/删除字段），并使更改适用于（SQLite）数据库中先前创建的对象？

例如：

```
class Mod(models.Model):
    usrID = models.IntegerField(default=0)
    name = models.CharField(default="") 
```

并且在后期，有大量的命名类对象实例化后，改为：

```
class Mod(models.Model):
    usrID = models.IntegerField(default=0)
    name = models.CharField(default="")
    description = models.TextField(default="") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:36:28.157

是的。使用数据库迁移工具，Django 最流行的数据库迁移之一是[South](http://south.aeracode.org/)。

# ios - 如何标记和选择我的几个项目到我的下一个 tableview？

> ID：14292033
> 
> 赞同：0
> 
> 时间：2013-01-12T09:34:36.427
> 
> 标签：ios, objective-c, uitableview

我创建了一个 tableview 并获得了一个项目列表，那么我如何标记并选择其中几个到我的下一个 tableview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:39:32.927

您可以将得到的列表存储为 NSMutableArray 。然后将mutableArray作为下一个tableView的dataSource。

# android - 从服务器下载图像时如何在android中显示图像

> ID：14292039
> 
> 赞同：0
> 
> 时间：2013-01-12T09:36:00.933
> 
> 标签：android

> **可能重复：**
> [图像未显示在图像视图上](https://stackoverflow.com/questions/14136084/image-not-showing-on-image-view)

如何在从服务器下载图像时在 android 中显示图像 请任何人都可以与我分享有关此的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:42:03.907

```
Drawable drawable = LoadImage(ImageURL);
PhotoImageView.setImageDrawable(drawable);    
//PhotoImageView is the ImageView in which you want to load your image from server

public Drawable LoadImage(String url)
{
    try
    {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    }
    catch (Exception e)
    {
        System.out.println("Exc=" + e);
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:41:22.787

请使用以下代码从 url 获取图像并显示到 imageview 中。

```
public class image extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bitmap bitmap = DownloadImage("http://www.gophoto.it/view.php?i=http://1.bp.blogspot.com/-2LTvCCufBKc/T3L3KgcTj2I/AAAAAAAABbQ/Ki60e1LU9sE/s1600/Sachin%2BTendulkar.png");

        RelativeLayout mRlayout1 = (RelativeLayout) findViewById(R.id.mRlayout1);
        Drawable d=new BitmapDrawable(bitmap);
        mRlayoutLogin.setBackgroundDrawable(d);
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:44:40.820

通常，您在使用 AsycTask 下载时会显示旋转的 ProgressBar：

```
public class Downloader extends AsyncTask<String,Integer,Bitmap> {

    @Override
    protected void onPreExecute() {
        // show spinning progress bar
    }

    @Override
    protected Bitmap doInBackground(String... arg0) {
        // download the image
        return null;
    }

    @Override
    protected void onPostExecute(Bitmap downloadedImage) {
        // hide spinning progress bar
        // show downloaded image
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T09:48:25.477

试试这个可能对你有帮助。

```
class DownloadImage extends AsyncTask<Void, Void, Void> {

    private ProgressDialog bar;

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        bar.dismiss();
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        bar =  new ProgressDialog(context);
        bar.setIndeterminate(true);
        bar.setTitle(context.getString(R.string.app_name));
        bar.setMessage(context.getString(R.string.please_wait));
        bar.show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        downloadImage();
        return null;
    }

    void downloadImage() {
        //Put the logic for download image from url
    }
} 
```

或请[在此处查看。](https://stackoverflow.com/questions/5938198/file-download-progress-bar-in-android)

# jquery - 用jquery为多表中的第一行着色

> ID：14292043
> 
> 赞同：1
> 
> 时间：2013-01-12T09:36:32.463
> 
> 标签：jquery, row, html-table

我正在使用这个 CSS 代码：

```
.even{
    background: #E4ECF6;
}
.odd{
    background: #F3F7FB;
}
.firstrow{
    background-color: #599ECF;
} 
```

我正在使用这个 css jquery 代码：

```
$(document).ready(function(){
$('table tr:even').addClass('even');
$('table tr:odd').addClass('odd');
$('table tr:first').addClass('firstrow');
}); 
```

此代码在第一个表中正确运行。但是当我有两个或更多表时，此代码可以为第一个表的第一行着色。为所有表中的所有第一行着色更好的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:42:29.250

尝试更换

```
$('table tr:first').addClass('firstrow'); 
```

和

```
$('table tr:first-child').addClass('firstrow'); 
```

关键是使用[`:first-child`](http://api.jquery.com/first-child-selector/)选择器，它

> 选择作为其父级的第一个子级的所有元素。

现场演示[在这里](http://jsfiddle.net/XK6CT/)。

* * *

如果你仍然想要[`:first`](http://api.jquery.com/first-selector/)选择器，你可以这样做：

```
$(document).ready(function () {
  $('table tr:even').addClass('even');
  $('table tr:odd').addClass('odd');
  $('table').each(function () {  // For each 'table'...
    $(this).find('tr:first').addClass('firstrow');  // Add class 'firstrow' to the first 'tr'.
  });
}); 
```

现场演示[在这里](http://jsfiddle.net/XK6CT/2/)。

# c# - VS2010 - 如何获取 c# 的控制事件处理程序定义

> ID：14292046
> 
> 赞同：0
> 
> 时间：2013-01-12T09:36:42.960
> 
> 标签：c#, visual-studio-2010

当我在 VS2010 中构建一个 vb.net winforms 应用程序时，我可以双击表单上的一个控件，它会将我带到代码窗口。然后在代码窗口的左上角和右上角有下拉列表，允许我选择控件和要处理的事件...

如果事件处理程序已经在使用/定义/编码，它会将我带到那里，否则它会定义一个具有标准命名约定的新处理程序方法 (_click(blah blah blah))...

但是由于某种原因，当我构建 ac# 应用程序时，没有这样的“作弊”......称我为懒惰，但我不喜欢输入我不需要的代码，因为功能存在于 VS “只是做”，为什么我不能在 C# 应用程序中做...？？？

也许我只需要找到一个设置......有人知道这样的设置..???

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:40:58.040

在 VS2010 的 C# 模式下，默认启用类似的功能。双击可视表单设计器中的控件将在代码窗口中为该表单创建默认事件处理程序。但是，这可能并不总是您想要处理的事件。如果是这种情况，请右键单击表单设计器中的控件并从上下文菜单中选择“属性”。将出现一个属性网格，其中包含所有控件属性和事件的列表。单击此网格顶部的闪电图标以选择“事件”选项卡。从这里，双击任何事件行将自动为代码窗口中的控件创建一个新的事件处理程序。

# macos - Intellij 无法在 Mac (10.7.5) 上访问 /usr/local

> ID：14292047
> 
> 赞同：2
> 
> 时间：2013-01-12T09:36:49.493
> 
> 标签：macos, permissions, intellij-idea

我的 Intellij IDEA CE 12.0.1 (Build 123.94) 副本无法访问`/usr/local`。我搜索了互联网，之前没有其他人遇到过这个问题。我知道这与文件夹权限有关，因为当我使用 sudo 运行时，IDEA 可以访问该文件夹。我的解决方法是将文件夹权限与 IDEA 可访问的文件夹相匹配，但这并没有解决问题。当前权限如下：

```
$ drwxr-xr-x@ 25 sergeykoulikov  staff  850 14 Dec 12:24 /usr/local 
```

这与我的收件箱文件夹几乎相同，IDEA 可以访问该文件夹。

```
$ drwxr-xr-x  10 sergeykoulikov  staff  340 12 Jan 17:05 /Users/sergeykoulikov/Inbox 
```

我错过了什么？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:36:09.727

这个问题没有足够的信息来给出具体的答案，但我可以指出要调查的事情。首先，/usr/local 权限后面的“@”表示它有扩展属性，可能还有访问控制列表（本质上是扩展权限）；该文件夹也可能设置了标志，这可以改变其行为。要查看所有这些内容，请使用`ls -ldeO@ /usr/local`

如果这不能指出您的问题，请澄清您所说的“访问”是什么意思。IDEA 在这两个文件夹中到底在做什么*？*它在两个文件夹中做（/试图做）同样的事情吗？它是否试图访问文件夹内的文件，如果是，文件的权限是否相同和/或是否有一个文件存在于一个文件夹中但另一个文件夹中没有导致差异？

# c++ - 使用 Peter Weinberger 的哈希算法创建加密/解密函数

> ID：14292048
> 
> 赞同：-1
> 
> 时间：2013-01-12T09:37:02.123
> 
> 标签：c++, encryption, hash, cryptography

是否可以解密 Peter Weinberger 的哈希算法？

我正在尝试编写自己的加密解密函数。我理解哈希值意味着您不能或不应该解密哈希值的概念，但我认为因为算法相对简单，在这种情况下可能可以解密这种哈希值。我已经完成了使用简单旋转的简单加密解密，现在我想尝试一些更困难的事情。

那么是否可以解密彼得温伯格哈希算法产生的哈希值呢？

以下加密函数是 Peter Weinberger 的精确哈希算法，解密是我自己的尝试，但不起作用：

```
int encrypt(char *s)
{
    /* Peter Weinberger's */

    char *p;
    unsigned int h, g;
    h = 0;
    for(p=s; *p!='\0'; p++){
        h = (h<<4) + *p; printf("Step : ");
        if (g = h&0xF0000000) {
            h ^= g>>24;
            h ^= g;
        }
    }
    return h % 211;
}

std::string decrypt(int v)
{
    /* Peter Weinberger's */

    unsigned int h, g;
    h = 0;
    v /= 211;
    int s = sqrt(v);

    /* Not sure what to do here
    for(p=s; *p!='\0'; p++){

    }
    */

    return string(h);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:01:04.517

考虑到极小的输出大小，蛮力攻击是微不足道的。

1.  生成一个字符串（例如随机）
2.  哈希它
3.  如果它与已知值匹配，则您找到了第一个原像，否则转到步骤 1

这将平均需要 211 次尝试才能获得与给定哈希匹配的字符串。它可能不是原始字符串，但考虑到散列的有损性质，这是可以预料的。

* * *

对于两个字符输入，此哈希变为`(16*s[0]+s[1])%211`您可以重写为`(16*(s[0]-'A')+(s[1]-'A') + 50)%211`

求解你得到的字符串：

```
s[0]=(hash+161)/16+'A';
s[1]=(hash+161)%16+'A'; 
```

例如为`s == "AB"`你得到`hash==51`. 然后使用上面的公式来反转它：

```
s[0] = 13 +'A' = 'N'
s[1] =  4 +'A' = 'E' 
```

=>`s="NE"`匹配哈希 51，但不是原始字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:23:49.917

如果我正确理解算法，对于每个字符它都会：

1.  将哈希乘以 16（向左移动 4 位）
2.  添加字符串的一个字符
3.  如果结果超过 28 位，则删除高 4 位并在散列中的某处对它们进行异或。

通过将字符串的大小限制为 6（如果第一个字节小于 16，则为 7），步骤 3 将永远不会发生。所以剩下的就是一个简单的移位和加法。

当字符串有 6 个字符时，最终结果是这个和（h = 一个字符的高 4 位，l = 低 4 位）：

```
pos: bits
0: .hl00000
1: ..hl0000
2: ...hl000
3: ....hl00
4: .....hl0
5: ......hl
----------- +
   0*******  Result is 32 bits with upper 4 bits zero 
```

我们看到 24-27 位是由位置 0 处字符的高 4 位确定的，加上低位加法可能产生的进位。位 20-23 是 char 0 的低位和 char 1 的高位（加上可能的进位）的总和。

如果输入字符可以具有所有 255 个可能的值（零除外），那么创建一个生成散列的字符串并不难。

1.  查看哈希中的最高 4 位。这将是 pos 0 处角色的高位部分。
2.  查看散列中的下 4 位。这是 char 1 的高位部分和 char 0 的低位部分的相加。
3.  为最高部分选择一个值。例如“最高部分始终为零”或“最高部分始终为 0100（大写字母）”。
4.  如果 has 中的位小于您在步骤 3 中选择的值，请从前面的位中借一些（如果这些位为零，则将其复制到下一个位组）。
5.  现在你有了 char 0 的下半部分和 char 1 的上半部分。
6.  回到第 2 步获取接下来的 4 位，直到到达哈希的末尾
7.  检查字符串中是否没有值为 0 的字符。

代码会有点复杂，因为存在各种边缘情况（例如哈希 01000000），并留给读者作为练习；）。

**编辑：我完全错过了`h % 211`手术。**正如 CodesInChaos 演示的那样，这使它变得更加容易。

# java - 如何在 Java 中将非常大的二进制字符串转换为八进制

> ID：14292049
> 
> 赞同：5
> 
> 时间：2013-01-12T09:37:15.440
> 
> 标签：java

我的 Java 代码中有 1 个字符串变量，它包含大的二进制数字。我怎样才能转换它

```
String binary2 = JTextArea.gettext(); // this is a String variable
Long binary3 = Long.parseLong(binary2);
System.out.print(Long.toOctalString(binary3)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T09:42:57.770

您可以使用`BigInteger`更适合在您的解决方案中使用的类。它有一个重载`toString()`方法，它采用*基数*（在你的情况下基数 = 8）。

```
String largeBinary = "10101010100000100111011010101";
String octalVersion = (new BigInteger(largeBinary,2)).toString(8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T09:39:59.793

每三个二进制数字（`0`或`1`）正好代表一个八进制数字（从`0`到`7`）。

所以我认为算法很简单：遍历每 3 个后续字符并将它们转换为一个八进制数字：

```
"000" -> "0"
"001" -> "1"
"010" -> "2"
"011" -> "3"
...
"111" -> "7" 
```

如果字符串的长度不是 3 的倍数，则在开始时需要格外小心。示例：

```
"1001001110"

"10|101|001|110"
  2|  5|  1|  6 
```

这种方法不需要解析字符串，也不需要额外的内存。它可以在任意长的输入上工作，而且速度超级快

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T10:06:12.267

一个`long`值可以容纳最多[2^63-1](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#MAX_VALUE)的任何数字，这对于许多应用程序来说已经足够了。您需要做的就是为[parseLong(String string, int radix)](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)方法（和[toString(Long number, int radix)](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#toString%28long,%20int%29)方法）提供适当的*基数*参数。

```
long number = Long.parseLong(binaryString, 2);
String octalString = Long.toOctalString(number); // or Long.toString(number, 8); 
```

# c++ - 如何获得指针的头部？

> ID：14292051
> 
> 赞同：1
> 
> 时间：2013-01-12T09:37:37.247
> 
> 标签：c++, linux, pointers

我想知道，获取给定内存地址的头指针的最佳方法是什么？例如，如果`p`分配在地址`0`大小为`32 bytes`我如何`0`从地址返回`12`？换句话说，从一个地址进一步回到它的数据结构中，回到“主地址”。那可能吗？

欢迎任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:41:48.427

对于结构，这可以使用`container_of`宏来完成，前提是你知道它的类型并且你有一个指向它的成员的指针（例如，如果你有一个指向成员的指针，则获取结构的指针）。`malloc`除非您具有已遍历的长度或当前所处的偏移量，否则使用此方法完成的内存分配是不可能的。

# ruby-on-rails - 使用 mongoid 的 :include 选项时 to_json 很慢

> ID：14292054
> 
> 赞同：2
> 
> 时间：2013-01-12T09:37:48.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

例如，我有两个文件

```
class Task
  include Mongoid::Document

  field :name, type: String
  belongs_to :person
end 
```

和

```
class Person
  include Mongoid::Document

  field :name, type: String
  has_one :stage
end 
```

我的控制器中有一个方法

```
def index
  tasks = Task.all
  render :json => tasks.to_json(:include => :person)
end 
```

查看生成的查询，我看到它为每个任务查找人员（目前有 3 个任务）

```
MOPED: 127.0.0.1:27017 QUERY        database=pipeline_development collection=tasks selector={} flags=[:slave_ok] limit=0 skip=0 fields=nil (0.3619ms)
MOPED: 127.0.0.1:27017 QUERY        database=pipeline_development collection=people selector={"$query"=>{"_id"=>"50f12eb2cce8b43b05000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (0.1998ms)
MOPED: 127.0.0.1:27017 QUERY        database=pipeline_development collection=people selector={"$query"=>{"_id"=>"50f12eb2cce8b43b05000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (0.3881ms)
MOPED: 127.0.0.1:27017 QUERY        database=pipeline_development collection=people selector={"$query"=>{"_id"=>"50f12eb2cce8b43b05000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (0.2272ms) 
```

这实际上可以加起来（在我的数据库中每次查找的时间实际上是 25 毫秒而不是 0.3 毫秒）并导致不合理的缓慢。

对于如何解决这个问题，有任何的建议吗？

**编辑**

我尝试急切加载

```
def index
  tasks = Task.all.includes(:person)
  render :json => tasks.to_json(:include => :person)
end 
```

但它似乎并没有改变任何东西

# java - 当我尝试连接到 URL 时，为什么会收到“不支持 HTTP 版本”的回复？

> ID：14292060
> 
> 赞同：3
> 
> 时间：2013-01-12T09:39:16.140
> 
> 标签：java, url, tomcat, httpresponse, httpurlconnection

以下代码段尝试连接到 url。该 url 还发送一个名为`FileNames`. 但是当我运行这个片段时，我总是得到`HTTP Version Not Supported`回复。可能是什么原因？

```
try {
  URL url = new URL(AddressInformation.clientAddressToSendFileNames + URLEncoder.encode(list.toString(), "UTF-8")); // STATEMENT-1
  HttpURLConnection connection = (HttpURLConnection) url.openConnection();

  if(connection.getResponseCode() == 200) {
    // File names sent to the client that requested it
    System.out.println("File names sent");
  } else {
     // Error : While trying to send the file names
     System.out.println("Unable to send file names");
     System.out.println("RESPONSE CODE ------->>>>" + connection.getResponseMessage());
   }
} catch(Exception exc) {
   exc.printStackTrace();
  } 
```

在 STATEMENT-1 中，`AddressInformation.clientAddressToSendFileNames`对应于

`http://localhost:8084/D Nappster/ReceiveFileNames?FileNames=`.

我正在运行 Tomcat 7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T09:56:35.743

您的 URL 似乎无效（其中包含一个空格），但 URL 构造函数没有检测到这一点。

相反，您可以使用`URI`将为您正确编码事物的构造函数，而无需担心，然后将其转换为 URL：

```
URI uri = new URI("http", null, "thehost", theport, "thepath", "thequery", null);
URL url = uri.toURL(); 
```

当然，这需要更改您的`AddressInformation`.

有关更多详细信息，请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/net/URI.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T13:53:08.047

好吧，就我而言，我解决了这个问题，在 httpConnection.getResponseCode() 语句之前在我的 url 中进行了替换：用 %20 替换空格。

前任：

```
String url = "http://localhost:8080/Service/methodName?imagem=MY IMAGE NAME";
url = url.replace(" ", "%20");
```

替换后，网址将如下所示：

```
http://localhost:8080/Service/methodName?imagem=MY%20IMAGE%20NAME
```

为了测试它，尝试将 url 直接放入浏览器中。

# java - 暂停执行直到子对话框关闭

> ID：14292071
> 
> 赞同：1
> 
> 时间：2013-01-12T09:40:24.063
> 
> 标签：java, swing, jframe, jdialog

我正在尝试打开一个`JDialog`from `JFrame`。我想暂停执行，直到关闭子对话框，但主框架正在连续执行而没有任何暂停。我正在使用以下代码。

什么是替代解决方案？

```
Class NewFrame extends JFrame

 NewFrame()

  try 
    {
       NewDialog frm = new NewDialog();
       frm.show();

       JOptionPane.showMessageDialog(null,"yes");
     }
  catch(Exception ex)
   {
   ex.printStackTrace();
  }
 }
} 
```

在上面的程序中，我希望在关闭对话框时显示一条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:01:48.950

确保它`NewDialog`扩展自`JDialog`并设置为模态 ( `setModal(true)`)。您可能想看看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# css - CSS媒体查询不评估为真

> ID：14292073
> 
> 赞同：0
> 
> 时间：2013-01-12T09:40:27.490
> 
> 标签：css, firefox, media-queries

我正在尝试使用 @import 样式媒体查询包含浏览器特定的 CSS，如下所示：

```
<style type="text/css">@import url(foo.css) all and (-moz-box-sizing: content-box);</style> 
```

foo.css 然后有：

```
.myStyle { -moz-box-sizing: border-box; } 
```

我的想法是我将包含用于 Firefox (Gecko/Mozilla) 浏览器的 foo.css。但是，看起来 foo.css 从未应用于 Firefox。所以：

1.  如何在 Firefox 中调试 @import 媒体查询未评估为真的原因。我已经通过“InspectQ”进行了检查，以确保 -moz-box-sizing 确实是我正在使用的浏览器中的上下文框。但无论出于何种原因，该媒体查询表达式显然正在评估为假。我可以使用什么工具在运行时查看该评估。

2.  有没有人看到那个媒体查询有什么问题？

3.  有没有更常见的方法来使用@import 风格的媒体查询来检测 Mozilla 浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:48:39.993

[媒体查询规范](http://www.w3.org/TR/css3-mediaqueries)定义了一组您可以使用的特定*媒体功能。*尽管语法类似于属性声明，但您不能将任意 CSS 属性用作媒体功能，因为它不一定有意义。例如，`-moz-box-sizing`在媒体查询中应该意味着什么，甚至对于 Mozilla 浏览器？

在您的情况下，由于只有 Mozilla 浏览器才能理解`-moz-`前缀，您可以直接将您的 CSS 规则放在您的主样式表中，而无需任何条件导入。

# javascript - 从ajax调用加载后图像褪色

> ID：14292076
> 
> 赞同：0
> 
> 时间：2013-01-12T09:40:41.290
> 
> 标签：javascript, jquery, ajax, load

我想在 ajax 调用后加载图像后淡入图像。
这种方式实际上发生了淡入淡出，而不是用户观看图像加载。

有人可以帮帮我吗？

这是 JS 片段：

```
success: function(data){
    $('.main-content').load(function() {
      $(data).hide().prependTo('.main-content').fadeIn('slow');
    });
    return false;
}, 
```

数据将来自 php 回显如下：

```
<div class='left-col-box'>
  <div class='album_image'>
    <div class='image_settings'>
      <button class='delete_button' id='11'>Delete</button>
    </div>
    <img src='/includes/thumber.php?file=../img/$next_id.$ext&width=218&height=218' />
  </div>
</div> 
```

如果上传了 2 张图片，则 2 个加载的框可以有 2 个 left-col-box 字符串。
我希望在`fadeIn`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:49:27.543

```
 loader.show()  //show some loading image
 $('img',data).load(function(){
      loader.hide //hide loader once img is loaded
          $(data).prependTo('.main-content');
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:51:07.173

如果回调`data`中`success`的 是生成的 HTML，您需要先附加它，然后隐藏它，然后再将其淡入。

不确定是否`$(data).hide()`按预期工作，因为那时`data`还没有在 DOM 中。

尝试以下操作（我认为您不需要加载）：

```
success: function(data){
    $(data).prependTo('.main-content').find('div.album_image img').hide().fadeIn('slow');
    return false;
}, 
```

* * *

[**DEMO**](http://jsfiddle.net/trLJ8/) - 使用上面的代码加载图像并慢慢淡入

* * *

上面的 DEMO 使用了建议的代码并预先添加了生成的 HTML，然后找到图像标签，隐藏它，然后慢慢淡入。

当然，如果您`img`预先生成隐藏标签，例如使用 a`display: none`或类似标签，那么您只需要：

```
$(data).prependTo('.main-content').find('div.album_image img').fadeIn('slow'); 
```

# java - 在 Eclipse 中开始使用 java 持久性需要什么？

> ID：14292082
> 
> 赞同：-1
> 
> 时间：2013-01-12T09:41:09.643
> 
> 标签：java, jpa, persistence

我需要在项目中使用 JPA。我以前没有使用 JPA 的经验，而且我通过互联网资源阅读的内容有点令人困惑。我不知道我是否应该使用 Hibernate、EclipseLink 或其他。

作为初学者，您有什么可以推荐给我的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T09:53:17.550

参考这个[hibernate-and-mysql](http://devbank.wordpress.com/2011/05/25/jpa-stand-alone-project-with-hibernate-and-mysql/)

# javascript - 在 javascript 中显示/隐藏 3 个或更多文本块

> ID：14292084
> 
> 赞同：0
> 
> 时间：2013-01-12T09:41:15.420
> 
> 标签：javascript

我想要一个在 javascript 中显示/隐藏 3 个或更多文本块的代码。我在这里找到了这个解决方案[Show/Hide On Click](https://stackoverflow.com/questions/9213357/show-hide-on-click)但仅适用于 2 块文本。

html:

```
<a onclick="showText('text1','text2')" href="javascript:void(0);">Show Text 1</a>
<div id="text1" class="hide"> text1 </div>
<a onclick="showText('text2','text1')" href="javascript:void(0);">Show Text 2</a>
<div id="text2" class="hide"> text2 </div> 
```

CSS：

```
div.hide { display:none; [your properties]; }
div.show { [your properties]; } 
```

Javascript：

```
function showText(show,hide)
{
document.getElementById(show).className = "show";
document.getElementById(hide).className = "hide";
} 
```

如何修复它以使其适用于 3 个以上的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:45:51.163

例如，此函数将通过添加必要的类来显示/隐藏任意数量的元素：

```
function showText(showElements, hideElements)
{
 for (var i=0;i<showElements.length; i++) {
  document.getElementById(showElements[i]).className = "show";
 }

 for (var i=0;i<hideElements.length; i++) {
  document.getElementById(hideElements[i]).className = "hide";
 }
} 
```

第一个参数是包含要显示的元素 ID 的数组，第二个参数是要隐藏的元素的另一个数组。

用法：

```
showText(['id1', 'id2'], ['id3', 'id4']); 
```

# html - 篡改 URL 后 CSS 未加载

> ID：14292091
> 
> 赞同：0
> 
> 时间：2013-01-12T09:41:44.200
> 
> 标签：html, url, css, url-rewriting

我在本地主机上运行我的测试站点。
当我使用 URL 加载它时：
**localhost/projects/forums/index.php**

![在此处输入图像描述](../Images/663419ef8959994a090516c82db2d948.png)

看起来像这样（如预期）
但是当

我给 URL:
**localhost/project/forums/index.php/** ( / 在 index.php 之后)

CSS不加载。

![在此处输入图像描述](../Images/6cb5a1b1c1b2d60dbc5c26121746d7d6.png)

看起来像这样。

谁能告诉我如何解决这个问题？
我在很多网站上都看到过同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:55:30.063

任何一个：

*   不要停留`/`在页面 URL 的末尾
*   测试脚本中的 URL，如果不是您要使用的规范 URL，则进行 301 重定向
*   对于您的链接（包括`<link>`s），使用根相对 URL 而不是当前文档的相对 URL（即以 开头的 URL `/`）

我自己会用这三个。

# linux - 无法使用套接字将客户端连接到服务器

> ID：14292096
> 
> 赞同：0
> 
> 时间：2013-01-12T09:42:18.543
> 
> 标签：linux, sockets, client

当我尝试将客户端连接到服务器时遇到问题。运行方法是：服务器 51717 和客户端 localhost 51717。
我的问题是，当我运行客户端时，我在命令行上收到此错误：`No command 'client found, did you mean : Command 'jclient' from package 'julius' (multiverse). client :command not found`。我必须在运行客户端时指定服务器正在运行。如果有人知道如何解决这个问题，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:48:24.093

我猜您想在当前目录中运行程序。您可以使用的命令如下：

`./server 51717`

`./client localhost 51717`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:57:51.560

`gcc -o client client.c`编译源文件并在当前目录中`client.c`创建一个二进制文件。`client`

由于当前目录不在您的 $PATH 中，您必须明确告诉您 shell 使用`./client`.

如果您只是键入`client`您的 shell 搜索 $PATH 并没有找到任何名为 client 的工具并试图“有帮助”告诉您 ubuntu 包“julius”包含一个命令“jclient”——但这不是您想要的。;)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T12:08:55.530

我认为您的应用程序使用[Julius](http://julius.sourceforge.jp)。检查是否安装正确，您可以使用[表单讨论](https://groups.google.com/forum/?fromgroups=#!topic/chromium-os-discuss/HJUtE4TzLhw)解决问题。

# jquery - 当客户端浏览器不支持事件时，jquery 向服务器触发错误消息

> ID：14292097
> 
> 赞同：0
> 
> 时间：2013-01-12T09:42:24.047
> 
> 标签：jquery, modernizr

当浏览器不支持 jquery 事件时，我想向服务器发送错误消息。例如*，chrome 浏览器中的单选按钮不会触发 blur() 事件*。我如何识别这一点并将错误消息发送到服务器？

**更新**

我在单选按钮上尝试了 Modernizr.hasEvent 以进行模糊事件。即使它返回真正的模糊事件，谷歌浏览器中也没有被调用。在谷歌浏览器中尝试下面的 jsfiddle。

**html**

```
<input type = 'radio' id = 'r1' name = 'r1' value = 'R1'>R1</input>
<input type = 'radio' id = 'r2' name = 'r1' Value = 'R2'>R2</input>
<input type = 'text' id = 'r3'  Value = ''></input> 
```

**js**

```
alert(Modernizr.hasEvent('blur',$('#r1')));
alert(Modernizr.hasEvent('blur',$('#r3')));
$('#r1').blur(function(){
  alert('blur is called')
});
$('#r3').blur(function(){
  alert('blur is called')
}); 
```

[http://jsfiddle.net/nUN8k/23/](http://jsfiddle.net/nUN8k/23/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:37:06.463

chrome 的问题不在于它不支持`blur`单选按钮。问题是单选按钮从一开始就没有获得焦点。

[在你的小提琴](http://jsfiddle.net/nUN8k/23/)中试试这个：

测试1：

*   点击 R1
*   点击 R2
*   点击离开

该事件不会触发，但也没有显示焦点（橙色边框）。

测试 2：

*   点击 R3
*   按 Shift+tab（并关闭模糊警报）。R2 应该被关注但不被选中。
*   按左键。R1 被选中并聚焦。
*   点击离开。R1 注册了一个模糊事件。

因此，Chrome 支持该事件-*只是*它不会在您期望的时候触发。

解决方法是在单击单选按钮时手动聚焦，以便获得跨浏览器*一致*（不仅仅是有效）的行为：

```
$("input").click(function(){
    $(this).focus()
}) 
```

[http://jsfiddle.net/nUN8k/24/](http://jsfiddle.net/nUN8k/24/)

测试——我没有检查它是否有效，我不知道它是否在modernizr中实现——将是单击一个隐藏的输入并查看它是否获得焦点。但是，可能会有一些误报（误认为“不要关注隐藏元素等”）......

# scala - 如何清除 Scala REPL 中的所有变量

> ID：14292108
> 
> 赞同：31
> 
> 时间：2013-01-12T09:43:19.497
> 
> 标签：scala, read-eval-print-loop

有快捷指令吗？`Ctrl+d`每次我想清除所有变量时，我都不想运行 Scala 。重置，清除和清洁不起作用，`:help`并且没有列出任何内容

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-12T09:48:19.017

您可以使用`:reset`

```
Welcome to Scala version 2.10.0-RC2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).
Type in expressions to have them evaluated.
Type :help for more information.

scala> val a = 1
a: Int = 1

scala> val b = 3
b: Int = 3

scala> :reset
Resetting interpreter state.
Forgetting this session history:

val a = 1
val b = 3

Forgetting all expression results and named terms: $intp, a, b

scala> 
```

# magento - Magento 安装/升级脚本中 $installer 变量的使用

> ID：14292111
> 
> 赞同：1
> 
> 时间：2013-01-12T09:44:02.047
> 
> 标签：magento

我在 Magento wiki 的某个地方读到你应该有充分的理由*不*使用

```
$this = $installer

// do the rest with $installer 
```

我认为这是我唯一一次*盲目地*遵循 Magento 约定。

我知道这不是关于命名，而是范围，以及法师按顺序*包含*升级脚本的事实，但我仍然不明白。

为什么你认为这样的约定是强加/首选的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:02:45.700

> 我知道这不是关于命名，而是关于范围

抱歉，这是命名约定，仅此而已。`$installer`是安装程序类（的实例）的[副本](http://php.net/manual/en/language.oop5.references.php)`Mage_Core_Model_Resource_Setup`。使用变量`$installer`只是另一种制作自记录代码的方法。

# css - 如何使用 Twig 在内部渲染包含带有 }} 序列的 CSS 的模板

> ID：14292112
> 
> 赞同：0
> 
> 时间：2013-01-12T09:44:13.673
> 
> 标签：css, templates, twig

CSS 片段中的序列`}}`被解析为 Twig *delimiter*。

```
<style>
    @media (touch-enabled),
    (-webkit-touch-enabled),
    (-moz-touch-enabled),
    (-o-touch-enabled),
    (-ms-touch-enabled),
    (modernizr){#touch{top:9px;position:absolute}}
</style> 
```

我应该怎么做才能克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:17:06.157

我深入研究了文档，终于找到了一个不错的解决方案：

```
{% raw %}(modernizr){#touch{top:9px;position:absolute}}{% endraw %} 
```

这样做会使 Twig 词法分析器“开心”，并且我的模板的问题一劳永逸地结束了。

# iphone - 如何在 iPhone 中自动允许当前位置？

> ID：14292114
> 
> 赞同：2
> 
> 时间：2013-01-12T09:44:38.050
> 
> 标签：iphone, ios, notifications, uialertview, cllocationmanager

我在 iPhone 应用程序中工作，`CLLocationManager`用于开发我的应用程序，当我运行该应用程序时，它会显示一个警报视图，例如“想使用您当前的位置”。然后 prees Ok 继续它。

但是我不想显示警报视图，是否可以让应用在没有提示的情况下跟踪用户的位置？

提前致谢

![在此处输入图像描述](../Images/184c3f3a2aec422118792e9debfe0098.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T10:17:32.473

此警报视图是强制性的，无法避免，除非您以某种方式创建自己的位置跟踪客户端，但是指南禁止在没有提示的情况下访问位置，Apple 将拒绝您的应用程序。

原因是用户知道您正在跟踪您的位置——安全性和偏好。

你为什么要首先避免警报视图？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T10:11:27.807

出于隐私和安全原因，系统会提示此对话框。如果您设法避免这种情况并访问位置数据，那么您的应用肯定会在 App Store 批准过程中被拒绝。你为什么要摆脱它？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T10:12:06.357

不，我 100% 确定无法阻止此警报视图

但我认为当您单击不允许时，您的 CLLocationManager 将停止，但您可以再次将其从 iphone 设置中允许

# caching - Yii 关系导致不存在的项目（缓存问题？）

> ID：14292121
> 
> 赞同：0
> 
> 时间：2013-01-12T09:45:32.537
> 
> 标签：caching, yii, yii-relations

我已经设置了关系：`'teamDrivers' => array(self::HAS_MANY, 'TeamDriver', 'team_id')`在我的团队模型中

因此，如果我愿意，我可以：`print_r($this->teamDrivers);`在我的团队中。只是为了演示。

现在的问题是，这种代码会生成一个已经从数据库中删除的项目列表！通过`CActiveDataProvider`这些`CDbCriteria`项目未到达。

如果我从我的应用程序中注销然后重新登录，一切似乎都正常。

那么是否有一些缓存可以处理这些关系，或者这个谜团是什么？以及如何清除该缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:40:05.660

在我的情况下，UserIdentity 对象有旧信息，并且团队通过了它。令人耳目一新的是解决方案。

# jquery - 只读属性切换

> ID：14292122
> 
> 赞同：5
> 
> 时间：2013-01-12T09:45:43.290
> 
> 标签：jquery, readonly

我有一个输入类型

```
<input type="text" name="name" id="name" readonly="true" /> 
```

我有一个复选框，单击该复选框将导致文本框可编辑...

```
<input type="checkbox" name="ch" id="ch" onclick="check()" /> 
```

我怎么解决它？？？

我使用脚本

```
function check()
{
if(document.getElementById('ch').checked=true)
     document.getElementById('ch').readonly=false;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-09T15:24:08.567

这是一个较短的替代方案（假设您将正确的 id 添加到控件中）：

```
$("#ch").change(function() {
    $("#name").prop("readonly", !$(this).is(":checked"));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T09:51:48.060

尝试这个

```
function check() {
   document.getElementById('name').readOnly = 
                   !document.getElementById('ch').checked;
} 
```

# c# - String.Concat 和线程安全？

> ID：14292125
> 
> 赞同：0
> 
> 时间：2013-01-12T09:45:52.303
> 
> 标签：c#, .net, string, multithreading

*在[解决了这个问题](https://stackoverflow.com/questions/9910486/string-concat-inefficient-code)之后，我还有一个问题。*

*我得到了两个很好的答案，但我仍然无法找到这实际上是**如何**发生的：（故障情况怎么会发生）：*

我将从一个例子开始：

```
public void Do(string [] g)
{
   g=null;     //<========
}

void Main()
{
    var t=new string[3];
    t[0]="1";   t[1]="1";   t[2]="1";
    Do( t);
    Console.WriteLine ( t.Length);
} 
```

注释行可以在不同的线程中执行，但每个线程都有**自己的** `g`变量！
（请记住，我*无法*将项目添加到数组中。因为数组长度是在创建时创建的）

无论我将使用该*函数* `Do`做什么- （无论在哪个线程中），Console.Writeline 结果将始终为`3`（除非使用`ref`）。

所以让我们看看真正的代码：

```
 public static string Concat(params string[] values)
  #1  {
  #2      if (values == null)
  #3       {
  #4            throw new ArgumentNullException("values");
  #5       }
  #6        int totalLength = 0;
  #7        string[] strArray = new string[values.Length];
  #8        for (int i = 0; i < values.Length; i++)
  #9          {
  #10            string str = values[i];
  #11            strArray[i] = (str == null) ? Empty : str;
  #12            totalLength += strArray[i].Length;
  #13            if (totalLength < 0)
  #14            {
  #15                throw new OutOfMemoryException();
  #16            }
  #17         }
  #18        return ConcatArray(strArray, totalLength);
  #19   } 
```

我的说法是：一旦我在 #1 上，在线程中`X`，这个线程将永远拥有长度为 3 的数组。

如果*另一个*线程想要销毁/更改数组长度（我无法理解*如何*，因为数组具有固定长度，他所能做的就是制作它`null`）-它将有一个*不同*的指针地址副本。

我一定在这里遗漏了一些东西。

*   我错过了什么？

*   其他线程可以执行哪些代码会导致错误？（假设我们不复制数组）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T10:24:27.493

我在原始线程中查看了 Jon Skeet 和 Eric Lippert 的答案，我相信你误解了他们的答案。他们担心，如果您不将字符串复制到新数组中，那么有人会出现并更改`{"1","2","3"}`为`{"a very very", "long string", "(but much longer, yes?"}`在`ConcatString`首次评估输入和执行连接之间。

请注意，第 12 行不处理*输入数组*的长度，而是处理*最终输出字符串*的长度。所有这些检查都处理连接的结果，而不是输入数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T10:29:44.737

> 其他线程可以执行哪些会导致错误的代码是什么？

```
string[] data = { "1", "2", "3" };
ThreadPool.QueueUserWorkItem( () => { data[0] = "one"; } );
string total = String.Concat(data); 
```

如果没有中间数组，就会出现竞争条件，线程可能会`data[0]` *在*其长度被添加到之后`totalLength`但*在*（可能是不安全的）调用之前发生变化`ConcatArray()`。然后，低级方法会将 5 个字符复制到大小为 3 的缓冲区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T10:00:41.610

数组引用被传递到方法中，因此每个线程（在这种情况下）都有自己的引用 g。每个线程都可以更改它自己的引用指向的内容（例如，g = null），但是当您访问 g 中的项目时，例如 g[0]，两个线程将访问同一个项目。

所以，问题是`g[0] = null`，不是`g = null`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T10:02:50.443

以下几行确保了数据一致性，以防数组内容在其他线程中被修改

```
 #11            strArray[i] = (str == null) ? Empty : str;
  #12            totalLength += strArray[i].Length;
  #18        return ConcatArray(strArray, totalLength); 
```

比赛仍然存在，但在第号线之前。11，但是如果使用原始数组（以防数据损坏）错误的信息可能会传递给`ConcatArray`函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T10:27:38.063

John Skeet 和 Eric Lippert 的意思是，如果在计算长度后数组内容可能发生变化，那么总字符串长度的计算会导致不同的结果。因为 concat 操作是在非托管代码缓冲区中完成的，所以如果之后的字符串长度确实发生了变化，则可能会发生溢出。

为了说明这个问题，这里复制了他们正在谈论的问题：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static string[] arr = new string[] { "1", "2", "3" };
        static string[] arr2 = new string[] { "1111", "2222222", "2222222222222222222222" };

        [MTAThread]
        public static void Main()
        {
            ThreadStart[] funcs = Enumerable.Range(0, Environment.ProcessorCount * 4).Select(i => new ThreadStart(MutateArray)).ToArray();
            foreach (var func in funcs)
                new Thread(func).Start();
            Console.ReadLine();
        }

        static void MutateArray()
        {
            Random rand = new Random();
            while (true)
            {
                int i = rand.Next(arr.Length);
                // swap array contents with contents from another array so arr will always
                // contain a mixture of arr and arr2 without knowing at which point of time which contents
                // are inside it.
                lock (arr)
                {
                    string tmp = arr[i];
                    arr[i] = arr2[i];
                    arr2[i] = tmp;
                }

                Do(arr); 

            }
        }

        static void Do(string[] g)
        {
            AllocateBufferWithRightLength(g, StrLen(g));
        }

        static void AllocateBufferWithRightLength(string[] g, int strLen)
        {
            int newLen = StrLen(g);
            if (strLen != newLen)
            {
                throw new Exception("Invariant broken");
            }
        }

        static int StrLen(string[] g)
        {
            int strLen = 0;
            foreach (var str in g)
            {
                if (str != null)
                    strLen += str.Length;
            }
            Thread.Sleep(1);
            return strLen;
        }

    }
} 
```

# objective-c - 如何识别 Objective-C 样式枚举中的第一个元素？

> ID：14292128
> 
> 赞同：0
> 
> 时间：2013-01-12T09:46:09.013
> 
> 标签：objective-c, nsmutablearray, fast-enumeration

我有一个`NSMutableArray`of `NSNumbers`，我想用 Objective-C 风格的枚举来枚举所有这些。这是我到目前为止所做的。

```
for ( NSNumber* number in array )
{
    //some code
} 
```

我希望能够快速识别第一个物体，我当然可以做到，

```
if ( [array indexOfObject:number] == 0 )
{
    //if it's the first object
} 
```

有什么办法可以更快地做到这一点？当然还有老式的 C 风格的方式，先从数组中取出对象，枚举完再放回去。只是想知道是否有更好的技术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T09:52:25.153

您可以尝试使用提供当前正在枚举的对象的索引的方法：

```
[array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if (idx == 0) {
        // this is the first object
    }
}]; 
```

或者，如果您只是想访问数组的第一个对象：

```
id obj = [array objectAtIndex:0]; 
```

或使用新的 Objective-C 样式/语法：

```
id obj = array[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T09:53:04.860

此解决方案比访问和比较第一个数组元素更快：

```
BOOL firstIteration = YES;
for (NSNumber *number in array) {
    if (firstIteration) {
        // Handle first iteration
        firstIteration = NO;
    }
    // Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T09:49:00.377

在快速枚举中，您不能更改数组。因此，如果要删除，则必须使用旧式`for(;;)`循环。

要找到第一个对象，只需使用`[array objectAtIndex:0]`

# php - 通过 SimpleXMLElement 和 XPath (PHP) 访问元素

> ID：14292129
> 
> 赞同：-3
> 
> 时间：2013-01-12T09:46:15.310
> 
> 标签：php, xml, xpath, simplexml

> **可能重复：一个简单的程序，用于 CRUD 节点和 xml 文件**[XPath 和 PHP](https://stackoverflow.com/questions/14280450/xpath-and-php-nothing-works-properly)
> [的节点值：没有正常工作](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

```
$XML = <<<XML
<items>
    <item id="123">
        <name>Item 1</name>
    </item>
    <item id="456">
        <name>Item 2</name>
    </item>
    <item id="789">
        <name>Item 3</name>
    </item>
</items>
XML;

$objSimpleXML = new SimpleXMLElement($XML);

echo $objSimpleXML->item[2]->name; // output: Item 3 (OK)
echo '<br><pre>';
print_r($objSimpleXML->xpath('./item[1]/name')); // output: empty Array!!! 
```

你好！如何使用纯 xpath 查询获取“项目 3”作为输出？（我的提议输出一个空数组。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:31:49.243

这是因为 xpath 集合**索引是基于 1 的，**而不是我们最熟悉的基于 0 的数组。

[由于xpath 函数返回数组](http://php.net/manual/en/simplexmlelement.xpath.php)，因此无法`Item 3`使用纯 xpath 查询。您必须先存储结果并使用数组索引来访问元素。

```
$item = $objSimpleXML->xpath('./item[3]/name');
$str = $item[0]; 
```

从 W3C 的[XPATH 1.0 规范](http://www.w3.org/TR/xpath/#NT-Predicate)中，这些被称为[谓词](http://www.w3.org/TR/xpath/#predicates)

> 轴是正向轴或反向轴。仅包含上下文节点或按文档顺序位于上下文节点之后的节点的轴是正向轴。仅包含上下文节点或按文档顺序位于上下文节点之前的节点的轴是反向轴。因此，祖先轴、祖先或自我轴、前轴和前兄弟轴是反向轴；所有其他轴都是正向轴。由于 self 轴始终最多包含一个节点，因此它是正向轴还是反向轴都没有区别。节点集的成员相对于轴的接近位置定义为节点集中的节点位置，如果轴是正向轴，则按文档顺序排序，如果轴是反向文档顺序，则按文档顺序排序是反向轴。**第一个位置是1**.

# haskell - 打印两个数字之和 Haskell

> ID：14292136
> 
> 赞同：3
> 
> 时间：2013-01-12T09:48:26.213
> 
> 标签：haskell

如何打印两个数字之和的结果？

```
 main:: IO()
 main = do putStrLn "Insert the first value: "  
        one <- getLine  
        putStrLn "Insert the second value: "  
        two <- getLine    
        putStrLn "The result is:"
    print (one+two) 
```

这给了我一个错误：

```
 ERROR file:.\IO.hs:3 - Type error in application
  *** Expression     : putStrLn "The result is:" print (one + two)
  *** Term           : putStrLn
  *** Type           : String -> IO ()
  *** Does not match : a -> b -> c -> d 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T10:41:00.523

尝试使用`readLn`而不是`getLine`.

`getLine``String`在`IO`monad中返回 a并且`String`不能添加 s。

`readLn`具有多态返回类型，编译器推断返回类型是`Integer`（在`IO`monad 中），因此您可以添加它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T10:02:51.170

我猜测您的错误与不使用括号有关。

此外，由于`getLine`会生成一个字符串，因此您需要将其转换为正确的类型。我们可以使用`read`它从中获取一个数字，尽管如果无法解析字符串可能会导致错误，因此您可能希望在读取之前检查它是否仅包含数字。

```
print (read one + read two) 
```

根据优先级，变量可能会被解析为作为参数`print`而不是 to `+`。通过使用括号，我们确保变量与 相关联，`+`并且只有结果是 for `print`。

最后，确保缩进是正确的。您在此处粘贴的方式与 do 表达式不正确。第一个 putStrLn 应该与其余的缩进级别相同 - 至少 ghc 抱怨它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T12:14:51.750

您可以使用以下方式修改代码`read :: Read a => String -> a`

```
 main:: IO()
 main = do putStrLn "Insert the first value: "  
        one <- getLine  
        putStrLn "Insert the second value: "  
        two <- getLine    
        putStrLn "The result is:"
    print ((read one) + (read two)) 
```

# vb6 - 在vb6中将一个double分成几部分

> ID：14292137
> 
> 赞同：0
> 
> 时间：2013-01-12T09:48:26.833
> 
> 标签：vb6

我想将一个 double 分成几部分，而不是四舍五入。

试图使用`int`，`fix`但他们给出了奇怪的结果。

```
MsgBox Int(17.82 / 1.62) 'gives me 10 but 
MsgBox 17.82 / 1.62 'gives me 11 
```

我想要像 11 这样的结果，但是如何使用`int`或`fix`功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:32:38.670

你问了一个技巧。是的，最简单和最简单的技巧是在被除数上加 0.5，即分子

```
MsgBox Int((17.82 + 0.5) / 1.62) 'should give 11 
```

仅当您想使用 INT 函数时才使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:28:14.023

首先阅读以下内容： [MSDN：Visual Basic 中的算术运算符](http://msdn.microsoft.com/en-ca/library/b6ex274z%28v=vs.80%29.aspx)

然后看看这个：

```
Private Sub Form_Load()
    MsgBox 17.82 \ 1.62 ' returns 9
    MsgBox 17.82 / 1.62 ' returns 11
End Sub 
```

# controls - firstpersoncontrols delta 未定义

> ID：14292140
> 
> 赞同：0
> 
> 时间：2013-01-12T09:48:38.620
> 
> 标签：controls, three.js, undefined, delta

我测试在 three.js 中使用 firstpersoncontrols。但是在复制示例以了解它的工作原理时，我在控制台中总是遇到相同的错误：未定义增量。如果你是一个解释：

```
<!-- upload librarie -->
<script src="../THREEJS03/build/three.min.js"></script>
<!-- upload les modes d'interactions -->
<script src="js/controls/FirstPersonControls.js"></script>

<script src="js/loaders/MTLLoader.js"></script>
<script src="js/loaders/OBJMTLLoader.js"></script>

<!-- upload la detection du webgl -->
<script src="js/Detector.js"></script>

<script>
//detection du webgl
if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

var container;

var camera, cubeCamera, controls, scene, renderer;

var clock = new THREE.Clock();

init();
animate();
//////////////////////// SCENE /////////////////////////////////////
function init() {
    // scene
camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 3000 );
    camera.position.x = 00;
    camera.position.y = 80;
    camera.position.z = 00;

    controls = new THREE.FirstPersonControls( camera );

    controls.movementSpeed = 1000;
    controls.lookSpeed = 0.125;
    controls.lookVertical = true;
    controls.constrainVertical = false;
    controls.verticalMin = 1.1;
    controls.verticalMax = 2.2;
    controls.noFly = true;

scene = new THREE.Scene();

scene.add( camera );

// light

// add ambient lighting
    var ambientLight = new THREE.AmbientLight(0x020202);
    scene.add(ambientLight);

    var pointLight = new THREE.PointLight(0xffffff); //0xffaa00
        pointLight.position.x = -300;
        pointLight.position.y = 300;
        pointLight.position.z = 500;
        scene.add(pointLight);

//SKYBOX (only reflexive)
// Cubic Texture
   var r = "models/world/";
   var urls = [r + "posx.jpg", r + "negx.jpg",
               r + "posy.jpg", r + "negy.jpg",
               r + "posz.jpg", r + "negz.jpg"];

        var textureCube = THREE.ImageUtils.loadTextureCube(urls);

////////////////////////// OBJET ////////////////////////////

var loader = new THREE.OBJMTLLoader();
loader.addEventListener( 'load', function ( event ) {

var object = event.content;
       object.position.y = 0;
   scale = 1;
   scene.add( object );
});
loader.load( 'models/macabann/obj/scene/scene01.obj', 'models/macabann/obj/scene/scene01.mtl' );

var material = new THREE.MeshPhongMaterial( {
//Environnement 
envMap: textureCube,
combine: THREE.MixOperation, 
//Color Application
side: THREE.DoubleSide, 
shading: THREE.SmoothShading
});

///////////////////// FIN OBJET ///////////////////////

/////////////////// RENDERER //////////////////////

//type de rendu (antialias true or false)
renderer = new THREE.WebGLRenderer( { antialias: true } );
renderer.setClearColorHex( 0xf3f3f3, 1 );
renderer.shadowMapEnabled = true;

//dimension du rendu
renderer.setSize( window.innerWidth, window.innerHeight );

// create wrapper object that contains three.js objects
container = document.createElement( 'div' );
document.body.appendChild( container );
container.appendChild( renderer.domElement );

///////////////////// FIN RENDERER ///////////////////////

//////////////////// WINDOWS ////////////////////////

window.addEventListener( 'resize', onWindowResize, false );

}

function onWindowResize() {
       camera.aspect = window.innerWidth / window.innerHeight;
   camera.updateProjectionMatrix();
       renderer.setSize( window.innerWidth, window.innerHeight );
       controls.handleResize();

}
//////////////////////////FIN WINDOWS //////////////////////

function render() {

    var delta = clock.getDelta();
    time = clock.getElapsedTime() * 10;

    }               

function animate() {

    requestAnimationFrame( animate );
            controls.update(delta);

    renderer.render( scene, camera );

    }

</script> 
```

感谢解释和答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:45:12.197

你在这部分有一些问题：

```
function render() {

var delta = clock.getDelta();
time = clock.getElapsedTime() * 10;

}               

function animate() {

requestAnimationFrame( animate );
        controls.update(delta);

renderer.render( scene, camera );

} 
```

您在 render() 函数中定义 delta 变量，这超出了 animate 的范围。尝试将这些行移至 animate() 函数，如下所示：

```
function render() {
  // is this function needed at all?
}               

function animate() {
  var delta = clock.getDelta();
  time = clock.getElapsedTime() * 10;
  requestAnimationFrame(animate);
  controls.update(delta);
  renderer.render( scene, camera );
} 
```

# php - wp_redirect 不工作

> ID：14292152
> 
> 赞同：1
> 
> 时间：2013-01-12T09:49:31.410
> 
> 标签：php, redirect, wordpress-theming, wordpress

我正在尝试发布到页面并在帖子中进行一些 wordpress 插入，但不知何故重定向不起作用，之后。我尝试了以下三个选项：

1.  wp_redirect($位置);
2.  wp_safe_redirect($位置);
3.  header('位置：http://example.com');

这是我想做的：

1.  发布到另一个页面。
2.  查找要上传的文件和上传目录
3.  上传文件。
4.  使用 set_post_thumbnail 设置帖子缩略图
5.  重定向到所需的页面。

脚本一直工作到设置缩略图然后死掉。如果有人想使用它从模板前端上传缩略图，他们可以使用它。

* * *

```
// if you have this in a file you will need to load "wp-load.php" to get access to WP functions. If you post to "self" with this code then WordPress is by default loaded
    require $_SERVER['DOCUMENT_ROOT'] . "/wp-load.php";
    // require two files that are included in the wp-admin but not on the front end. These give you access to some special functions below.
    require $_SERVER['DOCUMENT_ROOT'] . "/wp-admin/includes/file.php";
    require $_SERVER['DOCUMENT_ROOT'] . "/wp-admin/includes/image.php";

    // required for wp_handle_upload() to upload the file
    $upload_overrides = array( 'test_form' => FALSE );

    global $current_user;
    get_currentuserinfo();
    $logged_in_user = $current_user->ID;

    //get user POST information
    global $post;
    $loop = new WP_Query( array( 
                            'posts_per_page' => 1, 
                            'post_type' => "vet-profile", 
                            'order' => "ASC", 
                            'orderby' => "menu_order", 
                            'author'=>"$logged_in_user"
                        )
    );
    while ( $loop->have_posts() ): $loop->the_post();
        $current_postID = $post->ID;
        $current_posttitle = get_the_title(); 
    endwhile;   

    // count how many files were uploaded
    $upload_files = $_FILES[ 'upload_files' ];

    // load up a variable with the upload direcotry
    $uploads = wp_upload_dir();

    // foreach file uploaded do the upload
    //foreach ( range( 0, $count_files ) as $i ) 
    //{
        // create an array of the $_FILES for each file
        $file_array = array(
            'name' => $_FILES['upload_files']['name'],
            'type'  => $_FILES['upload_files']['type'],
            'tmp_name'  => $_FILES['upload_files']['tmp_name'],
            'error' => $_FILES['upload_files']['error'],
            'size'  => $_FILES['upload_files']['size'],
        );

        // check to see if the file name is not empty
        if ( !empty( $file_array['name'] ) ) 
        { ?>
     <?php
            // upload the file to the server
            $uploaded_file = wp_handle_upload( $upload_files, $upload_overrides );

            if ( $uploaded_file ) 
            {
                echo '<script>alert("Image successfully uploaded.\n");</script>';
            } 
            else 
            {
                echo '<script>alert("Fish! some error occured. Please try again.");</script>';
            } 

            // checks the file type and stores in in a variable
            $wp_filetype = wp_check_filetype( basename( $uploaded_file['file'] ), null );   

            // set up the array of arguments for "wp_insert_post();"
            $attachment = array(
                'post_mime_type' => $wp_filetype['type'],
                'post_title' => preg_replace('/\.[^.]+$/', '', basename( $uploaded_file['file'] ) ),
                'post_content' => '',    
                'post_author' => $logged_in_user,
                'post_status' => 'inherit',
                'post_type' => 'attachment',
                'post_parent' => $current_postID,
                'guid' => $uploads['url'] . '/' . $file_array['name']
            );

            // insert the attachment post type and get the ID
            $attachment_id = wp_insert_attachment( $attachment, $uploaded_file['file'], $current_postID );

            // generate the attachment metadata
            $attach_data = wp_generate_attachment_metadata( $attachment_id, $uploaded_file['file'] );

            // update the attachment metadata
            wp_update_attachment_metadata( $attachment_id, $attach_data);

            // set thumbnail to the current post
            set_post_thumbnail( $current_postID, $attachment_id );

            echo '<script>alert("set thumbnail")';
            $location = empty($_POST['redirect_to']) ? get_redirect_link() : $_POST['redirect_to'];
            wp_safe_redirect( $location ); 
            echo '<script>alert("End Loop");</script>';
        } 
```

* * *

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T17:04:28.237

我发现我唯一可以可靠调用的地方是动作挂钩（[http://codex.wordpress.org/Plugin_API/Action_Reference/init](http://codex.wordpress.org/Plugin_API/Action_Reference/init)`wp_redirect` ）的回调函数，因为它在文档中明确指出：`init`

> 在 WordPress 完成加载之后但在发送任何标头之前运行。对于拦截 $_GET 或 $_POST 触发器很有用。

你可能想调查一下。如果这对您不起作用，您可能想尝试的另一件事是使用输出缓冲。这是一个关于如何做到这一点的简洁教程：

[http://tommcfarlin.com/wp_redirect-headers-already-sent/](http://tommcfarlin.com/wp_redirect-headers-already-sent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:18:25.737

```
 echo '<script>alert("set thumbnail")';
    $location = empty($_POST['redirect_to']) ? get_redirect_link() : $_POST['redirect_to'];
    wp_safe_redirect( $location ); 
    echo '<script>alert("End Loop");</script>'; 
```

上面的代码肯定行不通。将某些内容写入输出后，您将无法重定向。我没有检查其余的代码，但如果它像你说的那样工作，删除顶行和底行（或者甚至只是顶行）应该使它全部工作：

```
$location = empty($_POST['redirect_to']) ? get_redirect_link() : $_POST['redirect_to'];
wp_safe_redirect( $location ); 
```

（如果您在 wp-config.php 中启用调试模式，您应该会看到一条错误消息，而不仅仅是白屏。因此，如果这不起作用，您可以将错误复制到此处，我们可以确切地知道问题所在。 )

# jsp - redirect call not working in servlets

> ID：14292156
> 
> 赞同：2
> 
> 时间：2013-01-12T09:50:10.807
> 
> 标签：jsp, redirect

when i try to redirect my `servlet` to error page `"error.jsp"` using `response.sendRedirect("/error.jsp")` it shows page not found error but when i change it to response.sendRedirect("error.jsp"), it works fine!

why is it so? why is relative path not working? `error.jsp` is saved in `WEB-CONTENT` folder. The `dispatcher.foreward(request,response)`, works fine with relative url "/page01.jsp", even though both `page01.jsp` and `error.jsp` are in same directory `WEB-CONTENT`. please explain.

thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T10:02:51.507

First let's clear some vocabulary:

*   `error.jsp` and `./../error.jsp` are examples of *relative* paths

*   `/page01.jsp` and `/app/page.html` are examples of *absolute* paths

Back to your question. When using [`RequestDispatcher`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html) by calling [`ServletContext.getRequestDispatcher(String)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRequestDispatcher(java.lang.String)) you must always forward within your web application and leading slash is necessary (bold mine):

> The pathname must begin with a `/` and is interpreted as relative to the **current context root**.

So when you forward to `/page01.jsp` it is interpreted as: `/your_context/page01.jsp` where `your_context` is the name of your web application.

However when you send redirect to the `/error.jsp` path, servlet container simply sends that address back in 302 response to the browser. Now the browser interprets it as follows: please redirect to `/error.jsp`, an absolute path in the current server. So even if the browser was pointing to `http://example.com/foo/bar/servlet`, this response redirects to `http://example.com/error.jsp`.

It's much different, however, if you simply redirect to `error.jsp` the browser behaves differently. It interprets it as file in current directory. So `http://example.com/foo/bar/servlet` will be redirected to `http://example.com/foo/bar/error.jsp`. And this is what you see.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:54:34.253

If you pass a String starting with '/' to `HttpServletResponse#sendRedirect` the path will be relative to the server and not your application. So, you should pass something like this to get this working:

`response.sendRedirect("/myapp/error.jsp");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:04:48.303

try the servlet mapping in web.xml , instead of calling file using name, just call using value, defined in web.xml.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T11:07:54.203

please remeber some points while using sendRedirect() and getRequestDispacher() in the same page

1) if you use sendRedirect() and getRequestDispacher("").include() in same page always the output of sendRedirect() that is calling url will be printed on UI.

2) 1) if you use sendRedirect() and getRequestDispacher("").forward(req,res) in same page then you will get Excetion "Cannot forward after response has been committed".

# jquery - jQuery添加和限制表单字段

> ID：14292158
> 
> 赞同：0
> 
> 时间：2013-01-12T09:51:01.403
> 
> 标签：jquery, forms, limit

我正在构建一个具有图像上传字段的表单，但是只有第一个是可见的，并且在单击“添加另一个”按钮时会显示其他字段。

我想做的是将这些字段的数量限制为 3。您可以在下面看到我现在拥有的内容，但问题是，当前代码没有考虑到字段的删除。所以如果你添加两个字段，你会得到一个你应该得到的错误，但是如果你删除一个并尝试再次添加它，你不能。

我对 jQuery 的东西有点迷茫，所以非常感谢任何帮助。

```
var limit = 3;
$('.add_image').click(function(e){
if($('#back').length < limit) {
                            e.preventDefault();
                            var newElem =  $('<tr class="images-cont"><td><input type="file" name="front" id="front" size="50" /></td><td class="action"><a  title="Delete image" href="#" class="delete" style="background-image:url(\'<?php echo get_admin_url(); ?>/images/no.png\');"><?php _e("Delete"); ?></a></td></tr>');
                            newElem.appendTo('#images-sort');
count++;
} else {
    alert('You cannot add more than 3 images.')   
}
                        }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:53:25.580

如果您有一个删除按钮，请添加一个递减计数变量的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:21:37.590

```
$('.delete').click(function(){
   $('.images-cont:last').html('<td>A message here</td>');
   count--;
}); 
```

# php - 使用 if 语句检查记录是否存在 msql/php

> ID：14292165
> 
> 赞同：0
> 
> 时间：2013-01-12T09:51:51.037
> 
> 标签：php, mysql, sql

> **可能重复：**
> [php - 检查记录是否存在 db - 错误显示](https://stackoverflow.com/questions/4317173/php-check-record-exists-db-error-show)

我目前正在尝试将用户添加到数据库中。我想检查用户是否存在，如果存在，则只需更新几个字段。如果它没有，那么它应该完全插入一条新记录。

```
$result22 = mysql_query("SELECT COUNT(1) FROM newsite WHERE user = '$username'");

if($result22){
$SQL = "UPDATE newsite SET active = '1' WHERE user = '$username'";
$_SESSION['username'] = $_GET['user'];
$result = mysql_query($SQL);
echo("lol."); // TEST
header("Location: ./share.php?user=$username");

}
if(!$result22){

$SQL = "INSERT INTO newsite (user, active) VALUES ('".$username."', '1')";
$_SESSION['username'] = $_GET['user'];
$result = mysql_query($SQL);
echo("NOPE."); //TEST
header("Location: ./share.php?user=$username");
}
} 
```

我不太确定为什么，但不管它总是输出“lol”。（又名，用户存在。）它完全忽略了另一个如果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:58:37.697

```
$result22 = mysql_query("SELECT COUNT(1) FROM newsite WHERE user = '$username'");

if($result22){ 
```

除非您的 SQL 代码中有错误，否则`mysql_query`返回始终解析为的**结果集**`true`

还：

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[**准备好的语句**](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:12:16.253

也可以使用`mysql_num_rows`函数，返回最后一个结果集的行数

```
if(mysql_num_rows()>0)
{

} 
```

# c# - .net 和 .config 文件

> ID：14292182
> 
> 赞同：1
> 
> 时间：2013-01-12T09:53:45.103
> 
> 标签：c#, asp.net, xml, configuration-files

我将以下内容存储在我的 asp.net 网站根文件夹内的 stores.config 文件中。

```
<configuration>
    <appSettings>
        <add key="ClientId" value="127605460617602"/>
        <add key ="RedirectUrl" value="http://localhost:49548/Redirect.aspx"/>
    </appSettings>
</configuration> 
```

我如何使用`string Clientid = ConfigurationManager.AppSettings["ClientId"].ToString();`从该文件中调用它？调用它当然不起作用，因为它正在 web.config 中寻找它。

我不想将 appSettings 放在 web.config 文件中。这是允许的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T09:57:48.550

您可以从[_](http://msdn.microsoft.com/en-us/library/aa903313%28v=vs.71%29.aspx)`stores.config``web.config`

```
<configuration>
  <appSettings file="stores.config">
  </appSettings>
<configuration> 
```

您的`stores.config`文件应具有以下结构：

```
<appSettings>
    <add key="ClientId" value="127605460617602"/>
    <add key ="RedirectUrl" value="http://localhost:49548/Redirect.aspx"/>
</appSettings> 
```

或者，您也可以使用： [ConfigurationManager.OpenMappedExeConfiguration Method (ExeConfigurationFileMap, ConfigurationUserLevel)](http://msdn.microsoft.com/en-us/library/ms134269.aspx)

例如：

```
// Map the new configuration file.
var configFileMap = new ExeConfigurationFileMap();
configFileMap.ExeConfigFilename = "stores.config";

 // Get the mapped configuration file
var config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);

var clientid = config.AppSettings["ClientId"]; 
```

# javascript - 需要生成像iicd.ac.in这样的动画

> ID：14292183
> 
> 赞同：-1
> 
> 时间：2013-01-12T09:54:01.507
> 
> 标签：javascript, jquery, css, animation

我需要开发一个类似于本[网站的横幅](http://www.iicd.ac.in/)

当光标悬停在横幅上时，动画会移动。这是使用一些 js 库而不是 flash 完成的。只是想知道此类动画的起点。如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:56:40.330

您可以使用[jParallax](http://stephband.info/jparallax/)，请参阅这些示例[http://www.jquery4u.com/animation/animated-parallax-examples/](http://www.jquery4u.com/animation/animated-parallax-examples/)

# asp.net - ASP.NET 在启动时是否只读取一次程序集？

> ID：14292185
> 
> 赞同：0
> 
> 时间：2013-01-12T09:54:47.857
> 
> 标签：asp.net

当 asp.net 应用程序启动时，它真的只读取一次程序集吗？

我的意思是启动后没有对网站程序集进行磁盘IO操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:55:40.823

是的，它们`AppDomain`在启动时加载一次。

# android - 错误记录android应用程序

> ID：14292188
> 
> 赞同：0
> 
> 时间：2013-01-12T09:55:39.187
> 
> 标签：android

早上好，有没有办法让我跟踪我的应用程序中发生的错误？我目前将错误写入设备 SD 卡中的文件。但大多数时候该设备没有 SD 卡。我也尝试使用本地数据库，但仍然存在导致应用程序崩溃的错误，恕不另行通知。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:59:43.160

看这里：

您可以尝试[Android 应用程序崩溃报告](http://acra.ch)。

**或者**

您可以使用 bugsense 来显示应用程序中发生的所有未捕获和捕获的异常。这些数据将显示在 bugsense 的仪表板上。

在这里检查[BugSense](http://www.bugsense.com/)。它立即在仪表板上上传错误消息。

# android - 如何在android中将视图设置为图像背景？

> ID：14292194
> 
> 赞同：0
> 
> 时间：2013-01-12T09:56:35.313
> 
> 标签：android

我正在尝试设置图像背景。我正在创建一个背景颜色为 red 的视图。

所有以编程方式查看和设置图像背景。

这是我的代码

```
 final View trans_View = new ImageView(MyClass.this);
    ImageView img = (ImageView)findViewById(R.id.img);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                                100, 100);
                        params.setMargins(10, 2, 10, 2);
                        trans_View.setBackgroundColor(Color.RED);
                        trans_View.setLayoutParams(params); 
```

**img.setBackground 视图 ????**

示例-实际图像： ![在此处输入图像描述](../Images/eef0150f752379429c5a945ed21a5b1a.png)

当我选择图像然后显示在输出下方。

![在此处输入图像描述](../Images/531e22d6e742b3e07a454fde62b41dbd.png)

我不知道如何将视图设置为图像背景。

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:03:16.900

这不可能。

如果您只需要添加背景来`ImageView`使用`setBackgroundColor(Color.RED)`.

或者如果你**真的**需要`View`用作背景，你可以使用`FrameLayout`：

```
<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <View
        android:layout_width="100dp"
        android:layout_height="100dp" />

    <ImageView
        android:layout_width="100dp"
        android:layout_height="100dp" />

</FrameLayout> 
```

但是，**不**建议这样做，因为会有不必要的透支。

# c++ - C++ 字符编码

> ID：14292207
> 
> 赞同：0
> 
> 时间：2013-01-12T09:58:34.647
> 
> 标签：c++, macos, character-encoding

这是我试图将接收到的文件路径编码为 utf-8 的 C++ 代码。

```
#include <string>
#include <iostream>

using namespace std;
void latin1_to_utf8(unsigned char *in, unsigned char *out);
string encodeToUTF8(string _strToEncode);

int main(int argc,char* argv[])
{

// Code to receive fileName from Sockets
cout << "recvd ::: " << recvdFName << "\n";
string encStr = encodeToUTF8(recvdFName);
cout << "encoded :::" << encStr << "\n";
}

void latin1_to_utf8(unsigned char *in, unsigned char *out)
{
 while (*in)
 {
  if (*in<128)
  {
    *out++=*in++;
  }
  else
  {
    *out++=0xc2+(*in>0xbf);
    *out++=(*in++&0x3f)+0x80;
  }
 }
 *out = '\0';
}

string encodeToUTF8(string _strToEncode)
{
  int len= _strToEncode.length();
  unsigned char* inpChar = new unsigned char[len+1];
  unsigned char* outChar = new unsigned char[2*(len+1)];
  memset(inpChar,'\0',len+1);
  memset(outChar,'\0',2*(len+1));
  memcpy(inpChar,_strToEncode.c_str(),len);
  latin1_to_utf8(inpChar,outChar);
  string _toRet = (const char*)(outChar);
  delete[] inpChar;
  delete[] outChar;
  return _toRet;
 } 
```

输出是

```
recvd ::: /Users/zeus/ÄÈÊÑ.txt  
encoded ::: /Users/zeus/AÌEÌEÌNÌ.txt 
```

提供上述函数 latin1_to_utf8 作为解决方案[将 ISO-8859-1 字符串转换为 C/C++ 中的 UTF-8](https://stackoverflow.com/questions/4059775/convert-iso-8859-1-strings-to-utf-8-in-c-c?lq=1)，看起来它可以工作。[答案被接受]。所以我想我一定是犯了一些错误，但我无法确定它是什么。有人可以帮我解决这个问题，拜托。

我首先在 Codereview 中发布了这个问题，但我没有得到任何答案。很抱歉重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:29:24.373

您使用任何平台还是在标准之上构建它？我相信很多人都使用这种转换，因此有图书馆。我强烈建议您使用libraray，因为该库已经过测试，并且通常使用最好的方法。

我发现这样做的一个库是 [boost locale](http://www.boost.org/doc/libs/1_52_0/libs/locale/doc/html/charset_handling.html)

这是标准的。如果您使用 QT，我建议您为此使用 QT 转换库（它与平台无关）

[QT](http://qt-project.org/)

如果您想自己做（您想看看它是如何工作的或出于任何其他原因） 1\. 确保分配内存！-**这在 C,C++ 中非常重要**。由于您使用 iostream 使用 new 来分配内存并使用 delete 来释放它（这也很重要 C++ 不会确定何时释放它。这是开发人员的工作 - C++ 是核心 :D） 2\. 检查您是否分配合适的内存大小。我希望 unicode 是更大的内存（它编码更多的符号，有时使用大数字）。3\. 如上所述，从某处（终端或文件）读取，但在新文件中输出。之后，当您使用文本编辑器打开文件时，请确保将编码设置为 utf-8（您的文本编辑器必须知道如何解释数据）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:10:38.530

您首先将原始 Latin-1 字符串输出到期望某种编码的终端，可能是 Latin-1。然后，您转码为 UTF-8 并将其输出到相同的终端，该终端以不同的方式对其进行解释。经典的mojibake。请尝试使用以下输出代替：

```
for(size_t i=0, len=strlen(outChar); i!=len; ++i)
    std::cout << static_cast<unsigned>(static_cast<unsigned char>(outChar[i])) << ' '; 
```

请注意，这两个强制转换是首先获取无符号字节值，然后获取无符号值以防止流将其视为字符。请注意，您的 char 可能已经是无符号的，但这取决于编译。

# ios - 更改 iphone sdk 中图像的颜色

> ID：14292212
> 
> 赞同：6
> 
> 时间：2013-01-12T09:58:54.623
> 
> 标签：ios, objective-c, image, cocoa-touch, uicolor

我有一张图片，我想以编程方式更改该图片的颜色。

![在此处输入图像描述](../Images/f847809b5214d5085f01457f41447f1f.png)

&**我想改变这张图片的颜色**

![在此处输入图像描述](../Images/a491c61d704d929d43660be795f28aa7.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T10:04:01.517

**更新：**

用这个方法...

```
-(UIImage *)imageNamed:(NSString *)name withColor:(UIColor *)color {
    // load the image

    UIImage *img = [UIImage imageNamed:name];

    // begin a new image context, to draw our colored image onto
    UIGraphicsBeginImageContext(img.size);

    // get a reference to that context we created
    CGContextRef context = UIGraphicsGetCurrentContext();

    // set the fill color
    [color setFill];

    // translate/flip the graphics context (for transforming from CG* coords to UI* coords
    CGContextTranslateCTM(context, 0, img.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // set the blend mode to color burn, and the original image
    CGContextSetBlendMode(context, kCGBlendModeColorBurn);
    CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
    CGContextDrawImage(context, rect, img.CGImage);

    // set a mask that matches the shape of the image, then draw (color burn) a colored rectangle
    CGContextClipToMask(context, rect, img.CGImage);
    CGContextAddRect(context, rect);
    CGContextDrawPath(context,kCGPathFill);

    // generate a new UIImage from the graphics context we drew onto
    UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return the color-burned image
    return coloredImg;
} 
```

像下面这样使用它...

```
yourImageView.image = [self imageNamed:@"yourImageName" withColor:[UIColor orangeColor]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-09T23:52:53.060

这是斯威夫特版本：

```
extension UIImage {

    func colorizeWith(color: UIColor) -> UIImage {
        UIGraphicsBeginImageContext(self.size)
        let context = UIGraphicsGetCurrentContext()
        color.setFill()
        CGContextTranslateCTM(context, 0, self.size.height)
        CGContextScaleCTM(context, 1.0, -1.0)

        // set the blend mode to color burn, and the original image
        CGContextSetBlendMode(context, kCGBlendModeNormal);
        let rect = CGRectMake(0, 0, self.size.width, self.size.height);
        CGContextDrawImage(context, rect, self.CGImage);

        // set a mask that matches the shape of the image, then draw (color burn) a colored rectangle
        CGContextClipToMask(context, rect, self.CGImage);
        CGContextAddRect(context, rect);
        CGContextDrawPath(context,kCGPathFill);

        // generate a new UIImage from the graphics context we drew onto
        let coloredImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        //return the color-burned image
        return coloredImage;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-25T15:40:12.587

你可以试试[Ankish Jain 的回答](https://stackoverflow.com/a/26965557/2684720)，它对我有用。

```
theImageView.image = [theImageView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
[theImageView setTintColor:[UIColor redColor]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T06:04:53.330

CoreImage 颜色过滤器非常适合此类任务 - 我发现它们比使用 Core Graphic 类 (CG...) 稍微简单一些：它们的工作原理是允许您调整我一直在使用的图像的 RGB 和 Alpha 特性将 QRCode 的白色背景更改为彩色。在你的情况下，白色的 RGBA 是 (1,1,1,1) 我相信你必须反转颜色。只需查看 Apple 的 CI 文档，就有几十个可用的过滤器 CIColorMatrix 只是其中之一。

```
CIImage *beginImage = [CIImage imageWithCGImage:image.CGImage];

CIContext *context = [CIContext contextWithOptions:nil];

CIFilter *filtercd = [CIFilter filterWithName:@"CIColorMatrix"  //rgreen
                                keysAndValues: kCIInputImageKey, beginImage, nil];
[filtercd setValue:[CIVector vectorWithX:0 Y:1 Z:1 W:0] forKey:@"inputRVector"]; // 5
[filtercd setValue:[CIVector vectorWithX:1 Y:0 Z:1 W:0] forKey:@"inputGVector"]; // 6
[filtercd setValue:[CIVector vectorWithX:1 Y:1 Z:0 W:0] forKey:@"inputBVector"]; // 7
[filtercd setValue:[CIVector vectorWithX:0 Y:0 Z:0 W:1] forKey:@"inputAVector"]; // 8
[filtercd setValue:[CIVector vectorWithX:1 Y:1 Z:0 W:0] forKey:@"inputBiasVector"]; 
CIImage *doutputImage = [filtercd outputImage];

CGImageRef cgimgd = [context createCGImage:doutputImage fromRect:[doutputImage extent]];
UIImage *newImgd = [UIImage imageWithCGImage:cgimgd];

filterd.image = newImgd;

CGImageRelease(cgimgd); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T09:23:09.740

正如我在这里回答的[那样 iPhone - 你如何为图像着色？](https://stackoverflow.com/questions/1223340/iphone-how-do-you-color-an-image/30321204#30321204)在我看来，从 iOS 7 为图像着色的最佳方法是使用

```
myImageView.image = [[UIImage imageNamed:@"myImage"] imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate]; 
```

然后更改 imageView 的 tintColor 或包含图像的任何内容。

# r - do.call 和 curve 不能在另一个函数环境中绘制函数

> ID：14292218
> 
> 赞同：2
> 
> 时间：2013-01-12T09:59:18.403
> 
> 标签：r, curve, do.call

我面临一个关于**do.call**和**curve**的奇怪问题：

```
func1 <- function (m, n) {
  charac <- paste ("func2 <- function(x)", m, "*x^", n, sep = "")
  eval(parse(text = charac))
  return(func2)
}
func3 <- function (m, n) {
  my.func <- func1 (m, n)
  do.call("curve",list(expr = substitute(my.func)))
} 
```

**func1**构造**func2**和**func3**绘制构造的**func2**。但是当我运行**func3**时，会显示以下错误：

```
> func3 (3, 6)
Error in curve(expr = function (x)  : 
  'expr' must be a function, or a call or an expression containing 'x' 
```

但是，当我运行**func1**并手动绘制输出（不应用**func3**）时， **将绘制 func2**：

```
my.func <- func1 (3, 6)
do.call("curve",list(expr = substitute(my.func))) 
```

这里发生的事情让我很困惑，我不知道为什么**do.call**不能在**func3**本地环境中绘制**func2 。**

 **谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:24:01.943

您使这变得过于复杂 - 创建时您不需要做任何特别的事情`f2`：

```
f1 <- function (m, n) {
  function(x) m * x ^ n
}
f3 <- function (m, n) {
  f2 <- f1(m, n)
  curve(f2)
}
f3(3, 6) 
```

当然，这可以通过消除`f1`：

```
f4 <- function (m, n) {
  f2 <- function(x) m * x ^ n
  curve(f2)
}
f4(3, 6) 
```

[您可以在https://github.com/hadley/devtools/wiki/Functions](https://github.com/hadley/devtools/wiki/Functions)找到有关 R 的范围规则（使这项工作有效）的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:53:53.687

这不是 的问题`do.call`，而是 `substitute` ~~默认情况下在全局环境中评估的问题。因此~~，您需要告诉它必须在哪个环境中进行替换。这里显然是在 func3 的本地环境中。

这应该有效：

```
 do.call("curve",list(expr = substitute(my.func,
                                           env = parent.frame()))) 
```

**编辑**感谢 Dwin

正如评论中所说，替代 env 默认为当前评估环境。那么为什么下面的代码有效？在帮助下的答案`substitute`

> 函数的正式参数或使用delayedAssign() 显式创建的，promise 的表达式槽替换符号。如果它是一个普通变量，它的值被替换，除非 env 是 .GlobalEnv 在这种情况下符号保持不变。

`env = parent.frame(n=1)`相当于`.GlobalEnv`，这就是为什么符号 (my.func) 保持不变。所以正确的答案是：

```
do.call("curve",list(expr = substitute(my.func,
                                               env = .GlobalEnv))) 
```

为了测试，我打开了新的 R 会话：

```
func1 <- function (m, n) {
  charac <- paste ("func2 <- function(x)", m, "*x^", n, sep = "")
  eval(parse(text = charac))
  return(func2)
}
func3 <- function (m, n) {
  my.func <- func1 (m, n)

  do.call("curve",list(expr = substitute(my.func,env = .GlobalEnv)))
} 
```

比我打电话

```
 func3(2,6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:26:41.143

这有效：

```
func3 <- function (m, n) {
   my.func <- func1 (m, n); print(str(my.func))
   do.call(curve, list(expr=bquote( my.func) ) )
 } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-12T14:45:07.843

您只需要删除行：

my.func <- func1 (m, n)

来自 func3。**

# android - 设备唤醒时执行任务

> ID：14292222
> 
> 赞同：0
> 
> 时间：2013-01-12T09:59:50.450
> 
> 标签：android, screen

我有一个正在从服务更新的小部件。当用户随后关闭屏幕时，服务会停止，并且不会在用户唤醒设备时再次开始更新小部件。那么关于我的问题，当用户唤醒设备时，是否有某种方法可以“重新启动”服务？我知道当屏幕锁定时我可以保持服务继续运行，但我认为它会消耗大量电池......我已经谷歌了很多但没有找到任何东西......

提前致谢！

编辑：好吧，这很奇怪！现在它以某种方式自动执行此操作，所以它现在可以工作了！不管怎么说，还是要谢谢你！

编辑2：或者，现在我真的不认为它是停止服务的屏幕锁定，因为当我使用手机时它有时会随机停止而没有崩溃对话框......有人知道我应该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:14:30.140

是的，这是可能的！

当用户关闭屏幕时你必须处理`BroadCast Receiver`（[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)）

*   停止服务和服务停止并停止更新小部件的句柄，

*   当用户唤醒设备时，您必须接收广播开始更新小部件。

我认为节省更多电池是最好的主意。

有关更多信息，请参阅此[链接](https://stackoverflow.com/questions/3621599/wake-android-device-up/4541982#4541982)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:08:24.220

对于一个小部件，保持服务一直运行通常没有意义，您通常会定期更新小部件。

做到这一点并提高电池效率的最简单方法是使用`AlarmManager`和[setAlarmInexactRepeating](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)来安排意图：

> 安排触发时间要求不准确的重复警报；例如，每小时重复一次的警报，但不一定在每小时的开头。这些警报比 setRepeating(int, long, long, PendingIntent) 提供的严格重复更省电，因为系统可以调整警报的相位以使它们同时触发，避免不必要地从睡眠中唤醒设备。

意图应该触发一个 BroadcastReceiver 反过来应该触发你的服务来更新小部件。使用`IntentService`通常是一个不错的选择。

如果您需要对意图调度进行更多控制，您还可以在服务完成更新小部件时自行设置警报，并提供`RTC`或`ELAPSED_REALTIME`作为警报类型。如果设备处于睡眠状态，这两种类型都不会唤醒设备。如果设备未处于睡眠状态（但已锁定），您将有效地捎带唤醒设备的其他事件。

如果您确实需要在设备解锁后立即更新，则可能需要[ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)广播，但我仍然建议您将其作为安排定期更新的补充。

# php - PHP 是否读取每个请求所需的脚本？

> ID：14292223
> 
> 赞同：8
> 
> 时间：2013-01-12T09:59:52.933
> 
> 标签：php

PHP 在处理新请求时是否每次都读取所需的脚本？

你能解释一下 PHP 执行哪些磁盘 IO 操作来处理单个请求吗

如果 PHP 是 Apache 模块或 PHP-fpm，会发生什么变化

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T10:07:19.087

是的。

想象一下：

**script_a.php**

```
<?php
$foo = 'bar';
$bar = 'foo';
?> 
```

**script_b.php**

```
<?php
require_once 'script_a.php';
echo $foo . ' ' . $bar;
?> 
```

在运行时，**script_b.php**实际上将包含：

```
<?php
$foo = 'bar';
$bar = 'foo';
echo $foo . ' ' . $bar;
?> 
```

因此，每次处理新请求时，它都会读取脚本（或多个脚本）。这就是中高负载服务器使用[APC](http://php.net/manual/en/book.apc.php)或[eAccelerator](http://eaccelerator.net)等操作码缓存的原因。

它们所做的是将整个脚本（处理了需要/包含）缓存在内存中，因此不必处理它以对下一个请求进行字节码，而只需执行即可。这可以转化为显着的性能提升，因为没有磁盘 I/O 并且 Zend 引擎不必再次将脚本转换为字节码。

**编辑：**

> 如果 PHP 是 Apache 模块或 PHP-fpm，会发生什么变化

不，至少不是 PHP 处理包含/要求的方式。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:03:38.710

执行 PHP 脚本时，将从硬盘驱动器中读取该脚本。最初执行的脚本包含的任何脚本也是如此。但是，如果您担心性能，可以使用某些缓存技术。

见这里： http: [//php.net/manual/en/book.apc.php](http://php.net/manual/en/book.apc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:04:49.243

PHP 会根据每个请求读取文件。您可以使用诸如 XCache 之类的操作码缓存器将操作码保存在内存中，因此不需要 PHP 实际读取文件（只需检查其修改时间）。FPM 和 apache 模块不影响任何东西

# function - Emacs 定义了一个将参数设置为 nil 的函数

> ID：14292227
> 
> 赞同：0
> 
> 时间：2013-01-12T10:00:26.170
> 
> 标签：function, emacs, lisp

我想创建一个 nil 函数，它接受任意数量的符号并将它们全部设置为 nil。

```
(defun clean (as many args as given by user)
  (setq each-arg nil)
)

(clean x y z) 
```

如何“干净”地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T10:35:31.473

由于您没有引用参数，因此它必须是一个宏：

```
(defmacro clean (&rest symbols)
  `(progn
     ,@(mapcar (lambda (sym) (list 'setq sym 'nil))
               symbols))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T12:38:56.073

与 Dmitry 类似的想法，但生成的代码略少：

```
(defmacro clean (&rest variables)
  `(setq ,@(loop for var in variables nconc (list var nil))))

(macroexpand '(clean a b c d))
;; (setq a nil b nil c nil d nil) 
```

关于你的其他问题：

*   简单但耗时的了解方法是将点移至您不知道的函数，`C-h f`或者`M-x``describe-function`这会将函数名称放在提示符中（如果它确实是 Emacs Lisp 函数）并显示描述，如果可用源代码中的位置。

*   我会尝试解释，但我不是语言参考:)

    *   `defmacro`- 类似于函数，但它不评估参数。当您的代码被读取并编译成字节码时，宏就会被执行。他们的主要目标是生成其他代码。
    *   `lambda`- 是一个创建匿名函数并返回它的宏。
    *   `mapcar`- 是一个高阶函数，它将函数连续应用于列表的所有元素，并将结果按照应用函数的顺序收集到列表中。
    *   `&rest`- 是函数的 lambda-list（即参数的定义）中的一个特殊关键字，字面意思是这个符号后面的标识符是它右边所有参数的列表）。
    *   `,@`是宏中使用的特殊运算符，在反引号宏中。它指示读者必须评估其后面的表达式，将其视为列表，并且必须将其所有 conses 附加到当前正在解析的表单中。

# android - 使用 SAX 解析器的 Android XML 解析问题

> ID：14292228
> 
> 赞同：1
> 
> 时间：2013-01-12T10:00:26.163
> 
> 标签：android, xml-parsing, android-xml

我正在解析资产文件夹中的 XML 文件以将我的数据转储到数据库中。稍后我可能会获取它并将其显示在文本视图中。但是在解析时我丢失了一些数据，即如果我在解析之前在 XML 标记中有大约 50 个单词，在我的数据库中我无法在解析后找到所有这些。

例如：我正在解析这一行：

```
<about>Skandagiri also known as kalavara durga, is an ancient mountain fortess located approximately 70km from Banglore city and 3 km from Chikkaballapur in the Indian State of Karnataka.It is off Bellary road(NH 7, Hyderabad to Bangalore Highway) and overlooks Nandi Hills, Mudddenahalli and Kanive narayanapura.The peak is at an altitude of about 1350 meters</about> 
```

在我的数据库中解析后：

```
at an altitude of about 1350 
```

我正在使用 String 来保存我的解析值，如下所示：

```
if (element.equalsIgnoreCase("about")){
  String str=parsedValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:11:19.810

如果您使用的是 SAXparser，则最好使用 StringBuffer 包装数据。
查看官方文档：[ContentHandler](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/ContentHandler.html)。
这是其中有趣的部分：

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:02:50.377

Plaese尝试下面的代码..我认为解决了你的问题。

```
 Element element = (Element) node.item(i);

  NodeList id = element.getElementsByTagName("about");
  Element line1 = (Element) id.item(0);
  if (null != line1)

      AdsFound[i] = getCharacterDataFromElement(line1);

  else

      AdsFound[i] = ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T12:35:17.780

使用 StringBuffer，因为可以分块读取文本，而您可能只阅读部分代码。使用字符串缓冲区并附加所有块，这样最终您将获得完整的文本而不会丢失任何数据。

像这样：

```
StringBuffer strbufr = new StringBuffer();

    if (element.equalsIgnoreCase("about")){
      String str = strbufr.toString().trim();
    }  

    @Override
        public void characters(char[] ac, int i, int j) throws SAXException {
            strbufr.append(ac, i, j);
        } 
```

# c - 指向结构指针的指针

> ID：14292229
> 
> 赞同：1
> 
> 时间：2013-01-12T10:00:41.130
> 
> 标签：c, pointers, structure

我有一个如图所示的结构。当我有一个指向结构的指针时，我可以正常初始化或修改它的任何成员。

```
struct node{
    int key;
    int nno;
    char color;
    struct node* out;
    struct node* next;
    struct node* pre;
}; 
```

但是，当我将结构指针的地址传递给函数并使用双指针捕获它并尝试使用该双指针访问成员时，我的编译器会抛出错误“成员未定义”。

```
void DFSVisit(struct node** u){
    *u->color = 'g';
    struct node* v;
    while(*u->out != NULL){
            v = *u->out;
                    if(v->color == 'w'){
                            v->pre = *u;
                            DFSVisit(&v);
                    }
    } 
    *u->color = 'b';
} 
```

而且，这就是我访问该功能的方式。

```
DFSVisit(&root); 
```

Root 是一个正确初始化的指针。而且，Root 是一个全局变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T10:05:38.750

`*u->color`解析为`*(u->color)`而不是您想要`(*u)->color`的，因此编译器会抱怨，因为 a`node*`没有`color`成员（因为它是指针而不是结构！）。因此，要么显式插入括号，`(*u)->color`要么引入局部变量：`struct node *node = *u;`并使用`node->color`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T10:06:01.490

Are you aware that the indirection (dereferencing) operator, `*`, has lesser precedence than the element selection operator, `->`? That is, you should be writing `(*u)->color`, not `*u->color`.

# ios - 当我使用 git clone 从远程获取 git 时， git_index_entrycount 返回 0？

> ID：14292231
> 
> 赞同：1
> 
> 时间：2013-01-12T10:00:59.923
> 
> 标签：ios, libgit2

我先用 git_repository_index 获取索引，然后用 git_index_entrycount 看看里面有多少个索引项，结果是0？为什么？下面是我的代码，有什么问题吗？谢谢

```
(void)viewDidLoad
{
[super viewDidLoad];
git_repository *repo;
progress_data pd = {{0}};
NSArray *array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath = [array objectAtIndex:0];

git_clone_options clone_opts = GIT_CLONE_OPTIONS_INIT;
git_checkout_opts checkout_opts = GIT_CHECKOUT_OPTS_INIT;
checkout_opts.checkout_strategy = GIT_CHECKOUT_SAFE;
checkout_opts.progress_cb = checkout_progress;
checkout_opts.progress_payload = &pd;
clone_opts.checkout_opts = checkout_opts;
clone_opts.fetch_progress_cb = &fetch_progress;
clone_opts.fetch_progress_payload = &pd;
clone_opts.cred_acquire_cb = cred_acquire;
NSString *pp = [docPath stringByAppendingPathComponent:@"/abc" ];
const char * a =[pp UTF8String];   

int res =  git_clone(&repo, "http://path/.git", a, &clone_opts);
NSLog(@"Get it. res:%d\n path:%s", res, a);
//get index
int ret;
git_index* index;
ret = git_repository_index(&index, repo);
NSLog(@"git_repository_index ret:%d", ret);
int count = git_index_entrycount(index);
if(count != 0)
{
    NSLog(@"index number:%d", count);
}
else
{
    NSLog(@"count == 0");
}

const git_error *err = giterr_last();
if(err == NULL)
{
    NSLog(@"NULL");
}
else
{
    NSLog(@"err:%s", err->message);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:58:41.653

为了触发结帐作为`git_clone()`流程的一部分，您是否考虑过将 `GIT_CHECKOUT_SAFE_CREATE`其用作`checkout_strategy`？

此**[提交](https://github.com/arrbee/libgit2/commit/b3fb9237c215e9a0e2e042afd9252d541ce40541)**和有关此的`git_checkout()` **[文档](https://github.com/libgit2/libgit2/blob/development/include/git2/checkout.h#L74)**提示。

# cdn - ASP.NET MVC 中的捆绑性能

> ID：14292236
> 
> 赞同：0
> 
> 时间：2013-01-12T10:01:44.407
> 
> 标签：cdn, bundling-and-minification, google-cdn

在 Microsoft CDN 示例上引用 4 个 js 文件是否会更好地提高性能：JQuery、JQueryUI、JQuery Validation、Knockout.js 还是将它们全部放在一个 Bundle 中？

# c++ - 我的对话框未在 MFC C++ 中显示

> ID：14292244
> 
> 赞同：1
> 
> 时间：2013-01-12T10:03:27.227
> 
> 标签：c++, visual-c++, mfc

我正在开发 MFC C++ 应用程序，但在我的项目中尝试打开另一个对话框时遇到了问题。

在这个小视频中查看 I 记录器：[单击此处 (Youtube)](http://youtu.be/KCdHf3cZpdQ)

我的一些代码：

```
CFindWindow window;
window.DoModal(); 
```

这是`FindWindow.h`文件：

```
#pragma once

// CFindWindow dialog

class CFindWindow : public CDialogEx
{
    DECLARE_DYNAMIC(CFindWindow)

public:
    CFindWindow(CWnd* pParent = NULL);   // standard constructor
    virtual ~CFindWindow();

// Dialog Data
    enum { IDD = IDD_FINDWINDOW_DIALOG };

protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

    DECLARE_MESSAGE_MAP()
}; 
```

我不确定您需要什么来帮助我解决这个问题，请告诉我，我会为您提供您需要的任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:45:03.970

几乎不可能在不调试的情况下为您提供解决方案。

如果遵循以前帖子中的建议不能帮助您发布重复此行为的应用程序或测试应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:47:55.713

有时资源编译器不会检测到更改。重建解决方案有助于缓解这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:15:29.283

您将该代码放在按钮处理程序中。在那里放置一个断点以确保它确实被调用。或者，TRACE 宏也有助于记录调试构建的一些输出。仅凭提供的信息（并且该视频也没有太大帮助......）很难判断出了什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T11:02:12.033

检查是否存在与 IDD_FINDWINDOW_DIALOG 具有相同值的其他资源。签入 IDD_FINDWINDOW_DIALOG 的源代码并查看 id 号，看看是否有其他具有相同 id 的资源。

设置一个断点并进入 DoModal 并尝试。

或者将您的代码放在 try catch 块中，看看是否有任何异常。

检查单击按钮以调用 findwindow 窗体的主窗体是否覆盖了任何可能阻止 findwindow 弹出的事件。

# css - 使 englobing/父 div 与内部 div 一样高

> ID：14292249
> 
> 赞同：0
> 
> 时间：2013-01-12T10:03:48.653
> 
> 标签：css, html

作为创建典型的左、中、右列布局的一部分，我需要将一些`div`不同高度的内部 s 包装到一个 englobing/父 div 中。我需要确保 global/parent`div`与最高的 inner 一样高`div`，这取决于它包含的文本。该`min-height`物业不会削减它。

我应该如何进行？我应该使用表格和单元格而不是`div`s 吗？

我包括一个[JSFiddle](http://jsfiddle.net/Cj75q/)来描述这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:19:35.923

我猜你想实现这样的目标：http: [//jsfiddle.net/Cj75q/3/](http://jsfiddle.net/Cj75q/3/)

如果我是对的，您不需要所有这些`relative`和`absolute`位置，您只需要在列的左侧浮动：

```
#leftCol {
    background-color: #123456;
    width: 23%;
    margin: 0px;
    border: 0px;
    padding: 0px;
    float: left;
}

#midCol {
    background-color: #654321;
    width: 50%;
    margin: 0px 10px 10px 0px;
    border: 0px;
    padding: 10px;
    float: left
}

#rightCol {
    background-color: #567890;
    width: 23%;
    margin: 0px;
    border: 0px;
    padding: 0px;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:13:27.427

请在此处编写您的代码，然后我想我可以帮助您找到解决方案。

在正常情况下，全局`div`通常具有最高 inner 的高度`div`。但我不知道你到底是什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:42:19.667

我认为这段代码可以解决你的问题。[JSFiddle](http://jsfiddle.net/Cj75q/17/)

但我建议你在这种情况下使用 table。因为标签上的`float`and`width`属性`div`在某些浏览器中可能会导致严重的问题。

# c# - 在 ASP.NET 页面上执行没有用户调用的函数

> ID：14292250
> 
> 赞同：-3
> 
> 时间：2013-01-12T10:03:55.797
> 
> 标签：c#, asp.net

**情况 1：**
用户在 ASP.NET 页面上创建了一个文件，可能是通过单击一个按钮。
之后，用户可能会下线（离开站点）
文件将在 15 分钟后自动删除。

**情况2：**
用户A点击一个按钮

```
Application["count"] = (int)Application["count"] + 1; 
```

之后，在 10 秒内，如果有其他用户点击相同的按钮。该值将增加。

```
Application["count"] = (int)Application["count"] + 1; 
```

让我们说，在第 6 秒，没有更多用户访问该站点。在第 10 秒，服务器会自动执行一些动作来做某事。

我可以知道该怎么做吗？
有什么提示吗？或我可以开始查看/学习的文章？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:08:18.223

这是网站的常见问题，正确的答案是构建一个单独的 Windows 服务来执行后台任务。

有几种聪明的技巧可以安排在 IIS 工作进程中完成的事情，但它们都是不安全的，因为

1.  应用程序池可能随时被回收（即重新启动），从而丢失内部状态，例如预定事件。
2.  应用程序池可能由于不活动而关闭。

您的 Windows 服务可以公开由网站代码在内部调用的 WCF 服务以安排工作或从公共数据库中提取工作项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:20:30.100

我找到了一些锻炼方法。对于那些面临同样问题的人，您可以阅读以下内容：
**ASP.NET 中的简单后台任务**
[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

# yii - Yii如何获取登录用户的email id？

> ID：14292252
> 
> 赞同：0
> 
> 时间：2013-01-12T10:04:04.027
> 
> 标签：yii, gmail, social-networking, linkedin, yii-extensions

我正在通过我的 Yii 网站中的社交网络实现登录。我正在使用 gmail、linkedin、twitter 和 facebook。我需要获取使用这些网络登录到我的站点的用户的电子邮件。我能够获得 facebook 用户的电子邮件。但不是其他网络。我怎么才能得到它 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:10:55.397

这不是 Yii 特定的问题（imo），但对于实际搜索的遗留问题，人们可能最终会在这篇文章上寻找 Yii 解决方案：

你应该看看[yii-eoauth](http://www.yiiframework.com/extension/eoauth)扩展。您需要先进行握手以验证用户身份，然后才能获得所需的详细信息。

*   [oAuth for Facebook](http://developers.facebook.com/docs/reference/dialogs/oauth/)
*   [oAuth 推特](https://dev.twitter.com/docs/auth/oauth/faq)
*   [oAuth for Google](https://developers.google.com/accounts/docs/OAuth2)
*   [oAuth 链接到](https://developer.linkedin.com/documents/getting-oauth-token)

# networking - 应用层如何将ip地址传递给网络层？

> ID：14292258
> 
> 赞同：1
> 
> 时间：2013-01-12T10:04:42.500
> 
> 标签：networking, tcp, ip, hostname

假设我有一个网络浏览器。试图连接到 www.google.com。

Web 浏览器在端口 53 上向传输层发送 DNS 请求。传输层将请求封装在 TCP 上的一个段中，并将其传输到网络层。

网络层识别数据包并使用完整的DNS服务器IP地址并将其发送到链路层。

链路层使用 ARP 等。

得到回应。

链路层转移到网络层，这是我的问题:)。

网络层是否有任何主机名表到 ip？

从现在开始，响应应该会冒泡到应用层。应用层是否将从 dns 请求中提取的 ip 添加到数据包中？

据我了解，应用层应该尝试绑定到一个端口，然后传输层应该通过套接字将它连接到主机名/ip，或者报告给 ip 层来完成它。

但问题是如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:26:16.550

DNS 响应只是一个 UDP 数据包，其中包含一个标头，后跟与应用程序相关的数据主体。数据包括请求的域名，但这是为了发出 DNS 请求的应用程序的利益，而不是网络层。网络层不分析数据体的内容。

是应用层对DNS响应包进行解码，并在绑定端口时存储IP地址以备后续使用；binding 对 DNS 名称一无所知，它只知道 IP。

# scaling - 在 TFS2010 或 TFS2012 中管理超过 1000 个活跃的团队项目

> ID：14292264
> 
> 赞同：2
> 
> 时间：2013-01-12T10:04:58.780
> 
> 标签：scaling, team-project

TFS2010 或 TFS2012 可以管理超过 1000 个活动项目吗？现在我们使用 QualityCenter，每个项目都是一个 SQL-DB，每天大约有 100 个用户访问。

我在“Scaling Team Foundation Server 2012 Whitepaper”文档中找到了 TFS2010 限制

TFS 2010 限制

*   每个团队项目集合 200 个团队项目
*   每个 SQL 实例 50 – 200 个活动团队项目集合（范围为 8GB – 64Gb RAM）

所以可以创建 10 个集合，每个集合应该有 100 个团队项目集成？那么我需要多少内存？

如果我在一个集合中有 200 个团队项目，当我有 200 个集合时是否一样？那么所需的 RAM 量是一样的吗？

有人对这些项目有经验吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:00:29.897

一个项目集合相当于一个数据库。因此，在一个项目集中拥有 200 个项目肯定与在一个项目中拥有 200 个项目集不同。在第一种情况下，您将拥有一个大型数据库。如果是第二个，您将拥有 200 个数据库。

至于扩展，规则很明确，*一个项目集合中最多可以有 200 个项目。*

*根据每个项目集合中的大小和活动，您可以在 SQL Server 实例上拥有 50 到 200 个项目集合*（这并不意味着在 TFS 实例上！）。特别是活动极大地影响了所需的内存量，因此是决定项目集合数量的最大工厂。200 个陈旧的集合易于维护。但是 75 个非常活跃的可能是您的限制。

*您可以将任意数量的 SQL Server 实例链接到 TFS 服务器。*创建项目集合后，您可以将其移动到另一台服务器以供 SQL Server 托管。（参见[http://healthedev.blogspot.nl/2011/12/move-tfs-2010-project-collection.html](http://healthedev.blogspot.nl/2011/12/move-tfs-2010-project-collection.html)）。

当您谈论数据库中的这些大小时，请确保将 TFS 报告安装在它自己的盒子上。并且 TFS Warehouse 刷新频率有任何意义（不要每分钟更新这些数据量）......并确保 TFS_Warehouse 和 Analysis 多维数据集都有一个 SQL 实例，该实例有足够的内存和 CPU 来处理适当地。

# javascript - 在javascript中创建一个哈希数组

> ID：14292266
> 
> 赞同：0
> 
> 时间：2013-01-12T10:05:32.477
> 
> 标签：javascript

我想在 javascript 中创建一个哈希数组。换句话说，我想做以下事情

```
 var messages = new Array;
 messages['info'].push(["info message1", "info message2", "info message3"]);  
 messages['error'].push(["error message1", "error message2", "error message3"]); 
```

然后遍历每个键。但这给了我一个错误`"Cannot call method 'push' of undefined"`

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:08:32.303

您正在尝试访问 的属性`info`，该属性`messages`不存在，因此其值为`undefined`。然后，您尝试通过调用将其视为数组`.push`。那是行不通的。

我认为您真正想要的是将数组分配给每个属性：

```
var messages = {};
messages['info'] = ["info message1", "info message2", "info message3"];  
messages['error'] = ["error message1", "error message2", "error message3"];
// or
// messages.info = ["info message1", "info message2", "info message3"];
// ... 
```

仅使用带有数字键的数组。使用普通对象作为字符串键。

现在`messages.info`已定义*并*在数组中，您可以向其中添加新消息：

```
messages.info.push('some new message'); 
```

* * *

[了解有关对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:07:13.363

您还必须在主数组/对象中创建数组：

```
var messages = []; // you probably shoudln't have an arrray but {}
messages['info'] = [];
messages['info'].push(["info message1", "info message2", "info message3"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T10:11:37.347

您必须先创建一个空数组，然后才能调用`.push()`它。此外，数组是为数字索引访问而设计的。如果你想`messages`通过像“info”这样的属性名来访问，那么你应该使用一个对象而不是一个数组：

```
 var messages = {};
 messages['info'] = [];
 messages['info'].push(["info message1", "info message2", "info message3"]);  
 messages['error'] = [];
 messages['error'].push(["error message1", "error message2", "error message3"]); 
```

或者更简洁一点：

```
 var messages = {};
 messages['info'] = ["info message1", "info message2", "info message3"];
 messages['error'] = ["error message1", "error message2", "error message3"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T10:07:02.733

只需在添加数组之前创建数组：

```
messages['info'] = []; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T10:11:47.583

您没有定义`messages['info']`或`messages['error']`在使用它之前。先初始化它。此外，数组不应该用于存储键/值映射，请使用普通对象。

```
var messages = new Object;
messages['info'] = new Array;
messages['info'].push("info message1", "info message2", "info message3");
messages['error'] = new Array;  
messages['error'].push("error message1", "error message2", "error message3"); 
```

请注意，您的原始代码中还有另一个错误，即您将数组传递给`.push()`，这将导致*数组数组的数组*。

或者使用对象和数组字面量（推荐）：

```
var messages = {};
messages['info'] = ["info message1", "info message2", "info message3"];
messages['error'] = ["error message1", "error message2", "error message3"]; 
```

# python - 安装 django-templated-email

> ID：14292271
> 
> 赞同：1
> 
> 时间：2013-01-12T10:06:04.457
> 
> 标签：python, django, import, github, pip

我正在学习如何在 Django 中开发，所以我还有很多东西需要学习，所以，如果我有任何概念错误，请通知我。

我的问题是我正在尝试安装 django-templated-email 包，以便我可以使用 mailchimp 从我的应用程序发送电子邮件，我下载了[https://github.com/bradwhittington/django-templated-email](https://github.com/bradwhittington/django-templated-email)并按照说明操作（使用项目根文件夹中的 pip 指令），但是，当我添加时：

```
from templated_email.backends.vanilla_django import TemplateBackend
TEMPLATED_EMAIL_BACKEND = TemplateBackend 
```

在我的 settings.py 中，尝试运行本地服务器时出现此错误：

```
ImportError: Could not import settings 'proyect.settings' (Is it on sys.path?): No module named templated_email.backends.vanilla_django 
```

我已经读过它开箱即用，所以我可以删除这些行并仍然让包工作（或者至少这是我所理解的）。我真正的问题是在我的*views.py*中添加这个，所以我可以使用这个包：

```
from templated_email import send_templated_mail 
```

我总是得到这个错误：

```
ImportError at /awards/get/reward/
No module named templated_email
Request Method: POST
Request URL:    http://127.0.0.1:8000/awards/get/reward/
Django Version: 1.4
Exception Type: ImportError
Exception Value:    
No module named templated_email
Exception Location: /Users/xxxxx/xxxx/proyect/proyect/quizzer/views.py in awards_get, line 1316
Python Executable:  /usr/bin/python
Python Version: 2.7.1
Python Path:    
['/Users/xxxxx/xxxx/proyect/proyect',
 '/Library/Python/2.7/site-packages/pip-1.0-py2.7.egg',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
'/Library/Python/2.7/site-packages',
'/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg-info']
Server time:    sáb, 12 Ene 2013 10:48:28 +0100 
```

它在我添加导入行的第 1316 行

希望你能帮我解决我的问题，这样我就可以开始发送电子邮件和时事通讯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:52:52.883

您`/Users/xxxxx/xxxx/proyect/proyect`在 python 路径中添加但未添加`/Users/xxxxx/xxxx/proyect`

# android - 自定义日期选择器对话框android

> ID：14292279
> 
> 赞同：2
> 
> 时间：2013-01-12T10:06:55.343
> 
> 标签：android, android-datepicker

我想更改日期选择器对话框的背景、文本颜色和字体，我也想更改自定义正面和负面按钮。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:20:04.390

> 如果没有任何预构建的小部件或布局满足您的需求，您可以创建自己的 View 子类。如果您只需要对现有小部件或布局进行小幅调整，您可以简单地子类化小部件或布局并覆盖其方法。
> 
> 创建您自己的 View 子类可以让您精确控制屏幕元素的外观和功能。

来源：[文档](http://developer.android.com/guide/topics/ui/custom-components.html)

但是，您可以轻松[扩展现有的并创建自己的](http://developer.android.com/guide/topics/ui/custom-components.html#modifying).

此外，如果您只是愿意拉皮条用户界面，您可以看看[DateSlider](http://code.google.com/p/android-dateslider/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:39:23.233

从对话框中选择日期并将其显示在 TextView 中。

```
public class DatePickerDemoActivity extends Activity {
/** Called when the activity is first created. */

   private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;

    static final int DATE_DIALOG_ID = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // capture our View elements
    mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    mPickDate = (Button) findViewById(R.id.pickDate);

    // add a click listener to the button
    mPickDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });

    // get the current date
    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);

    // display the current date (this method is below)
    updateDisplay();
}

// updates the date in the TextView
private void updateDisplay() {
    mDateDisplay.setText(getString(R.string.strSelectedDate,
        new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-")
                .append(mDay).append("-")
                .append(mYear).append(" ")));
}

// the callback received when the user "sets" the date in the dialog
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                                  int monthOfYear, int dayOfMonth) {
                mYear = year;
                mMonth = monthOfYear;
                mDay = dayOfMonth;
                updateDisplay();
            }
        };

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                mDay);
    }
    return null;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-31T08:08:39.437

如果您想要微调器类型的日期选择器，那么[这个](https://github.com/SingleCycleKing/CustomTimePicker)很好。你可以自定义一切

# stl - 为什么 `list::iterator + 1` 不起作用？

> ID：14292285
> 
> 赞同：0
> 
> 时间：2013-01-12T10:07:47.693
> 
> 标签：stl, iterator

```
std::list<CPoint>::iterator iter= vertices.end();
CPoint point = *(iter+1); 
```

在这种情况下，我尝试将`(iter-1)`or的值分配给变量`(iter+1)`。为什么它不起作用？而`iter++`或`iter--`工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:12:26.763

简单地说，这些操作不是`iterator`定义的一部分。您可以使用该`std::advance()`功能。

显然，`operator+(int)`可以按原样覆盖 来执行`operator++()`此操作，但可能不是，因为不能保证此操作具有恒定的复杂性，并且类似的语法`(iter + n)`可能会提出其他建议。

来自[`advance`](http://en.cppreference.com/w/cpp/iterator/advance)：

> **复杂性：**线性。但是，如果`InputIt`另外满足 的要求`RandomAccessIterator`，复杂度是不变的。

# .net - 处理 .NET Marshal 类中可能出现的错误的最佳实践

> ID：14292286
> 
> 赞同：0
> 
> 时间：2013-01-12T10:08:01.767
> 
> 标签：.net, marshalling

处理调用错误的最佳方法是：

```
string myString = Marshal.PtrToStringUni(wParam);
Int32 myInt = Marshal.ReadInt32(lParam); 
```

?

[编辑]

根据 Hans Passant 的回答，我想分享指向[MS 描述的链接](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:18:57.477

这里最好的方法是遇到异常的最好方法，不要做任何事情。Windows 向您发送了一条错误消息，您**不知道**为什么。如果您不知道导致异常的原因以及可能产生的后果，您将无法处理异常。吞下它只会导致您的程序运行不正确，而不会向用户提示原因。没有办法测试这种情况。

不要抓住它，让它终止您的应用程序。

专注于为 AppDomain.CurrentDomain.UnhandledException 编写一个好的事件处理程序。

# git - git push heroku master w/error: 无法将一些参考推送到 'git@heroku.com:floating-woodland-1763.git'

> ID：14292289
> 
> 赞同：0
> 
> 时间：2013-01-12T10:08:11.847
> 
> 标签：git, heroku, github

> **可能重复：**
> [Heroku、Rails 3 和 sqlite3](https://stackoverflow.com/questions/3747002/heroku-rails-3-and-sqlite3)

我正在使用 Centos 6.3 操作系统，我无法使用 Git 将我的应用程序推送到 heroku

我输入的内容：

```
git push heroku master 
```

我得到什么：

```
Counting objects: 70, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (55/55), done.
Writing objects: 100% (70/70), 86.84 KiB, done.
Total 70 (delta 7), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
   Fetching gem metadata from http://rubygems.org/.........
   Fetching gem metadata from http://rubygems.org/..
   Installing rake (10.0.3)
   Installing abstract (1.0.0)
   Installing activesupport (3.0.19)
   Installing builder (2.1.2)
   Installing i18n (0.5.0)
   Installing activemodel (3.0.19)
   Installing erubis (2.6.6)
   Installing rack (1.2.6)
   Installing rack-mount (0.6.14)
   Installing rack-test (0.5.7)
   Installing tzinfo (0.3.35)
   Installing actionpack (3.0.19)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.2.19)
   Installing actionmailer (3.0.19)
   Installing arel (2.0.10)
   Installing activerecord (3.0.19)
   Installing activeresource (3.0.19)
   Installing json (1.7.6)
   Using bundler (1.3.0.pre.5)
   Installing rdoc (3.12)
   Installing thor (0.14.6)
   Installing railties (3.0.19)
   Installing rails (3.0.19)
   Installing sqlite3 (1.3.6)
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_ozcea9mu00be/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
   Results logged to /tmp/build_ozcea9mu00be/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:floating-woodland-1763.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:floating-woodland-1763.git' 
```

自从我检查并仔细检查后，我肯定安装了 sqlite3 版本 1.3.6。我也跑了，得到：

```
git remote -v
heroku  git@heroku.com:floating-woodland-1763.git (fetch)
heroku  git@heroku.com:floating-woodland-1763.git (push)
origin  git@github.com:(user)/first_app.git (fetch)
origin  git@github.com:(user)/first_app.git (push) 
```

我不知道该怎么办，请帮忙。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:41:12.117

你不能在 Heroku 上使用 sqlite。他们提供 PostgreSQL 的免费开发版本。您可以在他们的 Web 界面或命令行上使用以下命令进行设置：

```
heroku addons:add heroku-postgresql:dev 
```

当然，你使用这个数据库是有限制的，因为当你的应用程序达到一定大小时 Heroku 开始向你收费。您需要获取插件的登录凭据。最简单的方法是访问 Heroku.com 上的应用程序，单击 PG 插件，然后从下拉列表中选择“Active Record”。这实际上会在`config/database.yml`文件中显示连接到 Heroku DB 所需的 YAML。

您需要添加`gem 'pg'`到您的 gemfile 中。Heroku 建议您在开发机器上安装 PG，但如果您不想这样做，您可以在`group :production`.

底线：你不能在 Heroku 上使用 sqlite。如果这是一个交易破坏者，请查看 Amazon EC2 或其他数千个托管站点中的任何一个。

# python - 'type' 类型的参数不可迭代

> ID：14292292
> 
> 赞同：4
> 
> 时间：2013-01-12T10:08:24.587
> 
> 标签：python, django, django-templates, typeerror

我已经编写了这个简单的方法，它在终端中似乎运行良好，但是每次我在浏览器中启动它时，我都会得到：'type' 类型的参数是不可迭代的。

```
def get_main(request):
    t = get_template('main.html') 
    p = urllib2.urlopen("http://www.caltech.edu/news/rss.xml")
    x = minidom.parseString(p.read())
    titles = x.getElementsByTagName("title")
    items_list = []

    for title in titles:
        items_list.append(str(title.firstChild.nodeValue))

    subscriptions_list = ['Caltech']
    html = t.render(Context({'subscriptions_list': subscriptions_list, 'items_list': items_list}))
    return HttpResponse 
```

的HTML：

```
<body>
        <div class="wrap">
            <div class="banner">Infobesity</div>

            <!-- Subscriptions -->
                <div class="subscriptionsDiv">
                    <ol class="subscriptionsList">
                    {% for subscription in subscriptions_list %}
                        <li>{{ subscription }}</li>
                    {% endfor %}
                    </ol>
                </div>
            <!-- Subscriptions End -->

            <!--  Items -->
                <div class="itemsDiv">
                    <ol class="itemsList">
                    {% for item in items_list %}
                        <li>{{ item }}</li>
                    {% endfor %}
                    </ol>
                </div>

            <!-- Items End -->
        </div>
    </body> 
```

追溯：

```
 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
      189\.             response = self.apply_response_fixes(request, response)
    File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in apply_response_fixes
      237\.             response = func(request, response)
    File "/usr/local/lib/python2.7/dist-packages/django/http/utils.py" in fix_location_header
      19\.     if 'Location' in response and request.get_host(): 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T10:11:33.853

`HttpResponse`你不打电话就回来；这是一个类，因此不可迭代。

也许您打算在回复中返回`html`？

```
return HttpResponse(html) 
```

# sencha-touch - 煎茶触控本地化

> ID：14292301
> 
> 赞同：1
> 
> 时间：2013-01-12T10:09:48.740
> 
> 标签：sencha-touch, sencha-touch-2

我正在开发具有多种语言环境的 sencha 触摸应用程序我已经根据此链接为每种语言开发了多种语言环境文件 [http://wtcindia.wordpress.com/2011/11/26/localizing-sencha-touch-application/#comment -780](http://wtcindia.wordpress.com/2011/11/26/localizing-sencha-touch-application/#comment-780)

但我的问题是在加载我附加 app-en_US.js 语言环境文件时，当用户选择例如语言（德语）时，新的本地文件被添加到 html app-GE_de.js 的头部标签中

但是当我运行应用程序并选择德语时，仍然以英语显示文本

我像这样添加javascript语言环境文件

```
 var th = document.getElementsByTagName('head')[0];
  var s = document.createElement('script');
  s.setAttribute('type','text/javascript');
  s.setAttribute('src','locale/app-'+lang+'.js');
  th.appendChild(s); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:09:29.703

是的，问题是，您必须在使用本地化文本的地方重新创建 ui 元素。我制作了一个名为 Sencha Localization 的自定义组件，其中还包含重新创建 ui 元素的问题。结帐[https://github.com/bwidtmann/sencha_localization](https://github.com/bwidtmann/sencha_localization)或[http://market.sencha.com](http://market.sencha.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T18:49:31.227

如果从一开始就包含 app-GE_de.js 而不是 app-en_US.js 文件，它是否正常工作？如果是这样，那么您可能不会破坏旧组件并重新创建它们。

请记住，仅更改全局属性不会更新对其的所有引用。

# git - Git：不要忽略带有点的-directory-

> ID：14292307
> 
> 赞同：10
> 
> 时间：2013-01-12T10:11:01.680
> 
> 标签：git, version-control, gitignore

我试过这个 .gitignore 文件：

```
 *
 !mydirectory.ext
 !.gitignore 
```

但它不起作用，除了 gitignore 之外的所有内容都被忽略。

也试过：

```
 !\mydirectory\.ext 
```

该目录需要扩展，因为它是应用程序的插件。

任何解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T11:25:54.820

[参考](https://stackoverflow.com/questions/1248570/git-ignore-everything-except-subdirectory)

```
*
!/mydirectory.ext/
!/mydirectory.ext/*
!/mydirectory/.ext/
!/mydirectory/.ext/*
!.gitignore 
```

或者

```
*
# ignore all 
!/.*/
# but not directories which names starting with a dot
!/.*/*
# and all its contents
/.*/*/
# but ignore other directories (which names not starting with a dot)
# which results also not tracking its files underneath
!/.*/.*/
# but not to subdirectories (which names starts with a dot)
!/.*/.*/*
# and its contents

!/*.*/
# don't ignore directories which names has a dot in it
!/*.*/*
# and its contents
# extend it like with /.*/ 
!.gitignore 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T13:02:21.110

那种白名单在 git 中是不容易的。

一旦你忽略了一个目录，git 就不会查看它的内部，因此不会检查这个目录中的异常。

解决这个问题的唯一方法是使用长包含/排除级联，这真的很难看。

最好的方法是重新考虑您的问题并尝试在没有此类一般例外的情况下解决它，例如通过明确忽略您确定不想要的所有内容。

# javascript - 使用 remove 后滑动元素

> ID：14292310
> 
> 赞同：2
> 
> 时间：2013-01-12T10:11:31.240
> 
> 标签：javascript, jquery, animation, transition

假设我在屏幕上平铺了一堆盒子：

> [1] [2] [3]
> [4] [5] [6]
> [7] [8] [9]

每个框代表一个 div。如果我要在其中一个 div 上使用 jquery `.remove()`，如何制作滑动后出现的框？

例如，如果我删除了`box 5`，我想`box 6`滑动到`box 5`' 的位置，`box 7`向上滑动到`box 6`' 的位置，等等。

目前，当我移除一个盒子时，这些盒子会立即转到所需的位置。我在它们上尝试了一个 css3 转换属性，但由于某种原因它不起作用。

JS：

```
$(this).parent().parent().parent().remove(); //this will remove the desired box 
```

CSS：

```
.left-col-box {
  position: relative;
  float: left;
  width: 218px;
  height: 218px;
  margin-left: 20px;
  margin-top: 20px;

 -webkit-transition: 0.2s;
-moz-transition: 0.2s;
-ms-transition: 0.2s;
-o-transition: 0.2s;
transition: 0.2s;
} 
```

HTML：

```
<div class="left-col-box">
  <div class="left-col-box-header">
    <?php echo $rows[1]; ?>
  </div>
  <img src="includes/thumber.php?file=../img/<?php echo $rows2[0]. '.'.$rows2[1];?>&width=217&height=217" />
</div> 
```

请原谅php。谢谢！基本上 HTML 和 CSS 组成了一个盒子。我使用 php 生成 x 数量的盒子。如果我要删除一个，我希望它们滑动到所需的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:48:07.533

你可以使用插件吗？如果是这样，您可以使用[jquery isotape](http://isotope.metafizzy.co/)轻松完成此操作。

激活容器元素上的插件；

```
$('.parent').isotope({
  itemSelector : '.x'
}); 
```

并在删除框时执行重新布局，方法是调用

```
$('.parent').isotope( 'reLayout'); 
```

[在这里提琴](http://jsfiddle.net/u2kgU/1/)

# sql - 在 ms access 2010 中发送带有两个附件的电子邮件的按钮

> ID：14292313
> 
> 赞同：0
> 
> 时间：2013-01-12T10:11:36.177
> 
> 标签：sql, email, vba, ms-access

我有一个数据库，我想在其中创建一个按钮，该按钮将发送带有来自 Outlook 的两个附件的电子邮件。可以给出文件的路径。它应该会弹出一个类似于您在创建新邮件时获得的表单以检查邮件中的正文是否正确的弹出窗口？

知道如何实现这一目标吗？

```
Private Sub Command0_Click()
'Arvin Meyer 03/12/1999
'Updated 7/21/2001
On Error GoTo Error_Handler

Dim objOutlook As Outlook.Application
Dim objEmail As Outlook.MailItem

Set objOutlook = CreateObject("Outlook.application")
Set objEmail = objOutlook.CreateItem(olMailItem)

With objEmail
    .To = "info@datastrat.com"
    .Subject = "Look at this sample attachment"
    .body = "The body doesn't matter, just the attachment"
    .Attachments.Add "C:\Test.htm"
    '.attachments.Add "c:\Path\to\the\next\file.txt"
    .Send
    '.ReadReceiptRequested
End With

Exit_Here:
    Set objOutlook = Nothing
    Exit Sub

Error_Handler:
    MsgBox Err & ": " & Err.Description
Resume Exit_Here

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:39:39.880

弄清楚了！！！！感谢 ryadavilli

而不是 .send 它是 .Display

它奏效了

# php - 无法在 php 中读取 cookie

> ID：14292320
> 
> 赞同：0
> 
> 时间：2013-01-12T10:12:12.903
> 
> 标签：php, cookies

我在这样的`loginform.php`文件中创建 cookie：

```
$time = time();
setcookie('myusername', $myusername, $time +60*60*24*200); // Sets the cookie username
setcookie('myuserid', $rows['userid'], $time +60*60*24*200); // Sets the cookie password
setcookie('myname', $rows['name'], $time +60*60*24*200); 
```

`login`该文件位于我网站根目录中名为的文件夹中。

我可以`loginform.php`在根目录中的任何其他文件中检索 cookie，但不能在其他文件中检索 ..

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:15:25.180

创建 cookie 时，其根路径设置为创建的脚本的路径，在本例中为 /login - 下面的所有内容都无法访问 cookie，请在 setcookie 中添加“/”作为另一个参数

```
$time = time();
setcookie('myusername', $myusername, $time +60*60*24*200, '/'); // Sets the cookie username
setcookie('myuserid', $rows['userid'], $time +60*60*24*200, '/'); // Sets the cookie password
setcookie('myname', $rows['name'], $time +60*60*24*200, '/'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:17:26.220

从[手册](http://php.net/setcookie)，

> cookie 可用的服务器上的路径。如果设置为“/”，cookie 将在整个域中可用。如果设置为 '/foo/'，则 cookie 将仅在 /foo/ 目录和域的 /foo/bar/ 等所有子目录中可用。默认值是设置 cookie 的当前目录。

您需要将 cookie 路径设置为`/`从任何地方访问它。所以它会像，

```
setcookie('myusername', $myusername, $time +60*60*24*200, '/'); 
```

**在 cookie 中设置用户名或用户 ID 等敏感信息不是一个好主意。任何人都可以改变价值并成为另一个人。**

最好使用[Session](http://bd1.php.net/manual/en/book.session.php)。甚至会话 id 也会保存在 cookie 中，但很难猜测另一个会话 id。

# data-structures - 如何理解包含？应用于clojure中的列表

> ID：14292324
> 
> 赞同：0
> 
> 时间：2013-01-12T10:12:29.697
> 
> 标签：data-structures, clojure, functional-programming, contains

`contains?`我是 clojure 的新手，对将表单用于不同的数据结构有点困惑。

应用于`contains`向量、集合或映射的结果正是我所期望的，它测试集合中是否存在键（或索引）。但是当涉及到一个列表时，例如

```
 (def li '(1 2 3)) ; define a list
(contains? li 1) ; returns false !!?? 
```

我知道要理解如何`contains?`使用列表并不是那么简单，因为它的文档说实现在恒定或日志时间内运行。因此，如果 1 在列表或其索引范围内，那么在少于日志时间的时间内进行测试是没有意义的。但在那种情况下，为什么它不会像使用`assoc`列表一样引发异常。在这种`assoc`情况下，哲学是相同的 -`assoc`不应该应用于列表，因为它不支持对其元素进行足够快的随机访问。

`(vals a-map)`我觉得这很不方便，因为clojure中的很多表单都返回一个通用集合作为结果，例如说同一件事的不同方式。

```
 (def a-map {:one 1 :two 2})
(contains? (vals a-map) 1) ; returns false!!
(contains? (set (vals a-map)) 1); returns true!! 
```

所以经过长时间的解释，我的问题是——这个设计背后的理性是什么？当我们想在clojure中测试一个元素是否在一个map的值集中时，我们应该如何原生地说，即更重要的是，我应该如何说服自己，这样我就不会在实践中犯下愚蠢的错误？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:30:12.120

[源代码](https://github.com/clojure/clojure/blob/clojure-1.4.0/src/jvm/clojure/lang/RT.java#L694)显示，对于 clojure 直到 1.4 版（包括 1.4 版）`contains?`，列表总是返回 false（它一直到第 713 行）。

在[最新的 1.5 beta](https://github.com/clojure/clojure/blob/clojure-1.5.0-beta2/src/jvm/clojure/lang/RT.java#L696)中，它会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:35:23.627

`contains?`仅用于键控集合（例如，任意键/值对的映射，具有整数索引的索引集合的向量）。请参阅文档字符串：

```
clojure.core/contains?
([coll key])
  Returns true if key is present in the given collection, otherwise
  returns false.  Note that for numerically indexed collections like
  vectors and Java arrays, this tests if the numeric key is within the
  range of indexes. 'contains?' operates constant or logarithmic time;
  it will not perform a linear search for a value.  See also 'some'. 
```

就个人而言，我认为它的名字很糟糕，应该被称为`has-key?`或类似的东西。但那是过去的历史——除非有人（即 Rich 决定对 API 进行重大更改），否则我们会坚持下去。

可以说，如果`contains?`曾经给您带来问题，那么从算法的角度来看，您可能做错了什么：您可能不应该对集合进行顺序搜索来查找值，而应该使用映射或集合。

但要回答这个问题：我同意你的观点，当应用于不支持键控查找（如列表）的东西时，包含抛出异常会更有意义。它与文档字符串不矛盾，因为这种行为是未定义的，所以也许值得补丁？

**编辑**：我从@ivant 的回答中看到，最新的 1.5 测试版确实会在列表中引发异常。问题已经解决了！

# android - 如何从 YouTube 获取播放列表视频

> ID：14292325
> 
> 赞同：2
> 
> 时间：2013-01-12T10:12:32.323
> 
> 标签：android, youtube, youtube-api

我正在编写一个应用程序，我想在其中*获取 YouTube 视频列表*，我可以通过使用特定用户的帐户来做到这一点，如下面的链接：

```
 HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc"); 
```

但是如果我想**使用播放列表**获取 YouTube 视频列表，那么我需要在我的代码中做哪些更改，比如这里我不需要用户名来获取视频。

```
 http://gdata.youtube.com/feeds/api/playlists/PL1D5B07DD840FB46D?v=2&alt=json 
```

*原文链接：* [http ://www.youtube.com/playlist?list=PL1D5B07DD840FB46D](http://www.youtube.com/playlist?list=PL1D5B07DD840FB46D)

**我的代码：**

```
 public class GetYouTubeUserVideosTask implements Runnable {

public static final String LIBRARY = "Library";
private final Handler replyTo;
private final String username;

public GetYouTubeUserVideosTask(Handler replyTo, String username) {
    this.replyTo = replyTo;
    this.username = username;
}

@Override
public void run() {
    try {

        HttpClient client = new DefaultHttpClient();
        HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/playlists/PL1D5B07DD840FB46D?v=2&alt=json");   
        HttpResponse response = client.execute(request);
        String jsonString = StreamUtils.convertToString(response.getEntity().getContent());
        JSONObject json = new JSONObject(jsonString);
        JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");
        List<Video> videos = new ArrayList<Video>();

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            String title = jsonObject.getString("title");
            String url;
            try {
                url = jsonObject.getJSONObject("player").getString("default");
            } catch (JSONException ignore) {
                url = jsonObject.getJSONObject("player").getString("default");
            }

            String thumbUrl = jsonObject.getJSONObject("thumbnail").getString("sqDefault"); 
            videos.add(new Video(title, url, thumbUrl));
        }       
        Library lib = new Library(username, videos);

        Bundle data = new Bundle();
        data.putSerializable(LIBRARY, lib);

        Message msg = Message.obtain();
        msg.setData(data);
        replyTo.sendMessage(msg);

    } catch (ClientProtocolException e) {
        Log.e("Feck", e);
    } catch (IOException e) {
        Log.e("Feck", e);
    } catch (JSONException e) {
        Log.e("Feck", e);
    }
}
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:10:00.290

我在我的一个项目中处理了它，在该项目中我显示了我的 youtube 帐户中的所有视频并在视频视图中显示它。

要从您的 youtube 频道（帐户）播放视频，您需要获取视频的 rtsp URL。

按照[这个例子](http://blog.blundell-apps.com/show-youtube-user-videos-in-a-listview/)，它会给你完美的想法。

另请参阅[我的回答](https://stackoverflow.com/a/12854159/1405983)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:09:29.547

您可以使用新的 YouTube Data API v3 来获取播放列表：

[https://developers.google.com/youtube/v3/docs/playlists](https://developers.google.com/youtube/v3/docs/playlists)

在我编写的本教程中（西班牙语 .. 但您可以看到代码更改..）：

[http://fuse21.blogspot.com.ar/2013/01/utilizando-youtube-data-api-v3-desde.html](http://fuse21.blogspot.com.ar/2013/01/utilizando-youtube-data-api-v3-desde.html)

我展示了如何更改官方示例“tasks-android-sample”：

[http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/?repo=samples)

使用 YouTube 数据 API 而不是任务 API。

# ios - 与 iOS 6 一起使用的 AdMob 使应用程序崩溃（无法识别的选择器）

> ID：14292326
> 
> 赞同：3
> 
> 时间：2013-01-12T10:12:42.520
> 
> 标签：ios, crash, admob, selector, unrecognized-selector

我在仅在 iOS 6 下运行的应用中使用 AdMob 6.2.1。我已经按照谷歌的说明在模拟器和我的 iPhone 5 上运行时一切正常。

但是，当向 Apple 提交应用程序时，我被拒绝了，并且崩溃日志显示以下内容：

```
Last Exception Backtrace:
0   CoreFoundation                  0x3abcb3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x392d695e objc_exception_throw + 26
2   CoreFoundation                  0x3abcef2c -[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                  0x3abcd648 ___forwarding___ + 388
4   CoreFoundation                  0x3ab25204 _CF_forwarding_prep_0 + 20
5   Dus                             0x000d39f4 -[GADObjectPrivate loadPrivateRequest:autoRefresh:] (GADObjectPrivate.m:402)
6   Dus                             0x000d5454 -[GADObjectPrivate loadRequest:] (GADObjectPrivate.m:827)
7   Dus                             0x000d2f20 -[GADBannerView loadRequest:] (GADBannerView.m:271)
8   Dus                             0x000b57cc -[DMViewController viewDidLoad] (DMViewController.m:131) 
```

我不明白为什么它对我有用并且会与 Apple 员工发生冲突。

我已将`-ObjC`（调试和发布）添加`Other Linker Flags`到`Build Settings`.

这是发生崩溃的块代码：

```
bannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner origin:origin];

bannerView.adUnitID = @"MYBANNERID";
[bannerView setRootViewController:self];
[bannerView setDelegate:self];
bannerView.center = CGPointMake(self.view.center.x, bannerView.center.y);

GADRequest *request = [GADRequest request];

[bannerView loadRequest:request]; //CRASHES HERE
[self.view addSubview:bannerView]; 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:43:45.237

将请求放入`ViewDidAppear`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T06:54:41.057

也许你应该 addSubview: 当 adView 准备好时。即：在admob 的-adViewDidReceiveAd 中：。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T07:21:40.680

由于此问题与缺少 -ObjC 链接器标志有关，请检查您的存档架构并确保它使用的是发布配置文件。（如果这是一个旧项目，您之前可能会创建一个分发配置文件（苹果在示例中这样做）并且存档可能会使用该配置文件）

# objective-c - Project Navigator 可以在 Xcode 4.5 中显示目标成员资格吗？

> ID：14292328
> 
> 赞同：1
> 
> 时间：2013-01-12T10:12:58.157
> 
> 标签：objective-c, xcode, macos, project-navigator

在旧版本的 Xcode 中，如果我没记错的话，您可以在 Project Navigator 中显示额外的列（有点像版本控制图标）来显示当前目标成员资格等内容。我在 Xcode 4.5 中找不到。有谁知道现在该怎么办？我只想查看显示哪些文件是目标的一部分的复选框列表。

## 笔记

是的，我知道您可以单击目标，导航到“构建阶段”，然后检查那里的相关部分以一次查看它们，但是您会丢失组层次结构的上下文。

过去，您只需单击项目导航器（或以前称为的任何名称）旁边的复选框即可。

我四处搜索，看到其他人说它已从 Xcode 4.x 中删除，所以也许这就是我找不到它的原因。如果真是这样，那就太疯狂了，但苹果公司做了一些奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:19:14.000

它在`Utilities > File inspector`选项卡中。您可以使用`Option + Command + 0`或导航到显示/隐藏它`View > Utilities > Show Utilitites`。

# php - PHP 将文件通信改为数据库通信

> ID：14292329
> 
> 赞同：0
> 
> 时间：2013-01-12T10:13:06.980
> 
> 标签：php, database, file, pdo

[该脚本是Net tuts+](http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/)上的开源教程，但我不知道如何更改脚本以连接数据库而不是文档随附的文本文件。

脚本在这里，我明白发生了什么......但我担心我可能不得不重新编程几乎所有东西或编写很多额外的代码，所以在我开始这样做之前，我想知道是否有更简单的方法来改变它。对于信息，我正在使用 PDO 和一个隐藏`config.php`文件用于数据库连接，`$conn`用作 PDO-DB 访问。

类的使用：

```
$rating = new ratings($_POST['widget_id']);
isset($_POST['fetch']) ? $rating->get_ratings() : $rating->vote(); 
```

评分等级：

```
class ratings
{
    private $data_file = './ratings.data.txt';
    private $widget_id;
    private $data = array();

    function __construct($wid)
    {
        $this->widget_id = $wid;

        $all = file_get_contents($this->data_file);

        if ($all) {
            $this->data = unserialize($all);
        }
    }
    public function get_ratings()
    {
        if ($this->data[$this->widget_id]) {
            echo json_encode($this->data[$this->widget_id]);
        } else {
            $data['widget_id']    = $this->widget_id;
            $data['number_votes'] = 0;
            $data['total_points'] = 0;
            $data['dec_avg']      = 0;
            $data['whole_avg']    = 0;
            echo json_encode($data);
        }
    }
    public function vote()
    {
        # Get the value of the vote
        preg_match('/rate_([1-5]{1})/', $_POST['clicked_on'], $match);
        $vote = $match[1];

        $ID = $this->widget_id;
        # Update the record if it exists
        if ($this->data[$ID]) {
            $this->data[$ID]['number_votes'] += 1;
            $this->data[$ID]['total_points'] += $vote;
        }
        # Create a new one if it doesn't
        else {
            $this->data[$ID]['number_votes'] = 1;
            $this->data[$ID]['total_points'] = $vote;
        }

        $this->data[$ID]['dec_avg']   = round($this->data[$ID]['total_points'] / $this->data[$ID]['number_votes'], 1);
        $this->data[$ID]['whole_avg'] = round($this->data[$ID]['dec_avg']);

        file_put_contents($this->data_file, serialize($this->data));
        $this->get_ratings();
    }

    # ---
    # end class
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:29:01.160

似乎有两点可以为类导入/导出数据`ratings`。

1) 在 中导入`constructor`，您在其中读取文件并将数据反序列化为名为 的类字段`data`。

2）在函数中导出`vote()`，您将序列化`data`到所需的文件中。

此外，您有一个记者，这将是`get_ratings()`.

您可以有多种方法，但我建议为类添加一个`private $dbObject`字段，该字段`ratings`应该是在构造函数中初始化的 PDO 对象。[了解如何初始化和创建 PDO 连接。](http://php.net/manual/en/pdo.construct.php)创建两个私有函数，将数据库导入导出过程封装在里面`ratings`，并在第1点和第2点调用它们。[学习如何使用PDO准备和执行数据库命令。](http://php.net/manual/en/pdostatement.execute.php)您还应该检查是否`PDO::fetch`从结果中检索数据。

您也可以将数据库通信封装（委托）到另一个类中，并在 中使用它`ratings`，这将是一个更好的抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:24:23.053

这只是一个模拟。关于如何做，希望对你有所帮助。

```
<?
class Vote
{
    private $_db;

    public function __construct() {
        // needs a db class
        $this->_db = DB::getInstance();
        // open connection or use existing
        $this->_db->connected or $this->_db->connect();
    }

    public function sum() {
        // get id securely or set it as NULL (@ makes it NULL silently)
        @ $ID = (int) $_POST['ID'];
        // Expr: if id !== null and id !== 0
        if ($ID) {
            // simply fetch all votes 
            return $this->_db->fetch("
                        SELECT SUM(`vote_point`) AS sums 
                        FROM `votes`
                        WHERE `ID` = $ID
                        ORDER BY sums");
        }
    }

    public function insert() {
        // get id securely or set it as NULL (@ makes it NULL silently)
        @ $ID = (int) $_POST['ID'];
        // Expr: if id !== null and id !== 0
        if ($ID) {
            // get vote point securely or set it as NULL
            $votePoint = !isset($_POST['votePoint']) ? NULL : intval($_POST['votePoint']);
            // vote point is number, so not NULL?
            if (is_int($votePoint)) {
                $this->_db->query("
                    INSERT INTO `votes` (`ID`, `vote_point`) 
                    VALUES ($ID, $votePoint)");
            }
            // yield last inserted row id (ID)
            return $this->_db->insertId();
        }
    }
} 
```

# c# - 网络表单上显示的大量数据库

> ID：14292333
> 
> 赞同：0
> 
> 时间：2013-01-12T10:14:23.720
> 
> 标签：c#, asp.net

我有一个从 Microsoft Access 获取数据的网络表单，我构建了一个动态表，其中包含两个 for 循环、标签控件和图像控件。该表包含 4 列。问题是 Access 表上存储的数据库太大而无法在一个网页上显示它们。这是我保存在 filename.aspx.cs 上的 c# 代码。

```
for (int i = 0; i < ds.Tables[0].Rows.Count; i +=4)
    {
        TableRow rw = new TableRow();
        for (int j = 0; j < 4; j++)
        {
            TableCell tc1 = new TableCell();
            if (!(i == ds.Tables[0].Rows.Count - 1 && ds.Tables[0].Rows.Count % 2 == 1 && j == 3))
            {
                Label l1 = new Label();
                l1.Text = ds.Tables[0].Rows[i + j]["Activite"].ToString();
                l1.Font.Bold = true;
                Image m1 = new Image();
                m1.ImageUrl = ds.Tables[0].Rows[i + j]["Photo"].ToString();
                tc1.Controls.Add(l1);
                tc1.Controls.Add(m1);
                rw.Cells.Add(tc1);
               }
        }
            Table1.Rows.Add(rw);

    } 
```

幸运的是，它在网页上成功显示，没有任何问题，但是我没有设法编写 ac# 代码，该代码可以使用特定数量的数据库从页面“超链接”移动到“超链接”页面。（我试图做的是：如果单元格 % 8 == 0 则以下数据库应存储在第二个超链接上filename.aspx 每个单元格都包含标签和图像。解决方案有意义吗？我被要求不要使用控件或 DataGrid。

# tridion - 在 Tridion 模板类中创建多媒体组件

> ID：14292340
> 
> 赞同：5
> 
> 时间：2013-01-12T10:16:04.377
> 
> 标签：tridion

我正在尝试使用以下代码在 Tridion 模板类中创建一个多媒体组件。

```
MemoryStream stringInMemoryStream = new MemoryStream(ASCIIEncoding.Default.GetBytes("
<test>testing</test>"));                            
Component xmlMultimediaComponent = new Component(engine.GetSession(), new 
  TcmUri("tcm:21-2008-2"));                
xmlMultimediaComponent.Title = "New MM component";
xmlMultimediaComponent.Schema = new Schema(new TcmUri("tcm:10-6532-8"), 
 engine.GetSession());                
xmlMultimediaComponent.BinaryContent.MultimediaType = new MultimediaType(new 
   TcmUri("tcm:0-36-65544"), engine.GetSession());                                         
xmlMultimediaComponent.BinaryContent.MultimediaType.MimeType = "application/xml";
xmlMultimediaComponent.BinaryContent.MultimediaType.FileExtensions = new List<string> 
   {"xml", "XML"};
xmlMultimediaComponent.BinaryContent.UploadFromStream = stringInMemoryStream;
xmlMultimediaComponent.BinaryContent.Filename = "testing.xml".ToLower();                                    
xmlMultimediaComponent.Save();                
xmlMultimediaComponent.CheckIn(true); 
```

请注意，“tcm:21-2008-2”是必须在其中创建组件的文件夹 TCM ID。“tcm:10-6532-8”是多媒体模式 ID，“tcm:0-36-65544”是多媒体类型 ID。

但是似乎存在一些问题，并且失败并出现以下错误：

> 链接到架构的值无效。在 Tridion.ContentManager.Utilities.ThrowInvalidLinkException(Link link, KernelException innerException) 在 Tridion.ContentManager.IdentifiableObject.AssertValidLink(Link link) 在 Tridion.ContentManager.IdentifiableObject.AssertValidLinks(IEnumerable`1 links) 在 Tridion.ContentManager.IdentifiableObject.AssertValidLinks( ) 在 Tridion.ContentManager.IdentifiableObject.OnSaving(SaveEventArgs eventArgs) 在 Tridion.ContentManager.ContentManagement.RepositoryLocalObject.OnSaving(SaveEventArgs eventArgs) 在 Tridion.ContentManager.ContentManagement.VersionedItem.OnSaving(SaveEventArgs eventArgs) 在 Tridion.ContentManager.ContentManagement.Component。在 Tridion.ContentManager.IdentifiableObject.Save(SaveEventArgs eventArgs) 在 Tridion 的 OnSaving(SaveEventArgs eventArgs)。

上述错误发生在以下语句中`xmlMultimediaComponent.Save()`。

知道如何将 LinkToMultimedia 类型的模式 id 传递给多媒体组件吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T10:37:09.120

我认为架构 ID 必须包含上下文发布 ID，因此在这种情况下 10-6532-8 应该是 21-6532-8。

谢谢

# c - 在 C 中移动文件光标两行

> ID：14292342
> 
> 赞同：0
> 
> 时间：2013-01-12T10:16:11.857
> 
> 标签：c, file, cursor, shift

我想将光标移动两行。我的意思是我想忽略前两行并获取文件的第三行。这是我的代码：

```
void dosyaImlecOtele(int satir,FILE *dosya){
    int i,karakter;
    char temp[100];
    for(i=0;i<satir;i++){
        karakter = getc(dosya);
        while(karakter != '\n' && !feof(dosya)){
             karakter = getc(dosya);
        }
    }
    fread(temp,sizeof(char),100,dosya);
    printf("%s",temp);
    } 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:30:49.020

当`for`循环结束时，`karakter`包含第三行的第一个字符（假设`satir`为 2），因为它被读取以发现它不是换行符。您可以使用 将角色放回流中`ungetc`。

# javascript - 使用 Javascript 的正则表达式非常严格的规则

> ID：14292343
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:16:39.127
> 
> 标签：javascript, regex

基本上我有这样的事情：

```
<script>
    function myfunction(){
        var data = CKEDITOR.instances.editable.getData();
        alert(data);
    }
</script> 
```

我想要做的是，如果数据与此不匹配：

```
<h2>Any text allowed here but only text<h2> 
```

我想警告用户。我怎样才能做到这一点？谢谢..

我将编辑我的问题，我想这还不够清楚..

从某处读取数据变量。这不重要。单击按钮时，将调用此函数。数据变量（它是一个字符串）只能是这样的：

```
<h2> ANY TEXT HERE </h2> 
```

所以这些是不允许的：

```
Anytext
<h1>any text</h1>
<a href=..> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:26:06.240

版本 1：

```
var pattern = /<h2>[^\d]+<\/h2>/;
console.log(pattern.test('<h2>asf</h2>')); 
```

这将阻止任何数字，但只接受普通字母。

版本 2：

```
var pattern = /<h2>[A-Za-z]+<\/h2>/;
    console.log(pattern.test('<h2>asf</h2>')); 
```

仅在标签之间接受 A-Za-z

版本 3：

```
 var pattern = /<h2>[^\<\>\/\d]+<\/h2>/;
    console.log(pattern.test('<h2>asf?1.,</h2>')); 
```

这将接受除数字之外的任何内容并防止任何结束标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:28:21.240

使用浏览器的 HTML 解析功能而不是 RegEx。只需将指定的字符串设置为某个元素，`.innerHTML`然后使用 DOM 函数检查子元素：

```
var temp = document.createElement("div");
temp.innerHTML = "<h2>Any text allowed here but only text</h2>";
if (
    temp.childNodes.length == 1 &&            // has only one child
    temp.firstChild.tagName == "H2" &&        // that child is a H2
    temp.firstChild.childNodes.length == 1 && // H2 as only one child
    temp.firstChild.firstChild.nodeType == 3  // that child a Node.TEXT_NODE
) {
    alert("valid");
} else {
    alert("invalid");
} 
```

# exception - FlockDB 设置失败，本地主机上的 create_shard 异常

> ID：14292345
> 
> 赞同：0
> 
> 时间：2013-01-12T10:17:06.843
> 
> 标签：exception, installation, flockdb

大家，我正在尝试使用flockdb。我按照本指南进行设置，[https:](https://stackoverflow.com/a/14223067/1700490) //stackoverflow.com/a/14223067/1700490，一切都很好，直到我尝试使用“setup-env.sh”启动flockdb，这是例外：

` ./dist/flockdb/scripts/setup-env.sh

杀死任何正在运行的flockdb ...启动flockdb ...创建分片... 1 localhost上的create_shard异常：表'flockdb_development.shards'不存在：表'flockdb_development.shards'不存在重试50次。 ..`

我不知道为什么会这样，我对 Scala 一无所知，我在互联网上搜索但没有找到答案。

提前致谢！

# xcode - 是否有用于在 Github 上打开文件的 Xcode 插件？

> ID：14292346
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:17:11.647
> 
> 标签：xcode, plugins, github

我正在寻找一个插件，它允许直接从 xcode 打开 Github 上的文件（在浏览器中）。例如，当您想找到添加了某行代码的提交并在 Github 上对其发表评论时，它可能很有用。

AppCode 已经有这个功能了。它被称为“在浏览器中打开”，您可以在上下文菜单中找到它。

我还发现在 Vim 中[可以](https://stackoverflow.com/questions/11352034/plugin-to-open-code-file-in-github/11353201#11353201)使用逃犯插件。

有人知道它的现成插件还是我应该考虑自己编写？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T09:20:38.890

这可以通过[https://github.com/wojteklu/xcode-open-on-github](https://github.com/wojteklu/xcode-open-on-github)完成。

它还可以在github中打开特定的行号。

# python - Python：转换十六进制字符串

> ID：14292349
> 
> 赞同：-7
> 
> 时间：2013-01-12T10:17:13.590
> 
> 标签：python

//重复的问题被删除。

我想像这样转换一个十六进制字符串：

```
b'\x0f\x00\x00\x00NR09G05164\x00' //This is what I've received from socket 
```

类似于：

```
0f0000004e52303947303531363400 
```

如何使用 Python 实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:18:14.147

您可以使用`binascii.hexlify()`：

```
In [25]: strs=b'\x0f\x00\x00\x00NR09G05164\x00'

In [26]: import binascii

In [27]: binascii.hexlify(strs)
Out[27]: b'0f0000004e52303947303531363400' 
```

# class - 具有格式的 NSString 文字，在 Obj-C 类方法中崩溃

> ID：14292354
> 
> 赞同：1
> 
> 时间：2013-01-12T10:18:05.067
> 
> 标签：class, crash, nsstring, arguments, nsobject

我在使用 NSLog 替代品的某些地方发生了崩溃。

（我主要使用替换来写入文件和屏幕上的文本字段，但目前我将其仅打印到控制台）

我尝试了以下两种实现（顺便感谢原作者）： [http](http://www.platinumball.net/blog/2009/07/18/nslog-sucks/) ://www.platinumball.net/blog/2009/07/18/nslog-sucks/ http://www.karlkraft。 com/index.php/2009/03/23/114/

它们都在我的代码中的某些位置为我工作，但似乎当我从某些地方调用它们时，它们会导致崩溃，通常 CFStringAppendFormatCore 位于堆栈跟踪的顶部，但并非总是如此（最近的时间，它在“0 flockfile”上）。崩溃似乎总是在程序集中的 CMPL 或 JMP 周围。

我打算以这种方式使用它：

```
+ (void)saveProfile:(NSString *)reason {
    DebugLog(@"Saved profile: %@", reason);
} 
```

但是当我执行以下操作时，我什至会崩溃：

```
+ (void)saveProfile:(NSString *)reason {
    DebugLog(@"Saved profile.");
} 
```

我注意到当我遇到崩溃时，我似乎总是在 NSString 上得到 Summary Unavailable，但是如果我把它放在其他日志的位置，NSLog 仍然可以工作。我已经在这些位置使用 NSLog 好几个星期了，总是将配置文件的保存注销到控制台，但是现在我试图替换它，我得到了这个崩溃。

我已经更换了我所有的 NSLog，几乎所有的 NSLog 都可以正常工作。我试图发现一种模式，它似乎总是在它崩溃的类级方法中。据我所知，我的 Profile 类没有做任何花哨的事情。它派生 NSObject，并且只有类方法。

我最初将此日志记录功能的导入作为我的 Prefix PCH 文件中的最后一件事，并且想知道这是否导致了问题，所以我让所有使用该功能的文件现在都导入了标题，它不再在 PCH 中.

我尝试的另一件事是将 (NSString *) 替换为 id 作为第一个参数，因为我阅读了一篇 CFStringAppendFormatCore 帖子，该帖子是关于在预期 NSString 时传递 NSString 以外的东西。这是有道理的，因为我有时会在我认为通过 [theNsObject 描述] 记录的附加参数中传递一个 NSObject。但即使将我的代码简化为上面的第二个示例，没有格式 - 只是一个字符串文字 - 崩溃仍然会发生。

最后一件事 - 这是在 iPhone 6.0 模拟器上运行的，带有 iOS 6 SDK 和 Xcode 4.5.2。

有什么想法吗？

谢谢！

# c# - 实体 SaveChanges 抛出异常

> ID：14292358
> 
> 赞同：0
> 
> 时间：2013-01-12T10:18:24.020
> 
> 标签：c#, asp.net-mvc, database, asp.net-mvc-3

我在我的数据库中保存了一些位置/城市。一切正常，直到我在数据库中的表中添加了一个新列并更新了项目中的数据模型。

我的位置/城市确实会通过我 `this._entities.SaveChanges();`的抛出来保存，类似于：

`The changes to the database were committed successfully, but an error occurred while updating the object context. The ObjectContext might be in an inconsistent state. Inner exception message:AcceptChanges cannot continue because the object's key values conflict with another object in the ObjectStateManager. Make sure that the key values are unique before calling AcceptChanges.`

我真的不知道是什么问题，因为它以前工作过，而且这些更改不应该真正影响它......

下面是一些代码：
首先，我将所有对象放入 currentLocation。我通过 foreach 循环它们以将项目添加到方法 Add()。最后我调用 _entites.SaveChanges()。一切都被保存了，但我得到一个错误......

```
 var webService = new WeatherWebService();
            currentLocation = webService.FindLocation(city);

            // ...save the user in the database.
            foreach (var item in currentLocation)
            {
                this._repository.Add(item);
            }

            this._repository.Save();

    public override void Add(Location location)
    {
        this._entities.Locations.AddObject(location);
    }

    public override void Save()
    {
        this._entities.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:09:59.607

我怀疑由于两个不同的问题可能会发生异常：

1- 在之前的通话中，您已经检索到位置；并且您正在尝试插入相同的值。2- 从 Web 服务检索的位置实体的主键不是唯一的。

为了确定确切的问题，请检查显示异常的内部异常。

# sql - 连接两个表，其列包含相似但不相同的值

> ID：14292368
> 
> 赞同：0
> 
> 时间：2013-01-12T10:19:28.427
> 
> 标签：sql, sqlite

我有两个表，第一个有 4 列，如：

`ID` `NAME` `COUNTRY` `FILTERID`

第二个有 2 列，如：

`ID` `COUNTRY`

我想使用这个查询：

```
SELECT F.Name
FROM   First as F, Second AS S
WHERE  F.Filterid = S.S_Id 
  AND  F.Country = S.Country 
```

`S.Country`包含`Japan,Usa`，但`F.Country`只有`Japan`。

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:24:05.683

为此，您必须编写`JOIN`查询，因为您想从两个表中获取项目......

你可以使用喜欢，

`SELECT F.Name FROM First F JOIN Second S ON F.Country=S.Country`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:35:00.560

如果您正在使用 sql，您可以使用 JOINS 例如 Select * from table_one 作为一个 INNER JOIN（在使用加入表之前，您必须知道不同的连接目的以供参考） [table_two](http://www.w3schools.com/sql/sql_join.asp)作为两个 ON one.some_value_of_column_in_table_one = two.some_value_of_column_in_table_two 谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:49:07.300

如果一个国家/地区字段是另一个国家/地区的子字符串，请使用以下`INSTR` [函数](http://www.sqlite.org/lang_corefunc.html)：

```
SELECT F.Name FROM First AS F, Second AS S WHERE F.Filterid=S.id AND INSTR(S.Country, F.Country) > 0 
```

`F.Country`如果发生在`S.Country`（并且，显然，如果`F.Filterid=S.id`，根据您的原始 SQL），这将返回记录。

或者，您也可以将其构建为 JOIN：

```
SELECT F.Name FROM First AS F JOIN Second AS S ON F.Filterid=S.id AND INSTR(S.Country, F.Country) > 0 
```

# c# - 如何在 C# 中将 3D 字符串数组存储和恢复到文件中？

> ID：14292370
> 
> 赞同：3
> 
> 时间：2013-01-12T10:19:29.143
> 
> 标签：c#

如何在 C# 中将 3D 字符串数组存储和恢复到文件中？你好; 我正在编写一个项目，我为公共数组创建了一个类，这样我就可以以各种形式使用它们。

> 类 MainArray
> 
> {
> 
> ```
>  // Introduce Moarefi Projeh
> 
>    public static string[] MPArray = new string[15];
> 
>    // Introduce Moarefi Personel Rozmozd
> 
>    public static string[,] MPRArray = new string[20,15];
> 
>    // Introduce Moarefi Peymankaran
> 
>    public static string[,] MPeymankaranArray = new string[20, 15];
> 
>    // Introduce Gozaresh PersonelRozMozd
> 
>    public static string[,] GPRMArray = new string[20, 15];
> 
>    
>    public static string[,,] MArr = new string[20,20,20]; 
> ```
> 
> }

我以某种形式将所有数据保存在这些数组中。我想创建一个类，操作员可以在使用程序结束时将所有这些数组存储在一个文件中，并在下次使用程序开始时恢复这些数据。

你知道这是我第一次用 C# 编程，请给我一个类代码，我可以做到这一点。我想要一个类代码，我在我的主程序中使用一个简单的代码，如下所示： MyData.WriteArray(MyArrayName,FileName); 用于存储和 MyData.ReadArray(MyArrayName,FileName); 用于恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:27:46.137

此代码会将 MyData 类型的对象保存到二进制文件：

```
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;

[Serializable()]
public class MyData
{
     private string[,,] SArr;

     public MyData(int sizex,int sizey,int sizez)
     {
        SArr = new string[sizex,sizey,sizez];
     }         
     public MyData(string[,,] data)
     {
        SArr = data;
     }         
     public string this[x,y,z]
     {
        get
        {
            return SArr[x,y,z];
        }
        set
        {
            SArr[x,y,z] = value;
        }
     }
     public void SaveToFile(String fileName)
     {
          Stream TestFileStream = File.Create(fileName);
          BinaryFormatter serializer = new BinaryFormatter();
          serializer.Serialize(TestFileStream, this);
          TestFileStream.Close();
     }

    public static MyData ReadFromFile(String fileName)
    {
        if (File.Exists(FileName))
        {
            Stream TestFileStream = File.OpenRead(FileName);
            BinaryFormatter deserializer = new BinaryFormatter();
            var data = (MyData)deserializer.Deserialize(TestFileStream);
            TestFileStream.Close();
            return data;
        }
        return null;
    }
} 
```

在代码中：

```
var data = new MyData(4,4,4);
MyData[1,1,0] = "TestData";
data.SaveToFile(@"C:\Test.data");
var data2 = MyData.ReadFromFile(@"C:\Test.data");
//data2[1,1,0] == "TestData" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:29:00.570

在保存之前，您需要序列化数组。[这](https://stackoverflow.com/questions/4360089/serializing-an-array-in-c-sharp)是一个可以帮助您的链接。

# ios - 使用 CCClippingNode 的屏幕截图 - cocos2d-iphone-2.1-beta4

> ID：14292373
> 
> 赞同：3
> 
> 时间：2013-01-12T10:19:43.310
> 
> 标签：ios, objective-c, cocos2d-iphone, screenshot

我正在测试 Cocos2d 2.1 beta4 中添加的新裁剪节点`CCClippingNode`。但是，我无法使用以下方法截取剪裁节点的屏幕截图。最终结果是未剪辑的图像。你可以在这里找到新版本：http: [//www.cocos2d-iphone.org/download](http://www.cocos2d-iphone.org/download)

```
+ (UIImage *) screenshotNode:(CCNode*)startNode {
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize winSize = [CCDirector sharedDirector].winSize;

    CCRenderTexture * rtx = [CCRenderTexture renderTextureWithWidth:winSize.width height:winSize.height];

    [rtx begin];
    [startNode visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-09T06:55:46.650

**建议的解决方案**

以下代码似乎适用于 Cocos2d v2.1：

```
+ (UIImage *) screenshotNode:(CCNode*)startNode {
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize winSize = [CCDirector sharedDirector].winSize;

    CCRenderTexture * rtx =
        [CCRenderTexture renderTextureWithWidth:winSize.width
                                         height:winSize.height
                                    pixelFormat:kCCTexture2DPixelFormat_RGBA8888
                             depthStencilFormat:GL_DEPTH24_STENCIL8];

    [rtx beginWithClear:0 g:0 b:0 a:0 depth:1.0f];
    [startNode visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

**解释**

要使原始代码正常工作，需要进行以下两项更改：

1.  `depthStencilFormat`创建`CCRenderTexture`对象时指定参数。默认情况下，`CCRenderTexture`不创建深度/模板缓冲区。
    *   该`depthStencilFormat`参数*必须*设置为`GL_DEPTH24_STENCIL8`才能创建模板缓冲区，至少在 v2.1 中。`CCRenderTexture`初始化代码专门检查这个值。
2.  `beginWithClear`使用深度值`1.0f`而不是调用`begin`。
    *   似乎只是调用`begin`永远不会清除深度缓冲区。在内部`CCClippingNode`，使用 禁用写入深度缓冲区`glDepthMask(GL_FALSE)`，但仍启用深度测试。由于深度缓冲区永远不会被清除，我怀疑深度测试失败，导致模板永远不会被绘制。

此外，`CCGLView`必须首先创建模板`depthFormat:GL_DEPTH24_STENCIL8_OES`才能`CCClippingNode`使用模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T09:19:14.893

问题是我没有正确设置我的 CCGLView。我必须将深度格式设置为 GL_DEPTH24_STENCIL8_OES 而不是值 0

在 AppController.mm 中设置 depthFormat

![在此处输入图像描述](../Images/7775878356bd1f7cff899793fafdafad.png)

# asp.net - BootMetro 网格布局入门

> ID：14292375
> 
> 赞同：0
> 
> 时间：2013-01-12T10:20:02.777
> 
> 标签：asp.net, css, twitter-bootstrap

我正在尝试[在 BootMetro 中使用网格布局功能](http://aozora.github.com/bootmetro/scaffolding.html)。我有一个非常微不足道的例子，它没有达到我的预期。

```
<div class="container">
    <div class="row">
        <div class="span3">row1column1-3</div>
        <div class="span3">row1column4-6</div>
        <div class="span3">row1column7-9</div>
        <div>row1column10</div>        
        <div>row1column11</div>        
        <div>row1column12</div>        
    </div>
</div> 
```

默认情况下，BootMetro 网格给了我一个 12 列的网格。所以前 3 列应该填满前 9 列。然后以下列应填充第一行。他们没有，他们实际上变成了新的行。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:25:13.710

您必须`.span`在所有列上放置一个指标。但是，在您的最后 3 个 div 中，您没有指定任何内容。

就像如果你想要 4 列，你将有 4 个带有 span3 的 div，如果你想要 6 个列，则有 6 个带有 span2 的 div，依此类推。

每行跨度值的总和必须始终为 12。

（对不起，我是用手机写的）

# javascript - 基于回调的Javascript条件preventDefault

> ID：14292382
> 
> 赞同：1
> 
> 时间：2013-01-12T10:21:16.373
> 
> 标签：javascript, callback, preventdefault

我正在尝试在提交按钮上使用 javascript。点击提交按钮后，我运行一个例程，该例程使用回调处理程序 h 执行远程回调。根据 h 的结果，我将决定是继续提交还是阻止默认并留在页面上。

我尝试了几种方法。第一个是在回调之后使用 jquery 运行提交：

```
$('#submit').on('click', function(e) {
  e.preventDefault();
  run_func_with_callback(h);
}

h() {
  if (success) {
    $('#submit').submit();
  }
} 
```

另一个正在尝试无限循环，直到回调更改标志：

```
callback_flag = 0;

$('#submit').on('click', function(e) {
  run_func_with_callback(h);
  while(callback_flag == 0) {
    setTimeout(function() {}, 1000); // I want some form of sleep function here
  }

  if (callback_flag == -1) {
    e.preventDefault();
  }
}

h() {
  if (success) {
    callback_flag = 1;
  } else {
    callback_flag = -1;
  }
} 
```

但是，这些解决方案都不起作用。第一个我猜 jQuery 并没有真正那样工作。第二个我做的方法不是睡眠功能，也不是我需要的方式。

欢迎任何见解。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:28:06.433

坚持您的第一种方法，这样的工作是否可行：

```
$('#submit').on('click', function(e) {
    if(!success) {
        e.preventDefault();
        run_func_with_callback(h);
    }
    else {
        success = false;
    }
}

h() {
    if (success) {
        $('#submit').click();
    }
} 
```

重要的是在回调中触发`click`事件，然后使用 的值`success`有条件地执行提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:46:42.420

你能试试这个吗？

```
$('#submit').on('click', function(e) {
  e.preventDefault();
  run_func_with_callback(h);
}

h() {
  if (success) {
    $('#submit').closest("form").submit();
  }
} 
```

# navigation - FlexSlider 导航

> ID：14292383
> 
> 赞同：0
> 
> 时间：2013-01-12T10:21:29.807
> 
> 标签：navigation, flexslider

我在一个非常受欢迎的网站上使用[FlexSlider](http://flexslider.woothemes.com/)，其中有一些滑块。

那么我怎样才能让每个滑块都有不同的按钮——返回和下一步。

现在每个滑块都有类——flex-direction-nav，它们都有类似的按钮。

我的问题是如何将不同的类放在一起，因为我想为按钮使用不同的图像（大小和颜色）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:46:00.940

也许您可以用不同的容器 DIV 包装不同的滑块，或者给它们两个不同的类？假设我有 2 个 flexslider，名为 flexSlider1 和 flexSlider2

```
<div class="flexslider flexSlider1">
  <ul class="slides">
    <li>...</li>
    <li>...</li>
  </ul>
</div>

<div class="flexslider flexSlider2">
  <ul class="slides">
    <li>...</li>
    <li>...</li>
  </ul>
</div> 
```

现在访问您在 CSS 中的不同按钮，例如

```
.flexSlider1 .flex-next {
     background: ...
} 
```

# android - 按下后如何将数据从第二个活动传递到第一个活动？- 安卓

> ID：14292398
> 
> 赞同：202
> 
> 时间：2013-01-12T10:24:18.663
> 
> 标签：android, android-activity, parent-child, pass-data

我有 2 个活动，**Activity1**和**Activity2**。

在`Activity1`我有一个**Button**和**TextView**。单击按钮时，**Activity2**将启动。

在`Activity2`我有一个**EditText**。

**当从Activity2**按下返回时，我想在**Activity1**的**TextView**中显示从**Activity2中的****EditText**检索到的数据。

 ******有人可以帮我编写代码来完成这项工作吗？

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2013-01-12T10:32:09.273

启动 Activity2[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)并使用`setResult`将数据从 Activity2 发送回 Activity1 的方法。在 Activity1 中，您需要覆盖以使用 Activity2中的数据`onActivityResult`进行更新。`TextView``EditText`

例如：

在**Activity1**中，将 Activity2 启动为：

```
Intent i = new Intent(this, Activity2.class);
startActivityForResult(i, 1); 
```

在**Activity2**中，`setResult`用于发回数据：

```
Intent intent = new Intent();
intent.putExtra("editTextValue", "value_here")
setResult(RESULT_OK, intent);        
finish(); 
```

在**Activity1**中，接收数据`onActivityResult`：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 1) {
         if(resultCode == RESULT_OK) {
             String strEditText = data.getStringExtra("editTextValue");
         }     
    }
} 
```

如果可以，还可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)在活动之间共享数据。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-12T10:30:51.770

**Activity1**应该以**Activity2**开头`startActivityForResult()`。

**Activity2**应该`setResult()`用来将数据发送回**Activity1**。

在**Activity2**中，

```
@Override
public void onBackPressed() {
    String data = mEditText.getText();
    Intent intent = new Intent();
    intent.putExtra("MyData", data);
    setResult(resultcode, intent);
} 
```

在**活动**1中，

```
onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1) {
        if(resultCode == RESULT_OK) {
            String myStr=data.getStringExtra("MyData");
            mTextView.setText(myStr);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-11-05T03:19:54.897

`setResult`当我输入时，其他答案不起作用`onBackPressed`。评论对 super的`onBackPressed`调用并`finish`手动调用可以解决问题：

```
@Override
public void onBackPressed() {
    //super.onBackPressed();
    Intent i = new Intent();
    i.putExtra(EXTRA_NON_DOWNLOADED_PAGES, notDownloaded);
    setResult(RESULT_OK, i);
    finish();
} 
```

在第一个活动中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == QUEUE_MSG) {
        if (resultCode == RESULT_OK) {
            Serializable tmp = data.getSerializableExtra(MainActivity.EXTRA_NON_DOWNLOADED_PAGES);
            if (tmp != null)
                serializable = tmp;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-26T15:03:25.613

将此作为 startActivityforResult 的替代方法。但请记住，对于这种情况，这种方法在性能方面可能会很昂贵，但在某些情况下您可能需要使用。

**在活动 2 中，**

```
@Override
public void onBackPressed() {
String data = mEditText.getText();
SharedPreferences sp = getSharedPreferences("LoginInfos", 0);
Editor editor = sp.edit();
editor.putString("email",data);
editor.commit();
} 
```

**在活动 1 中，**

```
 @Override
public void onResume() {
SharedPreferences sp = getSharedPreferences("LoginInfos", 0);
String  dataFromOtherAct= sp.getString("email", "no email");
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-12T10:50:23.233

这是您的第一个 Activity1。

```
public class Activity1 extends Activity{
private int mRequestCode = 100;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent(this, Activity2.class);
    startActivityForResult(intent, mRequestCode);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode == mRequestCode && resultCode == RESULT_OK){
        String editTextString = data.getStringExtra("editText");
    }
}
} 
```

从这里你开始你的 Activity2.class 使用**startActivityForResult(mRequestCode, Activity2.class);**

现在这是您的第二个 Activity，名称为 Activity2

```
public class Activity2 extends Activity {
private EditText mEditText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //mEditText = (EditText)findViewById(R.id.edit_text);

    Intent intent = new Intent();
    intent.putExtra("editText", mEditText.getText().toString());
    setResult(RESULT_OK, intent);
}

} 
```

现在，当您完成第二个活动时，您可以从 onBackPress() 或任何按钮单击调用 setResult() 方法，当您的 Activity2 将销毁时，您的 Activity1 的回调方法**onActivityResult()**将从那里调用，您可以从意图中获取数据..

希望对你有帮助……：）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-26T10:57:23.637

从您的 FirstActivity 调用 SecondActivity 使用 startActivityForResult() 方法。

例如：

```
Intent i = new Intent(this, SecondActivity.class);
startActivityForResult(i, 1); 
```

在您的 SecondActivity 中设置您想要返回给 FirstActivity 的数据。如果您不想返回，请不要设置任何内容。

例如：在 secondActivity 如果你想发回数据：

```
Intent returnIntent = new Intent();
returnIntent.putExtra("result",result);
setResult(Activity.RESULT_OK,returnIntent);
finish(); 
```

如果您不想返回数据：

```
Intent returnIntent = new Intent();
setResult(Activity.RESULT_CANCELED, returnIntent);
finish(); 
```

现在在您的 FirstActivity 类中为 onActivityResult() 方法编写以下代码。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1) {
        if(resultCode == Activity.RESULT_OK){
            String result=data.getStringExtra("result");
        }
        if (resultCode == Activity.RESULT_CANCELED) {
            //Write your code if there's no result
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-12T10:30:42.207

阅读这些：

1.  [返回结果到 onActivityResult()](http://android-er.blogspot.in/2011/08/return-result-to-onactivityresult.html)
2.  [从被调用的活动中获取结果 - Android 初学者教程](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

这些文章将帮助您了解如何在 Android 中的两个活动之间传递数据。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-16T10:35:23.010

我有一个问题，我想在我制作的软按钮和每个 Android 设备中的默认软键中发送数据类型，所以我已经这样做了，首先我`Intent`在我的“一个” `Activity`：

```
 Intent intent = new Intent();
            intent.setClass(context, _AddNewEmployee.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            startActivityForResult(intent, 6969);
            setResult(60); 
```

然后在我的第二个活动中，我在“B”中声明了一个字段`Activity`：

```
private static int resultCode = 40; 
```

然后在我成功提出请求后或每当我想告诉“A”活动此工作已成功完成时，将 resultCode 的值更改为我在“A”`Activity`中所说的相同，在我的情况下为“60”和然后：

```
private void backToSearchActivityAndRequest() {
    Intent data = new Intent();
    data.putExtra("PhoneNumber", employeePhoneNumber);
    setResult(resultCode, data);
    finish();
}

@Override
public void onBackPressed() {
    backToSearchActivityAndRequest();
} 
```

PS：`Super`如果您希望它正常工作，请记住从 onBackPressed 方法中删除。

那么我也应该在我的“A”活动中调用该`onActivityResult`方法：

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == 6969 && resultCode == 60) {
            if (data != null) {
                    user_mobile = data.getStringExtra("PhoneNumber");
                    numberTextField.setText(user_mobile);
                    getEmployeeByNumber();
            }
        }
    } 
```

就是这样，希望对你有所帮助。#快乐编码；

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-12T10:34:17.017

TL;DR 使用[`Activity.startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

**长答案：**

您应该从阅读 Android 开发者文档开始。具体来说，您的问题主题在文档的[`Starting Activities and Getting Results`](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)部分中进行了`Activity`介绍。

至于示例代码，Android SDK 提供了很好的示例。此外，此处的其他答案为您提供了要使用的示例代码的简短片段。

但是，如果您正在寻找替代方案，请阅读[此 SO question](https://stackoverflow.com/questions/7796625/alternatives-to-startactivityforresult)。这是一个关于如何使用`startActivityForResults`片段的很好的讨论，以及在活动之间传递数据的其他方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-11T06:26:07.667

**2021年java新更新后：**

在 MainActivity 中使用 activityresultlauncher() 而不是 startactivityforresult()。

```
ActivityResultLauncher<Intent> activityResultLaunch = registerForActivityResult(
        new ActivityResultContracts.StartActivityForResult(),
        new ActivityResultCallback<ActivityResult>() {
            @Override
            public void onActivityResult(ActivityResult result) {
                if (result.getResultCode() == 123) {
                    Intent data = result.getData();
                    String myStr = data.getStringExtra("MyData");

                    if (!TextUtils.isEmpty(myStr )) {
                        myTextView.setText(myStr);
                    }

                }
            }
        }); 
```

在 onCreate() 内部：

```
myBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(MainActivity.this, Second.class);
            activityResultLaunch.launch(intent);
        }
    }); 
```

SecondActivity 内部（onCreate 外部）：

```
@Override
public void onBackPressed() {
    String data = myEditText.getText().toString();
    Intent intent = new Intent();
    intent.putExtra("MyData", data);
    setResult(123, intent);
    finish();
} 
```******

# windows-phone-8 - 单击时更新辅助磁贴

> ID：14292404
> 
> 赞同：0
> 
> 时间：2013-01-12T10:25:28.047
> 
> 标签：windows-phone-8, live-tile

如何在不导航到页面的情况下更新辅助磁贴？我希望使用辅助瓷砖即。设置 WiFi/蓝牙开/关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:50:23.110

点击磁贴将触发到相关 URI 的导航，对此您无能为力。您可以做的最好的事情是在页面加载后立即退出应用程序。

# php - 创建一个包含数据库值的列表

> ID：14292407
> 
> 赞同：0
> 
> 时间：2013-01-12T10:26:00.270
> 
> 标签：php, mysql

我正在尝试打印类似这样的列表....

> ```
> Catagory 01
>    subjects1   subjects4
>    subjects2   subjects5
>    subjects3   subjects6
> 
> Catagory 02
>    subjects1   subjects4
>    subjects2   subjects5
>    subjects3   subjects6
> 
> Catagory 03
>    subjects1   subjects4
>    subjects2   subjects5
>    subjects3   subjects6 
> ```

一类有自己的科目。目前我有类别 ID 并创建了一个查询来获取其类别名称和拥有的主题。这是我创建的查询..

```
$categoryIds = implode(',', $_SESSION['category']);

$q = "SELECT c. category_id AS ci, c.category_name AS cn, s.subject_name AS sn, s.subject_id AS si
FROM category AS c
INNER JOIN category_subjects AS cs ON cs.category_id = c.category_id
INNER JOIN subjects AS s ON s.subject_id = cs.subject_id
WHERE c.category_id IN ($categoryIds)";

$r = mysqli_query( $dbc, $q) ; 
```

上面的查询给出了每个类别和它自己的主题。它就像一个多维数组。我的问题是我试图打印这个日期类似于上面的列表......但无法让它工作..

$catID = 假；

而 ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {

```
echo '<div>';

if ( $catID != $row['ci']) {

    echo '<h3>Category 01: <span>' . $row['cn'] . '</span><span></span></h3>';
}

echo '<div class="container">';

    echo '<p>' . $row['sn']. '</p>'; // This subjects I need to display in a table with 2 columns..

$catID = $row['ci'];

    echo '</div>';

echo '</div>'; 
```

}

有人可以帮助我吗？非常感谢您的想法和意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:54:35.117

由于我没有工作环境，因此无法发布代码片段，但这里有一些提示。

您需要在 order by 子句中添加类别 ID 及其名称，以确保记录不会混乱。

1.  在循环中迭代结果。将一个临时变量（我们称之为“temp”）初始化为空白值。

2.  要打印类别名称和 ID，您可以使用临时变量 ('temp')，该变量用于将当前类别与当前正在打印的类别进行比较。一旦类别发生变化，临时变量值就会发生变化。

3.  主题可以存储在一个数组（$subject_arr）中，并在循环内类别发生变化时在最后打印。稍后在循环之外检查主题数组是否有任何内容，如果是则打印以确保没有留下任何内容。

4.  要以列格式打印主题（如果您的行是固定的并且列是动态的），您可以将主题数除以您想要的固定行数，这将为您提供列数。（如果有余数，只需 +1 列数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:58:34.163

如何首先使用定义如下的键创建一个数组

```
array("Category 1" => (
   array ( 0 => "subject1", "subject2", ...)),
      "Category 2" => (
   array ( 0 => "subject1", "subject2", ...)),
...); 
```

可以通过

```
<?php
    $r = array("0" => array("ci" => "1", "cn" => "Category1", "si" => "1", "sn" =>     "subject1"),
        array("ci" => "1", "cn" => "Category1", "si" => "2", "sn" => "subject2"),
        array("ci" => "1", "cn" => "Category1", "si" => "3", "sn" => "subject3"),
        array("ci" => "1", "cn" => "Category1", "si" => "4", "sn" => "subject4"),
        array("ci" => "2", "cn" => "Category2", "si" => "5", "sn" => "subject1"),
        array("ci" => "2", "cn" => "Category2", "si" => "6", "sn" => "subject2"),
        array("ci" => "2", "cn" => "Category2", "si" => "7", "sn" => "subject3"),
        array("ci" => "2", "cn" => "Category2", "si" => "8", "sn" => "subject4"));
        //[...]

    $arr = array();

    foreach($r as $entry) {
        $cat = $entry["cn"];
        if (!array_key_exists($cat, $arr)) {
            $arr[$cat] = array();
        }
        array_push($arr[$cat], $entry);
    }

    foreach($arr as $key => $value) {
        echo $key."<br>";
        foreach($value as $infos) {
            echo "- ".$infos["sn"]."<br>";  
        }
        echo "<br>...";
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:58:58.267

一种简单的方法是创建一个主题数组，按类别分组。使用您的 category_id 作为分组的键：

```
$subjects = array();
foreach($r as $subject) {
    if(!isset($subjects[$subject['ci']]) $subjects[$subject['ci']] = array();
    $subjects[$subject['ci']] []= $subject;
}

foreach($subjects as $category => $values) {
    echo $category."\n";
    foreach($values as $subject)
        echo '  '.$subject."\n";
} 
```

如果您真的需要这 2 列演示文稿，您可以拆分数组（例如使用 array_slice）并在每次迭代时输出每个值之一。

# c++ - 带有 C++ 的 Objective-c 中的类与框架

> ID：14292409
> 
> 赞同：0
> 
> 时间：2013-01-12T10:26:07.487
> 
> 标签：c++, objective-c, frameworks

我想用 C++ 创建一些库，这些库将能够模拟物理现象。我想构建一个跨平台环境，这些库独立于 GUI 进行更新，在我的情况下，PC 应用程序和 iOS 应用程序将是此类库的客户端。

在性能、易于插入 C++ 代码等方面，您有什么建议？生成一个 C++ 类并从其他扩展名为 .mm 的类调用它们，或者在 C++ 中生成一个框架。

您会推荐与 C++ 不同的东西以实现跨平台兼容性吗？

注意：我不是一个经验丰富的程序员，但我正在努力达到一个不错的水平。

谢谢，亚历杭德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:36:13.983

> 在性能、易于插入 C++ 代码等方面，您有什么建议？生成一个 C++ 类并从其他扩展名为 .mm 的类调用它们，或者在 C++ 中生成一个框架。

这取决于您要支持的平台，但 C++ 得到了很好的支持，所以我认为应该没有问题。C++ 也是相当低级的，因此它将为您提供所需的所有性能。

但是，当谈到框架的概念时，您应该小心。通常，框架会为您提供一组类，您可以通过多种方式重用它们。一种，可能最重要的方法是子类化（即，您子类化并指定一个缺失的方法，或者专门化一个泛型方法）。您不能真正做到这一点，例如：从 C++ 类派生的 Objective-C 类——这是不可能的（除非您定义某种包装器或桥接器）。

因此，您将拥有您的 C++ 框架，您可以使用 C++ 进行*扩展*，并*使用*其他语言，例如 Objective C。

> 您会推荐与 C++ 不同的东西以实现跨平台兼容性吗？

同样，如上所述，但 C++ 优于其他选项（Java，例如，iOS 不支持，MacOS 支持越来越少，使用 ObjC 的主要平台）。可能只有 C 可以为您提供更广泛的可移植性。

# mysql - 如何在 MySQL 服务器 5.5 的列中插入字符和整数值？

> ID：14292412
> 
> 赞同：1
> 
> 时间：2013-01-12T10:26:58.650
> 
> 标签：mysql, sql

我想根据条件在同一列中插入整数和字符值但我不知道我需要使用哪种数据类型....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:30:05.037

您需要使用的数据类型是`VARCHAR`因为您仍然可以在该列上插入整数的字符串表示形式。但是如果您选择使用`INT`，则不能在其上插入字符串。

```
CREATE TABLE tableName
(
    columnName VARCHAR(10)
);

INSERT INTO tableName VALUES ('a'); -- OK
INSERT INTO tableName VALUES ('1'); -- OK 
```

这两个查询都将插入到表中。

在你使用的情况下`INT`

```
CREATE TABLE tableName
(
    columnName INT
);

INSERT INTO tableName VALUES (1); -- OK
INSERT INTO tableName VALUES ('a'); -- FAILED 
```

趋势是你不能存储字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:34:31.043

您可以根据要求使用任何字符串数据类型

```
( char, varchar ) 
```

但不要忘记将它们括在单引号中

```
INSERT INTO tableName VALUES ('1One'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T10:36:43.577

如果你使用varchar，所有这些都会产生你想要的效果：

```
INSERT INTO atul (c1) values ('a');
INSERT INTO atul (c1) values ('1');
INSERT INTO atul (c1) values (1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-03T10:18:04.597

您可以使用该`varchar`字段的类型。

例如：

```
create table volt_meter(
    voltage varchar(5);
)

INSERT into volt_meter values('11kv'); 
```

# ios - 有没有办法在 iOS 中获取图像文件的元数据？

> ID：14292413
> 
> 赞同：2
> 
> 时间：2013-01-12T10:27:08.527
> 
> 标签：ios, objective-c, image, uiimage, metadata

> **可能重复：**
> [访问 UIImagePickerController 获取的图像的元数据（exif 标签） - iOS/iPhone](https://stackoverflow.com/questions/3991673/access-metadata-exif-tags-of-image-taken-by-uiimagepickercontroller-ios-ipho)
> [如何在 ios 中获取图像元数据](https://stackoverflow.com/questions/12478502/how-to-get-image-metadata-in-ios)

我在 iOS 应用程序本地文件夹中有一些图像文件。我怎样才能得到它的元数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T10:53:55.190

您可以使用[QA1654](https://developer.apple.com/library/ios/#qa/qa1654/_index.html)中解释的 ImageIO 框架：

> 要访问图像属性，您：
> 
> 1.  为您的图像创建一个 CGImageSourceRef。
> 2.  通过调用 CGImageSourceCopyPropertiesAtIndex 获取图像属性字典的副本。
> 3.  通过使用您感兴趣的属性键调用 CFDictionaryGetValue 来访问字典中的值。可用键位于 CGImageProperties 参考中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:53:32.127

`ImageIO`您可以使用框架 获取其元数据。[http://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/ImageIOGuide/imageio_intro/ikpg_intro.html](http://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/ImageIOGuide/imageio_intro/ikpg_intro.html)

# javascript - Knockoutjs：observablearray 替换不更新 html 模板

> ID：14292414
> 
> 赞同：0
> 
> 时间：2013-01-12T10:27:19.557
> 
> 标签：javascript, python, django, knockout.js

我将参数传递给视图脚本

```
var commentModel =  function(config) {
    var self = this;
    self.comments = ko.observableArray(ko.utils.parseJson(config.comments));
... 
```

我需要控制评论的可见性。有一个可见参数，当你改变可见性时它会改变。我首先通过 push 和 remove 实现

```
 self.CommentVisible = function(id,visible){
        temp = self.comments.remove(function(item) { return item.id == id }) ; 
        temp[0].show_folded = visible;
        self.comments.push(temp[0]);  
        self.sortByPath();
        return false;
    } 
```

现在我尝试使用replace 重写。它替换的元素，但它不更新模板。建议我该怎么做？

# r - 如何将大数据导出到 Excel

> ID：14292417
> 
> 赞同：2
> 
> 时间：2013-01-12T10:27:42.167
> 
> 标签：r, excel

我正在使用`sink()`将 R 输出打印到 excel/文本文件的功能。我的程序输出太大。我在 Excel/文本输出文件的末尾发现了一条消息

```
[ reached getOption("max.print") -- omitted 5326 rows ] 
```

我还有不止一个大的输出要打印。我还希望它们在一个 excel 文件的单独（不同）表上。

实际上，输出是矩阵形式的，随着循环值的增加，方阵的行和列也会增加。由于行数和列数不同，该功能`append`不起作用。为了避免这个错误，我使用了`if`条件并分别处理`rbind`类似的矩阵。但是通过双循环有超过5000次迭代（并且该方法也重复），因此不可能编写1000个`if`and`rbind`条件并将它们保存到单独的工作表和文件中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T10:51:21.160

如果你不想要一个`csv`你可以使用包`xlsx`，它很容易保存多张纸，例如

```
df1 <- data.frame(x=1:100, y=1:100)   # make data
df2 <- data.frame(x=1:1000, y=1:1000) 

library(xlsx)

wb <- createWorkbook()         # create blank workbook
sheet1 <- createSheet(wb, sheetName="mysheet1") # create different sheets
sheet2 <- createSheet(wb, sheetName="mysheet2")
addDataFrame(df1, sheet1)  # add data to the sheets
addDataFrame(df2, sheet2)
saveWorkbook(wb, "mysheets.xlsx")  # write the file with multiple sheets 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T10:30:36.560

您可以将数据框写入 csv 文件，然后使用`write.csv`（阅读其文档使用`?write.csv`）在 excel 中打开它：

```
## To write a CSV file for input to Excel one might use
x <- data.frame(a = I("a \" quote"), b = pi)
write.table(x, file = "foo.csv", sep = ",", col.names = NA,
            qmethod = "double") 
```

# c++ - 具有多态模板参数的多态模板类

> ID：14292427
> 
> 赞同：2
> 
> 时间：2013-01-12T10:29:06.643
> 
> 标签：c++, templates, inheritance, polymorphism, idioms

在一个简单化的设计中，B 类多态地继承了 A 类。一个模板类，`Base<T>`有一个`T*`用于进一步操作的成员。A`Derived<T>`从多态继承`Base<T>`。允许创建这种对象的语法是什么：

```
Base<A>* a = new Derived<B>(); 
```

为了进一步参考，我使用的代码是这样的（当然转换不成功）：

```
class A
{
public:
  A()
  {
    cout<< " A  ";
  }
  virtual void one()
  {
    cout<<" 1 ";
  }

};

class B: public A
{
public:
  B()
  {
    cout << " B  ";
  }
  void one()

  {
      cout << " 2 ";
  }
};

template <class T>
class Base
{

public:
    T* thing;
  Base()
  {
    cout<<"Base";
    thing = new T;
  }
  template <class S>
  Base(Base<S>* obj)
  {
    thing = obj->thing;
  }
  virtual void poly(){ thing->one();}
};
template <class T>
class Derived : public Base<T>
{
public:
  Derived()
  {
    cout << "DERIVED ";
  }
  virtual void poly(){ 
};
int main(int argc, char** argv)
{
  //Base<A>* a = (new Derived<B>());
  return 0;
} 
```

为了代码简洁，故意省略了虚拟析构函数和适当的内存管理。

*编辑*：这种构造的唯一目的是将`BaseTemplated<BasePolymorphic>*`指针列表保持在一起，而不是`BaseTemplated<Derived1>`用于`BaseTemplated<DerivedN>`基础多态类的所有 N 个子类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:44:23.593

首先，告诉我什么时候进入“简单化”的部分。

剥离所有一半的模板，只专注于您尝试变形的部分）。最终你有不同的类`Base<A>`和`Base<B>`. （后者通过 的推导`Derived<B>`）。

这些都不是从它们各自的模板参数*继承的。*`A`因此to的关系（分层或其他）`B`是无关紧要的。`Base<A>`并且`Base<B>`是不同的且不相关的，因此您尝试按原样执行的操作是行不通的。事实上，即使*确实*`A`分别从 a和继承`B`，您所希望的最好的结果是一个`A*`指针，您没有在您的示例中使用它。

如果不是这样，我*很乐意*删除它，因为我真的很好奇。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T10:49:30.940

一袋苹果`Base<B>`不是一袋水果`Base<A>`，因为你可以在一袋水果中放一个桃子、一个樱桃和一个梨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:07:33.597

这不适用于指针。的结果`new Derived<B>`不能分配给`Base<A>*`，实际上它甚至不能分配给，`Derived<A>*`因为所有这些类型都是不相关的。你真的需要模板包装器之间的这种关系吗？`Base<B>`保证and的值的可转换性还不够吗`Base<A>`（就像标准智能指针所做的那样）？您已经使用模板化转换构造函数获得了它...

```
//...
Base<B> tB(new B);
Base<A> tA = tB;
//... 
```

# java - 将字符串传递给字符串数组引用

> ID：14292434
> 
> 赞同：1
> 
> 时间：2013-01-12T10:30:01.453
> 
> 标签：java, object, nullpointerexception

我对下面的代码有些困惑：

```
class BooksTestDrive {
  public static void main(String [] args) {
      String [] islands = new String[4];

      islands[0] = "Bermuda";
      islands[1] = "Fiji";
      islands[2] = "Azores";
      islands[3] = "Cozumel";

  }
} 
```

我假设这会返回`NullPointerException`错误，因为没有初始化任何对象。

我以为我需要做

```
class BooksTestDrive {
  public static void main(String [] args) {
      String [] islands = new String[4];
      islands[0] = new String();

//    etc..

      islands[0] = "Bermuda";
      islands[1] = "Fiji";
      islands[2] = "Azores";
      islands[3] = "Cozumel";

  }
} 
```

为什么这里没问题？为什么没有抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:32:27.417

*"Bermuda"*是一个字符串字面量，`String str = "Bermuda";`暗示它`str`是一个新的字符串对象，其值为*"Bermuda"*。

```
String str = "Bermuda";
String str = new String("Bermuda"); 
```

上面的行做同样的工作，但有一个区别，第一个字符串实例由管理，`Java String constant pool`第二个不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:32:52.263

`Exception`不会抛出，因为您使用的是“静态”字符串，其内存是隐式创建的，并且引用分配给`islands[i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:36:33.297

你没有做错任何事，编译器尊重这一点并且它也在运行。

当您使用静态字符串文字时，字符串对象是隐式创建的。你也可以用调试器试试这个，你的字符串“百慕大”有一个对象ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T10:52:38.137

当您声明变量但未创建对象时，会发生您询问的异常。在“String [] island = new String[4]; ”行中，new 关键字用于实例化（或创建）一个 Integer 类型的对象，并将指针变量 island 分配给该对象。所以你不会得到例外。

# macos - 如何在python中读取名称中包含“/”等字符的目录？

> ID：14292440
> 
> 赞同：4
> 
> 时间：2013-01-12T10:30:47.703
> 
> 标签：macos, python-2.7, wxpython, special-characters

我正在开发 OSX 10.5.8，它甚至允许文件名字符上出现“/”。

我有一个 wx.TextCtrl 包含一个要读取的目录（音乐艺术家目录），有这样的乐队叫

*   //紧张//
*   ///▲▲▲\\

所以在文本字段中我写下一个目录名称，这样写

```
/Users/....../Music/iTunes/iTunes Music////▲▲▲\\\/Untitled/ 
```

当然我在阅读时会出错，因为程序无法识别乐队的名称和斜线，我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:39:19.017

尝试将`/`文件名（不是目录名）中的字符替换为`:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T14:08:20.413

我建议使用 wxPython 的内置小部件，例如[wx.FileDialog](http://wxpython.org/Phoenix/docs/html/FileDialog.html)或[filebrowsebutton](http://wxpython.org/Phoenix/docs/html/lib.filebrowsebutton.FileBrowseButton.html)

这是一个允许您选择多个文件的简单示例：

```
def onOpenFile(self, event):
    """
    Create and show the Open FileDialog
    """
    dlg = wx.FileDialog(
        self, message="Choose a file",
        defaultDir=self.currentDirectory, 
        defaultFile="",
        wildcard=wildcard,
        style=wx.OPEN | wx.MULTIPLE | wx.CHANGE_DIR
        )
    if dlg.ShowModal() == wx.ID_OK:
        paths = dlg.GetPaths()
        print "You chose the following file(s):"
        for path in paths:
            print path
    dlg.Destroy() 
```

我建议下载 wxPython 演示以查看它的这个小部件的示例以及我提到的另一个示例。

# javascript - 该脚本适用于firefox和chrome，但不适用于ie，jquery undefined

> ID：14292445
> 
> 赞同：0
> 
> 时间：2013-01-12T10:31:27.843
> 
> 标签：javascript, jquery, html, web

我的 Javascript 有问题，该脚本在 firefox 和 chrome 上运行良好，但在 IE 中无法运行（但在我的本地系统中的 IE 中运行，当我将其上传到服务器时出现问题）

我从 IE 'jQuery Undefined' 收到一条错误消息，任何人都可以帮忙，这是我的代码：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <link rel="stylesheet" type="text/css" media="screen" href="style_custom.php">
 <link rel="stylesheet" type="text/css" media="screen" href="style.css">
<link rel="shortcut icon" href="favicon.ico" >
<link rel="stylesheet" type="text/css" media="screen" href="menu/css/simple_menu.css">

<link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/nivo-slider.css" type="text/css" media="screen"/>
<link rel="stylesheet" type="text/css" href="boxes/css/style5.css" />

 <!-- Google fonts -->
  <link href='http://fonts.googleapis.com/css?   family=Open+Sans+Condensed:300|Playfair+Display:400italic' rel='stylesheet' type='text/css'  />
<link href='http://fonts.googleapis.com/css?family=Terminal+Dosis' rel='stylesheet'   type='text/css' />
<!--JS FILES STARTS-->
<script type="text/javascript" src="js/jquery.min.js"></script>
 <script type="text/javascript" src="js/jquery.eislideshow.js"></script>

  <script type="text/javascript" src="js/custom.js"></script>
         <script>
        jQuery.noConflict()(function($){
            $('#ei-slider').eislideshow({
                                    animation                       : 'center',
                                    autoplay                        : true,
                                    slideshow_interval      : 3000,
                                    titlesFactor            : 0
            });
        });
    </script>
 <script type="text/javascript" src="js/slides/slides.min.jquery.js"></script>
<script type="text/javascript" src="js/cycle-slider/cycle.js"></script>
<script type="text/javascript" src="js/nivo-slider/jquery.nivo.slider.js"></script>
 <script type="text/javascript" src="js/tabify/jquery.tabify.js"></script>
 <script type="text/javascript" src="js/prettyPhoto/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="js/twitter/jquery.tweet.js"></script>
 <script type="text/javascript" src="js/scrolltop/scrolltopcontrol.js"></script>
  <script type="text/javascript" src="js/portfolio/filterable.js"></script>
 <script type="text/javascript" src="js/modernizr/modernizr-2.0.3.js"></script>
<script type="text/javascript" src="js/easing/jquery.easing.1.3.js"></script>
 <script type="text/javascript" src="js/kwicks/jquery.kwicks-1.5.1.pack.js"></script>
 <script type="text/javascript" src="js/swfobject/swfobject.js"></script>
 <!-- get fancybox -->
 <link rel="stylesheet" type="text/css" itemprop="javascript"       href="js/fancybox/jquery.fancybox.css" media="all">
 <script type="text/javascript" src="js/fancybox/jquery.easing.1.3.js"></script>
 <script type="text/javascript" src="js/fancybox/jquery.fancybox-1.2.1.js"></script>
 </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:45:17.010

问题可能出在 .js 文件的 HTTP 标头中，因此请使用例如[http://www.rexswain.com/httpview.html](http://www.rexswain.com/httpview.html)检查它们，如果存在问题，请修复服务器设置。另一个可能的原因是 .js 文件在上传时发生了问题，但这不太可能。

如果这没有帮助，请发布页面的 URL。

# java - java代码从大文件中提取文本部分，仅使用最小RAM

> ID：14292448
> 
> 赞同：0
> 
> 时间：2013-01-12T10:31:50.530
> 
> 标签：java, file, text, file-io

我有巨大的文本文件——每个文件有 10 GB 大。

现在，我有两根弦`"StringNumber1"`和`"StringNumber2"`

“Stringnumber1”在每个文本文件中只出现一次，并且`"StringNumber2"`总是在之后`"StringNumber1"`（尽管在文本文件中可能出现超过 1 次`"StringNumber2"`）。

我想提取每个文件中出现的所有文本，从“StringNumber1”的匹配开始，直到匹配“StringNumber1”`"StringNumber2"`之后立即出现的那个出现（这些出现之间的内容`"StringNumber1"`和`"StringNumber2"`可能是几个字节到许多千兆字节)...

如何使用最少的 RAM 提取此类内容？我想在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:34:51.780

要最大限度地减少 RAM 使用，请将数据复制到另一个文件。当你看到第一个字符串时开始一个新文件，当你看到第二个字符串时停止。这意味着您的堆使用量很小（几 MB）且恒定（无论复制的数据量如何）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:45:30.533

只是使用`BufferedReader`还不够好吗？好吧，我从来没有遇到过读取非常大的文件的问题。使用此方法时，您是否遇到某种错误？

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class Read {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader("someFile"));
        try {
            String line = br.readLine();
            while (line != null) {
                if(line.contains("String 1")) {
                    // ...
                } else if (line.contains("String 2")) {
                    // ...
                }               
                line = br.readLine();
            }       
        } finally {
            br.close();
        }
    }
} 
```

# php - 在控制器代码点火器的同一功能内加载多个模型

> ID：14292452
> 
> 赞同：1
> 
> 时间：2013-01-12T10:32:15.357
> 
> 标签：php, ajax, codeigniter

我有一个页面，我想显示动态的两个选择框。一个选择框从一个模型中获取数据，然后另一个选择框从另一个模型中获取。然后在获取数据后，它将保存它们的查询或结果，然后查看进入一个视图页面。

我想将数据保存在两个查询的数组中，这是我的控制器：

```
 function index(){

    $data['main_content'] = 'stockInView';

    $this->load->model('itemsModel');
    $query2 = $this->itemsModel->getAllItems();
    if ($query2)
    {
        $data['records'] = $query2;

    }

    $this->load->model('categoryModel');
    $query = $this->categoryModel->getAllCategories();
    if ($query)
    {
        $data['records'] = $query;

    }

    $this->load->view('dashboardTemplate/template',$data); 
    } 
```

然后我在 foreach 循环中显示它们。但它只能显示第二个查询结果，或者在这种情况下只显示一个选择框中的类别而不是其他选择框中的项目。我是第一次这样做，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:03:18.850

`$data['records'] = $query2;`在使用类别模型时将行更改为不同的`$data`数组元素键，如下所示：

```
$this->load->model('itemsModel');
$query2 = $this->itemsModel->getAllItems();
if ($query2)
{
    $data['itemRecords'] = $query2;
}

$this->load->model('categoryModel');
$query = $this->categoryModel->getAllCategories();
if ($query)
{
    $data['categoryRecords'] = $query;
}

$this->load->view('dashboardTemplate/template',$data); 
```

然后在您的视图中，您使用`$itemRecords`和`$categoryRecords`数组将它们输出到它们的选择框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:47:49.493

您正在写 $data['records'] = $query2; 的值。$data['records'] = $query; 所以最后你只会得到第二个价值。您应该使用不同的数组字段，例如 $data['records2'] = $query2; $data['records'] = $query2;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:38:39.613

您有两个模型，即**itemsModel**和**categoryModel**。如果您在构造函数中加载这两个模型，那么这两个模型都将在此控制器中加载。所以你可以在 Construct 函数中加载这两个模型。看看下面的代码......

```
public function __construct() {
    parent::__construct();
    $this->load->model('itemsModel');
    $this->load->model('categoryModel');
}

public function index() {

    $data['main_content'] = 'stockInView';

    $query2 = $this->itemsModel->getAllItems();
    if ($query2) {
        $data['itemRecords'] = $query2;
    }

    $query = $this->categoryModel->getAllCategories();
    if ($query) {
        $data['categoryRecords'] = $query;
    }

    $this->load->view('dashboardTemplate/template', $data);
} 
```

# java - 将时间戳与实际时间进行比较（Java）

> ID：14292463
> 
> 赞同：2
> 
> 时间：2013-01-12T10:34:50.540
> 
> 标签：java, date, timestamp

我有一个时间`Timestamp`格式，是一个产品的过期时间，我必须检查这个产品是否过期。我能怎么做？

我尝试过这种方式，但实际上该函数总是返回 TRUE（我不知道为什么）

```
public boolean isAuctionExpired() {

    // expiration_time is setted before, is the expiration date of a product!

    Timestamp actualTimeStampDate = null;

    try {
        Date actual = new Date();
        actualTimeStampDate = new Timestamp(actual.getTime());
    } catch (Exception e) {
        System.out.println("Exception :" + e);
    }

    boolean expired = (expiration_time.getTime() < actualTimeStampDate.getTime());

    // Everything seems ok, except the boolean
    System.out.println("product exp: "+expiration_time+", actual: "+actualTimeStampDate+" expired? "+expired);

    return expired;
} 
```

我想我犯了一个愚蠢的错误，但我看不到它！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T10:43:51.923

你只需要

```
return expiration_time.before(new Date()); 
```

因为`Timestamp`是`Date`

如果它不起作用，那么值有问题`expiration_time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:49:59.753

只需使用以下代码：

```
public boolean isAuctionExpired() {
    return expiration_time.getTime() <= System.currentTimeMillis();
} 
```

# c# - 如何在运行时创建可变维度数组？

> ID：14292466
> 
> 赞同：2
> 
> 时间：2013-01-12T10:35:09.447
> 
> 标签：c#, .net, arrays, reflection, multidimensional-array

我想在运行时创建可变长度多维数组。

**输入**-> 具有每个维度长度的数组。维数 = 输入数组的长度。
**输出**-> 可变维度数组。

示例：
输入 ->`var lengths = new [] {3,4,5}`
预期输出 ->`var arr = new string[3,4,5]`

如何在没有反射和反射的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:54:35.637

System.Array 类中有这个方法：

```
public static Array CreateInstance(
Type elementType,
int[] lengths    
) 
```

有关和的讨论，请参阅[此问题](https://stackoverflow.com/q/7202515/60761)`GetLength()``GetUpperBound()`

但请注意，因为您在编译时不知道维度，所以您不能使用熟悉的`a[i,j,k]`语法。所有访问看起来像 `int[] indices = ...; object x = a.GetValue(indices);`

# entity-framework - 关于实体框架功能的问题

> ID：14292467
> 
> 赞同：0
> 
> 时间：2013-01-12T10:35:11.617
> 
> 标签：entity-framework, entity-framework-5

多年来，我一直在 ASP.Net 环境中使用 LINQ to SQL。UI 和 BLL 层由 Web 服务分隔，因此延迟加载、更改跟踪等不是一个选项。这在某种程度上很好，因为我们确切地知道代码中发生了什么——我们负责在 BLL 中持久更改（确定实体是否是新的/更新的），并且由于一些懒惰而没有意外的惊喜——加载在某处进行。

我现在已经转移工作并使用新的桌面系统 (WPF)。没有边界，即*UI 层将直接调用 BLL*（但请参阅最后的警告）。我正在寻找使用 EF5，但我对 EF 提供的功能、选项等的数量有点不知所措。我希望我能回答几个问题...

1.  是否应该跨边界使用延迟加载？假设我想显示一个客户和他们的所有订单，UI 是否会只从 BLL 请求客户，然后使用延迟加载来访问其订单？在 UI 中执行此操作对我来说并不合适。我假设延迟加载只是您将在 BLL 中使用的东西。

2.  我相信您可以使用 关闭延迟加载`DbContext.Configuration.LazyLoadingEnabled`，但是如果我想在我的 BLL 中使用延迟加载，但是当我将实体返回到我的 UI 时，我不希望 UI 进行任何延迟加载怎么办？

3.  变更跟踪、自我跟踪实体和 POCO 怎么样？我应该在什么时候使用？当我使用 LINQ to SQL 时，这对我来说从来都不是问题（它跨越 Web 服务和 ASP.Net，因此没有“状态”，因此更改跟踪无关紧要）。我觉得我想全部停用它（这是我习惯的），但我担心我会错过一些 EF 的“优点”。我想我担心无法控制持久数据。

4.  当我一直在使用 EF 进行操作和检索数据时，我注意到在一些实体层次结构中，一些属性集合（例如 customer.Orders）包含“代理”实体。这些是什么，它们什么时候有用？

5.  我再次注意到您可以通过 关闭代理`DbContext.Configuration.ProxyCreationEnabled`，但文档表明它还有更多功能，并且与 LazyLoadingEnabled 设置有某种关系？

6.  EF“代码优先”似乎越来越受欢迎。它给了你什么？我习惯于在 SSMS 中设计我的数据库，而不是编写大量的类、注释等！

最后一个警告 - 虽然应用程序的 UI 层直接调用 BLL 中的方法，但将来我们可能希望将它们分开（例如通过 Web 服务）的可能性*很小。*这将如何影响设计考虑，以及我在上面提出的一些问题？

很抱歉将许多问题捆绑在一起。如果我能得到所有这些问题的答案，那么希望这对我将来遇到的其他人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:32:40.093

1.  在我看来，延迟加载旨在用于 UI 层而不是 BLL。它在数据绑定场景中特别有用，例如在主从视图中。如果您的 UI 中有客户列表，并且通过单击客户，用户可以显示客户的订单，这些订单可以通过延迟加载来加载。由于您事先不知道用户将点击哪些客户，因此如果您不想使用延迟加载（或实施您自己的事件驱动的子加载机制），您将被迫预先加载所有客户的所有订单）。这会产生不必要的开销。

    另一方面，我不明白为什么 BLL 中的延迟加载会很有趣。通常，您知道必须加载哪些数据才能执行特定的业务逻辑。当您知道它时，您可以使用急切或显式加载。与仅访问导航属性并依赖延迟加载相比，要编写一两行代码，但是通过急切和显式加载，您的代码做什么以及何时访问数据库是很清楚的。

    当然请记住，延迟加载需要一个尚未释放的上下文，因此您必须以一种只要您的 UI（或 UI 的一部分）被使用，上下文就存在的方式来设计 BLL。

2.  如果您不想在 UI 层中进行延迟加载，请将其关闭并在 BLL 中使用急切和显式加载。一旦加载了启用延迟加载的实体，就无法关闭延迟加载。

3.  自跟踪实体已被弃用，或者至少[EF 团队建议不再](http://msdn.microsoft.com/en-us/data/jj613924)在新项目中使用它们（第二个参考：http: [//msdn.microsoft.com/en-us/data/jj613668](http://msdn.microsoft.com/en-us/data/jj613668)）。他们还建议[不再使用`EntityObject`派生实体](http://msdn.microsoft.com/en-US/data/JJ613116)。因此，POCO 绝对是要走的路。

    更改跟踪本身是 EF 的核心功能，也可用于两种不同形式的 POCO：作为“基于快照”的更改跟踪和更改跟踪代理。默认是基于快照的更改跟踪。更改跟踪代理可用于在某些情况下提高性能 - 特别是当涉及数千个实体并需要在单个上下文中更新时。有关更改跟踪代理的更多信息在这里：[http ://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)

4.  如果启用延迟加载或动态更改跟踪，EF 会从 POCO 实体创建代理。它们是从您的实体类派生的动态对象，需要使延迟加载和动态更改跟踪（= 不基于快照）成为可能。

5.  设置`ProxyCreationEnabled`为`false`禁用任何代理创建 - 用于动态更改跟踪和延迟加载。如果代理创建关闭，则设置`LazyLoadingEnabled`不再重要。更多细节在这里：[https ://stackoverflow.com/a/7112470/270591](https://stackoverflow.com/a/7112470/270591)

6.  如果您对数据库优先方法感到更自在，请使用它。它同样受到代码优先或模型优先的支持，并且 - 作为基于 EDMX 的方法 - 甚至具有代码优先所没有的一些更高级的功能。关于不同策略的更多细节在这里：[https ://stackoverflow.com/a/5446587/270591](https://stackoverflow.com/a/5446587/270591)

> ...尽管应用程序的 UI 层直接调用 BLL 中的方法，但将来我们可能希望将它们分开（例如通过 Web 服务）的可能性很小。这将如何影响设计考虑，以及我在上面提出的一些问题？

您将无法再在 UI 层中使用延迟加载，因为您无法通过 Web 服务边界传递上下文实例。延迟加载将变得毫无用处，就像在 UI 是（断开连接的）远程浏览器的 Web 应用程序中一样。您还将失去更改跟踪附加实体的舒适性。为断开连接的实体和对象图构建更改集比利用连接实体的更改跟踪更困难。所以，这个“小机会”很可能会对整个应用设计产生深远的影响。

# django - 使用二进制列类型的 UUID 的 Django 自定义字段

> ID：14292472
> 
> 赞同：0
> 
> 时间：2013-01-12T10:35:29.990
> 
> 标签：django, mongodb, field, uuid

任何使用二进制列类型的自定义 UUID 字段的 django 插件？（我发现一些使用 char 类型在我的项目场景中可能会占用太多空间。）

或者更详细一点，我需要一个 Django 中二进制列类型的自定义字段示例，我可以参考它在 Mysql 等传统数据库中创建 MongoDB ObjectId 字段...

感谢您提供任何信息。

# wordpress - 使用 Wordpress 3.5 小部件清漆 ESI

> ID：14292474
> 
> 赞同：0
> 
> 时间：2013-01-12T10:35:36.573
> 
> 标签：wordpress, nginx, widget, varnish, esi

我正在尝试使用 Varnish ESI 语句来避免单个 Wordpress 小部件上的缓存。

我在这里找到了一个很好的指南，解释了对整个侧边栏使用 ESI 的过程：http: [//timbroder.com/2012/12/getting-started-with-varnish-edge-side-includes-and-wordpress.html](http://timbroder.com/2012/12/getting-started-with-varnish-edge-side-includes-and-wordpress.html)但很难弄清楚它是如何为单个小部件完成的。

其他详情：

*   **网站网址：** livefeeedietravelling (dot com)
*   **清漆：** 3.0.3 Wordpress
*   **版本：** 3.5
*   **服务器：** nginx/1.2.6（带APC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:28:13.103

通过包含一个文本小部件解决了该问题，该小部件具有链接到外部 php 脚本的 ESI 代码，该脚本包含我想要提供的小部件内容的输出。真的很简单。

# jquery - 如何使用 jQuery 和“Long Polling”通过 Indy HTTP 服务器动态更新 HTML 页面？

> ID：14292475
> 
> 赞同：7
> 
> 时间：2013-01-12T10:35:38.427
> 
> 标签：jquery, ajax, delphi, indy, long-polling

我已阅读文章[Simple Long Polling Example with JavaScript and jQuery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)。“长轮询 - 一种高效的服务器推送技术”段落解释说

> 长轮询技术将最佳情况的传统轮询与持久的远程服务器连接相结合。长期轮询本身是长期持有的 HTTP 请求的缩写。

如何实现使用长轮询的基于 Indy 的 HTTP 服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T10:38:10.123

这是一个独立的示例项目，使用 Indy 版本 10.5.9 和 Delphi 2009 进行了测试。

当应用程序运行时，导航到`http://127.0.0.1:8080/`。然后服务器将提供一个 HTML 文档（在 OnCommandGet 处理程序中硬编码）。

该文档包含一个 div 元素，该元素将用作新数据的容器：

```
<body>
  <div>Server time is: <div class="time"></div></div>'
</body> 
```

然后，JavaScript 代码`/getdata`循环向资源发送请求（函数`poll()`）。

服务器以包含`<div>`当前服务器时间的新元素的 HTML 片段进行响应。JavaScript 代码然后用新元素替换旧`<div>`元素。

为了模拟服务器工作，该方法在返回数据之前等待一秒钟。

```
program IndyLongPollingDemo;

{$APPTYPE CONSOLE}

uses
  IdHTTPServer, IdCustomHTTPServer, IdContext, IdSocketHandle, IdGlobal,
  SysUtils, Classes;

type
  TMyServer = class(TIdHTTPServer)
  public
    procedure InitComponent; override;
    procedure DoCommandGet(AContext: TIdContext;
      ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo); override;
  end;

procedure Demo;
var
  Server: TMyServer;
begin
  Server := TMyServer.Create(nil);
  try
    try
      Server.Active := True;
    except
      on E: Exception do
      begin
        WriteLn(E.ClassName + ' ' + E.Message);
      end;
    end;
    WriteLn('Hit any key to terminate.');
    ReadLn;
  finally
    Server.Free;
  end;
end;

procedure TMyServer.InitComponent;
var
  Binding: TIdSocketHandle;
begin
  inherited;

  Bindings.Clear;
  Binding := Bindings.Add;
  Binding.IP := '127.0.0.1';
  Binding.Port := 8080;

  KeepAlive := True;
end;

procedure TMyServer.DoCommandGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
begin
  AResponseInfo.ContentType := 'text/html';
  AResponseInfo.CharSet := 'UTF-8';

  if ARequestInfo.Document = '/' then
  begin
    AResponseInfo.ContentText :=
      '<html>' + #13#10
      + '<head>' + #13#10
      + '<title>Long Poll Example</title>' + #13#10
      + '  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"> ' +
        #13#10
      + '  </script> ' + #13#10
      + '  <script type="text/javascript" charset="utf-8"> ' + #13#10
      + '  $(document).ready(function(){ ' + #13#10
      + '  (function poll(){' + #13#10
      + '  $.ajax({ url: "getdata", success: function(data){' + #13#10
      + '      $("div.time").replaceWith(data);' + #13#10
      + '  }, dataType: "html", complete: poll, timeout: 30000 });' + #13#10
      + '  })();' + #13#10
      + '  });' + #13#10
      + '  </script>' + #13#10
      + '</head>' + #13#10
      + '<body> ' + #13#10
      + '  <div>Server time is: <div class="time"></div></div>' + #13#10
      + '</body>' + #13#10
      + '</html>' + #13#10;
  end
  else
  begin
    Sleep(1000);
    AResponseInfo.ContentText := '<div class="time">'+DateTimeToStr(Now)+'</div>';
  end;
end;

begin
  Demo;
end. 
```

# ruby-on-rails - 在 Rails 上持续的第三方 API 监控和测试

> ID：14292486
> 
> 赞同：14
> 
> 时间：2013-01-12T10:37:18.163
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, bdd

我们希望设置自动化作业（通过`Jenkins`）以在第三方 API 已关闭或他们部署了不兼容的 API 时发出警报。

我说的是针对真实`HTTP APIs`而不是模拟进行测试，但是由于我们已经使用 编写了模拟`rspec`，我不确定我们是否应该通过编写两个独立的测试来重复这项工作。

以前有人有过这种经验吗？（我不限于`Ruby/Rspec`其他工具是否可以提供帮助）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T12:15:42.877

你看过[录像机](https://github.com/vcr/vcr)吗？使用它，您可以“记录测试套件的 HTTP 交互并在未来的测试运行期间重放它们，以实现快速、确定、准确的测试”。在测试来自外部 API 的预期响应时，我已经将它与 RSpec 一起使用，并且认为它很棒。如果您认为这对您有用，我鼓励您查看带有[vcr标记的 StackOverflow 问题。](/questions/tagged/vcr "显示标记为“vcr”的问题")

不确定它的 Jenkins 集成，但是当我使用 VCR 时，我自动化了一些常规任务，在这些任务中我需要使用 When 来访问 API [（](https://github.com/javan/whenever) “Ruby 中的 Cron 作业”）。不是真正连续的，但有点自动化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T13:30:41.153

几个月前，当我遇到这种情况时，我做了以下事情：

1.  模拟 API 并针对模拟的数据编写测试（你已经有了）
2.  再编写一个测试，从真实 API 获取数据并断言它（仍然）采用相同的形式并包含我们期望的相同类型的数据

我这样做是因为我无法猜测/知道实时 API 将提供哪些内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T09:54:39.907

模拟用于测试**您自己**的代码，而无需接触真实的 API。你想测试真正的 API。

所以我认为你必须在 RSpec 中编写一组测试，例如对3rd 方 API 进行**不显眼**的测试。
我所说的“不引人注目”是指跟踪您不会发出意外的“DELETE”API 请求，或者通过单个测试套件运行使用所有每日请求 API 限制。

不知道有没有指定的API测试工具。
至于我，我使用 RSpec 成功地测试了我自己的远程 API/服务器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T07:09:15.683

我会对现有的测试套件做两件事，以便它可以实时使用，第一件事是使用 for`describe`和`it`blocks 获取元数据的能力（[这里有一篇很好的博客文章](http://blog.davidchelimsky.net/2010/06/14/filtering-examples-in-rspec-2/)）。第二个使用`shared_contexts`阻止的能力。

首先，使用元数据标记您希望针对真实 API 运行的规范。例如，您想知道这些可以真正运行，例如

```
describe "Hitting the API with a call", :can_be_real do
  # …
end 
```

然后可以[使用 tag 选项](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/command-line/tag-option)从命令行运行这些规范。

第二件事是用真实的东西代替模拟物。这取决于您如何定义模拟，使用的是 a`before`还是 a `let`，以及模拟了多少。作为一个愚蠢的例子，见下文：

```
require 'rspec'

RSpec.configure do |c|
  c.treat_symbols_as_metadata_keys_with_true_values = true
end

shared_context "all my mocks and stubs" do
  let(:this) { false }
end

describe "a", :real do
  include_context "all my mocks and stubs" do
    let(:this) { true } if ENV["REAL_API_CALL"] == 'true'
    before do
      stub_const( "URI", Class.new ) unless ENV["REAL_API_CALL"] == 'true'
    end
  end
  it "should be real when it's real" do
    this.should == true
  end
  it "should escape things when it's real" do
    URI.should respond_to :escape
  end
end 
```

当文件通过`bin/rspec example.rb`输出运行时：

```
a
  should be real when it's real (FAILED - 1)
  should escape things when it's real (FAILED - 2)

Failures:

  1) a should be real when it's real
     Failure/Error: this.should == true
       expected: true
            got: false (using ==)
     # ./example.rb:19:in `block (2 levels) in <top (required)>'

  2) a should escape things when it's real
     Failure/Error: URI.should respond_to :escape
       expected URI to respond to :escape
     # ./example.rb:22:in `block (2 levels) in <top (required)>'

Finished in 0.00349 seconds
2 examples, 2 failures 
```

通过以下方式运行时`env REAL_API_CALL=true bin/rspec example.rb`：

```
a
  should be real when it's real
  should escape things when it's real

Finished in 0.00301 seconds
2 examples, 0 failures 
```

因此，您可以通过多种方式更改规范的上下文，从而使您能够从命令行（以及因此，Jenkins）获得所需的控制级别。您可能希望使用其他元数据来标记规范，例如真实运行是否安全，是否可能需要很长时间等。

# php - 使用 PHP 将 HTML 插入 SQL 数组

> ID：14292488
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:37:36.767
> 
> 标签：php, html, mysql

我试图找出一种有效的方法来格式化我的 SQL 数组数据以包含 HTML 格式，然后将其写入文件。我不认为自己是高级 PHP 用户，所以如果我的代码可能不是最好的方法，我深表歉意。目前我正在使用：

```
while ($row = $sql->fetch (PDO::FETCH_ASSOC))
$data = array($row["name"], $row["subject"], $row["date"], $row["var1"], $row["var2"], $row["var3"], $row["var4"], $row["var5"], $row["var6"]);
fputcsv($file, $data);   
fclose($file); 
```

这在将我需要的文本数据输出到 CSV 文件时效果很好，但想在每个数组中添加 HTML 中断和其他 HTML 格式。

我已经设法使用 fwrite 处理我的问题。感谢大家的意见和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:05:33.647

我已经设法使用 fwrite 处理我的问题。感谢大家的意见和建议！

# iphone - 在 UITableViewController 中显示的 activityIndi catorView 中的问题？

> ID：14292489
> 
> 赞同：1
> 
> 时间：2013-01-12T10:37:38.507
> 
> 标签：iphone, ios, uitableview, uiactivityindicatorview

使用activityIndi​​catorView显示前面`UITableViewController`，但显示在里面`UITableViewController`，如何解决这个问题？

我试过这个：

```
activityView = [[activityIndicatorView alloc] initWithFrame:CGRectMake(60, 130, 200, 100)];
    [self showActivity];

-(void) showActivity
{

    [self.tableView addSubview:activityView];
} 
```

![在此处输入图像描述](../Images/82fac170daf97ec18b70025dfe7c53e0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:38:50.957

将其作为子视图添加到视图中，而不是`UITableView`设置为超级视图，使其显示在视图的前面，如下所示：

```
[self.view addSubview:activityView];
[self.view bringSubviewToFront:activityView]; 
```

# asp.net - BootMetro 定义网格布局的宽度

> ID：14292490
> 
> 赞同：0
> 
> 时间：2013-01-12T10:37:41.243
> 
> 标签：asp.net, css, twitter-bootstrap

从引导地铁：

实时网格示例

默认的 Bootstrap 网格系统使用 12 列，形成一个 940 像素宽的容器，没有启用响应功能。添加响应式 CSS 文件后，网格会根据您的视口调整为 724 像素和 1170 像素宽。在 767px 视口以下，列变得流畅并垂直堆叠。

我想要一个将其 12 列划分为 600 像素宽度的网格，这可能吗？

例如

```
<div class="container" width="600px"> 
```

这不起作用**，**我收到警告，宽度不是 div 的 HTLM5 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:44:06.813

据我所知，ˋwidthˋ 只是为表格定义的。您应该改用 style 属性

```
style="width: 600px" 
```

或者更好的是，将样式提取到您在 HTML 中包含的外部样式表中。例如

```
.grid {
    width: 600px;
} 
```

然后在您的 HTML 代码中相应地添加该类

```
<div class="grid"></div> 
```

使一切变得更干净，并且您将样式与实际的 HTML 结构分开。

# java - 使用条件（休眠）仅获取最后一个条目

> ID：14292497
> 
> 赞同：1
> 
> 时间：2013-01-12T10:38:56.033
> 
> 标签：java, mysql, hibernate, select

我有两个实体`Issue`和`Issue_Tracker`.

**问题.java：**

```
public class Issue implements Serializable
        {
        private Integer issue_id;
        private String  issue_description;
        private Date issue_raised_date;
        private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0);

        @OneToMany(fetch=FetchType.LAZY, mappedBy="issue_id")
        public Set<Issue_Tracker> getIssueTracker() {
        return issueTracker;
    }

        public void setIssueTracker(Set<Issue_Tracker> issueTracker) {
        this.issueTracker = issueTracker; 
```

**问题跟踪器.java：**

```
public class Issue_Tracker implements Serializable
{  
     private Integer   issue_id;
     private String    tracker_status;
     private Timestamp tracked_time; 
```

当我离开时加入两个表，我使用查询得到以下数据：

```
SELECT issues.issue_id,
       issues.issue_description,
       issue_tracker.tracker_status,
       issue_tracker.tracked_time
FROM issues
     LEFT JOIN issue_tracker on issues.issue_id = issue_tracker.issue_id 
     WHERE issues.status = "Escalate To" 
```

输出是

```
 issue_id  tracker_status      tracked_time
    123     Assigned           1/8/2013 11:44   //1st entry
    123     Assigned           1/9/2013 11:45
    123     Completed          1/10/2013 12:52  // last entry

    32      Assigned           1/9/2013 16:46   //1st entry

    32      Assigned           1/10/2013 18:46  //last entry

    33      Assigned           1/9/2013 16:47   //1st entry

    33      Cancel             1/9/2013 17:49  //last entry 
```

现在，当我使用标准进行这些加入时，我得到了这些结果

```
 issue_id  tracker_status      tracked_time
        123     Assigned           1/8/2013 11:44 //1st entry of issue_id 123
        32      Assigned           1/9/2013 16:46
        33      Assigned           1/9/2013 16:47 
```

使用以下标准

```
 Criteria criteria = session.createCriteria(Issue.class);
         criteria.setFirstResult(from);
         criteria.setMaxResults(size);
         criteria.setFetchMode("Issue.issueTracker",FetchMode.JOIN);
         criteria.add(Restrictions.eq("status", "Escalate To")); 
```

现在预期的输出是

```
 issue_id  tracker_status      tracked_time
        123     Completed          1/10/2013 12:52 // last entry
        32      Assigned           1/10/2013 18:46 //last entry
        33      Cancel             1/9/2013 17:49  //last entry 
```

如何实现这一点，自从过去三天以来，我一直被困在这里，任何帮助都会很棒，是否因为我正在尝试一对多映射的这条线而发生

`private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0);`

因为**Set**不允许重复值，如果是这样，可能的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:49:29.997

试试这个：

```
SELECT i.issue_id, i.issue_description,
       it.tracker_status, it.tracked_time
FROM issues i 
LEFT JOIN ( SELECT it.issue_id, it.tracker_status, it.tracked_time 
            FROM issue_tracker it 
            INNER JOIN (SELECT issue_id, MAX(tracked_time) tracked_time 
                        FROM issue_tracker GROUP BY issue_id
                       ) A ON it.issue_id = A.issue_id AND it.tracked_time = A.tracked_time 
          ) it ON i.issue_id = it.issue_id 
WHERE i.status = "Escalate To"; 
```

# ruby-on-rails - 当我使用已编译的 Ruby 而不是 RVM 时，是什么导致 Encoding::ConverterNotFoundError？

> ID：14292498
> 
> 赞同：0
> 
> 时间：2013-01-12T10:39:14.610
> 
> 标签：ruby-on-rails, xcode, encoding, ruby-on-rails-3.2, foreman

我正在构建一个 Mac OS X 应用程序，并且我在应用程序中包含了 Ruby。为此，我在应用程序中包含了 Ruby。

当我在本地机器上测试我的应用程序时，它可以在我的 RVM 控制的 Ruby 上正常工作

当我通过更改环境变量来使用已编译的 Ruby 时，出现以下错误（工头加载环境变量）

```
$ pry
[1] pry(main)> Encoding
=> Encoding
[2] pry(main)> exit
$ foreman run pry
[1] pry(main)> Encoding
Encoding::ConverterNotFoundError: code converter not found (US-ASCII to UTF-8 with universal_newline)
from /Users/niko/Library/Developer/Xcode/DerivedData/MyApp-atvlxcrcyyiwmnfbcopifumvguqz/Build/Products/Debug/MyApp/Contents/Resources/server/vendor/ruby/1.9.1/gems/coderay-1.0.7/lib/coderay/scanner.rb:111:in `encode'
[2] pry(main)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:37:57.360

基本上发生了什么，无论是谁发现了这个问题，就是我丢失了某些文件的 Ruby 版本。这发生在我身上是因为通过 Git 处理的文件数量非常多（重命名文件或其他东西的数量上限）

为了解决这个问题，我在存储库中放置了一个压缩文件，而不是 /ruby/ 文件夹

然后，当我扩展压缩源代码并用`make && make install`Ruby 重建时，不再抛出这些错误。

# algorithm - C4.5 决策树制作算法

> ID：14292511
> 
> 赞同：0
> 
> 时间：2013-01-12T10:41:10.207
> 
> 标签：algorithm, decision-tree

我需要实现 C4.5 决策树创建算法并能够对其进行一些更改。这就是为什么我不能使用一些第三方计算库。

使用谷歌叔叔，我只能找到有关 ID3 算法的信息。

你能提供这个算法的c#（更好的选择）或伪代码吗？

# android - Facebook 登录 UI 作为片段或视图

> ID：14292514
> 
> 赞同：0
> 
> 时间：2013-01-12T10:41:36.680
> 
> 标签：android, facebook

使用 facebook 登录时，可以启动 Activity ( **com.facebook.LoginActivity** )。就我而言，这有点糟糕，因为我使用的是 GLSurfaceView，并且由于图形线程必须在主要活动的 onPause 方法处暂停，因此 FB 活动的透明背景会导致问题。

是否可以使用片段或视图来避免启动登录活动？

有一个**FacebookFragment**类，但仅用于包访问。

使用 Facebook SDK 3.0。

**编辑**

活动的清单条目是：

```
<activity android:name="com.facebook.LoginActivity"
          android:label="@string/app_name" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:43:53.330

您的 AndroidManifest.xml 中有什么？

我已经使用 SDK 附带的 Scrumptious 示例应用程序尝试了以下操作。在 Scrumptious 的 AndroidManifest.xml 中，有：

```
<activity android:name="com.facebook.LoginActivity"
          android:theme="@android:style/Theme.Translucent.NoTitleBar"
          android:label="@string/app_name" /> 
```

这给出了透明的背景。如果我将该块更改为：

```
<activity android:name="com.facebook.LoginActivity"
          android:label="@string/app_name" /> 
```

我的活动背景为黑色，但其他一切仍然有效。

# javascript - DerbyJS - 无法让 Mongo 存储工作

> ID：14292515
> 
> 赞同：1
> 
> 时间：2013-01-12T10:41:57.267
> 
> 标签：javascript, node.js, mongodb, derbyjs

我现在和德比开玩笑已经有一段时间了，目前我正试图把我的头绕在整个赛车存储的事情上。虽然我喜欢在客户端没有硬编码任何 MongoDB 查询的想法，但我不能完全让整个事情正常工作。

我反复收到`Error: No persistence handler for set(meta,[object Object],1)`消息，现在试图将其归结为一个最小的例子。这是我的相关部分`server/index.js`：

```
var http = require('http')
  , path = require('path')
  , express = require('express')
  , gzippo = require('gzippo')
  , derby = require('derby')
  , api = require('../api')
  , app = require('../app')
  , serverError = require('./serverError')

// SERVER CONFIGURATION //

var expressApp = express();
var server = module.exports = http.createServer(expressApp);

derby.use(derby.logPlugin);

// Setting up MongoDB storage
derby.use(require('racer-db-mongo'));
var store = derby.createStore({
  listen:  server
  , db: {
      type: 'Mongo'
    , uri: 'mongodb://localhost/webIsoRogue'
  }
});

// Trying to insert some dummy data
var model = store.createModel();
model.set('meta', {
  app: {
    title: 'Hi there'
  , author: 'Erik Mathers'
  }
});

console.log(model.get('meta.app')); 
```

我已经多次验证 MongoDB 服务器正在运行并且可以访问，它是！

一旦我尝试存储虚拟数据，我就会收到不太有用的错误消息：`Error: No persistence handler for set(meta,[object Object],1)`.

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T07:08:32.717

尝试：`'mongodb://localhost:27017/webIsoRogue'`

# c# - 将 RadioButtons 动态添加到 DataTable 中

> ID：14292518
> 
> 赞同：0
> 
> 时间：2013-01-12T10:42:38.840
> 
> 标签：c#, asp.net, datatable, radio-button

我正在尝试在 a 中插入一个新列`DataTable`，然后为表中的每一行插入一个 RadioButton。

我添加了一个新列：

```
datasource.Columns.Add("RadioButtons"); 
```

之后，我尝试在此表中添加 RadioButton foreach 行：

```
foreach (DataRow dr in datasource.Rows)
{
   dr[4] = new RadioButton();                        
   (dr[4] as RadioButton).GroupName = "Room1";
   Wizard1.ActiveStep.Controls.Add((Control)dr[4]);                        
} 
```

我在设置 GroupName 时遇到错误：

> *你调用的对象是空的。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:13:55.147

您可以尝试 RadioButton 的通用列表，因为没有列具有 DataType RadioButton

喜欢

```
 List<RadioButton> List1 = New List<RadioButton> 
```

# mysql - 连接mysql数据库

> ID：14292525
> 
> 赞同：1
> 
> 时间：2013-01-12T10:43:49.403
> 
> 标签：mysql, connection

我在将 NetBeans 与 MySQL 连接时遇到问题

你可以看到图像：

[![图片](../Images/f31df6ad954e1de2a075f0fda73e535e.png)](https://i.stack.imgur.com/RaOQg.jpg) .

我认为的每一件事都是正确的，但是当我运行程序时，它会给我连接错误，我确信用户并通过

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:59:00.630

这个怎么样？

```
String connStr = "jdbc:mysql://localhost/cooffee?user=root&password=root";
Connection conn = DriverManager.getConnection(connStr); 
```

*   [MySQL 和 Java JDBC - 教程](http://www.vogella.com/articles/MySQLJava/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:01:47.133

您需要用于 java 的 mysql 连接器：[http ://www.mysql.de/downloads/connector/j/](http://www.mysql.de/downloads/connector/j/)

只需将其添加为依赖项/lib 并将其添加到您的编译输出中，以便连接器中的类包含在您的最终 .jar 文件中。不确定这如何与 NetBeans 一起使用，但包含它应该很容易。

编辑：也许只需将库添加到您的项目中即可运行它，但在您想要共享的最终 .jar 文件中，您可能需要添加类。

# c# - 您如何使用其 FieldInfo（反射）调用 ArrayList 上的方法

> ID：14292530
> 
> 赞同：1
> 
> 时间：2013-01-12T10:44:12.830
> 
> 标签：c#, reflection

在我的代码中，我在 ParentClass 中声明了一个 ArrayList

```
public class ParentClass {
...
public ArrayList hybridElem; 
... 
```

然后使用从 ParentClass 运行的反射，我能够成功获取此 ArrayList @运行时的 FieldInfo。

使用该 FieldInfo，我希望能够从 hybridElem 添加或读取元素。我能够获得 ArrayList 的所有相关 PropertyInfo，例如 .Item、.Count、.ToArray 等……并且还可以获得这些属性的 getter 和 setter。

不幸的是，它们都没有被成功调用，因为 MethodInfo.Invoke 期望 Object 引用 ArrayList

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:26:42.527

你可以很容易地做到这一点。但是，正如评论正确地指出的那样，我建议您从`ArrayList`通用集合切换。

```
var instance = new ParentClass();
var fieldInfo = instance.GetType().GetProperty("MyList");
var arrayList = fieldInfo.GetValue(instance) as ArrayList;
var count = arrayList.Count; 
```

和：

```
public class ParentClass
{
    public ArrayList MyList { get; set; }

    public ParentClass()
    {
        MyList = new ArrayList();
    }
} 
```

或者，将其调整为使用字段的类（假设所述字段在某处初始化）：

```
var instance = new ParentClass();
var fieldInfo = instance.GetType().GetField("hybridElem");
var arrayList = fieldInfo.GetValue(instance) as ArrayList;
var count = arrayList.Count; 
```

# c# - 如何在有条件的列表中查找数字？

> ID：14292533
> 
> 赞同：0
> 
> 时间：2013-01-12T10:44:25.170
> 
> 标签：c#, linq, lambda

我是编写 lambda 表达式的新手，我遇到了下一个问题：我有

```
List<int> lifeField;
I want to find index of those members, that correspond to next condition:
(((number % (10 * currentMove)) == 1) || ((number % (10 * currentMove)) == 2))
where number is member of List and currentMove is integer - 0,1,2 
```

例如：

```
if it is first move
currentMove = 0
I search number 1 or 2 
if it is second move 
I search numbers 11,21 
```

......我想在这里找到如何用 lambda.... 或其他函数写这个

```
int indexOfLife = Array.FindIndex(lifeField, ?????????); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:54:40.893

```
var indexes = lifeField.Select((x,i) => new {Index = i, Element = x})
    .Where(x => 
        ((x.Element % (10 * currentMove)) == 1) || 
        ((x.Element % (10 * currentMove)) == 2))
    .Select(x => x.Index)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:52:36.553

`FindIndex`接受 a `Predicate`which 是一个接受元素并返回 a 的表达式`bool`。

所以，你想要这样的东西：

```
number => (
  ((number % (10 * currentMove)) == 1)
  ||
  ((number % (10 * currentMove)) == 2)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:54:38.350

注意currentMove不能为0，会导致`DivideByZeroException`

```
 var ints = Enumerable.Range(1,100).ToArray();
  int currentMove = 1;
  var output = ints.Where(number => number % (10 * currentMove) == 1 || (number % (10 * currentMove))==2); 
```

# ios - 如何在 iOS 中格式化 UINavigationItem 的标题？

> ID：14292534
> 
> 赞同：1
> 
> 时间：2013-01-12T10:44:35.943
> 
> 标签：ios, cocoa-touch, uinavigationitem

> **可能重复：**
> [UINavigationBar 多行标题](https://stackoverflow.com/questions/2422383/uinavigationbar-multi-line-title)

我正在尝试`UINavigationItem's`在 iOS 中为 Title 设置格式。

在正常情况下，我们可以像下面这样使用。

```
self.naviItem.title = @"Hello"; 
```

`TITLE`但是我想在下面的图片中设置三行文本。

![在此处输入图像描述](../Images/ef8034c155513c0193dce97ceec46515.png)

那么我该怎么做呢？

感谢您的阅读。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:48:07.260

您必须使用**titleView**以这种方式自定义您的**NavigationItem**。

```
 UILabel* tlabel=[[UILabel alloc] initWithFrame:CGRectMake(0,0, 300, 40)];
        tlabel.text=self.title;
        tlabel.textAlignment=NSTextAlignmentCenter;
        tlabel.font = [UIFont boldSystemFontOfSize:17.0];
        tlabel.numberOfLines = 3
        tlabel.textColor=[UIColor colorWithRed:7.0/255.0 green:26.0/255.0 blue:66.0/255.0 alpha:1.0];
        tlabel.backgroundColor =[UIColor clearColor];
        tlabel.adjustsFontSizeToFitWidth=YES;
        self.navigationItem.titleView=tlabel; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:47:40.143

您需要做的是制作一个自定义视图（UIView 的子类，在本例中使用 3 个 UILabel 作为视图的子级）。您可以像这样将此自定义视图放置在导航栏中：

```
self.navigationItem.titleView = myCustomView; 
```

祝你好运！

# javascript - 使用 appcelerator Titan Functions 传递变量

> ID：14292535
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:44:36.737
> 
> 标签：javascript, facebook-graph-api, titanium, appcelerator-mobile

我有一个需要从中获取图像的代码。我有一行想要从 API 调用中获取的图像。我不知道如何获得它。

这是我得到我的行的地方

```
Ti.Facebook.requestWithGraphPath(Titanium.App.Properties.getString("pageID") +'/feed',     {access_token: Token}, 'GET', function(e){
    if (e.success) {

        json = JSON.parse(e.result);
for (i = 0; i < json.data.length; i++) {
    data = json.data[i];
    row = Ti.UI.createTableViewRow({
        height:'80dp',
         // backgroundImage : 'images/tablebgl.png',
        backgroundColor: 'transparent',
        separatorColor:'transparent',
    });
row.coverid = data.from.id;     

var coverid = row.coverid;  

   Titanium.App.Properties.setString("cv", coverid);

    var imag = Ti.UI.createImageView();
row.add(imag);
require('image').get.signUpConn(data, function(scrollView){ 
imag.setImage(scrollView);
}); 
```

这是我的“image.js”

```
exports.signUpConn = function(data, callback) {
    var scrollView = Ti.UI.createView({
        top : 0,
        right : -1,
        left : -1,
        backgroundColor : 'transparent',
        width : '95%',
        contentWidth : 'auto',
        contentHeight : 'auto',
        layout : 'horizontal'
    });

    var url = "https://graph.facebook.com/" + Titanium.App.Properties.getString("cv") + "?fields=cover";
    var loader = Titanium.Network.createHTTPClient();
    loader.onload = function(data) {
        var data = JSON.parse(this.responseText);
        var images = [];
        for (var c = 0; c < 1; c++) {
            images[c] = {
                image : data.cover.source,
                width : 300
            };

        }
        function square(i) {
            var view = Ti.UI.createImageView({
                image : images[i].image,
                width : 300,
                height : 111,
                top : 5,
            });
            return view;
        }

        for (var i = 0; i < 1; i++) {
            scrollView.add(square(i));
        }

    }
    callback(scrollView);
    loader.open("GET", url);
    loader.send(data);

} 
```

所以我猜错误必须在函数和/或回调中。

图像将在“scrollView”中。

当涉及到函数和回调时，我一团糟。

这是我得到的错误：

```
Script Error = 'undefined' is not an object (evaluating 'require('image').get.signUpConn') 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:29:27.830

您的代码有多个语法错误（Facebook 请求，大量缺少括号），但您引用的错误是因为：

```
require('image').get.signUpConn(data, function(scrollView){ 
    imag.setImage(scrollView); // Why do you need this here? 
}); 
```

它需要是这样的，不需要`get`：

```
require('image').signUpConn(data, function(scrollView){ 
    imag.setImage(scrollView);
}); 
```

但这是一个更深层次的问题，`callback`在图像加载到`image.js`. 另外，你为什么要创建`scrollView`（这只是一个常规视图）并通过回调传递它？为什么你有一个只循环一次的 for 循环？

看起来要部分解决这个问题，将 scrollView 移到所有这些之外，将`images`数组传递给回调，然后使用你的 square 函数在回调中添加图像，如下所示：

```
require('image').signUpConn(data, function(images){ 
    for(var i = 0;i<images.length;i++) {    
        scrollView.add(square(image[i]);
    }
}); 
```

您还必须在 square 函数中更改一些内容。

# c - 在c中获取文件参数

> ID：14292536
> 
> 赞同：0
> 
> 时间：2013-01-12T10:44:39.617
> 
> 标签：c

我有这个递归函数来搜索文件的树结构。我需要找出每个文件的参数（类型，所有者，组，权限，创建日期，最后修改日期，..）怎么做？

```
void search(const char * path)
{
  char newpath[PATH_SIZE + 1];

  DIR * dp;
  struct dirent * ep;

  dp = opendir(path);
  if (dp == NULL)
    return;

  while ((ep = readdir(dp)) != NULL)
  {
    if (strcmp(".",  ep->d_name) == 0 ||
        strcmp("..", ep->d_name) == 0)
    {
      continue;
    }

    printf("%s/%s\n", path, ep->d_name);

    if ((ep->d_type & DT_DIR) == DT_DIR)
    {
      if (strlen(path) + strlen(ep->d_name) + 1 <= PATH_SIZE)
      {
        sprintf(newpath, "%s/%s", path, ep->d_name);
        search(newpath);
      }
    }
  }

  closedir(dp);

  return;
} 
```

我只知道文件的类型（ep-> d_type）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:48:47.983

通过 stat() 函数：

手动的：`man 2 stat`

原型：

```
 int stat(const char *path, struct stat *buf);
   int fstat(int fd, struct stat *buf);
   int lstat(const char *path, struct stat *buf); 
```

其中 stat 结构定义为：

```
 struct stat {
       dev_t     st_dev;     /* ID of device containing file */
       ino_t     st_ino;     /* inode number */
       mode_t    st_mode;    /* protection */
       nlink_t   st_nlink;   /* number of hard links */
       uid_t     st_uid;     /* user ID of owner */
       gid_t     st_gid;     /* group ID of owner */
       dev_t     st_rdev;    /* device ID (if special file) */
       off_t     st_size;    /* total size, in bytes */
       blksize_t st_blksize; /* blocksize for file system I/O */
       blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
       time_t    st_atime;   /* time of last access */
       time_t    st_mtime;   /* time of last modification */
       time_t    st_ctime;   /* time of last status change */
   }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:54:17.990

@gustaf r 给出的答案是绝对正确的。但是，我想再添加 1 点，您也可以在 MAN 页面中找到。

```
These functions return information about a file.   No  permissions  are
   required  on  the  file itself, but—in the case of stat() and lstat() —
   execute (search) permission is required on all of  the  directories  in
   path that lead to the file. 
```

因此，您正在处理的目录应该具有适当的权限。

# python - 使用正则表达式拆分 Python 字符串

> ID：14292537
> 
> 赞同：1
> 
> 时间：2013-01-12T10:44:40.583
> 
> 标签：python, regex, split

我试图自己解决这个问题，但我无法...

我有文字：

> {Łatwe|Proste} szukanie mieszkania {Sprawdź|Wypróbuj juz dziś}, znalezienie {wcale|w ogóle}

我想从句子或整个表达式中获取单个单词`{}`到列表中。所以在列表中它看起来像这样：

*   {Łatwe|Proste}
*   苏卡涅
*   米斯卡尼亚
*   {Sprawdź|Wypróbuj juz dziś}
*   znalezien...

我使用`split()`方法，但它产生例如：

*   {Sprawdź|Wypróbuj
*   朱兹
*   dziś}

但应该是一个字。我不想破坏`{}`.

**有什么帮助吗？:)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:47:38.743

Python 2.x 解决方案：

```
>>> re.findall(r'{[^}]*}|\b\w+\b', u'{Łatwe|Proste} szukanie mieszkania {Sprawdź|Wypróbuj juz dziś}, znalezienie {wcale|w ogóle}', re.U)
[u'{\u0141atwe|Proste}', u'szukanie', u'mieszkania', u'{Sprawd\u017a|Wypr\xf3buj juz dzi\u015b}', u'znalezienie', u'{wcale|w og\xf3le}'] 
```

[`re.U`](http://docs.python.org/2/library/re.html#re.U)flag 是必需的，因为默认情况下，`\b`,`\w`和其他一些（`\d`和`\s`否定的对应项）仅匹配 ASCII 字符。

Python 3.x 解决方案：

```
re.findall(r'{[^}]*}|\b\w+\b', '{Łatwe|Proste} szukanie mieszkania {Sprawdź|Wypróbuj juz dziś}, znalezienie {wcale|w ogóle}') 
```

在 Python 3.x 中，, `\b`, `\w`,`\d`和`\s`它们的对应项将默认对 Unicode 字符执行匹配。`re.U`flag[仍然存在是为了向后兼容](http://docs.python.org/3.1/library/re.html#re.A)，但指定它是多余的。

# python - 从 html 表中解析结果

> ID：14292538
> 
> 赞同：0
> 
> 时间：2013-01-12T10:44:43.073
> 
> 标签：python, xpath, lxml

我试图匹配来自 html 输出的一些数据，但我不确定我能做些什么来正确执行它。因此，我使用以下代码块来提取访问和组信息的内容：

```
import requests
import lxml.etree as LE
import lxml.html as LH

url = "http://theurl"
r = requests.get(url,auth=('user', 'pass'))
html = r.text

root = LH.fromstring(html)
LE.strip_tags(root, 'b')
data_list = root.xpath("""//td[text()='grouplist']
                             /following-sibling::*""")[0]

accessList= data_list.xpath("""//td[text()='access']
                                 /following-sibling::*/text()""")

groups = data_list.xpath("""//td[text()='groups']
                                 /following-sibling::*/text()""") 
```

如果我打印 accessList，我有我想要的数据：

```
print accessList
['Administrators', 'group_a', 'group_b', 'group_c'] 
```

但是当我打印组时，返回的结果将是：

```
print groups:
['\n','\n','\n'] 
```

有了这些信息，可以做些什么来获得：

```
print groups
['group_a', 'group_b', 'group_c'] 
```

在这里，您可以看到返回的 html 结果

```
<TABLE bgcolor="#dddddd" border="1" />
<TR>
   <TD valign="top"><B>grouplist</B></TD>
   <TD>
      <TABLE />
<TR>
   <TD>
      <TABLE bgcolor="#dddddd" border="1" />
<TR>
   <TD valign="top"><B>access</B></TD>
   <TD>Administrators</TD>
</TR>
<TR>
   <TD valign="top"><B>inUse</B></TD>
   <TD>true</TD>
</TR>
<TR>
   <TD valign="top"><B>groups</B></TD>
   <TD>
      <TABLE>
         <TR>
            <TD>group_a</TD>
         </TR>
         <TR>
            <TD>group_b</TD>
         </TR>
         <TR>
            <TD>group_c</TD>
         </TR>
      </TABLE>
   </TD>
</TR>
<TR>
   <TD valign="top"><B>deny</B></TD>
   <TD>
      <TABLE>
      </TABLE>
   </TD>
</TR> 
```

编辑：可以在这里测试 HTML 代码：[html tester](http://www.draac.com/htmltester.html)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:29:20.177

```
groups = data_list.xpath("""//td[text()='groups']
                                 /following-sibling::td/table/tr/td/text()""") 
```

或者，更具体一点，

```
groups = data_list.xpath("""//td[text()='groups']
                                 /following-sibling::*//td/text()""") 
```

作品。如果这对您的目的来说太具体了，您可以改为`groups`这样定义：

```
groups = data_list.xpath("""//td[text()='groups']
                                 /following-sibling::*""")[0] 
```

然后使用`text_content`：

```
groups = groups.text_content().split() 
```

`group_a`但是，如果,`group_b`和/或被`group_c`替换为本身包含空格的文本，则在空格上拆分文本内容可能效果不佳。

# java - 使用 Swing 计时器：制造混乱

> ID：14292543
> 
> 赞同：5
> 
> 时间：2013-01-12T10:45:56.273
> 
> 标签：java, multithreading, swing, timer

只希望字母的颜色随着一点停顿而改变（停顿可能会根据单词的时间和单词的长度而有所不同）。

下面的代码对我来说很好用。但是我认为我的逻辑混乱了。我可以理解，但我的队友应该很容易理解。

![在此处输入图像描述](../Images/dfc84d511a456b930c704bcd170779ec.png) ![在此处输入图像描述](../Images/0a44d4182eb25e8fa2ad560bf7792683.png)

代码：

```
import java.awt.Color;
import java.lang.reflect.InvocationTargetException;
import java.awt.Toolkit;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.Timer;

public class Reminder 
{
    static   JFrame frame;
    Toolkit toolkit;
    Timer timer;
    int point=0,temp=0,hil=0,point2=0;long time1=0,time2=0;
    static   StyledDocument doc;
    static   JTextPane textpane;
    String[] arr={"Tes"," hiiii"," what"," happpn"};
    int i=0;
    int[] a=new int[5];

    public Reminder() 
    {
        a[0]=1000;
        a[1]=900;
        a[2]=300;
        a[3]=1500;
        a[4]=1700;

        ActionListener actionListener = new ActionListener() 
        {
            public void actionPerformed(ActionEvent actionEvent) 
            {
                point =arr[i].length();
                temp=point+1;
                time1=System.currentTimeMillis();
                new Thread(new t1()).start();
            }
        };

        timer = new Timer(a[i], actionListener);
        timer.setInitialDelay(0);
        timer.start();
    }

    public  class t1 implements Runnable
    {     /* true idea to use current time is beacuse i want to check and make 
sure that the time taken since the timer started, and the present time should
not  exceed the time given in the array in any case*/   
        public void run() 
        {
            try
            {
                time2=System.currentTimeMillis();
                while(time2-time1<=a[i]-200){Thread.sleep((long) (a[i] / (arr[i].length() * 4)));
                if(hil<=temp-1)
                {
                    doc.setCharacterAttributes(point2,hil, textpane.getStyle("Red"), true);}
                    hil++;
                    time2=System.currentTimeMillis();
                }
                doc.setCharacterAttributes(point2,point+1, textpane.getStyle("Red"), true);
                point2+=point;hil=0;i++;
                timer.setDelay(a[i]);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    }

    public static void newcompo()
    {
        JPanel panel = new JPanel();
        doc = (StyledDocument) new DefaultStyledDocument();
        textpane = new JTextPane(doc);
        textpane.setText("Test hiiii what happpn");
        javax.swing.text.Style style = textpane.addStyle("Red", null);
        StyleConstants.setForeground(style, Color.RED);
        panel.add(textpane);
        frame.add(panel);
        frame.pack();
    }

    public static void main(String args[]) throws InterruptedException
                                                                ,    InvocationTargetException 
    {
          SwingUtilities.invokeAndWait(new Runnable() 
          {
            @Override
            public void run() 
            {
                frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                frame.setVisible(true);

                newcompo();
                Reminder aa=  new Reminder();
            }
        });
    }
} 
```

有什么建议吗？我该如何简化？

**更新错误**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class KaraokeTest {

private int[] timingsArray = {1000, 900, 300, 1500};//word/letters timings
private String[] individualWordsToHighlight = {"Tes", " hiiii", " what", " happpn"};//each individual word/letters to highlight
private int count = 0;
private final JTextPane jtp = new JTextPane();
private final JButton startButton = new JButton("Start");
private final JFrame frame = new JFrame();

public KaraokeTest() {
    initComponents();
}

private void initComponents() {
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);

    for (String s : individualWordsToHighlight) {
        String tmp = jtp.getText();
        jtp.setText(tmp + s);
    }
    jtp.setEditable(false);

    startButton.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            startButton.setEnabled(false);
            count = 0;

            //create Arrays of individual letters and their timings
            final ArrayList<String> chars = new ArrayList<>();
            final ArrayList<Integer> charsTiming = new ArrayList<>();

            for (String s : individualWordsToHighlight) {
                for (int i = 0; i < s.length(); i++) {
                    chars.add(String.valueOf(s.charAt(i)));
                    System.out.println(String.valueOf(s.charAt(i)));
                }
            }

            for (int x = 0; x < timingsArray.length; x++) {
                for (int i = 0; i < individualWordsToHighlight[x].length(); i++) {
                    charsTiming.add(timingsArray[x] / individualWordsToHighlight[x].length());
                    System.out.println(timingsArray[x] / individualWordsToHighlight[x].length());
                }
            }

            new Timer(1, new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (count < charsTiming.size()) {
                        highlightNextWord();
                        //restart timer with new timings
                        ((Timer) ae.getSource()).setInitialDelay(charsTiming.get(count));
                        ((Timer) ae.getSource()).restart();
                    } else {//we are at the end of the array
                        reset();
                        ((Timer) ae.getSource()).stop();//stop the timer
                    }
                    count++;//increment counter
                }
            }).start();
        }
    });

    frame.add(jtp, BorderLayout.CENTER);
    frame.add(startButton, BorderLayout.SOUTH);

    frame.pack();
    frame.setVisible(true);
}

private void reset() {
    startButton.setEnabled(true);
    jtp.setText("");
    for (String s : individualWordsToHighlight) {
        String tmp = jtp.getText();
        jtp.setText(tmp + s);
    }
    JOptionPane.showMessageDialog(frame, "Done");
}

private void highlightNextWord() {
    //we still have words to highlight
    int sp = 0;
    for (int i = 0; i < count + 1; i++) {//get count for number of letters in words (we add 1 because counter is only incrementd after this method is called)
        sp += 1;
    }
    //highlight words
    Style style = jtp.addStyle("RED", null);
    StyleConstants.setForeground(style, Color.RED);
    ((StyledDocument) jtp.getDocument()).setCharacterAttributes(0, sp, style, true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new KaraokeTest();
        }
    });
}
} 
```

![在此处输入图像描述](../Images/87e9517b22a1298692e8ae721538821b.png)

给我例外：

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Uncompilable source code - illegal start of type
    at KaraokeTest$1.actionPerformed(KaraokeTest.java:47)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6263)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6028)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2475)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T14:51:22.573

好的，这是您的代码的清理版本，它应该大致执行相同的操作：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;
import java.util.Arrays;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class Reminder {
    private static final String TEXT = "Test hiiii what happpn";
    private static final String[] WORDS = TEXT.split(" ");
    private JFrame frame;
    private Timer timer;
    private StyledDocument doc;
    private JTextPane textpane;
    private List<Integer> times = Arrays.asList(1000, 900, 300, 1500);

    private int stringIndex = 0;
    private int index = 0;

    public void startColoring() {
        ActionListener actionListener = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                doc.setCharacterAttributes(stringIndex, 1, textpane.getStyle("Red"), true);
                stringIndex++;
                try {
                    if (stringIndex >= doc.getLength() || doc.getText(stringIndex, 1).equals(" ")) {
                        index++;
                    }
                    if (index < times.size()) {
                        double delay = times.get(index).doubleValue();
                        timer.setDelay((int) (delay / WORDS[index].length()));
                    } else {
                        timer.stop();
                        System.err.println("Timer stopped");
                    }
                } catch (BadLocationException e) {
                    e.printStackTrace();
                }
            }
        };
        timer = new Timer(times.get(index), actionListener);
        timer.setInitialDelay(0);
        timer.start();
    }

    public void initUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        doc = new DefaultStyledDocument();
        textpane = new JTextPane(doc);
        textpane.setText(TEXT);
        javax.swing.text.Style style = textpane.addStyle("Red", null);
        StyleConstants.setForeground(style, Color.RED);
        panel.add(textpane);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) throws InterruptedException, InvocationTargetException {
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                Reminder reminder = new Reminder();
                reminder.initUI();
                reminder.startColoring();
            }
        });
    }
} 
```

帮助他人阅读和理解您的代码的一些技巧：

*   使用连贯和适当的缩进（我个人尝试坚持默认的 Sun Java 约定）
*   遵循 Java 编码约定（常量为大写，类名以大写开头，变量和方法以小写开头，使用驼峰式）
*   使用有意义的变量和方法名称
*   类成员应一一声明（不要使用`int i, j, k;`）
*   每行使用一条指令（避免`if(something) doSomething(); else {doSomethingElse1(); doSomethingElse2();}`单行之类的东西）
*   避免不必要地使用`static`关键字（常量除外）
*   尽量避免过多地耦合您的代码（尽量对其余代码的执行方式做出最低限度的假设）
*   在您的代码中添加 javadoc 和注释，这始终是一个很好的做法，它对您和其他人都有很大的帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T14:36:44.970

您担心的主要原因是您没有`JTextPane`在`Event Dispatch Thread`.

对于这种情况，当您真的想从另一个线程更新某个东西时，请始终使用[EventQueue.invokeLater(...)](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html#invokeLater%28java.lang.Runnable%29)或[EvenQueue.invokeAndWait()](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html#invokeAndWait%28java.lang.Runnable%29)，它可以`asynchronously (former)/synchronously (latter)`更新您在 EDT 上的请求，但必须小心，如果没有正确使用，`invokeAndWait()`可能会导致。`deadlocks/run conditions`

这是您更新的代码，可能符合您的期望。希望您可以根据自己的喜好修改代码。

```
import javax.swing.*;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;
import java.awt.*;
import java.lang.reflect.InvocationTargetException;

/**
 * Created with IntelliJ IDEA.
 * User: Gagandeep Bali
 * Date: 1/12/13
 * Time: 5:55 PM
 * To change this template use File | Settings | File Templates.
 */
public class ColouringText
{
    private StyledDocument document;
    private JTextPane textPane;

    private String message;
    private String[] parts;

    private Timer timer;
    private int counter;
    private int start, end;
    private Thread thread = new Thread()
    {
        @Override
        public void run()
        {
            while (counter < parts.length)
            {
                final int len = parts[counter++].length();
                try
                {
                    EventQueue.invokeAndWait(new Runnable()
                    {
                        @Override
                        public void run()
                        {
                            document.setCharacterAttributes(
                                    start, len, textPane.getStyle("RED"), true);
                        }
                    });
                    Thread.sleep(len * 1000);
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                }
                catch (InvocationTargetException e)
                {
                    e.printStackTrace();
                }
                start += (len + 1);
            }
        }
    };

    public ColouringText()
    {
        document = (StyledDocument) new DefaultStyledDocument();
        message = "Hello there... Joey Rohan. Had you ever thought about putting indentations before pasting your code.";
        parts = message.split(" ");
        counter = 0;
        start = 0;
        end = 6;
        System.out.println("Message Length : " + message.length());
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Colouring Text Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        textPane = new JTextPane(document);
        textPane.setText(message);
        Style style = textPane.addStyle("RED", null);
        StyleConstants.setForeground(style, Color.RED);

        contentPane.add(textPane);
        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        thread.start();
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ColouringText().displayGUI();
            }
        });
    }
} 
```

![COLOURINGTEX 示例](../Images/49f245bf7fd3ceae0f1609c3baa6fb97.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T17:59:55.577

曾经在类似任务中回答了您之前的 2 个问题：

*   [在java中突出显示单词](https://stackoverflow.com/questions/13360411/highlighting-words-in-java/13361657#13361657)
*   [在java中突出显示单词](https://stackoverflow.com/questions/13478892/highlighting-the-word-in-java/13480123#13480123)

和其他人不同意我的近距离投票，我决定对此进行一些研究。

我已经采用了我的[最新示例](https://stackoverflow.com/questions/13478892/highlighting-the-word-in-java/13480123#13480123)并进行了编辑以尽可能简化等，以使您更易于理解，这反过来又应该帮助您了解如何简化自己的。

我不明白您为什么要开始一个新线程以使单词慢慢突出显示。只需使用我的其他示例并提供单个字母而不是多个字母及其时间来突出显示，因此它们将单独突出显示。或者只是制作一种方法来为您完成这项工作，并以字母和时间的形式遍历这些数组。

`integer`下面的示例使用s数组来保存要突出显示的单词的*时间。*它还包含我们要突出显示的每个单词/字母的数组：

```
private int[] timingsArray = {1000, 900, 300, 1500};//word/letters timings
private String[] individualWordsToHighlight = {"Tes", " hiiii", " what", " happpn"};//each individual word/letters to highlight 
```

在我们的*开始按钮*中，我们有一种方法可以将上面的内容转换为每个字母的单个时间/字母，以逐个字母突出显示：

```
//create Arrays of individual letters and their timings
final ArrayList<String> chars = new ArrayList<>();
final ArrayList<Integer> charsTiming = new ArrayList<>();
for (String s : individualWordsToHighlight) {
    for (int i = 0; i < s.length(); i++) {
        chars.add(String.valueOf(s.charAt(i)));
        System.out.println(String.valueOf(s.charAt(i)));
    }
}

for (int x = 0; x < timingsArray.length; x++) {
    for (int i = 0; i < individualWordsToHighlight[x].length(); i++) {
        charsTiming.add(timingsArray[x] / individualWordsToHighlight[x].length());
        System.out.println(timingsArray[x] / individualWordsToHighlight[x].length());
    }
} 
```

接下来有一个`Timer`将在按下*开始按钮时启动*的单曲，它将突出显示单词/字母，并每次都以新的延迟重新启动，直到所有单词/字母都被突出显示：

```
new Timer(1, new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (count < charsTiming.size()) {
                        highlightNextWord();
                        //restart timer with new timings
                        ((Timer) ae.getSource()).setInitialDelay(charsTiming.get(count));
                        ((Timer) ae.getSource()).restart();
                    } else {//we are at the end of the array
                        reset();
                        ((Timer) ae.getSource()).stop();//stop the timer
                    }
                    count++;//increment counter
                }
            }).start(); 
```

希望这可以帮助。

![在此处输入图像描述](../Images/03bed9ffd5fd12b0a3dc70dbc7fdbe1c.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class KaraokeTest {

    private int[] timingsArray = {1000, 900, 300, 1500};//word/letters timings
    private String[] individualWordsToHighlight = {"Tes", " hiiii", " what", " happpn"};//each individual word/letters to highlight
    private int count = 0;
    private final JTextPane jtp = new JTextPane();
    private final JButton startButton = new JButton("Start");
    private final JFrame frame = new JFrame();

    public KaraokeTest() {
        initComponents();
    }

    private void initComponents() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        for (String s : individualWordsToHighlight) {
            String tmp = jtp.getText();
            jtp.setText(tmp + s);
        }
        jtp.setEditable(false);

        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                startButton.setEnabled(false);
                count = 0;

                //create Arrays of individual letters and their timings
                final ArrayList<String> chars = new ArrayList<>();
                final ArrayList<Integer> charsTiming = new ArrayList<>();

                for (String s : individualWordsToHighlight) {
                    for (int i = 0; i < s.length(); i++) {
                        chars.add(String.valueOf(s.charAt(i)));
                        System.out.println(String.valueOf(s.charAt(i)));
                    }
                }

                for (int x = 0; x < timingsArray.length; x++) {
                    for (int i = 0; i < individualWordsToHighlight[x].length(); i++) {
                        charsTiming.add(timingsArray[x] / individualWordsToHighlight[x].length());
                        System.out.println(timingsArray[x] / individualWordsToHighlight[x].length());
                    }
                }

                new Timer(1, new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        if (count < charsTiming.size()) {
                            highlightNextWord();
                            //restart timer with new timings
                            ((Timer) ae.getSource()).setInitialDelay(charsTiming.get(count));
                            ((Timer) ae.getSource()).restart();
                        } else {//we are at the end of the array
                            reset();
                            ((Timer) ae.getSource()).stop();//stop the timer
                        }
                        count++;//increment counter
                    }
                }).start();
            }
        });

        frame.add(jtp, BorderLayout.CENTER);
        frame.add(startButton, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    private void reset() {
        startButton.setEnabled(true);
        jtp.setText("");
        for (String s : individualWordsToHighlight) {
            String tmp = jtp.getText();
            jtp.setText(tmp + s);
        }
        JOptionPane.showMessageDialog(frame, "Done");
    }

    private void highlightNextWord() {
        //we still have words to highlight
        int sp = 0;
        for (int i = 0; i < count + 1; i++) {//get count for number of letters in words (we add 1 because counter is only incrementd after this method is called)
            sp += 1;
        }
        //highlight words
        Style style = jtp.addStyle("RED", null);
        StyleConstants.setForeground(style, Color.RED);
        ((StyledDocument) jtp.getDocument()).setCharacterAttributes(0, sp, style, true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new KaraokeTest();
            }
        });
    }
} 
```

**更新**

回应您编辑的问题。

再次，代码对我来说很好，这让我得出结论，我们的 java 运行时不同，可能会导致问题。我的是：

> java 版本“1.7.0_10” Java(TM) SE 运行时环境（构建 1.7.0_10-b18） Java HotSpot(TM) 64 位服务器 VM（构建 23.6-b04，混合模式）

**更新 2：**

根据您对 java 版本的评论：

> JDK 6、NetBeans 6.5.1

你有没有尝试过：

```
final ArrayList<String> chars = new ArrayList<String>(); 
final ArrayList<Integer> charsTiming = new ArrayList<Integer>(); 
```

注意我`<>`不再使用，因为 Java 6 不支持*Diamond 运算符*，它必须包含数据类型，即`<Integer>`.

# android - 在数据库 SQLite Android 中检索另一个图像

> ID：14292544
> 
> 赞同：0
> 
> 时间：2013-01-12T10:46:03.013
> 
> 标签：android, image

我是新来的 :D

我已经在我的 android 应用程序的数据库 sqlite 中检索了一个图像，但是当我尝试获取另一个图像时，图像仍然和以前一样。它总是从第 1 行检索图像，我不知道为什么

这是我的代码

```
public void findAlphabet(View view) {
    try {
        db = kamusTI.getWritableDatabase();
        String sql = "SELECT * FROM kamusti WHERE istilah LIKE '"
                + editAlphabet.getText().toString() + "%' ORDER BY istilah";
        cursor = db.rawQuery(sql, null);            
        adapter2 = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_2, cursor, new String[] {
                        "istilah", "definisi" }, new int[] {
                        android.R.id.text1, android.R.id.text2 });
        listView2.setAdapter(adapter2);
        listView2.setTextFilterEnabled(true);
        String sql1 = "SELECT COUNT(istilah) FROM kamusti WHERE istilah LIKE '"
                + editAlphabet.getText().toString() + "%' ORDER BY istilah";
        cursor = db.rawQuery(sql1, null);
        cursor.moveToFirst();

        cur = db.query("kamusti", null, null, null, null, null, null);
        cur.moveToFirst();
    //  cur.moveToPosition(0);
        byte[] im = cur.getBlob(3);
        //  ByteArrayInputStream imagestream = new ByteArrayInputStream(im);
            Bitmap imagestream = BitmapFactory.decodeByteArray(im, 0, im.length);
        //  Bitmap image = BitmapFactory.decodeStream(imagestream);
            img = (ImageView) findViewById (R.id.gambar);
            img.setImageBitmap(imagestream); 
        hasilCari.setText("Hasil Pencarian : " + cursor.getInt(0));
    } catch (SQLException e) {
        hasilCari.setText(e.toString());
    }
} 
```

我只是不知道如何解决这个问题。当我尝试在我的应用程序中查找另一个字母时，图像将始终出现在数据库的第 1 行中。请帮我 ：）

*对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:00:57.003

哦，伙计，我很抱歉，但我必须说：你的代码真的很糟糕......

它根本没有组织，但也许......不应该`byte[] im = cur.getBlob(3);`是`byte[] im = cursor.getBlob(3);`？

**编辑**：尝试评论第二个和第三个查询，因为它们看起来没用，并进行我建议的“cur”->“cursor”更改：

```
 public void findAlphabet(View view) {
        try {
            db = kamusTI.getWritableDatabase();
            String sql = "SELECT * FROM kamusti WHERE istilah LIKE '"
                    + editAlphabet.getText().toString() + "%' ORDER BY istilah";
            cursor = db.rawQuery(sql, null);            
            adapter2 = new SimpleCursorAdapter(this,
                    android.R.layout.simple_list_item_2, cursor, new String[] {
                            "istilah", "definisi" }, new int[] {
                            android.R.id.text1, android.R.id.text2 });
            listView2.setAdapter(adapter2);
            listView2.setTextFilterEnabled(true);
//            String sql1 = "SELECT COUNT(istilah) FROM kamusti WHERE istilah LIKE '"
//                    + editAlphabet.getText().toString() + "%' ORDER BY istilah";
//            cursor = db.rawQuery(sql1, null);
              cursor.moveToFirst();

//            cur = db.query("kamusti", null, null, null, null, null, null);
//            cur.moveToFirst();
        //  cur.moveToPosition(0);
            byte[] im = cursor.getBlob(3);
            //  ByteArrayInputStream imagestream = new ByteArrayInputStream(im);
                Bitmap imagestream = BitmapFactory.decodeByteArray(im, 0, im.length);
            //  Bitmap image = BitmapFactory.decodeStream(imagestream);
                img = (ImageView) findViewById (R.id.gambar);
                img.setImageBitmap(imagestream); 
            hasilCari.setText("Hasil Pencarian : " + cursor.getInt(0));
        } catch (SQLException e) {
            hasilCari.setText(e.toString());
        }
    } 
```

# jquery - Javascript MVC视图问题

> ID：14292545
> 
> 赞同：0
> 
> 时间：2013-01-12T10:46:19.203
> 
> 标签：jquery, controller, javascriptmvc

使用 JMVC 我有这个问题：这条线不起作用：`this.element.append('hello');`

这是我的控制器：

```
steal('jquery/controller', 
    'jquery/dom/form_params',
    'jquery/view/ejs',
    'jquery/controller/view')
.then(
    './home.css',
    function($){
        $.Controller("Wg.Home",

        {
            defaults : {
                defaultText : "Search for things here"
            }
        },

        {

            init : function(){
                this.render();
            },

            render : function(){
                $("body").addClass("home");

                this.rendered = true;
                this.element.html(this.view(this.options));
            this.element.append("<div>Hi there</div>");
            }, ... 
```

我需要在视图渲染后操作 EJS html，但我不能。我想念什么？谢谢

更多信息：

我以这种方式从 router.js 运行我的控制器：

```
this.home = new Wg.Home(this.container); 
```

this.container 是：

```
this.container = $('#page'); 
```

我的 init.ejs 是：

```
<div class="form-container">
    <form action="" method="get" class="form-wrapper clearfix">

    <input type='text' placeholder="<%=defaultText%>" name='q' id="q" class='blurred'/>
    <button type="submit">Search</button>

    </form>
</div> 
```

我没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:51:08.330

根据下面的评论，我认为已经理解了您的问题。您正在以这种方式调用视图：

```
 this.element.html(this.view('init',{'artists' : Wg.Models.Artists.findAll()})); 
```

你需要看看这个语句ˋWg.Models.Artists.findAll()ˋ。这只不过是一个**异步**jQuery ajax 调用的包装器。JavaScriptMVC 在 ˋthis.viewˋ 方法中添加了对直接处理异步 ajax 调用的支持，该方法通过 jQuery Deferreds 完成。这意味着当您调用上述指令时，会发生什么

*   对服务器的异步调用开始（由ˋWg.Models.Artists.findAll()ˋ定义）
*   当结果返回时，视图（取自本地缓存或获取）并与输出一起呈现。

然而问题是 ˋthis.element.append(...)' 是在 ajax 调用返回之前完成的，基本上你的 ˋinitˋ 视图是在你的 ˋthis.element.append(...)ˋ 发生之后呈现的。

您可以尝试执行以下操作：

```
var self = this;
Wg.Models.Artists.findAll({}, function(data) {
    //this is the success callback when the data has been fetched
    self.element.html(this.view('init', { artists: data }));
    self.element.append('<div>hi there</div>');
}); 
```

试试这是否适合你。

//编辑：

文档中的这篇文章可能会很有帮助：

*   [http://javascriptmvc.com/docs.html#!view.deferreds](http://javascriptmvc.com/docs.html#!view.deferreds)

# php - PHP文本框防止特殊字符

> ID：14292548
> 
> 赞同：-3
> 
> 时间：2013-01-12T10:46:31.030
> 
> 标签：php, textbox

这是我的代码：

```
<tr class="top">
                <th><label for="userName"><?php echo NICKNAME; ?></label></th>
                <td>
                    <input id="userName" class="text" name="name" maxlength="15"        type="text" value="<?php echo $form->getValue('name'); ?>">
                    <span class="error"><?php echo $form->getError('name'); ?></span>
                </td>
            </tr> 
```

我想防止特殊字符（如 ^ < > !' + % &）和其他字符（ç i ğ ü ö）

完整的 PHP 文件： http: [//pastebin.com/RBQ2TF6S](http://pastebin.com/RBQ2TF6S)

我需要这个代码，请简单地告诉我..

谢谢你。

编辑：我的语言文件：

```
define("USRNM_EMPTY","(Kullanıcı adı boş)");
define("USRNM_TAKEN","(İsim zaten kullanımda.)");
define("USRNM_SHORT","(min. ".USRNM_MIN_LENGTH." figures)");
define("USRNM_CHAR","(Geçersiz Karakterler)"); 
```

EDIT2：或者我们可以阻止注册 db_mysql.php

```
function register($username, $password, $email, $tribe, $act) {
    $time = time();
    $timep = (time() + PROTECTION);
    $q = "INSERT INTO " . TB_PREFIX . "users (username,password,access,email,timestamp,tribe,act,protect,lastupdate,regtime) VALUES ('$username', '$password', " . USER . ", '$email', $time, $tribe, '$act', $timep, $time, $time)";
    if(mysql_query($q, $this->connection)) {
        return mysql_insert_id($this->connection);
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:54:46.290

```
function register($username, $password, $email, $tribe, $act) {
    $time = time();
    $timep = (time() + PROTECTION);
    if (ctype_alnum($username)) {
      $q = "INSERT INTO " . TB_PREFIX . "users (username,password,access,email,timestamp,tribe,act,protect,lastupdate,regtime) VALUES ('$username', '$password', " . USER . ", '$email', $time, $tribe, '$act', $timep, $time, $time)";
      if(mysql_query($q, $this->connection)) {
          return mysql_insert_id($this->connection);
      } else {
          return false;
      }
    } else {
      return false;
    }
} 
```

# c - 我如何知道这个不寻常角色的价值？里面有数字的方阵

> ID：14292551
> 
> 赞同：0
> 
> 时间：2013-01-12T10:46:41.190
> 
> 标签：c, sockets, character-encoding, special-characters

![在此处输入图像描述](../Images/45fe5fadca1015b6d8ec0b5a77ec144e.png)

上传的图像显示不寻常的字符**（内部写有数字的方阵）。**当我尝试写作时发生这种情况

```
 write(fd, buf,len)'s `buf` variable using fprintf function. 
```

有没有办法解释这些字符？

附加信息：-`write()`有一个套接字 fd 可以写。请告诉我，如果我在这里遗漏任何东西。另外，请重新标记这篇文章，因为我不知道哪个标签适合这篇文章。[编辑]：如果这些字符不清晰可见，请缩放网页（使用 ctrl++）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:33:15.697

它们都是[不可打印的控制字符](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)，框只是打印它们的一种方式。另一种选择是根本不显示它们，但那样你就不会那么容易地了解它们。

有

*   `0x1F`单位分隔符
*   `0x7F`删除
*   `0x01`标题开始
*   `0x1C`文件分隔符

（您已经可以从框中阅读以上所有内容）

由于这些几乎从未在文本中使用，因此您可能不应该将它们视为文本。如果您将它们的含义视为控制字符，它们即使作为控制字符也没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:53:43.693

在十六进制编辑器中打开文件。十六进制编辑器通常以二进制和十六进制值显示每个字符的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:33:08.830

显然，这些是“不可打印”字符（在您当前的语言中，但很可能在所有语言中）。用来`fprintf("%02x, %02x, %02x, %02x", buf[0], buf[1], buf[2], buf[3]);`显示它们的实际价值。

# mysql - Spring数据源bean在控制器中使用时给出空指针异常

> ID：14292555
> 
> 赞同：0
> 
> 时间：2013-01-12T10:47:09.243
> 
> 标签：mysql, spring, nullpointerexception, datasource

我在 applicationContext.xml 中使用 spring 的 BasicDataSource 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"
default-autowire="byType">

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/school" />
        <property name="username" value="root" />
        <property name="password" value="" />
        <property name="initialSize" value="5" />
        <property name="maxActive" value="10" />
    </bean>
</beans> 
```

当我在控制器中使用这个bean时，如下所示：

```
package admin.controller;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import org.apache.commons.dbcp.BasicDataSource;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import javax.inject.*;

@Controller
public class Welcome {

@Inject
BasicDataSource datasource;

private static final String WELCOME_PAGE = "welcome";

@RequestMapping("/")
public String welcome(ModelMap model){

    Connection con=null;
    PreparedStatement stmt =null;
    String testQuery = "INSERT INTO ADMIN(ID,USER_NAME,PASSWORD,FIRST_NAME,LAST_NAME) VALUES(?,?,?,?,?)";
    try {
        con = datasource.getConnection();
        stmt = con.prepareStatement(testQuery);

        stmt.setInt(1, 4);
        stmt.setString(2, "ij");
        stmt.setString(3, "kl");
        stmt.setString(4, "mn");
        stmt.setString(5, "op");

        stmt.execute();

        //con.commit();
    } catch (SQLException e) {
        e.printStackTrace();
    } 
    finally{
            try {
                if(con!=null)
                    con.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
    }
    return WELCOME_PAGE;
}   
} 
```

然后它给了我一个空指针异常： datasource.getConnection();

连接详细信息是 100% 正确的，因为当我在控制器内创建 BasicDatasource 的新实例并使用其设置器方法（例如：datasource.setDriverClassName 等）添加详细信息时，它会连接到数据库并毫无问题地执行查询。但是当我想从应用程序上下文中使用 bean 时，它给了我一个空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:01:37.490

我没有得到空指针异常的原因。但我确信我在绑定的某个地方犯了错误。因为当我删除 @Inject 并为数据源实现 setter 方法时，我没有得到任何其他异常。并且交易成功完成。如果您能指出问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:47:37.043

我遇到了另一个有趣的事实，当我用@Autowired 替换@Inject 时，它工作得很好，我不必编写setter 方法。但是如果我使用@Inject，那么我必须编写一个setter 方法来让它工作。这听起来很奇怪，但在我的情况下似乎是真的。

# c# - 将 C# 转换为 vb.net 错误

> ID：14292557
> 
> 赞同：1
> 
> 时间：2013-01-12T10:47:36.723
> 
> 标签：c#, .net, vb.net

我已经使用工具将 ac# 程序转换为 vb.net 该程序在 c# 中运行良好

在VB我得到这个错误

```
Public member 'get_SymbolList' on type 'ConnectionControlClass' not found."} 
```

在这条线上

```
oList = axTradeIdeasWindowX1.Connection.get_SymbolList(CType(i,Integer)) 
```

在 C#

这条线工作正常

```
oList = axTradeIdeasWindowX1.Connection.get_SymbolList(CType(i,Integer)) 
```

任何想法可能是什么问题。我检查了程序列表中的每一行，遍历了 Objects could not find `get_SymbolList`only found`SymbolList` 是否`get_`是 C# 构造以及是否有 vb.net 等价物

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T14:23:08.977

显然 axTradeIdeasWindowX1 是一个 ActiveX 对象。C# 代码必须`get_`在 SymbolList 属性上使用前缀，因为 C# 语言不支持索引属性。这在 COM 和 VB.NET 中都不是问题。因此，VB.NET 编译器在导入互操作库时并没有像 C# 编译器那样在方法中转换属性。不再有 get_SymbolList() 方法，只有 SymbolList 属性。您可以通过使用对象浏览器查看互操作库来看到这一点。

`get_`因此，只需通过省略前缀来解决您的问题。

# python - python、django、sqlite 的管理员权限

> ID：14292564
> 
> 赞同：0
> 
> 时间：2013-01-12T10:48:12.047
> 
> 标签：python, django, sqlite

我是 python 和初学者的新手。

是否需要管理员权限才能安装和使用 Python、Django、Sqlite.. 我已经安装了所有软件，但不认为我有管理员权限。当我使用命令时

```
syncdb 
```

我得到的结果是 0 个装置。但我无法使用上面的代码创建数据库。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T11:02:15.183

存在`admin`与否在`syncdb`阶段没有影响。

你的数据库已经在那里了吗？如果是，那么 django 中的更改`models`不支持开箱即用的迁移。因此，例如，如果您创建了数据库，然后更改了您现在的`models.py`运行，`syncdb`则不会更改您的模型。

不过，有一个适用于 Django 的可插拔应用程序可以做到这一点，而且效果很好。它被称为[南](http://south.aeracode.org)。

# hadoop - 在hadoop服务器上运行jar作为服务

> ID：14292565
> 
> 赞同：1
> 
> 时间：2013-01-12T10:48:18.673
> 
> 标签：hadoop, ubuntu-10.04

我做了一个罐子

它分析系统日志..为了在 HADOOP 服务器上运行这个 jar，我可以使用像“bin/hadoop jar log.jar”这样的命令行来完成它

但我的问题是我想让这个 jar 在后台作为 Ubuntu 主机上的服务执行。

任何人都可以帮助我如何将 HADOOP jar 作为服务制作，以便它可以像 Ubuntu 机器上的后台服务一样运行.. 每 1 小时运行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:54:01.193

你有几个选择，这里有两个：

*   配置一个[crontab](http://en.wikipedia.org/wiki/Cron)作业以每小时运行一次作业，例如（您需要完全限定 hadoop 的路径和 jar 本身）：

> ```
>  0 * * * *   /usr/lib/hadoop/bin/hadoop jar /path/to/jar/log.jar 
> ```

*   运行[OOZIE](http://oozie.apache.org)服务器并配置协调器以每小时提交作业。比上述建议更努力，但值得一看。

# c++ - C 编程，变量

> ID：14292570
> 
> 赞同：-2
> 
> 时间：2013-01-12T10:48:28.443
> 
> 标签：c++

当我们在类中声明变量然后为这些变量赋值时，例如像这样

```
class c {

    public :

    int x;
    int x2;

    c () {
        x = 0;
        x2 = 0;

        scanf ("%d", &x); and now we're gonna input for example 10
    } 
}; 
```

每次使用类时，我的意思是每次调用构造函数时，x 的值再次变为 0，因为它在构造函数中被初始化为零。但是，如果我们不初始化该值，则会出现错误。

我的问题是，当我们一次又一次地调用构造函数时，我们如何保持变量的值不会变为零？

编辑：

```
void example () {

int i;
scanf ("%d", &i); 
switch (i) {
case 1 : {Object ob1; system ("cls"); menu ();} // this object contains a value like 20 
case 2 : {Object ob2; system ("cls"); menu ();} 
}  

} 
```

对象 1 中还有另一个开关盒，其中包括返回主菜单的选项，现在如果我再次输入 1 则返回对象 1 我看不到值 20，它将为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:53:54.240

每个实例只调用一次构造函数，因此需要担心这一点。由于其构造函数，您永远不会将给定实例的 x 值重置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:53:32.127

您可以将其存储在静态变量中。然后从该静态变量中读取 x 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:57:06.133

您了解类和对象/实例之间的区别吗？类只是对象的“千篇一律”。您不会像这样“调用”构造函数，而是创建类的实例（隐式调用构造函数）：

```
c myObj; 
c anotherObj; 
```

此代码将创建类 c 的两个*实例*，它们都有自己的 x1 和 x2 版本。确实，构造函数在创建时第二次运行`anotherObj`，但它在完全不同的内存上运行。所以`myObj`不会触及 x1 和 x2 in 的值。

**编辑：**类成员函数的要点是它们对名为 this 的隐式附加参数进行操作。您可以想象“构造函数调用”实际上看起来像这样（仅用于说明目的，并不意味着是有效代码）：

```
c* this = malloc(sizeof(c));
constructor(c);
// With "constructor" actually being:

void ctor(c* this) {
    this->x1 = 0;
    this->x2 = 0;
    // ..
} 
```

这也可以在 C 中实现 - 但在 C++ 中，它是隐式发生的，您无需编写这样的代码。你只写`c newObj;`or `c* obj = new c;`。

除此之外：成员变量应该是私有的，并且您将 C 库代码 ( `scanf`) 与 C++ 类混合 -`iostreams`用于 C++ 中的输入/输出。

# java - 简化 Collections.sort 在自定义类型上的实现

> ID：14292571
> 
> 赞同：0
> 
> 时间：2013-01-12T10:48:29.093
> 
> 标签：java, generics, sorting

我需要对我目前使用的工作列表进行排序：

```
List<Job> jobs = new ArrayList<Job>();
Job job0 = new Job("a", 1, Arrays.asList("t0"));
Job job1 = new Job("a", 2, Arrays.asList("t0"));
jobs.add(job0);
jobs.add(job1);
Comparator<Job> comparator = new Comparator<Job>() {
  @Override
  public int compare(Job o1, Job o2) {
    if (o1.getOrder() > o2.getOrder()) {
      return 1;
    }
    return 0;
  }
};
Collections.sort(jobs, comparator); 
```

在哪里：

```
public class Job {
  private String path;
  private List<String> targets;
  private final int order;
  public Job(String path, int order, List<String> targets) {
    this.path = path;
    this.order = order;
    this.targets = targets;
  }
 ...
  public int getOrder() {
    return order;
  }
} 
```

我想简化一下。所以我试过：

```
public class Job implements Comparable<Integer> {
  private String path;
  private List<String> targets;
  private final int order;
  public Job(String path, int order, List<String> targets) {
    this.path = path;
    this.order = order;
    this.targets = targets;
  }
  public int compareTo(Integer o) {
    // TODO Auto-generated method stub
    return 0;
  }
} 
```

和

```
List<Job> jobs = new ArrayList<Job>();
Collections.sort(jobs); 
```

但是得到：

```
Bound mismatch: The generic method sort(List<T>) of type Collections is not applicable for the arguments (List<Job>). The inferred type Job is not a valid substitute for the bounded parameter <T extends Comparable<? super T>> 
```

是否可以避免通过比较器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:51:31.017

你可以这样做：

```
public class Job implements Comparable<Job> { // a job is comparable to another job
  private String path;
  private List<String> targets;
  private final int order;
  public Job(String path, int order, List<String> targets) {
    this.path = path;
    this.order = order;
    this.targets = targets;
  }
  public int compareTo(Job j) {
    return this.order - j.order; // here you specify how you want your jobs sorted
  }
} 
```

# java - 为具有未知值的 SQL MATCH 更正 PreparedStatement

> ID：14292572
> 
> 赞同：0
> 
> 时间：2013-01-12T10:48:38.983
> 
> 标签：java, sql, sqlite

```
String sqlStm = "SELECT * FROM TableName WHERE TableName MATCH '?'";
               pst.setString(1, keyword.getText()); 
```

我正在对我的数据库进行全文搜索。当我使用上面的它不执行 sql 语句。但是，如果我要更改程序并给出一个匹配的值......

```
 String sqlStm = "SELECT * FROM TableName WHERE TableName MATCH 'technology'"; 
```

程序执行。但我希望搜索基于`keyword`JTextfield 中输入的文本。第一行的格式是否正确。确实`MATCH`支持`pst.setString()`。正确的说法应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:49:49.263

*删除参数周围的单引号*，它将参数转换为值。参数 placeolder`?`不应用单引号括起来。

```
String sqlStm = "SELECT * FROM TableName WHERE TableName MATCH ?";
pst.setString(1, keyword.getText()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:06:58.190

这个怎么样？

```
SELECT * FROM TableName WHERE TableName  LIKE '%^technology$%' 
```

或者

```
SELECT * FROM TableName WHERE TableName REGEXP '^\\technology$' 
```

我真的找不到任何说 SQlite`Like`或`regexp`行为与 MySQL 不同的文章，所以......你可以试一试。如果有什么不同，也请分享。

# internet-explorer - 使用 307 重定向 IE 中的 post 请求

> ID：14292576
> 
> 赞同：1
> 
> 时间：2013-01-12T10:48:58.243
> 
> 标签：internet-explorer, .htaccess, http, redirect, post

我对我们心爱的 Internet Explorer 有一个严重的问题。

我有以下重定向：

```
RewriteRule ^add/(.*)/$ /_ucp/moduls/$1/add/add.php [L,R=307] 
```

R=308 导致服务器完全崩溃，不知道为什么（这是htacces文件中的最后一行）

307的定义是

> 与历史上的 302 实现方式不同的是，在重新发出原始请求时，不允许更改请求方法。例如，使用另一个 POST 请求重复的 POST 请求

(http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

**问题：**

我认为定义很清楚，不可能被误解，因为该死的 IE 使用 GET 方法重定向！我所有的帖子数据都丢失了！

我使用 F12 开发人员工具跟踪重定向。

有谁知道如何修复/解决这个问题。我真的不想在我的源代码中使用神秘的 url :(

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:40:11.820

假设您使用的是 apache，2.2 版不支持使用 308 代码进行重定向（支持 307）。但是，apache 2.4**确实**支持使用 308 代码进行重定向（至少 2.4.3 支持）。308 代码[处于实验状态](https://datatracker.ietf.org/doc/html/draft-reschke-http-status-308-07)，因此您目前不太可能看到广泛采用。

根据[这个 MSDN 博客](http://blogs.msdn.com/b/ieinternals/archive/2011/08/19/understanding-the-impact-of-redirect-response-status-codes-on-http-methods-like-head-get-post-and-delete.aspx)，IE 版本 6-10 静默处理 307 重定向。我在 IE 9.0.12 的副本上对此进行了测试，当一个 POST 请求以 307 重定向响应时，位置 URL 被请求一个 POST 请求，就像它应该做的那样。

# java - 如何在android中的以下代码中实现捏缩放

> ID：14292577
> 
> 赞同：0
> 
> 时间：2013-01-12T10:49:03.070
> 
> 标签：java, android, uiimageview, pinchzoom

> **可能重复：**
> [活动中的 Android 捏合和缩放图像](https://stackoverflow.com/questions/13210443/android-pinch-and-zoom-image-in-activity)

我必须在下面的 android 代码中实现捏缩放功能。如果可能，也请提供代码。请提一下，我必须在这个文件中在哪里实现该特定代码。

```
enter code here
 public class ImagedisplaytestActivity extends Activity {
        private ImageView leftArrowImageView;
        private ImageView rightArrowImageView;
        private Gallery gallery;
        public int selectedImagePosition = 0;
        private GalleryImageAdapter galImageAdapter;
        private String bitmapImg = "";
        Bitmap bitmap = null;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            setupUI();
        }

 private void setupUI() {
                Intent i = getIntent();
                Bundle extras=i.getExtras();
                bitmapImg = extras.getString("BitmapImage");
                selectedImagePosition = extras.getInt("Pos");

                leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
                rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);
                gallery = (Gallery) findViewById(R.id.gallery);
                leftArrowImageView.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        if (selectedImagePosition > 0) {
                            --selectedImagePosition;
                        }
                        gallery.setSelection(selectedImagePosition, false);
                    }
                });

                rightArrowImageView.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        if (selectedImagePosition < DetailView.bitmapURL.size() - 1) {
                            ++selectedImagePosition;
                        }
                        gallery.setSelection(selectedImagePosition, false);
                    }
                });

                gallery.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                        selectedImagePosition = pos;
                        if (selectedImagePosition > 0 && selectedImagePosition < DetailView.bitmapURL.size() - 1) {

                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));
                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
                        } else if (selectedImagePosition == 0) {
                        leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                        } else if (selectedImagePosition == DetailView.bitmapURL.size() - 1) {
                            rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_enabled));
                        }

                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                    }
                });

                galImageAdapter = new GalleryImageAdapter(this, DetailView.bitmapURL);
                gallery.setAdapter(galImageAdapter);
                if (DetailView.bitmapURL.size() > 0) {
                    gallery.setSelection(selectedImagePosition, false);
                }
                if (DetailView.bitmapURL.size() == 1) {
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_right_disabled));
                }

            }

            public class GalleryImageAdapter extends BaseAdapter {
                private Activity context;
                private  ImageView imageView;
                private List<String>  plotsImages;
                private ViewHolder holder;
                public GalleryImageAdapter(Activity context, List<String> plotsImages) {
                    this.context = context;
                    this.plotsImages = plotsImages;
                }

                @Override
                public int getCount() {
                    return plotsImages.size();
                }

                @Override
                public Object getItem(int position) {
                    return null;
                }

                @Override
                public long getItemId(int position) {
                    return 0;
                }

                @Override
                public View getView(int position, View convertView, ViewGroup parent) {
                    if (convertView == null) {
                        holder = new ViewHolder();
                        imageView = new ImageView(this.context);
                        imageView.setPadding(3, 3, 3, 3);
                        convertView = imageView;
                        holder.imageView = imageView;
                        convertView.setTag(holder);
                    } else {
                        holder = (ViewHolder) convertView.getTag();
                    }
                    holder.imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                    holder.imageView.setScaleType(ImageView.ScaleType.FIT_XY);

                    try {
                        bitmap = DownloadImage(plotsImages.get(position));
                        holder.imageView.setImageBitmap(bitmap);
                        bitmap = null;
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                            return imageView;
                }

                private class ViewHolder {
                    ImageView imageView;
                }

                 private Bitmap DownloadImage(String URL){
                        Bitmap bitmap = null;
                        try {
                            InputStream in = OpenHttpConnection(URL);
                            bitmap = BitmapFactory.decodeStream(in);
                            in.close();
                        } catch (IOException e1) {
                            e1.printStackTrace();
                        }
                        return bitmap;
                    }

                    private InputStream OpenHttpConnection(String urlString) throws IOException{
                        InputStream in = null;
                        int response = -1;
                        URL url = new URL(urlString);
                        URLConnection conn = url.openConnection();

                        if (!(conn instanceof HttpURLConnection)) {
                            throw new IOException("Not an HTTP connection");
                        }
                        try{
                            HttpURLConnection httpConn = (HttpURLConnection) conn;
                            httpConn.setAllowUserInteraction(false);
                            httpConn.setInstanceFollowRedirects(true);
                            httpConn.setRequestMethod("GET");
                            httpConn.connect();
                            response = httpConn.getResponseCode();
                            if (response == HttpURLConnection.HTTP_OK) {
                                in = httpConn.getInputStream();
                            }
                        }
                        catch (Exception ex){
                        throw new IOException("Error connecting");
                        }
                        return in;
                    }

            }

        } 
```

**任何帮助将不胜感激。谢谢你。**

# ios - 是否有任何终端工具可以连接 iphone 以执行 git 命令

> ID：14292578
> 
> 赞同：0
> 
> 时间：2013-01-12T10:49:15.720
> 
> 标签：ios, git

如何在 mac os 中使用终端连接 iphone，我想使用 git 命令查看存储在 iphone 中的 sha1 值。

# ios - 弹出窗口中的表格视图不滚动

> ID：14292581
> 
> 赞同：4
> 
> 时间：2013-01-12T10:49:26.220
> 
> 标签：ios, uitableview, ios5, ios6, uipopovercontroller

我有下面的代码来显示带有 tableview 的弹出窗口，它工作得很好。

表格视图显示 13 个数字，我可以滚动并查看相同的数字，但是当我在模拟器上释放鼠标触摸时，它会返回顶部。

它不会停留在它显示的行，而是带我回到第 1 到第 10 行。

滚动后如何使其保持在该位置。或以下代码中的任何修复。

提前致谢。

```
- (IBAction)btn:(id)sender {

    if([popoverController isPopoverVisible])
    {
        [popoverController dismissPopoverAnimated:YES];
        return;
    }
    //build our custom popover view
    UIViewController* popoverContent = [[UIViewController alloc]init];
    UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 680)];
    popoverView.backgroundColor = [UIColor blackColor];

    numbers = [[NSMutableArray alloc] initWithObjects:@"1",@"2", @"3",@"4",@"5", @"6",@"7", @"8", @"9",@"10",@"11", @"12",@"13",nil];

    UITableView *tblViewMenu = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 680)];
    tblViewMenu.delegate = self;
    tblViewMenu.dataSource = self;
    tblViewMenu.rowHeight = 32;

    [popoverView addSubview:tblViewMenu];
    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(320, 320);
    popoverController = [[UIPopoverController alloc]
                              initWithContentViewController:popoverContent];

    [popoverController  presentPopoverFromRect:self.btn.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [numbers count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }

    // Configure the cell...
    NSString *color = [numbers objectAtIndex:indexPath.row];
    cell.textLabel.text = color;

    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        NSString *number = [numbers objectAtIndex:indexPath.row];

    NSLog(@"%@",number);

    [popoverController dismissPopoverAnimated:YES];

    } 
```

我想我需要更改以下值：

```
UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 680)];

    UITableView *tblViewMenu = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320,680)]]; 
```

如果我使用

```
UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)]; 
```

然后

```
 UITableView *tblViewMenu = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320,320)]]; 
```

但是当我向下滚动时，它会一直到达顶行。它不会停留在滚动到的同一行中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T11:30:42.690

正确使用自动调整大小！

Popover - 有内容大小

`popoverView`- 它的初始大小应该与popover的内容大小和使用相同 `UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight`

`tblViewMenu`- 它的初始大小应该与其祖先（`popoverView`）的大小相同，再次使用`UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight`

您的表格没有滚动，因为它太大以至于不需要滚动。只有弹出框正在剪裁它。

```
CGSize contentSize = CGSizeMake(320, 320);

UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, contentSize.width, contentSize.height)];
popoverView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

UITableView *tblViewMenu = [[UITableView alloc]initWithFrame:popoverView.bounds];
tblViewMenu.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

popoverContent.contentSizeForViewInPopover = contentSize; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:56:02.280

尝试设置`ContentSize`tableView 的，如下所示：

```
[tblViewMenu setContentSize:CGSizeMake(320,680)]; 
```

另外，我更喜欢使 tableView 的大小动态化。取决于您的 tableView 数据源数组。

**更新**

要使 tableView 动态，请使用以下命令：

```
[tblViewMenu setContentSize:CGSizeMake(320, ([numbers count] * 32))]; 
```

如果你有一个像其他单元格一样高度的标题视图，只需将 1 添加到 [number count]，这将是这样的：

```
[tblViewMenu setContentSize:CGSizeMake(320, (([numbers count] + 1) * 32))]; 
```

# c++ - Kd树：仅存储在叶子中的数据与存储在叶子和节点中的数据

> ID：14292585
> 
> 赞同：8
> 
> 时间：2013-01-12T10:49:32.453
> 
> 标签：c++, computer-science, kdtree

我正在尝试实现 Kd 树以在 C++ 中执行最近邻和近似最近邻搜索。到目前为止，我遇到了最基本的 Kd 树的 2 个版本。

1.  一种，数据存储在节点和叶子中，例如[这里](http://en.wikipedia.org/wiki/K-d_tree)
2.  一种，数据仅存储在叶子中，例如[这里](http://ldots.org/kdtree/)

它们似乎基本相同，具有相同的渐近特性。

我的问题是：**有什么理由选择一个而不是另一个？**

到目前为止，我想出了两个原因：

1.  在节点中存储数据的树也浅了 1 级。
2.  只在叶子中存储数据的树更容易实现`delete data`功能

**在决定制作哪一个之前，我还应该考虑其他一些原因吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T10:41:37.393

您可以**将节点标记为已删除**，并将任何结构更改推迟到下一次树重建。kd-trees 会随着时间的推移而退化，因此您需要频繁地重建树。kd-trees 非常适合不改变的低维数据集，或者您可以轻松负担重建（近似）最优树的地方。

至于实现树，我建议使用简约的结构。我通常*不*使用节点。我使用一组数据对象引用。轴由当前搜索深度定义，无需将其存储在任何地方。左右邻居由数组的二叉搜索树给出。（否则，只需添加一个数组`byte`，它是数据集大小的一半，用于存储您使用的轴）。加载树由专门的 QuickSort 完成。从理论上讲，这是`O(n^2)`最坏的情况，但是使用诸如中值 5 之类的良好启发式算法，您可以获得`O(n log n)`非常可靠且恒定开销最小的情况。

虽然它对于 C/C++ 没有那么多，但在许多其他语言中，您将为管理大量对象付出相当大的代价。A`type*[]`是您能找到的最便宜的数据结构，特别是它不需要大量的管理工作。要将元素标记为已删除，您可以`null`这样做，并在遇到 时搜索双方`null`。对于插入，我首先将它们收集在缓冲区中。并且当修改计数器达到阈值时，重建。

这就是它的全部意义：如果你的树重建起来真的很便宜（就像使用几乎预先排序的数组一样便宜！）那么频繁地重建树并没有害处。对简短的“插入列表”进行线性扫描对 CPU 缓存非常友好。跳过`null`s 也很便宜。

If you want a more dynamic structure, I recommend looking at R*-trees. They are actually desinged to balance on inserts and deletions, and organize the data in a disk-oriented block structure. But even for R-trees, there have been reports that keeping an insertion buffer etc. to postpone structural changes improves performance. And bulk loading in many situations helps a lot, too!

# javascript - 如果语句不起作用jquery

> ID：14292589
> 
> 赞同：0
> 
> 时间：2013-01-12T10:50:00.540
> 
> 标签：javascript, jquery, if-statement, pathname

我有这个网址：

```
csumb/index.php?page=consultanta 
```

我尝试比较 2 个链接，但如果我更改链接并刷新页面，此代码会执行相同的操作。

```
var pathname = window.location.pathname;
var a = "csumb/index.php?page=consultanta";

if(pathname == a) {
    $("body").html("rahat");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:58:17.457

有多个部分`location`（或`window.location`，使用文字参考）：

[https://packagist.org/search/?search_query%5Bquery%5D=symfony](https://packagist.org/search/?search_query%5Bquery%5D=symfony)

`console.log(location)`直接在 Chrome 控制台中使用，它提供了以下属性（以及其他一些东西）：

```
hash: ""
host: "packagist.org"
hostname: "packagist.org"
href: "https://packagist.org/search/?search_query%5Bquery%5D=symfony&page=4"
origin: "https://packagist.org"
pathname: "/search/"
port: ""
protocol: "https:"
search: "?search_query%5Bquery%5D=symfony&page=4" 
```

你真正追求的是：

```
var pathname = location.pathname + location.search;
var a = "/csumb/index.php?page=consultanta";
//       ^ Note the / at the beginning 
```

文件名，如果在 URL 中，将在 中`location.pathname`，因此`index.php`也不需要单独添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:55:39.223

试试这个：

```
var pathname = window.location.pathname;
var search = window.location.search;
var a = "/csumb/index.php?page=consultanta";

if((pathname + search) == a) {
    $("body").html("rahat");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:02:16.840

这不是 jQuery，请将标题编辑为 javascript。if 语句中不使用 jQuery 部分。window.location.pathname 返回类似 /csumb/index.php 的内容，不带参数。所以如果你想用其他参数检查路径名，你需要这样做：

```
var path = window.location.pathname + window.location.search; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T10:53:54.583

您需要使用[===](http://www.w3schools.com/js/js_comparisons.asp)运算符并且需要添加“/”。

你还需要`window.location.search`：

```
var a = "/csumb/index.php?page=consultanta";
var search = window.location.search;
var pathname = window.location.pathname;

if(pathname + search === a) {
    $("body").html("rahat");
} 
```

# java - 有关 Spring MVC 消息转换器的一些信息？

> ID：14292598
> 
> 赞同：0
> 
> 时间：2013-01-12T10:51:14.280
> 
> 标签：java, spring, spring-mvc

我正在研究可从 STS 仪表板下载的 Spring MVC Showcase 示例。

现在我正在尝试了解**消息转换器**部分。

在我看来，我有以下链接：

```
 <li>
                <a id="writeString" class="textLink" href="<c:url value="/messageconverters/string" />">Write a String</a>
            </li> 
```

此链接生成一个对 URL 的 HTTP 请求：**/messageconverters/string**

此请求由我的控制器类的以下方法处理：

```
@RequestMapping(value="/string", method=RequestMethod.GET)
public @ResponseBody String writeString() {
    return "Wrote a string";
} 
```

这个方法只是在 HTTP 响应的 body 字段中返回一个字符串......这很简单

问题是我不明白为什么这个例子在**消息转换器**部分......

是什么将这与消息转换主题联系起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:47:28.463

示例中要注意的主要内容是**@ResponseBody**方法参数注释。

这个注解可以放在一个方法上，并表明返回类型应该直接写入 HTTP 响应体（而不是放在模型中，或者解释为视图名称）。Spring 使用**HttpMessageConverter将返回的对象转换为响应体**

# drupal - Drupal 7 面板内容打印单词“数组”而不是我的字段和正文内容

> ID：14292604
> 
> 赞同：1
> 
> 时间：2013-01-12T10:51:56.900
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming, drupal-panels

我正在使用带有面板的 Drupal 7。当我将内容放入面板时，它只会打印出“数组”一词而不是内容。这似乎发生在我创建的字段以及主体内容中。有谁知道我该如何解决这个问题？提前感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:18:38.250

应用于`render`输出以打印 HTML。

```
print render($variable); 
```

# php - PHP PayPal - 创建发票集成

> ID：14292605
> 
> 赞同：-4
> 
> 时间：2013-01-12T10:52:04.103
> 
> 标签：php, paypal

我正在尝试在跟踪一定时间后向客户提交贝宝发票。如何将位于[https://www.x.com/developers/paypal/documentation-tools/invoicing/integration-guide/InvoiceAPIExamples](https://www.x.com/developers/paypal/documentation-tools/invoicing/integration-guide/InvoiceAPIExamples)的 curl 请求转换 为 php 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:55:10.233

我[的 PayPal PHP 库](http://www.angelleye.com/download-angell-eye-php-class-library-for-paypal/)已经为您完成了这项工作。您所要做的就是打开 CreateAndSendInvoice.php 文件并相应地填写请求参数。

# c++ - CUDA 支持 NVIDIA Tegra 4 处理器？

> ID：14292609
> 
> 赞同：3
> 
> 时间：2013-01-12T10:52:49.273
> 
> 标签：c++, c, cuda, tegra

我找不到任何关于在 Tegra 处理器上使用 CUDA 的信息，尽管它们提供了相当多的 SIMD 内核（~72）。似乎 NVIDIA 目前通过 Tegra 开发套件（基于 Android）将开发工作重点放在 Tegra 上。

所以我的问题是：“是否可以在 Tegra 4 或以前的版本上使用 CUDA（或 OpenCL），如果可以，支持哪个版本？”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T20:29:38.567

我们也被新闻文章弄糊涂了。从那以后，我们了解到以下内容：

根据为 NVIDIA 工作的 SO 用户“harrism”的[这条推文](https://twitter.com/accelereyes/status/288791095603785729)（[也在此处](https://twitter.com/harrism/status/288789137320984578)） ，Tegra 4 不支持 CUDA 。预计未来的 Tegra 版本（与来源相同的推文）。

Tegra 不支持 OpenCL。

Tegra 一直支持 OpenGL ES 2 着色器，这里有一些 Tegra 2 和 Tegra 3[演示，这些着色器](http://accelereyes.com/mobile)来自我们之前在 AccelerEyes 的工作。

不过，我们期待使用我们的 ES 2 着色器在 72 个 GPU 内核上运行我们的东西。很棒的芯片。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T19:58:10.417

正确指出 Tegra 2/3/4 不支持 CUDA。Logan 将是第一个支持 CUDA 和 OpenCL 的。

然而，Nvidia 已经在尝试让人们将 CUDA 与 Tegras 一起使用，目前您可以使用 Tegra 3 和 Nvidia PCIe 显卡。

有一些开发板支持

*   英伟达 Jetson：[http ://www.nvidia.com/object/jetson-automotive-developement-platform.html](http://www.nvidia.com/object/jetson-automotive-developement-platform.html)
*   英伟达凯拉
*   Toradex Apalis：[http ://www.toradex.com/products/apalis-arm-computer-modules/apalis-t30](http://www.toradex.com/products/apalis-arm-computer-modules/apalis-t30)

# jsf - 请求未路由到 JSF Servlet

> ID：14292621
> 
> 赞同：1
> 
> 时间：2013-01-12T10:54:01.967
> 
> 标签：jsf, servlets, jsf-2, url-pattern

我有一个 JSF webapp，它表现出以下行为：
`http://localhost/myapp/`返回 index.xhtml 的原始内容
`http://localhost/myapp/web/`返回空白页
`http://localhost/myapp/web/index.xhtml`返回错误`/index.xhtml Not Found in ExternalContext as a Resource`

webapp的目录结构如下图：

![在此处输入图像描述](../Images/0ea60e547c746b17f76ef7bda0161ed8.png)

web.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
      <display-name>myapp</display-name>
       <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
      </context-param>
       <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
      </servlet>
      <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/web/*</url-pattern>
      </servlet-mapping>

      <session-config>
        <session-timeout>30</session-timeout>
      </session-config>

    <!--   <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
      </welcome-file-list>
     -->  
    </web-app> 
```

我在方法的第一行有一个断点`javax.faces.webapp.FacesServlet.service`

```
public void service(ServletRequest req,
                    ServletResponse resp)
    throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) resp;

    requestStart(request.getRequestURI()); // V3 Probe hook 
```

这个断点永远不会被命中。有没有人能够阐明这里可能出了什么问题，或者我可以从哪里开始调查的一些指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:21:24.923

JSF 会在找到资源之前从请求 URL 中删除自己的 URL 模式。您需要`/index.xhtml`根据错误消息将文件准确地放在 JSF 期望的位置： in `/index.xhtml`. 所以，在`/web`文件夹之外。请注意，您可以继续`/web`在请求 URL 中使用。

另一种方法是仅映射`FacesServlet`on `*.xhtml`。这样您就无需担心虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why)

# java - JAVA 移动设备 - 本地存储数据

> ID：14292622
> 
> 赞同：0
> 
> 时间：2013-01-12T10:54:15.917
> 
> 标签：java, android, mobile, blackberry

在移动设备上本地存储数据集以在 Java 中进一步处理的最佳方法是什么？

数据集将使用 SOAP 进行检索，将包含大约 50 到 100 个“对象”。每个对象就像一个电子邮件线程 - 主要消息后跟几个更新（主要是文本，偶尔是图形）。

对“对象”的预期操作：

*   读
*   添加新更新/向服务器发送更新
*   更改状态/向服务器发送更新

直接对 xml 文件进行操作、实现本地数据结构还是使用某种数据库更好？

目标设备：安卓和黑莓。我想让解决方案尽可能通用，以便更容易重用提到的平台的部分代码。

非常感谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:56:56.517

这取决于你：

如果您想要快速的东西 - 使用[SQLite 数据库](http://developer.android.com/reference/android/database/sqlite/package-summary.html)或将其存储在 XMl 文件中。

如果您想要一些易于实现（但速度较慢）的东西 - 使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

如果您正在考虑使用 SQlite 或 Xml 文件，那么我建议您使用 SQlite 数据库，因为您需要对数据执行此类操作。因此从 xml 文件读取并再次将其写入文件将比 SQLite 数据库慢一点。希望这可以帮助。

# php - php中的preg_replace方法

> ID：14292630
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:55:10.843
> 
> 标签：php, regex, preg-replace

我创建了 preg_replace：

```
$searchTerm = preg_replace('/[^\p{L}\p{N}\s]/u', '', $searchTerm); 
```

但是当我在搜索框中搜索时

```
!@#$%^&*()_+ 
```

它不工作。

我预计当任何人搜索此“！@#$%^&*()_+”时，输出为“未找到结果”。

任何人都可以建议更好的preg_replace。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:30:41.103

如果您尝试将正则表达式与数据库调用相关联，则搜索值的内容将去除非法字符并作为空字符串发送到数据库（不会找到任何结果）：

```
$searchTerm = '!@#$%^&*()_+';
$searchTerm = preg_replace('/[^\p{L}\p{N}\s]/u', '', $searchTerm);

// $searchTerm = '';
// Send this off to DB (which will return false)

if (!$search->search_db($searchTerm)) {
   echo 'No search results!';
} 
```

如果您不希望它接触数据库，则可以将其保留在当前脚本的范围内：

```
if (preg_match('/[^\p{L}\p{N}\s]/u', $searchTerm)) {
   echo 'No search results!';
} 
```

# php - 仅一页从安全 https 重定向到 http

> ID：14292632
> 
> 赞同：3
> 
> 时间：2013-01-12T10:55:22.390
> 
> 标签：php, http, redirect, https, apache2

我有一个页面，如果通过它访问`page.php`，我需要重定向到该页面，否则我的谷歌广告将不会显示。`http``https`

准确地说，我希望发生以下情况：

`https://site.com/page.php?blah=foo?bar=blah`-->`http://site.com/page.php?blah=foo?bar=blah`

到目前为止我已经尝试过：

`RewriteCond %{HTTP_HOST} on`

`RewriteRule ^page\.php$ http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]`

但这不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T11:03:59.707

这也可能是快速复制粘贴

```
if ($_SERVER['HTTPS'] == "on") {
    $url = "http://". $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
    header("Location: $url");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:58:03.653

```
if($_SERVER['SERVER_PORT'] == '443')
{
   header('location:http://url.com');
} 
```

如果安全端口设置为 443 以外的其他端口，这将不起作用，因此您也可以使用

```
$_SERVER['HTTPS'] == 'on' 
```

# python - DAG（有向无环图）动态作业调度器

> ID：14292636
> 
> 赞同：27
> 
> 时间：2013-01-12T10:55:57.693
> 
> 标签：python, scheduling, etl, directed-acyclic-graphs, oozie

我需要管理 ETL 任务的大型工作流，​​其执行取决于时间、数据可用性或外部事件。某些作业在工作流执行期间可能会失败，系统应该能够重新启动失败的工作流分支，而无需等待整个工作流完成执行。

python中是否有任何框架可以处理这个问题？

我看到了几个核心功能：

*   有向无环图
*   执行节点（运行 shell cmd 并等待、记录等）
*   能够在执行期间在父 DAG 中重建子图
*   能够在父图运行时手动执行节点或子图
*   在等待外部事件时暂停图形执行
*   列出作业队列和作业详细信息

类似[Oozie](http://oozie.apache.org)的东西，但更通用，在 python 中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-30T07:48:35.657

1) 你可以试试[dagobah](https://github.com/thieman/dagobah)，如其 github 页面所述：Dagobah 是一个简单的基于依赖的作业调度程序，用 Python 编写。Dagobah 允许您使用 Cron 语法安排定期作业。然后，每个作业按照依赖关系图定义的顺序启动一系列任务（子流程），您可以在 Web 界面中通过单击和拖动轻松绘制。与以下三个相比，这是最轻量级的调度程序项目。

![dagobah 的网页界面](../Images/2e7e530a5ce3973e4e522a11b850fc92.png)

2）在 ETL 任务方面，Spotify 开源的[luigi更侧重于 hadoop 作业，如下所述： Luigi 是一个 Python 模块，可帮助您构建复杂的批处理作业管道。](https://github.com/spotify/luigi)它处理依赖关系解析、工作流管理、可视化等。它还内置了 Hadoop 支持。

![luigi 的网页界面](../Images/ca4aa0bbe766587892b6d07102dc9548.png)

这两个模块都主要用Python编写，并包含Web界面以便于管理。

据我所知，“luigi”没有为作业任务提供调度程序模块，我认为这是 ETL 任务所必需的。但是使用 'luigi' 更容易用 Python 编写 map-reduce 代码，并且每天在 Spotify 上运行的数千个任务都依赖于它。

3) 像 luigi 一样，Pinterest 开源了一个名为[Pinball](https://github.com/pinterest/pinball)的工作流管理器。Pinball 的架构遵循 master-worker（或 master-client 以避免与我们在下面介绍的特殊类型的客户端的命名混淆）范例，其中有状态的中央 master 充当关于无状态客户端的当前系统状态的真实来源。并且它顺利地集成了 hadoop/hive/spark 作业。

![pinball 的网页界面](../Images/e52b2dc197d8fed54d4c54a3e5642f12.png)

4) [Airflow](https://github.com/airbnb/airflow)是 Airbnb 开源的另一个 dag job schedule 项目，它很像 Luigi 和 Pinball。后端建立在 Flask、Celery 等之上。根据[示例作业代码](https://github.com/airbnb/airflow/tree/master/airflow/example_dags)，Airflow 在我身边既强大又易于使用。

![气流的网络界面](../Images/e227c0627a41eca087d1f48f3e39a6b1.png)

最后但同样重要的是，Luigi、Airflow 和 Pinball 可能会得到更广泛的使用。这三个之间有一个很好的比较：http: [//bytepawn.com/luigi-airflow-pinball.html](http://bytepawn.com/luigi-airflow-pinball.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-11T13:54:42.097

有很多这样的；每个人似乎都在写自己的。[https://github.com/common-workflow-language/common-workflow-language/wiki/Existing-Workflow-systems](https://github.com/common-workflow-language/common-workflow-language/wiki/Existing-Workflow-systems)有一个很好的列表。其中包括源自工业界和学术界的系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T13:41:42.877

你看过[鲁弗斯](http://www.ruffus.org.uk/index.html)吗？

我没有这方面的经验，但它似乎做了你清单上的一些项目。它看起来也很容易破解，因此您可以自己实现其他要求。

# jquery - jQuery在gridview鼠标单击上显示项目

> ID：14292644
> 
> 赞同：0
> 
> 时间：2013-01-12T10:57:08.863
> 
> 标签：jquery, asp.net, gridview

我有这个网格视图，它绑定了数据库中找到的所有类别。

```
<asp:GridView ID="gvCategories" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="CategoryId" CssClass="gridview"
                    AlternatingRowStyle-CssClass="even" OnSelectedIndexChanged="gvCategories_SelectedIndexChanged">
                <Columns>
                    <asp:TemplateField ShowHeader="False">
                        <ItemTemplate>
                             <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                             CommandArgument='<%# Eval("CategoryId") %>' CommandName="Select" 
                             Text='<%# Eval("CategoryName") %>'></asp:LinkButton>
                            &nbsp;
                        </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            </asp:GridView> 
```

是否可以（通过 jQuery 或其他任何方式）在鼠标悬停或单击鼠标时显示类别下的所有子类别（来自数据库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:10:04.753

```
<script type="text/javascript">
    $(function () {
        $(".gridViewRow, .gridViewAltRow").hover(
        function () {
            $(this).closest("table").find("tr.gridViewSubCategories").hide();
            var self = this;
            var subCategoriesGridRow = $(this).next("tr.gridViewSubCategories");
            if (subCategoriesGridRow.length == 0) {
                var categoryId = parseInt($(this).find("[data-categoryId]").attr("data-categoryId"));
                $.ajax({
                    url: '<%= ResolveClientUrl("~/WebForm2.aspx/GetSubCategories") %>',
                    type: "post",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data : "{ 'categoryId' : " + categoryId + " }",
                    success: function (data) {
                        var subTable = $("<table class='subCategories'><tr><th>Id</th><th>Name</th></tr></table>");
                        data = data.d;
                        if (data.length) {
                            for (var i = 1; i < data.length; ++i) {
                                var tr = $("<tr ><td>" + data[i].id + "</td><td>" + data[i].name + "</td></tr>");
                                $(subTable).append(tr);
                            }
                        }
                        var gridRow = $("<tr class='gridViewSubCategories'></tr>");
                        var subCatCell = $("<td colspan='2' ></td>");

                        subTable.appendTo(subCatCell);
                        subCatCell.appendTo(gridRow);
                        $(self).after(gridRow);
                    },
                    error: function (aaa, bbb, ccc) {
                    }
                });
            }
            else {
                subCategoriesGridRow.show();
            }
        },
        function () {
            $(this).closest("table").find("tr.gridViewSubCategories").hide();
        });
    });
</script>

<asp:GridView ID="GridView1" runat="server" DataKeyNames="Id" RowStyle-CssClass="gridViewRow"
    AlternatingRowStyle-CssClass="gridViewAltRow" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="Id">
            <ItemTemplate>
                <span data-categoryId='<%# Eval("Id") %>'>
                    <%# Eval("Id") %>
                </span>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Name" HeaderText="Name" />
    </Columns>
</asp:GridView> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GridView1.DataSource = Enumerable.Range(1, 10)
            .Select(id => new {Id = id, Name = Guid.NewGuid().ToString()});
        GridView1.DataBind();
    }
}

[WebMethod]
public static object GetSubCategories(int categoryId)
{
    return Enumerable.Range(categoryId, 10)
        .Select(id => new {id = id, name = id.ToString()})
        .ToList();
} 
```

最好使用一些 jsRender 之类的 javascript 模板引擎。

# javascript - 是否有任何用于执行文件操作的 javascript 引擎

> ID：14292645
> 
> 赞同：0
> 
> 时间：2013-01-12T10:57:08.403
> 
> 标签：javascript, file-io

想知道是否有任何 javascript 引擎可以在文件系统中执行文件操作，例如创建、读取、写入和解析文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:59:46.403

您可以使用[File System API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)，但这适用于您需要自己创建的虚拟沙盒文件系统（通过制作自己的文件或让用户从他们的文件系统中选择它们）。显然你不能直接在浏览器中访问真实的文件系统。

对于 node.js，使用[`fs`模块](http://nodejs.org/api/fs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:02:21.000

Javascript 本身没有文件操作之类的东西。

引擎这个词在这里有点模糊。有几个不同的 javascript 解释器。V8、Spidermonkey、JavaScriptCore 等。这些只实现了 Javascript。

您需要的是一个扩展 - 一个库（通常用 C 编写），它通过解释器将此功能作为 javascript 对象和函数公开到脚本范围中。

node.js 是支持此功能的一套 javascript 扩展的一个很好的例子。它基于 V8 javascript 解释器。

# c# - EntityFramework 避免打开/关闭连接？

> ID：14292649
> 
> 赞同：2
> 
> 时间：2013-01-12T10:57:52.280
> 
> 标签：c#, .net, entity-framework

使用这样的代码时，有什么简单的方法可以避免打开和关闭连接：

```
using (Entities context = new Entities())
                {
                    returnValue = context.ExecuteStoreCommand(sqlStr, param1, param2, param3, param4, param5, param6, param7);
                    context.SaveChanges();
                    return returnValue;
                } 
```

我在需要在大型数据库中运行的不同方法中有很多这样的代码（MySQL 更新。如果它不打开/关闭每个方法之间的连接（使用/SaveChanges）会更快。

也许我必须完全更改代码并将上下文放置为静态成员，然后从所有方法中删除使用？或者有没有简单的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:01:58.697

你应该使用工作单元模式。通过使用工作单元模式，您可以创建对数据库的事务调用。

[工作单位模式](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

# c# - 如何在 C# 中对字符串进行双引号

> ID：14292652
> 
> 赞同：1
> 
> 时间：2013-01-12T10:58:03.927
> 
> 标签：c#

我想产生一个这样的字符串：`"blabla"`

我尝试用单引号将其括起来：`"'blabla'"`，但这会产生`'blabla'`. 如何将字符串用双引号括起来？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T10:59:42.170

我假设（由于问题不清楚，因此假设很大）您希望在字符串中使用双引号。为此，您可以使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)语法。

```
string s = @"""my string"""; 
```

您还可以手动转义双引号：

```
string s = "\"my string\""; 
```

## 其他示例（来自 MSDN）

```
string a = "hello, world";                  // hello, world
string b = @"hello, world";               // hello, world
string c = "hello \t world";               // hello     world
string d = @"hello \t world";               // hello \t world
string e = "Joe said \"Hello\" to me";      // Joe said "Hello" to me
string f = @"Joe said ""Hello"" to me";   // Joe said "Hello" to me
string g = "\\\\server\\share\\file.txt";   // \\server\share\file.txt
string h = @"\\server\share\file.txt";      // \\server\share\file.txt
string i = "one\r\ntwo\r\nthree";
string j = @"one
two
three"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T10:59:30.673

```
string s = "\"blabla\""; 
```

这会将 " 保留在字符串中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T10:59:51.350

试试这个：-

```
 s= "\"" + blabla+ "\""; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T10:59:11.030

```
string mystring = "\"blablabla\""; 
```

应该做的伎俩。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T11:02:33.493

最简单的方法。字符串 str = "\"blabla\"";

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T11:46:34.390

字符串 str = "\"blablabla\""; 或字符串 str = "\"" + blablabla+ "\"";

# php - 如何在 PHP 中调用 XML 数据？

> ID：14292657
> 
> 赞同：-1
> 
> 时间：2013-01-12T10:58:44.960
> 
> 标签：php, xml

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

我尝试通过以下方式调用我的 XML 中的数据。但这对我不起作用。谁能告诉我如何使它工作？

```
<broad>
    <site>
        <title>My Site Name</title>
        <caption>My Site Caption</caption>
        <hostname>www.mydomain.com</hostname>
    </site>
<broad> 
```

我的 PHP 文件是

```
<?php
$xml = simplexml_load_file('settings.xml');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title><?php echo $xml->title; .'|'. $xml->caption; ?></title>
    </head>

    <body>
    </body>
</html> 
```

为什么上述方法不起作用？还有其他比这更容易的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:10:32.220

您需要访问`site`节点：

```
<?php echo (string) $xml->site->title?> 
```

如果有疑问，请使用[`var_dump`](http://php.net/manual/en/function.var-dump.php)：

```
<?php echo '<pre>'; var_dump($xml); echo '</pre>'; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:07:00.257

使用以下内容：

```
<?php echo (string)$xml->site->title .'|'. (string)$xml->site->caption; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:09:04.293

使用 SimpleXML 调试`var_dump()`和`print_r()`

# jira - 附件列表 - JIRA REST API

> ID：14292658
> 
> 赞同：1
> 
> 时间：2013-01-12T10:58:51.230
> 
> 标签：jira

我在这里阅读有关 JIRA 的 REST API：http: [//docs.atlassian.com/jira/REST/latest/#id233354](http://docs.atlassian.com/jira/REST/latest/#id233354)

我可以看到有一些方法可以发布问题的附件，以及通过其 ID 获取有关附件的信息。但是我找不到可以为我提供特定问题的附件列表的电话。

所以我的问题是：JIRA 如何将附件与问题联系起来？如何获取特定问题的附件 ID 列表？

谢谢 ：）

### 编辑

实际上，如果我拨打电话以获取问题信息（完整的问题信息），附件作为一个字段存在。无论如何感谢您阅读:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T12:22:41.143

拨打电话以获取问题信息（完整问题信息）附件作为字段存在。

# android - 运行我的代码后系统运行缓慢

> ID：14292661
> 
> 赞同：0
> 
> 时间：2013-01-12T10:59:07.337
> 
> 标签：android

我正在写一小段代码。但是，运行几次后，系统变得如此缓慢。即使我在主屏幕上并尝试滑动，​​系统也会遇到困难。所以我想我有一些内存泄漏。

代码真的很简单。它有一个数据库，以及一个基于数据库的内容提供者。视图由 2 个列表视图和一个按钮组成。当我按下按钮时，会弹出一个对话框让我输入 2 个字符串。然后字符串被放入数据库，列表之一被强制刷新。当我尝试使用 ddms 查看 VM 堆时，我看到 22k 中的“数据对象”计数。8k 范围内的 2byte 数组和 3k 范围内的 4byte 数组……这似乎很多。谁能给我一些建议？或知道我可以将代码转储给其他人查看的地方...谢谢

# ruby - 在红宝石中将 9999999999999999999999.001 转换为 "9999999999999999999999.001"

> ID：14292668
> 
> 赞同：3
> 
> 时间：2013-01-12T10:59:56.060
> 
> 标签：ruby

如何在红宝石中将 9999999999999999999999.001 转换为“9999999999999999999999.001”

我试过了

```
>> 9999999999999999999999.001.to_s
=> "1.0e+22"

>> "%f" % 9999999999999999999999.001
=> "10000000000000000000000.000000" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:05:23.663

事实是你不能。你写的数字是 22 位，而 ruby​​ 中的浮点数只有 15 位精度。所以当你使用这个变量时，它的一部分值已经像 Float 类一样“丢失”了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:10:22.290

`BigDecimal`从标准库中使用。

```
1.8.7 :005 > require 'bigdecimal'
 => true 
1.8.7 :006 > BigDecimal('9999999999999999999999.001')
 => #<BigDecimal:7fe0cbcead70,'0.9999999999 9999999999 99001E22',36(36)> 
1.8.7 :007 > BigDecimal('9999999999999999999999.001').to_s
 => "0.9999999999999999999999001E22" 
```

当然，这个例子只是说明 BigDecimal 可以处理那么大的数字。无论您最初是从哪里获取您的`9999999999999999999999.001`号码，都需要在`BigDecimal`计算/输入后立即将其输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:16:38.257

你不能这样做。原因很简单：从一开始，数字的值就不会是`9999999999999999999999.001`. 浮点数只有 15 位精度。

但是，您可以使用其他类型来实现您想要的：

```
require 'bigdecimal'
a = BigDecimal("9999999999999999999999.001")
a.to_s("F")
>> "9999999999999999999999.001" 
```

因为`BigDecimal`精度随着更大实数的要求而扩展 - 没有应用限制。

Float的计算速度更快，因为它意味着直接使用处理器的FPU，但也因此受到了精度的限制。

**编辑**特别是对于@izomorphius 和他的论点，只是一个非常短的代码示例：

```
a = "34.101"
b = BigDecimal(a.to_s)
c = b ** 15
c.to_s("F")
>>> 98063348952510709441484.183684987951811295085234607613193907150561501 
```

现在告诉我如何获得最后一个字符串？

# c - MPI 将动态 2D 阵列广播到其他处理器

> ID：14292669
> 
> 赞同：1
> 
> 时间：2013-01-12T11:00:19.610
> 
> 标签：c, arrays, multidimensional-array, mpi

我搜索了很多解释，但我想我无法弄清楚我该怎么做这种情况。我想做这样的事情：使用主处理器，我正在创建一个动态二维数组。然后我想；

1-将此数组发送到其他处理器。并且每个处理器打印这个二维数组 2-将该数组的一部分发送给其他人。每个处理器都将它们的部分打印到屏幕上。

例如; 我有 2D 阵列 11*11 和 4 个处理器。等级 0 是大师。其他人是奴隶。对于第一种情况，我想将所有数组发送到排名 1、排名 2 和排名 3。对于第二种情况，我想将行共享给从站。11/3 = 3。因此排名 1 需要 3 行，排名 2 需要 3 行，排名 3 需要 5 行。

这是我的代码：

```
int processorID;  
int numberOfProcessors;  

int main(int argc, char* argv[]){

    MPI_Init(&argc, &argv);  
    MPI_Comm_size(MPI_COMM_WORLD ,&numberOfProcessors);  
    MPI_Comm_rank(MPI_COMM_WORLD ,&processorID);

    double **array;

    if(MASTER){
        array = (double**) malloc(11*sizeof(double *));
        for(i=0; i<11; i++){
            array[i] =  (double *) malloc(11*sizeof(double));
        }

        for(i=0; i<11; i++){
            for(j=0; j<11; j++){
                array[i][j] = i*j;
            }

        }
    }
    MPI_Bcast(array, 11*11, MPI_DOUBLE, 0, MPI_COMM_WORLD);
    if(SLAVE){
        for(i=0; i<11; i++){
            for(j=0; j<11; j++){
                printf("%f ", array[i][j]);
            }

        }
    }

    MPI_Finalize();  
    return 0;  
} 
```

根据这些链接；[MPI_Bcast 一个动态二维数组](https://stackoverflow.com/questions/5104847/mpi-bcast-a-dynamic-2d-array)；我需要将我的数组创建为；

```
if (MASTER){

    array = (double**) malloc(121*sizeof(double))

        for(i=0; i<11; i++){
            for(j=0; j<11; j++){
                array[i][j] = i*j;  // this is not working.
            }
        }
} 
```

但如果我这样做，我无法初始化数组中的每个成员。内部 for 循环不起作用。我找不到任何方法来解决它。

对于我的第二个问题，我按照此链接[使用 MPI 在 C 中发送二维数组块](https://stackoverflow.com/questions/9269399/sending-blocks-of-2d-array-in-c-using-mpi)。我想我需要改变 if(SLAVE) 的内部。我应该为每个从处理器创建 2D subArrays。我需要使用 MPI_Scatterv。但我无法完全理解。

```
int main() {

    ...
    ...

    MPI_Scatterv() // what must be here?
    if(SLAVE){
        if(processorID = numberOfProcessor-1){
            subArray = (double**) malloc(5*sizeof(double *)); // beacuse number of row for last processor is 5
            for(i=0; i<11; i++){
                array[i] =  (double *) malloc(11*sizeof(double));
            }
        }
        else {
            subArray = (double**) malloc(3*sizeof(double *));
            for(i=0; i<11; i++){
                array[i] =  (double *) malloc(11*sizeof(double));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:10:31.113

您不能使用指针数组（您错误地称之为“二维数组”），因为每个行指针都不能移植到另一个节点的地址空间。

您引用的用于在线性内存分配中创建 2D 数组的代码是完全正确的，您需要做的就是按[行主要顺序](http://en.wikipedia.org/wiki/Row-major_order)对该内存进行索引，以便循环变为：

```
double* array = (double*) malloc(121*sizeof(double)); 
if (MASTER){
    for(i=0; i<11; i++){
        for(j=0; j<11; j++){
            array[j+i*11] = i*j;  // row major indexing here
        }
    }
}

/* Scatter code follows */ 
```

您可以安全地将这种数组分散到多个节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:11:33.747

C 并没有真正的多维数组。我建议将您的值存储在常规的 1D 缓冲区中，然后从 1D 值计算正确的索引。像这样：

```
double* data = (double*)malloc(sizeof(double)*11*11);

// Now, to access data[i][j], simply do:
data[j + i*11] = ...; // this "maps" 2D indices into 1D 
```

这将使您免于使用分层结构的所有麻烦`malloc`，并且可以轻松地将其传递给 MPI API。

# javascript - 如何使用javascript在正文部分插入html内容

> ID：14292670
> 
> 赞同：0
> 
> 时间：2013-01-12T11:00:19.827
> 
> 标签：javascript, jquery

我正在尝试使用 javascipt 在我的 html 文档的正文部分插入字符串。我要插入的字符串也包含一些脚本标签。例如 ：

```
 var str = "<div> some text </div>
             <script src='/Scripts/jquery-1.7.2.js' type='text/javascript'></script>"; 
```

现在，当我使用 jquery 插入上述字符串时，例如：

```
 $('body').html(str); 
```

它将插入字符串并加载 jquery。但是当我使用javascript插入这个字符串时，比如：

```
document.getElementsByTagName('body')[0].innerHTML = str; 
```

这不会在浏览器中加载 jquery 脚本。谁能告诉我如何使用 javascript 实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:15:59.890

问题是，如果您使用 innerHTML 插入脚本，这些脚本将不会被执行。由于安全问题，没有浏览器会这样做。jquery 实现了一种解决方法。您可以在此处找到更多信息和纯 javascript 解决方案：[执行插入 .innerHTML 的 <script> 元素](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:05:03.170

[http://www.jquery4u.com/javascript/dynamically-load-jquery-library-javascript/](http://www.jquery4u.com/javascript/dynamically-load-jquery-library-javascript/)在这里你有一个很好的指南。所以在你的情况下，你可以试试这个：

```
 var head= document.getElementsByTagName('body')[0];
  var script= document.createElement('script');
  script.type= 'text/javascript';
  script.src= '/Scripts/jquery-1.7.2.js';
  head.appendChild(script) 
```

# javascript - 上传前获取图像大小（以字节为单位）

> ID：14292673
> 
> 赞同：0
> 
> 时间：2013-01-12T11:00:36.813
> 
> 标签：javascript, html

Javascript可以获取文件大小（以字节为单位）？

我需要在上传图片之前，了解什么是图片大小，可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:03:57.407

获取`<input type="file">`元素的句柄，然后：

```
var file = fileinput.files && fileinput.files[0];
if( file ) {
     console.log( file.size, file.type );
}
else if( !("files" in fileInput)) {
    // not supported
}
else {
    //No file selected
} 
```

# java - 使用java交换3 * 4矩阵中的列

> ID：14292675
> 
> 赞同：0
> 
> 时间：2013-01-12T11:00:45.060
> 
> 标签：java, arrays, matrix, swap, indexoutofboundsexception

我在 java 中编写了一个代码来交换 3*4 矩阵的列。

```
String[][] a = { { a,t,t,a},
                 { c,k,a,t},
                 { d,a,w,n }
               }; 
```

我想要的输出是：a，t，t，a，t，a，k，c，n，w，a，d。

所以我的循环如下：

```
for(i=0;i<=2;i++) {
    for(j=0;j<=5;j++) {
        if(j<=2) {
            temp=a[i][j+1];
            a[i][j+1]=a[i][j];
            a[i][j]=temp;
        }
        if(j>3) {
            temp=a[i][j-3];
            a[i][j-3]=a[i][j-4];
            a[i][j-4]=temp;
        } else {
            temp=a[i][j-1];
            a[i][j-1]=a[i][j-2];
            a[i][j-2]=temp;
        }
    }
} 
```

错误是：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
at Execute.swapColums(DtTwo.java:69)
at DtTwo.main(DtTwo.java:11) 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:11:08.083

例子：

```
public class Test
{  
   public static void main(String args[])
   {
       String[][] array2d = { 
                       { "a","t","t","a"},
                       { "c","k","a","t"},
                       { "d","a","w","n" }
                     };

       for (int i = 0; i < array2d.length; i++)
       {
           swapCols(array2d[i]);
       }

       print(array2d);
   }

   private static void swapCols(String s[])
   {
       for (int i = 0; i < s.length / 2; i++)
       {

            String temp = s[s.length - 1 - i];
            s[s.length - 1 - i] = s[i];
            s[i] = temp;
       }
   }

   private static void print(String[][] array2d)
   {
       System.out.println(Arrays.deepToString(array2d));
   }
} 
```

输出：

```
[[a, t, t, a], [t, a, k, c], [n, w, a, d]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:17:55.727

你得到 java.lang.ArrayIndexOutOfBoundsException: -1 因为你有 4 列并且你在这里循环了更多的列

```
for(j=0;j<=5;j++) 
```

尝试改变

```
for(j=0;j<4;j++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:45:47.827

您可以使用以下代码：

```
public void test() {
    String[][] a = {
            {"a", "t", "t", "a"},
            {"c", "k", "a", "t"},
            {"d", "a", "w", "n"}
    };

    String tmp;
    for (int i = 0; i < a.length; i++) {
        for (int j = 0; j < a[i].length / 2; j++) {
            tmp = a[i][j];
            a[i][j] = a[i][a.length - j];
            a[i][a.length - j] = tmp;
        }
    }

    for (int i = 0; i < a.length; i++) {
        System.out.print("[");
        for (int j = 0; j < a[i].length; j++) {
            System.out.print(a[i][j] + ",");
        }
        System.out.println("]");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T11:24:03.927

这可能是一个愚蠢的想法，但它可以比现在简化得多，以使其更有效地使用

所以想法是，将一行转换为列表 -> 使其成为 -> 反转字符串 -> 使用拆分方法再次生成数组。

```
String[][] a = {{"a", "t", "t", "a"},
            {"c", "k", "a", "t"},
            {"d", "a", "w", "n"}
        };

        System.out.println(
            new StringBuffer(Arrays.asList(a[1]).
            toString().
            replace("[", "").
            replace("]", "").
            replace(" ", "")).
            reverse().
            toString().
            split(",")); 
```

*结果 = a[1] -> t, a, k, c*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T11:21:01.043

```
public static void swap(int[][] arr, int line, int pos1, int pos2) {
    int temp = arr[line][pos1];
    arr[line][pos1] = arr[line][pos2];
    arr[line][pos2] = temp;
}

public static void main(String args[])
{
   String[][] arr = { 
                   { "a","t","t","a"},
                   { "c","k","a","t"},
                   { "d","a","w","n" }
                 };

    for (i=0; i<3; i++) {
        swap(arr, i, 0, 3);
        swap(arr, i, 1, 2);
    }
} 
```

# ruby - 如何使用 RSpec 存根 Array 实例方法

> ID：14292676
> 
> 赞同：4
> 
> 时间：2013-01-12T11:00:59.163
> 
> 标签：ruby, rspec, rspec2, stub

我在 String 类中有一个实例方法，它调用 Array 实例方法“shuffle”。为了让我使用 RSpec 测试该方法，我想对它进行存根。

```
vowels = %w(a e i o u y)
vowels.shuffle 
```

我试过：

```
Array.stub(:shuffle).and_return(%w(a e i o u y))
[].stub(:shuffle).and_return(%w(a e i o u y)) 
```

但是没有工作:(我在这里遗漏了一些东西？也许是在嘲笑？但是我应该嘲笑什么......

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T11:30:41.643

使用`any_instance`. 例如：

```
describe "any_instance.stub" do
  it "returns the specified value on any instance of the class" do
    Array.any_instance.stub(:shuffle).and_return(%w(a e i o u y))

    o = Array.new
    o.shuffle.should eq(%w(a e i o u y))
  end
end 
```

[来源](https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/method-stubs/stub-on-any-instance-of-a-class)

# enumeration - sevlet 中的枚举

> ID：14292677
> 
> 赞同：1
> 
> 时间：2013-01-12T11:01:05.230
> 
> 标签：enumeration

1.这是我的表单代码：

```
<form method="GET" action="Add">
first-name: <input type="text" name="first-name" value=""/><br/>
last-name: <input type="text" name="last-name" value=""/><br/>
email-id:  <input type="text" name="email" value=""/><br/>
<input type="submit"  name="submit" value="join now"/><br/>
</form> 
```

2.这里是servlet片段：

```
Enumeration<String> en=request.getParameterNames();

    while(en.hasMoreElements()){
        String param=en.nextElement();
        PrintWriter pw=response.getWriter();
        pw.print(param);
        pw.println(request.getParameter(param)); 
```

这是输出：

```
first-namevishal
emaildrunkendeathison@gmail.com
submitjoin now
last-nameanand 
```

为什么不按顺序提取？在 first-name last-name 之后必须来，然后 email 和 submit 必须来，对吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:14:44.220

这不是特定于 servlet 的东西。所有服务器端技术的行为方式与 html 表单数据由键值对组成的方式相同。如果您有任何期望订单到来的逻辑，您可能需要重新审视它。通常，接收数据的顺序没有任何区别，接收的内容更重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:07:09.597

参数存储在 Map（很可能是 HashMap）中，并且不能保证 HshMap 中项目的顺序。也就是说，项目按其键的哈希排序。当您询问参数名称的枚举时，您可能无法按照它们插入地图的顺序返回它们。您不应该在您的 servlet 中依赖此顺序。

[在这个问题](https://stackoverflow.com/questions/2144776/order-of-values-retrieved-from-a-hashmap)中有一些关于 HashMap 中项目的顺序的讨论。

# jquery - 允许用户动态调整内容窗口大小的 JQuery 功能

> ID：14292682
> 
> 赞同：0
> 
> 时间：2013-01-12T11:01:39.407
> 
> 标签：jquery, html

是否有任何 jQuery 插件或功能允许用户单击并拖动窗口以便调整大小？

举一个我想要完成的例子，我想像 Xcode 一样拥有窗口调整大小的功能，当你拖动一个窗口时，另一个窗口也会调整大小。

编辑：当我说窗口时，我的意思是 div，而不是浏览器窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:03:56.547

查看[jQuery UI resizable](http://jqueryui.com/resizable/)，它几乎完全符合您的要求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:04:05.610

查看 jQuery UI[可调整大小](http://jqueryui.com/resizable/)。

你这样称呼它：

```
$(function() {
  $( "#resizable" ).resizable();
}); 
```

这将给出一个称为`resizable`小调整大小句柄的元素。

# c# - ASP.Net C# 中的 IMAP

> ID：14292686
> 
> 赞同：-1
> 
> 时间：2013-01-12T11:02:07.277
> 
> 标签：c#, asp.net

我想通过 C# ASP>Net 中的代码从 gmail 帐户通过 IMAP 服务下载电子邮件。我对此一无所知，并且对这种板形式的开发不熟悉。请指导我并帮助我。任何链接或参考？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:57:10.250

您需要使用不同种类和价格的第三方组件，或者您可以通过套接字编程自己开发。看一眼 ：

*   [http://www.limlabs.com/mail](http://www.limilabs.com/mail)
*   [http://www.afterlogic.com/](http://www.afterlogic.com/)

您还需要在您的 Gmail 帐户上启用 IMAP，以便您可以在应用程序中使用 IMAP 协议发送和接收。要发送电子邮件，您还需要设置 SMTP 配置。

*   [http://support.google.com/mail/bin/answer.py?hl=en&answer=77695](http://support.google.com/mail/bin/answer.py?hl=en&answer=77695)

还可以看看由 asp.net 开发的 webmail 脚本，这将是一个很好的指南！
如果您想使用 API 而不是白手起家，Google 的 Gmail API Reffrence 也是一个很好的指南。看一眼 ：

*   [https://developers.google.com/google-apps/gmail/](https://developers.google.com/google-apps/gmail/)

# arrays - 如何在数组中使用变量

> ID：14292687
> 
> 赞同：0
> 
> 时间：2013-01-12T11:02:07.433
> 
> 标签：arrays, unix, variables, ksh

我尝试在数组变量中使用变量，但它没有按预期工作。

**代码**

```
 ENV2[0]=567
    ENV1[0]=123
    ENV1[1]=789
    if [ $1 -eq 1 ]
    then
    name=ENV1
    echo "${name[0]}"
    echo "${name[1]}"
    else
    name=ENV1
    echo "${name[1]}"
    fi 
```

**输出**：ENV1 而不是“123”，它的打印“ENV1”和第二个回显部分中的空白行。请帮助获得正确的输出，我是初学者。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:46:12.290

`name=ENV1`不会将变量的内容分配`ENV1`给 variable `name`，而是实际的字符串**ENV1**。

*   要将数组复制`ENV1`到`name`，您可以使用以下命令：

    > `name=$ENV1`

    这与`name=${ENV1[0]}`. 将复制数组变量的第一个元素，因为未指定索引。所以这里只考虑索引 0。

*   `ENV1`要分配to的所有值`name`，您应该使用以下命令：

    > `set -A name "${ENV1[@]}"`

    这会将数组变量设置`name`为 的所有元素`ENV1`。

# macos - 如何检查 Java JDK 是否安装在 Mac 上？

> ID：14292698
> 
> 赞同：158
> 
> 时间：2013-01-12T11:03:31.250
> 
> 标签：macos, java

如何检查 Java SDK 是否安装在 Mac 上？

有这个命令行吗？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-01-12T11:05:51.573

`javac -version`在终端会做

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-08-02T21:00:20.873

您可以利用`java_home`helper 二进制文件`OS X`来查找您要查找的内容。

列出已安装 JDK 的所有版本：

```
$ /usr/libexec/java_home -V
Matching Java Virtual Machines (2):
    1.8.0_51, x86_64:   "Java SE 8" /Library/Java/JavaVirtualMachines/jdk1.8.0_51.jdk/Contents/Home
    1.7.0_79, x86_64:   "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home 
```

要请求特定 JDK 版本的 JAVA_HOME 路径，您可以执行以下操作：

```
$ /usr/libexec/java_home -v 1.7
/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home

$ /usr/libexec/java_home -v 1.8
/Library/Java/JavaVirtualMachines/jdk1.8.0_51.jdk/Contents/Home 
```

您可以像这样在脚本中利用上述命令：

```
REQUESTED_JAVA_VERSION="1.7"
if POSSIBLE_JAVA_HOME="$(/usr/libexec/java_home -v $REQUESTED_JAVA_VERSION 2>/dev/null)"; then
    # Do this if you want to export JAVA_HOME
    export JAVA_HOME="$POSSIBLE_JAVA_HOME"
    echo "Java SDK is installed"
else
    echo "Did not find any installed JDK for version $REQUESTED_JAVA_VERSION"
fi 
```

您也许可以执行 if-else 并检查多个不同版本的 java。

如果您更喜欢 XML 输出，java_home 也有一个 -X 选项以 XML 输出。

```
$ /usr/libexec/java_home --help
Usage: java_home [options...]
    Returns the path to a Java home directory from the current user's settings.

Options:
    [-v/--version   <version>]       Filter Java versions in the "JVMVersion" form 1.X(+ or *).
    [-a/--arch      <architecture>]  Filter JVMs matching architecture (i386, x86_64, etc).
    [-d/--datamodel <datamodel>]     Filter JVMs capable of -d32 or -d64
    [-t/--task      <task>]          Use the JVM list for a specific task (Applets, WebStart, BundledApp, JNI, or CommandLine)
    [-F/--failfast]                  Fail when filters return no JVMs, do not continue with default.
    [   --exec      <command> ...]   Execute the $JAVA_HOME/bin/<command> with the remaining arguments.
    [-R/--request]                   Request installation of a Java Runtime if not installed.
    [-X/--xml]                       Print full JVM list and additional data as XML plist.
    [-V/--verbose]                   Print full JVM list with architectures.
    [-h/--help]                      This usage information. 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-12T11:05:51.620

输入终端：

```
which javac 
```

它应该向您显示类似

```
/usr/bin/javac 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-21T02:31:14.177

下面的命令效果很好：

```
javac -version 
```

我还通过导航到我的 Mac 上的 Java 文件夹手动验证

```
/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-24T12:14:55.053

`/usr/bin/java_home`如果未安装 java，则工具返回 1。

所以你可以通过下一种方式检查是否安装了java：

```
/usr/libexec/java_home &> /dev/null && echo "installed" || echo  "not installed" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-21T18:49:11.890

如果你在 Mac OS Big Sur 上，那么你可能有一个搞砸的 java 安装。我找到了有关如何通过本文解决问题的信息： [https ://knasmueller.net/how-to-install-java-openjdk-15-on-macos-big-sur](https://knasmueller.net/how-to-install-java-openjdk-15-on-macos-big-sur)

1.  [在https://jdk.java.net/15/](https://jdk.java.net/15/)上下载 JDK 的 .tar.gz 文件
2.  导航到下载文件夹，然后运行这些命令（移动 .tar.gz 文件，解压并在解压后将其删除）：

```
sudo mv openjdk-15.0.2_osx-x64_bin.tar.gz /Library/Java/JavaVirtualMachines/
cd /Library/Java/JavaVirtualMachines/
sudo tar -xzf openjdk-15.0.2_osx-x64_bin.tar.gz
sudo rm openjdk-15.0.2_osx-x64_bin.tar.gz 
```

注意：它可能是 15.0.3 或更高版本，具体取决于下载日期。

3.  运行`/usr/libexec/java_home -v15`并复制输出
4.  将此行添加到您的`.bash_profile`or`.zshrc`文件中，具体取决于您使用的 shell。您的主目录（`~/.bash_profile`或`~/.zshrc`）中可能只有这些文件之一。

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-15.0.2.jdk/Contents/Home 
```

5.  保存更改并通过运行使其立即生效： `source ~/.bash_profile`或`source ~/.zshrc`
6.  检查java是否工作 - 运行`java -v`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-26T20:31:47.180

只需键入`javac`. 如果已安装，您将获得使用信息，否则只会询问您是否要安装 Java。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-11T18:42:31.060

确保正确定义项目的 JDK 并重新启动 IntelliJ（完全重新启动）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-01T20:02:44.077

*   打开终端。
*   运行命令查看：

    javac-版本

*   您也可以通过转到特定位置然后检查来手动验证。为此，请在 mac 终端中运行以下命令

    cd /库/Java/JavaVirtualMachines/

然后`ls`再次在终端中运行命令。现在您可以看到您的计算机中是否存在 jdk 版本和软件包。

# mysql - 如何从数据库表中找到相似的列名？

> ID：14292704
> 
> 赞同：1
> 
> 时间：2013-01-12T11:04:07.030
> 
> 标签：mysql, sql, select, information-schema

如何从数据库表中找到相似的列名？

例如

一个数据库表

```
1_1  1_2  1_3  5_6  67
    |    |    |    |   
    |    |    |    | 
```

因此，1_1、1_2、1_3、5_6 和 67 是数据库表的列名。我只想检索以 1 开头的列名（1_1、1_2 和 1_3）。我尝试了 sql 查询，但它工作..

**SELECT 1 LIKE '%1%' FROM sheet1;**

它显示了这么短的东西

```
1 LIKE '%1%'
         1
         1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:10:17.300

文档在[这里找到](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)

```
SHOW COLUMNS FROM tbl_name FROM db_name
LIKE '1%' 
```

要获取相应列的内容：

[SQL小提琴](http://www.sqlfiddle.com/#!2/7eefe/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:21:30.693

这可能对你有用

```
SELECT COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME='table' AND TABLE_SCHEMA='database_name' 
```

information_schema 是包含有关所有数据库的元数据的数据库，因此当您需要此类数据时，只需对其进行查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:23:09.137

试试这个：

```
SELECT GROUP_CONCAT(COLUMN_NAME) INTO @s 
FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'database_name' AND TABLE_NAME = 'tableName' AND 
      COLUMN_NAME LIKE '1%';

SET @sql = CONCAT('SELECT ', @s, ' FROM tableName');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# ruby - 运算符 & in ruby

> ID：14292706
> 
> 赞同：1
> 
> 时间：2013-01-12T11:04:34.910
> 
> 标签：ruby

ruby中有一个代码

```
Dir.glob("my_folder/*.rb").each { |r| require_relative r} 
```

我几乎明白了，但我想确定为什么下面的代码不起作用

```
Dir.glob("my_folder/*.rb").each(&:require_relative) 
```

由于错误`NoMethodError: private method require_relative' called for "my_folder/one.rb":String`

这是因为

`Dir.glob("controllers/*.rb").each(&:require_relative)`

等于

`Dir.glob("controllers/*.rb").each{ |r| r.require_relative }`

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:13:19.993

你是对的，它相当于

```
 .each{ |r| r.require_relative} 
```

& 调用`to_proc`一个对象，在这种情况下是一个符号，并`Symbol`实现它并创建一个新的 Proc，该 Proc 对该对象进行调用。

# java - BufferedReader 比 Scanner 有什么好处

> ID：14292709
> 
> 赞同：2
> 
> 时间：2013-01-12T11:04:50.890
> 
> 标签：java, java.util.scanner, bufferedreader

这是关于图中深度优先搜索的代码。谁知道为什么在这段代码中使用了 bufferedReader 类？为什么不使用 nextInt 函数呢？它的特权是什么？是为了加快处理速度吗？谢谢 ：）

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
class Graph
{
int g[][];
int v,e;
int visited[];
void createGraph()throws IOException
{
    int a,b;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    System.out.print("\n Enter Number Of Vertices = ");
    v=Integer.parseInt(br.readLine());
    System.out.print("\n Enter Number Of Edges = ");
    e=Integer.parseInt(br.readLine());  
    g=new int[v+1][v+1];
    for(int i=1;i<=e;i++)
    {
        System.out.print("\n Enter Edge Infomation ");
        System.out.print("\n From =");
        a=Integer.parseInt(br.readLine());
        System.out.print("\n To =");
        b=Integer.parseInt(br.readLine());  
        g[a][b]=g[b][a]=1;
    }
}
void callDFS()
{
    visited = new int[v+1];
    dfs(1);
}   
void dfs(int k)
{
    System.out.print(k + "\t");
    visited[k]=1;
    for(int i=1;i<=v;i++)
    {
        if(g[k][i] !=0 && visited[i]!=1)
        dfs(i);
    }
}
}
class DFS
{
public static void main(String args[])throws IOException
{
    Graph g = new Graph();
    g.createGraph();
    g.callDFS();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:13:48.507

可能在编写此代码时，Scanner 类不存在（实际上 java 1.4 没有 Scanner 类），或者编写此代码的人可能只是更喜欢使用 BufferedReader 的 readLine 方法而不是使用 Scanner.nextLine() 方法，我看不到有关您的问题的其他解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:54:03.403

这是您打算如何使用流的问题。存在用于简单和线程化应用程序的缓冲读取器。这是由于扫描仪缺乏线程安全性。

[我认为您将从Scanner vs. BufferedReader](https://stackoverflow.com/questions/2231369/scanner-vs-bufferedreader)这个问题中获得更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:29:52.520

BufferedReader 更简单（这使得它更高效），但它也是一个更清晰的选择，表明您打算使用 BufferdReader 提供的功能。即`readLine()`是主要的。

简而言之，如果你`BufferedReader`知道它只会读取行。如果您使用`Scanner`它，则意味着您可能会或很多人不会阅读更复杂的内容。

顺便提一句：

```
 Integer.parseInt(br.readLine()) 
```

和

```
 scanner.nextInt(); 
```

不一样，尽管新手开发人员通常会忽略这种区别。出于这个原因，我更喜欢第一个例子。不同之处在于如何处理新行。

# jquery - 克隆的 div 未在 dom 中注册

> ID：14292712
> 
> 赞同：0
> 
> 时间：2013-01-12T11:05:06.530
> 
> 标签：jquery, jquery-ui

我设置了[这个](http://jsfiddle.net/cneeds/HAmHX/2/)和[这个](http://jsfiddle.net/cneeds/HAmHX/3/)小提琴来表明我克隆的“程序窗口”没有得到它注册的放置元素

```
$( ".pg-droppable" ).on( "drop", function(event, ui) { 
```

事件处理函数附件（现在和将来）。

在小提琴中，这奏效了。如果您访问[我的网站](http://www.inandrias.biz/lib/widgetPallet.htm)，您会看到您可以将左侧面板中的任何一个小部件拖放到右侧的“程序窗口”中。但是如果你切换“程序窗口”，克隆，“程序窗口测试”就在它后面，你不能把任何东西放进去。

有人可以向我解释为什么克隆“程序窗口”没有得到上面 .on() 代码注册的可放置元素吗？

这是完整的 widgetPallet 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<link rel = "stylesheet" href = "../styles/InandriasMenus.css" media="screen, projection" type = "text/css">
<link rel = "stylesheet" href = "../styles/inandriasPrograms.css" media="screen, projection" type = "text/css">
<link rel = "stylesheet" href = "../styles/jquery-ui-1.8.22.custom.css" media="screen, projection" type = "text/css">
<link rel = "stylesheet" href = "../styles/jquery.contextMenu.css" type = "text/css" />
<link rel = "stylesheet" href = "../styles/jquery.ui.button.css" type = "text/css" />
<link rel = "stylesheet" href = "../styles/jquery.ui.autocomplete.css" type = "text/css" />
<!-- <script src="http://www.inandrias.com/testbiz/inandrias.biz/javascripts/jquery.js" type="text/javascript"></script> -->
<!-- This loads the latest version in the 1\. series -->
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> -->
<!-- This loads the latest version in the 1.7 series -->
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> -->
<!-- This loads the 1.7.2 version. Best solution for production environment
        but should be set to the latest version when going into production -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<!-- This saves the loaded version or uses the save in the event googleapis is down -->
<script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>  

<script src="../javascripts/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>

<!-- These scripts are for Amend/Refresh menu functions -->
<script src="../javascripts/jquery.ui.dialog.js" type="text/javascript"></script>
<script src="../javascripts/jquery.ui.autocomplete.js" type="text/javascript"></script>
<script src="../javascripts/jquery.ui.button.js" type="text/javascript"></script>
<script src="../javascripts/jquery.ui.combobox.js" type="text/javascript"></script>
<script src="../javascripts/jquery.contextMenu.js" type="text/javascript"></script>
<script src="../javascripts/ajaxLogtail.js" type="text/javascript"></script>

<style>
 .pg-draggable { display:block; color: #3399FF; border-radius:4px; border:1px solid #ACE; font-size:13px; padding:5px 1px 5px 3px; margin:0 5px 5px; z-index: 1000; }
</style>

<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript"> 
  <!-- 

  function documentLoad() {
    document.getElementById('programWindow').style.display="block";
    $('#widgets').show();
    $('#programWindow').clone().attr('id', 'programWindow' + 'test').appendTo('#menudiv').show();
  }

   $(function() {
    $( ".pg-draggable" ).draggable({
        helper: 'clone', 
        revert: 'invalid', 
        cancel: null, 
        opacity: 0.8, 
        scroll: true
    });
    $( ".pg-droppable" ).droppable({
        accept: ".pg-draggable", 
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active"
    });

    $( ".pg-droppable" ).on( "drop", function(event, ui) {
            alert($( this ).attr( "id" ));
            $draggedItem = ui.draggable.clone();
            $draggedItem.insertAfter( $(this) );
    });

   });

  --> 
</SCRIPT> 

</head>

<body onload="javascript: documentLoad()">
<div id="menudiv">  <button onclick="$('#programWindow').toggle();">Toggle program window</button></div>
<div id="programWindow" class="programWindow">

<table style="display: inline-block; float: left;">
<tbody>
<tr>
<td class="NOTpg-droppable" id="dropCellCount001">
<table>
<tbody>
<tr>
<td class="pg-droppable" id="dropCellCount002">
<label for="Insurer">Insurer</label>
<input id="Insurer" name="Insurer" title="Select the Insurer on this policy" tabindex="1" readonly="readonly" autocomplete="off" placeholder="Insurer" maxlength="10" autofocus="" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount003" valign="bottom">
<label for="SelectInsurer">&nbsp;</label>
<br>
<a href="#" id="Insurer_1" class="selectBttnA" name="Insurers"><span>&nbsp;</span></a>
</td>
<td class="pg-droppable" id="dropCellCount004" style="text-align:right; line-height: 15px;" valign="bottom">
<label for="Policy<br ></label>number">Policy<br>number</label>
</td>
<td class="pg-droppable" id="dropCellCount005" colspan="2" valign="bottom">
<input id="PolicyNumber" onfocus="enableInput('PolicyNumber')" onblur="disableInput('PolicyNumber')" class="w140" name="PolicyNumber" title="Lead Insurer's policy number" tabindex="2" autocomplete="off" placeholder="Policy number" maxlength="20" style="text-transform: uppercase;" type="text">
</td>
</tr>
<tr>
<td class="pg-droppable" id="dropCellCount006">
<label for="Product">Product</label>
<input id="Product" name="Product" title="Select this policy's Product" tabindex="3" readonly="readonly" autocomplete="off" placeholder="Product" maxlength="10" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount007" valign="bottom">
<label for="SelectProduct">&nbsp;</label>
<br>
<a href="#" id="Product_1" class="selectBttnA" data="ICode #Insurer" name="Products"><span>&nbsp;</span></a>
</td>
<td class="pg-droppable" id="dropCellCount008" style="text-align:right; line-height: 15px;" valign="bottom">
<label for="Pay<br ></label>method">Pay<br>method</label>
</td>
<td class="pg-droppable" id="dropCellCount009" valign="bottom">
<input id="PayMethod" name="PayMethod" title="Select this policy's default pay method" tabindex="4" readonly="readonly" autocomplete="off" placeholder="Pay method" maxlength="3" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount010" valign="bottom">
<label for="SelectPay<br ></label>method">&nbsp;</label>
<br>
<a href="#" id="PayMethod_1" class="selectBttnA" name="PayMethods"><span>&nbsp;</span></a>
</td>
</tr>
<tr>
<td class="pg-droppable" id="dropCellCount011" colspan="3">
<hr>
</td>
</tr>
<tr>
<td class="pg-droppable" id="dropCellCount012">
<label for="Client">Client</label>
<input id="Client" name="Client" title="Select the policy's Client" tabindex="5" readonly="readonly" autocomplete="off" placeholder="Client code" maxlength="20" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount013" valign="bottom">
<label for="PersonalClientsClient">Personal&nbsp;&nbsp;</label>
<br>
<a href="#" id="Client_1" class="selectBttnA" name="PersonalClients"><span>&nbsp;</span></a>
</td>
<td class="pg-droppable padbot3" id="dropCellCount014" valign="bottom">
<label for="CommercialClientsClient">Commercial&nbsp;&nbsp;</label>
<br>
<a href="#" id="Client_1" class="selectBttnA" name="CommercialClients"><span>&nbsp;</span></a>
</td>
<td class="pg-droppable padbot3" id="dropCellCount015" valign="bottom">
<label for="ClientsClient">Filter&nbsp;&nbsp;</label>
<br>
<a href="#" id="Client_1" class="selectBttnA filter" name="Clients"><span>&nbsp;</span></a>
</td>
</tr>
<tr></tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td class="pg-droppable" id="dropCellCount016">
<label for="Insured">Insured</label>
<input id="ClientName" class="width350" name="ClientName" title="Enter the insured's name" tabindex="6" readonly="readonly" autocomplete="off" placeholder="Insured's name" type="text">
</td>
</tr>
<tr>
<td class="pg-droppable" id="dropCellCount017" colspan="1">
<hr>
</td>
</tr>
<tr></tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td class="pg-droppable" id="dropCellCount018" valign="bottom">
<span class="textColor">Policy dates</span>
</td>
<td class="pg-droppable" id="dropCellCount019">
<label for="Inception">Inception</label>
<input id="Inception" class="datepicker hasDatepicker" name="Inception" title="Select the policy's inception date" tabindex="7" readonly="readonly" autocomplete="off" placeholder="Inception" maxlength="10" type="text">
</td>
<td class="pg-droppable" id="dropCellCount020">
<label for="Next renewal">Next renewal</label>
<input id="NextRenewal" class="datepicker hasDatepicker" name="NextRenewal" title="Select the policy's next renewal date" tabindex="8" readonly="readonly" autocomplete="off" placeholder="Renewal" maxlength="10" type="text">
</td>
</tr>
<tr></tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td class="pg-droppable" id="dropCellCount021">
<label for="Notes">Notes</label>
<input id="notes" class="width350" name="notes" title="Annotate the new policy as required" tabindex="9" readonly="readonly" autocomplete="off" placeholder="Policy note" type="text">
</td>
</tr>
<tr></tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<table style="display: inline-block;">
<tbody>
<tr>
<td class="NOTpg-droppable" id="dropCellCount022">
<table>
<tbody>
<tr id="AgentClone-1">
<td class="pg-droppable" id="dropCellCount023">
<label for="Agent">Agent</label>
<input id="Agent-1" class="multiLine" name="Agent-1" title="Select the Agents for this policy (right-click the button to remove an Agent from the list)" tabindex="10" readonly="readonly" autocomplete="off" placeholder="Agent" maxlength="6" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount024" valign="bottom">
<label for="SelectAgent">&nbsp;</label>
<br>
<a href="#" id="Agent-1_1" class="selectBttnA" data-selectname="Agent" name="AccountExecutives"><span>&nbsp;</span></a>
</td>
<td class="pg-droppable" id="dropCellCount025" style="text-align:right; line-height: 15px;" valign="bottom">
<label for="Agent's<br ></label>commission %">Agent's<br>commission %</label>
</td>
<td class="pg-droppable" id="dropCellCount026" valign="bottom">
<input id="AEcommPerc-1" name="AEcommPerc-1" title="Leave the Agent's commission % for this policy empty to use the default commission %" tabindex="11" autocomplete="off" placeholder="Agent's %" maxlength="5" style="Currency" type="text">
</td>
<td class="pg-droppable padbot3" id="dropCellCount027" valign="bottom">
<label for="SelectAgent's<br ></label>commission %">&nbsp;</label>
<br>
<a href="#" id="AEcommPerc-1_1" class="" data="AEcode=Agent-1" name="AccountExecutives: AEcommPerc"><span>&nbsp;</span></a>
</td>
</tr>
<tr>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>

</div>

<!-- Program generator widgets -->

   <fieldset id="widgets" class="menuAbuttons">
    <input class="pg-draggable" type="text" placeholder="Input field" readonly="readonly" title="Drag this onto the program window to insert a new input field">
    <a href="#" class="menuA pg-draggable" name="level02" title="Drag this onto the program window to insert a new select button"><span>Select button</span></a>
   </fieldset>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:06:47.833

快速的解决方案是更换

```
$( ".pg-droppable" ).on( "drop", function(event, ui) { 
```

和

```
$(document).on("drop", ".pg-droppable", function(event, ui) { // replace document with more precise if available 
```

`on`不仅仅像这样工作`live`：您必须在将存在并成为目标父级的元素上设置委托。

# jquery - 如何将列表项从一个列表移动到另一个列表？

> ID：14292713
> 
> 赞同：1
> 
> 时间：2013-01-12T11:05:11.413
> 
> 标签：jquery, listview, jquery-mobile

我正在使用 jQuery Mobile，一旦单击此列表中的链接：

```
<div id="scroller">
    <div class="trans">
        <ul id="thelist" data-corners= "false" data-role="listview">
             <div class = "theListItem" data-role="collapsible-set" data-collapsed="false">
                 <li><a class= "left" data-inset="true" data-transition="pop" href="YesNoMaybe.html"><h4>Think Coffee</h4><h3>$3.50</h3></a></li>
                 <li><a class= "left" data-inset="true" data-transition="pop" href="YesNoMaybe.html"><h4>Think Coffeadsf dsadsf ads faf adsf adsf adsf sadf asdf adsfadsfadsfadsfadsf sadfasdfe</h4><h3>$3.50</h3></a></li>
                 <li><a class= "left" data-inset="true" data-transition="pop" href="YesNoMaybe.html"><h4>sup Coffee</h4><h3>$3.50</h3></a></li>
             </div>
         </ul>
    </div>
</div> 
```

`<h4>`如果and`<h3>`文本替换此列表中的文本，我会很高兴：

```
<ul id="thelist" data-corners= "false" data-role="listview">
    <div class = "theListItem" data-role="collapsible-set" data-collapsed="false">
        <li class="purchase" ><a data-inset="true"  href="#"><h4>Think Coffee</h4><h3>$3.50</h3></a></li>               
    </div>
</ul> 
```

我试过这个：

```
$('#transPage').live('pageinit', function() {
$('a').click(function(){
    var $move = $(this).closest('li').appendTo("#YesNoMaybePage .theListItem");
  });
}); 
```

而且一无所获。这些列表位于不同的页面上。所有建议都非常受欢迎。感谢世界。我欠你很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:48:26.040

沿着这些思路尝试一些东西。

```
$('#transPage').on('pageinit', function() {
  $('a').click(function(){
    var $h4 = $(this).find('h4').text(); // select the text of h4
    $('.purchase h4').text($h4);         // insert the text in the target

    var $h3 = $(this).find('h3').text();
    $('.purchase h3').text($h3);
  });
}); 
```

我在 jsFiddle 上对其进行了测试，它可以工作。[http://jsfiddle.net/3JWFJ/](http://jsfiddle.net/3JWFJ/)

# cordova - 如何使用phonegap 2.3退出window phone 8中的应用程序

> ID：14292714
> 
> 赞同：3
> 
> 时间：2013-01-12T11:05:11.403
> 
> 标签：cordova, windows-phone-8

我的问题是如何使用phonegap 2.3 退出window phone 8 中的应用程序。
我使用了“navigatior.app.exit()”，但它显示“navigatior.app”未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T09:41:25.713

```
 protected IsolatedStorageSettings UserSettings
    {
        get
        {
            return IsolatedStorageSettings.ApplicationSettings;
        }
    }
    void OnAppExit(object sender, EventArgs e)
    {
        UserSettings.Remove("sessionStorage");
        UserSettings.Save();
    }
    private void Page_BackKeyPress(object sender, CancelEventArgs e)
    {
        if (_browserHistoryLength > 1)
        {
            _phoneGapView.Browser.InvokeScript("eval", "history.go(-1)");
            _browserHistoryLength -= 2;
            e.Cancel = true;
        }
        else
        {
            //to exit app
            Application.Current.Exit += new EventHandler(OnAppExit);
           }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T20:18:57.907

我想我找到了一个不需要本机黑客的解决方案..

如果您有一个从 page1.html 到 page2.html 的 Phonegap/cordova 应用程序，然后跟随返回 page1.html 的链接，则标准后退按钮行为不会退出应用程序。

第 1 页 >> 第 2 页 >> 第 1 页 — Windows Phone 将带您到第 2 页，而不是退出应用程序。这是预期的行为，但它的记录有点差..

无论如何，我搜索了很长时间，但没有找到适合我的修复程序..

[差异友好的人会看到包含此​​修复的提交](https://github.com/mclear/NFC_Ring_Control/commit/192f1b6224190fdd6364322981c33ec7df2049bd)

我如何解决这个问题的 TLDR 是使用 JS 值来跟踪我在哪个页面上，如果我在索引页面上我重置历史记录然后我允许本机后退按钮功能触发..

page1.html中的IE你可以有..

```
var currentPage = "index"; 
```

然后在你的 app.deviceready 函数中包含..

```
if(currentPage == "index"){
  history.go(-(history.length-9999));
  document.addEventListener("backbutton", handleBack, true);
}else{
   document.addEventListener("backbutton", handleBack,
false);
}
function handleBack(){
  // handle other logic here such as handling the back events from page2 to page1..
} 
```

这里真正的魔力是 history.go(-(history.length-9999)) 它基本上告诉历史堆栈重置。addEventListener 上的 true 语句也允许触发原始注册的事件（本机后退按钮）..

无论如何试一试，让我知道它是否适合你。

[资源](http://mclear.co.uk/2014/01/23/cordova-windows-phone-exit-application/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-30T09:32:37.187

**如果插件不是由 Cordova 框架定义的，则**Navigator.app.exit()将不起作用。**您可能必须为 Exit 方法编写自己的插件才能使其工作。作为一种解决方法，您的后键硬件事件可以在 Cordova.xaml.cs 中处理，为了退出您的应用程序，您可以编写 ****

 **```
Application.Current.Terminate(); 
```

**它将在按下硬件后退按钮时退出您的应用程序。****

# xcode - 为什么我的 OSX 10.7+ 应用程序在 XCode 强制退出时会泄漏内存，即使所有智能指针垃圾收集成功？

> ID：14292716
> 
> 赞同：0
> 
> 时间：2013-01-12T11:05:20.603
> 
> 标签：xcode, macos, memory-leaks, osx-lion

在 XCode 中开发框架时，我遇到了一个不寻常的错误，即每当 XCode 通过“停止”按钮强制退出时，我的应用程序就会泄漏内存。通过仔细使用[智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)，我确定我的框架创建的所有动态内存都已成功从堆中进行垃圾收集。堆栈上的所有类型都有有效的析构函数。

挂断应用程序的那一行是*main() 末尾的*空引用。据我所知，在那之后没有分配内存，也没有办法让内存泄漏。收到 SIGABRT 信号后，我会点击“停止”，我的错误构建将退出。与一些分析器的检查显示我的 RAM 被吸入稀薄的空气中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:05:20.603

关键是在强制退出后重新运行（相同的构建）时弹出的 OSX Lion 的有用窗口。它说的是“你想尝试恢复这个应用程序上次强制退出的窗口吗？”

经过一番挖掘，我发现我的新操作系统升级 (Lion) 已经通过其闪亮的新“恢复 Windows”功能缓存了我的故障应用程序的最后状态。无论我是否恢复了应用程序，状态缓存使用的内存都在堆积。我[把它关掉了](http://www.cultofmac.com/148775/stop-the-restore-windows-feature-three-different-ways-os-x-tips/)，现在我没有任何内存泄漏......现在。

我不确定为什么 OSX 会为我的每个构建创建一个新的状态表示。对于我的 /Applications 目录中的其他应用程序，似乎只有一个缓存状态（对于在应用程序退出/强制退出时打开的每个窗口）。但是，似乎正在为 XCode 中的每个构建创建一个新状态。这可能与在 XCode 中标识单个构建的方式有关，**或者我可能对整个 OT 完全错误。**

# android - 在 Android 和 JSON 中解析时出现 NumberFormatException。字符串 --> 双

> ID：14292721
> 
> 赞同：0
> 
> 时间：2013-01-12T11:06:15.130
> 
> 标签：android, json, string, parsing, double

我正在为 android 编写一个应用程序，该应用程序应该从 JSON 文档中获取坐标，将此字符串转换为双精度，然后使用此双精度在谷歌地图上创建叠加层。

但我得到一个名为 NumberFormatException 的异常。

```
 public class LagerActivity extends Activity {

private static String url = "http://agent.nocrew.org/api/json/1.0/searchStore.json?limit=500";

static final String TAG_ITEMS = "items";
static final String TAG_LAT = "lat";
static final String TAG_LNG = "lng";

private GoogleMap mMap;
private LocationManager locationManager;

JSONArray items = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_lager);
    mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();

    // Creating JSON Parser instance
    JSONparser jParser = new JSONparser();
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        items = json.getJSONArray(TAG_ITEMS);
        // looping through All Contacts
        for (int i = 0; i < items.length(); i++) {
            JSONObject c = items.getJSONObject(i);

            // Storing each json item in variable
            String lat = c.getString(TAG_LAT);
            String lng = c.getString(TAG_LNG);

            // lat = lat.replace(",", ".");
            // lng = lng.replace(",", ".");

            // Log.e(lat, lng);

            double lati = Double.parseDouble(lat);

            Log.d(Double.toString(lati), " ");

            // LatLng point = new LatLng(Double.parseDouble(lat),
            // Double.parseDouble(lng));
                // mMap.addMarker(new MarkerOptions().position(point)
            // .title("Karls räkor & hund")
            // .snippet("blaha, ehehe"));

        }

    } catch (JSONException e) {
        e.printStackTrace();
    }

}

    } 
```

这是我的日志：

```
 01-11 18:10:23.294: W/dalvikvm(22718): threadid=1: thread exiting with uncaught         exception (group=0x40e86930)
    01-11 18:10:23.294: E/AndroidRuntime(22718): FATAL EXCEPTION: main
    01-11 18:10:23.294: E/AndroidRuntime(22718): java.lang.RuntimeException: Unable to  start activity               ComponentInfo{com.example.checkmypint/com.example.checkmypint.LagerActivity}:    java.lang.NumberFormatException: Invalid double: ""
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at         android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at   android.app.ActivityThread.access$600(ActivityThread.java:141)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.os.Handler.dispatchMessage(Handler.java:99)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.os.Looper.loop(Looper.java:137)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.app.ActivityThread.main(ActivityThread.java:5039)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at java.lang.reflect.Method.invokeNative(Native Method)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at java.lang.reflect.Method.invoke(Method.java:511)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at dalvik.system.NativeStart.main(Native Method)
    01-11 18:10:23.294: E/AndroidRuntime(22718): Caused by: java.lang.NumberFormatException: Invalid double: ""
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at java.lang.StringToReal.invalidReal(StringToReal.java:63)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at java.lang.StringToReal.parseDouble(StringToReal.java:248)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at java.lang.Double.parseDouble(Double.java:295)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at com.example.checkmypint.LagerActivity.onCreate(LagerActivity.java:65)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.app.Activity.performCreate(Activity.java:5104)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    01-11 18:10:23.294: E/AndroidRuntime(22718):    ... 11 more 
```

有人有什么想法吗？logcat 告诉我我有来自 JSON 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:30:38.090

例外是告诉您*到底*出了什么问题：

```
NumberFormatException：无效的双精度：“”
```

您正在尝试`Double.parseDouble`在 string 上使用`""`。那失败了。您需要检查`""`案例：

```
String lat = c.getString(TAG_LAT);
double lati;

if (lat == null || lat.length == 0) {
    lati = /* use whatever default you want to use here */;
}
else {
    double lati = Double.parseDouble(lat);
} 
```

...和类似的`lng`，大概。

*无论如何*，您都希望在某个级别捕获并处理异常（以防传入的 JSON 确实无效`lat: "foo"`或类似），但是由于显然输入数据有时具有空白`lat`或`lng`，这不再是例外情况，因此您可以使用内联处理它`if`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:10:24.493

看起来您没有检查**(null)**条件，在这里您解析为 null 的 String 值，异常显示它无法将 null String 解析为 Double ..所以，您必须在解析之前检查**null**条件加倍..检查一下，您的问题就解决了...享受..:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:13:26.467

您需要处理空的 lat 值。我看到 JSON 返回中有这样的数据：

```
{
    "address": "Breared, Vrångagatan 5",
    "city": "Varberg",
    "county": "Halland",
    "county_id": 3,
    "lat": "",
    "lng": "",
    "id": 1331,
    "sysid": 1310
}, 
```

所以这段代码抛出异常：

```
double lati = Double.parseDouble(lat); 
```

# php - 数组长度计数不匹配

> ID：14292722
> 
> 赞同：0
> 
> 时间：2013-01-12T11:06:14.760
> 
> 标签：php, arrays

当我设置一个全局数组时

```
 $items[$users[$clientID]['room']] = array("seat" => $seat, "item_id" => $q[1], "room" => $users[$clientID]['room']); 
```

这是

```
 $items[4] = array("seat" => 20, "item_id" => 10, "room" => 4); 
```

但是当我数一数时，它告诉 $items[4] 的长度是 3？它应该只计算 1，因为我只有“1”项。

```
for ( $i=0;$i<count($items[$users[$clientID]['room']]);$i++):
    //something 
endfor;

print_r($items[$users[$clientID]['room']]); 
```

输出：

```
Array
( 
    [seat] => 43
    [item_id] => 46
    [room] => 5 
)
 COUNT 3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:10:04.287

您已将 $items[$users[$clientID]['room']] 定义为一个数组：但是一个包含三个项目的数组 - 座位、item_id 和房间 - 您正在计算这些单独的数组项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:14:26.497

`$items[$users[$clientID]['room']]`是一个数组并`count()`返回数组中的任何元素，如果要计数的值不是数组，它将返回 1。有关`count`函数的更多信息，请参见此链接。

[计数函数 - PHP](http://php.net/manual/en/function.count.php)

# hibernate - 使用 HQL 限制集合中的项目

> ID：14292724
> 
> 赞同：2
> 
> 时间：2013-01-12T11:06:23.213
> 
> 标签：hibernate, hql

在我的模型中，我有两个实体：Person 和 Puppy（为了简化它:)）。它们之间存在一对多关系，因此每个人都有一组小狗。

现在想编写 HQL 查询，它将列出所有名为“John”的人，但也将小狗限制为 2 个月以上的人。

我的第一次尝试是这样的：

```
SELECT p FROM Person p
JOIN FETCH p.puppies pu
WHERE p.name = 'John'
AND pu.age > 2 
```

但它不起作用，因为这个查询只选择那些至少有一只超过两个月的小狗的人，而不是那些只有更年轻的人​​。我也想看到他们只是用空的小狗名单。

实际上，我想实现类似（伪代码）：

```
SELECT p FROM Person p
JOIN FETCH p.puppies pu HAVING (pu.age > 2 )
WHERE p.name = 'John' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:19:58.097

我设法使用 [休眠过滤器解决了我的问题](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#objectstate-filters)

首先我必须定义我的过滤器：

```
@Entity
@FilterDef(name="olderThan", parameters=@ParamDef( name="months", type="integer" ) )
public class Person{
  @OneToMany
  @Filter(name="olderThan", condition="age > :months")
  private List<Puppy> puppies;
} 
```

然后在执行查询过滤器之前必须启用：

```
public class PersonRepository{
  @PersistenceContext
  private EntityManager em;

  public List<Person> findPeopleWithPoppiesLimitedToOlderThan(int months){
    em.unwrap(Session.class).enableFilter("olderThan").setParameter("months", months);
    return em.createQuery("SELECT p FROM Person LEFT JOIN FETCH p.puppies WHERE p.name = 'John'", Person.class).getResultList();
  }
} 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:08:14.083

[HQL 支持各种连接](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html#queryhql-joins)。因此，您可以像这样使用左（外）连接：

```
FROM Person p
LEFT OUTER JOIN p.puppies pu
WHERE p.name = 'John'
AND pu.age > 2 
```

这也应该给你所有没有小狗的约翰。你说“......但不是那些只有更年轻的人​​”。不是很明白。如果明确声明，您为什么要看到那些有更年轻的小狗的人`AND pu.age > 2`？

# c# - 如何使用 TableAdapter 进行更新？

> ID：14292727
> 
> 赞同：4
> 
> 时间：2013-01-12T11:06:45.973
> 
> 标签：c#, winforms, datagridview, dataset

我正在编写一个`WindowsApplication`使用数据库的程序。我用 显示数据库值`DataGridView`。目前，我希望有可能通过 更新数据库`DataGridView`，因此我编写了以下代码：

```
 private void MainForm_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'databaseDataSet1.products' table. You can move, or remove it, as needed.
        this.productsTableAdapter1.Fill(this.databaseDataSet1.products);
    }

    private void upButton1_Click(object sender, EventArgs e)
    {
        this.productsTableAdapter1.Update(this.databaseDataSet1.products);
        MessageBox.Show("הנתונים עודכנו בהצלחה!");
    } 
```

问题是没有将值更新到数据库中。如果有人可以帮助我解决这个问题，或者更好地解释如何使用 ，我会很高兴`DataGridView`，因为我在互联网上没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:57:08.080

```
 this.Validate();
        this.productsBindingSource.EndEdit();
        this.productsTableAdapter1.Update(this.databaseDataSet1.products);
        //this.productsTableAdapter1.UpdateAll(this.databaseDataSet1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:15:08.973

`DataTable`假设您使用 a和 a填充 datagridview，`DataAdapter`您可以执行以下操作：

```
private void SaveChanges()
{
    try
    {
        if (sqlDataAdapter != null && dataTable.GetChanges() != null)
            sqlDataAdapter.Update(dataTable);
    }
    catch (Exception exception)
    {
        MessageBox.Show(exception.Message);
    }
} 
```

这将根据您的 DataTable 自动生成更新数据库所需的任何插入、更新或删除语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:11:17.693

您应该将 datagridview 绑定到 DataTable 或 BindingList 对象，因为它们是可观察的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T20:29:06.890

```
try
{
    this.Validate();
    this.customersBindingSource.EndEdit();
    this.customersTableAdapter.Update(this.northwindDataSet.Customers);
    MessageBox.Show("Update successful");
}
catch (System.Exception ex)
{
    MessageBox.Show("Update failed");
} 
```

# c# - 该复选框不会在 mvc 应用程序中将 bool 属性从 false 更新为 true

> ID：14292728
> 
> 赞同：0
> 
> 时间：2013-01-12T11:06:47.250
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

具有以下`ViewModel`代码：

```
public List<MarketingCode> MarketingCodes { get; set; } 
```

哪里`MarketingCode`是类型：

```
public class MarketingCode
{

    public bool selected
    {
        get;
        set;
    }
    public MarketingOptionCode name { get; set; }
    public string Line { get; set; }
    public string value { get; set; }

    [Flags]//Indicates that an enumeration can be treated as a bit field; i.e., as a set of flags
    public enum MarketingOptionCode
    {

        Email = 1,

        Post = 2,

        SMS = 3,

        Telephone = 4
    }

} 
```

我的视图有以下代码来呈现`CheckBoxList`：

```
 @for (int i = 0; i < Model.MarketingCodes.Count(); i++)
                                    {
                                        var name = @Model.MarketingCodes[i].name.ToString();
                                        <label for="@Model.MarketingCodes[i].name" class="checkbox inlineblock">
                                            @Html.CheckBoxFor(model => model.MarketingCodes[i].selected, new { name = @Model.MarketingCodes[i].name.ToString(), @id = @Model.MarketingCodes[i].name.ToString() }) **@* This works totally fine, even if you click the label, the checkbox will be checked. *@**

                                            @Model.MarketingCodes[i].name
                                        </label>
                                    } 
```

如您所见，`CheckBoxes`它们与选定的属性绑定，但单击时它不会更新为 true `CheckBox`！如果只有一个`CheckBox`. 但是，当我在控制器中读取属性的值时，我正在使用一个循环，它不起作用`MarketingCodes`，所有选定的属性都是错误的。

我从 UI 获取值的控制器代码：

我已经编写了这个私有函数，以便在索引 get 方法触发以及 post 方法触发时调用，***因为在`viewmodel`发布表单时它没有保存任何值。我猜这是所有选定属性都设置为假的地方。***

```
 private static void BindMarketingOptions(PersonalDetailsIndexViewModel viewModel)
    {
        viewModel.MarketingCodes = new[] { 

            new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Email, Line= "line1", value="value1" },
            new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Post, Line= "line2", value="value2"  },
                new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.SMS,Line= "line3", value="value3"  },
                    new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Telephone, Line= "line4", value="value4"  }
                    }.ToList();
    } 
```

**我已将上述方法更改为以下方法，以使我选择的属性起作用：**

```
private static void BindMarketingOptions(PersonalDetailsIndexViewModel viewModel)
    {
        if (viewModel.MarketingCodes == null)
        {
            viewModel.MarketingCodes = new[] { 

            new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Email, Line= "line1", value="value1"},
            new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Post, Line= "line2", value="value2"},
                new Bike.ViewModels.MarketingCode { name = AQuoteBike.ViewModels.MarketingCode.MarketingOptionCode.SMS,Line= "line3", value="value3"},
                    new Bike.ViewModels.MarketingCode { name = Bike.ViewModels.MarketingCode.MarketingOptionCode.Telephone, Line= "line4", value="value4"}
                    }.ToList();
        }
        for (var i = 0; i < viewModel.MarketingCodes.Count(); i++)
        {
            viewModel.MarketingCodes[i].selected = viewModel.MarketingCodes[i].selected;
        }

    }
BindMarketingOptions(viewModel);
for (var i = 0; i <= viewModel.MarketingCodes.Count(); i++)
                {
                    UserField userField = new UserField();
                    if (viewModel.MarketingCodes[i].selected)  //<--FALSE FOR ALL THE CHECKBOXES
                    {
                        userField.Line = viewModel.MarketingCodes[i].Line;
                        userField.Type = viewModel.MarketingCodes[i].name.ToString();
                        userField.Value = viewModel.MarketingCodes[i].value;  
                        BikeQuote.BikeRisk.UserFields.Add(userField);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:19:38.703

您正在更改`name`每个复选框的属性 - 这是默认模型绑定器用来尝试将数据绑定到模型的属性，最好让 MVC 为您生成它，例如

```
@for (int i = 0; i < Model.MarketingCodes.Count(); i++)
{
    ...
    Html.CheckBoxFor(model => model.MarketingCodes[i].selected);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:29:13.447

答案可以从问题本身中看出。覆盖复选框的名称不是问题，而是我想覆盖名称，以便标签的属性与复选框的名称一起使用。因此，如果用户单击标签，则会单击复选框。实际问题是我将数据绑定到 MarketingCodes 属性的方式。我已经给出了旧版本以及更新版本。现在它工作正常。

# android - ListFragment 中的异常：指定的孩子已经有一个父母

> ID：14292731
> 
> 赞同：1
> 
> 时间：2013-01-12T11:06:59.027
> 
> 标签：android, listview, android-listfragment

我正在制作一个下载器应用程序，并且在 onCreateView 返回部分之后出现了孩子的父母错误。我尝试了很多东西，但没有任何帮助。我试过 `((ViewGroup)dlistView.getParent()).removeView(dlistView);` 了：之后编译器说：

```
01-12 12:05:15.558: E/AndroidRuntime(10740): java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

或删除容器/我有一个 npe/ 或删除 V 但 V.getParent() 为空。

> 哪个视图是父视图，哪个视图是子视图？

编码：

```
public static class DownloadingFragment extends ListFragment {
public static final String ARG_SECTION_NUMBER = "section_number";
        public DownloadingFragment() {
        }

        @Override
        public View onCreateView (LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View V = inflater.inflate (R.layout.list, null);    
            ListView dlistView = (ListView) V.findViewById(R.id.dlist);
            List<DownloadInfo> downloadInfo = new ArrayList<DownloadInfo>();
            downloadInfo.add(new DownloadInfo("File", 1000));
            DownloadInfoArrayAdapter diaa = new DownloadInfoArrayAdapter(
                    getActivity().getApplication(),R.layout.list, downloadInfo);
            dlistView.setAdapter(diaa);
        return dlistView; // throw exception 
        }
    }
//...
} 
```

预先感谢您的帮助。

编辑：新代码：

```
public static class DownloadingFragment extends Fragment {
        public static final String ARG_SECTION_NUMBER = "section_number";
        public DownloadingFragment() {
        }
        @Override
        public View onCreateView (LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View V = inflater.inflate (R.layout.list, null);    
        return V;
        }

        @Override
        public void onStart() {
            // TODO Auto-generated method stub
            super.onStart();
            ListView dlistView = (ListView) getView().findViewById(R.id.dlist);
            List<DownloadInfo> downloadInfo = new ArrayList<DownloadInfo>();
            downloadInfo.add(new DownloadInfo("File", 1000));
            DownloadInfoArrayAdapter diaa = new DownloadInfoArrayAdapter(
                    getActivity().getApplication(),R.layout.list, downloadInfo);
            dlistView.setAdapter(diaa);
        }
    }
//...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:11:31.157

那是因为您返回具有父级的列表视图（在 V 的布局树中的某处）。

对于任何类型的 fragment ， onCreateView 应该返回一个没有任何 parent 的视图。

在这种情况下，因为它是一个 listFragment，所以创建 listview（使用 xml 或以编程方式），然后返回它。不允许它有任何父母，因为它需要有父母作为片段。

阅读[此处](http://developer.android.com/guide/components/fragments.html)了解更多信息：

> 当片段第一次绘制其用户界面时，系统会调用它。要为您的 Fragment 绘制 UI，您必须**从此方法返回一个 View，它是**Fragment 布局的根。如果片段不提供 UI，您可以返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:17:25.180

请注意，inflate 的第三个参数为 false。所以替换这一行

```
View V = inflater.inflate (R.layout.list, null); 
```

有了这个

```
View V = inflater.inflate (R.layout.list, null,false); 
```

你完成了。希望这会有所帮助。

# iphone - MGTwitter,libxml/xmlversion.h 文件未找到

> ID：14292735
> 
> 赞同：0
> 
> 时间：2013-01-12T11:07:29.867
> 
> 标签：iphone, ios, objective-c, xcode, libxml2

我有一个在我的模拟器和我的设备上运行良好的应用程序，但是当我尝试存档时，它在 MGTwitterLibXMLParser.h 文件中给我一个 libxml/xmlreader.h 错误。

请给我关于它的建议......

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:13:06.400

`Header Search Path`在`TARGETS`To中设置`usr/include/libxml2`。

# asp.net - 如果在用户的浏览器上禁用了 Javascript，则服务器端验证

> ID：14292740
> 
> 赞同：0
> 
> 时间：2013-01-12T11:07:45.370
> 
> 标签：asp.net, server-side-validation

我开发了一个带有 3 个输入类型 = 文本和一个输入类型 = 提交按钮的小表单。最终用户填写表单并提交，但没有数据插入到后端表中。（可能提交了空表单）。我知道在用户的浏览器上禁用了 Javascript。现在我想做服务器端验证。我如何在服务器端验证我的表单？我需要一段代码来验证服务器端的表单（代码背后）？我需要在 asp.net 中的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T22:02:48.567

你真的不应该在这个论坛上要求直接的代码。但无论哪种方式，这里都是 asp.net 表单验证的绝佳资源：[MSDN - Validating ASP.NET Server Controls](http://msdn.microsoft.com/en-us/library/aa479013.aspx)

本质上，假设您使用的是 C#，您可能会执行以下操作：

```
<%@ Page Language="C#" %>
<script runat="server">

   void Button1_Click(Object sender, EventArgs e) {
   Label1.Text = "Page is valid!";
   }

</script>
<html>
<head>
</head>
<body>
       <form runat="server">
        <p>
            <asp:TextBox id="TextBox1" 
            runat="server"></asp:TextBox>
            &nbsp; 
            <asp:RequiredFieldValidator 
            id="RequiredFieldValidator1" runat="server" 
            ErrorMessage="Required!" 
            ControlToValidate="TextBox1">
            </asp:RequiredFieldValidator>
        </p>
        <p>
            <asp:Button id="Button1" onclick="Button1_Click" 
             runat="server" Text="Button"></asp:Button>
        </p>
        <p>
            <asp:Label id="Label1" runat="server"></asp:Label>
        </p>
    </form>
</body>
</html> 
```

我的建议是尝试和谷歌一些并寻找教程 - 那里有[非常丰富的内容，并](http://msdn.microsoft.com/en-us/library/vstudio/a0z2h4sw(v=vs.100).aspx)提供简单的分步指导。

快乐编码！

# ubuntu - 通过 cli 删除重复图像

> ID：14292741
> 
> 赞同：1
> 
> 时间：2013-01-12T11:08:06.097
> 
> 标签：ubuntu, image-processing, duplicate-removal

在 linux 环境中，我需要通过文件的 md5 删除重复的图像，但在删除之前，我想在文件中写入一些 CSV 列表

已删除的文件 -> 链接的第一个文件 已删除的文件 -> 链接的文件

等等。

问题是我有一个结构

主文件夹 子文件夹 子子文件夹 子子 子文件夹
图片

拥有超过 200.000 个文件

所以脚本应该很不错，不会挂起并且速度很快。

你会建议哪个方向？

我手头有ubuntu。

更新：

我找到了一个脚本，它可以做我需要的小修改。它搜索并找到 md5 重复项并删除重复项。唯一需要的最后一步是制作一个包含已删除文件列表的文件->保留的副本

```
#!/bin/bash

DIR="/home/gevork/Desktop/webserver/maps.am/all_tiles/dubai_test"

find $DIR -type f -exec md5sum {} \; | sort > /home/gevork/Desktop/webserver/maps.am/all_tiles/dubai_test/sums-sorted.txt

OLDSUM=""
IFS=$'\n'
for i in `cat /home/gevork/Desktop/webserver/maps.am/all_tiles/dubai_test/sums-sorted.txt`; do
 NEWSUM=`echo "$i" | sed 's/ .*//'`
 NEWFILE=`echo "$i" | sed 's/^[^ ]* *//'`
 if [ "$OLDSUM" == "$NEWSUM" ]; then
  echo rm  "$NEWFILE"
 else
  OLDSUM="$NEWSUM"
  OLDFILE="$NEWFILE"
 fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:42:06.420

我发现 Python 是完成这些任务的一个很好的工具，而且更便携（尽管您已将问题限制在 Linux 上）。下面的代码将在副本中保留最旧的文件（按创建时间），如果这对您无关紧要，那么它可以被简化。要使用它，请将其另存为，例如，“remove_dups.py”，然后运行为`python remove_dumps.py startdir`. 从 开始`startdir`，它会寻找 3 层深的目录，并计算那里的内容的 md5 总和。它存储每个哈希的文件名列表。您之后的文本文件将打印到标准输出，因此您实际上希望将其作为`python remove_dumps.py startdir > myoutputfile.txt`. 它还将起始目录存储在此输出文件中。每一行的格式为：`md5sum: file1, file2, file3, ...`重复文件。其中第一个被保留，其他被删除。

```
import os
import sys
import glob
import hashlib
from collections import defaultdict

BIG_ENOUGH_CTIME = 2**63-1

start_dir = sys.argv[1]

hash_file = defaultdict(list)
level3_files = glob.glob(os.path.join(start_dir, "*", "*", "*", "*"))
for name in level3_files:
    try:
        md5 = hashlib.md5(open(name).read()).hexdigest()
    except Exception, e:
        sys.stderr.write("Failed for %s. %s\n" % (name, e))
    else:
        # If you don't care about keeping the oldest between the duplicates,
        # the following files can be simplified.
        try:
            ctime = os.stat(name).st_ctime
        except Exception, e:
            sys.stderr.write("%s\n" % e)
            hash_file[md5].append((BIG_ENOUGH_CTIME, name))
        else:
            hash_file[md5].append((ctime, name))

print "base: %s" % (os.path.abspath(start_dir))
for md5, l in hash_file.items():
    if len(l) == 1:
        continue

    # Keep the oldest file between the duplicates.
    l = sorted(l)
    name = [data[1] for data in l]

    # md5sum: list of files. The first in the list is kept, the others are
    # removed.
    print "%s: %s" % (md5, ','.join('"%s"' % n for n in name))

    original = name.pop(0)
    for n in name:
        print "%s->%s" % (n, original)
        sys.stderr.write("Removing %s\n" % n)
        try:
            os.remove(n)
        except Exception, e:
            sys.stderr.write("%s\n" % e) 
```

# javascript - 在 knockout.js 中绑定到类

> ID：14292742
> 
> 赞同：3
> 
> 时间：2013-01-12T11:08:12.247
> 
> 标签：javascript, knockout.js

我想绑定 LI/DIV 类。我正在使用 knockout.js。我不知道如何使它工作。这是我的代码：

```
<div id="users-list2" class="span8">
        <div class="tabbable">
            <!-- Only required for left/right tabs -->
            <ul class="nav nav-tabs" data-bind="foreach: conversations">
                <li data-bind="click: function () { $root.tabClick(username); }, attr:{ 'class': cls}" style="float:left"> 
                <a class="user-box-name" 
                     data-bind="text: username, attr:{ 'href':'#'+ username }, event: { contextmenu: $root.closeTab }"></a>
                </li>
            </ul>
            <div class="tab-content" data-bind="foreach: conversations">
                <div data-bind="attr:{ 'id': username, 'class': 'tab-pane ' + cls}">
                    <div id="chat-list" class="span12" data-bind="foreach: messages">
                        <ul>
                            <li>
                                <div class="chat-listitem-username" data-bind="text: username">
                                </div>
                                <div class="chat-listitem-message" data-bind="html: content">
                                </div>
                                <div class="chat-listitem-timestamp" data-bind="text: timestamp.toLocaleTimeString()">
                                </div>
                            </li>
                        </ul>
                    </div>
            </div> 
```

和视图模型：

```
chatR.conversation = function (username) {
var self = this;
self.messages = ko.observableArray();
self.username = username;
self.test = function (x) { alert(x.username) };
self.cls = "";
} 
```

当单击特定选项卡并将所有其他 cls 更改为“”时，我想将 cls 更改为“活动”。它不工作。我究竟做错了什么？“tabbable”和“nav”等类由 bootstrap.js 定义。

编辑：这就是我想要更改 cls 的方式：

```
self.tabClick = function (username) {
    self.currentConversation = username;
    for (i = 0; i < self.conversations().length; i++) {
        if (self.conversations()[i].username == username) {
            self.conversations()[i].cls = "active";
        }
        else {
            self.conversations()[i].cls = "";
        }
    }
} 
```

EDIT2：评论工作的变化，但我还有另一个问题。Li 有“活动”类，但 DIC 得到：

```
<div id="aaa_1" class="tab-pane function d(){if(0<arguments.length)
{if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))d.H(),c=arguments[0],d.G();return this}b.r.Va(d);return c}" 
data-bind="attr:{ 'id': username, 'class':'tab-pane '+cls}"> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:41:47.050

发布详细信息作为答案。

第一步是使 cls 属性成为可观察的，并将代码更改为并相应地更改您的代码`self.conversations()[i].cls("active");`或`self.conversations()[i].cls("");`

对于第二个，如编辑。

您需要输出 cls 的值而不是整个 cls

所以改变这个

```
<div data-bind="attr:{ 'id': username, 'class': 'tab-pane ' + cls}"> 
```

至

```
<div data-bind="attr:{ 'id': username, 'class': 'tab-pane ' + cls()}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:39:21.047

编辑2的答案：而不是

```
'tab-pane ' + cls 
```

利用

```
'tab-pane ' + cls() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:16:22.060

Knockout 对类有特殊的绑定，一个 css 绑定 (http://knockoutjs.com/documentation/css-binding.html)。

例子：

`<div data-bind='css: {classname: bla() == "something"}'>...</div>`

# python - 如何：Python 将字节转换为可读的 ASCII/Unicode

> ID：14292746
> 
> 赞同：7
> 
> 时间：2013-01-12T11:08:49.940
> 
> 标签：python

这是我收到的字节，我想将字节 [5] + 字节 [6] + 字节 [7] + 字节 [8] 转换为 ASCII 可读文本。

```
s=b'0f0000004e52303947303531363400' 
```

字节[5]~[8] ASCII/UNICODE 为 NR09

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T11:17:40.953

```
bytes.fromhex(s[4*2:8*2].decode("ascii")).decode("ascii")
//'NR09' 
```

顺便说一句，如果您不使用[Python 的转换，这会容易得多：convert a hex string](https://stackoverflow.com/questions/14292349/)

在那个问题中，您有：

```
b'\x0f\x00\x00\x00NR09G05164\x00' 
```

所以你可以做

```
c = b'\x0f\x00\x00\x00NR09G05164\x00'
c[4:8].decode("ascii")
//'NR09' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:22:53.800

```
rc@xxxxx:~$ python
Python 2.7.5 (default, Aug 25 2013, 00:04:04)
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> s=b'0f0000004e52303947303531363400'
>>> s.decode("hex")[4:8]
'NR09' 
```

# haskell - 管道和网络管道：结合 MonadResource 和 IO

> ID：14292748
> 
> 赞同：5
> 
> 时间：2013-01-12T11:09:05.433
> 
> 标签：haskell, conduit

我正在试验导管包。还找到了 network-conduit 包，我尝试制作一个简单的 TCP 客户端，它将文件的内容发送到套接字：

```
import Data.Conduit
import Data.Conduit.Binary
import Data.Conduit.Network
import Data.ByteString.Char8 (pack)

sendFile fileName appData = runResourceT $ 
   sourceFile fileName $$ appSink appData

main = runTCPClient (clientSettings 8000 (pack "localhost")) (sendFile "book.tex") 
```

但是，这不起作用，因为应用程序接收器不存在 ResourceT：

```
[1 of 1] Compiling Main             ( Conduit2.hs, interpreted )

Conduit2.hs:9:63:
    Occurs check: cannot construct the infinite type: m0 = ResourceT m0
    Expected type: Application (ResourceT m0)
      Actual type: AppData (ResourceT m0) -> m0 ()
    In the return type of a call of `sendFile'
    In the second argument of `runTCPClient', namely
      `(sendFile "book.tex")'
Failed, modules loaded: none. 
```

但是，如果没有 runResourceT，它显然也无法工作：

```
[1 of 1] Compiling Main             ( Conduit2.hs, interpreted )

Conduit2.hs:9:63:
    No instance for (MonadResource IO)
      arising from a use of `sendFile'
...etc... 
```

我的猜测是我应该在不实际管理资源的情况下将 appSink（其中 m=IO）包装到 ResourceT 中。但我就是不知道该怎么做。

...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T13:56:00.497

我自己想出来了......只需将整个runTCPClient包装到runResourceT中。

# android - android - 如何每隔一段时间重复一个功能？

> ID：14292749
> 
> 赞同：4
> 
> 时间：2013-01-12T11:09:11.890
> 
> 标签：android, repeat

如何在每个定义的时间安排一个功能，并可以选择更改这个时间？我发现我可以使用 timer & timerTask 或处理程序来做到这一点。它不重复我定义的时间的问题，它随机重复......

```
 runnable = new Runnable() {

        @Override
        public void run() {
            //some action
            handler.postDelayed(this, interval);
        }
    };

            int hours = settings.getIntervalHours();
            int minutes = settings.getIntervalMinutes();

            long interval = (hours * 60 + minutes) * 60000;

            changeTimerPeriod(interval);

private void changeTimerPeriod(long period) {
    handler.removeCallbacks(runnable);
    interval = period;
    runnable.run();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-05T09:57:11.843

在方法中使用[Handler](http://developer.android.com/reference/android/os/Handler.html)对象`onCreate`。它的`postDelayed`方法导致`Runnable`参数被添加到消息队列并在指定的时间量过去后运行（在给定的示例中为 0）。然后这将在固定的时间速率（本例中为 1000 毫秒）后自行排队。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    android.os.Handler customHandler = new android.os.Handler();
    customHandler.postDelayed(updateTimerThread, 0);
}

private Runnable updateTimerThread = new Runnable()
{
    public void run()
    {
        //write here whaterver you want to repeat
        customHandler.postDelayed(this, 1000);
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-30T06:02:11.447

我在[这里使用了解决方案](https://stackoverflow.com/a/6242292/6155248)

但是在初始化处理程序的代码中，我使用了

```
mHandler = new Handler(getMainLooper); 
```

代替

```
mHandler = new Handler(); 
```

这对我有用

# linux - 以编程方式确定 Ubuntu 发行版和架构？

> ID：14292750
> 
> 赞同：0
> 
> 时间：2013-01-12T11:09:51.200
> 
> 标签：linux, ubuntu

以编程方式确定当前机器是否正在运行 Ubuntu、它具有什么架构以及它正在运行什么版本的 Ubuntu 的最佳方法是什么？

一种方法是扫描输出`uname -a`以检查正确的内核版本和架构。

另一种方法是扫描`/etc/apt/sources.list`Ubuntu 分发关键字（eq `precise`、`quantal`等）

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:18:46.150

除了 `uname -a`，还有几种方法可以获取有关当前分布的信息。

1.  最好的方法是解析发布文件。它们通常以`-release`or结尾`_release`并且位于`/etc`. 以下命令将找到它们。

    ```
    ls /etc/*{-,_}release 
    ```

    *   Ubuntu 使用`lsb_release`
    *   Redhat/Fedora 使用`redhat-release`
    *   Slackware 使用`slackware-release`
    *   Gentoo 使用`gentoo-release`

Debian 对应的文件是`/etc/debian_version`. 不过，这个文件也将出现在 Ubuntu 系统上（有点误导，但有充分的理由）。

1.  另一个文件是`/etc/issue`用于机器识别和登录前提示可用于确定当前分布信息。

2.  系统信息也可以在中找到`/proc/version`。

    ```
    cat /proc/version 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T11:16:20.957

> 一种方法是扫描 uname -a 的输出以检查正确的内核版本和架构。

但是人们通常不想解析此类工具的输出，因为它并不优雅（可以这么说，它被认为是一种 hack）。

但是，您可以使用`uname()`函数/系统调用：

```
#include <sys/utsname.h>

struct utsname sysinfo;
if (uname(&sysinfo) < 0) {
    printf("Cannot determine OS\n");
    exit(-1);
}

printf("Operating system name: %s\n", sysinfo.sysname); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T11:33:49.703

您可以将库用作操作系统的中立点。解决方案是[lsb](http://www.linuxfoundation.org/collaborate/workgroups/lsb/lsb-41-release-notes)，您的问题接近[使用 lsb question](https://stackoverflow.com/questions/1337329/determine-linux-version-from-java)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T11:23:23.637

Afaik 大多数 Linux 发行版也使用`/etc/issue`. 管理员当然可以更改其中的文本以显示不同的登录消息。

来自 Fedora 的示例：

```
Fedora release 17 (Beefy Miracle)
Kernel \r on an \m (\l) 
```

来自 ubuntu 的示例：

```
Ubuntu 11.04 \n \l 
```

# php - 如何访问第二页上的签名请求

> ID：14292754
> 
> 赞同：-1
> 
> 时间：2013-01-12T11:10:13.623
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我的两页 facebook 应用程序包含

index.php 欢迎.php

在 index.php 上

```
$signed_request = $facebook->getSignedRequest(); 
```

工作正常，我可以获取页面 id

但是当我点击欢迎页面并尝试获取页面 id 时，$signed_request 不会获取页面 id。

```
[algorithm] => xxxx
[code] => xxxxx    
[issued_at] => xxxxxx
[user_id] => xxxxxxx 
```

得到了这个，但无法获取页面 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:13:24.917

你只能进入`$signed_request`第一页。如果您想在另一个页面上使用它，您应该将它保存在会话中。

# data-visualization - 在 Latex 中使用 Winbugs 绘图

> ID：14292761
> 
> 赞同：2
> 
> 时间：2013-01-12T09:14:40.077
> 
> 标签：data-visualization, winbugs, latex

我进行了贝叶斯分析并在winbugs中获得了一些图。有谁如何将历史图放在Latex的WinBUGS中？我无法将绘图保存为 pdf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:45:58.273

将 .odc 文件打印为 PDF（我安装了 CutePDF，[http:](http://www.cutepdf.com/) //www.cutepdf.com/来执行此操作）。

# android - 'MyActivity.this' 的数据类型是什么 - Android

> ID：14292763
> 
> 赞同：0
> 
> 时间：2013-01-12T11:11:05.617
> 
> 标签：android, android-activity

好吧，我的问题是 JAVA 中没有指针……但是当我们必须开始另一个活动时，我们会这样做：

```
Intent in = new Intent(MyActivity.this, NewActivity.class);
startAcitivity(in); 
```

所以我的问题是什么是数据类型`MyActivity.this`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:23:24.323

**如果**您在非嵌套类**或**顶级类中，则写作与写作`MyActivity.this`相同。`this`

 ****看这个例子：

```
public class TopLevel{

    public static void main(String[] args){
        new TopLevel().printClass();
    }

    public TopLevel(){
        new LowerLevel().printClass();
    }

    public void printClass(){
        System.out.println("Outer Class: ");
        // Will print something like "TopLevel.class"
        System.out.println(this.getClass());
    }

    public class LowerLevel{
        // This is a Nested-Class.

        public void printClass(){
            System.out.println("Nested Class: ");
            // Will print "TopLevel$LowerLevel.class"
            System.out.println(this.getClass());
            // Will print "TopLevel.class" again
            System.out.println(TopLevel.this.getClass());
        }
    }

} 
```

在嵌套类中使用的某些`this`引用与在顶级类中使用时引用的实例不同。因此，要在嵌套类中获取外部类的“上下文”，您还需要指定要从中`this`获取 -context 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:56:45.773

在 java 中指针是不允许的，但是在 Java 中通过引用（对象）传递是隐式基于指针概念的东西。

在您的情况下，您将父类的上下文传递给子类，这实际上是通过引用概念传递的。

希望这可以帮助。****

# android - 滚动列表时Listfragment中的列表项更改为系统默认背景？

> ID：14292772
> 
> 赞同：0
> 
> 时间：2013-01-12T11:11:42.847
> 
> 标签：android

我是第一次问问题，请解决我的问题。我正在开发小型音乐播放器应用程序。因为我面临一个愚蠢的问题，我在谷歌上搜索了很多，但它仍然是。

我正在使用 listfragment 显示歌曲列表。现在的问题是，当我将列表项背景设置为透明时，它可以工作。但是一旦我滚动列表，列表背景就会更改为系统默认背景。

我是android新手，请帮助我...

我已经在我的布局文件中尝试了这些：

```
android:background="@android:color/transparent"
android:cacheColorHint="#00000000" 
```

我的主要活动代码是：

```
 package com.android.player;

    import in.wptrafficanalyzer.viewpagerdemo.R;
    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.FragmentManager;
    import android.support.v4.view.ViewPager;
    import android.view.Menu;

    public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** Getting a reference to the ViewPager defined the layout file */        
        ViewPager pager = (ViewPager) findViewById(R.id.pager);

        /** Getting fragment manager */
        FragmentManager fm = getSupportFragmentManager();

        /** Instantiating FragmentPagerAdapter */
        MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the pagerAdapter to the pager object */
        pager.setAdapter(pagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** 这是我的 SongsList.java 代码：-

```
 package com.android.player;

    import in.wptrafficanalyzer.viewpagerdemo.R;

    import java.io.FileDescriptor;
    import java.math.BigDecimal;

    import android.content.ContentUris;
    import android.content.Context;
    import android.database.Cursor;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.net.Uri;
    import android.os.Bundle;
    import android.os.ParcelFileDescriptor;
    import android.provider.MediaStore;
    import android.support.v4.app.ListFragment;
    import android.support.v4.widget.SimpleCursorAdapter;
    import android.view.View;
    import android.widget.ImageView;
    import android.widget.TextView;

    public class SongsList extends ListFragment{

    int mCurrentPage;
    private MediaCursorAdapter mediaAdapter = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Getting the arguments to the Bundle object */
        Bundle data = getArguments();

        /** Getting integer data of the key current_page from the bundle */
        mCurrentPage = data.getInt("current_page", 0);
        String sortOrder = MediaStore.MediaColumns.DISPLAY_NAME + " ASC";
        Cursor cursor = getActivity().getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,null,null,null,sortOrder);

        if(null != cursor)
        {
            mediaAdapter = new MediaCursorAdapter(getActivity(), R.layout.listitem, cursor);  
            setListAdapter(mediaAdapter);
        }

    }

    public Bitmap getAlbumart(Long album_id) 
    {
         Bitmap bm = null;
         try 
         {
             final Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
             //album_id = ()album_id;
             Uri uri = ContentUris.withAppendedId(sArtworkUri, album_id);

             ParcelFileDescriptor pfd = getActivity().getContentResolver().openFileDescriptor(uri, "r");

             if (pfd != null) 
             {
                 FileDescriptor fd = pfd.getFileDescriptor();
                 bm = BitmapFactory.decodeFileDescriptor(fd);
             }
         } catch (Exception e) {
         }
         return bm;
    }
    public class MediaCursorAdapter extends SimpleCursorAdapter{

        @SuppressWarnings("deprecation")
        public MediaCursorAdapter(Context context, int layout, Cursor c) {
                super(context, layout, c,new String[] { MediaStore.MediaColumns.DISPLAY_NAME, MediaStore.MediaColumns.TITLE, MediaStore.Audio.AudioColumns.DURATION},
                                new int[] { R.id.displayname, R.id.title, R.id.duration });
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
                TextView title = (TextView)view.findViewById(R.id.title);
                TextView name = (TextView)view.findViewById(R.id.displayname);
                TextView duration = (TextView)view.findViewById(R.id.duration);
                ImageView imageView1 = (ImageView)view.findViewById(R.id.imageView1);

                Bitmap bm = getAlbumart(cursor.getLong(cursor.getColumnIndex(MediaStore.Audio.AudioColumns.ALBUM_ID)));

                if(bm!=null)
                {
                    imageView1.setImageBitmap(bm);
                }
                else
                {
                    imageView1.setImageResource(R.drawable.ic_launcher);
                }

                name.setText(cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.DISPLAY_NAME)));

                title.setText(cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.TITLE)));

                long durationInMs = Long.parseLong(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.AudioColumns.DURATION)));

                int seconds = (int) (durationInMs / 1000) % 60 ;
                int minutes = (int) ((durationInMs / (1000*60)) % 60);
                int hours   = (int) ((durationInMs / (1000*60*60)) % 24);
                double durationInMin = ((double)durationInMs/1000.0)/60.0;
                 String durationTxt = "";
                if(hours==0)
                {
                 if(minutes<10)
                 {
                     durationTxt = "0"+minutes+":"+seconds;
                 }
                 else
                 {
                     durationTxt = minutes+":"+seconds;
                 }
                }
                else
                {
                    durationTxt = hours+":"+"0"+minutes+":"+seconds;
                }
                durationInMin = new BigDecimal(Double.toString(durationInMin)).setScale(2, BigDecimal.ROUND_UP).doubleValue();

                duration.setText(durationTxt);

                view.setTag(cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.DATA)));
        }

    }

    public void onActivityCreated(View view, Bundle savedInstanceState) {

        getListView().setCacheColorHint(android.R.color.transparent);
        super.onViewCreated(view, savedInstanceState);
    }

} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****

这是activity_mail.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/sparkle">

        <android.support.v4.view.PagerTitleStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#33b5e5"
            android:textColor="#fff"
            android:paddingTop="4dp"
            android:paddingBottom="4dp" />

    </android.support.v4.view.ViewPager>

</RelativeLayout> 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *** 这里是listitem.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:cacheColorHint="#00000000"
    android:orientation="horizontal"
    android:padding="5dip"
    android:id="@+id/list_item" >

    <!--  ListRow Left sied Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:background="@drawable/transparent_bg"
        android:cacheColorHint="#00000000"
        android:layout_marginRight="5dip">

        <ImageView
             android:id="@+id/imageView1"
            android:layout_width="60dip"
            android:layout_height="60dip"
            android:src="@drawable/ic_launcher"/>

    </LinearLayout>

    <!-- Title Of Song-->
    <TextView
        android:id="@+id/displayname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:textColor="#fff"
        android:typeface="sans"
        android:textSize="15dip"
        android:textStyle="bold"/>

    <!-- Artist Name -->
    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/displayname"
        android:textColor="#fff"
        android:textSize="10dip"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:singleLine="true" />

    <!-- Rightend Duration -->
    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/displayname"
        android:gravity="right"
        android:layout_marginRight="5dip"
        android:textSize="12dip"
        android:textColor="#fff"
        android:textStyle="bold"/>

</RelativeLayout> 
```

请看一下并帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:22:51.273

`android:cacheColorHint`确实是解决方案，但是您将其放在错误的位置。它是 的属性`ListView`，而不是列表项的属性。

这应该很好用：

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000" /> 
```

**更新：**

我又看了一遍你的代码，发现了这一行：

```
getListView().setCacheColorHint(android.R.color.transparent); 
```

这是错误的，因为`android.R.color.transparent`只是一个参考而不是真正的颜色值。

此外， 中没有`onActivityCreated(View view, Bundle savedInstanceState)`方法`ListFragment`。这`onActivityCreated(Bundle savedInstanceState)`其实是。尝试用以下代码替换它，它应该可以正常工作。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);  
    getListView().setCacheColorHint(Color.TRANSPARENT);
} 
```

# php - 如何在while中存储按钮的值

> ID：14292775
> 
> 赞同：0
> 
> 时间：2013-01-12T11:12:22.910
> 
> 标签：php, html, sql, drop-down-menu, while-loop

我有两个 php 页面，我想检查第一个中哪个按钮被选中，以便能够在下一个 php 页面中使用它的值。问题是提交按钮进入了一个 while 循环，所以我不能使用不同的值，可能它可以使用一个`i`变量，但我不知道如何。第一页的形式是：

```
<form name="myForm" action="admin.php" method="post">   
<table BORDER=1....... > <?php $link = mysql_connect('localhost', 'root', '');  if
(!$link) { 
   die('Could not connect: ' . mysql_error()); }
   mysql_select_db("nowdeal"); 
   $query = mysql_query("SELECT * FROM application ORDER BY date");
   WHILE($rows = mysql_fetch_array($query)):
         $date = $rows['date'];
         $username = $rows['username'];
         $advers = $rows['advers'];
         $id = $rows['id'];
         echo '<tr>';
         echo "$date";
          echo "</br>";             
          echo "$username";
          echo "</br>";
          echo "$advers";
          echo "</br>";
          echo "$address";
          echo "</td>";
          echo '<td align="left">';
          echo '<input type="submit" name="action" value="edit" />';
          $_SESSION["id"]=$id;
          echo '</td>';
          echo '</tr>';
          endwhile;  ?>    </table> </form> 
```

在下一页中，php 代码如下：

```
<?php session_start();
  $con = mysql_connect("localhost","root","");    if (!$con)      {  
  die('Could not connect: ' . mysql_error());   }
  mysql_select_db("nowdeal", $con); 
  mysql_query("SET names 'utf8'");
  if(isset($_POST['paid']))     
  { if($_POST['paid']=="yes")  ///is a value from a drop down list 
  {mysql_query("UPDATE application SET paid='yes' WHERE .....");}  

 ///i want to be like : WHERE id=session[id], but when it works it
 takes only   //the last id ,so be upadated the last row only 
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:16:42.010

如果要将值传递给新表单，请将值插入隐藏的表单元素：

```
echo '<input type="hidden" name="sessionId" value="' . $id . '"/>'; 
```

因此，在您的下一页中，您可以使用以下命令访问此值：

```
$_POST['sessionId']; 
```

**PS**你真的需要改变你访问数据的方式。首先访问数据，最好使用外部类，然后在渲染输出中使用数据。不要将 HTML 和 PHP 数据逻辑混为一谈，就好像它们是最好的选择一样。

# sql - SQL - 按类型获取评分最高的电影

> ID：14292778
> 
> 赞同：0
> 
> 时间：2013-01-12T11:12:58.707
> 
> 标签：sql, database, hsqldb

我有三张桌子：

```
 CREATE TABLE Movie
    (
        movieId INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        title VARCHAR(255) NOT NULL,
        moviePath VARCHAR(500) NOT NULL
    );

    CREATE TABLE Rating
    (
        rid INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        mid INTEGER FOREIGN KEY REFERENCES Movie(movieId) ON DELETE CASCADE, 
        uid INTEGER FOREIGN KEY REFERENCES User(id) ON DELETE CASCADE,
        rating INTEGER NOT NULL, 
    );

   CREATE TABLE Genre(
       id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       movieId INTEGER NOT NULL FOREIGN KEY REFERENCES Movie(movieId) ON DELETE CASCADE,
       genre VARCHAR(255) NOT NULL
   ); 
```

我想创建一个 sql 查询，它从最常见的流派中为我提供最常见的电影（带有电影路径、标题）。

有任何想法吗？

**更新**

结果：

```
| MID |   TITLE    | MOVIEPATH |
--------------------------------
|   4 | Happy days |         a |
|   4 | Happy days |         a | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:09:35.750

如果您提供了一些匹配的示例数据，那就太好了。试试这个。看看你之前的问题，这个答案是草拟的。

[SQLFIDDLE 演示](http://sqlfiddle.com/#!3/36a9f/1)

```
select t.mid, t.sum_rating,
m.title, m.moviepath, g.genres
from (
  select mid, 
         sum(rating) as sum_rating,
         dense_rank() over (order by 
         sum(rating) desc) as rnk
  from rating
  group by mid
) t
left join movie m
on m.movieid = t.mid
left join genre g
on g.movieid = m.movieid
where t.rnk = 1; 
```

结果：

```
| MID | SUM_RATING |      TITLE | MOVIEPATH | GENRES |
------------------------------------------------------
|   4 |         37 | Happy days |         a | comedy |
|   4 |         37 | Happy days |         a | RomCom | 
```

您可以使用此替代方法，因为 HSQL 不支持`dense_rank`：

*   [SQLFIDDLE 演示替代方案](http://sqlfiddle.com/#!3/36a9f/3)

查询：`order by desc and top 1`

```
-- alternatively

select t.mid, t.sum_rating,
m.title, m.moviepath, g.genres
from (
  select top 1 mid, 
         sum(rating) as sum_rating
  from rating
  group by mid
  order by sum_rating desc
) t
left join movie m
on m.movieid = t.mid
left join genre g
on g.movieid = m.movieid
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:29:40.570

您可以通过在子查询中对电影的所有评分求和来计算评分。另一个子查询可以计算每种类型的最高评分。通过将它们连接在一起，您将只过滤每种类型的热门电影：

```
select  *
from    Movie m
join    Genre g
on      g.movieId = m.movieId
join    (
        select  r.mid
        ,       sum(Rating) as SumRating
        from    Rating r
        group by
                r.mid
        ) r
on      r.mid = m.movieId
join    (
        select  g.id as gid
        ,       max(SumRating) as MaxGenreRating
        from    (
                select  r.mid
                ,       sum(Rating) as SumRating
                from    Rating r
                group by
                        r.mid
                ) r
        join    Genre g
        on      g.movieId = r.mid
        group by
                g.id
        ) filter
on      filter.gid = g.id
        and filter.MaxGenreRating = r.SumRating 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:29:26.410

我们在哪里可以找到观看次数？使用此表，您可以使用如下查询找到评分最高的电影：

```
select Movie.movieId, Movie.title, Movie.moviepath
from movie, rating, genre
where
    movie.id = rating.mid and
    movie.id = genre.movieId
order by rating desc
limit 1; // limit is used if you are using MySQL. In other databases you can use suitable sql query. 
```

但是，如果您要从最常见的流派中寻找最常见的电影，您必须在表格中了解每部电影和每种流派的观看次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T11:49:47.550

我可以建议您在评分上使用聚合最大值以及在流派上分组

`select max(Rating.rating) as max_rating, Genre.genre, Movie.movieId from Movie inner join Rating on Movie.movieId = Rating.mid inner join Genre on Movie.movieId = Genre.movieId group by Genre.genre;`

我不太确定这是否会 100% 有效，因为我没有尝试过，但我的想法是使用 group by。它可以与 count、max、min、avg 等聚合一起使用。

我希望这会有所帮助

# php - 注意 - PHP 中未定义的变量

> ID：14292781
> 
> 赞同：-2
> 
> 时间：2013-01-12T11:13:17.873
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) [PHP - 未定义的变量](https://stackoverflow.com/questions/6942000/php-undefined-variable)

我是第一次做 PHP，非常享受它，但是遇到了一个错误，那就是

> 注意：未定义变量：第 32 行 C:\xampp\htdocs\cravendale\showconfirm.php 中的 customerid
> 
> 注意：未定义变量：第 43 行 C:\xampp\htdocs\cravendale\showconfirm.php 中的 holidayid

代码`showconfirm.php`

```
<?php
//Capture the customerid from the URL and send to a local variable
$booking = $_GET['customerid'];

//echo out some blurb
echo "<h2>Thank you for your booking</h2>
You may wish to print this page for future reference
<br />
<br />
<h2>Your details</h2>";

//Open up our dataconnection
include 'config.php';
include 'opendb.php';

//Get the booking details from the database

$getbooking = mysql_query("SELECT *
        FROM tblbookings
        WHERE tblbookings.bookingid = @$booking");
while($booking = mysql_fetch_array($getbooking))
        {
        @$customerid = $booking['customerid'];
        $holidayid = $booking['holidayid'];

        }
//Get the customer details

$getcustomer = mysql_query("SELECT *
        FROM tblcustomers
        WHERE tblcustomers.customerid = $customerid");

while($customer = mysql_fetch_array($getcustomer))
        {

        echo "<p><b>First Name:</b> " . $customer['customerfirstname'] . "<br /><br />
        <b>Last Name:</b> " . $customer['customerlastname']. "<br /><br /></p><h2>Your Holiday</h2>";
        }

$getholiday = mysql_query("SELECT *
        FROM tblholidays
        WHERE tblholidays.holidayid= $holidayid");

        while($myholidays = mysql_fetch_array($getholiday))
        {
        //We get the destination name
                $chosendestination = $myholidays['destinationid'];
                $getchosendestination = mysql_query("SELECT tbldestinations.destinationname
                FROM tbldestinations
                WHERE tbldestinations.destinationid = $chosendestination" );

                while($mydestination = mysql_fetch_array($getchosendestination))
                {
                echo
                "<b>Destination: </b>" . $mydestination['destinationname'];
                }
        //We get the name of the hotel
                $chosenhotel = $myholidays['hotelid'];
                $getchosenhotel = mysql_query("SELECT tblhotels.hotelname
                FROM tblhotels
                WHERE tblhotels.hotelid = $chosenhotel" );

                while($myhotel = mysql_fetch_array($getchosenhotel))
                {
                echo
                "<br /><br /><b>Hotel: </b>" . $myhotel['hotelname'];
                }

                //We get the price
                $chosenprice = $myholidays['pricebandid'];
                $getchosenprice = mysql_query("SELECT tblpricebands.pricebandcost
                FROM tblpricebands
                WHERE tblpricebands.pricebandid = $chosenprice" );

                while($myprice = mysql_fetch_array($getchosenprice))
                {
                echo
                "<br /><br /><b>Price: </b>&pound;" . $myprice['pricebandcost'];
                }

                    $phpdate3 = strtotime( $myholidays['holidaystartdate'] );
                    $mysqldate3 = date( 'd-m-Y', $phpdate3 );
        echo "

                <br /><br /><b>Start date: </b>" . $mysqldate3 ;        
        }
?> 
```

我已经对此错误进行了很多研究，我得到的最接近的线索是将“@”放在 $customerid 和`$holidayid`. 错误消失，但未加载表单中的信息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:23:01.500

您的第一个查询显然没有返回任何内容，

```
$getbooking = mysql_query("SELECT *
    FROM tblbookings
    WHERE tblbookings.bookingid = $booking"); 
```

因此，下面的“while”循环甚至不执行单个循环，因此没有定义两个变量 $customerid 和 $holidayid。

```
while($booking = mysql_fetch_array($getbooking)) {
    $customerid = $booking['customerid'];
    $holidayid = $booking['holidayid'];
} 
```

解决方法：检查结果是否为空。

```
if (mysql_num_rows($getbooking) < 1) {
    die('Booking not found.');
}

$getcustomer = mysql_query("SELECT *
    FROM tblcustomers
    WHERE tblcustomers.customerid = $customerid"); 
```

另外：永远不要使用@运算符！忽略错误消息并不能解决根本问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:20:32.763

虽然你已经这样做了：

```
@$customerid = 'blah'; 
```

这只会抑制该行的错误。您正试图在几行之后访问此变量。最好的办法是在脚本的最顶部定义变量，然后在满足条件时覆盖它。

```
$customerid = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:17:56.283

用于[`isset`](http://php.net/manual/en/function.isset.php)确定是否设置了变量

# php - 在 Wordpress 中更新/保存多个帖子的帖子元数据

> ID：14292783
> 
> 赞同：1
> 
> 时间：2013-01-12T11:13:23.100
> 
> 标签：php, javascript, jquery, wordpress

我正在创建一个执行以下操作的插件。（会张贴图片，但不允许）

使用表格中的拖放排序更新单个类别中多个帖子的元数据。

该表显示在这一类别的所有帖子上，显示所有帖子的id，所有帖子的标题以及由其键和值定义的所有帖子的元数据。

jQuery 进行重新排序并更新表中的顺序，例如从 1 到该类别中的许多帖子，因此如果有 10 个帖子，则表中的值从 1 到 10 更新。

我现在需要做的是使用表格第 3 列中显示的正确值更新表格中每个帖子的帖子元值。

使用默认功能：

```
update_post_meta( $post->ID, Post_Order, $_POST['Post_Order']); 
```

这会将元设置为表中的最后一行值。

如何遍历每一行，从该行中获取帖子 ID 和键值，然后更新相应的帖子元数据。

谢谢

**编辑**

发布后五分钟，我将其整理出来。这是答案，可能不是正确的方法，但效果很好。

```
$args = array(
          'order'           => 'ASC',
          'post_type'       => 'post',
          'post_status'     => 'publish',
          'posts_per_page'  => '',
          'category_name'   => 'Customers',
          'meta_key'        => 'Post_Order',
          'orderby'         => 'meta_value_num'
        );

        $my_query = null;
        $my_query = new WP_Query($args);
        while ($my_query->have_posts()) : $my_query->the_post();
            $postid = get_the_ID();
            update_post_meta( $postid, 'Post_Order', $_POST['Post_Order_' . $postid]  );
        endwhile; 
```

# c# - 如何在循环中只弹出一次消息框？

> ID：14292789
> 
> 赞同：0
> 
> 时间：2013-01-12T11:14:27.920
> 
> 标签：c#, asp.net, c#-4.0, popup, messagebox

我有这个弹出消息框警告的小方法，问题是它弹出3个消息框而不是一个！我尝试了几种方法来解决这个问题（包括代码中的 bool 变量和在 sql 查询中使用 Distinct ，尽管数据库不包含任何可重复的行）。

这个想法是让违反我的 if 条件的每一行弹出一次消息框，而不是每行弹出 3 次。那么，为什么这个消息框会弹出 3 次而不是一次呢？以及如何解决？

```
 void msds_update()
{
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "server=(local);database=PhilipsMaterials;Integrated Security=SSPI;";
    con.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sql = "Select * from [PhilipsMaterials].[dbo].[Materials]";
    SqlDataAdapter da = new SqlDataAdapter(sql, con);
    da.Fill(ds);
    dt = ds.Tables[0];

    DateTime longupdate;
    DateTime shortupdate;
   foreach (DataRow row in dt.Rows)
    {
        longupdate = Convert.ToDateTime(dt.Rows[0]["Long MSDS Update"]);
        shortupdate = Convert.ToDateTime(dt.Rows[0]["Short MSDS Update"]);
        TimeSpan longsince = DateTime.Now.Subtract(longupdate);
        int longyears = (int)(longsince.Days / 365.25);
        TimeSpan shortsince = DateTime.Now.Subtract(shortupdate);
        int shortyears = (int)(shortsince.Days / 365.25);
        bool flag = false ;
        bool shown = false;
        if (longyears > 4.5) { flag = true; }
        if (flag && !shown)
        {
            string longmsdsname = Convert.ToString(dt.Rows[0]["Name"]);
            string msg = "Long Msds " + longmsdsname + " must be updated";
            MessageBox.Show(msg);
            shown = true;
        }
        flag = false;
        shown = false;
        if (shortyears > 4.5) { flag = true; }
        if (flag && !shown)
        {
            string shortmsdsname = Convert.ToString(dt.Rows[0]["Name"]);
            string msg = "Short Msds " + shortmsdsname + " must be updated";
            MessageBox.Show(msg);
            shown = true;
        }
    } 
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:18:13.653

您在 if 语句之前将显示的变量设置为 false，将显示的移动到 for 循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:41:59.563

使用“休息；” 在您的消息框之后。您的程序将退出循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:44:28.813

用于执行 if 测试和构建错误消息的值始终是索引为零的行中的值，您应该使用 foreach 循环中使用的当前行索引器

此外，不要立即对错误条件做出反应，而是建立错误消息，等待结束一个循环并仅在出现错误时显示消息。无需使用和保持更新的两个状态变量。

```
 StringBuilder sb = new StringBuilder();
   int rowCounter = 0;
   foreach (DataRow row in dt.Rows)
   {
        rowCounter++;

        longupdate = Convert.ToDateTime(row["Long MSDS Update"]);
        shortupdate = Convert.ToDateTime(row["Short MSDS Update"]);
        TimeSpan longsince = DateTime.Now.Subtract(longupdate);
        int longyears = (int)(longsince.Days / 365.25);
        TimeSpan shortsince = DateTime.Now.Subtract(shortupdate);
        int shortyears = (int)(shortsince.Days / 365.25);
        if (longyears <= 4.5) 
        {
            string longmsdsname = Convert.ToString(row["Name"]);
            sb.AppendFormat("Long Msds {0}  must be updated\r\n", longmsdsname);
        }
        if (shortyears <= 4.5)
        {
            string shortmsdsname = Convert.ToString(row["Name"]);
            sb.AppendFormat("Short Msds {0}  must be updated\r\n", shortmsdsname);
        }

        // If we have errors, show them and reset the builder for the next loop
        if(sb.Length > 0)
        {
             string msg = string.Format("Error in row {0}\r\n{1}", 
                                         rowCounter.ToString(), sb.ToString());
             MessageBox.Show(msg);
             sb.Length = 0;
        }
    } 
```

这样，如果有 2 个或更多错误值，每个错误行也只有一条消息。

# asp.net - 使用更新面板的替代品

> ID：14292790
> 
> 赞同：1
> 
> 时间：2013-01-12T11:14:33.967
> 
> 标签：asp.net, updatepanel, page-refresh

我在更新面板中有gridview，两秒钟后我正在回发以更新这样的面板

```
<script language="javascript" type="text/javascript">
        window.setInterval(function () {
   __doPostBack('<%= UpdatePanel1.ClientID %>', '');
        }, 2000);
</script> 
```

在服务器端，我使用此代码在每个回发时加载网格

```
if (IsPostBack)
        {
            GridView2.DataBind();
            SqlDataSource1.DataBind();
        } 
```

它相应地在两秒钟后加载 Gridview。但问题是它不能在有点慢的互联网连接上工作，或者也不能在 Web 服务器上加载我只想问在客户端或使用 javascript 是否有任何替代方案，所以它应该在客户端级别而不是服务器级别上做所有事情。请给出更好的主意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:20:52.043

坦率地说，这是对`UpdatePanel`. 您正在渲染整个页面（在幕后），只是为了每 2 秒更新一次该面板。

有几种选择：

1.  [页面方法](http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.all)
2.  支持 HTTP 的 WCF 端点，它提供内容以响应 AJAX 请求。
3.  MVC 控制器集成到您的 Web 窗体应用程序中，它也响应 AJAX 请求。

所有这些方法都不需要渲染页面，只需要您实际需要的内容。因此，它们立即变得更有效率。

选项 #2 和 #3 将需要一些手动 JavaScript 来进行 AJAX 调用。jQuery 很好地解决了这个问题。

但是，您仍在处理必须每隔几秒钟轮询一次服务器的事实。为避免这种情况，您可能需要阅读有关[长轮询](https://stackoverflow.com/questions/1342216/how-to-do-long-polling-ajax-requests-in-asp-net-mvc)以实现推送通知的信息。

另请参阅：[ASP.Net SignalR](http://signalr.net/)

# php - 在drupal中每个请求调用的许多查询

> ID：14292791
> 
> 赞同：2
> 
> 时间：2013-01-12T11:14:42.457
> 
> 标签：php, drupal, drupal-7

我已经使用 drupal 建立了一个网站并进行了部署。但它非常非常慢。我安装了 Devel 模块并看到每个请求有 120 个查询。总执行时间为3000ms。这是正常的吗？

我只是安装了一些模块，例如：分类菜单、简单广告、分类广告、规则、语言环境。谁能建议如何减少这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:23:45.730

首先尝试以匿名用户或管理员以外的任何登录用户身份调试网站，以获得更准确的统计信息。

然后可以考虑缓存输出以减少数据库查询的数量。（更快的方法：使用视图缓存或[块缓存模块](http://drupal.org/project/blockcache)缓存页面中的一些块）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:33:18.607

确保您在“admin/config/development/performance”页面中启用了可用的缓存选项，聚合 css 和 javascript 会很有帮助。

您还可以在您认为数据不会经常更改的那些块中启用视图缓存。

对于图像，您可以使用图像缓存来减小图像的原始大小，它可以减小页面大小。

有关更多信息，您可以访问 drupal.org 上的“ [Drupal 缓存、速度和性能](http://drupal.org/node/326504)”页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:40:13.090

[这里是我的模块](http://tenxanh.vn/admin.html)和我的[主页](http://tenxanh.vn/home.html)的 html 输出的链接，其中包括开发信息。你能看到一些让我的网站变慢的东西吗？也许我留下了一些需要卸载的模块。我看到超过 300 个查询，我不认为每个请求有 300 个查询的网站是正常的。谢谢！

# api - 找到另一个 API 而不是 google map API

> ID：14292795
> 
> 赞同：0
> 
> 时间：2013-01-12T11:15:07.293
> 
> 标签：api, map, geolocation, street-address

我正在开发一个使用地图的应用程序。我试图避免使用谷歌 API（因为他们的请求时间是有限的）。我想要一些完全免费的东西，但可以提供地理编码、保留地理、查找最近的地方等功能......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:15:22.173

你看过[地名](http://www.geonames.org/maps/osm-reverse-geocoder.html#findNearbyStreetsOSM)吗？他们使用 googlemaps 和 openstreetmap 进行正向和反向搜索。我知道 openstreetmap 可以处理您所要求的一切。

# mysql - 在 MySQL 中创建一对一关系

> ID：14292798
> 
> 赞同：2
> 
> 时间：2013-01-12T11:15:38.903
> 
> 标签：mysql, mysql-workbench

这是以一对一关系的方式链接两个表的正确代码`MySQL`吗？

`Table1`

```
CREATE TABLE employees (id INT PRIMARY KEY AUTO_INCREMENT,FullName VARCHAR(50)) 
```

`Table2`

```
CREATE TABLE salary (id INT PRIMARY KEY AUTO_INCREMENT,SalaryNumber VARCHAR(6))

ALTER TABLE salary
ADD FOREIGN KEY (id) REFERENCES employees (id)
ON DELETE CASCADE
ON UPDATE CASCADE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:29:24.693

您的示例有许多问题，首先是您正在链接两个不相关的自动递增 id。这是一场等待发生的噩梦。如果发生任何事情使这两个 id 不同步，那么您就死定了。

在您的示例中，“员工”记录将被视为父记录，“工资”记录所依赖的父记录（即 - 您可能有一个没有相应工资记录的员工记录，但您不希望工资记录是与员工无关）。

外键约束属于子表，如 MySql 文档中所述。因此，您在“工资”表中需要的是一个如下所示的列：

`EmployeeId`INT 非空

你的外键是

ALTER TABLE 工资添加外键 (EmployeeId) REFERENCES 员工 (id) ON DELETE CASCADE ON UPDATE CASCADE

此时，您仍然具有多对一关系，因为没有什么可以阻止您将具有相同 EmployeeId 的多个条目插入到薪水表中。

为了使这种关系一对一，您必须在salary.EmployeeId 列上创建一个唯一索引。

对于这种类型的关系，重要的是要注意：

1.  您无法在没有有效 EmployeeId 的工资中插入一行
2.  您无法在具有重复 EmployeeId 的工资中插入一行
3.  当您删除工资记录时，员工记录保持不变。
4.  删除员工记录会导致删除它所引用的工资记录（如果您不想要这种行为，请将 ON DELETE CASCADE 更改为其他内容）
5.  在薪水表为空并被删除之前，您无法删除员工表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:17:28.677

不，这是一对多的关系。您可以将任意数量的薪水行（包括无）链接到单个员工行。

由于薪水很大程度上取决于员工的属性，因此我会考虑将其放在员工表本身中（除非您有一些未与我们分享的*额外*知识，这会造成问题）。

* * *

有*多种*方法可以在不同的表之间实施一对一。

例如，您可以使用触发器来阻止重复，尽管有些人对触发器不利，但这仍然不会阻止一对零映射的出现。

或者，您可以在两个表中使用带有虚拟行的双向外键（相互指向），以允许您一次插入一个表。

这样做的方法是在员工中插入一个指向虚拟工资行的行。

然后插入指向新插入的员工的薪水行。

然后更新员工行以品脱到新插入的薪水行。当然，所有这些都应该作为单个事务发生，以在应用程序级别保持引用完整性。

为了获得虚拟行，需要在将外键约束添加到架构*之前插入它们，否则您将面临先有鸡还是先有蛋的情况。*

这种工作水平是否真的有必要是有争议的，特别是当您可以按照建议将数据组合到一个表中来执行一对一时:-)

# java - 用 JFrame 中的另一个 JPanel 替换当前显示的 JPanel

> ID：14292799
> 
> 赞同：0
> 
> 时间：2013-01-12T11:15:41.693
> 
> 标签：java, swing, jframe, jpanel

我有三个 Java 类：

一个 JFrame：HomeView，一个 JPanel：TopicListView，另一个 JPanel：ReplyListView。

在 HomeView 中，我有一个可以单击以显示 TopicListView 的菜单项。在 TopicListView 中，**我想要一个按钮，我可以单击它来显示回复列表视图。**单击按钮时，它将调用 openReplyListView() 方法。该方法将创建一个新的 JPanel 并用它替换当前的 JPanel。**但是，openReplyListView() 中的代码不起作用。**

**注意：**我没有使用 CardLayout。

任何有关如何使其正常工作的帮助将不胜感激。

提前致谢。

**主页视图类：**

```
public class HomeView extends JFrame {

private JPanel contentPane;
private JMenuBar menuBar;
private JMenu mnForum;
private JMenuItem mntmReply;
private JMenuItem mntmTopic;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                HomeView frame = new HomeView();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public HomeView() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 1280, 720);
    setJMenuBar(getMenuBar_1());
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);
}

private JMenuBar getMenuBar_1() {
    if (menuBar == null) {
        menuBar = new JMenuBar();
        menuBar.add(getMnForum());
    }
    return menuBar;
}
private JMenu getMnForum() {
    if (mnForum == null) {
        mnForum = new JMenu("Forum");
        mnForum.add(getMntmTopic());
        mnForum.add(getMntmReply());
    }
    return mnForum;
}
private JMenuItem getMntmReply() {
    if (mntmReply == null) {
        mntmReply = new JMenuItem("Reply");
        mntmReply.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                JPanel panel = new ReplyView();
                getContentPane().removeAll();
                getContentPane().add(panel);
                getContentPane().validate();
                getContentPane().repaint();
            }
        });
    }
    return mntmReply;
}

private JMenuItem getMntmTopic() {
    if (mntmTopic == null) {
        mntmTopic = new JMenuItem("Topic");
        mntmTopic.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                JPanel panel = new TopicListView();
                getContentPane().removeAll();
                getContentPane().add(panel);
                getContentPane().validate();
                getContentPane().repaint();
            }
        });
    }
    return mntmTopic;
}
} 
```

**主题列表视图类：**

```
public class TopicListView extends JPanel {
private JTable table;
private JScrollPane scrollPane;
private JLabel lblTopics;

/**
 * Create the panel.
 */
public TopicListView() {
    setLayout(null);
    add(getTable());
    add(getScrollPane());
    add(getLblTopics());
}

**Code snippet for the table and the scrollpane:**

private void openReplyListView(){
    JPanel panel = new ReplyListView();
    getContentPane().removeAll();
    getContentPane().add(panel);
    getContentPane().validate();
    getContentPane().repaint();

} 
```

**ReplyListView 类**（一般与 TopicListView 相同）

```
public class ReplyListView extends JPanel {
private JTable table;
private JScrollPane scrollPane;
private JLabel lblTest;

/**
 * Create the panel.
 */
public ReplyListView() {
    setLayout(null);
    add(getTable());
    add(getScrollPane());
    add(getLblTest());

}
private JTable getTable() {
    if (table == null) {
        table = new JTable();
        table.setBounds(414, 114, 464, 354);
    }
    return table;
}
private JScrollPane getScrollPane() {
    if (scrollPane == null) {
        scrollPane = new JScrollPane(getTable());
        scrollPane.setBounds(414, 114, 464, 349);
    }
    return scrollPane;
}
private JLabel getLblTest() {
    if (lblTest == null) {
        lblTest = new JLabel("TEST");
        lblTest.setFont(new Font("Tahoma", Font.PLAIN, 30));
        lblTest.setBounds(593, 35, 81, 68);
    }
    return lblTest;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:26:44.260

您`TopicListView`没有 LayoutManger（即`setLayout(null)`在构造函数中）。

这通常是个坏主意。（我很确定这是你问题的原因）

尝试这样的事情

```
private void openReplyListView(){
    JPanel panel = new ReplyListView();
    removeAll();
    setLayout(new BorderLayout());
    add(panel, BorderLayout.CENTER);
    validate();
    repaint();
} 
```

# postgresql - 从源代码安装 postgresql 后如何使用 pg_trgm

> ID：14292800
> 
> 赞同：7
> 
> 时间：2013-01-12T11:15:44.387
> 
> 标签：postgresql, installation

在从源代码成功安装 postgresql 9.2.2 后（在 OpenSUSE 11.4 上，存储库中没有此版本），我正在尝试恢复使用 pg_trgm 扩展的数据库。这会导致错误，因为找不到 pg_trgm。

从这个 StackOverflow 问题：[Postgres 中与 pg_trgm 的相似性函数中](https://stackoverflow.com/questions/2254999/similarity-function-in-postgres-with-pg-trgm)，我收集到 pg_trgm 应该在 /usr/share/postgresql//contrib 中，但我的 /usr 树中的任何地方都没有 contrib 文件夹。

此外，我似乎找不到关于 postgres 扩展机制如何工作或如何手动安装扩展的清晰解释。

postgresql 源代码树中有一个 contrib 文件夹，但我不知道如何使用它。我应该手动将它复制到 /usr 树的某个地方吗？谁能指出（或给出）如何在 postgresql 中安装 pg_trgm 之类的扩展的解释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T15:06:29.870

假设您已经使用 配置了 postgresql `./configure`，它使用了默认前缀`/usr/local/pgsql`，因此所有内容都安装在该目录下。

您链接到的答案与 Debian 有关，它使用符合 Debian 政策的不同布局，但在您的情况下`/usr/share...`是无关紧要的。无论如何，为了从 contrib 安装东西，实际上并不需要知道这一点，因为不需要手动复制任何东西。

要从源代码安装`pg_trgm`扩展，有两个步骤：

1) 从您的 postgresql 源代码树构建并安装它：

```
$ cd /path/to/src/postgresql-9.2.2/contrib/pg_trgm
$ 制作
$ sudo make install # 或者 su -c 'make install' 如果你不使用 sudo

```

`psql`2）在您的数据库中激活它：

```
$ sudo -u postgres psql -d 数据库 -c "创建扩展 pg_trgm;"
```

要在将来创建的任何数据库上默认激活它，请将此命令应用于`template1`数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-01T08:25:56.950

我在 Centos 7 中使用了 Postgresql，并且允许安装带有 pg_trgm 的软件包：

> $yum 安装 postgresql-contrib

# ruby-on-rails - 如何使用 rspec、capybara 和 poltergeist 编写不会超时或随机失败的 javascript 测试？

> ID：14292801
> 
> 赞同：15
> 
> 时间：2013-01-12T11:15:50.773
> 
> 标签：ruby-on-rails, rspec, capybara, bdd, poltergeist

我的测试超时和随机失败时遇到问题。我一直在寻找如何编写健壮的水豚集成测试的最佳实践，但我没有发现任何有用的东西。

自从我们开始编写一堆测试以来，我们的 CI 服务器一直随机失败，使我们的应用看起来非常不稳定，但测试总是（大部分）在本地通过。

我想了解您和其他有经验的 BDD/TDD 专家如何处理：

*   如何处理外部 javascript 和东西（KissMetrics、Google Analyics 等）和
*   调试和防止破坏构建的超时错误

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T07:14:58.110

跟进此事。我感谢@jonleighton 邀请我在 poltergeist 上提交错误，但我遇到的问题与两个单独的问题有关：

1.  错误/错误的水豚断言会超时，因为我没有遵循[这篇文章中明确列出的建议](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)
2.  3rd 方 javascripts 和东西。基本上我有 3rd 方 javascripts，比如 Kissmetrics、谷歌分析，甚至是每次测试出错时都会加载的实时帮助聊天，我消除了这种情况的发生，我的测试变得更快，看起来更稳定/一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-13T13:14:08.823

我发现在许多情况下，我可以利用 Poltergeist 的黑名单功能帮助我的集成测试更具确定性。就我而言，我已将主机名列入黑名单，如下所示。

```
typekit.net
facebook.net
facebook.com
google.com
google-analytics.com
... 
```

这个想法是关闭任何 a) 测试并不真正需要的东西，并且 b) 可能会影响 CI 环境下的页面加载完成。我注意到这有很大帮助。此外，将这个 PhantomJS 选项与 Poltergeist 一起使用也有帮助：

```
phantomjs_options: ['--ignore-ssl-errors=yes'] 
```

# comparison - Pig 如何处理非结构化数据而 Hive 不能？

> ID：14292802
> 
> 赞同：3
> 
> 时间：2013-01-12T11:16:08.780
> 
> 标签：comparison, hive, apache-pig

根据[这个](http://developer.yahoo.com/blogs/hadoop/posts/2010/08/pig_and_hive_at_yahoo/)和其他参考资料，Pig 在处理非结构化数据方面比 Hive 更好。因此，数据首先用 Pig 清理，然后用 Hive 处理。

> 但是，在数据工厂中，数据可能还没有处于良好、标准化的状态。这使得 Pig 也非常适合此用例，因为它支持具有部分或未知模式的数据，以及半结构化或非结构化数据。

想了解更多 Pig 如何处理非结构化数据而 Hive 不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:34:04.583

Pig 是为处理无模式数据集而构建的。而在 hive 中，我们强制使用存储在 derby 中或可以配置为存储在 mysql 中的模式。现在尚不清楚您在寻找什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T22:17:02.237

Pig 和 Hive 之间的主要区别在于 Pig 是一种数据流语言，而 Hive 是一种声明性语言。话虽如此，Pig 可以处理未定义架构的非结构化数据，而 Hive 需要架构。此外，在某些情况下，Pig 还可用于将数据与架构连接起来，从而使其优于 Hive。相比之下，Hive 将 Hadoop 转换为数据仓库，其行为类似于 SQL 方言。最后，您可能想了解另一种数据流语言 Jaql。与 Pig 不同，它的原生数据结构格式是 JSON。同样，Jaql 不需要模式。希望这可以帮助。

# c++ - 我可以在 WinMain 中将主窗口过程作为 lambda 吗？

> ID：14292803
> 
> 赞同：6
> 
> 时间：2013-01-12T11:16:16.550
> 
> 标签：c++, winapi, c++11, lambda

我有一个简单的窗口应用程序，其中声明了主窗口回调过程：

```
WNDCLASSEXW wcx;
/* ... */
wcx.lpfnWndProc = MainWndProc; 
```

在`WinMain`我声明之后`LRESULT CALLBACK MainWndProc(HWND mainWindow, UINT msg, WPARAM wparam, LPARAM lparam) { /* ... */}`一切正常，但我想知道是否可以*在*WinMain`MainWndProc`中将其作为 lambda 表达式？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T11:29:15.240

您可以使用 lambda，前提是它没有捕获，然后它具有到函数指针的隐式转换：

```
#include <iostream>

typedef void (*func)();

static func some_func;

int global;

int main() {
  some_func = [](){ std::cout << "Hello\n"; }; // Fine
  some_func(); 
  int local;
  some_func = [&](){ local = 1; }; // Illegal - No conversion
  some_func = [](){ global = 1; }; // Fine
} 
```

问题实际上是在没有捕获的情况下，您可以在 lambda 中作为回调做多少有用的事情。您仍然可以使用“全局变量”，就像使用常规函数作为回调一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T20:22:25.263

您可以使用 lambda，但它不能捕获 [ ] 中的任何变量，例如：

```
wc.lpfnWndProc=[](HWND h, UINT m, WPARAM w, LPARAM l)->LRESULT
{
    if (m==WM_CLOSE)
        PostQuitMessage(0);
    else
        return DefWindowProc(h,m,w,l);
    return 0;
}; 
```

适用于 Visual C++ 2012。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-02T01:43:24.007

使用包装类，您可以使用将“this”指针作为货物数据存储在 HWND 上的旧技术来实现。

这种技术的一个限制是您不能处理在 WM_CREATE 之前到达的任何消息，WM_CREATE 是带有创建参数的消息（这些早期消息中只有少数，而且它们非常奇特）。

```
#pragma once
// LambdaWindow.h -- Lambda Window utility
#include <windows.h>
#include <tchar.h>
#include <functional>

class LambdaWindow
{
public:
    typedef 
       std::function<LRESULT(HWND h, UINT m, WPARAM w, LPARAM l)> 
       WindowProcFunction;

public:
    LambdaWindow(const WindowProcFunction &pfn) : fn(pfn)  { }
    virtual ~LambdaWindow() { }

    static LRESULT CALLBACK Stub(HWND h, UINT m, WPARAM w, LPARAM l)
    {
        LambdaWindow *pThis = (LambdaWindow *)GetWindowLongPtr(h, GWLP_USERDATA);
        if (pThis)
        {
            return pThis->fn(h, m, w, l);
        }
        else if (m == WM_CREATE)
        {
            pThis = (LambdaWindow *)(((CREATESTRUCT *)l)->lpCreateParams);
            SetWindowLongPtr(h, GWLP_USERDATA, (LONG_PTR)pThis);
            return pThis->fn(h, m, w, l);
        }
        return DefWindowProc(h, m, w, l);
    }
private:
    WindowProcFunction fn;
}; 
```

上述实用程序的示例使用：

```
#include "LambdaWindow.h"

int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance, 
                   LPSTR lpCmdLine, 
                   int nCmdShow)
{
    HWND wnd;
    TCHAR testText[] = _T("Some Text");
    RECT textLocation = { 10, 10, 150, 30 };

    WNDCLASS wc = { 0 };
    wc.lpfnWndProc = LambdaWindow::Stub;
    wc.hInstance = hInstance;
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);
    wc.lpszClassName = L"minwindowsapp";
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);

    LambdaWindow wlambda =
        [&](HWND h, UINT m, WPARAM w, LPARAM l)->LRESULT
        {
            switch (m)
            {
            case WM_PAINT:
                {
                    PAINTSTRUCT ps;
                    HDC hdc;
                    hdc = BeginPaint(h, &ps);
                    DrawText(hdc, testText, -1,
                        &textLocation, DT_CENTER| DT_VCENTER );
                    EndPaint(h, &ps);
                }
                break;
            case WM_CLOSE:
                PostQuitMessage(0);
                break;
            default:
                return DefWindowProc(h, m, w, l);
            }
            return 0;
        };

    if (RegisterClass(&wc))
    {
        wnd = CreateWindow(wc.lpszClassName,
            L"Minimal Windows Application",
            WS_OVERLAPPEDWINDOW,
            0, 0, 640, 480, NULL, NULL, hInstance, &wlambda);
        if (wnd)
        {
            MSG msg;
            ShowWindow(wnd, nCmdShow);
            UpdateWindow(wnd);
            while (GetMessage(&msg, NULL, 0, 0) > 0)
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
    }

    return 0;
} 
```*

# scala - 类型安全生成器：如何设置编译器错误消息

> ID：14292808
> 
> 赞同：3
> 
> 时间：2013-01-12T11:16:44.433
> 
> 标签：scala

我在类型安全的构建器模式中使用幻像类型来确保方法只被调用一次，如以下代码示例所示

```
 sealed trait TBoolean
  sealed trait TTrue extends TBoolean
  sealed trait TFalse extends TBoolean

  class Builder[MethodCalled <: TBoolean] private() {

    def foo()(implicit ev: MethodCalled =:= TFalse): Builder[TTrue] = {
      new Builder[TTrue]
    }
  }

  object Builder {
    def apply() = new Builder[TFalse]()
  } 
```

`Builder().foo().foo()`不能按要求工作，但是我想将错误消息设置为用户可读的内容。目前消息是

> 此行有多个标记 - 方法 foo 的参数不足：(implicit ev: =:=[W.TTrue,W.TFalse])W.Builder[W.TTrue]。未指定值参数 ev。- 无法证明 W.TTrue =:= W.TFalse。- 无法证明 W.TTrue =:= W.TFalse。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T12:09:30.273

在这里使用类型参数有点矫枉过正。最好只从方法中返回一个功能较弱的类型`foo`：

```
object Builder {
  trait CanFoo { def foo() : Builder }
  def apply(): Builder with CanFoo = new Builder with CanFoo {
    def foo() = new Builder {}
  }
}
trait Builder

Builder().foo().foo() // value foo is not a member of Builder 
```

* * *

有一个注释`implicitNotFound`可[用于](http://suereth.blogspot.co.at/2011/03/annotate-your-type-classes.html)自定义错误消息，但它需要使用搜索的类型（`=:=`）而不是使用站点（`foo`）来定义，[所以这是一个非常无用的构造](https://stackoverflow.com/questions/13840115/scala-can-implicitnotfound-annotation-be-applied-at-the-method-level)......

...除非您创建自己的替代品`=:=`：

```
import annotation.implicitNotFound

object Called {
  implicit def same[A]: Called[A, A] = instance.asInstanceOf[Called[A, A]]
  private object instance extends Called[Any,Any]
}
@implicitNotFound(msg = "Cannot call this method twice") sealed trait Called[A, B]

class Builder[Foo <: TBoolean] private() {
  def foo()(implicit ev: Called[Foo, TFalse]): Builder[TTrue] = {
    new Builder[TTrue]
  }
}
object Builder {
  def apply() = new Builder[TFalse]()
}

Builder().foo().foo()  // -> "error: Cannot call this method twice" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:55:04.080

您无法自定义错误消息，但*可以*自定义特征名称。我会打电话给他们`Built`或`Unbuilt`类似的东西。然后你可以警告图书馆的用户或任何你会得到一个毛茸茸的错误信息，但他们真的只需要发现一些看起来像`Cannot prove that Built =:= Unbuilt`.

# android - Android 对话框活动

> ID：14292812
> 
> 赞同：1
> 
> 时间：2013-01-12T11:17:17.160
> 
> 标签：android

我需要以下帮助：
当我触摸我的 mainActivity 时，它应该处理 onTouch 事件并启动新的活动，这是一个对话框活动。我做不到。任何人都可以提出任何建议吗？

我补充说`android:theme="@android:style/Theme.Dialog"`。
如果我设计简单的对话框活动，那么它工作正常，但如果我试图在触摸事件上打开它，那么它就不起作用。

```
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    if(action == MotionEvent.ACTION_DOWN) {         
        Intent loginIntent = new Intent(this, Login.class);
        startActivity(loginIntent);
        return true;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:22:38.723

你必须将上下文传递给你的意图。你刚刚写了“this”。你在监听器中，所以它传递监听器而不是你的活动上下文。所以你需要在那里写 YourActivity.this。所以替换这一行

```
 Intent loginIntent = new Intent(this, Login.class); 
```

有了这个

```
 Intent loginIntent = new Intent(YourActivity.this, Login.class); 
```

你完成了。希望这会有所帮助。

# asp.net - Internet Explorer 问题 - 无法加载内容

> ID：14292815
> 
> 赞同：1
> 
> 时间：2013-01-12T11:17:38.493
> 
> 标签：asp.net, internet-explorer, webforms, signalr, explorer

我在 asp.net WebForms 中设计一个 Web 应用程序。

除了 IE [所有版本] 之外的所有浏览器上一切正常

我可以加载该站点并在 IE 上浏览它，但最终，当尝试进一步浏览时，IE 无法加载内容：

来自 Fiddler 的消息：1360 内容长度不匹配：请求标头指示 13 516 字节，但客户端发送了 0 字节。

我可以看到 IE 正在尝试下载内容，但没有从服务器发送任何内容。它最终以连接超时错误结束。

同时，导致问题的 IE 实例可以完美加载任何其他网站

关闭 IE 并再次打开后问题消失，但过一会儿又回来了。

虽然我认为这不是问题的原因，但它可能很重要：我的应用程序使用了 signalR。

我的想法用完了，这就是我问的原因，因为也许你们有一些方向可以查看和检查什么。

谢谢。

# actionscript-3 - 如何调整我导入的外部 swf 文件的大小以适应（全屏）舞台？请提供一些示例代码

> ID：14292817
> 
> 赞同：0
> 
> 时间：2013-01-12T11:17:44.353
> 
> 标签：actionscript-3, flash

我使用此代码导入我的 swf 文件。现在我希望我的 swf 文件填满我的所有舞台（全屏）。请提供一些示例代码。

```
import flash.display.Loader; 
import flash.display.Sprite; 
import flash.events.Event;
import flash.display.StageScaleMode;

var ldr:Loader = new Loader(); 
var urlReq:URLRequest = new URLRequest("File/game.swf"); 
ldr.load(urlReq); 
ldr.contentLoaderInfo.addEventListener(Event.COMPLETE, loaded); 
addChild(ldr); 

function loaded(event:Event):void 
{ 
var content:Sprite = event.target.content; 
content.scaleX = 1 ; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:59:56.747

这将拉伸加载的 swf 以填充舞台：

```
function loaded(event:Event):void 
{ 
    var content:Sprite = event.target.content; 
    content.scaleX = stage.stageWidth/content.width;
    content.scaleY = stage.stageHeight/content.height;
} 
```

# php - 如何评估服务器请求/数据库插入的成功

> ID：14292820
> 
> 赞同：1
> 
> 时间：2013-01-12T11:18:01.790
> 
> 标签：php, apache

我有一个与服务器对话的应用程序，如下所示：

1.  应用程序向服务器发送请求
2.  服务器将数据插入数据库
3.  服务器向应用程序发送一个带有各种数据的 JSON 对象

如果应用程序没有返回有效的 JSON 对象，它会假定一定存在网络错误并创建一个计时器，该计时器会在一段时间后尝试重新发送请求。

但是，我注意到有时请求会两次插入数据库，可能是因为插入了初始请求，但随后脚本未能生成 JSON 对象（可能是因为脚本在中途崩溃或超时），并且然后应用程序认为“嘿，我的请求失败，我必须再试一次”，然后它发送第二个请求，即使实际上插入了第一个请求，并且您最终得到重复。

我想也许我可以检查一个不正常的 HTTP 状态，但是如果我在 PHP 中引发了一个致命错误，服务器仍然会返回一个“HTTP 200 OK”状态。

```
query("insert into blah values (...");
non_existent_function();
generate_response(); 
```

有什么方法可以在 PHP 脚本崩溃或超时时恢复 HTTP 错误状态？

或者关于客户如何尽可能好地评估请求是否成功的其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:55:42.687

如何`JSON`通过网络错误获取无效对象？假设您使用**HTTP**，连接由**TCP**在传输层管理，这是一个双向的、可靠的字节流。如果您从服务器接收到一些数据，而不是使用 CRC32 进行检查，则会管理重复项，并且 GoBack-N 会强制再次发送丢失的段。

***TCP 处理一切***，因此当您在设备上发现无效`JSON`对象时，它一定是由服务器上的故障进程引起的。`JSON`在将响应发送到设备之前，服务器上可能会出现无效您必须识别服务器上的错误！只需回滚数据库操作，并将错误消息发送回设备，如果它愿意，它可以再次启动命令。

好的。如果服务器成功处理了您的请求并且**在设备收到响应之前连接丢失了**怎么办？必须警告设备，因为 TCP 无法正常关闭连接！因此，设备知道它发送（或可能不发送）请求但没有收到响应。设备不知道的是，它的请求已成功处理或已引发错误。

太糟糕了。你在应用层，你必须处理这个。我会为每个请求创建一个标识并将其存储在服务器上。当设备发送具有相同标识的相同命令时，服务器只会发回类似这样的响应：“已经完成老板”。这*类似于*TCP 处理此问题的方式，但在传输层上。只要您愿意，就可以存储标识 - 但我认为如果 TCP 连接成功关闭，您可以将其删除：设备收到响应。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T11:40:41.980

如果问题只是在执行时间，也许你可以从 php 脚本中提出它。

```
ini_set('max_execution_time', 300); //300 seconds = 5 minutes 
```

但话又说回来，该应用程序仍然不知道它是否真的成功。

# java - Java中非常大的数字 - 长加法

> ID：14292829
> 
> 赞同：0
> 
> 时间：2013-01-12T11:19:03.077
> 
> 标签：java, try-catch, addition

我正在编写一个添加大数但不使用 BigInteger 的程序。不过，我有一个问题。

```
int l = this.arr.length > arg.arr.length ? this.arr.length : arg.arr.length;        
byte[] result = new byte[l];    
byte carry = 0;

for(int i = 0; i < result.length; i++){
        byte sum;

        try{
            sum = (byte) (this.arr[i] + arg.arr[i] + carry);
        }
        catch(ArrayIndexOutOfBoundsException e){
            try{
                sum = (byte) (this.arr[i] + carry);
            }
            catch(ArrayIndexOutOfBoundsException ex){
                sum = (byte) (arg.arr[i] + carry);
            }
        }

        //carry
        if(sum > 9){
            result[i] = (byte) (sum % 10);
            carry = 1;
        }
        else{
            result[i] = sum;
            carry = 0;
        }
}

if(carry > 0){
        byte[] tmp = new byte[l+1];
        System.arraycopy(result, 0, tmp, 0, l);
        tmp[tmp.length - 1] = carry;
        result = tmp;
} 
```

因此，要添加两个数字，我使用 try-catch 两次来检查任一数组中是否还有任何数字。该方法运行良好，但这种尝试捕捉的东西看起来不太好。我可以用任何其他方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:20:41.527

使用`if`语句来检查`i`是`<` `this.arr.length`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:22:11.773

是的，有一种方法，您**应该**使用它而不是 try-catch 块。要检查 IndexOutOfBounds，只需检查索引是否超出范围，即它是否小于或等于数组大小。对此类检查进行尝试捕获绝对不是一个好主意。

由于您在特定的 try-catch 中有两个索引操作，因此您必须分别检查数组大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:28:26.737

当然，您需要将其重写如下：

```
 if(i < this.arr.length && i < arg.arr.length)
        sum = (byte) (this.arr[i] + arg.arr[i] + carry);
    else if(i < this.arr.length)
        sum = (byte) (this.arr[i] + carry);
    else
        sum = (byte) (arg.arr[i] + carry); 
```

顺便说一句，如果您`carry`在循环结束后有值，您的方法将无法正常工作，您还需要将此值附加到结果数组中。

# wordpress - 无法登录wordpress网站

> ID：14292837
> 
> 赞同：0
> 
> 时间：2013-01-12T11:20:17.110
> 
> 标签：wordpress, wordpress-login

*   我在登录我的 wordpress 网站时遇到问题。
*   当我尝试登录时，没有错误但不会重定向/加载页面。
*   这是我的主机问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:11:35.393

试试网址：

```
http://www.mydomain.com/wp-admin/edit.php 
```

`www.mydomain.com`您的网站地址在哪里。

# c# - 服务器上发生错误。水晶报表将停止打印

> ID：14292838
> 
> 赞同：0
> 
> 时间：2013-01-12T11:20:18.253
> 
> 标签：c#, crystal-reports-2008

我正在使用水晶报表 2008。

报告在水晶报告查看器中绑定，但在打印报告时，我在警报框中收到以下错误“服务器上发生错误。打印将停止”两次，它不打印或不显示打印对话框。

查看事件日志时，触发了以下错误，

```
Log Name:      Application
Source:        ASP.NET 2.0.50727.0
Date:          1/12/2013 2:03:55 PM`enter code here`
Event ID:      1309
Task Category: Web Event
Level:         Warning
Keywords:      Classic
User:          N/A
Computer:      ComputerName
Description:
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 12/01/2013 02:03:55 م 
Event time (UTC): 12/01/2013 10:03:55 ص 
Event ID: 6d36a824679b43b192e1897e91673936 
Event sequence: 82 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/7/ROOT-4-130024585909318740 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: C:\Projects\Sample\ 
    Machine name: ComputerName

Process information: 
    Process ID: 2264 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\ SampleVssSrc 

Exception information: 
    Exception type: FileNotFoundException 
    Exception message: Could not load file or assembly 'CrystalDecisions.Web.resources, Version=12.0.2000.0, Culture=ar, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified. 

Request information: 
    Request URL: //localhost:90/Sample/ Sample.aspx?ReportFileName= Sample.rpt&ReportPath=../Reports/General/../ Sample /Sample ReportViewer.aspx?ReportFileName =Sample Daily.rpt&ReportPath=../Reports/General/&ServletTask=Print&cmd=get_res&langcode=ar 
    Request path: /Reports/ Sample ReportViewer.aspx 
    User host address: ::1 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: IIS APPPOOL\ SampleVssSrc

Thread information: 
    Thread ID: 6 
    Thread account name: IIS APPPOOL\ SampleVssSrc
    Is impersonating: False 
    Stack trace:    at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalGetSatelliteAssembly(CultureInfo culture, Version version, Boolean throwOnFileNotFound)
   at CrystalDecisions.Web.CrystalReportViewer.OnPrintGetResource()
   at CrystalDecisions.Web.CrystalReportViewer.HandlePrint()
   at CrystalDecisions.Web.CrystalReportViewer.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:35:17.597

我通过在 Page_Unload 事件中处理 Report Document 对象解决了这个问题，确保 Report document 对象是全局声明的。发生这种情况是由于临时文件夹内存，临时报告文件会被创建，但不会被处理。

# grails - Grails 脚本和使用 Groovy CLIBuilder 传递参数？

> ID：14292839
> 
> 赞同：0
> 
> 时间：2013-01-12T11:20:24.793
> 
> 标签：grails, groovy

我创建了一个非常简单的脚本，并希望将参数传递给脚本。

喜欢：

```
grails> helloworld -n Howdy
grails> helloworld -name Howdy 
```

使用脚本：

```
target(main: 'Hello World') {
    def cli = new CliBuilder()
    cli.with
            {
                h(longOpt: 'help', 'Help - Usage Information')
                n(longOpt: 'name', 'Name to say hello to', args: 1, required: true)
            }
    def opt = cli.parse(args)
    if (!opt) return
    if (opt.h) cli.usage()
    println "Hello ${opt.n}"
} 
```

我似乎在我所做的每一次尝试中都失败了。该脚本一直抱怨 -n 选项不存在。

当我调试脚本时，args 参数的值看起来像是重新排列的值。

使用以下命令调用脚本时：

```
grails> helloworld -n Howdy 
```

脚本中 args 的值是：**Howdy -n**

我在这里错过了什么做错了？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:20:11.483

您的问题是您正在通过`grails`shell 运行代码。我已将您的代码转换为`CLI.groovy`：

```
class CLI{
 public static void main(String [] args){
     def cli = new CliBuilder()
     cli.with
            {
                h(longOpt: 'help', 'Help - Usage Information')
                n(longOpt: 'name', 'Name to say hello to', args: 1, required: true)
             }
      def opt = cli.parse(args)
      if (!opt) return
      if (opt.h) cli.usage()
      println "Hello ${opt.n}"
      }
 } 
```

之后，我使用`groovy`命令从 linux shell 运行它：

```
 archer@capitan $ groovy CLI -n Daddy 
```

它输出：

```
 archer@capitan $ groovy CLI -n Daddy
 Hello Daddy 
```

所以它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T19:43:18.377

我做了一个谷歌搜索`site:github.com grailsScript CliBuilder`并遇到：

[https://github.com/Grails-Plugin-Consortium/grails-cxf/blob/master/scripts/WsdlToJava.groovy](https://github.com/Grails-Plugin-Consortium/grails-cxf/blob/master/scripts/WsdlToJava.groovy)

这给了我`args`变量需要格式化的提示。不幸的是，它`-n Howdy`变成了`Howdy\n-n`（不确定为什么要重新排列顺序或添加换行符）。

上面的 github 页面有一种`doSplit()`方法可以处理其中的一些问题，但它保持了重新排列的顺序。我发现最好的办法是删除 and 之间的空格`-n`，`Howdy`这将与 CliBuilder 一起使用。

以下是我的工作：

```
target(main: 'Hello World') {
    def cli = new CliBuilder()
    cli.with
            {
                h(longOpt: 'help', 'Help - Usage Information')
                n(longOpt: 'name', 'Name to say hello to', args: 1, required: true)
            }
    def ops = doSplit(args)
    def opt = cli.parse(ops)
    if (!opt) return
    if (opt.h) cli.usage()
    println "Hello ${opt.n}"
}

private doSplit(String string){
    string.split(/(\n|[ ]|=)/).collect{ it.trim() }.findResults  { it && it != '' ? it : null }
} 
```

运行这个：`helloworld -nHowdy`

# jquery - jQuery ButtonSet 刷新不起作用

> ID：14292840
> 
> 赞同：3
> 
> 时间：2013-01-12T11:20:31.390
> 
> 标签：jquery, jquery-ui, checkbox, refresh

# HTML

```
<div id="test">    
    <input type="checkbox" id="check1" class="checkall"/><label for="check1">1</label>
    <input type="checkbox" id="check2" class="checkall"/><label for="check2">2</label>
    <input type="checkbox" id="check3" class="checkall"/><label for="check3">3</label>
</div>
<br>
<input type="button" id="selectall" value="Select All"> 
```

# jQuery

```
$("#test").buttonset();
$("#selectall").button();
    $("#selectall").toggle(
          function () { $("#test .checkall").prop("checked", true).buttonset("refresh"); },
          function () { $("#test .checkall").prop("checked", false).buttonset("refresh"); }
      ); 
```

我想全选按钮被点击。但它不会在视觉上发生变化。如果您能提供帮助，我将不胜感激。

演示：http: [//jsfiddle.net/fenerama/zv8e4/](http://jsfiddle.net/fenerama/zv8e4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:27:30.770

`Buttonset`不是在这种情况下调用的适当方法。您需要改用`button`方法

[http://jsfiddle.net/zv8e4/3/](http://jsfiddle.net/zv8e4/3/)

```
$("#selectall").toggle(
      function () { $("#test .checkall").prop("checked", true).button("refresh"); },
      function () { $("#test .checkall").prop("checked", false).button("refresh"); }
  ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:35:59.943

如果您的意思是您也想更改“全选”按钮的视觉效果，那么最好也将其设为复选框。无论如何， sdepont 的答案在您需要在`button`其中使用而不是在某种意义上是正确的`buttonset`。

检查这个：http: [//jsfiddle.net/x3QY3/1/](http://jsfiddle.net/x3QY3/1/)

HTML：

```
<div id="test">    
    <input type="checkbox" id="check1" class="checkall"/><label for="check1">1</label>
    <input type="checkbox" id="check2" class="checkall"/><label for="check2">2</label>
    <input type="checkbox" id="check3" class="checkall"/><label for="check3">3</label>
</div>
<br>
  <input type="checkbox" id="selectall" value="Select All" /><label for="selectall">Select All</label> 
```

查询：

```
 $("#test").buttonset();
  $("#selectall").button();

$("#selectall").toggle(
      function () { $("#test .checkall").prop("checked", true).button("refresh"); $("#selectall").prop("checked", true).button("refresh");},
      function () { $("#test .checkall").prop("checked", false).button("refresh"); $("#selectall").prop("checked", false).button("refresh");}
  ); 
```

# lisp - 如何在 Windows 中安装 gtk-cffi？

> ID：14292846
> 
> 赞同：0
> 
> 时间：2013-01-12T11:21:23.317
> 
> 标签：lisp, common-lisp, asdf

[gtk-cffi](http://www.cliki.net/gtk-cffi)是 GTK+3 的 Lisp 绑定。我正在尝试在 Windows 上安装它。

起初我尝试了 Quicklisp，但它没有（有 gtk-cffi-utils，但它根本没有帮助）。我想从头开始安装它，但我不知道该怎么做......

有没有人可以给我一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:14:22.740

查看[gtk-cffi](http://common-lisp.net/project/gtk-cffi/)的页面，我发现它取决于：

*   CFFI
*   亚历山大港
*   迭代
*   cl-cairo2

我*相信*这些都可以通过 quicklisp 获得，所以我假设你可以得到所有这些。

看起来 gtk-cffi 没有官方版本，你必须从 CVS 中提取它。因此，如果您要将 gtk-cffi 存储库检出到某个目录，例如“c:/gtk-cffi”，您应该可以启动 lisp，确保 ASDF 可以加载 quicklisp 系统（包括上述依赖项） ， 做：

```
(push "c:/gtk-cffi/" asdf:*central-registry*) ;; change the pathname as needed, but be sure to end with "/"
(asdf:load-system "gtk-cffi") 
```

# image - 图像增强 - 从写入中清除给定图像

> ID：14292858
> 
> 赞同：4
> 
> 时间：2013-01-12T11:22:48.043
> 
> 标签：image, matlab, image-processing

![在此处输入图像描述](../Images/975c4e8e5773011008b6cd44b8d166a1.png)

我需要清理这张照片，删除“清理我”的文字并使其变亮。

作为我在图像处理课程中作业的一部分，我可以使用 matlab 函数 ginput 来查找图像中的特定点（当然在脚本中你应该硬编码你需要的坐标）。

您可以使用 conv2、fft2、ifft2、fftshift 等。

您还可以使用中位数、平均值、最大值、最小值、排序等。

我的基本想法是使用图片中间的白色和黑色值并将它们插入到黑白条的其他部分。然而，给图片一个非常合成的外观。

你能给我一个方向吗？中值滤波器不会给出好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:30:34.773

做这种事情的一般技术称为[Inpainting](http://en.wikipedia.org/wiki/Inpainting)。但为了做到这一点，您需要一个要绘制的区域的蒙版。所以，让我们假设我们设法获得了一个好的蒙版并考虑到这个蒙版的形态膨胀来修复原始图像：

![在此处输入图像描述](../Images/4733fe005023bc094972f75fdcacdf7e.png) ![在此处输入图像描述](../Images/640f6139e9453e8fab63fef8a76e8ab5.png)

为了得到那个面具，我们不需要任何花哨的东西。从原始图像与其中值滤波结果之间差异的二值化开始：

![在此处输入图像描述](../Images/ef46759fbd0ef3a3e8dfd619297ac906.png)

您可以删除孤立的像素；通过水平膨胀和另一个带有小正方形的膨胀的组合来连接代表国旗星星的像素；删除这个刚刚创建的最大组件；然后对初始掩码执行测地线膨胀，结果到目前为止。这给出了上面的好掩码。

现在修复有很多算法，但我发现的最简单的算法之一在[Fast Digital Image](http://elynxsdk.free.fr/ext-docs/Inpainting/todo/Fast_Digital_Image_Inpainting.pdf) Inpainting 中有描述，它应该很容易实现。我没有使用它，但您可以验证您可以获得哪些结果。

编辑：我错过了你也想提亮图像。

使图像变亮而不使较亮区域更亮的一种简单方法是应用 < 1 的 gamma 因子。对于图像更具体，您可以首先应用一个相对较大的低通滤波器，将其取反，将原始图像乘以它，然后应用伽马因子。在第二种情况下，最终图像可能会比第一个更暗，因此您将其乘以一个简单的标量值。以下是这两种情况的结果（左侧只是 gamma 0.6）：

![在此处输入图像描述](../Images/f73d2f29ceae21ca3d9ae97673b48b1b.png) ![在此处输入图像描述](../Images/45a499270d7a9908addd5fd23f39d38d.png)

如果您真的想使图像变亮，则可以应用双边过滤器并将其二值化：

![在此处输入图像描述](../Images/acf392fe39a8f404472d9d704a3ad61c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:02:55.723

我看到两个删除“清理我”的选项。两者都依赖于水平相似性。

1) 仅在水平方向使用长的一维低通滤波器。

2) 使用可能 10 像素长的一维中值滤波器

对于这两种解决方案，您当然必须排除星星部分。

在亮度方面，您可以尝试直方图均衡。然而，这并不能解决亮度的不均匀性。也许均衡之前的高通可以解决这个问题。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:00:31.997

删除文本的最简单方法是，如 KlausCPH 所说，在有条纹的区域中使用长的一维中值滤波器。为了不损坏星星，您需要保留这部分的备份并在中值滤波器运行后更换它。为此，您可以使用`ginput`标记星形部分的右下方：

```
% Mark lower right corner of star-region
figure();imagesc(Im);colormap(gray)
[xCorner,yCorner] = ginput(1);
close
xCorner = round(xCorner); yCorner = round(yCorner);

% Save star region
starBackup = Im(1:yCorner,1:xCorner);

% Clean up stripes
Im = medfilt2(Im,[1,50]);

% Replace star region
Im(1:yCorner,1:xCorner) = starBackup; 
```

这产生 ![在此处输入图像描述](../Images/f8a9fd721c29debfcb6ac0baae7fa4a7.png)

要解决曝光问题（中间部分比角落更亮），您可以将二维高斯模型拟合到您的图像并进行归一化。如果您想这样做，我建议您研究一下`fit`，尽管如果您以前没有使用过模型拟合，这可能有点技术性。

我发现的二维高斯看起来像这样： ![在此处输入图像描述](../Images/e14c708e27309fad35b40e9ca9ca5f93.png)

将这两件事放在一起，得出： ![在此处输入图像描述](../Images/4d29364d63881ca0d8c2621df5358567.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:20:17.287

我使用 gausswin() 函数来制作高斯。面具：

```
Pic_usa_g =  abs(1 - gausswin(  size(Pic_usa,2)  ));
Pic_usa_g = Pic_usa_g + 0.6;
Pic_usa_g = Pic_usa_g .* 2;
Pic_usa_g = Pic_usa_g';
C = repmat(Pic_usa_g, size(Pic_usa,1),1); 
```

![G_Mask](../Images/2f2659d4e65ba4f20fe90dbe48d735f1.png)

在将图像与蒙版相乘后，您将获得固定图像。

![水库](../Images/24483cb2de5e9740879b5497af069de4.png)

# ios - 如何将索引签出到工作目录中。它失败并出现错误：找不到参考'refs/heads/master'

> ID：14292860
> 
> 赞同：1
> 
> 时间：2013-01-12T11:22:50.843
> 
> 标签：ios, libgit2

我想在 libgit2 中使用 checkout 来模仿“git checkout”，但它失败了：

*   我已经阅读了[api文档](http://libgit2.github.com/libgit2/#HEAD/group/checkout/git_checkout_index)并使用了两种方法来设置第二个参数，
*   我阅读了 test_checkout 的示例，将第三个参数设置为`GIT_CHECKOUT_SAFE_CREATE` 但它还没有工作。
*   .git 文件夹中已经有一个`HEAD`文件。

这个怎么解决？？？

这是代码的结果：

```
2013-01-12 18:48:27.789 gitlib3[8661:907] git_repository_open ret:0 
2013-01-12 18:48:27.794 gitlib3[8661:907] get repository succeed.
2013-01-12 18:48:27.799 gitlib3[8661:907] count ret:1
2013-01-12 18:48:27.807 gitlib3[8661:907] git_checkout_index. ret:-9
2013-01-12 18:48:27.809 gitlib3[8661:907] err:Reference 'refs/heads/master' not found 
```

和代码本身：

```
(IBAction)Checkout:(id)sender {
    int ret = -1;
    git_repository *repo = NULL;
    NSArray *str = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docPath = [str objectAtIndex:0];
    NSString *localPath = [docPath stringByAppendingPathComponent:@"efg/.git"];
    ret = git_repository_open(&repo, [localPath UTF8String]);
    NSLog(@"git_repository_open ret:%d",ret);
    if(repo!=NULL)
    {
        NSLog(@"get repository succeed.");
    }
    git_checkout_opts opts = GIT_CHECKOUT_OPTS_INIT;
    opts.checkout_strategy = GIT_CHECKOUT_SAFE_CREATE;

    /*git_index *index = NULL;
    git_repository_index(&index, repo);
    if((ret = git_index_entrycount(index)) > 0)
    {
        NSLog(@"count ret:%d", ret);
    }
    ret = git_checkout_index(repo, index, &opts);*/
    ret = git_checkout_index(repo, NULL, &opts);
    NSLog(@"git_checkout_index. ret:%d",ret);
    const git_error *err = giterr_last();
    if(err == NULL)
    {
        NSLog(@"NULL");
    }
    else
    {
        NSLog(@"err:%s", err->message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:26:10.530

返回的错误代码（参见**[errors.h 标头](https://github.com/libgit2/libgit2/blob/development/include/git2/errors.h#L30)**）**-9**表示`GIT_EORPHANEDHEAD`（HEAD 指向一个还不存在的引用）。

对于 Git 存储库来说，孤立`HEAD`状态是完全有效的状态。例如，这发生在存储库刚刚初始化之后。但是，`git_checkout_index()`从新的 Git 存储库执行 a 的价值不大，但应该不会失败。

事实上，Git 不会失败

```
$ cd /tmp

$ mkdir so && cd so

$ git init .
Initialized empty Git repository in C:/Users/OneAmongMany/AppData/Local/Temp/so/.git/

$ git checkout-index

$ 
```

我怀疑这个错误可能来自**[这行代码](https://github.com/libgit2/libgit2/blob/development/src/checkout.c#L1176)**。

如果您确实在尝试签出新的 git 存储库，最好在**[libgit2 问题跟踪器](https://github.com/libgit2/libgit2/issues)**中创建问题。如果不是这种情况，请增强您的问题以添加更多背景信息。

## 更新

该问题**[已](https://github.com/libgit2/libgit2/issues/1236)**在 libgit2 存储库中修复。感谢您的举报！

# java - 如何用 mockito 模拟最后一堂课

> ID：14292863
> 
> 赞同：315
> 
> 时间：2013-01-12T11:23:01.203
> 
> 标签：java, junit, mockito

我有最后一堂课，是这样的：

```
public final class RainOnTrees{

   public void startRain(){

        // some code here
   }
} 
```

我在像这样的其他类中使用这个类：

```
public class Seasons{

   RainOnTrees rain = new RainOnTrees();

   public void findSeasonAndRain(){

        rain.startRain();

    }
} 
```

在我的 JUnit 测试类中，`Seasons.java`我想模拟`RainOnTrees`该类。我怎么能用 Mockito 做到这一点？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2016-10-13T10:19:39.907

**Mockito 2 现在支持 final**类和方法！

但就目前而言，这是一个“孵化”功能。它需要一些步骤来激活它，这些步骤[在 Mockito 2 中的新增功能中有所](https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#mock-the-unmockable-opt-in-mocking-of-final-classesmethods)描述：

> 最终类和方法的模拟是一个**孵化**、选择加入的特性。它结合使用 Java 代理工具和子类化，以实现这些类型的可模拟性。由于这与我们当前的机制不同，并且这个机制有不同的限制，并且我们想要收集经验和用户反馈，因此必须明确激活此功能才能使用；它可以通过 mockito 扩展机制通过创建`src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker`包含单行的文件来完成：
> 
> ```
> mock-maker-inline 
> ```
> 
> 创建此文件后，Mockito 将自动使用此新引擎，并且可以执行以下操作：
> 
> ```
>  final class FinalClass {
>    final String finalMethod() { return "something"; }
>  }
> 
>  FinalClass concrete = new FinalClass(); 
> 
>  FinalClass mock = mock(FinalClass.class);
>  given(mock.finalMethod()).willReturn("not anymore");
> 
>  assertThat(mock.finalMethod()).isNotEqualTo(concrete.finalMethod()); 
> ```
> 
> 在随后的里程碑中，团队将带来使用此功能的程序化方式。我们将为所有不可模拟的场景识别并提供支持。请继续关注，请让我们知道您对此功能的看法！

* * *

## 回答 #2

> 赞同：247
> 
> 时间：2013-01-12T11:26:14.870

[只能使用 Mockito v2 模拟最终/静态类/方法。](https://stackoverflow.com/a/40018295/208809)

将此添加到您的 gradle 文件中：

```
testImplementation 'org.mockito:mockito-inline:2.13.0' 
```

Mockito v1 无法做到这一点，来自[Mockito FAQ](https://github.com/mockito/mockito/wiki/FAQ#what-are-the-limitations-of-mockito)：

> Mockito 的局限性是什么
> 
> *   需要java 1.5+
>     
>     
> *   无法模拟最终课程
>     
>     
> 
> ...

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2018-02-22T08:47:54.983

在你的构建文件中添加这个：

*   如果使用[gradle](https://gradle.org/)：`build.gradle`

```
testImplementation 'org.mockito:mockito-inline:2.13.0' 
```

*   如果使用[Maven](https://maven.apache.org/)：`pom.xml`

```
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-inline</artifactId>
    <version>2.13.0</version>
    <scope>test</scope>
</dependency> 
```

这是使 mockito 与 final 类一起工作的配置

如果您遇到将**Byte Buddy**依赖项添加到`Could not initialize inline Byte Buddy mock maker. (This mock maker is not supported on Android.)` 文件中：**`build.gradle`**

 **```
testImplementation 'net.bytebuddy:byte-buddy-agent:1.10.19' 
```

源：[https ://mvnrepository.com/artifact/net.bytebuddy/byte-buddy](https://mvnrepository.com/artifact/net.bytebuddy/byte-buddy)

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2013-01-12T11:39:55.103

你不能用 Mockito 模拟最后一堂课，因为你不能自己做。

我所做的是创建一个非最终类来包装最终类并用作委托。这方面的一个例子是[`TwitterFactory`](http://twitter4j.org/javadoc/twitter4j/TwitterFactory.html)类，这是我的可模拟类：

```
public class TwitterFactory {

    private final twitter4j.TwitterFactory factory;

    public TwitterFactory() {
        factory = new twitter4j.TwitterFactory();
    }

    public Twitter getInstance(User user) {
        return factory.getInstance(accessToken(user));
    }

    private AccessToken accessToken(User user) {
        return new AccessToken(user.getAccessToken(), user.getAccessTokenSecret());
    }

    public Twitter getInstance() {
        return factory.getInstance();
    }
} 
```

缺点是样板代码很多；优点是您可以添加一些可能与您的应用程序业务相关的方法（例如在上述情况下获取用户而不是 accessToken 的 getInstance）。

在您的情况下，我将创建一个`RainOnTrees`委托给最终类的非最终类。或者，如果你可以使它成为非最终版本，那就更好了。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2013-01-13T20:07:16.233

使用 Powermock。此链接显示如何操作：[https ://github.com/jayway/powermock/wiki/MockFinal](https://github.com/jayway/powermock/wiki/MockFinal)

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2019-12-28T15:32:53.473

在 Mockito 3 及更多版本中，我遇到了同样的问题并从这个链接修复了它

[使用 Mockito 模拟最终类和方法](https://www.baeldung.com/mockito-final#configure-mocktio) 如下

> 在 Mockito 可以用于模拟 final 类和方法之前，需要 > 配置它。
> 
> 我们需要在项目的 src/test/resources/mockito-extensions 目录中添加一个名为 org.mockito.plugins.MockMaker 的文本文件，并添加一行文本：
> 
> ```
> mock-maker-inline 
> ```
> 
> Mockito 在加载时会检查扩展目录中的配置文件。此文件启用最终方法和类的模拟。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2017-07-05T22:42:01.353

只是为了跟进。请将此行添加到您的 gradle 文件中：

```
testCompile group: 'org.mockito', name: 'mockito-inline', version: '2.8.9' 
```

我尝试过各种版本的 mockito-core 和 mockito-all。它们都不起作用。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-07-14T21:47:26.443

我猜你这样做是`final`因为你想阻止其他类扩展`RainOnTrees`. 正如[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)所建议的那样（第 15 项），还有另一种方法可以让类关闭以进行扩展而无需创建它`final`：

1.  删除`final`关键字；

2.  制作它的构造函数`private`。没有类能够扩展它，因为它不能调用`super`构造函数；

3.  创建一个静态工厂方法来实例化您的类。

    ```
    // No more final keyword here.
    public class RainOnTrees {

        public static RainOnTrees newInstance() {
            return new RainOnTrees();
        }

        private RainOnTrees() {
            // Private constructor.
        }

        public void startRain() {

            // some code here
        }
    } 
    ```

通过使用此策略，您将能够使用 Mockito 并保持您的类关闭，以便使用少量样板代码进行扩展。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2013-12-10T11:35:22.017

我有同样的问题。由于我试图模拟的类是一个简单的类，我只是创建了它的一个实例并返回它。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-02-02T15:46:39.230

在某些情况下可能适用的另一种解决方法是创建一个由该最终类实现的接口，更改代码以使用该接口而不是具体类，然后模拟该接口。这使您可以将合同（接口）与实现（最终类）分开。当然，如果你真正想要的是绑定到最终类，这将不适用。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-05-21T22:47:39.497

为在 Android + Kotlin 上面临相同问题（Mockito + Final Class）的人节省时间。在 Kotlin 中，类默认是 final 的。我在一个带有 Architecture 组件的 Google Android 示例中找到了解决方案。从这里挑选的解决方案：[https ://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample](https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample)

创建以下注释：

```
/**
 * This annotation allows us to open some classes for mocking purposes while they are final in
 * release builds.
 */
@Target(AnnotationTarget.ANNOTATION_CLASS)
annotation class OpenClass

/**
 * Annotate a class with [OpenForTesting] if you want it to be extendable in debug builds.
 */
@OpenClass
@Target(AnnotationTarget.CLASS)
annotation class OpenForTesting 
```

修改你的 gradle 文件。以这里为例：[https ://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle](https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/build.gradle)

```
apply plugin: 'kotlin-allopen'

allOpen {
    // allows mocking for classes w/o directly opening them for release builds
    annotation 'com.android.example.github.testing.OpenClass'
} 
```

现在您可以注释任何类以使其开放以供测试：

```
@OpenForTesting
class RepoRepository 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-11-20T12:17:34.307

试试这个：

```
Mockito.mock(SomeMockableType.class,AdditionalAnswers.delegatesTo(someInstanceThatIsNotMockableOrSpyable)); 
```

它对我有用。“SomeMockableType.class”是您要模拟或监视的父类，而 someInstanceThatIsNotMockableOrSpyable 是您要模拟或监视的实际类。

有关更多详细信息，请查看[此处](http://code.google.com/p/mockito/issues/detail?id=145)

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-08-24T16:06:24.870

实际上有一种方法，我用它来进行间谍活动。只有满足两个先决条件，它才会为您工作：

1.  您使用某种 DI 来注入 final 类的实例
2.  final 类实现一个接口

请回忆一下[Effective Java](https://rads.stackoverflow.com/amzn/click/0321356683)中的第 16 条。您可以创建一个包装器（不是最终的）并将所有调用转发到最终类的实例：

```
public final class RainOnTrees implement IRainOnTrees {
    @Override public void startRain() { // some code here }
}

public class RainOnTreesWrapper implement IRainOnTrees {
    private IRainOnTrees delegate;
    public RainOnTreesWrapper(IRainOnTrees delegate) {this.delegate = delegate;}
    @Override public void startRain() { delegate.startRain(); }
} 
```

现在你不仅可以模拟你的最后一堂课，还可以监视它：

```
public class Seasons{
    RainOnTrees rain;
    public Seasons(IRainOnTrees rain) { this.rain = rain; };
    public void findSeasonAndRain(){
        rain.startRain();
   }
}

IRainOnTrees rain = spy(new RainOnTreesWrapper(new RainOnTrees()) // or mock(IRainOnTrees.class)
doNothing().when(rain).startRain();
new Seasons(rain).findSeasonAndRain(); 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-02-05T10:22:14.227

如果您使用的是 Mockito2，则可以这样做，它具有支持模拟最终类和方法的新孵化功能。

**需要注意的要点：**
1\. 创建一个名为“org.mockito.plugins.MockMaker”的简单文件，并将其放在名为“mockito-extensions”的文件夹中。这个文件夹应该在类路径中可用。
2\. 上面创建的文件的内容应该是一行，如下所示：
**mock-maker-inline**

上述两个步骤是激活 mockito 扩展机制并使用此选择加入功能所必需的。

示例类如下：-

最终类.java

```
public final class FinalClass {

public final String hello(){
    System.out.println("Final class says Hello!!!");
    return "0";
} 
```

}

Foo.java

```
public class Foo {

public String executeFinal(FinalClass finalClass){
    return finalClass.hello();
} 
```

}

FooTest.java

```
public class FooTest {

@Test
public void testFinalClass(){
    // Instantiate the class under test.
    Foo foo = new Foo();

    // Instantiate the external dependency
    FinalClass realFinalClass = new FinalClass();

    // Create mock object for the final class. 
    FinalClass mockedFinalClass = mock(FinalClass.class);

    // Provide stub for mocked object.
    when(mockedFinalClass.hello()).thenReturn("1");

    // assert
    assertEquals("0", foo.executeFinal(realFinalClass));
    assertEquals("1", foo.executeFinal(mockedFinalClass));

} 
```

}

希望能帮助到你。

此处提供完整的文章[mocking-the-unmockable](https://dzone.com/articles/mocking-the-unmockable-the-mockito2-way)。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2014-07-18T03:19:19.063

是的，同样的问题，我们不能用 Mockito 模拟最终课程。准确地说，Mockito 不能模拟/监视以下内容：

*   最后的课程
*   匿名类
*   原始类型

但是在我看来，使用包装类似乎要付出很大的代价，所以请改用 PowerMockito。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-03-11T09:36:32.620

我认为您需要在原则上进行更多思考。相反，您最终的课程使用他的接口和模拟接口。

为了这：

```
 public class RainOnTrees{

   fun startRain():Observable<Boolean>{

        // some code here
   }
} 
```

添加

```
interface iRainOnTrees{
  public void startRain():Observable<Boolean>
} 
```

并模拟你的界面：

```
 @Before
    fun setUp() {
        rainService= Mockito.mock(iRainOnTrees::class.java)

        `when`(rainService.startRain()).thenReturn(
            just(true).delay(3, TimeUnit.SECONDS)
        )

    } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-10-31T20:46:41.860

请看[JMockit](http://jmockit.github.io/)。它有大量文档和大量示例。在这里，您有一个解决问题的示例（为了简化，我添加了构造函数`Seasons`来注入模拟`RainOnTrees`实例）：

```
package jmockitexample;

import mockit.Mocked;
import mockit.Verifications;
import mockit.integration.junit4.JMockit;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(JMockit.class)
public class SeasonsTest {

    @Test
    public void shouldStartRain(@Mocked final RainOnTrees rain) {
        Seasons seasons = new Seasons(rain);

        seasons.findSeasonAndRain();

        new Verifications() {{
            rain.startRain();
        }};
    }

    public final class RainOnTrees {
        public void startRain() {
            // some code here
        }

    }

    public class Seasons {

        private final RainOnTrees rain;

        public Seasons(RainOnTrees rain) {
            this.rain = rain;
        }

        public void findSeasonAndRain() {
            rain.startRain();
        }

    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-12-08T21:59:31.480

RC 和 Luigi R. Viggiano 共同提供的解决方案可能是最好的主意。

尽管 Mockito在设计**上不能**模拟最终类，但委托方法**是可能的**。这有它的优点：

1.  如果这是您的 API 最初的意图，您不会被迫将您的类更改为非最终类（最终类有其[好处](https://books.google.com/books?id=ka2VUBqHiWkC&pg=PA87&lpg=PA87&dq=bloch%20effective%20java%20item%2017&source=bl&ots=yZGoOfo2VY&sig=ke5qo7Dw9IkMLKq0dyTIfbTuzyk&hl=en&sa=X&sqi=2&ved=0ahUKEwj_-Kn_n83JAhWJGY4KHc-HB2UQ6AEIMjAD#v=onepage&q=bloch%20effective%20java%20item%2017&f=false)）。
2.  您正在测试围绕您的 API进行[装饰](https://en.wikipedia.org/wiki/Decorator_pattern)的可能性。

在您的测试用例中，您故意将调用转发到被测系统。因此，按照设计，您的装饰不会*做*任何事情。

因此，您的测试还可以证明用户只能装饰 API 而不能扩展它。

在更主观的方面：我更喜欢将框架保持在最低限度，这就是为什么 JUnit 和 Mockito 通常对我来说就足够了。事实上，限制这种方式有时也会迫使我永远重构。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-12-05T21:56:42.347

如果您尝试在**test**文件夹下运行单元测试，则最佳解决方案很好。只需按照它添加扩展名即可。

但是，如果您想使用**androidtest**文件夹下的上下文或活动等与**android 相关**的类来运行它，[那么答案](https://stackoverflow.com/a/50457516/3531558)就是给您的。

 *** * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-04-20T14:54:27.127

添加这些依赖项以成功运行 mockito：

**testImplementation 'org.mockito:mockito-core:2.24.5'
testImplementation "org.mockito:mockito-inline:2.24.5"**

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-07-14T13:50:20.617

根据这个 GitHub 问题，**mockito-android****不支持**模拟最终类。您应该为此使用 Mockk。

 **对于单元测试和 ui 测试，您都可以毫无问题地使用 Mockk。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-03-26T17:01:18.040

如果您需要在 Android 的仪器测试中使用 Mockito（即在 Android 设备上运行），则不能使用`mockito-inline`. 有一个特殊`mockito-android`版本也不能解决“final class”问题。唯一可行的解​​决方案是[Dexmaker library](https://github.com/linkedin/dexmaker)。唯一的限制是它仅适用于 Android P（Android 9，API 28）及更高版本。可以按如下方式导入：

```
androidTestImplementation "com.linkedin.dexmaker:dexmaker-mockito-inline:2.28.1" 
```

请注意，还有一个“dexmaker-mockito”版本也不适用于最终课程。确保导入“dexmaker-mockito-inline”。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-01-05T13:54:49.727

正如其他人所说，这不适用于 Mockito。我建议使用反射来设置被测代码正在使用的对象上的特定字段。如果您发现自己经常这样做，您可以将此功能包装在一个库中。

顺便说一句，如果您是最后一个打分班，请停止这样做。我遇到了这个问题，因为我正在使用一个 API，其中所有内容都标记为 final 以防止我对扩展（模拟）的合法需求，我希望开发人员没有假设我永远不需要扩展类。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-03-05T19:16:14.380

对我们来说，这是因为我们从 koin-test 中排除了 mockito-inline。一个 gradle 模块实际上需要这个，因此仅在发布版本中失败（IDE 中的调试版本有效）:-P

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-01-09T10:04:55.187

对于最终类，在下面添加模拟并调用静态或非静态。

1-将其添加到类级别 @SuppressStatucInitializationFor(value ={class name with package})
2- PowerMockito.mockStatic(classname.class) 将模拟类
3-然后在调用此类的方法时使用您的 when 语句返回模拟对象。

享受

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-01-06T21:34:22.503

我能够克服这个消息：

> org.mockito.exceptions.base.MockitoException：无法模拟/间谍类 org.slf4j.impl.Log4jLoggerAdapter Mockito 无法模拟/间谍，因为：
> 
> *   最终或匿名类

由此：`log = spy(log);`

通过使用它来代替：

`log = mock(Logger.class);`

然后它工作。

我猜“默认”记录器适配器是最终类的一个实例，所以我不能“窥探”它，但我可以模拟整个事情。去搞清楚...

这可能意味着如果您也有方便的话，您可以将它替换为其他一些“非最终”实例。或简化版本等。FWIW ...

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2021-04-30T06:04:40.290

现在是 2021 年，对于所有来到这里为这个 javaTest 更新 kotlin 类问题寻找答案的新人来说。对于他们的旧代码库。

> 现在是逐步开始将测试类从 Java 迁移到 kotlin 的时候了。
> 
> 1.  请创建类似于 javaTest 的新 kotlin 测试类。
> 2.  仅编写您当前正在影响的测试，作为旧 Java 测试用例更改的一部分。

你应该使用 MockK 请参考[https://mockk.io/](https://mockk.io/)

以上暗示在您将一些新的 kotlin 类插入旧的 Java 实现并旨在顺利更新测试类的情况下。

上面的场景已经学习测试好了。

注意：我知道这不是答案，但值得分享我在处理遗留代码库时学到的策略。

* * *

## 回答 #28

> 赞同：-5
> 
> 时间：2016-05-03T07:49:21.637

没有尝试最终，但对于私有，使用反射删除修饰符有效！进一步检查，它不适用于final。******

# windows - vim clang_complete VIo4231.tmp 丢失

> ID：14292865
> 
> 赞同：1
> 
> 时间：2013-01-12T11:23:02.420
> 
> 标签：windows, vim, clang, clang-complete

我为vim安装了clang_complete插件，每当代码完成时，它都会给我这个错误（设置g：clang_complete_copen = 1时，我可以看到错误）

> 处理函数 ClangComplete..32_ClangCompleteBinary：第 15 行 E484：无法打开文件 C:\Users\GEBRUI~1\AppData\Local\Temp\VIo811.tmp 时检测到错误

当我开始寻找该文件时不存在。

# mysql - mysql 中除主列以外的插入或更新

> ID：14292867
> 
> 赞同：0
> 
> 时间：2013-01-12T11:23:21.610
> 
> 标签：mysql, insert

我有一个包含以下列的表格

```
id -> VARCHAR (PRIMARY KEY)
data -> TEXT
user_id -> VARCHAR 
```

如果行不存在，我想插入到这个表中。否则更新`data`列并保持其他所有内容不变。目前我正在这样做

`REPLACE INTO collate(id,user_id,data)VALUE('$id','$user_id','$data')`. 但这会删除 a 行（如果找到），然后再次插入。它是服务器密集型的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:26:38.240

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:39:06.777

您应该检查以下 URL [insert-on-duplicate](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html) (INSERT ... ON DUPLICATE KEY UPDATE Syntax )

# java - 应用引擎 (Java) 上的可靠分布式缓存

> ID：14292870
> 
> 赞同：1
> 
> 时间：2013-01-12T11:23:28.173
> 
> 标签：java, google-app-engine, caching

我需要在内存中保留一些值，类似于内存数据库。在可靠性方面，我不怕系统故障，我可以忍受。但是，我不能使用 memcache 服务，因为这些值可以随时被驱逐。当应用程序扩展时，我需要这些值在其他机器上可用。我想 appengine 不会使内存扩展或会扩展（例如，如果我将值保存在普通的 Java 集合中）？

我在这里想要实现的是“选择昵称”服务。这分两步进行。首先，用户保留昵称。然后他注册了昵称。昵称存储在一个实体组下（原文如此！）。因此，我需要避免数据存储争用。

据我从[https://developers.google.com/appengine/articles/scaling/memcache](https://developers.google.com/appengine/articles/scaling/memcache)了解到，我可以在一定程度上依赖于 memcache 中的值不应因任意原因而被驱逐。但是，我必须指望这会不时发生（例如在高内存水平上）。这种价值损失对我的用户来说是非常不愉快的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:12:28.570

您的应用程序共享一个 Memcache 实例，它不是“机器”（或者更确切地说是您的应用程序实例）的本地实例。

因此，如果您正在运行 2 个实例并且它们都从 memcache 中检索相同的值，那么它们都将获得相同的值。

在云中运行“内存中”数据库是不可行的——你打算使用什么内存，实例中即将关闭的内存？

[https://developers.google.com/appengine/articles/scaling/memcache](https://developers.google.com/appengine/articles/scaling/memcache)

> 在设计您的应用程序时，请花时间考虑可以缓存哪些数据集以供将来重用。这些可能是经常查看的页面或经常读取的数据存储实体，仅举几例。您的应用程序中可能还有一些数据您希望在应用程序的所有实例之间共享，但不需要永久保存。在这种情况下，memcache 可以通过为瞬态数据提供快速高效的分布式存储系统来提高应用程序的可扩展性。将 memcache 逻辑添加到服务器端代码通常是非常值得的几行额外代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:10:23.443

当您使用 Python27 时，您可以使用应用引擎 NDB。NDb 是一个具有自动缓存等功能的数据存储。

其他机器？您的意思是在同一应用程序的实例之间共享。

# wpf - WPF 3D旋转球体GUI

> ID：14292873
> 
> 赞同：3
> 
> 时间：2013-01-12T11:23:44.377
> 
> 标签：wpf, 3d, geometry

我一直在尝试在 WPF 中为我的课堂作业制作一个 3D 用户界面，但我遇到了一个我现在 2-3 天都无法解决的问题。我试图用谷歌搜索答案，我查看了一些 stackoverflow 帖子，但还没有一个帮助我解决这个问题。

所以情况就是这样：我有一个 3D 球体，上面放了 2 个按钮。一个按钮使球体的材质变得透明，另一个旋转整个界面（球体+按钮）...问题是球体透明时的纹理仍然存在，所以我不能当它们位于球体的另一侧时看到按钮......我希望至少能看到按钮背景......

任何帮助将不胜感激。

这是我的 XAML：

```
<Window x:Class="RacunalnaGrafika_seminar.SphereWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:src="clr-namespace:RacunalnaGrafika_seminar"
    AllowsTransparency="True"
    WindowStyle="None"
    Title="SphereWindow">

<Window.Resources>
    <src:SphereMeshGenerator x:Key="SphereGenerator" Center="0 0 0" Radius="0.5" />
</Window.Resources>

<Viewport3D x:Name="myViewport3D">

    <Viewport3D.Children>

        <ModelVisual3D>

            <Viewport2DVisual3D Geometry="{Binding Source={StaticResource SphereGenerator}, Path=Geometry}">

                <Viewport2DVisual3D.Material>
                    <MaterialGroup>
                        <DiffuseMaterial Viewport2DVisual3D.IsVisualHostMaterial="True"/>
                        <SpecularMaterial Brush="#00FFFFFF" SpecularPower="50"/>
                    </MaterialGroup>
                </Viewport2DVisual3D.Material>

                <Viewport2DVisual3D.Transform>
                    <RotateTransform3D>
                        <RotateTransform3D.Rotation>
                            <AxisAngleRotation3D x:Name="Hax" Axis="0 1 0" />
                        </RotateTransform3D.Rotation>
                    </RotateTransform3D>
                </Viewport2DVisual3D.Transform>

                    <Viewport2DVisual3D.Visual>
                    <Canvas Background="Transparent" Width="500" Height="500">
                        <StackPanel Canvas.Top="150">
                            <Button Content="Rotate" Padding="10" >
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Button.Click">
                                        <BeginStoryboard>
                                            <Storyboard TargetName="RotateInterface" TargetProperty="Angle">
                                                <DoubleAnimation From="0" To="360" RepeatBehavior="1x" Duration="0:0:5" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Padding="10" Content="Click me" Click="Button_Click_1">
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Button.Click">
                                        <BeginStoryboard>
                                            <Storyboard TargetName="SphereMaterial" TargetProperty="Color">
                                                <ColorAnimation To="Transparent" RepeatBehavior="1x" Duration="0:0:5" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Button.Triggers>
                            </Button>
                        </StackPanel>
                    </Canvas>
                </Viewport2DVisual3D.Visual>
            </Viewport2DVisual3D>

            <ModelVisual3D.Content>

                <Model3DGroup x:Name="SphereModel3DGroup">

                    <GeometryModel3D  x:Name="SphereGeometryModel" Geometry="{Binding Source={StaticResource SphereGenerator}, Path=Geometry}">

                        <GeometryModel3D.BackMaterial>
                            <DiffuseMaterial x:Name="SphereBackMaterial" Brush="Transparent" />
                        </GeometryModel3D.BackMaterial>

                        <GeometryModel3D.Material>
                            <DiffuseMaterial x:Name="SphereMaterial" > 
                                <DiffuseMaterial.Brush>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FF000000" Offset="1" />
                                        <GradientStop Color="#FF555555" Offset="0" />
                                    </RadialGradientBrush>
                                </DiffuseMaterial.Brush>
                            </DiffuseMaterial>
                        </GeometryModel3D.Material>

                        <GeometryModel3D.Transform>
                            <TranslateTransform3D />
                        </GeometryModel3D.Transform>
                    </GeometryModel3D>

                    <AmbientLight Color="White" />

                </Model3DGroup>
            </ModelVisual3D.Content>

            <ModelVisual3D.Transform>
                <RotateTransform3D>
                    <RotateTransform3D.Rotation>
                        <AxisAngleRotation3D x:Name="RotateInterface" Axis="0 1 0" />
                    </RotateTransform3D.Rotation>
                </RotateTransform3D>
            </ModelVisual3D.Transform>

        </ModelVisual3D>

    </Viewport3D.Children>

    <Viewport3D.Camera>
        <PerspectiveCamera Position="0 0 -3" LookDirection="0 0 1" UpDirection="0 1 0" FieldOfView="45" />
    </Viewport3D.Camera>

</Viewport3D> 
```

这是取自 Charles Petzold 的球体生成器：

```
using System;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Media3D;

namespace RacunalnaGrafika_seminar
{
  public class SphereMeshGenerator
  {
    private int _slices = 32;
    private int _stacks = 16;
    private Point3D _center = new Point3D();
    private double _radius = 1;

    public int Slices
    {
        get { return _slices; }
        set { _slices = value; }
    }

    public int Stacks
    {
        get { return _stacks; }
        set { _stacks = value; }
    }

    public Point3D Center
    {
        get { return _center; }
        set { _center = value; }
    }

    public double Radius
    {
        get { return _radius; }
        set { _radius = value; }
    }

    public MeshGeometry3D Geometry
    {
        get
        {
            return CalculateMesh();
        }
    }

    private MeshGeometry3D CalculateMesh()
    {
        MeshGeometry3D mesh = new MeshGeometry3D();

        for (int stack = 0; stack <= Stacks; stack++)
        {
            double phi = Math.PI / 2 - stack * Math.PI / Stacks; // kut koji zamisljeni pravac povucen iz sredista koordinatnog sustava zatvara sa XZ ravninom. 
            double y = _radius * Math.Sin(phi); // Odredi poziciju Y koordinate. 
            double scale = -_radius * Math.Cos(phi);

            for (int slice = 0; slice <= Slices; slice++)
            {
                double theta = slice * 2 * Math.PI / Slices; // Kada gledamo 2D koordinatni sustav osi X i Z... ovo je kut koji zatvara zamisljeni pravac povucen iz sredista koordinatnog sustava sa Z osi ( Z = Y ). 
                double x = scale * Math.Sin(theta); // Odredi poziciju X koordinate. Uoči da je scale = -_radius * Math.Cos(phi)
                double z = scale * Math.Cos(theta); // Odredi poziciju Z koordinate. Uoči da je scale = -_radius * Math.Cos(phi)

                Vector3D normal = new Vector3D(x, y, z); // Normala je vektor koji je okomit na površinu. U ovom slučaju normala je vektor okomit na trokut plohu trokuta. 
                mesh.Normals.Add(normal);                
                mesh.Positions.Add(normal + Center);     // Positions dobiva vrhove trokuta. 
                mesh.TextureCoordinates.Add(new Point((double)slice / Slices, (double)stack / Stacks));
                // TextureCoordinates kaže gdje će se neka točka iz 2D-a preslikati u 3D svijet. 
            }
        }

        for (int stack = 0; stack <= Stacks; stack++)
        {
            int top = (stack + 0) * (Slices + 1);
            int bot = (stack + 1) * (Slices + 1);

            for (int slice = 0; slice < Slices; slice++)
            {
                if (stack != 0)
                {
                    mesh.TriangleIndices.Add(top + slice);
                    mesh.TriangleIndices.Add(bot + slice);
                    mesh.TriangleIndices.Add(top + slice + 1);
                }

                if (stack != Stacks - 1)
                {
                    mesh.TriangleIndices.Add(top + slice + 1);
                    mesh.TriangleIndices.Add(bot + slice);
                    mesh.TriangleIndices.Add(bot + slice + 1);
                }
            }
        }

        return mesh;
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:57:34.357

好的，我刚刚意识到我不能这样做，因为按钮没有背面定义......在删除定义球体的 GeometryModel3D 并单击旋转按钮后，我注意到发生了同样的事情，这意味着那里没有按钮...我不敢相信我没有早点想到这一点。

感谢任何花时间阅读我的问题的人。

# visualization - 通过处理可视化正弦波

> ID：14292877
> 
> 赞同：0
> 
> 时间：2013-01-12T11:24:16.150
> 
> 标签：visualization, processing, data-visualization

我有 1000 多行随时间变化的正弦波数据，我想用处理语言将其可视化。我的目标是创建一个动画，它将随着时间从矩形 [高度/2] 的中间开始绘制正弦波。我还想只显示该波的 1 秒周期。我的意思是 1 秒后，第一个坐标应该消失，依此类推。

我怎样才能做到这一点？谢谢

样本数据 ：

```
 TIME   X   Y
0.1333  0   0
0.2666  0.1 0.0999983333
0.3999  0.2 0.1999866669
0.5332  0.3 0.299955002
0.6665  0.4 0.3998933419
0.7998  0.5 0.4997916927
0.9331  0.6 0.5996400648
1.0664  0.7 0.6994284734 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:59:22.447

您实现这一目标的方法是将这个项目拆分为任务：

1.  加载和解析数据
2.  更新时间和渲染数据

为了确保第 1 部分顺利进行，最好先确保您的数据易于解析。示例数据看起来像一个表格/电子表格，但它没有使用标准分隔符（例如逗号或制表符）格式化。您可以在解析时摆弄一些东西，但我建议首先使用干净的数据，例如，如果您打算`space`用作分隔符：

```
 TIME  X   Y
0.1333 0.0 0
0.2666 0.1 0.0999983333
0.3999 0.2 0.1999866669
0.5332 0.3 0.299955002
0.6665 0.4 0.3998933419
0.7998 0.5 0.4997916927
0.9331 0.6 0.5996400648
1.0664 0.7 0.6994284734 
```

完成后，您可以使用[loadStrings()](http://processing.org/reference/loadStrings_.html)加载数据并使用[split()](http://processing.org/reference/split_.html)将一行分成 3 个元素，这些元素可以从字符串转换为浮点数。

一旦你有了使用价值，你就可以存储它们。您可以创建三个数组，每个数组保存一个来自加载数据的字段（一个用于所有 X 值，一个用于所有 Y 值，一个用于所有时间值），或者您可以作弊并使用单个[PVector](http://processing.org/reference/PVector.html)对象数组。虽然 PVector 用于 3D 数学/线性代数，但您有 2D 坐标，因此您可以将时间存储为第 3 个“维度”/分量。

第二部分主要围绕基于时间的更新展开，这就是[millis()](http://processing.org/reference/millis_.html)派上用场的地方。您可以检查更新之间经过的时间量，如果它大于某个（延迟）值，则该进行另一次更新（帧/数据行索引）。

您需要担心的最后一部分是在屏幕上呈现数据。幸运的是，在您的示例数据中，坐标已标准化（介于 0.0 和 1.0 之间），这使得映射到草图尺寸变得容易（通过使用简单的乘法）。否则[map()](http://processing.org/reference/map_.html)函数会派上用场。

这是说明上述内容的草图，data.csv 是一个文本文件，其中包含上面的格式化示例数据：

```
PVector[] frames;//keep track of the frame data(position(x,y) and time(store in PVector's z property))
int currentFrame = 0,totalFrames;//keep track of the current frame and total frames from the csv
int now, delay = 1000;//keep track of time and a delay to update frames

void setup(){
  //handle data
  String[] rows = loadStrings("data.csv");//load data
  totalFrames = rows.length-1;//get total number of lines (-1 = sans the header)
  frames = new PVector[totalFrames];//initialize/allocate frame data array 
  for(int i = 1 ; i <= totalFrames; i++){//start parsing data(from 1, skip header)
    String[] frame = rows[i].split(" ");//chop each row into 3 strings(time,x,y)
    frames[i-1] = new PVector(float(frame[1]),float(frame[2]),float(frame[0]));//parse each row(not i-1 to get back to 0 index) and how the PVector's initialized 1,2,0 (x,y,time)
  }
  now = millis();//initialize this to keep track of time
  //render setup, up to you
  size(400,400);smooth();fill(0);strokeWeight(15);
}
void draw(){
  //update
  if(millis() - now >= delay){//if the amount of time between the current millis() and the last time we updated is greater than the delay (i.e. every 'delay' ms)
    currentFrame++;//update the frame index
    if(currentFrame >= totalFrames) currentFrame = 0;//reset to 0 if we reached the end
    now = millis();//finally update our timer/stop-watch variable
  }
  PVector frame = frames[currentFrame];//get the data for the current frame
  //render
  background(255);
  point(frame.x * width,frame.y * height);//draw
  text("frame index: " + currentFrame + " data: " + frame,mouseX,mouseY);
} 
```

还需要一些额外的注意事项：

1.  您提到在 1 秒后移动到下一个坐标。从我在您的示例数据中可以看到，每秒有 8 次更新，因此 1000/8 可能会更好。不过，这取决于您如何处理时间。
2.  我假设你的全套包括正弦波运动的数据。我已经映射到完整坐标，但是在`draw()`循环的渲染部分，您可以随意映射（例如，包括高度/2 偏移等）。此外，如果您不熟悉正弦波，请查看以下处理资源：[Daniel Shiffman 的 SineWave 示例](http://processing.org/learning/basics/sinewave.html)、[Ira Greenberg 的三角教程](http://processing.org/learning/trig/)。

# batch-file - 连接 url 和一行的批处理

> ID：14292878
> 
> 赞同：0
> 
> 时间：2013-01-12T11:24:30.257
> 
> 标签：batch-file, cmd

有没有加入 url 和 line 就像这样

基本网址 [http://google.com](http://google.com)

输入

```
dog
cow
milk 
```

输出

```
http://google.com/dog
http://google.com/cow
http://google.com/milk 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:58:20.387

```
@echo off
for %%a in ( dog cat pig ) DO (
    echo http://www.google.com/%%a
) 
```

# java - 为什么在接口中允许实现

> ID：14292881
> 
> 赞同：0
> 
> 时间：2013-01-12T11:24:41.923
> 
> 标签：java, interface, static, inner-classes

> **可能重复：**
> [为什么接口中没有静态方法，但静态字段和内部类可以？](https://stackoverflow.com/questions/129267/why-no-static-methods-in-interfaces-but-static-fields-and-inner-classes-ok)

我想知道为什么接口不允许静态块，但它们允许声明静态变量。如果我想在某些逻辑上初始化静态变量怎么办。

编辑：早些时候我没有以更好的形式发布我的查询，但这是我的示例代码查询。请调查一下。

```
interface A {
    static class XYZ {
        public static void methodA() {
            // some implementation
            System.out.println("methodA");
        }

        public static void methodB() {
            // some more implementation
            System.out.println("methodB");
        }
    }

    void methodC();
}

public class ABC implements A {
    public static void main(String[] args) {
        A.XYZ.methodA();
    }

    @Override
    public void methodC() {
        // TODO Auto-generated method stub

    }
} 
```

因为接口的目的是提供一种机制，接口的用户/实现者可以根据他们的需要实现属性（方法）。但是，如果我被允许在接口中添加实现，那么接口的目的是如何被打败的，请让我清楚为什么允许接口中的这​​种实现，一定有什么是为什么和事实是什么，这就是我想知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:27:13.897

他们设计的接口不允许实现；静态块将构成一个实现，因此是不允许的。

# scala - 保存时编译 Play 模板

> ID：14292886
> 
> 赞同：1
> 
> 时间：2013-01-12T11:26:07.783
> 
> 标签：scala, playframework, playframework-2.0, sbt, scala-ide

如何让 Play 在保存模板文件后立即编译模板？这对于在不让 Eclipse 在浏览器中刷新的情况下获取模板构造函数的更改很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:42:00.727

只需使用`~run`or`~compile`命令：

在你的壳里

```
$ play 
```

在游戏控制台中

```
~run 
```

或直接在外壳中

```
$ play ~run 
```

# c++ - 无法将记录附加到二进制文件

> ID：14292887
> 
> 赞同：0
> 
> 时间：2013-01-12T11:26:11.017
> 
> 标签：c++, append, binaryfiles

```
struct student
{
int identity;
char name[MAX];
int no_assessment;
char assessmenttask[MAX];
int mark;
};

void appendbfile(char filename [MAX])
{
ofstream writeb;
char filenameb [MAX];
strcpy(filenameb,filename);
student s;

strcat(filenameb,".dat");

cout<<"--------------------------------"
    <<endl
    <<"Begin appending for binary file " 
    <<filenameb
    <<endl
    <<endl;

cout<<"Enter student id: ";
cin>>s.identity;

cout<<"Enter student name: ";
cin>>s.name;

writeb.open(strcpy(filenameb,".dat"),ios::binary);

writeb.seekp(0,ios::end);

writeb.write (reinterpret_cast <const char *>(&s), sizeof (s));

writeb.close();

} 
```

我可以运行该程序，但我似乎无法将记录附加到二进制文件中。谁能帮我看看。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:39:01.517

您需要将`ios::app`标志传递给 open 函数：

```
 writeb.open(filenameb, ios::binary | ios::app); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:39:05.580

问题在下面一行，你需要改变

```
writeb.open(strcpy(filenameb,".dat"),ios::binary); 
```

到

```
writeb.open(filenameb, ios::binary); 
```

因为您已经完成`strcat(filenameb,".dat");`并且 strcpy inside`writeb.open`将“.dat”复制到文件名b，它用“.dat”替换了文件名。如果您仔细查看，文件“.dat”会创建在与包含您的数据的程序相同的目录中。

此外，由于您无需调用`seekp(0,ios::end);`将文件指针移动到文件末尾，因此基本上打开带有`ios::app`标志的文件会将文件附加到文件末尾。

```
writeb.open(filenameb, ios::binary | ios::app);
writeb.write (reinterpret_cast <const char *>(&s), sizeof (s));
writeb.close(); 
```

查看文件打开模式：[http ://en.cppreference.com/w/cpp/io/ios_base/openmode](http://en.cppreference.com/w/cpp/io/ios_base/openmode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:40:11.343

您还需要在 open 函数中使用 ios::app ORed。

# css - -webkit-transition 中的 -webkit-transform 在 css3 中不起作用

> ID：14292896
> 
> 赞同：0
> 
> 时间：2013-01-12T11:26:47.357
> 
> 标签：css

我无法使用

```
-webkit-transform in -webkit-transition 
```

但是当我使用一些`width`或`height`代替`-webkit-transform in -webkit-transition`它时，它工作正常。

使用`-webkit-transform in -webkit-transition`它时没有显示任何结果（我使用的是 chrome 浏览器）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:32:32.820

您正在使用 div、span、p 或其他什么...

只要确保 apply **display:block/inline-block**也可以使用**float**但你必须为其应用高度和宽度......

愿这对你有所帮助...

# c# - 如何挂起一个被调用的进程（里面有细节）

> ID：14292898
> 
> 赞同：1
> 
> 时间：2013-01-12T11:27:04.430
> 
> 标签：c#, .net

问题是创建了几个进程并使用它们启动它们`process.start()` ，现在我必须在状态之间移动这些进程。但问题是我不能使用`Thread.Suspend()`我认为的。

那么如何暂停这些进程然后恢复它们呢？

```
private void button1_Click(object sender, EventArgs e)
{
    var process1 = new Process();
    var process2 = new Process();
    var process3 = new Process();
    process1.StartInfo.FileName = "proc1";
    process2.StartInfo.FileName = "proc2";
    process3.StartInfo.FileName = "proc3";
    process1.Start();
    process2.Start();
    process3.Start();
} 
```

这 3 个进程是我创建的用于读取和写入不同文件的 C# 程序 (.exe)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:57:26.660

您不应该考虑暂停和恢复进程。因为这不是您应该管理 Windows 进程的方式。理论上你可以挂起所有线程，但是为什么呢？如果一个线程没有工作要做，它就不会被安排执行。同样，一个进程，如果它没有工作——它只是使用一些内存来表示状态，但它不消耗任何 CPU。

重新考虑您的架构，以支持标准流程通信方法或流程管理。例如，有 Windows 作业、具有进程间通信的 WCF、数据库交互。

# ruby-on-rails - Rails 从管理部分的另一个表中获取字段

> ID：14292901
> 
> 赞同：0
> 
> 时间：2013-01-12T11:27:34.983
> 
> 标签：ruby-on-rails, ruby, model

在我的应用程序中，我有 admin 子文件夹和控制器，以及方法：

```
class Admin::UserGroupsController < ApplicationController
  def index
    @pre_usergroups = UserGroup.all
    @user_groups = Kaminari.paginate_array(@pre_usergroups).page(params[:page]).per(50)
    render :layout => 'admin'
  end
end 
```

路线：

```
namespace :admin do
resources :user_groups
end 
```

和模型（不在子目录 admin 中）：

```
class UserGroup < ActiveRecord::Base
  attr_accessible :group_id, :user_id
  belongs_to :group
  belongs_to :user
  validates :user_id, :presence => {:message =>  I18n.t(:user_not_chosen)}
  validates :group_id, :presence => {:message =>  I18n.t(:group_not_chosen)}

  def get_group_name(id)
    @gr = Group.find(id)
    @gr.name
  end

  def get_user_name(id)
    @user = User.find(id)
    @user.email
  end
end 
```

我也没有看到验证消息，它正在工作....它跳过验证：

并查看：

```
%table.table.table-striped
  %tr
    %th
      Название группы:
    %th
      Пользователь:  
  -@user_groups.each do |u|
    %tr  
      %td
        = u.get_group_name(group_id)
      %td
        = u.user_id 
```

但为什么我得到

```
 undefined local variable or method `group_id' for #<#<Class:0xb352734>:0xab437dc> 
```

所以我没有去模型中的方法......我如何访问模型方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:36:27.930

如错误中所述，`group_id`未定义正确的。你应该这样称呼它：

`= u.get_group_name(u.group_id)`

因为`group_id`是`UserGroup`对象的一个​​属性

但是，我不明白您为什么要制作方法`get_group_name`and `get_user_name`，为什么不直接使用`u.group.name`and `u.user.email`？

# assembly - 汇编中的复杂 IF 语句

> ID：14292903
> 
> 赞同：15
> 
> 时间：2013-01-12T11:27:50.570
> 
> 标签：assembly, x86, conditional-statements

我应该如何在汇编中编写这样的`if`语句？

```
if ((a == b AND a > c) OR c == b) { ... 
```

平台：Intel 32 位机器，NASM 语法。

**更新**

对于变量类型和值，使用更容易理解的。我猜整数对我来说很好用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-12T11:40:17.350

在通用汇编中，它基本上是这样的（`a`in `ax`，`b`in `bx`，`c`in `cx`）：

```
 cmp  bx, cx
    jeq  istrue
    cmp  ax, cx
    jle  isfalse
    cmp  ax, bx
    jeq  istrue
isfalse:
    ; do false bit
    jmp  nextinstr
istrue:
    ; do true bit

nextinstr:
    ; carry on 
```

如果没有错误位，则可以简化为：

```
 cmp  bx, cx
    jeq  istrue
    cmp  ax, bx
    jne  nextinstr
    cmp  ax, cx
    jle  nextinstr
istrue:
    ; do true bit

nextinstr:
    ; carry on 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-12T11:41:53.763

您需要将 if 语句分解为一系列比较和跳转。就像在 C 中你可以这样写：

```
int test = 0;

if (a == b) {
  if (a > c) {
    test = 1;
  }
}

// assuming lazy evaluation of or:
if (!test) {
  if (c == b) {
    test = 1;
  }
}

if (test) {
  // whole condition checked out
} 
```

这会将复杂的表达式分解为您的 asm 将同样执行的组成部分，尽管您可以通过跳转到仍然相关的部分来更清晰地在 asm 中编写它。

假设 a、b 和 c 正在堆栈上传递给您（如果它们显然没有从其他地方加载它们）

```
 mov     eax, DWORD PTR [ebp+8] 
        cmp     eax, DWORD PTR [ebp+12] ; a == b?
        jne     .SECOND                 ; if it's not then no point trying a > c 
        mov     eax, DWORD PTR [ebp+8]
        cmp     eax, DWORD PTR [ebp+16] ; a > c?
        jg      .BODY                   ; if it is then it's sufficient to pass the
.SECOND:
        mov     eax, DWORD PTR [ebp+16]
        cmp     eax, DWORD PTR [ebp+12] ; second part of condition: c == b?
        jne     .SKIP
.BODY:
        ; .... do stuff here
        jmp     .DONE
.SKIP:
        ; this is your else if you have one
.DONE: 
```

# python - list的两种迭代有什么区别

> ID：14292904
> 
> 赞同：0
> 
> 时间：2013-01-12T11:28:09.563
> 
> 标签：python

这是我的代码，我得到了两个不同的输出，分别是 [2] 和 [2,4,6]，有人可以解释一下吗？

```
list = [1,2,3]
def getdouble(l):
    result = []
    for i in l :
        i = i * 2
        result.append(i)
    return result

print getdouble(list)

def getdouble_v2 (l):
    result = []
    for i in range(len(l)):
        l[i] = l[i] * 2
        result.append(l[i])
    return result

print getdouble_v2(list) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:31:21.960

获得您声称的输出的唯一方法是文件中的缩进被破坏。确认您没有将空格和制表符与`python -tt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:33:37.377

两个函数都`result`为相同的输入列表返回相同的列表。然而，第二个函数也修改了行中的原始列表`l[i] = l[i] * 2`。第一个功能没有。

因此，第一个函数的结果是：

```
l = [1,2,3]
result = [2,4,6] 
```

第二个函数的结果是：

```
l = [2,4,6]
result = [2,4,6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:11:26.650

您正在使用 4 个空格进行缩进，但该行除外

```
 return result 
```

它由制表符缩进。这很不幸，因为您的编辑器将选项卡显示为 4 个空格，但 Python 将其视为 8 个空格，因此代码在 Python 中看起来像这样

```
list = [1,2,3]
def getdouble(l):
    result = []
    for i in l :
        i = i * 2
        result.append(i)
        return result 
```

So you see, it's returning after the first item is appended to the list

# java - SWT 应用程序显示近乎实时的更新显示

> ID：14292909
> 
> 赞同：-1
> 
> 时间：2013-01-12T11:28:32.787
> 
> 标签：java, swt

**问题：**

> 您能否展示 SWT 显示部分（更新窗口/外壳）的任何简单示例或说明？或者您能找到任何您认为最适合 SWT 应用程序开发的网站吗？

**背景：**

> 我是 SWT 应用程序的新手，目前正在构建一个用于运行一些测试的应用程序。
> 
> 它有一个带有文本区域的主显示外壳类，在用户单击运行按钮后会不断更新。
> 
> 运行按钮启动另一个线程进程，该进程更新公共静态对象，例如 StartView 类中的 AtomicCounter。

**当前阶段**

> 该程序似乎运行良好，但是，它不会实时更新文本区域。好吧，我不能说实时，但它显示了一些延迟的信息。（我可以说它是延迟的，因为我也在控制台上打印出来）
> 
> 似乎我不太了解 SWT 的显示概念，无法做我想做的任何事情。

**目标**

> A. 无论 B 是否运行，启动和停止 C 的主显示类
> 
> B. 使用 A 的公共静态对象更新 A 类的文本区域的线程化进程
> 
> C. 执行其工作并更新 A 的公共静态对象的线程进程

**示例代码（工作代码）**

```
public class UnitTest {

    public static Display display;
    private Shell shell;
    public static AtomicInteger counter = new AtomicInteger(0);
    public static Text text;
    private TestThread test1 = null, test2 = null;

    public UnitTest()
    {
        display = Display.getDefault();
        this.shell = new Shell(display, SWT.CLOSE);
        this.shell.setSize(226, 120);

        text = new Text(shell, SWT.BORDER);
        text.setBounds(10, 10, 199, 19);

        Button btnStart = new Button(shell, SWT.NONE);
        btnStart.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent arg0) {
                test1 = new TestThread();
                test1.start();
                test2 = new TestThread();
                test2.start();
            }
        });
        btnStart.setBounds(10, 54, 94, 28);
        btnStart.setText("Start");

        Button btnStop = new Button(shell, SWT.NONE);
        btnStop.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent arg0) {
                test1.interrupt();
                test2.interrupt();
                counter.set(0);
            }
        });
        btnStop.setBounds(115, 54, 94, 28);
        btnStop.setText("Stop");

        this.shell.open();
        this.shell.layout();

        this.shell.addListener(SWT.Close, new Listener(){
            public void handleEvent(Event event)
            {
                shell.dispose();
            }
        });

        while(!this.shell.isDisposed())
        {
            if(!display.readAndDispatch())
            {
                //text.setText(""+counter.get());
                display.sleep();
            }
        }
    }

    public static void main(String[] args)
    {
        new UnitTest();
    }
}

class TestThread extends Thread
{   
    public void run()
    {
        try
        {
            int i = 0;
            while(i++ < 1000 && !this.isInterrupted() )
            {
                UnitTest.counter.getAndIncrement();
                try {
                    TestThread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    break;
                }

                if(UnitTest.display.isDisposed())
                    return;

                UnitTest.display.asyncExec(new Runnable() {
                    public void run() {
                      if (UnitTest.text.isDisposed())
                        return;
                      UnitTest.text.setText(""+UnitTest.counter.get());
                    }
                  });

            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            System.out.println("Existing thread...");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:09:19.993

您应该谨慎使用来自不同线程的 UI 更新。请阅读这个：

[http://goo.gl/At8hC](http://goo.gl/At8hC)

# google-apps-script - 在数组级别独立排序列

> ID：14292917
> 
> 赞同：0
> 
> 时间：2013-01-12T11:29:43.633
> 
> 标签：google-apps-script

我有一个电子表格，其中包含需要单独排序的几列。我在下面编写了有效的脚本，但速度有点慢，因为它依次使用`getValues()`and处理每一列`setValues()`。我想找到一种方法在数组级别进行整个排序以提高效率，但我不知道如何......有什么建议吗？

这是我现在使用的代码的相关部分：

```
...
  sh3.getRange(1,1,1,newData[0].length).setFontWeight('bold');// newData is an array corresponding to the whole sheet
  for(col=1;col<newData[0].length;++col){
    var val = sh3.getRange(2,col,getLastRowInCol(col),1).getValues().sort();// each column have a different height
    sh3.getRange(2,col,getLastRowInCol(col),1).setValues(val)
    }
}

function getLastRowInCol(col){
  var values = sh3.getRange(2,col,sh3.getLastRow(),1).getValues();// skip header and find last non empty row in column
  for(n=0;n<values.length;++n){
    if(values[n]==''){break}
  }
  return n
} 
```

**注意：** *我知道[Romain Vialard 有一个图书馆](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library)可以完成这项工作（对 2D 数组中的列进行排序），但我对如何“手动”提高个人 JS 技能很感兴趣 ;-) 而且我需要对每个列独立，而无需为每一列更新工作表。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:29:15.950

怎么样：

```
function sortColumns() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;
  var startCol = 1;
  var dataRange = sheet.getRange(startRow, startCol, sheet.getLastRow() - startRow + 1, sheet.getLastColumn() - startCol + 1);
  var data = dataRange.getValues();

  // transpose data so each column item will be listed in an single array
  // for each column so that it can be sorted with array.sort()
  var rowToCol = [];
  for (var i = 0; i < data[0].length; i++) {
    rowToCol.push([]);
    for (var j = 0; j < data.length; j++) {
      // replace empty string with undefined as undefined sorts last
      rowToCol[i].push(data[j][i]==""?undefined:data[j][i]);
    }
    rowToCol[i].sort();
    // default sort, as above, is alphabetic ascending. For other methods
    // search for Javascript array sort functions
  }

  // transpose sorted items back to their original shape
  var result = [];
  for (var i = 0; i < rowToCol[0].length; i++) {
    result.push([]);
    for (var j = 0; j < rowToCol.length; j++) {
      result[i].push(rowToCol[j][i]==undefined?"":rowToCol[j][i]);
    }
  }
  dataRange.setValues(result);
};

function onOpen() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{
    name : "Sort Columns",
    functionName : "sortColumns"
  }];
  sheet.addMenu("Script Center Menu", entries);
}; 
```

# java - java 堆栈 NullPointerException

> ID：14292921
> 
> 赞同：0
> 
> 时间：2013-01-12T11:30:14.303
> 
> 标签：java, null, nullpointerexception, stack

我有一个有块的类`Floor`，`Stack`我不知道如何初始化它。我试过这样：

```
public class Floor {
    private Stack<Block> stack;
    private static int size;
    public void setStack(Stack<Block> stack) {
        this.stack = stack;
    }
    public void addBlock(Block b){
        stack.push(b);
    }
}

public class InputDevice {
    Block a0=new Block('I',false);
    Floor [] floor=new Floor[5];
    Stack<Block> stack=new Stack<Block>();
    floor[0].setStack(stack);
    floor[0].addBlock(a0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T11:33:47.900

```
Floor [] floor=new Floor[5]; 
```

你声明了数组，但你没有初始化元素，然后：

`floor[0].setStack(stack);`floor[0] 为空，npe！

另外我建议在你的`Floor`类，`addBlock(Block b)`方法中，检查堆栈是否为空，如果为空，否则如果有人初始化Floor，就会有问题（NPE），直接使用floor.addBlock（b）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:32:32.377

您尚未初始化数组中的任何 Floor 对象。当您创建一个对象数组时，就像创建一个鸡蛋盒一样。在您先将一些鸡蛋放入纸箱之前，您不能使用任何鸡蛋。在初始化数组之前，您不能使用数组中的任何对象，这通常在 for 循环中完成。IE，

```
Floor [] floor=new Floor[5];
for (int i = 0; i < floor.length; i++) {
  floor[i] = new Floor();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T11:35:56.473

试试这个代码

```
public class Floor {
    private Stack<Block> stack;
    private static int size;
    public void setStack(Stack<Block> stack) {
        this.stack = stack;
    }
    public void addBlock(Block b){
        stack.push(b);
    }
}

public class InputDevice {
    Block a0=new Block('I',false);
    Floor [] floor=new Floor[5];
    floor[0] = new Floor();
    Stack<Block> stack=new Stack<Block>();
    floor[0].setStack(stack);
    floor[0].addBlock(a0);
} 
```

# java - 如何将复制构造函数构建到 CharNode

> ID：14292922
> 
> 赞同：-3
> 
> 时间：2013-01-12T11:30:36.767
> 
> 标签：java

这是我的 CharNode 类

```
public class CharNode
  {
    private char _data;
    private int _value;
    private CharNode _next;
    public CharNode(char c, int val, CharNode n) 
        {
         _data = c;
         _value = val;
         _next = n;
        }

   public CharNode getNext( ) 
      { return _next; }
   public void setNext(CharNode node) 
      { _next = node; }
   public int getValue() 
      { return _value; }
   public void setValue(int v) 
      { _value = v; }
   public char getData()
      { return _data; }
   public void setData(char c) 
      { _data = c; }
} 
```

我使用使用 CharNode 的此类 StringList

```
private CharNode _head;

//Stringlist have constractor 

public StringList ()
       _head= null;

//and 

StringList (charNode node)
    _head = node; 
```

我需要构建复制构造器，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:39:02.037

复制构造函数引用您需要复制的对象，并使用传入的对象的属性值对其自身进行初始化：

```
public CharNode(CharNode node) {

     _data = node._data;
     _value = node._value;
     _next = node._next;
} 
```

复制对链中下一个对象的引用可能不是您需要的，因为这会导致 2 个节点指向同一个下一个节点。

此外，您应该检查传入的节点 is not`null`并抛出`IllegalArgumentException`if it is `null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:39:07.697

通常你会`clone()`从类中实现方法，`Object`但由于你是 Java 新手，如果你只实现一个方法会很容易

```
public MyObject cloneMyObject(MyObject myObject) {
    MyObject cloneMyObject = new MyObject();
    cloneMyObject.field1 = myObject.field1; //shallow clone
    cloneMyObject.field1 = myObject.field1.cloneThisObject(); //deep clone
    //and so on;
    return cloneMyObject;        
} 
```

另请参阅[原型模式](http://en.wikipedia.org/wiki/Prototype_pattern)。

# php - 我在哪里可以将我的块保存在包含所有菜单链接的 cakephp 目录结构中？

> ID：14292929
> 
> 赞同：0
> 
> 时间：2013-01-12T11:31:27.687
> 
> 标签：php, cakephp

我想在 CakePHP 中创建我的自定义主题。在包含所有菜单链接的 CakePHP 目录结构中，我可以在哪里保存我的块？以及如何从中获取文件`View\Themed\MyTheme\Layouts\default.ctp`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:19:35.623

使用[元素](http://book.cakephp.org/2.0/en/views.html#elements)（如果您的导航栏显示在每个视图上）或使用[视图块](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)（如果导航栏仅显示在某些视图上）。

在您的 default.ctp 文件中，您只需执行..

```
echo $this->element('navbar'); 
```

这会将 Views/Elements/navbar.ctp 渲染到 Views/Layouts/default.ctp 上（如果您使用的是默认布局）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:37:33.430

只需将其放在`/App/Views/Layouts`. 如果你想在任何地方使用它，调用它`default.ctp`，它会自动被使用。否则，给它一个不同的名称，然后在控制器中执行：

```
public function some_action() {
    $this->layout = 'mylayout';
} 
```

这将`some_action`使用您的布局而不是默认布局显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:18:46.403

要访问：`View\Themed\MyTheme\Layouts\default.ctp`，在（Cake 2.1+）中，您必须告诉 cake 您要使用哪个主题，如下所示：

```
public $theme = 'MyTheme';
// or override in an action:
$this->theme = 'MyTheme'; 
```

然后：

```
$this->layout = 'default'; 
```

将参考您的`View\Themed\MyTheme\Layouts\default.ctp`.

如果 cake 在 中找不到请求的视图文件`MyTheme`，它将回退到`app/View`找到它。

通过这种方式，您可以根据需要覆盖主题中的视图。

因此，如果您将菜单放在 中`View/Elements/menu.ctp`，您的所有主题都可以访问它。如果你想覆盖它`MyTheme`，只需创建一个`Elements/menu.ctp`inside `MyTheme`。

如果我记得的话，这个过程与以前版本的蛋糕略有不同。

# java - B-Tree- 方法 inorder(TreeNode 根）

> ID：14292932
> 
> 赞同：2
> 
> 时间：2013-01-12T11:32:42.150
> 
> 标签：java

我不明白这种方法。

```
 protected void inorder(TreeNode<E> root) {
  if (root == null) return;
   inorder(root.left);
   System.out.print(root.element + " ");
   inorder(root.right);
} 
```

当`current node`到达树中的最后一个节点并且 current.left 变为空时，然后发生了什么？ `current node`返回哪里？该节点何时打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:34:26.913

如果`root.left`为 null，则函数调用`inorder(root.left);`只会立即返回，然后您将继续使用根及其右子树。

# matlab - 目录递归遍历在 Matlab 中不超过 2 个级别

> ID：14292933
> 
> 赞同：0
> 
> 时间：2013-01-12T11:32:48.037
> 
> 标签：matlab, directory, traversal

目录递归遍历不超过 2 级。为什么会这样？

```
==================================================== ===========

    currentFolderDir = '.'; % 密码
    % path('C:\Users\EI\Documents\MATLAB\OO\面向对象的简单对象创建');

    深度等级 = 0；
    文件夹计数 = 0;
    文件计数 = 0;

    fprintf('======================================\n');  
    fprintf('深度等级：%d\n', depthLevel);
    [folderCount, fileCount] = fileDirectoryRecursiveTraversal (currentFolderDir, depthLevel, folderCount, fileCount);

==================================================== ===========

    函数 [folderCount, fileCount] = fileDirectoryRecursiveTraversal (currentFile, depthLevel, folderCount, fileCount)    

        对于 i = 1:depthLevel
            fprintf('\t\t');
        结尾

        fprintf('%s\n', currentFile); % 打印条目的名称  
        %isdir(currentFile) % [ERR] 不能超过 2 级
        ％暂停;

        if (isdir(currentFile)) % 检查是否为目录   
            文件夹计数 = 文件夹计数 + 1；
            fprintf('\n有 %d 个文件夹。\n', folderCount);
            暂停

            depthLevel = depthLevel + 1;
            fprintf('======================================\n');  
            fprintf('深度等级：%d\n', depthLevel);

             % 获取目录中所有条目的列表
             条目 = 目录（当前文件）；

             % 条目 (1).name = '.'
             % 条目 (2).name = '..'
             numberOfEntries = 长度（条目）；% 包括当前文件夹和指向上一级文件夹的指针

             % 确保列表不为空
             % if( (numberOfEntries - 2) ~= 0 ) % 2: % entries(1).name = '.'; % 条目 (2).name = '..'
             if(numberOfEntries ~= 2)
                % 遍历所有条目
                对于 i = 3:numberOfEntries    
                   % 递归调用遍历
                   [folderCount, fileCount] = fileDirectoryRecursiveTraversal(entry(i).name, depthLevel, folderCount, fileCount); % i = 3:numberOfEntries   
                结尾

                fprintf('\n深度等级：%d\n', depthLevel);
                fprintf('有 %d 个文件。\n\n', fileCount);  
                文件计数 = 0;
             别的
                % disp('cccccccccccccccccccc')
                文件计数 = 0; ％ 空文件夹
             结尾
        别的
           文件计数 = 文件计数 + 1；
           文件夹计数 = 0;
        结尾    

        文件夹计数 = 文件夹计数 - 1；
        depthLevel = depthLevel - 1; % 退出水平    
    结尾

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:31:19.390

我已经调整了一个函数，用于递归处理某个目录中的文件。它正确地遍历所有子目录并显示文件名，但不显示深度级别、文件夹计数和文件计数。它应该很容易适应，但如果您需要帮助，请告诉我：

```
function processDirectory(path)

if ~strcmp(path(end), filesep)
    path(end+1)=filesep;
end
dirInfo= dir(path);
files=~[dirInfo.isdir];
fileNames={dirInfo(files).name};
disp(path);
if ~isempty(fileNames)
    for i=1:length(fileNames)
        % Do whathever (show file names?)
        disp(fileNames(i));
    end
end

% For each subdir, call itself again
isDir=[dirInfo.isdir];
dirNames={dirInfo(isDir).name};
dirNames(strcmp(dirNames, '.') | strcmp(dirNames, '..'))=[];

for i=1:length(dirNames)
    processDirectory([path dirNames{i} filesep]);    
end 
```

# sql-server - 通过 textchanged 事件从数据库中获取数据

> ID：14292939
> 
> 赞同：1
> 
> 时间：2013-01-12T11:33:37.723
> 
> 标签：sql-server, database, optimization, linq-to-sql, textchanged

我正在尝试通过文本框 textchanged 事件从我的 SQL Server 数据库中获取数据。我编写了代码，但是当我尝试运行它时，它可以工作，但速度不够快。

我怎样才能加快速度？

```
 Araclar arac = (from a in data.Araclars where a.AracSahibiTC == txtTc.Text select a).Single();
    txtPlaka.Text = arac.AracPlaka;
    txtSase.Text = arac.AracSaseNo;
    txtKm.Text = arac.AracKm;
    txtMarka.Text = arac.AracMarka;
    txtModel.Text = arac.AracModel; 
```

# java - jqgrid导航栏不工作（子表）

> ID：14292942
> 
> 赞同：2
> 
> 时间：2013-01-12T11:34:12.183
> 
> 标签：java, jquery, jsp, jqgrid, pagination

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。

我`jqGrid`用来以表格格式显示记录。我使用 设计了一个`header`和`Details`表`jqGrid`，其中如果我们单击表的任何行，则`Header`表中的行将`Details`相应更改。`jqGrid`我已经为`Header`和`Details`表分开了。

现在，如果我单击`Header`表格行，那么它会在表格中显示`jqGrid`相关`Details`数据

但问题是`Navigation Bar`of工作正常，`Header`但Table 不工作。如果我单击下一页按钮，那么它也会再次向我显示相同的结果。`Navigation Bar``Details`

[注意：两者的添加、编辑和删除按钮都可以正常工作，只有`Details`表格的记录导航不起作用]

**`Header`：**

```
jQuery("#list10").jqGrid({
            url:'ProtocolJGridServ?q=2&action=protocol',
            datatype: "xml",
            height: 250,
            colNames:['Sr. No.','PROTOCOL_ID','DESCRIPTION','PURPOSE','PROTOCOL_TYPE','TARGET','START_DATE','END_DATE','TRIGGER_NAME'],
            colModel:[{name:'srNo',index:'srNo', width:35,sortable:true},
                      {name:'PROTOCOL_ID',index:'PROTOCOL_ID', width:100,sortable:true,editable:true},
                      {name:'DESCRIPTION',index:'DESCRIPTION', width:200,sortable:false,editable:true},
                      {name:'PURPOSE',index:'PURPOSE', width:100,sortable:false,editable:true},
                      ],
            rowNum:5,
            rowList:[3,5,10],
            pager: '#pager10',
            sortname: 'srNO',

            loadonce:true,

            viewrecords: true,
            sortorder: "desc",
            multiselect: false,
            editurl: "ProtocolJGridServ?action=protocolEdit",
            caption: "Protocol",
            onSelectRow: function(ids,status)
            {
                if(status==true)
                {
                    if(ids)
                    {
                        var cm = $('#list10').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=false;
                        var ret = jQuery("#list10").jqGrid('getRowData',ids);
                        protID = ret.PROTOCOL_ID;

                        jQuery("#list10").jqGrid('setGridParam', {editurl:'ProtocolJGridServ?action=protocolEdit&protID='+protID});
                        jQuery('#list10').jqGrid('restoreRow',lastsel);
                        jQuery('#list10').jqGrid('editRow',ids,true);
                        lastsel=ids;
                        cm = $('#list10').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=true;
                    }
                if(ids!=null)
                    {
                        var PROTOCOL_ID = $('#list10').getCell(ids, 'PROTOCOL_ID');
                        //for CRM_PROTOCOL_STAGES
                        jQuery("#list10_d2").jqGrid('setGridParam',{url:"ProtocolJGridServChildStages?action=protStages&q=1&protID="+PROTOCOL_ID,page:1});
                        jQuery("#list10_d2").jqGrid('setCaption',"CRM_PROT_STAGES: "+ids)
                        .trigger('reloadGrid');
                    }
                }
                else //status = false = row de-selected 
                {
                    if(ids)
                    {
                        jQuery('#list10').jqGrid('restoreRow',lastsel);
                    }
                }
            }
        }); 
```

**`Details`：**

```
jQuery("#list10_d2").jqGrid({
            height: "100%",
            url:'ProtocolJGridServChildStages?q=2&action=protStages',
            datatype: "xml",
             colNames:['Sr. No.','PROTOCOL_ID',  'STAGE_ID',  'DESCRIPTION'],
             colModel:[{name:'srNo',index:'srNo', width:50,sortable:true},
                       {name:'PROTOCOL_ID',index:'PROTOCOL_ID', width:100,sortable:false,editable:true,hidden:true},
                       {name:'STAGE_ID',index:'STAGE_ID', width:100,sortable:false,editable:true},
                       {name:'DESCRIPTION',index:'DESCRIPTION', width:150,sortable:false,editable:true}
                       ],
            rowNum:2,
            rowList:[2,4,10],

            //paging: true,
        //loadonce:true,
            pager: '#pager10_d2',
            sortname: 'PROTOCOL_ID',
                //viewrecords: true,
            sortorder: "asc",
            multiselect: true,
            editurl: "ProtocolJGridServChildStages?action=protocolStageEdit",
            caption:"CRM_PROT_STAGES",
            afterInsertRow: function(ids) 
            {
                var ret = jQuery("#list10_d2").jqGrid('getRowData',ids);
                protID = ret.PROTOCOL_ID;
            },
            onSelectRow: function(ids,status)
            {
                if(status==true)
                {
                    if(ids)
                    {
                        var cm = $('#list10_d2').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=false; var cm2 = $('#list10_d2').jqGrid('getColProp',"STAGE_ID");  cm2.editable=false;
                        var ret = jQuery("#list10_d2").jqGrid('getRowData',ids);
                        protID = ret.PROTOCOL_ID;
                        stageID = ret.STAGE_ID;

                        jQuery("#list10_d2").jqGrid('setGridParam',{editurl:'ProtocolJGridServChildStages?action=protocolStageEdit&protID='+protID+'&stageID='+stageID});
                        jQuery('#list10_d2').jqGrid('restoreRow',lastsel);
                        jQuery('#list10_d2').jqGrid('editRow',ids,true);
                        lastsel=ids;
                        var cm = $('#list10_d2').jqGrid('getColProp',"PROTOCOL_ID");  cm.editable=true; var cm2 = $('#list10_d2').jqGrid('getColProp',"STAGE_ID");  cm2.editable=true;
                    }
                }
                else
                {
                    if(ids)
                    {
                        jQuery('#list10_d2').jqGrid('restoreRow',lastsel);
                    }
                }
            }
        }); 
```

**更新 1：--- Servlet 代码：**

```
int page = Integer.parseInt(request.getParameter("page")); // get the requested page
            int limit = Integer.parseInt(request.getParameter("rows")); // get how many rows we want to have into the grid
            String sidx = request.getParameter("sidx"); // get index row - i.e. user click to sort
            String sord = request.getParameter("sord"); // get the direction
            int start = (limit* page) - limit;              
            String rows = request.getParameter("rows");
            String param = request.getParameter("protID");

            //get the data
            String query = "select * from CRM_PROT_STAGES where PROTOCOL_ID ='"+param+"'";

            //String query = "select * from( select * from CRM_PROT_STAGES  where  PROTOCOL_ID = '"+param +"' order by PROTOCOL_ID desc) where  ROWNUM <= "+limit;
            //String query = "select * from ( select a.*, ROWNUM rnum from ( select * from CRM_PROT_STAGES  where  PROTOCOL_ID = '"+param +"' ) a where ROWNUM <= "+ limit +")where rnum  >="+start;

            data = select.getData(query);   //getData() return 2D array of data
            columnNames = select.getColumnNames();   //getColumnNames() returns array of column names

            int totalCount = data.length;
            int totalPages = 0;

            if (totalCount > 0) 
            {
                if (totalCount % Integer.parseInt(rows) == 0) 
                {
                    totalPages = totalCount / Integer.parseInt(rows);
                } 
                else
                {
                    totalPages = (totalCount / Integer.parseInt(rows)) + 1;
                }
            } 
            else 
            {
                totalPages = 0;
            }
            out.print("<?xml version='1.0' encoding='utf-8'?>\n");
            out.print("<rows>");
            out.print("<page>" + request.getParameter("page") + "</page>");
            out.print("<total>" + totalPages + "</total>");
            out.print("<records>" + totalCount + "</records>");
            int srNo = 1;

            limit = limit+start;
            //for(int i=0;i<data.length;i++)
            if(totalCount>0)
                for(int i=start;i<limit;i++)
                {
                    if(i<data.length)
                    {
                        out.print("<row id='" + i + "'>");
                        out.print("<cell>" + srNo + "</cell>");
                        for(int a=0;a<columnNames.length;a++)
                        {
                            out.print("<cell>"+ data[i][a] +"</cell>");
                        }
                    out.print("</row>");
                    srNo++;
                    }
                }
                out.print("</rows>");
                data=null;
                columnNames=null;
        } 
```

让我知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:27:01.950

我想问题的原因如下：您`loadonce:true`在“标题”（主）网格中使用，而不是在“详细信息”网格中使用。所以“Header”的分页是由jqGrid在*客户端*实现的，需要在“Details”网格上fof成功分页的URL代码中实现*服务器端的分页。*`ProtocolJGridServChildStages`

所以我建议你只`loadonce:true`为“详细信息”网格添加选项。

# python - 传单 js 的缓慢瓷砖生成

> ID：14292943
> 
> 赞同：0
> 
> 时间：2013-01-12T11:34:13.837
> 
> 标签：python, maps, geospatial, leaflet, gdal

我目前正在尝试使用[传单](http://leafletjs.com/)来显示图像（jpeg 或 png）而不是地图，我已按照[此博客文章中的说明使用](http://build-failed.blogspot.com/2012/11/zoomable-image-with-leaflet.html)[gdal2tiles.py](http://www.gdal.org/gdal2tiles.html)创建图块这是我们使用的代码

```
gdal2tile.py -p raster -z 0-5 -w none "SOURCE_PATH.png" "DESTINATION_FOLDER" 
```

该命令为传单生成了必要的图块，但问题是为附加图像创建图块大约需要 2 分钟（大小：777KB，分辨率：2592x1728）和大约 1600 个文件的灾难性图块数量。

我正在尝试优化文件的时间和数量以生成传单的图块并寻找建议，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:51:59.373

就像博客文章解释的那样，您的图像分辨率太低，无法放大 3 倍以上。因此，将其更改为 0-3，您会看到速度大大加快。

# css - 全屏宽度 CSS 框架可加快设计速度

> ID：14292944
> 
> 赞同：3
> 
> 时间：2013-01-12T11:34:22.030
> 
> 标签：css, styles, width, css-frameworks

我提出了几个固定宽度的 CSS 框架，例如 960px GS 和网格生成器。我发现它们的问题是它们的固定宽度。虽然它在普通屏幕上效果最好，但我可以得到或有人帮助我使用 CSS 框架，它使用可用屏幕的整个宽度。列数、装订线宽度等都不是很重要的因素。

提前致谢。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T12:46:33.097

制作基于 % 的网格非常容易，我认为除非您要使用 Bootstrap 之类的所有功能，否则您只会给自己带来很多额外的膨胀。制作一个响应式网格系统不超过 10/20 分钟，您将拥有您所需要的，不多也不少。

[这是一个](http://css-tricks.com/video-screencasts/115-dont-overthink-it-grids/)关于制作简单的 2 列、基于 % 的网格的视频。

[如果您更喜欢阅读它，这里有一篇博客文章](http://css-tricks.com/dont-overthink-it-grids/)会经历几乎相同的事情。

要制作特定于移动设备的 CSS，您需要进行一些媒体查询，[这里有一篇](http://css-tricks.com/css-media-queries/)关于此的文章。

此外，如果您要使用媒体查询，请不要忘记输入：

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

在`head`您的页面中。

# asp.net - 将 asp.net mvc4 应用程序部署到 godaddy

> ID：14292955
> 
> 赞同：5
> 
> 时间：2013-01-12T11:36:23.133
> 
> 标签：asp.net, asp.net-mvc-4

我在 Visual Studio 2012 上使用 C# 创建了一个 ASP.NET MVC4 应用程序。但在部署它时遇到了困难。我将项目的所有文件夹上传到我的服务器（godaddy）。但仍然无法查看我的网站正在运行。

我的问题：这足以部署我的网站吗？或者还需要什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T21:59:41.580

您可以将 MVC4 应用程序[bin 部署](https://stackoverflow.com/questions/266205/is-there-a-way-that-i-can-run-a-asp-net-mvc-project-on-godaddy-com-shared-web-ho)到 GoDaddy。

只需将您需要的相关 MVC4 相关 DLL 复制到您的生产 bin 目录即可。

[或者，您可以在“属性”窗口中为您的任何MVC4](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)相关项目引用设置“复制本地”等于“真”，如本文所述。然后，当您发布应用程序时，将自动包含所有需要的程序集。

您可能不需要所有这些，但在我目前在 GoDaddy 上管理的 MVC4 应用程序中，我需要手动包含[正确版本](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)的 DLL：

*   System.Web.Abstractions.dll
*   System.Web.Helpers.dll
*   System.Web.Mvc.dll
*   System.Web.Optimization.dll
*   System.Web.Razor.dll
*   System.Web.Routing.dll
*   System.Web.WebPages.Deployment.dll
*   System.Web.WebPages.dll
*   System.Web.WebPages.Razor.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T11:58:39.930

当然，您可以部署您的 MVC 4 应用程序。Godaddy 支持 MVC 4。我为部署 MVC 4 应用程序所做的是：

**1\. 我包括了 DLL，例如：**

*   系统.Web.Mvc
*   系统.Web.路由
*   System.Web.抽象

**2\. 我编辑了 web.config 文件。我放了下一个字符串：**

```
 <system.web>
        <trust level="Medium"/>
        .....  
    </system.web> 
```

**3\. 然后我使用文件系统发布方法**，然后我使用 FileZilla 将文件传输到 GoDaddy。我将所有文件复制到**httpdocs**目录。**您必须只复制到 * *httpdocs****目录。**

就这样。祝你好运。

# jquery - jquery ui对话框后面的dijit datetextbox

> ID：14292957
> 
> 赞同：0
> 
> 时间：2013-01-12T11:36:25.903
> 
> 标签：jquery, css, jquery-ui, dojo, dijit.form

我在 jquery ui 对话框中有一个 dojo dijit datetextbox .. datetextbox 日历显示在对话框后面（下层）。我正在使用 ie7.. 看我下面的代码..

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>
</title>
<script type="text/javascript" src="jQuery/jquery-1.8.3.js" ></script>
<script type="text/javascript" src="jQuery/jquery-ui-1.9.2.custom.min.js" ></script>
<script type="text/javascript" src="dojo/dojo/dojo.js" djConfig="parseOnLoad: true, isDebug: false"></script>
<script>dojoConfig = {parseOnLoad: true}</script><script src='dojo/dojo/dojo.js'></script><script>require(["dojo/parser", "dijit/form/DateTextBox"]);</script>
<link rel="stylesheet" type="text/css" href="jQuery/jquery-ui-1.8.11.custom.css" />
<link rel="stylesheet" type="text/css" href="dojo/dojo/resources/dojo.css" />
<link rel="stylesheet" type="text/css" href="dojo/dijit/themes/claro/claro.css" />
</head>
<body class="claro">
please click the above button to show the dialog
<br>
<input type="button" id="clickme" value="Click Me"/>
    <div id="popupdialog">
        <label for="date1">Drop down Date box:</label>
<input type="text" name="date1" id="date1" value="2005-12-30" data-dojo-type="dijit/form/DateTextBox" required="true" />
    </div>
<script type="text/javascript" >
        $(document).ready(function() {
$("#popupdialog").dialog({
    width:400,
    height:200,
    modal:false,
    position:'center',
    autoOpen:false
});
$('#clickme').click(function(){
            $('#popupdialog').dialog("open");
        });
});
    </script>
</body>
</html> 
```

请看下图：

[http://i50.tinypic.com/2edzgue.jpg](http://i50.tinypic.com/2edzgue.jpg)

解决此问题的任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:28:34.203

我通过将**zIndex:-1**添加到 jQuery 对话框解决了这个问题，如下所示：

```
$("#popupdialog").dialog({
width:400,
height:200,
modal:false,
position:'center',
autoOpen:false,
zIndex: -1 
```

});

# jquery - jquery-对添加的输入进行操作

> ID：14292959
> 
> 赞同：0
> 
> 时间：2013-01-12T11:36:56.003
> 
> 标签：jquery, html

我在表中有一行输入字段，用户可以通过单击按钮添加新行（第一行的副本）。添加新行的脚本：

```
var row = '<tr><td>'+number+'</td>'+f1+f2+f3+f4+f9+f5+f6+f7+f8+'</tr>';
$('#table').find('#tbody').append(row); 
```

在第一行中，我可以对输入中的数据进行一些计算，但在添加时我什么也做不了。计算脚本：

```
$(document).ready(function(){
 $('input[name="name['+rowSelected+']"]).delegate('keyup',{}, function(){
  some calculations
}); 
```

我正在尝试使用 .delegate 和 .live 没有成功。我需要帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:40:08.853

这是`.on()`处理`input`表格中动态添加的标签的方式：

```
$("#table").on('keyup', 'input', function() {
    // code here for all input tags in the table
}); 
```

`'input'`如果您需要将选择器缩小到表中的某些输入标签，您可以调整选择器。

对于`.on()`，您使用这种形式：

```
$(static parent selector).on(event, selector for dynamically added objects, handler fn); 
```

# makefile - Can not call acpi_call method in ubuntun 12.10

> ID：14292963
> 
> 赞同：0
> 
> 时间：2013-01-12T11:38:01.737
> 
> 标签：makefile, nvidia, acpi, ubuntu-12.10, optimus

I have a notebook has a optimus graphic cards(Nvidia). So I want to relax notebook with acpi_call method. But error is given. I had downloaded acpi_call_master from this web page: (https://github.com/mkottman/acpi_call) Then this zip is exracted by me, and following code is called in terminal by me. However these errors are given:

```
dagli@dagli-Inspiron-N5110:~/acpi_call-master$ ls
acpi_call.c  examples  Makefile  README.md  support
dagli@dagli-Inspiron-N5110:~/acpi_call-master$ sudo make
make -C /lib/modules/3.5.0-17-generic/build M=/home/dagli/acpi_call-master modules
make: *** /lib/modules/3.5.0-17-generic/build: Böyle bir dosya ya da dizin yok. Durdu.
make: *** [default] Hata 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:03:51.353

This is a kernel module and as such requires the Linux kernel headers to build. In many cases you should be able to identify the package that would provide that file using `dpkg` such as:

```
dpkg --search /lib/modules/3.5.0-17-generic/build 
```

You can do the same on the [Ubuntu package site](http://packages.ubuntu.com/). Though it didn't exactly work, the package you need will be something like `linux-headers-3.5.0-17-generic`. There do appear to be both x86 (32-bit) and x64 options. See if the following works:

```
sudo apt-get install linux-headers-3.5.0-17-generic 
```

Remember that you will have to learn how to configure/load kernel modules to make this work. It is not a standard user program.

# ios - 用于从 iTunes 中检索应用程序促销代码的 API？

> ID：14292964
> 
> 赞同：3
> 
> 时间：2013-01-12T11:38:11.347
> 
> 标签：ios, app-store, app-store-connect

是否有任何 API 可以让我从 iTunes 生成和检索应用程序的促销代码？

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:13:31.387

在 iTunes Connect 中，您可以生成促销代码。没有已知的 API，因此您的问题的答案是**否定**的。这种答案确实偶尔会出现；）

请注意，您只能为应用的每个版本生成 50 个促销代码。大多数人将它们发送给审阅者。

由于这个限制，大多数促销赠品都是通过暂时降低应用程序的价格来完成的。您可以通过 iTunes Connect 即时更改价格，例如最近更改之前的屏幕截图，以防止骗子！

# android - 通过命令提示符构建 Android 应用程序

> ID：14292974
> 
> 赞同：-1
> 
> 时间：2013-01-12T11:39:53.547
> 
> 标签：android, ant

我正在尝试将此代码构建为 .apk 文件：[https](https://github.com/CodeMonkeyzDevelopment/platform_packages_apps_mms/tree/gingerbread-release) ://github.com/CodeMonkeyzDevelopment/platform_packages_apps_mms/tree/gingerbread-release通过命令提示符。我正在遵循这些说明： http: [//developer.android.com/tools/building/building-cmdline.html](http://developer.android.com/tools/building/building-cmdline.html)但是当我导航到项目目录并键入“ant debug”时，它会返回此错误：

```
 Buildfile: build.xml does not exist!
    Build failed 
```

我很困惑，如果有人想随意尝试，存储库应该是最新的。我只是很困惑为什么这不起作用，所以我很乐意得到一些帮助:)

谢谢！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:56:10.707

您首先需要创建 build.xml

```
android update project --name <project_name> --target <target_ID> --path <path_to_your_project> 
```

查看设置项目文档，更新项目部分，[http://developer.android.com/tools/projects/projects-cmdline.html#UpdatingAProject](http://developer.android.com/tools/projects/projects-cmdline.html#UpdatingAProject)

# qt - Qt ensureVisible() 在 QScrollArea 中不起作用

> ID：14292976
> 
> 赞同：2
> 
> 时间：2013-01-12T11:39:56.897
> 
> 标签：qt, drag-and-drop, qscrollarea

我有 2 列。其中一列充满了许多 QWidget。当我在列中放置一个小部件时，我调用此方法：

```
void MainWindow::scrollToItem(Product_View *item) {
    QPoint point = item->mapToParent(QPoint());
    ui->scrollArea->ensureVisible(point.x(), point.y());
} 
```

当我在第一列的底部并在下一个中拖动一个小部件时。滚动区域正确滚动到底部，以便我可以看到我将其放置在哪里。

但是当我将小部件放回第一列时，它会滚动但不会完全滚动到底部。它的大约 150 像素（编辑：150 像素不是真的。我只看到大约 5 像素的小部件）

有谁能够帮我？

编辑：

也许很高兴知道我的布局。

我有一个带有`QScrollArea`. scrollArea 有一个`QWidget`被调用的`scrollAreaWidgetContents`，它有一个 QHBoxLayout。该小部件有 5 列。这些具有用于我的拖放小部件的 QVBoxLayout。

天哪，另一个编辑：

我注意到只有最后一项出错了。

我只是继续编辑

我现在很清楚滚动条并没有一直向下。

```
QScrollBar *bar = ui->scrollArea->verticalScrollBar();
bar->setValue(bar->maximum()); 
```

此代码也显示相同的行为。我应该怎么处理这个线程？我应该创建一个新的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:45:21.920

我发现了我的问题。不是解决方案。

如果我将小部件拖回第一列，我的代码将调用`ensureWidgetVisible`. 之后，我的 scrollArea 由于新项目而调整大小。这就是为什么我的小部件不完全可见的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:54:24.903

ensureVisible[函数](https://qt-project.org/doc/qt-4.8/qscrollarea.html#ensureVisible)只需要一个点，所以使用它只能保证你的小部件的一个角是可见的（我相信左上角？）。尝试改用[ensureWidgetVisible](https://qt-project.org/doc/qt-4.8/qscrollarea.html#ensureWidgetVisible) - 这应该确保整个小部件都显示在屏幕上。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-03T22:12:41.713

尽管这是一篇较旧的帖子，但我遇到了同样的问题，并且给我寻找解决方案带来了很多麻烦。

我的问题：必须在小部件中添加一个新行，然后确保滚动条向下滚动到它以便人们查看它。OP在他的回答中很好地描述了这个问题。

我尝试过的事情是：
**1.**（**最好的方法**）在 app 对象上调用 processEvents()。[在看到这篇](http://www.qtcentre.org/threads/30632-QScrollArea-Scroll-to-widget-problem)文章和拉齐安的回答后，我尝试了它。

**2.**实现您的自定义 ScrollArea，扩展`QScrollArea`并覆盖调整大小处理程序，以便能够在添加的小部件上调用 ensureWidgetVisible。当然，它需要以某种方式了解该小部件对象。

**3.**添加一个`QTimer`并在添加新小部件时启动计时器。计时器调用的方法需要在新的小部件对象上调用 ensureWidgetVisible() 并随后停止计时器。

我知道 3 有点笨拙，因为它不知道调整大小事件何时发生，因此需要将计时器设置为次优值。（例如，在 33 毫秒内调用 resize 并将计时器设置为 500 毫秒，您就明白了）。

我希望这可以帮助那些遇到同样问题的人。

# javascript - js foo()、foo 和 function(){foo()} 的区别

> ID：14292977
> 
> 赞同：0
> 
> 时间：2013-01-12T11:39:57.237
> 
> 标签：javascript, function

我有一个带有按钮的 jquery 对话框（我的按钮，而不是对话框按钮之一）。

设置对话框后，我有以下代码：

```
$('#bar').click(foo('baz')); 
```

当我加载页面并显示对话框时，运行 foo（不按#bar）。

如果代码是：

```
$('#bar').click(foo); 
```

或者

```
$('#bar').click(function(){foo('baz')}); 
```

foo 没有运行。

这是为什么？指点我应该RTFM的地方，感激不尽。

只是为了澄清：为什么 foo 在没有按下按钮的情况下在第一个实例中运行（即在对话框初始化时）并且 foo 在后两个示例中没有运行。

哦，我想我刚刚解决了。

1\. foo 的结果被传递给 click。在 2\. 我仍然不确定。3\. anon函数被传递给click。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:42:23.633

这不会等待点击调用`foo`：

```
$('#bar').click(foo('baz')); 
```

（`foo('baz')`在执行此行时执行，而不是在用户单击时执行`#bar`）

这不会将参数传递给`foo`：

```
$('#bar').click(foo); 
```

这可能是您需要的（除非`foo`构建并返回一个函数，我猜它没有）：

```
$('#bar').click(function(){foo('baz')}); 
```

它不起作用的事实可能`bar`是找不到带有 id 的元素，或者您没有单击它。

* * *

详细解释：

当你执行

```
foo(bar); 
```

你`foo`用参数执行`bar`。

文你执行

```
a = foo; 
```

你给变量`a`value `foo`，它可能是一个函数，也可能不是一个函数。

你打电话时

```
var a = function() {foo(bar)}; 
```

您创建一个新的匿名函数，该函数`foo(bar)`在调用时执行，并将这个新函数作为变量的值`a`。

当你执行

```
$('#bar').click(function(){foo('baz')}); 
```

您传递一个新函数，在调用`foo('baz')`时调用，作为`$('#bar').click(`. 当您单击具有 id 的元素时，JQuery 会调用此函数`bar`。

# javascript - 显示执行值的 Javascript 提示

> ID：14292978
> 
> 赞同：1
> 
> 时间：2013-01-12T11:40:00.507
> 
> 标签：javascript

我有这个代码：

```
<input type="button" value="Test Short URL" onClick="javascript:void(location.href='http://taimoorsultan.com/y/yourls-api.php?signature=05e2685fc7&format=simple&action=shorturl&url='+escape(location.href))&prompt('Shorten URL', 'shorturl');"> 
```

实际上，这段代码需要 url 并对其进行处理，并在下一个空白页上显示一个缩短的 url。我试图通过提示（）在同一页面上显示该缩短网址。使用上面的代码对我来说有点混乱。如何处理短 url 而不允许它在下一页显示结果？

我想我应该首先处理 action="" 然后做一些事情在提示框中显示结果。但不知道如何做到这一点。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T03:07:47.480

> 我想我应该首先处理 action="" 然后做一些事情在提示框中显示结果。

使用以下过程：

*   已经`action`是前面提到的 .php URL
*   有`button`_`submit`
*   消除`onclick`
*   添加一个 ID 为的 iframe`foo`
*   有`target`_`"#foo"`

# ruby-on-rails - line_items_path(:product_id => product)——这条线是做什么的？

> ID：14292983
> 
> 赞同：0
> 
> 时间：2013-01-12T11:40:43.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在敏捷 Rails 开发代码中看到了这段代码

```
line_items_path(:product_id => product) 
```

并且无法弄清楚它是如何工作的。我可以看到它用于将产品添加到购物车，但是这个 _path 函数在这里是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:03:06.467

**您可以在config/route.rb**中找到**line_item_path**指向的位置**：product_id**它是一个参数，然后您可以在**line_item_path指定的函数中读取**

# android - 使用共享首选项在数组列表中保存 5 个复选框值

> ID：14292984
> 
> 赞同：-1
> 
> 时间：2013-01-12T11:40:46.437
> 
> 标签：android, sharedpreferences

我在设置页面中有 5 个复选框。当我单击保存按钮时，更改将保存在共享首选项中，并且更改仍保留在该页面本身中。

取决于所做的更改，我必须在主页中显示相应的按钮。即，如果我取消选中该复选框，则该按钮对主页不可见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:35:23.007

了解如何[在 sharedPreferences 中保存/加载首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)，这真的很容易。您可以保存/加载与这些复选框状态相关的布尔值。

在主页上，您可以签入`onResume()`以前存储在 sharedPreferences 中的那些布尔值的方法，然后使用例如显示/隐藏每个按钮：

```
button3.setVisibility(checkbox3 ? View.VISIBLE : View.INVISIBLE); 
```

编辑：

如果您的问题是如何在 sharedPreferences 中存储 ArrayList，那么答案是“您不能”。您只能保存（至少原则上）简单变量，因此我建议您存储 5 个布尔值，因为它的数字是固定的。

# objective-c - 未初始化对象的NSDictionary？

> ID：14292985
> 
> 赞同：0
> 
> 时间：2013-01-12T11:40:51.263
> 
> 标签：objective-c, nsdictionary, nsobject, alloc

如何将未初始化的对象存储在`NSDictionary`?

我想我会这样做，但我不确定这是一个好方法：

```
 NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:
                     [MyObject1 alloc], @"myObject1",
                     [MyObject2 alloc], @"myObject2"
                     , nil];

MyObject1 *object = [dict objectForKey:@"myObject1"];

[object init]; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:36:36.547

您需要的是在字典中存储可变对象。这样做您将能够在插入后修改它们，因为不可变字典不允许插入新对象。

如果对于“未初始化”，您的意思是该对象仅使用 alloc 创建，而没有 init，那么这是不赞成的，因为**init 可能返回与使用 alloc 返回的对象不同的对象**。所以就像你正在做的那样存储它们，当你需要修改它们时调用访问器：

```
NSDictionary *dict = @{ @"myObject1" : [MyObject1 new] , @"myObject2" : [MyObject2 new] };
dict[@"myObject1"].someProperty= someValue; 
```

如果您的 MyObject1 类是不可变的，那么您必须使用可变字典。

# c# - WinRT StreamSocket - 现有连接强行关闭

> ID：14292993
> 
> 赞同：0
> 
> 时间：2013-01-12T11:42:22.233
> 
> 标签：c#, stream, windows-runtime, .net-4.5, stream-socket-client

尝试使用 . 从服务器下载数据时`StreamSocket`，遇到错误：

> 现有连接被强行关闭

我使用 a`StreamReader`从`InputStream.AsStreamForRead().`

奇怪的是，这适用于我下载的第一条消息，但会为下一条消息引发上述异常。

该错误不会立即发生，它确实可以读取大部分消息，但在某些时候它会阻塞 sr.ReadLine() 然后引发异常。请参见下面的片段：

```
while (true)
{
    str = sr.ReadLine();
    if (str != ".")
    {
        if (str.StartsWith(@".."))
            sb.Append(str.Substring(1) + "\r\n");
        else
            sb.Append(str + "\r\n");
    }
    else break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:08:12.420

事实证明，我的代码没有任何问题。

我的 USB 加密狗调制解调器不断断开导致上述问题的连接。

通过几个不同的连接对此进行了测试，一切都很好。

# javascript - 更改样式表 javascript

> ID：14292997
> 
> 赞同：15
> 
> 时间：2013-01-12T11:43:01.740
> 
> 标签：javascript

我得到了这个 HTML 代码：

```
<head>
    <script type="application/javascript" src="javascript.js">
    <link id="pagestyle" href="default.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <button id="stylesheet1" > Default Style Sheet </button>
    <button id="stylesheet2" > Dark Style Sheet </button>
</body> 
```

在 javascript.js 我得到了这个：

```
function swapStyleSheet(sheet) {
    document.getElementById("pagestyle").setAttribute("href", sheet);  
}

function initate() {
    var style1 = document.getElementById("stylesheet1");
    var style2 = document.getElementById("stylesheet2");

    style1.onclick = swapStyleSheet("default".css);
    style2.onclick = swapStyleSheet("dark".css);
}

window.onload = initate; 
```

我想在按下此按钮时更改样式表。我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T11:46:02.590

一种猜测是缺少`.css`属性，另一种猜测`onclick`是它不是一个函数，而是调用一个函数的结果：

制作所有`.css`字符串并将函数分配给`onclick`：

```
style1.onclick = function () { swapStyleSheet("default.css") };
style2.onclick = function () { swapStyleSheet("dark.css"); }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T11:52:11.617

将“default”.css 转换为“default.css”。对 dark.css 执行相同的操作。

然后 onclick 将一个函数作为一个值。

```
style1.onclick = function () { swapStyleSheet("default.css") };
style2.onclick = function () { swapStyleSheet("dark.css") }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T23:31:51.523

```
 $('button').click(function() {
   let mainSheet = $('#pageStyle').attr('href');
   if(mainSheet == "default.css")
      $('#pageStyle').attr('href','dark.css');
   else
      $('#pageStyle').attr('href','default.css');
   }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-07T16:46:47.973

您好，直到您在 html 中添加 onclick="" 属性后它才会起作用所以最终版本将如下所示： **html**

```
<head>
    <script type="application/javascript" src="javascript.js">
    <link id="pagestyle" href="default.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <button id="stylesheet1" onclick="initate();"> Default Style Sheet </button>
    <button id="stylesheet2" onclick="onclick="initate();"> Dark Style Sheet </button>
</body> 
```

**Javascript 文件**

```
function swapStyleSheet(sheet) {
    document.getElementById("pagestyle").setAttribute("href", sheet);  
}

function initate() {
    var style1 = document.getElementById("stylesheet1");
    var style2 = document.getElementById("stylesheet2");

    style1.onclick = swapStyleSheet("default.css");
    style2.onclick = swapStyleSheet("dark.css");
} 
```