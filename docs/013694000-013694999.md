# StackOverflow 问答 13694000-13694999

# jquery - 验证复选框失败（表单 > jQuery 验证 > PHP）

> ID：13694000
> 
> 赞同：0
> 
> 时间：2012-12-04T00:05:56.507
> 
> 标签：jquery, validation

几个小时以来，我一直在认真尝试解决这个问题，在这里阅读了很多回复，但它不起作用。

我通过将单个列设置为 0（不重要）或 1（重要）在我的数据库中将帖子标记为重要。应该通过检查（或不检查）我网站上的表单中的文本表单来确定状态。虽然当我将表单直接发送到 php 处理脚本时这一切正常，但在使用 jQuery 验证表单时它不起作用。出于某种原因，在这种情况下，无论复选框是否被选中，它总是将帖子标记为重要。

查看代码：

形式

```
<form method="POST" action="">
<fieldset>
  <legend>Form Title</legend>

  <label>Title *</label>
  <input type="text" name="headline" placeholder="...">
  <label>Contentn *</label>
  <textarea rows="10" cols="40" name="content"></textarea>
  <label class="checkbox">
    <input type="checkbox" name="important" id="important" value="checked">
    Important
  </label><br>

  <input type="submit" class="btn btn-success submit-post" value="Send">
</fieldset>
</form> 
```

验证部分

```
$(document).ready ( function() {
$('.submit-post').click(function() {          

    // VALIDATION PART
    var form = $(this).closest('form');
    var headline = form.find('input[name=headline]');
    var content = form.find('textarea[name=content]'); 

    if( $('input[type=checkbox]:checked') ) {
        var important = 1;
    } else {
        var important = 0;
    }

    var passed = true;

    if (headline.val()=='') {
        headline.addClass('highlight');
        passed = false;
    } else {
        headline.removeClass('highlight');
    }

    if (content.val()=='') {
        content.addClass('highlight');
        form.find('.errorMessage').fadeIn();
        passed = false;
    } else {
        content.removeClass('highlight');
    }

    if (!passed) {
        return false;
    }

    //organize the data properly
    var data = 'headline=' + headline.val() + '&content=' + content.val() + '&important=' + important.val();

    //disabled all the text fields
    form.find('.text').attr('disabled','true');

    //show the loading sign
    $('.loading').show();

    //start the ajax
    var request = $.ajax({

        type: "POST",
        url: "process.php",
        // data: data,
        cache: false,
        success: function (html) {
            if (html == "true") {

                form.find('.sendMessage').attr('disabled','true');
                form.find('.successMessage').fadeIn();

            } else {
                alert("There was an error with your entry. Please try again later while we fix it! :)");
            }
        },
        error: function(jqXHR, textStatus, error) {
            // Fail
            alert("Form Error: " + error);
        }
    });

    //cancel the submit button default behaviours
    return false;

}); 
```

});

PHP

```
 <?php 

    include 'functions.php';

    // Check if form is submitted
    if ( $_SERVER['REQUEST_METHOD'] == "POST" && !empty($_POST['headline']) &&          !empty($_POST['content']) ) {

// Get job details
$title = ($_POST['headline']);
$content = ($_POST['content']);
$compensation = ($_POST['compensation']);
$category = ($_POST['category']);

// Check whether job was marked as 'important'
if ( isset($_POST['important']) ) {
    $important = 1 ;
} else {
    $important = 0;
}

// Get author details
$author_email = $_SESSION['email'];
$author_id = $conn->prepare("SELECT id FROM users WHERE email = ? ");
$author_id->bindParam(1, $author_email, PDO::PARAM_STR);
$author_id->execute();

$get_author_id = $author_id->fetch(PDO::FETCH_ASSOC);
$get_author_id = $get_author_id['id'];

// Here I add the information to the database

echo json_encode(true);
    } else {
echo "Error: Error submitting data to database";
    exit();
    }

    ?> 
```

有人知道发生了什么吗？我尝试了所有可能的方法，但我无法让它工作！我将衷心感谢您的帮助。

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:10:33.227

您应该更改`$important = 1;`为：

```
if ( isset($_POST['important']) ) {
    $important = $_POST['important'];
} else {
    $important = 0;
} 
```

你也有问题：

```
var data = '.....&important=' + important.val(); 
```

它一定是这样的：

```
var data = '.....&important=' + important; 
```

从`.val()`_`important.val()`

# c# - 向鼠标当前位置旋转图像

> ID：13694003
> 
> 赞同：2
> 
> 时间：2012-12-04T00:06:07.710
> 
> 标签：c#, xna, rotation

我正在尝试在 XNA 中制作一个简单的游戏。

我有一个播放器旁边有精灵表。spritesheet 是一种武器，带有提示。

我怎样才能让这个精灵旋转，尖端面向鼠标位置？

```
 float y2 = m_Mouse.Y;
        float y1 = m_WeaponOrigin.Y;
        float x2 = m_Mouse.X;
        float x1 = m_WeaponOrigin.X;

        // Get angle from mouse position.
        m_Radians = (float) Math.Atan2((y2 - y1), (x2 - x1));

Drawing with: 
activeSpriteBatch.Draw(m_WeaponImage, m_WeaponPos, r, Color.White, m_Radians, m_WeaponOrigin, 1.0f, SpriteEffects.None, 0.100f); 
```

虽然这使它旋转，但它不能正确地跟随鼠标，而且它的行为很奇怪。

关于如何使这项工作的任何提示？

我遇到的另一个问题是定义一个点，即枪口，并根据角度对其进行更新，以便从该点向鼠标正确射击。

谢谢

* * *

截图： ![早期，让鼠标和光标到位](../Images/b11c13050f205e7449c1f312076cd552.png)

![玩超级激光](../Images/4c98ac7b4fde6db7a23683600ea2e7ce.png)

![对每种类型的敌人使用超级激光](../Images/82c9ce599a8be65afa22f67c6f4a9b6f.png)

再次感谢，原来是一个有趣的游戏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:38:46.783

基本上，使用[`Math.Atan2`](http://msdn.microsoft.com/en-us/library/system.math.atan2.aspx).

```
Vector2 mousePosition = new Vector2(mouseState.X, mouseState.Y);
Vector2 dPos = _arrow.Position - mousePosition;

_arrow.Rotation = (float)Math.Atan2(dPos.Y, dPos.X); 
```

* * *

**概念证明**（我使用加号纹理作为光标 - 不幸的是它没有显示在截图上）：

![指向光标](../Images/2e38a5fccb152015f15000ec0f061897.png)

* * *

## “是什么`_arrow`？”

在该示例`_arrow`中是 type `Sprite`，在某些情况下可能会派上用场，并且肯定会使您的代码看起来更干净：

```
public class Sprite
{
    public Texture2D Texture { get; private set; }

    public Vector2 Position { get; set; }
    public float Rotation { get; set; }
    public float Scale { get; set; }

    public Vector2 Origin { get; set; }
    public Color Color { get; set; }

    public Sprite(Texture2D texture)
    {
        this.Texture = texture;
    }

    public void Draw(SpriteBatch spriteBatch, GameTime gameTime)
    {
        spriteBatch.Draw(this.Texture, 
                         this.Position, 
                         null, 
                         this.Color, 
                         this.Rotation, 
                         this.Origin, 
                         this.Scale, 
                         SpriteEffects.None, 
                         0f);
    }
} 
```

宣布：

```
Sprite _arrow; 
```

发起：

```
Texture2D arrowTexture = this.Content.Load<Texture2D>("ArrowUp");
_arrow = new Sprite(arrowTexture)
        {
            Position = new Vector2(100, 100),
            Color = Color.White,
            Rotation = 0f,
            Scale = 1f,
            Origin = new Vector2(arrowTexture.Bounds.Center.X, arrowTexture.Bounds.Center.Y)
        }; 
```

画：

```
_spriteBatch.Begin();
_arrow.Draw(_spriteBatch, gameTime);
_spriteBatch.End(); 
```

# nginx - 安装了 gitlab，但只显示 nginx 欢迎页面

> ID：13694006
> 
> 赞同：11
> 
> 时间：2012-12-04T00:06:39.097
> 
> 标签：nginx, gitlab

[我使用它的安装指南](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md)安装了 gitlab 。一切都很好，但是当我在浏览器中打开 localhost:80 时，我看到的都是消息**Welcome to nginx！**. 我找不到任何包含任何错误的日志文件。

我在 VirtualBox 中运行 Ubuntu。我的 /etc/nginx/sites-enabled/gitlab 配置文件内容如下：

```
# GITLAB
# Maintainer: @randx
# App Version: 3.0

upstream gitlab {
  server unix:/home/gitlab/gitlab/tmp/sockets/gitlab.socket;
}

server {
  listen 192.168.1.1:80;         # e.g., listen 192.168.1.1:80;
  server_name aridev-VirtualBox;     # e.g., server_name source.example.com;
  root /home/gitlab/gitlab/public;

  # individual nginx logs for this gitlab vhost
  access_log  /var/log/nginx/gitlab_access.log;
  error_log   /var/log/nginx/gitlab_error.log;

  location / {
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  # if a file, which is not found in the root folder is requested,
  # then the proxy pass the request to the upsteam (gitlab unicorn)
  location @gitlab {
    proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_redirect     off;

    proxy_set_header   X-Forwarded-Proto $scheme;
    proxy_set_header   Host              $http_host;
    proxy_set_header   X-Real-IP         $remote_addr;

    proxy_pass http://gitlab;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:44:06.373

我删除`/etc/nginx/sites-enabled/default`以摆脱这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T08:11:37.137

[nginx 文档](http://nginx.org/en/docs/http/server_names.html)说：

```
Server names are defined using the server_name directive and determine which server block is used for a given request. 
```

这意味着在您的情况下，您必须在浏览器中输入*aridev-VirtualBox而不是 localhost。*

要使其正常工作，您必须在本地[Hosts 文件中输入](http://en.wikipedia.org/wiki/Hosts_%28file%29)*aridev-VirtualBox*并将其指向您的 VirtualBox PC 的 IP。

这看起来如下所示：

```
192.168.1.1 aridev-VirtualBox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T07:04:13.993

你的配置文件是对的。`# /etc/nginx/sites-enabled/gitlab`

也许我认为你的 gitlab 文件链接是错误的。

所以例子：

> ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled/gitlab
> 
> 请检查默认内容 == 您的 /etc/nginx/sites-enabled/gitlab 内容
> 
> 后

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T20:08:19.527

尝试遵循 orkoden 的建议，从 /etc/nginx/sites-enabled/ 中删除默认站点，但也要注释掉您的`listen`行，​​因为默认的隐含行应该足够了。

另外，请确保在对这些配置进行更改时，将 gitlab 和 nginx 服务都关闭，并按照先 gitlab 再启动 nginx 的顺序启动它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T09:40:15.263

我改变了这一行：

```
proxy_pass http://gitlab; 
```

这样 ：

```
proxy_pass http://localhost:3000; 
```

3000 是我的独角兽服务器的端口。

此外，我`chown root:ngnix`对 conf 文件做了一个，它现在可以工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T12:20:00.280

老话题，但是当有以前安装的nginx时可能会发生。
`$ gitlab-ctl reconfigure`
或重新启动不会抱怨，但以前的 nginx 实例实际上可能正在运行，而不是 gitlab 下的那个。
这只是发生在我身上。

关闭并禁用这个旧的 nginx 实例，然后再做一次：
`$ gitlab-ctl reconfigure`

# r - \Sexpr{} .Rnw 文件中的特殊 LaTeX 字符（$、&、%、# 等）

> ID：13694009
> 
> 赞同：3
> 
> 时间：2012-12-04T00:06:53.703
> 
> 标签：r, latex, knitr

它与默认的内联钩子有关，我意识到这一点并且我已经尝试使用它（钩子）并且还阅读[了这个线程](https://stackoverflow.com/questions/11062497/how-to-avoid-using-round-in-every-sexpr?rq=1)和 Yihui 的[关于 hooks 的页面](http://yihui.name/knitr/hooks)，但我无法解决我的问题。我什至尝试了 Sacha Epskamp 的[这个建议，但在我的情况下它并没有做到这一点。](https://stackoverflow.com/a/9896993/1305688)

我正在使用`\Sexpr`和做一些事情`\Sexpr{load("meta.data.saved"); meta.data[1,7]}`来打印我的报告中的关键字，问题是编写这些关键字的人（我无法控制的人）正在使用特殊的 LaTeX 字符（$、&、%、# 等。 ) 并且当它们被传递给我的 .tex 文件时，我过得很`\`糟糕。

我有一个包含此代码的 .Rnw 文件，

```
\documentclass{article}
\begin{document}
 Look \Sexpr{foo <- "me&you"; foo} at this.
\end{document} 
```

Thsi 创建一个带有非法 LaTeX 字符的 .tex 文件。像这样，

```
<!-- Preamble omitted for this example. -->
\begin{document}
 Look me&you at this.
\end{document} 
```

我有兴趣得到一个看起来像这样的输出，

```
<!-- Preamble omitted for this example. -->
\begin{document}
 Look me\&you at this.
\end{document} 
```

很抱歉这个简单的问题，但是有人可以帮助我，也许还有其他人，开始如何修改默认的内联钩子`\Sexpr`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T07:40:43.330

@agstudy 提供的解决方案已经展示了基本思想，这里有一个更健壮的版本：

```
hook_inline = knit_hooks$get('inline')
knit_hooks$set(inline = function(x) {
  if (is.character(x)) x = knitr:::escape_latex(x)
  hook_inline(x)
}) 
```

它仅在内联结果为字符时修改默认内联挂钩（否则仅使用默认挂钩）。我有一个内部函数`escape_latex()`，希望能正确转义所有特殊的 LaTeX 字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T02:04:39.300

在这种情况下挂钩有效。我像这样自定义它：

```
inline_hook <- function(x) {
  x <- gsub("\\&", "\\\\&", x)
  x <- gsub("\\$", "\\\\$", x)
  ## good luck for all Latex special character  
  ## $ % _  {  }  &  ~   ^  <  >   |  \ 
}
knit_hooks$set(inline = inline_hook) 
```

然后

```
 knit(input='report.Rnw') 
```

将重现您的 report.tex。

PS：我认为最好不要让用户做他们想做的事。

# azure - 浏览 Azure 网站文件？

> ID：13694012
> 
> 赞同：0
> 
> 时间：2012-12-04T00:07:04.040
> 
> 标签：azure, file-browser

FTP/SC 是浏览和编辑 Azure 网站的唯一方法吗？

是不是有一个在线文件资源管理器能够应用小的更改，例如修改`web.config`文件等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:02:28.233

没有在线文件​​浏览器。但是，通过网站的“配置”选项卡可以对 web.config 进行细微更改，例如连接字符串、应用程序设置、默认文档和处理程序映射。对于其他一切，您应该使用 FTP。

小心使用 web.config，尽管没有记录，但已经看到一些更改是不允许的。看看[这个问题](https://stackoverflow.com/questions/13630918/disabling-request-validation-on-azure-websites)。

# vba - 具有用户设计功能的条件格式

> ID：13694013
> 
> 赞同：0
> 
> 时间：2012-12-04T00:07:09.627
> 
> 标签：vba, excel, user-defined-functions, conditional-formatting

总的来说，我的目标是创建一个 VBA 宏，它将通过工作表并使用用户设计的函数应用条件格式公式。工作表被分成不同的组，每组 31 行，因此我需要基于 31 步并设置条件格式。我创建了一个名为的自定义函数`IdentifyFormulaCells`，该公式用于条件格式中以执行任何颜色、文本等。

```
Function IdentifyFormulaCells(rng As Range) As Boolean
'   Determine if cell contains a formula based on input range and returns True if there is a formula

IdentifyFormulaCells = rng.HasFormula

End Function

Sub LoopGroup()

    Dim rng As Range
    Dim iRng As Range
    Dim iStep As Long
    Dim ProjectRow As Long
    Dim FormulaString As String

    Dim rngStart As Range
    Dim rngEnd As Range
    Dim iCol As Long
    Dim iRow As Long
    Dim nCol As Long
    Dim nRow As Long

    Set rng = Range("I34:FH994")

    nCol = rng.Columns.Count
    nRow = rng.Rows.Count

'Sets the first project row
    ProjectRow = 34
    FormulaString = "=IdentifyFormulaCells(I" & CStr(ProjectRow) & ")"

'Based on number of employees listed per project
    iStep = 31

    For iRow = 1 To nRow Step iStep
        MsgBox "Project Row before action = " & ProjectRow
        MsgBox "FormulaString before action = " & FormulaString

        Set iRng = Range(rng.Cells(iRow, 1), rng.Cells(iRow, nCol))
        iRng.Select

        With Selection
            .FormatConditions.Delete

'THIS IS WHERE THE PROBLEM IS, NEED TO MAKE A FUNCTION OR STRING THAT INCREMENTS BASED ON THE PROJECT ROW BUT IT STOP AFTER THE FIRST GROUP

            '.FormatConditions.Add Type:=xlExpression, Formula1:="=IdentifyFormulaCells(I34)"

            .FormatConditions.Add Type:=xlExpression, Formula1:=FormulaString

        End With

        MsgBox "project row before step= " & ProjectRow
        ProjectRow = ProjectRow + iStep
        FormulaString = "=IdentifyFormulaCells(I" & CStr(ProjectRow) & ")"

    Next iRow

End Sub 
```

如果我注释掉该`.FormatConditions.Add....`行，那么代码运行良好的循环遍历每组 31 行，但就目前的代码而言，它在仅输入第 34 行的条件格式后停止。

为什么它只输入第一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T17:27:43.217

如果目标只是识别包含公式的单元格，那么它可能会更容易：

主页 > 编辑 > 查找和选择 - 转到特殊...、公式并将选择的格式应用于选定的单元格。

# python - 如果 dict 键不存在或为零？

> ID：13694025
> 
> 赞同：2
> 
> 时间：2012-12-04T00:08:09.987
> 
> 标签：python, dictionary

我想确定 dict 键的值处于以下哪个状态：

1.  不存在
2.  存在，但等于 0 的 int
3.  存在，并且等于大于 0 的 int

这是我目前正在尝试的：

```
if item[itemTo] == 0:
    print("You don't have a %s." % (itemTo))
elif item[itemTo] > 0:
    print("You have %i of %s." % (item[itemTo]))
else:
    print("%s doesn't exist." % (itemTo)) 
```

但是，当`itemTo`不在`item`字典中时，我在该行收到此错误`if item[itemTo] == 0:`：

```
KeyError: 'whatever_value_of_itemTo' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T00:14:43.397

您想更改测试的顺序：

```
if itemTo not in item:
    print("%s doesn't exist." % (itemTo))
elif item[itemTo] > 0:
    print("You have %i of %s." % (item[itemTo]))
else:
    print("You don't have a %s." % (itemTo)) 
```

# java - Android - 字符串

> ID：13694033
> 
> 赞同：-1
> 
> 时间：2012-12-04T00:09:19.470
> 
> 标签：java, android

可能是一个菜鸟问题，但经过一番搜索，我找不到答案。

我收到了如下字符串：“Distribui\u00e7\u00e3o Alimentar”，我想将其设置为`EditText`. 如何将 \u00e7 和 \u00e3o“替换”为“ç”和“ã”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:16:12.160

[带字符串替换功能](http://developer.android.com/reference/java/lang/String.html)

`String newString = stringName.replaceAll("\u007", "c');`

`String newString2 = stringName.replaceAll("\u00e7", "a");`

你可以用`concat`方法将两者连接起来

# python - Python 列表是否保证其元素按插入顺序保持不变？

> ID：13694034
> 
> 赞同：382
> 
> 时间：2012-12-04T00:09:26.957
> 
> 标签：python

如果我有以下 Python 代码

```
>>> x = []
>>> x = x + [1]
>>> x = x + [2]
>>> x = x + [3]
>>> x
[1, 2, 3] 
```

将`x`保证永远是`[1,2,3]`，或者临时元素的其他顺序是否可能？

* * *

## 回答 #1

> 赞同：574
> 
> 时间：2012-12-04T00:11:45.860

是的，python 列表中元素的顺序是持久的。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-12-04T00:17:25.380

简而言之，是的，订单被保留了。长篇：

通常，以下定义将始终适用于列表等对象：

列表是可以**包含**重复元素的元素的集合，并且具有定义的顺序，除非明确要求，否则通常不会更改。**堆栈**和**队列**都是为添加和删除元素提供特定（通常是有限的）行为的列表类型（堆栈是 LIFO，队列是 FIFO）。列表是事物列表的实际表示。一个字符串可以被认为是一个字符列表，因为顺序很`"abc" != "bca"`重要（`"aaa"``!= "a"`

集合是元素的**集合**，这些元素不能包含重复项，并且具有可能会或可能不会随时间变化的不确定顺序。集合并不代表事物的列表，而是描述了特定事物选择的*范围。*set 的内部结构，它的元素如何相互存储，通常并不意味着传达有用的信息。在某些实现中，集合总是在内部排序；在其他情况下，排序只是未定义的（通常取决于散列函数）。

**集合**是一个通用术语，指的是用于存储（通常是可变的）数量的其他对象的任何对象。列表和集合都是集合的一种。元组和数组通常不被视为集合。一些语言也将**映射**（描述不同对象之间关联的容器）视为一种集合。

这种命名方案适用于我所知道的所有编程语言，包括 Python、C++、Java、C# 和 Lisp（其中不按顺序排列的列表将特别具有灾难性）。如果有人知道情况并非如此，请直接说出来，我会编辑我的答案。请注意，特定实现可能对这些对象使用其他名称，例如C++中的**vector和 ALGOL 68 中的****flex**（这两个列表；flex 在技术上只是一个可调整大小的数组）。

如果由于`+`标志在这里的具体工作方式而在您的情况下留下任何混淆，请知道顺序对列表很*重要*，除非有充分的理由相信否则您几乎总是可以安全地假设列表操作保持顺序. 在这种情况下，`+`符号的行为很像字符串（实际上只是字符列表）：它获取列表的内容并将其放在另一个列表的内容后面。

如果我们有

```
list1 = [0, 1, 2, 3, 4]
list2 = [5, 6, 7, 8, 9] 
```

然后

```
list1 + list2 
```

是相同的

```
[0, 1, 2, 3, 4] + [5, 6, 7, 8, 9] 
```

评估为

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

很像

```
"abdcde" + "fghijk" 
```

生产

```
"abdcdefghijk" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-20T22:41:45.457

您混淆了“集合”和“列表”。集合不能保证顺序，但列表可以。

集合使用大括号声明：`{}`. 相反，列表使用方括号声明：`[]`.

```
mySet = {a, b, c, c} 
```

不保证顺序，但 list 可以：

```
myList = [a, b, c] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-24T04:52:56.427

我想你可能关心的一件事是条目是否会改变，例如，2 会变成不同的数字。在这里您可以放心，因为在 Python 中，整数是*不可变*的，这意味着它们在创建后无法更改。

不过，并非 Python 中的所有内容都是不可变的。例如，列表是可变的——它们可以在创建后更改。例如，如果你有一个列表列表

```
>>> a = [[1], [2], [3]]
>>> a[0].append(7)
>>> a
[[1, 7], [2], [3]] 
```

在这里，我更改了`a`（我添加`7`到它的）的第一个条目。可以想象，如果您不小心，会在此处乱序排列，并在这里得到意想不到的东西（实际上，当每个人以某种方式开始使用 Python 编程时，这确实会发生在每个人身上；只需在此站点上搜索“在循环中修改列表它”查看数十个示例）。

还值得指出的是`x = x + [a]`，`x.append(a)`它们不是一回事。第二个 mutates `x`，第一个创建一个新列表并将其分配给`x`。要查看差异，请`y = x`在添加任何内容之前尝试设置`x`并尝试每个设置，并查看两者对`y`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-10T21:20:10.313

是的，除非您对其执行其他操作，否则列表将保持为 [1,2,3]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-06T15:19:01.490

aList=[1,2,3]

我=0

```
for item in aList:  

    if i<2:  

            aList.remove(item)  

    i+=1 
```

一个列表

[2]

道德是在由列表驱动的循环中修改列表时，需要两个步骤：

```
aList=[1,2,3]
i=0
for item in aList:
    if i<2:
        aList[i]="del"
    i+=1

aList

['del', 'del', 3]
for i in range(2):
    del aList[0]

aList
[3] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-11T19:57:21.820

是的，列表和元组总是有序的，而字典不是

# python - Python 正则表达式前瞻非 ASCII 字符

> ID：13694036
> 
> 赞同：1
> 
> 时间：2012-12-04T00:09:36.910
> 
> 标签：python, regex, lookahead

我有大部分这个正则表达式，但是我在前瞻方面遇到了麻烦。我想将一个字符串分隔成一个邮政编码，后跟两个字符串或两个数字。数字可以是以下形式：

```
1
1.5
1.55
11.55 
```

中间位的文字可以是“No minimum”，第三位的文字只能是“Free”。

例如

> “YO1Â£ 10Free” ==> YO1；10个；自由

或者

> "yo1 8 英镑 0.5" ==> yo1; 8个；0.5

或者

> "yo1No minimumÂ£ 0.75" ==> yo1; 没有最低要求；0.75

我首先完成了这个：

```
string = "YO1Â£ 10Free"
patternPostCode = re.compile("[a-zA-Z]{1,2}[0-9][a-zA-Z0-9]?")
postCode = re.findall(string,patternPostCode) 
```

字符串中的数字可通过以下方式找到：

```
patternCost = re.compile(r"(?<=\xa3 )([0-9]|  
[0-9][0-9]|  
[0-9]?[0-9]?.[0-9]|
[0-9]?[0-9]?.[0-9][0-9])") 
```

我很难将“或文本等于“无最小值””添加到 patternCost 搜索中。我也无法设法包括前瞻。最后添加这个不起作用：

```
(?<=\xc2) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:21:55.813

我在 Python 2.7 上提出了这个：

```
# -*- coding: utf-8 -*-
import re

raw_string = "YO1Â£ 10.01Free"
string = raw_string.decode('utf-8')
patternPostCode = re.compile(u"^(\w{3}.*)\s+(\d+\.?\d*)(\w+)$",flags=re.UNICODE)
postCode = patternPostCode.findall(string)

print postCode
print u'; '.join(postCode[0]) 
```

这将返回：

```
[(u'YO1\xc2\xa3', u'10.01', u'Free')]
YO1Â£; 10.01; Free 
```

首先，我从 SO 复制的原始字符串似乎是一个字节串，我必须将其解码为 un​​icode（请参阅[byte string vs. unicode string. Python](https://stackoverflow.com/questions/10060411/byte-string-vs-unicode-string-python)）。我认为您通常可能遇到 unicode 编码错误 - Â 符号就是一个典型的例子。

然后，我使用 re.UNICODE 标志使您的正则表达式对 unicode 友好。这意味着您可以使用 \w 来表示“字母数字”和 \d 以 unicode 友好的方式表示“数字”。

[http://docs.python.org/2/library/re.html#module-re](http://docs.python.org/2/library/re.html#module-re)

由于正则表达式经常被误认为是线路噪音，所以让我为您解包：

```
u"^(\w{3}.*)\s+(\d+\.?\d*)(\w+)$" 
```

*   ^ = 行首
*   (\w{3}.*) = 完全匹配三个字母数字字符 (\w{3})，后跟任何 (.*) 并分组（这是整个事物的括号）。我一般不喜欢 .*，但有必要抓住 Â£ 垃圾。如果您不想要它，请将其移到括号外。
*   \s+ - 至少一个空格。我们会把它扔掉
*   (\d+.?\d*) - 匹配一位或多位数字，后跟可选的句点，后跟可选的一位或多位数字。这将匹配 10、10.、10.0、10.0000 等等。
*   (\w+) - 一个或多个字母数字字符
*   $ - 匹配行尾

这当然不是我写过的最漂亮的正则表达式，但希望它足以让你开始。

# php - 使用 strstr() 排除 excel 中的值，同时不向上移动单元格

> ID：13694041
> 
> 赞同：0
> 
> 时间：2012-12-04T00:10:32.497
> 
> 标签：php, strstr

我在 PHP 中使用 strstr() 删除从 MYSQL 数据库中提取的值以输出到 excel 文件-

**代码：**

```
 If (!strstr($value, '<script>')){
       $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);

           $row++;
        } 
```

此代码不包括包含`<script>`标签的列。然而，它将单元格的内容向上移动，如下所示：

```
=====================================
|Question          |  Answer        |
=====+========+===============+=====|
|   Male/female    |                |
|----+--------+---------------+-----|
|                  |      F         |
|----+--------+---------------+-----| 
```

相反，我希望它像这样跳过行：

```
=====================================
|Question          |  Answer        |
=====+========+===============+=====|
|                  |                |
|----+--------+---------------+-----|
|   Male/female    |      F         |
|----+--------+---------------+-----| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:12:37.913

您的代码是这样编写的，以便仅在找不到您的脚本标记时才增加该行。但是，听起来您想无条件地增加；如果是这种情况，则将 $row++ 移到 if 语句之外，如下所示：

```
if (!strstr($value, '<script>')){
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
}
$row++; 
```

如果这不是您想要的，那么请提供一个可以与输出匹配的示例输入，因为这将使您需要的内容一清二楚。

# .net - VB.Net WebBrowser & navigator.geolocation

> ID：13694043
> 
> 赞同：2
> 
> 时间：2012-12-04T00:10:34.620
> 
> 标签：.net

如何捕获在 IE9 *abc.html 中显示的消息想要跟踪您的物理位置。允许一次？*从页面 abc.html 加载时，它根本不会出现在 WebBrowser 控件中。

# python - 如何优雅地退出有问题的套接字错误处理

> ID：13694044
> 
> 赞同：0
> 
> 时间：2012-12-04T00:10:51.570
> 
> 标签：python, sockets

嗨，我正在编写一个脚本供用户输入 url。我应该验证 url 并让用户知道 url 是否有效。如果我故意输入错误的 url，我会收到 gaierror 的错误消息，但我已经输入了错误在这里处理代码，以便我的程序收到一条消息“无法连接”，就像正常退出一样。看起来像代码行“如果 sock 是 None：-print 'could not open socket' 没有在下面的程序中执行。我是新来的在套接字编程中。我想我做错了什么。有人可以在这里帮助我。在此先感谢！

```
#!/usr/bin/env python
import socket
import sys

def hello(c):
  t=c
  port = 80
  slash=t.split("/")
  basename="/".join(slash[2:3])
  pathname="/"+"/".join(slash[3:])
  sock=None

  for res in socket.getaddrinfo(basename, port, socket.AF_UNSPEC, socket.SOCK_STREAM):
     af, socktype, proto, canonname, sa = res
     try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
     except socket.error:
        sock= None
        continue
     try:
        sock.connect((basename, port))
     except socket.error:            
        sock= None
        continue

  if sock is None:
    print 'could not open socket'###I dont get this printed 
    sys.exit(0)   

  sock.send("HEAD %s HTTP/1.0\r\n\r\n" % pathname)
  l=sock.recv(12)
  return l
  sys.exit(1)
  sock.close()

``I call the hello function from here``
k= hello("https://mail.yah")`purposefully wrong to verify error handle
print k
newsplit=k.split()
print newsplit
insplit=eval(newsplit[1])
print insplit
if insplit==404:
 print "bad"
else:
 print "ok" 
```

我收到以下错误消息：

```
 Traceback (most recent call last):
 File "C:/myserver/cgi-bin/domain.py", line 40, in <module>
 k= hello("https://mail.yah")
 "C:/myserver/cgi-bin/domain.py", line 13, in hello
 for res in socket.getaddrinfo(basename, port, socket.AF_UNSPEC, socket.SOCK_STREAM):
 gaierror: [Errno 11004] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:16:29.267

您可能希望将其包装`socket.getaddrinfo(basename, port, socket.AF_UNSPEC, socket.SOCK_STREAM)`在`try`/`except socket.gaierror`块中，这应该可以解决问题：

```
try:
    for res in socket.getaddrinfo(basename, port, socket.AF_UNSPEC, socket.SOCK_STREAM):
         af, socktype, proto, canonname, sa = res
         # stuff
except socket.gaierror:
    print 'getaddrinfo failed!' 
```

* * *

确实，实际上是`socket.getaddrinfo(basename, port, socket.AF_UNSPEC, socket.SOCK_STREAM)`导致错误的原因！

# java - 替换密码

> ID：13694049
> 
> 赞同：0
> 
> 时间：2012-12-04T00:11:30.183
> 
> 标签：java, substitution, encryption

我正在开发一个替代密码程序，该程序希望我向用户询问一个包含密文和纯文本密钥的文件，并在询问是否之前询问用户一个包含他们想要使用的消息的文本文件他们想加密或解密。

我已经完成了很多程序，但是我无法将关键文本文件读入 ArrayList。

我的测试密钥的文本文件是：ZA YB XC WD VE UF TG SH RI QJ PK OL NM MN LO KP JQ IR HS GT FU EV DW CX BY AZ

我的流程的代码是：

```
public class Process{

public static void main(String[] args){

   ArrayList<Key> key = new ArrayList<Key>();
   String choice;
   String cipher;
   String plain;

   Scanner scan = new Scanner(System.in);

   //asks user for file name with cipher key
   System.out.print("Enter a file name containing your key: ");
   String fileName = scan.next();

   // ask user to encrypt or decrypt using the key
   System.out.print("Would you like to encrypt or decrypt? ");
   choice = scan.next();

   // ask for name of file containing message
   System.out.println("Enter a file name containing your message: ");  
   String fileName2 = scan.next();

   //perform the appropriate substitution on the message
   if (choice.equals("encrypt"))
   {

   }

   else if (choice.equals("decrypt"))
   {

   }

   //display both text and cipher
   for(Key ke : key)
   System.out.println(ke.getCipher() + "\n" + ke.getPlain());

   }
} 
```

关键类：

```
public class Key {
  //instance variables
   String cipher;
   String plain;

public Key(String cipher, String plain) {
 this.cipher = cipher;
 this.plain = plain;
}
 /**
 * getCipher - returns cipher
 * 
 * @return     cipher
 */

  public String getCipher() {
     return cipher;
 }
 /**
 * setCipher - updates cipher name
 * 
 * @param  newCipher   new value of cipher 
 */

  public void setCipher(String newCipher) {
      cipher = cipher;
  }
  /**
 * getPlain - returns plain
 * 
 * @return     plain
 */

  public String getPlain(){
      return plain;
  }
  /**
 * setPlain - updates plain name
 * 
 * @param  newPlain   new value of plain 
 */

  public void setPlain(String newPlain){
      plain = plain;
  }
  /**
 * toString - returns contents of object
 * 
 * @return    result
 */

  public String toString() {
      String result;
      result ="Ciphered text = " + cipher;
      result +="Plain text = " + plain;
      return result;
    }} 
```

# c# - 使用 JavaScript 将表单数据集合序列化为模型

> ID：13694054
> 
> 赞同：0
> 
> 时间：2012-12-04T00:11:47.920
> 
> 标签：c#, javascript, asp.net-mvc, json

假设我有一个这样的对象：

```
public class Widget
{
    public string Name { get; set; }
    public IEnumerable<Foo> Foos { get; set; }
}

public class Foo
{
    public string Name { get; set; }
} 
```

我的控制器方法将它发送到这样的视图：

```
var widget = _dataAccess.GetWidget(someKey);
return View(widget); 
```

我有一个看起来像这样的视图：

```
@model MyNamespace.Widget

@using(Html.BeginForm("Edit", "Widgets", FormMethod.Post, new { id = "the-form" }))
{
    <p>@Html.TextBoxFor</p>

    @foreach(var foo in Model.Foos)
    {
        <p>@Html.TextBoxFor(x => x.Foos.ToList()[Model.Foos.ToList().IndexOf(foo)])</p>   
    }

    <input type="button" value="Save Changes" id="the-button" />
}

<script type="text/javascript">
$(function () {
        $("#the-button").click(function () {
            $.ajax({
                url: '@Url.Action("Edit", "Widgets")',
                type: 'POST',
                data: JSON.stringify({ widget: serializeForm("the-form") }),

                // etc, etc, not important
            });
        });
    });
    function serializeForm(formId) {
        var formData = {};
        $.each($("#" + formId).serializeArray(), function(){
            formData[this.name] = $(this).val();
        });
        return formData;
    }
</script> 
```

序列化为：

```
{ "widget": { "Name" : "value from textbox", "[0].Name" : "some value", "[1].Name" : "some other value" } } 
```

当然，这里的序列化没有帮助，因为`[0].Name`它不可用。有没有办法改变它，使其序列化为 Post 方法控制器操作所期望的？即，类似：

```
{ "widget":{"Name":"blah", "Foos":[ { "Name":"foo name 1"}, { "Name":"foo name 2"} ] }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:18:37.847

您可以将 Foos 输出为：

```
for (int i = 0; i < Model.Foos.Count(); i++) {
    <input type="text" name="Foos[@i].Name" value="@Model.Foos.ElementAt(i).Name" />
} 
```

然后，您可以轻松发布表单：

```
 $("#the-button").click(function () {
    $.ajax({
        url: '@Url.Action("Edit", "Widgets")',
        type: 'POST',
        data: $('this').closest('form').serialize(),

        // etc, etc, not important
    });
}); 
```

Phil Haack 关于模型绑定列表的[帖子](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx "邮政")深入解释了这一点。

# routes - 如何获取 Sinatra 应用程序中使用的所有路线的列表？

> ID：13694058
> 
> 赞同：19
> 
> 时间：2012-12-04T00:12:28.513
> 
> 标签：routes, sinatra

说我有：

```
require 'sinatra'

get '/' { "hi" }
get '/a' { "a" }
get '/b' { "b" } 
```

有什么简单的方法可以在我的 Sinatra 应用程序中获取所有已定义路由的列表？

我调查`Sinatra::Base.routes`了，但这似乎不包含我刚刚定义的路线。

我希望有一个很好的方法来制作一个自我记录的 API，比如`routes.each { |r| p r }`：

```
/
/a
/b 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-09T15:07:20.977

您应该调查`Sinatra::Application.routes`，其中包含您的路线。这将打印您的路由模式的正则表达式：

```
require 'sinatra'

get '/'  do "root" end
get '/a' do "a" end
get '/b' do "b" end

Sinatra::Application.routes["GET"].each do |route|
  puts route[0]
end 
```

为了让事情更简单，看看[sinatra-advanced-routes](https://github.com/rkh/sinatra-advanced-routes)扩展。它为您提供了一个很好的 API 用于内省路由：

```
require 'sinatra'
require 'sinatra/advanced_routes'

get '/'  do "root" end
get '/a' do "a" end
get '/b' do "b" end

Sinatra::Application.each_route do |route|
  puts route.verb + " " + route.path
end 
```

有关更多文档和示例，请参阅 sinatra-advanced-routes 的[README](https://github.com/rkh/sinatra-advanced-routes#readme)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-11T04:04:12.873

这是一个输出路由列表的 rake 任务：

```
desc 'List defined routes'
task :routes do
  require 'app/web/web'

  Shoebox::Server.routes.map do |method, routes|
    routes.map { |r| r.first.to_s }.map do |route|
      "#{method.rjust(7, ' ')} #{route}"
    end
  end.flatten.sort.each do |route|
    puts route
  end
end 
```

输出：

```
 GET /asset/:id
   HEAD /asset/:id
   POST /asset/:aggregate_id/provide
OPTIONS /asset 
```

# extjs4 - IE9 中的 extjs 4 主题化问题，网格栏颜色和按钮不会改变

> ID：13694059
> 
> 赞同：2
> 
> 时间：2012-12-04T00:12:29.490
> 
> 标签：extjs4, extjs4.1

我有以下 sass 代码，当我编译它时，在 Firefox 和 chrome 中一切正常。我唯一的问题是在 IE 中，与 Firefox 和 Chrome（蓝色）相比，网格栏的颜色是纯白色的。有没有解决办法。我正在使用 extjs4。这是我的变量代码

```
 $theme-name: 'slate';

$color1: #abc;
$color2: #3e546b;

$include-missing-images: true;
$base-color: $color1;
$toolbar-background-color:$color1;

//panel
$panel-header-color: #fff;
$panel-header-background-color: $color2;
$panel-border-color: darken($color1, 5);

//grid
$grid-header-color: #fff;
$grid-header-background-color: darken($color1,25);
$grid-header-over-background-color: $color2;
$grid-header-background-gradient: 'glossy';
$grid-header-over-background-gradient: 'glossy';

$grid-row-cell-alt-background: lighten($color1,20);
$grid-row-cell-over-background-color: lighten($color1,10);
$grid-row-cell-over-background-gradient: 'flat';
$grid-row-cell-focus-background-gradient: 'flat';

//window
$window-background-color: $color1;

//buttons
$button-default-color: #fff;
$button-default-base-color: $color2;
$button-default-base-color-over: darken($color1,25);
$button-default-base-color-pressed: darken($color1, 15);
$button-default-background-gradient-over: 'glossy';
$button-default-background-gradient-pressed: 'glossy';

$button-toolbar-border-color-pressed: darken($color1,25);
$button-toolbar-background-color-pressed: darken($color1,25);
$button-toolbar-border-color-over: darken($color1,25);
$button-toolbar-background-color-over: darken($color1, 5);
$button-toolbar-background-gradient: null;
$button-toolbar-background-gradient-over: 'glossy';
$button-toolbar-background-gradient-focus: 'glossy';
$button-toolbar-background-gradient-pressed: 'glossy';
$button-toolbar-background-gradient-disabled: null;
$button-toolbar-color: $color2 !default;
$button-toolbar-color-over: #fff !default;
$button-toolbar-color-pressed: #fff !default;

//tabs
$tab-height: 25px;

$tab-base-color: $color1;
$tab-background-gradient: null;
$tab-base-color-over: darken($color1, 10);
$tab-base-color-active: $color2;
$tab-color-active: #fff;

$tabbar-strip-background-color: $color2;

//progress bar
$progress-bar-background-color: darken($color1,25);

//fieldsets
$fieldset-border-color: $color2;

//datepicker
$datepicker-header-background-color: $color2;
$datepicker-header-background-gradient: 'glossy';
$datepicker-today-item-background-color: $color1;
$datepicker-today-item-border-color: $color2;

$datepicker-th-background-color: $color1;
$datepicker-th-color: $color2;
$datepicker-th-border-bottom-color: $color2;
$datepicker-item-color: #000;
$datepicker-item-hover-background-color: lighten($color1, 15);
$datepicker-selected-item-border-color: $color2;
$datepicker-selected-item-background-color: $color1;
$datepicker-monthpicker-item-color: #fff;

//layout
$accordion-header-color: $color2;
$accordion-header-background-color: $color1;

@import 'ext4/default/all';

// You may remove any of the following modules that you
// do not use in order to create a smaller css file.

@include extjs-boundlist;
@include extjs-button;
@include extjs-btn-group;
@include extjs-datepicker;
@include extjs-colorpicker;
@include extjs-menu;
@include extjs-grid;
@include extjs-form;
    @include extjs-form-field;
    @include extjs-form-fieldset;
    @include extjs-form-file;
    @include extjs-form-checkboxfield;
    @include extjs-form-checkboxgroup;
    @include extjs-form-triggerfield;
    @include extjs-form-htmleditor;
@include extjs-panel;
@include extjs-qtip;
@include extjs-slider;
@include extjs-progress;
@include extjs-toolbar;
@include extjs-window;
@include extjs-messagebox;
@include extjs-tabbar;
@include extjs-tab;
@include extjs-tree;
@include extjs-drawcomponent;
@include extjs-viewport;

// This line changes the location of your images when creating UIs to be relative instead of within the ExtJS directory.
// You MUST set this to true/string value if you are creating new UIs + supporting legacy browsers.
// This only applies to new UIs. It does not apply to default component images (i.e. when changing $base-color)
// The value can either be true, in which case the image path will be "../images/"
// or a string, of where the path is
$relative-image-path-for-uis: true; // defaults to "../images/" when true 
```

![在此处输入图像描述](../Images/b0833381e4c4e2a0874a3ba1bcf84db8.png)

![在此处输入图像描述](../Images/77e6ee01e3d6e6659364cb8f77cd0d33.png)

这就是它在 IE 中的样子 ![在此处输入图像描述](../Images/61fac893306343423dbae8042640c9c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T02:19:07.937

从发布的屏幕截图中，看起来背景图像没有为网格标题切片。[请注意，IE9 Ref](http://msdn.microsoft.com/en-us/library/hh781508%28v=vs.85%29.aspx)不支持 CSS3 渐变。请按照以下步骤调试您的图像切片器。

*   使用 Sencha cmd 通过“sencha app build”命令构建应用程序（如果你还没有这样做的话）
*   在控制台中验证您是否看到来自图像切片器的日志，包括“生成的 xxxx 图像”
*   如果您看到错误或“生成 0 个图像”，请验证主图像是否由 phantomjs 呈现。这可以通过检查文件夹中是否有名为“theme-capture.png”的图像来完成。此图像应包含所有样式组件`build/<*application name*>/production`
*   如果您没有看到这样的图像，则 phantomjs 不会呈现主题页面。在浏览器中查看并确保它呈现所有自定义组件。听起来可能不太正确，但事实是 Sencha CMD 正在将此 html 文件提供给 phantomjs 以生成主图像，然后由切片器切片以生成图像以支持旧版浏览器。`/<*application name*>/sass/example/theme.html`

# operating-system - vnode中的refcount和opencount有什么区别？

> ID：13694060
> 
> 赞同：0
> 
> 时间：2012-12-04T00:12:37.177
> 
> 标签：operating-system

在操作系统中，一个文件控制块可以表示为inode或vnode。这个结构中有两个整数refcount和opencount。他们之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:33:03.207

引用计数是指对 inode 的硬链接引用数，而打开计数是指打开该 inode 的程序数。

这些计数在删除时尤其重要。如果我们允许操作系统在它被删除后立即将先前被 inode 占用的空间返回到空闲列表中，那么硬链接将成为孤立的。同样，我们不想删除当前正在另一个程序中使用的东西。

有关详细信息，请参阅[http://cgi.cse.unsw.edu.au/~cs3231/12s1/tutorials/week07-sol.php?print=1](http://cgi.cse.unsw.edu.au/~cs3231/12s1/tutorials/week07-sol.php?print=1)。

# css - CSS：左、中、右对齐同一行上的文本

> ID：13694062
> 
> 赞同：47
> 
> 时间：2012-12-04T00:12:44.590
> 
> 标签：css

我需要在同一行上左对齐、居中和右对齐**文本。**我有以下文字：

*   左对齐：1/10
*   中心：02:27
*   右对齐：100%

我编写了以下代码，该代码适用于左右对齐文本，但不适用于中心文本。

HTML

```
<div id="textbox">
<p class="alignleft">1/10</p>
<p class="aligncenter">02:27</p>
<p class="alignright">100%</p>
</div>
<div style="clear: both;"></div> 
```

CSS

```
.alignleft {
    float: left;
}
.aligncenter {
    float: left;
}
.alignright {
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-04T00:19:06.967

试试这个

**更新**

**HTML**

```
 <div id="textbox">
 <p class="alignleft">1/10</p>
 <p class="aligncenter">02:27</p>
 <p class="alignright">100%</p>
 </div>
 <div style="clear: both;"></div>​ 
```

**CSS**

```
.alignleft {
  float: left;
  width:33.33333%;
  text-align:left;
}
.aligncenter {
  float: left;
  width:33.33333%;
  text-align:center;
}
.alignright {
 float: left;
 width:33.33333%;
 text-align:right;
}​ 
```

在这里演示代码：http: [//jsfiddle.net/wSd32/1/](http://jsfiddle.net/wSd32/1/) 希望这会有所帮助！

***=======2021 年更新：***

您现在可以使用 HTML5 Flex 来获得相同的结果。无需浮动或清除 div。只需添加`Display: flex;`到包含您要定位的项目的父容器。

***HTML***

```
<div id="textbox">
<p class="alignleft">1/10</p>
<p class="aligncenter">02:27</p>
<p class="alignright">100%</p>
</div> 
```

***CSS***

```
#textbox {display:flex; flex-flow:row wrap;}

.alignleft {
width:33.33333%;
text-align:left;
}
.aligncenter {
width:33.33333%;
text-align:center;
}
.alignright {
width:33.33333%;
text-align:right;
} 
```

**使用 Flex 演示结果：http:** [//jsfiddle.net/jcbiggar1/tsopnf4d/4/](http://jsfiddle.net/jcbiggar1/tsopnf4d/4/)

**有关 Flex 的更多信息：** [https ://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-03-29T17:07:38.323

响应式工作的神奇 HTML5 方式是使用 flex：

```
<div id="textbox">
<p class="alignleft">1/10</p>
<p class="aligncenter">02:27</p>
<p class="alignright">100%</p>
</div>
<div style="clear: both;"></div> 
```

CSS

```
#textbox {
    display: flex;
    justify-content: space-between;
} 
```

演示：

[http://jsfiddle.net/sep4kf6a/1/](http://jsfiddle.net/sep4kf6a/1/)

你会发现它避免了在小屏幕上浮动时出现的尴尬的盒子包装。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-11-13T20:35:55.420

现在是一种全新的、完全不同的方法。

```
.same-line {
    height: 10px; /*childrens it's all absolute position, so must set height*/
    position: relative;
}
.same-line div{
    display: inline-block;
    position: absolute;
}
.on-the-left{
 left:0px;
}
.on-the-center{
    left: 0%;
    right: 0%;
    text-align: center;
}
.on-the-right{
   right: 0px;
}
```

```
<div class="same-line">
    <div class="on-the-left" >it's Left</div>
    <div class="on-the-center" >this Centrer bla bla bla</div>
    <div class="on-the-right" >it's Right</div>
  </div>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T00:15:31.483

也许这有效：

```
p{width:33%;float:left;}
.alignleft{text-align:left;}
.aligncenter {text-align:center;}
.alignright {text-align:right;} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-05T18:42:58.730

**改进 Pod 的答案：**

```
#textbox {
    display: flex;
}
.alignleft {
    flex: 1;
    text-align: left;
}
.aligncenter {
    flex: 1;
    text-align: center;
}
.alignright {
    flex: 1;
    text-align: right;
}
```

```
<div id="textbox">
<p class="alignleft">1/10</p>
<p class="aligncenter">02:27</p>
<p class="alignright">100%</p>
</div> 
```

这避免了在小屏幕上浮动时出现的尴尬框包装，以及在#textbox 中间居中的中间文本。

**JSF中：**

[http://jsfiddle.net/secnayup/](http://jsfiddle.net/secnayup/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-26T14:54:51.500

JCBiggar 伟大解决方案的一个变体是跳过 .alignright 的宽度和文本对齐，而只是将其浮动到右侧。这样做的好处是它消除了对内部元素设置边距或填充的担忧，使 33.33% * 3 超过了包含元素的 100% 宽度。.alignright 的所需位置可以更简单地实现。

那么 CSS 将是：

```
.alignleft {
  float: left;
  width:33.33333%;
  text-align:left;
  padding-left: 10px;
}
.aligncenter {
  float: left;
  width:33.33333%;
  text-align:center;
}
.alignright {
  float: right;
  padding-right: 10px;
}​ 
```

当我的元素需要设置数量的填充（并且不能表示为百分比）时，这对我来说效果很好 - 如上面的 CSS 所示。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-08T06:18:12.393

```
 <table style="width:100%;">
                <tr>
                    <td style="text-align:left;"><p>left</p></td>
                    <td style="text-align:center;"><p>center</p></td>
                    <td style="text-align:right;"><p>right</p></td>
                </tr>
            </table>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-25T21:52:29.213

如果您还希望在同一行上对齐顶部、中间和底部的文本，那么可以扩展 @Thameem 的答案以获得更完整的定位解决方案：

```
<table style="width:100%; height: 100%;">
    <tr>
        <td style="text-align:left; vertical-align: top;">top left</td>
        <td style="text-align:center; vertical-align: top;">top center</td>
        <td style="text-align:right; vertical-align: top;">top right</td>
    </tr>
    <tr>
        <td style="text-align:left; vertical-align: middle;">middle left</td>
        <td style="text-align:center; vertical-align: middle;">middle center</td>
        <td style="text-align:right; vertical-align: middle;">middle right</td>
    </tr>
    <tr>
        <td style="text-align:left; vertical-align: bottom;">bottom left</td>
        <td style="text-align:center; vertical-align: bottom;">bottom center</td>
        <td style="text-align:right; vertical-align: bottom;">bottom right</td>
    </tr>
</table> 
```

使用 HTML 自定义元素和一些 CSS，您可以选择使其更具可读性：

```
<position>
    <top>
        <left>top left</left><centre>top centre</centre><right>top right</right>
    </top>
    <middle>
        <left>middle left</left><centre>middle centre</centre><right>middle right</right>
    </middle>
    <bottom>
        <left>bottom left</left><centre>bottom centre</centre><right>bottom right</right>
    </bottom>
</position> 
```

以及相应的CSS：

```
position {
    display: table;
    table-layout: fixed;
    height: 100%;
    width: 100%;
}

top {
    display: table-row;
}
top * {
    vertical-align: top;
}

middle {
    display: table-row;
}
middle * {
    vertical-align: middle;
}

bottom {
    display: table-row;
}
bottom * {
    vertical-align: bottom;
}

left {
    display: table-cell;
    text-align: left;
}

centre {
    display: table-cell;
    text-align: center;
}

right {
    display: table-cell;
    text-align: right;
} 
```

请注意在某些地方使用“中心”而不是“中心”的英式拼写。我不是英国人，但这样做是为了避免与现有的 HTML“中心”元素及其内置样式发生冲突。如果您碰巧知道样式的神奇组合来覆盖“中心”元素，我很想听听。

你也可以用它来做更少的职位：

```
<position>
    <middle>
        <centre>centre</centre>
    </middle>
</position> 
```

但要小心在“行”（顶部、中间、底部）之间使用相同的“列”（左、中、右）集，因为从技术上讲，它仍然是下面的表格。

我意识到我可能在这个例子中犯了一些编程罪：

1.  混合内容和布局
2.  不命名我的自定义元素（如果我选择的名称恰好被库或 HTML/XML 规范使用，这可能涉及命名冲突）
3.  不使用更现代的 flex 布局
4.  等等

请原谅我。

我发现使用其他解决方案很难实现类似的布局。我希望这可以帮助其他有类似要求的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-03T17:39:02.963

如果有人正在寻找内联 CSS。代码如下。这帮助我为移动设备修复它。

```
<div style="display: flex; justify-content: flex-start; flex-flow:row wrap; height: 0px;"> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-24T00:57:15.123

这是我的简单代码

```
<div style="display: flex;">
  <span style="margin-right: auto">left</span>
  <span>center</span>
  <span style="margin-left: auto">right</span>
</div>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-07T19:34:36.090

我在这里的其他答案有很多对齐问题，所以我想出了另一种方法。这个 HTML：

```
<div class="aligned">
  <div class="left"></div>
  <div class="center"></div>
  <div class="right"></div>
</div> 
```

使用这个 CSS：

```
.aligned { position: relative; text-align: center; }
.aligned .left { left: 0; }    /* or >0 for left padding */
.aligned .right { right: 0; }  /* or >0 for right padding */
.aligned .left, .aligned .right {
  position: absolute;
  top: 50%;
  transform: translate(0, -50%);
} 
```

在同一行上提供左/中/右文本，具有以下功能：

*   可以删除左和/或右 div（因此您可以将其用于 left+center 或 center+right）。
*   中心正确居中；在父级中，而不是在左/右文本的边缘之间。即左/右内容不会影响中心位置。
*   不会创建任何特定大小的“列”，因此您不必处理令人惊讶的自动换行和其他东西。不使用任何特定的硬编码大小。
*   HTML 结构非常简单。此外，div 的顺序并不重要。
*   无论字体系列和大小如何，所有文本都垂直居中。您可以调整`translate`y 值以将顶部或底部基线与中心线对齐。
*   父容器保持流动。
*   反应灵敏。
*   如果您有哲学头脑：不要使用任何奇怪的 CSS 组件，例如为非表格元素设置表格显示模式等。CSS 和 HTML 非常清晰和直接。

但是，它有以下怪癖：

*   父div高度由中心高度决定；因此，如果左/右字体大小要大得多，或者如果您完全省略了中心 div，则必须手动将父 div 高度设置为合理的值。
*   不遵守左/右父填充；虽然很容易修复：只需将显式`left`和`right`位置设置为所需的填充。

下面的例子。希望有帮助。

```
/* script isn't needed for layout; it's just for controlling the examples. */
$('.left').text('Left');
$('.center').text('Center');
$('.right').text('Right');

let step = 0;
setInterval(function() {
  step ++;
  let L = "x".repeat(5 - Math.abs((step % 10) - 5));
  let M = "x".repeat(6 - Math.abs((step % 12) - 6));
  let R = "x".repeat(7 - Math.abs((step % 14) - 7));
  $('.left').text(`${L}Left${L}`);
  $('.center').text(`${M}Center${M}`);
  $('.right').text(`${R}Right${R}`);
}, 100);

let fstep = 0;
setInterval(function() {
  fstep ++;
  let L = 50 + (fstep % 3) * 50;
  let R = 150 - (fstep % 3) * 50;
  $('.left').css('font-size', `${L}%`);
  $('.right').css('font-size', `${R}%`);
}, 500);
```

```
.aligned { position: relative; text-align: center; }
.aligned .left { left: 0; }
.aligned .right { right: 0; }
.aligned .left, .aligned .right {
  position: absolute;
  top: 50%;
  transform: translate(0, -50%);
}

/* rest of this is formatting examples; not needed for alignment. */
.aligned {
  border: 1px solid #888;
  padding: 1em;
  margin: 1em;
}
.left {
  font-family: sans-serif;
}
.center {
  font-family: serif;
}
.right {
  font-family: monospace;
}
```

```
<!-- typical -->
<div class="aligned">
  <div class="left"></div>
  <div class="center"></div>
  <div class="right"></div>
</div>

<!-- order doesn't matter -->
<div class="aligned">
  <div class="right"></div>
  <div class="left"></div>
  <div class="center"></div>
</div>
<div class="aligned">
  <div class="center"></div>
  <div class="left"></div>
  <div class="right"></div>
</div>
<div class="aligned">
  <div class="right"></div>
  <div class="center"></div>
  <div class="left"></div>
</div>

<!-- left/right omitted -->
<div class="aligned">
  <div class="center"></div>
  <div class="right"></div>
</div>
<div class="aligned">
  <div class="left"></div>
  <div class="center"></div>
</div>
<div class="aligned">
  <div class="center"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

# php - 链接的 Preg 匹配错误

> ID：13694064
> 
> 赞同：0
> 
> 时间：2012-12-04T00:13:11.720
> 
> 标签：php, regex, preg-match, scrape

我正在努力完成一些预赛。

我基本上想出了这个

```
preg_match_all('<a href="(.*?)">', $page, $result); 
```

但是这个的输出是

```
Array
(
    [0] => Array
     (
        [0] => a href="/stuff"
        [1] => a href="/stuffstuffstuff"

         and much more of this. 
```

我想删除 a href 以及斜线和引号，只保留内容。我尝试了很多，但这些东西不断回来，任何帮助都会很感激。

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:47:13.060

首先，请不要尝试使用正则表达式解析随机 html，它不会起作用，它迟早会坏掉。正则表达式不是解析 html 的工具，它不能正确解析它。3个简单的例子：

```
<a href='stuff'> (different quotes)
<!-- <a href="stuff">-->
<a style='something' href="stuff"> 
```

这些将破坏您的应用程序。还有无数其他示例，这些示例不起作用并且会破坏它！甚至 Chuck Norris 也不能正确地用正则表达式解析 html，没有人可以！

但我假设你已经知道了，这只是一小部分简单的已知 html，不会公开发布，所以让我们回到你的问题：

preg_match_all 期望正则表达式带有分隔字符，并且它匹配您在它们之间写入的所有内容。如果你写

```
'<a href="(.*?)">' 
```

作为正则表达式，它将开头的“<”视为分隔符，因此不匹配。在它周围写上斜杠（或任何其他字符）：

```
preg_match_all('/<a href="(.*?)">/', $page, $result); 
```

现在，它将像这样匹配：

```
[0] => <a href="/stuff"> 
```

但你只想要'/东西'。$result 给你一个数组。在 $result[0] 中是所有匹配的正则表达式，在 $result[1] 中是第一个 () 匹配的，在 $result[2] 中是第二个 () 匹配的子表达式，依此类推......所以，你想要查看 $result[1]，你应该在那里找到你想要的。

# java - “x == 01”是什么意思？

> ID：13694065
> 
> 赞同：0
> 
> 时间：2012-12-04T00:13:19.397
> 
> 标签：java, conditional, equality

我正在审查由目前不可用的人编写的代码，我遇到了这个：

```
double x = ...;
if(x == 01) {
    // do something
} 
```

我以前从未见过这种情况。它有什么特殊含义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:14:45.730

`01`（以 0 开头的数字）表示 Java 中的**八进制**（以 8 为基数）数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T00:22:01.490

1.  `01`表示`1`八进制（十进制也是 1，因此在这种情况下没有区别。有关八进制的更多信息，请参阅[http://en.wikipedia.org/wiki/Octal](http://en.wikipedia.org/wiki/Octal)。）

2.  如果你问为什么要`x`创建一个新变量，它可以稍后在代码中使用。

3.  （我非常怀疑这一点）如果你问什么`==`意思，它的意思是“等于”。`=`正如您在第一行中看到的那样，只有 1是一项作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:24:14.990

它在某种意义上具有特殊的含义，它是一种八进制数符号。否则它是无用的和混乱的。01 是 int 常量 1。它应该是

```
if(x == 1) {
    // do something
} 
```

javac没有区别。它将被编译成相同的字节码。此外，javac 会将您的表达式转换为

```
if(x == 1.0D) {
    // do something
} 
```

如果你反编译 .class 你会看到它。这种从“较小”​​类型到“较大”类型的自动转换称为类型提升。

# java - java构造函数中有抽象类列表是非法的吗？

> ID：13694066
> 
> 赞同：1
> 
> 时间：2012-12-04T00:13:20.290
> 
> 标签：java, oop

我试图弄清楚为什么以下内容在 Java 中似乎不起作用。

这是基本的抽象类：

```
public abstract class Shape {

} 
```

假设它有两个具体的类，Circle：

```
public class Circle extends Shape {

} 
```

和 Square，它有多个构造函数：

```
public class Square extends Shape {

public Square(Shape shape)
{
    // nothing
}

public Square(List<Shape> shapes)
{
    // nothing
}
} 
```

鉴于此代码：

```
Circle c = new Circle();
List<Circle> cList = new ArrayList<Circle>();
Square s = new Square(c);
Square s2 = new Square(cList); 
```

最后一行产生错误：

```
The constructor Square(List<Circle>) is undefined. 
```

但是我在 Square 中有带有参数的构造函数`List<Shape>`，而 Circle 是一个 Shape - 采用单个 Shape 的构造函数很好。所以我不明白为什么我会收到这个错误。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:16:06.737

将您的构造函数定义为：

```
 public Square(List<? extends Shape> shapes)
       {
          // nothing
       } 
```

这意味着它接受所有扩展的类`Shape`。

注意事项：请注意由于同一事实而产生的副作用，即它接受所有扩展的类`Shape`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:23:15.943

> 但是我在 Square 中有一个带有参数 List 的构造函数，而 Circle 是一个 Shape - 采用单个 Shape 的构造函数就可以了。

这是因为泛型类型在 Java 中是不变的。我们知道`Circle`is-a`Shape`但仍然`List<Circle>`是 is-not-a `List<Shape>`，因此您不能用`List<Circle>`替换`List<Shape>`。要填补这一空白，您必须使用@Yogendra 指出的有界通配符。

[你可以在这里](http://thegreyblog.blogspot.com/2011/03/java-generics-tutorial-part-ii.html)找到解释。

# google-apps-script - 如何在没有 getUserLoginId（谷歌应用脚 本）的情况下将代码执行限制为几个预定义的用户

> ID：13694071
> 
> 赞同：0
> 
> 时间：2012-12-04T00:14:10.893
> 
> 标签：google-apps-script

我有一个在我的 google 表格上运行的 google 脚本，它根据列发送电子邮件。

我希望该脚本只能由几个预定义的用户运行。即，我认为我需要一种方法来让代码检查当前用户是谁，并将其与授权代码执行者列表进行比较。

但是，getUserLoginId 和 getUserEmail 不起作用，因为用户和我在不同的域中，所以只返回 null。

有没有其他方法可以限制哪些用户可以/不能在代码中执行功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:10:09.443

您可以使用`Session.getActiveUser.getEmail()`获取活动用户的电子邮件。然后，您可以将此电子邮件 ID 与允许的电子邮件 ID 数组进行比较。

这是一个示例代码片段。

```
function myFunction(){
  if (isAllowed()){
    //Send email etc
  }
}

function isAllowed(){
  var allowed = false;
  var currentUser = Session.getActiveUser().getEmail();
  var allowedUsers = ['email1@gmail.com', 'email2@gmail.com', 'email3@gmail.com'];
  if(allowedUsers.indexOf(currentUser) != -1){
    allowed = true;
  }
  return allowed;
} 
```

# c - 如何使用 `GtkAttachOptions` 之类的`enum` 类型设置小部件属性？我正在尝试模拟`gtk_widget_set_vexpand`来处理`gtk2`

> ID：13694074
> 
> 赞同：2
> 
> 时间：2012-12-04T00:14:22.610
> 
> 标签：c, linux, gtk3, gtk2

我的项目是创建一个图形应用程序来帮助每个员工在中央数据库中创建自己的客户列表，而我遇到的唯一问题是`gtk3`和`gtk2`. 该项目从头到尾都是基于`gtk3`然后我意识到有些员工只使用一个系统`gtk2`。因此，我毫不费力地对实现进行了一些修改，并且在其目的上没有任何问题。我要完成的最后一件事是模拟[`gtk_widget_get_hexpand()`](http://developer.gnome.org/gtk3/3.6/GtkWidget.html#gtk-widget-get-hexpand)and的功能[`gtk_widget_get_vexpand()`](http://developer.gnome.org/gtk3/3.6/GtkWidget.html#gtk-widget-get-vexpand)...它们仅在`gtk3`. 为了让其他功能以与我相同的方式工作，`gtk3` 我做了这样的事情：

```
#define gtk_grid_new() gtk_table_new(1,1,false)
#define GTK_GRID(x) GTK_TABLE(x)
#define GtkGrid GtkTable
#define gtk_grid_attach(x1,x2,x3,x4,x5,x6) gtk_table_attach(x1,x2,x3,x3+x5,x4,x4+x6,GTK_FILL,GTK_FILL,0,0) 
```

要让应用程序在没有`gtk_widget_get_hexpand()`and`gtk_widget_get_hexpand()`函数的情况下工作，只需：

```
#define gtk_widget_set_hexpand(x1,x2)
#define gtk_widget_set_vexpand(x1,x2) 
```

因为用宏模拟这些功能有点复杂，所以我尝试做这样的事情：

```
inline void gtk_widget_set_hexpand(GtkWidget* widget,gboolean expanded) {
    GValue value = G_VALUE_INIT;
    g_value_init(&value,G_TYPE_ENUM);
    if(expanded)
        g_value_set_enum(&value,GTK_EXPAND);
    else
        g_value_set_enum(&value,GTK_FILL);
    gtk_container_child_set_property(GTK_CONTAINER(gtk_widget_get_parent(widget)),widget,"x-options",&value);
}

inline void gtk_widget_set_vexpand(GtkWidget* widget,gboolean expanded) {
    GValue value = G_VALUE_INIT;
    g_value_init(&value,G_TYPE_ENUM);
    if(expanded)
        g_value_set_enum(&value,GTK_EXPAND);
    else
        g_value_set_enum(&value,GTK_FILL);
    gtk_container_child_set_property(GTK_CONTAINER(gtk_widget_get_parent(widget)),widget,"y-options",&value);
} 
```

[`gtk_container_child_set_property()`](http://developer.gnome.org/gtk3/3.6/GtkContainer.html#gtk-container-child-set-property)

我知道这是不正确的！实际上我不知道如何设置`child properties`和`widgets`更具体的如何创建`GValue`with `G_TYPE_ENUM`。有人能帮我吗？

更新：@ptomato 给了我一个更好的解决方案。实际上通过使用[`gtk_container_child_set()`](http://developer.gnome.org/gtk3/3.6/GtkContainer.html#gtk-container-child-set)函数而不是`gtk_container_child_set_property()`then：

```
#define gtk_widget_set_hexpand(x1,x2) gtk_container_child_set(GTK_CONTAINER(gtk_widget_get_parent(x1)),x1,"x-options",(x2)?(GTK_FILL|GTK_EXPAND):GTK_FILL,NULL);
#define gtk_widget_set_vexpand(x1,x2) gtk_container_child_set(GTK_CONTAINER(gtk_widget_get_parent(x1)),x1,"y-options",(x2)?(GTK_FILL|GTK_EXPAND):GTK_FILL,NULL); 
```

成功的伎俩！感谢@ptomato！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:08:29.557

改用[`gtk_container_child_set()`](http://developer.gnome.org/gtk3/3.6/GtkContainer.html#gtk-container-child-set)：

```
gtk_container_child_set(GTK_CONTAINER(gtk_widget_get_parent(widget)), widget,
    "y-options", expanded? GTK_EXPAND : GTK_FILL,
    NULL); 
```

# java - Java Crypto：CFB 和 PCBC（不基于 API）

> ID：13694077
> 
> 赞同：0
> 
> 时间：2012-12-04T00:14:31.940
> 
> 标签：java, encryption, cryptography

我目前正在根据非常标准的密码学原理完成一个学校项目。虽然我需要的大部分功能都能正常运行，但在手动实现 CFB 和 PCBC 分组密码时遇到了问题。我的源代码是用 Java 编写的，我相信这个问题可能涉及我在执行加密操作或字节操作时没有考虑到的事情。对于这两种密码，使用的加密都是 3DES，我已经单独对其进行了测试，它的功能与我期望的一样。目前，我只是想解决一个简单的情况，在这种情况下，诸如“testtest”（即 16 字节）之类的字符串被正确加密/解密。对于 <=8 字节的情况，代码按预期运行（无论是否幸运，哈哈）。到目前为止，我的核心功能代码是：

```
// for now encrypting at byte block level
protected String decrypt3DES_PCBC(byte[] input) throws Exception {
    System.out.println("Length of input @derypt: " + input.length);
    Block[] output = new Block[input.length];
    int idxA = 0, idxB = 16;
    // P1
    block.setBlock(XOR(tripleDES.get3DESDecryption(Arrays.copyOfRange(
            input, idxA, idxB)), IV));
    output[0] = block;
    System.out.println("decrypt length: " + output[0].getBlock().length);
    System.out.println("Initial decoded block: "
            + new String(output[0].getBlock(), "UTF-16BE"));

    // P2
    block.setBlock(XOR(tripleDES.get3DESDecryption(Arrays.copyOfRange(
            input, idxA + 16, idxB + 16)), Arrays.copyOfRange(input, idxA,
            idxB), output[0].getBlock()));
    output[1] = block;
    System.out.println("decrypt length: " + output[1].getBlock().length);
    System.out.println("Next decoded block: "
            + new String(output[1].getBlock(), "UTF-16BE"));

    return null;
}

private byte[] XOR(byte[] pt, byte[] cText) {
    byte[] output = new byte[pt.length];
    for (int i = 0; i < output.length; i++) {
        output[i] = (byte) (cText[i] ^ pt[i]);
    }
    return output;
}

private byte[] XOR(byte[] pt_0, byte[] pt_1, byte[] ct) {
    byte[] output = new byte[pt_0.length];
    for (int i = 0; i < output.length; i++) {
        output[i] = (byte) (pt_0[i] ^ pt_1[i] ^ ct[i]);
    }
    return output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:34:09.867

对于第二个块，您在密文中跳得太远了。

TripleDES 的块大小为 64 位，转换为 8 个字节。您的代码似乎假定块大小为 16 字节，例如 128 位。

我猜解密算法实现只需要你传递它的数组中的前 8 个字节，所以它成功地解密了第一个块（字节 0-7）（正如你所指出的那样）。然后它跳到 index + 16，这将跳过 8-15 的字节。

尝试将初始分配 idxB 更改为 8，然后将您的第二个 setBlock 调用更改为如下内容：

```
 // P2
block.setBlock(XOR(tripleDES.get3DESDecryption(Arrays.copyOfRange(
        input, idxA + 8, idxB + 8)), Arrays.copyOfRange(input, idxA,
        idxB), output[0].getBlock())); 
```

我敢打赌事情会开始奏效。

# c++ - 为什么我的代码在 Linux 上比在 RTOS 上更快？

> ID：13694078
> 
> 赞同：0
> 
> 时间：2012-12-04T00:14:38.600
> 
> 标签：c++, benchmarking

我用 C++ 编写了一个 Matrix 类，我做了一个基准测试来在树莓派上测试这段代码，当我使用 arch Linux 时，计算时间是 0.4ms，当我使用 RTOS 的 ChibiOS 时，代码的运行时间是 2.5ms。两种情况的CPU频率相同（700Mhz）。可能是一个系统中的内存操作（calloc，memcpy）较慢吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:29:54.003

Since you're using doubles, it's [hard float](http://www.raspbian.org/RaspbianFAQ#What_is_Raspbian.3F) versus soft float.

Note that you must not attempt to run hard float binaries on an OS that doesn't support hard float. If you do, it will appear to work until there's a context switch between two processes that use hard float. Since the OS won't save the floating point state on context switches, they'll step on each other's floating point contexts and results will be unpredictable.

I believe the linker will catch this, so unless you write the assembly yourself and don't use any libraries, it should be difficult to run into this problem accidentally.

# symfony-2.1 - 了解 composer.phar 错误

> ID：13694082
> 
> 赞同：1
> 
> 时间：2012-12-04T00:14:56.367
> 
> 标签：symfony-2.1, composer-php

我是 Symfony2 和 composer.phar 安装包的新手。

每次我想安装一个新的捆绑包时，我都会遇到错误。我不知道是我的 composer.json 坏了还是我完整安装了 Symfony

```
# php composer.phar require friendsofsymfony/comment-bundle
Please provide a version constraint for the friendsofsymfony/comment-bundle requirement: dev-master
composer.json has been updated
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Conclusion: remove symfony/symfony 2.1.x-dev
    - Can only install one of: symfony/symfony dev-master, symfony/symfony 2.1.x-dev.
    - Can only install one of: symfony/symfony 2.2.x-dev, symfony/symfony 2.1.x-dev.
    - don't install symfony/class-loader dev-master|don't install symfony/symfony 2.1.x-dev
    - Installation request for symfony/symfony == 2.1.9999999.9999999-dev -> satisfiable by symfony/symfony 2.1.x-dev.
    - Installation request for symfony/class-loader dev-master -> satisfiable by symfony/class-loader dev-master, symfony/symfony dev-master, symfony/symfony 2.2.x-dev. 
```

作曲家是否试图告诉我我需要再次安装 symfony ？

这是我的 composer.json

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "symfony/class-loader": "dev-master",
        "friendsofsymfony/comment-bundle": "dev-master",
        "knplabs/knp-paginator-bundle": "dev-master",
        "facebook/php-sdk": "dev-master",
        "friendsofsymfony/facebook-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

编辑：由于这些错误，我不得不手动安装捆绑包（例如 FOSFacebookBundle），所以我不得不更新 vendor/composer/autoload_namespaces.php（是的，我知道这很糟糕）

EDIT2：当我执行 composer.phar 更新

```
# php composer.phar update
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Conclusion: remove symfony/symfony 2.1.x-dev
    - Conclusion: don't install symfony/symfony 2.1.x-dev
    - Conclusion: don't install symfony/symfony v2.1.4
    - Conclusion: don't install symfony/symfony v2.1.3
    - Conclusion: don't install symfony/symfony v2.1.2
    - Conclusion: don't install symfony/symfony v2.1.1
    - Conclusion: don't install symfony/symfony v2.1.0
    - Conclusion: don't install symfony/symfony v2.1.0-RC2
    - Conclusion: don't install symfony/symfony v2.1.0-RC1
    - Conclusion: don't install symfony/symfony v2.1.0-BETA4
    - Installation request for friendsofsymfony/facebook-bundle dev-master -> satisfiable by friendsofsymfony/facebook-bundle dev-master.
    - Conclusion: don't install symfony/symfony v2.1.0-BETA3
    - Installation request for symfony/class-loader dev-master -> satisfiable by symfony/class-loader dev-master, symfony/symfony dev-master, symfony/symfony 2.2.x-dev.
    - Conclusion: don't install symfony/symfony v2.1.0-BETA2
    - friendsofsymfony/facebook-bundle dev-master requires symfony/twig-bundle >=2.1,<2.3-dev -> satisfiable by symfony/symfony 2.1.x-dev, symfony/symfony 2.1.x-dev, symfony/symfony 2.2.x-dev, symfony/symfony v2.1.0, symfony/symfony v2.1.1, symfony/symfony v2.1.2, symfony/symfony v2.1.3, symfony/symfony v2.1.4, symfony/twig-bundle 2.1.x-dev, symfony/twig-bundle 2.2.x-dev, symfony/twig-bundle v2.1.0, symfony/twig-bundle v2.1.1, symfony/twig-bundle v2.1.2, symfony/twig-bundle v2.1.3, symfony/twig-bundle v2.1.4.
    - Can only install one of: symfony/symfony v2.1.0-BETA1, symfony/symfony 2.2.x-dev.
    - don't install symfony/twig-bundle 2.1.x-dev|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle 2.2.x-dev|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle v2.1.0|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle v2.1.1|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle v2.1.2|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle v2.1.3|don't install symfony/symfony v2.1.0-BETA1
    - don't install symfony/twig-bundle v2.1.4|don't install symfony/symfony v2.1.0-BETA1
    - Installation request for symfony/symfony 2.1.* -> satisfiable by symfony/symfony 2.1.x-dev, symfony/symfony v2.1.0, symfony/symfony v2.1.0-BETA1, symfony/symfony v2.1.0-BETA2, symfony/symfony v2.1.0-BETA3, symfony/symfony v2.1.0-BETA4, symfony/symfony v2.1.0-RC1, symfony/symfony v2.1.0-RC2, symfony/symfony v2.1.1, symfony/symfony v2.1.2, symfony/symfony v2.1.3, symfony/symfony v2.1.4. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:12:41.083

找到了答案！

尽管看起来很简单（不适合我），但依赖于`symfony/class-loader`没有引用正确的版本。

所以我所要做的就是删除类加载器，一切都很好。

# ios - 在字符串 ios 中查找值

> ID：13694086
> 
> 赞同：0
> 
> 时间：2012-12-04T00:15:32.887
> 
> 标签：ios, nsstring

我正在尝试在 iOS 应用程序中提取字符串中的值。我有一个格式为 NSString：

> 地点：32 3203 292 293 321

我想将所有五个整数存储到 5 个不同的 int 变量中。整数具有不同的长度。我目前正在尝试确定使用空格字符作为指导的整数，但我遇到了问题。必须有一个更简单的方法来做到这一点。

这是我所拥有的：

```
int length = [locationString length];
    NSMutableString * xStr, * yStr,* zStr, *tiltStr, *panStr;

    int charIndex = -1;
    unichar cur;

    for(i = 3; i < length; i++)
    {
        cur = [locationString characterAtIndex:i];
        if(cur == ' ') charIndex++;
        else
        {
            if(charIndex == 0)
            {
                [xStr appendString:[NSString stringWithCharacters:&cur length:1]];
            }
            else if(charIndex == 1)
            {
                [yStr appendString:[NSString stringWithCharacters:&cur length:1]];
            }
            else if(charIndex == 2)
            {
                [zStr appendString:[NSString stringWithCharacters:&cur length:1]];
            }
            else if(charIndex == 3)
            {
                [tiltStr appendString:[NSString stringWithCharacters:&cur length:1]];
            }
            else if(charIndex == 4)
            {
                [panStr appendString:[NSString stringWithCharacters:&cur length:1]];
            }
        }
    }

    NSLog(@"x String: %@", xStr);
    NSLog(@"y String: %@", yStr);
    NSLog(@"z String: %@", zStr);
    NSLog(@"tilt String: %@", tiltStr);
    NSLog(@"pan String: %@", panStr);

    if(xStr != NULL) xVal = [xStr integerValue];
    if(yStr != NULL) yVal = [yStr integerValue];
    if(zStr != NULL) zVal = [zStr integerValue];
    if(tiltStr != NULL) tiltVal = [tiltStr integerValue];
    if(panStr != NULL) panVal = [panStr integerValue]; 
```

但我每次都得到空字符串。其他人以前做过这样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:19:19.587

我认为您应该考虑使用 NSString [componentsSeparatedByString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html) API 让您的生活更轻松。你会得到一个字符串的 NSArray ，`[locationString componentsSeparatedByString:@" "]`你的整数将在 1-5之间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:19:40.120

我会从

```
[locationString componentsSeparatedByString:@" "]; 
```

这将为您提供一个包含每个字符串组件的数组。

然后您可以忽略索引 0，它包含 @"loc:"，其余的数组索引将包含您将使用的数据。

# algorithm - 确定图是否为树的算法

> ID：13694088
> 
> 赞同：2
> 
> 时间：2012-12-04T00:15:49.683
> 
> 标签：algorithm, data-structures, graph, tree

什么是确定作为邻接矩阵给出的图是否是树的简单算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T05:13:00.397

如果 E + 1 = V，您可以计算边数 (E) 和顶点数 (V)，您可以假设它是一棵树。您还需要检查是否有一个连接的组件。要弄清楚它只包含一个组件，您可以使用 DFS 或 BFS。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T00:18:54.647

树是没有环的图，因此要检测您的图是否是树，请检查它是否有任何环。这可以通过遍历矩阵来完成，保留每个访问节点的历史记录，并在访问节点时检查它是否在访问的节点集中。

这是以前关于检测周期的 SO 帖子。这是一个起点： [如何检测有向图是否是循环的？](https://stackoverflow.com/questions/2525282/how-to-detect-if-a-directed-graph-is-cyclic)

您还可以学习图遍历和邻接矩阵，以便更好地了解您需要做什么。

如果在所有这些之后，您仍然需要帮助，您可以发布您到目前为止所拥有的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T17:58:19.333

一些代码（在 Python 中）：

```
def is_tree(G):
    n = len(G)
    M = [False]*n

    def dfs_tree(u, v):
        M[v] = True

        return all(w==u or not M[w] and dfs_tree(v, w) for w in range(n) if G[v][w])

    return dfs_tree(0, 0) and all(M)

print is_tree([
    [0, 1, 1],
    [1, 0, 0],
    [1, 0, 0],
])

'''
 0-1 
 |
 2

 True
'''

print is_tree([
    [0, 1, 1],
    [1, 0, 1],
    [1, 1, 0],
])

'''
 0-1 
 |/
 2 

 False
''' 
```

# android - 如何在 PhotoShop Touch 应用程序中创建 ActionBar 菜单

> ID：13694104
> 
> 赞同：2
> 
> 时间：2012-12-04T00:16:43.803
> 
> 标签：android, android-actionbar

Android PhotoShop Touch 应用程序具有自定义菜单布局，通过点击`ActionBar`. 菜单如下所示：

![在此处输入图像描述](../Images/f3e0a3e1b448feab553098249976f2b4.png)

Adobe 是如何实现这个菜单的？

我试过了：

*   自定义操作项布局，但布局保持在`ActionBar's`边界内。
*   从 启动 xml 菜单，但`ActionBar`它出现*在*`ActionBar`.

也许 PhotoShop 菜单是两者的组合，但它如何在所有布局配置中将菜单的右侧与按钮对齐？

*赏金澄清*：我想知道：

*   如何为从`ActionBar`.
*   处于选中状态的按钮和菜单如何右对齐，即如何沿着这条假想的红线对齐它们（所以按钮和菜单看起来像一个表面）：

![在此处输入图像描述](../Images/2719c5d06c040302a4ffe9216ab4e86c.png)

我不是在寻找一个完整的`ActionBar`解决方案，而是以一个按钮为例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:45:25.720

如果您想尽可能地贴近不使用任何特殊库的代码，而无需花费数天时间，您可以使用 Spinner 的子类：
*res/menu/options.xml ：*

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/option_spinner"
        android:actionLayout="@layout/myspinner"
        android:showAsAction="always"/>
</menu> 
```

*/res/layout/myspinner.xml ：*

```
<com.your.MySpinner xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" /> 
```

*/src/com/your/MySpinner.java*

```
public class MySpinner extends Spinner {
    public MySpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
} 
```

并以您想要的方式自定义该微调器（将其列表替换为您自己的基于 GridView 的组件，以您想要的方式对齐它等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:42:40.587

*阅读：* **添加操作提供程序。** [http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider](http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider)

我认为在图片中，当您单击“**共享”时，就像在库中的****操作提供程序**中一样，并且尊重只是用您的菜单替换它们的项目布局我不知道您是否可以设置 GridView 或任何自定义布局.. 如果可以，这就是你想要的..我还没有尝试过。

 **或者 ..

**请参阅：此示例**[弹出窗口]：[http ://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T20:08:51.073

您可以使用[GreenDroid](https://github.com/cyrilmottier/GreenDroid)，它允许从操作栏中的菜单选项创建浮动窗口。[QuickAction](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)也可能与您正在寻找的内容相近。**

# .net-4.5 - 带有表单身份验证的自定义 SessionSecurityTokenCache

> ID：13694105
> 
> 赞同：1
> 
> 时间：2012-12-04T00:16:51.290
> 
> 标签：.net-4.5, wif, claims-based-identity

我正在尝试结合一些东西。我正在使用[此处](http://leastprivilege.com/2012/02/09/replacing-asp-net-forms-authentication-with-wif-session-authentication-for-the-better/)提出的想法，以便我可以利用索赔，而不必拥有 STS。我也在尝试创建我自己的令牌缓存，记录[在这里](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.sessionsecuritytokencache.aspx)，以便在网络场中工作。我还在组合中包含了新的 MachineKeySessionSecurityTokenHandler 以及[此处](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.tokens.machinekeysessionsecuritytokenhandler.aspx)的文档。我的问题是，当我登录时，一个令牌似乎被创建和缓存，甚至成功地从缓存中提取，但它似乎没有设置线程上下文。因此，用户不会从登录页面重定向，因为没有设置 ClaimsPrincipal。如果我使用默认令牌缓存，一切正常。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:42:50.637

我想到了。我在我使用的 IFormatter 上指定了更多选项。具体来说，

```
TypeFormat = FormatterTypeStyle.TypesAlways,
AssemblyFormat = FormatterAssemblyStyle.Full 
```

# javascript - jQuery不适用于ajax分页

> ID：13694107
> 
> 赞同：0
> 
> 时间：2012-12-04T00:17:03.593
> 
> 标签：javascript, jquery, ajax, pagination

我正在使用 jQuery 在悬停时为我的产品显示覆盖 div。但是我也有 AJAX 分页。叠加层在“第 1 页”上工作正常，但在“第 2 页”上却不行。

覆盖JS：

```
jQuery(function () {

jQuery('.proditem').hover(function () {
    jQuery('.productoverlay', this).stop().css({
        "opacity": 0.3
    }, "fast");
},

function () {
    jQuery('.productoverlay', this).stop().css({
        "opacity": 0
    }, "fast");
});
}); 
```

调用“第 2 页”以显示在同一页面上的 ajax。

```
jQuery.ias({
    container : '.category-products',
    item: '.proditem',
    pagination: '.toolbar .pager',
    next: '.next',
    loader: '<img src="images/ajaxscroll/loader.gif" /> Loading more products'
}); 
```

不确定这是否足够的信息？ajax 分页是一个插件。

请帮忙，也许我缺少一些简单的东西？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:35:25.440

```
jQuery('body').on({
    'mouseover':  function () {
        jQuery('.productoverlay', this).stop().fadeTo('fast', 0.3);
    },
    'mouseout': function () {
        jQuery('.productoverlay', this).stop().fadeTo('fast', 0.3);
    }
}, '.proditem'); 
```

此代码适用于尚不存在的元素。

正如下面评论中所建议的那样 - 更好的方法是将“body”替换为“.proditem”的最接近的父元素，该元素在 AJAX 分页后不会改变。

不要忘记添加[Sintheta](https://stackoverflow.com/users/848249/sinetheta)的评论以获得有用的修复:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:21:59.327

叠加层的 jQuery 仅在页面加载时执行。所以它只适用于当时页面上的元素。当您用新元素替换它们时，当您使用 AJAX 获取第二页时，您将不得不再次运行初始化代码，因此它也适用于新元素。

# ruby - 如何在不显式调用内核的情况下模拟 Kernel.open 或 open-uri？

> ID：13694108
> 
> 赞同：0
> 
> 时间：2012-12-04T00:17:11.380
> 
> 标签：ruby, rspec, mocking, tdd, open-uri

如何在 RSpec 中模拟这个调用？

```
require 'open-uri'
class FileFoo < ActiveRecord::Base
  def download image_url
    open("tmp/#{file}", 'wb') do |file|
      file << open(image_url).read
    end
  end
end 
```

尝试模拟 FileFoo.open，但这不起作用，因为我使用的是下载的文件，而不是返回值。

将代码更改为`file << Kernel.open(image_url).read`，并使用以下内容：

```
Kernel.stub_chain(:open, :read).and_return(File.read image_fixture) 
```

这很好用，但是有没有一种方法可以模拟`Kernel.open().read`，而不显式调用内核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:45:41.373

通常我认为在这种情况下更好的测试不是模拟特定的文件系统调用，而是使用像[fakefs](https://github.com/defunkt/fakefs)这样的 gem 来存根文件系统。

[我在一篇名为Fake It](http://highgroove.com/articles/2011/12/06/fake-it.html)的博客文章中详细讨论了它！.

这个想法是存根特定的文件系统调用非常脆弱，但是在单元测试中也不一定需要写入实际的文件系统。很多时候，像**fakefs**这样的东西是一种很好的快乐媒介。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:43:50.790

我认为这很困难，因为方法的设计`download`很差。它正在做两件事：

1.  通过 HTTP 获取文件
2.  将其保存到磁盘

这些***单独的函数***都应该被测试，第一个应该被模拟。我看不出任何模拟文件系统的理由，因为保存文件（很小）是快速且易于测试的。

如果将该方法分为两种方法，则：

1.  `fetch with http`将返回文件。
2.  `save file`会保存它。

这种方法使模拟和测试变得简单。

# iphone - iphone 5 Default-568h@2x.png 图像适用于模拟器，但不适用于实际设备

> ID：13694114
> 
> 赞同：4
> 
> 时间：2012-12-04T00:17:36.940
> 
> 标签：iphone, ios, xcode, ios6

所以，

我正在尝试将 iPhone 5 支持添加到我的一个应用程序中。我为 4" 版本添加了启动画面，文件名为：Default-568h@2x.png。

在 iOS 模拟器中以 4" 模式运行时，一切正常。

但是，当我在我的 iPhone 5 设备上运行相同的应用程序时，它仍然会在黑色信框中加载旧的 @2x 图像。

我试过删除并重新添加图像。我已经尝试清理构建并重新构建。我试过删除应用程序并重新运行。

我已经使用 568 图像在 XCode 中启动了新项目，它们在我的设备上运行良好。但是，这是一个我正在尝试转换的旧项目。

有没有人遇到过这样的事情？我猜它在某个地方的某个设置，我只是找不到它为我的生活。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:58:15.053

确保图像已添加到目标。如果您在 Project Navigator（左窗格）中选择图像文件，则 Utilities 窗格（右窗格）在您的目标旁边的“Target Membership”下应该有一个复选标记。或者，选择项目后，选择您的目标，然后选择“摘要”选项卡。将您的图像拖到“启动图像”部分中的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:33:10.013

原来是PNG格式错误。Photoshop 不会打开该文件。我唯一能想到的就是我的设计师将 .jpg 重命名为 .png....

# wpf - 由于 UserControl，Designer 中出现 NullReferenceException

> ID：13694121
> 
> 赞同：0
> 
> 时间：2012-12-04T00:18:12.020
> 
> 标签：wpf, vb.net, controls, nullreferenceexception, mainwindow

因此，我正在尝试制作一个具有 2 个并排用户控件的应用程序，当您在它们之间切换时左右滑动。问题是，当我的一个用户控件 (AddReferencePage) 添加到 MainWindow 时，会导致 MainWindow 上的开始标记变为带有 NullReferenceException 错误的下划线。设计器还显示错误：

```
NullReferenceException: Object reference not set to an instance of an object.

StackTrace:
 at ARC.AddReferencePage.ReferenceDetails()
at ARC.AddReferencePage.AddReferencePage_Loaded(Object sender, RoutedEventArgs e)
at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
at System.Windows.BroadcastEventHelper.BroadcastEvent(DependencyObject root, RoutedEvent routedEvent)
at System.Windows.BroadcastEventHelper.BroadcastLoadedEvent(Object root)
at MS.Internal.LoadedOrUnloadedOperation.DoWork()
at System.Windows.Media.MediaContext.FireLoadedPendingCallbacks()
at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler 
```

显示我的用户控件的代码是：

```
<DockPanel x:Name="SlideGrid" VerticalAlignment="Stretch" Width="{Binding ActualWidth, ElementName=MainGrid, Converter={StaticResource DoubleConverter}}" Margin="0,28,0,0" ClipToBounds="True">
    <ItemsControl DockPanel.Dock="Left">
        <local:MainPage/>
    </ItemsControl>
    <ItemsControl DockPanel.Dock="Right">
        <local:AddReferencePage/>
    </ItemsControl>
</DockPanel> 
```

MainPage 工作正常，没有任何错误。它是导致错误的 AddReferencePage。我已经检查了每个用户控件各自的代码背后，它们的所有意图和目的都是相同的。

MainPage 背后的代码：

```
Imports System.Collections.ObjectModel
Imports System.ComponentModel
Imports System.Collections.Specialized
Imports System.Windows.Threading
Imports System.Windows.Media.Animation
Imports System.Globalization

Public Class MainPage
Private StartPoint As Point

Private Sub MainPage_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
    'Dim PW As MainWindow = Window.GetWindow(MainPage)
    'If PW IsNot Nothing Then
    '    ReferenceList.ItemsSource = PW.ReferenceCollection
    '    Dim Alphabetical As SortDescription = New SortDescription("PropLastName", ListSortDirection.Ascending)
    '    ReferenceList.Items.SortDescriptions.Add(Alphabetical)
    'End If
    RefreshReferences()
End Sub

Public Sub RefreshReferences()
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW IsNot Nothing Then
        ReferenceList.ItemsSource = PW.ReferenceCollection
        Dim Alphabetical As SortDescription = New SortDescription("PropLastName", ListSortDirection.Ascending)
        ReferenceList.Items.SortDescriptions.Add(Alphabetical)
    End If
End Sub

Private Sub ListBoxSearch_TextChanged(sender As Object, e As TextChangedEventArgs) Handles ListBoxSearch.TextChanged
    If ListBoxSearch.Text <> "Search..." Then
        Dim PW As MainWindow = Window.GetWindow(MainPage)
        If PW IsNot Nothing Then
            PW.view = CollectionViewSource.GetDefaultView(PW.ReferenceCollection)
            PW.view.Filter = New Predicate(Of Object)(AddressOf PW.FilterList)
        End If
    End If

End Sub

Private Sub ListBoxSearch_MouseLeftButtonUp(sender As Object, e As MouseButtonEventArgs) Handles ListBoxSearch.PreviewMouseDown
    If ListBoxSearch.Text = "Search..." Then
        ListBoxSearch.FontStyle = FontStyles.Normal
        ListBoxSearch.Clear()
    End If
End Sub

Private Sub ListBoxSearch_LostFocus(sender As Object, e As RoutedEventArgs) Handles ListBoxSearch.LostFocus
    If ListBoxSearch.Text = "" Then
        ListBoxSearch.FontStyle = FontStyles.Italic
        ListBoxSearch.Text = "Search..."
    End If
End Sub

Private Sub ListViewClick(sender As Object, e As RoutedEventArgs) Handles ButtonListView.Click
    If ReferenceList.ItemTemplate Is FindResource("GridViewTemplate") Then
        ViewBackground.BeginStoryboard(DirectCast(Me.Resources("ViewRightToLeft"), Storyboard))
        ReferenceList.ItemTemplate = DirectCast(Me.FindResource("ListViewTemplate"), DataTemplate)
        ButtonListView.Content = FindResource("NoListView")
        ButtonGridView.Content = FindResource("NoGridView")
    End If
End Sub

Private Sub GridViewClick(sender As Object, e As RoutedEventArgs) Handles ButtonGridView.Click
    If ReferenceList.ItemTemplate Is FindResource("ListViewTemplate") Then
        ViewBackground.BeginStoryboard(DirectCast(Me.Resources("ViewLeftToRight"), Storyboard))
        ReferenceList.ItemTemplate = DirectCast(Me.FindResource("GridViewTemplate"), DataTemplate)
        ButtonListView.Content = FindResource("NoListView")
        ButtonGridView.Content = FindResource("NoGridView")
    End If
End Sub

Private Sub ListViewEnter(sender As Object, e As RoutedEventArgs) Handles ButtonListView.MouseEnter

End Sub

Private Sub GridViewEnter(sender As Object, e As RoutedEventArgs) Handles ButtonGridView.MouseEnter

End Sub

Private Sub ListViewLeave(sender As Object, e As RoutedEventArgs) Handles ButtonListView.MouseLeave

End Sub

Private Sub GridViewLeave(sender As Object, e As RoutedEventArgs) Handles ButtonGridView.MouseLeave

End Sub

Private Sub EditListBoxItem(sender As Object, e As RoutedEventArgs)
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW IsNot Nothing Then
        PW.ChangeSlide(sender, 1)
        PW.EditItem = ReferenceList.SelectedItem
        PW.NewItem = False
    End If
End Sub

Private Sub DeleteListBoxItem(sender As Object, e As RoutedEventArgs)
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW IsNot Nothing Then
        PW.ReferenceCollection.Remove(ReferenceList.SelectedItem)
    End If
End Sub

Private Sub NewListBoxItem(sender As Object, e As RoutedEventArgs)
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW IsNot Nothing Then
        PW.ChangeSlide(sender, 1)
        PW.NewItem = True
    End If
End Sub

Private Sub ReferenceList_Loaded(sender As Object, e As RoutedEventArgs) Handles ReferenceList.Loaded
    RefreshReferences()
End Sub

Private Sub ReferenceList_PreviewMouseLeftButtonDown(sender As Object, e As MouseButtonEventArgs) Handles ReferenceList.PreviewMouseLeftButtonDown
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    StartPoint = e.GetPosition(Nothing)
    PW.Resizing = False
End Sub

Private Sub ReferenceList_PreviewMouseMove(sender As Object, e As MouseEventArgs) Handles ReferenceList.PreviewMouseMove
    Dim PW As MainWindow = Window.GetWindow(MainPage)
    If PW.Resizing = False Then
        Dim MousePosition As Point = e.GetPosition(Nothing)
        Dim Difference As Vector = StartPoint - MousePosition
        Dim StopDrop As Boolean
        If e.LeftButton = MouseButtonState.Pressed AndAlso (Math.Abs(Difference.X) > SystemParameters.MinimumHorizontalDragDistance Or Math.Abs(Difference.Y) > SystemParameters.MinimumVerticalDragDistance) Then
            Dim LB As ListBox = sender
            Dim UIE As UIElement = LB.InputHitTest(MousePosition)
            If UIE IsNot Nothing Then
                Dim Data As Object = DependencyProperty.UnsetValue
                While Data Is DependencyProperty.UnsetValue And UIE IsNot Nothing
                    Data = LB.ItemContainerGenerator.ItemFromContainer(UIE)
                    If Data Is DependencyProperty.UnsetValue Then
                        UIE = VisualTreeHelper.GetParent(UIE)
                    End If
                    If UIE Is LB Then
                        StopDrop = True
                    End If
                End While
                If Data IsNot DependencyProperty.UnsetValue Then
                    StopDrop = False
                End If
            Else
                StopDrop = True
            End If
            PW.TempItem = LB.SelectedItem
            Dim FN As String = PW.TempItem.PropLastName & ", " & PW.TempItem.PropFirstName.Substring(0, 1)
            Dim TT As String = PW.TempItem.PropTitle
            Dim YR As String = PW.TempItem.PropYear.ToString
            Dim ReferenceText As String = FN & " " & YR & ", " & TT
            Dim DragData As DataObject = New DataObject(DataFormats.StringFormat, ReferenceText)
            If DragData IsNot Nothing And StopDrop = False Then
                DragDrop.DoDragDrop(sender, DragData, DragDropEffects.Copy)
            End If
        End If
    End If

End Sub
End Class 
```

主页的 XAML：

```
<UserControl x:Class="MainPage" x:Name="MainPage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:ARC"
         mc:Ignorable="d"
         VerticalAlignment="Stretch" HorizontalAlignment="Stretch" d:DesignWidth="400" d:DesignHeight="600" SnapsToDevicePixels="True">
<UserControl.Resources>
    <local:ImageConverter x:Key="ImageConverter"/>
    <Image x:Key="BrownBook" Source="Images\Icons\BrownBook.png" Height="64" Width="64"/>

    <Storyboard x:Key="ViewRightToLeft" 
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <ThicknessAnimation Storyboard.TargetName="ViewBackground" Storyboard.TargetProperty="Margin" Duration="0:0:0.15" To="0,0,28,0"/>
    </Storyboard>

    <Storyboard x:Key="ViewLeftToRight" 
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <ThicknessAnimation Storyboard.TargetName="ViewBackground" Storyboard.TargetProperty="Margin" Duration="0:0:0.15" To="0,0,-28,0"/>
    </Storyboard>
</UserControl.Resources>

<Grid Background="#FFF1F1F1">
    <Grid>
        <DockPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <DockPanel Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch" Height="28" DockPanel.Dock="Top" Background="#E5E5E5">
                <Button BorderThickness="0" x:Name="AddNewReference" Style="{DynamicResource NoChromeButton}" DockPanel.Dock="Right" HorizontalAlignment="Right" Click="ListViewClick" Height="28" Width="28">
                    <DynamicResource ResourceKey="SearchBar"/>
                </Button>
                <Button BorderThickness="0" x:Name="Settings" Style="{DynamicResource NoChromeButton}" DockPanel.Dock="Right" HorizontalAlignment="Right" Click="ListViewClick" Height="28" Width="28">
                    <DynamicResource ResourceKey="SearchBar"/>
                </Button>
                <Grid Margin="0,0,0,0" DockPanel.Dock="Right" Width="56" Height="28" VerticalAlignment="Top" HorizontalAlignment="Stretch">
                    <Button Height="28" Width="28" Margin="0,0,28,0" BorderThickness="0" Style="{DynamicResource NoChromeButton}" x:Name="ViewBackground" Background="#3E3B3B"/>
                    <Button Margin="0,0,0,0" BorderThickness="0" x:Name="ButtonGridView" Style="{DynamicResource NoChromeButton}" HorizontalAlignment="Right" Click="GridViewClick" Height="28" Width="28">
                        <DynamicResource ResourceKey="NoGridView"/>
                    </Button>
                    <Button Margin="0,0,28,0" BorderThickness="0" x:Name="ButtonListView" Style="{DynamicResource NoChromeButton}" HorizontalAlignment="Right" Click="ListViewClick" Height="28" Width="28">
                        <DynamicResource ResourceKey="NoListView"/>
                    </Button>

                </Grid>
                <Button BorderThickness="0" x:Name="SearchBarIcon" Style="{DynamicResource NoChromeButton}" DockPanel.Dock="Left" HorizontalAlignment="Right" Click="ListViewClick" Height="28" Width="23">
                    <DynamicResource ResourceKey="SearchBar"/>
                </Button>
                <TextBox x:Name="ListBoxSearch" Style="{DynamicResource SearchBoxTemplate}" Text="Search..." FontSize="16" HorizontalAlignment="Stretch" FontStyle="Italic" BorderThickness="0" Foreground="Gray" Background="Transparent" VerticalContentAlignment="Top"/>

            </DockPanel>
            <ListBox AlternationCount="2"  DockPanel.Dock="Top" Margin="0,0,0,0" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding ReferenceCollection, ElementName=local:MainWindow}" TextSearch.TextPath="SearchString" x:Name="ReferenceList" HorizontalContentAlignment="Stretch" ScrollViewer.CanContentScroll="False" SnapsToDevicePixels="True" AllowDrop="True" BorderThickness="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <ListBox.Background>
                    <LinearGradientBrush StartPoint="1,1" EndPoint="1,0">
                        <GradientStop Offset="0.0" Color="#190000FF"/>
                        <GradientStop Color="#000000FF" Offset="1.0"/>
                    </LinearGradientBrush>
                </ListBox.Background>
                <ListBox.ItemTemplate>
                        <StaticResource ResourceKey="ListViewTemplate"/>
                </ListBox.ItemTemplate>
                <ListBox.ContextMenu>
                    <ContextMenu Style="{StaticResource ListBoxContextMenu}">
                        <MenuItem x:Name="EditContextMenuItem" Header="Edit" Click="EditListBoxItem" Style="{StaticResource ListBoxContextMenuItem}"/>
                        <MenuItem x:Name="DeleteContextMenuItem" Header="Delete" Click="DeleteListBoxItem" Style="{StaticResource ListBoxContextMenuItem}"/>
                        <MenuItem x:Name="NewContextMenuItem" Header="New" Click="NewListBoxItem" Style="{StaticResource ListBoxContextMenuItem}"/>
                    </ContextMenu>
                </ListBox.ContextMenu>
            </ListBox>
        </DockPanel>
    </Grid>
</Grid>
</UserControl> 
```

AddReferencePage 背后的代码：

```
Imports System.Collections.ObjectModel
Imports System.ComponentModel
Imports System.Collections.Specialized
Imports System.Windows.Threading
Imports System.Windows.Media.Animation
Imports System.Globalization

Public Class AddReferencePage
Private SelectImage As Boolean = False

Private Sub ReturnToReferences(sender As Object, e As RoutedEventArgs)
    Dim PW As MainWindow = Window.GetWindow(AddReferencePage)
    If PW IsNot Nothing Then
        If ReferenceAuthor.Text <> "Author" Or ReferenceDate.Text <> "Date" Or ReferenceTitle.Text <> "Title" Then
            Dim CN As String() = Nothing
            Dim FN As String = Nothing
            Dim LN As String = Nothing
            Dim YR As String = Nothing
            Dim TT As String = Nothing

            If ReferenceAuthor.Text = "Author" Then
                ReferenceAuthor.Text = "Unknown"
                FN = Nothing
                LN = "Unknown"
            Else
                If ReferenceAuthor.Text.Contains(" ") Then
                    CN = ReferenceAuthor.Text.Split(" ")
                    FN = CN.First
                    LN = CN.Last
                Else
                    FN = Nothing
                    LN = ReferenceAuthor.Text
                End If

            End If
            If ReferenceDate.Text = "Date" Then
                ReferenceDate.Text = "Unknown"
                YR = "Unknown"
            Else
                YR = ReferenceDate.Text
            End If
            If ReferenceTitle.Text = "Title" Then
                ReferenceTitle.Text = "Unknown"
                TT = "Unknown"
            Else
                TT = ReferenceTitle.Text
            End If
            If PW.NewItem = False Then
                PW.ReferenceCollection.Remove(PW.EditItem)
                PW.AddReferenceItem(FN, LN, TT, YR, "Book")
            Else
                PW.AddReferenceItem(FN, LN, TT, YR, "Book")
            End If
        End If
    End If
    PW.ChangeSlide(sender, 0)
End Sub

Private Sub ButtonsMouseEnter(sender As Button, e As RoutedEventArgs)
    Select Case sender.Name
        Case "ReturnReferences"
            sender.Content = FindResource("BackArrowHover")
    End Select
End Sub

Private Sub ButtonsMouseLeave(sender As Button, e As RoutedEventArgs)
    Select Case sender.Name
        Case "ReturnReferences"
            sender.Content = FindResource("BackArrowNormal")
    End Select
End Sub

Private Sub ButtonsMouseDown(sender As Button, e As RoutedEventArgs)
    Select Case sender.Name
        Case "ReturnReferences"
            sender.Content = FindResource("BackArrowClick")
    End Select
End Sub

Public Sub SaveReferenceSub(sender As Object, e As RoutedEventArgs)
    Dim PW As MainWindow = Window.GetWindow(AddReferencePage)
    Dim CN As String() = ReferenceAuthor.Text.Split(" ")
    Dim FN As String = CN.First()
    Dim LN As String = CN.Last()
    Dim YR As Integer = CInt(ReferenceDate.Text)
    Dim TT As String = ReferenceTitle.Text
    If PW.NewItem = False Then
        PW.ReferenceCollection.Remove(PW.EditItem)
        PW.AddReferenceItem(FN, LN, TT, YR, "Book")
    Else
        PW.AddReferenceItem(FN, LN, TT, YR, "Book")
    End If
End Sub

Private Sub ReferenceDetails()
    Dim PW As MainWindow = Window.GetWindow(AddReferencePage)
    If PW.NewItem = False Then
        ReferenceAuthor.Text = PW.EditItem.PropFirstName & " " & PW.EditItem.PropLastName
        ReferenceTitle.Text = PW.EditItem.PropTitle
        ReferenceDate.Text = PW.EditItem.PropYear.ToString
    End If
End Sub

Private Sub AddReferencePage_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
    ReferenceDetails()
End Sub

Private Sub FieldEnter(sender As TextBox, e As RoutedEventArgs)
    Select Case sender.Name
        Case "ReferenceAuthor"
            If sender.Text = "Author" Then
                sender.Clear()
            End If
        Case "ReferenceTitle"
            If sender.Text = "Title" Then
                sender.Clear()
            End If
        Case "ReferenceDate"
            If sender.Text = "Date" Then
                sender.Clear()
            End If
    End Select
End Sub

Private Sub FieldLeave(sender As TextBox, e As RoutedEventArgs)
    If sender.Text = "" Then
        Select Case sender.Name
            Case "ReferenceAuthor"
                sender.Text = "Author"
            Case "ReferenceTitle"
                sender.Text = "Title"
            Case "ReferenceDate"
                sender.Text = "Date"
        End Select
    End If
End Sub

Private Sub FieldChanged(sender As TextBox, e As RoutedEventArgs)
    If sender.Text <> "Author" And sender.Text <> "Date" And sender.Text <> "Title" Then
        sender.Foreground = Brushes.Black
    Else
        sender.Foreground = Brushes.Gray
    End If
End Sub

Private Sub Button_Click_1(sender As Object, e As RoutedEventArgs)
    If SelectImage = False Then
        SelectImageBox.BeginStoryboard(DirectCast(Me.Resources("LeftToRight"), Storyboard))
        SelectImage = True
    Else
        SelectImageBox.BeginStoryboard(DirectCast(Me.Resources("RightToLeft"), Storyboard))
        SelectImage = False
    End If
End Sub

Private Sub SelectImageBox_LostFocus(sender As Object, e As RoutedEventArgs) Handles SelectImageBox.LostFocus
    'If SelectImage = True Then
    '    SelectImageBox.BeginStoryboard(DirectCast(Me.Resources("RightToLeft"), Storyboard))
    '    SelectImage = False
    'End If
End Sub
End Class 
```

AddReferencePage 的 XAML：

```
<UserControl x:Class="AddReferencePage" x:Name="AddReferencePage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:local="clr-namespace:ARC"
         mc:Ignorable="d"
         VerticalAlignment="Stretch" SnapsToDevicePixels="True" HorizontalAlignment="Stretch" d:DesignWidth="400" d:DesignHeight="600">
<UserControl.Resources>
    <Storyboard x:Key="RightToLeft" 
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="ReferenceInfo" Storyboard.TargetProperty="(Canvas.Left)" Duration="0:0:0.3" To="0"/>
        <DoubleAnimation Storyboard.TargetName="SelectImageBox" Storyboard.TargetProperty="Opacity" Duration="0:0:0.3" From="1.0" To="0.0"/>
    </Storyboard>

    <Storyboard x:Key="LeftToRight" 
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="ReferenceInfo" Storyboard.TargetProperty="(Canvas.Left)" Duration="0:0:0.3" To="{Binding ActualWidth, ElementName=AnimInfo}"/>
        <DoubleAnimation Storyboard.TargetName="SelectImageBox" Storyboard.TargetProperty="Opacity" Duration="0:0:0.3" From="0.0" To="1.0"/>
    </Storyboard>
</UserControl.Resources>

<Grid Background="#FFF1F1F1">
    <Button Style="{DynamicResource NoChromeButton}" x:Name="ReturnReferences" Click="ReturnToReferences" MouseDown="ButtonsMouseDown" MouseEnter="ButtonsMouseEnter" MouseLeave="ButtonsMouseLeave" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="5,5,0,0" Height="48" Width="48">
        <DynamicResource ResourceKey="BackArrowNormal"/>
    </Button>

    <TextBlock Text="Edit References" FontFamily="Segoe UI Light" FontSize="36" Margin="72,3,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
    <TextBlock x:Name="AnimInfo" FontFamily="Segoe UI Light" FontSize="36" Margin="72,3,60,0" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
    <ListView x:Name="SelectImageBox" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="72,59,60,20" Background="Transparent" ScrollViewer.HorizontalScrollBarVisibility="Disabled" BorderThickness="0" Opacity="0">
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
        <Button Style="{DynamicResource NoChromeButton}" Height="48" Width="48">
            <DynamicResource ResourceKey="Book"/>
        </Button>
    </ListView>
    <Canvas x:Name="InfoCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="72,60,0,0" Opacity="1">
        <DockPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,0,0,0" x:Name="ReferenceInfo" Canvas.Left="0" Canvas.Top="0" Width="{Binding ActualWidth, ElementName=InfoCanvas}" Height="{Binding ActualHeight, ElementName=InfoCanvas}">
            <TextBox x:Name="ReferenceAuthor" GotFocus="FieldEnter" TextChanged="FieldChanged" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Author" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
            <TextBox x:Name="ReferenceTitle" GotFocus="FieldEnter" TextChanged="FieldChanged" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Title" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
            <TextBox x:Name="ReferenceDate" GotFocus="FieldEnter" TextChanged="FieldChanged" LostFocus="FieldLeave" FontSize="16" FontFamily="Segoe UI Light" Text="Date" Foreground="Gray" Background="Transparent" DockPanel.Dock="Top" VerticalAlignment="Top" HorizontalAlignment="Stretch" BorderThickness="0" Margin="0,2,0,2"/>
        </DockPanel>
    </Canvas>
    <Button Style="{DynamicResource NoChromeButton}" Margin="5,60,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="48" Height="48" VerticalContentAlignment="Center" Click="Button_Click_1">
        <DynamicResource ResourceKey="Book"/>
    </Button>
</Grid>
</UserControl> 
```

我知道它有很多代码：D，但我真的需要解决这个问题！谢谢大家！如果您需要更多详细信息，请告诉我。我所有的资源和模板都在 Application.xaml 中定义，由于不相关，我没有包括在内。如果需要，我可以包括在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:40:14.553

根据错误堆栈跟踪，错误发生在 sub`ReferenceDetails()`中，它位于问题中倒数第二个代码块中。我认为这些代码行中存在错误，

```
Dim PW As MainWindow = Window.GetWindow(AddReferencePage)
    If PW.NewItem = False Then 
```

我没有使用过WPF，只有Winforms。但是，如果设计师相似，则`MainWindow`可能是`Nothing`在设计时。您可以尝试这样的事情，看看它是否修复了错误。

```
Dim PW As MainWindow = Window.GetWindow(AddReferencePage)
    If PW IsNot Nothing AndAlso PW.NewItem = False Then 
```

这样，如果 PW 回来，因为`Nothing`它不会导致`NullReferenceException`. 此外（我再次假设 WPF 设计人员的工作方式类似于 Winfors），请务必在更改代码后重新构建，然后再尝试将其添加到主窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:06:49.583

感谢 Kratz 如此迅速地做出回应。在玩了一些之后，我发现我需要将用户控件放在 Frame 中。:D

# java - 如何配置 eclipse 以使用额外的参数运行我的 java 程序？

> ID：13694123
> 
> 赞同：0
> 
> 时间：2012-12-04T00:18:27.163
> 
> 标签：java, eclipse

抱歉，如果以前有人问过这个问题，但我找不到关于它的问题。

在运行我的程序时，如何配置 eclipse 以接受三个参数？

我习惯于在命令中输入它们，但 eclipse 终端似乎不允许您输入任何内容，并且运行选项没有明显的方式来输入它们。

我的程序不会在没有参数的情况下运行，因为它需要来自它们的数据来完成它的工作。

建议将不胜感激。

这是我的运行配置窗口![页](../Images/0085cc8fec279b5776e937077c62201a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:23:44.630

我认为您在运行配置中没有仔细查看，因为它就在其选项卡下（方便地称为*Arguments*）：

![在此处输入图像描述](../Images/ed5d6d5f708a1b59db6328547f060131.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:23:36.657

```
Run -> Run Configurations -> Tab (x)=Arguments 
```

在左侧列表中选择您的应用程序，然后在选项卡“(x) = Arguments”中添加您的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:21:19.523

我在这台机器上没有 Eclipse，但如果我没记错的话，您可以通过右键单击您的项目名称并从弹出菜单中选择属性来执行此操作。从那里，寻找可以输入运行时命令行参数的位置。不过，请确保您不会意外添加编译器的参数。

# activerecord - Rails 对连接表的条件查询

> ID：13694124
> 
> 赞同：0
> 
> 时间：2012-12-04T00:18:39.997
> 
> 标签：activerecord, ruby-on-rails-3.2

我有一个连接表，以多对多关系将项目连接到标签。我正在尝试对所有项目进行分页视图，如果进行搜索，则将包括名称或标签名称匹配的所有项目。

当我做：

```
 search = "one"
    Item.all(:conditions=>["items.name LIKE ?", "%#{search}%"]); 
```

我得到了其中包含单词“one”的结果项目。

然后当我这样做时：

```
 search = "one"
    Item.all(:joins=>[:tags], :conditions=>["items.name LIKE ?", "%#{search}%"]); 
```

我得到一个空集。

为什么活动记录给我一个空集而不是仍然给我一个符合条件的结果？我怎样才能得到我正在寻找的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:11:55.783

弄清楚了。事实证明`:joins=>[:tags]`，默认情况下`INNER JOIN`我的查询需要的是一个`OUTER JOIN`. 我的问题的解决方案是做

```
 search = "one"
    Item.all(
        :joins=>['LEFT OUTER JOIN "tags_items" ON "tags_items"."webservice_id" = "webservices"."id" LEFT OUTER JOIN "tags" ON "tags"."id" = "tags_items"."tag_id"'], 
        :conditions=>["items.name LIKE ?", "%#{search}%"]
    ) 
```

# postgresql - PostgreSQL位运算符位不同的“不能与不同大小的位串”

> ID：13694129
> 
> 赞同：6
> 
> 时间：2012-12-04T00:19:12.397
> 
> 标签：postgresql, bit-manipulation

我有一个不同的位掩码字段，我想对其执行按位与。

```
PG::Error: ERROR:  cannot AND bit strings of different sizes
SELECT "groups".* FROM "groups"  WHERE (read_roles_bitmask = B'0' OR read_roles_bitmask & B'10' > B'0') 
```

（你需要在你的表中有不同长度的位掩码才能得到这个错误。）

我希望按位数学如下所示：00010 & 100000010 = 00010

我还尝试将位掩码转换为整数，但没有成功。

为什么 PostgreSQL 对此感到窒息？

我应该如何重写这个查询才能很好地发挥作用？

我能够使用以下方法使按位运算符工作： lpad(read_roles_bitmask::varchar,64,'0')::bigint

但是这仅限于64位，有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T01:02:42.870

PostgreSQL`bit`和`bit varying`类型的行为是非常无用的，它拒绝为操作扩展位域，并且它右扩展它们以进行强制转换而不是左扩展它们。

Pg 在 AND 或 OR 操作之前将较小的操作数左扩展为零是有意义的，而不是失败。

您不能使用强制转换`bit(n)`来获得相同的长度，因为出于某种疯狂的原因，强制转换会`bit(n)` *右填充*参数，使其在几乎所有情况下都无用。

您可以使用类似`lpad($1::text, greatest(length($1), length($2)),'0')::bit varying`将带有零的位字段左扩展为两个长度中的较大者。这很麻烦，但它会起作用。我建议编写包装函数来包含混乱。

或者，考虑修改`bit`支持代码`src/backend/utils/adt/varbit.c`以向左扩展和左截断位字段添加函数，以及进行左扩展比较的函数。根据现有代码，它应该很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-26T01:33:59.180

我今天有一个类似的问题。我想做几乎完全相同的事情：屏蔽位串的最低有效两位并将结果与​​文字值进行比较，如下所示：

```
status & b'11' > b'01' 
```

（状态是我有点变化的专栏）。

最初我尝试使用 Craig 的解决方案，但它很快就变得非常混乱，因为不仅掩码必须保持扩展，我将结果与之比较的值也是如此，因为根据 postgresql：

```
t2=> select b'0010' < b'01';
 ?column?
----------
 t
(1 row) 
```

`<`在应用操作之前，RHS 被正确填充以使其大小与 LHS 相同。

最后我这样解决了：

```
(status << length(status)-2)::bit(2) > b'01' 
```

这样做的好处是它允许您提取任何一组位进行比较。例如，要获得左起第 3 个位对：

```
(status << length(status)-6)::bit(2) 
```

您还可以使用`substring`提取任意一组位进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T16:00:00.507

1）如其他答案中所述 -

```
postgres has has some inconvenient/counterintuitive behaviors - 
right padding when casting to bit(n), 
bitwise ops only on similar size,
etc. 
```

2）一种解决方法是 -

```
double-casting every value - to integer and then to bit(XX) 
```

优点：

```
- left vs right padding works correctly 
- all the bit-strings have same length for correct bitwise operations
- comparisons work correctly
- bit-masking/casting to get least significant bits 
```

例子：

基本左侧填充：

```
select B'0010'::int::bit(22)
0000000000000000000010 
```

位运算：

```
select B'0010'::int::bit(22) | B'01'::int::bit(22)
0000000000000000000011 
```

比较：

```
select B'0010'::int::bit(22) > B'01'::int::bit(22)
true 
```

位掩码/转换以获得三个最低有效位：

```
select B'11010'::int::bit(3)
010 
```

位掩码/转换以获得三个最重要的位：

```
select B'11010'::bit(3)
110 
```

**更新：** 使用 int8 来容纳更长的位串

# ruby-on-rails - 如何将会话从一个子域共享到另一个子域？

> ID：13694131
> 
> 赞同：2
> 
> 时间：2012-12-04T00:19:21.320
> 
> 标签：ruby-on-rails, cookies, ruby-on-rails-3.2, session-cookies

我有一个指向 secure.example.com 的登录表单，它初始化会话，然后重定向到 www.example.com

重定向时，不会创建会话。返回secure.example.com，然后创建会话。这是我认为的 cookie 工作方式的限制吗？

当然，我在 session_store 中添加了 domain: :all，结果相同。

我正在使用 Ruby on Rails 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:07:41.630

我的配置很好，就像我配置的那样`domain: :all`，这就是它所需要的。

我的问题是我必须在`domain: :all`我的所有 cookie 中定义 ，如下所示：

```
cookies[:new_cookie] = { :value => "value", domain: :all } 
```

并且在删除它们时：

```
cookies.delete :new_cookie, domain: :all 
```

在此更改之后，一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:55:34.927

只要您拥有 example.com 并正确定义您的 cookie 域，您应该没问题。关于 cookie 如何工作（或者，正如作者所说，浏览器如何实际实现它们）有一个非常好的答案：[浏览器 cookie 域如何工作？](https://stackoverflow.com/questions/1062963/how-do-browser-cookie-domains-work)

`:domain`在 Rails 中，只需在设置 cookie 时传递正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:50:36.683

您可以在两个应用程序中设置相同的 session_key。在 appA environment.rb 中更改 session_key，像这样

```
Rails::Initializer.run do |config|
  ...  
   config.action_controller.session = {
   :session_key => '_portal_session',
   :secret      => '72bf006c18d459acf51836d2aea01e0afd0388f860fe4b07a9a57dedd25c631749ba9b65083a85af38bd539cc810e81f559e76d6426c5e77b6064f42e14f7415'
   }
   ...
   end 
```

在 AppB 中执行相同的操作。（记得使用相同的秘密）

现在您已共享会话。假设您使用 restfull_authentication，它设置了一个名为 user_id 的会话变量。当您在 appA 中进行身份验证时，它会在会话中设置 user_id。现在，在 appB 中，您只需验证会话中是否存在 user_id。

这是整体架构，您可以使用此想法进行更多详细说明。

# javascript - javascript 确认按钮的本地化

> ID：13694133
> 
> 赞同：11
> 
> 时间：2012-12-04T00:19:44.333
> 
> 标签：javascript, localization, internationalization, confirm

我正在使用 javascript 中的确认框。对于所有浏览器，我发现当更改浏览器的语言时，确认框中的确认按钮语言不会改变。我通过将语言更改为法语在 chrome、firefox 上进行了测试。但是按钮标签没有翻译。“确定”和“取消”的标签不会更改为其他语言。

请注意：我正在尝试在确认框中查看本地化字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T15:12:28.070

没有办法使用`confirm()`和`alert()`JavaScript 函数并有可靠的结果。它仅取决于网络浏览器的语言，即**程序**，而不是您的首选语言。
首选语言用于告诉 Web 服务器您对**网页**语言的偏好。

那么如何本地化确认或消息对话框，你会问？
好吧，摆脱他们。相反，请使用[jQuery UI Dialog 的模态确认](http://jqueryui.com/dialog/#modal-confirmation)，并遵循您对 JavaScript 字符串资源的常规本地化方法。
这是将确认对话框的标题和按钮可靠地翻译成 Web 应用程序语言的唯一方法。

# java - 在 Java 的公式中使用 log base 10

> ID：13694134
> 
> 赞同：33
> 
> 时间：2012-12-04T00:19:57.890
> 
> 标签：java, logarithm

我正在尝试编写一个 Java 程序，该程序可以获取值并将它们放入涉及 log base 10 的公式中。

如何在 Java 中计算 log [10 ？]

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-04T00:22:15.237

看起来Java实际上有一个[`log10`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#log10%28double%29)功能：

```
Math.log10(x) 
```

否则，只需使用数学：

```
Math.log(x) / Math.log(10) 
```

[http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T00:22:25.140

```
Math.log10(x) 
```

浮点数就足够了。

如果你需要以 10 为底的整数对数，并且可以使用第三方库，Guava 提供了[`IntMath.log10(int, RoundingMode)`](http://google.github.io/guava/releases/23.6-jre/api/docs/com/google/common/math/IntMath.html#log10-int-java.math.RoundingMode-). （披露：我为 Guava 做出了贡献。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:29:54.077

the below complete example may help you

```
public class Log10Math {
    public static void main(String args[]) {
        // Method returns logarithm of number argument with base ten(10);
        short shortVal = 10;
        byte byteVal = 1;
        double doubleVal = Math.log10(byteVal);

        System.out.println("Log10 Results");
        System.out.println(Math.log10(1));
        System.out.println(doubleVal);
        System.out.println(Math.log10(shortVal));
    }
} 
```

**Output**

```
Log10 Results
0.0
0.0
1.0 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-01T14:28:27.990

在 Java 中，我们可以使用 log 函数。(int) 数学.log(val); int 是一种将其转换为 this 的类型，您将在其中存储您的答案。

# java - RestTemplate/HttpClient 的缺点/优点

> ID：13694136
> 
> 赞同：1
> 
> 时间：2012-12-04T00:20:11.897
> 
> 标签：java, spring, rest

希望这个问题证明是建设性的，不会让我发火（“你试过谷歌吗？”）。我正在慢慢摆脱 Java 新手状态，目前我面临一个需要做出的决定，我需要为一个涉及测试 RESTful 服务的工作而构建一个项目。我们有一个使用 HTTPClient 的内部 java 框架设置。但是，我阅读了一些建议，说明当您处理 RESTful 服务时，最好使用 Jersey 等特定于 REST 的工具。这里的一位开发人员建议我使用 RestTemplate。我已经开始阅读 RestTemplate 文档以及查看我们自己的 HTTPClient 实现的代码。基本上我可以 A：构建现有的 HTTPClient 工作以将其塞入我自己的项目中，或者 B：使用 RestTemplate 创建一个全新的项目。A 可能更快，而 B 从长远来看可能更合适/更有价值。正如我前言，虽然我对 Java 知识有很好的基础（处理类、方法、修饰符、包结构、继承和组合等），但我现在才刚刚开始掌握像我刚刚描述的这个问题这样的细节（使用哪些工具）。我很高兴能就这两种选择存在的一些缺点和优点获得一些专家意见。

附加说明：我在处理 REST 服务时经常使用soapui。我对 REST 概念的熟悉使我倾向于 RestTemplate（一旦我开始编写代码，它似乎更能与我在 soapui 中所做的事情即插即用），但如果 HTTPClient 可以给我相同的功能，即使它更冗长，并且已经为我完成了大部分工作，我想听听只走 HTTPClient 路线的理由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-14T15:30:11.610

请注意 Spring 5 文档中的这一点：

> 注意：从 5.0 开始，非阻塞、反应式`org.springframework.web.reactive.client.WebClient`提供了一种现代替代方案`RestTemplate`，有效支持同步和异步，以及流场景。将`RestTemplate`在未来的版本中弃用，并且未来不会添加主要的新功能。有关更多详细信息和示例代码，请参阅*Spring Framework 参考文档*`WebClient`部分。

 *另外，检查这个答案： [RestTemplate vs Apache Http Client for production code in spring project](https://stackoverflow.com/questions/31483874/resttemplate-vs-apache-http-client-for-production-code-in-spring-project)

其中提到了几个值得研究的点。*

# python - 安装 PyObjC 时出错

> ID：13694137
> 
> 赞同：0
> 
> 时间：2012-12-04T00:20:18.267
> 
> 标签：python, pyobjc

每次我尝试通过 Macbook Air（OS X 10.8.2）中的终端加载 PyObjC 时，都会出现以下错误。我是 Mac 上唯一的用户，我该怎么办？

Davids-MacBook-Air:~ dave$ easy_install pyobjc==2.2 error: can't create or remove files in install directory

尝试在安装目录中添加或删除文件时发生以下错误：

```
[Errno 13] Permission denied: '/Library/Python/2.7/site-packages/test-easy-install-357.write-test' 
```

您指定的安装目录（通过 --install-dir、--prefix 或 distutils 默认设置）是：

```
/Library/Python/2.7/site-packages/ 
```

也许您的帐户没有对该目录的写入权限？如果安装目录是系统拥有的目录，您可能需要以管理员或“root”帐户登录。如果您没有对这台机器的管理访问权限，您可能希望选择一个不同的安装目录，最好是 PYTHONPATH 环境变量中列出的一个。

有关其他选项的信息，您可能希望在以下位置查阅文档：

[http://peak.telecommunity.com/EasyInstall.html](http://peak.telecommunity.com/EasyInstall.html)

请对您的系统进行适当的更改，然后重试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:41:20.340

您正在尝试将它安装在 root 拥有的系统 Python 中。您可以尝试做`sudo easy_install`，尽管我听到警告说这是一个坏主意。或者，您可以只安装一个新的 Python 并使用它而不是系统 Python（这往往至少有点过时）。您还可以尝试更改系统 Python 的 site-packages: 的权限`chmod a+w /Library/Python/2.7/site-packages/`。

# unix - 错误：Ocaml 中的未绑定模块 Unix

> ID：13694140
> 
> 赞同：5
> 
> 时间：2012-12-04T00:20:32.787
> 
> 标签：unix, process, module, ocaml

两天前我开始使用 Ocaml 进行编程，我已经了解了基本的东西，我想开始尝试创建流程。

在书中，我使用的是告诉我使用 Unix 模块，到目前为止一切都很好......但是当我尝试运行一个打印时间的简单代码时出现此错误：

```
open Unix ;;
let t = Unix.localtime (Unix.time ());;

Printf.printf "Today is day %d of the current year.\n" t.tm_yday ;; 
```

我得到这个错误：

`Error: Unbound module Unix`

我搜索了这个问题的答案，我发现我应该用“unix.cma”链接来编译我的代码，在这之后我能够编译，但代码什么也不做。

我知道这可能是一个非常愚蠢的问题，但如果没有这个我就不能继续下去。图书馆不见了？

如果我在顶层运行，它会说`#load is and unbound value also`！

感谢您的时间！

**编辑：**

我用链接的“unix.cma”重新编译它，得到了同样的错误： `Error: Unbound module Unix`

可能是图书馆的问题？

我做了 ocamlc -where 一切似乎都很好，这意味着所有常用的库都在 PATH 中，包括 unix.cma

**解决了**

这都是由于 Ocaml 安装不当造成的。谢谢杰弗里斯科菲尔德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:28:32.283

它在这里为我工作。这是一个顶级会话（Mac OS X 10.8.2）：

```
$ ocaml
        OCaml version 4.00.0

# #load "unix.cma";;
# open Unix;;
# let t = Unix.localtime (Unix.time ());;
val t : Unix.tm =
  {tm_sec = 39; tm_min = 27; tm_hour = 16; tm_mday = 3; tm_mon = 11;
   tm_year = 112; tm_wday = 1; tm_yday = 337; tm_isdst = false}
# Printf.printf "Today is day %d of the current year.\n" t.tm_yday;;
Today is day 337 of the current year.
- : unit = ()
# 
```

这是与编译器的会话：

```
$ cat doy.ml
open Unix

let t = Unix.localtime (Unix.time ());;

Printf.printf "Today is day %d of the current year.\n" t.tm_yday
$ ocamlc -o doy unix.cma doy.ml
$ doy
Today is day 337 of the current year. 
```

如果这些对你不起作用，我唯一的理论是你的 OCaml 安装不完整。您使用的是什么类型的系统？

# hibernate - 休眠中的多态查询

> ID：13694142
> 
> 赞同：1
> 
> 时间：2012-12-04T00:20:45.267
> 
> 标签：hibernate

我有 3 张桌子：

```
Project.id
Project.name
Cost.id
Cost.price
CostLink.cost_id
CostLink.table_name
CostLink.table_id 
```

我的查询：

```
SELECT *
FROM Project p
JOIN CostLink l on p.id = l.table_id and l.table_name = 'PROJECT'
JOIN Cost c on l.cost_id = c.id 
```

我的问题是，如何在休眠中创建成本和项目实体以使用这个多态链接表？

我在休眠中使用dropwizard。非常感谢提前！

# python - 用python解析xml中的CDATA

> ID：13694143
> 
> 赞同：11
> 
> 时间：2012-12-04T00:21:02.847
> 
> 标签：python, xml, parsing, lxml

我需要解析一个包含许多 CDATA 块的 XML 文件，我需要保留这些块以供以后绘制：

`<process id="process1"> <log name="name1" device="device1"><![CDATA[timestamp value]]]></log> <log name="name2" device="device2"><![CDATA[timestamp value, timestamp value, timestamp]]]></log> </process>`

我将需要反复快速地执行此操作，并且我正在寻找执行此操作的最佳方法。我读过 ElementTree 是更快的方法，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T03:22:55.737

以下是如何做到这一点的两个示例：

```
from lxml import etree
import xml.etree.ElementTree as ElementTree

CONTENT = """
<process id="process1">
 <log name="name1" device="device1"><![CDATA[timestamp value]]></log>
 <log name="name2" device="device2"><![CDATA[timestamp value, timestamp value, timestamp]]></log>
</process>
"""

def parse_with_lxml():
    root = etree.fromstring(CONTENT)
    for log in root.xpath("//log"):
        print log.text

def parse_with_stdlib():
    root = ElementTree.fromstring(CONTENT)
    for log in root.iter('log'):
        print log.text

if __name__ == '__main__':
    parse_with_lxml()
    parse_with_stdlib() 
```

输出：

```
timestamp value
timestamp value, timestamp value, timestamp
timestamp value
timestamp value, timestamp value, timestamp 
```

它在这两种情况下都处理它的文本属性。

# python - iPython 是否具有在寻呼机中查看变量的内置支持？

> ID：13694146
> 
> 赞同：7
> 
> 时间：2012-12-04T00:21:21.820
> 
> 标签：python, ipython

我经常需要在 iPython 中查看长文本变量。我通常为此使用滚动缓冲区，但我真的想要一个带有搜索功能的寻呼机。iPython 是否有办法在寻呼机中查看长变量（例如，更少）？如果没有，我当然可以设计一种方法来做到这一点！

注意：我不是在问一般如何设置 PAGER。?, ??, %pdoc 等都可以用 less 正常工作。我专门询问分页变量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T19:11:27.977

答案：%page

示例用法：

```
snafu$ ipython
In [1]: import httplib2
In [2]: resp,data = httplib2.Http().request('http://google.com')
In [3]: %page data 
```

[如何在 ipython 中使用 Pipe 的](https://stackoverflow.com/questions/5740835/how-to-use-pipe-in-ipython)回答

# ruby-on-rails - 如果已定义，如何编写使用 relative_url_root 的重定向？

> ID：13694165
> 
> 赞同：5
> 
> 时间：2012-12-04T00:22:47.980
> 
> 标签：ruby-on-rails, ruby, rails-routing

我目前正在使用 Ruby on Rails 3.2.8 并在**config/routes.rb**中有此重定向：

```
root :to => redirect("/home/index.html") 
```

这适用于在开发中将 http: **//localhost:3000/**重定向到**http://localhost:3000/home/index.html**。但在我的测试环境中，我使用代理和子路径，在**config/environments/test.rb中设置****relative_url_root**如下所示：

 **```
config.action_controller.relative_url_root = '/testpath' 
```

所以我希望从**http://testdomain.com/testpath**重定向到**http://testdomain.com/testpath/home/index.html**但它会重定向到**http://testdomain.com/home/index.html** .

如果已设置，如何更改我的重定向语句以使用 relative_url_root？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T01:22:00.070

我不认为该方法已被弃用，但它[似乎已被破坏](https://github.com/rails/rails/issues/4308)。您应该能够通过以下方式解决此问题：

```
root :to => redirect("#{ Rails.application.config.action_controller.relative_url_root }/home/index.html") 
```

可能值得指出的是，这个错误在我的机器上是不可重现的（我正在使用瘦），你提出的代码按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:52:37.970

该`relative_url_root`方法似乎已被弃用。有关 Rails 3 解决方案，请参阅此 SO 帖子：[更改 Rails 3 开发的基本 URL](https://stackoverflow.com/questions/5558900/changing-the-base-url-for-rails-3-development)**

# mongodb - MongoDB MapReduce 报告生成

> ID：13694168
> 
> 赞同：0
> 
> 时间：2012-12-04T00:23:15.407
> 
> 标签：mongodb

我有以下布局：

```
{
    "URL": "http://someurl.de",
    "plugins": {
        "HTTPServer": {
            "os": [
                "FreeBSD"
            ],
            "string": [
                "Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8 with Suhosin-Patch"
            ]
        }
    }
} 
```

我想从中获取存储在 plugins.HTTPServer.string 中的唯一项目的计数。然而，所有 MapReduce 示例都仅引用单级文档。据我了解这些示例，您必须在 map 函数中发出数据（或选择要提取的数据），然后使用 reduce 进一步处理结果。我认为我的问题是在映射阶段 - 我需要访问上面的字符串值：“Apache/2.2 ...”

由于我只在 MongoDB 中度过了最后一天，如果我没有在这里提出正确的问题，请原谅我的无知。我是否朝着正确的方向前进？我知道我可以使用 distinct = db.coll.distinct('plugins.HTTPServer.string')，但我想用 MapReduce 来完成。

```
map = function() {
  server = this.plugins.HTTPServer.string
  emit({server : this.server}, {count: 1});
}

reduce = "function(key, values) {
  var count = 0;

  values.forEach(function(v) {
    count += v['count'];
  });

  return {count: count};
}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:22:44.773

你有几个问题：

1.  `this.server`在`map`函数的发射中应该只是`server`
2.  在您的文档中，该`"string"`字段是一个数组，而不是单个字符串，因此您将数组作为您的键发出，这可能不是您想要的。
3.  你的函数`"`中有杂散字符。`reduce`

试试这个：

```
var map = function() {
  if (this.plugins && this.plugins.HTTPServer && this.plugins.HTTPServer.string) {
    this.plugins.HTTPServer.string.forEach(function(server) {
      emit({server: server}, {count: 1});
    });
  }
}

var reduce = function(key, values) {
  var count = 0;

  values.forEach(function(v) {
    count += v['count'];
  });

  return {count: count};
} 
```

# c++ - 如何在 C++ 中使用 cin 隐藏用户输入？

> ID：13694170
> 
> 赞同：0
> 
> 时间：2012-12-04T00:23:20.287
> 
> 标签：c++, linux, user-input

> **可能重复：**
> [从 std::cin 读取密码](https://stackoverflow.com/questions/1413445/read-a-password-from-stdcin)

我正在尝试制作一个简单的密码程序，以便熟悉 C++，但我遇到了一些问题。在这段代码中，我要求用户输入他们选择的密码，然后他们输入密码。我想做的代码是隐藏输入（**不是**用 *s 替换它），但仍然显示光标，以及上面的文本，输入密码之前和之后，像这样：

```
Please enter password: [don't show input]
Please re-enter password: [don't show input] 
```

我怎样才能做到这一点？我使用的是 Linux，所以我将无法使用任何 Windows 库（windows.h 等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:27:24.120

您不能直接使用 cin 执行此操作。你必须“降低”。尝试调用这些函数：

```
#include <termios.h>

...

void HideStdinKeystrokes()
{
    termios tty;

    tcgetattr(STDIN_FILENO, &tty);

    /* we want to disable echo */
    tty.c_lflag &= ~ECHO;

    tcsetattr(STDIN_FILENO, TCSANOW, &tty);
}

void ShowStdinKeystrokes()
{
   termios tty;

    tcgetattr(STDIN_FILENO, &tty);

    /* we want to reenable echo */
    tty.c_lflag |= ECHO;

    tcsetattr(STDIN_FILENO, TCSANOW, &tty);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:26:05.340

您需要调用[`tcsetattr`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/tcsetattr.html)和修改`ECHO`标志。

# php - 使用 mime 读取链接中的隐藏扩展名

> ID：13694172
> 
> 赞同：1
> 
> 时间：2012-12-04T00:23:34.973
> 
> 标签：php

我想抓取一些学术搜索引擎，例如：[http](http://scholar.google.com/scholar?hl=en&q=internet&btnG=&as_sdt=1%2C5&as_sdtp=) ://scholar.google.com/scholar?hl=en&q=internet&btnG=&as_sdt=1%2C5&as_sdtp= 我想得到标题，有pdf的数据的url地址仅文件。这是代码：

```
require_once 'simple_html_dom.php';
$url = 'http://scholar.google.com/scholar?hl=en&q=internet&btnG=&as_sdt=1%2C5&as_sdtp=';
$html = file_get_html($url) or die ('');
foreach($html->find('h3[class=gs_rt] a') as $link1){
    foreach($link1->parent()->parent()->parent()->find('div[class=gs_md_wp]') as $link2){
        $docLink = $link2->first_child();
        $link = $docLink->href;
        $mime = mime_content_type($link);  
        if ($mime == 'application/pdf'){
           $title   = strip_tags($link1->plaintext);echo $title;
           $webLink = strip_tags($link1->href);echo $webLink;
           $pdfLink = strip_tags($link);echo $link;
        }
    }
} 
```

但我收到警告`Fatal error: Call to undefined function mime_content_type() in D:\AppServ\www\ekstension\try3.php on line 10`。

仅供参考，我已`extension=php_mime_magic.dll`在 php.ini 中激活。怎么了 ？谢谢

# linux - 在 RPM 库中识别 RPM 包最新版本的过程是什么？

> ID：13694174
> 
> 赞同：0
> 
> 时间：2012-12-04T00:23:42.020
> 
> 标签：linux, redhat, rpm

我只是想弄清楚 RPM 如何识别某些软件包的最新版本。说我有：

```
package-0.1-SNAPSHOT201212031
package-0.2-SNAPSHOT201212030 
```

rpm 管理器会将其作为字符串进行比较，还是背后有更多逻辑？或者另一个例子：它会识别出 0.10.1 比 0.1.1 更新吗？（字符串比较在这里没有帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:51:16.667

唯一的硬性规定是 RELEASE 字段中不能有**破折号**。

考虑：

```
rpm -qi hwdata 
```

其次是

```
$ rpm -q hwdata --queryformat '%10{NAME} %20{VERSION} %20{RELEASE} %20{ARCH}\n'
hwdata             0.213.22                1.el5               noarch 
```

有关发布标签规则的参考，请参阅本文档[的发布标签](http://www.rpm.org/max-rpm/s1-rpm-inside-tags.html)部分。

注意：作为参考，如果规范文件中没有[rpm 标记](http://www.rpm.org/max-rpm/ch-queryformat-tags.html)，有时我会以编程方式将内容填充到 rpm 描述中。您的里程可能会有所不同，对于注定要回到社区的包裹，我不建议这样做，因为这很尴尬。只是指出它是一种解决方法，以防止制动在 rpm 上运行的各种工具。

注意 2：在 RELEASE 字段中使用修订控制编号是一种常见的做法。虽然这有点违反 rpm 约定。（修改该字段，意味着 specfile 更改了...不是内容）这是一个方便使用的字段，因为它不会破坏任何 rpm 工具，并为您提供对内容版本的直接引用。另外...如果您将 rpm 内容签入修订控制系统，那么无论如何这已经超出了 rpm 模型。IE 源 rpm 变得不必要了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T01:24:30.083

旧帖子，但我一直在努力解决这个问题，并认为我会分享我的工作方式。我正在使用带有 String 类扩展的 ruby​​ 脚本。

```
class String
  def explode
    self.split(/-|_|\./).collect {|i| if i == "0" || i.to_i > 0; then i = i.to_i; end; i}
  end
end 
```

这会将给定的字符串分解为一个数组，其中一组数字被转换为可排序的数值（而不是保留为字符串）。

例如：

```
ruby -r./string_ext.rb -e ' puts %Q{package-0.1-SNAPSHOT201212031}.explode.inspect'
#=> ["package", 0, 1, "SNAPSHOT201212031"]

ruby -r./string_ext.rb -e ' puts %Q{package-0.2-SNAPSHOT201212031}.explode.inspect'
#=> ["package", 0, 2, "SNAPSHOT201212031"]

# the comparison of the resulting arrays is then very straight forward
ruby -r./string_ext.rb -e ' puts %Q{package-0.1-SNAPSHOT201212031}.explode <=> %Q{package-0.2-SNAPSHOT201212030}.explode'
#=> -1 
```

其中 -1 表示第一项小于第二项，0 表示它们相等，1 表示第二项小于第一项。

```
1 <=> 2 #=> -1
2 <=> 2 #=> 0
3 <=> 2 #=> 1 
```

使用这种方法很容易从一组相似的项目中收集最大的价值（比如与同一个包关联的 rpm 数组）。

# git - Git pull origin 创建了一个问题

> ID：13694175
> 
> 赞同：0
> 
> 时间：2012-12-04T00:23:43.603
> 
> 标签：git, github, repository, git-svn

git新手在这里。

我在本地仓库中有 2 个分支 a 和 b。所以如果我这样做

```
git branch
*a
b 
```

然后我错误地做了“git pull origin”，它拉了一堆文件并弄乱了我在分支a上的工作环境。

我想回头。我想撤消“git pull origin” - 我该怎么做？

我尝试了“git pull origin a”，但它给了我数百个要合并的文件，并在一大堆文件之后给出了以下消息：

无法拉取，因为您有未合并的文件。请在工作树中修复它们，然后根据需要使用“git add/rm”来标记解决方案，或使用“git commit -a”。

我尝试了“git reset --hard”，但这并没有带来我想要处理的文件。我能做些什么来解决这个问题？

一条可能有帮助的信息：在执行“git pull origin”之前，对“git log”的响应仅是我团队的提交（仅在该分支上工作）但现在在我执行“git pull origin”之后，结果“git log”是公司每个人的状态。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:42:03.460

除非您已将 pull 配置为在远程更改之上重新设置本地更改，否则使用 pull 会将您的更改与来自远程的提交合并。只要您没有进行任何进一步的提交，这将使`HEAD`ref 指向您的拉操作创建的合并提交。该提交将有两个父级，一个是合并之前的状态，另一个是合并之前远程分支的状态。这些可以分别通过名称`HEAD^`和来引用`HEAD^2`。

您可以使用以下命令在拉取之前返回本地状态：

```
git reset --hard HEAD^ 
```

这将消除您必须对跟踪文件的任何未提交的更改，如果您想要保留任何类似的内容，您可以使用`git stash`它们来保存它们。

在执行重置之前运行以保存当前状态也是一个好主意，`git branch savepoint`以防万一重置使事情变得更糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T01:27:24.723

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T00:29:09.850

try resetting waaaaay back and the pull branch a

```
git reset --hard HEAD^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

(add more ^ if you need to go back even more commits)

and then pull

```
git pull origin a 
```

# ios - 蒙版图像在模拟器中工作，但只是在设备上创建白色图像

> ID：13694178
> 
> 赞同：0
> 
> 时间：2012-12-04T00:24:03.173
> 
> 标签：ios, ios-simulator

我正在尝试将两张图片合并为一张截图。这是代码：

```
- (void)savePhoto:(id)sender
   UIImage *snapShotImageGL1 = [glView snapUIImage];
   UIImage *maskedImage = [self maskImage:_image withMask:snapShotImageGL1];
   UIImageWriteToSavedPhotosAlbum(maskedImage, nil, nil, nil);
} 
```

接着：

```
#pragma mark - Image Processing

- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {

   UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
   [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
   UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   return newImage;
}

- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

CGImageRef maskRef = maskImage.CGImage;

CGImageRef mask =  CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
return [UIImage imageWithCGImage:masked];

}

-(UIImage*)invertImage:(UIImage*)image{

    UIGraphicsBeginImageContext(image.size);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeCopy);
    [image drawInRect:CGRectMake(0, 0, image.size.width, image.size.height)];
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeDifference);
    CGContextSetFillColorWithColor(UIGraphicsGetCurrentContext(),[UIColor  
    whiteColor].CGColor);
    CGContextFillRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width,   
    image.size.height));
    UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return returnImage;
} 
```

这在模拟器中效果很好，但在我的设备上运行时它只会创建一张白色的空白照片。关于我在这里做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:56:51.903

检查 Bundle 中的图像名称。因为模拟器不关心文件是否区分大小写，但设备关心。

如果您的图像名称是`"ConverImage.png"`，它将在模拟器中正常工作，但在设备中不能正常工作。尝试将该文件名更改为`"convertimage.png"`.

# java - Java 数组 - 不确定方法

> ID：13694181
> 
> 赞同：2
> 
> 时间：2012-12-04T00:24:26.737
> 
> 标签：java, arrays, object

我已经设置了一个基本上是餐厅模型的 Java 作业。除了最困难的部分，我大部分都完成了。它基本上是处理数组和对象；有几个部分我不确定。我已经完成了实现 ArrayList 和另一个使用 Map/HashMap 的类。

这是我到目前为止所拥有的：

```
package restaurant;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class ArrayOrder implements Order {

    Product order[];

    public ArrayOrder() {
        this.order = new Product[1000];
    }

    public Iterator<Product> iterator() {

    }

    public void addItem(Product product, int quantity) {    
        /*for(int i = 0; i < quantity; i++)
        {
            this.order[i] = product; // WRONG CODE
        }*/
    }

    public void removeItem(Product product) {

    }

    public int numberOfItems() {
        int length = 0;
        for(int i = 0; i < this.order.length; i++){
            if(this.order[i] != null) {
                length++;
            }
        }
        return length;
    }

    public int totalCost() {
        int resultcost = 0;
        for(int i = 0; i < this.order.length; i++) {
            if(this.order[i] != null) {
                    resultcost += this.order[i].getCost();
            }
        }
        return resultcost;
    }

    public String toString() {
            return Arrays.toString(this.order);
    }

    public int hashCode() {

    }

    public boolean equals() {

    }
} 
```

我读过你不能制作一个未定义长度的数组，但我不确定如何处理这个问题；如果我将数组初始化为一个特定的数字，则可能会发生错误。假设我将数组初始化为 [10] 并且用户添加了 20 个产品，它将出错。

第二个问题是addItem函数；我知道我在这里写的逻辑的问题是，要写入产品的数组的索引只会和数量一样大，所以数量的数组索引是产品被写入的位置；不搜索“this.order”并查找 NULL 数组值并按数量参数指定的次数写入产品。我真的不知道该去哪里。

下一个问题是 removeItem 函数，我想它使用与 addItem 类似的逻辑。我没有在这里写任何东西，因为我的尝试是错误的，我无法让 addItem 函数开始工作，所以我离开了这个。

最后一个问题是 toString 方法。toString 方法获取定义的整个数组（SAY this.order = new Product[10]），我真的不希望它这样做。

例如：

```
//int id, String name, String description, int cost, int serves

Starter s = new Starter(25, "Salad", "A traditional English salad", 750, 1);
Order o3 = new ArrayOrder();
o3.addItem(s, 2); 
```

`toString`该方法产生：

```
[Salad - A traditional English salad (serves 1) $7.50, Salad - A traditional English salad (serves 1) $7.50, null, null, null, null, null, null, null, null] 
```

我希望它在 null、null、null 等之前停止。但它包含整个数组，其中 8 个是 null 值；我不确定如何解决这个问题。无论如何在数组周围并定义它的长度；在上面的示例中，我只添加了 2 个项目，但我声明了一个长度为 [10] 的数组；我怎么知道定义数组的长度？如果用户在上面的示例中添加了 20 个启动器，程序将崩溃......

numberOfItems 和 totalCost 函数在我使用 main 方法测试它们时起作用。

任何能指引我正确方向的指导将不胜感激。谢谢，

编辑：我想我有点不清楚；要求是我要基于 UML 图创建几个类。在此我必须创建 3 个类，它们都实现了 Order 接口。这三个类是（ListOrder、ArrayOrder、MapOrder）。我已经完成了 MapOrder 和 ListOrder，但我被困在 ArrayOrder 上。

这是我的 ArrayList 类：

```
package restaurant;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class ListOrder implements Order{

    private List<Product> order;

    public ListOrder() {
        this.order = new ArrayList<Product>();
    }

    public Iterator<Product> iterator() {
        return order.iterator();
    }

    public void addItem(Product product, int quantity) {
        for(int i = 0; i < quantity; i++) {
            this.order.add(product);
        }
    }

    public void removeItem(Product product) {
        this.order.remove(product);
    }

    public int numberOfItems() {
        return this.order.size();
    }

    public int totalCost() {
        int resultcost = 0;
        for(Product p : order)
        {
            resultcost += p.getCost();
        }
        return resultcost;
    }

    public String toString() {
        return this.order.toString();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:28:41.190

Java 中的数组大小是固定的：在实例化时，必须提供大小。实例化后数组的大小永远不会改变。

您需要的是一种定义动态大小数组的工具。为此，标准 JDK 中存在许多工具。查看`List`接口及其各种实现（`ArrayList`等等`LinkedList`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:30:25.000

Some points:

*   you are importing `ArrayList`, `Arrays`, `Iterator` but never use them, what is the purpose? You are just using a static array that have the problems you mentioned.
*   you should consider using an `ArrayList` to internally store your elements, why would you bother managing a static array that must grow if needed when there is a class that wraps this functionality right for you? (actually a `LinkedList` is better in your situation, take a look at next point)
*   by looking at what you should provide to the outside I see than you don't need random access, this means that, if you really want to roll your own collection, you should model it as a ***linked list*** because you won't have the problems you mentioned (like having to increase size of the array or managing null values).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:34:58.243

据我了解，您已经使用`ArrayList`and实现了相同的功能`Map`，现在您需要使用数组来实现它。

最简单的做法是保留一个包含有效元素数量的额外字段。不要依赖于查找`null`元素，因为这效率低下并且容易出错（特别是如果需求突然改变并且您需要允许`null`元素）。

您还需要一个`int quantities[]`字段来维护数量。这两个数组的大小应始终相同。

然后，当您必须添加新元素时，您可以将有效元素的数量与`order.length`（当前分配的“容量”）进行比较。如果添加新元素会超出容量，那么您只需重新分配`order`：

```
public void addItem(Product product, int quantity) {    
    if (currentSize >= order.length) {
        Product[] temp = new Product[order.length + GROWTH_FACTOR];
        System.arraycopy(order, 0, temp, 0, currentSize);
        order = temp;
        int[] q2 = new int[order.length + GROWTH_FACTOR];
        System.arraycopy(quantities, 0, q2, 0, currentSize);
        quantities = q2;
    }
    quantities[currentSize] = quantity;
    order[currentSize++] = product;
} 
```

这`GROWTH_FACTOR`是一个常数，当您用完空间时扩展阵列的数量。

或者，您可以引入一个保留产品/数量对的私有静态类：

```
private static class OrderItem {
    final Product product;
    final int quantity;
    OrderItem(Product product, int quantity) {
        this.product = product;
        this.quantity = quantity;
    }
}

private OrderItem[] orders;
private int currentSize;

public void addItem(Product product, int quantity) {
    if (currentSize >= orders.length) {
        // reallocate orders array
    }
    orders[currentSize++] = new OrderItem(product, quantity);
} 
```

# bash - 如何将“ps -ef”的输出拆分为“行输出”

> ID：13694185
> 
> 赞同：0
> 
> 时间：2012-12-04T00:24:53.277
> 
> 标签：bash, shell

如何将“ps -ef”的输出拆分为“行输出”。我遇到的问题之一是如何在字符串标记化期间将“gpm -m /dev/input/mice -t exps2”作为单个项目处理。

如果 'ps -ef' 的输出是这样的：

```
root      3410     1  0 Jun17 ?        00:00:00 gpm -m /dev/input/mice -t exps2
root      3424     1  0 Jun17 ?        00:00:00 crond
root      3488     1  0 Jun17 ?        00:00:00 /usr/sbin/atd 
```

然后，我怎样才能漂亮地打印它，使它看起来像：

```
1:
root
3410
00:00:00
gpm -m /dev/input/mice -t exps2

2: 
root
3424
00:00:00
crond

3: 
root
3488
00:00:00
/usr/sbin/atd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:36:09.927

这是一种方法：

```
let i=0
while read line; do
  read user pid _ _ _ _ time command <<<"$line"
  if [ "$user" != UID ]; then # skip header line
    printf "%s\n" $((++i)): "$user" "$pid" "$time" "$command" ""
  fi
done < <(ps -ef) 
```

您也可以首先使用 将该行直接读入字段数组`read -a`，但随后该命令以多个元素的形式出现，将其组合回一个单词需要更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:34:27.363

使用以下 shell 片段

```
OIFS=$IFS
IFS=$'\n'
i=0
for line in `ps -ef`; do
    echo "$i:"
    echo $line | cut -d' ' -f1
    echo $line | cut -d' ' -f2
    echo $line | cut -d' ' -f7
    echo $line | cut -d' ' -f8-
    (( i++ ))
done
IFS=$OIFS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:21:49.857

这是一种使用方法`awk`：

```
ps -ef | awk -v OFS="\n" '{ for (i=8;i<=NF;i++) line = (line ? line FS : "") $i; print NR ":", $1, $2, $7, line, ""; line = "" }' 
```

结果：

```
1:
root
3410
00:00:00
gpm -m /dev/input/mice -t exps2

2:
root
3424
00:00:00
crond

3:
root
3488
00:00:00
/usr/sbin/atd 
```

# android - 如何创建具有配置活动的应用小部件，并首次对其进行更新？

> ID：13694186
> 
> 赞同：22
> 
> 时间：2012-12-04T00:24:58.470
> 
> 标签：android, collections, android-appwidget

这真让我抓狂。即使有推荐的做法，我也不知道如何从配置活动中更新应用小部件。为什么在创建应用程序小部件时不调用更新方法超出了我的理解。

我想要的：一个包含项目集合（带有列表视图）的应用程序小部件。但是用户需要选择一些东西，所以我需要一个配置活动。

配置活动是`ListActivity`：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class ChecksWidgetConfigureActivity extends SherlockListActivity {
    private List<Long> mRowIDs;
    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    private BaseAdapter mAdapter;

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setResult(RESULT_CANCELED);
        setContentView(R.layout.checks_widget_configure);

        final Intent intent = getIntent();
        final Bundle extras = intent.getExtras();
        if (extras != null) {
            mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        }

        // If they gave us an intent without the widget id, just bail.
        if (mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
            finish();
        }

        mRowIDs = new ArrayList<Long>(); // it's actually loaded from an ASyncTask, don't worry about that — it works.
        mAdapter = new MyListAdapter((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE));
        getListView().setAdapter(mAdapter);
    }

    private class MyListAdapter extends BaseAdapter {
        // not relevant...
    }

    @Override
    protected void onListItemClick(final ListView l, final View v, final int position, final long id) {
        if (position < mRowIDs.size()) {
            // Set widget result
            final Intent resultValue = new Intent();
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
            resultValue.putExtra("rowId", mRowIDs.get(position));
            setResult(RESULT_OK, resultValue);

            // Request widget update
            final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
            ChecksWidgetProvider.updateAppWidget(this, appWidgetManager, mAppWidgetId, mRowIDs);
        }

        finish();
    }
} 
```

如您所见，我正在从我的应用小部件提供程序调用静态方法。我从[官方文档](http://web.archive.org/web/20100814165740/http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/appwidget/ExampleAppWidgetProvider.html)中得到了这个想法。

让我们看看我的提供者：

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public class ChecksWidgetProvider extends AppWidgetProvider {
    public static final String TOAST_ACTION = "com.example.android.stackwidget.TOAST_ACTION";
    public static final String EXTRA_ITEM = "com.example.android.stackwidget.EXTRA_ITEM";

    @Override
    public void onUpdate(final Context context, final AppWidgetManager appWidgetManager, final int[] appWidgetIds) {
        super.onUpdate(context, appWidgetManager, appWidgetIds);
        final int N = appWidgetIds.length;

        // Perform this loop procedure for each App Widget that belongs to this provider
        for (int i = 0; i < N; i++) {
            // Here we setup the intent which points to the StackViewService which will
            // provide the views for this collection.
            final Intent intent = new Intent(context, ChecksWidgetService.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
            // When intents are compared, the extras are ignored, so we need to embed the extras
            // into the data so that the extras will not be ignored.
            intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
            final RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.checks_widget);
            rv.setRemoteAdapter(android.R.id.list, intent);

            // The empty view is displayed when the collection has no items. It should be a sibling
            // of the collection view.
            rv.setEmptyView(android.R.id.list, android.R.id.empty);

            // Here we setup the a pending intent template. Individuals items of a collection
            // cannot setup their own pending intents, instead, the collection as a whole can
            // setup a pending intent template, and the individual items can set a fillInIntent
            // to create unique before on an item to item basis.
            final Intent toastIntent = new Intent(context, ChecksWidgetProvider.class);
            toastIntent.setAction(ChecksWidgetProvider.TOAST_ACTION);
            toastIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
            toastIntent.setData(Uri.parse(toastIntent.toUri(Intent.URI_INTENT_SCHEME)));
            final PendingIntent toastPendingIntent = PendingIntent.getBroadcast(context, 0, toastIntent, PendingIntent.FLAG_UPDATE_CURRENT);
            rv.setPendingIntentTemplate(android.R.id.list, toastPendingIntent);

            appWidgetManager.updateAppWidget(appWidgetIds[i], rv);
        }
    }

    @Override
    public void onReceive(final Context context, final Intent intent) {
        final AppWidgetManager mgr = AppWidgetManager.getInstance(context);
        if (intent.getAction().equals(TOAST_ACTION)) {
            final int appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
            final long rowId = intent.getLongExtra("rowId", 0);
            final int viewIndex = intent.getIntExtra(EXTRA_ITEM, 0);
            Toast.makeText(context, "Touched view " + viewIndex + " (rowId: " + rowId + ")", Toast.LENGTH_SHORT).show();
        }
        super.onReceive(context, intent);
    }

    @Override
    public void onAppWidgetOptionsChanged(final Context context, final AppWidgetManager appWidgetManager, final int appWidgetId, final Bundle newOptions) {
        updateAppWidget(context, appWidgetManager, appWidgetId, newOptions.getLong("rowId"));
    }

    public static void updateAppWidget(final Context context, final AppWidgetManager appWidgetManager, final int appWidgetId, final long rowId) {
        final RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.checks_widget);
        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

这基本上是官方文档的复制/粘贴。我们可以在这里看到我的静态方法。让我们假设它现在实际上使用了`rowId`。

当我收到选项更改广播 () 时，我们还可以看到另一个失败的（见下文）尝试更新应用程序小部件`onAppWidgetOptionsChanged`。

`Service`基于集合的应用小部件所需的几乎是文档的精确复制/粘贴：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class ChecksWidgetService extends RemoteViewsService {
    @Override
    public RemoteViewsFactory onGetViewFactory(final Intent intent) {
        return new StackRemoteViewsFactory(this.getApplicationContext(), intent);
    }
}

class StackRemoteViewsFactory implements RemoteViewsService.RemoteViewsFactory {
    private static final int mCount = 10;
    private final List<WidgetItem> mWidgetItems = new ArrayList<WidgetItem>();
    private final Context mContext;
    private final int mAppWidgetId;
    private final long mRowId;

    public StackRemoteViewsFactory(final Context context, final Intent intent) {
        mContext = context;
        mAppWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        mRowId = intent.getLongExtra("rowId", 0);
    }

    @Override
    public void onCreate() {
        // In onCreate() you setup any connections / cursors to your data source. Heavy lifting,
        // for example downloading or creating content etc, should be deferred to onDataSetChanged()
        // or getViewAt(). Taking more than 20 seconds in this call will result in an ANR.
        for (int i = 0; i < mCount; i++) {
            mWidgetItems.add(new WidgetItem(i + " (rowId: " + mRowId + ") !"));
        }

        // We sleep for 3 seconds here to show how the empty view appears in the interim.
        // The empty view is set in the StackWidgetProvider and should be a sibling of the
        // collection view.
        try {
            Thread.sleep(3000);
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onDestroy() {
        // In onDestroy() you should tear down anything that was setup for your data source,
        // eg. cursors, connections, etc.
        mWidgetItems.clear();
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public RemoteViews getViewAt(final int position) {
        // position will always range from 0 to getCount() - 1.

        // We construct a remote views item based on our widget item xml file, and set the
        // text based on the position.
        final RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.widget_item);
        rv.setTextViewText(R.id.widget_item, mWidgetItems.get(position).text);

        // Next, we set a fill-intent which will be used to fill-in the pending intent template
        // which is set on the collection view in StackWidgetProvider.
        final Bundle extras = new Bundle();
        extras.putInt(ChecksWidgetProvider.EXTRA_ITEM, position);
        final Intent fillInIntent = new Intent();
        fillInIntent.putExtras(extras);
        rv.setOnClickFillInIntent(R.id.widget_item, fillInIntent);

        // You can do heaving lifting in here, synchronously. For example, if you need to
        // process an image, fetch something from the network, etc., it is ok to do it here,
        // synchronously. A loading view will show up in lieu of the actual contents in the
        // interim.
        try {
            L.d("Loading view " + position);
            Thread.sleep(500);
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }

        // Return the remote views object.
        return rv;
    }

    @Override
    public RemoteViews getLoadingView() {
        // You can create a custom loading view (for instance when getViewAt() is slow.) If you
        // return null here, you will get the default loading view.
        return null;
    }

    @Override
    public int getViewTypeCount() {
        return 1;
    }

    @Override
    public long getItemId(final int position) {
        return position;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public void onDataSetChanged() {
        // This is triggered when you call AppWidgetManager notifyAppWidgetViewDataChanged
        // on the collection view corresponding to this factory. You can do heaving lifting in
        // here, synchronously. For example, if you need to process an image, fetch something
        // from the network, etc., it is ok to do it here, synchronously. The widget will remain
        // in its current state while work is being done here, so you don't need to worry about
        // locking up the widget.
    }
} 
```

最后，我的小部件布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widgetLayout"
    android:orientation="vertical"
    android:padding="@dimen/widget_margin"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/resizeable_widget_title"
        style="@style/show_subTitle"
        android:padding="2dp"
        android:paddingLeft="5dp"
        android:textColor="#FFFFFFFF"
        android:background="@drawable/background_pink_striked_transparent"
        android:text="@string/show_title_key_dates" />

    <ListView
        android:id="@android:id/list"
        android:layout_marginRight="5dp"
        android:layout_marginLeft="5dp"
        android:background="@color/timeline_month_dark"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:text="@string/empty_view_text"
        android:textSize="20sp" />

</LinearLayout> 
```

我的 android manifest XML 文件的相关部分：

```
<receiver android:name="com.my.full.pkg.ChecksWidgetProvider">
    <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/checks_widget_info" />
</receiver>
<activity android:name="com.my.full.pkg.ChecksWidgetConfigureActivity">
    <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
    </intent-filter>
</activity>
<service
    android:name="com.my.full.pkg.ChecksWidgetService"
    android:permission="android.permission.BIND_REMOTEVIEWS" /> 
```

`xml/checks_widget_info.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="146dp"
    android:minHeight="146dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/checks_widget"
    android:configure="com.my.full.pkg.ChecksWidgetConfigureActivity"
    android:resizeMode="horizontal|vertical"
    android:previewImage="@drawable/resizeable_widget_preview" /> 
```

* * *

那么，怎么了？好吧，当我创建小部件时，它是空的。我的意思是空虚。空的。没有什么。我的布局中没有定义空视图！我勒个去？

如果我重新安装应用程序或重新启动设备（或终止启动器应用程序），应用程序小部件实际上已更新并包含自动添加的 10 个项目，如示例中所示。

配置活动完成后，我无法更新该死的东西。从文档中摘录的这句话超出了我的理解：“*创建 App Widget 时不会调用 onUpdate() 方法 [...] — 它只是第一次被跳过。* ”。

我的问题是：

*   ~~为什么 Android 开发团队在第一次创建小部件时选择不调用 update 呢？~~
*   如何在配置活动完成之前更新我的应用小部件？

我不明白的另一件事是动作流程：

1.  使用最后编译的代码安装应用程序，在启动器上准备空间，从启动器打开“小部件”菜单
2.  选择我的小部件并将其放置到所需区域
3.  在那一刻，我的应用小部件提供商收到`android.appwidget.action.APPWIDGET_ENABLED`然后`android.appwidget.action.APPWIDGET_UPDATE`
4.  然后我的应用小部件提供程序`onUpdate`调用它的方法。***我预计这会在配置活动完成后发生......***
5.  我的配置活动开始了。但是应用程序小部件似乎已经创建和更新，我不明白。
6.  我从我的配置活动中选择项目：`onListItemClick`被调用
7.  我的提供者的静态`updateAppWidget`被调用，拼命地试图更新小部件。
8.  配置活动设置其结果并完成。
9.  提供者接收`android.appwidget.action.APPWIDGET_UPDATE_OPTIONS`：嗯，在创建时接收大小更新确实很有意义。那是我拼命呼唤的地方`updateAppWidget`
10.  ***`onUpdate`从我的提供者没有被调用。为什么？？！！***

最后：小部件是空的。不是 listview-empty 或 @android:id/empty-empty，真的是***EMPTY***。没有显示视图。没有什么。
如果我再次安装该应用程序，应用程序小部件将按预期填充列表视图内的视图。
调整小部件的大小没有效果。它只是再次调用`onAppWidgetOptionsChanged`，没有任何效果。

我的意思是空的：应用程序小部件布局已膨胀，但列表视图未膨胀，并且空视图未显示。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-20T22:53:17.663

通过 AppWidgetManager 进行更新的缺点是您必须提供 RemoteViews - 从设计的角度来看 - 没有意义，因为与 RemoteViews 相关的逻辑应该封装在 AppWidgetProvider 中（或者在您的情况下RemoteViewsService.RemoteViewsFactory）。

SciencyGuy 通过静态方法公开 RemoteViews 逻辑的方法是处理该问题的一种方法，但有一个更优雅的解决方案，将广播直接发送到小部件：

```
Intent intent = new Intent(AppWidgetManager.ACTION_APPWIDGET_UPDATE, null, this, ChecksWidgetProvider.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, new int[] {mAppWidgetId});
sendBroadcast(intent); 
```

因此，将调用 AppWidgetProvider 的 onUpdate() 方法来为小部件创建 RemoteViews。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-09T04:02:31.057

您是正确的，配置活动完成后不会触发 onUpdate 方法。初始更新取决于您的配置活动。所以你需要构建初始视图。

这是在配置结束时应该做什么的要点：

```
// First set result OK with appropriate widgetId
Intent resultValue = new Intent();
resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
setResult(RESULT_OK, resultValue);

// Build/Update widget
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(getApplicationContext());

// This is equivalent to your ChecksWidgetProvider.updateAppWidget()    
appWidgetManager.updateAppWidget(appWidgetId,
                                 ChecksWidgetProvider.buildRemoteViews(getApplicationContext(),
                                                                       appWidgetId));

// Updates the collection view, not necessary the first time
appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.notes_list);

// Destroy activity
finish(); 
```

您已经正确设置了结果。并且您调用 ChecksWidgetProvider.updateAppWidget()，但是 updateAppWidget() 不会返回正确的结果。

updateAppWidget() 当前返回一个空的 RemoteViews 对象。这就解释了为什么你的小部件一开始是完全空的。你没有用任何东西填充视图。我建议您将代码从 onUpdate 移动到静态 buildRemoteViews() 方法，您可以从 onUpdate 和 updateAppWidget() 调用该方法：

```
public static RemoteViews buildRemoteViews(final Context context, final int appWidgetId) {
        final RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.checks_widget);
        rv.setRemoteAdapter(android.R.id.list, intent);

        // The empty view is displayed when the collection has no items. It should be a sibling
        // of the collection view.
        rv.setEmptyView(android.R.id.list, android.R.id.empty);

        // Here we setup the a pending intent template. Individuals items of a collection
        // cannot setup their own pending intents, instead, the collection as a whole can
        // setup a pending intent template, and the individual items can set a fillInIntent
        // to create unique before on an item to item basis.
        final Intent toastIntent = new Intent(context, ChecksWidgetProvider.class);
        toastIntent.setAction(ChecksWidgetProvider.TOAST_ACTION);
        toastIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        toastIntent.setData(Uri.parse(toastIntent.toUri(Intent.URI_INTENT_SCHEME)));
        final PendingIntent toastPendingIntent = PendingIntent.getBroadcast(context, 0, toastIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        rv.setPendingIntentTemplate(android.R.id.list, toastPendingIntent);

        return rv;
}

public static void updateAppWidget(final Context context, final AppWidgetManager appWidgetManager, final int appWidgetId) {
    final RemoteViews views = buildRemoteViews(context, appWidgetId);
    appWidgetManager.updateAppWidget(appWidgetId, views);
}

@Override
public void onUpdate(final Context context, final AppWidgetManager appWidgetManager, final int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    // Perform this loop procedure for each App Widget that belongs to this provider
    for (int appWidgetId: appWidgetIds) {
        RemoteViews rv = buildRemoteViews(context, appWidgetId);
        appWidgetManager.updateAppWidget(appWidgetIds[i], rv);
    }
} 
```

那应该处理小部件初始化。

在我的示例代码中调用 finish() 之前的最后一步是更新集合视图。正如评论所说，这不是第一次。但是，我包含它以防万一您打算允许在添加小部件后对其进行重新配置。在这种情况下，必须手动更新集合视图以确保加载适当的视图和数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:42:49.443

我没有看到您的 appwidgetprovider.xml 和 AndroidManifest.xml，但我的猜测是您没有正确设置配置活动。

这是如何做到的：

1.  将以下属性添加到您的 appwidgetprovider.xml：

    ```
    <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
        ...
        android:configure="com.full.package.name.ChecksWidgetConfigureActivity" 
        ... /> 
    ```

2.  您的配置活动应该有一个适当的`intent-filter`：

    ```
    <activity android:name=".ChecksWidgetConfigureActivity">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
        </intent-filter>
    </activity> 
    ```

如果配置活动配置正确，`onUpdate()`则仅在完成后触发。

# asp.net-mvc - 在 MVC4 和 C# 中使用括号？

> ID：13694190
> 
> 赞同：1
> 
> 时间：2012-12-04T00:25:36.223
> 
> 标签：asp.net-mvc, c#-4.0

如果你们认为这是一个愚蠢的问题，我很抱歉。我准备好接受任何批评，因为我认为我的无能。我是 C# 的新手，我一生都找不到任何关于此的参考资料。这个“[Authorize]”对代码中的类做了什么？我知道 AccountController 是从 Controller 继承的。我只是不明白 Authorize 在括号中是做什么的。我假设它也从 System.Web.Mvc.AuthorizeAttribute 继承代码，但不确定，因为当放置在类或方法之前时，我找不到括号在 C# 中的含义。所以说清楚我的问题，我在问，在类或函数之前将任何内容放在括号中的目的是什么？是不是继承了什么？如果是这样，为什么不像继承控制器那样使用冒号呢？如果有人可以发送链接参考也很好..任何帮助表示赞赏..

```
[Authorize]
public class AccountController : Controller
{ 
```

我注意到下面这种方法的用法相同。它正在使用 [AllowAnonymous] 代替..

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T00:29:14.587

括号中的内容，例如 [Authorize] 称为属性。它们是可以应用于类、方法和属性的元数据（取决于您所谈论的属性）。

[http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)

与您的代码交互的代码可以使用反射来查看已应用哪些属性，以及哪些参数（如果有）与每个属性相关联。

在你提到的具体例子中，

```
[Authorize] 
```

MVC 运行时检查属性以帮助控制对控制器的访问

[http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute(v=vs.108).aspx)

和

```
[AllowAnonymous] 
```

属性指定控制器的特定登录方法不需要授权。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.allowanonymousattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowanonymousattribute(v=vs.108).aspx)

# node.js - 如何让 Helenus 返回 CQL 查询的实际值？

> ID：13694198
> 
> 赞同：1
> 
> 时间：2012-12-04T00:26:28.567
> 
> 标签：node.js, cassandra, cql, helenus

我正在使用带有 Helenus 的 Node.js 连接到 Cassandra DB。

我有一个查询： SELECT score FROM team_scores WHERE team_name = 'foo'

从 cqlsh 运行时，我得到如下所示的结果：

```
score
-------
10 
```

然后，我使用 cqlVersion 3.0.0 将查询移至 Node 和 Helenus。当我运行此代码时：

```
pool.cql("SELECT score FROM team_scores WHERE team_name = 'foo'", function(err, results){
    console.log(results);
  }); 
```

控制台报告：

```
[ <Row: Key: 'foo', ColumnCount: 1, Columns: [ 'score' ]> ] 
```

为了让 Helenus 向我返回 score 的实际值而不是它似乎返回的任何值，我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:46:09.663

results 实际上是一个行对象列表。您可能会看到 toString 实现的结果。

这是一些很好的代码来注销选择的结果：

```
results.forEach(function(row){
  //all row of result
  row.forEach(function(name,value,ts,ttl){
    //all column of row
    console.log(name,value,ts,ttl);
  });

}); 
```

您可以在[helenus github](https://github.com/simplereach/helenus)上阅读更多内容。请参阅底部关于行对象的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:10:57.830

```
results.forEach(function(row){
  var score = row.get('score').value;
  console.log(score); //will give you 10
}); 
```

# php - PHP/curl/file_get_contents。获取远程文件时的安全性和文件大小和类型验证

> ID：13694199
> 
> 赞同：4
> 
> 时间：2012-12-04T00:26:29.127
> 
> 标签：php, security, curl, file-get-contents

我想让用户从远程 url 复制或下载图像或从他们的计算机上传文件（可能包括 pdf 和 txt 文件等）。为此，我尝试了我的主机支持的 ​​file_get_contents 和 curl。对于本地上传，我只是使用 php。他们完成传输数据的基本工作。但是，我正在尝试找到验证文件内容的最佳方法，以避免传播恶意代码或用过大的文件加载我的服务器。

在许多情况下，文件将动态生成，因此不会以已知扩展名结尾，因此除了缺乏安全性之外，检查文件扩展名不是一种选择。

使用标题中的 mime 类型是一种选择，我有代码可以做到这一点。

```
$file_info = new finfo(FILEINFO_MIME);  // object oriented approach!
$mime_type = $file_info->buffer(file_get_contents($file));  // e.g. gives "image/jpeg"

switch($mime_type) {
    case "image/jpeg":
        // your actions go here...
} 
```

但是，欺骗 mime 类型显然并不难。

一些帖子建议在文件开头嗅出神奇的数字，但这些也可以被欺骗。

对于图像的有限情况，可以使用

```
$imginfo_array = getimagesize($tempFile); 
```

据我所知，这不适用于 pdf、文档等。

即使将这些方法放在一起似乎也不是很健壮。然而，许多网站通常允许您上传、固定或以其他方式获取远程文件，并以某种方式管理安全问题。

希望获得有关最佳安全性和验证实践的建议——例如 curl、file_get_contents 和 wd——以及在传输到我的服务器之前获取文件大小和文件类型的其他库或其他技术。

注意：我希望允许传输 .jpg 和 .gif 等主流图像格式以及上传 pdf 文件、doc 和 docx 文件、xls 文件以及类似的常见格式。

提前感谢您的建议和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-28T18:11:35.260

> 但是，我正在尝试找到验证文件内容的最佳方法，以避免传播恶意代码

[文件上传](https://paragonie.com/blog/2017/12/2018-guide-building-secure-php-software#secure-php-files)是我想在 PHP 生态系统中消除的攻击面之一。无论您是使用 cURL 下载文件还是允许用户从 Web 表单提交文件，解决方案都没有太大变化。

解决远程代码执行问题：将文件上传到 Web 根目录之外的不可公开访问的文件夹，然后使用代理脚本（提示：`readfile()`或`file_get_contents()`）提供它们，而不是允许直接访问。

那么即使有恶意代码，Apache/nginx 也不会想去执行它。

> ...或用过大的文件加载我的服务器

如果您使用 cURL，[这很容易做到](https://stackoverflow.com/a/17642638/2224584)。

# excel - VBA 中的日期操作

> ID：13694200
> 
> 赞同：0
> 
> 时间：2012-12-04T00:26:40.393
> 
> 标签：excel, vba, date

> **可能重复：**
> [无法在 VBA、Excel 2012 中正确格式化日期](https://stackoverflow.com/questions/11295495/cant-format-the-date-properly-in-vba-excel-2012)

我遇到了一些日期问题（主要是类型不匹配）。我想做的是让他们获得系统时间，然后以 YYYMMDD 格式减去 3 天。例如，20121204 应该返回 20121203。20121203 应该返回 20121130。目前，我可以通过以下方式获取日期：

```
Sub dateComp()
Dim todaysDate As String
todaysDate = Format(Date, "yyyymmdd")
Debug.Print (todaysDate)
End Sub 
```

我试过使用 DateAdd 并且它不起作用。DateAdd(d, -3, todaysDate)

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:56:25.387

```
Debug.Print Format(DateAdd("d", -3, Date), "yyyymmdd") 
```

# java - 查明 Graph 是否是同构 Java

> ID：13694201
> 
> 赞同：2
> 
> 时间：2012-12-04T00:26:42.547
> 
> 标签：java

我需要通过生成所有排列来检查图是否同构。我正在使用这个排列类，现在我需要创建一个图形类，将图形表示为 2D 布尔数组。一个例子是用户输入 2 个图表作为字符串

`Ex."0-1 0-2 1-2 1-3 2-3" and "1-3 2-0 0-3 1-2 1-0"`

现在在我的 constrcutor 中，我必须将其分解并将其放入 2D 布尔数组中。我该怎么做呢？

用户还可以输入更复杂的内容，例如“0-1 1-2 2-3 3-0 0-4 0-11 1-5 1-6 2-7 2-8 3-9 3-10 4-5 6-7 8-9 10-11 4-7 4-8 5-9 5-10 6-9 6-10 7-11 8-11”和“0-1 1-2 2-3 3-0 0- 4 0-7 1-4 1-5 2-5 2-6 3-6 3-7 4-8 4-9 5-9 5-10 6-10 6-11 7-8 7-11 8-9 9 -10 10-11 11-8"

```
public class PermutationGenerator
{
    // private data

    private int[] perm;
    private boolean first;

    // constructor

    public PermutationGenerator (int n)
    {
        perm = new int [n];
        first = true;
    }

    public int[] next ()
    {
        int n = perm.length;

        // starting permutation: 0 1 2 3 ... n-1

        if (first)
        {
            first = false;
            for (int i = 0 ; i < n ; i++)
                perm [i] = i;
            return perm;
        }

        // construct the next permutation
        // find largest k so that perm[k] < perm[k+1]; if none, finish

        int i, j, k, l;

        for (k = n - 2 ; k >= 0 && perm [k] >= perm [k + 1] ; k--)
            ;
        if (k < 0)
            return null; // no more

        // find largest l so that perm[k] < perm[l]

        for (l = n - 1 ; l >= 0 && perm [k] >= perm [l] ; l--)
            ;

        // swap perm[k] and perm[l]

        swap (perm, k, l);

        // reverse perm[k+1]...perm[n-1]

        for (i = k + 1, j = n - 1 ; i < j ; i++, j--)
            swap (perm, i, j);

        return perm;
    }

    // swap a[i] and a[j]

    private static void swap (int a[], int i, int j)
    {
        int temp = a [i];
        a [i] = a [j];
        a [j] = temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:31:47.417

You have to create a matrix to represent your graph, as shown in this picture:

![enter image description here](../Images/83d289fa6328e91f58c081ac06761e20.png)

You can start by prompting the user for two nodes that are connected, *e.g.,* 1 and 2\. Then you would do

```
matrix[1][2] = true; 
```

if you are taking into account the direction, which means that `1 - 2` is different than `2 - 1`. Otherwise (a graph non-oriented), you would do

```
matrix[1][2] = true;
matrix[2][1] = true; 
```

Do not forget to initialize the matrix with `false`, meaning (vertices not connected). Every time you want to check if vertices `X` and `Y` are directly connected you just have to access the position `(X,Y)` of the matrix and check if it is true.

If your graph is a weighted one, you need to have an additional matrix to hold the weights. Another solution is to have just one matrix of integers where `-1` means not connected, and `N > 0`, means that a given `X` and `Y` are connected with a weight `N`.

About the user input:

"0-1 1-2 2-3 3-0 0-4 0-11 1-5 1-6 2-7 2-8 3-9 3-10 4-5 6-7 8-9 10-11 4-7 4-8 5-9 5-10 6-9 6-10 7-11 8-11"

among others, you can use the [Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html) class:

```
String input;
Scanner in = new Scanner(System.in);

// Reads a single line from the console 
// and stores into name variable
input = in.nextLine(); 
```

Afterwards, you have to parser your input; let us assume a fixed format that will hold the graph vertices, for example:

```
 String input =  "0-1 0-2 1-2 1-3 2-3";
  int x,y;

  for(int i = 0; i < input.length(); i+=4)
  {
       x = Character.getNumericValue(input.charAt(i));   // first vertex 
       y = Character.getNumericValue(input.charAt(i+2)); // second vertice 
       matrix_graph[x][y] = true;
       matrix_graph[y][x] = true; // if the graph is not oriented.
  } 
```

# openid - 由于编码句柄的反序列化失败而拒绝关联。DotNetOpenAuth

> ID：13694205
> 
> 赞同：2
> 
> 时间：2012-12-04T00:27:25.730
> 
> 标签：openid, dotnetopenauth

我正在研究 DotNetOpenAuth 示例，并实现一个 openID 提供程序和依赖方。

本质上，它与提供的 DotNetOpenAuth 示例非常相似，只是我使用的是 MVC 4，因此使用的是 Razor，因此没有使用示例中使用的*IdentityEndpoint*控件。（我改为在部分视图中写出提供程序标头）。也托管在 IIS 7.5 中。

我到了用户登录的地步，并且 OP 正在从日志中重定向回依赖方，该依赖方出现以下错误：

> DotNetOpenAuth.Messaging.ProtocolException： DotNetOpenAuth.Messaging.ErrorUtilities.VerifyProtocol(Boolean condition, String unformattedMessage, Object[] args)
> 在 DotNetOpenAuth.Messaging 中缺少存储桶“https://localhost/dnoa/association_handles”句柄“3tg1”的解密密钥.DataBagFormatterBase`1.CalculateSignature(Byte[] bytesToSign, String symmetricSecretHandle)
> a....

我不确定它是否有帮助，但错误之前的两个标题是：

```
Signing these message parts:    
claimed_id: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd   
identity: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd   
assoc_handle: he9m!IAAAAD43Voo3-zQng-ZVSKb9ryFVSIKDLJj4Ph_I9W64ypFCQQAAAAFlZWUQzOJQfO70Pvud2a--auCE7HKkFjBM45HXlpJixLEmtdgd8YPBMckvUFnIPqHBbaAk7mkhI8lDVPoKekUW   
op_endpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   
return_to: http://www.samplemobilephonecompany.com/User/Authenticate?ReturnUrl=Index&dnoa.userSuppliedIdentifier=http%3A%2F%2Fwww.sampleOpenIDProvider.com   
response_nonce: 2012-12-03T23:59:05ZCqMBPIFL    
Base64 representation of signed data: Y2xhaW1lZF9pZDpodHRwOi8vd3d3LnNvbGZ5cmUtaWQuY29tL3VzZXIvcmFscGhza2kKaWRlbnRpdHk6aHR0cDovL3d3dy5zb2xmeXJlLWlkLmNvbS91c2VyL3JhbHBoc2tpCmFzc29jX2hhbmRsZTpoZTltIUlBQUFBRDQzVm9vMy16UW5nLVpWU0tiOXJ5RlZTSUtETEpqNFBoX0k5VzY0eXBGQ1FRQUFBQUZsWldVUXpPSlFmTzcwUHZ1ZDJhLS1hdUNFN0hLa0ZqQk00NUhYbHBKaXhMRW10ZGdkOFlQQk1ja3ZVRm5JUHFIQmJhQWs3bWtoSThsRFZQb0tla1VXCm9wX2VuZHBvaW50Omh0dHA6Ly93d3cuc29sZnlyZS1pZC5jb20vT3BlbklkL1Byb3ZpZGVyCnJldHVybl90bzpodHRwOi8vd3d3LnNhbXBsZW1vYmlsZXBob25lY29tcGFueS5jb20vVXNlci9BdXRoZW50aWNhdGU/UmV0dXJuVXJsPUluZGV4JmRub2EudXNlclN1cHBsaWVkSWRlbnRpZmllcj1odHRwJTNBJTJGJTJGd3d3LnNvbGZ5cmUtaWQuY29tCnJlc3BvbnNlX25vbmNlOjIwMTItMTItMDNUMjM6NTk6MDVaQ3FNQlBJRkwK  
Signature: kw4f92CpwFbXgUkLs+Pf+5cFrtEzmE9KpxHgTYwi1tQ= 
```

和

```
After binding element processing, the received IndirectSignedResponse (2.0) message is:    
openid.sig: kw4f92CpwFbXgUkLs+Pf+5cFrtEzmE9KpxHgTYwi1tQ=   
openid.signed: claimed_id,identity,assoc_handle,op_endpoint,return_to,response_nonce   
openid.assoc_handle: he9m!IAAAAD43Voo3-zQng-ZVSKb9ryFVSIKDLJj4Ph_I9W64ypFCQQAAAAFlZWUQzOJQfO70Pvud2a--auCE7HKkFjBM45HXlpJixLEmtdgd8YPBMckvUFnIPqHBbaAk7mkhI8lDVPoKekUW   
openid.invalidate_handle: 3tg1!IAAAALLyXKaShsmSDmEaKWxiBCi7-a8Nso0tyNaPKVqi52KuQQAAAAHvnjGT2Gt-_iWlSTpmBgthNS8s2Dxs6-pQG6rzYrFqgA5mp_T_HPcaJ6BchUsN9Lx2uH7jssuSAq0xbae7lb1r   
openid.op_endpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   
openid.return_to: http://www.samplemobilephonecompany.com/User/Authenticate?ReturnUrl=Index&dnoa.userSuppliedIdentifier=http%3A%2F%2Fwww.sampleOpenIDProvider.com   
openid.response_nonce: 2012-12-03T23:59:05ZCqMBPIFL   
openid.mode: id_res   
openid.ns: http://specs.openid.net/auth/2.0   
openid.claimed_id: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd   
openid.identity: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd   
ReturnUrl: Index   dnoa.userSuppliedIdentifier: http://www.sampleOpenIDProvider.com 
```

我想这对那些已经实施 dotnetopenauth 的人来说只意味着什么，但值得一试！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:30:25.990

在通过谷歌群组搜索时意外修复了它，并阅读了另一个问题，其中曾经有帮助的 Andrew Arnott 建议检查所有 openID 端点是否可以在未经授权的情况下访问。

所以我检查了我的代码，我的 RegisterGlobalFilters 中有以下语句：

```
filters.Add(new System.Web.Mvc.AuthorizeAttribute()); 
```

我在用于 openID 的所有控制器或操作上将其与**[AllowAnonymous]属性一起使用。**或者我认为，因为删除全局过滤器，然后仅将**[Authorize]**属性显式添加到需要授权的区域解决了问题。

# php - 网站的 PHP 搜索脚本

> ID：13694206
> 
> 赞同：0
> 
> 时间：2012-12-04T00:27:58.707
> 
> 标签：php, mysql, sql, forms

好的，所以我正在尝试为我的网站编写一个小的 PHP 搜索脚本，以便用户可以简单地从艺术家姓名、歌曲名称或城市进行搜索。我的数据库中的表有“城市”、“艺术家”和“城市”。

这是我的表格：

```
<div id="search">  
<form name="search" method="post" action="../searchDb.php">  
<input type="text" name="find" placeholder="What are we searching for ?"/> in   
<Select NAME="field">  
<Option VALUE="artist">Artist</option>  
<Option VALUE="song">Song</option>  
<Option VALUE="city">City</option>  
</Select>  
<input type="hidden" name="searching" value="yes" />  
<input type="submit" name="search" value="Search" />  
</form>  
</div> 
```

如您所见，共有三个 OPTION 值（表中的每一列一个）。这是我的PHP代码：

```
<?php  
$searching = "searching";  
$find = "find";  
$field = "field";  
 //this is to make sure the user entered content  
if ($searching =="yes")   
{   
   echo "<p><h2>Results</h2></p>";   

   //if user did not enter anything in the search box, give error   
   if ($find == "")   
   {   
      echo "<p>You forgot to enter a search term</p>";   
   }   

   include 'connect.php';   

   // strip whitespace, non case sensitive  
   $find = strtoupper($find);   
   $find = strip_tags($find);   
   $find = trim ($find);   

   //perform search in specified field  
   $data = mysql_query("SELECT * FROM artists_table WHERE upper($field) LIKE'%$find%'");   

   //show results   
   while($result = mysql_fetch_array( $data ))   
   {   
      echo $result['artist'];     
      echo " ";   
      echo $result['song'];    
      echo "<br>";    
      echo $result['city'];    
      echo "<br>";    
      echo "<br>";   
   }   

   //counts results. ifnone. error    
  $anymatches=mysql_num_rows($data);    
   if ($anymatches == 0)    
   {    
      echo "Sorry, but we can not find an entry to match your query<br><br>";    
   }    

   //show user what he searched.   
   echo "<b>Searched For:</b> " .$find;     
 }     
 ?> 
```

我的connect.php（包括在内）完美运行（我在另一个页面上有相同的文件，没有问题..所以可以肯定地说那不是问题）。

当我进行测试并运行搜索时，它会加载我的 searchDb.php 但没有显示任何内容。只是一个白页...

任何帮助将不胜感激。我不知道为什么或什么不工作......谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:34:54.453

如果这是您的代码，那么您正在硬编码`$searching = "searching"`，但`if`您正在检查 if `$searching =="yes"`，因此不会显示任何代码。

```
<?php  
$searching = "searching";  
...
...  
//this is to make sure the user entered content  
if ($searching =="yes")   
{   
...
} 
```

编辑-

我的猜测是你想做一些类似的事情——

```
$searching = mysql_real_escape_string($_POST['searching']); // sanitized just to be consistant.  
$find = mysql_real_escape_string($_POST['find']);  
$field = mysql_real_escape_string($_POST['field']); 
```

注意——你不应该用[`mysql_*`](http://us2.php.net/manual/en/function.mysql-query.php)函数编写新代码。你应该学习`mysqli_`或者`PDO`- [http://php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)

这里有两种方法可以避免“注意：未定义的变量”

检查`submit`按钮是否被按下

```
if (isset($_POST['search'])) {
$searching = mysql_real_escape_string($_POST['searching']); // sanitized just to be consistant.  
$find = mysql_real_escape_string($_POST['find']);  
$field = mysql_real_escape_string($_POST['field']);
} 
```

或者检查每个字段是否设置，并将其设置为值，如果没有设置为 no/empty

```
if (isset($_POST['search'])) {  // checks to see if the form submit button was pushed
$searching = isset($_POST['search']) ? mysql_real_escape_string($_POST['searching']) : 'no'; // sanitized just to be consistant.  
$find = isset($_POST['find']) ? mysql_real_escape_string($_POST['find']) : '';  
$field = isset($_POST['field']) ? mysql_real_escape_string($_POST['field']) : '';
} 
```

# java - 32 位 JDK 上的最大内存分配

> ID：13694207
> 
> 赞同：0
> 
> 时间：2012-12-04T00:28:02.093
> 
> 标签：java, memory, jboss

我在 jboss webapp 上出现内存错误，并调整了内存设置，当特定设置上的值似乎大于 1024 时，我得到一个 java 运行时错误，无法分配内存。有谁知道我可以在下面在 32 位 jdk 上使用的最大值是多少？

设置“JAVA_OPTS=-Xms128M -Xmx512M -XX:MaxPermSize=256M”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:37:33.690

您可以在 32 位 JDK 上为堆分配超过 1GB 的空间（听起来这取决于 JVM 实现，但根据 Google 的说法，它大约为 1.5GB）。

您的服务器上可能没有足够的可用内存。释放一些内存并尝试一下。

# code-analysis - 将自定义代码分析规则迁移到 VS2012

> ID：13694208
> 
> 赞同：2
> 
> 时间：2012-12-04T00:28:10.127
> 
> 标签：code-analysis, fxcop, cci

我已经编写了几十个自定义代码分析规则。这些规则是针对 Visual Studio 2010 开发的。根据需要，程序集引用了 FxCopSdk、Microsoft.Cci 和 Microsoft.VisualStudio.CodeAnalysis 的 10.0 版。它们在 Visual Studio 2010 中正确运行并在 TFS 2010 中正确构建。

我想迁移到 Visual Studio 2012。但是，当我使用 VS 2012 在现有解决方案上运行自定义规则时，出现 CA0062 错误。根本原因是加载自定义规则程序集时出现 CA0053 错误。我知道这些对三个程序集的引用需要更新到 Visual Studio 2012 的版本 11。这可以使用配置文件中的版本重定向来完成。我可以通过重定向 Visual Studio 2012 IDE 和 FxCopCmd 二进制文件来使其在本地工作，但是在将代码检入 TFS 2010 时遇到了麻烦。

我们已经考虑了两种明显的解决方案，但都不是很可口。第一种是要求每个开发者在本地进行重定向，然后修改 TFS 构建代理也进行重定向。二是维护自定义代码分析规则的两个分支，一个针对版本 10（VS2010），另一个针对版本 11（VS2012）。

有没有更好的方法来做到这一点，还是我们需要同时升级到 TFS 2012 和 Visual Studio 2012？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:21:07.103

您可以尝试手动编辑项目文件并编写两个包含块（一个用于VS2010，一个用于VS2012），然后定义条件以使用正确的一个。您只需要以某种方式确定是否要在 msbuild 中为 VS2010 或 VS2012 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:04:19.927

在您的方法和 ZFE 提出的方法之间，您几乎拥有所有潜在的候选人。鉴于这些选择，我强烈建议进行分支，因为没有具有向后兼容性保证的 FxCop 官方 SDK。

如果幸运的话，您不会遇到任何影响规则的行为或 API 表面更改，并且两个分支之间的唯一区别将是引用，因此任何合并都将是微不足道的。但是，如果您以后需要分支，您现在在替代方法上所做的任何时间投资都将丢失，并且最终需要分支的可能性是不可忽略的。

# javascript - 我可以使用 javascript 延迟加载某些 div 吗？

> ID：13694209
> 
> 赞同：0
> 
> 时间：2012-12-04T00:28:11.437
> 
> 标签：javascript, html, css

假设我有一个包含 2 个 div 的页面。在第一个 div 中，我有一个视频。视频播放 30 秒剪辑后，我希望第二个 div 显示“关于视频”文本。我怎样才能做到这一点？

代码：

```
 <div class="clip"> (This is the first div)
 <video width="560" height="340" controls>
 <source src="media/clip.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
 <source src="media/clip.ogv" type='video/ogg; codecs="theora, vorbis"'>
 </video>
 </div>

 <div class="about_video"> (This is the second div)
 Clip by Person.  The clip is about sample..
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:33:46.547

像这样的东西应该工作：

**HTML**（ID 是你的朋友）：

```
 <div id="div1" class="clip"> (This is the first div)
     <video id="myVideo" width="560" height="340" controls>
         <source src="media/clip.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
         <source src="media/clip.ogv" type='video/ogg; codecs="theora, vorbis"'>
     </video>
 </div>

 <div id="div2" class="about_video"> (This is the second div)
     Clip by Person.  The clip is about sample..
 </div> 
```

**CSS**：

```
.about_video {
    display: 'none';
} 
```

**JS**：

```
document.getElementById('myVideo').addEventListener('ended', function(e) {
    document.getElementById('div2').style.display = 'block';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:33:08.917

我在这里有一个类似的演示：http: [//jsfiddle.net/frictionless/NNCRR/](http://jsfiddle.net/frictionless/NNCRR/)

顶部栏在延迟 5000 毫秒或 5 秒后出现

```
$(function() {

   $('.headerbar')       
    .delay(5000).slideDown();

});​ 
```

希望这可以帮助

更多检查[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# r - 缺少数据的时间序列的“loess”

> ID：13694212
> 
> 赞同：5
> 
> 时间：2012-12-04T00:28:25.353
> 
> 标签：r, loess

我在使用缺少数据的时间序列时遇到`loess`问题`loess.smooth`。

这两个命令都不适用于这个玩具数据。

```
x <- as.Date(c(1, 2, 4, 5, 6), origin="2010-1-1")
y <- c(4, 8, 8, 28, 11)

plot(x, y, ylim=c(1,30))

lines(loess(y ~ x), col="red")
lines(loess.smooth(y=y, x=x), col="blue") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:19:39.727

我最终使用了以下代码：

```
# Data

x.1 <- as.Date(c(1, 2, 4, 5, 6), origin="2010-1-1")
x.2 <- c(1, 2, 4, 5, 6)
y <- c(4, 8, 8, 28, 11)

# x.2 - x is numeric variable

plot(x.2, y, ylim=c(1,30))

lines(loess(y ~ x.2, span=1.01), col="black", lwd=2, lty=2)  # neccessary to change span default to avoid warnings (span = 0.75)
lines(loess.smooth(x.2, y, span=1.01), col = "orange", , lwd=2)  # neccessary to change span default to avoid warnings (span = 2/3)
lines(smooth.spline(x.2,y), col="blue", lwd=2) 

# x.1 - x is date variable

plot(x.1, y, ylim=c(1,30))
# loess() cannot deal with date variables, thus convert it to 
lines(loess(y~as.numeric(x.1), span=1.01), col="red", lwd=2)  # neccessary to change span default to avoid warnings (span = 0.75) 
lines(loess.smooth(x.1, y, span=1.01), col = "orange", lwd=2)   # neccessary to change span default to avoid warnings (span = 2/3)
lines(smooth.spline(x.1,y), col="blue", lwd=2) 
```

问题是：（1）`loess`无法处理日期变量。(2)`span`必须调整参数 (>1)。

# groovy - 如何使用 Geb/Spock 向 Sauce Labs 报告结果？

> ID：13694215
> 
> 赞同：3
> 
> 时间：2012-12-04T00:28:33.760
> 
> 标签：groovy, automation, spock, geb, saucelabs

我想使用 Sauce Labs Java REST API 将通过/失败状态发送回 Sauce Labs 仪表板。我正在使用 Geb+Spock，我的 Gradle 构建创建了一个测试结果目录，结果以 XML 格式输出。*我的问题是，在*Spock 规范的 cleanupSpec() 退出之前，似乎没有生成结果 XML 文件。这导致我的代码报告上一次测试运行的结果，而不是当前的。显然不是我想要的！

有什么方法可以在不依赖 XML 的情况下从 cleanupSpec() 中获取结果？或者一种让结果更早归档的方法？或者一些替代方案会比其中任何一个都好得多？

**一些代码：**

在`build.gradle`中，我指定`testResultsDir`. 这是在 Spock 规范退出后写入 XML 文件的地方：

```
drivers.each { driver ->
    task "${driver}Test"(type: Test) {
        cleanTest
        systemProperty "geb.env", driver    
        testResultsDir = file("$buildDir/test-results/${driver}")
        systemProperty "proj.test.resultsDir", testResultsDir
    }
} 
```

这是我的 LoginSpec 类中的`setupSpec()`and ：`cleanupSpec()`

```
class LoginSpec extends GebSpec {
    @Shared def SauceREST client = new SauceREST("redactedName", "redactedKey")
    @Shared def sauceJobID
    @Shared def allSpecsPass = true

    def setupSpec() {
        sauceJobID = driver.getSessionId().toString()
    }

    def cleanupSpec() {
        def String specResultsDir = System.getProperty("proj.test.resultsDir") ?: "./build/test-results"
        def String specResultsFile = this.getClass().getName()
        def String specResultsXML = "${specResultsDir}/TEST-${specResultsFile}.xml"
        def testsuiteResults = new XmlSlurper().parse( new File( specResultsXML ))

        // read error and failure counts from the XML       
        def errors = testsuiteResults.@errors.text()?.toInteger()
        def failures = testsuiteResults.@failures.text()?.toInteger()

        if ( (errors + failures) > 0 ) { allSpecsPass = false }

        if ( allSpecsPass ) {
            client.jobPassed(sauceJobID)
        } else {
            client.jobFailed(sauceJobID)
        }
    }
} 
```

该类的其余部分包含不与 SauceLabs 交互的登录规范。当我阅读 XML 时，发现它是在上一次 LoginSpec 运行结束时编写的。我需要一种方法来获取当前运行的值。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:54:13.533

测试报告是在规范完成执行后生成的，并且生成是由构建系统执行的，在你的情况下是由 Gradle 执行的。Spock 对此一无所知，因此您无法从测试中获取该信息。

另一方面，您可以很容易地从 Gradle 获取这些信息。测试任务有两种您可能感兴趣的方法：[addTestListener()](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.testing.Test.html#org.gradle.api.tasks.testing.Test%3aaddTestListener%28org.gradle.api.tasks.testing.TestListener%29)和[afterSuite()](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.testing.Test.html#org.gradle.api.tasks.testing.Test%3aafterSuite%28groovy.lang.Closure%29)。似乎这里更清洁的解决方案是使用第一种方法，实现一个测试监听器并将你的逻辑放在监听器的[afterSuite()](http://www.gradle.org/docs/current/javadoc/org/gradle/api/tasks/testing/TestListener.html#afterSuite%28org.gradle.api.tasks.testing.TestDescriptor,%20org.gradle.api.tasks.testing.TestResult%29)中（而不是任务配置）。您可能需要将该侦听器实现放在[buildSrc](http://gradle.org/docs/current/userguide/organizing_build_logic.html#sec%3abuild_sources)中，因为看起来您依赖于 SauceREST，并且您需要构建和编译您的侦听器类，然后才能将其用作 build.gradle 中 addTestListener() 的参数你的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:10:16.647

根据[erdi](https://stackoverflow.com/users/1856764/erdi)的建议，我创建了一个[Sauce Gradle 帮助](https://github.com/rossrowe/sauce-gradle-plugin)程序库，它提供了一个解析测试 XML 输出并调用 Sauce REST API 来设置通过/失败状态的测试侦听器。

可以通过将以下内容添加到 build.gradle 文件来包含该库：

```
import com.saucelabs.gradle.SauceListener

buildscript {
  repositories {
    mavenCentral()
    maven {
        url "https://repository-saucelabs.forge.cloudbees.com/release"
    }
  }
  dependencies {
    classpath group: 'com.saucelabs', name: 'saucerest', version: '1.0.2'
    classpath group: 'com.saucelabs', name: 'sauce_java_common', version: '1.0.14'
    classpath group: 'com.saucelabs.gradle', name: 'sauce-gradle-plugin', version: '0.0.1'
  }
}

gradle.addListener(new SauceListener("YOUR_SAUCE_USERNAME", "YOUR_SAUCE_ACCESS_KEY")) 
```

您还需要为每个测试输出 Selenium 会话 ID，以便 SauceListener 可以将 Sauce Job 与通过/失败状态相关联。为此，请在标准输出中包含以下输出：

```
SauceOnDemandSessionID=SELENIUM_SESSION_ID 
```

# ios - iOS过滤数组

> ID：13694216
> 
> 赞同：0
> 
> 时间：2012-12-04T00:28:40.350
> 
> 标签：ios, uitableview, filter, nsarray, nspredicate

我有一个显示在表格中的数据数组。该数组有多个字段，包括我要过滤的两个特定字段，“呼叫类型”和“县”。“呼叫类型”的值为“f”或“e”，县的值为“w”或“c”。我想要 4 个 UISwitch 来打开/关闭“w”，打开/关闭“c”等。这很难解释，但如果你去这个网站看看右上角，它到底是什么我想要做。[http://www.wccca.com/PITS/](http://www.wccca.com/PITS/)在 4 个过滤器中，两个过滤器控制县域，两个过滤器控制呼叫类型字段。但它们都是独立运作的。我将如何实现这一目标？每次过滤某些内容时，我会使用 NSPredicate 创建一个新数组吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:51:07.477

您绝对可以`NSPredicate`为此使用 an 。可能最简单的做法是`IBAction`对所有四个开关使用相同的，并让它重新计算：

```
- (IBAction)anySwitchDidChange:(id)sender
{
    // make a set of all acceptable call types
    NSMutableSet *acceptableCallTypes = [NSMutableSet set];
    if(self.fSwitch.on) [acceptableCallTypes addObject:@"f"];

    // ... etc, to create acceptableCallTypes and acceptableCounties

    NSPredicate *predicate = 
        [NSPredicate predicateWithFormat:
                            @"(%@ contains callType) and (%@ contains county)", 
                            acceptableCallTypes, acceptableCounties];

    /*
       this predicate assumes your objects have the properties 'callType' and 
       'county', and that you've filled the relevant sets with objects that would
       match those properties via isEqual:, whether strings or numbers or
       anything else.

       NSDictionaries are acceptable since the internal mechanism used here is
       key-value coding.
    */

    NSArray *filteredArray = [_sourceArray filteredArrayUsingPredicate:predicate];

    // send filteredArray to wherever it needs to go
} 
```

使用`predicateWithFormat:`会导致文本被立即解析。在这种情况下，这应该没有任何问题，但通常您可以提前创建谓词并在相关时刻仅提供参数，如果您最终在真正时间关键的区域中使用一个参数。

# dart - Dart - 为什么在运行 dart2js 时会出现此错误？“没有 se esperaba \dart-sdk\bin\dart2js.snapshot en este momento。”

> ID：13694218
> 
> 赞同：2
> 
> 时间：2012-12-04T00:28:44.353
> 
> 标签：dart, dart-editor

我尝试运行 dart2js，从上下文菜单中选择“以 JavaScript 方式运行”，然后从工具 -> 生成 JavaScript 中选择。

两种方法都产生相同的控制台输出（错误）：

```
Running dart2js...
No se esperaba \dart-sdk\bin\dart2js.snapshot en este momento. 
```

从西班牙语翻译为：

```
Running dart2js...
Didn't expect \dart-sdk\bin\dart2js.snapshot at this moment. 
```

我正在运行 Windows 7、64 位。

Dart 编辑器版本 0.2.6_r15355

Dart SDK 版本 0.2.6.0_r15355

注意：我以前能够成功运行 dart2js，现在我得到了那个错误。

**更新：我已经尝试过[每晚构建](https://gsdview.appspot.com/dart-editor-archive-continuous/latest/)它并且效果很好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T21:39:05.013

我花了很长时间才找到夜间构建的链接。

对于那些正在寻找它的人，它在这里：[https ://gsdview.appspot.com/dart-archive/channels/dev/release/latest/sdk/](https://gsdview.appspot.com/dart-archive/channels/dev/release/latest/sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:33:13.227

根据上面的评论，尝试切换到夜间构建。对不起这个错误。我认为这是一个错误并且已修复。

# r - How can I separate data combined into single rows?

> ID：13694220
> 
> 赞同：2
> 
> 时间：2012-12-04T00:28:55.773
> 
> 标签：r

I'm working with a dataset that looks something like this, except there are many more columns with data like "serial" and "loc":

```
start <-c(1,8,16,24,28,32)
end   <-c(4,9,20,27,30,45)
serial<-c(1,2,3,4,5,6)
loc<-c(8,63,90,32,89,75)
dataset<-data.frame(cbind(start,end, serial,loc)) 
```

Here each row actually represents a run of consecutive integers; I'd like to make each of those consecutive integers into its own row and conserve the other attributes of that row. "start" indicates the beginning of a run and "end" represents the end of the run. So, for example, in the first row in "dataset", I would like to have that row separated into four rows: one for 1, one for 2, one for 3, and one for 4\. Likewise, the second row in "dataset" would be split into two rows: one for 8 and one for 9 etc.

Thus the output for running just the first two lines of "dataset" would look like:

```
split serial loc
    1 1 8
    2 1 8
    3 1 8
    4 1 8
    8 2 63
    9 2 63 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:34:51.873

`data.table`假设 serial 是唯一行标识符的解决方案

```
library(data.table)
DA <- as.data.table(dataset)
DB <- DA[,list(index = seq(start,end, by = 1), loc),by = serial] 
```

如果`serial`不是唯一的行标识符，则

```
DB <- DA[, list(index = seq(start,end, by = 1), loc, serial), by = list(rowid = seq_len(nrow(DA)))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:49:11.927

这是坚持使用基础 R 的一种方法。

```
temp <- mapply(seq, dataset$start, dataset$end)
dataset2 <- data.frame(serial = rep(dataset$serial, sapply(temp, length)),
                       index = unlist(temp),
                       loc = rep(dataset$loc, sapply(temp, length)))
list(head(dataset2), tail(dataset2))
# [[1]]
#   serial index loc
# 1      1     1   8
# 2      1     2   8
# 3      1     3   8
# 4      1     4   8
# 5      2     8  63
# 6      2     9  63
# 
# [[2]]
#    serial index loc
# 27      6    40  75
# 28      6    41  75
# 29      6    42  75
# 30      6    43  75
# 31      6    44  75
# 32      6    45  75 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:39:13.350

```
# create the ranges
ranges <- mapply(seq, dataset$start, dataset$end)

# create the tables
tables <- lapply(seq(ranges), function(i) 
             cbind(split=ranges[[i]], dataset[i, c("serial", "loc")]) ) 

# to put all the tables in one matrix: 
do.call(rbind, tables) 
```

# linqpad - is it possible to reference .linq file in LinqPad

> ID：13694221
> 
> 赞同：5
> 
> 时间：2012-12-04T00:29:03.137
> 
> 标签：linqpad

is it possible to call/reference functions in another query file beside MyExtensions in LinqPad?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-09T04:22:12.793

您可以从另一个脚本调用一个脚本：

> 组合脚本的另一种方法是从另一个脚本动态执行一个脚本。该`Util.Run`方法正是这样做的，并且在交互式和命令行场景中都很有用：
> 
> ```
> string htmlResult = Util.Run ("test.linq", QueryResultFormat.Html).AsString(); 
> ```
> 
> 注意：如果您提供`Util.Run`相对路径，它将相对于“我的查询”目录而不是当前目录来解析它。您可以通过在此示例中指定`.\test.linq`而不是来切换其行为。`test.linq`

从：

*   [LINQPad 命令行和脚本](https://www.linqpad.net/lprun.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:26:51.507

不，这[现在是不可能的](http://linqpad.uservoice.com/forums/18302-linqpad-feature-suggestions/suggestions/199744-make-it-possible-to-reference-and-execute-linq-fi)。

# python - How do I open a .txt file and create XML tags in Python?

> ID：13694223
> 
> 赞同：0
> 
> 时间：2012-12-04T00:29:07.223
> 
> 标签：python, xml, tags

I'm a noob programmer and am trying to open a bunch of .txt files containing data on each row so I can create XML tags for each row. For example, if the .txt file to open and tag looked like this:

```
John Smith
Harvard
4.00
1600 
```

I need to use XML tags in Python to have it look like this:

```
<name> John Smith </name>
<university> Harvard </university>
<gpa> 4.00 </gpa>
<sat> 1600 </sat> 
```

This seems like a fairly simple thing to do, though for some reason I can't locate a source on how to do so. I'm using Python 3.3, can someone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:40:18.187

这是您的示例的代码：

```
tags = ['name', 'university', 'gpa', 'sat']
xml = ''

with open('data.txt') as data:
    # Reading data and filtering out the whitespace
    lines = [line.strip() for line in data.readlines()]

    # Generating xml
    xml = '\n'.join(['<{0:s}> {1:s} </{0:s}>'.format(tag, value)
                 for tag, value in zip(tags, lines)]) 
```

# syntax - Linked Image Syntax for Mediawiki

> ID：13694226
> 
> 赞同：0
> 
> 时间：2012-12-04T00:29:21.173
> 
> 标签：syntax, mediawiki

I tried to add a linked image to a wiki page without luck. The HTML syntax for the linked image is below:

```
<a href="External Link" class="fancybox-iframe {width:800,height:600}"><img width="300" height="220" alt="Virtual Tour" src="Path to Image" title="Virtual Tour" class="alignleft size-full wp-image-8517"></a> 
```

What's the right syntax for linked image in MediaWiki?

I am using **[[File:Fielname.jpg|frame|||||link=External Link|alt=ALT|Caption]]**

But I need to add CSS class to both A and IMG tag and it seems I cannot.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:37:38.033

创建模板一次**Template:MyReusedImage**使用正确大小、标题等的图像。然后在页面 {{MyReusedImage}} 上重用模板

# c# - 按部分值查找的下拉列表项

> ID：13694227
> 
> 赞同：8
> 
> 时间：2012-12-04T00:29:21.530
> 
> 标签：c#, drop-down-menu

要使用一个值在下拉列表中查找一个项目（并选择它），我们只需执行

```
dropdownlist1.Items.FindByValue("myValue").Selected = true; 
```

如何使用部分值查找项目？假设我有 3 个元素，它们的值分别为“myValue one”、“myvalue 2”、“myValue 3”。我想做类似的事情

```
dropdownlist1.Items.FindByValue("three").Selected = true; 
```

并让它选择最后一项。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T00:43:59.353

您可以从列表的末尾进行迭代并检查 value 是否包含该项目（这将选择包含值“myValueSearched”的最后一个项目）。

```
 for (int i = DropDownList1.Items.Count - 1; i >= 0 ; i--)
        {
            if (DropDownList1.Items[i].Value.Contains("myValueSearched"))
            {
                DropDownList1.Items[i].Selected = true;
                break;
            }
        } 
```

或者您可以像往常一样使用 linq：

```
DropDownList1.Items.Cast<ListItem>()
                   .Where(x => x.Value.Contains("three"))
                   .LastOrDefault().Selected = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:41:06.160

您可以迭代列表中的项目，当您找到第一个项目的字符串包含该模式的项目时，您可以将其 Selected 属性设置为 true。

```
bool found = false;
int i = 0;
while (!found && i<dropdownlist1.Items.Count)
{
       if (dropdownlist1.Items.ToString().Contains("three"))
              found = true;
       else
              i++;
}
if(found)
     dropdownlist1.Items[i].Selected = true; 
```

或者您可以编写一个为您执行此操作的方法（或扩展方法）

```
public bool SelectByPartOfTheValue(typeOfTheItem[] items, string part)
{
    bool found = false;
    bool retVal = false;
    int i = 0;
    while (!found && i<dropdownlist1.Items.Count)
    {
           if (items.ToString().Contains("three"))
                  found = true;
           else
                  i++;
    }
    if(found)
    {
           items[i].Selected = true;
           retVal = true;
    }
    return retVal;
} 
```

并这样称呼它

```
if(SelectByPartOfTheValue(dropdownlist1.Items, "three")
     MessageBox.Show("Succesfully selected");
else
     MessageBox.Show("There is no item that contains three"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T12:33:33.267

上面提到的答案是完美的，只是没有区分大小写的证明：

```
DDL.SelectedValue = DDL.Items.Cast<ListItem>().FirstOrDefault(x => x.Text.ToLower().Contains(matchingItem)).Text 
```

# c - MingW32 中的“sys/socket.h”

> ID：13694233
> 
> 赞同：1
> 
> 时间：2012-12-04T00:29:54.700
> 
> 标签：c, sockets, client-server, mingw32

我正在尝试使用 MingW32 编译我的客户端服务器程序，但出现错误：

> 没有系统/socket.h

所以编译终止。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:00:13.737

该文件在 Windows 上不存在 - 要使用网络套接字，您必须使用[Winsock](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740673%28v=vs.85%29.aspx)。幸运的是，它与 UNIX 的 Berkeley 套接字非常相似。

如果它可以节省您的任何时间，我已经编写了一个可以在 Windows 和 *nix 系统上编译的瘦套接字包装器。你可以在[这里](https://github.com/slavik262/MKb/tree/master/C%2B%2B/networking)找到它。

# javascript - setting variable value in src attribute of image tag to a base64 encoded image in javascript/ajax

> ID：13694234
> 
> 赞同：4
> 
> 时间：2012-12-04T00:30:04.750
> 
> 标签：javascript, html, ajax, image, src

I have an image byte code base64 encoded which i am trying to set the tag's src attribute in the javascript/ajax.

I don't want to directly set it as i am getting this byte code from reading the response back from a servlet and taking the bytecode into a variable and want to set this variables value in the src attribute like following.

```
var src3="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAUAB0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1hByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADABAAIRAxEAPwDi677TfhJr99py3UstraPJGHjgmLbwcjhwB8vy5Pc9AQOccDXs9h8ZdKNjD/aNheLebf3ot0Vo8+qksDg9cHp0yeteFho0ZN+1Z+r5zWzClCH1GN9devp9+p5TreiX3h7VJNP1CLZMnIYcrIvZlPcH/EBBFZ1dF408T/8JX4ga+SDyYI4xDCp+8UBJBbtklj06cDnGTztYVFFSajselhJVpUISrq07arzCiiipOgKKKKAP//Z";
document.getElementById("outmessage").innerHTML = "<h2> Image \<img src\= "+src3+" /></h2>"; 
```

This doesn't work: gives me an output as

![enter image description here](../Images/d3111f6db6a6a1bf2ae26e5d72ac28c2.png)

The thing i am sure about is that the base64 byte is correct as i tested it by adding directly to the src element of img tag like following

```
<img src ="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAUAB0DASIA
AhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA
AAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3
ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm
p6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA
AwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx
BhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK
U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3
uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDi677T
fhJr99py3UstraPJGHjgmLbwcjhwB8vy5Pc9AQOccDXs9h8ZdKNjD/aNheLebf3ot0Vo8+qksDg9
cHp0yeteFho0ZN+1Z+r5zWzClCH1GN9devp9+p5TreiX3h7VJNP1CLZMnIYcrIvZlPcH/EHBBFZ1
dF408T/8JX4ga+SDyYI4xDCp+8UBJBbtklj06cDnGTztYVFFSajselhJVpUISrq07arzCiiipOgK
KKKAP//Z"> </img> 
```

I am not sure how to set this in javascript from a variable. Can someone give any pointers as to how this can be achieved? Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:50:52.557

```
var src3="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAUAB0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1hByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADABAAIRAxEAPwDi677TfhJr99py3UstraPJGHjgmLbwcjhwB8vy5Pc9AQOccDXs9h8ZdKNjD/aNheLebf3ot0Vo8+qksDg9cHp0yeteFho0ZN+1Z+r5zWzClCH1GN9devp9+p5TreiX3h7VJNP1CLZMnIYcrIvZlPcH/EBBFZ1dF408T/8JX4ga+SDyYI4xDCp+8UBJBbtklj06cDnGTztYVFFSajselhJVpUISrq07arzCiiipOgKKKKAP//Z";
document.getElementById("outmessage").innerHTML = "<h2> Image \<img src\= "+src3+" /></h2>"; 
```

以上适用于浏览器（即/firefox等）。我正在通过 Eclipse 运行相同的代码（部署在 tomcat 上），并在 Eclipse 默认浏览器上检查结果页面。那里没有显示图像。当我在 Firefox 或 chrome 中运行相同的 url 时，它显示了图像。我猜是 Eclipse 默认浏览器无法显示图像的一些问题

# java - 在android中将.pdf写入sd卡

> ID：13694237
> 
> 赞同：0
> 
> 时间：2012-12-04T00:30:18.933
> 
> 标签：java, android, pdf, encoding

当我有这样格式的 PDF 时（缩写）

```
"JVBERi0xLjQKJf////8KMzIgMCBvYmoKPDwvTGVuZ3RoIDI0ODIKL1N1YnR5cGUgL1hNTAovVHlwZSAvTWV0YWRhdGEKPj4Kc3RyZWFtCjw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeDp4bXB0az0iMy4xLTcwMSIgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iPgogIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxMi0wOS0yNlQxNzoxOTo0OVo8L3htcDpDcmVhdGVEYXRlPgogICAgICA8eG1wOkNyZWF0b3JUb29sPk5pdHJvIFJlYWRlciAyICAoMi4gNS4gMC4gNDApPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDEyLTA5LTI2VDE3OjE5OjQ5WjwveG1wOk1vZGlmeURhdGU+CiAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTItMDktMjZUMTc6MTk6NDlaPC94bXA6TWV0YWRhdGFEYXRlPgogICAgPC9yZGY6RGVzY3JpcHRpb24+CiAg 
```

我可以使用此代码将其写入 sd 卡，然后打开它。

```
 File file = new File(eqnxPath.getAbsolutePath(), FileId + FileName);
            Log.d(TAG, "looking for file...");
            if (file.exists())
            {
                Log.d(TAG, "fiel exists, returning file");
                return file;
            }
            else
            {
                Log.d(TAG, "file does not exist, making file");
                byte[] pdfAsBytes = Base64.decode(this.FileContent, Base64.DEFAULT);
                try
                {
                    FileOutputStream os = new FileOutputStream(file);
                    try
                    {
                        os.write(pdfAsBytes);
                        os.flush();
                        os.close();
                        Log.d(TAG, "returning file");
                        return file;
                    } catch (IOException e)
                    {
                        Log.d(TAG, "IOException...");
                        e.printStackTrace();
                    }

                } catch (FileNotFoundException e)
                {
                    Log.d(TAG, "FileNotFoundException...");
                    e.printStackTrace();
                } 
```

但是，当我得到一个看起来像这样的 pdf 时（再次缩写）

```
%PDF-1.3
%����
1 0 obj
<undefined</Metadata 35 0 R/Pages 2 0 R/Type/Catalog>>
endobj
2 0 obj
<</MediaBox[0.0 0.0 609.12 788.88]/Count 1/Type/Pages/Kids[4 0 R]>>
endobj
4 0 obj
<undefined</Parent 2 0 R/Contents 29 0 R/PieceInfo<undefined</MRC<undefined</Private<undefined</B[1 1 3 1]/I[3 8 300 300]/P[2 0.45]/Q 0.1/S[2 0]/U 0/Y 15/b 20/v 2.31>>/LastModified(D:20121102151622-06'00')>>/PSL<undefined</Private<undefined</V(3.1.902)>>/LastModified(D:20121102211626-00'00')>>>>/MediaBox[0 0.0 609.12 788.88]/Resources<undefined</XObject<</4 28 0 R/5 27 0 R/6 26 0 R/7 23 0 R/8 22 0 R/9 21 0 R/A 20 0 R/B 19 0 R/C 18 0 R/D 17 0 R/E 16 0 R/F 15 0 R/G 14 0 R/H 13 0 R/I 12 0 R/J 11 0 R/K 10 0 R/L 9 0 R/M 8 0 R/N 7 0 R/O 6 0 R/P 5 0 R>>/ProcSet[/PDF/ImageC/ImageI/ImageB]>>/Type/Page/LastModified(D:20121102151622-06'00')>>
endobj
5 0 obj
<undefined</Subtype/Image/Length 20602/Filter/CCITTFaxDecode/ImageMask true/BitsPerComponent 1/Width 2320/DecodeParms<undefined</K -1/Columns 2320>>/Height 2960/Type/XObject>>stream
����KH�r�f(A�:FD���;!�(CǕ��:!������v�p���������������?w�A�?I<��
@� b��r�P�����������O��̓�Gcb��ɘ�("El%A�@���r��S����3����h� �� �Ȑc"@�.�0DE��2PA�.(A�a�8k�)%���L��#A�c'd�Ȑh*f� `�M �(�f�C6���� ��xN��� �0 xA��� `�A�h�2�&amp;�y�TA�x'A��zp����4L a��� 駬?OO�S�������xA���~��N,'��AƐN-;���i����[�[OD~�Zo��q�"2-��*v��[���m�q�!֓rM�'��g8rC�1�`�����%�G�  :!r��"�4fB� G��h�)2c&�tpO��O    ��W��GSAA���:�O!�ɧ�`��5��n@�'���zM�ap���_�&amp;�I�J �n��L8OA�����&amp;�=W   ��xN���H=7  �=7
�!xV��n����n�]7���I�n��.�����&amp;�[���O[���z�Kn~���_�������I�����V��������Z�������������������������"A����������
���ܫ��������������e��� a������/����H3?���������_�ߐq������������ �7�������O�����/��/�!�E���������"�u���������� D���� ���肋��������� ������� ������U����D����Ai��������������_�����\6i������ݿ�K����V�/� c������_���m���0K���"�zo��������c���������������_�������������_���]��������k����_�~�����������������������D������������w��k�������]���������o�J������E����/ۯ����
�_�Z�BA/��^�Jյ���KJ��/���k��[�յm+Xui��������i{a[K�:lڤ�IZ���Z�����k%
v�
��^�0}���$}��cRCRCH�4�l+iCY
m/�a~
)6� L�� ޖ%�lW��3��ȑ�+ �m)�Hb�a/�?��b�67د
5�?�*����**(1_��5��^�[�2
/����5U_쁈�S[�
.�^ �����P��/��A���
B
n������/�va�Bk
���/�
E�����a4"9���"+�
0�  �"�&amp;���Xk�aa��`�!�  ���2�=��j�  ��A��� ����l��e�A������SǨ�����/�_�������:���������
���a!VSZ��������!*�H7龓��W��̓�
��"Ő1��)%
@�;D��)9!� @AAld �`�&gt;�P�u�"D�
9|�rundefined<azv�z�0����zi����za;���L'�קj�A��OT�7^-�'���4�M��\��   G���v�c�&lt;�P��O �o���I�t��M� ������ �zN�y�0�&gt;�:]=����2�5�:O�Ӿ��ivAA?[�ut���S��7a�^��׽�^���P�N����n��Upa�_X�����
���_ޗ�&lt;����Zo��o�[��U�e�X�����_��7��D�]m������@ٷ��_\��������������/u����������������SP+��������#ڧ���������������{��_����^��]�;���^����h�������W����������������د�n����������i[_��]�ڵ�[]�
����K��J�J����m-���յ��]�xk��J�X/�����1V����0�����V!�����_�h5
o�����P�/��O����P����_R�13��RBL���G"Cn�l���K���d���}kV������eP�����Z��� _�e�*Bl�    0ed�3;Z`��9i*��5%����d�iw�z���u����$�~4�߅��o�Q���������ܧ2H.x�X�џ)��Ρ�p�8S�4g'� 0hGS'�&lt;� �=B`�;��u=< �4�?M4� �S��^�ń���M>/�N���ӽPh�v���  ��#�t�܉�Dt!9���O��"��@�����=$��龃A�n�@�7M�o����I=>��t��U:N����T���}7��[WT�+������    .�_�C�=>��=p����������6c6zVf�ޥ�mB� ��?����D^�j��G������������?������-�_������W������$�$c��L� �ד�����FGJFG���鷷��o���u���u��u_^�/����_��}-���ki}�w�u.���Z�v�����Z�]�~��mv�V��Nڶ��k�Z���I��&����L5`�]�}�`˃�lSTW��LS�HM�����
��ڦ�� �i����a���
a��k�����4���+a�A�^��ӴװX0D�&amp;A�M!iq��D�"#������Sz�~�_j�#���������������s\�
٪3��B��)_Q���-Of��^��������?���������_�������_�%����̔����}��EW���TY�~.�5�q�������������������l����:���@��ddj��\φ%�(RFvjɺ� �Oe;j��Yrundefined<W4���j�ddP3S7�`�DNN!K�����0��H!���j�i����!�:3XR��Ä �0���Au�M���M=>&��MQ>!H�\�At�O��8w
{��Z�
$�%N����7�����6r�7�����u��ץ�5�o@��y tO�6    M6��s1�� ���D��v�".9�k&�O*'�d�e�_�0��t�J��U����Fe'ۗ6�ӧk߄����q�+��i����.�w��_�xA��:�}��&��q��oҽ/�Y��!�ҿ_�?�_��1�����M�?�/�ӏ}�_~�_���T����==iid�������W�׭��7�WO�������������_�o����:�����R�_���!����Azվ���z�ȉ�W���Z�]b����W����o���-k�d?�_������~���M����p�_�$��uMR�&amp;-��)����.��o�.�Ip��������$�����������k_��/y/�W���@�~��M�+�,�7��^��5��    �"_ҧ�����qqZ�ﭨ5#��g�{��|A�Σ���J�/�I/��zm'�un�}��������II�)�����_�t�Hw��}���%_�W���K�'�������
�u|^���'�+��/�v�ߧ聟���9�~�Z���w��Z�/�K�\?��^����}-t����ץ��u���v6֟��������]h/^�ƕ{���]��^�R��mwUV�R�Y�%�yѯ�����ۮ�Z���N����}p�5�]+K����U�����y�vҤ
*�����&amp;��I1\���:!���f�0�|V�/��I5���[ˋ�`��SH��a%�b!�
�Ay����aWZU�`�rG�����A��+��E!q��
/����-��X`�0��\�V��E'���[�_��I?���-yᅿ�_�0[�L,4�Imt��zB"8��������0�
;P���)�,��lE�f4�qZ��^��MUZhDb?����j|��"�\���TY*jFǟ�"!D�b���!.�Fdv��*�NdX!6(�����
0����Y�A���gSDԇ��Û�V�A�x �ja��=5��T���C�����ih4�a=4Ӫ����D��|��[�Ӈpk�޿wڧ��:Dp��O(��¥c׾�?֗OY(|�Q�r;�` �������t6��M���K0�����'ϒƲ��'��"%ԏ��(+��n�+������u���
��A�e֛�oKH_��۽������OW��������[_���RYC��޵kh����I�o&�G�ѪZ����w~�-��?���U/���������i/��W߮��[_�����������|$��.��խ������JA6������^D �ҥ����A��J��*���O���5���~�������o�[�T����m/��_����]r �����R���I%����/��lz/M�����0�����W���\��Pa���O��^G��6��%�����z��a�u���U�D0�9��
���Ҧ�K�p�έ����[����Z��?�3������߂��<��XJ�����Km/�����:�#��I~�R�I�]���^���@������ץ���/����ޕ����A'^�.�/�k~��Z   �k��դ��-źJ���~�v����k��AWK�������֯�_��^��U�0�Natˉ��%�ܘ�3�V��0_����y��xk��!���d��)#�undefined<BJ-��1QE��(����A��`�QR�H���jCG
4E�i�װ�
}K1(>�1\;�*��������8[�׿k
��n�[   }�%�
�h��7]���Xk�i�ͅ�+�DG�CB
�pf�����E��d*c��4z�I*���J��P�!�� 
```

我的方法不起作用。我如何将这种类型的 .pdf 写入 sd 卡？我什至不知道我在看什么类型的数据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:17:59.907

像您的第一个示例中那样“格式化”的 PDF 是 base64 编码的（一种用于通过只能正确处理文本的通道传输二进制数据的编码）。

因此，在写入卡之前，必须通过“Base64.decode”调用对您的方法进行解码。

像第二个示例中那样“格式化”的 PDF 已经处于未编码状态。因此，无需进一步解码，数据必须按原样写入卡。

我希望您的成员变量“this.FileContent”不是字符串而是字节数组，或者它的字节数组表示存在于另一个成员中。否则，第二种未编码的形式肯定已经被破坏了。

对于这种数据，您的方法在保存之前不应调用 base64 解码方法，而是按原样保存数据。

# java - How to track login attempts using HttpSession in Java?

> ID：13694239
> 
> 赞同：2
> 
> 时间：2012-12-04T00:30:23.743
> 
> 标签：java, jsp, servlets

I have a no-framework web application. I need to implement a simple way to check unsuccessful logins, using sessions. If the user attempts to log in 3 times using incorrect username/password combination, they will be given a 20 minute timeout before they can try logging in again.

Currently I only set a user session if the user successfully logs in to the system. However, it seems that I should get a session in case of unsuccessful login also, and count the login attempts somehow.

Login.jsp (simplified version):

```
<form name="loginForm" method="post" action="CustomerData">
User name:<input type="text" name="userName"/>
Password:<input type="password" name="password"/>
<input type="button" value="submit"> 
```

CustomerData.java (simplified version):

```
// See if customer is a valid user
        String selectQuery = "Select firstName,lastName,email from customer where userName='"+userName+"' and password='"+password+"'";
        selectResult = statement.executeQuery(selectQuery);

if(selectResult.next())
{
    // We got a valid user, let's log them in
    ....
    HttpSession session = request.getSession(true);
    session.setAttribute("customer", customer);
}
else
{
    // this is where I need to get the session id (??),
    // count the unsuccessful login attempts somehow, 
    //and give them a 20 minutes timeout before they can try logging in again.

    request.setAttribute("message","Invalid username or password. Please try again!");

} 
```

While doing research, I found that there are a lot of built-in security features for various Java frameworks. I also found that using sessions is not the best way to track login attempts, because the user can log-in with different browsers. However, I'm creating this functionality for a simple web project that will never go to any production environment. I would like to know how to implement this functionality using the Java HTTPSession Object.

Ok, here is my full solution, based on the feedback I received. I'm posting this in case it might help others with similar issues:

```
// See if customer is a valid user
String selectQuery = "Select firstName,lastName,email from customer where userName='"+userName+"' and password='"+password+"'";
selectResult = statement.executeQuery(selectQuery);

        if(selectResult.next())
        {
            // We got a valid user, let's log them in
            Customer customer = new Customer();
            customer.setFirstName(selectResult.getString("firstName"));
            customer.setLastName(selectResult.getString("lastName"));
            customer.setEmail(selectResult.getString("email"));
            customer.setUserName(userName);
            customer.setPassword(password);

            // establish a user session
            session.setAttribute("customer", customer);
            session.setAttribute("firstName", customer.getFristName());
            url = "/index.jsp";
            selectResult.close();

        }
        else
        {
            int loginAttempt;
            if (session.getAttribute("loginCount") == null)
            {
                session.setAttribute("loginCount", 0);
                loginAttempt = 0;
            }
            else
            {
                 loginAttempt = (Integer) session.getAttribute("loginCount");
            }

            //this is 3 attempt counting from 0,1,2
            if (loginAttempt >= 2 )
            {        
                long lastAccessedTime = session.getLastAccessedTime();
                date = new Date();
                long currentTime = date.getTime();
                long timeDiff = currentTime - lastAccessedTime;
                // 20 minutes in milliseconds  
                if (timeDiff >= 1200000)
                {
                    //invalidate user session, so they can try again
                    session.invalidate();
                }
                else
                {
                     // Error message 
                     session.setAttribute("message","You have exceeded the 3 failed login attempt. Please try loggin in in 20 minutes, or call our customer service center at 1-800 555-1212.");
                }  

            }
            else
            {
                 loginAttempt++;
                 int allowLogin = 3-loginAttempt;
                 session.setAttribute("message","loginAttempt= "+loginAttempt+". Invalid username or password. You have "+allowLogin+" attempts remaining. Please try again! <br>Not a registered cusomer? Please <a href=\"register.jsp\">register</a>!");
            }
            session.setAttribute("loginCount",loginAttempt);
            url = "/login.jsp";

        }

        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
        dispatcher.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:37:02.107

你可以试试下面的代码

```
int loginAttempt = (Integer)session.getAttribute("loginCount");

if (loginAttempt > 3 ){
     // Error message/page redirection 
}else{
     session.setAttribute("loginCount",loginAttempt++);
} 
```

# android - Paired but without connection

> ID：13694240
> 
> 赞同：0
> 
> 时间：2012-12-04T00:30:33.220
> 
> 标签：android, bluetooth

Im trying to connect a 2.2 android phone with a 4.1.2

It seems as if there's some problems though since my 2.2 phone says paired but not connected and when i try to run the method

```
 Set<BluetoothDevice> pairedDevices = bluetoothAdapter.getBondedDevices(); 
```

On either device it crashes. Is there some problems with connecting a 2.2 phone with a 4.1.2 or?

Just tried and even a simple command like

```
 bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    boolean on = bluetoothAdapter.isEnabled(); 
```

Seems to crash at the second line even though the bluetoothadapter is assigned

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:49:03.767

发现我没有允许使用蓝牙所以解决了

# struts2 - Struts2 - Trying to access Session data in setServletResponse()

> ID：13694241
> 
> 赞同：0
> 
> 时间：2012-12-04T00:30:35.900
> 
> 标签：struts2

I'm using an action class that implements SessionAware and SerlvetResponseAware.

I'm trying to rewrite the response by using data that I have stored in the Session.

However, when I debug my action class it seems that setServletResponse() is called BEFORE setSession().

Is there another way to do this? Or am I trying to do something wrong?

# iphone - How to make a cube in cocos3d

> ID：13694242
> 
> 赞同：1
> 
> 时间：2012-12-04T00:30:48.340
> 
> 标签：iphone, objective-c, cocos3d

I am working on an iphone App using cocos3d and I want to render a cube

```
 CC3BoundingBox bounds = makeBounds(9.5, 5.0, 4.0, 0, 0, 0);
    CC3MeshNode *cube = [[CC3MeshNode alloc] init];
    [cube populateAsSolidBox:bounds]; 
```

I have tried this but populateAsSolidBox: no longer exists. How can I programmatically create a simple box or cube in the latest cocos3d 0.7.2? Thankyou

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:41:47.847

populateAsSolidBox 方法（以及许多其他 populateAs 方法）现在在 CC3MeshNode 扩展 ParametricShapes 中定义。这是在 CC3ParametricMeshNodes.h 中。

所以一定要在你的 Scene.mm 中导入那个头文件：

```
#import "CC3ParametricMeshNodes.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:16:29.060

```
CC3BoundingBox bounds = { {-1, -2.0, -2.0}, {0.0, 0.0, 0.0} };
CC3MeshNode *cube = [[CC3MeshNode alloc] init];
[cube populateAsSolidBox:bounds]; 
```

我不能使用 makeBounds 函数，这些是我在 cocos3d 0.7.2 中使用的代码

而且，记得导入 CC3ParametricMeshNodes.h

# maven - jboss-as-maven-plugin 无法为 org.jboss.as.plugin.deployment.Deploy 获取类

> ID：13694243
> 
> 赞同：0
> 
> 时间：2012-12-04T00:31:12.877
> 
> 标签：maven, jboss7.x

我正在尝试在 pre（和 post）-integration-test 阶段使用 jboss-as-maven-plugin 来部署（和取消部署）我的测试 webapp，并且当执行 mvn install 时，（取消）部署不会发生。以下 Jenkins 作业的输出似乎指向我的配置，但我无法弄清楚缺少什么：

**行家输出：**

```
mojoSucceeded org.apache.maven.plugins:maven-jar-plugin:2.3.2(default-jar)
forkedProjectSucceeded com.hck.debate:debate-test:2.1.15-SNAPSHOT
Dec 3, 2012 11:28:19 PM hudson.maven.ExecutedMojo <init>
WARNING: Failed to getClass for org.jboss.as.plugin.deployment.Deploy
mojoStarted org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final(set-env)
[INFO] 
[INFO] --- jboss-as-maven-plugin:7.2.Final:deploy (set-env) @ debate-test ---
Dec 3, 2012 11:28:20 PM org.xnio.Xnio <clinit>
INFO: XNIO Version 3.0.3.GA
Dec 3, 2012 11:28:20 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.0.3.GA
Dec 3, 2012 11:28:20 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 3.2.7.GA
mojoSucceeded org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final(set-env)
mojoStarted org.apache.maven.plugins:maven-failsafe-plugin:2.12.4(default) 
```

**调试模式下的 maven 输出（mvn -X install）：**

```
mojoSucceeded org.apache.maven.plugins:maven-jar-plugin:2.3.2(default-jar)
forkedProjectSucceeded com.hck.debate:debate-test:2.1.16-SNAPSHOT
Dec 4, 2012 6:00:45 PM hudson.maven.ExecutedMojo <init>
WARNING: Failed to getClass for org.jboss.as.plugin.deployment.Deploy
mojoStarted org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final(set-env)
[INFO] 
[INFO] --- jboss-as-maven-plugin:7.2.Final:deploy (set-env) @ debate-test ---

[DEBUG] org.jboss.as.plugins:jboss-as-maven-plugin:jar:7.2.Final:
[DEBUG]    org.apache.maven:maven-plugin-api:jar:3.0.4:compile
[DEBUG]       org.apache.maven:maven-model:jar:3.0.4:compile
[DEBUG]       org.apache.maven:maven-artifact:jar:3.0.4:compile
[DEBUG]       org.sonatype.sisu:sisu-inject-plexus:jar:2.3.0:compile
[DEBUG]          org.codehaus.plexus:plexus-component-annotations:jar:1.5.5:compile
[DEBUG]          org.codehaus.plexus:plexus-classworlds:jar:2.4:compile
[DEBUG]          org.sonatype.sisu:sisu-inject-bean:jar:2.3.0:compile
[DEBUG]             org.sonatype.sisu:sisu-guice:jar:no_aop:3.1.0:compile
[DEBUG]                org.sonatype.sisu:sisu-guava:jar:0.9.9:compile
[DEBUG]    org.apache.maven:maven-project:jar:2.2.1:compile
[DEBUG]       org.apache.maven:maven-settings:jar:2.2.1:compile
[DEBUG]       org.apache.maven:maven-profile:jar:2.2.1:compile
[DEBUG]       org.apache.maven:maven-artifact-manager:jar:2.2.1:compile
[DEBUG]          org.apache.maven:maven-repository-metadata:jar:2.2.1:compile
[DEBUG]          backport-util-concurrent:backport-util-concurrent:jar:3.1:compile
[DEBUG]       org.apache.maven:maven-plugin-registry:jar:2.2.1:compile
[DEBUG]       org.codehaus.plexus:plexus-interpolation:jar:1.11:compile
[DEBUG]       org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
[DEBUG]          junit:junit:jar:3.8.1:compile
[DEBUG]          classworlds:classworlds:jar:1.1-alpha-2:compile
[DEBUG]    org.sonatype.aether:aether-api:jar:1.8:compile
[DEBUG]    org.sonatype.aether:aether-util:jar:1.8:compile
[DEBUG]    org.jboss.as:jboss-as-cli:jar:7.1.2.Final:compile
[DEBUG]       jline:jline:jar:0.9.94:compile
[DEBUG]       org.jboss:staxmapper:jar:1.1.0.Final:compile
[DEBUG]       org.jboss.logging:jboss-logging:jar:3.1.1.GA:compile
[DEBUG]       org.jboss.sasl:jboss-sasl:jar:1.0.1.Final:compile
[DEBUG]       org.jboss.remoting3:jboss-remoting:jar:3.2.7.GA:compile
[DEBUG]          org.jboss.xnio:xnio-api:jar:3.0.3.GA:compile
[DEBUG]       org.jboss.as:jboss-as-controller:jar:7.1.2.Final:compile
[DEBUG]          org.jboss.modules:jboss-modules:jar:1.1.2.GA:compile
[DEBUG]          org.jboss.msc:jboss-msc:jar:1.0.2.GA:compile
[DEBUG]       org.jboss.remotingjmx:remoting-jmx:jar:1.0.3.Final:compile
[DEBUG]          org.jboss.logmanager:jboss-logmanager:jar:1.3.0.Final:compile
[DEBUG]          org.jboss.logging:jboss-logging-processor:jar:1.0.2.Final:compile
[DEBUG]             system:jdk-tools:jar:jdk:system
[DEBUG]          org.jboss.marshalling:jboss-marshalling:jar:1.3.14.GA:compile
[DEBUG]          org.jboss.marshalling:jboss-marshalling-river:jar:1.3.14.GA:compile
[DEBUG]          org.jboss.xnio:xnio-nio:jar:3.0.3.GA:compile
[DEBUG]       org.jboss:jboss-vfs:jar:3.1.0.Final:compile
[DEBUG]       sun.jdk:jconsole:jar:jdk:system
[DEBUG]       org.jboss.as:jboss-as-build-config:jar:7.1.2.Final:compile
[DEBUG]    org.jboss.as:jboss-as-controller-client:jar:7.1.2.Final:compile
[DEBUG]       org.jboss.as:jboss-as-protocol:jar:7.1.2.Final:compile
[DEBUG]       org.jboss:jboss-dmr:jar:1.1.1.Final:compile
[DEBUG]       org.jboss.threads:jboss-threads:jar:2.0.0.GA:compile
[DEBUG]    org.apache.maven.plugin-tools:maven-plugin-annotations:jar:3.1:compile
[DEBUG]    org.codehaus.plexus:plexus-utils:jar:3.0.1:compile
[DEBUG] Created new class realm plugin>org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final
[DEBUG] Importing foreign packages into class realm plugin>org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final
[DEBUG]   Imported:  < maven.api
[DEBUG] Populating class realm plugin>org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final
[DEBUG]   Included: org.jboss.as.plugins:jboss-as-maven-plugin:jar:7.2.Final
[DEBUG]   Included: org.codehaus.plexus:plexus-component-annotations:jar:1.5.5
[DEBUG]   Included: org.sonatype.sisu:sisu-inject-bean:jar:2.3.0
[DEBUG]   Included: org.sonatype.sisu:sisu-guice:jar:no_aop:3.1.0
[DEBUG]   Included: org.sonatype.sisu:sisu-guava:jar:0.9.9
[DEBUG]   Included: backport-util-concurrent:backport-util-concurrent:jar:3.1
[DEBUG]   Included: org.codehaus.plexus:plexus-interpolation:jar:1.11
[DEBUG]   Included: junit:junit:jar:3.8.1
[DEBUG]   Included: org.sonatype.aether:aether-util:jar:1.8
[DEBUG]   Included: org.jboss.as:jboss-as-cli:jar:7.1.2.Final
[DEBUG]   Included: jline:jline:jar:0.9.94
[DEBUG]   Included: org.jboss:staxmapper:jar:1.1.0.Final
[DEBUG]   Included: org.jboss.logging:jboss-logging:jar:3.1.1.GA
[DEBUG]   Included: org.jboss.sasl:jboss-sasl:jar:1.0.1.Final
[DEBUG]   Included: org.jboss.remoting3:jboss-remoting:jar:3.2.7.GA
[DEBUG]   Included: org.jboss.xnio:xnio-api:jar:3.0.3.GA
[DEBUG]   Included: org.jboss.as:jboss-as-controller:jar:7.1.2.Final
[DEBUG]   Included: org.jboss.modules:jboss-modules:jar:1.1.2.GA
[DEBUG]   Included: org.jboss.msc:jboss-msc:jar:1.0.2.GA
[DEBUG]   Included: org.jboss.remotingjmx:remoting-jmx:jar:1.0.3.Final
[DEBUG]   Included: org.jboss.logmanager:jboss-logmanager:jar:1.3.0.Final
[DEBUG]   Included: org.jboss.logging:jboss-logging-processor:jar:1.0.2.Final
[DEBUG]   Included: system:jdk-tools:jar:jdk
[DEBUG]   Included: org.jboss.marshalling:jboss-marshalling:jar:1.3.14.GA
[DEBUG]   Included: org.jboss.marshalling:jboss-marshalling-river:jar:1.3.14.GA
[DEBUG]   Included: org.jboss.xnio:xnio-nio:jar:3.0.3.GA
[DEBUG]   Included: org.jboss:jboss-vfs:jar:3.1.0.Final
[DEBUG]   Included: sun.jdk:jconsole:jar:jdk
[DEBUG]   Included: org.jboss.as:jboss-as-build-config:jar:7.1.2.Final
[DEBUG]   Included: org.jboss.as:jboss-as-controller-client:jar:7.1.2.Final
[DEBUG]   Included: org.jboss.as:jboss-as-protocol:jar:7.1.2.Final
[DEBUG]   Included: org.jboss:jboss-dmr:jar:1.1.1.Final
[DEBUG]   Included: org.jboss.threads:jboss-threads:jar:2.0.0.GA
[DEBUG]   Included: org.apache.maven.plugin-tools:maven-plugin-annotations:jar:3.1
[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:3.0.1
[DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:3.0.4
[DEBUG]   Excluded: org.apache.maven:maven-model:jar:3.0.4
[DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:3.0.4
[DEBUG]   Excluded: org.sonatype.sisu:sisu-inject-plexus:jar:2.3.0
[DEBUG]   Excluded: org.codehaus.plexus:plexus-classworlds:jar:2.4
[DEBUG]   Excluded: org.apache.maven:maven-project:jar:2.2.1
[DEBUG]   Excluded: org.apache.maven:maven-settings:jar:2.2.1
[DEBUG]   Excluded: org.apache.maven:maven-profile:jar:2.2.1
[DEBUG]   Excluded: org.apache.maven:maven-artifact-manager:jar:2.2.1
[DEBUG]   Excluded: org.apache.maven:maven-repository-metadata:jar:2.2.1
[DEBUG]   Excluded: org.apache.maven:maven-plugin-registry:jar:2.2.1
[DEBUG]   Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1
[DEBUG]   Excluded: classworlds:classworlds:jar:1.1-alpha-2
[DEBUG]   Excluded: org.sonatype.aether:aether-api:jar:1.8
[DEBUG] Configuring mojo org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final:deploy from plugin realm ClassRealm[plugin>org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final, parent: sun.misc.Launcher$AppClassLoader@cac268]
[DEBUG] Configuring mojo 'org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final:deploy' with basic configurator -->
[DEBUG]   (f) checkPackaging = true
[DEBUG]   (f) force = true
[DEBUG]   (f) hostname = 10.10.101.84
[DEBUG]   (f) port = 9999
[DEBUG]   (f) project = MavenProject: com.hck.debate:debate-test:2.1.16-SNAPSHOT @ /var/lib/jenkins/jobs/sauce-dev/workspace/debate-test/pom.xml
[DEBUG]   (f) skip = false
[DEBUG]   (f) targetDir = /var/lib/jenkins/jobs/sauce-dev/workspace/debate-test/target
[DEBUG] -- end configuration --
Dec 4, 2012 6:00:46 PM org.xnio.Xnio <clinit>
INFO: XNIO Version 3.0.3.GA
Dec 4, 2012 6:00:46 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.0.3.GA
Dec 4, 2012 6:00:46 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 3.2.7.GA

[DEBUG] Executing deployment
mojoSucceeded org.jboss.as.plugins:jboss-as-maven-plugin:7.2.Final(set-env)
mojoStarted org.apache.maven.plugins:maven-failsafe-plugin:2.12.4(default) 
```

**我的 pom 文件：**

```
 <build>
<plugins>
<plugin>
    <groupId>org.jboss.as.plugins</groupId>
    <artifactId>jboss-as-maven-plugin</artifactId>
    <version>7.2.Final</version>
    <configuration>
        <hostname>10.10.101.84</hostname>
        <port>9999</port>
    </configuration>
    <executions>        
        <execution>     
            <id>set-env</id>        
            <phase>pre-integration-test</phase>
            <configuration>
                <force>true</force>
            </configuration>
            <goals>
                <goal>deploy</goal>
            </goals>
        </execution>
        <execution>     
            <id>unset-env</id>      
            <phase>post-integration-test</phase>
            <goals>
                <goal>undeploy</goal>
            </goals>
        </execution>
    </executions>
        <plugin>
    </plugins>
</build> 
```

有什么线索吗？

**编辑**：我认为我在这里有一个更大的问题，因为 jboss-as-maven-plugin 执行是在测试模块中完成的（上面的 pom 文件是测试模块的文件）所以它尝试部署测试模块 jar（我想部署战争，这是另一个模块）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:45:13.537

我试图部署测试模块 jar 而不是战争（这是另一个模块）。感谢@James R. Perkins 帮助我睁开眼睛

# php - How to pass or display mySQL data based on subscription or billing

> ID：13694244
> 
> 赞同：0
> 
> 时间：2012-12-04T00:31:17.903
> 
> 标签：php, mysql, e-commerce, subscription, billing

I want to build a PHP based site where, the user can view data based on the types of data they've paid for.

Allow me to use something simple for an example.

Let's say historical data for basketball was not readily available but could be purchased. Simple information such as the Winner, Loser, Final score and date are all stored in a mySQL table.

What would be involved so that, when the user logs in, they can only see the historical data they have paid for.

My theories so far about the architecture:

I imagined a mySQL table storing True or False values for all historical game data they have paid for. Based on this, a 'data chart' object enables the user to view all data within their mySQL row which has a value of 'true.'

Follow ups:

Assuming I am correct, what methods are popular or practical for this type of service.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:03:00.647

如果我们要遵循体育范式...

每个游戏都需要有一个唯一的 ID。然后你有一个客户表，每个客户都有一个唯一的 ID。然后你有一个表格，描述了谁为什么支付了费用。包含两列 ID、customerID 和 gameID 的表。这就是所谓的标准化。

因此，在您的联接表中，您可能有 CUSTOMER ID 001，他们为游戏 001、003 和 005 付费。这是客户表：

```
.------------------------------.
| customer_id | customer_name  |
|------------------------------|
| 001         | SPM, Inc.      |
| 002         | Stack Overflow |
'------------------------------' 
```

这是游戏桌：

```
.---------------------------------.
| game_id     | description       |
|---------------------------------|
| 001         | Giants v. Red Sox |      |
| 002         | Blah v. Yada      |
| 003         | Vader v. Kenobi   |
| 004         | Romney v. Obama   |
| 005         | Roth v. Hagar     |
'---------------------------------' 
```

这是对应于谁为什么支付的表格：

```
.-----------------------------.
| customer_id | game_id       |
|-----------------------------|
| 001         | 001           |
| 001         | 003           |
| 001         | 005           |
| 002         | 002           |
| 002         | 005           |
'-----------------------------' 
```

注意最后一个表中的 ID 不是唯一的。

# javascript - this 和词法作用域

> ID：13694249
> 
> 赞同：3
> 
> 时间：2012-12-04T00:32:25.830
> 
> 标签：javascript

在[这个链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)上，Mozilla 通过以下方式解释了“this”引用的内容：

> 一般来说，`this`当前作用域内绑定的对象是由当前函数的调用方式决定的，不能在执行时通过赋值来设置，每次调用函数时都可以不同。

在正常情况下，我理解`this`它的引用是如何变化的。

这本书 Pro JavaScript Design Patterns 说以下关于词法范围

> JavaScript 也是词法范围的，这意味着函数在定义它们的范围内运行，而不是在它们执行的范围内。

所以'this'取决于当前函数的调用方式，而词法范围意味着函数在定义它们的范围内运行。

我的问题是，可以`this`成为词法范围的一部分，如果是这样，我如何理解这取决于当前函数的调用方式，而词法范围将函数限制在定义它们的范围内。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T00:38:14.287

只需将它们视为单独的关注点。

*   函数的变量范围永远不会改变。

*   的值`this` *将*根据调用函数的方式而变化。给定相同的函数，不同的调用会赋予相同的函数不同的`this`.

    ```
    var foo = (function() {
                  var bar = "bar";
                  return function() { console.log(bar, this); };
              })();

    foo();    // the default `this`

    var someObj = {some: "object"};
    foo.call(someObj);    // `this` is someObj

    var aDiffObj = {aDiff: "object"};
    foo.apply(aDiffObj);  // `this` is aDiffObj

    var anotherObj = {another: "object", foo:foo}; 
    anotherObj.foo();     // `this` is anotherObj

    var binderObj = {binder: "object"};
    var bound = foo.bind(binderObj);
    bound();              // `this` is binderObj

    new foo(); // `this` is a new object being constructed, 
               //      which has the prototype of `foo` in its prototype chain 
    ```

    所有调用都可以访问该`bar`变量，但`this`值不同。

因此，给定 ECMAScript 中的当前函数语法，`this`永远不会从词法范围中获取，而是始终根据调用分配一个值。

作品中有一个新的函数语法，可能会有一个 lexical `this`，但那是将来的某个时候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-29T23:32:11.757

ES6 箭头函数声明语法改变了 Javascript 的 'this' 绑定规则，因此 'this' 始终指代词法上下文，而不是根据函数的调用方式而改变。

这定义了“this”的词法范围......

```
var myFunc = () => {
  // function contents here
} 
```

上面的箭头函数声明语法将“this”绑定重新定义为“lexical this”。不过要小心，有充分的理由不要通过使用“this”来混淆问题，因为代码中有两组不同的绑定规则。如果您可以通过与 .bind(this) 和平相处来避免它，那么您的状态可能会更好。

# python - python try except format

> ID：13694251
> 
> 赞同：0
> 
> 时间：2012-12-04T00:32:39.040
> 
> 标签：python

```
try:
    num = int(input("Give me an integer between 1 and 100:"))
    while num > 100 or num < 1:
        print ("Sorry, that is not an integer between 1 and 100\. Try again.")
        num = int(input("Give me an integer between 1 and 100:"))
except:
    print ("Sorry, that is not an integer between 1 and 100\. Try again.")
else:
    print ("Thank you for your input") 
```

How do I tell Python to also print "sorry try again" if they entered input such as "pear" or "sd23214"? Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:37:40.183

只需将其全部包装在一个`while`循环中

```
while True:
    try:
        num = int(input("Give me an integer between 1 and 100:"))
        if num > 100 or num < 1:
            print ("Sorry, that is not an integer between 1 and 100\. Try again.")
            continue
    except ValueError:
        print ("Sorry, that is not an integer between 1 and 100\. Try again.")
    else:
        print ("Thank you for your input")
        break 
```

大多数人可能不会在`else`这里使用该子句

```
while True:
    try:
        num = int(input("Give me an integer between 1 and 100:"))
        if num > 100 or num < 1:
            raise ValueError
        print ("Thank you for your input")
        break
    except ValueError:
        print ("Sorry, that is not an integer between 1 and 100\. Try again.") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:47:06.837

这是一种更好/更简单的方法（在我看来）：

```
while True:
    try:
        num = int(input("Enter an integer between 1 and 100: "))
        if type(num) != int or num not in range(1, 101): #second argument is exclusive
            raise ValueError
        else:
            print("Thank you.")
            break
    except ValueError:
        print("Input must be an integer within 1 and 100\. Try again.") 
```

使用 a`range`是一种很好的方法，而不是使用`if num > 101 or num < 1`.

# qt - Qt Creator - How can I set the background color of a tooltip to be different than the widget?

> ID：13694252
> 
> 赞同：6
> 
> 时间：2012-12-04T00:32:52.943
> 
> 标签：qt, qt-creator, background-color, tooltip

I am working on a GUI and I've run into a problem. If I set a button, label, or other widget to have a background color, the tooltip for that widget also takes the same background color. I tried editing the style sheet for the tooltip specifically and setting a different background color but it doesn't work. I also tried editing the palette for the widget but changing the color scheme for the tooltip background or text doesn't work either. Is there another way I can do this? I'd like to have consistency between all my tooltips.

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T02:41:29.223

一般来说，您可以做这样的事情来设置 a`QToolTip`的样式。

```
QToolTip { color: #fff; background-color: #000; border: none; } 
```

当您需要`QToolTips`专门设置样式时，可以根据它们的父小部件使用以下语法：

```
ParentWidgetName QToolTip { color: #333; background-color: #1c1c1c; border: none; } 
```

[阅读本文](http://doc.qt.io/qt-5/stylesheet.html)将进一步帮助您。

# php - 如何显示由 $_GET 函数定义的先前隐藏的 div

> ID：13694253
> 
> 赞同：0
> 
> 时间：2012-12-04T00:32:54.207
> 
> 标签：php, javascript, jquery

我最近开始用 PHP 编码，我想知道如何显示地址栏中定义的 div（例如：www.yourwebsite.com/index.php?divtoshow=home）

div用css隐藏，display:none;

然后我希望它显示主 div

我曾尝试使用 jquery，但我似乎无法将变量嵌入到脚本中

当我单击主页图标时，我已经有了以下内容：

```
$(".chome").click(function(){
    $("#home").show(500);
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:36:51.317

首先，从查询字符串中获取名称：

```
<?php $divtoshow = $_GET["divtoshow"]; ?> 
```

其次，添加一些 JQuery 以在页面加载时显示 div：

```
<script>
    $(document).ready(function() {
        $("div[id=<?php echo $divtoshow; ?>]").show();
    });
</script> 
```

# php - 将 T-SQL 转换为 PHP 代码。批量插入

> ID：13694257
> 
> 赞同：1
> 
> 时间：2012-12-04T00:33:17.513
> 
> 标签：php, tsql, odbc, bulkinsert

我想将此代码用于 php。是否可以将此代码转换为 PHP？

数据库：ODBC

- 提前致谢

```
USE [ECPNWEB]
GO

/****** Object:  Table [dbo].[tblMCWD]    Script Date: 11/16/2012 14:42:12 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[tblMCWD](
    [ID] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [ConsumerCode] [varchar](15) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [ConsumerName] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [BillingPeriod] [datetime] NULL,
    [AccountStatus] [nchar](1) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [AccountNumber] [varchar](30) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [DueDate] [datetime] NULL,
    [CurrentBill] [float] NULL,
    [PreviousBill] [float] NULL,
    [TotalDiscount] [float] NULL,
    [TotalGrossAmountDue] [float] NULL,
    CONSTRAINT [PK_tblMCWD] 
        PRIMARY KEY CLUSTERED ([ID] ASC)
        WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]) 
        ON [PRIMARY]
GO

BULK INSERT tblmcwd
FROM 'c:\tblmcwd.txt'
WITH (
    FIELDTERMINATOR = '|',
    ROWTERMINATOR = '\n'
)
GO

/* Check the content of the table. */
SELECT *
FROM tblmcwd
GO

/* Drop the table to clean up database. */
DROP TABLE tblmcwd
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:09:36.957

这是一个开始......我不能保证它会工作，但......你需要测试它并调试它：

```
<?php
try {
    $dbh = new PDO("mssql:host={$hostname};dbname={$dbname}", $username, $password);
} catch (PDOException $e) {
    exit;
}
if (($handle = fopen("c:\tblmcwd.txt", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 4096, "|")) !== FALSE) {
        if (count($data) == 10) {
            $sql = "INSERT INTO [dbo].[tblMCWD] (
                        [ID], 
                        [ConsumerCode], 
                        [ConsumerName], 
                        [AccountStatus], 
                        [AccountNumber], 
                        [DueDate], 
                        [CurrentBill], 
                        [PreviousBill], 
                        [TotalDiscount], 
                        [TotalGrossAmountDue]
                    ) VALUES (
                        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
                    )";

            $stmt = $dbh->prepare($sql);
            $stmt->bindValue(1, $data[0]);
            $stmt->bindValue(2, $data[1]);
            $stmt->bindValue(3, $data[2]);
            $stmt->bindValue(4, $data[3]);
            $stmt->bindValue(5, $data[4]);
            $stmt->bindValue(6, $data[5]);
            $stmt->bindValue(7, $data[6]);
            $stmt->bindValue(8, $data[7]);
            $stmt->bindValue(9, $data[8]);
            $stmt->bindValue(10, $data[9]);
            $stmt->execute();
        }
    }
    fclose($handle);
} 
```

# uml - 如何创建框图

> ID：13694258
> 
> 赞同：9
> 
> 时间：2012-12-04T00:33:26.420
> 
> 标签：uml

我可以知道如何为系统/软件开发绘制框图吗？我在网上搜索，我找不到任何指导方针或好的例子。

框图的顶部应该是什么？

我应该根据我的类图（继承、接口、抽象等）安排框图吗？

为什么使用框图？

框图实际上显示了什么？过程？组件？整体架构？

如果有任何关于框图的链接，任何人都可以提供给我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T00:45:14.040

框图主要在软件开发的初步阶段很有帮助。

框图类似于 UML 包图，因为它只显示设计的非常高级的组件以及它们如何交互。

上面应该有什么？框图中没有真正的“顶部”。您可能会将其与分层架构图混淆。在分层架构图中，顶层通常离用户最近。

我应该按照继承来安排框图吗？并非如此，框图应该只显示系统的高级交互。UML 类图是显示继承和接口行为的地方。

为什么要使用框图？主要是因为它很容易将系统划分为基于组件的软件工程的组件，并且因为它可以很容易地与客户/经理讨论。

框图通常显示了整体架构。

这是分层架构图的示例：（来自[http://www.acaltechnology.com/index.php?page=news&id=1577](http://www.acaltechnology.com/index.php?page=news&id=1577)）

![分层架构——硬件抽象层](../Images/e5cdd8c34512263253dbacb71284cdee.png)

这是一个框图示例：（来自[https://web.archive.org/web/20121106145142/http://www.simventions.com/whitepapers/uml/3000_borcon_uml.html](https://web.archive.org/web/20121106145142/http://www.simventions.com/whitepapers/uml/3000_borcon_uml.html)）

![框图示例](../Images/c980eb7d0efc131f47c2f442cbf405a6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T11:17:04.523

绘制框图的最佳方法是使用复合结构 UML 图的部件和连接器。

# c# - 如何在 Windows Store App 中设置 WebView 控件的样式？

> ID：13694259
> 
> 赞同：1
> 
> 时间：2012-12-04T00:33:30.493
> 
> 标签：c#, html, windows-8, .net-4.5, windows-store-apps

我有 C# / XAML win store 应用程序，它从 json 接收各种数据。它的一部分- html 字符串。

我使用 WebView.NavigateToString 显示该字符串

但是我不知道我该如何设计它。通常我会使用 blend 来获取默认样式，然后对其进行编辑。但是 Blend 不允许我设置 WebView 的样式。

我最终将 json html 包装到

```
<body style='background-color:black;color:white' /> 
```

但是这种方法不允许我使用应用程序其余部分所做的主题。

WebView 的样式和/或格式内容的“正确”方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:16:03.447

另一个解决方案是制作一个 WebViewContentHelper （左右）类。您可以根据它传递主题和样式的 CSS。例如：

```
string content = WebViewContentHelper.WrapHtml(originalHtmlString, backGroundColor, webView.ActualHeight);
 webView.NavigateToString(content); 
```

您可以调整已经从 Windows 8 复制字体样式并为您提供水平滚动的此类，还可以在列中排列内容，就像 ItemDetails 模板一样：

```
class WebContentHelper
{
    public static string HtmlHeader(double viewportWidth, double height) //adapt parametres
    {
        var head = new StringBuilder();
        head.Append("<head>");

        head.Append("<meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1, user-scalable=0\"/>");
        head.Append("<script type=\"text/javascript\">"+
            "document.documentElement.style.msScrollTranslation = 'vertical-to-horizontal';"+
            "</script>"); //horizontal scrolling
        //head.Append("<meta name=\"viewport\" content=\"width=720px\">");
        head.Append("<style>");
        head.Append("html { -ms-text-size-adjust:150%;}");
        head.Append(string.Format("h2{{font-size: 48px}} "+
        "body {{background:white;color:black;font-family:'Segoe UI';font-size:18px;margin:0;padding:0;display: block;"+
        "height: 100%;"+
        "overflow-x: scroll;"+
        "position: relative;"+
        "width: 100%;"+
        "z-index: 0;}}"+
        "article{{column-fill: auto;column-gap: 80px;column-width: 500px; column-height:100%; height:630px;"+
        "}}"+
        "img,p.object,iframe {{ max-width:100%; height:auto }}"));
        head.Append(string.Format("a {{color:blue}}"));
        head.Append("</style>");

        // head.Append(NotifyScript);
        head.Append("</head>");
        return head.ToString();
    }
    public static string WrapHtml(string htmlSubString, double viewportWidth, double height)
    {
        var html = new StringBuilder();
        html.Append("<html>");
        html.Append(HtmlHeader(viewportWidth,height));
        html.Append("<body><article class=\"content\">");
        html.Append(htmlSubString);
        html.Append("</article></body>");
        html.Append("</html>");
        return html.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:54:12.620

您显然不能样式/扩展 webview，Webview 不是控件子类的派生（它没有控件模板），而是托管在它自己的 HWND 中。您可能最好使用 webviewbrush。请参阅[此示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-24T04:04:51.893

你可以这样设计

```
 public static string Scape(string htmlContent, string fontColor)
        {
            var htm = "<html>  <head>    <script type=\"text/javascript\"></script>    <style>      body {        color: "+ fontColor +";      }    </style>  </head>  <body>" + htmlContent +"</body></html>";
            return htm;
        } 
```

# r - 基于R中的不同值合并数据帧

> ID：13694263
> 
> 赞同：3
> 
> 时间：2012-12-04T00:34:05.150
> 
> 标签：r, merge

我有两个数据框。第一个看起来像

```
dat <- data.frame(matrix(nrow=2,ncol=3))
names(dat) <- c("Locus", "Pos", "NVAR")
dat[1,] <- c("ACTC1-001_1",   "chr15:35087734..35087734", "1" )
dat[2,] <- c("ACTC1-001_2 ",  "chr15:35086890..35086919", "2") 
```

其中 chr15:35086890..35086919 表示此范围内的所有数字。

第二个看起来像：

```
dat2 <- data.frame(matrix(nrow=2,ncol=3))
names(dat2) <- c("VAR","REF.ALT","     FUNC")
dat2[1,] <- c("chr1:116242719",   "T/A", "intergenic" )
dat2[2,] <- c("chr1:116242855",  "A/G", "intergenic") 
```

我想通过 dat$Pos 和 dat2$VAR 中的值合并这些。如果 dat2$VAR 中的单元格中的单个数字包含在 dat$Pos 中的单元格范围内，我想合并这些行。如果这种情况不止一次发生（dat2$VAR 在 dat$Pos 的多个范围内，我希望它每次都合并）。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:03:31.383

请尝试一下，让我们知道它是如何工作的。如果没有更大的数据集，很难解决问题。如果由于某种原因它不起作用，请从您的数据表中再分享几行（特别是匹配的行）

### 拼接数据

```
range.strings <- do.call(rbind, strsplit(dat$Pos, ":"))[, 2]
range.strings <- do.call(rbind, strsplit(range.strings, "\\.\\."))

mins <- as.numeric(range.strings[,1])
maxs <- as.numeric(range.strings[,2])

d2.vars <- as.numeric(do.call(rbind, str_split(dat2$VAR, ":"))[,2])
names(d2.vars) <- seq(d2.vars) 
```

### 查找匹配项

```
# row numebr is the row in dat
# col number is the row in dat2 
matches <- sapply(d2.vars, function(v)  mins < v & v <= maxs) 
```

### 合并

```
# create a column in dat to merge-by
dat <- cbind(dat, VAR=NA)

# use the VAR in dat2 as the merge id
sapply(seq(ncol(matches)), function(i)
    dat$VAR <- dat2[i, "VAR"] )

merge(dat, dat2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:53:41.720

这是一个解决方案，很短但不是特别有效，因此我不建议将其用于大数据。但是，您似乎表明您的数据不是那么大，所以请尝试一下并告诉我：

```
library(plyr)

exploded.dat <- adply(dat, 1, function(x){
    parts <- strsplit(x$Pos, ":")[[1]]
    chr   <- parts[1]
    range <- strsplit(parts[2], "..", fixed = TRUE)[[1]]
    start <- range[1]
    end   <- range[2]
    data.frame(VAR = paste(chr, seq(from = start, to = end), sep = ":"), x)
})

merge(dat2, exploded.dat, by = "VAR") 
```

如果它太慢或使用太多内存来满足您的需求，您将不得不实现一些更复杂的东西，而另一个问题看起来是一个很好的起点：[Merge by Range in R - Applying Loops](https://stackoverflow.com/questions/11892241/merge-by-range-in-r-applying-loops)。

# php - 从字符串中获取 id

> ID：13694264
> 
> 赞同：1
> 
> 时间：2012-12-04T00:34:11.867
> 
> 标签：php, regex

我有以下字符串，其内容会有所不同，但结构将始终相同

```
Tree_Group&lang=&discussionID=1012&t=viewDiscussion 
```

如何从中提取讨论ID？无论多长或短

例如 6745

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:38:20.870

`preg_match('/discussionID=([^&]+)/', $your_string, $matches);`

`$matches[1]`应包含您的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:43:23.900

您可以使用[parse_str](http://php.net/manual/en/function.parse-str.php)提取它：

```
// strip out "Tree_Group&"
$str = str_replace("Tree_Group&", "", "Tree_Group&lang=&discussionID=1012&t=viewDiscussion");

// parse string as if it we a url query string (putting results into output)
parse_str($str, $output);

// get discussionID
$discussionID = $output["discussionID"]; 
```

# html - 修改选择所以只有第一个是灰色的

> ID：13694271
> 
> 赞同：50
> 
> 时间：2012-12-04T00:34:42.190
> 
> 标签：html, css

我有一个`select`元素，并使用第一个元素`option`作为选择字段的标题。我想知道`select`选择第一个选项时是否有一种方法可以灰色字段内的文本。这只能在JS中完成，还是有CSS解决方案？

我尝试更改第一个样式，`option`但仅在激活下拉菜单时更改文本的颜色。

```
<select>
  <option>Please select your favourite fruit</option>
  <option>Apple</option>
  <option>Banana</option>
</select> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2017-01-30T16:42:05.627

这是一个更现代的解决方案，因此它不是特定于第一个选项，而是一个*无效*选项，并且不需要 JS 仅将标题/占位符选项显示为灰色，而其余选项则显示为正常。

```
select,
select option {
  color: #000000;
}

select:invalid,
select option[value=""] {
  color: #999999;
}

label {
  display: block;
  margin: 16px 0;
}

/*Added for browser compatibility*/
[hidden] {
  display: none;
}
```

```
<label>
    Invalid option cannot be selected and is hidden from the user in the dropdown.
    <select required>
      <option value="" selected disabled hidden>Please select your favourite fruit</option>
      <option>Apple</option>
      <option>Banana</option>
    </select>
</label>

<label>
    Invalid option cannot be selected, but is not hidden from the user in the dropdown.
    <select required>
      <option value="" selected disabled>Please select your favourite fruit</option>
      <option>Apple</option>
      <option>Banana</option>
    </select>
</label>

<label>
    Invalid option can be selected and is not hidden from the user in the dropdown.
    <select required>
      <option value="" selected>Please select your favourite fruit</option>
      <option>Apple</option>
      <option>Banana</option>
    </select>
</label>
```

选择上的 :invalid 选择器仅适用于需要选择框的选项，并且所选选项的值为空，因此您可以像设置文本框的占位符文本一样设置它的样式。

将其设置为禁用会阻止用户在选择选项中选择它，并将其设置为隐藏会在选择选项中隐藏它。

这是我的[CodePen 演示](http://codepen.io/TessaWatkins/pen/bwymaY)，它探索了其他选择框样式，并在浅色背景上展示了这个样式。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-04T17:10:08.060

## 2017年9月编辑

您应该看看[下面的 Tessa 的答案](https://stackoverflow.com/a/41941056/1087846)，因为它只是 CSS，而且现在好多了！这个答案现在已经快 5 岁了，所以情况发生了一些变化。我保留原始答案仅供参考。

## 原始答案

我更接近你需要的东西：

您需要将整个 SELECT 变灰（这样当它关闭时，它是灰色的），然后“取消灰色”所有 OPTION（将它们设为黑色）并将第一个孩子变灰。像这样的东西：

**CSS**

```
select
{
    color: #ccc;
}
option
{
    color: #000;
}
option:first-child
{
    color: #ccc;
} 
```

***编辑*** *所以编辑的代码是：*

**HTML**

```
<select onchange="changeMe(this)">
  <option selected disabled>Please select your favourite fruit</option>
  <option>Apple</option>
  <option>Banana</option>
</select> 
```

**Javascript**

```
<script type="text/javascript">
    function changeMe(sel)
    {
      sel.style.color = "#000";              
    }
</script> 
```

我已经更新了 jsFiddle。你可以在这里查看：http: [//jsfiddle.net/s5Xy2/5/](http://jsfiddle.net/s5Xy2/5/) ​</p>

请注意，我还更改了 HTML 部分，因为我认为您想使用“禁用”属性（因此，您还必须添加“选定”属性）。

如果你仍然想要纯 CSS 代码，这里是：http: [//jsfiddle.net/s5Xy2/4/](http://jsfiddle.net/s5Xy2/4/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-13T14:17:12.260

**灵感来自 Fábio Silva 的解决方案，这是一个使用AngularJS**的非常酷的解决方案：

```
select {
  color: #ccc;
}
option {
  color: #aaa;
}
option:first-child {
  color: #ccc;
}
select.ng-dirty {
  color: #aaa;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T00:51:51.643

您可以将您的代码编辑为我的代码：

```
<select id="drop">
  <option>Please select your favourite fruit</option>
  <option>Apple</option>
  <option>Banana</option>
</select>
<style type="text/css">
#drop :first-child
{
color:gray;
}
</style> 
```

此代码设置第一项颜色为灰色。

我希望能帮助你...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T05:36:48.083

这是我的 2018 版本，它结合了其他一些答案和一些我自己的 js。如果您希望第一个元素在关闭时变为灰色，那么似乎没有一个可以在没有 javascript 的情况下工作的解决方案。

```
var grayout = document.getElementsByClassName('grayout');

var grayOutSelect = function() {
    if ( this.value === "" ) {
        this.classList.add('gray');
    } else {
        this.classList.remove('gray');
    }
};

for (var i = 0; i < grayout.length; i++) {
    grayout[i].addEventListener('change', grayOutSelect);
    if ( grayout[i].value === "" ) {
        grayout[i].classList.add('gray');
    } else {
        grayout[i].classList.remove('gray');
    }
}
```

```
select {
  color: #333;
}
select.gray {
  color: #aaa;
}

/* Optional styles for when the select is open. Doesn't work on all browsers */
option {
  color: black;
}
.grayout option:first-child {
  color: gray;
}

/* Extra / just to make the demo look nice */
body {
  background: #ddd;
  padding: 30px;
  font-size: 20px;
}
select {
  margin: 0;
  vertical-align: top;
  padding: 5px 60px 5px 8px;
  background-color: #fff;
  background-image: url('https://upload.wikimedia.org/wikipedia/commons/4/4b/Feather-arrows-chevron-down.svg');
  background-position: 97% center;
  background-position: right 8px center;
  background-repeat: no-repeat;
  background-size: 18px;
  border: 2px solid #999;
  border-radius: 3px;
  -webkit-appearance: button;
  -webkit-border-radius: 3px;
  -webkit-padding-end: 30px;
  -webkit-padding-start: 8px;
  -webkit-user-select: none;
  -moz-appearance: none;
  font-size: inherit;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  transition: border 300ms;
}
```

```
<p>main example</p>
<p>
  <select class="grayout">
    <option value="">Please select your favourite fruit</option>
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
  </select>
</p>
<p>one of the real options is selected</p>
<p>
  <select class="grayout">
    <option value="">Please select your favourite computer</option>
    <option value="apple" selected>Apple</option>
    <option value="c64">Commodore 64</option>
    <option value="gateway2000">Gateway 2000</option>
  </select>
</p>
<p>the grayout style is not applied here</p>
<p>
  <select>
    <option value="">Please select your favourite insult</option>
    <option value="jerk">Jerk</option>
    <option value="ahole">A**hole</option>
    <option value="shakespeare">Thou damned and luxurious mountain goat</option>
  </select>
</p>
```

# leaflet - 如何将 Leaflet 与 Mapbox 模板一起使用？

> ID：13694276
> 
> 赞同：0
> 
> 时间：2012-12-04T00:35:00.453
> 
> 标签：leaflet, mapbox

我正在使用 Mapbox 模板：DC Properties 我正在调用 3 个图块，包括基本图块。

我还有另一块标记，但我想将其更改为 Leaflet 数据集和聚类。

无法将 Leaflet 地图和标记调用集成到下面的 Mapbox 代码中：

```
 <script type="text/javascript">

    var main = Map('map', {
        api: 'http://a.tiles.mapbox.com/v3/test.map-j9pcd8xs.jsonp',

        center: {
            lat: 40.593000,      
            lon: -73.743126406355,      
            zoom: 10                   
        },
        zoomRange: [8, 15],             
        features: [                  
            'zoomwheel',
            'tooltips',
            'movetips',  
            'zoombox',
            'zoompan',
            'share'
        ]
    });

    main.layers({
        income: {api: 'http://a.tiles.mapbox.com/v3/test.incomedec3.jsonp',
              center: {                   
                ease: 500               
            }                         
        }, 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:47:11.390

> 我还有另一块标记，但我想将其更改为 Leaflet 数据集和聚类。

该示例是使用 Modest Maps 构建的，您需要重写它以使用 Leaflet。

# jquery - 使用箭头键滚动到下一个 div

> ID：13694277
> 
> 赞同：0
> 
> 时间：2012-12-04T00:35:15.313
> 
> 标签：jquery

我希望我的左/右箭头转到下一个/上一个`.embedded_post`div。问题是它只能工作一次，我只能在第一个和第二个 div 之间滚动。我认为这是 -100 的偏移量，但删除偏移量并没有解决问题。我在想，在我动画到下一个 div 之后，jQuery 选择器没有移动到任何地方，所以我被卡住了。

```
jQuery(document).keydown(function(e){
    switch(e.which) {
        case 37: // left
            jQuery('html, body').animate({scrollTop:jQuery('.embedded_post').prev().offset().top - 100}, 500);          
            return;
        break;

        case 38: // up
        break;

        case 39: // right
            var next_embed = jQuery('.embedded_post').next();
            jQuery('html, body').animate({scrollTop:next_embed.offset().top - 100}, 500);
            return;
        break;

        case 40: //down
        break;

        default: return; // exit this handler for other keys
    }
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:45:21.473

`.offset()`如果选择器返回多个元素，则只会返回列表第一个元素的位置。`.current`尝试向您当前关注的元素添加/删除一个类并获取下一个/上一个：

```
jQuery('.embedded_post:eq(0)').addClass('current');

jQuery(document).keydown(function(e){
    switch(e.which) {
        case 37: // left
            var $current = jQuery('.embedded_post.current'),
                $prev_embed = $current.prev();
            jQuery('html, body').animate({scrollTop:$prev_embed.offset().top - 100}, 500);
            $current.removeClass('current');
            $prev_embed.addClass('current');
            return;
        break;

        case 38: // up
        break;

        case 39: // right
            var $current = jQuery('.embedded_post.current'),
                $next_embed = $current.next();
            jQuery('html, body').animate({scrollTop:$next_embed.offset().top - 100}, 500);
            $current.removeClass('current');
            $next_embed.addClass('current');
            return;
        break;

        case 40: //down
        break;

        default: return; // exit this handler for other keys
    }
    e.preventDefault();
}); 
```

# build - TFS Build随机不会运行

> ID：13694278
> 
> 赞同：0
> 
> 时间：2012-12-04T00:35:18.490
> 
> 标签：build, tfs, msbuild

我们有一个 TFS 2010 构建服务器。根据 VS sln 或 msbuild 文件的构建定义运行队列构建后，随机（大约 30%）构建过程不会运行。构建日志窗口仅显示 3 个选项卡：活动日志、下一个错误和下一个警告。几分钟后，比如 10 分钟，我不得不按下停止构建。构建服务器根本不忙。

你见过/听说过类似的事情吗？你能帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:24:00.873

你能不能试试让他跑到超时为止。从您的评论看来，当您停止构建时，他正在执行 Get Workspace。请检查为您的构建定义定义的工作区。我有一个项目团队在那里创建了自己的构建，并想知道为什么构建需要这么长时间，不幸的是，它包括了整个 TeamProject（大约 6GB），每次构建排队时都会得到这些。

虽然它是随机工作的，但它取决于所使用的构建代理还是您只有一个构建代理？

# asp.net - 从外部更改连接字符串密码

> ID：13694281
> 
> 赞同：0
> 
> 时间：2012-12-04T00:35:26.187
> 
> 标签：asp.net, web-config, connection-string

出于各种原因和最佳实践，ASP.NET 网站应将连接字符串存储在 web.config 文件中。今天我的经理问我“我们可以将数据库用户名和密码存储在 web.config 文件顶部的另一个位置吗？如果这样做了，那么更改 SQL id/密码会更容易，而无需开发人员每次都在生产环境中更改它”。

我想问专家同样的问题 - 是否可以从另一个地方而不是 web.config 检索 SQL 连接字符串 ID/密码？我知道最好的做法是将它存储到 web.config 但我只是好奇它是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:41:42.477

当然，您几乎可以从任何可通过代码访问的内容中读取用户名/密码（如果我正确理解您的问题）。

**你看过[Web Config Transformations](http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-web-config-file-transformations-3-of-12)吗？**

# sencha-touch - 在 Sencha Touch 2 的商店中使用代理

> ID：13694282
> 
> 赞同：0
> 
> 时间：2012-12-04T00:35:32.750
> 
> 标签：sencha-touch, sencha-touch-2

我对这个项目的目标是加载由 Web 服务器上的脚本输出的 Json，以便我可以在 Sencha Touch 2 的列表中显示数据。

我查看了无数示例，包括该网站上其他人问题的答案，但我似乎仍然无法弄清楚我的代码有什么问题。我确定这是非常小的事情，或者可能是我不知道的一些规则，但我希望有人能指出我正确的方向。

这是我的模型：

```
Ext.define('Sencha.model.Location', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['name','location','open','details']
    }
}); 
```

这是我的商店：

```
Ext.define('Sencha.store.Locations',{
    extend: 'Ext.data.Store',
    requires:[
        'Sencha.model.Location',
    ],
    config: {
        model: 'Sencha.model.Location',
        storeId: 'Locations',
        proxy: {
      type: 'ajax',
      url : 'http://url/to/locations.php?filetype=.json',
      reader: {
        type: 'json',
      },
      autoLoad: 'true'
    }
    }
}); 
```

这是我希望它显示的视图：

```
Ext.define('Sencha.view.LocationList',{
    extend: 'Ext.List',
    alias: 'widget.LocationList',
    xtype: 'locationlist',
    config: {
        title: 'What\'s Open @CU',
        disableSelection: true,
        itemTpl: '<img src="http://localhost/{open}.png" style="width:16px;height:16px;margin-right:8px;" />{name}<span style="font-size:9pt;margin-left:8px;color:#888;">{location}</span>',
        store: 'Locations',
        onItemDisclosure: true
    }
}); 
```

这是输出的 JSON（可能是格式问题导致它静默失败？）

```
{
"businesses":
    {
    "name" : "Baker's"
    "location" : "4th Floor Uni Centre"
    "open" : "open"
    "details" : "This is some information."
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:29:47.157

您的 JSON 无效。你忘记了逗号：

```
{
"businesses":
    {
    "name" : "Baker's",
    "location" : "4th Foor Uni Centre",
    "open" : "open",
    "details" : "This is some information."
    }
} 
```

此外，如果您打算发送多个业务，则可能需要将 JSON 格式更改为如下所示：

```
{
"businesses":[
    {
    "name" : "Baker's",
    "location" : "4th Foor Uni Centre",
    "open" : "open",
    "details" : "This is some information."
    },
    {
    "name" : "Baker's",
    "location" : "4th Foor Uni Centre",
    "open" : "open",
    "details" : "This is some information."
    }
    ...
]
} 
```

然后`rootProperty: 'businesses'`像 nuthan 说的那样添加到你是代理的读者。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:12:34.060

添加 `rootProperty:'businesses'`在`reader: { type: 'json', rootProperty:'businesses' }`您的商店中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:07:13.313

是

```
http://url/to/locations.php 
```

与您的煎茶触摸应用程序相同的位置？如果没有，则需要 JsonP 代理。JsonP 将 Json 数据包装到类似上下文的函数中以使其可用。

# android - 在 Android 浏览器中仅使用 HTML 和 CSS 的上拉工具栏

> ID：13694283
> 
> 赞同：6
> 
> 时间：2012-12-04T00:35:35.310
> 
> 标签：android, html, overflow, z-index, android-browser

我的移动网络应用程序底部有一个工具栏。我希望能够上下拖动这个工具栏，显示它下面的内容。我希望能够简单地通过使用 HTML/CSS 来做到这一点，而不必使用触摸/滚动事件或移动触摸/滚动库。

我试图通过在主 webapp 顶部覆盖一个滚动元素，并在底部使用工具栏及其内容来做到这一点。我给这个元素一个低于`z-index`主要内容的值，这样它就不会阻止用户与主要内容交互，并且给工具栏和它的内容一个更高的值`z-index`，以便可以看到和拉/向上滚动。

[我创建了一个 jsFiddle](http://jsfiddle.net/N2DxF/)，它在桌面版和 Android 版 Chrome 中都具有正确的行为。我可以用手指向上拖动工具栏，也可以用光标在其上方滚动：

![](../Images/f7e3854d28bbc20997c98dde5afd70ec.png) ![](../Images/89d60c18b50cb4371b6068ad309c0bbf.png)

不幸的是，工具栏没有出现在 Android 浏览器中（在 4.1 和 4.2 上测试过）。

![](../Images/aac5110a1d0b78e15f7a0785a9936f91.png)

但是，当我按下工具栏应该在的位置并向上拖动时，它不会滚动页面，直到我将手指移动到足够远以将工具栏一直向上滚动（如果它是可见的）。这是滚动工具栏在 Chrome 中的工作方式，表明工具栏在 Android 浏览器中正确滚动。它只是不可见。

```
<div id="main-content"></div>
<div id="scroller">
    <div id="wrapper">
        <div id="toolbar-and-content">
            <div id="toolbar">Toolbar</div>
            <div id="toolbar-content">Toolbar content</div>
        </div>
    </div>
</div> 
```

```
#main-content {
    position:relative;
    width:100%;
    height:300px;
    background-color:green;
    z-index:1;
}
#scroller {
    position:absolute;
    top:0;
    width:100%;
    height:300px;
    overflow:auto;
}
#wrapper {
    position:relative;
    width:100%;
    height:500px;
}
#toolbar-and-content {
    position:absolute;
    bottom:0;
    width:100%;
    height:250px;
    z-index:2;
}
#toolbar {
    width:100%;
    height:49px;
    border-bottom:1px solid black;
    background-color:red;
}
#toolbar-content {
    width:100%;
    height:200px;
    background-color:orange;
} 
```

我认为它在 Android 浏览器上不起作用，因为它决定忽略工具栏的 Higher `z-index`，因为它位于具有 lower 的元素中`z-index`。

无论哪种方式，有谁知道我可以如何更改它以便它可以在 Android 浏览器上运行，和/或是否有其他布局方案可以用来仅通过 HTML/CSS 来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:40:30.810

我在模拟器中测试了您的示例，尝试添加：

```
z-index: 2; 
```

到你的#scroller：

```
#scroller {
    position:absolute;
    top:0;
    width:100%;
    height:300px;
    overflow:auto;
    z-index: 2; // NEW
} 
```

对我来说工作得很好

为什么在#main-content 上需要 z-index？如果您可以跳过它，那么即使在#scroller 上没有额外的 z-index 也可以工作。

# android - 修复 Eclipse logcat 中的“向上滚动”错误？

> ID：13694284
> 
> 赞同：3
> 
> 时间：2012-12-04T00:35:36.093
> 
> 标签：android, eclipse, logcat

我想知道您是否有办法在 Eclipse 上使用 Logcat 修复滚动故障。每当我尝试向上滚动时，屏幕会向上移动一秒钟然后回到底部。

这真的很烦人，因此我无法解决我的一些错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:42:59.170

您应该使用 Scroll Lock 按钮。

![滚动锁定按钮](../Images/45b7509b16f60358bd245960393e06e0.png)

此外，请考虑使用相应的[LogCat 过滤器](https://stackoverflow.com/questions/4044132/filter-tags-in-logcat-in-android-eclipse-plug-in)，以便仅显示您感兴趣的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T20:06:01.273

我经历过这是一个错误。取消选择滚动锁定按钮在 99% 的情况下都不起作用。一旦您尝试滚动窗口（使用鼠标滚轮或单击滚动条上/下箭头），滚动锁定就会重新打开。

解决方案：

我找到了一种解决方法，取消选择滚动锁定后，单击一条消息，然后按一次键盘上的向上翻页键，这将完全释放锁定。您现在可以使用鼠标滚轮和滚动条箭头滚动。这适用于 Windows 7。

# php - HTML a 标签导致宽空格

> ID：13694287
> 
> 赞同：0
> 
> 时间：2012-12-04T00:36:28.163
> 
> 标签：php, html, css

我在 PHP 中有一个句子，我使用explode 将其分解为单词组件。

```
foreach ($words as $splitword)
{
    echo $splitword;
    /* echo "<a href = 'word.php?word=" . $splitword . "'>" . $splitword . "</a>"; */
    echo " ";
} 
```

我想要做的是让每个单词都可以点击，所以我回显每个单词后跟一个空格。现在，使用您在上面看到的代码，一切看起来都很好而且很自然。但是，如果我取消注释注释行，并注释掉`echo $splitword;`，以便我现在回显链接而不仅仅是单词，事情会变得丑陋：

1.  `echo " "`不再工作，我必须使用`echo "&nbsp"`
2.  空间非常大。呼应每个单词而不使其成为链接会产生自然间距，这是应该的方式。但是当我开始使用`a`后跟的标签时`&nbsp`，空格的宽度大约是原来的两倍。

知道为什么，什么是解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:25:25.570

`echo " "`不起作用，因为您正在编写不解析“”的 HTML。你必须`&nbsp;`像你已经发现的那样使用。

额外的间距可能是您的样式。检查你的 CSS。如果您仍然没有发现任何奇怪的东西，请将其添加到您的 CSS 中：

```
a { 
  margin: 0; 
  padding: 0;
} 
```

# sql - 查询按日期范围分隔的行数

> ID：13694288
> 
> 赞同：2
> 
> 时间：2012-12-04T00:36:37.000
> 
> 标签：sql, postgresql, crosstab, postgresql-9.2

我有一个 PostgreSQL 9.2.1 数据库，我正在尝试编写 SQL 查询但未能成功，该查询将向我显示失败的不同测试 ( `testname`) 的计数（`current_status='FAILED'`如果没有失败则显示 0），按月分隔( `last_update`)。这是表定义：

```
 Table "public.tests"
     Column     |            Type             |                          Modifiers                          
----------------+-----------------------------+-------------------------------------------------------------
 id             | bigint                      | not null default nextval('tests_id_seq'::regclass)
 testname       | text                        | not null
 last_update    | timestamp without time zone | not null default now()
 current_status | text                        | not null 
```

我想从中得到的是这样的：

```
 testname    | Jan2012  | Feb2012  | Mar2012  | Apr2012  | May2012   | Jun2012   | Jul2012   | Aug2012   | Sep2012   | Oct2012   | Nov2012   | Dec2012
-------------+-----------------------------------------------------------------------------------------------------------------------------------------
 abq         |   2      |   5      |   2      |   0      |   7       |  4        |   8       |   0       |     6     |   15      |  1        |  0
 bar         |   0      |   0      |   2      |   0      |   9       |  8        |   8       |   2       |     6     |   15      |  1        |  1
 cho         |   15     |   1      |   2      |   3      |   4       |  8        |   7       |   3       |     6     |   1       |  5        |  6 
```

在这一点上，我能想到的最好的方法是以下，诚然不是很接近：

```
SELECT testname, count(current_status) AS failure_count
FROM tests
WHERE current_status='FAILED'
AND last_update>'2012-09-01'
AND last_update<='2012-09-30'
GROUP by testname
ORDER BY testname ; 
```

我想我需要以某种方式`COALESCE`获取`0`值以显示在结果中，加上一些疯狂的 JOIN 来显示多个月的结果，甚至可能是一个窗口函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:19:49.750

## `crosstab()`有两个参数的函数。

应该像这样工作，以获得 2012 年的值：

```
SELECT * FROM crosstab(
     $$SELECT testname, to_char(last_update, 'mon_YYYY'), count(*)::int AS ct
        FROM   tests
        WHERE  current_status = 'FAILED'
        AND    last_update >= '2012-01-01 0:0'
        AND    last_update <  '2013-01-01 0:0'  -- proper date range!
        GROUP  BY 1,2
        ORDER  BY 1,2$$

    ,$$VALUES
      ('jan_2012'::text), ('feb_2012'), ('mar_2012')
    , ('apr_2012'), ('may_2012'), ('jun_2012')
    , ('jul_2012'), ('aug_2012'), ('sep_2012')
    , ('oct_2012'), ('nov_2012'), ('dec_2012')$$)
AS ct (testname  text
   , jan_2012 int, feb_2012 int, mar_2012 int
   , apr_2012 int, may_2012 int, jun_2012 int
   , jul_2012 int, aug_2012 int, sep_2012 int
   , oct_2012 int, nov_2012 int, dec_2012 int); 
```

[**在这个相关问题下找到详细解释。**](https://stackoverflow.com/q/3002499/939860)

~~我没有测试。~~正如@Craig 评论的那样，样本值会有所帮助。
现在用我自己的测试用例进行了测试。

## 不显示 NULL 值

`crosstab()`具有两个参数的函数避免了主要问题（根本不会出现没有行的月份） 。

您不能`COALESCE`在内部查询中使用，因为这些`NULL`值是`crosstab()`自行插入的。你可以 ...

### 1.将整个事情包装成一个子查询：

```
SELECT testname
      ,COALESCE(jan_2012, 0) AS jan_2012
      ,COALESCE(feb_2012, 0) AS feb_2012
      ,COALESCE(mar_2012, 0) AS mar_2012
      , ...
FROM (
    -- query from above)
    ) x; 
```

### 2.`LEFT JOIN`主查询到月的完整列表。

在这种情况下，根据定义，您不需要第二个参数。
对于更大的范围，您可以使用它`generate_series()`来创建值。

```
SELECT * FROM crosstab(
     $$SELECT t.testname, m.mon, count(x.testname)::int AS ct
       FROM  (
          VALUES
           ('jan_2012'::text), ('feb_2012'), ('mar_2012')
          ,('apr_2012'), ('may_2012'), ('jun_2012')
          ,('jul_2012'), ('aug_2012'), ('sep_2012')
          ,('oct_2012'), ('nov_2012'), ('dec_2012')
       ) m(mon)
       CROSS JOIN (SELECT DISTINCT testname FROM tests) t
       LEFT JOIN (
          SELECT testname
                ,to_char(last_update, 'mon_YYYY') AS mon
          FROM   tests
          WHERE  current_status = 'FAILED'
          AND    last_update >= '2012-01-01 0:0'
          AND    last_update <  '2013-01-01 0:0'  -- proper date range!
          ) x USING (mon)
       GROUP  BY 1,2
       ORDER  BY 1,2$$
     )
AS ct (testname  text
   , jan_2012 int, feb_2012 int, mar_2012 int
   , apr_2012 int, may_2012 int, jun_2012 int
   , jul_2012 int, aug_2012 int, sep_2012 int
   , oct_2012 int, nov_2012 int, dec_2012 int); 
```

## 带有样本数据的测试用例

这是一个测试用例，其中包含 OP 未能提供的一些示例数据。我用它来测试它并使其工作。

```
CREATE TEMP TABLE tests (
  id             bigserial PRIMARY KEY
 ,testname       text NOT NULL
 ,last_update    timestamp without time zone NOT NULL DEFAULT now()
 ,current_status text NOT NULL
 );

INSERT INTO tests (testname, last_update, current_status)
VALUES
  ('foo', '2012-12-05 21:01', 'FAILED')
 ,('foo', '2012-12-05 21:01', 'FAILED')
 ,('foo', '2012-11-05 21:01', 'FAILED')
 ,('bar', '2012-02-05 21:01', 'FAILED')
 ,('bar', '2012-02-05 21:01', 'FAILED')
 ,('bar', '2012-03-05 21:01', 'FAILED')
 ,('bar', '2012-04-05 21:01', 'FAILED')
 ,('bar', '2012-05-05 21:01', 'FAILED'); 
```

# c++ - 使单个指针指向一个指针数组并同时传递给 C++

> ID：13694289
> 
> 赞同：-1
> 
> 时间：2012-12-04T00:36:42.303
> 
> 标签：c++, pointers, memory-management

我有一个这样的结构：

```
struct foo
{
    IBar* ptr;
}; 
```

它是具有较长生命周期的 foo 对象的一部分。用户经常在不同的回调中获取这些对象的实例，有时他们在某些地方将东西注入 IBar*，在以后的回调中使用它，最终释放它。（IBar`virtual void free() { delete this; }`当然可以被覆盖）。

问题是我想将我的用户转换为每个 foo 结构拥有多个的可能性，`IBar*`并且我想让转换顺利进行。使过渡平滑的一个想法是更改 foo 结构如下：

```
struct foo
{
    foo()
    {
        ptr = reinterpret_cast<IBar*>(new IBar*[N]);
        memset(ptr, 0, sizeof(IBar*)*N);
    }

    IBar*& getBarPtr(size_t offset)
    {
        return reinterpret_cast<IBar**>(ptr)[offset];
    }

    IBar* ptr;
}; 
```

我的想法是，通过这种方式，任何使用旧样式的人都应该以通常的使用方式`IBar*`回退到透明地使用第一个：`N`

```
someFoo.ptr = new iImplementIBar(...); 
```

但是那些开始过渡到新用途的用户可以获得他们的抵消，而不是

```
someFoo.getBarPtr(myOffset) = new iImplementIBar(...); 
```

但是，问题在于它`foo`有一种`reset`方法可以做到这一点：

```
void reset() {
    if (ptr)
    {
        ptr->free();
        ptr = 0;
    }
} 
```

这个想法用这个代替：

```
void reset() {
    IBar** ptrs = reinterpret_cast<IBar*>(ptr);
    for (size_t i = 0; i < N; ++i)
         if (ptrs[i])
        {
            ptrs[i]->free();
            ptrs[i] = 0;
        }
} 
```

并且`free`上面的功能似乎丢失了。有没有办法使这项工作？或者出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:48:57.943

如果您*确实*必须在不实现较新接口的情况下执行此操作，那么为什么不使用这样的东西：

```
struct foo
{
    IBar **bars; // or better yet: std::array or std::vector if size of N is fixed.
    IBar *ptr;

    IBar *getBar(int index)
    {
        ...
    }

    ...
}; 
```

这样，现有 'foo' 界面的用户可以继续使用`ptr`，但新`bars`界面也可供希望使用它的人使用。

如果不知道更多，很难知道上述设计是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:18:46.703

在不推荐使用这种复杂的手动生命周期管理设计的情况下，可以构建一个虚拟 IBar，将其转发到集合中的第一个 IBar，同时释放整个集合。

```
#include <iostream>
#include <new>

// existing:
struct IBar
{
    virtual void method() =0;
    virtual void free() =0;
};

struct Bar : public IBar
{
    virtual void method() { }
    virtual void free() { delete this; }
};

struct foo
{
    virtual void reset() { if (ptr) {ptr->free();}}
    IBar* ptr;
};

// proposed:
struct fooset;

struct foosetwrap : public IBar
{
    virtual void method();
    virtual void free();
    fooset* ptrOwner;
};

struct fooset : public foo
{
    fooset(IBar** begin, IBar** end) : ptrBegin(begin) , ptrEnd(end) 
        { wrapper.ptrOwner = this; ptr = &wrapper; }
    IBar** begin(){return ptrBegin;}
    IBar** end(){return ptrEnd;}
    virtual void reset() {for(auto& expired : *this) { if (!!expired) { expired->free(); }}}
private:
    foosetwrap wrapper;
    IBar** ptrBegin;
    IBar** ptrEnd;
};

void foosetwrap::method() { (*(ptrOwner->begin()))->method(); }
void foosetwrap::free() { ptrOwner->reset(); }

int wmain(int argc, wchar_t* argv[])
{
    IBar* bars[]={new(std::nothrow) Bar(),new(std::nothrow) Bar()};

    fooset set(std::begin(bars), std::end(bars));
    set.ptr->method();
    set.ptr->free();
    return 0;
} 
```

# windows-8 - Windows 8“devcon -remove”问题

> ID：13694292
> 
> 赞同：1
> 
> 时间：2012-12-04T00:37:12.763
> 
> 标签：windows-8, device-driver

运行带有 2 个显卡 AMD/ATI 6870 + 4870 的 Windows 8。Windows 8 似乎随机禁用了 48XX 卡，我无法在事件查看器中看到。我的解决方法是在 devmgmt.msc 中卸载并重新扫描硬件更改。它会自动安装并在几天后正常工作。

问题是如何使用 devcon 自动化该过程。试...

```
C:\Batch>devcon.exe listclass display

Listing 2 device(s) for setup class "Display" (Display adapters).
PCI\VEN_1002&DEV_6738&SUBSYS_E177174B&REV_00\4&1DCBFDE5&0&0010: AMD Radeon HD 6800 Series (Microsoft Corporation - WDDM v1.20)
PCI\VEN_1002&DEV_9442&SUBSYS_E810174B&REV_00\4&24DEEBC4&0&0018: ATI Radeon HD 4800 Series (Microsoft Corporation - WDDM v1.1)

C:\Batch>devcon.exe remove =display *HD 4800*

No devices removed. 
```

不移除适配器。不知道我缺少什么才能让它工作。我不太使用 devcon，只是想制作一批来加速这个“修复”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:06:18.060

您不能使用适配器名称作为`devcon`.

例如，使用设备 id: `devcon.exe remove =display *DEV_9442*`。

# mysql - 遍历MYSQL数据库并替换一列中每条记录的数据

> ID：13694299
> 
> 赞同：0
> 
> 时间：2012-12-04T00:38:14.307
> 
> 标签：mysql, loops

在清除所有非数字后，我有一种非常低效的方法来更新数据库中的电话号码。

```
$san_phone = mysql_query('SELECT * FROM table');

while ($row = mysql_fetch_array($san_phone)) {
    $row['phone_clean'] = preg_replace('#[^\d]#', '', $row['phone']);
    echo $row['id'] . ' - ' . $row['phone_clean'] . '<br>';

    mysql_query("UPDATE table SET phone = " . $row['phone_clean']  . " WHERE id = " . $row['id']);
} 
```

循环的更新部分导致我在 2,400 条记录中只有大约 400 条后超时。很明显我做错了什么，所以在教育我时要温柔。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:47:44.023

首先，停止使用`mysql_`函数，因为它们已[被弃用](http://www.deprecatedphp.com/mysql)。改用`mysqli_`or`PDO`函数。

您用于`UPDATE`记录的方法效率低下。您应该改为创建一个临时表，`INSERT`在单个查询中创建新记录，最后运行`UPDATE`查询来替换数据。

你可以从这个开始：

```
$san_phone = mysql_query('SELECT id, phone FROM table');
$insertArray = array();

while ($row = mysql_fetch_array($san_phone)) {
    $phone_clean = preg_replace('#[^\d]#', '', $row['phone']);
    echo $row['id'] . ' - ' . $row['phone_clean'] . '<br>';

    $insertArray[] = "(" . $row[id] . ", '" . $phone_clean . "')";
}

$insertQuery = "INSERT INTO tempTable (id, phone) VALUES ";
$insertQuery = implode(", ", $insertArray);
mysql_query($insertQuery); 
```

我做了一个快速演示来说明这个过程。`t1`是您的原始表，并且`t2`是包含要替换的数据的临时表。

## [看到它在行动](http://sqlfiddle.com/#!2/47637/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:44:05.863

您可以使用类似这样的用户定义函数：

[http://www.mysqludf.org/lib_mysqludf_preg/index.php#PREG_REPLACE_SECTION](http://www.mysqludf.org/lib_mysqludf_preg/index.php#PREG_REPLACE_SECTION)

或[https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)

并将您的查询重写为：

```
UPDATE table
SET phone = PREG_REPLACE('#[^\d]#', '', phone); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:40:36.690

好吧，对数据库的多次调用会导致速度下降，而且（根据我的经验），这是一个痛苦的调用。即使两次访问数据库也可能导致明显延迟超过一次。

为了解决这个问题，您希望最大限度地减少对数据库的调用，这意味着尽可能多地在一次调用中完成。为此，请尝试将其重写为单个 SQL 更新，其中您的替换逻辑位于 SQL 本身中。这意味着只需访问一次数据库并大幅提高速度。

说起来容易做起来难，自从我上次检查以来，MySQL 没有正则表达式字符串替换功能。您可以尝试解决方法，或查看一些 UDF。另一个答案提供了一个链接。我建议调查一下。

# python - 在没有 MS excel 的情况下将 dbf 转换为 csv

> ID：13694303
> 
> 赞同：1
> 
> 时间：2012-12-04T00:38:33.170
> 
> 标签：python, csv, io, python-2.6, dbf

将 .dbf 文件转换为 .csv 文件而不使用`win32com.client`或其他依赖于微软软件的软件包的最佳方法是什么（最低计算成本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:52:27.743

[您可以使用dbf 包](http://pypi.python.org/pypi/dbf)读取 dBase 文件。该包支持直接将表写入 CSV，或者如果您需要更多控制，您可以使用标准库模块中的 The Writer 类编写您自己的表[。](http://docs.python.org/2/library/csv#writer-objects)`csv`

作为纯 Python，它可能不是最快的解决方案，但它应该是可移植的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:03:13.883

最近，我一直在使用以下代码进行快速而肮脏的 csv 到 dbf 转换，主要是在准备 csv 文件以导入 ArcGIS 文件地理数据库的上下文中。该代码使用[dbf 包](http://pypi.python.org/pypi/dbf)。

```
import dbf, os
def csv_to_dbf(inCSV,outDBF):
    outFile = open(<temporary CSV>),'w')
    with open(inCSV,'r') as f:
        count = 0
        for line in f:
            if count == 0: header = line.rstrip("\n").split(",")
            else: outFile.write(line)
            count +=1    
    dbf.from_csv(csvfile=<temporary CSV>, field_names=header, filename= outDBF ,to_disk=True)
    os.remove(<temporary CSV>) 
```

# ubuntu - 转换为动态磁盘后创建新分区

> ID：13694304
> 
> 赞同：-1
> 
> 时间：2012-12-04T00:38:43.133
> 
> 标签：ubuntu, dynamic, windows-7, disk

所以我在我的 HP 上安装了 Ubuntu 11.04，但最近我还安装了 Win7，它可以正常运行。问题是我有额外的 290GB 可用空间（未分区空间），我想为 Win 创建另一个分区。当我尝试使用“磁盘管理”创建一个新分区时，它显示“...磁盘包含最大数量的分区”。目前 Ubuntu 使用 3 个分区，Win7 使用 4 个分区。我在网上搜索，找到了一个解决方案 - 将磁盘转换为动态。好吧，当这些东西在我身边时，我不是一个巫师，所以说实话，我有点不确定该怎么做，因为我不知道这些变化会对 Ubuntu 产生什么影响。

另外，只是在很短的时间内，为什么以及为什么不转换为 dynamic ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:24:16.523

这里的事情是你先安装了ubuntu，然后再安装了win7。
但是我应该做的这个问题也发生在我身上，如下所示：

1）首先我应该第一次安装win7。
2) 之后，我在磁盘管理中对驱动器进行了尽可能多的分区
3) 在我安装了 ubuntu 之后，它要求内存安装 ubutnu。现在我已经为 ubuntu 提供了一些内存。

# javascript - 使用 JS 将 html 行拆分为单独的变量

> ID：13694306
> 
> 赞同：-3
> 
> 时间：2012-12-04T00:38:57.747
> 
> 标签：javascript, html

在纯javascript（不使用JQuery/dojo/etc）中，拆分字符串的最佳/最简单/最快的方法是什么，例如

```
var tempString = '<span id="35287845" class="smallIcon" title="time clock" style="color:blue;font-size:14px;" contenteditable="false">cookie</span>'; 
```

进入

```
var id = 'id="35287845"';
var class = 'class="smallIcon"';
var title = 'title="time clock"';
var style = 'style="color:blue;font-size:14px;"';
var contenteditable = 'contenteditable="false"'; 
```

**注意事项：**

*   “空格”不能用作适当的分隔符，因为它可能出现在上面（时钟）的值中，例如标题。

*   维护每个变量周围的双引号，例如 id="35287845" 很重要

*   可以丢弃开始/结束跨度标签，以及在这种情况下为“cookie”的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:49:02.630

我认为您正在尝试获取跨度中的属性，请检查此响应，告诉您如何操作。

[使用 Javascript/jQuery 从 HTML 元素中获取所有属性](https://stackoverflow.com/questions/2048720/get-all-attributes-from-a-html-element-with-javascript-jquery)

您也可以获取属性并使字符串将值与您的字符串连接起来。

（你可以在那里找到纯 javascript 的解释）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:49:11.547

这是一种方法，将输入字符串作为 innerhtml 放入 javascript 创建的 dom 元素中，然后利用属性数组

```
//Input html string
var tempString = '<span id="35287845" class="smallIcon" title="time clock" style="color:blue;font-size:14px;" contenteditable="false">cookie</span>';

//make element to contain html string
var tempDiv = document.createElement("div");

//place html string as innerhtml to temp element
tempDiv.innerHTML = tempString;

//leverage attributes array on element
var attributeArray = tempDiv.firstChild.attributes;

//log results
console.log(attributeArray); 
```

请注意，您现在可以执行类似的操作

```
var classString = attributeArray.class; 
```

或者

```
var titleString = attributeArray.title; 
```

**编辑**

这是一个可以做到这一点的函数：

```
function getAttributesFromString(htmlString)
{
 var tempDiv = document.createElement("div");
 tempDiv.innerHTML = htmlString;
 return tempDiv.firstChild.attributes;
} 
```

# joomla - Joomla！1.5 类别博客布局参数在数据库中更新，但在显示时不更新

> ID：13694308
> 
> 赞同：0
> 
> 时间：2012-12-04T00:39:08.857
> 
> 标签：joomla, parameters, joomla1.5

如果这是一个简单的问题，我很抱歉，我只是在谷歌上搜索错误的关键字。自从我使用 Joomla 以来已经有几年了！但是得到了一个站点来进行一些更改，该站点最初是由其他人开发的，但似乎无法弄清楚发生了什么。我正在运行 Joomla！v1.5.26。

我正在尝试向网站添加博客部分，因此我创建了一个博客部分和类别，然后在我的菜单中创建了一个新的“类别博客布局”并将列值设置为 3： ![类别博客布局设置](../Images/15d8194f772643062c0089a593fb7903.png)

但是，每当我查看该页面时，它始终显示 2 列。所以我去了 phpMyAdmin 并在 jos_menu 中找到了菜单，并确认数据库确实得到了更新： ![在此处输入图像描述](../Images/7c863a360dc1b0717b6ee9a5f8508e6e.png)

所以接下来我打开 /components/com_content/views/category/tmpl/blog.php 并将其添加到 PHP 文件的顶部以查看正在加载的值：

```
<?php
print '<pre>';
print_r($this->params);
print '</pre>';
?> 
```

在前端产生了以下结果：

```
 ...
     [num_leading_articles] => 1
     [num_intro_articles] => 4
     [num_columns] => 2
     [num_links] => 4
     ... 
```

因此，出于某种原因，即使我已将值设置为更新，并且它们实际上在数据库中进行了更新，但它们并没有在前端进行更新。我试过清除缓存和所有有趣的东西，但运气不佳。如果只是“num_columns”有问题，我可能会覆盖该功能。但是，它似乎对所有参数做同样的事情，而不仅仅是列数。我只是以此为例。

我还没有排除它与某些第三方插件冲突的可能性，但我想看看我是否遗漏了一些明显的东西，有人可以指出我正确的方向。

**--更新：12/4/12--**

所以它似乎与 sh404sef 插件有冲突。我还不确定这笔交易是什么，但是当我禁用插件时它工作正常，但一旦我重新启用它就会再次发生。现在看看我是否能弄清楚插件有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:40:59.650

在 Joomla！1.5 在保存参数的同时，实现受到当时使用的模板的影响/影响（？）。

检查您的模板 index.php，或者如果存在覆盖`com_content`的博客布局（通常在`yourSite/templates/yourtempalte/html/com_content/category/blog.php`

您可能会发现覆盖要么不处理列，要么存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:02:56.933

好的，所以我想出了自己的问题。如上所述，我发现问题出在 sh404sef 插件上。显然，每当您更改菜单布局设置时，您都必须清除整个 SEF URL 列表，然后重新构建它。我们每次都必须这样做似乎很奇怪，但我想这是出于某种原因故意的。无论如何，它现在正在工作。我只是想确保我为可能偶然发现此问题的任何其他人发布了一个解决方案。

# php - 使用正则表达式替换段落标签

> ID：13694310
> 
> 赞同：3
> 
> 时间：2012-12-04T00:39:15.907
> 
> 标签：php, regex

我需要获取的输出`$one`并创建一个数组，但是，正则表达式不正确，因为我得到的只是一个具有一个键和一个值的数组；基本上，整个字符串。如果字符串中有 10 个段落标签，那么我应该在数组中得到 10 个值。

我的正则表达式有什么问题？

理想情况下，我希望在输出数组中包含两个数组，一个带有段落标签，另一个带有它们之间的文本。

```
$one = preg_replace( '/<p>/i', '<p class="test">', $str ); // This gives me what I need
print_r(explode( '/<p class="test">/iU', $one )); // This does not 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:54:14.407

问题很简单。Explode 不使用正则表达式。这应该适合你。

```
print_r(explode('<p class="test">', $one )); 
```

编辑：这应该做你想要的。

```
$pattern = '/(?P<open><p class="test">)'
          . '(?P<content>.*)'
          . '(?P<close><\/p>)/i';
preg_match_all($pattern, $one, $matches);
print_r($matches); 
```

编辑：没有匹配标签的简化版本：

```
$pattern = '/(<p class="test">)(.*)(<\/p>)/i';
preg_match_all($pattern, $one, $matches);
print_r($matches); 
```

# java - 在java中将String类型的二进制数转换为位

> ID：13694312
> 
> 赞同：4
> 
> 时间：2012-12-04T00:39:21.200
> 
> 标签：java, bit, bits, bitarray

我有一个关于将字符串类型二进制数转换为位并写入txt文件的问题。

例如，我们有像“0101011”这样的字符串，想要转换为位类型“0101011”，然后写入磁盘上的文件。

我想知道是否有任何隐蔽的字符串到位..

我在网上搜索他们建议使用 bitarray 但我不确定

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:41:21.450

尝试这个：

```
int value = Integer.parseInt("0101011", 2); // parse base 2 
```

然后位模式`value`将对应于字符串的二进制解释`"0101011"`。然后，您可以将`value`a 写入文件`byte`（假设字符串不超过 8 个二进制数字）。

**编辑**您也可以使用`Byte.parseByte("0101011", 2);`. 但是，Java 中的字节值始终是有符号的。如果您尝试解析设置了第 8 位的 8 位值^（例如`"10010110"`，即十进制的 150），您会得到 a `NumberFormatException`，因为 +127 以上的值不适合 a `byte`。如果您不需要处理大于 的位模式`"01111111"`，则`Byte.parseByte`与`Integer.parseInt`.

不过，回想一下，要将一个字节写入文件，您使用`OutputStream.write(int)`，它接受一个`int`（不是`byte`）值——即使它只写入一个字节。不妨从一个`int`价值开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:48:10.030

您可以尝试以下代码以避免数字溢出。

```
 long avoidOverflows = Long.parseLong("11000000000000000000000000000000", 2);
    int thisShouldBeANegativeNumber = (int) avoidOverflows;
    System.out.println("Currect value : " + avoidOverflows + " -> " + "Int value : " + thisShouldBeANegativeNumber); 
```

**你可以看到输出**

```
Currect value : 3221225472 -> Int value : -1073741824 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T12:00:20.897

```
//Converting String to Bytes

bytes[] cipherText= new String("0101011").getBytes()

//Converting bytes to Bits and Convert to String

 StringBuilder sb = new StringBuilder(cipherText.length * Byte.SIZE);
      for( int i = 0; i < Byte.SIZE * cipherText .length; i++ )
          sb.append((cipherText [i / Byte.SIZE] << i % Byte.SIZE & 0x80) == 0 ? '0' : '1');

//Byte code of input in Stirn form

      System.out.println("Bytecode="+sb.toString());   // some binary data

 //Convert Byte To characters 

      String bin = sb.toString();
      StringBuilder b = new StringBuilder();
      int len = bin.length();
      int i = 0;
      while (i + 8 <= len) {
        char c = convert(bin.substring(i, i+8));
        i+=8;
        b.append(c);
      }

//String format of Binary data

      System.out.println(b.toString()); 
```

# iphone - FacebookSDK：我们可以将 FBLoginView 添加到 UINavigation 吗？

> ID：13694325
> 
> 赞同：1
> 
> 时间：2012-12-04T00:41:34.020
> 
> 标签：iphone, objective-c, facebook, loginview

我们可以将 UIButton 添加到 UINavigation 但我们也可以添加 FBLoginView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:47:56.177

是的，登录是一个视图，因此您可以。我已经使用 ibaction 方法完成了它，并在其中将我的视图推送到了控制器。这也许也是你的方式。

# dynamics-crm-2011 - 通过仅使用 HTML5、JS 和 CSS 的网站访问 Dynamics CRM 2011 数据

> ID：13694329
> 
> 赞同：0
> 
> 时间：2012-12-04T00:41:56.003
> 
> 标签：dynamics-crm-2011

希望创建一个完全外部的门户，仅使用 HTML5、JS 和 CSS 来显示 CRM 2011 数据。看起来我不能使用 REST 或 SOAP，因为它们无法进行外部身份验证。有谁知道我会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:53:26.493

为此，您的[OrganizationData.svc](http://msdn.microsoft.com/en-us/library/gg334767.aspx)服务需要可从外部访问，并且需要在没有身份验证的情况下运行（或者，您的身份验证需要在您的 javascript 中进行 - 最终用户将能够读取您的源代码） . 无论哪种方式都不是一个明智的主意，因为您的所有数据都将对世界可见！

如果您只处理内部经过身份验证的用户，请阅读 oDATA 端点。

如果您想处理外部和/或未经身份验证的用户，您需要找到另一种方法来完成您需要的所有数据过滤和授权控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:26:20.563

我认为我们通常使用中介集成服务来实现这一点。您可以拥有一个服务，该服务可以通过传统的 CRM 身份验证访问 Org 服务，并提供许多可由客户端代码匿名调用（或通过自定义安全性）的方法。

例如，网页调用“int”服务的“getContact”方法，传递用户的电子邮件地址。“int”服务验证用户的电子邮件地址，然后使用存储在配置文件中的凭据从 CRM 的 org 服务中检索所需的数据（具有足够权限的 CRM 用户来提供“int”服务的方法）。'int' 服务然后解析数据并将其返回给客户端代码 - 它不知道 CRM 的存在 - 可能作为 JSON 用于可用性。

# dvorak - 左 Ctrl + Shift 将我的键盘切换到 Dvorak 我想阻止它改变

> ID：13694332
> 
> 赞同：71
> 
> 时间：2012-12-04T00:42:08.920
> 
> 标签：dvorak

前段时间在 XP 上，我正在考虑切换到 Dvorak，我在网上找到了这个小程序，“单击此处”，然后从左侧 Ctrl + Shift 切换到 Dvorak。那么现在它只是一个障碍，它跟着我从 XP 到 Windows 7。我一直是通过控制面板的“正常”路线，但它表明它从未改变过。我不是程序员，我可能知道的只是足以惹上麻烦。我怀疑注册表中的某些内容已更改，但这只是猜测。你能至少告诉我在哪里看。如果我知道在哪里看，我可能会删除一行或更改注册表中的一些小东西，但这大约是我所知道的限制。谢谢

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2018-06-05T14:51:58.213

自上次 Windows 10 更新以来，您可以通过打开 Windows 设置并执行以下简单步骤来禁用该功能：

[![在此处输入图像描述](../Images/ef7c439102fcbb508418eeae2cf68717.png)](https://i.stack.imgur.com/EPUiU.png)

[![在此处输入图像描述](../Images/12902570ed46733b2cfeb00313a9dcdc.png)](https://i.stack.imgur.com/dD8kd.png)

[![在此处输入图像描述](../Images/627567f04a9900c72908808b72942072.png)](https://i.stack.imgur.com/PM6xw.png)

[![在此处输入图像描述](../Images/1228291de924db8b7b53effc6ca6bcb2.png)](https://i.stack.imgur.com/VW06Z.png)

[![在此处输入图像描述](../Images/ec442794cd6051049ba4a97dc687ec4f.png)](https://i.stack.imgur.com/ztnpg.png)

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-12-04T02:05:23.710

我认为这个问题更适合[SuperUser](https://superuser.com/)，但我会尽力为您解答。

实际上有数千个与语言输入和键盘布局相关的注册表项，因此解决这些问题会很麻烦。您最好的选择是尝试通过 GUI 正确禁用此功能。

对于 Windows 10（[来源](http://www.isunshare.com/windows-10/change-key-sequence-in-windows-10.html)）：

1.  单击控制面板中的“时钟、语言和区域”
2.  点击“语言”
3.  点击右栏中的“高级设置”
    *   如果您想完全删除 Dvorak 作为选项，请单击此处的“选项”并在“输入法”下将其删除
4.  在“切换输入法”下，点击“更改语言栏热键”
5.  选择“输入语言之间”，然后单击“更改键序列”
6.  根据需要禁用/更改键盘快捷键

对于旧版本的 Windows，过程类似：

1.  从控制面板打开“区域和语言”面板。
2.  单击“键盘和语言”选项卡。
3.  单击“更改键盘...”按钮。
4.  单击“高级密钥设置”选项卡。
5.  对于“操作”下列出的每个项目，单击“更改键序列...”按钮并清除“启用键序列”复选框，或选择“未分配”单选按钮。

如果您不想再让德沃夏克有一个选项，请返回“更改键盘...”面板，转到“常规”选项卡，选择“美国-德沃夏克”并单击“删除”按钮。

不要忘记应用更改！

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2019-11-14T11:37:14.063

对于`Windows 10 Pro, version 1809`，设置似乎在上面提到的另一个地方：

1.  打开*设置*应用
2.  单击*设备*
3.  点击左栏中的*打字*
4.  点击底部的*高级键盘设置*
5.  单击*语言栏选项*
6.  在弹出窗口中选择*高级键设置选项卡*
7.  选择*在输入语言之间*，然后单击*更改键序列...*
8.  将*切换输入语言*和*切换键盘布局*都设置为**未分配**
9.  点击*确定*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-24T09:53:13.417

在 Windows 10 中：

在开始菜单**控制面板**的搜索栏中输入-> 点击**语言**-> 点击**高级设置**-> 点击**更改语言栏热键**-> 点击**更改按键顺序**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-02T04:32:31.070

编辑：自这篇文章以来，Windows 10 已经改变了一些事情。在“高级键盘设置”中搜索“设置”可能是最简单的。

*   开始 > 设置 > 地区和语言
*   右侧的高级键盘设置
*   语言栏选项
*   高级按键设置
*   输入语言之间
*   更改键序列...未分配
*   好的（然后申请 Windows 10 ）

# python - python 2.7 和 2.4 之间的差异会产生错误

> ID：13694333
> 
> 赞同：2
> 
> 时间：2012-12-04T00:42:12.650
> 
> 标签：python, python-2.7, python-2.4

我已经在这里发帖一段时间了，试图找出我看不见的 python 问题的原因。在本地，我的脚本运行良好，但是当我上传它时，它只执行了一半。

我的 python 脚本生成一个 html 文件。我已经对 python 脚本进行了 cron-jobbed，以便我的文件每隔几分钟更新一次。但是，它只是创建前几行代码并停止。

我相信原因是（经过一些调查）我的服务器正在运行 Python 2.4 而我正在运行 2.7。但是，我不确定如何将我的脚本升级（降级？）到 2.4。我认为这只是我存在的祸根的一行代码。

以下是相关代码：

phone.py：这会调用另一个文件 SearchPhone 并将 html 生成到 celly.html

```
from SearchPhone import SearchPhone

phones = ["iphone 4", "iphone 5", "iphone 3"]
f = open('celly.html','w')

f.write("""<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Celly Blue Book</title>
</head>

<body>
</body>
</html>
""")

#table
f.write('<table width="100%" border="1">')
for x in phones:
    print "Pre-Searchphone DEBUG" ##THIS PRINTS!!

    y = SearchPhone(x)  ## <--Here is the culprit.  

    print "Post-SearchPhone DEBUG" ##THIS DOES NOT!!

    f.write( "\t<tr>")
    f.write( "\t\t<td>" + str(y[0]) + "</td>")
    f.write( "\t\t<td>" + str(y[1]) + "</td>")
    f.write( "\t\t<td>" + str(y[2]) + "</td>")
    f.write( "\t\t<td>" + str(y[3]) + "</td>")
    f.write( "\t\t<td>" + str(y[4]) + "</td>")
    f.write( "\t</tr>")

f.write('</table>')

f.close() 
```

SearchPhone.py：这会搜索电话并由phones.py调用

```
from BeautifulSoup import BeautifulSoup
import urllib
import re

def SearchPhone(phone):

    y = "http://losangeles.craigslist.org/search/moa?query=" + phone + "+-%22buy%22+-%22fix%22+-%22unlock%22+-%22broken%22+-%22cracked%22+-%22parts%22&srchType=T&minAsk=&maxAsk="

    site = urllib.urlopen(y)
    html = site.read()
    site.close()
    soup = BeautifulSoup(html)

    prices = soup.findAll("span", {"class":"itempp"})
    prices = [str(j).strip('<span class="itempp"> $</span>') for j in prices]

    for k in prices[:]:
        if k == '': #left price blank
            prices.remove(k)
        elif int(k) <= 75: #less than $50: probably a service (or not true)
            prices.remove(k)
        elif int(k) >= 999: #probably not true
            prices.remove(k)

    #Find Average Price
    intprices = []
    newprices = prices[:]
    total = 0
    for k in newprices:
        total += int(k)
        intprices.append(int(k))

    intprices = sorted(intprices)

    try:
        del intprices[0]
        del intprices[-1]

        avg = total/len(newprices)
        low = intprices[0]
        high = intprices[-1]

        if len(intprices) % 2 == 1:
            median = intprices[(len(intprices)+1)/2-1]
        else:
            lower = intprices[len(intprices)/2-1]
            upper = intprices[len(intprices)/2]
            median = (float(lower + upper)) / 2  

        namestr = str(phone)
        medstr = "Median: $" + str(median)
        avgstr = "Average: $" + str(avg)
        lowstr = "Low: $" + str(intprices[0])
        highstr = "High: $" + str(intprices[-1])
        samplestr = "# of samples: " + str(len(intprices))
        linestr = "-------------------------------"

    except IndexError:
        namestr = str(phone)
        medstr = "N/A"
        avgstr = "N/A"
        lowstr = "N/A"
        highstr = "N/A"
        samplestr = "N/A"
        linestr = "-------------------------------"

    return (namestr, medstr, avgstr, lowstr, highstr, samplestr, linestr) 
```

这是追溯：

```
Pre-SearchPhone DEBUG
Traceback (most recent call last):
  File "/home/tseymour/public_html/celly/phones.py", line 35, in ?
    y = SearchPhone(x)
  File "/home/tseymour/public_html/celly/SearchPhone.py", line 11, in SearchPhone
    site = urllib.urlopen(y)
  File "/usr/lib64/python2.4/urllib.py", line 82, in urlopen
    return opener.open(url)
  File "/usr/lib64/python2.4/urllib.py", line 190, in open
    return getattr(self, name)(url)
  File "/usr/lib64/python2.4/urllib.py", line 322, in open_http
    return self.http_error(url, fp, errcode, errmsg, headers)
  File "/usr/lib64/python2.4/urllib.py", line 339, in http_error
    return self.http_error_default(url, fp, errcode, errmsg, headers)
  File "/usr/lib64/python2.4/urllib.py", line 579, in http_error_default
    return addinfourl(fp, headers, "http:" + url)
  File "/usr/lib64/python2.4/urllib.py", line 883, in __init__
    addbase.__init__(self, fp)
  File "/usr/lib64/python2.4/urllib.py", line 830, in __init__
    self.read = self.fp.read
AttributeError: 'NoneType' object has no attribute 'read' 
```

感谢所有的帮助。

泰勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:52:21.830

好的，所以 urllib2 也有同样的问题......更仔细地查看错误报告，我发现它正在尝试处理错误。urllib.py 的第 322 行尝试使用 wget 或类似方法，以确保您可以从服务器访问您尝试访问的 URL。如果可以的话，将 urllib 复制到某个地方，您可以在 pythonpath 上对其进行编辑并添加一些调试信息以找出它认为有错误的原因。由于我似乎无法在 2.4 上重现该问题，并且 2.4 早已停止服务，因此您需要跟踪发生的情况以修复它。我的猜测是`fp`在第 322 行上应该设置为 self.fp，但我不知道它是否默认为 None 并且没有设置，或者它是否传入了 None。另外，python2.4 的次要版本是什么你在跑步吗？我有 2.4.3，如果你愿意，我可以让我安装的 urllib.py 可用，你可以运行 diff 看看它们之间是否有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:46:16.840

我改用 Pythonwhere.com，没问题！

# c++ - Opengl VAO 无法正确绘制

> ID：13694336
> 
> 赞同：0
> 
> 时间：2012-12-04T00:42:40.543
> 
> 标签：c++, opengl

我最近在使用 Opengl VAO 时遇到了问题。目前我有代码使用 VBO 从浮点数组中绘制一个三角形。

这是代码。

```
float vpp[] = { 0.75f, 0.75f, 0.0f,
                0.75f, -0.75f, 0.0f,
                -0.75f, -0.75f, 0.0f};

// Non Indexed
glGenBuffers(1, &m_mainVertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, m_mainVertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vpp), vpp, GL_STATIC_DRAW);

glEnableVertexAttribArray(0);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
glDrawArrays(GL_POINTS, 0, 3);
glDisableClientState(GL_VERTEX_ARRAY);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

现在，当我尝试实现 VAO 时，程序只提取 1 个点。（我会发布一个屏幕截图，但我不能）。

还有这个的代码。

```
float vp[] = { 0.0f, 0.75f, -0.75f };

//VAO
unsigned short sInds[9] = { 1, 1, 0,
                            1, 2, 0,
                            2, 2, 0};

//Indexed
glGenBuffers(1, &m_mainVertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, m_mainVertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vp), vp, GL_STATIC_DRAW);

GLuint elBuf;
glGenBuffers(1, &elBuf);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, elBuf);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, 9 * sizeof(unsigned short), sInds, GL_STATIC_DRAW);

glEnableVertexAttribArray(0);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
glDrawElements(GL_POINTS, 3, GL_UNSIGNED_SHORT, sInds);
glDisableClientState(GL_VERTEX_ARRAY);

glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:13:01.130

您的代码已损坏，这与您的“VAO”无关（或者正如 Datenwolf 指出的，您*缺少*VAO）。

您似乎不了解索引缓冲区中的索引实际上是做什么的。您将属性 0 定义为包含 3 个浮点值的数组。你说，在 C 语言中，`float attrib0[numberOfPositions][3];`. 当 OpenGL 看到第一个索引时，它将从数组中获取*三个值。*它将获取：

属性0[索引][0]；属性0[索引](http://www.opengl.org/wiki/Vertex_Specification#Index_buffers)；属性0[索引][2]；

您的索引是*顶点*索引，而不是 GL_FLOAT 索引。数组元素每个是 3 个浮点数，而不是每个浮点数。

What you're trying to do is not really possible or useful. And as Datenwolf pointed out, it has nothing to do with VAOs (since your code doesn't use them). You're talking about [indexed rendering](http://www.opengl.org/wiki/Vertex_Specification#Index_buffers), which is a different topic from VAOs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:02:06.257

您使用哪个 OpenGL 版本？到目前为止，您的代码仅使用顶点缓冲区对象，但那里还没有顶点数组对象支持代码。如果您使用的是 OpenGL-4 核心，则需要先创建一个 VAO，否则不会绘制任何内容。

如果您不打算使用 VAO 抽象，您可以在创建上下文后立即创建一个包罗万象的 VAO。

```
GLuint vaoID;
glGenVertexArrays(1, &vaoID);
glBindVertexArray(vaoID); 
```

### 更新：

昨天晚上我没注意到，但尼可波拉斯注意到了。您的第二个代码片段的某些部分没有意义。`vp`仅定义 3 个浮点数。它现在完全取决于顶点着色器的语义（使用通用顶点属性要求使用着色器）如何解释这些。您对元素大小为 3 的*glVertexAttribPointer*的调用告诉 OpenGL，该顶点属性的每个元素都有 3 个字段，它们被一起寻址。

> ```
> float vp[] = { 0.0f, 0.75f, -0.75f };
> 
>               \------------------/ one attribute element 
> ```

你的第一个定义会更有意义`vpp`

> ```
> float vpp[] = { 0.75f, 0.75f, 0.0f,
> 
>                 \----------------/ attribute element 0
> 
>                 0.75f, -0.75f, 0.0f,
> 
>                 \-----------------/ attribute element 1
> 
>                 -0.75f, -0.75f, 0.0f};
> 
>                 \------------------/ attribute element 2 
> ```

如果启用多个顶点属性，它们会一起形成一个包含多个属性的长向量。

提供给 glDrawElements 的索引处理这些顶点属性向量，而不是它们的各个字段。

# matlab - 如何在 MATLAB 中对两个向量执行 XOR？

> ID：13694340
> 
> 赞同：2
> 
> 时间：2012-12-04T00:43:01.167
> 
> 标签：matlab

试试这个

```
>> A = [1 2];
>> B = [1 4];
>> xor(A, B)

ans =

     0     0 
```

如何？哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:46:52.243

您应该使用按位异或：

```
>> A = [1 2]
>> B = [1 4]
>> C = bitxor(A, B)
>> C

C =

     0     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T00:48:28.493

我认为错误是，matlab 将所有内容 != 0 视为真实。正如我们所知

```
true xor true -> false. 
```

也许[matlab中的快速异或数组](https://stackoverflow.com/questions/7721775/fast-xor-array-in-matlab)可以帮助你。

# jquery - Accordion 脚本在 ajax 更新面板中不起作用

> ID：13694341
> 
> 赞同：2
> 
> 时间：2012-12-04T00:43:12.693
> 
> 标签：jquery, asp.net, ajax, updatepanel, accordion

我有 jquery 手风琴插件，它位于 aspx 页面的 ajax 更新面板中。手风琴部分由标题 h3 标签和内容 div 标签组成，内容区域也有 aspx 按钮。当页面加载时，我们可以通过单击手风琴标题来隐藏或显示内容区域。问题发生在我单击内容区域中的 aspx 按钮后，手风琴显示和隐藏功能停止工作。

这是示例代码。

```
<asp:ScriptManager ID="sm1" runat="server"></asp:ScriptManager>
        <asp:UpdatePanel ID="upnlAccordion" runat="server" UpdateMode="Conditional" >            
            <ContentTemplate>
            <h3 class="acco_header">Header</h3>
                    <div class="acco_content">
                        Content Text
                        <asp:Button ID="btnClick" runat="server" Text="Click Button" />
                    </div>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:16:00.003

您可以将更新面板移动到内容 div 中，这将防止手风琴元素被重绘并丢失其绑定。这是我所知道的最简单的解决方案，并且在与插件交互时非常简单。

# excel - 使用excel vba将单元格的公式转换为文本

> ID：13694345
> 
> 赞同：5
> 
> 时间：2012-12-04T00:43:36.393
> 
> 标签：excel, excel-2003, vba

我正在 Excel2003 中编写一个宏，以在工作簿中查找所有带有公式的单元格，并将它们的地址和公式输出到不同工作表的几列中。

我知道我可以使用显示单个单元格的公式

```
Public Function ShowFormula(cell As Range) As String

    ShowFormula = cell.Formula

End Function 
```

效果很好，但是由于我不想手动查找所有单元格，因此我编写了以下宏来为我找到所有单元格

```
Sub Macro2()

Dim i As Integer
Dim targetCells As Range
Dim cell As Range
Dim referenceRange As Range
Dim thisSheet As Worksheet

Set referenceRange = ActiveSheet.Range("CA1")

With referenceRange
    For Each thisSheet In ThisWorkbook.Sheets
        If thisSheet.Index >= referenceRange.Parent.Index Then
            Set targetCells = thisSheet.Cells.SpecialCells(xlCellTypeFormulas, 23)
            For Each cell In targetCells
                If cell.HasFormula Then
                    .Offset(i, 0).Value = thisSheet.Name
                    .Offset(i, 1).Value = cell.Address
                    .Offset(i, 2).Value = CStr(cell.Formula)
                    i = i + 1
                End If
            Next
        End If
    Next
End With

End Sub 
```

它可以很好地找到所有单元格，但列表不会将公式显示为文本，而是显示公式结果。

将公式输出为文本而不是公式，我缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:23:44.160

试试这个：

```
.Offset(i, 2).Value = "'" & CStr(cell.Formula) 
```

此外，这将使事情变得更快。代替

```
For Each thisSheet In ThisWorkbook.Sheets
    If thisSheet.Index >= referenceRange.Parent.Index Then 
```

尝试

```
For j = referenceRange.Parent.Index to Sheets.Count
    Set thisSheet = Sheets(j) 
```

# haskell - Haskell中嵌套的`do`块

> ID：13694346
> 
> 赞同：5
> 
> 时间：2012-12-04T00:43:42.073
> 
> 标签：haskell

我正在尝试在 Haskell 中编写一个函数来检查一些东西，然后根据一些最小的用户输入进行递归。为了做到这一点，我认为我必须使用`do`块。

```
cip :: [Argument] -> [Argument] -> Bool -> Bool -> IO()
cip (a:args) pargs burden gameover = do
    let nasko = a:pargs
    putStrLn (getPremise a)
    let newgraph = Carneades.mkArgGraph nasko
    let newcaes = (CAES (newgraph,audience2,assStandarts)) 
    let answer = (acceptable (mkProp (getPremise a)) newcaes )
    print answer
    if(answer==True) 
    then (cip args nasko burden gameover) 
    else do
        print "One of the arguments is not proved. Here are the premises that need proving"
        print (propsForFixing newcaes a)
        print "Let's see what you have for the first Propositon"
        --add an if to check if no applicable arguments.
        print (argumentScanHelp (head (propsForFixing newcaes a)) args)
        print "\n Would you like me to apply the firt one? Y/N"
        choice <- getLine
        if(choice=="Y") then do print "applying the argument"
                                let applicabee = head (argumentScanHelp (head (propsForFixing newcaes a)) args)
                                print "Argument targeted"
                                let newargs = delete applicabee args
                                let newpargs = applicabee:nasko
                                print "Argument applied sucsessfuly. Recusing again"
                                (cip newargs newpargs burden gameover)
return() 
```

只是看着它就伤害了我的眼睛，但这`do`对你来说是障碍。直到第三个`do`街区的一切都很好。但随后在这一行：

```
 if(choice=="Y") then do print "applying the argument"
                                let applicabee = head (argumentScanHelp (head (propsForFixing newcaes a)) args) 
```

编译器开始哭泣：

```
Main.hs:209:73: parse error on input `let' 
```

尝试了各种不同的缩进，但我似乎无法让它工作。我不想使用单独的函数，因为这意味着我必须不断地传递很多参数。

任何人都可以帮我做对吗？`do`还非常感谢解释嵌套块的具体规范是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T01:29:24.403

The cause of the error I believe is the misuse of the if *expression*. You use it as if it were an if *statement* that exists in most imperative languages. Simply put there must always be an `else`.

However, in do blocks it makes sense to "not have an else", something like an if statement without an else. Luckily the `Control.Monad` module will provide you with a function for exactly that:

```
import Control.Monad (when)

(...)

when (choice=="Y") $ do print "applying the argument"
                        let applicabee = ... 
```

You seem to already use nested do blocks in the correct way which is good, which basically is that you must indent properly.

PS. Also make sure your last `return ()` is indented like the rest of your code! DS.

# android - SimpleDateFormat.parse 破坏了数据库性能

> ID：13694349
> 
> 赞同：0
> 
> 时间：2012-12-04T00:44:01.740
> 
> 标签：android, sql, database

我有一个数据库，其中大约 100 行有一个与之关联的日期。为了将它们存储在 SQL 数据库中，我将它们转换为字符串并存储它们。然后，在读取这些行时，我使用 SimpleDateFormat.parse()。在从数据库中读取行时，这显然占用了我大约 80-90% 的时间。

有谁知道在 Android 及其数据库中存储/读取日期的更好方法？

# codeigniter - 使用 CodeIgniter 发送电子邮件时出错

> ID：13694351
> 
> 赞同：9
> 
> 时间：2012-12-04T00:44:09.620
> 
> 标签：codeigniter, email, smtp, freebsd

在发送电子邮件时，我收到了一堆这样的错误：

```
A PHP Error was encountered

Severity: Notice

Message: fwrite(): send of 12 bytes failed with errno=32 Broken pipe

Filename: libraries/Email.php

Line Number: 1846

A PHP Error was encountered

Severity: Notice

Message: fwrite(): send of 39 bytes failed with errno=32 Broken pipe

Filename: libraries/Email.php

Line Number: 1846

A PHP Error was encountered

Severity: Notice

Message: fwrite(): send of 31 bytes failed with errno=32 Broken pipe

Filename: libraries/Email.php

Line Number: 1846 
```

我已按照 CodeIgniter 用户指南配置 SMTP：

```
$config['protocol']='smtp';  
$config['smtp_host']='ssl0.ovh.net';  
$config['smtp_port']='465';  
$config['smtp_timeout']='10';  
$config['smtp_user']='postmaster%example.com';  
$config['smtp_pass']='password';
$config['mailtype'] = 'html';
$config['charset'] = 'utf-8';
$config['newline'] = "\r\n";
$config['useragent'] = 'Project'; 
```

配置文件似乎很好，而且正确（我检查了 OVH 的电子邮件配置文件）。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-03-13T07:22:32.393

我也处于同样的情况。越来越：

> 消息：fwrite(): SSL: Broken pipe</p><p>文件名：libraries/Email.php</p><p>行号：2250&

真正产生影响的变化是 'smtp_crypto' 配置选项设置为 'ssl'

```
$config['protocol'] = 'smtp';
$config['smtp_host'] = 'ssl://example.com';
$config['smtp_crypto'] = 'ssl';
$config['smtp_port'] = '465';
$config['smtp_user'] = 'user@example.com';
$config['smtp_pass'] = 'password';
$config['mailtype'] = 'html';
$config['charset'] = 'iso-8859-1';
$config['wordwrap'] = 'TRUE'; 
```

我通过搜索 SSL 选项在[https://www.codeigniter.com/user_guide/libraries/email.html找到了这个解决方案。](https://www.codeigniter.com/user_guide/libraries/email.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-04T20:37:41.710

这是对我有用的答案

[http://biostall.com/resolving-error-with-sending-emails-via-smtp-using-codeigniter/](http://biostall.com/resolving-error-with-sending-emails-via-smtp-using-codeigniter/)

请务必使用 "\r\n" 而不是 '\r\n'

您也可以在配置文件中进行设置：

```
$config['newline'] = "\r\n";
$config['crlf'] = "\r\n"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-14T17:01:44.910

如果您为您的网站使用 cpanel，则 smtp 限制存在问题并导致此错误。

> SMTP 限制
> 
> 此功能可防止用户绕过邮件服务器发送邮件，这是垃圾邮件发送者常用的做法。它将只允许 MTA、mailman 和 root 连接到远程 SMTP 服务器。
> 
> 此控件也可在 Tweak Settings 中进行调整。
> 
> 此设置已更新。
> 
> SMTP 限制已禁用。

我遇到了类似的问题，不得不禁用 SMTP 限制。之后一切正常。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-13T10:11:59.503

就 CI 而言，您的电子邮件配置数组存在很多可能导致此错误的问题。

如果您在本地开发环境中，请尝试将“smtp”的大小写更改为带有大写字母的“SMTP”。

如果您在实时服务器上，请尝试将它们更改为小型大写字母。

总而言之，`$config['protocol'] = 'smtp'`有时使用大写字母会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-06T17:14:06.310

同样的问题......但对我有用的是这些配置集：

```
$config['protocol']     = 'smtp';
$config['smtp_host']    = XXX;
$config['smtp_user']    = XXX;
$config['smtp_port']    = 25; // was 465
$config['smtp_pass']    = XXX;
$config['newline']      = "\r\n"; 
```

消息停止了。:D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-16T00:11:22.003

我试试这个，它对我有用

```
$config['protocol'] = 'smtp';
$config['smtp_crypto'] = 'tls';
$config['smtp_host'] = 'smtp.gmail.com';    
$config['smtp_port'] = '587'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-14T02:48:21.470

使用 smpt_port:25，它对我有用

# javascript - 运费和手续费计算

> ID：13694353
> 
> 赞同：1
> 
> 时间：2012-12-04T00:44:36.643
> 
> 标签：javascript

问题是：许多公司通常会收取购买的运费和手续费。创建一个允许用户在文本框中输入购买价格的网页 - 包括一个计算运输和处理的 JavaScript 函数。向脚本添加功能，为任何小于或等于 25.00 美元的购买添加 1.50 美元的最低运费和手续费。对于任何超过 25.00 美元的订单，在总购买价格中增加 10% 的运费和手续费，但不包括 1.50 美元的最低运费和手续费。确定订单的总成本（购买加上运输和处理）后，将其显示在警报对话框中。

我是 JavaScript 的初学者，正在努力让我的代码正常工作。它确实会显示一个带有用户输入值的警报框，但不会添加任何内容。虽然，我不知道为什么公式不起作用。请帮忙。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Calculating Shipping & Handling</title>
<script type="text/javascript">

/* <![CDATA[ */

    var price=[];
    var shipping=[];
    var total=price+shipping;

    function calculateShipping(){
    if (price <= 25){
    shipping = (price + 1.5);
    }
    else {
    shipping = (price * 10 / 100);
    }

window.alert("The purchase price with shipping is "
            + document.calculate.ent.value);
}
/* ]]> */
</script>
</head>
<body>
<form name ="calculate" action="" >
<p>Enter Purchase Price</p>
<input type="text" name="ent" >
<input type="button" name="button" value="Submit" onClick="calculateShipping()" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:48:29.220

这显然是功课，所以我会让你走上正轨。

代码有几个问题：

1.  该行`var total=price+shipping;`发生在您实际计算运费之前
2.  而不是`document.calculate.ent.value`您实际上想要显示`total`.
3.  您尚未将用户在文本框中输入的值分配给`price`变量。您可能会考虑简单地将价格作为参数传递给 `calculateShipping()`函数，这样就可以了`function calculateShipping(price) { ... }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T02:08:30.703

```
Try:

function calculateShipping() {
    var price = parseFloat(document.getElementById('ent').value);
    var total = (price <=25) ? price + 1.5 : 1.1 * price;
    window.alert("The purchase price with shipping is $" + total.toFixed(2));
} 
```

您还应该在输入中添加一些验证，因为如果输入了非数字值，它将使您的函数崩溃。

# java - 正在复制时在 JTextArea 中显示

> ID：13694357
> 
> 赞同：0
> 
> 时间：2012-12-04T00:44:48.717
> 
> 标签：java, swing

我需要在复制过程中`system.out.println`显示所有语句。`JTextArea`我尝试给出 ta.append 而不是 println 语句，但它不会显示。请让我知道我应该如何去做。

```
public class copy {

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Copy c = new Copy();
                c.setTitle("Copy folders");
                c.setVisible(true);
            }
        });

        JPanel jp = new JPanel();

        TextArea ta = new JTextArea(5, 50);
        ta.setEditable(false);
        DefaultCaret caret = (DefaultCaret) ta.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
        JScrollPane scrollPane = new JScrollPane(ta, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrollPane.setBounds(6, 625, 1035, 296);
        jp.add(scrollPane); //Adding to JPanel    
    }

    public Copy() {
        build();
    }

    public void build() {
        String source = "\\hostname\\d$\\somedirecotry";
        String detination = "\\C:\\foldername";
        File s = new File(source);
        File s2 = new File(detination);

        if (!s.exists()) {
            System.out.println("Directory does not exist.");
        } else if (!s2.exists()) {
            System.out.println("Directory is not accessible or Server is down");
        } else {
            try {
                copyFolder(s, s2);
            } catch (IOException e) {
                e.printStackTrace();
                System.exit(0);
            }
        }
        System.out.println("Done");
    }

    public static void copyFolder(File src, File dest)
            throws IOException {
        if (src.isDirectory()) {
            //if directory not exists, create it
            if (!dest.exists()) {
                dest.mkdir();
                System.out.println("Directory copied from " + src + "  to " + dest);
            }

            //list all the directory contents
            String files[] = src.list();

            for (String file : files) {
                File srcFile = new File(src, file);
                File destFile = new File(dest, file);
                copyFolder(srcFile, destFile);
            }
        } else {
            //if file, then copy it
            InputStream in = new FileInputStream(src);
            OutputStream out = new FileOutputStream(dest);

            byte[] buffer = new byte[1024];

            int length;
            //copy the file content in bytes 
            while ((length = in.read(buffer)) > 0) {
                out.write(buffer, 0, length);
            }

            in.close();
            out.close();
            System.out.println("File copied from " + src + " to " + dest);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:59:43.690

Swing 是一个事件驱动的环境，这包括但不限于键盘、鼠标和绘画事件。

这些事件由事件调度线程传递。阻塞此线程的任何操作（例如但不限于循环、I/O 或`Thread#sleep`）都将阻止（除其他外）开始处理绘制请求。这将使您的应用程序停止响应键和鼠标事件，并使其看起来像挂起一样。

解决问题的最简单方法是将物理复制过程移至单独的线程。这最容易通过使用`SwingWorker`.

看一下[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，特别是[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)和[Worker Threads 和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

可以找到例子

*   [JTextArea 附加问题](https://stackoverflow.com/questions/11927167/jtextarea-appending-problems/11927201#11927201)
*   [带有 FileReader 的 SwingWorker](https://stackoverflow.com/questions/11608822/swingworker-with-filereader/11661165#11661165)
*   [JProgressBar 不会更新](https://stackoverflow.com/questions/13094666/jprogressbar-wont-update/13095992#13095992)

# java - 为什么在 Java 中需要 volatile

> ID：13694363
> 
> 赞同：1
> 
> 时间：2012-12-04T00:45:13.337
> 
> 标签：java, caching, concurrency, volatile, cpu-cache

在 Java 中，所有线程都使用相同的堆。如果一个线程正在将操作缓存到堆，它究竟什么时候会刷新到堆？

我已经阅读了很多帖子，但无法找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:50:17.350

`volatile`告诉Java变量可能在多个线程中改变，所以不要缓存变量。缓存是处理器级别的结构，因此处理器可以随时刷新缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:46:25.180

举另一个例子：有像**股票网站**这样的网站，它们希望向用户显示**最新数据**，而不是一些**陈旧**的数据。正确的？

所以他们所做的是他们**禁用网页缓存，**这样页面就不会被缓存在任何地方，并且所有页面都将获得最新的数据更新。

类似的情况是`volatile`，内核或处理器有自己**的缓存**，他们缓存结果，认为当前处理器上运行的线程不会改变变量的值，那么为什么要一次又一次地从**内存中读取。**所以它缓存它并返回缓存的值（**这是为了硬件级别的性能**）。

因此，如果像网站示例一样，您想**停止**使用陈旧值的其他处理器，您需要**停止缓存**，`volatile`这是在 Java 中执行此操作的方法。

# html - div 不起作用

> ID：13694370
> 
> 赞同：1
> 
> 时间：2012-12-04T00:46:06.247
> 
> 标签：html, css

我只想让“包装器”中的所有东西都伸展以适合包装器，但一切都很烦人并且保持固定高度？

所以我希望“内容”区域的“侧边栏”和“内部”始终保持相同的高度，并且我还希望“内容”始终拉伸以适应“包装”，同时拥有“页眉”、“导航”和“页脚”。但我尝试的任何方法似乎都不起作用。我曾经有过它，但丢失了代码并忘记了我做了什么..帮助？：C

我也在玩，看看通过改变'包装器的最小高度会发生什么，这就是它如此低的原因。

好的。**指定**：一方面，我希望“包装器”将所有内容封装在其中，并在其中一个孩子增加高度时始终增加其高度，例如“内部” div 填充了文本并增加了“ content' **另外**，我还希望'sidebar'和'inside'保持相同的高度，也就是为什么它们的高度为100％或顶部；0 底部；0 w/ei 在这里。

**网页**：

```
#wrapper {
  width: 1000px;
  min-height: 300px;
  background-color: red;
  position: relative;
  margin: auto;
  margin-bottom: 10px;
  border: 1px solid black;
}
#header {
  width: 100%;
  background-color: blue;
  height: 100px;
  float: left;
  clear: both;
  position: relative;
  border-bottom: 1px solid black;
}
#content {
  width: 100%;
  background-color: grey;
  height: 100%;
  float: left;
  clear: both;
  position: relative;
}
#sidebar {
  width: 180px;
  background-color: green;
  float: left;
  position: absolute;
  top: 0px;
  bottom: 0px;
  padding: 10px;
  border-right: 1px solid black;
}
#inside {
  width: 779px;
  padding: 10px;
  position: absolute;
  top: 0px;
  bottom: 0px;
  right: 0px;
  background-color: orange;
  float: right;
}
#footer {
  width: 100%;
  height: 100px;
  float: left;
  clear: both;
  background-color: pink;
  border-top: 1px solid black;
}
#nav {
  width: 100%;
  border-bottom: 1px solid black;
  float: left;
  clear: both;
  height: 20px;
  background-color: purple;
}
```

```
<div id="wrapper">

  <div id="header">
    hi
  </div>

  <div id="nav">
    hi
  </div>

  <div id="content">

    <div id="sidebar">
      sidebar stuff
    </div>

    <div id="inside">
      inside stuff
    </div>

  </div>

  <div id="footer">
    hi
  </div>

</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:07:35.433

如果我理解，您正在寻找相同高度的列。

检查这两个链接：

[http://css-tricks.com/fluid-width-equal-height-columns/](http://css-tricks.com/fluid-width-equal-height-columns/)

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

# css - 使用 css 调整渐变和窗口大小

> ID：13694374
> 
> 赞同：0
> 
> 时间：2012-12-03T17:21:38.157
> 
> 标签：css

情况：

一个宽度设置为 的表格，`100%`里面有一个`1000px`宽度为 的单元格。表格居中，单元格也居中。

我想要一个从左到右，从右到左的渐变，它会在居中单元格的开头结束，颜色与单元格相同。

问题是，要占据整个页面，无论浏览器大小，表格设置为`100%`，单元格设置为 ，`1000px`所以它永远不会改变它的大小，

**如果可能的话，我如何实现我想要的，确保在较小的分辨率/显示器或窗口调整大小时，渐变将在该单元格的开头停止，因为渐变是按百分比设置的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:53:28.167

你想要这样的东西吗？

```
<table cellspacing="0" cellpadding="0">
  <tr>
    <td class="left">&nbsp;</td>
    <td class="center">Your content goes here</td>
    <td class="right">&nbsp;</td>
  </tr>
</table>​ 
```

风格如此

```
table {
  /* the table takes up all the space */
  width: 100%;
}
td.center {
  /* there is one container column */
  width: 1000px;
  text-align: center;
  color: white;
  background-color: black; /* some fixed background color */
}
/* and two columns on the side which fade to some other color, in the respective directions */
td.left {
  background: -webkit-gradient(linear, left, right, from(white), to(black));
  background: -webkit-linear-gradient(left, white, black);
  background:    -moz-linear-gradient(left, white, black);
  background:     -ms-linear-gradient(left, white, black);
  background:      -o-linear-gradient(left, white, black);
  background:         linear-gradient(left, white, black);
}
td.right {
  background: -webkit-gradient(linear, right, left, from(white), to(black));
  background: -webkit-linear-gradient(right, white, black);
  background:    -moz-linear-gradient(right, white, black);
  background:     -ms-linear-gradient(right, white, black);
  background:      -o-linear-gradient(right, white, black);
  background:         linear-gradient(right, white, black);
} 
```

你可以在这里试试这个例子：http: [//jsfiddle.net/qvum4/1/](http://jsfiddle.net/qvum4/1/)

**更新**

但是，如果您没有使用表格的特定原因，并且只想达到这种效果，则不应该使用表格。周围有一些 jQuery 渐变插件，您可以尝试使用。

你可以开发一个自定义的 jQuery 解决方案，以便将所有样式乱码保留在标记之外。在这里试试这个例子：http: [//jsfiddle.net/YnUpY/1/](http://jsfiddle.net/YnUpY/1/)

# jquery-ui - ember.js transitionTo 来自 jquery ui 回调

> ID：13694375
> 
> 赞同：2
> 
> 时间：2012-12-04T00:46:33.743
> 
> 标签：jquery-ui, ember.js

我正在使用 jquery-ui datepicker 在几天之间导航我的应用程序。问题是我从视图中调用transtionTo，我的印象是这是错误的。

这是代码：

[http://jsfiddle.net/arenoir/rjVUN/](http://jsfiddle.net/arenoir/rjVUN/)

```
App.CalendarView = Ember.View.extend({
  tagName: 'div',
  didInsertElement: function() {
    var router;
    router = this.get('controller.target.router');
    this.$().datepicker({
      dateFormat: "yy-mm-dd",
      onSelect: function(dateText, instance) {
          router.transitionTo('show', {day: dateText}); 
      }
    });
  }   
}); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:42:03.453

你是对的，但有时这是不可避免的。我会提出的建议是在路由器上创建一个方法来处理这种情况。

在您的路由器中：

```
calendarParentRoute: Ember.Route.extend({
  url: "/",
  showDate: Ember.Route.transitionTo('show'),
  show: Ember.Route.extend({
    url: ":date",
    connectOutlets: function(router, context){
      // Do stuff
    }
  })
}) 
```

看法：

```
App.CalendarView = Ember.View.extend({
  tagName: 'div',
  didInsertElement: function() {
    var router;
    router = this.get('controller.router');
    this.$().datepicker({
      dateFormat: "yy-mm-dd",
      onSelect: function(dateText, instance) {
        router.send('showDate', {day: dateText}); 
      }
    });
  }   
}); 
```

# java - Java ImageIO.write 发送的数据多于 ImageIO.read 接收的数据？

> ID：13694381
> 
> 赞同：4
> 
> 时间：2012-12-04T00:47:14.670
> 
> 标签：java, sockets, networking, javax.imageio

我正在尝试通过套接字发送图像，但遇到了一个奇怪的问题.. ImageIO.write 发送的数据多于 ImageIO.read 接收的数据。例如，如果我在循环中有以下代码：

（客户端）

```
out.writeByte(222);//magic num for testing
out.writeByte(blockSize);
out.writeByte(x / blockSize);
out.writeByte(y / blockSize);
ImageIO.write(part, "PNG", out); 
```

（服务器端）

```
if (din.readUnsignedByte() != 222) {
    throw new RuntimeException();
}
int partSize = din.readUnsignedByte();
int partX = partSize * din.readUnsignedByte();
int partY = partSize * din.readUnsignedByte();
BufferedImage part = ImageIO.read(din); 
```

在第二次迭代中，幻数将失败，因为 ImageIO.read 尚未读取从另一端发送的所有数据。为什么是这样？这似乎是一个重大问题。还是我错过了什么？

编辑：截至 2008 年 4 月 14 日，这似乎是一个已确认的错误。错误[号 6687964](http://bugs.sun.com/view_bug.do?bug_id=6687964)。为什么这还没有解决？...啊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:24:23.260

我遇到了同样的问题。程序收到文件后，将确认发送回发件人。如果发送者写了一个转义字符`new String("\n").getBytes()`然后刷新 OutputStream 它应该结束缓冲流并允许你`InputStream.ReadLine()`在另一端。这应该得到多余的数据，循环的下一次重复将得到新的图像数据。我知道很烦人，但它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:15:05.160

我想出的解决方法是：

（关于作为 ByteArrayOutputStream，并且作为套接字流）

```
 ImageIO.write(part, "jpg", bout);
                        out.writeShort(bout.size());
                        bout.writeTo(out);
                        bout.reset(); 
```

此代码将在写入图像之前将图像的大小作为短发送，从而防止错误。

# sql-server-2008 - 使用 AS IF THEN 查询以查找数据库版本？

> ID：13694383
> 
> 赞同：0
> 
> 时间：2012-12-04T00:47:19.110
> 
> 标签：sql-server-2008, liquibase

所以对我们的系统有一点背景来解释事情。

我们的数据库是版本（可能大多数都是）。我们在数据库中有一个名为“DBVersion”的表。然而几个月前，我们迁移到了 liquibase。现在有一个 DATABASECHANGELOG 表。

不幸的是，就我们的数据库而言，我们是一家相当无组织的公司。所以我正在尝试编写一个视图，让我知道我们的客户使用的是什么版本。

老实说，我什至不知道从哪里开始。但我想我可以编写多个 CASE 语句来允许我这样做。我将使用 SP sp_msforeachdb 来运行视图。

```
SELECT 
Case when id = '8.12' then '8.12'
End as Version
From DATABASECHANGELOG
Where id = '8.12' 
```

我想做这样的事情：

```
CASE 
    WHEN (SELECT ID FROM DATABASECHANGELOG WHERE ID = '8.12' IF NULL CONTINUE)
    WHEN (SELECT VERSION FROM DBVERSION, IF > 400 && < 425 THEN PRINT 'VERSION 8.7' 
```

我知道上面的查询甚至不是在 SQL 中，但它给了你一个想法。我们的 Liquibase 版本是 8.10、8.11 和 8.12 以及所有未来版本。低于 8.10 的所有内容都使用 watson 版本，这将是一个简单的数字范围。

对不起，如果这太令人困惑了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:03:06.057

不是很明白你的问题。

以下 SQL 显示应用程序的数据库版本：

```
SELECT ID,FILENAME,TAG  FROM DATABASECHANGELOG WHERE TAG IS NOT NULL 
```

每次运行“tag”命令时，它都会在 tag 列中插入一个值，以便回滚操作知道要撤消多少变更集。

# javascript - 我的项目中可以有多个 gruntjs 文件用于代码组织吗？

> ID：13694385
> 
> 赞同：14
> 
> 时间：2012-12-04T00:47:46.790
> 
> 标签：javascript, node.js, gruntjs

我在我的项目中使用 gruntjs，想知道我的项目中是否可以有多个 grunt.js 文件？我问的原因是我的项目是这样组织的：

```
grunt.js
|
|- project1
|   |
|   |-grunt.js
|
|- project2
|
|- project3 (etc..) 
```

我希望顶级 grunt.js 构建所有项目。然而，随着项目列表的增长，我不希望我的顶级 grunt.js 文件变得巨大。所以我想组织它，以便顶级 grunt 可以调用项目级 grunt 文件来构建它们。或者，如果有人只想构建 project1，他们可以转到 project1 文件夹并运行它自己的 grunt.js。这可以做到吗？如果是这样，我如何调用其他 grunt 文件？如果没有，那么除了拥有一个巨大的 grunt.js 文件之外，还有什么替代解决方案？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-23T08:06:37.370

我最近用一个非常简单的解决方案解决了这个问题。
我实施`grunt.config.merge(config)`了替换`grunt.initConfig(config)`. 您可以多次调用它，它只会将配置合并到一个配置中。

**更新**：从 Grunt v0.4.5 开始，该`grunt.config.merge`函数是内置的，因此您不再需要将其作为单独的库包含。

这允许我按功能组织我的配置。
我为每个功能创建一个配置文件，例如`desktop-javascripts.js`, `desktop-css.js`, `mobile-javascripts.js`, `mobile-css.js`.
此外，它们在 中共享通用配置`default-options.js`，因此我可以指定压缩设置等等。

### 例子

Gruntfile.js：

```
module.exports = function(grunt) {

  require('./default-options.js')(grunt);
  require('./desktop-javascripts.js')(grunt);
  require('./desktop-css.js')(grunt);
  require('./mobile-javascripts.js')(grunt);
  require('./mobile-css.js')(grunt);

  grunt.loadNpmTasks('grunt-contrib-concat');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-watch');

}; 
```

桌面-javascripts.js：

```
module.exports = function(grunt) {

  // Configure all JavaScript tasks:
  grunt.registerTask('desktop-javascripts', [ 'concat:JS', 'jshint' ]);
  grunt.config.merge({
    concat: { 'JS': { files: allJS } },
    jshint: { 'JS': { files: allJS } },
    watch: { 'JS': { files: allJS, tasks: [ 'desktop-javascripts' ] } }
  });

}; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-04T01:26:40.950

有一个名为[**grunt-hub**](https://github.com/shama/grunt-hub)的 grunt 任务似乎可以做你想做的事情。

> ## 咕噜中心：
> 
> 一个 Grunt 任务，用于监视和运行多个 Grunt 项目的任务。
> 
> ### 枢纽任务
> 
> 中心任务用于在多个项目上运行任务。它想知道使用哪些 Gruntfiles 以及在每个 Grunt 项目上运行哪些任务。例如，如果我想对每个 Grunt 项目的一个文件夹进行 lint 和测试：

我没用过，但它可能满足你的要求。此外，您可能希望研究更低级别的内容，例如**grunt-exec**或创建自己的任务以生成子进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T22:44:53.763

我知道这个问题可能很老，但我想澄清一下，有一种方法可以以适当的方式组织你的代码。

为了防止像这样进行多次通话：

```
grunt.loadNpmTasks('grunt-contrib-uglify');
grunt.loadNpmTasks('grunt-contrib-jshint');
grunt.loadNpmTasks('grunt-contrib-qunit');
grunt.loadNpmTasks('grunt-contrib-watch');
grunt.loadNpmTasks('grunt-contrib-concat'); 
```

将它们替换为：

```
require('load-grunt-tasks')(grunt); 
```

并使用：

```
grunt-config-dir 
```

从文件夹运行任务。

要了解更多信息，[请查看此内容。](http://www.ryanantenor.be/organising-your-grunt-tasks/)

# mongodb - MongoDB 副本集磁盘清理

> ID：13694390
> 
> 赞同：2
> 
> 时间：2012-12-04T00:48:06.850
> 
> 标签：mongodb, replication, diskspace

我正在尝试缩小我的 MongoDB 副本集的大小（集合大小相同，但磁盘空间不断增长）。根据 MongoDB 网站，我应该只在主节点上运行 mongod --repair 以压缩所有集合。问题将是网站的停机时间。所以，我有两个选择（我知道）：

1.  从副本集上取下辅助节点并在其上运行 mongod --repair 并在副本集上重新启动。我试过这个，但无法通过“本地”集合的权限错误。

2.  关闭辅助节点并删除数据目录中的所有文件。重新启动 mongo 并让它从 master 中恢复。这实际上对我有用，但我唯一担心的是，如果您的期刊收藏已满，并且由于它是有上限的收藏，您会只收到期刊中的数据还是实际上复制所有主数据？

有没有其他人遇到过这种情况？在尝试搜索此内容时，我对缺乏信息感到惊讶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:12:32.800

> 从副本集上取下辅助节点并在其上运行 mongod --repair 并在副本集上重新启动。

这是一种常见的做法，通常被称为“滚动修复”。您从副本集中取出每个辅助节点并对其进行修复，并最终将主节点降级以作为最后一步进行修复。只要您始终拥有大部分可用的副本集节点，这种方法就会最大限度地减少潜在的停机时间。

如果您经常删除数据，您应该考虑使用 MongoDB 2.2 中新的[PowerOf2Sizes](http://docs.mongodb.org/manual/reference/command/collMod/)集合选项。这将分配方法更改为以 2 的幂次方分配文档空间（例如，一个 500 字节的文档将分配 512 个字节），这允许更有效地重用已删除文档的空间（以每个多字节为代价）文档）。

> 我试过这个，但无法通过“本地”集合的权限错误。

“本地”集合上的权限错误听起来像文件系统权限（即基于您运行的用户`mongod`）。您应该使用同一用户运行修复过程。

> 关闭辅助节点并删除数据目录中的所有文件。重新启动 mongo 并让它从 master 中恢复。这实际上对我有用，但我唯一担心的是，如果您的期刊收藏已满，并且由于它是有上限的收藏，您会只收到日记中的数据还是会实际复制所有主数据？

听起来您将[`Journal`](http://www.mongodb.org/display/DOCS/Journaling)用于持久性和崩溃恢复的 与[`Oplog`](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)用于复制的混为一谈。

如果您从主节点重新同步一个节点，所有数据都将被复制过来。在这个初始阶段，节点将处于 RECOVERING 状态并且不被视为“健康”节点（即可用于查询）。

一旦节点被赶上，它将变为正常的 SECONDARY 状态，此时`oplog`将用于正在进行的同步。

一些进一步的阅读：

*   [复制基础](http://docs.mongodb.org/manual/core/replication/)
*   [副本集状态参考](http://docs.mongodb.org/manual/reference/replica-status/)

# c - While (( c = getc(file)) != EOF) 循环不会停止执行

> ID：13694394
> 
> 赞同：4
> 
> 时间：2012-12-04T00:48:27.693
> 
> 标签：c, file, input, output

我不知道为什么我的 while 循环不起作用。没有它，代码可以正常工作...代码的目的是在 bin 文件中查找秘密消息。所以我得到了查找字母的代码，但是现在当我尝试让它循环到文件末尾时，它不起作用。我是新来的。我究竟做错了什么？

```
main(){

FILE* message;
int i, start;
long int size;
char keep[1];

message = fopen("c:\\myFiles\\Message.dat", "rb");

if(message == NULL){
    printf("There was a problem reading the file. \n");
    exit(-1);
}

//the first 4 bytes contain an int that tells how many subsequent bytes you can throw away
fread(&start, sizeof(int), 1, message);
printf("%i \n", start); //#of first 4 bytes was 280
fseek(message, start, SEEK_CUR); //skip 280 bytes
keep[0] = fgetc(message); //get next character, keep it
printf("%c", keep[0]); //print character

while( (keep[0] = getc(message)) != EOF) {
    fread(&start, sizeof(int), 1, message);
    fseek(message, start, SEEK_CUR);
    keep[0] = fgetc(message);
    printf("%c", keep[0]);
}

fclose(message);

system("pause");
} 
```

编辑：

在调试器中查看我的代码后，看起来在 while 循环中使用“getc”会使一切都失败。我通过创建一个名为 letter 的新字符来修复它，然后用以下代码替换我的代码：

```
fread(&start, sizeof(int), 1, message);
fseek(message, start, SEEK_CUR);

while( (letter = getc(message)) != EOF) {
    printf("%c", letter);
    fread(&start, sizeof(int), 1, message);
    fseek(message, start, SEEK_CUR);
} 
```

它现在就像一个魅力。当然欢迎任何更多的建议。感谢大家。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T00:54:35.700

`getc()`from及其亲属的返回值是 a `int`，而不是 a `char`。

如果将 的结果分配`getc()`给 a `char`，则在它返回时会发生以下两种情况之一`EOF`：

*   如果 plain`char`是无符号的，则 EOF 被转换为 0xFF，并且 0xFF != EOF，所以循环永远不会终止。
*   如果 plain`char`已签名，则 EOF 等效于有效字符（在 8859-1 代码集中，即 ÿ、y-变音符号、U+00FF、带分音符号的拉丁小写字母 Y），并且您的循环可能会提前终止。

鉴于您面临的问题，我们可以初步猜测您将 plain`char`作为无符号类型。

`getc()`et al 返回 an的原因`int`是他们必须返回可以适合 a 的所有可能值`char`以及一个不同的值 EOF。在 C 标准中，它说：

> **ISO/IEC 9899:2011 §7.21.7.1`fgetc()`功能**
> 
> `int fgetc(FILE *stream);`
> 
> 如果未设置指向的输入流的文件结束指示符`stream`并且存在下一个字符，则该`fgetc`函数将该字符作为`unsigned char`转换为`int`...
> 
> 如果设置了流的文件结束指示符，或者如果流处于文件结束位置，则设置流的文件结束指示符并且`fgetc`函数返回 EOF。

类似的措辞适用于`getc()`功能和`getchar()`函数：它们被定义为像`fgetc()`函数一样，除了如果`getc()`被实现为宏，它可能会使用通常不授予标准宏的文件流参数——特别是流参数表达式可能会被多次评估，因此`getc()`使用副作用 ( `getc(fp++)`) 调用是非常愚蠢的（但更改为`fgetc()`它会很安全，但仍然很古怪）。

* * *

在您的循环中，您可以使用：

```
int c;

while ((c = getc(message)) != EOF) {
    keep[0] = c; 
```

这将保留分配给`keep[0]`; 我不确定你是否真的需要它。

您应该检查对`fgets()`, `getc()`,的其他调用`fread()`确保您得到了您期望的输入。尤其是在输入时，你真的不能跳过这些检查。迟早会出现问题，如果您不认真检查返回状态，您的代码可能会崩溃，或者只是“出错”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:02:23.790

有 256 个不同的`char`值可能会返回`getc()`并存储在一个`char`变量中`keep[0]`（是的，我过度总结了）。为了可靠地检测文件结尾，`EOF`必须有一个不同于所有这些的值。这就是为什么`getc()`返回`int`而不是`char`: 因为第 257 个不同的值 for`EOF`不适合`char`.

因此，您至少需要将返回的值存储`getc()`在 a中，直到您检查它：`int``EOF`

```
int tmpc;
while( (tmpc = getc(message)) != EOF) {
    keep[0] = tmpc;
    ... 
```

# sql - Sql 查询：将数据链接到两个给定日期之间的所有日期

> ID：13694405
> 
> 赞同：0
> 
> 时间：2012-12-04T00:49:50.143
> 
> 标签：sql, sql-server, date

我有一张看起来像的桌子

```
 Date    |  BookID   |  Rating  |  Review
2012-10-12  |    2      |    3     |    3
2012-10-13  |    2      |    7     |    9
2012-10-16  |    3      |    4     |    2 
```

每天，一本书可以收到许多评级和评论我正在尝试编写一个查询，给定两个日期，它显示每本书的评级和评论，在两个给定日期之间的每一天。即使那天没有评分或没有评论，我仍然想显示日期和 BookID 例如，在上表中，我希望查询返回类似

```
 Date       |  BookID   |  Rating  |  Review
2012-10-12  |    2      |    3     |    3
2012-10-13  |    2      |    7     |    9
2012-10-14  |    2      |   null   |   null
2012-10-15  |    2      |   null   |   null
2012-10-16  |    3      |    4     |    2 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:03:22.990

像这样的东西：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/cca52/29)**

```
WITH mycte AS
     (
         SELECT cast('2012-01-01' AS datetime) DateValue
         UNION ALL
         SELECT DateValue + 1
         FROM    mycte
         WHERE   DateValue + 1 < '2014-12-31'
     )

SELECT
CONVERT(char(10), mycte.DateValue,126) as Date,
b.BookID,
(SELECT Rating FROM tbl WHERE BookID = b.BookID
                        AND Date = mycte.DateValue) as Rating,
(SELECT Review FROM tbl WHERE BookID = b.BookID
                        AND Date = mycte.DateValue) as Review
FROM    mycte, (SELECT distinct BookID
               FROM tbl) b
WHERE mycte.DateValue >= '2012-10-12'
AND mycte.DateValue <= '2012-10-15'
OPTION (MAXRECURSION 0) 
```

结果：

```
|       DATE | BOOKID | RATING | REVIEW |
-----------------------------------------
| 2012-10-12 |      2 |      3 |      3 |
| 2012-10-12 |      3 | (null) | (null) |
| 2012-10-13 |      2 |      7 |      9 |
| 2012-10-13 |      3 | (null) | (null) |
| 2012-10-14 |      2 | (null) | (null) |
| 2012-10-14 |      3 | (null) | (null) |
| 2012-10-15 |      2 | (null) | (null) |
| 2012-10-15 |      3 | (null) | (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:12:45.127

```
--set up test data

DECLARE @Reviews TABLE([Date] date, BookId int, Rating int, Review int)

INSERT INTO @Reviews VALUES
('2012-10-12', 2, 3, 3),
('2012-10-13', 2, 7, 9),
('2012-10-16', 3, 4, 2)

--setup query parameters
DECLARE @StartDate date, 
        @EndDate date
SELECT  @StartDate = '2012-10-12', 
        @EndDate = '2012-10-16'

--run query

;WITH IntervalSet AS
(
    SELECT @StartDate AS [Date]
    UNION ALL
    SELECT DATEADD(DAY,1,[Date]) AS [Date]
    FROM   IntervalSet 
    WHERE  DATEADD(DAY,1,[Date])<=@EndDate
) 
SELECT  I.[Date], B.BookId, R.Rating, R.Review 
FROM    
(
        SELECT  BookId, Min([Date]) as EarliestDate
        FROM    @Reviews
        GROUP BY BookId
) B
JOIN    IntervalSet I
        ON  I.[Date] >= b.EarliestDate
LEFT
JOIN    @Reviews R
        ON  R.[Date] = I.[Date]
        AND R.BookId = B.BookId
ORDER BY I.[Date], B.BookId
OPTION(MAXRECURSION 0) 
```

这给出了结果：

```
Date       BookId      Rating      Review
---------- ----------- ----------- -----------
2012-10-12 2           3           3
2012-10-13 2           7           9
2012-10-14 2           NULL        NULL
2012-10-15 2           NULL        NULL
2012-10-16 2           NULL        NULL
2012-10-16 3           4           2 
```

这比您发布的结果多出一行，但我相信是正确的 - 在第一次审查之前它不会返回 bookid 的任何行，看起来就像您所追求的

# r - data.table 中键的顺序是否重要？

> ID：13694406
> 
> 赞同：7
> 
> 时间：2012-12-04T00:49:57.330
> 
> 标签：r, data.table

我有一个 data.table，它有两个键：Year（10 个级别）和 MemberID（200,000 个级别）。当我设置键时，会`setkey(MemberID, Year)`产生不同的性能`setkey(Year, MemberID)`吗？如果是这样，哪种方式会更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T01:22:43.143

键设置的性能和速度将取决于键变量类型。`numeric`列将比`integer`. `character`列（短字符串时）似乎很快。

例如

```
 library(data.table)

set.seed(1)
 DIC <- data.table(year = sample(seq_len(10), 5e6, TRUE), id = sample(as.character(seq_len(2e5)), 5e6, TRUE), z = rnorm(5e6))
DIC2 <- copy(DIC)
DIF <-  data.table(year = sample(seq_len(10), 5e6, TRUE), id = sample(as.factor(seq_len(2e5)), 5e6, TRUE), z = rnorm(5e6))
DIF2 <- copy(DIF)
DNC <- data.table(year = sample(as.numeric(seq_len(10)), 5e6, TRUE), id = sample(as.character(seq_len(2e5)), 5e6, TRUE), z = rnorm(5e6))
DNC2 <- copy(DNC)
DCC <- data.table(year = sample(as.character(seq_len(10)), 5e6, TRUE), id = sample(as.character(seq_len(2e5)), 5e6, TRUE), z = rnorm(5e6))
DCC2 <- copy(DCC)
 DII <- data.table(year = sample(seq_len(10), 5e6, TRUE), id = sample(seq_len(2e5), 5e6, TRUE), z = rnorm(5e6))
DII2 <- copy(DII) 
```

* * *

# 一些时间

```
# key of integer, character columns
system.time(setkey(DIC, year ,id))
   user  system elapsed 
   3.21    0.11    3.31 
system.time(setkey(DIC2, id, year))
   user  system elapsed 
   3.43    0.03    3.45 
# key of integer factor columns
system.time(setkey(DIF, year ,id))
   user  system elapsed 
   6.31    0.05    6.37 
system.time(setkey(DIF2, id, year))
   user  system elapsed 
   6.44    0.06    6.54 
# key of numeric, character columns
system.time(setkey(DNC, year ,id))
   user  system elapsed 
   9.91    0.07   10.29 
system.time(setkey(DNC2, id, year))
   user  system elapsed 
  10.11    0.07   10.34 
# key of two character columns
system.time(setkey(DCC, year ,id))
   user  system elapsed 
   3.34    0.05    3.40 
system.time(setkey(DCC2, id, year))
   user  system elapsed 
   3.40    0.02    3.42 
# key of two integer columns
system.time(setkey(DII, year ,id))
   user  system elapsed 
   6.25    0.02    6.53 
system.time(setkey(DII2, id,year))
   user  system elapsed 
   6.44    0.05    6.64 
```

* * *

至于哪种方式会更好。这可能取决于您最有可能更频繁地单独进行子集化的内容。

例如，您可能需要获取第 1 年的所有数据。

如果您已将密钥设置为，`year, id`则可以使用

```
D[J(1)] 
```

但如果密钥设置为`id, year`那么你需要

```
D[J(unique(id),1), nomatch = 0] 
```

这是更多的打字，并且需要更长的时间，因为它必须计算`unique(id)`。

有一个功能请求[FR#1007](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1007&group_i)着眼于允许辅助键，但这还没有实现。目前有一个键可以占用多列。

# c# - 排序下拉列表？

> ID：13694408
> 
> 赞同：2
> 
> 时间：2012-12-04T00:50:08.863
> 
> 标签：c#, asp.net, drop-down-menu

我很好奇在 C#/ASP.NET 中对 DropDownList 进行排序的最佳路线（更注重简单性，而不是速度或效率） - 我已经查看了一些建议，但它们并不适合我。这个下拉菜单按字母顺序给我列表。但我必须随机整理。

注意：我无法控制数据如何进入 DropDownList - 我无法修改 SQL。

```
public void populateLocationList()
{
    DataTable dt_locations = (DataTable)daa_addresses.GetDataByEventLocations(int_eventid);

    if (dt_locations != null && dt_locations.Rows.Count > 0)
    {
        // Populate locations dropdown menu
        // Bind locationsList instead of dt_locations
        ddl_locations.DataTextField = "Key";
        ddl_locations.DataValueField = "Value";
        ddl_locations.DataSource = RemoveDuplicateLocations(dt_locations);
        ddl_locations.DataBind();

        string location = "";

        // Set the selection based upon the query string
        if (Request.QueryString["loc"] != null)
        {
            location = Request.QueryString["loc"];
            locationLbl.Text = Request.QueryString["loc"];
            locationID.Value = "-1";
        }

        if (dt_locations.Rows.Count == 1)
        {
            location = ddl_locations.Items[0].Text;
            locationLbl.Text = location;
        }

        // Set location in drop down list
        int int_foundlocation = 0;
        bool foundLocation = false;

        foreach (ListItem lsi_item in ddl_locations.Items)
        {
            if (lsi_item.Text.ToLower().Trim() == location.ToLower().Trim())
            {
                int_foundlocation = ddl_locations.Items.IndexOf(lsi_item);
                foundLocation = true;
                break;
            }
        }

        ddl_locations.SelectedIndex = int_foundlocation;

        if (ddl_locations.Items.Count == 1)
        {
            // Make location label visible.
            locationLbl.Visible = true;
            ddl_locations.Visible = false;
        }
        else
        {
            locationLbl.Visible = false;
            ddl_locations.Visible = true;
        }
        //* defualt location S for short courses *//
        if (!IsPostBack && !foundLocation)
        {
            ListItem s = ddl_locations.Items.FindByText("S");
            int index = 0;

            if (s != null)
            {
                index = ddl_locations.Items.IndexOf(s);
            }

            ddl_locations.SelectedIndex = index;
            ddl_locations.DataBind();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:28:15.700

> 我必须随机整理。

您必须改组行，可能使用接近此代码的内容（借自[@configurator's answer](https://stackoverflow.com/a/1665080/472149)）：

```
internal static class Extensions
{
    internal static IEnumerable<T> Shuffle<T>(this IEnumerable<T> source, Random rng)
    {
        T[] elements = source.ToArray();
        // Note i > 0 to avoid final pointless iteration
        for (int i = elements.Length - 1; i > 0; i--)
        {
            // Swap element "i" with a random earlier element it (or itself)
            int swapIndex = rng.Next(i + 1);
            yield return elements[swapIndex];
            elements[swapIndex] = elements[i];
            // we don't actually perform the swap, we can forget about the
            // swapped element because we already returned it.
        }

        // there is one item remaining that was not returned - we return it now
        yield return elements[0]; 
    }
} 
```

假设`RemoveDuplicateLocations`返回`DataTable`代码的绑定部分应更改为：

```
 ddl_locations.DataSource = RemoveDuplicateLocations(dt_locations)
            .AsEnumerable()
            .Shuffle(new Random())
            .CopyToDataTable(); 
```

# windows-8 - 您可以在 Windows 8 应用程序中使用动态磁贴吗？

> ID：13694413
> 
> 赞同：0
> 
> 时间：2012-12-04T00:50:31.837
> 
> 标签：windows-8, live-tile

> **可能重复：**
> [在 Windows 8 Metro 应用程序中使用动态磁贴](https://stackoverflow.com/questions/13665207/using-live-tiles-inside-a-windows-8-metro-application)

可能是第三方工具提供商。如果没有，有没有办法自定义它以在应用程序中包含动态磁贴？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:09:17.373

实际的“动态磁贴”实现在应用程序中不可用，但您可以模拟它们及其行为。

我认为[Callisto](http://visualstudiogallery.msdn.microsoft.com/0526563b-7a48-4b17-a087-a35cea701052)可能是您想要的，它真的很容易使用。

# php - 如何从 MYSQL/PHP 中的 html 代码中去除数据

> ID：13694414
> 
> 赞同：0
> 
> 时间：2012-12-04T00:50:38.100
> 
> 标签：php, sql, phpexcel

我在 MYSQL 中有一个如下所示的表**（注意 html 代码）**：

```
===================================================================|
|           Question                         |   Answer            |
=========+===========+=============================================|
| <p> Do you listen to music? </p>           |        YES          |            
|------------------------------------------------------------------|
| Who is your favorite music artists?        | Justin Beiber       | 
|------------------------------------------------------------------|
|<script>Are you a Male or female?</script>  |      M              | 
|------------------------------------------------------------------| 
```

我在 PHP 中使用 PHPExcel 来提取该数据并将其放入一个 excel 文件中，该表就是我的 excel 文件的样子。

在 excel 中，我希望删除 html，以便字段仅包含问题：

```
===================================================================|
|           Question                         |   Answer            |
=========+===========+=============================================|
|     Do you listen to music?                |        YES          |            
|------------------------------------------------------------------|
| Who is your favorite music artists?        | Justin Beiber       | 
|------------------------------------------------------------------|
|      Are you a Male or female?             |      M              | 
|------------------------------------------------------------------| 
```

**PHP中的代码：**

```
$col=1; // 1-based index
while($row_data = mysql_fetch_assoc($result)) {

$row= 1;

    foreach ($row_data as $key=>$value) {

$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
$row++;
    }
    $col++;

}

$row=1;
while($row_data = mysql_fetch_assoc($result2)) {
$col=0;

    foreach($row_data as $value) {

   $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
        $row++;

    $col++;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:51:53.233

采用[`strip_tags()`](http://us3.php.net/manual/en/function.strip-tags.php)

```
$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, strip_tags($value)); 
```

这是一个很好的例子，说明为什么 HTM 不应该与数据库中的内容混合

# wpf - 尝试使用 CompositionTarget.Rendering 在 WPF 中学习动画

> ID：13694415
> 
> 赞同：0
> 
> 时间：2012-12-04T00:50:42.337
> 
> 标签：wpf, vb.net, composition

我试图弄清楚如何使用 VB.NET 为 WPF 中的元素设置动画/移动。有人建议我尝试使用 CompositionTarget.Rendering，但我很难开始。下面是我的代码，下面是我收到的错误消息。有人可以告诉我哪里出错了。

代码：

```
Imports System.ComponentModel

Class MainWindow

    Dim flake0 As New flake

    Private Sub Window_Loaded(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
        canvas1.DataContext = flake0
        AddHandler CompositionTarget.Rendering, AddressOf compo
    End Sub

    Private Sub compo(ByVal sender As Object, ByVal e As EventArgs)
        flake0.move()
    End Sub
End Class 
```

错误：

```
Handles clause requires a WithEvents variable defined in the containing type or one of its base types 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:08:57.490

我有另一种方法意外地将“句柄 CompositionTarget.Rendering”标记到它的末尾。

# list - 存储函数结果的方案 (Let)

> ID：13694416
> 
> 赞同：1
> 
> 时间：2012-12-04T00:50:48.187
> 
> 标签：list, scheme

```
(define [DML vara] 
  (cond
     ((atom? (car vara)) 
      (cond
        ((eqan? (car vara) 'N)
         (display (cdr vara)))
        (else (negate vara)))

   ))) 
```

为了简单起见，我目前正在尝试保存返回的内容我正在测试它“返回”一个列表的否定函数，我想保存该函数的结果以进行测试。我如何实际保存从否定返回的列表。有点像 (x = (negate vara)) 其中 x 是列表。我在 google 和 stack over flow 上查找 let，但我找不到一个非常简单的基本任务。

请原谅我刚刚开始的方案语法不佳......从命令式语言到函数并不是那么顺利......

编辑：

我想打印出 (negate vara) 的结果表达式，但由于方案只打印出最后一个“递归调用”（请原谅我的措辞不好）。我希望它使用来自 (negate vara) 的结果列表，但仍然打印出该列表，例如

```
say if I had 
(else (test (negate vara)))
...
(define (test vara)
(display "test")
)

I wanted it to display 
'(O a b)) ;list
here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:53:58.310

如您所知，`let`表达式可以解决问题：

```
(let ((x 10)
      (y 20))
  (+ x y))

=> 30 
```

上面的表达式将值绑定到两个变量，`x`并且`y`. 这些绑定将存在于`let`. 隐式地，`let`表单中的所有表达式都封装在 a`begin`中，整个表达式的最终结果就是最终的表达式。请注意，一个绑定不能在定义部分引用其他绑定；如果一个变量需要引用以前的定义，则使用 a `let*`：

```
(let* ((x 10)
       (y (* x 2)))
  (+ x y))

=> 30 
```

最后，如果您需要创建递归定义，请使用`letrec`：

```
(letrec ((fact (lambda (x)
                 (if (zero? x) 1 (* x (fact (sub1 x)))))))
  (fact 10))

=> 3628800 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T01:09:19.250

你可以像你建议的那样做一个程序：

```
(define (test var)
  (display var)
  var)
(test (negate (test vara)))) ; prints our argument and return 
```

或者您可以使用 DrRacket 并使用调试器。用过一次就错过了！

# jquery - 调整 tumblr 视频的大小

> ID：13694421
> 
> 赞同：3
> 
> 时间：2012-12-04T00:51:10.033
> 
> 标签：jquery, iframe, tumblr

我创建了一个 tumblr 主题。一切正常，直到我决定在 tumblr 视频上传上发布视频。我在主页上有一个 250x196 像素的框，一切都在里面。

*   如果它是一张照片，我只需将其设为 250x196 像素（我不关心纵横比。我使用 jQuery 来保持纵横比，但我不喜欢结果）。
*   如果它是一张照片集，我会使用anythingslider 并创建一张幻灯片。
*   如果是文本帖子，我会使用 jquery 并将第一张图片作为缩略图。
*   如果是视频和照片一样。我只是调整 iframe 的大小。至少那是我认为我正在做的事情。

*我还使用 prettyphoto 作为图像和视频的灯箱克隆。*

所以当我使用tumblr上传视频的时候，我遇到了这些问题：

1.  首先，视频没有得到 iframe 的纵横比，我认为原因可能是高度的数据值和 iframe 正在使用。
2.  正如你[**在这里**](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)看到的；为了让 iframe 出现，我使用的是内联方法。我有一个隐藏的 div，其中包含 500 像素版本的视频。问题是 {Video-250} 和 {Video-500} tumblr 变量都为具有相同 id 的 tumblr 视频创建了一个 div。所以它需要隐藏的视频并将其移动到 250 像素版本旁边。
3.  tumblr 的视频内置灯箱与 prettyphoto 有冲突。当我单击视频的全屏时，z-indexes 出现问题。我没有花时间解决这个问题，因为我已经遇到了很多问题。

作为一种解决方法，我所做的是：

```
 <div class="media" data-embed="{JSVideoEmbed-250}" data-video="{JSVideo-250}"></div> 
```

你可以在我用三个随机视频创建的测试博客上确切地看到我的意思：

[http://stroumfaki.tumblr.com/](http://stroumfaki.tumblr.com/)

但是调整大小的问题仍然存在。iframe 是 250x196 像素，但内容不是。我也不明白为什么 tumblr 在第一个视频中发布了 javascript。它在页面末尾发布的相同脚本。

我问的可能有点难以表达。我希望测试博客能帮助你理解我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:28:46.677

尝试使用响应式嵌入 - 这应该缩放您的电影以填充容器：[http ://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)

# java - 如何在 SpringLayout 中右对齐组件？

> ID：13694423
> 
> 赞同：0
> 
> 时间：2012-12-04T00:51:29.467
> 
> 标签：java, swing, springlayout

我正在尝试创建一个布局，左侧有几个文本项，右侧有一个按钮。我已经完全按照我想要的方式获得了文本项，但我无法让按钮在右侧对齐。

![在此处输入图像描述](../Images/f500ce1b919f5ff5941a6780af10001c.png)

我正在按如下方式创建按钮：

```
 SpringLayout layout = new SpringLayout();
    JPanel p2 = new JPanel(layout);
    // set panel size very large so it fills its own parent
    p2.setMaximumSize(new Dimension(Short.MAX_VALUE, Short.MAX_VALUE));
    p2.setBackground(new Color(0xffd0d0));
    p2.setBorder(BorderFactory.createLineBorder(new Color(0)));
    // Add some text items; omitted for clarity
    ...
    // Add a button in the lower-right corner
    JButton btn = new JButton(refreshAction);
    p2.add(btn);
    layout.putConstraint(SpringLayout.EAST, btn,
                Spring.constant(0),
                SpringLayout.EAST, p2);
    layout.putConstraint(SpringLayout.SOUTH, btn,
                Spring.constant(0),
                SpringLayout.SOUTH, p2); 
```

我认为这会将按钮的东边和南边与容器的东边和南边对齐，但它没有发生。看起来按钮边缘与容器的首选大小而不是其实际大小对齐。

**还有一个数据点：** 当我设置标签的值时，按钮会跳到右边，与刚刚添加的文本的末尾对齐。显然，容器的首选大小已经增加，即使实际大小没有改变，并且按钮的位置也随之改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:01:31.903

好吧，两天后没有答案=找到另一种方法。我最终使用了 GridBagLayout，我一开始就应该这样做。我会留下这个问题，以防有一天有人回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T16:29:15.727

所以这是一个非常古老的问题，但我在使用 SpringLayout 的右对齐方面遇到了类似的问题。

对我有用的是从左侧对齐事物，并调整组件的大小以适应面板的右边缘。（这可能不是最好的解决方案）

例如，如果我有四个要对齐的框：

## | 盒子1 | 盒子2 |

## | 盒子3 | 方框4 |

box1 将是：

```
layout.putConstraint(SpringLayout.NORTH, box1, 2, SpringLayout.NORTH, buttonPanel);
layout.putConstraint(SpringLayout.WEST, box1, 2, SpringLayout.WEST, buttonPanel); 
```

box2 将是：

```
layout.putConstraint(SpringLayout.NORTH, box2, 2, SpringLayout.NORTH, buttonPanel);
layout.putConstraint(SpringLayout.WEST, box1, 2, SpringLayout.EAST, box1); 
```

box3 将是：

```
layout.putConstraint(SpringLayout.NORTH, box3, 2, SpringLayout.SOUTH, box1);
layout.putConstraint(SpringLayout.WEST, box3, 2, SpringLayout.WEST, buttonPanel); 
```

box4 将是：

```
layout.putConstraint(SpringLayout.NORTH, box4, 2, SpringLayout.SOUTH, box2);
layout.putConstraint(SpringLayout.WEST, box1, 2, SpringLayout.EAST, box3); 
```

# javascript - JavaScript 动画库... 推荐

> ID：13694427
> 
> 赞同：6
> 
> 时间：2012-12-04T00:52:05.533
> 
> 标签：javascript, animation

我对人们对轻量级、独立 JavaScript 动画库的“真实世界”使用意见/建议感兴趣。因此，不需要像 jQuery、dojo 等“全功能”JavaScript 库......

注意：
- 请不要使用面向 HTML5 画布的库（例如 processing.js）。
- Css3 支持是额外的，但不是必需的。
- 效率越高越好！
- 如果你喜欢，让我和其他人知道你为什么推荐你推荐的东西。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T00:59:47.250

我强烈推荐[GreenSock 的动画平台](http://www.greensock.com/v12/)。

虽然我不必为 javascript 使用独立的解决方案，但这个库对于任何动作脚本动画工作都是无价的。

他们有一个结构很好的库，支持各种不同类型的插件。

核心动画库非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:58:12.783

似乎很奇怪，您会立即排除基于画布的解决方案。它正是为此而设计的（并且工作得非常好）。

无论如何，有一种方法可以使用 DOM 进行动画处理，这对于向后兼容来说非常有用，但这是一种相当神秘的技术。恼人的是，我最近读了一篇关于它的好文章，但现在找不到了。我会说你不太可能找到不使用画布的现代 js gfx 库。

# java - 在 Java 中读取令牌

> ID：13694428
> 
> 赞同：3
> 
> 时间：2012-12-04T00:52:13.057
> 
> 标签：java, split, token

在做一个学校项目时，我遇到了以下问题：在`processCommand()`从`run()`方法中向方法中输入一行之后（使用控制台作为一种文本编辑器），我发现无论出于何种原因，令牌都无法正确读取因此，`processCommand()`即使命令应该简单而准确（即在控制台中键入 h 会显示“请输入有效命令。”），我也会运行该方法的“else”子句。我确定我如何拆分线路有问题，但对于我的生活，我无法弄清楚。谁能帮我？

```
 @Override
public void run() {
    Scanner scanner = new Scanner(System.in);
    String line;

    try {
        do {
            System.out.print("vi: ");
            line = scanner.nextLine();
            if(line.length() > 0){
                processCommand(line);
            }
        } while (!quit);
    } catch (Exception ex) {
        System.out.println("An error occurred.");
    }

    scanner.close();
    System.out.println("Goodbye!");
}

@Override
public void processCommand(String line) {
    String[] tokens = line.split(" ");
    if(tokens[0] == "b") {
        insertBefore(line.substring(3));
    }
    if(tokens[0] == "i") {
        insertAfter(line.substring(3));
    }
    if(tokens[0] == "m") {
        moveUp(Integer.parseInt(line.substring(3)));
    }
    if(tokens[0] == "u") {
        moveDown(Integer.parseInt(line.substring(3)));
    }
    if(tokens[0] == "r") {
        remove(Integer.parseInt(line.substring(3)));
    }
    if(tokens[0] == "d") {
        remove(Integer.parseInt(line.substring(3)));
    }
    if(tokens[0] == "c") {
        clear();
    }
    if(tokens[0] == "s") {
        try {
            save(line.substring(3));
        } catch (IOException e) {
        }
    }
    if(tokens[0] == "l") {
        try{
            load(line.substring(3));
        } catch (IOException e) {

        }
    }
    if(tokens[0] == "h") {
        displayHelp();
    }
    if(tokens[0] == "x") {
        exit();
    }
    else {
        System.out.println("Please enter a valid command.");
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:53:41.240

您不应该使用“==”进行字符串比较。使用以下内容：

```
if(tokens[0].equals("h"))... 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:05:16.227

仅供参考，这是使用 switch 语句的替代版本（可能更易于阅读或键入的字符更少）：

```
public void processCommand(String line) {
    String[] tokens = line.split(" ");
    if(tokens[0].length() == 0) {
        System.out.println("Please enter a valid command.");
        return;
    }
    switch(tokens[0].charAt(0)) {
        case 'b':  insertBefore(line.substring(3));
                   break;
        case 'i':  insertAfter(line.substring(3));
                   break;
        case 'm':  moveUp(Integer.parseInt(line.substring(3)));
                   break;
        case 'u':  moveDown(Integer.parseInt(line.substring(3)));
                   break;
        case 'r':
        case 'd':  remove(Integer.parseInt(line.substring(3)));
                   break;
        case 'c':  clear();
                   break;
        case 's':  try {
                       save(line.substring(3));
                   } catch (IOException e) { }
                   break;
        case 'l':  try {
                       load(line.substring(3));
                   } catch (IOException e) { }
                   break;
        case 'h':  displayHelp();
                   break;
        case 'x':  exit();
                   break;
        default:   System.out.println("Please enter a valid command.");
    }
} 
```

# android - android maps api V2 是否需要启用后台数据？

> ID：13694436
> 
> 赞同：1
> 
> 时间：2012-12-04T00:52:50.677
> 
> 标签：android, google-maps, google-play-services, google-maps-android-api-2

由于新的 Google Maps Android API V2 需要 Google Play 服务，是否需要启用“后台数据”才能运行地图应用？我习惯于在不需要时关闭后台数据，因为它会很快耗尽电池，而且我不希望我的应用程序要求启用它。

更新：花了一天时间尝试通过以下方式进行研究：
- 安装 Android 支持库和 Google Play 服务 SDK（哦，看，已经有 rev. 3 的更新可用）。- 导入[https://developers.google.com/maps/documentation/android/intro#sample_code](https://developers.google.com/maps/documentation/android/intro#sample_code) > 中引用的示例代码。
- 获取新的 maps v2 API 密钥，并将其放入 AndroidManifest.xml
- （重新）配置示例代码，并运行/调试它。
演示应用程序不会在模拟器上运行，因为 Play 服务需要无法内置到模拟器中的软件，而且似乎需要做很多工作来解决这个问题，也许其他时间。所以我在带有 Froyo 的 Samsung Intercept 上运行了演示。SupportMapFragment 和/或 com.google.android.gms.maps.MapView 代码让我开始更新 Google Play 服务 APK。为此，我需要启用“背景数据”（这是最初的问题）。之后，该应用程序允许我选择各种地图演示，但没有一个显示地图。
LogCat 显示：

```
    12-04 19:50:28.937: I/(18909): =======Chunk::PrintChunkBlckInfo ======
    12-04 19:50:28.937: I/(18909): libGLESv1_CM_fimg.so 已卸载并且 GLES 1.1 API 已成功取消映射
    12-04 19:50:34.557: I/(18909): libGLESv1_CM_fimg.so 已加载并且 GLES 1.1 API 已成功映射
    12-04 19:50:34.562：我/（18909）：

    12-04 19:50:34.562: I/(18909): [块分配器] 1 个块（块大小：0x100000）
    12-04 19:50:34.562：我/（18909）：

    12-04 19:50:34.562: I/(18909): =======Chunk::PrintChunkBlckInfo ======
    12-04 19:50:34.562：我/（18909）：

    12-04 19:50:34.562：我/（18909）：------------------------ ------------------
    12-04 19:50:34.562: I/(18909): [0] 使用标志：1，开始：0，大小：1048576，下一个：0x0
    12-04 19:50:34.562：我/（18909）：

    12-04 19:50:34.562：我/（18909）：------------------------ ------------------
    12-04 19:50:34.562: I/(18909): 总纹理大小 0 字节 0 KB 总纹理计数 0
    12-04 19:50:34.562：我/（18909）：

    12-04 19:50:34.562：我/（18909）：------------------------ ------------------
    12-04 19:50:34.937: E/(18909): glCompressedTexImage2D(0xde1, 0, 0x8b96, 32, 8, 0, 1280, 0x0x369c70);
    12-04 19:50:34.942: E/(18909): glCompressedTexImage2D(0xde1, 0, 0x8b96, 32, 8, 0, 1280, 0x0x379b90);
    12-04 19:50:34.962: E/(18909): glCompressedTexImage2D(0xde1, 0, 0x8b96, 16, 1, 0, 1040, 0x0x347ac0);
```

所以现在，我仍然没有明确的答案，也不知道地图不显示的原因是我的密钥生成/插入问题（在 LogCat 中没有任何指示），还是（更有可能？） OpenGL的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:02:56.187

这三件事需要检查。

1.  设备是否安装了 Google 服务：

    ```
    switch (GooglePlayServicesUtil.isGooglePlayServicesAvailable(this)) {
    case ConnectionResult.SUCCESS:
        //Device has Google play services installed
        break;

    default:
        break;
    } 
    ```

2.  是否支持 OpenGL ES 2.0

    ```
    private boolean checkGL20Support(Context context) {
    EGL10 egl = (EGL10) EGLContext.getEGL();
    EGLDisplay display = egl.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);

    int[] version = new int[2];
    egl.eglInitialize(display, version);

    int EGL_OPENGL_ES2_BIT = 4;
    int[] configAttribs = { EGL10.EGL_RED_SIZE, 4, EGL10.EGL_GREEN_SIZE, 4,
            EGL10.EGL_BLUE_SIZE, 4, EGL10.EGL_RENDERABLE_TYPE,
            EGL_OPENGL_ES2_BIT, EGL10.EGL_NONE };

    EGLConfig[] configs = new EGLConfig[10];
    int[] num_config = new int[1];
    egl.eglChooseConfig(display, configAttribs, configs, 10, num_config);
    egl.eglTerminate(display);
    return num_config[0] > 0;
    } 
    ```

3.  验证 API 密钥是否正确 i。是否通过正确的调试密钥和包生成密钥 ii。通过“Google Maps Android API v2”而**不是**“Google Maps API v2”生成的密钥![在此处输入图像描述](../Images/0d58bb79eeebe403dfa44520e3b5a636.png)

# php - PHP 错误日志远程位置是什么？

> ID：13694440
> 
> 赞同：0
> 
> 时间：2012-12-04T00:53:37.087
> 
> 标签：php, logging, error-handling, error-log

在 PHP 中，我使用此代码来定义记录错误的位置：

```
ini_set('error_log', dirname(__FILE__) . '/err_logs/error_log.txt'); 
```

在普通服务器上它工作得很好，但我正在使用[Heroku](https://en.wikipedia.org/wiki/Heroku)，显然当虚拟机终止然后重新启动时，我丢失了错误日志文本文件！

我可以将错误日志文本文件存储到远程位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:19:17.937

创建一个每天通过电子邮件向您发送日志的[cron作业。](https://en.wikipedia.org/wiki/Cron)或者，您可以使用 SSH、FTP 或 Web 服务来移动它。

# sql-server - 为什么我的子表单在 MS Access 2007 的 INSERT 操作中不包括父表单的外键？

> ID：13694445
> 
> 赞同：0
> 
> 时间：2012-12-04T00:53:57.833
> 
> 标签：sql-server, forms, ms-access, ms-access-2007, backend

**问题**

当我在多项目子表单中插入新记录时，它会引发错误，因为它没有包含父表单中所需的外键。外键不允许为空，它试图插入一个空值。

**更多信息**

这个过程以前运行良好，但我已经将我的后端从 ACE 升级到 SQL Server 2005。它现在抛出这个错误：

```
Run-time error '3146':
ODBC--call failed.
[Microsoft][ODBC SQL Server Driver][SQL Server]Cannot insert the value NULL into
column 'EngagementLetterID_FK', table 'ClientDatabase.dbo.Services'; column does
not allow nulls. INSERT fails. (#515) [Microsoft][ODBC SQL Server Driver][SQL
Server]The statement has been terminated. (#3621) 
```

作为快速评论，子表单用于服务记录，父表单用于 EngagementLetter 记录。一个 EL 有许多服务。

我检查了表的设置，看起来不错，但我会说表运行正常——它不应该允许空值。我也不认为 SQL Server 应该负责识别正确的 FK - 前端应该这样做。但是，我的前端在使用 ACE 后端之前运行良好。所以我很难找出罪魁祸首是什么，而且我不知道如何进行更高级的 Access 调试（例如 beforeUpdate，告诉我 SQL INSERT 查询将是什么）。

我检查了我的其他一些父子表单，它们表现良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:15:09.933

我忘记提及的另一个细节 - 我同时进行了一些戏剧性的前端重建。对于子表单，我没有正确地将 EngagementLetterID_FK 与父表单中的 EngagementLetterID 关联起来。其结果是新的服务记录没有指定 EngagementLetterID_FK。

所以现在我已经更正了链接，它工作正常。

# matlab - Matlab imshow（）没有正确显示图像

> ID：13694449
> 
> 赞同：3
> 
> 时间：2012-12-04T00:54:24.220
> 
> 标签：matlab

我有一个简单的代码可以在 Matlab 中显示图像。我`imread()`用来阅读它并`imshow()`展示它。下面的代码，结果没有正确显示。希望可以有人帮帮我。

```
img = imread('/home/samuelpedro/Desktop/API - Projecto/coimbra_aerea.jpg');
figure, imshow(img); 
```

生成的图像如下。 ![在此处输入图像描述](../Images/08499712650200035abaec758a5ebe3f.png)

另外，如果我选择将其保存为新的 jpg 文件，则它会正确保存。

更新 1：

奇怪的是，如果我选择在首选项>图像处理中显示轴，它会被纠正

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:28:08.553

锁定您的屏幕截图，x 和 y 刻度丢失。它们应该出现在 Matlab 的标准配置中。也许在 Matlab 配置中有些东西搞砸了。尝试使用一个干净的新`~/.matlab`文件夹（之前重命名旧文件夹）来执行此操作。

或者......再次从你的屏幕截图来看，这看起来像后台的 Ubuntu/Unity。Unity 需要加速 (OpenGL)，这对于某些 Linux 图形驱动程序可能会随机出现错误。您可能想尝试在“干净”的 X 服务器（可能是 twm 环境）中启动 matlab 以排除这种情况。

将图像保存为（未压缩）位图 (bmp) 并使用 imread 读取。如果 jpg 被 imread 例程弄乱了，这应该排除这种情况。

最后但并非最不重要的一点是，磁盘上 jpg 的损坏副本，一些翻转的位。在文件的副本上运行 md5sums。

# java - 自动填充第二个 JFRAME

> ID：13694451
> 
> 赞同：-2
> 
> 时间：2012-12-04T00:54:47.593
> 
> 标签：java, arrays, select, jframe, jlist

我有一个问题，我正在制作一个应用程序，您可以在其中首先从 jFrame 中的 jList 中选择一个名称。选择名称并按下继续按钮后，会弹出第二个 jFrame。

在这个 jFrame 上有几个文本字段，我想自动填写有关在第一个 jFrame 中选择的选定名称的信息。并且这些自动填写的信息会根据选择的名称而有所不同。

我已经在 arraylist 中有第一个具有 4 个名称的 jFrame，但现在我停留在第二部分，其中选择的名称与必须自动完成的额外信息一起传输到第二个框架

我希望有人可以帮助我，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:14:22.290

创建具有多个的 Swing 应用程序`JFrames` [可能会出现问题](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice/9554657#9554657)。

更好和更简单的方法是`CardLayout`在单个框架内使用和拥有面板。您`ArrayList`可以是主`JFrame`类中的成员变量，并且可以随着您的进展轻松地使用数据进行更新。

请参阅：[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:01:45.470

好吧，这就是我的做法：

> 退出当前jframe
> 
> 将 arrayList 中的数据传递给创建新 JFrame 的函数
> 
> 填充新的 JFrame

# java - Java初学者：让一个类知道另一个类已经完成

> ID：13694457
> 
> 赞同：0
> 
> 时间：2012-12-04T00:55:35.387
> 
> 标签：java

我正在制作一个具有主类、战斗类、怪物类、玩家类等的 Java 游戏……我在主类框架上显示了统计信息。按下按钮会创建一个新的战斗框架，其中还会显示统计数据。战斗结束后，统计数据有所不同（例如，玩家的生命值低于被怪物击中前的值）。我需要这些统计数据的变化在战斗框架消失后反映在主框架上。

告诉主要班级战斗结束并刷新统计数据的最佳方式是什么？代码如下。显然，这是一项正在进行的工作，还有一些其他不相关的类。

开始战斗的主类的一部分（即，创建一个新的战斗对象，它是一个 JFrame）：

```
public class DarkWorld extends JFrame implements ActionListener
{
    ...
    public DarkWorld()
    {
        ...
    public void createInfoLabel()
    {
        infoLabel.setText("<html>Player: " + DarkWorld.user.getPlayerName()
            + "<br>Health: " + DarkWorld.user.getHealth()
            + "<br>Attack Damage: " + DarkWorld.user.getAttackDamage()
            + "<br>Level: " + DarkWorld.user.getLevel()
            + "<br>Experience: " + DarkWorld.user.getExperience());
    }
    ...
        if(source == monsterButton)
        {

            BattleFrame battle = new BattleFrame();
            final int WIDTH = 700;
            final int HEIGHT = 500;
            battle.setSize(WIDTH, HEIGHT);
            battle.setVisible(true);
        }
        ...
} 
```

战斗课的部分：

```
...

public class BattleFrame extends JFrame implements ActionListener
{
    Monster newMonster = new Monster();
    ...
    public BattleFrame()
    ...
    public void displayStats()
    {
        monsterLabel.setText("<html>Type: " + newMonster.getMonsterName()
                + "<br>Health: " + newMonster.getHealth()
                + "<br>Attack: " + newMonster.getAttackName()
                + "<br>Attack Damage: " + newMonster.getAttackDamage());
        playerLabel.setText("<html>Player: " + DarkWorld.user.getPlayerName()
                + "<br>Health: " + DarkWorld.user.getHealth()
                + "<br>Attack Damage: " + DarkWorld.user.getAttackDamage()
                + "<br>Level: " + DarkWorld.user.getLevel()
                + "<br>Experience: " + DarkWorld.user.getExperience());
    }
    ...
            if(newMonster.getHealth() <= 0)
            {
                ...
                JOptionPane.showMessageDialog(null, "You killed the monster! You found a " + newItem.getItemName()
                        + ". It has been added to your inventory.");
                dispose();
            }
            if(DarkWorld.user.getHealth() <= 0)
            {
                //if player dies (health reaches zero), the game is over - need to make game end
                displayStats();
                JOptionPane.showMessageDialog(null, "The monster killed you!");
                dispose();
            }
        }
        ...
} 
```

编辑：试图在这里简化代码，以便更清楚我在问什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:12:40.813

为什么不在主类中创建一个方法：

```
public void updateStats() { /*update the stats*/ } 
```

然后，在您的 Battle 类中，当战斗完成时，您只需调用该方法。另外，我认为您可能会发现在您的项目中实现单例模式很有用，因为听起来好像始终只有一个战斗课程。

你可能还想把所有的战斗逻辑放到一个类中。我得到的最好的编程建议是将逻辑与 GUI 分开。

或者，您可能只想忽略我所说的一切，因为我只有 13 岁，而且我使用 C# 编程，而不是 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:35:54.360

我可以建议你不要这样做，而是让统计显示屏幕监听主要播放器对象。当主要播放器对象的其中一个统计数据发生更改时，统计数据屏幕可以自行更新。

```
...
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeEvent;
...

public class User {

    private List<PropertyChangeListener> propertyListeners;

    ... add, and remove listener methods ...        

    public void setHitPoints(int newValue){
       PropertyChangeEvent event = new PropertyChangeEvent(this, "hitPoints", myHitpoints, newValue);
       myHitpoints = newValue;
       for (PropertyChangeListener listener : propertyListeners){
          listener.propertyChange(event);
       }
    } 
```

# javascript - jQuery下拉菜单 - 当用户点击内部ul之外的任何地方时隐藏内部ul

> ID：13694460
> 
> 赞同：2
> 
> 时间：2012-12-04T00:56:01.987
> 
> 标签：javascript, jquery, css, drop-down-menu, menu

我有一个 jQuery 下拉菜单，一切正常，除了当用户单击内部 ul 外部（例如，`body`或文档的其余部分）时，内部 ul 不会拉回。有任何想法吗？这是我的代码：

```
$(document).ready(function() {
    $("#cp-nav ul li").click(function() {
        $("#cp-nav ul ul").slideUp("fast", function(){});

        $("ul", this).slideDown("fast", function(){
            $("ul", this).slideUp("fast");
        });
    });
}); 
```

所以也许做类似的事情：

```
$("ul", !this).slideUp("fast", function(){}); 
```

我对 jQuery 和 JavaScript 有点陌生，我试图四处寻找我的问题，但它有点难以表达。`callback`我还注意到jQuery有一个函数`slideUp`函数，但我不知道如何使用它。有什么帮助吗？将不胜感激！:-)

# 编辑

**HTML：**

```
<nav id="cp-nav">
    <ul>
        <li><a href="home.html">Home</a></li>
        <li>
            <a href="products.html">Products</a>
            <ul>
               <li>Design Platforms</li>
               <li>3D Animation</li>
               <li>Graphic Design</li>
               <li>Python</li>
            </ul>
        </li>
        <li>
            <a href="products.html">About</a>
            <ul>
               <li>Company History</li>
               <li>CEO &amp; Founder</li>
               <li>etc.</li>
               <li>etc.</li>
            </ul>
        </li>
        <li>
            <a href="products.html">etc.</a>
            <ul>
               <li>etc.</li>
               <li>etc.</li>
               <li>etc.</li>
               <li>etc.</li>
            </ul>
        </li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:00:51.007

这会做到

```
$(document).ready(function() {
    $("#cp-nav").click(function(e){
        e.stopPropagation(); // this stops the bubbling from going any higher
    });
    $('body').click(function(){ // this is only reached if the clicks comes outside the #cp-nav
        $("#cp-nav ul ul").slideUp('fast');
    });
    $("#cp-nav ul li").click(function() {
        $("#cp-nav ul ul").slideUp("fast", function(){});

        $("ul", this).slideDown("fast", function(){
            $("ul", this).slideUp("fast");
        });
    });
}); 
```

# php - 带有修订系统的文章

> ID：13694461
> 
> 赞同：0
> 
> 时间：2012-12-04T00:56:19.713
> 
> 标签：php, sql, database-design

对于我正在制作的项目，我需要有可能（就像 stackoverflow 一样）保存所有以前的帖子编辑（修订）。

考虑我可以与帖子有一些 1 到 N 的关联（例如 1 个帖子关联 5 张图片）。

你会建议我如何为此设计数据库？
当然，帖子的 ID 应该保持不变，以免破坏 URL：

```
site/post/123 (whenever revisions it is) 
```

对帖子的每个修订都应手动批准，因此您不能直接显示最后插入的修订。你会建议我如何设计数据库？

我已经硬了

```
Table: Post
postID | reviewID | isApproved | authorID |  text 
```

和图像表（例如图像，但它可能是一切）

```
Secondary Table: Image
imageID | postID | reviewID | imagedata 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:06:34.187

在全局信息和版本信息之间分离帖子的所有方面。换句话说，在修订中可以更改哪些内容以及始终适用于任何修订的内容。这些将是您的两个表中的字段，一个用于您的帖子，一个用于修订。您还需要一行来指定修订所针对的帖子以及修订是否被批准，并且在帖子表上，您需要一行来指定当前修订的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:14:06.220

实际上，我会将 post 表一分为二，一个是已批准的修订版，另一个是最新（未批准）的修订版。合理的是，任何不是最新的未经批准的修订都将被下一个取代（除非您真的想跟踪所有中间修改，无论是否批准）。

```
Table: OldPost
  postID | reviewID | authorID |  text

Table: PendingPost
  postID | authorID |  text 
```

在该布局中，每当新修订被批准时，必须将其移至已批准的修订，但您不必在显示整个历史记录时将其过滤掉，相反，您不必过滤已批准的修订批准您网站的一部分。

您甚至可以使用另一个专用表格来优化布局，以用于最新批准的修订（因此总共三个表格用于帖子，不包括附件）。这种分区将提高站点对最常见查询的整体性能，但在您需要所有数据时会以更复杂的查询为代价（操作频率较低）。

```
Table: CurrentPost
   postID | authorID |  text 
```

如您所见，此表结构与待处理帖子的表结构相同，因此更新将是微不足道的。将修订移动到旧的 post 表需要找出修订计数，但无论如何您都必须使用更经典的数据库布局来执行该操作。

关于附件表，布局似乎有效。

# mysql - SQL 按组计数

> ID：13694463
> 
> 赞同：0
> 
> 时间：2012-12-04T00:57:11.737
> 
> 标签：mysql, select, join, nested

我有一张看起来像这样的桌子

```
id  name answer   question
1   john  correct 1
1   john  correct 2
1   john  correct 3
1   john  wrong   4
2   lee   wrong   1
2   lee   correct 2
2   lee   correct 3
3   ana   correct 1
3   ana   wrong   2 
```

我希望能够获得所有唯一用户的列表，并查看他们有多少问题是正确的，有多少问题是错误的。

我尝试过这样的事情，但我似乎无法让它工作：

```
SELECT id, user_id, name, question_id, (select count(answer) from table where answer = 'CORRECT') as correct, (select count(answer) from table where answer= 'WRONG') as wrong FROM table GROUP BY user_id 
```

有人可以帮我让我走上正轨吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:06:50.337

尝试这个：

```
SELECT name, answer, COUNT(*) FROM yourtablenamehere GROUP BY name, answer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:26:34.543

你用条件和做你想做的事：

```
select name, sum(case when answer = 'correct' then 1 else 0 end) as correct,
       sum(case when answer = 'wrong' then 1 else 0 end) as wrong
from table t
group by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:17:50.940

对于 MySQL，它可能是这样的：

```
SELECT user_id, name,SUM(IF(answer='correct',1,0)) AS correct,SUM(IF(answer='wrong',1,0)) as wrong FROM table GROUP BY user_id 
```

# c# - CS0411：无法从用法推断方法“System.Web.Mvc.Html.EditorExtensions.EditorFor<>)”的类型参数

> ID：13694464
> 
> 赞同：1
> 
> 时间：2012-12-04T00:57:12.267
> 
> 标签：c#, asp.net-mvc-3, model, html-helper

我创建了一个模型类；一个简单的 POCO 类：

```
public class ContactModel
{
    [Required]
    public string Name { get; set; }

    [Required]
    public string Email { get; set; }

    [Required]
    public string Message { get; set; }

    [Required]
    public string Work{ get; set; }        
} 
```

在视图中，我想为这个模型调用和编辑：

```
<div class="contact-form">
    @Html.EditorFor(new Map.WebUI.Models.ContactModel())
</div> 
```

但我得到了错误：

> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0411：无法从用法中推断方法“System.Web.Mvc.Html.EditorExtensions.EditorFor(System.Web.Mvc.HtmlHelper, System.Linq.Expressions.Expression>)”的类型参数。尝试明确指定类型参数。
> 
> 源错误：

**考虑到视图不是**针对此对象类型的强类型，我如何为随机类调用编辑器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:01:49.563

在您看来，您设置在顶部`@model Map.WebUI.Models.ContactModel`

那么你需要这样使用EditorFor：

```
@Html.EditorFor(x => x.ContactModel()) 
```

参数是一个拉姆达表达式。

**编辑：**

好的，我不知道你不能改变它......所以......我认为你不能使用 EditorFor。但是您可以做的是使用 PartialView 并使用：

```
@Html.Partial("YourContactView", new Map.WebUI.Models.ContactModel()) 
```

**编辑 2**

您也可以使用`@Html.Editor(string expression, ViewData data)`... 这样您就可以将要传递给编辑器的模型放置在 ViewData 对象中。

# python - 这个 Python 函数不应该一直返回 6 吗？

> ID：13694465
> 
> 赞同：1
> 
> 时间：2012-12-04T00:57:37.697
> 
> 标签：python

我是 Python 新手，正在学习函数。我遇到了以下功能，并在我的智慧中理解了它是如何工作的。在我看来，无论 的值如何`b`，答案都应该是 6，但事实并非如此。

***代码***

```
def mult(a, b):
    if b == 0:
        return 0
    rest = mult(a, b - 1)
    value = a + rest
    return value
print "3 * 2 = ", mult(3, 2) 
```

我对发生的事情的理解

1.  因为`b`不是 0 它继续
2.  `rest`被赋值`3, 1`并再次运行函数
3.  因为`b`是 1 并且确实等于 0，所以它继续`rest`
4.  `rest`被赋值`3, 0`并再次运行函数
5.  由于`b`现在为零，因此返回值 0
6.  然后它继续进行，`value`其值为 3 + 3，`a`其值为 3，`rest`值为 3，即`(3,0)`
7.  它返回值 6

**但是**如果我分配`mult(3,4)`，它会返回值 12。根据我的理解，这是不可能的。显然，我不理解逻辑流程。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:06:52.690

这个函数的基本逻辑是：

让我们（`a`加减）直到`1`。像这样对你来说可能更有意义：`b``b == 0`

```
def mult(a, b):
    value = 0
    while b > 0:
        b = b - 1
        value = value + a
    return value 
```

只是代替了一个while循环，你的函数不断地调用自己。我设法联系到`mult`他自己，他愿意解释：

> 嗨，我的名字是 mult，我是 Recurser。递归器是计算机科学中的常见品种，我们有一个特殊功能；我们可以克隆自己。可悲的是，我被诅咒无法繁殖。尽管如此，我还是想实现我作为乘数的梦想，并且我确实设法找到了实现它的方法。就是这样：
> 
> 当你要我繁殖`(a, b)`时，我会生成一个克隆并问他`(a, b - 1)`。克隆重复这个过程，直到产生一个被询问的克隆（`a`, `0`）。当这种情况发生时（然后有一行我自己+`b`克隆），他回答产生他的克隆：`0`。那个克隆反过来又增加`a`了他刚刚被告知的内容（第一次是`0 + a`），并回答了他面前的克隆。这个过程一直重复，直到我得到自己生成的克隆的回答。我对此进行补充`a`，并将其作为最终答案返回给您！

```
def mult(a, b):
    # Should I ask a clone?
    if b == 0:
        # No! I reply 0 to my asker.
        return 0

    # Yes! I spawn a clone and ask him (a, b - 1) and wait for an answer to
    # store in 'rest'
    rest = mult(a, b - 1)

    # I take the answer and add to it the 'a' I was told
    value = a + rest

    # I return the value I calculated to my asker
    return value

print "3 * 2 = ", mult(3, 2)  # Here someone asks me (3, 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T01:06:11.253

您可以检测您的代码，以便更轻松地查看正在发生的事情

```
def mult(a, b):
    print "mult(%s, %s)"%(a, b)
    if b == 0:
        return 0
    rest = mult(a, b - 1)
    value = a + rest
    print "returns %s"%value
    return value
print "3 * 2 = ", mult(3, 4) 
```

* * *

```
3 * 2 =  mult(3, 4)
mult(3, 3)
mult(3, 2)
mult(3, 1)
mult(3, 0)
returns 3
returns 6
returns 9
returns 12
12 
```

由于递归，打印语句是嵌套的

IE。`mult(3, 0)`返回 3，`mult(3, 1)`返回 6，依此类推

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T01:06:08.057

1.  `mult()`被调用`3, 2`（这是调用＃1）

2.  哪个调用`mult()`（`3, 1`这是调用＃2）

3.  哪个调用`mult()`（`3, 0`这是调用＃3）

4.  返回 0（因为`b`是零）来调用 #2

5.  call #2 现在返回 3 + 0 来调用 #1

6.  call #3 现在返回 3 + 3

基本上，每次调用都会将`a`值增加`a`，递归地深入研究 istelf`b`时间。因此，将 3 添加到自身 4 次将得到 12。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T01:08:43.543

您的逻辑在第 5 条之前是正确的。然后在第 6 条您跳过了一些步骤。这是一个递归函数。通过在纸上绘制事件树更容易理解它，但让我们先恢复你的逻辑：

多（3,4）：

```
 1\. a = 3, b = 4
 1\. rest = mult(3, 3)
 2\. a = 3, b = 3
 2\. rest = mult(3, 2)
 3\. a = 3, b = 2
 3\. rest = mult(3, 1)
 4\. a = 3, b = 1
 4\. rest = mult(3, 0)
 5\. a = 3, b = 0
 5\. return 0
 4\. value = 3 + 0
 4\. return 3
 3\. value = 3 + 3
 3\. return 6
 2\. value = 3 + 6
 2\. return 9
 1\. value = 3 + 9
 1\. return 12 
```

在上面的示例中，行首的每个数字代表递归中的步骤。它从第 1 步开始，在这种情况下一直到第 5 步，然后以您的最终答案逐个返回，直到第 1 步。

该函数通过求和实现乘法的概念。例如，3 * 4 相当于将数字“4”加 3 次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T01:13:10.087

这是一种直观地查看递归如何工作的方法：

```
COUNTER = 0

def mult(a, b):
    global COUNTER

    COUNTER+=1
    print " "*COUNTER + "Called with", a,b

    if b == 0:
        return 0
    rest = mult(a, b - 1)
    value = a + rest

    COUNTER -= 1
    print " "*COUNTER, "Value:", value 

    return value

print "3 * 4 = "
print mult(3, 4) 
```

输出

```
3 * 4 = 
 Called with 3 4
  Called with 3 3
   Called with 3 2
    Called with 3 1
     Called with 3 0
     Value: 3
    Value: 6
   Value: 9
  Value: 12
12 
```

您可以看到调用堆栈是如何一直向下移动到底部 (b==0)，然后将值返回到链的顶部。

# regex - 正则表达式匹配除字符串之外的所有内容

> ID：13694466
> 
> 赞同：1
> 
> 时间：2012-12-04T00:57:38.290
> 
> 标签：regex

给定字符串`beginend`where`begin`和`end`都是可选的，我想匹配整个字符串和 back-reference only `begin`。`Begin`未知但字母数字；`end`是字面意思`end`。我该怎么做呢？

万一这很重要，我将在 Textpad 宏中使用它来将“beginend”替换为其他内容，包括“begin”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:50:04.623

**已编辑**（参见块引用后）

> 我没有评论权限，所以我不能评论他的解决方案，但 Qtax 的解决方案将不起作用，因为它假定 `begin`永远不会包含子字符串“end”，例如，它不会匹配字符串“sendingend”。
> 
> 我的解决方案： `^([A-Za-z0-9]*)(?:end)?$`
> 
> 当然，这也取决于您所说的*alphanumeric*是什么意思。我的例子有最严格的定义，即只有大写和小写字母加上数字。如果需要，您需要添加其他字符。如果你想包括下划线以及那些字符，你可以`[A-Za-z0-9]`用`\w` （相当于`[A-Za-z0-9_]`）替换整个笨重的。`\s`如果需要空格，请添加。
> 
> 既然你说你的正则表达式知识是有限的，我会向你和其他人解释解决方案的其余部分。
> 
> *   `^`并`$`分别匹配字符串的开头和结尾。~~通过`$`特别包含，您可以保证您遇到的最后一个“结束”确实在最后。例如，没有它们，它仍然会匹配字符串“sendingsending”，而您的程序的其余部分会认为它在末尾找到了“end”。有了这些，它仍然会匹配“sendingsending”，因为允许任何字符（见下文），但脚本中的其他步骤将识别“end”的存在。~~对于这个当前字符串实际上并不重要，因为`([A-Za-z0-9]*)`如果“end”不存在，它将捕获整个字符串。然而， `(end)$`找到它。
> *   `([A-Za-z0-9]*)`：方括号包含允许的特定字符（如果您不知道，您一定要阅读此内容）。这`*`意味着它将匹配这些字符之一 0 次或更多次，因此这允许没有字符串（即，仅“结束”）以及超长字符串。括号正在捕获该模式，因此您可以反向引用它。
> *   `(?:end)?`：最后一个`?`使它匹配这个模式0或1次（即，使它成为可选的）。该`(?:string)`结构允许您像使用括号一样将字符组合在一起，但`?:` 它*不会*保存该模式，因此它使用的内存更少。在您的情况下，该内存可以忽略不计，但很高兴知道以备将来使用。
> 
> 如果您需要更多帮助，请尝试使用 Google 搜索“正则表达式”。有很多很好的参考资料。您也可以测试它们。我个人最喜欢的测试器叫做[My Regex Tester](http://myregextester.com/index.php)。
> 
> 祝你好运！

我刚刚尝试查找 TextPad 宏，您可能会遇到问题。正如我上面所解释的，要验证字符串末尾是否存在“end”，您需要一些单独的东西。我正在设想某种条件，例如 IF `(end)$`THEN 替换为`^([A-Za-z0-9]*)(?:end)?$`ELSE 使用整个字符串。但是，我不知道您是否可以使用这些宏来做到这一点……很难说，因为我不是 TextPad 用户，而且几乎没有文档。如果你不能，那么我认为你将不得不对其施加一些限制。一个想法是不允许“结束”出现在`begin`子字符串（Qtax 的解决方案就是这样做的）。但是现在我想知道……如果“结束”是可选的，并且如果不允许使用条件，那么拥有它有什么意义呢？...也许我想太多了。我在等你的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:29:28.177

尝试使用积极的前瞻性。这是一个零宽度断言，因此不会包含在匹配中。它还允许子字符串`end`出现在字母数字字符串中

```
([a-z0-9]*)(?=end) 
```

这就是说：仅在紧跟其后的情况下才匹配字母数字字符串`end`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:17:18.703

要匹配不包含“end”的“字母数字”字符串，您可以使用以下内容：

```
(?:(?!end)[A-Za-z\d])+ 
```

像这样的表达式可以满足您的要求：

```
^((?:(?!end)[A-Za-z0-9])+)(?:end)?\z 
```

# vb.net - WIA 如何解锁/断开/重置扫描仪

> ID：13694467
> 
> 赞同：1
> 
> 时间：2012-12-04T00:57:42.110
> 
> 标签：vb.net, wia, image-scanner

我正在与 WIA 作斗争。我有 2 台扫描仪连接到同一台计算机，我正在编写一个应用程序（VB.net）从扫描仪 1 扫描，然后是扫描仪 2，然后再次 scanenr1。

WIA 很高兴在扫描仪 1 之后选择扫描仪 2，但在扫描仪 2 之后拒绝返回扫描仪 1。看起来扫描仪 1 被“锁定”了？首次使用后。是否可以在 VB 中解锁/重置/断开 WIa 设备，以便稍后在扫描仪 1 上返回？

我已经尝试过：

```
scanner.disconnect 
scanner.dispose
scanner.closes
scanner.disconnect()
scanner.dispose()
scanner.close() 
```

它们都会生成错误消息，

我也试过

```
scanner=nothing 
```

在循环结束时和

```
System.Runtime.InteropServices.Marshal.ReleaseComObject(scanner) 
```

最后两个不会产生任何错误，但不能解决问题。

我无法想象会有一个 .connect 功能没有它的对应部分来断开设备！?

有没有人知道如何在 VB.net 中使用 WIA 解锁或断开扫描仪> 谢谢

# java - java.lang.nullpointer 异常？

> ID：13694472
> 
> 赞同：1
> 
> 时间：2012-12-04T00:58:31.570
> 
> 标签：java, arrays

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class ReadCellPhones {
    public static void main(String Args[]) throws IOException {
        Scanner s = new Scanner(System.in);
        File Input = new File("Cellphone.txt");
        Scanner f = new Scanner(Input);

        String[] Cells = new String[20];
        Double[] Amounts = new Double[20];

        Double threshold = printmenu();
        int number = 0;

        while (f.hasNext()) {
            Cells[number] = f.next();
            Amounts[number] = f.nextDouble();
            number++;
        }

        System.out.println("NUMBER\tArmount");

        for (int i = 0; i < Amounts.length; i++) {
            if (Amounts[i] > threshold)// THIS IS WHERE THE NULLPOINTER
            // EXCEPTION OCCURS
            {
                System.out.print(Cells[i] + "\t" + Amounts[i]);
            }
        }
    }

    static Double printmenu() {
        Scanner s = new Scanner(System.in);

        System.out.print("Enter the filename: ");
        String Filename = s.nextLine();

        System.out.print("Cell Bill Threshold: ");
        Double threshold = s.nextDouble();

        return threshold;
    }
} 
```

所以我要做的是从文件中读取数据，将数据存储在 2 个数组中，如果 Amounts 数组值大于为阈值变量输入的值，则打印出数组。但是当我尝试运行程序时，会弹出空指针错误，知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:02:15.843

问题是您读入的记录少于 20 条。

数组中的每个 Double`Amounts`默认值为 null。`Amounts[i]`当 java 为与 比较而进行拆箱时`threshold`，它会尝试取消引用此 null 值，从而创建异常。

解决方案是标记有多少值被成功读入，并且只将这些值与阈值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:01:06.443

如果阈值小于 20，您的 for 循环将继续到 Amounts 数组的末尾，其中将包括未初始化的双精度数。根据您想要的功能，我建议循环直到我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:11:55.073

不能保证文件数据的数量为 20。

所以改变你的循环限制计数器

```
//for(int i=0;i<Amounts.length;i++)
for(int i=0;i<number;i++)  //variable number has a count of file's data 
```

祝你好运

# linear-algebra - 使用 CGAL 最大化二次规划

> ID：13694473
> 
> 赞同：3
> 
> 时间：2012-12-04T00:58:45.997
> 
> 标签：linear-algebra, linear-programming, cgal, quadratic

我正在使用 CGAL 来解决一些[二次规划](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/QP_solver/Chapter_main.html)问题。

假设我想最小化`x^2`从`x`( `-oo`-infinity) 到 `+oo`. 这可以通过以下方式轻松解决：

```
 Program qp (CGAL::SMALLER, false, 0, false, 0);
      qp.set_d(0, 0, 2);

      Solution s = CGAL::solve_quadratic_program(qp, ET()); 
```

结果当然会返回`0`。现在假设我想最大化 `x^2`. 为此，我必须最小化`-x^2`. 但是以下内容在 CGAL 中不起作用**：**

```
 Program qp (CGAL::SMALLER, false, 0, false, 0);
      qp.set_d(0, 0, -2);

      Solution s = CGAL::solve_quadratic_program(qp, ET()); 
```

因为现在的矩阵`D = [-2]`不是半正定的（二次规划问题的 API “要求” D 是半正定的）。通过运行上面的代码片段，`0`会返回错误的结果而不是`-oo`.

为了最大化像`x^2`CGAL 中的目标函数，我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:09:40.930

CGAL 的[文档](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/QP_solver/Chapter_main.html)说您的目标函数必须是凸函数的最小化。你试图最小化 -x^2，它不是凸的 - 所以你不能用 CGAL 做到这一点。

此外，在我链接的文档的第 10.2.2 节中，它说尝试最小化非凸函数甚至可能不会警告您问题是非凸的，而是返回一条消息，而不是找到最佳解决方案。也就是说，如果您要将 CGAL 用于 QP，请确保它是凸二次的，否则您将得到错误的答案。

您可以考虑使用可以处理非凸非线性优化的求解器。[IPOPT](https://projects.coin-or.org/Ipopt)是开源的，如果您的目标函数和约束是两次连续可微分，它将起作用。[COIN-OR](http://www.coin-or.org/projects/)有几个可能适合您的求解器（请参阅“优化确定性非线性”）。[KNITRO](http://www.ziena.com/knitro.htm)是一款出色的商业求解器。

# tcl - 需要帮助 - TCL 中的字符串映射

> ID：13694476
> 
> 赞同：4
> 
> 时间：2012-12-04T00:58:57.400
> 
> 标签：tcl

如何对存储在变量中的值执行字符串映射？示例：我将输出放在变量中，例如“a”。

```
set a "a.b12.d4" (its unknown) 
```

是否可以使用字符串映射将 $a 的内容映射为另一个变量 b 中的“\t”？

喜欢，

```
 set c [string map {"contents of $a" "\t"}$b] 
```

{我知道 $a 不能在这里使用。有没有办法在字符串映射中替换 $a 的内容？}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:11:07.120

如果您不使用花括号，因为它们会阻止替换，这是可能的：

```
set a "a.b12.d4"
set b "$a.123"
puts [string map [list $a \t] $b] 
```

# ruby - QtRuby 使用参数/参数连接信号和插槽

> ID：13694478
> 
> 赞同：6
> 
> 时间：2012-12-04T00:59:18.270
> 
> 标签：ruby, qt, qt4, qtruby

我想知道如何连接到带参数的信号（使用 Ruby 块）。

我知道如何连接到一个不带参数的：

```
myCheckbox.connect(SIGNAL :clicked) { doStuff } 
```

但是，这不起作用：

```
myCheckbox.connect(SIGNAL :toggle) { doStuff } 
```

它不起作用，因为切换插槽带有一个参数`void QAbstractButton::toggled ( bool checked )`。我怎样才能使它与参数一起工作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-19T18:43:26.750

对您的问题的简短回答是，您必须使用以下方法声明要连接的插槽的方法签名`slots`：

```
class MainGUI < Qt::MainWindow
  # Declare all the custom slots that we will connect to
  # Can also use Symbol for slots with no params, e.g. :open and :save
  slots 'open()', 'save()',
        'tree_selected(const QModelIndex &,const QModelIndex &)'

  def initialize(parent=nil)
    super
    @ui = Ui_MainWin.new # Created by rbuic4 compiling a Qt Designer .ui file
    @ui.setupUi(self)    # Create the interface elements from Qt Designer
    connect_menus!
    populate_tree!
  end

  def connect_menus!
    # Fully explicit connection
    connect @ui.actionOpen, SIGNAL('triggered()'), self, SLOT('open()')

    # You can omit the third parameter if it is self
    connect @ui.actionSave, SIGNAL('triggered()'), SLOT('save()')

    # close() is provided by Qt::MainWindow, so we did not need to declare it
    connect @ui.actionQuit,   SIGNAL('triggered()'), SLOT('close()')       
  end

  # Add items to my QTreeView, notify me when the selection changes
  def populate_tree!
    tree = @ui.mytree
    tree.model = MyModel.new(self) # Inherits from Qt::AbstractItemModel
    connect(
      tree.selectionModel,
      SIGNAL('currentChanged(const QModelIndex &, const QModelIndex &)'),
      SLOT('tree_selected(const QModelIndex &,const QModelIndex &)')
    )
  end

  def tree_selected( current_index, previous_index )
    # …handle the selection change…
  end

  def open
    # …handle file open…
  end

  def save
    # …handle file save…
  end
end 
```

*请注意，传递给的签名`SIGNAL`不`SLOT`包括任何变量名称。*

此外，正如您在评论中得出的结论，完全取消“插槽”概念并使用 Ruby 块连接信号以调用您喜欢的任何方法（或将逻辑放在排队）。使用以下语法，您**不需要**使用`slots`方法来预先声明您的方法或处理代码。

```
changed = SIGNAL('currentChanged(const QModelIndex &, const QModelIndex &)')

# Call my method directly
@ui.mytree.selectionMode.connect( changed, &method(:tree_selected) )

# Alternatively, just put the logic in the same spot as the connection
@ui.mytree.selectionMode.connect( changed ) do |current_index, previous_index|
  # …handle the change here…
end 
```

# c# - 查找字符串中空行的索引

> ID：13694486
> 
> 赞同：2
> 
> 时间：2012-12-04T01:00:05.693
> 
> 标签：c#, string

假设我有一个包含文本文件、回车和制表符的字符串。如何在该字符串中找到第一个空白行（包括仅包含空白的行）的索引？

**我试过的：**

在这种情况下，我有一个工作函数，它利用一堆丑陋的代码来查找空行的索引。必须有比*this*更优雅/更易读的方法。

为了清楚起见，下面的函数将字符串中的部分从提供的“标题”返回到标题后第一个空行的索引。完整提供，因为大部分内容都用于搜索该索引，并避免任何“为什么在世界上你需要空行索引”的问题。如果它发生在这里，也可以抵消 XY 问题。

（显然有效，尚未测试所有边缘情况）代码：

```
// Get subsection indicated by supplied title from supplied section
private static string GetSubSectionText(string section, string subSectionTitle)
    {
        int indexSubSectionBgn = section.IndexOf(subSectionTitle);
        if (indexSubSectionBgn == -1)
            return String.Empty;

        int indexSubSectionEnd = section.Length;

        // Find first blank line after found sub-section
        bool blankLineFound = false;
        int lineStartIndex = 0;
        int lineEndIndex = 0;
        do
        {
            string temp;
            lineEndIndex = section.IndexOf(Environment.NewLine, lineStartIndex);

            if (lineEndIndex == -1)
                temp = section.Substring(lineStartIndex);
            else
                temp = section.Substring(lineStartIndex, (lineEndIndex - lineStartIndex));

            temp = temp.Trim();
            if (temp.Length == 0)
            {
                if (lineEndIndex == -1)
                    indexSubSectionEnd = section.Length;
                else
                    indexSubSectionEnd = lineEndIndex;

                blankLineFound = true;
            }
            else
            {
                lineStartIndex = lineEndIndex + 1;
            }
        } while (!blankLineFound && (lineEndIndex != -1));

        if (blankLineFound)
            return section.Substring(indexSubSectionBgn, indexSubSectionEnd);
        else
            return null;
} 
```

后续编辑：

**结果（很大程度上基于康斯坦丁的回答）**：

```
// Get subsection indicated by supplied title from supplied section
private static string GetSubSectionText(string section, string subSectionTitle)
{
        string[] lines = section.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
        int subsectStart = 0;
        int subsectEnd = lines.Length;

        // Find subsection start
        for (int i = 0; i < lines.Length; i++)
        {
            if (lines[i].Trim() == subSectionTitle)
            {
                subsectStart = i;
                break;
            }
        }

        // Find subsection end (ie, first blank line)
        for (int i = subsectStart; i < lines.Length; i++)
        {
            if (lines[i].Trim().Length == 0)
            {
                subsectEnd = i;
                break;
            }
        }

        return string.Join(Environment.NewLine, lines, subsectStart, subsectEnd - subsectStart); 
```

}

结果和 Konstantin 的答案之间的主要区别在于框架版本（我正在使用 .NET 2.0，它不支持 string[].Take），并利用 Environment.NewLine 而不是硬编码的 '\n' . 比原来的通行证更漂亮、更易读。谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:06:31.223

您是否尝试过使用[String.Split 方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
string s = "safsadfd\r\ndfgfdg\r\n\r\ndfgfgg";
string[] lines = s.Split('\n');
int i;
for (i = 0; i < lines.Length; i++)
{
    if (string.IsNullOrWhiteSpace(lines[i]))     
    //if (lines[i].Length == 0)          //or maybe this suits better..
    //if (lines[i].Equals(string.Empty)) //or this
    {
        Console.WriteLine(i);
        break;
    }
}
Console.WriteLine(string.Join("\n",lines.Take(i))); 
```

编辑：响应 OP 的编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T01:06:38.477

“空白行”是指仅包含空格的行？是的，你应该使用正则表达式；您正在寻找的语法是`@"(?<=\r?\n)[ \t]*(\r?\n|$)"`.

*   `(?<=`…<code>) 表示前瞻，应该先于你正在寻找的东西。
*   `\r?\n`表示换行符，同时支持 Unix 和 Windows 约定。
*   `(?<=\r?\n)`因此是前一个换行符的前瞻。
*   `[ \t]*`表示零个或多个空格或制表符；这些将与您的空白行的内容（如果有）相匹配。
*   `(\r?\n|$)`表示换行符或文件结尾。

例子：

```
string source = "Line 1\r\nLine 2\r\n   \r\nLine 4\r\n";
Match firstBlankLineMatch = Regex.Match(source, @"(?<=\r?\n)[ \t]*(\r?\n|$)");
int firstBlankLineIndex = 
    firstBlankLineMatch.Success ? firstBlankLineMatch.Index : -1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T01:47:09.130

只是为了好玩：您似乎可以每行重新分配一次字符串。那么就可以编写一个迭代器来懒惰地评估字符串并返回每一行。例如：

```
IEnumerable<string> BreakIntoLines(string theWholeThing)
{
    int startIndex = 0;
    int endIndex = 0;
    for(;;)
    {
        endIndex = theWholeThing.IndexOf(Environment.NewLine,startIndex) + Environment.NewLine.Count; //Remember to pick up the newline character(s) too!
        if(endIndex = -1) //Didn't find a newline
        {
            //Return the end part of the string and finish
            yield return theWholeThing.SubString(startIndex);
            yield break;
        }
        else //Found a newline
        {
            //Return where we're at up to the newline
            yield return theWholeThing.SubString(startIndex, endIndex - startIndex);
            startIndex = endIndex;
        }
    }
} 
```

然后，您可以将该迭代器包装在另一个仅返回您关心的行并丢弃其他行的迭代器中。

```
IEnumerable<string> GetSubsectionLines(string theWholeThing, string subsectionTitle)
{
    bool foundSubsectionTitle = false;
    foreach(var line in BreakIntoLines(theWholeThing))
    {
        if(line.Contains(subSectionTitle))
        {
            foundSubsectionTitle = true; //Start capturing
        }

        if(foundSubsectionTitle)
        {
            yield return line;
        } //Implicit "else" - Just discard the line if we haven't found the subsection title yet

        if(String.IsNullOrWhiteSpace(line))
        {
            //This will stop iterating after returning the empty line, if there is one
            yield break;
        }
    }
} 
```

现在，这种方法（连同其他一些发布的方法）并不能完全按照您的原始代码所做的。例如，如果 subsectionTitle 中的文本碰巧跨越了一行，它就不会被找到。我们假设规范的编写方式不允许这样做。该代码还将复制原始代码所返回的每一行，所以这可能没问题。

与 string.split 相比，这样做的唯一好处是，当您完成返回 SubSection 时，不会对字符串的其余部分进行评估。对于大多数合理大小的字符串，您可能不在乎。任何“性能提升”都可能不存在。如果您真的关心性能，那么您一开始就不会复制每一行！

您得到的另一件事（实际上可能很有价值）是代码重用。如果您正在编写一个解析文档的程序，那么能够对单独的行进行操作可能会有所帮助。

# reporting-services - 澄清为什么我在 SSRS 中所做的工作（即我知道它有效但不明白）？

> ID：13694489
> 
> 赞同：1
> 
> 时间：2012-12-04T01:00:14.907
> 
> 标签：reporting-services, ssrs-2008

所以我正在使用 SSRS，我基本上是将报告从存储过程/ASPX 页面迁移到直接 SSRS，然后在“报告管理器”中显示输出 - 大约在那里。

好吧，我一直在做的事情（按照老板的指示）是创建这些输入向导的“假”查询。

它们看起来像这样：

```
exec [dbo].[prc_RPT_Respondent_Answer_By_PID]      
@BeginDate = '19001010',      
@EndDate  = '19001010',
@PID = 'test' 
```

以上内容进入“查询字符串”框（即在您右键单击“报告”->“添加新报告”->“下一个”之后）。

但我不确定我们为什么要创建这个虚拟查询。是因为它会自动添加参数（在左侧的“报告数据”列中）？

为什么不简单地使用“查询生成器”？

任何帮助赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:39:09.080

您的“假查询”和真实查询之间的唯一区别是参数值。您需要一些参数值来设置报告（即获取列定义等），但您的用户将在运行时将它们替换为实际值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:11:33.373

在某些情况下，使用 SQL 查询调用存储过程的执行方式与通过 SSRS 中的“存储过程”选项调用它的执行方式不同。这通常与连接的默认值有关。

另一方面，它可能只是一种习惯：“不要改变没有破坏的东西。”

# android - 如何分析 NFC 标签传递给安卓手机的数据？

> ID：13694490
> 
> 赞同：0
> 
> 时间：2012-12-04T01:00:33.680
> 
> 标签：android, nfc

所以我基本上遵循了[这里的教程](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#filtering-intents)，一切都很好。这很酷，但是应用程序如何处理标签调度系统、过滤 NDEF 消息等对我来说仍然像一个黑匣子。有没有办法查看 NFC 标签传递给安卓手机的实际数据？

我不知道这个类比是否有意义，但我的一个桌面应用程序使用 SOAP 协议与其他设备通信，如果我想看看两个通信设备之间传递的实际内容，我可以启动wireshark通过跟踪流来分析数据包，我会得到这样的东西：

```
POST /InStock HTTP/1.1
Host: www.example.org
Content-Type: application/soap+xml; charset=utf-8
Content-Length: 299
SOAPAction: "http://www.w3.org/2003/05/soap-envelope"

<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Header>
  </soap:Header>
  <soap:Body>
    <m:GetStockPrice xmlns:m="http://www.example.org/stock">
      <m:StockName>IBM</m:StockName>
    </m:GetStockPrice>
  </soap:Body>
</soap:Envelope> 
```

显然 NFC 数据不是基于 XML 的，但我想知道数据是什么样子的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:40:08.793

我必须使 SOAP 与 NFC 案例最接近的是 NDEF（NFC 数据交换格式）。但这并不是 NFC 标签和手机之间交换数据的唯一方式，而是标准方式。它由 NFC 论坛标准化，您可以在此处找到更多详细信息：[http](http://www.nfc-forum.org/specs/spec_list/) ://www.nfc-forum.org/specs/spec_list/ 。

# java - 外部for循环从某个位置开始

> ID：13694492
> 
> 赞同：0
> 
> 时间：2012-12-04T01:00:38.197
> 
> 标签：java, for-loop

```
public void removeDups() {
    int i, k, j, lastFound = 0;
    if (this.nElements < 1) {
        System.out.println("Empty Array");

    } else {

        for (i = 0; i < this.nElements; i = lastFound) //outer loop
            {

            for (j = i + 1; j < this.nElements; j++) {

                 if (this.arr[i] == this.arr[j]) {
                    lastFound = i;

                    for (k = i; k < this.nElements; k++) {
                        this.arr[k] = this.arr[k + 1];

                    }
                    this.nElements--;

                    break;
                }
            }

        }
        for (i = 0; i < this.nElements; i++) {
            System.out.println(this.arr[i]);

        }

    }

} 
```

上一个方法从调用它的对象（数组）中删除重复项，问题是我希望外循环从每个增量的某个位置开始，我将该位置的值分配给变量 lastFound 并将该变量放入增量中循环的一部分，但程序进入无限循环并且永远不会停止，那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:03:28.203

您`i = lastFound`在每次迭代中进行设置。在外循环开始时，初始化`lastFound`为`i + 1`. 这样，如果您不重置，它将正常增加`lastFound`。

`lastFound`或者，当你找到一个匹配项时，去掉and `i = i - 1`，开始`k`循环`i + 1`而不是`i`，并将外部循环中的增量表达式从`i = lastFound`更改为`i++`。我还将使用以下方法简化您的代码`System.arraycopy`：

```
public void removeDups() {
    if (nElements < 1) {
        System.out.println("Empty Array");
    } else {
        for (int i = 0; i < nElements; i++) {
            for (int j = i + 1; j < nElements; j++) {
                 if (arr[i] == arr[j]) {
                    System.arraycopy(arr, i + 1, arr, i, nElements - (i + 1));
                    nElements--;
                    i--;
                    break;
                }
            }
        }
        for (i = 0; i < nElements; i++) {
            System.out.println(arr[i]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:15:12.397

想一想：在第一次迭代中，

```
 i = 0 
```

现在如果这是错误的：`this.arr[i] == this.arr[j]` **then `lastfound`is never changed(remains 0)**，这将导致无限循环。

要解决此问题，请处理不匹配的情况。

# javascript - 单页各种计算脚本

> ID：13694493
> 
> 赞同：0
> 
> 时间：2012-12-04T01:00:40.797
> 
> 标签：javascript, calculator

我想在我的一些页面上加入各种非常简单的计算器——用户输入一个或两个变量（身高、体重……随便）点击提交按钮并在同一页面上立即得到结果。我想使用许多公式。作为非程序员，我的问题是 - 解决这个问题的最佳方法是什么。我应该寻找一些 javascript 脚本/表单吗？你能给我指出正确的方向吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:05:15.727

这是适合您的正确方向：http: [//www.codecademy.com/](http://www.codecademy.com/)

该站点提供了学习 JavaScript 基础知识的简单（可能是最简单的）方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:12:48.557

我同意那些建议你学习编程基础的人的观点。另一方面，这是您问题的直接答案。（使用 jQuery）

**HTML**

```
<form>
    <input type="text" id="var1" />
    +
    <input type="text" id="var2" />
    <input type="submit" value="=" />
</form>
<span id="result"></span>​ 
```

**JAVASCRIPT**

```
$('form').submit(
    function(e) {
        e.preventDefault();
        $('#result').text(parseInt($('#var1').val())+parseInt($('#var2').val()));           
    }
);​ 
```

[http://jsfiddle.net/XvQjb/](http://jsfiddle.net/XvQjb/)

# objective-c - Objective C 中的双重不等式

> ID：13694494
> 
> 赞同：3
> 
> 时间：2012-12-04T01:00:42.550
> 
> 标签：objective-c, math

**是否可以在if 语句**中编写双重不等式？

 **前任：`if (x <= y <= z) do stuff;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:01:38.283

不——Objective-C 是 C 语言的超集，并且使用与 C 相同的语法用于`if`语句。您必须将其分成两个不等式：`if (x <= y && y <= z)`.**

# c# - 如何在 WPF 中使用 DataGridView 执行绑定？

> ID：13694497
> 
> 赞同：1
> 
> 时间：2012-12-04T01:01:04.853
> 
> 标签：c#, xaml, binding

我想在停靠到主 WPF 表单的用户控件中绑定数据网格视图。但是，每次我尝试绑定数据时，它都必须预先存在并且不会更新。有没有办法直接在 XAML 中执行此操作，以了解何时触发事件以更新 datagridview 而不是在后面的代码中执行此操作？

XAML的部分代码：

```
xmlns:c="clr-namespace:TestWPFMain"

<UserControl.Resources>
    <c:GridData x:Key="dataforGrid"/>
</UserControl.Resources>
<Grid>
    <DataGrid Grid.Row="2" x:Name="datagridMain" ItemsSource="{Binding Source={StaticResource dataforGrid}, Path=Results, Mode=TwoWay}" />
</Grid> 
```

上面 UserControl 的代码：

```
public GridControl()
    {
        InitializeComponent();

        GridData gd = new GridData();
        gd.UpdateResults();

        //datagridMain.ItemsSource = gd.Results;  
        -- This code above will work if I uncomment but I want it to be bound 
           directly and was curious as I thought the mode of 'two way' would 
           do this.  I am not certain and most examples assume property is already
           set up and not being created and updated.
    } 
```

GridData 的代码类：

```
class PersonName
{
    public string Name { get; set; }
}

class GridData
{
    public ObservableCollection<PersonName> Results { get; set; }

    public void UpdateResults()
    {
        using (EntityDataModel be = new EntityDataModel())
        {
            var list = be.tePersons.Select(x => new PersonName { Name = x.FirstName });

            Results = new ObservableCollection<PersonName>(list);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:12:23.903

要使用这样的绑定，您需要：

1.  在（或其父级之一）上`DataContext`正确设置`DataGrid`
2.  在您的模型类上实现，并在属性设置器中`INotifyPropertyChanged`引发。`PropertyChanged`

### 1)

将窗口的 DataContext 设置为`GridData`对象：

```
public GridControl()
{
    InitializeComponent();

    GridData gd = new GridData();
    gd.UpdateResults();
    this.DataContext = gd;
} 
```

### 2)

实施`INotifyPropertyChanged`。这可确保您的视图在`Results`属性更新时得到通知：

```
public class GridData : INotifyPropertyChanged
{
    private ObservableCollection<PersonName> _results;
    public ObservableCollection<PersonName> Results 
    {  
        get { return _results; }
        set
        {
            _results = value;
            RaisePropertyChanged("GridData");
        }
    }

    // ...

    #region INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string prop)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(prop));
        }
    }
    #endregion
} 
```

然后您可以简单地绑定到相对于数据上下文的路径。

```
<DataGrid ItemsSource="{Binding Results}" /> 
```

请注意，在这种情况下，您不需要双向绑定——这是为了将更改从视图传播回您的模型（即，当有文本框或复选框之类的 UI 控件时最有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:18:28.223

这是一个示例（我使用了 Window，但它对 UserControl 也一样）

xml:

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <DataGrid Grid.Row="2" x:Name="datagridMain" ItemsSource="{Binding ElementName=UI, Path=GridData.Results, Mode=TwoWay}" />
    </Grid>
</Window> 
```

或 id 你想要整个 DataContext：

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <DataGrid Grid.Row="2" x:Name="datagridMain" DataContext="{Binding ElementName=UI, Path=GridData}" ItemsSource="{Binding Results}" />
    </Grid>
</Window> 
```

代码：

您将必须实现 INotifyPropertyChanged 以便 xaml 知道 GridData 已更改 GridData 内的 ObservableCollection 作为此函数内置，因此无论何时添加删除项目，它们都会更新 DataGrid 控件

```
public partial class MainWindow : Window , INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        GridData = new GridData { Results = new ObservableCollection<PersonName>() };
        GridData.Results.Add(new PersonName { Name = "Test1" });
        GridData.Results.Add(new PersonName { Name = "Test2" });
    }

    private GridData _gridData;
    public GridData GridData
    {
        get { return _gridData; }
        set { _gridData = value; NotifyPropertyChanged("GridData"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="info">The info.</param>
    public void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

类：我对 update 方法做了一个小改动，所以它只是清除和更新现有的 ObservableCollection，否则如果你分配一个新的 ObservableCollection，你就必须为这个类实现 INotifypropertyChanged。

```
public class PersonName
{
    public string Name { get; set; }
}

public class GridData
{
    public GridData()
    {
       Results = new ObservableCollection<PersonName>()
    }

    public ObservableCollection<PersonName> Results { get; set; }

    public void UpdateResults()
    {
        using (EntityDataModel be = new EntityDataModel())
        {
            // Just update existing list, instead of creating a new one.
           Results.Clear();
           be.tePersons.Select(x => new PersonName { Name = x.FirstName }).ToList().ForEach(item => Results.Add(item);
        }
    }
} 
```

# algorithm - 扩展高斯图像

> ID：13694500
> 
> 赞同：0
> 
> 时间：2012-12-04T01:01:31.170
> 
> 标签：algorithm, math, gaussian

我正在尝试编写一个算法来对齐 3d 模型。我选择的方法是基于霍恩先生[ [1](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=1457341&isnumber=31344) ]发表的文章的**扩展高斯图像（针图或深度图）。**

我在这个实现*中与时间作斗争*，所以我的问题是是否有人知道我可以重复使用的任何实现？

或者，关于*3D 模型对齐*的主题，有人建议另一种方法吗？

* * *

参考：

[1] - 喇叭，BKP；，“扩展高斯图像”，IEEE 会议记录，第 72 卷，第 12 期，第 1671-1686 页，1984 年 12 月 doi：10.1109/PROC.1984.13073 URL：[http ://ieeexplore.ieee.org/stamp/ stamp.jsp?tp=&arnumber=1457341&isnumber=31344](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=1457341&isnumber=31344)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:15:08.877

您正在尝试做的事情听起来像点云注册。

您可以尝试使用点云库 (PCL)：[http ://www.pointclouds.org/](http://www.pointclouds.org/)

# c# - Parallel.ForEach 仅在代码未运行时在启动时执行两次？

> ID：13694503
> 
> 赞同：1
> 
> 时间：2012-12-04T01:01:49.267
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library

我正在开发一个 Windows 服务，我正在尝试使用 Parallel.ForEach 来生成唯一的定时线程。问题是，如果我在 VS 中将代码单独放置几个小时，或者如果我停止服务几个小时并启动任何备份 - 初始启动代码会执行两次。这是服务的 OnStart 正在调用的静态 void 的片段。

```
Parallel.ForEach(urls, url =>
                    {
                        PageGrabber pagegrab = new PageGrabber(url);
                        if (url.Type.ToLower() == "http")
                        {
                            pagegrab.Elapsed += (obj, e) =>
                                {
                                    pagegrab.CheckNormal();
                                };
                            pagegrab.CheckNormal();
                        }
                        else
                        {
                            pagegrab.Elapsed += (obj, e) =>
                            {
                                pagegrab.CheckXML();
                            };
                            pagegrab.CheckXML();
                        }
                    }
                    ); 
```

如果我直接使用线程，这很好用，但真的想稍微更新一下这段代码。重复执行立即发生。PageGrabber 对象非常简单，因为它只是使用 WebClient 将 HTML 或 XML 作为字符串下载 - 非常无聊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:31:11.283

I think the problem is that you've subscribed to the `Elapsed` event by `pageGrabber.Elapsed +=...` It is possible for that event to be raised or not. So in some conditions if the event raised, your method will be called twice, otherwise it will be called once.

I don't think that you could resolve this problem by changing the parallel implementation (using task array instead of `Parallel.Foreach`). It just might cause the problem occur less often, which is a very bad symptom in parallel programming. You shouldn't let the problems to fade out by making their preconditions of happening harder! You should totally remove them!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:44:07.753

所以 mehrandvd 是在正确的道路上。在创建使用 System.Timers.Timer 的类的实例时，它立即触发 Elapsed 事件，因为未正确设置 Interval 属性。因此：

```
pagegrab.Elapsed += (obj, e) =>
                        {
                            pagegrab.CheckXML();
                        };
                        pagegrab.CheckXML(); 
```

在一段时间内没有发生任何事情时导致重复执行，因为正确设置了 Interval 的类的实例不再在内存中。我的愚蠢 - 现在都解决了。感谢所有的意见和建议。

# data-structures - 为什么在 jdk 中使用“offset+length<0”来确定参数是否非法？

> ID：13694505
> 
> 赞同：2
> 
> 时间：2012-12-04T01:01:56.600
> 
> 标签：data-structures, java

在 jdk 中，有很多地方可以检查与 array.eg 相邻的参数。

```
/*..........
 *
 * @throws IllegalArgumentException
 *         If <tt>offset</tt> is negative or greater than
 *         <tt>buf.length</tt>, or if <tt>length</tt> is negative, or if
 *         the sum of these two values is negative.
 *
 * @param buf   Input buffer (not copied)
 * @param offset    Offset of the first char to read
 * @param length    Number of chars to read
 */
public CharArrayReader(char buf[], int offset, int length) {
    if ((offset < 0) || (offset > buf.length) || (length < 0) ||
            //$ offset+length
        (**(offset + length) < 0)**) {
        throw new IllegalArgumentException();
    }
    this.buf = buf;
    this.pos = offset;
    this.count = Math.min(offset + length, buf.length);
    this.markedPos = offset;
} 
```

为什么“（偏移量+长度）<0”是必要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:07:14.770

在 Java`int`中是有符号`int`的，因此当两个正数相加时可能会产生负值。它被称为环绕或[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:09:23.843

我相信它正在检查溢出。

int 的范围是 -2,147,483,648 到 2,147,483,647。

从代码中可以看到，有些地方我们需要偏移+长度。如果 offset + length 大于 2,147,483,647 就会出现问题，并且 (offset + length) < 0) 正在检查这种情况。

# php - 有人可以解释这段代码吗？

> ID：13694508
> 
> 赞同：0
> 
> 时间：2012-12-04T01:02:14.463
> 
> 标签：php, javascript, jquery

有人可以解释这段代码吗？

```
<script type="text/javascript"><!--

    $('#button-confirm').bind('click', function() {
        $.ajax({ 
            type: 'get',
            url: 'index.php?route=hybrid_directory/confirm',
                success: function() {
                    location = '<?php echo $continue; ?>';
            }
        });
    });

    function formSubmit()
    {
        document.getElementById("freecontactform").submit();
    }

//--></script> 
```

按钮确认，当点击从 php 联系表单提交信息时。url 和 function - location 是如何使用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:06:16.183

这是一个 ajax 调用，当单击 id 为“button-confirm”的元素时触发。

ajax 调用完成后，url 将重新定位到加载此页面的 PHP 脚本定义为`$continue`

这是 jquery ajax 方法的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# html - 用鼠标悬停改变图像

> ID：13694510
> 
> 赞同：0
> 
> 时间：2012-12-04T01:02:21.797
> 
> 标签：html, css, image, hyperlink, hover

我有一些指向我的 facebook 和 twitter 的链接，这些链接是图像。当我将鼠标悬停在它们上面时，我希望这些链接变亮。我想我可以通过制作两张图像并在我将鼠标悬停在图像链接上时改变图像来做到这一点。这是最好的方法吗？如果是我该怎么做？我找不到任何关于如何做到这一点的帮助。

这是我的 HTML：

```
<div class="social">

 <a href="https://www.facebook.com/seth.urquhart?sk=wall&v=wall">
  <img src="../img/facebook_logo_extended.jpg"/>
 </a>

</div>

<br>

<div class="social">

 <a href="https://twitter.com/SethUrquhart">
  <img src="../img/twitter_logo_extended.jpg"/>
 </a>

</div> 
```

这是我的CSS：

```
p {
color: #232323;
text-indent:0px;
margin-left:30px;
padding-right: 30px;
}

ul  {
text-align: center;
color: gray;
}

ul a {
text-decoration: none;
color: black;
}

ul a:hover {
text-decoration: underline;
    margin-right: auto;
margin-left: auto;
}

html {
background: #e8e9e1;
}

h1 {
text-align: center;
}

body {
font-family: sans-serif;
color: #232323;
}

.wrap {
min-width: 600px;
width: 1200px;
margin: auto;
height: 100px;
text-align: center;
background-color: none;
}

.content {
background: #ffffff;
width: 900px;
margin-left: auto; 
margin-right:auto; 
height: auto;
text-indent: 50px;
}

.footer {
text-align: center;
background-color: #383838;
width: 900px;
margin-left: auto;
margin-right: auto;
color: #e8e9e1;
}

.social {
width: 900px;
margin: auto;
height: 100px;
text-align: center;
background-color: none;
}

.social:hover {
margin-right: auto;
margin-left: auto;
background:#cccccc;
color:#000;
}

ul#list-nav {
padding: 0;
list-style: none;
width: 605px; 
margin: 0 auto;
}

ul#list-nav li {
display:inline;
}

ul#list-nav li a {
text-decoration:none;
padding:5px 0;
width:150px;
background:#383838;
color:#eee;
float:left;
border-left:1px solid #fff;
}

ul#list-nav li a:hover {
margin-right: auto;
margin-left: auto;
background:#cccccc;
color:#000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:49:39.740

假设您愿意使用 CSS3，我创建[了一个示例](http://jsbin.com/uxarid/1/edit)，展示了一种为图标获得短暂加宽效果的方法（我想这就是问题中“密集”的含义）。此处减少代码：

```
.icon {
  -webkit-transition: 0.25s;
  transition: 0.25s;
}

.icon:hover {
  position: relative;
  z-index: 1;
  transform: scale(1.7);
  -ms-transform: scale(1.7); /* IE 9 */
  -webkit-transform: scale(1.7); /* Safari and Chrome */
} 
```

该[`transform`](http://caniuse.com/#feat=transforms2d)物业有良好的支持。效果[`transition`](http://caniuse.com/#feat=css-transitions)不太受支持（不支持 IE9），但如果您正在考虑优雅降级，我认为使用它是非常有效的。

**编辑**

我正在更新这个答案，因为它可以在未来帮助其他人。*公认的答案不是正确的方法*，因为它使用[突兀的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript#Separation_of_behavior_from_markup)来处理样式，而 CSS 是正确的工具。我真的希望 OP 看看这里并更改他们的代码。

根据 OP 的反馈，我[更新了示例](http://jsbin.com/uxarid/3/edit)，展示了如何通过[`opacity`](http://caniuse.com/#feat=css-opacity)使用`filter`IE6-8 更改属性来模拟亮度效果。简而言之，这是代码：

```
.icon {
  opacity: 1;
  filter: Alpha(Opacity=100);
}

.icon:hover {
  opacity: .6;
  filter: Alpha(Opacity=60);
} 
```

`background-color`当父元素比元素轻时，这很容易并且效果很好。如果您需要更详细的内容（如果您真的想在两个图像之间切换），我真的建议您使用[CSS sprites](http://css-tricks.com/css-sprites/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:16:10.837

我不知道密集是什么意思，但是您可以通过 onmouseover 更改任何图像属性并使用 onmouseout 恢复它。这是一个代码片段来展示如何做到这一点。此代码只是在鼠标悬停时使图像变暗，然后在鼠标离开时恢复它：

```
<img 
    src = "test.jpg" 
    style = "width:50%;" 
    id = "test" 
    onmouseover = "document.getElementById('test').style.opacity=0.5"
    onmouseout = "document.getElementById('test').style.opacity=1" /> 
```

如果您想让悬停时的图像更大，您可以更改任何尺寸属性。例如，这是一个特别显着的尺寸跳跃：

```
<img 
    src = "test.jpg" 
    style = "width:50%;" 
    id = "test" 
    onmouseover = "document.getElementById('test').style.width='75%'"
    onmouseout = "document.getElementById('test').style.width='50%'" /> 
```

请注意，以上内容仅供说明之用。还有其他方法可以做到这一点，我并不是说我呈现的方式是最好的，甚至是好的。但是，很清楚，我只想让您清楚地了解如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T07:11:15.523

最简单的解决方案可能是让您使用背景图像而不是图像，这样您就可以在它们之间切换。您甚至可以通过这种方式创建 3 个状态……非活动、悬停和选中……

考虑级联和特异性。如果您首先定义非活动状态，然后定义悬停状态，覆盖相同的定义，最后定义选定状态，再次使用相同的定义和特异性级别。现在每个人都会以适当的方式覆盖另一个人，否则它们会发生。

一个图像

```
div { background:url('http://www.placehold.it/200x200/f2f2f2') no-repeat; } 
```

悬停时显示不同的图像

```
div:hover { background:url('http://www.placehold.it/200x200/666666') no-repeat; } 
```

如果元素是锚点或定义了一些 onclick 函数.. 使用新类在选择时显示不同的图像

```
div.selected { background:url('http://www.placehold.it/200x200/000000') no-repeat; } 
```

# installshield - 安装脚本 XP

> ID：13694514
> 
> 赞同：0
> 
> 时间：2012-12-04T01:02:29.873
> 
> 标签：installshield, installscript

我有一个 installscriptmsi 项目，它的输出是 setup.exe。我可以在 Vista 及更高版本上安装它而没有任何问题。没有提示我输入 UAC。但在 XP 上，总是提示我运行为对话框。我知道这是因为设置了 LAAW_SHELLEXECUTEVERB = "runas" 我得到了 Run as prompt。但我确实希望我的安装程序在 XP 上以管理员身份运行。我还在 Release 下将RequiredExecutionLevel 设置为管理员。

那么有没有一种方法可以让 installscriptmsi 不在 XP 上提示 UAC。我正在使用 IS2012。我正在粘贴下面的脚本。

```
function OnBegin()
STRING szProgram, szCmdLine, szDirectory;
NUMBER nShowWindow, nTimeOut, nOptions;
STRING szTestVersionKey;
begin
szProgram = "MsiExec.exe";
szDirectory = "";
nShowWindow = SW_NORMAL;
nTimeOut = 1000 * 60 * 10;
nOptions = LAAW_OPTION_USE_SHELLEXECUTE;
LAAW_SHELLEXECUTEVERB = "runas";

RegDBSetDefaultRoot( HKEY_LOCAL_MACHINE );

// uninstall  another 3rd party software if on the system.
szSofTestVersionKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{15F6E1D5-12FF-4BBD-B02F-6440C7A2763C}";
if ( RegDBKeyExist(szTestVersionKey) ) then
    szCmdLine = "/uninstall {15F6B1B5-12FF-4DBD-A02F-6640C7A2863C} /norestart /quiet";
    LaunchApplication( szProgram, szCmdLine, szDirectory, nShowWindow, nTimeOut, nOptions ); 
  endif;

end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:15:18.383

您已经在编写脚本了，所以我只想确定您是设置`LAAW_SHELLEXECUTEVERB`为`runas`，还是将其保留为`open`。您可以与`SYSINFO.nOSMajor`6 进行比较，或检查`SYSINFO.WINNT.bWinXP`以确定您使用的操作系统，并相应地选择动词。

# python - 使用 txt 文件创建随机问题

> ID：13694517
> 
> 赞同：-5
> 
> 时间：2012-12-04T01:03:00.917
> 
> 标签：python

我无法解决python中的问题。代码打开一个文本文件，问题在哪里。如何为每个问题提供正确答案？

鳕鱼：

```
import random
file = open('/home/jonny/questions.txt', 'r')
text = file.read()
separator = '*'
questions = text.split(separator)
print random.choice(questions) 
```

试图：

```
resp=raw_input('answer: ')
for question[0] in questions:
if resp=='a':
print 'gratzz' 
```

文本：

```
*你好吗？
一口井
b) 严重
c) 不知道
*你今天有什么计划
a) 没有
b) 某事
c) 不知道

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:07:28.220

尝试以标准的结构化格式（例如 JSON）存储您的数据。[用于解析 JSON 的库包含在 Python](http://docs.python.org/2/library/json.html)中。

创建一个名为的文件，`questions.json`其中包含：

```
{
  “你今天有什么计划？”： {
    “答案”：[“什么”，“某事”，“不知道”]，
    “正确答案”：2
  },
  “你好吗？”： {
    “答案”：[“好”、“不好”、“不知道”]、
    “正确答案”：1
  }
}

```

然后你可以解析它并向用户询问一个随机问题，如下所示：

```
import json
import random

# read data from JSON file
questions = json.load(open("questions.json"))

# pick a random question
question = random.choice(questions.keys())

# get the list of possible answers and correct answer for this question
answers = questions[question]['answers']
correct_answer = questions[question]['correct_answer']

# display question and list of possible answers    
print question
for n, answer in enumerate(answers):
    print "%d) %s" % (n + 1, answer)

# ask user for answer and check if it's the correct answer for this question
resp = raw_input('answer: ')
if resp == str(correct_answer):
    print "correct!"
else:   
    print "sorry, the correct answer was %s" % correct_answer 
```

示例输出：

```
你今天有什么计划？
1) 没有
2) 某事
3）不知道
答案：3
抱歉，正确答案是 2

```

# c#-4.0 - 查找直方图的局部最大值/峰值和最小值/谷值

> ID：13694523
> 
> 赞同：9
> 
> 时间：2012-12-04T01:03:39.600
> 
> 标签：c#-4.0, image-processing, histogram, mathematical-optimization, image-segmentation

好的，所以我有一个直方图（由整数数组表示），我正在寻找找到局部最大值和最小值的最佳方法。每个直方图应该有 3 个峰值，其中一个（第一个）可能比其他峰值高得多。

我想做几件事：

1.  找到第一个峰之后的第一个“山谷”（为了在图中完全摆脱第一个峰）

2.  在其余两个峰之间找到最佳“谷”值以分离图片

    我已经知道如何通过实现 Otsu 的变体来执行第 2 步。但我在第 1 步苦苦挣扎

3.  如果剩下的两个山峰之间的山谷不够低，我想发出警告。

此外，图像非常干净，几乎没有噪音

执行步骤 1 和 3 的蛮力算法是什么？我可以找到一种实现 Otsu 的方法，但是在数学方面，蛮力正在逃离我。事实证明，关于像 otsu 这样的方法有更多的文档，而关于简单地寻找峰谷的文档更少。除了完成工作之外，我不寻找任何东西（即这是一个临时解决方案，只需要在合理的时间范围内实施，直到我可以花更多时间在它上面）

我在 c# 中做这一切

任何有关采取哪些步骤的帮助将不胜感激！太感谢了！

编辑：更多数据：

大多数直方图可能与第一个类似，第一个峰值代表背景。

![直方图](../Images/de2df75c505eb4884b2d86471693026a.png)

![直方图 2](../Images/0b636f5ffcc2c475245ed35e49fe664b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:32:38.813

使用峰值测试。它是一种在两个局部最小值之间找到所有可能的峰值，并根据公式测量峰值的方法。如果峰值高于阈值，则接受峰值。

来源：[UCF CV CAP5415 第 9 讲幻灯片](http://www.cs.ucf.edu/courses/cap6411/cap5415/spring02/Lecture-9-h.pdf)

下面是我的代码：

```
public static List<int> PeakinessTest(int[] histogram, double peakinessThres)
{
    int j=0;
    List<int> valleys = new List<int> ();

    //The start of the valley
    int vA = histogram[j];
    int P = vA;

    //The end of the valley
    int vB = 0;

    //The width of the valley, default width is 1
    int W = 1;

    //The sum of the pixels between vA and vB
    int N = 0;

    //The measure of the peaks peakiness
    double peakiness=0.0;

    int peak=0;
    bool l = false;

    try
    {
        while (j < 254)
        {

            l = false;
            vA = histogram[j];
            P = vA;
            W = 1;
            N = vA;

            int i = j + 1;

            //To find the peak
            while (P < histogram[i])
            {
                P = histogram[i];
                W++;
                N += histogram[i];
                i++;
            }

            //To find the border of the valley other side
            peak = i - 1;
            vB = histogram[i];
            N += histogram[i];
            i++;
            W++;

            l = true;
            while (vB >= histogram[i])
            {
                vB = histogram[i];
                W++;
                N += histogram[i];
                i++;
            }

                //Calculate peakiness
            peakiness = (1 - (double)((vA + vB) / (2.0 * P))) * (1 - ((double)N / (double)(W * P)));

            if (peakiness > peakinessThres & !valleys.Contains(j))
            {
                //peaks.Add(peak);                        
                valleys.Add(j);
                valleys.Add(i - 1);
            }

            j = i - 1;
        }
    }
    catch (Exception)
    {
        if (l)
        {
            vB = histogram[255];

            peakiness = (1 - (double)((vA + vB) / (2.0 * P))) * (1 - ((double)N / (double)(W * P)));

            if (peakiness > peakinessThres)
                valleys.Add(255);

                //peaks.Add(255);
            return valleys;
        }   
    }

        //if(!valleys.Contains(255))
        //    valleys.Add(255);

    return valleys;
} 
```

# django - 在 Django 单元测试中取消模拟模拟对象

> ID：13694524
> 
> 赞同：1
> 
> 时间：2012-12-04T01:04:06.760
> 
> 标签：django, mocking

我的 django 应用程序中有几个 TestCase 类。在其中一些上，我模拟了一个通过使用@mock.patch 装饰类来调用外部资源的函数，效果很好。我的测试套件中的一个TestCase，我们称之为B()，依赖于那个外部资源，所以我不希望它被模拟出来，我也不添加装饰器。它看起来像这样：

```
@mock.patch("myapp.external_resource_function", new=mock.MagicMock)
class A(TestCase):
    # tests here

class B(TestBase):
    # tests here which depend on external_resource_function 
```

当我独立测试 B 时，事情按预期工作。但是，当我同时运行两个测试时，A 首先运行，但该函数仍然在 B 中模拟出来。我怎样才能取消模拟该调用？我试过重新加载模块，但没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T02:32:55.630

补丁有[启动和停止方法](http://www.voidspace.org.uk/python/mock/patch.html#start-and-stop)。根据我从您提供的代码中看到的内容，我将删除装饰器并使用您的类链接中的 setUp 和 tearDown 方法。

```
class A(TestCase):
  def setUp(self):
    self.patcher1 = patch('myapp.external_resource_function', new=mock.MagicMock)
    self.MockClass1 = self.patcher1.start()

  def tearDown(self):
    self.patcher1.stop()

  def test_something(self):
    ...

>>> A('test_something').run() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-13T23:55:51.967

很好的答案。关于 Ethereal 的问题，补丁对象的使用非常灵活。

这是处理需要不同补丁的测试的一种方法。您仍然可以使用 setUp 和 tearDown，但不能使用 patch.start/stop 位。

在每个测试中启动（）补丁，并使用 finally 子句确保它们被停止（）。

补丁还支持上下文管理器的东西，所以这是另一个选项，这里没有显示。

```
class A(TestCase):
    patcher1 = patch('myapp.external_resource_function', new=mock.MagicMock)
    patcher2 = patch('myapp.something_else', new=mock.MagicMock)

    def test_something(self):

        li_patcher = [self.patcher1]
        for patcher in li_patcher:
            patcher.start()

        try:
            pass
        finally:
            for patcher in li_patcher:
                patcher.stop()

    def test_something_else(self):

        li_patcher = [self.patcher1, self.patcher2]
        for patcher in li_patcher:
            patcher.start()

        try:
            pass
        finally:
            for patcher in li_patcher:
                patcher.stop() 
```

# prolog - 如何在谓词中使用谓词“断言”

> ID：13694525
> 
> 赞同：0
> 
> 时间：2012-12-04T01:04:39.830
> 
> 标签：prolog

我有一个问题，我想要一个代码 Prolog，我将使用谓词“assert”生成新的谓词，但我想使用我的 predicate 的结果。我有一个谓词来计算列表元素的数量，我必须创建一个新谓词，使用我的知识库中的谓词“assert”添加一个新谓词，调用谓词“creat_nbStation”谁将使用 2 “assert” 和 “compte” 例如我有 creat_nbStation(L) 并且 L 是一个 Liste 它会在我的知识库中添加一个新谓词它是 nb_Station(L,25) 使用 assert predicate 。

感谢您的帮助。这是我计算列表元素数量的谓词，它工作得很好

```
compte([],0).
compte([_|R],N) :- compte(R,N1), N is N1+1, N>0. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:54:41.667

很难弄清楚你到底在找什么，但我必须说它看起来很像家庭作业。这是你想要的？

```
create_nbStation(L) :- compte(L, N), assert(nbStation(L, N)). 
```

# angularjs - 如何向 ng-model 绑定添加更有意义的名称？

> ID：13694526
> 
> 赞同：0
> 
> 时间：2012-12-04T01:04:40.260
> 
> 标签：angularjs

我正在玩的代码可以在[这里](http://jsfiddle.net/FN8Yg/5/)找到。

到目前为止，在我的所有`text`领域中，ng-model 只有一个名称，`fieldData`. 当我将创建的 javascript 对象转换为 JSON 对象时，我得到以下信息：

`[{"pHolder":"ID goes here","fieldData":"123"},{"pHolder":"Description goes here","fieldData":"456"},{"pHolder":"Drop Dead Date goes here","fieldData":"789"}]`

由于每个字段都有不同的含义，我希望将其反映在绑定名称中。因此，不是每个都有被调用的`array`三个，我想要一个三个where和被替换在每个地方现在有的地方。`objects``string``fieldData``array``objects``foo` `bar``baz``fieldData`

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:43:36.733

Javascript Array 对象非常灵活，就像它的任何其他方面一样，您可以利用它来发挥自己的优势:) ngRepeat 迭代任何数组，无论是有序的还是关联的（它们基本上是相同的）。因此，如果您将数组更改为：

```
$scope.entryFields = {
        id: {pHolder:'ID goes here',fieldData:""},
        description: {pHolder:'Description goes here',fieldData:""},
        date: {pHolder:'Drop Dead Date goes here',fieldData:""}
        }; 
```

ng-repeat 元素仍然可以正常工作（您可能需要重新排序，因为它默认按键名的字母顺序排序）而不进行任何更改，但您可以按名称（点表示法）对字段进行寻址。[在此处](http://jsfiddle.net/FN8Yg/7/)查看更新的小提琴。

# android - 将相机中的图片加载到 ImageView

> ID：13694530
> 
> 赞同：0
> 
> 时间：2012-12-04T01:04:59.987
> 
> 标签：android, image, imageview, uri

在我的应用程序中，我有它，以便当用户单击“相机”按钮时，它会使用意图将他带到相机。

然后他拍照，它应该将它加载回我在与相机按钮相同的屏幕上的 ImageView 中。

我认为我的屏幕方向有问题。当我加载相机视图时，它会切换到水平方向，当它关闭时，它会切换回垂直方向，并且我的整个屏幕会重置为默认值。

这是我在 logcat 中遇到的错误：

```
12-03 20:14:38.440: E/SpannableStringBuilder(15134): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

有任何想法吗？

编辑：

这是发生的事情：

*   我点击相机按钮。
*   屏幕摄像机视图切换到水平模式，但我垂直握住它，所以它切换到垂直。
*   我以水平模式拍摄照片。
*   相机应用程序要求我保存我的照片或在垂直模式下取消它。
*   我点击保存。
*   我的应用程序以水平模式加载并将图片放在 imageView 中。
*   然后应用程序切换回垂直模式并重置整个屏幕。

我把你所有的代码放进去，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:34:24.343

另外需要注意的一点是相机默认在android中只能在横向模式下工作。因此，无论您的屏幕方向是什么，相机都只会以水平模式启动。也如上所述做

```
android:configChanges="orientation" 
```

并在您的活动中使用以下回调处理此问题

```
@Override
public void onConfigurationChanged(Configuration newConfig) {       
    super.onConfigurationChanged(newConfig); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:07:29.933

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

我所做的只是添加了那行代码，它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:32:05.157

您的活动被重置的原因是由于相机意图改变了屏幕方向。

您可以`android:configChanges="orientation"`在 androidManifest.xml 中放入您的活动

一旦你有了它，它就不会破坏和重新创建你的活动。

请参阅[http://developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)了解更多详情

# php - ajax不加载内容

> ID：13694533
> 
> 赞同：0
> 
> 时间：2012-12-04T01:05:43.917
> 
> 标签：php, jquery, ajax

我有一个增加数量的按钮

```
<input name="quantity-"'.$item_id.'" " id="quantity-'.$item_id.' " type="text" value="' . $quantity . '" />

$increase = '1';

<input name="increase-' . $item_id . '" id="increase-' . $item_id . '" type="button" value="+" onClick="cart_change_quantity('.$item_id .','.$quantity.','.$increase.')" /> 
```

功能：

```
function cart_change_quantity( item_id, quantity, mod ) {
$.ajax({
    url: 'functions/product-change-quantity.php',
    type: 'GET',
    data: {
        item_id:            item_id,
        quantity:           quantity, 
        mod:                mod
    },
    success: function(response) {
        if ( response.search('success') != -1 ) {
            var felbontva = response.split('__'), 
                new_quantity = felbontva[1];

            $('#quantity-' + item_id).val( new_quantity );
        }

        else {
            alert( 'An error occured while trying to update your order.' );
        }
    }
}); 
```

}

和 product-change-quantity.php：

```
$item_id = $_GET["item_id"];
$quantity = $_GET["quantity"];
$mod= $_GET["mod"];

    if ( $mod == '1' ) { $new_quantity = (int)$quantity + 1; }

    echo 'success__' . $new_quantity; 
```

它只是没有做任何事情。我想用那个按钮增加产品的数量，后来我想在后台做更多的事情而不刷新页面，所以我选择了 ajax 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:39:44.393

根据您在上面发布的源代码，您正在访问一个不在您的 html 文件中的输入元素。如果您注意到在 HTML 中，您在输入元素的 ID 的项目 ID 之后添加了空格。在您的 javascript 上，当您尝试访问相同的元素时，您没有在项目 ID 之后添加空格，尽管我认为最好不要在 ID 中添加空格。

[HTML]

```
<input name="quantity-"'.$item_id.'" " id="quantity-'.$item_id.' " type="text" value="' . $quantity . '" /> 
```

[Javascript]

```
$('#quantity-' + item_id).val( new_quantity ); 
```

# java - Java 矩阵数组

> ID：13694534
> 
> 赞同：-1
> 
> 时间：2012-12-04T01:05:48.853
> 
> 标签：java, multidimensional-array, matrix, add

该程序添加了两个 3x3 矩阵。它编译并运行，但输出，而不是：

```
1.0  2.0  3.0       0.0  2.0  4.0       1.0  4.0  7.0
4.0  5.0  6.0   +   1.0  4.5  2.2   =   5.0  9.5  8.2
7.0  8.0  9.0       1.1  4.3  5.2       8.1  12.3 14.2 
```

它产生：

```
1.0  2.0  3.0       0.0  2.0  4.0       0.0  0.0  0.0
4.0  5.0  6.0   +   1.0  4.5  2.2   =   0.0  0.0  0.0
7.0  8.0  9.0       1.1  4.3  5.2       0.0  0.0  0.0 
```

我不确定为什么输出显示为全零？程序中的数学对我来说“似乎”是正确的......我在这里缺少什么吗？

```
import java.util.Scanner;

public class AddMatrices{

public static void main(String[] args){

    Scanner input = new Scanner(System.in);

    int N = 3;

    //get the users input and store it in the two arrays
    System.out.println("\nEnter matrix1: \n");

    //declare 2 arrays with the appropriate number of rows and columns in 
    //them to store the numbers in each matrix.
    //this is the first one.
    double[][] matrix1 = new double[N][N];

    for (int i = 0; i < matrix1.length; i++) {
        for (int j = 0; j < matrix1[i].length; j++) {
            matrix1[i][j] = input.nextDouble();
        }
    }

    //get the users input and store it in the two arrays
    System.out.println("\nEnter matrix2: \n");

    //declare 2 arrays with the appropriate number of rows and columns in 
    //them to store the numbers in each matrix.
    //this is the second one.
    double[][] matrix2 = new double[3][3];

    for (int i = 0; i < matrix1.length; i++) {
        for (int j = 0; j < matrix1[i].length; j++) {
            matrix2[i][j] = input.nextDouble();
        }
    }

    //call the addMatrix method and pass it the two arrays
    double[][] resultingMatrix = addMatrix(matrix1, matrix2);
    System.out.println("The addition of the matrices is ");

}//end of main method

//write the addMatrix method to add the two matrices and display the result

public static double[][] addMatrix(double[][] m1, double[][] m2){

    double[][] result = new double[m1.length][m1[0].length];

    for (int i = 0; i < result.length; i++) {
        for (int j = 0; j < result[0].length; j++){
            m1[i][j] += m2[i][j];
        }
    }

    for (int i = 0; i < m1.length; i++) {
        char plus = '+';
        for (int j = 0; j < m1[0].length; j++) {
            System.out.print("  " + m1[i][j]);
        }

        if (i == m1.length / 2)
            System.out.print("  " + plus + "  ");
        else {
            System.out.print("  ");
        }

        for (int j = 0; j < m2[0].length; j++) {
            System.out.print("  " + m2[i][j]);
        }

        if (i == m1.length / 2)
            System.out.print("  =  ");
        else {
            System.out.print("  ");
        }

        for (int j = 0; j < result[0].length; j++) {
            System.out.print("  " + result[i][j]);
        }
        System.out.println();
    }
return result;
}//end of add matrices

}//end of class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:09:07.480

您将添加的值设置为 m1 而不是结果。在您的第一个双 for 循环中，只需执行以下操作：

```
result[i][j] = m1[i][j]+m2[i][j]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:10:17.743

我认为您永远不会将结果分配给变量 results

你应该改变

```
m1[i][j] += m2[i][j]; 
```

至

```
result[i][j]=m1[i][j] + m2[i][j]; 
```

# jquery - Firefox 附加组件堆叠在循环上 :(

> ID：13694544
> 
> 赞同：0
> 
> 时间：2012-12-04T01:06:38.790
> 
> 标签：jquery, firefox-addon, request, builder

这是我的 main.js：

```
var data = require("self").data;
var window = require("window-utils").activeBrowserWindow;
var tabs = require("tabs");
var Request = require("request").Request;

var team = require("page-mod").PageMod({
include: ["http://www.example.com/team/*"],
contentScriptFile: [data.url("jquery.js"), data.url("item.js")],
contentScriptWhen: 'ready',
onAttach: function(worker) {

        worker.port.on('got-id', function(id) {
        var requesturl = "http://www.othersite.com/item/" + id;   

        Request({
            url: requesturl,
            onComplete: function(response) {
                worker.port.emit('got-request', response.text);
            }
        }).get();

    });
}
}); 
```

和我的 item.js：

```
// Getting number of total items in the page
var totalitems = document.getElementById("NumberOfItems").textContent;
totalitems = parseInt(totalitems);
// Creating array for items position
positions = [];
for ( z = 0; z <= totalplayers-1 ; z++ ) { positions.push(z < 10 ? ("0" + z.toString()) : z.toString()); }
$.each( positions, function(players, position) {
// Getting item id for the request
var player_id = $("#item-position" + position).attr("href").match(RegExp('items/([^/]+)/details.aspx$'))[1];
self.port.emit('got-player-id-team', player_id);

self.port.on('got-request-team', function(data) {
var columns = $('div.columns',data);
replacediv = $("div#itembox").eq(position).find('td').eq(3);
replacediv.append(columns);
});
}); 
```

它似乎工作正常，**但**所有 div 都被每个项目附加！我如何修改它以将每个项目的获取数据仅放置在该项目中而不是每个项目中？

我做错了什么？我认为它运行了两次！它就像`runs = totalitems*2`。

如果我强制它只运行第一项，一切都很好！

对不起，我的英语不好！我知道这很难理解，所以我正在等待您的评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:13:54.410

据我所知，您的代码中的问题在这里：

```
$.each( positions, function(players, position) {
    // ...
    self.port.on('got-request-team', function(data) {
        var columns = $('div.columns',data);
        replacediv = $("div#itembox").eq(position).find('td').eq(3);
        replacediv.append(columns);
    });
}); 
```

基本上对于循环的每个循环，您都在为“got-request-team”事件添加一个新的侦听器。假设您在 中只有一项`positions`：那么，您与此事件关联的只有一个函数，并且当您发出“got-request-team”时，仅执行该函数。但是，如果你在`positions`数组中有 20 个项目，你会将 20 个不同的函数关联到同一个事件，所以当发出 'got-request-team' 时，它们都会被执行。

另外，因为您创建了一个闭包，所以`position`事件侦听器中的变量将始终设置最后一个值，我相信这不是您的意图。这是一个常见错误，您可以在此处找到更多详细信息，例如：[在循环中绑定事件处理程序需要闭包？](https://stackoverflow.com/questions/8624057/closure-needed-for-binding-event-handlers-within-a-loop)

还有一些其他的小事情（例如，我在`replacediv`任何地方都没有看到声明），但它们与您的问题无关。

希望能帮助到你！

**更新**：关于你的评论，如果没有测试代码很难回答，但我相信你的错误仍然在上面的部分：首先，不仅仅是`positions`，`position`你必须“绑定”。因为你在内容脚本中，你可以使用`let`，因此你可以尝试这样的事情：

```
$.each(positions, function(players, position) {
    // ...

    let pos = position; // let is block scope
    self.port.on('got-request-team', function(data) {
        var columns = $('div.columns',data);
        replacediv = $("div#itembox").eq(pos).find('td').eq(3); // use pos here
        replacediv.append(columns);
    });
}); 
```

请注意，在这里您仍然存在为每个项目`positions`（您说您已修复）添加新侦听器到同一事件的问题，我只是重用此代码来显示`let`在此上下文中的用法。

# mysql - 分组在一张桌子上

> ID：13694548
> 
> 赞同：0
> 
> 时间：2012-12-04T01:06:52.300
> 
> 标签：mysql, sql

我有以下查询：

```
 SELECT table1.data AS table1_data,
     table2.data AS table2_data,
     table3.data AS table3_data
    FROM table1, table2, table3
GROUP BY table1.data, table2.data, table3.data 
```

结果：

```
table1_data  | table2_data  | table3_data
------------------------------------------
2012-11-15   | 2012-11-18   | 2012-11-20
2012-11-16   | 2012-11-18   | 2012-11-23
2012-11-17   | 2012-11-18   | 2012-11-27 
```

当我期望：

```
all_tables_data
----------------
2012-11-15
2012-11-16
2012-11-17
2012-11-18
2012-11-18
2012-11-18
2012-11-20
2012-11-23
2012-11-27 
```

我已经“用谷歌搜索”了一些术语，但我无法描述这种类型的查询，所以没有找到任何可以帮助解决问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:10:11.747

你应该使用“UNION ALL”而不是“GROUP BY”：

```
select table1.data from table1
union all
select table2.data from table2
union all
select table3.data from table3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:09:51.280

你`union`不需要`group by`。

```
SELECT data AS all_tables_data FROM table1
UNION ALL
SELECT data AS all_tables_data FROM table2
UNION ALL
SELECT data AS all_tables_data FROM table3 
```

# java - 单击微调器时的Android回调错误

> ID：13694549
> 
> 赞同：1
> 
> 时间：2012-12-04T01:06:56.137
> 
> 标签：java, android, android-spinner

下面是我为 android 创建的自定义活动

```
public class DisplayMenusActivity extends Activity implements OnItemSelectedListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_menus);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);
    Spinner spinner = (Spinner) findViewById(R.id.hall_spinner);
    // Create an ArrayAdapter using the string array and a default spinner layout
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.hall_array, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_display_menus, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void onItemSelected(AdapterView<?> parent, View view, 
        int pos, long id) {
    URL menu_url = null;
    try {
        menu_url = new URL("http://www.housing.illinois.edu/Current/Dining/Menus.aspx?RIndex="+pos);
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    BufferedReader reader = null;
    StringBuilder builder = new StringBuilder();
    try {
        reader = new BufferedReader(new InputStreamReader(menu_url.openStream(), "UTF-8"));
        for (String line; (line = reader.readLine()) != null;) {
            builder.append(line.trim());
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if (reader != null) try { reader.close(); } catch (IOException logOrIgnore) {}
    }

    TextView menu = (TextView) findViewById(R.id.menu_text);
    menu.setText(Html.fromHtml(builder.toString()));
    Log.v("DisplayMenusActivity", "HTML HERE: "+Html.fromHtml(builder.toString()));
}

public void onNothingSelected(AdapterView<?> parent) {
    TextView menu = (TextView) findViewById(R.id.menu_text);
    menu.setText("Yo wassup");
    Log.v("DisplayMenusActivity", "YO WASSUP\n\n\n");

} 
```

}

当我触摸微调器时，我在堆栈顶部收到以下 logcat 错误：

> 12-03 18:53:29.577: E/Handler(3232): 处理回调失败；接口未实现，>回调：android.widget.AdapterView$SelectionNotifier@40dc5598

我不知道出了什么问题。谁能帮帮我？谢谢！

# java - 调用 onProgressUpdate 是否会停止 AsyncTask 线程直到完成？

> ID：13694555
> 
> 赞同：0
> 
> 时间：2012-12-04T01:08:08.303
> 
> 标签：java, android, multithreading, thread-safety

我正在运行以下线程任务：

```
public class LoadCellTask extends AsyncTask<Object, Object, Void> {
        protected Void doInBackground(Object... params) {

           // 1

            publishProgress();

           // 3

        }
}

protected void onProgressUpdate(Object... params) {

     // Do UI tasks on Main thread
     // 2
} 
```

这个线程的顺序是1、2、3吗？或者它实际上可以去1,3,2吗？

在进度更新完成之前，调用 onProgressUpdate 会停止线程任务吗？还是会在通话后继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:26:24.897

第一个问题的答案..

顺序 1,2,3 还是 1,3,2 是否会出现并不固定。因为在调用 publishProgress 方法后，系统会处理 onProgressUpdate 方法的发生，所以我们无法准确判断何时会发生这种情况。所以两个订单都是可能的

第二个问题的答案。。

不。任务将不间断地执行

# java - 如何正确配置此 Camel 路由 xml？

> ID：13694556
> 
> 赞同：1
> 
> 时间：2012-12-04T01:08:09.927
> 
> 标签：java, xml, serialization, routing, apache-camel

我正在尝试使用 Camel 的 XML 构建一个有点花哨的 Camel 路线`<camelContext>`。

我有两个 ActiveMQ 队列`toProcess`和`ready`一个 MySQL 数据库。数据库有一个如下所示的`widgets`表：

```
widget_id | widget_name | widget_value
(INT)       (VARCHAR 50)  (INT) 
```

外部进程将原始字符串消息放在`toProcess`队列中。这些消息是简单的字符串，例如：

*   “*嘶嘶*”
*   “*嗡嗡声*”
*   “*富*”

等我想`toProcess`每 5 分钟轮询一次这个队列（使用 Camel-Quartz），并将在这些消费消息（fizz、buzz 等）的正文中找到的字符串合并到一个 JDBC语句中，该`SELECT`语句查找任何匹配字符串（例如作为嘶嘶声或嗡嗡声）。`widgets``widget_name`

*然后*，我想`widget`获取从 JDBC 调用中检索到的每条记录并将其放入`ready`队列中。最后，一个`Burninator`bean 应该使用`ready`每个`Widget`POJO 并将其传递给它的`Burninator#burninate(Widget)`方法。

回顾一下：

1.  `toProcess`外部进程在队列中放置一个字符串，例如“fizz”
2.  Camel-Quartz 作业每 5 分钟触发一次，并出列“嘶嘶声”（以及任何其他）
3.  Camel-JDBC `SELECT * FROM widgets WHERE widget_name = 'fizz'`--> 我怀疑我需要 XPath
4.  假设`widget`查询返回 25 条记录
5.  所有 25 个都被序列化（二进制/JSON/XML？）并放在`ready`队列中
6.  一个接一个，`Burninator#burninate(Widget)`出队`ready`并与下一个出队的小部件一起执行

这是我到目前为止所得到的，但我知道这是错误的：

```
<camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">
    <package>com.myapp.bus</package>
    <template id="camelTemplate"/>
    <route>
        <from uri="quartz://toProcessPollerJob?cron=*+5+*+*+*+?"/>
        <to uri="activemq:toProcess"/>
        <setBody>
            <constant>
                SELECT
                    *
                FROM
                    widgets
                WHERE
                    widget_name = ??? (e.g., fizz, buzz)
            </constant>
        </setBody>
        <marshall>
            <serialization/>
        </marshall>
        <to uri="activemq:ready"/>
        <unmarshall>
            <serialization/>
        </unmarshall>
        <to uri="bean:burninator?method=burninate"/>
    </route>
</camelContext> 
```

任何骆驼巫师都可以在这里为我指明正确的方向（除了参考我应该阅读的*骆驼行动中的章节;-)）。*具体来说，我遇到了麻烦：

*   使用适当的字符串值参数化 JDBC SQL`widget_name`
*   将 JDBC SQL 返回的任何内容序列化为可以发送到`ready`队列的内容
*   将队列上的消息反序列`ready`化为 Java `Widget`POJO

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:11:05.593

您需要使用一些其他语言而不是常量，因为那只是一个常量。例如简单的、groovy 甚至像velocity 等模板语言。您可以在其中创建要使用的SQL。

尝试

```
<simple>
            SELECT
                *
            FROM
                widgets
            WHERE
                widget_name = '${body}'
</simple> 
```

你能在这里看到支持的语言吗 [http://camel.apache.org/languages](http://camel.apache.org/languages)

或者使用 Velocity 或 Freemarker 等模板框架根据模板文件生成 SQL。

# json - 同一个 Go 结构成员上的多个标签

> ID：13694557
> 
> 赞同：14
> 
> 时间：2012-12-04T01:08:17.523
> 
> 标签：json, reflection, tags, go

我觉得这应该是一个小问题，但我已经尝试了我能想到的所有模式，但我没有任何运气。我有一个结构，需要由 the`encoding/json`和[`github.com/zeebo/bencode`](https://github.com/zeebo/bencode)包编码。它恰好包含一个通道，该通道不能被任何一个包编码。因此，它需要携带标签`"-"`，以便跳过该字段。

```
type Index struct {
    Data data
    Queue chan string `json:"-"`
} 
```

这在由包编码时有效`json`，但在包中失败`bencode`。

```
type Index struct {
    Data data
    Queue chan string `bencode:"-"`
} 
```

当然，这个块有互补的问题。我尝试过标签语法，如`json:"-",bencode:"-"`, `*:"-"`, `"-"`, `-`. 有解决办法吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T01:37:32.317

当用于编码提示时，空格似乎是结构标记之间的分隔符。

例子：

```
type TaggedStructExample struct {
    ...
    J int `datastore:",noindex" json:"j"`
} 
```

来自：[https ://developers.google.com/appengine/docs/go/datastore/reference#Properties](https://developers.google.com/appengine/docs/go/datastore/reference#Properties)

在您的情况下，请尝试：

```
type Index struct {
    Data data
    Queue chan string `bencode:"-" json:"-"`
} 
```

# c++ - 使用用户定义的文字初始化 constexpr 数组

> ID：13694558
> 
> 赞同：2
> 
> 时间：2012-12-04T01:08:25.467
> 
> 标签：c++, c++11, constexpr, list-initialization

简化版

```
class C {
 public:
 static constexpr std::array<C, 2> foo {{"1"_C, "2"_C}};
 int x;
 constexpr C(char c) { x=c; }
}
constexpr C operator"" _C(const char * str, size_t n) { return C(*str); } 
```

这不会飞，因为在定义数组的那一行不理解文字。但是自由文字函数不能更早移动，因为那时 C 是未知的。

有没有不涉及在代码中添加可变参数模板或类似可怕的东西的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:26:25.697

问题不在于用户定义的文字，而在于`std::array`需要完整类型的事实（或者实际上，任何`constexpr`初始化都需要）。以下代码也将无法编译：

```
#include <array>

class C {
public:
 static constexpr std::array<C, 2> foo {{C('1'), C('2')}};
 int x;
 constexpr C(char c) : x(c) {} // please use a mem-initializer-list
}; 
```

错误类似于（此处为 Clang 3.3 SVN）：

```
/usr/include/c++/v1/array:136:16: 错误: 字段的类型“value_type”不完整
      （又名“C”）
    value_type __elems_[_Size > 0 ? _尺寸：1]；
               ^
t.cpp:5:36：注意：在模板类 'std::__1::array' 的实例化中
      在这里请求
 static constexpr std::array<C, 2> foo {{C('1'), C('2')}};
                                   ^
t.cpp:3:7: 注意：'C' 的定义直到结束'}' 才完成
C类{
      ^

```

# iphone - 清除 credentialsForProtectionSpace 以仅设置一个键值。NSURLCredentialStorage

> ID：13694559
> 
> 赞同：2
> 
> 时间：2012-12-04T01:08:27.620
> 
> 标签：iphone, ios, keychain, nsurlcredentialstorage

我正在学习 NSURLCredentialStorage 并且有一个情况。在开发我的应用程序时，我碰巧使用以下代码存储了两个带有密码的用户名。我遇到的问题是，不需要存储两组 uname/pword 组合。所以我的问题是，如何重置存储并重新开始？

这是我加载凭据的方式：请注意，我正在使用来自 ObjectiveResource 示例的加载，它在索引 0 处抓取对象。我希望只有 1 个对象对。

```
- (void)loadCredentialsFromKeychain {
NSDictionary *credentialInfo = [[NSURLCredentialStorage sharedCredentialStorage] credentialsForProtectionSpace:[self protectionSpace]];

// Assumes there's only one set of credentials, and since we
// don't have the username key in hand, we pull the first key.
NSArray *keys = [credentialInfo allKeys];
if ([keys count] > 0) {
    NSString *userNameKey = [[credentialInfo allKeys] objectAtIndex:0]; 
    NSURLCredential *credential = [credentialInfo valueForKey:userNameKey];
    self.login = credential.user;
    self.password = credential.password;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:21:29.360

`reset credential`使用`NSURLCredentialStorage` `removeCredential:forProtectionSpace`：

```
// reset the credentials cache...
NSDictionary *credentialsDict = [[NSURLCredentialStorage sharedCredentialStorage] allCredentials];

if ([credentialsDict count] > 0) {
    // the credentialsDict has NSURLProtectionSpace objs as keys and dicts of userName => NSURLCredential
    NSEnumerator *protectionSpaceEnumerator = [credentialsDict keyEnumerator];
    id urlProtectionSpace;

    // iterate over all NSURLProtectionSpaces
    while (urlProtectionSpace = [protectionSpaceEnumerator nextObject]) {
        NSEnumerator *userNameEnumerator = [[credentialsDict objectForKey:urlProtectionSpace] keyEnumerator];
        id userName;

        // iterate over all usernames for this protectionspace, which are the keys for the actual NSURLCredentials
        while (userName = [userNameEnumerator nextObject]) {
            NSURLCredential *cred = [[credentialsDict objectForKey:urlProtectionSpace] objectForKey:userName];
            NSLog(@"cred to be removed: %@", cred);
            [[NSURLCredentialStorage sharedCredentialStorage] removeCredential:cred forProtectionSpace:urlProtectionSpace];
        }
    }
} 
```

参考[这个](http://www.springenwerk.com/2008/11/i-am-currently-building-iphone.html)链接。

# android - 我需要覆盖哪些主题属性才能更改对话框的蓝色突出显示颜色？

> ID：13694564
> 
> 赞同：11
> 
> 时间：2012-12-04T01:09:07.337
> 
> 标签：android, android-theme

我有一个名为“greenhighlight”的主题——这个主题是使用[Android Action Bar Style Generator 生成](http://jgilfelt.github.com/android-actionbarstylegenerator/)的，并且继承自默认的 ActionBarSherlock 主题。除了将 ActionBar 底部的突出显示从蓝色更改为绿色外，该主题没有任何作用。

为了主题化我的所有活动，我只做：

```
<application android:theme="@style/Theme.greenhighlight"... 
```

这对活动非常有效（注意 ActionBar 底部的绿色突出显示）：

![主题安卓活动](../Images/b5de92a2a16f391201e32ab2ae6e11d5.png)

但是，我很难将我的对话主题化以匹配我的活动：

![默认主题 Android 列表对话框](../Images/061caf45d8369dc4ea8e7a37afc63303.png)

![默认主题 Android 进度对话框](../Images/a50f3b79bb04d1a43ddbdec155c4af40.png)

我的“greenhighlight_Dialog”主题定义为：

```
<style name="greenhighlight_Dialog" parent="@style/Theme.Sherlock.Dialog">
    <item name="android:progressBarStyleHorizontal">
        @style/greenhighlight_ProgressBar
    </item>
</style> 
```

我继承了默认的 Sherlock 对话框主题，并使用由我生成的“greenhighlight”主题定义的进度条样式覆盖进度条——您可以在上面的屏幕截图中看到进度条是正确的绿色阴影。

要使用主题，我正在运行以下代码：

```
ContextThemeWrapper ctw = 
    new ContextThemeWrapper(this, R.style.greenhighlight_Dialog);
AlertDialog.Builder builder = new AlertDialog.Builder(ctw);
...
ProgressDialog pd = new ProgressDialog(this, R.style.greenhighlight_Dialog);
... 
```

我的问题是我不知道我需要覆盖哪些属性。我一直在按照[Styles and Themes](http://developer.android.com/guide/topics/ui/themes.html) doco推荐的方式查看[styles.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml)和[theme.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml)（其中指出“R.style 参考，然而，没有很好的文档记录，也没有彻底描述样式”）——但是那里在 Theme.Dialog 上定义了很多样式，我不确定我需要覆盖哪些样式才能获得我想要的更改。

我需要覆盖哪些属性才能使我的对话框具有绿色标题文本、标题下方的绿色高亮条和选中列表项的绿色复选标记？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-07T21:57:19.887

我去挖掘源代码并遇到了`alert_dialog_holo.xml`布局文件。这是分隔线视图：

```
<View android:id="@+id/titleDivider"
    android:layout_width="match_parent"
    android:layout_height="2dip"
    android:visibility="gone"
    android:background="@android:color/holo_blue_light" /> 
```

在类中，如果存在标题`AlertController`，则其可见性设置为。`VISIBLE`由于颜色是硬编码的，所以没有办法用样式属性覆盖它。

这是标题视图：

```
<com.android.internal.widget.DialogTitle android:id="@+id/alertTitle"
    style="?android:attr/windowTitleStyle"
    android:singleLine="true"
    android:ellipsize="end"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

所以它使用`windowTitleStyle`. 追了很多，但我最终找到了使用的风格：

```
<style name="TextAppearance.Holo.DialogWindowTitle">
    <item name="android:textSize">22sp</item>
    <item name="android:textColor">@android:color/holo_blue_light</item>
</style> 
```

继父样式返回后，我只能通过样式更改文本颜色：

```
<style name="AppTheme" parent="@android:style/Theme.Holo">
    <item name="android:alertDialogTheme">@style/AlertDialogStyle</item>
</style>

<style name="AlertDialogStyle" parent="@android:style/Theme.Holo.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
    <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
    <item name="android:windowTitleStyle">@style/DialogWindowTitle</item>
</style>

<style name="DialogWindowTitle">
    <item name="android:maxLines">1</item>
    <item name="android:scrollHorizontally">true</item>
    <item name="android:textAppearance">@style/DialogWindowTitleAppearance</item>
</style>

<style name="DialogWindowTitleAppearance" parent="@android:style/TextAppearance.Holo.DialogWindowTitle">
    <item name="android:textColor">#00ff00</item>
</style> 
```

现在对于分隔线，您无法通过样式更改它，但由于您知道 id，您可以扩展`AlertDialog`该类并在它创建其布局 (onCreate) 并更改它的颜色时拦截它。虽然这是在私人`AlertController`课程中处理的，所以我不确定你会有多少运气。如果我想出任何东西，我会更多地研究并回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T06:09:52.970

我找到了删除分隔符的解决方案：只需在您的自定义警报对话框样式中添加以下行（请参阅 Jason Robinson 的答案中的 AlertDialogStyle）：

```
 <item name="android:divider">@null</item>" 
```

然后分隔线将消失。

如果您仍想添加自定义分隔线，可以将其添加到自定义内容布局中。

# facebook - 当用户撤销对您的应用程序的权限时，facebook 是否会为您提供实时更新？

> ID：13694565
> 
> 赞同：0
> 
> 时间：2012-12-04T01:09:11.893
> 
> 标签：facebook

我正在开发一个 Facebook 应用程序（托管在 iframe 中的那个）。在一个场景中，我将用户的权限缓存在数据库中，并依靠 Facebook 实时更新来保持我的权限缓存同步。

我注意到当用户批准我的应用程序时，Facebook 确实将 POST 发送到我的实时端点。但是，当用户撤销权限时，没有更新。

是设计使然还是我错过了什么？

在 Facebook 应用程序设置中，我订阅了权限对象并将字段留空。

特洛伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:08:08.453

虽然我还没有尝试过，但我建议你是否也可以看看[实时更新](https://developers.facebook.com/docs/reference/api/realtime/)功能。当用户授予您的应用程序的权限发生更改时，它可以选择获得通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:13:10.203

您必须在应用设置中设置取消授权回调 URL。它在高级会话中。当用户撤销您的应用授权时，FB 将向指定的 url 发送 POST。

[这可能会有所帮助。](https://stackoverflow.com/questions/9670293/how-to-use-deauthorize-callback-url-with-facebook-js-sdk)

# wix - 在 WiX 中处理更改的升级代码，其中旧安装程序允许每个用户和每台机器

> ID：13694566
> 
> 赞同：2
> 
> 时间：2012-12-04T01:09:20.690
> 
> 标签：wix, windows-installer, upgrade

我有一个产品，它曾经附带`.vdproj`安装程序。在最新版本中，我发布了一个测试版，其中包含使用 WiX 完全重做的安装程序（作为迁移到不再支持 .vdproj 的 Visual Studio 2012 的一部分）。不幸的是，当时我不知道升级代码应该在副本之间保持一致，并且已经发布了一个带有不同升级代码的 beta 安装程序。

我希望我的安装程序能够自动删除使用该`.vdproj`安装程序构建的先前版本，以及作为 beta 副本发布的版本。这是我到目前为止得到的地方：

```
<Product Id="{A4CBA9F9-D86B-400C-BD23-996B4367931A}" Name="Foo Viewer" Language="1033" Version="6.0.1.0" Manufacturer="Foo Corporation" UpgradeCode="43e024b8-b3ea-40a3-a854-2af83f207f0f">
<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

<MediaTemplate EmbedCab="yes" />

<Feature Id="FOOVIEWERFeature" Title="Foo Viewer" Level="1" Description="The Foo Viewer GUI and CLI binaries." AllowAdvertise="no" Absent="disallow" Display="expand">
<!-- Stuff -->
</Feature>

<PropertyRef Id="NETFRAMEWORK40CLIENT" />
<Condition Message="Foo Viewer requires the .NET Framework 4.0 Client Profile or higher to run.">Installed OR NETFRAMEWORK40CLIENT</Condition>

<Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />
<UIRef Id="FooViewerInstallerUI" />
<UIRef Id="WixUI_ErrorProgressText" />
<Icon Id="FooViewerIcon" SourceFile="../FooViewer.ico" />
<Property Id="ARPPRODUCTICON" Value="FooViewerIcon" />

<!-- I got this upgrade code by opening one of the old .vdproj MSIs in Orca -->
<Upgrade Id="{80539F30-8176-4DCC-A102-ED32A34A91CB}">
  <UpgradeVersion OnlyDetect="no"
                  Minimum="0.0.0.0"
                  IncludeMinimum="yes"
                  MigrateFeatures="no"
                  IgnoreRemoveFailure="no"
                  Property="UPGRADE_VDPROJ_FOOVIEWER"
                  />
</Upgrade>
<Upgrade Id="{43e024b8-b3ea-40a3-a854-2af83f207f0f}">
  <!-- Foo Viewer 6.0.0.0 (Beta) shipped with a version 5.3.0.0 in the installer. -->
  <UpgradeVersion OnlyDetect="no"
                  Minimum="5.3.0.0"
                  Maximum="5.3.0.0"
                  IncludeMinimum="yes"
                  IncludeMaximum="yes"
                  MigrateFeatures="yes"
                  IgnoreRemoveFailure="no"
                  Property="UPGRADE_WIX_FOOVIEWER"
                  />

  <!-- Detect newer versions -->
  <UpgradeVersion OnlyDetect="yes"
                  Minimum="6.0.1.0"
                  IncludeMinimum="no"
                  Property="NEW_VERSION_FOUND"/>
</Upgrade>
<Condition Message="A newer version of Foo Corporation Foo Viewer is already installed.">
  Installed OR NOT NEW_VERSION_FOUND
</Condition>
<InstallExecuteSequence>
  <RemoveExistingProducts Before="InstallInitialize" />
</InstallExecuteSequence>
</Product> 
```

然而，尽管`<upgrade>`为旧安装程序的升级代码添加了一个元素，旧版本并没有被删除。结果，新副本尝试安装在旧副本之上，然后两个版本都不再工作。

测试版副本和较新版本的检测工作正常（`<Upgrade`使用 GUID {43e024b8-b3ea-40a3-a854-2af83f207f0f} ）。测试版被卸载，如果我生成一个“更新”的安装程序，那么当前的安装程序不会正确安装。也就是说，WiX 安装程序相互检测没有问题。

我在这里做错了什么，不会让它检测到旧`.vdproj`安装的副本吗？

**编辑**：当发生这种情况时，我会记录安装过程的日志，我得到以下信息：

```
Action start 17:25:47: FindRelatedProducts.
MSI (c) (10:B8) [17:25:47:269]: FindRelatedProducts: current install is per-machine.  Related install for product '{2024FF03-D6F2-4065-A22B-80252B2A66B6}' is per-user.  Skipping...
Action ended 17:25:47: FindRelatedProducts. Return value 1. 
```

这似乎是准确的。旧的安装程序提供了“每用户”或“每台机器”的选项，而新的安装程序总是强制每台机器。如果我在旧安装程序中选择“使用此计算机的所有人”，则新安装程序能够检测到它。如果可能，我想在 WiX 中检测任一选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:04:04.093

恐怕您不能在单个安装程序中同时处理 2 个不同的现有安装。此外，您不应尝试卸载另一个产品（因为您的 UpgradeCode 和 ProductCode 不同，它是另一个产品），因为 msi 无法同时安装。

我**建议创建单独的 exe 应用程序 (bootstrapper)**，它将运行以前安装的产品的子卸载过程，然后立即运行产品的安装（可能在完整的 UI 模式下）。

**要在没有用户交互的情况下卸载产品，请使用以下命令：**

```
msiexec /x {ProductCode} /qn 
```

我希望您知道以前安装的产品的 ProductId。如果没有，你可以找到它，搜索注册表：

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall\{ProductCode}\DisplayName 
```

如果为单个用户安装了应用程序，则为 HKEY_CURRENT_USER。

注册表路径中提到的 {ProductCode} 是 GUID，它是您的 productCode。您应该检索“卸载”分支中的所有节点，并找到那些检查“DisplayName”属性的产品。我希望您至少知道所安装产品的名称 =)。并注意不要删除客户端机器上的所有软件 =)

请注意，如果您在 x64 机器上安装了 x86 应用程序，您应该搜索位置

```
HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{ProductCode}\DisplayName" 
```

一个更重要的注意事项：如果您的引导程序也是 x86 应用程序，您应该检索没有“Wow6432Node”节点的节点，因为它将自动插入到请求的路径中。不同平台上的注册表项的精彩世界 =)。

请确保您的引导程序将以**管理员权限**运行或要求权限提升（它应包含安全清单）。

**关于您帖子中问题的一个假设**：也许您在更改 UpgradeCode 时没有更改 ProductCode？我不确定它会如何表现，但它绝对不是自动删除以前安装的产品的 MajorUpgrade。有关更多详细信息，请参阅[有关升级的 Wix 文档](http://wix.tramontana.co.hu/tutorial/upgrades-and-modularization)。因此，您可能会获得次要升级或补丁，直接在先前安装的文件之上安装新组件。那肯定会破坏应用程序。

# c++ - C++：用字符串初始化 char 数组？

> ID：13694569
> 
> 赞同：4
> 
> 时间：2012-12-04T01:09:40.210
> 
> 标签：c++, arrays, string

假设我有一个叫做垃圾的字符串。

无论垃圾中有什么，我都想用它制作一个 char 数组。每个元素都是字符串的一个字符。

因此，代码将类似于：

```
const int arrSize = sizeof(garbage); //garbage is a string
char arr[arrSize] = {garbage}; 
```

但是，这将给出一个错误“无法在初始化中将字符串转换为字符”。

这样做的正确方法是什么？我只想给这该死的东西一个字符串并用它制作一个数组。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T01:10:52.157

C++`std::string`维护一个内部`char`数组。您可以使用`c_str()`成员函数访问它。

```
#include <string>
std::string myStr = "Strings! Strings everywhere!";
const char* myCharArr = myStr.c_str(); 
```

请记住，您不能修改内部数组。如果您想这样做，请制作数组的副本并修改副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-24T08:18:08.840

我认为您所追求的要简单得多：

```
char arr[] = "some interesting data (garbage)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:11:41.910

您可以只使用`garbage.data()`，它已经是指向包含您的字符串数据的字符数组的第一个元素的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-12T20:00:30.073

或者这是一种很重的方法。

```
#include <string>
std::string temp = "something";
char* myChar = new char(temp.length());
for(int i = 0; i < temp.length(); ++i){
    a[i] = temp[i];
} 
```

# emacs - emacs tramp 配置前缀 macs os x

> ID：13694574
> 
> 赞同：0
> 
> 时间：2012-12-04T01:09:51.863
> 
> 标签：emacs, configure, tramp

对于安装`tramp`，`emacs`对于`configure`操作，我应该使用哪个前缀？在流浪汉的介绍中。

```
./configure --prefix=/usr --with-contrib 
```

# objective-c - 即使在使用时，编辑模式单元格中的 UITableView 仍然可以选择

> ID：13694576
> 
> 赞同：1
> 
> 时间：2012-12-04T01:10:07.493
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`设置`AllowsMultipleSelectionDuringEditing`为YES。选择多行是我的应用程序的重要组成部分，而且效果很好。

问题是，在我的一个上，我`tableView's`不希望用户在编辑模式下能够选择前 2 行，所以我实现了以下内容：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0 || indexPath.row ==1) {
        return NO;
    }//end

    return YES;

}//end 
```

这按我的想法工作，并且不显示红色复选框图形或重新排序行的选项。但是，我仍然可以选择那些不可编辑的行，并调用该`indexPathsForSelectedRows`方法并返回`indexPaths`这些行的。

如何防止用户在编辑模式下完全无法选择这些行，并防止在调用时触摸这些行`indexPathsForSelectedRows`？为什么不`canEditRowAtIndexPath:`为我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:17:35.150

一种方法是实现`– tableView:willSelectRowAtIndexPath:`方法并检查是否`tableView.editing == YES`返回`nil`前两个单元格。

就像是，

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (tableView.editing == YES && indexPath.row < 2 ) 
       return nil;

    return indexPath;
} 
```

您还可以在方法`selectionStyle`中将这两个单元格设置为`UITableViewCellSelectionStyleNone`编辑模式`cellForRowAtIndexPath`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:24:02.123

您是否尝试过以下代码？

```
tableView.allowsSelectionDuringEditing = NO; 
```

或者

```
tableView.allowsMultipleSelectionDuringEditing = NO; 
```

# android - 我可以设置超出 AudioManager.getStreamMaxVolume 的音量吗？

> ID：13694580
> 
> 赞同：1
> 
> 时间：2012-12-04T01:10:25.327
> 
> 标签：android, max, volume

我正在制作一个带有播放功能的观鸟应用程序来叫鸟。录制的许多歌曲都非常糟糕，有些歌曲的音量非常低。我知道如何设置最大音乐音量

```
 AudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 
        mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0); 
```

但这对于很多歌曲来说可能还不够；我的 Galaxy Note 的扬声器很差，即使带耳机，最大值也很低......

是否可以为低音量歌曲增加超过此最大值的增益，以便以合适的音量播放？

这听起来可能是个愚蠢的问题，但 Linux/Maemo 的 mplayer 有这个选项，称为*gain*，它允许我在诺基亚 N800 中播放一些高于 max 的歌曲。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:01:59.133

而不是使用媒体播放器使用音轨来播放文件。因为工作流程将如下

1.  从文件中读取为字节或短数组
2.  添加增益只需将样本乘以某个分数（相关问题[Android - 如何在录制时添加增益控制](https://stackoverflow.com/questions/10449963/android-how-to-add-gain-control-when-recording)）
3.  现在将样本写入音轨
4.  然后播放它。

# sql - 在甲骨文中计数 - 我做错了什么

> ID：13694581
> 
> 赞同：1
> 
> 时间：2012-12-04T01:10:27.713
> 
> 标签：sql, oracle

对于 Oracle-Noob 问题，我很抱歉，但我在尝试运行的查询时遇到问题，似乎无法弄清楚如何编写它。

如果我将查询分成两部分，我会得到每个部分的正确信息。看：

```
select   NVL (skill.category, 'Total:') "Skill Category",
         count (training.code) "# of Trainings"
from     skill join training on skill.code = training.code
group by rollup (skill.category); 
```

返回：

```
Skill Category  # of Trainings
--------------- --------------
Database                     2
HR                           1
Leadership                   1
Printing                     1
Sales                        3
Web Design                   5
Total:                      13 
```

同样，对于第二个查询，我得到以下信息：

```
select NVL (skill.category, 'Total:') "Skill Category",
       count (project.code) "projects req training"
from   skill join project on skill.code = project.code
group by rollup (skill.category);

Skill Category  projects req training
--------------- ---------------------
Database                            2
Printing                            3
Web Design                          5
Total:                             10 
```

但是，当我尝试组合这些查询时，我的结果被搞砸了：

```
select NVL (skill.category, 'Total:') "Skill Category",
           count (training.code) "# of Trainings",
           count (project.code) "Projects Requiring Skill"
from skill join training on skill.code = training.code
           left join project on training.code = project.code
group by rollup (skill.category);

Skill Category  # of Trainings Projects Requiring Skill
--------------- -------------- ------------------------
Database                     4                        4
HR                           1                        0
Leadership                   1                        0
Printing                     3                        3
Sales                        3                        0
Web Design                  13                       13
Total:                      25                       20 
```

我在这里做错了什么？我非常感谢任何帮助，如果我遗漏了一些明显的东西，我很抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:09:41.853

问题是您加入了乘以数据。您有两个 1-n 关系，在技能和培训之间以及在培训和项目之间。结果是组合的乘法。

解决办法是分别做两个汇总，然后用join合并：

```
select st.*, "projects req training"
from (select NVL(skill.category, 'Total:') "Skill Category",
             count(training.code) "# of Trainings"
      from skill left outer join
           training
           on skill.code = training.code
      group by rollup (skill.category)
     ) st join
     (select NVL(skill.category, 'Total:') "Skill Category",
             count(project.code) "projects req training"
      from skill left outer join
           project
           on skill.code = project.code
      group by rollup (skill.category)
     ) sp
     on st."Skill Category" = sp."Skill Category" 
```

在这个版本中，我`left outer join`在子查询中使用，以确保每个子查询返回所有技能。这使我可以`inner join`在下一个级别使用。我将 留`rollup`在子查询中，而不是在外部进行额外的聚合。

# jquery - 如何简化这个 jQuery 函数？

> ID：13694586
> 
> 赞同：1
> 
> 时间：2012-12-04T01:11:25.930
> 
> 标签：jquery, if-statement

我是 jQuery 新手，想知道是否有更好、更有效的方法来编写以下代码，该代码将显示与按钮关联的表单字段，并在单击一个时隐藏其他两个表单字段：

```
$(document).ready(function() {
var frm = $('form');
var comp = $('form[name="parents"]');
var comt = $('form[name="teachers"]');
var comk = $('form[name="kids"]');
$(frm).hide();
$('button[name="parents"]').click(function(e) {
    $(comp).slideToggle(300);
    $(comt).slideUp(300);
    $(comk).slideUp(300);
    $('footer').css("border-color","#2dff1f");
    e.preventDefault();
});
$('button[name="teachers"]').click(function(e) {
    $(comt).slideToggle(300);
    $(comp).slideUp(300);
    $(comk).slideUp(300);
    $('footer').css("border-color","#23a4f2");
    e.preventDefault();
});
$('button[name="kids"]').click(function(e) {
    $(comk).slideToggle(300);
    $(comt).slideUp(300);
    $(comp).slideUp(300);
    $('footer').css("border-color","#9800ff");
    e.preventDefault();
});
if ($("form:visible").length === 0) {
$('footer').css("border-color","#000");
}
}); 
```

此外，从底部开始的四行我尝试设置一个 if 语句，说如果 comp、comk、comt 都关闭，则更改页脚边框颜色。它只是在加载时将边框颜色变为黑色，然后再也不这样做了。

编辑：这是html结构-

```
<button name="parents">Parents</button>
        <form name="parents" action="share.php" method="post">
            <fieldset>
                <span style="white-space:nowrap">
                    <label for="name">Name</label>
                    <input type="text" name="name" id="name" tabindex="1"></input>
                </span>
                <span style="white-space:nowrap">
                <label for="email">Email</label>
                <input type="text" id="email" name="email" tabindex="2" onchange="emailValidation()" class="textInput validateEmail required">
                </span>
                <span style="white-space:nowrap">
                <label for="country">Country</label>
                <select name="country" id="country" tabindex="3">
                    <optgroup label="Select One">
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                    </optgroup>
                </select>
                <!--<label for="country">Country</label>
                <?php require('countries.php'); ?> -->
                </span>
                <span style="white-space:nowrap">
                <label for="zip">Zip Code</label>
                <input type="text" id="zip" name="zip" tabindex="4" class="textInput required" maxlength="5">
                </span>

                <label for="message">Message</label>
                <textarea name="message" id="message" tabindex="5"></textarea>
                <input type="submit" tabindex="6" value="share with us">
            </fieldset>
        </form>

        <button name="teachers">Teachers</button>
        <form name="teachers" action="share.php" method="post">
            <fieldset>
                <span style="white-space:nowrap">
                    <label for="name">Name</label>
                    <input type="text" name="name" id="name" tabindex="1"></input>
                </span>
                <span style="white-space:nowrap">
                <label for="email">Email</label>
                <input type="text" id="email" name="email" tabindex="2" onchange="emailValidation()" class="textInput validateEmail required">
                </span>
                <span style="white-space:nowrap">
                <label for="country">Country</label>
                <select name="country" id="country" tabindex="3">
                    <optgroup label="Select One">
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                    </optgroup>
                </select>
                <!--<label for="country">Country</label>
                <?php require('countries.php'); ?> -->
                </span>
                <span style="white-space:nowrap">
                <label for="zip">Zip Code</label>
                <input type="text" id="zip" name="zip" tabindex="4" class="textInput required" maxlength="5">
                </span>

                <label for="message">Message</label>
                <textarea name="message" id="message" tabindex="5"></textarea>
                <input type="submit" tabindex="6" value="share with us">
            </fieldset>
        </form>

        <button name="kids">Kids</button>
        <form name="kids" action="share.php" method="post">
            <fieldset>
                <span style="white-space:nowrap">
                    <label for="name">Name</label>
                    <input type="text" name="name" id="name" tabindex="1"></input>
                </span>
                <span style="white-space:nowrap">
                <label for="email">Email</label>
                <input type="text" id="email" name="email" tabindex="2" onchange="emailValidation()" class="textInput validateEmail required">
                </span>
                <span style="white-space:nowrap">
                <label for="country">Country</label>
                <select name="country" id="country" tabindex="3">
                    <optgroup label="Select One">
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                        <option>USA</option>
                    </optgroup>
                </select>
                <!--<label for="country">Country</label>
                <?php require('countries.php'); ?> -->
                </span>
                <span style="white-space:nowrap">
                <label for="zip">Zip Code</label>
                <input type="text" id="zip" name="zip" tabindex="4" class="textInput required" maxlength="5">
                </span>

                <label for="message">Message</label>
                <textarea name="message" id="message" tabindex="5"></textarea>
                <input type="submit" tabindex="6" value="share with us">
            </fieldset>
        </form> 
```

感谢您帮助我了解有关 jQuery 的更多信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:26:08.983

```
$(document).ready(function() {
    var $form = $('form').hide(),
        $footer = $('footer'),
        colors = {
           parents: '#2dff1f',
           teachers: '#23a4f2',
           kids:  '#9800ff'
        };

    $('button').click(function(e) {
        var $target = $form.filter('[name="'+this.name+'"]');
        $form.not($target).slideUp();
        $this.slideToggle();
        $footer.css("border-color", colors[this.name]);
        e.preventDefault();
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:23:30.937

开始

```
$(document).ready(function() {
    var frm = $('form').hide(),
        clist = $('form[name="parents"], form[name="teachers"], form[name="kids"]'),
        colors = {parents:'#2dff1f', teachers:'#23a4f2', kids:'#9800ff'};
    // the colors could be put in the html structure and retrieved from there..
    // or they could be css rules matching the name and applied by adding/removing a class to the footer

    $('button[name="parents"], button[name="teachers"], button[name="kids"]').click(function(e) {
        e.preventDefault();

        var target = $(this).attr('name');

        clist.not('[name="'+ target +'"]').slideUp(300);
        clist.filter('[name="'+ target +'"]').slideToggle(300);

        $('footer').css("border-color", colors[target]);
    });
    if ($("form:visible").length === 0) {
        $('footer').css("border-color", "#000");
    }
}); 
```

* * *

**更新**（*包括将颜色移动到类以便更好地维护*）

```
$(document).ready(function() {
    var forms = $('form').hide(),
        footer = $('footer');

    $('button[name="parents"], button[name="teachers"], button[name="kids"]').click(function(e) {
        e.preventDefault();

        var target = $(this).attr('name');

        forms.not('[name="' + target + '"]').slideUp(300);
        forms.filter('[name="' + target + '"]').slideToggle(300, function(){
            // once the animation is complete
            var toggled = $(this);
            footer.removeClass(); // clear footer class
            if (toggled.is(':visible')){ // if toggle resulted in open form
                footer.addClass(target); // add class
            }
        });
    });
}); 
```

CSS

```
footer{
    border:1px solid #000;
}

footer.parents{
    border-color:#2dff1f;
}
footer.teachers{
    border-color:#23a4f2;
}
footer.kids{
    border-color:#9800ff;
} 
```

**演示在** [http://jsfiddle.net/gaby/uLs6c/](http://jsfiddle.net/gaby/uLs6c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:27:22.590

为所有按钮添加一个公共类，为简单起见，我将`btn`用作类。

```
var formColors = {
    kids: '#9800ff',
    parents: '#2dff1f',
    teachers: '#23a4f2'

}

$('button.btn').click(function(e) {
    e.preventDefault();
    var name = this.name
    var color = $('form:visible').length ? formColors[name] : "#000";
    var thisForm = $('form[name="' + name + '"]').slideToggle(300)
    $('form').not(thisForm).slideUp(300);
    $('footer').css("border-color", color);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:38:04.083

这些家伙很快...... :)

但是，这是我的返工：

```
jQuery(function($) {
    var frm = $('form').
        footer = $('footer'),
        formsArr = {
            parents: $('form[name="parents"]').data('bd-color', '#2dff1f'),
            teachers: $('form[name="teachers"]').data('bd-color', '#23a4f2'),
            kids: $('form[name="kids"]').data('bd-color', '#9800ff')
        };

    frm.hide();

    $('button[name="parents"], button[name="teachers"], button[name="kids"]').on('click', function(e){
        e.preventDefault();

        for (var i in formsArr){
            if (i != this.name)
                formsArr[i].slideUp(300);
        }

        formsArr(this.name).slideDown(300);
        footer.css( 'border-color', formsArr(this.name).data('bd-color') )
    });

    if (!$("form:visible").length) {
        footer.css("border-color","#000");
    }

}); 
```

# wpf - WPF 框架不会被拉出窗口

> ID：13694587
> 
> 赞同：1
> 
> 时间：2012-12-04T01:11:29.180
> 
> 标签：wpf, user-controls, controls, frame

我在网格中有两个框架，如下所示：

```
<Grid x:Name="SlideGrid" VerticalAlignment="Stretch" Width="{Binding ActualWidth, ElementName=MainGrid, Converter={StaticResource DoubleConverter}}" Margin="0,28,0,0">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.5*"/>
        <ColumnDefinition Width="0.5*"/>
    </Grid.ColumnDefinitions>
    <ItemsControl Style="{DynamicResource StretchItem}" Grid.Column="0">
        <Frame x:Name="MP" Source="/ARC;component/MainPage.xaml" />
    </ItemsControl>
    <ItemsControl Style="{DynamicResource StretchItem}" Grid.Column="1">
        <Frame x:Name="ARP" Source="/ARC;component/AddReferencePage.xaml"/>
    </ItemsControl>
    <Grid.RenderTransform>
        <TranslateTransform/>
    </Grid.RenderTransform>
</Grid> 
```

网格占据了整个窗口，因此第二个项目控件位于右侧的窗口外。当我使用过渡将整个网格向左滑动时，允许使用第二个用户控件，它只显示一个白色区域。如果我在设计器中手动移动网格以稍微偏移一点，以便看到第二个用户控件的一小部分，它仍然会失败。是否有一些框架设置允许绘制控件，即使它在窗口外？谢谢。

# android - 如何构建一个简单的基于 NFC 的 Android 应用，只读

> ID：13694594
> 
> 赞同：0
> 
> 时间：2012-12-04T01:12:38.343
> 
> 标签：android, sql, eclipse, nfc

这是给你们的一个加载问题。首先，我的背景是 Visual Studio 2010 和 C#。我拥有 SQL 查询的所有代码，并且这些代码已经写在这个应用程序的 PC 变体中。我之前没有做过安卓应用，也没有java经验。我只是祈祷它与 C# 的飞跃不会太远。

我想做的是制作一个非常基本的应用程序，当 NFC 扫描标签时会调用它。然后，该应用程序会将标签的内容推送到 SQL 数据库。不需要太多（如果有的话）用户界面。

截至目前，我已经安装了带有 Android SDK 的 Eclipse IDE。我完成了教程并制作了 Hello World 应用程序，然后在我的设备上运行它（Nexus 4 running stock 4.2.1）。

我一直在尝试寻找教程等，但我需要一些相当基本的东西，因为我还不熟悉这个环境。任何关于从哪里开始或如何进行的指示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:17:13.293

要开始创建 NFC 应用程序：http: [//developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

一些使用 SQL 数据库的教程： [http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)
[http://www.codeproject.com/Articles/119293/Using-SQLite-Database-与-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# android - 带有 ListView 的对话框不返回正确的 ID

> ID：13694600
> 
> 赞同：0
> 
> 时间：2012-12-04T01:13:08.707
> 
> 标签：android, android-listview

我有一个对话框，显示`ListView`像这样的某些项目

```
d = new Dialog(this);
d.setContentView(R.layout.dialog_layout);
d.setTitle("Select Bowler " + String.valueOf(bakerList.size()+1));

ListView lv3 = (ListView)d.findViewById(R.id.dialog_list);
Cursor c3 = getContentResolver().query(TeamBowlers.CONTENT_URI,new String[] {TeamBowlers.ID,TeamBowlers.SUB,TeamBowlers.BOWLER_ID,TeamBowlers.CAPTAIN}
    ,TeamBowlers.TEAM_ID + "=?",new String[] {String.valueOf(teamSelectedID)},TeamBowlers.POSITION + " ASC");                                       

if(c3.moveToFirst() && c3 != null){
    SimpleCursorAdapter adapter2 = new ImageAdapter(this,R.layout.row,c3
            ,new String[] {TeamBowlers.ID,TeamBowlers.SUB,TeamBowlers.BOWLER_ID},new int[] {R.id.icon,R.id.bowler_txt,R.id.bowler_txt2});

    lv3.setAdapter(adapter2);
    lv3.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View v,int position, long id) {
            bakerList.add(id);
            updateName(id);
        }

    });
    d.show();
} 
```

问题是当我单击列表中的一个项目时，返回的 ID 不是数据库中的 id，它基本上只返回索引。

为什么它不绑定我的数据库的“_id”列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:56:06.127

```
why is it not binding my "_id" column of my database? 
```

我想这不是真的。那`id`in`onItemClick`实际上是`row id`in 列表视图，它不是`id`来自你的`cursor`

如果你想要行数据，你可以在`onItemClick`

```
Cursor cursor = ((SimpleCursorAdapter) arg0).getCursor();
cursor.moveToPosition(position);
long _id= cursor.getLong(cursor.getColumnIndex("id"); 
```

# c# - 如何绑定到字符串中的样本数据？

> ID：13694604
> 
> 赞同：0
> 
> 时间：2012-12-04T01:13:32.223
> 
> 标签：c#, windows-phone-7, windows-phone

我想将字符串绑定到样本数据。我可以绑定到代码隐藏，但它会在手机屏幕上闪烁，直到示例数​​据消失。我知道如何绑定到列表并在模拟预览中查看它，我不知道在示例数据中创建字符串的语法。

以下是我拥有的示例数据。我想为名为 stringVar 的变量添加一个属性。它只是一个字符串。

```
<local:ListPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ListPage" >

    <local:ListPage.stringVar />
    <local:ListPage.ItemList>
        <local:Book id="0" title="item 1"/>
    </local:ListPage.ItemList>
</local:ListPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:20:58.250

我建议在你的 xaml 中有一个资源

```
<local:ListPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:ListPage" >
    <local:ListPage.Resources>
        <sys:String x:Key="MyStaticString">Hello world!<sys:String>
    </local:ListPage.Resources>

    <local:ListPage.stringVar />
    <local:ListPage.ItemList>
        <local:Book id="0" title="{StaticResource MyStaticString}"/>
    </local:ListPage.ItemList>
</local:ListPage> 
```

# c++ - 如何在 C++ 项目中使用 C 源文件？

> ID：13694605
> 
> 赞同：26
> 
> 时间：2012-12-04T01:13:37.060
> 
> 标签：c++, c

在 C++ 项目中，由于 C 和 C++ 的标准不同，包含 C 源文件的 .h 文件会导致很多错误。
如何在 C++ 项目（或 main.cpp）中使用 C 源文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-04T01:24:57.333

为了获得最大的可靠性：

*   使用 C 编译器编译 C 源代码。
*   使用 C++ 编译器编译 C++ 源代码
*   最好用 C++ 编写 main() 函数。
*   将程序与 C++ 编译器链接。

确保 C 头文件本身知道 C++，或者 C++ 代码在`extern "C" { ... }`块内包含 C 头文件。

任一（C 头文件`cheader.h`）：

```
#ifndef CHEADER_H_INCLUDED
#define CHEADER_H_INCLUDED

#ifdef __cplusplus
extern "C" {
#endif

...main contents of header...

#ifdef __cplusplus
}
#endif

#endif /* CHEADER_H_INCLUDED */ 
```

或（C++ 源代码）：

```
extern "C" {
#include "cheader.h"
} 
```

现代 C 风格非常接近 C 和 C++ 语言的公共子集。但是，由于很多原因，任意 C 代码都不是 C++ 代码，并且仅调用 C 源文件 C++ 源文件（通过更改扩展名，或仅通过使用 C++ 编译器编译）并不能保证成功. 通常，将 C 编译为 C 并将 C++ 编译为 C++，然后将生成的目标文件与 C++ 编译器链接起来（以确保调用正确的支持库）更容易。

但是，如果 MSVC 编译器说使用 MFC 的程序必须仅用 C++ 编写（*MFC 需要 C++ 编译（使用 .cpp 后缀）*是报告的错误），那么您可能别无选择，只能确保您的 C 代码可编译为 C++ 代码。这意味着您必须从`malloc()`et al 转换返回值；您必须担心其他不使用强制转换将 a 转换`void *`为其他指针类型的地方；`sizeof('a') == 4`在 C 和`sizeof('a') == 1`C++中你必须担心；您必须确保在使用每个函数之前都已声明它；您必须确保您的 C 代码不使用任何 C++ 关键字（`typename`特别`class`是 ；`inline`有时也 - 但完整列表非常大）。

在某些圈子中，您不得不担心使用 C99 中不存在于 C++2003 或 C++2011 中的特性，例如灵活的数组成员、指定的初始值设定项、复合文字、可变长度数组等在。但是，如果 C 代码用于 MSVC，那么这可能不会成为问题。MSVC C 编译器不支持这些功能（它只支持 C89，不支持 C99）。

FWIW：我有一个脚本可以搜索 C++ 关键字。它包含以下评论：

```
# http://en.cppreference.com/w/cpp/keywords
# plus JL annotations
# and                               C (<iso646.h>)
# and_eq                            C (<iso646.h>)
# alignas (C++11 feature)
# alignof (C++11 feature)
# asm                               C (core)
# auto(1)                           C (core)
# bitand                            C (<iso646.h>)
# bitor                             C (<iso646.h>)
# bool                              C99 (<stdbool.h>)
# break                             C (core)
# case                              C (core)
# catch
# char                              C (core)
# char16_t (C++11 feature)
# char32_t (C++11 feature)
# class
# compl                             C (<iso646.h>)
# const                             C (core)
# constexpr (C++11 feature)
# const_cast
# continue                          C (core)
# decltype (C++11 feature)
# default(1)                        C (core)
# delete(1)
# double                            C (core)
# dynamic_cast
# else                              C (core)
# enum                              C (core)
# explicit
# export
# extern                            C (core)
# false                             C99 (<stdbool.h>)
# float                             C (core)
# for                               C (core)
# friend
# goto                              C (core)
# if                                C (core)
# inline                            C (core)
# int                               C (core)
# long                              C (core)
# mutable
# namespace
# new
# noexcept (C++11 feature)
# not                               C (<iso646.h>)
# not_eq                            C (<iso646.h>)
# nullptr (C++11 feature)
# operator
# or                                C (<iso646.h>)
# or_eq                             C (<iso646.h>)
# private
# protected
# public
# register                          C (core)
# reinterpret_cast
# return                            C (core)
# short                             C (core)
# signed                            C (core)
# sizeof                            C (core)
# static                            C (core)
# static_assert (C++11 feature)
# static_cast
# struct                            C (core)
# switch                            C (core)
# template
# this
# thread_local (C++11 feature)
# throw
# true                              C99 (<stdbool.h>)
# try
# typedef                           C (core)
# typeid
# typename
# union                             C (core)
# unsigned                          C (core)
# using(1)
# virtual
# void                              C (core)
# volatile                          C (core)
# wchar_t                           C (core)
# while                             C (core)
# xor                               C (<iso646.h>)
# xor_eq                            C (<iso646.h>) 
```

`(1)`后缀是 CPP 参考的脚注：

*   `(1)`— 在 C++11 中的含义发生了变化

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-18T21:26:18.583

**来自 C++ 示例的最小可运行 C**

从 C++ 调用 C 非常简单：每个 C 函数只有一个可能的未损坏符号，因此不需要额外的工作。

主文件

```
#include <cassert>

#include "c.h"

int main() {
    assert(f() == 1);
} 
```

ch

```
#ifndef C_H
#define C_H

/* This ifdef allows the header to be used from both C and C++. */
#ifdef __cplusplus
extern "C" {
#endif
int f();
#ifdef __cplusplus
}
#endif

#endif 
```

抄送

```
#include "c.h"

int f() { return 1; } 
```

跑：

```
g++ -c -o main.o -std=c++98 main.cpp
gcc -c -o c.o -std=c89 c.c
g++ -o main.out main.o c.o
./main.out 
```

我在以下位置`extern "C"`进行了更详细的解释：[extern "C" 在 C++ 中的作用是什么？](https://stackoverflow.com/questions/1041866/what-is-the-effect-of-extern-c-in-c/30526795#30526795)

[GitHub 上的示例](https://github.com/cirosantilli/cpp-cheat/tree/bf5f48628d0b01ba6a3fcea6f1162b28539654c9/c-from-cpp)。

**C 示例中的最小可运行 C++**

从中调用 C++ 有点困难：我们必须手动创建要公开的每个函数的非损坏版本。

在这里，我们说明了如何将 C++ 函数重载暴露给 C。

主程序

```
#include <assert.h>

#include "cpp.h"

int main(void) {
    assert(f_int(1) == 2);
    assert(f_float(1.0) == 3);
    return 0;
} 
```

cpp.h

```
#ifndef CPP_H
#define CPP_H

#ifdef __cplusplus
// C cannot see these overloaded prototypes, or else it would get confused.
int f(int i);
int f(float i);
extern "C" {
#endif
int f_int(int i);
int f_float(float i);
#ifdef __cplusplus
}
#endif

#endif 
```

cpp.cpp

```
#include "cpp.h"

int f(int i) {
    return i + 1;
}

int f(float i) {
    return i + 2;
}

int f_int(int i) {
    return f(i);
}

int f_float(float i) {
    return f(i);
} 
```

跑：

```
gcc -c -o main.o -std=c89 -Wextra main.c
g++ -c -o cpp.o -std=c++98 cpp.cpp
g++ -o main.out main.o cpp.o
./main.out 
```

[GitHub 上的示例](https://github.com/cirosantilli/cpp-cheat/tree/bf5f48628d0b01ba6a3fcea6f1162b28539654c9/cpp-from-c)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T01:16:14.207

C++ 宣扬对 C 源代码的“向后兼容性”，因此可以选择将 C 源代码复制到 .cpp 文件并构建。现在 C++**并不完全**向后兼容，因此您可能需要更改 C 源代码中的一些内容，但通常它应该以最少的错误构建。只需确保包含 .c 使用的 C 库（考虑到您的编译器也支持 C）

```
#include <stdio.h>
#include <string.h>
//so on 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:16:14.137

如果您只是使用源代码而不是一些预编译库，在大多数情况下，您只需将 .c 文件重命名为 .cpp 文件

# php - MAX() MYSQL 调用的问题

> ID：13694606
> 
> 赞同：1
> 
> 时间：2012-12-04T01:13:43.653
> 
> 标签：php, mysql, aggregate-functions, max

在我的 PHO 代码中使用 MAX 聚合函数时遇到问题。我要做的是从我的数据库中选择最高的 user_id。但是，我收到一条错误消息，上面写着“警告：mysql_result() [function.mysql-result]: image_id not found in MySQL result index 3”如果有人能告诉我我的代码做错了什么，将不胜感激！

```
$highest = "Select MAX(image_id) FROM image_table ";
$result2 = mysql_query ($highest);
if (!$result2) die ("Database acces failed: " . mysql_error ());
$rows2 = mysql_num_rows($result2);
for ($j=0; $j<$rows2; $j++)
    {
      echo 'highest image id: ' . mysql_result($result2, $j,'image_id') . '<br/>';
    } 
```

另外，有没有办法设置一个变量直接等于最高 id。例如，我希望变量 $maxID 等于当前最大 id，即 93 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:18:30.957

你有两个选择：

1.  使用别名 -`SELECT MAX(image_id) AS image_id FROM image_table ...`

2.  使用偏移量 -`mysql_result($result2, $j, 0)`

另外，我建议切换到 PDO。这是一个例子：

```
$db = new PDO( ... );
$res = $db->query('SELECT MAX(image_id) FROM image_table');
if (false === ($maxId = current($res->fetchAll(PDO::FETCH_COLUMN, 0)))) {
    // $maxId is definitely a number
} 
```

# wpf - GlyphRun 中的 renderingEmSize 参数指定了什么？

> ID：13694611
> 
> 赞同：1
> 
> 时间：2012-12-04T01:15:23.560
> 
> 标签：wpf, glyphrun

我正在尝试制作一个[GlyphRun](http://msdn.microsoft.com/en-us/library/ms602448.aspx)实例以在[GlyphRunDrawing](http://msdn.microsoft.com/en-us/library/system.windows.media.glyphrundrawing.aspx)中使用，但是文档太糟糕了，以至于几乎可笑。例如，参数`renderingEmSize`描述如下：

```
renderingEmSizeType: System.Double
A value of type Double. 
```

只是……哇。

我知道字体中的“em”是什么（em dash 的宽度），但我不知道网格单位是什么。设备像素？设备独立像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:15:23.560

原来答案在源代码中。感谢 MS 提供此功能，如果他们要让文档流血的话。

有趣的是，我们需要的所有信息都包含在 xml 文档注释中`GlyphRun.cs`。例如`renderingEmSize`，如下：

```
<param name="renderingEmSize">Font rendering size in drawing surface units (96ths of an inch).</param> 
```

文件的其余部分也有类似的评论，包括这个看似不合时宜但扣人心弦的读物：

```
/*
The default branch prediction rules for modern processors specify that forward branches
are not to be taken. If the branch is in fact taken, all of the speculatively executed code
must be discarded, the processor pipeline flushed, and then reloaded. This results in a
processor stall of at least 42 cycles for the P4 Northwood for each mis-predicted branch. 
The deeper the processor pipeline the higher the cost, i.e. Prescott processors.
Checking for multiple incorrect parameters in a method with high call count like this one can 
easily add significant overhead for no reason. Note that the C# compiler should be able to make 
reasonable assumptions about branches that throw exceptions, but the current whidbey
implemenation is weak in this regard. Also the current IBC tools are unable to add branch 
prediction hints to improve behavior based on run time information. Also note that adding
branch prediction hints increases code size by a byte per branch and doing this in every
method that is coded without default branch prediction behavior in mind would add an
unacceptable amount of working set. 
*/ 
```

整个文件可以在这里找到：[GlyphRun.cs at webtropy](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/wpf/src/Core/CSharp/System/Windows/Media/GlyphRun@cs/1407647/GlyphRun@cs)

# javascript - google-visualization API 刷新是否包含字体？

> ID：13694614
> 
> 赞同：0
> 
> 时间：2012-12-04T01:15:45.563
> 
> 标签：javascript, fonts, google-visualization, google-font-api

我一直在做一个使用 google-chart、google-fonts 和 awesome-fonts API 的应用程序。我的主要字体来自 google-fonts，我将它们包含在`<head>`标签中，以及 awesome-fonts。

但是，当我使用 google-charts 时，加载图表后似乎会刷新字体。通过刷新，我的意思是，它们似乎会在一秒钟内消失并重新加载。这使我的应用程序看起来很奇怪。我不喜欢它，我不确定 google-charts 是否会产生这种效果。

这是我加载谷歌图表的代码片段；

```
<script type="text/javascript">    
  google.load("visualization", "1", {packages:["corechart"]});

  function drawChart() {

      var best_letters_data = google.visualization.arrayToDataTable(
          JSON.parse('{{ best_letters|safe }}')
      );

      var worst_letters_data = google.visualization.arrayToDataTable(
          JSON.parse('{{ worst_letters|safe }}')
      );

      var best_letters_options = {
          title: 'Top Rated Hiragana Letters',
          width: 450,
          height: 240,
          isHtml: true,
          hAxis: {title: 'Letters', titleTextStyle: {color: 'red'}}
      };

      var worst_letters_options = {
          title: 'Worst Rated Hiragana Letters',
          width: 450,
          height: 240,
          isHtml: true,
          hAxis: {title: 'Letters', titleTextStyle: {color: 'red'}}
      };

      var best_letters_chart = new google.visualization.ColumnChart(document.getElementById('best_letters_div'));
      best_letters_chart.draw(best_letters_data, best_letters_options);

      var worst_letters_chart = new google.visualization.ColumnChart(document.getElementById('worst_letters_div'));
      worst_letters_chart.draw(worst_letters_data, worst_letters_options);

      $("#loader").hide();

  }
  google.setOnLoadCallback(drawChart);
</script> 
```

如果我评论绘制图表的线条 (`best_letters_chart.draw(best_letters_data, best_letters_options);`和`worst_letters_chart.draw(worst_letters_data, worst_letters_options);`)，我的字体会被渲染一次，但是这次图表不会显示。

为什么会这样？我对此很好奇。如果有人有任何想法，请告诉我。

提前致谢。

# objective-c - Objective-c - 在图像中获得最少使用和最常用的颜色

> ID：13694618
> 
> 赞同：26
> 
> 时间：2012-12-04T01:16:12.567
> 
> 标签：objective-c, ios, itunes, uicolor

我试图从 MP3 文件的专辑插图中为音乐播放应用程序获取最少使用的颜色和最常用的颜色。我需要颜色来做新的 iTunes 11 那样的效果。菜单的背景颜色是最常用的颜色，而最少使用的颜色是歌曲标签和艺术家姓名的颜色。我在用

```
`- (UIColor*) getPixelColorAtLocation:(CGPoint)point {
    UIColor* color = nil;
    CGImageRef inImage = self.image.CGImage;
    // Create off screen bitmap context to draw the image into. Format ARGB is 4 bytes for each pixel: Alpa, Red, Green, Blue
    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
    if (cgctx == NULL) { return nil; /* error */ }

    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}}; 

    // Draw the image to the bitmap context. Once we draw, the memory
    // allocated for the context for rendering will then contain the
    // raw image data in the specified color space.
    CGContextDrawImage(cgctx, rect, inImage); 

    // Now we can get a pointer to the image data associated with the bitmap
    // context.
    unsigned char* data = CGBitmapContextGetData (cgctx);
    if (data != NULL) {
        //offset locates the pixel in the data from x,y.
        //4 for 4 bytes of data per pixel, w is width of one row of data.
        int offset = 4*((w*round(point.y))+round(point.x));
        int alpha =  data[offset];
        int red = data[offset+1];
        int green = data[offset+2];
        int blue = data[offset+3];
        NSLog(@"offset: %i colors: RGB A %i %i %i  %i",offset,red,green,blue,alpha);
        color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:(blue/255.0f) alpha:(alpha/255.0f)];
    }

    // When finished, release the context
    CGContextRelease(cgctx);
    // Free image data memory for the context
    if (data) { free(data); }

    return color;
}

- (CGContextRef) createARGBBitmapContextFromImage:(CGImageRef) inImage {

    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    // Get image width, height. We'll use the entire image.
    size_t pixelsWide = CGImageGetWidth(inImage);
    size_t pixelsHigh = CGImageGetHeight(inImage);

    // Declare the number of bytes per row. Each pixel in the bitmap in this
    // example is represented by 4 bytes; 8 bits each of red, green, blue, and
    // alpha.
    bitmapBytesPerRow   = (pixelsWide * 4);
    bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

    // Use the generic RGB color space.
    colorSpace = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
    if (colorSpace == NULL)
    {
        fprintf(stderr, "Error allocating color space\n");
        return NULL;
    }

    // Allocate memory for image data. This is the destination in memory
    // where any drawing to the bitmap context will be rendered.
    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL)
    {
        fprintf (stderr, "Memory not allocated!");
        CGColorSpaceRelease( colorSpace );
        return NULL;
    }

    // Create the bitmap context. We want pre-multiplied ARGB, 8-bits
    // per component. Regardless of what the source image format is
    // (CMYK, Grayscale, and so on) it will be converted over to the format
    // specified here by CGBitmapContextCreate.
    context = CGBitmapContextCreate (bitmapData,
                                     pixelsWide,
                                     pixelsHigh,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedFirst);
    if (context == NULL)
    {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
    }

    // Make sure and release colorspace before returning
    CGColorSpaceRelease( colorSpace );

    return context;
}` 
```

获取图像底部的颜色以使其混合到我的视图控制器中，该控制器使用该颜色作为其背景，并有一个阴影使其混合。

**问题：**所以，正如它所说：我如何从图像中获得最少和最多使用的颜色？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-03-25T21:34:57.667

以下方法通过以下步骤获取图像并分析其主要颜色：

1.) 缩小图像并确定主要像素颜色。

2.）添加一些颜色灵活性以允许缩放期间的损失

3.）区分颜色，去除相似的颜色

4.) 将颜色作为有序数组或百分比返回

您可以调整它以返回特定数量的颜色，例如，如果您需要保证返回的颜色数量，则图像中的前 10 种颜色，或者如果您不需要，则只使用“详细信息”变量。

较大的图像需要很长时间才能进行高细节分析。

毫无疑问，该方法可以稍微清理一下，但可能是一个很好的起点。

像这样使用：

```
 NSDictionary * mainColours = [s mainColoursInImage:image detail:1]; 
```

![示例图像详细贯穿该方法](../Images/efd2b43934cf89507fd3c2c90c035163.png)

```
-(NSDictionary*)mainColoursInImage:(UIImage *)image detail:(int)detail {

//1\. determine detail vars (0==low,1==default,2==high)
//default detail
float dimension = 10;
float flexibility = 2;
float range = 60;

//low detail
if (detail==0){
    dimension = 4;
    flexibility = 1;
    range = 100;

//high detail (patience!)
} else if (detail==2){
    dimension = 100;
    flexibility = 10;
    range = 20;
}

//2\. determine the colours in the image
NSMutableArray * colours = [NSMutableArray new];
CGImageRef imageRef = [image CGImage];
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData = (unsigned char*) calloc(dimension * dimension * 4, sizeof(unsigned char));
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * dimension;
NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, dimension, dimension, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);
CGContextDrawImage(context, CGRectMake(0, 0, dimension, dimension), imageRef);
CGContextRelease(context);

float x = 0;
float y = 0;
for (int n = 0; n<(dimension*dimension); n++){

    int index = (bytesPerRow * y) + x * bytesPerPixel;
    int red   = rawData[index];
    int green = rawData[index + 1];
    int blue  = rawData[index + 2];
    int alpha = rawData[index + 3];
    NSArray * a = [NSArray arrayWithObjects:[NSString stringWithFormat:@"%i",red],[NSString stringWithFormat:@"%i",green],[NSString stringWithFormat:@"%i",blue],[NSString stringWithFormat:@"%i",alpha], nil];
    [colours addObject:a];

    y++;
    if (y==dimension){
        y=0;
        x++;
    }
}
free(rawData);

//3\. add some colour flexibility (adds more colours either side of the colours in the image)
NSArray * copyColours = [NSArray arrayWithArray:colours];
NSMutableArray * flexibleColours = [NSMutableArray new];

float flexFactor = flexibility * 2 + 1;
float factor = flexFactor * flexFactor * 3; //(r,g,b) == *3
for (int n = 0; n<(dimension * dimension); n++){

    NSArray * pixelColours = copyColours[n];
    NSMutableArray * reds = [NSMutableArray new];
    NSMutableArray * greens = [NSMutableArray new];
    NSMutableArray * blues = [NSMutableArray new];

    for (int p = 0; p<3; p++){

        NSString * rgbStr = pixelColours[p];
        int rgb = [rgbStr intValue];

        for (int f = -flexibility; f<flexibility+1; f++){
            int newRGB = rgb+f;
            if (newRGB<0){
                newRGB = 0;
            }
            if (p==0){
                [reds addObject:[NSString stringWithFormat:@"%i",newRGB]];
            } else if (p==1){
                [greens addObject:[NSString stringWithFormat:@"%i",newRGB]];
            } else if (p==2){
                [blues addObject:[NSString stringWithFormat:@"%i",newRGB]];
            }
        }
    }

    int r = 0;
    int g = 0;
    int b = 0;
    for (int k = 0; k<factor; k++){

        int red = [reds[r] intValue];
        int green = [greens[g] intValue];
        int blue = [blues[b] intValue];

        NSString * rgbString = [NSString stringWithFormat:@"%i,%i,%i",red,green,blue];
        [flexibleColours addObject:rgbString];

        b++;
        if (b==flexFactor){ b=0; g++; }
        if (g==flexFactor){ g=0; r++; }
    }
}

//4\. distinguish the colours
//orders the flexible colours by their occurrence
//then keeps them if they are sufficiently disimilar

NSMutableDictionary * colourCounter = [NSMutableDictionary new];

//count the occurences in the array
NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray:flexibleColours];
for (NSString *item in countedSet) {
    NSUInteger count = [countedSet countForObject:item];
    [colourCounter setValue:[NSNumber numberWithInteger:count] forKey:item];
}

//sort keys highest occurrence to lowest
NSArray *orderedKeys = [colourCounter keysSortedByValueUsingComparator:^NSComparisonResult(id obj1, id obj2){
    return [obj2 compare:obj1];
}];

//checks if the colour is similar to another one already included
NSMutableArray * ranges = [NSMutableArray new];
for (NSString * key in orderedKeys){
    NSArray * rgb = [key componentsSeparatedByString:@","];
    int r = [rgb[0] intValue];
    int g = [rgb[1] intValue];
    int b = [rgb[2] intValue];
    bool exclude = false;
    for (NSString * ranged_key in ranges){
        NSArray * ranged_rgb = [ranged_key componentsSeparatedByString:@","];

        int ranged_r = [ranged_rgb[0] intValue];
        int ranged_g = [ranged_rgb[1] intValue];
        int ranged_b = [ranged_rgb[2] intValue];

        if (r>= ranged_r-range && r<= ranged_r+range){
            if (g>= ranged_g-range && g<= ranged_g+range){
                if (b>= ranged_b-range && b<= ranged_b+range){
                    exclude = true;
                }
            }
        }
    }

    if (!exclude){ [ranges addObject:key]; }
}

//return ranges array here if you just want the ordered colours high to low
NSMutableArray * colourArray = [NSMutableArray new];
for (NSString * key in ranges){
    NSArray * rgb = [key componentsSeparatedByString:@","];
    float r = [rgb[0] floatValue];
    float g = [rgb[1] floatValue];
    float b = [rgb[2] floatValue];
    UIColor * colour = [UIColor colorWithRed:(r/255.0f) green:(g/255.0f) blue:(b/255.0f) alpha:1.0f];
    [colourArray addObject:colour];
}

//if you just want an array of images of most common to least, return here
//return [NSDictionary dictionaryWithObject:colourArray forKey:@"colours"];

//if you want percentages to colours continue below
NSMutableDictionary * temp = [NSMutableDictionary new];
float totalCount = 0.0f;
for (NSString * rangeKey in ranges){
    NSNumber * count = colourCounter[rangeKey];
    totalCount += [count intValue];
    temp[rangeKey]=count;
}

//set percentages
NSMutableDictionary * colourDictionary = [NSMutableDictionary new];
for (NSString * key in temp){
    float count = [temp[key] floatValue];
    float percentage = count/totalCount;
    NSArray * rgb = [key componentsSeparatedByString:@","];
    float r = [rgb[0] floatValue];
    float g = [rgb[1] floatValue];
    float b = [rgb[2] floatValue];
    UIColor * colour = [UIColor colorWithRed:(r/255.0f) green:(g/255.0f) blue:(b/255.0f) alpha:1.0f];
    colourDictionary[colour]=[NSNumber numberWithFloat:percentage];
}

return colourDictionary;

} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-04T03:25:12.983

不确定找到最多颜色或最少颜色，但[这里有一种](http://www.bobbygeorgescu.com/2011/08/finding-average-color-of-uiimage/)找出平均颜色的方法。

```
- (UIColor *)averageColor {

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char rgba[4];
    CGContextRef context = CGBitmapContextCreate(rgba, 1, 1, 8, 4, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGContextDrawImage(context, CGRectMake(0, 0, 1, 1), self.CGImage);
    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);  

    if(rgba[3] > 0) {
        CGFloat alpha = ((CGFloat)rgba[3])/255.0;
        CGFloat multiplier = alpha/255.0;
        return [UIColor colorWithRed:((CGFloat)rgba[0])*multiplier
                               green:((CGFloat)rgba[1])*multiplier
                                blue:((CGFloat)rgba[2])*multiplier
                               alpha:alpha];
    }
    else {
        return [UIColor colorWithRed:((CGFloat)rgba[0])/255.0
                               green:((CGFloat)rgba[1])/255.0
                                blue:((CGFloat)rgba[2])/255.0
                               alpha:((CGFloat)rgba[3])/255.0];
    }
} 
```

您可能可以按照类似的方法找出最常用的颜色。

还要检查这个关于计算图像中红色像素的[答案。](https://stackoverflow.com/a/2344419/1730272)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-20T19:18:07.340

非常感谢您的代码@JohnnyRockex。这对我开始实现我的目标非常有帮助（根据图像中最主要的颜色找到强调色）。

看完后，发现代码可以简化，更容易阅读，所以我想回馈社区我自己的版本；选择`-colors`器在`UIImage`扩展中。

```
- (NSArray *)colors {
// Original code by Johnny Rockex http://stackoverflow.com/a/29266983/825644

// Higher the dimension, the more pixels are checked against.
const float pixelDimension = 10;
// Higher the range, more similar colors are removed.
const float filterRange = 60;

unsigned char *rawData = (unsigned char*) calloc(pixelDimension * pixelDimension * kBytesPerPixel, sizeof(unsigned char));

NSUInteger bytesPerRow = kBytesPerPixel * pixelDimension;
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(rawData, pixelDimension, pixelDimension, kBitsInAByte, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);
CGContextDrawImage(context, CGRectMake(0, 0, pixelDimension, pixelDimension), [self CGImage]);
CGContextRelease(context);

NSMutableArray * colors = [[NSMutableArray alloc] init];
float x = 0;
float y = 0;
const int pixelMatrixSize = pixelDimension * pixelDimension;
for (int i = 0; i < pixelMatrixSize; i++){
    int index = (bytesPerRow * y) + x * kBytesPerPixel;

    int red   = rawData[index];
    int green = rawData[index + 1];
    int blue  = rawData[index + 2];
    int alpha = rawData[index + 3];
    UIColor * color = [UIColor colorWithRed:(red / 255.0f) green:(green / 255.0f) blue:(blue / 255.0f) alpha:alpha];
    [colors addObject:color];

    y++;
    if (y == pixelDimension){
        y = 0;
        x++;
    }
}
free(rawData);

NSMutableDictionary * colorCounter = [[NSMutableDictionary alloc] init];
NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray:colors];
for (NSString *item in countedSet) {
    NSUInteger count = [countedSet countForObject:item];
    [colorCounter setValue:[NSNumber numberWithInteger:count] forKey:item];
}

NSArray *orderedColors = [colorCounter keysSortedByValueUsingComparator:^NSComparisonResult(id obj1, id obj2){
    return [obj2 compare:obj1];
}];

NSMutableArray *filteredColors = [NSMutableArray new];
for (UIColor *color in orderedColors){

    bool filtered = false;
    for (UIColor *rangedColor in filteredColors){
        if (abs(color.redRGBComponent - rangedColor.redRGBComponent) <= filterRange &&
            abs(color.greenRGBComponent - rangedColor.greenRGBComponent) <= filterRange &&
            abs(color.blueRGBComponent - rangedColor.blueRGBComponent) <= filterRange) {

            filtered = true;
            break;
        }
    }

    if (!filtered) {
        [filteredColors addObject:color];
    }
}

return [filteredColors copy]; 
```

可以在下面找到`UIColor`添加函数的扩展代码，但我是用 Swift 编写的（尝试用 Swift 编写所有新类，但选择器不是这种情况）：`-rgbComponent``-colors`

```
extension UIColor {

    open func redRGBComponent() -> UInt8 {
        let colorComponents = cgColor.components!
        return UInt8(colorComponents[0] * 255)
    }

    open func greenRGBComponent() -> UInt8 {
        let colorComponents = cgColor.components!
        return UInt8(colorComponents[1] * 255)
    }

    open func blueRGBComponent() -> UInt8 {
        let colorComponents = cgColor.components!
         return UInt8(colorComponents[2] * 255)
    }

} 
```

享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-11T03:31:08.783

我写了这个工具来做到这一点。

[https://github.com/623637646/UIImageColorRatio](https://github.com/623637646/UIImageColorRatio)

![ezgif com-gif-maker](../Images/35989c19bf7dcaf4dd20cc4e7b7bbe1d.png)

```
// replace the UIImage() to yourself's UIImage.
let theMostUsedColor = UIImage().calculateColorRatio(deviation: 0)?.colorRatioArray.first?.color
let theLeastUsedColor = UIImage().calculateColorRatio(deviation: 0)?.colorRatioArray.last?.color 
```

# join - 在 cakephp 2.x 中实现消息系统

> ID：13694623
> 
> 赞同：0
> 
> 时间：2012-12-04T01:16:28.947
> 
> 标签：join, message, foreign-key-relationship, cakephp-2.1

我正在尝试在我的`cakephp`框架中实现一个消息系统（用户到用户）。因此我创建了以下表格：

## 留言

1.  ID
2.  标题
3.  身体
4.  发件人ID
5.  创建
6.  response_on

## Messages_Users

1.  ID
2.  message_id
3.  收件人 ID

Messages_Users 表用于存储每条已发送消息的收件人。然后像这样创建相应的模型并建立模型之间的关系。

## 消息模型

```
<?php class Message extends Model{
public $hasMany = array(
        'MessageUser'=>array(
                'className'=>'MessagesUser',
                'foreign Key'=>'message_id')
        );
public $belongsTo = array (
        'User' =>array(
                'className'=>'User',
                'foreignKey'=>'sender_id')
        );
public $hasAndBelongsTo = array(
        'Message'=>array(
                'className'=>'Message',
                'foreignKey'=>'response_on')
        ); 
```

}

## MessageUser 模型

```
 <?php
     class MessageUser extends Model{
    public $belongsTo = array (
        'User'=>array(
            'className'=>'User',
            'foreignKey'=>'user_id'),
        array(
        'Message'=>array(
            'className'=>'Message',
            'foreignKey'=>'message_id')
                )
        ); 
```

## 用户模型

```
class User extends AppModel{
public $hasAndBelongsTo = array(
        'Message'=>array(
                'joinTable' =>'messages_users',
                'className' =>'Message',
                'foreignKey' =>'recipient_id',
                'associationForeignKey' =>'message_id')
        ); 
```

现在我想在我的 MessagesController 中实现一个函数 inbox()，它显示存储在数据库中的所有消息，这些消息被发送给相应的用户。所以我的方法是将函数放入 MessagesController

```
public function inbox(){
    $uid = $this->Auth->user('id');
    $messages = $this->Message->find('all', array(
            'conditions' => array(
                    'recipient_id' => $uid)
            )
            ); 
```

上面的函数应该通过 message_id 对表messages 和messages_users 执行连接，并选择表messages_users 的user_id 等于receiver_id 的数据集。

但我得到的只是一个错误，说`recipient_id`在 where 子句中找不到该列。

如何指示 find 方法正确连接这些表？我认为连接模型就足够了，所以蛋糕魔法会处理剩下的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:16:07.883

快速的回答是你的联想是错误的。长篇如下：

首先没有关联叫`hasAndBelongsTo`。协会名称为`hasAndBelongsToMany`。此外，你放在一起的联想`Message Model`是完全错误的，或者如果我可以这样说 - 你可能没有正确理解它们。因此，快速解决方法是删除`hasMany`to `MessageUser`、 the`belongsTo` `User`和错误`hasAndBelongsTo` `Message`并添加`hasAndBelongsToMany`与 User 的关联。

如果您想`Message hasAndBelongsToMany User`使用它。如何[在这里描述](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)。此外，HABTM 已经在这里讨论过很多次，所以我不打算详细介绍它。

However I would like to point you to another possible set up. Now I am proposing this because I saw you tried to also use `hasMany` so there is the possibility to use the so-called `hasManyThrough the Join Model`, but usually that is to be used when you want to store additional data in the join model (MessageUser in your case). Check [this question out](https://stackoverflow.com/questions/12224596/self-habtm-or-hasmany-through-concept-confusion).

# javascript - 使用 crypto.generateValues() 生成 0 到 1 的随机数

> ID：13694626
> 
> 赞同：6
> 
> 时间：2012-12-04T01:16:47.923
> 
> 标签：javascript, random

看起来 Math.random() 在 [0,1) 范围内生成一个 64 位浮点数，而新的 crypto.getRandomValues() API 只返回整数。使用此 API 在 [0,1) 中生成数字的理想方法是什么？

这似乎可行，但似乎不是最理想的：

```
ints = new Uint32Array(2)
window.crypto.getRandomValues(ints)
return ints[0] / 0xffffffff * ints[1] / 0xffffffff 
```

编辑：为了澄清，我试图产生比 Math.random()*更好的结果。*根据我对浮点的理解，应该可以获得 52 位随机性的完全随机分数。（？）

编辑 2：为了提供更多背景知识，我并没有尝试做任何加密安全的事情，但是有很多关于 Math.random() 实施不佳的轶事故事（例如[http://devoluk.com/google-chrome -math-random-issue.html](http://devoluk.com/google-chrome-math-random-issue.html)）所以如果有更好的选择，我想使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T01:42:53.267

请记住，浮点数只是*尾数*系数，乘以 2 得到*指数*：

```
floating_point_value = mantissa * (2 ^ exponent) 
```

使用`Math.random`，您生成具有 32 位随机尾数且指数*始终*`-32`为 的浮点数，因此小数位向左移动 32 位，因此尾数永远不会在小数位左侧有任何部分。

```
mantissa =         10011000111100111111101000110001 (some random 32-bit int)
mantissa * 2^-32 = 0.10011000111100111111101000110001 
```

尝试运行`Math.random().toString(2)`几次以验证是否是这种情况。

**解决方案：**您可以生成一个随机的 32 位尾数并将其乘以`Math.pow(2,-32)`：

```
var arr = new Uint32Array(1);
crypto.getRandomValues(arr);
var result = arr[0] * Math.pow(2,-32);
// or just   arr[0] * (0xffffffff + 1); 
```

**请注意**，浮点不具有均匀分布（由于尾数缺乏精度，数字越大，可能的值变得越稀疏），这使得它们不适合加密应用程序或其他需要非常强的随机数的领域. 为此，您应该使用由 提供给您的原始整数值`crypto.getRandomValues()`。

**编辑：**

JavaScript 中的尾数是 52 位，所以你可以得到 52 位的随机性：

```
var arr = new Uint32Array(2);
crypto.getRandomValues(arr);

// keep all 32 bits of the the first, top 20 of the second for 52 random bits
var mantissa = (arr[0] * Math.pow(2,20)) + (arr[1] >>> 12)

// shift all 52 bits to the right of the decimal point
var result = mantissa * Math.pow(2,-52); 
```

所以，总而言之，不，这并不比你自己的解决方案短，但我认为这是你能做到的最好的。您必须生成 52 个随机位，这些位需要从 32 位块构建，然后需要向下移回 1 以下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:23:07.970

好吧，如果您确实需要 [0,1) 范围内的数字，这应该是最佳选择。

该代码的问题在于不同数字的几率不再相同。

例如，使用该代码更有可能获得 0.5 (1*0.5,0.5*1,0.75*0.666) 而不是 1 (1*1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T12:37:29.480

这个副本中的[比特旋转版本](https://stackoverflow.com/questions/34575635/cryptographically-secure-float)也很好，因为[规范说数字是 IEEE 754](https://www.ecma-international.org/ecma-262/5.1/#sec-4.3.19)。此外，请考虑字节序的 DataView 注释。

# java - 使泛型类的内部类扩展 Throwable

> ID：13694637
> 
> 赞同：10
> 
> 时间：2012-12-04T01:18:25.880
> 
> 标签：java, generics, inheritance

> **可能重复：**
> [为什么 Java 不允许 Throwable 的泛型子类？](https://stackoverflow.com/questions/501277/why-doesnt-java-allow-generic-subclasses-of-throwable)

我正在尝试在这样的泛型类中创建一个常规的 RuntimeException：

```
public class SomeGenericClass<SomeType> {

    public class SomeInternalException extends RuntimeException {
        [...]
    }

    [...]
} 
```

这段代码在`RuntimeException`说这个词时给了我一个错误`The generic class SomeGenericClass<SomeType>.SomeInternalException may not subclass java.lang.Throwable`。

这个 RuntimeException 与我的类是通用的有什么关系？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T01:22:43.430

[Java 不允许 Throwable 的泛型子类](https://stackoverflow.com/q/501277/130224)。而且，非静态内部类通过其外部类的类型参数有效地参数化（参见[Oracle JDK 错误 5086027](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5086027)）。例如，在您的示例中，您的内部类的实例具有 form 类型`SomeGenericClass<T>.SomeInternalException`。因此，Java 不允许泛型类的静态内部类扩展`Throwable`.

一种解决方法是制作`SomeInternalException`一个静态内部类。这是因为如果内部类是`static`它的类型将不是通用的，即`SomeGenericClass.SomeInternalException`.

```
public class SomeGenericClass<SomeType> {

    public static class SomeInternalException extends RuntimeException {
        [...]
    }

    [...]
} 
```

# php - PHP 通过 AJAX/HTML 5 重命名文件上传图片

> ID：13694645
> 
> 赞同：0
> 
> 时间：2012-12-04T01:19:31.500
> 
> 标签：php, ajax, file-upload

我不擅长阅读通过 php/ajax 上传图像的代码，所以我希望 php 大师可以帮助我。我正在尝试获取图像文件名，如果其中有空格，则用下划线**“_”替换这些空格**

上传的php代码是这样的：

```
$file_name  = ( isset($_REQUEST['ax-file-name']) && !empty($_REQUEST['ax-file-name']) )?$_REQUEST['ax-file-name']:'';
$currByte   = isset($_REQUEST['ax-start-byte'])?$_REQUEST['ax-start-byte']:0;

if($is_ajax)//Ajax Upload, FormData Upload and FF3.6 php:/input upload
{   
    //we get the path only for the first chunk
    $full_path  = ($currByte==0) ? checkFileExits($file_name, $upload_path):$upload_path.$file_name;

    //Just optional, avoid to write on exisiting file, but in theory filename should be unique from the checkFileExits function
    $flag       = ($currByte==0) ? 0:FILE_APPEND;

    //formData post files just normal upload in $_FILES, older ajax upload post it in input
    $post_bytes = isset($_FILES['Filedata'])? file_get_contents($_FILES['Filedata']['tmp_name']):file_get_contents('php://input');

    //some rare times (on very very fast connection), file_put_contents will be unable to write on the file, so we try until it writes
    while(@file_put_contents($full_path, $post_bytes, $flag) === false)
    {
        usleep(50);
    }

    //delete the temporany chunk
    if(isset($_FILES['Filedata']))
    {
        @unlink($_FILES['Filedata']['tmp_name']);
    }

    //if it is not the last chunk just return success chunk upload
    if($isLast!='true')
    {
        echo json_encode(array('name'=>basename($full_path), 'size'=>$full_size, 'status'=>1, 'info'=>'Chunk uploaded'));
    }
}
else //Normal html and flash upload
{
    $isLast     = 'true';//we cannot upload by chunks here so assume it is the last single chunk
    $full_path  = checkFileExits($file_name, $upload_path);
    $result     = move_uploaded_file(str_replace(" ", "_",$_FILES['Filedata']['tmp_name']), $full_path);//make the upload
    if(!$result) //if any error return the error
    {
        echo json_encode( array('name'=>basename($full_path), 'size'=>$full_size, 'status'=>-1, 'info'=>'File move error') );
        return  false;
    }
} 
```

我已经尝试过以下方法（使用**str_replace(" ", "_", $nameofile)**：

```
$post_bytes = isset($_FILES['Filedata'])? file_get_contents(str_replace(" ", "_",$_FILES['Filedata']['tmp_name'])):file_get_contents('php://input'); 
```

这似乎对重命名它没有任何作用。那么我在哪里想念它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:05:39.503

您的代码中的问题是，您试图重命名图像文件的临时名称而不是实际名称

```
move_uploaded_file(str_replace(" ", "_",$_FILES['Filedata']['tmp_name']), $full_path);//make the upload 
```

因此，您必须`str_replace`从临时名称中删除并将其附加到这样的实际名称中。

```
move_uploaded_file($_FILES['Filedata']['tmp_name'], str_replace(" ", "_",$full_path));//make the upload 
```

希望它能澄清你的疑问。

# php - PHP 标头不会使用 AJAX 重定向

> ID：13694649
> 
> 赞同：2
> 
> 时间：2012-12-04T01:20:10.323
> 
> 标签：php, javascript, ajax, rest, header

对于一个项目，我们必须创建一个基本的登录系统。我试图使用 REST 来管理我的整个页面。现在我相信我在这里遗漏或误解了一些关键概念，但多年来我一直试图弄清楚如何做到这一点。不允许在这个练习中使用库，所以我不能使用 JQuery。

所以这是我的问题：我有一个 .js 文件，用于检查用户名长度和密码长度等......在这个 .js 文件中，我还有一个 ajax 函数，可以将用户名和电子邮件发送到 PHP 以验证没有已经是使用 SQL 使用该电子邮件或用户名的现有用户。

```
function checkUser()
        {
            var ajax = new Ajax(); // instantiates my external ajax class
            var email = document.getElementById("newEmail").value;
            var username = document.getElementById("newUserName").value
            ajax.post("index.php?method=register&check=check", "newEmail=" + email + "&newUserName=" + username, callbackCatch)

        }
    function callbackCatch(param)   
        {
            var responseMessages = JSON.parse(param.responseText);

            emailMessage = responseMessages.emailMessage;
            userNameMessage = responseMessages.userNameMessage;
            userEmailIsOk = responseMessages.userEmailIsOk;
            userNameIsOk = responseMessages.userNameIsOk;
            release = true;
            if((userEmailIsOk + userNameIsOk) != 2)
                {
                    console.log(userEmailIsOk + userNameIsOk);
                    release = false;
                }

            updateMessageFields();
        } 
```

我得到一个 JSON 字符串，我对其进行解析，然后与我的表单值进行比较。当一切都找到并且花花公子时，我单击表单页面上的注册按钮，该按钮将所有字段发布回我的 php 文件。但是，似乎当我这样做时，每次都会以某种方式访问​​我的外部 ajax 类，并且我收到一个错误：NS_NOINTERFACE：组件没有请求的接口。

我假设因为每当我发帖时 AJAX 都会在后台运行，即使从我的表单中它也会尝试发回我的参数，在这种情况下是不兼容的。

我不知道如何解决这个问题。假设处理传输的我的 PHP 文件如下所示：

```
require_once("../database/table.php"); 
```

类测试{

```
private $SQLtable;

private $newEmail;
private $newPswrd;
private $newUserName;
private $newFullName;

public function test()
    {
        $this->SQLtable = new table();
        $this->initClassVars();
        $this->generateUserName();
        $this->regUser();

    }
function initClassVars()
    {
        if(isset($_POST["newPassword"]))
            {
                $this->newPswrd = $_POST["newPassword"];
            }
        if(isset($_POST['newUserName']))
            {
                $this->newUserName = $_POST['newUserName'];
            }
        if(isset($_POST["newEmail"]))
            {
                $this->newEmail = $_POST["newEmail"];
            }
        if(isset($_POST["newFullName"]))
            {
                $this->newFullName = $_POST["newFullName"];
            }
    }
function generateUserName()
    {
        if(isset($_POST["newFullName"]))
        {
            $suggestedUserName = str_replace(" ", "", $this->newFullName);
            $this->newUserName = $suggestedUserName;
        }
    }

function regUser()
    {       

                $this->SQLtable->registerUser($this->newEmail, $this->newPswrd, $this->newFullName, $this->newUserName);
                $sessionKey = $this->genKey();
                $this->SQLtable->authUser($this->newEmail, $this->newPswrd, $sessionKey);
                header("location:Location:index.php?method=feed&key=$sessionKey&user=$this->newEmail");
                exit;
    }

function genKey($length = 16)
    {
        $options = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"; //Range
        $key = ""; //Empty holder for key
        for($i = 0; $i < $length; $i++)
            {
                $code = rand(0, strlen($options) - 1); 
                $key .= $options[$code];  // Loops through as long as the $length is set and adds a random string char from $options to build a new key.
            }
        return $key;
    } 
```

}

正如您所看到的，我正在玩弄使用 API 密钥来控制身份验证。我还没有让 cookie 使用它，但是在我弄清楚如何对这个注册事物进行排序之后，我就这样做了。

对不起，如果我不清楚。这是我关于 stackoverflow 的第一个问题，基本上直到大约 8 个月前我才写过一行代码，所以请耐心等待我的新代码：D。谢谢..

好的，这里是 HTML 和调用函数的位置：这是我的表单 html 文件。当我反复使用它们时，文档类型和标题是分开添加的。

```
<body>

<h1> Thanks! <!-- $user -->, you're almost there.  We just need a few more details      </h1>

<form id="registerUser" name="registerUser" action="index.php?method=test" method="post">
<p>
<label for="newFullName">Full Name: </label>
<input type="text" id="newFullName" name="newFullName" value="$newFullName" />
<span id="nameMessage"></span>
</p>
<p>
<label for="newUserName">User Name: </label>
<input type = "text" id="newUserName" name="NewUserName" value="$newUserName" />
<span id="nicknameMessage"><!-- $newUserNameMessage --></span>
</p>
<p>
<label for="newEmail">Email: </label>
<input type="text" id="newEmail" name="newEmail" value="$newEmail" />
<span id = "newEmailMessage"><!-- $newEmailMessage --></span>
</p>
<p>
<label for ="newPassword">Password: </label>
<input type="password" id="newPassword" name="newPassword" value="$newPswrd" />
<span id = "newPasswordMessage"></span>
</p>
<input type="submit" id="register" disabled="disabled" value="Register" onclick=""/>
</form>

<p><a href="../../../Index.html"> Click here to go back to the login site and login.   </a></p>

<script type="text/javascript" language="javascript" src="../../js/net/ajaxHandler.js">    </script>
<script type="text/javascript" language="javascript">var bootstrap = new ajaxHandler();     bootstrap.init(); </script>
</body>
</html> 
```

整个 JS 文件是这样的。它有点乱，但这是因为我一直在玩弄它：

```
var ajaxHandler = function()
{
    var self = this;
    var release = true;
    var nameField;
    var userField;
    var emailField;
    var passWordField
    var emailMessage;
    var userNameMessage;

    self.init = function()
        {
            addEventListeners();
            checkFormForErrors();
        }

    self.redirect = function ()
        {
        }
    function addEventListeners()
        {
            nameField       = document.getElementById("newFullName");
            userField       = document.getElementById("newUserName");
            emailField      = document.getElementById("newEmail");
            passWordField   = document.getElementById("newPassword");

            Event.addEventListener(nameField, 'click', checkFormForErrors);
            Event.addEventListener(userField, 'click', checkUser);
            Event.addEventListener(emailField, 'click', checkUser);
            Event.addEventListener(passWordField, 'click', checkFormForErrors);

            Event.addEventListener(nameField, 'keyup', checkFormForErrors);
            Event.addEventListener(userField, 'keyup', checkUser);
            Event.addEventListener(emailField, 'keyup', checkUser);
            Event.addEventListener(passWordField, 'keyup', checkFormForErrors);
        }

    function checkPassword()
        {
        var passWordIsOk;
        var patt        = /\s/;
        var whiteSpace  = patt.test(passWordField);
        var passwordLength = passWordField.value.length;
        if (passwordLength < 8 )
            {
                document.getElementById("newPasswordMessage").innerHTML = "Your passowrd must be at least 8 charachters long. ";
                passWordIsOk = false
                if (whiteSpace)
                    {
                        document.getElementById("newPasswordMessage").innerHTML += "Your Password cannot contain any spaces.";
                        passWordIsOk = false
                    }
            } 
        else
            {
                document.getElementById("newPasswordMessage").innerHTML = "Password looks good";
                passWordIsOk = true
            }
        return passWordIsOk;
        }

    function checkName()    
        {
            var userNameIsOk;
            var nameMessage = document.getElementById("nameMessage");
            if (!nameField.value)
                {
                    nameMessage.innerHTML = "You need to enter a name."
                    userNameIsOk = false;

                }
            else
                {
                    nameMessage.innerHTML = "Name looks great."
                    userNameIsOk = true;
                }
            return userNameIsOk;
        }

    function checkEmailSyntax()
        {
            var EmailIsOk = true
            var patt    = /^([\w!.%+\-])+@([\w\-])+(?:\.[\w\-]+)+$/ ;
            var format  = patt.test(emailField.value);
            if (!format)
                {
                    document.getElementById("newEmailMessage").innerHTML = "Your email does not appear to be in the right format."
                    EmailIsOk = false;
                }
            return EmailIsOk        
        }

    function checkFullNameSyntax()
        {
            var nameIsOk = true
            if (document.getElementById("newUserName").value == "")
                {
                    document.getElementById("nicknameMessage").innerHTML = "You must enter a username.  You can always change it later."
                    nameIsOk = false
                }
            return nameIsOk;
        }

    function checkUser()
        {
            var ajax = new Ajax();
            var email = document.getElementById("newEmail").value;
            var username = document.getElementById("newUserName").value
            ajax.post("index.php?method=register&check=check", "newEmail=" + email + "&newUserName=" + username, callbackCatch)

        }
    function callbackCatch(param)   
        {
            var responseMessages = JSON.parse(param.responseText);

            emailMessage = responseMessages.emailMessage;
            userNameMessage = responseMessages.userNameMessage;
            userEmailIsOk = responseMessages.userEmailIsOk;
            userNameIsOk = responseMessages.userNameIsOk;
            release = true;
            if((userEmailIsOk + userNameIsOk) != 2)
                {
                    console.log(userEmailIsOk + userNameIsOk);
                    release = false;
                }

            updateMessageFields();
            var ajax = "";
        }
    function updateMessageFields()
        {
            document.getElementById("nicknameMessage").innerHTML = userNameMessage;
            document.getElementById("newEmailMessage").innerHTML = emailMessage;
            checkFormForErrors();

        }
    function checkFormForErrors()
        {
            console.log('hi');
            var nameOk = checkFullNameSyntax()
            console.log(nameOk);
            var passOk = checkPassword()
            console.log(passOk);
            var userOk = checkName()
            console.log(userOk);    
            var emailOk = checkEmailSyntax()
            console.log(emailOk);
            console.log(release);
            document.getElementById("register").disabled = true;
            if(release && nameOk && passOk && userOk && emailOk)
                {
                    console.log('hey');
                    console.log(release && nameOk && passOk && userOk && emailOk)
                    document.getElementById("register").disabled = false;
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:31:54.453

我不知道这是否很难理解，但是当您的 AJAX 收到响应时，页面已经被重定向......并且到您的 AJAX，它看起来很正常 - 它正在收到响应（在这种情况下，整页，而不是 JSON）。这是事件的顺序：

```
AJAX Request

--> Browser sends request to PHP file

----> Your PHP file receives the request, processes it, and "redirects"

<---- HTTP 302 status code sent to browser

<-- Browser receives 302 status code, redirects response, and returns result as AJAX response 
```

至少我很确定会发生这种情况——我发誓我以前遇到过这个“问题”，我发现这就是正在发生的事情。

要“解决”这个问题，您有几个选择。您可以在 JSON 中发送此信息，而不是使用 PHP 来“重定向”。然后，在您的回调中，您可以检查它的存在......就像一个“重定向”键，并使用它的值重定向到（在 PHP 中将它的值设置为重定向到的 URL）。或者，您可以将其保留为字符串，在解析它之前，检查它是否以“redirect:”开头。如果它以此开头，则获取字符串的其余部分并重定向到该值（在 PHP 中将其值设置为要重定向到的 URL）。否则，像 JSON 一样解析并正常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:28:47.320

您不能在 ajax 调用中从 php 重定向。

您需要将正确的信息从您的 php 脚本发送回您的 javascript，并使用您从 php.ini 返回的参数从那里进行重定向。

您的 php 中也有`Location:`太多，但这不是问题所在。

# json - JSON - 如何循环一个 json 对象？

> ID：13694651
> 
> 赞同：0
> 
> 时间：2012-12-04T01:20:16.993
> 
> 标签：json, object, loops

我对 JSON 很陌生。我已经尝试过 JSON 的基础知识，但在示例中我使用它是在数组中，而键是在字符串中。我的完全不同，它是一个对象，键是一个数字。我的 JSON 对象的示例是`var ojbJSON = {55: 3, 23: 2};`. 我的问题是我无法获取对象的长度，因为它没有属性长度，如果我执行类似`alert(objJSON.55);`获取值的操作`3`，则会导致 javascript 错误。请不要问我为什么要坚持这一点。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:22:41.520

您必须迭代才能获得计数：

```
 var i=0;
 for (var key in objJSON) i++;
 alert(i); 
```

您可能想为此编写一个帮助程序，例如：

```
function getLength(obj) {
    var i=0;
    for (var key in objJSON) i++;
    return i;
}
alert(getLength(objJSON)); 
```

要在密钥不是有效的 Javascript 变量名（如数字或包含连字符的名称等）时获取密钥，可以使用方括号表示法：

```
alert(objJSON[55]); 
```

# ruby-on-rails - 在“引用”迁移中指定列名

> ID：13694654
> 
> 赞同：144
> 
> 时间：2012-12-04T01:20:44.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rails-migrations

我想`migration`在 Rails 中创建一个，引用另一个表。通常，我会做类似的事情：

```
add_column :post, :user, :references 
```

这将创建一个在表中命名`user_id`的列`posts`。但是，如果`user_id`我想要类似的东西而不是`author_id`呢？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2017-02-05T19:11:12.433

# 对于 Rails 5+

### 初始定义：

如果要定义`Post`模型表，则可以在一行中设置`references`,`index`和：`foreign_key`

```
t.references :author, index: true, foreign_key: { to_table: :users } 
```

* * *

### 更新现有：

如果要添加对现有表的引用，可以这样做：

```
add_reference :posts, :author, foreign_key: { to_table: :users } 
```

* * *

^(**注意：** *的默认值为`index`true。*)

* * *

## 回答 #2

> 赞同：258
> 
> 时间：2015-04-11T12:27:29.747

在**Rails 4.2+**中，您还可以在 db 中设置[外键，](http://edgeguides.rubyonrails.org/active_record_migrations.html#foreign-keys)[这是个好主意](http://edgeguides.rubyonrails.org/active_record_migrations.html#active-record-and-referential-integrity)。

对于简单的关联，这也可以在`t.references`添加时完成`foreign_key: true`，但在这种情况下，您需要两行。

```
# The migration
add_reference :posts, :author, index: true
add_foreign_key :posts, :users, column: :author_id

# The model
belongs_to :author, class_name: "User" 
```

* * *

## 回答 #3

> 赞同：100
> 
> 时间：2014-03-13T16:04:29.467

在 rails 4 中，使用 postgresql 和[schema_plus](https://github.com/SchemaPlus/schema_plus) gem 时，您可以编写

```
add_reference :posts, :author, references: :users 
```

这将创建一个`author_id`正确引用的列`users(id)`。

在你的模型中，你写

```
belongs_to :author, class_name: "User" 
```

注意，创建新表时，可以这样写：

```
create_table :things do |t| 
  t.belongs_to :author, references: :users 
end 
```

> 注意：`schema_plus`gem 整体与 rails 5+ 不兼容，但此功能由与 rails 5 兼容的 gem [schema_auto_foreign_keys](https://github.com/SchemaPlus/schema_auto_foreign_keys)（schema_plus 的一部分）提供。

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2012-12-04T01:28:41.547

手动执行：

```
add_column :post, :author_id, :integer 
```

但是现在，当您创建belongs_to 语句时，您必须对其进行修改，所以现在您必须调用

```
def post
    belongs_to :user, :foreign_key => 'author_id'
end 
```

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2015-11-08T06:14:01.163

如果您不使用外键，那么另一个表的实际表名是什么并不重要。

```
add_reference :posts, :author 
```

**从 Rails 5**开始，如果您使用外键，则可以在外键选项中指定另一个表的名称。（参见[https://github.com/rails/rails/issues/21563](https://github.com/rails/rails/issues/21563)进行讨论）

```
add_reference :posts, :author, foreign_key: {to_table: :users} 
```

在 Rails 5 之前，您应该将外键添加为单独的步骤：

```
add_foreign_key :posts, :users, column: :author_id 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-03-30T16:11:29.803

**alias_attribute(new_name, old_name)**非常方便。只需创建您的模型和关系：

```
rails g model Post title user:references 
```

然后编辑模型并添加一个属性别名

```
alias_attribute :author, :user 
```

之后，您将能够运行诸如

```
Post.new(title: 'My beautiful story', author: User.first) 
```

# javascript - jquery在li之间导航时为ul触发鼠标

> ID：13694656
> 
> 赞同：4
> 
> 时间：2012-12-04T01:20:48.567
> 
> 标签：javascript, jquery, list, mouse

我有一个包含列表的 html 页面

```
<ul id="mylist">
  <li><a href="#">item 1</a></li>
  <li><a href="#">item 2</a></li>
</ul> 
```

然后一些 jquery 代码在鼠标离开列表时触发事件

```
$('#mylist').mouseout(function(evt) {
    $(this).fadeOut('fast');
}); 
```

问题是，当我在 item1 和 item2 之间移动鼠标（从 item1 垂直开始并向下移动到 item2）时，鼠标会触发（并且 $this 正在引用 ul）。即使我认为我没有离开列表，为什么 ul 会触发一个事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T01:34:25.080

也许您会想使用[mouseenter](http://api.jquery.com/mouseenter/) / [mouseleave](http://api.jquery.com/mouseleave/)而不是 mouseover / mouseout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:11:33.263

我相信这是由于 JavaScript 的“事件冒泡”。li 的事件冒泡到 ul。在此处阅读有关此内容的更多信息：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

这可能不是问题的直接答案，但我相信任何 JS 开发人员都应该知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:08:48.993

我认为这是因为您将 mouseout 绑定到 a ，将鼠标悬停在其子级上（

*   ) 将触发鼠标操作（如果我是正确的）。正如 Esthete 所提到的，用 div 包装它并将鼠标悬停绑定到该 div 更简单直接。

# c++ - 图内存实现

> ID：13694658
> 
> 赞同：3
> 
> 时间：2012-12-04T01:21:00.783
> 
> 标签：c++, graph

通常用于在内存中表示图形的两种方法是使用邻接表或邻接矩阵。邻接表是使用指向链表的指针数组来实现的。有什么理由比使用向量向量更快吗？我觉得它应该使搜索和遍历更快，因为回溯会简单得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:05:08.430

链接邻接向量是最受欢迎的教科书模因，在实践中有许多变化。当然，您可以使用向量的向量。有什么区别？

一是链接（无论如何都是双链接）允许在恒定时间内轻松添加和删除边。这显然只有在边集收缩和增长时才重要。对于边缘向量，任何单独的操作都可能需要 O(k)，其中 k 是入射边缘计数。

注意：如果邻接列表中边的*顺序*对您的应用程序不重要，您可以使用向量轻松获得 O(1) 删除。只需将最后一个元素复制到要删除的位置，然后删除最后一个！唉，当邻接顺序很重要时，有很多情况（例如，您担心嵌入平面中）。

即使必须维持订单，您也可以安排复制成本以平均每个操作为 O(1) 分摊到多个操作中。仍然在某些应用程序中，这还不够好，它需要“删除”标记（保留的顶点数就足够了），仅当标记删除的数量是向量的固定分数时才执行压缩。代码很乏味，并且在所有操作中检查已删除节点会增加开销。

另一个区别是头顶空间。邻接表节点非常小：只是一个节点号。双链接可能需要数字本身的 4 倍空间（如果数字是 32 位并且两个指针都是 64）。对于非常大的图，400% 的空间开销并不是那么好。

最后，长时间频繁编辑的链接数据结构可能很容易导致高度不连续的内存访问。与通过向量的线性访问相比，这会降低缓存性能。所以这里向量获胜。

在大多数应用程序中，这种差异并不值得担心。再说一次，巨大的图表是现代世界的方式。

正如其他人所说，对邻接使用通用列表容器是一个好主意，它可以通过链接节点或节点向量快速实现。例如，在 Java 中，您将`List`同时使用和实现/配置文件，`LinkedList`并`ArrayList`查看哪个最适合您的应用程序。NB`ArrayList`在每个`remove`. 如上所述，没有摊销，尽管`add`s*是*摊销的。

还有其他变体：假设您有一个非常密集的图，其中经常需要搜索与给定节点相关的所有边以查找具有特定标签的边。然后你想要邻接的*地图*，其中键是边缘标签。当然地图可以是散列或树或跳过列表或任何你喜欢的。

名单还在继续。如何实现高效的*顶点*删除？正如您所料，这里也有替代方案，每个都有优点和缺点。

# clearcase - 是否可以在本地磁盘上创建 ClearCase VOB？

> ID：13694660
> 
> 赞同：2
> 
> 时间：2012-12-04T01:21:40.857
> 
> 标签：clearcase, cleartool

我正在使用 ClearCase 8 测试与我公司软件的集成，并且我将在同一台机器上使用客户端和服务器软件，因此我不需要通过网络访问我创建的测试 VOB。我正在尝试在本地磁盘而不是网络共享上创建 VOB，但我似乎无法弄清楚如何做到这一点，如果它甚至可能的话。

首先，我尝试只使用常规路径，例如：

```
cleartool mkvob -tag \vobFoo C:\Users\Public\cc_vobs\vobFoo.vbs
cleartool: Error: storage directory must be in UNC style (e.g. \\host\share\...) 
```

找到[这个问题](https://stackoverflow.com/questions/2787203/unc-path-to-a-folder-on-my-local-computer)后，我的下一个尝试是：

```
cleartool mkvob -tag \vobFoo \\localhost\c$\Users\Public\cc_vobs\vobFoo.vbs
cleartool: Error: Attempt to get location information on "\\localhost\c$\Users\Public\cc_vobs\vobFoo.vbs" failed: Invalid argument. 
```

我检查了 - 输入`\\localhost\c$\Users`“运行...”菜单确实会在 Windows 资源管理器中显示正确的文件夹，所以我认为这不是环回适配器的问题。

[我确实在此处](http://ejostrander.com/cc_errors.html#ERROR24)和[此处](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_admin.doc/vob-admin.htm)找到了对错误消息的一些引用，但似乎都不适用于我的情况（我没有使用 UNIX，ClearCase Doctor 没有给我相关的错误消息）

即使在设置 Windows 共享之后，这也失败了：

```
cleartool mkvob -tag \vobFoo \\localhost\cc_vobs\vobFoo.vbs
cleartool: Error: Attempt to get location information on "\\localhost\cc_vobs\vobFoo.vbs" failed: Invalid argument. 
```

我可以让命令通过的唯一方法是将网络主机名与共享一起使用：

```
cleartool mkvob -tag \vobFoo \\hostname\cc_vobs\vobFoo.vbs 
```

是否根本不可能像我尝试做的那样在本地存储位置设置 VOB？还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:35:13.933

我确认您的 UNC 路径不能使用 localhost，但必须以主机名开头。

原因是 Vob 存储路径必须是*全局*可访问的，即可以从任何计算机访问（本地主机只对一台计算机有意义）。

[`cleartool mkvob`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkvob.htm)手册页包括：

> Windows—vob-storage-pname 必须是 UNC 名称。

[UNC（统一命名约定）](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention)：

> Microsoft Windows UNC 是通用命名约定或统一命名约定的缩写，它指定了一种通用语法来描述网络资源（例如共享文件、目录或打印机）的位置。Windows 系统的 UNC 语法具有通用形式：

```
\\ComputerName\SharedFolder\Resource 
```

> Microsoft 通常将此称为“网络路径”。

* * *

拥有本地路径（无需定义共享）的一种方法是使用`-stgloc`参数，指的是预定义存储位置的名称（而不是`-host -hpath -gpath`参数）

请参阅[`cleartool mkstgloc`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkstgloc.htm)（定义 Vobs 或视图的存储位置）。
您可以在那里使用本地路径。

> 在许多情况下，ClearCase 启发式地从`stgloc-pname`参数中导出适当的可访问性信息。
> 在服务器存储位置与其客户端之间没有文件系统连接的情况下，ClearCase 会派生主机名和主机本地路径，但由于无法派生有意义的全局路径，因此您必须指定`-ngpath`取消设置全局路径信息。
> 
> 要为快照视图或仅通过快照视图访问的 VOB 创建服务器存储位置，请使用以下选项：

*   `-host -hpath -gpath`当服务器存储位置主机与其客户端之间存在文件系统连接时。
*   `-ngpath -host -hpath`当服务器存储位置主机与其客户端之间没有文件系统连接时。

因此，如果您这样做（`-ngpath`选项）请小心：**您的 Vob 将无法通过动态视图访问，只能通过快照视图访问**。

# entity-framework - DbContext 中的自动急切加载导航属性

> ID：13694663
> 
> 赞同：0
> 
> 时间：2012-12-04T01:21:52.970
> 
> 标签：entity-framework

有没有办法篡改 DbContext 以便在查询中请求实体时自动加载特定的导航属性？（没有延迟加载）。

> 实体框架 5

例子：

var SupremeEmployee = context.Employees.FirstOrDefault(x => x.EmployeeId == 42);

并且返回的模型将返回预先填充了“部门”导航属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:24:50.183

取决于你的模型是什么样子的。如果您使用接口或继承，则可以向 DbContext 类添加一个函数，该函数对该类型具有通用约束，该约束始终包含导航属性。

根据我的经验，虽然你通常最好不要这样做，但性能明智。我更喜欢将我目前需要的字段加载到匿名类型中。

以最基本的方式，您可以这样做：

```
public class Department
    {
        public int Id { get; set; }
    }

    public class Employee
    {
        public int Id { get; set; }
        public Department Department { get; set; }
    }

    public class MyContext : DbContext
    {
        protected DbSet<Employee> Employees { get; set; }

        public IQueryable<Employee> LoadEmployees()
        {
            return Employees.Include(p => p.Department);
        }
    } 
```

# sql - 将两个字符串字段转换为日期时间

> ID：13694666
> 
> 赞同：1
> 
> 时间：2012-12-04T01:22:10.617
> 
> 标签：sql, datetime, ms-access-2003

我在 ms access 2003 中有两个字段（文本）：EventD 和 EventT。如何连接这两个字段并将它们转换为具有如下格式的单个日期时间字段 EventDT (DD/MM/YYYY HH:MM:SS)。

我查看了其他线程，但没有人拥有我想要的代码格式。

谢谢大家

问候， 10e5x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:29:07.667

使用[DateSerial](http://msdn.microsoft.com/en-us/library/bbx05d0c%28v=vs.80%29.aspx)和[TimeSerial](http://msdn.microsoft.com/en-us/library/ws25fd2z%28v=vs.80%29.aspx)函数。您可以添加 DateSerail() + TimeSerial() 来获取 DateTime 值

您必须使用 Mid 函数从字符串值中提取日期和时间的不同部分，并使用 Val 将它们转换为 INT。

结果函数将是这样的：

```
SELECT
DateSerial(Val(Mid(EventD,7,4)), Val(Mid(EventD,4,2)), Val(Mid(EventD,1,2))) + TimeSerail(Val(Mid(EventT,1,2)), Val(Mid(EventT,4,2)), Val(Mid(EventT,7,2))) As DateTimeValue
FROM Table1 
```

# java - 使用 StringTokenizer 获取单词

> ID：13694668
> 
> 赞同：3
> 
> 时间：2012-12-04T01:22:23.930
> 
> 标签：java, command-line-interface, stringtokenizer

我目前正在尝试实现一个仅使用数组列表来存储 Pokemon 对象的 Pokedex。这应该是一个命令行界面，其中包含某些命令，如添加、删除、信息、帮助等。我只是想知道找出用户输入的命令的最佳方法。他们还被允许每行输入多个命令。

假设用户在每个命令后输入了正确数量的术语。

例如，示例运行可能是：

```
>>>add PIKACHU ELECTRIC 1 These mouse-like creatures are among the most sought-after Pokemon.

>>>info PIKACHU
PIKACHU ELECTRIC 1 These mouse-like creatures are among the most sought-after Pokemon.

>>>add RAICHU ELECTRIC 2 remove PIKACHU 
```

目前我有一个 StringTokenizer 来查看下一个单词是否是 .equal("add") ，如果是，我调用我已经实现的 add() 方法。我也不确定如何检查每行是否有多个命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:27:19.393

对于命令行界面，您可以使用[Apache Commons 命令行界面](http://commons.apache.org/cli/)

[并从这里](http://marxsoftware.blogspot.in/2008/11/command-line-parsing-with-apache.html)获得相同的最佳示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:31:57.747

您可以使用 .nextToken() 方法获取下一个字符串。

或者，您可以使用 .split() 方法，如下所示：

```
String[] commands = input.split();
if(commands[0].equals("add"))...
if(commands[1].equals("pikachu"))... 
```

或者你想做的任何事情。希望有帮助！

# c# - 角色描述未更新

> ID：13694669
> 
> 赞同：0
> 
> 时间：2012-12-04T01:22:29.077
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

我正在创建角色，但描述没有更新。

我尝试了两种方式：

第一的：

```
Roles.CreateRole(model.RoleName);                      
using (tgpwebgedEntities context = new tgpwebgedEntities())
{
  var query = from r in context.aspnet_Roles where r.RoleName == r.RoleName select r;
   var obj = query.First();
   obj.Description = model.Description;
   context.SaveChanges();
} 
```

第二：

```
using(tgpwebgedEntities context = new tgpwebgedEntities()) {
   var obj = context.aspnet_Roles.Single(r => r.RoleName == roleModel.RoleName);
   obj.Description = roleModel.Description;
   context.SaveChanges();
} 
```

奇怪的是，当用户使用另一个操作编辑区域创建的角色并且工作正常时，第二种方式是我使用的方式。

这首先用于创建角色并更新其描述的方法中，因为 .NET 中不支持描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:50:23.853

问题在于您的查询语句，

```
var query = from r in context.aspnet_Roles where r.RoleName == r.RoleName select r; 
```

"r.RoleName == r.RoleName" 将始终为真并返回所有条目。查询应该类似于您在第二个查询中的内容

```
r => r.RoleName == roleModel.RoleName 
```

# c# - 在 C# 中解析分隔字符串的最有效方法

> ID：13694680
> 
> 赞同：0
> 
> 时间：2012-12-04T01:23:07.207
> 
> 标签：c#

这已经被问了几种不同的方式，但我正在与另一位开发人员讨论“我的方式”与“你的方式”。语言是 C#。

我想解析一个管道分隔的字符串，其中每个块的前 2 个字符是我的标签。

规则。不是我的规则，而是我被赋予并且必须遵守的规则。我无法更改字符串的格式。这个函数可能会被调用很多次，所以效率是关键。我需要保持很简单。我正在寻找的输入字符串和标签可能/将在运行时更改。

输入字符串示例：AOVALUE1|ABVALUE2|ACVALUE3|ADVALUE4 我可能需要值的示例标签：AB

我根据分隔符将字符串拆分为一个数组，并在每次调用函数时循环遍历该数组。然后我查看前 2 个字符并返回减去前 2 个字符的值。

“其他人”的方法是获取字符串并使用 IndexOf 和 SubString 的组合来找到我正在寻找的字段的起点和终点。然后再次使用 SubString 提取减去前 2 个字符的值。所以他会说 IndexOf("|AB") 在字符串中找到然后下一个管道。这将是开始和结束。然后SubString那个出来。

现在我应该认为 IndexOf 和 SubString 每次都会在逐个字符级别解析字符串，因此这比使用大块并读取字符串减去前 2 个字符的效率要低。或者有没有比我们俩提议的更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:49:36.167

考虑到每次都需要重新评估输入字符串，另一个人的方法会在时间上更有效。如果输入字符串很长，也不需要拆分字符串所需的额外内存。

如果我尝试编写一个非常紧凑的循环，我更喜欢直接使用数组/字符串运算符而不是 LINQ 来避免额外的开销：

```
string inputString = "AOVALUE1|ABVALUE2|ACVALUE3|ADVALUE4";

static string FindString(string tag)
{
    int startIndex;
    if (inputString.StartsWith(tag))
    {
        startIndex = tag.Length;
    }
    else
    {
        startIndex = inputString.IndexOf(string.Format("|{0}", tag));
        if (startIndex == -1)
            return string.Empty;

        startIndex += tag.Length + 1;
    }

    int endIndex = inputString.IndexOf('|', startIndex);
    if (endIndex == -1)
        endIndex = inputString.Length;

    return inputString.Substring(startIndex, endIndex - startIndex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:29:47.620

我已经在 C# 中进行了*很多*解析，我可能会采用“其他人”建议的方法，因为它使用的资源会更轻一些，而且可能也会更快一些。

也就是说，只要数据不是太大，第一种方法就没有问题，并且它会更容易编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:34:07.357

像这样的东西可能工作正常

```
string myString = "AOVALUE1|ABVALUE2|ACVALUE3|ADVALUE4";
string selector = "AB";

var results = myString.Split('|').Where(x => x.StartsWith(selector)).Select(x => x.Replace(selector, "")); 
```

返回：匹配列表，在这种情况下只有一个“VALUE2”

如果您只是在寻找第一个或唯一的匹配项，这将起作用。

```
 string result = myString.Split('|').Where(x => x.StartsWith(selector)).Select(x => x.Replace(selector, "")).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:35:40.090

*   SubString 不解析字符串。
*   IndexOf 会解析字符串。

我的偏好是 Split 方法，主要是代码编码效率：

```
string[] inputArr = input.Split("|".ToCharArray()).Select(s => s.Substring(3)).ToArray(); 
```

很简洁。substring/indexof 方法需要多少个 LoC？

# ios - iOS - 可重用的 UIView 子类

> ID：13694683
> 
> 赞同：0
> 
> 时间：2012-12-04T01:23:13.167
> 
> 标签：ios, uiview, subclass, reusability

我正在尝试构建一些不同的 UIView 子类来向我的应用用户显示信息。我遇到的一个问题是能够多次调用视图。

这是测试调用：

```
if(rewardsView==nil){
    rewardsView = [[RewardsView alloc] init];
    [rewardsView showRewardType:RewardsAttack withXP:100 withZBucks:10 isCritical:NO];
}else{
    [rewardsView showRewardType:RewardsAttack withXP:200 withZBucks:20 isCritical:NO];
} 
```

这是初始化和显示的代码：

```
- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code
        self.frame = CGRectMake(0, 0, DEVICE_WIDTH, DEVICE_HEIGHT);

        //Z-Bucks
        zBucksIcon = [UIImage imageNamed:@"rewards-z-bucks"];
        zBucksView = [[UIImageView alloc] initWithFrame:CGRectMake(DEVICE_WIDTH/4-zBucksIcon.size.width/2, DEVICE_HEIGHT/2-zBucksIcon.size.height/2-12, zBucksIcon.size.width, zBucksIcon.size.height+25)];
        [zBucksView setImage:zBucksIcon];
        zBucksView.alpha = 0;

        zBucksLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, zBucksIcon.size.height, zBucksIcon.size.width,25)];
        zBucksLabel.backgroundColor = [UIColor clearColor];
        zBucksLabel.textAlignment = NSTextAlignmentCenter;
        zBucksLabel.font = [UIFont fontWithName:@"Open Sans Condensed" size:24];
        zBucksLabel.textColor = [UIColor whiteColor];
        zBucksLabel.shadowColor = [UIColor blackColor];
        zBucksLabel.shadowOffset = CGSizeMake(1, 1);
        [zBucksView addSubview:zBucksLabel];

        //XP
        xpIcon = [UIImage imageNamed:@"rewards-xp"];
        xpView = [[UIImageView alloc] initWithFrame:CGRectMake(DEVICE_WIDTH/4*3-xpIcon.size.width/2, DEVICE_HEIGHT/2-xpIcon.size.height/2-12, xpIcon.size.width, xpIcon.size.height+25)];
        [xpView setImage:xpIcon];

        xpLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, xpIcon.size.height, xpIcon.size.width,25)];
        xpLabel.backgroundColor = [UIColor clearColor];
        xpLabel.textAlignment = NSTextAlignmentCenter;
        xpLabel.font = [UIFont fontWithName:@"Open Sans Condensed" size:24];
        xpLabel.textColor = [UIColor blackColor];
        xpLabel.shadowColor = [UIColor whiteColor];
        xpLabel.shadowOffset = CGSizeMake(1, 1);
        [xpView addSubview:xpLabel];
        xpView.alpha = 0;

        [self addSubview:zBucksView];
        [self addSubview:xpView];
    }
    return self;
}

-(void)showRewardType:(RewardsType)type withXP:(int)xp withZBucks:(int)zBucks isCritical:(BOOL)critical{

    //Set Values
    zBucksLabel.text = [NSString stringWithFormat:@"+%i",zBucks];
    xpLabel.text = [NSString stringWithFormat:@"+%i",xp];

    if(type==RewardsAttack){

    }
    if(type==RewardsHeal){

    }
    if(type==RewardsDaily){

    }

    UIWindow *window = [appDelegate window];
    [window addSubview:self];
    [self animateRewards];
} 
```

以下是关闭的代码（调用了一些动画函数后，此处未显示）：

```
-(void)dismissRewards{
    [self removeFromSuperview];
    //Reset Views
    zBucksView.alpha = 0;
    xpView.alpha = 0;
    [zBucksView setFrame:CGRectMake(DEVICE_WIDTH/4-zBucksIcon.size.width/2, DEVICE_HEIGHT/2-zBucksIcon.size.height/2-12, zBucksIcon.size.width, zBucksIcon.size.height+25)];
    [xpView setFrame:CGRectMake(DEVICE_WIDTH/4*3-xpIcon.size.width/2, DEVICE_HEIGHT/2-xpIcon.size.height/2-12, xpIcon.size.width, xpIcon.size.height+25)];
} 
```

# jquery-mobile - 在 JQuery Mobile 中包含 JS 文件

> ID：13694688
> 
> 赞同：0
> 
> 时间：2012-12-04T01:23:47.017
> 
> 标签：jquery-mobile

如何以及在何处将您自己的 JS 文件放入 JQueryMobile Web 应用程序？

我发现的一些建议：

*   仅在网络应用的第一页，通常是 index.html
*   在 JQM 页面内

哪个是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:28:07.567

After your jQuery Library and BEFORE your jQuery mobile library. I place all my script tags at the end of the body...but that's not a must...

```
<script type="text/javascript" src="jQuerySource.js">
<script type="text/javascript">
/*Your stuff*/
</script>
<script type="text/javascript"  src="jQueryMobileSource.js"> 
```

Why?: Because when you're building your jQM application you're going to want your event bindings to be defined before jQuery mobile gets initialized and fires the 'mobileinit' event and your first page's 'pageinit' event.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:27:46.273

Just put your script after the JQM script tag

Yeah, that's all

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:30:27.093

It is a good idea to use jQueryMobile javascripts from Google CDNs because of following reasons: 1\. You can directly include minified version in your pages. 2\. You save bandwidth cost 3\. Most importantly there are good chances that the JS might already be loaded on your user browser's. Because many other web apps use them. So you should use

```
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"> 
```

So, if all your code is inside document.ready() ; you can use it at end [ which loads the page faster]

# java - charAt() 返回不是字符串？

> ID：13694689
> 
> 赞同：3
> 
> 时间：2012-12-04T01:23:49.890
> 
> 标签：java, char

我正在尝试编写一些代码来告诉我一个字符串的第一个字母是否等于另一个字符串的第一个字母。我不知道如何将字符串与 charAt() 的返回值进行比较。帮助？

```
 public class CharAtTest
    {
        public static void main(String [] args)
        {
            String name = "joe";
            String initial = "j";
            if(initial.equals(name.charAt(0)))
            {
                System.out.println("Sucess");
            }else{
                System.out.println("Fail");
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T01:25:23.603

你可以使用：

```
if (initial.charAt(0) == name.charAt(0)) 
```

或更好

```
if (name.startsWith(initial)) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:30:00.737

Another way would be:

> String.valueOf(name.charAt(0));

Or:

> Character.toString(name.charAt(0));

But the implicit way (see ivanovic's answer) works as well

> name.charAt(0) + ""

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T01:25:45.117

charAt()，顾名思义，返回一个字符，而不是字符串。所以`initial`改为制作一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T01:27:06.097

只需这样做：

```
String name = "joe";
char initial = 'j';

if (name.charAt(0) == initial) {
    // ...
} 
```

# objective-c - AFNetworking + JSON 并获取服务器状态

> ID：13694692
> 
> 赞同：0
> 
> 时间：2012-12-04T01:24:07.127
> 
> 标签：objective-c, ios, json, afnetworking

我正在尝试使用 JSON 从网站调用数据。

到目前为止，我可以设法获得完整的数据。但是，我试图从 JSON 输入中获取特定选项。

我得到了什么：

```
{
"servers": {
"CA Servers": {
"Can One": {
"status": "medium"
},

"Can Two": {
"status": "medium"
}
},

"US Servers": {
"US One": {
"status": "down"
},
"US Two": {
"status": "high"
}
}
}
} 
```

我想知道如何仅从 Can One 中提取“中等”，从 US 2 中提取“High”，或者从 US One 中提取“Down”，然后将其放入我的故事板中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:14:07.563

在 iOS 5 及更高版本中，您可以使用以下代码来获取这些值。

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSArray *arrayServers = [dictionary valueForKey:@"servers"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:44:57.987

如果您使用 AFNetworking 和`AFJSONRequestOperation`，在您的`success`回调中，您应该有一个 JSON 对象，如下所示：

```
...
success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // Use JSON as an NSDictionary
    NSString *status = JSON[@"servers"][@"CA Servers"][@"Can One"][@"status"];
... 
```

然后，您可以`status`在情节提要中使用该变量。另请记住，如果您使用我的示例访问字典，则应检查该结构是否存在。否则，如果任何字段不存在，访问器将返回`nil`并且应用程序将中断。

# java - 是否可以在 Android 中使用字符串加载资源？

> ID：13694693
> 
> 赞同：1
> 
> 时间：2012-12-04T01:24:11.687
> 
> 标签：java, android, android-resources

> **可能重复：**
> [Android 动态字符串资源](https://stackoverflow.com/questions/8668093/android-dynamic-string-resources)

我有以下内容：

```
TextView text = (TextView)vi.findViewById(R.id.text);
TextView txtSub = (TextView)vi.findViewById(R.id.txtSub);
TextView txtA = (TextView)vi.findViewById(R.id.txtA);
TextView txtB = (TextView)vi.findViewById(R.id.txtB); 
```

是否可以使用字符串来访问这些（这只是伪代码）？

```
String resourceName = "text";
TextView text = (TextView)vi.findViewById(R.id. + resourceName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:54:38.833

使用[Resources.getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)：

```
int resource = getResources().getIdentifier("R.id."+resourceName, "string", getPackageName());
TextView text = (TextView)vi.findViewById(resource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:33:43.207

请参阅此帖子：[按名称查找视图](https://stackoverflow.com/questions/6831506/find-view-by-name)

您需要从您的标识符中获取一个 id。获得 id 后，请正常使用 findById。

# java - Java方法不等待BufferedReader输入？

> ID：13694695
> 
> 赞同：5
> 
> 时间：2012-12-04T01:24:14.993
> 
> 标签：java, bufferedreader

我有一个`BufferedReader`等待输入，但由于某种原因，它不等待第二次读取并继续打印我的第三个打印语句。

代码：

```
BufferedReader inFromUser =new BufferedReader(new InputStreamReader(System.in));
char letter,xVal;
int yVal;

System.out.println("Please enter a letter for your word.(a-z)");
letter=(char)inFromUser.read();  
System.out.println("Please enter a X location for this piece.(A-J)");
xVal=(char)inFromUser.read();
System.out.println("Please enter a Y location for this piece.(0-9)");
yVal=inFromUser.read(); 
```

示例执行如下：请为您的单词输入一个字母。//在这里等待输入

一种

请为这件作品输入 X 位置。//不要在这里等？？？

请输入这件作品的 Y 位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:28:44.340

它不等待的原因是因为`xVal=(char)inFromUser.read();`正在从行中读取“\n”`letter=(char)inFromUser.read();`

因此，一种解决方案是`inFromUser.readLine();`在每个提示后添加一个：

```
 System.out.println("Please enter a letter for your word.(a-z)");
    letter=(char)inFromUser.read(); 
    inFromUser.readLine(); 
    System.out.println("Please enter a X location for this piece.(A-J)");
    xVal=(char)inFromUser.read();
    inFromUser.readLine();
    System.out.println("Please enter a Y location for this piece.(0-9)");
    yVal=inFromUser.read();
    inFromUser.readLine(); 
```

你添加一个 inFromUser.readLine(); 在每个提示之后，因此它可以读取“\n”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T01:35:51.467

发生这种情况是因为一旦您在输入字母后按 Enter 键，您也会将换行符发送到流中。

当您`read()`第一次调用时，它会按预期返回第一个字符。但是，当您`read()`第二次调用时，它只会读入缓冲在流中的换行符，从而看起来像是跳过了读取指令。

解决方案是告诉`BufferedReader`读取整行，然后从行中获取第一个字符：

```
System.out.println("Please enter a letter for your word.(a-z)");
letter = inFromUser.readLine().charAt(0); 
```

您可能还希望通过进行一些验证来改进这一点，以防用户只是按 Enter 键而不输入字母。

# html - 针对相同目录和子目录文件的相对 url 是否以点和斜杠开头？

> ID：13694696
> 
> 赞同：2
> 
> 时间：2012-12-04T01:24:18.843
> 
> 标签：html, url, xhtml

目录中有一个`index.xhtml`文件和一个`chapters`子目录，我们可以将其作为根目录。目录中有`chapter01.xhtml`等`chapter02.xhtml`文件`chapters`。我应该如何`chapter01.xhtml`在`index.xhtml`代码中解决？

```
./chapters/chapter01.xhtml 
```

或者

```
chapters/chapter01.xhtml 
```

?

如果章节在同一个目录中怎么办 - 那么

```
./chapter01.xhtml 
```

要不就

```
chapter01.xhtml 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:25:19.343

两者是等价的，但大多数人按照惯例使用后者。另外，它减少了两次击键。

# http - 告诉浏览器在重定向后明确不将数据发布到新 url

> ID：13694697
> 
> 赞同：2
> 
> 时间：2012-12-04T01:24:21.273
> 
> 标签：http, firefox

我想在接受 POST 数据的页面上进行临时重定向 (307)。它被重定向到的页面不需要将数据发布到它（POST 数据已经在执行重定向的初始登陆时处理）。

也许它是 Firefox 中的新功能，但它会提示用户“此网页正在重定向到新位置。您想将您输入的表单数据重新发送到新位置吗？”。我想避免该提示，并明确声明数据不需要发布到新 URL。

是否有一个 HTTP 标头可以指定这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:49:09.327

正确的响应代码是 303（请参阅其他）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T01:31:15.587

啊，我发的太快了。

答案是使用 302 重定向而不是 307。

显然 307 保留了请求方法，而 302 使其成为 GET。我只是在这里阅读了 wiki 以进行重定向：[http](http://en.wikipedia.org/wiki/URL_redirection) ://en.wikipedia.org/wiki/URL_redirection ，在这一点上还不是很清楚。它看起来像是 302 刚刚被 307 替换以进行临时重定向。

# php - PHP、FACEBOOK、PAGES、RSS：帮助将页面提要转换为 RSS（出现错误）

> ID：13694710
> 
> 赞同：0
> 
> 时间：2012-12-04T01:25:26.377
> 
> 标签：php, facebook

好的，所以按照我在 StackOverflow 上的另一篇文章中找到的一些说明，我构建了一个脚本来获取粉丝页面提要并将其转换为 RSS2 提要。但是，脚本需要进行一些更改，而且我不是世界上最好的程序员，所以我需要一点帮助。

我收到此错误：

警告：在第 48 行的 feed.php 中为 foreach() 提供的参数无效

我不确定无效的论点是什么。

```
<?

// error reporting
echo '<pre>';
ini_set('display_errors', 'on');
error_reporting(E_ALL);

// require your facebook php sdk
require('./facebook/facebook.php'); 

// include the feed generator feedwriter file                   
include("./feed/FeedWriter.php");                       

// config secret key and appid
$config = array(
'appId' =>  '',                             
'secret'=>  ''      
);

// Initialize
$facebook = new Facebook($config);

// Set Apps Permissions Request
$permission_scope = "";

   // get users access token
$access_token = $facebook->getAccessToken();

    // get page post
    $feed_url = 'https://www.facebook.com/Ritualdubstep/feed?access_token='.$access_token;
    $feed_json = file_get_contents($feed_url);
    $feed_data = json_decode($feed_json);

// create the feedwriter object 
$feed = new FeedWriter(RSS2);

$feed->setTitle('Ritual Dubstep'); // set your feed title
$feed->setLink('https://www.facebook.com/Ritualdubstep'); // set the url to the feed page you're generating

$feed->setChannelElement('updated', date(DATE_RSS , time()));
$feed->setChannelElement('author', array('name'=>'Ritual Dubstep SF')); // set the author name

// iterate through the facebook response to add items to the feed
foreach($feed_data['data'] as $entry){
    if(isset($entry["message"])){
        $item = $feed->createNewItem();
        $item->setTitle($entry["from"]["name"]);
        $item->setDate($entry["updated_time"]);
        $item->setDescription($entry["message"]);
        if(isset($entry["link"]))
            $item->setLink(htmlentities($entry["link"]));

        $feed->addItem($item);
        }
}

// generate feed
$feed->genarateFeed();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:43:06.553

通常这意味着`foreach`调用中的第一个参数（在这种情况下`$feed_data['data']`）不是有效的数组。

在运行进入循环之前确保`$feed_data['data']`存在 ( `isset($feed_data['data'])`) 并且它是一个数组 ( )。`is_array($feed_data['data'])``foreach`

而且 - 正如评论中提到的[变形者](https://stackoverflow.com/users/1082646/shapeshifter)- 您可能希望在`var_dump($feed_data['data'])`开始循环之前开始故障排除`foreach`以查看正在生成的内容。

# data-structures - Prim-Jarnik 算法的最有效数据结构

> ID：13694711
> 
> 赞同：1
> 
> 时间：2012-12-04T01:25:30.527
> 
> 标签：data-structures, prims-algorithm

其中最有效的数据结构是什么：

*   边缘列表
*   邻接表
*   邻接矩阵

用于执行 Prim-Jarnik 算法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:50:49.007

通过边缘列表，我想您的意思是图 G 中所有边缘的列表？然后这是三个中最慢的，因为每次您在顶点 u 时都需要遍历整个列表才能知道 G 中有哪些 (u, v) 对。邻接矩阵比这要快一些，但仍然很慢因为您需要遍历矩阵的整行来找到相邻的顶点和各自的边权重。但是如果你有一个稠密的图，邻接矩阵就像一个邻接表。假设一个不那么密集的图，邻接列表是更快的，这样遍历列表并不比直接访问矩阵行中的每一列更昂贵。

也就是说，Prim 算法的关键问题其实不是这个。为了实现其描述的计算复杂性，您需要使用优先级队列（这是您应该关注的部分）。

# c++ - 将 C 编译为 C++ 链接器错误（lua 和 oolua）

> ID：13694712
> 
> 赞同：2
> 
> 时间：2012-12-04T01:25:39.253
> 
> 标签：c++, c, lua, oolua

我在编译为 C++ 的一段 C 代码时遇到了问题，该代码从第三个包产生了链接器错误。

设置是我有 lua、oolua 和我的程序，它利用了这两者。由于其可怕的构建过程，该项目已从 luabind 移出。我的代码在构造对象时偶尔会抛出异常（这是意料之中的），而 oolua 不会处理这个错误。

从阅读中我已经完成了将 lua 编译为 C++ 应该可以缓解这个问题并导致程序不只是退出，但问题是 oolua 出于某种原因不喜欢 lua 是 C++，我找不到关于为什么会这样的参考。

tl;dr：如果 C 代码被编译为 C++，假设它编译正确，链接会出现什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T03:34:38.940

当 Lua 编译为 C++ 时，它实际上使用了 C++ 名称修饰，并且 C++ 应该使用正常的头文件。不要被`lua.hpp`标题弄糊涂了。只有当 Lua 被编译为 C 时，它才应该用于 C++。因此，当你将 Lua 编译为 C++ 时，你不*应该*使用`extern "C"`. 不幸的是 OOLua 在`extern "C"` [这里](http://code.google.com/p/oolua/source/browse/trunk/include/lua_includes.h)使用。您可以尝试将 OOLua 中的标头修改为不使用`extern "C"`，然后重新编译 OOLua 或向他们提交错误以正确修复它。

不幸的是，似乎没有多少人意识到将 Lua 与 C++ 一起使用的陷阱，所以许多项目都假设 Lua 像正常一样编译为 C。

长解释：

当 Lua 编译为 C 时，没有 extern 语句，因此所有函数都使用默认值 ( `extern "C"`)。当 C 文件使用 Lua 时，它们使用正常的头文件，这些头文件再次不包含 extern 语句，因此编译器假定一切都是如此，`extern "C"`并且它们都与库匹配。如果您使用 C++ 中的 Lua，则使用`lua.hpp`包含该`extern "C"`块的 Lua，以便您的编译器知道 Lua 是`extern "C"`.

当 Lua 编译为 C++ 时，没有 extern 语句，因此编译器假定 Lua 中的所有函数都是`extern "C++"`. 您不能再直接从 C 中使用 Lua。如果您使用 C++ 中的 Lua，`lua.hpp`那么它会看到该`extern "C"`块，假定 Lua 函数`extern "C"`在链接时由于错误的处理而失败。`extern "C++"`如果您直接从 C++ 使用普通标头，则假定没有 extern 语句。这与图书馆相匹配，一切正常。

OOLua 所做的是它包含正常的头文件，但它有自己的头文件，因此当所有 Lua 函数实际上使用 C++ 链接时，`extern "C"`编译器会为所有 Lua 函数使用链接，修改错误并且您会收到很多关于缺少符号的链接器错误。`extern "C"`

# wcf - 在 Mono 上运行的 wsDualhttpbinding 异常

> ID：13694715
> 
> 赞同：1
> 
> 时间：2012-12-04T01:25:47.037
> 
> 标签：wcf, mono, wsdualhttpbinding

**运行时上下文：** 使用 WSDualHttpBinding 在 Linux 上由 Mono 运行的 WCF 服务。我使用 app.config ，创建一个使用 WSDualHttpBinding 的 EndPoint

服务的 app.config（部分）

```
 <endpoint address="http://192.168.0.101:8889"
              binding="wsDualHttpBinding" bindingConfiguration="wsDualHttp_Binding"
              contract="DynIPServiceContract.IDynIPService" /> 
```

**服务代码：**

```
 static void Main(string[] args)
    { 
        try
        {
            ServiceHost sh = new ServiceHost(typeof(DynIPService.DynIPService));
            sh.Open();
            foreach (var ep in sh.Description.Endpoints)
            {
                Console.WriteLine("Address: {0}, ListenUri: {1}, ListenUriMode: {2} ", ep.Address, ep.ListenUri, ep.ListenUriMode);
            }
            Console.WriteLine("Service is running");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error:" + ex.Message);
            throw;
        }
        finally
        {
           Console.ReadKey();
        }
    } 
```

异常：属性“textEncoding”的默认值与属性本身的类型不同：预期 System.Text.Encoding 但为 System.String（关于详细信息，请查看异常快照） ![在此处输入图像描述](../Images/0ec75b6205d65d95289919ae8fa6217d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:02:48.237

好吧，我只是快速查看了代码，该异常实际上应该是您的问题中最少的;-)

真正的问题是 Mono 中尚不支持 WSDualHttpBinding。

`CreateBindingElements()`是一个重要的抽象方法`System.ServiceModel.Channels.Binding`，必须通过绑定来实现。

`mcs/class/System.ServiceModel/System.ServiceModel/WSDualHttpBinding.cs`最后一次更改是在 2008 年，它只是抛出一个`NotImplementedException`：

[https://github.com/mono/mono/blob/master/mcs/class/System.ServiceModel/System.ServiceModel/WSDualHttpBinding.cs#L140](https://github.com/mono/mono/blob/master/mcs/class/System.ServiceModel/System.ServiceModel/WSDualHttpBinding.cs#L140)

我必须承认我之前也没有在 Windows 上使用过 WSDualHttpBinding，所以我不知道它使用了哪些绑定元素（以及它们是否已经在 Mono 中实现）。这些绑定元素提供了核心功能，所以很难说实现这个绑定需要多长时间。

# ruby-on-rails - redmine：下 载 wiki.html 而不是 wiki 页面

> ID：13694716
> 
> 赞同：0
> 
> 时间：2012-12-04T01:25:59.873
> 
> 标签：ruby-on-rails, ruby, redmine

因为我没有设法在 redmine.org 的论坛中注册，所以我在这里用我的实际问题复制[这个](http://www.redmine.org/boards/2/topics/33415)问题。

我在 Ruby 1.8.7 和 Rails 3.2.8 上运行 Redmine 2.1.4 。它由使用 Phusion Passenger 2.2.15 的 Debian Linux 中的 Apache 2.2.1 提供服务

当我单击项目的 Wiki 时，我得到的是“下载 Wiki.html”行为，而不是 wiki 页面本身。

下载的 Wiki.html 以简单的 HTML 格式包含主 Wiki 页面的内容。

这是我的响应标头，其中 Content-Disposition 清楚地引发了这种行为。

```
HTTP/1.1 200 OK
Date: Tue, 04 Dec 2012 01:17:33 GMT
Server: Apache/2.2
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 2.2.15
x-ua-compatible: IE=Edge,chrome=1
content-transfer-encoding: binary
X-Rack-Cache: miss
Content-Disposition: attachment; filename="Wiki.html"
Cache-Control: private
Status: 200
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 535
Keep-Alive: timeout=5, max=500
Connection: Keep-Alive
Content-Type: text/html 
```

这是来自Redmine日志：

```
Started GET "/projects/inventory/wiki.html" for 10.98.107.47 at Tue Dec 04 02:17:33 +0100 2012
Processing by WikiController#show as HTML
  Parameters: {"project_id"=>"inventory"}
  Current user: admin (id=4)
  Rendered wiki/export.html.erb (1.7ms)
  Rendered text template (0.0ms)
Sent data Wiki.html (0.4ms)
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.2ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:18:43.703

我可以通过在以下代码中注释掉这一行来修复我的安装`redmine/public/.htaccess`：

```
RewriteRule ^([^.]+)$ $1.html [QSA] 
```

该指令是 Redmine 的重要组成部分吗？还是导轨？我实际上不知道是谁把所有的配置都放在了 .htaccess 中，也不知道为什么。

Redmine 似乎工作正常，但有人知道删除此指令是否会在 Redmine 的某个地方引起问题吗？

# mysql - MySQL - 触发器以防止通过连接表删除

> ID：13694721
> 
> 赞同：0
> 
> 时间：2012-12-04T01:26:30.463
> 
> 标签：mysql, triggers, distinct

我需要制作一个触发器来防止删除员工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:35:03.407

从[触发器文档](http://dev.mysql.com/doc/refman/5.5/en/trigger-syntax.html)：

> 触发器不能使用显式或隐式开始或结束事务的语句，例如 START TRANSACTION、COMMIT 或**ROLLBACK**。

所以通常这是不可能的。当您想使整个事务失败时，您可以做的是在触发器中强制出错：例如

```
CREATE TRIGGER t1 BEFORE DELETE ON table1
FOR EACH ROW
BEGIN
      IF (failCondition) THEN
           SELECT 1/0 FROM table1 LIMIT 1
      END IF;
END 
```

这将触发错误并回滚整个事务

**编辑：**

所以对于你的问题，这将是这样的

```
CREATE TRIGGER preventLastStaffDeletion BEFORE DELETE ON Admission
FOR EACH ROW
BEGIN
      DECLARE remaining INT DEFAULT 0;
      SET remaining := (SELECT COUNT(staff) FROM Admission WHERE the_date = OLD.the_date AND work_time = OLD.work_time );
      IF remaining = 1 THEN
           SELECT 1/0 FROM Admission LIMIT 1
      END IF;
END 
```

没有测试所以借口语法错误，但想法应该很清楚。

允许删除在此日期具有此工作时间的员工，直到只剩下一个

**编辑 2** 重新阅读您的问题并更新失败条件

# combobox - EXTJS 远程组合框

> ID：13694729
> 
> 赞同：2
> 
> 时间：2012-12-04T01:27:27.147
> 
> 标签：combobox, extjs4, remote-server

我有一个组合框，其中一个商店通过远程从服务器获取数据。我的问题是我的分页不起作用。这是我的代码片段：

```
 Ext.define('EmployeeModel', {
     extend: 'Ext.data.Model',
     fields: [
        {name:'id', type:'int'},
        {name:'fullname', type:'string'}
     ]
  });

  // remote store
  var employeeStore= new Ext.data.Store(
  {
     model: 'EmployeeModel',
     pageSize: 10, 
     proxy: {
        url: '/schedule/home/EmployeeList',
        params: {
           'active_id': params
        },
        type: 'ajax',
        autoLoad: true,
        reader: 
        {
           root: 'data',
           totalProperty: 'total',
           id: 'id',
           type: 'json'
        },
        simpleSortMode: true 
     }
  });

  this.employeeBox = new Ext.form.ComboBox(
  {
     store: employeeStore,
     displayField: 'fullname',
     valueField: 'id',
     typeAhead: false,
     loadingText: 'Searching...',
     triggerAction: 'all',
     hiddenName: 'employee',
     name: 'Employee Name',
     fieldLabel: 'Employee',
     selectOnFocus: true,
     allowBlank: false,
     anchor: '98%',
     width: 370,
     enableKeyEvents: true,
     pageSize: true,
     minListWidth: 220,
     minChars: 2,
     labelWidth: this.labelWidth,
     resizable: false 
  }); 
```

我不知道缺少什么，但据我通过互联网搜索，我复制并测试了所有内容，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:08:26.187

如果你有远程存储，分页也应该是远程的。`pageSize`是唯一发送到服务器的参数，您应该在其中处理分页。在旁边`pageSize`，您还会看到 和 等`start`参数`limit`。

您可以在此处查看示例：[http](http://docs.sencha.com/ext-js/4-1/#!/example/form/forum-search.html) ://docs.sencha.com/ext-js/4-1/#! /example/form/forum-search.html 查看 firebug 或类似内容中的请求，您将看到类似 url这：`http://www.sencha.com/forum/topics-remote.php?_dc=1354611968514&query=form&page=2&start=10&limit=10&callback=Ext.data.JsonP.callback3`

如果您想在客户端进行分页，您可以通过自定义 AJAX 请求创建本地存储和预加载数据。

# mysql - UPDATE 影响的行数少于等效的 SELECT

> ID：13694730
> 
> 赞同：1
> 
> 时间：2012-12-04T01:27:36.727
> 
> 标签：mysql, join, sql-update

以下查询返回 2303 行：

```
SELECT a.* 
FROM cur_analises a
    INNER JOIN cur_materias_subsidiarias ms
    ON ms.materia_id = a.materia_id
    AND ms.subsidiaria_id IN(SELECT id FROM cur_subsidiarias WHERE cliente_id = 134)
    INNER JOIN cur_materias m
    ON m.id = a.materia_id
    INNER JOIN cur_clientes c
    ON c.carga_id = ms.subsidiaria_id
WHERE a.cliente_id = 134; 
```

我需要将`cliente_id`表中所有 2303 行的字段更新`cur_analises`为`cur_clientes.id`. 但是，根据 MySQL Workbench，当我尝试将该`SELECT`查询转换为以下查询时`UPDATE`，它只影响 2297 行：

```
UPDATE cur_analises a
    INNER JOIN cur_materias_subsidiarias ms
    ON ms.materia_id = a.materia_id
    AND ms.subsidiaria_id IN(SELECT id FROM cur_subsidiarias WHERE cliente_id = 134)
    INNER JOIN cur_materias m
    ON m.id = a.materia_id
    INNER JOIN cur_clientes c
    ON c.carga_id = ms.subsidiaria_id
SET a.cliente_id = c.id
WHERE a.cliente_id = 134; 
```

我不知道为什么它缺少 6 行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:35:31.067

您可能没有在查询中的某个点加入唯一值或一组值，从而导致结果集的非规范化。然后，当您进行更新时，它只会更新实际符合别名为 a 的表的连接条件的行。只有您可以知道查询中真正的非非规范化联接并修复它们。

# google-app-engine - Sync google contacts by group to a limited number of users

> ID：13694734
> 
> 赞同：0
> 
> 时间：2012-12-04T01:27:59.613
> 
> 标签：google-app-engine, google-profiles-api

I am trying to build an open-source python code hosted at GAE to sync contacts by group to a limited number of users. In a web interface users will be able to pick their group and whom it will be synced with.

I understand there is a lot of applications on market place withe the same functionality, but my organization is concerned about those provides selling contacts to 3rd parties. We are a non-profit organization, so the code could be hosted at google project or github for community contribution.

(sorry for the long intro)

*   How is the best way to start? is there tutorial available with similar functionality that I can expand?
*   What is the best way to compare two Contact kind elements? To see if they need to be sync.
*   Is there a last update on the Contact kind elements? In case I want to implement a last update wins?

thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:16:11.340

[我不知道任何专门用于同步和比较联系人的教程，但在https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)上有一个 Google Contacts API 的入门指南。

联系人作为 XML blob 发送，因此您可以通过解析两个联系人并查看其中的各个元素来比较两个联系人。我认为没有更好的方法可以做到这一点，但有图书馆可以为您处理。

使用 API 检索联系人时，会发送一个最后更新的字段作为联系人的一部分。它是一个标记为 的 XML 元素`<updated>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:09:31.747

```
how are you getting different user's contacts feeds?

i tried to save the tokens in the datastore when the
users grant the access, but when i get the token back
from datastore for 2 users at a time, after an hour
when the token expires, 
all tokens start working like the current users token
and i can only get current users contacts.

token = Get_Shared_User_Token(user_email)
contact_client = gdata.contacts.client.ContactsClient(source=USER_AGENT)
authorized_client = token.authorize(contact_client)

contacts_feed = authorized_client.GetContacts(q = query)

can you please tell how one can get any user's contacts? 
```

# vim - 按下键 p 时如何在 vim 中的光标前粘贴文本？

> ID：13694736
> 
> 赞同：1
> 
> 时间：2012-12-04T01:28:15.403
> 
> 标签：vim

在vim中，当我按下时`p`，文本被粘贴到光标之后？如何更改它以将文本粘贴到光标之前？

我的问题来自这种情况：文本文件中有数百行命题。我必须手动检查它们是否正确。如果某行是对的，我应该`*`在该行之前打一个标记，所以我希望我可以在光标之前粘贴文本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T01:30:47.070

`P`

注意`P`是大写的。

键入`:help p`提供了有关两者的更多信息`p`和`P`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T01:30:58.743

试试大写P。

小写`p`放在光标后。

大写`P`放在光标之前。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T06:56:30.943

这是*我*认为更适合您的用例的另一种方法：

```
I*<esc>   insert a * at the beginning of the line
j         move to next line
.         repeat last edit if the line is "right" 
```

之后，您的工作 ID 将如下所示`jjjj.j.jjj.jjj.j.j.jjjjjjj.jj.`。如果您更喜欢它，您可以自由使用`<down>`密钥。

此外，但这可能是作弊，如果“正确”行显示出某种模式，该`:global`命令将有所帮助：

```
:%g/pattern/norm I* 
```

# android - android app not available on Google Play

> ID：13694742
> 
> 赞同：-3
> 
> 时间：2012-12-04T01:28:52.703
> 
> 标签：android, google-play

> **Possible Duplicate:**
> [Publishing an App on Google Play](https://stackoverflow.com/questions/9809682/publishing-an-app-on-google-play)

Like two hours ago i uploaded and published my android application. But my application isnt available on Google Play. Im really worried because i cant find it using direct link with my app package name. ([https://market.android.com/details?id=com.xxx.xxx](https://market.android.com/details?id=com.xxx.xxx)) My package name begins with "com.", is that fine ?

Im searching my app from pc btw. On my dev page i see my app is available for 1600+ devices. My apk file is "active" and all other required fields im filled(like pic and description).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:13:42.053

没什么好担心的。
尝试。

```
https://play.google.com/store/apps/details?id=com.xxx.xxx 
```

你需要几个小时才能显示出来。我记得我的花了5个小时。其他一些应用程序可能需要几天时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:31:12.157

It can take more than a couple days for the app to be found by all devices.

# php - Getting variables outside of a javascript/HTML5 app

> ID：13694743
> 
> 赞同：1
> 
> 时间：2012-12-04T01:29:11.347
> 
> 标签：php, javascript, c++, html

How can I get the data stored in variables outside my window or tab of a foreign application? It is written in javascript and HTML5.Right now I have two ideas:

-Debbuging the browser as a plug-in.

-Scanning the browser memory

What would be easier? Is there another solution? Right now I am working with chrome and a facebook shooting game, and it would be a lot easier to do if the alternatives were done in js, php, or C++.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:32:16.107

有没有想过使用**Node.js**服务器端来执行操作？您可以使用 C++ 创建模块并使用客户端库（如**Socket.io**或其他）将其连接到部件。

[NodeJS 网站](http://nodejs.org/)

[NodeJS C++ 插件](http://nodejs.org/api/addons.html)

# java - Creating a random password generates a password with length 0: Blame JavaScript or Java Servlet?

> ID：13694745
> 
> 赞同：0
> 
> 时间：2012-12-04T01:29:26.540
> 
> 标签：java, javascript, servlets, passwords

When my users forget their passwords, they are sent to the page shown below. I generate a random password in JavaScript, encrypt it, and send both the plain text and md5 hash to a Servlet. The Servlet then e-mails the password to the user and stores the md5 hash in my database. This process works fine most of the time. But for some reason frequently generates an error where the generated password has length 0\.

I tested my JavaScript code separately and had it generate hundreds of passwords. None had length 0\. So where is this error coming from?

Here is the HTML form:

```
//This method returns a randomly generated mathy password.
function randomPassword(theForm) {
  first = ["Euler", "Erdos", "Newton", "Eucl1d", "Gauss", "H1lb3rt", "Cantor",    "Bernoulli", "PascaL"];
  second = ["Const", "Number", "Theorem", "Prime", "Ratio", "Lemma", "Postulate", "Method", "Algorithm"];
  symbol = ["!","@","#","$","%","^","&","*","_","+","-","?"];
  a = Math.floor(Math.random() * first.length);
  b = Math.floor(Math.random() * second.length);
  n = Math.floor(Math.random() * 10);
  style = Math.floor(Math.random() * 3);  //0,1, or 2
  if(style==0)   password = first[a] + n + second[b];
  else if(style==1)  password = first[a] + second[b] + n;
  else password = first[a] + second[b] + symbol[n];
  theForm['newPass'].value = password;
  theForm['passwordLog'].value = "style="+style + "  a=" + a + ", b=" + b+ ", n=" + n;
  hashField = theForm['passHash'];
  hashField.value = hex_md5(password);
  theForm.submit(); 
```

}

```
<body>
    <h2>You can reset your password below.</h2>
    <form action="ResetPassword" method="post" > 
        Enter your e-mail address:
        <input type="text" name="eMail" id="eMail" size="20"/> <br />
        <input type="button" value="Reset Password" onclick="randomPassword(this.form);" />
        <input type="hidden" id="passHash" name="passHash" /> 
        <input type="hidden" id="newPass" name="newPass" /> 
        <input type="hidden" id="passwordLog" name="passwordLog" /> 
    </form><br/>
    <strong>Attention Coaches: If you are having trouble logging into this system,
please contact the scorekeeper: llaspina@bethpage.ws </strong>
</body> 
```

And here is the Servlet that receives the form data sent from the above file:

```
@WebServlet(name = "ResetPasswordServlet", urlPatterns = {"/ResetPassword"})
public class ResetPasswordServlet extends HttpServlet {  
  protected void processRequest(HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    ConnectionPool pool = ConnectionPool.getInstance();
    java.sql.Connection con = pool.getConnection();
    String emailAddress = request.getParameter("eMail");
    String newPass = request.getParameter("newPass");
    String passHash = request.getParameter("passHash");
    String log = request.getParameter("passwordLog");
    try {
        Coach coach = null;
        ArrayList<Coach> coachList = MathTeamDAO.getAllCoaches(con);
        for(Coach c : coachList) {
            if(c.email.equals(emailAddress) ) {
                coach = c;
                break;
            }
        }
        out.println("<html><head><title>Scorekeeper Reset Password Servlet</title></head>");
        out.println("<body>");
        out.println("<h1>Reset Password Servlet</h1>");
        if(coach==null) {
            out.println("Your email address was not found in our database.<br/>" +
            "Please contact the scorekeeper or the secretary to gain access to the sytem.");
        }
        else {
            if(newPass == null || newPass.length()<3) {
                out.print("An error occurred while generating a random password.  The randomly generated password came back as ");
                out.print(newPass);
                out.println(" Please try to <a href=\"resetPassword.html\">reset your password</a> again.");
                String errorMsg = "An error was encountered while attempting a password reset. ";
                if(newPass==null)
                    errorMsg += "null newPass generated.";
                else
                    errorMsg += " The newPass had length " + newPass.length() + " and =" + newPass;
                if(log!=null)
                    errorMsg += ("\n" + log);
                if(UtilityServlet.emailAnError(coach,errorMsg, this.getServletName() + " at " + this.getServletName()))
                    out.println("<br/>The scorekeeper was just informed of this error through email, so you do not need to report it.");
            }
            else {
                out.println("<h3>Check your email for your new password and directions for signing into the scorekeeper system.</h3>");
                out.print("Sending new password to " + coach.email + "<br/>");
                ChangePasswordServlet.changePassword(con, coach.schoolID, passHash);
                School herSchool = MathTeamDAO.getSchoolByCoach(con, coach);
                String emailServerMessage = ChangePasswordServlet.sendPasswordEmail(coach, herSchool.shortName, newPass);
                if(herSchool!=null) {
                    out.print("<br/>The username for " + herSchool.fullName);
                    out.print(" is <strong>");
                    out.print(herSchool.username);
                    out.println("</strong><br/>");
                }
                out.print(emailServerMessage);
            }
            out.flush();
        }
        out.println("<br/>Return to <a href=\"login.jsp\" >login page.</a>");
        out.println("</body></html>");
    } 
    catch(java.sql.SQLException utoh) {   }
    finally { 
        pool.freeConnection(con);
        out.close();
    }
} 
```

Notice that I am having error messages sent to myself if the password is null or too short. This happens fairly regularly and they always have length 0\. Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:42:14.617

```
else //if(style==2)  password = first[a] + second[b] + symbol[n];
theForm['newPass'].value = password; 
```

有了评论，`else`现在影响`theForm['newPass'].value = password;`，这意味着不会设置该值，从而导致密码为空。

这就是为什么`{}`即使您只有一个语句也建议使用 using 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:37:58.377

在这一行中间的注释：

```
else //if(style==2)  password = first[a] + second[b] + symbol[n]; 
```

在大约三分之一的情况下，您将获得未定义的密码......

# c++ - C++：与先前的声明冲突？

> ID：13694746
> 
> 赞同：6
> 
> 时间：2012-12-04T01:29:32.097
> 
> 标签：c++, declaration, conflict

我正在处理这个任务，并且我不断收到一个明显先前声明的方法的错误。这是.h文件：

```
#ifndef DLLIST_H
#define DLLIST_H

#include <iostream>
#include <fstream>
#include <cstddef>
#include "DListNode.h"

typedef int ItemType;

class DLList
{
private:
  friend std::ostream & operator<< (std::ostream & out, DLList & other);
  int size;
  int * head;
  int * tail;

  void _copy(const DLList * toCopy);
  void _dealloc();

public:
  DLList();
  DLList(const DLList & toCopy);

  ~DLList();

  DLList & operator=(const DLList & toCopy);

  int size();
  void append(ItemType item);
  void insert(int index, ItemType item);
  ItemType pop(int index);
  ItemType pop();
  const DListNode & operator[] (int idx);

};

std::ostream & operator<< (std::ostream & out, const DLList & d);

#endif 
```

该错误在 触发`int size();`，表示它与先前的声明冲突。我知道这通常会由我多次包含此头文件引起，但我只是看不到它发生在哪里。这些是项目中所有文件的包含语句：

```
#include "DLList.h" // DLList.cpp
=======================================
#include "DListNode.h" // DListNode.cpp
=======================================
#include <iostream> // DListNode.h
#include <fstream>
#include <cstddef>
=======================================
#include "DLList.h" // This is the main test file
#include "DListNode.h"
#include <iostream> 
```

我可以看到 DListNode.h 在技术上被包含两次，但 DLList.h 没有被包含超过一次。我只是犯了一个愚蠢的错误而没有看到它吗？（可能是这种情况）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T01:32:05.750

这是因为您有一个名为**size的****成员变量**。您可以通过重命名其中一个来解决此问题。

 **```
int size;
...
int size(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-14T12:42:31.303

c++中有一种对象是可调用的。如果您的类定义中的变量是可调用的，那么当您调用 DLList::size() 时会令人困惑。这应该是c++编译器禁止声明同名函数和变量的原因。**

# c# - 我应该创建类还是创建 if？

> ID：13694750
> 
> 赞同：0
> 
> 时间：2012-12-04T01:29:55.773
> 
> 标签：c#, .net, windows, coding-style

我有一个情况：

我需要在课堂上做点什么。

什么应该更有效，以这种方式修改方法，使用 IF 或为每个动作创建方法？

```
public value Value(int command)
        {
            if (command == 1)
            {
                DoSomething1();
            }

            if (command == 2)
            {
                DoSomething2();
            }
            else
            {
                return empty();
            }

        } 
```

将会有 50 多个这样的命令。在执行性能和可执行文件的大小方面有什么更好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:35:23.010

在高层次上，您似乎正在尝试实现某种动态调度系统？或者您只是想在没有任何多态性的情况下执行指定的操作？很难说。

无论如何，根据您给出的示例， switch 块将是性能最高的，因为 JIT 编译器将其转换为有效的哈希表查找而不是一系列比较，所以只需执行以下操作：

```
enum Command { // observe how I use an enum instead "magic" integers
    DoSomethingX = 1,
    DoSomethingY = 2
}

public Value GetValue(Command command) {
    switch(command) {
        case Command.DoSomethingX: return DoSomethingX();
        case Command.DoSomethingY: return DoSomethingY();
        default: return GetEmpty();
    }
} 
```

我还注意到该`switch`块也意味着您可以获得更紧凑的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T01:35:34.710

这不是一个性能问题，而是一个范式问题。

在 C# 中，方法应该是任务的封装。您在这里拥有的是一大堆任务，每个任务都不相关。这不应该是单一的方法。想象一下，将来尝试保持这种方法。想象一下尝试调试它，想知道在调用每个位时您在方法中的哪个位置。

如果你把它分开，你的生活会容易得多，尽管性能可能没有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T01:36:59.460

尽管单独的方法在性能方面几乎肯定会更好，但您不太可能注意到差异。但是，拥有单独的方法肯定会大大提高可读性，这一点更为重要。

# c - 取消引用 void 指针

> ID：13694753
> 
> 赞同：11
> 
> 时间：2012-12-04T01:30:11.363
> 
> 标签：c, arrays, void-pointers, dereference

为了更好地理解[这篇](https://stackoverflow.com/questions/13618012/creating-a-generic-circular-buffer)文章中给出的答案，有人可以向我解释以下循环缓冲区实现是否可行，如果不可行，为什么不可以。

```
#define CB_TYPE_CHAR     0
#define CB_TYPE_FLOAT    1

...

typedef struct CBUFF
{
    uint16 total;       /* Total number of array elements */
    uint16 size;        /* Size of each array element */
    uint16 type;        /* Array element type */
    uint16 used;        /* Number of array elements in use */
    uint16 start;       /* Array index of first unread element */
    void *elements;     /* Pointer to array of elements */
} CBUFF;

...

void cbRead(CBUFF *buffer, void *element)
{
    if (buffer->type == CB_TYPE_CHAR)
    {
    /* The RHS of this statement is the problem */
        *(char*)element = *(buffer->elements[buffer->start]);
    }

    /* Other cases will go here */

    buffer->start = (buffer->start + 1) % buffer->total;

    --buffer->used;
} 
```

我知道 LHS 必须强制转换为 char 以便我可以取消引用 void 指针。我也明白这个代码片段：

```
buffer->elements[buffer->start] 
```

给出 elements 数组的 'buffer->start' 元素的地址，我也想取消引用以获取该地址的内容。或者至少这是我从 K&R 那里得到的。

鉴于这一切，我如何告诉编译器该地址处的内存内容是一个字符，并且可以取消引用它？这里发生了一些事情，我只是不明白。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T01:48:08.947

`buffer->elements`也是 a`void *`所以你需要先转换它，然后才能对它做任何事情：

```
*(char*)element = ((char *)buffer->elements)[buffer->start]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T01:35:18.610

> 鉴于这一切，我如何告诉编译器该地址处的内存内容是一个字符，并且可以取消引用它？

好吧，您已经在该行的 LHS 上完成了它：

```
*(char*)element = *(buffer->elements[buffer->start]); 
```

为了解除防御`buffer->elements[n]`，您还需要使用它。

```
*(char*)element = *((char*)buffer->elements)[buffer->start]; 
```

现在的问题是该演员阵容是否正确。我不能告诉你，因为你没有发布`buffer->elements`.

# c++ - is there any thing wrong with include , why i cannot find strlen()

> ID：13694755
> 
> 赞同：0
> 
> 时间：2012-12-04T01:30:23.380
> 
> 标签：c++

```
#include "Q1-VerifyUniqueCharInString.h"
#include <cstring>
#include <stdio.h>
#include <string.h>

using namespace std;

bool isUniqueChar(string str)
{

    int length=strlen(str),i=0;
    bool tab[] = new bool[length];
    if (length > 0xff) {
        return false;
    }
    for (; i<length;++i) {
        if (str[i]) {
            return false;
        }
        tab[str[i]]=true;
    }
    return true;
} 
```

this is my code, and i use gcc+xcode....why there is always tell me cannot find strlen, i use both cstring and string.h...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:32:03.403

`strlen`适用于 a `const char*`，不适用于 a `string`。您可以（并且应该）改为使用`str.length()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:33:55.513

c 字符串和 c++ 字符串库彼此非常不同，不能混用。对此的解决方法是将字符串视为 ac 字符串：

```
strlen(str.c_str()); //convert string into char * 
```

c++ 字符串保存和内部 c 字符串，便于移植到 c 代码和 c 方法中。

还需要注意的是`cstring`，`string.h`引用同一个文件，c 是组织 c++ 库和 c 库的 c++ 方法

```
#include <cstdio>
#include <cstdlib> //could be stdlib.h, but used to show that this lib is a c lib
#include <csting>  //same as string.h
#include <string>  //c++ string lib 
```

# c# - adding to listboxes. I keep getting an error under the Items in tabPage1.Items.Add

> ID：13694757
> 
> 赞同：1
> 
> 时间：2012-12-04T01:30:29.533
> 
> 标签：c#

Error 1 'System.Windows.Forms.TabPage' does not contain a definition for 'Items' and no extension method 'Items' accepting a first argument of type 'System.Windows.Forms.TabPage' could be found (are you missing a using directive or an assembly reference?)

```
private void btnReadandPrint_Click(object sender, EventArgs e)
    {
        reader = new StreamReader(openFileDialog1.FileName);

        ResetFile();

        do
        {
            s += reader.ReadLine() + "";
            counter++;

            if (counter % 5 == 0)
            {
                tabPage1.Items.Add("Line" + counter + ":" + s);
                s = "";
            }
        } while (!reader.EndOfStream);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:35:36.853

TabPage 不是列表框。向页面添加一个列表框并向其中添加项目。

# amazon-sqs - Amazon SQS End of Queue Detection

> ID：13694758
> 
> 赞同：0
> 
> 时间：2012-12-04T01:30:36.013
> 
> 标签：amazon-sqs

I was wondering if there was a best practice for notifying the end of an sqs queue. I am spawning a bunch of generic workers to consume data from a queue and I want to notify them that they can stop processing once they detect no more messages in the queue. Does sqs provide this type of feature?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T08:44:24.643

您的意思是“生产者有没有办法通知消费者它已完成发送消息？” . 如果是这样，那么不，没有。如果消费者调用“ReceiveMessage”并没有得到任何回复，或者“ApproximateNumberOfMessages”返回零，这并不能保证不再发送消息，甚至没有消息在传输中。并且生产者不能发送任何类型的“流结束”消息，因为只有一个消费者会收到它，而且它可能会乱序到达。即使您使用单独的通知机制（例如 SNS 主题）来通知所有消费者，也不能保证在所有消息传递之前不会到达 SNS 通知。

但是，如果您只是希望您的工作人员池在队列中没有消息时退出，那么请考虑将队列上的“ReceiveMessageWaitTimeSeconds”属性设置为其最大值 20 秒。当没有更多消息要处理时，ReceiveMessage 调用将阻塞长达 20 秒，以查看消息是否到达，而不是立即返回。

如果您担心释放资源，您可以让管理线程池查询 ApproximateNumberOfMessages 的任何东西定期扩展/缩小您的线程池。如果这样做，请注意返回的数字是 Approximate，即使 ApproximateNumberOfMessages 返回零，您也应该始终假设队列中可能还有一条或多条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:58:36.957

通过查看 SQS 的 right_aws ruby​​ gem 源代码，我发现队列中有 ApproximateNumberOfMessages 属性。您可以使用标准 API 调用请求。

您可以在此处找到更多信息，包括示例：

[http://docs.amazonwebservices.com/AWSSimpleQueueService/latest/APIReference/Query_QueryGetQueueAttributes.html](http://docs.amazonwebservices.com/AWSSimpleQueueService/latest/APIReference/Query_QueryGetQueueAttributes.html)

有关如何使用 ruby​​ 中的 right_aws gem 执行此操作的更多信息，请查看：

*   [https://github.com/rightscale/right_aws/blob/master/lib/sqs/right_sqs_gen2_interface.rb#L187](https://github.com/rightscale/right_aws/blob/master/lib/sqs/right_sqs_gen2_interface.rb#L187)
*   [https://github.com/rightscale/right_aws/blob/master/lib/sqs/right_sqs_gen2_interface.rb#L389](https://github.com/rightscale/right_aws/blob/master/lib/sqs/right_sqs_gen2_interface.rb#L389)

# php - Twitter API on Magento CMS error

> ID：13694761
> 
> 赞同：0
> 
> 时间：2012-12-04T01:30:58.787
> 
> 标签：php, magento, twitter, file-get-contents, rate-limiting

I have a twitter feed in the sidebar of my magento built site, the following PHP calls to the twitter API and posts the feed as a list:

```
 <?php
        $feedUrl = 'https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=ecpublish&count=4';
        $feedXml = file_get_contents($feedUrl);
        try {
            $feedXml = new SimpleXMLElement($feedXml);
        } catch (Exception $e) {
            echo 'Caught exception: ',  $e->getMessage(), "\n";
        }

        ?>
        <ul>
                <?php foreach($feedXml[0]->channel->item as $elName => $child): ?>          
                <li>
                    <a href="<?php echo (string)$child->link; ?>" title="" target="_blank"><?php echo substr((string)$child->title, 11); ?></a>
                </li>
            <?php endforeach ?>                 
        </ul> 
```

Unfortunately I'm getting an error in my system.log that reads as follows:

> 2012-12-04T01:02:33+00:00 ERR (3): Warning: file_get_contents(https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=ecpublish&count=4) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in /clientdata/apache-www/e/c/ecpublishing.com.au/www/app/design/frontend/default/ecp/template/page/sidebar/twitter.phtml on line 9

I have tried fixes such as urlencode(), cURL, checked PHP version and fopen status, nothing is helping me out. I have a feeling it may be due to the twitter rate limiting: [https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting) but can't work out why this would be.

My site is: [http://ecpublishing.com.au](http://ecpublishing.com.au)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:33:27.243

好的，我的主机似乎没有接受 get_file_contents，所以我重试了一个 cURL 函数并让它正常工作。下面的代码：

```
<?php            
        $url = 'https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=ecpublish&count=4';
        function get_data($url) {
            $ch = curl_init();
            $timeout = 5;
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
            $data = curl_exec($ch);
            curl_close($ch);
            return $data;
            }
            $returned_content = get_data('https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=ecpublish&count=4');
            try {
            $returned_content = new SimpleXMLElement($returned_content);
                } catch (Exception $e) {
            echo 'Caught exception: ',  $e->getMessage(), "\n";
            }

        ?>
        <ul>
                <?php foreach($returned_content[0]->channel->item as $elName => $child): ?>          
                <li>
                    <a href="<?php echo (string)$child->link; ?>" title="" target="_blank"><?php echo substr((string)$child->title, 11); ?></a>
                </li>
            <?php endforeach ?>                 
        </ul> 
```

# windows - 如何在周日复制到文件夹但每隔一天删除一次？

> ID：13694765
> 
> 赞同：0
> 
> 时间：2012-12-04T01:31:13.043
> 
> 标签：windows, batch-file, xcopy

如果是星期天，如何将文件从 D:\WindowsImageBackup\ 移动/复制到 D:\Included\，如果是其他任何一天，如何删除 D:\Included\？

场景是：每天运行一次到远程服务器的自动备份。我希望某个文件每周仅在周日备份一次（这是 Windows 映像备份）。我已经排除了文件所在的文件夹 (D:\WindowsImageBackup)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:33:06.760

你可以很容易地做到这一点：

```
setlocal enableextensions enabledelayedexpansion
set dow=%date:~0,3%
if "%dow%" equ "Sun" xcopy /y "D:\WindowsImageBackup\*.* "D:\Included\" & goto eof
echo del "D:\Included\*.*" /y
:eof 
```

请注意，这仅在您的系统语言为英语时才有效，因为它会将 day 部分`Date`与 value进行字面比较`Sun`，当然还没有本地化。

另外，请参阅我对您的问题的评论，这对于计划任务可能更好（因为错误会停止它并写入事件日志）。

# html - 为什么 nth-of-type/nth-child 不适用于嵌套元素？

> ID：13694775
> 
> 赞同：13
> 
> 时间：2012-12-04T01:32:25.203
> 
> 标签：html, css, css-selectors, pseudo-class

我正在尝试更改 div 中奇数 div 的样式。出于某种原因，`nth-of-type(odd)`当它位于另一个 div 中时，它会影响我的所有 div。这是我的常规 div 和奇数 div 的代码：

```
.video-entry-summary {
  width: 214px;
  height: 210px;
  margin-left: 10px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
}

.video-entry-summary:nth-of-type(odd) {
  width: 214px;
  height: 210px;
  margin-left: 0px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
  background: #ccc;
}
```

```
<div id="post-501" class="post-501 post type-post status-publish format-standard hentry category-moto-dz-films tag-news-sub-2">
  <div class="video-entry-summary">
    video 1
  </div>
</div>

<div id="post-240" class="post-240 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 2
  </div>
</div>

<div id="post-232" class="post-232 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 3
  </div>
</div>

<div id="post-223" class="post-223 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 4
  </div>
</div>
```

出于某种原因，`nth-of-type`当包裹在我的 div 中时它不起作用，但是当它们没有被包裹在任何 div 中时它确实起作用。

**未包含在 div 中时的工作版本：**

```
.video-entry-summary {
  width: 214px;
  height: 210px;
  margin-left: 10px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
}

.video-entry-summary:nth-of-type(odd) {
  width: 214px;
  height: 210px;
  margin-left: 0px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
  background: #ccc;
}
```

```
<div class="video-entry-summary">
  video 1
</div>

<div class="video-entry-summary">
  video 2
</div>

<div class="video-entry-summary">
  video 3
</div>

<div class="video-entry-summary">
  video 4
</div>
```

​如何使初始代码与上述代码相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T01:42:21.340

`:nth-of-type()`与它们的相似之处`:nth-child()`在于它们都必须来自同一个父级。如果您需要那些 wrapper `div`，请改用`:nth-of-type()`这些 wrapper ：

```
div.post:nth-of-type(odd) .video-entry-summary {
    width:214px; 
    height:210px; 
    margin-left:0px;
    float:left;
    position:relative; 
    overflow:hidden; 
    border:1px solid black; 
    background:#ccc; 
} 
```

如果所有兄弟姐妹都是`.post`，[`:nth-child()`](http://www.w3.org/TR/selectors/#nth-child-pseudo)请改为使用以防止混淆[真正的](http://www.w3.org/TR/selectors/#nth-of-type-pseudo)[含义`:nth-of-type()`](http://www.w3.org/TR/selectors/#nth-of-type-pseudo)：

```
.post:nth-child(odd) .video-entry-summary {
    width:214px; 
    height:210px; 
    margin-left:0px;
    float:left;
    position:relative; 
    overflow:hidden; 
    border:1px solid black; 
    background:#ccc; 
} 
```

```
.video-entry-summary {
  width: 214px;
  height: 210px;
  margin-left: 10px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
}

.post:nth-child(odd) .video-entry-summary {
  width: 214px;
  height: 210px;
  margin-left: 0px;
  float: left;
  position: relative;
  overflow: hidden;
  border: 1px solid black;
  background: #ccc;
}
```

```
<div id="post-501" class="post-501 post type-post status-publish format-standard hentry category-moto-dz-films tag-news-sub-2">
  <div class="video-entry-summary">
    video 1
  </div>
</div>

<div id="post-240" class="post-240 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 2
  </div>
</div>

<div id="post-232" class="post-232 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 3
  </div>
</div>

<div id="post-223" class="post-223 post type-post status-publish format-standard hentry category-videos">
  <div class="video-entry-summary">
    video 4
  </div>
</div>
```

# java - Postgres 触发器更新 Java 缓存

> ID：13694778
> 
> 赞同：2
> 
> 时间：2012-12-04T01:32:50.697
> 
> 标签：java, postgresql, stored-procedures, curl, triggers

我有一个 Java Web 应用程序（WAR 部署到 Tomcat），它在内存中保留一个缓存（`Map<Long,Widget>`）。我有一个包含`widgets`表的 Postgres 数据库：

```
widget_id | widget_name | widget_value
(INT)       (VARCHAR 50)  (INT) 
```

`Widget`为了POJO 和表记录之间的 O/R 映射`widgets`，我使用的是 MyBatis。我想实现一个解决方案，只要表中的值发生变化，Java 缓存（地图）就会实时更新`widgets`。我*可以*有一个轮询组件，例如每 30 秒检查一次表，但轮询在这里感觉不是正确的解决方案。所以这就是我的提议：

1.  编写一个调用存储过程的 Postgres 触发器 ( `run_cache_updater()`)
2.  该过程依次运行一个 shell 脚本 ( `run_cache_updater.sh`)
3.  脚本 base-64 对更改`widgets`的记录进行编码，然后将编码的记录卷曲到 HTTP URL
4.  Java WAR 有一个 servlet 侦听 cURLed URL 并处理`HttpServletRequests`发送给它的任何内容。它使用 base-64 解码记录并以某种方式将其转换为`Widget`POJO。
5.  `Map<Long,Widget>`使用正确的键/值更新缓存 ( )。

这个解决方案*感觉*很尴尬，所以我首先想知道那里的任何 Java/Postgres 大师将如何处理这种情况。在这里投票是更好/更简单的选择吗（我只是很固执吗？）我忽略了另一个/更好/更标准的解决方案吗？

如果不是，并且此解决方案是将更改的记录从 Postgres 推送到应用程序层的标准方式，那么我会窒息如何编写触发器、存储过程和 shell 脚本，以便将整个`widgets`记录传递到 cURL 语句中. 在此先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:16:33.350

我无法与 MyBatis 交谈，但我可以告诉你 PostgreSQL 内置了一个发布/订阅系统，它可以让你用更少的黑客行为来做到这一点。

首先，设置一个触发器`widgets`，在每个插入、更新和删除操作上运行。让它提取主键和. （嗯，从 PL/pgSQL，你可能想要。）如果事务提交，PostgreSQL 将广播你的通知，使通知和相应的数据更改对其他连接可见。[`NOTIFY`](http://www.postgresql.org/docs/current/static/sql-notify.html)`widgets_changed, id``PERFORM pg_notify(...)`

在客户端中，您需要运行一个专门用于保持此地图最新的线程。它将连接到 PostgreSQL，开始排队通知，填充地图，并等待通知到达。（检查通知显然[涉及轮询 JDBC 驱动程序](http://jdbc.postgresql.org/documentation/91/listennotify.html)，这很糟糕，但并不像您想象的那么糟糕。请参阅[PgNotificationPoller](http://wiki.postgresql.org/wiki/PgNotificationPoller)了解具体实现。）一旦您看到通知，查找指示的记录并更新您的地图。请注意，在初始 之前很重要，因为记录可以在和之间更改。[`LISTEN`](http://www.postgresql.org/docs/current/static/sql-listen.html)`widgets_changed``SELECT * FROM widgets``LISTEN``SELECT *``SELECT *``LISTEN`

这种方法不需要 PostgreSQL 了解有关您的应用程序的任何信息。它所要做的就是发送通知；您的应用程序会完成其余的工作。没有 shell 脚本、HTTP 和回调，让您无需重新配置数据库即可重新配置/重新部署应用程序。它只是一个数据库，可以备份、恢复、复制等，没有额外的复杂性。同样，您的应用程序也没有额外的复杂性：它所需要的只是与您已经拥有的 PostgreSQL 的连接。

# html - 在谷歌浏览器中看不到徽标，但在 IE 和 Firefox 中可以看到

> ID：13694780
> 
> 赞同：0
> 
> 时间：2012-12-04T01:33:10.677
> 
> 标签：html, google-chrome, css

标题说明了一切，我个人看不出问题是什么，我怀疑可能是 CSS 的问题，但在 IE 和 Firefox 中看起来还不错，我不明白为什么 chrome 会挣扎？

我试过添加

```
#logo img
{
width: 50%;
float:left;
} 
```

尝试直接设置图像样式，仍然没有运气

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css.css"/>
<title>Welcome!</title>
</head>

<body>
<div id="header"> 
<div id ="logo">
<img src="Media/Images/logo.svg" type="image/svg+xml" width="75%" height="142px;" />
</div>

<div id="icons">
    <img src="Media/Images/EnvelopeIcon.png" alt="Envelope Icon" height="25" width="30">
    <p>M015734a@student.staffs.ac.uk</p>
    <div class="clear">     
    </div>
    <img src="Media/Images/PhoneIcon.png" alt="Envelope Icon" height="25" width="30" />
    <p> 07904921417</p>
    <div class="clear">     
    </div>
    <img src="Media/Images/HouseIcon.png" alt="Envelope Icon" height="25" width="30">
        <p>Stafford, UK</p>
    <div class="clear">     
    </div>              
<div class="clear">     
</div>
</div>
</div>

<nav>
<div id ="NavBG">
safsafnsakn
</div>
</nav>
</body>
</html>

#logo
{
    width: 50%;
    float:left;

}

#logo img
{
    width: 50%;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:07:18.007

似乎有解决此问题的方法。您可以尝试使用`<object>`而不是`<img>`

```
<object height="100%" width="100%" data="Media/Images/logo.svg" type="image/svg+xml">
</object> 
```

另请参阅以下链接了解更多详情。

[http://e.metaclarity.org/52/cross-browser-svg-issues/](http://e.metaclarity.org/52/cross-browser-svg-issues/)
[http://henkelmann.eu/2010/12/16/display_svg_image_same_size_in_decent_browsers](http://henkelmann.eu/2010/12/16/display_svg_image_same_size_in_decent_browsers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:48:27.790

您不能只将 CSS 附加到文件的末尾。它必须是内联的，作为外部文件包含在内，或者放在`style`头部的标签内。

尝试将 CSS 移动到头部，如下所示：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css.css"/>
<title>Welcome!</title>
<style>
#logo
{
    width: 50%;
    float:left;

}

#logo img
{
    width: 50%;
    float:left;
}
</style>
</head> 
```

如果您无法解决徽标未出现在 Chrome 中的问题，请在[JSFiddle](http://jsfiddle.net/)中重新创建您的文件，并附上图片和您的外部 css.css 文件，并在此处发布链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:41:31.700

请使用不同类型的图像。检查链接

```
http://code.google.com/p/chromium/issues/detail?id=119693 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:44:25.747

您的问题可能在`img`标签中：

```
<img src="Media/Images/logo.svg" type="image/svg+xml" width="75%" height="142px;" /> 
```

您不能使用“高度”或“宽度”属性指定单位 - 我将完全删除它们并使用 CSS 设置图像样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T09:49:41.370

更改您的代码

```
链接 rel="icon" type="image/x-icon" href="/favicon.ico"
```

到

```
链接 rel="icon" type="image/x-icon" href="/favicon.png"
```

还将图像重命名为 .png。由于 Chrome 有时不会选择 ico 图标。这个对我有用。

# android - onContextMenuClosed 用于扩展 DialogFragment 的类

> ID：13694782
> 
> 赞同：0
> 
> 时间：2012-12-04T01:33:38.823
> 
> 标签：android, android-dialogfragment, android-contextmenu

我有一个扩展 DialogFragment 的类，在这里我展示了一个 ListView。我希望此列表中的项目有一个 LongPress 选项。所以我已经覆盖了`onCreateContextMenu`and `onContextItemSelected`。我的上下文菜单出现了正确的选项。

我遇到的问题是我无法`getDialog().dismiss()`从`onContextItemSelected`方法中调用。

从扩展 DialogFragment 的类的方法中关闭扩展 DialogFragment 的类的正确方法是什么`onContextItemSelected`？

```
/*
 * (non-Javadoc)
 * @see android.support.v4.app.Fragment#onCreateContextMenu(android.view.ContextMenu, android.view.View, android.view.ContextMenu.ContextMenuInfo)
 */
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo)
{
    if(view.getId() == listView.getId())
    {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
        Industry industry = (Industry) listView.getItemAtPosition(info.position);

        menu.setHeaderTitle(industry.name);
        menu.add(Menu.NONE, USE_INDUSTRY, 0, USE_INDUSTRY_TEXT);
    }
}

/*
 * (non-Javadoc)
 * @see android.support.v4.app.Fragment#onContextItemSelected(android.view.MenuItem)
 */
@Override
public boolean onContextItemSelected(MenuItem item)
{
    if(item.getItemId() == USE_INDUSTRY)
    {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
        Industry industry = (Industry) listView.getItemAtPosition(info.position);

        MyApplication.BUS.post(new IndustryEvent(industry.ID, -2));
        getDialog().dismiss();
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:09:14.693

我找到了答案，`onContextItemSelected()`在我的对话片段中没有被调用。这意味着`getDialog().dismiss()`没有被调用。

我能找到的唯一方法是设置`onMenuItemClickListener`MenuItem 并在那里注册点击。下面是我使用的最终代码。

```
/*
 * (non-Javadoc)
 * @see android.support.v4.app.Fragment#onCreateContextMenu(android.view.ContextMenu, android.view.View, android.view.ContextMenu.ContextMenuInfo)
 */
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo)
{
    if(view.getId() == listView.getId() && isIndustryLevel)
    {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
        Industry industry = (Industry) listView.getItemAtPosition(info.position);

        menu.setHeaderTitle(industry.name);
        menu.add(Menu.NONE, USE_INDUSTRY, 0, USE_INDUSTRY_TEXT);
        menu.getItem(0).setOnMenuItemClickListener(new OnUseIndustryButtonClick());
    }
}

private class OnUseIndustryButtonClick implements MenuItem.OnMenuItemClickListener
{
    /*
     * (non-Javadoc)
     * @see android.view.MenuItem.OnMenuItemClickListener#onMenuItemClick(android.view.MenuItem)
     */
    @Override
    public boolean onMenuItemClick(MenuItem item) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
        Industry industry = app.industries.get(info.position);

        MyApplication.BUS.post(new IndustryEvent(industry.ID, -2));
        getDialog().dismiss();
        return true;
    }       
} 
```

# arrays - 对自动完成小部件内的数组的 ajax 指令一无所知

> ID：13694789
> 
> 赞同：0
> 
> 时间：2012-12-04T01:34:41.277
> 
> 标签：arrays, jquery, firebug, jquery-autocomplete

我在 source: 选项中有一个使用 geonames.org 城市的自动完成功能，并且想要操纵结果中的一些数组。我有一个“硬编码”测试版本正在运行，但是在操作数组变量以将其变成有用的东西时遇到了麻烦。

问题的简短陈述是我无法让警报语句输出可读字符串。我得到 [object, Object] 类型的输出。我需要数组中的可读字符串才能使其他代码（未显示）工作。但其他问题是：Firebug 控制台输出没有发生，并且控制台给了我以下错误语句 - 错误：访问属性 'item.autocomplete' 的权限被拒绝 - 来自 jQuery 的第 2 行。硬编码测试不会发生这种情况。这是我第一次使用 .grep，我对 .map 不太满意，所以我很确定问题出在这 3 个部分的数组操作上。

这是一些相关的代码。所有的变量都被声明了，但我没有在下面展示所有的声明。

```
citiesWithBoroughs = //a global array variable, populated in a prior select: option

source: function (request, response){
    $.ajax({
        success: function ( data ){
            var geonamesResponse=$.map(data.geonames, function (item){
                return {
                    label: item.name //and others
                }
            }
            alert(citiesWithBoroughs + "," + citiesWithBoroughs.length + "|cWB2" ); //displays correct info
            var noBoroughs=$.grep( geonamesResponse, function ( item, i ) {
                for (var i=0; i < citiesWithBoroughs.length; i++ )
                if( item.label === citiesWithBoroughs[i] ){ //compare  geonamesResponse to each citiesWithBoroughs
                    console.log(citiesWithBoroughs[i]); //nothing in Console
                    return false; //drop any matches out of the geonamesResponse array
                }
                noBoroughs = $.map( data.geonames, function (item){ return item.label; });
                    console.log(noBoroughs); //nothing appears in Console
                return true;        
            });
        alert(noBoroughs.length + "," + citiesWithBoroughs.length + "," + geonamesResponse.length + "|3lengths" ); //correct info
        alert(noBoroughs + "|nB" ); //in test, shows correct number of [object,Object]  but no data
        if( noBoroughs.length != geonamesResponse.length ){
            var dropdownsCityWithBoroughs = $.grep( geonamesResponse, function ( item, i ) {
                for (var i=0; i<citiesWithBoroughs.length; i++ )
                if(item.label === citiesWithBoroughs[i]){return false;}
                return true;
            }, true )//true inverts grep to return the has-Boroughs city in the dropdown
            alert(dropdownsCityWithBoroughs + "|dCWB"); //contains object, Object, but shows no data 
            }                
        }            
    }
} 
```

我是新手，所以请给出具体的意见和代码。我没有很好地遵循一般说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:37:54.483

我的问题的简短陈述是我无法读取包含数组的警报输出。结果 JSON.stringify() 解决了这个问题。其他问题，例如没有显示的 Console.log 语句继续，但是当警报起作用时，我可以处理那个神秘的问题。

# javascript - 如何将 touchstart eventListener 添加到元素？我正在创建一个移动网站（专门用于移动 Safari），我想为一个选择元素添加一个 touchStart eventListener。我该怎么做？我可以很容易地为 div 做到这一点（然后像按钮一样），即 document.getElementById("start").addEventListener("touchstart", startBtn, true); 然后，当单击 div 时，这将非常快速地触发 startB

ID：13694792

赞同：1

时间：2012-12-04T01:35:05.987

标签：javascript, html

# excel - 基于另一个单元格为 Excel 图表的点着色

> ID：13694794
> 
> 赞同：0
> 
> 时间：2012-12-04T01:35:10.427
> 
> 标签：excel, graph, charts, data-visualization, discretization

我想以图形方式表示一些实值数据是如何被离散化/分箱的。我有一个从 1 到 35 的实数数组。对于每个值，我都有一个在 -2 到 19 范围内的相应自然数。我想在基于哪个颜色的数轴上显示所有实数自然数一一对应。这在excel中可能吗？如果没有，我可以用其他东西来完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:28:35.010

由于您没有 y 轴，因此我将这样做：创建一个 Excel 电子表格，其中 A 列中的数字为 1-35，第 1 行顶部的数字为 -2 到 19。

在正确数字与正确颜色值的每个交集处，输入 0。

使用带有点标记的折线图绘制此范围。根据表格中的分布，您最终会得到沿 x 轴具有不同颜色和形状的多个点。现在您应该完全移除 y 轴（无线、无填充、无标签、无刻度）、网格线和图例。

最后，我将编辑各种数据系列，删除线条（留下标记），并将所有线条标记设置为使用相同的形状，只有颜色不同。 ![在此处输入图像描述](../Images/b087e201d29612f96c95d8b3b8b2476f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:24:02.703

您可以在 Excel 图表中修改条件格式。查看本教程中的“条件格式折线图”示例：

[Excel图表的条件格式](http://peltiertech.com/WordPress/conditional-formatting-of-excel-charts/)

# java - 将此java代码转换为javascript

> ID：13694801
> 
> 赞同：-5
> 
> 时间：2012-12-04T01:35:35.257
> 
> 标签：java, javascript, json

我使用所有方法将数组从 php 传输到 js，但最好的解决方案是使用

```
JSON_encode($arr); 
```

并且所有解码它的方法都失败了最后我决定手动进行它在JavaScript中接收到的数据是这样的：[“208”，“2812”]通过这个java代码转换为整数数组，但我不知道如何将其转移到 javascript

```
String arr = "[\"208\",\"2507\"]";

//this its the output of him ["208","2507"]

String[] items = arr.replaceAll("\\[", "").replaceAll("\\]", "").split(",");

int[] results = new int[items.length];

for (int i = 0; i < items.length; i++) {

        results[i] = Integer.parseInt(items[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:41:09.217

给定一个 JSON 格式的字符串，如下所示：

```
var arr = "[\"208\",\"2507\"]"; 
```

你可以得到一个实际的数组：

```
var items = JSON.parse(arr); 
```

虽然它包含字符串。要将字符串转换为整数：

```
var results = items.map(function(v){return parseInt(v,10);}); 
```

或者在一行中：

```
var results = JSON.parse(arr).map(function(v){return parseInt(v,10);}); 
```

但是，如果您需要数组中的项目是整数，为什么不首先输出整数，而不是字符串：

```
var arr = "[208,2507]"; 
```

那么你只需要：

```
var results = JSON.parse(arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:39:33.720

您也确实应该在 Java 中使用 JSON。

在 JavaScript 中，它应该如下所示：

```
var arrstring = "[\"208\",\"2507\"]";
var items = JSON.parse(arrstring);
var results = [];
for (var i=0, i<items.length; i++)
    results[i] = parseInt(items[i], 10); 
```

# php - 如何显示来自具有相同列名的两个不同表的结果

> ID：13694804
> 
> 赞同：0
> 
> 时间：2012-12-04T01:35:44.227
> 
> 标签：php, mysql

我有这个查询：

```
SELECT titulo, info FROM htmlcss, php ORDER BY date 
```

我在字段列表中得到 Column 'titulo' is ambiguous 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:40:10.660

包括表名。如果你想要来自 htmlcss 的标题：

```
SELECT htmlcss.titulo, info FROM htmlcss, php ORDER BY date 
```

如果需要，您可以同时选择两者：

```
SELECT htmlcss.titulo, php.titulo, info FROM htmlcss, php ORDER BY date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:52:08.223

```
SELECT a.titulo, b.info FROM htmlcss a 
    inner join php b on a.titulo=b.titulo  ORDER BY date 
```

# php - 单击按钮时数据未从 MySql 加载到文本框中

> ID：13694805
> 
> 赞同：0
> 
> 时间：2012-12-04T01:35:47.003
> 
> 标签：php, mysql, forms, textbox

我这里有个小问题。我想要实现的是用户在文本框中输入唯一 ID，然后按下加载按钮，脚本正在 MySql 数据库中查找此参数。找到匹配数据后，应将其加载到下面的文本框中。

更新后的版本

```
<?php

mysql_connect ("localhost", "root","84946dff6e1")  or die (mysql_error());
mysql_select_db ("employees");

if(isset($_POST["loadbtn"]))
{
    $load = $_POST["loadbtn"];

    $sql = mysql_query("SELECT * FROM titles WHERE emp_no = '$load' ");
    $details = mysql_fetch_array($sql);

    $savedTitle = $details["title"];     
}
?>
<form method="post" action="changeTitleView.php">
<table width="400" border="0" cellspacing="1" cellpadding="2" align="center">
<tr>
<td width="150">Employee number</td>
<td><input type="text" name="load" /></td>
<td><input type="submit" name="loadbtn" value="Load" /></td>
</tr>
</table>
</form>
<br />
<br />
<form method="get" action="changeTitleView.php">
<table width="400" border="0" cellspacing="1" cellpadding="2" align="center">
<td width="150">Employee Title</td>
<td><input name="salary" type="text" value="<?php echo $savedTitle; ?>"></td>
</tr>
<td width="150"> </td>
<td>
<input name="add" type="submit" id="add" value="Update">
</td>
</tr>
</table>
</form> 
```

![在此处输入图像描述](../Images/8f72c849794bc963da639cb27c644d50.png)

感谢您的寻找和帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:39:34.190

```
<td><input name="salary" type="text" value="<? echo $empTitle; ?>"></td> 
```

尝试将该行更改为：

```
<td><input name="salary" type="text" value="<?php echo $empTitle; ?>"></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:34:17.990

试试这个

```
<?php
error_reporting(-1);// show all errors when debugging

// don't use these database commands
//mysql_connect ("localhost", "root","84946dff6e1")  or die (mysql_error());
//mysql_select_db ("employees");

// do it this way and don't show us your database credentials.
$conn = new mysqli('localhost', "root", "84946dff6e1",  'employees');

//declare your variables so if POST isn't true you don't have errors later

$load = "some Id";
$savedTitle = "no value yet!"; // use something interesting when testing

//you want the value of the textbox which name is load
if(isset($_POST["load"]))
{
    //never trust the user directly
     //$load = $_POST["load"]; 
     // do this
     $load = $conn->real_escape_string($_POST["load"]);

    $result = $conn->query("SELECT * FROM titles WHERE emp_no = '$load' ");

    $details = $result->fetch_assoc();

    $savedTitle = $details["title"];     
    // show me error when testing to see if something is wrong with query
     echo $conn->error;
}
?>
<form method="post" action="changeTitleView.php">
<table width="400" border="0" cellspacing="1" cellpadding="2" align="center">
<tr>
<td width="150">Employee number</td>
<td><input type="text" name="load" value="<?php echo $load; ?>" /></td>
<td><input type="submit" name="loadbtn" value="Load" /></td>
</tr>
</table>
</form>
<br />
<br />
<form method="get" action="changeTitleView.php">
<table width="400" border="0" cellspacing="1" cellpadding="2" align="center">
<td width="150">Employee Title</td>
<td><input name="salary" type="text" value="<?php echo $savedTitle; ?>"></td>
</tr>
<td width="150"> </td>
<td>
<input name="add" type="submit" id="add" value="Update">
</td>
</tr>
</table>
</form> 
```

您将需要添加另一个 if 分支来处理更新标题的第二个表单并记住该表单是 GET 而不是 POST 像第一个表单一样。

# jquery - 将编辑字段值复制到另一个编辑

> ID：13694809
> 
> 赞同：0
> 
> 时间：2012-12-04T01:35:56.807
> 
> 标签：jquery, asp.net-mvc

新手问题：MVC4

我有一个简单的编辑器（简单文本）：

```
@Html.EditorFor(m => m.MyField)
@Html.EditorFor(m => m.MyCopyField) 
```

当用户离开 MyField 编辑器时，我希望 MyCopyField 的编辑器具有相同的文本。

如何在每个编辑器上绘制一个 ID，以便我可以在 jQuery 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:45:42.383

如果`MyField`是一个字符串，`EditorFor`将创建一个使用字段名称作为`ID`and的文本框`name`：

```
<input type="text" id="MyField" name="MyField" /> 
```

然后你可以只使用 jquery 来复制文本。

简单的jQuery：

```
$('#MyField').focusout(function ()
{
      $('#MyCopyField').val($(this).val());                      
}); 
```

[http://jsfiddle.net/AfgAG/13/](http://jsfiddle.net/AfgAG/13/)

# javascript - 输入类型验证 javascript

> ID：13694810
> 
> 赞同：1
> 
> 时间：2012-12-04T01:36:00.683
> 
> 标签：javascript, asp.net-mvc-3, razor

我如何验证文件类型？？？。以下错误抛出异常“theFileElement is not found”

```
@using (Html.BeginForm("Index", "Data", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    <input type="file" name="FileUpload" />
    <input type="submit" name="Submit" id="btnSubmit" value="Upload"/>

}

<script type="text/javascript">
  $('#btnSubmit').click(function (e){

            filename = theFileElement.value;
              if (!/\.csv$/i.test(filename)) {
                alert("Please upload csv file only");
                return false;
              }
              return true;

        });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:51:54.610

theFileElement 没有在任何地方定义。添加

```
var theFileElement = document.getElementById("FileUpload"); 
```

前

```
filename = theFileElement.value; 
```

还要编辑你的文件输入看起来像

```
<input type="file" name="FileUpload" id="FileUpload" /> 
```

# authorization - 无法使用 Python 客户端库 API 获得服务帐户授权以处理 GCS 脚本

> ID：13694811
> 
> 赞同：4
> 
> 时间：2012-12-04T01:36:42.493
> 
> 标签：authorization, google-cloud-storage, google-api-python-client, service-accounts

在尝试编写一个 python 脚本来使用基于服务的授权访问 GCS 时，我想出了以下内容。请注意，“key”是我的 p12 文件的内容。

我正在尝试仅阅读我帐户中的存储桶列表。我已经使用 GCS 的 Web 界面成功创建了一个存储桶，并且可以使用 gsutil 看到它。

当我执行下面的代码时，出现 403 错误。起初我以为我没有得到正确的授权，但我从这个非常有用的网页（它使用基于 Web 的授权）尝试过，它可以正常工作。[https://developers.google.com/apis-explorer/#p/storage/v1beta1/storage.buckets.list?projectId=](https://developers.google.com/apis-explorer/#p/storage/v1beta1/storage.buckets.list?projectId=) &_h=2&

当我查看标头和查询字符串并将它们与网站生成请求的 keaders 和查询进行比较时，我看到没有授权标头，并且查询字符串中没有 key= 标记。我想我认为凭证授权会为我解决这个问题。

我究竟做错了什么？

代码：

```
credentials = SignedJwtAssertionCredentials(
      'xxx-my-long-email-from-the-console@developer.gserviceaccount.com',
      key,
      scope='https://www.googleapis.com/auth/devstorage.full_control')
http = httplib2.Http()
http = credentials.authorize(http)

service = build("storage", "v1beta1", http=http)

# Build the request

request = service.buckets().list(projectId="159910083329")

# Diagnostic

pprint.pprint(request.headers)
pprint.pprint(request.to_json())

# Do it!

response = request.execute() 
```

当我尝试执行时，我得到了 403。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:54:38.470

我得到了这个工作，但是，我使用的代码与您发布的代码段没有根本不同。以防万一您想将我的版本与您的版本进行比较，下面附上了对我有用的 Python 程序的完整副本。我最初得到了一个 403，就像你一样，这是由于继承了你的项目 id :)。在更新该值以使用我的项目 ID 后，我得到了正确的存储桶列表。要检查的两件事：

1.  确保您使用的项目 ID 正确，并且在 Google Developer Console 的“服务”选项卡上启用了“Google Cloud Storage JSON API”（它与其他 Google Cloud Storage API 不同）。

2.  确保您加载的服务帐户私钥与来自开发者控制台的完全一致。我建议从下载的文件中将其读入内存，就像我在这里所做的那样，而不是尝试将其复制到代码中的字符串文字中。

* * *

```
#!/usr/bin/env python

import pprint
import oauth2client
from oauth2client.client import SignedJwtAssertionCredentials
import httplib2
from apiclient.discovery import build

f = open('key.p12', 'r')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
      'REDACTED',
      key,
      scope='https://www.googleapis.com/auth/devstorage.full_control')
http = httplib2.Http()
http = credentials.authorize(http)

service = build("storage", "v1beta1", http=http)

# Build the request

request = service.buckets().list(projectId="REDACTED")

# Diagnostic

pprint.pprint(request.headers)
pprint.pprint(request.to_json())

# Do it!

response = request.execute()
pprint.pprint(response) 
```

# html - 带有滚动窗口的引导布局

> ID：13694814
> 
> 赞同：0
> 
> 时间：2012-12-04T01:36:51.130
> 
> 标签：html, css, twitter-bootstrap

我创建了一个具有固定导航栏和固定侧边栏的 Bootstrap 布局，以便剩余的跨度（内容跨度）将垂直滚动。但是我希望内容跨度实际上包含一个窗口标题和一个窗口 - 其中窗口标题是静态的，但窗口的内容在窗口内滚动。

```
.sidebar-nav-fixed {
  padding: 9px 0;
  position: fixed;
  left: 20px;
  top: 78px;
  width: 250px;
}

.row-fluid > .span-fixed-sidebar {
  margin-left: 290px;
}

.main {
  margin-top: 80px;
}

.header {
  margin-top: 80px;
}

.threadwindow {
  height:  100%;
  overflow: auto;
  border: 1px solid #333;
} 
```

我在这里发布了当前代码[http://jsfiddle.net/timburgess/CUGu8/](http://jsfiddle.net/timburgess/CUGu8/)

我会很感激任何建议。我尝试了一个固定位置的窗口标题，但窗口内容只是在它上面滚动:-(这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:28:52.387

我已经解决了这个问题，核心 css 本质上是：

```
#main {
  position: absolute;
  left: 300px;
  top: 100px;
  right:  0;
  bottom: 0;
  border: 2px solid #333;
}

.threadwindow {
  position: absolute;
  left: 0;
  top: 50px;
  right: 0;  
  bottom: 0;
  border: 1px solid #333;
  overflow-y: auto;
} 
```

完整的结果在：

[http://jsfiddle.net/timburgess/ZTt5M/](http://jsfiddle.net/timburgess/ZTt5M/)

为了清楚起见，我用边框包围了主窗口以强调它，并在其中嵌入了一个子窗口（同样带有边框），它允许在子窗口内容上放置标题。如果子窗口中的内容溢出可用空间，它会垂直滚动，并且通过使用绝对定位，主窗口的右边框和下边框被固定到浏览器的边缘。

# php - 使用 php 提取额外的字段值

> ID：13694818
> 
> 赞同：0
> 
> 时间：2012-12-04T01:37:13.350
> 
> 标签：php, joomla

> **可能重复：**
> [在 php 中解析 Json](https://stackoverflow.com/questions/4035742/parse-json-in-php)

我对我从 db 过滤的 joomla 中的这个额外字段值有疑问。任何帮助如何做到这一点？我需要拆分这个`{"id":"18","value":"3:00pm-6:00pm"}`ang 只得到值`3:00pm-6:00pm`

任何帮助将不胜感激提前感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:41:51.843

那是[JSON](http://www.json.org/)。用于[`json_decode()`](http://us3.php.net/manual/en/function.json-decode.php)获取值。

```
$json = json_decode('{"id":"18","value":"3:00pm-6:00pm"}');
echo $json['value']; 
```

# shell - 添加日期变量

> ID：13694821
> 
> 赞同：1
> 
> 时间：2012-12-04T01:37:57.200
> 
> 标签：shell

我想将下面的代码添加到我的脚本中，但它没有显示`total_time`值，尽管`CurrentTime`显示正确。在此我想将纪元时间更改为当前系统时间，然后添加 20 分钟。

```
CurrentTime=`date -d @$2`
echo "CurrentTime : $CurrentTime " >> ${LOGFILE}
Total_time=`"$CurrentTime" -d "+20 min"` 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:50:00.743

这不起作用的原因是，当您尝试将值分配给 时`$Total_time`，您的`$CurrentTime`变量已经设置为时间。它不再是命令，而是命令结果的字符串。

每次要计算新日期时，都需要重新调用``date``命令。这就是 Guru 的回答为您提供的，尽管他没有解释原因。

如果您需要创建一个应用修饰符的“基准”日期，您仍然可以这样做，但我建议使用稍微不同的表示法：

```
#!/bin/bash

start=$(date '+%s')

# do stuff
sleep 20

duration=$((`date '+%s'` - $start)) 
```

然后，您可以将其`$duration`用作其他计算的更简单基础，*并且*可以将其与相对日期一起使用：

```
printf "[%s] Start of job\n" "$(date -d @$start '+%Y-%m-%d %T')"
...
printf "[%s] End of job\n" "$(date -d @"$((start + duration))" '+%Y-%m-%d %T')" 
```

将日志文件格式化为比`date`默认格式更标准的格式可能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:47:13.390

像这样更改您的总时间分配：

```
Total_time=`date -d "$CurrentTime +20 mins"` 
```

# javascript - 放大 HTML5 画布

> ID：13694826
> 
> 赞同：0
> 
> 时间：2012-12-04T01:38:18.433
> 
> 标签：javascript, html, canvas, html5-canvas

我需要一些关于如何设置放大和缩小 HTML5 JavaScript 画布的建议。我已经设置了函数和 switch 语句，只需要关于如何实际启用缩放的建议。

我正在考虑让它使用浏览器缩放功能，因为我只需要它在 Chrome 上工作。这是推荐的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:39:23.583

Just use `ctx.scale(x, y)`

Here is a [direct link](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Transformations#Scaling) on MDN, however I advise you to read the whole article.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:57:10.740

您可以使用浏览器的缩放来缩放画布，但请注意画布是光栅图像，因此放大会引入锯齿（锯齿）。我还没有看到没有锯齿在放大的画布（即画布像素大于显示像素）上绘制的方法。事实证明，甚至很难计算出放大了多少：[如何检测所有现代浏览器中的页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

但是，如果您通过重绘某些事件进行缩放，即使使用[@rezoner 指出的那样](https://stackoverflow.com/a/13702048/36537)`ctx.scale(x, y)`，而不是允许浏览器缩放，那么您仍然可以在没有锯齿的情况下进行绘制。为了平滑缩放，我建议在使用快速缩放时使用快速缩放，并在它们停止缩放时每 1.3 倍左右执行一次完全重绘。这应该会给你类似谷歌地图的行为，你可以立即获得粗略的缩放（良好的响应性），但它会在你继续缩放时更新视图。`scale`

# node.js - 如何在 node.js 中复制文件（包括修改时间）？

> ID：13694827
> 
> 赞同：8
> 
> 时间：2012-12-04T01:38:17.827
> 
> 标签：node.js, copy, fs

我可以使用以下命令复制 node.js 中的文件：

```
 var readStream = fs.createReadStream(fromFilePath);
            readStream.pipe(fs.createWriteStream(toFilePath)); 
```

问题是如何像在常规文件复制命令中一样复制/保留修改的时间（mtime）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T02:29:42.747

`fs`模块中有访问mtime的方法：

```
var stat = fs.statSync(fromFilePath);
fs.utimesSync(toFilePath, stat.atime, stat.mtime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-09T23:09:40.693

使用[https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback](https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback)。

文档没有说，但根据我的测试，它确实保持/设置修改时间与源文件中的相同，至少在 Windows-10 上。

它确实将 Created 时间设置为制作副本的时间。但是你的问题是关于修改时间的，所以这可能是获得你想要的最简单的方法。

顺便提一句。我觉得奇怪的是，现在文件似乎在创建之前就被修改了。怎么可能！但至少在 Windows 10 上似乎是这样。我想这对我们来说是一个很好的暗示，文件是从其他地方复制的。

# c++ - C++ 中的一元运算

> ID：13694829
> 
> 赞同：-1
> 
> 时间：2012-12-04T01:38:34.553
> 
> 标签：c++, function, variable-assignment, unary-operator

我遇到了一个编程问题，我只知道部分答案。

```
int f( char *p )
{
int n = 0 ;
while ( *p != 0 )
n = 10*n + *p++ - '0' ;
return n ;
} 
```

这就是我认为该程序正在做的事情。p 是一个指针，while 循环对指针的值进行 DE 引用，直到它等于 0。但是我不明白 n 赋值行，“0”在做什么？我假设 p 的值最初是负数，这是它在增量后达到 0 的唯一方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:47:55.643

您将*数字*零（无，无）与字符`0`（一个圆圈，可能带有斜线）混淆了。请注意，零在刻度线中，所以它是字符“0”，而不是数字零。

'0' - '0' = 0
'1' - '0' = 1
'2' - '0' = 2
...

因此，通过从一个数字中减去*字符*零，您可以得到与该数字对应的数字。

因此，假设您有以下数字序列：“4”、“2”、“1”。你如何从中得到四百二十一这个数字？你把“4”变成了四个。然后乘以十。现在你有四十个。将'2'转换为两个并添加它。现在你有四十二个。乘以十。将 '1' 转换为 1，然后加上，现在你有 421 个。

这就是将数字序列转换为数字的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T01:41:31.543

`n`局部变量在字符串中累积传递给此函数的十进制数的值。这是 的实现`atoi`，没有有效性检查。

这是循环体的工作原理：

```
n = 10*n + *p++ - ‘0'; 
```

赋值给`n`前面的值乘以`n`10 加上指针处的当前字符代码`p`减去代码 0 的结果；取消引用`p` *后*递增。

由于数字字符是按顺序编码的，因此`*p-'0'`表达式表示数字的十进制值。

假设您正在解析字符串`"987"`。当您通过循环`n`时，从零开始；然后它被分配以下值：

```
n = 10*0 + 9;  // That's 9
n = 10*9 + 8;  // That's 98
n = 10*98 + 7; // That's 987 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T01:53:26.530

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T01:59:02.110

This is a string to number conversion function. Similar to [atoi](http://www.cplusplus.com/reference/cstdlib/atoi/).

A string is a sequence of characters. So "123" in memory would be : '1','2','3',NULL

p Points to it.

Now, according to ASCII, [digits are encoded from '0' to '9'](http://www.asciitable.com/). '0' being assigned the value 48 and '9' being assigned the value 57\. As such, '1','2','3',NULL in memory is actually : 49, 50, 51, 0

If you wanted to convert from the character '0' to the integer 0, you would have to subtract 48 from the value in memory. Do you see where this is going?

Now, instead of subtracting the number 48, you subtract '0', which makes the code easier to read.

# r - 一起从两列中提取值

> ID：13694830
> 
> 赞同：1
> 
> 时间：2012-12-04T01:38:37.300
> 
> 标签：r

我有以下 df 称为数据：

```
 ProbeID    SampleID ExperimID    Value    
1 2747406        1         2       6.44 
1 2747406        4         2       5.90 
```

`etc....`

我正在尝试提取与 SampleID = 1 ( data[,2] = 1) 和 SampleID = 4 (data[,2]=4) 匹配的第 4 列 (data[,4]) 中的值

重要的是这些值与 SampleID 匹配并一起提取（即 SampleID 1 的值 = 6.44 和 SampleID 4 的值 = 5.90）。它们可以分成新的 df（x 和 y），理想情况下给我带有所有 SampleID 1 值的 x 和带有所有 SampleID 4 值的 y。我完全坚持这一点，非常感谢任何帮助。

目标是让两个新的数据框 x 和 y 看起来如下图所示：

x 为：

```
 SampleID    Value    
1       1        6.44 
etc.. 
```

和 y 是：

```
 SampleID     Value    
1       4        5.90
etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:42:18.173

这是简单的饲料`split`

```
dataBySample <- split(data, data$SampleID) 
```

`dataBySample`一个包含`data.frames`与您所需输出相对应的元素的列表也是如此。

* * *

如果您真的想在全局环境中填充这些 data.frames，那么您可以执行以下操作

```
newnames <- paste0('sample', names(dataBySample))

for(i in seq_along(dataBySample)){
  assign(newnames[i], dataBySample[[i]])
}
# so now there are dataframes called sample1 and sample4
sample1
ProbeID SampleID ExperimID Value
1 2747406        1         2  6.44

sample4
ProbeID SampleID ExperimID Value
2 2747406        4         2   5.9 
```

如果您将它们保留在列表中并且不会用它们污染全球环境，那么您对这些 data.frames 所做的几乎所有事情都会更容易控制。特别是，正如您在评论中指出的那样，您有 2405670 个样本。你真的想创建这么多的data.frames吗？

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:54:39.663

我认为您应该听 mnel 但如果您真的想用不相交的数据位使您的工作区混乱，那么请执行以下操作：

```
 res1 <- dfrm[ dfrm$sampleID == 1 , c("SampleID",    "Value") ]
 res4 <- dfrm[ dfrm$sampleID == 4 , c("SampleID",    "Value") ] 
```

# mysql - INSERT IGNORE - 如何判断是否已插入？

> ID：13694831
> 
> 赞同：5
> 
> 时间：2012-12-04T01:39:06.017
> 
> 标签：mysql, sql

我将需要一个可以`INSERT .. ON DUPLICATE KEY UPDATE`（或`INSERT IGNORE INTO`）我的表的 SQL 查询。

我需要知道是否*确实*发生了更新，或者是否插入了新行。

一个很好的参考是这个[SO answer](https://stackoverflow.com/questions/4596390/mysql-insert-on-duplicate-key-do-nothing-just-dont-complain-to-the-error)，不幸的是，对所采取的行动没有答案。

至于现在我正在使用 INSERT .. ON DUPLICATE KEY UPDATE：

```
INSERT INTO `tbl` (`CLIENT_ID`, `COMP_ID`, `DATETIME`) VALUES (12334,32,NOW())
                    ON DUPLICATE KEY UPDATE
                    `COMP_ID`=VALUES(`COMP_ID`), `DATETIME`=VALUES(`DATETIME`);"; 
```

并检查affected_rows 值。
如果affected_rows 等于1，意味着-> 插入新行
如果affected_rows 等于2，意味着-> 行更新

如果出现重复，我不希望发生任何变化，但我想知道存在重复。

使用 MYSQL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:40:05.860

检查受影响的行数：

*   返回值`1`表示`INSERT`发生
*   返回值`2`表示`UPDATE`发生

如果您使用的是 JDBC，这是or调用的`int`返回值。`update()``execute()`

所有框架都有将这个值传回给你的方法，例如 Hibernate 的`Query.executeUpdate()`返回这个`int`值。

# internet-explorer - Internet Explorer -宽度不生效？

> ID：13694837
> 
> 赞同：2
> 
> 时间：2012-12-04T01:39:33.830
> 
> 标签：internet-explorer, internet-explorer-9

我在 IE9 中遇到了 IMG 宽度的问题，可以在这里看到，[http://ncms.us/ncms/admin/login](http://ncms.us/ncms/admin/login)我看到的唯一问题是我使用 ' 而不是 " 作为我的标签，因为它在一个 PHP 回声。在 IE 上，标题上的主要图片很大（经过 IE9+IE10 测试。）在除 IE 之外的所有内容中看起来都很好。这是让 IE 关闭的代码。我明白为什么，它非常复杂，但没有任何东西以前看过（-_-哈哈）

```
<img style='margin-top: -25px;' src='img/ncms_logo.png' width='300' height='250' /> 
```

耶！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T01:52:14.453

看起来在您的 bootstrap.min.css 中有一个来自 img 的默认类。具有属性 width:auto;

如果将其删除，它将在 IE 中正确显示。

另外只是添加

```
 width: 300px; 
```

以您的风格和边距，将纠正问题。

# python - 在 Python 列表中获取第二个元组

> ID：13694840
> 
> 赞同：0
> 
> 时间：2012-12-04T01:39:55.237
> 
> 标签：python, list, parsing, unicode, tuples

我正在尝试在 Python 中的列表中获取列表的第二项。

例子：

`people = [['John Doe', u'', u'25.78', u''], ['John Doe', u'', u'13.39', u''], ['John Doe', u'', u'11.93', u'0.00'], ['John Doe', u'', u'14.97', u'0.00'], ['John Doe', u'', u'14.34', u''], ['John Doe', u'', u'21.08', u''], ['John Doe', u'', u'13.24', u''], ['John Doe', u'', u'13.11', u'0.00'], ['John Doe', u'', u'', u''], ['John Doe', u'', u'19.45', u'0.00'], ['John Doe', u'', u'17.56', u''], ['John Doe', u'', u'20.57', u''], ['John Doe', u'', u'28.50', u''], ['John Doe', u'', u'24.38', u'0.00'], ['John Doe', u'', u'31.13', u''], ['John Doe', u'', u'17.20', u''], ['John Doe', u'', u'18.52', u'0.00'], ['John Doe', u'', u'6.42', u'0.00'], ['John Doe', u'', u'17.31', u'']]`

我想要做的是获取列表中每个列表的第三个元素。

我希望我的回报是：

`['25.78','13.39','11.93','14.97','14.34']`等等。

还有，加分。`u`列表中每个项目前面的 会影响什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:41:24.607

```
In [57]: people = [['John Doe', u'', u'25.78', u''], ['John Doe', u'', u'13.39', u''], ['John Doe', u'', u'11.93', u'0.00'], ['John Doe', u'', u'14.97', u'0.00'], ['John Doe', u'', u'14.34', u''], ['John Doe', u'', u'21.08', u''], ['John Doe', u'', u'13.24', u''], ['John Doe', u'', u'13.11', u'0.00'], ['John Doe', u'', u'', u''], ['John Doe', u'', u'19.45', u'0.00'], ['John Doe', u'', u'17.56', u''], ['John Doe', u'', u'20.57', u''], ['John Doe', u'', u'28.50', u''], ['John Doe', u'', u'24.38', u'0.00'], ['John Doe', u'', u'31.13', u''], ['John Doe', u'', u'17.20', u''], ['John Doe', u'', u'18.52', u'0.00'], ['John Doe', u'', u'6.42', u'0.00'], ['John Doe', u'', u'17.31', u'']]

In [58]: [p[2] for p in people]
Out[58]: 
[u'25.78',
 u'13.39',
 u'11.93',
 u'14.97',
 u'14.34',
 u'21.08',
 u'13.24',
 u'13.11',
 u'',
 u'19.45',
 u'17.56',
 u'20.57',
 u'28.50',
 u'24.38',
 u'31.13',
 u'17.20',
 u'18.52',
 u'6.42',
 u'17.31'] 
```

字符串前面的`u`基本上表示它们是 unicode 字符串。如果要将它们转换为常规的 ascii 字符串（假设它们只有 ascii 字符）：

```
In [59]: [str(p[2]) for p in people]
Out[59]: 
['25.78',
 '13.39',
 '11.93',
 '14.97',
 '14.34',
 '21.08',
 '13.24',
 '13.11',
 '',
 '19.45',
 '17.56',
 '20.57',
 '28.50',
 '24.38',
 '31.13',
 '17.20',
 '18.52',
 '6.42',
 '17.31'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:41:53.130

您可以使用简单的列表推导来获取第三个元素。

```
numbers = [i[2] for i in people] 
```

`u`表示它是一个 unicode 字符串。假设它包含`ascii`字符（在这种情况下确实如此），`str`如果您不想要 unicode，则可以使用。

```
numbers = [str(i[2]) for i in people] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T01:41:58.917

```
result = [each[2] for each in people]
print(result) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T01:52:26.513

另外，只是为了好玩：

```
result = []
for x in range(len(people)):
    result.append(people[x][2]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T01:46:07.603

这里是 numpy

```
people = numpy.array(people)
print people[:,2] 
```

# django - Django 404 正则表达式

> ID：13694842
> 
> 赞同：1
> 
> 时间：2012-12-04T01:40:07.623
> 
> 标签：django, python-2.7

我正在尝试访问详细视图，但它似乎没有正确映射。有什么我想念的吗？当我尝试访问 localhost:8000/polls/1 视图时，我得到一个 404 表示 url 模式与下面给出的任何这些 url 模式都不匹配。我的正则表达式有问题吗？

以下是 404 中的 url 模式：

```
^polls/ ^$
^polls/ ^polls/(?P<poll_id>\d+)/$
^polls/ ^polls/(?P<poll_id>\d+)/results/$
^polls/ ^polls/(?P<poll_id>\d+)/vote/$
^admin/ 
```

当前 URL polls/1/vote/ 与其中任何一个都不匹配。

这是 urls.py：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('polls.views',
    url (r'^$', 'index'),
    url (r'^polls/(?P<poll_id>\d+)/$', 'detail'),
    url (r'^polls/(?P<poll_id>\d+)/results/$', 'results'),
    url (r'^polls/(?P<poll_id>\d+)/vote/$', 'vote'),
    ) 
```

这是我的views.py：

```
from django.template import RequestContext
from django.http import HttpResponseRedirect, HttpResponse
from django.core.urlresolvers import reverse
from django.shortcuts import render_to_response, get_object_or_404
from polls.models import Choice,Poll

def index(request):
latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
return render_to_response('polls/index.html', {'latest_poll_list': latest_poll_list})

def detail(request, poll_id):
p = get_object_or_404(Poll, pk=poll_id)
return render_to_response('polls/detail.html', {'poll': p},
                                  context_instance=RequestContext(request))

def results(request, poll_id):
p = get_object_or_404(Poll, pk=poll_id)
return render_to_response('polls/results.html', {'poll':p})

def vote(request, poll_id):
p = get_object_or_404(Poll, pk=poll_id)
try:
    selected_choice = p.choice_set.get(pk=request.POST['choice'])
except (KeyError, Choice.DoesNotExist):
    #Redisplay poll voting form
    return render_to_response('polls/detail.html', {
        'poll': p,
        'error_message': "You didn't select a choice.",
    }, context_instance=RequestContext(request))
else:
    selected_choice.votes += 1
    selected_choice.save()
return HttpResponseRedirect(reverse('polls.views.results', args=(p.id,))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:04:32.623

我猜您在项目 urls 文件中包含您的应用程序 url，这就是为什么在错误 url 中您可以看到两次写入的民意调查。我建议您从您的应用程序网址中删除“民意调查”字样，然后重试..

```
 url (r'^$', 'index'),
    url (r'^(?P<poll_id>\d+)/$', 'detail'),
    url (r'^(?P<poll_id>\d+)/results/$', 'results'),
    url (r'^(?P<poll_id>\d+)/vote/$', 'vote'), 
```

# java - Maven 下如何管理多个 log4j.properties 文件中的依赖关系？

> ID：13694846
> 
> 赞同：3
> 
> 时间：2012-12-04T01:40:36.157
> 
> 标签：java, maven, log4j

我有一个具有多个依赖项并用于`log4j.properties`控制输出的 Maven 项目。在某些情况下，相同的类可能会在具有不同参数的不同属性文件中被引用。是否有“覆盖”属性的定义协议，还是取决于加载包的顺序？

（我`log4j.properties`直接在下面`src/main/resources`- 这是正确的地方吗？）

更新：我已经接受了@Assen 的回答，因为这很有意义，尽管它不会使解决方案变得简单。本质上，他建议从 jar 中排除 log4j.properties。原则上我同意，但它给用户带来了控制输出的负担，而且我的大多数用户不知道 Java 是什么，更不用说属性文件了。也许有一种方法可以重命名每个 jar 中的属性文件并使用开关（可能带有 -D）来激活属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:01:37.630

我经常在项目上进行类似的讨论。我认为 log4j.properties 通常是您希望将其*排除*在应用程序之外的东西，而不是将其打包在战争中并将其与代码一起交付。日志配置：

*   是特定于环境的。当您编写应用程序时，您根本无法定义所需的附加程序、文件位置等。
*   它的生命周期与应用程序的生命周期完全不同。部署应用程序后，日志记录属性一天可以更改数次。重新部署应用程序不应覆盖您上次的日志记录设置。

那么为什么要将日志配置与您的代码一起打包呢？我通常会在某个地方保留一个配置文件夹，其中包含“dev”、“test-server-01”、“macbook-john”等子文件夹。每个子文件夹都包含列表自己的 log4j.properties 副本。它们都不包含在构建工件 - jar 或战争中。

部署时，将单独交付其中一个子文件夹。对于测试服务器 1，这将是 test-server-01 子文件夹的内容。根据使用的应用程序服务器，将一些文件放在类路径上是一个不同的技巧。

开发时，我注意在路径上设置这些子文件夹之一。当 John 在他的 macbook 上进行开发时，他可能想要将“macbook-jihn”放在类路径中，或者创建一个新的。他可以更改日志记录设置并提交而不会发生冲突。

# gcc - 没有这样的指令：dd 0

> ID：13694848
> 
> 赞同：2
> 
> 时间：2012-12-04T01:41:06.210
> 
> 标签：gcc, assembly, x86

在用 c 编译内联汇编代码时出现错误：

> `no such instruction:dd 0;`

这是我的代码：

```
asm(
            ".data"
            "big: dd 0\n"
            ".text\n"               
            "mov out1,%eax\n"
            "add %eax,out2"     
        ); 
```

我正在尝试创建一个双字变量，稍后我将分配`out2`（这是 c 变量）给它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:13:48.503

使用这个符号：

```
 .quad 0 
```

该`.quad`指令允许您声明一个常量四字（8 个字节）。

有关更多信息，请参阅[GNU](http://sourceware.org/binutils/docs-2.17/as/index.html)手册。

# java - java开始一个又一个后台线程完成

> ID：13694850
> 
> 赞同：1
> 
> 时间：2012-12-04T01:41:07.710
> 
> 标签：java, android, multithreading, android-service

我看到了这个问题：[如何在完成另一个线程后运行一个线程](https://stackoverflow.com/questions/4884957/how-to-run-one-thread-after-complete-another-thread) ，但它的答案不适合我。

我有这种适用于 Android 的 java 代码：

```
public void startTask(Runnable r)
    {
        running = true;
        Log.i(tag, "-----------start.Runnable-----------");

        Thread first = new Thread(r);
        first.start();

        Thread second = new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                running = false;
            }
        });
} 
```

首先将我在后台服务中处理的一些硬操作`Thread`作为参数对象。`Runnable`所以，当我调用 method: **startTask()**我设置**running = true;** 防止双重执行任务。但是，我也需要在第一个线程完成后立即启动第二个线程来设置**running = false;** 使其他操作能够执行。

**我怎样才能等待第一个线程的完整性不冻结主线程？谢谢！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T02:56:15.533

您可以使用`SingleThreadExecutor`.

```
Executor executor = Executors.newSingleThreadExecutor();
executor.execute(runnable1);
executor.execute(runnable2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T02:29:43.520

试试这个：

```
final Thread first = new Thread(r);
first.start();

Thread second = new Thread(new Runnable() {

    @Override
    public void run() {
        first.join();
        // TODO Auto-generated method stub
        running = false;
    }
});
second.start(); 
```

我变了：

*   为“第一”添加最终关键字
*   在第二个线程开始时通过#join 等待第一个线程的完成。
*   很快开始第二个线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T02:32:07.067

我不是 Android 程序员，但这样的事情可能会起作用：

```
private volatile boolean running = false;

public void startTask(final Runnable r)
{
    running = true;
    Log.i(tag, "-----------start.Runnable-----------");

    Runnable runme = new Runnable() {
        @Override
        public void run() {
            try {
                r.run();
            } finally {
                running = false;
            }
        }
    };

    new Thread(runme).start();
} 
```

它只需要一个线程来运行任务然后清除`running`标志。注意`volatile`在声明中的使用`running`，因为这个变量是从多个线程中读取和写入的。

# javascript - Jquery 在 for 循环中不能很好地工作

> ID：13694856
> 
> 赞同：0
> 
> 时间：2012-12-04T01:41:32.873
> 
> 标签：javascript, jquery, slider

> **可能重复：**
> [Javascript：循环关闭？](https://stackoverflow.com/questions/5555464/javascript-closure-of-loop)

我在javascript中有以下代码：

```
for (var i=0; i < images_array.length; i++) {
$('#thumb_'+ i).live('click', function(){
    $('#image_container_' + current_image_index).hide();
    current_image_index = i;
    alert(current_image_index);
    $('#image_container_' + current_image_index).show();
});} 
```

当我点击任何拇指时，我得到 images_array.length 值。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:44:58.740

您需要为单击处理程序函数创建一个闭包，如下所示：

```
for (var i=0; i < images_array.length; i++) {
    $('#thumb_'+ i).live('click', 
        (function(i) {
            return function(){
                $('#image_container_' + current_image_index).hide();
                current_image_index = i;
                alert(current_image_index);
                $('#image_container_' + current_image_index).show();
            }
        })(i)
    );
} 
```

问题是，如果没有闭包，变量会在每个处理程序函数之间共享——它会继续更新，这就是每个处理程序最终都获得`array.length`值的原因。使用闭包创建变量的本地范围副本`i`。

这是一个显示差异的演示：

*   [原来的](http://jsfiddle.net/tC6xN/5/)
*   [带关闭](http://jsfiddle.net/tC6xN/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:52:47.090

```
$.each(images_array,function(value,i) {
  $('#thumb_'+ i).live('click', function(){
  $('#image_container_' + current_image_index).hide();
  current_image_index = i;
  alert(current_image_index);
  $('#image_container_' + current_image_index).show();
});} 
```

正如其他人所说，您需要关闭。现在，您已经在使用 jQuery，所以忘记 for() 并直接使用 $.each。

# ios - ios截屏，但顶部有一个空白（透明），它是状态栏

> ID：13694866
> 
> 赞同：0
> 
> 时间：2012-12-04T01:42:44.337
> 
> 标签：ios, screenshot, statusbar

![屏幕截图，960*640，但带有 44pix 透明状态栏](../Images/9fc22f4904285629f09f8de6bba75f83.png)

屏幕截图，960*640，但图片顶部有 44pix 透明状态栏。

如何拍摄 916pix 高度的图片？我不需要顶部的空白栏。

这是我的代码：

```
-(void)takeScreenShot{
    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]){
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0f);
    }else{
        UIGraphicsBeginImageContext(imageSize);
    }
    [window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData * data = UIImagePNGRepresentation(image);
    //
    NSString *documentsDirectory= [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *filePath= [documentsDirectory stringByAppendingPathComponent:@"SYS_screen_shot@2x.png"];
    //
    [data writeToFile:filePath atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:00:40.563

您可以使用此访问应用程序框架 `[[UIScreen mainScreen] applicationFrame]`
这将为您提供应用程序在屏幕上的位置

* * *

`[window.rootViewController.view.layer renderInContext:UIGraphicsGetCurrentContext()];`

如果你想要的是`root view`你的应用程序，你应该把这个观点看成`renderInContext`. 我刚刚对其进行了测试，并且可以正常工作。

# android - Google Maps Android API v2 MapView 动画失败

> ID：13694868
> 
> 赞同：1
> 
> 时间：2012-12-04T01:42:52.683
> 
> 标签：android, android-mapview, google-maps-android-api-2

我的应用程序在 ViewFlipper 内的 ListView 和 MapView 中显示搜索结果。用户可以通过 3D 翻转动画在它们之间切换。

今天我更新到了备受期待的 Google Maps Android API v2，一切都很顺利，除了我的动画。我将 android.view.animation.Animation 应用到非常类似于[此处](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)描述的 3d 翻转动画的视图。现在宽度变换了，所以 Map 的视图从中心展开，但是没有倾斜变换，它只是平的。

同样，这适用于 com.google.android.maps.MapView，但不适用于新版本 com.google.android.gms.maps.MapView。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:47:51.520

根据[这个问题](http://code.google.com/p/gmaps-api-issues/issues/detail?can=2&start=0&num=100&q=animation&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal&groupby=&sort=&id=4782)，问题是gmaps依赖于SurfaceView来绘制。而且 SurfaceView[不支持视图动画](http://android-developers.blogspot.com.br/2011/11/android-40-graphics-and-animations.html "介绍 TextureView")（参见“TextureView 简介”）。

--- 更新 ----
Google 在 API 16 上修复了这个问题：[https ://code.google.com/p/gmaps-api-issues/issues/detail?id=4839](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4839)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T00:17:16.123

我遇到了同样的问题，我的解决方案是使用 a `ViewPager`，在一个孩子中我有一个 ListFragment，而在另一个孩子中我有`FrameLayout`两个孩子，一个`ImageView`和`SupportMapFragment`. 在进行切换之后和之前，我将其带到前面`ImageView`，然后我使用方法[快照（aCallback）](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#snapshot%28com.google.android.gms.maps.GoogleMap.SnapshotReadyCallback%29)将 a`BitmapDrawable`放入`ImageView`您应该没有任何问题的地方。

# jquery - 想要访问和覆盖这个特定的 a:hover 值

> ID：13694871
> 
> 赞同：0
> 
> 时间：2012-12-04T01:43:18.440
> 
> 标签：jquery

我有以下标记：

```
<div class="nav-font  nav-item-3">
    <a href="/arc/place" class="top_nav">favorite places</a>
</div> 
```

并希望将链接颜色定位到最喜欢的地方。我有以下jQuery：

```
$('.nav-font').on('mouseover',function(){
  //console.log('here i am');
  $(this).addClass('light-color');
}); 
```

但它不会覆盖 a:hover。我将如何更具体地设置这里的值？

谢谢

更新#1：

这是示例 css（做一个或另一个）。我认为第一个会更“具体”，但我拥有的标准 a:hover 仍然优先。感谢帮助！

```
.light-class a:hover{
  color: #f5e9d1;
}

.light-class{
  color: #f5e9d1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:46:43.593

您会以与您打算影响链接相同的方式影响它。通过在 CSS 中声明它：

```
.light-color a{
    color:#ff6600;
}

.light-color a:hover{
    color:#ff0066;
} 
```

显然使用您自己的颜色并使选择器合适，但这是一般的想法。

但是，如果这个答案只是冒昧，您也可以发布您的 css，以便我们可以准确地看到您使用 .light-color 所做的事情

编辑：

因此，如果您已经尝试过这个，也许更具体的选择器会给新添加的类提供更高的优先级：

```
.nav-font.light-color a.top_nav, .nav-font.light-color a.top_nav:hover{
    color: #f5e9d1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:50:09.380

你`.on`是 on `.nav-font`，所以它在那里添加类。在`a:hover`里面，并否决了它的容器。如果您改为这样做：

```
$('.nav-font a').on('mouseover',function(){
  $(this).addClass('light-color');
}); 
```

然后它将以 为目标`a`，`$(this)`并将引用`a`并在那里添加类。您可以将其缩写为：

```
$('.nav-font a').hover(function() {
  $(this).toggleClass('light-color');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:57:43.880

如果我正确理解了这个问题，那么您是说您的 css 中已经为悬停定义了一种颜色。也许是这样的：

```
.top_nav:hover {
    color: #990000;
} 
```

并且您希望确保在应用新的 .light-color 类时被覆盖。如果这些假设是正确的，那么您要做的是确保覆盖颜色的选择器具有比正常悬停更高的[CSS 特异性。](http://snook.ca/archives/html_and_css/understanding_c)这样的事情应该可以解决问题：

```
.light-color .top_nav:hover {
    color: #000099;
} 
```

如果您需要更多的特异性，您可以继续添加到您的选择器，直到样式覆盖您的初始悬停颜色：

```
div.nav-font.nav-item-3.light-color a.top_nav:hover {
    color: #000099;
} 
```

通常你会尽量做到你绝对需要的具体，所以如果你以后需要再次覆盖你的风格，你最终不会伤害自己。确保您检查了一些有关特异性的文档。

就个人而言，我尝试遵守以下规则：

*   不惜一切代价避免 !important
*   尽可能避免使用 id 选择器，例如 #my_id，因为它们很难被覆盖
*   像 div.my_class 这样的特定选择器，只需 .my_class 即可。这有助于特异性覆盖，但如果你想在不是 div 的东西上重用你的类，也会使事情变得更加灵活。

# python - 如何在 Python 中获得实时键盘输入？

> ID：13694873
> 
> 赞同：4
> 
> 时间：2012-12-04T01:44:20.087
> 
> 标签：python, api, input, raw-input, text-based

这可能吗？我看过的每一个答案都不是我想要的。我所做的虽然类似于 in `omega-rpg`（这是一个很棒的基于文本的小 debian rpg），但是在 Python 而不是 C 中。我四处寻找并发现了一些东西，但没有与我正在做的事情相关。`raw_input()`使用/是否更容易`input`，或者使用某种 API 会更有效？

打扫干净：

我需要一个 Python 中的实时键盘输入系统，但我不知道使用 API 更容易还是仅仅`raw_input() / input()`. 如果使用 API 更好，那么对于初学者级别的程序员来说，哪个是最好的？

额外的：

任何解决方案都将用于基于文本的游戏！请在回答时记住这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T01:46:08.167

我认为在 while 循环中使用 raw_input() 是一个可以接受的解决方案。

[您还可以查看pygame](http://www.pygame.org)之类的东西，它可以为您处理主游戏循环并提供输入处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:46:48.697

如果您使用的是 Windows，则可以使用该[`msvcrt`](http://docs.python.org/2/library/msvcrt.html#console-i-o)模块。具体来说，`kbhit`查看是否有一个键正在等待读取并`getch`读取一个按键。用户无需`enter`按下即可使您的程序可以使用按键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:19:15.557

您可以查看[PyHook](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page)。它为读取鼠标和键盘事件提供回调。

# android - 在 Android 上使用 HttpPost 时出错

> ID：13694881
> 
> 赞同：0
> 
> 时间：2012-12-04T01:45:37.027
> 
> 标签：android, http-post

我正在尝试将文本从 Android 输入到网站中，并且我读到 httppost 是一个不错的选择。我下载了 HttpClient 4.2.2 (GA) tar.gz，解压缩它们，然后将 7 个 jars 复制到 Eclipse 中我的 android 项目的 lib 文件夹中。我很确定我得到了所有的罐子，因为它们与网站上列出的那些相匹配。

然后我继续从以下位置复制并粘贴顶级教程： http: [//hc.apache.org/httpcomponents-client-ga/quickstart.html](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)

我导入了所有内容，并留下了这个错误：

```
 EntityUtils.consume(entity1);  //X
    } finally {
       httpGet.releaseConnection();  //X 
```

这部分代码位于教程中的两个地方，并且两个地方都会出现错误。Eclipse 说第一行：

> “EntityUtils 类型的方法 consume(HttpEntity) 未定义。”

第二行：

> “对于 HttpGet 类型，方法 releaseConnection() 未定义。”

我很确定我下载了每个 jar，正确传输它们，并导入了所有内容。是什么造成了错误？谢谢。

这就是我现在所拥有的。爱德华，我使用了您方法中的一些代码，但只是将它们放入 onCreate。但是，这是行不通的。从上一个活动转到此活动几秒钟后，我收到应用程序“已意外停止”的消息。

我有一个关于将字符串输入网站文本字段的问题：我是否使用 HttpParams 的 NameValuePairs？这是我的代码，你能看出有什么问题吗？谢谢。

```
 package com.example.myapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.params.HttpClientParams;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.BasicHttpParams;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.Toast;

public class BalanceCheckerActivity extends Activity {

private final String LOGIN_URL = "https://someloginsite.com"; //username and password

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_balance_checker);

        String username = getIntent().getExtras().getString("username");
        String password = getIntent().getExtras().getString("password");

        //Building post parameters, key and value pair
        List<NameValuePair> accountInfo = new ArrayList<NameValuePair>(2);
        accountInfo.add(new BasicNameValuePair("inputEnterpriseId", username));
        accountInfo.add(new BasicNameValuePair("password", password));

        //Creating HTTP client
        HttpClient httpClient = new DefaultHttpClient();

        //Creating HTTP Post
        HttpPost httpPost = new HttpPost(LOGIN_URL);

        BasicHttpParams params = new BasicHttpParams();
        params.setParameter("inputEnterpriseID", username);
        params.setParameter("password", password);
        httpPost.setParams(params);

        //Url Encoding the POST parameters
        try {
            httpPost.setEntity(new UrlEncodedFormEntity(accountInfo));
        }
        catch (UnsupportedEncodingException e) {
            // writing error to Log
            e.printStackTrace();
            startActivity(new Intent(this, AccountInputActivity.class));
        }

        HttpResponse response = null;
        InputStreamReader iSR = null;
        String source = null;

     // Making HTTP Request
        try {
            response = httpClient.execute(httpPost);

            // writing response to log
            Log.d("Http Response:", response.toString());

            iSR = new InputStreamReader(response.getEntity().getContent());

            BufferedReader br = new BufferedReader(iSR);   
            source = "";

            while((source = br.readLine()) != null)
            {
                source += br.readLine();
            }

        } catch (ClientProtocolException e) {
            // writing exception to log
            e.printStackTrace();
            startActivity(new Intent(this, AccountInputActivity.class));

        } catch (IOException e) {
            // writing exception to log
            e.printStackTrace();
            startActivity(new Intent(this, AccountInputActivity.class));
        }
        System.out.println(source);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_balance_checker, menu);
        return true;
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:37:42.050

这对我来说看起来很不错。我只看到了一段明显错误的代码：

```
while((source = br.readLine()) != null)
{
    source += br.readLine();
} 
```

这有点乱，与其试图解开它，我只会重写它。

```
StringBuilder sb = new StringBuilder();
String line;
while ((line = br.readLine()) != null)
  sb.append(line);
String source = sb.toString(); 
```

此外，您不应该从 onCreate() 甚至在您的 UI 线程中执行网络 I/O，因为它可能会阻塞很长时间，冻结您的整个 UI 并可能导致“应用程序无响应”（ANR）崩溃. 但是对于一个简单的测试程序，你现在可以让它滑动。对于生产代码，您将启动一个线程或使用 AsyncTask()。

无论如何，我们对为您构建和调试程序并不真正感兴趣。你试过这个代码吗？结果如何？

最后一点：像这样的登录序列可能会以 cookie 的形式返回身份验证令牌。我忘记了您如何从 HttpResponse 中提取 cookie，但您会希望这样做，然后将任何收到的 cookie 作为对该网站的任何后续请求的一部分包含在内。

* * *

原答案：

我想你已经把自己搞得一团糟了。Android 内置了 Apache http 客户端包，因此无需从 apache 下载任何 jar 文件。

我不熟悉 EntityUtils，但不管它是什么，如果你可以避免使用它，我会这样做。尽可能坚持使用捆绑的 API；您添加到应用程序的每个第三方或实用程序库都会增加臃肿，在移动设备上，您希望让应用程序尽可能轻巧。至于`consume()`没有找到实际的“”方法，这可能是文档中的错误。他们大概的意思`consumeContent()`。

该`releaseConnection()`调用可能仅对持久连接是必需的。那是相对高级的用法；我什至不在自己的代码中进行持久连接或托管连接。

您没有提供足够的信息来让我们知道您正在尝试做什么，但我会尝试给您一个合理的通用答案。

通过 http 协议将数据传输到服务器的方法有很多很多，但在绝大多数情况下，您希望通过 HttpPost 传输表单编码的数据。

程序是：

*   创建一个`DefaultHttpClient`
*   创建`HttpPost`请求
    *   `setHeader()`使用或根据需要添加标题`addHeader()`。
    *   添加要传输的数据，格式为`HttpEntity`
*   `client.execute()`使用 post 请求调用
*   等待并收到一个`HttpResponse`; 检查它的状态代码。
*   如果您希望从服务器返回数据，请使用`response.getEntity()`

有许多`HttpEntity`类，它们收集它们的数据并以各自的方式将其传输到服务器。假设您正在传输表单编码的数据，那么`UrlEncodedFormEntity`就是您想要的数据。该实体获取一个`NameValuePair`对象列表，它为表单编码数据正确格式化并传输它。

这是我为此编写的一些代码；这些只是代码片段，所以我会留给您将它们合并到您的应用程序中并自己调试它们。

```
/**
 * POST the given url, providing the given list of NameValuePairs
 * @param url   destination url
 * @param data  data, as a list of name/value pairs
 */
public HttpResponse post(String url, List<NameValuePair> data) {
    HttpPost req = new HttpPost(url);
    UrlEncodedFormEntity e;
    try {
        e = new UrlEncodedFormEntity(data, "UTF-8");
    } catch (UnsupportedEncodingException e1) {
        Log.e(TAG, "Unknown exception: " + e1);
        return null;   // Or throw an exception, it's up to you
    }
    return post(req, e);
}

/**
 * Post an arbitrary entity.
 * @param req   HttpPost
 * @param data  Any HttpEntity subclass
 * @return HttpResponse from server
 */
public HttpResponse post(HttpPost req, HttpEntity data) {
    try {
        HttpClient client = new DefaultHttpClient();
        req.setEntity(data);
        HttpResponse resp = client.execute(req);
        int status = resp.getStatusLine().getStatusCode();
        if (status != HttpStatus.SC_OK) {
            Log.w(TAG,
              "http error: " + resp.getStatusLine().getReasonPhrase());
            return null;   // Or throw an exception, it's up to you
        }
        return resp;
    } catch (ClientProtocolException e) {
        Log.e(TAG, "Protocol exception: " + e);
        return null;
    } catch (UnknownHostException e) {
        return null;
    } catch (IOException e) {
        Log.e(TAG, "IO exception: " + e);
        return null;
    } catch (Exception e) {
        // Catch-all
        Log.e(TAG, "Unknown exception: " + e);
        return null;
    }
} 
```

# javascript - 将对象字面量转换为排序数组

> ID：13694883
> 
> 赞同：6
> 
> 时间：2012-12-04T01:45:46.450
> 
> 标签：javascript, arrays, sorting

我有一个对象文字，其键的值是更多对象，内部对象的键之一被命名为“rank” - 并且具有浮点值。我想将对象文字转换为内部对象的数组，按“rank”的值排序。

**输入对象：**

```
{
452:{
     bla:123,
     dff:233,
     rank:2
  },
234:{
     bla:123,
     dff:233,
     rank:1
  } 
```

}

**输出数组：**

```
[
 { bla:123, dff:233, rank:1},
 { bla:123, dff:233, rank:2 }
] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T01:49:48.057

例子：

```
var data = {
    foo: {
        rank: 5
    },
    bar: {
        rank: 2
    },
    baz: {
        rank: 8
    }
}; 
```

Javascript：

```
var mappedHash = Object.keys( data ).sort(function( a, b ) {
    return data[ a ].rank - data[ b ].rank;
}).map(function( sortedKey ) {
    return data[ sortedKey ];
}); 
```

这将首先`sort`是内部对象的值，`obj.rank`然后`map`是包含对象的*Array*。

**结果**：`[{rank: 2}, {rank: 5}, {rank: 8}]`

* * *

参考：[`Object.keys`](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys&ei=Ele9UP-5F8jE4gTo6oD4Bw&usg=AFQjCNGS2XnTfEoWXTgd6aYQgHSRp6_Avg), [`Array.prototype.sort`](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort&ei=Nle9UIyFJ8f44QST4IGICA&usg=AFQjCNHjOWoFr-M96-uu3nqVgokfuhQr7A),[`Array.prototype.map`](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map&ei=4Ve9UJvEEMjE4gTo6oD4Bw&usg=AFQjCNFsASIf8Dn00uRKdgprYm9Y6rymaA)

* * *

^(上面的代码包含 ECMAscript 262 第 5 版代码，在所有现代浏览器中都可用。如果您还想支持旧版浏览器，则需要包含各种 ES5-Shim 库之一。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:51:13.683

遍历对象的属性，将内部对象推入数组，然后使用自定义排序函数对数组进行排序：

```
var inputObject = {}, // your object here
    arr = [];

for (var k in inputObject)
    arr.push(inputObject[k]);

arr.sort(function(a,b) { return a.rank - b.rank; }); 
```

# mysql - 如何在mysql中输入数据

> ID：13694886
> 
> 赞同：0
> 
> 时间：2012-12-04T01:46:06.403
> 
> 标签：mysql

看其他问题我无法弄清楚，所以我想我会问。我对mysql真的很陌生，所以请不要笑。我正在创建名为 (department) 的表，该表为字段设置了参数。我正在尝试将 5 行信息加载到该字段中。我知道如何做 1 行，但我对如何做 5 感到困惑。有什么帮助吗？

表格示例：

```
+---------+----------------+-----------+
| dnumber | dname          | mgrssn    |
+---------+----------------+-----------+
|       1 | Headquarters   | 888665555 |
|       2 | Development    | NULL      |
|       3 | Sales          | NULL      |
|       4 | Administration | 987654321 |
|       5 | Research       | 333445555 |
+---------+----------------+-----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:51:53.863

你一步一步地做每一行。

所以像这样：

```
INSERT INTO Department (dnumber, dname, mgrssn) VALUES (1, "Headquarters", 888665555), (2, "Development", NULL), (3, "Sales", NULL), (4, "Administration", 987654321), (5, "Research", 333445555); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:56:43.637

这是一个非常好的 SQL 备忘单。如果您需要将大量数据加载到表中，您应该考虑使用 C# 编写存储过程。

[http://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:50:13.063

插入某个表 (col1,col2,col3) 值 (1,2,3),(1,2,3),(1,2,3),(1,2,3),(1,2,3)

# jquery - jQuery中的验证功能不起作用

> ID：13694890
> 
> 赞同：0
> 
> 时间：2012-12-04T01:46:09.523
> 
> 标签：jquery, html

我正在使用以下 HTML 代码来显示表格：

```
<table border="1" id="markstbl">
   <thead>
      <tr>
         <th class="answermarksth">Marks per Answer</th>
         <th class="totalmarksth">Total Marks</th>
         <th class="noofmarksth">Marks Remaining</th>
      </tr>
   </thead>
   <tbody>
      <tr class="questiontd">
         <td class="answermarkstd">
            <input class="individualMarks q1_mark_0" q_group="1" name="answerMarks[]" id="individualtext" type="text" />
         </td>
         <td class="totalmarkstd" rowspan="2">4</td>
         <td class="noofmarkstd q1_ans_text" q_group="1" rowspan="2"><strong>4</strong></td>
      </tr>
      <tr class="questiontd">
         <td class="answermarkstd">
            <input class="individualMarks q2_mark_0" q_group="1" name="answerMarks[]" id="individualtext" type="text" />
         </td>
         <td class="totalmarkstd" rowspan="1">6</td>
         <td class="noofmarkstd q2_ans_text" q_group="1" rowspan="1"><strong>0</strong></td>
      </tr>
   </tbody>
</table> 
```

下面是表格的样子：

```
Marks Per Answer                Total Marks    Marks Remaining
(blank text input)                   4              4
(value=6 text input)                 6              0 
```

我试图验证表格，以便如果文本`input`为空白，则显示一条消息。如果 'Marks Remaining' 不等于 0，则显示一条验证消息（如果大于 0，则显示一条验证消息，如果小于 0，则显示一条不同的验证消息）。

问题是它没有输出任何验证消息。为什么它不执行任何验证？

这是我的 jQuery 代码：

```
function validation() {
    var alertValidation = "";
    var _qid = "";
    var _msg = "";
    var questions = $('#markstbl td[class*="_ans"]').length;

    $("[class*='q'").each(function (i) {
        var marks = parseInt($("[class*=q" + i + "_mark]").text());
        _qid = $(".q" + i + "_ans_org").text();
        _msg = "You have errors on Question Number: " + _qid + "\n";

        if (!this.value) {
            alertValidation += "\n\u2022 You have not entered in a value in the Indivdiaul Marks textbox all your Answers\n";
        }

        if ($("[class*=q" + i + "_mark]").text() < '0') {
            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
        } else if ($("[class*=q" + i + "_mark]").text() > '0') {
            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
        }

        if (alertValidation != "") {
            return false; //Stop the each loop 
        }    
    });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:24:49.053

您的 jQuery 代码确实有错误。此选择器`$("[class*='q'")`无效。它需要是这样的： `$("[class*='q']")`.

这是一个运行代码的 jsfiddle：http: [//jsfiddle.net/jYZSX/](http://jsfiddle.net/jYZSX/)

我仍在阅读问题以弄清楚验证应该如何工作。

# html - 使用 CSS 垂直格式化数学方程 (5,343 + 32)

> ID：13694899
> 
> 赞同：7
> 
> 时间：2012-12-04T01:47:20.773
> 
> 标签：html, css, layout, css-float

我正在尝试使用 CSS 垂直格式化数学方程。例如 5,343 + 32 应该这样格式化：

第 1 行：**5,343**（右对齐）

第2行：**+**（左对齐）**32**（右对齐）---注意加号和底部数字在同一行。

第 3 行：**------**（横线）

在过去的一个小时里，我一直在玩这个，而且运气很差。

我用 HTML 布局如下：

```
<div id="textbox">
<p class="upperNum">5,343</p>
<p class="sign">+</p>
<p class="lowerNum">32</p>
<p class="line"><hr></p>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T01:53:28.187

# 语义方法

这是一种标记方程式的语义方法，从相同的标记中，可以通过添加单个类来水平或垂直呈现。这些方程由**数字**、**运算符**和**等号**组成。这是方程式的标记：

```
<span class="equation">
  <span class="number">5,343</span>
  <span class="operator">+</span>
  <span class="number">32</span>
  <span class="equals">=</span>
  <span class="number">5,375</span>
</span> 
```

仅此一项就水平渲染：

5,343 + 32 = 5,375

使用一点 CSS，我们很快就可以转换成堆叠布局。我们只需向元素添加一个`stacked`类：`equation`

```
<span class="equation stacked">
  <span class="number">5,343</span>
  <span class="operator">+</span>
  <span class="number">32</span>
  <span class="equals">=</span>
  <span class="number">5,375</span>
</span> 
```

下面的 CSS 具有魔力：

```
.equation.stacked {
  display: inline-block;
}

.equation.stacked .number {
  display: block;
  margin-left: 1em; /* space for the operator */
  text-align: right;
}

.equation.stacked .operator {
  float: left;
}

.equation.stacked .equals {
  display: block;
  height: 0;
  border-bottom: solid 1px black;
  overflow: hidden;
} 
```

这呈现如下：

![堆叠方程渲染](../Images/97336bb4f65150a9f859926f78a42098.png)

这是您可以探索的 JSBin：http: [//jsbin.com/afemaf/1/edit](http://jsbin.com/afemaf/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T02:00:26.710

你的意思是这样的吗？： http: [//jsfiddle.net/PkfAU/2/](http://jsfiddle.net/PkfAU/2/)

![在此处输入图像描述](../Images/84c880b3ae1d59fd5ce9322bcae484dc.png)

您要做的是使用 div，因为它们更适合创建布局。正如另一个答案指出的那样，段落也是有效的，但我发现使用 div 更容易看到。在这种情况下，您将需要一个容器 div 和三个水平的，其中第二个也是一个容器。

`.plus`并且`.number`浮动在其容器内`.second`，因为您需要它们使用相同的水平空间（所有浮动元素都需要包装器）。

HTML：

```
<div class="container">
    <div class="first">5,343 </div>
    <div class="second">
        <div class="plus">+</div>
        <div class="number">32</div>
    </div>
    <div class="third">
        <div class="result">5,375</div>
    </div>
</div> 
```

CSS：

```
.container {
    width:200px;
}

.first,
.second {
    width:200px;
    text-align:right;
    display:table;
}
.plus {
    width:auto;
    float:left;
}
.number {
    width:auto;
    float:right;
}
.third {
    width:200px;
    text-align:right;
    border-top:1px solid black;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:02:33.120

我认为这可能是你最好的选择：

HTML：

```
<div id="textbox">
    <p class="upperNum">5,343</p>
    <p class="lowerNum">
        <span class="operand">32</span>
        <span class="sign">+</span>
    </p>
    <br class="clear" />
    <p class="line"><hr></p>
</div> 
```

CSS：

```
#textbox { width: 75px; }
.upperNum { text-align: right; }
.operand { float: right; }
.sign { float: left; }
.clear { clear: both; } 
```

这是一个显示这种效果的小提琴：

[http://jsfiddle.net/8CPar/](http://jsfiddle.net/8CPar/)

在这里，您可以在段落中包含底线，然后给运算符和操作数一个单独的可以浮动的跨度容器，从而为您提供所需的效果。然后，添加一个清除浮动的“清除中断”，使水平中断正确显示。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T02:09:22.877

这里有一些很好的例子，但我努力制作小提琴，所以不妨发布它。

您只需要确保正确设置宽度和对齐方式并且它应该可以解决。

我的[JSFiddle 示例](http://jsfiddle.net/L6EgA/23/)。

```
<div id="list">
    <span class="item">5472</span>
    <span class="operator">+</span><span class="item operand">32</span>

    <hr class="divider"/>

    <span class="result">5504</span>
</div> 
```

用 css

```
.list
{
    width:50px;
}

span
{
    display:block;
    margin-left:20px;
    font-family:"Lucida Console", Monaco, monospace;
    width:50px;
}

.operator
{
    float:left;
    width:20px;
    margin-left:0px;
}

.divider
{
    clear:both;
    width:40px;
    margin-left:20px;
}
.operand
{
    float:left;
    width:50px;
} 
```

我还使用 , 创建了一个示例`pre`，它使用预格式化的文本，所以它应该仍然是准确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T02:18:15.867

经典，

```
<html>
<head>
    <style type="text/css">
        .textbox
        {
            width: 100px;
        }
        .upperNum
        {
            text-align: right;
            width: 100%;
        }
        .sign
        {
            float: left;
            text-align: left;
        }
        .lowerNum
        {
            text-align: right;
        }
        .secondline
        {
            clear: both;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="textbox">
        <div class="upperNum">
            5,343
        </div>
        <div class="secondline">
            <div class="sign">
                +
            </div>
            <div class="lowerNum">
                32
            </div>
        </div>
        <div>
            <hr />
        </div>
    </div>
</body>
</html> 
```

# mysql - MySQL ORDER BY 多列 ASC 和 DESC

> ID：13694907
> 
> 赞同：33
> 
> 时间：2012-12-04T01:49:02.883
> 
> 标签：mysql, sql-order-by, multiple-columns

我有 2 个 MYSQL 表，**用户**和**分数**。细节：

*   用户表：

![在此处输入图像描述](../Images/0d2c94b413bf7445ae54abcdb1aa6bf9.png)

*   成绩表：

![在此处输入图像描述](../Images/120f0fd4ca81541cee43c7c52ac14881.png)

我的意图是让 20 个用户列表具有**点**字段排序 DESC（降序）结合**avg_time**字段排序 ASC（升序）。我使用查询：

```
SELECT users.username, scores.point, scores.avg_time
FROM scores, users
WHERE scores.user_id = users.id
GROUP BY users.username
ORDER BY scores.point DESC, scores.avg_time
LIMIT 0, 20 
```

结果是：

![在此处输入图像描述](../Images/b467666810c7c6cc989b66d0da8dab70.png)

结果是错误的，因为第一行恰好是 point = 100 和 avg_time = 60。

我想要的结果是：

```
username    point    avg_time
demo123      100        60
demo123456   100       100
demo         90        120 
```

我用不同的查询尝试了很多次，但结果仍然是错误的。你能给我一些解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-04T11:39:11.370

好的，我想我现在明白你想要什么了，让我在询问前澄清一下。您希望每个用户有 1 条记录。对于每个用户，您都需要他们的 BEST POINTS 得分记录。在每位用户的最佳积分中，您想要平均时间最长的积分。一旦您拥有所有用户的“最佳”值，您希望最终结果首先按最佳点排序......几乎就像比赛的排名一样。

所以现在查询。如果上述陈述是准确的，您需要从获得每人的最佳分数/平均时间开始，并为该条目分配一个“排名”。这很容易使用 MySQL @ 变量完成。然后，只需包含一个 HAVING 子句，只保留每个人的排名为 1 的记录。最后应用最佳点和最短平均时间的顺序。

```
select
      U.UserName,
      PreSortedPerUser.Point,
      PreSortedPerUser.Avg_Time,
      @UserRank := if( @lastUserID = PreSortedPerUser.User_ID, @UserRank +1, 1 ) FinalRank,
      @lastUserID := PreSortedPerUser.User_ID
   from
      ( select
              S.user_id,
              S.point,
              S.avg_time
           from
              Scores S
           order by
              S.user_id,
              S.point DESC,
              S.Avg_Time ) PreSortedPerUser
         JOIN Users U
            on PreSortedPerUser.user_ID = U.ID,
      ( select @lastUserID := 0,
               @UserRank := 0 ) sqlvars 
   having
      FinalRank = 1
   order by
      Point Desc,
      Avg_Time 
```

[SQLFiddle 处理的结果](http://sqlfiddle.com/#!2/d131d/6)

请注意，由于获得答案需要内联 @variables，因此每行末尾有两个额外的列。这些只是“剩余的”，可以在您尝试执行的任何实际输出演示中被忽略...或者，您可以将整个内容包装到一个更高的级别，以获得您想要的几列

```
select 
      PQ.UserName,
      PQ.Point,
      PQ.Avg_Time
   from
      ( entire query above pasted here ) as PQ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T01:56:05.867

我想你想念关于表关系的理解..

> 用户：分数 = 1：*

只是`join`不是一个解决方案。

这是你的意图吗？

```
SELECT users.username, avg(scores.point), avg(scores.avg_time)
FROM scores, users
WHERE scores.user_id = users.id
GROUP BY users.username
ORDER BY avg(scores.point) DESC, avg(scores.avg_time)
LIMIT 0, 20 
```

（此查询通过 desc 点获取每个用户的平均点和平均 avg_time，asc）avg_time

如果你想得到每个分数排名？采用`left outer join`

```
SELECT users.username, scores.point, scores.avg_time
FROM scores left outer join users on scores.user_id = users.id
ORDER BY scores.point DESC, scores.avg_time
LIMIT 0, 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T15:19:41.890

@DRapp 是个天才。我一直不明白他是如何编写 SQL 的，所以我尝试按照自己的理解编写代码。

```
 SELECT 
      f.username,
      f.point,
      f.avg_time
    FROM
      (
      SELECT
        userscores.username,
        userscores.point,
        userscores.avg_time
      FROM
        (
        SELECT
          users.username,
          scores.point,
          scores.avg_time
        FROM
          scores
        JOIN users
        ON scores.user_id = users.id
        ORDER BY scores.point DESC
        ) userscores
      ORDER BY
        point DESC,
        avg_time
      ) f
    GROUP BY f.username
    ORDER BY point DESC 
```

通过使用 GROUP BY 而不是用户 @variables，它会产生相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:36:04.170

默认按照pk id排序，所以结果
username point avg_time
demo123 100 90 ---> id = 4
demo123456 100 100 ---> id = 7
demo 90 120 ---> id = 1

# java - 类的字段和实例的基本 Java/OOP 不确定性

> ID：13694908
> 
> 赞同：2
> 
> 时间：2012-12-04T01:49:03.373
> 
> 标签：java

在一个类中，您可以在其中创建字段，如以下示例中的 int bar。

```
Class foo{
    int bar;
    foo(int bar){
         bar = bar;
    }

    int getBar() {
         return bar;
    }   

    void setBar(int bar) {
         bar = bar;
    }
} 
```

1.  每次我在另一个类中创建一个新的 foo 对象时，该特定对象（foo 的实例）是否会有一个 bar 属性，当使用 setBar() 更改时，只会影响该实例而不影响其他实例？

2.  我经常看到人们在上面的示例中为 bar 等属性创建 getter 和 setter。如果我觉得懒惰并且我只是为自己/乐趣编写代码，我是否可以通过访问该属性`FooInstance1.bar = 22;`而不是编写 setter 来修改该类的任何实例的 bar 属性，它的效果与问题相同1（只是实例被改变了）？

3.  Java 编译器如何知道构造函数是什么方法？由于它与类具有相同的名称吗？还是由于没有在函数头中指定返回值这一事实？也许编译器认为什么是构造函数甚至都无关紧要（常规函数之间没有语法差异），它可能只是人们用来区分函数含义的语义事物。

编辑：我很难选择最佳答案。我从每个人身上学到了一些新东西。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:53:50.503

1.  是的，这就是成员变量的行为，每个实例都存在一个副本。`static`另一方面，变量是类级变量，所有实例共享一个副本。

2.  最好不要直接公开成员并提供 getter 来访问它们。公共 setter 通常也不鼓励更好地控制对象状态的修改方式。但是，是的，一旦您将它们声明为公开，您也可以直接修改它们。

3.  是的，构造函数是没有返回类型且名称与类相同的特殊方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T01:53:02.363

1) 是的。这是正确的。

2）是的，你可以，但最好的做法是使用 getter 和 setter。这样，类的作者可以为确保在 get 或 set 上执行的属性编写特殊的逻辑。例如，某些属性可能是动态计算的，或者当属性更改时会向侦听器发送通知。

3) 构造函数是没有返回值并且与类同名的方法。可以有任意数量的构造函数，但每个构造函数都必须具有唯一的参数类型组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T01:56:42.117

1.  是的。
2.  是的，但不鼓励这样做。使用 OO，您试图隐藏有关您的实例变量的信息，并根据需要为它们提供访问权限。此外，将变量设置为`public`使其容易受到无意写入或非特权读取的影响。
3.  *Java 通过其签名*识别每个方法。签名由其名称和参数类型组成。例如，该`main`方法的签名为`main(String[])`. 构造函数由它们标识，它们具有与类相同的区分大小写的名称。

顺便说一句，您可能想`this.bar = bar`改用，或完全重命名传入参数。在构造函数内部，`bar`变量的范围对于传入的内容是本地的，因此您的实例级别`bar`尚未分配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T01:51:47.230

1.  是的。这正是它的工作原理。

2.  是的，您可以这样做，但您必须将该字段声明为公开：

    `public int bar;`

    请注意，这通常是一个坏主意，应该避免。

3.  是的，构造函数与类具有相同的名称，并且没有返回类型。

**笔记：**

您应该始终将类的名称大写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T02:39:23.613

Q1 & Q3 得到了很好的答案。只需为 Q2 添加一些内容：

即使您是为了好玩而编写代码，当您发现没有访问器就无法实现一些功能时，您可能会感到失望。

1.  您不希望人们更改该字段的值，但仍对其具有读取权限。

2.  当您设置字段值时，您可能希望为其提供一些验证机制。您可以在 setter 中进行验证。

3.  如果你想玩反射、序列化、模拟对象等，你应该有 getter 和 setter。

仅列举一些没有访问器可能无法实现的功能。还有很多！

# enums - 将枚举转换为二进制（通过整数或类似的东西）

> ID：13694909
> 
> 赞同：5
> 
> 时间：2012-12-04T01:49:25.340
> 
> 标签：enums, binary, ada

我有一个带有 2 个值的 Ada 枚举`type Polarity is (Normal, Reversed)`，我想将它们分别转换为 0、1（或 True、False——因为布尔值似乎隐含地像二进制一样好），所以我可以将它们的值作为特定位存储在字节。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:44:56.267

[*3.5.5 离散类型*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-5-5.html)的操作包括`function S'Pos(Arg : S'Base)`“返回 的值的位置编号`Arg`，作为*通用整数*类型的值”。因此，

```
Polarity'Pos(Normal) = 0
Polarity'Pos(Reversed) = 1 
```

[*您可以使用13.4 枚举表示子句*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-13-4.html)更改编号。

...而且当然：

```
Boolean'Val(Polarity'Pos(Normal)) = False
Boolean'Val(Polarity'Pos(Reversed)) = True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:25:04.950

一个简单的方法是查找表：

```
Bool_Polarity : constant Array(Polarity) of Boolean 
              := (Normal=>False, Reversed => True); 
```

然后将其用作

```
 B Boolean := Bool_Polarity(P); 
```

当然，使用 'Pos 属性并没有错，但是 LUT 使映射变得可读且非常明显。

由于它是恒定的，您希望它在恒定折叠阶段优化掉，并且似乎：我已经使用类似的技巧为 AVR 编译具有非常可接受的可执行文件大小（低至 0.6k 以独立驱动 2 个步进电机）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T09:05:50.917

我认为您正在寻找的是带有表示子句的记录类型：

```
procedure Main is

   type Byte_T is mod 2**8-1;
   for Byte_T'Size use 8;

   type Filler7_T is mod 2**7-1;
   for Filler7_T'Size use 7;

   type Polarity_T is (Normal,Reversed);
   for Polarity_T use (Normal => 0, Reversed => 1);
   for Polarity_T'Size use 1;

   type Byte_As_Record_T is record
      Filler   : Filler7_T;
      Polarity : Polarity_T;
   end record;

   for Byte_As_Record_T use record
      Filler at 0 range 0 .. 6;
      Polarity at 0 range 7 .. 7;
   end record;
   for Byte_As_Record_T'Size use 8;

   function Convert is new Ada.Unchecked_Conversion
     (Source => Byte_As_Record_T,
      Target => Byte_T);

   function Convert is new Ada.Unchecked_Conversion
     (Source => Byte_T,
      Target => Byte_As_Record_T);

begin

   -- TBC
   null;

end Main; 
```

由于`Byte_As_Record_T`&`Byte_T`的大小相同，您可以使用它`unchecked conversion`来安全地在类型之间进行转换。

的表示子句`Byte_As_Record_T`允许您指定放置哪些位/字节`polarity_t`。（我选择了第 8 位）

我的定义`Byte_T`可能不是你想要的，但只要它是 8 位长，这个原则应该仍然可行。从 Byte_T 你也可以安全地向上转换为`Integer`or`Natural`或`Positive`。您还可以使用相同的技术直接访问/从 32 位整数到/从 32 位记录类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T19:00:05.033

这里有两点：

1) 枚举**已经存储为 binary**。一切都是。特别是，如上所述，您的枚举将存储为`0`for`Normal`和`1`for `Reversed`，除非您特意告诉编译器使用其他值。

如果您想从枚举中获取该值`Integer`而不是枚举值，您有两种选择。该`'pos()`属性将为该枚举在枚举中的位置返回一个从 0 开始的数字，`Unchecked_Conversion`并将返回计算机为其存储的实际值。（值没有区别，除非使用了枚举表示子句）。

2）枚​​举很好，但**不要重新发明`Boolean`**。如果您的枚举只能有两个值，那么您不会通过自定义枚举获得任何有用的信息，并且会丢失很多有用的属性`Boolean`。布尔值可以直接从循环和`if`检查中选择。布尔值为它们定义了`and`, `or`,`xor`等。可以将布尔值放入打包数组中，然后在整个数组中按位定义这些相同的运算符。

我的一个特殊的烦恼是人们最终定义了一个自定义布尔值，逻辑反转（所以它的真实条件是 0）。如果你这样做，[Ada Lovelace](http://en.wikipedia.org/wiki/Ada_Lovelace)的鬼魂将从坟墓里回来，并迫使你听详尽的解释如何用差分机计算伯努利序列。不要让这种事情发生在你身上！

因此，如果拥有第三个枚举值永远没有意义，**您只需将对象命名为适当描述`True`条件**的名称（例如`Reversed_Polarity : Boolean;`：），然后继续您的快乐方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T14:07:30.557

似乎我需要做的就是`pragma Pack([type name]);`（其中“类型名称”是由极性组成的类型）将值压缩到一个位。

# windows - 有什么工具可以让程序在 Windows 的不同用户下运行？

> ID：13694916
> 
> 赞同：-3
> 
> 时间：2012-12-04T01:50:20.200
> 
> 标签：windows, impersonation

假设我希望我的程序在预定义的 SYSTEM 帐户下运行，而不是当前登录用户，你知道有什么工具可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:50:06.420

**ShellRunas** v1.01

你可以在这里免费下载。 [http://technet.microsoft.com/en-us/sysinternals/cc300361.aspx](http://technet.microsoft.com/en-us/sysinternals/cc300361.aspx)

**ShellRunas** v.1.0 是 Mark Russinowich 的一个新的 Sysinternals 工具。它使您能够从 Windows 资源管理器运行具有不同凭据的程序。

用法：

```
 shellrunas [/reg | [/quietreg ] | /regnetonly [/quiet] | unreg | [/netonly] <program> <arguments> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:08:51.303

这是一篇解释使用[psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)工具[以 SYSTEM 帐户运行 CMD 提示符的帖子。](http://verbalprocessor.com/2007/12/05/running-a-cmd-prompt-as-local-system/)与 ShellRunAs 工具一样，psexec 也是 Mark Russinovich；与 ShellRunAs 不同，psexec 可以在远程系统上执行命令并具有更多程序选项。

“运行方式”命令也可能有效，但我还没有验证它是否可以与 SYSTEM 帐户一起使用。这是2000 和 XP以及[Vista、7 和 8中](http://technet.microsoft.com/en-us/library/cc771525%28v=ws.10%29.aspx)[“运行方式”](http://support.microsoft.com/kb/294676)的信息。

# java - Android java，位图变量内存使用情况

> ID：13694919
> 
> 赞同：1
> 
> 时间：2012-12-04T01:50:57.230
> 
> 标签：java, android, memory, memory-management, bitmap

假设我们正在开发一个包含怪物的游戏。我们创建了一个 MonsterHandeler 类来加载我们的怪物将使用的所有位图。然后我们将这些位图存储在变量中。然后我们创建一个 Monster 类，它还存储从 MonsterHandeler 类发送到构造函数的 Bitmap 变量。如果屏幕上有 10 个怪物对象，这些变量会共享内存还是占据自己的位置？

我希望我不是不清楚我的意思，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:59:06.503

位图作为引用传递，可能不会被复制（除非你正在复制它们）。当然，你的十个怪物对象会占用一些内存，但是如果你的位图已经加载，那么在怪物对象中存储它们的引用不会有任何额外的惩罚。

请注意，如果删除了对位图的原始引用，则保留在怪物对象中的对它们的引用将阻止它们被释放，但这可能是您想要的。

# iphone - UISearchDisplayController 的表格视图分隔线在模式视图中加载时出现故障，我该如何解决？

> ID：13694920
> 
> 赞同：2
> 
> 时间：2012-12-04T01:50:58.207
> 
> 标签：iphone, objective-c, ios, uisearchbar, modalviewcontroller

我正在尝试加载覆盖我的导航控制器的基本搜索视图（即，*不*推送到导航堆栈上）。为了实现这一点，我正在使用`[self presentModalViewController:vc animated:NO]`.

全模态视图演示代码：

```
- (void)searchButtonPressed
{
    TMSearchViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Search"];
    [self presentModalViewController:vc animated:NO];
    vc.searchDisplayController.searchBar.delegate = self;
} 
```

在屏幕上显示模态视图后，将运行以下代码（在搜索视图的控制器内）：

```
- (void)viewDidAppear:(BOOL)animated
{
    [self.searchDisplayController.searchBar becomeFirstResponder];
    [self.searchDisplayController setActive:YES animated:NO];
} 
```

问题是，当搜索视图呈现时，它会做正常的事情，即用透明的黑色视图将表格视图涂黑，但它似乎没有覆盖表格视图的分隔符，如下所示：

![表视图故障](../Images/19e5da831c979cbfe7044f625b1ac289.png)

我真的不知道如何解决它。我最好的猜测是，这与模态控制器加载我无法正确理解的视图的过程有关。我已经尝试将其`becomeFirstResponder`移至该`viewDidLoad`方法。我还尝试重新排序`setActive`方法和`becomeFirstResponder`方法，同时将方法更改`setActive`为`animated:NO`and `YES`。

到目前为止，无济于事，我显然不明白这里的某些东西，我猜我正在以一种无意的方式使用某些东西。请帮忙，谢谢:)

**编辑**：有趣的是，当我单击搜索栏上涂黑的表格视图`resignFirstResponder`，然后再次单击搜索栏内部以激活`becomeFirstResponder`它时，它加载正常，没有故障，它的意思是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:24:20.690

你试过 self.searchDisplayController.searchResultsTableView.separatorStyle=UITableViewCellSeparatorStyleNone; ??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:48:59.920

好的，经过数小时的代码混乱，试图理解我做错了什么，我终于找到了答案，或者至少找到了解决办法。（我仍然对实际出了什么问题感到困惑）

我只是从情节提要的界面构建器中删除了搜索栏。并用另一个替换它 -`searchDisplayController`当然，这涉及将搜索栏重新连接为 的搜索栏属性。

我最好的猜测是，无论出于何种原因，Xcode 都不喜欢我将 UI 元素拖入并将 UI 元素连接到界面构建器/情节提要的顺序。

希望这可以帮助某人。

# c# - Word 表格转 Excel

> ID：13694924
> 
> 赞同：0
> 
> 时间：2012-12-04T01:51:49.880
> 
> 标签：c#

我正在将表格从 word 导出到 excel，cut 发现 word 中的多行单元格将在 Excel 中拆分（每个单元格中的一个）。我知道 Excel 使用与 Word 不同的行终止符的原因。是否有任何使用 C# 互操作的解决方法？？？？提前致谢

# ruby - 如何在 ruby 中实例化对象

> ID：13694927
> 
> 赞同：-1
> 
> 时间：2012-12-04T01:52:01.093
> 
> 标签：ruby

（这里是ruby noob ..抱歉，如果我没有正确提出问题）

所以我有两个文件，一个包含一个包含一个类的模块......

文件_alpha.rb：

```
class alpha
  def a_name
     do stuff
  end
end 
```

文件_beta.rb：

```
module STUFF_IN_BETA
  class beta
    def b_name
      do more stuff
    end
  end
end 
```

所以我想在file_alpha中访问'def b_name'，但我不确定如何......

```
class alpha
  def a_name
     do stuff
     b_name()  <----HOW TO DO this?
  end
end 
```

如何使方法“b_name”可用于 alpha 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:56:31.757

如果您希望 b 成为向 a 添加方法的模块，请丢弃其中的`class`内容，然后执行以下操作：

```
class a
  include STUFF_IN_BETA
  def a
    do stuff
    b # this will call method b
  end
end

module STUFF_IN_BETA
  def b
    do more stuff
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:56:15.080

你需要包括你的课程需要'b.rb'

然后调用方法bb()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T02:08:18.010

就像是：

文件_beta.rb

```
module StuffInBeta
  def b
    do more stuff
  end
end 
```

文件_alpha.rb

```
require 'file_beta' 
class A
  def a
    do stuff
    b          # from the module 
  end
end 
```

# javascript - 是否可以使用 JavaScript 将文件下载到服务器

> ID：13694931
> 
> 赞同：2
> 
> 时间：2012-12-04T01:52:35.983
> 
> 标签：javascript

每次用户单击特定按钮时，我的 javascript 代码都需要向不同的服务器发送请求，并将文件下载到我的服务器，然后进行处理。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:54:20.487

JavaScript 本身无法做到这一点，因为它是一种[客户端脚本语言](http://en.wikipedia.org/wiki/Client-side_scripting)，这意味着它完全在用户的浏览器上运行，与服务器本身几乎没有关系。

但是，完全可以使用 PHP（或任何其他服务器端语言）执行此操作，然后让 JavaScript 告诉服务器运行 PHP 脚本以下载和处理文件。

# css - 如何缩进子 UL 项目

> ID：13694939
> 
> 赞同：0
> 
> 时间：2012-12-04T01:53:00.640
> 
> 标签：css, html-lists

你好，今晚我花了大约 4 个小时在这上面，我不得不放弃我所有的头发。我尽量不问足够简单的 css 问题，但我无法掌握列表项或更具体的子列表项。我发现的所有规则。

```
<li class="parent open">
<span class="parent open"></span>
<a href="/member-tags/forum">Member Tags</a>
<ul>
<li class="parent open">
<span class="parent open"></span>
<a href="/world-komp/forum">world of komp</a>
<ul>
<li>
<a href="/komps-bets/forum">komps bets</a>
</li>
<li>
<a href="/komps-daily-diary/forum">komps daily diary</a>
</li>
... 
```

我想让我的子项目的缩进更小，并且文本也更小以适应它们。这是一个屏幕截图。左边的黑色东西应该是箭头，指示我希望我的孩子物品在哪里。 ![在此处输入图像描述](../Images/33d4d11a037aed4cdaa3a02bd4590571.png)

您可以在我的网站 [http://onlinebanter.com上查看代码](http://onlinebanter.com)

感谢所有帮助，因为我真的花了太多时间试图弄清楚这一点，这不是我尝试的第一个晚上。

谢谢

```
ul.jquerymenu li.parent {
  background-image:none;
  list-style:none none;
}
.block ul {
  margin:0;
  padding:0 0 0.25em 1em;
}

ul.menu {
  border:none;
  list-style:none;
  text-align:left;
}

ul {
  list-style-type:disc;
}
.block ul, .block ol {
  margin-left:2em;
  padding:0;
}

ul, ol, dd {
  margin-bottom:1.5em;
  margin-left:2em;
}

ul.menu li {
  margin:0 0 0 0.5em;
}

li, li.leaf, ul.menu li, .item-list ul li {
  line-height:150%;
}

ul.menu li, ul.links li {
  margin:0;
  padding:0;
}

ul.jquerymenu li.parent {
  background-image:none;
  list-style:none none;
}

ul.menu li {
  margin:0 0 0 0.5em;
}

li, li.leaf, ul.menu li, .item-list ul li {
  line-height:150%;
}

ul.menu li, ul.links li {
  margin:0;
  padding:0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:58:41.543

您的 HTML 如下所示：

```
<ul>
  <li>...
  <ul>
    <li>.... 
```

应用以下CSS：

```
ul {
  margin-left: 2em;
} 
```

只需将值更改为`1em`，缩进就会减少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:00:43.357

在您的特定情况下，您可以使用 selector `.parent .parent ul`，如下所示：

```
.parent .parent ul {
margin-left: 1em;
font-size: 10pt;
} 
```

.parent .parent ul 找到一个 ul 元素，它是具有父类的元素的子元素，该元素又是具有父类的另一个元素的子元素。像这样：

```
<tag class="parent">
  <tag class="parent">
  </tag>
</tag> 
```

在该示例中，在具有父类的元素（标签）内部存在一个具有父类的元素（标签）。所以CSS可能是`.parent .parent { ... }`

现在，在其中放置一个 UL 元素：

```
<tag class="parent">
  <tag class="parent">
     <ul>
     </ul>
  </tag>
</tag> 
```

现在 CSS 选择器可以是`.parent .parent ul { ... }`

希望有帮助。

# php - 我应该将 $get 值与存储的相关数据库值进行比较吗？

> ID：13694955
> 
> 赞同：1
> 
> 时间：2012-12-04T01:54:11.210
> 
> 标签：php, oop, codeigniter

我正在尝试在 codeigniter 中实现重置用户密码。

我创建了一个用户发送电子邮件的表单，它在“重置”表中创建了一行，存储了他们创建的令牌，并将令牌附加到发送到电子邮件的链接中。

最后一步实际上是重置密码。在检查附加到电子邮件的令牌与存储在与该电子邮件关联的数据库中的令牌时，我不明白如何进行正确的比较，或者这是否是正确的方法。

在我拥有的当前代码中，我无法让它通过验证并实际重置密码。这是我的代码：

这是创建令牌和发送电子邮件的模型：

```
public function validate_retrieve($data) {

            $query = $this->db->where($data)->get('users', '1');

            foreach ($query->result() as $user)
            {
                $user->email;
                $user->salt;
                $user->id;

            }

            $token = sha1($user->email.$user->salt).dechex($user->id);
            $reset_token = array(
                'token' => $token,
                'email' => $user->email
            );

            $insert = $this->db->insert('reset', $reset_token, '1');
            return $reset_token;
        } 
```

和控制器：

```
public function retrieve()
        // REQUEST PASSWORD RESET
        // LOADED WHEN THE FORM IS SUBMITTED OFF THE PASSWORD PAGE AND SENDS THE EMAIL WITH TOKEN AND INSTRUCTIONS
        {
            $this->load->library('form_validation');
            $this->load->library('session');
            $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
            $this->load->model('user_model', 'um');
            $this->load->library('encrypt');
            $this->load->helper('url');
            $submit = $this->input->post('submit');
            $salt = $this->_salt();

            if($submit)
            // IF THE SUBMIT BUTTON IS SET
            {

                // START PROCESS TO CREATE $USER VARIABLE THAT HOLDS WHAT THE USER ENTERED IN THE FORM AND THAT CAN GET CHECKED AGAINST THE DB IN THE MODEL
                $user = $this->um->validate_retrieve(array('email' => $this->input->post('email')));

                // IF THE USER IS CREATED AND CHECKS OUT AND ALL OF THE ERRORS ARE CLEARED ON THE FORM
                if( $user && $this->form_validation->run() == TRUE ) {

                    $domain = "clci.dev/index.php";

                    // CREATE A TOKEN LINK TO SEND TO THE USERS EMAIL THAT EXIST IN THE DB AND WAS ENTERED

                    $token = $user['token'];
                    $link = "http://www.".$domain."/auth/reset/?token=$token";

                        $this->load->library('email');

                        $this->email->from('noreply@cysticlife.org', 'CysticLife');
                        $this->email->to($this->input->post('email')); 

                        $this->email->subject('Reset Password');
                        $this->email->message("Please go to the following web address to reset your password:\n\n$link\n\n-Your friends at CysticLife\n\nPlease remember to add the cysticlife.org domain to your address book to ensure that you receive your CysticLife e-Notifications as requested.");  

                        $this->email->send();
                        redirect('auth/success');
                        exit;

                    }
                    $this->form_validation->run() == FALSE;
                    $data['main_content'] = 'auth/password';
                    $this->load->view('includes/templates/main_page_template', $data);
                    $data['email_error'] = 'This email is invalid';
                }
            } 
```

现在这是我遇到的问题，重置模型：

```
public function verify_token($token)
          {
            $this->db->where('token', $token);
            $query = $this->db->get('reset');

            if ($query->num_rows() == 1) {

                return TRUE;
            } else {
                return FALSE;

            }
          }

          public function reset_password()
            {
              $salt = $this->_salt();
              $query = $this->db->get('reset', 1);
              $row = $query->row();

              $data = array(
                      'password' => $this->encrypt->sha1($salt . $this->encrypt->sha1($this->input->post('password'))),
                      'salt' => $salt
                    );  
              $this->db->where('email', $row->email);
              $this->db->update('users', $data);
            } 
```

和控制器：

```
public function reset_password()
            {
             $this->load->library('form_validation');
             $this->load->library('session');
             $this->load->model('user_model', 'um');
             $this->load->library('encrypt');
             $this->load->helper('url');
             $this->form_validation->set_rules('password', 'Password', 'trim|required'); 
             $this->form_validation->set_rules('password2', 'Confirm Password', 'trim|required|matches[password]');
             $salt = $this->_salt();
             $submit = $this->input->post('submit');

             if($submit) 
             {
              $validToken = $this->um->verify_token($token); 
              if($this->form_validation->run() == TRUE && $validToken == TRUE)
              {

              $this->um->reset_password(array('password' => $this->input->post('password', $salt)));

              $data['main_content'] = 'auth/success';
              $this->load->view('includes/templates/home_page_template', $data);

              }
              $this->form_validation->run() == FALSE;
           $data['main_content'] = 'auth/reset';
           $this->load->view('includes/templates/main_page_template', $data);
             }
            } 
```

我似乎很接近，但我肯定被卡住了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:03:02.930

```
http://yoursitename.com/reset/[hashcode] 
```

将链接发送到会员电子邮件，密码已由用户重置。

在网站上，您将检索哈希码以与您的数据库进行比较

```
public function reset($hashcode)
 {
    if($hashcode!=null)
    {
        // compare with db
        // if success 
        // redirect to create new password page
        // or show create new password form
    }
 } 
```

# android - 如何让所有的 TextView 孩子改变文本的颜色？

> ID：13694966
> 
> 赞同：0
> 
> 时间：2012-12-04T01:56:28.997
> 
> 标签：android

我有一个`LinearLayout`, `mRoot`，它有两个 的孩子`TextView`，例如

```
private TextView mNameView;
private TextView mValueView; 
```

我也`TextView`用`ColorStateList`. 现在，问题是当我按下 时`mRoot`，那些`TextView`不能改变文本的颜色。

但是当我将 设置`mRoot`为 的项目时`ListView`，当我按下该项目时，它可以改变文本的颜色。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:25:20.267

尝试在XML 声明中将`android:duplicateParentState`属性设置为。`true``TextView`

# iphone - 在 Xcode Storyboard 中禁用约束

> ID：13694972
> 
> 赞同：8
> 
> 时间：2012-12-04T01:57:21.697
> 
> 标签：iphone, ios, layout, storyboard, autolayout

我正在尝试布局一个非常简单的视图。我在视图中以网格状间距放置了 4 个自定义按钮。但是当我运行应用程序时，我得到了两个不同大小的按钮。我在这里包含了故事板和模拟器图像。

我很想禁用约束，但找不到在哪里做！我真的不想要他们。这只是一个简单的原型应用程序，最后我什至没有这些按钮，我将把所有东西都放在代码中。

我尝试拖入 4 个单独的按钮并尝试只拖入一个并将其复制到我想要的位置。我只是想让它们留在我放它们的地方！任何帮助，将不胜感激。

-标记

![故事板](../Images/4adf8f1ab2b71c76f62ab67575ded5c7.png)

![模拟器](../Images/6381542949c627f895a7be98f7166401.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T02:03:07.193

您在文件检查器中将其关闭（左侧第一个选项卡）——有一个名为“使用自动布局”的复选框（默认情况下已选中）。

# android - Android 远程查看通知

> ID：13694975
> 
> 赞同：5
> 
> 时间：2012-12-04T01:58:03.720
> 
> 标签：android, notifications, remoteview

我有一个使用远程视图的 android 通知栏。我有 2 个按钮可以播放和暂停音频，还有一个图标可以返回应用程序。我希望能够单击图标（或除 2 个按钮之外的任何位置）并返回应用程序。这是我的代码

```
Intent returnIntent = new Intent(_context, SplashScreenActivity.class);
returnIntent.setAction(Intent.ACTION_MAIN);
returnIntent.addCategory(Intent.CATEGORY_LAUNCHER);

PendingIntent remoteViewPendingIntent = PendingIntent.getActivity(_context,1, returnIntent,0);
remoteView.setOnClickPendingIntent(R.id.btnAppIcon, remoteViewPendingIntent); 
```

这一切都可以在 Android 4.1 上的模拟器中正常工作。按下通知中的图标时，它会成功返回到应用程序。然而，在三星 S3 上的 Android 4.0.3 上，活动在后台启动，但通知屏幕并未隐藏。我希望在选择图标后清除通知屏幕。我曾尝试在通知中使用 Notification.FLAG_AUTO_CANCEL，但这并没有解决问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:23:49.377

.setOnClickPendingIntent 行为因您所经历的不同 MFG 和版本而异。

要完成您想要的并自动折叠通知窗口（不使用反射），您必须为通知视图设置“全局”待处理意图。您还需要将您的 R.id.btnAppIcon 包含在该“捕获所有”意图视图中。

“全局/默认”通知待处理意图的示例：

```
contentIntent = PendingIntent.getActivity(YourClass.this, 0, notificationIntent, 0);
notification.contentIntent = contentIntent; 
```

与 PendingIntent.getActivity 一起使用时的“一般”通知意图将关闭任何设备上的通知窗口（正如我所观察到的）。

# objective-c - 如何在 iPad 中处理图像处理

> ID：13694976
> 
> 赞同：0
> 
> 时间：2012-12-04T01:58:11.983
> 
> 标签：objective-c, ios, ipad

我希望能够将图像从给定目录放置在 iPad 应用程序中，然后让用户调整图像大小并在屏幕上移动它。

我的问题是：允许用户调整图像大小（通过手势识别）并在屏幕上四处移动的最佳视图是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:11:11.080

石英 2D [http://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-TPXREF101](http://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-TPXREF101)

可以画出你想要的任何东西。用手势控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:11:56.060

您正在寻找已实现`UIScrollView`的`viewForZoomingInScrollView:`委托方法。

由于您要显示图像，因此将 a 添加`UIImageView`到滚动视图并在委托中返回它。

# mysql - MySQL 中的 Bash 脚本

> ID：13694977
> 
> 赞同：1
> 
> 时间：2012-12-04T01:58:37.753
> 
> 标签：mysql, bash, ubuntu

大家好，拜托我是 bash 脚本的新手，我的 bash 脚本在连接到 mysql 服务器以获取信息时遇到了一些挑战。这是我的脚本：

```
#! /bin/bash

MYSQL_USER="root"
MYSQL_PASSWORD="bibson13"
MYSQL_DATABASE="fredhosting"
MYSQL="/usr/bin/mysql –u$MYSQL_USER –p$MYSQL_PASSWORD -D$MYSQL_DATABASE"
$MYSQL -ss -e "select name,email,username,password from free_users where id_user=( select max(id_user) from free_users )" 
```

但是当我尝试运行它时，我不断得到这个：

```
/usr/bin/mysql  Ver 14.14 Distrib 5.5.28, for debian-linux-gnu (i686) using readline 6.2
Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: /usr/bin/mysql [OPTIONS] [database] 
```

请我真的不知道做错了什么。如果有人能帮助我提供一些关于该做什么的信息，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:11:53.717

主要问题是您有一些损坏的字符。具体来说，在您打算输入`-u`and `-p`（带有连字符）的地方，您却使用了`–u`and `–p`（带有短划线）。这可能是通过诸如 Microsoft Word 之类的文字处理器进行复制和粘贴的结果（这绝不是一个好主意）。一旦你把这些破折号改回连字符，你应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:12:13.933

在每个“-”符号之前，您的 MYSQL 变量 (E2 80) 中有 2 个无效字符。尝试清理线路。

# list - 带输出的haskell foldl

> ID：13694980
> 
> 赞同：0
> 
> 时间：2012-12-04T01:58:57.807
> 
> 标签：list, haskell

我正在解析一个字符串，例如“xxxxyzz”，所以如果字符是“x”，那么我需要做一个输出并同时对列表进行更改。下面的代码是

```
import Data.Char
output l = zipWith (+) rr ll
            where
              out = foldl
                        ( \ (c,a) e ->
                               case c of
                                'x' -> chr c!!0 --output first element of the list
                                       ([1]++tail(c),a) ) -- add [1] to the c list
                        ([0,0,0,0,0],[0,0,0,0,0])
              (ll,rr) = out l 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:10:07.070

你可以写（不推荐）一些像

```
output'' :: String -> IO String
output'' = fmap reverse . foldM parseChar []
  where parseChar xs 'x' = putStrLn "'x' to upper" >> return ('X':xs)
        parseChar xs 'y' = putStrLn "'y' to 'W'"   >> return ('W':xs)
        parseChar xs  x  = putStrLn "no transform" >> return ( x :xs) 
```

带输出

```
*Main> output'' "xyz"
'x' to upper
'y' to 'W'
no transform
"XWz" 
```

但是，从[For a Some Monads More](http://learnyouahaskell.com/for-a-few-monads-more) (Learn You a Haskell for Great Good!)

你可以写一些像：

```
import Control.Monad.Writer

output :: String -> Writer [String] String
output [] = return []
output (x:xs) = do
  xs' <- output xs
  x'  <- case x of
         'x' -> tell ["'x' to upper"] >> return 'X'
         'y' -> tell ["'y' to 'W'"]   >> return 'W'
         _   -> tell ["no transform"] >> return x
  return (x':xs') 
```

使用 monads 更加灵活，而使用 Writer 可以让你的代码变得纯粹（纯粹并且你可以控制如何处理 monadic 上下文和数据；而不是直接 IO`output''`函数）。

您可以`output`在不纯代码中使用函数作为

```
main = do
  input <- getLine
  let (result, logging) = runWriter $ output input
  putStrLn $ "Result: " ++ result
  putStrLn $ unlines logging 
```

运行输出可能是

```
*Main> main
hxdynx
Result: hXdWnX
'x' to upper
no transform
'y' to 'W'
no transform
'x' to upper
no transform 
```

您可以将 monad 与诸如“foldM”之类的 monadic 函数结合起来，有些像

```
output' :: String -> Writer [String] String
output' = fmap reverse . foldM parseChar []
  where parseChar xs 'x' = tell ["'x' to upper"] >> return ('X':xs)
        parseChar xs 'y' = tell ["'y' to 'W'"]   >> return ('W':xs)
        parseChar xs  x  = tell ["no transform"] >> return ( x :xs) 
```

（对数数组颠倒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:53:13.843

在 Haskell 中，如果不使用 monad，您将无法预测执行顺序。对于初学者，您可能想尝试在`do`块中进行一些测试`main`，然后将其重写为单独的函数。

您可能想熟悉 Haskell 中的 IO 概念： [http ://www.haskell.org/onlinereport/haskell2010/haskellch7.html#x14-1420007](http://www.haskell.org/onlinereport/haskell2010/haskellch7.html#x14-1420007)

# python - PyOpenSSL：获取 CRL 的上次更新和下次更新字段

> ID：13694984
> 
> 赞同：4
> 
> 时间：2012-12-04T01:59:51.077
> 
> 标签：python, openssl, pyopenssl

我正在尝试使用 PyOpenSSL 获取 CRL 的日期。CRL 类不包含它们作为可访问成员。我正在浏览所有下划线成员，但我宁愿不使用其中之一，因为它们不应该是“公共的”。

关于日期的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T02:21:10.610

使用 pyOpenSSL 无法做到这一点，但实际上可以使用 PyCrypto 的 asn1 解析器提取来自 CRL 的信息，而不会出现太多问题。请参见下面的示例：

```
import types
from Crypto.Util import asn1
import datetime as dt
from pytz import UTC

def decode_time(obj, format):
    return dt.datetime.strptime(obj.payload, format).replace(tzinfo=UTC)

time_formats = {
    23: lambda(obj): decode_time(obj, "%y%m%d%H%M%SZ"),
    24: lambda(obj): decode_time(obj, "%Y%m%d%H%M%SZ"),
    }

def crl_dates(crl_der):
    crl_seq = asn1.DerSequence()
    crl_seq.decode(crl_der)
    if len(crl_seq) != 3: raise ValueError("unknown crl format")
    tbsCertList = asn1.DerSequence()
    tbsCertList.decode(crl_seq[0])
    thisUpdate = asn1.DerObject()
    nextUpdate = asn1.DerObject()
    if isinstance(tbsCertList[0], types.StringTypes): # CRL v1
        thisUpdate.decode(tbsCertList[2])
        nextUpdate.decode(tbsCertList[3])
    else:
        if tbsCertList[0] > 1: raise ValueError("unsupported CRL profile version: %d" % tbsCertList[0])
        thisUpdate.decode(tbsCertList[3])
        nextUpdate.decode(tbsCertList[4])
    if thisUpdate.typeTag not in time_formats or \
       nextUpdate.typeTag not in time_formats:
        raise ValueError("invalid CRL date/time fields")
    return time_formats[thisUpdate.typeTag](thisUpdate), \
           time_formats[nextUpdate.typeTag](nextUpdate)

if __name__ == '__main__':
    from urllib2 import urlopen
    print "CRL v1", crl_dates(urlopen("http://crl.verisign.com/pca1.1.1.crl").read())
    print "CRL v2", crl_dates(urlopen("http://www.gstatic.com/GoogleInternetAuthority/GoogleInternetAuthority.crl").read()) 
```

注意：此代码不检查任何签名或类似的东西，只是提取 CRL 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:07:06.750

该功能目前不存在。我们最终不得不扩展 pyOpenSSL 来处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:40:31.623

似乎`get_rev_date()`会将该日期返回为[ASN1 GENERALIZEDTIME](http://www.obj-sys.com/asn1tutorial/node14.html)。

我在 pyOpenSSL 的[文档](http://packages.python.org/pyOpenSSL/revoked.html)中找到了这个。

# c++ - 为什么不编译？'operator&=' 不匹配

> ID：13694985
> 
> 赞同：0
> 
> 时间：2012-12-04T01:59:58.830
> 
> 标签：c++

当我尝试编译时遇到一个奇怪的错误：

```
class CucumberMarket {
public:
  bool ans;
  int n,cont,K,b;
  bool check(const vector<int> &precios,long long price,int pos) {
    ++cont;
    if(cont == K and b < price) ans = false;
    if(!ans) return ans;
    for(int i = pos + 1; i < n; ++i) {
      if(cont < K) ans &= check(precios,price + precios[i],i);
    }
    --cont;
  }
  string check(vector <int> price, int budget, int k) {
    n = price.size();
    K = k;
    b = budget;
    ans = true;
    cont = 0;
    for(int i = 0; i < n and ans; ++i) ans &= (this -> check(price,price[i],i));
    return ans ? "YES" : "NO";
  }
}; 
```

这就是我得到的：

```
C:\Users\Usuario\Desktop\Temp\C++\tc.cpp: In member function `std::string CucumberMarket::check(std::vector<int, std::allocator<int> >, int, int)':
C:\Users\Usuario\Desktop\Temp\C++\tc.cpp:24: error: no match for 'operator&=' in '((CucumberMarket*)this)->CucumberMarket::ans &= CucumberMarket::check(std::vector<int, std::allocator<int> >, int, int)(vector<int,std::allocator<int> >(((const std::vector<int, std::allocator<int> >&)((const std::vector<int, std::allocator<int> >*)(&price)))), (&price)->std::vector<_Tp, _Alloc>::operator[] [with _Tp = int, _Alloc = std::allocator<int>](((unsigned int)i)), i)'
[Finished in 0.2s with exit code 1] 
```

第 24 行是这样的：

```
for(int i = 0; i < n and ans; ++i) ans &= (this -> check(price,price[i],i)); 
```

我不明白，为什么我会得到这个？我以前做过这个，它总是编译的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T02:02:34.397

`std::string CucumberMarket::check`似乎是在 check 返回的假设下`string`。这是您的问题，您应该接受`bool`返回的问题。
如果您希望它正常工作，最简单的解决方法是强制`price[i]`转换`long long`为如下

`for(int i = 0; i < n and ans; ++i) ans &= (this -> check(price,(long long)price[i],i));`

我建议您的重载不要太靠近签名明智的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T02:06:12.663

查看您的错误消息：它正在尝试

```
ans &= check(..., int, int) 
```

并且该版本的检查返回一个字符串。您需要在右侧的布尔表达式`&=`

# ios - UINavigationBar 横向标题字体大小

> ID：13694986
> 
> 赞同：7
> 
> 时间：2012-12-04T02:00:02.530
> 
> 标签：ios, uinavigationbar, uifont, uiappearance

无论如何我可以`UINavigationBar`在横向模式下设置标题的字体大小吗？

我正在使用`UIAppearance`代理来自定义标题文本属性，并且我对横向时的字体大小特别感兴趣。它是纵向字体，但当旋转为横向时，字体大小不会作为默认行为缩小。

```
[[UINavigationBar appearance] setTitleTextAttributes:[[NSDictionary alloc] initWithObjectsAndKeys:
                                           [UIFont fontWithName:@"Awesome-Bold" size:20], UITextAttributeFont,
                                           [UIColor colorWithWhite:0.0f alpha:0.2f], UITextAttributeTextShadowColor,
                                           [NSValue valueWithUIOffset:UIOffsetMake(0.0f, -1.0f)], UITextAttributeTextShadowOffset,
                                           [UIColor whiteColor], UITextAttributeTextColor,
                                           nil]]; 
```

不幸的是，我没有看到任何`barMetric:`可以与之搭配的属性`setTitleAttributes:`。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T02:15:59.937

所以在网上研究了一下后，[我发现](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)必须设置字体大小，以`0`确保字体在横向和纵向中自动设置为适当的大小：

```
[UIFont fontWithName:@"Awesome-Bold" size:0], UITextAttributeFont 
```

# jquery - jquery在函数外传递变量值

> ID：13694987
> 
> 赞同：0
> 
> 时间：2012-12-04T02:00:11.703
> 
> 标签：jquery, variables, global, each

我有一个难以想象的巨大订单表格，我正在梳理价值并从中构建一个数组。除其他外，我有一些`each()`迭代需要从中提取值，并将它们附加到以后使用的变量中。问题是值返回未定义，我认为这是因为它们是在循环中分配的。

这是我的逻辑：

*   声明变量
*   循环遍历每个
    *   给变量赋值
*   发布到数组

我的理解是函数外的变量声明允许我全局使用它。猜我错了！

这是一个 jsFiddle：http: [//jsfiddle.net/x7CL6/](http://jsfiddle.net/x7CL6/)

这是代码：

```
$('a').click(function(event){

    event.preventDefault();   

/* Declare Variables */

    var test = [],
        one,
        two,
        three,
        four,
        el,
        kind,
        val;

/* Loop through each paragraph */

    $('section').find('p').each(function(){

        el   = $(this);
        kind = el.attr('class');
        val  = el.html();

        if (val === '1'){

            one = val;
        } else if (val === '2'){

            two = val;
        } else if (val === '3'){

            three = val;
        } else if (val === '4'){

            four = val;    
        }
    });

    test.push({
        one: one,
        two: two,
        three: three,
        four: four
    });

    console.log(test);
});
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:14:32.710

> *“我的理解是，函数外的变量声明允许我全局使用它。”*

如果变量的声明在*任何*函数之外，则该变量是全局变量。在您的情况下，您的所有变量都在 click 处理程序函数中定义，因此所有变量都可以在其中访问，并且包括您的`each()`回调在内的任何嵌套函数。

如果意图是每次单击都应将另一个对象添加到`test`数组中，那么您需要在单击处理程序`test` *之外定义。*

您的变量未定义的原因是因为您的 if/else 条件始终为假，因此变量永远不会被赋值。您的`val`变量从循环的当前元素中获得 html 内容，并且 html 内容永远不会等于您与之比较的`"1"`,`"2"`等字符串。

我认为您可能打算改为与每个元素的 class 属性进行比较，您已将其放入`kind`变量中：

```
if (kind === "1") 
```

等等：http: [//jsfiddle.net/x7CL6/4/](http://jsfiddle.net/x7CL6/4/)

...但是鉴于您似乎正在按文档顺序处理元素，您可以利用 jQuery 将`.each()`当前元素的索引传递给您的回调这一事实：

```
$('section').find('p').each(function(i){ // add i param
    // inside the loop test i (note it starts with 0)
    // instead of testing val or kind 
```

演示：http: [//jsfiddle.net/x7CL6/2/](http://jsfiddle.net/x7CL6/2/)

但是，这仍然会给您留下一个丑陋的 if/else if/... 结构，您可以像这样避免：

```
var test = [],
    propNames = ["one","two","three","four"],
    obj = {};

$('section').find('p').each(function(i){
    obj[ propNames[i] ] = $(this).html();
});

test.push(obj); 
```

演示：http: [//jsfiddle.net/x7CL6/5/](http://jsfiddle.net/x7CL6/5/)

# facebook - 如何测试 2012 年 12 月与离线访问相关的重大更改？

> ID：13694989
> 
> 赞同：1
> 
> 时间：2012-12-04T02:00:27.770
> 
> 标签：facebook, facebook-authentication, facebook-authorization

我们有一个产品允许人们将帖子安排到 Facebook。我们依赖离线访问权限，[计划](https://developers.facebook.com/roadmap/offline-access-removal/)于 12 月 5 日删除。

我们认为我们已经实现了正确的 60 天会话扩展逻辑，但在测试时遇到了困难。

我们创建了一个新的测试 Facebook 应用程序并启用了“2012 年 12 月重大变更”迁移设置。新用户授权新应用程序（我们仍然请求`offline_access`许可）。然后我们扩展会话，它返回相同的会话令牌，没有`expires`参数。当我们使用[Access Token Debugger](https://developers.facebook.com/tools/debug/access_token)时，它表示令牌永不过期。

我们尝试在没有通过`offline_access`许可的情况下进行授权，但永远无法超过 5760（4 小时）的到期时间，因此似乎仍然需要通过。

我们非常想测试重大更改，但我们无法创建会话过期且必须不断扩展的场景。我们如何测试这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:08:51.673

是的，我以前测试过这个。[以下是使用调试器](https://developers.facebook.com/tools/debug)和浏览器测试 60 天令牌的步骤。您可以为您的应用程序调整这些调用，并使用一些服务器端日志记录将令牌复制粘贴到调试器中以确认令牌的到期日期。

首先，不要再要求`offline_access`了。

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)获取访问令牌。设置`Application:`为您的应用程序。下面，我的应用程序被称为 ES1：

![在此处输入图像描述](../Images/6cb1ae7440ebe9fcd273309a2f369fa4.png)

（只有您是管理员或开发人员的应用程序才会出现在“应用程序”列表中）

单击“调试”按钮并确认您有一个短期令牌：

![在此处输入图像描述](../Images/5cf17c668c0e0b5a8ea27df0cbaa5bba.png)

注意：`offline_access`上一个屏幕截图中没有烫发。

执行此调用以将短期令牌交换为长期令牌。我只是将其粘贴到浏览器中。您将在您的应用程序代码中包含以下内容：

[https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APPID&client_secret=APPSECRET&fb_exchange_token=SHORT_LIVED_TOKEN](https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APPID&client_secret=APPSECRET&fb_exchange_token=SHORT_LIVED_TOKEN)

代币兑换结果：

![在此处输入图像描述](../Images/0e3e2a51c12b752974df7e867ad08251.png)

您可以将此新令牌粘贴到调试器中以确认它在 60 天后过期：

![在此处输入图像描述](../Images/ad47c127ab059225eb84603021b764ed.png)

因此，只需将上述步骤转换到您的应用程序中，记录令牌，并在进行过程中使用[调试器](https://developers.facebook.com/tools/debug)检查这些令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:27:40.107

解决方案是还必须启用第二个迁移设置“删除 offline_access 权限”。只有启用“2012 年 12 月重大变更”迁移设置后，您的应用程序才能获得 60 天的会话令牌。

这具有将现有永不过期的会话令牌立即转换为 60 天到期的令牌的不幸副作用。Facebook 表示他们将继续尊重现有的永不过期的令牌，但鉴于必须启用这两个设置，您的应用程序被迫将所有用户视为拥有 60 天的令牌。

# android - android softkeyboard showSoftInput vs toggleSoftInput

> ID：13694995
> 
> 赞同：36
> 
> 时间：2012-12-04T02:00:55.883
> 
> 标签：android

`showSoftInput()`不会为我显示键盘，但`toggleSoftInput()`会显示。我看到其他一些帖子说在使用模拟器时禁用硬键盘，但我没有使用模拟器。我正在没有硬键盘的实际设备上加载我的 APK。两种方法都不应该有效吗？为什么不起作用`showSoftInput()`？我想明确地将键盘与特定的文本字段相关联。

不起作用：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
editText.setText("textchange"); //i see the text field update
imm.showSoftInput(editText, InputMethodManager.SHOW_FORCED); 
```

作品：

```
InputMethodManager imm = (InputMethodManager) getDelegate().getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-19T20:57:44.253

似乎键盘最初显示但被其他东西隐藏了，因为以下工作（但实际上是一个肮脏的解决方法）：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
editText.postDelayed(new Runnable()
{
    @Override
    public void run()
    {
        editText.requestFocus();
        imm.showSoftInput(editText, 0);
    }
}, 100); 
```

在查看 logcat 时，我怀疑此消息背后的原因隐藏了最初显示的键盘：

**在开始输入时隐藏剪贴板对话框：由其他人完成...！**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-18T05:42:21.627

显示键盘+焦点，如果你想隐藏键盘

```
@Override
public void onResume () {
    super.onResume();

    inputSearch.setFocusableInTouchMode(true);
    inputSearch.requestFocus();

    // Show Keyboard
    InputMethodManager imm = (InputMethodManager) getSherlockActivity().getSystemService(
            Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(inputSearch, InputMethodManager.SHOW_IMPLICIT);
} 
```

PS inputSearch = (EditText) getSherlockActivity().findViewById(R.id.inputSearch);

```
 // Hide Keyboard
InputMethodManager imm = (InputMethodManager) getSherlockActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(inputSearch.getWindowToken(), 0); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-02T18:04:38.377

如果 imm 的目标视图与 editText 相同，则 ShowSoftInput 有效。您可以通过`imm.isActive(editText)`或进行检查`editText.isInputMethodTarget()`。

ToggleSoftInput 只是切换 imm 当前目标的键盘。

imm 的目标视图是在焦点更改后设置的`editText.requestFocus()`。我认为这两个任务之间存在一些后期处理，因为一个可运行的后期是不够的。我测试了双张贴，它对我有用。

```
editText.requestFocus();
editText.post(new Runnable() {
    @Override
    public void run() {
        editText.post(new Runnable() {
            @Override
            public void run() {
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                if (imm != null) {
                    imm.showSoftInput(editText, 0);
                }
            }
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-08T15:58:57.983

这个问题的确切答案为什么 showSoftInput 不起作用而 toggleSoftInput 起作用？

是您尝试显示键盘的视图没有焦点。因此，要解决这个问题并使用**showSoftInput**方法，您必须在视图中调用以下方法：

```
 setFocusable(true);
  setFocusableInTouchMode(true); 
```

调用上述方法将确保当您单击 View 时保留并捕获焦点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-06T14:52:18.943

当设备具有硬（滑出）键盘时，showSoftInput() 不起作用

[带有 showSoftInput 的 Android 显示软键盘不起作用？](https://stackoverflow.com/questions/5520085/android-show-softkeyboard-with-showsoftinput-is-not-working)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-17T18:30:58.183

```
public void hideKeyboard() {
    myTextView.setFocusable(true);
    myTextView.setFocusableInTouchMode(true);
    imm.hideSoftInputFromWindow(myTextView.getWindowToken(), 0);
} 
```

作品

```
public void hideKeyboard() {
    imm.hideSoftInputFromWindow(myTextView.getWindowToken(), 0);
} 
```

不工作

imm 在我使用 Fragment 时已被较早处理，因此：

在 Fragment 中声明 imm

```
private InputMethodManager imm; 
```

然后在片段中添加：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    imm = (InputMethodManager)
    getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
} 
```

他说经过 3 到 4 个小时的研究和失败！

感谢 user_CC ！:-)

菲尔

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T08:47:10.050

尝试这个：

```
public void showTheKeyboard(Context context, EditText editText){
    InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT);
} 
```

如果这不起作用，请从[此处阅读教程](http://myandroidsolutions.blogspot.ro/2012/10/android-hide-soft-keyboard-and-show.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-07T20:38:25.097

我知道这篇文章已经很老了，但是对于那些从这个日期开始寻求答案并且上述方法都不起作用的人。当弹出警报对话框时，下面的代码在 Activity 上为我工作。

```
InputMethodManager keyboard = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
```

显示键盘：

```
keyboard.toggleSoftInput(editText.getPaintFlags(), 0); 
```

隐藏键盘：

```
keyboard.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

# php - 正则表达式的 PHP preg_replace() 错误

> ID：13694997
> 
> 赞同：0
> 
> 时间：2012-12-04T02:01:11.233
> 
> 标签：php, preg-replace

我已通过 curl_exec 将网页返回到字符串中。然后我试图用字符串 javascript:void() 替换所有超链接。

[我在http://regexhero.net/tester/](http://regexhero.net/tester/)测试过的正则表达式是

```
(?<=href=("|'))[^"']+(?=("|')) 
```

这完美地工作。当我尝试使用 preg_replace() 在 PHP 中使用它时，我收到错误：Unknown mofifier '['

代码片段是

```
$pattern = "(?<=href=(".'"'."|'))[^".'"'."']+(?=(".'"'."|'))";
$replacement = "javascript:void();";
$result = preg_replace($pattern,$replacement,$result) ; 
```

我也尝试过像这样转义字符串

```
$pattern = "(?<=href=(\"|'))[^\"']+(?=(\"|'))"; 
```

我在 Win 环境中编写脚本，但要在 LAMP 上运行。

感谢您的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:05:10.143

您需要在模式中添加分隔符。在 JavaScript 中，这些是`/`模式的前后。您可以对 PHP 使用相同的方法，但我喜欢使用它`~`。

```
$pattern = "~(?<=href=(".'"'."|'))[^".'"'."']+(?=(".'"'."|'))~"; 
```