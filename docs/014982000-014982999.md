# StackOverflow 问答 14982000-14982999

# asp.net-mvc - Facebook 应用程序模板教程 - 不是画布应用程序

> ID：14982003
> 
> 赞同：1
> 
> 时间：2013-02-20T14:15:42.487
> 
> 标签：asp.net-mvc, facebook, asp.net-mvc-4, facebook-c#-sdk

我正在使用 Facebook 应用程序模板，该模板正在创建画布应用程序，我想要一个只有 Facebook 身份验证的常规应用程序，

如果我要取消“Facebook 应用程序”，我会收到错误消息“抱歉，您使用的应用程序配置错误。请稍后再试。”。

我怎样才能让 Facebook 应用程序与 mvc 4.5 模板一起工作，但作为常规应用程序而不是画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:06:49.880

Facebook 应用程序模板被设计为 Canvas 应用程序，这不是您想要的。

幸运的是，ASP.NET 团队在默认的 ASP.NET Internet 应用程序模板中构建了许多替代身份验证提供程序。

启动 VS，并创建一个新的 MVC 4 Internet Application 项目。打开 AuthConfig.cs，取消注释 3 Facebook 行，然后粘贴您的应用程序详细信息（从 Facebook 开发人员中心获取这些信息）。现在，您的应用程序将支持本地身份验证（用户名/密码）和 Facebook 身份验证！

完整教程：[http ://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:16:25.200

目前，ASP.NET Facebook 模板仅适用于画布应用程序。我们计划在以后支持使用相同模板或新模板的 Web 应用程序。现在，您可以在此处查看示例 ASP.NET Web 应用程序：[https](https://github.com/facebook-csharp-sdk/facebook-aspnet-sample) ://github.com/facebook-csharp-sdk/facebook-aspnet-sample 。它有点过时（MVC3），但它应该可以帮助您入门。

# delphi - 将 DCEF 与 cppbuilder 一起使用

> ID：14982004
> 
> 赞同：1
> 
> 时间：2013-02-20T14:15:45.030
> 
> 标签：delphi, c++builder, chromium-embedded

是否可以在 C++Builder 下使用 DCEF（Delphi Chromium Embedded）？如何配置 IDE？

# windows-phone-8 - Windows Phone 8 上的 Protobuf-net

> ID：14982005
> 
> 赞同：1
> 
> 时间：2013-02-20T14:15:47.803
> 
> 标签：windows-phone-8, protocol-buffers, protobuf-net

我尝试在我的 WP8 应用程序中使用 Google protobuf。我将 protobuf-net 用于我的目的。当我从 qwerty.proto 生成我的 proto.cs 文件时，我看到了下一个字符串（如下）

```
...
[global::System.Serializable, global::ProtoBuf.ProtoContract(Name=@"Query") ]
... 
```

但是 WP8 SDK 在 System 命名空间中没有 Serializable。当我通过 protogen.exe 生成 proto.cs 时可能是我犯了一个错误？可能它有任何额外的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:23:43.430

如果您使用`protogen -p:help`它，它将向您显示可用的选项，*不仅适用于该工具*，而且：*适用于您正在使用的模板*（`csharp`默认情况下）。这里特别感兴趣的是`lightFramework`. 所以添加`-p:lightFramework`，你应该设置。

另外：为了在电话 8 上获得最佳性能，您可能还想查看`precompile`，它允许它使用静态 IL 而不是反射。这[将在此处进行更多讨论](http://marcgravell.blogspot.com/2012/07/introducing-protobuf-net-precompiler.html)。

请注意，使用 protobuf-net*不需要*从`.proto`文件开始，但支持这种用法；它也可以“代码优先”正常工作。

# grails - 如何在模型中获取参数？

> ID：14982007
> 
> 赞同：0
> 
> 时间：2013-02-20T14:16:00.663
> 
> 标签：grails, model

如何在模型中获取参数（在 Grails 中）？`params.`模型中不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:18:30.313

如果“模型”是指域模型类，它们没有参数，它们只是 POJO。据我所知，参数仅适用于控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:57:29.827

如果您的参数名称格式正确并与域属性匹配，则可以执行以下操作：

假设

```
params = [name:"some name", age: "194", civilState: "MARRIED"] 
```

和

```
class Person{
   String name
   Integer age
   CivilStatus civilState //some enum
} 
```

您可以在控制器中像这样利用 groovy 的属性绑定构造函数：

```
class Controller {
   def saveAction = {
       new Person(params)
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:42:16.833

据我了解，您有一种特殊的方法可以从请求中填充域。在这种情况下，您可以将所有参数（它是一个 Map）传递给这样的方法，例如：

```
def MyDomain {

  static MyDomain buildFromParams(def params) {
     return new MyDomain(
         field1: params.field_1, //assuming that your params have different naming scheme so you can't use standard way suggested by Raphael
         field2: params.field_2
     )
  }

}

class MyController {

  def myAction() {
     MyDomain foo = MyDomain.buildFromParams(params)
  }

} 
```

# ios - IOS - 从表视图控制器获取值并将其发送到另一个表视图控制器

> ID：14982010
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:16:10.370
> 
> 标签：ios, uinavigationcontroller, uitableview

我在导航控制器中有两个表视图控制器。Cloth 表是主视图，当我单击其中一个单元格时，转到另一个提供详细信息的视图控制器，当我选择我想要的选项并返回导航按钮的返回时，我会丢失信息。如何将值带到主视图？

这是我的代码：主视图 - AddClothViewController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if ([[list objectAtIndex:indexPath.row] isEqual:@"Categorias"] )
{

    CategoriesViewController *DVC = [[CategoriesViewController alloc]    initWithNibName:@"CategoriesViewController" bundle:nil];

    [self.navigationController pushViewController:DVC animated:YES];
}

} 
```

这是我的代码：类别 ViewController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Set the checkmark accessory for the selected row.
[[tableView cellForRowAtIndexPath:indexPath]  setAccessoryType:UITableViewCellAccessoryCheckmark];

// This is my main View Controller when i declare a variable category and I try to access   from 
 //here    
  AddClothViewController *DVC = [[AddClothViewController alloc]  initWithNibName:@"AddClothViewController" bundle:nil];
  DVC.clothNew.categoria = [list objectAtIndex:indexPath.row ]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:49:15.733

我通过使用本[教程](http://www.hardcodedstudios.com/home/ryan-newsome/simpledelegatetutorialforiosdevelopment)解决了我的问题。（简单的 ios 开发委托教程）

# geolocation - Google GeoChart 不适用于具有区域显示模式的州级

> ID：14982012
> 
> 赞同：3
> 
> 时间：2013-02-20T14:16:14.587
> 
> 标签：geolocation, google-visualization

我正在构建一个简单的应用程序，它将根据州名标记印度的州。

因此，我开始尝试以下示例。

如果我设置它效果很好，`displayMode : 'markers'`但根据他们的[文档](https://developers.google.com/chart/interactive/docs/gallery/geochart#Overview)状态可以显示为区域。

但是，它不起作用。难道我做错了什么？

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawMarkersMap);

      function drawMarkersMap() {
      var data = google.visualization.arrayToDataTable([
        ['State'],
        ['West Bengal'],
      ]);

      var options = {
        region: 'IN',
        displayMode: 'regions',
      };

      var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:50:08.397

您需要将选项设置为`resolution: 'provinces'`

这是代码（工作）：

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawMarkersMap);

      function drawMarkersMap() {
      var data = google.visualization.arrayToDataTable([
        ['State', 'Data'],
        ['West Bengal', 5],
      ]);

      var options = {
        region: 'IN',
        displayMode: 'regions',
        resolution: 'provinces',
      };

      var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

# php - Solr Search 在 solr1.2 中按分数排序

> ID：14982014
> 
> 赞同：2
> 
> 时间：2013-02-20T14:16:20.990
> 
> 标签：php, symfony, solr

我的一个项目使用 solr1.2，当我在搜索功能中使用“按分数排序”时它不起作用。我不知道为什么？

谁能解释一下。我完全糊涂了。

我在哪里做的控制器：

```
protected function globalSearch($searchTerm, $productFilter = array())
{
    $solrService = $this->get('syd.solr_service');

    $solrQuery = new SolrQuery('*:*');
    $solrQuery->addField('id')
        ->addField('first_product_slug')
        ->addField('first_product_name')
        ->addField('name')
        ->addField('slug')
        ->addField('thumbnail_path')
        ->addField('product_slug')
        ->addField('design_category_id')
        ->addSortField('score', SolrQuery::ORDER_DESC);
    $solrQuery->set("group", "true"); 
    $solrQuery->set("group.field", "first_product_id"); 
    $solrQuery->set("group.limit", 4); 

    if($searchTerm){
        $filterQueries = array();
        $searchTerms = explode(' ',$searchTerm);
        $searchTerms[] = $searchTerm;
        $searchTerm = '("' . implode('" OR "', $searchTerms) . '")';
        $filterQuery = sprintf(self::SEARCH_STRING, $searchTerm);
        $solrQuery->addFilterQuery($filterQuery);
    }

    if (!empty($productFilter))
    {
        $productFiltersArr = array();
        $productFilterQry = '';
        foreach ($productFilter as $productFilterValue )
        {
            $productFiltersArr[] = 'first_product_slug:' . $productFilterValue;
        }
        $productFilterQry = implode(' OR ', $productFiltersArr);
        $solrQuery->addFilterQuery($productFilterQry);
    }

    $solrQuery->setRows(1000);
    try {
        $solrObject = $solrService->query(
            'SydPrintBundle:DesignTemplate',
            $solrQuery,
            SolrService::WRITER_FORMAT_SOLR_OBJECT
        );
        $templates = $solrObject->offsetGet('grouped')->offsetGet('first_product_id')->offsetGet('groups');
    } 
    catch (\Exception $e) {
        $templates = array();
    }

    if (!$templates) {

        if (!empty($searchTerm)) {
            $this->setFlash('catalog-message', 'No results found for your search.');
        }

        return array();
    }
    if (!$searchTerm) {

        if (!empty($searchTerm)) {
            $this->setFlash('catalog-message', 'No results found for your search.');
        }

        return array();
    }

    return $templates;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:53:01.927

When you say `when i use "sort by score" in search function it's not working` I assume you are telling that the results are not sorted by score.

This is because your main query is `*:*` and you are adding your search terms via a filter query, which won't influence the score. See [https://wiki.apache.org/solr/CommonQueryParameters#fq](https://wiki.apache.org/solr/CommonQueryParameters#fq) where it says

`This parameter can be used to specify a query that can be used to restrict the super set of documents that can be returned, without influencing score.`

So if you make the search term filter query as your main query, then you should see results sorted by score.

**Update:** Instead of

`$solrQuery = new SolrQuery('*:*');`

use

`$solrQuery = new SolrQuery();`

and instead of

`$solrQuery->addFilterQuery($filterQuery);`

use

`$solrQuery->setQuery($filterQuery);`

# c++ - 我的 QTreeWidgetIcons 在哪里？

> ID：14982018
> 
> 赞同：3
> 
> 时间：2013-02-20T14:16:39.647
> 
> 标签：c++, qt, qt4, qt5, qtreewidget

我有一个项目`QTreeWidget`，`QTreeWidgetItem`但是只有根节点显示它的图标：

![在此处输入图像描述](../Images/6feccf77685eab57587a8ae9714f298b.png)

我一直在摸索什么可以关闭它，有什么提示吗？

```
 ui->folderTree1->setUpdatesEnabled( false );

  QTreeWidgetItem* treeRoot1 = new QTreeWidgetItem(ui->folderTree1);
  treeRoot1->setIcon(0, QIcon(":/icons/black.png"));
  treeRoot1->setText(0, tr("Root"));
  treeRoot1->setExpanded(true);
  addFoldersToTreeView(treeRoot1, ui->filePath1->text(), ui->filePath2->text());

  ui->folderTree1->setUpdatesEnabled( true );
}

void MainWindow::addFoldersToTreeView(QTreeWidgetItem* currentWidget, QString leftPath, QString rightPath)
{
  qDebug() << "MainWindow::addFoldersToTreeView" << leftPath;
  QDir dir(leftPath);
  QDir dir2(rightPath);
  /* Add the folders */
  foreach (QString subDir, dir.entryList(QDir::Dirs | QDir::NoDotAndDotDot))
  {
    QString sImageName = ":/icons/black.png";
    QTreeWidgetItem* newItem = new QTreeWidgetItem(currentWidget);
    qDebug() << "MainWindow::addFoldersToTreeView.sImageName" << sImageName;
    newItem->setIcon(0, QIcon(sImageName));
    newItem->setText(0, subDir);
    newItem->setExpanded(true);
    newItem->setData(0, 1, QVariant(leftPath + QDir::separator() + subDir));
    /* Recursively add sub-folders */
    addFoldersToTreeView(newItem, leftPath + QDir::separator() + subDir, rightPath + QDir::separator() + subDir);
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:55:08.497

The problem is the line:

```
newItem->setData(0, 1, QVariant(leftPath + QDir::separator() + subDir)); 
```

The second argument is the item data role, which you specify to 1 (Qt::DecorationRole). The Qt::DecorationRole should be used for data that is rendered as a decoration in the form of an icon, i.e., this line will cause the the icon you specified before to be replaced with a `QVariant` object.

Remove that line or change the item data role to something else.

# c++ - 在 Arduino 库的文件夹中包含文件

> ID：14982022
> 
> 赞同：8
> 
> 时间：2013-02-20T14:16:47.920
> 
> 标签：c++, arduino

我目前正在编写一个 Arduino 库，我想在库文件夹的子目录中包含文件。更具体地说，我希望可以从 Arduino 草图中访问这些文件。

这是我的目录结构：

```
MyLib/MyLib.cpp
MyLib/MyLib.h
MyLib/Extra/SomeNiceFunctions.cpp
MyLib/Extra/SomeNiceFunctions.h 
```

这就是我试图包含文件的方式：

```
#include <MyLib.h>
#include <Extra/SomeNiceFunctions.h> 
```

显然这是错误的，因为 IDE 包含库文件夹的方式。我还应该尝试什么？我可以将 Extra 文件夹拆分到另一个“库”（另一个文件夹），但这不是我想要的。

**编辑：**这是我得到的错误`undefined reference to 'font8x8'`。这在 中定义`Extra/SomeNiceFunctions.h`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:20:54.273

不要使用

```
#include <MyLib.h>
#include <Extra/SomeNiceFunctions.h> 
```

改为使用

```
#include <arduinolib.h>
#include "MyLib.h"
#include "Extra/SomeNiceFunctions.h" 
```

使用尖括号，编译器在标准文件夹中查找包含文件。您希望您的自定义文件在您的工作目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T13:37:43.110

关于包含 Arduino/Energia 子文件夹中的 Arduion/Energia 库：查看主包含文件的位置（例如 arduino.h / energia.h）并在目录结构中使用 ..\ 或向下直到到达您想要包含的所需 h 文件。例如。我有：..hardware\cores\cc3200\energia.h ..hardware\libraries\SPI\SPI.h

为了在 .cpp 文件中使用 SPI.h 函数，我必须添加 `#include <energia.h>` ： `#include <..\..\libraries\SPI\SPI.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-19T21:18:30.167

我对此有一些疑问。我只是想要一个简单的解决方案，而在 CPP 中编写库是正确的方法 - 我画了一个草图 - 比如说 robo.ino 文件并将其添加到一个简单的库包含中 - 这样一个文件夹下的库中只有一个文件称为机器人 - robo.h

```
├── sketchesfolder
├── libraries
│   ├── robot
│   │   ├── robot.h
├── robotsketch
│   ├── Move.ino 
```

现在在 Move.ino - 我只包含文件

```
#include <robo.h> 
```

您需要为简单函数添加的唯一内容是原型声明 - 或确保您的函数按首次使用排序。

因此，例如 - 将 Setup() 放在底部和如下函数：

```
 void halt(int wait); 
```

作为 robo.h 文件头部的原型定义

它允许您将草图作为通用代码共享，而无需将其转换为 CPP 库。但你当然应该这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T17:08:20.097

借用[这个堆栈溢出问题](https://stackoverflow.com/questions/6504211/is-it-possible-to-include-a-library-from-another-library-using-the-arduino-ide)，

> 包含路径包括草图的目录、目标目录（/hardware/core//）和 avr 包含目录（/hardware/tools/avr/avr/include/），以及任何库目录（在 /hardware/libraries /) 其中包含一个头文件，该头文件包含在主草图文件中。

尝试

```
// in myProject.ino
#include <arduinolib.h>
#include "MyLib.h"

// in Mylib.h
#include "./extra/SomeNiceFunctions.h" 
```

# core-data - CoreData 对象没有得到无故障

> ID：14982024
> 
> 赞同：3
> 
> 时间：2013-02-20T14:16:52.883
> 
> 标签：core-data, restkit

在 iOS6 应用程序中，我使用 CoreData 从 DB 获取 NSManagedObjects 并将它们显示在 tableViewCell 中。我的问题是，与初始滚动位置之外的单元格对应的所有对象都处于故障状态并且不会恢复活力。我看不到我的错误。

fetchRequest.returnsObjectsAsFaults = 否；有帮助，但我想要一个干净的解决方案。

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ContactsCell";
    ContactsCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    Contact *contact = [self.contacts objectAtIndex:indexPath.row];

    //here some contacts are faulted. contact.name is null if I fetch it

    [cell setContactData:contact];

    return cell;
} 
```

这是我获取的方式（使用 Restkit 0.10.3）：

```
 NSFetchRequest *fetchRequest = [Contact fetchRequest];
    fetchRequest.sortDescriptors = [self sortDescriptors];
    fetchRequest.returnsObjectsAsFaults = NO;
    return [Contact objectsWithFetchRequest:fetchRequest]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T13:38:53.003

Ok I never really used your approach so I won't say that it is wrong, but I'll say that it is strange. I guess that Contact is a subclass of NSManagedObject, and I can believe that it knows of the fetch request which which he was originally fetched, and that he knows of the context from which he was fetched, but only after he was already fetched. I really don't see how could he know of those things if he never before was fetched from the persistent store. So I recommend U use classic executeFetch or fetchedResultsController to populate your tableView.

```
NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init]; 
[context setPersistentStoreCoordinator:persistentStoreCoordinator];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:context];
fetchRequest.entity = entity;
fetchRequest.sortDescriptors = [self sortDescriptors];
NSArray *array = [context executeFetchRequest:fetchRequest error:&error];
return array; 
```

Try it, hope it helps

# java - 将图标设置为 JApplet 标题栏

> ID：14982027
> 
> 赞同：1
> 
> 时间：2013-02-20T14:17:01.497
> 
> 标签：java, applet, icons, japplet

我正在使用`JApplet`嵌入在 HTML 中。如何在 的标题栏中设置图标或徽标`JApplet`，就像我们将图标设置为`JFrame`using一样`setIconImage`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:50:21.967

小程序没有标题栏，所以这是不可能的。您总是可以尝试让小程序为网页本身设置一个图标。

# ios - Phonegap iOS：将图像下载到照片库

> ID：14982028
> 
> 赞同：2
> 
> 时间：2013-02-20T14:17:01.930
> 
> 标签：ios, cordova, phonegap-plugins

是否可以下载文件（图像）并将其保存在照片库中？

我知道这种[下载](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileTransfer_download)方法，但它只允许下载到我指定的位置。

在 iOS 上，我无法获得照片库的路径（而且我知道它不仅将其存储在那里，而且还将其添加到数据库中）

phonegap 是否以某种方式提供了这种能力？
我需要为此编写一个专用插件吗？

谢谢，
纳达夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:53:05.967

呃……我讨厌回答自己的问题

我发现如果没有 Phonegap 插件，这是不可能的，也找不到可以做到这一点的插件，所以我写了一个。
目前仅支持 iOS 和 Android。 [https://github.com/grnadav/SaveToPhotoAlbumPhonegapPlugin](https://github.com/grnadav/SaveToPhotoAlbumPhonegapPlugin)

随意扩展它的功能和拉取请求:)

# matlab - matlab中的阻塞矩阵

> ID：14982029
> 
> 赞同：0
> 
> 时间：2013-02-20T14:17:01.993
> 
> 标签：matlab, matrix

假设我有一个非正方形大小的矩阵，例如 30X35，并且我想拆分成块，例如 4 个块，它就像 15X18 并用零填充添加的单元格，这可以在 matlab 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:21:35.583

你看过`blockproc`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:46:07.043

您可以通过复制矩阵（两次）然后将您想要的部分设置为 0 来做到这一点：

```
m = rand([30 35]);

mLeft = m;
mLeft(1:15, :) = 0;

mRight = m;
mRight(16:end, :) = 0; 
```

或者也可以反过来，首先创建一个全为 0 的矩阵，然后复制您感兴趣的内容。

```
mLeft = zeros(size(m));
mLeft(16:end, :) = m(16:end, :); 
```

可以这样概括：

```
% find the splits, the position where blocks end
splits = round(linspace(1, numRows+1, numBlocks+1));

% and for each block
for s = 1:length(splits)-1
   % create matrix with 0s the size of m
   mAux = zeros(size(m));

   % copy the content only in block you are interested on
   mAux( splits(s):splits(s+1)-1, : ) = m( splits(s):splits(s+1)-1, : )

  % do whatever you want with mAux before it is overwriten on the next iteration
end 
```

因此，对于 30x35 示例（numRows = 30），假设您需要 6 个块（numBlocks = 6），拆分将是：

```
splits =  [1     6    11    16    21    26    31] 
```

这意味着第 i 个块从 splits(i) 开始，并在 row splits(i-1)-1 结束。

然后创建一个空矩阵：

```
mAux = zeros(size(m)); 
```

并将内容从 m 从列*splits(i)*复制到*splits(i+1)-1*：

```
mAux( splits(s):splits(s+1)-1, : ) = m( splits(s):splits(s+1)-1, : ) 
```

此示例说明您是否想要跨所有列的细分。如果您想要行和列的子集，则必须在两个方向上找到拆分，然后执行 2 个嵌套循环：

```
for si = 1:legth(splitsI)-1
for sj = 1:legth(splitsj)-1

    mAux = zeros(size(m));
    mAux( splitsI(si):splitsI(si+1)-1, splitsJ(sj):splitsJ(sj+1)-1 ) = ...
    m( splitsI(si):splitsI(si+1)-1, splitsJ(sj):splitsJ(sj+1)-1 );

end
end 
```

# selenium - 使用 Selenium Webdriver 和 TestNG 时设置期间超时

> ID：14982033
> 
> 赞同：1
> 
> 时间：2013-02-20T14:17:08.950
> 
> 标签：selenium, selenium-webdriver

我正在使用 Selenium 和 TestNG 运行我的测试用例。

我无法调用配置方法： `com.tradeportal.init.SeleniumInit.setUp:Timed out waiting for page load`。

我正在为我的 ff 创建新会话。`http://127.0.0.1:4444/wd/hub/static/resource/hub.html`错误是由于这个原因吗？

# java - 如何使用jsp或servlet或java将excel中的大信息更新到oracle数据库

> ID：14982040
> 
> 赞同：0
> 
> 时间：2013-02-20T14:17:19.917
> 
> 标签：java, jsp

在我的项目中，我有一个 excel 表，其中包含大量的标记、id、学分……我需要从 excel 文件上传到数据库中……我正在使用 apache poi 读取和更新，但我遇到了错误……

**DB_Connection.java**

```
 package DB;
      import java.sql.*;
      import java.sql.Connection;
      import java.sql.DriverManager;
      import java.sql.SQLException;
      public class DB_Connection 
      {
                // private String datasize;
                    private Connection con;
                 public DB_Connection()
                 {

                     try
                {
                            String conUrl="jdbc:oracle:thin:@localhost:1521:xe";
                           String userName="SYSTEM";
                            String pass="raje";
                           Class.forName("oracle.jdbc.driver.OracleDriver");
                               con=DriverManager.getConnection(conUrl,userName,pass);
                }
                catch(Exception s)
                {
                       System.out.println(s);
                }

             }
          public Connection getConn()
            {
               return con;
            }
         public void setConn(Connection con)
          {
                 this.con = con;
          }

        } 
```

**读取Excel.jsp：**

```
 <%@page  language="java" import="java.sql.*"  contentType="text/html"   pageEncoding="UTF-8" %>
      <!DOCTYPE html>

       <%@ page import ="java.util.Date" %>
       <%@ page import ="java.io.*" %>
       <%@ page import ="java.io.FileNotFoundException" %>
       <%@ page import ="java.io.IOException" %>
       <%@ page import ="java.util.Iterator" %>
       <%@ page import ="java.util.ArrayList" %>
       <%@ page import ="org.apache.poi.hssf.usermodel.HSSFCell" %>
       <%@ page import ="org.apache.poi.hssf.usermodel.HSSFRow" %>
       <%@ page import ="org.apache.poi.hssf.usermodel.HSSFSheet" %>
       <%@ page import ="org.apache.poi.hssf.usermodel.HSSFWorkbook" %>
       <%@ page import ="org.apache.poi.poifs.filesystem.POIFSFileSystem" %>
   <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

        <jsp:useBean id="connection" class="DB.DB_Connection" scope="application">
        <jsp:setProperty name="connection" property="*"/>

       </jsp:useBean> 

        <%!     
           Connection con;
           PreparedStatement ps=null;

         public static ArrayList readExcelFile(String fileName)
          {
    /** --Define a ArrayList
        --Holds ArrayList Of Cells
     */

    ArrayList cellArrayListHolder = new ArrayList();

    try{
    /** Creating Input Stream**/
        FileInputStream myInput = new FileInputStream(fileName);
       // System.out.print("myInput");

    /** Create a POIFSFileSystem object**/
    POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

    /** Create a workbook using the File System**/
     HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

     /** Get the first sheet from workbook**/
    HSSFSheet mySheet = myWorkBook.getSheetAt(0);

    /** We now need something to iterate through the cells.**/
      Iterator rowIter = mySheet.rowIterator();
      while(rowIter.hasNext())
      {
          HSSFRow myRow = (HSSFRow) rowIter.next();
          Iterator cellIter = myRow.cellIterator();
          ArrayList cellStoreArrayList=new ArrayList();
          while(cellIter.hasNext())
          {
              HSSFCell myCell = (HSSFCell) cellIter.next();                   
              cellStoreArrayList.add(myCell);
          }

          cellArrayListHolder.add(cellStoreArrayList);
      }

    }
    catch (Exception e)
    {

        e.printStackTrace(); 
    }
    return cellArrayListHolder;

       }%>

     <%
        String fileName="C://Documents and Settings//raje//Desktop//JGRESULTS1.xls"; 
            ArrayList dataHolder=readExcelFile(fileName);
        //Print the data read
       //printCellDataToConsole(dataHolder);
         con= connection.getConn();
          ps=con.prepareStatement("insert into sample2 values(?,?,?,?)");
              int count=1;
         ArrayList cellStoreArrayList=null;
        //For inserting into database
         for (int i=1;i < dataHolder.size(); i++)
          {
              cellStoreArrayList=(ArrayList)dataHolder.get(i);
       ps.setString(1,((HSSFCell)cellStoreArrayList.get(0)).toString());
       ps.setString(2,((HSSFCell)cellStoreArrayList.get(1)).toString());
       ps.setString(3,((HSSFCell)cellStoreArrayList.get(2)).toString());
       ps.setString(4,((HSSFCell)cellStoreArrayList.get(3)).toString()); 
      count= ps.executeUpdate();
       System.out.print(((HSSFCell)cellStoreArrayList.get(3)).toString() + "\t");
       }
               count++;
         //For checking data is inserted or not?
           if(count>0)
        { %>
               Following details from Excel file have been inserted in student table of database
                   <table>
                       <tr>
                           <th>Student's Name</th>
                           <th>Class</th>
                           <th>external</th>
                           <th>credits</th>
                       </tr>

        <% for (int i=1;i < dataHolder.size(); i++) {
              cell StoreArrayList=(ArrayList)dataHolder.get(i);%>
           <tr>
        <td><%=((HSSFCell)cellStoreArrayList.get(0)).toString() %></td>
        <td><%=((HSSFCell)cellStoreArrayList.get(1)).toString() %></td>
        <td><%=((HSSFCell)cellStoreArrayList.get(2)).toString() %></td>
        <td><%=((HSSFCell)cellStoreArrayList.get(3)).toString() %></td>

            </tr>
       <%}
      }
              else
               {%>

             <%  out.print("not successfull"); 
             }    %> 
       </table>

</body>
</html> 
```

**输出：**

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /readExcel.jsp at line 98

95:     {
96:     cellStoreArrayList=(ArrayList)dataHolder.get(i);
97:        ps.setString(1,((HSSFCell)cellStoreArrayList.get(0)).toString());
98:        ps.setString(2,((HSSFCell)cellStoreArrayList.get(1)).toString());
99:        ps.setString(3,((HSSFCell)cellStoreArrayList.get(2)).toString());
100:        ps.setString(4,((HSSFCell)cellStoreArrayList.get(3)).toString()); 
101:       count= ps.executeUpdate(); 
```

**堆栈跟踪：**

```
 org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:553)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:457)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:3 93)
    root cause

         java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    java.util.ArrayList.RangeCheck(ArrayList.java:547)
    java.util.ArrayList.get(ArrayList.java:322)
    org.apache.jsp.readExcel_jsp._jspService(readExcel_jsp.java:175)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:22:03.573

如果您实际发布错误，您将获得更多更好的帮助。

这段代码很乱。它做的太多了：

1.  POI 读取和解析电子表格
2.  显示的 JSP
3.  JDBC 持久化

我建议将其分解为可以开发、测试和搁置的单独类。

没有人应该使用 scriptlet 编写 JSP。那是一种名誉扫地的 1999 年风格。最好学习 JSTL 并添加一些 servlet。

更新：

原因如下：

```
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    java.util.ArrayList.RangeCheck(ArrayList.java:547) 
```

您假设存在一个数组元素，但 JVM 不同意您的看法。

这是你做错的本质：

```
List<String> values = new ArrayList<String>();
values.add("element one"); 
System.out.println(values.size());  // this will print 1
System.out.println(values.get(100)); // there's only one element in the list, but you tried to access 100\. 
```

错误！找出你的代码在哪里做了这样的事情，你就会得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:28:12.327

正如有人指出的那样：你所做的是一种非常糟糕的做法......

但是，当前的问题很可能是您尝试从中读取单元格的行不够长，因此（注意：array backed）列表超出范围。

为了为这种情况做好准备，我会这样做：

```
 cellStoreArrayList=(ArrayList)dataHolder.get(i);
   for(int i=1;i<4;i++) { // I'd use a loop even for fixed number of iterations, I vigorously hate duplication
       if(cellStoreArrayList.size()>=i) { // check for row to be long enough --> no ArrayOutOfBounds anymore               HSSFCell cell = (HSSFCell)cellStoreArrayList.get(i-1);
           if(cell!=null) { // check for null: no NullPointerException anymore...
               ps.setString(i,cell.toString());
           }
           else {
               ps.setString(i,"");
           }
           //ps.setString(i,cell==null?"":cell.toString()); //this is good too, but a bit probably less readable
       }
   } 
```

**备注**：

*   使用泛型！List 可以有一个 `<HSSFCell>`通用类型，消除了强制转换的需要，并解决了相当多的错误和错误可能性
*   不要将实现的名称存储在变量名中！`cellStoreArrayList`= 糟糕！`cellStoreList`= 好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:30:48.227

从查看您的代码和堆栈跟踪来看，您似乎得到了一个，`IndexOutOfBoundsException`因为其中的单元格行的`cellStoreArrayList`长度仅为 1。我建议您查看您的电子表格，以确保您正在读取的每一行都有 4 列，因为约束是硬编码的。

在相关的说明中，如果您要对数组索引进行硬编码，您应该将其包围在某种异常捕获机制中。

# fonts - Adobe LiveCycle 字体转换

> ID：14982041
> 
> 赞同：2
> 
> 时间：2013-02-20T14:17:23.210
> 
> 标签：fonts, adobe, livecycle

我正在使用 Adob​​e LiveCycle 在服务器端制作一些文档。

在开发过程中，我使用 Adob​​e LiveCycle Designer 来创建一个新的 pdf 模板。当我设计模板时，我使用“Times New Roman”字体，但如果我从服务器生成 PDF 并检查 PDF 属性，我看到使用的字体是“TimesNewRomanPSMT”和“TimesNewRomanPS-BoldMT”。

我还没有找到对这种行为的解释，请有人能解释一下为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:24:33.797

当表单在服务器端呈现时，字体将被替换。这通常发生在字体尚未使用 LiveCycle 设计器嵌入到模板本身时。如果服务器找不到字体，它会用它认为更接近您正在使用的字体替换它。

您可以导航到文件 > 表单属性 > 保存选项并启用“嵌入字体”。请注意，这将导致您的表单模板大小增加。

有关更多详细信息，请查看以下[链接](http://blogs.adobe.com/formfeed/2011/05/fonts-are-big.html)

如果您有任何其他问题，请告诉我。

谢谢，

阿玛甘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T23:02:47.683

Livecycle 为您提供一个选项，以防您打开 XDP 并且表单中使用的表单不​​可用。有两种方法，首先您可以选择其他字体/默认字体或安装该字体。

# mysql - 将 mysql 转换为 mysqli 需要帮助

> ID：14982042
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:17:33.560
> 
> 标签：mysql, mysqli

我需要将以下内容转换为使用 mysqli 但无法找到示例。有人能帮上忙吗？

```
 $books = array();

         $books_query = mysql_query("SELECT * FROM book");

         while ($books_row = mysql_fetch_assoc($books_query)) {
           $books[] = array(
             'id'           => $books_row['book_id'],
             'book_title'   => $books_row['book_title']
           );
         }
    return $books; 
```

**编辑：**

我已经编码了；

```
$stmt=conn->stmt_init(); 

if($stmt->prepare("SELECT * FROM book")) 
{
   $stmt->execute();
   $stmt->bind_result($r_book_id, $r_book_title); 

   while ($stmt->fetch()) 
   {
        ....
   };
} 
```

但只是不知何故不起作用。

我的问题是我只是从 .net MS SQL 切换到 mySQL 并且需要将 mySQL 转换为 mySQLi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:29:05.747

正如评论所提到的，理想情况下，我们会看到你到目前为止所尝试的......

你的主要资源是；

[http://www.php.net/manual/en/mysqli.quickstart.php](http://www.php.net/manual/en/mysqli.quickstart.php)

但是，此页面提供了一个很好的教程；

[http://codular.com/php-mysqli](http://codular.com/php-mysqli)

对于您的代码；

```
$books = array();

$db = new mysqli('localhost', 'user', 'pass', 'demo');

if($db->connect_errno > 0){
    die('Unable to connect to database [' . $db->connect_error . ']');
}

$sql = "SELECT * FROM book"

if(!$result = $db->query($sql)){
    die('There was an error running the query [' . $db->error . ']');
}

while($row = $result->fetch_assoc()){
           $books[] = array(
             'id'           => $books_row['book_id'],
             'book_title'   => $books_row['book_title']
           );
}

return $books; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:58:25.037

在你写的代码中：

```
$stmt->execute();
$stmt->bind_result($r_book_id, $r_book_title); 
```

根据文档，execute 必须在方法**之后**`bind_result`调用。

此外，一旦您调用，您将使用而不是使用数组`fetch`来访问您的数据。`$r_book_id``$r_book_title`

如果您想要更友好的用户界面，请切换到 PDO。它更容易，并且根据您使用简单或准备好的查询，它没有不同的合成器。

**编辑：**当你想获取一个数组时，这里是诀窍：

```
$stmt->bind_result($r['book_id'], $r['book_title']); 
$stmt->execute();
while($stmt->fetch()){
   $totalResult[] = $r;//$r will contain a row as an array
}
//total result is an array with the whole result set 
```

# sql - 如果结果为空，则选择默认值

> ID：14982043
> 
> 赞同：1
> 
> 时间：2013-02-20T14:17:37.753
> 
> 标签：sql, oracle11g

你好朋友我一直在使用这个查询来选择我的 Java 应用程序上的一些两个字段。

```
select distinct STU_LEVEL, STU_STREAM from STUDENT_MASTER_TABLE where STATUS_YEAR !=ACADEMIC_YEAR 
```

问题是如果没有数据，应用程序会抛出空指针异常。我需要这样，如果字段为 Null，则它们默认为 0。我已经用 Coalesce 尝试过这个，但我似乎无法得到它：

```
select coalesce(distinct (STU_LEVEL,0),  (STU_STREAM, '0')) from STUDENT_MASTER_TABLE where STATUS_YEAR !=ACADEMIC_YEAR 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:18:32.127

你只需要`COALESCE`像这样使用两次：

```
SELECT DISTINCT COALESCE(STU_LEVEL,0), COALESCE(STU_STREAM, '0')
FROM STUDENT_MASTER_TABLE
WHERE STATUS_YEAR !=ACADEMIC_YEAR 
```

如果 STU_Level 为 NULL，这将返回 0，如果 STU_Stream 为 NULL，则返回 0。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!4/e478f/2)

作为对您的评论的回应，当找不到任何记录时，您似乎需要使用 UNION 来获得所需的结果：

```
SELECT DISTINCT COALESCE(STU_LEVEL,0), COALESCE(STU_STREAM, '0')
FROM STUDENT_MASTER_TABLE
WHERE STATUS_YEAR !=ACADEMIC_YEAR
UNION 
SELECT 0,'0' FROM DUAL
WHERE NOT EXISTS (
  SELECT DISTINCT COALESCE(STU_LEVEL,0), COALESCE(STU_STREAM, '0')
  FROM STUDENT_MASTER_TABLE
  WHERE STATUS_YEAR !=ACADEMIC_YEAR
) 
```

还有一个小提琴样本：[http ://www.sqlfiddle.com/#!4/29039/1](http://www.sqlfiddle.com/#!4/29039/1)

# php - 在 Laravel 数据库查询中处理空值？

> ID：14982047
> 
> 赞同：3
> 
> 时间：2013-02-20T14:17:49.330
> 
> 标签：php, mysql, null, laravel, laravel-4

我发现我经常需要根据 id 以外的条件选择一个字段。

所以，`$user = User::where('last_login', $lastLogin)->where('last_warning', $lastWarning)->get();`完美运行。

直到您设置允许空值的位置之一（让我们做`last_login`）。

也就是说，它可以有一个值或为空。

这意味着您需要使用两个功能之一，`where()`或者`whereNull()`要做到这一点，您需要打破链条，所以它变成

```
$user = User::where('last_warning', $lastWarning);

is_null($lastLogin) ? $user->whereNull('last_login') : $user->where('last_login', $lastLogin);

$user = $user->get(); 
```

我想知道是否`where`有办法解决这个问题？就像目前，如果你通过`null`你得到的地方`where column = null`是行不通的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:42:41.790

两种选择：

**选项1：**

```
if (is_null($lastLogin))
{
    $user = User::whereNull('last_login')->where('last_warning', $lastWarning)->get();
}
else
{
    $user = User::where('last_login', $lastLogin)->where('last_warning', $lastWarning)->get();
} 
```

**选项 2：**

```
$user = User::where('last_login', (is_null($lastLogin) ? 'IS' : '=') ,$lastLogin)->where('last_warning', $lastWarning)->get(); 
```

选项二进行查询 '`where last_login = x'`或 ' `where last_login IS null`'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-16T11:11:05.370

你可以试试这个：

```
User::where(function($query) use ($lastlogin)
        {
            if(is_null($lastLogin))
            {
                $query->whereNull('last_login');
            }
            else
            {
                $query->where('last_login', '=', $lastLogin);
            }
        })->get(); 
```

在处理具有多个参数的长查询时，这是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:03:03.153

You can use DB::raw() as well:

```
User::where('last_login', 'IS', DB::raw('null'))->where_last_warning($lastWarning)->get(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-18T19:09:32.707

从 Laravel 5.3 开始，你现在可以`->where('column', null)`自动生成`WHERE column IS NULL`.

如果使用变量，请确保它们具有 PHP`null`严格值。

# c# - MVC 4 Web API 注册过滤器

> ID：14982049
> 
> 赞同：10
> 
> 时间：2013-02-20T14:17:54.747
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在使用 MVC 4 Web API 为应用程序创建服务层。我正在尝试创建一个全局过滤器，它将对 API 的所有传入请求起作用。现在我明白这必须与标准 MVC 全局操作过滤器不同的配置。但是我在获取我在网上找到的任何示例时遇到问题。

我遇到的问题是使用 Web API 注册过滤器。

我的 Global.asax 是这样设置的...

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        MVCConfig.RegisterRoutes(RouteTable.Routes);
        MVCConfig.RegisterGlobalFilters(GlobalFilters.Filters);

        WebApiConfig.RegisterRoutes(GlobalConfiguration.Configuration);
        WebApiConfig.RegisterGlobalFilters(GlobalConfiguration.Configuration.Filters);
    }
} 
```

我的标准 Mvc 路由和过滤器工作正常。我的 WebApi 路由也是如此。这是我的 webApi 过滤器注册...

```
public static void RegisterGlobalFilters(System.Web.Http.Filters.HttpFilterCollection filters)
{
    filters.Add(new PerformanceTestFilter());
} 
```

这里是 PerformanceTestFilter...

```
public class PerformanceTestFilter : ActionFilterAttribute
{
    private readonly Stopwatch _stopWatch = new Stopwatch();

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        _stopWatch.Reset();
        _stopWatch.Start();
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        _stopWatch.Stop();
        var executionTime = _stopWatch.ElapsedMilliseconds;
        // Do something with the executionTime
    }
} 
```

此过滤器在使用标准 Mvc GlobalFilterCollection 注册时工作正常，但是当我尝试使用 System.Web.Http.Filters.HttpFilterCollection 注册它时，我收到一条错误消息，指出它不能分配给参数类型 System.Web.Http。过滤器.IFilter。

所以我假设我的 PerformanceTestFilter 需要从 ActionFilterAttribute 以外的东西继承才能注册为 webapi 过滤器。我只是不确定那需要是什么。

我想我需要创建两个单独的过滤器来分别使用 mvc 和 webapi。如果有一种方法可以创建一个可以同时注册到两者的过滤器，那就太好了。但我主要关心的是让它为 webapi 工作。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T14:22:59.930

以下应该工作。我们实际上将它用于我们的 Web API 项目。

`GlobalConfiguration.Configuration.Filters`是类型`HttpFilterCollection`

```
 var filters = System.Web.Http.GlobalConfiguration.Configuration.Filters;
 filters.Clear();
 filters.Add(new ValidationActionFilterAttribute());

 public class ValidationActionFilterAttribute : FilterAttribute, IActionFilter, IFilter
 {
    ...
 } 
```

> 此外，如果您在一个同时包含 MVC 和 WebAPI 程序集的项目中工作，您能否检查一下您的 ActionFilterAttribute 的命名空间是什么命名空间。这相当令人困惑，因为两者下都有两个 ActionFilterAttributes：

```
 System.Web.Http.Filters
   System.Web.Http.Mvc 
```

来源：[为什么我的 ASP.NET Web API ActionFilterAttribute OnActionExecuting 没有触发？](https://stackoverflow.com/questions/12992722/why-is-my-asp-net-web-api-actionfilterattribute-onactionexecuting-not-firing)

看来您将需要两个过滤器，一个用于 API，一个用于 MVC。您可以将公共代码分解为一个单独的类，然后只使用特定的过滤器来调用您的公共类，从而不违反 DRY 并且基本上使用实际的过滤器作为可以注册为过滤器的包装器。

# java - Java Service Wrapper 可执行可运行 Jar

> ID：14982050
> 
> 赞同：2
> 
> 时间：2013-02-20T14:18:04.420
> 
> 标签：java, java-service-wrapper

WrapperAppJar 我将一个可执行的可运行 jar 文件包装为窗口服务。根据 Tanuki 软件网站上的教程，我将我的应用程序从 eclipse 导出为可执行 jar 文件，并尝试将其包装到 Windows 服务中。当我执行 java -jar smpp-portal -port 90 时，我的应用程序可以从 CLI 顺利运行。但是使用 Wrapper 服务时，我遇到了一些错误。这是我的配置文件

```
#encoding=UTF-8
# Configuration files must begin with a line specifying the encoding
#  of the the file.

#********************************************************************
# Wrapper License Properties (Ignored by Community Edition)
#********************************************************************
# Professional and Standard Editions of the Wrapper require a valid
#  License Key to start.  Licenses can be purchased or a trial license
#  requested on the following pages:
# http://wrapper.tanukisoftware.com/purchase
# http://wrapper.tanukisoftware.com/trial

# Include file problems can be debugged by removing the first '#'
#  from the following line:
##include.debug

# The Wrapper will look for either of the following optional files for a
#  valid License Key.  License Key properties can optionally be included
#  directly in this configuration file.
#include ../conf/wrapper-license.conf
#include ../conf/wrapper-license-%WRAPPER_HOST_NAME%.conf

# The following property will output information about which License Key(s)
#  are being found, and can aid in resolving any licensing problems.
#wrapper.license.debug=TRUE

#********************************************************************
# Wrapper Localization
#********************************************************************
# Specify the locale which the Wrapper should use.  By default the system
#  locale is used.
wrapper.lang=en_US # en_US or ja_JP

# Specify the location of the Wrapper's language resources.  If these are
#  missing, the Wrapper will default to the en_US locale.
#wrapper.lang.folder=../lang

#********************************************************************
# Wrapper Java Properties
#********************************************************************
# Java Application
#  Locate the java binary on the system PATH:
wrapper.java.command=java
#  Specify a specific java binary:
#set.JAVA_HOME=/java/path
#wrapper.java.command=%JAVA_HOME%/bin/java

# Tell the Wrapper to log the full generated Java command line.
wrapper.java.command.loglevel=INFO

# Java Main class.  This class must implement the WrapperListener interface
#  or guarantee that the WrapperManager class is initialized.  Helper
#  classes are provided to do this for you.  See the Integration section
#  of the documentation for details.
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperJarApp

# Java Classpath (include wrapper.jar)  Add class path elements as
#  needed starting from 1
wrapper.java.classpath.1=../lib/wrapper.jar
#wrapper.java.classpath.2=../lib/wrapper.jar

# Java Library Path (location of Wrapper.DLL or libwrapper.so)
wrapper.java.library.path.1=../lib

# Java Bits.  On applicable platforms, tells the JVM to run in 32 or 64-bit mode.
wrapper.java.additional.auto_bits=TRUE

# Java Additional Parameters
wrapper.java.additional.1=

# Initial Java Heap Size (in MB)
#wrapper.java.initmemory=3

# Maximum Java Heap Size (in MB)
#wrapper.java.maxmemory=64

# Application parameters.  Add parameters as needed starting from 1
wrapper.app.parameter.1=../lib/smpp-portal.jar
wrapper.app.parameter.2=-port

#********************************************************************
# Wrapper Logging Properties
#********************************************************************
# Enables Debug output from the Wrapper.
# wrapper.debug=TRUE

# Format of output for the console.  (See docs for formats)
wrapper.console.format=PM

# Log Level for console output.  (See docs for log levels)
wrapper.console.loglevel=INFO

# Log file to use for wrapper output logging.
wrapper.logfile=../logs/wrapper.log

# Format of output for the log file.  (See docs for formats)
wrapper.logfile.format=LPTM

# Log Level for log file output.  (See docs for log levels)
wrapper.logfile.loglevel=INFO

# Maximum size that the log file will be allowed to grow to before
#  the log is rolled. Size is specified in bytes.  The default value
#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or
#  'm' (mb) suffix.  For example: 10m = 10 megabytes.
wrapper.logfile.maxsize=0

# Maximum number of rolled log files which will be allowed before old
#  files are deleted.  The default value of 0 implies no limit.
wrapper.logfile.maxfiles=0

# Log Level for sys/event log output.  (See docs for log levels)
wrapper.syslog.loglevel=NONE

#********************************************************************
# Wrapper General Properties
#********************************************************************
# Allow for the use of non-contiguous numbered properties
wrapper.ignore_sequence_gaps=TRUE

# Do not start if the pid file already exists.
wrapper.pidfile.strict=TRUE

# Title to use when running as a console
wrapper.console.title=Unity SMPP Server

#********************************************************************
# Wrapper JVM Checks
#********************************************************************
# Detect DeadLocked Threads in the JVM. (Requires Standard Edition)
wrapper.check.deadlock=TRUE
wrapper.check.deadlock.interval=10
wrapper.check.deadlock.action=RESTART
wrapper.check.deadlock.output=FULL

# Out Of Memory detection.
# (Ignore output from dumping the configuration to the console.  This is only needed by the TestWrapper sample application.)
wrapper.filter.trigger.999=wrapper.filter.trigger.*java.lang.OutOfMemoryError
wrapper.filter.allow_wildcards.999=TRUE
wrapper.filter.action.999=NONE
#  Ignore -verbose:class output to avoid false positives.
wrapper.filter.trigger.1000=[Loaded java.lang.OutOfMemoryError
wrapper.filter.action.1000=NONE
# (Simple match)
wrapper.filter.trigger.1001=java.lang.OutOfMemoryError
# (Only match text in stack traces if -XX:+PrintClassHistogram is being used.)
#wrapper.filter.trigger.1001=Exception in thread "*" java.lang.OutOfMemoryError
#wrapper.filter.allow_wildcards.1001=TRUE
wrapper.filter.action.1001=RESTART
wrapper.filter.message.1001=The JVM has run out of memory.

#********************************************************************
# Wrapper Email Notifications. (Requires Professional Edition)
#********************************************************************
# Common Event Email settings.
#wrapper.event.default.email.debug=TRUE
#wrapper.event.default.email.smtp.host=<SMTP_Host>
#wrapper.event.default.email.smtp.port=25
#wrapper.event.default.email.subject=[%WRAPPER_HOSTNAME%:%WRAPPER_NAME%:%WRAPPER_EVENT_NAME%] Event Notification
#wrapper.event.default.email.sender=<Sender email>
#wrapper.event.default.email.recipient=<Recipient email>

# Configure the log attached to event emails.
#wrapper.event.default.email.attach_log=TRUE
#wrapper.event.default.email.maillog.lines=50
#wrapper.event.default.email.maillog.format=LPTM
#wrapper.event.default.email.maillog.loglevel=INFO

# Enable specific event emails.
#wrapper.event.wrapper_start.email=TRUE
#wrapper.event.jvm_prelaunch.email=TRUE
#wrapper.event.jvm_start.email=TRUE
#wrapper.event.jvm_started.email=TRUE
#wrapper.event.jvm_deadlock.email=TRUE
#wrapper.event.jvm_stop.email=TRUE
#wrapper.event.jvm_stopped.email=TRUE
#wrapper.event.jvm_restart.email=TRUE
#wrapper.event.jvm_failed_invocation.email=TRUE
#wrapper.event.jvm_max_failed_invocations.email=TRUE
#wrapper.event.jvm_kill.email=TRUE
#wrapper.event.jvm_killed.email=TRUE
#wrapper.event.jvm_unexpected_exit.email=TRUE
#wrapper.event.wrapper_stop.email=TRUE

# Specify custom mail content
wrapper.event.jvm_restart.email.body=The JVM was restarted.\n\nPlease check on its status.\n

#********************************************************************
# Wrapper Windows NT/2000/XP Service Properties
#********************************************************************
# WARNING - Do not modify any of these properties when an application
#  using this configuration file has been installed as a service.
#  Please uninstall the service before modifying this section.  The
#  service can then be reinstalled.

# Name of the service
wrapper.name=SmppServer

# Display name of the service
wrapper.displayname=Unity SMPP Server

# Description of the service
wrapper.description=Unity SMPP Server

# Service dependencies.  Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=

# Mode in which the service is installed.  AUTO_START, DELAY_START or DEMAND_START
wrapper.ntservice.starttype=AUTO_START

# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false 
```

但是我收到以下错误消息：

```
wrapper  | --> Wrapper Started as Console
wrapper  | Java Service Wrapper Professional Edition 64-bit 3.5.17
wrapper  |   Copyright (C) 1999-2012 Tanuki Software, Ltd. All Rights Reserved.
wrapper  |     http://wrapper.tanukisoftware.com
wrapper  |
wrapper  | --------------------------------------------------------------------
wrapper  | Thank you for your interest in the Java Service Wrapper.
wrapper  |
wrapper  | You are running with a full featured trial License Key which will
wrapper  | allow you to run or restart the Java Service Wrapper as many times
wrapper  | as you like.  Each invocation of the Wrapper will shutdown
wrapper  | automatically after 15 minutes.
wrapper  |
wrapper  | This limited trial License Key is useful for quick configuration
wrapper  | tests on various machines without the need to request a trial
wrapper  | license.  If more time is required, you can also immediately obtain
wrapper  | a one-month Free trial license:
wrapper  |   http://wrapper.tanukisoftware.com/trial
wrapper  |
wrapper  | The Java Service Wrapper requires a License Key to activate the
wrapper  | software.  License Keys can be purchased on the Java Service Wrapper
wrapper  | web site:
wrapper  |   http://wrapper.tanukisoftware.com/purchase
wrapper  |
wrapper  | This trial License Key in intended for testing and development and
wrapper  | should not be used as part of a production environment.
wrapper  | --------------------------------------------------------------------
wrapper  |
wrapper  |
wrapper  | Launching a JVM...
wrapper  | Command: "C:\Windows\system32\java.exe" -Dfile.encoding=Cp1252 -Duser.language=en -Djava.library.path="../lib" -classpath "../lib/wrapper.jar" -Dwrapper.key="KEggEM-am9F0iQdg0DR2yCJvAaJoF1WU" -Dwrapper.port=32000 -Dwrapper.jvm.port.
min=31000 -Dwrapper.jvm.port.max=31999 -Dwrapper.pid=7856 -Dwrapper.version="3.5.17-pro" -Dwrapper.native_library="wrapper" -Dwrapper.arch="x86" -Dwrapper.cpu.timeout="10" -Dwrapper.jvmid=1 -Dwrapper.lang.domain=wrapper -Dwrapper.lang.folder=.
./lang org.tanukisoftware.wrapper.WrapperJarApp ../lib/smpp-portal.jar -port
jvm 1    | WrapperManager: Initializing...
jvm 1    | Missing attributes for JarRsrcLoader in Manifest (Rsrc-Main-Class, Rsrc-Class-Path)
jvm 1    | WrapperJarApp:
jvm 1    | WrapperJarApp Error: Encountered an error running main:
jvm 1    | WrapperJarApp Error: java.lang.NullPointerException
jvm 1    | WrapperJarApp Error:         at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:46)
jvm 1    | WrapperJarApp Error:         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    | WrapperJarApp Error:         at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
jvm 1    | WrapperJarApp Error:         at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
jvm 1    | WrapperJarApp Error:         at java.lang.reflect.Method.invoke(Unknown Source)
jvm 1    | WrapperJarApp Error:         at org.tanukisoftware.wrapper.WrapperJarApp.run(WrapperJarApp.java:394)
jvm 1    | WrapperJarApp Error:         at java.lang.Thread.run(Unknown Source)
wrapper  | <-- Wrapper Stopped
Press any key to continue . . . 
```

有人能帮我吗？先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:04:29.150

unhillbilly 有一个很好的观点。但实际上这不是您看到的错误的真正原因。基本上，您的 jar 文件中的清单文件似乎不正确。

当您创建 jar 文件时，您可能正在将项目从 eclipse 导出为可运行的 jar 并选择作为库处理以将所需的 jar 文件打包到生成的 jar 中......

因此，通过这样做，Eclipse 正在使用[JarRsrcLoader](http://javasourcecode.org/html/open-source/eclipse/eclipse-3.5.2/org/eclipse/jdt/internal/jarinjarloader/JarRsrcLoader.java.html)类。

这个类实际上是可执行 jar 的主类，而不是您可能认为的主类。

JarRsrcLoader 需要在清单文件中设置 2 个参数：Rsrc-Main-Class 和 Rsrc-Class-Path。

Rsrc-Main-Class 是您的实际主类的类名。

Rsrc-Class-Path 是启动应用程序的类路径（包含 jar 文件中的所有 jar 文件）。

您的清单文件似乎缺少这两个属性。

因此，您可以通过更改导出 jar 文件的方式来解决此问题，例如使用“在 jar 中提取所需的库”。另一种选择是将缺少的 2 个属性添加到您的 META-INF/manifest.mf 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:15:55.693

Is a value missing for the `port` option? You say that your jar is run as:

```
 java -jar smpp-portal -port 90 
```

However, the wrapper config doesn't seem to have the port number as an application parameter:

```
# Application parameters.  Add parameters as needed starting from 1
wrapper.app.parameter.1=../lib/smpp-portal.jar
wrapper.app.parameter.2=-port 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T13:49:13.600

You can use other executable wrapper

*   Launch4J - [Download](http://sourceforge.net/projects/jsmooth/files/latest/download?source=files)

*   JSmooth - [Download](http://sourceforge.net/projects/jsmooth/files/latest/download?source=files)

Other options are also available :)

# android - 为什么我可以连接到远程服务器，但不能连接到本地网络中的服务器？

> ID：14982052
> 
> 赞同：0
> 
> 时间：2013-02-20T14:18:13.687
> 
> 标签：android, networking

我实现了一个 TCP 客户端，到目前为止它工作正常，至少如果我尝试连接到远程服务器。如果该服务器在我的本地 wifi 网络中，我总是会得到

```
02-20 14:09:04.400: W/System.err(29562): java.net.SocketException: failed to connect to /xxx.xxx.xxx.xxx (port xyz) after 5000ms: isConnected failed: EHOSTUNREACH (No route to host) 
```

但！！如果我让本地服务器 ping 我的 android 设备，在它被 ping 之后它将工作并且设备将连接到我的本地服务器。

这种行为的任何已知原因？我不知道应该从哪里开始寻找解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:23:24.603

您尚未对本地网络进行任何发现，因此设备不知道服务器的位置。答案在于错误：“No route to host”

首先进行网络发现以更新 MAC 表。通常您可以检查 MAC 是否已知（在 ARP 表中），如果不知道，请先执行 ARP 请求。

首次从服务器 ping 时它起作用的原因：然后移动设备知道 MAC（在 ARP 表或 MAC 表中）。

# c++ - 混合模式进程与托管到非托管 IPC

> ID：14982053
> 
> 赞同：2
> 
> 时间：2013-02-20T14:18:12.960
> 
> 标签：c++, .net, garbage-collection, c++-cli, ipc

我正在尝试为我正在从事的当前项目提出设计候选人。它的客户端接口基于公开公共方法和回调的 WCF 服务。请求一直路由到执行计算、操作等的 C++ 库（使用 boost）。

当前方案基于通过 IPC 与单独的本机 C++ 进程通信的 WCF 服务。

为了让事情更简单一点，这里有一个建议去混合模式（即有一个单一的.NET进程，它在其中加载本机C++层，很可能通过一个非常薄的C++/CLI层与其通信） . 主要关注的是垃圾收集或其他 .NET 方面是否会阻碍进程的非托管 C++ 部分的性能。

我开始查找安全点和 GC 辅助方法（例如 KeepAlive() 等）的概念，但我找不到任何关于此或基准的直接讨论。据我目前所知，安全点之一是如果线程正在执行未管理的代码，并且在这种情况下垃圾收集不会*暂停*任何线程（这是正确的吗？）来执行清理。

我想我的主要问题是在同一个进程中运行这两种类型的代码而不是拥有单独的进程时，本机端存在性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:02:47.713

如果您有一个从未执行过任何托管代码的线程，则它不会在 .NET 垃圾回收期间被冻结。

如果使用托管代码的线程当前正在本机代码中运行，则垃圾收集器不会冻结它，而是将线程标记为在下一次到达托管代码时停止。但是，如果您正在考虑长时间不返回的本机调度循环，您可能会发现您正在阻塞垃圾收集器（或将东西固定在固定位置导致缓慢的 GC 和碎片）。因此，我建议让您的线程在本机代码中执行重要任务，完全纯净。

确保编译器不会为某些标准 C++ 代码静默生成 MSIL（从而使其作为托管代码执行）有点棘手。但最终，您可以通过谨慎使用`#pragma managed(push, off)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:03:59.580

启动并运行混合模式应用程序非常容易，但要使其正常运行却非常困难。

我建议在选择该设计之前仔细考虑 - 特别是关于如何分层应用程序以及您期望非托管对象的生命周期。从过去的经验中的一些想法：

1.  C++ 对象生命周期 - 按体系结构。
    在本地范围内短暂使用 C++ 对象，然后立即处理它们。这听起来很明显但值得说明的是，C++ 对象是非托管资源，旨在用作非托管资源。通常，他们期望确定性的创建和销毁 - 通常会广泛使用 RAII。从托管程序控制这可能非常尴尬。IDispose 模式的存在就是为了尝试解决这个问题。这对于短寿命的对象可以很好地工作，但对于长寿命的对象来说相当乏味且难以正确处理。特别是如果您开始使非托管对象成为托管类的成员，而不是仅存在于函数范围内的东西，那么很快程序中的每个类都必须是 IDisposable 并且突然之间托管编程变得比非托管编程更难。

2.  GC 太激进了。永远值得记住的是，当我们谈论托管对象超出范围时，我们的意思是在 IL 编译器/运行时的眼中，而不是您正在阅读代码的语言。如果非托管对象作为成员和托管对象保留旨在删除它事情可能会变得复杂。如果您的程序从上到下的处置模式不完整，则 GC 可能会变得相当激进。例如，假设您尝试编写一个托管类，该类在其终结器中删除一个非托管对象。假设您对托管对象所做的最后一件事是访问非托管指针以调用方法。然后 GC 可能会决定在该非托管调用期间是收集托管对象的好时机。突然，您的非托管指针在方法调用中被删除。

3.  GC 不够激进。如果您在地址限制范围内工作（例如，您需要 32 位版本），那么您需要记住 GC 会保留内存，除非它认为需要放手。它对这些想法的唯一输入是托管世界。如果非托管分配器需要空间，则与 GC 没有连接。非托管分配可能会因为 GC 没有收集到长期超出范围的对象而失败。有一个内存压力 API，但它同样只对非常简单的设计真正有用/有用。

4.  缓冲区复制。您还需要考虑在哪里分配任何大内存块。托管块可以固定为看起来像非托管块。非托管块只有在需要看起来像托管块时才能被复制。但是，这个大型托管块何时会真正被释放？

# android - 表格行中的相对布局

> ID：14982055
> 
> 赞同：0
> 
> 时间：2013-02-20T14:18:28.183
> 
> 标签：android, android-layout

我有以下布局，我认为一切都是正确的，但是在运行这些代码时出现以下错误！有任何想法吗？

```
 <TableLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="#e3e1e1">
           <TableRow
           android:layout_width="fill_parent"
           android:layout_height="fill_parent">
                <RelativeLayout
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content">
                    <ProgressBar
                        android:id="@+id/tPr"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" 
                        android:layout_centerInParent="true"/>
                   <GridView
                       android:id="@+id/tApps"
                       android:layout_width="wrap_content"
                       android:layout_height="258dp"
                       android:background="#e3e1e1"
                       android:gravity="center"
                       android:horizontalSpacing="2dp"
                       android:numColumns="3"
                       android:verticalSpacing="2dp"
                       android:visibility="gone">
                   </GridView>
               </RelativeLayout>
       </TableRow>
   </TableLayout> 
```

这是我的Logcat：

```
02-20 17:34:34.261: E/AndroidRuntime(1125): FATAL EXCEPTION: main
02-20 17:34:34.261: E/AndroidRuntime(1125): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.coverflow/com.example.coverflow.CoverFlowExample}: java.lang.ClassCastException: android.widget.ProgressBar
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.os.Looper.loop(Looper.java:123)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at java.lang.reflect.Method.invoke(Method.java:521)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-20 17:34:34.261: E/AndroidRuntime(1125):     at dalvik.system.NativeStart.main(Native Method)
02-20 17:34:34.261: E/AndroidRuntime(1125): Caused by: java.lang.ClassCastException: android.widget.ProgressBar
02-20 17:34:34.261: E/AndroidRuntime(1125):     at com.example.coverflow.CoverFlowExample.onCreate(CoverFlowExample.java:41) 
```

**第 41 行是 top = (GridView)findViewById(R.id.tApps);**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:34:16.547

我有这个错误，有不同`View`的 s，这没有意义，因为它抱怨`ProgressBar`你有一个`GridView`. 假设您正在声明您的观点应该是什么，请清理您的项目。在日食中

**项目-->清理...**

它应该可以解决您的问题。

# php - foreach循环中的mysql更新

> ID：14982060
> 
> 赞同：1
> 
> 时间：2013-02-20T14:18:33.960
> 
> 标签：php, mysql

我想弄清楚如何用数组更新mysql表。

该表有 3 个字段：id、rate、pol_id。“插入”效果完美：

```
 foreach ($rates as $rn=>$rv) {
 $sql3=mysql_query("INSERT into `rates` (`rate`, `pol_id`) 
             values ( '$rv', '$polid',)") or die ("Unable to issue query sql2:   ".mysql_error()); } 
```

$rates 实际上是来自动态输入字段的数组。

所以我得到了这样的例子：

```
id  |   rate |    pol_id
=========================
1   |   5.6  |     272  
2   |   6.3  |     272 
3   |   7.9  |     272 
```

现在我想编辑输入字段中的值，所以我需要更新表格：

我试过这个：

```
foreach ($rates as $rn=>$rv) {
$sql3=mysql_query("UPDATE `rates` SET `rate`='$rv' WHERE   `pol_id`='$polid'")or die ("Unable to issue query sql3: ".mysql_error()); } 
```

但这不起作用，它使用最后一个值更新所有行。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:21:58.487

您的 $polid 变量在 foreach 循环内没有被更改。这会导致您的 where 语句对于表中具有相同 pol_id（在 $polid 中指定）的所有元素都为**真。**`rates`这会将“所有”条目（pol_id = $polid）的值设置为您刚刚输入的最后一个值（在 $rv 中）。

如果您知道 rate 的旧值如下所示，您可以尝试在 where 语句中添加第二个条件：

```
$sql3=mysql_query("UPDATE `rates` SET `rate`='$rv' WHERE   `pol_id`='$polid' AND `rate`={old_value}")or die ("Unable to issue query sql3: ".mysql_error()); } 
```

一种更好的方法是使用 rate 的 id 列（因为它保证是唯一的），首先执行查询以检索您想要的条目的 ID，然后在更新查询中使用该 ID。

```
$query1 = mysql_query("select id from rates where {your desired condition};
/* Assign the result of $query1 to $id */
$sql3=mysql_query("UPDATE `rates` SET `rate`='$rv' WHERE   `pol_id`='$polid' AND `id` = $id)or die ("Unable to issue query sql3: ".mysql_error()); } 
```

您现在甚至可以让`pol_id`= '$polid' 退出查询，因为 id 是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:22:59.697

您正在使用键 $rn 和值 $rv 循环 $rates。

$polid 在循环期间保持不变，因此每次更新都会影响相同的行/行。

# javascript - 如何检测页面何时滚动到底部并执行一次功能

> ID：14982066
> 
> 赞同：0
> 
> 时间：2013-02-20T14:18:37.047
> 
> 标签：javascript, jquery

我正在使用 ajax 从 Web 服务动态加载 XML，对于每个 url 'load' 或 'call'，返回的记录仅限于 25 个项目......为了解决这个问题，我有一个用户向下滚动的过程页面，当它们达到页面高度的 90% 时（或者当它们达到页面底部时——我不确定我会选择哪个），名为 startindexnum 的变量增加 25。

所以 startindexnum 从 25 开始......然后在函数的第一次“触发”之后，startindexnum 变为 50，第三次变为 75，依此类推。

我的问题是它会触发多次并且有些不稳定 - 当我滚动到底部时会处理多次，有时会增加超过 25 次（我认为无疑是多次运行的结果）。

任何人都知道我需要调整什么才能正确生成增量 startindex 变量以附加到我检索 XML 的 ajax URL？谢谢。

```
var scrollcount = 1;
var startindexnum = 25;
var processing;

$(document).ready(function(){
    $(document).scroll(function(e){
       if (processing)
            return false;

            window.onscroll = function(ev) {

             if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight){
                //if ($(window).scrollTop() >= ($(document).height() - $(window).height())*0.9){
                    // you're at x%  of the page
                    processing = true;
                    scrollcount = scrollcount + 1;
                    startindexnum = scrollcount * startindexnum;
                    console.log(scrollcount);
                    docall();

                    processing = false;

                };
            };
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:25:56.307

问题是我打赌`docall()`是一个异步调用，所以在调用之后设置`processing`to`false`不会阻止未来的滚动事件。

false 的设置发生在结果返回之前。您希望在完成任务后设置`processing`回 false 。`docall()`

```
 if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight){
            //if ($(window).scrollTop() >= ($(document).height() - $(window).height())*0.9){
                // you're at x%  of the page
                processing = true;
                scrollcount = scrollcount + 1;
                startindexnum = scrollcount * startindexnum;
                console.log(scrollcount);
                docall();

                //processing = false;  <--get rid of this

            }; 
```

和

```
function docall(){

    //When you are done fetching the new data and update the page set 
    function AjaxCallIsDone() {
        processing = false;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:55:16.597

In addition to epascarello's post...

you don't need the $(document).scroll(fn) and the window.onscroll, which you are attaching to every time your document scroll handler is executed. A few things:

1) Firstly, take a look at this scroll post by John Resig. [Scrolling by J.Resig](http://ejohn.org/blog/learning-from-twitter/)

2) If you want the jquery method then use window instead of document $(window).scroll(fn).

3) If not then I think the following will work for you:

```
var scrollcount = 1;
var startindexnum = 25;
var processing;

$(document).ready(function(){
    window.onscroll = function(ev) {
        if (!processing) {   
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight){
                processing = true;
                scrollcount = scrollcount + 1;
                startindexnum = scrollcount * startindexnum;
                console.log(scrollcount);
                docall();
            }
        }               
    }
}); 
```

# iphone - iOS Reminders 应用程序可以根据特定日期设置提醒

> ID：14982069
> 
> 赞同：1
> 
> 时间：2013-02-20T14:18:40.377
> 
> 标签：iphone, ios, objective-c, cocoa-touch, reminders

如果我选择默认的提醒应用程序在一天（例如 2 月 10 日）提醒我某事，并且在某个位置它会说“在 2 月 10 日，您的基于位置的提醒将处于活动状态”。

所以它甚至可以在**特定日期在后台设置基于位置的提醒？**

这真的很有趣，我想知道这怎么可能，有什么诀窍还是只是因为 Apple 为他们的股票应用程序提供了无限的权力？

PS - 我已经知道如何设置基于位置的提醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:25:48.597

Its no big deal. This techniques is called `GeoFencing`. You can do it too. [Apple Location framework](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html) provides some interesting APIs for this purpose.

Try to use the

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region;
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region; 
```

What these delegate methods give you is a easy way to set local notification on a iOS device. So for example you can provide an interface where a user wants to be notified about something when he enters a `region`. The definition of `region` is nothing but latitude, longitude with a radius defined. Ex. when you enter a certain region on your way to work you can set a reminder to drop off laundry. etc. It's all actually pretty easy...

To add a little bit more. There are 2 sides to this. First setting the notification, next is consuming or showing the notification. Setting the notification is a straightforward user's current location capture. While doing tell locationManager to monitor this region. When the user enters this region (you could have a date as further filtering criteria) then alert the user.

All this will work even if your app is running in background or closed. iOS will take care of this.

[[more code here]](http://www.netmagazine.com/tutorials/get-started-geofencing-ios)

# javascript - iframe里面有fancybox，会弹出onload。我希望它自动关闭。

> ID：14982072
> 
> 赞同：0
> 
> 时间：2013-02-20T14:18:49.017
> 
> 标签：javascript, jquery, iframe, fancybox

花式框确实有一个关闭按钮，但我需要从一开始就将其删除。

如何做到这一点？

# opengl - textureUnits中的UV纹理奇怪，openscenegraph

> ID：14982078
> 
> 赞同：0
> 
> 时间：2013-02-20T14:19:12.087
> 
> 标签：opengl, openscenegraph

我遇到纹理问题。我将模型作为 .osg 打开，所以我将在这里引用它。我在 textureUnit 0 中有一个纹理作为基础纹理。然后我在 textureUnit 1 中有第二个纹理，它充当各种标签。我在那里应用了一个 rgba 纹理，然后它应该在openscenegraph中的模型上是透明的。但是我明白了：

[![图像](../Images/73c369399656c8b76b94570cf5123f47.png)](https://i.imgur.com/6RsQM7p.jpg)

灰色区域是基础纹理。较暗的区域是 uv 坐标移出纹理本身边缘的位置。我似乎无法去除黑暗区域。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:28:08.940

您可能需要设置边缘钳制模式——黑暗可能是纹理边框颜色的一部分。尝试将 GL_CLAMP_TO_EDGE 设置为纹理环绕模式。

# c# - 演员表之间有什么区别：（A）x和x作为A？

> ID：14982080
> 
> 赞同：1
> 
> 时间：2013-02-20T14:19:21.107
> 
> 标签：c#, .net, casting

假设有一个接口`A`和一个实现该接口的类的变量“x”。现在我可以执行这些：

```
var a = (A) x; 
```

或者：

```
var a = x as A; 
```

我知道在失败的情况下，第一条语句会抛出 an `InvalidCastException`，第二条语句会 return `null`。但是还有其他区别吗？特别是性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:21:09.493

通过这样做`(A)x`，你正在做一个肯定会尝试和施放的演员，如果它不能施放，就会有一个例外。

如果您使用`as`它将强制转换或成为`null`.

但是，您拥有自己尝试此操作所需的所有示例代码，因此您可以在询问我们您所说的代码将要做什么之前尝试此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:21:24.733

第一个尝试立即转换，第二个实际上检查 x 是否属于 A 类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:22:47.510

as 运算符类似于强制转换操作。但是，如果无法进行转换，则 as 返回 null 而不是引发异常。

您可以使用 as 运算符在兼容的引用类型或可空类型之间执行某些类型的转换。

考虑以下示例：

```
expression as type 
```

该代码等价于以下表达式，只是表达式变量仅计算一次。

```
expression is type ? (type)expression : (type)null 
```

**请注意**，as 运算符仅执行引用转换、可为空的转换和装箱转换。as 运算符不能执行其他转换，例如用户定义的转换，而应使用强制转换表达式来执行。

参考： [as（C#参考）](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)

# android - 安卓推特登录错误

> ID：14982085
> 
> 赞同：1
> 
> 时间：2013-02-20T14:19:40.160
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我已经在我的 android 应用程序中集成了 twitter。它工作了很长时间，但现在当我尝试登录 twitter 时它给出了错误。它给出以下错误：“无法获取请求令牌”和堆栈跟踪如下。请帮我解决这个问题。

```
 02-20 19:44:09.687: D/TwitterApp(3928): Failed to get request token
02-20 19:44:09.687: W/System.err(3928): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 301 (Moved Permanently)
02-20 19:44:09.687: W/System.err(3928):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
02-20 19:44:09.687: W/System.err(3928):     at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
02-20 19:44:09.687: W/System.err(3928):     at com.twitter.android.TwitterApp$2.run(TwitterApp.java:108)
02-20 19:44:09.687: W/System.err(3928): Caused by: oauth.signpost.exception.OAuthCommunicationException: Service provider responded in error: 301 (Moved Permanently)
02-20 19:44:09.687: W/System.err(3928):     at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:241)
02-20 19:44:09.687: W/System.err(3928):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
02-20 19:44:09.687: W/System.err(3928):     ... 2 more 
```

谢谢穆拉利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:48:58.087

这篇文章还可以帮助您在调用构造函数时使用的 url stackoverflow.com/questions/14933160/...</p>

如果您在 dev.twitter.com 上创建应用程序时没有将 Callback Url: 添加到应用程序的设置选项卡中的应用程序类型，您可能会遇到此问题。

这个修复对我有用。希望为他人工作的人遇到同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:57:25.053

尝试发出安全请求。而不是[http://twitter.com](http://twitter.com)，请始终使用[https://twitter.com](https://twitter.com)。它对我有用。我希望它有所帮助。

# asp.net - 如何在 C# 中获取 Mongo 更新查询状态

> ID：14982087
> 
> 赞同：1
> 
> 时间：2013-02-20T14:19:51.403
> 
> 标签：asp.net, mongodb

我需要获取更新查询状态意味着查询是否成功执行。我如何做到这一点。

```
MongoCollection<BsonDocument> Updatecollection = 
                           MongoDBs.GetCollection<BsonDocument>(collectionName); 
Updatecollection.Update(query, update, UpdateFlags.Multi); 
```

这是我用来更新收藏的方式，请帮助我获取查询状态。

在此先感谢西瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:45:59.003

该`Update`方法返回一个`WriteConcernResult`包含更新结果的对象。

有关该对象的详细信息，请参阅[文档](http://api.mongodb.org/csharp/current/html/9cb94685-941c-28a5-ee6c-9dd5338741d9.htm)。

例如：

```
var result = Updatecollection.Update(query, update, UpdateFlags.Multi);
Console.WriteLine("{0} docs updated", result.DocumentsAffected); 
```

# android - 处理多个 http 请求并丢弃除最后一个之外的所有响应

> ID：14982090
> 
> 赞同：0
> 
> 时间：2013-02-20T14:19:56.813
> 
> 标签：android, httprequest

我有一个 android 应用程序，其中我正在触发 http 请求以从服务器获取数据以显示在 mapview 中。每当用户平移时我都会发出一个请求，现在我的需要是假设用户平移 7 次（意味着 7 个请求进入）我应该取消/丢弃前 6 个请求的响应，并考虑在 mapview 中显示第 7 个响应。

我只是模糊地考虑在请求队列进入时维护请求队列并将其逐个发布到服务 1。如果有新请求进入，如果请求尚未发布，则取消它。如果请求已经发布并且有新请求进入，则丢弃其响应。

处理它的最佳方法是什么。任何指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:32:06.783

问题是：你什么时候决定用户准备好平移？

如果您想创建某种队列，您需要知道何时决定用户准备好平移。

经过一些平底锅（例如 7）后，您等待 2 秒？并决定“好的，用户完成平移，让我们处理最后一个请求”？意味着只做 1 个请求。

还是您实际上做了 7 个请求并且只使用最后一个响应？

如果您执行 7 个请求，为什么不将所有响应保存在同一个变量中，有效地始终使用最后一个。

可能性1（请求多，地图绘制多）：

*   用户平底锅
*   发送地图信息请求
*   保存回复
*   绘制地图
*   并重复上述步骤

可能性2（许多请求，较少的地图绘制）：

*   用户平底锅
*   发送地图信息请求
*   保存回复
*   如果用户完成平移，请检查计时器？是：继续，否：重复以上
*   绘制地图

可能性3（较少的要求，较少的地图绘制）：

*   用户平底锅
*   保存请求
*   如果用户完成平移，请检查计时器？是：继续，否：重复以上
*   发送地图信息请求
*   保存回复
*   绘制地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:27:12.507

您可以使用单例设计模式。如果实施得当，它将只允许一个线程/AsyncTask 更改其状态。这样，您可以确保它只保存您处理的最后一个响应中的数据。

# .net - 发布从 SharePoint Server 下载的 InfoPath 表单时出错

> ID：14982094
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:20:10.437
> 
> 标签：.net, sharepoint, infopath, infopath-forms-services

我是 InfoPath 的新手！我从 Sharepoint 下载了一个 InfoPath 表单并尝试发布它显示错误的 InfoPath 表单，如下所示：

```
Error:InfoPath will remove the following fields from your SharePoint list:
field1; field2; Middle Name

InfoPath will add the following fields to your SharePoint list:
field1; field2

Column settings in SharePoint will be updated to match the field properties set in InfoPath. Any modifications made on the server after the form was opened might be lost. 
```

为什么在发布副本而不进行更改时会发生此错误？

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:43:09.900

听起来在 InfoPath 表单来自的原始网站集中有一个提升的列，并且此列（字段）在您当前尝试发布的网站集中也不存在。

尝试将该字段添加到您也发布表单的网站集中。

# c++ - OpenGL ES 2.0 PowerVR SDK 入门

> ID：14982096
> 
> 赞同：1
> 
> 时间：2013-02-20T14:20:16.490
> 
> 标签：c++, opencv, opengl-es-2.0

我正在寻找一些帮助，以便在我的 Pandaboard (GPU:PowerVR) 上开始使用 OpenGL ES 2.0。我的问题是我的应用程序使用 OpenCV 来执行一些图像处理和图像查看。不幸的是，使用 OpenCV 查看图像非常慢。所以我决定使用 OpenGL ES 2.0 来查看我的图像。我下载了 PowerVR Insider Legacy SDK 并成功编译了一些示例。但是现在我不知道如何将 OpenCV Mat 转换为一些 OpenGL 纹理。我找到了一些关于该转换的想法，但我没有找到任何答案，有人为此目的显示了所需的 OpenGL init。

有人有一个好的起点或更好的一些代码狙击，我可以理解要走的路吗？（我只需要一些代码来查看屏幕上的图像，没有别的）

最好的问候于尔根

# python - 使用 python 和 elixir 使用带有外键的 db 表发送电子邮件

> ID：14982098
> 
> 赞同：0
> 
> 时间：2013-02-20T14:20:17.863
> 
> 标签：python, smtp, sqlalchemy, smtplib, python-elixir

我有一个 python 脚本，它从单个数据库表中提取信息并向用户发送每周更新的电子邮件。我想找到一种方法来修改我的代码以允许规范化结构并将所有调查员信息（前缀、fname、lname 和电子邮件）放入它自己的表中。但是，我不确定如何在 elixir 模型的结构和我的 python 代码中执行此操作。

这是我当前的长生不老药模型文件：

```
from elixir import *
import auth as auth
au = auth.UserAuth()

metadata.bind = 'mysql://' + au.user + ':' + au.password + '@localhost/' + au.database
metadata.bind.echo = True

class Protocol(Entity):
    id = Field(Integer, primary_key = True)
    irb_no = Field(Text)
    title = Field(Text)
    prefix = Field(Text)
    fname = Field(Text)
    lname = Field(Text)
    email = Field(Text)
    action_date = Field(Date)
    action = Field(Text)
    approved = Field(Integer)
    using_options(tablename = 'protocols')

    def __repr__ (self):
        return '%d' %(self.id) 
```

这是我的python脚本：

```
import smtplib
import auth as auth
import ProtocolModel as PM
from elixir import *
from datetime import datetime

au = auth.UserAuth()
setup_all()
create_all()
table = PM.Protocol
records = table.query.all()

if len(records) == 0:
    print 'No records in Table'
else:
    for record in records:
        setup_all()
        if record.approved == 1:
            print 'Completed'
        else:
            FROMADDR = au.google_user
            LOGIN    = FROMADDR
            PASSWORD = au.google_password
            TOADDRS  = record.email
            SUBJECT  = "Weekly Research Update for " + record.irb_no + " - " + record.title
            date1 = datetime.strptime(str(record.action_date), '%Y-%m-%d')
            date2 = date1.strftime('%B %d, %Y')
            msg = ("From: %s\r\nTo: %s\r\nSubject: %s\r\n\r\n" % (FROMADDR, ", ".join(TOADDRS), SUBJECT) )
            msg += 'Dear' + ' ' + record.prefix + ' ' + record.fname + ' ' + record.lname + ',' + '\n' + '\n'
            msg += 'Our records indicate that the most recent action on your research protocol titled ' + record.title + ' was taken on ' + str(date2) +'.' +'\n'
            msg += 'This action was: ' + record.action

            server = smtplib.SMTP('smtp.gmail.com', 587)
            server.set_debuglevel(1)
            server.ehlo()
            server.starttls()
            server.login(LOGIN, PASSWORD)
            server.sendmail(FROMADDR, TOADDRS, msg)
            server.quit() 
```

这似乎应该是一个相对简单的改变，但我只是不确定如何去做。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:17:43.847

我想到了。在模型文件的新实体类中使用了 ManyToOne，并在 python 代码中引用了它。一旦我回到它，这是一个简单的修复。

新的灵药模型：

```
from elixir import *
import auth as auth
au = auth.UserAuth()

metadata.bind = 'mysql://' + au.user + ':' + au.password + '@localhost/' + au.database
metadata.bind.echo = True

class Investigator(Entity):
    id = Field(Integer, primary_key = True)
    prefix = Field(Text)
    fname = Field(Text)
    lname = Field(Text)
    email = Field(Text)
    using_options(tablename = 'investigators')

    def __repr__ (self):
        return '%d' %(self.id)

class Protocol(Entity):
    id = Field(Integer, primary_key = True)
    irb_no = Field(Text)
    title = Field(Text)
    investigator = ManyToOne('Investigator', colname='investigator_id')
    action_date = Field(Date)
    action = Field(Text)
    approved = Field(Integer)
    using_options(tablename = 'protocols')

    def __repr__ (self):
        return '%d' %(self.id) 
```

新的python脚本：

```
import smtplib
import auth as auth
import ProtocolModel1 as PM
from elixir import *
from datetime import datetime

au = auth.UserAuth()
setup_all()
create_all()
table = PM.Protocol
records = table.query.all()

if len(records) == 0:
    print 'No records in Table'
else:
    for record in records:
        setup_all()
        if record.approved == 1:
            print 'Completed'
        else:
            FROMADDR = au.google_user
            LOGIN    = FROMADDR
            PASSWORD = au.google_password
            TOADDRS  = record.investigator.email
            SUBJECT  = "Weekly Research Update for " + record.irb_no + " - " + record.title
            date1 = datetime.strptime(str(record.action_date), '%Y-%m-%d')
            date2 = date1.strftime('%B %d, %Y')
            msg = ("From: %s\r\nTo: %s\r\nSubject: %s\r\n\r\n" % (FROMADDR, ", ".join(TOADDRS), SUBJECT) )
            msg += 'Dear' + ' ' + record.investigator.prefix + ' ' + record.investigator.fname + ' ' + record.investigator.lname + ',' + '\n' + '\n'
            msg += 'Our records indicate that the most recent action on your research protocol titled ' + record.title + ' was taken on ' + str(date2) +'.' +'\n'
            msg += 'This action was: ' + record.action

            server = smtplib.SMTP('smtp.gmail.com', 587)
            server.set_debuglevel(1)
            server.ehlo()
            server.starttls()
            server.login(LOGIN, PASSWORD)
            server.sendmail(FROMADDR, TOADDRS, msg)
            server.quit() 
```

# netbeans - 自动格式化问题

> ID：14982104
> 
> 赞同：0
> 
> 时间：2013-02-20T14:20:30.600
> 
> 标签：netbeans, netbeans-7

我必须遵循特定的编码标准，并且我在将 netbeans 格式化为其中一个标准时遇到问题。

下面是 netbeans 格式化代码的方式：

```
}else
{ 
```

这是我需要它来格式化代码的方式：

```
}
else
{ 
```

它对`else`和都适用`elseif`。在编辑器选项中的格式化下，在大括号类别中，我将它们全部设置为`New Line`，那么为什么将 and 格式化在`else`与`elseif`右大括号相同的行上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:05:06.743

这确实有点误导。在“对齐”类别下，有一组“新行”复选框。您需要检查“其他”复选框。

# sql - 手动更改postgresql中查询的执行计划？

> ID：14982120
> 
> 赞同：4
> 
> 时间：2013-02-20T14:21:23.743
> 
> 标签：sql, postgresql, common-table-expression

是否可以在 postgresql 中手动更改执行计划的操作顺序？例如，如果我总是希望在过滤之前进行排序操作（尽管它在 postgresql 的正常使用中没有意义），是否可以通过例如更改操作的内部成本来手动强制执行？

如果我实现自己的功能呢？是否有可能在 sql 语句的最后始终执行这样的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T15:30:41.743

首先使用子查询或[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)强制执行某些操作。像：

```
SELECT *
FROM  (
   SELECT *
   FROM   tbl
   LIMIT  10
   ) x
ORDER  BY 1; 
```

当然，您需要了解*自己*在做什么。在示例中，我选择了 10 个*任意*行，然后按第一列对它们进行排序。
您可以连续使用多层子查询或多个 CTE。

与 CTE 相同的示例：

```
WITH x AS (
   SELECT *
   FROM   tbl
   LIMIT  10
   )
SELECT *
FROM   x
ORDER  BY 1; 
```

对于简单的查询，子查询通常更快，CTE 提供额外的功能（例如在不同查询级别的多个地方重用相同的 CTE）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:37:26.240

还有更多方法——这里展示了一些方法，但还有第二种方法，如果你想在处理结束时移动函数调用，那么只需将 COST 设置为更高的值。自定义函数的默认值为 100，但您可以设置更高的值。

```
CREATE OR REPLACE FUNCTION public.test()
 RETURNS integer
 LANGUAGE plpgsql
 IMMUTABLE COST 1000 -- very expensive function
AS $function$
declare i int;
declare j int;
begin
  i := 1;
  while i < 10000 loop
    j := 1;
    while j < 1000 loop
      j := j + 1;
    end loop;
    i := i + 1;
  end loop;
  return i;
end;
$function$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:37:28.697

如果没有 CTE（其他人已经解释过），您能做的最好的事情就是关闭某些类型的操作。这通常被认为是危险的并且是不得已而为之的方法，因为它通常指向数据库中的错误（即缺少索引、没有足够的清理、分析采样太低）或 PostgreSQL 代码中的错误。

但如果你想尝试一下，请查看“enable_seqscan”和其他设置，参见例如[PostgreSQL 文档](http://www.postgresql.org/docs/9.1/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-ENABLE)。

# apache-flex - 灵活移动。如何备份数据？

> ID：14982124
> 
> 赞同：1
> 
> 时间：2013-02-20T14:21:28.393
> 
> 标签：apache-flex

我有 2 个视图。这是第一视图。

```
 <?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        title="MTA">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            import adobe.utils.CustomActions;

            import data.MTA_Item;

            [Bindable]
            public static var actions:ArrayCollection;
            public var firstItem:MTA_Item;
            public var secondItem:MTA_Item;
            public var thirdItem:MTA_Item;
            public function initItems():ArrayCollection
            {
                actions = new ArrayCollection();
                firstItem = new MTA_Item(1,"Test","Test note");
                secondItem = new MTA_Item(2,"DevCom","My First Notes");
                thirdItem = new MTA_Item(3,"Auto" , "BMW");
                actions.addItem(firstItem);
                actions.addItem(secondItem);
                actions.addItem(thirdItem);
                return actions;
            }
            override public function set data(value:Object):void
            {
                if(actions == null)
                initItems();
            }
        ]]>

    </fx:Script>

    <s:VGroup>

    <s:Label text="was" >

    </s:Label>
    </s:VGroup>
    <s:List id="items" left="0" right="0" top="0" bottom="0" dataProvider="{actions}" change="navigator.pushView(FormDetails, items.selectedItem)">
        <s:itemRenderer>
            <fx:Component>
                <s:IconItemRenderer label="ID:{data.ID}Name:{data.Name}" />
            </fx:Component>
        </s:itemRenderer>
    </s:List>

</s:View> 
```

第二视图。

```
 <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            import views.FlexMobileTestAppHomeView;
            public function list_changeHandler(event:Event):void
            {
                var name:String = _namechange.text;
                var notes:String  = _note.text;
                navigator.pushView(FlexMobileTestAppHomeView,data);

            }
            override public function set data(value:Object):void
            {

            }
        ]]>
    </fx:Script>
    <s:navigationContent>
        <s:Button label="Back"
                  click="navigator.popToFirstView()"/>
    </s:navigationContent>
    <s:actionContent >
        <s:Button label="save" click="list_changeHandler(event)" />

    </s:actionContent>

    <s:HGroup verticalAlign="middle" gap="12">

        <s:VGroup>
            <s:HGroup>
                <s:Label text="Name:" />
                <s:TextInput  id="_namechange" text="{data.Name}">

                </s:TextInput>  
            </s:HGroup>
            <s:HGroup>
                <s:Label text="Notes:"/>
                <s:TextArea id="_note"  text="{data.Notes}" />

            </s:HGroup>

        </s:VGroup>

    </s:HGroup>

</s:View> 
```

我需要将数据传递给 2-nd。然后我必须编辑 "name" ，并且 "notes" 和按钮保存必须将新数据返回到 1-st 视图。我如何从第一视图和编辑中获取“操作”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:33:18.213

有很多方法可以在两个组件之间共享数据。[我写了这篇关于在两个 Flex 组件之间共享数据](https://www.flextras.com/blog/index.cfm/2013/2/1/How-does-one-Flex-Component-talk-to-another-Flex-Component)的 Flex 工具的博客文章；但是我认为你最适合更具体的东西。

我会研究这些选项：

1.  覆盖第二个视图中的 createReturnObject 方法。 [更多信息在这里](http://cookbooks.adobe.com/post_Passing_Data_on_Pop_Methods_in_Mobile_Flex-18189.html)。请务必阅读评论以获取有关在最新 Flex 版本中访问数据的信息。
2.  使用支持依赖注入的框架。RobotLegs 和 Swiz 是我过去使用过的两个选项。基本上，创建一个包含对 selectedItem 的引用的模型对象并将其注入到两个视图中。许多人会声称这是最好的方法。
3.  将所选对象的引用存储在静态变量中；这样您就可以在两个视图中引用它。这比第一条学习曲线要​​少得多。
4.  由于您已经在`pushView`方法中传递了对组件的引用；您确定返回时参考不会自动更新吗？实际上，这两个视图本质上都是使用相同的内存引用来获取数据。不过，您可能需要刷新列表才能了解更改。或者我可能错了。

# java - 以编程方式为 Spring 创建 JNDI 数据源

> ID：14982125
> 
> 赞同：6
> 
> 时间：2013-02-20T14:21:34.983
> 
> 标签：java, spring, mocking, jndi, initial-context

我有一个现有的基于 Spring Web 的应用程序，它具有使用 JNDI 定义的数据源，并且我正在尝试创建一个独立的应用程序来使用 bean。如何在独立应用程序中以编程方式创建 JNDI 条目和数据库属性？

```
<bean id="myDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/MyDS" />
</bean>

    public static void main(String[] args) {

      // this throws an error since the JNDI lookup fails - can I programmatically define the database properties here?

    ClassPathXmlApplicationContext ctx = new  ClassPathXmlApplicationContext("applicationContext.xml");

    UserService userService = ctx.getBean(UserService.class);
    User user = userService.findUserById("jdoe");

    System.out.println("display name: " + user.getDisplayName());
} 
```

编辑：

我尝试了类似的方法，但现在出现错误“javax.naming.NoInitialContextException：需要在环境或系统属性中指定类名”

```
public static void main(String[] args) {
    setupJNDI();

    ClassPathXmlApplicationContext ctx = new  ClassPathXmlApplicationContext("applicationContext.xml");

    UserService userService = ctx.getBean(UserService.class);
    User user = userService.findUserById("jdoe");

    System.out.println("display name: " + user.getDisplayName());
}

private static void setupJNDI() {
    InitialContext ic;
    try {
        ic = new InitialContext();
        ic.createSubcontext("java:");
        ic.createSubcontext("java:/comp");
        ic.createSubcontext("java:/comp/env");
        ic.createSubcontext("java:/comp/env/jdbc");
        SQLServerConnectionPoolDataSource myDS = new SQLServerConnectionPoolDataSource();
        opaDS.setServerName("myserver");
        opaDS.setPortNumber(1433);
        opaDS.setUser("user");
        opaDS.setPassword("password");

        ic.bind("java:/comp/env/jdbc/MyDS", myDS);
    } catch (NamingException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:29:17.177

`org.springframework.test`依赖项通过以下方式支持[`SimpleNamingContextBuilder`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/mock/jndi/SimpleNamingContextBuilder.html)：

```
// First create the mock JNDI tree and bind the DS
SimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();
DataSource ds = new ComboPooledDataSource();
ds.setDriverClass( ... ); // etc. for uid, password, url
builder.bind( "java:comp/env/jdbc/MyDS" , ds );
builder.activate();

// Then create the Spring context, which should now be able 
// to resolve the JNDI datasource
ApplicationContext context = new ClassPathXmlApplicationContext( "..." ); 
```

那应该行得通。

干杯，

# powershell - 如何输出运行某个进程的PC名称？

> ID：14982126
> 
> 赞同：0
> 
> 时间：2013-02-20T14:21:35.540
> 
> 标签：powershell, batch-file

我正在使用 psexec 自动运行

获取.bat

* * *

任务清单 | findstr pmill.exe >> dc-01\c$\0001.txt

* * *

run_get.bat

* * *

psexec @%1 -u 管理员 -p 密码 -c "C:\get.bat"

* * *

pclist.txt

* * *

在我们网络上的所有 PC 上，

如何在文本文件中使用 PC 名称而不是仅 pmill.exe 获得结果？无论如何我可以从powershell做吗？我需要在结果中获得电脑名称。请提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:51:48.370

而不是 psexec，试试这个：

```
@echo off
setlocal enabledelayedexpansion
for /f %%I in (pclist.txt) do (
    set /p q="Checking %%I... "<NUL
    ping -n 1 -w 500 %%I>NUL 2>NUL
    if !errorlevel!==1 (
        echo Offline.
    ) else (
        wmic /node:%%I /user:adminuser /password:pass process where name="pmill.exe" get csname 2>NUL | find /i "%%I" >>dc-01\c$\0001.txt
        echo Done.
    )
) 
```

如果 pmill.exe 正在运行，则会输出`%computername%`，否则不会输出。

**编辑：**

如果您必须使用`psexec`，那么我建议更改`for`调用循环的逻辑`psexec`，如下所示：

```
@echo off
setlocal enabledelayedexpansion
for /f %%I in (pclist.txt) do (
    set pc=%%I
    set /p q="Checking %%I... "<NUL
    ping -n 1 -w 500 %%I>NUL 2>NUL
    if !errorlevel!==1 (
        echo Offline.
    ) else (
        for /f %%z in ('psexec \\!pc! -u adminuser -p pass tasklist 2^>^&1 ^| findstr /i "pmill.exe"') do (
            set /p q="pmill.exe found.  "<NUL
            echo !pc!>>dc-01\c$\0001.txt
        )
        echo Done.
    )
) 
```

# algorithm - 算法：k和n之间的关系是什么？

> ID：14982127
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:21:35.243
> 
> 标签：algorithm

计算 a^n 的值：

方法1：

```
 result = 1;
  for(int i = 1; i <=n; i++)
      result *= a; 
```

如果使用方法2改进：

```
result = a;
for(int i = 1; i <=k; i++)
    result = result * result; 
```

如何推断 k 和 n 之间的关系？为什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:27:38.727

我猜你正试图[通过平方来求幂](http://gsourcecode.wordpress.com/2012/02/11/algo-math-expsq/)。

显然，对于 2 的幂，k = log_2 n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:25:04.223

在第一种情况下结果 = a^n，在第二种情况下结果 = a^(2^k)，所以 2^k = n 和 k = logn。当然，这仅对 2 的幂的 n 是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:32:16.070

我认为在第一种情况下 a, a^2 , a^3..a^n 在第二种情况下是 a^2,a^4,A^8......A^(2^k)

# html - 正在变成怪癖

> ID：14982134
> 
> 赞同：0
> 
> 时间：2013-02-20T14:21:58.073
> 
> 标签：html, internet-explorer, jsp, doctype

我已经定义了`<DOCTYPE>`in jsp 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

但是在 IE8 中打开页面时，它会更改为

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
```

这导致菜单问题，悬停不起作用。你能告诉他们为什么`<DOCTYPE>`会改变吗？

# php - 我可以将自定义行添加到另一个数据透视表的 MySQL 数据透视查询吗？

> ID：14982135
> 
> 赞同：0
> 
> 时间：2013-02-20T14:21:57.363
> 
> 标签：php, mysql, excel

我有一个交叉表查询，以这种方式显示结果

```
 user1 user2 user3 ...etc
date1 val11 val12 val13 ... 
date2 val21 val22 val23 ... 
date3 val31 val32 val33 ... 
...
etc 
```

事情是用户有一个排名字段。

如果我可以像这样使用 MySQL 插入它，我正在徘徊：

```
 user1 user2 user3 ...etc
rank  rank1 rank2 rank3
date1 val11 val12 val13 ... 
date2 val21 val22 val23 ... 
date3 val31 val32 val33 ... 
...
etc 
```

该应用程序是一个 php webapp，最终产品是一个 excel 电子表格。如果无法通过查询完成，我会尝试在将查询结果转换为 Excel 时添加它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:07:36.043

解决方案是有一个排名交叉表查询和日期值交叉表查询，并有一个联合。但是，所有列都必须匹配。

# java - JComponent 显示全尺寸或根本不显示

> ID：14982139
> 
> 赞同：0
> 
> 时间：2013-02-20T14:22:02.513
> 
> 标签：java, swing, layout-manager, jcomponent

我有以下代码：

```
package gui;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics; 
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JComponent;

public class ModuleGui extends JComponent {

protected ShapeResizeHandler shapeResizeHandler = new ShapeResizeHandler();
public ModuleGui(){ 
    this.addMouseListener(shapeResizeHandler);
    this.addMouseMotionListener(shapeResizeHandler);
}

@Override
public Dimension getPreferredSize() {
    return new Dimension (400, 400);
}

@Override
public void paintComponent(Graphics g){
    super.paintComponents(g);
    g.setColor(Color.red);
    g.fillRect(getX(), getY(), getWidth(), getHeight());
}

private class ShapeResizeHandler extends MouseAdapter{
    public void mousePressed(MouseEvent e){
        System.out.println(e.getPoint().getX() + " " + e.getPoint().getY());
    }

    public void mouseReleased(){
    }

    public void mouseDragged(MouseEvent e){
    }
}
} 
```

在以下类中使用：

```
package gui;

import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Gui {
private JFrame mainFrame = null;

public Gui(){
    mainFrame = new JFrame();
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainFrame.setTitle("--");
    mainFrame.setMinimumSize(new Dimension(800, 600));
    mainFrame.setExtendedState(JFrame.MAXIMIZED_BOTH);
    mainFrame.getContentPane().setLayout(new BorderLayout());

    ModuleGui moduleGui = new ModuleGui();
    moduleGui.setPreferredSize(new Dimension(400, 400));

    JPanel aux = new JPanel();
    aux.setLayout(new BorderLayout());
    aux.add(moduleGui);

    mainFrame.getContentPane().add(aux);    
    mainFrame.pack();
    mainFrame.setVisible(true);
}
} 
```

现在我真的不明白为什么如果我保留它或者如果我删除它则根本不显示它会`JComponent`在整个屏幕上显示。`BorderLayout``JPanel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:44:20.077

问题来自以下行：

```
g.fillRect(getX(), getY(), getWidth(), getHeight()); 
```

想象一下你的显示器是1600x900，如果你不设置BorderLayout，就说明你使用的是FlowLayout（对齐方式为CENTERED）。首选尺寸是 400x400（因为你的覆盖，顺便说一句，在这里调用 setPreferredSize 是没用的），所以这意味着 FlowLayout 会将你的组件定位在点 (600, 5) 周围。因此，您填充了一个红色矩形，即 (600, 5, 400, 400)，这意味着该矩形的左上角`g.fillRect(getX(), getY(),...`位于组件边界之外的 600,5（因为您调用 ）。

当您使用 BorderLayout 时，您的组件会获得边界 (0,0,1600,900)（减去框架的边界）并调用 g.fillRect(getX(), getY(),... 因为 x,y 将起作用是 (0,0)。

尝试改为：

```
g.fillRect(0,0, getWidth(), getHeight()); 
```

# c# - 我们应该使用什么集合类来使用 C# 管理和合并对象列表？

> ID：14982141
> 
> 赞同：0
> 
> 时间：2013-02-20T14:22:04.160
> 
> 标签：c#, .net, collections

我正在寻找一个集合来使用 C# 管理和合并对象列表？你知道我在哪里可以找到关于收藏的好教程吗？

实际上，我希望合并两个或三个对象/实体列表。这些列表可以包含相同的对象（相同的 id）。合并列表应仅包含每个对象/实体的一个版本。然后我应该在一个属性上订购列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:26:52.797

根据您想要合并集合的方式，您可以使用任何实现 的集合`IEnumerable<T>`，因为此接口提供了[`Union(IEnumerable<T>)`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)“合并”和删除重复项的方法。

然后，您可能希望`IEqualityComparer<T>`使用其身份 (ID) 属性来比较您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:23:33.650

您可以将 a`HashSet<T>`与自定义一起使用`IEqualityComparer<T>`。或者您可以使用您的 ID`Dictionary<T1, T2>`在哪里。`T1`

# iphone - 提醒应用程序 - 重复某个提醒

> ID：14982142
> 
> 赞同：1
> 
> 时间：2013-02-20T14:22:06.960
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我正在构建一个提醒应用程序，并且对如何设置提醒以每天/每月/每小时重复一次非常感兴趣。

基本上我想设置一些重复的东西，即使我的应用程序没有运行。在我的情况下，本地通知火灾。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:29:30.717

您可以使用 NSCalendarUnits 轻松设置重复间隔

```
notification.repeatInterval= NSDayCalendarUnit; 
```

有关更多日历单位，请检查[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit上的常量](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:25:55.200

您必须使用本地推送通知，因为当您的应用程序在后台运行时，这是 Apple 允许您做某事的唯一方式：

检查此以获取更多信息：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

这是一个很好的教程：http: [//www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:26:52.030

[在此处](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)查看 Apple关于使用 UILocalNotifications 的参考文档。我相信这就是你要找的。

您可以随时使用 UILocalNotifications 在特定时间或日期显示本地通知。

David Linsin 在[这里](http://dlinsin.github.com/2011/05/18/iOSLifecycleAndUILocalNotifications.html)也有一个很好的帖子。

祝你好运！

# java - 我的 java 代码有什么问题？

> ID：14982144
> 
> 赞同：0
> 
> 时间：2013-02-20T14:22:09.420
> 
> 标签：java, nullpointerexception, stack

我是java新手，我正在尝试编写一个链接列表堆栈..

```
public class Stack {

    private Node first;

    private class Node {
        int item;
        Node next;
    }

    public boolean IsEmpty()
    {
        return first==null;
    }

    public void push(int item)
    {
        Node oldfirst=first;
        first=new Node();
        first.item=item;
        first.next=oldfirst;
    }

    public int pop ()
    {
        int item=first.item;
        first=first.next;
        return item;
    }
} 
```

* * *

```
import javax.swing.*;

public class main {

    public static void main(String[] args) {
        Stack ob=null;
        int num=0;
        while (true)
        {
            num=Integer.parseInt(JOptionPane.showInputDialog("Enter the number"));
            ob.push(num);
            if (num==0)
                break;
        }
        int k;
        k=ob.pop();
        JOptionPane.showMessageDialog(null, k);     
    } 
```

现在，当我通过 main.main(main.java:18) 处的 Execption java.lang.NullPointerException 输入数字时

为什么会发生这种情况以及如何避免它请耐心等待并提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:23:33.553

当您调用 push 时，您的堆栈`ob`为空。你需要实例化它。代替

```
Stack ob=null; 
```

你需要有

```
Stack ob = new Stack(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:23:09.210

你的代码：

```
Stack ob=null
...
ob.push(num); 
```

`ob`是`null`，你永远不会给它分配一个对象。调用方法`null`总是会导致`NullPointerException`.

你可以像这样修复它：

```
Stack ob = new Stack(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:36:33.503

大多数例外都有一个不言自明的名称。例如，这是一个 NullPointerException - 正在访问一个空对象并且正在调用该异常。

您试图将“ob”定义为新的 Stack 对象，尽管您只是将其定义为 null。在定义和方法调用（ob.push()）之间，ob 没有被再次修改，因此它保持为空，导致异常。

要解决此问题，您需要确保在调用对象时该对象不为空。有两种方法可以修复错误。

首先，您可以实例化对象。这将使程序按您希望的方式工作。为此，只需像这样定义对象：`Stack ob = new Stack();`而不是`Stack ob = null;`.

解决此问题的第二种方法是捕获错误。这将使程序在发生错误时继续运行。我建议您在对象**可能**为空时使用它，这样程序就不会直接关闭。为此，请使用 try-catch-clause 围绕该行：

```
try
{
    ob.push(num);
}
catch (NullPointerException e)
{
    System.out.println("Error at: ob.push(num);");
} 
```

# ms-access - 如何在多用户网络服务器中部署 ms 访问表单？无法更新，因为文件正在使用中

> ID：14982145
> 
> 赞同：1
> 
> 时间：2013-02-20T14:22:15.153
> 
> 标签：ms-access, networking, deployment

我将 ms 访问文件形式保存在每个人都可以访问的网络中。每个人的桌面上都有指向网络中文件的链接。每次我更改文件时，我都必须确保每个人都关闭了 ms 访问文件。

我真的不想到处寻找应用程序是否关闭。我也将文件设置为只读，但没有运气......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:21:33.303

市场上 MOST 软件的基本概念是您有两个应用程序部分：

Word文档（数据）+word程序可执行文件

Excel文档（数据）+word程序可执行文件。

那么在贵公司工作了 20 年，您如何部署软件？

回答：

您在每台计算机上安装程序。

所以你说的是你开发的软件程序。仅仅因为您使用 c++、vb.net 或 Access to CREATE SOFTWARE，那么您就不会违反此规则。数据文件、文档和计算机程序之间存在差异。

COMPUTER 程序具有代码、表单和用户界面。因此，如果您的计算机支持人员不知道文档和计算机程序之间的区别，那么这将是您问题的根源。

因此，您不允许多人进入一个程序。我的意思是，如果你大楼里的一个人说话有问题，每个人都会回家吗？

当您使用软件的 NEXT 伟大版本时，用户不应该关心。

所以，这意味着：

像您的大多数软件一样，您将其部署到每个用户的工作站。这将使您能够处理软件的下一个出色版本。

完成更改并添加新代码和新功能后，您可以：

将程序编译为可执行文件（在 Access 中，这是一个 mde，或者现在是一个 accDE。然后将其部署到每个用户的工作站。

因此，上述方法允许您使用软件的 NEXT GREAT 版本。您可以将一些更新代码添加到您的软件中，或者甚至只是采用一个登录脚本，将该软件的下一个出色版本复制到每个用户的桌面。

结果是：

您不关心用户是否使用他们当前版本的软件，因为您正在处理未锁定的副本。

因此，您应该分发软件的编译版本，并且像大多数软件一样，您真的希望将该软件分发到每个用户的工作站。

最后但并非最不重要的：

Word 或 Excel 等程序具有所谓的可重入代码。因此，如果您在终端服务器环境中工作，那么这些办公程序可以容忍该服务器上的多个用户，但您使用 Access 创建的程序则不能。因此，即使在这种情况下，每个登录用户都将收到他们自己创建的编译程序的单独副本。

因此，c++ 的工作方式、vb.net、VB6 或在这种情况下 Access 的工作方式对于大多数程序来说都是相同的：

您将该程序分发到每个用户的桌面，因此您在下一个出色版本上工作的问题不是问题。您只需设置并采用一种方法来检查新版本。这意味着您分发程序更新，而不是单个表单更新。即使在更改来代码或修改报告的情况下，也会导致您喜欢 MOST 软件不得不发布新版本。

因此，如果您发布新版本的软件，您就不会遇到您概述的问题。这些用户不必退出他们当前的版本，因为您正在处理该程序的副本。

因此，您需要采用一些系统和代码，以便您向每个用户推出该更新。

我不仅详细解释了你应该运行一个数据和表分开的拆分数据库（正如你所拥有的那样），而且还解释了为什么要分发编译版本以及为什么每个桌面都应该在这里收到这个新程序的副本：

[http://www.kallal.ca/Articles/split/index.htm](http://www.kallal.ca/Articles/split/index.htm)

因此，您需要掌握的唯一基本概念是在计算机和软件行业中，我们有一个计算机程序的概念。一旦你能够掌握你正在创建一个计算机程序，那么你现在就可以掌握这样的概念，即在你创建这样的程序之后，或者在你修改或创建该程序的新版本之后，你然后将这个新程序分发给您的用户群。这就是所有软件的工作原理，Access 在这方面也没有什么不同。

您不会尝试将一种表单包含到生产软件中，而是添加新表单，修改代码，然后将软件编译为可执行文件。事实上，强烈建议使用已编译的 Access 应用程序，因为未处理的错误永远不会重新设置全局变量，因此您的软件变得更加可靠，甚至包括没有错误处理的代码，因为本地和全局变量永远不会重新设置.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:26:38.750

一种解决方案是在与表不同的数据库中维护所有表单、报告、模块、查询等（前端代码）的副本。然后，您可以将表链接到共享网络 Access DB 中的第二个数据库（后端）。前端数据库将部署到每个工作站，而后端数据库是共享的。显然，这引入了更新每个工作站的需要，但这意味着当您需要推出新的前端逻辑时，您不必立即将所有人踢出去。

否则，可悲的是，您需要在数据库上获得一个排他锁，而唯一的方法就是成为唯一一个打开它的锁。

借助脚本，您可以自动拉取最新的“客户端”。您可以只要求所有用户退出应用程序并双击从某个网络位置复制前端的批处理文件。

# c# - 需要在c#中使用2个连接字符串进行查询

> ID：14982146
> 
> 赞同：0
> 
> 时间：2013-02-20T14:22:20.473
> 
> 标签：c#, sql, sql-server

我正在寻找一个使用 2 个数据库的 sql 查询。我如何为这个查询使用 2 个连接字符串，因为它是 2 个不同的数据库？

```
var commandText = @"insert into database1 select * from database2";

        using (SqlConnection myConn = new SqlConnection(ConnectionString))
        {
            using (SqlCommand myCommand = new SqlCommand(commandText, myConn))
            {
                myConn.Open();
                myCommand.ExecuteNonQuery();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:27:34.993

如果您的两个数据库都在同一个服务器实例中，那么您不需要两个连接。您*实际上是*连接到`server instance`. 所以没有问题。

```
var commandText = @"insert into [dbname1].dbo.table1 select * from 
                   [dbname2].dbo.table1"; 
```

我认为最好的方法是创建一个存储过程并将 dbnames（来自您的配置）作为参数传递给 sp。然后，构建一个动态查询来执行插入。这样您就可以更好地控制不同的数据库名称。

如果它们位于两个不同的实例或不同的服务器中，则使用[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms190479.aspx)链接它们并使用[sp_addlinkedsrvlogin](http://msdn.microsoft.com/en-gb/library/aa259581%28v=sql.80%29.aspx)登录。还要确保在执行操作后放下它们。

作为一般建议，不建议这样做，因为它容易出错。关于评论的更多细节......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:24:55.820

You can't. However, if you have control over the databases, you can set them up for a cross-server select using a single connection string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:25:07.807

Create a login that has access to both databases and just use a single connection string. Your query will be like:

```
string sql = "INSERT INTO [Database1].[dbo].[Table] SELECT * FROM  [Database2].[dbo].[Table] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:25:10.050

I think you can't. You should execute the select statement on the first database and then the insert into the second database.

# jquery - jQuery Hover 功能修改

> ID：14982153
> 
> 赞同：1
> 
> 时间：2013-02-20T14:22:43.710
> 
> 标签：jquery

我已经实现了一个悬停功能，这样当你将鼠标悬停在一个星上时，这个和所有以前的兄弟姐妹都有一个 addclass 方法应用于它们

```
$(document).ready(function(){
 $('.ratings li').hover(function(){
  $(this).prevAll().andSelf().addClass('goldstar');
 });
}); 
```

目前发生的情况是，如果我将鼠标悬停在第四颗星（有 5 颗）上，那么第四颗星和所有兄弟姐妹都会应用该类。

我想要实现的是，当我离开悬停状态时，li 会回到原来的状态，或者更好的是悬停跟随鼠标的流动，所以当我悬停在 li 上时，应用类（希望这是有道理的)

我已经整理了一个[Jsfiddle](http://jsfiddle.net/richlewis14/vZDwg/2/)，但由于某种原因，即使路径是公开的，图像也没有显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:25:52.563

你可以这样做：

```
 $('.ratings li').hover(function(){
   $(this).prevAll().addBack().addClass('goldstar');
 }, function(){
   $('.ratings li').removeClass('goldstar');
 }); 
```

请注意，我替换`andSelf`了已弃用的`addBack`. `andSelf`如果你使用旧的 jQuery 版本，你可以让。

您可能还对我如何规避图像问题感兴趣...

[示范](http://jsfiddle.net/dystroy/yvVDE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:26:03.030

```
$(document).ready(function(){
 $('.ratings li').hover(function(){
 function () {
    // Run on Mouse over
    $(this).prevAll().andSelf().addClass('goldstar');
  },
  function () {
    // Run on Mouse out
    $(this).removeClass('goldstar');
  }
 });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:26:28.460

在鼠标[JSFiddle 示例](http://jsfiddle.net/vZDwg/6/)之后从星星中清除类：

```
$(document).ready(function(){
    $('.ratings li').hover(function(){
        $(this).nextAll().removeClass('goldstar');
        $(this).prevAll().andSelf().addClass('goldstar');
    });
    $('.ratings ul').mouseout(function(){
       $('li', this).removeClass('goldstar'); 
    });
  }); 
```

更新：在鼠标移出时删除所有星星

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:26:55.607

**Javascript**

```
$(document).ready(function(){
    $('.ratings li').hover(function(){
        $(this).prevAll().andSelf().addClass('goldstar');
    // add a function for when the hover ends...
    },function(){
        $(this).siblings().andSelf().removeClass('goldstar');
    });
}); 
```

**CSS**

```
background-image: url("http://i.stack.imgur.com/S5T0M.png"); 
```

[**工作演示**](http://jsfiddle.net/vZDwg/3/)

# java - Java：显示从同一个 AbstractTableModel 创建的两个不同的 JTable

> ID：14982154
> 
> 赞同：0
> 
> 时间：2013-02-20T14:22:45.840
> 
> 标签：java, swing, jtable, abstracttablemodel

我在显示`JTables`由相同创建的两个不同的`AbstractTableModel`. 我真的认为展示 的代码并不重要`AbstractTableModel`，但如果我被要求，我也可以展示它。

我只调用了两次相同的类，该类`AbstractTableModel`为我用来创建表的两个数组列表扩展了这个类。

```
final SwitchTableModel model = new SwitchTableModel(user_decide);
final SwitchTableModel model1 = new SwitchTableModel(duplicates);
JTable table = new JTable(model);
JTable table1 = new JTable(model1);

JFrame frame = new JFrame ("Results");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
final JPanel grid = new JPanel();
grid.add(toolbar);
grid.add(toolbar1);
grid.add(table);
grid.add(table1);
frame.add(grid);
frame.pack();
frame.setVisible(true); 
```

我还创建了相同的工具栏，我也认为这无关紧要，这就是我不发布代码的原因 - 如果您认为需要，我会这样做。

问题是最后我看到同样的`JTable`两次，所以我想这与我调用类的方式有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:48:11.490

问题来自不适当的`static`关键字。：

```
public static int [][] data; 
```

`static`意味着该变量的值对于您的所有实例都是相同的。相反，把你放在你的`data`里面`SwitchTableModel`，不要成功`static`。这将立即解决您的问题。

就像是：

```
public class SwitchTableModel extends AbstractTableModel {
    private int[][] data;
    //... the rest of your current code.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:46:47.910

我认为传递给 SwitchTableModel user_decide 的值和重复值都具有相同的值。否则上面的代码没有问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T14:30:56.833

尝试将两个单独的滚动窗格添加到您的面板，然后将 JTables 添加到滚动窗格。除此之外，您不清楚您的显示问题到底是什么，无论 JTables 没有显示，或者数据是否不同......等等

# unit-testing - 模拟存储库的插入方法

> ID：14982168
> 
> 赞同：5
> 
> 时间：2013-02-20T14:23:20.403
> 
> 标签：unit-testing, mocking, moq

我想对以下方法进行单元测试：

```
void Insert(TEntity entity); 
```

这个方法的类已经被模拟了（我正在使用 Moq）。

现在我想做一个基于状态的测试并告诉 Moq 如果这个方法被调用，一个对象必须被插入到一个列表中。我怎样才能做到这一点？

```
useraccountRepository.Setup(r => r.Insert(useraccountBeforeLogin)).??? 
```

什么来了？有一个 raises 方法可以引发一个事件。我可以用这个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-17T15:02:59.617

我知道这是一个旧线程，但这是我为测试从模拟存储库插入项目所做的，希望这可能对某人有所帮助。

```
var myRepositoryMock = new Mock<IMyRepository>();

var itemsInserted = new List<MyItem>();

myRepositoryMock 
    .Setup(i => i.InsertItem(It.IsAny<MyItem>()))
    .Callback((MyItem item) => itemsInserted.Add(item)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:27:53.933

您可以使用[回调](http://code.google.com/p/moq/wiki/QuickStart#Callbacks)- 那里列出了一些示例

# android - 如何防止 Android v2.3.3 中列表视图上的不相关突出显示？

> ID：14982170
> 
> 赞同：0
> 
> 时间：2013-02-20T14:23:32.453
> 
> 标签：android, expandablelistview, highlighting

我在 android 上的 v4.0.1( #1 ) 和 v2.3.3( #2 ) 上执行相同的代码，但我得到了不同的响应，其中一个 (#2) 令人不安。我的 gui 上有 ExpandableListView。当我尝试向下滑动列表时，整个 expandableListView 会变黑，有时（实际上比有时更多）它会在我的手从屏幕上松开后停留。滑动量并不重要，但它卡在黑色。我将向您展示以下图片：

这是普通版本：

![普通版](../Images/ecf789ca3dbb402ec9175b8e2009a4a6.png)

这就是我的意思：

![https://dl.dropbox.com/u/49240706/1.png](../Images/0fb2d3783317b094b95d08f029fdb0bc.png)

提前 TY。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:07:44.657

尝试设置`cacheColorHint`为透明。

使用`XML`：

```
<ExpandableListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="@android:color/transparent" /> 
```

或使用代码：

```
final ExpandableListView list = ...;
list.setCacheColorHint(Color.TRANSPARENT); 
```

# android - 自我更新应用

> ID：14982174
> 
> 赞同：23
> 
> 时间：2013-02-20T14:23:35.653
> 
> 标签：android, apk, updating, self-updating

TL：博士；版本 ;）

*   我的应用程序应该在没有用户交互的情况下运行（自动启动等工作）

*   它应该在没有任何用户交互的情况下自行更新（通过 apk）

*   有根设备是可能的

.

问题：

*   从服务器查询较新的 apk 有效
*   当以（查看？）意图启动 apk 时，会弹出“安装应用程序”提示并需要用户确认

如何在没有任何用户交互的情况下解决这个问题？

[http://code.google.com/p/auto-update-apk-client/](http://code.google.com/p/auto-update-apk-client/) 这似乎是一个解决方案，但必须有更好的方法。

我已经找到了这个：[在 Android 上以编程方式安装应用程序](https://stackoverflow.com/questions/4604239/install-application-programmatically-on-android)

但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-26T09:31:47.250

解决了！:D

它只适用于有**根**设备，但运行良好。使用 unix cmd "pm" (packageManager) 允许您在以 root 身份执行时从 sdcard 安装 apk。

希望这可以帮助将来的一些人。

```
public static void installNewApk()
{
        try
        {
            Runtime.getRuntime().exec(new String[] {"su", "-c", "pm install -r /mnt/internal/Download/fp.apk"});
        }
        catch (IOException e)
        {
            System.out.println(e.toString());
            System.out.println("no root");
        }
} 
```

所需权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T14:33:24.540

我的建议是使用插件机制而不是更新应用程序。您可以从 Web 动态加载类并在您的应用程序中运行它们，而无需任何用户交互。互联网上有很多资源：

[如何在 android/dalvik 上动态加载 Java 类？](https://stackoverflow.com/questions/3022454/how-to-load-a-java-class-dynamically-on-android-dalvik)

[http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-04T07:20:07.163

如果`su -c`不起作用，请尝试`su 0`（只有 root 设备可以执行 su！）

完整的答案如下所示：

```
private void installNewApk()
    {
        String path = mContext.getFilesDir().getAbsolutePath() + "/" + LOCAL_FILENAME;
        mQuickLog.logD("Install at: " + path);
        ProcessUtils.runProcessNoException(mQuickLog, "su", "0", "pm", "install", "-r", path);
    } 
```

定义了这个类：

```
public class ProcessUtils {
    Process process;
    int errCode;
    public ProcessUtils(String ...command) throws IOException, InterruptedException{
        ProcessBuilder pb = new ProcessBuilder(command);
        this.process = pb.start();
        this.errCode = this.process.waitFor();
    }

    public int getErrCode() {
        return errCode;
    }

    public String getOutput() throws IOException {
        InputStream inputStream = process.getInputStream();
        InputStream errStream = process.getErrorStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(inputStream));
        String line;
        StringBuilder sb = new StringBuilder();
        while ((line = br.readLine()) != null) {
            sb.append(line + System.getProperty("line.separator"));
        }

        br = new BufferedReader(new InputStreamReader(errStream));
        while ((line = br.readLine()) != null) {
            sb.append(line + System.getProperty("line.separator"));
        }
        return sb.toString();
    }

    public static String runProcess(String ...command) throws IOException, InterruptedException {
        ProcessUtils p = new ProcessUtils(command);
        if (p.getErrCode() != 0) {
            // err
        }
        return p.getOutput();
    }

    public static void runProcessNoException(String ...command) {
        try {
            runProcess(command);
        } catch (InterruptedException | IOException e) {
            // err
        }
    }
} 
```

# android - android.intent.action.SIM_STATE_CHANGED 上没有广播？

> ID：14982177
> 
> 赞同：1
> 
> 时间：2013-02-20T14:23:42.890
> 
> 标签：android, android-broadcast

我有一个使用当前 sim 卡注册的 android 应用程序，与我的设备一起运行。应用程序中有一些用户（当前 sim 卡）设置。

任何其他拥有其他 sim 卡的人都不应使用我的应用程序设置，如果插入新的 sim 卡，他必须在应用程序中注册（假设我丢失了我的设备）。如果我取出我的 sim 卡并插入其他设备，并且该应用程序也安装在设备中，应用程序不应要求设置，因为用户（SIM 卡）是相同的。

我可以通过使用捕获当前的 simcard 号码 `TelephonyManager.getSimserialNumber()`。我也试过使用`android.intent.action.SIM_STATE_CHANGED`，但工作。请用示例向我建议如何在更换 SIM 卡时显示通知？

有什么办法可以在*换sim卡时**广播*吗？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T11:34:10.163

没有任何广播可以确定 SIM 更改，但您可以使用“android.intent.action.BOOT_COMPLETED”意图进行跟踪。当这个意图被广播时。在那里你可以检查当前的 sim 号码和以前保存的号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T13:33:47.113

收听“android.intent.action.BOOT_COMPLETED”方法适用于未启用“热插拔”的手机，在这种情况下，您实际上可以在手机开机时更换 SIM 卡，然后开始正常使用新卡.*

# linux - 在 GNU/Linux 上生成 lnk 文件以传输到 windows

> ID：14982181
> 
> 赞同：8
> 
> 时间：2013-02-20T14:24:00.467
> 
> 标签：linux, windows, lnk

我将首先解释我的目标以避免“XY 问题”的误解。我希望能够生成一个文件（在 Linux 上），当下载到 Windows 机器并双击时，将打开一个（ms office，但 IIUC 无关紧要）具有已知路径的文件（在本地 Windows 上）机）由服务器预设。

如果我在 lnk 文件中包含我要打开的文件的路径（以及关于它存储在其中的卷的其他详细信息等），似乎我正在尝试做的事情是可能的。我首先检查了 lnk 文件格式规范，试图在 python 脚本中生成文件，但这不是我的小菜一碟（我以前从未编写过代码来处理二进制文件）。此外，我想放弃该格式的许多功能，但我仍然需要了解它们的标志/字段/长度/终止等。

然后我偶然发现了 winedump 实用程序和 WINE 在我的 ~/.wine 文件夹中创建的一些 .lnk 文件。WINE 代码库中必须有一些函数能够生成 lnk 文件，但我找不到它。它在哪里？是不是像win的mklink这样的命令形式？如果不是（如果不是，我猜它是某个地方的函数）你能把它指向我以便我可以编写一个包装器命令吗？

或者有没有可以编写 lnk 文件并在 GNU/Linux 上运行的库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-25T06:23:51.287

这些未经我测试，但我确实在[此站点](http://www.mamachine.org/mslink/index.en.html)上找到了 2 个工具，它们确实描述了这 2 个工具，如下所示：

> 此应用程序允许您创建 Windows 快捷方式文件（扩展名 .LNK），而无需 Windows 操作系统。

第一个应用程序是[C 应用程序](http://www.mamachine.org/mslink/mslink_v1.0.tar.gz)，第二个是 Bash shell 脚本。这是Shell脚本，[`mslink.sh`](http://www.mamachine.org/mslink/mslink.sh)：

```
#!/bin/bash

#############################################################################################
# mslink.sh v1.0
#############################################################################################
# Ce script permet de créer un Raccourci Windows (Fichier .LNK)
# Script créé en se basant sur la doc 
#   http://msdn.microsoft.com/en-us/library/dd871305.aspx
#############################################################################################

OPTIONS=$(getopt -q -n ${0} -o hl:o:p -l help,lnk-target:,output-file:,printer-link -- "$@")

eval set -- ${OPTIONS}

IS_PRINTER_LNK=0
while true; do
  case "$1" in
    -h|--help) HELP=1 ;;
    -l|--lnk-target) LNK_TARGET="$2" ; shift ;;
    -o|--output-file) OUTPUT_FILE="$2" ; shift ;;
    -p|--printer-link) IS_PRINTER_LNK=1 ;;
    --)        shift ; break ;;
    *)         echo "Option inconnue : $1" ; exit 1 ;;
  esac
  shift
done

if [ $# -ne 0 ]; then
  echo "Option(s) inconnue(s) : $@"
  exit 1
fi

[ ${#LNK_TARGET} -eq 0 ] || [ ${#OUTPUT_FILE} -eq 0 ] && echo "
Usage :
 ${0} -l cible_du_fichier_lnk -o mon_fichier.lnk [-p]

Options :
 -l, --lnk-target               Précise la cible du raccourci
 -o, --output-file              Enregistre le raccourci dans un fichier
 -p, --printer-link             Génère un raccourci de type imprimante réseau
" && exit 1

#############################################################################################
# Fonctions
#############################################################################################

function ascii2hex() {
    echo $(echo -n ${1} | hexdump -v -e '/1 " x%02x"'|sed s/\ /\\\\/g)
}

function gen_IDLIST() {
        ITEM_SIZE=$(printf '%04x' $((${#1}/4+2)))
        echo '\x'${ITEM_SIZE:2:2}'\x'${ITEM_SIZE:0:2}${1}
}

function convert_CLSID_to_DATA() {
    echo -n ${1:6:2}${1:4:2}${1:2:2}${1:0:2}${1:11:2}${1:9:2}${1:16:2}${1:14:2}${1:19:4}${1:24:12}|sed s/"\([A-Fa-f0-9][A-Fa-f0-9]\)"/\\\\x\\1/g
}

#############################################################################################
# Variables issues de la documentation officielle de Microsoft
#############################################################################################

HeaderSize='\x4c\x00\x00\x00'                           # HeaderSize
LinkCLSID=$(convert_CLSID_to_DATA "00021401-0000-0000-c000-000000000046")   # LinkCLSID
LinkFlags='\x01\x01\x00\x00'                            # HasLinkTargetIDList ForceNoLinkInfo 

FileAttributes_Directory='\x10\x00\x00\x00'                 # FILE_ATTRIBUTE_DIRECTORY
FileAttributes_File='\x20\x00\x00\x00'                      # FILE_ATTRIBUTE_ARCHIVE

CreationTime='\x00\x00\x00\x00\x00\x00\x00\x00'
AccessTime='\x00\x00\x00\x00\x00\x00\x00\x00'
WriteTime='\x00\x00\x00\x00\x00\x00\x00\x00'

FileSize='\x00\x00\x00\x00'
IconIndex='\x00\x00\x00\x00'
ShowCommand='\x01\x00\x00\x00'                          # SW_SHOWNORMAL
Hotkey='\x00\x00'                               # No Hotkey
Reserved='\x00\x00'                             # Valeur non modifiable
Reserved2='\x00\x00\x00\x00'                            # Valeur non modifiable
Reserved3='\x00\x00\x00\x00'                            # Valeur non modifiable
TerminalID='\x00\x00'                               # Valeur non modifiable

CLSID_Computer="20d04fe0-3aea-1069-a2d8-08002b30309d"               # Poste de travail
CLSID_Network="208d2c60-3aea-1069-a2d7-08002b30309d"                # Favoris réseau

#############################################################################################
# Constantes trouvées à partir de l'analyse de fichiers lnk
#############################################################################################

PREFIX_LOCAL_ROOT='\x2f'                            # Disque local
PREFIX_FOLDER='\x31\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'        # Dossier de fichiers
PREFIX_FILE='\x32\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'          # Fichier
PREFIX_NETWORK_ROOT='\xc3\x01\x81'                      # Racine de serveur de fichiers réseau
PREFIX_NETWORK_PRINTER='\xc3\x02\xc1'                       # Imprimante réseau

END_OF_STRING='\x00'

#############################################################################################

# On retire l'anti-slash final s'il y en a un
LNK_TARGET=${LNK_TARGET%\\}

# On sépare le chemin racine du lien de la cible finale
# On distingue aussi si le lien est de type local ou réseau
# On définie la valeur Item_Data suivant le cas d'un lien réseau ou local

IS_ROOT_LNK=0
IS_NETWORK_LNK=0

if [[ ${LNK_TARGET} == \\\\* ]]; then
    IS_NETWORK_LNK=1
    PREFIX_ROOT=${PREFIX_NETWORK_ROOT}
    Item_Data='\x1f\x58'$(convert_CLSID_to_DATA ${CLSID_Network})

        TARGET_ROOT=${LNK_TARGET%\\*}
        if [[ ${LNK_TARGET} == \\\\*\\* ]]; then
                TARGET_LEAF=${LNK_TARGET##*\\}
        fi
        if [ ${TARGET_ROOT} == \\ ]; then
                TARGET_ROOT=${LNK_TARGET}
        fi
else
    PREFIX_ROOT=${PREFIX_LOCAL_ROOT}
    Item_Data='\x1f\x50'$(convert_CLSID_to_DATA ${CLSID_Computer})

    TARGET_ROOT=${LNK_TARGET%%\\*}
        if [[ ${LNK_TARGET} == *\\* ]]; then
        TARGET_LEAF=${LNK_TARGET#*\\}
        fi
    [[ ! ${TARGET_ROOT} == *\\ ]] && TARGET_ROOT=${TARGET_ROOT}'\'
fi

if [ ${IS_PRINTER_LNK} -eq 1 ]; then
    PREFIX_ROOT=${PREFIX_NETWORK_PRINTER}
    TARGET_ROOT=${LNK_TARGET}
    IS_ROOT_LNK=1
fi

[ ${#TARGET_LEAF} -eq 0 ] && IS_ROOT_LNK=1

#############################################################################################

# On sélectionne le préfixe qui sera utilisé pour afficher l'icône du raccourci

if [[ ${TARGET_LEAF} == *.??? ]]; then
    PREFIX_OF_TARGET=${PREFIX_FILE}
    TYPE_TARGET="fichier"
    FileAttributes=${FileAttributes_File}
else
    PREFIX_OF_TARGET=${PREFIX_FOLDER}
    TYPE_TARGET="dossier"
    FileAttributes=${FileAttributes_Directory}
fi

# On convertit les valeurs des cibles en binaire
TARGET_ROOT=$(ascii2hex ${TARGET_ROOT})
TARGET_ROOT=${TARGET_ROOT}$(for i in `seq 1 21`;do echo -n '\x00';done) # Nécessaire à partir de Vista et supérieur sinon le lien est considéré comme vide (je n'ai trouvé nul part d'informations à ce sujet)

TARGET_LEAF=$(ascii2hex ${TARGET_LEAF})

# On crée l'IDLIST qui représente le cœur du fichier LNK

if [ ${IS_ROOT_LNK} -eq 1 ];then
    IDLIST_ITEMS=$(gen_IDLIST ${Item_Data})$(gen_IDLIST ${PREFIX_ROOT}${TARGET_ROOT}${END_OF_STRING})
else
    IDLIST_ITEMS=$(gen_IDLIST ${Item_Data})$(gen_IDLIST ${PREFIX_ROOT}${TARGET_ROOT}${END_OF_STRING})$(gen_IDLIST ${PREFIX_OF_TARGET}${TARGET_LEAF}${END_OF_STRING})
fi

IDLIST=$(gen_IDLIST ${IDLIST_ITEMS})

#############################################################################################

if [ ${IS_NETWORK_LNK} -eq 1 ]; then
    TYPE_LNK="réseau"
    if [ ${IS_PRINTER_LNK} -eq 1 ]; then
        TYPE_TARGET="imprimante"
    fi
else
    TYPE_LNK="local"
fi

echo "Création d'un raccourci de type \""${TYPE_TARGET}" "${TYPE_LNK}"\" avec pour cible "${LNK_TARGET} 1>&2

echo -ne ${HeaderSize}${LinkCLSID}${LinkFlags}${FileAttributes}${CreationTime}${AccessTime}${WriteTime}${FileSize}${IconIndex}${ShowCommand}${Hotkey}${Reserved}${Reserved2}${Reserved3}${IDLIST}${TerminalID} > "${OUTPUT_FILE}" 
```

# jquery - 基于具有数据属性的图像添加点击事件

> ID：14982182
> 
> 赞同：0
> 
> 时间：2013-02-20T14:24:04.997
> 
> 标签：jquery

我有以下图片：-

```
<img rel="item-1" src="1.gif"/>
<img rel="item-2" src="2.gif"/>
<img rel="item-3" src="3.gif"/> 
```

目前我可以使用 Jquery 将点击事件附加到每个图像，如下所示：-

```
$("img[rel^='item']").click(function () {
    var img = $(this);
}); 
```

假设我想使用 data 属性并删除 rel 属性：-

```
<img data-thumb="item-1" src="1.gif"/>
<img data-thumb="item-2" src="2.gif"/>
<img data-thumb="item-3" src="3.gif"/> 
```

我的 jquery 将点击事件附加到每个具有 data-thumb 属性的图像会是什么样子？

**编辑**对不起，伙计们是一样的，就像一个白痴我忘了在我的代码中更改它：-

`var url = img.attr('rel');`到`var url = img.data('thumb');`

我感到惭愧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:26:31.250

一样的 ：）

```
$("img[data-thumb^='item']").click(function () {
    var img = $(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:26:35.097

您`rel`在选择器中替换为`data-thumb`：

```
$("img[rel^='item']").click(function () {
    var img = $(this);
}); 
```

变成

```
$("img[data-thumb^='item']").click(function () {
    var img = $(this);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:26:39.140

简单地 ：

```
$("img[data-thumb^='item']").click(function () {
    var img = $(this);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:26:39.897

不一样的工作吗？

```
$("img[data-thumb^='item']").click(function () {
    var img = $(this);
}); 
```

# css - Visual Studio and CMS?

> ID：14982185
> 
> 赞同：0
> 
> 时间：2013-02-20T14:24:13.533
> 
> 标签：css, asp.net-mvc, visual-studio-2010, html, content-management-system

I have to create an MVC asp.net website using MS visual studio for my final year of study in Information Systems. I want to know if it's possible to sort of "connect" the code to an HTML drag-and-drop CMS, instead of using visual studio's html/css editor and the auto-generated files in the mvc project.

Basically, I want to write the controller and model code in visual studio and the view code (HTML) in a nice CMS such as wordpress or drupal (not necessarily those two).

Please advise!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:28:35.107

考虑[Orchard CMS](http://www.orchardproject.net/) - 它是基于 ASP.net MVC 的。它在 Azure 上受支持。这是一个 azure+orchard[教程](http://www.windowsazure.com/en-us/develop/net/tutorials/website-from-gallery/)，可帮助您启动和运行。[2013 年 1 月发布的Umbraco](http://umbraco.com/) v6 也支持 MVC。

# google-calendar-api - 2 legged oauth for google calendar v3

> ID：14982189
> 
> 赞同：1
> 
> 时间：2013-02-20T14:24:20.770
> 
> 标签：google-calendar-api, google-api-java-client, google-api-client, google-apps-marketplace, 2-legged

I am working with Version 3 of Google Calendar REST API(using HttpClient) and its working fine. Similarly I've to work with web APIs of V3 Google Calendar since my application is in Google Apps marketplace. How can I proceed with 2 legged OAuth in V3 Google Calendar APIs. Any help would be appreciated.

Thanks in advance, Riyaz Ashraf.

# jquery - jquery pointLabel

> ID：14982191
> 
> 赞同：1
> 
> 时间：2013-02-20T14:24:20.907
> 
> 标签：jquery, jqplot

I am using plot fot plot graphs between two entities,I am struck with representing the point label for the graph I plotted. for the graph I plotted below I need to mention the point value, I tried using with pointLabels: {show: true} but with no luck so far .

code I used :

```
var t1 = [s1, s2, s3, s4,s5];    
var t2 = [s9, s10, s11, s12,s13];    
var ticks = ['BidsforOpenRequirements', 
             'ShortlistedBidsForOpenRequirements', 
             'ProfessionalsInInterview ',
             'ProfessionalsOnJobs',
             'UnscheduledInterviews'];

var plot1 = $.jqplot('CHART_2', [t1, t2], {        
     seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        pointLabels: { show: true}
    },
    series: [ { label: 'Contract' }, {label: 'Permanent'} ],        
    legend: {            
        show: true,            
        placement: 'insideGrid'        
    },        
    axes: {            
        xaxis: {                
            renderer: $.jqplot.CategoryAxisRenderer,                
            ticks: ticks 
        },                            
        yaxis: {               
            pad: 1.05,                
            tickOptions: { formatString: '%d' }    
        } 
    }    
}); 
```

# iframe - How to Open CS-Cart inside an iframe

> ID：14982193
> 
> 赞同：1
> 
> 时间：2013-02-20T14:24:21.753
> 
> 标签：iframe, cs-cart

I am wondering if anyone can help me here.

I am trying to open CS-Cart inside an iframe, but it will not work- once i remove the iframe, then it loads.

There is nothing wrong with the iframe as i tried other carts like Magento etc and they work but its only CS-Cart which doesn't.

Here is the link to the preview, where i want the CS-cart demo to open [http://www.shopping-cart-hub.com/items/preview/22](http://www.shopping-cart-hub.com/items/preview/22)

if you guys need the links i can post it here to explain- i am new here so not sure if i can.

Thanks

# c# - 在 C# 中调用虚拟方法的替代方法

> ID：14982195
> 
> 赞同：6
> 
> 时间：2013-02-20T14:24:33.150
> 
> 标签：c#, constructor, virtual

我将 NHibernate 用于我的 C# 项目，因此我有几个模型类。

让我们假设以下示例：

```
using System;

namespace TestProject.Model
{
    public class Room
    {
        public virtual int Id { get; set; }
        public virtual string UniqueID { get; set; }
        public virtual int RoomID { get; set; }
        public virtual float Area { get; set; }

    }
} 
```

到目前为止，使用 NHibernate 映射这些对象工作正常。现在我想生成一个新的 Room 对象并将其存储在数据库中。为了避免单独设置每个成员，我向模型类添加了一个新的构造函数。在我写的虚拟成员下面：

```
public RoomProperty()
{

}

public RoomProperty(int pRoomId, int pArea)
{
        UniqueID = Guid.NewGuid().ToString();
        RoomID = pRoomId;
        Area = pArea;
} 
```

用 FxCop 分析我的代码告诉我以下信息：

```
"ConstructorShouldNotCallVirtualMethodsRule"
This rule warns the developer if any virtual methods are called in the constructor of a non-sealed type. The problem is that if a derived class overrides the method then that method will be called before the derived constructor has had a chance to run. This makes the code quite fragile. 
```

[该页面](http://www.mono-project.com/Gendarme.Rules.BadPractice#ConstructorShouldNotCallVirtualMethodsRule)还描述了为什么这是错误的，我也理解。但我不知道如何解决这个问题。

当我删除所有构造函数并添加以下方法时......

```
public void SetRoomPropertyData(int pRoomId, int pArea)
        {
            UniqueID = Guid.NewGuid().ToString();
            RoomID = pRoomId;
            Area = pArea;

        } 
```

....在调用标准构造函数后设置数据我无法启动我的应用程序，因为 NHibernate 初始化失败。它说：

```
NHibernate.InvalidProxyTypeException: The following types may not be used as proxies:
VITRIcadHelper.Model.RoomProperty: method SetRoomPropertyData should be 'public/protected virtual' or 'protected internal virtual' 
```

但是将此方法设置为 virtual 与我在构造函数中设置虚拟成员时的错误相同。我怎样才能避免这些错误（违规）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:45:09.490

问题在于虚拟集。将值传递给基类构造函数中的虚拟属性将使用覆盖集而不是基集。如果重写集依赖于派生类中的数据，那么你就有麻烦了，因为派生类的构造函数还没有完成。

如果您绝对确定，任何子类都不会在覆盖集中使用其状态的任何数据，那么您可以在基类构造函数中初始化虚拟属性。考虑在文档中添加适当的警告。

如果可能，尝试为每个属性创建支持字段并在基类构造函数中使用它们。

您还可以将属性初始化推迟到派生类。为此，请在派生类的构造函数中调用的基类中创建一个初始化方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:45:33.050

我希望以下其中一项工作：

1.  使属性成为非虚拟的（只要 NHibernate 支持它就首选）。
2.  从自动实现的属性更改为具有显式支持字段的属性，并在构造函数中设置字段而不是设置属性。
3.  创建一个静态`Create`方法，首先构造对象，然后在返回构造的对象之前将值设置为属性。

**编辑：**从评论中我看到选项#3 不清楚。

```
public class Room
{
    public virtual int Id { get; set; }
    public virtual string UniqueID { get; set; }
    public virtual int RoomID { get; set; }
    public virtual float Area { get; set; }

    public static Room Create(int roomId, int area)
    {
        Room room = new Room();
        room.UniqueID = Guid.NewGuid().ToString();
        room.RoomID = roomId;
        room.Area = area;
        return room;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T11:45:34.877

恕我直言，好主意是使基类**抽象**及其构造函数**受保护**。接下来，*继承*的类有它们的构造函数**私有**和 - 对于外部世界 - 统一的*静态*方法，如“*实例*”，它首先初始化构造函数，然后 - 以正确的顺序调用整个类方法集，最后 - 返回的*实例*班级。

# mysql - Unable to insert a row to QSqlRelationalTable model

> ID：14982202
> 
> 赞同：1
> 
> 时间：2013-02-20T14:24:55.660
> 
> 标签：mysql, sql, qt4

I'm trying to insert a record to `QSqlRelationalTable`. If `setRelation` is called before, foreign key constraint fails.

`customers` table:

```
+-------------------+-------------+------+-----+---------+----------------+
| Field             | Type        | Null | Key | Default | Extra          |
+-------------------+-------------+------+-----+---------+----------------+
| id                | int(11)     | NO   | PRI | NULL    | auto_increment |
| name              | varchar(45) | YES  |     | NULL    |                |
| last              | varchar(45) | YES  |     | NULL    |                |
| email             | varchar(45) | YES  |     | NULL    |                |
| phone             | varchar(45) | YES  |     | NULL    |                |
| fax               | varchar(45) | YES  |     | NULL    |                |
| address           | text        | YES  |     | NULL    |                |
| customer_types_id | int(11)     | NO   | MUL | NULL    |                |
+-------------------+-------------+------+-----+---------+----------------+ 
```

`customer_types` table:

```
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| id    | int(11)     | NO   | PRI | NULL    | auto_increment |
| name  | varchar(45) | YES  |     | NULL    |                |
+-------+-------------+------+-----+---------+----------------+ 
```

Code:

```
model = new QSqlRelationalTableModel(this);
model->setTable("customers");
model->setRelation(7,QSqlRelation("customer_types", "id", "name"));
// ...
QSqlRecord record = model->record();
record.setValue("name",ui->lineEditName->text());
// Other fields
record.setValue(7,QVariant("1"));  // '1' exists in customer_types
qDebug() << model->insertRecord(-1,record);
qDebug() << model->lastError().text(); 
```

Output:

```
false 
"Cannot add or update a child row: a foreign key constraint fails 
(`doors`.`customers`, CONSTRAINT `fk_customers_customer_types` FOREIGN KEY 
(`customer_types_id`) REFERENCES `customer_types` (`id`) 
ON DELETE NO ACTION ON UPDATE NO ACTION) QMYSQL3: Unable to execute statement" 
```

# java - Errors: unchecked call to JComboBox(E[]) and Run out of Memory

> ID：14982205
> 
> 赞同：0
> 
> 时间：2013-02-20T14:24:59.957
> 
> 标签：java

Hello,

Probably my question is very simple but it is my first java program ever and I don't know what to do.

I want to create a combobox that open images. Just that!

But I get 2 errors, 1\. Run out of memory 2\. unchecked call to JComboBox(E[]) in line ''images = new JComboBox( names );''

The first error I tried to fix it in eclipse with -Xmx1024m command and now the program runs through eclipse platform but when I try to compile with javac command I get the error 2\. Finally when I create a .jar file from eclipse and I run, it doesn't load all images just the first 80 of 310.

Is there another way to write my code in order to load all images and don't have to use so much memory?

I would appreciate if someone of you could just correct my code...

Thank you very much, Wishmaster

My code is this:

```
package test;  

import java.awt.*;  
import java.awt.event.*;  
import java.awt.FlowLayout;  
import java.awt.event.ItemListener;  
import java.awt.event.ItemEvent;  
import javax.swing.JFrame;  
import javax.swing.JLabel;  
import javax.swing.JComboBox;  
import javax.swing.Icon;  
import javax.swing.ImageIcon;  

public class ComboBoxTest extends JFrame {  
private JComboBox images;  
private JLabel label;  
private String names[] =  
{  "1.P 1.png",  
   "2.P -1.png",   ....so on to 300 images };  

private Icon icons[] =  
new Icon[] {    new ImageIcon( names[ 0] ),  
        new ImageIcon( names[ 1 ] ), ....so on  };  
 };  

public ComboBoxTest() {  
super( "Testing JComboBox" );  

Container c = getContentPane();  
c.setLayout( new FlowLayout() );  

images = new JComboBox( names );  
images.setMaximumRowCount( 10 );  

images.addItemListener(  
new ItemListener() {  
public void itemStateChanged( ItemEvent e ) {  
label.setIcon(  
icons[ images.getSelectedIndex() ] );  
}  
}  
);  

c.add( images );  

label = new JLabel( icons[ 0 ] );  
c.add( label);  
setVisible(true);  
setSize( 500, 500 );  
}  

public static void main( String args[] )  
{  
ComboBoxTest app = new ComboBoxTest();  

app.addWindowListener(  
new WindowAdapter() {  
public void windowClosing( WindowEvent e )  
{  
System.exit( 0 );  
}  
}  
);  
}  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:40:30.240

如果我理解正确。

1.  不要在开始时创建 imageicon 。在项目侦听器中创建唯一的特定图像。

    ```
    images.addItemListener(  
    new ItemListener() {  
    public void itemStateChanged( ItemEvent e ) {  
    Icon ico=new ImageIcon(toString(images.getSelectedItem()));
    label.setIcon(ico);  
    }  
    }  
    ); 
    ```

不需要这个：

```
private Icon icons[] =  
new Icon[] {    new ImageIcon( names[ 0] ),  
        new ImageIcon( names[ 1 ] ), ....so on  };  
 }; 
```

# visual-c++ - Scale space blob detection using opencv

> ID：14982206
> 
> 赞同：1
> 
> 时间：2013-02-20T14:25:02.713
> 
> 标签：visual-c++, opencv, computer-vision

i am new in image processing and computer vision and i would like to detect blobs in an image using Laplacian of Gaussian with different scale spaces. The following links explain in detail. [http://www.cs.utah.edu/~jfishbau/advimproc/project1/](http://www.cs.utah.edu/%7Ejfishbau/advimproc/project1/) [http://www.cs.utah.edu/~manasi/coursework/cs7960/p1/project1.html](http://www.cs.utah.edu/%7Emanasi/coursework/cs7960/p1/project1.html) So far by using opencv2 i have managed to get the images, apply the Gaussian filter with various kernels and apply the Laplacian filter. The i multiply with sigma squared the whole image to amplify the signal (see description in links) and then i apply a threshhold. The next step is to detect local maxima and minima so i can get the blob center and be able to draw circles, but i am not sure how to do it and whether the image processing i have done so far is correct. Here is my code:

```
int main(){

    image1 = imread("butterfly.jpg",0);

    drawing1 = imread("butterfly.jpg");

    blobDetect(image1,drawing1);
waitKey();
    return 0;
}

void blobDetect(Mat image, Mat drawing){

    int ksize = 1;
    int n =1;

    Mat result[10];
    for(int i=0; i<10; i++){
    cv::GaussianBlur(image,result[i],cv::Size(ksize,ksize),ksize/3,0);
    n+=1;
    ksize = 2*n-1;
    }

    ksize = 1;
    n =1;
    for(int i=0; i<10; i++){
    cv::Laplacian(result[i],result[i],CV_8U,ksize,1,0);
    n+=1;
        ksize = 2*n-1;
   }

   ksize = 1;
   int cols = image.cols;
   int rows = image.rows;
   for(int a=0; a<10; a++){
    for(int i=0; i<rows; i++){
        //uchar* data = result[a].ptr<uchar>(rows);
        for(int j=0; j<cols; j++){
            result[a].at<uchar>(i,j) *= (ksize/3)*(ksize/3);                
        }   
    }
    ksize++;
    ksize = 2*ksize-1;
}

for(int i=0; i<10; i++){
    cv::threshold(result[i], result[i], 100, 255, 0);
}

} 
```

![This is the expected result](../Images/65dae6fb1b07face453152f7e3fdf62a.png)

This is the expected result

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:44:20.580

检测轮廓后，您可以使用

```
minEnclosingCircle() 
```

更好的是查看本教程：

[http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/bounding_rects_circles/bounding_rects_circles.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/bounding_rects_circles/bounding_rects_circles.html)

# python - Copy a image on a new larger image

> ID：14982211
> 
> 赞同：1
> 
> 时间：2013-02-20T14:25:17.130
> 
> 标签：python, opencv, image-processing, numpy

I have a color image `sourceImage` and I would copy this image on a new larger color image `destImage`: the source image should be centered over the new image. In order to perform this procedure, I wrote the following code:

*destHeight*: the height of the new larger image *destWidth*: the width of the new larger image

*sourceFilename*: the path of the source image

```
sourceImage = cv2.imread(sourceFilename,1)
imgHeight, imgWidth, imgChannels = sourceImage.shape[:3]
#print sourceImage.shape[:3]

destImage = np.zeros((destHeight,destWidth,imgChannels), np.uint8)
#print destImage.shape[:3]

yBorder = (destHeight-imgHeight)/2
xBorder = (destWidth-imgWidth)/2
#print yBorder, xBorder

destImage[yBorder:imgHeight,xBorder:imgWidth] = sourceImage
cv2.imshow('dst', destImage)
cv2.waitKey(0) 
```

But when I run the script, the python interpreter displays the following error:

```
Traceback (most recent call last):
  File "examples.py", line 30, in <module>
    destImage[yBorder:imgHeight,xBorder:imgWidth] = sourceImage
ValueError: shape mismatch: objects cannot be broadcast to a single shape 
```

What is the reason for this error? How to solve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:35:55.940

尝试这个：

```
destImage[yBorder:yBorder + imgHeight,xBorder:xBorder + imgWidth] = sourceImage 
```

切片语法是`start:stop`，不是`start:width`。

# java - org.datanucleus.store.query.QueryCompilerSyntaxException: Identifier expected at character 12 in "u.username== value"

> ID：14982213
> 
> 赞同：0
> 
> 时间：2013-02-20T14:25:34.857
> 
> 标签：java, google-app-engine, jpa, persistence, google-cloud-datastore

```
org.datanucleus.store.query.QueryCompilerSyntaxException: Identifier expected at character 12 in "u.username== value" 
```

here is the query I'm trying to Execute :

```
try{
        Query q=em.createQuery("select u from UserJ u where u."+key+"== value");
        q.setParameter("value",value );
        return q.getResultList().isEmpty();
    }
    catch(PersistenceException x)
    {
        System.out.println(x.getLocalizedMessage());}
    finally{    
        em.close();
    } 
```

Where is `key` is passed by value :`"username"`

and `value` is passed by value :`"test"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:29:17.400

您的语法不正确，请尝试以下查询：

```
Query q = em.createQuery("select u from UserJ u where u."+key+" = :value"); 
```

# c# - Windows Forms - how to get the data with which a DataGridView is populated

> ID：14982215
> 
> 赞同：0
> 
> 时间：2013-02-20T14:25:51.160
> 
> 标签：c#, .net, winforms, visual-studio-2010

What I need to do is to capture the data before being loaded in the dgv and change one of the properties. What I have now is a generic method which I'm using to create the `DataSource` for my dgv:

```
dgv.DataSource = new SortableBindingList<T>(result.ResultEntities); 
```

And what I want to do is to get this data, manipulate it the way I need and then return the changed data for loading in the `dgv`.

I tried to accomplish this by simply doing this:

```
SortableBindingList<MyType> someVar = (SortableBindingList<MyType>)dgvMydgv.DataSource; 
```

well, it seems it's not the way to do this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:43:28.927

如果将诸如 sortableBindingList 之类的局部变量绑定到 datagridview，则在 datagrid 数据绑定成功后将无法访问它。在“DataBound()”事件触发后，datasource 将为 NULL。

**供参考：**

如果将 a 绑定`SqlDataSource`到 datagridview，则可以在绑定数据源后导出 sortablebindinglist。

您必须读出每一行中的每一列并将其保存在新定义的 sortablebindinglist 中，然后将数据源重新绑定到 gridview：

```
foreach (GridViewRow gvrMyRow in gvFields.Rows)
{
     foreach (TableCell tcMyCell in gvrMyRow.Cells)
     {
         string sMyValue = tcMyCell.Text;
     }
} 
```

**记住：**

保持对原始填充列表的引用是正常的方式，您应该以这种方式实现。它更容易找到条目，操作条目等。

# css - p:selectOneMenu 相对宽度在调整浏览器大小时会拉伸

> ID：14982217
> 
> 赞同：1
> 
> 时间：2013-02-20T14:25:54.713
> 
> 标签：css, jsf, primefaces

当我增加浏览器的窗口大小（例如将分辨率从 1024x768 更改为 1920x1080）时，`<p:selectOneMenu>`会变成：

![1024x768 之前](../Images/6daacee1721c0bf20e4884b075734e72.png)

对此：

![后](../Images/cca866e4f29efba214f5533553815e2f.png)

我发现当我向组件添加相对宽度时会出现问题，例如：

```
<p:selectOneMenu ... style="width: 30%;"> 
```

如何删除不必要的空间？我正在使用 PrimeFaces 3.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-19T04:37:10.877

如果您不希望 selectonemenu 在调整大小或通过其文本使用时拉伸

```
.ui-selectonemenu {
    min-width: 0 !important;
} 
```

完美地为我工作。

# r - 一个我无法理解的错误。“承诺已经在评估中……”

> ID：14982223
> 
> 赞同：1
> 
> 时间：2013-02-20T14:26:04.863
> 
> 标签：r, function, stringr

我正在尝试在 package.json 的帮助下编写一个在名称中查找模式的函数`stringr`。我的功能如下所示：

```
namezz=function(thepatternx,data=data,column=Name){

  library(stringr)

  thepattern=as.character(quote(thepatternx))

  pattern <- thepattern
  strings <- data$column ##data$column is a character vector
  found=str_detect(strings, pattern)
  yez= rownames(data[which(found==TRUE),])
  hhh=as.numeric(yez)+1
  return(hhh)

} 
```

当我调用该函数时，出现错误：

```
namezz(Primus)

Error in namezz(Primus) : 
  promise already under evaluation: recursive default argument reference or earlier problems? 
```

无法理解错误，以及我做错了什么..提前感谢您提供的任何指导方针:)

`EDIT`: 如果我改为这样写：

```
namezz=function(thepatternx,data,Name){

  library(stringr)

  thepattern=as.character(quote(thepatternx))

  pattern <- thepattern
  strings <- data$Name  #####data$column is a character vector
  found=str_detect(strings, pattern)
  yez= rownames(data[which(found==TRUE),])
  hhh=as.numeric(yez)+1
  return(hhh)

} 
```

我得到：

```
namezz(Primus,data,Name)

numeric(0) 
```

这是不正确的，因为如果我执行该过程而不将其放入函数中，我会得到以下行：

```
pattern="Primus"
strings <- data$Name
mja=str_detect(strings, pattern)
yez= rownames(data[which(mja==TRUE),])
hhh=as.numeric(yez)+1

    [1] 2 3 4 5 6 7 8 9 
```

这是一个输入：

```
dput(head(data))
structure(list(Year = 1901:1906, Name = c(">>Primus<< sbk", ">>Primus<< sbk", 
">>Primus<< sbk", ">>Primus<< sbk", ">>Primus<< sbk", ">>Primus<< sbk"
), Established = c(1899L, 1899L, 1899L, 1899L, 1899L, 1899L), 
    Bolagskod = c(2L, 2L, 2L, 2L, 2L, 2L), Kategori = c(2L, 0L, 
    0L, 0L, 0L, 0L), BranschTillhörighet = c(2L, 2L, 2L, 2L, 
    2L, 2L), Startår = c(1901L, 1901L, 1901L, 1901L, 1901L, 1901L
    ), Stoppår = c(1908L, 1908L, 1908L, 1908L, 1908L, 1908L), 
    Ranges = c("8  1901 - 1908  >>Primus<< sbk", "8  1901 - 1908  >>Primus<< sbk", 
    "8  1901 - 1908  >>Primus<< sbk", "8  1901 - 1908  >>Primus<< sbk", 
    "8  1901 - 1908  >>Primus<< sbk", "8  1901 - 1908  >>Primus<< sbk"
    ), Years.present = c("1901  1902  1903  1904  1905  1906  1907  1908", 
    "1901  1902  1903  1904  1905  1906  1907  1908", "1901  1902  1903  1904  1905  1906  1907  1908", 
    "1901  1902  1903  1904  1905  1906  1907  1908", "1901  1902  1903  1904  1905  1906  1907  1908", 
    "1901  1902  1903  1904  1905  1906  1907  1908"), Delägare.män. = c(267L, 
    271L, 317L, 339L, 339L, 345L), Delägare.kvinnor. = c(246L, 
    251L, 236L, 244L, 260L, NA), Sjukdomsfall.män. = c(66L, 61L, 
    100L, 103L, 106L, 82L), Sjukdomsfall.kvinnor. = c(59L, 55L, 
    60L, 71L, 85L, 60L), Sjukdagar.män. = c(1686L, 1918L, 2149L, 
    2212L, 2331L, 1890L), Sjukdagar.kvinnor. = c(1681L, 1197L, 
    1589L, 1904L, 2282L, 1750L), Inkomster.InträdesAvgifter. = c(303L, 
    NA, NA, NA, NA, NA), Inkomster.RegelbundnaAvgifter. = c(4901L, 
    4939L, 5172L, 5687L, 5728L, 5879L), Inkomster.UtdebiteradeAvgifter. = c(1313L, 
    1045L, 1141L, 2024L, 1462L, 1934L), Inkomster.Böter. = c(241L, 
    NA, NA, NA, NA, NA), SummaMedl.avg. = c(6758L, 5984L, 6313L, 
    7711L, 7190L, 7813L), Inkomster.BidragStatKommun. = c(366L, 
    440L, 456L, 464L, 476L, 493L), Inkomster.Räntor. = c(NA_integer_, 
    NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_
    ), Inkomster.Övrigt. = c(24L, 722L, 874L, 605L, 805L, 647L
    ), Inkomster.Summa. = c(7148L, 7146L, 7644L, 8781L, 8472L, 
    8954L), DiffIntäkter.SummaMotVerkligSumma. = c(0L, 0L, -1L, 
    -1L, -1L, -1L), Utgifter.Sjukhjälp. = c(4735L, 4450L, 5300L, 
    5870L, 6560L, 5200L), Utgifter.Begravningshjälp. = c(1200L, 
    795L, 1045L, 1810L, 955L, 1675L), Utgifter.Arvoden. = c(NA_integer_, 
    NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_
    ), Utgifter.Förvaltning. = c(956L, 972L, 1038L, 1156L, 1523L, 
    1171L), Utgifter.Övrigt. = c(25L, NA, 20L, 5L, NA, NA), Utgifter.Behållning. = c(231, 
    929, 240, -59, -565, 908), Utgifter.SummaÖvrigt.Behållning. = c(256L, 
    929L, 260L, -54L, -565L, 908L), Utgifter.Summa. = c(7148L, 
    6217L, 7403L, 8841L, 9038L, 8046L), KOLL = c(-1L, 0L, 0L, 
    0L, 0L, 0L), Tillgångar.KontantIKassa. = c(835L, 1765L, 2006L, 
    1946L, 1380L, 2259L), Tillgångar.KontantMedelBank. = c(NA_integer_, 
    NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_
    ), Tillgångar.Totalt. = c(836L, 1765L, 2006L, 1946L, 1468L, 
    2348L), Skulder.Totalt. = c(NA_integer_, NA_integer_, NA_integer_, 
    NA_integer_, NA_integer_, NA_integer_), TillgångarÖverSkulder = c(NA_integer_, 
    NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_
    )), .Names = c("Year", "Name", "Established", "Bolagskod", 
"Kategori", "BranschTillhörighet", "Startår", "Stoppår", "Ranges", 
"Years.present", "Delägare.män.", "Delägare.kvinnor.", "Sjukdomsfall.män.", 
"Sjukdomsfall.kvinnor.", "Sjukdagar.män.", "Sjukdagar.kvinnor.", 
"Inkomster.InträdesAvgifter.", "Inkomster.RegelbundnaAvgifter.", 
"Inkomster.UtdebiteradeAvgifter.", "Inkomster.Böter.", "SummaMedl.avg.", 
"Inkomster.BidragStatKommun.", "Inkomster.Räntor.", "Inkomster.Övrigt.", 
"Inkomster.Summa.", "DiffIntäkter.SummaMotVerkligSumma.", "Utgifter.Sjukhjälp.", 
"Utgifter.Begravningshjälp.", "Utgifter.Arvoden.", "Utgifter.Förvaltning.", 
"Utgifter.Övrigt.", "Utgifter.Behållning.", "Utgifter.SummaÖvrigt.Behållning.", 
"Utgifter.Summa.", "KOLL", "Tillgångar.KontantIKassa.", "Tillgångar.KontantMedelBank.", 
"Tillgångar.Totalt.", "Skulder.Totalt.", "TillgångarÖverSkulder"
), row.names = c(NA, 6L), class = "data.frame") 
```

`Edit`

这有效：

```
namezz=function(thepatternx,data,Name){

  library(stringr)

  thepattern=thepatternx

  pattern <- thepattern
  strings <- data$Name
  mja=str_detect(strings, pattern)
  yez= rownames(data[which(mja==TRUE),])
  hhh=as.numeric(yez)+1
  return(hhh)  

} 

namezz("Primus",data,Name)
[1] 2 3 4 5 6 7 8 9 
```

但是我怎么能在没有引号的情况下通过 Primus `namezz(Primus,data,Name)`，？像我的问题一样思考一些事情，但`as.character(quote())`不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:10:44.803

有人可以纠正我，但我认为您将 Primus 和 Name 作为对象传递给函数，它正在 .GlobalEnv 中查找这些对象并且没有找到它们，因此您的函数无法执行您的大部分指令（并且什么都不返回）。我已经编辑了你的功能。

而是试试这个...

```
 namezz <- function( pattern = " ", data , column= "Name" ){
   library(stringr)
   strings <- data[ , column ] ##data$column is a character vector
   found = str_detect( strings , pattern )
   yez = rownames( data[ which( found==TRUE ) , ] )
   hhh = as.numeric( yez ) + 1
   return( hhh )
 } 
```

然后你必须像这样使用函数：

```
namezz( "Primus" , data = data ) #In this case the default for column is "Name" as you want 
```

传递 data=data 的问题[在这里得到了很好的解释](https://stat.ethz.ch/pipermail/r-help/2008-November/180902.html)。该帖子的摘录（他们指的是testparams，您将指的是数据）......

> “关于评估函数参数的最重要的事情之一是提供的参数和默认参数的处理方式不同。提供给函数的参数在调用函数的评估框架中进行评估。默认参数函数在函数的评估框架中进行评估。"
> 
> *参数 testparams，当没有匹配的参数被传递时，被赋予默认值，即不是*在定义 foo 的环境中查找的变量 testparams 的值，*也不*是在调用 foo 的环境中，而是在调用函数时创建的本地环境以及参数映射到值的位置——在此环境中，testparams 是一个参数，它已经在评估中，因此会出现递归查找错误。

# javascript - 如何在鼠标单击位置打开弹出框

> ID：14982224
> 
> 赞同：7
> 
> 时间：2013-02-20T14:26:12.343
> 
> 标签：javascript, html, css, twitter-bootstrap, popover

我已经在我的 HTML 页面上加载了一个图像，我想在鼠标点击位置上从 Twitter Bootstrap 打开一个弹出窗口。到目前为止，我所做的是打开图像侧面的弹出框。但我真正想做的是在我点击图像的任何地方打开弹出框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T14:39:58.023

您需要获取鼠标坐标并让您的脚本使用它们在单击时定位弹出框。如果您使用的是 jQuery，这可能会有所帮助：

```
$('#yourimage').click(function(){
      $('#popover').css('left', pageX-(popover width)+'px');
      $('#popover').css('top', pageY-(popover height)+'px');
}) 
```

**- -编辑 - -**

这是您所追求**[的演示。](http://jsfiddle.net/2EBGE/30/)**

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-20T14:39:13.517

尝试使用您选择的坐标重写 .popover 类

```
.popover {
top: 20px !important;/*put your position */
left: 20px !important;/*put your position*/
} 
```

只需重置位置元素即可在主 bootstrap.css 中保持所有其他样式不变。

# objective-c - 在 XCode 4.5 中使用 ARC 时日期选择器泄漏

> ID：14982225
> 
> 赞同：2
> 
> 时间：2013-02-20T14:26:13.290
> 
> 标签：objective-c

```
 self.date = d;
  [self.datePicker setDate:date];
  self.dateFormatter = [[NSDateFormatter alloc] init];
  [dateFormatter setTimeStyle: 0];
  [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
  self.dateText.text = [dateFormatter stringFromDate:date]; 
```

UIDevice RGB Color 和 CGColor 是漏洞

# javascript - 如何用 Javascript 编写一个快速计时器？

> ID：14982227
> 
> 赞同：0
> 
> 时间：2013-02-20T14:26:18.327
> 
> 标签：javascript, browser, timer, setinterval

我需要一个非常快的 Javascript 计时器。计时器分辨率被认为是 10 毫秒。我已经实现了一个工作计时器，但问题是，时间总是取决于浏览器中运行的其他资源的数量。当动画 GIF 运行时，我的计时器根本无法工作。这是代码（工作！）：

```
var timer = new Timer();

function Timer(){
    var time = 0;
    //Every 10ms we are incrementing the timer:
    setInterval(function(){
        time=time+1;
    },10);
    this.getTime=function(){return time;}
}

function testTimer(){
    var counter = 0;
    var resultsum = 0;
    var everytensum = 0;
    setInterval(function(){
        counter = counter + 1;
        window.timeoutTesterRunning = true;
        var timeoutTester = new TimeoutTester();
        setTimeout(function(){
            console.log(counter+": "+timeoutTester.getResult());
            resultsum = resultsum+timeoutTester.getResult();
            console.log(resultsum);
            if(counter%10==0){
                console.log("Counting last 10 seconds: "+(resultsum-everytensum));
                console.log("Counting last "+counter+" seconds: "+resultsum);
                everytensum = resultsum;
            }
        },1200)
    }, 3000);
}

function TimeoutTester(){
    var result;
    var snap_time1 = timer.getTime();
    setTimeout(function(){
        var snap_time2 = timer.getTime();
        result = snap_time2-snap_time1;
    },1000);
    this.getResult=function(){return result;}
} 
```

现在来自 console.log 的结果（总和在括号中）：

```
[10:10:54.466] 1: 100 (100)
[10:10:57.466] 2: 100 (200)
[10:11:00.466] 3: 100 (300)
[10:11:03.466] 4: 100 (400)
[10:11:06.466] 5: 100 (500)
[10:11:09.465] 6: 100 (600)
[10:11:12.466] 7: 101 (701)
[10:11:15.467] 8: 100 (801)
[10:11:18.467] 9: 100 (901)
[10:11:21.467] 10: 100 (1001)
[10:11:21.476] Counting last 10 seconds: 1001
[10:11:24.467] 11: 100 (1101)
[10:11:27.468] 12: 100 (1201)
[10:11:30.467] 13: 100 (1301)
[10:11:33.478] 14: 60 (1361)  //Animated Gif started: Less countings! ("Time runs longer")
[10:11:36.476] 15: 57 (1418)
[10:11:39.482] 16: 58 (1476)
[10:11:42.472] 17: 61 (1537)
[10:11:45.474] 18: 56 (1593)
[10:11:48.484] 19: 48 (1641)
[10:11:51.470] 20: 55 (1696)
[10:11:51.476] Counting last 10 seconds: 695
[10:11:51.482] Counting last 20 seconds: 1696 
```

柜台运行很规律。但是当浏览器忙时（通过动画 GIF），Javascript 没有时间正确设置间隔。该函数`Timer()`只是没有收到它需要增加的时间`var time`，所以值太低了（当我第一次开始测试时，值甚至更低，约为 40，但我能够通过使用函数将它们提高到 ~55执行）。

任何人都知道我们如何让 Javascript 计时器工作？还是无法阻止浏览器杀死计时器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:35:06.297

`setInterval`从来不是为了做计时，而是为了安排执行！它的间隔不可靠。如果要进行计时，请使用[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)时间戳：

```
function Timer(){
    var start = Date.now();
    this.getTime=function() {
        return Date.now() - start;
    }
} 
```

这样，您将获得 1 毫秒的分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:37:04.597

var timer = function(f, args) { t = Date.now(); f.call(args); 控制台日志（日期。现在（） - t）}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:45:33.120

因为计时器的实现是不可能的，所以我最终得到了一个不同的解决方案，它是一种在 setInterval 中强制运行动画的方法：

```
function animate(elementId,pictureTimeArrayName){
    var elementStyle = document.getElementById(elementId).style;
    var pictureTimeArray = window[pictureTimeArrayName];

    function toInterval(startDate, timeSinceStart, picture){
        var interval = setInterval(function(){
            if(Date.now()-startDate>=timeSinceStart){
                clearInterval(interval);
                elementStyle.background = "url("+picture+")";
            }
        },2);
    }

    setInterval(function(){
        var startDate = Date.now();
        for(var i=0;i<pictureTimeArray.length;i++){
            toInterval(startDate,pictureTimeArray[i].time,pictureTimeArray[i].picture);
        }
    },pictureTimeArray[pictureTimeArray.length-1].time);
} 
```

虽然数组看起来像这样：

```
var array_1 = [{picture: "animations/pic_1.gif", time: "30"},
               {picture: "animations/pic_2.gif", time: "60"},
               ...
               {picture: "animations/pic_36.gif", time: "1080"},]; 
```

这看起来相当不错（>=30 fps）。但是：当动画 Gif 运行时，它仍然不再那么流畅了。如果它是一个重复的动画，那么图纸并不总是干净的。在一些从不浏览器版本（来自 Firefox）中，绘图甚至比旧版本中的更糟糕，而其他浏览器（Chrome）也有它们的问题。特别是如果您在 Chrome 中更改浏览器窗口并返回窗口：动画看起来会很奇怪。

因此，您最好为您的专业动画使用 Flash 或其他非 JavaScript 解决方案。

# php - 减去两个总数

> ID：14982228
> 
> 赞同：0
> 
> 时间：2013-02-20T14:26:19.093
> 
> 标签：php

我有一个通过mysql链接的表。我有 5 列显示：名称、商店、描述、欠款和成本。我写了一个脚本来计算“欠款”和“成本”的总数。我无法从总“欠款”中减去总“成本”。

下面是我的代码。

```
<div>
        <table id="datatables" class="display">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Shop</th>
                    <th>Description</th>
        <th>Amount due</th>
        <th>Cost</th>
       </tr>
            </thead>
            <tbody>
                <?php
                while ($row = mysql_fetch_array($result)) {
                    ?>
                    <tr>
                        <td><?=$row['name']?></td>
                        <td><?=$row['category']?></td>
                        <td><?=$row['subject']?></td>
                        <td><?=$row['custom1']?></td>
                        <td><?=$row['custom2']?></td>
              </tr>
                    <?php
                }
                ?>

                <?php
                    $query = "SELECT custom1, SUM(custom1) FROM hesk_tickets";

                    $result = mysql_query($query) or die(mysql_error());

                    while($row = mysql_fetch_array($result)){
                    echo "Total Owed". $row['custom1']. " = £". $row['SUM(custom1)'];
                    echo "<br />";
                }

                ?>  

                <?php
                    $query = "SELECT custom2, SUM(custom2) FROM hesk_tickets";

                    $result = mysql_query($query) or die(mysql_error());

                    while($row = mysql_fetch_array($result)){
                    echo "Cost exVAT". $row['custom2']. " = £". $row['SUM(custom2)'];
                    echo "<br />";
                    echo "Profit". $row['custom1 , custom2']. " = £". $row['SUM(custom1 - custom2)'];
                    echo "<br />";
                }

                ?>  

            </tbody>
        </table>
    </div> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:33:40.293

这就是问题：

```
echo "Profit". $row['custom1 , custom2']. " = £". $row['SUM(custom1 - custom2)']; 
```

需要是：

```
echo "Profit". $row['custom1']. ",".$row['custom2']." = £". $row['custom1'] - $row['custom2']; 
```

并听取@h2ooooooo 的建议 - 去寻找更好、更安全的 PHP/MySQL 使用方法。

# c# - 改进正则表达式搜索

> ID：14982229
> 
> 赞同：1
> 
> 时间：2013-02-20T14:26:24.233
> 
> 标签：c#, regex

使用 DirectoryServices.AccountManagement 我得到的用户`DistinguishedName`看起来像这样：

```
CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu 
```

我需要从中获得第一个`OU`价值。
我找到了类似的解决方案：[C# Extracting a name from a string](https://stackoverflow.com/questions/356480/c-sharp-extracting-a-name-from-a-string)

并使用一些调整，我创建了这段代码：

```
string input = @"CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu";
Match m = Regex.Match(input, @"OU=([a-zA-Z\\]+)\,.*$");
Console.WriteLine(m.Groups[1].Value); 
```

此代码`STORE`按预期返回，但如果我更改`Groups[1]`为`Groups[0]`我得到与输入字符串几乎相同的结果：

```
OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu 
```

如何更改此正则表达式，使其仅返回 的值`OU`？所以在这个例子中我得到了 2 个匹配的数组。如果我的字符串中有更多的 OU，那么数组会更长。

**编辑：** 我已经将我的代码（使用@dasblinkenlight 建议）转换为函数：

```
private static List<string> GetOUs()
{
    var input = @"CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu";
    var mm = Regex.Matches(input, @"OU=([a-zA-Z\\]+)");
    return (from Match m in mm select m.Groups[1].Value).ToList();
} 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:37:15.953

您的正则表达式很好（几乎），您只是使用了错误的 API。

删除匹配到结束 anchor 的正则表达式部分`$`，并更改对`Match`的调用`Matches`，并在循环中获取匹配项，如下所示：

```
var input = @"CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu";
var mm = Regex.Matches(input, @"OU=([a-zA-Z\\]+)");
foreach (Match m in mm)
    Console.WriteLine(m.Groups[1].Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:30:51.937

您现有的正则表达式：

```
@"OU=([a-zA-Z\\]+)\,.*$" 
```

匹配`OU=`，然后是一些字母和反斜杠 ( `[a-zA-Z\\]+`)，然后是逗号，然后是任何字符 ( `.*`) 到行尾 ( `$`)。

因此，单个匹配将始终匹配`OU`第一节之后的整行。

通过删除`,.*$`最后的 修改您的正则表达式，它将匹配每个 OU 组：

```
@"OU=([a-zA-Z\\]+)" 
```

另请注意，括号是一个捕获组。如果您还想单独捕获价值部分，它们很有用，但如果您不使用它，它们就不是必需的，您可以这样做：

```
@"OU=[a-zA-Z\\]+" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:34:46.383

这是因为您混淆了比赛和小组

```
string input = @"CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu";
MatchCollection mc = Regex.Matches(input, @"OU=([a-zA-Z\\]+),");

foreach(Match m in mc)
{
  Console.WriteLine(m.Result("$1"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T15:07:40.320

`Group[0]`返回完整匹配： `Group[1]`返回匹配中的第一个 Pattern [即第一个括号 '(' ')' 中的所有内容]

因此，如果您想准确获得 OU.. 的这 2 次出现，您可以这样做：

```
 Match m = Regex.Match(input, @"OU=([a-zA-Z\\]+)\,OU=([a-zA-Z\\]+)\,.*$");
 Console.WriteLine(m.Groups[1].Value);
 Console.WriteLine(m.Groups[2].Value); 
```

`Group[0]`返回完整匹配：（您不想要） `Group[1]`返回匹配中的第一个 Pattern [即第一个括号 '(' ')' 中的所有内容] `Group[2]`返回匹配中的第二个 Pattern [即第二个括号中的所有内容 '( '')']

给予：商店公司

但是我假设您不想对您感兴趣的每个模式的正则表达式如此明确。如果您想获得多个匹配项，那么您需要执行返回匹配集合的正则表达式匹配调用。

```
MatchCollection ms = Regex.Matches(...); 
```

但是，这仍然不适用于您当前的正则表达式，因为从`STORE`so 到行尾的所有内容都将在第一场比赛中。如果您只想在“OU =”之后获得模式“1-or-more-letters”

你只需要：

```
@"OU=([a-zA-Z\\]+)" 
```

所以你的代码是：

```
string input = @"CN=Adam West,OU=STORE,OU=COMPANY,DC=mycompany,DC=group,DC=eu";
MatchCollection ms = Regex.Matches(input, @"OU=([a-zA-Z\\]+)");

foreach (Match m in ms)
{
   Console.WriteLine(m.Groups[1].Value);// get the string in the first "(" ")"
} 
```

# mysql - 在 Mysql 上加入多个表

> ID：14982231
> 
> 赞同：2
> 
> 时间：2013-02-20T14:26:26.433
> 
> 标签：mysql, sql, select, join

我有以下表格：

服务

```
╔════╦═════════════╗
║ ID ║ DESCRIPTION ║
╠════╬═════════════╣
║  1 ║ A           ║
║  2 ║ B           ║
║  3 ║ C           ║
╚════╩═════════════╝ 
```

职员

```
╔════╦══════╗
║ ID ║ NAME ║
╠════╬══════╣
║  1 ║ ABC  ║
║  2 ║ DEF  ║
║  3 ║ GHI  ║
╚════╩══════╝ 
```

员工服务

```
╔══════════╦═════════════╦═════╗
║ STAFF_ID ║ SERVICES_ID ║ QTY ║
╠══════════╬═════════════╬═════╣
║        1 ║           1 ║   2 ║
║        1 ║           3 ║   3 ║
║        2 ║           3 ║   1 ║
║        3 ║           2 ║   4 ║
╚══════════╩═════════════╩═════╝ 
```

如何查询所有这些表以获得如下结果？

结果：

```
╔══════╦═════════════╦════════╗
║ NAME ║ DESCRIPTION ║  QTY   ║
╠══════╬═════════════╬════════╣
║ ABC  ║ A           ║ 2      ║
║ ABC  ║ B           ║ (null) ║
║ ABC  ║ C           ║ 3      ║
║ DEF  ║ A           ║ (null) ║
║ DEF  ║ B           ║ (null) ║
║ DEF  ║ C           ║ 1      ║
║ GHI  ║ A           ║ (null) ║
║ GHI  ║ B           ║ 4      ║
║ GHI  ║ C           ║ (null) ║
╚══════╩═════════════╩════════╝ 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:28:48.867

```
SELECT  a.Name, b.Description, c.Qty
FROM    Staff a
        CROSS JOIN Services b
        LEFT JOIN StaffServices c
            ON a.ID = c.Staff_ID AND
                b.ID = c.Services_ID
ORDER   BY a.Name, b.Description 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a8cc1/3)

# java - Jframe中的后台操作

> ID：14982232
> 
> 赞同：0
> 
> 时间：2013-02-20T14:26:27.583
> 
> 标签：java, swing

我有一个 jframe 和 jtextpane，我想运行一个在 pc 中检查端口的方法，直到用户关闭 jframe，我正在尝试使用 windowlistner 但该方法只运行一次，我希望它一直运行到用户关闭应用程序

```
frame = new JFrame();

        frame.setResizable(false);
        frame.setBounds(100, 100, 552, 444);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        frame.addWindowListener(new WindowListener() {

            @Override
            public void windowOpened(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowIconified(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowDeiconified(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowDeactivated(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowClosing(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowClosed(WindowEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void windowActivated(WindowEvent arg0) {
                checkport(); // this run at first time only!

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:40:23.797

您应该使用单独的线程来检查在显示框架时启动的端口。在 windowClosing 事件中，您停止线程。

示例代码：

```
 frame = new JFrame();
    frame.setResizable(false);
    frame.setBounds(100, 100, 552, 444);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);
    final CheckPort checkPort = new CheckPort();
    final Thread thread = new Thread( checkPort );
    thread.start();
    frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing( WindowEvent e ) {
            checkPort.stop();
            thread.interrupt();
        }
    }); 
```

可运行以检查端口。

```
 public class CheckPort implements Runnable {
        private boolean checkPort = true;

        public void run() {
            while( checkPort ) {
                checkPort();
                try {
                    Thread.sleep( 100 );
                } catch( InterruptedException ex ) {
                }
            }
        }

        public void checkPort() {
            // do check port here
        }

        public void stop() {
            checkPort = false;
        }
    } 
```

# iphone - 从 NSArray 中移除 UIView

> ID：14982237
> 
> 赞同：0
> 
> 时间：2013-02-20T14:26:35.133
> 
> 标签：iphone, ios, cocoa-touch, uiview, nsarray

我有一个`UIView`电话`SGAdressLabel`，我存储在`emailLabelsArray`.

在某些时候，我想`UIViews`从他们的超级视图中删除所有内容，同时将它们保留在我的数组中。我做了这样的事情，没有任何反应：

```
for (SGAdressLabel *tmpLabel in emailLabelsArray)
    {
        NSLog(@"Removing labels!");
        [tmpLabel removeFromSuperview];
    } 
```

NSLog 消息出现的次数与数组中的对象一样多，但仍然没有任何反应。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:28:39.100

尝试 ：

```
for (SGAdressLabel __strong *tmpLabel in emailLabelsArray)
{
    NSLog(@"Removing labels!");
    tempLabel = (SGAdressLabel *)tmpLabel;
    [tmpLabel removeFromSuperview];
} 
```

# vba - 在 Word 文档中插入复选框标题

> ID：14982244
> 
> 赞同：1
> 
> 时间：2013-02-20T14:26:40.527
> 
> 标签：vba, ms-word

下面在 Word 文档中插入一个自动文本元素

```
NormalTemplate.AutoTextEntries("ap_pressurefilter").Insert _ 
        Where:=Selection.Range, RichText:=True 
```

但是如何在文档中插入复选框（checkbox1.Caption）的标题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:39:17.007

解决了！

```
Selection.Text = checkbox.Caption 
```

# hibernate - 时间参数设置为 null 的 nativeQuery 中的“参数数量或类型错误”

> ID：14982246
> 
> 赞同：1
> 
> 时间：2013-02-20T14:26:41.197
> 
> 标签：hibernate, jpa, stored-procedures, oracle11g, nativequery

给定以下 Oracle SQL 存储过程签名：

```
PROCEDURE Update_Desactivation_Date(
    code_util              IN NUMBER,
    t_no_piste             IN VARCHAR2,
    date_depart            IN DATE); 
```

使用以下代码从 Java JPA2 Hibernate 上下文调用：

```
entityManager.createNativeQuery("CALL Update_Desactivation_Date(
        + ":code_util, "
        + ":t_no_piste, "
        + ":date_depart"
        + ")")
    .setParameter("code_util", 30320)
    .setParameter("t_no_piste", "087046")
    .setParameter("date_depart", null)
    .executeUpdate(); 
```

执行产生以下异常：

```
WARN : org.hibernate.util.JDBCExceptionReporter - SQL Error: 6553, SQLState: 65000
ERROR: org.hibernate.util.JDBCExceptionReporter - ORA-06553: PLS-306: wrong number or types of arguments in call to 'UPDATE_DESACTIVATION_DATE'

Exception in thread "main" javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute native bulk manipulation query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1214)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1147)
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1224)
    at org.hibernate.ejb.AbstractQueryImpl.executeUpdate(AbstractQueryImpl.java:108)
    at com.sw.chuv.badges.backend.dao.ExecuteUpdateInProcedure.main(ExecuteUpdateInProcedure.java:25)
Caused by: org.hibernate.exception.SQLGrammarException: could not execute native bulk manipulation query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:219)
    at org.hibernate.impl.SessionImpl.executeNativeUpdate(SessionImpl.java:1310)
    at org.hibernate.impl.SQLQueryImpl.executeUpdate(SQLQueryImpl.java:396)
    at org.hibernate.ejb.QueryImpl.internalExecuteUpdate(QueryImpl.java:188)
    at org.hibernate.ejb.AbstractQueryImpl.executeUpdate(AbstractQueryImpl.java:99)
    ... 1 more
Caused by: java.sql.SQLException: ORA-06553: PLS-306: wrong number or types of arguments in call to 'UPDATE_DESACTIVATION_DATE'

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1044)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1329)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3665)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1352)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:233)
    at org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:210)
    ... 5 more 
```

怎么会，因为所有参数都设置正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:26:41.197

日期参数的`null`值是罪魁祸首。您必须发送一个空字符串：

```
entityManager.createNativeQuery("CALL Update_Desactivation_Date("
        + ":code_util, "
        + ":t_no_piste, "
        + ":date_depart"
        + ")")
    .setParameter("code_util", 30320)
    .setParameter("t_no_piste", "087046")
    .setParameter("date_depart", "")
    .executeUpdate(); 
```

此问题出现在所有时间类型 ( `DATE`, `TIME`, `TIMESTAMP`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:46:41.270

另一种可能性是在 SQL 过程中定义默认参数：

```
PROCEDURE Update_Desactivation_Date(
      code_util              IN NUMBER,
      t_no_piste             IN VARCHAR2,
      date_depart            IN DATE DEFAULT NULL); 
```

# c# - 如何判断我的应用程序是否已从剪贴板侦听器链中删除？

> ID：14982250
> 
> 赞同：2
> 
> 时间：2013-02-20T14:26:48.520
> 
> 标签：c#, windows, winapi, clipboard

我正在编写一个小型实用程序来监视我的剪贴板。这目前工作得很好，但一位朋友告诉我，它会在剪贴板更改时随机停止显示警报，并且重新启动可以修复它。
我无法重现，但最终我自己遇到了它 - 应用程序已停止接收`WM_DRAWCLIPBOARD`事件。

如何判断我的应用程序何时已从侦听器链中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:24:46.637

这是剪贴板侦听器链的危害之一：一个错误的应用程序可能会损坏链。而不是使用`SetClipboardViewer`函数，使用`AddClipboardFormatListener`which就没有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-25T12:22:33.320

如果您正在调试使用 SetClipboardViewer 的应用程序并且应用程序崩溃，或者您在调试器中停止应用程序，或以其他方式绕过剪贴板链的恢复，Windows 中的性能会下降，以至于看似无关的功能Windows（例如 Alt-Tab 或恢复最小化窗口）停止工作。如果您重新启动 Windows，它们会回来。

以这种方式将自身插入剪贴板链的应用程序应在主窗体的 Dispose 期间或在另一个适当的时间调用 ChangeClipboardChain，以避免此问题。如果您在调试器中停止应用程序，则不会调用 Dispose。

我还没有尝试过 AddClipboardFormatListener；我第一次听说它；我将尝试它，看看我是否可以在调试时避免我自己的应用程序中的问题。

# c# - 带有 net.tcp 的 EndpointAddress 中的德语变音符号

> ID：14982252
> 
> 赞同：6
> 
> 时间：2013-02-20T14:26:50.707
> 
> 标签：c#, wcf

我正在尝试创建类 EndpointAddress 的实例，其中参数包含德语变音符号。

*例如*：

```
EndpointAddress endpointAddress = new EndpointAddress("net.tcp://süd:8001/EmployeeService"); 
```

它总是抛出给定 uri 无法解析的异常。我试图用编码值替换变音符号，但我得到了同样的异常：

> 无效的 URI：无法解析主机名。

以前有人遇到过同样的问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:34:41.980

解析器可能不知道如何使用[国际化域名](http://en.wikipedia.org/wiki/Internationalized_domain_name)(IDN)。如果你想拥有这样的主机名，你将不得不自己进行 Punycode 编码。我没用过，但是有一个核心函数[IdnMapping.GetAscii](http://msdn.microsoft.com/en-us/library/system.globalization.idnmapping.getascii%28v=vs.90%29.aspx)看起来很合适——比如

```
EndpointAddress endpointAddress = new EndpointAddress(
    "net.tcp://" + IdnMapping.GetAscii("süd") + ":8001/EmployeeService"
); 
```

也许会起作用（如果没有，请原谅我，C# 不是我的语言）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:41:32.767

就像一个额外的说明。WCF 在 .Net 4.5 中添加了对 IDN 的支持（用于托管服务 + WCF 客户端与具有 IDN 名称的服务通信）。本[文档](http://msdn.microsoft.com/en-us/library/hh556231.aspx)有一些关于此的信息。

因此，一旦您针对 .net 4.5 编译应用程序，此异常就会消失

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:50:24.663

正如建议的那样，您必须在使用这种 URI 之前启用 IRI 和 IDN 解析。

将此添加到您的 app.config 中：

```
 <configuration>
     <uri>
         <idn enabled="All" />
         <iriParsing enabled="true" />
     </uri>
 </configuration> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-20T14:30:46.517

尝试使用

```
string uri = System.Uri.EscapeDataString("net.tcp://süd:8001/EmployeeService"); 
```

[在这里](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx)寻找进一步的参考。

# locking - 更新 Redis 键/值时获取锁

> ID：14982260
> 
> 赞同：8
> 
> 时间：2013-02-20T14:27:12.733
> 
> 标签：locking, timeout, redis, servicestack

在更新和获取键/值时，我正在使用 ServiceStack Redis 中的 AcquireLock 方法，如下所示：

```
public virtual void Set(string key, T entity)
{
    using (var client = ClientManager.GetClient())
    {
        using (client.AcquireLock(key + ":locked", DefaultLockingTimeout, DefaultLockExpire))
        {
            client.Set(key, entity);
        }
    }
} 
```

我已经扩展了 AcqurieLock 方法来接受额外的参数来锁定密钥的到期。所以我想知道我是否需要AcquireLock？我的班级在 Get<>、GetAll<>、ExpireAt、SetAll<> 等每个操作中都使用 AcquireLock。

但这种方法并非每次都有效。例如，如果锁中的操作抛出异常，则密钥保持锁定状态。对于这种情况，我在 AcquireLock 方法中添加了 DefaultLockExpire 参数以使“锁定”密钥过期。

有没有更好的解决方案，或者我们什么时候需要在多线程编程中获取像“锁”块这样的锁。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T22:40:00.950

正如 The Real Bill 的回答所说，Redis 本身不需要锁。ServiceStack 客户端在锁定方面提供的不是 Redis，而是您的应用程序。在 C# 应用程序中，您可以在本地锁定事物，`lock(obj)`这样就不会同时发生某些事情（一次只有一个线程可以访问锁定的部分），但这只有在您有一个网络服务器时才有效。如果您想防止某些事情同时发生，您需要一个位于网络服务器之外的锁定机制。Redis 非常适合这种情况。

我们有一个案例，检查客户是否已经有购物车，如果没有，则创建它。在检查和创建它之间，有一段时间另一个请求也可能发现购物车不存在并且也可能继续创建一个。这是锁定的经典案例，但简单的情况`lock`在这里不起作用，因为请求可能来自完全不同的 Web 服务器。因此，为此，我们使用**ServiceStack Redis 客户端**（带有一些抽象）来使用 Redis 进行锁定，并且一次只允许一个请求进入“创建购物车”部分。

因此，要回答您的实际问题：不，您不需要锁定来获取/设置 Redis 的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T19:45:38.183

我不会将锁用于获取/设置操作。Redis 会以原子方式执行这些操作，因此在设置或获取时不会“在你下面改变”。我已经构建了数百个客户端同时更新/操作值的系统，并且从不需要锁来执行这些操作（尤其是过期）。

我不知道 Service Stack redis 如何实现它的锁定，所以我不能说它为什么会失败。但是，我不确定我是否会相信它，因为 Redis 端不需要真正的锁定来进行数据操作。Redis 是单线程的，因此在那里锁定没有意义。

如果您正在执行获取值的复杂操作，请基于它对事物进行操作，然后在一段时间后对其进行更新并且同时不能更改值我建议您阅读和摸索[http://redis.io /topics/transactions](http://redis.io/topics/transactions)看看你想要的是否是 Redis 的优点，你的代码是否需要重构以消除问题，或者至少找到更好的方法来做到这一点。

例如，[SETNX](http://redis.io/commands/setnx)可能是您获得想要的东西所需的路线，但如果没有详细信息，我不能说它会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T01:46:21.087

正如@JulianR 所说，ServiceStack.Redis 中的锁定**仅适用于应用程序级分布式锁**（即使用数据库或`.lock`分布式文件系统上的空文件进行替换），它仅适用于其他进程中的其他 ServiceStack.Redis 客户端使用相同的密钥/API 来获取锁。

对于正常的 Redis 操作，您永远不需要这样做，因为它们都是原子的。如果您想确保 redis 操作的组合以原子方式发生，而不是[在 Redis Transaction 中组合它们，](https://github.com/ServiceStack/ServiceStack.Redis/wiki/RedisTransactions)或者您可以[在服务器端 Lua 脚本中执行它们](https://github.com/ServiceStack/ServiceStack.Redis/#new-iredisclient-lua-apis)- 两者都允许原子执行批处理操作。

# java - Spring Security @Secured 注解和 Scala 控制器

> ID：14982262
> 
> 赞同：2
> 
> 时间：2013-02-20T14:27:14.947
> 
> 标签：java, spring, scala, spring-security, annotations

在混合 Java/Scala Spring (v3.2) 项目中，我想创建一个基于 scala 的控制器，并使用 @Secure 注释对其进行保护。对于 java 控制器，这工作得很好，但是当我将 @Secure 注释添加到 scala 控制器时，它会在应用程序启动时从 URL 映射中消失。

示例代码：

```
@Controller
@Secured(Array("ROLE_USER"))
class TestController {
  @RequestMapping(value = Array("/show"), method = Array(RequestMethod.GET))
  def show = {
    "helloTemplate"
  }
} 
```

如果我为每个方法添加安全注释也是一样的——整个控制器类将从 URL 映射中消失（即使有不安全的方法）。日志中没有异常或警告。如果我通过 xml 配置中的 spring-security intercept-url 保护此 URL - 一切正常（控制器上没有 @Secure 注释）。通过 xml 文件和注释驱动配置的 Spring 和 spring-security 配置已打开。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-05T03:48:47.140

在 Spring 4/Spring 中，您必须启用`proxyTargetClass = true`使用 CGLIB 类代理。这在使用 scala 时优于 java 类代理。

SpringBoot

```
@EnableGlobalMethodSecurity(securedEnabled = true, proxyTargetClass = true) 
```

# google-app-engine - 为什么“计费”实例的数量远远大于“活动”实例的数量？

> ID：14982263
> 
> 赞同：9
> 
> 时间：2013-02-20T14:27:20.277
> 
> 标签：google-app-engine

在我的应用程序上执行负载测试时，我注意到*Instances仪表板图表显示**活动*实例数和*计费*实例数之间存在很大差异：

![截屏](../Images/0abf18307476ce11aebd2893e2d59aa4.png)

*活跃度*和*总量*是什么意思？

此外，在花了一天的时间运行负载测试后，我看到了以下内容：

![在此处输入图像描述](../Images/cde2bc5814621f0290cc1e33fd20be99.png)

在第一个峰值中，计费实例的数量几乎与总实例的数量相匹配。然后，在后续加载中，计费实例的数量介于*total*和*active*之间。

*2013-02-21 更新*：我今天做了另一批负载测试，但我仍然看到*计费*实例相对于*总数*和 _active 的位置存在差异：

![在此处输入图像描述](../Images/7cca819541a3fb16fa878777979662f6.png)

这些数字是如何计算的？考虑到我试图根据这些数字预测我们的运营成本，应该如何解释它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:55:18.370

似乎（*我相信*）如果您在应用程序设置中有 F2 实例，则每个 F2 活动实例都计为 2 个计费实例。如果您设置 F4 实例，则它计为 4 个计费实例。等等。

总实例数是已实例化但未计费的实例数 - 一种来自 Google 的“礼物”。如果有更多请求需要更多实例，GAE 将不需要启动一个新实例，而是使用那些“非活动”中的 1。当负载增加时，GAE 会启动新实例，但当负载下降时，GAE 会保留实例一段时间，但不会向您收取费用。但如果负载没有恢复，它们最终会被关闭。

# c# - 替换令牌“描述”没有价值

> ID：14982266
> 
> 赞同：37
> 
> 时间：2013-02-20T14:27:21.407
> 
> 标签：c#, .net, nuget

尝试通过 NuGet.exe 从项目 (*.csproj) 创建和发布 NuGet 包，我收到以下警告：

> 替换标记“描述”没有价值。

我怎样才能摆脱这个警告？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-20T14:27:21.407

如果在使用 NuGet 打包*之前*未构建 Visual Studio 项目，则会出现此警告。只需重建您的项目并重新打包。

1.  转到**Build**然后**Rebuild**。
2.  从命令提示符：`nuget pack your-project.csproj`.

然后它应该工作。

请注意[，此行为已在 CodePlex 中作为问题提交](http://nuget.codeplex.com/workitem/1999)。

*注意：根据下面 Boris Callens 的回复，可以使用`-Build`NuGet 进行构建*

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-31T20:01:59.533

确保在调用 nuget.exe pack *.csproj 时在 Properties\AssemblyInfo.cs 文件中为您的目标项目定义了程序集描述。

```
[assembly: AssemblyDescription("Here goes the NuSpec $description$ token.")] 
```

另请查看有关标记化 NuGet 清单的 NuGet 文档以获取更多信息：[http ://docs.nuget.org/docs/reference/nuspec-reference#Replacement_Tokens](http://docs.nuget.org/docs/reference/nuspec-reference#Replacement_Tokens)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-28T12:58:29.853

$description$ 值替换为 AssemblyInfo.cs 中的 AssemblyDescription 值。但是，需要在创建包之前构建项目。要让 nuget 为您执行此操作，您可以使用 -build 标志

```
path:\to\project\nuget.exe [project.csproj] -build 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-12T08:54:00.383

我在“替换令牌'作者'没有价值”上有类似的问题。我使用**nuget pack projectfilename.csproj -Build**并解决了问题，希望对您有所帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-20T16:37:34.863

另外，请确保您传递了您的项目名称。**csproj**文件而不是项目名称。**nuspec**文件。这是正确的方法：

```
nuget pack projectName.csproj 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-31T17:39:21.157

我的构建特定于 x86 或 x64，它们将 dll 放在不同的 bin 子目录中。它期望 dll 位于“任何 CPU”的默认目录中。我不确定您是否可以更改它的外观，但我只是将我的版本更改为 Any CPU 以便它可以工作。

# javascript - 谷歌地图标记

> ID：14982268
> 
> 赞同：1
> 
> 时间：2013-02-20T14:27:23.467
> 
> 标签：javascript, google-maps

如何在鼠标悬停事件中更改 google.maps.SymbolPath.CIRCLE 标记的颜色？我阅读了 setIcon 方法，但我不想添加新图像只是为了改变圆圈的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:01:05.870

没有方法可以更改现有符号的特定属性。

您必须检索当前符号 ( `marker.getIcon()`) 设置新属性（对于圆形，这将是`strokeColor`），并使用修改后的符号作为参数`marker.setIcon()`

# windows - 如何使用 REST+cURL 更新 TeamCity 构建参数

> ID：14982272
> 
> 赞同：1
> 
> 时间：2013-02-20T14:27:32.530
> 
> 标签：windows, rest, curl, command-line, teamcity

我在 TeamCity 的一个构建配置中有一个名为“testing”的配置参数。在查看了[此处](http://confluence.jetbrains.com/display/TW/REST+API+Plugin#RESTAPIPlugin-BuildConfigurationAndTemplateSettings)的 TeamCity REST API 文档后，我可以在 Windows 上使用以下 cURL 命令行命令获取有关此参数的信息：

```
(1) curl -X GET -H "Authorization: Basic (...)" http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/parameters
(2) curl -X GET -H "Authorization: Basic (...)" http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/parameters/testing 
```

回复：

```
(1) <?xml version="1.0" encoding="UTF-8" standalone="yes"?><property name="testing" value="11"/></properties>
(2) 11 
```

但是，当我尝试使用以下命令更新此“测试”构建参数时，我收到一条错误消息：

```
curl -X PUT -d "1" -H "Authorization: Basic (...)" http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/parameters/testing 
```

回复：

```
Error has occurred during request processing (Unsupported Media Type).
Error: javax.ws.rs.WebApplicationException
Not supported request. Please check URL, HTTP method and transfered data are correct. 
```

我已经成功地使用了类似的命令来更新相同构建配置的 buildNumberCounter 设置：

```
curl -X PUT -d "1" -H "Authorization: Basic (...)" http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/settings/buildNumberCounter 
```

这就是为什么我认为我可以以类似的方式对构建参数做同样的事情。我在这里想念什么？

**更新：**

我设法使用 Fiddler 更新了值为“1”的“测试”构建参数。我撰写的请求内容如下：

*   要求：`PUT`
*   网址：`http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/parameters/testing`
*   请求标头：`Authorization: Basic (...)`
*   请求正文：`1`

所以我上面的 cURL 命令的问题可能在**-d "1"**选项附近。但是哪里？

**更新 2：**

我不确定这是否有什么不同，但我在 Windows 7 上使用[这个](http://www.paehl.com/open_source/?CURL_7.28.1)cURL 构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:13:18.677

作为一种解决方法，我们现在没有修复失败的 cURL 命令，而是使用[Node.js](http://nodejs.org/)来编写 REST 请求并将其发送到 TeamCity。

需要馈送到 node.exe 的脚本如下：

```
// Equivalent cURL command:
// curl -X PUT -d "1" -H "Authorization: Basic (...)" http://teamcity:8080/httpAuth/app/rest/buildTypes/id:bt7/parameters/testing

var http = require('http'),
    options = {
        hostname: 'teamcity',
        port: 8080,
        path: '/httpAuth/app/rest/buildTypes/id:bt7/parameters/testing',
        method: 'PUT',
        headers: { 'Authorization': 'Basic (...)' }
    },
    req;

req = http.request(options, function(res) { });

// write data to request body
req.write('1');
req.end(); 
```

尽管解决方法完美无缺，但我仍然想知道上面的 cURL 命令有什么问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T14:25:12.300

我也很难弄清楚这一点，但我找到了答案。而不是在前面使用 -d 和 -H 。在末尾使用 --data 和 --header ，如下所示。我在 TeamCity 文档中发现了这一点，该文档隐藏在[“点击展开”示例](http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-Examples)中。

设置内部版本号计数器：

```
curl -v --basic --user <username>:<password> --request PUT http://<teamcity.url>/app/rest/buildTypes/<buildTypeLocator>/settings/buildNumberCounter --data <new number> --header "Content-Type: text/plain" 
```

设置内部版本号格式：

```
curl -v --basic --user <username>:<password> --request PUT http://<teamcity.url>/app/rest/buildTypes/<buildTypeLocator>/settings/buildNumberPattern --data <new format> --header "Content-Type: text/plain" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T14:18:17.400

对于像您所询问的那样的非 XML 参数，只需添加：--Header "Content-Type: text/plain"

对于 XML 参数，您需要将其切换为：--Header "Content-Type: application/xml"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:34:14.130

我猜`REST API`期望`XML`作为输入，添加

```
-H "Content-type:text/xml" 
```

并将 XML 作为输入。如果你有一个`XML`文件`file.xml`：

```
curl -d "@/path/to/file.xml" -H "Content-type:text/xml" (...) 
```

# maven - 使用 Maven 2.2 从 Windows 机器将文件 SCP 到 Linux 服务器时总是询问密码：

> ID：14982273
> 
> 赞同：1
> 
> 时间：2013-02-20T14:27:32.950
> 
> 标签：maven, ssh, passwords, scp, private-key

我按照以下步骤操作：

1.  使用 git bash 在 Windows 机器上使用用户 ID ABC 创建 SSH 密钥。

2.  使用用户 ID root 将公钥复制到 linux 服务器：

    `scp ~/.ssh/id_rsa.pub root@Linuxserver:~/.ssh/.`

    它要求输入密码并复制文件。

3.  使用 git bash SSH root@Linuxserver -> 输入 Linux 服务器密码 -> 登录到 linux 服务器。

4.  将公钥复制到 Linux 服务器的 .ssh 中的 authorized_keys：

    `cat id_rsa.pub >> authorized_keys`

5.  SSH root@Linuxserver 使用 git bash -> 无需输入密码即可登录

6.  通过 Maven 的 SCP 不能无缝运行，并且总是要求输入密码。即使是 Linux root 的密码也不起作用，它会一次又一次地要求输入密码。

下面在 Maven 设置的文件中：

```
<server>
    <id>Linuxserver</id>
    <username>ABC</username>
    <privateKey>${user.home}/.ssh/id_rsa</privateKey>
    <filePermissions>664</filePermissions>
    <directoryPermissions>775</directoryPermissions>
    <configuration></configuration>
</server> 
```

以下是 pom.xml 的摘录：

```
<extensions>
      <extension>
       <groupId>org.apache.maven.wagon</groupId>
       <artifactId>wagon-ssh</artifactId>
       <version>1.0-beta-6</version>
     </extension>
</extensions>

...

<plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>wagon-maven-plugin</artifactId>
      <version>1.0-beta-3</version>
      <configuration>
         <serverId>Linuxserver</serverId>
         <fromFile>${project.parent.basedir}/projectname/filename</fromFile>
         <url>scp://Linuxserver.com/testdirectory</url>
       </configuration>
       <executions>
         <execution>
           <id>upload-file-to-server</id>
           <phase>verify</phase>
           <goals>
             <goal>upload-single</goal>
           </goals>
         </execution>
       </executions>
</plugin> 
```

我希望 SCP 在没有任何用户交互的情况下发生。简而言之，问题似乎是 Maven SCP 没有获取私钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:29:25.393

让我们举个例子：

`localuser $ ssh remoteuser@server.com`

现在 SCP 或 SSH 使用检查两件事（考虑公钥授权）：

1.  使用发出 ssh 命令的私钥，通常为 ~/.ssh/id_rsa。在示例中，它将是 /home/localuser/.ssh/id_rsa

2.  用户的公钥，在您登录的用户的 ~/.ssh/authorized_keys 文件中。在我们的例如远程服务器中，它将是 /home/remoteuser/.ssh/authorized_keys

我对 Maven 配置了解不多，但您似乎正在尝试以 ABC 用户身份登录，在这种情况下，ABC 用户应该在其 authorized_keys 文件中拥有您本地用户的密钥

# sql-server - SQL Server 2008 登录用户映射不持久

> ID：14982282
> 
> 赞同：6
> 
> 时间：2013-02-20T14:27:56.250
> 
> 标签：sql-server

我正在尝试将域用户授予 SQL Server 2008。该用户应该能够使用服务器管理工​​作室登录到数据库，并运行对数据库执行 SELECT 查询的 PowerShell 脚本。我的问题是我的设置不存在。

在服务器管理工​​作室中，我右键单击安全->登录->右键单击->属性->用户映射->勾选我的数据库，这恰好是第一个，授予“db_datareader”和“公共”。单击确定。

没有错误弹出。但是当我再次检查用户映射时，我的数据库不再勾选！我错过了什么？真的很纳闷……一定是很简单的事情……

![在此处输入图像描述](../Images/1e6b09bd5ee9bda056d7556bcc3be315.png)

- 更新 - ：

soved：删除登录+用户，将它们添加回来，其余的......现在可以了。很多谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-18T05:23:06.700

当用户没有连接权限或权限已被撤销时，有时会发生这种情况。

```
Grant connect to [user] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:46:01.473

```
use master;
GO

create login [<domain\user>] from windows;
GO

use [<yourdb>];
GO

create user [<domain\user>] for login [<domain\user>];
GO

ALTER ROLE db_datareader ADD MEMBER [<domain\user>];
GO 
```

# lucene - 在 lucene 索引中搜索“AND”

> ID：14982286
> 
> 赞同：0
> 
> 时间：2013-02-20T14:28:11.300
> 
> 标签：lucene

我有使用 StandardAnalyzer 索引的 lucene 索引。该索引由一个值“AND”组成。当我尝试使用 MultiFieldQueryParser 搜索字段值和时，搜索会导致错误。

例如：字段 1：* 与字段 2：与

归档 1：* 与字段：“与”

我尝试过逃避，但那是逃避字段值。我也尝试过双排（“AND”）。但无法成功获得正确的价值。

在这方面的任何建议都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:45:04.313

我怀疑这里可能有两个问题：

*   [查询语法](http://lucene.apache.org/core/4_1_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#Boolean_operators)，我想你可以通过将“and”放在小写字母中来进一步了解。标准查询解析器中的布尔项必须大写。无论如何，鉴于标准分析器的步骤之一是降低区分大小写，这应该不是问题
*   下一个问题是停用词：我怀疑“and”被标准分析器停用词列表从分析的术语集中排除。您可以通过在不排除“和”作为术语的标准分析器中使用不同的停用词列表来解决此问题。

祝你好运，

# android - 开始活动时相机预览崩溃

> ID：14982288
> 
> 赞同：1
> 
> 时间：2013-02-20T14:28:16.320
> 
> 标签：android, camera, surfaceview

我正在尝试在姜饼 2.3.3 手机上显示相机预览。但是每次活动开始时，我的应用程序都会在设备上崩溃。

这是我的xml：

```
<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" 
android:layout_marginLeft="10dp">

<ImageView
  android:id="@+id/loadbtn"
  android:src="@drawable/loadbtn"
  android:layout_width="50dp"
  android:layout_height="50dp"
  android:layout_margin="10dp"
 />

<ImageView
  android:id="@+id/capturebtn"
  android:src="@drawable/capturebtn"
  android:layout_width="50dp"
  android:layout_height="50dp"
  android:layout_margin="10dp"
 />

<ImageView
  android:id="@+id/editbtn"
  android:src="@drawable/editbtn"
  android:layout_width="50dp"
  android:layout_height="50dp"
  android:layout_margin="10dp"
 />

<ImageView
  android:id="@+id/closebtn"
  android:src="@drawable/closebtn"
  android:layout_width="50dp"
  android:layout_height="50dp"
  android:layout_margin="10dp"
  android:onClick="backToStart"
 />

</LinearLayout>

 <SurfaceView
  android:id="@+id/camerapreview"
  android:layout_width="300dp"
  android:layout_height="300dp"
  android:layout_alignParentBottom="true"
  android:layout_centerHorizontal="true"
  android:layout_marginBottom="10dp"
  /> 
```

我的代码：

```
public class PhotoHome extends Activity implements SurfaceHolder.Callback {

Camera camera;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean previewing = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_photo_home);

    getWindow().setFormat(PixelFormat.UNKNOWN);
     surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
     surfaceHolder = surfaceView.getHolder();  
     surfaceHolder.addCallback(this);

}

public void backToStart(View v)
{
    finish();
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
         int height) {
    // TODO Auto-generated method stub
    if(previewing){
         camera.stopPreview();
         previewing = false;
        }

        if (camera != null){
            Parameters parameters = camera.getParameters();
            Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

            if(display.getRotation() == Surface.ROTATION_0)
            {
                parameters.setPreviewSize(height, width);                           
                camera.setDisplayOrientation(90);
            }

            if(display.getRotation() == Surface.ROTATION_90)
            {
                parameters.setPreviewSize(width, height);                           
            }

            if(display.getRotation() == Surface.ROTATION_180)
            {
                parameters.setPreviewSize(height, width);               
            }

            if(display.getRotation() == Surface.ROTATION_270)
            {
                parameters.setPreviewSize(width, height);
                camera.setDisplayOrientation(180);
            }

            camera.setParameters(parameters);
            try 
            {           
                camera.setPreviewDisplay(surfaceHolder);          
                camera.startPreview();
                previewing = true;
            }
            catch(Exception e)
            {
                Log.d("Error", "Cannot start preview", e);    
            }
        }
}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    // TODO Auto-generated method stub
    camera = Camera.open();
    try {
        camera.setPreviewDisplay(surfaceHolder);
        } catch (IOException e) {
            camera.release();
            camera = null;
        }

}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    // TODO Auto-generated method stub
     if (camera != null) {
         camera.stopPreview();
         camera.setPreviewCallback(null);
         camera.release();
         camera = null;
        }
} 
```

这是我的权限：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

我正在尝试在屏幕的某个 300 x 300 区域显示相机预览。但正如我所说，该应用程序在设备上崩溃了，但它似乎在模拟器中，由于 300 x 300 区域中的白色背景，它正在工作。有任何想法吗？

更新：Logcat

```
 02-20 23:59:34.969: E/AndroidRuntime(15365): FATAL EXCEPTION: main
    02-20 23:59:34.969: E/AndroidRuntime(15365): java.lang.RuntimeException: setParameters failed
   02-20 23:59:34.969: E/AndroidRuntime(15365):     at android.hardware.Camera.native_setParameters(Native Method)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.hardware.Camera.setParameters(Camera.java:1070)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at com.example.photoexpress.PhotoHome.surfaceChanged(PhotoHome.java:77)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.SurfaceView.updateWindow(SurfaceView.java:558)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644) 
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1895)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewRoot.draw(ViewRoot.java:1542)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1269)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1883)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.os.Handler.dispatchMessage(Handler.java:99)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.os.Looper.loop(Looper.java:130)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at android.app.ActivityThread.main(ActivityThread.java:3737)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at java.lang.reflect.Method.invoke(Method.java:507)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
    02-20 23:59:34.969: E/AndroidRuntime(15365):    at dalvik.system.NativeStart.main(Native Method)
    02-20 23:59:34.979: E/AndroidRuntime(15365): [Blue Error Handler] Make Debugging Report file for main
    02-20 23:59:34.979: E/AndroidRuntime(15365): java.lang.RuntimeException: setParameters failed
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.hardware.Camera.native_setParameters(Native Method)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.hardware.Camera.setParameters(Camera.java:1070)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at com.example.photoexpress.PhotoHome.surfaceChanged(PhotoHome.java:77)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.SurfaceView.updateWindow(SurfaceView.java:558)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.View.draw(View.java:6905)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1895)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewRoot.draw(ViewRoot.java:1542)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1269)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1883)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.os.Handler.dispatchMessage(Handler.java:99)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.os.Looper.loop(Looper.java:130)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at android.app.ActivityThread.main(ActivityThread.java:3737)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at java.lang.reflect.Method.invoke(Method.java:507)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
    02-20 23:59:34.979: E/AndroidRuntime(15365):    at dalvik.system.NativeStart.main(Native Method) 
```

在我的 Logcat 上，据说我在这一行设置了参数失败。camera.setParameters(参数); 我已经使用此代码将相机预览设置为游戏的背景。但我真的不知道发生了什么，现在它不起作用。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:20:32.047

它给出了错误，因为我认为您正在尝试设置无效的预览大小。

[在此处](https://stackoverflow.com/a/2052927/1376688)查看 Roman Nurik 的答案

# wso2 - 使用 ESB 和 IS 进行身份验证和授权

> ID：14982289
> 
> 赞同：0
> 
> 时间：2013-02-20T14:28:23.147
> 
> 标签：wso2, wso2esb, wso2is

我正在尝试跟进中提到的示例：http: [//blog.facilelogin.com/2012/05/authentication-and-authorization-with.html](http://blog.facilelogin.com/2012/05/authentication-and-authorization-with.html)

在跟进每一步之后，当我尝试使用 TryIt 对其进行测试时，身份服务器会抛出以下错误：访问被拒绝。请先登录。

服务器以默认配置运行，但端口除外 - ESB 位于 9443 和 IS 位于 9445。ESB 版本：4.5.1 IS 版本：3.2.3

请让我知道缺少什么配置。谢谢， 普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T07:02:17.820

请参阅[此](http://srinathsview.blogspot.com/2012/05/authentication-and-authorization.html)内容以了解有关使用 ESB 和 IS 模式的身份验证和授权的更多信息。

此外，[该幻灯片](http://www.slideshare.net/wso2.org/security-patterns-with-wso2-esb)集具有有趣的 ESB 安全模式

# java - 使用具有单个域和多个 IP 的 JNLP 下载 Java 应用程序

> ID：14982290
> 
> 赞同：1
> 
> 时间：2013-02-20T14:28:25.603
> 
> 标签：java, jnlp, java-web-start

我们有一个具有多个 jar 并使用 URL 通过 JNLP 启动的 Java 应用程序。每当我们更改 URL 后面的 IP 时，我们所有的 jars 都会再次下载。

检查客户端计算机上的哪些信息以下载 jar？

# razor - 在 tinymce 中使用 RazorEngine

> ID：14982295
> 
> 赞同：2
> 
> 时间：2013-02-20T14:28:48.803
> 
> 标签：razor, tinymce, razorengine

我正在编写一个使用给定电子邮件模板生成多条消息的应用程序。

电子邮件解析器工作正常。我正在使用 RazorEngine 创建电子邮件模板。

问题是我需要使用以下构造（一个简单的 foreach）生成一个表：

```
<table>
<tbody>
<tr><th>Pedido</th><th>NF</th><th>Boleto</th><th>Vencimento</th><th>Valor</th></tr>
@foreach (dynamic item in Model.PagamentosEmAtraso) {
<tr>
<td valign="top" width="76">
<p align="center"><span style="font-size: small;">@item.NumeroPedido</span></p>
</td>
<td valign="top" width="60">
<p align="center"><span style="font-size: small;">@item.NumeroNotaFiscal</span></p>
</td>
<td valign="top" width="88">
<p align="center"><span style="font-size: small;">@item.NumeroBoleto</span></p>
</td>
<td valign="top" width="128">
<p align="center"><span style="font-size: small;">@item.DataVencimento.ToString("dd/MM/yyyy")</span></p>
</td>
<td valign="top" width="119">
<p align="center"><span style="font-size: small;">@item.ValorLiquido.ToString("C2") </span></p>
</td>
</tr>
}
</tbody>
</table> 
```

当我退出 html 编辑器时，tinymce 会弄乱我的代码，“修复”我的代码，如下所示：

```
@foreach (dynamic item in Model.PagamentosEmAtraso) {}
<table> 
```

这是在新版本的 tinymce 上发生的问题 - 它曾经接受这种标记。

是否有任何可行的解决方案让 tinymce 接受可能损坏的 html 而无需尝试修复它？

我的tinymce配置是：

```
function initializeTinyMce() {
    $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url: '/Scripts/tinymce/tiny_mce.js',

        // General options
        theme: "advanced",
        plugins:  " pa geb reak,legacyoutput,style,layer,table,save,advimage,advlink,emotions,iespell,inlinepopups,preview,media,searchreplace,print,c  o nt extmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
        width: "960",
        height: "500",
        entity_encoding: "raw",

        // Theme options
        theme_advanced_buttons1:  " bo ld, italic,underline,strikethrough,sub,sup,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontse  l ec t,fontsizeselect",
        theme_advanced_buttons2:  " cu t,c opy,paste,pastetext,pasteword,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,image,cleanup,help,code,|,insert  d at e,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,||,fullscreen",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,

        // Example content CSS (should be your site CSS)
        //content_css: "/Content/site.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url: "lists/template_list.js",
        external_link_list_url: "lists/link_list.js",
        external_image_list_url: "lists/image_list.js",
        media_external_list_url: "lists/media_list.js",

        // Replace values for the template plugin
        template_replace_values: {
            username: "Some User",
            staffid: "991234"
        }           
    });
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:14:23.100

从 3.4 开始，无法再使用配置设置关闭 tinymce 验证器。html 必须是有效的，但您可以定义 tinymce 验证器接受的有效内容和不接受的内容。仔细查看 tinymce 配置参数 valid_elments 和 valid_children。

# ios - 我们如何在不同的 UIView 类中访问添加到 viewcontroller 类中的数组的值..？

> ID：14982298
> 
> 赞同：0
> 
> 时间：2013-02-20T14:28:54.107
> 
> 标签：ios, arrays, uiview

viewcontroller.m 有以下代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.array=[[NSArray alloc]initWithObjects:@"hi",@"hello", nil];
NSLog(@"%@",self.array);

view *view1=[[view alloc]init];
[view1 addSubview:self.view];
 view1.viewController=self;

} 
```

还有另一个 UIView 类，我正在尝试访问数组：.h 文件：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@class ViewController;

@interface view : UIView{
ViewController *viewController;

}
@property (nonatomic,retain)ViewController *viewController;

@end 
```

和 .m 文件：

```
#import "view.h"
#import "ViewController.h"

@implementation view
@synthesize viewController;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    NSLog(@"%@",[viewController array]);
}

return self;
} 
```

我查看了stackoverflow的其他帖子，只提到了视图控制器之间的值传递；或者数组在 appdelegate 中声明并在类中使用（我想避免）。

上面最后一个代码段中的 NSLog 给出了 null；所以你能帮忙访问这个数组的值吗？提前致谢..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:48:32.713

您可以在 ViewController 中使用此代码来实现

```
#import "view.h"

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *ary = [NSArray arrayWithObjects:@"7",@"5",@"3",@"2", nil];

    view *v=[[view alloc] init];
    [v initView:ary];

} 
```

在您的 view.h 文件中：

```
#import <UIKit/UIKit.h>

@interface view : UIView

-(void)initView:(NSArray *)ary;
@end 
```

在你的 .m 文件中：

```
#import "view.h"
#import "ViewController.h"

@implementation view

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

    }
    return self;
}

-(void)initView:(NSArray *)ary
{
    NSLog(@"%@",ary);
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

日志值将显示如下：

```
2013-02-20 20:11:52.731 SampleProject[9414:f803] (
    7,
    5,
    3,
    2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:39:49.707

这条线

```
view *view1=[[view alloc]init]; 
```

`initWithFrame:`在您设置之前调用所需的初始化程序`view1.viewController`，所以发生的事情是

```
NSLog(@"%@",[viewController array]); 
```

实际上调用

```
NSLog(@"%@",[null array]); 
```

或（注意这是伪代码）

```
NSLog(@"%@",null); 
```

您要做的是`view1.viewController`在分配后使用。最佳实践是制作一个自定义构造函数`UIViewController*`作为参数并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:40:19.380

首先，您在视图上调用该方法并在从未调用过`init`的方法中检查 viewController 。`initWithFrame`（但也许您正在使用默认框架`initWithFrame:`从您的方法内部调用`init`。:)）。其次，您在调用 init 方法**后**
设置`viewcontroller`属性，因此您的方法中仍未初始化。第三，与其将整个 of 传递给您的视图来访问数组（这与 MVC 模式背道而驰），您可能只需在 UIView 子类中创建一个实例变量并仅传递数组即可。**`viewcontroller``initWithFrame``viewcontroller`**

 **然后你可以按照 Dilip 给出的答案，最好使用 setter 方法来设置数组。国际海事组织。**

# php - AJAX 和 Wordpress - 如何从 div ID 加载内容？

> ID：14982299
> 
> 赞同：0
> 
> 时间：2013-02-20T14:28:57.407
> 
> 标签：php, ajax, wordpress, jquery

我无法使用 ajax 从 single.php 中的 div（宽度为特定 ID）获取内容到 index.php 中。现在我有这个代码并且什么都不返回 - “0”。

```
function loadcontent(type,id,slug, action) {
    jQuery.ajax({
        type:'POST', 
        url:srvars.ajaxurl, 
        data: { 
            action:'sr_get_content', 
            id:id, 
            type:type
        }, 
        success: function(response) {
            if ($(window).width() > 768) {
                $('#content .content-inner').hide();
                $('#content .content-inner').html(response);
                initialise('#content');
            }
            var checkwidth = $('.maincontent').width();
            $('#loading').delay(1000).fadeOut(fadeInOutSpeed, function(){
                if ($(window).width() > 768) {
                    if (checkwidth > 0) {
                        reorganizeIsotope('.masonry');
                        $('#content .content-inner').fadeIn(fadeInOutSpeed, function() { resize_jplayer(); reorganizeIsotope('.masonry'); });
                    } else {
                        $('.mainside').animate({'width':srvars.asidewidth+'%'}, animationSpeed, $easingType);
                        $('.mainside-bg').animate({'width':srvars.asidewidth+'%'}, animationSpeed, $easingType);
                        $('.maincontent').animate({'width':srvars.contentwidth+'%'}, animationSpeed, $easingType, function() {
                            reorganizeIsotope('.masonry');
                            $('#content .content-inner').fadeIn(fadeInOutSpeed, function() { resize_jplayer(); reorganizeIsotope('.masonry'); });
                        }); 
                    }
                } else {
                    $('#content .content-inner').hide();
                    $('#content .content-inner').html(response);
                    initialise('#content');
                    if ($(window).width() <= 480) { var topscroll = jQuery('header').height(); } else { var topscroll = 0; }
                    $('html, body').animate({scrollTop: topscroll+'px'}, animationSpeed, $easingType);
                    reorganizeIsotope('.masonry');
                    $('#content .content-inner').slideDown(fadeInOutSpeed, $easingType, function() { 
                        resize_jplayer(); 
                        reorganizeIsotope('.masonry'); 
                    });
                }
            });
        }
    });
}
$("body").on("click", 'a.loadcontent', function() { 
    var href = $(this).attr('href');
    var type = $(this).data('type');
    var id = $(this).data('id');
    var slug = $(this).data('slug');

    if(window.location.hash.substr(1) == slug) { 
        $('html, body').animate({scrollTop: 0}, animationSpeed, $easingType);
    } else {
        window.location.hash = slug;    // set the hash
        //history.pushState({page:href}, href, href);
        loadcontent(type,id,slug,false);
    }

    return(false);
}); 
```

并来自functions.php

```
add_action('wp_ajax_nopriv_sr_get_content', 'loadAjaxPosts');
add_action('wp_ajax_sr_get_content', 'loadAjaxPosts');
function loadAjaxPosts() { 
    switch($_REQUEST['type']) {
        case 'portfolio':
            $output = sf_portfolio_items($_REQUEST['cat'], $_REQUEST['count'], $_REQUEST['page'], true);
        break;
        case 'blog':
            $output = sf_blog_items($_REQUEST['cat'], $_REQUEST['count'], $_REQUEST['page'], true);
        break;
        default:
            $output = 'Incorrect type specified, please contact support.';
        break;

    }
    $output=json_encode($output);
    if(is_array($output)) {
        print_r($output);   
    } else {
        echo $output;
    }
    die;    
} 
```

如何传输内容？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:35:52.787

您的`loadContent()`函数的成功处理程序绝对什么都不做。因此，无论您的 php 脚本发回什么，都将被丢弃。

你需要类似的东西：

```
 success: function(response) {
       $('#whatever').html(response);
    } 
```

另请注意，您`isarray($output)`将永远不会工作。json_encode() 返回一个**STRING** ...绝不是一个数组。

# ios - iOS 自动布局和 UIToolbar/UIBarButtonItems

> ID：14982302
> 
> 赞同：24
> 
> 时间：2013-02-20T14:29:16.093
> 
> 标签：ios, uibarbuttonitem, uitoolbar, autolayout, autoresizingmask

我有一个启用了自动布局的 iOS 视图，并有一个`UIToolbar`带有 a`UISearchBar`并`UISegmentControl`包含在工具栏上的视图。我希望`UISearchBar`具有灵活的宽度，因此我需要添加一个约束来强制执行此操作，但据我所知，您不能`UIToolbar`在 Interface Builder 中的项目中添加约束。选项全部禁用。

在`AutoLayout`我用`autoresizingmasks`.

是否不允许有约束`UIToolbars/UINavigationBars`？

使用自动布局时，这还能如何实现？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T03:00:06.640

自动布局约束仅适用于`UIViews`及其子类。

虽然`UIToolbar`允许某些`UIView`基于项目（例如`UISearchBar`和`UISegmentedControl`），但它们可能必须与`UIBarButtonItems`不继承自的项目共存`UIView`。

直到 autolayout 可以与 一起工作`UIBarButtonItems`，照你做的做。

您的替代方法是使用仅基于`UIViews`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-28T15:01:12.787

这也可以直接从情节提要中完成。

只需在工具栏中拖放项目，将其中一些变成灵活或固定的空间即可获得所需的效果。请参阅下面的两个示例。

![均匀分布的](../Images/1131fd7183c52124ec7fc9aa2b7f24e6.png)

![居中](../Images/037e39de5fc8e1dea4d6142b0d0b41cc.png)

注意：这是我对[Aligning UIToolBar items](https://stackoverflow.com/questions/602717/aligning-uitoolbar-items/27191249#27191249)的回答的副本，我在寻找这样的解决方案时偶然发现了这两个问题

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-19T15:32:36.167

您至少可以在代码中执行此操作；我是那种放弃 Interface Builder 并在代码中使用它的类型。在添加或调整约束时，IB 似乎经常妨碍我。这是我在自定义`UIToolbar`子类的`-initWithFrame:`方法中所做的。

```
- (instancetype)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        [self addSubview:self.label];

        [self addConstraint:[NSLayoutConstraint
                             constraintWithItem:self.label
                             attribute:NSLayoutAttributeCenterX
                             relatedBy:NSLayoutRelationEqual
                             toItem:self
                             attribute:NSLayoutAttributeCenterX
                             multiplier:1 constant:0]];
        [self addConstraint:[NSLayoutConstraint
                             constraintWithItem:self.label
                             attribute:NSLayoutAttributeCenterY
                             relatedBy:NSLayoutRelationEqual
                             toItem:self
                             attribute:NSLayoutAttributeCenterY
                             multiplier:1 constant:0]];
    }
    return self;
} 
```

因为我喜欢尽可能地延迟加载，所以这是我的`self.label`实例变量（在`[self addSubview:self.label]`上面收到消息时调用）。

```
- (UILabel *)label {
    if (_label) return _label;
    _label = [UILabel new];
    _label.translatesAutoresizingMaskIntoConstraints = NO;
    _label.textAlignment = NSTextAlignmentCenter;
    return _label;
} 
```

似乎对我有用。不过，我没有添加任何`UIBarButtonItems`内容，因此您的里程数会有所不同。

# ruby - 在文件中查找并打印与字符串或正则表达式完全匹配的行 (Ruby)

> ID：14982305
> 
> 赞同：5
> 
> 时间：2013-02-20T14:29:21.553
> 
> 标签：ruby, regex, file-io

在 ruby​​ 1.9.3 中，我正在尝试编写一个程序，该程序将从任意字符集中找到所有具有*n*个字符的单词。例如，如果给定字符 [ b, a, h, s, v, i, e, y, k, s, a ] 和 n = 5，我需要找到所有 5 个字母的单词只使用这些字符。[使用来自http://wordlist.sourceforge.net/](http://wordlist.sourceforge.net/)的 2of4brif.txt 单词列表（也包括英国单词和拼写），我尝试了以下代码：

```
a = %w[b a h s v i e y k s a]
a.permutation(5).map(&:join).each do |x|
  File.open('2of4brif.txt').each_line do |line|
    puts line if line.match(/^[#{x}]+$/)
  end
end 
```

这什么都不做（没有错误消息，没有输出，好像被冻结了一样）。我还尝试了基于以下线程的变体：

[在文件中搜索字符串的最佳方法是什么？](https://stackoverflow.com/questions/633396/whats-the-best-way-to-search-for-a-string-in-a-file)

[Ruby 在文件中查找字符串并打印结果](https://stackoverflow.com/questions/10832440/ruby-find-string-in-file-and-print-result)

[如何使用 Ruby 在文本文件中搜索完全匹配的字符串？](https://stackoverflow.com/questions/9434138/how-to-search-for-exact-matching-string-in-a-text-file-using-ruby)

[在文本文件中查找与正则表达式匹配的行](https://stackoverflow.com/questions/6002868/finding-lines-in-a-text-file-matching-a-regular-expression)

[将文件中的内容与正则表达式匹配？](https://stackoverflow.com/questions/3689647/match-a-content-with-regexp-in-a-file)

[如何打开文件并搜索单词？](https://stackoverflow.com/questions/1896555/how-to-open-a-file-and-search-for-a-word-ruby)

我尝试过的每一个变化都导致：

1）冷冻；

2）打印列表中包含 5 个字符排列的所有单词（我假设这就是它正在做的事情；我没有检查所有数千个打印的单词）；或者

3) 打印在列表中的单词中找到的所有 5 个字符的排列（同样，我假设这就是它正在做的事情）。

同样，我不是在寻找*包含*5 个字符排列的单词，而是在寻找本身就是完整单词的 5 个字符排列，因此只有在文本文件中的一行是与排列完美匹配。

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:47:12.553

您在这里并没有真正使用正则表达式。您的程序效率非常低，不仅因为您要为每个单一排列重新打开文件，正如已经指出的那样（并且有 55k 个排列！）；但最重要的是因为你想做的就是

```
/^[bahsvieyksa]{5}$/ 
```

对于文件的每一行。

因此，我建议：

```
File.open('2of4brif.txt').each_line do |line|
  puts line if line.match(/^[bahsvieyksa]{5}$/)
end 
```

作为一种更有效的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:50:26.177

这适用于我使用该页面上的 english.0 文件（抱歉，我找不到您提到的特定文件）：

```
a = %w[b a h s v i e y k s a l d n]
dict = {}
a.permutation(5).each do |p|
  dict[p.join('')] = true
end

File.open('english.0').each_line do |line|
  line.chomp!.downcase!
  puts line if dict[line]
end 
```

结构应该非常清晰 - 我在一个巨大的哈希中预先构建了排列字典（您可能需要根据输入大小重新访问它，但现在内存很便宜），然后我使用了输入是“每行一个单词”来简单地键入该哈希。

另请注意，在我的版本中，我只通读了一次文件。在您的文件中，您按排列扫描文件一次，并且有数千种排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:05:16.677

更简单的是只计算每个字符的出现并进行比较：

```
a = %w[b a h s v i e y k s a l d n]
File.read('2of4brif.txt').split("\n").each do |line|
  puts line if line.size == 5 && line.chars.all?{|x| line.count(x) <= a.count(x)}
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T21:14:49.813

对我来说，以下工作

```
File.open('file.txt').each_line do |line|
  puts line if line[/<regexp>/]
end 
```

# c# - TimerCallback - 可以更改时间吗？

> ID：14982306
> 
> 赞同：0
> 
> 时间：2013-02-20T14:29:24.947
> 
> 标签：c#, timer

我有这个功能...

```
Instance(uint InstanceId) { } 
```

里面是这段代码...

```
 mUpdater = new Timer(new TimerCallback(PerformUpdate), null, TimeSpan.FromMilliseconds(500), TimeSpan.FromMilliseconds(500)); 
```

它每 500 毫秒刷新一次 PerformUpdate

在 PerformUpdate 中，我有一个 IF 语句来计算用户是否定义了特定变量。如果用户有变量，我将如何做到这一点，那么它只会每 300 毫秒而不是 500 毫秒刷新一次。

哦，它不能在 Instance 函数中设置，因为它是每个用户的命令，而 Instance 适用于每个用户。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:32:40.773

这看起来像它的`System.Threading.Timer`，不是`System.Timers.Timer`，正确的？您可以`Change`在 a 上调​​用该方法`System.Threading.Timer`来更改其开始时间和间隔。

```
var variableDefined = true;        
var threadingCallback = new System.Threading.TimerCallback((o) => { });
var threadingTimer = new System.Threading.Timer(threadingCallback, null, 0, 500);
if (variableDefined) {
    threadingTimer.Change(0, 300);
} 
```

# apache - 模组重写。没有 endlash 重定向到 endlash

> ID：14982309
> 
> 赞同：0
> 
> 时间：2013-02-20T14:29:30.503
> 
> 标签：apache, mod-rewrite, seo

由于某些 seo 原因，我需要重定向所有链接，例如

[http://site.com/some/category](http://site.com/some/category) 到 [http://site.com/some/category/](http://site.com/some/category/)

所以我用这个解决了这个问题

```
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*[^/])$ $1/ [L,R=301] 
```

但是这条规则也捕获了像这样的链接

[http://site.com/some/category/some.file](http://site.com/some/category/some.file)并将其重定向到 [http://site.com/some/category/some.file/](http://site.com/some/category/some.file/)

我尝试过这样的事情

```
RewriteCond %{REQUEST_URI} ^([^\.]*)!/$
RewriteRule ^(.*[^/])$ $1/ [L,R=301] 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:09:34.310

关于什么

```
RewriteRule (.*/[^\.]*)$ $1/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:20:53.037

您可以添加另一个重写条件

```
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteCond %{REQUEST_URI} !\.
RewriteRule ^(.*[^/])$ $1/ [L,R=301] 
```

或者你可以改变你的最后一条规则

```
RewriteRule ^([^\.]*[^/\.])$ $1/ [L,R=301] 
```

# r - 在 R 中包含从外部文件运行的源代码

> ID：14982311
> 
> 赞同：0
> 
> 时间：2013-02-20T14:29:32.083
> 
> 标签：r, scoping, reproducible-research

我有一个标准的数据分析程序，需要在各种（约 50 个数据集）上运行。我已经开发了一段时间，现在我想把它变成一个函数，它接受一个数据集并为每个数据集吐出一些合理的表。但是，完成的过程跨越了四个脚本文件，到目前为止，我已经`source`从一个到另一个运行它，但似乎不可能使用`function`.

我有以下问题：

```
foo <- function(data) {
  a <- somevariable
  source("..somefile..") #The code in there uses a, but a is not in the workspace...
  ..
  continue
  ..
} 
```

当您在数据集上运行代码时，它会崩溃。

是否有某种方式（命令）可以在编译时从其他文件中复制粘贴命令（不知道如何以不同的方式调用它，即使它不是真正的编译）函数？我知道我可以自己复制粘贴它，但我不想这样做，因为各种步骤包括神经网络和 ARFIMA 估计，为了代码的可读性，我想将它们保存在单独的文件中。无论如何，复制粘贴后的功能将类似于 200 行代码，这绝对不是用户友好的......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:39:18.260

我建议从一个最小的示例开始，以便您了解编写函数需要什么，如何使用 source() 将函数加载到 R 中，如何使用参数以及如何调用函数。在这样做之后，希望下一步去哪里会更加明显。

要回答您的问题，如果您的脚本包含 200 行代码并且只执行一件事（即它执行一个 FUNCTION），那么您应该考虑将其包装到一个函数中，是的。这实际上会增加而不是降低用户友好性，因为您的脚本现在只能包含一行（函数调用），而不是原来的 200 行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:59:55.403

我猜在这里，但像这样：

```
myfunc <- function() {
if (something) source("path to script")
} else {
if (another thing) source("path to another script")
}
Do calcs and return the result
} 
```

或者脚本的路径可以是函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T10:34:28.627

我理解你的问题，我假设你想使用函数在函数中使用 proc `source`，所以你只需要添加参数`local = T`

# 例子

```
#This is your source code
y<-x+1
#save in your favorite path as "your_path.R"

#Function where you will call the above code
your_function<-function(x){
source("your_path.R",local=T) #plus 1 to x. IMPORTANT: local=T
return(y)
} 
```

# c - 为什么精简 BST 代码不起作用 (C)

> ID：14982315
> 
> 赞同：-2
> 
> 时间：2013-02-20T14:29:41.997
> 
> 标签：c, pointers

```
void add_bst(struct node **tloc, int k, int v)
{
    struct node *nd;
    nd = search_bst(*tloc, k);
    nd = malloc(sizeof(struct node));
    nd->key=k;
    nd->value=v;
    nd->left=NULL;
    nd->right=NULL;
} 
```

我很确定 search_bst 是正确编写的，但这个函数似乎是一个空操作。我究竟做错了什么？抱歉，如果这是非常明显的事情，但我是 C 新手。

编辑：这里是 search_bst：

```
struct node *search_bst(struct node *t, int k)
{
    while (t != NULL){
            if (t->key < k) t = t->right;
            else if (t->key > k) t = t->left;
            else return t;
    }
    return t;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:34:21.180

你搜索

```
 nd = search_bst(*tloc, k); 
```

然后他们立即丢弃搜索结果

```
 nd = malloc(sizeof(struct node)); 
```

你确定那是你想要的吗？
您也可以将搜索排除在您的代码之外！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:31:43.443

您在这里得到了 search_bst 的结果：

```
nd = search_bst(*tloc, k); 
```

然后在这里您再次分配给 nd ，这意味着它不再指向先前的结果：

```
nd = malloc(sizeof(struct node)); 
```

因此，您将丢弃 search_bst 的结果。

# xpath - Xpath 查询以提供逗号分隔的输出

> ID：14982320
> 
> 赞同：4
> 
> 时间：2013-02-20T14:30:13.230
> 
> 标签：xpath

```
<?xml version="1.0" encoding="UTF-8"?> 
<Envelope> 
   <Body> 
      <RetrieveChangeKeysListResponse message="Success"> 
         <keys> 
            <ChangeID type="String">C10286</ChangeID> 
         </keys> 
         <keys> 
            <ChangeID type="String">C10296</ChangeID>
         </keys> 
      </RetrieveChangeKeysListResponse> 
   </Body> 
</Envelope> 
```

从上面的 xml 文件中，下面的 xpath 查询的输出给出了不带分隔符的值。

*询问：*

```
/Envelope/Body/RetrieveChangeKeysListResponse/keys/ChangeID/text() 
```

*输出：* `C10286C10296`

如何在值之间使用分隔符获取输出。

示例： ( `C10286,C10296`)

在这方面需要你的帮助。

谢谢并恭祝安康

里亚斯·侯赛因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:32:54.397

看起来您有两个`ChangeID`节点，如果您调用`XPATH`为

```
/Envelope/Body/RetrieveChangeKeysListResponse/keys/ChangeID/text() 
```

然后它将通过连接在一起输出所有值。

所以调用`XPATH`为

```
/Envelope/Body/RetrieveChangeKeysListResponse/keys/ChangeID 
```

然后`concat()`是`text()`你喜欢的值。

## 更新：

使用 XSLT 1.0，您可以这样做：-

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:apply-templates select="/Envelope/Body/RetrieveChangeKeysListResponse/keys/ChangeID"/>
    </xsl:template>
    <xsl:template match="ChangeID">
        <xsl:if test="position()='1'">
            <xsl:value-of select="'('"/>
        </xsl:if>
        <xsl:choose>
            <xsl:when test="position()=last()">
                <xsl:value-of select="text()"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="concat(text(),',')"/>
            </xsl:otherwise>
        </xsl:choose>
        <xsl:if test="position()=last()">
            <xsl:value-of select="')'"/>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

## 输出：

(C10286,C10296)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-04T10:12:38.610

解决方案：

**string-join((/Envelope/Body/RetrieveChangeKeysListResponse/keys/ChangeID),',')**

输出：

**字符串='C10286,C10296'**

# c - Win Vista - dosbox - gcc - hello world - 控制台应用程序未运行

> ID：14982321
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:30:14.950
> 
> 标签：c, windows, gcc, cross-platform, dosbox

我在 windows xp 文件名称“hello.c”上编写了简单的 Hello World 应用程序：

```
 #include<stdio.h>
 int main(){
      printf("Hello World\n");
      return 0;
 } 
```

使用以下命令编译：

```
gcc hello.c 
```

现在在另一台装有 Windows Vista 的机器上安装了 DosBox 应用程序并尝试运行由 gcc 编译的 a.exe

该应用程序未运行并提供以下消息：

```
This Program cannot be run in DOS mode. 
```

但是当我在 Windows 资源管理器中双击 a.exe 文件时，它会运行并说：

```
 Hello World 
```

为什么会有这个消息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:34:09.633

你为 Windows 而不是 DOS 编译了这个应用程序。不起作用。您需要编译应用程序才能在 DOS 上运行。你为什么要使用 Dosbox？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:34:43.410

您编译了一个 Windows 程序，该程序只能在 Windows 中运行，而不能在 DOS 或模拟 DOS 中运行。直接运行程序，无需 DosBox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:09:14.297

Windows 和 DOS 控制台看起来很相似，并且共享一些相同类型的命令，但它们构建在两个完全不同的操作系统上。

Windows 控制台模式应用程序运行现代 32 位或 64 位代码，并且可以访问所有庞大的 Windows API。

DOS 命令行是 DOS 的一部分，这是一个较旧的操作系统，它（主要）运行 16 位代码。它有自己独立的 API 和约定，用于文件处理、内存管理和硬件支持等。这是 DOSBox 模拟的平台。所以，DOSBox 不会运行 Windows 程序。（也就是说，它可以运行 Windows 本身的早期版本，因为那些是普通的 DOS 程序）。

*   如果你想编译一个在 DOS 上运行的程序，你需要一个那个时代的编译器来支持那个操作系统。Turbo C++ 是一个不错的选择（搜索“turbo c++ 3.0 废弃软件”）。

*   如果您想编译在控制台中运行的 Windows 应用程序，那么您现有的编译器是完美的，但您不需要 DOSBox。改为打开 Windows 命令提示符/行/事物（开始 -> 运行 -> cmd -> Enter）。

# php - MySQL查询 - 获取列值“大于...”

> ID：14982324
> 
> 赞同：0
> 
> 时间：2013-02-20T14:30:22.430
> 
> 标签：php, mysql

我有这个查询：

```
$score = 10;
SELECT timecode, count(tag) as n_tags, tag
FROM dados
WHERE dados.tag = 'tag1' 
AND dados.filename = 'file.mp4'
AND (timecode >= '-5' AND timecode <= '15')
AND (timecode = '$score')
GROUP BY timecode
ORDER BY count(tag) DESC 
```

但是我想将第 6 行更改为：

```
AND (timecode = '$score' AND n_tags > 3) 
```

但这似乎不是正确的方法，它不起作用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:32:23.600

从 WHERE 子句中删除该行并放入 HAVING 子句。HAVING 子句将查看汇总结果。WHERE 没有。

```
SELECT timecode, count(tag) as n_tags, tag
FROM dados
WHERE dados.tag = 'tag1' 
AND dados.filename = 'file.mp4'
AND (timecode >= '-5' AND timecode <= '15')
AND (timecode = '$score')
GROUP BY timecode
HAVING count(tag) > 3
ORDER BY count(tag) DESC 
```

此行是多余的，可以删除：AND (timecode >= '-5' AND timecode <= '15')

```
SELECT timecode, count(tag) as n_tags, tag
FROM dados
WHERE dados.tag = 'tag1' 
AND dados.filename = 'file.mp4'
AND (timecode = '$score')
GROUP BY timecode
HAVING count(tag) > 3
ORDER BY count(tag) DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:33:26.953

您不能在 WHERE 子句中使用聚合字段。`count()`只有在考虑了所有适用的行后，结果才可用。但是`where`过滤是在解析每一行时完成的。陈词滥调，但你试图在孵化之前数数你的鸡。

此类事情必须使用子句来完成，该`HAVING`子句与 a 基本完全相同`where`，但在最终结果发送回客户端之前应用。所以...

```
SELECT ..., count(tag) as n_tags
...
WHERE (timecode = '$score')

HAVING (n_tags > 3) 
```

# eclipse - 由于错误，无法从 Web 服务生成 WSDL

> ID：14982327
> 
> 赞同：2
> 
> 时间：2013-02-20T14:30:28.970
> 
> 标签：eclipse, oracle, wsdl, weblogic

我正在使用 Oracle Enterprise Pack for Eclipse。因此，我尝试创建一个小的 Oracle Web Service 项目。除了自动生成的方法 hello() 之外，别无其他。但是，每次我尝试创建 WSDL 文件（右键单击等）时，我都会收到此错误：

```
The WSDL cannot be generated from the web service due to error 
```

错误日志：

```
java.lang.reflect.InvocationTargetException
                at oracle.eclipse.tools.webservices.ant.WlsAntScript.execute(WlsAntScript.java:288)
                at oracle.eclipse.tools.webservices.ui.actions.GenerateWsdlFromJwscAntAction$1.run(GenerateWsdlFromJwscAntAction.java:217)
                at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: oracle.eclipse.tools.webservices.ant.GeneratedAntScriptFailedException: Generated ant script failed:
C:\Users\steinkar\eclipse\workspace\.metadata\.plugins\oracle.eclipse.tools.webservices\ant\build.xml 
Log file:
C:\Users\steinkar\eclipse\workspace\.metadata\.plugins\oracle.eclipse.tools.webservices\ant\build_log.txt
Log contents:
Buildfile: C:\Users\steinkar\eclipse\workspace\.metadata\.plugins\oracle.eclipse.tools.webservices\ant\build.xml
Trying to override old definition of datatype wsgen

fork_build:

BUILD FAILED
java.io.IOException: Cannot run program "C:\Develop\Oracle\Middleware\jdk160_29\bin\java" (in directory "C:\Users\steinkar\eclipse\workspace\tc_togo"): CreateProcess error=87, The parameter is incorrect
                at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
                at java.lang.Runtime.exec(Runtime.java:593)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:832)
                at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:447)
                at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:461)
                at org.apache.tools.ant.taskdefs.Java.fork(Java.java:784)
                at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:211)
                at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
                at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
                at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
                at org.apache.tools.ant.Task.perform(Task.java:348)
                at org.apache.tools.ant.Target.execute(Target.java:357)
                at org.apache.tools.ant.Target.performTasks(Target.java:385)
                at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
                at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
                at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
                at org.eclipse.ant.internal.core.ant.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
                at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
                at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:665)
                at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:498)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.eclipse.ant.core.AntRunner.run(AntRunner.java:378)
                at oracle.eclipse.tools.webservices.ant.WlsAntScript.runAnt(WlsAntScript.java:128)
                at oracle.eclipse.tools.webservices.ant.WlsAntScript.execute(WlsAntScript.java:283)
                at oracle.eclipse.tools.webservices.ui.actions.GenerateWsdlFromJwscAntAction$1.run(GenerateWsdlFromJwscAntAction.java:217)
                at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.io.IOException: CreateProcess error=87, The parameter is incorrect
                at java.lang.ProcessImpl.create(Native Method)
                at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
                at java.lang.ProcessImpl.start(ProcessImpl.java:30)
                at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
                ... 37 more

Total time: 0 seconds

                at oracle.eclipse.tools.webservices.ant.WlsAntScript.runAnt(WlsAntScript.java:130)
                at oracle.eclipse.tools.webservices.ant.WlsAntScript.execute(WlsAntScript.java:283)
                ... 2 more
Caused by: org.eclipse.core.runtime.CoreException: C:\Users\steinkar\eclipse\workspace\.metadata\.plugins\oracle.eclipse.tools.webservices\ant\build.xml:10: java.io.IOException: Cannot run program "C:\Develop\Oracle\Middleware\jdk160_29\bin\java" (in directory "C:\Users\steinkar\eclipse\workspace\tc_togo"): CreateProcess error=87, The parameter is incorrect
                at org.eclipse.ant.core.AntRunner.handleInvocationTargetException(AntRunner.java:452)
                at org.eclipse.ant.core.AntRunner.run(AntRunner.java:384)
                at oracle.eclipse.tools.webservices.ant.WlsAntScript.runAnt(WlsAntScript.java:128)
                ... 3 more
Caused by: C:\Users\steinkar\eclipse\workspace\.metadata\.plugins\oracle.eclipse.tools.webservices\ant\build.xml:10: java.io.IOException: Cannot run program "C:\Develop\Oracle\Middleware\jdk160_29\bin\java" (in directory "C:\Users\steinkar\eclipse\workspace\tc_togo"): CreateProcess error=87, The parameter is incorrect
                at org.apache.tools.ant.taskdefs.Java.fork(Java.java:791)
                at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:211)
                at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
                at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
                at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
                at org.apache.tools.ant.Task.perform(Task.java:348)
                at org.apache.tools.ant.Target.execute(Target.java:357)
                at org.apache.tools.ant.Target.performTasks(Target.java:385)
                at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
                at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
                at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
                at org.eclipse.ant.internal.core.ant.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
                at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
                at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:665)
                at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:498)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.eclipse.ant.core.AntRunner.run(AntRunner.java:378)
                ... 4 more
Caused by: java.io.IOException: Cannot run program "C:\Develop\Oracle\Middleware\jdk160_29\bin\java" (in directory "C:\Users\steinkar\eclipse\workspace\tc_togo"): CreateProcess error=87, The parameter is incorrect
                at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
                at java.lang.Runtime.exec(Runtime.java:593)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:832)
                at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:447)
                at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:461)
                at org.apache.tools.ant.taskdefs.Java.fork(Java.java:784)
                ... 28 more
Caused by: java.io.IOException: CreateProcess error=87, The parameter is incorrect
                at java.lang.ProcessImpl.create(Native Method)
                at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
                at java.lang.ProcessImpl.start(ProcessImpl.java:30)
                at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
                ... 37 more 
```

我已经尝试删除该项目，重新安装 Oracle 的东西，但它仍然无法正常工作，尽管 web 服务本身正在运行。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:26:07.413

有些事情你应该确保。第一：不要将 Oracle 软件安装到默认位置以外的其他位置。由于某种原因，该软件当时无法正常工作。第二：不要在很长的目录中创建工作区。

如果你修复了这两个它应该工作。

# android - 在 Android 中以编程方式定位视图（imageView）

> ID：14982328
> 
> 赞同：0
> 
> 时间：2013-02-20T14:30:37.863
> 
> 标签：android, position, imageview

这个问题可能看起来很基本，但我找不到答案。我需要将 imageView 放置在屏幕中的特殊位置。假设，我需要它位于屏幕顶部的十分之三和屏幕左侧的五分之一。

首先想到的是使用 AbsoluteLayout 并使用绝对坐标放置 imageView。然而，这种方法在使用不同的屏幕尺寸时会导致问题。问题是我无法在 xml 文件中获取屏幕尺寸（宽度和高度），另一方面，我找不到用于 ImageView 的 setX() / setY() 或类似方法以编程方式执行此操作。

解决这个问题的一个想法是使用 LinearLayout 而不是 AbsoluteLayout 并插入虚拟视图（如 textVies）来填充我想要的 imageView 后面或上方的空间。但是，如果我有多个图像视图要放置在屏幕中并且所需的位置未对齐，这会变得复杂。另一种解决方案是使用填充或边距，但它不适用于 AbsoluteView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:47:25.217

您可以使用LinearLayout 和RelativeLayout 轻松地将一个或多个视图放置在您想要的任何位置。

在使用 LinearLayout 时，在相应的 xml 中使用其属性（如重力和重量）来调整视图。

在使用 RelativeLayout 时，您可以使用对齐、边距和 XXTo，其中 XX 可能是任何现有视图的左、右、上、下。

如果没有得到您的答案，请具体说明您想要放置的位置和数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:44:30.290

是这样的：

```
 AbsoluteLayout.LayoutParams lp=new AbsoluteLayout.LayoutParams(width,height,x,y);
    myImageView.setLayoutParams(lp); 
```

# php - 使用复选框通过 PHP 编辑来自 MySQL 的数据

> ID：14982337
> 
> 赞同：0
> 
> 时间：2013-02-20T14:30:58.407
> 
> 标签：php, mysql, checkbox, edit

我想用复选框更新数据库。我已经从数据库创建了表。-如果选中“elfogadva”，则值=1。-else 如果未选中“elfogadva”，则（值=0）我有该行的复选框。

```
<form method="post" action="rendeles.php" id="rendelesek">
                <?php 
                $result=mysql_query("SELECT * FROM megrendeles");
                echo "<table border=1>
                <tr><th>Szám</th>
                    <th width=30>Név</th>
                    <th width=30>Cím</th>
                    <th width=30>Mobil</th>
                    <th width=30>E-mail</th>
                    <th width=70>Rendezvény típusa</th>
                    <th width=50>Létszám</th>
                    <th width=150>Helyszín</th>
                    <th width=50>Átadás</th>
                    <th width=50>Bontás</th>
                    <th width=40>Sátor méret</th>                                       
                    <th width=50>Padlózat</th>
                    <th width=50>Színpad</th>
                    <th width=70>Berendezés</th>
                    <th width=33>Asztal db</th>
                    <th width=33>Ülés</th>
                    <th width=33>Ülés db</th>
                    <th width=33>Füves</th>
                    <th width=41>Burkolt</th>                   
                    <th width=30>Egyéb</th>
                    <th width=30>Elfogadva</th>
                    <th width=33>Értékelés</th>
                </tr>";

                while($row = mysql_fetch_assoc($result)){
                    echo "<input type='hidden' name='id' value=".$row['id'].">
                    <tr>
                        <td>" .$row['id']."</td>
                        <td>" . $row['nev'] . "</td>
                        <td>" . $row['cim'] . "</td>
                        <td>" . $row['mobil'] . "</td>
                        <td>" . $row['email'] . "</td>
                        <td>" . $row['rendezveny'] . "</td>
                        <td>" . $row['letszam'] . "</td>
                        <td>" . $row['helyszin'] . "</td>
                        <td>" . $row['atadas'] . "</td>
                        <td>" . $row['bontas'] . "</td>
                        <td>" . $row['satormeret'] . "</td>                                             
                        <td>" . $row['padlozat'] . "</td>
                        <td>" . $row['szinpad'] . "</td>
                        <td>" . $row['berendezes'] . "</td>
                        <td>" . $row['asztal'] . "</td>
                        <td>" . $row['berendezes_u'] . "</td>
                        <td>" . $row['ules'] . "</td>
                        <td>" . $row['fuves'] . "</td>
                        <td>" . $row['burkolt'] . "</td>                        
                        <td>" . $row['egyeb'] . "</td>";                        
                        if($row['elfogadva']==1){ //1es ha elfogadva, ha nincs akkor checkbox
                            echo"<td width=60>" . $row['elfogadva'] . "</td> ";
                        }else{
                            echo"<td width=60>
                                    <input type='checkbox' name='elfogadva' value='1'>
                                </td>";
                        }
                        echo"<td>" . $row['ertekeles'] . "</td>

                    </tr>";
                }
                echo "</table><br>
                <p align='right'><input type='submit' name='submit' class='btn' value='Submit'></p>";
                ?>              
            </form> 
```

这是“rendeles.php”：

```
<?php
$sql = mysql_connect("localhost", "root", "");
mysql_select_db("szakdolgozat") or die( "Unable to select database");

$submit=$_POST['submit'];
$elfogadva=$_POST['elfogadva'];
$id=$_POST['id'];
//if(isset($_POST['elfogadva'])){ $elfogadva = $_POST['elfogadva']; }
echo $elfogadva;
echo"<br>";
echo $id;

if(!isset($_SESSION)){
    session_start();
}

$query_rendeles=mysql_query("UPDATE megrendeles SET elfogadva='$elfogadva' WHERE id='$id'");
require_once("lekerdezes_megrendeles.php");
?> 
```

问题：总是发布最后一个“id”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:54:58.193

您正在构建完全无效/不正确的 html：

```
 echo "<input type='hidden' name='id' value=".$row['id'].">

                                <input type='checkbox' name='elfogadva' value='1'> 
```

假设您从查询中获得 10 行数据，您将生成 10 个具有相同名称的表单字段副本，只是`$row['id']`值不同。当您提交时，任何重复的名称都会折叠到一个字段中，并且通常使用该名称的 LAST 实例。

代码应该只是：

```
<input type="checkbox" name="elfogadva" value="$row[id]" /> 
```

接着

```
$id = $_POST['elfogadva']; 
```

在您的 PHP 代码中。

# java - 从 Java 应用程序向正在监听的 Android 应用程序发送消息

> ID：14982339
> 
> 赞同：0
> 
> 时间：2013-02-20T14:31:06.457
> 
> 标签：java, android, sockets

我有一个桌面应用程序正在运行，当某个事件发生时，需要向任何连接的 Android 设备发送消息。

首先，用户必须在他们的手机上安装该应用程序。

其次，必须授权应用程序所在的设备接收这些消息。

我在想，当用户在手机上启动应用程序时，他们应该输入由桌面应用程序验证的登录详细信息，然后注册以接收消息。

我的问题是双重的

*   **如何将登录详细信息发送到桌面应用程序？**
*   **如何从桌面向 Android 应用程序发送消息？**

此外，在不让应用程序不断运行/侦听来自服务器的消息的情况下，联系移动应用程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:55:06.733

> 如何将登录详细信息发送到桌面应用程序？

你可以使用 TCP 协议来解决这个问题。

> 如何从桌面向 Android 应用程序发送消息？

为此，您可以使用[GoogleCloudMessaging](http://developer.android.com/google/gcm/index.html)

# windows-server-2008 - 单击编辑模式时，dotnetnuke 7 重定向到主页

> ID：14982341
> 
> 赞同：1
> 
> 时间：2013-02-20T14:31:16.867
> 
> 标签：windows-server-2008, dotnetnuke

在运行 Windows Server 2008 R2 的虚拟服务器上安装了 dotnetnuke 7。

安装过程中出现了需要修改各种权限的复杂情况，但最终完成了安装。该站点正确加载并可以登录超级用户帐户。但是，当我尝试进入编辑模式时，页面会重定向回主页。

有任何想法吗？

编辑 --- 事件视图确实显示 dbo.GetTopHtmlText 丢失。已完成完全重新安装，现在存在并且日志查看器没有显示异常，但尝试编辑页面时页面仍重定向到主页。

编辑 --- 使用 Firefox Web 控制台发现以下内容：

```
Request URL: http://cmstrial/dotnetnuke/DesktopModules/internalservices/API/controlbar/ToggleUserMode

Request Method: POST

Status Code: HTTP/1.1 401 Unauthorized 
```

不知道为什么我应该未经授权，因为我以超级用户身份登录并已授予对 AppPool 安装目录的完全控制权，如安装指南所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:22:18.560

经过大量搜索设法找到此解决方法。将以下内容添加到 web.config 中的模块选项卡似乎已经解决了问题：

runAllManagedModulesForAllRequests="true"

在这里查看信息 [http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts/threadpage/9.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts/threadpage/9.aspx)

# java - 语音识别开启时如何获取事件

> ID：14982342
> 
> 赞同：1
> 
> 时间：2013-02-20T14:31:17.567
> 
> 标签：java, android, speech-recognition

我想在任何语音识别应用程序处于活动状态时暂停我的音乐播放器，例如 S Voice 和 Google 语音应用程序。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:48:21.553

我认为您需要请求音频焦点并正确管理来自设备的 OnAudioFocusChangeListener 事件。有关详细信息，请参阅[http://developer.android.com/training/managing-audio/audio-focus.html](http://developer.android.com/training/managing-audio/audio-focus.html)。

# asp.net-mvc-4 - 对多个模型使用一个视图

> ID：14982346
> 
> 赞同：0
> 
> 时间：2013-02-20T14:31:31.780
> 
> 标签：asp.net-mvc-4

我有两个模型，它们的区别仅在于所需的字段，我希望能够使用相同的视图来显示它们。

我有一个 UserEdit 类

```
public abstract class UserEdit
{
    public User User { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [EqualTo("NewPassword")]
    public string ConfirmPassword { get; set; }

} 
```

以及一个将所需属性添加到 NewPassword 和 ConfirmPassword 属性的 UserCreate 类。

```
class UserCreate_Metadata
{
    [Required]
    public string NewPassword { get; set; }

    [Required]
    public string ConfirmPassword { get; set; }
}

[MetadataType(typeof(UserCreate_Metadata))]
public partial class UserCreate : UserEdit
{

} 
```

如果我将模型绑定到特定类，那么这两个在视图中都可以正常工作，如下所示：

```
@model Siaa.NextWeb.Data.UserEdit 
```

或者

```
@model Siaa.NextWeb.Data.UserCreate 
```

有没有办法让视图检测它绑定到哪个类，以便它获取 UserCreate 类的额外验证要求？我尝试使用动态视图，但收到“表达式树可能不包含动态操作”，研究已将我指向用于创建编辑器的 lambda 表达式

```
@Html.EditorFor(model => model.User.FirstName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:37:25.837

最直观的方法是将两个模型组合到一个模型中，您始终将其传递给视图。然后只需在模型上添加某种标志来确定您应该使用哪一个。

```
public class UserViewModel {
    public UserCreate CreateModel { get; set; }
    public UserEdit EditModel { get; set; }

    public bool IsCreatingUser { get; set; }
} 
```

那么在你看来：

```
@if (Model.IsCreatingUser) {
    //Build your form.
} else {
    //Build your form.
} 
```

# mongodb - Mongodb filemd5 命令异常

> ID：14982347
> 
> 赞同：1
> 
> 时间：2013-02-20T14:31:32.807
> 
> 标签：mongodb, exception, md5

我有 mongodb 异常。在我的团队中，此异常仅出现在我的 PC 上。我无法弄清楚为什么会发生以及如何解决它。我已经放弃了mondodb，修复它..没有任何帮助。有人可以帮助或给我建议如何解决吗？

```
CommandDocument commandDocument = new CommandDocument("filemd5", files_id);
var md5 = mongoGridFs.Database.RunCommand(commandDocument); 
```

异常如下所示：

```
Command 'filemd5' failed: need an index on { files_id : 1 , n : 1 } 
(response: { "errmsg" : "need an index on { files_id : 1 , n : 1 }", "ok" : 0.0 }) 
```

# c# - 来自 C# 控制台应用程序的 Python 脚本

> ID：14982355
> 
> 赞同：0
> 
> 时间：2013-02-20T14:31:45.843
> 
> 标签：c#, python, console-application

首先，这是一个重复（有点）：[在 C# 上运行 python 脚本不起作用](https://stackoverflow.com/questions/12882896/running-a-python-script-on-c-sharp-not-working)

我的 python 脚本可以从命令行正确运行，但是当我从控制台应用程序运行它时，它不能正确运行。

我的 python 脚本假设从一个目录中获取所有 .log 文件并将它们传递到一个 csv 文件中。然后我想从我的 C# 控制台应用程序访问 csv 文件。在我运行 python 脚本时，它会创建文件然后退出。没有做任何事情过去。

这是我用来尝试和运行 python 脚本的代码。（我不是也不想使用 IronPython）。

```
 public void runPythonScript()
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("python");
        startInfo.CreateNoWindow = true;
        startInfo.UseShellExecute = false;
        startInfo.FileName = @"C:\Python27\python.exe";
        startInfo.Arguments = @"C:\Users\bmahnke\Desktop\Python-Files\python3.py";  

        try
        {
            using (Process prog = Process.Start(startInfo))
            {

                prog.WaitForExit();
            }
        }
        catch(Exception e)
        {
            Console.WriteLine(e.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:29:53.670

你没有给我们太多的继续。以下是从另一个程序运行 Python 脚本与从控制台运行它时可能会得到不同行为的一系列原因：

## 不同的环境

进程通常在创建时继承其所有父级环境变量的副本，除非父级特别设置不同的东西。Python 进程从控制台 shell 进程继承的环境变量可能与从 C# 程序继承的环境变量不同，C# 程序继承自启动它的任何程序。要检查的重要变量是 PATH（工作目录）、PYTHONPATH、PYTHONHOME、PYTHONUNBUFFERED 以及您的脚本专门读取的任何内容。

## 重定向标准输入、标准输出、标准错误

标准文件描述符的行为可能会有所不同，具体取决于它们是连接到控制台、文件还是通过管道连接到另一个进程。

## 控制台的存在

可以在不连接控制台的情况下以编程方式启动进程。如果您的子进程根本没有控制台并且您没有重定向它的标准文件描述符，那么它在尝试读取或写入它们时可能会崩溃。

*编辑 -*我刚刚通过创建一个 win32 C# 程序来调用基于控制台的 Python 脚本并无法重现崩溃 - Python 的控制台输出只是消失在以太中。我想我记得以前遇到过这个问题，但我不确定哪些因素的组合可能会导致问题。这可能值得调查，但我不能确定它是否会给你带来麻烦。

# matlab - 反向传播算法（Matlab）：输出值饱和到 1

> ID：14982358
> 
> 赞同：2
> 
> 时间：2013-02-20T14:31:59.187
> 
> 标签：matlab, machine-learning, artificial-intelligence, backpropagation

我根据这些注释在 Matlab 中编写了反向传播算法：http: [//dl.dropbox.com/u/7412214/BackPropagation.pdf](http://dl.dropbox.com/u/7412214/BackPropagation.pdf)

我的网络采用长度为 43 的输入/特征向量，在隐藏层中有 20 个节点（我可以更改任意参数选择），并且只有一个输出节点。我想训练我的网络获取 43 个特征并输出 0 到 100 之间的单个值。输入数据被归一化为零均值和单位标准偏差（通过 z = x - 均值/标准差），然后我附加了一个“1 " 输入向量的术语以表示偏差。我的 targetValues 只是 0 到 100 之间的单个数字。

这是我的代码的相关部分：

（按照我的约定，第 I (i) 层是指输入层，J (j) 是指隐藏层，K (k) 是指输出层，在这种情况下是单个节点。）

```
for train=1:numItrs
        for iterator=1:numTrainingSets

            %%%%%%%% FORWARD PROPAGATION %%%%%%%%

            % Grab the inputs, which are rows of the inputFeatures matrix
            InputLayer = inputFeatures(iterator, :)'; %don't forget to turn into column 
            % Calculate the hidden layer outputs: 
            HiddenLayer = sigmoidVector(WeightMatrixIJ' * InputLayer); 
            % Now the output layer outputs:
            OutputLayer = sigmoidVector(WeightMatrixJK' * HiddenLayer);

            %%%%%%% Debug stuff %%%%%%%% (for single valued output)
            if (mod(train+iterator, 100) == 0)
               str = strcat('Output value: ', num2str(OutputLayer), ' | Test value: ', num2str(targetValues(iterator, :)')); 
               disp(str);
            end 

            %%%%%%%% BACKWARDS PROPAGATION %%%%%%%%

            % Propagate backwards for the hidden-output weights
            currentTargets = targetValues(iterator, :)'; %strip off the row, make it a column for easy subtraction
            OutputDelta = (OutputLayer - currentTargets) .* OutputLayer .* (1 - OutputLayer); 
            EnergyWeightDwJK = HiddenLayer * OutputDelta'; %outer product
            % Update this layer's weight matrix:
            WeightMatrixJK = WeightMatrixJK - epsilon*EnergyWeightDwJK; %does it element by element

            % Propagate backwards for the input-hidden weights
            HiddenDelta = HiddenLayer .* (1 - HiddenLayer) .* WeightMatrixJK*OutputDelta; 
            EnergyWeightDwIJ = InputLayer * HiddenDelta'; 
            WeightMatrixIJ = WeightMatrixIJ - epsilon*EnergyWeightDwIJ; 

        end

    end 
```

权重矩阵初始化如下：

```
WeightMatrixIJ = rand(numInputNeurons, numHiddenNeurons) - 0.5; 
WeightMatrixJK = rand(numHiddenNeurons, numOutputNeurons) - 0.5; 
%randoms b/w (-0.5, 0.5) 
```

“sigmoidVector”函数获取向量中的每个元素并应用`y = 1 / (1 + exp(-x))`.

下面是调试消息的样子，从代码的开始：

```
Output value:0.99939 | Test value:20
Output value:0.99976 | Test value:20
Output value:0.99985 | Test value:20
Output value:0.99989 | Test value:55
Output value:0.99991 | Test value:65
Output value:0.99993 | Test value:62
Output value:0.99994 | Test value:20
Output value:0.99995 | Test value:20
Output value:0.99995 | Test value:20
Output value:0.99996 | Test value:20
Output value:0.99996 | Test value:20
Output value:0.99997 | Test value:92
Output value:0.99997 | Test value:20
Output value:0.99997 | Test value:20
Output value:0.99997 | Test value:20
Output value:0.99997 | Test value:20
Output value:0.99998 | Test value:20
Output value:0.99998 | Test value:20
Output value:0.99999 | Test value:20
Output value:0.99999 | Test value:20
Output value:1 | Test value:20
Output value:1 | Test value:62
Output value:1 | Test value:70
Output value:1 | Test value:77
Output value:1 | Test value:20
** stays saturated at 1 ** 
```

显然，我希望网络将输出值训练在 0 到 100 之间，以尝试匹配这些目标值！

感谢您的帮助，如果您需要更多信息，我会尽力提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:53:05.653

sigmoid 函数被限制在 (0,1) 范围内，因此它永远不会达到您的目标值（因为它们都大于 1）。您应该缩放您的目标值，以便它们也在 sigmoid 的范围内。由于您知道您的目标值被限制在 (0,100) 范围内，因此只需将它们全部除以 100。

# jboss7.x - 在 JBoss AS 7.1 中获取一个工作的 Apache Karaf 实例

> ID：14982360
> 
> 赞同：1
> 
> 时间：2013-02-20T14:32:01.337
> 
> 标签：jboss7.x, apache-karaf

我希望在 JBoss Application Server 7.1 中运行 Apache Karaf 运行时。理论上它可以工作，但是按照[这些步骤](https://issues.jboss.org/browse/AS7-5544)，它无法找到一些依赖项并且控制台不是完全可操作的。

基本上，前面提到的步骤修改了`standalone.xml`配置文件，添加了一个 OSGi 子系统：

```
 <subsystem xmlns="urn:jboss:domain:osgi:1.2" activation="eager">
            <properties>
                <property name="org.osgi.framework.startlevel.beginning">
                    1
                </property>
                <property name="org.osgi.framework.system.packages.extra">
                    org.apache.karaf.jaas.boot;version=2.2.9
                </property>
            </properties>
            <capabilities>
                <capability name="javax.servlet.api:v25"/>
                <capability name="javax.transaction.api"/>
                <capability name="org.apache.felix.log" startlevel="1"/>
                <capability name="org.jboss.osgi.logging" startlevel="1"/>
                <capability name="org.apache.felix.configadmin" startlevel="1"/>
                <capability name="org.jboss.as.osgi.configadmin" startlevel="1"/>
                <capability name="org.apache.servicemix.bundles:org.apache.servicemix.bundles.asm:3.3.1_1" startlevel="1"/>
                <capability name="org.apache.aries:org.apache.aries.util:0.3.1" startlevel="1"/>
                <capability name="org.apache.aries.proxy:org.apache.aries.proxy:0.3.1" startlevel="1"/>
                <capability name="org.apache.aries.blueprint:org.apache.aries.blueprint:0.3.2" startlevel="1"/>
                <capability name="org.apache.karaf.jaas:org.apache.karaf.jaas.config:2.2.9" startlevel="1"/>
                <capability name="org.apache.karaf.jaas:org.apache.karaf.jaas.modules:2.2.9" startlevel="1"/>
                <capability name="org.apache.karaf.shell:org.apache.karaf.shell.console:2.2.9" startlevel="1"/>
                <capability name="org.apache.karaf.shell:org.apache.karaf.shell.commands:2.2.9" startlevel="1"/>
                <capability name="org.apache.karaf.shell:org.apache.karaf.shell.osgi:2.2.9" startlevel="1"/>
                <capability name="org.apache.mina:mina-core:2.0.1" startlevel="1"/>
                <capability name="org.apache.sshd:sshd-core:0.7.0" startlevel="1"/>
                <capability name="org.apache.karaf.shell:org.apache.karaf.shell.ssh:2.2.9" startlevel="1"/>
            </capabilities>
        </subsystem> 
```

但 JBoss 日志显示以下异常：

```
14:30:29,220 ERROR [org.apache.aries.blueprint.container.BlueprintContainerImpl] (Blueprint Extender: 3) Unable to start blueprint container for bundle org.apache.karaf.jaas.config: org.osgi.service.blueprint.container.ComponentDefinitionException: Unable to intialize bean proxyLoginModuleInitializer
    at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:640)
    at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:726)
    at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:64)
    at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:219)
    at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:147)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:631)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:337)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:230)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439) [rt.jar:1.6.0_39]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_39]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_39]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) [rt.jar:1.6.0_39]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [rt.jar:1.6.0_39]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_39]
Caused by: java.lang.NoClassDefFoundError: org/apache/karaf/jaas/boot/ProxyLoginModule
    at org.apache.karaf.jaas.config.impl.ProxyLoginModuleInitializer.init(ProxyLoginModuleInitializer.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_39]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_39]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_39]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_39]
    at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:225)
    at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:838)
    at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:638)
    ... 15 more
Caused by: java.lang.ClassNotFoundException: org.apache.karaf.jaas.boot.ProxyLoginModule from [Module "deployment.org.apache.karaf.jaas.config:2.2.9" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 23 more

14:30:29,455 WARN  [org.jboss.modules] (Blueprint Extender: 1) Failed to define class org.apache.karaf.shell.osgi.SpringStateListenerFactory$SpringApplicationListener in Module "deployment.org.apache.karaf.shell.osgi:2.2.9" from Service Module Loader: java.lang.LinkageError: Failed to link org/apache/karaf/shell/osgi/SpringStateListenerFactory$SpringApplicationListener (Module "deployment.org.apache.karaf.shell.osgi:2.2.9" from Service Module Loader)
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396)
    at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243)
    at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73)
    at org.jboss.modules.FilteredLocalLoader.loadClassLocal(FilteredLocalLoader.java:46)
    at org.jboss.modules.Module.loadModuleClass(Module.java:517)
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.apache.karaf.shell.osgi.SpringStateListenerFactory.createListener(SpringStateListenerFactory.java:69)
    at org.apache.karaf.shell.osgi.SpringStateListenerFactory.getListener(SpringStateListenerFactory.java:60)
    at org.apache.karaf.shell.osgi.SpringStateListenerFactory.init(SpringStateListenerFactory.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_39]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_39]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_39]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_39]
    at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:225)
    at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:838)
    at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:638)
    at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:726)
    at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:64)
    at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:219)
    at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:147)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:631)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:337)
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:230)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439) [rt.jar:1.6.0_39]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_39]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_39]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) [rt.jar:1.6.0_39]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [rt.jar:1.6.0_39]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_39]
Caused by: java.lang.NoClassDefFoundError: org/springframework/osgi/context/event/OsgiBundleApplicationContextListener
    at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) [rt.jar:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) [rt.jar:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) [rt.jar:1.6.0_39]
    at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327)
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391)
    ... 34 more
Caused by: java.lang.ClassNotFoundException: org.springframework.osgi.context.event.OsgiBundleApplicationContextListener from [Module "deployment.org.apache.karaf.shell.osgi:2.2.9" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 40 more

14:30:29,518 INFO  [org.apache.sshd.common.util.SecurityUtils] (Blueprint Extender: 3) BouncyCastle not registered, using the default JCE provider 
```

然后连接到 Karaf 控制台，得到一个错误的配置。获取 OSGi 包列表：

```
START LEVEL 1 , List Threshold: -1
   ID   State         Blueprint      Level  Name
[   0] [Active     ] [            ] [    0] system.bundle (0.0.0)
[   2] [Active     ] [            ] [    1] JBossOSGi Http API (1.0.5)
[   4] [Active     ] [            ] [    1] Apache Felix Log Service (1.0.0)
[   8] [Active     ] [            ] [    1] Apache ServiceMix :: Bundles :: asm (3.3.1.1)
[  10] [Active     ] [            ] [    1] Apache Aries Proxy Bundle (0.3.1)
[  14] [Active     ] [Created     ] [    1] Apache Karaf :: Shell :: Console (2.2.9)
[   6] [Active     ] [            ] [    1] Apache Felix Configuration Admin Service (1.2.8)
[  16] [Active     ] [Created     ] [    1] Apache Karaf :: Shell :: OSGi Commands (2.2.9)
[  12] [Active     ] [Failure     ] [    1] Apache Karaf :: JAAS :: Config (2.2.9)
[  18] [Active     ] [            ] [    1] Apache Mina SSHD :: Core (0.7.0)
[   1] [Active     ] [            ] [    1] osgi.enterprise (4.2.0.201003190513)
[   3] [Active     ] [            ] [    1] javax.transaction.api
[   5] [Active     ] [            ] [    1] JBossOSGi Logging (1.0.0)
[   7] [Active     ] [            ] [    1] JBoss Application Server: OSGi ConfigurationAdmin (7.1.1.Final)
[  19] [Active     ] [Created     ] [    1] Apache Karaf :: Shell :: SSH (2.2.9)
[  17] [Active     ] [            ] [    1] Apache MINA Core (2.0.1)
[   9] [Active     ] [            ] [    1] Apache Aries Util (0.3.1)
[  11] [Active     ] [Created     ] [    1] Apache Aries Blueprint Bundle (0.3.2)
[  15] [Active     ] [Created     ] [    1] Apache Karaf :: Shell :: Various Commands (2.2.9)
[  13] [Active     ] [GracePeriod ] [    1] Apache Karaf :: JAAS :: Modules (2.2.9) 
```

如何获得配置良好的 Karaf 控制台？我尝试将所有依赖项添加到子系统中，但这是一场噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T15:57:19.140

JBoss 已为所有与 OSGI 相关的实现切换到 Fuse 产品。这意味着在 EAP 6.1+ 中甚至删除了 OSGI 技术预览子系统。[source1 source2](https://community.jboss.org/thread/229889) [即使](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Release_Notes_6.0.1/ar01s03.html) 你在 Jboss 中使用 Karaf，它也会使用 pax web 容器，从 JSF 到注入的任何东西都将不可用。我建议走不同的路线。

# ruby - 捕获量化字符集或单个字符

> ID：14982363
> 
> 赞同：0
> 
> 时间：2013-02-20T14:32:08.513
> 
> 标签：ruby, regex

我不确定标题是否准确，所以如果这是重复的，我很抱歉。

据我了解，`(a|b)`匹配`a`或`b`。这可以扩展，例如`([\w]|@)`匹配单词字符或`@`.

我的问题是：为什么这不适用于量词？我正在尝试匹配量化字符集或单个`@`，但`([\w\.\-]*|@)`不会匹配`@`。

谁能解释这种行为的原因，也许是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:36:40.910

`*`意思是“匹配零个或多个”。因此，您的模式的第一部分可以成功匹配任何内容（空字符串）。第一部分总是成功的，所以它从不尝试第二部分。

你有两个选择来解决这个问题：

1.  用于`+`要求至少一个字符：`([\w\.\-]+|@)`
2.  放第`@`一个：`(@|[\w\.\-]*)`。如果您仍然想要匹配一个空字符串，但`@`如果它存在，您想要匹配它，这很有用。

**更新：** Linuxios 建议 Ruby 不允许`*`在子模式中使用。我不是 Ruby 用户，但如果这是真的，你可以像这样得到选项 2 的等价物：

```
(@|[\w\.\-]+)? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:36:41.173

Ruby 不允许在 or 中使用可以匹配*nothing*的变量量词，因为没有什么总是匹配的，这使得 or 毫无意义。

# android - android 锐化路径中的硬件加速

> ID：14982364
> 
> 赞同：2
> 
> 时间：2013-02-20T14:32:10.893
> 
> 标签：android, canvas, hardware-acceleration

我用画布绘制简单的填充路径。我用

```
canvas.scale(scalex, scaley); 
```

更大和更小的形状。

当我切换到硬件加速 (AndroidManifest.xml)

```
android:hardwareAccelerated="true" 
```

并重新启动应用程序并放大（ canvas.scale ），丑陋和不清晰的路径？

有谁知道为什么？我是否必须额外编写一些代码才能获得相同的动力，但加速？

加速前

![在硬件加速之前](../Images/0c2199456617646dfbd02ccff82e7c93.png)

加速后：

![加速后](../Images/55f73ca66b1cec2839ddaacee97724c2.png)

# php - 过滤掉字符串 PHP 中的元素

> ID：14982368
> 
> 赞同：0
> 
> 时间：2013-02-20T14:32:14.433
> 
> 标签：php, string

我有一个存储为 iframe url 的 youtube 视频的数据库。我想做的是使用一些基本的替换命令在每个视频旁边显示 youtube 缩略图。我想在 php 中运行一个函数，它会自动查找内容，去掉 iframe 标签并留下一个只有 id 的函数。

在第三个字段中，我有代码：

```
echo $galleryitems[$i][2] 
```

会回来

```
<iframe width="640" height="360" src="http://www.youtube.com/embed/scYj-bDEaKI?rel=0" frameborder="0" allowfullscreen></iframe> 
```

我不确定是否有任何其他方法可以做到这一点，并且由于所有代码都是相同的，我想从代码中删除这些部分：

```
<iframe width="640" height="360" src="http://www.youtube.com/embed/ 
```

和

```
?rel=0" frameborder="0" allowfullscreen></iframe>` 
```

我想一个`str_replace`就足够了？我最后想要的是一个功能`$strLink = scYj-bDEaKI`（只是视频ID）

稍微浏览了一下并尝试了这个：

```
$galleryitems[$i][2] = preg_replace('/<iframe[^>]*>(.*?)<\/iframe>/', '', $strLink, 1);

echo $strLink; 
```

但什么也没返回。眼睛变直了，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:46:31.397

对于 PHP RegEx 语法，您可以参考

[http://php.net/manual/en/reference.pcre.pattern.syntax.php](http://php.net/manual/en/reference.pcre.pattern.syntax.php)

```
$s = '<iframe width="640" height="360" src="http://www.youtube.com/embed/scYj-bDEaKI?rel=0" frameborder="0" allowfullscreen></iframe>';
echo preg_replace('/<iframe.* src="http:\/\/www\.youtube\.com\/embed\/(.*?)\?.*<\/iframe>/', '$1', $s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:01:42.767

请不要使用 RegEx 解析 HTML。

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$items = $dom->getElementsByTagName('iframe');
if ($items->length) {
    $url = basename(parse_url($items->item(0)->getAttribute('src'), PHP_URL_PATH));
} 
```

[键盘中的](http://codepad.viper-7.com/gdrPwq)示例

# sql - 如何通过 SQL 将 MS Access 中的“Indexed: Yes (No Duplicates)”约束更改为“Indexed: Yes (Duplicates OK)”？

> ID：14982372
> 
> 赞同：1
> 
> 时间：2013-02-20T14:32:21.963
> 
> 标签：sql, ms-access

有没有可能改变这个约束？

我删除了约束：“ALTER TABLE [table] DROP CONSTRAINT constraint1;” 但我无法使用 Yes (Duplicates OK) 添加新约束。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:44:23.873

它不再是一种约束。这只是一个[索引](http://msdn.microsoft.com/en-us/library/office/bb177891%28v=office.12%29.aspx)：

```
CREATE INDEX IX_ABC on Table1 (ABC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:43:20.173

你的意思是你想要一个索引？

```
CREATE INDEX index_name
ON table_name (column_name) 
```

除非您特别要求索引是唯一的，否则它将允许重复。

可以使用查询设计窗口或在 VBA 中创建索引。

# css - SCSS多个变量相同的值

> ID：14982375
> 
> 赞同：6
> 
> 时间：2013-02-20T14:32:30.597
> 
> 标签：css, sass

如果我有这个 SCSS/SASS：

```
$a: #fff;
$b: #fff;
$c: #fff;
$d: #fff; 
```

这有什么捷径吗？换句话说，我如何轻松地将相同的值分配给多个变量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T14:47:09.120

如果您出于某种原因需要它们保持相同的值，但需要将它们保留为语义或可读性的单独变量，或者为了实现简单的更改，您可以这样做：

```
$a: #fff;
$b: $a;
$c: $a;
$d: $a; 
```

在处理开发过程中可能发生变化的颜色时，我会不时这样做。这是一个例子：

```
$background_color: white;
$text_color: #444;
$link_color: $text_color;
$overlay_color: rgba($background_color, 0.7); 
```

这很有用，因为它允许我更改值`$text_color`并`$link_color`反映相同的更改，同时能够设置`$link_color`完全不同的东西。仅使用一个变量`$text_color`等`$link_color`意味着我必须手动查看所有实例以查看哪些与文本相关，哪些与链接相关。我认为一个好的做法是通过变量的用途来命名变量，即`$text_color`而`$link_color`不是`$blueish_color`.

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-20T14:36:12.297

不要使用 4 个变量，只有当它们具有相同的值时才使用 1

```
$a: #fff;
$a: #fff;
$a: #fff;
$a: #fff; 
```

# c# - 使用 C# 代码隐藏方法的 For 循环

> ID：14982386
> 
> 赞同：0
> 
> 时间：2013-02-20T14:33:36.733
> 
> 标签：c#, javascript, asp.net, for-loop

当我在后面的代码中调试时，它让我只进入“测试”方法一次，而不是三次，为什么？我看到我有 javascript“for 循环”，它应该在 C#“测试”方法中运行三遍。但它只去了一次，这正常吗？正如我在javascript“for循环”中所说的那样，我想通过“测试”方法三次。问题出在哪里 ？

asp代码：

```
<script>
    $(function () {
        for (var i = 0; i < 3; i++) {

            console.log("active");
            var a = '<%= this.Test() %>';
        }
    });
</script> 
```

后面的 C# 代码：

```
 public string Test()
    {
        int a = 1;
        return "active";
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T14:37:05.500

`this.Test()`没有在您的`for`循环中调用 javascript。它被称为服务器端来评估它。

这样看。您的 javascript 在渲染后确实说了以下内容：

```
<script>
    $(function () {
        for (var i = 0; i < 3; i++) {

            console.log("active");
            var a = 'active';
        }
    });
</script> 
```

原因在于 ASP.NET 的工作方式。它需要您的 xhtml 和服务器端代码并​​呈现 html 以返回给客户端。然后客户端有机会执行它的任何代码。Javascript 在客户端执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:36:45.283

您正在将`Test`函数的结果作为字符串写入 javascript，然后在浏览器加载页面后执行。

如果您想`Test`从页面本身运行 3 次，您需要查看各种 Ajax 库之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:37:57.507

代码在所有情况下只执行一次。JavaScript 上的 for 循环不会执行 c# 3 次。相反，该页面仅输出一次，因为它`<%= this.Test() %>`是一个在服务器上被解释一次的输出块。然后解释您的脚本客户端。

# python - 如何将特殊格式的文本组织到列表中（在 python 上）

> ID：14982389
> 
> 赞同：1
> 
> 时间：2013-02-20T14:33:39.890
> 
> 标签：python, string, algorithm, list

我有航班路线代码的数据。它有很多这样的字符串：

```
routing = 'PBI-FLL/FMY/JAX/MIA/ORL-PNS/TPA-SRQ-CLE/CHI/HOU/WAS-DEN-ELP' 
```

我需要使用这样的字符串获取列表：

```
routinglist =  [['PBI'], ['FLL','FMY','JAX','MIA','ORL'], ['PNS','TPA'], ['SRQ'], ['CLE','CHI','HOU','WAS'], ['DEN']] 
```

我写了这段代码，但它很复杂，不能按需要工作

```
routingrules = 'PBI-FLL/FMY/JAX/MIA/ORL-PNS/TPA-SRQ-CLE/CHI/HOU/WAS-DEN-ELP' 
airports = []   
nn = 0
few = ''
airportcount = 0

for simvol in routingrules:
    if (nn) % 4 == 0:
        previous = routingrules[nn:nn+3]
        if routingrules[nn+3:nn+4] == '/':
            few = few + previous + "1,2"

        elif routingrules[nn+3:nn+4] == '-':
            if few != '':
                airports.append([few + previous])
                airportcount = airportcount+1
                few = ''                
            else:
                airports.append([previous])
                airportcount = airportcount+1
        else:
            if few != '':
                airports.append([few + previous])
                airportcount = airportcount+1
                few = ''    

        nn = nn+1
    nn = nn+1 

print airports 
```

它打印

```
[['PBI'], ['FLL1,2FMY1,2JAX1,2MIA1,2ORL'], ['PNS1,2TPA'], ['SRQ'], ['CLE1,2CHI1,2HOU1,2WAS'], ['DEN']] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:36:29.333

在 上拆分`-`，然后在每个组上`/`：

```
[r.split('/') for r in routing.split('-')] 
```

这输出：

```
>>> routing = 'PBI-FLL/FMY/JAX/MIA/ORL-PNS/TPA-SRQ-CLE/CHI/HOU/WAS-DEN-ELP' 
>>> [r.split('/') for r in routing.split('-')]
[['PBI'], ['FLL', 'FMY', 'JAX', 'MIA', 'ORL'], ['PNS', 'TPA'], ['SRQ'], ['CLE', 'CHI', 'HOU', 'WAS'], ['DEN'], ['ELP']] 
```

与您的示例相比，这是最后一个额外的`['ELP']`条目，但我认为这是一个疏忽。再次删除它很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:43:12.907

尽管这个问题可能（是）矫枉过正，但[`pyparsing`](http://pyparsing.wikispaces.com/)在这里效果很好。

```
routing = 'PBI-FLL/FMY/JAX/MIA/ORL-PNS/TPA-SRQ-CLE/CHI/HOU/WAS-DEN-ELP' 

from pyparsing import *
block   = Group(delimitedList(Word(alphas), '/'))
grammar = Group(delimitedList(block, '-'))

print grammar.parseString(routing) 
```

印刷：

```
[[['PBI'], ['FLL', 'FMY', 'JAX', 'MIA', 'ORL'], ['PNS', 'TPA'], ['SRQ'], ['CLE', 'CHI', 'HOU', 'WAS'], ['DEN'], ['ELP']]] 
```

当您想扩展语法时，这里的优势就来了。通常这些问题一开始很简单，随着时间的推移变得越来越复杂，在这里将语法与解析分开是很有用的。

# xamarin.android - Mono for Android 绑定项目命名空间不可见

> ID：14982391
> 
> 赞同：0
> 
> 时间：2013-02-20T14:33:43.517
> 
> 标签：xamarin.android, java-binding

我为我的 Mono Android 项目制作了一个 Java Binding 项目。我添加了 Google Analytics v2 jar 并使其正确构建。

我还在我的应用项目（项目参考）中引用了绑定项目，它显示在我的参考中。只是，Visual Studio 无法识别命名空间“Com.Google.Analytics.Tracking.Android”。当我在对象浏览器中检查引用时，它有这个命名空间，我还可以在这个命名空间中找到“EasyTracker”类。

此外，仅添加发布版本 .dll 作为参考也不起作用。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:12:27.497

线索是将 Jar 作为 AndroidJavaLibrary 包含在我的项目中。希望这可以帮助任何遇到这个线程的人。

# javascript - 停止 onClick 函数的发生

> ID：14982394
> 
> 赞同：0
> 
> 时间：2013-02-20T14:33:51.913
> 
> 标签：javascript, jquery, html

我有一堆元素`class="pageOpener"`通过一些页面取得了进展。他们`.on('click', ... )`附加了 jQuery 事件。在某个页面上，我想在继续之前验证一些输入，这样它就有了`id="continuebutton"`自己的点击监听器。我想如果我愿意的话，我可以以某种方式从特定于 id 的事件中取消类范围的事件，但我还不能管理它。我认为问题之一是类事件在 id 之前触发（之前已附加）。

有没有办法让 id 事件首先触发？我想按此顺序保留我的代码，但如果唯一的方法是将其放在`id.on('click', ... )`之前，`class.on('click', ... )`那么我可以这样做。

那么停止类事件触发的正确方法是什么？返回真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:37:56.993

从[文档中`.on()`](http://api.jquery.com/on/)：

> 但是，附加在当前元素上的任何其他处理程序都将运行。为防止这种情况，请致电`event.stopImmediatePropagation()`. （绑定到元素的事件处理程序的调用顺序与它们绑定的顺序相同。）

您需要首先绑定基于 id 的`click`事件处理程序（因此它首先运行），并`event.stopImmediatePropagation()`在其函数内部调用以阻止其他基于类的`click`事件处理程序被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:58:17.420

如果您不能依赖以某种方式对代码进行结构化/绑定，或者如果有人稍后更改它而不知道此要求，则结构/序列更改将破坏它。我使用自定义事件解决了类似的问题。这些可以按任何顺序排列，并且没有结构依赖。例如你可以这样做：

```
$('.pageOpener').on('click', function(){
  // check the ID:
  if ($(this).prop('id') === 'continuebutton'){
     $('#continuebutton').trigger('myCustom');
  }
  else {
     $(this).trigger('myPageOpenerClick');
  }
});
$('.pageOpener').on('myPageOpenerClick', function(){
  // do that page opener stuff here
});

$('#continuebutton').on('myCustom', function(){
  // do that page custom stuff here
  alert('Howdy, handling id stuff');
  //trigger the other event now that stuff above is done:
  $(this).trigger('myPageOpenerClick');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:39:58.777

您可以使用 .off('click') 取消绑定点击侦听器。

[官方文档](http://api.jquery.com/off/)

更新：

你也可以做这样的事情。

```
$(".your_class").on("click", function(event){
  if($(this).attr("id")=="continuebutton"){
    return false;
  }else{
    //Continue handling the click event
  }

}); 
```

# git - 为什么 GIT 有时只会将更改推送到服务器，有时会推送所有内容？

> ID：14982395
> 
> 赞同：0
> 
> 时间：2013-02-20T14:33:53.980
> 
> 标签：git, github

对于当前项目，我们在 github 上有一个存储库。每次我处理一个问题时，我都会创建一个本地分支，并在完成后将其推送到 repo。有时推送是即时的，有时我必须等待它将所有文件上传到 repo (150MB)。我不确定，但我认为当我在其上创建本地分支时，同时主分支得到更新并且我当前的本地落后，推送到服务器总是需要更长的时间。

我使用本地分支

```
git checkout -b branch_name_issue_num 
```

然后当我完成后，我将更改推送到 repo 上的新分支

```
git push origin branch_name_issue_num 
```

任何想法为什么有时会再次上传所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:42:34.473

**当“即时推送”很可能是指快进合并时 - 即远程分支**中没有任何更改，因为您创建了一个**本地功能**分支。在这种情况下，`remote`简单地接受您的更改并更新分支指针。

引用[git 文档](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)：

> 您会在该合并中注意到“快进”一词。因为您合并的分支指向的提交直接位于您所在的提交的上游，所以 Git 将指针向前移动。换一种说法，当您尝试将一个提交与可以通过遵循第一个提交的历史到达的提交合并时，Git 通过向前移动指针来简化事情，因为没有不同的工作可以合并在一起——这被称为“快进”。

关于你问题的第二部分，很难准确理解你在问什么？我*认为*您正在推动本地功能分支并创建远程功能分支，但是当您说“为什么要再次上传所有文件？”时，我不知道您的意思。

在不深入细节的情况下，git 将文件存储为**对象**——它本身没有“文件”的概念。如果您修改现有文件，git 将不会存储该文件的全新版本，而是存储两者之间差异的增量。

# python - Django 1.4 - 扩展用户模型和管理界面

> ID：14982408
> 
> 赞同：0
> 
> 时间：2013-02-20T14:34:25.247
> 
> 标签：python, django, django-models, admin

让我们有 2 个模型来扩展用户模型，调用`Ext1`并`Ext2`声明如下：

```
class ExtN(models.Model):
    user = models.OneToOneField(User)
    extra_param = models.xxxField() 
```

然后我在特定于应用程序的`admin.py`文件中声明如下：

```
class ExtNInline(admin.StackedInline):
    model = ExtN
    can_delete = False 
```

我需要在哪个文件中放置以下代码，以便查看编辑与用户相关的两个模型的表单？

```
class UserAdmin(UserAdmin):
    inlines = (Ext1Inline, Ext2Inline, )

admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:38:21.350

你应该把它放在同一个`admin.py`文件中

[扩展用户模型](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model)

# c# - 在 Web API 中启用日志

> ID：14982414
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:34:44.473
> 
> 标签：c#, .net, visual-studio-2012, asp.net-web-api

我是 Web 开发领域的新手，我想找到一种方法来在我的 Web API 项目中启用某种日志。如果我需要检查用户将来遇到的任何问题，我认为这将特别有益。我正在使用 Visual Studio 2012

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:27:47.477

*   [ASP.NET Web API 中的跟踪](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

*   [ASP.NET Web API 跟踪](http://blogs.msdn.com/b/roncain/archive/2012/08/16/asp-net-web-api-tracing-preview.aspx)

*   [使用 NLog 为您的 ASP.NET Web API 提供自定义跟踪](http://www.strathweb.com/2012/06/using-nlog-to-provide-custom-tracing-for-your-asp-net-web-api/)

*   [Web API Contrib Log4Net 适配器](https://github.com/WebApiContrib/WebApiContrib.Tracing.Log4Net)

*   [在 MVC 4 Web API 应用程序中使用 Elmah 记录异常](http://myadventuresincoding.wordpress.com/2012/07/05/c-logging-exceptions-with-elmah-in-an-mvc-4-web-api-application/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:02:13.070

看看[ELMAH](http://nuget.org/packages/elmah/)或[log4net](http://nuget.org/packages/log4net/)或[Enterprise Library Logger](http://nuget.org/packages/EnterpriseLibrary.Logging/)。使用其中任何一个来启动和运行您的解决方案的一种简单方法是使用 Nuget 包安装程序。

# python - 优化查找可以比较的数组对

> ID：14982416
> 
> 赞同：2
> 
> 时间：2013-02-20T14:34:50.557
> 
> 标签：python, algorithm, optimization, numpy

定义：如果数组`A(a1,a2,...,an)`大小相等且`>=`对于每个从到`B(b1,b2,...bn)``a_i>=b_i``i``1``n.`

例如：

```
[1,2,3] >= [1,2,0]
[1,2,0] not comparable with [1,0,2]
[1,0,2] >= [1,0,0] 
```

我有一个列表，其中包含大量此类数组（大约 10000，但可以更大）。数组的元素是正整数。我需要从这个列表中删除所有比至少一个其他数组大的数组。换句话说：如果存在这样`B`的，`A >= B`则删除`A`。

这是我目前的`O(n^2)`方法，非常慢。我只是将每个数组与所有其他数组进行比较，如果它更大，则将其删除。有什么方法可以加快速度。

```
import numpy as np
import time
import random

def filter_minimal(lst):
    n = len(lst)
    to_delete = set()
    for i in xrange(n-1):
        if i in to_delete:
            continue
        for j in xrange(i+1,n):
            if j in to_delete: continue
            if all(lst[i]>=lst[j]):
                to_delete.add(i)
                break
            elif all(lst[i]<=lst[j]):
                to_delete.add(j)
    return [lst[i] for i in xrange(len(lst)) if i not in to_delete]

def test(number_of_arrays,size):
    x = map(np.array,[[random.randrange(0,10) for _ in xrange(size)] for i in xrange(number_of_arrays)])
    return filter_minimal(x)

a = time.time()
result = test(400,10)
print time.time()-a
print len(result) 
```

PS 我注意到使用`numpy.all`而不是内置 python`all`会大大减慢程序的速度。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:07:21.870

可能不完全符合您的要求，但这应该可以帮助您入门。

```
import numpy as np
import time
import random

def compare(x,y):
    #Reshape x to a higher dimensional array
    compare_array=x.reshape(-1,1,x.shape[-1])
    #You can now compare every x with every y element wise simultaneously
    mask=(y>=compare_array)
    #Create a mask that first ensures that all elements of y are greater then x and
    #then ensure that this is the case at least once.
    mask=np.any(np.all(mask,axis=-1),axis=-1)
    #Places this mask on x
    return x[mask]

def test(number_of_arrays,size,maxval):
    #Create arrays of size (number_of_arrays,size) with maximum value maxval.
    x = np.random.randint(maxval, size=(number_of_arrays,size))
    y=  np.random.randint(maxval, size=(number_of_arrays,size))
    return compare(x,y)

print test(50,10,20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:38:59.987

首先，我们需要仔细检查目标。我们是否删除了任何大于其他数组的任何数组，甚至是已删除的数组？例如，如果 A > B and C > A and B=C，那么我们需要只删除 A 还是同时删除 A 和 C？如果我们只需要删除 INCOMPATIBLE 数组，那么这是一个更难的问题。这是一个非常困难的问题，因为这组数组的不同分区可能是兼容的，因此您遇到了找到最大有效分区的问题。

假设问题很简单，定义问题的更好方法是您希望保留所有具有至少一个元素的数组<所有其他数组中的相应元素。（在hard问题中，是其他KEPT数组中对应的元素，这个我们不考虑。）

阶段1

为了解决这个问题，你要做的是将数组排列成列，然后对每一行进行排序，同时保持数组的键和每个数组行到位置的映射（位置列表）。例如，您可能会在第 1 阶段得到如下结果：

第 1 行：BCDAE
第 2 行：CAEBD
第 3 行：EDBCA

这意味着对于第一个元素（第 1 行），数组 B 的值 >= C、C >= D 等。

现在，对该矩阵的最后一列进行排序和迭代（示例中为 {EDA}）。对于每个项目，检查元素是否小于其行中的前一个元素。例如，在第 1 行中，您将检查是否 E < A。如果为真，则立即返回并保留结果。例如，如果 E_row1 < A_row1 那么您可以保留数组 E。只有当行中的值相等时，您才需要进行第 2 阶段测试（见下文）。

在显示的示例中，您将保留 E、D、A（只要它们通过了上述测试）。

第二阶段

剩下 B 和 C。对每个位置列表进行排序。例如，这会告诉你 B 的最小位置是第 2 行。现在直接比较 B 和它下面的最小行中的每个数组，这里是第 2 行。这里只有一个这样的数组 D。 B 和 D 之间的直接比较。这表明第 3 行中 B < D，因此 B 与 D 兼容。如果该项目与低于其最小位置的每个数组兼容，则保留它。我们保留 B。

现在我们对 C 做同样的事情。在 C 的情况下，我们只需要与 A 进行一次直接比较。C 支配 A，所以我们不保留 C。

请注意，除了测试最后一列中没有出现的项目之外，我们还需要测试阶段 1 中相等的项目。例如，假设第 1 行中的 D=A=E。在这种情况下，我们必须进行直接比较对于最后一列中涉及数组的每个等式。因此，在这种情况下，我们直接将 E 与 A 和 E 与 D 进行比较。这表明 E 支配 D，因此不保留 E。

最终结果是我们保留 A、B 和 D。C 和 E 被丢弃。

该算法的整体性能为阶段 1 的 n2*log n + { n 下限，n * log n - 上限 } 在阶段 2。因此，最大运行时间为 n2*log n + nlogn，最小运行时间为 n2logn + n。请注意，您的算法的运行时间是 n 立方 n3。由于您比较每个矩阵（n * n）并且每个比较是n个元素比较= n * n * n。

一般来说，这将比蛮力方法快得多。大部分时间将花费在对原始矩阵进行排序上，这是或多或少不可避免的任务。请注意，您可以通过使用优先级队列而不是排序来改进我的算法，但生成的算法会复杂得多。

# git - 键盘上的 Git 和 GitHub

> ID：14982417
> 
> 赞同：1
> 
> 时间：2013-02-20T14:34:51.947
> 
> 标签：git, github

我阅读了一些类似的问题，但我只使用了 git 几天，而且我的项目进展迅速，所以我需要尽快实施 Git。我最近看到的是[这个帖子](https://stackoverflow.com/questions/6389894/using-git-on-usb-stick-for-travelling-code)

我在工作中处理我的代码（在课程休息时间！）这是一个没有互联网的地方的预告片（我每周离开 4 天）然后我回家并将更改推送到 GitHub 并与其他贡献者一起工作.

我没有笔记本电脑，所以我的家庭工作站留在原地，我使用公司机器和 Ubuntu LiveCD 以及我的工具链和键盘上的代码。

我将如何设置它，以便我有最少的大惊小怪？目前在 ubuntu 机器上，如果我执行“git status”，我会收到错误消息： `fatal: Not a git repository (or any parent up to mount parent /media)` `Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).`

注意：我目前在 GitHub 中有一个项目的最新代码，另一个项目我需要初始化一个新的 git，但我首先在等待答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:06:24.430

您可以`git init`直接在您的 USB 密钥中，以便将您的 git 存储库放在那里，然后在您的笔记本电脑和公司机器上克隆该 git 存储库。

然后您可以：

*   只需将您的项目复制到该本地克隆中，添加并提交，然后推回“原点”（这是您的 USB 密钥），使您的项目始终保存在该密钥上。
*   添加另一个远程调用`github`，并在您可以访问它时使用它将您的代码推送到 GitHub。

[如此处所述](http://www.totalannihilationclojurechallenge.com/2012/05/setting-gitdiscoveryacrossfilesystem.html)，您可能希望设置`GIT_DISCOVERY_ACROSS_FILESYSTEM`：

```
 sudo nano /etc/environment 
```

> 添加以下行：

```
 GIT_DISCOVERY_ACROSS_FILESYSTEM=1 
```

[http://www.totalannihilationclojurechallenge.com/2012/05/setting-gitdiscoveryacrossfilesystem.html](http://www.totalannihilationclojurechallenge.com/2012/05/setting-gitdiscoveryacrossfilesystem.html)

# sql-server - 用 3 个表优化 TSQL 查询

> ID：14982419
> 
> 赞同：0
> 
> 时间：2013-02-20T14:34:57.987
> 
> 标签：sql-server, tsql, optimization, query-optimization

我需要从数据库中获取所有运行，但需要标记此运行是否有错误。

3 表：

*   运行：包含运行）
*   Runfiles：包含在运行期间处理的文件 ID
*   消息：包含错误、警告、...

这个查询可以进一步优化吗？

```
SELECT TOP 1000 runid, 
            start, 
            end, 
            userid, 
            CASE 
              WHEN EXISTS(SELECT rf.fk_fileid 
                          FROM   runfiles rf 
                          WHERE  rf.fk_runid = r.runid 
                                 AND EXISTS(SELECT m.messageid 
                                            FROM   messages m 
                                            WHERE  m.fk_fileid = 
                                                   rf.fk_fileid 
                                                   AND m.fk_statusid = 4)) 
            THEN 1 
              ELSE 0 
            END                 AS ContainsError
FROM   runs r 
ORDER  BY start DESC 
```

请不要评论表名，它们是为这个问题翻译的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:32:13.933

尝试这个：

```
SELECT TOP 1000
     r.runid
    ,r.start
    ,r.[end]
    ,r.userid
    ,CASE WHEN m.messageid IS NOT NULL THEN 1 ELSE 0 END AS ContainsError
FROM runs r
LEFT JOIN runfiles rf
    ON rf.fk_runid = r.runid
LEFT JOIN [messages] m
    ON m.fk_fileid = rf.fk_fileid
    AND m.fk_statusid = 4
ORDER BY r.start DESC 
```

选择列表中的任何内容都会针对结果集中的每一行运行。这意味着您的`CASE`语句中的嵌套子查询正在为这些`TOP 1000`行中的每一行执行。

使用左连接和`CASE`语句来检查主键是否为空允许将整个语句作为一个集合进行评估，而 SQL Server 就是这样做的。它应该以这种方式表现更好。

# javascript - 带有 AngularJS 指令的 Markdown

> ID：14982422
> 
> 赞同：13
> 
> 时间：2013-02-20T14:35:11.257
> 
> 标签：javascript, html, angularjs, markdown

我正在尝试使用 AngularJS 为 HTML 创建一个指令，以便我可以在浏览器中呈现 Markdown。我想要的是有一个`<markdown>`带有`src`属性的标签，它将加载指定的文件并正确呈现它。

我已部分实施如下 -

```
function Main($scope) {
    $scope.theContent = '#asgakfgajgfas\n##akfaljfqpo\ndhvkajvlbndvm';
};

angular.module('myApp', [])
    .directive("markdown", function ($compile) {
    return {
        restrict: 'E',
        require: 'model',
        scope: {
            value: "=model"
        },
        template: '<div ng-bind-html-unsafe="value | markdown"></div>'
    };
}).filter('markdown', function () {
    var converter = new Showdown.converter();
    return function (value) {
        return converter.makeHtml(value || '');
    };
}); 
```

以及相应的 HTML -

```
<div ng-controller="Main">
    <markdown model="theContent"></markdown>
</div> 
```

这是上述代码的[jsFiddle 链接](http://jsfiddle.net/x97BJ/2/)（基于 John Linquist 的示例）。这不适用于该`src`属性，但它能够加载模型中指定的降价文本字符串。

您能否告诉我如何更改此代码以加载`src`标签中指定的文件。我正在考虑使用`$http`AngularJS 提供的，但无法在指令定义中实际使用它。

我想要实现的是`<markdown src="a/b/c.md" />`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T12:53:16.233

我终于想出了一个解决方案。

```
// Render markdown in the HTML page
app.directive("markdown", function ($compile, $http) {
    var converter = new Showdown.converter();
    return {
        restrict: 'E',
        replace: true,
        link: function (scope, element, attrs) {
            if ("src" in attrs) {
                $http.get(attrs.src).then(function(data) {
                    element.html(converter.makeHtml(data.data));
                });
            } else {
                element.html(converter.makeHtml(element.text()));
            }
        }
    };
}); 
```

我定义了一个自定义`link`函数，它要么获取`<markdown>`标签的内容并正确呈现它们，要么获取`src`属性中给定的文件的内容并呈现它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-10T18:17:18.917

另一种选择，基于上面的答案。这个使用 angular eval、watch 和 sanitize，这意味着它对实时编辑很有用，清理 html，这是必要的，因为 markdown 将内联 html （如脚本标签）保持原样，并使用 angular 表达式来访问数据.

## 采用

### 控制器：

```
 $scope.data = {markdown:"#H1"} 
```

### 看法：

```
<div markdown="data.markdown">
</div>

<textarea ng-model="data.markdown"></textarea> 
```

### 代码：

```
angular.module('markdown',['ngSanitize']).directive('markdown', function ($sanitize) {
    var converter = new Showdown.converter();
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            function renderMarkdown() {
                var htmlText = converter.makeHtml(scope.$eval(attrs.markdown)  || '');
                element.html($sanitize(htmlText));
            }
            scope.$watch(attrs.markdown, function(){
                renderMarkdown();
            });
            renderMarkdown();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-23T17:56:51.650

**这是我可以召集的最简单的通用解决方案，因为不需要**使用 $sanatize 或 $sce ：

[http://plnkr.co/edit/6OK0RcMChmD1S3JtfItp?p=preview](http://plnkr.co/edit/6OK0RcMChmD1S3JtfItp?p=preview)

```
 <body ng-app="myApp">

    <textarea ng-model="test"></textarea>
    <div markdown="test"></div>

    <script src="//code.angularjs.org/1.3.0/angular.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js"></script>

    <script>
      angular.module('myApp', [])
        .run(function($rootScope) {
          $rootScope.test = '#foo\r- bar\r- baz'
        })
        .directive('markdown', function () {
              var converter = new Showdown.converter();
              return {
                  restrict: 'A',
                  link: function (scope, element, attrs) {
                      function renderMarkdown() {
                          var htmlText = converter.makeHtml(scope.$eval(attrs.markdown)  || '');
                          element.html(htmlText);
                      }
                      scope.$watch(attrs.markdown, renderMarkdown);
                      renderMarkdown();
                  }
              };
          });
    </script>
  </body> 
```

**结果：**

# 富

*   酒吧
*   巴兹

# eclipse - Eclipse 自动关闭

> ID：14982431
> 
> 赞同：1
> 
> 时间：2013-02-20T14:35:55.387
> 
> 标签：eclipse, ubuntu, slf4j

我的 Ubuntu 12.10 中的 Eclipse 会自动关闭。它发生了很多时间。当我从终端执行 eclipse 时，它​​给了我以下消息。

```
 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
Refresh!!
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
Refresh!!
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize 

```

我不知道是什么导致了这个问题。

**什么是`org.slf4j.impl.StaticLoggerBinder`以及如何加载它？**

此外，如果安装的任何插件导致问题，我已经安装了以下插件。

*   WindowsBuilder 专业版
*   春季IDE
*   EGit
*   m2eclipse
*   数据库查看器
*   Dali Java 持久化工具

我不能把整个**.log**放在这个问题中，所以我把它放在[gist.github.com](https://gist.github.com/TheKojuEffect/4996082#file-eclipseautocloseerror-log)

# xml - XPath 选择没有指定子节点的节点

> ID：14982433
> 
> 赞同：1
> 
> 时间：2013-02-20T14:35:56.687
> 
> 标签：xml, xpath, nodes

```
<a>
   <b />
   <c />
</a>
<a1>
   <b />
</a1> 
```

如何选择没有指定子节点的节点？例如，在我的示例**a1**中，我需要所有没有**c**节点的节点。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:39:53.637

鉴于：

```
<root>
    <a>
        <b />
        <c />
    </a>
    <a1>
        <b />
    </a1>
</root> 
```

采用：`/root/*[not(c)]`

结果是`a1`。**

# php - 这是在 PHP mvc 中缓存查询和构建页面的可接受方式吗？

> ID：14982434
> 
> 赞同：2
> 
> 时间：2013-02-20T14:35:56.480
> 
> 标签：php, oop, caching, model-view-controller

下面的代码是否显示了一种可接受的方式来缓存完全构建的页面和数据库查询？

已构建页面的缓存从`__construct`控制器中的 开始，然后以 结束`__destruct`，在此示例中，所有页面默认缓存 15 分钟到一个文件。

查询缓存已完成，`apc`它们在每个查询的指定时间内存储在内存中。在实际站点中，apc 缓存还有另一个类，以便可以根据需要进行更改。

我的目标是构建最简单的 mvc，我失败了还是走在正确的轨道上？

**控制器**

```
//config
//autoloader
//initialiser - 

class controller {

    var $cacheUrl;

    function __construct(){

        $cacheBuiltPage = new cache();
        $this->cacheUrl = $cacheBuiltPage->startFullCache();
    }

    function __destruct(){

        $cacheBuiltPage = new cache();
        $cacheBuiltPage->endFullCache($this->cacheUrl);
    }
}

class forumcontroller extends controller{

    function buildForumThread(){

        $threadOb = new thread();
        $threadTitle = $threadOb->getTitle($data['id']);

        require 'thread.php';
    }
} 
```

**模型**

```
class thread extends model{

    public function getTitle($threadId){

        $core = Connect::getInstance();
        $data = $core->dbh->selectQuery("SELECT title FROM table WHERE id = 1");

        return $data;
    }
} 
```

**数据库**

```
class database {

    public $dbh;
    private static $dsn  = "mysql:host=localhost;dbname=";
    private static $user = "";
    private static $pass = '';  
    private static $instance;

    private function __construct () {
        $this->dbh = new PDO(self::$dsn, self::$user, self::$pass);
    }

    public static function getInstance(){
        if(!isset(self::$instance)){
            $object =  __CLASS__;   
            self::$instance = new $object;
        }
        return self::$instance;
    }

    public function selectQuery($sql, $time = 0) {

        $key = md5('query'.$sql);

        if(($data = apc_fetch($key)) === false) {

            $stmt = $this->dbh->query($sql);
            $data = $stmt->fetchAll();

            apc_store($key, $data, $time);
        }
        return $data;
    }
} 
```

**缓存**

```
class cache{

    var url;

    public function startFullCache(){

        $this->url = 'cache/'.md5($_SERVER['PHP_SELF'].$_SERVER['QUERY_STRING']);   

        if((@filesize($this->url) > 1) && (time() - filectime($this->url)) < (60 * 15)){
            readfile($this->url);
            exit;
        }

        ob_start();

        return $this->url;
    }

    public function endFullCache($cacheUrl){

        $output = ob_get_contents();
        ob_end_clean();

        $output = sanitize_output($output);

        file_put_contents($cacheUrl, $output);

        echo $output;
        flush();
    }

} 
```

**看法**

```
<html>
<head>
<title><?=$threadTitle[0]?> Thread - Website</title>
</head>
<body>

    <h1><?=$threadTitle[0]?> Thread</h1>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-15T09:46:44.063

## “外包”缓存

首先，您必须了解`GET`请求的缓存通常在整个互联网上完成。特别是如果您的用户通过某种代理进行连接。

然后还可以设置较长的过期时间，以便用户的浏览器缓存 HTML 页面和/或媒体文件。

要开始研究这一点，您应该阅读[这](https://developers.google.com/speed/docs/best-practices/caching) [两篇](https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers)文章。

## 你的目标是什么？

在开始尝试添加缓存之前，请确保您确实需要它。做一些基准测试，看看你的瓶颈是什么。**为了优化而优化是没有意义的，而且往往是有害**的。

如果您知道（并且有数据支持它......这与“感觉”无关）您的应用程序正在执行过多的 SQL 查询，而不是跳转到查询缓存，您应该首先检查这些查询的用途。

> [**例如：**
> 如果您看到，您对每个页面视图执行慢查询只是为了生成[标签云](https://en.wikipedia.org/wiki/Tag_cloud)，那么您应该存储已经完成的标签云（作为 HTML 片段）并仅在发生更改时更新它。]

此外，在尝试提高性能时， *“添加缓存”*绝不应该是您的第一步。如果您的查询很慢，请使用`EXPLAIN`以查看它们是否正确使用索引。确保您没有多次查询相同的数据。还要看看，如果查询真的有意义。

## 这不是 MVC

我不确定，你是从哪里学会这样写的，但你似乎错过了 MVC 的全部要点：

*   “视图”不是模板
*   “模型”不是数据库抽象
*   “控制器”不是应用程序逻辑

您似乎也缺少“层”一词的含义。它不是“类”的同义词。层是在类似情况下可重用的可重用组件组^([[1]](http://en.wikipedia.org/wiki/Layer_%28object-oriented_design%29))。

您可能会从阅读[这篇](https://stackoverflow.com/a/5864000/727208)文章和[这篇](https://stackoverflow.com/a/16356866/727208)文章中受益。它们应该可以帮助您了解这种架构模式的基础知识。

## 在 MVC 架构中缓存在哪里？

在使用 MVC（或受 MVC 启发的）架构时，基本上有两点可以进行缓存：视图和持久性逻辑。

缓存视图主要需要重用一次渲染的模板（MVC 中的每个视图都将处理多个模板和相关的 UI 逻辑）。请参阅前面带有标签云的示例。

持久性逻辑中的缓存将取决于您的实现。

*   您可以使用服务缓存应该传递给[域对象](http://c2.com/cgi/wiki?DomainObject)的数据：

    > [**注意：**在实际应用中，`new`实例不会在这里。相反，您将使用一些工厂]

    ```
    $user = new User;
    $user->setId( 42 );

    $cache = new Cache;

    if ( !$cache->fetch( $user ))
    {
        $mapper = new UserMappper;
        $mapper->fetch( $user );
    }

    $user->setStatus( User::STATUS_BANNED );
    $cache->store( $user );
    $mapper->store( $user );

    // User instance has been populated with data 
    ```

*   缓存的另一点是存储库和/或身份映射，如果您将持久层扩展到使用简单映射器之外。用一个简单的代码示例很难解释。相反，您应该阅读[《企业应用程序架构模式》](https://rads.stackoverflow.com/amzn/click/com/0321127420)一书。

## ..您的代码中的其他一些不良做法：

*   请停止使用单例建立数据库连接。无法编写单元测试并导致与类的特定名称紧密耦合。我建议改用[这种方法](https://stackoverflow.com/a/11369679/727208)并将数据库连接注入需要它的类中。

*   此外，**如果您的查询没有参数**，则准备它没有意义。准备好的语句用于将数据传递给 SQL .. 但您的示例都没有任何参数。

    这个问题主要是因为你神奇的*数据库*类。[相反，您应该在多个数据映射器](http://www.martinfowler.com/eaaCatalog/dataMapper.html)中分离持久性逻辑。这样，您就不会面临为所有查询使用单一方法的自我造成的问题。

*   `var`关键字是 PHP4 的神器。现在我们使用`public`,`private`和`protected`。

*   您正在对代码中的连接详细信息进行硬编码。这基本上违反了[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)（简化版：[here](http://tomdalling.com/wp-content/uploads/OCP.jpg)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T00:47:43.743

## 更新

> **这是在 PHP mvc 中缓存查询和构建页面的可接受方式吗？**
> 
> 已构建页面的缓存从控制器中的 __construct 开始，然后以 __destruct 结束，在此示例中，所有页面都默认缓存 15 分钟到文件中。

当释放所有引用或脚本终止时，将调用析构函数。我认为这意味着脚本正确终止时。我会说关键异常不能保证调用析构函数。

例如

```
 class A 
 {
    public function __construct()
    {
       echo "Construct\n";
    }

    public function __destruct()
    {
      echo "Destruct\n";
    }
 } 
```

测试代码：

```
 $test = new A();
    die( "Dead\n");  // Will output Construct; dead; Destruct

   $test = new A();
   throw new Exception("Blah\n"); // Construct, Fatal error (no destruct)

   $test = new A();
   require_once( 'invalid_file.php'); // Construct, Fatal error (no destruct) 
```

你最好使用[register_shutdown_function()](http://www.php.net/manual/en/function.register-shutdown-function.php)来确定。但小心点

> 可以对 register_shutdown_function() 进行多次调用，每次调用的顺序与注册时的顺序相同。如果您在一个已注册的关闭函数中调用 exit()，则处理将完全停止，并且不会调用其他已注册的关闭函数。”如果其他关闭函数在您之前运行，则无法保证您的关闭函数会被调用。

恕我直言，您正在重新发明轮子，已经有很多框架了。你想要一个简单又小的吗？好吧，有[Silex](http://silex.sensiolabs.org/)

它是由创建 Symfony 的同一个人构建的。相信我，你会浪费你的时间。

或者为什么不尝试使用**Laravel**你可以只选择你想要的包而不是所有框架他们已经有一个设计良好的缓存系统见[http://laravel.com/docs/cache](http://laravel.com/docs/cache)

要了解如何以 MVC 风格正确完成缓存，Symfony 2 的文档有一个[很好的解释](http://symfony.com/doc/current/book/http_cache.html)

另请阅读此问题[Caching strategy in MVC Framework](https://stackoverflow.com/questions/12999351/caching-strategies-in-mvc-framework)

就其中任何一项的必要性而言；这真的取决于你的情况。以我的经验，除非您期望有大量用户（例如，同时在您的网站上有几十个用户），否则您不需要缓存。另一方面，如果没有经过深思熟虑的缓存策略，像 StackOverflow 这样的网站将无法运行。

* * *

```
How would you create a build function to cache the entire built page? 
```

正如我从您的问题中了解到的那样，您想缓存整个页面？

```
How would you create a build function to cache the entire built page? 
```

您可以简单地使用输出缓冲来实现这一点。

一个例子是你有**index.php**代码：

```
<?php

 ob_start();   

 // All your mvc and application logic here

 $output = ob_get_contents();
 ob_end_clean(); 
```

**现在在$output**中捕获 ob_start() 和 ob_get_contents() 之间的整个页面输出

 **您可以将其保存在文件中并做任何您想做的事情

您可以在 PHP 网站中阅读有关[ob_get_contents()的更多信息](http://www.php.net/manual/en/function.ob-get-contents.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T22:33:30.180

这完全取决于您的性能问题所在。如果它们在您的数据库查询中，则缓存它们 - 但当然您的控制器需要为脏数据做好准备。

如果您要在控制器层缓存内容，那么效果会更好，但您可能需要缓存更多内容（您的数据库数据将小于您的 HTML）。当然，用户需要为看到脏数据做好准备。

不幸的是，您并没有真正的硬性规则，因为每个解决方案都有不同的要求。我的建议是仅在您真正需要时才开始缓存数据。仔细查看您的性能瓶颈在哪里并适当地进行缓存，并确保您可以向外扩展（更多机器）而不仅仅是向上扩展（增加机器规格）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-15T01:21:08.003

我添加了 CodingInsane 发布的内容！

他是对的，这样你就可以轻松制作自己的小缓存机制。

只需将 $output 的内容（在 CodingInsane 帖子中）写入文件，如：the_file.php.cache 并下次在 the_file.php 中读取 the_file.php.cache 的内容并将其显示给用户并退出。

然而，任何缓存机制都需要一种更新方式（重建页面）。为此，您只需跟踪内容是否已更改或检查内容上次更改的时间并将其与上次修改 the_file.php.cache 的时间（filemtime()）进行比较。

祝你好运！**

# javascript - jQuery根据下拉列表选项更改文本

> ID：14982438
> 
> 赞同：1
> 
> 时间：2013-02-20T14:36:15.003
> 
> 标签：javascript, jquery, forms

您好，我正在寻找有关如何根据客户从下拉菜单中选择的账户类型来更改利率值的指导。

形式：

```
<form id="account" action="" method="post">
<select id = "acc_type">
<option value="current">Current</option>
<option value="savings">Savings</option>
</select>

<input type="text" id="interest" value="">

</form>

<script>
$("#account").change(function() {
    var rate = "0.6%";
    if $(#acc_type).val == ("current") {
        rate = "0.6%");
    } else if $(#acc_type).val == ("savings") {
        rate = "0.8%");
    }
    $(#interest).val = rate;
</script> 
```

[http://jsfiddle.net/rmjKV/](http://jsfiddle.net/rmjKV/) 我能解释一下为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:37:11.570

它不起作用，因为那不是有效的 JavaScript。使用像[JSLInt](http://www.jslint.com/)这样的工具来检查您的代码以查看错误。

你在那个代码`(`中遗漏了很多。`)`

查看[MDN 上的 if 语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)

```
if (cipher_char == from_char) {
   result = result + to_char;
   x++;
} else {
   result = result + clear_char;
} 
```

你看到你缺少什么了吗？检查周围的 ( 和 )。

现在 jQuery val 是一个方法，你不是在调用一个方法。你需要 （）。你也不能设置 .val 。

[jQuery val()](http://api.jquery.com/val/)的文档

您的选择器也是错误的，您缺少引号。

学习使用您的控制台！它会告诉你错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:42:44.310

你有很多语法错误和不正确的方式使用 jQuery 函数和选择器

```
$("#account").change(function() {
    var rate = "0.6%";
    if($('#acc_type').val() == "current") 
    {
        rate = "0.6%";
    }
    else if ($('#acc_type').val() == "savings") 
    {
        rate = "0.8%";
    }
    $('#interest').val(rate);
}); 
```

您需要阅读更多关于 JS 语法和 jQuery 选择器和函数使用的信息

检查小提琴更新 [http://jsfiddle.net/sedz/rmjKV/2/](http://jsfiddle.net/sedz/rmjKV/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:38:13.690

JSHint 不会验证您的代码。除此之外，看起来您正在绑定`form`更改而不是`acc_type`更改。

```
$("#acc_type").change(function() {

} 
```

**有效的 JS 代码：**

```
$("#acc_type").change(function()
{
   var rate = "0.6%";
   if ($("#acc_type").val() == "current")
   {
      rate = "0.6%";
   } else if ($("#acc_type").val() == "savings")
   {
      rate = "0.8%";
   }

   $("#interest").val(rate);
}); 
```

[http://jsfiddle.net/rmjKV/5/](http://jsfiddle.net/rmjKV/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:40:56.213

您的代码中有许多错误。我想我已经在下面修复了其中的大部分。

我还将您的代码包装在 jquery 的[ready](http://api.jquery.com/ready/)函数中，因此脚本不会尝试在页面完全加载之前添加事件等。

```
$(document).ready(function() {
    $('#account').change(function() {
        var rate = "0.6%";
        if ($('#acc_type').val() == "current") {
            rate = "0.6%";
        } else if ($('#acc_type').val() == "savings") {
            rate = "0.8%";
        }
        $('#interest').val(rate);
    })
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T14:39:10.970

像这样的东西

```
$(#acc_type) 
```

应该

```
$('#acc_type') 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-20T14:44:01.233

```
$("#acc_type").change(function() {
    var rate = "0.6%";
    if ($('#acc_type').val() == "current") {rate = "0.6%";}
    else if ($('#acc_type').val() == "savings") {rate = "0.8%";}
    $('#interest').val(rate);
}); 
```

在这里找到[http://jsfiddle.net/rmjKV/8/](http://jsfiddle.net/rmjKV/8/)你的 jsFiddle 工作，你的旧代码充满了错别字

# wpf - 带有集合的 wpf 附加属性未更新

> ID：14982441
> 
> 赞同：2
> 
> 时间：2013-02-20T14:36:29.380
> 
> 标签：wpf, collections, observablecollection, attached-properties, inotifycollectionchanged

我喜欢在应用程序和自定义用户控件之间共享一个列表。我使用 IEnumerable 作为附加属性来为自定义 UserControl 内的 Listbox 提供一个列表。ListBox 然后接收附加的属性作为 ItemsSource。到目前为止，这有效。但是当主机列表更改时，用户控件内的列表应该会更新。我怎样才能做到这一点？当前代码设置了 Usercontrol 列表，但是当宿主更改列表时，附加属性不会得到更新。

使用 UserControl 的主机有一个 ComboBox，它应该与 UserControl 的 ListBox 共享它的 ItemsSource

```
public ObservableCollection<Person> PersonList
    {
        get;
        set;
    } 
```

宿主的 Xaml 将 ComboBox 绑定到集合：

```
<ComboBox x:Name="combobox1" Width="200" ItemsSource="{Binding PersonList}" DisplayMemberPath="Name" SelectedIndex="0" IsEditable="True"></ComboBox> 
```

放置在主机内部的用户控件通过附加属性接收集合。绑定看起来很重，但似乎还可以：

```
<myUserCtrl:AdvEditBox
    ...
prop:DynamicListProvider.DynamicList="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},
                        Path=DataContext.PersonList}">
    ...
</myUserCtrl:AdvEditBox 
```

附加属性有一个回调，目前只调用一次：

```
class DynamicListProvider : DependencyObject
{
    public static readonly DependencyProperty DynamicListProperty = DependencyProperty.RegisterAttached(
       "DynamicList",
       typeof(IEnumerable),
       typeof(DynamicListProvider),
       new FrameworkPropertyMetadata(null, OnDynamicListPropertyChanged)));

    public static IEnumerable GetDynamicList(UIElement target) {..}

    public static void SetDynamicList(UIElement target, IEnumerable value) {..}

    private static void OnDynamicListPropertyChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        if (e.NewValue != null && o is FrameworkElement)
        {
          ...
        }
    } 
```

每当主机的 PersonList 更改时，都应调用 OnDynamicListPropertyChanged()。我是否必须将 INotifyCollectionChanged 放在附加属性中？如果是这样，在哪里以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:38:27.747

这是我的解决方案：

1）用户控件的dp：

```
public static readonly DependencyProperty SelectionListProperty = DependencyProperty.Register(
        "SelectionList",
        typeof(ObservableCollection<MyList>),
        typeof(MyUserControl),
        new UIPropertyMetadata(null)); 
```

（..add 属性获取/设置包装）

2) 在列表中设置您的 UserControls ItemsSource，例如

```
_combobox.ItemsSource = SelectionList; 
```

3) 主机拥有该列表。在实例化用户控件的类中添加数据及其属性。就我而言，我使用只读/单向绑定。

```
ObservableCollection<MyList> _bigList= new ObservableCollection<MyList>();
public ObservableCollection<MyList> BigList
    {
        get { return _bigList; }
    } 
```

4）在xaml中设置绑定

```
<myctrl:MyUserControl
    SelectionList="{Binding BigList, Mode=OneWay}"
     ...
 /> 
```

5) 现在，每当您修改 _biglist 时，请在“BigList”上调用您的 PropertyChangedEventHandler。这将通知绑定设置的 UserControl 的 SelectionList 并调用 BigList get{}。希望你很清楚。

# php - 实现序列图时的小问题

> ID：14982447
> 
> 赞同：0
> 
> 时间：2013-02-20T14:36:41.750
> 
> 标签：php, html, database, web, sequence-diagram

我在下面的屏幕截图中有一个序列图，但我有两个小问题：

问题 1：页面遵循顺序，直到用户进入`Penalty Marks Information`页面，然后他们决定是否要`enable penalty marks`使用`disable penalty marks`. 如果启用，那么他们会转到`Penalty Marks for Each Answer`页面，但如果他们想禁用，那么他们就直接进入`Assessment Completed`页面。我的问题是，下图在尝试匹配时是否正确，或者是否需要在图中以不同的方式实现。

问题2：提交每个页面后，它自己插入到数据库表中，如何在图表中也包括它也插入到数据库中？有人可以在两页之间展示一个如何做到这一点的例子，这样我就可以看到它是如何完成的？

时序图截图：

![在此处输入图像描述](../Images/bd1b3854795bb820d997326d6549ac7d.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:57:37.607

序列图似乎没有遵循一般方法。来自[WikiPedia 文章](http://en.wikipedia.org/wiki/Sequence_diagram)（和 UML 用户指南）：序列图

> 描述场景中涉及的对象和类以及执行场景功能所需​​的对象之间交换的消息序列

因此，“泳道”不应标有“创建评估”之类的活动，而应标有解决方案中的对象。您显示哪些对象取决于系统设计；在 MVC 应用程序中，您将展示“评估控制器”与“评估”模型对象对话，该模型对象可能与数据库对话以存储和检索评估。

消息在系统中的参与者/对象之间发送。因此，已登录的教师向评估控制器发送消息“创建”；评估控制器验证消息并创建一个新的“评估”模型对象，该模型对象可能会向数据库发送“持久”消息。

当然，还有其他使用序列图的方法——这取决于您使用的粒度级别。您可以简单地对领域实体（教师、评估、问题、答案等）进行建模，并探索它们如何相互发送消息以实现场景，或者您可以对软件组件（浏览器、Web 服务器、脚本引擎、数据库）进行建模 -这取决于您要达到的目标。

一个非常简单的版本可能是这样的（我在创建答案后停止了，因为我不能完全遵循要求）。 ![粗略的草图](../Images/0ba599451bc885cf1009843c5e8d4d32.png)

恰当的问题 2：首先您必须决定哪个组件告诉数据库保存评估 - 这完全取决于您的软件设计。一旦你做出决定，你就从那个组件到数据库画一条线，并带有“保存”消息；数据库以“成功”或“失败”响应。

# java - 在 Java 中未按要求获取用户输入

> ID：14982455
> 
> 赞同：0
> 
> 时间：2013-02-20T14:36:53.843
> 
> 标签：java

我是 Java 新手，但我不熟悉 C++ 编程。

我只是想从用户那里获取整数或字符串形式的输入，但是当我执行我的程序时，它只是静止不动，直到我按 Enter 键才执行任何操作。给出了按“Enter”后我的程序和结果。

我的问题是“**为什么我没有得到用户输入？** ”

```
 import java.util.Scanner;

    class roomarea
    {
        public static void main(String[] args)
        {
            Scanner scanner = new Scanner(System.in);
            int input = scanner.nextInt();
            System.out.println("Enterd value is " + input);
        }
    } 
```

结果是

```
Start Running math >Command: "C:\Program Files\Java\jdk1.6.0\bin\java.exe"    
-classpath "C:\Documents and Settings\Ahmad Abdullah\My Documents\NaviCoder IDE for    
Java\projects\math\output\classes";"C:\Program Files\Java\jdk1.6.0\jre\lib\rt.jar";    
roomarea 

Exception in thread "main" java.util.InputMismatchException at
    java.util.Scanner.throwFor(Scanner.java:840)    at    
    java.util.Scanner.next(Scanner.java:1461)   at    
    java.util.Scanner.nextInt(Scanner.java:2091)    at    
    java.util.Scanner.nextInt(Scanner.java:2050)    at 
    roomarea.main(Main.java:14)  >Run 
```

过程完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:45:30.547

当你说“它只是静止不动，直到我按 Enter 键之前什么都不做”，它完全按照你告诉它的去做——它正在等待你输入一个`int`. 您只是按 Enter 表示没有输入，您的扫描仪无法将其解释为`int`，因此出现异常。

如果您输入一个整数然后按回车键，您的程序应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:44:59.593

如果您输入 an`int`作为输入，您的程序应该可以工作。（通过在“等待”程序时按下`Enter`，您可能会出现您正在谈论的异常）。

例如，如果你输入一个字符，你会得到[InputMismatchException](http://docs.oracle.com/javase/7/docs/api/java/util/InputMismatchException.html)异常：

> 由 Scanner 抛出以指示检索到的令牌与预期类型的​​模式不匹配，或者令牌超出预期类型的​​范围。

# c++ - 保留目录结构

> ID：14982459
> 
> 赞同：3
> 
> 时间：2013-02-20T14:37:08.040
> 
> 标签：c++, cmake

我有一个具有以下结构的项目：

*   源代码

    *   工具
    *   模块
    *   核
        *   着色器
        *   缓冲
*   公司

    *   工具
    *   模块
    *   核
        *   着色器
        *   缓冲

CMake 使用唯一文件夹“源文件”中的所有 .cpp 文件创建我的项目。我试图在这里保留原始结构是我的 CMakeLists.txt ：

```
# Paths.
set( SRCROOT ${PROJECT_SOURCE_DIR}/src/Framework/Graphic )
set( INCROOT ${PROJECT_SOURCE_DIR}/inc/Framework/Graphic )

# Get .hpp and .cpp files.
file(
    GLOB_RECURSE
    GRAPHIC_FILES
    ${SRCROOT}
    ${INCROOT}
)

# Packages.
find_package(OpenGL REQUIRED)

# Create the library.
add_library(Graphic ${GRAPHIC_FILES} ) 
```

我该如何处理？谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:47:18.920

我假设您正在使用 CMake 创建一个 Visual Studio 项目，并希望在文件系统中组织源文件时可视化它们。

您可以通过对每个子文件夹中的文件显式使用 CMake[源组](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3asource_group)命令来做到这一点。

```
FILE(GLOB TOOLS_FILES
    ${SRCROOT}/src/tools/*
)
SOURCE_GROUP(tools FILES ${TOOLS_FILES}) 
```

... 等等。（未经测试的代码）

# http - Netty http 服务器响应

> ID：14982461
> 
> 赞同：3
> 
> 时间：2013-02-20T14:37:15.170
> 
> 标签：http, netty

这可能很简单，但我无法弄清楚。我的基于 Netty 4 的 http 服务器导致 http 客户端挂起它的响应。它设法通过其响应有效负载发送（如使用 curl 作为客户端所观察到的那样），但客户端似乎没有意识到响应已经完成并且他们无限期地等待它完成。使用 curl 以及 firefox 和 chrome 进行观察。

仅当我修改代码以关闭通道（channel.close，如下面的内联所示）时，客户端才会确认响应已完成。否则，他们只是继续等待它完成。我希望通道保持打开状态，以便下一个客户端请求不需要打开新连接（我希望保持活动行为），因此关闭通道似乎不合理。所以我不确定服务器应该如何将响应标记为结束——而不关闭连接。

服务器代码：

```
val response = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK)
val buf = new StringBuilder
buf.append("hello")
response.data.writeBytes(Unpooled.copiedBuffer(buf, CharsetUtil.UTF_8))
ctx.write(response).addListener(new ChannelFutureListener(){
  def operationComplete(channelFuture: ChannelFuture){
    if (channelFuture.isSuccess){
        println("server write finished successfully")
        //channelFuture.channel.close <===== if uncommented, clients receive the response, otherwise they just keep waiting forever
    }
    else 
        println ("server write failed: " + channelFuture.cause + "\n" + channelFuture.cause.getStackTraceString)
  }
}) 
```

我错过了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:29:15.653

您需要一个 Content-Length 标头，否则客户端将不知道何时停止读取，并会不断轮询更多数据。

# iphone - 两个scrollView应该在任何一个scrollView中一起移动

> ID：14982464
> 
> 赞同：1
> 
> 时间：2013-02-20T14:37:20.397
> 
> 标签：iphone, ios, uiscrollview, uiscrollviewdelegate

我正在努力`UIScrollView`，我是编程新手。`UIScrollView`如果我滚动第一个滚动视图，如何在任何一个滚动视图中同时滚动两个滚动视图，那么第二个滚动视图也应该与第一个滚动视图一起移动如果有人有想法，请建议我

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:01:03.093

您可以借助`UIScrollView`. 这是给你的演示代码：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView == scroll1)
    {
        scroll2.contentOffset = CGPointMake(content x and y of your scroll1);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T09:51:55.623

```
UIScrollView *otherView = (scrollView==scroll2)?scroll1:scroll2;

CGPoint offSet = otherView.contentOffset;
offSet.y = scrollView.contentOffset.y;

[otherView setContentOffset:offSet]; 
```

# facebook-like - like 不适用于我们的 URL

> ID：14982465
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:37:22.220
> 
> 标签：facebook-like

我有一个likebutton的问题。一旦用户单击“赞”按钮，评论框就会出现（非常）短的时间，然后再次消失，而没有给用户点赞的能力。它与点赞按钮所指的 URL 有关。如果我将另一个 URL 放入 iframe 中，它就可以工作。为什么不能喜欢我们的网站 (www.comex.eu)？有人有想法吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:50:59.750

如果 Facebook 认为该网站存在类似劫持/恶意等行为，或者即使有太多点赞来自特定 IP 地址，Facebook 有时也会阻止点赞注册。给它一些时间（1-2 天），它应该开始工作（最终）。

或者，尝试使用不同的帐户或不同的 IP 地址为网站点赞。但不要一直喜欢/不喜欢它，否则 Facebook 的系统会认为它是垃圾邮件。

# image - symfony2 如何从浏览器访问 app/Resources/img？

> ID：14982476
> 
> 赞同：1
> 
> 时间：2013-02-20T14:38:04.157
> 
> 标签：image, symfony, accessible

我有一些我不想包含在任何捆绑包中的项目特定图像。我想让它们从树枝层访问。问题是：我如何发布它们（我在 web 目录中既看不到符号链接，也看不到项目中的资产配置）。任何提示将不胜感激。

编辑：当我跑步时

```
php app/console assets:install help 
```

我得到`Installing assets for XxxBundle into web/bundles/xxx`了，但 app/Resources 目录没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:08:20.823

如果您真的不想将它们放在一个包中，您可以直接将它们放在 web 目录中。例如`image.jpg`放置在`web/appImages/`可以显示在模板中使用`img src="/appImages/image.jpg" />`。

然而，“Symfony 方式”鼓励您将所有内容都放在包中。如果您不想将资源放在代码所在的特定捆绑包中，则可以为应用程序范围的资源专门设置一个单独的捆绑包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:23:40.357

您可以通过执行以下操作在 app/Resources/img 中发布项目：

```
php app/console assetic:dump --env=prod --no-debug 
```

从项目的根目录。

那是您放置系统范围库的地方。

# json - 如何从 php 中的 json_decode 正确回显

> ID：14982480
> 
> 赞同：0
> 
> 时间：2013-02-20T14:38:09.993
> 
> 标签：json, echo

所以我试图从 json_decode 回显数组数据，我尝试了几种方法，但似乎没有任何效果，如何正确执行此操作？

这是我的代码：

```
<?php
$jsonstring = file_get_contents('example.com/json'); //get the string
$decoded = json_decode($jsonstring, true);   //decode the string
echo $decoded[roadDamage][0][place]; //echo array content
?> 
```

回声部分根本不起作用，它什么都没有回声......

我的解码数组看起来像这样，我对 roadDamage 数组和地点、时间的值很感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:42:03.297

```
print_r($decoded) 
```

将打印您的所有数组。如果没有打印任何内容，那么您拼写错误的索引。顺便说一句，最好将关联数组的索引放入`''`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:46:37.263

您的索引需要用引号引起来。否则，PHP 会查找具有该名称的常量，而不是将其解释为字符串。

更改： echo $decoded[roadDamage][0][place];

To: echo $decoded['roadDamage'][0]['place'];

# jquery - jQuery悬停多个元素一个功能

> ID：14982483
> 
> 赞同：3
> 
> 时间：2013-02-20T14:38:15.667
> 
> 标签：jquery, hover

我有三个带有隐藏内部 div 的 div，当您将鼠标悬停在每个 div 上时，它的内部 div 应该显示，而当您再次推出时，它会再次隐藏。

比如我rollover div1，div1 inner出现，我rollout，div1 inner消失。

但是，当我将鼠标从 div1 直接移到 div2 上时，两者都被视为推出，例如 div1 内部消失（应该如此），div2 内部出现（应该如此）但随后 div1 内部立即消失。

除了为 div1 2 和 3 编写单独的函数之外，我不知道该怎么做，非常感谢任何帮助！

jsfiddle.net/user1688604/UZpEH/3

```
var box = $("#box1,#box2,#box3");
var inner = $(".item");

$(box).hover(function() {
    $(this).find(inner).stop(true,true).css({"left":"20px"}).animate({"top":"-10px", "opacity": "1"},400);

}, function() {
    $(this).find(inner).stop(true,true).animate({"top":"-20px", "opacity": "0"},400, function() {
        $(inner).css({"left":"-9999px", "top":"0"});
        });
});

<div id="box1">
<div class="item"></div>
</div>

#box1, #box2, #box3 {
            width: 300px;
            float: left;
            margin-right: 20px;
            position: relative;
            }

            .item {
                width: 151px;
                height: 49px;
                padding: 5px 10px 0;
                opacity: 0;
                position: absolute;
                    top: 0;
                    left: -9999px;
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:43:03.247

向框 div 添加一个类（每个类都相同）

```
<div id="box1" class="box">
    <div class="item"></div>
</div> 
```

jQuery

```
$(".box").hover(function(){
   $(this).find(".item").stop(true,true).css({"left":"20px"}).animate({"top":"-10px", "opacity": "1"},400);
},function(){
   $(this).find(".item").animate({"top":"-20px", "opacity": "0"},400, function() {
       $(this).css({"left":"-9999px", "top":"0"});
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:43:02.327

在哪个 div 或任何字段上，您想提供悬停功能只需调用相同的类名，然后通过引用该类名来触发您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:02:20.520

试试下面...它会帮助你..

为所有 DIV 保持相同的类名 .. 并尝试以下..

小提琴示例：http: [//jsfiddle.net/RYh7U/96/](http://jsfiddle.net/RYh7U/96/)

**HTML：**

```
<div class="divBox">
    Show Div1
<div class="item">
Div 1    
</div>
</div>

<div class="divBox">
    Show Div 2
<div class="item">
    Div 2

</div>
</div>

<div class="divBox">
    Show Div 3
<div class="item">    
    Div 3
</div>
</div> 
```

**查询：**

```
$('.item').hide(); 
$('.divBox').hover(function() { 
    $(this).children('.item').show();     
}, function() { 
    $(this).children('.item').hide(); 
}); 
```

# ember.js - 在同一页面上处理两个独立的内容容器

> ID：14982490
> 
> 赞同：2
> 
> 时间：2013-02-20T14:38:25.200
> 
> 标签：ember.js

我正在使用 ember.js 开发单页应用程序。我有一个仪表板，其中包含两个彼此独立的不同内容部分（因此它不是主/详细关系）。

结构是这样的（使用Haml）：

```
#dashboard
  #top
    %nav
    .content
  #bottom
    %nav
    .content 
```

在#top 和#bottom 中都有一个小导航，可以独立更改#top 和#bottom 的内容。ember的方法是什么

1.  加载仪表板的初始状态（带有#top 和#bottom 的默认内容）
2.  使用相应的导航为#top 或#bottom 加载新内容。将新内容加载到 #top 不应更改或删除 #bottom 中已存在的内容，反之亦然。

我还在学习 ember.js。我希望这个问题是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:09:14.590

如果您想让这些不同的仪表板状态可路由（可表示为 URL），您需要提出一个允许独立导航的 URL 方案。假设每个顶部和底部部分都可以将“foo”、“bar”或“baz”作为当前窗格。我会建议

```
/dashboard/foo;bar 
```

或者

```
/dashboard/foo+bar 
```

现在您已经选择了一个 URL 方案，您需要告诉路由器如何序列化和反序列化该方案。资源路由需要一个模型，所以我们会伪造一个：

```
App.DashboardPages = Ember.Object.extend({
  top:    Ember.required(),
  bottom: Ember.required(),
});

App.Router.map(function() {
  this.resource('dashboard', { path: '/dashboard/:pages' });
});

App.DashboardRoute = Ember.Route.extend({
  model: function(params) {
    // TODO: error handling for bad URLs

    var pages      = params.pages.split('+');

    return App.DashboardPages.create({
      top:    pages[0],
      bottom: pages[1]
    });
  },

  serialize: function(model) {
    return {
      pages: "%@+%@".fmt(model.get('top'), model.get('bottom'))
    };
  }
}); 
```

然后，在您的 中`DashboardController`，您可以根据`DashboardPages`“模型”选择子视图。

# sql - 使用另一个表的结果进行 SQL 更新

> ID：14982492
> 
> 赞同：3
> 
> 时间：2013-02-20T14:38:28.803
> 
> 标签：sql, sql-server

我想使用以下查询更新表 products 上的 qty 字段。此查询在 Qty 字段中向我返回所需的数字。

```
SELECT e.Prod_name, e.Prod_number,
  (SUM(e.Qty) - SUM(g.Qty)) Qty
FROM Products_Invoices e JOIN (
    SELECT product_number, SUM(qty) Qty
    FROM SoldItemsCalc
    GROUP BY product_number
  ) g ON e.Prod_number = g.product_number
GROUP BY Prod_number, Prod_name
order by Prod_name 
```

如何使用此查询并更新 product_number 匹配的值

我不介意您是否更改查询...只需要更新数量值

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:40:55.687

我这样做：

```
with toupdate as (
    SELECT e.Prod_name, e.Prod_number, (SUM(e.Qty) - SUM(g.Qty)) Qty
    FROM Products_Invoices e JOIN (
         SELECT product_number, SUM(qty) Qty
         FROM SoldItemsCalc
         GROUP BY product_number
        ) g ON e.Prod_number = g.product_number
    GROUP BY Prod_number, Prod_name
   )
update t
    set qty = toupdate.qty
    from toupdate
    where t.prod_nubmer = toupdate.prod_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:56:59.253

你确定你的数量正在产生你想要的结果吗？您在子查询中执行 SUM，然后在外部查询中执行另一个 SUM。这可能会弄乱你的数字。这是@Gordon 的好答案的一个细微变化——这是使用我认为你想要的数量更新 Product 表：

```
with toupdate as (
    SELECT e.Prod_name, e.Prod_number, (SUM(e.Qty) - g.Qty) Qty
    FROM Products_Invoices e JOIN (
         SELECT product_number, SUM(qty) Qty
         FROM SoldItemsCalc
         GROUP BY product_number
        ) g ON e.Prod_number = g.product_number
    GROUP BY Prod_number, Prod_name, g.Qty
   )
update p
    set qty = t.qty
    from products p join toupdate t on p.prod_number = t.prod_number; 
```

这是带有示例的小提琴：[http ://www.sqlfiddle.com/#!3/42c80/1](http://www.sqlfiddle.com/#!3/42c80/1)

Product_Invoices 表中有 2 条记录总和为 150。SoldItemsCalc 表中有 2 条记录总和为 25。使用您的查询，当我想您想要 125 时，总体结果变为 100。

顺便说一句——使用上面的 CTE 将适用于 SQL Server 2005 及更高版本。如果您需要支持 SQL Server 2000，请使用此版本：

```
update p
    set qty = t.qty
    from products p join (
      SELECT e.Prod_name, e.Prod_number, (SUM(e.Qty) - g.Qty) Qty
      FROM Products_Invoices e JOIN (
         SELECT product_number, SUM(qty) Qty
         FROM SoldItemsCalc
         GROUP BY product_number
        ) g ON e.Prod_number = g.product_number
    GROUP BY Prod_number, Prod_name, g.Qty) t on p.prod_number = t.prod_number; 
```

# c++ - C++ 生成器异常 - StackTrace 为空？

> ID：14982496
> 
> 赞同：1
> 
> 时间：2013-02-20T14:38:34.547
> 
> 标签：c++, exception, c++builder, stack-trace, c++builder-xe2

我想获取堆栈跟踪但它总是空的？

```
try{
    int a = 5, b = 0;
    int c = a/b;
}
catch(Exception &e){
    ShowMessage("Exception: " + e.Message + "\nStackTrace:" + e.StackTrace);
} 
```

使用 C++ Builder XE2。

编辑：此代码在 TForm1::Button1Click 上执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:07:14.330

在这里找到答案： [https ://forums.embarcadero.com/thread.jspa?messageID=419807&tstart=0](https://forums.embarcadero.com/thread.jspa?messageID=419807&tstart=0)

*但是，该属性默认返回一个空字符串。它被设计成第三方异常记录器（MadExcept、EurekaLog 等）可以连接到它以提供实际的堆栈跟踪信息。为什么 Embarcadero 选择不提供他们自己的本地实现是任何人的猜测。*

# node.js - 如何查看包裹历史记录？

> ID：14982502
> 
> 赞同：58
> 
> 时间：2013-02-20T14:38:46.577
> 
> 标签：node.js, npm

如何在 Npm 注册表中查看包的历史记录？

特别想知道[https://npmjs.org/package/npm](https://npmjs.org/package/npm) 1.1.2 版是什么时候发布的。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-20T16:37:49.280

您可以`npm view npm`在[https://docs.npmjs.com/cli/view找到一些选项](https://docs.npmjs.com/cli/view)

例如`npm view npm@1.1.2 time`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-03T09:29:53.077

对于那些想知道如何在线查看这些详细信息的人。我发现有一种稍微丑陋的*方法可以做到这一点。就是这样

1.  假设你的包名是`<packageName>`转到`https://registry.npmjs.org/<packageName>`JSON 这里可能是你运行时得到的相同的东西`npm view`
2.  执行 Ctrl+F（或等效项）以搜索`"time":{`或`"<your_version_number>"`
3.  您可以在“时间”键下找到版本发布日期。

例如，如果您想了解 npm 版本 1.1.25（找不到 1.1.2）何时发布。您可以转到[https://registry.npmjs.org/npm](https://registry.npmjs.org/npm) 搜索“1.1.25”并进行迭代，直到在“时间”键下找到一个值或搜索`"time":{`（以更容易者为准），然后就可以了！

> "时间":{"修改":"2017-10-13T18:58:10.523Z","创建":"2013-07-12T18:32:48.902Z", **"1.1.25":"2013-07- 12T18:32:49.875Z"** ...

*丑陋，因为您必须解析 JSON 才能理解混乱 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-01T15:16:17.293

对于某些特定版本，我发现时间不存在，因此在运行该命令时未列出该包。要查看包的所有可用时间列表，请运行以下命令`npm view <package> time`：查看所有版本和历史运行`npm view <package> versions`。

# exception-handling - ServiceStack catch (WebServiceException ex) - 错误代码

> ID：14982504
> 
> 赞同：4
> 
> 时间：2013-02-20T14:38:53.377
> 
> 标签：exception-handling, servicestack

在我的 ServiceStack 服务中，我抛出了一个具有内部异常的异常。当我在客户端捕获 WebServiceRequest 时，ErrorCode 是内部异常类型名称。

这对我不利，因为它不允许我响应服务器上抛出的特定异常类型。

我不明白为什么 ServiceStack 是这样设计的。捕获较低级别的异常并用更多信息且有时对最终用户友好的异常包装它们是非常典型的。

如何更改默认行为，使其使用表面级异常而不是最内层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:11:35.263

在查看了[https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)的第一个示例后，我决定查看[DtoUtils](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ServiceHost/DtoUtils.cs) .HandleException，它看起来像这样：

```
 public static object HandleException(IResolver iocResolver, object request, Exception ex)
    {
        if (ex.InnerException != null && !(ex is IHttpError))
            ex = ex.InnerException;

        var responseStatus = ex.ToResponseStatus();

        if (EndpointHost.DebugMode)
        {
            // View stack trace in tests and on the client
            responseStatus.StackTrace = GetRequestErrorBody(request) + ex;
        }

        Log.Error("ServiceBase<TRequest>::Service Exception", ex);

        if (iocResolver != null)
            LogErrorInRedisIfExists(iocResolver.TryResolve<IRedisClientsManager>(), request.GetType().Name, responseStatus);

        var errorResponse = CreateErrorResponse(request, ex, responseStatus);

        return errorResponse;
    } 
```

第一条指令用它的内部异常替换异常。我不确定那是什么想法。这对我来说似乎违反直觉，所以我只是在我的 AppHost 类中重新实现了该方法，删除了第一个 if 语句块：

```
 public override void Configure(Container container)
    {
        ServiceExceptionHandler += (request, exception) => HandleException(this, request, exception);
    }

    /// <remarks>
    /// Verbatim implementation of DtoUtils.HandleException, without the innerexception replacement.
    /// </remarks>
    public static object HandleException(IResolver iocResolver, object request, Exception ex)
    {
        var responseStatus = ex.ToResponseStatus();

        if (EndpointHost.DebugMode)
        {
            // View stack trace in tests and on the client
            responseStatus.StackTrace = DtoUtils.GetRequestErrorBody(request) + ex;
        }

        var log = LogManager.GetLogger(typeof(DtoUtils));
        log.Error("ServiceBase<TRequest>::Service Exception", ex);

        if (iocResolver != null)
            DtoUtils.LogErrorInRedisIfExists(iocResolver.TryResolve<IRedisClientsManager>(), request.GetType().Name, responseStatus);

        var errorResponse = DtoUtils.CreateErrorResponse(request, ex, responseStatus);

        return errorResponse;
    } 
```

这显然不理想，因为我不得不复制一堆与我在原始实现中遇到的问题完全无关的代码。这让我觉得每当我更新 ServiceStack 时我都必须维护这个方法。我很想在这里找到一种更好的方法来实现这一点。

无论如何，我在客户端代码中有我喜欢的异常处理：

```
catch (WebServiceException ex)
{
    if (ex.ErrorCode == typeof (SomeKindOfException).Name)
    {
        // do something useful here
    }
    else throw;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:11:08.937

您似乎不必维护一堆代码。您正在编写一种方法来实现您自己的错误处理。您可以尝试在自己的方法中调用 DtoUtils.HandleException(this, request, exception) 并修改返回的 HttpError 对象。不确定您是否有权更改您正在寻找的所有属性/值。

```
public static object HandleException(IResolver iocResolver, object request, Exception ex)
{
    HttpError err = (HttpError)DtoUtils.HandleException(this, request, ex);
    err.Reponse = ex.InnerException; 
} 
```

# android - 每次用户按下电源时播放声音（用户从睡眠中恢复手机）

> ID：14982505
> 
> 赞同：0
> 
> 时间：2013-02-20T14:38:54.347
> 
> 标签：android, broadcastreceiver

我试图编写一个代码，每次用户按下开机按钮并使手机从睡眠状态恢复时，如果应用程序正在运行，它应该播放声音，否则什么也不会发生。

我想我需要一个广播接收器来检查它是否按下了 power:ON 而不是 Power:OFF 并播放声音。稍后将替换为 async task 。

我如何达到上述要求。请给我一些方法。
我不想使用服务，因为即使应用程序没有运行它也会继续运行。

而且我希望它仅在应用程序在后台运行时才运行，因此是广播接收器。

我是安卓的菜鸟。
请帮忙。
提前致谢。

```
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MainActivity extends Activity {

    MediaPlayer mp3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mp3=MediaPlayer.create(this, R.raw.sound);

    }

    public class YourReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            // do what you want when the screen is turned back on

            mp3.start();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:06:28.733

您可以在清单文件中注册 a`BroadcastReceiver`以监听按下电源按钮的时间。这将告诉系统您有一个类`your.package.YourReceiver`，当按下电源按钮打开屏幕时，它想要做一些**事情**。

```
<receiver android:name="your.package.YourReceiver">
    <intent-filter>
        <action android:name="android.intent.action.SCREEN_ON"></action>
    </intent-filter>
</receiver> 
```

然后你必须创建一个类来处理事件。这是收到广播时将运行的代码。

```
public class YourReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // do what you want when the screen is turned back on
    }
} 
```

**笔记...**

如果您需要处理关闭屏幕的电源按钮按下，**请**在清单中使用它。

```
<action android:name="android.intent.action.SCREEN_OFF"></action> 
```

您可以使用其中一种或两种。

# android-2.2-froyo - Android 2.2 中的 SearchView UI 组件

> ID：14982507
> 
> 赞同：0
> 
> 时间：2013-02-20T14:39:01.943
> 
> 标签：android-2.2-froyo, searchview

我想知道我的应用程序中是否可以有一个 SearchView UI 组件（即 API 级别 8）。据我所知，SearchView 包含在 API 级别 11 中。除了 EditText 之外，是否还有其他组件可以绘制搜索图标，我可以在这种情况下使用。我不想要任何搜索 api，我打算将我自己的功能与这个 SearchView UI 组件集成。提前致谢

快乐编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T04:42:13.080

You can use the SearchView provided by AppCompat: android.support.v7.widget.SearchView

Check this [link](http://developer.android.com/tools/support-library/setup.html) on how to integrate the Support Library into your project:

# ios - 错误：- - [UIButton setValue:]：无法识别的选择器发送到实例

> ID：14982511
> 
> 赞同：0
> 
> 时间：2013-02-20T14:39:11.677
> 
> 标签：ios, uitableview, uibutton

我在表格中创建了 1)customcell，单元格内有 1 个按钮和 1 个滑块。

```
 NSString *CellIdentifier = [NSString stringWithFormat:@"%d",indexPath.row];

        if (obj_TextCell == nil) {                
                        obj_TextCell = [[[TextCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                       reuseIdentifier:CellIdentifier] autorelease];

           }
    UIButton* Btn_music=[[UIButton alloc] initWithFrame:CGRectMake(130,180, 50,50)];

                if (indexPath.row==play_tg)
                {
                     [Btn_music setImage:[UIImage imageNamed:@"pausemusic.png"] forState:UIControlStateNormal];

                }else
                {
                    [Btn_music setImage:[UIImage imageNamed:@"playmusic.png"] forState:UIControlStateNormal];
                }             

              [Btn_music addTarget:self action:@selector(playAudio:) forControlEvents:UIControlEventTouchUpInside];
              Btn_music.tag = indexPath.row;
              [obj_TextMusicCell.contentView addSubview:Btn_music];
              [background bringSubviewToFront:Btn_music];
 UISlider *progress = [[UISlider alloc] initWithFrame:CGRectMake(180,195,320,10)];
            [progress setBackgroundColor:[UIColor clearColor]];
            progress.minimumValue = 0.0;
            progress.maximumValue=1.0;
            progress.continuous = YES;
            progress.value = 0.0;
            progress.tag=indexPath.row+1;
            NSLog(@"tag for slider========>%d",progress.tag);
            //[progress setTag:indexPath.row];
            [progress addTarget:self action:@selector(sliderChanged:) forControlEvents:UIControlEventValueChanged];
            [obj_TextMusicCell.contentView addSubview:progress]; 
```

2）我已经获取单元格的按钮的 IBACTION 事件。并调用了滑块​​移动的方法。

```
-(IBAction)playAudio:(id)sender
{
    UIButton *Btn_music=sender;    

    cell_Access = (TextMusicCell *)[tbl_tellTale viewWithTag:0];
    NSIndexPath *indexPath = [tbl_tellTale indexPathForCell:cell_Access];
     NSLog(@"cellindex==>%d",indexPath.row); 
if ( timer==nil)
        {
          timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(SongProgress) userInfo:nil repeats:YES];
           [timer fire];
        }

} 
```

3）滑块中的方法有：-

```
-(IBAction)SongProgress
{

   UISlider* progress = (UISlider *)[cell_Access viewWithTag:1];
} 
```

4）它工作得很好。但是当我滚动表格视图或有时应用程序崩溃并给出以下错误： -

```
-[UIButton setValue:]: unrecognized selector sent to instance 0x96f9660
2013-02-20 19:54:21.008 shc[3776:19d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIButton setValue:]: unrecognized selector sent to instance 0x96f9660'
*** First throw call stack:
(0x3dba012 0x2777e7e 0x3e454bd 0x3da9bbc 0x3da994e 0x108d1b 0x21c0b90 0x3d79376 0x3d78e06 0x3d60a82 0x3d5ff44 0x3d5fe1b 0x33de7e3 0x33de668 0x16bf65c 0x2cb6 0x2be5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

-[UIButton setValue:]: 无法识别的选择器发送到实例

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:05:09.313

您为 UIBUTTON* btn_music 和 UISlider *progress 使用相同的标签值，因此 UISlider *progress 获取 UIBUTTON 实例对两者使用不同的标签值，例如如果您为 UIBUTTON 使用 1 到 200 个标签值，然后为 UISlider *progress 使用 201 加值

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T14:49:25.780

您可能正在做第一部分`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`，如果是这样，您正在创建新的`UIButtons`并且`UISliders`每次`UITableView`需要渲染该单元格时......

`UIButton`您应该为and添加属性`UISlider`并检查它们是否已初始化...

编辑：

好的，如果你有属性`Btn_music`并`progress`在你的自定义 UITableViewCell 中定义，你应该合成它们，然后像​​这样初始化它们：

```
// If the Button is not yet initialized, then do it
if(obj_TextMusicCell.Btn_music == nil)
{
    // Here you should do the initialization code that only have to be done the first time
    obj_TextMusicCell.Btn_music=[[UIButton alloc] initWithFrame:CGRectMake(130,180, 50,50)];
    obj_TextMusicCell.Btn_music.tag = indexPath.row;
    [obj_TextMusicCell.contentView addSubview:Btn_music];
}

// Now it already exists, just update it...
if(indexPath.row==play_tg)
{
    [obj_TextMusicCell.Btn_music setImage:[UIImage imageNamed:@"pausemusic.png"] forState:UIControlStateNormal];
}
else
{
    [obj_TextMusicCell.Btn_music setImage:[UIImage imageNamed:@"playmusic.png"] forState:UIControlStateNormal];
} 
```

遵循相同的想法，`UISlider`你就明白了......

# php - PO、MO 翻译文件

> ID：14982513
> 
> 赞同：1
> 
> 时间：2013-02-20T14:39:14.420
> 
> 标签：php, translation, gettext, po, mo

我想制作一个多语言应用程序 我听说过`.po`文件但我找不到它 我制作了这段代码

我在我的应用程序中创建了一个名为的目录`languages`并将`ar_EG.po`文件放入其中并尝试`languages\ar\LC_MESSAGES`了但它也不起作用

```
putenv('LC_ALL=ar_EG');
setlocale(LC_ALL, 'ar_EG', 'ara_EGY');

$domain = 'ar_EG';
bindtextdomain($domain, "./languages"); // I think the error here
textdomain($domain);

// to verify that localization is enabled and it works as intended:
echo strftime("%A %B %Y", strtotime("01/30/2013")), "<br>";

echo gettext("login"); // here not working 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:50:12.827

编辑后必须重新启动服务器。感谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:40:59.673

你需要将你的 po 文件编译成一个 mo 文件，然后把它放在那里......

此外，您需要确保已安装 GetText...

[http://www.php.net/manual/en/book.gettext.php](http://www.php.net/manual/en/book.gettext.php)

# infinidb - InfiniDB 表大小计算

> ID：14982517
> 
> 赞同：2
> 
> 时间：2013-02-20T14:39:18.447
> 
> 标签：infinidb

我正在尝试计算 infiniDB 表的表大小。

在`Show TABLE STATUS`我看到数据大小为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T12:29:27.173

找出表和列大小的唯一方法是运行 databaseSizeReport 实用程序。它报告 dbroot 上现有数据的物理大小（以 GB 为单位）。但此功能仅适用于 Calpont InfiniDB Enterprise。

# iphone - applicationBadgeNumber 不增加

> ID：14982524
> 
> 赞同：0
> 
> 时间：2013-02-20T14:39:51.500
> 
> 标签：iphone, xcode, cocoa-touch, uilocalnotification, foundation

到目前为止，我发现我无法通过本地通知增加应用程序徽章编号。所以做这样的事情：

```
self.notification.applicationIconBadgeNumber = [[UIApplication sharedApplication] applicationIconBadgeNumber]+1; 
```

不会真的工作。

例如，如果我说`applicationIconBadgeNumber`to 是 7，它肯定会变成 7，但如果我像在那边那样设置它，它就行不通了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:02:17.133

对其进行了测试，并且能够用于`[UIApplication sharedApplication].applicationIconBadgeNumber += 1`增加。你经历了`UILocalNotification`而不是有什么特别的原因`[UIApplication sharedApplication]`吗？

[更新]查看了[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)的文档：

> **applicationIconBadgeNumber** 默认值为 0，表示“没有变化”。应用程序应使用此属性的值来增加当前图标徽章编号（如果有）。

对我来说，这意味着在处理 a 时`UILocalNotification`，您应该这样做：

```
[UIApplication sharedApplication].applicationIconBadgeNumber += notification.applicationIconBadgeNumber; 
```

# java - 管理大型 PDF 存储和流式传输

> ID：14982527
> 
> 赞同：1
> 
> 时间：2013-02-20T14:39:58.097
> 
> 标签：java, pdf, pdf-generation, large-files, bandwidth

我将在 AWS 堆栈上构建一个 Java 应用程序，该应用程序应该管理大型 PDF 文件的大型档案。每个 PDF 文件可能有数千页，通常是飞机和航空手册。

我需要重新组织此内容和流以供按需使用。我面临两个大问题：带宽成本和复杂性管理。我想将本手册分成最不重要的章节并使用这些章节。有谁知道任何可能有用的工具（java API）？

同时，对于bandwitch问题，我虽然可以使用PDF linearitatio来按需流式传输页面并降低输出传输。你怎么看待这件事？我错了吗？

谢谢大家的意见和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:38:46.070

You should [linearize your PDFs](https://stackoverflow.com/q/8928866/821436) and set up your service to use the linearization features (i.e. serve byte-ranges). And you should split your PDFs into small logical units. You should also research [dms](/questions/tagged/dms "show questions tagged 'dms'")(Document Management Systems) and [content-management-system](/questions/tagged/content-management-system "show questions tagged 'content-management-system'").

# php - MySQL DELETE 随机且非常罕见地失败

> ID：14982538
> 
> 赞同：0
> 
> 时间：2013-02-20T14:40:26.810
> 
> 标签：php, mysql, error-handling, insert

我有一条 MySQL`DELETE`语句，后跟一条`INSERT`语句，以确保给定 ID 的数据集只有一个副本。（我不使用 UPDATE 是有原因的）

问题是我注意到在一个包含 5000 多个条目的数据集中，有 3 个实例没有执行 DELETE 语句，但 INSERT 语句执行了。最终结果是给定 ID 的重复条目。

下面是我的代码。执行失败时，php 脚本将退出并显示错误消息。这一定是我的经验水平。任何想法可能是什么问题？

```
//delete
$query_delete = "DELETE FROM q1_6_list WHERE q_id = '".mysql_real_escape_string($q[qID])."'";   
$result = mysql_query($query_delete) or errorReport("Error in query: $query_delete. ".mysql_error());
//insert
$query_insert = "INSERT INTO q1_6_list (q_id, vehicle, quantity) VALUES";
$result = mysql_query($query_insert) or errorReport("Error in query: $query_insert. ".mysql_error());
if (!$result)
    errorReport($result); 
```

**编辑**

仔细检查后，我注意到我没有立即添加以下代码`$result = mysql_query($query_delete)....`

```
if (!$result)
    errorReport($result); 
```

这是否也需要捕获所有其他错误消息，或者会`mysql_query($query_delete) or errorReport...`捕获所有错误事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:56:10.353

您最好的选择是在 q1_6_list (q_id) 上创建一个主键：

```
ALTER TABLE q1_6_list ADD PRIMARY KEY(q_id) 
```

并使用 MySQLs`REPLACE INTO`语法，所以失去你的删除和你的插入变成：

```
$query_insert = "REPLACE INTO q1_6_list (q_id, vehicle, quantity) VALUES"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:49:20.530

仅当删除查询成功时，您才可以简单地运行插入查询：

```
if (mysql_query($query_delete)) {
    mysql_query($query_insert);
} 
```

# c# - 在 if 语句中检查多个字符串是否为空

> ID：14982542
> 
> 赞同：32
> 
> 时间：2013-02-20T14:40:40.740
> 
> 标签：c#, string, null

有没有更好（更好）的方式来编写这个 if 语句？

```
if(string1 == null && string2 == null && string3 == null && string4 == null && string5 == null && string6 == null){...} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-20T14:46:28.300

也许使用[空合并运算符（`??`）](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

```
if((string1 ?? string2 ?? string3 ?? string4 ?? string5 ?? string6) == null){ ;} 
```

如果所有字符串都在一个集合中，您可以使用 Linq：

```
bool allNull = strings.All(s => s == null); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-20T14:43:47.300

您可以将所有字符串放在一个列表中并使用

```
if(listOfStrings.All(s=>s==null)) 
```

至少你可以把它放在多行

```
if(string1 == null 
   && string2 == null 
   && string3 == null 
   && string4 == null 
   && string5 == null 
   && string6 == null)
{...} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-20T14:50:16.513

如果你做了这样的功能：

```
public static bool AllNull(params string[] strings)
{
    return strings.All(s => s == null);
} 
```

然后你可以这样称呼它：

```
if (AllNull(string1, string2, string3, string4, string5, string6))
{
    // ...
} 
```

实际上，您可以更改 AllNull() 以使用*任何*引用类型，如下所示：

```
public static bool AllNull(params object[] objects)
{
    return objects.All(s => s == null);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-20T14:43:46.790

```
string[] strs = new string[] { string1, string2, string3 };
if(strs.All(str => string.IsNullOrEmpty(str))
{
  //Do Stuff
} 
```

或者`strs.All(str => str == null)`，如果您不想检查空字符串，请使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-20T14:43:54.230

制作一个 IEnumerable 字符串（列表或数组......），然后你可以使用[.All()](http://msdn.microsoft.com/en-us/library/bb548541.aspx)

```
var myStrings = new List<string>{string1,string2,string3....};
if(myStrings.All(s => s == null))
{
   //Do something
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-20T14:46:59.713

如果您想检查 null*或 empty*，这是另一种没有数组的方法：

```
if (string.Concat(string1, string2, string3, string4, string5).Length == 0)
{
    //all null or empty!
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-20T14:46:50.827

嗯，不知道*好*不好，可以用**[IEnumerable.Any](http://msdn.microsoft.com/en-us/library/bb337697.aspx)***这样的*方法；

> 确定序列是否包含任何元素。

```
List<string> list = new List<string>{"string1","string2","string3", "string4", "string5"};
if(list.Any(n => n == null))
{

} 
```

您可以使用**[Enumerable.All()](http://msdn.microsoft.com/en-us/library/bb548541.aspx)**方法，例如；

> 确定序列的所有元素是否满足条件。

```
if (Enumerable.All(new string[] { string1, string2, string3, string4, string5 }, s => s == null) )
{
       Console.WriteLine("Null");
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-20T14:46:43.463

这应该做同样的事情：

```
if (string.IsNullOrEmpty(string1 + string2 + string3 + string4 + string5 + string6)){...} 
```

# r - 编写 R 代码的最佳实践

> ID：14982546
> 
> 赞同：0
> 
> 时间：2013-02-20T14:40:52.177
> 
> 标签：r

嗨，我刚刚有一个关于使用多个函数编写更快的 R 脚本的快速问题：假设每个示例中的内容完全相同，以下哪个运行得更快？函数中的函数，即

```
function(args)
{
function_using_previous_function_output(args)
{ manipulation of arguments}

} 
```

相互传递东西的函数：

```
function(args)
{return(output}
}

function_using_previous_function_output(output)
{
manipulation of arguments
} 
```

这些中是否有样式或优化的最佳实践？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:25:31.153

**简短的回答；**在优化代码方面，您正在寻找错误的途径。

**长答案；**

内容几乎总是剧本表演中最重要的方面。如果您的代码已经并行化、矢量化、Rcpp 化和字节编译（require(compiler);enableJIT(3)），并且您*仍然*需要更快的速度，那么您只应该真正伪造您的语法。

在您需要更改代码本身的形状以提高速度的极少数情况下，这些文章是您的朋友

[http://www.r-bloggers.com/speeding-up-r-computations/](http://www.r-bloggers.com/speeding-up-r-computations/) [http://radfordneal.wordpress.com/2010/08/15/two-surpising-things-about-r/](http://radfordneal.wordpress.com/2010/08/15/two-surpising-things-about-r/)

回答你原来的问题；您应该使用 system.time() 函数确定效率；我怀疑无论哪种方式都会有统计学上的显着差异

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:54:35.913

我一直在编写一个模拟包，它使用许多功能来根据生物模型的不同过程执行不同的步骤。然后这些函数本身由主函数调用，主函数通过调用它们并偶尔用这些子函数的输出自己做一些事情来进行模拟。关键是它在很大程度上依赖于函数中的函数；当我在我的主要模拟功能中有一系列步骤时，我看不出有太大的速度差异 - 然后为了整理它，我将这些步骤放入子功能中。但是我更喜欢它，因为当每个子函数完成时，在子函数期间使用的任何变量或垃圾，但实际上并未用于任何结果或`return()`'d 在子函数结束时被消除，这意味着当您不想修改变量时意外修改变量的可能性较小。通常，当您进行循环操作并将其矢量化或使用 Rcpp 在 C++ 中执行此操作时，我所看到的 R 中的主要速度差异就会出现。无论如何，R 中的大多数核心内容现在都很快，并且已经进行了字节编译。

# c# - 使用 RegisterStartupScript 将 HTML 放置在页面底部？

> ID：14982551
> 
> 赞同：0
> 
> 时间：2013-02-20T14:41:01.003
> 
> 标签：c#, asp.net, c#-4.0, asp.net-4.0

我尝试使用`Page.ClientScript.RegisterStartupScript`在页面底部放置 HTML 或不可见元素，这似乎工作正常。这有什么问题吗，因为它`RegisterStartupScript`仅适用于 JavaScript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:47:59.243

`<asp:ContentPlaceHolder>`是用于“在我的页面底部放置 HTML 或不可见元素”的正确控件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:44:57.897

使用此方法最有可能遇到的问题是，在使用 UpdatePanel 时，您应该调用它`ScriptManager.RegisterStartupScript()`。这将取决于您的页面结构（例如，您是否从 UserControl 中注册脚本）以及您的 javascript 正在做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:52:01.883

您所做的并不是最佳实践，但我相信它不会给您带来任何问题。ScriptManager 和 ClientScript 所做的只是将指定的内容附加到要发送到浏览器的输出 HTML 中。但是，您可以考虑通过在页面底部放置占位符控件，然后将 HTML 内容附加到该占位符来实现此目的。

# java - 连接到 postgreSQL 服务器失败

> ID：14982556
> 
> 赞同：1
> 
> 时间：2013-02-20T14:41:25.717
> 
> 标签：java, executable-jar, tcp-ip, postgresql-8.4

我正在尝试安装“Kwok 信息服务器”，我是 postgreSQL 的新手。我只是按照 Kwok 信息服务器的安装指南。

当我尝试在命令提示符中通过 postgreSQL 服务器使用 java 安装 kwok-schema-setup.jar 文件时，我收到以下错误...“连接到 PostgreSQL 服务器...失败。连接被拒绝。检查主机名和端口是正确的，并且 postmaster 正在接受 TCP/IP 连接。原因：java.net.ConnectException：连接被拒绝：连接模式设置遇到错误“。

当我尝试使用 pgAdmin III 连接到服务器时，我收到以下错误“服务器不听服务器不接受连接：连接库报告无法连接到服务器：连接被拒绝（0x0000274D/10061 ) 服务器是否在主机 "127.0.0.1" 上运行并接受端口 5432 上的 TCP/IP 连接？"。

请任何人帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:28:51.843

看起来您的 Postgresql 守护程序没有运行。检查服务器是否已启动并正在运行。我不知道您使用的是哪个操作系统，但请尝试在 linux/mac 上使用 ps -ax 或在 Windows 中使用任务管理器。

也许是阻止连接的防火墙，您必须提供有关您的环境的更多信息才能确定。

# sql-server - 从 XML 中选择元素

> ID：14982557
> 
> 赞同：4
> 
> 时间：2013-02-20T14:41:29.750
> 
> 标签：sql-server, xml, sql-server-2008, xpath

鉴于以下情况：

```
declare @samplexml as xml
set @samplexml = '<root><someelement><another /><somethingElse>test</somethingElse></someelement></root>'

select
  @samplexml.value('/root[1]','nvarchar(max)') 
```

我得到结果：

`test`

但我想要结果：

`<root><someelement><another /><somethingElse>test</somethingElse></someelement></root>`

如何选择实际的 XML 元素？我也试过：

```
select
  @samplexml.value('/root[1]','XML') 
```

但我得到了错误`The data type 'XML' used in the VALUE method is invalid.`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T14:46:49.323

只需使用该`.query()`方法而不是`.value()`：

```
SELECT @samplexml.query('/root[1]') 
```

或者

```
SELECT @samplexml.query('.') 
```

这将返回与给定 XPath 表达式匹配的元素（及其内容），并将其作为`XML`类型返回

# actionscript - 如何在flex中显示错误消息

> ID：14982559
> 
> 赞同：1
> 
> 时间：2013-02-20T14:41:34.407
> 
> 标签：actionscript, mxml

我是这个 Adob​​e flex 开发的新手。现在我正在处理应用程序，并且在我的 mxml 表单中我必须放置 2 个字段。

一个是单选按钮（选项（是，否）），另一个是文本框（名称），要求是：

*   当用户选择是时，名称字段应启用，否则应禁用。验证规则是：

    1.  如果用户选择是并且他不会输入任何值（文本框为空），那么我们应该显示错误消息`"value is required"`

    2.  如果用户选择 no 并且文本文件有一些值，那么首先他必须删除 textfiled 中的内容，然后只选择`'no'`。

有人请帮助我并给我一些代码示例。那对我来说会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:50:05.747

将此代码放入您的`MXML`应用程序并运行..

```
<?xml version="1.0" encoding="utf-8"?>
   <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           width="567" height="206" minWidth="955" minHeight="600" initialize="application1_initializeHandler(event)">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        protected function application1_initializeHandler(event:FlexEvent):void
        {

        }

        protected function rd1_clickHandler(event:MouseEvent):void
        {

            if(!t1.enabled)
            {
                t1.enabled=true;
            }
            else if(t1.text=="" && t1.enabled)
             {
               Alert.show("Value is required in text box");
            }
            else
                t1.enabled=true;
        }

        protected function rd2_clickHandler(event:MouseEvent):void
        { 
            t1.text=null
            t1.enabled =false;

        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:TextInput x="132" y="41" id="t1"/>
     <s:RadioButton x="162" y="91" label="Yes" id="rd1" groupName="select"          click="rd1_clickHandler(event)"/>
 <s:RadioButton x="211" y="91" label="No" id="rd2"  groupName="select" click="rd2_clickHandler(event)" />
<s:Label x="79" y="45" text="Name"/>
    </s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:50:35.020

创建一个基于 TitleWindow 和我们 PopupManager 的自定义 mxml 控件以在显示器上显示它。

# javascript - 在 chrome.storage.local.set 中使用变量键

> ID：14982560
> 
> 赞同：4
> 
> 时间：2013-02-20T14:41:37.930
> 
> 标签：javascript, google-chrome-extension, google-chrome-storage

我正在创建一个 chrome 扩展。我不知道如何使用变量作为`chrome.storage.local.set()`函数的关键。我努力了

```
var key = 'myKey';
chrome.storage.local.get(key, function(val) { 
    chrome.storage.local.set({key:val[key]+param1}); //appending  param1
    alert(val[key]);
} 
```

在这里，我试图获取`val[key]`并附加一个字符串的值，然后`param1`使用相同的键将其放回存储中。但我不能这样做。警报框始终显示未定义。

* * *

但是当我尝试不使用该变量`key`时，**它工作正常**。

```
chrome.storage.local.get('myKey', function(val) { 
    chrome.storage.local.set({myKey:val['myKey']+param1}); //appending  param1
    alert(val['myKey']);
} 
```

问题是我使用`chrome.storage.local.set`的参数不仅可以是字符串，还可以是对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:23:11.683

在 JavaScript 中，使用非静态变量名的唯一方法是将值作为属性分配，而不是使用对象字面量。

```
var key = 'myKey';
var param1 = 'whatever';
chrome.storage.local.get(key, function(val) {
    // Create property if does not exist (yet)
    if (typeof val[key] != 'string') val[key] = '';
    // Append value of param1
    val[key] += param1;
    // Save data
    chrome.storage.local.set(val);
    alert(val[key]);
}); 
```

注意：您可能想要验证是否[`set`](http://developer.chrome.com/extensions/storage.html#method-StorageArea-set)成功。这可以通过使用回调来完成。例如：

```
 chrome.storage.local.set(val, function() {
        if (chrome.extension.lastError) {
            alert('An error occurred: ' + chrome.extension.lastError.message);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T13:32:08.023

我已经解决了这个问题。而不是使用`chrome.storage.local.set({key:val[key]+param1});`

我已经`{key:val[key]+param1}`用一个对象替换了 json 字符串。

```
var obj = {};       
var key = "myKey";  
obj[key] += param1;   
chrome.storage.local.set(obj); 
```

这里`obj`有价值`{"myKey":"the appended value"}`

# osgi - OSGi 捆绑包作为外部 Web 服务客户端

> ID：14982562
> 
> 赞同：0
> 
> 时间：2013-02-20T14:41:40.813
> 
> 标签：osgi, jax-ws, cxf, apache-felix, dosgi

**我需要从部署在apache felix**容器中的包中调用外部 Web服务（*我不能使用 ServiceMix、fuse...*）我添加了包**cxf-dosgi**（可以从[这里](http://repository.apache.org/service/local/repositories/releases/content/org/apache/cxf/dosgi/cxf-dosgi-ri-singlebundle-distribution/1.4.0/cxf-dosgi-ri-singlebundle-distribution-1.4.0.jar)下载）并将以下几行放入我的 pom.xml：

```
 <Require-Bundle>cxf-dosgi-ri-singlebundle-distribution</Require-Bundle>
                     <Import-Package>
                        javax.jws,
                        javax.xml.bind,
                        javax.xml.bind.annotation,
                        javax.xml.namespace,
                        javax.xml.ws,
                        META-INF.cxf,
                        org.apache.cxf,
                        org.apache.cxf.binding,
                        org.apache.cxf.binding.soap,
                        org.apache.cxf.binding.soap.spring,
                        org.apache.cxf.bus,
                        org.apache.cxf.bus.resource,
                        org.apache.cxf.bus.spring,
                        org.apache.cxf.buslifecycle,
                        org.apache.cxf.catalog,
                        org.apache.cxf.configuration,
                        org.apache.cxf.configuration.spring,
                        org.apache.cxf.endpoint,
                        org.apache.cxf.headers,
                        org.apache.cxf.management,
                        org.apache.cxf.phase,
                        org.apache.cxf.resource,
                        org.apache.cxf.transport,
                        org.apache.cxf.transport.http,
                        org.apache.cxf.transport.http.policy,
                        org.apache.cxf.transport.http_jetty,
                        org.apache.cxf.transports.http,
                        org.apache.cxf.workqueue,
                        org.apache.cxf.ws.policy.builder.jaxb,
                        org.apache.cxf.wsdl,
                        org.apache.cxf.wsdl11,
                        org.apache.cxf.jaxws.*,
                        *
                    </Import-Package> 
```

我使用jaxws方式建立通信：

```
QName SERVICE_NAME = new QName("http://test.com/", "MockImplService");
Service service = Service.create(new URL(endpointAddress + "?wsdl"), SERVICE_NAME);         
mockService= service.getPort(IMock.class); 
```

当我运行示例时，出现以下异常：

```
 Caused by: javax.xml.ws.spi.FactoryFinder$ConfigurationError: Provider org.apache.axis2.jaxws.spi.Provider not found
        at javax.xml.ws.spi.FactoryFinder$2.run(FactoryFinder.java:138)
        at javax.xml.ws.spi.FactoryFinder.doPrivileged(FactoryFinder.java:282)
        at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:125)
        at javax.xml.ws.spi.FactoryFinder.access$200(FactoryFinder.java:42)
        at javax.xml.ws.spi.FactoryFinder$3.run(FactoryFinder.java:273)
        at javax.xml.ws.spi.FactoryFinder.doPrivileged(FactoryFinder.java:282)
        at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:168)
        at javax.xml.ws.spi.Provider.provider(Provider.java:39)
        at javax.xml.ws.Service.<init>(Service.java:36)
        at javax.xml.ws.Service.create(Service.java:116) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:41:10.220

Apache DOSGi 旨在将服务公开为 Web 服务，而不是用于调用其他 Web 服务。不过，它可能包含一些 api 来调用其他 web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T08:59:46.580

不知何故，使用了轴 jaxws 实现。您的类路径中可能有一个axis2-jaxws-xxx.jar。尝试删除它。将改为使用 JRA jaxws（这对于轴来说应该很好，对于 cxf 应该更好）。

# android - 安卓和 Perl

> ID：14982564
> 
> 赞同：0
> 
> 时间：2013-02-20T14:41:42.923
> 
> 标签：android, perl

使用 Perl 而不是 Java 开发 Android 应用程序的优点/缺点是什么？

见：[http ://codatech.us/index.ftl](http://codatech.us/index.ftl)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:53:57.357

缺点：

*   任何使用您的应用程序的人都必须下载 Perl。虽然你可以很好地捆绑它（这是 Perl on Android 项目的目标，我不确定它已经走了多远），它仍然会使你的文件大小更大。
*   我没有任何个人经验，但从远处看，它看起来仍然是高度实验性的。

我是 Perl 的忠实粉丝（甚至不知道 Java），但如果我正在考虑开发 Android 应用程序，我认为我不会认为这是一个严肃的选择。

顺便说一下， perldroid 项目的主页在[这里](http://code.google.com/p/perldroid/)。

您链接到的项目是完全不同的事情。它看起来也处于实验阶段。我也不相信它有用。

# sql - 水晶报表中的完全外部联接已禁用

> ID：14982572
> 
> 赞同：0
> 
> 时间：2013-02-20T14:42:11.753
> 
> 标签：sql, crystal-reports

在水晶中，我正在尝试进行完全外部连接，但是该选项在数据库专家中被禁用（灰色）。有谁知道为什么或如何让它工作，所以我可以选择它？

# c# - 使用 lambda 语法的 linq 连接运算符类型

> ID：14982573
> 
> 赞同：5
> 
> 时间：2013-02-20T14:42:11.637
> 
> 标签：c#, linq

我正在编写 MS 101 Linq 教程。

我尝试将查询重构为 lambda/方法语法（反之亦然）。[这](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)对我来说是一个挑战。

给定的查询是：

```
var custSupQuery =
    from sup in suppliers
    join cust in customers on sup.Country equals cust.Country into cs
    select new { Key = sup.Country, Items = cs }; 
```

我这样重写：

```
var custSupQuery = suppliers.Join(customers, s => s.Country, c => c.Country, (c, s) => new { Key = s.Country, Items = s, Items2 = c }); 
```

（我没有看到在 new 子句中组合这两种类型的字段的简单方法，所以我将它们分开）。

这似乎与编译器一起飞行，直到它到达显示循环。第二个 foreach 似乎无法处理该类型。

这是显示代码（适用于查询表达式，但不适用于 lambda/方法语法）：

```
foreach (var item in custSupQuery)
{
    Console.WriteLine(item.Key + ":");
    foreach (var element in item.Items)  // <-- error here
    {
        Console.WriteLine("   " + element.CompanyName);
    }
} 
```

错误是：

> foreach 语句不能对“JoinOperators.Program.Customer”类型的变量进行操作，因为“JoinOperators.Program.Customer”不包含“GetEnumerator”的公共定义

我尝试通过`AsEnumerable()`调用结束我的 lambda/query 语法，但它仍然得到相同的错误。我不确定我可以使用什么作为类型，`AsEnumerator<type_goes_here>`因为它是匿名的，而且我似乎没有可以调用的对象`GetType()`。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:49:41.887

`join ... into`语法不等同于但等同`Join`于[`GroupJoin`](http://msdn.microsoft.com/en-us/library/bb534297.aspx). 这就是你必须使用的：

```
var custSupQuery =
    suppliers.GroupJoin(customers, s => s.Country, c => c.Country,
                        (s, cs) => new { Key = s.Country, Items = cs }); 
```

# java - 将 XML 请求更改为 Java 对象

> ID：14982577
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:42:18.923
> 
> 标签：java, xml, object, transformation

我有一个关于如何将 XML 请求转换为 Java 对象的快速问题。

我可以将所有字段声明为变量，然后使用`@XmlElement / @XmlAttribute`注释来声明哪些变量将是`elements / attributes`？

如果需要，我可以澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:47:26.063

我很确定，您正在寻找 JAXB。这是一个教程：[http ://www.vogella.com/articles/JAXB/article.html](http://www.vogella.com/articles/JAXB/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:46:48.633

不确定您需要什么，但通常只需将 @XmlRootElement 添加到类中即可。

# javascript - 纯废话 - 嵌套 Ajax

> ID：14982578
> 
> 赞同：0
> 
> 时间：2013-02-20T14:42:25.013
> 
> 标签：javascript, ajax, jquery, callback

考虑这个嵌套的 ajax 调用：

```
$.ajax({
     type: "POST",
     dataType: "json",
     data: dataString,
     url: "includes/check.php", 
     success:function(result){

          if(result['response']==false){

               $.ajax({
               type: "POST",
               dataType: "json",
               data: dataString,
               url: "includes/add.php", 
               success:function(){
                    alert('Success');
               });

          } else {
               alert('A problem has occurred!');
          }

     }
}); 
```

这两个 php 脚本都被成功调用并执行了它们打算执行的操作，但我无法显示嵌套 ajax 调用的成功操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:02:43.943

当您设置为`dataType`时`json`，如果响应是有效的 JSON 并且可以被解析，jQuery 只会触发成功事件。如果您发送任何不是有效 JSON 的内容，jQuery 将不会触发成功事件。从您说您输出的评论`1`中，这不是有效的 JSON。

相反，您可以输出一些 JSON（in `add.php`）：

```
echo json_encode(array('success' => true)); 
```

输出

> {“成功”：真}

或者删除 json dataType 设置并执行以下操作：

```
 success:function(response){
                if(response == "1")
                {
                    alert('Success');
                }
                else
                {
                    alert("Fail");
                }
           }); 
```

旁注：使用 Firebug 或 Chrome 开发工具查看 ajax 响应（而不是通过电子邮件发送给自己）。

# apache2 - Symfony 不检测相对 url 根

> ID：14982583
> 
> 赞同：0
> 
> 时间：2013-02-20T14:42:30.617
> 
> 标签：apache2, symfony-1.4

在 symfony 1.4 的 settings.yml 中，我们使用以下选项：

```
env:
  request:
    param: 
      relative_url_root: /name-of-app 
```

指定应用使用哪个 relative_url_root。所以每个应用程序都在不同的 relative_url_root 下运行。

问题是 symfony 1.4 路由没有检测到这个相对 url 根。例如，如果我们有以下路线：

```
route_name:
  url:  /some-module/some-action
  param: { module: somemodule, action: someaction } 
```

我们尝试访问`http://myproject.local/name-of-app/some-module/some-action`symfony 尝试搜索匹配的路由名称而`name-of-app/some-module/some-action`不是`/some-module/some-action`.

symfony 现在也尝试使用这个 relative_url_root 链接到图像，因此不再找到图像。因为图像只能通过`http://project.local/img/..`而不是`http://project.local/name-of-app/img`

解决这个问题的最佳方法是什么？

1.  我应该在某处删除“/”吗？
2.  我应该在 htaccess 中以某种方式使用 RewriteBase 吗？
3.  我应该使用 htaccess 在 REQUEST_URI 中去除“应用程序名称”吗？
4.  在每个路由 url 前加上 name-of-app/?
5.  我应该以某种方式告诉 apache /name-of-app 是某种路径或前缀吗？请注意，在我们的生产环境中，我们无法创建虚拟主机，因此我们必须使用 .htaccess 或 symfony 本身来解决这个问题。
6.  一个非常不同的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:59:57.540

我不确定这是否`relative_url_root`是你真正想要的。正如[文档](http://symfony.com/legacy/doc/reference/1_4/en/05-Factories#chapter_05_sub_relative_url_root)所述：

> relative_url_root
> 
> relative_url_root 选项定义了前端控制器之前的 URL 部分。大多数情况下，这是由框架自动检测到的，不需要更改。

所以它是`index.php`or之前的 URL 的一部分`frontend_dev.php`，等等。

在我看来，您可以做的是编写自己的路由类，该类将扩展`sfPatternRouting`并在尝试匹配任何路由之前删除 URL 的前缀部分。然后使用这个类进行路由`factories.yml`。

编辑：我不知何故错过了您在不同应用程序之间进行操作的事实。

一般来说`relative_url_root`，分开对不同应用程序的调用绝对不是一个好主意。在我看来，最好的方法是使用单独的前端控制器和虚拟主机来拥有不同的子域。不幸的是，你说你不能选择这个选项。

然后，您可以选择以下任一解决方案：

1.  摆弄 .htaccess 并将您的呼叫重定向到正确的前端控制器：`myurl.com/path-to-app1/something`将调用`app1.php/something`和`myurl.com/path-to-app2/something`将调用.htaccess `app2.php/something`。

2.  更改`index.php`文件。让它捕获 URL 的`path-to-app/`第一`$configuration = ProjectConfiguration::getApplicationConfiguration('app2', 'prod', false);`部分 (路由以一个`:path-to-action`变量开始，该变量将传递给生成 URL 的函数），或者使用 config 中定义的参数：

.

```
In apps/app1/config/app.yml
path_to_app: app1

In apps/app1/config/routing.yml
route1:
  url: <?php echo sfConfig::get('app_path_to_app') ?>/something
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:52:44.790

**修复路由：**

我改变了我的 .htaccess 如下。

```
RewriteCond %{HTTP_HOST} myproject.local
RewriteCond %{THE_REQUEST} /name-of-app* [NC]
RewriteRule ^(.*)$ dispatcher.php/$1 [QSA,L] 
```

通过使用这个重写规则，symfony 似乎认识到 /name-of-app 是路由中的前缀，并且在`relative_url_root`. 现在，当我 var_dump 控制器中的 sfRoute 对象时，我得到以下信息。

```
object(sfRoute)[33]
  protected 'isBound' => boolean true
  protected 'context' => 
    array (size=7)
      'path_info' => string 'some-module/some-action' (length=10)
      'prefix' => string '/name-of-appp' (length=8)
      'method' => string 'GET' (length=3)
      'format' => null
      'host' => string 'myproject.local' (length=20)
      'is_secure' => boolean true
      'request_uri' => string 'https://myproject.local/name-of-app/some-module/some-action' (length=47) 
```

请注意，我没有按照 Michal 的建议更改路由规则。我也相信我的方法`relative_url_root`并不像 Symfony 所理解的那样奇怪。

**修复直接文件访问：**

为了重定向像我这样的请求`https://myproject.local/name-of-app/some/path/to/a/file.ext`，`https://myproject.local/some/path/to/a/file.ext`我使用了以下指令。

```
RewriteCond %{REQUEST_URI} \..+$
RewriteCond %{REQUEST_URI} !\.html$
RewriteCond %{REQUEST_URI} ^/name-of-app
RewriteRule ^name-of-app/(.*)$ https://myproject.local/$1 [L] 
```

# javascript - 将父单元 ID 存储在列表中

> ID：14982584
> 
> 赞同：3
> 
> 时间：2013-02-20T14:42:34.637
> 
> 标签：javascript, jquery, html, cell

我有一个表格，当它被点击时，它会输出父单元格的 id。我怎么能改变它，让它输出不止一个点击的单元格。例如，现在如果我单击单元格 id '1'，它将输出 1。如果我单击单元格 '2'，它将输出 2，依此类推。鉴于我点击了单元格 1、2 和 3，我该如何让它输出“1,2,3”。HTML：

```
<table>
    <tr>
        <td class='test' id='1'><img src='images/Dog.gif'/></td>
        <td class='test' id='2'><img src='images/Cat.gif'/></td>
        <td class='test' id='3'><img src='images/Mouse.gif'/></td>
        <td class='test' id='4'><img src='images/Human.gif'/></td>
    </tr>
</table>
<div id='output'></div> 
```

JS：

```
$(document).ready(function() { 
    $('td.test').click(function() { 
        $('#output').text(this.id);
    });
}); 
```

此外，有没有一种方法可以让我重新点击单元格 2。它会从列表中删除“2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:48:07.573

使用数组来跟踪点击的项目：

```
$(document).ready(function() { 
    var clicked = [];
    $('td.test').click(function() {
        var found = clicked.indexOf(this.id);

        // Remove
        if(found !== -1) {
            clicked.splice(found, 1);

        // Add
        } else {
            clicked.push(this.id);
        }
        $('#output').text(clicked.join(','));
    });
}); 
```

[http://jsfiddle.net/mx2kj/](http://jsfiddle.net/mx2kj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:49:15.780

```
var ids = "";

$(".test").on("click", function () {

    $(this).data("selected", !$(this).data("selected"));

    var ids = $(".test").filter(function () {
       return $(this).data("selected") === true; 
    }).map(function () {
       return this.id; 
    }).get().join(",");

    alert(ids);

}); 
```

演示：http: [//jsfiddle.net/fY5tj/1](http://jsfiddle.net/fY5tj/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:48:28.137

您可以像这样在输出 div 中附加您点击的项目 ID：

```
$('td.test').click(function() { 
 var currentText = $("#output").text();
 $("#output").text(currentText+this.id);
}); 
```

# linux-device-driver - tasklet、taskqueue、work-queue——使用哪个？

> ID：14982589
> 
> 赞同：6
> 
> 时间：2013-02-20T14:42:54.500
> 
> 标签：linux-device-driver, embedded-linux, interrupt-handling

在过去的几个月里，我正在经历 ldd3。前几章我看了很多遍。

这两个链接使用不同的方式，一个是使用工作队列，另一个是使用任务队列。实现下半部分。
[http://www.tldp.org/LDP/lkmpg/2.4/html/x1210.html](http://www.tldp.org/LDP/lkmpg/2.4/html/x1210.html) [http://www.linuxtopia.org/online_books/linux_kernel/linux_kernel_module_programming_2.6/x1256.html](http://www.linuxtopia.org/online_books/linux_kernel/linux_kernel_module_programming_2.6/x1256.html)

我怀疑`tasklet, taskqueue, work-queue`所有人似乎都在空闲时间做一些任务：-

a）这三者之间到底有什么区别？

b) 中断处理程序下半部分应该使用哪个？

使困惑 ...？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:19:28.963

Tasklet 和 work-queue 通常用在下半部分，但它们可以在任何地方使用，对它们没有限制

关于区别。

1) Tasklet 在中断上下文中使用。所有的 tasklet 代码都必须是原子的，因此应用于原子上下文的所有规则都适用于它。例如。他们不能睡觉（因为他们不能被重新安排）或长时间持有锁。

2) 与 Tasklet 不同，工作队列执行是在进程上下文中，这意味着它们可以休眠并长时间持有锁。

简而言之，tasklet 用于快速执行，因为它们无法休眠，而工作队列则用于正常执行下半部分的情况。两者都由内核稍后执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T01:08:12.840

softirq 和 tasklet 都是中断上下文 tasklet，在中断上下文中执行，workques 在进程上下文代码中执行。进程上下文代码在执行时允许休眠，但中断上下文代码在执行时不允许休眠（只有另一个中断可以抢占调度中断上下文下半部分。）

您使用哪种下半部分机制完全取决于您正在编写的驱动程序及其要求。

对于前。如果您正在编写基于中断向硬件发送数据包和从硬件发送数据包的 nw 驱动程序，您希望在没有任何延迟的情况下完成此活动，因此唯一可用的选项是 softirq 或 tasklet。

注意：最好阅读 Robert Love 的 Linux Kernel Development 第 8 章。我也读过 LDD，但 Robert Love 的 Linux Kernel Development 仍然有助于理解中断相关。

# python - Google App Engine 应用程序缓存

> ID：14982594
> 
> 赞同：1
> 
> 时间：2013-02-20T14:43:07.647
> 
> 标签：python, google-app-engine, wsgi, webapp2

在谷歌应用引擎中，我创建了自己的用户 API，适当地称为用户，因此它不会干扰谷歌应用引擎 API 用户。像大多数多用户网站一样，根据用户是否登录，该网站的两个“版本”可供用户使用。因此创建了一个名为 router.py 的文件，其代码如下

```
import webapp2

from lib import user
import guest
import authorized

if user.isLoggedIn():
    app = webapp2.WSGIApplication(authorized.WSGIHandler,debug=True)
else:
    app = webapp2.WSGIApplication(guest.WSGIHandler,debug=True) 
```

`guest`和模块的`authorized`格式类似于您的常规应用程序脚本，例如：

```
import webapp2
import os

class MainPage(webapp2.RequestHandler):
    def get(self,_random):
        self.response.out.write('authorized: '+_random)

WSGIHandler = [('/(.*)', MainPage)] 
```

因此，路由器文件通过从来宾模块或授权模块中获取 WSGIHandler 变量，轻松选择要使用的 WSGIApplication url 导向器。但是，用户必须关闭路由器的所有选项卡才能检测到`isLoggedIn()`功能的变化。如果您登录，它不会识别您已经这样做，直到每个选项卡都关闭。我有两个可能的原因：

1.  `isLoggedIn()`使用 os.environ['HTTP_COOKIE'] 检索 cookie 并查看用户是否登录，然后根据数据库检查 cookie 数据以确保它们是有效的 cookie。可能这可能会出现错误，即在页面刷新时服务器端的 cookie 没有被刷新？也许是因为我没有从`self.request`.

2.  是否有可能为了节省前端时间或谷歌应用引擎将来自服务器的脚本缓存在服务器的内存缓存中？我对此表示怀疑，但我对这种行为的原因感到茫然。

在此先感谢您的帮助

# 编辑

经过更多测试后，我发现 router.py 文件怀疑响应正确，并在添加评论时根据登录的用户定向用户。这似乎表明缓存。

# 编辑 2

我发现了有关 WSHI 应用程序的更多信息：

> Python 运行时环境在单个 Web 服务器上的请求之间缓存导入的模块，类似于独立的 Python 应用程序只加载一次模块，即使该模块是由多个文件导入的。由于 WSGI 处理程序是模块，它们在请求之间被缓存。只有提供 main() 例程的 CGI 处理程序脚本才会被缓存；否则，将为每个请求加载 CGI 处理程序脚本。

我想知道以某种方式刷新 WSGI 模块的效率如何。这无疑会给服务器带来任务，但可以解决我的问题。同样，这似乎是部分解决方案。

# 编辑 3

同样，任何在 router.py 文件中随机化注释的尝试都是无效的。查找用户登录的 id 语句完全被忽略，并且 WSGIApplication 被设置为其原始状态。我还不确定这是由于 webapp2 模块中的模块缓存还是由于用户 API 上的模块缓存。我怀疑是后者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:38:36.707

问题不在于“缓存”，而在于 WSGI 应用程序的工作方式。一个 WSGI 进程在相当长的时间内保持活动状态，并在此期间服务多个请求。是在该`app`进程启动时定义的，并且在进程更新之前不会更改。此时您不应该尝试做任何动态的或依赖于请求的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:35:07.027

将 router.py 替换为：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

from lib import user
import guest
import authorized

def main():
    if user.isLoggedIn():
        run_wsgi_app(authorized.application)
    else:
        run_wsgi_app(guest.application)

if __name__ == "__main__":
    main() 
```

降级到旧的 webapp 允许您动态更改 wsgi 应用程序。它已经过测试并且可以完美运行！CGI 适配器`run_wsgi_app`允许 webapp 在不缓存的情况下更改它的目录列表。

# c# - 如何将 java-script 对象发布到服务器

> ID：14982597
> 
> 赞同：0
> 
> 时间：2013-02-20T14:43:24.733
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-web-api

**这是我的课程（简体）**

```
public class DailyMenu
{
  public string MenuNoteText { get; set; }
}

public class MenuMonth
{
  public DailyMenu[] DailyMenus { get; set; }
} 
```

**我的 webApi 操作是**

```
[HttpPost]
public void AddMenuItem_New(MenuMonth menuMonth)
{

} 
```

**发布数据的客户端代码是：**

![在此处输入图像描述](../Images/80d83377b855f21d1e1d066ddbd088aa.png)

如果我检查 Request.Form[0]，我会看到“sampletext”。

在 menuMonth 中，DailyMenus[0] 有 1 个 DailyMenu 项目……这似乎是正确的。

**但是这个项目的 MenuNoteText 属性为空 :(** 我花了半天多的时间试图弄清楚这一点.. 仍然没有结果.. 我相信很多人一定已经将一个简单的 javascript 对象发布到服务器.. 有人能告诉我我错过了什么这里 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:55:09.870

From the [link](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1):

> application/x-www-form-urlencoded: Form data is encoded as name/value pairs, similar to a URI query string. This is the default format for POST.

Seems you *forget to tell* Web Api that you are sending request in *json* format, add 3 more headers and stringify your Json:

```
 contentType: "application/json; charset=utf-8",
 dataType: "json",
 data: JSON.stringify(menuMonth), 
```

Also note that there is one wrong typing: `cache`, not `catche`

# sql - 如何将三个逗号分隔的参数放入一个表中？

> ID：14982602
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:43:36.073
> 
> 标签：sql, sql-server, sql-server-2008

假设我的 SP 中有三个参数。ids('1,2,3'), price('22,33.7,44'),count('4,5,1')。我也有拆分功能。现在，我想在我的数据库表中插入这些值。所以我的桌子看起来像，

```
ID Price  Count
1   22     4
2   33.7   5
3   44     1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:49:09.670

从 SQL 2008 开始，您可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)- 我建议您尝试该路线，这样您就可以将结构化表传递给您的存储过程。该 MSDN 链接中有完整的示例。

我通常更喜欢该路线而不是 CSV 值/字符串拆分。我在博客上比较了一些不同的方法和性能： [表值参数 vs XML vs CSV](http://www.adathedev.co.uk/2010/02/sql-server-2008-table-valued-parameters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:14:32.980

```
create function dbo.SimpleSplit(@str varchar(max))
returns @table table (
    val varchar(max),
    rowid int
)
with schemabinding
as
begin
    declare @pos int,
            @newPos int,
            @rowid int;
    set @pos = 1;
    set @newPos = charindex(',', @str, 1);
    set @rowid = 1;

    while (@newPos != 0)
    begin
        insert into @table
            values (substring(@str, @pos, @newPos - @pos), @rowid);

        set @rowid += 1;

        set @pos = @newPos + 1;
        set @newPos = charindex(',', @str, @pos);

        if (@newPos = 0)
            insert into @table
                values (substring(@str, @pos, len(@str)), @rowid);
    end

    return;
end
GO

create procedure somesp (@id varchar(128), @price varchar(128), @count varchar(128))
as
    select t.val as id, t2.val as price, t3.val as [count]
    from dbo.SimpleSplit(@id) t
    inner join dbo.SimpleSplit(@price) t2 on t.rowid = t2.rowid
    inner join dbo.SimpleSplit(@count) t3 on t.rowid = t3.rowid
GO

exec somesp '1,2,3', '22,33.7,44', '4,5,1' 
```

# jquery - 重新计算高度功能偶尔工作

> ID：14982606
> 
> 赞同：0
> 
> 时间：2013-02-20T14:43:48.130
> 
> 标签：jquery, css, resize, load, height

我在读取 div 高度，然后调整另一个大小的脚本时遇到了一些问题。

基本上它只是偶尔做一次。

在我看来，该函数在实际加载所有元素之前获取 div 的高度。

```
function recalculate_h() {
    if ($(".content_full").is(":visible")){
           var cur = $(".content_full").height()+100;
             animate_height(cur);

       }
}

function smooth_change(way) {
 // rest of the code
    $("#here").load("index.php?siteno="+next+" #there", function(evt) {

        $("#outer").attr("siteno", next);    
            recalculate_h(); 
    });
} 
```

它在 document.ready 中被调用

```
$(".left_navigator").click(function() {
        smooth_change("back");
}); 
```

任何想法我可能做错了什么？

附言

有两种导航站点的方式，通过基本的刷新和 GET 属性，以及使用 ajax 请求更流畅。另外，像这样在每个页面加载时都会调用 recalculate_h，并且运行良好。

```
$(window).load(function() {

     recalculate_h();
     //$('#map_canvas').gmap(); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:53:47.903

我之前在我的一个项目中做过同样的场景，我解决它的方法是抓住你想要调整大小的元素并将它的 css 设置为 height: auto。然后添加其余代码。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:47:24.270

您可以尝试使用 jquery ajax 调用来加载 index.php?siteno.... 并调用 recalculate_h(); 关于ajax的完整事件？

我看到您错误地设置了这些值：

```
var middle_banner_height = 100;
var middle_banner_width = 802; 
```

你应该像这样设置它们：

```
var middle_banner_height = "100px";
var middle_banner_width = "802px"; 
```

另外，在此调用中，您设置了 midle_banner_with 而不是 middle_banner_width，因此未定义 midle_banner_with。无论如何，这可能想要解决整个错误，但是您的脚本在这里中断。

# c++ - 简单的程序，没有调用堆栈，“不可能”找到错误

> ID：14982615
> 
> 赞同：2
> 
> 时间：2013-02-20T14:44:21.217
> 
> 标签：c++, visual-studio-2010, debugging

当我在我的工作机器上运行时（win7 VS2010 Ultimate sp1）

```
int main()
{
    unsigned i = 5;
    i %= 0;
    return 0;
} 
```

或者

```
int main()
{
    int * ip = 0;
    *ip = 4;

    return 0;
} 
```

我得到整数除以零未处理的异常。当我点击中断按钮时，为了查看问题，我的调用堆栈只包含 msvcrt100d 和 ntdll，而 Visual Studio 将我的内部文件中断`mlock.c`就`LeaveCriticalSection( _locktable[locknum].lock );`行了。

当我在另一台机器（win7 VS2010 proff sp1）上运行此代码时，VS 在有问题的行`i %= 0;`od上完全中断了它`*ip = 4`。

这个错误隐藏在我的项目中的某个地方，直到我在另一台机器上运行它才能找到它。我该如何解决这种行为？我需要在我的工作机器上看到它。

我有 Windows 7 的全新安装，Visual Studio 2010 和 VS-SP1 的全新安装。我的项目不应该被毁掉。我使用 CMake 生成它，并且相同的项目在非工作机器上运行良好。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:44:36.737

好的，我找到了解决方案。

在 VS 中转到异常设置 (ctrl + alt + e) 并检查`Thrown`所需的 Win32 异常。

更多信息可以在 [这里](http://www.altdevblogaday.com/2012/07/06/when-even-crashing-doesnt-work/)和[这里](http://www.os2museum.com/wp/?p=960)找到。

SO相关问题[在这里](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a/4934010#4934010)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:36:32.117

当你用 VS 编译一个程序时，它会创建一个 EXE 文件和一个 PDB 文件，其中包含程序的所有相关调试信息。此外，如果嵌入到 EXE 中，则为 PDB的**绝对路径。**

当 EXE 崩溃并且您使用 VS 对其进行调试时，它会尝试在与 EXE 相同的文件夹中以及文件中嵌入的绝对路径中查找相应的 PDB。如果您希望它能够调试程序，则必须将 PDB 与 EXE 一起复制。请注意，这两个文件必须来自完全相同的编译，否则将无法正常工作。

然后，VS 调试器将尝试向您显示程序的源代码，再次使用嵌入在 PDB中的`*.c`或文件的绝对路径。`*.cpp`显然，如果你想让它停在相关行，你需要一份源代码的副本！如果您将源复制到与原始机器相同的路径，它应该可以正常工作。如果没有，您必须打开*调用堆栈*窗口，双击该`main`函数，它会要求您浏览实际源。

或者也许你的设置被搞砸了......

# facebook-graph-api - facebook ad_status 和 adgroup_status

> ID：14982620
> 
> 赞同：0
> 
> 时间：2013-02-20T14:44:31.620
> 
> 标签：facebook-graph-api, adgroup

在 facebook 广告组 API 中，只有 adgroup_status 被引入作为一个字段。但是，当您发出查询以获取广告组字段时，也会检索 ad_status。这两者有什么区别？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:51:28.257

来自 Facebook PMD 组（2012 年 2 月 2 日）：

问题：

> Sylvain Eche 您好，我们在广告组中发现了一个未记录的参数 ad_status
> 
> “广告状态”：2，“广告组状态”：8，
> 
> 我们怀疑 ad_status = 2 表示活动已完成您可以使用 ad_status 更新文档吗
> 
> tnx

回答：

> 这是一个不推荐使用的参数，应该忽略。我们将很快将其从 API 中删除。” [http://www.facebook.com/groups/pmdprogram/permalink/292366244154051/](http://www.facebook.com/groups/pmdprogram/permalink/292366244154051/)

# c# - 带有 LongListSelector\ListBox 的对话框

> ID：14982621
> 
> 赞同：1
> 
> 时间：2013-02-20T14:44:36.773
> 
> 标签：c#, wpf, silverlight, windows-phone

我正在开发 Windows Phone 应用程序，我想添加类似 Dialog(Android) 的弹出窗口并在此对话框中显示`ListBox`\ 。`LongListSelector`

我使用一个叫做`InputPrompt`显示对话框的文本框。有这样的东西显示`ListBox`\ `LongListSelector`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:44:43.493

您可以使用[WPToolkit](http://phone.codeplex.com/)`CustomMessageBox`提供的.

您正在寻找创建这样的东西来解决您的问题：

```
ListPicker picker = new ListPicker()
{
    Header = "SOME HEADER",
    ItemsSource = YourViewModel.SomeCollectionWithItems,
    Margin = new Thickness(12, 42, 24, 18)
};

CustomMessageBox messageBox = new CustomMessageBox()
{
    Caption = "This is a message box",
    Message = "Select one of the items from the list.",
    Content = picker,
    LeftButtonContent = "ok",
    RightButtonContent = "cancel"
}; 
```

显然，内容属性可以设置为各种各样的 UI 控件，因此可以随意切换。提供[的开箱即用示例](http://phone.codeplex.com/SourceControl/BrowseLatest)涵盖了可能的实现。

# facebook - 在 iOS 6+ 中处理 Facebook 和 Twitter 的 ACAccountStoreDidChangeNotification

> ID：14982622
> 
> 赞同：1
> 
> 时间：2013-02-20T14:44:38.867
> 
> 标签：facebook, twitter, ios6, user-accounts, social-framework

我正在使用社交框架进行 Facebook 和 Twitter 集成。为此，我按照此[链接](http://blogs.captechconsulting.com/blog/eric-stroh/ios-6-tutorial-integrating-facebook-your-applications) 一切正常，除了当我的应用程序收到 ACAccountStoreDidChangeNotification 时，它崩溃了。应用程序崩溃时

1) 我第一次安装应用程序，用户没有在设置中配置 Facebook / Twitter 帐户。

2）当我调用 Facebook / Twitter 的任何方法时，它会给我错误代码 6，因为我没有配置正确的帐户。

3）我点击主页按钮，所以我的应用程序进入后台并在 Settigs 中添加帐户。

4）一旦我配置了帐户并返回应用程序，我的应用程序将从后台启动并接收 ACAccountStoreDidChangeNotification。

5）在 ACAccountStoreDidChangeNotification 的选择器中，我的帐户对象为零，因此我的应用程序崩溃。所以我检查了零

这是我的代码

```
 #pragma mark - Request Facebook Account Access

-(void)requestFacebookAccountAccess
{
    requestType = kNoOpRequest;
    //  Register for Account Change notification
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(accountChanged:) name:ACAccountStoreDidChangeNotification object:nil];

    self.accountStore = [[ACAccountStore alloc]init];
    ACAccountType *FBaccountType= [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    // Set facebook permissions
    NSArray *permissions = nil;

    // We need to ask for Basic permission first
    if (![kUserDefaults boolForKey:FACEBOOK_BASIC_PERMISSION]) {
        permissions = @[@"email",@"user_about_me",@"user_location",@"friends_about_me"];
        self.isBasicFacebookPermissionsRequested = YES;
    }
    else {
        permissions = @[@"email",@"user_about_me",@"user_location",@"friends_about_me",@"publish_stream"];
    }

    //use ACAccountStore to help create your dictionary
    NSDictionary *dictFacebook = @{
        ACFacebookAppIdKey: kFacebookAppIDKey,
        ACFacebookPermissionsKey: permissions,
        ACFacebookAudienceKey: ACFacebookAudienceFriends
    };

    [self.accountStore requestAccessToAccountsWithType:FBaccountType options:dictFacebook completion:^(BOOL granted, NSError *error) {
        if (granted) {

            if (self.isBasicFacebookPermissionsRequested) {
                self.isBasicFacebookPermissionsRequested = NO;
                [kUserDefaults saveBasicFacebookPermissionsGrantedStatus:YES];
                //[self requestFacebookAccountAccess];
            }

            // User granted permission to Accout
            NSArray *accountsArray = [self.accountStore accountsWithAccountType:FBaccountType];

            if ([accountsArray count]>0) {
                //It will always be the last object with SSO
                self.facebookAccount = [accountsArray lastObject];
                NSLog(@"In %s::IS MAIN THREAD:- %@",__PRETTY_FUNCTION__,[NSThread isMainThread]?@"YES":@"NO");

                if ([self.delegate respondsToSelector:@selector(didFacebookAccountAccessGranted)]) {
                        dispatch_async(dispatch_get_main_queue(),^{
                            [self.delegate didFacebookAccountAccessGranted];
                        });
                }
            }
            else {
                [self showAlertWithTitle:@"Error" andMessage:@"You don't have any Facebook accounts set up yet.Please set a Facebbok account and try again."];
            }
        }
        else {
            DLog(@"User denied permission to Accout::Localized Error:- %@",error.localizedDescription);
            if([error code]==6) {
                [self showAlertWithTitle:@"Error" andMessage:@"Please setup facebook account from Settings"];
                if ([self.delegate respondsToSelector:@selector(didFacebookAccountAccessDenied:)]) {
                    dispatch_async(dispatch_get_main_queue(),^{
                        [self.delegate didFacebookAccountAccessDenied:error];
                    });
                }
            }
            else if ([self.delegate respondsToSelector:@selector(didFacebookAccountAccessDenied:)]) {
                dispatch_async(dispatch_get_main_queue(),^{
                    [self.delegate didFacebookAccountAccessDenied:error];
                });
            }

            else {
                // User denied permission to Account
                [self showAlertWithTitle:@"Error" andMessage:[NSString stringWithFormat:@"User denied permission to Accout::Error:- %@",error.localizedDescription]];
            }
        }
    }];
}

#pragma mark - Get Logged In User Info

-(void)getLoggedInUserInfo
{
    NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/fql"];
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"SELECT current_location,uid,name,sex,birthday,email,pic FROM user WHERE uid=me()",@"q", nil];
    requestType = kGetLoggedInUserInfoRequest;
    [self requestDataUsingURL:requestURL parameters:dict requestMethod:SLRequestMethodGET];
}

#pragma mark - Request Data From Facebook

-(void)requestDataUsingURL:(NSURL*)requestURL parameters:(NSDictionary*)params requestMethod:(SLRequestMethod)reuqestMethod
{

    SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                            requestMethod:reuqestMethod
                                                      URL:requestURL
                                               parameters:params];
    request.account = self.facebookAccount;

    [request performRequestWithHandler:^(NSData *data,
                                         NSHTTPURLResponse *response,
                                         NSError *error)
     {
         NSDictionary *dictData =[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
         if(!error)
         {
             if([dictData objectForKey:@"error"]!=nil)
             {
                 DLog(@"Request Data From Facebook Errro:- %@",dictData);
                 [self attemptRenewCredentials];
                 if ([self.delegate respondsToSelector:@selector(didGetFacebookError:)]) {
                     dispatch_async(dispatch_get_main_queue(),^{
                         [self.delegate didGetFacebookError:dictData];
                     });
                 }
             }
             else {
                // Process the response
                //NSLog(@"Response Dictionary contains: %@", dictData );
                if ([self.delegate respondsToSelector:@selector(didPostToFacebook:)]) {
                     dispatch_async(dispatch_get_main_queue(),^{
                         [self.delegate didPostToFacebook:dictData];
                     });
                }
             }
         }
         else{
             if ([self.delegate respondsToSelector:@selector(didGetFacebookError:)]) {
                 dispatch_async(dispatch_get_main_queue(),^{
                     [self.delegate didGetFacebookError:dictData];
                 });
             }
             else {
                 [self showAlertWithTitle:@"Error" andMessage:@"Some error occured while processing Facebook request"];
             }
         }

     }];
}

-(void)accountChanged:(NSNotification *)notif
{
    if (self.facebookAccount!=nil) {
        [self attemptRenewCredentials];
    }
    else {
        [self requestFacebookAccountAccess];
    }
}

#pragma mark - Attempt to Renew Credentials

-(void)attemptRenewCredentials
{
    [self.accountStore renewCredentialsForAccount:(ACAccount *)self.facebookAccount completion:^(ACAccountCredentialRenewResult renewResult, NSError *error){
        if(!error)
        {
            switch (renewResult) {
                case ACAccountCredentialRenewResultRenewed:
                    NSLog(@"Good to go");
                    [self againRequestFacebook];
                    break;
                case ACAccountCredentialRenewResultRejected:
                    NSLog(@"User declined permission");
                    break;
                case ACAccountCredentialRenewResultFailed:
                    NSLog(@"non-user-initiated cancel, you may attempt to retry");
                    break;
                default:
                    break;
            }

        }
        else{
            //handle error gracefully
            NSLog(@"error from renew credentials%@",error);
        }
    }];
}

-(void)againRequestFacebook
{
    switch (requestType) {
        case kGetLoggedInUserInfoRequest:
            [self getLoggedInUserInfo];
            break;
        case kGetFriendsInfoRequest:
            [self getFacebookFriendsInfo];
            break;
        case kPostToWallRequest:
            [self postToFacebookWallInBackgroundForUserId:fbUserIdForPost withParams:paramsToPost];
            break;
        default:
            break;
    }
}

#pragma mark - Remove Observer for Notification

-(void)dealloc
{
    requestType = kNoOpRequest;
    [[NSNotificationCenter defaultCenter] removeObserver:ACAccountStoreDidChangeNotification];
} 
```

但是 accountChanged 方法被多次调用。这有什么问题？我该如何处理这种情况？任何形式的帮助都将受到高度赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T07:13:41.317

我面临同样的问题......所以我通过在 NSUserDefaults 中有一个 BOOL 值来解决 accountChanged 方法只执行一次

```
-(void)accountChanged:(NSNotification *)notif
{
    BOOL calledAccountChanged =[[[NSUserDefaults standardUserDefaults] objectForKey:DidAccountChanged] boolValue];
    if(!calledAccountChanged)
    {
        if (self.facebookAccount!=nil) {
            [self attemptRenewCredentials];
        }
        else {
            [self requestFacebookAccountAccess];
        }
    }
} 
```

然后我们可以稍后在代码中更改 DidAccountChanged 值...

如果您有更好的解决方案，请发布...

# android - 从线程类启动另一个活动

> ID：14982623
> 
> 赞同：1
> 
> 时间：2013-02-20T14:44:38.617
> 
> 标签：android, multithreading

这是我第一次制作安卓游戏。游戏通过 SurfaceView 运行。

这是 SurfaceView

```
public class GameView extends SurfaceView implements SurfaceHolder.Callback
{
    private GameThread game_thread;

    public GameView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        SurfaceHolder sh = getHolder();
        sh.addCallback(this);
        setFocusable(true);

        game_thread = new GameThread(sh, context, new Handler());
    }

    public void surfaceCreated(SurfaceHolder holder)
    {
        game_thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder)
    {
        game_thread.stop();
    }
} 
```

运行游戏的线程是这样的。

```
public class GameThread extends Thread
{
    public GameThread(SurfaceHolder sh_arg, Context c, Handler h)
    {
        sh = sh_arg;
        context = c;
    }

    @Overide
    public void run()
    {
        super.run();
        while(!dead)
        {
            // Update here
        }
        // Game Over. Start another activity from here to show player score.
    }
} 
```

到目前为止，我设法让它开始另一个活动的唯一方法是在循环之后添加它。

```
context.startActivity(new Intent(context, GameOver.class)); 
```

活动确实开始并显示，但冻结并导致 ANR。

我猜从线程开始活动并不是一个好主意，并且有更好的替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:55:05.423

When you instantiate and start the thread, you do it from the main thread, which also the UI thread. With that, you have a UI thread and a background thread. Now, when you want to launch another UI thread (by starting another activity) from the second thread, because you already have another Activity with the UI thread, you get problem. You can't have two Activities running at the same time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T17:20:17.143

尝试使用

```
 ((Activity)context).runOnUiThread(new Runnable(){

    public void run()
    {
    context.startActivity(new Intent(context, GameOver.class));
    } 
    }); 
```

# javascript - 使用'将变量传递给框架 我想将一个变量传递给框架，但我得到了当前页面。 代码： function redirect(e){ $('#frame').show(); document.getElementById('frame').contentWindow.document.location.href = "page.php?var="+X; 问问题 问问题 2013-02-20T14:44:45.807 312 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想将一个变量传递给框架，但我得到了当前页面。 代码： function redirect(e){ $('#frame').show(); document.getElementById('frame').contentWindow.document.location.href = "page.php?var="+X; e.preventDefault; } [](#)我想我可能已经让它工作了：http: //jsfiddle.net/LrBau/1/ [redirect](#)  javascriptjqueryhtmlhref 4 1 回答 1 This answer is useful 1 我想我可能已经让它工作了：http: //jsfiddle.net/LrBau/1/ [redirect](#)  于 2013-02-20T15:16:58.227 回答 Related 2 javascript - 在 Google Apps Script 网络应用程序中显示文件和文件夹 1 samba - netatalk 强制权限（不仅是 OR，而且是 AND） 2 vb.net - OpeFileDialog VB.net 0 c# - 分层访问者模式示例 2 c - Sscanf 在提取字符串时未按预期运行 0 python - 使用 numpy 计算归一化迭代计数的问题 1 multidimensional-array - Bioperl 将 $seq->id 推送到数组 3 php - 在哪里存储密码，在 PHP 代码或 iOS 应用程序代码中？ 1 java - 如何创建属于一个用户 SQL 的许可证值 1 java - 在 onUpgrade 方法中选择行 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14982625
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, html, href

我想将一个变量传递给框架，但我得到了当前页面。

代码：

```
function redirect(e){
 $('#frame').show();
 document.getElementById('frame').contentWindow.document.location.href = "page.php?var="+X;         
 e.preventDefault; 
}

<a href="#"  target="frame" onClick="redirect();"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:16:58.227

我想我可能已经让它工作了：http: [//jsfiddle.net/LrBau/1/](http://jsfiddle.net/LrBau/1/)

```
<a href="#" class="redirect-link">redirect</a>

<iframe id="frame"></iframe>

<script>

  var X = 'testVal';

  var redirect = function() {
    $('#frame').show().attr('src', "page.php?var=" + X);        
    return false;
  };

  $('.redirect-link').click( redirect );

</script> 
```

# regex - 从 Perl 单行正则表达式获取返回参数

> ID：14982627
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:44:48.947
> 
> 标签：regex, windows, perl, batch-file

如何从正则表达式 Perl 执行中返回匹配的值？

我想在我的批处理文件中进一步使用匹配。

批处理文件：

```
perl -p -e "ab{2}" c:\file.txt
REM echo %var% how can I get the result from perl?
REM do something with %var% 
```

文件`file.txt`：

```
abbreviation 
```

* * *

zb226 更新：

```
test

Filename: dynamicFile.txt
Property: some property to neglect
Message: the message I want
Time: dynamicTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:02:16.167

你需要这个`FOR`命令：

```
@ECHO OFF
FOR /F "delims=" %%I IN ('perl -ne "print $1.\"\n\" if ~/(ab{2})/" c:\file.txt') DO SET match=%%I
ECHO match: %match% 
```

请注意，这将返回最后一个匹配项 - 这与您的示例 regexp无关`ab{2}`，因为它将始终返回`abb`或不返回任何内容。

**编辑 1**：忘记在 perl onliner 中添加换行符 - 或者您可以使用 Andrey 的`perl -pe ...`版本，它不需要打印换行符。

**编辑2**：再说一次，安德烈的单行只在一行的开头匹配正则表达式，这不是你的问题所暗示的。正如您已经注意到的，它还会打印不匹配的行。我想不出一个简单的`perl -pe`版本修复...

**编辑 3**：对于您在评论中提供的其他信息，这是一个快速而肮脏的解决方案。

```
@ECHO OFF
FOR /F "usebackq delims=" %%I IN (`perl -e "local $/ = undef; open my $h, '<', $ARGV[0]; my $x = <$h>; print $1 if $x=~/Filename: dynamicFile.txt.*?Message: (.*?)Time/s;" c:\file.txt`) DO SET match=%%I
ECHO match: %match% 
```

带有一个测试文件...

```
test

Filename: dynamicFile.txt
Property: some property to neglect
Message: the message I want
Time: dynamicTime
----
Filename: someOtherFile.txt
Property: some property to neglect
Message: someMessage
Time: dynamicTime 
```

...这输出：

```
match: the message I want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:51:55.790

`perl -p -e "s/^(ab{2}).*$/\1/" c:\file.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:16:01.203

```
perl -lne "print $1 if /(ab{2})/" C:\file.txt 
```

# javascript - 从父页面 onload 关闭 iframe 内的 FancyBox

> ID：14982632
> 
> 赞同：0
> 
> 时间：2013-02-20T14:45:11.183
> 
> 标签：javascript, jquery, iframe, fancybox

我知道这是可能的并且可以做到，或者至少曾经是那样。

现在我在任何地方都找不到代码。

我想在从父页面准备好的文档上关闭 iframe 中的 fancybox。

这该怎么做？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:15:08.860

经过从这里到整个谷歌的仔细检查和研究，如果浏览器确实允许这样的事情，由于安全问题会引发安全问题，这似乎根本不可能。

# java - java.net.SocketException：损坏的管道 smpp.logica 库

> ID：14982633
> 
> 赞同：1
> 
> 时间：2013-02-20T14:45:11.653
> 
> 标签：java, smpp

为什么我得到这个错误

```
 20:43:40,798 ERROR Tx:809 - java.net.SocketException: Broken pipe
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
    at com.logica.smpp.TCPIPConnection.send(TCPIPConnection.java:353)
    at com.logica.smpp.Transmitter.send(Transmitter.java:79)
    at com.logica.smpp.Session.send(Session.java:993)
    at com.logica.smpp.Session.send(Session.java:1048)
    at com.logica.smpp.Session.enquireLink(Session.java:789)
    at com.logica.smpp.Tx.kirimEnquireLink(Tx.java:795)
    at com.logica.smpp.Tx.access$0(Tx.java:777)
    at com.logica.smpp.Tx$1.run(Tx.java:120)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462) 
```

..我正在使用 Open smpp logica 库来创建 smsc 客户端 ..几个小时它可以工作，但随后出现错误..当我尝试发送查询链接时，我创建的会话是同步和类型连接是收发器这是我用来绑定和查询链接的一段代码

```
 private void bind()
    {
        debug.enter(this, "SMPPTest.bind()");
        try {

            if (bound) {
                System.out.println("Already bound, unbind first.");
                return;
            }

            BindRequest request = null;
            BindResponse response = null;
            String syncMode = (asynchronous ? "a" : "s");

            // type of the session
            syncMode = getParam("Asynchronous/Synchronnous Session? (a/s)",
                                syncMode);
            if (syncMode.compareToIgnoreCase("a")==0) {
                asynchronous = true;
            } else if (syncMode.compareToIgnoreCase("s")==0) {
                asynchronous = false;
            } else {
                System.out.println("Invalid mode async/sync, expected a or s, got "
                                   + syncMode +". Operation canceled.");
                return;
            }

            // input values
            bindOption = getParam("Transmitter/Receiver/Transciever (t/r/tr)",
                                  bindOption);

            if  (bindOption.compareToIgnoreCase("t")==0) {
                request = new BindTransmitter();
            } else if (bindOption.compareToIgnoreCase("r")==0) {
                request = new BindReceiver();
            } else if (bindOption.compareToIgnoreCase("tr")==0) {
                request = new BindTransciever();
            } else {
                System.out.println("Invalid bind mode, expected t, r or tr, got " +
                                   bindOption + ". Operation canceled.");
                return;
            }

            ipAddress = getParam("IP address of SMSC", ipAddress);
            port = getParam("Port number", port);

            TCPIPConnection connection = new TCPIPConnection(ipAddress, port);
            connection.setReceiveTimeout(20*1000);
            session = new Session(connection);

            systemId = getParam("Your system ID", systemId);
            password = getParam("Your password", password);

            // set values
            request.setSystemId(systemId);
            request.setPassword(password);
            request.setSystemType(systemType);
            request.setInterfaceVersion((byte)0x34);
            request.setAddressRange(addressRange);

            // send the request
            System.out.println("Bind request " + request.debugString());
            if (asynchronous) {
                pduListener = new SMPPTestPDUEventListener(session);
                response = session.bind(request,pduListener);
            } else {
                response = session.bind(request);
            }
            System.out.println("Bind response " + response.debugString());
            if (response.getCommandStatus() == Data.ESME_ROK) {
                System.out.println("CommandID "+response.getCommandId());
                bound = true;
            }

        } catch (Exception e) {
            event.write(e,"");
            debug.write("Bind operation failed. " + e);
            System.out.println("Bind operation failed. " + e);
        } finally {
            debug.exit(this);
        }
    } 
```

查询链接的代码是

```
 private void kirimEnquireLink()
  {
    try
    {
      log.info("Send enquireLink!");
      EnquireLink request = new EnquireLink();
      EnquireLinkResp response = new EnquireLinkResp();
//      synchronized (session) {
//        session.enquireLink(request);
//      }
      if(asynchronous)
      {
          session.enquireLink(request);
      }else
      {
          response = session.enquireLink(request);
          System.out.println("Enquire Link Response "+request.debugString());
      }

    }
    catch (Exception e)
    {
      bound = false;
    //  unbind();
      log.error(e, e);
    }
  } 
```

我每 10 秒调用一次查询链接，知道为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:11:25.107

您面临的问题是永远无法保证连接始终可用，会话也永远可用。许多不同的外部原因可能会导致 ESME 和 SMSC 之间的联系中断。我的建议，尝试捕获 enquire_link 操作和提交操作，评估异常并采取行动。

我已经成功实现了递归方法调用来处理这个问题，如下所示

```
/**
 * Connect to ESME and submit a message, if binding process fails, reattempt
 * to reconnect and submit.
 */
public void connect() {

    try {
        //Create connection
        BindRequest request = null;
        request = new BindTransciever();
        connection = new TCPIPConnection("localhost", 17632);
        connection.setReceiveTimeout(20 * 1000);
        session = new Session(connection);
        //Prepare request
        request.setSystemId("pavel");
        request.setPassword("wpsd");
        request.setSystemType("CMT");
        request.setInterfaceVersion((byte) 0x34);
        request.setAddressRange(new AddressRange());
        pduListener = new SMPPTestPDUEventListener(session);

        //Session binding process, if it fails, we are thrown to the catch section
        //with a BrokenPipe (IOException)
        session.bind(request, pduListener);

        //Prepare message
        SubmitSM msg = new SubmitSM();
        // set values
        msg.setDestAddr("04234143939");
        msg.setShortMessage("hello");
        msg.assignSequenceNumber(true);

        //Send to our custom made submitMessage method that reattempts if failure
        submitMessage(msg);

    } catch (Exception ex){
            //Analyze what type of exception was
            if (ex instanceof IOException || ex instanceof SocketException){
                //IOException relate to the brokenpipe issue you are facing
                //you need to close existing sessions and connections
                //restablish session
                if (this.connection!=null){
                    this.connection.close();
                }
                //This is a recursive call, I encourage you to elaborate
                //a little bit this method implementing a counter so you
                //don't end up in an infinite loop
                this.connect();
            } else {
                //LOG whatever other exception thrown
            } 
    }
}

    /**
 * Submit message to SMSC, if it fails because of a connection issue, reattempt
 * @param message 
 */
private void submitMessage(SubmitSM message){
        try{
            session.submit(message);
        } catch (Exception ex){
            //Analyze what type of exception was
            if (ex instanceof IOException || ex instanceof SocketException){
                //IOException relate to the brokenpipe issue you are facing
                //you need to close existing sessions and connections
                //restablish session and try to submit again
                if (this.connection!=null){
                    this.connection.close();
                }
                //Call a rebind method
                this.bind();
                //This is a recursive call, I encourage you to elaborate
                //a little bit this method implementing a counter so you
                //don't end up in an infinite loop
                this.submitMessage(message);
            } else {
                //LOG whatever other exception thrown
            }
        }
} 
```

在 IOException 重新绑定和重新尝试期间对 enquire_link、try-catch 执行相同操作。不要忘记添加一个计数器和最大尝试次数，以避免递归调用期间的无限循环。

您不需要每 10 秒查询一次。大多数提供商都会让您知道需要多久完成一次，标准是 10 分钟。

# java - 用逗号连接的 JAVA 字符串

> ID：14982635
> 
> 赞同：1
> 
> 时间：2013-02-20T14:45:22.093
> 
> 标签：java

嘿伙计们，有人可以告诉我一种用逗号连接这些字符串的好方法

基本上我正在构建一个标题标准字符串，显示已选择哪些表单变量。我需要在值之间加上逗号并保持中断标签在适当的位置……有人能找到更好的方法吗？如果只是值，我不想要逗号

这是它目前的格式：

![在此处输入图像描述](../Images/8def2a8ba9487b885fa625d7240ee342.png)

```
protected final String getCriteriaHeader(MetricFilterCriteriaForm form)
{
    String filterCriteria = "<br/>";

    }
    if (form.isSacNone() || form.isSac1() || form.isSac2() || form.isSac3())
    {
        filterCriteria = filterCriteria + "SAC:";
    }
    if (form.isSacNone())
    {
        filterCriteria = filterCriteria + " NONE";
    }
    if (form.isSac1())
    {
        filterCriteria = filterCriteria + " 1";
    }
    if (form.isSac2())
    {
        filterCriteria = filterCriteria + " 2";
    }
    if (form.isSac3())
    {
        filterCriteria = filterCriteria + " 3";
    }
    if (form.isSac1() || form.isSac2() || form.isSac3())
    {
        filterCriteria = filterCriteria + "<br/>";
    }
    if (form.isRegularScheduleType() || form.isLotScheduleType() || form.isBatchScheduleType())
    {
        filterCriteria = filterCriteria + "Schedule Type:";
    }
    if (form.isRegularScheduleType())
    {
        filterCriteria = filterCriteria + " Regular";
    }
    if (form.isLotScheduleType())
    {
        filterCriteria = filterCriteria + " Lot";
    }
    if (form.isBatchScheduleType())
    {
        filterCriteria = filterCriteria + " Batch";
    }

    return filterCriteria;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:55:24.987

有多种方法可以将字符串中的一组值与分隔符连接起来。

### 使用 StringBuilder

使用逗号添加值，然后手动删除最后一个逗号。

```
StringBuilder sb = new StringBuilder();
if (/*condition1*/) {
    sb.add("A,"); // value with comma
}
if (/*condition2*/) {
    sb.add("B,");
}
sb.delete(sb.length()-1, sb.length()); // remove last character, which is the comma.
String result = sb.toString(); // get the result string. 
```

### 使用番石榴的木匠

将其全部放入 List 并使用[Joiner](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/base/Joiner.html)。

```
List<String> list = Lists.newArrayList();
if (/*condition1*/) {
    list.add("A"); // no comma here
}
if (/*condition2*/) {
    list.add("B");
}
String result = Joiner.on(",").join(list); // use Joiner to join elements of the list. 
```

除了 Guava，还有来自 Apache Common Lang 的 StringUtils.Join。请参阅@Iswanto San 的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:55:38.653

您可以使用来自[Apache Common Lang的](http://commons.apache.org/lang/)[StringUtils.Join](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#join%28java.util.Collection,%20char%29)

例子 ：

```
protected final String getCriteriaHeader(MetricFilterCriteriaForm form)
{
    String filterCriteria = "<br/>";
    List<String> sacs = new ArrayList<String>();
    List<String> schedules = new ArrayList<String>();

    if (form.isSacNone() || form.isSac1() || form.isSac2() || form.isSac3())
    {
        filterCriteria = filterCriteria + "SAC:";
    }
    if (form.isSacNone())
    {
        filterCriteria = filterCriteria + " NONE";
    }
    if (form.isSac1())
    {
        sacs.add(" 1");
    }
    if (form.isSac2())
    {
        sacs.add(" 2");
    }
    if (form.isSac3())
    {
        sacs.add(" 3");
    }
    filterCriteria += StringUtils.join(saces, ",");
    if (form.isSac1() || form.isSac2() || form.isSac3())
    {
        filterCriteria = filterCriteria + "<br/>";
    }
    if (form.isRegularScheduleType() || form.isLotScheduleType() || form.isBatchScheduleType())
    {
        filterCriteria = filterCriteria + "Schedule Type:";
    }
    if (form.isRegularScheduleType())
    {
        schedules.add(" Regular");
    }
    if (form.isLotScheduleType())
    {
        schedules.add(" Lot");
    }
    if (form.isBatchScheduleType())
    {
        schedules.add(" Batch");
    }
    filterCriteria+=StringUtils.join(schedules, ",");

    return filterCriteria;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:51:49.133

您可以使用 StringBuilder 来构建字符串，它比简单的字符串连接更好：

```
StringBuilder sb = new StringBuilder();
if(XX) {
  sb.append("XX");
}
return sb.toString(); 
```

希望这可以帮助 ：）

PS：注意StringBuilder比StringBuffer快，但后者是线程安全的。

**编辑**

我重新阅读了您的问题，尽管我提供了有用的建议（恕我直言），但我似乎回答得不好。我不明白你到底需要什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:55:14.027

首先避免使用创建这么多 String 实例`StringBuilder`。然后嵌套条件以加快速度并获得更多结构。

```
protected final String getCriteriaHeader(MetricFilterCriteriaForm form)
{
    StringBuilder filterCriteria = new StringBuilder("<br/>");
    if (form.isSacNone() || form.isSac1() || form.isSac2() || form.isSac3())
    {
        filterCriteria.append("SAC:");
        if (form.isSacNone())
            filterCriteria.append(" NONE");
        if (form.isSac1() || form.isSac2() || form.isSac3())
        {
            if (form.isSac1())
                filterCriteria.append(" 1,");
            if (form.isSac2())
                filterCriteria.append(" 2,");
            if (form.isSac3())
                filterCriteria.append(" 3,");
            if(','==filterCriteria.charAt(filterCriteria.length-1) )
                filterCriteria.deleteCharAt(filterCriteria.length-1)
            filterCriteria.append("<br/>");
        }
    }
    if (form.isRegularScheduleType() || form.isLotScheduleType() || form.isBatchScheduleType())
    {
        filterCriteria.append("Schedule Type:");
        if (form.isRegularScheduleType())
            filterCriteria.append(" Regular,");
        if (form.isLotScheduleType())
            filterCriteria.append(" Lot,");
        if (form.isBatchScheduleType())
            filterCriteria.append(" Batch,");
        if(','==filterCriteria.charAt(filterCriteria.length-1) )
            filterCriteria.deleteCharAt(filterCriteria.length-1)
    }
    return filterCriteria.toString();
} 
```

如果只有一个条件为真，您也可以使用`else if`代替级联的`if`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T14:57:10.357

我建议把东西打成 a`List`然后使用 a `StringBuilder`：

```
protected final String getCriteriaHeader(MetricFilterCriteriaForm form) {
        final StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("<br/>");

        final List<String> sacList = new LinkedList<String>();
        if (form.isSacNone() || form.isSac1() || form.isSac2() || form.isSac3()) {
            stringBuilder.append("SAC: ");
        }
        if (form.isSacNone()) {
            sacList.add("NONE");
        }
        if (form.isSac1()) {
            sacList.add("1");
        }
        if (form.isSac2()) {
            sacList.add("2");
        }
        if (form.isSac3()) {
            sacList.add("3");
        }
        final Iterator<String> sacIter = sacList.iterator();
        while (sacIter.hasNext()) {
            stringBuilder.append(sacIter.next());
            if (sacIter.hasNext()) {
                stringBuilder.append(", ");
            }
        }
        if (form.isSac1() || form.isSac2() || form.isSac3()) {
            stringBuilder.append("<br/>");
        }
        final List<String> scheduleTypeList = new LinkedList<String>();
        if (form.isRegularScheduleType() || form.isLotScheduleType() || form.isBatchScheduleType()) {
            scheduleTypeList.add("Schedule Type: ");
        }
        if (form.isRegularScheduleType()) {
            scheduleTypeList.add("Regular");
        }
        if (form.isLotScheduleType()) {
            scheduleTypeList.add("Lot");
        }
        if (form.isBatchScheduleType()) {
            scheduleTypeList.add("Batch");
        }
        final Iterator<String> scheduleTypeIter = scheduleTypeList.iterator();
        while (scheduleTypeIter.hasNext()) {
            stringBuilder.append(scheduleTypeIter.next());
            if (scheduleTypeIter.hasNext()) {
                stringBuilder.append(", ");
            }
        }
        return stringBuilder.toString();
} 
```

# .net - C++/CLI 查询

> ID：14982636
> 
> 赞同：0
> 
> 时间：2013-02-20T14:45:25.877
> 
> 标签：.net, c++-cli

目前，我工作的公司正在为其所有软件实施新的图形用户界面。新的 GUI 将在 WPF 中实现，这需要我们的许多旧软件与 .NET Framework 互操作。我最近被分配了为用本机 C++ 编写的软件实现 WPF 接口的职责。

我决定在 C++/CLI 中实现一个包装器，它将包装原生 C++ 代码。包装器获得的功能随后将在 C# 中使用。

我遇到的问题是，每当我从 C++/CLI 项目中引用头文件（位于本机 C++ 项目中）时，都会遇到许多错误（见下文）。这是一个问题，因为当项目独立构建时，本机代码编译时没有错误。

```
2>C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(16): error C2061: syntax error : identifier 'DWORD'
2>C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(17): error C2061: syntax error : identifier 'CAtlString'
2>C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(17): error C2535: 'CFExeption::CFExeption(void)' : member function already defined or declared
2>          C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(16) : see declaration of 'CFExeption::CFExeption'
2>C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(18): error C2146: syntax error : missing ';' before identifier 'GetErrorText'
2>C:\Users\ABGZAMANK\Music\15.02.2013\DeskUpdate\Dev\Source\Libraries\DeskUpdateCore.dll\Sources\FileOperation.h(18): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

ETC...

1.  本机 C++ 是否与 C++/CLI 完全兼容，或者是否需要对本机 C++ 代码进行更改？
2.  他们是完成这项任务的更合适的方法吗？
3.  如果您对错误消息或任何建议有解决方案，请随时发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:36:37.843

如果它抱怨`DWORD`未定义，则很可能您缺少 Windows 标头。`#include <windows.h>`在包含库的标题之前尝试添加。（或修改 FileOperation.h 以包含 windows.h 本身。）

在回答“本机 C++ 是否与 C++/CLI 完全兼容？”时，答案是“大部分”。如果您在 C++ 中定义了作为 C++/CLI 中的语言关键字的内容，则会遇到问题。例如，`int gcnew = 1`是完全有效的 C++，但在 C++/CLI 中根本不起作用，因为`gcnew`它是一个关键字。不过，总的来说，您应该没问题。

从您的问题来看，听起来您正在获取所有 C++ 代码，并将其编译到 C++/CLI 项目中。如果这是一个现有的测试库，另一种选择是将 C++ 代码保留为非托管 DLL，并从 C++/CLI 调用非托管 DLL，而不是将其放在同一个项目中。也就是说，我的偏好是做你正在做的事情，将 C++ 代码编译到托管程序集中。

# c# - 如何合并两个排序的链表？

> ID：14982640
> 
> 赞同：1
> 
> 时间：2013-02-20T14:45:34.007
> 
> 标签：c#, c++, merge

这是一个面试问题，但如果有最好的解决方案，我不会。

问题：编写一个函数（用 C# 或 C++）来合并两个已经排序的链表。给定一个数据结构：C++：

```
class Node
{
public:
int data;
Node* next;
}; 
```

C＃：

```
class Node
{
public int data;
public Node next;
}; 
```

实现功能： 在 C++ 中：

```
Node* Merge (Node* head1, Node* head2)
{
…
} 
```

在 C# 中：

```
Node Merge (Node head1, Node head2)
{
…
} 
```

它接受两个已经排序的链表（按升序），并应该将它们合并为一个排序的链表（按升序）并返回新的头。2 个列表可能具有具有相同数据（int 值）的节点。我们期望结果列表没有相同的数据。

我的解决方案：

```
 Node Merge(Node head1, Node head2)
        {
            Node merged = head1;
            // Both lists are empty
            if (head1 == null && head2 == null)
            {
                return null;
            }
            // List 1 is empty
            else if (head1 == null && head2 != null)
            {
                return head2;
            }
            // List 2 is empty
            else if (head2 == null && head1 != null)
            {
                return head1;
            }
            // Both lists are not empty
            else
            {
                Node cursor1 = head1;
                Node cursor2 = head2;

                if (cursor1.next.data > cursor2.data)
                {
                    Node temp = cursor1;
                    cursor1 = cursor2;
                    cursor2 = temp;
                }

// Add all elements from list 2 to list 1
                while (cursor1.next != null && cursor2 != null)
                {
                    if (cursor1.next.data < cursor2.data)
                    {
                        cursor1 = cursor1.next;
                    }
                    else
                    {
                        Node temp1 = cursor1.next;
                        Node temp2 = cursor2.next;
                        cursor1.next = cursor2;
                        cursor2.next = temp1;

                        cursor1 = cursor1.next;
                        cursor2 = temp2;
                    }
                }

                if (cursor1.next == null)
                {
                    cursor1.next = cursor2;
                }
            }

            // Remove duplicates
            head1 = merged;
            while (head1.next != null)
            {
                if (head1.data < head1.next.data)
                {
                    head1 = head1.next;
                }
                else if (head1.data == head1.next.data) 
                {
                    head1.next = head1.next.next;
                }
            }
            return merged;
        } 
```

请给一些意见，让我知道你的聪明和好的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:50:13.033

在确保我被允许使用 C# 附带的框架之后，这就是我会做的。

鉴于此链表类（与您的相同，但使用属性）

```
class Node
{
    public int Data { get; set; }
    public Node Next { get; set; }
} 
```

为列表创建一个[IEnumerator](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)

```
class NodeEnumerator : IEnumerator<int>
{
    private Node _current_node;

    public NodeEnumerator(Node first) {
        _current_node = new Node { Data = 0, Next = first };
    }

    public int Current {
        get { return _current_node.Data; }
    }

    object IEnumerator.Current {
        get { return Current; }
    }

    public bool MoveNext() {
        if (_current_node == null) {
            return false;
        }
        _current_node = _current_node.Next;
        return _current_node != null;
    }

    public void Reset() {
        throw new NotSupportedException();
    }

    public void Dispose() {

    }
} 
```

创建对应的[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)

```
class EnumerableNode : IEnumerable<int>
{
    private Node _first;
    public EnumerableNode(Node first) {
        _first = first;
    }
    public IEnumerator<int> GetEnumerator() {
        return new NodeEnumerator(_first);
    }

    IEnumerator IEnumerable.GetEnumerator() {
        return GetEnumerator();
    }
} 
```

然后使用我可用的很棒的功能来换取这个小小的努力，`Concat`即`Distinct`

```
class Program
{
    static void Main(string[] args) {
        var list1 = new EnumerableNode(
          new Node { Data = 1, Next =
          new Node { Data = 2, Next =
          new Node { Data = 3, Next = null }}});
        var list2 = new EnumerableNode(
          new Node { Data = 2, Next =
          new Node { Data = 3, Next =
          new Node { Data = 4, Next = null }}});
        var merged = list1.Concat(list2).Distinct();
        Console.WriteLine(String.Join(",", list1));
        Console.WriteLine(String.Join(",", list2));
        Console.WriteLine(String.Join(",", merged));
        Console.ReadLine();
    }
} 
```

输出

```
1,2,3
2,3,4
1,2,3,4 
```

面试官可能正在寻找算法（比如你的解决方案），但我认为这更逼真，更优雅，并且仍然显示解决问题的能力，以及框架知识和枚举器的一般概念。它在 Java、Python 和 Ruby 中的工作原理完全相同（我敢肯定还有很多其他的）。我不知道它会如何转换为 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:03:37.347

您可能想查看 std::merge 是如何实现的：
[http ://www.cplusplus.com/reference/algorithm/merge/](http://www.cplusplus.com/reference/algorithm/merge/)

# c++ - 使用模板类的嵌套类型作为模板参数

> ID：14982643
> 
> 赞同：2
> 
> 时间：2013-02-20T14:45:39.297
> 
> 标签：c++, templates, nested, template-function, stream-operators

我想使用模板类的嵌套类型来实现模板函数。

我刚刚[在这里](https://stackoverflow.com/a/237111/938111)读到，最好实现`operator <<`为非会员和非朋友功能。因此，我决定将功能`toStream()`和`tableToStream()`外部移动`MyClass`：

```
template <typename T>
class MyClass
{
public:
  typedef boost::dynamic_bitset<> BoolTable; 
  typedef std::vector<T>          MsgTable;
private:
  BoolTable  b_;
  MsgTable   m_;
public:
  const BoolTable& getB() const { return b_; }
  const MsgTable & getM() const { return m_; }

  std::ostream& toStream (std::ostream& os) const
  {
    os <<"Bool: ";  tableToStream (os, getB());  os <<'\n';
    os <<"Msg:";    tableToStream (os, getM());  os <<'\n';
    return os;
  }

  template <typename TABLE>
  std::ostream& tableToStream (std::ostream& os, const TABLE& table) const
  {
    for (int i=0; i < table.size(); ++i)
      os << table[i] <<',';
    return os;
  }
};

template <typename T>
std::ostream& operator << (std::ostream& os, const MyClass<T> mc)
{
  return mc.toStream(os);
} 
```

`MyClass::toStream()`转换`operator <<`为非会员和非朋友功能很容易：

```
template <typename T>
std::ostream& operator << (std::ostream& os, const MyClass<T>& mc)
{
  os <<"Bool: ";  mc.tableToStream (os, mc.getB());  os <<'\n';
  os <<"Msg:";    mc.tableToStream (os, mc.getM());  os <<'\n';
   return os;
} 
```

但我想单独使用`operator <<`而不是调用`MyClass::tableToStream()`：

```
template <typename T>
std::ostream& operator << (std::ostream& os, const MyClass<T>& mc)
{
  os <<"Bool: "<< mc.getB() <<'\n';
  os <<"Msg:"  << mc.getM() <<'\n';
   return os;
} 
```

对于该函数`MyClass::tableToStream()`，我可以使用以下实现，但这可能会使流输出混乱，因为该函数太通用（任何类型都可以`TABLE`）。

```
template <typename TABLE>
std::ostream& operator << (std::ostream& os, const TABLE& table) 
{
  for (int i=0; i < table.size(); ++i)
    os << table[i] <<',';
  return os;
} 
```

因此，我想**限制**为`MyClass`. 以下是我尝试转换`MyClass::tableToStream()`为标准`operator <<`非会员和非朋友功能的尝试之一：

```
template <typename T, typename MyClass<T>::TABLE>
std::ostream& operator << (std::ostream& os, const TABLE& table) 
{
  for (int i=0; i < table.size(); ++i)
    os << table[i] <<',';
  return os;
} 
```

但错误大约是`typename MyClass<T>::TABLE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:53:41.353

由于您已经多次澄清了您的问题，因此我的第一个答案不再适用，我将删除-编辑它以提供可能更适合您的内容：

**更新的答案：** 您希望将模板限制为仅接受在 MyClass 模板中类型化的类型。这种约束通常是通过应用 SFINAE 来实现的，尤其是通过`std::enable_if`（或者`boost::enable_if`，如果您的库缺少 C++11 支持的那部分）。可悲的是，没有像 a`is_typedeffed_inside`这样的特征可以用于您的案例。更糟糕的是：没有办法仅使用普通的 typedef 来编写这样的 trait，因为在给定的类中进行类型定义并没有什么特别之处 - 编译器无法确定（并且不感兴趣）给定的已知type 在某处有一些别名。

但是，如果您的 typedef 只是您在问题中显示的那些，我有个好消息要告诉您：您需要两个`operator<<`：

1.  一个用于`boost::dynamic_bitset<>`，因为那是*任何*MyClass 实例化的 BoolTable。
2.  另一个模板化的 for `std::vector<T>`，因为那是每个对应的 MsgTable `MyClass<T>`。

缺点是，有了这个 templated `operator<<`，你就可以输出 any `std::vector<FooBar>`，即使`FooBar`与 MyClass 的任何使用完全无关。但这适用于正确`operator<<`'s 的任何其他可能实现 - 如果对 MSG 参数没有明确限制，则对 FooBar 没有限制使`std::vector<FooBar>`a 可行`MyClass<MSG>::MsgTable`。

我对你的问题的结论是：你想要`operator<<`它的方便外观，因为它通常用于这个目的。在您的情况下，您可以为`MyClass<MSG>`对象提供它，但没有办法单独为内部 typedef 这样做。

我会这样实现它：

```
template <class MSG>
class MyClass {
  /* ... */
public:
  // instead of declaring op<< a friend, redirect to a method that has 
  // natural access to private members
  std::ostream& printToStream(std::ostream& os) const
  {
    os << "Bool: "; 
    tableToStream (getB(), os); 
    os <<"\nMsg:";   
    tableToStream (getM(), os); 
    return os <<'\n';
  }
private:
  // make this one private so nobody can misuse it to print unrelated stuff
  template <class Table>
  static void tableToStream(Table const& table, std::ostream& os)
  {
    std::copy(begin(table), end(table), ostream_iterator(os, ", "));    
  }
};

template <typename MSG>
std::ostream& operator << (std::ostream& os, const MyClass<MSG>& mc)
{
  return mc.printToStream(os); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:19:39.033

你原来的课程很好。确实，如果您想要`operator <<`写入流，它应该是一个非成员非朋友函数，就像您拥有的那样，但是没有理由函数不能调用公共成员函数来执行工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:18:24.930

我终于找到[了这个类似的问题](https://stackoverflow.com/questions/11304296/nested-template-types)

就我而言，~~解决方案~~是：

```
template <typename T>
std::ostream& operator << (std::ostream& os, 
                           typename MyClass<T>::TABLE const& table) 
{
  for (int i=0; i < table.size(); ++i)
    os << table[i] <<',';
  return os;
} 
```

**更新：**正如@ArneMertz 指出的那样，上述功能不起作用。
以下是我测试过的完整代码：

```
#include <ostream>
#include <boost/dynamic_bitset.hpp>

template <typename T>
class MyClass  
{
  public:
    typedef boost::dynamic_bitset<> BoolTable; 
    typedef std::vector<T>          MsgTable;

    BoolTable  b_;
    MsgTable   m_;

    const BoolTable& getB() const { return b_; }
    const MsgTable & getM() const { return m_; }
};

template <typename T>
std::ostream& operator << (std::ostream& os, 
                           typename MyClass<T>::TABLE const& table) 
{
  for (int i=0; i < table.size(); ++i)
    os << table[i] <<',';
  return os;
}

template <typename T>
std::ostream& operator << (std::ostream& os, const MyClass<T>& mc)  
{
    os <<"Bool: "<< mc.getB() <<'\n'; // <-- this line is OK because it
    os <<"Msg:  "<< mc.getM() <<'\n';            //uses boost operator<<
    return os;
} 
```

和`main`功能：

```
#include <iostream>

int main()
{
  MyClass<int> var;
  var.b_.push_back(true);
  var.b_.push_back(false);
  var.b_.push_back(true);
  var.m_.push_back(23);
  var.m_.push_back(24);
  var.m_.push_back(25);

  std::cout << var;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T14:51:19.003

我相信你在混淆一些东西。类型名只是为了能够将它与其他模板参数分开。尝试将其重命名为

```
template <typename OS, typename MSG, typename MSGTable>
OS& operator << (OS& os, const MSGTable& table) const{} 
```

然后像对象一样使用它。

见[这里](http://www.cplusplus.com/doc/tutorial/templates/)。

# c# - 使用 c# 统一制作自定义分数计数器

> ID：14982646
> 
> 赞同：0
> 
> 时间：2013-02-20T14:45:50.007
> 
> 标签：c#, unity3d

我正在尝试统一创建一个自定义分数计数器，目前我正在使用下面的代码来创建分数计数器。

```
`void OnGUI () {
         GUILayout.BeginArea ( new Rect( Screen.width/2-Screen.width / 8, 10, Screen.width / 4, Screen.height / 4 ) );
         GUILayout.Box ( score.ToString () );
         GUILayout.EndArea ();
     }` 
```

我想要实现的就像一个数字时钟类型的计数器，所以会有一个背景的图像，然后背景中心的数字会随着分数的增加而变化。我还想实现一种向下滑动的效果，就好像你在分数增加时在笔记本中翻页一样。

编辑** 我知道我可以使用 guitexture 并在分数变化时向其添加不同的图像，我能够做到这一点，所以如果有人能告诉我如何在分数变化时添加一个动画，比如翻页，那将是完美的还。

任何完成此操作的帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:10:23.850

```
public GUITexture textureScore;
public Texture2D zero;
public Texture2D one;
public Texture2D two;
public Texture2D three;
public Texture2D four;
public Texture2D five;

void Update () {
    if(score == 0){
            textureScore.guiTexture.texture = zero;     
        }else if(score == 1){
            textureScore.guiTexture.texture = one;              
        }else if(score == 2){
            textureScore.guiTexture.texture = two;              
        }else if(score == 3){
            textureScore.guiTexture.texture = three;                
        }else if(score == 4){
            textureScore.guiTexture.texture = four;             
        }else if(score == 5){
            textureScore.guiTexture.texture = five;             
        }
} 
```

不完美但有效

# security - 一起传输纯文本和加密数据

> ID：14982647
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:45:50.813
> 
> 标签：security, encryption

我有一个加密/解密数据的网络服务。如果我的服务将明文和加密文本作为响应的一部分一起返回，是否有任何危害（从安全角度来看）？我试图找出如果他们能够同时掌握明文和密文，而不是掌握唯一的加密数据，它是否会让任何试图破坏系统并窃取密钥的人更容易。使用的算法是 AES-256 来加密数据。

**更新**：为了澄清，这个场景更多的是关于解密（而不是加密）。我的服务需要接收加密字符串列表并返回解密字符串列表。为了确保消费者能够将响应中的解密值映射到加密值，我正在考虑发回一组密文/明文对。我知道还有其他方法可以维护此映射（例如使用序列号），但我想知道是否有人可以使用密文/明文组合来找出原始密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:50:03.097

简短的回答是，不，安全密码不易受此影响（称为“[已知明文攻击](http://en.wikipedia.org/wiki/Known_plaintext_attack)”。）

来自维基百科的文章：

> 高级加密标准等现代密码目前不易受到已知明文攻击。

我很好奇你为什么要实施这样的事情，但我相信你有你的理由。愿意分享吗？

# mysql - SQL 连接超类型和子类型表

> ID：14982650
> 
> 赞同：0
> 
> 时间：2013-02-20T14:45:59.160
> 
> 标签：mysql, sql

我有一个超类型表以及两个子子类型表和第三个普通表。我的问题涉及在不包括中间超类型表的情况下将普通表连接到子类型表之一。从下面的 CREATE 语句中可以看出，我的 normalTable1 索引都与 supertypeTable 相关，而不是任何一个子类型表，但是，子类型表与超类型表具有相同的 PK。我可以简单地做吗`SELECT whatever FROM subtypeTable1 AS s INNER JOIN normalTable1 AS n ON n.supertypeTable_id=s.supertypeTable_id...`，还是需要在联接中包含其他索引或还包含 supertypeTable？谢谢

```
supertypeTable
-id (PK)
-data

subtypeTable1
-supertypeTable_id (PK and also FK with a 1-to-1 relationship to supertypeTable.id)
-data

subtypeTable2
-supertypeTable_id (PK and also FK with a 1-to-1 relationship to supertypeTable.id)
-data

normalTable1
-id (PK)
-supertypeTable_id (FK with a many-to-one relationship to supertypeTable.id)
-data

  CREATE normalTable1 (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  supertypeTable_id INT UNSIGNED NOT NULL ,
  data VARCHAR(45) NULL ,
  PRIMARY KEY (id) ,
  INDEX fk1 (supertypeTable_id ASC) ,
  CONSTRAINT fk2
    FOREIGN KEY (supertypeTable_id )
    REFERENCES supertypeTabl (id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:03:10.263

只要键匹配，您就不需要在查询中包含不需要的中间表。您可以将普通表连接到子类型表。SQL（和关系）连接基于匹配值，而不是遵循路径。

但是你的表结构有一些与这个问题无关的问题。请参阅[此 SO 答案](https://stackoverflow.com/a/4690648/562459)，并仔细查看其中的“party_type”列。

# backbone.js - 过滤掉集合中的重复条目

> ID：14982651
> 
> 赞同：0
> 
> 时间：2013-02-20T14:46:00.667
> 
> 标签：backbone.js

当使用集合中的 Backbone 填充下拉列表时，我将如何不添加重复条目，例如具有相同（在这种情况下）组织名称的条目？

目前我所拥有的是这个，它填充了一个下拉列表：

```
[[ _.each(facilities.toJSON(), function(item) { ]]
    <option value="{{ item.ID }}">{{ item.OrganisationName }}</option>
[[ }); ]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:52:33.800

你可以在你的集合上实现一个辅助方法：

```
var Facilities = Backbone.Collection.extend({
  getUniqueByProperty: function(propertyName) {
    return _.unique(this.toJSON(), function(item) {
      return item[propertyName];
    });
  }
}); 
```

用法：

```
[[ _.each(facilities.getUniqueByProperty('OrganisationName'), function(item) { ]]
  <option value="{{ item.ID }}">{{ item.OrganisationName }}</option>
[[ }); ]] 
```

/代码示例未测试

# oop - 子控制器中的 cakephp 覆盖结构

> ID：14982658
> 
> 赞同：2
> 
> 时间：2013-02-20T14:46:19.257
> 
> 标签：oop, class, cakephp, inheritance, constructor

我想知道是否可以在 cakephp 的子控制器中继承/覆盖构造函数。

在我的**AppController.php**

我有这样的：

```
public function __construct( $request = null, $response = null ) {
    parent::__construct( $request, $response );

    $this->email = new CakeEmail();

    $this->_constants = array();
    $this->_constants['some_var'] = $this->Model->find( 'list', array(
        'fields' => array( 'Model.name', 'Model.id' )
    ) );
} 
```

在我的子控制器**SomeController.php**中，它继承了父构造函数

```
public function __construct( $request = null, $response = null ) {
    parent::__construct( $request, $response );
} 
```

当我尝试访问**$this->email**和**$this->_constants['some_var']**时，它们都为空。但是，只要我将代码直接放入 SomeController.php 而不是继承，它就起作用了。

我做错了什么还是蛋糕根本无法接受？**我也对函数beforeFilter()**进行了同样的尝试，同样的事情发生了。**但是每个控制器都有自己的beforeFilter()**是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:53:40.583

我什至不会尝试覆盖`_construct' function of the appController. That's what the`beforeFilter `,`beforeRender 方法。看起来您只是想从 appController 将 vars 传递给每个控制器。你可以这样做...

```
class AppController extends Controller {

   var $_constants = array();

   public function beforeFilter(){
      $this->_constants[] = array('this', 'that', 'the other');
   }

} 
```

在模型的控制器中，您可以像这样访问变量...

```
class UsersController extends AppController {

   public function add(){
      pr($this->_constants);
   }
} 
```

如果您尝试将变量发送到视图（稍微），那就另当别论了。只需使用 set 方法

```
class AppController extends Controller {

   public function beforeFilter(){
      $this->set('_constants', array('this', 'that', 'the other'));
   }

} 
```

在任何视图中，您都可以`_constants`使用 . 调用变量`pr($_constants);`。因为它在 appController 中，所以它应该在每个视图中都可用。

# java - 尝试使用 Spring 的 JdbcTemplate 删除和插入数据

> ID：14982668
> 
> 赞同：0
> 
> 时间：2013-02-20T14:46:38.510
> 
> 标签：java, spring, spring-transactions, batch-updates

我在尝试使用 Spring 的 JdbcTemplate 中的 batchUpdate 时遇到问题。

问题是我想执行两个 SQL 操作：一个 DELETE 方法（清除我的表），然后一个 INSERT 方法。我第一次拨打电话（来自jsp）时它工作正常。但是从第二次尝试开始，当我尝试调用时，没有调用或执行 DELETE 过程，只是 INSERT 过程，导致唯一约束异常。

首先我尝试了这个：

```
public class MyTableDAOStoredProcedure extends JdbcDaoSupport implements MyTableDAO {
    ...
    ....
    public void insert(final List<MyObject> myObjectList) {
        ...
        String deleteSql = "DELETE FROM ......";
        String insertSql = "INSERT INTO ......";

        // Delete Procedure
        jdbcTemplate.execute(deleteSql);

        //Insert Procedure
        jdbcTemplate.batchUpdate(insertSql, new BatchPreparedStatementSetter() {
            @Override
            public int getBatchSize() {
                return myObjectList.size();
            }

            @Override
            public void setValues(PreparedStatement ps, int i) throws SQLException {
                MyObject object = myObjectList.get(i);
                ps.setString(1, myObject.getA());
                ps.setInt(2, myObject.getB());
            }
        });
    }
} 
```

然后我尝试了这个：

```
public class MyTableDAOStoredProcedure extends JdbcDaoSupport implements MyTableDAO {
    ...
    ...
    String deleteSql = "DELETE FROM MY OBJECT";
    String insertsql = "INSERT INTO MY_OBJECT values(1,2)";

    jdbcTemplate.batchUpdate(new String[] { deleteSql, insertSql});
} 
```

我认为这可能是一些 Spring Transaction 问题。这是我在**applicationContext.xml**上的 DAO 程序的配置，非常简单：

```
<bean id="txManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>
    .
    .
    .
<bean id="myTableDAOStoredProcedure" class="....dao.spring.MyTableDAOStoredProcedure">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
</bean> 
```

有什么想法或建议吗？

# sql - 从两个表插入到一个，而忽略重复项

> ID：14982681
> 
> 赞同：1
> 
> 时间：2013-02-20T14:47:09.090
> 
> 标签：sql, vb.net, ms-access

我正在尝试将两个 MS Access 表插入到一个 ms 访问表中。在两个表之一中，有一列包含重复值。我目前拥有的是：

> ```
>  Dim MySQL As String = "INSERT INTO XML_TEST_CASE (" & _
>                                     "TCParmId, " & _
>                                     "TestCase, " & _
>                                     "MessageType, " & _
>                                     "FileNo,  " & _
>                                     "InstructionNo,  " & _
>                                     "TransactionNo,  " & _
>                                     "ElementNo,  " & _
>                                     "MessageSection, " & _
>                                     "ElementLevel, " & _
>                                     "FullElementPath, " & _
>                                     "ElementValue, " & _
>                                     "ElementValueNew, " & _
>                                     "NameSpace, " & _
>                                     "NameSpaceValue, " & _
>                                     "Attribute, " & _
>                                     "AttributeValue, " & _
>                                     "TestCaseDescription) " & _
>                                     "SELECT " & _
>                                     "P.TCParmId, " & _
>                                     "P.TestCase, " & _
>                                     "P.MessageType, " & _
>                                     "P.FileNo, " & _
>                                     "P.InstructionNo, " & _
>                                     "P.TransactionNo, " & _
>                                     "S.ElementNo, " & _
>                                     "S.MessageSection, " & _
>                                     "S.ElementLevel, " & _
>                                     "S.ElementPath + S.Element, " & _
>                                     "S.ElementValue, " & _
>                                     "S.ElementValue, " & _
>                                     "S.NameSpace, " & _
>                                     "S.NameSpaceValue, " & _
>                                     "S.Attribute, " & _
>                                     "S.AttributeValue, " & _
>                                     "P.TestCaseDescription " & _
>                                     "FROM XML_TEST_CASE_PARAMETER P, XML_MESSAGE_STRUCTURE S " & _
>                                     "WHERE S.MessageType = P.MessageType " & _
>                                     "AND P.TestCase = '" & MyTestCase & "' " & _
>                                     "AND P.MessageType = '" & MyMessageType & "' " & _
>                                     "AND P.FileNo = " & MyFileNo & " " & _
>                                     "AND P.InstructionNo = " & MyInstructionNo & " " & _
>                                     "AND P.TransactionNo = " & MyTransactionNo & ";" 
> ```

问题是，在 XML_MESSAGE_STRUCTURE 表中，S.ElementNo 有时会出现多次，然后导致我在目标表中针对特定的 ElementNo 获得了多个记录。这是我不想要的。

任何帮助都会受到重视。

里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:59:39.000

代替`SELECT DISTINCT`，您可以按除 ElementNo 之外的所有字段进行分组。对于 ElementNo，您可以选择`Max(ElementNo)`：

```
 Dim MySQL As String = "INSERT INTO XML_TEST_CASE (" & _
                                "TCParmId, " & _
                                "TestCase, " & _
                                "MessageType, " & _
                                "FileNo,  " & _
                                "InstructionNo,  " & _
                                "TransactionNo,  " & _
                                "ElementNo,  " & _
                                "MessageSection, " & _
...
                                "SELECT " & _
                                "P.TCParmId, " & _
                                "P.TestCase, " & _
                                "P.MessageType, " & _
                                "P.FileNo, " & _
                                "P.InstructionNo, " & _
                                "P.TransactionNo, " & _
                                "Max(S.ElementNo), " & _
                                "S.MessageSection, " & _
...
                               "FROM XML_TEST_CASE_PARAMETER P, XML_MESSAGE_STRUCTURE S " & _
                                "WHERE S.MessageType = P.MessageType " & _
                                "AND P.TestCase = '" & MyTestCase & "' " & _
                                "AND P.MessageType = '" & MyMessageType & "' " & _
                                "AND P.FileNo = " & MyFileNo & " " & _
                                "AND P.InstructionNo = " & MyInstructionNo & " " & _
                                "AND P.TransactionNo = " & MyTransactionNo & _
                                "GROUP BY " & _
                                "P.TCParmId, " & _
                                "P.TestCase, " & _
                                "P.MessageType, " & _
                                "P.FileNo, " & _
                                "P.InstructionNo, " & _
                                "P.TransactionNo, " & _
                                "S.MessageSection, " & _
...
                                 ";" 
```

# c# - C#高效的图像绘制和移动

> ID：14982691
> 
> 赞同：3
> 
> 时间：2013-02-20T14:47:41.437
> 
> 标签：c#, graphics

所以我正在使用平铺图像制作横向滚动游戏。在任何给定时间，至少有大约 120 幅图像正在使用此代码绘制：

```
for (int mapX = 0; mapX < mapWidth; mapX++)
{
    for (int mapY = 0; mapY < mapHeight; mapY++)
    {
        try
        {
            Block block = mapList[mapY, mapX];

            if (block == null)
                continue;

            if (block.nullspace)
                continue;

            block.Interact();

            int drawX = sceneX + block.blockX;
            int drawY = sceneY + block.blockY;

            if (drawX + block.blockWidth < 0)
                continue;
            else if (drawX > this.ClientSize.Width + 50)
                break;

            if (drawY + block.blockHeight < 0)
                continue;
            else if (drawY > this.ClientSize.Height)
                break;

            e.Graphics.DrawImage(block.blockImage, drawX, drawY, block.blockWidth, block.blockHeight);

            if (block.overlayImage != null && !block.dontDraw)
                e.Graphics.DrawImage(block.overlayImage, sceneX + block.blockX, sceneY + block.blockY, block.blockWidth, block.blockHeight);
        }
        catch (Exception)
        {
        }
    }
} 
```

但是，每次需要移动图像时都会运行此代码。例如，为了让整个场景移动，我有一个间隔为 10 的计时器（为了保持移动平滑），它将递减 sceneX（因为我将场景向左移动），然后重新绘制整个场景。所以本质上，每 10 个滴答声就会重新绘制约 120 个图像。这导致我的程序在我的计算机上达到大约 40% 的 CPU 使用率。

基本上我的问题是：“绘制和移动大量图像图块的最有效方法是什么”

这是正在绘制的场景的图像： ![现场图片](../Images/a2214d660664f65a90b27aca604a62ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:55:11.337

You're simply overloading your CPU, because the graphics are rendered in software mode.

Use MonoGame, it is really simple to get started with, it handles the drawing for you [https://github.com/mono/MonoGame](https://github.com/mono/MonoGame) and learn a bit about game mechanics here: [http://xnagpa.net/xna4rpg.php](http://xnagpa.net/xna4rpg.php)

MonoGame supports both Direct3D and OpenGL, the graphics are hardware accelerated, and you won't notice a slowdown when rendering a simple 2D scene.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:00:42.070

您应该做的第一件事是确定您的地图在屏幕上可见的范围。现在，你有：

```
for (int mapX = 0; mapX < mapWidth; mapX++)
{
    for (int mapY = 0; mapY < mapHeight; mapY++) 
```

因此，您正在为整个世界运行循环，以查看每个单独的正方形是否可见。您可以通过在循环之前确定限制来减少工作量。这样，您将循环限制为：

```
for (int mapx = startVisibleX; mapX <= endVisibleX; mapX++)
{
    for (int mapY = startVisibleY; mapY <= endVisibleY; mapY++) 
```

如果您的世界比屏幕大得多，那将为您节省大量不必要的处理。

如果渲染速度成为问题，我强烈建议您注意其他答案中的建议，并查看 DirectX、MonoGame 或其他渲染库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:02:18.567

[XNA。](http://www.microsoft.com/en-us/download/details.aspx?id=23714)如果您处于 Windows 窗体的这个阶段，您不会发现使用 Microsoft XNA 库有很大不同，而且您的结果会更好，因为它们将利用 DirectX、硬件加速等，而您不必担心关于它。（而且你的代码会更快，更自然地读/写，因为 XNA 是为游戏/图形设计的......像这样的东西是 XNA 的目标之一。）

XNA 非常适合学习 C#（因为它是由 Microsoft 创建的），它与 Visual Studio 配合得非常好，它是免费的，并且有大量的在线教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:55:22.510

You definitely should have a look at using DirectX for rendering purposes. This is best practice when developing game under Windows.

[http://msdn.microsoft.com/en-us/library/windows/apps/hh452790.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452790.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T15:00:03.057

考虑使用**TranslateTransform**在表面上移动图像。这应该会提高性能。

# matlab - 如何按多列分组总和？

> ID：14982693
> 
> 赞同：2
> 
> 时间：2013-02-20T14:47:57.333
> 
> 标签：matlab

有一个大小为 nx 3 的矩阵，我想按组对第 3 行值求和，由第 1 列和第 2 列定义。

给出一个具体的例子

```
A =[0.0050    0.0050    0.0050
    0.0050    0.0050    0.0150
    0.0050    0.0050    0.0250
    0.0050    0.0050    0.0350
    0.0050    0.0150    0.0050] 
```

我想对第三列求和，以便得到一个矩阵

SumA = [0.05 0.05 0.8; 0.05 0.15 0.005]；

我尝试通过调用 accumarray(A(:,[1 2]), A(:,3)) 创建组，但它返回错误：第一个输入 SUBS 必须包含正整数下标。

然后我尝试通过首先创建

```
ind = A(:, [1,2])*1000; 
```

进而

```
accumarray(ind, A(:,3)) 
```

但它返回了一个 5 x 15 矩阵，这不是我想要得到的结果。

有谁知道如何对按选定列的组合分组的行求和（相当于 SQL SELECT a, b, SUM(c) FROM A GROUP BY a, b）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:53:12.310

`[~,~,ind]=unique(A(:,1:2),'rows')`为您提供一个对`accumarray`. 第一个参数的下标需要引用第二个参数中的位置（即列向量`A(:,3)`。不知道为什么你期望一个 2×5 的数据矩阵，而不是索引，在那里做任何事情。

`ans(ind)`将再次为您提供一个包含尽可能多行的列向量`A`。

# django - 如何在自定义管理器中添加过滤器？

> ID：14982706
> 
> 赞同：1
> 
> 时间：2013-02-20T14:48:54.307
> 
> 标签：django, django-custom-manager

我坚持向 Django 中的自定义管理器添加过滤器。这是我当前正在工作的自定义管理器：

```
class VoteAwareManager(models.Manager):

    def _get_score_annotation(self):
        model_type = ContentType.objects.get_for_model(self.model)
        table_name = self.model._meta.db_table
        return self.extra(select={
            'active': 'select active from %s mh where mh.main_id = %s.id and mh.active = true and mh.date_begin = (select max(date_begin) from euvoudebicicletaengine_mainhistoric where main_id = mh.main_id) and mh.date_end >= now()' % (MainHistoric._meta.db_table, table_name),
            'row_num': '(row_number() over(order by (SELECT COALESCE(SUM(vote / ((extract(epoch from now() - time_stamp )/3600)+2)^1.5),0) FROM %s WHERE content_type_id=%d AND object_id=%s.id) DESC))' % (Vote._meta.db_table, int(model_type.id), table_name), # To know the position(#number) on the front page
            'score': 'SELECT COALESCE(SUM(vote / ((extract(epoch from now() - time_stamp )/3600)+2)^1.5),0) FROM %s WHERE content_type_id=%d AND object_id=%s.id' % (Vote._meta.db_table, int(model_type.id), table_name)
                }
        )

    def most_loved(self,):
        return self._get_score_annotation().order_by('-score')

    def most_hated(self):
        return self._get_score_annotation().order_by('score') 
```

我需要在主 sql 表达式中添加一个过滤器`most_loved`，这将是等效于 SQL的 SQL。`most_hated``active=True``where active=true`

关于如何做的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:50:15.187

我认为您可能需要编写一个 SQL 视图（以替换您的函数）并为该视图`extra()`创建一个新的[非托管模型](https://docs.djangoproject.com/en/1.4/ref/models/options/#managed)`active`（包括作为模型中的一个字段）。

正如在[这个](https://stackoverflow.com/questions/2245956/creating-django-model-for-existing-database-sql-view)问题中一样。或者[这个](https://stackoverflow.com/questions/507795/can-i-use-a-database-view-as-a-model-in-django)（可能已经过时）一个。

然后使用您的视图`_get_score_annotation`并将[过滤器](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#filter)添加到您从该函数获得的查询集中。

```
def _get_score_annotation(self):
    return ContentTypeView.objects.filter(# any filtering you need)

def most_loved(self,):
    return self._get_score_annotation().filter(active=True).order_by('-score') 
```

# python - 如何在 Python 中对视频的二进制内容进行 url 编码？

> ID：14982719
> 
> 赞同：1
> 
> 时间：2013-02-20T14:49:47.123
> 
> 标签：python, tumblr

我想使用[Tumblpy 库](https://github.com/michaelhelmick/python-tumblpy)的 API 将视频移植到 Tumblr 。

我的代码是这样的：

```
import requests
r = requests.get(video-url)
f = {'data':r.content}
dat = urllib.urlencode(f)

t.post('post', blog_url='http://tumblrname.tumblr.com/',params={'type':'video', 
            'title':post.title, 'slug': post.slug,'date':post.date,'data':dat,'tags':post.tagscsv,
                'caption': post.body_html}) #t is TumblPy instance 
```

好吧，我在这方面并不成功。我确实认为我错过了如何对二进制内容进行编码以使帖子成功，尽管我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:02:02.417

大概它会类似于您发布照片的方式，在这种情况下，库需要一个文件（类似）对象。`requests`响应可以充当类似文件的对象：

```
import requests
r = requests.get(video_url)

t.post('post', blog_url='http://tumblrname.tumblr.com/', 
    params={'type': 'video', 'title': post.title, 'slug': post.slug, 
            'date': post.date, 'data': r.raw, 'tags': post.tagscsv,
            'caption': post.body_html}) 
```

where`r.raw`为您提供了一个类似文件的对象，当读取该对象时，会产生从`video_url`.

# ios - 如何使用情节提要将两个不同的标签栏图标连接到同一个视图控制器？

> ID：14982721
> 
> 赞同：3
> 
> 时间：2013-02-20T14:49:57.120
> 
> 标签：ios, ipad, uitabbarcontroller, storyboard, uistoryboard

我在一个包含 6 个项目的 iPad 应用程序中有一个标签栏控制器。当您点击它们时，其中两个图标将指向同一个视图控制器。这个视图控制器有一个它将显示的项目列表，它会根据您点击的选项卡栏图标略有变化。

我如何使用故事板进行设置？可以将关系两次拖动到同一个视图控制器，但它只在选项卡栏上显示两个相同的图标。我希望这两个选项具有不同的图标和名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T05:39:27.813

就像您发现的那样，您可以在情节提要中设计一次视图控制器，但不能多次将其与选项卡栏控制器关联。

您可以做的是在身份检查器中为其分配一个标识符，然后在运行时您可以使用方法[-[UIStoryboard instantiateViewControllerWithIdentifier:]](http://developer.apple.com/library/ios/documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStoryboard/instantiateViewControllerWithIdentifier%3a)来实例化视图控制器的第二个副本。[您可以使用-[UITabBarController setViewControllers:animated:]](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarController/setViewControllers%3aanimated%3a)将第二个副本插入选项卡控制器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:58:10.340

我相信你最好创建两个单独的视图控制器并将它们分别放在标签栏控制器中，特别是如果它们要加载不同的数据。您可以将同一个视图控制器多次放入选项卡栏控制器，但就设计和操作方式而言，这样做没有多大意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T05:09:09.410

当我尝试使用4个选项卡项实现标签栏控制器视图时，我与您的选项卡栏控制器视图和重用相同视图控制器的选项卡项以及此4项的自定义逻辑时，可以通过标签栏中设置自定义逻辑控制器调用`viewDidLoad`。让我向您展示我所做的如下：

**1.创建一个带有4个视图控制器的Tab Bar Controller**

打开情节提要，然后`Tab Bar Controller`从对象库中拖出一个。并将另外 2 个`view controller`拖到情节提要上。

请记住在标签栏控制器和 2 个新视图控制器之间建立链接。

**2.为4个tab视图创建一个复用视图控制器**

创建一个新的 cocoa touch 类，命名为`ViewController`，并在 @interface 部分创建自定义属性。这些属性会在标签栏控制器`viewDidLoad`方法中设置，所以4个标签视图会使用同一个视图控制器，但属性并不相同。

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

// Define your customisation properties here, so that you can set it in the tab bar controller.
@property (assign, nonatomic) UITableViewCellStyle style;

@end 
```

**4.创建UITabBarController的视图控制器子类**

创建一个新的 Cocoa Touch 类，命名为`UITabViewController`，并使其成为 的子类`UITabBarController`，并符合`UITabBarControllerDelegate`。

对于我的情况，我需要在 4 个不同的选项卡中显示具有不同 4 单元格样式的表格视图，因此我将在选项卡栏控制器中设置`viewController`'`style`属性以实现我的目标。

**UITabViewController.h**

```
#import <UIKit/UIKit.h>

@interface UITabViewController : UITabBarController <UITabBarControllerDelegate>
@end 
```

**UITabViewController.m**

```
#import "UITabViewController.h"

@interface UITabViewController ()

@end

@implementation UITabViewController

- (void)viewDidLoad {
    // Make UITabViewController as the delegate of UITabBarController
    self.delegate = self;

    [super viewDidLoad];

    // Set-Up the UITableCell style for each tab item
    [self.viewControllers enumerateObjectsUsingBlock:^(id viewController, NSUInteger idx, BOOL *stop){
        UITableViewCellStyle style;
        switch (idx) {
            case 0:
                style = UITableViewCellStyleDefault;
                break;
            case 1:
                style = UITableViewCellStyleSubtitle;
                break;
            case 2:
                style = UITableViewCellStyleValue1;
                break;
            case 3:
                style = UITableViewCellStyleValue2;
                break;
            default:
                style = UITableViewCellStyleDefault;
                break;
        }

        SEL selector = @selector(setStyle:);

        if([viewController respondsToSelector:selector]){
            NSInvocation *invk = [NSInvocation invocationWithMethodSignature:[viewController methodSignatureForSelector:selector]];
            [invk setSelector:selector];
            [invk setTarget:viewController];

            [invk setArgument:&style atIndex:2];
            [invk invoke];
        }
    }];
} 
```

或者，如果您需要在用户选择不同的选项卡项时设置自定义属性，那么您可以在`UITabViewController`@implementation 部分添加一个新的委托方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{
    // Check whether the view controller responds to the property setter method
    SEL selector = @selector(setMyProperty:);

    if([viewController respondsToSelector:selector]){
        // Call the setter method with NSInvocation
        NSInvocation *invk = [NSInvocation invocationWithMethodSignature:[viewController methodSignatureForSelector:selector]];
        [invk setSelector:selector];
        [invk setTarget:viewController];

        [invk setArgument:&argument atIndex:2];
        [invk invoke];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-14T11:06:57.337

我有一个类似的问题，很容易解决。

在情节提要中创建一个 TabBarController。

在每个选项卡中分配一个导航控制器。

将所有导航控制器设置为根视图控制器，这是您要在它们之间共享的一个视图控制器。

在您的视图控制器中，在 ViewDidLoad 中，基于 tabBarController.selectedIndex 创建一个条件，以便根据所选选项卡自定义视图控制器。像这样的东西：

```
override func viewDidLoad() {
    super.viewDidLoad()
    if let selectedTabIndex = tabBarController?.selectedIndex {
           switch selectedTabIndex:
           case 0: // Customize ViewController for tab 1
           case 1: // Customize ViewController for tab 2
           case 2: // Customize ViewController for tab 3
           default: break

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:39:20.657

我不认为你可以用 UITabBarController 做你想做的事情。如果需要，您可以添加同一视图控制器类的两个不同实例。否则，您将不得不向常规 UIViewController 添加一个标签栏，并编写您自己的逻辑来在控制器之间切换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-27T19:33:05.037

我可以通过在 viewDidLoad 中设置标签标题来实现这一点。我为同一个视图控制器创建了 2 个关系。然后我将栏项目标题设置为“未设置”。最后，我设置 viewDidLoad 方法如下：

```
 UITabBarController *tc = (UITabBarController *)self.parentViewController;
  NSArray *vcs = tc.viewControllers;
  BOOL tabsInitialized=YES;
  for (UIViewController *vc in vcs)
  {
    if ([vc.tabBarItem.title isEqualToString:@"Not Set"])
    {
      tabsInitialized = NO;
      break;
    }
  }
  if (!tabsInitialized)
  {
    int I=1;
    for (UIViewController *vc in vcs)
    {
      vc.tabBarItem.title = [NSString stringWithFormat:@"Tab %i", i++];
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-04T13:13:26.893

我意识到这个问题在不久前就得到了回答，但是没有提到`UITabBar`直接使用 a 并覆盖其`UITabBarDelegate` `tabBar(:,didSelect item:)`方法的解决方案，而不是让 a`UITabBarController`间接处理选择。

```
extension MyListViewController: UITabBarDelegate {

    func tabBar(_ tabBar: UITabBar, didSelect item: UITabBarItem) {

        // Set some filter based on the selected item or its tag (tag values can be assigned in IB)
        switch item.tag {
            // Apply filter to your datasource based on the item.tag
        }

        // Or if you are using a CoreData NSFetchedResultsController, set its predicate:
        // resultsController.predicate = makePredicate(item.tag)
        // resultsController.performFetch()

        tableView.reloadData()
    }
} 
```

通过直接覆盖`UITabBarDelegate`方法，您可以直接控制选项卡的选择行为。因此，您可以重复使用您的相同实例，`UIViewController`而不是`UITabBarController`坚持`UIViewController`为每个选项卡创建一个新实例。例如，在该`didSelect`方法中，您可以将过滤器应用于 a 中的现有项目列表，而不是像其他解决方案那样`UITableView`在 new 中创建列表的新实例。`UITableView`

**注意：**如果您`UITabBar`在代码或 IB 中的视图控制器中使用 a，UIKit 似乎无法识别它的存在，并且“重叠”滚动视图（例如`UITableView`，`UICollectionView`）不会自动调整它们的`contentInset`. 如果您将布局的底部锚定到安全区域的底部，也不会将`UITabBar`布局的底部正确地锚定在具有非零安全区域边距的设备上（它看起来会“浮动”，其自身与屏幕之间存在间隙 -边缘）。

**解决方案（第1部分）：**在实例上专门设置顶部约束`UITabBar`：首先将标签栏的*底部边缘锚定到安全区域的底部边缘并将**顶部*边缘`Superview`锚定到**安全区域的****底部**边缘并将常量设置为49（标准高度）在撰写本文时，UITabBar 的名称）。然后它在有和没有安全区域边距的设备上看起来都是正确的。

 *******解决方案（第 2 部分）：**您需要手动调整`tableView.contentInset`/`collectionView.contentInset`以确保内容可以在标签栏下滚动。您需要确保最底部的项目仍然可以在底部标签栏上方向上滚动：

1.  在您的中禁用自动内容插入调整`viewDidLoad()`：

    ```
    tableView.contentInsetAdjustmentBehavior = .never 
    ```

2.  `UIScrollView.contentInset`在适当的位置调整，添加以下方法并在`viewDidLoad()`每次视图布局时调用它或在必要时调用它`viewDidLayoutSubviews()`。（如果`viewDidLoad()`对你来说太早了，`viewWillAppear()`可能也太早了。）

    ```
    private func adjustScrollViewInsets() {

        // This snippet only insets the bottom of the table view, but you may need to adjust both top and bottom edges if you also need to accommodate a top navigation bar.

        var contentInset = tableView.contentInset
        if let windowInsets = view.window ?? UIApplication.shared.keyWindow?.safeAreaInsets {
            contentInset.bottom = windowInsets.bottom
        } else {
            contentInset.bottom = 0
        }
        tableView.contentInset = contentInset
    } 
    ```*****

# mongodb - MongoDb 用于流量分析

> ID：14982722
> 
> 赞同：0
> 
> 时间：2013-02-20T14:49:57.370
> 
> 标签：mongodb, analysis, traffic

所以我打算使用 mongodb（我是新来的）来跟踪我的色情网站的一般印象和流量。我在横幅上的展示次数有时会超过 100 万。而且我也有各种横幅......所以可能每天我都会在横幅上获得 10 亿次展示，我想将其存储在数据库中，以便我可以查看在特定时间范围内哪个横幅转换效果最好，以及哪个横幅转换在某些国家/地区最好等。

例如，集合中的对象如下所示：

```
{ "_id" : ObjectId("5124d03d512c175714000000"), "bid" : ObjectId("5124a9ec512c178710000000"), "city" : "Rome", "country" : "Italy", "client_id" : "127.0.0.1", "referer" : "youporn.com", "user_agent" : "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/12.0", "visit_datetime" : "2013-Feb-20 02:31:41", "visit_year" : "2013", "visit_month" : "Feb", "visit_day" : "20" } 
```

所以我需要信息和建议是存储印象的好方法，还是我的组织应该完全不同（可能每个国家/地区都有单独的收藏，但这在某些时候又会出现问题）？

我非常感谢所有的想法、建议、问题和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:29:00.037

正如@Joachim Isaksson 对您上述问题的评论，您生成的数据量巨大。基于此，您必须决定您是否有能力处理此金额。

如果您确实拥有它们，我想您之后将需要一些 map & reduce 方法来从数据中获取一些东西（使用当前的数据设计）。

我在这里看到的主要问题是，你应该有一些你想回答的具体问题。如果这样做，您可以相应地为集合建模。尤其是您需要数据的维度。否则，您很可能只是收集了一堆您最终从未使用过的数据，或者更糟糕的是，收集了错误的数据。

如果您只对国家和日期感兴趣，为什么不在横幅/日期/国家组合中的条目上增加一个计数器？因此，不要每次都保存整个日期和国家，而是创建一个类似的条目：

```
{ "bannerId" : "b1", "country" : "IT", "date" : "20130220", "count" : 0 } 
```

然后只增加对象的计数部分。这将为您节省大量数据。如果您需要更详细的信息（例如每小时时间段），您还可以每小时保存一个条目（日期+小时）。

否则为什么不看看现有的数据仓库应用程序，它也提供了解释数据的所有工具？也将是一种选择。

# python - Django > /register/ 处的语法错误

> ID：14982723
> 
> 赞同：0
> 
> 时间：2013-02-20T14:49:56.957
> 
> 标签：python, django

我正在设计这个应用程序并遇到一个不寻常的错误，试图修复但我看不到错误出现的位置。我一直在尝试比较代码以查看是否可以找到错误，但两个代码只是相同我的代码不起作用

该教程来自这里[http://hackedexistence.com/project/django/video7-userauthentication-2.html](http://hackedexistence.com/project/django/video7-userauthentication-2.html)

```
 SyntaxError at /register/

 ('invalid syntax', ('C:\\djcode\\mysite\\drinker\\views.py', 23, 12, '        else:\n'))

 Request Method:    GET
 Request URL:   http://127.0.0.1:8000/register/
 Django Version:    1.4.3
 Exception Type:    SyntaxError
 Exception Value:   

 ('invalid syntax', ('C:\\djcode\\mysite\\drinker\\views.py', 23, 12, '        else:\n'))

 Exception Location:    C:\Python26\Lib\site-packages\django\utils\importlib.py in      import_module, line 35
 Python Executable:     C:\Python26\python.exe
 Python Version:    2.6.0 
```

我的观点.py

```
 from django.http import HttpResponseRedirect
 from django.contrib.auth.models import User
 from django.contrib.decorators import login_required
 from django.shortcuts import render_to_response
 from django.template import RequestContext
 from drinker.forms import RegistrationForm,LoginForm
 from drinker.models import Drinker
 from django.contrib.auth import authenicate ,login , logout

 def DrinkerRegistration(request):
     if request.user.is_authenticated():
         return HttpResponseRedirect('/profile/')
     if request.method == 'POST':
         form = RegistrationForm(request.POST)
         if form.is_valid():
             user = User.objects.create_user(username=form.cleaned_data['username'], email = form.cleaned_data['email'] , password = form.cleaned_data['password'])
             user.save()
             drinker = Drinker(user=user , name=form.cleaned_data['name'] , birthday =form.cleaned_data['birthday'])
             drinker.save()
             return HttpResponseRedirect('/profile/')
         else:
             return render_to_response('register.html',{'form':form}, context_instance=RequestContext(request))
         else:
             form = RegistrationForm()
             context = {'form':form}
             return render_to_response('register.html',context,context_instance=RequestContext(request))
 def LoginRequest(request):
     if request.user.is_authenticated():
         return HttpResponseRedirect('/profile/')
     if request.method == 'POST':
         form= LoginForm(request.POST)
         if form.is_valid():
             username = form.cleaned_data['username']
             password = form.cleaned_data['password']
             drinker = authenticate(username=username ,password=password)
             if drinker is not None:
                 login(request,drinker)
                 return HttpResponseRedirect('/profile/')
             else:
                 return render_to_response('login.html',{'form':form} , context_instance=RequestContext(request))
             else:
                 return render_to_response('login.html',{'form': form}, context_instance=RequestContext(request))
             else:
                 form= LoginForm()
                 context = {'form':form}
            return render_to_response('login.html',context,context_instance=RequestContext(request))
 def LogoutRequest(request):
     logout(request)
     return HttpResponseRedirect('/') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:53:13.270

你有两个`else:`条件。这不是有效的语法。转到您提供的链接，您会出现缩进错误。应该是这样的。一个用于内部`if-else`，另一个用于外部`if-else`。

```
 if request.method == 'POST':
            form = RegistrationForm(request.POST)
            if form.is_valid():
                    user = User.objects.create_user(username=form.cleaned_data['username'], email = form.cleaned_data['email'], password = form.cleaned_data['password'])
                    user.save()
                    drinker = Drinker(user=user, name=form.cleaned_data['name'], birthday=form.cleaned_data['birthday'])
                    drinker.save()
                    return HttpResponseRedirect('/profile/')
            else:
                    return render_to_response('register.html', {'form': form}, context_instance=RequestContext(request))
    else:
            ''' user is not submitting the form, show them a blank registration form '''
            form = RegistrationForm()
            context = {'form': form}
            return render_to_response('register.html', context, context_instance=RequestContext(request)) 
```

# android - 在Android中录制音频时如何阻止声音输入和输出变为内部？

> ID：14982726
> 
> 赞同：0
> 
> 时间：2013-02-20T14:50:01.753
> 
> 标签：android, microphone, audiorecord, headset

我的录音应用程序中有一个奇怪的错误，当我调用`AudioRecord.startRecording();` 含义时，它会导致设备切换到内部音频，从那时起，每个应用程序（音乐播放器、YouTube 等）的所有音频都被强制通过扬声器，并且即使插入带有麦克风的耳机，也可以通过内部麦克风进行录音。

让耳机再次工作的唯一方法是退出应用程序并调整手机音量，这似乎会使设备意识到它再次拥有耳机。

我的问题是是否有人可以告诉我我可能会做什么来导致强制切换到扬声器？或者这可能只是我用来测试的设备/ROM的问题？

这是导致切换的调用：

```
 AudioRecord record = openAudio();
        record.startRecording(); 
```

...

```
 private AudioRecord openAudio()
    {
        int samplingRate = Integer.parseInt(prefs.getString("sample_rate", "44100"));
        int min = AudioRecord.getMinBufferSize(samplingRate, 
                AudioFormat.CHANNEL_IN_MONO, 
                AudioFormat.ENCODING_PCM_16BIT);
        Log.d("Recorder", "Min buffer size: " + min);
        Log.d("Recorder", "Sampling Rate: " + samplingRate);
        if (min < 4096)
            min = 4096;

        AudioRecord record = new AudioRecord(MediaRecorder.AudioSource.DEFAULT, samplingRate,
                AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT,    min);
        if (record.getState() == AudioRecord.STATE_INITIALIZED)
        { 
```

// Log.d("Recorder", "Audio recorder initialized at " + record.getSampleRate()); 退货记录；} 记录.release(); 记录=空；返回空值；}

如果有人有兴趣在他们的设备上进行测试，这里是完整的应用程序：

[https://play.google.com/store/apps/details?id=org.yuttadhammo.androidwave](https://play.google.com/store/apps/details?id=org.yuttadhammo.androidwave)

[https://github.com/yuttadhammo/androidwave](https://github.com/yuttadhammo/androidwave)

更新：排练助手中也会发生相同的行为，但前提是我让它录制未压缩的音频。似乎问题与录制未压缩的音频有关。任何想法为什么？

# c++ - 如何设置函数从数组打印到输出文件的精度

> ID：14982736
> 
> 赞同：-2
> 
> 时间：2013-02-20T14:50:19.913
> 
> 标签：c++, arrays, precision

我需要帮助设置打印到我的名为 Print_DB 的函数中的输出文件的精度。我实现了一个名为 Menu 的函数，它设置了一个主菜单，当用户选择打印到输出文件时，一个名为 Process 的函数进行必要的计算，从保存手机信息的数组中获取值。我希望将这些计算打印在输出文件上，如下所示：

```
9546321555  0   0   0.00    0.01    0.00    0.00    yes
5612971340  5   50  2.00    0.01    0.02    2.02    no
3051234567  8   25  1.60    0.03     0.05    1.65   no
7542346622  24  17   3.26   0.08     0.26    3.53   no
3054432762  15  30  3.60    0.05    0.18    3.78    yes
9544321011  50  100 40.00   0.08    3.20    43.20   yes
8776219988  87  82   57.07  0.12     6.85    63.92  yes
9042224556  4   5   0.16    0.01     0.00    0.16   yes
7877176590  11  1    0.09   0.03    0.00     0.09   no
5617278899  20  45  7.20    0.05    0.36     7.56   no
9546321555  4   3    0.10   0.01     0.00    0.10   yes
5612971340  79  86   54.35  0.12     6.52    60.87  no
3051234567  8   25  1.60    0.03     0.05    1.65   no
7542346622  24  118  22.66  0.08     1.81    24.47  no
3054432762  115 25  23.00   0.12    2.76     25.76  yes
9544321011  43  10  3.44    0.08     0.28    3.72   yes
8776219988  265 22  46.64   0.12    5.60     52.24  yes
9042224556  2   5   0.08    0.01     0.00    0.08   yes
7877176590  89  67   47.70  0.12     5.72    53.43  no
5617278899  40  56  17.92   0.08     1.43    19.35  no 
```

但相反，我得到这样的东西：

```
9546321555  0   0   -9.25596e+061   -9.25596e+061   8.56729e+121    8.56729e+121    yes
5612971340  5   50  2   0.01    0.0002  2.0002  no
3051234567  8   25  1.6 0.03    0.00048 1.60048 no
7542346622  24  17  3.264   0.08    0.0026112   3.26661 no
3054432762  15  30  1.8 0.05    0.0009  1.8009  yes
9544321011  50  100 40  0.08    0.032   40.032  yes
8776219988  87  82  57.072  0.12    0.0684864   57.1405 yes
9042224556  4   5   0.16    0.01    1.6e-005    0.160016    yes
7877176590  11  1   0.088   0.03    2.64e-005   0.0880264   no
5617278899  20  45  3.2 0.05    0.0016  3.2016  no
9546321555  4   3   0.096   0.01    9.6e-006    0.0960096   yes
5612971340  79  86  54.352  0.12    0.0652224   54.4172 no
3051234567  8   25  1.6 0.03    0.00048 1.60048 no
7542346622  24  118 22.656  0.08    0.0181248   22.6741 no
3054432762  115 25  23  0.12    0.0276  23.0276 yes
9544321011  43  10  3.44    0.08    0.002752    3.44275 yes
8776219988  265 22  46.64   0.12    0.055968    46.696  yes
9042224556  2   5   0.08    0.01    8e-006  0.080008    yes
7877176590  89  67  47.704  0.12    0.0572448   47.7612 no
5617278899  40  56  17.92   0.08    0.014336    17.9343 no 
```

我还希望功能“折扣”打印完全相同。我需要添加或修复什么？帮助？提示？谢谢你！这是我的代码：

```
#include <iostream>
#include <string>
#include <fstream>

//************************************************************************
//Name:  Kevin          Due Date: 022113
//Instructor: Dr. Bullard               Total Points:  100 pts
//Assignment2: client_call.cpp          UsIDFAU: 
//:

using namespace std;

const int CAPACITY = 20;

 class client_db
  {
  public:
    string cellnum;
    int numofrelay;
    int call_length;
    double net_cost;
    double tax_rate;
    double call_tax;
    double total_cost;
    string discount_aval;
   };

bool IsFull(int); //returns true if the array is full; otherwise false.
bool IsEmpty(int count);// returns ture if the array is empty; otherwise false.

void Add(client_db A[], int & count, client_db & db);
void Remove(client_db A[], int *count, string name);// removes an item from the array if it is there
void Print_DB(client_db A[], int count);//prints to output file
void Call_stats(client_db A[], int count);// prints all the items in the array
int Search_DB(client_db A[], int count, string name); //if the name is in the array, its location is returned
//                                        //otherwise return -1;
//
bool IsFull(int count)
////Description: Determines if the array is full
{
    return (count == CAPACITY);
}

bool IsEmpty(int count)
////Description: Determines if the array is empty
{
    return (count == 0);
}

void Process (client_db A[], int count)
{

    for(int i=0; i<count; i++)
    {
    if (A[i].numofrelay >=1 && A[i].numofrelay<=5)
    {
        A[i].tax_rate=0.01;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay >=6 && A[i].numofrelay<=11)
    {
        A[i].tax_rate=0.03;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay>=12 && A[i].numofrelay<=20)
    { 
        A[i].tax_rate=0.05;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].numofrelay);

    }
    else if (A[i].numofrelay >=21 && A[i].numofrelay<=50)
    {
       A[i].tax_rate =0.08;
       A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay >50)
    {
        A[i].tax_rate =0.12;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    A[i].call_tax = ((A[i].tax_rate)/(100))*(A[i].net_cost);
    A[i].total_cost = A[i].net_cost + A[i].call_tax;
    }
}

void Print_DB(client_db A[], int count)

//Description: Prints the items stored in A to the standard i/o device
{

    string filename;
    cout<<"Enter output filename: "; //geting filename
    cin>>filename;

    ofstream output; //declaring an output file stream

    output.open(filename.c_str()); // c_str() converts a C++ string into a 
                                  // c-style string (char array) &
                                  //open binds an ofstream to a file

    for(int i=0; i<count; i++)
    {

        output<<A[i].cellnum<<"\t"
              <<A[i].numofrelay<<"\t"
              <<A[i].call_length<<"\t"
              <<A[i].net_cost<<"\t"
              <<A[i].tax_rate<<"\t"
              <<A[i].call_tax<<"\t"
              <<A[i].total_cost<<"\t"
              <<A[i].discount_aval<<endl;

    }

    output.close();
}

int Search(client_db A[], int count, string cellnum)
////Description: Locates cellnumbers in A's fields
{ int index = -1;

for(int i=0; i<count; i++)
{
    if (!(A[i].cellnum.compare(cellnum)))
    {
        cout<<i<<endl;
        index = i;
        break;
    }
}
return index;
}

void Add(client_db A[], int &count)
////Description: Adds key to the array
{
    if (!IsFull(count))
    {
        cout<<"Enter a cellphone number, number of relay stations and the call lenght and if a discount is available: ";
        cin>>A[count].cellnum>>A[count].numofrelay>>A[count].call_length>>A[count].discount_aval;
        count++;

    }
    else
    {
        cout<<"The list is full\n";
    }

}

void Add(client_db A[], int &count, client_db &db)
////Description: Adds key to the array
{
    if (!IsFull(count))
    {
        A[count] = db; 
        count++;

    }
    else
    {
        cout<<"The list is FULL! \n";
    }

}
void Remove(client_db A[], int *count, string cellnum )

////Description: Removes the number from the array is it is there
{
int loc;
while((loc=Search(A,*count,cellnum)) != -1)
{
      if (IsEmpty(*count)){
          cout<<"There is nothing to remove\n";
          return;
      }
      else if (loc == -1){
          cout<<"Number is not in data\n";
      }
      else
      {
          for(int j=loc; j<(*count)-1; j++)
          {
              A[j] = A[j+1];
          }
          (*count)--;

      }
}
}

void Call_stats(client_db A[],int count) // prints to screen
{

    for(int i=0; i<count; i++)
    {
        cout<<A[i].cellnum<<"\t"
            <<A[i].numofrelay<<"\t"
            <<A[i].call_length<<"\t"
            <<A[i].discount_aval<<endl;

    }
}
void Menu ()
{
    cout<<"The values of the filename you entered have been recognized"<<endl;
    cout<<"Please enter the letter of your application of choice"<<endl;
    cout<<"       "<<endl;
    cout<<"************  WELCOME TO THE MAIN MENU  ************"<<endl;
    cout<<" Add an item...........................A"<<endl;
    cout<<" Remove an item........................R"<<endl;
    cout<<" Search for an item....................S"<<endl;
    cout<<" Print current data....................P"<<endl;
    cout<<" Print to output file..................O"<<endl;
    cout<<" List Discount info....................D"<<endl;
    cout<<"****************************************************"<<endl;
}

void Discount ( client_db A[], int count, string discount)
{
    cout<<"Enter 'yes' for discounts and 'no' for no discounts:  "<<endl;
    cin>>discount;

    for(int i=0; i<count; i++)
{
    if (!(A[i].discount_aval.compare(discount)))
    {

        cout <<A[i].cellnum<<"\t"
              <<A[i].numofrelay<<"\t"
              <<A[i].call_length<<"\t"
              <<A[i].net_cost<<"\t"
              <<A[i].tax_rate<<"\t"
              <<A[i].call_tax<<"\t"
              <<A[i].total_cost<<"\t"
              <<A[i].discount_aval<<endl;

    }
    }
}

int main()
{

    char answer;
    char answer2;
    string discount;
    client_db CLIENT[CAPACITY]; //declaring database
    int count = 0;   //initializing count
    string cellnum;

    string filename;
    cout<<"Hello!, this program holds clients call data records."<<endl;
    cout<<"Enter input filename: "; //geting filename
    cin>>filename;

    ifstream input; //declaring an input file stream

    input.open(filename.c_str()); // c_str() converts a C++ string into
        while(count<CAPACITY && !input.eof()) //reading until the end of the file (eof=end-of-file)
    {

        input>>CLIENT[count].cellnum
        >>CLIENT[count].numofrelay
        >>CLIENT[count].call_length
        >>CLIENT[count].discount_aval;

        count++;

    }

    do
{

  Menu();
  cout<<"Please enter a command letter:  "<<endl;
    cin>>answer;
    client_db db;

    switch (answer)
{

case 'A' : 
    cout<<"Enter a cellphone number, number of relay stations and the call lenght and if a discount is available: "<<endl;
    cin>>db.cellnum>>db.numofrelay>>db.call_length>>db.discount_aval;
    Add(CLIENT, count, db);
break;
case 'R' : cout<<"Please enter a phone number:   "<<endl;
cin>>cellnum;
Remove(CLIENT,&count,cellnum); 

break;
case 'S' : 
    cout<<"Please enter a phone number:   "<<endl;
    cin>>cellnum;
    Search(CLIENT,count,cellnum); 

break;
case 'P' : Call_stats(CLIENT,count);
break;
case 'O' :
    Process(CLIENT,count); //how do i set the precision for this?
    Print_DB(CLIENT,count);
break;
case 'D':
    Process(CLIENT,count); 
    Discount(CLIENT,count,discount);
    }
     cout<<"Would you like to make another command?(y/n):   "<<endl;
   cin>>answer2;
} while (answer2 == 'Y' || answer2 == 'y');
 cout<<"Goodbye"<<endl;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:55:58.573

你应该`iomanip`为此使用标题。

用于`setw(width)`设置输出的宽度：`cout<<setw(5)<<"Hello"`

这里有更多的功能你可以看看[IOMANIP](http://www.cplusplus.com/reference/iomanip/)（看看）。

与此类似：

```
output<<setw(10)<<A[i].cellnum<<"\t"
              <<setw(4)<<A[i].numofrelay<<"\t"
              <<setw(4)<<A[i].call_length<<"\t"
              <<setw(6)<<A[i].net_cost<<"\t"
              <<setw(5)<<A[i].tax_rate<<"\t"
              <<setw(6)<<A[i].call_tax<<"\t"
              <<setw(7)<<A[i].total_cost<<"\t"
              <<setw(4)<<A[i].discount_aval<<endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:53:42.923

与 cout 类似，可以同样操作输出文件。`<iomanip>`与您的输出文件一起使用：

```
output << fixed << showpoint << setprecision(2); 
```

格式化输出：

```
const int TAB = 12;
output << right << num1 << setw(TAB) << num2 << setw(TAB) << num3 << endl;
//and so on.. 
```

[http://www.cplusplus.com/reference/iomanip/](http://www.cplusplus.com/reference/iomanip/)

编辑：关于您的文件读取循环，它不会给您预期的结果。这是编写文件循环的正确方法：

```
ifstream inFile("in.txt");
int value; //value infile will read into
//read once BEFORE the loop starts
inFile >> value;

while (inFile && count<CAPACITY) {
//manipulate/handle the input above
inFile >> value; //read in the next value
} 
```

# c# - 运行太多进程时 Mono 崩溃

> ID：14982740
> 
> 赞同：0
> 
> 时间：2013-02-20T14:50:29.233
> 
> 标签：c#, linux, process, mono, memory-leaks

我想建立一个视频转换队列，因此运行单声道程序的服务器从队列中提取视频并运行 ffmpeg 进行转换。当运行许多 ffmpeg 进程时，单声道给了我错误。

所以我用 ping 创建了一个测试用例，因为它是一个长期运行的 ffmpeg。

```
 static TextWriter tw = new StreamWriter("error.txt");
    private static int _started;
    public static void Main (string[] args)
    {

        for (int i=0; i<1000; i++) {
            Start ("ping", "localhost");

        }
        Console.WriteLine("Memory: " + (GC.GetTotalMemory(true) / 1024) + "KB");
        Console.WriteLine(_started);
        tw.Flush();
        Console.ReadLine();
    }

    public static Process Start (string name, string args)
    {
        try {
            var proc = new ProcessStartInfo {
                    FileName = name,
                    Arguments = args,
                    RedirectStandardOutput = true,
                    CreateNoWindow = false,
                    RedirectStandardError = false,
                    UseShellExecute = false,
                    RedirectStandardInput = false,
            };
            Process.Start (proc);
            _started++;
        } catch (Exception ex) {
            tw.WriteLine (ex.InnerException+Environment.NewLine+ex.Message + Environment.NewLine + ex.StackTrace, false);
            tw.Flush();
        }
        return null;
    } 
```

运行时，会抛出与 ffmpeg 相同的错误

```
ApplicationName='ping', CommandLine='localhost', CurrentDirectory=''
  at System.Diagnostics.Process.Start_noshell
(System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process
process) [0x00000] in <filename unknown>:0 
  at System.Diagnostics.Process.Start_common
(System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process
process) [0x00000] in <filename unknown>:0 
  at System.Diagnostics.Process.Start (System.Diagnostics.ProcessStartInfo
startInfo) [0x00000] in <filename unknown>:0 
  at test1.MainClass.Start (System.String name, System.String args) [0x00000]
in <filename unknown>:0 
```

和

> CreateProcess：创建进程句柄时出错

这就是我的环境：

```
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-5ubuntu1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none
    Misc:          softdebug 
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

和极限值

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 31439
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 31439
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

我想继续我的项目，但因为这个异常我不能，在使用 mono 工作 1 年后，我真的很喜欢它，并且因为这个麻烦不想学习其他语言。

我希望我的代码有问题，而不是单声道运行时。

**所以我的临时解决方案：**

```
 public static void Start (string cmd, int time)
    {
        new Thread (p =>
        {
            try {
                Mono.Unix.Native.Syscall.system (String.Format("timeout {0} {1}", time, cmd));
            } catch (Exception ex) {
                //log it
            }
        }
        ).Start ();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:54:49.970

您必须在 Process 实例上调用 WaitForExit 和 Dispose。

所以你的 Start 方法看起来像这样：

```
public static void Start (string name, string args)
{
    new Thread (() =>
    {
        try {
            var proc = new ProcessStartInfo {
                    FileName = name,
                    Arguments = args,
                    RedirectStandardOutput = true,
                    CreateNoWindow = false,
                    RedirectStandardError = false,
                    UseShellExecute = false,
                    RedirectStandardInput = false,
            };
            using (var p = new Process ()) {
                p.StartInfo = proc;
                p.Start ();
                p.WaitForExit ();
            }
            _started++;
        } catch (Exception ex) {
            tw.WriteLine (ex.InnerException+Environment.NewLine+ex.Message + Environment.NewLine + ex.StackTrace, false);
            tw.Flush();
        }
    }).Start ();
} 
```

# c# - How to get item details from an ItemCollection in a GridView

> ID：14982741
> 
> 赞同：0
> 
> 时间：2013-02-20T14:50:29.557
> 
> 标签：c#, wpf, windows-8, winrt-xaml

I've a GridView page with different elements (ItemExplorer). Each element has two TextBlocks (Name & Description) and they're binding to a Collection.

I want that to when I click in a single element, a new page should be opened with the item details (ItemViewer), like a name or description...

I'm new in C#, so I appreciate any help or support! :)

This is my current code:

**ItemExplorer.xaml:**

```
<GridView ItemsSource="{Binding ItemList}">
    <GridView.ItemTemplate>
        <DataTemplate>
            <Border DoubleTapped="GoToItemViewer_DoubleTapped">
                <StackPanel>
                    <TextBlock Name="ItemName" Text="{Binding ItemName}"/>
                    <TextBlock Name="ItemDescription" Text="{Binding ItemDescription}"/>
                </StackPanel>
            </Border>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

**ItemExplorer.xaml.cs:**

```
namespace Test001.Pages
{
    public sealed partial class ItemExplorer : Page
    {
        public ItemCollection MyItemCollection;

        public ItemExplorer()
        {
            this.InitializeComponent();
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
           MyItemCollection = new ItemCollection();
           this.DataContext = MyItemCollection;
        }

        // Go to ItemViewer
        private void GoToItemViewer_DoubleTapped(object sender, DoubleTappedRoutedEventArgs e)
        {
            if (this.Frame != null)
            {
                // SEND THE ITEM DETAILS AS PARAMTER TO ITEMVIEWER
                this.Frame.Navigate(typeof(ItemViewer));

            }
        }
    }
} 
```

**ItemCollection.cs**

```
Collectionnamespace Test001.DataSource
{
    public class CollectionFiles: BindableBase
    {
        private ItemCollection _ItemList = new ItemCollection();

        public ItemCollection ItemList
        {
            get { return _ItemList; }
            set { SetProperty(ref _ItemList, value); }
        }

        public CollectionFiles()
        {
            _ItemList.Add(new FileModel()
            {
                ItemName = "ItenName0",
                ItemDescription = "Iten Description0",
            });

            _ItemList.Add(new FileModel()
            {
                ItemName = "ItenName1",
                ItemDescription = "Iten Description1",
            });

            _ItemList.Add(new FileModel()
            {
                ItemName = "ItenName2",
                ItemDescription = "Iten Description2",
            });

            _ItemList.Add(new FileModel()
            {
                ItemName = "ItenName3",
                ItemDescription = "Iten Description3",
            });
        }
    }
} 
```

**ItemViewer.xaml.cs**

```
namespace mydox104.Pages
{
    public sealed partial class DocumentViewer : mydox104.Common.LayoutAwarePage
    {
        public DocumentViewer()
        {
            this.InitializeComponent();
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {

            // GET THE ITEM DETAILS
            string file_name = e.Parameter as string;

            if (!string.IsNullOrWhiteSpace(file_name))
            {
                pageTitle.Text = file_name;
            }
            else
            {
                pageTitle.Text = e.Parameter.ToString();
            }
        }
    }
} 
```

**ItemViewer.xaml**

```
<Grid Height="225">
    <TextBlock x:Name="Item-Name" Text=""/>
    <TextBlock x:Name="Item-Description" Text=""/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:10:55.717

Set in GridView:

```
<GridView IsItemClickEnabled="True" ItemClick="ItemClicked" ItemsSource="{Binding ItemList}"> 
```

in ItemExplorer.xaml.cs

```
private void ItemClicked(object sender, ItemClickEventArgs e)
{
    var clickedItem = e.ClickedItem as ItemCollection;
    if (clickedItem != null )
    {
       this.Frame.NavigateTo(typeof(ItemViewer), clickedItem);
    }
} 
```

in ItemViewer.xaml.cs

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
{
 ItemCollection myElement = e.Parameter as ItemCollection;
 ...
} 
```

Instead of `public ItemCollection MyItemCollection;`
i'd just use `public ObservableCollection<FileModel> Items`;

I hope it will help you somehow. However I encourage you to look about MVVM pattern. It is really useful in developing WPF/WinRT applications. (check also MVVM Light framework which gives you for instance Messanger class - which have ability to "send objects/messages" between classes).

# javascript - 使用 javascript 动态添加 html 变量

> ID：14982744
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:50:36.050
> 
> 标签：javascript, html, ajax, variables

我想`<script>var var1 = new CalendarPopup();</script>`根据用户选择的数字添加 html 变量：“”。目前我有一个 ajax 设置，假设通过更改内部 html 来更改我的标签以添加变量，如下所示：

```
<div id="calVar">
    <script>
        var cal1 = new CalendarPopup();
        var cal2 = new CalendarPopup();
    </script>
</div>

        function addRespDropDownAjax(currentNumberOfDropDown)
    {

        //Prepare a new ajaxRequest.
        if (window.XMLHttpRequest) 
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        //Ajax receiving the response in this function
        xmlhttp.onreadystatechange = function() 
        {
            //state 4 is response ready.
            //Status 200 is page found.
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                document.getElementById('calVar').innerHTML = '<script>var cal3 = new CalendarPopup();</script>';
                    alert(document.getElementById('calVar').innerHTML);

            }
        };

        //Send the Ajax request.
        xmlhttp.open('GET','mainServlet?command=ajax.AddRespDropDown&NUMBER_OF_DROP_DOWN=' + currentNumberOfDropDown, true);
        xmlhttp.send();

    } 
```

最后一个警报 :document.getElementById('calVar').innerHTML 什么也不返回，我的变量也没有创建。有任何想法吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:56:38.750

HTML 没有变量，在`<script>`没有更深嵌套范围的情况下定义的任何变量都可以在`window`对象之外简单定义。

不要尝试插入 HTML，只需使用：

```
window.cal3 = new CalendarPopup(); 
```

那么任何其他脚本现在或以后都可以访问此变量。

# windows - 通过控制台应用程序打开具有特定 URL 的浏览器

> ID：14982746
> 
> 赞同：5
> 
> 时间：2013-02-20T14:50:39.627
> 
> 标签：windows, url, console

我在 Visual Studio 中做一个控制台应用程序，但我有一个小问题。如果我想在按下任意键时打开具有指定 URL 的浏览器，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2019-09-04T07:48:07.070

如果您还想涵盖 .Net Core 应用程序。**感谢 Brock Allen**

[https://brockallen.com/2016/09/24/process-start-for-urls-on-net-core/](https://brockallen.com/2016/09/24/process-start-for-urls-on-net-core/)

```
public static void OpenBrowser(string url)
{
    try
    {
        Process.Start(url);
    }
    catch
    {
        // hack because of this: https://github.com/dotnet/corefx/issues/10361
        if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows))
        {
            url = url.Replace("&", "^&");
            Process.Start(new ProcessStartInfo("cmd", $"/c start {url}") { CreateNoWindow = true });
        }
        else if (RuntimeInformation.IsOSPlatform(OSPlatform.Linux))
        {
            Process.Start("xdg-open", url);
        }
        else if (RuntimeInformation.IsOSPlatform(OSPlatform.OSX))
        {
            Process.Start("open", url);
        }
        else
        {
            throw;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T16:23:29.123

使用[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)类实例来设置用于启动流程的值。

像这样的东西：

```
using System;
using System.Diagnostics;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var psi = new ProcessStartInfo("iexplore.exe");
            psi.Arguments = "http://www.google.com/";
            Process.Start(psi);
        }
    }
} 
```

# ruby - 如何调用参数传递的名称的方法？

> ID：14982747
> 
> 赞同：1
> 
> 时间：2013-02-20T14:50:39.837
> 
> 标签：ruby, testing

我有一堂有一些方法的课

```
class Test
  def add(a,b)
    a+b
  end
  ...
end 
```

我想动态测试是否定义了类和方法，并断言该方法。这是代码和问题=（

```
def methodInsideDefined?(className, methodName, param1, param2, result)
  if(className.is_a?(Class) && className.method_defined?(:methodName))
    className.new.methodName(param1,param2).eql?(result)
  end
end 
```

所以如果我打电话：

```
methodInsideDefined?(Test, add, 1, 2, 3) 
```

我应该得到一个真正的价值，但我得到一个：

```
NameError: undefined local variable or method ‘add’ for main:Object 
```

请以静态方式忽略参数数量，稍后我将介绍动态参数数量，但如果您有动态参数数量的解决方案，请告诉我。=D

是的，我是 Ruby noobie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:57:28.260

尝试：

```
methodInsideDefined?(Test, :add, 1, 2, 3) 
```

在您当前的代码中，您将不存在的*变量* `add`传递给您的函数。如果您将符号而不是变量传递`:add`给函数，则它确实有效。

在您的函数定义中，情况正好相反。您在那里使用符号而不是变量。它应该是：

```
def methodInsideDefined?(className, methodName, param1, param2, result)
  if className.is_a?(Class) && className.method_defined?(methodName)
    className.new.send(methodName,param1,param2).eql?(result)
  end
end 
```

还要注意[`send`](http://khelll.com/blog/ruby/ruby-dynamic-method-calling/)我的代码中的使用。当你想动态调用一个方法时，你必须使用它。

# smalltalk - 使用 Monticello 导入 Visualworks mcz 包

> ID：14982748
> 
> 赞同：1
> 
> 时间：2013-02-20T14:50:50.800
> 
> 标签：smalltalk, visualworks, monticello

我正在尝试使用 SmallTalk/Visualworks 下的 TUIO 对客户端进行多点触控手势编程。为了获得 TUIO 的 mcz 包，我正在使用 Monticello。

问题是，每当我尝试使用蒙蒂塞洛加载一个包时，我总是会收到以下错误消息：

![在此处输入图像描述](../Images/6daec801da04c10faf4dbc87ea76f5b0.png)

如果有人对此不感兴趣，我可以向您展示 Stack。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:46:25.483

mcz 包本质上是一个压缩的 zip 文件。VisualWorks 中当前的Monticello 实现使用外部shell 程序将源代码解压缩并压缩为Monticello mcz 文件。

在 Windows 下将包从 Monticello 移植到 VisualWorks 时，通常会出现查找相应 zip.exe/unzip.exe 的问题。要解决您的问题，请尝试将 PATH 变量设置为您的 zip.exe/unzip.exe。

另一种方法是从网上下载 Info-ZIP 包。将其放入 image 目录的子文件夹中，并更改 VisualWorks Monticello 包的执行逻辑。在 VisualWorks Monticello 包中浏览 shOne: 的发件人并更改呼叫。

从 Squeak 或 Pharo 移植软件包时要记住的下一件事是始终定义一个命名空间，该命名空间完全按照 monticello 软件包名称的第一个单词命名（upTo：$-）。在加载包之前定义命名空间。

IE`JQueryMobile-Libraries-NickAger.10.mcz -> Define a Namespace JQueryMobile`

不要忘记导入导入的代码解析超类名称所需的必要命名空间。

IE`JQueryMobile needs Seaside.*, Javascript.*, JQuery.*, Grease.*, Smalltalk.*`

# jquery - 在同一块内切换 div

> ID：14982753
> 
> 赞同：1
> 
> 时间：2013-02-20T14:51:04.280
> 
> 标签：jquery

我正在使用 jquery 在两个 div 之间切换，如下所示：

```
$(".edit").click(function(){
   $(".module-content").toggle();
   $(".module-edit").toggle();
}); 
```

我将通过以下方式在页面下方有几个具有相同类的块：

```
<div class="module">
   <a class="edit" href="#">Edit</a>
   <div class="module-content">
      <?php echo the_field('company_information'); ?>
   </div>
   <div class="module-edit" style="display:none;">              
      <?php acf_form( $company_information ); ?>
   </div>
</div> 
```

如何仅在编辑链接下方但仅在该模块块内切换 div？

我知道这与这个问题非常相似 -[切换一个具有相同课程的 div](https://stackoverflow.com/questions/5551888/toggle-one-div-with-same-class)但我无法让它工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:54:49.137

You just need to select the sibling elements, change your javscript code to this:

```
$(".edit").click(function(){
  $(this).siblings(".module-content, .module-edit").toggle();
}); 
```

That's now matching the sibling DOM elements with classes `module-content` and `module-edit` and calling the `toggle()` method on all matched elements.

Edit: You requested a way to toggle the link word too, this should work for you:

```
$('.edit').click(function(){

  var link = this;

  // Change the link wording 
  if ($(link).html() == 'edit')
    $(link).html('close');
  else
    $(link).html('edit');

  // Open or close the sibling DIV elements
  $(link).siblings('.module-content, .module-edit').toggle();

  return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:02:00.237

我最近做了类似的事情。我选择的路线——不确定它是否是最佳实践——是从元素的 onclick 属性中触发 jquery。然后将当前元素传递给您的切换功能，因此您只影响上下文中的 div，可以这么说。

例如：

```
<div class="module">
  <a class="edit" href="#" onclick="my_toggle(this);">Edit</a>
  <div class="module-content">
    <?php echo the_field('company_information'); ?>
  </div>
  <div class="module-edit" style="display:none;">              
    <?php acf_form( $company_information ); ?>
  </div>
</div> 
```

然后在你的javascript中，写一些类似于

```
function my_toggle(el){
  // retrieve context element as jquery object
  var jq_el = $(el);
  // toggle
  jq_el.parent().children('.module-content').toggle();
  jq_el.parent().children('.module-edit').toggle();
} 
```

上面的代码片段未经测试，因此可能包含一些错误，但我相信这个概念是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:54:21.520

```
$(".edit").click(function(){
   var $this = $(this);
   $this.siblings(".module-content").toggle();
   $this.siblings(".module-edit").toggle();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:57:16.403

你需要给 jQuery 一些你想要切换的上下文`.module-content`：`.module-edit`

```
$(".edit").click(function(){
   var parent = $(this).parent();
   parent.find(".module-content").toggle();
   parent.find(".module-edit").toggle();
}); 
```

或者

```
$(".edit").click(function(){
   var parent = $(this).parent();
   $(".module-content", parent).toggle();
   $(".module-edit", parent).toggle();
}); 
```

（两者都做同样的事情）。

顺便说一句，您可以通过同时切换两个项目来简化呼叫：

```
parent.find(".module-content, .module-edit").toggle(); 
```

# vba - 在 Excel 中添加行不会更新 VB 代码

> ID：14982755
> 
> 赞同：0
> 
> 时间：2013-02-20T14:51:10.750
> 
> 标签：vba, excel, excel-2010

我有一个带有一些 VB 代码的 excel 2010 电子表格，可以根据选择自动隐藏某些行。但是，如果我需要在我的 excel 电子表格中插入一行，它不会像使用公式那样自动更新 vb 代码。

这是我的代码示例：

```
If Target.Address(False, False) = "B96" Then
    Select Case Target.Value
        Case "NO":  Rows("97:101").Hidden = True
        Case "YES": Rows("97:101").Hidden = False
    End Select
End If 
```

例如，如果我在我的 excel 电子表格的第 90 行插入一个新行，我会期望 VB 代码自动更新并且 target.address 将更改为 B97 等等。它适用于 Excel 公式，那么有没有办法让它也适用于代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:02:34.000

我建议您将相关范围（例如 A97:A101 ）（例如 A97:A101 ）命名为命名范围，比如说 OPTIONRNGE，然后将您的代码更改为：

```
Case "NO":  Range("OPTIONRNGE").Rows.Hidden = True
Case "YES": Range("OPTIONRNGE").Rows.Hidden = False 
```

等等，然后，如果你插入行，它会扩展范围，代码仍然会做同样的事情。命名范围几乎总是比硬编码范围或 VBA 中的行号更好。

# sql-server - 是否有理由认为 SQL 作业应该由 sa 以外的任何人拥有？

> ID：14982756
> 
> 赞同：6
> 
> 时间：2013-02-20T14:51:12.860
> 
> 标签：sql-server

换句话说，我是否应该始终将 SQL 作业的作业所有者设置为 sa，即使它默认为创建它的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:22:54.807

如果该用户被禁用或删除，则该用户拥有的任何作业都将停止运行。如果运行时出现 Active Directory 问题，作业也可能不会运行。Brent Ozar 在他的网站上有一篇关于此的文章： [http ://www.brentozar.com/blitz/jobs-owned-by-user-accounts/](http://www.brentozar.com/blitz/jobs-owned-by-user-accounts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:25:23.150

你得忍受我。因为我是凭记忆去的。

查看一些旧脚本，我有这段代码。

选择 @jobOwnerNameVeryImportantToSetCorrectly = 'someSqlAuthenticatonUser'

现在。在我的场景中，我允许非“sa”用户安排和运行作业。这就是为什么我让所有者成为非“sa”用户的原因。

我想回答的问题是，“谁负责工作”。如果它总是“sa”，那么它不是问题。

但是，如果您想要一个非 'sa' 帐户来运行它，那么一个特权较低的帐户将如何运行由 super-mack-daddy 帐户拥有的作业？

我的测试是。

1.  创建工作。让'sa'拥有它。
2.  创建一个临时 sql 身份验证帐户。
3.  以此 sql-authentication 帐户登录数据库。
4.  看看您是否可以运行该作业。

我的记忆是说“较小的帐户将无法”。但是，我处理的是 Sql Server 2005 上的工作。因此，即使我没记错 2005 年，2008 年或 2008R2 也可能不一样。

但我记得有这个问题。因此我的变量声明：

选择 @jobOwnerNameVeryImportantToSetCorrectly = 'someSqlAuthenticatonUser'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T11:45:34.527

我也阅读了 Brent Ozar 的文章，并且处于类似的情况，即启用了很多不属于 SA 的工作。根据我的研究，我没有找到任何令人信服的理由**不**将所有权更改为“SA”，但上面提到了两个很好的理由为什么你应该这样做。

您不必担心他们无法摆脱这种变化。我要谨慎的唯一两件事是：1）您作为 SA**运行**的作业和 2）如果您进入一个环境，启用在您进行此更改后已禁用的作业。

为什么有人会做这两件事，IDK，但您始终可以备份 msdb，然后在开发或培训服务器中测试这些更改。只需注意您更改的工作，以防发生意外情况。

# java - Java -Xmx 命令没有给我预期的内存

> ID：14982758
> 
> 赞同：1
> 
> 时间：2013-02-20T14:51:24.163
> 
> 标签：java, memory, heap-size

我正在使用 java`-Xmx60g`命令运行以下代码。

每个阵列应该是**8.5GB**左右，总共**17GB**。该机器总共有**64GB**，其中**63GB** “免费”。它打印`DONE DECLARING RIVER HANDS 1`，表明它完成了第一个数组的声明。

但是我在线程“main” java.lang.OutOfMemoryError: Java heap space 在第二个数组的声明过程中得到了异常。我很困惑，因为我的理解是`-Xmx60g`应该分配**60GB**，而数组只使用**17GB**。

在此先感谢您的帮助！

```
long NUM_RIVER_HANDS = 2428287420L;
int half_river = (int)(NUM_RIVER_HANDS/2);
byte[][] river_hands_1 = new byte[half_river][7];
System.out.println("DONE DECLARING RIVER HANDS 1");
byte[][] river_hands_2 = new byte[(int)(NUM_RIVER_HANDS - half_river)][7];
System.out.println("DONE DECLARING RIVER HANDS 2"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:55:30.120

In the first allocation, you're creating 1214143710 arrays, each of which is 7 bytes *plus the object overhead*. If we assume a per-object overhead for an array of 16 bytes (which is reasonable, if not conservative) then that means *two thirds* of your space is being wasted. If we assume 24 bytes for each array in total, that's ~29GB just for the first allocation... and if there's more overhead than that, pushing it to 32 bytes for each array, for example, it's ~38GB, at which point it's not surprising that you can't do it twice :)

Just change the way you're using the arrays to make this *much* more efficient:

```
// Names changed to follow Java naming conventions
byte[][] riverHands1 = new byte[7][halfRiver];
byte[][] riverHands2 = new byte[7][(int)(NUM_RIVER_HANDS - halfRiver)]; 
```

You'll need to change how you *use* the arrays as well, but now you have a total of 14 `byte[]` objects, each of which is very large... but you'll have hardly any wasted memory due to object overheads.

# web - YUI 小部件 - 动态更新

> ID：14982759
> 
> 赞同：1
> 
> 时间：2013-02-20T14:51:29.247
> 
> 标签：web, yui, yui3

我是网络编程的新手，当然也是 YUI 的新手。

我尝试使用覆盖、图表和节点菜单。想知道是否有任何选项可以使用 JSON 格式的动态数据创建这些小部件并在新数据进入时更新小部件？

对我们来说，所有属性都来自服务器的 JSON 数据，然后使用这些数据我们需要渲染菜单栏、图表、属性浏览器。现在我没有找到如何继续这个要求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:11:55.693

没有通过 Ajax 同步小部件的默认方式。默认情况下，唯一带有更新数据方式的小部件是 DataTable 小部件。其余的，甚至是DataTable的属性，都需要自己动手。

但是，如果数据和小部件足够复杂，您应该考虑使用[YUI App Framework](http://yuilibrary.com/yui/docs/app/)。模型和视图的组合将帮助您使用小部件创建复杂的布局。[模型](http://yuilibrary.com/yui/docs/model/)将为您提供一种轻松将属性链接到 JSON 后端的方法，特别是在您使用[RESTful API 端点](http://yuilibrary.com/yui/docs/model/#model-sync-layers)时。[View](http://yuilibrary.com/yui/docs/view/)将为您提供设置标记和对事件做出反应的工具。

模型`load`和`change`事件将让您知道数据何时更新。因此，在您看来，您将能够对这些事件做出反应并在小部件中设置相应的属性：

```
var MyView = Y.Base.create('myView', Y.View, [], {
  initializer: function () {
    this.get('model').on('change', this._updateWidgets, this);
  },
  _updateWidgets: function () {
    var model = this.get('model');
    this.someWidget.set('someAttr', mode.get('someAttr'));
  }
}); 
```

但正如我所说，没有正确的方法可以做到这一点。你可以使用任何你喜欢的技术。App 框架只是一组可用于构建应用程序的基本组件。它专为灵活性而设计，因此可以适应多种使用方式。其他方式可以`IO`直接使用或`DataSources`结合Widget Plugins使用。这是一个有很多正确答案的问题。

# java - 是否可以手动检查 LocateRegistry 是否存在？

> ID：14982760
> 
> 赞同：3
> 
> 时间：2013-02-20T14:51:40.480
> 
> 标签：java, exception, rmi

我[找到](https://stackoverflow.com/a/8338852/897090)了一种安全的获取方式`LocateRegistry`（即使注册表尚不存在）。

```
Registry registry = null;
try {
    registry = LocateRegistry.getRegistry(52365);
    registry.list();
    // This call will throw an exception if the registry does not already exist
}
catch (RemoteException e) { 
    registry = LocateRegistry.createRegistry(52365);
} 
```

是否可以先检查注册表的存在和使用情况`getRegistry`或`createRegistry`根据检查结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:22:37.333

> 是否可以先检查注册表是否存在，然后根据检查结果使用getRegistry或createRegistry？

当然。试试第`createRegistry()`一个；抓住`ExportException`，这意味着它已经在运行，并`getRegistry()`无条件地执行。

> 我想在 getRegistry 不存在时避免不必要的调用

这不是一个有效的担忧。这是一个几乎免费的电话。没有网络活动。

# facebook - FQL 查询以获取特定用户返回错误的标记照片

> ID：14982761
> 
> 赞同：0
> 
> 时间：2013-02-20T14:51:41.400
> 
> 标签：facebook, facebook-fql, friend, photos

如何从特定朋友那里获取标记的照片？我现在正在使用此代码

> SELECT pid,src,images FROM photo WHERE object_id IN (SELECT object_id FROM photo_tag WHERE subject=$uid)

这是错误

> 致命错误：未捕获异常：1：在第 1254 行的 /FBapps/album-downloader-pro/php-sdk/base_facebook.php 中发生未知错误

这个为一些朋友工作？但不是所有人。这是查询错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:01:59.637

您提供的 FQL 查询只会在用户有权查看照片时返回照片。此外，用户需要批准“user_photos”权限才能访问他们的照片。

您从 Facebook 收到的实际错误消息是什么，而不是 PHP 错误？

# vb.net - 更改窗口形式的关闭按钮

> ID：14982763
> 
> 赞同：0
> 
> 时间：2013-02-20T14:51:47.700
> 
> 标签：vb.net, winforms, visual-studio-2010

有没有办法改变（x）按钮的命令？

我想显示另一个表单并隐藏当前表单而不是关闭程序。

我应该把这个放在哪里？：

```
Me.Hide()
Form.Show() 
```

我尝试将它放在表单关闭/关闭事件中，但没有任何反应，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:47:36.317

当然，FormClosing 事件就是为此而设计的。您需要注意关闭表单的原因，如下所示：

```
Protected Overrides Sub OnFormClosing(ByVal e As FormClosingEventArgs)
    MyBase.OnFormClosing(e)
    If Not e.Cancel AndAlso e.CloseReason = CloseReason.UserClosing Then
        e.Cancel = True
        Dim frm = New Form2()
        frm.Show()
        Me.Hide()
    End If
End Sub 
```

请注意，您必须为用户提供终止应用程序的方法。

# java - 正在转发 Spring MVC RequestMapping

> ID：14982767
> 
> 赞同：0
> 
> 时间：2013-02-20T14:51:52.207
> 
> 标签：java, spring, rest, spring-mvc

我有一个基于 Spring MVC 的 REST 服务。

这是我的代码：

```
public class SitesController {

@RequestMapping(value="/rest/sites/{id}", method=RequestMethod.GET)
@ResponseBody
public SiteDTO getSite(@PathVariable String id) {
    Integer siteId = Integer.parseInt(id);

    Site site = cms.getSite(siteId);
    SiteDTO siteResult = new SiteDTO(site);
    return siteResult;
}

@RequestMapping(value="/rest/sites", method=RequestMethod.GET)
public SitesResult getSites(@RequestParam Integer companyId) {
    Collection<Site> sites = cms.getSites(cms.getCompany(companyId));
    SitesResult sitesResult = new SitesResult(sites);
    return sitesResult;
}

} 
```

（我跳过了一些不适用于该问题的代码）

当我转到 URL`/rest/sites/1`时，它返回了我期望的数据，但是当我转到`/rest/sites?companyId=1`404 页面时：`HTTP Status 404 - /rest/rest/sites`。

日志显示`getSites`函数中的代码已运行，但之后日志显示以下内容：`org.springframework.web.servlet.view.JstlView Forwarding to resource [rest/sites] in InternalResourceView 'rest/sites'`

为什么它被重定向而不是执行？

**更新**

发现了问题。因为我没有`@ResponseBody`上面我的方法，调度员转发了我的请求。更多信息[在这里](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)，关键是`If the method is annotated with @ResponseBody, the return type is written to the response HTTP body. The return value will be converted to the declared method argument type using HttpMessageConverters.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:20:53.933

因为您的方法返回类型`SitesResult`不是[受支持的返回类型](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)之一，所以 Spring 将`Model`使用其类名将返回的对象添加到并尝试呈现由您的请求映射的值命名的视图，这就是它尝试呈现的原因`/rest/sites`。它实际上并不是在做一个 HTTP 转发，而是一个调度程序转发，它是`servlets`用来渲染视图的（例如。`jsp`）。

如果要返回特定视图，请返回包含其名称的字符串。

反而

```
@RequestMapping(value="/rest/sites", method=RequestMethod.GET)
public SitesResult getSites(@RequestParam Integer companyId) {
    Collection<Site> sites = cms.getSites(cms.getCompany(companyId));
    SitesResult sitesResult = new SitesResult(sites);
    return sitesResult;
} 
```

做这个

```
@RequestMapping(value="/rest/sites", method=RequestMethod.GET)
public String getSites(@RequestParam Integer companyId, Model model) {
    Collection<Site> sites = cms.getSites(cms.getCompany(companyId));
    SitesResult sitesResult = new SitesResult(sites);
    model.addAttribute("sitesResult", sitesResult);
    String myView = "myView";
    return myView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:03:18.327

这只是我的一个猜测......

方法 getSites 可以声明为：

```
public SitesResult getSites(@RequestParam("companyId") Integer companyId) { 
```

不知道这样会不会有影响？

或者可能是指定的逻辑视图名称没有映射到视图？

# arrays - 在舞台上放6组数字actionscript 3.0

> ID：14982775
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:09.760
> 
> 标签：arrays, actionscript-3

我正在尝试纠正一个游戏，其中有 2 行，每组 6 组数字是随机生成的，将第一行数字与底行数字相匹配，以查看你回来的回合有多少匹配。

我认为随机生成器问题很容易，因为数字是 1-35 使用上限来获取数字

我的问题是我对 actionscript 很陌生，我不知道如何在舞台上放置 2 行 6 个随机数我有几本书我已经扫描过，以及我尝试过的网络没有任何效果。

我能在这里得到一点编码帮助吗非常感谢你花时间帮助我克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:20:00.383

你可以尝试这些方面的东西

```
 var myArr:Array = new Array(1, 2, 3, 4, 5);
    var tf:TextField = new TextField();
    tf.text = myArr[0].toString();
    tf.x = 200;
    tf.y = 200;
    addChild(tf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:03:55.760

查看[`TextField`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html)课程

和[`DisplayObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)方法`.addChild()`

您基本上需要创建多个文本字段，然后将它们添加到电影中。

请注意，您需要嵌入要使用的字体字形（`0-9`我想）

# php - 双重页面加载如何防止呢？

> ID：14982777
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:15.193
> 
> 标签：php, load

我在 PHP 中有以下 if 语句：

```
if(isset($_POST['approved']))
    {
    // do stuff
    }
else
    {
    // give the user an error message
    } 
```

现在的问题是 AND if 正在执行并且 else 正在执行。

现在我已经将问题跟踪为双页加载问题，并且同时发送了一个 post 和 get 请求或类似的东西，但在同一个文件中执行。

简而言之，我如何防止这种情况发生，以便我的用户在一切正常时不会收到错误消息？

有没有办法将 PHP 配置为只允许一次执行？

试着去想这让我非常头疼，好像我有一个平行的宇宙，在那里发生了相反的事情，但一切都回到了这个宇宙，因为两者都发生了......

薛定谔猫，但没有坍缩波函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:57:54.863

如果页面被加载两次，那么问题不在于这个文件中的 php，而是调用它的文件有问题。基本上，它加载了两次，因为它被请求了两次。不要试图停止执行 php 文件，停止第二个请求的发生。

# c# - 如何在真机上连接和测试 Windows CE 项目？

> ID：14982779
> 
> 赞同：1
> 
> 时间：2013-02-20T14:52:20.867
> 
> 标签：c#, visual-studio, windows-ce, motorola, activesync

***注意***：我正在使用 VS2008，并且正在使用 Windows 7。

我正在开发一个 Windows CE 应用程序，它将在带有 WinCE 5.0（如 OS）的 Motorola MC3000 设备上运行。

我尝试使用 ActiveSync 以使所选设备的测试成为可能，但它在 win7 上不起作用，因此我尝试找到另一个工具，并根据[此讨论](http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesnative/thread/8e08e112-1cee-4436-b2d3-00c87e33b71f/)找到了 Windows Mobile Device Center 。

所以现在我可以使用该设备浏览，但不幸的是我无法使用它进行测试：该设备安装了“santech”应用程序并且无法终止该应用程序。（即使我重新启动机器，自动运行午餐应用程序。自动）。此外，当我尝试在设备上部署我的应用程序时，它会返回错误报告；有时“没有磁盘空间”有时“找不到 .exe”。

我真的被困住了。

有人可以帮我解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:06:45.710

听起来调试器连接得很好，只是无法完全复制应用程序和依赖项，或者没有足够的内存来执行它。

如果您可以浏览设备，您可以停止运行“santech”应用程序。你只需要确定是什么启动它。它可能是`\Windows\Startup`文件夹中的快捷方式。它可能是通过[`\[HKLM\Init\]`](http://msdn.microsoft.com/en-us/library/ms924527.aspx). IIRC，符号设备也支持`*.run`文件`\Application\Startup`夹中的文件，所以也要检查一下。

其中之一是启动应用程序，因此您可以根据需要消除它。

接下来，通过查看“控制面板”下方的“控制面板”`System->Memory`并调整滑块以提供更多存储空间来检查设备上的可用内存。如果没有足够的存储内存来存储您的应用程序，您可以尝试更改部署目录（在项目属性-> 设备下）以将应用程序二进制文件推送到某种非易失性存储（板载闪存、SD 卡等） , 如果设备有它。

如果您没有足够的程序内存来​​运行您的应用程序，那么您可能会不走运。尝试杀死进程以释放一些空间并使用内存分配滑块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:01:47.743

您也可以从 VS2008 内部进行调试。您需要告诉它连接到设备，因为它会自动将其发送到模拟器。为此，您需要`Windows CE Device`从“设备”工具栏中的下拉列表中进行选择（要启用，请转到“视图”、“工具栏”并选择“设备”）。然后按 F5，它应该会在您的设备上启动。您可能会看到几个包含设备列表的弹出框；确保这些也设置`Windows CE Device`为。

[MSDN 上的这个方便的页面](http://msdn.microsoft.com/en-us/library/bb513828%28v=vs.90%29.aspx)也应该提供您需要的信息。

# iphone - 从提要在 MKMapView 上绘制图钉

> ID：14982780
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:22.843
> 
> 标签：iphone, ios, nsmutablearray, mkmapview, mapkit

我正在尝试绘制来自 mapView 上的提要的多个引脚。提要以以下格式解析为被`NSMutableArray`调用的***项目***：

```
{
    date = "19/02/2013";
    firstname = Tom;
    latitude = "52.45321";
    longitude = "-1.7172";
    name = "Birmingham NEC";
    surname = Thompson;
    time = "10:15";
} 
```

我该怎么做呢？我还需要将***项目***中的经度和纬度拉到不同的数组中，还是可以按原样使用***项目？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:06:00.383

如果您遵循本教程，您将了解您需要做的所有事情。 [http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)

祝你好运

# java - 使用具有空布局的 JPanel

> ID：14982781
> 
> 赞同：3
> 
> 时间：2013-02-20T14:52:22.630
> 
> 标签：java, swing, css-position, layout-manager, null-layout-manager

所以我有一个名为`CalendarPanel`extends的类`JPanel`。它使用空布局。我将如何`CalendarPanel`用作常规组件？当我把它放在另一个`JPanel`然后将它添加到一个窗口时，它就消失了。只有当我将它直接添加到窗口时它才可见。

编辑：是的，我意识到使用`JPanel`带有空布局的 a 是不好的做法。`CalendarPanel`实际上是别人的代码，我试图将它用于我的目的而不必重构它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T16:27:09.150

> 只有当我将它直接添加到窗口时它才可见。

这是因为窗口默认使用 BorderLayout 并且会自动调整面板大小以适应窗口。

> 当我把它放在另一个 JPanel 中，然后将它添加到一个窗口时，它就消失了。

这是因为 JPanel 默认使用 FlowLayout 并且流布局尊重添加到其中的组件的首选大小。由于您使用的是空布局，因此您的面板没有首选大小，因此不会绘制任何内容。

这就是为什么你不应该使用空布局。而是使用布局管理器，因为它们会为您完成所有这些额外的工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T15:16:29.923

**注意**：通常使用空布局是一个非常糟糕的主意。改用 a `LayoutManager`。

如果您坚持使用空布局，则必须按照[文档](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)`JPanel`中的说明手动定位。这是一个例子。

![在此处输入图像描述](../Images/73837b2a2aa5b704bac98853818c9fa3.png)

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Test extends JFrame {
   static int defaultX = 10;
   static int defaultY = 10;
   static int defaultW = 150;
   static int defaultH = 50;

   public Test() {
      super("Test");
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      // here is the outer JPanel
      final JPanel outer = new JPanel(new BorderLayout());
      JPanel inner = new JPanel(new BorderLayout());
      // here is the main component we want to see
      // when the outer panel is added to the null layout
      JButton mainComponent = new JButton("Test");
      inner.add("Center", mainComponent);
      outer.add("Center", inner);

      JPanel c = (JPanel)getContentPane();

      // This panel has a null layout!
      final JPanel nullLayoutPanel = new JPanel();
      nullLayoutPanel.setLayout(null);
      c.add("Center", nullLayoutPanel);

      // set the bounds of the outer panel manually
      // when using the null layout!
      nullLayoutPanel.add(outer);
      outer.setBounds(defaultX, defaultY, defaultW, defaultH);

      JPanel controlPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 10, 10));
      final JTextField x = new JTextField(""+defaultX, 3);
      final JTextField y = new JTextField(""+defaultY, 3);
      final JTextField w = new JTextField(""+defaultW, 3);
      final JTextField h = new JTextField(""+defaultH, 3);
      JButton b = new JButton("Resize");
      b.addActionListener(
         new ActionListener() {
            public void actionPerformed(ActionEvent e) {
               try {
                  outer.setBounds(
                        Integer.parseInt(x.getText()),
                        Integer.parseInt(y.getText()),
                        Integer.parseInt(w.getText()),
                        Integer.parseInt(h.getText())
                  );
                  outer.revalidate();
               } catch(Exception ex) {}
            }
         }
      );
      controlPanel.add(x);
      controlPanel.add(y);
      controlPanel.add(w);
      controlPanel.add(h);
      controlPanel.add(b);
      c.add("South", controlPanel);
   }

    public static void main(String[] argv) {
       SwingUtilities.invokeLater(new Runnable() {
          public void run() {
             Test p = new Test();
             p.setSize(300, 200);
             p.setVisible(true);
          }
      });
    }
} 
```

# solr - 如何在 Solr 4 中安装 JTS？

> ID：14982782
> 
> 赞同：1
> 
> 时间：2013-02-20T14:52:23.833
> 
> 标签：solr, jts

使用 Solr 4 空间字段类型似乎需要一个外部库[Java Topology Suite](http://tsusiatsoftware.net/jts/main.html)。如何在带有 Java 1.6.0_24 的 Ubuntu Server 12.04 上安装此套件以与 Solr 4.1.0 一起使用？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:48:00.550

如果您在 Ubuntu 服务器上的 Tomcat 中运行 Solr，并且已将 Solr WAR 部署到您的`<path to Tomcat>/webapps`文件夹中。然后根据 Solr Wiki 上的[Lucene / Solr 4 Spatial](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4#JTS_.2BAC8_WKT_.2BAC8_Polygon_notes)文档，您只需将 JTS 分发`/lib`文件夹中的所有 jar 文件复制到`WEB-INF/lib`运行 Solr 的文件夹中。

**更新**

由于您使用 Jetty 来运行 Solr，因此您需要将 JTS jar 文件的位置作为类路径包含在内。根据[Classloading Jetty](http://docs.codehaus.org/display/JETTY/Classloading)文档，类似以下内容应该可以工作：

```
 java -Dsolr.solr.home=/mnt/SolrFiles/solr 
   -Djetty.class.path=<insert path to JTS here> -jar /opt/solr-4.1.0/example/start.jar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T09:36:27.853

JTS JAR 文件需要放在 Solr Web 应用程序的[WEB-INF/lib 文件夹](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4#Configuration)中。`NoClassDefFoundError: com/vividsolutions/jts/geom/Geometry`否则在启动 Solr 时可能会遇到一个。

# silverlight - 嵌套 Datagrid ItemsSource 绑定

> ID：14982784
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:32.080
> 
> 标签：silverlight, datagrid, nested

这是技术困境：

• 我必须在 Silverlight 5 中创建一个层次网格，其深度可以多达四级。这将需要在网格中嵌套网格，以便可以选择任何行并带回适当的子记录

• 我需要在选择访问子记录时进行延迟加载

• 我正在使用 WCF 服务从 SQL 数据库中提取数据。我有两个返回列表的操作合同，一个带回初始父列表，第二个带回子列表以进行所需的任何钻取，这些不会同时拉动，一个是初始数据集，第二个是按需子数据集.

*   父字段
    *   组织 ID
    *   Metric_ID
    *   元素
    *   表现
    *   意思是
*   子字段
    *   组织 ID
    *   Parent_ID
    *   Metric_ID
    *   元素
    *   表现
    *   意思是

• 我访问 SQL Server 中的存储过程以拉回数据集，然后将它们放入列表中。我将网格中选定行中的 Parent.Org_ID 传递给 WCF 服务中的子存储过程并获取子数据集。

• 百万美元的问题是如何为嵌套网格设置绑定或 ItemsSource？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:53:05.473

看看这个例子：http: [//blogs.perpetuumsoft.com/silverlight/how-to-turn-silverlight-datagrid-to-treegrid-in-15-minutes/](http://blogs.perpetuumsoft.com/silverlight/how-to-turn-silverlight-datagrid-to-treegrid-in-15-minutes/)

当我使用它时，我对代码进行了一些修改，但我知道我得到了延迟加载来相当容易地工作。

# c# - WPF 数据绑定到另一个类

> ID：14982786
> 
> 赞同：2
> 
> 时间：2013-02-20T14:52:40.363
> 
> 标签：c#, wpf, visual-studio-2010, user-interface

我创建了一个 WPF UI。以下代码存在于`MainWindow.xaml.cs`：

```
namespace AWPFProject
{
    public partial class MainWindow : Window
    {
        private readonly ServiceLogic serviceLogic;

        public MainWindow()
        {
            InitializeComponent();
            serviceLogic = new ServiceLogic ();
        }
    }
} 
```

Servicelogic 是我的核心课程。从那里，调用方法或类来处理诸如数据库管理之类的事情。

现在，该 ServiceLogic 类具有我想要绑定的值。例如，我有一个组合框，可以在其中显示我的用户。XAML 如下所示：

```
<ListBox Height="100" HorizontalAlignment="Left" Margin="6,44,0,0" 
 Name="listBox_detected" VerticalAlignment="Top" Width="120" 
 ItemsSource="{Binding Path=ServiceLogic.Users}" /> 
```

当我运行应用程序时，列表仍然是空的。我还需要做什么才能在我的列表中获取该信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T15:25:44.680

您需要更改一些内容才能使其在您的场景中发挥作用：

1.  为您的窗口设置正确的 DataContext：

    ```
    public MainWindow()
    {   
        InitializeComponent();
        DataContext = new ServiceLogic();
    } 
    ```

2.  确保它`ServiceLogic`有一个名为 Users的**公共属性：**

    ```
    public List<User> Users { get; set; } 
    ```

    如果您想在运行时向此列表添加/删除项目，请考虑使用 ，`ObservableCollection<T>`因为这将自动通知 UI 任何更改。

3.  更新 xaml 的绑定逻辑，以便绑定到正确的列表。还要设置`DisplayMemberPath`属性或添加模板，以便对象显示得很好：

    ```
    <ListBox ItemsSource="{Binding Path=Users}" DisplayMemberPath="Name"/> 
    ```

    或者

    ```
    <ListBox ItemsSource="{Binding Path=Users}">
    <ListBox.ItemTemplate>
         <DataTemplate>
                <...your data template, like grid or stackpanel/>
         </DataTemplate>
    </ListBox.DataTemplate> 
    ```

4.  使用时`DisplayMemberPath`，请确保 User-class 具有正确的属性。将以下内容添加到 User.cs：

    ```
    public string Name
    {
        get { return _name; }
        set { _name = value; }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:27:39.513

我认为您需要设置 ListBox 的“DisplayMemberPath”属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:10:14.943

在这里`ItemsSource="{Binding Path=ServiceLogic.Users}"`您声明数据具有**公共财产** `ServiceLogic`

其次，您的数据是通过`DataContext`

更改构造函数：

```
public MainWindow()
{
    InitializeComponent();
    serviceLogic = new ServiceLogic ();
    DataContext = serviceLogic;
} 
```

并将绑定更改为这个：

```
<ListBox Height="100" HorizontalAlignment="Left" Margin="6,44,0,0" 
 Name="listBox_detected" VerticalAlignment="Top" Width="120" 
 ItemsSource="{Binding Path=Users}" /> 
```

在 Binding 中，我删除了 ServiceLogic，因为 SL 代表数据项。并且 Path - 是属性的路径。

# javascript - 当 url 中有 # 符号时，Window.location.href 不起作用

> ID：14982787
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:48.950
> 
> 标签：javascript, jquery

我有一个弹出调用，它接受用户凭据并登录用户。Usully 用户也想在登录后访问同一页面。这就是我想刷新当前页面的方式。我在用

```
 window.location.href="currentrul"; 
```

当我们在 url 中没有 # 符号时，这工作得很好。假设我的 URL 类似于[http://www.test.com/faq#shipping](http://www.test.com/faq#shipping)，它不起作用。任何建议都是可观的。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:55:33.880

If you want to refresh the page, use:

```
window.location.reload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:55:24.347

try this:

```
var currentURL = window.location.href;
if(currentURL.indexOf('#') != -1){
    currentURL = currentURL.substr(0, currentURL.indexOf('#'));
}
window.location.href = currentURL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:54:11.467

不，因为 # 表示同一页面上的锚点。

> 由井号 # 引入的片段标识符是文档 URL 的可选最后部分。它通常用于标识该文档的一部分。通用语法在 RFC 3986 中指定。URI 中的哈希标记分隔符不属于片段标识符。

来源：[http ://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

# wxpython - wxpython无法切换面板

> ID：14982788
> 
> 赞同：1
> 
> 时间：2013-02-20T14:52:52.830
> 
> 标签：wxpython

代码编译正常，只是无法加载第二个面板。我查看了许多有关面板切换的论坛，但似乎都没有帮助。

```
import wx

class Example(wx.Frame):
    def __init__(self, parent, title):
        ##super(Example, self).__init__(parent, title=title, 
        ##                                size=(500,  #width
        ##                                      300)) #height
        wx.Frame.__init__(self, None, size=(900,270))
        self.InitUI()
        self.Centre()
        self.Show()

    #define User Interface
    def InitUI(self):
        self.panel1 = wx.Panel(self, -1)

        #Menu bar
        menubar = wx.MenuBar()
        filem = wx.Menu()
        editm = wx.Menu()
        helpm = wx.Menu()

        menubar.Append(filem, '&File')
        menubar.Append(editm, '&Edit')
        menubar.Append(helpm,'&help')
        self.SetMenuBar(menubar)

        hbox = wx.BoxSizer(wx.HORIZONTAL)
        #buttons
        b1 = wx.Button(self.panel1, label='button', size=(300,30), pos=(0,0))
        hbox.Add(b1)
        b1.Bind(wx.EVT_BUTTON, self.OnB1)

        #panel2
        self.panel2 = wx.Panel(self.panel1, -1)
        self.panel2.Hide()
        vbox = wx.BoxSizer(wx.HORIZONTAL)
        b2 = wx.Button(self.panel2, label='button2', size=(300,30), pos=(0,0))
        vbox.Add(b2)

    def OnB1(self, event):
        self.panel2.Show()
        self.panel1.Hide()

if __name__ == '__main__':
    app = wx.App()
    Example(None, title='')
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:40:50.057

你`panel2`作为`panel1`父母。当你隐藏父母时，你也隐藏了它的孩子。

此外，您没有为您的框架使用主尺寸器。这意味着为您隐式创建了一个对象，并将添加到 frame ( `panel1`) 的第一个对象放入此 sizer 中。你`panel2`的不是不包含在sizer中，所以修复父母会导致`panel2`点击后可见，但不能正确调整大小。

您可以像这样修复它：

```
import wx

class Example(wx.Frame):
    def __init__(self, parent, title):
        ##super(Example, self).__init__(parent, title=title, 
        ##                                size=(500,  #width
        ##                                      300)) #height
        wx.Frame.__init__(self, None, size=(900,270))
        self.InitUI()
        self.Centre()
        self.Show()

    #define User Interface
    def InitUI(self):
        self.sizer = wx.BoxSizer() # Main window sizer

        self.panel1 = wx.Panel(self, -1)
        self.sizer.Add(self.panel1, 1, flag=wx.EXPAND)

        #Menu bar
        menubar = wx.MenuBar()
        filem = wx.Menu()
        editm = wx.Menu()
        helpm = wx.Menu()

        menubar.Append(filem, '&File')
        menubar.Append(editm, '&Edit')
        menubar.Append(helpm,'&help')
        self.SetMenuBar(menubar)

        self.hbox = wx.BoxSizer(wx.HORIZONTAL)
        #buttons
        b1 = wx.Button(self.panel1, label='button', size=(300,30), pos=(0,0))
        self.hbox.Add(b1)
        b1.Bind(wx.EVT_BUTTON, self.OnB1)
        self.panel1.SetSizer(self.hbox)

        #panel2
        self.panel2 = wx.Panel(self, -1)
        self.sizer.Add(self.panel2, 1, flag=wx.EXPAND)
        self.panel2.Hide()
        self.vbox = wx.BoxSizer(wx.HORIZONTAL)
        b2 = wx.Button(self.panel2, label='button2', size=(300,30), pos=(0,0))
        self.vbox.Add(b2)
        self.panel2.SetSizer(self.vbox)

        self.SetSizer(self.sizer) # Set main window sizer

    def OnB1(self, event):
        self.panel2.Show()
        self.panel1.Hide()
        self.sizer.Layout() # Force the main window sizer to recalculate

if __name__ == '__main__':
    app = wx.App(False)
    Example(None, title='')
    app.MainLoop() 
```

# php - 数值和关联数组的使用

> ID：14982789
> 
> 赞同：0
> 
> 时间：2013-02-20T14:52:54.567
> 
> 标签：php, mysqli

```
$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = mysqli_query($link, $query);

/* associative and numeric array */
$row = mysqli_fetch_array($result, MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]); 
```

从 PHP 手册中我得到了上面的代码，我想知道是否有人可以帮助我更好地理解它。这已经是多维的了吗？我可以通过以下方式访问（例如）第 5 行的名称和国家代码：

```
printf ("%s (%s)\n", $row[4][0], $row[4]["CountryCode"]; 
```

还是只使用数字数组并通过 $row[4][0], $row[4][1]; 访问它更好吗？任何帮助都会很棒。我（显然）是这方面的相对初学者。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:08:17.070

这是不可能的，因为 $row 是一维数组

```
/* associative and numeric array */
$row = mysqli_fetch_array($result, MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]); 
```

你可以尝试以下

```
printf ("%s (%s)\n", $result[0]["CountryCode"]); 
```

您只从 mysql 请求了 3 行，您可以使用空/空值打印第 4 行或更高行。这是一个未定义/数组限制超出错误

> 正如您使用“MYSQLI_BOTH”一样。因此它将显示 NULL 值。不会发生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:05:28.673

`mysqli_fetch_array`with参数的结果`MYSQLI_BOTH`是一维数组。结果表示结果集中的单行。每行都是一个数组，其中包含以两种方式索引的检索数据：

*   数字索引：0、1、2 到结果中的列数。
*   字符串索引：“Name”、“CountryCode”以及您在那里拥有的其他字段

数组如下所示：

```
$row Array (
    [0] => "MyName"
    [1] => "MyCountryCode"
    ["Name"] => "MyName"
    ["CountryCode"] => "MyCountryCode"
) 
```

在同一个数组中同时看到数字和字符串索引令人困惑，但数据实际上是正确的。除非你真的需要数字索引，否则字符串索引使用起来会舒服得多。因此，该功能`mysqli_fetch_assoc`将更适合这种情况。

尽管如此，这些方法只返回结果集中的一行。要获取所有行，您可以使用以下方法：

```
while( $row = mysqli_fetch_assoc( $result ) ) {
    // do something with the row
} 
```

编辑：将数据添加到多维数组：

```
$allResults = array();
while( $row = mysqli_fetch_assoc( $result ) ) {
    $allResults[] = $row;
} 
```

请注意，在大多数情况下，您可以按顺序处理每一行，而无需将其存储以备后用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:03:16.453

不，它不是多维数组。为了对所有结果执行某些操作，您应该循环遍历结果，例如：

```
while($row = mysqli_fetch_array($result))
{
    echo $row["CountryCode"];
} 
```

我总是更喜欢使用名称而不是数字，因为它们直接访问 Queries 列名称，因此更容易查看正在提取的值。在这个例子中，我知道`CountryCode`当我阅读代码时会打印出来，而不是一些随机索引。

# inheritance - 如何使用 typescript 创建继承 jQuery.Widget 的小部件

> ID：14982791
> 
> 赞同：1
> 
> 时间：2013-02-20T14:53:04.720
> 
> 标签：inheritance, typescript, jquery-widgets

我创建这样的 jquery 小部件：http: [//alexsexton.com/blog/2010/02/using-inheritance-patterns-to-organize-large-jquery-applications/](http://alexsexton.com/blog/2010/02/using-inheritance-patterns-to-organize-large-jquery-applications/)

```
/*mywidget.js*/ 
(function ($) {

    function MyWidget(options, element) {
        $.Widget.call(options, element);
    }

    MyWidget.prototype = Object.Create($.Widget.prototype);

    MyWidget.prototype._create = function () {
        /*my code here*/
    }

    MyWidget.prototype.destroy = function () {
        /*my code here*/
        $.Widget.prototype.destroy.call(this);
    }

    $.widget.bridge("mywidget", MyWidget);

}(jQuery)); 
```

如何在打字稿中编写此代码？我知道d.ts jquery-ui，但它只提供接口。不能继承接口。

# c# - SoapServerException.HandleException()

> ID：14982793
> 
> 赞同：0
> 
> 时间：2013-02-20T14:53:07.110
> 
> 标签：c#, web-services, soap, exception-handling

我对这个方法实际上如何处理传递给它的异常感到困惑，它似乎没有做任何额外的事情。

我将它放在我的代码的一部分中，因为它是我前几天查看的一个示例中使用的标准，但我发现它似乎吃掉了我的异常消息，所以我只剩下`SoapServerException`没有通用的内部异常。

```
// "Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown."
catch (Exception ex)
{
    throw SoapServerException.HandleException(exception);
}

// "Server was unable to process request. ---> Error in MyService.asmx ---> 
// Could not load file or assembly 'That.Assembly.I.Forgot' or one of its dependencies."
catch (Exception ex)
{
    throw new Exception("Error in MyService.asmx", ex);
} 
```

有没有理由我应该抛出`SoapServerException.HandleException()`而不是我自己的更具描述性的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T19:12:42.997

每： http: [//msdn.microsoft.com/en-us/library/gg552614 (v=office.14).aspx#bestpractice_infodisc](http://msdn.microsoft.com/en-us/library/gg552614(v=office.14).aspx#bestpractice_infodisc)

出于安全原因，SoapServerException.HandleException() 旨在减少返回给用户的详细信息。所以这种行为是故意的。

此方法的文档：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.soapserver.soapserverexception.handleexception.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.soapserver.soapserverexception.handleexception.aspx)

根本没有真正解释这种方法的作用，这是不幸的。如果您故意想向用户提供更多详细信息，那么您应该使用自己的异常。但要小心提供此类详细信息。出于安全原因，这可能不是一个好主意。这实际上取决于您对发送错误的一方的信任/了解程度。

-戴夫

# reference - 非法引用错误

> ID：14982794
> 
> 赞同：0
> 
> 时间：2013-02-20T14:53:07.333
> 
> 标签：reference, verilog, hdl

我正在使用 D-Flip Flops 编写波纹计数器。然而，下面的代码给了我变量的`Illegal reference error`内部`initial`块。`q2,q3,q4`这是为什么？

```
module RCounter;

reg d,d2,d3,d4,clk;
wire q,q2,q3,q4;

DFlipFlop a(d,q,clk);
DFlipFlop a1(d2,q2,q);
DFlipFlop a2(d3,q3,q2);
DFlipFlop a3(d4,q4,q3);

initial

begin

clk =1;

d=0;d2=0;d3=0;d4=0;q2=0;q3=0;q4=0;

#2 d=1;d2=~q2; d3=~q3; d4=~q4;
#2 d=0;d2=~q2; d3=~q3; d4=~q4;
#2 d=1;d2=~q2; d3=~q3; d4=~q4;
#2 d=0;d2=~q2; d3=~q3; d4=~q4;
#2 d=1;d2=~q2; d3=~q3; d4=~q4;
#2 d=0;d2=~q2; d3=~q3; d4=~q4;
#2 d=1;d2=~q2; d3=~q3; d4=~q4;

end

always 
begin

#2 assign clk = ~ clk;

end

endmodule 
```

***D 触发器模块：***

```
module DFlipFlop(d,q,clk);

input d,clk;
output q;

assign q = clk?( (d==1)? 1:0) : q;

endmodule 
```

我怎么解决这个问题？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:52:50.547

正如 Vlad Lazarenko 指出的那样，您不能为内部`initial`或`always@`块的电线分配值。

解决此问题的方法是简单地将类型从 更改`wire`为`reg`。

`logic`或者像使用 SystemVerilog一样声明所有内容（三态总线除外） 。

reg 或 wire 的定义仅适用于该层次结构级别。reg 可以驱动一个端口，该端口在该模块内被视为电线。

Reg 并不暗示触发器或将其注册为模拟器优化。

还值得注意的是，触发器通常通过以下方式实例化：

```
reg x;
always @(posedge clk or negedge rst_n) begin
  if(~rst_n) begin
    //reset condition
    x <= 1'b0;
  end
  else begin
    x <= next_value;
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:02:51.140

您正在尝试为电线分配初始值，此处：

```
q2=0;q3=0;q4=0; 
```

那是非法的。

# sql - 如何查询一对多对多对一并匹配第一个表和最后一个表的信息？

> ID：14982806
> 
> 赞同：0
> 
> 时间：2013-02-20T14:53:47.373
> 
> 标签：sql, oracle, plsql, rdbms

我的表在交叉引用表上是一对多的，然后在另一个表上是多对一的。然后该表在另一张表上有一对多，然后在该表之间有一对一。

所以这样想：

人-> crossref <- 狗品种-> 许多不同的狗-> 狗名

我要关联的是人-> 狗名，每个人都没有重复相同的狗名。

就像这个人使用了多少不同的狗名一样。而且我不想使用 distinct 因为它很慢。我希望查询是即时的或接近即时的。显而易见的选择是使用人名和狗名之间的交叉引用来更改数据模型，但让我们假装这不是一个选项。所有表都有索引 ID，例如 Person.id 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:35:21.270

您的 ERD 不正确。相反，它应该如下所示：

```
Person <1:M> dog <1:1 or 1:M> dog breed 
```

一个人拥有一只或多只狗。一只狗是单一品种的（好吧，如果您考虑混合品种，我想您可以将其设为一对多）。从这个设计中，您可以轻松地回答哪个人拥有什么狗和各种品种。在您上面的设计中，人和品种之间没有自然的关系。

# mysql - 使用 shell 脚本检索变量中最后存储的值

> ID：14982811
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:01.057
> 
> 标签：mysql, shell

我试图只检索变量 date2 的最后更新值，但它在输出中始终给出 0，我认为这是因为我在块外检索它，但我只想将最后一个值存储在变量 date2 中，我该如何解决这个问题。感谢您的帮助

这是我的代码

```
 count=0
 date1=0
 date2=0

 mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT FeeSubmissionDate FROM     
 meritlist_date wHERE Discipline='phd' AND AnnounceDate<=now() " | while read value

 do
      if [[ "$count" == 0 ]]
      then
        let "date2=$value"
        let "count++"
      else
        let "date1=$value"
        let "result=$date1-$date2"
        if [[ "$result" -gt 0 ]]
        then
              let "date2=$date1"
        fi
      fi

  done

echo"V,date2=$date2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:58:18.620

AWK 可以轻松解决这个问题。这是一个简单脚本的示例，它列出了当前目录中的所有文件，并返回文件名中包含子字符串“test”的文件的数量。

```
#!/bin/bash

ls -1 |
awk 'BEGIN { count=0 } { if (index($0,"test") != 0) { count++ }} END { printf("Count=%s\n", count); }' 
```

现在，如果您将*ls -1*替换为您的*mysql*命令并通过简单地使用 AWK 以如上所示的模拟方式摆脱 while 循环，那么计算感兴趣的行应该没有问题。

# c++ - 我可以在 IF 语句中将比较链接在一起吗？

> ID：14982813
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:02.803
> 
> 标签：c++, syntax

我目前正在为大学做一个零零碎碎的课程。我已经完成了这项任务的基本内容，但是我在创建获胜条件以结束游戏时遇到了一些麻烦。以下是我到目前为止使用的所有代码：

```
#include <iostream>
#include <string>

using namespace std;

class Player
{
private:
    char NorX;

public:

    char Choose(char InitialValue)
    {
        NorX = InitialValue;
        return InitialValue;
    }

    char GetNorX()
    {
        return NorX;
    }
};

int main()
{
    Player Player1;
    Player Player2;

    Player1.Choose('O');
    Player2.Choose('X'); 

    cout << "The board is being drawn please wait..." << endl;

    const int Rows = 4;
    const int Columns = 4;
    char Board[Rows][Columns] = { {' ', ' ', ' ', ' ' },
                                  {' ', '_', '_', '_' },
                                  {' ', '_', '_', '_' },
                                  {' ', '_', '_', '_' } };

    for (int i = 0; i < Rows; ++i)
    {
        for (int j = 0; j < Columns; ++j)
            cout << Board [i][j];
        cout << endl;
    }

    cout << endl << endl;

    int row;
    int column;

    do
    {
        do
        {
            cout << "Please enter the value of the row you would like to take ";
            cin >> row;
        }while (row != 0 && row != 1 && row != 2 && row != 3);

        do
        {
            cout << "Please enter the value of the column you would like to take ";
            cin >> column;
        }while (column != 0 && column != 1 && column != 2 && column != 3);

        Board [row][column] = Player1.GetNorX();

        for (int i = 0; i < Rows; ++i)
        {
            for (int j = 0; j < Columns; ++j)
                cout << Board [i][j];
            cout << endl;
        }

        /*int row;*/
        do
        {
            cout << "Please enter the value of the row you would like to take ";
            cin >> row;
        }while (row != 0 && row != 1 && row != 2 && row != 3);

        /*int column;*/
        do
        {
            cout << "Please enter the value of the column you would like to take ";
            cin >> column;
        }while (column != 0 && column != 1 && column != 2 && column != 3);

        Board [row][column] = Player2.GetNorX();

        for (int i = 0; i < Rows; ++i)
        {
            for (int j = 0; j < Columns; ++j)
                cout << Board [i][j];
            cout << endl;
        }

        if (Board[1][1] == Board[1][2] == Board[1][3] == 'O')
        {
            cout << endl << "Well done you win";
        }

    }while (column != 4 && row != 4);

    system("pause");
} 
```

问题出现在 if 语句中，因为它似乎对程序的运行没有任何影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:58:07.063

链接比较运算符的结果不是人们所期望的。正确的方法是将它们与`&&`

```
if (Board[1][1] == 'O' && Board[1][2] == 'O' && Board[1][3] == 'O') 
```

另一个工作如下

```
Board[1][1] == Board[1][2] 
```

给出`true`或`false`。这将与

```
true == Board[1][3] 
```

这又给出了`true`or `false`。这将与

```
false == '0' 
```

这将始终导致`false`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:58:47.323

您不能将比较串在一起：

```
Board[1][1] == Board[1][2] == Board[1][3] == 'O' 
```

将发生的所有事情都是`Board[1] == Board[1][2]`首先评估到`true`或`false and then that boolean value is compared to`Board[1][3]` 等等。

你想要的是：

```
Board[1][1] == 'O' && Board[1][2] == 'O' && Board[1][3] == 'O' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:57:55.707

你应该使用

```
if (Board[1][1] == Board[1][2] && 
    Board[1][1] == Board[1][3] && 
    Board[1][1] == 'O') 
```

或者

```
if (Board[1][1] == 'O' && 
    Board[1][2] == 'O' && 
    Board[1][3] == 'O') 
```

例如，在当前形式中，您的语句与比较`Board[1][2]`结果进行比较`Board[1][3]=='O'`，而不是与`Board[1][3]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:58:33.500

你的`if`条件不对。
您应该将其替换为以下代码：

```
if ((Board[1][1] == Board[1][2]) && 
    (Board[1][2] == Board[1][3]) && 
    (Board[1][3] == 'O')) 
```

当您检查水平获胜条件时，水平线上的所有三个块的值都必须为**0**。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T15:00:12.370

您应该在调试器（例如 gdb）中运行它。谷歌“gdb 备忘单”开始。您将确切地看到正在执行的代码行，特别是可以验证正在评估“if”。

# c# - 如何使用间距、制表符或填充对齐列中的内容？

> ID：14982818
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:21.560
> 
> 标签：c#, string, line, itextsharp, padding

我正在尝试创建一个看起来像这样的pdf

![看起来像1](../Images/195356f590ef4b268a09b09caff18195.png)

但是当我尝试字符串填充时，它在 pdf 文件中看起来像这样 ![看起来像2](../Images/ae7e5397572be294a7725af39d369513.png)

这是我尝试过的 c# 代码的一部分。myExcelData 是从 excel 文件中填充的。

```
 for (int i = 0; i < 15; i++)
        {
            Chunk cSira = new Chunk((i + 1).ToString().PadRight(10), icerikFont);
            Chunk cHizmet = new Chunk(myExcelData.Tables[0].Rows[i][6].ToString().PadRight(80), icerikFont);
            Chunk cAdet = new Chunk(myExcelData.Tables[0].Rows[i][1].ToString().PadRight(10), icerikFont);
            Chunk cBirimFiyat = new Chunk(myExcelData.Tables[0].Rows[i][2].ToString().PadRight(20), icerikFont);
            Chunk cTutar = new Chunk(myExcelData.Tables[0].Rows[i][3].ToString().PadRight(20), icerikFont);
            d.Add(cSira);
            d.Add(cHizmet);
            d.Add(cAdet);
            d.Add(cBirimFiyat);
            d.Add(cTutar);
            d.Add(Chunk.NEWLINE);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:06:00.220

有两种方法可以做到这一点：

1.  使用等宽字体（例如 Courier）。当前，您正在使用不同字符宽度不同的字体。
2.  下载[我的书的第 2 章](http://www.manning.com/lowagie2/samplechapter2.pdf)并学习如何使用 TAB CHUNKS（在第 48 页查找该标题）。
3.  使用 mkl 在他的评论中指出的 PdfPTable（也许你忽略了明显的）

如果您需要选项 2 的代码片段，请查看[DirectorOverview3](http://itextpdf.com/examples/iia.php?id=45)示例。结果看起来像[这样](http://examples.itextpdf.com/results/part1/chapter02/director_overview_3.pdf)。如果您不懂 Java，请阅读[C# 示例](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter02/DirectorOverview3.cs)。

# github - 将多个提交合并到同一分支下的单个提交中

> ID：14982819
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:22.770
> 
> 标签：github, git-rebase, git-commit

使用 git，我创建了一个本地分支来工作。然后我逐步提交了我的工作。所以，我在同一个拉取请求中获得了 3 次提交，我想将它们合并为一个。

我发现如果我们遵循以下步骤，就有办法做到这一点：

*   `git rebase -i HEAD~3`

=> 分支中的所有提交如下所示

```
pick mycommit1
pick mycommit2
pick mycommit3 
```

*   要将它们融合到第一个中，我必须将 mycommit2 和 mycommit3 的命令设置为`squash`而不是`pick`

但是，就我而言，我在主分支中的提交之间有很多提交，因此，我不能这样做。

因此，我会问我是否可以在我的拉**取**请求中进行合并。

欢迎您的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:00:37.773

您可以在变`fixup`基时使用该命令。这个命令做同样的事情，`squash`但同时保留第一次提交的消息。例如：

```
pick 123abcd
pick abc1234
pick a1b2c34 
```

您可以将其更改为：

```
pick 123abcd
f abc1234
f a1b2c34 
```

现在您将这 3 个提交加入到一个提交中，该提交将获得第一条消息。如果你想编辑一次消息，你可以这样做：

```
pick 123abcd
f abc1234
s a1b2c34 
```

这意味着这 3 个提交将合并为一个提交，您可以编辑该提交。

* * *

额外提示：为了更容易将 each 更改`pick`为命令，您可以简单地使用 Vims 块选择功能来选择所有 'pick' 并将其更改为您想要的命令。

# java - 我需要一个保留插入顺序的不可变键值结构

> ID：14982820
> 
> 赞同：24
> 
> 时间：2013-02-20T14:54:23.987
> 
> 标签：java, guava, immutability, linkedhashmap

我想`ImmutableLinkedHashMap<>`在 Guava 库中找到类似的东西。我需要使用带有插入顺序的不可变键值数据结构。那么，我应该使用什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-20T15:00:03.773

我不确定我是否完全理解你所追求的，但如果它真的是不可变的`Map`，你可能想看看[`ImmutableMap`](http://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/ImmutableMap.html)

如文档中所述：

> 一个不可变的、基于哈希的`Map`、可靠的用户指定的迭代顺序。不允许空键或值。
> 
> 不像`Collections.unmodifiableMap(java.util.Map<? extends K, ? extends V>)`，它是一个仍然可以改变的单独地图的视图，一个实例`ImmutableMap`包含它自己的数据并且永远不会改变。`ImmutableMap`方便`public static final`地图（“常量地图”），还可以让您轻松制作由调用者提供给您的班级的地图的“防御性副本”

例如，您可以以类似的方式使用它：

```
Map<Integer, String> m = ImmutableMap.of(5,"Five",6,"Six",7,"Seven"); 
```

希望这就是你所追求的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T15:00:28.110

首先创建一个`LinkedHashMap`，然后使用[`ImmutableMap.copyOf(linkedHashMap)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.html#copyOf%28java.util.Map%29)创建一个不可变副本，该副本将与原始地图具有相同的顺序。

# opc - 本地主机上的 OPC 客户端无法找到 dymosim.exe 内置的 OPC 服务器

> ID：14982821
> 
> 赞同：1
> 
> 时间：2013-02-20T14:54:23.120
> 
> 标签：opc

根据 Dymola 用户指南：

1.  可以从 OPC 客户端启动 Dymosim。要启用此功能，环境变量 PATH 需要补充 Dymola 安装目录 bin 和 bin\lib 的路径

2.  每次在 Dymola 中执行新模型转换时，都会自动注册 Dymosim OPC 服务器。

3.  虽然 Dymosim OPC 服务器可以从 Dymola 启动或由用户直接调用，但正常的过程是从 OPC 客户端启动它，其中 Dymosim 将显示为 Dymosim.OPCServer.1

我已经在 Dymola 中编译了我的模型，并选择了嵌入式 OPC 服务器。如果我从 Dymola 建模环境中运行生成的 dymosim.exe 文件，或者甚至通过单击 dymosim.exe 文件手动运行，则 OPC 服务器将被初始化并实时进行模拟。现在的问题：

我现在希望从 OPC UA 客户端启动嵌入式 OPC Server。参考以上三点：

1.  完全的。

2.  没有证据表明曾经注册过 OPC 服务器（我假设在 Windows 注册表中）。在模型转换/编译时，我已经使用 Sysinternals Suite 监视了我的机器上的所有注册表进程，但没有看到发生此步骤的证据。

3.  因为似乎没有执行第 2 步（注册 Dymosim OPC 服务器），所以我对嵌入式服务器 Dymosim.OPCServer.1 没有出现在我测试过的任何 UA 客户端中并不感到惊讶。

注意：我已经安装了 OPC 测试服务器，它们在安装时注册并在 OPC 客户端中按预期显示。所以问题不在于 OPC 客户端。

我相当确定问题在于 Dymola 没有在 Windows 注册表中注册嵌入式 OPC Server。

我正在运行 Dymola 的节点锁定安装，并在 localhost 上执行所有 OPC 服务器-客户端交互。

感谢您的帮助，非常感谢。

克利福德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:48:09.523

在 Windows 中，以管理员权限启动 Dymola.exe。这允许在模型转换时在 Windows 注册表中注册嵌入式 OPC 服务器（在 dymosim.exe 中）。

# python - GLPK linear programming

> ID：14982823
> 
> 赞同：5
> 
> 时间：2013-02-20T14:54:27.847
> 
> 标签：python, python-2.7, linear-programming, glpk

I am working on some very large scale linear programming problems. (Matrices are currently roughly 1000x1000 and these are the 'mini' ones.)

I thought that I had the program running successfully, only I have realized that I am getting some very unintuitive answers. For example, let's say I were to maximize x+y+z subject to a set of constraints x+y<10 and y+z <5\. I run this and get an optimal solution. Then, I run the same equation but with different constraints: x+y<20 and y+z<5\. Yet in the second iteration, my maximization decreases!

I have painstakingly gone through and assured myself that the constraints are loading correctly.

Does anyone know what the problem might be?

I found something in the documentation about lpx_check_kkt which seems to tell you when your solution is likely to be correct or high confidence (or low confidence for that matter), but I don't know how to use it.

I made an attempt and got the error message lpx_check_kkt not defined.

I am adding some code as an addendum in hopes that someone can find an error. The result of this is that it claims an optimal solution has been found. And yet every time I raise an upper bound, it gets less optimal.
I have confirmed that my bounds are going up and not down.

```
 size = 10000000+1
    ia = intArray(size)
    ja = intArray(size)
    ar = doubleArray(size)
    prob = glp_create_prob()

    glp_set_prob_name(prob, "sample")
    glp_set_obj_dir(prob, GLP_MAX)
    glp_add_rows(prob, Num_constraints)
    for x in range(Num_constraints):
            Variables.add_variables(Constraints_for_simplex)
            glp_set_row_name(prob, x+1, Variables.variers[x])
            glp_set_row_bnds(prob, x+1, GLP_UP, 0, Constraints_for_simplex[x][1])
            print 'we set the row_bnd for', x+1,' to ',Constraints_for_simplex[x][1]
    glp_add_cols(prob, len(All_Loops))
    for x in range(len(All_Loops)):
            glp_set_col_name(prob, x+1, "".join(["x",str(x)]))
            glp_set_col_bnds(prob,x+1,GLP_LO,0,0)
            glp_set_obj_coef(prob,x+1,1)
    for x in range(1,len(All_Loops)+1):
            z=Constraints_for_simplex[0][0][x-1]
            ia[x] = 1; ja[x] = x;  ar[x] = z
    x=len(All_Loops)+1
    while x<Num_constraints + len(All_Loops):
    for y in range(2, Num_constraints+1):
                    z=Constraints_for_simplex[y-1][0][0]
                    ia[x] = y; ja[x] =1 ; ar[x] = z
                    x+=1
    x=Num_constraints+len(All_Loops)
    while x <len(All_Loops)*(Num_constraints-1):
            for z in range(2,len(All_Loops)+1):
                    for y in range(2,Num_constraints+1):
                            if x<len(All_Loops)*Num_constraints+1:
                                    q = Constraints_for_simplex[y-1][0][z-1]
                                    ia[x] = y ; ja[x]=z; ar[x] = q
                                    x+=1

    glp_load_matrix(prob, len(All_Loops)*Num_constraints, ia, ja, ar)
    glp_exact(prob,None)
    Z = glp_get_obj_val(prob) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:52:11.163

首先使用不同的求解器解决有问题的实例并检查目标函数值。如果您可以将模型导出为 .mps 格式（我不知道如何使用 GLPK 执行此操作，抱歉），您可以将 mps 文件上传到[http://www.neos-server.org/neos/solvers/index .html](http://www.neos-server.org/neos/solvers/index.html)并用几个不同的 LP 求解器求解。

# excel - I want to wrap an excel formula that returns an array of values so it replaces 0 values with NA()

> ID：14982825
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:32.063
> 
> 标签：excel, excel-formula, reuters

I have a formula that I am using in excel. The formula returns an array of values in the form of a column. I only know how to use an IF statement on a cell or a formula that returns one cell. However, I don't know how to apply it to get it to replace all the 0 values by NA() in the array returned by the formula. I want to wrap the formula using the IF statement.

It is a Reuters formula : =IF(RData(D17:D26;H16) = 0; NA(); RData(D17:D26;H16)), but it does not work at all.

RData(D17:D26;H16) returns the following column

H16 contains: AST_SWPSPD

D17:D26 contains the following RIC Codes:

```
BMPS2YEUAM=R 
BMPS3YEUAM=R 
BMPS4YEUAM=R 
BMPS5YEUAM=R
BMPS7YEUAM=R 
BMPS10YEUAM=R 
BMPS20YEUAM=R 
BMPS30YEUAM=R 
```

The resulting column is the following

```
201.7
499.5
389.2
470.6
306.8
0
0
525.3
525.3
525.3 
```

I want to get rid of the zeros and replace them with NA Is that possible?

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:00:52.027

它应该完全相同。让我们假装你的公式是`F`（但如果你添加你的实际公式或类似于你的问题的东西会更好）

```
=IF(F=0, NA(), F) 
```

即使`F`返回一个数组也能工作。只需替换`F`整个公式，不要忘记按 ctrl+shift+enter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:11:31.477

除了使用`=IF(RData(D17;$H$16)=0;NA(); RData(D17;$H$16))`你也可以使用

```
=IFERROR(1/(1/(RData(D17;$H$16)));NA())
```

这样，您的函数只会被调用一次，这将减少计算时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:07:46.300

Thank you all for your input,

I found a way to go around it, simply by returning one value at a time and wrapping it with the IF statement.

So it becomes: =IF(RData(D17;$H$16)=0;NA(); RData(D17;$H$16))

I am fixing H16 because it contains the argument needed for the formula.

This way it works.

# c# - 将 IPRange 合并到一个范围内

> ID：14982832
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:53.357
> 
> 标签：c#, ip-address

我有以下小班：

```
public class IPRange
{
    public IPAddress From { get; set; }
    public IPAddress To { get; set; }

    public IPRange(IPAddress from, IPAddress to)
    {
        From = from;
        To = to;
    }
} 
```

如何检查两个 IPRange 是否相互重叠，如果是，将两个 iprange 合并到一个新的 IPRange 中？该解决方案必须同时兼容 IPv4 和 IPv6。

有比较两个 ipaddress 对象的方法吗？我无法立即找到它们。例如 10.12.0.2 > 10.12.0.1 应该为真

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:43:27.783

您可以通过比较字节来检查任何类型（但类型相同）的两个地址，例如 IPv6 地址：

```
IPAddress addr1 = IPAddress.Parse("2001:db8::1:2");
IPAddress addr2 = IPAddress.Parse("2001:db8::1:1");
var bytes1 = addr1.GetAddressBytes();
var bytes2 = addr2.GetAddressBytes();
Console.WriteLine(CompareBytes(bytes1, bytes2) > 0);  // Prints: "True" 
```

和`CompareBytes`方法：

```
private static int CompareBytes(byte[] left, byte[] right)
{
    // TODO: Null checks.
    // TODO: Check that left and right have the same length.

    int difference = 0;
    for (int i = left.Length - 1; i >= 0; i--)
    {
        difference = left[i] - right[i];
        if (difference != 0)
            break;
    }
    return difference;
} 
```

无论您的代码运行的系统的*字节顺序如何，这都有效。*

* * *

您可以将任何 IPv4 地址转换为等效的 IPv6 地址，如下所示：

```
var ipv6 = ipv4.MapToIPv6(); 
```

* * *

如果你确定你总是有 IPv4 地址，你可以只比较它们的整数值：

```
IPAddress addr1 = IPAddress.Parse("10.12.0.2");
IPAddress addr2 = IPAddress.Parse("10.12.0.1");
uint value1 = BitConverter.ToUInt32(addr1.GetAddressBytes(), 0);
uint value2 = BitConverter.ToUInt32(addr2.GetAddressBytes(), 0);
Console.WriteLine(value1 > value2);   // Prints: "True" 
```

# javascript - 如何在鼠标悬停时突出显示文本

> ID：14982834
> 
> 赞同：0
> 
> 时间：2013-02-20T14:54:55.913
> 
> 标签：javascript, html, hyperlink, background-color, onmouseover

我有一个页面，其中包含跨多个框架的大约 300 个链接。每个链接都有一个对应于至少一个其他帧中的 id 的 id。我正在编写一个脚本，将突出显示两个链接 onmouseover。目前，我可以更改两个链接的文本颜色（见下文）。我想将单个单词后面的背景颜色更改为黄色，以使文本看起来突出显示。

```
<html><head><title>Test</title>
  <script>
    function hey(id)
      {document.getElementById(id).style.color = "red";
       window.parent.frames["frame2"].document.getElementById(id).style.color = "red";} 
    function bye(id)
      {document.getElementById(id).style.color = "black";
       window.parent.frames["frame2"].document.getElementById(id).style.color = "black";}
  </script>
</head>
<body>
  <a id="1" class="word" onmouseover="hey(this.id)" onmouseout="bye(this.id)">hello</a> 
  <a id="2" class="word" onmouseover="hey(this.id)" onmouseout="bye(this.id)">world</a>....
</body></html> 
```

如何更改链接的背景颜色，同时保持窗口的其余部分背景不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:57:23.133

您应该可以通过修改`style.backgroundColor`链接来做到这一点：

```
window.parent.frames["frame2"].document.getElementById(id).style.backgroundColor = "yellow"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:16:33.147

这是使用 Techfoobar 的解决方案编辑的 HTML。id 也更改为以字母开头。

```
<html><head><title>Test</title>
<script>
function hey(id)
  {document.getElementById(id).style.color = "red";
   document.getElementById(id).style.backgroundColor = "yellow";
   window.parent.frames["frame2"].document.getElementById(id).style.color = "red";
   window.parent.frames["frame2"].document.getElementById(id).style.backgroundColor = "yellow";} 
function bye(id)
  {document.getElementById(id).style.color = "black";
   document.getElementById(id).style.backgroundColor = "white";
   window.parent.frames["frame2"].document.getElementById(id).style.color = "black";
   window.parent.frames["frame2"].document.getElementById(id).style.backgroundColor = "white";}
</script>
</head>
<body>
  <a id="w1" class="word" onmouseover="hey(this.id)" onmouseout="bye(this.id)">hello</a> 
  <a id="w2" class="word" onmouseover="hey(this.id)" onmouseout="bye(this.id)">world</a>....
</body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:58:25.737

把它放在你的 onmouseover 事件中：

```
document.getElementById(id).style.backgroundColor = "red"; 
```

您需要在 onMouseOut 事件上使用初始背景颜色放置相同的指令。

例如

```
 onmouseover="document.getElementById(id).style.backgroundColor = 'red';" onmouseout = "document.getElementById(id).style.backgroundColor = 'white';" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:59:13.357

首先，你`id`不能只是一个数字，也不能以数字开头。编辑它，然后将其放置：`document.getElementById(id).style.backgroundColor = "red";`在您的`onmouseover`和`document.getElementById(id).style.backgroundColor = "black";`您的`onmouseout`事件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T15:05:36.743

我想你想要的是选择。

```
function hey(id)
{
   var frame_2_element = window.parent.frames["frame2"].document.getElementById(id);
   document.getElementById(id).style.color = "red";
   frame_2_element.style.color = "red";
   frame_2_element.mozSelection = "yellow";
   frame_2_element.body.mozSelection = "yellow";
} 
```

这将改变选定的文本背景颜色，这是想要的行为吗？

# matlab - 将像素添加到矢量

> ID：14982835
> 
> 赞同：-3
> 
> 时间：2013-02-20T14:54:59.447
> 
> 标签：matlab, vector

我在`matlab`.

```
function s = value(x, y)
            for i=1:length(y)
                for j=1:length(y)
                    if y(i,j) ~= 0.5;
                        pixels = x(i,j);
                    end
                end
            end
            pixels
        end 
```

当我运行它时，我只得到结果中的**最后一个**像素。如何获得*所有*结果的向量？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:02:00.230

您需要保留一个索引：

```
function pixels = value(x, y)

pIndex = 1;

for i=1:length(y)
   for j=1:length(y)
      if y(i,j) ~= 0.5;
         pixels(pIndex) = x(i,j);
         pIndex = pIndex + 1;
      end
   end
end

pixels

end 
```

但是，您应该对代码进行矢量化以使其更高效且易于阅读，该函数可以替换为：

```
pixels = x(y ~= 0.5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:58:36.733

`pixels(end+1)=x(i,j)`在左侧向量的最后一个元素之后添加右侧的值。

但是关于 `s = x(y~=0.5)`或类似的事情呢？肯定有一个矢量化的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:59:10.083

我对matlab不太熟悉，但你似乎在覆盖`pixels`每次迭代。

除了用 替换`pixels`每次迭代的值`pixels = x(i,j);`，还有什么`pixels += x(i,j);`可以做的吗？

然而，如果`pixels`不仅仅是一个值，而是一个数组或类似的数据结构，您需要为每次迭代更新索引，以便该值与前一次迭代分开存储，这样它就不会覆盖之前的值。

# python - rendering and saving images through Blender python

> ID：14982836
> 
> 赞同：36
> 
> 时间：2013-02-20T14:55:00.323
> 
> 标签：python, render, save, blender

I am trying to render and save multiple images through python script in blender. I know how to render and save the image through the Blender GUI but I want to do it all through my script since I am using a set of nested loops and need to save multiple images. I am able to render the image and I guess save the image with the output being successful. But I am not sure where it saves to and when I try to edit the filepath it gives me the error of the context being incorrect.

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-07-11T21:52:09.570

下面的代码创建了一个“VR 全景图” *（一个对象的一系列图片，从它周围的不同角度）*。

我最终得到了这个算法：

1.  创建或加载您要拍摄的对象（*主题*）
2.  缩放它并添加一些漂亮的照明*（以便从您想要的方向看到对象）*；您可以通过渲染场景来检查照明*（使用`F12`键）*
3.  ~~创建一个`Empty`对象并将其位置设置为主体的中心，并将旋转设置为标识 ( `0, 0, 0`)~~
4.  将您的相机视图设置为起始位置*（再次使用渲染检查）*
5.  打开交互式 Python shell ( `Shift+F4`)
6.  粘贴并运行脚本

您最终会在目录下的对象周围获得许多图片*（由 定义`rotation_steps`） ：*`/Users/myusername/Pictures/VR`

```
def rotate_and_render(output_dir, output_file_pattern_string = 'render%d.jpg', rotation_steps = 32, rotation_angle = 360.0, subject = bpy.context.object):
  import os
  original_rotation = subject.rotation_euler
  for step in range(0, rotation_steps):
    subject.rotation_euler[2] = radians(step * (rotation_angle / rotation_steps))
    bpy.context.scene.render.filepath = os.path.join(output_dir, (output_file_pattern_string % step))
    bpy.ops.render.render(write_still = True)
  subject.rotation_euler = original_rotation

rotate_and_render('/Users/myusername/Pictures/VR', 'render%d.jpg') 
```

您必须选择要渲染的对象。或者，您可以使用[Blender 的 Python API](https://docs.blender.org/api/current/info_quickstart.html#accessing-collections)在场景中查找对象并将其作为`subject`参数传递给函数：

```
rotate_and_render('/Users/myusername/Pictures/VR', 'render%d.jpg', subject = bpy.data.objects["Cube"]) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-09T15:37:23.263

像这样的东西：

```
import bpy

bpy.context.scene.render.filepath = 'pathToOutputImage'
bpy.context.scene.render.resolution_x = w #perhaps set resolution in code
bpy.context.scene.render.resolution_y = h
bpy.ops.render.render() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-05T08:28:39.983

您将必须执行以下操作。循环后第二`i`行的`for`是文件循环的循环索引。

我已经验证这在控制台和命令行中运行时有效。渲染一个文件后不要忘记删除对象。（此处未给出删除命令，因为它不是通用的。如果该对象具有链接，则该命令中将需要一些特定参数）

```
for area in bpy.context.screen.areas:
    if area.type == 'VIEW_3D':
        area.spaces[0].viewport_shade = 'RENDERED'

bpy.context.scene.render.image_settings.file_format='JPEG'
bpy.context.scene.render.filepath = ".pic%0.2d.jpg"%i
bpy.ops.render.render(use_viewport = True, write_still=True) 
```

# xaml - Delegate.Target is null on WinRT

> ID：14982842
> 
> 赞同：1
> 
> 时间：2013-02-20T14:55:10.170
> 
> 标签：xaml, delegates, windows-runtime

As we know, Delegate has two properties, one is for method infor and the other is for the target object. but it is very strange on WinRT. if a view model implement INotifyPropertyChanged as below:

```
public class PropertyChangedViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged
    {
        add { /*some code to add handler of value*/ }
        remove { /*some code to removehandler of value*/ }
    }
} 
```

in the method "add" and "remove" I find the value.Target is null when this event is used by the internal code of XAML binding. That is to say, if I bind some property of the view model on the xaml file, then the winrt will automaticlly register the event PropertyChanged of this view model, and then the add method is call, but I placed a break point in this add method and find the Target of value is null. I'm implementing a cross platfrom mvvm library (for wpf, winrt, silverlight and wp 7+) so I can't use PropertyChangedEventManager, I have to manually to keep a weak reference to the target and then invoke the method with the target, unfortunately, the targer is null, while the method is not a static method, so when I triger this event later, I get exception. Is there any workaround?

Thanks!

# c# - 如何在 C# 中使用 Tree 构建动态 sql 语句？

> ID：14982854
> 
> 赞同：1
> 
> 时间：2013-02-20T14:55:34.697
> 
> 标签：c#, tree, depth-first-search, breadth-first-search

我正在尝试实现一个 C# 模块，该模块将动态构建 sql 语句，我认为的策略涉及树数据结构，值应该存储在树状结构中

![在此处输入图像描述](../Images/6ddeff22125e263184575c382a138a42.png)

我设计了如下所示的类来实现树

```
class T
{
    string tableName="";
    C[] column{get;set}
}

class C
{
    string className="";
    V[] value{get;set;}
}

class V
{
    string fieldVal="";
} 
```

我需要实现一个使用类 T 并生成如下 sql 的方法

```
insert into T1(C1,C2,C3) values(V1,V1,V1);
insert into T1(C1,C2,C3) values(V2,V1,V1);
insert into T1(C1,C2,C3) values(V3,V1,V1); 
```

这似乎很简单，但是在实现该方法时我很震惊，因为我没有使用 Trees 的经验。我想我必须结合使用 BFS 和 DFS，但我不确定如何进行。请让我知道如何实现这一点，代码示例会很棒！

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:50:27.057

您需要解决两个问题：

1.  如何将树结构转换为所有可能值集的集合。
2.  如何将值集转换为 sql 表达式。

第一个问题可能最容易通过递归迭代列，并将一组值一起收集到列表中来解决：

```
// convert tree into collection of value sets
public IEnumerable<List<string>> ExplodeValueSets(T tree, int cIndex = 0) {
    // recursive portion as long as there are more columns to process
    if (cIndex < tree.column.Length) {
        // recursive generate list for rest of columns
        var subResult = ExplodeValueSets(tree, cIndex + 1);

        // combine values in this column with recursively-generated
        // sets from rest of columns to build up larger sets
        foreach (var result in subResult)
            foreach (var value in tree.column[cIndex].value)
                yield return new List<string> { value.fieldVal }.Concat(result).ToList();
    } else {
        // base condition - all columns are processed, so return empty list
        yield return new List<string>();
    }
} 
```

这会将图片中的原始树结构转换为列表集合：

*   V1，V1，V1
*   V2、V1、V1

从这里开始，将这些值集转换为 SQL 语句是一件简单的事情：

```
public string GenerateSQL(T tree) {
    var valueSets = ExplodeValueSets(tree);
    var sql = new StringBuilder();
    foreach (var set in valueSets)
        sql.AppendLine(GenerateSingleSQLInsert(tree, set));
    var finalSql = sql.ToString();
    return finalSql;
}

public string GenerateSingleSQLInsert(T tree, List<string> values) {
    var sqlFormat = "insert into [{0}]([{1}]) values('{2}');";
    var table = tree.tableName;
    var columnList = string.Join("],[", tree.column.Select (c => c.className).ToArray());
    var valueList = string.Join("','", values.ToArray());
    var sql = string.Format(sqlFormat, table, columnList, valueList);
    return sql;
} 
```

使用您的示例树将所有内容组合在一起（我公开了所有属性和类以使其正常工作）：

```
T tree = new T {
    tableName = "T1",
    column = new C[] {
        new C { className = "C1", value = new V[] { new V { fieldVal = "V1" }, new V { fieldVal = "V2" } } },
        new C { className = "C2", value = new V[] { new V { fieldVal = "V1" } } },
        new C { className = "C3", value = new V[] { new V { fieldVal = "V1" } } } 
    }
};

var sql = GenerateSQL(tree);
Console.WriteLine(sql); 
```

输出：

```
insert into [T1]([C1],[C2],[C3]) values('V1','V1','V1');
insert into [T1]([C1],[C2],[C3]) values('V2','V1','V1'); 
```

# c# - 如何设置属于某个类的图像控件属性？

> ID：14982855
> 
> 赞同：1
> 
> 时间：2013-02-20T14:55:34.727
> 
> 标签：c#, image, oop, class, controls

我有一个图像控件作为类的属性之一。

```
 public Image ImageControl
    {
        get
        {
            return _imgControl;
        }

        set
        {
            _imgControl = value;
        }

    } 
```

在类构造函数中，使用this是否正确

```
 ImageControl.Width = bi.PixelWidth;
        ImageControl.Height = bi.PixelHeight;
        ImageControl.Source = bi; 
```

或这个？

```
 _imgControl.Width = bi.PixelWidth;
        _imgControl.Height = bi.PixelHeight;
        _imgControl.Source = bi; 
```

我只是想知道因为ImageControl本身是一个包含属性的控件，它如何影响_imageControl的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:01:23.943

`ImageControl`属性只是返回`_imgControl`，所以当你使用前者时，你实际上是在使用后者。在您的情况下，没有区别。一般来说，虽然回答你的问题，但我更愿意在构造函数中使用字段语法，因为该属性可能会影响可能尚未初始化的当前实例的状态。

# sql - how to search in vb.net and populate info in text boxes and combo boxes using query

> ID：14982858
> 
> 赞同：0
> 
> 时间：2013-02-20T14:55:43.697
> 
> 标签：sql, vb.net

I have VB.net project in which i need to search using a urno and it should populate info in all the textboxes and combo boxes that are on the form and it is the same form from which the data is stored in the database.here is the code

```
Public Class MBAUpdate
    Dim con As New OleDb.OleDbConnection()
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Try
            'Dim da As OleDb.OleDbDataAdapter
            Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
            Me.con = New OleDb.OleDbConnection()
            con.ConnectionString = dbprovider
            con.Open()

            Dim sqlquery As String = "SELECT * FROM MBA WHERE urno=" & CInt(txtb1.Text) & ";"
            Dim sqlcommand As New OleDb.OleDbCommand(sqlquery, con)
            Dim ds As DataSet

            With sqlcommand
                .CommandText = sqlquery
                .Connection = con
                .ExecuteReader()
            End With

            ' MsgBox("Record Added")
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try

    End Sub
End Class 
```

any ideas how to achieve this did quite googling did'nt help either....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:06:12.253

找到了一种方法来做到这一点，它的工作就像一个魅力......

```
Public Class MBAUpdate
    Dim con As New OleDb.OleDbConnection

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Try
            'Dim da As OleDb.OleDbDataAdapter
            Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
            Me.con = New OleDb.OleDbConnection
            Dim sqlquery As String = "SELECT * FROM MBA WHERE urno=" & CInt(txtb1.Text) & ";"
            Dim command As New OleDb.OleDbCommand(sqlquery, con)
            Dim reader As OleDb.OleDbDataReader
            con.ConnectionString = dbprovider
            con.Open()

            reader = command.ExecuteReader()
            reader.Read()

            txtName.Text = reader(1).ToString()
            txtFname.Text = reader(2).ToString()
            txtCAdd.Text = reader(3).ToString()
            txtPAdd.Text = reader(4).ToString()
            txtEid.Text = reader(5).ToString()
            cmbGender.Text = reader(6).ToString()
            txtMno.Text = reader(7).ToString()

            ' MsgBox("Record Added")
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try

    End Sub
End Class 
```

# solr - Using stemming in a SOLR query

> ID：14982860
> 
> 赞同：0
> 
> 时间：2013-02-20T14:55:55.127
> 
> 标签：solr, stemming

I've set up SOLR, and added a document to the example 'collection1'.

```
<doc>
    <str name="id">3007WFP</str>
    <str name="name">Fishing</str>
    <str name="type">Ladies</str>
</doc> 
```

I can query it ok in the interface using

```
name:*fishing* 
```

but I would like to get stemming to work, so that I can e.g. type `fish` and get this document due to the word `fishing` being stemmed. I'd also like to be able to find `Ladies` when `Lady` is searched for.

However I have tried the query

```
name:fish 
```

and I get no results. I didn't add the wildcard as I know that will match, and only want to test the stemming function.

I've changed the schema type of both the name and type fields to `text_en` which I believe includes stemming - restarted SOLR, and reindexed (clicked optimise).

Is there something I'm missing or doing wrong, is the query syntax different when you want to use stemming?

Another strange issue is after the change from `text_general` to `text_en` a search for

`name:Fishing`

produces no results, even though it should be an exact match..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:42:29.423

单击优化不会重新索引文档。它只会合并现有索引中的各个段，这意味着您的索引仍然是旧的。因此，一旦您重新发布即重新索引您的文档，`name:fish`应该匹配。

顺便说一句，您可以查看分析器在做什么`http://localhost:8983/solr/#/collection1/analysis`。您可以选择 fieldType 并查看索引时会发生什么。例如，使用此工具，您可以看到对于`text_en`类型，

```
fishing -> fish
ladies -> ladi 
```

所以搜索`type:lady`不会匹配这个文档。如果您还在“字段值（查询）”中指定查询，它将突出显示匹配项（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:54:15.617

您必须删除文档并重新添加它们，以便新的`fieldType`更改生效。

有关如何`stemming`工作以及可用的不同类型的词干提取的详细信息，您可以查看[此处](http://wiki.apache.org/solr/LanguageAnalysis)。

在您的情况下，语言是英语，因此您可以使用`PorterStemFilterFactory`.

# android - 带有 Android 4.2 的 Phonegap 2.4.0 - 奇怪的双击行为

> ID：14982864
> 
> 赞同：11
> 
> 时间：2013-02-20T14:56:02.223
> 
> 标签：android, cordova, onclick, double-click

我正在使用 phonegap 2.4.0 创建一个 Android 和 iOS 应用程序。

现在我认识到链接中的 onclick 事件在 Nexus 4 设备上使用 Android 4.2.2 的 Android 应用程序内触发了两次，就像双击一样（尽管我只点击了一次！）。

```
<a href="#" onclick="$(this).append('test'); return false;" style="some styles...">some text</a> 
```

正在使用的库：

*   jQuery 1.9.1
*   jquery mobile 1.3.0 (rc)
*   jQuery UI 1.10.0
*   jquery 触摸打孔 0.2.2
*   phonegap 2.4.0

在我单击（或点击）我的 Nexus 4（Android 4.2.2）上的链接后，字符串“test”会在应用程序内附加两次。

当我直接在 android 浏览器中将其作为移动网络应用程序进行测试时，不会发生这种情况。

它也适用于应用程序内的我的三星 S3 (Android 4.1.2)。iPhone 上也没有问题。

其他人认识到这种奇怪的行为吗？（也许能够修复它？;-)）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T08:13:04.217

使用[scirra.com的临时解决方案](http://www.scirra.com/forum/google-nexus-jellybean-issue_topic57145.html)

```
last_click_time = new Date().getTime();
document.addEventListener('click', function (e) {
    click_time = e['timeStamp'];
    if (click_time && (click_time - last_click_time) < 1000) {
        e.stopImmediatePropagation();
        e.preventDefault();
        return false;
    }
    last_click_time = click_time;
}, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T21:50:12.813

我与 Soulwax 的解决方案非常接近地处理了类似的情况，但是我不想通过跟踪时间间隔来阻碍用户的快速点击。相反，我只是在链接的数据对象中跟踪事件类型，如果它试图在 touchstart 之后立即处理点击，我会忽略该调用。

```
$('.link').on('touchstart click', function(e){
  e.preventDefault();

  //Prevent against handling a click immediately after touchstart.
  if(e.type == "click" && $(this).data("lastTouch") == "touchstart"){
    e.stopImmediatePropagation();
    return false;
  }
  $(this).data("lastTouch", e.type);

  $('.nav-bar').toggleClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T19:55:07.907

我的修复有点不同。我使用`touchend`了`click`事件侦听器，因为`click`每次需要时都不会触发。假设您单击一个按钮，单击事件侦听器被触发，但如果您再次单击该按钮，则不会。

它发生在任何类型的 DOM 元素上。我的环境是：

*   jQuery 1.9.1；
*   jQM 1.3.2；
*   Phonegap 3.5.0-0.21.14。

这是我的代码：

```
if (window.cordova) {
    // hack to avoid double tap
    var lastTapTime = new Date().getTime();
    function tryToAvoidDoubleTap(e){
        var tapTime = e["timeStamp"];
        if (tapTime && (tapTime - lastTapTime) < 300) {
            // prevent double tap to happen
            e.stopImmediatePropagation();
            e.preventDefault();
            // jQM button handling
            if ($('.ui-btn').length)
                $('.ui-btn').removeClass('ui-btn-active');
            return false;
        }
        lastTapTime = tapTime;
    }

    // Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    function onDeviceReady() {
        document.addEventListener("touchend", tryToAvoidDoubleTap, true);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T16:13:10.690

我认为这些双击/多次单击的原因是硬件加速故障，我正在经历同时单击+传播，传播很容易防止，但是由于在我的情况下不尊重 addEventListener 的第三个参数，我无法防止双即使使用先前回答的代码也可以单击，这就是我最终使用的

```
function cw(event) // click wall
{ try {
    click_time_cw = (new Date()).getTime();
    if (click_time_cw && (click_time_cw - last_click_time_cw) < 350) {
        event.stopImmediatePropagation();
        event.preventDefault();
        add_log('prevented misclick [CW] '+(click_time_cw - last_click_time_cw));
        return true;
    }
    last_click_time_cw = click_time_cw;
    event.stopImmediatePropagation();
    event.stopPropagation();
    return false;
} catch(e){ add_alert(e,"stpr"); } } 
```

您还必须在某处初始化 last_click_time_cw=(new Date()).getTime()

这是一个示例 onclick：

```
<button class="btn" onclick="if(cw(event)) return true; onclick_logic()">something</button> 
```

看起来工作量很大，而且修复起来很不愉快/丑陋，但点击问题已经困扰我好几个月了，这似乎是我从一开始就应该做的事情

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T14:53:01.347

我面临着完全相同的问题，但我的应用程序/游戏*需要*用户能够在 touchstart 上双击。因此，上面提到的 scirra 解决方案无法使用，因为所需的 500 或 1000 毫秒延迟会杀死双击。

经过一番挖掘，我注意到第一个（用户）点击和第二个（错误）点击之间的区别：

```
event.originalEvent.touches 
```

在第二个错误点击中不可用。所以我写了这个错误检测助手来解决我的问题：

```
function isDoubleTapBug (e) {
  // only handle touch events (in case your listener works on mouse events too)
  if (!'ontouchstart' in document.documentElement)) 
    return false;
  if (!e.originalEvent.touches) {
    e.preventDefault();
    e.stopPropagation();
    return true; // indicate to caller that it's a bug
  }
  return false;
} 
```

然后在你的听众中，这样做：

```
document.addEventListener('touchstart', function (e) {
  if (isDoubleTapBug(e))
    return false;
  // now do your actual event handling stuff...      
} 
```

# php - 无法从列表框中读取 POST 数据

> ID：14982867
> 
> 赞同：0
> 
> 时间：2013-02-20T14:56:18.420
> 
> 标签：php, mysql, listbox

这是我正在做的事情，我有 2 个数据库表：

1.  带有字段名称和其他字段的相机
2.  具有电子邮件 ID 和其他字段的用户

我已经使用列表框填充了它们，并且能够从 MySQL 数据库中检索数据。我使用表单来发布数据并稍后捕获它。这是我的一段代码：

```
<form action="share.php" method="post">
Camera Name:
 <select>
<?php
while($fetch_options1 = mysql_fetch_array($data1)) { //Loop all the options retrieved from the query
?>
<option id ="<?php echo $fetch_options1['id']; ?>"  value="<?php echo $fetch_options1['name']; ?>"><?php echo $fetch_options1['name']; ?></option>
<?php
}
?>
</select>
Share With Email ID:
 <select>
<?php
while($fetch_options = mysql_fetch_array($data)) { 
?>

<option id ="<?php echo $fetch_options['id']; ?>"  value="<?php echo $fetch_options['email']; ?>"><?php echo $fetch_options['email']; ?></option>

<?php } ?>
</select>
<input type="submit" name="submit" value="Share The camera">
</form> 
```

在同一页面上，我使用此代码获取发布的值，但没有给我任何答案：

```
<?php   
// START FORM PROCESSING
if (isset($_POST['submit'])) { // Form has been submitted.
    $errors = array();

    $_POST= array('name'=>'','email'=>'');

    echo $cname = $_POST['name'];
    echo $email1 = $_POST['email'];
    echo $user_id=$_SESSION['id'];

} else { // Form has not been submitted.        
}
?> 
```

当用户点击提交时，我想从列表框中获取选定的电子邮件 ID 和名称。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:18:14.143

命名您的选择：

```
 <SELECT name="selCamera" id="selCamera">
 ...
 </SELECT>
 <SELECT name="selEmail" id="selEmail">
 ...
 </SELECT> 
```

然后在你的 PHP 中：

```
 $camera=$_POST['selCamera'];
 $email=$_POST['selEmail']; 
```

我不明白您为什么要这样做`$_POST=array(...`，如果您选择此解决方案，请忽略它。

# jquery - 结合 Hover 并单击 Functions Jquery

> ID：14982868
> 
> 赞同：2
> 
> 时间：2013-02-20T14:56:19.560
> 
> 标签：jquery

Jquery 今天头疼。我现在正在尝试在我的 jquery 中结合悬停和单击事件，对悬停功能的最新编辑取消了我的单击事件，我可以看到原因（我认为）。删除类覆盖了我的点击事件。

我想要实现的是，当我将鼠标悬停在一颗星上时，所有兄弟姐妹都被突出显示，基本上跟随鼠标，然后当我决定选择一颗星时，我应该能够点击它，它的所有兄弟姐妹加上我点击的那个都有应用的 addClass 方法

到目前为止我有什么

```
/* Hover Function */
$(document).ready(function(){
 $('.ratings li').hover(function(){
  $(this).prevAll().andSelf().addClass('goldstar');
   }, function() {
    $(this).prevAll().andSelf().removeClass('goldstar');
  });
});

/* Click Function */
$(document).ready(function(){
 $('.ratings li').click(function(){
  $(this).prevAll().andSelf().addClass('goldstar');
 });
});

/* Click functions to add a value */
$(document).ready(function(){
 $('#firstStar').click(function(){
  $('#hiddenRating').val(1);
 });
});

 $(document).ready(function(){
  $('#secondStar').click(function(){
    $('#hiddenRating').val(2);
 });
 });

 $(document).ready(function(){
  $('#thirdStar').click(function(){
   $('#hiddenRating').val(3);
  });
 });

$(document).ready(function(){
 $('#fourthStar').click(function(){
  $('#hiddenRating').val(4);
 });
});

$(document).ready(function(){
 $('#fifthStar').click(function(){
  $('#hiddenRating').val(5);
 });
}); 
```

表格

```
 <%= form_for @rating do |f| %>
   <%= f.hidden_field :ratings, :id => "hiddenRating" %>
   <%= f.hidden_field :user_id, :value => current_user.id %>
   <%= f.hidden_field :recipe_id, :value => @recipe.id %>
   <div class="ratings">
<ul>
 <li id="firstStar"></li>
 <li id="secondStar"></li>
 <li id="thirdStar"></li>
 <li id="fourthStar"></li>
 <li id="fifthStar"></li>
</ul>
    </div> 
```

现在我知道必须有更好的方法来做到这一点，我有很多重复的代码，但我正在学习并想知道一些方法来重新考虑这一点。有没有办法将 .val 方法组合成一个？

关于悬停和单击功能，我了解您可以使用 on 方法并通过悬停和单击？虽然不知道如何实现这个

任何帮助表示赞赏，

编辑

[提琴手](http://jsfiddle.net/richlewis14/vZDwg/9/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:24:05.367

我添加了两个全局变量`clicked`，`chosed_index` 如果您还想将其选中到最后一个元素，则可以通过添加

```
chosed_index = $(this).index() + 1;  // in the hover listener 
```

**jQuery 更新代码**

```
$(document).ready(function(){
    var clicked = false; 
    var chosed_index = -1 ; 
    $('.ratings li').on('hover', function(){

           $(this).siblings().andSelf().removeClass('goldstar');         
           $(this).prevAll().andSelf().addClass('goldstar'); 

    }); 

    $('.ratings li').on('mouseleave', function(){
        $(this).siblings().andSelf().removeClass('goldstar');  

            $(".ratings li:nth-child("+chosed_index+")").prevAll().andSelf().addClass('goldstar');

    }); 

    $('.ratings li').click(function(){

        clicked = true; 
        chosed_index = $(this).index() + 1; 

        $(this).siblings().andSelf().removeClass('goldstar');
        $(this).prevAll().andSelf().addClass('goldstar');
    });
  }); 
```

**检查小提琴更新**

[小提琴](http://jsfiddle.net/sedz/vZDwg/12/)

我希望这可以帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T15:15:37.533

尝试简化您的 javascript。

```
$(function () {
    $('#stars li').hover(function () {
        var li = $(this);
        li.prevAll().andSelf().addClass('goldstar');
        }, function () {
        var li = $(this);
        li.prevAll().andSelf().removeClass('goldstar');
    });

    $('#stars li').click(function () {
        var li = $(this);
        $('#rating').text(li.data('rating'));
    });
})(); 
```

看到这个小提琴：http: [//jsfiddle.net/PVyXz/1/](http://jsfiddle.net/PVyXz/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:20:54.603

向父级添加一个“锁定”类，以便您的 JS 知道是否进行了选择。然后仅在未进行选择时才对悬停进行操作。

```
$(document).ready(function(){
  // hover function
  $('.ratings li').hover(function(){
     $(this).prevAll().andSelf().addClass('goldstar');
     $('.ratings').removeClass('locked');
   }, function() {
     if (!$('.ratings').hasClass('locked')) {
       $(this).prevAll().andSelf().removeClass('goldstar');
     }
  });
  //click function 
  $('.ratings li').click(function(){
    $(this).prevAll().andSelf().addClass('goldstar');
    $('.ratings').addClass('locked');
  });
}); 
```

小提琴：http: [//jsfiddle.net/q86b9/1/](http://jsfiddle.net/q86b9/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T15:21:10.703

为悬停使用单独的类（一个比金色更轻的阴影）

还可以清除 goldstar 类 on click for all`li`的后续点击

[http://jsfiddle.net/pxfunc/vZDwg/14/](http://jsfiddle.net/pxfunc/vZDwg/14/)

```
.ratings ul li.goldstarHover {
    color:yellow;
} 
```

```
/* Hover Function */
$(document).ready(function () {
    $('.ratings li').hover(function () {
        $(this).prevAll().andSelf().addClass('goldstarHover');
    }, function () {
        $(this).prevAll().andSelf().removeClass('goldstarHover');
    });
});

/* Click Function */
$(document).ready(function () {
    $('.ratings li').click(function () {
        $('.ratings li').removeClass('goldstar');
        $(this).prevAll().andSelf().addClass('goldstar');
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T15:32:35.153

我的方法略有不同，就像魅力一样。对于某些人来说，理解起来可能要简单得多。使用`CSS`父类来覆盖`.savedgoldstar`颜色做了大量的工作

[http://jsfiddle.net/vZDwg/13/](http://jsfiddle.net/vZDwg/13/)

```
/* Hover Function */
$(document).ready(function(){
 $('.ratings li').hover(function(){
     $(this).parent().addClass('hovered');
     $(this).prevAll().andSelf().addClass('goldstar');
   }, function() {
    $(this).parent().removeClass('hovered');
    $(this).prevAll().andSelf().removeClass('goldstar');
  });
});

/* Click Function */
$(document).ready(function(){
 $('.ratings li').click(function(){
  $(this).siblings().removeClass('savedgoldstar');
  $(this).prevAll().andSelf().addClass('savedgoldstar');
 });
}); 
```

# javascript - 在javascript中将值转换为字节数组

> ID：14982873
> 
> 赞同：2
> 
> 时间：2013-02-20T14:56:38.733
> 
> 标签：javascript, python, bytearray, endianness

我正在使用二进制帧编写基于 WebSocket 网络的应用程序。我想将值从 Python 服务器发送到 JS 客户端并返回。

据我所知，打包超过 8 位的值取决于解包和打包时的字节序。不幸的是，浏览器似乎以小端方式发送所有内容，而网络是大端方式。所以我读到最好的想法是将所有值打包到字节数组中，这样字节序就无关紧要了。

我为javascript编写了这个函数：

```
valueToByteArray: function(value, bytes_length) {
    var bytes_array = [];
    for (var i=bytes_length - 1; i>=0; --i) {
        conjunction_val = 0xFF << i*8;
        shift = i*8;
        bytes_array.push((value & conjunction_val) >> shift);
    }
    return bytes_array;
} 
```

我对它进行了测试：

```
test("Pack value to Byte array", function() {
    equal(
        BufferUtility.valueToByteArray(-2000000, 4),
        [255, 225, 123, 128],
        "Value packed OK"
    ); // fail returns [-1, 225, 123, 128], same function in python returns [255L, 225, 123, 128]
    equal(
        BufferUtility.valueToByteArray(4000000, 4),
        [0, 61, 9, 0],
        "Value packed OK"
    ); // pass
    equal(
        BufferUtility.valueToByteArray(0, 2),
        [0, 0],
        "Value packed OK"
    ); // pass
    equal(
        BufferUtility.valueToByteArray(-1, 2),
        [128, 1],
        "Value packed OK"
    ); // fail returns [255, 255]
}); 
```

但只有第二次和第三次测试通过，它似乎不适用于有符号值。我还在 Python 上检查了这个值，它看起来`struct.pack('>h', -1)`像`\xFF\xFF`. 老实说，我不明白。由于 MSb 是符号位，因此 shortint -1 二进制应该是 imo `1000000000000001`。

我做错了什么，也许有更好的方法来解决字节序问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:08:52.563

我从 Freenode 上的#javascript 获得了这段代码，它出奇地工作，即使它以不同的方式做同样的事情：|

```
function valueToByteArray(value, bytes_length) {
    var bytes_array = [];
    while (bytes_length > 0){
        var byte = value & 0xFF;
        value >>= 8;
        bytes_length--;

        bytes_array.push(byte);
    }
    return bytes_array.reverse();
}

console.log(valueToByteArray(-2000000, 4));
<< [255, 225, 123, 128] 
```

# c# - AcceptButton 指令？

> ID：14982875
> 
> 赞同：0
> 
> 时间：2013-02-20T14:56:53.220
> 
> 标签：c#, .net, forms

代码：

```
form1.AcceptButton = accessButton; 
```

我把：

```
using System.Windows.Forms; 
```

但它没有找到它。它说`System.Web.UI.HtmlControl.HtmlForm`没有这个定义。嗯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:03:08.810

System.Windows.Forms 和 System.Web.UI 是两个完全不同的系统。Windows 窗体用于创建桌面应用程序，System.Web.UI 用于创建 ASP.NET 页面。您不能在 ASP.NET 中使用 WinForms。

请参阅ASP.NET 上的[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:04:41.367

将控件放在面板中并设置`DefaultButton`：

```
<asp:Panel DefaultButton="accessButton" runat="server">     
  <asp:TextBox id="myname" runat="server" />
  <asp:Button id="accessButton" Text="Submit" runat="server" />
</asp:Panel> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:05:52.560

改为使用`Page.Form.DefaultButton`。

# java - 表示队列已经结束/完成的Java数据结构？

> ID：14982878
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:01.150
> 
> 标签：java

我正在寻找一种 Java 7 数据结构，它的行为类似于 a`java.util.Queue`并且还具有“最终项目已被删除”的概念。

例如，应该可以表达如下概念：

```
while(!endingQueue.isFinished()) {
    Element e = endingQueue.remove()
    doSomethingWith(e);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:02:34.640

使用接口[java.util.Queue](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)，怎么样

```
while(queue.peek() != null) {
    Element e = queue.remove();
    doSomethingWith(e);
} 
```

编辑回答阿卜杜勒的评论：

> 根据约定，空项可能是 java.util.Queue 的有效条目

您将不得不指出 javadoc 中说明这一点的特定句子，因为我没有看到它。

我看到的是 peek 方法的描述。

**检索但不删除此队列的头部，如果此队列为空，则返回 null。**

现在，队列中的元素可以为空。但它仍然是一个元素，将由 peek 和 remove 方法返回。

> 另外，考虑一个并发访问的队列。仅检查 null 可能不足以确定生产者是否已将元素放入队列。

队列是一个接口。您必须使用具体的实现来测试它，例如[ConcurrentLinkedQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)。如果没有一个具体实现可以满足您的需求，您可以自己实现 Queue。

Queue 接口提供了一种查看队列中是否有元素的方法。

ConcurentLinkedQueue 类提供了一个额外的方法来查看队列中是否有一个元素，isEmpty。

测试并查看您是否遇到实际的性能问题，而不是担心可能发生或可能不会发生的性能问题。

# kendo-ui - 在调用更新方法之前，剑道网格没有数据绑定

> ID：14982880
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:15.110
> 
> 标签：kendo-ui

我正在使用 Kendo Grid，并且在 Read 方法中加载了一组 ViewModel。这里一切都很好，并且按预期工作。

但是，当单击网格上的保存按钮时，呈现给 Update 方法的对象不再完整且不可用。

所有属性都按预期设置，除了一个简单的 string[] 属性始终为空。

网格指定如下：

```
@(Html.Kendo().Grid<Occam.Portal.ViewModels.UserViewModel>()
    .Name("SystemUserGrid")
    .Columns(columns =>
        {
            columns.Bound(user => user.UserName);
            columns.Bound(user => user.Email);
            columns.Bound(user => user.Roles):
         }
.Ajax()
.Batch(true)
.ServerOperation(false)
.Events(events => events.Error("error_handler"))
.Model(model =>
    {
        model.Id(m => m.UserId);
        model.Field(p => p.UserName).Editable(false);
        model.Field(p => p.Roles).Editable(false);
    })

.Read("SystemUsers_Read", "Administration")
.Update("SystemUsers_Update", "Administration")
  ))
... 
```

尽管数据已正确绑定到网格，为什么 Kendo 库仍将 string[] 属性 Roles 保留为 null？

我在剑道演示或论坛上找不到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:00:15.137

我认为因为它没有将您发送的完全相同的模型传回给您，所以它创建了一个新的 UserViewModel 列表并尝试将值应用到它，并且不知道 string[] 的方式，因为它不是基本类型；有很多类型不支持。如果您更改模型以包含 RolesStr，它是一个字符串，并且模型中有方法可以从 string[] 来回转换为字符串（使用拆分等），那么我认为您会得到您想要的。在您的控制器获得 UserViewModel 后，只需调用该方法来重新填充角色。

我会在您的模型中创建可以接受整个列表并一次完成所有操作的静态方法，可能就像

```
public static IList<UserViewModel> SplitEm(IList<UserViewModel> userViewModels)
{
    [Split each RolesStr into Roles]
}
public static IList<UserViewModel> JoinEm(IList<UserViewModel> userViewModels)
{
    [Join all the Roles into each RoleStr]
} 
```

显然看看 Linq 让这两者的实现变得微不足道。

# php - URL 重写问题 (PHP - Apache)

> ID：14982881
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:15.443
> 
> 标签：php, apache, .htaccess, url-rewriting, seo

```
RewriteRule ^türkçe/yazılar/(.+)$ sayfa.php?rd_dil=türkçe&rd_sayfa=yazılar&rd_yazar=$1 [L]
RewriteRule ^türkçe/yazılar/(.+)/(.+)$ sayfa.php?rd_dil=türkçe&rd_sayfa=yazılar&rd_yazar=$1&rd_baslik=$2 [L] 
```

第一条规则适用于两种 url 结构。（与 seo 友好和传统）

第二条规则仅适用于传统结构。我做不到你能告诉我我的错误吗？谢谢，最好的问候**`localhost/türkçe/yazılar/drogba/karakter`**

# php - 我的更新 cade 有什么问题？

> ID：14982884
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:18.530
> 
> 标签：php, mysql, sql, sql-update

我更新 sql 数据库的代码有什么问题，表是 Informatie，我需要更新字段 Text。

```
$info =  nl2br($_POST["info"]);
    echo $info."<br>";
    $infoid = $_POST["infoid"];
    echo $infoid;
    echo "<br>Info ID : $infoid";
    $sql = "UPDATE Informatie set Text = $text WHERE InfoId = $infoid";
    $query = mysql_query("$sql"); 
```

echo $info 和 $infoid 是正确的。

我试过了

```
$sql = "UPDATE Informatie set Text = $text WHERE InfoId = '$infoid'"; 
```

也，但它没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:58:01.400

**字符串值必须加引号**。

```
$sql = "UPDATE Informatie SET Text = '$text' WHERE InfoId = $infoid"; 
```

如果`InfoID`也是一个字符串，那么您还需要用单引号将其包裹起来。

```
$sql = "UPDATE Informatie SET Text = '$text' WHERE InfoId = '$infoid'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:00:23.397

```
$sql = "UPDATE Informatie set Text = '$text' WHERE InfoId = '$infoid'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:06:28.703

除了引用字符串之外，您似乎还混淆了变量名；我猜`$text`应该是`$info`：

```
$sql = "UPDATE Informatie set Text = '" . mysql_real_escape_string($info) . "'
          WHERE InfoId = '" . mysql_real_escape_string($infoid) . "'"; 
```

请注意，如果文本包含例如字符，您需要对字符串进行转义以避免查询中断`'`。

但是您确实应该切换到 PDO（或 mysqli）并使用绑定变量准备语句。

# duplicates - 如何防止 MVC3 中映射表中的重复记录？

> ID：14982885
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:19.883
> 
> 标签：duplicates, record, rdbms

我有以下表格：

```
Client (PKey = ClientId)
User   (PKey = UserId) 

UserClient (FKeys = ClientId, UserId) 
```

当我尝试在 UserClient 表中添加一条记录（映射）以使 User-Client 对应该是唯一的时，它允许重复记录。

我想阻止这种情况。意思是，当尝试添加现有的用户-客户端对时，它应该抛出客户端验证。

如何防止在 MVC3 的映射表中输入重复记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:12:13.610

听起来您想唯一标识列。Yu 可以借助 SQL server 中的 Candidate Key 来实现这一点，但在实体框架中不支持。

[实体框架：在关联中使用非主唯一键的替代解决方案](https://stackoverflow.com/questions/3992236/entity-framework-alternate-solution-to-using-non-primary-unique-keys-in-an-asso)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:19:37.477

由于 UserClientId 独立于您设置的外键，因此您将获得重复项。外键仅确保插入到 UserClient 表中的键存在于 User 和 Client 表中。

如果可能，删除 UserClientId 主键并将您的 ClientId 和 UserId 设置为 UserClient 表的主键。然后，您将处理重复项和外键完整性。

这是实体关系图的样子：

![在此处输入图像描述](../Images/ad821e944a07fe3fe36c2e5476d83bff.png)

# facebook - 收到有关“隐私政策合规性”的错误消息

> ID：14982886
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:21.797
> 
> 标签：facebook, privacy, policy

我们为客户开发了一个 Facebook 应用程序（Canvas、Page-tab 和移动应用程序），起初我们没有在应用程序设置中包含任何隐私政策。但昨天我们收到了来自 Facebook 的警告通知，内容如下：

> 请更新您的 myFBApp 隐私政策以避免执法行动。URL 可能丢失或返回错误。此外，请确保您的隐私政策显示在您的网站或应用程序上。有关更多信息，请参阅平台政策 II.3 和此外部资源： http: [//www.applicationprivacy.org/platform-requirements/facebook/](http://www.applicationprivacy.org/platform-requirements/facebook/)。

然后我们创建了隐私政策和服务条款页面。在设置中链接，然后保存。

现在 24 小时后，它仍然没有修复。我们仍然收到警告，我们越来越焦虑和担心，如果不解决这个问题，应用程序可能会被关闭。

有关隐私政策页面的更多信息：

*   我们在 html 头中有一个 nofollow 元标记，因此搜索引擎无法索引页面。（我尝试删除它，但没有改变任何东西）
*   这些页面不会从调试器中得到任何错误。所以我假设FB可以索引页面。
*   这些页面与我在应用程序设置中注册的域位于同一域中。
*   隐私政策和服务条款都在应用程序对话框中显示并正确链接。

这是为 Facebook 手动检查的吗？或者它是某种错误？我需要用英文生成隐私政策吗？目前我们的是瑞典语。我在 Stack Overflow 上看到了一些关于这个问题的帖子，但还没有给出解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:05:44.160

来自 Facebook 的消息只是一个警告。如果您在设置中添加了隐私政策和服务条款链接，一切都会好起来的。除非您将其存档/将其标记为已读，否则该消息（开发者警报）不会消失。

除非您收到 Facebook 的第二次警告，否则您无需再做任何事情。

# android - Android：如何实现相邻的不规则按钮？

> ID：14982891
> 
> 赞同：0
> 
> 时间：2013-02-20T14:57:33.153
> 
> 标签：android, layout, user-interface, shapes

我想用一些不规则的按钮实现一个界面，像这样：

![在此处输入图像描述](../Images/ca485f67c3e7d6c16b8766842465a0fa.png)

这在具有常规按钮组件的 Android 中是否可行，还是我需要使用另一种方法（例如使用图像并检测点击区域）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:05:05.037

我很确定没有处理此类问题的标准方法。

我想最好的方法是在 Button 中覆盖 onTouch 并手动检测点击区域。如果形状真的很复杂，或者基于位图，您可以尝试绘制某种蒙版，然后简单地从按钮画布中获取像素。如果像素（例如）是黑色的，则该按钮被单击。

另请参阅：[可以在 Android 上处理不规则形状上的事件吗？](https://stackoverflow.com/questions/5607768/can-handle-events-on-irregular-shapes-on-android)

# sql-server - 在 SQL 层次结构数据中移动父级和子级

> ID：14982897
> 
> 赞同：3
> 
> 时间：2013-02-20T14:57:39.853
> 
> 标签：sql-server, sql-server-2008, hierarchical-data

我们的数据库中有一个使用 hierarchyid 数据类型的表，我正在尝试找到一种方法将父级**及其**所有子级重新分配给新的父级。我找到了只移动孩子的方法，但父母没有被重新分配。我的桌子看起来像这样：

```
LocationOrg
[OrgNode] [hierarchyid] NOT NULL,
[OrgLevel]  AS ([OrgNode].[GetLevel]()),
[LocationID] [int] NOT NULL,
[LocationName] [varchar](20) NOT NULL 
```

还有一些数据：

```
LocationID  | LocationName
__________  |_____________
1           | Headquaters
2           | Location1
3           | Location2
4           | Location3
5           | Location4
6           | Location5
7           | Location6
8           | Location7 
```

现在它已设置（手动），因此 Location1 和 Location4 是总部的子代， Location2 和 Location3 是 Location1 的子代，而 Location5、Location6 和 Location7 是 Location2 的子代：

```
--Headquaters
  --Location1
    --Location2
    --Location3
  --Location4
    --Location5
    --Location6
    --Location7 
```

我怎样才能写一些可以重新分配父母和孩子的东西？例如，如果我想移动 Location4 和 Location3 下的所有子项：

```
--Headquaters
  --Location1
    --Location2
    --Location3
      --Location4
      --Location5
      --Location6
      --Location7 
```

请注意 Location4 中的所有子级如何成为 Location3 的子级...我不想整体移动父/子结构，我需要将它们重新分配给新的父级。

这是我到目前为止所得到的，但同样，它只会移动孩子而不是父母：

```
ALTER PROC [dbo].[ReorderLocationOrg]
    @LocationID int,
    @NewParentLocationID int
AS
BEGIN

    DECLARE @OldParent hierarchyid, 
        @NewParent hierarchyid

    SELECT @OldParent = OrgNode 
    FROM LocationOrg
    WHERE LocationID = @LocationID;

    SELECT @NewParent = OrgNode 
    FROM LocationOrg
    WHERE LocationID = @NewParentLocationID;

    DECLARE children_cursor CURSOR FOR
        SELECT OrgNode 
        FROM LocationOrg
        WHERE OrgNode.GetAncestor(1) = @OldParent;

        DECLARE @ChildId hierarchyid;
        OPEN children_cursor
        FETCH NEXT FROM children_cursor INTO @ChildId;
        WHILE @@FETCH_STATUS = 0
        BEGIN
        START:
            DECLARE @NewId hierarchyid;
            SELECT @NewId = @NewParent.GetDescendant(MAX(OrgNode), NULL)
            FROM LocationOrg 
            WHERE OrgNode.GetAncestor(1) = @NewParent;

            UPDATE LocationOrg
            SET OrgNode = OrgNode.GetReparentedValue(@ChildId, @NewId)
            WHERE OrgNode.IsDescendantOf(@ChildId) = 1;
            IF @@error <> 0 GOTO START -- On error, retry
                FETCH NEXT FROM children_cursor INTO @ChildId;

        END
    CLOSE children_cursor;
    DEALLOCATE children_cursor;

    --Move Parent to new node.
    --UPDATE LocationOrg
    --SET OrgNode = @OldParent.GetReparentedValue(@OldParent2, @NewParent)
    --WHERE OrgNode = @OldParent
END 
```

如您所见（注释掉的部分），我试图在光标之后移动父级，但它会引发错误，指出无法插入重复记录。

我在[Moving Subtrees](http://msdn.microsoft.com/en-us/library/bb677173.aspx#BKMK_MovingSubtrees)上查看了此链接，但该过程在移动父子树的同时保持其结构，因此在我的情况下，Location4 将移动到 Location3 下，但 Locations 5、6 和 7 仍将是 Location4 的子节点，不是 3 ...这是我不想要的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T13:23:18.397

重复错误很可能是由于您将 oldParent 节点移动到新父节点下已占用的位置。

试试这个移动你的 sp 中的旧父节点（在光标之后）

```
--Get a new Hierarchical id for you record
DECLARE @NewOldParentId hierarchyid
SELECT @NewOldParentId = @NewParent.GetDescendant(MAX(OrgNode), NULL)
FROM LocationOrg 
WHERE OrgNode.GetAncestor(1) = @NewParent;

--Give this new id to the oldParent
UPDATE LocationOrg
SET OrgNode = @NewOldParentId
WHERE LocationID = @LocationID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-02T18:49:47.593

我知道这是一个迟到的回应，但我对类似问题的解决方案是基于祖父母而不是直接父母移动。

在我的示例中，我有一个填充 4 个下拉列表的 4 个类别。我正在使用层次结构表来跟踪依赖关系。

在我的更新 where 子句中，我获取了祖父母的后代并移动了也只有孩子的后代（我关心的元素）的 ID，我将最后一个 <> @parentId 作为附加检查（在应用程序中需要） .

```
 DECLARE @childID hierarchyid = (select id from DataCategories where Category_ID = 1) --the node I care about
    DECLARE @oldParentID hierarchyid = @childID.GetAncestor(1) --direct parent
    DECLARE @oldGrandParentID hierarchyid = @childID.GetAncestor(2) --grandparent
    DECLARE @newParentID hierarchyid = (select id from DataCategories where Category_ID = 2) -- target parent

    UPDATE DataCategories
        SET id = id.GetReparentedValue(@oldParentID, @newParentID)
        WHERE id.IsDescendantOf(@oldGrandParentID) = 1 AND id.IsDescendantOf(@childID) = 1 AND id <> @oldParentID 
```

# homebrew - brew install libxml2 超时

> ID：14982904
> 
> 赞同：2
> 
> 时间：2013-02-20T14:57:56.973
> 
> 标签：homebrew, libxml2

`brew install libxml2`对我不起作用，我无法确定原因。

```
jzohrab:~ jzohrab$ brew install libxml2 --verbose
==> Downloading ftp://xmlsoft.org/libxml2/libxml2-2.9.0.tar.gz
/usr/bin/curl -f#LA Homebrew 0.9.4 (Ruby 1.8.7-358; Mac OS X 10.8.2) ftp://xmlsoft.org/libxml2/libxml2-2.9.0.tar.gz -C 0 -o /Library/Caches/Homebrew/libxml2-2.9.0.tar.gz.incomplete

curl: (56) Recv failure: Operation timed out 
```

我已经尝试了几天，认为这是服务器流量问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:54:39.643

同样在这里。`http://www.filewatcher.com/m/libxml2-2.9.0.tar.gz.5161069-0.html`从第 5 行放置一面镜子就可以`/usr/local/Library/Formula/libxslt.rb`了。

# javascript - 如何将数据从 Javascript datepicker 表单发送到

> ID：14982905
> 
> 赞同：0
> 
> 时间：2013-02-20T14:58:00.713
> 
> 标签：javascript, forms, coldfusion

我是 mobiscroll 的 Javascript 日期选择器的用户，它允许用户选择一个日期并只需单击鼠标即可提交。我需要将此数据发送到 ColdFusion 查询。我已经在使用 ColdFusion 中包含的日期选择器，但由于它在 Flash 上运行，因此不适合在不同系统上使用。使用 CF 的本机日期选择器，我以 Form.SubmitDate 的形式从表单接收数据。我似乎找不到正确的语法来使用 cfform 将输入括起来。

脚本元素：

```
<script type="text/javascript">
 $(function(){
$('#SubmitDate').mobiscroll().date({
    theme: 'default',
    display: 'modal',
    mode: 'scroller',
    dateOrder: 'yyyy mm dd '
   });    
});

</script> 
```

输入元素

```
 <input name="SubmitDate" id="SubmitDate" class="i-txt" > 
```

# java - 二进制搜索方法数组 Java

> ID：14982907
> 
> 赞同：1
> 
> 时间：2013-02-20T14:58:05.283
> 
> 标签：java, reflection, binary-search, comparator, comparable

我正在尝试有效地搜索天气，子类实现了一个方法，我在一个名为`_szMethodName`. 我可以通过做得到子类实现的所有方法的数组`Method[] _arrClassMethodsList = class.getMethods();`。然后，我可以将该方法的名称与我正在寻找的函数的 stringName 进行比较，以确定天气或该类是否实现了该特定方法。目前我在 for 循环中工作，但随着子类的增长，这会变慢。

For循环实现：

```
for (Method method : class.getMethods()){
       if(method.getName().equals(_szMethodName)){
          //method exists in subclass
          break;
      }
} 
```

~~来自的方法数组 `class.getMethods()`按字母顺序排序。~~（仅在 Java >=7 中）。我希望我可以通过在数组上使用二进制搜索或其他一些优化而不是使用 for 循环来利用这一点。但是，我还没有弄清楚如何在数组上实现 Java 的二进制搜索功能。我曾尝试使用比较器或比较器，但尚未成功。我最近的比较器实现如下，但有一些我还不能解决的错误。

当前使用比较器的尝试：

```
Comparator<Method> c = new Comparator <Method>() {
    public int compare(Method method, String string) {
        return method.getName().compareTo(string);
    }
};

Method[] _arrClassMethodsList = class.getMethods();
int index = Arrays.binarySearch(_arrClassMethodsList, _szMethodName, c); 
```

任何有关如何使其工作的帮助或示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:06:28.127

你为什么不使用方法[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class.. .%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)直接获取方法（如果可用）并让 JVM 有效地为您完成工作？

顺便说一句，getMethods 的文档说：“返回的数组中的元素***没有排序***，也***没有任何特定的顺序***”。二进制搜索需要排序的数据。这意味着您首先需要对数组进行排序。

注意：您应该查看可能符合您期望的方法[getMatchingAccessibleMethod 。](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/MethodUtils.html#getMatchingAccessibleMethod%28java.lang.Class,%20java.lang.String,%20java.lang.Class%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:48:54.517

似乎唯一真正的方法是重新实现二分搜索，在搜索过程中提取方法名称。我的最终实现如下。谢谢各位的帮助。

```
public final Method NOT_FOUND = null;
private Method findMethodInDelegateClassWithParameters (String _szMethodName)
{
    @SuppressWarnings("rawtypes")
    Class _cDelegateClass = m_oDelegate.getClass();

    //Get and sort array for binary search if not done, ensure methods are alphabetical before Java 7 
    if (_arrSortedMethods==null){
        _arrSortedMethods = _cDelegateClass.getMethods();   
        Arrays.sort(_arrSortedMethods, new Comparator<Method>() {
               public int compare(Method m1, Method m2) {
                   return m1.getName().compareTo(m2.getName());
               }
        });
    }

    return binarySearchForMethodNamed(_arrSortedMethods, _szMethodName);
}

public Method binarySearchForMethodNamed(Method[] _arrMethods, String _szMethodName) {
    int left = 0;
    int right = _arrMethods.length - 1;
    return binarySearchMethods(_arrMethods, _szMethodName, left, right);
    }

private Method binarySearchMethods(Method[] _arrMethods, String _szMethodName, int left, int right) {
    if (right < left) {
            return NOT_FOUND;
    }

    int mid = (left + right) >>> 1;
    String _szArrayMethodName = _arrMethods[mid].getName();
    if (_szMethodName.compareTo(_szArrayMethodName)>0) {
            return binarySearchMethods(_arrMethods, _szMethodName, mid + 1, right);
    } else if (_szMethodName.compareTo(_szArrayMethodName)<0) {
            return binarySearchMethods(_arrMethods, _szMethodName, left, mid - 1);
    } else {
            return _arrMethods[mid];
    }               
} 
```

# ios - 应用内购买验证

> ID：14982910
> 
> 赞同：3
> 
> 时间：2013-02-20T14:58:14.203
> 
> 标签：ios, xcode, testing, in-app-purchase, in-app-billing

我正在确保我的二进制文件的应用内购买。现在我可以使用 json 将 base_64 transaction.receipt 数据发送到我的服务器，并且我的服务器直接推送到 Apple 服务并获得结果，无论它是否是真正的付款。

我现在正在研究沙盒环境，一切顺利。但是当我的二进制文件获得批准时，我的二进制文件将在实时付款对帐单中，沙盒将不再存在。在我的服务中，我可以切换 url 是否是沙箱。

但是当我的应用程序进入 InReview Statement 时，Review 团队也会在沙盒中测试吗？如果他们将我置于实时付款状态并像这样测试我的应用程序会怎样。他们会因为我的服务将数据推送到沙盒环境而出错......

有没有办法以编程方式了解我的二进制文件是否在 Sandbox 语句中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:01:50.900

审查过程针对沙盒进行测试。您应该在提供开发者保留的情况下提交您的应用程序，这样您就可以在发布应用程序之前将您的服务器切换到生产环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T20:33:01.270

Apple 的[**应用内购买编程指南**](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/AppReview.html)描述了在开发、审查和生产过程中使用的环境以及应用开发人员建议的方法

[![在此处输入图像描述](../Images/34144799c6a19aa8f08fc77427cf8588.png)](https://i.stack.imgur.com/PL1PT.png)

从图中可以看出，在审查期间，购买是针对 Apple 的测试（沙盒）服务器进行的，但是由于正在审查的二进制文件是将发布到商店的二进制文件，因此该二进制文件必须配置为使用您的生产服务器（或生产 URL，如果您只有一个服务器）。

为了确保收据仍然得到正确验证，该指南建议：

> 在您的服务器上验证收据时，您的服务器需要能够处理从 Apple 测试环境获取其收据的生产签名应用程序。推荐的方法是让您的生产服务器始终首先根据生产 App Store 验证收据。如果验证失败并显示错误代码“生产中使用的沙盒收据”，请改为针对测试环境进行验证

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-21T09:50:33.140

[![在此处输入图像描述](../Images/a77f2152d6e18824c232d933366317cb.png)](https://i.stack.imgur.com/tyFuo.png)我认为您无法测试真正的购买（用真钱）

如果您的购买对沙盒有效，那么它也应该对 prod 有效。

[IAP 文件](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnectInAppPurchase_Guide/Chapters/TestingInAppPurchases.html)

# python - 在python中超出索引

> ID：14982912
> 
> 赞同：2
> 
> 时间：2013-02-20T14:58:19.977
> 
> 标签：python, whoosh

我正在尝试对 excel 文件进行索引，并且我使用了 whoosh 包，但是我发现列表索引超出范围的错误。拜托，谁能帮帮我？我的代码是：

```
from whoosh import fields, index
import os.path
import csv
import codecs

# This list associates a name with each position in a row
columns = ["juza","chapter","verse","analysis"]

schema = fields.Schema(juza=fields.NUMERIC,
                       chapter=fields.NUMERIC,
                       verse=fields.NUMERIC,
                       analysis=fields.KEYWORD)

# Create the Whoosh index
indexname = "index"
if not os.path.exists(indexname):
  os.mkdir(indexname)
ix = index.create_in(indexname, schema)

# Open a writer for the index
with ix.writer() as writer:
  # Open the CSV file
  with codecs.open("yom.csv", "rb","utf8") as csvfile:
    # Create a csv reader object for the file
    csvreader = csv.reader(csvfile)

    # Read each row in the file
    for row in csvreader:

      # Create a dictionary to hold the document values for this row
      doc = {}

      # Read the values for the row enumerated like
      # (0, "juza"), (1, "chapter"), etc.
      for colnum, value in enumerate(row):

        # Get the field name from the "columns" list
        fieldname = columns[colnum]

        # Strip any whitespace and convert to unicode
        # NOTE: you need to pass the right encoding here!
        value = unicode(value.strip(), "utf-8")

        # Put the value in the dictionary
        doc[fieldname] = value

      # Pass the dictionary to the add_document method
      writer.add_document(**doc)
    writer.commit()
` 
```

我得到这个错误，我不知道为什么？错误：

```
Traceback (most recent call last):
  File "C:\Python27\yarab.py", line 39, in <module>
    fieldname = columns[colnum]
IndexError: list index out of range 
```

和我的 csv 文件：

```
1   3   1   Al+ POS:ADJ LEM:r~aHoma`n ROOT:rHm MS GEN
1   3   2   Al+ POS:ADJ LEM:r~aHiym ROOT:rHm MS GEN
1   4   1   POS:N ACT PCPL LEM:ma`lik ROOT:mlk M GEN
1   4   2   POS:N LEM:yawom ROOT:ywm M GEN
1   4   3   Al+ POS:N LEM:diyn ROOT:dyn M GEN
1   5   1   POS:PRON LEM:&lt;iy~aA 2MS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:03:22.140

`csv.reader`用作默认分隔符逗号：`,`

您必须明确定义分隔符：

```
csvreader = csv.reader(csvfile, delimiter=...) 
```

但是，您的 CSV 文件不是同质的。最好不要阅读它`csv`：

```
columns = ["juza","chapter","verse","analysis"]
with codecs.open("yom.csv", "rb","utf8") as f:
    for line in f:
        a, b, c, rest = line.split('   ', 3)
        doc = {k:v.strip() for k,v in zip(columns, rest.split(':'))}
        # a,b,c are the first three integers
        # doc is a dictionary 
```

# java - RichFaces fileUpload 无法调用监听器

> ID：14982913
> 
> 赞同：2
> 
> 时间：2013-02-20T14:58:21.027
> 
> 标签：java, file-upload, jsf-2, richfaces

因为`<rich:fileUpload>`我无法调用`listener`. 当我检查萤火虫控制台时，我发现它进入了无限`GET`请求循环。

网页.xml：

```
<context-param>
    <param-name>org.richfaces.fileUpload.maxRequestSize</param-name>
    <param-value>1000000000</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.fileUpload.createTempFiles</param-name>
    <param-value>false</param-value>
</context-param> 
```

小面：

```
 <h:form enctype="multipart/form-data">
        <rich:fileUpload fileUploadListener="#{fileUploadController.listener}" id="upload" acceptedTypes="jpg, gif, png, bmp"
                ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="5">
                <a4j:ajax event="uploadcomplete" execute="@none" render="info" />
        </rich:fileUpload>
    </h:form> 
```

支持豆：

```
public void listener(FileUploadEvent event) throws Exception{
UploadedFile item = event.getUploadedFile();
uploadFile.setLength(item.getData().length);
uploadFile.setName(item.getName());
uploadFile.setData(item.getData());
writeFile();
}

public void writeFile() {  

FileOutputStream fop = null;  
File file;
try {

    file = new File(fPath + uploadFile.getName());
    logger.info(fPath + uploadFile.getName());

    fop = new FileOutputStream(file);  
    if (!file.exists()) {  
        file.createNewFile();  
    }  

    fop.write(uploadFile.getData());  
    fop.flush();  
    fop.close();    

} catch (IOException e) {  
    e.printStackTrace();  

} finally {  
    try {  
        if (fop != null) {  
            fop.close();  
        }  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  
} 
```

我检查了很多类似的问题，但没有任何线索！

我正在使用 RichFaces 版本 4.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T09:32:30.003

您可以尝试从您的 web.xml 中删除以下行，有人通过这样做来修复。

```
<filter>
  <filter-name>Seam Multipart Filter</filter-name>
  <filter-class>org.jboss.seam.web.MultipartFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>Seam Multipart Filter</filter-name>
  <url-pattern>*.seam</url-pattern>
</filter-mapping> 
```

# c# - Visual Studio 2010 C#如何添加低于其他图片的图片

> ID：14982916
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:58:25.980
> 
> 标签：c#, visual-studio-2010, picturebox

所以基本上，我想添加两张图片。其中一个是大纲，另一个是卡片。

轮廓具有与卡片相同的表面像素数，但在轮廓实际所在的位置有一些额外的像素。所以基本上，它是一张带有轮廓的卡片，但它分为轮廓图片和卡片图片。

那么如何让轮廓图的中心部分透明，让卡片可以塞进去呢？

我无法将卡片的轮廓和卡片做成一张图片，因为我需要使用它的“可见”属性使轮廓闪烁。如果我使图像透明，它只会显示表单的背景。

以下是我想为那些还不明白的人做的事情：

![在此处输入图像描述](../Images/9e0bab5f065751796d004787a71407a1.png)

这必须适合这个：

![在此处输入图像描述](../Images/c62ace7d2a920028c5ffbbc849aec255.png)

但是当我将卡片放在轮廓中时（即使轮廓的内部是透明的），卡片也会消失在其中，因为它进入了背景并且不会停留在表面上。我需要它正好适合大纲，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:07:04.507

您可以编写一个方法来创建一个新的位图，其中两个图像相互叠加。像这样：

```
Bitmap DrawCardWithOutline(Image card, Image outline)
{
    /// Put null checks here.

    Bitmap result = new Bitmap(outline.Width, outline.Height);
    using (Graphics graphics = Graphics.FromImage(result))
    {
        Rectangle cardRect = new Rectangle(0, 0, result.Width, result.Height);
        graphics.DrawImage(card, cardRect);

        Rectangle outlineRect = new Rectangle(0, 0, result.Width, result.Height);
        graphics.DrawImage(outline, outlineRect);
    }
    return result;
} 
```

调整`cardRect`( `Rectangle`) 以匹配您想要展示卡片的位置。在我的示例中，卡片从左上角 (0,0) 一直绘制到右下角（宽度、高度）。

像这样使用它：

```
var card = Image.FromFile(@"C:\card.png");
var outline = Image.FromFile(@"C:\outline.png");
var result = DrawCardWithOutline(card, outline);
pictureBox1.Image = result; 
```

`DrawCardWithOutline`如果您需要很快再次使用它，请存储结果，因为创建新位图并不是一项便宜的操作。例如，您可以在`card`和`result`图像之间切换以模拟闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:46:26.300

与您的 Z 订单一起工作。确保卡片位于大纲的顶部，并且卡片和轮廓的边距和填充都设置为 0。

或者...

使用 PictureBox 边框设置。您可以更改边框的粗细和颜色，并使用计时器打开和关闭边框。这样，您就可以直接打开图片框本身的轮廓，而不是绘制两个图像或使用单独的图片作为轮廓。

# c# - 如何解码用 JavaScriptStringEncoded 编码的字符串？

> ID：14982917
> 
> 赞同：11
> 
> 时间：2013-02-20T14:58:28.267
> 
> 标签：c#, javascript, json, encoding

有没有一种方法可以在 C# 中解码用 HttpUtility.JavaScriptStringEncode() 编码的字符串？

示例编码字符串：

```
<div class=\"header\"><h2>\u00FC<\/h2><script>\n<\/script>\n 
```

我的临时解决方案是：

```
public static string JavaScriptStringDecode(string source)
{
    // Replace some chars.
    var decoded = source.Replace(@"\'", "'")
                .Replace(@"\""", @"""")
                .Replace(@"\/", "/")
                .Replace(@"\t", "\t")
                .Replace(@"\n", "\n");

    // Replace unicode escaped text.
    var rx = new Regex(@"\\[uU]([0-9A-F]{4})");

    decoded = rx.Replace(decoded, match => ((char)Int32.Parse(match.Value.Substring(2), NumberStyles.HexNumber))
                                            .ToString(CultureInfo.InvariantCulture));

    return decoded;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:24:06.093

不，您必须自己实施。原因是这种方法没有有意使用！对于您可能想要实现的目标，为什么不直接使用

```
HttpServerUtility.HtmlEncode(...) 
```

和

```
HttpServerUtility.HtmlDecode(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T22:37:20.457

你可以使用

```
HttpUtility.UrlDecode 
```

[http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode(v=vs.110).aspx)

也在这里回答：[Unescape JavaScript's escape() using C#](https://stackoverflow.com/questions/3778165/unescape-javascripts-escape-using-c-sharp)

但是，UrlDecode 对某些字符（如 + 符号，javascript 不会取消转义）和任何字符值 >= 128 有一些重大限制。使用 Microsoft.JScript.GlobalObject.unescape 可能是最可靠的，但我不知道它的性能如何（即支持语言是什么。我想它很快，因为此时它是一个库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-12T06:06:43.860

我使用 HttpUtility.UrlEncode 而不是 HttpUtility.JavaScriptStringEncode，然后是 HttpUtility.UrlDecode。

# php - 如何使用 PHP 扩展安装 Gearman

> ID：14982921
> 
> 赞同：6
> 
> 时间：2013-02-20T14:58:44.037
> 
> 标签：php, compilation, installation, gearman

我正在尝试使用 PHP Extension 安装 Gearman 以将其与 PHP-CLI 一起使用。

我有一个 Debian 6.0.5`php5-cli`并`php-pear`已安装。

这就是我尝试过的

```
# apt-get install php5-dev
# apt-get install gearman-job-server libgearman-dev
# pecl install gearman 
```

这就是我在控制台上看到的`pecl install`

```
downloading gearman-1.1.1.tgz ...
Starting to download gearman-1.1.1.tgz (30,896 bytes)
.........done: 30,896 bytes
3 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
building in /tmp/pear/temp/pear-build-rootAccnyQ/gearman-1.1.1
running: /tmp/pear/temp/gearman/configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib
checking for PHP extension directory... /usr/lib/php5/20090626
checking for PHP installed headers prefix... /usr/include/php5
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking whether to enable gearman support... yes, shared
not found
configure: error: Please install libgearman
ERROR: `/tmp/pear/temp/gearman/configure' failed 
```

为什么会失败？libgearman 已安装...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-02T09:24:43.707

> 要在 Windows 操作系统中安装带有 PHP 扩展的 Gearman，请参阅 [如何在 Windows 操作系统上安装 gearman php 扩展？](https://stackoverflow.com/questions/11373363/how-can-i-install-gearman-php-extension-on-windows-os/30593439#30593439)

# 安装 Boost 头文件

**Debian**

```
apt-get install libboost-all-dev 
```

**软呢帽**

```
yum install boost-devel 
```

# 安装 gperf

**Debian**

```
apt-get install gperf 
```

**软呢帽**

```
yum install gperf 
```

# 安装 libevent

**Debian**

```
apt-get install libevent-dev 
```

**软呢帽**

```
yum install libevent-devel 
```

# 安装uuid

**Debian**

```
apt-get install uuid-dev 
```

**软呢帽**

```
yum install uuid-devel 
```

# 安装 libclog-ppl0

**Debian**

```
apt-get install libcloog-ppl-dev 
```

# 安装 gearmand 和 libgearman

```
wget https://launchpad.net/gearmand/1.2/1.1.12/+download/gearmand-1.1.12.tar.gz
tar -zxvf gearmand-1.1.12.tar.gz
cd gearmand-1.1.12
./configure
make
make install 
```

# 安装pecl-gearman

```
pecl install gearman 
```

# 资源

*   [http://hasin.me/2013/10/30/installing-gearmand-libgearman-and-pecl-gearman-from-source/](http://hasin.me/2013/10/30/installing-gearmand-libgearman-and-pecl-gearman-from-source/)

*   [https://serverfault.com/questions/445904/how-to-install-libboost-devel-on-centos-6-3](https://serverfault.com/questions/445904/how-to-install-libboost-devel-on-centos-6-3)

*   [https://serverfault.com/questions/528585/centos-yum-install-libevent-devel-conflict-with-compat-libevent](https://serverfault.com/questions/528585/centos-yum-install-libevent-devel-conflict-with-compat-libevent)

*   [http://yupmin.net/install-gearmand-with-php-supervisor](http://yupmin.net/install-gearmand-with-php-supervisor)

*   [https://gist.github.com/rafasashi/6f920d07909564bf8e4f](https://gist.github.com/rafasashi/6f920d07909564bf8e4f)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-14T07:27:35.647

对于 Debian，你应该试试这一行：

```
sudo apt-get install libgearman2 
```

代替：

```
sudo apt-get install libgearman-dev 
```

[http://www.masnun.com/2011/09/30/installing-and-getting-started-with-gearman.html](http://www.masnun.com/2011/09/30/installing-and-getting-started-with-gearman.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:43:35.377

我在这篇文章[installation-gearman-php-extension-on-debian-6](https://stackoverflow.com/questions/13312207/installing-gearman-php-extension-on-debian-6)中找到了解决方案。

在 Debian 6/squeeze 上，您最多只能安装 0.8.3 版。如果你想要更新的版本，你必须升级到 wheezy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T20:53:52.487

You can find thorough installation instructions for 0.8.3 here: [http://blog.andyburton.co.uk/index.php/2012-12/gearman-0-41-with-mysql-persistent-storage-and-php-pecl-0-8-3-with-gearmanmanager-on-ubuntu-12-04/](http://blog.andyburton.co.uk/index.php/2012-12/gearman-0-41-with-mysql-persistent-storage-and-php-pecl-0-8-3-with-gearmanmanager-on-ubuntu-12-04/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T05:32:17.020

请尝试此处提到的步骤：

[http://www.daredevel.com/php-jobs-with-gearman-and-supervisor/](http://www.daredevel.com/php-jobs-with-gearman-and-supervisor/)

谢谢

# jsf-2 - 对话框中的 Primefaces 编辑器不起作用

> ID：14982922
> 
> 赞同：9
> 
> 时间：2013-02-20T14:58:44.583
> 
> 标签：jsf-2, primefaces, editor

我有一个对话框来插入一些字段，其中之一是 ap:editor，它的显示就像它被禁用一样，而它不是。一个奇怪的“true”字符串显示在编辑器主体中。编码：

```
<p:dialog id="insertPanel" header="Inserisci" widgetVar="dlg1" appendToBody="true" modal="true">
  <h:form id="insertForm">
    <h:panelGrid columns="2">
      <h:outputLabel value="Nome: " for="name" />
      <p:inputText id="name" value="#{controller.name}" />
      <h:outputLabel value="Oggetto: " for="subject" />
      <p:inputText id="subject" value="#{controller.subject}" />
      <h:outputLabel value="Visibilità: " for="visibility" />
      <p:inputText id="visibility" value="#{controller.visibility}" />
      <h:outputLabel value="Testo: " for="text" />
      <p:editor id="text" value="#{controller.text}" width="600"/>
      <f:facet name="footer">
        <p:commandButton actionListener="#{controller.insert}" value="Inserisci" />
      </f:facet>
    </h:panelGrid>
  </h:form>
</p:dialog> 
```

显示问题的对话框图像：

![对话框中的编辑器问题](../Images/a876364c94a7e4dbe8fc1f789d38be57.png)

如您所见，编辑器就像被禁用并在其正文中显示“true”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:54:30.150

我解决了这个问题。我刚刚`update=":insertForm"`输入了打开对话框的命令按钮，它可以工作。

```
<p:commandButton id="insertButton" value="Inserisci" oncomplete="dlg1.show();" update=":insertForm" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T15:05:51.853

尝试添加`showEffect="fade"`到对话框组件。

# javascript - 如何在 jsdoc 上添加和使用标签？

> ID：14982923
> 
> 赞同：5
> 
> 时间：2013-02-20T14:58:46.890
> 
> 标签：javascript, jsdoc

我正在尝试将 customTag 添加到 jsdoc。我在插件目录中创建了一个文件，如下所示：

**方法.js**

```
exports.defineTags = function(dictionary) {
    dictionary.defineTag("methodHttp", {
        mustHaveValue: true,
        canHaveType: false,
        canHaveName: true,
        onTagged: function(doclet, tag) {
            doclet.methodHttp = tag.value;
        }
    });
}; 
```

然后我添加到我的**conf.json**：

```
{
    "tags": {
        "allowUnknownTags": true
    },
    "source": {
        "includePattern": ".+\\.js(doc)?$",
        "excludePattern": "(^|\\/|\\\\)_"
    },
    "plugins": [ "plugins/method" ],
    "templates": {
        "cleverLinks": false,
        "monospaceLinks": false,
        "default": {
            "outputSourceFiles": true
        }
    },
    "jsVersion": 180
} 
```

现在我试着在我的模板上得到这个。我在method.tmpl。

我试过：

```
self.find('methodHttp')[0]
data.methodHttp[0]
data.methodHttp 
```

但它不起作用。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:08:12.373

`jsDoc.defineTag`不支持带有大写字符的标签...

虽然这似乎是他们字典中的一个错误！

# mysql - mysql用str_to_date用windows批处理插入

> ID：14982925
> 
> 赞同：1
> 
> 时间：2013-02-20T14:58:54.977
> 
> 标签：mysql, batch-file

我需要`INSERT`使用 Windows 批处理（.bat）从一个表到另一个表的日期数据。

```
SET thedate='02/02/13'
mysql -e "INSERT INTO dest select str_to_date($thedate,'%d/%m/%Y') from source" thebase -uroot -ppassword`" 
```

当我将 .bat 文件拖到 cmd 窗口时，窗口将我的代码显示为：

```
SET thedate='02/02/13'
mysql -e "INSERT INTO dest select str_to_date($thedate,'m/Y') from source" thebase -uroot -ppassword" 
```

已`%d/%m/%Y`更改为，`m/Y`因此我在表 dest 中获得空值。当我直接在 phpmyadmin 中运行此查询时，它运行良好。

我使用 xampp 18.1 Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:24:13.043

在 Windows 批处理中，变量的语法是`%foo%`，而不是`$foo`。您可能将它与 bash 混淆了。像这样：

*   `$thedate`不是变量
*   `%d/%`被认为是未设置的`d/`变量
*   `%`in被认为是不匹配的`%Y`变量分隔符并被忽略

`%`如果你复制它，你可以逃脱：

```
SET thedate='02/02/13'
echo %thedate%,'%%d/%%m/%%Y' 
```

... 印刷：

```
'02/02/13','%d/%m/%Y' 
```

如果可能，我建议您不要通过命令行解释器编写 SQL 字符串。很难做到正确。

# objective-c - 有什么方法可以操纵父视图控制器，以便子视图位于 UIPageControl 下方？

> ID：14982927
> 
> 赞同：6
> 
> 时间：2013-02-20T14:58:56.760
> 
> 标签：objective-c, uipagecontrol, uipageviewcontroller, layoutsubviews

我正在通过使用 UIPageViewController 在应用程序中实现水平滚动，我将导航属性设置为“水平”，将过渡样式设置为“滚动”。一切正常，我可以添加一些正确呈现的子视图。我还想通过使用这两种方法来利用 UIPageViewController 具有的内置 UIPageControl：

```
-(NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController
-(NSInteger)presentationCountForPageViewController:(UIPageViewController *)pageViewController 
```

这实际上显示了我正在寻找的内容：指示显示哪个子视图的点。但是，正如您在图像中看到的那样，UIPageControl 设置在父视图控制器（UIPageViewController）的底部。你可以想象这不是我展示我的 UIPageControl 的方式。有什么方法可以操纵父视图控制器，以便子视图位于 UIPageControl 下方？或者有没有其他好的做法来实现这一点？我知道我可以通过使用 scrollView 而不是 UIPageViewController 来实现水平滚动，但这对我来说似乎更有效率。

[http://i48.tinypic.com/2hd03ev.png](http://i48.tinypic.com/2hd03ev.png)

为了清楚起见：灰色部分是我的子视图，红色部分是我正在使用的底层 UIPageViewController。

提前感谢您的任何回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T05:08:40.163

一种解决方案是创建和管理您自己的`UIPageControl`而不是使用内置的。

如果您创建了自己的几个选项，可以将其显示在您想要的深度，但我建议在顶部创建一个覆盖视图`UIPageViewController`并将 UIPageControl 添加到该视图，以便两者完全独立。您还可以将页面控件放置在您想要的任何位置。

要跟踪页面更改，请实现`UIPageViewControllerDelegate`of`UIPageViewController`并将视图控制器更改转发给您的`UIPageControl`使用`setCurrentPage`and `setNumberOfPages`。

# objective-c - 如何从Objective C中现有的超类初始化一个新对象

> ID：14982931
> 
> 赞同：0
> 
> 时间：2013-02-20T14:59:07.883
> 
> 标签：objective-c, inheritance

我知道这种问题已经被问过很多次了，但是环顾四周，我找不到适合我问题的解决方案。比如说，我有一个从我正在使用的框架中调用的类，`Base`我需要扩展它的功能，同时仍然能够访问它的原始方法和属性。由于框架和我的代码都将同时和异步地处理同一个`Base`对象，我需要两者都能够这样做。所以我想：子类化。
但这不仅仅是关于子类化：我需要的是更类似于向下转换。这是我需要从一个仍然应该是`Base`框架对象的对象访问我自己定义的属性。所以假设我创建了一个`Derived`子类做的工作：如何初始化？我不能只使用复制构造函数，因为我需要使用框架正在处理的相同对象。而且我不能使用类别，我需要添加 ivars。你知道有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:23:49.890

如果我理解正确，您不仅希望访问`Base`方法和 iVar，还希望访问存储在类的**特定实例**中的 iVar 的实际值`Base`。这听起来像是您何时想要使用合成的完美示例。复合类是您自己的自定义类，具有其自定义方法和 iVar，其中还包含您的`Base`类的实例。

```
@class Base;

@interface Derived : NSObject {
    Base *baseObject;
    // Add your iVar's here.
}   
// Add your declared properties/methods here
@end 
```

现在，当您创建`Derived`实例时，您需要分配`Base`您想要访问的实例：

```
Derived *derivedInstance = [[Derived alloc] init];

// Now set the baseObject.  This could also be set by the Derived class itself if 
// you are creating a new instance or are accessing a "known" object 
// (ie Singleton or global object).
derivedInstance.baseObject = myBaseObjectThatIWantToAccess;

NSLog("Derived iVar: %@", derivedInstance.<ivar>);
NSLog("Base Object iVar: %@", derivedInstance.baseObject.<iVar>); 
```

**注意 1**您还可以添加`Derived`“隐藏”的方法，`baseObject`这样您就不必将其暴露给外界。

**注意 2**在大多数情况下，我还建议使用声明的属性而不是 iVars，但上面的示例显示了 iVars，因为这是您所问的。

# python - Python：Argparse 不解析长文本参数

> ID：14982934
> 
> 赞同：1
> 
> 时间：2013-02-20T14:59:12.643
> 
> 标签：python, command-line-interface, argparse

我正在用 pyton 编写一个新的 CLI，并使用 cmd 和 argparse 库。当我设置一个参数并使用长文本选项调用它时，它无法识别它是文本并引发异常。

这是我使用参数的方式：

```
WACP:~ cli$ add -t group -n NameForNewGroup -desc 'Description for new group' -c 2 
```

回应是：

```
unrecognized arguments: - t   g r o u p   - n   N a m e F o r N e w G r o u p   - d e s c   ' D e s c r i p t i o n   f o r   n e w   g r o u p '   - c   2 
```

在这里我如何添加参数：

```
self.parser.add_argument('-t', '--type',
                                 dest='type',
                                 help=Language.MSG_ADD_TYPE_HELP,
                                 action='store',
                                 default='device'
)
self.parser.add_argument('-c', '--config',
                                 dest='config',
                                 help=Language.MSG_ADD_GROUP_HELP,
                                 action='store',
                                 default=0
)
self.parser.add_argument('-n', '--name',
                                 dest='name',
                                 help=Language.MSG_ADD_NAME_HELP,
                                 action='store',
                                 default='New Device'
)
self.parser.add_argument('-desc', '--description',
                                 dest='description',
                                 help=Language.MSG_ADD_DESC_HELP,
                                 type=complex,
                                 action='store',
                                 default='Default description for device or group included in configuration values') 
```

我查看了 argparse 文档并没有配置它是如何实现的。

我必须处理这个长文本解析并使其工作。

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:08:14.257

为我工作。也许你可以制作一个最小的测试用例？什么版本的 Python？你确定你正在使用`argparse`而不是`optparse`？你在召唤`parse_args()`正确的对象吗？的输出是`-h`什么？

```
import argparse
p = argparse.ArgumentParser()
p.add_argument('-t', '--type',
               dest='type')
p.add_argument('-c', '--config',
               dest='config')
p.add_argument('-n', '--name',
               dest='name')
p.add_argument('-desc', '--description',
               dest='description')
print(p.parse_args()) 
```

运行时：

```
$ python test.py -t group -n NameForNewGroup -desc '新组的描述' -c 2
Namespace(config='2', description='新组的描述', name='NameForNewGroup', type='group')
$ python test.py -h
用法：test.py [-h] [-t TYPE] [-c CONFIG] [-n NAME] [-desc DESCRIPTION]

可选参数：
  -h, --help 显示此帮助信息并退出
  -t 类型，--type 类型
  -c 配置，--config 配置
  -n 名称，--name 名称
  -desc 描述，--description 描述

```

## 笔记

1.  通常，如果您有短（例如`-t`）和长（例如`--type`）参数，短参数应该是一个字符。所以`-desc`有点奇怪。

2.  你不想`type=complex`。该`complex`类型用于复数，例如`1+0.5j`.

3.  默认操作是`store`，因此您可以省略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T20:32:13.747

你怎么叫`parse_args`？响应中的间距`- t g r o u p - n N...`表明您已经完成了`p.parse_args(list('-t group -n N...'))`，或其等价物。每个字符都是一个单独的参数字符串。

或者，也许你正在做`p.parse_args('-t group -n N ...')`. 对于测试调用应该类似于`p.parse_args(['-t','group','-n','N', ...])`（字符串列表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:02:28.747

通常，您必须在 longoptions 前面加上两个连字符“--”。也许这就是问题所在？不知道只有“-”是否也有效。

# php - 使用 php 中的下拉列表进行搜索，其中值来自数据库

> ID：14982935
> 
> 赞同：1
> 
> 时间：2013-02-20T14:59:13.317
> 
> 标签：php, search, drop-down-menu, using

伙计们，我真的需要你的帮助......我不知道如何使用下拉列表进行搜索并以表格形式显示结果，其中下拉列表中的值来自数据库。这是场景...当我从下拉列表中选择一个选项或选项时（例如 Closed - Closed 是案例的状态），当我单击 Closed 时，它将以表格形式显示具有状态的案例的结果相当于关闭所以和其他状态一样，当没有匹配时它会显示一条消息。（当下拉列表中的值来自数据库时，这会很好，以便将来您可以添加另一个状态，它会自动填充到下拉列表中，如果我在搜索中做同样的事情也会很好...... ）我希望你们在这方面帮助我......

# perl - Perl - 以常量退出

> ID：14982936
> 
> 赞同：1
> 
> 时间：2013-02-20T14:59:14.957
> 
> 标签：perl

```
#!/usr/bin/perl

use strict "vars";
use warnings;
use feature qw(switch);

use locale;
use POSIX qw(locale_h);
setlocale(LC_ALL, "cs_CZ.UTF-8");

use constant (
    ERROR_OK => 0,
    ERROR_CMD => 1,
    ERROR_INPUT => 2,
    ERROR_OUTPUT => 3,
    ERROR_INPUT_FORMAT => 4
);

exit ERROR_OUTPUT; 
```

我仍然收到错误“Argument “ERROR_OUTPUT” is not numeric in exit at ...“我如何使用常量作为退出值而不是直接使用数字？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T15:03:00.313

将后面的括号更改为`use constant`花括号。

```
use constant {
    ERROR_OK => 0,
    # etc.
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T15:04:56.833

`use constant`指令应该使用花`{`括号`}`，而不是`(`圆括号`)`。

```
use constant {
    ERROR_OK => 0,
    ERROR_CMD => 1,
    ERROR_INPUT => 2,
    ERROR_OUTPUT => 3,
    ERROR_INPUT_FORMAT => 4
}; 
```

# uiview - 为什么我的方法没有被调用？

> ID：14982937
> 
> 赞同：0
> 
> 时间：2013-02-20T14:59:19.530
> 
> 标签：uiview, methods, uiviewcontroller

为什么我的方法没有被调用？

我的 UIViewController 应该在我的 UIView 中调用一个名为 myMethod 的方法。

它仅适用于初始 UIView viewDidLoad。

加载视图后，我无法从 someOtherMethod 调用“myMethod”。我不明白为什么？XCode 识别出该方法存在并且该方法在我的标头中公开。

MyViewController.h

```
#import “MyView.h”
@interface MyViewController : UIViewController {
     MyView *mv;
} 
```

MyViewContoller.m

```
#import “MyView.h”
- (void)viewDidLoad
{
    mv = [[MyView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:mv];

    //THIS WORKS IF CALLED FROM viewDidLoad
    [mv myMethod];
}

- (void) someOtherMethod {

    //THIS DOESN’T WORK IF CALLED LATER
    [mv myMethod];
} 
```

我的视图.h

```
- (void) myMethod; 
```

我的视图.m

```
- (void) myMethod {
     NSLog(@"My Method");
} 
```

# regex - 在逗号前后添加单引号

> ID：14982938
> 
> 赞同：1
> 
> 时间：2013-02-20T14:59:20.223
> 
> 标签：regex, notepad++

您好我正在尝试在我的文本字符串中的逗号前后插入一个单引号 (')。

例如`ptprptitrklgfd','sofpdsofksdlfd','weroweprewfmvrewrewrieowrioewirew','`

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:01:17.627

您不需要正则表达式，只需进行标准搜索和替换即可替换`,`为`','`

*   `Ctrl`+`F`
*   点击“替换”
*   `,`在第一个领域
*   `','`在第二个领域
*   点击“全部替换”

编辑：如果您只想执行某个字符串，请突出显示它并单击“在选择中”复选框，然后单击全部替换

# shell - 如何在 UNIX 中将两个行号之间的文本打印到新文件中

> ID：14982942
> 
> 赞同：2
> 
> 时间：2013-02-20T14:59:38.743
> 
> 标签：shell, unix, sed, awk

我有一个这样的文件（第一列的数字是行号）

```
30.<unit id=20>
31....
32.</unit>
33.<unit id=40?
34....
35.</unit>
36<unit id=20>
37...
38.</unit>
39.<unit id=40?
40....
41</unit> 
```

我想在两个行号之间打印行，比如 32 和 39。我怎样才能在 Unix 中完成这个？
我是 unix 新手。注意：我不想要 perl 脚本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T15:07:37.683

sed 的另一种方法：

```
 sed -n '32,39p' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:07:37.940

```
sed -n '32,39p' input > output 
```

请注意，这会忽略您的行号并仅打印第 32 到 39 行。如果要匹配字符串，请使用 Fredrik 提出的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T10:19:39.203

我想你应该试试这个

```
sed '32,39!d' input > output 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T15:07:11.950

采用`sed`

```
sed -n '/^32/,/^39/p' file 
```

# sql-server - 暂时暂停 SQL Server 复制

> ID：14982944
> 
> 赞同：6
> 
> 时间：2013-02-20T14:59:40.853
> 
> 标签：sql-server, sql-server-2008, replication, database-replication

我们有一个使用 3 个 SQL Server 的事务复制设置，第一个作为发布者，第二个作为分发者，第三个作为订阅者。

我们有一个活动来使用 de-attach 和 attach 方法更改复制数据库（订阅者）的位置。在此活动期间，我需要停止 SQL 服务器，因此所有复制的事务都将失败。

在此活动期间暂停复制的正确方法是什么，因此当我再次附加数据库并启动 SQL 服务时，复制将正常恢复。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:17:01.517

有关如何完成此操作的详细信息，请参阅以下链接：

[启动和停止复制代理](http://msdn.microsoft.com/en-us/library/ms151783%28v=sql.100%29.aspx)

上面的文章似乎没有提供有关停止分发代理的信息，这可以通过使用下面链接中详述的存储过程来实现：

[使用 TSQL 启动/停止 SQL Server Replication Agent](http://cavemansblog.wordpress.com/2012/03/12/startstop-sql-server-replication-agent/)

# css - CSS 3 动画 - 在屏幕上滑动

> ID：14982945
> 
> 赞同：0
> 
> 时间：2013-02-20T14:59:41.930
> 
> 标签：css, css-transitions, css-animations

我有这个：[http](http://d.pr/i/A2b3) ://d.pr/i/A2b3 ，它充当标题和主要内容之间的分隔符。

该图像被设置为标题容器的背景图像，repeat-x。

```
<header> <--- image is background of this
    <div id="container"></div>
</header> 
```

我希望图像以类似波浪的效果在屏幕上缓慢滑动。CCS3 动画可以做到这一点吗？如果是这样，有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:05:38.317

我建议使用 jQuery 和一个带有缩短图像暂停的简单图像滑块，以便图像不断切换。据我所知，不可能让视频出现在滑块中（不是没有某种播放按钮）。[http://www.catchmyfame.com/2009/06/04/jquery-infinite-carousel-plugin/](http://www.catchmyfame.com/2009/06/04/jquery-infinite-carousel-plugin/)将是我将使用的一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:50:46.743

尝试这个！

CSS：

```
header {
    width: 100%;
    height: 150px;
    background-image: url(http://www.scottishheritageusa.org/imgs/header_separator.png); //replace with your image
    background-position: 0px;
    background-repeat: repeat-x;
    -webkit-animation: myanim 5s infinite linear;
       -moz-animation: myanim 5s infinite linear;
         -o-animation: myanim 5s infinite linear;
            animation: myanim 5s infinite linear;
}

@-webkit-keyframes myanim {
    0%   { background-position: 0px; }
    100% { background-position: 100px; } /* set this to the width of the image */
}
@-moz-keyframes myanim {
    0%   { background-position: 0px; }
    100% { background-position: 100px; } /* set this to the width of the image */
}
@-o-keyframes myanim {
    0%   { background-position: 0px; }
    100% { background-position: 100px; } /* set this to the width of the image */
}
@keyframes myanim {
    0%   { background-position: 0px; }
    100% { background-position: 100px; } /* set this to the width of the image */
} 
```

我在这里创建了一个小提琴供您使用：http: [//jsfiddle.net/e3WLD/3/](http://jsfiddle.net/e3WLD/3/)

# css - webkit-gradient 未附加在 FF 中

> ID：14982950
> 
> 赞同：0
> 
> 时间：2013-02-20T14:59:55.367
> 
> 标签：css, webkit

基本上，以下代码似乎没有附加到我在 FireFox 内的表 TH

```
.table th {
   font-weight: bold;
   background: -webkit-gradient( linear, left bottom, left top, color-stop(0.03, #3A79C1), color-stop(0.99, #5F9EE6), color-stop(1, #75ABEA) );
   color: #fff;
  text-shadow: 1px 1px 1px #666;
} 
```

文本阴影只是附加而不是背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:04:22.713

您只使用 -webkit-gradient 指令，但要让 FF 看到您的渐变，您还应该添加 -moz-linear-gradient 指令！

# ajax - twitter-bootstrap typeahead ajax TypeError

> ID：14982959
> 
> 赞同：1
> 
> 时间：2013-02-20T15:00:20.417
> 
> 标签：ajax, twitter-bootstrap

我正在使用这段代码：

```
 $('.ajax-typeahead').typeahead({
    source: function(query, process) {
        return $.ajax({
            url: $(this)[0].$element.data('link'),
            type: 'get',
            data: {q: query},
            dataType: 'json',
            success: function(res) {
                return  process(res);
            }
        });
    }
}); 
```

当我在输入字段中输入内容时，我得到：

> bootstrap.min.js（第 1 行）
> 
> 类型错误：a 未定义

有谁知道什么时候出错？

编辑：我更新到最新版本 2.3，现在一切正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:36:11.850

我更新到最新版本 2.3，现在一切正常！

# jquery - 使用 Handlebars.js 隐藏数组中的第一个元素

> ID：14982960
> 
> 赞同：1
> 
> 时间：2013-02-20T15:00:21.387
> 
> 标签：jquery, arrays, templates, multidimensional-array, handlebars.js

使用 Handlebars.js，我试图隐藏数组中的第一个元素。它以选项为真/假为条件。

这可以在没有助手的情况下完成吗？

谢谢

以 > 作为分隔符的水平菜单

```
{{#if options.display-home}}
 <li class="home">{{options.home}}</li>
{{/if}}
/*If display-home true hide initial separator*/

{{#recursive data "menu-breadCrumb"}}
   {{#if Active}}
{{#if ../../block.Options.DisplaySeparator}}
  <li class="separator">{{../../../block.Options.Separator}}}</li>
{{/if}}
{{/recursive}} 
```

# javascript - 为什么这两个功能都不适用于我的 html js 按钮？

> ID：14982962
> 
> 赞同：0
> 
> 时间：2013-02-20T15:00:22.460
> 
> 标签：javascript, jquery, html

我在一个页面上有一个按钮，我已经编程了它可以滚动到一个大容器中的下一个 div。但是，每当我滚动到页面的左侧或右侧时，我也希望使用相同的按钮将浏览器窗口滚动到一定数量的像素上。

这是我尝试过的： 这会将容器滚动到 div 上。然后我尝试添加一个从“getOffset”说滚动窗口的函数

```
var colwidth = $('#container').width(),
contwidth = $('#contents').width(),
getOffset = function() {
    return parseInt($('#container').css('margin-left'));
};

$(".left").click(function(){
   if (getOffset() === 0) return false;
   function scrollWindow(scrollValue) {

        window.scrollBy(getOffset, 0);

    }
    $("#contents").animate({left: '+=' + colwidth},500);
    $("#container").animate({'margin-left': '-=' + colwidth},500);
 });
$(".right").click(function(){
    if (getOffset() === contwidth - colwidth) return false;

    $("#contents").animate({left: '-=' + colwidth},500);
    $("#container").animate({'margin-left': '+=' + colwidth},500);
    function scrollWindow(scrollValue) {

        window.scrollBy(getOffset, 0);

    }
 });

</script> 
```

从逻辑上讲，它似乎应该可以工作，但是我的页面忽略了滚动窗口的功能。我将不胜感激任何帮助。我的逻辑哪里错了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:45:22.607

要将事件处理程序附加到动态元素，[如果您使用的是 jQuery 1.7+，请使用 jQuery .on() 方法](http://www.andismith.com/blog/2011/11/on-and-off/)。如果您使用的是旧版本，请在 .bind()、.delegate() 和 .live() jQuery 方法中进行选择。

# python - 我为 python3 安装了 PyOpenGl，当我导入包时出现值错误

> ID：14982967
> 
> 赞同：3
> 
> 时间：2013-02-20T15:00:42.470
> 
> 标签：python, macos, installation, pyopengl

我想从一些 PyOpenGL 开始，所以我启动到 Mac Osx 来尝试它。我访问了 PyOpenGl 网站，下载了 PyOpenGl 和 PyOpenGl_accelerate tars，cd 到我的下载目录，然后在终端中输入这些命令进行安装：

```
tar -zxvf PyOpenGL-3.0.2.tar.gz
cd PyOpenGL-3.0.2
python3 setup.py install #I changed 'python' to 'python3' to install it to my python3\. 
```

接下来，我输入这些来安装加速包

```
tar -zxvf PyOpenGL-accelerate-3.0.2.tar.gz
cd PyOpenGL-accelerate-3.0.2
python3 setup.py install #Again, 'python' replaced with 'python3' 
```

最后，我运行了这段代码来测试安装

```
python3
>>>from OpenGL.GL import * 
```

这给了我这一系列可爱的错误

```
 Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/PyOpenGL-3.0.2-py3.3.egg/OpenGL/GL/__init__.py", line 3, in <module>
    from OpenGL.GL.VERSION.GL_1_1 import *
  File "/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/PyOpenGL-3.0.2-py3.3.egg/OpenGL/GL/VERSION/GL_1_1.py", line 10, in <module>
    from OpenGL import platform, constants, constant, arrays
  File "/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/PyOpenGL-3.0.2-py3.3.egg/OpenGL/arrays/__init__.py", line 19, in <module>
    from OpenGL.arrays.arraydatatype import *
  File "/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/PyOpenGL-3.0.2-py3.3.egg/OpenGL/arrays/arraydatatype.py", line 14, in <module>
    from OpenGL_accelerate.arraydatatype import ArrayDatatype as ADT
  File "arraydatatype.pyx", line 1, in init OpenGL_accelerate.arraydatatype (src/arraydatatype.c:9315)
  File "wrapper.pyx", line 2, in init OpenGL_accelerate.wrapper (src/wrapper.c:10792)
ValueError: level must be >= 0 
```

知道为什么会这样吗？

编辑：使用以下命令设法让 pyopengl 为 python3 工作：

```
sudo pip-3.3 install PyOpenGL 
```

所以...问题解决了我猜...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T20:01:15.773

在这里回答我自己的问题，我设法让 PyOpenGL 使用该命令

```
sudo pip-3.3 install PyOpenGl 
```

# javascript - 添加到购物车按钮在 Magento 中不起作用

> ID：14982970
> 
> 赞同：0
> 
> 时间：2013-02-20T15:00:53.077
> 
> 标签：javascript, magento

我网站上的添加到购物车按钮不起作用。这是一个示例页面：[http ://www.fluffyflump.co.uk/pot-of-gold-art-print](http://www.fluffyflump.co.uk/pot-of-gold-art-print)

单击检查元素和控制台时，我可以看到错误：无法调用未定义的方法“提交”

设置是 Magento 1.7.0.2 和我之前使用过的自定义主题，没有问题。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:29:00.490

您在 Prototype JS 和 jQuery 之间存在冲突。

在同一个网站中使用两个 JS 框架时，这是一个常见的问题。

检查此项以了解如何使用`noConflict();`和防止冲突。 [http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

基本上你需要`jQuery.noConflict();`在原型和 jQuery 之间使用。

# c# - 将 Telerik MVC Grid 迁移到 Kendo UI

> ID：14982976
> 
> 赞同：0
> 
> 时间：2013-02-20T15:01:06.930
> 
> 标签：c#, asp.net-mvc, telerik, kendo-ui

我正在将 AJAX 数据绑定 Telerik 网格迁移到 Kendo UI 网格。

使用 Telerik，控制器方法返回一个`PartialViewResult`（使用内部框架函数调用），但是使用新的 Kendo UI 网格，我只能通过返回一个`JsonResult`. 如果我返回 a `PartialViewResult`，则网格呈现为空。

**问题：** 是否可以返回`PartialViewResult`带有 Kendo UI 网格的 a？

**Telerik 代码：**

```
[GridAction]
public PartialViewResult SelectProducts()
{
    return DoChildReadingAction(() => 
        _service.GetAllProducts().ToProductListItemViewModels(), "_ChildError");
} 
```

**剑道界面代码：**

```
public JsonResult SelectProducts([DataSourceRequest]DataSourceRequest request)
{
    return Json(_service.GetAllProducts().ToProductListItemViewModels()
                        .ToDataSourceResult(request));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:21:12.470

ASP.NET MVC 的 Kendo UI Grid**仅适用**于 JSON 结果。它不适用于 PartialResult。更多信息可以在[AJAX 绑定](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)帮助主题中找到。

你只需要转换你的代码：

```
public JsonResult SelectProducts([DataSourceRequest]DataSourceRequest request)
{
    return Json(_service.GetAllProducts().ToProductListItemViewModels()
                        .ToDataSourceResult(request));
} 
```

还要确保您已包含`kendo.aspnetmvc.min.js`在您的页面中。否则你会看到`DenyGet`错误。查看[故障排除](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting)帮助主题以获取更多详细信息。

# bash - 重定向 cron 作业的输出

> ID：14982980
> 
> 赞同：16
> 
> 时间：2013-02-20T15:01:19.967
> 
> 标签：bash, unix, cron, crontab

我在 crontab 中有以下条目：

```
0 5 * * * /bin/bash -l -c 'export RAILS_ENV=my_env; cd /my_folder; ./script/my_script.rb 2>&1 > ./log/my_log.log' 
```

结果是我收到了`./script/my_script.rb`in的输出`./log/my_log.log`。这种行为是需要的。奇怪的是，我也在本地邮件中收到了输出。我想知道我的脚本的输出是如何被邮件捕获的。由于我将输出重定向到日志文件，我希望我的 cron 作业没有输出，因此当 cron 作业运行时我不会收到任何邮件。任何人都可以阐明邮件如何获得输出`./script/my_script.rb`吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-20T15:07:41.427

您的重定向顺序不正确。Stderr 没有被重定向到文件，而是被发送到 stdout。这就是您必须在邮件中收到的内容。

通过将您的 cron 作业更改为：

```
0 5 * * * /bin/bash -l -c
'export RAILS_ENV=my_env;
cd /my_folder;
./script/my_script.rb > ./log/my_log.log 2>&1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T15:06:35.960

尝试`2>&1`与`> ./log/my_log.log`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:18:16.323

从[这个答案](https://stackoverflow.com/a/637838/2032563)来看，您只需要切换重定向的顺序：

```
0 5 * * * /bin/bash -l -c 'export RAILS_ENV=my_env; cd /my_folder; ./script/my_script.rb > ./log/my_log.log 2>&1' 
```

# c# - 使用 EPPlus 检查文件是否实际上是 Excel 文件

> ID：14982985
> 
> 赞同：7
> 
> 时间：2013-02-20T15:01:38.047
> 
> 标签：c#, excel, epplus

我在 C# 中使用 EPPlus 来读取 Excel (.xlsx) 文件。初始化是这样完成的：

```
var package = new ExcelPackage(new FileInfo(filename)); 
```

这工作正常，但有没有办法检查指定的`filename`或`package`实际上是一个有效的 .xlsx 文件？否则在对非 Excel 对象进行操作时会出现异常，例如，如果用户不小心打开了 .zip 文件或其他情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:13:55.023

您可以检查文件的扩展名：

```
string file = @"C:\Users\Robert\Documents\Test.txt";

string extenstion = Path.GetExtension(file); 
```

*更新*

对于无法在 EPPlus 文档中打开某些文件的情况，我还没有找到某种返回值，但是您可以使用它来捕获异常：

```
FileInfo fileInfo = new FileInfo(pathToYourFile);

ExcelPackage package = null;
try
{
    package = new ExcelPackage(fileInfo);
}
catch(Exception exception)
{
   ...
} 
```

如果您不在`catch`- 那意味着它已正确打开。

# excel - 未使用 vb6 安装 office 时，遍历 excel 工作表名称

> ID：14982990
> 
> 赞同：1
> 
> 时间：2013-02-20T15:01:51.853
> 
> 标签：excel, vb6, worksheet

多亏了 ACE.OLEDB 提供商，我可以在不安装 excel 的情况下阅读 excel 表。我也可以使用以下方法遍历工作表，但如果我没记错的话，它需要安装 office：

```
 Set xlApp = CreateObject("Excel.Application")
    Set wb = xlApp.Workbooks.Open(txtExcelFile, ReadOnly:=True, editable:=False)
    If wb.Worksheets.Count = 0 Then
    MsgBox "Excel file contains no worksheets"
    GoTo SubEnd
    End If
    Dim i        As Integer

    For i = 1 To wb.Worksheets.Count
        cboWorksheet.AddItem (wb.Worksheets(i).Name)
    Next 
```

**我希望能够查询 excel 表来填写下拉列表，但是即使没有安装 office，我也可以这样做吗？** 为了解释我们目前的情况，我为我们的 crm 构建了一个动态导入器，通常我们可以通过他们的服务器更容易地访问公司，与客户端 PC 相比，安装办公室的可能性更小。

所以我想在导入excel文件时不完全依赖office。当然这不是主要功能，我可以将工作表名称存储为文本字段，但如果可以选择相关的工作表名称会更好。

这可以做到吗，在vb6中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:04:00.790

像这样？

```
'~~> Add Reference to MS ActiveX Data Objects xx.xx Library
Option Explicit

Private Sub Form_Load()
    Dim SheetName As String
    Dim RS As ADODB.Recordset
    Dim I As Long

    With CreateObject("ADOX.Catalog")
        .ActiveConnection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source='" _
                          & App.Path & "\sample.xls';" _
                          & "Extended Properties='Excel 5.0;HDR=No'"
        For I = 0 To .tables.Count - 1
            '~~> This will give you sheet names
            Debug.Print .tables(I).Name
        Next I
    End With
End Sub 
```

**截屏**

我添加了一个`List1`和一个`Command1`来显示代码是如何工作的

![在此处输入图像描述](../Images/ef51c0b8e14559c571eee43f521fcc3d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:40:25.583

你可以使用普通的 ADO（不是 ADOX）来做这样的枚举

```
Option Explicit

Private Sub Command1_Click()
    Dim vElem       As Variant

    For Each vElem In GetSheets("d:\temp\aaa.xlsx")
        Debug.Print vElem
    Next
End Sub

Private Function GetSheets(sFileName As String) As Collection
    Const adStateOpen As Long = 1
    Const adSchemaTables As Long = 20

    Set GetSheets = New Collection
    With CreateObject("ADODB.Connection")
        If LCase$(Right$(sFileName, 5)) = ".xlsx" Then
            .Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & sFileName & ";Extended Properties=Excel 12.0 Xml"
        Else
            .Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sFileName & ";Extended Properties=Excel 8.0"
        End If
        If .State <> adStateOpen Then
            Exit Function
        End If
        With .OpenSchema(adSchemaTables)
            Do While Not .EOF
                If LCase$(!TABLE_NAME) <> "database" Then
                    GetSheets.Add !TABLE_NAME.Value
                End If
                .MoveNext
            Loop
        End With
    End With
End Function 
```

# sql - SSIS 中是否存在仅记录子任务但不记录其父容器的问题？

> ID：14982991
> 
> 赞同：1
> 
> 时间：2013-02-20T15:01:53.250
> 
> 标签：sql, ssis, sql-server-2008-r2

SSIS 上的日志记录模式属性是否存在错误？

我知道任务应该从父容器继承日志记录模式，但是通过将容器设置为 logging mode =*`Disabled`*并将容器内的任务设置为 logging mode *`Enabled`*，我希望容器不会记录操作并且任务会记录。我会这样做以避免由于嵌套组件而导致日志表上的重复。

但这不会发生，如果我将容器上的日志记录模式设置为禁用，它似乎会在属于该容器的所有任务中禁用它，即使它们的日志记录模式设置为启用。

我发现这段文字几乎证实了我所期望的行为，但事实并非如此。

对这件事有什么想法吗？

> 可以在 SSIS 对象层次结构中的不同级别（包级别、容器级别和任务级别）配置日志记录。在确定哪个 SSIS 对象应捕获哪些事件属性时，您应该记住 SSIS 对象层次结构支持继承：任务可以使用专有的日志记录设置，也可以从父对象（容器或包）继承它们。如果应将 SSIS 对象层次结构的特定分支配置为记录相同的事件和相同的一组属性，则可以将整个分支放在一个容器中，以避免必须配置每个 SSIS 对象；在容器中配置日志记录后，只要启用了继承，它包含的其他对象将使用相同的设置。当特定 SSIS 对象的 LoggingMode 属性设置为 UseParentSetting（默认情况下）时，日志记录设置将从 SSIS 层次结构中的父级继承（如果对象放置在容器中，则为容器，或包本身如果对象存在于包的范围内）。当然，必须将父级配置为直接或通过继承进行日志记录。
> 
> 另一方面，要为特定任务配置不同于其父任务的日志记录，您必须将 LoggingMode 属性设置为 Enabled 并单独配置该任务。要防止任务记录其事件，请将 LoggingMode 属性设置为 Disabled。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:42:48.377

您需要在*`LoggingMode`*属性设置为的父容器中单独配置子任务**`Disabled`**。

### 在 SSIS 2012 中创建的示例包用于说明日志记录：

这是一个示例 SSIS 包，它说明了如何为您在问题中描述的场景配置日志记录。我已经配置了一个包，如下所述。

*   创建一个 SSIS 包，将其命名为`SO_14982991.dtsx`

*   如果您希望记录到 SQL Server 数据库，请为要配置记录的数据库创建*OLEDB 连接管理器。*此示例使用名为 的连接管理器**`OLEDB_PracticeDB`**。

*   将 a 拖放`Sequence Container`到“数据流”选项卡上。将其重命名为 simple *`Container`*。

*   将 a 拖放`Data Flow Task`到*Sequence Container*中。将其重命名为*`Task within container`*.

*   拖放另一个`Data Flow Task`并将其放在*Sequence Container*下方。将其重命名为*`Independent task`*.

*   *将序列容器*的*LoggingMode*属性从*UseParentSetting 更改*为。****`Disabled`****

***   将名为的*数据流任务*的*LoggingMode* 属性从*UseParentSetting 更改*为。**`Task within container`****`Enabled`****** 

 ***![样品包](../Images/099187ef75f6954c999d6b6ee6e77b42.png)

*   要启用日志记录，请单击 SSIS 菜单，然后单击日志记录...

执行以下步骤`Configure SSIS Log: SO_14982991`

*   **`SSIS log provider for SQL Server`**从*提供者类型*中选择

**   选中名称列下的框

    *   选择连接管理器*`OLEDB_PracticeDB`** 

 *![记录 1](../Images/5238e734540a1583947e11a12dd2ea8f.png)

执行以下操作以启用子操作和禁用父操作。

*   取消选中名为 的父容器的复选框`Container`。

*   选中名为 的子任务的复选框`Task within container`。

*   然后，您需要选择子任务，然后选中**`Providers and Logs`**选项卡上名称列下的复选框。

*   选择适当的事件以登录**`Details`**选项卡。

*   单击确定。

![记录 2](../Images/cca7026b4b0326dade76ff8e99ce577a.png)

在执行包之前，我对日志记录数据库执行以下查询以找到没有记录。

```
select id, event, source, starttime, endtime from dbo.sysssislog 
```

![执行前](../Images/460f6952537b476e0ba67d865ba3e508.png)

执行了包，然后再次运行查询，找到以下记录。

*   您可以注意到*`OnInformation`*子任务**`Task within container`**的事件已被捕获，但其父容器的事件并未被捕获。

![执行后](../Images/13e571058a79879268a62424b193fb7e.png)

希望这有助于回答您关于在禁用日志记录的父容器中仅记录子任务的问题。****

# objective-c - 程序重载？

> ID：14982998
> 
> 赞同：-1
> 
> 时间：2013-02-20T15:02:12.063
> 
> 标签：objective-c, cocoa, optimization

我有这个项目，它具有加载一本书不同章节的功能。（例如 loadChapter1）

我的想法是，当应用程序启动时，我将调用函数来加载每一章。但是当我完成程序时，会有大量的章节。它只会加载很多 NSStrings。

这会使程序初始化缓慢甚至使程序崩溃吗？

我的函数在 AppDelegate.h 中使用 ( `-(void)loadChapter1`) 声明。我在 AppDelegate.m 中调用它的方式是使用`[self loadChapter1]`.

如果这不是一个好方法，那么还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:24:09.813

你最好尝试一些东西，看看它是否运作良好，然后做出改变（并可能在这里提出问题），而不是一开始就问这样的问题。特别是对于性能问题，公认的观点是，在最初编写程序时，您不应该过多担心性能（内存和 CPU 使用），而应该在程序运行后根据需要进行性能优化。

也就是说，我的第一种方法是根据要求加载每一章。因此，不要在每次应用启动时都加载书中的所有章节。相反，当用户将页面转到该章节或在目录中选择它（或适用于您的应用程序的任何内容）时加载一个章节。这样，您就不会在实际使用之前浪费时间和内存来加载章节。