# StackOverflow 问答 13419000-13419999

# c# - 带有 x509 证书的 HttpClient 请求适用于调试，但在生产中失败（403 禁止）

> ID：13419002
> 
> 赞同：4
> 
> 时间：2012-11-16T14:53:51.940
> 
> 标签：c#, x509certificate2, dotnet-httpclient

我有一个黑盒服务，我必须使用返回 xml 的简单休息命令来调用它。

他们向我们颁发了一个证书，该证书必须在 IE 中运行并安装到 IE 的证书部分。根据他们的指示，我将它与整个链一起导出为带有密码的 pfx。

在证书直接颁发到的机器上，代码中一切正常

```
 var certHandler = new WebRequestHandler();
        certHandler.ClientCertificateOptions = ClientCertificateOption.Manual;            
        certHandler.UseDefaultCredentials = false;

        var certificate = new X509Certificate2(Properties.Resources.SigningCert, "password", X509KeyStorageFlags.DefaultKeySet | X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet); //Must be renewed and replaced every year.
        certHandler.ClientCertificates.Add(certificate);            

        //Execute the command            
        var client = new HttpClient(certHandler);
        string result;
        try
        {
            result = await client.GetStringAsync(url);

            System.Diagnostics.Debug.WriteLine(result);
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

（我已将证书存储在资源中，但它可以正常加载，并且从文件加载它在开发人员机器上也可以正常工作。）我还将它导入服务器上的 IE 以防万一。显然，这可能是在错误的证书存储下，但我无法弄清楚如何在全局范围内加载它。我可以告诉你，相同的 REST GET 在服务器上的 IE 中工作，就像在开发人员机器上一样。它只是在代码中失败。）

在生产中，同样的代码会抛出 403 禁止。

生产（实际上是一个测试版服务器）实际上与开发机器位于相同的 nat 后面，因此他们看到相同的 IP 通过等。

任何想法为什么它会在服务器上而不是在开发人员框中失败？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-17T21:33:16.740

您应该`X509KeyStorageFlags`根据您的应用程序运行的帐户使用。如果是

1) 在您应该使用的常规 Windows 用户帐户下运行的应用程序

```
X509Certificate2(Properties.Resources.SigningCert, "password", X509KeyStorageFlags.UserKeySet); 
```

2）LocalSystem下的Windows Service，NetworkService下的IIS或内置Windows Account下的其他服务，你应该使用

```
X509Certificate2(Properties.Resources.SigningCert, "password", X509KeyStorageFlags.MachineKeySet); 
```

基本上，您不应该`X509KeyStorageFlags.PersistKeySet`在您的情况下使用 - 您每次都从 pfx 格式导入证书。

证书的私钥根据标志存储在容器中。因此，如果您使用错误的标志，您可能无法访问它。 `DefaultKeySet`不仅仅是`UserKeySet`( [msdn](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509keystorageflags(v=vs.110).aspx) ) 的别名 - 所以在每种情况下都选择适当的标志。

这些文章也可能会有所帮助：

1.  [密钥存储和检索](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204778(v=vs.85).aspx)
2.  [在 .NET 中使用 X.509 证书的八个技巧](http://paulstovell.com/blog/x509certificate2)
3.  [证书的工作原理](http://technet.microsoft.com/en-us/library/cc776447(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:48:45.990

我发现无论出于何种原因，它都不允许您正确授予密钥权限。为了解决这个问题，我去了：

X:\Users\All Users\Microsoft\Crypto\RSA\MachineKeys

在资源管理器中找到了有问题的密钥（我使用了按日期推断，但指纹在那里，所以你应该能够匹配它。）然后右键单击，接管文件权限，然后手动设置权限。

然后我的代码才开始工作。

然而有趣的是，在我需要将其部署到的另一台机器上，该文件在 machinekeys 目录中不存在，所以我不知道我将在那里做什么，但是......

# jsf-2 - JSF 2：当需要下拉菜单并且默认条目为空时，无法在下拉元素中选择默认条目

> ID：13419003
> 
> 赞同：2
> 
> 时间：2012-11-16T14:53:51.987
> 
> 标签：jsf-2, primefaces

我有以下 JSF 2 代码：

```
 <p:selectOneMenu id="dropdown" value="#{data.selection}" required="true" converter="selectOneMenuConverter">
            <f:selectItem itemLabel="Select one..." itemValue="" noSelectionOption="true" />
            <f:selectItems value="#{data.entries}" var="entry" itemLabel="#{entry.name}" itemValue="#{entry}" />
            <p:ajax update="display" event="change" />
    </p:selectOneMenu>

    <h:panelGroup id="display">
            <h:outputText value="#{data.selection}" />
    </h:panelGroup> 
```

当我从下拉列表中选择一个值时，一切都按预期工作。当用户通过选择“Select One”来“取消选择”一个条目时，JSF 抱怨这是不可能的，因为需要 selectonemenu。

问题出在 p:ajax 进行部分提交以触发验证。Immediate=true 也不起作用，因为如果立即发生在输入字段上（如 selectonemenu 是），则会执行验证。只有当用户按下页面底部的“继续”按钮时才会进行验证（代码中未显示）

此外，给定的转换器将字符串转换为对象，并且对于默认值，它返回 null（这也是域内“无选择”的预期值）。

所以我的问题是我必须做些什么来完成我的案子。对我来说，这是一个标准案例，我无法想象没有解决方案。

有任何想法吗？

最好的问候，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:11:05.607

> *只有当用户按下页面底部的“继续”按钮时才会进行验证（代码中未显示）*

然后只需告诉下拉列表的`required`属性就可以做到这一点，而不是硬编码`true`.

```
<h:form id="form">
    <p:selectOneMenu ... required="#{not empty param['form:go']}">
        ...
    </p:selectOneMenu>

    ...

    <p:commandButton id="go" ... />
</h:form> 
```

仅当表单提交实际上已由具有特定示例中的客户端 ID 的提交按钮`#{not empty param['form:go']}`进行时才进行评估。如果您也不喜欢硬编码客户端 ID，请按如下方式引用它：`true``form:go`

```
<h:form>
    <p:selectOneMenu ... required="#{not empty param[go.clientId]}">
        ...
    </p:selectOneMenu>

    ...

    <p:commandButton binding="#{go}" ... />
</h:form> 
```

# scala - 使用 Specs2 验收样式测试强制执行顺序

> ID：13419004
> 
> 赞同：1
> 
> 时间：2012-11-16T14:53:55.610
> 
> 标签：scala, specs2

我试图让我的测试通过 Specs2 验收样式测试按顺序执行，但我没有任何运气。

```
 override def is = {     
    "Template Project REST Specification" ^
      p ^
      "The server should" ^
      "Respond with greeting on root path" ! serverRunning ^
      p ^
      "For CLIENT json objects" ^
      "Return an empty list if there are no entities" ! getEmptyClientList ^
      "Create a new entity" ! createClient ^
      "Return a non-empty list if there some entities" ! getNonEmptyClientList ^
      "Read existing" ! todo ^
      "Update existing" ! todo ^
      "Delete existing" ! todo ^
      "Handle missing fields" ! todo ^
      "Handle invalid fields" ! todo ^
      "Return error if the entity does not exist" ! todo ^
      end
  } 
```

运行测试时，测试会在测试有机会执行`createClient`之前不断创建新的客户端元素。`getEmptyClientList`

`getEmptyClientList`如果我在测试之前添加一整堆`createClient`测试，那么除了最后一个之外的所有测试都将在调用`createClient`. 但是`createClient`总是会击败最后一个`getEmptyClientList`电话，这导致它失败。

如何强制它按顺序执行？使用 Specs2 单元测试风格，我只是`sequential`在测试之前添加了关键字，一切都会好起来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:18:31.737

在验收规范中，`sequential`可以在规范的开头添加参数，如下所示：

```
def is = sequential ^
  "Template Project REST Specification" ^
   p ^
   "The server should" ^
   "Respond with greeting on root path" ! serverRunning ^
   p ^
   "For CLIENT json objects" ^
   "Return an empty list if there are no entities" ! getEmptyClientList ^
   "Create a new entity" ! createClient ^
   "Return a non-empty list if there some entities" ! getNonEmptyClientList ^
   "Read existing" ! todo ^
   "Update existing" ! todo ^
   "Delete existing" ! todo ^
   "Handle missing fields" ! todo ^
   "Handle invalid fields" ! todo ^
   "Return error if the entity does not exist" ! todo ^
   end 
```

请注意，您不需要`override`该`is`方法，也不需要花括号。

# php - 如何在 PHP 中的 http 请求之间存储不可序列化的对象？

> ID：13419009
> 
> 赞同：0
> 
> 时间：2012-11-16T14:54:13.310
> 
> 标签：php, listener, daemon

在我的 Web 应用程序中，我使用[Amazon ECS PHP 类](https://github.com/Exeu/Amazon-ECS-PHP-Library/)来获取有关 Amazon 产品的数据。目前我为每个页面请求创建新对象。初始化对象大约需要 1000 毫秒，从亚马逊获取数据大约需要 100 毫秒。

我的问题是如何避免为每个用户请求创建对象？我不确定它在 PHP 中是否可行，因此请随时提出替代解决方案。

我想我需要创建一个小程序，它将在服务器上运行并侦听来自 PHP 的请求，从 Amazon 获取数据并将其返回给 PHP。请建议我是否正确并告诉我我应该看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:06:17.373

这里有一些提示可以帮助您：

*   您正在使用的课程有意添加 1 秒延迟以避免达到 Amazon 油门限制 ( `AmazonECS::requestDelay($enable = null)`)。
*   您不应该序列化 AmazonECS 的实例，因为它只是 Amazon ECS API 的一个接口，并不包含您想要的数据。
*   您应该在用户会话中缓存您在 AmazonECS 实例上执行的请求的结果。

这是一个粗略的示例（我之前没有使用过 AmazonECS，您也没有提供任何代码）：

```
session_start(); // remove this if you are already doing it somewhere else

$amazon = new AmazonECS($accessKey, $secretKey, $country, $associateTag);

$myQuery = 'my query';

if (isset($_SESSION['amazon_ecs_cache'][$myQuery]) {
     // use the cached data in the session
     $myData = $_SESSION['amazon_ecs_cache'][$myQuery];
} else {
     // get the data from amazon
     $myData = $amazon->search($myQuery);
     // cache it so we don't have to get it again next time
     $_SESSION['amazon_ecs_cache'][$myQuery] = $myData;
}

// do fun stuff with $myData here
var_dump($myData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:56:11.683

如果您要序列化的对象*是*不可序列化的，只需创建一个可序列化并带有您真正感兴趣的值的对象。

# javascript - 在 webkit-transform 之后键入时，在 textarea 中自动滚动到底部不起作用

> ID：13419012
> 
> 赞同：1
> 
> 时间：2012-11-16T14:54:37.303
> 
> 标签：javascript, css, webkit, iscroll4, iscroll

我在 phonegap 应用程序中使用 iScroll.js。当我在文本区域中输入消息时，webkit 中的文本不会自动滚动到底部。当我禁用`-webkit-transform`滚动 div 时，自动滚动工作。

我尝试设置`-webkit-transform: none !important`文本区域，但没有给出任何结果。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:48:20.677

这是 webkit 错误。作为一种解决方法，您可以在 textarea 处于焦点时关闭`-webkit-transform`iScroll 元素的子元素的样式并立即设置`scrollTop`值以避免滚动内容的跳跃。然后在模糊上返回原始样式。处理此问题的基本代码如下所示：

```
// find iScroll block and its child
var scrollBlock = document.getElementById('wrapper');
var iscrollBox = scrollBlock.children[0];
var lastOffset = 0;

// remove translate styles on focus
var focusHandler = function() {
    var styleAttr = getComputedStyle(iscrollBox)['-webkit-transform'];
    var scrolledOffset = new WebKitCSSMatrix(styleAttr).f;

    iscrollBox.style.webkitTransform = '';
    scrollBlock.scrollTop = -scrolledOffset;
    lastOffset = scrolledOffset;
};
var blurHandler = function() {
    scrollBlock.scrollTop = 0;
    iscrollBox.style.webkitTransform = 'translate(0px, '+lastOffset+'px)';
};

// attach focus/blur handlers
var textareas = scrollBlock.querySelectorAll('textarea');
for(var i = 0, l = textareas.length; i < l; i++) {
    textareas[i].onfocus = focusHandler;
    textareas[i].onblur = blurHandler;
} 
```

如果你不喜欢这样的 JavaScript 修复 - 考虑使用 CSS3 属性`webkit-overflow-scrolling: touch`而不是 iScroll。它也有一些陷阱，但 textarea 没有这样的问题。

# twitter-bootstrap - 未定义属性“TbMenu.itemCssClass”

> ID：13419013
> 
> 赞同：2
> 
> 时间：2012-11-16T14:54:37.073
> 
> 标签：twitter-bootstrap, yii, yii-extensions

使用 TbMenu 小部件时，最新版本的[引导扩展程序出现此错误](http://www.yiiframework.com/extension/bootstrap/)

```
Property "TbMenu.itemCssClass" is not defined

if ($this->itemCssClass !== null)
  $classes[] = $this->itemCssClass; 
```

此外，我没有在本地机器上收到错误，只有在实时服务器上。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:15:40.497

**itemCssClass**属性继承自自 YII **v1.1.9添加的****zii.widgets.CMenu**类，因此对于旧版本的 YII 不可用。作为此问题的快速修复，您可以将 {extensions}/bootstrap/widgets/TbBaseMenu.php 文件中的第 66 行更改为：

 **```
if (isset($this->itemCssClass) && $this->itemCssClass !== null) 
```

但强烈建议将您的 YII 安装升级到最新的稳定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:06:12.507

我会检查你是否安装了 yii-bootstrap。该属性绝对应该存在于该类上。

尝试在实时服务器上查看该文件，它应该（至少在我的）第 36 行`{extensions}/bootstrap/widgets/TBMenu`

如果不是，您可能想进一步调试一下为什么您的开发机器与 Live 不同步。**

# javascript - 我可以使用 setTimeout 代替点击处理程序吗？

> ID：13419015
> 
> 赞同：2
> 
> 时间：2012-11-16T14:54:39.237
> 
> 标签：javascript

这是我的问题。我正在做一个简单的模态项目。从代码中可以看出，当用户点击演示链接或按钮时，它会调用模态屏幕。

但是，我不想点击，而是想在一段时间后自动调用该模式屏幕，比如 20 秒后。那么我真的可以应用`setTimeout`在那个 JavaScript 代码中吗？

HTML

```
<div id='content'>
<div id='basic-modal'>

<input type='button' name='basic' value='DEMO' class='basic'/> 
<a href='#' class='basic'>DEMO</a>

</div>

<!-- modal content -->
<div id="basic-modal-content">
<a href='asdasdasd'><img src="https:/asdasd.jpg" alt="asdasd"></a>

</div>
<div style='display:none'>

</div>
</div>
</div> 
```

JS代码：

```
jQuery(function ($) {
    // Load dialog on page load
    //$('#basic-modal-content').modal();

    // Load dialog on click
    $('#basic-modal .basic').click(function (e) {
        $('#basic-modal-content').modal();

        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:57:18.287

这应该可以解决问题：

```
$(function(){ // Make sure jQuery is ready before delaying the modal function
    window.setTimeout(function(){
        $('#basic-modal-content').modal();
    }, (20 * 1000)); // Executes function in 20 seconds
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:59:07.830

您还想拥有点击事件吗？因此，您需要在 20 秒后或有人点击时打开它。无论哪种方式，您都必须取消超时。

这是JS代码。

```
var timeout;
var openModal = function() {
  $('#basic-modal-content').modal();
  clearTimeout(timeout);
};

var delay = 20000; //20 seconds
timeout = setTimeout(function() {
  openModal();
},dealy);

$('#basic-modal .basic').click(function(e) {
  openModal();
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T14:58:22.947

也许试试这个？

```
$(document).ready(function() {
    $('#basic-modal-content').delay(20000).modal();
}); 
```

# arm - Valgrind for ARM 和 Linaro 工具链需要 libc6-dbg 和 Buildroot

> ID：13419020
> 
> 赞同：7
> 
> 时间：2012-11-16T14:54:57.927
> 
> 标签：arm, valgrind, cross-compiling, glibc, buildroot

我在我的 Ubuntu 10.04 主机（我正在使用 Buildroot）上使用以下命令和 Linaro 工具链为 ARM 交叉编译 Valgrind（http://valgrind.org/downloads/valgrind-3.8.1.tar.bz2）：

```
export PATH=$PATH:/home/user/toolchain/linaro/bin
CC=arm-linux-gnueabi-gcc CFLAGS=-I/home/user/toolchain/linaro/arm-linux-gnueabi/libc/usr/include LDFLAGS=-L/home/user/toolchain/linaro/arm-linux-gnueabi/libc/usr/lib ./configure --prefix=/opt/valgrind --host=armv7-none-linux-gnueabi --target=arm-none-linux-gnueabi --build=i386-ubuntu-linux
make
sudo make install 
```

当我将二进制文件复制到我的 ARM 目标板时，我收到以下错误：

```
==413== Memcheck, a memory error detector
==413== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==413== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==413== Command: /home/user/testApp
==413== 

valgrind:  Fatal error at startup: a function redirection
valgrind:  which is mandatory for this platform-tool combination
valgrind:  cannot be set up.  Details of the redirection are:
valgrind:  
valgrind:  A must-be-redirected function
valgrind:  whose name matches the pattern:      memcpy
valgrind:  in an object with soname matching:   ld-linux.so.3
valgrind:  was not found whilst processing
valgrind:  symbols from the object with soname: ld-linux.so.3
valgrind:  
valgrind:  Possible fixes: (1, short term): install glibc's debuginfo
valgrind:  package on this machine.  (2, longer term): ask the packagers
valgrind:  for your Linux distribution to please in future ship a non-
valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)
valgrind:  that exports the above-named function using the standard
valgrind:  calling conventions for this platform.  The package you need
valgrind:  to install for fix (1) is called
valgrind:  
valgrind:    On Debian, Ubuntu:                 libc6-dbg
valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo
valgrind:  
valgrind:  Cannot continue -- exiting now.  Sorry. 
```

我的 Linaro 工具链版本是：

```
gcc version 4.7.1 20120402 (prerelease) (crosstool-NG linaro-1.13.1-2012.04-20120426 - Linaro GCC 2012.04) 
```

我在谷歌上搜索过，但找不到解决方案。如何让 Valgrind 在我的目标板上工作？我使用 Buildroot 来构建我的系统，但 libc6-dbg 不是我可以在构建系统中找到的包。我需要从工具链 sysroot 复制一些目录或文件吗？谢谢 -

我用来运行 Valgrind 的命令如下所示：

```
# which valgrind
/usr/bin/valgrind
# valgrind /home/user/MyQtApp
==216== Memcheck, a memory error detector
...
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:52:49.543

所以你正在使用 Buildroot 或 OpenEmbedded 来构建你的 Libc？

如果它是 OE，那么您应该在本地存储库 (TMPDIR/deploy/ipk) 中有可用的 libc6-dbg 包。或者将“dbg-pkgs”添加到 IMAGE_FEATURES 中并重建您的图像。

Glibc 2.12 显示您使用的是旧版本的 OpenEmbedded。但即使这样也应该给你 libc6-dbg 包。

无法帮助 Buildroot，因为从未使用过它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-07T09:28:40.353

我一直面临同样的问题，并找到了解决方案。因此，如果有人也面临它，这就是我使事情发生的方式： Valgrind 无法调试应用程序的原因是 C 库中缺少符号。在使用外部工具链 (Linaro) 构建 buildroot 时，我们可以在 Linaro 树中找到未剥离的 C 库。在 arm-linux-gnueabihf\libc\lib\arm-linux-gnueabihf 文件夹中，您将找到未剥离的库。只需复制目标上的非剥离文件..就是这样。希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:51:38.500

您需要在目标中未剥离的库。

2种方法来做到这一点。

在您的 buildroot 配置中：

1- 制作一个未剥离的系统：BR2_STRIP_none=y 它将制作一个非常大的目标图像

2- 仅取消剥离 librairie 文件夹。BR2_STRIP_EXCLUDE_DIRS="lib"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:10:14.773

对不起，我给你一个我自己没有使用的包的链接，但希望它会起作用：

[https://launchpad.net/ubuntu-leb/oneiric/armel/libc6-dbg](https://launchpad.net/ubuntu-leb/oneiric/armel/libc6-dbg)

# regex - Linux 文件权限的正则表达式（数字符号）

> ID：13419023
> 
> 赞同：7
> 
> 时间：2012-11-16T14:55:08.067
> 
> 标签：regex, linux, bash, grep

我一生都无法为此找出正确的正则表达式。

我正在寻找的是一个正则表达式来匹配 Linux 文件权限的有效数字表示（例如，740 表示全读，777 表示全全）。到目前为止，我已经尝试了以下方法：

```
strtotest=740
echo "$strtotest" | grep -q "[(0|1|2|3|4|5|7){3}]"
if [ $? -eq 0 ]; then
    echo "found it"
fi 
```

上面的问题是正则表达式匹配任何包含`1-5`或`7`其中的内容，而不管任何其他字符。例如，如果`strtotest`要更改为`709`，则条件为真。我也尝试过`[0|1|2|3|4|5|7{3}]`，`[(0|1|2|3|4|5|7{3})]`但这些都不起作用。

我使用的正则表达式是错误的，还是我错过了一些必须处理的东西`grep`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T15:00:40.883

你想要的可能是

```
grep -Eq "[0-7]{3}" 
```

编辑：如果您使用它来查找具有某些权限的文件，您应该查看[`find`](http://www.linuxmanpages.com/man1/find.1.php)( `-perm`) 或[`stat`](http://www.linuxmanpages.com/man1/stat.1.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T14:59:44.597

适用于您的最简单和最明显的正则表达式是：

```
grep -q '(0|1|2|3|4|5|7)(0|1|2|3|4|5|7)(0|1|2|3|4|5|7)' 
```

这是一个优化的版本：

```
grep -Eq '(0|1|2|3|4|5|7){3}' 
```

由于 6 也可以表示权限，我们可以进一步优化它：

```
grep -Eq '[0-7]{3}' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T14:59:26.233

1.  您的正则表达式非常损坏：`[` `]`定义一个范围，其中的所有字符都在允许的集合中。
2.  grep 有一些额外的引用规则，可能需要额外的`\`.
3.  grep 在每一行中搜索您的正则表达式 - 如果您只想匹配行首，则需要`^`作为正则表达式中的第一个字符，如果您想匹配行尾，则需要`$`在行尾正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T15:57:05.897

仅供参考，您可以在 Bash 中使用 shell 模式

```
if [[ $strtotest == [0-7][0-7][0-7] ]]; then
    echo "Found it"
fi 
```

# rspec - rspec 给出错误 Moped::Errors::ConnectionFailure

> ID：13419025
> 
> 赞同：1
> 
> 时间：2012-11-16T14:55:14.430
> 
> 标签：rspec, mongoid, moped

当我运行测试 rspec 时，出现错误

```
1) Nimba::Storages DropboxStorages returns http success
 Failure/Error: Unable to find matching line from backtrace
 Moped::Errors::ConnectionFailure:
   Could not connect to a primary node for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

我不知道为什么会出现这个错误？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:13:33.093

通过向 spec/spec_helper.rb 添加一行来解决问题

```
DatabaseCleaner.orm = "mongoid" 
```

# google-maps - 我可以在我网站的覆盖谷歌地图底部移动谷歌版权吗？

> ID：13419027
> 
> 赞同：3
> 
> 时间：2012-11-16T14:55:18.507
> 
> 标签：google-maps, google-maps-api-3

我正在为谷歌地图绘制地图。我在 Google Map API v3 上使用它。

如果我将 Google 徽标和使用条款链接移到我网站的页面底部，我会使用 Google Map API v3，如附图所示吗？

我阅读了谷歌地图的使用条款，但我找不到任何关于覆盖地图 API 的版权信息。

我的叠加谷歌图像：http: [//img854.imageshack.us/img854/5595/overlayedgooglemap.png](http://img854.imageshack.us/img854/5595/overlayedgooglemap.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:11:36.817

请阅读 Google Maps API 使用条款，第 9.4、10.1.1.(f) 节

[https://developers.google.com/maps/terms](https://developers.google.com/maps/terms)

# php - 如何在 PHP 中生成字体子集？

> ID：13419029
> 
> 赞同：0
> 
> 时间：2012-11-16T14:55:18.930
> 
> 标签：php, flash, truetype

我有一个可供中国用户使用的 Flash 和 PHP 应用程序。为了让应用程序显示所有必需的字符，目前我不得不在我的 SWF 中嵌入一个巨大的中文字体文件（使 SWF 超过 8MB）。

字体文件有数万个字符，但我实际上只使用了几百个。我使用的实际字符都可以从 PHP 中、各种 XML、JSON 和数据库源中获得。

PHP 中有没有办法生成仅包含我实际使用的字符的中文 TTF 子集？正在使用的字符集会定期更改，因此遗憾的是手动解决方案不实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:45:58.600

尝试这个：

[http://www.4real.gr/technical-documents-ttf-subset.html](http://www.4real.gr/technical-documents-ttf-subset.html)

尝试页面底部引用的 TTFv2.zip。

# ios - 带有包含 UITableViews 的单元格的 UICollectionView

> ID：13419031
> 
> 赞同：0
> 
> 时间：2012-11-16T14:55:29.327
> 
> 标签：ios, uitableview, uicollectionview

在 UICollectionView 的单元格中使用 UITableViews 是否有任何限制？

我试图找到一些这样做的示例项目，但没有任何运气

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:24:16.623

这是您需要注意的一个问题。如果您的集合视图单元格包含一个表格视图，并且您点击该单元格（而不是表格视图），那么默认情况下，集合视图会将其自身设置为突出显示（对于标准单元格而言，它什么也不做）。但是，在此过程中，它还将表格中的每个单元格设置为突出显示，这很糟糕，但有点意料之中。如果您考虑一下，表格单元格会做同样的事情 - 所有单元格的子视图，如果它们响应`setHiglighted`，都会将该消息传递给它们。这就是单元格中的标签文本在突出显示时如何改变颜色。

您可以通过防止在集合视图的委托中突出显示单元格来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:41:16.167

没有我知道的硬技术限制。`UITableView`s 中`UITableView`的 s 是可能的，并且`UICollectionView`从编程逻辑的角度来看，s 非常相似。

但是，在集合视图或表格视图中滚动可能会对性能产生巨大影响。

第一的。您需要仔细编码以避免任何肤浅的调用`tableView:cellForRowAtIndexPath:`和`collectionView:cellForItemAtIndexPath:`方法。如果您在开始冒险之前尝试在集合视图或表格视图中使用可重用单元格，请确保您彻底了解这些调用背后的逻辑。

第二。如果两个组件都是可滚动的，则层次结构中两个视图控制器的 panGestureRecognizers 存在并发问题，您必须自己解决。

搜索`UITableView`inside的实现，`UIScrollView`反之亦然，以了解可能出现的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:35:09.097

> 我试图找到一些这样做的示例项目

我不认为你需要一个示例项目——去做吧。

`-collectionView:cellForItemAtIndexPath:`应该返回一个`UICollectionViewCell`. UITableView 不继承自该类，因此要在集合视图中使用表，您需要创建一个包含 UITableView 的 UICollectionViewCell 子类。除了可能的性能问题之外，我认为这样做没有问题。如果您一次只能在集合视图中看到一两个单元格，那可能不是问题。不过，我会避免尝试用十几个小桌子做网格之类的事情。试一试，看看效果如何。

# visual-studio-2010 - 与 windows 7 相比，xp 主题的视觉风格不同？

> ID：13419039
> 
> 赞同：1
> 
> 时间：2012-11-16T14:56:08.180
> 
> 标签：visual-studio-2010, windows-7, windows-xp, visual-styles

我在 Visual Studio 2010 中开发了一个应用程序（在 x86 win7 机器上），当在 Windows 7 机器上运行时，GUI 显示为设计的。但是，在 xp 上（使用任何主题）时，它会失去所有显示功能！颜色错误，按钮更改等，甚至更改字体颜色。

无论操作系统如何，我都可以做些什么来保持外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:52:00.020

检查用户拥有的主题，如果不是 Windows 7 主题，则更改显示。

# .net - 有没有办法判断当前屏幕是否支持触控？

> ID：13419043
> 
> 赞同：5
> 
> 时间：2012-11-16T14:56:30.330
> 
> 标签：.net, wpf, c#-4.0, touchscreen

> **可能重复：**
> [是否可以让我的 c# wpf 程序知道用户是否有触摸屏？](https://stackoverflow.com/questions/5673556/is-it-possible-to-let-my-c-sharp-wpf-program-know-if-the-user-has-a-touchscreen)

如何判断我正在使用的设备是否有触摸屏？我在想类似的事情：

```
SystemParameters.IsPenWindows 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:51:04.680

```
foreach (TabletDevice tabletDevice in Tablet.TabletDevices)
        {

            if(tabletDevice.Type == TabletDeviceType.Touch)
                return true;
        } 
```

你也可以参考这个： [Is it possible to let my c# wpf program know if the user has a touchscreen or not?](https://stackoverflow.com/questions/5673556/is-it-possible-to-let-my-c-sharp-wpf-program-know-if-the-user-has-a-touchscreen)

# java - Eclipse：本地调试（非远程）“无法连接到 VM”

> ID：13419044
> 
> 赞同：0
> 
> 时间：2012-11-16T14:56:31.480
> 
> 标签：java, eclipse

我正在从 IntelliJ Idea 切换到 Eclipse（是的，我知道......长篇大论）。似乎我只能调试一个应用程序一次。第一次之后，我尝试再次调试，我收到错误：

```
Launching <app> has encountered a problem
Cannot connect to VM

Address already in use: JVM_Bind 
```

![在此处输入图像描述](../Images/ad3fa75e4e03bfc909e0eb134f96a61a.png)

如果我关闭 Eclipse 并重新启动，我可以再次调试应用程序一次。这不影响跑步。

我有一种感觉，我的应用程序中的一个线程没有关闭，但不知道测试它和/或完全终止进程而无需每次都关闭 Eclipse 的好方法。

Eclipse 版本：4.2.1 构建 ID：M20120914-1800（Juno？）

JRE：1.6.0_32-b05

注意：这是作为“Java 应用程序”而不是“远程 Java 应用程序”运行的。

更新：更新到 JDK 1.7x，现在似乎可以工作了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:01:10.313

JVM_Bind 绑定到您计算机上已在使用的套接字。

我记得同时使用 Skype 或 Outlook 时的这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:02:59.857

您调试的应用程序尚未关闭。

转到调试视图并终止应用程序手册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:33:04.583

升级到 JDK 7 似乎可以解决这个问题......

# knockout.js - 具有可观察子类的淘汰赛

> ID：13419050
> 
> 赞同：2
> 
> 时间：2012-11-16T14:56:50.963
> 
> 标签：knockout.js

我有一个包含子类的 ViewModel，我希望在修改子类中的一个属性时收到通知，如下所示：

```
var Person = function(){
  this.name = ko.observable("john doe");
  this.age = ko.observable(45);
};

var ViewModel = function() {
  this.Owner = ko.observable(new Person());

  this.Owner().subscribe(function(){
     alert("Someone updated owner");
  });    
};

var vm = new ViewModel();
vm.Owner().age(34);
​ 
```

但是上面的代码不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:04:02.293

你可以试试这个：

```
var ViewModel = function() {
    var self = this;
    self.Owner = ko.observable(new Person());

    self.test = ko.computed(function(){
        ko.toJS(self.Owner);
    });

    self.test.subscribe(function() {
        alert("Someone updated owner");
    });
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/hpKZj/](http://jsfiddle.net/vyshniakov/hpKZj/)

如果你想实现类似`isDirty`标志的东西，请阅读以下文章：[http ://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

# cocoa - ARC 强化我的参考对象 (ODQuery)？

> ID：13419051
> 
> 赞同：4
> 
> 时间：2012-11-16T14:56:51.057
> 
> 标签：cocoa, automatic-ref-counting, directoryservices

我对可可有点陌生，在这里遵循了苹果的例子： [Open Directory 编程指南](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/Open_Directory/workingWithRecords/workingWithRecords.html)

在示例中，他们使用保留来获取 ODQuery 对象，这不再允许，我找不到任何其他方式告诉编译器不要理会我的引用。据我了解 alloc 也不这样做。

当 ODQuery 传递给 NSRunLoop 时，引用似乎丢失了，而 NSRunLoop 又应该将其传递给 query:foundResults:error 。

这是代码（它应该寻找与我的计算机同名的组）：

```
NSString *computer = [[NSHost currentHost] localizedName];
NSError *err;

ODQuery *aQuery = [[ODQuery alloc] initWithNode:adNode
                                 forRecordTypes:kODRecordTypeGroups
                                      attribute:kODAttributeTypeRecordName
                                      matchType:kODMatchBeginsWith
                                    queryValues:computer
                               returnAttributes:kODAttributeTypeStandardOnly
                                 maximumResults:0
                                          error:&err];

[aQuery setDelegate:self];
[aQuery scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

我将 adNode 和 session 分配为私有变量并在 init 方法中分配它们：

```
NSError *err;
NSString *nodeName = @"/Active Directory/GU/gu.gu.se";
theSession = [ODSession defaultSession];
adNode = [ODNode nodeWithSession:theSession name:nodeName error:&err];
NSLog(@"Error from initWorker: %@", [err localizedDescription]); 
```

我通过覆盖方法 query:foundResults:error 实现了协议 ODQueryDelegate 。当它从 NSRunLoop 被调用时，程序由于指针错误而崩溃。

```
- (void)query:(ODQuery *)inQuery foundResults:(NSArray *)inResults error:(NSError *)inError 
```

希望有人可以提供帮助。

# paypal - 支付宝oAuth2.0

> ID：13419052
> 
> 赞同：2
> 
> 时间：2012-11-16T14:57:02.590
> 
> 标签：paypal, oauth-2.0

*   如何使用 PayPal 提出的 oAuth2.0 方法检索访问令牌？

*   为什么在登录过程初始化（又名开始）时必须调用 2（两个）URL，这究竟是如何完成的？

*   还有沙箱的问题：假设一个人有访问令牌，这个令牌可以用于沙箱和实时环境吗？

*   访问令牌对各种 API 的实际适用性是什么？

* * *

我用作参考： [https ://www.x.com/developers/paypal/documentation-tools/quick-start-guides/oauth-integration-paypal-access-getting-full](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/oauth-integration-paypal-access-getting-full)

我遇到了以下两个我无法合理化的陈述：

1）“当用户单击按钮时，通过调用以下 URL（为便于阅读而包装）来启动登录过程：”

*   调用 URL：identity.x.com/xidentity/resources/authorize

2) 及以下：“例如，调用登录功能的 URL 可能类似于以下内容（为便于阅读而包装）：”

*   调用 URL：identity.x.com/idaas/resources/authorize

* * *

为清楚起见：

*   申请已注册
*   使用 jQuery（请求已正确路由）
*   我使用[https://identity.x.com/xidentity/resources/authorize](https://identity.x.com/xidentity/resources/authorize)运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T07:13:38.130

让我看看能不能回答你的问题。首先，当您在文本和示例中提到两个 URL 时：identity.x.com/xidentity/resources/authorize 和 identity.x.com/idaas/resources/authorize 我想指出示例中的第二个 URL (identity.x.com/idaas/resources/authorize) 是一个错字，我将提交技术作家的请求，以对文档进行调整（我对那里的混乱表示歉意）。话虽如此，让我谈谈你的具体问题。

**如何使用 PayPal 提出的 oAuth2.0 方法检索访问令牌？**

首先，访问[https://devportal.x.com/](https://devportal.x.com/)并注册一个 PayPal Access 应用程序，以获取您在 PayPal Access 过程中需要的密钥和应用程序 ID。

OAuth 2 流程基本上包含三个步骤：

1.  您将用户重定向到您提到的授权 URL 以登录 PayPal（将适当的参数附加到 URL）。有关该过程，请参阅[https://github.com/paypal/paypal-access/blob/master/oauth2-php-ppaccess/index.php](https://github.com/paypal/paypal-access/blob/master/oauth2-php-ppaccess/index.php)。
2.  当用户登录时，他们将被重定向到您在第 1 步中提供的 redirect_url。在重定向后的 URL 中，URL 查询字符串中将提供一个代码参数。接受它并向 PayPal 发送 HTTP POST 请求以交换访问令牌的代码（请参阅[https://github.com/paypal/paypal-access/blob/master/oauth2-php-ppaccess/complete.php](https://github.com/paypal/paypal-access/blob/master/oauth2-php-ppaccess/complete.php)行 4- 11)
3.  获得访问令牌后，您可以使用作为 URL 参数提供的访问令牌向 PayPal 配置文件端点发出 HTTP GET 请求，以获取用户的配置文件 ( [https://github.com/paypal/paypal-access/ blob/master/oauth2-php-ppaccess/complete.php](https://github.com/paypal/paypal-access/blob/master/oauth2-php-ppaccess/complete.php)第 13-19 行）。

综上所述，我实际上建议您使用 OpenID Connect 而不是 OAuth 2。OpenID Connect 具有允许用户注销的端点，它将是 PayPal Access 团队最支持的协议。以下是两个示例，将向您展示如何构建它们：

*   [https://github.com/paypal/paypal-access/tree/master/openid-connect-php-ppaccess](https://github.com/paypal/paypal-access/tree/master/openid-connect-php-ppaccess)
*   [https://github.com/paypal/paypal-access/tree/master/openid-connect-python-ppaccess](https://github.com/paypal/paypal-access/tree/master/openid-connect-python-ppaccess)

**为什么在登录过程初始化（又名开始）时必须调用 2（两个）URL，这究竟是如何完成的？** 关于这两者，请参见上文。

**还有沙箱的问题：假设一个人有访问令牌，这个令牌可以用于沙箱和实时环境吗？** 是的，相同的令牌可用于沙盒和生产。我应该在这里指出，目前您不能使用任何沙箱登录（测试用户）登录到 PayPal Access。该功能应该很快就可以使用，因此您暂时可以使用真实的 PayPal 帐户进行访问。

**访问令牌对各种 API 的实际适用性是什么？** 将访问令牌视为 API 的骨架密钥。该代码基本上告诉 API，提供信息的用户已授予应用程序这样做的权限，并且应用程序本身是有效的。

我希望一切都有帮助，乔恩

# templates - 基本的 ember.js 模板概念

> ID：13419055
> 
> 赞同：0
> 
> 时间：2012-11-16T14:57:08.537
> 
> 标签：templates, view, ember.js, handlebars.js

我正在尝试了解 ember.js 的基本概念以及整个模板/视图如何协同工作（以及一些最佳实践），但是，我真的很难找到我的问题的答案......所以，也许，你们中的一个可以帮助我...

1.  [“入门”](http://emberjs.com/documentation/#toc_getting-started)说：“您可以使用 Ember.View 呈现 Handlebars 模板并将其插入 DOM”，并建议使用 view.append()。我下载到入门工具包，有一个模板，一个视图，它在没有 view.append() 的情况下显示。为什么？

2.  我尝试使用占位符 {{ message }} 扩展模板，向视图添加了一个同名的属性，并分配了一个值，但它没有呈现。为什么？

有人可以给我带来一些光明吗...在此先感谢您。非常欢迎链接和良好的 Stackoverflow 线程。

一些代码示例：

索引.html：

```
<script type="text/x-handlebars" data-template-name="application">
<h1>Hello from Ember.js</h1>
</script> 
```

应用程序.js

```
App.ApplicationView = Ember.View.extend({
  templateName: 'application',
  message : 'Hallo Du'
}); 
```

如果我将“应用程序”更改为“应用程序_”，它仍然会被渲染......那么，为什么我要定义一个模板名称？

最好的问候彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:11:43.860

就像我在评论中所说，在 Ember 1.0pre（和更新版本）中，要显示您必须执行的视图属性/属性`{{view.YourAttributeName}}`，因此您必须`{{view.message}}`在您的车把模板中使用用户。所以这就是你必须在你的js中做的事情：

```
App = null;

$(function() {

    App = Em.Application.create();

    App.ApplicationView = Ember.View.extend({
      templateName: 'application',
      message : 'Hallo Du'
    });
}) 
```

这是带有模板的 html 页面：

```
<body>

    <script type="text/x-handlebars">
        <h1>Hello from Ember.js</h1>
         {{view.message}}
    </script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js" ></script>
    <script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js" ></script>
    <script type="text/javascript" src="http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js" ></script>
</body>​ 
```

使用上面的代码检查这个非常基本的小提琴：http: [//jsfiddle.net/schawaska/MwXjG/](http://jsfiddle.net/schawaska/MwXjG/)

# c# - 从搜索实体获取结果以进行 twitter 搜索

> ID：13419058
> 
> 赞同：2
> 
> 时间：2012-11-16T14:57:15.493
> 
> 标签：c#, asp.net-mvc, linq-to-twitter

我使用 linq-to-twitter，我想传入一个标签来搜索和收集数据（文本、用户名、用户图片。我可以返回一个搜索实体，但我想进一步查找文本，并且在文档中它说搜索实体有一个结果字段，它是一个搜索实体列表，但它没有出现在我身上。对于以下两种情况，我都得到了它下面的红线：

情况1：

```
 using (var twitterCtx = new TwitterContext())
                    {
                      var searchResults =
                         (from search in twitterCtx.Search
                         where search.Type == SearchType.Search &&
                             search.Query == tag &&
                             search.IncludeEntities == true
                         select search)
                        .SingleOrDefault();

                        searchResults.Results.ForEach(entry =>
                        {
                            .... 
```

和案例2：（我只是将它嵌入一个简单的例子）

```
var latestTweets= (from tweet in twitterCtx.Search
               where tweet.Count == 200 &&
                     tweet.Hashtag.Contains(tag)
               select tweet).Take(20);

              foreach (var tweet in latestTweets)
              {
                  foreach(var tweet2 in tweet.Result) 
```

.Result 只是没有出现......编辑：[API doc](http://linqtotwitter.codeplex.com/wikipage?title=Search%20Entity&referringTitle=LINQ%20to%20Twitter%20Entities)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T01:03:11.983

这里发生了一些事情。首先，LINQ to Twitter 现在实现了 Twitter API v1.1，这意味着包括搜索在内的所有查询都必须经过身份验证。[我在Securing Your Applications](http://linqtotwitter.codeplex.com/wikipage?title=Securing%20Your%20Applications&referringTitle=Documentation)有关于如何使用 OAuth 和 LINQ to Twitter 的文档。可下载的源代码和[示例](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20Samples&referringTitle=Home)页面也有示例。

偶尔发生的下一件事是 Twitter 可能不会为您的查询返回数据。他们的搜索引擎针对某些类型的查询进行了优化，并且他们不保证搜索引擎的质量响应。您可以通过访问他们的[搜索](https://twitter.com/search)页面来检查这一点，并输入与您尝试在 LINQ to Twitter 中使用的查询相同的数据。他们也有[高级搜索](https://twitter.com/search-advanced)的链接。

如果您认为 LINQ to Twitter 可能有问题，请使用 Fiddler 捕获 HTTP 流量并向我显示请求和响应。注意：一定要清理凭证，以免它们出现在公共场合。

另一件事是使用 Contains 运算符的第二个查询不起作用。LINQ to Twitter 仅在过滤器中使用相等运算符，这些运算符成为发送到 Twitter 的参数。如果您想要更复杂的查询，首先从 Twitter 获取数据，然后执行 LINQ to Objects 查询。理由是 Twitter API 不能识别特殊的运算符，并且引入这种人为的做法不会让您知道网络上真正发生的事情，这会影响您的应用程序的性能。

[@乔梅奥](https://twitter.com/JoeMayo)

# regex - htaccess 中的积极前瞻

> ID：13419059
> 
> 赞同：0
> 
> 时间：2012-11-16T14:57:17.257
> 
> 标签：regex, .htaccess

每当输入不包含在 Here is my之后的 url 时`domain.nl`，我想重定向 from`domain.nl/nl``nl``/`
`.htaccess`

```
RewriteCond %{HTTP_HOST}%{REQUEST_URI} ^domain\.nl/(?!nl).*$ [NC]
RewriteRule ^(.*)$ http://domain.nl/nl [L,R=301] 
```

不知何故，即使放入，它也总是匹配，`domain.nl/nl`所以我最终陷入了无限循环的重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:04:22.823

为什么不直接反转完整条件并检查“不（匹配 domain.nl 并匹配 domain.nl/nl）”的情况，如下所示：

```
RewriteCond %{HTTP_HOST} ^domain\.nl [NC] # if the host matches domain.nl
RewriteCond %{HTTP_HOST}%{REQUEST_URI} !^domain\.nl/nl [NC] # but the full url is not matches domain.nl/nl
RewriteRule ^ http://domain.nl/nl [L,R=301] # redirect 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T15:42:12.123

```
RewriteCond %{HTTP_HOST}%{REQUEST_URI} ^domain\.nl/?(?!/?nl)$ [NC]
RewriteRule ^(.*)$ http://domain.nl/nl [L,R=301] 
```

# hibernate - 使用 Hibernate 存储具有 OneToOne 映射的实体

> ID：13419067
> 
> 赞同：1
> 
> 时间：2012-11-16T14:58:10.217
> 
> 标签：hibernate, foreign-keys

我有以下两个实体：

人.java：

```
@Entity
@Table(name="PERSON")
public class Person {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name="id")
    private int id;

    @Column(name="first_name")
    private String firstName;

    @Column(name="last_name")
    private String lastName;

    @OneToOne(cascade = CascadeType.ALL, mappedBy = "person", optional = false)
    private Address address;

    public Person(final String firstName, final String lastName, final Address address)
    {
        this.firstName = firstName;
        this.lastName = lastName;
        this.address = address;
    }

    //Required by hibernate
    public Person()
    {
    }

    public int getId()
    {
        return id;
    }

    public String getFirstName()
    {
        return firstName;
    }

    public String getLastName()
    {
        return lastName;
    }

    public Address getAddress() {
        return address;
    }

    public void setId(final int id)
    {
        this.id = id;
    }

    public void setFirstName(final String firstName)
    {
        this.firstName = firstName;
    }

    public void setLastName(final String lastName)
    {
        this.lastName = lastName;
    }

    public void setAddress(final Address address)
    {
        this.address = address;
    }

} 
```

地址.java：

```
@Entity
@Table(name = "ADDRESS")
public class Address
{
    @Id
    private int personId;

    @MapsId
    @OneToOne()
    private Person person;

    @Column(name = "street")
    private String street;

    @Column(name = "town")
    private String town;

    @Column(name = "postcode")
    private String postcode;

    public Address()
    {
    }

    public Address(final String street, final String town, final String postcode)
    {
        this.street = street;
        this.town = town;
        this.postcode = postcode;
    }

    public Person getPerson()
    {
        return person;
    }

    public void setPerson(final Person person)
    {
        this.person = person;
        this.personId = person.getId();
    }

    public String getStreet()
    {
        return street;
    }

    public void setStreet(final String street)
    {
        this.street = street;
    }

    public String getTown()
    {
        return town;
    }

    public void setTown(final String town)
    {
        this.town = town;
    }

    public String getPostcode()
    {
        return postcode;
    }

    public void setPostcode(final String postcode)
    {
        this.postcode = postcode;
    }

} 
```

我想将这两个实体映射到以下架构：

```
CREATE TABLE person (
    id INT NOT NULL AUTO_INCREMENT,
    first_name VARCHAR(50) NULL DEFAULT NULL,
    last_name VARCHAR(50) NULL DEFAULT NULL,
    PRIMARY KEY (id)
);
CREATE TABLE address (
    person_id INT(10) NOT NULL,
    street VARCHAR(50) NULL DEFAULT NULL,
    town VARCHAR(50) NULL DEFAULT NULL,
    postcode VARCHAR(50) NULL DEFAULT NULL,
    FOREIGN KEY (person_id) REFERENCES person(id) ON DELETE CASCADE
); 
```

请注意，地址表没有主键，只有人员表的外键。这意味着地址不能在没有与之关联的人的情况下存在，并且映射必须是一对一的。

不幸的是，Hibernate 注释不能正常工作。这是我用来测试上述内容的代码：

```
public static Person save(Person person) {
    SessionFactory sf = new AnnotationConfiguration().configure().buildSessionFactory();
    Session session = sf.openSession();
    session.beginTransaction();
    Integer id = (Integer)session.save(person);
    person.setId(id);
    session.getTransaction().commit();
    session.close();
    return person;
}

@Test
public void testWritePerson() {
    Person person = new Person("Jack", "Bauer", new Address("123 Fake Street", "Springfield", "SP1F 123"));
    person.getAddress().setPerson(person);

    Person savedPerson = PersonTestUtil.save(person);
    assertFalse(
} 
```

但我得到的错误是：

```
org.hibernate.id.IdentifierGenerationException: null id generated for:class Address 
```

我尝试了各种不同注释的许多排列，但没有成功。有什么想法可以修复上述代码中的注释，以便正确保留 Person 和 Address 实体吗？如果您想自己测试它的完整代码以及如何设置数据库的说明，请参见此处：

[https://github.com/alexspurling/hibernate-test](https://github.com/alexspurling/hibernate-test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:32:01.900

我发现解决方案是从地址字段的 Person 的 OneToOne 注释中删除“可选 = false”属性：

```
@OneToOne(cascade = CascadeType.ALL, mappedBy = "person")
private Address address; 
```

我相信这是可行的，因为它可以防止 Hibernate 在生成 Person 的 id 之前尝试保留地址。

请查看更新的 github 存储库以获取完整的工作示例：[https ://github.com/alexspurling/hibernate-test](https://github.com/alexspurling/hibernate-test)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:06:43.427

我认为 Address 对象中的 personID 字段应该反映 person 对象属性的状态。尝试对地址实体进行此更改：

```
public void setPerson(final Person person)
{
    this.person = person;
    this.personId = person.getId();
} 
```

您需要确保在设置一个时另一个保持同步。

**编辑**
好的，我现在可以看到我的建议不起作用。基本问题是您需要使用人员 ID 设置地址 ID，但人员 ID 是在持久化时自动生成的，因此您还没有该值。Address 上的 Id 没有注释告诉 JPA 它实际上是 Person 的外键，因此它不知道使用生成的 person Id 设置它。
您需要做的是向 JPA 提供足够的信息，以便它知道保存 Person，然后使用该 Id 保存地址。我会尝试这样的事情。

```
@Entity
@Table(name = "ADDRESS")
public class Address
{
    //*** Use the Person object to get and set this value
    //*** @Id
    //*** private int personId;

    @Id
    @OneToOne()
    private Person person; 
```

现在 JPA 应该有足够的注释信息来确定保存对象的顺序以及如何在 Address 上设置 personId。
最后，您在测试用例中在地址上设置 Person 的行应该移到 Person 构造函数，因为这是必不可少的步骤。如果没有这条线，JPA 将没有能够链接两者的对象引用。

```
public Person(final String firstName, final String lastName, final Address address)
{
     this.firstName = firstName;
     this.lastName = lastName;
     this.address = address;
     this.address.setPerson(this);
} 
```

我认为应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T06:37:27.743

尝试更改映射（其他都可以）。读这个

[http://viralpatel.net/blogs/hibernate-one-to-one-mapping-tutorial-using-annotation/](http://viralpatel.net/blogs/hibernate-one-to-one-mapping-tutorial-using-annotation/)

人还行

地址应该这样改

```
public class Address {

  @Id
  @Column(name="personId", unique=true, nullable=false)
  @GeneratedValue(generator="gen")
  @GenericGenerator(name="gen", strategy="foreign"
           , parameters=@Parameter(name="property", value="person"))
  private int personId;

  @OneToOne
  @PrimaryKeyJoinColumn
  private Person person
  ... 
```

插入新值时，我们可以显式设置两端：

# php - 更新 cookie 值而不更改其到期日期？

> ID：13419068
> 
> 赞同：4
> 
> 时间：2012-11-16T14:58:09.967
> 
> 标签：php, setcookie

更新 cookie 值而不更改其到期日期？

```
$c = $_COOKIE["count"];
$c++;
if (isset($_COOKIE["count"])) {
    setcookie("count", $c);
}
else
{
    setcookie("count", $c, time() + 86400, '/');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:01:23.443

您可以在不更新其到期日期的情况下更新 cookie 的值的唯一方法是将到期日期本身添加到值中；这是因为浏览器只向您发送 cookie 的名称和值。

```
if (isset($_COOKIE['count'])) {
    list($exp, $val) = explode('|', $_COOKIE['count'], 2);
    ++$val;
} else {
    $exp = time() + 86400;
    $val = 1;
}
setcookie('count', "$exp|$val", $exp, '/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:01:49.413

你不能——PHP 不知道 cookie 什么时候过期，也不知道 javascript（除非你将过期时间复制*到*cookie 内容中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:02:10.493

您可以将到期日期保存在其他 cookie 中。当您更新您的 cookie 时，只需从中读取到期日期并在您的更新中使用它。

# r - Redhat el6下R的安装

> ID：13419069
> 
> 赞同：1
> 
> 时间：2012-11-16T14:58:13.940
> 
> 标签：r

我正在尝试在 redhat el6 下安装 R，但我遇到了非常困难的时期。我想问是否有人在 redhat 下安装了 R，并想分享任何经验教训。

谢谢/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:00:33.550

您可以使用 epel 存储库并使用预构建的 rpm 版本。

[R FAQ, Section 2.6 on Unix Binaries for R](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Are-there-Unix_002dlike-binaries-for-R_003f)在这个话题上有这样的说法：

> 由 Tom “Spot” Callaway 维护的 Fedora 的 R 二进制文件作为 Fedora 发行版的一部分提供，可以通过 yum（RPM 安装程序/更新程序）进行访问。Fedora R RPM 是一个“元包”，它安装了 R 的所有用户和开发人员组件（分别作为 R-core 和 R-devel 提供），以及独立的 R 数学库（libRmath 和 libRmath-devel）。Fedora 还提供了用于选择 R 包的 RPM。Extra Packages for Enterprise Linux (EPEL) 项目 (http://fedoraproject.org/wiki/EPEL) 提供了用于 RedHat Enterprise Linux 和兼容发行版的 Fedora RPM 端口。当新版本的 R 发布时，可能会延迟最多 2 周，直到 Fedora RPM 公开可用，因为它必须通过法定的 Fedora 审查程序。

# c++ - Boost program_options 异常不替换 %canonical_option% 标记

> ID：13419070
> 
> 赞同：12
> 
> 时间：2012-11-16T14:58:15.607
> 
> 标签：c++, exception, boost

已经将此（版本 1.52.0）集成到我的应用程序中，但偶然发现了上述问题。

在附加的示例中，异常 what() 方法始终具有完整的 %canonical_option% 标记，并且不会替换为我的选项名称。

我正在使用 VS2008，禁用了 unicode（选项“无”）并从我的项目中删除了所有其他文件，它只是 main.cpp 文件中的这段代码。

还是我把这一切都弄错了，我应该调用其他东西来用正确的参数名称格式化异常消息？

```
#include <boost/program_options.hpp>

namespace po = boost::program_options;

using namespace std;

int main(int argc, char* argv[])
{

    try {

        po::options_description optionalParams("optional");

        optionalParams.add_options() 
            ("log_severity,l", po::value<int>()->required(), "Minimum severity logging level")
            ("log_file,g", po::value<string>(), "Full path to log file")
            ;

        po::variables_map optMap;

        po::parsed_options parsed = po::command_line_parser(argc, argv)
            .options(optionalParams)
            .allow_unregistered()
            .run();

        po::store(parsed, optMap);

        po::notify(optMap);

    }
    catch(po::error e)
    {
        cout << e.what();
        return 0;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T09:55:46.363

当我再次查看代码时，在正确浏览了 boost 代码后，答案变得更加明显。

```
catch(po::error e)
{
    cout << e.what();
    return 0;
} 
```

应该

```
catch(po::error& e)
{
    cout << e.what();
    return 0;
} 
```

如果没有引用，我们会得到“对象切片”，这里解释得很好：

[通过引用捕获异常](https://stackoverflow.com/questions/8350526/catching-exceptions-by-reference?rq=1)

不使用引用意味着我们失去了覆盖模板替换的“what”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T17:47:04.017

我只花了一个小时调试这个 - 实际上这是一个有趣的行为 - 我认为你的代码的唯一问题是你正在捕捉`po::error`

```
catch(po::error e)
{
   cout << e.what() << std::endl;
    return 0;
} 
```

如果您将捕获更改为上面的行到此

```
catch(po::required_option e)
{
   cout << e.what() << std::endl;
    return 0;
} 
```

您会收到以下错误消息。

```
the option '--log_severity' is required but missing
Press any key to continue . . . 
```

所以基本上看起来替换只在派生的异常中完成。

## 编辑：

经过一番阅读，您实际上可以捕获 a `std::exception`，当您调用 时，它会打印出正确的消息`what()`。有关所有详细信息，请参见下面的链接。

[http://www.boost.org/doc/libs/1_52_0/libs/exception/doc/boost-exception.html](http://www.boost.org/doc/libs/1_52_0/libs/exception/doc/boost-exception.html)

我还发现有一种方法可以用来帮助您诊断抛出异常时发生的情况：

```
#include <boost/exception/diagnostic_information.hpp>

...

catch(...)
{
    std::cerr << "Unhandled exception!" << std::endl <<
    boost::current_exception_diagnostic_information();
    return 0;
} 
```

例如，如上所述更改程序，它会打印出如下内容：

```
Unhandled exception!
Throw location unknown (consider using BOOST_THROW_EXCEPTION)
Dynamic exception type: class boost::exception_detail::clone_impl<struct    
                               boost::exception_detail::error_info_injector<class 
                               boost::program_options::required_option> >
std::exception::what: the option '--log_severity' is required but missing
Press any key to continue . . . 
```

# ruby-on-rails - 在主机上进行 Ruby 开发

> ID：13419071
> 
> 赞同：0
> 
> 时间：2012-11-16T14:58:16.123
> 
> 标签：ruby-on-rails, ruby

是否可以从我的桌面直接在主机上处理文件？我一直听说 Windows 不适合 Ruby 开发，而且我的托管公司提供 RoR (bluehost.com)，所以我想知道我是否真的需要本地机器上的任何东西，除了一个文本编辑器可以访问远程文件，也许还有一个 FTP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:06:59.850

您的提供商是否提供对您服务器的 ssh 访问？如果是这样，您可以将存储库克隆到主目录下的某个位置，然后使用 vim 或其他编辑器通过 ssh 对其进行处理。这与在本地工作非常相似，但是您可以使用 *nix 环境的强大功能。

在这种情况下，您可以打开多个终端，然后运行测试、编辑代码、使用 git 提交等等。如果您没有 ssh 访问权限，那么我认为这没有意义 - 您将利用这种可能性快速运行测试等。

如果您想远程工作，您将需要：

1.  某种适用于 Windows 的 ssh 客户端 - 我喜欢[mRemoteNG](http://www.mremoteng.org)
2.  安装在服务器上的 Rails 堆栈（查看[Rails 下载页面](http://rubyonrails.org/download)以获取当前版本以及如何安装它们）
3.  可能安装了 git（如果它不存在，请参阅[Pro Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)如何安装）
4.  熟悉在终端中运行的 vim 或其他一些编辑器

您也可以在本地 linux 机器上完成所有这些操作——您只是不需要使用 ssh。您还可以在虚拟机中安装 Linux 并与 Windows 一起运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:20:48.377

这听起来非常难看。如果您在 Windows 上，请考虑[RailsInstaller](http://railsinstaller.org/)，它应该有助于获得良好的开发环境来运行。

对于托管，我强烈推荐[Heroku](http://www.heroku.com)。他们[在 Heroku 上的 Rails 3.x 入门](https://devcenter.heroku.com/articles/rails3)指南将帮助您在一刻钟内部署您的第一个应用程序。

作为一个文本编辑器，挑选任何一个并记住它是很好的。[SublimeText 2](http://www.sublimetext.com/)是适用于大多数平台的一个很好的工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T15:53:17.637

绝对 - 使用远程 linux 服务器，在 Rails 中开发非常容易。所涉及的任何摩擦都将远远少于尝试在 Windows 上开发的麻烦。有几件事要做：

*   确保设置了安全性，以便只有**某些 IP 地址**可以访问开发端口。
*   要么使用基于**终端的编辑器**，例如`vim`（远程或本地的绝佳选择），要么使用帮助您编辑远程文件的 GUI 编辑器。例如，OSX 上的 Textmate 可以通过 SSH 连接来执行此操作。您只是不想`rsync`每次保存时都手动运行。
*   确保您可以**停止**远程实例而不**终止**它。例如，使用 Amazon EC2 的 EBS 支持的实例可以做到这一点。拥有一个可以随意暂停/启动的实例可以让您在更快的盒子上进行开发，同时节省大量资金。

# java - 多对多的映射异常

> ID：13419080
> 
> 赞同：1
> 
> 时间：2012-11-16T14:58:55.590
> 
> 标签：java, hibernate, jpa

我正在使用 JBoss AS 7 和 IDEA 11。当我尝试部署我的应用程序时，我遇到了这个问题：

我的应用中有两个实体：

第一的：

```
@Entity
@Table(name="users")
public class User extends AbstractEntity {

    private static final long serialVersionUID = -3839809902040717567L;

    @Column(name="email") private String email;
    @Column(name="first_name") private String firstName;
    @Column(name="last_name") private String lastName;
    @Column(name="middle_name") private String middleName;
    @Column(name="password") private String password;
    @Column(name="client_id") private int clientId;
    @Column(name="user_name") private String userName;
    private List<Role> roles;

    public User() {
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getMiddleName() {
        return middleName;
    }

    public void setMiddleName(String middleName) {
        this.middleName = middleName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public int getClientId() {
        return clientId;
    }

    public void setClientId(int clientId) {
        this.clientId = clientId;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    @ManyToMany(cascade = {CascadeType.ALL})
    @JoinTable(name = "users_roles",
            joinColumns = {@JoinColumn(name = "user_id")},
            inverseJoinColumns = @JoinColumn(name = "role_id"))
    public List<Role> getRoles() {
        return roles;
    }

    public void setRoles(List<Role> roles) {
        this.roles = roles;
    }
} 
```

第二：

```
@Entity
@Table(name="roles")
public class Role extends AbstractEntity {

    private static final long serialVersionUID = -192049947690313026L;

    @Column(name="ad_name") private String  adName;
    @Column(name="description") private String description;
    @Column(name="name") private String name;
    @OneToMany(mappedBy = "roles") private List<RolesPermissions> rolesPermissions;
    @ManyToMany(mappedBy = "roles") List<User> users;

    public String getAdName() {
        return adName;
    }

    public void setAdName(String adName) {
        this.adName = adName;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List<User> getUsers() {
        return users;
    }

    public void setUsers(List<User> users) {
        this.users = users;
    }

    public List<RolesPermissions> getRolesPermissions() {
        return rolesPermissions;
    }

    public void setRolesPermissions(List<RolesPermissions> rolesPermissions) {
        this.rolesPermissions = rolesPermissions;
    }

} 
```

他们有`ManyToMany`关系。

部署时我有这个例外：

```
Caused by: org.hibernate.MappingException: Could not determine type for: java.util.List, at table: users, for columns: [org.hibernate.mapping.Column(roles)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:304)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:288)
    at org.hibernate.mapping.Property.isValid(Property.java:216) 
```

可能是什么原因？

PS`AbstractEntity`是`mappedsuperclass`并且有带有@Id 注释的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:02:16.120

您的`User`实体没有`roles`注释关系。`@ManyToMany`注释应该可以解决问题。

正如@Perception 指出的那样，您可能还想在 上分隔连接表`roles`，例如：

```
@JoinTable(name="USER_ROLE", joinColumns= @JoinColumn(name="EMP_ID"), inverseJoinColums = @JoinColumn(name="ROLE_ID")) 
```

编辑：仅当您使用现有架构或默认表和列名不适合您时，此注释才相关。如果你让 Hibernate 生成表，你可以放心地省略`@JoinTable`注解。

# java - 如何使用一个参数作为 map 进行 ajax 调用，并在 java 服务器端将其映射到 hashmap

> ID：13419086
> 
> 赞同：0
> 
> 时间：2012-11-16T14:59:21.783
> 
> 标签：java, javascript, ajax, spring, jakarta-ee

我有基于 Spring Java 的网络应用程序。

在其中一个地方，用户将填写一张表格，我有一段 javascript 代码，它将读取每个字段并进行 ajax 调用。

Spring 现在将其映射到相关函数。到目前为止，我都很好。

现在我想减少 ajax 调用中的参数数量。那么在javascript中有什么东西可以映射到java中的map吗？

这是没有地图的代码，可以正常工作。

```
 firstName = $('#firstName').val();
       lastName = $('#lastName ').val();
       address = $('#address ').val();      
        $.ajax({
        type: 'POST',
        url: location.href + 'MyApp/'+currentTabName+'/getResults',
        data: ({firstName:firstName, lastName:lastName, address:address}),
        success:function(data) {
            $('#searchResults').html(data);
        }
    }); 
```

控制器端java代码：

```
 @RequestMapping(value = "/Search/getResults", method = RequestMethod.POST)
    public ModelAndView getResults(@RequestParam("ticker") String ticker,
        @RequestParam("searchMap") Object searchMap,
        @RequestParam("dateRange") String dateRange,
        @RequestParam("inMarquee") boolean inMarquee, HttpServletRequest request,
        HttpServletResponse response) {
//code to process the arguments received
} 
```

这对我来说很好。

现在我想将所有三个参数放入一张地图中，然后发送到 java 代码：

所以我写了下面的代码：

```
 var map =[];
        map[ firstName] = $('#firstName').val();
      map[ lastName ]= $('#lastName ').val();
       map[address ]= $('#address ').val();     
        $.ajax({
        type: 'POST',
        url: location.href + 'MyApp/'+currentTabName+'/getResults',
        data: ({map:map}),
        success:function(data) {
            $('#searchResults').html(data);
        }
    }); 
```

控制器端java代码：

```
 @RequestMapping(value = "/Search/getResults", method = RequestMethod.POST)
    public ModelAndView getResults(@RequestParam("map") Map<String,String map,
        HttpServletRequest request,
        HttpServletResponse response) {
//code to process the arguments received
} 
```

当我运行我的代码时：我收到以下错误：

```
 Resolving exception from handler [public org.springframework.web.servlet.ModelAndView com.Controller.getResults(java.util.Map,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)]: org.springframework.web.bind.MissingServletRequestParameterException: Required Map parameter 'map' is not present 
```

我觉得这是所有基于 Java 的 Web 应用程序的基本需求。但我第一次接触到这种情况。因此，请分享您对如何避免此问题的意见。我想要一张地图的原因是字段的数量和字段的组合可能会有所不同。所以我不能为每个组合编写 ajax 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:15:54.480

请**复制并粘贴**您的代码，**请勿**重新输入。
如果您复制并粘贴代码，则它无法**正常**工作。

```
 firstName = $('#firstName').val();
   lastName = $('#firstName').val();
   address = $('#firstName').val(); 
```

注意你从哪里得到你的`lastName`和`address`从哪里来

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:17:39.773

如果是表单，可以使用`serialize()`函数自动构建 POST 数据。所以`$.ajax`你可以写这样的东西：

```
$.ajax({
  type: 'POST',
  url: [a link],
  data: $('#formId').serialize(),
  success: function(data) {...}
}); 
```

另外，对于服务器端，在相应的方法中，可以使用`@RequestBody`注解，`FormHttpMessageConverter`将参数转换为MultiValueMap。

或者，如果您有一个对应于表单的对象，您可以使用`@ModelAttribute`将表单映射到一个对象。

在这里查看更多信息：[Spring Web MVC 框架](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)

# c# - 从 Office 加载项启动 WPF 窗口

> ID：13419089
> 
> 赞同：8
> 
> 时间：2012-11-16T14:59:29.450
> 
> 标签：c#, wpf, mvvm, ms-office, office-addins

我创建了一个包含 WPF 应用程序实例的 Office 加载项。当用户单击加载项上的按钮时，我通过执行以下操作启动不同的窗口：

```
MyViewModel viewModel = new MyViewModel(string infoFromOffice);
MyWindow view = new MyWindow();
view.DataContext = viewModel;

wpfApp.Run(view); 
```

在调用之前构建视图模型时，我`wpfApp.Run()`稍后会使用当前的 SynchronizationContext 来解决问题。[这里](https://stackoverflow.com/questions/7075491/why-is-synchronizationcontext-current-null)的答案解释了原因。有没有更好的方法从 Office 加载项启动 WPF 窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:04:59.140

我从未创建过 Office 加载项，但我在其他类型的非 WPF 应用程序（Windows 窗体、从 WPF 视觉对象生成 .XPS 文件的库等）中使用了 WPF 窗口。您可以尝试我在[这个问题中建议的方法。](https://stackoverflow.com/questions/13381967/show-wpf-window-from-test-unit/13382721#comment18278665_13382721). 它展示了如何配置线程以便它能够运行 WPF 应用程序。如果您查看 WPF 应用程序的生成应用程序代码（“App.gics”），它似乎是这样开始的：

```
/// <summary>
    /// Application Entry Point.
    /// </summary>
    [System.STAThreadAttribute()]
    [System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public static void Main() {
        WpfApplication1.App app = new WpfApplication1.App();
        app.InitializeComponent();
        app.Run();
    } 
```

我尝试使用以下代码从单元测试中启动一个应用程序，它运行良好：

```
[TestMethod]
    public void TestMethod()
    {
        // The dispatcher thread
        var t = new Thread(() =>
        {
            var app = new App();
            // Corrects the error "System.IO.IOException: Assembly.GetEntryAssembly() returns null..."
            App.ResourceAssembly = app.GetType().Assembly;
            app.InitializeComponent();

            app.Run();
        });

        // Configure the thread
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        t.Join();
    } 
```

**编辑**

查看您的代码，我相信对 SynchronizationContext 有意义的语句是创建 Window 实例，而不是创建您的 ViewModel（除非您的 ViewModel 处理 View 逻辑并实例化控件，否则它不应该这样做）。所以可以尝试将Window的实例化移动到App的线程中。像这样的东西：

```
[TestMethod]
    public void TestMethod3()
    {
        // Creates the viewmodel with the necessary infomation wherever 
                    // you need to.
        MyViewModel viewModel = new MyViewModel(string infoFromOffice);

        // The dispatcher thread
        var t = new Thread(() =>
        {
            var app = new App();
            // Corrects the error "System.IO.IOException: Assembly.GetEntryAssembly() returns null..."
            App.ResourceAssembly = app.GetType().Assembly;
            app.InitializeComponent();

            // Creates the Window in the App's Thread and pass the information to it
            MyWindow view = new MyWindow();
            view.DataContext = viewModel;

            app.Run(view);
        });

        // Configure the thread
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        t.Join();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T06:02:04.177

这是一个使用应用程序域在单独的应用程序域和 UI 线程下多次打开 wpf 应用程序的版本。在办公室插件中使用它。每次调用启动时，您都会获得一个新应用程序。尚未验证 wpf 应用程序关闭时线程关闭的情况。

[http://eprystupa.wordpress.com/2008/07/31/running-multiple-wpf-applications-in-the-same-process-using-appdomains/](http://eprystupa.wordpress.com/2008/07/31/running-multiple-wpf-applications-in-the-same-process-using-appdomains/)

公共类 WpfHelper {

```
 public static void Startup()
    {
        var appDomainSetup = new AppDomainSetup()
        {
            ApplicationBase = Path.GetDirectoryName(typeof(WpfHelper).GetType().Assembly.Location)
        };

        AppDomain domain = AppDomain.CreateDomain(DateTime.Now.ToString(), null, appDomainSetup);

        CrossAppDomainDelegate action = () =>
        {
            Thread thread = new Thread(() =>
            {
                var app = new WpfApplication.App();

                WpfApplication.App.ResourceAssembly = app.GetType().Assembly;

                app.MainWindow = new WpfApplication.MainWindow();
                app.MainWindow.Show();
                app.Run();
            });

            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();

        };

        domain.DoCallBack(action);
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:55:01.633

虽然 Arthur 的回答有助于指出问题发生的原因，但它实际上并没有回答如何将数据从主机应用程序传递到视图模型，同时在调用`App.Run()`. 从那以后，我找到了一个（非常简单的）解决方案！对于任何有兴趣的人。

在 App.xaml.cs 中：

```
private string data;

public App(string infoFromOffice) {
    this.data = data;
}

protected override void OnStartup(StartupEventArgs e) {
    base.OnStartup(e);

    MyViewModel viewwModel = new MyViewModel(this.data);
    MyWindow view = new MyWindow();
    view.Show();
} 
```

启动应用程序时：

```
App application = new App(infoFromOffice);
application.Run(); 
```

请注意，需要在 App.xaml 中删除启动 URI。这个非常简单的解决方案允许我将信息传递给我的应用程序，但同时不需要在“非 WPF 环境”中构建视图模型，因此可以使用 Dispatcher 等。

# c - 如何获取子进程的 PID？

> ID：13419095
> 
> 赞同：0
> 
> 时间：2012-11-16T14:59:44.923
> 
> 标签：c, windows, pid

有没有办法获取子进程的PID？我的意思是，如果我使用 CreateProcess 打开一个 cmd 提示符，我知道它的 PID，因为我可以从返回的 ProcessInformation 结构中获取它。但是是否也可以获取从该命令提示符打开的进程的 PID？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:16:54.070

您可以使用[`CreateToolhelp32Snapshot`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)传递`TH32CS_SNAPPROCESS`值的函数，然后调用[`Process32First`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)方法，最后您必须遍历返回的集合并将[`th32ParentProcessID`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839%28v=vs.85%29.aspx)字段的值与 cmd.exe 的 PID 进行比较。另一种选择是使用[`Win32_Process`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)WMI 类使用`ParentProcessId`属性来过滤结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:42:31.100

[使用CreateJobObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682409%28v=vs.85%29.aspx)创建作业，并使用[SetInformationJobObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686216%28v=vs.85%29.aspx)将作业与 I/O 完成端口关联；有关更多详细信息，请参阅[JOBOBJECT_ASSOCIATE_COMPLETION_PORT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684141%28v=vs.85%29.aspx)。使用AssignProcessToJobObject创建流程`CREATE_SUSPENDED`并使用[AssignProcessToJobObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681949%28v=vs.85%29.aspx)使新流程成为作业的一部分。

请记住，有时新的孙子进程在您看到进程 ID 时已经退出，并且可以重用该进程。如果您使用[OpenProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)来获取孙进程的句柄，请确保正确处理错误，如果您成功打开句柄，请确保调用[IsProcessInJob](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684127%28v=vs.85%29.aspx)以验证句柄确实指向孙进程之一。

由于在 Windows 8/2012 之前无法嵌套进程，因此您可能需要`CREATE_BREAKAWAY_FROM_JOB`在创建子进程时使用该标志。

# javascript - 在命名空间中使用递归函数时“递归过多”

> ID：13419098
> 
> 赞同：1
> 
> 时间：2012-11-16T15:00:04.387
> 
> 标签：javascript, jquery, recursion, javascript-namespaces

我在javascript中使用了一种递归方法，它工作得很好，直到我把它放在一个命名空间中。该函数从数组中返回一个元素，该元素具有给定的quoteproduct id 作为它的id 属性。这是一个嵌套数组，这就是函数递归的原因。这是函数声明：

```
QuoteProductService.getQuoteProduct = function (quoteproductid) {
    var founditem = null;
    $.each(QuoteProductService.QuoteProductConfigurations, function (index, item) {
        if(item.id == quoteproductid) {
            founditem = item;
            return false; // break the $.each if an item is found
        } else {
            founditem = QuoteProductService.getQuoteProduct(item.children, quoteproductid);
            if(founditem != null) return false; // break the $.each if an item is found
        }
    });
    return founditem;
} 
```

这就是我声明命名空间的方式：

```
var QuoteProductService = QuoteProductService || {}; 
```

这是我在函数中使用的命名空间中的数组：

```
QuoteProductService.QuoteProductConfigurations = []; 
```

该数组在页面加载时填充。

现在，每当我调用该函数时，都会出现“递归过多”错误。我究竟做错了什么 ？同样，在我将函数和数组放入命名空间之前，这个函数就起作用了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:15:40.783

我刚刚用更简单的变量名重写了您的代码：

```
var a = {
    b: = [{id: 1}, {id: 2}, {id: 3}]
};
a.get = function( searchId ) {
    var match = null;

    $.each(a.b, function(key, value) {
        if ( value.id === searchId ) {
            // Yes we found the match, break and everything

            match = value;
            return false;
        }
        else {
            match = a.get();

            if ( match ) {
                return false;
            }
        }
    });
    return match;
}; 
```

* * *

```
a.get(1) // will return {id: 1}
a.get(2) // will throw recursive error 
```

为什么？

由于您的结构，正如您始终指向的`$.each`那样`a.b`。

因此它是这样的：

> 循环`a.b`：ab[0].id === searchId？
> 好的一切都很好返回第一个值
> 
> 如果不是 ab[0].id === searchId
> 循环`a.b`
> ab[0].id === searchId ？
> 好的，一切都很好
> ，如果不是 ab[0].id === searchId 则返回第一个值
> 循环`a.b`
> ......

希望你能理解：

要解决此问题，您需要指定我们必须循环的数组：

```
QuoteProductService.getQuoteProduct = function (quoteproductid, loopArray) {
    var founditem = null;

    // if (loopArray) {loopArray = loopArray} else { loopArray=Quote...QuteConfig.. }
    loopArray = loopArray || QuoteProductService.QuoteProductConfigurations;

    $.each(loopArray, function (index, item) {
        if(item.id == quoteproductid) {
            founditem = item;
            return false; // break the $.each if an item is found
        } else {
            founditem = QuoteProductService.getQuoteProduct(quoteproductid, item.children);
            if(founditem != null) return false; // break the $.each if an item is found
        }
    });
    return founditem;
} 
```

# python - Python：子进程退出，使其线程运行

> ID：13419099
> 
> 赞同：0
> 
> 时间：2012-11-16T15:00:07.497
> 
> 标签：python, multithreading, process, python-multithreading

在使用`multiprocessing`python 中的模块处理项目时，我观察到一些奇怪的行为。

假设我的主程序**p1**使用模块创建了一个进程**p2 。**`multiprocessing`进程**p2**自己创建了一个名为**p2_t1**的线程。**创建此线程后p2**中没有代码块，因此它退出（我没有调用退出，所以它只会从 main 返回）留下**p2_t1**悬空。我可以通过以下方式确认`strace`

**p1**中创建子进程的示例代码

```
p = Process(target=RunService,args=(/*some args*/),name="p2") 
```

**p2**的示例代码：

```
def RunService():
    try:
        /*do something here*/
    except Exception,e:
        /*create a new thread*/

    /*nothing here so basically this process exits leaving the thread dangling*/ 
```

**但是，如果在p1中创建线程（调用是****p1_t1**），则不会发生这种情况。**p1**在创建的线程**p1_t1**运行之前不会退出。

 ******本例中**p1的示例代码**

```
try:
  /*do something here*/
except Exception,e:
  /*create a new thread*/

    /*nothing here so basically process should end*/ 
```

在这种情况下，进程不会退出并继续运行，直到线程运行。有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:09:44.240

没有任何代码可言，很难说出发生了什么，但我会尝试让你的线程成为守护线程，然后用 p2 等待它。当线程完成时，p2 应该正确关闭，终止线程。像这样的东西：

```
t1 = threading.Thread(target=somefunc, args=((2,)))
t1.setDaemon(True)
t1.start()
t1.join() 
```

祝你好运，迈克******

# javascript - 是否可以替换 base 64 编码图像中的颜色？

> ID：13419101
> 
> 赞同：22
> 
> 时间：2012-11-16T15:00:11.647
> 
> 标签：javascript, css, base64

有什么办法可以取一个 base 64 字符串，例如：

```
.copyIcon {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR42mNgQALCi7//J4QZcAFiNOM1hJANBA0h1QC83iHFizDJ/dgww/7/LAQNwKUZbkjDfya8YQZXiCqJagilBmAzhLYGYDNsJBhAMD3gS854NS/6vg+fZgDKvmW19S7PRAAAAABJRU5ErkJggg==") center center no-repeat;} 
```

并使用 JavaScript 将纯色替换为另一种纯色？

在这个特定示例中`#13A3F7`，我想用另一种纯色 ( `#ff6400`) 替换图标 ( ) 中的纯色。

这样做的原因是它不是一次性的。我希望能够通过设置将图标更改为*任何*颜色。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T15:20:31.630

这是一个带有 3 个参数的小函数：data、colorFrom、colorTo（两种颜色都应以十六进制提供）

```
function changeColInUri(data,colfrom,colto) {
    // create fake image to calculate height / width
    var img = document.createElement("img");
    img.src = data;
    img.style.visibility = "hidden";
    document.body.appendChild(img);

    var canvas = document.createElement("canvas");
    canvas.width = img.offsetWidth;
    canvas.height = img.offsetHeight;

    var ctx = canvas.getContext("2d");
    ctx.drawImage(img,0,0);

    // remove image
    img.parentNode.removeChild(img);

    // do actual color replacement
    var imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
    var data = imageData.data;

    var rgbfrom = hexToRGB(colfrom);
    var rgbto = hexToRGB(colto);

    var r,g,b;
    for(var x = 0, len = data.length; x < len; x+=4) {
        r = data[x];
        g = data[x+1];
        b = data[x+2];

        if((r == rgbfrom.r) &&
           (g == rgbfrom.g) &&
           (b == rgbfrom.b)) {

            data[x] = rgbto.r;
            data[x+1] = rgbto.g;
            data[x+2] = rgbto.b;

        } 
    }

    ctx.putImageData(imageData,0,0);

    return canvas.toDataURL();
} 
```

需要一个额外的函数来将十六进制颜色转换为 RGB（正确匹配）

```
function hexToRGB(hexStr) {
    var col = {};
    col.r = parseInt(hexStr.substr(1,2),16);
    col.g = parseInt(hexStr.substr(3,2),16);
    col.b = parseInt(hexStr.substr(5,2),16);
    return col;
} 
```

用法是这样的：

```
changeColInUri(
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR42mNgQALCi7//J4QZcAFiNOM1hJANBA0h1QC83iHFizDJ/dgww/7/LAQNwKUZbkjDfya8YQZXiCqJagilBmAzhLYGYDNsJBhAMD3gS854NS/6vg+fZgDKvmW19S7PRAAAAABJRU5ErkJggg==",
    "#13A3F7",
    "#ff6400"
); 
```

它将返回一个新数据：image/png；具有交换颜色的 URI，这是最终结果的工作 jsfiddle

[http://jsfiddle.net/V5dU2/](http://jsfiddle.net/V5dU2/)

（在 Chrome、Firefox 和 IE10 上测试）

# sql - 加入包含空值的列

> ID：13419102
> 
> 赞同：0
> 
> 时间：2012-11-16T15:00:17.460
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两个表（表 A 和 B），如下所示：

表 A：

```
Col 1    Col 2
--------------
A        1
A        2
A        3
...
A        15
... 
```

表 B：

```
Col 3    Col 4
--------------
A        a
A        b 
```

我想写一个查询来将表 B col 4 连接到表 A。表 B col 3 将匹配表 A col 1，所以我想加入这个列。我正在寻找的结果是：

表 C：

```
Col 1    Col 2    Col 4
-----------------------
A        1        a
A        2        b
A        3        null
A        4        null
....
A        15       null
.... 
```

我尝试了以下方法：

```
select
    tableA.col1,
    tableA.col2,
    tableB.col4
from
    tableA
inner join tableB on tableA.col1 = tableB.col3 
```

但这会产生结果：

```
Col 1    Col 2    Col 4
-----------------------
A        1        a
A        1        b
A        2        a
A        2        b
....
A        15       a
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:12:24.800

```
WITH A AS
(
SELECT *,
       ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col2) AS RN
FROM TableA
), B AS
(
SELECT *,
       ROW_NUMBER() OVER (PARTITION BY Col3 ORDER BY Col4) AS RN
FROM TableB
)
SELECT A.Col1, A.Col2, B.Col4
FROM A LEFT OUTER JOIN B ON A.Col1 = B.Col3 AND A.RN=B.RN 
```

[（SQL 小提琴）](http://sqlfiddle.com/#!3/0c9e1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:14:40.687

更改数据是一种选择吗？

```
Table A:

Col 1    Col 2
--------------
A        1
A        2
A        3
...
A        15
...
Table B:

Col 2    Col 4
--------------
1        a
2        b

SELECT tableA.col1, tableA.col2, tableB.col4
FROM tableA
LEFT JOIN tableB ON tableA.col2 = tableB.col2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:02:17.197

使用`left join`而不是`inner join`.

*   `inner join`只连接匹配的行
*   `left join`并`right join`返回完整的左表或右表，其中包含第二个表中的匹配行或空值
*   `full join`从两个表中获取所有行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:07:01.490

像这样使用`LEFT JOIN`：

```
SELECT 
        tableA.col1,
        tableA.col2,
        tableB.col4
    FROM tableA
    LEFT JOIN tableB on tableA.col1 = tableB.col3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T15:09:14.293

我认为您没有发布正确的查询和/或结果：（
我本来期望的）

```
Col 1    Col 2    Col 4
-----------------------
A        1        a
A        1        b
A        2        a
A        2        b
... 
```

为了达到您想要的结果，无论多么奇怪和不寻常，您都需要为表 B 生成一个序列号，以加入表 A 中的 Col 2。
我能想到的最简单的方法是使用子查询。

# android - 是否调用了 OnItemSelectedListener.onNothingSelected？

> ID：13419104
> 
> 赞同：10
> 
> 时间：2012-11-16T15:00:24.907
> 
> 标签：android, android-listview, listener

`OnItemSelectedListener`需要两种方法来实现：`onItemSelected`和`onNothingSelected`. 我很好奇并尝试在该`onNothingSelected`方法中执行一些操作。但是，我无法触发此事件。

它真的叫吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T15:38:51.180

`onNothingSelected`当“选择从此视图消失”时调用该方法。

这是[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)上的文档。

# android - 来自服务器的 JSON 回复

> ID：13419105
> 
> 赞同：0
> 
> 时间：2012-11-16T15:00:24.870
> 
> 标签：android, json

我正在用 Eclipse 编写一个 android 应用程序。我可以连接到服务器以获取 json 响应。但是，我的回复看起来像这样。

```
\n\n{"product_id":"200003578","category":"Jacket","price":"799","description":"Wool blended, Pea","details":"73% Wool, 27 Nylon"}\n 
```

eclipse无法解决并返回异常。

有谁知道我该如何处理这个响应并将其解析为一个数组？

这是我的php代码：

```
 include ("db3.inc");

$sql = "SELECT * from product WHERE product_id='200003578'";
$result = mysql_query($sql);

$array = mysql_fetch_assoc($result);
$product_id=$array['product_id'];

echo json_encode( $array ); 
```

这是我用于解码 json 响应的代码。

```
 String product_id = null;
    String colour_id = null;
    String colour= null;
    String picture= null;
    try{
    JSONArray jArray = new JSONArray(z);
    JSONObject json_data=null;
    for(int i=0;i<jArray.length();i++){
            json_data = jArray.getJSONObject(i);
            product_id=json_data.getString("product_id");
            colour_id=json_data.getString("colour_id");
            colour=json_data.getString("colour");
            picture=json_data.getString("picture");

    }
    }catch(JSONException e1){
        //Toast.makeText(getBaseContext(), "No Food Found", Toast.LENGTH_LONG).show();
    }

    myActivity.text.setText(product_id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:03:46.230

这是一个`JSONObject`not `JSONArray`，它应该被解析为：

```
JSONObject json_data=new JSONObject(yourstring.trim());
product_id=json_data.getString("product_id");
colour_id=json_data.getString("colour_id");
colour=json_data.getString("colour");
picture=json_data.getString("picture"); 
```

检查[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# php - 标头在我的服务器上不起作用

> ID：13419110
> 
> 赞同：0
> 
> 时间：2012-11-16T15:00:40.650
> 
> 标签：php, function, header

请问我的服务器有一个小问题：

当我使用 php "header" 函数时，它不起作用：

```
header('location: /index.html'); 
```

我在另一台具有相同 php 版本的服务器上尝试了这条线，它运行良好！

PHP版本：5.1.65

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:01:48.107

```
header('Location: /index.html');
                ^---missing colon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:03:23.833

正如 Dylan Cross 所提到的，您不能在标题之前有 HTML 输出。

如果您在调用“标题”之前需要一个库，它可能包含 html -无需注意 - 以休闲方式：

```
<?php 

   // Code here

?>{If there is a space after this close tag, it's considered as an HTML output} 
```

在这种情况下，您需要检查所有库...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:02:17.940

试试这个你错过了冒号（`:`）：

```
header('location: /index.html'); 
```

# objective-c - Objective-C类实现中的C函数和变量？

> ID：13419112
> 
> 赞同：6
> 
> 时间：2012-11-16T15:00:49.790
> 
> 标签：objective-c, c, compiler-construction

我可以像这样在 Objective-C 类实现中定义 c 函数和变量：

```
@implementation MyViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    cfunction();
}

// variable inside class
NSString *message = @"this is c function inside objective-c class";

// c function inside class
void cfunction() {
    NSLog(@"%@", message);
}

@end 
```

**结果**

```
this is c function inside objective-c class 
```

此代码可以正常工作，没有任何警告和错误。
它是有效的 Objective-C 代码吗？
在 Objective-C 类中定义变量和 c 函数是否安全？
是否有关于此语言规范的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:06:42.037

是的，这是正确且安全的，但您应该尽量避免。如果您需要一些 C 函数，请在单独的文件中定义它（并在单独的头文件中声明它）。

从技术上讲，Obj-C 是 C 语言之上的一个薄层，您可以在 Obj-C 源代码的任何位置使用任何 C 功能。但是，您应该遵守编码风格，而不是混合使用两种语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:07:30.477

> 它是有效的 Objective-C 代码吗？

是的。

> 在 Objective-C 类中定义变量和 c 函数是否安全？

是的。类中定义的函数的一个特殊属性是此类函数可以直接访问作为指定类实例的对象的私有和受保护的 ivars。

> 是否有关于此语言规范的文档？

请参阅围绕[此 SO 问题的讨论。](https://stackoverflow.com/questions/801976/mixing-c-functions-in-an-objective-c-class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-23T15:25:58.487

对不起，之前的答案在第三部分是非常错误的。

在objective-C 类的@implementation 中实现的C 函数不是该类的方法，而是简单的全局C 函数。

当然，可以将它们写在那里，有时甚至是有益的，因为它们是“类私有的”——其他代码将看不到它们，因为它们在@implementation 范围内。

但是 - 他们**无法访问任何 iVar、self、super**或与类或实例相关的任何内容。它们是 C 函数，而不是 Obj-C 方法。

任何访问 iVars 或 self 或 super 等的尝试都会产生编译器错误，提示“符号 xxx 未知”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T17:12:13.477

除了所有其他答案（尤其是莫蒂的）：

您可以在 C 函数前面加上 'static' 关键字。“静态”意味着只能从它所在的 C 文件中使用该函数。不能从该 C 文件外部导出或调用它。例如。如果头文件中有静态函数，您将获得它的多个副本。

就这么简单：

原型：

```
static void cfunction(); 
```

执行：

```
static void cfunction() {
    NSLog(@"%@", message);
} 
```

- 现在尝试从不同源文件中的代码调用它。

...而且混合 Objective-C 和 C 并没有错。一般来说：Objective-C 是**sluggish**。C++ 很*慢*，而 C 相当快。-因此，如果您有很多调用的子例程（或内联函数），请使用这些 C 函数而不是 Objective-C，因为 ObjC 会拖下您的循环。

# dynamics-crm-2011 - 将列添加到个人视图时出错

> ID：13419116
> 
> 赞同：0
> 
> 时间：2012-11-16T15:01:08.953
> 
> 标签：dynamics-crm-2011

我们的一位用户在 CRM 2011 中创建自己的个人视图时遇到了问题。他们能够进入高级查找菜单，但一旦他们去编辑列，就会出现一条消息，简单地说明发生了错误。但是，他们可以毫无问题地使用默认列保存视图。

我们做了一些测试，发现当我们将用户从默认业务单位移动到我们自己创建的业务单位时，它工作正常，如果我们将用户保留在默认业务单位但给他们管理员权限，它也工作正常.

因此，这似乎是某种安全/权限问题，但我不确定下一个要检查的地方。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:00:19.840

刚刚找到问题的原因。

毕竟这是一个权限问题。事实证明，为了创建个人视图和编辑列，分配给用户的角色必须能够阅读定制。完成此操作后，问题就消失了。

并且在将业务部门移动为这些部门的默认团队时已修复，这些部门已分配了已分配此权限的角色。

希望这可以帮助有任何类似问题的人

# c++ - 无法从 excel dll 中写入文件

> ID：13419123
> 
> 赞同：0
> 
> 时间：2012-11-16T15:01:25.687
> 
> 标签：c++, visual-studio-2010, excel, dll

我开发了一个 Excel dll，其代码如下：

```
 FILE *outf
 if((outf = fopen("filename.txt","w+"))!=NULL)
 {
   fprintf(outf,"hello");
  } 
 fclose.(outf); 
```

本质上，我试图从 dll 中写入文件，程序正确执行而没有任何错误，但我没有看到任何带有“filename.txt”的文件。它没有被创建，我在 c++ Visual Studio 2010 中开发的 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-06T02:12:05.543

它在 Excel DLL（或 XLL）所在的目录中创建了文件，因为这是 DLL 上下文的当前工作目录。除非您移动了 DLL，否则这是项目目录下的 Debug 目录。

下面的 Windows API 函数可用于检索 DLL 的完整路径。

```
DWORD WINAPI GetModuleFileName( HMODULE hModule, LPTSTR  lpFilename, DWORD  nSize  ); 
```

# ios - 从 WebView 获取 URL 以在 Safari 中打开

> ID：13419127
> 
> 赞同：0
> 
> 时间：2012-11-16T15:01:47.393
> 
> 标签：ios, url, uiwebview

I have an app that reads an RSS feed and when a row in the table view is selected, it opens the article in a web view. 我想要一个按钮来显示一个带有在 Safari 中打开 URL 的选项的操作表。我正在使用操作表，因为我将在不久的将来向它添加更多按钮。

WebViewController.m

```
//
//  WebViewController.m
//  KFBNewsroom
//
//  Created by KFB on 10/16/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "WebViewController.h"

@implementation WebViewController

- (void)loadView
{
    // Create an instance of UIWebView as large as the screen
    CGRect screenFrame = [[UIScreen mainScreen]applicationFrame];
    UIWebView *wv = [[UIWebView alloc]initWithFrame:screenFrame];
    // Tell web view to scale web content to fit within bounds of webview
    [wv setScalesPageToFit:YES];

    [self setView:wv];
}

- (UIWebView *)webView
{
    return (UIWebView *)[self view];
}

@end 
```

列表视图控制器.m

```
//
//  ListViewController.m
//  KFBNewsroom
//
//  Created by KFB on 10/16/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "ListViewController.h"
#import "RSSChannel.h"
#import "RSSItem.h"
#import "WebViewController.h"

@implementation ListViewController
@synthesize webViewController;

- (void)viewDidLoad
{
    self.title = @"Public Affairs";
    UIRefreshControl *refresh = [[UIRefreshControl alloc] init];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];
    [refresh addTarget:self action:@selector(refreshView:)forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refresh;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"%@ found a %@ element", self, elementName);
    if ([elementName isEqual:@"channel"])
    {
        // If the parser saw a channel, create new instance, store in our ivar
        channel = [[RSSChannel alloc]init];

        // Give the channel object a pointer back to ourselves for later
        [channel setParentParserDelegate:self];

        // Set the parser's delegate to the channel object
        [parser setDelegate:channel];
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // return 0;
    NSLog(@"channel items %d", [[channel items]count]);
    return [[channel items]count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // return nil;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
        cell.textLabel.font=[UIFont systemFontOfSize:16.0];
    }
    RSSItem *item = [[channel items]objectAtIndex:[indexPath row]];
    [[cell textLabel]setText:[item title]];

    return cell;
}

- (void)fetchEntries
{
    // Create a new data container for the stuff that comes back from the service
    xmlData = [[NSMutableData alloc]init];

    // Construct a URL that will ask the service for what you want -
    NSURL *url = [NSURL URLWithString:@"http://kyfbnewsroom.com/category/public-affairs/feed"];

    // Put that URL into an NSURLRequest
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Create a connection that will exchange this request for data from the URL
    connection = [[NSURLConnection alloc]initWithRequest:req delegate:self startImmediately:YES];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];

    if (self)
    {
        [self fetchEntries];
    }

    return self;
}

// This method will be called several times as the data arrives
- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    // Add the incoming chunk of data to the container we are keeping
    // The data always comes in the correct order
    [xmlData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    /* We are just checking to make sure we are getting the XML
     NSString *xmlCheck = [[NSString alloc]initWithData:xmlData encoding:NSUTF8StringEncoding];
     NSLog(@"xmlCheck = %@", xmlCheck);*/

    // Create the parser object with the data received from the web service
    NSXMLParser *parser = [[NSXMLParser alloc]initWithData:xmlData];

    // Give it a delegate
    [parser setDelegate:self];

    //Tell it to start parsing - the document will be parsed and the delegate of NSXMLParser will get all of its delegate messages sent to it before this line finishes execution - it is blocking
    [parser parse];

    // Get rid of the XML data as we no longer need it
    xmlData = nil;

    // Reload the table.. for now, the table will be empty
    [[self tableView]reloadData];

    NSLog(@"%@\n %@\n %@\n", channel, [channel title], [channel infoString]);
}

- (void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error
{
    // Release the connection object, we're done with it
    connection = nil;

    // Release the xmlData object, we're done with it
    xmlData = nil;

    // Grab the description of the error object passed to us
    NSString *errorString = [NSString stringWithFormat:@"Fetch failed: %@", [error localizedDescription]];

    // Create and show an alert view with this error displayed
    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Error" message:errorString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [av show];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Push the web view controller onto the navigation stack - this implicitly creates the web view controller's view the first time through
    // [[self navigationController]pushViewController:webViewController animated:YES];
    [self.navigationController pushViewController:webViewController animated:YES];

    // Grab the selected item
    RSSItem *entry = [[channel items]objectAtIndex:[indexPath row]];

    NSLog(@"Channel Items: %@", [[channel items]objectAtIndex:[indexPath row]]);

    // Construct a URL with the link string of the item
    NSURL *url = [NSURL URLWithString:[entry link]];

    NSLog(@"Link: %@", [entry link]);

    // Construct a request object with that URL
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    NSLog(@"URL: %@", url);

    // Load the request into the web view
    [[webViewController webView]loadRequest:req];

    NSLog(@"Request: %@", req);

    // Set the title of the web view controller's navigation item
    [[webViewController navigationItem]setTitle:[entry title]];

    NSLog(@"Title: %@", [entry title]);
}

-(void)refreshView:(UIRefreshControl *)refresh
{
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Refreshing data..."];

    // custom refresh logic would be placed here...

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMM d, h:mm a"];
    NSString *lastUpdated = [NSString stringWithFormat:@"Last updated on %@",[formatter stringFromDate:[NSDate date]]];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:lastUpdated];
    [refresh endRefreshing];
}

@end 
```

这是我在另一个视图中的操作方式，但它更容易，因为它只使用一个特定的 URL。

```
//
//  KYFB.m
//  KFBNewsroom
//
//  Created by KFB on 11/14/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "KYFB.h"
#import <MessageUI/MessageUI.h>

@interface KYFB ()

@end

@implementation KYFB
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"KYFB.com", @"KYFB.com");
        self.tabBarItem.image = [UIImage imageNamed:@"kyfb-com"];
    }
    return self;
}

- (void) showMenu
{
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"Cancel"
    destructiveButtonTitle:nil otherButtonTitles: @"Open in Safari", nil, nil];

    actionSheet.actionSheetStyle = self.navigationController.navigationBar.barStyle;
    [actionSheet showInView:self.parentViewController.tabBarController.view];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    NSString *urlAddress = @"http:www.kyfb.com";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];

    UIBarButtonItem *systemAction = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(showMenu)];
    self.navigationItem.rightBarButtonItem = systemAction;
}

- (void)actionSheet:(UIActionSheet *)modalView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSURL *url = [NSURL URLWithString:@"http://www.kyfb.com"];

    switch (buttonIndex)
    {
        case 0:
        {
            [[UIApplication sharedApplication] openURL:url];
            break;
        }
    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我只是不确定如何为 WebViewController 和 ListViewController 实现这个想法。

更新：我已将代码添加到我的 WebViewController 类。系统操作按钮现在出现在 Web 视图导航栏上，按下它会拉起操作表，但在 safari 中打开按钮不会执行任何操作。

WebViewController.h

```
//
//  WebViewController.h
//  KFBNewsroom
//
//  Created by KFB on 10/16/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import <Foundation/Foundation.h>

// @interface WebViewController : NSObject
@interface WebViewController : UIViewController <UIActionSheetDelegate>
{
    IBOutlet UIWebView *webView;
}

@property (nonatomic, readonly)UIWebView *webView;

@end 
```

WebViewController.m

```
//
//  WebViewController.m
//  KFBNewsroom
//
//  Created by KFB on 10/16/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "WebViewController.h"

@implementation WebViewController
@synthesize webView;

- (void)loadView
{
    // Create an instance of UIWebView as large as the screen
    CGRect screenFrame = [[UIScreen mainScreen]applicationFrame];
    UIWebView *wv = [[UIWebView alloc]initWithFrame:screenFrame];
    // Tell web view to scale web content to fit within bounds of webview
    [wv setScalesPageToFit:YES];

    [self setView:wv];
}

- (UIWebView *)webView
{ 
    return (UIWebView *)[self view];
}

- (void) showMenu
{
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"Cancel"
                                               destructiveButtonTitle:nil otherButtonTitles: @"Open in Safari", nil, nil];

    actionSheet.actionSheetStyle = self.navigationController.navigationBar.barStyle;
    [actionSheet showInView:self.parentViewController.tabBarController.view];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    UIBarButtonItem *systemAction = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(showMenu)];
    self.navigationItem.rightBarButtonItem = systemAction;
}

- (void)actionSheet:(UIActionSheet *)modalView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // NSURL *url = [NSURL URLWithString:@"http://www.kyfb.com"];
    NSURL *url= webView.request.URL;

    switch (buttonIndex)
    {
        case 0:
        {
            [[UIApplication sharedApplication] openURL:url];
            break;
        }
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:50:09.127

在`clickedButtonAtIndex:`您可以使用 webview 的当前 URL：

```
NSURL *url= webView.request.URL;
//or NSURL *url = [NSURL URLWithString:webView.request.URL.absoluteString]; 
```

# javascript - 使用事件流结束处理流

> ID：13419130
> 
> 赞同：3
> 
> 时间：2012-11-16T15:01:50.160
> 
> 标签：javascript, node.js

我正在使用 JSONStream 读取一个大型 JSON 文件，并且我想在处理整个流时调用一个方法。

```
var JSONStream = require('JSONStream'), es = require('event-stream');

es.pipeline(
  fs.createReadStream('file.json'),
  JSONStream.parse(['features', true]),
  es.map(function (data) {
    console.log("Added data");
  })
); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-29T13:42:38.380

我使用'event-stream'处理约200kB的文件，其中包含JSON，并且在使用'event-stream'时从未调用'end'事件时遇到问题，如果我在event-stream之后放置.on（'end'）管道。但是当我把它放在管道之前 - 一切正常！

```
stream.on('end',function () {
            console.log("This is the End, my friend");                
     }).on('error',function (err) {
                console.error(err);
     }).pipe(es.split())
       .pipe(es.map(function (line, cb) {
                //Do anything you want here with JSON of line
                return cb();
            })); 
```

[nodejs](/questions/tagged/nodejs "显示标记为“nodejs”的问题") , [事件流](/questions/tagged/event-stream "显示标记为“事件流”的问题")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:28:19.567

排序。将读取流保存在变量中并在该读取流上传递 on('end', function) 。

# .net - 为什么#if debug 在服务器上不起作用

> ID：13419132
> 
> 赞同：0
> 
> 时间：2012-11-16T15:02:03.243
> 
> 标签：.net, web-services

我有

```
 #if debug then
 #end if 
```

输出事件查看器日志的 web 服务中的语句。这在本地测试时可以正常工作。如果我构建了一个调试版本，然后将文件复制到实时服务器并重新循环 Web 服务的应用程序池，我在事件查看器中看不到这些日志。有什么理由不工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:45:18.140

您需要先注册您的事件日志源。这需要管理员权限。我经常使用一个简单的控制台应用程序（类似[这样](https://stackoverflow.com/questions/2667248/windows-event-log-how-to-register-an-event-source)）来注册我在 Web 应用程序和服务中使用的事件日志源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:54:54.070

`<compilation debug="true" />`没有定义*DEBUG*预处理器标志。您需要修改 system.codedom 配置才能做到这一点。默认的 Visual Studio 模板带有预定义的标志（项目设置 > 构建、“定义调试常量”和“定义跟踪常量”），这就是它们在您在 Visual Studio 中编译的项目中工作的原因。

请改用[HttpContext.IsDebuggingEnabled](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.isdebuggingenabled.aspx)。

# java - 使用 vtd-xml 加载巨大的 4Gb XML 文件

> ID：13419135
> 
> 赞同：3
> 
> 时间：2012-11-16T15:02:12.097
> 
> 标签：java, out-of-memory, vtd-xml

我正在评估 vtd-xml 作为大型数据迁移项目的可能解决方案。输入数据为 xml 格式，如果 vtd-xml 可行，它将节省大量开发时间。我从 vtd-xml 网站运行示例处理巨大的 XML 文档（大于 2GB）：http: [//vtd-xml.sourceforge.net/codeSample/cs12.html](http://vtd-xml.sourceforge.net/codeSample/cs12.html)。

我成功处理了 500Mb，但得到了可怕的 java.lang.OutOfMemoryError: Java heap space error with a 4Gb file。

> > 1.  JVM 参数：-Xmn100M -Xms500M -Xmx2048M。
> > 2.  JVM 参数：-Xmn100M -Xms500M -Xmx4096M。

使用 Maven：

> > 1.  设置 MAVEN_OPTS=-Xmn100M -Xms500M -Xmx2048M
> > 2.  设置 MAVEN_OPTS=-Xmn100M -Xms500M -Xmx4096M

注意：我已经使用 JVM 参数的各种组合对其进行了测试。

我研究了 vtd-xml 站点和 API 文档，并在这里和其他地方浏览了许多问题。所有的 awnsers 都指向将 JVM 内存设置得更高或添加更多的物理内存。vtd-xml 网站指的内存使用量是 xml 文件大小的 1.3x-1.5x，但如果使用 64 位，则应该能够处理比可用内存大得多的文件。当然，添加 64Gb 内存来处理 35Gb xml 文件也是不可行的。

> > 环境：
> > 
> > 视窗 7 64 位。6Gb 内存。（关闭所有其他应用程序，85% 内存可用）
> > 
> > java版本“1.7.0_09”
> > 
> > Java(TM) SE 运行时环境 (build 1.7.0_09-b05)
> > 
> > Java HotSpot(TM) 64 位服务器 VM（内部版本 23.5-b02，混合模式）
> > 
> > 日蚀靛蓝
> > 
> > Maven 2

从 Eclipse 和 Maven 运行该示例会引发 Out of memory 异常。

示例代码：

```
 import com.ximpleware.extended.VTDGenHuge;
 import com.ximpleware.extended.VTDNavHuge;
 import com.ximpleware.extended.XMLMemMappedBuffer;

 public class App {

/* first read is the longer version of loading the XML file */
public static void first_read() throws Exception{
XMLMemMappedBuffer xb = new XMLMemMappedBuffer();
    VTDGenHuge vg = new VTDGenHuge();
    xb.readFile("C:\\Temp\\partial_dbdump.xml");
    vg.setDoc(xb);
    vg.parse(true);
    VTDNavHuge vn = vg.getNav();
    System.out.println("text data ===>" + vn.toString(vn.getText()));
}   

/* second read is the shorter version of loading the XML file */
public static void second_read() throws Exception{
    VTDGenHuge vg = new VTDGenHuge();
    if (vg.parseFile("C:\\Temp\\partial_dbdump.xml",true,VTDGenHuge.MEM_MAPPED)){
        VTDNavHuge vn = vg.getNav();
        System.out.println("text data ===>" + vn.toString(vn.getText()));
    }
}

public static void main(String[] s) throws Exception{
    first_read();
    //second_read();
}

} 
```

错误：

```
 Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at com.ximpleware.extended.FastLongBuffer.append(FastLongBuffer.java:209)
at com.ximpleware.extended.VTDGenHuge.writeVTD(VTDGenHuge.java:3389)
at com.ximpleware.extended.VTDGenHuge.parse(VTDGenHuge.java:1653)
at com.epiuse.dbload.App.first_read(App.java:14)
at com.epiuse.dbload.App.main(App.java:29) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:10:28.097

您告诉 Java 它的最大堆大小为 2GB，然后要求它处理一个 4GB 大的 XML 文件。

为了有机会完成这项工作，您需要定义一个大于您尝试处理的文件大小的最大堆 - 或者将处理机制更改为不需要内存中的整个文件的处理机制同时。

从他们的网站，

> 世界上内存效率最高的（XML 文档大小的 1.3 倍~1.5 倍）随机访问 XML 解析器。

这意味着对于一个 4GB 的文件，您需要大约 6GB 的最大堆大小，假设您的应用程序不需要任何其他内存。

试试这些 JVM 参数：

> -Xmn100M -Xms2G -Xmx6G

您可能仍然会耗尽内存，但至少现在您有机会。

哦，是的 - 您可能会发现您的 Java 现在无法启动，因为操作系统无法为 Java 提供它所要求的内存。如果发生这种情况，您需要一台具有更多 RAM（或者可能是更好的操作系统）的机器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-02T02:04:40.777

您必须使用扩展 vtd-xml 进行加载...标准 vtd-xml 仅支持最大 2GB 的文档加载...扩展 vtd-xml 支持最大 256 GB 的文档。它还启用延迟加载（即内存映射）。您完全不会失去 XPath 的舒适性和效率。

# objective-c - 延迟xcode中的命令

> ID：13419145
> 
> 赞同：0
> 
> 时间：2012-11-16T15:02:42.343
> 
> 标签：objective-c, ios, cocoa-touch, button, alpha

我正在尝试实现一个与按钮上的 alpha 值混淆的简单动画。但它走得太快，你看不到动画。

```
-(void)Flash: (id)sender {
    UIButton *senderButton = (UIButton *)sender;
    for (float i = 0.8; i > 0.2; i = i - 0.1) {
        senderButton.alpha = i;
    }
    senderButton.alpha = 0.9;
} 
```

每0.5秒怎么能减慢进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:09:44.900

要在指定的持续时间内减少视图的不透明度，请将其放入动画块中。您可以设置 alpha - 我个人的偏好是为诸如此类的视觉处理调整图层属性（主要是我的代码库中的一致性问题）。您可以使用此处演示的任何一种方法（不要同时使用两者） - 在这种情况下差异可以忽略不计。如果您修改图层属性，则需要导入 Quart 标头。

```
- (void)flash:(id)sender
{
    UIButton *button = (UIButton *)sender;

    NSTimeInterval duration = 1;
    [UIView animateWithDuration:duration
                     animations:^{

                         // My preferred approach is to set layer opacity...
                         [[button layer] setOpacity:0.1f];

                         // But you could just as easily set alpha (per your original question)
                         [button setAlpha:0.1f];

                     } completion:^(BOOL finished) {

                         // Returns the button to full opacity on completion.
                         [[button layer] setOpacity:1.0f];

                         // Or alternately, alpha
                         [button setAlpha:1.0f];
                     }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:12:38.217

```
for (float i = 0.8; i > 0.2; i = i - 0.1) {
    senderButton.alpha = i;
} 
```

您在这里（至少）有两个问题：

1.  您的更改`alpha`速度大约是设备的六倍，这*非常*快。绝对不可能有人看到这种情况发生。您需要在每次更改之间添加延迟以减慢速度。

2.  您在`alpha`不重绘视图的情况下更改了很多次。重绘是运行循环的一部分；当您使用这样的`for`循环时，您的所有更改都会同步发生，并且运行循环在每次更改后都没有机会重绘。因此，即使您添加了延迟以将动画减慢到人们可以看到的程度，人们*仍然*看不到它，因为您没有绘制它。

您可以使用 Core Animation 轻松解决这两个问题。以撒在他的回答中提供的例子很好。如果没有 Core Animation，您需要使用计时器来提供延迟。计时器会在每次触发时调用您的代码，以便您进行更改，并且它还允许运行循环正常运行，以便视图可以重绘。Core Animation 让这一切变得更简单——你设置动画持续时间和动画属性的最终值，例如`alpha`，Core Animation 会随着时间慢慢调整属性的值，直到它在动画结束时达到最终值.

# asp.net - 在 ASP MVC 中有一个外部资源 dll 没有意义吗？

> ID：13419148
> 
> 赞同：0
> 
> 时间：2012-11-16T15:02:56.300
> 
> 标签：asp.net, asp.net-mvc, resource-management

我一直在尝试在 ASP.NET MVC 应用程序中找到推荐的资源管理实践。（目标 .NET 4.0）

到目前为止，我还没有弄清楚是否应该将单独的附属程序集添加到我的 MVC 应用程序或在项目本身中添加资源。

此外，MVC 应用程序中的卫星程序集创建也有很大不同。也许它们甚至不被称为附属程序集。我的理解是，为了引用外部 resource.dll 文件，我应该创建一个不同的 ASP.NET MVC 项目，将我的资源文件添加到“资源”文件夹和然后添加对由此生成的 dll 的引用。这是正确的方法吗？我认为 al.exe 进程与 MVC 应用程序无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:29:13.443

我按照 Mark 将这些资源捆绑在一个单独的 dll 中，这似乎工作正常..

# c - 如何获取我的代码的运行时间？

> ID：13419150
> 
> 赞同：2
> 
> 时间：2012-11-16T15:02:56.040
> 
> 标签：c

我完成了一个类项目的编程，但我仍然需要获得运行时间。我尝试了clock() 函数，但它不起作用。

```
int main()
{
  clock_t start_time=clock();
  (my codes)
  clock_t end_time=clock();
  printf("The running time is %f", end_time-start_time);
} 
```

我想这是使用时钟功能的正确方法，对吗？但我得到的只有 0.000000。有人能告诉我正确的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:07:30.213

`clock_t`不是 a `float`，而是整数类型，很可能是 a `long`。

所以你可能会习惯`%ld`它`printf()`。

* * *

也不`clock()`返回秒数，但 CPU 滴答声。因此，要获得秒，返回的值`clock()`应除以系统常量`CLOCKS_PER_SEC`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:08:30.490

菲尔你以正确的方式做（也许你也应该除以 CLOCKS_PER_SEC）

```
 float time = (float)(end_time-start_time)/(float)CLOCKS_PER_SEC;
   printf("The running time is %f", time); 
```

并且不要忘记将其转换为“float”，因为如果结果为 0.5，由于整数除法，它将向下舍入为 0.0。

在那之后你的程序需要多长时间才能执行？因为据我所知，时钟具有测量几毫秒时间的能力，所以如果你的程序花费的时间少于几毫秒，很可能不会检测到这个时间（时钟非常适合测量几秒的时间，相对精度好）

# javascript - 有没有办法使用 Javascript 获取/设置视频或 Flash 对象的低音和高音？

> ID：13419153
> 
> 赞同：1
> 
> 时间：2012-11-16T15:03:04.510
> 
> 标签：javascript, youtube-api, html5-video

假设您链接到 YouTube 上的视频（使用嵌入或 YouTube API），或者您只使用 HTML5 视频。在前一种情况下，您正在处理 Flash，因此它似乎在可能的范围内。后一种情况似乎是不可能的。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:22:51.110

可以使用纯 javascript 来做到这一点。

您必须查看 webaudio api：[https ://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)

想法如下：音频流通过节点。

```
[Source node (i.e. your video)]-->[Analyzer node]-->[Your custom js node] 
```

并且（如果需要播放音频）：

```
[Source node (i.e. your video)]-->[Output node (i.e. speakers)] 
```

借助 fft（又名快速傅立叶变换），Analyzer 节点可让您实时分析声音并按频率对其进行采样。

您现在有了 fft 给您的每个频率的幅度。因此，您可以从中获取低音和高音。

您现在可以将您的自定义 js 节点插入分析器并使用`onaudioprocess`回调来分析分析器节点给出的频率并使用它做您想做的事情。

这是我写的关于它的记录良好的代码：[https ://github.com/xseignard/webGLWebAudioAPI/blob/master/js/app/audio.js](https://github.com/xseignard/webGLWebAudioAPI/blob/master/js/app/audio.js)

它是以下演示的一部分：http: [//xseignard.github.com/webGLWebAudioAPI/](http://xseignard.github.com/webGLWebAudioAPI/)

还有这篇文章，它提供了一些很好的指导：[http ://www.smartjava.org/content/exploring-html5-web-audio-visualizing-sound](http://www.smartjava.org/content/exploring-html5-web-audio-visualizing-sound)

以及下面的演示（看代码）：[http ://www.smartjava.org/examples/webaudio-filters/](http://www.smartjava.org/examples/webaudio-filters/)

请注意，这些演示仅适用于最近的 Chrome

玩得开心

**更新：**此解决方案仅适用于纯 html5 视频，而不适用于 @tim-wintle 提到的 youtube 视频。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:38:33.077

Xavier 的回答对于一般情况来说非常好，但是如果您专门询问 YouTube API，那么不，您不能这样做。

特别是，您应该仔细阅读 YouTube API 服务条款： [https ://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

特别是，您不得“分离、隔离或修改通过 YouTube API 提供的任何 YouTube 视听内容的音频或视频组件”。

从技术角度来看，他们在 Flash Player 中采取了措施来阻止对流的访问，并且在 iframe API 中，他们将内容放在单独的域中以防止这种情况。

# matlab - ndgrid 的内存问题

> ID：13419156
> 
> 赞同：2
> 
> 时间：2012-11-16T15:03:17.093
> 
> 标签：matlab, memory, multidimensional-array

在 Matlab 中，我使用“ndgrid”创建一个 6D 矩阵。这是代码：

```
for i=1:3
    dd{i}=[0 0 0 0 0 0 0 1 1 1 1 1];
    ss{i}=[0 0 0 0 0 0 1 1 1 1 1 1];
end 
[D1 D2 D3 S1 S2 S3] = ndgrid(dd{1},dd{2},dd{3},ss{1},ss{2},ss{3});
out = D1.*S1.*D2.*S2.*D3.*S3; 
```

我遇到的问题是，虽然我有足够的内存来存储一个或两个 6-D 矩阵，但我没有足够的内存来存储所有 6 个矩阵：

```
[D1 D2 D3 S1 S2 S3] 
```

如您所见，矩阵 D1、D2... 和“out”本质上是稀疏的，但 Matlab 中的“稀疏”功能不适用于多维数组。我在 Matlab 中搜索了其他“网格”功能，但找不到可以帮助我避免计算 D1、D2 等中间步骤的“网格”功能。

一般来说，我希望 dd{1} 与 dd{2} 不同。此外，我发布的这个 6-D 案例不会占用太多内存，但 8-D 案例会，这就是我遇到问题的地方。

非常感谢在这种情况下更有效地利用内存的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:45:01.137

这是一个循环几乎肯定会更快（并且适合！）的情况，因为您受内存限制。只需使用 6 个（或 8 个）嵌套的 for 循环，然后`out`一次放入 的每个元素。使用嵌套循环索引直接引用源向量，并确保将正确的索引与正确的向量匹配。这将只限制您输出数组的最大大小。

**用新思路编辑：**

哦，我只是想到了`bsxfun`，它会做完全正确的事情，除了它只接受两个参数。它本质上是在任何单一维度上根据需要进行复制。成对嵌套`bsxfun`调用将毫无意义，因为中间结果将恢复为完整大小。但这是将维度减少一半的好方法，这对于幂项来说很重要：

```
[D1 D2 D3] = ndgrid(dd{1},dd{2},dd{3});
[S1 S2 S3] = ndgrid(ss{1},ss{2},ss{3});
out = bsxfun(@times, D1.*D2.*D3, reshape(S1.*S2.*S3, [1 1 1 12 12 12])); 
```

显然 12s 必须被动态尺寸替换。现在，您只需要 D*N^(D/2)，而不是 D*N^D 元素。在您恢复到 14 或 16 维之前，您不会遇到内存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:47:45.810

编辑：我找到了一种使用线性索引快速快速完成的方法。

```
out=D1(:) %Initialize out to give it the right dimensions, bit ugly perhaps

out(:) = D1(:).*S1(:).*D2(:).*S2(:).*D3(:).*S3(:); 
```

# android - Andengine-如何在android游戏中为Sprite创建重叠和碰撞？

> ID：13419157
> 
> 赞同：1
> 
> 时间：2012-11-16T15:03:24.433
> 
> 标签：android, sprite, andengine

我是**Android 游戏开发**的新手，我正在使用**AndEngine GLES 2** Java。在这个编码中，我创建了 2 个精灵，分别是**small_box**和**big_box** 。当我将**small_box**拖到**big_box**或相反时，它会相互排斥。这很好用，但我的问题是第一个**small_box**和第一个**big_box**相互排斥，但是第二个**small_box**和**big_box**不排斥。如何解决？我想要所有**big_box的所有****small_box**排斥，当我将**small_box**拖到另一个**small_box 时**它应该重叠，甚至在**big_box**到另一个**big_box**也......请任何人都可以通过修改此代码或使用示例来帮助这个......

```
public class SampleActivity extends SimpleBaseGameActivity {
    protected static final int CAMERA_WIDTH = 800;
    protected static final int CAMERA_HEIGHT = 480;
    private ITextureRegion Box1, Box2;;
    private Stack Stack1, Stack2;
    private Sprite small_box,big_box;
    //private final Sprite small_box = new Sprite[1];

    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    public void onCreateResources() {
        try {
            ITexture small_box = new BitmapTexture(this.getTextureManager(),
                    new IInputStreamOpener() {
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/small_box.png");
                        }
                    });
            ITexture big_box = new BitmapTexture(this.getTextureManager(),
                    new IInputStreamOpener() {
                        public InputStream open() throws IOException {
                            return getAssets().open("gfx/big_box.png");
                        }
                    });
            small_box.load();
            big_box.load();
            this.Box1 = TextureRegionFactory.extractFromTexture(small_box);
            this.Box2 = TextureRegionFactory.extractFromTexture(big_box);
            this.Stack1 = new Stack();
            this.Stack2 = new Stack();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public Scene onCreateScene() {
        final Scene scene = new Scene();
        scene.setBackground(new Background(1, 1, 1));
        for( int i=0;i<2;i++){
            small_box = new Sprite(i*300, 100, Box1, this.getVertexBufferObjectManager()) {
                public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,  float pTouchAreaLocalX,  float pTouchAreaLocalY) {
                    if (((Sprite) this.getmStack().peek()).getHeight() != this
                            .getHeight())
                        return false;
                    this.setPosition(pSceneTouchEvent.getX() - this.getWidth()
                            / 2, pSceneTouchEvent.getY() - this.getHeight() / 2);
                    if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_UP){
                        checkForCollisionsWithBoxes();
                    }
                    return true;
                  }
                private Stack getmStack() {
                    // TODO Auto-generated method stub
                    return Stack2;
                }
              };
              big_box = new Sprite(i*300, 200, Box2, this.getVertexBufferObjectManager()) {
                    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,  float pTouchAreaLocalX,  float pTouchAreaLocalY) {
                        if (((Sprite) this.getmStack().peek()).getHeight() != this
                                .getHeight())
                            return false;
                        this.setPosition(pSceneTouchEvent.getX() - this.getWidth()
                                / 2, pSceneTouchEvent.getY() - this.getHeight() / 2);
                        if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_UP){
                            checkForCollisionsWithBoxes();
                        }
                        return true;
                      }
                    private Stack getmStack() {
                        // TODO Auto-generated method stub
                        return Stack1;
                    }
                  };
                  scene.attachChild(small_box);
                  scene.attachChild(big_box);
                  this.Stack1.add(big_box);
                  this.Stack2.add(small_box);
                scene.registerTouchArea(small_box);
                scene.registerTouchArea(big_box);
                scene.setTouchAreaBindingOnActionDownEnabled(true);
        }
        return scene;
    }

    private void checkForCollisionsWithBoxes() {
        if ((big_box.collidesWith(small_box) && (Stack1.size() == 0 || small_box.getHeight() < ((Sprite) Stack1.peek()).getHeight()))) {
            small_box.setPosition(100+big_box.getWidth()/2, 50+ big_box.getHeight());
            big_box.setPosition(300+small_box.getWidth()/2, 250+small_box.getHeight()/2);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:02:43.040

您只检查创建的新框，这就是为什么

我建议你为此使用 box2D，如果你需要例如小盒子只与小盒子而不是大盒子碰撞，那么已经有一个关于 box2D 碰撞和过滤碰撞的例子

这是过滤冲突的链接 [https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/PhysicsCollisionFilteringExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/PhysicsCollisionFilteringExample.java)

# c++ - 填写我的 VBO 的最佳方式是什么？

> ID：13419160
> 
> 赞同：0
> 
> 时间：2012-11-16T15:03:28.770
> 
> 标签：c++, arrays, opengl, vbo, vertex

我正在使用存储在名为 CMesh 的类的对象中的 OpenGL 渲染几个网格。一个 CMesh 包含很多由 CVertex 对象和三角形表示的顶点。每个 CVertex 都包含一个 Vector 及其位置。
由于顶点位置在渲染过程中不断变化，因此每次渲染网格时我都必须重写我的 VBO 数据数组。尽管与其他大型游戏相比，我没有那么多顶点，但这会极大地减慢整个程序。
有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:45:15.423

使用变形目标或至少使用带有多个骨骼的蒙皮网格。这比手动更新每个顶点要好得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:06:31.693

假设您使用的是 GL_STATIC_DRAW，您可以将其更改为使用 GL_DYNAMIC_DRAW，它不应该同样减慢程序的速度。或者，计算对象在 GPU 上的新位置也是一种值得研究的可能性。

# android - 拥有一台 Android 主机和多台配对的 Android 时使用的最快连接？

> ID：13419161
> 
> 赞同：0
> 
> 时间：2012-11-16T15:03:39.997
> 
> 标签：android, bluetooth, wifi, latency, connectivity

基本上我需要这台 Android 主机一次向大约 2 或 3 部其他手机发送和接收数据，或者至少非常快速地按顺序发送和接收数据。所有谷歌搜索似乎都指向蓝牙，但这不是一种高延迟技术吗？如果可能的话，我需要一些接近即时的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:38:58.217

> 但这不是一种高延迟技术吗？

考虑到人们使用蓝牙键盘和鼠标没有问题，我认为蓝牙延迟是可以的。我想这取决于您对“高延迟技术”的描述以及您测量的位置。例如，如果您包括配对设备的时间，这与您仅测量数据传输的延迟不同。

> 如果可能的话，我需要一些接近即时的东西。

Android 中可用的收音机只有这么多，而电话收音机（GSM 或 CDMA）不会在这里使用。因此，除了蓝​​牙，您的选择是：

*   无线上网
*   WiFi Direct（适用于支持它的设备和操作系统版本）
*   NFC（适用于支持它的设备和操作系统版本，如果您愿意将这些设备一起点击）
*   低功耗蓝牙（适用于支持它的设备，如果设备非常靠近 IIRC）

使用附件开发工具包并通过 USB 做一些事情也不是完全不可能的，尽管这需要主设备是 USB 主机，我不知道 ADK 是否会支持这种结构。

# php - onClick 方法只从 json_encode 中返回一个对象

> ID：13419166
> 
> 赞同：0
> 
> 时间：2012-11-16T15:03:58.207
> 
> 标签：php, jquery, ajax, json

我正在`json_encode`对表格的结果做一个方法。

当我`var_dump`对这个变量做 a 时。我得到三个对象。

```
{"id": "5"}
{"id": "6"}
{"id": "7"} 
```

所以这是我的过程。我有一个带有 onclick 方法的图像。

```
<input type='image' onclick='download(".$z.")'> 
```

这是我的开发人员工具中按钮的外观。

```
<input type="image" src="image.jpg" onclick=download({"id":"13","itemName":"","itemDesc":"","imageURL":"","language":"English (US)","category":"Presentation","size":"1970 KB","flagDesc":"","fileType":"PPTX"})"> 
```

这是我正在使用的方法。我的方法没有拾取我所有的对象。它只拾取最后一个对象。为什么？

```
 function download(z)
    {
        $.ajax({
            type: 'POST',
            url:'download.php',
            data: { image: JSON.stringify(z) },
            success:function(results){
                $('div').html(results);
            }
        });
    } 
```

在我的 download.php 文件中，我正在转储`json_decode($_POST['image']);`

我多次得到同一个对象，但只有一个对象。我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:14:07.163

那不是有效的json。json 字符串必须评估为单个实体。一个数组，一个对象，一个字符串，一个int。那里有 3 个单独的对象。为了使其远程有效，它看起来更像：

```
[ {"id" : 5}, {"id": 6}, {"id" : 7} ] 
```

例如对象数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:17:37.653

这个独立的例子对我很有效。

```
<?php if ( empty($_POST) ) {
$z = json_encode(array(
    array('id'=>5),
    array('id'=>6),
    array('id'=>7)
));
?>
<html>
    <head>
        <title>...</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">

            function download(z)
            {
                $.ajax({
                    type: 'POST',
                    url:'?',
                    data: { image: JSON.stringify(z) },
                    success:function(results){
                        $('div').html(results);
                    }
                });
            }
    </script>
    </head>
    <body>
        <input type='image' onclick='download(<?php echo $z; ?>)' />
        <div></div>
    </body>
</html>
<?php
}
else if (!isset($_POST['image'])) {
    die('missing parameter');
}
else {
    $imgs = json_decode($_POST['image'], true);
    echo '<pre>', htmlspecialchars(var_export($imgs, true), ENT_COMPAT, 'utf-8'), '</pre>';
} 
```

单击“图像”按钮后

```
array (
  0 => 
  array (
    'id' => 5,
  ),
  1 => 
  array (
    'id' => 6,
  ),
  2 => 
  array (
    'id' => 7,
  ),
) 
```

显示在输出 div

# asp.net - ASP.NET default.aspx 不会使用 CSS 呈现，但网站的其他部分会

> ID：13419169
> 
> 赞同：0
> 
> 时间：2012-11-16T15:04:03.840
> 
> 标签：asp.net, css

我对 ASP 等很陌生，所以我有点迷茫。我试过搜索，但似乎找不到我的确切问题。

我一直在使用的代码是针对当前网站的，我一直在尝试用它创建一个移动变体。

问题是，default.aspx 页面不是用 CSS 呈现的，但其余的网页是。该站点位于开发 IIS 7 服务器上。当我在 ie MyDomain.com/MySite 中键入地址时，会加载默认页面，但没有任何 CSS。如果我单击菜单上的某个项目，它会完美地显示所有 CSS 等。如果我单击返回主页，则没有 CSS。

正如我所说，我是 ASP 新手，似乎无法找到 CSS 的定义位置。如果我加载页面，然后右键单击并查看源代码。默认页面顶部没有定义 CSS 文件，但如果我对另一个页面执行相同操作，它们就在顶部。所有页面都使用相同的 site.master。所有 CSS 文件都在项目区域的 App_Theme 文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:56:47.840

我强烈鼓励标准使用 CSS，而不是使用主题作为抽象。主题可能会导致升级/添加/删除控件的许多问题。它们也不能很好地级联。使用母版页中的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:18:42.867

应在 head 部分的母版页上引用 CSS。但是，如果您的其他页面附加了样式，这将覆盖 css 页面。当处理 CSS 查看源代码不是最佳选择时，要么为 firefox 安装 firebug，要么使用 Google chrome 并选择 F12，因为这将让您查看 css 并更改 adhoc 以查看哪些有效以及哪些影响页面元素。我怀疑默认值没有引用相同的母版页，因此可能是在 Web 表单顶部添加它（我假设它不是 MVC）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:46:38.230

我把它修好了。我发现了 <%Page Themes 标记，并将其添加到 default.aspx 页面，它可以工作。

# c# - 在 VS 2010 解决方案中重复使用 nuget 包

> ID：13419170
> 
> 赞同：0
> 
> 时间：2012-11-16T15:04:06.647
> 
> 标签：c#, visual-studio-2010, nuget-package

我刚开始使用[Nuget 包管理器](http://www.nuget.org/)，有些事情让我很困惑。当我安装一个包时，它是按项目或每个解决方案安装的，如果我想在不同的解决方案或项目中使用相同的包，我必须重新安装它。我希望能够像添加本地程序集或图像文件一样将包添加到新解决方案中。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:16:51.950

您这样做的方式是这样的：将项目目录中的 dll/dlls 复制到您创建的文件夹中，例如在 c:\DLLs\ 中，然后对于要使用该包的每个新项目，只需在添加参考...

# jquery - 文本的纯色背景色

> ID：13419172
> 
> 赞同：0
> 
> 时间：2012-11-16T15:04:10.540
> 
> 标签：jquery, css

是否可以使用 CSS3 或 jQuery 创建这种效果？

![图像](../Images/feba53b216fa881c23e73bc997904bff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:11:01.403

这确实是一个表现问题，所以为了您的用户和[渐进增强](http://coding.smashingmagazine.com/2009/04/22/progressive-enhancement-what-it-is-and-how-to-use-it/)，这是一个由 CSS 而不是 JavaScript 更好地处理的任务。

你可以做一个[`text-stroke`声明](http://jsfiddle.net/remibreton/ZQ7Gx/)。不幸的是，它现在只支持 WebKit。

```
-webkit-text-stroke:2px white; 
```

另外，在您的具体示例中，您需要在文本之外对齐笔划，这目前是不可能的。

来自[CSS 技巧](http://css-tricks.com/adding-stroke-to-web-text/)：

> 对我来说，只有外部文本笔画对齐看起来一点都不错。不幸的是，对于 CSS 和 Illustrator 来说，不可更改的默认值是居中的。

您总是可以在各个方向[堆叠`text-shadow`声明](http://jsfiddle.net/remibreton/vBhCp/)以实现此效果。这比 text-stroke 有点混乱，但浏览器支持更好（目前）。

```
text-shadow:  0 1px 0 white, 0 2px 0 white,
              1px 0 0 white, 2px 0 0 white,
              -1px 0 0 white, -2px 0 0 white,
              0px -1px 0 white, 0 -2px 0 white; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:05:44.207

是的，可以在 text-shadow 的帮助下实现。像这样：

```
.MyDiv{
 background:green;
 padding:20px 20px;
 color:black;
 text-shadow:0px 0px 3px white, 
                0px 0px 4px white, 
                0px 0px 5px white,
                0px 0px 6px white, 
                0px 0px 7px white,
                0px 0px 8px white, 
                0px 0px 9px white,
                1px 1px 2px white, 
                1px 1px 3px white,
                -1px -1px 2px white, 
                -1px -1px 3px white,
                -2px -2px 2px white,
                -2px -2px 3px white;}​ 
```

这是一个[演示](http://jsfiddle.net/rCWPU/1/)。您可以继续添加定义以增强效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:06:55.860

使用 CSS3 是可能的：

```
#element {
    color: red;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
} 
```

[演示](http://jsfiddle.net/mraQq/)

# websocket - WebSocket如何保持连接

> ID：13419173
> 
> 赞同：3
> 
> 时间：2012-11-16T15:04:12.163
> 
> 标签：websocket

它说websocket

> “使用 ws（不安全）或 wss（安全）协议通过单个 TCP 套接字进行通信......”

这是否意味着客户端-服务器只需要一次握手？但是我每秒都在 NodeJs 控制台中看到握手。这些是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:13:39.863

每当用户执行使用 websocket 的 javascript 时，都需要进行握手。Websockets 不能在页面访问之间重用。当用户关闭或离开页面时，它们会自动关闭。当用户打开一个新选项卡时，将创建第二个套接字，这将需要一个新的握手。

当您的 NodeJs 应用程序是客户端位于 HTML 页面上的 Web 应用程序时，只要用户请求该页面，就会重新建立连接。因此，当用户浏览您的网站并且每个 HTML 页面上都嵌入了一个使用 websocket 的 javascript 时，您将看到每次点击后都会执行一次新的握手。

当您一直看到新的握手时，尽管只有一个用户一直停留在同一页面上，那么您的应用程序可能确实有问题。它是否可能一直创建新的套接字，尽管它可以重用现有的套接字？（每个都`new WebSocket`意味着一个新的 websocket 连接意味着正在执行一个新的握手）。

# javascript - Javascript 子类别 - 3 层

> ID：13419175
> 
> 赞同：4
> 
> 时间：2012-11-16T15:04:16.640
> 
> 标签：javascript

我是编程新手，所以如果有更好的方法可以做到这一点，我将非常感谢您的建议。我已经搜索了很多小时，但我找不到列表中的第三项依赖于前两项的解决方案。

我的目标是让操作系统选项取决于前两个选择（网络和资源）。有 2 个网络 - 内部和防火墙，如果需要，服务器也可以集群。如果选择标准，则可以选择物理或虚拟。如果选择集群，则唯一的选项是物理的。

我遇到问题的地方是操作系统选择。如果选择防火墙和虚拟的组合，则只有 Linux 和 Windows 可用。如果选择防火墙和物理的组合，则允许使用 AIX、Solaris、Windows 和 Linux。当我单击资源将其更改为物理时，我希望更改操作系统选择。

HTML 代码

```
<div class="left_box">
    <body onload="fillCategory();">
<div id ="formWrapper">
<FORM name="drop_list" action="availability.php" method="POST" >
<fieldset>
<label>Network</label>
<SELECT class= "formSelect" NAME="build" onChange="SelectSubCat();" >       
<Option value="">Select Internal or Firewall</option>
</SELECT>
<br>
<br>
<label>Resource</label>
<SELECT class= "formSelect" id="resource" NAME="resource">
<Option value="">Resource</option>
</SELECT>
<br>
<br>
<label>OS</label>
<SELECT class= "formSelect" id="OS" NAME="OS">      
<Option value="">OS</option>
</SELECT>
<br>
<br>
</fieldset> 
```

Javascript代码

```
function fillCategory(){ 
 // this function is used to fill the category list on load
addOption(document.drop_list.build, "Internal", "Internal", "");
addOption(document.drop_list.build, "Internal Cluster", "Internal Cluster", "");
addOption(document.drop_list.build, "Firewall", "Firewall", "");
addOption(document.drop_list.build, "Firewall Cluster", "Firewall Cluster", "");
}

function SelectSubCat(){
// ON selection of category this function will work
removeAllOptions(document.drop_list.resource);
removeAllOptions(document.drop_list.OS);

if((document.drop_list.build.value == 'Internal')||(document.drop_list.build.value == 'Firewall')){
addOption(document.drop_list.resource,"Virtual", "Virtual","");
addOption(document.drop_list.resource,"Physical", "Physical","");
}

if((document.drop_list.build.value == 'Internal Cluster') || (document.drop_list.build.value     == 'Firewall Cluster')) {
addOption(document.drop_list.resource,"Physical", "Physical");
}

if(document.drop_list.build.value == 'Internal') {
addOption(document.drop_list.OS,"AIX 6.1", "AIX 6.1");
addOption(document.drop_list.OS,"Linux 5.0 (64-bit)", "Linux 5.0 (64-bit)");
addOption(document.drop_list.OS,"Linux 6.0 (64-bit)", "Linux 6.0 (64-bit)");
addOption(document.drop_list.OS,"Solaris 10", "Solaris 10");
addOption(document.drop_list.OS,"Windows 2008 (64-bit) Standard", "Windows 2008 (64-bit) Standard");
addOption(document.drop_list.OS,"Windows 2008 (64-bit) Enterprise", "Windows 2008 (64-bit)   Enterprise");
addOption(document.drop_list.OS,"Windows 2008 R2 (64-bit) Standard", "Windows 2008 R2 (64-bit)  Standard");
addOption(document.drop_list.OS,"Windows 2008 R2 (64-bit) Enterprise", "Windows 2008 R2 (64-bit) Enterprise");
addOption(document.drop_list.OS,"Special", "Special");
}

if((document.drop_list.build.value == 'Internal Cluster') ||(document.drop_list.build.value == 'Firewall Cluster')){
addOption(document.drop_list.OS,"AIX 6.1", "AIX 6.1");
addOption(document.drop_list.OS,"Linux 5.0 (64-bit)", "Linux 5.0 (64-bit)");
addOption(document.drop_list.OS,"Linux 6.0 (64-bit)", "Linux 6.0 (64-bit)");
addOption(document.drop_list.OS,"Solaris 10", "Solaris 10");
addOption(document.drop_list.OS,"Windows 2008 (64-bit) Enterprise", "Windows 2008 (64-bit) Enterprise");
addOption(document.drop_list.OS,"Windows 2008 R2 (64-bit) Enterprise", "Windows 2008 R2 (64-bit) Enterprise");
}

if((document.drop_list.build.value == 'Firewall') && (document.drop_list.resource.value == 'Virtual')) {
addOption(document.drop_list.OS,"Linux 5.0 (64-bit)", "Linux 5.0 (64-bit)");
addOption(document.drop_list.OS,"Linux 6.0 (64-bit)", "Linux 6.0 (64-bit)");
addOption(document.drop_list.OS,"Windows 2008 (64-bit) Enterprise", "Windows 2008 (64-bit) Enterprise");
addOption(document.drop_list.OS,"Windows 2008 R2 (64-bit) Enterprise", "Windows 2008 R2 (64-bit) Enterprise");
}

if((document.drop_list.build.value == 'Firewall') && (document.drop_list.resource.value == 'Physical')) {
addOption(document.drop_list.OS,"AIX 6.1", "AIX 6.1");
addOption(document.drop_list.OS,"Linux 5.0 (64-bit)", "Linux 5.0 (64-bit)");
addOption(document.drop_list.OS,"Linux 6.0 (64-bit)", "Linux 6.0 (64-bit)");
addOption(document.drop_list.OS,"Solaris 10", "Solaris 10");
addOption(document.drop_list.OS,"Windows 2008 (64-bit) Enterprise", "Windows 2008 (64-bit) Enterprise");
addOption(document.drop_list.OS,"Windows 2008 R2 (64-bit) Enterprise", "Windows 2008 R2 (64-bit) Enterprise");
}

} 

////////////////// 

function removeAllOptions(selectbox)
{
    var i;
    for(i=selectbox.options.length-1;i>=0;i--)
{
    //selectbox.options.remove(i);
    selectbox.remove(i);
}
} 

function addOption(selectbox, value, text )
{
var optn = document.createElement("OPTION");
optn.text = text;
optn.value = value;

selectbox.options.add(optn);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:51:27.843

将创建操作系统选项的代码部分移动到另一个函数。在原始函数的末尾调用它。在资源变化时调用新函数。

喜欢：

```
function selectResource(){
  ...
  selectOS();

}
function selectOS()... 
```

[http://jsfiddle.net/7ey8E/1/](http://jsfiddle.net/7ey8E/1/)

# javascript - 获取正在使用该应用程序的用户朋友

> ID：13419178
> 
> 赞同：0
> 
> 时间：2012-11-16T15:04:24.217
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我也想获得正在使用该应用程序的用户的朋友。我目前通过结交所有朋友来实现这一目标

```
FB.api('/me/friends?fields=id,name,updated_time&date_format=U&<?=$access_token?>',
    { limit: 500 },
        function(response) {
            alert(response.data.length + ' friends');
}); 
```

然后使用ajax调用检查我是否可以在我的数据库中看到它们。

这不是我真正需要的东西，因为：

*   这样我会考虑不再使用该应用程序的用户
*   很难向朋友展示，因为我首先将他们全部放在一个数组中，然后延迟更新这个数组等等。

所以问题是，我可以直接从 Graph API 获取这些信息吗？（类似于`is_app_user`= 1 或 0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:47:09.180

您可以在询问朋友时添加已安装字段，如下所示：

```
/USER_ID/friends?fields=installed 
```

只有安装了您的应用的朋友才会设置此字段。

您还可以使用 FQL intead：

```
SELECT uid
FROM user  
WHERE is_app_user=1 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

我更喜欢 FQL 版本，因为它从一开始就返回短名单。

# r - 1\. 构建一个函数 - 2\. 用于循环 boxplot.with.outlier.label

> ID：13419181
> 
> 赞同：1
> 
> 时间：2012-11-16T15:04:40.047
> 
> 标签：r, boxplot

我的原始数据集有 62 个变量。对于`c(3:56)`我想循环函数的变量`boxplot.with.outlier.label`，请参阅

来源（“http://www.r-statistics.com/wp-content/uploads/2011/01/boxplot-with-outlier-label-r.txt”）

但我已经坚持构建一个允许我构建循环的函数。这是一些模拟数据（当然不会显示异常值，但据我所知，这不是问题的一部分 - 证明我错了！）

```
x <- rnorm(1000)
y <- rnorm(1000)
z <- sample(letters, 1000)
df <- as.data.frame(cbind(x,y,z))
df$x<- as.numeric(df$x)
df$y<- as.numeric(df$y)
df$z<- as.character(df$z) 
```

这工作正常：

```
boxplot.with.outlier.label(df$x, df$z) 
```

这不会：

```
boxplotlabel <- function (data, var, name) {
  datvar <- data[["var"]]
  namevar <- data[["name"]]
  boxplot.with.outlier.label(datvar, namevar)
}
boxplotlabel(df, x, z)
Error in plot.window(xlim = xlim, ylim = ylim, log = log, yaxs = pars$yaxs) :need finite 'ylim' values
In addition: Warning messages:
1: In is.na(x) : is.na() applied to non-(list or vector) of type 'NULL'
2: In is.na(x) : is.na() applied to non-(list or vector) of type 'NULL'
3: In is.na(x) : is.na() applied to non-(list or vector) of type 'NULL'
4: In min(x) : no non-missing arguments to min; returning Inf
5: In max(x) : no non-missing arguments to max; returning -Inf 
```

我哪里错了？或者有没有不同的方法来实现我想要的函数循环`boxplot.with.outlier.label`？

我很感激任何帮助！格瑞特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:26:46.430

问题在于引号。 `var`并且`name`是变量。但是当您调用`data[["var"]]`（带引号）时，您使用的不是变量`var`而是字符串，该字符串的值是字符“var”。

如果您删除引号，您将完成一半。Var 本身应该有一个字符串值。所以请确保将列的***名称***传递给它，而不是列本身。

例如：

```
 # If you want to get this: 
    df$x 

    df[["x"]]   # right
    df[[x]]     # wrong 
```

因此，如果我们使用变量 for `x`：

```
 # Wrong
    var <- x
    df[[var]]

    # Right
    var <- "x"
    df[[var]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:36:59.047

您正在尝试访问不存在的列。这会产生错误。的列都`df`没有命名为`var`or `name`。

有两种可能的解决方案

1.  将列的名称作为字符串传递：

    ```
    boxplotlabel <- function (data, var, name) {
      datvar <- data[[var]]
      namevar <- data[[name]]
      boxplot.with.outlier.label(datvar, namevar)
    }

    boxplotlabel(df, "x", "z") 
    ```

2.  获取函数中参数的对象名称：

    ```
    boxplotlabel <- function (data, var, name) {
      datvar <- data[[deparse(substitute(var))]]
      namevar <- data[[deparse(substitute(name))]]
      boxplot.with.outlier.label(datvar, namevar)
    }

    boxplotlabel(df, x, z) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:41:13.370

这是最后一组函数加循环。只是为了得到一个完整的答案，以防另一个新手遇到这个问题。您“只是”需要创建异常值。

```
#fct.
boxplotlabel <- function (data, var, name) {
  datvar <- data[[var]]
  namevar <- data[[name]]
  boxplot.with.outlier.label(datvar, namevar)
}
#single output:
boxplotlabel(df, "x", "z")
#loop:
col <- names(df[,c(1:2)])
for (i in seq_along(col)){
  boxplotlabel(df, col[i], "z")
} 
```

# c++ - 为 char 分配空间

> ID：13419186
> 
> 赞同：13
> 
> 时间：2012-11-16T15:04:59.390
> 
> 标签：c++

字符串构造通过执行获得数据空间

```
new char[strlen(cp)+1]; 
```

由于字符串中只有`strlen(cp)`字符，所以额外的字节是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T15:06:22.693

对于表示字符串结尾的[特殊`'\0'`](http://en.wikipedia.org/wiki/Null_character)字符。

（请记住，*C 风格的字符串*是以*null 结尾的*数组）。

其他有用的说明：

*   `strlen` *不*计算`'\0'`（这就是为什么你需要这个额外的*字节*）。
*   `strcpy` *确实*复制`'\0'`.
*   `char str[7] = "String";`-`'\0'`自行添加。
*   `char str[] = {'S','t','r','i','n','g'}`-*不*添加`'\0'`。
*   `char str[7] = {'S','t','r','i','n','g'}`- 将添加`'\0'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:00:21.200

在基于 C 的字符串中，字符串末尾总是有一个特殊字符，`'\0'`它也需要一个额外的字节。这就是为什么我们需要一个额外的字符并且我们需要数组`strlen(str)+1`来存储字符串。

# memory - 64 位操作系统上不同的 32 位进程会共享相同的地址空间吗？

> ID：13419191
> 
> 赞同：0
> 
> 时间：2012-11-16T15:05:19.587
> 
> 标签：memory, memory-management, 32bit-64bit

我有一个问题，我似乎无法找到答案。

我希望这对某些人来说是一个简单的答案，所以我想我会把它扔在这里：

在 64 位操作系统上运行的所有 32 位进程会共享相同的 4GB 地址空间，还是每个 32 位进程都有单独的 4GB 可寻址区域？

我知道 32 位进程只能寻址 2^(个 32)字节，但这些是指向虚拟内存而不是物理内存的指针，对吗？或者没有？（我不太确定事情是如何运作的）

我想知道我是否可以运行 2 个 32 位进程，每个进程都有 4GB 内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-22T14:22:59.547

这取决于。只要硬件能够支持它，每个操作系统都可以自由地实现它认为合适的内存空间。

现在，对于大多数操作系统在实践中所做的事情（假设 x86 进程在 x86_64 系统下运行）：

> 在 64 位操作系统上运行的所有 32 位进程会共享相同的 4GB 地址空间，还是每个 32 位进程都有单独的 4GB 可寻址区域？

**不**，这将是一个非常罕见的设置。x86_64 要求分页，保护模式（32 位）x86 操作系统分页并为每个进程提供自己的地址空间是非常常见的。这样做并没有真正的好处，这意味着这样一个系统下的所有 32 位进程都将竞争相同的 ~4GB，这并不理想。此外，这会使阻止 32 位进程读取/写入彼此的内存变得更加困难。

Linux、macOS 和 Windows 都为每个 32 位进程提供了不同的地址空间。

> 我知道 32 位进程只能寻址 2^32 字节，但这些是指向虚拟内存而不是物理内存的指针，对吗？或者没有？（我不太确定事情是如何运作的）。

一个 32 位进程确实可以寻址 2^32 个字节。然而，使用映射，内核可以**将**这些地址，或者更确切地说，地址范围（这些称为页）映射到物理内存。

默认情况下，32 位 x86 处理器的分页系统也可以寻址多达 2^32 个物理地址。出现了两个扩展以允许系统映射更多物理地址：PSE-36 和 PAE。两者都将可寻址物理内存从 32 位扩展到 36 位。在实践中，只有 PAE 被认真使用。

因为 PAE 将物理地址空间扩展到 36 位，所以它允许内核整体使用多达 64GiB 的内存。但是，单个进程仍被限制为 4GiB。

实际上，内核需要在内存中保持映射。内核通常停留在 512MiB/1GiB 的上限，通常位于地址空间的顶部，这导致每个进程的常见内存限制为 3GiB。

在 x86_64 下，始终启用 PAE，并升级为支持 48 位虚拟地址和 52 位物理地址。AMD 提议在未来支持 56 位虚拟地址作为扩展。

> 我想知道我是否可以运行 2 个 32 位进程，每个进程都有 4GB 内存？

**是的。**在 64 位操作系统下，情况就大不相同了。内核可以停留在非常高的内存中，不需要完全映射到 32 位进程。通常，内核只会在 32 位进程的地址空间顶部映射一堆页面，以处理系统调用和中断。这些页面将包含足够的代码以返回长模式（64 位）并获得完整的 64 位地址空间，内核可以从中完成工作。由于内核只需要几页而不是 512MiB/1GiB 的地址空间来执行此操作，因此在 64 位操作系统下运行的 32 位进程通常可以使用其 4GiB 地址空间的大部分。

Windows 允许这样做，如果 Linux 和/或 macOS 不这样做，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:25:15.190

这取决于许多因素，包括处理器和操作系统。

您可以同时拥有这两种情况，可以共享虚拟地址，也可以从 64 位地址空间获取切片。我相信这取决于 Linux 中的处理器，但我可能是错的。对于 32 位应用程序来说，它们似乎都共享相同的虚拟地址。

您的第二个问题，您可以访问每个进程 4GB 吗？可能不是。内核通常有一个保留的内存空间（如果我没记错的话，Linux 上是 1GB）。但是假设您的问题是“每个进程可以访问 3GB”，那么答案是肯定的，假设您有足够的物理 RAM。

# oracle - oracle无效号码错误

> ID：13419193
> 
> 赞同：1
> 
> 时间：2012-11-16T15:05:21.770
> 
> 标签：oracle, plsql, oracle11g

这是我正在使用的查询

```
SELECT TO_DATE(COL1,'mm/dd/yyyy') FROM TABLE1 
```

COL1 是一个 varchar2(50) 列，具有 DD-MON-YY 格式的日期数据。我希望它以“mm/dd/yyyy”格式输出。

我收到此错误：

ORA-01858：在预期数字 01858 的地方发现了非数字字符。 00000 - “在预期数字的地方发现了非数字字符” *原因：要使用日期格式模型转换的输入数据不正确. 输入数据不包含格式模型需要数字的数字。*操作：修复输入数据或日期格式模型，以确保元素在数量和类型上匹配。然后重试该操作。

此列中的大多数值都是有效日期，我无法用错误数据确定记录。

如何在查询中处理此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:08:34.077

```
SELECT TO_CHAR(TO_DATE(COL1,'dd-mon-yy'), 'mm/dd/yyyy') FROM TABLE1 
```

# mysql - MySQL在一个查询中为多行选择相关数据

> ID：13419200
> 
> 赞同：0
> 
> 时间：2012-11-16T15:05:43.853
> 
> 标签：mysql, select, correlated-subquery

```
id    title
--------------------------
1     mysql websites
2     html tips
3     mysql tricks
4     javascript tutorial
5     mysql queries
6     javascript framework 
```

**我想在一个查询中**为多行选择相关文章，并按 id 对它们进行分组。那可能吗？

就像是

```
SELECT
    id, title
FROM
    articles
WHERE
    title LIKE (TITLE_OF_CURRENT_ROW)
    AND id IN (1,4)
GROUP BY
    id; 
```

结果是

```
大批
(
    // id = 1 的结果
    0 => 数组
    (
        0 => 数组（id => 1，标题 => 'mysql 网站'），
        1 => 数组（id => 3，标题 => 'mysql 技巧'），
        2 => 数组（id => 5，标题 => 'mysql 查询'）
    ),

    // id = 4 的结果
    1 => 数组
    (
        0 => 数组（id => 4，标题 => 'javascript 教程'），
        1 => 数组（id => 6，标题 => 'javascript 框架'）
    }
}

```

# 编辑：

我这样做的原因是因为我想 void `queries inside loop`。例如，我正在生成 100 行并将它们保存到文件中。

```
$result = $mysql->query("SELECT id, title FROM articles LIMIT 100");

while($row = $result->fetch_assoc()) {

    $related_result = $mysql->query("SELECT id, title FROM articles WHERE title LIKE '%".$row['title']."%' AND id != ".$row['id']);

    // while... get related data

    save_data_to_file($row['id'], $row['title'], $related['ids'], $related['titles']);
} 
```

上面的相关查询会重复 100 次，我该怎么走呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:35:48.570

这是一种可怕的做事方式，但我相信这就是您正在寻找的：[http ://sqlfiddle.com/#!2/53465/8](http://sqlfiddle.com/#!2/53465/8)

```
SELECT
    articles.id,
    articles.title,
    related.id as rel_id,
    related.title as rel_title
FROM
    articles
LEFT JOIN
  articles AS related
ON
  related.title LIKE CONCAT('%', SUBSTRING_INDEX(articles.title, ' ', 1), '%')
AND    # update: this needs to be AND, not WHERE
  related.id != articles.id
ORDER BY
  articles.title, related.title 
```

它可怕的原因是 MySQL 不能使用任何碰巧打开的索引，`title`因为 a) 你只对匹配第一个单词感兴趣，b) 你想匹配其他标题中任何位置的第一个单词条目。

MySQL 不能为搜索创建索引，如`%cheese%`FULLTEXT 索引和搜索可以工作`cheese%`，特别是如果您使用 BOOLEAN MODE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:33:35.340

是不是和你追求的类似？

[http://sqlfiddle.com/#!2/15414/11](http://sqlfiddle.com/#!2/15414/11)

# java - 为什么我使用 OpenSSL 和 Java 生成的 RSA-SHA256 签名不同？

> ID：13419201
> 
> 赞同：29
> 
> 时间：2012-11-16T15:05:59.217
> 
> 标签：java, openssl, rsa, sha256

我想在 Java 中生成一个 RSA-SHA256 签名，但我无法让它在控制台上生成与 OpenSSL 相同的签名。

这就是我对 OpenSSL 所做的（遵循[本教程](http://www.codealias.info/technotes/openssl_rsa_sign_and_verify_howto "本教程")）：

生成密钥对：

```
openssl genrsa -out private.pem 1024 
```

提取公钥：

```
openssl rsa -in private.pem -out public.pem -outform PEM -pubout 
```

创建数据哈希：

```
echo 'data to sign' > data.txt
openssl dgst -sha256 < data.txt > hash 
```

生成的哈希文件以`(stdin)=`我手动删除的内容开始（首先忘了提及，谢​​谢mata）。

签名哈希：

```
openssl rsautl -sign -inkey private.pem -keyform PEM -in hash  > signature 
```

为了在 Java 中重现结果，我首先将私钥从 PEM 转换为 DER：

```
openssl pkcs8 -topk8 -inform PEM -outform DER -in private.pem -nocrypt > private.der 
```

现在我编写了这个 Java 类来生成相同的签名：

```
public class RSATest {

    public static void main(String[] args) throws IOException,
            NoSuchAlgorithmException, InvalidKeySpecException,
            InvalidKeyException, SignatureException {

        byte[] encodedPrivateKey = readFile("private.der");
        byte[] content = readFile("data.txt");

        KeyFactory keyFactory = KeyFactory.getInstance("RSA");
        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encodedPrivateKey);
        RSAPrivateKey privateKey = (RSAPrivateKey) keyFactory
                .generatePrivate(keySpec);

        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(content);
        byte[] signatureBytes = signature.sign();

        FileOutputStream fos = new FileOutputStream("signature-java");
        fos.write(signatureBytes);
        fos.close();
    }

    private static byte[] readFile(String filename) throws IOException {
        File file = new File(filename);
        BufferedInputStream bis = new BufferedInputStream(new FileInputStream(
                file));
        byte[] bytes = new byte[(int) file.length()];
        bis.read(bytes);
        bis.close();
        return bytes;
    }

} 
```

不幸的是结果不一样，所以我想我一定做错了什么，但我不知道是什么。你们有人可以帮我找到错误吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-16T15:40:20.413

```
openssl dgst -sha256 < data.txt 
```

产生类似的东西：

```
（标准输入）= b39eaeb437e33087132f01c2abc60c6a16904ee3771cd7b0d622d01061b40729

```

注意`(stdin)=`'? 您不希望它成为哈希的一部分，如果您需要创建摘要，请使用该`-binary`选项。

尝试使用它来签署您的数据：

```
openssl sha -sha256 -sign private.pem < data.txt 
```

这可以满足您的一切需求。

* * *

编辑 - 更多解释：

让我们创建一个摘要并显示它

```
$ openssl dgst -sha256 -binary < data.txt > digest
$ hd digest
00000000  26 3b 0a a1 2e b9 32 db  b8 dc d3 6f 37 94 0b 05  |&;....2....o7...|
00000010  71 9c ba 79 46 34 28 9f  5c 5b 98 9a 64 61 c9 ec  |q..yF4(.\[..da..| 
```

现在我们获取这个摘要并使用`rsautl`：

```
$ openssl rsautl -sign -inkey private.pem < digest > sign1
$ hd sign1
00000000  1b 7a cf a4 8d 41 8e 04  ed 3a bb ba 86 f1 f8 e0  |.z...A...:......|
00000010  df f7 47 3e d7 a7 f4 90  7a 05 f8 7f 45 e5 29 e7  |..G>....z...E.).|
00000020  9f f4 2c 91 97 2f e7 26  69 9f 6a 07 a3 48 1b 85  |..,../.&i.j..H..|
00000030  2e f8 ee 44 4d 25 9f ae  05 95 81 c9 e3 07 68 ad  |...DM%........h.| 
```

现在让我们`dgst`直接使用：

```
$ openssl dgst -sha256 -sign private.pem < data.txt > sign2
$ hd sign2
00000000  15 c2 94 87 eb e6 cb 45  c8 63 0c 97 60 d3 07 f3  |.......E.c..`...|
00000010  dc 65 32 ad 44 1c c2 2a  7f a3 e1 fc dd 84 27 8c  |.e2.D..*......'.|
00000020  77 a6 97 2b 33 6b c6 d7  7d e1 1d 39 5c 48 b6 48  |w..+3k..}..9\H.H|
00000030  cb 18 be bf 6a 66 90 d3  88 89 52 6c dd d1 b9 99  |....jf....Rl....| 
```

那么这里有什么不同呢？为了看到这一点，我们可以验证签名并显示原始输出。两个文件都包含摘要，但元数据和填充不同：

```
$ openssl rsautl -raw -verify -inkey private.pem < sign1 | hd
00000000  00 01 ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
00000010  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff 00  |................|
00000020  26 3b 0a a1 2e b9 32 db  b8 dc d3 6f 37 94 0b 05  |&;....2....o7...|
00000030  71 9c ba 79 46 34 28 9f  5c 5b 98 9a 64 61 c9 ec  |q..yF4(.\[..da..|

$ openssl rsautl -raw -verify -inkey private.pem < sign2 | hd
00000000  00 01 ff ff ff ff ff ff  ff ff ff ff 00 30 31 30  |.............010|
00000010  0d 06 09 60 86 48 01 65  03 04 02 01 05 00 04 20  |...`.H.e....... |
00000020  26 3b 0a a1 2e b9 32 db  b8 dc d3 6f 37 94 0b 05  |&;....2....o7...|
00000030  71 9c ba 79 46 34 28 9f  5c 5b 98 9a 64 61 c9 ec  |q..yF4(.\[..da..| 
```

为了更清楚地看到这一点，我们可以尝试使用`-asn1parse`标志，这对于第一个签名不起作用，但对于第二个签名，它显示了正确的签名结构：

```
$ openssl rsautl -verify -inkey private.pem -asn1parse < sign1
Error in encoding
139931349546656:error:0D07209B:asn1 encoding routines:ASN1_get_object:too long:asn1_lib.c:142:

$ openssl rsautl -verify -inkey private.pem -asn1parse < sign2
    0:d=0  hl=2 l=  49 cons: SEQUENCE          
    2:d=1  hl=2 l=  13 cons:  SEQUENCE          
    4:d=2  hl=2 l=   9 prim:   OBJECT            :sha256
   15:d=2  hl=2 l=   0 prim:   NULL              
   17:d=1  hl=2 l=  32 prim:  OCTET STRING      
      0000 - 26 3b 0a a1 2e b9 32 db-b8 dc d3 6f 37 94 0b 05   &;....2....o7...
      0010 - 71 9c ba 79 46 34 28 9f-5c 5b 98 9a 64 61 c9 ec   q..yF4(.\[..da.. 
```

# java - AlertDialog.Builder show()，在点击处理程序中崩溃

> ID：13419204
> 
> 赞同：0
> 
> 时间：2012-11-16T15:06:05.330
> 
> 标签：java, android

我的应用程序从主视图打开一个新视图，其中包含：

```
Intent ElementsIntent = new Intent(this, ElementList.class);
startActivityForResult(ElementsIntent, 0); 
```

它显示了一个元素列表，当推送其中一个元素时，一个视图会以与以前相同的方式打开一个新的 Activity。在这个视图中，我想在按钮单击处理程序中显示一个 AlertDialog，但是当我调用 show() 时，应用程序崩溃了。

根据我尝试打开对话框的位置，我很确定它与上下文不正确有关，但我尝试从主视图创建静态上下文，我尝试使用 element.this，这是连接到活动的类，我尝试了getApplicationContext，所有这些都导致应用程序崩溃。

我希望有人能解释我做错了什么。

谢谢。

这是崩溃的 AlertDialog 代码：

```
public void GoBackClickHandler(View v)
{
    AlertDialog.Builder builder = new AlertDialog.Builder(ElementItem.this);
    builder.setMessage("Skal ændringer i besvarelse gemmes?")
           .setCancelable(false)
           .setPositiveButton("Ja", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
                if(inputIsValue())
                {
                    UpdateELement task = new UpdateELement();
                    task.applicationContext = ElementItem.this;
                    task.execute(1);
                }
               }
           })
           .setNegativeButton("Nej", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                    finish();
               }
           });
    AlertDialog alert = builder.create();
    alert.show();       
} 
```

如果我将此代码移至 OnCreate，则警报会显示得很好，并且不会出现应用程序崩溃。只有当我将它放在 ClickHandler 中时它才会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:21:24.453

我终于找到了解决这个问题的方法。

我必须将 Activity 的上下文保存在 onCreate 方法中的变量中，然后在 ClickHandler AlertDialog 调用中使用它，然后一切正常。

希望这对解决这个烦人问题的其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T17:46:46.890

```
public class SplashActivity extends AppCompatActivity implements DialogInterface.OnClickListener {

    //Object to hold the listener instance
    DialogInterface.OnClickListener listener;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        //Assign this to listener.
        listener = this;

        handler.postDelayed(new Runnable() {
            @Override
            public void run() {

                AlertDialog.Builder builder = new AlertDialog.Builder(SplashActivity.this);
                builder.setTitle("Alert");
                builder.setMessage("Alert Message...!");

                //Here pass the listener object.
                builder.setPositiveButton("OK", SplashActivity.this.listener);
                builder.show();

            }

        });

    }

    @Override
        public void onClick(DialogInterface dialog, int which) {

            SplashActivity.this.finish();
        }

} 
```

# jquery - 为什么我在 elemsTextBoxes.on('focus', function() {?

> ID：13419209
> 
> 赞同：0
> 
> 时间：2012-11-16T15:06:24.527
> 
> 标签：jquery, typeerror

在下面的代码中，我可以获得输入元素的集合并为其背景着色，但不能在它们上设置事件。为什么我会收到此错误？

![在此处输入图像描述](../Images/d6f1639651137f95a62b593a08e3cf7f.png)

```
<script type="text/javascript">
    $(function() {
        CONTACTFORM.initialize($("#formContact"));
    });
    var CONTACTFORM = CONTACTFORM || {};

    CONTACTFORM.initialize = function(form) {

        var elemsTextBoxes = form.find('input[type=text]');

        elemsTextBoxes.css('background-color', 'ddd'); //works

        elemsTextBoxes.on('focus', function() { //gets error
            $(this).css('background-color', '#eee'); 
        });
        elemsTextBoxes.on('blur', function() {
            $(this).css('background-color', '#fff'); 
        }); 
```

# dll - 从托管 c++ 崩溃中调用 c# 代码

> ID：13419210
> 
> 赞同：1
> 
> 时间：2012-11-16T15:06:26.560
> 
> 标签：dll, c++-cli, managed, managed-c++

我有一个非托管 c++ DLL，它通过托管 c++ 包装器调用 c# 代码。非托管 c++ DLL 是某些应用程序的插件（不在我的控制范围内）。当此应用程序调用非托管 c++ DLL 时，一切正常，直到托管 c++ 代码尝试使用 c# 代码。然后它崩溃了。

我编写了一个测试应用程序，它与应用程序做同样的事情，即它调用非托管 c++ DLL。*这工作正常。*

代码尽可能简单：

**非托管 C++：**

```
extern "C" __declspec(dllexport) void UnmanagedMethodCalledUponByApplication()
{
    new Bridge();
} 
```

**托管 C++：**

```
Bridge::Brigde()
{
    gcnew Managed(); // This line crashes
} 
```

**C＃：**

```
public class Managed
{
} 
```

我试图在有问题的行周围添加一个 try-catch (...) 块，但它没有捕获错误。

如果我`gcnew Managed();`用它替换这条线`MessageBox::Show("Alive!");`就可以了。所以我的猜测是我的 c# 项目设置有问题。

我试图用不同的平台（任何 CPU 和 x86）编译它。我试图改变目标框架。我试图调用静态方法`Managed`而不是使用`gcnew`. 还在崩溃。

任何想法可能是什么问题？

**更新：**

在评论和回答中提出建议后，我附上了调试器。现在我看到有人`System.IO.FileNotFoundException`说找不到托管 DLL（或其依赖项之一）。

这里有一个猜测：这些 DLL 放在一起，但它们不在当前目录中。非托管 c++ DLL 被正确加载，因为主应用程序指定了它的路径。托管 c++ 实际上是一个库，因此代码也可以正常工作。但是，当托管 c++ 尝试加载 c# DLL 时，它会在错误的目录中查找它。

**更新：**

解决此问题的方法是使用反射动态加载 c# DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:43:56.023

```
 extern "C" __declspec(dllexport) 
```

是的，这是让编译器生成加载和初始化 CLR 以执行托管代码所需的存根的一种廉价且简单的方法。问题是，它没有做任何合理的事情来处理托管代码抛出的异常。托管代码*喜欢*抛出异常，它们是一个了不起的故障排除工具。当您无法检索异常信息时，这不再是了不起的。

您可以从本机代码中做的最好的事情是使用`__try/__except`关键字来捕获托管异常。异常代码为 0xe0434f4d。但这仍然不能让您访问所需的信息、异常消息和神圣的堆栈跟踪。

你可以调试它。项目+属性，调试，将调试器类型更改为“混合”。然后 Debug + Exceptions，勾选 CLR Exceptions 的 Throw 复选框。抛出异常时调试器停止，因此您可以查看问题所在。

交付代码后获得体面的诊断需要更好的互操作机制。就像使用 COM 互操作或自己托管 CLR。

# postgresql - 在 postgres 中删除数据库

> ID：13419214
> 
> 赞同：1
> 
> 时间：2012-11-16T15:06:34.060
> 
> 标签：postgresql

`dropdb mydbname`我在shell中尝试。它没有给出任何错误。但是当我打电话时`\l`它仍然存在。

我使用`sudo -u postgres psql`.

除了我主要关心的问题之外，我还需要知道如何进入数据库，而不仅仅是呆在数据库之外。（例如，如果我想列出表格）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:18:53.000

为了删除数据库，您可以使用 SQL 命令（但我不明白为什么 dropdb 不起作用）`DROP DATABASE mydbname`：

```
sudo -u postgres psql -c "DROP DATABASE mydbname" 
```

检查是否未使用数据库会很好：

```
select * from pg_stat_activity where datname = 'mydbname'; 
```

`sudo -u postgres psql`连接到 postgres 数据库。您需要指定数据库：`sudo -u postgres psql mydbname`然后您可以使用元数据命令，如 \d、\dt、\dv、...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T23:52:18.807

当你说“shell”时......你的意思是`psql`shell，而不是unix命令行shell？

我会说你遇到了这个问题：

[Postgresql 未使用“createdb”作为超级用户创建数据库，但未输出错误](https://stackoverflow.com/q/13321005/398670)

即，当它是一个 unix shell 命令时，您正试图`dropdb`用作 psql 命令。因此，您不会收到错误消息：

[在psql中，为什么有些命令没有效果？](https://stackoverflow.com/questions/12472026/in-psql-why-do-some-commands-have-no-effect)

您没有用分号终止命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-07T21:01:32.763

服务器应该正在运行，然后：

```
dropdb <database name> 
```

如果服务器没有运行，首先尝试：

```
pg_ctl start -D <mylocal_db_path> -l <mylogfile.log> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-04T20:46:49.590

您是否缺少逗号（；）？这个命令对我有用：

```
drop database <database_name>; 
```

# java - 发送短信然后发送电子邮件

> ID：13419222
> 
> 赞同：0
> 
> 时间：2012-11-16T15:06:46.273
> 
> 标签：java, android, email, sms

我目前正在开发一个可以发送短信和电子邮件的应用程序。没什么大不了的，这很容易做到。这是我发送短信的方式：

```
private void sendSms() {
    Log.i("", "SEND SMS");
    Intent intent = new Intent(Intent.ACTION_VIEW, 
            Uri.parse("sms:123456789"));
    intent.putExtra("sms_body", "My message");
    startActivity( intent );
} 
```

这是我发送电子邮件的代码：

```
private void sendEmail() {
    Log.i("", "SEND");
    Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL, "address@fuu.com");
    email.putExtra(Intent.EXTRA_SUBJECT, "Subject");
    email.putExtra(Intent.EXTRA_TEXT, "My body email");
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Send an email:"));
} 
```

独立地，那些工作很棒。

但是我想在我的 SMS 发送或取消后发送我的电子邮件。我找不到如何取回`SMS intent/activity`发送电子邮件的关闭事件。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:17:43.893

您应该在开始此类活动时使用[startActivityForResult 。](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

然后，您可以通过实现[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)方法来获取启动活动的结果

流程将如下所示

> 1) startActivityForResult( SEND_SMS_INTENT, SEND_SMS_REQUEST_CODE ) 其中 SEND_SMS_REQUEST_CODE 是您定义的整数常量
> 
> 2）发送短信活动完成（取消或完成它的工作）
> 
> 3) onActivityResult 将通过 SEND_SMS_REQUEST_CODE 调用您的主机活动。
> 
> 4) 然后你可以做 if( requestCode == SEND_SMS_REQUEST_CODE ) sendEmail();

您可以对发送电子邮件活动执行相同的操作。

如果您有兴趣了解子活动结果是什么（即：发送短信已取消或实际发送），您可以使用 onActivityResult resultCode 参数。

# c# - 我可以在 c# 中拥有的最大 maxRequestLength？

> ID：13419224
> 
> 赞同：0
> 
> 时间：2012-11-16T15:06:53.940
> 
> 标签：c#, asp.net-4.0

我有一个非常简单的文件上传。但我想将其增加到更高的传输，例如 700Mb+。可以传输 20Mb 文件，但这不能满足我的需求。所以我的问题是：我怎样才能有一个 700Mb+ 的大请求？

我当前的网络配置如下所示：

```
configuration
    system.web
      compilation debug="false" targetFramework="4.0" 
      customErrors mode="Off"
      httpRuntime executionTimeout="120000000"
       maxRequestLength="999999999999999"
       useFullyQualifiedRedirectUrl="false"
       minFreeThreads="8"
       minLocalRequestFreeThreads="4"
       appRequestQueueLimit="100"
       system.web
configuration 
```

我的上传看起来像这样：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"       Inherits="_Default" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<script runat="server">

  protected void UploadButton_Click(object sender, EventArgs e)
  {
  String savePath = Server.MapPath(".\\");

    if (FileUpload1.HasFile)
    {
      String fileName = FileUpload1.FileName;

      savePath += fileName;

      FileUpload1.SaveAs(savePath);

      UploadStatusLabel.Text = "Your file was saved as " + fileName;
    }
    else
     {      
      UploadStatusLabel.Text = "You did not specify a file to upload.";
    }

  }
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
<title>FileUpload Example</title>
</head>
<body>
<form id="form1" runat="server">
<div>
   <h4>Select a file to upload:</h4>

   <asp:FileUpload id="FileUpload1"                 
       runat="server">
   </asp:FileUpload>

   <br /><br />

   <asp:Button id="UploadButton" 
       Text="Upload file"
       OnClick="UploadButton_Click"
       runat="server">
   </asp:Button>    

   <hr />

   <asp:Label id="UploadStatusLabel"
       runat="server">
   </asp:Label>        
</div>
</form> 
```

**编辑：**

上传时得到的响应是：404 - 找不到文件或目录。您要查找的资源可能已被删除、名称已更改或暂时不可用。

# .net - .NET 文件加载异常

> ID：13419227
> 
> 赞同：3
> 
> 时间：2012-11-16T15:06:57.527
> 
> 标签：.net, vb.net, exception

NET，在以下行：

```
Dim shellFile As ShellFile = shellFile.FromFilePath(tmpFile) 
```

我收到以下错误：

> 无法加载文件或程序集“ [Microsoft.WindowsAPICodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)，Version=1.1.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我确实阅读了一些关于问题可能是什么的建议，但它们似乎都没有帮助我，而且我认为错误略有不同，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:33:04.977

更新您的程序集和 .net 框架

# javascript - 如果用户选择某些选项，则勾选复选框

> ID：13419231
> 
> 赞同：1
> 
> 时间：2012-11-16T15:07:01.430
> 
> 标签：javascript, html, html-lists

我有个问题。我希望我的 javascript 文件查找用户是否选择了“否”，他们不想要屏蔽，如果选择了“弧”，那么它应该勾选复选框 1。同样适用于“否”和“Ely”勾选复选框4。“No”和“Spec”也勾选了 checkbox7。但是，如果他们选择“否”和“任何”，他们可以选择任何内容。我该怎么做呢。

HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="myJavascript.js"></script>
</head>
<body>

 <select id="likeShield" onchange="showTicks(this)">
 <option value="select1">Select</option>
 <option value="yesShield">Yes</option>
 <option value="noShield">No</option>
 </select>

 <select id="chooseShield">
 <option value="select1">Select</option>
 <option value="arc">Arcane</option>
 <option value="ely">Elysian</option>
 <option value="spec">Spectral</option>
 <option value="anylist">Choose any</option>
 </select>

 <table border = "1">
 <tr>
     <th> tickbox </th>
     <th> shield parts </th>
     <th> description </th>
     <th> cost </th>
 </tr>
 <tr>
          <td><input type="checkbox" id="cb1"></td>
      <td> arc sigil </td>
      <td> Large magic part </td>
      <td> 5m </td>
 </tr>
 <tr>
          <td><input type="checkbox" id="cb2"></td>
      <td> arc shield </td>
      <td> A extremely powerful magic shield </td>
      <td> 60m </td>
 </tr>
 <tr>
          <td><input type="checkbox" id="cb3"></td>
      <td> arc special item </td>
      <td> special element </td>
      <td> 10m </td>
 </tr>
 <tr>
          <td><input type="checkbox" id="cb4"></td>
      <td> elysian sigil  </td>
      <td> A sigil found by dragons </td>
      <td> 50m </td>
  </tr>   
  <tr>
          <td><input type="checkbox" id="cb5"></td>
      <td> elysian shield </td>
      <td> A extremely powerful ranging shield </td>
      <td> 40m </td>
  </tr>   
  <tr>
          <td><input type="checkbox" id="cb6"></td>
      <td> elysian special item </td>
      <td> A special attack attached to shield </td>
      <td> 25m </td>
  </tr>
  <tr>
          <td><input type="checkbox" id="cb7"></td>
      <td> spectral sigil  </td>
      <td> easily obtainable from goblins </td>
      <td> 4m </td>
  </tr>
  <tr>
          <td><input type="checkbox" id="cb8"></td>
      <td> spectral shield </td>
      <td> Impressive stats </td>
      <td> 15m </td>
  </tr>
  <tr>
          <td><input type="checkbox" id="cb9"></td>
      <td> spectral special item </td>
      <td> Does double damage </td>
      <td> 30m </td>
  </tr>
  </table>
  </body>
  </html> 
```

我认为它是一个 IF 语句，但我不知道如何实现它。

谁能帮我解决这个问题？

谢谢

拍。

编辑：

我的 javascript if 语句：

```
function showTicks(what)
{
if (what.value == ("noShield") && ("arc")) {
  if (what.value == ("noShield") && ("ely")) {
    if (what.value == ("noShield") && ("spec")) {
    document.getElementById("cb1").checked=true;
    document.getElementById("cb4").checked=true;
    document.getElementById("cb7").checked=true;
    }
else
  document.getElementById("cb7").checked=false;
  }
else
document.getElementById("cb4").checked=false;
 }
else
document.getElementById("cb1").checked=false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:18:50.550

使用[jQuery](http://jquery.com/)：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$("#likeShield").change(function() {
   if ($("#likeShield").val() == "yesShield") {
       if ($("#chooseShield").val() == "arc") {
          $("#cb1").prop("checked", true);
       } // etc
   }
})
</script> 
```

这会将处理程序附加到选择`change`事件`likeShield`，因此每当用户更改该下拉列表中的选择时，它都会运行附加函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:37:50.927

我会使用 jQuery。结帐[工作演示](http://jsfiddle.net/EjLGy/)。

在更改事件读取选定值时，比较并设置 checkox。

```
$(".conf").change(function() {
    tickBoxes();
})

function tickBoxes() {

    var likeShield = $("#likeShield").val();
    var chooseShield = $("#chooseShield").val();

    if (likeShield == 'noShield' && chooseShield == 'arc') {
        $("#cb1").prop('checked', true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:09:08.567

但是要让它工作，你需要在你的 html 中使用一个表单，请参阅链接：http: [//jsbin.com/oyuxah/2/edit](http://jsbin.com/oyuxah/2/edit)

```
var likeShield = document.getElementById('likeShield');
var chooseShield = document.getElementById('chooseShield');

function checkAll(){

  if(likeShield.value=="noShield" && chooseShield.value=="arc"){
     document.getElementById('cb1').checked =true;
     document.getElementById('cb2').checked =false;
     document.getElementById('cb3').checked =false;
     document.getElementById('cb4').checked =false;
     document.getElementById('cb5').checked =false;
     document.getElementById('cb6').checked =false;
     document.getElementById('cb7').checked =false;
  }

  if(likeShield.value=="noShield" && chooseShield.value=="ely"){
     document.getElementById('cb1').checked =false;
     document.getElementById('cb2').checked =false;
     document.getElementById('cb3').checked =false;
     document.getElementById('cb4').checked =true;
     document.getElementById('cb5').checked =false;
     document.getElementById('cb6').checked =false;
     document.getElementById('cb7').checked =false;
  }

  if(likeShield.value=="noShield" && chooseShield.value=="spec"){
     document.getElementById('cb1').checked =false;
     document.getElementById('cb2').checked =false;
     document.getElementById('cb3').checked =false;
     document.getElementById('cb4').checked =false;
     document.getElementById('cb5').checked =false;
     document.getElementById('cb6').checked =false;
     document.getElementById('cb7').checked =true;
   }
  if(likeShield.value=="noShield" && chooseShield.value=="anylist"){
     document.getElementById('cb1').checked =false;
     document.getElementById('cb2').checked =false;
     document.getElementById('cb3').checked =false;
     document.getElementById('cb4').checked =false;
     document.getElementById('cb5').checked =false;
     document.getElementById('cb6').checked =false;
     document.getElementById('cb7').checked =false;
   }

 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T15:20:18.237

您应该创建一个能够修改/检查 DOM 的 Javascript 脚本（内联或非内联）。

你的答案在这里：[http ://docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

# nlp - NLP 或 Antlr 操纵本土规范语言

> ID：13419233
> 
> 赞同：0
> 
> 时间：2012-11-16T15:07:13.590
> 
> 标签：nlp, antlr, stanford-nlp

寻找有关最佳方式的建议或想法 试图为分析师开发一种方式来开发一个规范文档，该文档描述我们的流程（BlackBoc）生成的可能的状态，然后可以提供其他流程，如文档生成（流程图等），测试, 代码生成等

如果规范是用编程编码类型语言语法编写的，然后使用 NLP 或 ANTLR 操作以创建我们的进程（BlackBoc）生成的可能状态列表

我想我的问题是 1）有人做过这样的事情吗？2) ANTLR 或 NLP 是否是处理以编程编码类型语言编写的文档的最佳方式？

谢谢

**来自 Spec Language 的状态列表 - 可以为其他进程提供支持**

```
"CAR" : CAR_FULLSIZE_CHASSIS  :  350cc : CAR = 1X23 (Altima SE)
"CAR" : CAR = 1X23 (Altima S) 
```

或者可能

```
VEHICLE = "CAR" = True : CHASSIS = CAR_FULLSIZE_CHASSIS = True  : CAR_ENGIN_SIZE > 350cc = True : CAR = 1X23 (Altima SE)
VEHICLE = "CAR" = True : CHASSIS = CAR_FULLSIZE_CHASSIS = False: CAR_ENGIN_SIZE > 350cc = False : CAR = 1X23 (Altima S) 
```

**分析师编写的规范语言**

```
if VEHICLE = "CAR"
if CHASSIS IN LIST ( CAR_FULLSIZE_CHASSIS )
    if CAR_ENGIN_SIZE > 350cc
        CAR = 1X23 (Altima SE)
    else
        CAR = 1X24 (Altima S)
else
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:29:21.783

> 我想我的问题是
> 
> 1）有人做过这样的事吗？
> 
> 2) ANTLR 或 NLP 是处理以编程编码类型语言编写的文档的最佳方式吗？

1.  是的;
2.  正如评论中已经提到的：这不是 NLP 解析器的工作。顾名思义，NLP 解析器适用于解析自然语言。您发布的语言示例片段可能有歧义，但看起来足够结构化，可以通过语法进行描述，并让一些解析器生成器（如 ANTLR）为您生成解析器。

# runtime-error - abap 运行时错误程序行太长

> ID：13419240
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:07:37.823
> 
> 标签：runtime-error, abap

再会。程序功能是获取一个设备编号（或无），在 alv 中显示该编号和描述（或全部），然后在用户双击时运行 IE03

程序在客户端 110 中运行良好，但在 150 中发生运行时错误。今天早上，我尝试制作一个名称更短的新程序（我唯一的线索），激活它（弹出窗口要求我也激活以前的版本）。那没有用，现在原版也不起作用。

程序“SAPLSKBH”正在终止，因为程序行太长，78 个字符宽，这对于内部表“\FUNCTION=K_KKB_FIELDCAT_MERGE\DATA=L_ABAP_SOURCE[]”来说太大了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:21:21.090

听起来您正在使用 REUSE_ALV_GRID_DISPLAY 进行输出，对吗？

检查你的源代码；某处有超过 78 个字符的行。函数 K_KKB_FIELDCAT_MERGE 获取程序的源代码以生成与您给它的表/结构相对应的结构。（在过去，ABAP 代码的一行有 78 个字符的宽度限制，这是一个旧的功能模块）。

您也可以自己在代码中构建字段目录，而不是使用此函数。

# javascript - 保持选择持久

> ID：13419241
> 
> 赞同：2
> 
> 时间：2012-11-16T15:07:48.463
> 
> 标签：javascript, jquery, html, forms, select

当页面重新加载时，我需要保持所选值的持久性。我正在使用带有 jQ​​uery 的多选插件作为下拉选择菜单。这可能吗？我对此了解不多，所以如果我听起来很愚蠢，对不起。:)

```
<select multiple="multiple" style="width: 135px;" name="platform[]" id="platform">
<option value="platform_1">Platform 1</option>
<option value="platform_2">Platform 2</option>
</select>

<select id="2" multiple="multiple" style="width: 165px;" name="features[]" id="features">
<optgroup label="Group One">
<option value="feature_1">Feature 1</option>
<option value="feature_2">Feature 2</option>
<option value="feature_3">Feature 3</option>
<option value="feature_4">Feature 4</option>
<option value="feature_5">Feature 5</option>
<optgroup label="Group Two">
<option value="feature_6">Feature 6</option>
<option value="feature_7">Feature 7</option>
<option value="feature_8">Feature 8</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:00:48.977

这是您可能需要的示例：

```
$("#platform").val(getCookie("platform"));
$("#2").val(getCookie("feature"));

$("#platform option").click(function(){
    document.cookie = "platform="+$(this).val();
});
$("#2 option").click(function(){
    document.cookie = "feature="+$(this).val();
});

function getCookie(c_name) {
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++) {
 x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
 y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

[jsfiddle](http://jsfiddle.net/jorgehdez/CBNFe/3/)

# php - php表单更新数据库不起作用

> ID：13419243
> 
> 赞同：0
> 
> 时间：2012-11-16T15:07:51.677
> 
> 标签：php, mysql, forms, edit

似乎无法通过使用 PHP 的 HTML 表单更新我的 SQL，有人可以帮忙吗

```
if (isset($_POST['update'])) { 
  $UpdateQuery = "UPDATE  nmc_cd, nmc_category, nmc_publisher SET " . 
                 "nmc_cd.CDTitle='$_POST[CDTitle]', " .
                 "nmc_cd.CDYear='$_POST[CDYear]', " . 
                 "nmc_cd.CDPrice='$_POST[CDPrice]', " .
                 "nmc_category.catDesc='$_POST[catDesc]', " .
                 "nmc_publisher.pubName='$_POST[pubName]' " .
                 "WHERE CDID='$_POST[CDID]'";
} 
```

我的 SQL 查询有问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:14:13.063

尝试从您的 php 页面打印出 sql 查询，将其复制并直接在数据库上运行。它成功了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:15:34.757

好吧，在您的代码中，您永远不会真正执行查询（使用`mysql_query($query_string)`）。`}`此外，如果你的 if 语句，你错过了结束。如果一切正常，那么您的 SQL 查询看起来还不错，尽管我会尝试针对数据库（您的插值字符串）运行它以确保生成的 SQL 是好的。

您还需要传递表单变量，`mysql_real_escape_string`以确保避免 SQL 注入攻击（或者在您的情况下只是格式错误的 SQL）。请参阅[文档](http://php.net/manual/en/function.mysql-real-escape-string.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:16:58.373

尝试

```
if (isset($_POST['update'])){ 
$UpdateQuery = "UPDATE  nmc_cd, nmc_category, nmc_publisher SET nmc_cd.CDTitle='"; $UpdateQuery .= $_POST[CDTitle]."', nmc_cd.CDYear='".$_POST[CDYear]."', nmc_cd.CDPrice='"; $UpdateQuery .= $_POST[CDPrice]."',nmc_category.catDesc='";
$UpdateQuery .= $_POST[catDesc]."',nmc_publisher.pubName='";
$UpdateQuery .= $_POST[pubName]."' WHERE CDID='".$_POST[CDID]."'"; //run query
} 
```

或者只是将所有 Post 变量转移到`$something`并在查询中使用它

# routing - Laravel 路由与分页和 restful 控制器

> ID：13419246
> 
> 赞同：0
> 
> 时间：2012-11-16T15:08:03.930
> 
> 标签：routing, pagination, laravel

我和很多其他人在一条类似的船上……从 Codeigniter 到 Laravel。

我正在搜索数据库，并正确提取结果。甚至分页工作正常。（它一次只显示 30 个，并在底部显示其余结果的链接）

您从一个部件搜索视图开始，该视图由控制器中的 get 函数调用。我在控制器中有一个发布功能，它正在拉动结果。（URL 仍然是部分搜索，但正在拉帖子功能）

问题是，当您选择第 6 页（URI 是 parts-search?page=6）时，它会被路由回拉入第一个 part-search 页面的函数。

我想说我必须做这样的事情：

`Route::any('parts-search?page=(:any)')`

但我不知道如何维护相同的搜索变量，或者是否每次都必须运行查询。

这些是我的文件：

**路由.php**

```
Route::controller('home');

Route::get('/', function()
{
    return View::make('home');
});

Route::get('parts-search', 'home@parts_search');

Route::post('parts-search', 'home@parts_search'); 
```

**home.php（控制器）**

```
public $restful = true;

public function get_index()
{
    return View::make('home');
}

public function get_parts_search()
{
    return View::make('part-search');
}

public function post_parts_search()
{
    if (Input::get('part_search'))
    {
        $term = Input::get('part_search');
        $parts = Part::where('part', 'LIKE',  $term.'%')
            ->order_by('part', 'asc')
            ->paginate(30);

        return View::make('results')
        ->with('parts', $parts)
        ->with('term', $term);
    }
    else
    {
        return View::make('part-search')
            ->with('error', '<h1>Please enter a search term</h1>');
    }

} 
```

直接的答案和我学习的地方将不胜感激......以及任何课程更正，因为这是我 Laravel 的第 3 天。谢谢！

所以我已经确认这绝对是一个路由问题，但没有关于从哪里开始的模糊线索。而且我整天都在问谷歌大神无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T07:08:26.507

这*通常*是您将搜索查询作为 GET 请求进行的原因，以便搜索关键字出现在 URI 中。大多数应用程序都是这样做的，甚至是 Stack Overflow。

要在您想要更改页面时维护查询字符串，您[可以附加到分页链接](http://laravel.com/docs/views/pagination#appending-to-pagination-links)。

# sql - SQL 字符串计数

> ID：13419251
> 
> 赞同：2
> 
> 时间：2012-11-16T15:08:30.513
> 
> 标签：sql

我在 SQL 中有一个表。我有一个名为 的列`CarMakes`，它具有以下内容：

```
Mercedes, BMW
Range Rover
Mazda, Toyota, Honda 
```

我想知道如何`CarMakes`在每一行中返回一个数字。

返回值应分别为 2、1 和 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:16:45.447

这是一个基于 MySQL 的答案，因此如果您使用其他东西，它可能不适合您的情况。这假设值是逗号分隔的并且在同一列中（相当一个假设:)）：

```
SELECT car, (LENGTH(car)-LENGTH(REPLACE(car, ',', ''))+1) AS 'Counts'
FROM CarMakes 
```

我确信这会在某处遇到问题，但如果您的情况不包含随机逗号，它可能会起作用。[您可以在此处](http://sqlfiddle.com/#!2/282c4)查看 SQLFiddle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:10:14.493

```
SELECT COUNT(CarMakes), CarMakes FROM cartable ORDER BY CarMakes ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:35:56.617

假设 T-SQL / MS SQL Server，你有两个选择：

1.  [String.Split](https://stackoverflow.com/questions/2647/split-string-in-sql) - 计算数组元素。
2.  [查找字符串中出现的字符](http://blog.sqlauthority.com/2010/08/16/sql-server-finding-the-occurrence-of-character-in-string/)- 计数逗号。

# symfony - 是否可以模拟我们自己的服务？

> ID：13419253
> 
> 赞同：1
> 
> 时间：2012-11-16T15:08:59.007
> 
> 标签：symfony, mocking, phpunit

我想模拟类构造函数中所需的服务。我有一个 PHPUnit 的例外： MyService 是必需的，给出了 Mock_MyService_0afc7fc1 。

但是对于 Request、EntityManager 或其他 Symfony 2 组件，我没有这个问题。

这是我的班级的构造：

```
use Acme\Bundle\Service\MyService;
use Symfony\Component\HttpFoundation\Request;

...

public function __construct(MyService $service, Request $request)
{ 
```

和我的模拟：

```
...

$service = $this->getMock('MyService');

$class = new Class($service, $request); 
```

模拟我们自己的服务是不可能的？只有 Symfony 2 组件？

PS：如果我`MyService`这样删除：`public function __construct($service, Request $request)`，这可行。但我想用它定义我的变量:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:12:12.737

问题是测试执行时 PHPUnit 无法找到（或自动加载）您的`MyService`类。

这意味着您可能会遇到与其他 Mocking 库相同的问题，因为它们都需要存在原始类来扫描它并创建模拟。

发生这种情况是因为您需要告诉 PHPUnit 完全限定的类名。

将您的代码更改为`$this->getMock("\Acme\Bundle\Service\MyService");`，它应该可以解决。

（不过，试一试嘲讽。这是一个不错的图书馆）

# cmake - 如何在实际构建/链接后让 cmake 创建时间戳文件？（如果可执行文件没有改变，什么也不做）

> ID：13419255
> 
> 赞同：3
> 
> 时间：2012-11-16T15:09:13.250
> 
> 标签：cmake

我想为我生成的三个可执行文件和中`date +"%s" > ${TIMESTAMP}`的每一个调用（即仅在创建相应的可执行文件时才创建时间戳）。`myapp_data``myapp_live``myapp_sim`

即使在删除二进制文件并重新链接之后，我似乎也无法弄清楚为什么我的自定义命令没有被执行。构建工作正常 - 只有时间戳生成不起作用。

```
MACRO( MY_APP TAG )
  SET( BINARY_TGT "myapp_${TAG}" )
  SET( TIMESTAMP  "TIMESTAMP_${TAG}" )
  ADD_EXECUTABLE( ${BINARY_TGT} ${APP_SRCS} )

  ADD_CUSTOM_COMMAND(
    OUTPUT  ${TIMESTAMP}
    COMMAND date 
    ARGS    +\"%s\" > ${TIMESTAMP}
    DEPENDS ${BINARY_TGT}
  )
ENDMACRO( MY_APP )

SUBDIRS( data )
SUBDIRS( live )
SUBDIRS( sim  ) 
```

在数据目录中，我有：

```
FILE(GLOB APP_SRCS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} main_data.cpp)
SET( MY_TAG data )
MY_APP( "${MY_TAG}" ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:40:19.283

CMake 不会运行独立的自定义命令，除非某些内容取决于它们的输出。一种选择是将自定义命令更改为后期构建：

```
add_custom_command(
  TARGET ${BINARY_TGT}
  POST_BUILD
  COMMAND date +\"%s\" > ${TIMESTAMP}
  VERBATIM
) 
```

另一个选项是添加自定义目标来驱动自定义命令。对于所有自定义命令，一个目标就足够了。

```
add_custom_target(
  GenerateTimestamps ALL
  DEPENDS ${yourListOfTimestampFiles}
) 
```

* * *

但是，我不确定重定向是否会按您的预期工作。当您输入`>`shell/命令提示符时，它不是程序的参数，而是 shell/命令处理器的指令。如果它不起作用（我从未测试过），则必须将调用`date`放入脚本中。

# c# - Windows Phone - 无法从包含登录信息的网站获取字符串

> ID：13419257
> 
> 赞同：1
> 
> 时间：2012-11-16T15:09:15.867
> 
> 标签：c#, php, .net, windows-phone-7, windows-phone-8

我是使用 Windows Phone 7/8 访问 Web 服务的新手。我正在使用 WebClient 从 php 网站获取字符串。该站点返回一个 JSON 字符串，但目前我只是想将它作为普通字符串放入 TextBox 中，以测试连接是否有效。

php 页面需要身份验证，我认为这就是我的代码失败的地方。这是我的代码：

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("myUsername", "myPassword");
client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
client.DownloadStringAsync(new Uri("https://www.mywebsite.com/ba/php/jsonstuff.php"));

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    try
    {
        string data = e.Result;
        this.jsonText.Text = data;
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(ex.Message);
    }
} 
```

这首先返回一个 WebException，然后返回一个 TargetInvocationException。如果我将 Uri 替换为例如“http://www.google.com/index.html”，则 jsonText 文本框将填充来自 Google 的 html 文本（奇怪的是，即使仍然设置了 WebClient 凭据，这也可以工作）。

那么是凭证设置的问题吗？在搜索有关如何使用凭据访问 php-pages 的指南时，我找不到任何好的结果，只有没有它们。然后我在某处找到了一个简短的提及来使用 WebClient.Credentials 属性。但它应该以其他方式工作吗？

**更新：**这是我可以从 WebException 中得到的（抱歉格式错误）：

System.Net.WebException：远程服务器返回错误：NotFound。--->System.Net.WebException：远程服务器返回错误：NotFound。在 System.Net.Browser.ClientHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.ClientHttpWebRequest.<>c_ *DisplayClasse.b* _d(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass1.b* _0 (Object sendState) --- 内部异常堆栈跟踪结束 --- 在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System. System.Net.WebClient 处的 Net.WebClient.GetWebResponse（WebRequest 请求，IAsyncResult 结果）。

**更新 2：**这是错误日志行：

11 月 16 日 17:51:12 myservice httpd[21036]: 127.0.0.1 - - [16/Nov/2012:17:51:12 +0200] "GET /ba/php/jsonstuff.php?origpath=/ba/php /jsonstuff.php HTTP/1.1" 401 290 "-" "Mozilla/5.0（兼容；MSIE 10.0；Windows NT 6.2；WOW64；Trident/6.0）"

401 我猜会建议虚假凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:11:23.817

在我看来，您确实需要了解服务器如何处理您的请求。WebException 中的“NotFound”可能意味着您指的是不存在的位置。但我确信您传递了正确的 URL。所以服务器上一定有一些逻辑可以重定向你。如果您使用桌面浏览器访问该 URL - 您是否有任何类型的 SSL 证书错误或警告？也许这就是原因。尝试使用 IE 在手机上导航。或者您可以设置另一个主机来试一试。

我将在我的机器上设置一个主机并尝试一下。

我猜是SSL证书的问题。WP 在检查 SSL 证书时非常严格，因此您应该尝试不使用 ssl 或在您的模拟器/手机上安装证书或在您的服务器上安装有效（非自生成）证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:11:16.863

好的，所以我找到了一种方法来让它工作。问题是 WebClient 类无法正确处理 Web 服务的 cookie。

经过一些谷歌搜索后，我找到了这个解决方案，它运行良好： http: [//firebelly.net/post/3341374382/cookie-aware-webclient-for-wp7](http://firebelly.net/post/3341374382/cookie-aware-webclient-for-wp7)

所以基本上你只需创建自己的客户端类，扩展可以存储 cookie 的 WebClient 类。

# php - 从两个表中选择交替记录

> ID：13419264
> 
> 赞同：0
> 
> 时间：2012-11-16T15:09:57.193
> 
> 标签：php, mysql

我的数据库中有两个表：`events_users`和`events_admins`. 两者几乎相同（除了几个字段）。两个表也都有一个`promoted`字段（1 或 0）。

```
+-----------------+-----------------------+-------------------+-------------------+
| events_users_id | events_users_promoted | events_users_name | events_users_date |
+-----------------+-----------------------+-------------------+-------------------+
|               1 |                     0 | Users foo         | 2012-11-15        |
|               2 |                     1 | Users bar         | 2012-11-15        |
|               3 |                     0 | Users foobar      | 2012-11-14        |
+-----------------+-----------------------+-------------------+-------------------+

+------------------+------------------------+--------------------+--------------------+
| events_admins_id | events_admins_promoted | events_admins_name | events_admins_date |
+------------------+------------------------+--------------------+--------------------+
|                1 |                      0 | admins foo         | 2012-11-14         |
|                2 |                      0 | admins bar         | 2012-11-15         |
|                3 |                      1 | admins foobar      | 2012-11-16         |
+------------------+------------------------+--------------------+--------------------+ 
```

由于各种原因，我不能将两种类型的事件放在一张桌子上。但是，我确实想要一个结果，如下所示：

所有事件都按日期排序，最近的在前，但管理员事件排在最前面，并且总是与用户事件交替出现（每条记录交替出现）。首先显示提升的用户和管理员事件。

```
+------------------+-----------------------+-------------------+-------------------+
|              a 3 |                     1 | admins foobar     | 2012-11-16        |
|              u 2 |                     1 | Users bar         | 2012-11-15        |
|              a 1 |                     0 | admins foo        | 2012-11-14        |
|              u 3 |                     0 | Users foobar      | 2012-11-14        |
|              a 2 |                     0 | admins bar        | 2012-11-15        |
|              u 1 |                     0 | Users foo         | 2012-11-15        |
+------------------+-----------------------+-------------------+-------------------+ 
```

我想知道是否可以通过一个查询来执行此操作，`UNION`用于合并两个表（一个表中的少数缺失字段，我将标记为空），但是，我不知道如何对它们进行排序。我目前看到的唯一出路是使用两个不同的查询`ORDER BY promoted DESC, date ASC`，将结果放在两个数组中，然后将它们与 PHP 交替合并。

**编辑**：似乎我没有很好地解释我的目标，因为当前的两个答案并不能完全解决我的问题。

建议的查询首先给我一个类别的所有提升事件，然后是另一种类型的所有提升事件，一种类型的正常事件，最后是另一种类型的剩余事件。但是，这些也需要交替：一位用户提升，一位管理员提升，一位用户提升，一位管理员提升....当我用完管理员提升事件时，我想要一个管理员事件，一个用户事件，一个管理员事件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:15:49.520

```
SELECT * FROM (
  SELECT
    'u' AS TYPE,
    id ,
    events_users_id AS events_users_id,
    events_users_promoted AS promoted,
    events_users_name AS name,
    events_users_date AS date
FROM eventusers
UNION ALL
SELECT
    'a' AS TYPE,
    id,
    events_admin_id AS events_admins_id,
    events_admin_promoted AS promoted,
    events_admin_name AS name,
    events_admin_date AS date
FROM eventadmins
) AS tmp
ORDER BY ID, TYPE DESC 
```

看看这个[http://www.sqlfiddle.com/#!2/5b9a5/10](http://www.sqlfiddle.com/#!2/5b9a5/10)

两个表中又增加了一列。

```
CREATE TABLE `eventusers` (
`id` INT(10) NOT NULL AUTO_INCREMENT,
`events_users_id` INT(10),
`events_users_promoted` INT(10),
`events_users_name` varchar(50),
`events_users_date` date,
PRIMARY KEY (`id`)

);
CREATE TABLE `eventadmins` (
`id` INT(10) NOT NULL AUTO_INCREMENT,
`events_admin_id` INT(10),
`events_admin_promoted` INT(10),
`events_admin_name` varchar(50),
`events_admin_date` date,
PRIMARY KEY (`id`)

); 
```

# android - 添加 avd 时出错

> ID：13419266
> 
> 赞同：1
> 
> 时间：2012-11-16T15:09:59.893
> 
> 标签：android, avd

我正在尝试添加一个 avd，但 ok 按钮被禁用：

![在此处输入图像描述](../Images/b33789513301f8e7bb6d4bf1299193ce.png)

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:48:31.843

没有为此目标安装系统映像。

运行 SDK 管理器并安装缺少的包。

# jquery - jQuery .sortElements

> ID：13419274
> 
> 赞同：0
> 
> 时间：2012-11-16T15:10:28.347
> 
> 标签：jquery

我正在使用此代码

```
.wrapInner('<span title="sort this column"/>')
    .each(function () {

    var th = $(this),
        thIndex = th.index(),
        inverse = false;

    th.click(function () {

        table.find('td').filter(function () {

            return $(this).index() === thIndex;

        }).sortElements(function (a, b) {

            return $.text([a]) > $.text([b]) ? inverse ? -1 : 1 : inverse ? 1 : -1;

        }, function () {

            // parentNode is the element we want to move
            return this.parentNode;

        });

        inverse = !inverse;

    });

}); 
```

尝试订购一张桌子但是我不断收到以下错误

> TypeError: table.find("td").filter(function () {return $(this).index() === thIndex;}).sortElements 不是函数

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T15:46:29.060

[如前所述](https://stackoverflow.com/questions/13419274/jquery-sortelements#comment18338179_13419274)，您需要[jquery.sortElements.js 插件](https://github.com/padolsey/jquery.fn/tree/master/sortElements/)。

假设以下标记：

```
<ul>
    <li>Banana</li>
    <li>Carrot</li>
    <li>Apple</li>
</ul> 
```

您可以像这样按字母顺序对项目进行排序：

```
$('li').sortElements(function(a, b){
    return $(a).text() > $(b).text() ? 1 : -1;
}); 
```

这将导致：

```
<ul>
    <li>Apple</li>
    <li>Banana</li>
    <li>Carrot</li>
</ul> 
```

它还允许您指定要排序的元素。当前集合的元素将是那些在每次调用比较器时称为 a 和 b 的元素，但您可能不希望这些元素成为移动的元素。例如，您可能希望它成为父母。例如，在对表格列进行排序时，您将按`<td>`元素排序，但您实际想要在 DOM 中移动的元素是`<tr>`（每个`<td>`的父级）：

```
$('td').sortElements(myComparator, function(){
    // Return a reference to the desired element:
    return this.parentNode;
}); 
```

在此处查看更多信息：http: [//james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)。

# forms - ASP vbscript 电子邮件表单 - 仅发送具有值的字段

> ID：13419283
> 
> 赞同：0
> 
> 时间：2012-11-16T15:10:58.503
> 
> 标签：forms, email, asp-classic, vbscript

这是发送电子邮件的 ASP 代码..

```
<%
'declare variables
Dim EmailFrom
Dim EmailTo
Dim Subject
Dim DealerName
Dim DealerNumber
Dim InvoiceNumber
Dim PONumber
Dim InvoiceDate
Dim ModelNumber
Dim SerialNumber
Dim ConditionofUnit
Dim ReasonforRMA
Dim OtherText
Dim ModelNumber2
Dim SerialNumber2
Dim ConditionofUnit2
Dim ReasonforRMA2
Dim OtherText2
Dim ModelNumber3
Dim SerialNumber3
Dim ConditionofUnit3
Dim ReasonforRMA3
Dim OtherText3
Dim ModelNumber4
Dim SerialNumber4
Dim ConditionofUnit4
Dim ReasonforRMA4
Dim OtherText4
Dim ModelNumber5
Dim SerialNumber5
Dim ConditionofUnit5
Dim ReasonforRMA5
Dim OtherText5
Dim ModelNumber6
Dim SerialNumber6
Dim ConditionofUnit6
Dim ReasonforRMA6
Dim OtherText6
Dim ModelNumber7
Dim SerialNumber7
Dim ConditionofUnit7
Dim ReasonforRMA7
Dim OtherText7
Dim ModelNumber8
Dim SerialNumber8
Dim ConditionofUnit8
Dim ReasonforRMA8
Dim OtherText8
Dim ModelNumber9
Dim SerialNumber9
Dim ConditionofUnit9
Dim ReasonforRMA9
Dim OtherText9
Dim ModelNumber10
Dim SerialNumber10
Dim ConditionofUnit10
Dim ReasonforRMA10
Dim OtherText10

' get posted data into variables
EmailFrom = Trim(Request.Form("EmailFrom")) 
EmailTo = "ouremail@domain.com"
Subject = "my subject"
DealerName = Trim(Request.Form("DealerName")) 
DealerNumber = Trim(Request.Form("DealerNumber")) 
InvoiceNumber = Trim(Request.Form("InvoiceNumber")) 
PONumber = Trim(Request.Form("PONumber")) 
InvoiceDate = Trim(Request.Form("InvoiceDate")) 
ModelNumber = Trim(Request.Form("ModelNumber")) 
SerialNumber = Trim(Request.Form("SerialNumber")) 
ConditionofUnit = Trim(Request.Form("ConditionofUnit"))
ReasonforRMA = Trim(Request.Form("ReasonforRMA")) 
OtherText = Trim(Request.Form("OtherText")) 
ModelNumber2 = Trim(Request.Form("ModelNumber2")) 
SerialNumber2 = Trim(Request.Form("SerialNumber2")) 
ConditionofUnit2 = Trim(Request.Form("ConditionofUnit2"))
ReasonforRMA2 = Trim(Request.Form("ReasonforRMA2")) 
OtherText2 = Trim(Request.Form("OtherText2")) 
ModelNumber3 = Trim(Request.Form("ModelNumber3")) 
SerialNumber3 = Trim(Request.Form("SerialNumber3")) 
ConditionofUnit3 = Trim(Request.Form("ConditionofUnit3"))
ReasonforRMA3 = Trim(Request.Form("ReasonforRMA3")) 
OtherText3 = Trim(Request.Form("OtherText3")) 
ModelNumber4 = Trim(Request.Form("ModelNumber4")) 
SerialNumber4 = Trim(Request.Form("SerialNumber4")) 
ConditionofUnit4 = Trim(Request.Form("ConditionofUnit4"))
ReasonforRMA4 = Trim(Request.Form("ReasonforRMA4")) 
OtherText4 = Trim(Request.Form("OtherText4")) 
ModelNumber5 = Trim(Request.Form("ModelNumber5")) 
SerialNumber5 = Trim(Request.Form("SerialNumber5")) 
ConditionofUnit5 = Trim(Request.Form("ConditionofUnit5"))
ReasonforRMA5 = Trim(Request.Form("ReasonforRMA5")) 
OtherText5 = Trim(Request.Form("OtherText5")) 
ModelNumber6 = Trim(Request.Form("ModelNumber6")) 
SerialNumber6 = Trim(Request.Form("SerialNumber6")) 
ConditionofUnit6 = Trim(Request.Form("ConditionofUnit6"))
ReasonforRMA6 = Trim(Request.Form("ReasonforRMA6")) 
OtherText6 = Trim(Request.Form("OtherText6")) 
ModelNumber7 = Trim(Request.Form("ModelNumber7")) 
SerialNumber7 = Trim(Request.Form("SerialNumber7")) 
ConditionofUnit7 = Trim(Request.Form("ConditionofUnit7"))
ReasonforRMA7 = Trim(Request.Form("ReasonforRMA7")) 
OtherText7 = Trim(Request.Form("OtherText7")) 
ModelNumber8 = Trim(Request.Form("ModelNumber8")) 
SerialNumber8 = Trim(Request.Form("SerialNumber8")) 
ConditionofUnit8 = Trim(Request.Form("ConditionofUnit8"))
ReasonforRMA8 = Trim(Request.Form("ReasonforRMA8")) 
OtherText8 = Trim(Request.Form("OtherText8")) 
ModelNumber9 = Trim(Request.Form("ModelNumber9")) 
SerialNumber9 = Trim(Request.Form("SerialNumber9")) 
ConditionofUnit9 = Trim(Request.Form("ConditionofUnit9"))
ReasonforRMA9 = Trim(Request.Form("ReasonforRMA9")) 
OtherText9 = Trim(Request.Form("OtherText9")) 
ModelNumber10 = Trim(Request.Form("ModelNumber10")) 
SerialNumber10 = Trim(Request.Form("SerialNumber10")) 
ConditionofUnit10 = Trim(Request.Form("ConditionofUnit10"))
ReasonforRMA10 = Trim(Request.Form("ReasonforRMA10")) 
OtherText10 = Trim(Request.Form("OtherText10")) 

Dim mail
Set mail = Server.CreateObject("CDONTS.NewMail") 
mail.To = EmailTo
mail.BodyFormat = 0
mail.MailFormat = 0
mail.From = EmailFrom
mail.Subject = Subject

mail.Body = "This is an email generated." & "<br>" & "<br>" & _
"<b>Dealer Name: </b>" & DealerName & "<br>" & _
"<b>Dealer Number: </b>" & DealerNumber & "<br>" & _
"<b>Invoice Number: </b>" & InvoiceNumber & "<br>" & _
"<b>PO Number: </b>" & PONumber & "<br>" & _
"<b>Invoice Date: </b>" & InvoiceDate & "<br>" & _
"<b>------ ITEM 1 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText & "<br>" & _
"<b>------ ITEM 2 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber2 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber2 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit2 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA2 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText2 & "<br>" & _
"<b>------ ITEM 3 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber3 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber3 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit3 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA3 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText3 & "<br>" & _
"<b>------ ITEM 4 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber4 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber4 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit4 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA4 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText4 & "<br>" & _
"<b>------ ITEM 5 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber5 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber5 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit5 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA5 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText5 & "<br>" & _
"<b>------ ITEM 6 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber6 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber6 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit6 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA6 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText6 & "<br>" & _
"<b>------ ITEM 7 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber7 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber7 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit7 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA7 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText7 & "<br>" & _
"<b>------ ITEM 8 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber8 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber8 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit8 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA8 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText8 & "<br>" & _
"<b>------ ITEM 9 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber9 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber9 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit9 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA9 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText9 & "<br>" & _
"<b>------ ITEM 10 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber10 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber10 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit10 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA10 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText10 & "<br>"
mail.Send 

' redirect to success page 
Response.Redirect("complete.html")
%> 
```

因此，正如您所看到的，不是在每封电子邮件中发送所有 10 个项目，有谁知道我如何只能发送实际填写了值的项目？只需填写 1 项即可完成最多 10 项。

编辑：我把它改成这样：

```
Dim mail
Set mail = Server.CreateObject("CDONTS.NewMail") 
mail.To = EmailTo
mail.BodyFormat = 0
mail.MailFormat = 0
mail.From = EmailFrom
mail.Subject = Subject
If Request.Form("ModelNumber2") <> "" Then
mail.Body = "This is an email generated." & "<br>" & "<br>" & _
"<b>Dealer Name: </b>" & DealerName & "<br>" & _
"<b>Dealer Number: </b>" & DealerNumber & "<br>" & _
"<b>Invoice Number: </b>" & InvoiceNumber & "<br>" & _
"<b>PO Number: </b>" & PONumber & "<br>" & _
"<b>Invoice Date: </b>" & InvoiceDate & "<br>" & _
"<b>------ ITEM 1 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText & "<br>" & _
"<b>------ ITEM 2 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber2 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber2 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit2 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA2 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText2 & "<br>"

ElseIf Request.Form("ModelNumber2") <> "" And Request.Form("ModelNumber3") <> "" Then
mail.Body = "This is an email generated." & "<br>" & "<br>" & _
"<b>Dealer Name: </b>" & DealerName & "<br>" & _
"<b>Dealer Number: </b>" & DealerNumber & "<br>" & _
"<b>Invoice Number: </b>" & InvoiceNumber & "<br>" & _
"<b>PO Number: </b>" & PONumber & "<br>" & _
"<b>Invoice Date: </b>" & InvoiceDate & "<br>" & _
"<b>------ ITEM 1 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText & "<br>" & _
"<b>------ ITEM 2 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber2 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber2 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit2 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA2 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText2 & "<br>" & _
"<b>------ ITEM 3 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber3 & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber3 & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit3 & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA3 & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText3 & "<br>"
'ElseIf Request.Form("ModelNumber4") = "" Then

'ElseIf Request.Form("ModelNumber5") = "" Then

'ElseIf Request.Form("ModelNumber6") = "" Then

'ElseIf Request.Form("ModelNumber7") = "" Then

'ElseIf Request.Form("ModelNumber8") = "" Then

'ElseIf Request.Form("ModelNumber9") = "" Then

'ElseIf Request.Form("ModelNumber10") = "" Then
Else
mail.Body = "This is an email generated." & "<br>" & "<br>" & _
"<b>Dealer Name: </b>" & DealerName & "<br>" & _
"<b>Dealer Number: </b>" & DealerNumber & "<br>" & _
"<b>Invoice Number: </b>" & InvoiceNumber & "<br>" & _
"<b>PO Number: </b>" & PONumber & "<br>" & _
"<b>Invoice Date: </b>" & InvoiceDate & "<br>" & _
"<b>------ ITEM 1 ------</b><br>" & _
"<b>Model Number: </b>" & ModelNumber & "<br>" & _
"<b>Serial Number: </b>" & SerialNumber & "<br>" & _
"<b>Condition of Unit </b>" & ConditionofUnit & "<br>" & _
"<b>Reason for RMA: </b>" & ReasonforRMA & "<br>" & _
"<b>Other Text <i>(If Applicable)</i></b>: " & OtherText & "<br>"
End If
mail.Send 
```

但是当我填写 3 个项目时，它仍然只发送 2 个项目的电子邮件。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T01:37:50.420

我会通过循环减少输入量...（最简单的方法是将“1”添加到第一组字段的末尾）自从我做了任何经典 ASP 以来已经有一段时间了，但是从记忆中这应该可以工作：

```
mail.Body = "This is an email generated." & "<br>" & "<br>" & _
"<b>Dealer Name: </b>" & DealerName & "<br>" & _
"<b>Dealer Number: </b>" & DealerNumber & "<br>" & _
"<b>Invoice Number: </b>" & InvoiceNumber & "<br>" & _
"<b>PO Number: </b>" & PONumber & "<br>" & _
"<b>Invoice Date: </b>" & InvoiceDate & "<br>"

for i = 1 to 10
    if trim(Request.Form("ModelNumber" & cstr(i))) <> "" then
        mail.Body += "<b>------ ITEM " & cstr(i) & " ------</b><br>" & _
            "<b>Model Number: </b>" & trim(Request.Form("ModelNumber" & cstr(i)) & "<br>" & _
            "<b>Serial Number: </b>" & trim(Request.form("SerialNumber" & cstr(i))  & "<br>" & _
             ...
    end if
next 
```

# php - 如何通过 php api 更新 youtube 视频？

> ID：13419285
> 
> 赞同：0
> 
> 时间：2012-11-16T15:11:04.320
> 
> 标签：php, api, youtube

我将使用如下代码更新视频：

```
$headers = array("PUT /feeds/api/users/default/uploads/VIDEOID HTTP/1.1",
"Host: gdata.youtube.com",
"Authorization: GoogleLogin auth=".$authvalue,
"GData-Version: 2",
"X-GData-Key: key=KEY",
"Content-length: ".strlen($data),
"Content-Type: application/atom+xml; charset=UTF-8");
$curl = curl_init("https://gdata.youtube.com/feeds/api/users/default/uploads/VIDEOID");
curl_setopt($curl, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_TIMEOUT, 10);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
curl_setopt($curl, CURLOPT_REFERER, true);
curl_setopt($curl, CURLOPT_HEADER, 0);
$returnxxx = curl_exec($curl);
curl_close($curl);
echo $returnxxx; 
```

我已经生成了一个valide authvalue（经过测试-> ok）。但它显示：

> 无效的 uri

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:22:11.873

@Marc B 感谢您的提示！我用过`curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'PUT');`而不是`curl_setopt($curl, CURLOPT_POST, 1);`！

# vb.net - VB.NET 返回一个对象

> ID：13419286
> 
> 赞同：0
> 
> 时间：2012-11-16T15:11:07.247
> 
> 标签：vb.net

以下语句是否会导致内存泄漏：

```
Imports System.Data.SQLClient

Public Function getConnection () As SQLConnection
    return New SQLConnection()
End Function

Public Sub TestConnection()
    Dim con As SQLConnection
    con = getConnection
    con.close
    con = Nothing
End Sub 
```

如何在 getConnection 中的 SQLConnection 上调用 .close 或 .dispose？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:22:12.650

您正在返回一个引用类型，因此您在 TestConnection 中对同一个实例进行操作，因此这里没有内存泄漏。最后，您有 2 个实例为 null（gc 将收集它们），但连接已关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:24:21.217

不会有内存泄漏，因为在您调用该方法后它会被垃圾回收。

但是这种方法只会引起混乱。一旦完成连接（即使出现异常），您应该始终处理连接（隐式关闭它）。

您可以在语句的 finally`Try/Finally`或（更容易）中做到这一点。[`Using`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)但是由于这两种方法都需要包装连接，因此您的方法使调用方法可以忘记它。因此，这是不好的做法。

所以只需这样做：

```
Public Sub TestConnection()
    Using con = New SqlConnection("connection string here")
        Using cmd = new SqlCommand("sql query here", con)
            ' do something, f.e. cmd.ExecuteNonQuery() '
        End Using
    End Using
End Sub 
```

# android - 卡在 Android 中的 XmlPullParser

> ID：13419288
> 
> 赞同：3
> 
> 时间：2012-11-16T15:11:19.523
> 
> 标签：android, xml

经过几个小时的搜索和调试后，我仍然被困在同一个地方，Eclipse 并没有帮助我。

我试图解析[这个 RSS 提要](http://fr.espnf1.com/rss/motorsport/story/feeds/0.xml?type=2)

这很简单。连接完成，我将 InputStream 转换为字符串，这很好用。

当我尝试解析获得的字符串时，我没有错误或警告，但我尝试拥有的值为空。这是XML过程

```
public class XmlOperations {
private static final String ns = null;

public List parse(String in) throws XmlPullParserException, IOException {
    try {

        XmlPullParser parser = Xml.newPullParser();
        parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        parser.setInput(new StringReader(in));
        parser.nextTag();
        return readFeed(parser);
    } finally {
        // 
    }
}

private List readFeed(XmlPullParser parser) throws XmlPullParserException, IOException {
    List entries = new ArrayList();
    // first xml balise
    parser.require(XmlPullParser.START_TAG, ns,"rss"); 
    while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        String name = parser.getName();
        Log.w(TAG, name); // output channel the first time
        // Starts by looking for the item tag
        if (name.equals("item")) {
            **Log.w(TAG, "Never get in here" )**
          entries.add(readEntry(parser));
        } else {
            skip(parser);
            Log.w(TAG, "lala");
        }
    }  
    return entries;
}

// Parses the contents of an item. If it encounters a title, description, or link tag, hands them off
// to their respective "read" methods for processing. Otherwise, skips the tag.
private Entry readEntry(XmlPullParser parser) throws XmlPullParserException, IOException {
    parser.require(XmlPullParser.START_TAG, ns, "item");
    String title = null;
    String description = null;
    String link = null;
    while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        String name = parser.getName();
        if (name.equals("title")) {
            title = readTitle(parser);
        } else if (name.equals("description")) {
            description = readDescription(parser);
        } else if (name.equals("link")) {
            link = readLink(parser);
        } else {
            skip(parser);
        }
    }
    return new Entry(title, description, link);
}

// Processes title tags in the feed.
private String readTitle(XmlPullParser parser) throws IOException, XmlPullParserException {
    parser.require(XmlPullParser.START_TAG, ns, "title");
    String title = readText(parser);
    parser.require(XmlPullParser.END_TAG, ns, "title");
    return title;
}

// Processes link tags in the feed.
private String readLink(XmlPullParser parser) throws IOException, XmlPullParserException {
    parser.require(XmlPullParser.START_TAG, ns, "link");
    String link = readText(parser);
    parser.require(XmlPullParser.END_TAG, ns, "link");
    return link;
}

// Processes summary tags in the feed.
private String readDescription(XmlPullParser parser) throws IOException, XmlPullParserException {
    parser.require(XmlPullParser.START_TAG, ns, "description");
    String description = readText(parser);
    parser.require(XmlPullParser.END_TAG, ns, "description");
    //Log.d("vALUE = ", summary);
    return description;
}

// For the tags title and description, extracts their text values.
private String readText(XmlPullParser parser) throws IOException, XmlPullParserException {
    String result = "";
    if (parser.next() == XmlPullParser.TEXT) {
        result = parser.getText();
        parser.nextTag();
    }
    return result;
}

private void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
    if (parser.getEventType() != XmlPullParser.START_TAG) {
        throw new IllegalStateException();
    }
    int depth = 1;
    while (depth != 0) {
        switch (parser.next()) {
        case XmlPullParser.END_TAG:
            depth--;
            break;
        case XmlPullParser.START_TAG:
            depth++;
            break;
        }
    }
 } 
```

我想错误出在其中一种解析方法中。

在另一个班级我有这个

```
XmlOperations xml = new XmlOperations();
        try {
            entrieses = xml.parse(result);
            String lol = null;
            for(Entry item : entrieses) {
                //Toast.makeText(getApplicationContext(), item.title, Toast.LENGTH_SHORT).show();
                lol = item.link.toString();
            }
            tv.setText("Pin " + lol + " gouin"); 
```

entreses 是一个条目列表。仍然等于 null :(

编辑：有了日志猫，我有频道 lala，仅此而已

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:34:10.560

我终于知道了。我的代码是正确的，我的 XML 理解不是。XML 是这样的

```
<rss>
    <channel>
        <item>
            <link> </link>
            <title> </title>
        </item>
    </channel>
</rss> 
```

我的代码进入频道，然后进入下一个频道，但它不存在。我只需要在循环之前添加 `parser.Next()`我的`reedFeed()`函数来传递通道标签并直接进入项目标签。它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:22:50.223

我认为您的`readFeed()`函数中的行需要`while (parser.next() != XmlPullParser.END_DOCUMENT) {`代替`while (parser.next() != XmlPullParser.END_TAG) {`，因为否则它几乎会立即返回。

# eclipselink - 包括 EclipseLink 通过编织进行的内部优化

> ID：13419289
> 
> 赞同：2
> 
> 时间：2012-11-16T15:11:24.270
> 
> 标签：eclipselink

我是 EclipseLink 的新手，现在我正在逐步了解它。现在，我正在通过编织 inb 进行性能优化，以便为 ***ToOne 关系使用延迟加载，为实体实例的部分加载获取组，为提交性能优化和内部优化进行更改跟踪......而这里的问题是. 不幸的是，我没有通过谷歌搜索通过这种策略找到正确的表演。

有人可以解释 EclipseLink 通过这个编织设置执行什么样的内部优化吗？

在此先感谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:55:02.517

我建议您分解您的问题，以更具体地说明您正在寻找什么，但我会尝试添加信息。

Weaving 允许 EclipseLink 更改实体的字节码以添​​加提供者特定的方法等，这样您就不需要在模型中引入依赖项。您发现的文档中列出的每个术语 - 延迟加载、获取 goups 等 - 都是您需要单独查找的所有性能增强功能。所有这些都可以在没有编织的情况下使用，但需要对您的实体进行更改以实现 EclipseLink 接口和方法。

延迟加载会延迟获取关系，直到您的应用程序访问它。例如，您的实体中的 getEmployee() 只会返回参考员工属性 - 如果不进行编织，员工必须已经被获取，否则将错误地返回 null。通过编织，可以将代码添加到实体中，以便它进入数据库以按需获取它。

获取组是类似的概念，适用于基本映射而不是关系，而更改跟踪更高级，允许 EclipseLink 在您对实体进行更改时收到通知，而不必在提交时将更改与预构建备份进行比较。每个在 EclipseLink 文档中都有独立的参考。

# python - python函数定义

> ID：13419291
> 
> 赞同：-3
> 
> 时间：2012-11-16T15:11:32.120
> 
> 标签：python

我是python新手。你能解释一下这段代码吗？

```
def factorial(n):
    if n == 0:
        return 1
    return n*factorial(n-1)

>>>print factorial(5)
>>>120 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:17:04.350

```
def factorial(n):            # define a function, receiving a value 'n'
    if n == 0:               # if n is 0, then...
        return 1             #    return the result 1 to the calling code (done!)
    return n*factorial(n-1)  # otherwise return n times the result of calling
                             #  this function (factorial) with the lower value

>>>print factorial(5)

# factorial(5): 5 != 0, so return 5 * factorial(4)
#   factorial(4): 4 != 0 ...
#     ...
#           factorial(0) = 1 returns to factorial(1) call:
#         factorial(1) = 1 * 1 = 1, returns to factorial(2) call:
#       factorial(2) = 2 * 1 = 2
#     factorial(3) = 3 * 2 = 6
#   factorial(4) = 4 * 6 = 24
# factorial(5) = 5 * 24 = 120, return this

>>>120 
```

这叫做*递归*，你可以在网上找到很好的解释。请记住，这是一个要遵循的过程，因此当您看到 factorial(n-1) 表达式时，python 正在计算 n-1，然后`factorial`使用此值开始对此处的新调用。结果是每次调用都会再次调用，`factorial`直到最终达到 0，并且它可以开始返回堆栈到最外面的调用。想象一下自己尝试解决这个问题，你会发现你正在做同样的事情：

```
(5 * (4 * (3 * (2 * (1 * 1))))) 
```

在您知道其中括号的值等之前，您无法完成最外面的括号。

但请注意，代码有一个重大缺陷：如果 n-1-1-1-1-1 等永远不会达到 0（例如，如果 n=1.1），那么它永远不会到达该`return 1`行，也永远不会到达兔子洞的底部。事实上，它可能会导致堆栈溢出错误，因为每次调用都会占用堆栈上的更多空间，最终会耗尽。

为了进一步研究，了解尾调用递归（这是一个示例）以及当递归调用位于返回语句（尾）中时编译器如何解决堆栈溢出问题。

# c# - 使用 Excel Workbooks.OpenXML 并收到停止自动化的警告

> ID：13419294
> 
> 赞同：0
> 
> 时间：2012-11-16T15:11:39.140
> 
> 标签：c#, excel, automation, dataset

Excel 2010。

我有一个 C# 应用程序，它有一个包含多个表的数据集。我想将其导出到一个工作簿，其中每个表都是一个单独的工作表，保持数据集的顺序和数据表的名称很重要）

一种可能的解决方案是遍历每个表，将其放在自己的数据集上，将此数据集保存为 XML，然后使用 Application.Workbooks.OpenXML 方法

[MSDN OpenXML 文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbooks.openxml.aspx)

但是问题来了，如果我通过第三个参数（它可以很好地导入过滤器和所有内容），excel 会成功，但它警告我某些列是作为文本导入的，这对我来说没问题（其中一列是 UPC，应该是文本，而不是数字）。

通过显示此消息，它会停止该过程，直到用户单击这是可以接受的。然后我质疑自己，这位卓越之母现在的表现如何。

如何防止此消息弹出？或者以其他方式进行此导入并获得如此好的结果？（复制和粘贴工作但不是很好，使用自动化在每个单元格中写入会变慢，也许使用一些 excel 库......）

到你了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:19:00.497

尝试

```
var excelApplication = new Application { DisplayAlerts = false }; 
```

或者

```
Workbook excelWorkBoook = excelApplication.Workbooks.Open(...);
excelWorkBoook.CheckCompatibility = false; 
```

# python - 腌制一个字典，其中它的值是一些自定义类

> ID：13419296
> 
> 赞同：0
> 
> 时间：2012-11-16T15:11:42.097
> 
> 标签：python, pickle

是时候在这里提出我的第一个问题了。我面临以下问题：

我正在使用 pickle 模块转储一个大字典，然后从磁盘加载它。问题是解封后两个对象不一样。实际上这就是我正在做的事情：

在文件中`A.py`，我定义了具有一些属性和方法的类。

在文件`B.py`中，我制作了一个字典，其中的值是类的实例`A.py`

同样在文件中，`B.py`我腌制了这本字典并再次取消腌制。

这两个dicts不一样。我检查了钥匙，都是一样的。问题在于价值观。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:41:39.720

具有相同键和值的两个不同字典将不被视为相同：

```
>>> d1 = {'k1': 12345}
>>> d2 = {'k1': 12345}
>>> d1 is d2
False
>>> d1['k1'] is d2['k1']
False 
```

即使您实际上将值从一个复制到另一个：

```
>>> d1['k1'] = d2['k1']
>>> d1['k1'] is d2['k1']
True
>>> d1 is d2
False 
```

那是因为每个都是一个单独的容器。另一方面，您可以使用如下表达式检查所有键和值是否具有**相同的值，而不是字面上是相同的对象：**

```
(set(d1) == set(d2)) and all(d1[k] == d2[k] for k in d1) 
```

第一个子表达式确保每个键具有相同的值，第二个子表达式确保与这些键中的每一个关联的值相等。

当您从保存的数据中重构字典时，会创建一个新的字典。它不会是同一个字典，但它的所有键和值都应该与原始字典相同。如果确实不是这样，请至少向我们提供您用来确定它们不相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:12:17.453

实际上是字典值的类的实例如下所示：

```
class SchemaObject:
def __init__(self):
    self.type = ''
    self.name = ''
    self.parentdn = ''
    self.dn = ''
    self.oclass = ''

def initWithXMLNode(self, xmlnode, parentdn):
    self.type = ''
    self.name = ''
    self.parentdn = parentdn
    if xmlnode.nodeName=='fragments':
        self.dn = parentdn
    if xmlnode.nodeName=='fragment':
        self.initFragment(xmlnode)
    elif xmlnode.nodeName=='configGroupLdap':
        self.initGroup(xmlnode)
    elif xmlnode.nodeName=='configObjectLdap':
        self.initObject(xmlnode)

def initWithFragment(self, dn, parentdn, name):
    self.type = 'object'
    self.name = name
    self.parentdn = parentdn
    self.dn = dn
    self.oclass = name

def initFragment(self, xmlnode):
    self.type = 'fragment'
    self.dn = 'fsFragmentId=' + xmlnode.firstChild.nodeValue + ',' + self.parentdn
    self.oclass = 'FSFragment'

def initGroup(self, xmlnode):
    self.type = 'group'
    self.name = 'group-' + xmlnode.getAttribute('name')
    self.dn = xmlnode.getAttribute('dn')
    self.oclass = 'FSFragment'

def initObject(self, xmlnode):
    self.type = 'object'
    self.name = xmlnode.getAttribute('name')
    self.oclass = self.name
    if not xmlnode.hasAttribute('rdnname'):
        self.type = 'no_rdnname'
        return
    else:
        rdnname = xmlnode.getAttribute('rdnname')
    parts = rdnname.split(',')
    if xmlnode.getAttribute('multiple')!='true':
        dn = self.parentdn
        for part in reversed(parts):
            dn = 'fsFragmentId=' + part + ',' + dn
        self.dn = dn
    else:
        self.type = ''
        self.dn = 'fsFragmentId=' + parts[len(parts)-1] + ',' + self.parentdn
        dynamicStatics.append(self.oclass) 
```

在文件 B.py 中，我创建了一个字典，其值基于此类。字典是 my_dict。而且我还检查了密钥是否相等。只有当我尝试比较这些字典之间的两个值时它才会失败。

所以我尝试用以下方法腌制它：

```
 with open('my_dumped.pkl','wb') as schema:
    pickle.dump(my_dict,schema) 
```

并尝试从磁盘还原它时：

```
with open('my_dumped.pkl','rb') as schema:
    b = pickle.load(schema) 
```

如果现在我发出 my_dumped == b 这不应该返回 True 吗？我不关心身份。只是为了平等。正如 marteanu 所说，钥匙都在那里，每个钥匙都有正确的值。

不幸的是，上述等式返回 False。

# css - 如何使用 LESS 更有效地使用媒体查询？

> ID：13419298
> 
> 赞同：3
> 
> 时间：2012-11-16T15:11:50.197
> 
> 标签：css, twitter-bootstrap, responsive-design, less, media-queries

我正在使用 Bootstrap 和 LESS 进行响应式网页设计。

过去我喜欢 LESS 的原因之一是因为它可以将 HTML 元素的所有属性保持在一起。

我在下面有一些规则来定义一个`.sponsors`块，然后当视口> = 768px 时，一个规则适用于该块内的元素

我不喜欢该规则如何需要大量额外代码，以及该规则如何与其他规则分开。也觉得不对劲。

有什么更好的方法来做到这一点/组织这个？我是否需要首先将所有内容分解为顶级`@media`组？

```
.sponsors
{
    li
    {
        .thumbnail
        {
            padding-top:20px;
            padding-bottom:15px;
            img
            {
                display:block;
                margin:0 auto;
            }
        }
    }
}

@media (min-width: 768px)
{

    .sponsors
    {
        li
        {
            .thumbnail
            {
                padding-bottom:0px!important;
            }
        }
    }
} 
```

如果有类似的东西会很甜蜜：

```
.thumbnail
{
    &[@mediaWidth >=768]
    {
    padding-bottom:0px!important;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T15:44:35.630

我认为您可以嵌套媒体查询，LESS (>1.3.0) 将在编译期间将它们“冒泡”到样式表的根目录。

```
.sponsors
{
    li
    {
        .thumbnail
        {
            padding-top:20px;
            padding-bottom:15px;

            @media (min-width: 768px) {
                padding-bottom:0px!important;
            }

            img
            {
                display:block;
                margin:0 auto;
            }
        }
    }
} 
```

# asp.net - VS 2010：“System.Web.UI.HtmlControls.HtmlGenericControl”类型的值无法转换为“System.Web.UI.HtmlControls.HtmlTableRow”

> ID：13419299
> 
> 赞同：2
> 
> 时间：2012-11-16T15:11:57.440
> 
> 标签：asp.net, visual-studio-2010, visual-studio-2012

所以显然这个错误是 VS 2012 中的一个已知错误，当​​您尝试将 a 设置为 runat="server" 时，它包含一个 or 元素。

好吧，我实际上使用的是 VS 2010，（尽管 IT 昨晚确实安装了 2012，并且有传言称它也会在 2010 年触发），并且有问题的表格元素没有据称导致的 thead 或 tbody 元素这个错误。但它们确实具有 runat="server" 属性和 colgroup 元素。

那么这与安装VS 2012有关吗？如果是这样，是否有针对此的修补程序？

更新：删除 colgroup 元素似乎可以解决这个问题。尽管如此，这还是很令人恼火的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:59:50.217

应用此补丁对我有用：http: [//www.microsoft.com/en-us/download/details.aspx?id=36359](http://www.microsoft.com/en-us/download/details.aspx?id=36359)

观察。我使用的是 Windows 7 x64，同时安装了 VS2010 和 VS2012。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T12:02:58.270

`<table run="server"...>`升级到包含`<tbody>`元素的 VS 2012 后出现此问题。为我删除已`<tbody>`解决的构建错误。

# xcode - Xcode 4.5 缺少样板方法实现

> ID：13419300
> 
> 赞同：0
> 
> 时间：2012-11-16T15:11:58.010
> 
> 标签：xcode, xcode4.5

我在使用 xcode 4.5.2 时正在学习一些使用 xcode 4.2 的 xcode 课程。

在创建新项目的那些课程中，我可以看到 ViewController.m 中有很多内置方法，例如 ViewDidAppear 等。在我的 ViewController.m 中有在线 -`viewDidLoad and didReceiveMemoryWarning`

有没有办法让这种行为恢复，或者我在 4.5.2 中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:53:27.580

你没有错过任何东西。

Xcode 的模板往往会随着版本的发布而*发展*，所以事情来来去去。其中一件事是您使用视图控制器获得的所有样板。

好消息是您知道它们丢失了，因此您知道在需要实施它们时要放回哪些。

# mysql - SQL 查询更新

> ID：13419301
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:12:00.943
> 
> 标签：mysql, sql, ipb

任何帮助表示赞赏。我们需要更新 ibf_posts.author_id。我已经尝试过了，但它似乎不起作用。没有错误，但运行数小时后查询尚未完成。2.9g 数据库。ibf_posts 为 1.9g

```
UPDATE ibf_posts SET author_id = (SELECT member_id FROM ibf_members 
                 WHERE ibf_members.members_display_name = ibf_posts.author_name) 
```

表：ibf_posts、ibf_members

ibf_posts.author_name = ibf_members.members_display_name

ibf_posts.author_id = ibf_members.member_id

```
[slinky = slinky]
[4814 = 4814] 
```

但我们有：

```
[slinky = slinky]
[0 = 4814] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:15:04.043

试试这样：

```
UPDATE ibf_posts, ibf_members
SET ibf_posts.author_id = ibf_members.member_id
WHERE ibf_members.members_display_name = ibf_posts.author_name; 
```

# python - 加载 MySQLdb 模块时出错 Mountain Lion

> ID：13419303
> 
> 赞同：1
> 
> 时间：2012-11-16T15:12:02.417
> 
> 标签：python, mysql, django, macos, osx-lion

我知道这方面有大约 500 万个问题，但我已经尝试了几天发布的解决方案，但仍然无法弄清楚。在 Django 终端中运行后`python manage.py runserver`，我收到以下消息：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x143c290>>
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/validation.py", line 23, in get_validation_errors
    from django.db import models, connection
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

我已经完成了正常的修复，包括`site.cfg`在 pythonmysql 转换器中打开文件并取消注释`mysql_config = /usr/local/bin/mysql_config`。在我把电脑扔到墙上之前，有人有什么最后一分钟的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:56:32.137

看起来您并没有真正安装 Python MySQLDB。你可以通过这个从你的 Python 命令行检查它，

```
import _mysql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:19:03.290

前几天我花了好几天试图让 Django 和 MySQL 一起玩得很好。我终于设法在本指南的帮助下对其进行了排序：

[http://criticus-ua.tumblr.com/post/33260391135/setting-up-django-with-mysql-on-mac-os-x-lion](http://criticus-ua.tumblr.com/post/33260391135/setting-up-django-with-mysql-on-mac-os-x-lion)

它使用了[Homebrew](http://mxcl.github.com/homebrew/)，在我看来它是一个很棒的 OSX 包管理器

# linux - `cp -dR` 的问题

> ID：13419314
> 
> 赞同：2
> 
> 时间：2012-11-16T15:12:34.453
> 
> 标签：linux, shell, unix

我的目录结构为：`/apps/amr`. 我想按`amr`原样进行备份（即没有取消引用链接）。现在 /apps 目录具有它所属的不同用户和组（我无权访问它）。我以不同的用户和组登录。所以很明显在`/apps`目录中执行：

```
 mkdir amr_backup
    cp -dR amr amr_backup 
```

由于权限被拒绝而不起作用。所以，我试图在`/apps/amr`目录中做同样的事情，因为`amr`目录具有我登录的相同用户和组。但是执行时：

```
 mkdir amr_backup
    cp -dR * amr_backup 
```

它显示了这个错误：

```
 cp: cannot copy a directory, `amr_backup`, into itself, `amr_backup/amr_backup' 
```

这很明显，因为 amr_backup 目录本身位于`/apps/amr`. 而且我还可以看到并非所有内容都已正确备份：

```
 du -sh /apps/amr
    8.6G    /apps/amr
    du -sh /apps/amr/amr_backup
    4.3G    /apps/amr/amr_backup 
```

所以请给我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:27:54.467

我说，保持简单...

```
mkdir .tmp
cp -dR * .tmp/.
mv .tmp amr_backup 
```

的 glob 扩展`*`将不包含以 开头的任何内容，`.`因此隐藏目录本身不会是源目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:25:48.793

您可以通过使用而不是通配符`amr_backup`从复制命令中排除。`!(amr_backup)``*`

```
cp -dR !(amr_backup) amr_backup/ 
```

文件大小在我看来还可以。`amr`大约是 的两倍，`amr_backup`因为它包含`amr_backup`.

# c# - 查找调用了什么方法

> ID：13419315
> 
> 赞同：3
> 
> 时间：2012-11-16T15:12:35.573
> 
> 标签：c#, asp.net, webforms

我有一个 ASPX 页面，后面没有代码（即没有`.aspx.cs`同名）。在代码中是这一行：

```
<div style="overflow: hidden; text-align: center; z-index: 105;">
    <%= MainNavBarHTML %><%= SubNavBarHTML %>
</div> 
```

我在程序的其余部分中搜索了`MainNavBarHTML`and `SubNavBarHTMl`，但找不到对它们的任何引用。我如何找到填充这些元素的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:17:35.473

您可能想查看[CodeFile vs CodeBehind](https://stackoverflow.com/questions/73022/codefile-vs-codebehind)问题。

如果您的 ASPX 标记具有`CodeFile`指令，它将查找关联的`.cs`文件：

```
<%@ Page
    Language="C#"
    CodeFile="CustomerDetail.aspx.cs"
    Inherits="SomePage" %> 
```

相反，如果它`CodeBehind`列出了指令，它将在`Bin`文件夹中查找已定义类的程序集：

```
<%@ Page
    Language="C#"
    CodeBehind="CustomerDetail.aspx.cs"
    Inherits="SomePage" %> 
```

这两个指令的命名非常不幸。如果应用程序正在使用`CodeBehind`（听起来像这样），您可能无法访问源代码并且无法查看这些属性的定义，除非对已编译的程序集使用 .NET 反射工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:17:28.017

在 Visual Studio 中，将光标放在文本上并按下`F12`以跳转到定义或右键单击文本并选择“转到定义”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:48:59.440

现在将其添加为答案（而不是在评论中）。

您的项目将在某处包含代码，尽管它可能是另一个库 (DLL) 的一部分。

如果您右键单击属性（在本例中为`MainNavBarHTML`或`SubNavBarHTML`，然后从上下文菜单中选择“转到定义”，VS 将显示代码（如果它在 *.cs 页面中）或加载对象浏览器并导航到该属性，使您可以查看该属性的确切位置。

根据您的 VS 设置，`F12`可能什么都不做——例如，我什么也不做。在我看来，右键单击并选择“转到定义”是最稳定的导航方式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-16T15:30:20.453

锅炉，代码还在，你只需要选择文件并点击`F7`，你就会看到代码......

# c - 两位数指针？这怎么发生的？

> ID：13419318
> 
> 赞同：1
> 
> 时间：2012-11-16T15:12:44.173
> 
> 标签：c, pointers, memory-management, free

因此，在我正在进行的一个项目中，我收到以下错误：

```
*** glibc detected *** ./social_network: munmap_chunk(): invalid pointer: 0x09a913b0 *** 
```

一些 printf 语句显示我正在释放的导致此错误的结构的内存地址为....17。那么这怎么可能呢？会发生什么让这看起来……？

这是崩溃前的一些输出：

```
temp is: 162075592
temp user is  162075408
After free of temp
inside while loop, first line
before free of temp
temp is: 162075760
temp user is  162075480
After free of temp
inside while loop, first line
before free of temp
temp is: 162075568
temp user is  17 
```

这是输出输出的代码

```
 21 void destroy() {
 22 
 23     struct user_node *node;
 24 
 25     struct friend_node *temp;
 26     struct friend_node *next_temp;
 27     
 28     //iterate over the list of users
 29     while (*head != NULL) {
 30         printf("before a_friend\n");
 31         temp = (*head)->a_friend;
 32         
 33         //Iterate over friends of users, free friend nodes
 34         while (temp != NULL) {
 35             printf("inside while loop, first line\n");
 36             next_temp = temp->next_friend;
 37             printf("before free of temp\n");
 38             printf("temp is: %d\n", (int) temp);
 39             printf("temp user is  %d\n", (int)temp->user);
 40             free(temp); <==================================SEGFAULT IS HERE!!!!!!!!!!!!!
 41             printf("After free of temp\n");
 42             temp = next_temp;
 43             next_temp = NULL;
 44         }
 45 
 46         node = (*head)->next_user;
 47         printf("before free of: %s\n", (*head)->name);
 48         free(*head);
 49         printf("after free of that person...\n");
 50         *head = node;
 51         printf("*head = node afterwards\n");
 52         node = NULL;
 53     }
 54     printf("before final free...\n");
 55     free(head);
 56 } 
```

编辑：

结构朋友节点

```
 23 //node used to store a pointer to a user_node and next friend
 24 struct friend_node {
 25     struct friend_node *next_friend;
 26     struct user_node *user;
 27 }; 
```

结构用户节点

```
 12 //Struct definitions
 13 //node used to store information about a user
 14 struct user_node {
 15     char name[21];
 16     int age;
 17     int gender;
 18     char location[21];
 19     struct friend_node *a_friend;
 20     struct user_node *next_user;
 21 };
 22 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T15:19:32.957

这通常发生在您使用 NULL 指针时。你看，当你访问一个结构的成员时，它的偏移量被添加到指针上，然后被取消引用：

```
somestruct *p = NULL;
printf("%d", p->member); 
```

如果成员位于偏移量，例如 0xC，那么您将不会收到“尝试访问 0x0 处的内存”之类的错误，而是“尝试访问 0xC 处的内存”。

**编辑**：正如其他人所建议的，这可能不是您的问题的原因。但这是在“两位数指针”处收到错误的一个常见原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:23:02.413

> 可能发生了什么让这看起来

有很多种未定义的行为。缓冲区溢出、对已释放对象的访问、未初始化的变量都会浮现在脑海中。

在追捕这些东西时，`valgrind`是你最好的朋友。尽早并经常使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T15:26:08.000

我在您的代码中没有看到任何暗示您正在释放 address 的结构的内容`17`，因为您似乎错误地相信了这一点。

崩溃消息和您的转储都清楚地表明您正在尝试释放指向`temp`地址`162075568`( `0x09a913b0`) 的指针。该指针指向无效内存，这就是`free`崩溃的原因。这也是为什么您可能会看到`17`存储在该内存中的原因。那个内存是无效的，所以它存储随机垃圾也就不足为奇了。

算了吧`17`。它与任何事情无关。你的问题是`162075568`（`0x09a913b0`）。此值无效，这就是问题的根源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:20:36.130

确保`struct`在`NULL`创建/分配`struct`.

# excel - 在 Excel 中复制一个范围并将 Outlook 粘贴在临时文件中

> ID：13419321
> 
> 赞同：0
> 
> 时间：2012-11-16T15:12:48.647
> 
> 标签：excel, vba

我有一个 VBA 代码，它在 Excel 中复制一个范围并粘贴到 Outlook 电子邮件的正文中。该代码适用于我的几台同事的计算机，但不适用于我的计算机。代码一直到创建 .temp 文件，填充 To:、CC: 和 Subject ，但正文中没有任何内容。我正在尝试粘贴 HTML。我认为这是一个设置或类似的东西，但我不知道从哪里开始。对此的任何帮助将不胜感激。

```
Sub CreateEmail()

   Dim OutApp As Object
   Dim OutMail As Object

   Set OutApp = CreateObject("Outlook.Application")
   Set OutMail = OutApp.CreateItem(0)
    datestr = Date

    sbj = "***"
    toStr = "****"
    Ccstr = "*****"

   Dim rng As Range
   Set rng = Nothing
   Set rng = Range("Flash")

On Error Resume Next
With OutMail
    .To = toStr
    .Display
    .CC = Ccstr
    .BCC = ""
    .Subject = sbj & datestr
    .HTMLBody = RangetoHTML(rng)

End With
On Error GoTo 0

Set OutMail = Nothing
Set OutApp = Nothing
End Sub

Function RangetoHTML(rng As Range)
    Dim fso As Object
    Dim ts As Object
    Dim TempFile As String
    Dim TempWB As Workbook

Application.ScreenUpdating = False

TempFile = Environ$("temp") & "/" & "temp" & ".htm"

    rng.Copy
Set TempWB = Workbooks.Add(1)
With TempWB.Sheets(1)
    .Cells(1).PasteSpecial Paste:=8
    .Cells(1).PasteSpecial xlPasteValues, , False, False
    .Cells(1).PasteSpecial xlPasteFormats, , False, False
    .Cells(1).Select
    Application.CutCopyMode = False
    On Error Resume Next
    .DrawingObjects.Visible = True
    .DrawingObjects.Delete
    On Error GoTo 0
End With

    With TempWB.PublishObjects.Add( _
     SourceType:=xlSourceRange, _
     Filename:=TempFile, _
     Sheet:=TempWB.Sheets(1).Name, _
     Source:=TempWB.Sheets(1).UsedRange.Address, _
     HtmlType:=xlHtmlStatic)
    .Publish (True)
End With

Set fso = CreateObject("Scripting.FileSystemObject")
Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
RangetoHTML = ts.ReadAll
ts.Close
RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                      "align=left x:publishsource=")

TempWB.Close savechanges:=False

Kill TempFile

Set ts = Nothing
Set fso = Nothing
Set TempWB = Nothing

Application.ScreenUpdating = True 
```

结束功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:11:15.093

我选择使用这种方法。这会粘贴一系列 excel，但不会粘贴 HTML 版本。我不需要使用 HTML。这同样有效，但没有颜色等。

```
Sub SendFlash()
Dim rng As Range
Dim OutApp As Object
Dim OutMail As Object

Set rng = Nothing
On Error Resume Next
Set rng = Range("K4:L8").SpecialCells(xlCellTypeVisible)
On Error GoTo 0

If rng Is Nothing Then
    MsgBox "The selection is not a range or the sheet is protected" & _
           vbNewLine & "please correct and try again.", vbOKOnly
    Exit Sub
End If

With Application
    .EnableEvents = False
    .ScreenUpdating = False
End With

toStr = "*"
Ccstr = "*"
sbj = "Tran"

Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)

On Error Resume Next
With OutMail
    .To = toStr
    .CC = Ccstr
    .BCC = ""
    .Subject = sbj & Date
    .Body = TableRangeToTabDelim(rng)
    .display
End With
On Error GoTo 0

With Application
    .EnableEvents = True
    .ScreenUpdating = True
End With

Set OutMail = Nothing
Set OutApp = Nothing
End Sub

Function TableRangeToTabDelim(TableRange As Range) As String
Dim TableCols As Integer
Dim TableRows As Integer
Dim ReturnString As String

TableCols = TableRange.Columns.Count
TableRows = TableRange.Rows.Count

i = 1
j = 1

Do While i <= TableRows
    Do While j <= TableCols
        ReturnString = ReturnString & TableRange.Cells(i, j).Value
        If j <> TableCols Then
            ReturnString = ReturnString & Chr(9)
        End If
        j = j + 1
    Loop
    j = 1
    If i <> TableRows Then
        ReturnString = ReturnString & Chr(10)
    End If
    i = i + 1
Loop

TableRangeToTabDelim = ReturnString
End Function 
```

# spring - 为什么没有在控制器的每个请求中初始化 bean（具有请求范围）？

> ID：13419322
> 
> 赞同：3
> 
> 时间：2012-11-16T15:12:53.443
> 
> 标签：spring, spring-mvc, spring-3

我的 ActionResponse 代码是：

```
@Component
@Scope(value = "request",proxyMode = ScopedProxyMode.TARGET_CLASS)
public class ActionResponse{
   public int a;
//body
} 
```

我的控制器：

```
@Controller
@RequestMapping(value="/ajax/discussion")
public class DiscussionController extends AbstractController {

    @Autowired
    private ActionResponse actionResponse;

    public void setActionResponse(ActionResponse actionResponse) {
        this.actionResponse = actionResponse;
    }

    @RequestMapping("/test")
    public @ResponseBody String test(){
        String response=this.actionResponse.a+"";
        if(this.actionResponse.a==0)
            this.actionResponse.a=10;
        return response;
    }

} 
```

我启动项目，然后第一次请求 /ajax/discussion/test 它显示 0

但之后对于其他请求，它显示 10

由于 ActionResponse 的请求范围，它必须在每个请求中显示 0

问题是：为什么不是在每个请求中都创建一次 bean(ActionResponse)？！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:33:59.817

CGLIB 在班级级别上工作。

CGLIB 代理仍然是一个单例，所以它从基类继承了字段。当您更改其公共属性时，您会更改单例的值。

您应该将数据更改封装在公共 getter 和 setter 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:36:07.537

有点晚了 - 只是添加了鲍里斯·特鲁霍夫的答案（已经 +1 了）：

原因是由于您使用`@Scope(proxyMode=..)`Spring 注释了 ActionResponse 最终会创建此 ActionResponse 的 CGLIB 子类，该子类在内部适当地处理范围。

现在，当您将 ActionResponse 注入 DiscussionController 时，注入的是 CGLIB 代理，并且由于您通过 setter 直接设置字段，因此它只是修改了代理的字段，而不是底层作用域代理对象。解决方法是通过 getter 和 setter 而不是通过字段进行状态更改。

# javascript - 删除浏览器只读样式

> ID：13419323
> 
> 赞同：0
> 
> 时间：2012-11-16T15:12:54.503
> 
> 标签：javascript, jquery, css

我正在尝试禁用文本字段中的用户文本输入，并`readonly="true"`在输入本身上使用该属性。

但是，我不希望它看起来与默认输入字段不同。我正在尝试编写一个不会让我进入并为其编写 CSS 的解决方案，因为浏览器可能会改变它们的样式并使这变得痛苦。

有什么方法可以删除浏览器`readonly`样式？

这是我正在谈论的屏幕截图。右边的是`readonly`，但我希望它看起来和左边的一样。![这仅在 Chrome 中。 所有浏览器都会以不同的方式处理它。](../Images/c324dc9759865441cf8fda84b09e1bfd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:29:25.930

浏览器样式根据定义是特定于浏览器的，因此任何解决方案都是特定于浏览器的。您需要研究浏览器默认设置（来自文档或通过实验），并为不同的浏览器提供不同的样式。很多工作，我不太明白潜在的好处是什么。消除正常字段和禁用字段之间的区别通常对可用性不利。

您可以将正常和禁用字段的样式显式设置为相同，但您不会获得浏览器默认值。

# javascript - Twitter API：计算今天早上 0:00 以来的推文数量？

> ID：13419325
> 
> 赞同：0
> 
> 时间：2012-11-16T15:12:56.557
> 
> 标签：javascript, twitter, numbers, posts, tweets

是否有 API 可以计算特定用户从今天早上 0:00 开始的推文数量？我已经尝试了以下 Javascript，但我能得到的最接近的是该用户所有时间的推文总数。

```
$.getJSON("http://api.twitter.com/1/statuses/user_timeline/BarackObama.json?count=1&include_rts=1&callback=?", function(data) {
     $("#twitter").html(data[0].user.statuses_count);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:40:17.133

您可以下载用户时间线，直到您收到“昨天”（即上午 0:00 之前）发布的推文。一旦你得到它，你只需要计算“今天”（即凌晨 0:00 之后）发布的推文。

**编辑 1**：获取它的伪 JavaScript 代码

```
var howManyTweetsWerePostedToday = function () {
    var timeline = downloadTimeline()
    var lastTweet = timeline[timeline.length-1]
    var now = new Date()
    var today = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDay(), 0, 0, 0, 0) // Limit between today and yesterday
    var lastTweetDate = new Date(lastTweet["created_at"])

    while (lastTweetDate.getTime() >= today.getTime()) {
        var lastTweetID = lastTweet["id_str"]
        var earlierTweetsTimeline = downloadTimeline(max_id = lastTweetID)
        timeline = timeline.concat(earlierTweetsTimeline.shift())
        lastTweet = timeline[timeline.length-1]
        lastTweetDate = new Date(lastTweet["created_at"])
    }

    return getNumberOfTweetsThatWerePostedTodayInTheTimeline(timeline)
}(); 
```

使用`downloadTimeline()`哪个函数调用`GET statuses/user_timeline`Twitter API 端点以获取时间线。有关端点的详细信息，请参阅[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)，尤其`max_id`是结果中的最高推文 ID。

`created_at`是发布推文的日期。`id_str`是 String 形式下的推文 ID。有关推文的更多详细信息，请参阅[https://dev.twitter.com/docs/platform-objects/tweets](https://dev.twitter.com/docs/platform-objects/tweets)。

# entity-framework - Breeze.js 是否支持包含空间类型的实体数据模型 (edm)？

> ID：13419328
> 
> 赞同：2
> 
> 时间：2012-11-16T15:13:02.037
> 
> 标签：entity-framework, breeze

我有一个 edmx，它有一个名为“地址”的实体。实体“地址”有一个名为“GeoLocation”的属性，其类型为**地理**（空间类型）。

当我运行我的 javascript，对模型中的任何实体执行简单查询时，Breeze.js 抱怨：

> 错误：无法识别数据类型是：Edm.Geography

Breeze.js 是否支持空间类型？有没有其他方法可以成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:35:58.767

Breeze 目前不支持空间类型。

如果您想在未来的版本中看到它，请[在 UserVoice 上投票](http://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3361941-support-for-spatial-types)：

# python - Python：字符串到十六进制

> ID：13419333
> 
> 赞同：0
> 
> 时间：2012-11-16T15:13:31.100
> 
> 标签：python

我想在python中将包含十六进制值（例如：）的字符串转换`12ab`为该十六进制值（例如：）。`0x12ab`

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:14:15.453

就像是：

```
 i = int('12ab', 16)
   # 4779
   hex(i)
   # '0x12ab' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:27:31.537

如果你想要字符串，这将是微不足道的：

```
your_hexa_value = '12ab'
answer = '0x' your_hexa_value 
```

但是，如果您想要数值（我认为您想要），

```
int(your_hexa_value, 16) 
```

就足够了。请注意，在内部，所有数字都以二进制表示，因此它们的基数无关紧要：

```
>>> 10 + 0x10 + 010  # 10 + 16 + 8
>>> 34 
```

# java - 位图创建内存不足

> ID：13419336
> 
> 赞同：4
> 
> 时间：2012-11-16T15:13:44.903
> 
> 标签：java, android, bitmap, out-of-memory

我正在尝试`onActivityResult()`从相机 Intent 旋转拍摄的图像，但偶尔会出现内存不足错误。

如何优化此代码？

[http://pastebin.com/ieaHS8qB](http://pastebin.com/ieaHS8qB)

```
bmp = BitmapFactory.decodeStream(new FileInputStream(f), null, null);
correctBmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), 
                bmp.getHeight(), mat, true); 
```

我试图在这些行之后添加`bmp.recycle()`和`correctBmp.recycle()`，但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:29:24.743

如果您开发您的应用程序 api 级别 10+，您可以添加您的清单

```
 android:largeHeap="true" //add this entity. 
```

喜欢

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:largeHeap="true"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

或试试这个（创建类）

```
 public Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
}

public static int calculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
} 
```

多亏了该代码，您还可以调整位图的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:27:14.283

尝试在 decodestream 之前添加以下代码并将选项作为参数传递。

```
BitmapFactory.Options options = new BitmapFactory.Options();                
options.inSampleSize = 5;               
options.inPurgeable = true;             
options.inInputShareable = true;

bmp = BitmapFactory.decodeStream(new FileInputStream(f),null, options); 
```

# python - Python，当 type(a) 还是 A 时如何处理 A(a)

> ID：13419340
> 
> 赞同：4
> 
> 时间：2012-11-16T15:13:59.267
> 
> 标签：python, class, idempotent

我需要创建一个模仿这种行为的类（在数学中，我们说*list*，*dict*是“幂等的”）：

```
>>> list(list([3,4]))
[3, 4]
>>> dict({'a':1,'b':2})
{'a':1,'b':2} 
```

所以，如果*A*是我的班级，我想写

```
>>> a = A(1)
>>> b = A(a)
>>> b == a
True 
```

我想我的 A 类必须看起来像这样：

```
class A(object):
   def __init__(self,x):
       if isinstance(x, A) : 
           self = x
       else : 
           self.x = x
           self.y = 'hello' 
```

我试试

```
>>> A(1).x
1
>>> A(A(1)).x
Traceback (most recent call last):
  File "<input>", line 1, in <module>
AttributeError: 'A' object has no attribute 'x' 
```

这没用 ！

我不想在*self中复制**x*属性，我只想让*self*成为*x*或“点” *x*

 ***一些想法？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T15:15:44.167

您正在寻找的是[`__new__()`](http://mail.python.org/pipermail/tutor/2008-April/061426.html)方法，它在类构建**之前**`__init__()`运行，而不是在之后运行。您可以使用`__new__()`并替换正在创建的对象。

```
def __new__(cls, x):
    if isinstance(x, A):
        return x
    else:
        return object.__new__(cls, x) 
```

您不能这样做，`__init__()`因为该对象已经创建。更改`self`只是更改局部变量的值，它不会影响对象。

还值得注意的是，在 Python 中类型检查几乎总是错误的事情。相反，请检查该类是否具有您需要的信息/属性。这样，某人可以创建一个行为类似于您的类并使用您的代码。

作为最后的警告，这是非常令人困惑的行为——人们不会期望你的班级会这样做，而且这通常不是一个好主意。您的 and 示例`list()`与`dict()`您在此处所做的不准确，因为`list(some_list)`没有给出`some_list`，它提供了一个新列表，该列表是副本的`some_list`-对于 : 也是如此`dict()`：

```
>>> x = [1, 2, 3]
>>> list(x) is x
False 
```

当您调用构造函数时，很自然地期望一个新对象，而不是对现有对象的引用。我建议制作`A(some_a)`副本`some_a`，并重组您的调用代码以不依赖`A(some_a) is some_a`）。***

# ruby-on-rails - Ruby on Rails Paperclip 在新窗口中打开

> ID：13419346
> 
> 赞同：1
> 
> 时间：2012-11-16T15:14:16.747
> 
> 标签：ruby-on-rails

我正在使用带有此代码的 PaperClip：

```
link_to "OPEN", @worequest.attach.url 
```

有没有办法在新的浏览器选项卡中打开文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:19:47.933

## 要发送文件：

您可以在控制器操作中使用 send_data 或[send_file](http://apidock.com/rails/ActionController/Streaming/send_file)方法：

> 'disposition' 选项指定文件是内联显示还是下载。有效值为“内联”和“附件”（默认）。

所以控制器操作中的这一行将在浏览器中打开图像（而不是下载它）：

```
def get_image
  send_file '/path/to.jpeg', :type => 'image/jpeg', :disposition => 'inline'
end 
```

## 要在新选项卡中打开链接：

您还可以`:target => '_blank'`向 Link_to 提供一个（将在新选项卡中打开链接）

```
link_to "New tab", url, :target => '_blank' 
```

# jquery - 一些 Javascript 在发布时停止工作

> ID：13419352
> 
> 赞同：0
> 
> 时间：2012-11-16T15:14:38.443
> 
> 标签：jquery, publish, jquery-droppable, jquery-draggable

所以正如标题所说，我的 Javascript 在发布时停止工作（这是在服务器上）。（这是关于 Draggable/Droppable 的，一个 Droppable 应该只包含一个 Draggable）。

这是我的 Javascript 代码：

```
function pageLoad() {
    $('.droppable').droppable({
        hoverClass: "ui-state-active",
        drop: function (event, ui) {
            $(this).droppable('option', 'accept', ui.draggable);
        },
        out: function (event, ui) {
            $(this).droppable('option', 'accept', '.draggable');
        },
        create: function (event, ui) {
            if ($(this).find('.draggable').length == 1) {
                $(this).droppable('option', 'accept', $(this).find('.draggable'));
            }
        },
    });

    $('.draggable').draggable({
        revert: 'invalid',
        cursor: 'move',
        zIndex: 10000
    });
} 
```

好的，所以我使用了这篇文章中的一些解决方案：[jQuery UI - Droppable only accept one draggable](https://stackoverflow.com/questions/3948447/jquery-ui-droppable-only-accept-one-draggable) 有人说：“快速注意：这仅适用于 jQuery 1.6” – Narretz 6 月 4 日 17:21。当我在我发布的版本上运行它时，JQuery 根本不起作用，没有一个对象是可拖动的。

我已经完成的测试 - 将此代码从脚本中取出：

```
drop: function (event, ui) {
    $(this).droppable('option', 'accept', ui.draggable);
},
out: function (event, ui) {
    $(this).droppable('option', 'accept', '.draggable');
},
create: function (event, ui) {
    if ($(this).find('.draggable').length == 1) {
        $(this).droppable('option', 'accept', $(this).find('.draggable'));
    }
}, 
```

所以至少现在发布版本中的拖放工作，但我仍然想要最大的一个功能。

我的 Javascript 文件是这样引用的：

```
<script src="jquery.min.js" type="text/javascript"></script>
<script src="jquery-ui.min.js" type="text/javascript"></script> 
```

我的脚本文件在本地和服务器上的那个文件夹中。

所以我的怀疑落到了“jQuery 1.6”上。有人知道这件事吗？

对不起我的文字墙。预先感谢

/里卡德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:18:36.877

为什么不参考 jQuery 的 cdn 托管版本，这样您将在测试机器上使用与服务器上相同的版本。

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

只需在文档中插入一个 <script> 标记，并将 src= 属性设置为上面页面提供的链接。然后，无论是在服务器上还是在本地，您都在运行相同版本的 jQuery。（此外，这将通过卸载到 CDN 提供商来节省少量服务器带宽。）

# asp.net - 未捕获的错误：无法在初始化之前调用弹出窗口上的方法；

> ID：13419358
> 
> 赞同：17
> 
> 时间：2012-11-16T15:14:57.850
> 
> 标签：asp.net, jquery-mobile, html, popup

我正在开发一个页面，然后我使用它导入另一个带有弹出窗口的`@Html.Partial("AddCommentPopup")`页面，并且在我使用它的页面上`<a href="#pupupIDhere" data-rel="popup etc..>`它工作得非常好。在此页面上，由于 JQM 使用链接的方式，我需要以不同的方式进行操作。所以我正在使用 `<div onclick="console.log('divclicked');$('#statusUpdate').popup('open');">`. 控制台告诉我它正在被单击，但它没有打开弹出窗口并抛出此错误：未捕获的错误：无法在初始化之前调用弹出窗口上的方法；试图调用方法“打开”。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-16T15:47:46.603

尝试先将 div 初始化为弹出窗口，然后打开它...

```
<div onclick="console.log('divclicked');
    $('#statusUpdate').popup();
    $('#statusUpdate').popup('open');">
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-31T10:26:22.917

[像这样](https://stackoverflow.com/questions/16131431/jquery-mobile-1-3-1-uncaught-error-cannot-call-methods-on-popup-prior-to-initia)我做了并且对我来说工作得很好

```
 $("#statusUpdate").popup();
$("#statusUpdate").popup('open') 
```

您必须在打开它之前对其进行初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T10:16:27.573

是的，它很有用，$('#statusUpdate').popup();

$('#statusUpdate').popup('open');

$('#statusUpdate').popup(); /* this this 用于初始化*/

$('#statusUpdate').popup('open'); /*这个用于操作*/

# wpf - 将实时 3D 模型加载到 Kinect WPF 应用程序中

> ID：13419369
> 
> 赞同：1
> 
> 时间：2012-11-16T15:15:39.983
> 
> 标签：wpf

我正在使用 C# for Kinect 创建一个 WPF 应用程序。我正在尝试将 3D 模型加载到应用程序中，并使其模仿站在 Kinect 设备前的用户。我能够从 Microsoft 找到一个文件 dude.fbx 并将其加载到我的应用程序中。但不幸的是，我无法将任何其他 3D 模型加载到我的应用程序中。如果这里有人可以帮助我，那就太好了。

# maven - jenkins-1.489 maven-3.0.3 & sonar-3.3.1

> ID：13419375
> 
> 赞同：0
> 
> 时间：2012-11-16T15:15:55.097
> 
> 标签：maven, jenkins, sonarqube

我已将 Sonar 从 3.0.1 升级到版本 3.3.1，并且我的代码分析作业已被破坏。

所有具有代码分析作业的项目都是具有层次结构的多模块 Maven 项目

在先前版本的声纳（3.0.1）上，作业配置了一个 Maven 构建步骤：

```
org.codehaus.sonar:sonar-maven3-plugin:3.0.1:sonar -P sonar -X 
```

（声纳服务器信息存储在名为“声纳”的 Maven 配置文件中）

现在我已经将这个构建步骤更改为

```
org.codehaus.sonar:sonar-maven3-plugin:3._3_.1:sonar -P sonar -X 
```

现在构建失败了。

有谁知道解决方案？

有一个堆栈跟踪：

```
    6:48:21 等待 Jenkins 完成收集数据
    16:48:21 mavenExecutionResult 异常不为空
    16:48:21 消息：无法在项目 proj-parent 上执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar (default-cli)：执行目标 org.codehaus.sonar 的默认 cli :sonar-maven3-plugin:3.3.1:sonar 失败：空值
    16:48:21 原因：执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar 的 default-cli 失败：空值
    16:48:21 堆栈跟踪：
    16:48:21 org.apache.maven.lifecycle.LifecycleExecutionException: 无法在项目 proj-parent 上执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar (default-cli)：执行默认-目标 org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar 的 cli 失败：空值
    16:48:21 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:225）
    16:48:21 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:153）
    16:48:21 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:145）
    16:48:21 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    16:48:21 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    16:48:21 在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    16:48:21 在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（LifecycleStarter.java:161）
    16:48:21 在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:319）
    16:48:21 在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
    16:48:21 在 org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    16:48:21 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    16:48:21 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    16:48:21 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    16:48:21 在 java.lang.reflect.Method.invoke(Method.java:601)
    16:48:21 在 org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard（Launcher.java:329）
    16:48:21 在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.java:239）
    16:48:21 在 org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    16:48:21 在 hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
    16:48:21 在 hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
    16:48:21 在 hudson.remoting.UserRequest.perform(UserRequest.java:118)
    16:48:21 在 hudson.remoting.UserRequest.perform(UserRequest.java:48)
    16:48:21 在 hudson.remoting.Request$2.run(Request.java:326)
    16:48:21 在 hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    16:48:21 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    16:48:21 在 java.util.concurrent.FutureTask.run(FutureTask.java:166)
    16:48:21 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    16:48:21 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    16:48:21 在 java.lang.Thread.run(Thread.java:722)
    16:48:21 原因：org.apache.maven.plugin.PluginExecutionException：执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar 的默认 cli 失败：空值
    16:48:21 在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:110）
    16:48:21 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:209）
    16:48:21 ... 27 更多
    16:48:21 原因：java.lang.NullPointerException：空值
    16:48:21 在 com.google.common.base.Preconditions.checkNotNull（Preconditions.java:204）
    16:48:21 在 com.google.common.collect.ImmutableMap.entryOf(ImmutableMap.java:139)
    16:48:21 在 com.google.common.collect.ImmutableMap$Builder.put(ImmutableMap.java:178)
    16:48:21 在 com.google.common.collect.Maps.fromProperties(Maps.java:594)
    16:48:21 在 org.sonar.batch.bootstrapper.Batch.(Batch.java:50)
    16:48:21 在 org.sonar.batch.bootstrapper.Batch.(Batch.java:38)
    16:48:21 在 org.sonar.batch.bootstrapper.Batch$Builder.build(Batch.java:148)
    16:48:21 在 org.sonar.maven3.SonarMojo.execute（SonarMojo.java:133）
    16:48:21 在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:101）
    16:48:21 ... 28 更多
    16:48:21 发送电子邮件至：*****
    16:48:21 频道停止

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:01:46.277

对我有用的解决方案：

**1) 添加预构建步骤 - 使用目标celan install**构建 maven 项目

 **2）主要构建步骤相同

```
org.codehaus.sonar:sonar-maven3-plugin:3.3.1:sonar -P sonar -X 
```**

# c# - 如何更改 WinForms 中的视图？

> ID：13419380
> 
> 赞同：3
> 
> 时间：2012-11-16T15:16:17.160
> 
> 标签：c#, .net, winforms

我来自 ASP.NET 背景，我无法理解 WinForms 中的一些内容。当我想在 ASP.NET 中转到不同的“视图”时，我只需转到不同的页面并在那里用我的代码做一些事情。

它在 WinForms 中是如何工作的？假设我有一个带有各种按钮的菜单，我想在某个控件（DataGridView）中显示一组不同的数据。

我是否停留在同一个表单上并读取按下按钮的值然后对其进行操作（例如绑定网格）？还是我去不同的形式？

我对代码和你们所有人可能拥有的各种方法、最佳实践等都感兴趣……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:23:00.890

松散地，“视图”将对应于`Form`对象。表单对象是承载一些 UI 的顶级窗口（很像 Web 浏览器是承载一些 UI 的顶级窗口）。让应用程序显示和隐藏除对话框之外的多个顶级表单可能会令人不安，因此您的“主”表单是您主要用户交互的基础。

如果您有一个带有按钮的菜单，则响应所选菜单命令的代码可以更新（例如）`DataGridView`该表单上的控件，或显示对话框以收集其他信息等。

# sql - 需要从一张表中随机找到一条记录，然后用这条记录加入另一张表

> ID：13419382
> 
> 赞同：1
> 
> 时间：2012-11-16T15:16:29.470
> 
> 标签：sql, sql-server, join, newid

**背景：**我目前正在开发一个简单的在线测验。在用户回答了一个简单的问题后，用户就有机会通过做一些小任务来提高获胜的机会。

用户赚取的每一手都插入到单独的行中，因此当我需要找到“随机”手时，他们中奖的机会就会增加（如果我错了，请纠正我）。

来自批次表的样本数据：

```
LotId      ParticipantId      Created
1          1                  2012-11-16 12:00:00
2          2                  2012-11-16 12:02:00    
3          2                  2012-11-16 12:06:00 
4          2                  2012-11-16 12:15:00    
5          3                  2012-11-16 12:16:00 
```

这意味着 ParticipantId 为 2 的参与者拥有三手，因此与其他参与者相比，在统计上获胜的机会更大。

**我需要做的：**当我需要抽中奖时，我会从手数表中随机选择一个手数。在此之后，我需要找到有关获胜者的信息。

目前我在 SELECT 之后使用这个（任何关于改进 SELECT 的评论都值得赞赏），然后在我的代码中我有另一个 SELECT 与用户的信息。

```
SELECT TOP 1 LotId, ParticipantId FROM Sample_Lots WITH (NOLOCK)
WHERE
    CAST(Created AS DATE) = '2012-11-16'
    AND
    ParticipantId NOT IN
    (
        SELECT ParticipantId FROM Sample_Winners WITH (NOLOCK)
        WHERE
            ParticipantId IS NOT NULL
            AND
            CAST(ThisDate AS DATE) = '2012-11-16'
    )
    AND
    ParticipantId IN
    (
        SELECT ParticipantId FROM Sample_Participants WITH (NOLOCK)
        WHERE
            ParticipationConfirmed IS NOT NULL
    )
ORDER BY NEWID() 
```

我无法解决这个问题。我需要一个随机批次，并且从这个随机批次中我需要在同一个 SELECT 中获取用户的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:34:00.780

假设您的用户信息位于名为 Participants 的表中，其中包含 ParticipantId、FirstName 和 LastName 列，下面是一个使用 JOIN 到该表的示例：

```
SELECT TOP 1 sl.LotId, sl.ParticipantId, p.FirstName, p.LastName 
FROM Sample_Lots sl 
INNER JOIN Participants p ON sl.ParticipantId = p.ParticipantId WITH (NOLOCK)
WHERE
    CAST(Created AS DATE) = '2012-11-16'
    AND
    sl.ParticipantId NOT IN
    (
        SELECT ParticipantId FROM Sample_Winners WITH (NOLOCK)
        WHERE
            ParticipantId IS NOT NULL
            AND
            CAST(ThisDate AS DATE) = '2012-11-16'
    )
    AND
    sl.ParticipantId IN
    (
        SELECT ParticipantId FROM Sample_Participants WITH (NOLOCK)
        WHERE
            ParticipationConfirmed IS NOT NULL
    )
ORDER BY NEWID() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:38:20.870

在您的第一个选择中，将 Sample_Lots 左连接到 ParticipantId 列上的 Participant 表。然后在您的第一个选择中，您还可以获得有关参与者的详细信息。结果将具有与原始选择相同的行数，并且将随机排序。

# licensing - 我可以将 wxWidgets 用于封闭源代码的商业应用程序吗？

> ID：13419383
> 
> 赞同：10
> 
> 时间：2012-11-16T15:16:34.300
> 
> 标签：licensing

wxWidgets 在修改后的 LGPL 许可下获得许可。这意味着我可以卖掉它。但是原始的 LGPL 许可证迫使我发布源代码。图书馆页面的自定义许可证中提到了这一点，但我还不太了解。我没有承担任何风险，所以**我可以将它用于封闭源代码的商业应用程序吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T20:09:01.207

是的你可以。许可证的 LGPL 方面保护库本身，即您不能在不提供原始许可证下的更改的情况下出售库的修改版本。但是，它不会影响与库链接的应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T22:10:51.263

如果我理解正确的话，Wxwidgets 是在 LGPL 下获得许可的，并且有一个*例外*，您可以根据需要使用。所以这是 LGPL + X，而不是完全修改 LGPL 许可证（这是不可能的）。

用[他们自己的话来说](http://www.wxwidgets.org/about/preamble.txt)：

> 大多数文件是根据 GNU 库通用公共许可证第 2 版分发的，但您可以创建和分发从源代码或修改版本构建的目标代码版本（即使这些修改版本包含不同许可证下的代码） )，并根据您自己的条款分发此类二进制文件。

我认为这几乎反映了您打算做的事情。

此外，就像@VZ 已经回答的那样，LGPL 不会将 copyleft 延伸到您的工作中，仅适用于图书馆。

此外，通过使用 Wxwidgets 给出的 LGPL 例外中的术语，您可以（但绝不能）使用您自己的术语以二进制（目标代码）形式传递包含 Wxwidget 的二进制文件。

另请参阅[Wxwidgets 主页上的许可证部分](http://www.wxwidgets.org/about/newlicen.htm)。

# android - 使用 webApi 从 android 发布失败

> ID：13419387
> 
> 赞同：1
> 
> 时间：2012-11-16T15:16:43.760
> 
> 标签：android, jquery, cordova, asp.net-web-api

我正在创建一个简单的 android 应用程序，它使用 POST 以 JSON 格式将姓名和电话号码发送到 asp.net 中的 webApi MVC4，并使用 SQL 服务器作为数据库。问题是我似乎无法正确处理，当我将信息发送到 webapi 时，它从不向我的数据库发布任何内容。

当我使用 fiddler 发送 JSON 时它已经工作了，但我不明白问题是什么。请帮忙，我已经卡了一段时间了。

这是我的 Jquery ajax 客户端代码：

```
$.ajax({
      type: "POST",
      data: {"Name" : "JUJI", "PhoneNumber" : 999},
      url: "http://127.0.0.1:52380/api/Default1",
      dataType: "json",
      success:function(response){
        alert("yupie");
        console.log(response);
    },
    error:function(response){
        alert("no response");
        console.log(response);
    }
    }); 
```

这是我在 webApi 中服务器端的模型代码：

```
public class Contact
{
    public int ID { get; set; }
    public string Name { get; set; }
    public double PhoneNumber { get; set; }

} 
```

我的服务器端的控制器：

```
// POST api/Default1
        public HttpResponseMessage PostContact(Contact contact)
        {

            if (ModelState.IsValid)
            {

                db.Contacts.Add(contact);
                db.SaveChanges();

                HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, contact);
                response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = contact.ID }));
                return response;
            }
            else
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:22:59.347

您正在调用 localhost (127.0.0.1)，在这种情况下，它指的是您正在运行代码的设备或模拟器。所以电话试图与自己对话，显然你的服务器端代码没有在设备上运行。您需要将 127.0.0.1 替换为运行您的 servlet 的 PC 的 IP 地址或服务器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:31:48.317

如果您在与 android 模拟器相同的机器上运行服务器，则使用 10.0.2.2 作为服务器 IP。

# c# - 微软只伪造静态类的存根静态属性

> ID：13419392
> 
> 赞同：2
> 
> 时间：2012-11-16T15:16:58.707
> 
> 标签：c#, microsoft-fakes

是否可以使用 Microsoft Fakes 框架在静态类中填充静态属性？

如果不是，为什么存根可以工作，而垫片却不行？

这是我的课程代码：

```
public static class Globals
{
    public static List<string> greatStations = new List<string>();
} 
```

这是我的测试代码：

```
[TestMethod]
public void TestMethod1()
{
    using (ShimsContext.Create())
    {
        var shim = new Fakes.ShimGlobals { };
        Fakes.StubGlobals.greatStations = new List<string>();
        // Next line complains that ShimGlobals does not contain a definition for 'greatStations'
        Fakes.ShimGlobals.greatStations = new List<string>(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:22:34.157

使用 Fakes，您可以存根（类和接口的）虚拟属性和方法。您可以填充非虚拟属性和方法（实例和静态）。字段不需要填充或存根，因为它们可以直接设置，如下所示。

```
Globals.greatStations = new List<string>(); 
```

# facebook - 脸书客户支持？

> ID：13419394
> 
> 赞同：-4
> 
> 时间：2012-11-16T15:17:05.960
> 
> 标签：facebook

我哥哥两周前突然去世了。在他的 Facebook 页面上出现了惊人的爱和支持。问题是，我的父母刚加入 Facebook，他们还不是他的“朋友”。我需要让我们的父母和他成为“朋友”，这样他们就可以查看他页面上所有精彩的条目。我们无法进入他的帐户来接受好友请求。

有谁知道联系 Facebook 的方法，并让他们代表他接受这些好友请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:34:16.277

尝试访问此网址`http://www.facebook.com/help/`

点击“报告问题”

点击“你看不到的东西”

点击“如何在 Facebook 上举报我看不到的内容？”

最后，“**请在此处提交报告。** ”

# sql - MS SQL 发送邮件

> ID：13419398
> 
> 赞同：2
> 
> 时间：2012-11-16T15:17:20.897
> 
> 标签：sql, sql-server-2008, sqlmail

嗨，有人可以帮我吗？

```
 declare  @account_name varchar(128) = 'Test Mail Account'
 declare   @description varchar(128)  = 'Mail account for administrative e-mail.'
  declare   @email_address varchar(128) = 'abc@xyz.com'
  declare   @replyto_address varchar(128) = 'abc@xyz.com'
  declare   @display_name varchar(128) = 'Manoj Pandey'
   declare  @mailserver_name varchar(128) = 'smtp.xxxx.net'
 declare    @port int = 587
declare     @username nvarchar(128)= 'xyz'
declare     @password varchar(128) = 'xxyyzz'
declare     @enable_ssl int = 1

    EXECUTE [msdb].[dbo].[sysmail_add_account_sp]
            @account_name,
            @description,
            @email_address,
            @replyto_address,
            @display_name,
            @mailserver_name,
            @port,
            @username,
            @password,
            @enable_ssl 
```

给我一个错误信息：

“消息 8114，级别 16，状态 1，过程 sysmail_add_account_sp，第 0 行错误将数据类型 nvarchar 转换为 int。”

我不知道为什么？

来源来自[http://sqlwithmanoj.wordpress.com/2010/09/29/database-mail-setup-sql-server-2005/](http://sqlwithmanoj.wordpress.com/2010/09/29/database-mail-setup-sql-server-2005/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:24:18.387

我建议的第一件事是使用命名参数，这样存储的过程就可以准确地知道哪个参数在哪里：

```
 EXECUTE [msdb].[dbo].[sysmail_add_account_sp]
        @account_name=@account_name,
        @description=@description,
        ..... 
```

而且根据 MSDN，您传递它们的顺序看起来不正确 [http://technet.microsoft.com/en-us/library/ms182804(v=sql.90).aspx](http://technet.microsoft.com/en-us/library/ms182804(v=sql.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:18:19.950

如果您不使用命名参数（如 Farfarak 上面所写），那么您不能跳过任何参数（尽管您不需要使用所有参数）。顺序如下：见[http://technet.microsoft.com/en-us/library/ms182804.aspx](http://technet.microsoft.com/en-us/library/ms182804.aspx)

```
sysmail_add_account_sp  [ @account_name = ] 'account_name',
    [ @email_address = ] 'email_address' ,
    [ [ @display_name = ] 'display_name' , ]
    [ [ @replyto_address = ] 'replyto_address' , ]
    [ [ @description = ] 'description' , ]
    [ @mailserver_name = ] 'server_name' 
    [ , [ @mailserver_type = ] 'server_type' ]
    [ , [ @port = ] port_number ]
    [ , [ @username = ] 'username' ]
    [ , [ @password = ] 'password' ]
    [ , [ @use_default_credentials = ] use_default_credentials ]
    [ , [ @enable_ssl = ] enable_ssl ]
    [ , [ @account_id = ] account_id OUTPUT ] 
```

此外，声明 enable_ssl 的行应如下所示：

```
declare     @enable_ssl bit = 1 
```

# magento - 按最新产品排序（默认） - Magento？

> ID：13419407
> 
> 赞同：0
> 
> 时间：2012-11-16T15:18:02.400
> 
> 标签：magento, sorting, default

如何在 Magento 中按最新对产品进行分类？我是否必须修改我的 catalog.xml 或者是否有任何可用的扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:22:55.300

您可以使用以下方法获取按日期排序的产品集合：

```
$_newest_productCollection = Mage::getResourceModel('reports/product_collection')
  ->addAttributeToSelect('*')
  ->addAttributeToFilter('visibility', $visibility)
  ->setOrder('created_at', 'desc')
$_newest_productCollection->load(); 
```

或者是的，有可用的扩展。 [例如http://amasty.com/improved-sorting.html](http://amasty.com/improved-sorting.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:48:16.340

在 Magento 管理界面中，进入系统 -> 配置，然后从左侧菜单中选择目录，然后打开“前端”部分。其中一个选项是“产品排序依据” - 您应该可以选择“新产品？” 从列表中。

这将设置默认排序顺序:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T10:22:02.537

这是一个扩展，它启用了按 news_from_date 和 news_to_date 以及 created_at 字段排序。
此扩展程序将优先考虑管理员解决的新产品，然后列出最近添加的产品。
Magento 按新产品扩展 URL 排序是 - [http://www.magentocommerce.com/magento-connect/sort-by-new-products-and-popular-products.html](http://www.magentocommerce.com/magento-connect/sort-by-new-products-and-popular-products.html)

对于 Magento 2，这里有一个扩展 - [http://www.magento2plugins.com/sort-by-new-popular-ratings-extension-for-magento2.html](http://www.magento2plugins.com/sort-by-new-popular-ratings-extension-for-magento2.html)

# javascript - 通过鼠标滚轮滚动播放html5视频

> ID：13419409
> 
> 赞同：13
> 
> 时间：2012-11-16T15:18:09.810
> 
> 标签：javascript, html

我希望能够制作一个网页，当他们用鼠标滚轮上下滚动时向前和向后播放视频。这似乎是可以想象的，通过 HTML5 和可能的 JavaScript。这种事情的任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-31T17:03:10.937

随时暂停视频。定期获取滚动位置并使视频搜索到滚动位置。建议使用任何页面加载器效果让视频完全缓冲。

[完整代码](http://codepen.io/anon/pen/hfaLE)

```
// select video element
var vid = document.getElementById('v0');
//var vid = $('#v0')[0]; // jquery option

// pause video on load
vid.pause();

// pause video on document scroll (stops autoplay once scroll started)
window.onscroll = function(){
    vid.pause();
};

// refresh video frames on interval for smoother playback
setInterval(function(){
    vid.currentTime = window.pageYOffset/400;
}, 40); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T15:11:51.637

我知道这是一个老问题，但前几天我偶然发现了它，[上面的答案](https://stackoverflow.com/a/23973098/1499016)帮助我编写了一个小[jQuery 插件](https://github.com/develodesign/play-on-scroll)来实现这个效果。

在滚动时，我计算了视频元素相对于窗口的位置，然后用它来计算视频的当前时间。

但是，我没有使用 setTimeout/setInterval 来更新视频的当前时间，而是使用了[请求动画帧](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)。请求动画帧将在可能的情况下渲染视频，而不是使用即使浏览器未准备好也会运行的 setInterval。

将此应用于上面的示例：

```
var renderLoop = function(){
  requestAnimationFrame( function(){
    vid.currentTime = window.pageYOffset/400;
    renderLoop();
  });
};
renderLoop(); 
```

[除 Opera Mini 外，所有现代浏览器都](http://caniuse.com/#feat=requestanimationframe)支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T09:10:31.187

我的一些模组使它更流畅

```
// select video element
var vid = document.getElementById('v0');
//var vid = $('#v0')[0]; // jquery option

// pause video on load
vid.pause();

// pause video on document scroll (stops autoplay once scroll started)
window.onscroll = function(){
    vid.pause();
};

// refresh video frames on interval for smoother playback
setInterval(function(){
  TweenMax.to(vid,2,{currentTime:window.pageYOffset/400});
}, 40); 
```

[http://codepen.io/anon/pen/qORmee](http://codepen.io/anon/pen/qORmee)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:44:39.350

可能是这样的

```
$(document).mousewheel(function(event, delta, deltaX, deltaY){        
    if (deltaY > 0) {
        $(".video-element").get(0).playbackRate = -1;
    } else {
        $(".video-element").get(0).playbackRate = 1;
    }

    event.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-15T11:05:22.523

我正在使用这个。它并不完美，但它应该可以帮助你。

```
var videoScrollTop = $(document).scrollTop();
$(document).scroll(function() {
    var vid = $('#video')[0];
    if(videoScrollTop < $(document).scrollTop()){
        vid.currentTime += 0.081;
    } else {
        vid.currentTime -= 0.081;
    }
    videoScrollTop = $(document).scrollTop();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-21T18:40:59.583

我知道这是一个超级旧的线程，但想提供这个最受好评的条目的精炼版本，它可以扩展到多个元素，但当元素不在页面顶部时也很重要：

```
playVideoOnScroll($('#myVideoContainer video'));

function playVideoOnScroll(element) {
    var vid = element[0]; // select video element
    var playbackConst = 3; // lower numbers = slower playback
    var startingYOffset = element.offset().top - $(window).height();
    vid.pause(); // pause video on load

    // pause video on document scroll (stops autoplay once scroll started)
    window.onscroll = function(){
        vid.pause();
    };

    // refresh video frames on interval for smoother playback
    setInterval(function(){
        vid.currentTime = (window.pageYOffset-startingYOffset)/($(window).height()/playbackConst);
    }, 40);
} 
```

# jquery - Jquery：遍历 Divs 和 ULs 并检索检查

> ID：13419410
> 
> 赞同：1
> 
> 时间：2012-11-16T15:18:23.773
> 
> 标签：jquery, loops, each

卡在 jquery 的一个点上。我必须遍历具有相同结构的几个 div，并且需要`<h1>`标签内的文本加上每个`<li>`带有类 '.checked'

```
<div id="a21315" class="content gradient">
<div class='header gradient'>
    <div class='headimg'></div>
    <h1>Input Shaft Size</h1>
    <div class="minus_sprite "></div>
    <ul class="de-radio ">
        <li id="a22134340"><span class='checked'>0.4375" X 0.88"</li>
        <li id="a22151870"><span class=''>0.500" X 1.13"</li>
        <li id="a22168545"><span class=''>0.625" X 1.50"</li>
        <li id="a22172070"><span class=''>0.625" X 1.57"</li>
        <li id="a22184915"><span class=''>0.750" X 1.57"</li>
        <li id="a22946970"><span class=''>0.875" X 1.97"</li>
    </ul>
</div> 
```

我希望得到这样的结果，并希望将其复制到另一个 div (#overview) 中。

```
Text from Headline 1
-List Element with checked Class 1
-List Element with checked Class 2
-List Element with checked Class 3

Text from Headline 2
-List Element with checked Class 1
-List Element with checked Class 2
-List Element with checked Class 3
etc. 
```

有了这个，`$('.content.gradient:not(.hidden) h1').text();`我收到了每个 Headline() 和这条线： `$('.content.gradient:not(.hidden) ul li.checked span').not('.hidden').text();`

我收到了所有选择`<li>`的 .checked 类。但是我怎样才能遍历所有这些并得到它呢？

我希望我描述我的问题可以理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:24:18.267

您如何编写该行的简单错误：

```
$('.content.gradient:not(.hidden) ul li .checked').not('.hidden').text() 
```

由于您的 LI 上没有已检查的类，只是在内部的跨度上，您需要在 li 和类选择器之间留一个空格。

此外，您必须关闭 SPAN 标签！

```
<ul class="de-radio ">
    <li id="a22134340"><span class='checked'>0.4375" X 0.88"</span></li>
    <li id="a22151870"><span class=''>0.500" X 1.13"</span></li>
    <li id="a22168545"><span class=''>0.625" X 1.50"</span></li>
    <li id="a22172070"><span class=''>0.625" X 1.57"</span></li>
    <li id="a22184915"><span class=''>0.750" X 1.57"</span></li>
    <li id="a22946970"><span class=''>0.875" X 1.97"</span></li>
</ul> 
```

否则，你一定会遇到解析问题。

编辑：（和一个 jsFiddle 启动！[http://jsfiddle.net/mori57/pHEhK/](http://jsfiddle.net/mori57/pHEhK/)）

首先，你真的必须清理你的标记，否则这将永远无法正常工作。关闭您的 div，关闭您的跨度：

```
<div id='main'>
    <div id="a21315" class="content gradient">
        <div class='header gradient'>
            <div class='headimg'></div>
            <h1>Input Shaft Size</h1>
            <div class="minus_sprite "></div>
            <ul class="de-radio ">
                <li id="a22134340"><span class='checked'>0.4375" X 0.88"</span></li>
                <!-- snip ... see jsFiddle -->
            </ul>
        </div>
    </div> <!-- missing a closing div -->
    <div id="a21315" class="content gradient">
        <div class='header gradient'>
            <div class='headimg'></div>
            <h1>another Headline</h1>
            <div class="minus_sprite "></div>
            <ul class="de-radio ">
                <li id="a22134341"><span class='checked'>another checked item"</span></li>
                <!-- snip ... see jsFiddle -->
            </ul>
        </div>
    </div> <!-- you're missing a closing div tag -->
</div>
<div id="output"></div>
​ 
```

我添加了一个输出 div，为您提供一个放置输出项的示例位置。

现在，对于您的 jQuery：

```
// First, get a collection of your content blocks
var $blocks = $(".content.gradient:not(.hidden)");
// get a reference to the div you want to spit all this out into
var $out = $("#output");

// iterate through each of the non-hidden blocks
$blocks.each(function(){
    // it occurs to me that we should cache $(this) since
    // we're accessing it multiple times
    var $this = $(this);
    // get a ref to the h1 from this block's h1
    var this_h1 = $this.find(".header:not(.hidden) h1");
    // get a ref to the .checked li from this block
    var this_checked = $this.find(".header:not(.hidden) .checked");
    // if this_h1 contains a result, append it to the output div
    if(this_h1) {
        $out.append(this_h1.clone());            
    }
    // if this_checked contains a result, 
    //append that out in the output div, too        
    if(this_checked){
        $out.append(this_checked.clone());            
    }
});

​ 
```

我在 jsFiddle 中添加了一些样式，因此您可以轻松看到正在输出的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:41:39.770

> 但是我怎样才能遍历所有这些

你可以这样做：

```
var $overview = $('#overview');
$('.content.gradient:not(.hidden)').find('.header.gradient').each(function(){
    var headingText = $(this).find('h1').text();
    var $checkedItems = $(this).find('span.checked').not('.hidden');
    var checkedItemsText = '';
    $checkedItems.each(function(){
        checkedItemsText += $(this).text() + '<br/>';
    });
    $overview.append(headingText + '<br/>' + checkedItemsText );
}); 
```

**编辑：**

抱歉，打错了几个字——以上内容现在是正确的。这是[一个工作演示。](http://jsfiddle.net/jfrej/aAXBP/)

**编辑2：**

为了获得更好的性能，最好缓存`#overview`- 更新了上面的代码。

# asp.net-mvc - 数据库上下文视图对象在 MVC 4 中未按预期工作

> ID：13419411
> 
> 赞同：1
> 
> 时间：2012-11-16T15:18:26.423
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

在 MVC 中使用实体框架视图时，我的代码中遇到了一个非常特殊的问题。我只是怀疑问题归因于使用 View，因为我在使用 Tables 时没有问题。

我的视图称为 LoadAuditStats_Report，索引的控制器代码是：

```
 private readonly RepositoryDBContext _repository = new RepositoryDBContext();
    public ActionResult Index()
    {
        var stats = _repository.LoadAuditStats_Report;

        return View(stats);
    } 
```

视图中的数据示例如下：

![在此处输入图像描述](../Images/54142ce19a8ba9ecc62cbed601ae9ced.png)

如果我从控制器检查示例的结果输出，我将获得 3 条记录，但所有 3 条记录的数据将重复第 1 条记录。所以在这种情况下，所有 3 条记录都将具有相同的 PackageAuditId 字段值 700。

这真的很奇怪，因为我在使用表时从未见过这个问题，所以我想知道 EntityFramework4 在与视图相关时与 MVC3 接口是否存在问题？

我应该避免使用 EntityFramework 视图，还是在使用它们时应该考虑其他一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:41:04.373

视图在 EF 中也有一个主键。如果键由不是真正唯一的字段组成，您可能会在结果集中获得重复的行。因此，您应该调查视图并确定哪些列唯一标识其行并告诉 EF 使用这些列作为主键。

# android - 动态设置 ViewPager 高度

> ID：13419416
> 
> 赞同：15
> 
> 时间：2012-11-16T15:18:39.013
> 
> 标签：android, android-fragments, android-viewpager

我正在尝试放置`ViewPager`具有不同高度的不同片段。我知道这`wrap_content`不起作用，`ViewPager`所以我试图动态设置寻呼机高度。我在页面侦听器中设置寻呼机高度：

```
...
        indicator.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int selected) {
                final View view = fragments[selected].getView();
                if (view != null) {
                    pager.setLayoutParams(new LayoutParams(
                            LayoutParams.MATCH_PARENT, view
                                    .getMeasuredHeight()));

                }

            } 
```

不幸的是，它不起作用，因为`getMeasuredHeight()`on返回的值`Fragment`是错误的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-21T22:12:55.290

这是我的解决方案：

```
 ViewTreeObserver viewTreeObserver = mViewPager.getViewTreeObserver();
    viewTreeObserver
            .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

                @Override
                public void onGlobalLayout() {

                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,
                            LinearLayout.LayoutParams.WRAP_CONTENT);

                    int viewPagerWidth = mViewPager.getWidth();
                    float viewPagerHeight = (float) (viewPagerWidth * FEATURED_IMAGE_RATIO);

                    layoutParams.width = viewPagerWidth;
                    layoutParams.height = (int) viewPagerHeight;

                    mViewPager.setLayoutParams(layoutParams);
                    mViewPager.getViewTreeObserver()
                            .removeGlobalOnLayoutListener(this);
                }
            }); 
```

我在 onResume(); 中调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:21:40.713

尝试在 viewpager 的 onLayout() 中设置它的参数

# javascript - Jquery JavaScript 创建动态二维数组

> ID：13419419
> 
> 赞同：1
> 
> 时间：2012-11-16T15:18:47.540
> 
> 标签：javascript, jquery, multidimensional-array

嗨，我看到有很多例子，但没有一个解释我需要做什么。

我想创建项目并将其添加到二维数组并动态排序。

我一直在搞乱的一些代码：

```
var Amount = new Array(new Array());  //MULTI ARRAY
var a = 0; //COUNTER

$("input[id^='AmountSpent']").each(function(){
    Amount[a][a] = [a, $(this).val()]; //THIS IS WHERE I GET STUCK... HOW TO ASSIGN VALUES
    a = a + 1;
}); 
```

之后我想对数组进行排序。

所以如果数组看起来像这样：

```
Amount = [[1,2,3,4],[$200,$300,$100,$600]] 
```

我想首先对最高金额进行排序：`$600, $300, $200, $100`

谁能帮帮我吗。

* * *

更新

* * *

使用我从 Rory 获得的代码（*非常感谢*）我正在执行以下操作：

```
var amounts = [];    
$("input[id^='AmountSpent']").each(function(i, el){
  amounts.push({ index: i + 1, value: $(el).val() });
});
amounts.sort(function(a, b) {
  if(a.value < b.value) return 1;
  if(a.value > b.value) return -1;
  return 0;
}); 
```

要遍历我正在做的数组：

```
for (ii = 0; ii < amounts.length; ++ii) {
console.log(amounts[ii].index + " - " +  amounts[ii]); // 
 } 
```

我得到的结果是：

1 - [对象对象]
2 - [对象对象]
3 - [对象对象]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:30:54.897

多维数组对此可能是矫枉过正的。就我个人而言，我会使用一组对象——假设你需要存储索引。

```
var amounts = [];    
$(".foo").each(function(i, el){
    amounts.push({ index: i + 1, value: $(el).val() });
});

amounts.sort(function(a, b) {
    if(a.value < b.value) return 1;
    if(a.value > b.value) return -1;
    return 0;
}); 
```

[**示例小提琴**](http://jsfiddle.net/GKnUq/2)

* * *

**更新**

您的循环代码不访问该`value`属性，试试这个：

```
for (ii = 0; ii < amounts.length; ++ii) {
    console.log(amounts[ii].index + " - " +  amounts[ii].value);
} 
```

# node.js - 压缩和解压文件夹

> ID：13419421
> 
> 赞同：0
> 
> 时间：2012-11-16T15:18:50.293
> 
> 标签：node.js

我想压缩和解压缩文件夹。

有些库可以创建 zip 文件但无法解压缩，因为“对我来说太复杂了”。

我可以使用 zlib 模块 gzip 和 gunzip，我可以读取 tars，但我还没有找到任何库来创建 tars...

有人可以告诉我如何压缩和解压缩文件夹吗？我不在乎格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:28:00.160

这种简单的方法是使用外部`tar`工具：

```
var spawn = require('child_process').spawn;

var pathToArchive = './test.tar.gz';
var pathToFolder = './test';

var tar = spawn('tar', ['czf', pathToArchive, pathToFolder]);
tar.on('exit', function (code) {
        if (code === 0) {
                console.log('completed successfully');
        } else {
                console.log('error');
        }
}); 
```

# javascript - 格式化 jQuery 日期选择器

> ID：13419423
> 
> 赞同：0
> 
> 时间：2012-11-16T15:18:52.737
> 
> 标签：javascript, jquery, datepicker, format

> **可能重复：**
> [将“st，nd，rd，th”添加到 jquery datepicker](https://stackoverflow.com/questions/8199204/adding-st-nd-rd-th-to-jquery-datepicker)

我目前正在使用此代码：

`$("input[name=date]").datepicker({ dateFormat: "dd MM" });`

例如，它保存日期`22 November`。我需要放置一些东西来代替它`22nd November`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:35:31.843

试试tbis，

```
$("input[name=date]").datepicker({
    dateFormat: "dd MM",
    onSelect: function(dateText, inst) {
        var dateArr = dateText.split(' ')
        var suffix = "";
        switch(inst.selectedDay) {
            case '1': case '21': case '31': suffix = 'st'; break;
            case '2': case '22': suffix = 'nd'; break;
            case '3': case '23': suffix = 'rd'; break;
            default: suffix = 'th';
        }

        $("input[name=date]").val(dateArr[0] + suffix +' '+ dateArr[1]);
    }

}); 
```

​</p>

**演示：http:** [//jsfiddle.net/nmtcj/2/](http://jsfiddle.net/nmtcj/2/)

# twitter - 使用新的 Twitter API 1.1 获取任何 URL 的转推数

> ID：13419425
> 
> 赞同：3
> 
> 时间：2012-11-16T15:18:56.767
> 
> 标签：twitter

我对新的 twitter API 1.1 有疑问

现在我使用：[http](http://urls.api.twitter.com/1/urls/count.json?url=SOME_URL_HERE) ://urls.api.twitter.com/1/urls/count.json?url=SOME_URL_HERE 并且我得到任何 URL 的转推数。

API 1.1 中获取任何 URL 的转发次数的新功能是什么？

# java - 线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常。从另一个类调用 ActionListener 的问题

> ID：13419426
> 
> 赞同：0
> 
> 时间：2012-11-16T15:18:59.550
> 
> 标签：java, actionlistener

我的应用程序的第一个草稿是，我将 actionListener 与用于创建 Jbutton 的类放在同一个类中。这工作得很好，但我想整理一下。有一个控制器类，我创建了我的框架并有我的动作监听器。

控制器类：

```
public class Controller extends JPanel implements ActionListener {
GUI GUIClass;

public Controller() {
    // TODO Auto-generated constructor stub
}

  //Main
  //create frame 
 // actionListener method below.....

 public void actionPerformed(ActionEvent e) {
    Object src = e.getSource();
    System.out.println("..........");
    if (src == GUIClass.AddBtn) {        //Line 120 where I Have the issue

 }

 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Controller.actionPerformed(Controller.java:120)
    ......
     .......
     ..... 
```

我的gui课* *******

我声明我的按钮

```
 JButton AddBtn, perviousBtn, NextBtn; 
```

以及我如何将侦听器添加到按钮

```
 AddBtn.addActionListener(new Controller()); 
```

我尝试了很多东西按钮，我似乎没有得到任何地方，请告诉你是否发现了一个愚蠢的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:55:25.557

在您的主窗体 GUI 中初始化 actionlistener 类：

> 控制器 c = 新控制器（此）；

将动作监听器添加到您的按钮：

> AddBtn.addActionListener(c);

并在您的 Controller 类中将您的构造函数更改为：

```
public Controller(GUI g) {
   this.GUIClass = g;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:21:43.210

您是否曾经设置`GUIClass`为非空值？你的构造函数似乎是空的，所以我猜不是。如果没有，那么在取消引用此引用时您将获得 NPE。

未来提示：当您遇到这种情况并且无法通过视觉检查找出问题时，请在调试器中运行代码（那里有很多好的免费代码）。

# silverlight - 在 Silverlight 中模拟记事本

> ID：13419430
> 
> 赞同：0
> 
> 时间：2012-11-16T15:19:15.090
> 
> 标签：silverlight, notepad

我有一个 Silverlight 5 应用程序，但我的浏览器用完了。我能够记事本它一个单独的窗口。那相当容易。

```
Dim shell = AutomationFactory.CreateObject("Shell.Application")

shell.ShellExecute("notepad.exe") 'Open notepad 
```

我遇到的问题是如何将内容粘贴到记事本窗口中。如果这不可能，那么如何在 Silverlight 中模拟记事本的功能？我目前有我想要的内容，它是一个多行文本框。用户希望能够选择全部并粘贴到另一个窗口中。他们还希望将光标设置到文件中的特定行号或搜索某些文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:30:16.603

在我的系统（Windows 8）上，notepad.exe 将打开作为参数传递的文件名。因此，我想您可以将数据写入文件并将该文件名作为参数传递给记事本。快速谷歌搜索没有显示它需要的任何其他命令行选项，但可能有一些。

# wso2 - 在 WSO2 Carbon 4.0.3 上将 Identity Server 功能添加到 WSO2 ESB 4.5.1 时安装错误

> ID：13419431
> 
> 赞同：2
> 
> 时间：2012-11-16T15:19:27.043
> 
> 标签：wso2, wso2esb, wso2carbon, wso2is

我一直在尝试将身份服务器功能添加到 vanilla esb 4.5.1 安装中，专门用于启用 openid 和 oath2 sso。尝试添加功能失败，缺少依赖项。例如

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：身份提供者功能 4.0.3 (org.wso2.carbon.identity.provider.feature.group 4.0.3) 缺少要求：身份核心功能 4.0.3 (org.wso2.carbon.identity.core.feature.组 4.0.3) 需要 'org.wso2.carbon.core.feature.group [4.0.3,4.1.0)' 但找不到无法满足依赖关系：来自：身份提供者功能 4.0.3 (org.wso2 .carbon.identity.provider.feature.group 4.0.3) 至：org.wso2.carbon.identity.core.feature.group [4.0.3,4.1.0)

我正在使用[http://dist.wso2.org/p2/carbon/releases/4.0.3](http://dist.wso2.org/p2/carbon/releases/4.0.3) P2 存储库这是存储库的问题还是我只是错过了重点并且正在尝试一些无法实现的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:31:41.267

AFAIR，ESB 4.5.1 是在 Carbon Kernel Version 4.0.2 之上发布的。您指向的功能存储库中的最新身份功能是在 Carbon Kernel 版本 4.0.3 之上发布的。因此，除非 p2 存储库中包含 4.0.2 版本的身份功能，否则您可能无法安装它们。

# jquery-ui - jquery自动完成焦点事件项未定义

> ID：13419438
> 
> 赞同：10
> 
> 时间：2012-11-16T15:20:16.730
> 
> 标签：jquery-ui, autocomplete, jquery-ui-autocomplete

所以我正在构建一个自定义自动完成框，其中一组看起来像这样的本地数据是数据源：

```
{
            label: "joe",
            category: "people"
} 
```

我已经自定义了 rendermenu 功能以启用菜单中的类别，如下所示：

```
 $.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (item.category != currentCategory) {
                ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
}); 
```

我正在初始化一切都是通过以下方式完成的：

```
 $("#search").catcomplete(getConfig(all)); 
```

其中 getConfig 是：

```
function getConfig(data) {
// autocomplete box configuration for searchbars

return {
    delay: 0,
    source: function (request, response) {
        var prune = request.term,
            arr = prune.split(":");

        if (arr.length > 2) {
            response();
        } else {
            response($.ui.autocomplete.filter(data, arr[arr.length - 1]));
        }
    },
    select: function (e, ui) {
        e.preventDefault();
        addBit(ui.item);
        e.originalEvent.stopPropagation();
    },
    focus: function (e, ui) {
        //console.log(e);
        //e.preventDefault();
        //console.log(ui);
        //$('ul.autocomplete li#floatinput input#search').val(ui.item.category + ":" + ui.item.label);
    },
    position: {
        my: "left top",
        at: "left bottom",
        of: $("ul.autocomplete"),
        collision: "flip flip"
    }
}
} 
```

然而不知何故，焦点事件没有定义项目。我试图完全摆脱焦点功能，只是得到： Uncaught TypeError: Cannot read property 'value' of undefined 。这意味着事件默认行为不起作用。

欢迎任何建议！

这是我为帮助说明而制作的小提琴> [http://jsfiddle.net/ahTCW/3/](http://jsfiddle.net/ahTCW/3/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T02:19:03.100

使用`_renderItemData`而不是`_renderItem`jQueryUI >= 1.9：

```
// getconfig
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (item.category != currentCategory) {
                ul.append("<li style='clear:both'class='ui-autocomplete-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItemData(ul, item);
        });
    }
}); 
```

您发生了另一个错误：

> 未捕获的类型错误：无法读取未定义的属性“nodeType”

这是由您传递给`of`位置对象属性的选项引起的。`ul.autocomplete`实例化自动完成小部件时，页面上不存在。

**更新示例：http:** [//jsfiddle.net/kHNS5/](http://jsfiddle.net/kHNS5/)

# database - Symfony2：每个包的 parameters.ini 文件

> ID：13419441
> 
> 赞同：1
> 
> 时间：2012-11-16T15:20:20.337
> 
> 标签：database, symfony

在我的项目中有几个包，每个包都使用不同的数据库，所以我考虑为每个包制作一些特定的东西，以指示每个包访问所需数据库所需的参数。希望有人给我一个提示。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:27:03.627

请参阅多实体管理器文档。

[http://symfony.com/doc/2.0/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/2.0/cookbook/doctrine/multiple_entity_managers.html)

根据需要创建尽可能多的实体管理器，然后将每个捆绑包映射到一个实体管理器，如下所示：

```
entity_managers:
            default:
                connection:       default
                mappings:
                    AcmeDemoBundle: ~ 
```

您可以创建多个 parameters.yml 文件并像这样在 config.yml 中导入它们

```
imports:
    - { resource: parameters1.yml }
    - { resource: parameters2.yml } 
```

# asp.net-mvc - 在 VS2012 中快速切换 MvcBuildViews

> ID：13419442
> 
> 赞同：2
> 
> 时间：2012-11-16T15:20:26.180
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, visual-studio-2012, msbuild

有谁知道一种无需执行卸载项目-> 编辑-> 更改-> 重新加载项目过程即可快速切换 MVC 项目属性“MvcBuildViews”的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:43:00.360

有趣的问题。您可以创建一个名为 QuickDebug 的新解决方案配置，并在您的 proj 文件中为此设置不同的配置，这不会构建您的视图。

# swing - JMS（主题） - 我如何将客户端实现为生产者和消费者

> ID：13419443
> 
> 赞同：0
> 
> 时间：2012-11-16T15:20:27.497
> 
> 标签：swing, jms, activemq, jms-topic

我必须使用activeMQ 设计一个JMS 应用程序。我有 2 个客户，他们应该同时作为发布者和订阅者。例如，如果第一个客户端绘制 smth.，第二个客户端应该能够在他的 GUI 上看到它，反之亦然。

我很清楚如何“绑定”到服务器以及如何运行 activeMQ，我只是不知道如何设计客户端、在哪里运行 SWING 以及如何发送绘图。EG 一个制片人应该是这样的……

```
public class Producer {

private static String url = ActiveMQConnection.DEFAULT_BROKER_URL;
private static String subject = "DRAWINGS";

public static void main(String[] args) throws JMSException {
    ConnectionFactory connectionFactory =
        new ActiveMQConnectionFactory(url);
    Connection connection = connectionFactory.createConnection();
    connection.start();

    Session session = connection.createSession(false,
        Session.AUTO_ACKNOWLEDGE);

    Destination destination = session.createTopic(subject);

    MessageProducer producer = session.createProducer(destination);

   // how to implement producer as consumer as well and where to create the SWING

   // and bind it to the client?

    connection.close();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:20:53.977

您创建 MessageConsumer 的方式与创建 MessageProducer 的方式相同，如下所示：

```
 MessageConsumer consumer = session.createConsumer(destination);
    consumer.setMessageListener(new MessageListener() {
        public void onMessage(Message m) {
            // Do something.
        }
    }); 
```

您当然需要通过阻塞循环或一些仅出于本示例的目的让您的 main 方法运行，但这是基础。

# php - PHP、ODBC 和 SQL 注入

> ID：13419448
> 
> 赞同：0
> 
> 时间：2012-11-16T15:20:37.103
> 
> 标签：php, sql, sql-server, odbc

使用 ODBC 连接到 MS SQL Server 时，如何防止 SQL 注入？ `odbc_prepare()`由于 unixODBC 的错误，它不起作用（[请参阅我的未解决问题](https://stackoverflow.com/questions/13407477/odbc-and-sql-server-2008-cant-use-prepared-statements)），并且 ODBC 也没有`_escape`或`_quote`功能。

此外，PDO 有一个 6 年前的错误错误，如果结果在**任何**列中返回 NULL，则整个结果集返回 null（至少在通过 ODBC 连接到 MSSQL 时）。

那么我可以做些什么来防范 SQL 注入呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-10-01T14:18:35.303

尽管这是一个古老的问题，并且`odbc_prepare()`几乎已被弃用。

你应该做的是使用 PDO 代替：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// Use the MSSQL driver's native prepared statements.
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); 
```

这应该有效。

# objective-c - 目标 C：格式化字符串出口

> ID：13419454
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:21:04.537
> 
> 标签：objective-c, string, formatting

是否可以在不创建额外变量的情况下格式化 NSString 插座的 .stringValue 属性？

```
@property (retain) NSString *myString;
@property (retain) NSString *myStringLabel; 
```

-

```
@synthesize myString;
@synthesize myStringLabel;

myString.stringValue = myStringLabel.stringValue  

/* but I want to format it with %.0f
   so I don't get any fractional digits */ 
```

我目前正在玩滑块，值的格式为 1.123312 我只想显示前导数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:42:28.783

假设您的输入字符串可以表示为 float ：

```
formattedString = [NSString stringWithFormat:@"%2.0f", [inputString floatValue]]; 
```

或者，如果您想取整该值：

```
formattedString = [NSString stringWithFormat:@"%i", round([inputString floatValue])]; 
```

我不确定您为什么要专门在一行上执行此操作？

# dart - Dart 服务器每隔一段时间检查一次

> ID：13419458
> 
> 赞同：0
> 
> 时间：2012-11-16T15:21:22.593
> 
> 标签：dart, dart-isolates

我正在尝试每隔 5 秒运行一次“checkServer”。但是“服务器很好”只运行一次。重复该功能需要做什么？

```
import 'dart:io';
import 'dart:uri';
import 'dart:isolate';

checkServer() {
  HttpClient client = new HttpClient();
  HttpClientConnection connection = client.getUrl(...);

  connection.onResponse = (res) {
    ...
    print('server is fine');
    //client.shutdown();
  };

  connection.onError = ...;
}

main() {
  new Timer.repeating(5000, checkServer());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:37:58.867

您必须为构造函数提供`void callback(Timer timer)`第二个参数。`Timer.repeating`

使用以下代码，`checkServer`将每 5 秒调用一次。

```
checkServer(Timer t) {
  // your code
}

main() {
  // schedule calls every 5 sec (first call in 5 sec)
  new Timer.repeating(5000, checkServer);

  // first call without waiting 5 sec
  checkServer(null);
} 
```

# excel - VBA Excel 代码的输出不正确

> ID：13419460
> 
> 赞同：0
> 
> 时间：2012-11-16T15:21:27.010
> 
> 标签：excel, vba

我有以下代码：

```
 Case "L"
     If UCase(Left(Dn, 3)) = "L/M" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5

     ElseIf UCase(Left(Dn, 3)) = "LM$" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5

ElseIf UCase(Left(Dn, 2)) = "LM" Then
 If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
            If Mid(Dn, 4, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 3, 2) + 3.5
            Else
            Dn.Offset(, 1) = Mid(Dn, 3, 2) + 0.35
           End If
            End If

 If IsNumeric(Mid(Dn, 4, 1)) And IsNumeric(Mid(Dn, 5, 1)) Then
            If Mid(Dn, 5, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 3.5
            Else
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 0.35
            End If
            End If

    ElseIf UCase(Left(Dn, 2)) = "L$" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 3, 2)) + 2

     ElseIf UCase(Left(Dn, 3)) = "LOW" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 3)) = "LO-" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 6)) = "LO MID" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 7, 3)) + 3.5

    ElseIf UCase(Left(Dn, 3)) = "LO " Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2

    ElseIf UCase(Left(Dn, 5)) Like "L###S" Then
      If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" Then
             Dn.Offset(, 1) = Mid(Dn, 2, 3) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        End If
        End If
     '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
    'ElseIf UCase(Left(Dn, 1)) = "L" Then
            'Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 2
    '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
            'ElseIf IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
            'Dn.Offset(, 1) = IIf(Mid(Dn, 3, 1) = 0, Val(Mid(Dn, 2, 2)) + 2, Val(Mid(Dn, 2, 2)) + 0.2)

            'ElseIf IsNumeric(Mid(Dn, 2, 1)) Then
            'Dn.Offset(, 1) = IIf(IsNumeric(Mid(Dn, 2, 1) + Mid(Dn, 3, 1)), Val(Mid(Dn, 2, 3)) + 2, Val(Mid(Dn, 2, 1)) + 0.2)
    '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
       ElseIf UCase(Left(Dn, 5)) Like "L###S" Then
      If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" Then
             Dn.Offset(, 1) = Mid(Dn, 2, 3) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        End If
        End If

    ElseIf UCase(Left(Dn, 4)) Like "L##S" Then
      If IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
        If Mid(Dn, 3, 1) = "0" Then
             Dn.Offset(, 1) = Mid(Dn, 2, 2) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
        End If
        End If
        End If

      If IsNumeric(Mid(Dn, 2, 1)) Then
             Dn.Offset(, 1) = Val(Mid(Dn, 2, 2)) + 0.2
     End If

       'ElseIf UCase(Left(Dn, 4)) Like "L###" Then
           ' Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 0.2
    ' End If 
```

我当前的代码输出如下：

```
*L111 --> 111.2
*L100 --> 100.2
*L100S --> 100.2
*L10S --> 12.2
*L12S --> 12.2 
```

**期望的输出如下：**

```
*L111 --> 111.2
*L100 --> 100.2
*L100S --> 100
*L10S --> 12
*L12S --> 12.2 
```

我不确定我做错了什么，任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:32:23.843

看起来最终的 If/Then 正在为您的所有五个输入添加 0.2，它应该：`IsNumeric(Mid(Dn, 2, 1))`对于您的所有输入都是正确的。

此代码可能会从使用 Select Case 语句而不是所有 Ifs 和 ElseIfs 中受益（在可读性、调试等方面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:38:08.713

谢谢你的建议和帮助，但我设法解决了我自己的问题。

```
Case "L"
     If UCase(Left(Dn, 3)) = "L/M" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5

     ElseIf UCase(Left(Dn, 3)) = "LM$" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5

ElseIf UCase(Left(Dn, 2)) = "LM" Then
 If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
            If Mid(Dn, 4, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 3, 2) + 3.5
            Else
            Dn.Offset(, 1) = Mid(Dn, 3, 2) + 0.35
           End If
            End If

 If IsNumeric(Mid(Dn, 4, 1)) And IsNumeric(Mid(Dn, 5, 1)) Then
            If Mid(Dn, 5, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 3.5
            Else
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 0.35
            End If
            End If

    ElseIf UCase(Left(Dn, 2)) = "L$" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 3, 2)) + 2

     ElseIf UCase(Left(Dn, 3)) = "LOW" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 3)) = "LO-" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 6)) = "LO MID" Then
            Dn.Offset(, 1) = Val(Mid(Dn, 7, 3)) + 3.5

    ElseIf UCase(Left(Dn, 3)) = "LO " Then
            Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2

    ElseIf UCase(Left(Dn, 5)) Like "L###S" Then
      If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" Then
             Dn.Offset(, 1) = Mid(Dn, 2, 3) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2

        End If
        End If

   ElseIf UCase(Left(Dn, 4)) Like "L##S" Then
      If IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
        If Mid(Dn, 3, 1) = "0" Then
           Dn.Offset(, 1) = Mid(Dn, 2, 2) + 2
       Else
          Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
       End If
        End If

   ElseIf UCase(Left(Dn, 4)) Like "L###" Then
      If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" Then
             Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2

        End If
        End If

   ElseIf UCase(Left(Dn, 3)) Like "L##" Then
      If IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
        If Mid(Dn, 3, 1) = "0" Then
           Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
       Else
          Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
       End If
       End If

    End If 
```

# objective-c - NSTextView：发送到实例的无法识别的选择器

> ID：13419461
> 
> 赞同：0
> 
> 时间：2012-11-16T15:21:31.860
> 
> 标签：objective-c, xcode, interface-builder

我见过与此类似的其他问题，但无法使用任何解决方案。

。H

```
@property (assign) IBOutlet NSTextView *commandOutput; 
```

.m

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    Command *aCommand = [[Command alloc] init];
    [self setCommand:aCommand];

    if (self.commandOutput) NSLog(@"textView is not nil");
    [self.commandOutput setString:@""];
} 
```

我得到的错误信息是：`-[NSScrollView setString:]: unrecognized selector sent to instance 0x100608630`

我还看到：`textView is not nil`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:25:54.280

我从错误消息中怀疑是您将`commandOutput`插座绑定`NSScrollView`到`NSTextView`. 如果您使用此日志跟踪，您可以获得更多关于真实类型的信息`self.commandOutput`：

```
if (self.commandOutput) NSLog(@"textView is not nil: %@", [self.commandOutput description]); 
```

因此，我的建议是检查您在 Interface Builder 中的绑定，并确保您没有无意中将插座拖到错误的视图上。

# javascript - 当用户点击 x 按钮时，iOS6 上的 add2home.js 不会关闭

> ID：13419462
> 
> 赞同：2
> 
> 时间：2012-11-16T15:21:33.990
> 
> 标签：javascript, ios

我正在使用此[脚本](http://cubiq.org/add-to-home-screen)向移动用户展示如何将他们的网站添加到主屏幕。`[X]`它可以在装有 iOS 5 的 iPhone 上正常工作，但在 iOS 6 上，当用户单击右上角的 时，气泡不会消失。当达到超时（大约 8-10 秒）时，它会淡出。

网站上的demo也有这个问题。

JS 和 CSS 源代码[在这里](https://github.com/cubiq/add-to-homescreen)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T18:31:08.830

我有同样的问题。我发现这与我的 iphone 4s 开启隐私浏览有关。显然，在隐私浏览模式下，safari 会引发 localStorage 错误。

这里有一个解决方案。它对我有用：[https ://github.com/gdub22/add-to-homescreen/blob/845d5a5d3ceb0c7601a90b1fe31fc271670f9e58/src/add2home.js](https://github.com/gdub22/add-to-homescreen/blob/845d5a5d3ceb0c7601a90b1fe31fc271670f9e58/src/add2home.js)

# asp.net - ASP.NET 和 Delphi ISAPI 应用程序之间的单点登录

> ID：13419468
> 
> 赞同：2
> 
> 时间：2012-11-16T15:21:46.447
> 
> 标签：asp.net, delphi, authentication, single-sign-on, isapi

我需要在三个 ASP.NET 应用程序和一个 Delphi ISAPI 应用程序之间开发“单点登录”身份验证。

情景参与者：

*   UI asp.net 应用程序 - 它确实调用 WS 应用程序
*   BI asp.net 应用程序
*   WS isapi 模块，其中包含用 Delphi 编写的肥皂服务。（可以与 LDAP 对话）

附加信息/限制：

*   WS 应用程序可以与 LDAP 对话，但可以修改/扩展。
*   WS 应用程序基于用户身份执行（或不执行）业务逻辑。
*   ADAM 是必须的（？），因为每个应用程序实例都需要单独的用户容器（某种多租户解决方案）。
*   表单身份验证要求很高。

我目前的想法是使用 AD 或 ADAM 作为用户容器。使用表单身份验证并在 ASP.NET 应用程序之间共享成员资格提供程序 (http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)。模拟两个 ASP.NET 应用程序 (http://stackoverflow.com/questions/1066275/impersonate-using-forms-authentication)，然后从 UI 应用程序调用 WS。

但是，我不知道如何在 WS 模块一侧传递（和接收）用户身份（凭据？）。IIS 能否以某种方式（和 ADAM？）来处理这件事，他们可能会使用 HTTP 摘要或基本身份验证。我会感谢任何信息和建议如何使这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:34:10.773

> 但是，我不知道如何在 WS 模块的一侧传递（和接收）用户身份（凭据？）。

根据[http://www.mombu.com/microsoft/microsoft/t-iis-60-single-sign-on-isapi-filter-14103802-last.html](http://www.mombu.com/microsoft/microsoft/t-iis-60-single-sign-on-isapi-filter-14103802-last.html)在平台 SDK 中有一个带有源代码的 AuthFilter 示例。

该解决方案似乎是围绕**身份验证 Cookie**构建的，可以在 IIS 服务器之间传递。

如果这个单点登录示例可以应用于您的 ISAPI 应用程序，那么应该可以将 ASP.NET 的身份验证 Cookie 也传递到 ISAPI 端。

（我不是这方面的专家，这个建议是基于在网上找到的第一个研究结果。）

# infragistics - Ultraoptionset 在失去焦点之前不会更改数据源

> ID：13419469
> 
> 赞同：2
> 
> 时间：2012-11-16T15:21:50.910
> 
> 标签：infragistics, bindingsource, radiobuttonlist

我正在研究一个非常简单的超选项集，它由设计时创建的两个项目（字符串）组成。选项集值（通过绑定源）绑定到视图模型中的字符串属性。数据源更新模式设置为 OnPropertyChanged。

问题是视图模型在整个选项集失去视图焦点之前没有更新。因此，如果我在两个值之间来回更改，则属性不会得到更改，因此控件的验证将不起作用（因为数据未更新）。

我觉得很愚蠢，因为这应该超级简单。我究竟做错了什么？:D

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:14:14.500

我使用 NetAdvantage 2012 第 2 卷对此进行了测试，发现当更改通过 UI 选择的选项时，我绑定了 UltraOptionSet 的对象中的属性设置器会在属性更改时更新。这是我使用的代码：

```
public partial class Form1 : Form
{
    TestObject to;
    public Form1()
    {
        InitializeComponent();
        to = new TestObject() { Prop = "Two"};
        Binding optionBinding = new Binding("Value", to, "Prop");
        optionBinding.DataSourceUpdateMode = DataSourceUpdateMode.OnPropertyChanged;
        this.ultraOptionSet1.DataBindings.Add(optionBinding);
    }

}

public class TestObject
{
    private string prop;
    public string Prop
    {
        get
        { 
            return prop; 
        }
        set
        {
            System.Diagnostics.Debug.WriteLine("Current value :" + prop + " is being set to " + value);
            if (value != prop) prop = value;
        }
    }
} 
```

我建议验证您是否在绑定上正确设置了 DataSourceUpdateMode。如果您这样做，您可能需要检查是否有可以测试的 NetAdvantage 控件的更高服务版本。

# javascript - json读取性能

> ID：13419476
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:22:27.610
> 
> 标签：javascript, jquery, json, html

我正在使用 jquery+html5 开发客户端应用程序

我将数据存储在一个文件中 (70 MB)

数据.json：

```
var myData = [
    {
      "id":"000000001",
      "title":"title1",
      "contents": [
               {"title":"title11", "description": "description", "text":"textextxxxxxxxx"}
               {"title":"title12", "description": "description", "text":"textextxxxxxxxx"}
               {"title":"title13", "description": "description", "text":"textextxxxxxxxx"}
      ]

    }
,.........
,.........
70Mb
]

//Application read this file and show "values" on console :
var data = myData
jQuery.each(data, function(){
           iterObject(this)
           })

iterObject : function(obj){
            var self = this
            $.each(obj, function(key, value) {
                if((typeof value) == 'object'){
                    self.iterObject(value)
                }
                else {
                   console.log(value)
                }
            })
} 
```

问题是它工作得很慢

快速读取大对象的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:25:57.233

> 快速读取大对象的最佳方法是什么？

最好的方法是拆分它。现在您的整个文件需要加载到内存中，这非常消耗资源。

相反，我看到您的“对象”实际上是一个列表，可以拆分为块（例如，每行一个 JSON）并根据需要逐个读取。

换句话说：拆分负载，不要一次加载所有内容。

**编辑**：我刚刚注意到您正在将其加载到客户端。请考虑*缓存*- 如果在此期间没有更改，请不要加载您已经拥有的东西。

# javascript - 以表格/网格格式呈现 div

> ID：13419482
> 
> 赞同：0
> 
> 时间：2012-11-16T15:22:54.007
> 
> 标签：javascript, html, css

我目前正在努力以某种方式呈现 div 结构。不幸的是，我只能通过 css 执行此操作，因为我们的数据库系统输出 html。基本上我试图以图片中显示的格式呈现下面的代码：

```
<div class="job_classifications">
    <div class="classification x_location">
       <div class="class_type">Location</div>
       <div id="location" class="class_value"> London</div>
    </div>

     <div class="classification refno">
       <div class="class_type">Ref No</div>
       <div class="class_value">80</div>
    </div> 
```

类类型指的是左侧较暗的标题，class_value 指的是内容。

你们中有人对如何通过 css 实现这一点有任何建议吗？任何帮助将不胜感激。如果需要，可以使用 JQuery 和 javascript 在必要时附加类。

![在此处输入图像描述](../Images/61deb182ce626ee7c4f8435dcc5ade47.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:50:30.090

[http://jsfiddle.net/NVDjU/](http://jsfiddle.net/NVDjU/)

以您上传的图像为例，此方法使用您可以更改的浮点数和任意宽度，但可能会奏效。

```
.job_classifications {
    width: 420px;
    font-size: 11px;
    font-family: Arial;
}

.classification {
    float: left;
}

.classification .class_type {
    font-weight: bold;
    width: 80px;
    float: left;
}

.classification .class_value {
    float: left;
    margin: 0 10px 0 0;
    width: 100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:35:44.137

综上所述，如果您对他们给您的标记感到困惑，您可以使用 display:table*，但如果您必须在 IE8 之前支持，则必须小心旧浏览器。

鉴于：

```
<div class="job_classifications">
    <div class="classification x_location">
       <div class="class_type">Location</div>
       <div id="location" class="class_value"> London</div>
    </div>

     <div class="classification refno">
       <div class="class_type">Ref No</div>
       <div class="class_value">80</div>
    </div>
</div>​​​​​​​​​ 
```

你可以像这样使用css：

```
.job_classifications {
    display:table;
    border: 1px solid green;
}

.classification, .class_type, .class_value {
    display:table-cell;
    border: 1px solid blue;
} 
```

显然，边框样式只是为了说明这一点......

阅读展示：桌子，看看这是否能让你到达你需要的地方。 [http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/](http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/)

（示例 jsFiddle：http: [//jsfiddle.net/mori57/SguEb/](http://jsfiddle.net/mori57/SguEb/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:44:26.217

我能想到的最好的是这样的：

```
​.class_type{
float:left​;
font-weight:bold;
background-color:#DDD;
width:125px;
}
.class_value{
float:left;
background-color:#FFF;
width:125px;
}
.job_classifications{width:250px;} 
```

[http://jsfiddle.net/calder12/G29nU/](http://jsfiddle.net/calder12/G29nU/)

这里显然存在继承问题，因为它基于强制浮动打破具有设定宽度的线，这是一种糟糕的方式，但我想不出另一种方式。

*   首先，如果所有数据都在 job_classifications div 中，那么您只会得到一列。
*   如果您的数据超出了固定宽度，则此布局会将其切断。

# sql-server - 为什么这个 SQL Server 2005 小数除法会给出不同小数位数的结果？

> ID：13419485
> 
> 赞同：3
> 
> 时间：2012-11-16T15:22:58.613
> 
> 标签：sql-server, decimal, precision

> **可能重复：**
> [T-SQL 小数除法精度](https://stackoverflow.com/questions/423925/t-sql-decimal-division-accuracy)

在 SQL Server 2005 中，如果我执行以下查询：

```
select  cast(1 as decimal(38,18))/cast(150 as decimal(38,18)) 
```

它返回 0.006666（6 位小数）

但是，如果我这样做：

```
select  cast(1 as decimal(24,18))/cast(150 as decimal(24,18)) 
```

它返回 0.00666666666666（14 位小数）

谁能解释一下这些结果？

# objective-c - 如何从图像正确创建 OpenGL 纹理？

> ID：13419489
> 
> 赞同：0
> 
> 时间：2012-11-16T15:23:21.413
> 
> 标签：objective-c, image, macos, opengl, textures

谁能给我有关如何在使用 ARC 时从图像（NSImage 或图像文件）正确创建 OpenGL 纹理的信息？我尝试使用 CGImage（类似于 CGImageSource->CGImage->GLubyte ...），但这导致了相当大的内存泄漏。

示例代码：

```
 _bottom_source = CGImageSourceCreateWithData((__bridge CFDataRef)[_bottom_layer_image TIFFRepresentation], NULL);
    _bottom_cgimage =  CGImageSourceCreateImageAtIndex(_bottom_source, 0, NULL);
    _cg_bottom_image_width = CGImageGetWidth(_bottom_cgimage);
    _cg_bottom_image_height = CGImageGetHeight(_bottom_cgimage);
    _bottom_image_data = (GLubyte *) calloc(_cg_bottom_image_width * _cg_bottom_image_height * 4, sizeof(GLubyte));
    _bottom_context = CGBitmapContextCreate(_bottom_image_data, _cg_bottom_image_width, _cg_bottom_image_height, 8, _cg_bottom_image_width * 4, CGImageGetColorSpace(_bottom_cgimage), kCGImageAlphaPremultipliedLast);
    CGContextDrawImage(_bottom_context, CGRectMake(0.0, 0.0, (CGFloat)_cg_bottom_image_width, (CGFloat)_cg_bottom_image_height), _bottom_cgimage);
    CGContextRelease(_bottom_context);

    CIImage *_gray_out_ciimage = [[CIImage alloc] initWithCGImage:_bottom_cgimage];
    CIFilter *gray_out_filter = [CIFilter filterWithName:@"CIColorControls"];
    [gray_out_filter setDefaults];
    [gray_out_filter setValue:_gray_out_ciimage forKey:@"inputImage"];
    [gray_out_filter setValue:0 forKey:@"inputSaturation"];
    _gray_out_ciimage = [gray_out_filter valueForKey:@"outputImage"];
    NSBitmapImageRep *_temporaryRep = [[NSBitmapImageRep alloc] initWithCIImage:_gray_out_ciimage];

    _top_cgimage = _temporaryRep.CGImage;
    _cg_top_image_width = CGImageGetWidth(_top_cgimage);
    _cg_top_image_height = CGImageGetHeight(_top_cgimage);
    _top_image_data = (GLubyte *) calloc(_cg_top_image_width * _cg_top_image_height * 4, sizeof(GLubyte));
    _top_context = CGBitmapContextCreate(_top_image_data, _cg_top_image_width, _cg_top_image_height, 8, _cg_top_image_width * 4, CGImageGetColorSpace(_top_cgimage), kCGImageAlphaPremultipliedLast);
    CGContextDrawImage(_top_context, CGRectMake(0.0, 0.0, (CGFloat)_cg_top_image_width, (CGFloat)_cg_top_image_height), _top_cgimage);
    CGContextRelease(_top_context);
//wielding *_image_data as OpenGL textures images and after that:
    CGImageRelease(_bottom_cg_image);
    CGImageRelease(_top_cg_image);
    free(_bottom_image_data);
    free(_top_image_data); 
```

* * *

```
it acts like that:
That code, that I have written in question now works like that:

1\. I launch app. In activity monitor `Real Mem:78MB` and `Virtual Mem: 120MB`.
2\. I load 389kb image. In activity monitor now `Real Mem:181.3MB` and `Virtual Mem:161.1MB`.
3\. Then I load 5.3MB image. And now in activity monitor `Real Mem: 519MB` and `Virtual Mem: 456.8MB` 
4\. If I repeat step 2 now again, `Real Mem:468.5MB` and `Virtual Mem: 436.5 MB`.

And all the time when I load image, memory consumption is increasing, not getting lower. It gets a little bit lower only if I load much smaller image than the image that is already loaded (app works so that only one image can be loaded at one time). 
```

然后我尝试使用 NSImage 到 NSBitmapImageRep 方法。它几乎没有内存泄漏，但是在使用它时我遇到了更高 DPI 图像的问题。那么如何在没有任何内存泄漏和尽可能小的内存消耗的情况下正确地做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:47:25.013

看起来您正在分配，但没有释放`_bottom_source`和`_gray_out_ciimage`（至少在您发布的代码中）。

# java - 未跨模块更新集群 Terracotta 缓存

> ID：13419490
> 
> 赞同：1
> 
> 时间：2012-11-16T15:23:30.857
> 
> 标签：java, hibernate, ehcache, terracotta

这个问题有很多组成部分，我会尽量不要错过任何一个：

*   EhCache 与 Terracotta 一起用于集群
*   EhCache 用于弹簧缓存和休眠二级缓存
*   为了只有一个缓存管理器，缓存管理器被声明为“共享”
*   我们有很多 web 模块，它们被部署为不同的 webapps
*   在内部环境中，模块部署在同一台服务器上并且不使用 Teracotta，在生产和登台环境中，它们部署在不同的服务器上
*   terracotta 集群使用默认的“最终”一致性模式
*   ehcache 2.5.2，休眠 3.6，兵马俑 3.0.6

鉴于这些先决条件，会发生以下情况：

1.  一个 Web 模块（Web 应用程序，部署在一台服务器上）对休眠实体进行了更改。这应该在集群范围内更新缓存条目。
2.  当从另一个 Web 模块（另一个服务器）请求对象时，即使在一分钟后，如果实体由该标识符加载，则会返回一个陈旧的对象（即，没有第一个 Web 应用程序所做的修改）

问题是： - 我是否正确假设在进行“保存”操作后，二级缓存“最终”（在毫秒内，根据 Terracotta 文档）获取更新集群范围内的信息？- 没有发生这种情况的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:40:34.403

似乎`<defaultCache>`没有使用`<terracotta />`. 所有其他人都是，所以我一开始并没有注意到这个疏忽。

# java - Wicket 动态添加组件到表单

> ID：13419494
> 
> 赞同：5
> 
> 时间：2012-11-16T15:23:54.190
> 
> 标签：java, wicket

我无法动态地将组件添加到表单中。我要做的是：给用户一个下拉列表，其中包含他们可以选择的项目，如姓名、年龄、......

当用户按下 add: 时，1 个组件中有一个 (label + inputbox) 允许他们输入值。您可能认为我可以隐藏那些未选中的组件，但用户也可以将值添加到下拉列表中。

**我遇到的问题是如何在 HTML 中没有 wicket:ids 的情况下添加和删除组件（标签+输入框）？**

这就是我要添加的内容：

```
<wicket:panel>
  <div wicket:id="hldValue">
    <label wicket:id="lblValue"></label>
    <input type="text" wicket:id="value"/>
  </div>
</wicket:panel> 
```

我在这里遇到的问题是 ID 始终是我想要动态命名的值。使用动态 HTML 创建这个组件是个好主意吗？我正在压倒一切`getMarkupResourceStream`并`getCacheKey`实现这一目标。我仍然觉得这不是正确的方法。还有其他建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T23:33:30.510

您需要一个 ListView，因为您可以拥有面板类型，一个模型，您可以在其中添加逻辑与列表视图，至少 2 个表单，一个用于 DropDown，其中用户选择数据也添加，最后另一个用于提交整个数据列表显示。您可以使用 AJAX，但它是可选的

为了了解如何将转发器（ListView 是高级转发器）与表单组件一起使用，您可以[在此处查看](https://cwiki.apache.org/confluence/display/WICKET/ListView+and+other+repeaters)以了解他的基本用法，[在此处](http://wicketinaction.com/2008/10/building-a-listeditor-form-component/)查看他与表单组件的用法，最后[在此处](https://cwiki.apache.org/confluence/display/WICKET/How+to+repaint+a+ListView+via+Ajax)了解如何将其与 AJAX 一起使用。

顺便说一句，我有一个例子，这只是代码的关键部分。

这是 ListView.class 上的 populateItem 方法

```
 @Override
 protected void populateItem(ListItem<ListViewModel> item) {     
     item.add(new TextField<Integer>("quantity", new PropertyModel<Integer>(item.getDefaultModelObject(),
     "averageQuantity"));
     item.add(new TextField<Integer>("position", new PropertyModel<Integer>(item.getDefaultModelObject(), "order"))
     .add(new IntegerValidator()));
     item.add(new Label("description", item.getModelObject().getName()));
     item.setOutputMarkupId(true);
 } 
```

在其他地方，您应该将下拉列表添加到他自己的表单中，然后在提交时操作 listView 对象，例如

```
 // I use a AjaxButton to perform the user submit if you don't 
 // want use it, you should reload the entire page
 @Override
 protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
     //redraw the parent of the list view 
     target.add(theContainerOfTheListView);
     //the submited model of the dropdown
     ListViewModel item = form.getObject();                
     List<ListViewModel> list = listViewObject.getObject();
     list.add(item);
     //you could sort the list object in order to sort the listViewObject
 } 
```

**更新：**在将新项目添加到列表视图之前，您应该提交列表视图的表单组件，如果您不这样做，您将失去用户更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T23:04:37.437

您不必从页面中添加/删除组件。可以使组件动态可见/不可见。用于`setVisible(false)`使组件不可见。这将是他们的初始状态。

您还需要调用`setOutputMarkupPlaceholderTag(true)`要动态隐藏/显示的组件。

当您需要组件可见时，请调用`setVisible(true)`. 这可以由 Ajax 按钮的`onClick()`方法触发。

# php - PHP MySQL Insert 忽略插入太多数据

> ID：13419495
> 
> 赞同：0
> 
> 时间：2012-11-16T15:24:00.327
> 
> 标签：php, mysql, insert

我有一个流量交换，每次查看一个站点时，我都希望它插入到一个看起来像这样的表中：

-用户
-站点

用户默认为 1，我不插入，因为我认为对于 INSERT IGNORE，您需要一个保持不变的列。

我目前的查询：

```
$db->Query("INSERT IGNORE INTO `surfed_site` (site) VALUES('".$sit['id']."')"); 
```

我有大约 85 人在线，但在 1 秒的刷新中，它从表中的 0 变为 750，这是不可能的，因为用户必须在插入站点之前查看站点 20 秒。

我认为我的 INSERT IGNORE 不起作用，有人能指导我看看我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:35:30.417

您确定该站点是主键吗？

为了让 INSERT IGNORE 工作，您必须将插入的值声明为主/唯一键

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

如果不存在，则添加主键：

```
ALTER TABLE surfed_site ADD PRIMARY KEY (site); 
```

# android - 使 Android ListView 像 Spotify、Ted、Twitter 等一样流畅

> ID：13419498
> 
> 赞同：1
> 
> 时间：2012-11-16T15:24:04.933
> 
> 标签：android, android-listview

我正在尝试找到从 URL（特别是 Facebook 事件和 Facebook 朋友个人资料图片）将图像加载到 Android 中的 ListView 的最佳方法

我尝试了许多不同的库，包括 Shutterbug、webimageloader、广受赞誉的[LazyList](https://github.com/thest1/LazyList)，但永远无法获得像 Spotify 中的朋友列表或 Ted Talks 应用程序或 Twitter 应用程序的个人资料图片加载那样的完全平滑滚动的 ListView。

谁能指出我正确的方向，以便我可以获得平滑的滚动列表？

我的适配器的 getView()：

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        FriendView fView = null;
        if (convertView == null) {
            fView = new FriendView();
            convertView = inflater.inflate(R.layout.friend_layout, parent,
                    false);
            fView.name = (TextView) convertView.findViewById(R.id.friendName);
            fView.name.setTypeface(tf);
            fView.pic = (ImageView) convertView.findViewById(R.id.profilePic);
            convertView.setTag(fView);
        } else {
            fView = (FriendView) convertView.getTag();
        }
        fView.name.setText(nameEvents.get(position));
        HomeScreen.imageLoader.DisplayImage(graphBase + ids.get(position)
                + graphEndForPic, fView.pic);
        return convertView;
    }

static class FriendView {
        public TextView name;
        public ImageView pic;
    } 
```

事情并不算太糟糕，但列表大约有 600 项，并且所有图像都有不同的 URL。我根本无法真正浏览它，因为它会在滚动和滞后时加载所有图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T15:49:20.027

原来问题出在我正在使用的一个 SlidingMenu 库上（类似于 Spotify 中的那个），解决方法是更新它。旧版本在关闭时没有删除视图，因此有 4-5 层 GPU 过度绘制。使用 Jelly Bean 中介绍的开发工具帮助我发现了这一点。

# c# - Xslt 文件中的特殊字符

> ID：13419500
> 
> 赞同：0
> 
> 时间：2012-11-16T15:24:08.720
> 
> 标签：c#, xml, xslt, xpath, extension-objects

我正在调用我的扩展对象的方法。

这是我的方法的签名：

```
public string GetValue(string xPath) { } 
```

这是我在`Xslt`文件中调用它的地方：

```
<xsl:value-of select ="crn:GetValue('courier:_application/base:_entity/loan:_applicant/base:_entity/person:_phones/base:SmartRefOfPhoneeJDvviUx[base:_entity/contact:_isMobile/base:_underlyingValue='true']/base:_entity/contact:_secondaryPrefix/base:_underlyingValue')"/> 
```

由于部分

> **[base:_entity/contact:_isMobile/base:_underlyingValue='true']**

包含**'**字符，我收到一个错误

> "**预期的令牌 ')'，找到 'true'。...isMobile/base:_underlyingValue=' -->true<-- ']/base:_entity/contact:_extensi...** "

我找不到 X-path 的转义字符。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:33:09.480

您可以使用 XSLT/XML 转义机制，即

```
<xsl:value-of select ="crn:GetValue(&quot;courier:_application/base:_entity/loan:_applicant/base:_entity/person:_phones/base:SmartRefOfPhoneeJDvviUx[base:_entity/contact:_isMobile/base:_underlyingValue='true']/base:_entity/contact:_secondaryPrefix/base:_underlyingValue&quot;)"/> 
```

# sql-server-2008-r2 - sql server 2008外键删除设置默认不起作用

> ID：13419502
> 
> 赞同：2
> 
> 时间：2012-11-16T15:24:16.080
> 
> 标签：sql-server-2008-r2

我正在删除选项上测试不同的外键。我累了级联，没有动作，设置为空，所有的作品，除了设置默认值。SQL SERVER 只报告错误：

消息 547，级别 16，状态 0，第 1 行 DELETE 语句与 FOREIGN KEY 约束“FK_child_parent”冲突。冲突发生在数据库“Test”、表“dbo.Test_parent”、列“no”中。该语句已终止。

```
create table Test_parent(
    [no] int primary key    
)

CREATE TABLE test_child(
     SUB1 INT,
    [NO] int DEFAULT 0 CONSTRAINT FK_child_parent REFERENCES Test_parent([no]) ON DELETE set default
)

insert into Test_parent values(1),(2)

insert into test_child values(1, 1)
insert into test_child values(2, 1)

delete from Test_parent 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:29:46.537

您删除了父表，这会触发子表中的设置默认值。数据库尝试将子记录设置为默认值`0`。但是父表中没有`0`记录，触发外键违规。

# ruby - 无法加载宝石架/测试

> ID：13419505
> 
> 赞同：0
> 
> 时间：2012-11-16T15:24:20.250
> 
> 标签：ruby, load-path

我正在尝试将 `rack/test` 加载到我的应用程序中，但由于某种原因它无法正常工作。当我做：

`gem list rack-test`

我明白了

`rack-test (0.6.2)`

所以安装好了。

我还可以通过以下方式获取路径：

`gem which rack/test`

这是

`/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb`

但是之后

`ruby -e 'puts $LOAD_PATH.inspect; $LOAD_PATH << "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/"; require "rack/test"'`

产量

```
["/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/i686-linux", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby/1.9.1", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby/1.9.1/i686-linux", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1", "/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux"]
/home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rack/test (LoadError)
    from /home/jacky/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from -e:1:in `<main>' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:23:38.850

这可能是 gem 文件的权限问题。`rack/test.rb`如果我使文件不可读，我可以重现您所看到的内容：

```
$ ls -l `gem which rack/test`
-rw-r--r--  1 matt  staff  9723  5 Nov 19:42 /Users/matt/.rvm/gems/ruby-1.9.3-p194/gems/rack-test-0.6.2/lib/rack/test.rb
$ ruby -e 'p require "rack/test"'
true
$ chmod a-r `gem which rack/test`
$ ls -l `gem which rack/test`
--w-------  1 matt  staff  9723  5 Nov 19:42 /Users/matt/.rvm/gems/ruby-1.9.3-p194/gems/rack-test-0.6.2/lib/rack/test.rb
$ ruby -e 'p require "rack/test"'
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': cannot load such file -- rack/test (LoadError)
        from /Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from /Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from -e:1:in `<main>' 
```

换句话说，如果文件存在但由于某种原因不可读，那么`gem which`将显示该文件，但在 Ruby 中尝试`require`它意味着读取它，因此这将引发一个`LoadError`.

检查权限

```
$ ls -l `gem which rack/test` 
```

它们应该看起来像`-rw-r--r--`. 如果他们不这样做，这可能是你的问题。简单的修复方法是用于`chmod`更正权限，但您也需要查看其他文件，并尝试确定您的权限错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:36:41.893

通过重新安装rvm解决。由于某种原因，有一个多余的 ruby​​ 可执行文件，它把事情搞砸了。

# python - 安装 Numexpr 的问题（以及 PyTables 的结果）

> ID：13419509
> 
> 赞同：3
> 
> 时间：2012-11-16T15:24:33.400
> 
> 标签：python

我在安装 numexpr 以安装 PyTables 时遇到问题，因此我可以处理大量数据集。

构建详细信息：Windows 7 Pro 64 位、Python 2.7、numexpr 2.01、numpy v1.6.1、scipy v0.10.1

这是正在发生的事情：

```
import numpy as np
import scipy as sp
import numexpr as ne

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "c:\python27\lib\site-packages\numexpr\__init__.py", line 38, in <
      from numexpr.expressions import E
 File "c:\python27\lib\site-packages\numexpr\expressions.py", line 31, i
      from numexpr import interpreter
 ImportError: DLL load failed: The specified module could not be found. 
```

当我尝试从 numexpr.expressions import E 时，它也会给出该错误。

我的路径包括：

c:\python27\;c:\python27\scripts\;c:\python27\lib\site-packages\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:49:47.533

有几件事可能会发生。这应该缩小范围

1) 检查 c:\python27\DLLs 是否有它试图导入的 dll。

2) 查看程序的哪一部分引发了错误。使用 ipython 导入 numexpr，然后导入解释器以查看它是否是导致错误的那些导入中的导入

3）这可能会导致两件事：

a）您没有它正在寻找的 DLL，这可以通过安装该软件包来解决

b) 导入的 DLL 存在，但该 DLL 的依赖项不存在。使用依赖遍历器，加载 DLL 并查看缺少的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:54:46.603

您是否考虑过安装[Python(x,y)](https://code.google.com/p/pythonxy/)？

Python 2.7、numexpr、numpy、scipy 和 PyTables 都包含在一个安装程序中，以及您可能会发现对数据分析有用的[许多其他东西。](https://code.google.com/p/pythonxy/wiki/StandardPlugins)它应该允许您跳过使用单个软件包时遇到的安装问题。

# python - 使用python从csv打印更小/更大的值单元格

> ID：13419511
> 
> 赞同：0
> 
> 时间：2012-11-16T15:24:39.373
> 
> 标签：python, csv

我有一个小的 python 脚本，它生成一个如下所示的 csv 输出：

> 用户名、时间戳
> 
> 用户1，2012-11-06 14:08:26
> 
> 用户1，2012-11-06 14:08:02

该列表可以在数百行的范围内，因此我希望将一个简短的脚本放在一起，该脚本将简单地打印出 B 列的最早和最近的时间戳日期（或最小值）。原则上看起来相当很容易，但由于这些是日期，我还不能应用一些使其工作的代码。我尝试应用类似于我在这里找到的解决方案，但我无法让它工作：

[如何使用python提取csv中的列和行](https://stackoverflow.com/questions/5621208/how-to-extract-column-and-row-in-csv-using-python)

```
 import csv
  def main():
    reader = csv.reader(open('file.csv'), "rb"), delimiter=',')
    headerline = reader.next()
    data = [(int(row[1]), row['']) for row in csv.DictReader(reader)]
    data.sort()
    print data[0] 
```

我对python并不完全流利，所以我可能只是没有看到错误，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:48:42.983

**示例代码：**

```
from operator import itemgetter
with open('file.csv') as fin:
    csvin = csv.reader(fin)
    print max(csvin, key=itemgetter(1)) 
```

# joomla2.5 - joomla中的查看文章在哪里？

> ID：13419513
> 
> 赞同：0
> 
> 时间：2012-11-16T15:24:40.917
> 
> 标签：joomla2.5

这可能是一个非常愚蠢的问题，但是创建后在 Joomla 中查看文章在哪里？碰巧我被 Joomla 2.5 中的一个项目困住了。我来自 Wordpress。

我创建了一篇文章，但我不能把它放在网站的任何类别中，因为它会显示，客户不会喜欢这样。它属于未分类类别。

我怎么看那篇文章？我怎样才能得到它？链接是什么？我知道别名、类别、id 等。我如何从这些链接中创建链接？

我很沮丧。我什么都试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:33:11.990

您必须为文章创建一个菜单链接（单篇文章）。

# oracle - 枢轴与手动分组

> ID：13419514
> 
> 赞同：1
> 
> 时间：2012-11-16T15:24:47.937
> 
> 标签：oracle, oracle11g, pivot

我发现[一篇文章](http://www.oracle-developer.net/display.php?id=506)评论了使用手动 GROUP BY（在 11g 之前必须如何完成）与在 11g 中使用新的[pivot 子句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#CHDFAFIE)（它本身执行隐式 GROUP BY）的性能。以下是文章的结论：

> “此外，尽管两种方法的工作量相同，但手动旋转技术的速度要慢 25%”</p>

我玩得很快，虽然我的结果绝不是确定的，但它们似乎确实与这篇文章的一致（尽管我没有在多个专栏上进行旋转）。

如果这篇文章对时间的去向进行了调查，那就太好了，特别是因为这两个查询具有相同的解释计划和成本。

*谁能解释为什么使用 PIVOT 比手动 GROUP BY 更快？*

# c# - 在前端显示之前对绑定数据列表中的列执行操作

> ID：13419516
> 
> 赞同：0
> 
> 时间：2012-11-16T15:25:00.873
> 
> 标签：c#, asp.net, .net

我有一个从代码隐藏页面绑定的数据列表（数据来自存储过程）。我有一列/字段，我需要在它显示在前端之前对其进行一些自定义格式和数学运算。在 .NET 中处理此问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:29:32.450

我会使用该`ItemDataBound`事件：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:35:10.170

您可以使用类绑定到列表数据，然后使用属性格式化

```
public class Data 
{
    private int rawData;
    Public Int Raw Data { get { return rawData; } }
    Public String Formatted { get { return .... } }

    public void Data(int _rawData) 
    { rawData = _rawData; }    
} 
```

# .htaccess - htaccess 在文件名前带/不带斜杠

> ID：13419518
> 
> 赞同：0
> 
> 时间：2012-11-16T15:25:04.690
> 
> 标签：.htaccess

**文件夹结构：**

```
root/.htaccess
root/dont-index-me.php 
```

正如您在上面看到的，htaccess 文件和 dont-index-me.php 在同一个文件夹中，那么哪个是 htaccess 文件的正确内容？

**带斜线：**

```
User-agent: *
Disallow: /dont-index-me.php 
```

**没有斜线：**

```
User-agent: *
Disallow: dont-index-me.php 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:32:12.990

没有斜线：

```
User-agent: *
Disallow: dont-index-me.php 
```

# mysql - 在 MySQL 中按组计算总数

> ID：13419520
> 
> 赞同：0
> 
> 时间：2012-11-16T15:25:28.360
> 
> 标签：mysql, sql

我有一个小型 php 程序，用于显示每个工作人员的所有待处理金额，但我在汇总 acc_code 的组值时遇到了一些问题。

我已经解释了下面的系统。每个员工都分配有一个 acc_code。每个帐户代码有 40 – 50 名员工

例如：

```
admission  name   months  acc_code
==================================
001        test1  3       10A
002        test2  5       10A
006        test3  7       15B
008        test4  1       15A
011        test5  2       16C
051        test6  3       16A
012        test7  3       16A 
```

预期输出：

```
 admission  name   months  acc_code
    ==================================
    001        test1  3       10A
    002        test2  5       10A
                    Total    USD 1000

    006        test3  7       15B
                    Total    USD 1800

    008        test4  1       15A
                    Total    USD 800

    011        test5  2       16C
                    Total    USD 1600

    051        test6  3       16A
    012        test7  3       16A
                     Total    USD 2700 
```

每个员工都有一定数量的分配。我需要获取每个 acc_code 的总待处理金额

下面是我编写的代码，但我不确定如何获得每个 ac_code 的总计

```
select
  (period_diff(date_format(now(), '%Y%m'),
  date_format(month, '%Y%m'))) as months,
  pending.amount,
  pending.admission_numb,
  pending.month,
  staff.full_name,
  staff.acc_code
from
  pending join staff 
  on pending.admission_numb = staff.admission 
group by
  admission
order by
  staff.acc_code asc 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:35:27.147

```
select
  staff.acc_code,
  SUM(pending.amount) pending_amount
from
  pending join staff 
  on pending.admission_numb = staff.admission 
group by
  staff.acc_code
order by
  staff.acc_code asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:32:07.297

您需要 GROUP BY acc_code 和 SUM 个。像这样的东西：

```
select SUM ((period_diff(date_format(now(), '%Y%m'), date_format(month, '%Y%m'))) as months),
pending.amount, pending.admission_numb, pending.month, staff.full_name, staff.acc_code
from pending join staff 
on pending.admission_numb = staff.admission 
group by staff.acc_code order by staff.acc_code asc 
```

请注意，我没有查看您的查询。我刚刚添加了我认为你缺少的东西。当你试图为小组取得结果时，你需要员工的名字做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:32:46.967

这是一种获取 acc_code 总数的方法。

```
select
  (period_diff(date_format(now(), '%Y%m'),
  date_format(month, '%Y%m'))) as months,
  pending.amount,
  pending.admission_numb,
  pending.month,
  staff.full_name,
  staff.acc_code,
  (SELECT SUM(pending.amount) FROM pending p join staff s on p.admission_numb = s.admission WHERE p.acc_code = staff.acc_code) acc_code_total_pending
from
  pending join staff 
  on pending.admission_numb = staff.admission 
group by
  admission
order by
  staff.acc_code asc 
```

# android - 在android中更新文本视图

> ID：13419521
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:25:28.497
> 
> 标签：android, android-layout, textview

我第二次尝试教程并遇到我无法解决的相同错误。我在 MainActivityTextview 上得到红色下划线。我为一个文本框分配了一个 ID 为“MainActivityTextview”，现在我试图将它设置为文本。简单吧？但我无法让它工作。我错过了进口吗？谢谢

MainActivity.java

```
package com.Proteintracker;

import android.app.Activity;  
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView textView = (TextView) findViewById(android.R.id.MainActivityTextview);
    textView.setText("hello world");
}

} 
```

r.java

```
package com.Proteintracker;

public final class R {
public static final class attr {
}
public static final class drawable {
    public static final int ic_action_search=0x7f020000;
    public static final int ic_launcher=0x7f020001;
}
public static final class id {
    public static final int MainActivityTextview=0x7f070000;
    public static final int menu_settings=0x7f070001;
}
public static final class layout {
    public static final int activity_main=0x7f030000;
}
public static final class menu {
    public static final int activity_main=0x7f060000;
}
public static final class string {
    public static final int app_name=0x7f040000;
    public static final int hello_world=0x7f040001;
    public static final int menu_settings=0x7f040002;
    public static final int title_activity_main=0x7f040003;
}
public static final class style {
    public static final int AppTheme=0x7f050000;
}
} 
```

Activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/MainActivityTextview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:26:57.857

利用

```
TextView textView = (TextView) findViewById(R.id.MainActivityTextview); 
```

代替

```
TextView textView = (TextView) findViewById(android.R.id.MainActivityTextview); 
```

更改这些行后，您必须`Project->Clean`从 Eclipse IDE 的选项菜单中刷新和清理您的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:28:29.117

```
TextView textView = (TextView) findViewById(R.id.MainActivityTextview); 
```

删除“android.”，它是你的资源，不是系统。

# objective-c - 如何在不在objective-c中创建对象的情况下从其他类访问方法？

> ID：13419523
> 
> 赞同：2
> 
> 时间：2012-11-16T15:25:28.810
> 
> 标签：objective-c, ios, cocoa

有没有办法从其他类访问方法而无需在 Objective-C 中创建对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T15:31:57.280

```
@interface APotentiallyBadIdea : NSObject

+ (void)potentiallySillyUnmooredMethod:(NSString *)string;

@end

@implementation APotentiallyBadIdea

+ (void)potentiallySillyUnmooredMethod:(NSString *)string {
    NSLog(@"ask yourself why this isn't on a real object %@", string);
}

@end 
```

像这样称呼它：

```
[APotentiallyBadIdea potentiallySillyUnmooredMethod:@"this might be ok if it's part of a more complete object implementation"]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T15:30:06.130

我怀疑你真的在寻找类方法；Objective-C 等价于其他语言的`static`方法。请参阅：[类方法和实例方法有什么区别？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

定义一个：

```
@implementation MONObject
+ (void)classMethod { ... }
@end 
```

正在使用：`[MONObject classMethod]`

* * *

如果您希望将实例方法作为可调用的 C 函数，请参阅`class_getInstanceMethod`或简单地说`IMP imp = [MONClass instanceMethodForSelector:@selector(someSelector)];`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T15:31:20.170

使用 + 号定义使其成为静态方法的方法，可通过类名访问，如下所示

在 .h 文件中

```
+ (void) someMethod; 
```

在 .m 文件中

```
+ (void) someMethod {} 
```

比您可以通过另一个文件中的类名轻松访问它

```
[ClassName someMethod]; 
```

注意：不要忘记导入该类。

# objective-c - 预加载图像 iOS

> ID：13419524
> 
> 赞同：0
> 
> 时间：2012-11-16T15:25:30.650
> 
> 标签：objective-c, ios, uiimage

我使用泛洪代码预加载我的图像：

```
NSMutableArray *test_loose_preload = [[NSMutableArray alloc] initWithCapacity:test_loose_array.count];

for (int aniCount = 0; aniCount < test_loose_array.count; aniCount++) {

    UIImage *frameImage = [test_loose_array objectAtIndex:aniCount];
    UIGraphicsBeginImageContext(frameImage.size);
    CGRect rect = CGRectMake(0, 0, frameImage.size.width, frameImage.size.height);
    [frameImage drawInRect:rect];
    UIImage *renderedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [test_loose_preload addObject:renderedImage];

}

test_loose = test_loose_preload; 
```

是否有可能在此块中检查图像是否已经预加载并且不再需要预加载该图像？

感谢您的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:40:11.763

offtopic:

you could use the `for each` loop

```
for (UIImage *frameImage in test_loose_array) {

  UIGraphicsBeginImageContext(frameImage.size);
  ...
  [test_loose_preload addObject:renderedImage];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:44:52.193

也许我误解了这个问题，但在我看来，如果您已构建图像并将其填充到您的 test_loose_preload 数组中，则该图像是“预加载的”。我了解到您担心其他线程可能会在您通过数组之前执行相同的工作。

如果是这样，那么您可以通过检查 [test_loose_preload objectAtIndex:aniCount] 来检查这一点，如果该结果不是 nil，则跳过该结果并继续下一个索引。

# javascript - 关于 jQuery 的 scrollTop。滚动到不同的目标（除了回到顶部）

> ID：13419525
> 
> 赞同：0
> 
> 时间：2012-11-16T15:25:41.400
> 
> 标签：javascript, jquery, scroll, scrolltop

我目前正在使用 jQuery 的 .scrollTop，它非常适合将用户移回页面顶部。因为我真的很喜欢这种效果，所以我想让滚动到某个指定的 div 或锚点成为可能。

这可能吗？如果是，我该怎么做？有人可以给我一个例子吗？我还想保留 scrollTop 函数本身。

我已经检查了 Stackflow，但是或者这是不可能的，或者我忽略了一个类似的问题（在这种情况下，我很抱歉发布一个新问题）。

这是 scrollTop 的链接：http: [//api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:28:25.270

一个简单的 jQuery 函数可以实现这一点：

```
function scrollTo(id){
    $('html,body').animate({
        scrollTop: $("#"+id).offset().top},
        'slow');
} 
```

JSFiddle 示例：http: [//jsfiddle.net/cMxXM/4/](http://jsfiddle.net/cMxXM/4/)

# emacs - 字节编译禁用警告有什么作用？

> ID：13419532
> 
> 赞同：2
> 
> 时间：2012-11-16T15:26:12.260
> 
> 标签：emacs, elisp

不管争论是什么，它似乎根本没有做任何事情。它也不会以任何方式影响字节编译警告。如果根据其描述使用。有没有如何使用它的例子？

例如，下面的代码：

```
(defmacro deflocal (var &rest body)
  (let ((symb var)
        (val (car body))
        (doc (cadr body)))
    `(progn
       (let ((byte-compile-warnings nil))
       ;; (byte-compile-disable-warning 'make-local)
       (set (make-local-variable ',symb) ,val)
       (put ',symb 'variable-documentation ,doc)
       ;; (byte-compile-enable-warning 'make-local)
       )))) 
```

可以为所欲为`byte-compile-warnings`，并且不会以任何方式影响编译器的输出（我仍然收到有关分配给自由变量的警告。

**编辑：**

因为这在我上面的描述中是不透明的。这就是为什么我不想使用`defvar`. 我有一个交互式函数，它将启动某种交互式 shell，用于与 Emacs 外部的程序进行通信。这个 shell 可以由用户直接启动，也可以在进入几种不同的主要模式或执行一些其他任务（如编译、检查语法等）时间接启动。该系统相当复杂。

我多次遇到某些函数最终可能会在我不想要的缓冲区中设置变量。例如，当编译钩子调用一个假设它在拥有连接对象的缓冲区中被调用的函数时。连接可能会失败，因此系统会尝试自动恢复连接，一旦它发现由于任何原因失败（不幸的是，我必须连接的另一个程序非常不稳定并且它的通信设施实现不佳） . 因此，例如，如果 flymake 进程突然意识到它需要恢复连接，它将在 flymake 那时所在的任何缓冲区中创建它。同样，编译模式缓冲区、完成缓冲区、帮助缓冲区等。在这些背景变化之后很难理解*。*

现在，当我可以确定没有其他缓冲区会意外声明变量来引用连接对象，否则它会出错，我很安全，并且很容易调试和解决出现的问题。但是，一旦我使用`defvar`，过了一段时间我意识到已经创建了一些胭脂重复的进程，我完全不知道是谁做的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:02:29.267

确实，`byte-compile-warnings`不做你想做的事。相反，您可能希望在`(defvar <VAR>)`某处声明您的变量，或者将触发警告的代码包装在`with-no-warnings`.

代码中的 let-binding`byte-compile-warnings`将在代码运行时应用，而不是在编译时应用。

* * *

**编辑：**

这是一个简单的测试，可以确信`defvar`仅使用一个参数不会将变量绑定到任何地方，如下[所述](https://stackoverflow.com/a/12434028/1225607)：

```
(defvar foo)
(boundp 'foo) ;; -> nil

(defvar bar t)
(boundp 'bar) ;; -> t 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T18:45:04.690

该变量`byte-compile-warnings`最好用作文件局部变量，以控制批量编译期间输出的警告。

听起来您担心使用的副作用， `defvar`但它只创建一个动态绑定的全局变量（除非该变量已经在本地绑定）。

创建局部变量后，您可以`make-local-variable` 在函数中使用，使变量缓冲区对于 *当前缓冲区*是本地的，但对于所有其他缓冲区保持全局。因此，如果您只调用`make-local-variable`一次，则该变量将只有两个副本，一个是动态绑定并与所有缓冲区共享的，另一个是特定于单个缓冲区的。 *强调文本* （make-local-variable VARIABLE）

```
Make VARIABLE have a separate value in the current buffer.
Other buffers will continue to share a common default value. 
```

如果您想确保没有变量的全局版本，您应该查看 [lexical binding](http://emacswiki.org/emacs/DynamicBindingVsLexicalBinding)。

最后，为了在批量编译此`.el` 文件时消除警告，请将以下代码放在文件底部：

```
;; Local Variables:
;; byte-compile-warnings: (not free-vars)
;; End: 
```

# excel-formula - OpenOffice Calc 中的列加空白单元格的总和

> ID：13419536
> 
> 赞同：1
> 
> 时间：2012-11-16T15:26:34.037
> 
> 标签：excel-formula, openoffice-calc

我正在尝试将列中的数字总和加上开放办公室中空白单元格的数量。我为我的专栏命名`example`并尝试了公式

```
=Sum(example) + countblank(example) 
```

但这会计算我数据下方行中的所有空白单元格。我怎样才能做到这一点，以便我可以向我的数据添加更多行并且让公式仍然正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:07:20.783

也可以使用公式来计算范围内的空白数，直到最后一个非空白值：

```
=COUNTBLANK(OFFSET(Example;0;0;MAX(IF(ISBLANK(Example);0;ROW(Example))))) 
```

这是一个数组公式，因此您需要在 Open Office 的公式向导中选中数组复选框（如果使用 Excel，请按 CTRL+SHIFT+ENTER）。

它通过将问题分解为两部分来工作：

1.  此代码段计算 Example 中包含非空值的最高行：

    MAX(IF(ISBLANK(示例);0;ROW(示例)

2.  OFFSET 函数减小 Example 的大小以匹配最后一个非空白单元格的位置：

    (OFFSET(Example;0;0; [要考虑的行数]))

我们现在有了需要处理的值范围，我们应用了 COUNTBLANKS 公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:55:22.730

最简单的方法是将示例中的底行设为页脚行。

例如，在下面的示例中，示例涵盖单元格 A1:A10，其中 A1:A9 包含数据，A:10 包含诸如“”之类的文本。您可以简单地在上面插入行，Example 的范围将自动扩展。

```
 A
--+----
 1|  32
 2|  16
 3|  
 4|   9
 5|  12
 6|   8
 7|  
 8|  10
 9|  12
10|  <END> 
```

# vb.net - 如何从 Visual Studio 填充多个访问表

> ID：13419539
> 
> 赞同：0
> 
> 时间：2012-11-16T15:26:41.087
> 
> 标签：vb.net, oledb

提前道歉 - 我是视觉工作室的新手（和一般编程）

我正在尝试使用以下代码填充两个访问表房东和财产-但我不断收到

> " SQL 语句末尾缺少分号 (;)。"

有什么建议么 ？这是代码：

```
Dim aConnection As OleDbConnection
Dim aCommand As OleDbCommand
Dim aConnectionString, aQuery As String
Dim Username As String = txtUsername.Text
Dim Pword As String = TextBox2.Text
Dim EmailDetails As String = TextBox9.Text
Dim Question As String = DropDownList2.Text
Dim Answer As String = TextBox4.Text

aConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " _
& Server.MapPath("AppData/RMT.accdb")
aConnection = New OleDbConnection(aConnectionString)
aConnection.Open()
aQuery = "Insert Into Landlord (Username, email, Security_Question, Security_Answer, Pword, Status) Values ('" & Username & "','" & EmailDetails & "','" & Question & "','" & Answer & "', '" & Pword & "','pending')Into Property Values (26,46,'marysway','MarysRd','Marysville','Cork North')"
aCommand = New OleDbCommand(aQuery, aConnection)
aCommand.ExecuteNonQuery()

aConnection.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:32:14.180

我认为 Microsoft Access 的 ADO.NET 提供程序不支持在同一查询字符串中使用多个插入语句。但是，为了检查，您可以尝试编写

```
aQuery = "Insert Into Landlord (Username, email, Security_Question, Security_Answer, " & _ 
         "Pword, Status) Values ('" & Username & "','" & EmailDetails & "','" & _
         Question & "','" & Answer & "', '" & Pword & "','pending');" & _
         "Insert Into Property Values (26,46,'marysway','MarysRd','Marysville','Cork North')" 
```

注意第一个 INSERT 语句和第二个语句之间的分号（顺便说一下，您的原始代码中缺少第二个 INSERT 关键字）

也就是说，我建议在构建查询文本以传递给数据库引擎时始终使用 OleDbCommand 的参数集合。
这将避免文本解析问题（输入文本中的单引号会破坏所有内容），而且您不会将代码暴露给[Sql 注入攻击](http://www.unixwiz.net/techtips/sql-injection.html)

```
Using aConnection = New OleDbConnection(aConnectionString)
    aConnection.Open()

    aQuery = "Insert Into Landlord (Username, email, Security_Question, " + 
             "Security_Answer, Pword, Status) Values (?, ?, ?,?,?,'pending')"
    aCommand = New OleDbCommand(aQuery, aConnection)
    aCommand.Parameters.AddWithValue("@usr", Username)
    aCommand.Parameters.AddWithValue("@email", EmailDetails)
    aCommand.Parameters.AddWithValue("@qst", Question)
    aCommand.Parameters.AddWithValue("@ans", Answer)
    aCommand.Parameters.AddWithValue("@pwd", Pword)
    aCommand.ExecuteNonQuery()

    aQuery = "Insert Into Property Values (26,46,'marysway','MarysRd','Marysville','Cork North')"
    aCommand = New OleDbCommand(aQuery, aConnection)
    aCommand.ExecuteNonQuery()

End Using 
```

# git - Maven 发布 git-push “主机密钥验证失败。”

> ID：13419545
> 
> 赞同：3
> 
> 时间：2012-11-16T15:26:59.067
> 
> 标签：git, maven, jenkins, maven-release-plugin

当我试图让*jenkins*运行时，它会到达要更改 git`mvn -B release:prepare`的地步，但由于这是本地 git 存储库而失败。`push``Host key verification failed.`

此时，*jenkins*运行为`root`. 已为 SSH 密钥创建`root`并已将它们适当地添加到 git 用户的`authorized_keys`.

事实上，我可以*ssh*到构建机器，`su`成功`root`运行 `git clone git@localhost:my-project.git` 克隆，创建一个分支并`origin`成功推送该分支。

另一个奇怪的事情是*jenkins*可以在运行之前成功克隆存储库`mvn release:prepare`。

当它尝试时`push`，它会给出`Host key verification failed.`错误。

我已将构建简化为 1 个执行步骤

```
git clone git@localhost:my-project.git
mvn -B release:prepare 
```

在回复之前，请不要推荐 git plugin 或*maven release plugin*。这些无法安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:47:04.073

弄清楚了。

虽然`localhost`被添加到根 ~/.ssh/known_hosts 文件中，但盒子的实际 IP 不是。将盒子的公共 IP 添加到 known_hosts 解决了这个问题。

# c# - 从c#访问delphi dll中的非托管数组

> ID：13419548
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:07.677
> 
> 标签：c#, multidimensional-array, dllimport, managed, intptr

我有一个 delphi dll，它处理相机并将视频帧存储到这个 dll 中的 3d 字节数组。实现rgb格式需要3d尺寸，方便dll背景（如开发者所说）。因此，我必须从 c# 代码访问该数组，构建位图并显示其内容。但我不明白如何正确访问数组元素。这是我的代码：

```
 private unsafe void ByteArray2Bitmap(IntPrt data, int width, int height, int depth, out Bitmap bmp)
    {            
        // create a bitmap and manipulate it
        bmp = new Bitmap(width, height, PixelFormat.Format24bppRgb);
        BitmapData bits = bmp.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadWrite, bmp.PixelFormat);

        fixed(byte*** data = (byte***)(m_data.ToPointer()))
        {
            for (int i = 0; i < height; i++)
            {
                int* row = (int*)((byte*)bits.Scan0 + (i * bits.Stride));
                for (int j = 0; j < width; j++)
                {
                    int pixel = BitConverter.ToInt32(&data[i][j][0], 0);
                    row[j] = pixel;
                }
            }
        }
        bmp.UnlockBits(bits);
    } 
```

那行代码出错：固定语句赋值的右侧可能不是强制转换表达式

```
fixed(byte*** data = (byte***)(m_data.ToPointer())) 
```

是否有任何方法可以访问多维非托管数组而不使用 Marshal Copy 复制它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:49:39.627

您的代码有些混乱。您有`data`该方法的参数，并且您正在尝试使用该语句创建一个`data`变量。`fixed`也许参数应该是`m_data`？

无论如何，`m_data.ToPointer()`已经给出了一个固定的地址，所以没有必要再次修复它。你应该能够写：

```
byte*** data = (byte***)(m_data.ToPointer()); 
```

目前尚不清楚您要在这里做什么。不过，我相当肯定，您希望该`pixel`变量是 a`byte`而不是`int`. 否则，当您尝试注销位数据的末尾时，您将获得访问异常。

# java - Java 帮助，错误消息“找不到文件”

> ID：13419549
> 
> 赞同：2
> 
> 时间：2012-11-16T15:27:08.143
> 
> 标签：java

我正在尝试运行这段代码，该代码应该是我老师的简单作业。但是，按照说明操作后，我仍然收到此错误消息：

> “找不到指定的文件，ShapeData.txt。”

这指的是第 30 行。

我确实将文件剪切并粘贴到与其他所有文件相同的文件夹中，所以我不确定为什么我仍然收到错误消息。我还阅读了有关在命令行中执行某些操作的信息，但不确定我应该做什么。

（哦，这*不是*家庭作业或任何我可以上交成绩的东西。这只是我们可以查看以更好地理解的东西。）

这是我的代码，或者至少是前几行。

```
/**
 * Concepts demonstrated:
 *  Object Inheritance
 *  Interfaces
 *  Interface Implementation
 *  Reading Data from a File
 *  Sorting an Array
 *  Manipulating Strings 
 */

import java.util.Scanner;

    /**
     * This lab demonstrates the basics of object-oriented programming.
     */
    public class Lab8 {

        private static Shape[] shapes; // An array to hold all the shape objects

        public static void main(String[] args) {
            DataReader reader = new DataReader("ShapeData.txt");// The reader is used to read data from a file

            // Display program information
            System.out.println("Ima Java Programmer");
            System.out.println("Shape Info");

            // Load data from the file
            if(reader.loadData("ShapeData.txt")) { // The filename is entered using a command-line argument
                shapes = reader.getShapeData(); // Store the arrays in the array

                // Display how many shapes were read from the file
                System.out.println("Successfully loaded " + shapes[0].getCount() + 
                                   " shapes from the selected data file!");
                displayMenu();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:28:48.733

```
new DataReader("ShapeData.txt"); 
```

您需要提供 ShapeData.txt 的完整路径（假设 ShapeData.txt 不在 Java 进程的工作目录中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:29:02.843

`ShapeData.txt file must be in your working directory`，因为在这里您没有指定完整路径。工作目录可能是你的 java bin 目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:59:40.240

您可以在您的 ant 构建文件中添加文件的路径，以通过以下方式将其复制到您的工作目录中：

```
<copy todir="/path/to/copy" overwrite="false">
    <fileset dir="/source/path" />
</copy> 
```

或尝试使用：

```
File file = new File("filename");
DataReader reader = new DataReader(file.getAbsolutePath()); 
```

# sql - 从表中删除重复记录并保留最新的

> ID：13419551
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:18.523
> 
> 标签：sql, sql-server-2008

我想从表中删除任何重复的记录，并保留最新的记录（根据日期）。在下面的示例中，将删除第一条记录 (hdate = 2012-07-01, id = 16)。

使用 SQL Server 2008

谢谢

```
hdate      id           secId       pricesource          price         
---------- ------------ ----------- -------------------- --------------
2012-07-01 16           126         DFLT                 NULL          
2012-07-02 16           126         DFLT                 NULL          
2012-07-01 CAD          20          DFLT                 1             
2012-07-01 TWD          99          DFLT                 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:31:39.670

使用 Sql-Server 2005 或更高版本，您可以在 a 中使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)适当[`OVER`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)的`CTE`：

```
WITH CTE AS
(
  SELECT hdate, id, secId, pricesource, price,
  ROW_NUMBER() OVER (PARTITION BY id, secId, pricesource, price ORDER BY hdate DESC) AS RN
  FROM dbo.TableName t
)
DELETE FROM CTE WHERE RN > 1 
```

[**这是一个 Sql-Fiddle 演示**](http://sqlfiddle.com/#!3/99ccf/3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:23:46.687

如果您的 RDBMS 不支持 CTE，或者无法从中删除（因为您没有列出您正在使用的内容），那么这里是其他所有内容的版本：

```
DELETE FROM TableName as a
WHERE EXISTS (SELECT '1'
              FROM TableName b
              WHERE b.id = a.id  -- Plus all other 'duplicate' columns
                    AND b.hdate > a.hdate); 
```

（还有 Tim 修改过的[Fiddle 演示](http://sqlfiddle.com/#!1/0cc08/2)——尽管由于某种原因这不适用于 SQL Server）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:35:38.850

这不像 Tim 的解决方案那样优雅，但不需要 CTE。它还处理列中的空值作为等效项。

```
DELETE
FROM MyTable m1
WHERE EXISTS (
    SELECT 1
    FROM MyTable m2
    WHERE 
        (m2.id = m1.id OR (m2.id IS NULL AND m1.id IS NULL))
    AND (m2.secId = m1.secId OR (m2.secId IS NULL AND m1.secId IS NULL))
    AND (m2.pricesource = m1.pricesource OR (m2.pricesource IS NULL AND m1.pricesource IS NULL))
    AND (m2.price = m1.price  OR (m2.price IS NULL AND m1.price IS NULL))
    AND m2.hdate > m1.hdate
); 
```

# android - 使用 XMPP 通信中的 ReportedData

> ID：13419553
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:22.330
> 
> 标签：android, search, xmpp, communication

作为搜索 (IQ) 的结果，我从 XMPP 服务器接收到数据。整个故事与[这里](https://stackoverflow.com/q/13290445/1688731)有关。这是代码：

```
UserSearchManager usm = new UserSearchManager(ChatList.connection);
                    Form searchForm = null;
                    try {
                    searchForm = usm.getSearchForm("search.webserv.xxx.com");
                    } catch (XMPPException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    Form answerForm = searchForm.createAnswerForm();
                    answerForm.setAnswer("Username", true);
                    answerForm.setAnswer("search", "android");

                    try {
                     ReportedData data = 
                     usm.getSearchResults(answerForm, "search.webserv.xxx.com");
                    } catch (XMPPException e) {
                        e.printStackTrace();
                    } 
```

所以结果包含在“数据”变量中，但我不知道如何访问它。google 上几乎没有答案，我已经解决这个问题（以及整个 xmpp 问题）有一段时间了。比我更聪明的人可以告诉我如何搜索并将某人添加到我的 xmpp 聊天联系人列表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:00:48.137

[https://stackoverflow.com/a/14214622/1688731](https://stackoverflow.com/a/14214622/1688731)

这是代码：

```
UserSearchManager search = new UserSearchManager(mXMPPConnection);  

        Form searchForm = search.getSearchForm("search."+mXMPPConnection.getServiceName());

        Form answerForm = searchForm.createAnswerForm();  
        answerForm.setAnswer("Username", true);  

        answerForm.setAnswer("search", user);  

        org.jivesoftware.smackx.ReportedData data = search.getSearchResults(answerForm,"search."+mXMPPConnection.getServiceName());  

    if(data.getRows() != null)
        {
            Iterator<Row> it = data.getRows();
            while(it.hasNext())
            {
                Row row = it.next();
                Iterator iterator = row.getValues("jid");
                if(iterator.hasNext())
                {
                    String value = iterator.next().toString();
                    Log.i("Iteartor values......"," "+value);
                }
                //Log.i("Iteartor values......"," "+value);
            }
             Toast.makeText(_service,"Username Exists",Toast.LENGTH_SHORT).show();
             );
        } 
```

# php - 使用 php 创建会话

> ID：13419554
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:25.497
> 
> 标签：php

我有个问题 ，

我有一个检查用户登录的登录页面，当用户成功登录时，我开始一个新会话：

```
$loggedIn = new loggedIn();
                    $loggedIn->email = $userdetails["email"];
                    $loggedIn->displayname = $userdetails["display_name"];
                    $loggedIn->username = $userdetails["user_name"];

                                        var_dump($loggedIn->username);

                    //Update last sign in
                                        session_start();
                    $_SESSION["user"] = $loggedIn;

                                        $kk =  $_SESSION["user"];
                                        var_dump($kk->username); 
```

它显示成功会话创建，但是当我转到其他页面或返回此页面时，我没有会话：

```
isset($_SESSION["user"]) 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:35:22.773

您需要`session_start();`在要使用会话的每个页面的顶部。还要确保`class loggedIn`在您需要它的每个页面上都定义了 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:33:21.257

`session_start()`如果您想从会话中检索数据，则必须 在每个页面中插入它。`session_start()`必须在向浏览器输出任何内容之前调用。

在您可以使用您的功能并检索信息之后。如果您想查看已存储到会话中的所有数据，您可以像这样打印数组会话：

```
var_dump($_SESSION); 
```

另一个可能的问题可能是您的班级`loggedIn`。
您是否以正确的方式实例化了这个类？
你可以在那个类或类似的东西中有一些错误。

# iis-7 - CanonicalHostNameRule 结合 RemoveTrailingSlashRule1 的 IIS 7 重定向优化

> ID：13419557
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:33.587
> 
> 标签：iis-7, url-rewriting

我必须在我的 IIS 配置中遵循两条规则（根据 scottgu）：

```
<rule name="RemoveTrailingSlashRule1" stopProcessing="true">
    <match url="(.*)/$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    </conditions>
    <action type="Redirect" url="{R:1}" />
</rule>

<rule name="CanonicalHostNameRule1" enabled="true">
    <match url="(.*)" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^dev\.testing\.ch$" negate="true" />
    </conditions>
    <action type="Redirect" url="http://dev.testing.ch/{R:1}" />
</rule> 
```

CanonicalHostNameRule1 将所有[http://testing.ch](http://testing.ch)转发到[http://www.testing.ch/](http://www.testing.ch/)

第二条规则删除了退格/

如果我可以将空的 testing.ch 请求转发到 www.testing.ch 会更好（没有退格）。但是，如果我像这样删除它显然是行不通的：

```
<action type="Redirect" url="http://dev.testing.ch{R:1}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:07:24.383

你的规则没有错。没有必要将它们组合起来，因为对[http://www.testing.ch/](http://www.testing.ch/)的请求不会被第一条规则捕获。这是因为`/`域名后的第一个不是与正则表达式匹配的 URL 的一部分。

PS：假设这些规则来自您的开发网站（dev.testing.ch）而不是实际网站。

# css - 水平滚动条 - 移动风格 - 媒体查询

> ID：13419560
> 
> 赞同：0
> 
> 时间：2012-11-16T15:27:41.800
> 
> 标签：css, media-queries

我正在为客户开发移动样式表，并在 iphone 上获得水平滚动条。我正在使用 ios 模拟器进行测试，所以不确定这是否是原因。

*   我有一个宽度为 100% 的 div #container。容器包含页面的所有内容。
*   没有填充或边距。
*   我尝试将其设置为 99、98、97 % 只是为了看看它是否仍然出现，它确实......
*   我正在使用溢出-x：隐藏

是否有我忘记的技术或我在这里缺少的东西？我之前做过一些移动样式表（在更简单的网站上）并没有遇到这个问题。

这是一个链接：

[http://www.insomniacdesign.co.php5-24.dfw1-2.websitetestlink.com/roche/prototype-r4/core-template.php](http://www.insomniacdesign.co.php5-24.dfw1-2.websitetestlink.com/roche/prototype-r4/core-template.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:31:36.283

这可能是您的 iphone 的分辨率 - 如果我将浏览器的大小调整为 320，它看起来不错，但我会在它和更高的分辨率样式之间滚动 H'。

更新：不知道这是否有帮助，但再看一遍，您的页面一旦低于 320 就会恢复为更大的样式。您是否看到手机上的灰色条指示媒体查询正在应用哪些样式集？

在 Android 上查看以“MyRoche”和“News and Stories”开头的菜单比“最佳实践”和“自定义职业地图...”开头的菜单更宽，

上面两个在我的 320 像素宽屏幕上左右移动 - 希望这会有所帮助。

# jquery - 使用 jQuery 为 Joomla 创建子菜单

> ID：13419565
> 
> 赞同：0
> 
> 时间：2012-11-16T15:28:08.507
> 
> 标签：jquery, html, css

我有一个新问题。我想为我的 joomla 网站创建一个带有 jquery 的子菜单。菜单如下所示：

```
<ul id="submenu">
    <li><a href="#">Link</a></li>
    <li class="parent">
        <a href="#">Submenu 1</a>
        <ul>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </li>
    <li class="parent">
        <a href="#">Submenu 2</a>
        <ul>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </li>
        <li class="parent">
        <a href="#">Submenu 3</a>
        <ul>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
</ul> 
```

所以不是所有的元素都有子元素。我怎样才能做到这一点？我试过这样：

```
// hide all elements onload 
$("#submenu > li.parent > ul").hide();

$("#submenu li.parent").hover(function() {
    $(this).find("ul").slideDown("slow");
}); 
```

但是我不知道如果用户用鼠标离开菜单，我该如何关闭子菜单。我想在显示子菜单之前关闭其他开放式菜单。有谁能够帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:33:45.743

您可以使用`mouseenter/mouseleave`

```
$("#submenu li.parent").mouseenter(function() {
     $(this).find("ul").slideDown("slow");
}).mouseleave(function() {
     $(this).find("ul").slideUp("Slow");
});​ 
```

但我最好选择纯 CSS 解决方案。

[http://jsfiddle.net/QEWvm/](http://jsfiddle.net/QEWvm/)

CSS3 示例解决方案：http: [//jsfiddle.net/qzP7s/](http://jsfiddle.net/qzP7s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:48:52.687

如果使用 jQuery 解决方案，我至少建议`.stop()`在 the 之前添加一个`.slideUp()`以解决可能导致动画排队的任何鼠标移动。所以这段代码到底

```
 $("#submenu li.parent").mouseenter(function() {
     $(this).find("ul").slideDown("slow");
}).mouseleave(function() {
     $(this).find("ul").stop().slideUp("Slow");
});​ 
```

在这里[摆弄 http://jsfiddle.net/QEWvm/4/](http://jsfiddle.net/QEWvm/4/)

但是，这种方法的问题在于它不可访问，因为屏幕阅读`.hide()`器`display:none`会忽略它。

更好的解决方案（如果你可以在没有动画的情况下生活，或者想使用 CSS3 来解决它们）将使用定位和伪类来实现类似这样的东西

```
#submenu > li.parent > ul { position: absolute; left: -9999px; }

#submenu li.parent:hover ul {
  left: 90px;          
} 
```

这个小提琴[http://jsfiddle.net/QEWvm/5/](http://jsfiddle.net/QEWvm/5/)显示它工作。

# symfony - Symfony2 中具有 OneToMany 关系的 Doctrine 实体返回 1 个条目，尽管 DB 中有 2 个条目

> ID：13419566
> 
> 赞同：0
> 
> 时间：2012-11-16T15:28:10.067
> 
> 标签：symfony, doctrine-orm

提前感谢任何知道答案的人，因为这个问题让我想伤害小猫。

在 Symfony2 中，我有一个如下所示的 Doctrine 实体。

```
namespace Product\ProductCoreBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\Cache\ArrayCache;
use Doctrine\Common\Persistence\PersistentObject;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="item")
 * @ORM\Entity(repositoryClass="Product\ProductCoreBundle\Repositories\ProductRepository")
 */
class Product extends PersistentObject
{
    /**
     * 
     * @var ArrayCollection
     * @ORM\OneToMany(targetEntity="Product\ProductCoreBundle\Entity\ItemPrice", mappedBy="product", fetch="EAGER")
     */
    protected $prices;

    public function __construct() {
        $this->prices = new ArrayCollection();
    }
} 
```

这是非常非常精简的，只包括有问题的项目。$prices 应该是与我们涵盖的所有区域（GBP、EUR 等）相关的所有价格的数组，并且 ItemPrice 实体的设置如下：

```
namespace Product\ProductCoreBundle\Entity;

use Doctrine\Common\Persistence\PersistentObject;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="itemprice")
 * @ORM\Entity(repositoryClass="Product\ProductCoreBundle\Repositories\ItemPriceRepository")
 */
class ItemPrice extends PersistentObject
{
    /**
     * The Product that this price is for.
     * @var Product
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="prices")
     * @ORM\JoinColumn(name="item_code", referencedColumnName="item_code")
     */
    protected $product;
} 
```

然后我做一个：

```
$pr = $this->getDoctrine()->getRepository('MPProductProductCoreBundle:Product');
$product = $pr->findByPublicId({some_id}); 
```

但我只取回产品和一个价格条目。当我查看 Symfony 调试控制台并获取已执行的查询并针对数据库执行它时，我得到了 2 个不同语言环境的 2 个价格，就像我应该做的那样。

我现在真的坚持要解决这个问题。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:26:28.357

事实证明，解决这个问题非常简单。我们有一个数据库，商品与商品价格分开存储，因为我们支持不同国家/地区的不同价格。在商品价格实体中，商品代码被设置为该实体的 ID。因此，实体抱怨数据库中有 2 行具有相同的“ID”，因此只返回其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:44:00.653

当您删除该`fetch="EAGER"`选项时。是同一个问题吗？

# unix - 从 Cray Fortran 获取当前主机名

> ID：13419569
> 
> 赞同：2
> 
> 时间：2012-11-16T15:28:26.760
> 
> 标签：unix, fortran, cray

任何人都知道如何从 Cray Fortran 程序中获取当前主机名？我基本上想要 UNIX 的输出`gethostname()`。在浏览 Craydocs 页面后，我发现 PXF* 函数似乎不包含此信息。

威拉万

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:57:25.747

Cray Fortran 在现代 Fortran 功能方面遥遥领先。您可以调用`gethostname()`Fortran 2003 的使用 C 互操作性功能。名称将以空值结尾。您也可以使用`GET_ENVIRONMENT_VARIABLE`Fortran 2003 中的内在子例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:44:12.417

尝试使用[PXFGETENV](https://fs.hlrs.de/projects/craydoc/docs_merged/man/pxfm/74/cat3/pxfgetenv.3f.html)获取`HOSTNAME`环境变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T01:55:11.413

由于所有 Cray 机器都有 MPI，因此您可以使用 Fortran 任何方言中的 MPI_Get_processor_name。

# android - ActionBarSherlock Tabs+Fragments+MapView

> ID：13419571
> 
> 赞同：1
> 
> 时间：2012-11-16T15:28:29.973
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

实际上我有 2 个片段，一个是菜单，另一个是内容片段。现在我需要将谷歌地图添加到内容片段。我为 ABS 添加了谷歌地图插件。但是如何在片段中使用它。我可以

```
public class MapActivity extends SherlockMapActivity 
```

但是如何让它在一个`Fragment`

喜欢：`public class MapFragment extends SherlockMapFragment`

实际上我想在一个片段中使用两个选项卡（比如片段 B）并在一个选项卡中显示一些文本视图，在另一个片段中显示地图视图。我有 FragmentActivy (Home)，它有两个片段 A 和 B。A 是滑动菜单，B 是内容菜单。

是否可以在一个片段中显示两个选项卡并在两个选项卡中使用两种不同的布局？

我不能`extends SherlockMapActivity`，因为我需要在`Fragment`:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:32:19.800

MapViews 不能作为片段布局的一部分运行。只要我知道，没有图书馆会给你。

虽然，有一个 hack 可以让您将 MapView 放入片段中，但它更详细一点。

你可以看看这里

[http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:47:19.883

您是否按照[此处](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)的说明尝试过？

# c# - 如何将资源从 .resx 保存到硬盘？

> ID：13419572
> 
> 赞同：1
> 
> 时间：2012-11-16T15:28:31.510
> 
> 标签：c#, .net, resources, resx

我有一个带有标准`main.resx`文件的 Windows 窗体项目，其中`.ecfg`保存了一个文件（配置文件）。

如何将此文件提取到硬盘驱动器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:51:18.980

检查资源文件上的命名空间。通常它们被放入 Properties 命名空间中。然后，您可以像这样访问该文件：

```
byte[] b = Properties.Main.Something;    //Something being the name of the resource
System.IO.File.WriteAllBytes(@"C:\temp\yourfile.ecfg", b); 
```

# python - 在 linux 或 unix 上的 finder 或 explorer 中打开文件

> ID：13419576
> 
> 赞同：0
> 
> 时间：2012-11-16T15:28:44.810
> 
> 标签：python

我没有任何 Mac OSx 或 Linux 机器，但我想实现从选定文件路径打开资源管理器等功能。

例如

```
import subprocess
subprocess.Popen('explorer "E://temp//"') 
```

上面的代码打开一个指定路径的 Windows 资源管理器，Mac 或 Linux 怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:35:02.793

看起来您可以[`xdg-open`](http://portland.freedesktop.org/xdg-utils-1.0/xdg-open.html)在 linux 和`open`OS-X 上使用。

例如

```
subprocess.Popen(['xdg-open','/home/me/otherdir']) 
```

或者

```
subprocess.Popen(['open','/home/me/otherdir']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:35:51.173

您可以使用[桌面包](http://pypi.python.org/pypi/desktop)（尤其是它的`open`功能）来处理特定于操作系统的细节。它应该可以在 Linux、Windows 和 OS X 上运行。

如果您想自己执行此操作，则可以：

*   `xdg-open`在 Linux 上启动；
*   `open`在 OS X 上启动；
*   `os.startfile`在 Windows 上使用。

# joomla - 如何将登录用户添加到 Joomla 2.5 用户组？

> ID：13419579
> 
> 赞同：3
> 
> 时间：2012-11-16T15:29:12.873
> 
> 标签：joomla, joomla2.5

当我们的一个“注册”用户下订单时，我们有一个插件可以成功地将他们添加到另一个名为“客户”的用户组。这在使用`JUserHelper::addUserToGroup()`.

问题是即使用户记录已正确更新，但他们已经登录，因此他们被迫注销并重新登录以获得所需的必要 ACL。

我已经搜索了所有 jUser 代码和文档，但找不到更改由`$user =& JFactory::getUser();`.

我希望答案对于比我更了解 Joomla MVC 的人来说可能是显而易见的，但我的脑海里正沉浸在我读过的所有代码中，试图找到一种方法来实现这一点。

**更新：**

Lodder 下面的回答在技术上有效，但是虽然“用户组”实际上正在更新，但 AuthGroups 和 AuthLevels 却没有。运行我的代码后，$user 对象确实显示了其中的组，但在对象的更下方，

```
 [_authGroups:protected] => Array
            (
                [0] => 1
                [1] => 2
            )

        [_authLevels:protected] => Array
            (
                [0] => 1
                [1] => 1
                [2] => 2
            ) 
```

在当前会话中似乎无法更改它，因为它都受到保护，并且它更新的唯一位置是 user.php at `$identities = $this->getAuthorisedGroups();`，它只在第一次遇到它时执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:52:28.230

我发现了这个，但我不能 100% 确定它是否适用于你的情况。最好试一试：

```
$user = JFactory::getUser();
if ($user->id == $user['id']){
   $session = JFactory::getSession();
   $session->set('user', new JUser($user->id));
} 
```

众所周知，它可以为少数人工作。

让我知道它是否有效，如果没有，我会看看我还能找到什么。

# sql - CodeIgniter SQL 构建

> ID：13419580
> 
> 赞同：0
> 
> 时间：2012-11-16T15:29:15.540
> 
> 标签：sql, codeigniter

我正在研究“发送我的密码”类型的功能，我的 sql 不好或者我的 codeigniter 不好。表单验证得很好，模型中的函数被调用，但没有任何结果。我必须检查提交的电子邮件地址的两个表，因为我们将用户和管理员帐户分成两个表。

控制器代码：

```
 public function send() {
    $this->load->library('form_validation');
    $this->form_validation->set_rules('email', 'Email', 'required|valid_email|trim');
    $this->form_validation->set_error_delimiters('<div class="alert alert-error">', '</div><br />');

    if ($this->form_validation->run()) {
        // Check For A Matching Email
        $this->load->model('signin_model');
        if ($this->signin_model('email_verify')) {

            // There Was A Match
            echo "THERE WAS A MATCH";
        } else {

            // No Match
            echo "NO MATCH";
        }

    } else {

        // Form Did Not Validate
        $this->load->view('signin/forgot');
    }
} 
```

型号代码：

```
public function email_verify() {
    $sql = "SELECT * FROM admin, staff WHERE staff_email = ? OR admin_email = ?";
    $email = $this->input->post('email');
    $query = $this->db->query($sql, $email, $email);

    if($query->num_rows() == 1) {
        return true;
    } else {
        return false;
    }
} 
```

错误：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1

SELECT * FROM admin, staff WHERE staff_email = 'dsfsdf@test.com' OR admin_email = 
```

**更新**：我现在使用的固定查询是：

```
$sql = "SELECT admin_id, first_name FROM admin WHERE admin_email = ? UNION SELECT staff_id, first_name FROM staff WHERE staff_email = ?"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:59:11.873

```
 $query = $this->db->query($sql, array($email, $email)); 
```

试试看。应该修复 SQL 错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:45:57.053

`$this->signin_model`不是函数。它是一个对象。要调用模型函数，请将函数作为对象的属性调用：

```
$this->signin_model->email_verify() 
```

**编辑**：第二个参数`$this->db->query`应该是一个数组。

```
$query = $this->db->query($sql, array($email, $email)); 
```

**编辑 2**：如果 2 个表之间没有链接，那么 a`JOIN`将无济于事。你可以试试a `UNION`。

```
$sql = "SELECT * FROM staff WHERE staff_email = ? ".
    "UNION ALL SELECT * FROM admin WHERE admin_email = ?"; 
```

# asp.net - Umbraco 将 '/login.aspx?ReturnUrl=' 写入链接

> ID：13419592
> 
> 赞同：1
> 
> 时间：2012-11-16T15:30:01.103
> 
> 标签：asp.net, umbraco

我最近推送了一个 Umbraco 站点，即将站点从开发服务器移至实时服务器。数据库已就位，站点已启动，但没有加载任何样式表或图像。

/login.aspx?ReturnUrl=%2fcss%2fmain.css%3fver%3d16&ver=16 404（未找到）

Umbraco 似乎在请求文件时将“/login.aspx?ReturnUrl=”添加到链接中。

我不确定发生了什么，但这可能是某种权限问题吗？

提前致谢！

编辑

此外，我无法访问 /umbraco/、/umbraco/default.aspx 作品，但没有样式，并且生成的管理面板没有字段。无论问题是什么，它似乎都在影响着一切。

最终编辑

解决了，是权限。当我设置它时，我复制了类似构建的权限（我认为它正在工作）。那时我注意到 Plesk IIS 用户未设置为读取，但我忽略了这一点并继续进行。

应该相信我自己的判断，几个小时后回来，将其更改为阅读和 BOOM。网站去。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:39:19.777

您的站点配置为使用身份验证，这意味着您站点上的部分或全部内容不可供未经身份验证的用户查看。如果用户未通过身份验证，则 Umbraco 会将他们重定向到登录页面 (login.aspx)。

你可以在这里做各种各样的事情。前一周我在 Our Umbraco 论坛上讨论了一个关于身份验证的问题：

[http://our.umbraco.org/forum/developers/api-questions/35957-Forms-Authentication-Loginaspx-page-has-not-styling-applied](http://our.umbraco.org/forum/developers/api-questions/35957-Forms-Authentication-Loginaspx-page-has-not-styling-applied)

解决这个问题的方法（在论坛问题中讨论）是在 Umbraco 中使用公共访问配置。这在这里讨论：

[http://our.umbraco.org/wiki/reference/umbraco-client/context-menus/public-access](http://our.umbraco.org/wiki/reference/umbraco-client/context-menus/public-access)

这允许您在站点上配置基于角色（或基于单个用户）的权限，因此您可以控制可以在站点上看到的用户角色（或用户）。

# email - 如何阻止电子邮件帐户在 Parallels Plesk 中接收邮件？

> ID：13419594
> 
> 赞同：0
> 
> 时间：2012-11-16T15:30:13.493
> 
> 标签：email, plesk, forward

我有一个捕获所有电子邮件 email@domain.com 但希望拒绝发送到某些被垃圾邮件轰炸的地址的电子邮件。在 CPanel 中，我可以设置一封电子邮件，然后转发到“:fail: No such person at this address”，但是对于 Plesk 11，这似乎是不可能的。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:45:22.863

在域级别的 plesk 中，您可以为发送给不存在的用户的邮件设置一些自定义消息的退回，或设置转发到某个邮箱，在此邮箱上设置自动回复和垃圾邮件过滤器。

# c# - 使用前缀、后缀和分隔符连接字符串的最快方法

> ID：13419599
> 
> 赞同：13
> 
> 时间：2012-11-16T15:30:22.007
> 
> 标签：c#, .net, string

**更新**

按照[奶酪先生的回答](https://stackoverflow.com/a/13425111/659190)，似乎

```
public static string Join<T>(string separator, IEnumerable<T> values) 
```

重载`string.Join`从类的使用中获得了它的优势`StringBuilderCache`。

有人对本声明的正确性或理由有任何反馈吗？

可以自己写吗

```
public static string Join<T>(
    string separator,
    string prefix,
    string suffix,
    IEnumerable<T> values) 
```

使用`StringBuilderCache`类的函数？

* * *

在提交[我对这个问题的答案](https://stackoverflow.com/a/13341782/659190)后，我开始分析哪些是表现最好的答案。

我在控制台类中编写了这段代码`Program`来测试我的想法。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;

class Program
{
    static void Main()
    {
        const string delimiter = ",";
        const string prefix = "[";
        const string suffix = "]";
        const int iterations = 1000000;

        var sequence = Enumerable.Range(1, 10).ToList();

        Func<IEnumerable<int>, string, string, string, string>[] joiners =
            {
                Build,
                JoinFormat,
                JoinConcat
            };

        // Warmup
        foreach (var j in joiners)
        {
            Measure(j, sequence, delimiter, prefix, suffix, 5);
        }

        // Check
        foreach (var j in joiners)
        {
            Console.WriteLine(
                "{0} output:\"{1}\"",
                j.Method.Name,
                j(sequence, delimiter, prefix, suffix));
        }

        foreach (var result in joiners.Select(j => new
                {
                    j.Method.Name,
                    Ms = Measure(
                        j,
                        sequence,
                        delimiter,
                        prefix,
                        suffix,
                        iterations)
                }))
        {
            Console.WriteLine("{0} time = {1}ms", result.Name, result.Ms);
        }

        Console.ReadKey();
    }

    private static long Measure<T>(
        Func<IEnumerable<T>, string, string, string, string> func,
        ICollection<T> source,
        string delimiter,
        string prefix,
        string suffix,
        int iterations)
    {
        var stopwatch = new Stopwatch();

        stopwatch.Start();
        for (var i = 0; i < iterations; i++)
        {
            func(source, delimiter, prefix, suffix);
        }

        stopwatch.Stop();

        return stopwatch.ElapsedMilliseconds;
    }

    private static string JoinFormat<T>(
        IEnumerable<T> source,
        string delimiter,
        string prefix,
        string suffix)
    {
        return string.Format(
            "{0}{1}{2}",
            prefix,
            string.Join(delimiter, source),
            suffix);
    }

    private static string JoinConcat<T>(
        IEnumerable<T> source,
        string delimiter,
        string prefix,
        string suffix)
    {
        return string.Concat(
            prefix,
            string.Join(delimiter, source),
            suffix);
    }

    private static string Build<T>(
        IEnumerable<T> source,
        string delimiter,
        string prefix,
        string suffix)
    {
        var builder = new StringBuilder();
        builder = builder.Append(prefix);

        using (var e = source.GetEnumerator())
        {
            if (e.MoveNext())
            {
                builder.Append(e.Current);
            }

            while (e.MoveNext())
            {
                builder.Append(delimiter);
                builder.Append(e.Current);
            }
        }

        builder.Append(suffix);
        return builder.ToString();
    }
} 
```

从命令行运行代码，在发布配置中，使用优化构建，我得到这样的输出。

> ...
> 
> 构建时间 = 1555ms
> 
> JoinFormat 时间 = 1715ms
> 
> JoinConcat 时间 = 1452ms

这里（对我来说）唯一的惊喜是 Join-Format 组合是最慢的。在考虑[了这个答案](https://stackoverflow.com/questions/6785/is-string-format-as-efficient-as-stringbuilder)之后，这更有意义了，输出`string.Join`正在由外部处理`StringBuilder`，`string.Format`这种方法存在固有的延迟。

沉思之后，我并不清楚如何`string.Join`才能更快。我已经阅读了它的用法，`FastAllocateString()`但我不明白如何在不调用`.ToString()`每个成员的情况下准确地预分配缓冲区`sequence`。为什么 Join-Concat 组合更快？

一旦我理解了这一点，是否有可能编写我自己的`unsafe string Join`函数，它需要额外的`prefix`和`suffix`参数，并执行“安全”的替代方案。

我已经进行了几次尝试，虽然它们起作用了，但它们并没有更快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:07:04.220

为了尝试回答您最初的问题，我认为答案在于（令人惊叹的）反射器工具。您正在使用 IEnumerable 的对象集合，这也会导致 String.Join 方法中相同类型的重载被调用。有趣的是，此函数与您的 Build 函数非常相似，因为它枚举集合并使用字符串构建器，这意味着它不需要提前知道所有字符串的长度。

```
public static string Join<T>(string separator, IEnumerable<T> values)
{

    if (values == null)
    {
        throw new ArgumentNullException("values");
    }
    if (separator == null)
    {
        separator = Empty;
    }
    using (IEnumerator<T> enumerator = values.GetEnumerator())
    {
        if (!enumerator.MoveNext())
        {
            return Empty;
        }
        StringBuilder sb = StringBuilderCache.Acquire(0x10);
        if (enumerator.Current != null)
        {
            string str = enumerator.Current.ToString();
            if (str != null)
            {
                sb.Append(str);
            }
        }
        while (enumerator.MoveNext())
        {
            sb.Append(separator);
            if (enumerator.Current != null)
            {
                string str2 = enumerator.Current.ToString();
                if (str2 != null)
                {
                    sb.Append(str2);
                }
            }
        }
        return StringBuilderCache.GetStringAndRelease(sb);
    }
} 
```

它似乎在用缓存的 StringBuilders 做一些我不完全理解的事情，但这可能是由于一些内部优化它更快的原因。当我在笔记本电脑上工作时，我之前可能已经被电源管理状态更改所困扰，所以我重新运行了包含“BuildCheat”方法（避免字符串生成器缓冲区容量加倍）的代码，并且时间非常接近String.Join(IEnumerable)（也在调试器之外运行）。

构建时间 = 1264ms

加入格式 = 1282 毫秒

JoinConcat = 1108ms

BuildCheat = 1166ms

```
private static string BuildCheat<T>(
    IEnumerable<T> source,
    string delimiter,
    string prefix,
    string suffix)
{
    var builder = new StringBuilder(32);
    builder = builder.Append(prefix);

    using (var e = source.GetEnumerator())
    {
        if (e.MoveNext())
        {
            builder.Append(e.Current);
        }

        while (e.MoveNext())
        {
            builder.Append(delimiter);
            builder.Append(e.Current);
        }
    }

    builder.Append(suffix);
    return builder.ToString();
} 
```

问题的最后一部分的答案是您提到使用 FastAllocateString 的地方，但是正如您所看到的，它没有在上面通过 IEnumerable 的重载方法中调用，它仅在直接使用字符串时调用，并且它肯定会循环字符串数组在创建最终输出之前总结它们的长度。

```
public static unsafe string Join(string separator, string[] value, int startIndex, int count)
{
    if (value == null)
    {
        throw new ArgumentNullException("value");
    }
    if (startIndex < 0)
    {
        throw new ArgumentOutOfRangeException("startIndex", Environment.GetResourceString("ArgumentOutOfRange_StartIndex"));
    }
    if (count < 0)
    {
        throw new ArgumentOutOfRangeException("count", Environment.GetResourceString("ArgumentOutOfRange_NegativeCount"));
    }
    if (startIndex > (value.Length - count))
    {
        throw new ArgumentOutOfRangeException("startIndex", Environment.GetResourceString("ArgumentOutOfRange_IndexCountBuffer"));
    }
    if (separator == null)
    {
        separator = Empty;
    }
    if (count == 0)
    {
        return Empty;
    }
    int length = 0;
    int num2 = (startIndex + count) - 1;
    for (int i = startIndex; i <= num2; i++)
    {
        if (value[i] != null)
        {
            length += value[i].Length;
        }
    }
    length += (count - 1) * separator.Length;
    if ((length < 0) || ((length + 1) < 0))
    {
        throw new OutOfMemoryException();
    }
    if (length == 0)
    {
        return Empty;
    }
    string str = FastAllocateString(length);
    fixed (char* chRef = &str.m_firstChar)
    {
        UnSafeCharBuffer buffer = new UnSafeCharBuffer(chRef, length);
        buffer.AppendString(value[startIndex]);
        for (int j = startIndex + 1; j <= num2; j++)
        {
            buffer.AppendString(separator);
            buffer.AppendString(value[j]);
        }
    }
    return str;
} 
```

只是出于兴趣，我将您的程序更改为不使用泛型，并使 JoinFormat 和 JoinConcat 接受一个简单的字符串数组（我无法轻易更改 Build，因为它使用枚举器），因此 String.Join 使用上面的其他实现。结果令人印象深刻：

JoinFormat 时间 = **386ms**

JoinConcat 时间 = **226ms**

也许您可以找到一种解决方案，既可以充分利用快速字符串数组，又可以使用通用输入……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:30:17.620

为了提供一些额外的信息，我使用 VS 2012 在我的笔记本电脑（Core i7-2620M）上运行了上面的代码，并查看框架 4.0 和 4.5 之间是否有任何变化。第一次运行是针对 .Net Framework 4.0 编译的，然后是 4.5。

**框架 4.0**

构建时间 = 1516ms

JoinFormat 时间 = 1407ms

JoinConcat 时间 = 1238ms

**框架 4.5**

构建时间 = 1421ms

JoinFormat 时间 = 1374ms

JoinConcat 时间 = 1223ms

很高兴看到新框架似乎更快了一些，但很好奇的是，由于 JoinFormat 的缓慢性能，我无法重现您的原始结果。您能否提供有关您的构建环境和硬件的详细信息？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T15:34:24.793

尝试在方法中使用[StringBuilder.AppendFormat](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.appendformat.aspx)`Build<T>`而不是`StringBuilder.Append`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-01-11T20:52:07.787

最简单的解决方法（为字符串添加前缀和后缀）：

```
string[] SelectedValues = { "a", "b", "c" };
string seperatedValues = string.Join("\n- ", SelectedValues);
seperatedValues = "- " + seperatedValues; 
```

输出：
-a
-b
-c

您可以使用字符串生成器

# java - 无法运行 Rhino 示例：缺少软件包

> ID：13419600
> 
> 赞同：-2
> 
> 时间：2012-11-16T15:30:23.370
> 
> 标签：java, windows, rhino

这可能是一个愚蠢的问题，但我刚刚在我的 Windows 7 机器上下载了[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)，我正在尝试运行一些示例。然而，它说`package org.mozilla.javascript does not exists`

这是确切的上下文（通过 Git Bash 运行）

```
Mike@WORK-MACHINE /c/users/mike/documents/rhino/examples
$ javac RunScript.java
RunScript.java.7: package org.mozilla.javascript does not exist
... Error stuff ...
6 errors 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:45:05.317

您可能错过了类路径中的目录。尝试以下操作：

`java -cp /some/dir/ RunScript.java`

其中`/som/dir/`包含您需要的包的定义。

# java - 我的活动类无法查看我的布局资源

> ID：13419602
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:30:48.313
> 
> 标签：java, android, android-layout, android-activity, android-xml

我正在做一个计算器项目。我实施工作的班级看不到 XML 布局。当我使用`setContentView(R.layout.)`时，它看不到任何 xml 文件。尽管欢迎类工作正常并将其内容视图设置为欢迎 XML。

谁能告诉我为什么这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:33:29.837

您可以尝试以下几件事：

*   首先，检查 XML 错误。如果有任何 XML 错误，R 将不会生成。
*   然后，尝试删除您的 bin 文件夹并执行 Project->Clean。
*   另外，请尝试`import my.package.name.R`在您的活动标题中添加。确保您*没有*使用`import Android.R`.

让我知道这些是否有效。

# c# - Wix 卸载整个网站而不仅仅是应用程序

> ID：13419604
> 
> 赞同：2
> 
> 时间：2012-11-16T15:30:49.250
> 
> 标签：c#, .net, wix, windows-installer

我在下面有这个，但我想更改它，以便将 Web 应用程序安装到现有网站。目前它会安装网站和所有文件，但在卸载时也会删除所有文件，我只想将文件添加为 Web 应用程序。我该怎么做呢？

```
<?xml version="1.0" encoding="utf-8" ?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

  <Fragment>
    <DirectoryRef Id="INSTALLLOCATION">
      <Component Id="C_IISWebsite" Guid="{138B3868-24E8-4D7B-8793-0D254AF349D4}" KeyPath="yes">
        <!-- This does not create a user, it's just an object that's referenced by the WebAppPool component -->
        <util:User Id="WebAppPoolUser" CreateUser="no" Name="[WEB_APP_POOL_IDENTITY_USERNAME]"
                   Password="[WEB_APP_POOL_IDENTITY_PWD]" Domain="[WEB_APP_POOL_IDENTITY_DOMAIN]"/>

        <!-- The "Identity" attritbute below needs to be set to "other" to use the util:User defined above -->
        <iis:WebAppPool Id="WebAppPool" Name="[WEB_APP_POOL_NAME]" Identity="other" User="WebAppPoolUser"/>

        <iis:WebSite Id="DefaultWebSite" Description="[WEBSITE_NAME]" Directory="INSTALLLOCATION" >
          <iis:WebAddress Id="AllUnassigned" Port="80"/>
        </iis:WebSite>

        <iis:WebVirtualDir Id="My.VirtualDir" Alias="mdxWebSite" Directory="INSTALLLOCATION" WebSite="DefaultWebSite">
          <iis:WebApplication Id="Application" Name="mdxWebSite" WebAppPool="WebAppPool" />
        </iis:WebVirtualDir>
      </Component>
    </DirectoryRef>
  </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:48:53.467

我认为您的问题与安装程序不知道要卸载什么有关，因此删除了默认或父网站。看看[John Robbins 的这个示例](http://www.wintellect.com/CS/blogs/jrobbins/archive/2011/02/23/web-application-installer-in-wix.aspx)，关键是将配置存储在注册表中，以便卸载知道要删除什么，在你的`<Component> ... </Compoonent>`元素中执行以下操作，不要忘记插入适当的名称/数据和指导。

```
<!--The component for installer properties I need to save so they can be used on the uninstall.-->
<Component Id="SetupRegistryValues" Guid="{...}" KeyPath="yes" >
<RegistryValue Root="HKLM" Key="SOFTWARE\CompanyName\ProductName\Install" Name="WebAppName" Value="[WEB_APP_NAME]" Type="string" />
<RegistryValue Root="HKLM" Key="SOFTWARE\CompanyName\ProductName\Install" Name="WebSiteName" Value="[WEBSITE_NAME]" Type="string" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:55:47.970

如果您想将 Web 应用程序和虚拟目录安装到现有网站，并且不想在卸载产品时删除您的网站；然后在单独的片段下定义您的网站（不在任何组件内）。如下：

```
 <Fragment>
    <iis:WebSite Id="XYZ_WebSite" Description="Default Web Site">
      <iis:WebAddress Id="AllUnassigned" Port="80" />
    </iis:WebSite>
  </Fragment> 
```

现在定义组件以部署您的 Web 应用程序\Vdirs 并从节点引用此站点 ID，如下所示：

```
<iis:WebVirtualDir Id="XYZ_VirtualDirectory_A" Alias="MyXYZ_V_ DIR" Directory="[MYDIR]" WebSite="XYZ_WebSite"> 
```

# image-processing - 如何将 x,y 像素映射到世界坐标

> ID：13419605
> 
> 赞同：1
> 
> 时间：2012-11-16T15:30:49.593
> 
> 标签：image-processing, opencv

在我的项目中，我以像素为单位计算 x,y，Z 以毫米为单位计算与相机的距离。所以我想利用深度并计算 x,y,z。

谁能告诉我我该怎么做？

我有以下信息：

1.  从图像中获得的 x,y 像素
2.  与相机的距离以及与相机和物体的物体距离不断变化，因为我正在从不同的距离制作图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:00:23.520

如果图像坐标中有 x,y、相机矩阵和世界坐标中有 z，那么您需要将图像坐标放入同质向量中，乘以相机矩阵的倒数，然后乘以 z_world 坐标。一开始可能不直观的是，您在世界坐标中的单位并不重要。乘以相机矩阵的倒数后，您定义了 x/z 比率，它是无单位的。您通过乘以 z_world 来给出结果单位。你可以用毫米、英寸、英里等单位来测量它，你得到的向量将具有相同的单位。

```
cv::Matx31f world_cord(x_im,y_im,1);         //here measured in pixels
world_cord = camera_matrix.inv()*world_cord; //representing a ratio x/z,y/z
world_cord *= z_world;                       //now x,y,z are measured in units of z_world 
```

world_cord 现在包含 x_world,y_world,z_world。

# php - 如果将 php 保存为 html 文件，则让 Aptana 识别 php

> ID：13419607
> 
> 赞同：0
> 
> 时间：2012-11-16T15:30:53.633
> 
> 标签：php, configuration, aptana3

我正在开发这个项目，该项目使用大量保存为 html 文件的 php 文件。我无法真正更改文件类型，所以请不要这样做。![在此处输入图像描述](../Images/54fbbcdc287fb85f5b02361a11d2b395.png)

有没有办法可以配置 Aptana Studios 以识别 html 文件中的 php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:36:24.573

右键单击项目资源管理器中的文件。然后选择打开方式 -> 其他 ... -> PHP 源代码编辑器

或者，如果您想要更永久的解决方案。转到 Preferences -> General -> Editors -> File Associations，然后选择 *.html 并添加 PHP Source Editor 并将其设为默认值。

# java - 从其他网站获取数据

> ID：13419611
> 
> 赞同：2
> 
> 时间：2012-11-16T15:31:07.937
> 
> 标签：java, jsp, web

我正在用 jsp 制作一个基于 Web 的应用程序，我需要在其中从其他网站获取数据。我不知道该怎么做。我在 scrapperwiki 中进行了搜索，但没有任何与 jsp 相关的内容。

那么如何使用jsp从其他网站抓取数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:24:23.270

观察网页的来源并解析它们。有一个 [项目](http://jsoup.org/)使它变得容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:16:42.773

最简单的方法是使用 URLConnection：

```
<%@ page language="Java" import="java.net.*,java.io.*"%>  
<%  
        try {  
                URL url = new URL("http://other-website/url/test.txt");  
                URLConnection conn = url.openConnection();  

                conn.setDoInput(true);  
                conn.setDoOutput(false);  
                BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));  
                String line=null;  
                line = br.readLine();  
                while ( line != null ) {  
                        %>  
                        <%=line%>  
                        <BR>  
                        <%  
                        line = br.readLine();     
                }  
                br.close();  
        } catch(Exception e) {  
                e.printStackTrace();  
        }  
%> 
```

当然，最好将此代码放在 java 控制器 servlet 中，而不是将其用作 JSP 中的 scriptlet，或者使用任何 MVC 框架而不是纯 Servlet + JSP 更好。

# c# - 单声道 ASP.NET 异常

> ID：13419612
> 
> 赞同：4
> 
> 时间：2012-11-16T15:31:09.717
> 
> 标签：c#, asp.net, asp.net-mvc, mono

有没有其他人在单声道 ASP.NET 上的 xsp 上运行过这个错误？我认为是和缓存有关，但是Web.config文件中没有提到缓存，所以我没有刻意打开任何东西。

这只发生在正常运行几天后，如果服务器重新启动，它会自行修复。

```
Status Code: InternalServerError
Server Error in '/' Application
The given key was not present in the dictionary.

Description: HTTP 500\. Error processing request.

Stack Trace:

System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
  at System.Collections.Generic.Dictionary`2[System.Collections.Generic.LinkedListNode`1[System.Web.Caching.CacheItem],System.String].get_Item (System.Collections.Generic.LinkedListNode`1 key) [0x00000] in <filename unknown>:0 
  at System.Web.Caching.CacheItemLRU.EvictIfNecessary () [0x00000] in <filename unknown>:0 
  at System.Web.Caching.Cache.SetItemTimeout (System.Web.Caching.CacheItem ci, DateTime absoluteExpiration, TimeSpan slidingExpiration, System.Web.Caching.CacheItemRemovedCallback onRemoveCallback, System.Web.Caching.CacheItemUpdateCallback onUpdateCallback, System.String key, Boolean doLock) [0x00000] in <filename unknown>:0 
  at System.Web.Caching.Cache.Insert (System.String key, System.Object value, System.Web.Caching.CacheDependency dependencies, DateTime absoluteExpiration, TimeSpan slidingExpiration, CacheItemPriority priority, System.Web.Caching.CacheItemRemovedCallback onRemoveCallback, System.Web.Caching.CacheItemUpdateCallback onUpdateCallback, Boolean doLock) [0x00000] in <filename unknown>:0 
  at System.Web.Caching.Cache.Insert (System.String key, System.Object value, System.Web.Caching.CacheDependency dependencies, DateTime absoluteExpiration, TimeSpan slidingExpiration, CacheItemPriority priority, System.Web.Caching.CacheItemRemovedCallback onRemoveCallback) [0x00000] in <filename unknown>:0 
  at System.Web.SessionState.SessionInProcHandler.InsertSessionItem (System.Web.SessionState.InProcSessionItem item, Int32 timeout, System.String id) [0x00000] in <filename unknown>:0 
  at System.Web.SessionState.SessionInProcHandler.SetAndReleaseItemExclusive (System.Web.HttpContext context, System.String id, System.Web.SessionState.SessionStateStoreData item, System.Object lockId, Boolean newItem) [0x00000] in <filename unknown>:0 
Version information: Mono Runtime Version: 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2); ASP.NET Version: 4.0.30319.1 
```

这是项目的 web.config 文件：

```
 <?xml version="1.0"?>
 <!--
 The settings that can be used in this file are documented at 
 http://www.mono-project.com/Config_system.web and 
 http://msdn2.microsoft.com/en-us/library/b5ysx397.aspx
 -->
 <configuration>
   <configSections>
     <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
       <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
         <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
       </sectionGroup>
     </sectionGroup>
   </configSections>
   <system.web>
     <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
     <compilation defaultLanguage="C#" debug="false">
       <assemblies>
         <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
         <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
         <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
       </assemblies>
     </compilation>
     <customErrors mode="Off">
     </customErrors>
     <pages>
       <controls>
         <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
         <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
       </controls>
       <namespaces>
         <add namespace="System.Web.Mvc" />
         <add namespace="System.Web.Mvc.Ajax" />
         <add namespace="System.Web.Mvc.Html" />
         <add namespace="System.Web.Routing" />
         <add namespace="System.Linq" />
         <add namespace="System.Collections.Generic" />
       </namespaces>
     </pages>
     <authorization>
       <allow users="*" />
     </authorization>
     <httpHandlers>
       <remove verb="*" path="*.asmx" />
       <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
       <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
       <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false" />
       <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
     </httpHandlers>
     <httpModules>
       <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
       <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
     </httpModules>
     <trace enabled="false" localOnly="true" pageOutput="false" requestLimit="10" traceMode="SortByTime" />
     <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
   </system.web>
   <system.codedom>
     <compilers>
       <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
         <providerOption name="CompilerVersion" value="v4.0" />
         <providerOption name="WarnAsError" value="false" />
       </compiler>
       <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
         <providerOption name="CompilerVersion" value="v4.0" />
         <providerOption name="OptionInfer" value="true" />
         <providerOption name="WarnAsError" value="false" />
       </compiler>
     </compilers>
   </system.codedom>
   <system.web.extensions />
   </configuration> 
```

这是有异常的控制器：

```
public class APIController : Controller
{
    public string Index()
    {
        return "Hello";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:08:25.607

您可以尝试禁用缓存，如此[处](https://stackoverflow.com/questions/3180513/disable-asp-net-cache)所述。

至少它会显示问题是否真的与此有关。

# django - 对 Django 项目进行版本控制有意义吗？

> ID：13419614
> 
> 赞同：1
> 
> 时间：2012-11-16T15:31:20.777
> 
> 标签：django

通常一个 Django 项目代表一个网站。如果它不断更新，那么为项目提供版本是否有意义？版本控制什么时候有用？

PS我问的不是版本控制，而是每个版本的编号，如“1.0.5”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:06:14.330

就像@Timmy O'Mahony 在评论中指出的那样，git-flow 或 hg-flow 就是这样做的。数字版本的问题在于它在开发过程中变得非常复杂非常快。当您发布产品/网站时，它们绝对有用，因为最终用户比较版本非常简单。然而，在开发中，您可能会分阶段处理您的项目 - 开发、测试、登台和生产阶段。因此，引入编号版本系统将使过程复杂化。

想象一下，你正在为 v1.0 做一些事情。然后它被推送到测试，然后是分阶段。同时，您可能正在开发 v1.1 的新功能。然而，在 v1.0 的登台过程中，有人发现了一个错误。那么既然您正在开发 v1.1，那么该错误修复是否会计入 v1.1 或 v1.0。请记住，1.0 尚未发布...

如您所见，它可能会变得非常混乱，因此更好的工作方式是遵循 git-flow 类型的工作流程，其中每个分支都有其修订版，如果需要，可以使用这些修订版来引用一些代码更改而不是版本号。

# python-2.7 - OpenERP 自动回复邮件

> ID：13419618
> 
> 赞同：2
> 
> 时间：2012-11-16T15:31:27.743
> 
> 标签：python-2.7, openerp, erp

我已经安装了两个版本的 OpenERP。一个在我的本地机器上，另一个在远程机器上。我今天尝试为我的客户在收到的电子邮件中配置自动回复电子邮件。

因此，在**设置 --> 配置 --> 传入邮件服务器中，我设置***了对传入邮件执行*的操作：

*   **创建新记录**：crm.lead
*   **服务器操作**：auto_reply

当然，我创建了**auto_reply**服务器操作并设置了以下字段：

*   **动作名称**：auto_reply
*   **对象**：crm.lead
*   **行动类型**：电子邮件
*   **顺序**：5
*   **条件**：真
*   **电子邮件地址**：object.email_from
*   **主题**：哈哈哈哈哈哈
*   **留言**：哈哈哈哈哈哈

在我的本地机器上，这工作得很好。我总是收到自动回复电子邮件。但是，在远程机器上，自动回复不适用于这种情况，但是当我将静态电子邮件（例如 example@gmail.com）放入*电子邮件地址*字段而不是 *object.email_from* 时可以正常工作。

我查看了远程机器上的日志文件，发现以下错误：

```
2012-11-16 14:46:23,288 7968 ERROR ? fetchmail: Failed to fetch mail from imap server Google server
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.6/openerp/addons/fetchmail/fetchmail.py", line 195, in fetch_mail
    action_pool.run(cr, uid, [server.action_id.id], {'active_id': res_id, 'active_ids':[res_id]})
  File "/usr/lib/pymodules/python2.6/openerp/addons/base/ir/ir_actions.py", line 685, in run
    res_email = ir_mail_server.send_email(cr, uid, msg)
  File "/usr/lib/pymodules/python2.6/openerp/addons/base/ir/ir_mail_server.py", line 382, in send_email
    assert smtp_to_list, "At least one valid recipient address should be specified for outgoing emails (To/Cc/Bcc)"
AssertionError: At least one valid recipient address should be specified for outgoing emails (To/Cc/Bcc) 
```

本地机器上的 OpenERP 版本：OpenERP Server 6.1-20121001-232851

远程机器上的 OpenERP 版本：OpenERP Server 6.1-1

因为，本地和远程机器上的不同版本我看到有些文件是不同的，例如 *ir_mail_server.py*

这是一个错误吗？有人可以指点我，如何解决问题。我在远程机器上没有完全访问权限，所以我不能在我的本地机器上安装版本作为版本。但是，我可以更改一些源代码行。这不是一个问题。

如果我用最新版本的 OpenERP覆盖*基本模块，然后运行：*

```
openerp-server -d mydb -u base 
```

因为，我已经安装了很多模块，也有很多有用的数据，这个操作有什么后果吗？谢谢你。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:11:43.147

但是，我可以访问远程机器并更新 OpenERP 服务器。使用上面的配置自动回复现在可以正常工作了。

我的新版本：`OpenERP Server 6.1-20121116-003252`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:22:11.513

从错误消息中我猜这`object.email_from`可能是空的。我建议您使用该`--debug`选项启动服务器，并 `(pdb)`提示使用以下命令检查变量

```
pp msg 
```

（提示：键入`h`以获取有关可用命令的帮助）。

# java - CATALINA_BASE/conf/Catalina/localhost/ .xml 与应用程序的 context.xml 不同

> ID：13419621
> 
> 赞同：2
> 
> 时间：2012-11-16T15:31:36.190
> 
> 标签：java, tomcat, web-applications, jndi, context.xml

我一直在 Tomcat 上运行一个 Web 应用程序，当我对应用程序（包括 context.xml）进行一些更改并重新部署它时，我开始收到一个异常：

```
javax.naming.NamingException: Cannot create resource instance
        at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:793)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
        at org.apache.naming.SelectorContext.lookup(SelectorContext.java:137)
        at javax.naming.InitialContext.lookup(InitialContext.java:392) 
```

环顾四周后，我意识到 CATALINA_BASE/conf/Catalina/localhost 中的 appname.xml 与更新后的 context.xml 不同，因此当应用程序尝试查找 jndi 资源时，它找不到任何内容。据此[，](http://pub.admc.com/howtos/tomcat/ch05.html "这") 2个文件必须完全相同。对于这种情况，我提出了 2 个解释和问题：

1.  重新部署期间存在使 appname.xml 不变的问题
2.  尽管我更改了 context.xml，但 tomcat 仍然在某处存储旧版本并使用它而不是新版本

我想知道是否有人以前见过这些问题，如果有，我真的很感激任何解决方案。或者，如果您对我的情况有其他解释和/或问题，不客气！谢谢 ：）

大号

PS：tomcat在我公司的服务器上，所以我不能直接去修改appname.xml :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:42:31.443

解释 1 是答案，重新部署中存在一个问题，它使 appname.xml 保持不变。该问题与我公司部署应用程序的方式有关：我们使用脚本删除应用程序并在 CATALINA_BASE/webapp 文件夹中添加更新版本，然后重新启动 tomcat 而不是使用 tomcat 的管理器页面。

大号

# java - Ebean 多对多查询

> ID：13419624
> 
> 赞同：9
> 
> 时间：2012-11-16T15:31:49.637
> 
> 标签：java, many-to-many, playframework-2.1, ebean

我有两个类，用户和汽车。两者都具有相互映射的多对多。

用户：

```
@Entity
public class User extends Model {

    private int year;

    @ManyToMany(cascade=CascadeType.ALL)
    private List<Car> cars;
} 
```

车：

```
@Entity
public class Car extends Model {
    @ManyToMany(mappedBy = "cars", cascade=CascadeType.ALL )
    private List<User> users;
} 
```

使用 ebean，我只想查询从 1999 年开始在他们的列表中给用户的那些汽车。我不想在 Java 代码中迭代用户的汽车列表。

我没有找到任何文档，多对多查询应该是什么样子。所以我会这样：

```
public List<Car> findCars(int year, User user) {
    return Car.find.where().eq("year", int).eq("users", user).findList();
} 
```

Ebean 可以吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T15:45:47.590

检查类似[的问题（和答案）](https://stackoverflow.com/a/11704403/1066240)

您的取景器很可能应该如下所示：

```
public List<Car> findCars(int year, User user) {
    return find.where().eq("year", year).eq("users.id", user.id).findList();
} 
```

顺便说一句，我假设您有一些`id`领域，但没有向我们展示。还要公开您的字段，因此您无需为每个字段编写 getter/setter。

# sql-server - 根据 SQL Server 中的主机业务规则动态过滤数据 - 这可行吗？

> ID：13419625
> 
> 赞同：1
> 
> 时间：2012-11-16T15:31:53.973
> 
> 标签：sql-server, filtering, large-data

首先感谢您的阅读。我有一个解决我面临的问题的方法的想法，或者更好地说是一个要求。下面是一个不真实的假设场景，但在不放弃机密信息的情况下代表了问题。

想象一个服务，它有一个非常大的数据库，其中包含居住在一个国家/地区的人，比如说，1 亿条记录。

不同的公司使用该服务来查询有关这些人的数据。正常的查询是：

*   告诉我所有 25 至 30 岁且居住在 x 市的天主教徒
*   告诉我有两个以上孩子的人
*   告诉我年收入在 10 万到 20 万之间的人
*   告诉我去年度假超过 3 次的人等等。

有一个名为“People”的大表（哇..），它包含所有 100 条记录和不同字段所需的所有属性，假设它有 40 列。（int、datetime、varchar、char 等的混合）。 ) 还有一堆静态表 (25)，主表引用这些表来获取描述或解析更复杂的属性。

拥有该数据库的公司提供并销售通过 Web 服务查询该数据库的能力。该 Web 服务必须接收查询、客户端 ID、参数等，并“尽可能快地”返回结果集。

到目前为止没有任何问题。

拥有这个数据库的公司有一个由商业团队管理的内部应用程序，它设置不同的规则来定义每个客户访问 x 或 y 数据的能力。他们访问的数据越多，他们为服务支付的钱就越多。

并非所有客户都可以看到所有内容，一些客户只能查询来自特定城市的人，其他客户被允许看到来自某个年龄段的人，其他人来自某种宗教“和”某些社会经济水平，等等......

拥有该数据库的公司每天都可以根据需要更改上述规则，并允许客户查看更多或更少。所有者今天只能将其更改为明天应用，从一天到另一天。不是在同一天或实时或类似的时间。

所以，我们有这个大数据库，只有一个，所有客户端，所有客户端都进行各种查询，但是系统需要在两个级别上动态过滤数据：

**第一**- 基于定义每个客户可以看到的业务规则

**SECOND** - 基于查询的参数（WHERE 子句）

我的问题是如何以有效的方式实现上述“ **FIRST** ”动态过滤器。

有几个选项只是举几个例子：

**选项 1**：为每个客户端拥有一份主表副本，并且每天截断该表并再次从主表中插入记录，检查过滤规则以仅插入客户端可以看到的那些记录。从查询性能的角度来看，这个选项很好，但从处理时间来看很糟糕，当我们有更多的客户端时它的扩展性很差——会有更多的表和更多的插入和更多的处理时间。而且它......丑陋......不喜欢那样...... :)

**选项 2**：将业务过滤规则动态添加到每个请求的 where 子句中。很好，因为它不需要大型批处理，但不喜欢它，因为 where 子句可能太长了，这可能会带来问题，因为所有者可以为客户端定义的过滤规则的数量没有限制，并且过滤器可能非常复杂（例如：A 公司只能访问白人，出生在 70 到 80 岁之间，金发，家庭中有 1 到 2 辆汽车，“或”，黑人等等.. 等等.. “或”混血，bla bla..“或”）所以..你明白了，不喜欢它。

**选项 3**：我在想的是有一个名为 Row-Client 的表或类似的表，它将具有 RowID 和可以访问的客户端。然后我们将需要一个批处理，该批处理将根据业务规则填充该表。（但不是一个大过程，因为我们只插入两个值）然后，在每个查询中，向该表添加一个连接，以获取当前正在执行请求的客户端允许的行。

它可以是这样的：

行：1 客户：1 行：1 客户：2

或者（虽然没有 ref int）

行：1 客户：1,2

甚至我们可以将“客户”列直接添加到主表中。

所以我的问题是，选项 3 是否可行（有 1050 名客户每天查询 50 次关于营业时间的问题）或知道任何其他想法或可能已建立的方法、方法或技术以有效的方式实现这一目标。

当然，我对您的问题/想法持开放态度，感谢您的帮助。

**由于已经在进行分组或汇总操作，因此无法在执行查询后从结果集中删除数据**

我正在寻找的是最大限度地减少批处理时间和查询响应时间。亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:38:35.657

First of all, I have no actual experience doing this, so I'm being theoretical here. I would not, under any circumstances, repeat your people table anywhere for any reason. I would keep another client limitation rules table that would be used to filter the results of their queries.

So they can send queries for whatever they want, even data they haven't paid for, but before the results are returned, their query results pass through another process that limits their columns and/or rows by what they've paid for.

OK, given your row limitations on aggregate functions, I see you'd need a 2 (or more) step process. First, limit by row criteria, then execute their sql, then limit by columns. Limiting by rows is the tricky part, if you need them to limit by anything that might get created in the future without schema changes. The easiest thing to do is limit (ha,ha) the row criteria they can limit by, then have one table with a bunch of columns named things like 'isLimitedByAge', 'isLimitedByRace.'

Depending on your timeline, you might need to implement this in pieces, with a less sophisticated solution now, and a more dynamic one later, after you've learned more about what most clients are querying by and therefore, likely to be willing to pay for.

For a more specific example, let's say a client sends a query, 'select * from people'. the first part would be to query clientLimitRows to see what they've paid for, like people in a certain city, or people in a certain age range. That process builds the WHERE clause for the second process that actually queries the people table, performing aggregation. Then a third process checks clientLimitColumns to remove from their results any columns they haven't paid for.

Again, just my opinion, but I think you're going to have to break your client rules down. If I had to model *WHERE Company A can only access White people, born between 70 and 80, with blonde hair and between 1 and 2 cars in the family, "or", black people etc.. etc.. "or" mixed race that bla bla.. "or" )* I'd have a tables with rules (one per rule), conditions (one per OR set), and clauses (one per field/operator/value tuple connected by ANDs).

So for this rule, where you're limiting by race, age, haircolor, and numCars, OR race and blah2 OR mixedRace and blah3 or blah4 you'd have 4 rows of conditions with one or more clauses.

for

```
rule = 1
    condition = 1
    clause1 = 'race = white'
    clause2 = 'age >= 70'
    clause3 = 'age <= 80'
    clause4 = 'haircolor = blonde'
    clause5 = 'numCars >= 1'
    clause6 = 'numCars <= 2'
    condition = 2
    clause1 = 'race = black'
    clause2 = 'field2 = blah2'
    condition = 3
    clause1 = 'race = mixedrace'
    clause2 = 'field3 = blah3'
    condition = 4
    clause1 = 'field4 = blah4' 
```

the clause table has fields customerID, ruleID, conditionID, clauseID, field, operator, value

OK, I'm not sure I 100% understand what you're doing with option3, but it sounds like you're extending your people table with client markers, or introducing a rowID/clientID table with a 1-many relationship with people? Then you'd apply their paid for rules in an overnight process so the rows they can access are marked and can be limited with a join? I think it would work, but wouldn't they only get results from yesterday's queries today? If they pay for new data today, it won't be marked paid until tomorrow. I'm not sure you're missing anything, really, but if someone else has a better response, more power to them.

OK, I think I see where you're going. You want to create a table overnight that extends the people table with a clientID field, so each clientID has their own set of queryable rows? And you can't do that on the fly? When they send a query, first create their set of rows, then apply their query to that set?

# c# - 我是否需要多个流和 TCP 客户端才能在 C# 中创建聊天应用程序

> ID：13419627
> 
> 赞同：0
> 
> 时间：2012-11-16T15:31:58.373
> 
> 标签：c#, sockets, networking, network-programming, tcpclient

我在服务器上使用以下代码进行服务器和客户端之间的通信

```
TcpListener server = new TcpListener(IPAddress.Any, 9999);
server.Start();

Console.WriteLine("Waiting for client connections");
TcpClient client = server.AcceptTcpClient();
Console.WriteLine("Client request accepted");

NetworkStream stream = client.GetStream();
StreamReader reader = new StreamReader(stream);
StreamWriter writer = new StreamWriter(stream); 
```

现在这段代码可以很好地连接单个客户端，但是我需要做哪些调整才能允许多个客户端连接到我的服务器？

我是否需要在每个客户端的新端口上安装一个新的 TCP 侦听器？我需要多个 TCP 客户端和流吗？我们将不胜感激有关使此代码能够处理 >1 个客户的简要指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:34:50.127

您可能希望将 放在`server.AcceptTcpClient()`一个循环中，因为每次新客户端连接时它都会返回另一个`TcpClient`. 您可以在此处的 MSDN 文档中看到一个简单的示例[：http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclient.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:35:38.937

你仍然会有一个听众……但每个“接受”都应该产生一个不同的线程或任务。然后新线程将创建它自己的流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:39:16.890

在服务器端做这样的事情：

```
 while (true)
            {
              if (server.Pending()) // if there are any pending connections to server
                  {
                      //accept tcpClient and perform further operations.
                      //create a different thread per client
                   }
            } 
```

# objective-c - iPhone中这段代码有什么错误？

> ID：13419631
> 
> 赞同：-4
> 
> 时间：2012-11-16T15:32:10.177
> 
> 标签：objective-c, cocoa, nsstring, filepath

我在这段代码中遇到了一些错误，例如`"Expected ';' at end of declaration"`. 我该如何解决这个问题？

```
NSString *imagePath = [[stringPath stringByAppendingFormat:@"/"]stringByAppendingFormat:strFilePath]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:35:30.440

```
NSString *imagePath = [stringPath stringByAppendingPathComponent:strFilePath]; 
```

您的代码缺少右方括号。stringByAppendingFormat 也是一种重量级的连接方式（使用 stringByAppendingString :)。处理路径时，省去一些麻烦并使用路径相关的方法，这些方法对于何时添加斜线等很聪明。

# asp.net-mvc - Asp Net Mvc 4.5 - 如何通过返回部分视图发送 Json 对象

> ID：13419636
> 
> 赞同：0
> 
> 时间：2012-11-16T15:32:20.433
> 
> 标签：asp.net-mvc, json, razor

我有这个链接调用一个名为 UserSettingsTabsStructure 的操作：

```
@Ajax.ActionLink(User.Identity.Name,"UserSettingsTabsStructure","Account",   new AjaxOptions() { HttpMethod = "Get", UpdateTargetId = "conteudoDinamico", OnComplete = "loadDialogSettings" }) 
```

然后，当 OnComplete 完成后，我想将一个 json 对象发送到一个名为 loadDialogSettings 的 js 函数。

这是动作：

```
public ActionResult UserSettingsTabsStructure()
    {

        return PartialView();

    } 
```

我怎样才能做到这一点？即使像这样创建一个json：

```
public ActionResult UserSettingsTabsStructure()
    {

        Json(new
        {
            FormName = "Name",
        }, JsonRequestBehavior.AllowGet);

        return PartialView();
    } 
```

我不确定如何使用 view() 返回对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:37:24.267

您想要返回`Json`扩展方法的结果：

```
public ActionResult UserSettingsTabsStructure()
{
    return Json(new
    {
        FormName = "Name",
    }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:26:54.033

我找到了另一种方法。我直接调用带有参数的回调函数。

```
OnComplete = "loadDialogSettings('parameter')". 
```

谢谢

# mysql - 从 3 个表中获取数据的 mysql 语句

> ID：13419641
> 
> 赞同：0
> 
> 时间：2012-11-16T15:32:48.370
> 
> 标签：mysql

我有 3 张桌子可供测验

`cursos`（测验）ID 为 PK

`preguntas_cursos`（问题） id 为 PK 并且 id_curso 为 FK 与 cursos 中的 id 相同（上表）

还有一个答案的第三个表，`opciones_preguntas_cursos`其 id 为 PK，FK`preguntas_cursos_id`与`preguntas_cursos_id`（上一张表）相同

我想把这三个一起加入：

这是我正在尝试的声明：

```
SELECT cursos.nombre_curso, pc.curso_id, pc.id AS preg_id, pc.pregunta, opc.id AS resp_id, opc.respuesta, opc.es_correcta 
FROM preguntas_cursos AS pc, opciones_preguntas_cursos AS opc, cursos
WHERE pc.id = opc.preguntas_cursos_id
AND cursos.id = pc.curso_id 
```

但是这个查询只是给了我一组只有一个 id 的行`cursos`，它没有显示它们

我做错了什么，或者什么是完成我想做的最好的方法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:48:33.030

而不是在哪里进行连接，你应该从他那里做，它应该是一个左连接。

```
SELECT cursos.nombre_curso, pc.curso_id, pc.id AS preg_id, pc.pregunta, opc.id AS resp_id, opc.respuesta, opc.es_correcta 
FROM preguntas_cursos AS pc LEFT JOIN (opciones_preguntas_cursos AS opc,cursos) ON (pc.id = opc.preguntas_cursos_id AND cursos.id = pc.curso_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:15:27.993

我试图[在 SQLFiddle 上构建您的表模式](http://sqlfiddle.com/#!2/b9d35/10)。在您的问题中查询一些信息，这是一个假设。[如果我错了，请纠正我）。您如何选择在您的案例中使用哪个 JOIN？您是说要获取与 cursos ID 对应的所有记录。您希望仅返回**基于公共列的表中常见**的选择性记录。左连接就是这样做的。当您通过通过每个表的主键定义外键来将引用完整性添加到表模式时 - 您创建了该公共列/引用。

我在同一个 SQLFiddle 中为您提供了一个解决方案查询及其输出，让您有一个清晰的想法。如果 LEFT JOIN 不可用，您将不得不在查询中运行一些选择、内连接、联合。所以省了很多麻烦。

```
SELECT c.id, c.quiz_name,
        p.cursos_id, p.question,
        o.id,o.answers 
FROM preguntas_cursos p
LEFT JOIN
        (opciones_preguntas_cursos o, cursos c)
ON (p.id = o.preg_id
AND c.id = p.cursos_id) 
```

*   这是[关于 JOINS 的一篇很棒的帖子](https://stackoverflow.com/questions/5706437/whats-the-difference-between-inner-join-left-join-right-join-full-join-in-mys)

# java - 如何在 Eclipse 插件中执行相当于 getClassLoader().getResources() 的操作？

> ID：13419643
> 
> 赞同：1
> 
> 时间：2012-11-16T15:33:04.027
> 
> 标签：java, eclipse, plugins, classpath

我有一个`IJavaProject`并且我需要在这个项目的类路径上找到资源，即相当于`getClassLoader().getResources()`（注意：这个调用返回`Enumeration<URL>`而不是单个`URL`）。

如何从 Eclipse 包/插件检查 Java 项目的类路径，例如查找包含的所有类路径条目`log4j.xml`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:43:22.483

用于`getPackageFragmentRoots()`获取类路径中条目的等效项。对于每个根，您可以调用`getNonJavaResources()`以获取该根下的非 java 事物，并且您可以`getChildren()`递归调用以获取子项（以 java 层次结构的方式）。最终，那些间接遍历的子文件将是 java 源文件，您可以通过向它们发送`getUnderlyingResource()`方法来确认它们。

这是一些代码：

```
private Collection<String> keys( IJavaProject project, String[] bundleNames ) throws CoreException, IOException {

    Set<String> keys = Sets.newLinkedHashSet();

    for( String bundleName : bundleNames ) {

        IPath path = new Path( toResourceName( bundleName ) );

        boolean found = false;

        IPackageFragmentRoot[] packageFragmentRoots = project.getPackageFragmentRoots();
        for( IPackageFragmentRoot root : packageFragmentRoots ) {
            found |= collectKeys( root, path, keys );
        }

        if( ! found ) {
            throw new BundleNotFoundException( bundleName );
        }
    }

    return keys;
}

private boolean collectKeys( IPackageFragmentRoot root, IPath path, Set<String> keys ) throws CoreException, IOException {
    IPath fullPath = root.getPath().append( path );
    System.out.println( "fullPath=" + fullPath );

    IFile file = root.getJavaProject().getProject().getFile( fullPath.removeFirstSegments( 1 ) );
    System.out.println( "file=" + fullPath );

    if( ! file.exists() ) {
        return false;
    }

    log.debug( "Loading " + file );

    InputStream stream = file.getContents( true );
    try {
        Properties p = load( file.getFullPath().toString(), stream );

        keys.addAll( keySet( p ) );
    } finally {
        stream.close();
    }

    return true;
}

protected String toResourceName( String bundleKey ) {

    String path = bundleKey.replace( '.', '/' );
    return path + ".properties";
} 
```

# c# - aspx.net 检索点击按钮

> ID：13419651
> 
> 赞同：1
> 
> 时间：2012-11-16T15:33:30.943
> 
> 标签：c#, asp.net, keyboard-shortcuts, keypress, onkeydown

这是我的代码：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        // esc -------------------------------------------
        $(document).bind('keyup', 'esc', function(event) { seaClick('OboutImageButton1'); });
        $('#txbLct').bind('keyup', 'esc', function(event) { seaClick('OboutImageButton1'); });
        $('#txbQty').bind('keyup', 'esc', function(event) { seaClick('OboutImageButton1'); });
        $('#btnOk').bind('keyup', 'esc', function(event) { seaClick('OboutImageButton1'); });
        $('#OboutImageButton1').bind('keyup', 'esc', function(event) { seaClick('OboutImageButton1'); });
        // down ------------------------------------------
        $(document).bind('keyup', 'down', function(event) { myClick('btnNext'); });
        $('#txbLct').bind('keyup', 'down', function(event) { myClick('btnNext'); });
        $('#txbQty').bind('keyup', 'down', function(event) { myClick('btnNext'); });
        $('#btnOk').bind('keyup', 'down', function(event) { myClick('btnNext'); });
        //$('#OboutImageButton1').bind('keyup', 'down', function(event) { myClick('btnNext'); });
        // up --------------------------------------------
        $(document).bind('keyup', 'up', function(event) { myClick('btnPrev'); });
        $('#txbLct').bind('keyup', 'up', function(event) { myClick('btnPrev'); });
        $('#txbQty').bind('keyup', 'up', function(event) { myClick('btnPrev'); });
        $('#btnOk').bind('keyup', 'up', function(event) { myClick('btnPrev'); });
        //$('#OboutImageButton1').bind('keyup', 'up', function(event) { myClick('btnPrev'); });
        // return ----------------------------------------
        $(document).bind('keyup', 'return', function(event) { myClick('btnOk'); });
        $('#txbLct').bind('keyup', 'return', function(event) { myClick('btnOk'); });
        $('#txbQty').bind('keyup', 'return', function(event) { myClick('btnOk'); });
        $('#btnOk').bind('keyup', 'return', function(event) { myClick('btnOk'); });
        //$('#OboutImageButton1').bind('keyup', 'return', function(event) { myClick('btnOk'); });
    });
    function myClick(buttonName) {
        //alert(buttonName);
        //Get the button the user wants to have clicked
        var btn = document.getElementById(buttonName);
        if (btn != null) { //If we find the button click it
            //alert('clicked');
            btn.click();
            event.keyCode = 0
        } else {
            alert('error');
        }
        //alert('end');
    }
</script> 
```

我在其中使用代码`myClick`调用与按钮相关联的函数单击以执行某些操作，基本上它可以工作，但是如果我尝试使用类似`Enter`or的按钮/键`Esc`，有时页面会调用其他按钮（并且不会通过关于功能`myClick`）。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:06:15.357

很可能在 DOM 中的第一个输入元素上发生了 enter 按下事件。一个建议是在文档上监听 keydown 事件，如果按下的键是回车键，则调用您想要的方法。

```
$(document).keypress(function(e){
    var code = e.keyCode ? e.keyCode : e.which;
    if(code == '13') //call desired method
}); 
```

# mysql - MySQL：SET 类型

> ID：13419653
> 
> 赞同：1
> 
> 时间：2012-11-16T15:33:38.493
> 
> 标签：mysql, set

我正在学习“（MySQL）- SET Type”，在Mysql，我不明白以下语句： The Link: [The SET Type](http://dev.mysql.com/doc/refman/5.0/en/set.html)。

> MySQL 以数字方式存储 SET 值，存储值的低位对应于第一个集合成员。如果您在数字上下文中检索 SET 值，则检索到的值具有与构成列值的集合成员相对应的位集。

正如他们所说的“数字”，我理解“幕后”有 2 列，1 列带有 SET 成员，1 列带有二进制系统（1、2、4、8、16 等）后面的数值。 .

我也没有得到这个声明：

> 如果将数字存储到 SET 列中，则在数字的二进制表示中设置的位确定列值中的集合成员。对于指定为 SET('a','b','c','d') 的列，成员具有以下十进制和二进制值。

大图我不明白 SET 成员存储在数据库中的值是多少，如果有人可以帮助我，我会很高兴，谢谢大家，美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:20:29.410

SET 数据类型值以整数形式存储，SET 值（'val1'、'val2'...）以位存储；可以有 64 个值 - 8 字节整数。

有一篇关于 SET 类型及其使用的文章 -[如何编辑 SET 数据类型的值](http://buysql.com/mysql/55-edit-set-type-values.html)。

# python - Pycharm - 如何访问“手表”窗格？

> ID：13419659
> 
> 赞同：7
> 
> 时间：2012-11-16T15:33:56.917
> 
> 标签：python, pycharm

我对 Pycharm 有点陌生，我想这应该是一个简单的问题，但我在任何地方都找不到答案......

Pycharm 文档有在 Watches 窗格中添加/编辑项目的说明，但文档假定 Watches 窗格已经打开，因此它跳过了如何打开/访问它的步骤。有谁知道我在哪里可以找到/如何打开“手表”窗格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:38:48.840

在 Debug 窗格的左侧，从顶部算起第 7 个，有一个“Restore Layout”按钮，用于取消隐藏 Watches 面板。

[![截屏](../Images/6bc43a8b95de1ab8e8b0349e8773cca1.png)](https://i.stack.imgur.com/M3tKi.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-08T03:45:02.777

要`Watches`单独显示窗格并查看其中配置的手表，请释放窗格`Variables`工具栏上的在选项卡中显示手表切换按钮（眼镜按钮）`Variables`。默认情况下，该按钮被按下。

# css - 如何保持打开按钮下拉菜单以选择选项？

> ID：13419663
> 
> 赞同：0
> 
> 时间：2012-11-16T15:33:58.680
> 
> 标签：css, twitter-bootstrap

我有一个按钮组，我想要一个复选框列表来选择下拉菜单中的一些选项。问题是，如果您单击复选框，它会关闭菜单。如何保持打开状态？

```
 <div class="btn-group">
      <button class="btn">Button 1</button>
      <button class="btn dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li>
          <input type="checkbox" name="vehicle" value="Bike">I have a bike<br>
        </li>
        <li>
          b
        </li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T15:42:29.753

您可以将单击处理程序绑定到防止事件冒泡的复选框：

```
$('input').click(function (e) { e.stopPropagation(); }); 
```

# vim - 是否可以轻松地将 vim 搜索和替换 + 宏转换为 sed？

> ID：13419668
> 
> 赞同：1
> 
> 时间：2012-11-16T15:34:34.527
> 
> 标签：vim, sed

我正在使用 VIM 清理数据源，并将其正确格式化以与 SIMILE Timeline 一起使用。

VIM 效果很好，但据我所知它不能自动化，所以我正在考虑使用 SED 之类的东西来清理数据源。我知道 SED 可以用来进行搜索和替换，但是当我使用 VIM 清理数据时，我使用了 VIM 宏和 vim 正则表达式搜索和替换的组合。

SED 中是否有任何等效于 VIM 的宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:49:25.303

对于非常简单的文本处理（即像增强的 'sed' 或 'awk' 一样使用 Vim，也许只是受益于`:substitute`命令中增强的正则表达式），请使用*Ex-mode*。

```
REM Windows
call vim -N -u NONE -n -es -S "commands.ex" "filespec" 
```

注意：静默批处理模式`-s-ex`会弄乱 Windows 控制台，因此您可能需要`cls`在 Vim 运行后进行清理。

```
# Unix
vim -T dumb --noplugin -n -es -S "commands.ex" "filespec" 
```

注意：如果“commands.ex”文件不存在，Vim 会挂起等待输入；最好事先检查它的存在！或者，Vim 可以从标准输入读取命令。如果使用 - 参数，您还可以使用从 stdin 读取的文本填充新缓冲区，并从 stderr 读取命令。

对于涉及多个窗口的更高级处理，以及 Vim 的真正自动化（您可能与用户交互或让 Vim 运行以让用户接管），请使用：

```
vim -N -u NONE -n -c "set nomore" -S "commands.vim" "filespec" 
```

以下是使用的参数的摘要：

```
-T dumb           Avoids errors in case the terminal detection goes wrong.
-N -u NONE        Do not load vimrc and plugins, alternatively:
--noplugin        Do not load plugins.
-n                No swapfile.
-es               Ex mode + silent batch mode -s-ex
                  Attention: Must be given in that order!
-S ...            Source script.
-c 'set nomore'   Suppress the more-prompt when the screen is filled
                  with messages or output to avoid blocking. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:44:36.377

实际上，您*可以*自动化 vim 以及所有以前版本的 vi。（但是是的，通常你会使用 sed(1)。） Vim 可以使用 ex(1) 链接启动，在这种情况下它保持在行模式。

例如：

```
ex - /etc/hosts << \eof
$a
10.11.12.13 a-host-name
.
w /tmp/otherhosts
q
eof 
```

如果你把它放进去，`autovim.sh`你可以：

```
$ sh autovim.sh
$ cat /tmp/otherhosts 
```

# c# - 获取 XML 内部文本

> ID：13419669
> 
> 赞同：0
> 
> 时间：2012-11-16T15:34:36.007
> 
> 标签：c#, xml, xml-parsing

我有一个这样的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<KWS>
  <KW>
    <KWNAME>"make money online youtube video"</KWNAME>
    <GSC>318,000</GSC>
    <YSC>821</YSC>
    <TOP10>6</TOP10>
    <TOP100>61</TOP100>
    <SEARCH-US-C>0</SEARCH-US-C>
    <NOTE>
    </NOTE>
    <YTLINKS>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=Dh5vptODX-M</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=YtjvHX6VfcY</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=WDfJoDCdvyw</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=yRUEffXbokw</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=YYsqgs5ve78</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=7WaG3D-tSrs</LINK>
      </YT-LINK>
    </YTLINKS>
  </KW>
  <KW>
    <KWNAME>"linkin park video youtube"</KWNAME>
    <GSC>130,000</GSC>
    <YSC>4,300</YSC>
    <TOP10>7</TOP10>
    <TOP100>69</TOP100>
    <SEARCH-US-C>0</SEARCH-US-C>
    <NOTE>
    </NOTE>
    <YTLINKS>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=ij34hCOMiIU</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=mTMl5dRw8WI</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=b-JehygMcJ8</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=b2dmMxnUosc</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=hZ62r3Q6ohA</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=dREoOlTeYs4</LINK>
      </YT-LINK>
      <YT-LINK>
        <LINK>http://www.youtube.com/watch?v=42xL8MG3xfQ</LINK>
      </YT-LINK>
    </YTLINKS>
  </KW>
</KWS> 
```

我的 C# 代码用于获取 YT-LINK 中的每个 LINK

```
 XmlDocument xml = new XmlDocument();
        xml.Load(file);

        XmlNodeList nodes = xml.SelectNodes("//KW");

        foreach (XmlNode node in nodes)
        {
            KWDATA k = new KWDATA();

            k.KEYWORD = node.SelectSingleNode("KWNAME").InnerText;
            k.GSC = node.SelectSingleNode("GSC").InnerText;
            k.YTC = node.SelectSingleNode("YSC").InnerText;
            k.N_VIDEOS_TOP_10 = node.SelectSingleNode("TOP10").InnerText;
            k.N_VIDEOS_TOP_100 = node.SelectSingleNode("TOP100").InnerText;
            k.N_OF_KW_SEARCH_IN_GOOGLE = node.SelectSingleNode("SEARCH-US-C").InnerText;

            List<string> YT_LINKS = new List<string>();
            foreach (XmlNode node2 in node.SelectNodes("YTLINKS")) // <-- i know something is wrong here
            {
                MessageBox.Show(node2.SelectSingleNode("YT-LINK").InnerText);
                YT_LINKS.Add(node2.SelectSingleNode("YT-LINK").InnerText);
            }
            k.YTLINKS = YT_LINKS; 
```

但我只获得每个条目的第一个链接，例如：

```
http://www.youtube.com/watch?v=Dh5vptODX-M
http://www.youtube.com/watch?v=ij34hCOMiIU 
```

只有，其余的将不会被检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:39:14.440

The "YTLINKS" node is a single one, you can select that one first, then iterate through the collection of "YTLINK" nodes within:

```
var ytlinks = node.SelectSingleNode("YTLINKS");

foreach (XmlNode node2 in ytlinks.SelectNodes("YTLINK"))
{           
    YT_LINKS.Add(node2.InnerText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:02:51.593

**在这里，您可以使用一些 linq to XML - 更少的代码**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Xml;
    using System.Xml.Linq;

    namespace xmltest
    {
        public class KwData
        {
            public string  KEYWORD { get; set; }
            public List<string> Links { get; set; }
        }

        class Program
        {
            static void Main(string[] args)
            {
                XDocument xml = XDocument.Load("XMLFile1.xml");

                List<KwData> KwDataList = new List<KwData>();

                // Use linq to XML
                KwDataList = (from kwData in xml.Descendants("KW")
                    select new KwData
                    {
                        KEYWORD = kwData.Element("KWNAME").Value,
                        Links = kwData.Elements("YTLINKS").Elements("YT-LINK").Select( x => x.Value).ToList()
                    }).ToList();

            }
        }

} 
```

# java - 如何从我的项目中检索所有依赖项

> ID：13419670
> 
> 赞同：0
> 
> 时间：2012-11-16T15:34:39.880
> 
> 标签：java, eclipse, ant

如何`jar`使用 ANT 任务从我的 eclipse 项目中检索所有依赖项，我需要所有的名称/和路径`jars`来运行当前的 eclipse 项目？

在打包我的项目时，我会将所有库添加到自定义文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:47:55.230

您应该将所有 JAR 文件添加到单个 lib 目录中，并将其添加到您的`build.xml`.

另一种方法是将您的 jar 添加到单个 JAR 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:54:47.430

这应该给你一个粗略的想法。它基本上解析 Eclipse 的`.classpath`文件并逐行生成一个包含所有 JAR 依赖项名称的文件。

```
<project name="test" default="test">
  <target name="test">
    <copy file=".classpath" tofile="jars.txt" overwrite="true">
        <filterchain>
            <linecontainsregexp>
                <regexp pattern="classpathentry"/>
            </linecontainsregexp>           
            <tokenfilter>
                <replaceregex pattern=".*path=&quot;" replace=""/>
                <replaceregex pattern="&quot;.*" replace=""/>
            </tokenfilter>          
            <linecontainsregexp>
                <regexp pattern=".*\.jar"/>
            </linecontainsregexp>                       
        </filterchain>
    </copy> 
  </target>
</project> 
```

# php - 递归函数php + mysql到树形菜单

> ID：13419673
> 
> 赞同：-2
> 
> 时间：2012-11-16T15:34:56.163
> 
> 标签：php, mysql, recursion, hierarchical-data

> **可能重复：**
> [PHP / MySQL 构建树菜单](https://stackoverflow.com/questions/4413776/php-mysql-build-tree-menu)

我需要在两级构建菜单之间获取数据。

```
ID | Parent    | Name    | 
 1 | 0         | Cat1    | 
 2 | 1         | SubCat1 | 
 3 | 0         | Cat2    | 
 4 | 3         | SubCat2 | 
 5 | 4         | SubCat3 | 
 6 | 3         | SubCat4 | 
 7 | 3         | SubCat5 |

Level 1: Cat1 and Cat2
Level 2: SubCat1, SubCat2 and Subcat4
Level 3: SubCat3 and SubCat5 
```

*   第一类
    *   子类 1
*   类别 2
    *   子类 2
        *   子类 3
        *   子类 5
    *   子类 4

我想要 2 级和 3 级菜单列出数据。我如何在 2,3 行之间调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:39:12.757

The correct name here for this data is an **adjacent list hierarchy**

There is a guide on this website to produce this in MySQL

[http://kod34fr33.wordpress.com/2008/05/06/adjacency-list-tree-on-mysql/](http://kod34fr33.wordpress.com/2008/05/06/adjacency-list-tree-on-mysql/)

# c# - 将模型分配给 Razor 中的 Javascript 变量

> ID：13419676
> 
> 赞同：12
> 
> 时间：2012-11-16T15:35:08.283
> 
> 标签：c#, javascript, jquery, asp.net-mvc, razor

我有一个强类型视图绑定到一个对象，该对象包含一些对象的集合（列表）。我知道 Razor 在生成页面时会在服务器端执行，而 Javascript 变量在页面显示之前不会被实例化......但是是否有可能转换模型（视图绑定到) 或它的任何字段到 Razor 中的 JSON 而不诉诸 AJAX 调用来获取该数据之后？

你知道，像...

```
var myJavascriptVariable = @Model.MyCollection 
```

where`@Model.MyCollection`是一些对象的列表。

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-16T15:37:08.533

要获取 json 数据，您可以使用以下构造：

```
var jsData = @Html.Raw(Json.Encode(Model.MyCollection)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T15:56:25.767

试试这个，这样你就可以拥有不显眼的javascript：

HTML（剃刀）：

```
<script id="data" type="text/data-template">
@Html.Raw(Json.Encode(Model.MyCollection))
</script> 
```

JS（您可以在外部文件中使用它）：

```
var
   jsonString = $('#data').html(),
   jsonValue = (new Function( "return( " + jsonString + " );" ))(); 
```

[例子](http://jsfiddle.net/adescalzo/4zn52/)

HTML：

```
<script id="data" type="text/data-template">
    { 'name': 'Pedro', 'Age': 33}
</script>
<div id="result"></div> 
```

JS​</p>

```
var
   jsonString = $('#data').html(),
    jsonValue = (new Function( "return( " + jsonString + " );" ))();

$('#result').html(jsonValue.name); 
```

​</p>

# linux - 以非 root 用户身份使用 libusb-1.0 访问 USB 设备

> ID：13419691
> 
> 赞同：6
> 
> 时间：2012-11-16T15:35:47.397
> 
> 标签：linux, permissions, libusb

我正在尝试以非 root 用户身份在 RHEL5 上与 USB 设备交互。该设备是一个使用 libusb-1.0的 GPIO 接口（其文档可在[http://www.xdimax.com/sub20/sub20.html找到）。](http://www.xdimax.com/sub20/sub20.html)使用其 API 打开设备的过程是：

```
sub_device d;
d = sub_find_devices(0);
sub_handle h = sub_open(d); 
```

当我这样做时，`sub_find_devices()`调用工作，但在`sub_open()`调用时，我得到 libusb 错误 -3，这表明我没有权限打开设备进行写入。

我对这个问题做了一些研究，发现我应该创建一个 udev 规则。在设备的 sysfs 节点上使用 udevinfo，我得到：

```
looking at device '/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2':
KERNEL=="2-1.2"
SUBSYSTEM=="usb"
SYSFS{configuration}==""
SYSFS{serial}=="15F2"
SYSFS{product}=="SUB-20"
SYSFS{manufacturer}=="XDIMAX"
SYSFS{maxchild}=="0"
SYSFS{version}==" 1.10"
SYSFS{devnum}=="6"
SYSFS{speed}=="12"
SYSFS{bMaxPacketSize0}=="64"
SYSFS{bNumConfigurations}=="1"
SYSFS{bDeviceProtocol}=="00"
SYSFS{bDeviceSubClass}=="00"
SYSFS{bDeviceClass}=="ff"
SYSFS{bcdDevice}=="0001"
SYSFS{idProduct}=="ffc3"
SYSFS{idVendor}=="04d8"
SYSFS{bMaxPower}=="100mA"
SYSFS{bmAttributes}=="80"
SYSFS{bConfigurationValue}=="1"
SYSFS{bNumInterfaces}==" 1" 
```

然后我在文件中创建了以下 udev 规则`/etc/udev/rules.d/991-local.rules`：

```
SYSFS{idVendor}=="04d8", SYSFS{idProduct}=="ffc3", NAME="sub20", GROUP="582", MODE="0660" 
```

582 是我的普通用户所属的组的 GID。我还尝试了使用组名的规则，但它不起作用。创建此规则后，设备文件`/dev/sub20`以正确的权限创建，但仅在插入设备时才存在，这让我有理由相信 udev 规则在正确的设备上匹配。但是，我的代码仍然出现错误-3。

对代码进行 strace 显示了这个调用：

```
open("/dev/bus/usb/002/006", O_RDWR)    = -1 EACCES (Permission denied) 
```

节点上的权限`/dev/bus/usb...`仍然是 root:root，所以这可能表明我的 udev 规则存在问题，尽管我不知道那可能是什么。

如果我尝试调用`open("/dev/sub20", O_RDWR)`，我会得到返回值`ENXIO (No such device or address)`，这是 udev 规则中另一个可能的错误指示，尽管该`/dev/sub20`文件显然以某种方式与正确的设备相关联，因为它仅在插入设备时存在。

我还能做些什么来尝试让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:08:27.613

我用来使用 libusb 访问设备的 udev 规则如下所示`SUBSYSTEMS=="usb", ATTRS{idVendor}=="04d8", ATTRS{idProduct}=="ffc3", SYMLINK+="sub20", GROUP="usb", MODE="660"`：它应该只是向设备添加一个符号链接，但之后权限也对我有用（我是 usb 组的成员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T08:58:07.677

对于 USB 设备 FTDI，我使用以下脚本：

**ftdi_config.sh**

```
#!/bin/sh

echo "This script is for modern debian systems, and does everything that should"
echo "be necessary to use ftdi usb devices as a regular user with libftdi,"
echo "instead of the built-in dumb kernel driver."
echo
if [ $(id -u) != 0 ]; then
  echo "This script must be run as root."
  exit 1
else
  read -p "Press enter to continue, or ctrl-c to bail..." x
fi
echo
echo "** Adding usb group"
groupadd usb
echo
echo "** Setting udev permissions on usb devices"
echo 'SUBSYSTEMS=="usb", ACTION=="add", MODE="0664", GROUP="usb"' >> /etc/udev/rules.d/99-usbftdi.rules
echo
echo "** Reloading udev rules"
/etc/init.d/udev reload
echo
echo "** Blacklisting ftdi_sio driver"
echo 'blacklist ftdi_sio' > /etc/modprobe.d/ftdi.conf
echo
echo "** Removing old ftdi_sio driver (it's ok if it fails)"
rmmod ftdi_sio
echo
echo "!! Run the following command as root, to add your user to the usb group:"
echo "useradd -G usb yourusernamehere"
echo
echo "or"
echo
echo "Adding to a existing user:"
echo "usermod -a -G usb yourusernamehere"
echo
echo "as then you must reboot the system:"
echo "reboot" 
```

然后以非 root 用户身份运行您的应用程序。有用！！！

# sql - 比较两组 SQL "GROUP BY" 结果

> ID：13419701
> 
> 赞同：5
> 
> 时间：2012-11-16T15:36:44.470
> 
> 标签：sql, tsql

这是我的桌子：

```
ROUTES = the route ID
STATIONS = the station ID
STOPS? = if the train stops at this station then is equal to 1 otherwise 0

-------------------------
ROUTES STATIONS  STOPS?
-------------------------
R1    S1    1
R1    S2    0
R1    S3    1
R1    S4    0
R1    S5    1
R2    S1    1
R2    S2    1
R2    S3    1
R2    S4    0
R2    S5    1
R3    S1    1
R3    S2    0
R3    S4    1
R3    S5    0
R3    S6    1
R3    S7    1
R4    S1    1
R4    S2    1
R4    S3    0
R4    S4    1
R5    S2    1
R5    S3    0
R5    S4    1 
```

我要做的是找出哪些路线经过相同的车站但没有相同的停靠点。

例如：我们看到

```
Route R1 passes through stations S1->S2->S3->S4->S5 
Route R2 passes through stations S1->S2->S3->S4->S5 
```

但它们有不同的停靠点，所以结果应该是：

```
R1 
R2 
```

我想首先将所有 ROUTES 分组并将属于该组的 STATIONS 与所有其他站点进行比较，并检查它们是否至少有一个不同的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:56:32.583

以下查询将返回其中一列火车不停靠的路线和车站，[http://sqlfiddle.com/#](http://sqlfiddle.com/#!3/f4c5f/8) !3/f4c5f/8 。

```
 SELECT DISTINCT
    tblRoutes.ROUTES
   ,tblRoutesCross.ROUTES CrossingRoute
   ,tblRoutes.STATIONS
  FROM
    tblRoutes
  INNER JOIN
    tblRoutes tblRoutesCross
  ON
    tblRoutesCross.STATIONS = tblRoutes.STATIONS
  AND
    tblRoutes.ROUTES < tblRoutesCross.ROUTES
  AND
    (
       tblRoutesCross.STOPS = 0 
      OR
       tblRoutes.STOPS = 0 
    ) 
```

以下查询将仅返回交叉路线：

```
 SELECT DISTINCT
    tblRoutes.ROUTES
   ,tblRoutesCross.ROUTES CrossingRoute
   --,tblRoutes.STATIONS
  FROM
    tblRoutes
  INNER JOIN
    tblRoutes tblRoutesCross
  ON
    tblRoutesCross.STATIONS = tblRoutes.STATIONS
  AND
    tblRoutes.ROUTES < tblRoutesCross.ROUTES
  AND
    (
       tblRoutesCross.STOPS = 0 
      OR
       tblRoutes.STOPS = 0 
    ) 
```

在 where 子句中查找非火车停靠的路线或 to and in where 子句：

```
 SELECT DISTINCT
    tblRoutes.ROUTES
   ,tblRoutesCross.ROUTES CrossingRoute
   --,tblRoutes.STATIONS
  FROM
    tblRoutes
  INNER JOIN
    tblRoutes tblRoutesCross
  ON
    tblRoutesCross.STATIONS = tblRoutes.STATIONS
  AND
    tblRoutes.ROUTES < tblRoutesCross.ROUTES
  AND
    (
       tblRoutesCross.STOPS = 0 
      AND
       tblRoutes.STOPS = 0 
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:17:12.113

我对我的代码感到抱歉，但我正在工作，我稍后会格式化，但这是您在步骤中需要的
希望它有所帮助

```
DECLARE @table TABLE (r NVARCHAR(3), s NVARCHAR(3), st BIT)
DECLARE @temp TABLE (r NVARCHAR(3), s NVARCHAR(100), st NVARCHAR(100))

INSERT INTO @table
        ( [r], [s], [st] )
VALUES  ('R1','S1',1 ),
        ('R1','S2',0),
        ('R1','S3',1),
        ('R1','S4',0),
        ('R1','S5',1),
        ('R2','S1',1),
        ('R2','S2',1),
        ('R2','S3',1),
        ('R2','S4',0),
        ('R2','S5',1),
        ('R3','S1',1),
        ('R3','S2',0),
        ('R3','S4',1),
        ('R3','S5',0),
        ('R3','S6',1),
        ('R3','S7',1),
        ('R4','S1',1),
        ('R4','S2',1),
        ('R4','S3',0),
        ('R4','S4',1),
        ('R5','S2',1),
        ('R5','S3',0),
        ('R5','S4',1)

SELECT * FROM @table

INSERT INTO @temp
        ( [r], [s], [st] )

SELECT DISTINCT r ,(
Select s + ',' AS 'data()' 
            From @table R2
            WHERE R2.[r] = [R].r
            ORDER BY [r]
            For XML PATH ('') ) [Routs]
            , (
Select CAST([st]AS NVARCHAR(2)) + ',' AS 'data()' 
            From @table R2
            WHERE R2.[r] = [R].r
            ORDER BY [r]
            For XML PATH ('') ) [Stops]
    FROM @table R

SELECT * FROM @temp

SELECT * FROM @temp WHERE [s] IN (SELECT [s] FROM @temp GROUP BY s HAVING COUNT(*) > 1 )

SELECT T.* FROM @temp T
INNER JOIN (
SELECT [s], [st] FROM @temp WHERE [r] IN (
 SELECT [r] FROM @temp WHERE [s] IN 
    ( SELECT [s] FROM @temp GROUP BY s HAVING COUNT(*) > 1 ) )
    GROUP BY [s], [st] HAVING COUNT (*) = 1 ) X ON T.[s] = X.[s] AND T.[st] = X.[st] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:18:58.697

我假设一个 TrainRoutes 表，其中 R1、R2 等各有一行。如果需要，您可以将其替换为从 Stops 中选择不同的 RouteID。

```
Select
    r1.RouteID Route1,
    r2.RouteID Route2
From
    -- cross to compare each route with each route
    dbo.TrainRoutes r1
        Cross Join
    dbo.TrainRoutes r2
        Inner Join
    dbo.Stops s1
        On r1.RouteID = s1.RouteID
        Inner Join
    dbo.Stops s2
        On r2.RouteID = s2.RouteID
Where
    r1.RouteID < r2.RouteID -- no point in comparing R1 with R2 and R2 with R1
Group By
    r1.RouteID,
    r2.RouteID
Having
     -- check each route has the same number of stations
    count(Distinct s1.stationID) = count(Distinct s2.stationID) And
    -- check each route has the same stops
    Sum(Case When s1.StationID = s2.StationID Then 1 Else 0 End) = count(Distinct s1.StationID) And
    -- check each route has different halts
    sum(Case When s1.StationID = s2.StationID And s1.Halts = s2.Halts Then 1 Else 0 End) != count(Distinct s1.StationID) 
```

您也可以在没有 TrainRoute 表的情况下执行此操作，但您现在要交叉连接两个更大的表：

```
Select
    s1.RouteID Route1,
    s2.RouteID Route2
From
    dbo.Stops s1
        Cross Join
    dbo.Stops s2
Where
    s1.RouteID < s2.RouteID
Group By
    s1.RouteID,
    s2.RouteID
Having
    count(Distinct s1.stationID) = count(Distinct s2.stationID) And
    Sum(Case When s1.StationID = s2.StationID Then 1 Else 0 End) = count(Distinct s1.StationID) And
    sum(Case When s1.StationID = s2.StationID And s1.Halts = s2.Halts Then 1 Else 0 End) != count(Distinct s1.StationID) 
```

[http://sqlfiddle.com/#!6/76978/8](http://sqlfiddle.com/#!6/76978/8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T16:22:12.293

这里真正的挑战是找到经过相同车站的路线。这个想法是通过在表上进行自连接来比较两条路线，compa 和 compb。当然，比较是针对所有配对。

现在，如果我们汇总有关路线的一些信息，我们可以确定它们是否具有相同的站点：

*   按站加入，因此只计算匹配项
*   计算 compA 和 compB 上的站数
*   数一下两者的数字

第一个是join的条件，第二个是使用window函数在join前进行计数，第三个是join的结果。

当所有这些计数相同时，两条路线通过同一个车站。

很容易。现在我们只需要添加某个站点在一条路线上停靠但在另一条路线上没有停靠的位置。

以下查询包含此逻辑：

```
select compa_Route, compb_Route
from (select compa.route as compa_route, compb.route as compb_Route,
             MAX(compa.numstations) as compa_NumStations,
             MAX(compb.NumStations) as compb_NumStations,
             SUM(case when compa.stop <> compb.stop then 1 else 0 end) as DifferentStops,
             COUNT(*) as both_NumStations
      from (select t.*, COUNT(*) over (partition by route) as numstations
            from t
           ) routea join
           (select t.*, COUNT(*) over (partition by route) as numstations
            from t
           ) routeb
           on routea.station = routeb.station and
              routea.route < routeb.route
      group by compa.route, compb.route
     ) ab
where compa_NumStations = compb_NumStations and
      compa_NumStations = both_NumStations and
      DifferentStops > 0 
```

请注意，这是假设站点没有在路线上重复。如果站可以重复，那么问题变得有点困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T18:28:57.993

在 SQLServer2005+ 中，使用递归 CTE（公用表表达式）查找所有车站并将列车停靠点相加以进行比较

```
;WITH cte (id, r, s, st, max_level) AS
 (
  SELECT ROW_NUMBER() OVER(PARTITION BY t.r ORDER BY (SELECT 1)) as id,
         t.r, t.s, t.st,
         COUNT(*) OVER(PARTITION BY t.r) AS max_level
  FROM dbo.test11 t
  ), cte2 (id, r, s, st, max_level) AS
 (
  SELECT id, r, s, st, max_level
  FROM cte
  WHERE id = 1
  UNION ALL
  SELECT c.id, c.r, CAST(ISNULL(ct.s, '') + ', ' + ISNULL(c.s, '') AS nvarchar(100)) AS s,
         ct.st + c.st, c.max_level
  FROM cte c JOIN cte2 ct ON c.id = ct.id + 1 AND c.r = ct.r
)
SELECT c.r, c.s, c.st
FROM cte2 c JOIN cte2 ct ON c.s = ct.s AND c.r <> ct.r AND c.st <> ct.st
WHERE c.id = c.max_level AND ct.id = ct.max_level 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b2305/1/0)上的演示[](http://sqlfiddle.com/#!3/b2305/1/0)

 *** * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-18T03:09:53.480

只需搜索没有余数的关系除法或精确的关系除法。**

# java - 使用密钥和 iv 的 Java AES 块解密

> ID：13419702
> 
> 赞同：2
> 
> 时间：2012-11-16T15:36:53.433
> 
> 标签：java, security, aes

我正在尝试将 BouncyCastle 特定实现转换为通用实现，但由于我仍在努力学习基础知识，所以我很难做到。

这是之前有效的 BC 代码：

```
public int decrypt(SecurityToken token, byte[] dataToDecrypt, int inputOffset, 
      int inputLength, byte[] output, int outputOffset) {
  // Make new RijndaelEngine
  RijndaelEngine engine = new RijndaelEngine(128);

  // Make CBC blockcipher
  BufferedBlockCipher bbc = new BufferedBlockCipher(
      new CBCBlockCipher(engine));

  // find right decryption key and right initialization vector
  KeyParameter secret = new KeyParameter(
      token.getRemoteEncryptingKey());
  byte[] iv = token.getRemoteInitializationVector();

  // initialize cipher for decryption purposes
  bbc.init(false, new ParametersWithIV(secret, iv));
  decryptedBytes = bbc.processBytes(dataToDecrypt, inputOffset,
      inputLength, output, outputOffset);

  decryptedBytes += bbc.doFinal(output, outputOffset+decryptedBytes);
  return decryptedBytes;
} 
```

这是我迄今为止的谦虚尝试：

```
SecretKeySpec spec = new SecretKeySpec(
    token.getRemoteEncryptingKey(),
    "AES");

cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, spec, new IvParameterSpec(token.getRemoteInitializationVector()));
decryptedBytes = cipher.update(dataToDecrypt, inputOffset,
    inputLength, output, outputOffset);
decryptedBytes += cipher.doFinal(output, outputOffset+decryptedBytes);
return decryptedBytes; 
```

这使

```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

这是函数的输入：

```
decrypt: dataToDecrypt.length=1088 inputOffset=0 inputLength=1088 output.length=16384 outputOffset=1180
decrypt: token.getRemoteEncryptingKey()=lBjgFjfR3IilCyT5AqRnXQ==
decrypt: token.getRemoteInitializationVector()=0JFEdkuW6pMo0cwfKdZa3w== 
```

我错过了什么？

E：输入数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:27:42.950

通常`BadPaddingException`意味着：

*   原始明文未使用您建议的填充算法填充。因此，当数据被加密时，可能没有使用 PKCS#5。

*   您使用了错误的密钥进行解密。这导致解密完成后填充看起来不正确。

希望您可以查看您的环境并确定其中任何一个是否可能？查看您的 BouncyCastle 代码，我会假设您根本没有使用填充。尝试改变：

```
cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); 
```

到：

```
cipher = Cipher.getInstance("AES/CBC/NoPadding"); 
```

# android - 使用 MapView 在道路上的当前位置

> ID：13419703
> 
> 赞同：1
> 
> 时间：2012-11-16T15:36:54.897
> 
> 标签：android, google-maps

我做了一个简单的应用程序，每 5 秒验证一次设备的当前纬度和经度，使用 GPS，通过 LocationListener。

我希望我的应用程序像真正的 GPS 一样工作，我的意思是，地图将以设备位置为中心，并有一个简单的标记指向它，这是我已经实现的，但是当你把设备放在车里时，这是在现实生活中的情况，从 GPS 和网络服务获取 lat 和 loc 以获得更好的准确度，它可能会定位您“越野”，我希望指针每次都在路上......

我已经四处搜索，但我不知道使用什么方法来实现这一点，我唯一尝试的是将 MapView 类的 isRouteDisplayed() 方法更改为返回 TRUE，但似乎没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:50:37.043

我建议您查看有关如何正确使用定位服务的 android 文档的[这篇文章。](http://android-developers.blogspot.com.ar/2011/06/deep-dive-into-location.html)

它甚至提供代码来了解新位置是否比旧位置“更好”，基于准确性、提供者和位置的最后更新时间，因此当网络在 gps 更新后立即发送位置更新。

# php - PHP mail() 使用 iCalendar 发送原始电子邮件

> ID：13419705
> 
> 赞同：0
> 
> 时间：2012-11-16T15:37:04.057
> 
> 标签：php, windows, email, icalendar

我希望能够发送多部分/替代电子邮件（特别是文本/日历编码项目，以便 Outlook、gmail 等打开他们的菜单以与附加的约会进行交互（允许用户将其添加到他们的自己的个人日历）。电子邮件服务器是一个不同的盒子，显然我是通过匿名 SMTP 发送的。以下是传递给 php 5.3.6 mail() 方法的标题和消息：

```
From: TestNet
Reply-To: TestNet
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="--Meeting Booking--fec0d81281514f7f839dc4cf0c117f64"
Content-class: urn:content-classes:calendarmessage
--Meeting Booking--fec0d81281514f7f839dc4cf0c117f64
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 8bit

Dear Robert Burnham,

Here is my HTML Email / Used for Meeting Description

--Meeting Booking--fec0d81281514f7f839dc4cf0c117f64
Content-Type: text/calendar;name="meeting.ics";method=REQUEST;charset=utf-8
Content-Transfer-Encoding: 8bit

BEGIN:VCALENDAR 
PRODID:-//Microsoft Corporation//Outlook 11.0 MIMEDIR//EN 
VERSION:2.0 
METHOD:PUBLISH 
BEGIN:VEVENT 
ORGANIZER:MAILTO:test@test.net 
DTSTART:20121206T134000Z 
DTEND:20121206T144000Z 
LOCATION:My Office 
TRANSP:OPAQUE 
SEQUENCE:0 
UID:20121116T092255-9178@mydomain.com 
DTSTAMP:20121116T152255Z 
DESCRIPTION:Here is a brief description of my meeting

SUMMARY:Meeting Booking 
PRIORITY:5 
CLASS:PUBLIC 
END:VEVENT 
END:VCALENDAR 
```

电子邮件发送成功，但是我发现我传入的 $message 被视为原始 HTML（以下内容出现在电子邮件的实际正文中）：

```
--Meeting Booking--b37b5edb86b3e7047ce15b2b348159d7
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 8bit

<html>
<body>
<p>Dear Robert Burnham,</p><p>Here is my HTML Email / Used for Meeting Description</p>
</body>
</html>
--Meeting Booking--b37b5edb86b3e7047ce15b2b348159d7
Content-Type: text/calendar;name="meeting.ics";method=REQUEST;charset=utf-8\nContent-Transfer-Encoding: 8bit\n\nBEGIN:VCALENDAR
PRODID:-//Microsoft Corporation//Outlook 11.0 MIMEDIR//EN
VERSION:2.0
METHOD:PUBLISH
BEGIN:VEVENT
ORGANIZER:MAILTO:mailer@personalhealthsurvey.net
DTSTART:20121206T134000Z
DTEND:20121206T144000Z
LOCATION:My Office
TRANSP:OPAQUE
SEQUENCE:0
UID:20121116T092814-12916@mydomain.com
DTSTAMP:20121116T152814Z
DESCRIPTION:Here is a brief description of my meeting

SUMMARY:Meeting Booking
PRIORITY:5
CLASS:PUBLIC
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:35:07.213

作为最后的后续行动，我自己完成了这项工作，但拥有 oberron 的链接：[Here](https://stackoverflow.com/questions/461889/sending-outlook-meeting-requests-without-outlook)会更容易。话虽如此，我最终撤消了所有工作，并故意“破坏”了 iCalendar 附件，这样它就不会被 Outlook 识别。好像 Outlook 的 HTML 解析还不够糟糕（因为它使用内置于 Microsoft Word 中的相同 HTML 解析器），当识别出“有效”的 iCalendar 会议附件时，解析器会进入一个令人难以置信的基本模式，我无法工作大约。尤其是 HTML 解析，很糟糕..这显然是预期的功能（当您在 Outlook 中创建电子邮件并附加事件时，**所有**与 html 编辑相关的按钮/功能都会为该消息消失。

最后，可以容忍的 HTML 格式值得用户自己单击 iCalendar 附件。

# ruby-on-rails - Heroku 计划任务使用 Net::HTTP 库发出 HTTP GET 请求 - Ruby on Rails

> ID：13419708
> 
> 赞同：0
> 
> 时间：2012-11-16T15:37:11.010
> 
> 标签：ruby-on-rails, heroku, scheduled-tasks, http-get, net-http

我正在尝试使用 Heroku 计划任务，该任务对特定控制器的操作进行 HTTP GET。这是任务的样子：

```
require 'net/http'

desc "This task is called by the Heroku scheduler add-on"
task :send_notifications => :environment do
    Net::HTTP.get("http://testapp.com", "/test/send_notifications")
end 
```

运行时：

```
heroku rake send_notifications 
```

我收到以下错误：

```
rake aborted!
getaddrinfo: Name or service not known
/app/lib/tasks/scheduler.rake:5:in `block in <top (required)>' 
```

有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:00:48.477

一个干净的解决方案可能是将请求逻辑放在您在 Rails 应用程序目录中的任何位置创建的特殊类的类方法中。

```
# app/workers/request_worker.rb
class RequestWorker
  # Request X from Y
  def self.retrieve_testapp
    # Do anything nescessary to build and execute the request in here
  end
end 
```

然后，您可以通过 Rails 运行器使用 Heroku Scheduler 插件安排请求（让您在 Rails 应用程序的上下文中执行任何命令。）

```
rails runner RequestWorker.retrieve_testapp 
```

要真正从 Ruby/Rails 执行 HTTP 请求，有[很多有用的 gem](http://www.knight.io/categories/http-clients-ruby)。不错的是[Excon](https://github.com/geemus/excon)和[HTTP Client](https://github.com/nahi/httpclient)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:32:32.710

我决定使用已经处理好的“HTTParty”库：

```
response = HTTParty.get('http://testapp.com/test/send_notifications') 
```

# sql - 我应该在 MS Access 中使用什么 SQL 查询从两个表中获取数据，其中一个表中可能没有任何数据

> ID：13419713
> 
> 赞同：4
> 
> 时间：2012-11-16T15:37:46.597
> 
> 标签：sql, database, vba, ms-access

我有一个 Access 数据库，可以跟踪工厂车间的机器。我正在使用两个表：

1.  `marstable`- 每台机器已完成的操作列表
2.  `statustable`- 机器状态更改列表

`marstable`其中大约有 100,000 个条目，而`statustable`少于 100 个。

我需要一次查找一台机器才能找到以下三件事之一：

1.  ***如果机器在两个表中都有条目***，则返回两个表中的数据。
2.  ***如果机器只有 中的条目*** `marstable`，则返回该表中的数据。
3.  ***如果机器只有 中的条目*** `statustable`，则返回该条目中的数据。

**如何执行 SQL 查询来完成此操作？** 现在，使用左连接，除了在`statustable`（左连接的“右”部分）中只有数据的情况下，它可以工作。

`marstable`是按时间顺序排列的交易列表，如下所示：

```
+--------+----------+-----------+----------+-----------------------+
| order  | machine  | operation | quantity |      insertdate       |
+--------+----------+-----------+----------+-----------------------+
|  12345 | A10      |       110 |     2339 | 11/16/2012 9:57:15 AM |
|  67890 | B11      |       450 |    10330 | 11/16/2012 9:15:03 AM |
+--------+----------+-----------+----------+-----------------------+ 
```

`statustable`是按时间顺序排列的机器状态变化列表。看起来像：

```
+---------+--------+-----------------------+--------+
| machine | status |      inserttime       |  note  |
+---------+--------+-----------------------+--------+
| A10     |      6 | 11/5/2012 10:52:22 AM | broken |
| J90     |      7 | 11/9/2012 12:48:46 PM | robot  |
+---------+--------+-----------------------+--------+ 
```

我使用的 SQL 查询如下所示：

```
SELECT TOP 1 [machine], [quantity], [order], [operation], [insertdate], [status], [inserttime], [note]
FROM [marstable] LEFT JOIN [statustable] ON [marstable].[machine] = [statustable].[machine]
WHERE [marstable].[machine] = '<<machine I want get's passed in here>>'
ORDER BY [marstable].[insertdate] DESC, [statustable].[inserttime] DESC 
```

问题是，当 中不存在条目`marstable`但 中有一个时`statustable`，*我仍然什么也得不到。*

**提前感谢您的帮助**。此外，我无法控制表格的外观。

最后，请原谅我对上述表格缺乏 ascii-art Skillz。

***更新＃1：***

我正在尝试从他下面的一个答案中实现@Olivier 的子查询解决方案。但是，当我这样做时，**我得到一个错误** `too few parameters. Expected 2.`

我的实现与他的不同之处在于我将机器 ID 传递给生成 SQL 的函数，而不是请求参数。

SQL 是这样生成的

```
MarsSQL = _
    "SELECT M.msg_machine, M.msg_qtyorstatus, M.msg_entity, M.msg_operation, M.msg_creator, M.msg_insertdate, " & _
        "S.Machine, S.Status, S.InsertTime, S.Note, S.UserID " & _
    "FROM " & _
        "(SELECT TOP 1 msg_machine, msg_qtyorstatus, msg_entity, msg_operation, msg_creator " & _
        "FROM MARSTable WHERE msg_machine = '" & "00" & fMachine & "' ORDER BY msg_insertdate DESC" & _
        ") M, " & _
        "(SELECT TOP 1 Machine, Status, InsertTime, Note " & _
        "FROM StatusTable WHERE Machine = '" & fMachine & "' ORDER BY InsertTime DESC" & _
        ") S;" 
```

`fMachine`是一个字符串，它包含我们当前正在寻找的机器。最终结果是 SQL 看起来像这样（*对于机器 A10*）：

```
 SELECT M.msg_machine, M.msg_qtyorstatus, M.msg_entity, M.msg_operation, M.msg_creator, M.msg_insertdate,
        S.Machine, S.Status, S.InsertTime, S.Note, S.UserID
    FROM
        (SELECT TOP 1 msg_machine, msg_qtyorstatus, msg_entity, msg_operation, msg_creator
        FROM MARSTable WHERE msg_machine = '00A10' ORDER BY msg_insertdate DESC
        ) M,
        (SELECT TOP 1 Machine, Status, InsertTime, Note
        FROM StatusTable WHERE Machine = 'A10' ORDER BY InsertTime DESC
        ) S; 
```

**注意：**我最初的示例使用了表的简化版本，但这个 SQL 是我生成的实际 SQL。 **另外**，我已经尝试过在每个字段/表格周围使用和不使用[方括号]，它没有任何区别。

***更新#2：***我错过了第二个子查询中的一个字段。我添加了它，现在我得到了同样的错误，除了它说我缺少**1**参数，而不是**2**。现在 SQL 看起来像这样：

```
SELECT M.msg_machine, M.msg_qtyorstatus, M.msg_entity, M.msg_operation, M.msg_creator, M.msg_insertdate,
    S.Machine, S.Status, S.InsertTime, S.Note, S.UserID
FROM
    (SELECT TOP 1 msg_machine, msg_qtyorstatus, msg_entity, msg_operation, msg_creator
    FROM MARSTable WHERE msg_machine = '00A10' ORDER BY msg_insertdate DESC
    ) M,
    (SELECT TOP 1 Machine, Status, InsertTime, Note, UserID
    FROM StatusTable WHERE Machine = 'A10' ORDER BY InsertTime DESC
    ) S; 
```

`UserID`是我在第二个子查询中缺少的字段。

***已解决：***我在第一个子查询中缺少另一个字段。一旦我澄清了这一点，解决方案就奏效了。SQL 现在看起来像这样：

```
SELECT M.msg_machine, M.msg_qtyorstatus, M.msg_entity, M.msg_operation, M.msg_creator, M.msg_insertdate,
    S.Machine, S.Status, S.InsertTime, S.Note, S.UserID
FROM
    (SELECT TOP 1 msg_machine, msg_qtyorstatus, msg_entity, msg_operation, msg_creator, msg_insertdate 
    FROM MARSTable WHERE msg_machine = '00A10' ORDER BY msg_insertdate DESC
    ) M,
    (SELECT TOP 1 Machine, Status, InsertTime, Note
    FROM StatusTable WHERE Machine = 'A10' ORDER BY InsertTime DESC
    ) S; 
```

**感谢所有在这里提供帮助的人。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:50:48.280

我怀疑 Access 是否完全外部连接。可能在最新版本中有所改进，但我不记得在 Access 中看到过这个。这是一个访问解决方案：

1.  创建一个查询，返回任一表中的所有机器 ID：

    SELECT DISTINCT machine FROM marstable UNION SELECT DISTINCT machine FROM statustable

2.  将该查询另存为，例如 QRY_MachinesAnywhere

3.  创建第二个查询 LEFT JOIN 将此查询连接到两个表：

    从 QRY_MachinesAnywhere 任何地方选择任何地方 LEFT JOIN statustable ON anywhere.machine=statustable.machine LEFT JOIN marstable ON anywhere.machine=marstable.machine

（确切的语法可能略有不同 - Access 似乎喜欢 JOINed FROM 表达式中的括号，并且一次只连接两个东西 - 并且可能需要“QRY_MachinesAnywhere”和“anywhere”之间的显式 AS：但如果您添加 Qry_MachinesAnywhere 和原始使用 UI 设计器将表放入查询中，在机器上加入，你应该没问题）。

请注意，您需要进入 SQL 视图才能创建原始 UNION 查询。在设计器中无法做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:45:43.440

由于您只需要一行，因此您可以使用两个返回一行的子查询来完成，并且根本不需要加入它们

```
PARAMETERS param Text(50);
SELECT
    [param] AS machine,
    M.quantity, M.[order], M.operation, M.insertdate,
    S.status, S.inserttime, S.note
FROM
    ( SELECT TOP 1 machine, quantity, [order], operation, insertdate
      FROM marstable
      WHERE machine = [param]
      ORDER BY insertdate DESC
    ) M,
    ( SELECT TOP 1 machine, status, inserttime, note
      FROM statustable
      WHERE machine = [param]
      ORDER BY inserttime DESC
    ) S 
```

# c# - 如何在 Media.AfterSave 事件处理程序中获取当前 Umbraco 用户？

> ID：13419718
> 
> 赞同：2
> 
> 时间：2012-11-16T15:38:02.290
> 
> 标签：c#, umbraco

当我在 umbraco 中保存媒体文件时，我得到了 aftersave 事件，但我不知道如何在这种情况下获取当前用户。

事件： http: [//our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register-events/overview-of-all-events](http://our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register-events/overview-of-all-events)

我试过了，但没有用：http: [//our.umbraco.org/forum/developers/extending-umbraco/5317-current-login-user](http://our.umbraco.org/forum/developers/extending-umbraco/5317-current-login-user)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:15:49.607

我认为这只是：

```
User currentUser = User.GetCurrent(); 
```

*（虽然我没有测试过）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T14:46:13.760

如果@Douglas Ludlow 的解决方案不起作用，试试这个：

```
var userTicket = new System.Web.HttpContextWrapper(System.Web.HttpContext.Current).GetUmbracoAuthTicket();
if (userTicket != null)
{
    var currentUser = ApplicationContext.Current.Services.UserService.GetByUsername(userTicket.Name);
} 
```

# c++ - 关键字自动默认为哪种类型？

> ID：13419725
> 
> 赞同：2
> 
> 时间：2012-11-16T15:38:24.440
> 
> 标签：c++, c++11

目前正试图让我的头脑围绕 C++11 并且刚刚发现了 auto 关键字。

我想知道使用 auto 它会默认给定特定值的类型。

例如，整数值为 65535，会默认为 unsigned int、signed int、unsigned short 等吗？还是它只是保持自动而不需要默认任何东西？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T15:40:14.627

它不会“默认”任何东西。`65535`是`int`，根据定义，在这种情况下`auto`也是`int`如此。例如，如果你做了`65535L`，那么它就是一个`long`，并且`auto`会是一个`long`。

请注意，以上考虑的是“典型”系统。如果对于（可能是因为在这个其他系统上是 16 位）`65535`来说太大，编译器会给它一个更大的类型，以便它“适合”到它自己的数据类型，（在这种情况下，），在这种情况下变成. 关于整数文字类型的确切规则在标准的第 2.14.2 节中给出（感谢 Benjamin Lindley 和 James Kanze）。但是，要记住的重要部分是，对于某物的类型，有特定的、明确的规则，因此永远不必猜测或“默认”任何东西。`int``int``65535``long``auto``long``auto`

# jquery - 能够自动运行以下jquery

> ID：13419726
> 
> 赞同：0
> 
> 时间：2012-11-16T15:38:26.603
> 
> 标签：jquery

有没有人使用过以下 jquery 插件？我可以通过单击箭头来切换图像，但我喜欢图像一个接一个地自动显示。我很想知道这是否是将此幻灯片放映作为自动播放运行的选项。

这是插件的网站：

```
http://www.marcofolio.net/webdesign/jfancytile_a_jquery_tile_shifting_image_viewer_plugin.html

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.jfancytile.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        // Default
        $("#fancytile").jfancytile();

        // With options
        $("#fancytile").jfancytile({
            inEasing: "easeOutBounce", // from jQuery Easing Plugin
            outEasing: "easeInCirc", // from jQuery Easing Plugin
            inSpeed: 2000,
            outSpeed: 3500,
            rowCount: 5,
            columnCount: 10,
            maxTileShift: 5
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:53:21.170

您可以使用小技巧：

```
var iID;
clearInterval(iID);
iID = setInterval(
    function() {
        $('.jfancytileForward').trigger('click');    
    }, 
    1500
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:53:50.693

您总是可以尝试`setInterval`触发对箭头的点击：

```
// trigger a click on the 'next' arrow every 5 seconds
// use clearInterval(nextInterval) to remove timer
var nextInterval = setInterval(function(){
    $('#arrowSelectorHere').trigger('click');
}, 5000); 
```

非常hacky，但应该工作......？

# c# - 初始化 StringCollection 设置

> ID：13419728
> 
> 赞同：10
> 
> 时间：2012-11-16T15:38:27.530
> 
> 标签：c#, settings, stringcollection

我正在编写一个应用程序，我想存储用户选择的文件列表。目前，我的一个设置是一个名为 filesToFetch 的 StringCollection，它是用户范围的，包含程序应该获取的所有文件的路径。我有一个按钮，允许用户将新文件添加到列表中。这是按钮单击事件的代码

```
private void button1_Click(object sender, EventArgs e)
{
    DialogResult result = openFileDialog1.ShowDialog();
    if (result == DialogResult.OK)
    {
        Properties.Settings.Default.filesToFetch.Add(openFileDialog1.FileName);
        Properties.Settings.Default.Save();
    }
} 
```

当我尝试将新文件添加到 StringCollection 时，出现错误

NullReference 异常未处理

你调用的对象是空的。

我认为这可能是因为 filesToFetch 尚未初始化，但我不太确定。我可能是错的，但我认为一个对象在初始化时会获得一个名称，并且由于我的设置都是在设计时获得名称，我假设它们在程序运行时自动初始化，但现在我想我可能错了对这个。这是问题，还是我错过了其他东西？

这是我的设置的屏幕截图以供参考。

![属性设置](../Images/cb5194bb8a45b563506fed594d993af3.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-18T01:28:34.847

如果您想在设置 GUI 中输入值，在最右侧有一个“...”按钮，允许您输入每个分隔在一行中的初始字符串值。然后它将其转换为 XML，如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <string>String1</string>
  <string>String2</string>
</ArrayOfString> 
```

编辑：是的，您需要初始化 StringCollection，而我上面的答案是使用 GUI 进行初始化的方法。认为它会帮助那些偶然发现这篇文章的人（像我一样）寻找一种方法来初始化像 OP 需要做的 StringCollection 设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:49:31.820

我可能应该进一步解释一下。假设您要使用字符串列表。您可以声明：

```
IList<string> a; 
```

此时 a = null 并且 null 没有 Add 方法。如果你初始化：

```
IList<string> a = new List<string>(); 
```

现在 a = 一个空的字符串列表。此时它将有一个 Add 方法用于将字符串添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T04:36:53.873

我在使用 add 方法时遇到了类似的问题，但是使用 index 和 value 参数插入效果很好。

[https://msdn.microsoft.com/en-us/library/system.collections.specialized.stringcollection.insert%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.collections.specialized.stringcollection.insert%28v=vs.110%29.aspx)

像这样的东西可能会起作用：

```
private void button1_Click(object sender, EventArgs e)
{
    DialogResult result = openFileDialog1.ShowDialog();
    if (openFileDialog1.ShowDialog(this) != DialogResult.OK)
        return;
    int x = 0;
    foreach (String file in openFileDialog1.FileNames)
    {
        Properties.Settings.Default.activeFiles.Insert(x, openFileDialog1.Filename);
        x++;
    }

    Properties.Settings.Default.Save();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-17T20:57:54.923

虽然问题很棘手，但解决方案很简单。像你一样创建一个设置。将以下代码复制并粘贴到`Default Value`并继续以您的方式工作。

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" /> 
```

说明[在 C# 中使用字符串集合设置](http://csharphelper.com/blog/2016/06/use-a-string-collection-setting-in-c/)

希望这可以帮助。谢谢你。

# objective-c - UICollectionView insertItemsAtIndexPaths Throws NSInternalInconsistencyException

> ID：13419729
> 
> 赞同：0
> 
> 时间：2012-11-16T15:38:34.317
> 
> 标签：objective-c, ios, ios6, uicollectionview

I am experiencing a problem with a custom layout object on a UICollectionView. When inserting items, an `NSInternalInconsistencyException` is thrown:

> 2012-11-16 10:01:18.920 MyApp[4520:430b] *** Assertion failure in -[NSIndexPath row], /SourceCache/UIKit/UIKit-2372/UITableViewSupport.m:2680 2012-11-16 10:01:18.924 MyApp[4520:430b]** **Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid index path for use with UITableView. Index paths passed to table view must contain exactly two indices specifying the section and row. Please use the category on NSIndexPath in UITableView.h if possible.' *** First throw call stack: (0x370282a3 0x33eb097f 0x3702815d 0x347d72af 0x338c29bb 0x33cb8e1f 0x33ca95db 0x9cff9 0x33ca44b5 0x33ca5e73 0x33ca4295 0x33ca69d9 0x9a0a9 0xa554f 0x34797539 0x3478edb9 0x348073db 0x360cb11f 0x360cf961 0x360cfac1 0x36dd3a11 0x36dd38a4) libc++abi.dylib: terminate called throwing an exception*

 *Here is the code that starts the insert:

```
GetItemsRequest *request = [[GetItemsRequest alloc] init];
self.activeConnection = [[ServiceConnection alloc] initWithRequest:request
                                                        completion:^(GetItemsResponse *response, NSError *error) {

                                                            [self.collectionView performBatchUpdates:^{
                                                                [self.items addObjectsFromArray:response.items];
                                                                NSMutableArray *newIndexPaths = [NSMutableArray array];
                                                                for (Item *item in response.items)
                                                                {
                                                                    [newIndexPaths addObject:[NSIndexPath indexPathForItem:[self.items indexOfObject:item]
                                                                                                                 inSection:0]];
                                                                }
                                                                [self.collectionView insertItemsAtIndexPaths:newIndexPaths];
                                                            } completion:NULL];                                                                
                                                            [self.pullRefreshView refreshLastUpdatedDate];
                                                            [self.pullRefreshView scrollViewDataSourceDidFinishedLoading:self.collectionView];
                                                            self.activeConnection = nil;
                                                        }];
[self.activeConnection start]; 
```

This code works if I replace my custom layout object with a `UICollectionViewFlowLayout` object, so I think it is correct. The custom layout works if I simply call `[self.collectionView reloadData]`, so there must be something wrong with how the layout object handles inserts.

The crash occurs in the call to `super`:

```
- (void)prepareForCollectionViewUpdates:(NSArray *)updateItems
{
    [super prepareForCollectionViewUpdates:updateItems];

    for (UICollectionViewUpdateItem *item in updateItems)
    {
        if (item.updateAction == UICollectionUpdateActionDelete)
        {
            _items--;
        }
        else if (item.updateAction == UICollectionUpdateActionInsert)
        {
            _items++;
        }
    }
    _rows = -1;
} 
```

Yet, when I print the description of `updateItems`, all of the index path do, in fact, have 2 indexes:

> `<__NSArrayM 0x1f06af20>( <UICollectionViewUpdateItem: 0x1ddc2360> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1eb0> 2 indexes [0, 0]) action (insert), <UICollectionViewUpdateItem: 0x1ddc23d0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1f00> 2 indexes [0, 1]) action (insert), <UICollectionViewUpdateItem: 0x1ddc23f0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1f20> 2 indexes [0, 2]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2410> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1f50> 2 indexes [0, 3]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2430> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1f80> 2 indexes [0, 4]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2470> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1e00> 2 indexes [0, 5]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2490> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1e20> 2 indexes [0, 6]) action (insert), <UICollectionViewUpdateItem: 0x1ddc24b0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1fe0> 2 indexes [0, 7]) action (insert), <UICollectionViewUpdateItem: 0x1ddc24d0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2010> 2 indexes [0, 8]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2450> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc1fb0> 2 indexes [0, 9]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2530> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2090> 2 indexes [0, 10]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2550> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc20c0> 2 indexes [0, 11]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2570> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc20f0> 2 indexes [0, 12]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2590> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2120> 2 indexes [0, 13]) action (insert), <UICollectionViewUpdateItem: 0x1ddc25b0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2150> 2 indexes [0, 14]) action (insert), <UICollectionViewUpdateItem: 0x1ddc25d0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2180> 2 indexes [0, 15]) action (insert), <UICollectionViewUpdateItem: 0x1ddc25f0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc21b0> 2 indexes [0, 16]) action (insert), <UICollectionViewUpdateItem: 0x1ddc2680> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2250> 2 indexes [0, 17]) action (insert), <UICollectionViewUpdateItem: 0x1ddc26a0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc2280> 2 indexes [0, 18]) action (insert), <UICollectionViewUpdateItem: 0x1ddc26c0> index path before update ((null)) index path after update (<NSIndexPath 0x1ddc22b0> 2 indexes [0, 19]) action (insert) )`

So why would this code throw an exception saying that *exactly two* indexes are required? Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:11:06.327

知道了。我在为*headers*`[NSIndexPath indexPathWithIndex:]`创建布局属性时使用。由于布局对象决定了补充视图的索引路径意味着什么，我想我可以只用一个索引。显然不是。*

# python - How to run multiple scrapyd servers?

> ID：13419734
> 
> 赞同：2
> 
> 时间：2012-11-16T15:38:40.790
> 
> 标签：python, web-scraping, scrapy, scrapyd

I have been searching for documentation on the Scrapyd Service but it is very slim. I was wondering if anyone has any idea how to set up multiple Scrapyd servers that point to the same schedule queue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:35:16.423

我不知道有任何“保存计划队列”，但是通过打开几个屏幕并运行来运行多个scrapyd 很容易`scrapy server`。

您可以通过在 PROJECT_DIRECTORY/scrapyd.conf 中设置/更改以下选项来调整 scrapyd 的端口号：

```
[scrapyd]
http_port = 6969 
```

通过[http://doc.scrapy.org/en/latest/topics/scrapyd.html#starting-scrapyd](http://doc.scrapy.org/en/latest/topics/scrapyd.html#starting-scrapyd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:18:04.697

使用相同的 sqlite 数据库怎么样？dbs_dir 设置在`scrapyd.script._get_config()`.

# c++ - Is it worth including type_traits only to get the underlying type of an enum?

> ID：13419737
> 
> 赞同：0
> 
> 时间：2012-11-16T15:38:57.607
> 
> 标签：c++, enums, typetraits

I was wondering if it is really worth it to include the `type_traits` header just to get the underlying type of an enum. I'm creating a Flags class that I want to be as flexible as possible so I'm using `std::underlying_type<T>::type` to get the type. I could use `int` for example but what if user wants to use more than 32 flags? So my question is, could it slow down compilation times anyhow significantly when used frequently?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:53:10.567

如果你需要 std::underlying_type 那么你需要它。编写自己的代码或损害您的代码是没有意义的。如果你想最小化编译时间，那么在头文件中前向声明模板类，并且只在 .cxx 文件中使用 type_traits.cxx ，这样你就不必在不同的文件中继承你不需要的头文件.

# linux - What is the meaning of this 'typedef' in Linux kernel?

> ID：13419738
> 
> 赞同：0
> 
> 时间：2012-11-16T15:39:01.367
> 
> 标签：linux, kernel

```
typedef void (*work_func_t)(struct work_struct *work); 
```

I found above typedef in Linux kernel source code, but I don't understand it. Can anyone give me some explaination? Thanks!

Complement:

```
struct work_struct {
    atomic_long_t data;
#define WORK_STRUCT_PENDING 0       /* T if work item pending execution */
#define WORK_STRUCT_STATIC  1       /* static initializer (debugobjects) */
#define WORK_STRUCT_FLAG_MASK (3UL)
#define WORK_STRUCT_WQ_DATA_MASK (~WORK_STRUCT_FLAG_MASK)
    struct list_head entry;
    work_func_t func;
#ifdef CONFIG_LOCKDEP
    struct lockdep_map lockdep_map;
#endif
}; 
```

From the above code which follows the "typedef", I could understand it now. @piokuc is right, thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:40:46.247

`work_func_t` is a type alias of a pointer to a function which accepts pointer to `struct work_struct` as it's only parameter and returns nothing (`void`).

# sql-server - bcp - dump via xp_cmdshell vs. sp_oaMethod Security

> ID：13419748
> 
> 赞同：4
> 
> 时间：2012-11-16T15:39:25.657
> 
> 标签：sql-server, security, xp-cmdshell

I'm using Microsoft SQL Server 2008 R2 and I try to dump a table via bcp (with a scheduled Job). First of all I implemented it with xp_cmdshell, but I've heard, that this should be avoided due to security reasons.

So my question: What's about sp_oaMethod? Should it be used? If not, why not? And could you suggest other possibilities?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:59:36.567

比`xp_cmdshell`使用“CmdExec”或“Powershell”类型的 SQL 代理作业步骤更好的解决方案。

[CmdExec](http://msdn.microsoft.com/en-us/library/ms190264.aspx)将是我对`BCP.exe`. 创建作业步骤需要系统管理员凭据。

如果您需要执行任何其他任务，例如压缩提取的文件并将其复制到网络共享，[Powershell就是您的选择。](http://msdn.microsoft.com/en-us/library/cc280490.aspx)

# php - 遍历整个数组

> ID：13419749
> 
> 赞同：-1
> 
> 时间：2012-11-16T15:39:27.560
> 
> 标签：php, arrays

> **可能重复：**
> [循环数组数组](https://stackoverflow.com/questions/8055123/loop-an-array-of-array)

我想知道是否可以遍历整个数组来显示每个这样的结果

大批：

```
 $input = array("a" => "green", "red", "b" => "green", "blue", "red", "c"=> array("grey",
 "black", "yellow", "red" => "something")); 
```

然后得到这样的结果：

绿色 红色 绿色 蓝色 红色 灰色 黑色 黄色 某物

你可以说我希望显示每个数组的最终值，如果它本身不是一个值数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:43:29.740

您可以使用递归函数来迭代所有值。

```
function outputValues($arr) {
  foreach (array_values($arr) as $value) {
    if (is_array($value))
        outputValues($value);
    else
        echo $value;
  }
} 
```

并像使用它一样`outputValues($input)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:42:29.137

做一个 foreach 并检查数组。

```
<?php

$input = array("a" => "green", "red", "b" => "green", "blue", "red", "c"=> array("grey",
 "black", "yellow", "red" => "something"));

foreach( $input as $value )
{
    if( is_array( $value ) )
    {
        foreach( $value as $subvalue )
        {
            echo $subvalue . ' ';
        }
    }
    else
    {
        echo $value . ' ';
    }
} 

?> 
```

PS：使用递归函数可以做得更好，但我懒得为你写一个；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:48:11.750

```
function p($array) {
    if( !is_array( $array)) {
        echo $array . ' ';
    }else{
        foreach ($array as $k => $v) {
            if(!is_array($v)){
                echo $v . ' ';
            }else{
                p($v)
            }
        }
    }
}

p($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:58:49.050

最简单的解决方案是`array_walk_recursive`这样做：

```
<?php
$input = array("a" => "green", "red", "b" => "green", "blue", "red", "c"=> array("grey", "black", "yellow", "red" => "something"));

array_walk_recursive($input, function($value){
    echo $value . " ";
}); 
```

然后输出：
`green red green blue red grey black yellow something`

这是 php 5.4 我相信，旧版本的 php 你需要将函数名作为字符串并使用然后创建函数

较旧的 PHP 版本：

```
function myfunction($value){
    echo $value . " ";
}
array_walk_recursive($input, 'myfunction'); 
```

# c# - show all cells text vertically in datagridview

> ID：13419751
> 
> 赞同：5
> 
> 时间：2012-11-16T15:39:35.383
> 
> 标签：c#, .net, winforms, c#-4.0, datagridview

According to [`this`](https://stackoverflow.com/questions/5782674/net-winforms-vertical-text-in-datagridview) we can show a DataGridView Column text in vertical orientation. Now my question is how can we make to show all the DataGridView Cell text orientation vertically?

Any help will be appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:59:32.717

你可以使用**WPF**。但是如果你想使用**WinForm**你可以**DevExpress**。**用于WPF**的 Aslo DevExpress usd

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T09:44:22.260

这里使用了 CellPainting 事件。

```
private void Form1_Load(object sender, EventArgs e)
    {
    dataGridView1.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.EnableResizing;
    dataGridView1.ColumnHeadersHeight = 50;
    dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCellsExceptHeader;

    // Here we attach an event handler to the cell painting event
    dataGridView1.CellPainting += new DataGridViewCellPaintingEventHandler(dataGridView1_CellPainting);
    }
        void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
        {
            // check that we are in a header cell!
            if (e.RowIndex == -1 && e.ColumnIndex >= 0)
            {
                e.PaintBackground(e.ClipBounds, true);
                Rectangle rect = this.dataGridView1.GetColumnDisplayRectangle(e.ColumnIndex, true);
                Size titleSize = TextRenderer.MeasureText(e.Value.ToString(), e.CellStyle.Font);
                if (this.dataGridView1.ColumnHeadersHeight < titleSize.Width)
                {
                    this.dataGridView1.ColumnHeadersHeight = titleSize.Width;
                }

                e.Graphics.TranslateTransform(0, titleSize.Width);
                e.Graphics.RotateTransform(-90.0F);

                // This is the key line for bottom alignment - we adjust the PointF based on the 
                // ColumnHeadersHeight minus the current text width. ColumnHeadersHeight is the
                // maximum of all the columns since we paint cells twice - though this fact
                // may not be true in all usages!   
                e.Graphics.DrawString(e.Value.ToString(), this.Font, Brushes.Black, new PointF(rect.Y - (dataGridView1.ColumnHeadersHeight - titleSize.Width) , rect.X));

                // The old line for comparison
                //e.Graphics.DrawString(e.Value.ToString(), this.Font, Brushes.Black, new PointF(rect.Y, rect.X));

                e.Graphics.RotateTransform(90.0F);
                e.Graphics.TranslateTransform(0, -titleSize.Width);
                e.Handled = true;
            }
        } 
```**

# sql-server - 使用“use”语句创建存储过程

> ID：13419752
> 
> 赞同：7
> 
> 时间：2012-11-16T15:39:37.613
> 
> 标签：sql-server, sql-server-2008

我继承了一个 ms sql server 2008 服务器应用程序，在检查存储过程时，我注意到它们以`USE [ELECS]`语句开头，**ELECS**是数据库名称。

当我试图重新创建一个存储过程时，我得到的是一个错误，说存储过程不能有 use 语句。

> 消息 154，级别 15，状态 1，过程 TESTME，第 3 行不允许在过程、函数或触发器中使用 USE 数据库语句。

ms sql server 是否有允许这样做的特殊功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T15:42:17.133

您很可能在/语句`USE`上方看到了。`CREATE``ALTER PROCEDURE`

在这种情况下，它被用来设置程序应该在哪个数据库上更新。

它不能在存储过程中使用，但如果您希望引用不同的数据库，您可以在表引用中进行设置。即：对于一个`SELECT`声明：

```
SELECT *
FROM [DatabaseName].dbo.[TableName] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-03T13:41:21.297

使用`Go`before`USE[databaseName]`语句。在 SQL 2005 中为我工作

例子：

```
GO

USE [Database_Name]

Go

ALTER PROCEDURE [dbo].[Procedure_name] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T15:41:08.430

某些“顶级”语句需要首先出现在执行块中。你可以用这个词来关闭/关闭一个执行块`GO`

所以：

```
USE [db]
GO

CREATE PROC.... 
```

如果您正在谈论存储过程中的`USE`语句，那么不，您不能这样做。sproc 已经被创建它的数据库所限定。如果你想访问另一个数据库，你需要使用三部分命名，例如`ELECS.dbo.tablename`假设`dbo`是你的模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T15:42:56.303

没错，USE 语句实际上并不是存储过程的一部分，而是它自己的语句来指示工具（即企业管理器或查询分析器）使用哪个数据库。它永远不会被发送到 sql server 本身并且对它没有任何意义......

# object - How to store an Object, an int and a index at the same time? (Android)

> ID：13419753
> 
> 赞同：0
> 
> 时间：2012-11-16T15:39:38.237
> 
> 标签：object, indexing, int

I have a situation where I want to store a `bitmap(Object)`, int `value(speed of bitmap)` and another index value to access these other 2\. Any ideas? Was thinking in using `HashMap` however, hashmaps only deals with the `Object` and `Index`, but need another integer value that will be associated with that specific `Object`!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:46:28.820

看起来您需要位图和速度的专用类型。如果索引用于检索其他两个值，请将它们打包成一个类型：

```
class FlyingBitmap{
        private Bitmap bitmap;
        private double speed;
        ...
    } 
```

并使用`HashMap`

```
Map<Integer, FlyingBitmap> map = new HashMap<Integer, FlyingBitmap>(); 
```

# c++ - How to force CFileDialog to access path longer than 256 characters?

> ID：13419754
> 
> 赞同：0
> 
> 时间：2012-11-16T15:40:00.530
> 
> 标签：c++, unicode, mfc, cfiledialog

According to [this document](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx "Naming Files, Paths, and Namespaces (Windows)"), it is possible to create and use files with names exceeding 256 chars. I have actually tested this before, and it works fine, also for Unicode charaters.

But my question is there any possibility to force class CFileDialog to accept and show folders, where path is longer than 256 characters?

Changes at OFN structure, before calling DoModal() function, doesn't give any affect:

```
FileDialog.GetOFN().lpstrInitialDir = _T("\\\\?\\P:");
FileDialog.GetOFN().nMaxFile=1024;
FileDialog.GetOFN().nMaxFileTitle=256;
if(FileDialog.DoModal() == IDOK)
  DoSomething() 
```

Any suggestions?

# .net - Stumped by VS2012 exception-swallowing nightmare

> ID：13419761
> 
> 赞同：2
> 
> 时间：2012-11-16T15:40:28.087
> 
> 标签：.net, vb.net, visual-studio, exception-handling, win64

I started asking this question [here](https://stackoverflow.com/questions/13403487/vs-2012-vb-net-is-ignoring-unhandled-exceptions-on-windows-7-64bit), and got very informative answers, but still can't get round the problem. That question has been closed as it's a known issue. I know it's a known issue: my question is what can I possibly do about it?

To summarise:

1.  VS debugger swallows unhandled exceptions occurring in a Form_Load event (or any calls therefrom) when debugging on Windows 64-bit systems (in my case, Win 7 64-bit). As it stands, this makes VS useless as a dev environment
2.  One suggestion was to move code into the constructor rather than the FOrm_Load event. I don't want to do that as it moves code out of sight into "designer-created" modules; those modules are full of code I'm not competent to change yet; and I don't trust the Designers not to wipe out or change code I put there.
3.  Another suggestion was to point unhandled exceptions to dummy empty exception handlers by inserting some code into an initial procedure (e.g. Sub Main). **This works**. The problem here is that Sub Main can only execute on startup if I switch off the Application Framework. Then I can't run the application with a lifetime of "until the main form or last form closes".
4.  I *thought* I'd got a Sub Main in a startup form running, and running at the right time (i.e. before Form_Load). Thus I can still use the Application Framework, **and** have this special code run before anything else. I may be wrong here. In any case, I've changed the code of that form a bit, and Main no longer runs in time - if it ever did (Form_Load runs first, and we have the same problem). Tried moving the code into Form_Load - but it itself causes an error.
5.  There's a supposed hotfix ([KB976038](http://support.microsoft.com/kb/976038)). I applied that (restart needed): but now instead of the exception being swallowed, I get a vshost.exe application error, and still can't debug my code. Frustatingly, once I OK the application error, I get a glimpse of the VS debugger showing the usual Unhandled Exception box - but it disappears in about 1/10th of a second.

So what are my options?

The common thread here is that *though* I'm an experienced programmer, used to getting things done in VB.NET and VB6, and competent to understand the thorough explanations of what's causing this problem;

all the possible measures are *really beyond my competence*, and introduce too many gotchas that I may not even be aware of. I can't help thinking - why can I not just get down to coding, and deal with the inevitable coding mistakes **I'll** make, using a debugger that I can trust to break on an exception?

At the moment, I feel that if (with advice from those more expert than me) I somehow get VS to properly catch unhandled exceptions and break on them, this will only be *for today*. Who knows whether something I do in my code tomorrow, or next week, might not break the carefully-constructed safety-net that is making VS behave itself properly *for the moment*?

I freely admit that I shouldn't be allowed near the constructor/Designer-created code at this stage in my .NET expertise. I just want to get stuff done! So my options look like:

*   Learn all the hardcore stuff so that I never break the solution to this problem. This will take months if not years; or
*   Give up and go back to VS2008 Express on XP; or
*   Persuade the company to bin Windows 7 64 and gives us Windows 7 32 as a development OS.

Any ideas or suggestions welcome!

**EDIT:** As suggested by @roadwarrior below, here's the suggested workarounds in the answer to the original question, and what I've found with them:

> **1** Project + Properties, Build tab, change Platform target to AnyCPU

Already is set that way, and I can't change it. Tried changing TargetCPU away from "AnyCPU" to x86 or 64-bit - no effect.

> **2** Debug + Exceptions, tick the Thrown box for CLR exceptions

Makes running/testing a nightmare as soon as I start deliberately handling exceptions (which I do a lot). Every exception will result in a "stop", whether handled or not.

> **3** Write try/catch in the Load event handler

This is not going to be much fun either. At this stage of development, I want to see the line that's causing the problem. Always loathed debugging code back in VB6 that was in the scope of an On Error Goto someone had put into a procedure 6 steps up the call stack; I don't want to start out that way in my own projects!

> **4** Use Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException) in the Main() method so that the exception trap in the message loop isn't disabled in debug mode. This setting however makes all unhandled exceptions hard to debug, the ThreadException event is pretty useless.

I don't understand the comment in the final sentence. But *something like this* worked. What I did, as suggested by Neolisk in answer to my previous question, was this, in a Sub Main:

```
Public Sub Main()
    AddHandler Application.ThreadException, AddressOf ThreadExceptionHandler
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException)
    AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledExceptionHandler

    Form1.Show()
End Sub

Friend Sub ThreadExceptionHandler(sender As Object, e As System.Threading.ThreadExceptionEventArgs)

End Sub

Friend Sub UnhandledExceptionhandler(sender As Object, E As System.UnhandledExceptionEventArgs)
End Sub 
```

This was my version of neolisk's code - had to change it as in my version of VS/.NET (2012, 4.5) the two handlers needed to have different signatures. Two problems with this:

**a)** I can't get a Sub Main to execute on startup without unticking "Enable application framework". Once I do that, Form1.Show shows the form, we get to the end of Sub Main, and the form immediately disappears again, as the application is closing. I've subverted the application Settings' window's "Shutdown mode" setting, and don't understand how to get it back again.

**b)** This code works but I have very little idea *why*, *how*, whether it covers all exceptions, how it relates to what I may decide to tick/untick in the Debug/Exceptions dialog, or what other gotcha side-effects it might have at debug-time or run-time.

> **5** Consider if your code really belongs in the Load event handler. It is very rare to need it, it is however popular with VB6 programmers where Load was a big deal. You only ever need Load when you are interested in the actual window size after user preferences and autoscaling is applied. Everything else belongs in the constructor.

Fair enough. As an ex-VB6 programmer I'm used to using Form_Load, but let's progress and learn new things and move the code into the form's New() constructor (Let's hope I never have some code that really **has** to be in the _Load event). Now at least an exception dialog is shown when execution hits the problem line: but it's on top of a new window "No source available (crlf) The call stack contains only external code". In this particular case, the mistake in the code is debuggable from what I see here (it's a stupid typo) - but debugging like this when things get more complicated is going to be a nightmare: no chance to see what the state of anything is.

**General comments:**

**1.** Ran this project on the one Win7 32-bit machine we have (not my machine), and had no problems whatsoever. That's my preferred solution - to simply stop using Win7 64-bit for development.

**2.** Comments along the lines of "you're lucky you've got a debugger at all" are amusing, but not helpful. This is VS2012, which is supposedly a development environment with a debugger that works, and which we're going to have to pay £££ for. I've programmed for long enough to know when I know what I'm doing, and when I'm messing around with stuff I shouldn't be because I don't understand it. What I specifically don't understand is not the underlying structures (I cut my teeth on ZX81 machine code, don't want to go back there...), but VS itself. I'm happy to learn more about e.g. changing exception handlers in VS, as I need to, but definitely don't want to dive right in there, ignorantly, as a basis for my development environment.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:07:06.053

您的问题已作为重复问题关闭，而不是因为这是一个已知问题。Hans Passant的[原始问题](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)有一个很好的答案，讨论了可能的解决方法。

请让我们知道各种变通办法中有哪些是“硬核”，我将尝试提供简单的解释。实际上，我认为进一步探索这对您有好处，因为它将提高您对[引擎盖下发生的事情](http://www.joelonsoftware.com/articles/fog0000000319.html)的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:45:11.013

关于您的担忧#3：尝试使用`ShowDialog()`而不是`Show()`，它使应用程序运行直到此（主）表单关闭。我们有一个像这样运行的生产应用程序。如果您没有主窗体，您可能需要重新考虑您的设计。

在离开 x64 之前，请考虑从 2008 R2 开始，没有 32 位版本的操作系统。这意味着如果您要在应用程序服务器上运行您的软件，那将是 x64，因此您必须适应它。

# c++ - Xcode：C++：在项目中包含库

> ID：13419765
> 
> 赞同：-3
> 
> 时间：2012-11-16T15:40:38.337
> 
> 标签：c++, xcode

如何在 Xcode 中创建一个新项目并使用这个库`libStanfordCPPlib.a`正如您在 img 中看到的，我的项目文件夹中有库文件。但是我不能包含它的任何类/函数。

![代码](../Images/f4848e1aac44318a33d7d9df8fca54b1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:50:27.190

您需要链接 lib 文件，找到 libStanfordCPPLib.a 的路径名，然后单击左侧面板上的“Assignment2”项，然后找到 build-phase 选项卡，然后搜索 Use Lib Path 然后将库文件夹路径粘贴到那里.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:51:39.083

你有#include 标题吗？您是否选择了与库链接二进制文件中的库？标头搜索路径是否有效？如果错误是编译器不能包含头文件，那将是头文件路径问题。如果错误是在链接，你还没有正确添加库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T23:49:02.630

我有一个类似的问题。

右键单击 .a 文件 (libStanfordCPPLib.a) 并选择“显示文件检查器”

在“检查器”窗口中，按下“本地化”按钮。

老实说，我不确定这有什么不同，所以如果有人能解释一下，那就去吧。

我会说，就我而言，.a 文件似乎已经本地化，并且所有引用似乎都设置正确。

我是如何达到“本地化”按钮起作用之前的状态的？右键单击项目（“Projectx”）。
在菜单中，单击“将文件添加到'Projectx'）...”我选择了目标复选框（选中）以将文件复制到目标文件夹中（如果需要）。我选择了“为任何添加的文件夹创建文件夹引用”我选择了“添加到目标：Projectx”

就是这样。我在 .a 中引用的头文件一直失败。然后我点击了上面提到的“本地化”按钮，一切正常。

# c# - 在 C#（Plex 媒体服务器）中访问/更改视频文件（MKV 等）的元数据

> ID：13419768
> 
> 赞同：2
> 
> 时间：2012-11-16T15:40:49.283
> 
> 标签：c#, video, metadata

### 背景

我有一个媒体服务器，上面有大量的电视节目。它目前采用以下文件夹结构进行组织：

[类型][节目名称]\Season [Season Number]([Season]x[Episode]) 剧集名称。[扩展名]

因此，House 的一集将具有以下路径：

\戏剧\房子\第 7 季（07x14）经济衰退证明.mkv

### 元数据

我已经开始使用 Plex Media Server。唯一的问题是 Plex 似乎通过从视频文件中收集的元数据来组织您的视频。

我想制作一个程序来遍历我的所有媒体文件并根据文件所在的文件夹结构更改元数据。

为了实现这一点，我需要能够通过 C# 查看/编辑元数据。我曾尝试下载 MediaInfo.dll，但是当我尝试将其作为参考添加到项目中时，VS 说它不是有效的程序集或 COM 组件。

有谁知道阅读/编辑元数据的更好方法？

*   威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T14:41:52.980

我从未亲自使用过它，但我听说[TagLib-Sharp](https://github.com/mono/taglib-sharp)是事实上的 C# 工具，用于编辑媒体文件中的元数据。

顺便说一句，您还可以尝试在 PC 上编辑本地存储在 C:\Documents and Settings\MyUserName\Local Settings\Application Data\Plex Media Server\Metadata 中的元数据，我不确定 Mac 上的路径是什么. 但是，我感觉第一个选项是最好的选项。

# image - QT4 使拨号控制在图像上半透明

> ID：13419769
> 
> 赞同：0
> 
> 时间：2012-11-16T15:40:50.230
> 
> 标签：image, qt4, qwidget, alpha-transparency

我对图像有拨号控制

```
scene->addPixmap(*pixmap);
this->ui->graphicsView->setScene(scene); 
```

我还想在控制区域中查看底层图像。我试过例如

```
this->ui->dial->setStyleSheet("QWidget{background-color: rgba(0,250, 0,40%);}"); 
```

但是控件是不透明的，我看不到下面的图像，无论我为 alpha 通道设置了什么百分比。哪些是正确的指示？

# php - Linux下XAMPP中激活eAccelerator（PHP加速器）后XAMPP服务器无法执行页面

> ID：13419771
> 
> 赞同：1
> 
> 时间：2012-11-16T15:40:53.263
> 
> 标签：php, symfony, xampp, lampp, eaccelerator

谢谢你的时间，

我正在学习如何运行和使用 Symfony 2： [http ://www.anilsagar.com/content/symfony2-tutorial-part-2-how-install-symfony2-linux-ubuntu-operating-system](http://www.anilsagar.com/content/symfony2-tutorial-part-2-how-install-symfony2-linux-ubuntu-operating-system)

您可以看到没有任何相关或问题。事实上，**我什至可以看到默认配置仪表板**。问题出在配置屏幕上，因为 Symfony 建议激活*PHP 加速器*并禁用*short_open_tag*标志。可以在没有明显问题的情况下禁用*short_open_tag*，但我无法使用其常见问题解答中的 XAMPP 指令 激活*PHP 加速器：http:* [//www.apachefriends.org/en/faq-xampp-linux.html#mmcache](http://www.apachefriends.org/en/faq-xampp-linux.html#mmcache)

常见问题解答说在 php.ini 文件中取消注释将启用 PHP 加速器：

```
;extension="eaccelerator.so"
;eaccelerator.shm_size="16"
;eaccelerator.cache_dir="/opt/lampp/tmp/eaccelerator"
;eaccelerator.enable="1"
;eaccelerator.optimizer="1"
;eaccelerator.check_mtime="1"
;eaccelerator.debug="0"
;eaccelerator.filter=""
;eaccelerator.shm_max="0"
;eaccelerator.shm_ttl="0"
;eaccelerator.shm_prune_period="0"
;eaccelerator.shm_only="0"
;eaccelerator.compress="1"
;eaccelerator.compress_level="9" 
```

所以我取消注释：

```
; disabled in XAMPP 1.7.2 because incompatible with PHP 5.3.0
extension="eaccelerator.so"
eaccelerator.shm_size="16"
eaccelerator.cache_dir="/opt/lampp/tmp/eaccelerator"
eaccelerator.enable="1"
eaccelerator.optimizer="1"
eaccelerator.check_mtime="1"
eaccelerator.debug="0"
eaccelerator.filter=""
eaccelerator.shm_max="0"
eaccelerator.shm_ttl="0"
eaccelerator.shm_prune_period="0"
eaccelerator.shm_only="0"
eaccelerator.compress="1"
eaccelerator.compress_level="9" 
```

但是……它不起作用。当我运行任何 XAMPP 页面或 symfony 配置页面**时，它会返回 PHP 文件**或我不明白的东西！！（？）。

您可以在 php.ini 中未注释的代码上看到文本：

```
; disabled in XAMPP 1.7.2 because incompatible with PHP 5.3.0 
```

但我使用的 XAMPP 版本使用 PHP +5.4

谢谢你的时间。

PS：我使用的是 Symfony 2，目前可用的最新版本是 2.1.3 和 XAMPP 1.8.1；全部在 Ubuntu 12.04 下运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:48:31.790

如果您使用的是 eAccelerator，那么您将遇到问题，可能与 Doctrine 有关。原因是 eAccelerator 从代码中删除了注释！！！您可能知道，注解在 Symfony2 和 Doctrine 中起着至关重要的作用。要么停用 eAccelerator，要么安装一个不同的。看看：[http ://wildlyinaccurate.com/eaccelerator-and-doctrine-2](http://wildlyinaccurate.com/eaccelerator-and-doctrine-2)

# mobile - Qooxdoo mobile：表单中的多选

> ID：13419778
> 
> 赞同：2
> 
> 时间：2012-11-16T15:41:15.823
> 
> 标签：mobile, qooxdoo

我正在使用最新的 2.1 版本开发 Qooxdoo 移动应用程序。

我需要一个具有多个内联选择的表单。我没有在移动 API 文档中找到多选。它存在吗？

或者，我可以在同一行使用标签和选项复选框制作自己的小部件。有什么例子可以开始吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:02:38.520

为此，您可以覆盖/扩展 FormRenderer “Single”。

如果需要，您可以在其中将小部件添加到一行中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:53:46.843

我找到了答案。

只是以 qx.ui.mobile.form.CheckBox 为模板并将其扩展为显示多个值+复选框。本来希望在文档中看到一些指针，但我也可以在 SC 中挖掘得更深一些。

# c++ - 浮点比较精度

> ID：13419779
> 
> 赞同：5
> 
> 时间：2012-11-16T15:41:18.657
> 
> 标签：c++, c, floating-point, ieee-754

给定 3 个 IEEE-754 浮点 a、b、c，它们不是 +/-INF 且不是 NaN 且 a < b，假设 a - c < b - c 是否安全？或者，你能举一个不正确的例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T15:43:25.323

假设*a*约为 0.00000000000000001，*b*约为 0.00000000000000002，*c*为 1。那么*a* - *c*和*b* - *c*都将等于 -1。

（这是假设双精度值，也就是 64 位值。对于更高精度的值，您需要添加更多的零。）

* * *

**编辑添加**说明：

如果我们忽略非规范化值和非数字值和无穷大等，而只关注[IEEE 754 双精度浮点值](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)以便有一些具体的东西可以查看，那么 - 就二进制表示而言，浮点值由符号位*s*（0 表示正数，1 表示负数）、11 位指数*e*（偏移量为 1023，因此*e* =0 表示 2 ^(−1023)和*e* =1023 表示 2 ⁰，即 1) 和一个 52 位定点有效数*m*（表示二进制点之后的 52 位，因此它的范围从 [0,1) 到有限精度）。因此表示的实际值为 (-1)^(*s*)  × (1 +  *m* ) × 2 ^(*e* -1023)。

因为有效数字是定点的，并且具有固定的位数，所以精度非常有限。像 1.00000000000000001 这样的值和像 1.00000000000000002 这样的值在小数点后的很多位上都是相同的——比双精度有效数字可以容纳的位数更多。

当您在一个非常大的数字和一个非常小的数字之间执行加法或减法时（相对于彼此：在我们的示例中，1 是“非常大”；或者，我们可以使用 1 作为非常小的值并选择一个非常大的值值 10000000000000000），得到的指数将几乎完全由非常大的数字决定，并且非常小的数字的有效数字必须适当地缩放。在我们的例子中，它被除以大约 10 ^(17)；所以它就消失了。有效数字没有足够的位来区分它。

# django - for循环中的替代类？

> ID：13419780
> 
> 赞同：0
> 
> 时间：2012-11-16T15:41:20.660
> 
> 标签：django, django-templates

我正在使用列表循环`{% for item in list %}` ，我想输出如下内容：

```
<li>One</li>
<li class='alternate'>Two</li>
<li>Three</li>
<li class='alternate'>Four</li>
... 
```

旨在将交替线条设计为不同的颜色。

Django (1.3) 没有`mod`或`div`模板标签运算符。我知道我可以通过操作 django 源来添加它们，但我不想这样做，因为我希望能够打包这个应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:54:18.290

或者，`cycle`：

```
<li {% cycle "class='alternate'" "" %}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:53:10.600

[django的divisibleby](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#divisibleby)过滤器怎么样......

```
{% for item in list %}

<li class= "{% if forloop.counter|divisibleby:2 %}alternate{% endif %}"><Your value></li>

{% endfor %} 
```

# django - Django 1.4 中的模板加载

> ID：13419782
> 
> 赞同：0
> 
> 时间：2012-11-16T15:41:29.700
> 
> 标签：django, django-templates

我正在尝试遵循模板加载和 settings.py 的最佳实践。我看到的建议早于 1.4，因此我添加`'..'`到下面的代码中以补偿 1.4 显然更嵌套的项目结构：

```
import os
DIR = os.path.abspath(os.path.dirname(__file__))

TEMPLATE_DIRS = (
    # Always use forward slashes, even on Windows.
    os.path.join(DIR, '..', 'templates').replace('\\','/'),
) 
```

它似乎有效，但这就是我要做的吗？

既然你应该一直使用正斜杠，我们不是最好做`DIR + '/../templates'.replace('\\','/'),`- 而不是调用 to`join()`吗？

另一个新手问题是：为什么不只使用`app_directories`模板加载器，而不必担心绝对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:00:13.720

这是我在settings.py上的方式：

```
#settings.py
from os.path import dirname, join, realpath
# have in mind that I have settings.py under project_root/project/settings.py
# so you probably want to check your path to your project root folder first
ROOT_DIR = realpath(join(dirname(__file__), '..'))
MEDIA_ROOT = realpath(join(ROOT_DIR, 'media')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:27:28.033

关于你的第一个问题：

```
DIR + '/../templates'.replace('\\','/') 
```

将替换 '/../templates' 部分中的反斜杠，所以不，它不一样。正在做

```
DIR.replace('\\','/') + '/../templates' 
```

确实是一样的，但是 os.path.join 是一种更优雅、更干净的方法。

关于您的第二个问题，有时您可能只想覆盖模板。比如说，您只使用 3rd-party django 应用程序，并且您只想覆盖这些应用程序之一中的模板。由于 django 按照您的 TEMPLATE_LOADERS 设置指示的顺序搜索模板（https://docs.djangoproject.com/en/dev/ref/templates/api/#loader-types），您可以按如下方式设置您的 TEMPLATE_LOADERS：

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

和您的 TEMPLATE_DIRS 完全一样，就像您说的那样：

```
TEMPLATE_DIRS = (
    os.path.join(DIR, '..', 'mytemplates').replace('\\','/'),
) 
```

然后，如果您将模板放在“mytemplates”目录中，它将在找到等效的 app_directories 模板之前匹配（请记住，文件系统加载器位于 app_directories 加载器之前）。因此 django 将使用您的版本而不是原始版本。

毕竟这是一个设计问题：您可以实现自定义应用程序并覆盖模板，但是应用程序应该再次执行某些任务并且在“模板”文件夹中填充不相关的模板感觉不对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:03:11.463

无论代码在哪个平台上运行，您都可以使用`posixpath.join`get作为路径分隔符。`/`参见文档[`os.path`](http://docs.python.org/2/library/os.path.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T09:20:44.017

我认为组织项目的更好方法是遵循[LINK1](https://code.djangoproject.com/wiki/BestPracticesToWorkWith3rdPartyAppsAndMakingYoursPortable)或[LINK2](http://blog.zacharyvoase.com/2010/02/03/django-project-conventions/)而不是遵循 Django 1.4 中的默认目录结构。当您有许多应用程序（包括 3rd 方应用程序）时，Django 结构并不直观。

根据链接中的结构，我正在为模板加载执行以下操作：

```
#settings.py
from os.path import abspath, dirname, join

PROJ_ROOT = dirname(abspath(__file__))
APPS_ROOT = join(PROJ_ROOT, 'apps')

sys.path.append(join(PROJ_ROOT,'apps'))

TEMPLATE_DIRS = (
    join(APPS_ROOT, 'templates'),
    join(PROJ_ROOT, 'templates'),
) 
```

此外，将特定于应用程序的模板放在 ../app_name/templates/app_name/ 中会很有用，以避免模板名称冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T03:13:02.500

我拥有它的方式，

设置.py：

```
import os.path
static = os.path.join(os.path.dirname(__file__), 'static')
media = os.path.join(os.path.dirname(__file__), 'media')
template= os.path.join(os.path.dirname(__file__), 'template')

TEMPLATE_DIRS = (
    template,
)
# rest is the same 
```

然后在`myproject.myproject`

# asp.net-mvc - ASP.NET MVC 3\. 模型包含对象列表<>，将其传递给视图，但它返回为 NULL

> ID：13419783
> 
> 赞同：0
> 
> 时间：2012-11-16T15:41:35.853
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在使用 ASP.NET MVC 3（APSPxView 引擎）。

我有一个包含一些属性的模型（MasterModel）。其中之一是对象列表（DetailModels）：

```
public class MasterModel
{
    [DisplayName("Master Name")]
    public string MasterName { get; set; }

    [DisplayName("Master Value")]
    public int? MasterValue { get; set; }

    public List<DetailModel> Details { get; set; }
}

public class DetailModel
{
    [DisplayName("Detail Name")]
    public string DetailName { get; set; }

    [DisplayName("Detail Value")]
    public int? DetailValue { get; set; }
} 
```

所以我需要在上面创建一个带有表单的视图，我可以在其中填充 MasterValue 属性，并且我想为 Details 字段创建一个 GridView 并在 gridview 中填充 DetailValues。

所以我的控制器方法看起来是这样的：

```
public ActionResult MasterDetailsView() 
{
    List<DetailModel> details = new List<MasterDetail>
    {
        new DetailModel
        {
            DetailName = "detail0",
        },
        new DetailModel
        {
            DetailName = "detail1",
        },
        new DetailModel
        {
            DetailName = "detail2",
        },
    };

    MasterModel master = new MasterModel
    {
       MasterName = "Master",
       Details = details
    };

    return View("MasterDetailsView", master);
}

[HttpPost]
public ActionResult MyMasterDetailsViewResponseHandler ([ModelBinder(typeof(DevExpressEditorsBinder))] MasterModel model)
    {
        // Some code
    } 
```

最后是我的观点：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Main.Master" Inherits="System.Web.Mvc.ViewPage<MyApp.Models.MasterModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<%      
using (Html.BeginForm("MyMasterDetailsViewResponseHandler", "Home", FormMethod.Post))
{
%>

<%= Html.LabelFor(m => m.MasterName) %>
<%= Html.TextBoxFor(m => m.MasterName)%>
<%= Html.LabelFor(m => m.MasterValue) %>
<%= Html.TextBoxFor(m => m.MasterValue)%>

//Some code to add Grid view for Details

Html.DevExpress().Button(settings =>
{
    settings.Name = "btnSubmit";
    settings.Width = Unit.Percentage(100);
    settings.Text = "Submit";     
    settings.UseSubmitBehavior = true;
}).GetHtml();  

<%      
}
%>
</asp:Content> 
```

所以，我的第一个也是主要问题：如果我提交表单，它会返回一个模型，其中 MasterValue 已正确填写，但 Details 属性为空。即使我没有添加 GridView，也只需将 Details 传递给视图并提交回表单，而无需更改任何 Details。无论如何，详细信息为空。你能帮我解决我的问题吗？

第二个问题是如何为详细信息正确制作 GridView，我可以在其中填写并通过单击提交按钮提交所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:56:01.867

我看到的第一个问题是您正在尝试在 MVC 框架内创建 webforms 控件。这不起作用。（或者如果它确实有效，应该避免它）。webforms 是一个非常独特的 html 引擎，它自身紧密集成。

MVC 的“webforms”视图引擎与具有服务器端控件、视图状态、回发等的 Webfroms html 引擎不同。

所以没有 GridView 或 DetailsView 控件。您手动构建 html 模板。没有任何视图状态，因此您要提交给服务器的任何内容都必须呈现在表单上。（通常 ids 作为隐藏字段等）

# asp.net - 将 3.7 Sitefinity 迁移到 5.2 时出现内部错误？

> ID：13419787
> 
> 赞同：0
> 
> 时间：2012-11-16T15:41:42.557
> 
> 标签：asp.net, iis-7, sitefinity-5, sitefinity-3x

我对 Sitefinity 很陌生。目前我创建了一个网站并成功部署到 IIS7。但是我必须迁移在 Sitefinity 3.7 版中开发的网站。

我在将该站点部署到 IIS7 时遇到问题，我搜索并发现问题出在 Web.Config 中，因此我将 web.Config 从 5.2 项目复制到 3.7 项目中。但后来我有以下错误：

```
Could not load file or assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

* * *

以前（在更改 web.Config 之前）我遇到了 500 - 内部服务器错误。

* * *

下面是旧的 Web.Config：[在此处输入链接描述](http://www.fileswap.com/dl/XKn8NPjtnp/)

* * *

编辑 ：

实际上我的问题是，我的旧项目在.net framework 2.0 下运行。因此，我首先需要将旧项目升级到 3.7 sp4，但我在 Sitefinity 网站上的任何地方都没有获得 3.7 sp4 下载选项。

谁能帮我把我的旧项目升级到 3.7 sp4。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:45:14.947

首先，Sitefinity v3.7 SP4 下载应该可以在您的帐户页面上获得，如果您当然有权获得该版本，请点击此[链接](http://www.telerik.com/account/your-products/download-list.aspx?skucid=21)。

其次，您不必通过从 5.2 项目中复制/粘贴 web.config 或交换 dll 来将 v3.7 升级到另一个 .NET 版本。更改应用程序池和可能的重建应该可以解决问题。

您可以通过 Sitefinity 项目管理器自动迁移正在运行的 3.7 项目，也可以按照[文档](http://www.sitefinity.com/documentation/documentationarticles/installation-and-administration-guide/migrating-your-sitefinity-3-7-project/manual-migration-setup)中提供的手动步骤，只需将 Module3.7_SP4_NET35.zip 文件解压缩到 3.7 文件夹中，并将以下行添加到 3.7 web.config：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

如果您可以详细说明在更改 web.config 之前收到的 500 错误或给我发电子邮件，也许我们可以找出导致它的原因...

约赫姆。

# java - 阅读 JPanel 内容

> ID：13419792
> 
> 赞同：-2
> 
> 时间：2012-11-16T15:41:54.847
> 
> 标签：java, swing, jpanel, jbutton, actionlistener

是否可以读取 a 的内容`JPanel`？

在我的情况下，我有一个我称为 的主 JPanel *`container`*，其中还有 3 个其他 JPanel *`p1`*：*`p2`*和*`p3`*.
我还创建了一个`extends JPanel`用于小虚拟键盘（26 个按钮）的类，它实现了`ActionListener`.

*`p1`*是显示游戏的标题，是*`p2`*虚拟键盘，*`p3`*应该显示我点击的按钮的值。

我的类*`VirtualKeyboard`*有一个构造函数，它接受一个类型的对象`JPanel`（获取容器并希望它的内容）。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:05:47.713

签出以访问已添加到 a 的成员（JPanel 正在实施 Container）。 [`JPanel#getComponent(int)`](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#getComponent%28int%29)`Container`

# authentication - SAP 的 Sybase 无线平台 (SUP) 身份验证

> ID：13419794
> 
> 赞同：1
> 
> 时间：2012-11-16T15:41:57.973
> 
> 标签：authentication, sup

在针对 SAP 对 SUP 用户进行身份验证时，我几乎没有任何疑问。请假设我们的 SAP 环境中没有 SSO。a) 我使用基本 HTTP 身份验证来针对 SAP 系统对用户进行身份验证。我使用 URL [http://SAPSERVER.DEV.COM:8000/sap/bc/ping?sap-client=200](http://SAPSERVER.DEV.COM:8000/sap/bc/ping?sap-client=200)。这是对用户进行身份验证的正确方法吗？b）如果我的 WF 应用程序是服务器启动的，那么每当 DCN 更新 SUP 时，在这种情况下如何进行身份验证？我们是否必须再次挑战凭据，或者我们可以重用用户在应用程序初始登录期间提供的值。c) 如果我使用方法 (a) 进行身份验证，并且在 SAP 端发生密码更改或用户终止，是否会提示应用程序？谢谢-阿伦

# php - 检索和 XML 元素并存储为变量

> ID：13419796
> 
> 赞同：0
> 
> 时间：2012-11-16T15:42:01.330
> 
> 标签：php, parsing, xml-parsing, simplexml

我正在尝试读取 .xml 文件的 XML 文件。XML 文档：/stagingform

我的代码为 $dir 返回 null 你能告诉我我做错了什么吗？

```
$xml = new SimpleXMLElement(file_get_contents("configfile.xml"));
$dir = $xml->codedir;
echo "* * * * directory * * ** -> ".$dir; 
```

我可以看到 configfile.xml 的内容：

```
echo htmlentities($xml->asXML()); 
```

但我无法将 $dir 设置为 /stagingform。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:06:57.010

这应该这样做：

```
$xml = new SimpleXMLElement(file_get_contents("configfile.xml"));
foreach($xml->children() as $child)
{
    if($child->getName()=="codedir"){
        echo $child;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:09:05.190

一个更容易使用的功能是`simplexml_load_file`，像这样使用（支持远程/本地文件）：

```
<?php
$xml = simplexml_load_file("http://www.breakingnews.com/feeds/rss/");

print_r($xml); 
```

# java - 如何从数据库中获取 URL 的图像以在 ImageView 中显示

> ID：13419801
> 
> 赞同：0
> 
> 时间：2012-11-16T15:42:16.140
> 
> 标签：java, android, database, imageview

我正在尝试制作用户个人资料页面。

我做了一些艰苦的工作，并设法检索 json 对象并将用户数据存储在 sql 数据库中，并将这些数据（字符串）显示到 TextView 中，例如工作正常的名称和电子邮件。

我在同一个数据库中也有用户照片的 URL，但我无法检索 URL 并像其他文本字符串一样显示在 ImageView 上。

有人可以告诉我如何调整这段代码来做到这一点吗？

请从 Java 新手那里考虑这一点。谢谢！^^

```
public class DirectoryDetailMeActivity extends Activity {

String eid; //user ID

JSONParser jsonParser = new JSONParser();

private static final String url_veiw_directory = "http://www.myweb.com/android/include/directory_detail_me.php";

private static final String TAG_ID = "eid";
private static final String TAG_IMG = "photo"; 
private static final String TAG_NAME = "name";
private static final String TAG_EMAIL = "email";    

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);         
setContentView(R.layout.directory_detail_me);

new GetDirectoryDetails().execute();

}

class GetDirectoryDetails extends AsyncTask<String, String, String> {

protected String doInBackground(String... params) {     

runOnUiThread(new Runnable() {
    public void run() {

    int success;
        try {

        List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("id", eid));

            JSONObject json = jsonParser.makeHttpRequest(url_veiw_directory, "GET", params);

            Log.d("my profile", json.toString());

            success = json.getInt(TAG_SUCCESS);
            if (success == 1) {

            JSONArray directoryObj = json.getJSONArray(TAG_DIRECTORY); 
            JSONObject directory = directoryObj.getJSONObject(0);

            // It works fine if I give the URL manually. 
            String imageURL = "";

            ImageView imagePhoto = (ImageView) findViewById(R.id.photo);    

            ImageLoader imgLoader = new ImageLoader(getApplicationContext());        
            imgLoader.DisplayImage(imageURL, imagePhoto);

            TextView txtName = (TextView) findViewById(R.id.name);
            TextView txtEmail = (TextView) findViewById(R.id.email);                    

            txtName.setText(directory.getString(TAG_NAME));
            txtEmail.setText(directory.getString(TAG_EMAIL));

            }else{

        }
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:05:54.457

您需要使用从 JSONObject 获取 url 来填充 imageURL。我认为 JSONObject 有图像数组。

先试试这个。

```
 String imageURL = directory.getString(TAG_IMG);
  //then
  ImageView imagePhoto = (ImageView) findViewById(R.id.photo);    
  ImageLoader imgLoader = new ImageLoader(getApplicationContext());        
  imgLoader.DisplayImage(imageURL, imagePhoto); 
```

如果它不起作用

```
 JSONArray imageObj = directory.getJSONArray(TAG_IMG); 
 JSONObject img = imageObj.getJSONObject(0);
 String imageURL = img.getString("NewTAG");
  //then
 ImageView imagePhoto = (ImageView) findViewById(R.id.photo);    
 ImageLoader imgLoader = new ImageLoader(getApplicationContext());        
 imgLoader.DisplayImage(imageURL, imagePhoto); 
```

如果他们两个都没用。在 ImageLoder 类中更改此行

```
 InputStream is = (InputStream) new URL(url).getContent(); 
```

对此

```
 InputStream is = (InputStream) new URL(url).openConnection().getInputStream(); 
```

# c# - 正则表达式 .net 拆分

> ID：13419803
> 
> 赞同：3
> 
> 时间：2012-11-16T15:42:17.573
> 
> 标签：c#, .net, regex, c#-4.0

我可以根据 2 个空格将一个字符串分成两个：

```
string Line = "1  2";

Regex.Split(Line, "  "); 
```

=> 1, 2

我想添加一个例外。如本例所示，仅在“未被 [] 括起来”时才拆分。

```
string Line = "1  2  [1  2]";

Regex.Split(Line, "  "); 
```

=> 1, 2, [1 2]

我可以通过正则表达式轻松实现这一目标吗？顺便说一句，我使用.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:48:42.513

您可以使用前瞻，它断言`]`在下一个开头`[`或字符串结尾之前没有关闭：

```
Regex.Split(Line, @"[ ]+(?![^\[\]]*\])"); 
```

但是，如果您有嵌套`[...]`结构，这将使您失败。请注意，前瞻不是实际匹配的一部分，它只是检查后面的内容而不消耗任何内容。在我使用的前瞻中`[^\[\]]`，它是一个否定字符类，匹配除任何类型的方括号之外的任何字符。

另请注意，这将拆分为 1 个或多个空格。如果您想至少需要两个，请替换`[ ]+`为`[ ]{2,}`and 如果您想要两个，请替换为`[ ]{2}`。

[进一步阅读环视。](http://www.regular-expressions.info/lookaround.html)

# mongodb - 查询仅返回值的一部分

> ID：13419804
> 
> 赞同：0
> 
> 时间：2012-11-16T15:42:21.060
> 
> 标签：mongodb, mongoose

有没有办法以类似于正则表达式中的捕获组的方式返回集合中的一部分值？例如，如果我有如下值：

```
MyKey: "PrefixDataIDontCareAbout-DataIDoCareAbout-OtherDataIDontCareAbout" 
```

有没有办法使用正则表达式或其他方法只返回**DataIDoCareAbout部分？**子字符串不起作用，因为我需要提取的数据比固定范围的字符更复杂。这需要在查询级别完成，因为我需要将它们分组为不同的，因此相同的值只会显示一次。

任何提示都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:47:27.993

不，并且很大程度上需要这样做表明您的数据模型中存在问题，您最好重构您的模型以将**DataIDoCareAbout 保留**为单独的，也许是可索引的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:48:36.947

不是正则表达式样式没有。

只有`$substr`内置在聚合框架中的命令在这里有用，但是这只运行在字符串中字符的整数位置上。

根据您的查询，我也不会对此进行正则表达式。如果您通过其他字段限制查询，那么它应该没问题，即 user_id 和正则表达式，但是使用正则表达式，如您必须使用的无前缀格式，可能会非常慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:56:05.197

一种解决方案是创建将运行多个查询的 javascript 脚本：首先，它能够获取“ **DataIDoCareAbout** ”部分，然后，它将运行不同的和您真正需要使用结果的其他内容。

# c - 静态、堆栈和堆分配有何不同？

> ID：13419811
> 
> 赞同：1
> 
> 时间：2012-11-16T15:42:37.047
> 
> 标签：c, arrays, static, stack

我怎样才能声明一个像这样的数组：

```
int array[1000000]; 
```

作为静态数组、堆栈数组和堆分配数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:18:02.820

您的任务似乎正在寻找这个：

```
// global variable; NOT on the stack. Exists in the data segment of the program
int globalvar[1000000];

void func()
{
    // local stack-variable. allocated on the stack on function entry
    //  unavailable outside this function scope.
    int stackvar[1000000];

    // allocated on the heap. the only stack space used in the
    //  space occupied by the pointer variable.
    int *heapvar = malloc(1000000 * sizeof(int));
    if (heapvar != NULL)
    {
        // use heap var

        // free heap var
        free(heapvar)
    }
} 
```

或者也许是这样：

```
void func()
{
    // static variable; NOT on the stack. Exists in a program data segment (usually)
    static int staticvar[1000000];

    // local stack-variable. allocated on the stack on function entry
    //  unavailable outside this function scope.
    int stackvar[1000000];

    // allocated on the heap. the only stack space used in the
    //  space occupied by the pointer variable.
    int *heapvar = malloc(1000000 * sizeof(int));
    if (heapvar != NULL)
    {
        // use heap var

        // free heap var
        free(heapvar)
    }
} 
```

对于它的价值，除非你有一个 4 或 8 兆字节的保留调用堆栈（或更大），否则上面的函数可能会在进入时发出嘶哑的声音。对于如此大的尺寸，习惯上使用堆（`malloc()`/ `free()`）。但这不是你的任务似乎（还）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:54:24.323

函数内部的静态声明意味着，声明的变量在声明它的函数的执行之间共享。堆栈是内存中的一个位置，可以被当前正在运行的任何函数使用；当您的函数未运行时，无法保护堆栈上的区域不被覆盖。静态变量通常要么存储在数据中，要么存储在程序的 bss 部分中。如果您有严格要求将数组放入堆栈，您可以尝试复制它：

```
void foo(void) {
   static int my_static_array[16];
   int array_copy[16];

   memcpy(array_copy,my_static_array,sizeof array_copy);

   /* do funny stuff */

   memcpy(my_static_array,array_copy,sizeof my_static_array);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:02:30.193

静态变量不能在堆栈上，这是因为静态变量和局部变量根本不同，局部变量“生活”在堆栈中，而静态变量“生活”在静态段中。如果您希望局部变量对声明局部变量的函数调用的函数可见，那么您应该将该局部变量作为参数传递。另一个*不推荐*的解决方案是有一个指向数组的静态指针并让它指向堆栈中存在的数组，只要声明本地数组的函数没有返回，这将起作用。返回后，指针将指向可能存在其他数据的区域，这意味着可以覆盖返回地址或不相关的局部变量或函数参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T16:05:26.687

如果你想让它`array`公开，你可以在任何范围之外（代码块之外）定义它，它将在二进制文件的文本段上声明。

# java - 在始终打开的 Eclipse 上执行 SilkTest 操作？

> ID：13419813
> 
> 赞同：1
> 
> 时间：2012-11-16T15:42:48.503
> 
> 标签：java, eclipse, silktest

我希望能够识别始终打开的 Eclipse 窗口，因此我不需要使用 SilkTest 打开它。有没有办法可以将基本状态设置为始终打开的窗口？似乎设置基本状态的方式也指定了可执行文件以打开它。可执行文件不一定总是在同一个位置，配置它会很痛苦。

这可能吗？

我已经试过了`desktop.<Window>find("//Window[@caption='Java EE*']");`，还是不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:57:43.877

Silk Test 中的基本状态执行多项操作：

*   告诉 Silk Test 您要测试哪个应用程序
*   找到正在运行的应用程序
*   否则它将启动应用程序

显然你不需要第三步，但其他两个仍然是必需的。我建议使用`*eclipse.exe`作为可执行模式和`"//Window[@caption='Java EE*']"`您已经拥有的定位器，如果您随后执行基本状态，它应该返回 Eclipse 的主窗口，您就可以开始了。

# c++ - 嵌入C ++的boost python中的正则表达式

> ID：13419815
> 
> 赞同：1
> 
> 时间：2012-11-16T15:42:57.223
> 
> 标签：c++, regex, boost-python

我正在尝试在代码中`re`从 C++中使用 python 的正则表达式包。`boost.python`这是我的 C++ 应用程序中的示例代码片段：

```
#include <boost/python.hpp>

Py_Initialize();
object main = import("__main__");
object main_namespace = main.attr("__dict__");

object ignored = exec(
        "import re\n"
        "def run():\n"
        "    rmatch = re.search(r'\d',r'hello3')\n"
        "    print rmatch\n"
        "\n"
        "print 'main module loaded'\n", main_namespace); 

object run_func = main.attr("run");
run_func(); 

Py_Finalize(); 
```

正则表达式应该简单地选取字符串中的数字`hello3`。这行代码在 Python 中有效，但在嵌入式 Python 中，`rmatch`始终是`None`.

谁能提供一些关于为什么的见解？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:49:31.227

您需要替换`\d`为`\\d`.

PS你为什么不直接使用boost.regex？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:58:40.230

我认为您需要转义反斜杠：

```
"    rmatch = re.search(r'\\d',r'hello3')\n" 
```

请记住，它首先由 C++ 编译器处理。当 Python 得到它时，它会看到`\d`一个换行符而不是`\\d`and `\n`。如果您不使用 Python 的原始字符串 ( `r''`)，则必须将其编写为：

```
"    rmatch = re.search('\\\\d','hello3')\\n" 
```

# ios5 - iOS 5 中的工具栏项目不支持 UITextAttributeTextShadowOffset

> ID：13419816
> 
> 赞同：3
> 
> 时间：2012-11-16T15:42:58.143
> 
> 标签：ios5, ios6, uitoolbaritem

这是一个工具栏项目。

以下代码在 iOS 6 模拟器和 iOS 6 设备上运行良好。

阴影偏移 (UITextAttributeTextShadowOffset) 在 iOS 5 模拟器和 iOS 5 设备中被忽略。

```
 [_doneButton setBackgroundImage:[UIImage imageNamed:@"standardButtonImage.png"]
                       forState:UIControlStateNormal
                     barMetrics:UIBarMetricsDefault];
 NSDictionary *textDic = [NSDictionary dictionaryWithObjectsAndKeys:
                         [UIFont fontWithName:@"Helvetica-Bold" size:15.0],  UITextAttributeFont,
                         [UIColor whiteColor],                               UITextAttributeTextColor,
                         [UIColor blackColor],                               UITextAttributeTextShadowColor,
                         [NSValue valueWithUIOffset:UIOffsetMake(1.0,1.0)],  UITextAttributeTextShadowOffset, //won't honor the offset in ios5
                         // it's not the font, font size, text color, background image, or order in the dictionary.  Must be an Apple bug.
                         // also doesn't work if you specify [UIBarButtonItem appearance]
                        nil];
 [_doneButton setTitleTextAttributes:textDic forState:UIControlStateNormal]; 
```

有没有人有同样的经历，或者有人能看出这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T18:36:04.177

试试这个： UITextAttributeTextShadowOffset: [NSValue valueWithCGSize:CGSizeMake(1.0,1.0)];

# c++ - 为什么不能默认构造非捕获 lambda，是否可以解决此问题？

> ID：13419819
> 
> 赞同：5
> 
> 时间：2012-11-16T15:43:05.493
> 
> 标签：c++, templates, c++11, lambda

可以使用 lambda 的类型作为模板参数，例如

```
template<typename InArg, typename Function>
class selfCompose {
  Function f;
 public:
  selfCompose(Function f): f(f) {}
  auto operator() (InArg x) -> decltype(f(f(x))) {
    return f(f(x));                              }
};

int main() {
  auto f = [](int x){return x*x;};
  std::cout << selfCompose<int, decltype(f)>(f)(4)  //  yields (4²)² = 256
            << std::endl;
  return 0;
} 
```

但是，这种双重使用`f`有点多余。我们可以省略将 lambda 的*类型*作为模板传递（将其转换为合适的类型`std::function`（失去多态性 - 但 C++ lambda 无论如何都不是参数多态的）），但是我有一个应用程序，我更希望不必传递它的构造函数的*值*（因为我想将我的类的初始化本身用作模板参数，其中需要特定的构造函数签名）。我希望它像

```
template<class InArg, class Function>
class selfCompose {
  Function f;
 public:
  selfCompose() {}  // default constructor for f
  auto operator() (InArg x) -> decltype(f(f(x))) {
    return f(f(x));                              }
};

int main() {
  auto f = [](int x){return x*x;};
  std::cout << selfCompose<int, decltype(f)>()(4) << std::endl;
  return 0;
} 
```

但这不会编译，因为 lambdas 有一个已删除的默认构造函数。这对于*捕获*lambdas 来说当然是不可避免的，但是对于像我的示例中的简单的那些，这对我来说没有多大意义：它们不需要引用任何局部变量。

是否有其他方法可以获得此功能，或者我是否必须求助于将 lambda old-fashonly 定义为命名类？

```
struct myFun {
  auto operator() (int x) -> int {return x*x;}
}; 
```

（当然，我想使用的 lambda 函数并不*像*那样简单`x → x²`，因此仅从几个标准函数类中选择不够灵活）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T15:57:26.127

您可以按照 和 等函数的示例进行`make_pair`操作`make_shared`：

```
template<typename InArg, typename Function>
selfCompose<InArg, Function> make_selfCompose(Function f)
{
  return selfCompose<InArg, decltype(f)>(f);
}

int main() {
  auto f = [](int x){return x*x;};
  std::cout << make_selfCompose<int>(f)(4)
            << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:55:16.530

如果`selfCompose`是多态的，则无需显式传递参数类型或检查存储的仿函数类型。后者意味着它也将能够处理多态函子。

```
template<typename Functor>
struct self_compose_type {
    // Omitting encapsulation for brevity
    Functor functor;

    // It is possible to overload operator() to deal
    // with all cv and ref qualifiers combinations
    template<typename... T>
    auto operator()(T&&... t)
    // Don't use std::result_of for the return type
    -> decltype( std::declval<Functor&>()(std::declval<T>()...) )
    { return functor(std::forward<T>(t)...); }
};

template<typename Functor>
self_compose_type<Functor>
self_compose(Functor&& functor)
{ return { std::forward<Functor>(functor) }; }

// C++03 style:
template<typename Functor>
self_compose_type<typename std::decay<Functor>::type>
make_self_compose(Functor&& functor)
{ return { std::forward<Functor>(functor) }; } 
```

没有必要制作`operator()`可变参数，如果您愿意，可以让它只接受一个参数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T16:34:01.693

本杰明已经为您的案例发布了一个很好的解决方法。你可以用那个。

我的解决方案只是 Benjamin's answer 的改进版本，您不必指定 lambda parameter *type*。所以不要写这个：

```
make_selfCompose<int>(f)(4); //Benjamin's solution 
```

你可以这样写：

```
make_selfCompose(f)(4); //improved - absence `int` template argument. 
```

并`make_selfCompose`推导出 lambda 参数类型本身。

对于此解决方案，让我们将第一`function_traits`类模板编写为：

```
#include <tuple>

template <typename T>
struct function_traits : public function_traits<decltype(&T::operator())>
{};

template <typename C, typename R, typename... A>
struct function_traits<R(C::*)(A...) const>
{
   template <size_t i>
   struct arg
   {
      typedef typename std::tuple_element<i, std::tuple<A...>>::type type;
   };
}; 
```

那么这里是一个改进的版本`make_selfCompose`：

```
template<typename Fun> //<--- now it has one template parameter
selfCompose<typename function_traits<Fun>::template arg<0>::type, Fun>
make_selfCompose(Fun f)
{
  typedef typename function_traits<Fun>::template arg<0>::type InArg; //deduce it
  return selfCompose<InArg, decltype(f)>(f);
} 
```

这是测试程序：

```
int main() {
  auto f = [](int x){return x*x;};
  std::cout << make_selfCompose(f)(4)  //notice the relief here!
            << std::endl;
  return 0;
} 
```

查看[在线演示](http://ideone.com/1sNy9Z)

希望有帮助。:-)

# python - 熊猫数据框，按值复制

> ID：13419822
> 
> 赞同：19
> 
> 时间：2012-11-16T15:43:15.977
> 
> 标签：python, pandas

我注意到我的程序中有一个错误，它发生的原因是因为熊猫似乎是通过引用熊猫数据框而不是按值复制。我知道不可变对象将始终通过引用传递，但 pandas 数据框不是不可变的，所以我不明白它为什么通过引用传递。谁能提供一些信息？

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-16T15:55:06.743

Python 中的所有函数都是“按引用传递”，没有“按值传递”。如果您想制作一个 pandas 对象的显式副本，请尝试`new_frame = frame.copy()`.

# sql - Oracle 链导致并发作业执行的“作业从进程已终止”

> ID：13419827
> 
> 赞同：1
> 
> 时间：2012-11-16T15:43:30.747
> 
> 标签：sql, oracle, scheduler

目前我定义了一个 Oracle 链，其步骤如下：

```
1) TRUE  
     START first,second,third  
2)  first COMPLETED AND second COMPLETED AND third COMPLETED  
    START A,B,C  
3)  A COMPLETED AND B COMPLETED AND C COMPLETED  
    END 
```

第一个.sql：

```
create materialized view first_View  
nologging  
never refresh  
as  
select * from first 
```

第二个.sql：

```
create materialized view second_View  
nologging  
never refresh  
as  
select * from second 
```

第三个.sql：

```
create materialized view third_View  
nologging  
never refresh  
as  
select * from third 
```

我收到的错误是这样的：

```
CHAIN_LOG_ID="4321", STEP_NAME="SECOND" REASON="Job slave process was terminated" 
```

该盒子有 16 个 CPU，因此任何关于为什么会发生这种情况的见解都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:01:51.923

也许您可以使用[LogMiner](http://docs.oracle.com/cd/B19306_01/server.102/b14215/logminer.htm)来分析重做日志文件。显然，会话已被杀死。

# awk - awk - 检查字段是否可以转换为整数

> ID：13419828
> 
> 赞同：10
> 
> 时间：2012-11-16T15:43:48.480
> 
> 标签：awk

如果字段可以转换为整数，则仅打印字段

如果我有这个示例文本文件

```
1 cat
2 dog
3 7
4 fish5
5 22 
```

我希望我的 awk 脚本只打印可以转换为整数的字段。

我不想打印第 1,2 和 4 行。

示例 awk 脚本

```
BEGIN {
   print "testing conversion to integer on " ARGV[1];
   myinteger = 0;  # my atmept to force this var to an integer
}
 myinteger = $2;
 myinteger != 0 { print $2; } 
```

这行不通。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T17:22:30.100

awk 在计算字符串时遇到问题，因此：

`awk '$2 + 0 == $2' file.txt`

```
3    7
5    22 
```

这也适用于我：`awk '$2 + 0' file.txt`

但正如 Ed Morton 在评论中指出的那样，这也将包括以数字开头的字符串，那么这可能更正确：`awk '/[a-z]/{next}{print $0}' file.txt`即如果行中的字母转到下一行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T15:50:33.523

您可以使用模式进行匹配：

```
awk '$2 ~ /^[0-9]+$/' 
```

如果你想允许负值，你可以这样做：

```
awk '$2 ~ /^-?[0-9]+$/' 
```

# java - 小程序打印；小程序丢弃安全权限；Windows7 & Java7

> ID：13419829
> 
> 赞同：2
> 
> 时间：2012-11-16T15:43:50.113
> 
> 标签：java, security, printing, applet, liveconnect

使用 Java Liveconnect 能够通过浏览器中的小程序访问打印机，以获得我**`permission java.lang.RuntimePermission "queuePrintJob";`**在`C:\Program Files (x86)\Java\jre7\lib\security\java.policy`文件中添加的访问权限。但我仍然收到以下警告消息

![打印安全警告](../Images/ea86691a58a3f7200c4c4a945f794e47.png)

**使用：** Java插件10.9.2.05；JRE 版本 1.7.0_09-b05 Java HotSpot(TM) 客户端虚拟机

但是相同的签名小程序可以在带有 java7 的 xp 机器上正常工作。即使我检查`Always allow....`，它也会一次又一次地显示警告。我在堆栈溢出中完全搜索但无法找到正确的修复程序。任何人都可以建议如何解决这个问题？

# php - jQuery / Javascript - 将文本动态插入 URL

> ID：13419830
> 
> 赞同：0
> 
> 时间：2012-11-16T15:43:55.973
> 
> 标签：php, javascript, jquery, url-rewriting

我编写了一些 PHP 来检测用户是使用移动设备还是计算机访问我的博客文章。

基本上，如果用户使用手机访问我的博客文章，我需要一个动态编辑 URL 的脚本。

例如，我的博客文章 URL 是这样的：

> [http://www.example.com/blog/blog-post-1/](http://www.example.com/blog/blog-post-1/)
> [http://www.example.com/blog/welcome-to-my-blog/](http://www.example.com/blog/welcome-to-my-blog/)
> [http://www.example.com/blog/另一个博客帖子/](http://www.example.com/blog/another-blog-post/)

用户应该被动态重定向到：

> [http://www.example.com/m/blog/blog-post-1/](http://www.example.com/m/blog/blog-post-1/)
> [http://www.example.com/m/blog/welcome-to-my-blog/](http://www.example.com/m/blog/welcome-to-my-blog/)
> [http://www.example。 com/m/blog/another-blog-post/](http://www.example.com/m/blog/another-blog-post/)

我也有在 PHP 中工作的设备检测，所以我只需要在 PHP 条件中插入脚本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:52:20.317

尝试：

```
if ($mobile) {
    header("Location: http://".$_SERVER["HTTP_HOST"]."/m".$_SERVER["REQUEST_URI"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:56:28.737

这应该这样做：

$服务器

```
<?php
echo $_SERVER['HTTP_USER_AGENT'];
?> 
```

用户代理.php：

```
<?php
$iphone = strpos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$android = strpos($_SERVER['HTTP_USER_AGENT'],"Android");
$palmpre = strpos($_SERVER['HTTP_USER_AGENT'],"webOS");
$berry = strpos($_SERVER['HTTP_USER_AGENT'],"BlackBerry");
$ipod = strpos($_SERVER['HTTP_USER_AGENT'],"iPod");

if ($iphone || $android || $palmpre || $ipod || $berry == true)
{
header('Location: http://mobile.site.com/');
//OR
echo "<script>window.location='http://mobile.site.com'</script>";
}
?> 
```

索引.php：

```
<?php
include('user_agent.php'); // Redirecting http://mobile.site.info
// site.com data
?> 
```

[本站](http://www.9lessons.info/2010/09/redirect-mobile-devices-with-php.html)内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:49:09.963

这个 .htaccess 片段可能有助于完成您想要做的事情：

这种重写涵盖了大多数移动设备（几乎没有误报）。当检测到移动设备时，它会被重定向到 /m/。

[http://snipplr.com/view/44741/](http://snipplr.com/view/44741/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:52:31.913

如果您已经在使用 PHP 进行设备检测，那么应该这样做：

```
header("Location: /m{$_SERVER['REQUEST_URI']}");
exit; 
```

它采用当前路径并为其添加前缀`"/m"`以形成移动路径。

使用 JavaScript 进行重定向会排除某些移动设备，因此这可能不是最好的主意。

# android - 在位图android中转换颜色

> ID：13419854
> 
> 赞同：3
> 
> 时间：2012-11-16T15:45:28.793
> 
> 标签：android

我的项目中有一个用于 android 2.3.3 的简单图像，我想知道第一个像素的颜色并将每个像素用该颜色替换为背景颜色....我尝试了所有方法，例如迭代像素和设置颜色的像素，我什么也没得到......例如，这张照片：

[https://www.dropbox.com/s/e9dcq72c9u5o3op/img2.jpg](https://www.dropbox.com/s/e9dcq72c9u5o3op/img2.jpg)

我想得到这样的结果：[https ://www.dropbox.com/s/r9zox7zueekq2xe/img3.jpg](https://www.dropbox.com/s/r9zox7zueekq2xe/img3.jpg)

我是一个非常新的 Android 开发人员，因此对我的 NAIF 问题感到抱歉！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:55:50.243

只需使用 ColorFilter 即可实现此目的。它将用另一种颜色替换一种颜色。工作示例：

```
 Paint pnt = new Paint();
    Bitmap myBit = BitmapFactory.decodeFile(pathName);
    Canvas myCanvas = new Canvas(myBit );

    int myColor = myBit.getPixel(0, 0);

    // Set the colour to replace.
    ColorFilter filter = new LightingColorFilter(myColor, Color.WHITE );
    pnt.setColorFilter(filter);

    // Draw onto new bitmap. result Bitmap is newBit
    myCanvas.drawBitmap(myBit,0,0, pnt); 
```

# magento - Magento - 订单、发票、Creditmemo 和发货 Pdfs 的订单项目详细信息在哪里

> ID：13419860
> 
> 赞同：0
> 
> 时间：2012-11-16T15:45:48.650
> 
> 标签：magento, magento-1.7

我需要访问订单、发票、Creditmemo 和 Shipment Pdfs 的订单项目详细信息（例如 SKU）。我找不到访问它的位置。任何帮助，将不胜感激。

谢谢，洛芙琳 ![在此处输入图像描述](../Images/cc9a268cb559522dc33c98fb540fd79d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:34:11.753

在相关 PDF 中呈现这些的代码位于

```
/app/code/core/Mage/Sales/Model/Order/Pdf/Items 
```

有 Creditmemo、Invoice 和 Shipment 文件夹，其中包含不同类型项目的代码

# java - GWT Editors - 如何基于一个Collection添加N个相同类型的子编辑器

> ID：13419864
> 
> 赞同：0
> 
> 时间：2012-11-16T15:45:55.220
> 
> 标签：java, gwt, gwt-editors

我有一个对象，`Supply`可以是`ElecSupply`或`GasSupply`（[请参阅相关问题](https://stackoverflow.com/questions/13346308/how-to-implement-gwt-editors-for-subclasses-of-a-type)）。

无论正在编辑哪个子类，它们都有一个`BillingPeriod`s 列表。

我现在需要`BillingPeriodEditor`根据该列表的内容实例化 N 个 s，并且对于我应该如何做感到非常困惑。

我正在使用 GWTP。这是`SupplyEditor`我刚刚开始工作的代码：

```
public class SupplyEditor extends Composite implements ValueAwareEditor<Supply>
{
    private static SupplyEditorUiBinder uiBinder = GWT.create(SupplyEditorUiBinder.class);

    interface SupplyEditorUiBinder extends UiBinder<Widget, SupplyEditor>
    {
    }

    @Ignore
    final ElecSupplyEditor elecSupplyEditor = new ElecSupplyEditor();

    @Path("")
    final AbstractSubTypeEditor<Supply, ElecSupply, ElecSupplyEditor> elecSupplyEditorWrapper = new AbstractSubTypeEditor<Supply, ElecSupply, ElecSupplyEditor>(
            elecSupplyEditor)
    {
        @Override
        public void setValue(final Supply value)
        {
            setValue(value, value instanceof ElecSupply);
            if(!(value instanceof ElecSupply))
            {
                showGasFields();
            }
            else
            {
                showElecFields();
            }
        }
    };

    @Ignore
    final GasSupplyEditor gasSupplyEditor = new GasSupplyEditor();

    @Path("")
    final AbstractSubTypeEditor<Supply, GasSupply, GasSupplyEditor> gasSupplyEditorWrapper = new AbstractSubTypeEditor<Supply, GasSupply, GasSupplyEditor>(
            gasSupplyEditor)
    {
        @Override
        public void setValue(final Supply value)
        {
            setValue(value, value instanceof GasSupply);
            if(!(value instanceof GasSupply))
            {
                showElecFields();
            }
            else
            {
                showGasFields();
            }
        }
    };

    @UiField
    Panel elecPanel, gasPanel, unitSection;

    public SupplyEditor()
    {
        initWidget(uiBinder.createAndBindUi(this));

        gasPanel.add(gasSupplyEditor);
        elecPanel.add(elecSupplyEditor);
    }

    // functions to show and hide depending on which type...

    @Override
    public void setValue(Supply value)
    {
        if(value instanceof ElecSupply)
        {
            showElecFields();
        }
        else if(value instanceof GasSupply)
        {
            showGasFields();
        }
        else
        {
            showNeither();
        }
    }
} 
```

现在，由于 BillingPeriods 列表是任何 Supply 的一部分，我认为其逻辑应该在 SupplyEditor 中。

我在线程[**How to access PresenterWidget fields when added dynamic**](https://groups.google.com/forum/?fromgroups=#!topic/gwt-platform/PWJTu1il2VY)上得到了一些非常好的帮助，但那是在我完全实现编辑器框架之前，所以我认为逻辑在错误的地方。

非常感谢任何帮助。我可以发布更多代码（Presenter 和 View），但我不想让它太难阅读，他们所做的就是从数据存储中获取 Supply 并在 View 上调用 edit()。

我看过一些[ListEditor 的例子，](http://c.gwt-examples.com/home/ui/listeditor)但我真的不明白！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T04:27:12.133

你需要一个 ListEditor

这取决于您希望如何在实际视图中呈现它们，但同样的想法也适用：

```
public class BillingPeriodListEditor implements isEditor<ListEditor<BillingPeriod,BillingPeriodEditor>>, HasRequestContext{
   private class BillingPeriodEditorSource extends EditorSource<BillingPeriodEditor>{
      @Override
      public EmailsItemEditor create(final int index) {
         // called each time u add or retrive new object on the list
         // of the @ManyToOne or @ManyToMany
      }
      @Override
      public void dispose(EmailsItemEditor subEditor) {
         // called each time you remove the object from the list
      }
      @Override
      public void setIndex(EmailsItemEditor editor, int index) {
         // i would suggest track the index of the subeditor. 
      }
   }

   private ListEditor<BillingPeriod, BillingPeriodEditor> listEditor = ListEditor.of(new BillingPeriodEditorSource ());

   // on add new one ...
   // apply or request factory 
   // you must implement the HasRequestContext to
   // call the create.(Proxy.class)
   public void createNewBillingPeriod(){
      // create a new one then add to the list
      listEditor.getList().add(...)
   }
}

public class BillingPeriodEditor implements Editor<BillingPeriod>{
    // edit you BillingPeriod object
} 
```

然后在你的实际编辑器中编辑路径 Example getBillingPeriods();

```
BillingPeriodListEditor billingPeriods = new BillingPeriodListEditor ();

// latter on the clickhandler
billingPeriods.createNewBillingPeriod() 
```

你现在完成了。

# sql - 单个 hstore 值中键值对的最大数量是多少？

> ID：13419868
> 
> 赞同：2
> 
> 时间：2012-11-16T15:46:25.373
> 
> 标签：sql, postgresql, aggregate-functions, hstore

我有一个`mapfeatures_20120813`包含 2 列（标签和 pky）的 postgres 表（），大约 1000 行。每行包含`hstore`一个主键和一个主键：

```
 tags (hstore)          pky
"aerialway"=>"cable_car";  1
"aerialway"=>"chair_lift"; 2
"aerialway"=>"drag_lift";  3
"aerialway"=>"gondola";    4
"aerialway"=>"goods";      5
"aerialway"=>"mixed_lift"; 6
"aerialway"=>"pylon";      7
"aerialway"=>"station";    8
"aeroway"=>"aerodrome";    9
"aeroway"=>"apron";        10
... 
```

对于某些分析，我需要将所有这些单个 hstore 键值对推送到一个单个 hstore -row 中，我不知道如何解决这个问题。
因此，我首先将所有行转换为单行文本字段：

```
CREATE TABLE mf_text AS
SELECT array_to_string(array_agg(tags), ',')
FROM mapfeatures_20120813; 
```

在第二步中，我`hstore`从这个文本字段中创建了一个：

```
SELECT hstore(array_to_string)
FROM mf_text 
```

但问题是1000多个键值对中只有97个被写入新的hstore-field。我的结果中也看不到任何模式，它完全混淆了：

```
"atv"=>"no", "hgv"=>"forestry", "lit"=>"no", "psv"=>"private"
, "area"=>"yes", "boat"=>"permissive" 
```

一个字段是否存在某种限制，即有`hstore`多少键值对适合单个字段`hstore`？[文档](http://www.postgresql.org/docs/9.1/static/hstore.html)什么也没说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:59:52.847

聚合单个 hstore 值应该很简单：

```
SELECT string_agg(tags::text,',')::hstore
FROM   mapfeatures_20120813; 
```

至于标题中的问题：元素的数量几乎没有限制。

对于您的评论：

> 我的结果中也看不到任何模式，它完全混淆了：

[手册](http://www.postgresql.org/docs/current/interactive/hstore.html#AEN133841)中有这样说：

> 对的顺序不重要（并且可能不会在输出时复制）。

# jenkins - 获取 Jenkins 中测试失败的次数

> ID：13419875
> 
> 赞同：7
> 
> 时间：2012-11-16T15:46:44.843
> 
> 标签：jenkins

我们有一些测试会无缘无故地定期失败，主要是 JUnit 超时。我想知道我是否可以获得每个测试失败的次数。有了这个，我可以看到是否是某些测试一直存在问题，或者它与棘手的测试无关，更多的是该服务器上 Jenkins 的稳定性问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:07:16.370

我遇到了同样的问题，我们制作了一个可以在最后 N 个构建中抓取失败测试的 python：

```
# -*- coding: utf-8 -*-
#! /usr/bin/python
import urllib
import re
import sys

project = "HERE_THE_PROJECT_NAME"
jenkin_host = "http://path.to.your.jenkins/jenkins/job/%s" % project

last_build = int(re.search("%s #(\d+)" % project, urllib.urlopen(jenkin_host + "/rssAll").read()).group(1))

start_build = last_build
nb_build = 200

REG_EXP = """All Failed Tests(.*)All Tests"""
FAILURE_REG_EXP = """javascript:hideStackTrace\(([^<]*)\)"""

all_failures = {}
last_seen = {}

print "Loading %s builds starting from build number %s" % (nb_build, start_build)

build_ok = 0

for build_id in range(start_build - nb_build, start_build + 1):
    test_page = jenkin_host + "/%s/testReport/" % build_id
    sys.stdout.write(".")
    sys.stdout.flush()
    failures = set()
    for line in urllib.urlopen(test_page).readlines():
        line_piece = re.search(REG_EXP, line)
        if line_piece:
            piece = line_piece.group(1)
            match = re.search(FAILURE_REG_EXP, piece)
            while (match):
                failures.add(match.group(1))
                match = re.search(FAILURE_REG_EXP, piece[match.start():match.end()])
    if not failures:
        build_ok += 1
    for failure in failures:
        all_failures[failure] = all_failures.get(failure, 0) + 1
        last_seen[failure] = build_id
print
print "Done (found %s build OK)" % build_ok

nbs = [ x for x in list(set(all_failures.values())) if x > 1]
nbs.sort(reverse=True)

for i in nbs:
    for test, nb in all_failures.iteritems():
        if nb == i :
            print "%d : %s (last seen : %s)" % (nb, test, last_seen[test]) 
```

我得到：

```
Loading 200 builds starting from build number 11032
.........................................................................................................................................................................................................
Done (found 148 build OK)
8 : 'one failing test' (last seen : 10906)
7 : 'another-failing-test' (last seen : 11019) 
```

# php - 基于数组从数组创建关联数组 - PHP

> ID：13419876
> 
> 赞同：0
> 
> 时间：2012-11-16T15:46:45.000
> 
> 标签：php, arrays, associative-array

我有一个独特的问题，我以前从未听说过可以这样做：

所以本质上我有一个函数，它接受一个参数数组，例如：

```
function someFunction(array $arguments){} 
```

并给我一个这样的数组：

```
array('option1', 'option2', 'options3', ...); 
```

然后我需要获取该数组并循环通过它创建一个关联数组，例如：

```
array('option1' => call_come_method('option1'), .... ); 
```

这就是踢球者，您永远不会知道用户向函数传递了多少参数，但每个参数都需要创建为 key=>value 排列，如上所示。

现在我做了一些研究，有人告诉我[php 中的 $argv 命令](http://php.net/manual/en/reserved.variables.argv.php)，我被难住的地方是如何在这种情况下实现它。

因此，如果有人可以给我任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:50:30.960

这比你想象的要容易得多。首先用于[`array_flip`](http://php.net/manual/en/function.array-flip.php)切换数组的键和值。

```
$newArray = array_flip($arguments); 
```

然后循环它并调用该方法：

```
foreach($newArray as $key=>&$val){
    $val = call_come_method($key);
} 
```

,`&`使它成为一个引用，因此数组值被更新。

演示：[http ://codepad.org/giL1KPA3](http://codepad.org/giL1KPA3)

**更新**：你甚至不需要`array_flip`，你只需要一个 for 循环。

```
$newArray = array();
foreach($arguments as $val){
    $newArray[$val] = call_come_method($val);
} 
```

演示：[http ://codepad.org/AQ1gWrou](http://codepad.org/AQ1gWrou)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:54:24.887

> 您永远不会知道用户向函数传递了多少参数

[仅供参考，您可以通过func_get_args()](http://php.net/manual/en/function.func-get-args.php)了解它。

这样您就不需要为函数提供`$arguments`参数，而只需将其留空即可。

# f# - 无点函数/闭包和类型泛型之间的困境？

> ID：13419882
> 
> 赞同：2
> 
> 时间：2012-11-16T15:47:06.950
> 
> 标签：f#, pointfree

```
type Alignment =
     | Horizontal
     | Vertical

let getMainAttr = function
                  | Horizontal -> fst
                  | Vertical -> snd

let check alignment =
    let mainAttr = getMainAttr alignment
    mainAttr (2,3) |> ignore
    mainAttr (2.0, 3.0) // error

val getMainAttr : _arg1:Alignment -> ('a * 'a -> 'a)
mainAttr : (int * int -> int) // because of the value restriction 
```

似乎使其通用的唯一方法是使其明确，例如`let mainAttr x = getMainAttr alignment x`

但是，因此它不再使用闭包，因此每次`mainAttr`调用`alignment`都必须进行检查。

有没有办法只检查`alignment`一次并且是通用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:01:45.417

正如@Daniel 所描述的，您遇到了*值限制*限制，该限制不允许创建作为某些 F# 计算结果的通用值（即使该值是一个函数）。[您可以在其他 SO 问题](https://stackoverflow.com/questions/1131456/understanding-f-value-restriction-errors)中找到有关此的更多信息，并且还有[一篇关于高级点](http://blogs.msdn.com/b/mulambda/archive/2010/05/01/value-restriction-in-f.aspx)的文章。这种限制的原因是泛型值会在类型安全中引入漏洞。

在您的示例中，您真的不需要担心，因为`getMainAttr`重复执行该函数不会增加那么多开销。如果函数进行了更复杂的计算，您可以返回一个带有泛型方法的接口（而不是简单的函数）：

```
/// Interface with as single generic function that selects element of a pair
type PairSelector = 
  abstract Invoke<'T> : 'T * 'T -> 'T

// Two possible implementations of the interface 
let first = { new PairSelector with member x.Invoke(a, b) = a }
let second = { new PairSelector with member x.Invoke(a, b) = b }

// Return a non-generic `PairSelector` value instead of a generic function
let getMainAttr = function
                  | Horizontal -> first
                  | Vertical -> second

// Now we can get `PairSelector` value and call it with different type arguments    
let check alignment =
    let mainAttr = getMainAttr alignment
    mainAttr.Invoke (2,3) |> ignore
    mainAttr.Invoke (2.0, 3.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:50:57.220

实际上，`mainAttr`是一个函数*值*。值不能是通用的。正如您所发现的，解决方案是通过显式参数使其成为“真正的”函数。

关于你的最后一个问题，考虑到它`alignment`是一个值而不是一个函数，你真的关心它会被评估多少次吗？我不确定，但我认为咖喱甚至不会影响这一点。

# unit-testing - 带有 SQL 代码的 ac# 方法上的 Microsoft Fakes（Shims 和/或 Stubs）

> ID：13419883
> 
> 赞同：3
> 
> 时间：2012-11-16T15:47:09.100
> 
> 标签：unit-testing, visual-studio-2012, shim, microsoft-fakes, stubs

我正在尝试更多地了解单元测试，使用开箱即用的功能（我相信它是 MSTest.exe）和 Microsoft Fakes（存根和垫片）。

我正在使用 Visual Studio 2012 Ultimate 和 .Net 4.5 Framework。

给定以下代码，该代码调用返回单个输出值的存储过程 (SQL Server)（为简单起见）：

```
public string GetSomeDatabaseValue()
{
    string someValue = String.Empty;

    SqlParameter paramater = new SqlParameter();
    paramater.ParameterName = "@SomeParameter";
    paramater.Direction = ParameterDirection.Output;
    paramater.SqlDbType = SqlDbType.NVarChar;
    paramater.Size = 50;  

    try
    {
        using(SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["connection"].ConnectionString))
        {
            using (SqlCommand command = new SqlCommand())
            {
                command.Connection = connection;
                command.CommandType = System.Data.CommandType.StoredProcedure;
                command.CommandText = "SomeStoredProcedure";
                command.Parameters.Add(paramater);

                connection.Open();
                command.ExecuteNonQuery();

                if (command.Parameters["@SomeParameter"] != null)
                {
                    someValue= Convert.ToString(command.Parameters["@SomeParameter"].Value);
                }
            }
        }
    }
    catch(SqlException)
    {
        throw;
    }

    return someValue;
} 
```

1.  是否可以使用垫片和/或存根对其进行测试，以便将输出值设置为特定值？
2.  如果有怎么办？
3.  我什至应该为此使用单元测试吗？

我已按照[本教程](http://msdn.microsoft.com/en-us/library/hh549175.aspx)进行操作，并设法理解并使其适应星期几。

[正如一位 MS 员工所说，我正在等待VS2012](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3022904-continue-support-for-database-unit-tests-in-vs-201)数据库单元测试功能在 2012 年底可用（或恢复），以便可以单独测试数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:27:05.713

Microsoft Fakes 不是测试此代码的合适工具。而是创建一个集成测试。在此测试中，使用 SQL 服务器的本地实例，显式创建存储过程期望在数据库中找到的数据，调用存储过程并验证其结果。回滚事务或手动从数据库中删除数据，以确保它不会影响其他测试。

# windows-phone - 应用程序关闭/停用事件中的 MessageBox.Show

> ID：13419884
> 
> 赞同：0
> 
> 时间：2012-11-16T15:47:11.050
> 
> 标签：windows-phone, windows-phone-8

我在 Windows Phone 7/8 应用程序的应用程序关闭/停用方法中显示了一个 MessageBox。它用于警告用户由于应用程序正在关闭而禁用活动计时器。App Closing/Deactivated 事件非常适合这一点，因为将逻辑放在所有应用程序页面中将是一个杀手 - 太多的页面和导航路径。这工作得很好 - 消息框在 WP7 中显示 OK。

我也知道[WP8 API 的重大变化](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx#BKMK_BreakingchangesinWindowsPhone8)。那里明确指出，激活和启动中的 MessageBox.Show 将导致异常。

问题是在 WP8 中，消息框不会在应用程序关闭时显示。代码无异常执行，但没有出现任何消​​息。

PS 我在 MS WP Dev 论坛上问过这个问题，但显然没人知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:55:29.983

将 msgBox 代码从应用程序关闭事件中移到您的主页代码隐藏中。覆盖后退按键事件并将您的代码放在那里。这是在 7.x 上完成的：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
        {
            if (MessageBox.Show("Do you want to exit XXXXX?", "Application Closing", MessageBoxButton.OKCancel) == MessageBoxResult.Cancel)
            {
                // Cancel default navigation
                e.Cancel = true;
            }
        } 
```

仅供参考 - 在 WP8 上，您似乎必须将 MsgBox Show 分派到新线程。

这会在应用程序真正开始在事件模型中关闭之前提示用户。如果用户接受后退键，则允许发生，否则取消。您不允许覆盖主页按钮按下，它必须始终立即进入主屏幕。您应该查看后台代理以通过挂起/恢复来保留您的计时器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T13:59:46.607

在 RootFrame 上注册 BackKeyPress 事件。

```
RootFrame.BackKeyPress += BackKeyPressed;
private void BackKeyPressed(object sender, CancelEventArgs e)
    {
        var result = (MessageBox.Show("Do you want to exit XXXXX?", "Application Closing", MessageBoxButton.OKCancel));
        if (result == MessageBoxResult.Cancel)
        {
            // Cancel default navigation
            e.Cancel = true;
        }
} 
```

# java - HttpServletRequest 的注入

> ID：13419887
> 
> 赞同：16
> 
> 时间：2012-11-16T15:47:27.993
> 
> 标签：java, dependency-injection, ejb, jboss7.x

我正在使用 ejb 3 并尝试 @Inject HttpServletRequest，但在部署时出现异常。

代码：

```
@Inject private HttpServletRequest httpRequest; 
```

例外：

```
org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [HttpServletRequest] with qualifiers [@Default] at injection point [[field] @Inject private com.kmware.ttk.highway.beans.session.UserSessionBean.httpRequest] 
```

我能用它做什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-16T16:00:41.813

HttpServletRequest 的生命周期由 EJB/web 容器管理，而不是 CDI 容器。尝试注入它会导致问题，因为通常有许多接口实现，并且您的 CDI 容器没有足够的信息来决定注入哪个实现。即使您成功注入了它的一个实例，它也***不会***与由 EJB 容器管理的实例相同。

要获取正确管理的请求实例，请改为执行以下操作：

```
@Context
private HttpServletRequest httpRequest; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-26T19:07:57.907

如果您的受抚养人是 JAX-RS (Restful) 类，请注意上面的答案。另一方面，如果您有更复杂的依赖注入安排，那么这个问题肯定是有效的。

此功能已添加到 CDI 1.1 规范 (JSR-346) 中，而后者又添加到了新的 Java EE 7 规范中。换句话说，最新类的 Java 企业应用服务器将能够处理这个问题。

同时，如果您需要能够管理一些需要访问实际 HttpServletRequest 信息的请求范围依赖项，您可以使用您的方法并使用[JBoss Solder](http://seamframework.org/Seam3/Solder)工具。（如果网站看起来已经不存在了，请不要惊慌，事实上，工作已转移到官方 CDI 1.1 规范实施——即“焊接 2”——所以他们不再从事焊料工作。但它仍然非常适合 CDI 1.0。）

Maven依赖项将是

```
<dependency>
  <groupId>org.jboss.solder</groupId>
  <artifactId>solder-api</artifactId>
  <version>3.2.0.Final</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>org.jboss.solder</groupId>
  <artifactId>solder-impl</artifactId>
  <version>3.2.0.Final</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency> 
```

# jquery - jQuery匹配正则表达式

> ID：13419889
> 
> 赞同：1
> 
> 时间：2012-11-16T15:47:30.593
> 
> 标签：jquery, validation

假设我有以下文本输入：

```
<input class="required-field" type="text" name="create-user-username" pattern="/^[0-9]+$/" /> 
```

在我的 JS 中的某个地方（我想）在我的表单验证中使用以下代码段：

```
$('.required-field').each(function() {
    var inputVal = $(this).val();
    var pattern = $(this).attr('pattern');

    if (pattern !== 'undefined') {
        if (inputVal.match(pattern)) {
            alert('Input is not valid');
        }        
    }

}); 
```

但是，匹配不起作用，我未能找到可行的解决方案......

表单由用户逐步完成，并且每个页面都经过验证，然后您才能进入下一步。这就是为什么我不使用 jQuery .validate....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:50:32.270

[jsFiddle 演示](http://jsfiddle.net/xkvFG/)

你少了一个括号。

```
if (inputVal.match(pattern)) // <-- this one 
```

正如@Christoph 所提到的，您正在尝试匹配 a `string`，并且可以使用该`.replace()`方法删除外部`/ /`，或者将输入元素本身的模式更改为：

`input pattern="^[0-9]+$"`

并将您的模式变量更改为：

```
var pattern = new RegExp($(this).attr('pattern')); // now it'll all work 
```

附带说明一下，始终确保检查控制台日志（您会看到典型的`Uncaught SyntaxError: Unexpected token {`

此外，在检查未定义时，最好的方法是：

**`typeof(pattern)`** `!== 'undefined'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:59:44.477

`pattern`是一个字符串，因此需要是：

```
$(this).attr('pattern').replace(/\//g,"");

if (!inputVal.match(new RegExp(pattern))) { // also you missed a ! for negation 
```

另外，使用

```
if (!pattern) // uses falsyness of "undefined" - also catches the empty string

// or

if ( typeof pattern !== "undefined") 
```

并修复不匹配的括号：如果`(inputVal.match(pattern) // <- missing )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:01:45.853

目前您的模式是字符串，您需要使用`new RegExp()`.

还要删除不需要的斜杠`/`，因为会自动添加斜杠。`pattern="/^[0-9]+$/"``new RegExp()`

看代码，

```
<input class="required-field" type="text" name="create-user-username" pattern="^[0-9]+$" value=""/>
​ 

$('.required-field').each(function() {
    var inputVal = $(this).val();
    var pattern = $(this).attr('pattern');

    if (pattern != 'undefined') {
        pattern =  new RegExp(pattern)
        if (inputVal.match(pattern)){
            alert('Input is not valid');
        }        
    }

});​ 
```

**演示：http:** [//jsfiddle.net/43eLD/1/](http://jsfiddle.net/43eLD/1/)

# node.js - Node.js / Express / Socket.io 不在本地主机上工作，但通过直接文件工作

> ID：13419890
> 
> 赞同：0
> 
> 时间：2012-11-16T15:47:32.233
> 
> 标签：node.js, express, socket.io, localhost

我正在开发一个多人 HTML5 游戏，使用 Node.js 作为 Express 服务器，使用 Socket.io 作为 websockets。当我尝试在浏览器中访问应用程序正在侦听的端口中的游戏时，我得到一个空白页面。但是，当我直接访问 index.html 文件时（在服务器运行时），它可以完美运行。

请注意，当我说“直接访问文件”时，我的意思是：file:///C:/Program%20Files/nodejs/SupermarketChallenge/public/index.html

这很好，直到我想和我的室友一起测试游戏，他需要通过 localhost 访问它才能玩！

这是相关的服务器代码：

```
var express = require('express'),
    //Create an express server
    app = express.createServer(),
    //attach socket.io to the server
    supermarket = require('socket.io').listen(app);

//Configure a static directory for public files
app.configure(function() {
    app.use(express.static(__dirname + '/public'));
});

//set the port to listen to
app.listen(3000); 
```

和客户：

```
var socket = io.connect('http://localhost:3000'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:04:36.830

这是因为 go to`http://localhost:3000/`与您的公用文件夹中的任何有效文件都不匹配。你需要一条路线来匹配这个。根据以下内容更新您的代码：

```
var express = require('express'),
    //Create an express server
    app = express.createServer(),
    //attach socket.io to the server
    supermarket = require('socket.io').listen(app);

//Routes
app.get('/', function(req, res) {
    res.redirect('/index.html');
});

//Configure a static directory for public files
app.configure(function() {
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

//set the port to listen to
app.listen(3000); 
```

现在可以更改您的路线以实际提供 的内容`index.html`，在这种情况下，您可以将`/`路线替换为以下内容：

```
//Routes
app.get('/', function(req, res) {
    res.sendfile(__dirname + '/public/index.html');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-19T13:43:10.447

```
const app = require("express")();
const httpServer = require("http").createServer(app);
const options = { /* ... */ };
const io = require("socket.io")(httpServer, options);

io.on("connection", socket => { /* ... */ });

httpServer.listen(3000);
// WARNING !!! app.listen(3000); will not work here, as it creates a new HTTP server 
```

# asp.net-mvc - 使用命令行部署包失败

> ID：13419894
> 
> 赞同：0
> 
> 时间：2012-11-16T15:47:53.523
> 
> 标签：asp.net-mvc, msdeploy, web-deployment

我做了什么：

1、新建一个Mvc Application项目。

2、使用Visual Studio构建部署包

3、在命令行中运行此命令

```
C:\TEMP\packages\MvcApplication6.deploy.cmd /t 
```

它与此输出崩溃

```
C:\Users\Fabik>C:\TEMP\packages\MvcApplication6.deploy.cmd /t
=========================================================
SetParameters from:
"C:\TEMP\packages\MvcApplication6.SetParameters.xml"
You can change IIS Application Name, Physical path, connectionString
or other deploy parameters in the above file.
-------------------------------------------------------
 Start executing msdeploy.exe
-------------------------------------------------------
 "C:\Program Files\IIS\Microsoft Web Deploy V3\\msdeploy.exe" -source:package='C
:\TEMP\packages\MvcApplication6.zip' -dest:auto,includeAcls='False' -verb:sync -
disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:Certific
ateExtension -setParamFile:"C:\TEMP\packages\MvcApplication6.SetParameters.xml"
 -whatif

Unhandled Exception: System.Configuration.ConfigurationErrorsException: Configur
ation system failed to initialize ---> System.Configuration.ConfigurationErrorsE
xception: Unrecognized configuration section startup. (C:\Program Files\IIS\Micr
osoft Web Deploy V3\msdeploy.exe.Config line 2)
   at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignor
eLocal)
   at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(Configurat
ionSchemaErrors schemaErrors)
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey
)
   --- End of inner exception stack trace ---
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey
)
   at System.Configuration.ClientConfigurationSystem.System.Configuration.Intern
al.IInternalConfigSystem.GetSection(String sectionName)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.Configuration.PrivilegedConfigurationManager.GetSection(String sect
ionName)
   at System.Diagnostics.DiagnosticsConfiguration.Initialize()
   at System.Diagnostics.TraceInternal.InitializeSettings()
   at System.Diagnostics.TraceInternal.get_Listeners()
   at System.Diagnostics.Trace.get_Listeners()
   at MSDeploy.CommandLineTraceListener.EnableCommandLineTraceListeners()
   at MSDeploy.MSDeploy.Main(String[] unusedArgs) 
```

当我使用 IIS 管理器导入包时，它工作正常。可能是什么问题呢 ？我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:22:24.527

该错误消息看起来像是 .NET 2 CLR 正在执行 msdeploy.exe。尝试（重新）安装 .NET 4.0 Full Profile。

# android - android OnGlobalLayoutListener 如何检索数据

> ID：13419897
> 
> 赞同：0
> 
> 时间：2012-11-16T15:47:59.630
> 
> 标签：android, listeners

我正在使用 OnGlobalLayoutListener。如何使用来自此侦听器的数据？特别是我需要lAngle。

```
 past_edittext.getViewTreeObserver().addOnGlobalLayoutListener(
            new OnGlobalLayoutListener() {

                @Override
                public void onGlobalLayout() {
                    int height = past_edittext.getHeight();
                    int width = past_edittext.getWidth();
                    int top = past_edittext.getTop();
                    int left = past_edittext.getLeft();

                    // center coordinates of EditText
                    past_edittextX = left + width / 2;
                    past_edittextY = top + height / 2;
                    lAngle = (float) (Math
                            .atan((totalCenterY - past_edittextY)
                                    / (totalCenterX - past_edittextX)) * 180 / Math.PI);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:28:20.540

在您的班级中声明以下内容

```
private float lAngle; 
```

然后您可以在从 globallayoutlistener 设置后访问 lAngle

```
...
past_edittext.getViewTreeObserver().addOnGlobalLayoutListener(
        new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {
                int height = past_edittext.getHeight();
                int width = past_edittext.getWidth();
                int top = past_edittext.getTop();
                int left = past_edittext.getLeft();

                // center coordinates of EditText
                past_edittextX = left + width / 2;
                past_edittextY = top + height / 2;
                lAngle = (float) (Math
                        .atan((totalCenterY - past_edittextY)
                                / (totalCenterX - past_edittextX)) * 180 / Math.PI);
            }
        });
}

public void someOtherMethod(){
    if (lAngle != null)
        // do something... 
```

# javascript - 过时的 javascript 缓存文件和 MVC4

> ID：13419900
> 
> 赞同：0
> 
> 时间：2012-11-16T15:48:07.913
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-4

MVC 4 捆绑包是否解决了陈旧 .js 文件的问题？这些 .js 文件缓存在客户端的计算机上，因此它们有时不会随新部署进行更新。

捆绑并让框架确定 etag 是否匹配可以解决 MVC 4 中的问题？

同样，使用 MVC 3 时有哪些替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:46:20.027

MVC 4 捆绑发出捆绑资源的散列。

例如。

```
<link href="@System.Web.Optimization.BundleTable.
    Bundles.ResolveBundleUrl("~/Content/css")"
    rel="stylesheet"
    type="text/css" /> 
```

结果如下：

```
 <link href="/Content/css?v=ji3nO1pdg6VLv3CVUWntxgZNf1z"
     rel="stylesheet" type="text/css" /> 
```

如果文件更改，`v`参数将更改，强制客户端重新下载资源。

来源：[http ://bit.ly/xT8ZM5](http://bit.ly/xT8ZM5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:53:43.453

您可以将它与 MVC 3 一起使用。它位于`System.Web.Optimization.dll`. 您可以下载并使用 .

欲了解更多信息： http: [//nuget.org/packages/microsoft.web.optimization](http://nuget.org/packages/microsoft.web.optimization)

例如，在您的 global.asax 中，添加以下内容：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*"));

bundles.Add(new ScriptBundle("~/bundles/customjs").Include(
                    "~/Scripts/jquery.custom.js"));
// or what you want to add different js files. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T16:23:03.693

我最近遇到了脚本缓存的问题。新浏览器（尤其是 Chrome）正在缓存脚本，有时它们不会向服务器发送请求以检查是否有新版本。

在 MVC3 应用程序中，我决定使用自定义路由处理程序来处理它。在 html 中，我将修订附加到每个脚本链接。然后在我的处理程序中，我从 url 中删除修订号，然后在服务器上搜索实际文件（例如，Path/Script.rev1000.js 指向 Path/Script.js）。

这是我的代码：

```
public class ContentRouteHandler : IRouteHandler
{
    private OzirRouteProvider _routeProvider;

    public ContentRouteHandler(OzirRouteProvider routeProvider)
    {
        this._routeProvider = routeProvider;
    }

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new ContentHttpHandler(this._routeProvider, this, requestContext);
    }
}

internal class ContentHttpHandler : IHttpHandler, IRequiresSessionState
{
    private OzirRouteProvider _routeProvider;
    private ContentRouteHandler _routeHandler;
    private RequestContext _requestContext;

    public bool IsReusable { get { return false; } }

    public ContentHttpHandler(OzirRouteProvider routeProvider, ContentRouteHandler routeHandler, RequestContext requestContext)
    {
        this._routeProvider = routeProvider;
        this._routeHandler = routeHandler;
        this._requestContext = requestContext;
    }

    public void ProcessRequest(HttpContext context)
    {
        string contentPath = context.Request.PhysicalPath;
        string fileName = Path.GetFileNameWithoutExtension(contentPath);
        string extension = Path.GetExtension(contentPath);
        string path = Path.GetDirectoryName(contentPath);

        bool minify = false;

        // Here i get fileName like Script.rev1000.min.js
        // I strip revision and .min from it so I'll have Script.js
        var match = Regex.Match(fileName, "(\\.rev\\d+)?(\\.min)?$");
        if (match.Groups[2].Success)
        {
            minify = true;
            fileName = fileName.Remove(match.Groups[2].Index, match.Groups[2].Length);
            contentPath = Path.Combine(path, fileName + extension);
        }
        if (match.Groups[1].Success)
        {
            fileName = fileName.Remove(match.Groups[1].Index, match.Groups[1].Length);
            contentPath = Path.Combine(path, fileName + extension);
        }

        if (!File.Exists(contentPath)) // 404
        {
            throw new HttpException(404, "Not found");
        }

        DateTime lastModified = this.GetModificationDate(contentPath);
        string eTag = this.GetETag(context.Request.RawUrl, contentPath, lastModified);

        // Check for modification
        string requestETag = context.Request.Headers["If-None-Match"];
        string requestLastModified = context.Request.Headers["If-Modified-Since"];
        DateTime? requestLastModifiedDate = requestLastModified == null ? null : (DateTime?)DateTime.Parse(requestLastModified).ToUniversalTime().TruncMiliseconds();

        // Compare e-tag and modification date
        if ((requestLastModified != null || requestETag != null) &&
            (requestLastModified == null || requestLastModifiedDate == lastModified) &&
            (requestETag == null || requestETag == eTag))
        {
            context.Response.StatusCode = 304;
            context.Response.SuppressContent = true;
            context.Response.Flush();
            return;
        }

        switch (extension)
        {
            case ".js":
                context.Response.ContentType = "application/x-javascript";
                if (minify) // minify file?
                {
                    string minContentPath = Path.Combine(path, fileName + ".min" + extension);
                    this.MinifyJs(contentPath, minContentPath);
                    contentPath = minContentPath;
                }
                break;
            default:
                throw new NotSupportedException(string.Format("Extension {0} is not supported yet", extension));
        }

        // g-zip and deflate support
        string acceptEncoding = context.Request.Headers["Accept-Encoding"];
        if (!string.IsNullOrEmpty(acceptEncoding) && acceptEncoding.Contains("gzip"))
        {
            context.Response.Filter = new System.IO.Compression.GZipStream(context.Response.Filter, System.IO.Compression.CompressionMode.Compress);
            context.Response.AppendHeader("Content-Encoding", "gzip");
        }
        else if (!string.IsNullOrEmpty(acceptEncoding) && acceptEncoding.Contains("deflate"))
        {
            context.Response.Filter = new System.IO.Compression.DeflateStream(context.Response.Filter, System.IO.Compression.CompressionMode.Compress);
            context.Response.AppendHeader("Content-Encoding", "deflate");
        }

        context.Response.AddCacheDependency(new CacheDependency(contentPath));
        context.Response.AddFileDependency(contentPath);
        context.Response.Cache.SetCacheability(HttpCacheability.ServerAndPrivate);
        context.Response.Cache.SetETag(eTag);
        context.Response.Cache.SetExpires(DateTime.Now.AddDays(7));
        context.Response.Cache.SetLastModified(lastModified);
        context.Response.Cache.SetMaxAge(TimeSpan.FromDays(7));

        context.Response.TransmitFile(contentPath);
        context.Response.Flush();
    }

    private void MinifyJs(string contentPath, string minContentPath)
    {
        this._log.DebugFormat("Minifying JS {0} into {1}", contentPath, minContentPath);
        if (!File.Exists(minContentPath) || File.GetLastWriteTime(contentPath) > File.GetLastWriteTime(minContentPath))
        {
            string content = File.ReadAllText(contentPath, Encoding.UTF8);

            JavaScriptCompressor compressor = new JavaScriptCompressor();
            compressor.Encoding = Encoding.UTF8;
            compressor.ErrorReporter = new CustomErrorReporter(LoggingType.Debug);

            content = compressor.Compress(content);

            File.WriteAllText(minContentPath, content, Encoding.UTF8);
        }
    }

    private DateTime GetModificationDate(string contentPath)
    {
        DateTime lastModified = File.GetLastWriteTimeUtc(contentPath).TruncMiliseconds();

        return lastModified;
    }

    private string GetETag(string url, string contentPath, DateTime lastModified)
    {
        string eTag = string.Format("url={0},path={1},lm={2},rev={3}", url, contentPath, lastModified, AppInfo.Revision);

        return Quote(GetHash(eTag));
    }

    private static string GetHash(string value)
    {
        byte[] data = MD5.Create().ComputeHash(Encoding.UTF8.GetBytes(value));

        StringBuilder hex = new StringBuilder(data.Length * 2);
        foreach (byte b in data)
        {
            hex.AppendFormat("{0:x2}", b);
        }
        return hex.ToString();
    }

    private static string Quote(string value)
    {
        return string.Format("\"{0}\"", value);
    }
} 
```

要使用它，您必须打开`RouteExistingFiles`并注册路由，例如：

```
routes.Add(new Route("Content/{*resource}", new RouteValueDictionary(), new RouteValueDictionary { { "resource", @".*(\.css)$" } }, contentHandler));
routes.Add(new Route("Scripts/{*resource}", new RouteValueDictionary(), new RouteValueDictionary { { "resource", @".*(\.js)$" } }, contentHandler)); 
```

# linux - 如何使用共享对象的调试版本

> ID：13419906
> 
> 赞同：1
> 
> 时间：2012-11-16T15:48:23.827
> 
> 标签：linux, shared-libraries, dynamic-linking

我必须使用共享库的调试版本（特别是通过安装在 Ubuntu 中的 libpcap `apt-get install libpcap0.8-dbg`）...我构建我的可执行文件并链接它并且所有工作（验证`ldd`）...但是当我运行可执行文件时我得到一个段错误...动态链接器无法加载库。使用`objdump`我看到它`Dynamic section`是空的：

```
$objdump -p libpcap.so.1.1.1
...
Dynamic section:

$ 
```

我认为在 ELF 共享对象中，某些字段`Dynamic section`是强制性的……那么，为什么这部分是空的？也许有一种不同的方法可以正确加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:39:28.803

老实说，我不使用 Ubuntu，但 AFAIK 调试包不包含完整版本的库或二进制文件，只是从中剥离了调试信息。这些只是由 eu-strip 或类似工具切出的部分。你不应该链接他们。事实上，根本不需要重新链接您的应用程序。如果工具本身无法做到这一点，您应该只指示 gdb、valgrind 或其他调试信息使用者在实际调试之前阅读它们，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:53:18.107

你可以尝试运行`LD_LIBRARY_PATH=/usr/lib/debug/`

# sql-server-2008 - SQL Server Reporting Services 报告在使用 IP 地址时提示我输入凭据

> ID：13419909
> 
> 赞同：0
> 
> 时间：2012-11-16T15:48:26.773
> 
> 标签：sql-server-2008, authentication, ssrs-2008, reporting-services

我的环境：Windows server 2003 R2 SP2 SQL Server 2008 R2 Visual Studio 2008 (BIDS)

我根据服务器上的数据库设计了一个报告。它在服务器和同一域中的任何机器上都可以正常工作。但是，我需要向我域外的人展示报告。当我尝试使用 IP 地址而不是服务器名称查看报告时，系统会提示我输入凭据。我不希望其他用户必须输入凭据才能查看我的报告。如何使用 IP 地址向我域外的任何用户显示报告？非常感谢您的专家帮助！约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:51:50.823

请注意，这可能不是真正的***编程***问题，但可能是。首先要检查的是它如何通过调整 IE 设置来运行。

这很可能是因为您的浏览器（我假设是 Internet Explorer）设置阻止了凭据传递。

这是IE，转到属性/设置，然后查看安全设置。一直向下滚动到“自动登录”。它可能设置为“仅在 Intranset 区域自动登录”。并且 IE 不会将 IP 识别为在该区域中。

![在此处输入图像描述](../Images/c032a2ac236e8fc980a402f1e995a683.png)

如果是这种情况，只需将该 IP 添加到本地 Intranet 区域。

***在这一点上，如果它是连接字符串，它确实成为一个编程问题，或者如果它是整个网站的权限，它就成为一个管理问题***

要将其显示给您域外的用户，您需要向他们提供凭据，或者将报告重构为不需要身份验证。

这可能是报告本身的内容。

*   ConnectionString 可能需要 Windows 身份验证而不是 SQL Server 身份验证。如果是这种情况，它很容易修复。请参阅[http://msdn.microsoft.com/en-us/library/ms156450.aspx#Credentials](http://msdn.microsoft.com/en-us/library/ms156450.aspx#Credentials)
*   也许报表服务器本身被配置为不允许匿名访问。这成为管理员问题，可能更适合 Serverfault.com 或 DBA.stackexchange.com。或查看[http://msdn.microsoft.com/en-us/library/bb522728.aspx](http://msdn.microsoft.com/en-us/library/bb522728.aspx)

# matlab - 如何在 Matlab 中的矩阵中指定子矩阵之外？

> ID：13419917
> 
> 赞同：0
> 
> 时间：2012-11-16T15:48:43.163
> 
> 标签：matlab

我有一个 1024x1024 图像矩阵 A 和 256x156 图像矩阵 B。我想将 A 中的所有像素设置为零，但 B = 1 的像素除外。

如果 B 的大小相同，我可以这样做

```
A(B~=1)=0; 
```

但由于 B 的尺寸较小，我想在 A 中找到 B 的补码。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:52:30.193

你可以零填充 B 到相同的大小

B(1024,1024) = 0;

然后你的陈述就会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:18:22.553

A和B的中心应该重叠吗？如果是这样，那么您需要使用函数 padarray 对称 Nan-pad B 矩阵。

如果不是，那么您可能会不对称地使用 NaN-pad B。

# php - 一个 crc32 应该如何存储在 MySQL 中？

> ID：13419921
> 
> 赞同：7
> 
> 时间：2012-11-16T15:49:00.627
> 
> 标签：php, mysql

我在 PHP 中创建了一个 crc32，需要将它存储在 MySQL 数据库的一个字段中。在阅读了关于 32 位和 64 位机器上的结果的担忧之后，我想知道应该如何存储这个数字。这就是我在 PHP 中处理 crc32 以在任一位大小机器上获得相同结果的方式：

```
<?php
$checksum = crc32("The quick brown fox jumped over the lazy dog.");
// On a 32-bit system it prints -2103228862 instead of
// 2191738434 which is correct and what prints on a 64-bit system. 
// See the php.net manual page on crc32 for more information about
// 32-bit vs 64-bit.
echo "checksum without printf formatting: " . $checksum . "\n";
printf("%u\n", $checksum);
$string = sprintf("%u", $checksum);
echo $string . "\n";
?> 
```

输出（在 64 位机器上是）：

```
checksum without printf formatting: 2191738434
2191738434
2191738434 
```

这个数字应该如何存储在 MySQL 上？以下是我到目前为止提出的一些选择：

```
`hash1` CHAR(10) NOT NULL ,
`hash2` varchar(32) NOT NULL,
`hash3` int unsigned NOT NULL, 
```

看起来我应该去：

```
`hash4` BIGINT UNSIGNED NOT NULL , 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T16:12:45.217

您可以将值存储在 MySQL 中`INT UNSIGNED`，占用 4 个字节（即 32 位）。

要将值插入数据库，您必须在 32 位机器上使用`sprintf()`with格式：`%u`

```
$hash = crc32("The quick brown fox jumped over the lazy dog.");

$stmt = $db->prepare('INSERT INTO mytable VALUES (:hash)');
$stmt->execute(array(
    ':hash' => sprintf('%u', $hash),
)); 
```

**更新**

您还可以确保在 32 位和 64 位平台上始终使用 int32 类型（有符号长）。目前，您只能通过使用[`pack()`](http://php.net/pack)and来完成此操作[`unpack()`](http://php.net/unpack)：

```
echo current(unpack('l', pack('l', $hash)));
// returns -2103228862 on both 32-bit and 64-bit platforms 
```

这个想法是由[mindplay.dk贡献的](https://stackoverflow.com/users/283851/mindplay-dk)

# ios - 升级到 Cordovo 2.2.0，现在推送通知在锁定屏幕 (IOS) 上停止工作

> ID：13419923
> 
> 赞同：1
> 
> 时间：2012-11-16T15:49:14.347
> 
> 标签：ios, push-notification, cordova

我升级到了 cordova 2.2.0，现在我的 pushwoosh 推送通知停止工作。他们只在iphone解锁时工作？

当我发送推送时...... ios 设备上没有任何反应......直到我解锁屏幕（然后推送通过）。

我已验证 iPhone 的设置 - 通知 - MYAPP - “在锁定屏幕中查看”中的通知设置 = on...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:27:56.030

这很诡异。我已经使用 Cordova 2.2.0 尝试过 Pushwoosh，它工作正常，并且通知显示在锁定屏幕上没有问题。

如果屏幕锁定一段时间，手机可能会进入深度睡眠模式（以节省电池）禁用所有网络操作，并且只有在手机解锁时才会发送推送通知。但是，如果您在一分钟前锁定屏幕，情况并非如此。在这种情况下，我会建议彻底重新安装应用程序并重新启动手机。有时它会有所帮助，特别是如果您一直在更改推送通知设置。

# ruby-on-rails - CanCan，仅针对具有特定标签的资源限制查看操作

> ID：13419924
> 
> 赞同：2
> 
> 时间：2012-11-16T15:49:15.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我有一个使用 devise 和 cancan 的 rails 应用程序。

我有一个用户（登录或未登录）可以阅读的帖子资源：

```
user ||= User.new
if user.has_role? :admin
  can :manage, :all
else
  can :read, Post
end 
```

我使用标记系统对帖子进行分类，并且我想创建一个名为“restricted”的标记，其显示操作仅限于登录用户。

以下是我如何使用受限标签调用帖子：

```
@post.tags.find_by_name("restricted") 
```

我应该在控制器中使用 if 语句还是以某种方式限制ability.rb 文件中的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:11:21.593

您可以在`can :read, Post`此代码下方添加：

```
cannot :read, Post, tags: { name: "restricted" } 
```

此限制未登录用户无法阅读标签名称为“restricted”的帖子。

# gwt - 在 WebGL 中绘制 3D 树结构

> ID：13419927
> 
> 赞同：7
> 
> 时间：2012-11-16T15:49:25.313
> 
> 标签：gwt, opengl-es, webgl

我正在按照此处显示的技术使用 gwt-g3d 库在 WebGL 中绘制大型有向无环图：[http ://www-graphics.stanford.edu/papers/h3/](http://www-graphics.stanford.edu/papers/h3/)

至此，我有一个简单的两级图形渲染：

![在此处输入图像描述](../Images/ccc33b03a37294c99a89f7aaa344e53e.png)

性能很糟糕——渲染这个东西大约需要 1.5-2 秒。我不是 OpenGL 专家，所以这是我采用的一般方法。也许有人可以指出一些可以更快地进行渲染的优化。

![在此处输入图像描述](../Images/9924f5fe7764c7bc537537a986348a2c.png)

我很惊讶将 MODELVIEW 矩阵和缓冲区推送到显卡需要多长时间。这是浪费大部分时间的地方。我应该改为在顶点着色器中进行 MODELVIEW 转换吗？

这让我相信操纵 MODELVIEW 矩阵并为每个节点推送一次应该不是一个坏习惯，但时间不会说谎：

[https://gamedev.stackexchange.com/questions/27042/translate-the-modelview-matrix-or-change-vertex-coordinates](https://gamedev.stackexchange.com/questions/27042/translate-the-modelview-matrix-or-change-vertex-coordinates)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:10:19.497

将节点分组到更大的块中，而不是单独渲染它们。使用很可能不会被修改的应用转换对所有几何图形进行后台缓存，并将其存储在一个缓冲区中并在一次调用中渲染。

另一种解决方案：将节点（框+线）存储在一个缓冲区中（您可以存储比当前需要的更多）及其在纹理中的转换。基于节点索引（纹理坐标）在顶点着色器中应用转换它应该更快更快。

要测试支持，请使用[此站点](http://webgl-bench.appspot.com/)。我有`MAX_VERTEX_TEXTURE_IMAGE_UNITS | 4`

最好的解决方案是[Geometry Instancing](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter03.html)，但目前 WebGL 不支持它。

# jquery - Firefox Addon-SDK append/after/html with jquery 不工作

> ID：13419931
> 
> 赞同：0
> 
> 时间：2012-11-16T15:49:33.180
> 
> 标签：jquery, firefox, sdk, mozilla, firefox-addon-sdk

我目前正在使用 Mozilla 的 Firefox SDK 开发一个 Firefox 插件。基本思想是修改 DOM 并留下一些东西以备后用。

所以这是迄今为止有效的：

```
var issues = require("page-mod");
var self = require("self");

issues.PageMod({
    include: '*',
    contentScriptFile: [self.data.url("jquery-1.8.2.min.js"), self.data.url("script.js")]
}); 
```

没什么大不了的，找到 jQuery 并且我的自定义 script.js 被加载。现在只是为了测试目的，我清空页面正文并尝试附加一些东西，但它不起作用，脚本就停止了。到目前为止我尝试过的事情是：

```
jQuery('body').empty();
$('body').append('<h1>TEST</h1>');
$('body').after('<h1>TEST</h1>');
$('body').html('<h1>TEST</h1>'); 
```

我想这将是一件非常简单的事情，但我现在无法弄清楚。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:19:42.370

你有任何错误吗？这对我有用：

主.js：

```
var issues = require("page-mod");
var data = require("self").data;

issues.PageMod({
    include: 'http://canuckistani.ca*',
    contentScriptFile: [data.url("jquery.min.js"), data.url("script.js")]
}); 
```

脚本.js：

```
$('body').empty()
    .append('<h1>TEST</h1>')
    .after('<h1>TEST</h1>')
    .html('<h1>TEST</h1>'); 
```

[https://builder.addons.mozilla.org/package/161694/latest/](https://builder.addons.mozilla.org/package/161694/latest/)

# macos - mac apache在终端中启动失败

> ID：13419932
> 
> 赞同：0
> 
> 时间：2012-11-16T15:49:45.197
> 
> 标签：macos, apache, terminal

我想在 Mac 中启动 Apache。如果我通过签入启用网络共享`system prefs -> web sharing`，则 Apache 可以工作。但是如果我在终端输入命令：`sudo apachectl start`Apache 不会启动。在这种情况下，当`http://localhost`在 Safari 中运行时，它总是说`The requested URL / was not found on this server.`在这两种情况下，我都使用了默认的`httpd.conf`.

因此，如何通过在终端中输入命令而不是通过 mac 本身的图形配置窗口来启动 Apache 并使其在 Mac 中工作？我更喜欢在终端中指挥。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:13:57.883

想办法。重点来自**/etc/apache2/httpd.conf**的话：

`The <IfDefine> blocks segregate server-specific directives and also directives that only apply when Web Sharing or server Web Service (as opposed to other services that need Apache) is on. The launchd plist sets appropriate Define parameters.`

**mac中Web共享**的动作（系统偏好设置->网络共享）本质上是先启动`plist`设置合适的`Define`参数，然后调用`apachectl`. 如果我们阅读 httpd.conf，我们可以发现该文件由几个部分构成——`<IfDefine xxxx>yyyyy</IfDefine>`基于 plist 中的参数。

如果我们`sudo apachectl start`像在linux中那样在终端中调用命令，则无法设置来自plist的Define parameters。虽然 httpd 已启动，但没有正确配置，例如，在我的情况下，`DocumentRoot`根本没有设置，因为参数被包围

```
<IfDefine !MACOSXSERVER>
<IfDefine WEBSHARING_ON>
    DocumentRoot "/Library/WebServer/Documents"
</IfDefine>
</IfDefine> 
```

这就是错误日志说的原因`[error] [client 192.168.1.2] File does not exist: /usr/htdocs`。至于 /usr/htdocs，它没有在任何配置文件中设置，而是在 Apache 中硬编码。这是寻找的“最后手段”的地方。

如果我们评论`#<IfDefine !MACOSXSERVER>`and`#<IfDefine WEBSHARING_ON>`和 两者，请在终端中`#</IfDefine>`调用。`sudo apachectl start`然后一切正常。

我花了一整天的时间才最终解决这个问题。我希望它对那些曾经是 Linux 并且特别喜欢像我一样在终端中使用命令行并且只是转向 Mac 的人有用。

# ruby-on-rails - 条件案例无法正常工作

> ID：13419933
> 
> 赞同：0
> 
> 时间：2012-11-16T15:49:45.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, acts-as-taggable-on

我使用acts-as-taggable-on 进行标记。

公寓控制器

```
def index
  if params[:tag]
    @apartments = Apartment.tagged_with(params[:tag])
  else
    @apartments = Apartment.all
  end    
end 
```

路线

```
resources :apartments do
  #...
  collection do
    get ':tag', to: 'apartments#index', as: :tag
  end
  #... 
```

`/apartments/tag1`我通过示例等获得了不错的网址。

我想根据公寓`index`模板中的标签名称显示自定义内容。

`Apartment`的`index`观点：

```
- @appartments.each do |tags|
   - case tags.tag_list
   - when "tag1"
      %p tag1 content
   - when "tag2"
      %p tag2 content
   - else
      %p default content 
```

当我转到 url`apartments/tag1`时，文本`"default content"`是显示而不是`"tag1 content"`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:18:58.790

关于您的代码有几个注意事项：

1.  让你的逻辑远离观点。即将代码提取到辅助方法中。
2.  不要使用`case`on `Enumerable`，在你的情况下它看起来像一个数组。用于`include?`检查元素是否存在于数组中：

* * *

```
1.9.3p194 :001 > a= [:a, :b, :c]
 => [:a, :b, :c] 
1.9.3p194 :002 > case a
1.9.3p194 :003?>   when :a
1.9.3p194 :004?>   p '1'
1.9.3p194 :005?>   when :b
1.9.3p194 :006?>   p '2'
1.9.3p194 :007?>   when :c
1.9.3p194 :008?>   p '3'
1.9.3p194 :009?>   when :d
1.9.3p194 :010?>   p 'Never'
1.9.3p194 :011?>   end
 => nil 
1.9.3p194 :012 > a.include?(:c)
 => true 
```

# build - 是否有构建系统不使用时间戳来检查文件更改

> ID：13419934
> 
> 赞同：2
> 
> 时间：2012-11-16T15:49:49.907
> 
> 标签：build, makefile

构建系统，如 make 使用时间戳检查在两次构建期间是否更改了依赖项。以下是我在使用时间戳时遇到的一些常见问题

*   打开一个文件，进行一些更改，但后来，我认为它不好。例如，`git checkout -- file`如果我在项目中使用 git，我会还原更改。
*   打开一个文件，我只是不小心按了键盘快捷键来保存编辑器

无论哪种方式，文件的时间戳都会更改。如果现在我想构建项目，则需要重建依赖于该文件的所有内容。这通常意味着整个项目。

反正有这些问题吗？例如，使用版本控制检查文件更改的构建系统，最好是 git。或欢迎任何其他解决上述问题的方法。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:51:37.703

[SCons](http://scons.org/)默认使用[校验和，而不是时间戳](http://www.scons.org/doc/HTML/scons-user/ch06.html)。但是，校验和需要读取磁盘上所有源文件的所有内容，这比简单地读取目录条目要慢得多，这就是大多数构建系统使用时间戳的原因。

[软件构建系统](https://rads.stackoverflow.com/amzn/click/com/0321717287)很好地概述了这些问题。

# wordpress - WordPress 准备失败...？

> ID：13419935
> 
> 赞同：1
> 
> 时间：2012-11-16T15:49:57.910
> 
> 标签：wordpress

好的...我现在又遇到了一个 WP 问题。

对于我的 WP 主题，我有一些特别的东西。例如，我有一个包含一些东西的表。

当我插入（在本例中为更新）到该表时，我使用 $wpdb，如下面的代码：

```
$sql = $wpdb->prepare("UPDATE $table_name SET
    `title` = '$title',
    `text` = '$text',
    `image` = '$image',
    `thumbnail` = '$thumb',
    `show` = $sql_show,
    `order` = $order,
    `language` = '$language',
    `type` = '$type'

    WHERE `id` = $id 
;");
$wpdb->query($sql); 
```

我也试过这个：

```
$sql = $wpdb->prepare("UPDATE $table_name SET
    `title` = %s,
    `text` = %s',
    `image` = %s,
    `thumbnail` = %s,
    `show` = %d,
    `order` = %d,
    `language` = %s,
    `type` = %s                
    WHERE `id` = $id 
;", $title, $text, $image, $thumb, $show, $order, $language, $type); 
```

它们都有效，除非 $text 包含“%”。如果它包含此内容，则 $sql 为空白。当然，我可以将所有“%”更改为“百分比”，但该分辨率是不可接受的！;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:54:09.503

`%`必须用百分比转义，所以用双百分比替换单个百分比`$text`：`$text = str_replace('%', '%%', $text)`

# java - 从 RDF 资源中删除名称空间

> ID：13419939
> 
> 赞同：0
> 
> 时间：2012-11-16T15:50:25.660
> 
> 标签：java, regex, uri

我正在开发一个 Java 项目，在该项目中生成 URI（统一资源标识符）作为输出。URI 的一个示例是：www.myexample.com/rgd/543/mary。

我需要提取此类 URI 的最后一部分，它位于前一个 URI 中。

我需要一个可扩展的解决方案，因为我可能有不同形式的 URI，但我总是需要在“/”之后获取最后一部分。

例如我可以有： http: [//software.org/trg/poo/945/steve](http://software.org/trg/poo/945/steve) 或 [http://www.amazon.com/rggf/0956/dfgh/rgf/kk/adam](http://www.amazon.com/rggf/0956/dfgh/rgf/kk/adam)

我需要分别从以前的 URI 中提取 steve 和 adam。

我知道正则表达式可能有效，但在正则表达式方面没有太多经验。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:05:19.253

代替正则表达式，您可以在表示您的 URI 的字符串上使用`substring`和方法，例如`lastIndexOf`

```
String[] data = { "http://software.org/trg/poo/945/steve",
        " http://www.amazon.com/rggf/0956/dfgh/rgf/kk/adam" };
for (String s:data)
    System.out.println(s.substring(s.lastIndexOf('/')+1));

//"http://software.org/trg/poo/945/steve
//                                ^
//                                lastIndexOf(`/`);
//                                
// but we don't want to return "/steve" but "steve" 
// so lets subtract string from index of last `/`
// increased by one 
```

输出：

```
steve
adam 
```

# webserver - 使用 Linode Manager 或其他技术来开发镜像站点的服务器操作

> ID：13419942
> 
> 赞同：0
> 
> 时间：2012-11-16T15:50:30.857
> 
> 标签：webserver, web-testing, linode

一个快速的问题，有谁知道我如何获取一个地址，比如 www.google.com 并创建一个镜像站点，例如 www.newsite.google.com ？

在服务器测试和服务器操作方面，我是初学者。我通常只是通过 SFTP/FTP 拖放。

有什么想法或想法吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:05:24.383

在一位前同事的一些提示之后，我们坐下来讨论了这个问题。

首先我们提到了 APACHE VHOSTS - 需要为我的子域添加一个目录，例如 new.google.com

为此，我必须通过 SSH 连接服务器并对目录和文件执行 sudo、vim 和一系列命令。

当我使用 linode 管理器时，我必须添加一条 A 记录以使子域处于活动状态/工作状态。

现在一切正常，我有一个新的子域。

# php - 砌体 CSS 顺序

> ID：13419946
> 
> 赞同：0
> 
> 时间：2012-11-16T15:50:40.247
> 
> 标签：php, css, jquery-masonry

我正在从我的数据库中提取我的图像并尝试将它们排序到列表中而不是上下。有谁知道如何实现这一目标？

[电流输出截图](http://gopro30.com/gopro30/question1.jpg)

我的 CSS：

```
#myContent {
    -moz-column-count: 3;
    -moz-column-gap: 0px;
    -webkit-column-count: 3;
    -webkit-column-gap: 0px;
    column-count: 3;
    column-gap: 0px;
    width: 900px;
}

#myContent img{
    display: inline-block;
    margin-bottom: 0px;
    width: 90%;
} 
```

我的 HTML 和 PHP

```
<ul id="myContent"> 
<div id="postedComments">

<?php 

$result = mysql_query("SELECT * FROM stories ORDER BY pid ASC limit 0 , 5"); 

while($data = mysql_fetch_array($result)) {
$pid = $data['pid'];
$photo_url = $data['photo_url'];
echo "<div class='postedComment' id=\"$pid \">

<img src='$photo_url'>

<p>pid: $pid</p>

<hr />

</div>" ;

 }
?>

</div>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:46:04.180

在您想要在一行中的图像上使用“float：left”。确保在所有图像之后使用类似这样的内容，以便图像之后的 HTML 可以正常工作：

```
.clear{
clear:both;
height:1px;
margin-bottom:-1px;
}

<div>
//Your pictures
</div>
<div class="clear"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:26:24.413

谢谢大家，对于其他可能遇到此问题的人，请尝试使用[http://philipbjorge.github.com/Infinite-Social-Wall/](http://philipbjorge.github.com/Infinite-Social-Wall/)

菲利普在实现这一目标方面做得很好。如果您是高级开发人员，您可以下载他的源文件并查看他的逻辑。或者，您可以删除调用社交数组的整个部分，并仅使用数据库填充新项目。

# java - Java - 关闭 JFrame 窗口时的消息

> ID：13419947
> 
> 赞同：5
> 
> 时间：2012-11-16T15:50:39.967
> 
> 标签：java, swing, window, jframe

我有一个 Java 程序，其中包含一个继承自 JFrame的类**Application 。**

我想显示一条消息，询问用户是否要在单击窗口右上角的 X 按钮后退出程序。

到目前为止，这是我的代码：

我从网上找到的教程中获得了此代码。我自己编写了 WindowClosing 事件处理程序。但是，我无法注册窗口侦听器 (addWindowListener)。它告诉我 WindowAdapter 是抽象的，无法实例化。

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T15:54:01.857

基本上，你得到的几乎是正确的。有一些东西没有正确组合在一起，还有一个错字。

首先删除你的`WindowClosing`方法（它是`window`，不是`Window`）然后用`addWindowListener(new WindowAdapter());`下面的代码替换你的

```
addWindowListener(new WindowAdapter() {
  public void windowClosing(WindowEvent e) {
    int confirmed = JOptionPane.showConfirmDialog(null, 
        "Are you sure you want to exit the program?", "Exit Program Message Box",
        JOptionPane.YES_NO_OPTION);

    if (confirmed == JOptionPane.YES_OPTION) {
      dispose();
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T06:10:39.973

我在两分钟内得到了这个编码......

首先是在Exit_on_close中设置j帧默认关闭事件。其次创建一个名为“Window Closing Event Handler”的类，然后在init阶段调用它。

```
private void WindowClosingEventHandler(){ addWindowListener(new WindowAdapter() { @Override public void windowClosing(WindowEvent e) { int confirmed = JOptionPane.showConfirmDialog(null, "Are you sure you want to exit this application?", "Exit Program Message Box",JOptionPane.YES_NO_OPTION);

    if (confirmed == JOptionPane.YES_OPTION) {
        try{
            String login=txtuserid.getText();
            Connection conn = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/repair", "root", "");
            Statement st = conn.createStatement();
            String update = "UPDATE user set User_Status=0 where UserID='"+ login +"'";
            st.executeUpdate(update);  
            dispose();
            Login2 dialog = new Login2(new javax.swing.JFrame(), true);
            dialog.setVisible(true);
        }catch(SQLException | HeadlessException q){
            JOptionPane.showMessageDialog(null, q);
        }
        System.exit(0);
    }
    else{
        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
    }
}
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:35:52.873

好的再试一次。

您不能创建*新的 WindowAdapter*，因为 WindowAdapter 是抽象的。抽象类不能被实例化。您需要创建 WindowAdapter 的子类并将其抽象方法实现为公共的。

[http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html)

# shell - 使用shell脚本将数字行放入列中

> ID：13419948
> 
> 赞同：1
> 
> 时间：2012-11-16T15:50:40.543
> 
> 标签：shell, awk

我有一个包含很多行的文件，例如

```
1 jfkdajfd   1 2 3 5
2 fkldfjld   
3 fdkfloaf   9 10
4 fldfldkf 
5 fdskf;ak   12 1 4 
```

我想获取所有数字并将它们放在文件的列中，例如

```
 1
 2
 3
 5
 9
 10
 12
 1
 4 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:57:24.267

在你的情况下，看起来你可以这样做：

```
awk '{for (i=3;i<=NF;++i) {print $i}}' 
```

这是假设您要打印的所有数字都出现在第 3 列或之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:20:28.193

```
cat file | while read line
do
  for i in $(echo ${line})
  do
    isnumeric=$(echo ${i} | grep -q [0-9]; echo ${?})
    if [ ${isnumeric} -eq 0 ]
    then
      echo ${i} >> outfile
    fi
  done
done 
```

不是防弹的，也没有前面给出的解决方案那么优雅，但它显示了用于确定这是否是数字的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:34:31.747

```
while read num alpha rest; do 
    [[ "$rest" ]] && printf "%s\n" $rest   # <-- variable is unquoted
done < filename 
```

# java - 在 Java 中创建具有多个子节点的 XML 文件

> ID：13419956
> 
> 赞同：1
> 
> 时间：2012-11-16T15:51:37.010
> 
> 标签：java, xml, xpath, jdom

我想创建如下所示的 XML 文件 - 当我只创建一个 OrderDetails 子项时，它可以很好地输出到磁盘 - 现在我想创建 2 个（所以最后我可以拥有一个带有一个批处理头和多个订单详细信息的 XML 文件.

```
<?xml version="1.0" encoding="UTF-8"?>
<BatchOrders xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <BatchHeader>
     <Provider>123456789</Provider>
     <Contact>ABC@abc.com</Contact>
  </BatchHeader>
   <OrderDetails>
     <Number>0456789</Number>
     <YourReference>tc1</YourReference>
     <DeliveryDate>23-08-2012</DeliveryDate>
     <RetailerID>AAA</RetailerID>   
  </OrderDetails>
   <OrderDetails>
     <Number>1234</Number>
     <YourReference>tc2</YourReference>
     <DeliveryDate>23-08-2013</DeliveryDate>
     <RetailerID>BBB</RetailerID>   
  </OrderDetails>
  </BatchOrders> 
```

所以我有一个名为 OrderDetails 的类，它具有属性和 get/setter。我还有一个编写 XML Header 和 OrderDetails 的类——这在下面。

```
OrderHeader header = new OrderHeader();

header.setProvider("123456789");
//rest of header setting done

OrderWriter writer = new OrderWriter(orderWriter);
writer.Initialise(header);

OrderDetails[] orderdetails = new OrderDetails[3];

for(int i = 0; i < orderdetails.length; i++)
{
    orderdetails[i] = new OrderDetails();
    orderdetails[i].setDirectoryNumber("0456789" + i);
    //rest of sets done

    writer.writeNext(orderdetails[i]);
}

writer.close(); 
```

最后下面是我的 writer 类 - 当我只有一个订单详细信息时，它可以正常工作并以正确的 XML 格式打印文件。当我尝试创建多个 OrderDetails 子节点的代码时——它只是给了我第一个订单详细信息记录和一长串文本，因此格式不正确的 XML——任何人都可以看到我在这里遗漏的一些愚蠢的东西吗？

```
 public void Initialise(OrderHeader header) throws Exception 
    {
        Element batchOrders = new Element("BatchOrders");

        document.setRootElement(batchOrders);

        Element batchHeader = new Element("BatchHeader");

        batchHeader.addContent(new Element("ServiceProvider").setText(header.getServiceProvider()));
        //more header sets are done...

        document.getRootElement().addContent(batchHeader);

    }

    public void close() throws Exception { writer.close(); }

    public void writeNext(OrderDetails record) throws Exception 
    {

        Element orderDetails = new Element("OrderDetails");

        if(record.getNumber() != null)
        {
            orderDetails.addContent(new Element("Number").setText(record.getNumber()));
        }
        //More sets are done....

        document.getRootElement().addContent(orderDetails);

        outputter.getFormat().setOmitDeclaration(true);
        outputter.getFormat().setOmitEncoding(true);

        outputter.output(document,writer); 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:19:40.643

在 writeNext() 方法中，您在添加 orderDetails 内容后立即使用输出器输出文档。我不确定您的输出器做了什么，但我认为您应该输出，直到您将所有 orderDetails 放入文档中。

# html - 在 html 中在站点的标题中添加徽标和登录表单

> ID：13419959
> 
> 赞同：-3
> 
> 时间：2012-11-16T15:51:44.410
> 
> 标签：html, forms, login, header

我试图在 html 中创建一个看起来像 facebook 的页面。一个页面，在标题中它将是我的标识，在它旁边有两个带有按钮的框，以便允许用户登录。在此之下，它将是一个主页，其中包含需要注册的新用户的注册表单。

我可以在哪里找到此类代码示例的任何想法？任何教程或链接？

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:55:46.287

这是一个可以帮助您的教程链接[http://www.w3schools.com/html/html_layout.asp](http://www.w3schools.com/html/html_layout.asp)

# jquery - Keyup 没有响应

> ID：13419970
> 
> 赞同：3
> 
> 时间：2012-11-16T15:52:26.047
> 
> 标签：jquery

我不知道到底发生了什么。

为什么我的简单 JavaScript 代码不起作用？在这里待了几个小时。我有一堆其他的 javascript，在想它是不是中断了还是什么？

尝试通过教程，然后我被困在第一行：

```
$('#name').keyup(function() {
    alert('alert');
}); 
```

我不知道问题所在..在小提琴中它当然可以正常工作 [http://jsfiddle.net/pgWtK/1/](http://jsfiddle.net/pgWtK/1/)

我试着把它放在头里，准备好文件，但这无济于事，有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:54:13.703

您需要`put it in $(document).ready(function(){`让 DOM 元素在使用前可供 jquery 使用，在您的案例元素中，id 名称用于绑定 keyup 事件。

`Also make sure you have included jquery tag.`本文将指导您如何使用 jquery **[。](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)**

```
$(document).ready(function(){    
     $('#name').keyup(function() {
        alert('alert');
     });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:55:00.690

可能会发生两件事，您没有正确加载 Jquery 库，或者您没有将该代码放入文档中

在您的头部示例中添加 jquery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

里面的jquery`document ready`

```
$(function(){
   $('#name').keyup(function() {
      alert('alert');
   });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T15:58:51.663

1.  确保安装了 FireBug 或替代品
2.  检查 jQuery 是否在 FireBug 或替代的网络面板中加载。如果您从 cdn 加载并在本地进行测试，请确保在未加载时有备用
3.  确保您的 jQuery 代码包含在`$(document).ready(...)`调用中
4.  在 FiregBug 或替代控制台中使用以下代码，以确保事件已绑定到元素：

    $('#name').data('events');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:54:47.330

将您的代码包装在准备好的文档中

```
$(function(){
 //your code

}); 
```

在 jsfiddle 它默认完成，但如果您选择该`no-wrap(head)`选项，它不会将您的 js 代码包装在`ready`处理程序[中，请自行查看](http://jsfiddle.net/pgWtK/2/)。

[将 js 代码放在`ready`处理程序](https://stackoverflow.com/questions/1438883/jquery-why-use-document-ready-if-external-js-at-bottom-of-page)中始终是一个好习惯，这样可以确保在所有 js 闪光发生之前渲染 DOM，或者您可以将 js 脚本放在标记的末尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T16:40:56.857

问题在于文件 vote.js 用你错过的代码更改代码`$(`

```
$(document).ready(function(){
   $(function(){
     $('#name').keyup(function() {
     alert('alert');
     });
  });
}) 
```

# php - 用 api 控制 youtube 的 Overlay

> ID：13419971
> 
> 赞同：0
> 
> 时间：2012-11-16T15:52:26.873
> 
> 标签：php, youtube, youtube-api

我制作了一个脚本，将视频从我服务器上的一个文件夹上传到 youtube，但现在我想要一种控制覆盖广告的方法。我看到了一个和我想要的一样的视频。这是视频链接：

[http://www.youtube.com/watch?v=_v0JoEarI8s](http://www.youtube.com/watch?v=_v0JoEarI8s)

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:01:49.043

我认为不能从 API 管理号召性用语覆盖

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/wyUoI9S2c0M](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/wyUoI9S2c0M)

貌似只能手动配置

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=150471](http://support.google.com/youtube/bin/answer.py?hl=en&answer=150471)

# java - 用代码模型中的方法替换变量用法

> ID：13419974
> 
> 赞同：0
> 
> 时间：2012-11-16T15:52:30.413
> 
> 标签：java, code-generation, sun-codemodel

我正在寻找一种解决方案，我可以在其中定义一个类中的字段并在这个特定类中使用引用。代码模型应该创建一个用于实例化字段的方法，并且应该用创建的方法替换字段用法。

我希望有人能帮助我。

未处理类

```
public class MyClass {
    @LazyInit
    CustomClass member;

    public void someMethod() {
        System.out.println(member);
    }
} 
```

codeModel 使用后的类

```
public class MyClass_ {
    @LazyInit
    CustomClass member;

    public void someMethod() {
        System.out.println(getInstanceOfMember());
    }

    public member getInstanceOfMember() {
        if (member == null)
            member == new CustomClass();

        return member;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T21:11:52.303

如果你稍微改变一下，那么这个问题就会变得更容易处理。通过将变量更改为抽象 getter 方法，您可以在生成的类中执行惰性初始化，同时不理会基类。这就是我的意思：

输入类：

```
public abstract class MyClass {
    @LazyInit
    public abstract CustomClass getMember();

    public void someMethod() {
        System.out.println(getMember());
    }
} 
```

生成的类：

```
public class MyClass_ extends MyClass {

    private CustomClass member;

    public synchronized CustomClass getMember() {
        if (member == null){
            member == new CustomClass();
        }
        return member;
    }
} 
```

然后要使用这个生成的类，您可以直接实例化它或使用实用程序：

```
new MyClass_().someMethod(); // prints CustomClass.toString() (non-null) 
```

或者

```
Lazy.get(MyClass.class).someMethod() // same 
```

使用注释处理器和代码生成器（如 JCodeModel）实现这一点非常简单。如果您需要这方面的详细信息，请告诉我。

# sql - 编写查询以从具有两个不同列且具有不同顺序的相同数据的表中查找数据是否可行

> ID：13419976
> 
> 赞同：1
> 
> 时间：2012-11-16T15:52:31.100
> 
> 标签：sql, arrays, ms-access

我有一个表，其中两列在不同的行中有相同的数据。我有库存表，其中有三列。第一列是序列号，第二列是型号，第三列是一部分。第一列和第三列具有相同类型的数据。

```
Serial No   Model           part of

1234        Optiplex 745    
1235        Optiplex 755    
6565        Optiplex 620    
6566        Optiplex 270    
9877        Optiplex 755    1235
9876        Optiplex 745    1234
1236        Optiplex 745 
```

我想显示如下结果，其中显示与序列号#1234 相关联的行和与#1234 的部分相关联的行

```
Serial No   Model           part of

1234        Optiplex 745    
9876        Optiplex 745    1234

1235        Optiplex 755    
9877        Optiplex 755    1235 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:02:25.200

你的意思是：

```
SELECT [Serial No], Model, [part of]
FROM MyTable 
WHERE [Serial No]=1234 Or [part of]=1234 
```

编辑重新评论

```
SELECT [Serial No], Model, [part of]
FROM BulkBR
WHERE [Serial No] IN (SELECT [part of] FROM BulkBR)
   OR [part of] Is Not Null
ORDER BY Model, [part of] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:18:57.150

尝试

```
SELECT
    Nz([part of], [Serial No]) AS [associated to],
    [Serial No],
    Model,
    [part of]
FROM
    mytable
ORDER BY
    Nz([part of], [Serial No]),
    [Serial No] 
```

结果将是

```
associated to   Serial No   Model           part of

1234            1234        Optiplex 745    
1234            9876        Optiplex 745    1234

1235            1235        Optiplex 755    
1235            9877        Optiplex 755    1235

1236            1236        Optiplex 745
6565            6565        Optiplex 620
6566            6566        Optiplex 270 
```

例如，附加行将`[associated to]`帮助您在报告中对结果进行分组。

# java - 使用java“压缩”目录时添加了不必要的文件结构？

> ID：13419979
> 
> 赞同：1
> 
> 时间：2012-11-16T15:52:42.937
> 
> 标签：java, compression, zip

好吧，我的问题很简单，是关于一个*意外的行为*（或者至少对我来说是意外的），当我尝试压缩一个目录时，我有以下我自己创建的方法（我很清楚我'没有处理异常和所有那些东西，这是因为（到目前为止）我只是这样做是为了学习如何做到这一点，所以稳定性“并不重要”），这里是代码：

```
public static void zipDirectory(File srcDirectory, File zipFile) throws IllegalArgumentException {
    if (!srcDirectory.isDirectory()) {
        throw new IllegalArgumentException("The first parameter (srcDirectory) MUST be a directory.");
    }
    int bytesRead;
    byte[] dataRead  = new byte[1000];
    BufferedInputStream in = null;
    ZipOutputStream zOut;
    try {
        zOut = new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(zipFile)));
        for (File f : srcDirectory.listFiles()) {
            if (f.isDirectory()) {
                FileUtilities.zipInnerDirectory(f,zOut);
            }else {
                in = new BufferedInputStream(new FileInputStream(f.getAbsolutePath()), 1000);
                zOut.putNextEntry(new ZipEntry(f.getPath())); 
                while((bytesRead = in.read(dataRead,0,1000)) != -1) {
                    zOut.write(dataRead, 0, bytesRead);
                }
                zOut.closeEntry();
            }
        }
        zOut.flush();
        zOut.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private static void zipInnerDirectory(File dir, ZipOutputStream zOut) throws IllegalArgumentException {
    if (!dir.isDirectory()) {
        throw new IllegalArgumentException("The first parameter (srcDirectory) MUST be a directory.");
    }
    BufferedInputStream in = null;
    int bytesRead;
    byte[] dataRead  = new byte[1000];
    try {
        for (File f : dir.listFiles()) {
            if (f.isDirectory()) {
                FileUtilities.zipInnerDirectory(f,zOut);
            }else {
                in = new BufferedInputStream(new FileInputStream(f.getAbsolutePath()), 1000);
                zOut.putNextEntry(new ZipEntry(f.getPath())); 
                while((bytesRead = in.read(dataRead,0,1000)) != -1) {
                    zOut.write(dataRead, 0, bytesRead);
                }
                zOut.closeEntry();
            }
        }
        zOut.flush();
        zOut.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

正如我所说的不是我最好的编码，所以请不要评判代码（或者至少不要太严格；）），我知道它可以更好；好的*“意外行为”*是这样的，假设我有以下目录：

*   H:\MyDir1\MyDir2\MyDirToZip

当我将使用该路径创建的文件作为参数发送`new File("H:\\MyDir1\\MyDir2\\MyDirToZip")`时（

*   H:\MyDir1\MyDir2\MyDirToZip

当我期待在里面找到时：

*   \MyDirToZip

没有 H: \MyDir1 \MyDir2 这是“不必要的”（顺便说一句，它们只是以适当的顺序相互包含一个，我的意思是，其中的其他文件没有被压缩，这就是为什么我说它们是不必要的）所以问题是，我做错了什么？如何指定我只想将结构压缩到*srcDirectory*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:59:31.927

```
zOut.putNextEntry(new ZipEntry(f.getPath())); 
```

这应该是问题所在。`f.getPath()`将返回相对于某个根目录（可能是您当前的工作目录）的路径，但不相对于您正在压缩的目录。您需要找出一种从 zip 目录中获取相对路径的方法，可能会这样做：

```
new ZipEntry(f.getAbsolutePath().substring(zipDir.getAbsolutePath().length())) 
```

或者，如果要添加根目录：

```
new ZipEntry(zipDir.getName() + "/"
             + f.getAbsolutePath().substring(zipDir.getAbsolutePath().length())) 
```

# android - Google 云消息传递中的 WakeLock

> ID：13419981
> 
> 赞同：0
> 
> 时间：2012-11-16T15:52:54.593
> 
> 标签：android, google-cloud-messaging, wakelock

我正在通过以下教程[Android Developer Guide](http://developer.android.com/guide/google/gcm/gcm.html)学习 GCM 。有这样一行“*您的应用程序必须在启动服务之前获取唤醒锁 - 否则设备可能会在服务启动之前进入睡眠状态。* ”
在示例代码中，接收器首先接收消息，然后触发您自己的实现`IntentService`，代码如下。

我的问题是为什么我们在课堂上得到这个`WakeLock`而`IntentService`不是在`Receiver`课堂上？

```
public class MyBroadcastReceiver extends BroadcastReceiver {

    @Override
    public final void onReceive(Context context, Intent intent) {
        MyIntentService.runIntentInService(context, intent);
        setResult(Activity.RESULT_OK, null, null);
    }
}

public class MyIntentService extends IntentService {

    private static PowerManager.WakeLock sWakeLock;
    private static final Object LOCK = MyIntentService.class;

    static void runIntentInService(Context context, Intent intent) {
        synchronized(LOCK) {
            if (sWakeLock == null) {
                PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
                sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "my_wakelock");
            }
        }
        sWakeLock.acquire();
        intent.setClassName(context, MyIntentService.class.getName());
        context.startService(intent);
    }

    @Override
    public final void onHandleIntent(Intent intent) {
        try {
            String action = intent.getAction();
            if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
                handleRegistration(intent);
            } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
                handleMessage(intent);
            }
        } finally {
            synchronized(LOCK) {
                sWakeLock.release();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:14:14.353

唤醒锁用于服务。当您完成唤醒锁对象后，您必须释放该对象，这就是原因。

# android - 正在向 ADT Eclipse(Juno) 中缺少的虚拟设备添加自定义 android 皮肤

> ID：13419984
> 
> 赞同：5
> 
> 时间：2012-11-16T15:53:09.367
> 
> 标签：android, device

我正在使用 Eclipse IDE (Juno 4.2) 和最新的 Android/Google ADK。加载/使用自定义皮肤的能力似乎已经消失。在 AVD（android 虚拟设备管理器）中创建设备时，可以从下拉列表中指定皮肤{必须将皮肤加载到 sdk/android-##/skins}。目录仍然存在，但添加皮肤不允许/允许在虚拟设备创建过程的任何部分选择它。

我在 windows 和 mac os 上运行 Eclipse Juno 4.2。

developer.android.com 文档仍然显示用于选择自定义皮肤的 UI。是否仍然可以使用自定义皮肤现在对皮肤有限制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T02:57:34.823

我发现这样做的唯一方法是为您的 AVD 手动编辑 config.ini 文件。将字段“skin_name”更改为您要使用的皮肤的名称，并将“skin_path”更改为皮肤的路径，相对于 sdk 目录。

因此，如果您的皮肤是 SDK 附加组件的一部分，则 AVD config.ini 如下所示：

```
skin_name=1280x800
skin_path=1280x800 
```

将改为：

```
skin_name=MyDevice
skin_path=add-ons\addon_device_vendor_api\skins\MyDevice 
```

或者在您的示例中：

```
skin_path=platforms\android-##\skins\MySkin 
```

文档似乎尚未针对 ADT 的第 21 版进行更新，因此也许他们将来会有更多信息。我真的很想知道是否有办法从设备管理器中执行此操作，但这是我发现的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:53:30.683

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置，每次都必须设置屏幕。**

在 ADT21 Oversion 中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。

# javascript - 不允许 405 错误，而我有 javascript 错误

> ID：13419989
> 
> 赞同：0
> 
> 时间：2012-11-16T15:53:24.593
> 
> 标签：javascript, asp.net

我有一个非常奇怪的问题，我想知道这怎么可能......

我在服务器端使用 ASP 开发一个应用程序，在客户端使用一些 JS/Ajax。并且已经有好几次了，当我遇到 JS 错误时，页面更改并且我收到 405 错误，而不是在 Chrome 控制台中看到错误...

例如，我当前的错误是尝试访问空对象上的属性......在这段代码之后，我正在发送一个请求，但我已经放置了很多 alert() 来跟踪我的代码和 Ajax 的执行未达到请求代码...

任何想法？

# python - 从pyusps解析地址信息

> ID：13419995
> 
> 赞同：3
> 
> 时间：2012-11-16T15:54:03.793
> 
> 标签：python, django, api

我正在使用 Pyusps(Python USPS Api) 来验证地址是否实际存在。我创建了一个表格来捕获数据；我很难从 api 接收数据并将其显示在下一页上。任何帮助将不胜感激。

```
#views.py

def address(args):
    address = AddressForm['street']

def city(args):
    city = AddressForm['city']

def state(args):
    state = AddressForm['state']

def zip5(args):
    zip5 = AddressForm['zip_code']

def address_view(request):
if request.method == 'POST':
    form = AddressForm(request.POST)
    if form.is_valid():
        try:
            from pyusps import address_information
            addr = dict([
                ('address', {'address': address}),
                ('city', {'city': city}),
                ('state', {'state': state}),
                ('zip5', {'zip_code': zip5}),
            ])
            address_information.verify('API_ID', addr)
            a = dict([
                ('address', '6406 IVY LN'),
                ('city', 'GREENBELT'),
                ('state', 'MD'),
                ('zip5', '20770'),
                ('zip4', '1441'),
                ])
            c = {'form': a}
            return render_to_response('address_change.html', c, context_instance=RequestContext(request))
        except ValueError:
            pass

else:
    form = AddressForm()
c = {'form': form}
return render_to_response('address_change.html', c, context_instance=RequestContext(request))

#models.py
class Address(models.Model):
user = models.ForeignKey(User)
street = models.CharField(max_length=50)
city = models.CharField(max_length=50)
state = models.CharField(max_length=50)
zip_code = models.CharField(max_length=50)

# Pyusps API Documentation
from pyusps import address_information

 addr = dict([
 ('address', '6406 Ivy Lane'),
 ('city', 'Greenbelt'),
 ('state', 'MD'),
 ])
 address_information.verify('foo_id', addr)
  dict([
('address', '6406 IVY LN'),
('city', 'GREENBELT'),
('state', 'MD'),
('zip5', '20770'),
('zip4', '1441'),
]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:07:30.840

我想我看到了你的问题，这个：

```
addr = dict([
                ('address', {'address': address}),
                ('city', {'city': city}),
                ('state', {'state': state}),
                ('zip5', {'zip_code': zip5}),
            ]) 
```

应该：

```
addr = dict([
                ('address', address),
                ('city', city),
                ('state', state),
                ('zip5', zip5),
            ]) 
```

# git - 带有 stash 的 git rebase 显示可能的重复提交

> ID：13419997
> 
> 赞同：0
> 
> 时间：2012-11-16T15:54:08.393
> 
> 标签：git, git-rebase, git-flow, git-stash

我将 git 与 git flow 以及“dev”和“branches”一起使用。我开发了一个基于 dev 的功能，然后在 dev 中进行了一些提交。现在我想在 dev HEAD 上重新定义我的功能。Rebase 工作得很好，但我也隐藏了我的功能的变化。当我运行 gitk 时，一切看起来都很好，但是当我在视图中勾选“All refs”时，它会显示功能分支两次 - 一次正确地重新基于 dev HEAD，而且还显示在它在分支树中的旧位置。我认为它与隐藏有关，因为没有隐藏就不会出现。

变基之前：

```
A-B-E
   \
    C-D 
```

变基后

```
A-B-E-C-D 
```

在用 stash 变基后

```
A-B-E-C-D-stash
   \
    C-D-stash 
```

实际问题：这些提交真的是重复的吗？如果是，我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:03:38.223

您可以看到旧的 pre-rebase 提交，因为它们可以通过 stash 访问。当您更改历史记录时，Git 不会更改提交，它只是存储新的提交。

您可以忽略提交。如果你放下 stash，即使查看所有 refs，你也不会看到它们。下一个`git gc`（自动或手动）将删除它们。