# StackOverflow 问答 14751000-14751999

# php - 替代使用 $_SESSION 变量来解决多个选项卡问题

> ID：14751000
> 
> 赞同：2
> 
> 时间：2013-02-07T12:21:37.250
> 
> 标签：php, session, tabs, navigation

我开始编写一个将某些用户信息存储在`$_SESSION`变量中的 Web 应用程序。通常的东西 - user_id，用户名等。

然后我开始使用变量来存储某些导航信息。例如，`$_SESSION['organisation_id']`无论用户在应用程序中的哪个位置，我都可以轻松地将“organisation_id”添加到任何表中，而无需在每个页面请求中解析“organisation_id”（例如 index.php?organisation_id=456&var2=6 或 anotherpage.php ?organisation_id=456& 等）

直到用户打开一个新选项卡并开始导航到另一个组织之前，所有笨拙的东西，因此`$_SESSION['organisation_id']`在原始选项卡上创建了一个新值并创建了一个史诗般的失败。

我能想到的唯一解决方案是回到将 organization_id 放入应用程序中的每个表单和导航元素中，但是是的，我认为必须有一个更优雅的解决方案。

通常，我可以在 StackOverflow 上找到我需要的一切，但这个问题的答案仍然让我难以捉摸！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:28:00.223

也许您可以检查 $_SESSION['organisation_id'] 是否存在，如果存在，您可以在会话中编写具有不同名称的新变量，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:37:35.030

您可以在该用户名的 onblur 期间将值存储到会话中，等等，您可以在单击下一个选项卡之前获取它

（即）使用 Jquery/Javascript 你可以在 onblur 时获取用户名等的值并将其存储在会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:33:01.523

我认为这是一个逻辑问题。会话代表用户的**状态**。这是因为 HTTP 本质上是一个无状态协议（它不知道谁是谁，只是理解请求和响应）。

所以`organization_id`是一个**状态**。如果用户只能登录一个组织，您只需像以前一样将其存储在会话变量中并使用它。如果用户注销并再次使用另一个登录`organization_id`，则只有最后一个仍然可用是有意义的。

如果您的应用程序必须支持多个`organization_id`'，您应该在会话处理中反映该逻辑，例如保存一组组织 ID（而不仅仅是一个）。但是您必须更改您的应用程序以允许用户从一个组织导航到另一个组织，等等。如果屏幕只显示其中一个，那么让用户同时进入两个组织是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:41:15.307

您可以通过简单地将当前放入`$_SESSION`数组的数据移动到 内的子数组中来解决此问题`$_SESSION`，这样您就可以在会话中一次存储多组数据。

它最终看起来有点像这样：

```
$_SESSION[organisations] = array(
     '456' => array('organisationID'=>456, 'otherdata'=>'blah'),
     '678' => array('organisationID'=>678, 'otherdata'=>'blah'),
     ...etc...
); 
```

这将允许您一次将多个组织的数据保存在会话数据中，因此您不必每次都加载所有数据。

但是，是的，您*需要*在每个请求中发送相关的组织 ID，以便您的代码知道要使用会话数据的哪个元素。你无法真正解决这个问题。每个请求都需要告诉 PHP 使用哪个 orgID。

这里的缺点是，通过将所有数据存储在会话中，您为会话数据使用了更多内存，因此如果用户有可能在会话期间浏览很多组织，我会建议`$_SESSION`通过删除一段时间未使用的数据来限制大小。

另一个缺点是，如果这是一个多用户系统，将数据存储在会话中意味着它将不知道其他用户所做的任何更新。如果您要在每次请求时从数据库中加载新数据，是的，它会为数据库创建更多工作，但它会确保提供给用户的数据始终是最新的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:23:29.367

“我能想到的唯一解决方案是回到将 organization_id 放入应用程序中的每个表单和导航元素中，但是是的，我认为必须有一个更优雅的解决方案。”

不，没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T12:31:06.223

目前没有办法解决这个问题。但是为了避免将来发生类似的任务，我建议将所有文件拆分为不同的包含。因此，即使您必须向整个站点添加几个变量，您也可以修改 1 个文件并完成它，而不是再次执行整个操作。

# jquery - 带有 Egg 插件的 jQuery ImageDropdown 在 IE7 或 IE8 上不起作用

> ID：14751003
> 
> 赞同：0
> 
> 时间：2013-02-07T12:21:59.510
> 
> 标签：jquery, jquery-plugins, drop-down-menu, internet-explorer-7, skinning

我正在使用[Egg ImageDropdown 插件](http://egg.liam-galvin.co.uk/?p=demo_imagedropdown)来下拉图像。它在 FF、Chrome 和 IE9 上运行良好，但在 IE7 和 IE8 上，本机下拉列表位于蒙皮下拉列表的顶部，并且它们都不可点击。

根据文档，我安装了以下 jQuery 和标记。

```
$(document).ready(function(){
    $('.egg_imagedropdown').EggImageDropdown();      
});
        <select name="banners" id="banners" class="egg_imagedropdown">              
            <option value='1'>/downloads/Image/1.jpg</option>   
            <option value='2'>/downloads/Image/2.jpg</option>   
        </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:02:09.080

EggImageDropdown 无法在 IE7 和 IE8 上运行的原因是我在一个`iframe`没有以下 DOCTYPE 声明的页面中有调用 Egg 的页面。它必须如下设置：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

# regex - 如何首先提取带引号的字符串？

> ID：14751004
> 
> 赞同：0
> 
> 时间：2013-02-07T12:22:05.663
> 
> 标签：regex, shell, pattern-matching

我有一个包含这些值的文件：-

```
<property name="india" column="delhi" />
<property name="austrelia" column="sydney" />
<property name="uae" column="dubai" /> 
```

现在我想在第一个“”中提取值。所以结果应该是： -

```
india
austrelia
uae 
```

我正在使用 shell，我的正则表达式是 "(.*?)" 。但它同时选择了“”值。我只想要第一个。有人可以为此建议我正确的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:33:47.623

试试这个：

```
sed -r 's/^[^"]+"([^"]*)".*/\1/' file 
```

用你的数据测试：

```
kent$  echo '<property name="india" column="delhi" />
<property name="austrelia" column="sydney" />
<property name="uae" column="dubai" />'|sed -r 's/^[^"]+"([^"]*)".*/\1/'
india
austrelia
uae 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:35:00.507

```
$ awk -F\" '{print $2}' file 
```

顺便说一句，shell 可能不是解析 XML 的理想工具。

# javascript - “长度”为空或不是对象？IE 8.请帮助

> ID：14751005
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:22:06.797
> 
> 标签：javascript, internet-explorer-8

这是代码，有什么想法吗？这适用于其他浏览器，但它卡在 ie8 中。任何帮助将不胜感激 。

```
function getRadioValue(radioN)
{
    for(i=0; i<document.kartice_form[radioN].length; i++)
    {
        if (document.kartice_form[radioN][i].checked == true)
            return parseInt(document.kartice_form[radioN][i].value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:45:41.547

使用 jQuery 为您重写的函数（假设 jQuery 没问题，因为您将它包含在标签中）：

```
function getRadioValue(radioN) {
    return parseInt($('input[name="+radioN+"]:checked').val());
} 
```

# facebook - API调用检索Facebook用户的所有公共信息？

> ID：14751008
> 
> 赞同：0
> 
> 时间：2013-02-07T12:22:33.883
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我知道我可以通过类似的方式调用每个单独的字段 `/---ID----?fields=gender,languages,age_range,bio,birthday,education,email,hometown`

有没有比列出每个字段更快的方法？

如果用户使用他们的隐私设置锁定了这些字段中的大部分，那没关系，我只是希望它提取可用的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:32:13.643

试试看嘛：

```
https://graph.facebook.com/{{ username or uid }}?access_token={{access token goes here}}

Example:
https://graph.facebook.com/zuck?access_token=### 
```

将提供该用户可用的所有公共信息。

# image - 如何在不改变大小的情况下旋转图像？

> ID：14751011
> 
> 赞同：17
> 
> 时间：2013-02-07T12:22:53.027
> 
> 标签：image, imagemagick

当通过`convert -rotate`命令旋转图像时，图像尺寸会放大。有没有办法围绕中心旋转并保持图像大小，裁剪边缘？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-16T19:58:28.320

```
convert image.jpg -distort SRT -45 rotate_cropped_image.png 
```

见[http://www.imagemagick.org/Usage/warping/#animations](http://www.imagemagick.org/Usage/warping/#animations)

例子：![动画 GIF](../Images/414eb0398d40931bfbf26b09b49ab931.png)

另请参阅有关 -distort 的帮助：[http ://www.imagemagick.org/script/command-line-options.php?#distort](http://www.imagemagick.org/script/command-line-options.php?#distort)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-13T02:08:02.590

如果您知道图像的大小，则以下工作：

```
convert -rotate 45 -gravity center -crop NxN input output 
```

用方形图像测试。可能有一种方法可以指定 NxN 是输入图像的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-15T01:15:00.723

现在这似乎只是“正常工作”——逆时针 90 度：

```
$ convert image.jpg -rotate -90 rotated_ccw.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:22:53.027

我在 Imagemagick 论坛上找到了这个答案：

在不知道图像原始大小的情况下，一个简单的解决方案是使用 Alpha 合成运算符“Src”作为“裁剪到此图像大小”类型的操作。看：

[http://www.cit.gu.edu.au/~anthony/graphics/imagick6/compose/#src](http://www.cit.gu.edu.au/~anthony/graphics/imagick6/compose/#src)

例如（仅限 ImageMagick 版本 6）：

```
convert image.jpg \( +clone -background black -rotate -45 \) \
    -gravity center -compose Src -composite rotate_cropped_image.png 
```

# google-maps-api-3 - 如何使用 Google Directions API 检查路线中是否存在一个地方？

> ID：14751019
> 
> 赞同：1
> 
> 时间：2013-02-07T12:23:18.297
> 
> 标签：google-maps-api-3, google-directions-api

我有一个地方我想使用 Google Directions API 检查 Source 和 Destination 路线之间是否存在该地点。

例如：A - 源 B - 目的地和 C - 是地方。

现在我想检查 A 到 B 路线中是否存在 C。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:11:06.757

DirectionRoute包含一个`overview_path`-property，它定义了路线的简化路径。

您可以使用此路径创建折线，然后使用[google.maps.geometry.poly.isLocationOnEdge()](https://developers.google.com/maps/documentation/javascript/reference?hl=en#poly)检查该地点是否在路线上。

由于`overview_path`简化了，您可以使用[步骤](https://developers.google.com/maps/documentation/javascript/reference?hl=en#DirectionsStep)的路径属性来创建更详细的路线（折线）并获得更准确的结果。

# jquery - 阻止 mouseup 事件侦听器中的默认链接操作

> ID：14751020
> 
> 赞同：0
> 
> 时间：2013-02-07T12:23:20.683
> 
> 标签：jquery, mouseup, onmouseup

我在矩阵中的几个链接上有几个 jQuery 事件侦听器（*这是一个地图包裹选择*）。现在我已经阻止了 mousedown 的默认操作，但是如果我阻止了 mouseup 的操作，它就不起作用了。我阻止了对链接的 mousedown 的默认操作，并从那里开始“标记”元素。如果在同一元素中出现“mouseup”，则执行链接。

所以我需要做的是防止在 mouseup 中执行链接，但它不起作用。

```
$('a.parcel').on('mouseup',function(event){
    event.preventDefault();
}); 
```

这仍然会执行在 a 元素的 href 中给出的链接。

任何想法任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:27:14.693

您在事件上阻止的默认操作`mouseup`不负责更改 href。话虽如此，不管你是否阻止它，href 都会在`click`事件中执行。

该`click`事件在 之后被触发`mousedown`，因此将 更改`mouseup`为`click`应该可以正常工作。

# javascript - 模糊 HTML5 画布

> ID：14751032
> 
> 赞同：3
> 
> 时间：2013-02-07T12:23:49.187
> 
> 标签：javascript, html5-canvas

如何模糊 HTML5 画布的内容？

我知道我可以使用 CSS，但我需要模糊画布的内容，以便以后可以操作它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:18:54.523

没有本机功能可以做到这一点。但是您可以实现自己的图像过滤器操作，方法是使用`context.getImageData`获取画布数据的原始 RGBA 值数组，对该数据执行过滤器操作，然后使用`context.putImageData`.

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)

# mysql - UNIQUE KEY 不知从何处生成

> ID：14751040
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:10.607
> 
> 标签：mysql, hibernate, jpa, many-to-many

我有 2 个带有*@ManyToMany*关系字段的表。在休眠配置文件中我有

```
<property name="hbm2ddl.auto">update</property> 
```

在应用程序启动期间创建的表在*PartId列上设置了**唯一*键，即

 *```
@JoinColumn(name="PartId")} 
```

在*@ManyToMany*关系中。我没有在任何地方设置此列应具有唯一键。这是默认的自动创建行为吗？

数据库是**MySQL 5.5**

谢谢。

**升级版：**

完整的字段描述是：

```
@ManyToMany
  @JoinTable(name="Part_Dev", 
    joinColumns={@JoinColumn(name="PartId")}, 
    inverseJoinColumns= {@JoinColumn(name="DevCode")})
    public List<Dom> getDom() { return dom; } 
```

**更新 2**

对不起，我看到我没有提到它。*零件*表中的唯一键，

```
@Entity @Table(name="Parts") 
public class Parts implements Serializable{ 

@ManyToMany 
 @JoinTable(name="Part_Dev", 
  joinColumns={@JoinColumn(name="PartId")}, 
  inverseJoinColumns= {@JoinColumn(name="DevCode")}) 
public List<Dom> getDom() { 
  return dom; }

  @Column(name="PartId")
public Integer getPartId() {
  return partId; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:27:55.020

您需要指定 @JoinTable 才能实现。例如，如果您有两个实体：Employee 和 Project 处于多对多关系中。您需要在一侧有@JoinTable。

```
@Entity
public class Employee {
@Id private int id;
private String name;
@ManyToMany
@JoinTable(name="EMP_PROJ",
joinColumns=@JoinColumn(name="EMP_ID"),
inverseJoinColumns=@JoinColumn(name="PROJ_ID"))
private Collection<Project> projects; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:00:05.690

所以，正如克里斯所说，这是识别每个部分的方法。*

# jquery - .delay 似乎没有延迟 .fadeOut/.fadeIn

> ID：14751041
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:16.067
> 
> 标签：jquery, delay

我对以下代码行有疑问。

```
$("#chicken").delay(scrolllen).fadeOut(0).removeClass("flipped").css({ left: 900 + "px" , top : 2370 + "px"}).fadeIn(0).animate({ left: 1500 + "px" , top : 2370 + "px"}, 5000, 'linear'); 
```

所以我有其他动画发生。他们采取`scrolllen`所以我有延迟，以便它等待该动画的结束。然后物品屋从它所在的地方消失。问题是，`.fadeOut`它立即发生，所以我看到该项目消失了。还有另一种方法可以实现这一目标吗？

[http://jsfiddle.net/8dAqz/](http://jsfiddle.net/8dAqz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:37:36.760

这是一个小提琴：http: [//jsfiddle.net/Kqwrm/1/](http://jsfiddle.net/Kqwrm/1/) `grr, hate the code requirement`

虽然您的代码为红色方块制作动画，但我认为您的意思是绿色方块所做的（不过，同时执行 fadeOut 和 fadeIn 并没有太大效果）。

现在，问题是——你到底想要发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:08:06.840

我似乎已经用另一种方式解决了这个问题。

[http://jsfiddle.net/8dAqz/1/](http://jsfiddle.net/8dAqz/1/)

通过使用 javascript 函数`setTimeout`并在其中包含 jQuery 调用，它会按预期停止。

# python - ImproperlyConfigured at / 'ClientEventLogAdmin.exclude' 指的是表单中缺少的字段 'created'

> ID：14751042
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:16.563
> 
> 标签：python, django

我正在安装一个 django 应用程序模块。我收到此错误。我启动了另一个 MicroInstance 并重新安装了所有内容，但仍然出现此错误。.

```
Environment:

Request Method: GET
Request URL: http://54.235.127.252/mds/

Django Version: 1.3.1
Python Version: 2.7.3
Installed Applications:
['sana.mrs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'sana.mrs.util.LoggingMiddleware')

Traceback:
File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  250\.             for pattern in self.url_patterns:
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_url_patterns
  279\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/lib/python2.7/dist-packages/django/core/urlresolvers.py" in _get_urlconf_module
  274\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/opt/sana/urls.py" in <module>
  12\. admin.autodiscover()
File "/usr/lib/python2.7/dist-packages/django/contrib/admin/__init__.py" in autodiscover
  26\.             import_module('%s.admin' % app)
File "/usr/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/opt/sana/mrs/admin.py" in <module>
  26\. admin.site.register(ClientEventLog, ClientEventLogAdmin)
File "/usr/lib/python2.7/dist-packages/django/contrib/admin/sites.py" in register
  97\.             validate(admin_class, model)
File "/usr/lib/python2.7/dist-packages/django/contrib/admin/validation.py" in validate
  24\.     validate_base(cls, model)
File "/usr/lib/python2.7/dist-packages/django/contrib/admin/validation.py" in validate_base
  279\.             check_formfield(cls, model, opts, 'exclude', field)
File "/usr/lib/python2.7/dist-packages/django/contrib/admin/validation.py" in check_formfield
  369\.                 "is missing from the form." % (cls.__name__, label, field))

Exception Type: ImproperlyConfigured at /
Exception Value: 'ClientEventLogAdmin.exclude' refers to field 'created' that is missing from the form. 
```

注意：我只需要安装这个应用程序。我是python的中级。和Django的初学者。但是专业的PHP，mysql和jQuery前端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:51:52.893

在我看来，问题很可能与`moca`框架有关。

如果您的`/opt/sana/mrs/admin.py`文件看起来像[这样](http://code.google.com/p/moca/source/browse/servers/mds/branches/trunk/sana/mrs/admin.py?spec=svn994&r=994)，那么罪魁祸首可能位于[第 12 行](http://code.google.com/p/moca/source/browse/servers/mds/branches/trunk/sana/mrs/admin.py?spec=svn994&r=994#12)：该`created`字段在排除列表中被引用，但之前未定义。

由于我不确定您的需求，这里有一些您可以尝试的解决方案：

*   重新安装或更新您的`moca`框架词；
*   在执行定义之前添加一段代码（虽然不确定它应该是什么类型）：

    ```
    from django.db import models # You may also place it in the top of the file
    created = models.DateField(blank=True, null=True) 
    ```

*   从列表中删除`created`项目`exclude`（虽然不确定影响）

希望能帮助到你，

# ssl - 如何从在 webview 中加载的 html 中使用的 javascript 发送 post webrequest - 钛移动？

> ID：14751045
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:26.687
> 
> 标签：ssl, https, titanium, titanium-mobile, image-uploading

我需要从钛移动 webview 发送 post web 请求。

创建了一个 webview 并包含以下 html 代码 (Upload.html)

```
<html>
<head>
    <script>
        function loadXMLDoc()
        {
            //alert('asdfsf');
            var xmlhttp=new XMLHttpRequest();
            xmlhttp.open("POST","https://www.mydomain.com",true);
            xmlhttp.send('encrypted image string');
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    alert('xmlhttp'+xmlhttp.responseText);
               }
            }
        }
    </script>
</head>
<body onload="loadXMLDoc()">
        <h1>Sample</h1>
</body></html> 
```

并在 webview 中使用如下：

```
var webview = Ti.UI.createWebView({
url : 'Upload.html',
height : 100,
width : 100,
top : 0,
left : 0 
```

});

在创建 webview 控制台显示

2013-02-07 17:36:20.906 WebviewSample[6575:1f43f] [警告] 无法使用最新的 TLS 安全地连接到 api.appcelerator.net。使用 TLS1.0 重试。强烈建议将服务器更新到最新的 TLS 支持。

[错误]分析错误发送请求：发生连接失败：SSL问题（可能的原因可能包括错误/过期/自签名证书，时钟设置为错误日期）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:59:03.243

尽管控制台错误似乎与您的 webview 有关，但我认为不是。

我认为您为您的应用程序启用了分析，并且由于某种原因 SSL 会话被拒绝（时间未正确配置等）。

在您的 tiapp.xml 中禁用分析，此错误不应再次出现，或者尝试找出导致 SSL 连接被拒绝的原因。

第二个想法：如果您尝试发布到 https 域并且您的时间配置已经存在问题。它可能不会通过 webview 发布任何内容，因为 SSL 连接也被拒绝，原因与分析连接相同。

# asp.net-mvc-3 - Telerik MVC3 网格区分过滤列名称

> ID：14751048
> 
> 赞同：1
> 
> 时间：2013-02-07T12:24:33.220
> 
> 标签：asp.net-mvc-3, telerik-mvc

谁能建议我将过滤后的 Telerik 网格列与其他列区分开来的可能性。这意味着我可以提供不同的配色方案来区分过滤后的列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:39:24.910

作为不得不以类似方式处理 Telerik MVC 网格的人，我将与您分享我的解决方案：

1）运行有你的网格的网页，并查看源代码。

2) 通过查看源代码，了解打开过滤器时究竟发生了什么（即属性更改、调用某个函数等）。

3) 使用 jQuery，在该事件发生时设置该列的配色方案。

您不能仅使用 Telerik 的控件本身来完成它，这很烦人，但这应该可以帮助您。

# maven-plugin - 在我的自定义 Maven 插件中“找不到 mojo 错误”

> ID：14751049
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:37.080
> 
> 标签：maven-plugin, maven-plugin-development, maven-mojo

我开发了一个自定义 Maven 插件，它有两个 Mojo。我从我的 IDE 中对其进行调试，其中一个目标运行良好，但找不到另一个目标。它说：

```
 Unable to find the mojo 'replace' (or one of its required components) 
```

这是我的魔力：

工作一：

```
/**
 * Goal for process
 *
 * @goal process
 * @phase compile
 *
 * @threadSafe
 */
public class ProcessMojo extends AbstractMojo { 
```

不工作：

```
/**
 * Goal for replace
 *
 * @goal replace
 * @phase compile
 *
 * @threadSafe
 */
public class ReplaceMojo extends AbstractMojo { 
```

可能是什么原因，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:15:56.693

这可能是因为我的魔力中的某些东西，我已经重新编码并解决了问题。

# python - python函数返回一个列表

> ID：14751055
> 
> 赞同：0
> 
> 时间：2013-02-07T12:24:59.710
> 
> 标签：python, django

我有一个返回的python函数

```
def edit_user(request):
    error  = False
    errMsg = ""

    id = int(request.POST.get("add_user"))
    if config.editUser(id) != True
        error = True
        errMsg =  _('Failed to edit existing user.')

    return [error, errMsg] 
```

我从另一个 python 函数调用这个函数。

如何将这两个返回值 (`error`和`errMsg`) 放入两个单独的变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:27:21.480

像这样：`error, errMsg = edit_user(request)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:27:41.743

只需将结果分配给 a `list`or `tuple`：

```
error,errMsg = edit_user(...)
(error,errMsg) = edit_user(...)
[error,errMsg] = edit_user(...) 
```

第一种语法是最可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:35:03.793

只是为了添加其他答案：根本没有理由在这里列出清单。只需这样做：

```
return error, errMsg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:02:35.603

慧正是对的——`error, errMsg = edit_user(request)`会做的。

该过程称为解包，可用于解包复杂的数据结构（有关另一个示例，请参阅此[SO 问题](https://stackoverflow.com/questions/10950176/python-semantics-multiple-parameters-in-declaration-of-for-loop)，并查看[python 文档](http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences)以获取更多信息）。

# android - 为小于 4.2 的 android 构建屏幕锁定小部件

> ID：14751056
> 
> 赞同：2
> 
> 时间：2013-02-07T12:25:00.557
> 
> 标签：android, android-widget, lockscreen, android-music-player

我阅读了很多关于锁屏小部件的帖子，但我不明白是否可以为低于 4.2 的 Android 版本构建锁屏小部件？

我有一个音乐应用程序，我想要一个可以播放、暂停、播放下一首和最后一首歌曲的锁定屏幕小部件，类似于 iPod 播放时的 iPhone 锁定屏幕，与 Android 的音乐播放器相同。

如果 Android 2.1 - 4.1 不可能，那么为什么三星 Galaxy S2 上的 android 2.3.3 中的原生音乐播放器可以做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T06:38:56.693

这似乎是重复的问题。请在此处查看我的答案以获取所需的 lockScreen 控件。

答案：**[锁定屏幕上的媒体控制，如 android 中的 Google Play 音乐？](https://stackoverflow.com/questions/24652078/media-control-on-lock-screen-like-google-play-music-in-android/25617234#25617234)**

# c++ - 从 Visual C++ 2012 获取进程名称

> ID：14751057
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:01.977
> 
> 标签：c++, visual-c++

如何获取这种格式的流程信息我的开发工具是visual c++ 2012 我想获取流程名称，流程ID，流程路径，产品名称窗口标题，但我不知道如何将这些信息连接起来

每次我访问其他应用程序时，此信息都会更改。

我可以得到应用程序的标题，如 google- Internet Explorer。但我无法将进程名称设为 iexplore。

请指导我。

![图像](../Images/8258c43b7ebe79a576e3ba9441d242ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:01:20.850

获取当前进程的 EXE 名称：

```
TCHAR name[MAX_PATH];
GetModuleFileName(GetModuleHandle(NULL), name, sizeof(name)); 
```

使用`NULL`作为参数`GetModuleHandle()`将返回`HANDLE`用于启动进程的 EXE。其余的很简单。

**更新**：从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)：

```
TCHAR name[MAX_PATH];
GetModuleFileName(NULL, name, sizeof(name)); 
```

您可以`NULL`用作模块句柄，它将已经获得 EXE 的名称。

# android - 以编程方式在 Android 中创建样式而不参考资源

> ID：14751063
> 
> 赞同：1
> 
> 时间：2013-02-07T12:25:16.093
> 
> 标签：android, dynamic, styles, spannablestring

我正在开发一个应用程序，它从 XML 文档中读取文本，然后在屏幕上显示该文本。我希望能够`TextAppearanceSpan`基于 XML 文档中给出的参数（字体、大小、颜色、粗体/斜体等）以编程方式创建一个对象，这些参数不依赖于资源文件（对于`SpannableString`我的 TextView 中的 s）。

我正在查看以下构造函数：

`TextAppearanceSpan(String family, int style, int size, ColorStateList color, ColorStateList linkColor)`

但我似乎找不到任何关于`ColorStateList`s 如何工作的信息。我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:26:09.323

# c# - 文本追加到现有文件

> ID：14751064
> 
> 赞同：1
> 
> 时间：2013-02-07T12:25:15.853
> 
> 标签：c#, winforms, file-io

```
<namespace>
<root>
<node1>
<element 1>
<element 1>
</node1>
<node2>
<element 1>
<element 1>
</node2>
</root>

string stringContains = string.Empty;
                foreach(string line in File.ReadLines(Path))
                {
                    if(line.Contains("<Root>"))
                    {
                        stringContains = line.Replace("<Root>", "<Root>" + newelement.OuterXml);
                    }
                }
File.AppendAllText(Path, stringContains); 
```

我必须`root`用其他节点替换，以便我附加文本。但是，上面的代码将现有文本附加到`stringContains`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:42:59.713

尝试这个。

```
string stringContains = string.Empty;
var lines = File.ReadLines(Path);
foreach (var line in lines)
{
    if(line.Contains("<Root>"))
    {
        stringContains = line.Replace("<Root>", "<Root>" + newelement.OuterXml);
    }
}
File.WriteAllLines(Path, lines); 
```

但如果你的文件很大，那么这是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:56:02.003

**注意**：您不能只更改文件中的一行，您需要读取所有内容，更改所需部分并再次写入所有内容。

根据您有关文件大小（GB 长）的信息，您实现所需行为的唯一方法是创建新文件并写入初始文件的内容，仅更改您需要的行。

处理应该逐行完成（如您在示例中所示）以实现最小的内存使用

但是，这种方法在操作完成之前需要硬盘上的 2X 空间（假设您将在完成所有操作后删除初始文件）

关于细节：[这个问题](https://stackoverflow.com/questions/1971008/edit-a-specific-line-of-a-text-file-in-c-sharp)提供了如何实现所描述方法的完整示例

# ember.js - 如何在 addObjects 期间删除 ember-data 中的重复记录

> ID：14751067
> 
> 赞同：2
> 
> 时间：2013-02-07T12:25:26.410
> 
> 标签：ember.js, ember-data

我正在处理一组可能具有重复值的数据。当我最初添加数据时，我使用的是客户端上可用的少量信息（存储在内存中模型上的静态信息）。

但是因为每次显示车把模板时我都需要获取最新的，所以我还在计算属性中触发了一个“findAll”，以获取自初始 ember 应用程序启动以来可能已经到达服务器端的任何新数据。

在此过程中，我在 ember-data 模型上使用“addObjects”方法，但是当返回服务器端时，我在数组中看到重复记录（假设是因为它们没有相同的 clientId）

```
App.Day = DS.Model.extend({
    appointments: function() {
        //this will hit a backend server so it's slow
        return App.Appointment.find();
    }.property(),
    slots: function() {
        //no need to hit a backend server here so it's fast
        return App.Slot.all();
    }.property(),
    combined: function() {
        var apts = this.get('apppointments'),
        slots = this.get('slots');
        for(var i = 0; i < slots.get('length'); i++) {
          var slot = slots.objectAt(i);
          var tempApt = App.Appointment.createRecord({start: slot.get('start'), end: slot.get('end')});
          apts.addObjects(tempApt);
        }            

        return apts;
    }.property()
}); 
```

是否可以告诉 ember-data 模型是什么使它独一无二，以便在解决承诺时它会知道“这已经存在于 AdapterPopulatedRecordArray 中，所以我将更新它的值而不是显示两次”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:44:45.017

您可以使用

```
DS.RESTAdapter.map('App.Slot', {
  primaryKey: 'name-of-attribute'
});
DS.RESTAdapter.map('App.Appointment', {
  primaryKey: 'name-of-attribute'
}); 
```

但我认为这仍然是不可能的，因为`App.Slot`它们`App.Appointment`是不同的模型类，所以如果它们具有相同的 id，那将无济于事。您需要对插槽和约会使用相同的模型才能使其正常工作。

### 编辑

~~检查*ember-data*[的来源](https://github.com/emberjs/data/blob/b4a415e1be4db3673a102b3fdc45b6bd22d46d59/packages/ember-data/lib/system/model/model.js)后，我认为您可以在定义类时定义，例如：*`primaryKey`*~~

 *~~```
App.Slot = DS.Model.extend({
    primaryKey: 'myId',
    otherField: DS.attr('number')
}); 
```~~ 

~~虽然我没有测试它..~~

### 编辑 2

[进一步阅读](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#revision-5)后似乎不再支持以前的编辑。你需要`map`像我之前写的那样使用。*

# asp.net - IE 10 中的下拉列表显示问题

> ID：14751068
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:27.417
> 
> 标签：asp.net, internet-explorer-10

我在 IE10 上运行 .net Web 应用程序。问题似乎与项目在下拉列表中的显示方式有关。在 IE10 中，如果从恰好位于中间的列表中选择了一个项目（例如，您从 5 个项目中选择了第 3 个项目），然后再次单击下拉列表，则列表跨越该值上方的 2 个元素和下方的 2 个元素。此外，如果您选择最后一项，然后再次单击下拉列表，则列表将显示为最后一项上方的所有项目，然后是字段中的最后一项（列表向上显示）。

因此，在选择它们之后显示这些项目并再次单击控件时显示此项目只是为了查看所有项目。

在 IE8 和 9 中，就像选择的项目显示在字段中，然后整个列表如下。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T07:29:13.650

我也遇到这个问题。但是当我[在这里](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/740fd6f1-50a2-4fd8-bd94-563c620a4201/)搜索时，据说是设计。我不知道这是不是真的，但无论如何我都找不到修复它。

# android - 如何从android流式传输到ffserver

> ID：14751069
> 
> 赞同：7
> 
> 时间：2013-02-07T12:25:27.693
> 
> 标签：android, android-ndk, ffmpeg

我需要从 android 相机/文件流式传输到远程 ffserver，它将播放我的视频。我可以通过发出如下命令在 ubuntu 的桌面上执行此操作：

```
ffmpeg -f video4linux2 -s 640x480 -r 25 -i /dev/video0 http://192.168.0.20:8090/cam1.ffm 
```

或像这样流式传输文件：

```
ffmpeg -i /home/kev/share/movie.mp4 http://192.168.0.20:8090/cam1.ffm 
```

所以基本上我希望能够从 android 执行上述操作。经过几次搜索，这就是我到目前为止所做的 - 我遇到了这个链接[http://bambuser.com/opensource](http://bambuser.com/opensource)，我从中下载了 ffmpeg 源代码并构建了它。该构建输出了几件事：1\. 共享库 [libavcodec, libavcore, libavdevice, libavfilter,libavformat,libavutil,libswscale] 2\. 可执行文件 [ffmpeg,ffprobe]

不知道如何用这些资源插入我的功能，这是我迄今为止尝试过的： 1\. 使用 System.loadLibrary() 将库加载到我的 Activity 中，然后将 ffmpeg 可执行文件复制到资产文件夹，在运行时我复制到我的然后我使用 Runtime.getRuntime().exec() 为应用程序的“文件”目录设置可执行文件的权限。然后最后一步是使用以下语句在 java 中执行它：

```
Runtime.getRuntime().exec("ffmpeg -i file:///android_asset/movie.mp4http://<server>:8090/cam1.ffm"); 
```

2\. 将 ffmpeg.c、共享库和构建生成的“include”文件夹复制到我的 jni 文件夹中，并在 ffmpeg.c 中添加了一个环绕 main() 函数的 jni 函数。使用这种方法，我发现自己必须从 ffmpeg 源中复制几个头文件才能使 ndk-build 成功，我非常怀疑这是否是可行的方法。

以上两种方法对我有用，我不确定我哪里出错了，所以任何关于如何做一个简单的 ffmpeg 流（如来自 android 的 mp4 文件）的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:00:39.987

我使用apporach 2让它工作，这就是我所做的。1.将ffmpeg.c、“include”文件夹和共享库复制到我项目的jni文件夹中。

1.  参考这篇博文修改了 ffmpeg.c [http://demo860.blogspot.com/2010/07/android-ffmpeg-dynamic-module-jni.html](http://demo860.blogspot.com/2010/07/android-ffmpeg-dynamic-module-jni.html)

2.  使用 ndk 构建时出现了几个错误，所以我只是添加了缺少的依赖项，直到最终构建成功。

起初应用程序会启动，然后立即退出，这是由于我忘记做的几件事，因此请确保您已完成以下操作以节省一些时间和脱发： - 在清单上设置互联网权限（如果媒体文件在 sdcard 中，设置写入外部存储权限并确保 sdcard 已安装） - 确保远程 ffserver 正在运行并正确配置。您可以通过从桌面流式传输来确认 - 确保您传递了正确的参数

现在我可以从我的 sdcard 中的 mp4 文件流式传输到远程 ffserver，还没有尝试从设备摄像头流式传输。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T15:21:45.757

回答这个问题似乎有点晚了，但如果你需要一个解决方案，这里有一个......

好吧，我已经为同样的问题设计了一个解决方法，但是通过第一种方法是使用编译的**FFmpeg 二进制**而不是**JNI** ...

首先，在我看来，**Bambuser**提供的构建版本太旧了，**FFmpeg**的开发周期很糟糕……所以我宁愿建议从最新的 FFmpeg 源代码中自定义构建自己的二进制文件……

这是一个可用于生成的脚本：

```
#!/bin/bash

echo ""
echo " ********** FFmpeg Android Build ********** "
echo ""

NDK=$HOME/android-ndk-r8d
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
PLATFORM=$NDK/platforms/android-14/arch-arm
PREFIX=$HOME/FFmpeg.Binaries.Android
FFMPEG_BASE=$HOME/FFmpeg.Build

if [ -d "$FFMPEG_BASE" ]; then
    rm -v -r -f $FFMPEG_BASE
fi
if [ -d "$PREFIX" ]; then
    rm -v -r -f $PREFIX
fi

mkdir $FFMPEG_BASE
mkdir $PREFIX

# x264 Installation
echo ""
echo " ********** libx264 Installation ********** "
echo ""

cd $FFMPEG_BASE
git clone --depth 1 git://git.videolan.org/x264
cd $FFMPEG_BASE/x264

./configure --prefix=$PREFIX \
--enable-static \
--enable-pic \
--disable-asm \
--disable-cli \
--host=arm-linux \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--sysroot=$PLATFORM

make
sudo make install
sudo ldconfig

#FFmpeg Installation
echo ""
echo " ********** FFmpeg (Android) Installation ********** "
echo ""
cd $FFMPEG_BASE
# git clone --depth 1 git://source.ffmpeg.org/ffmpeg
cd $FFMPEG_BASE/ffmpeg

./configure --target-os=linux --prefix=$PREFIX \
--enable-cross-compile \
--enable-runtime-cpudetect \
--disable-asm \
--arch=arm \
--cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--disable-stripping \
--nm=$PREBUILT/bin/arm-linux-androideabi-nm \
--sysroot=$PLATFORM \
--enable-nonfree \
--enable-version3 \
--enable-gpl \
--disable-doc \
--enable-avresample \
--enable-demuxer=rtsp \
--enable-muxer=rtsp \
--disable-ffserver \
--disable-ffprobe \
--enable-ffmpeg \
--enable-ffplay \
--enable-libx264 \
--enable-encoder=libx264 \
--enable-decoder=h264 \
--enable-protocol=rtp \
--enable-hwaccels \
--enable-zlib \
--extra-cflags="-I$PREFIX/include -fPIC -DANDROID -D__thumb__ -mthumb -Wfatal-errors -Wno-deprecated -mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=armv7-a" \
--extra-ldflags="-L$PREFIX/lib"

make -j4 install

$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -L$PREFIX/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavfilter/libavfilter.a libavresample/libavresample.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog -lx264 --warn-once --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a

# rm -v -r -f $FFMPEG_BASE
clear
echo ""
echo "FFmpeg Android Build Successful..."
echo ""

ls -l -R $PREFIX

exit 
```

要使上述脚本正常工作，需要**Android NDK**，可以从[此处](http://developer.android.com/tools/sdk/ndk/index.html)下载。下载**NDK**并解压到您的`/home/<username>`目录，或者根据您的需要自定义脚本...

并且还要避免`file://`在命令行中使用协议，只需指定输入文件的绝对路径即可。`stdout`并尝试通过获取其和`stderr`流的实例来记录FFmpeg进程的输出......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T23:22:33.130

您不必复制共享库和包含文件夹。您可以改用 Andriod.mk 的“PREBUILD_SHARED_LIBRARY”功能。

# javascript - 在 Dojo 中创建自定义小部件，在新小部件中调用函数时出错？

> ID：14751070
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:30.167
> 
> 标签：javascript, widget, dojo

问题是我正在关注[这里](http://dojotoolkit.org/documentation/tutorials/1.8/recipes/custom_widget/)的教程，并且新小部件的功能工作正常，直到我将鼠标悬停在从“on”侦听器调用 this._changeBackground 方法的小部件上，我收到错误`TypeError: this._changeBackground is not a function`

从教程实现的最终代码如下所示：

```
define(["dojo/_base/declare","dijit/_WidgetBase", "dijit/_TemplatedMixin", "dojo/text!/JS/Allatus/Test.html", "dojo/dom-style", "dojo/_base/fx", "dojo/_base/lang","dojo/on"],
    function(declare, WidgetBase, TemplatedMixin, template, domStyle, baseFx, lang , on){
        return declare([WidgetBase, TemplatedMixin], {
            // Some default values for our author
            // These typically map to whatever you're handing into the constructor
            name: "No Name",
            // Using require.toUrl, we can get a path to our AuthorWidget's space
            // and we want to have a default avatar, just in case
            avatar: require.toUrl("JS/Allatus/custom/android_vector.jpg"),

           bio: "",

            // Our template - important!
            templateString: template,

            // A class to be applied to the root node in our template
            baseClass: "authorWidget",

            // A reference to our background animation
            mouseAnim: null,

            // Colors for our background animation
            baseBackgroundColor: "#fff",
            mouseBackgroundColor: "#def",
            postCreate: function(){
    // Get a DOM node reference for the root of our widget
    var domNode = this.domNode;

    // Run any parent postCreate processes - can be done at any point
    this.inherited(arguments);

    // Set our DOM node's background color to white -
    // smoothes out the mouseenter/leave event animations
    domStyle.set(domNode, "backgroundColor", this.baseBackgroundColor);
    // Set up our mouseenter/leave events - using dojo/on
    // means that our callback will execute with `this` set to our widget
    on(domNode, "mouseenter", function (e) {
        this._changeBackground(this.mouseBackgroundColor);
    });
    on(domNode, "mouseleave", function (e) {
        this._changeBackground(this.baseBackgroundColor);
    });
},
_changeBackground: function(toCol) {
    // If we have an animation, stop it
    if (this.mouseAnim) { this.mouseAnim.stop(); }

    // Set up the new animation
    this.mouseAnim = baseFx.animateProperty({
        node: this.domNode,
        properties: {
            backgroundColor: toCol
        },
        onEnd: lang.hitch(this, function() {
            // Clean up our mouseAnim property
            this.mouseAnim = null;
        })
    }).play();
},
_setAvatarAttr: function(av) {
    // We only want to set it if it's a non-empty string
    if (av != "") {
        // Save it on our widget instance - note that
        // we're using _set, to support anyone using
        // our widget's Watch functionality, to watch values change
        this._set("avatar", av);

        // Using our avatarNode attach point, set its src value
        this.avatarNode.src = av;
    }
}
        });
}); 
```

任何想法为什么我不能在我的自定义小部件中调用另一个函数？这只是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:28:53.540

Your mouseEnter function is being called outside the scope of your widget (scope in JS refers to the value of the "this" variable). This is a common problem and dojo has a simple solution, the function lang.hitch can be used to tie a function to a certain scope. (and more, I would recommending reading the docs on it). Here's how you should use it in this scenario :

```
// Set up our mouseenter/leave events - using dojo/on
// means that our callback will execute with `this` set to our widget
on(domNode, "mouseenter", lang.hitch(this, function (e) {
    this._changeBackground(this.mouseBackgroundColor);
}));
on(domNode, "mouseleave", lang.hitch(this, function (e) {
    this._changeBackground(this.baseBackgroundColor);
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:30:26.983

The scope of `this` by default in `on` callbacks is window. Since you want the scope to be the widget itself, you need to import `dojo/_base/lang` and use the `lang#hitch` function to explicitly set the scope of the callback

```
on(domNode, "mouseenter", lang.hitch(this,function (e) {
    this._changeBackground(this.mouseBackgroundColor);
}));
on(domNode, "mouseleave", lang.hitch(this,function (e) {
    this._changeBackground(this.baseBackgroundColor);
})); 
```

# c# - 返回多个哈希字符串

> ID：14751071
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:35.733
> 
> 标签：c#, asp.net, md5

我有以下功能：

```
public string GetRaumImageName()
    {
         var md5 = System.Security.Cryptography.MD5.Create();
        byte[] hash = md5.ComputeHash(Encoding.ASCII.GetBytes("Michael"));
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hash.Length; i++)
        {
            sb.Append(hash[i].ToString("X2"));
        }
        return sb.ToString();
    } 
```

这仅适用于一个值。

现在我想加密多个值。我尝试了一些东西：

```
public string GetRaumImageName()
    {
        var md5 = System.Security.Cryptography.MD5.Create();
        StringBuilder sb = new StringBuilder();
        byte[] hash = new byte[0];

        foreach (PanelView panelView in pv)
        {
            hash = md5.ComputeHash(Encoding.ASCII.GetBytes(panelView.Title));

        }

        for (int i = 0; i < hash.Length; i++)
        {
            sb.Append(hash[i].ToString("X2"));

        }

        return sb.ToString();
    } 
```

但只有列表中的最后一个值才能加密。如何加密列表中的多个值并返回它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:34:21.007

将每个哈希添加到列表中，然后返回该列表：

```
public List<string> GetRaumImageName()
{
    var md5 = System.Security.Cryptography.MD5.Create();
    List<string> hashes = new List<string>();
    StringBuilder sb = new StringBuilder();
    byte[] hash = new byte[0];

    foreach (PanelView panelView in pv)
    {
        hash = md5.ComputeHash(Encoding.ASCII.GetBytes(panelView.Title));

        //clear sb
        sb.Remove(0, sb.Length);

        for (int i = 0; i < hash.Length; i++)
        {
            sb.Append(hash[i].ToString("X2"));
        }
        hashes.Add(sb.ToString());
    }
    return hashes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:29:44.383

```
 public IEnumerable<String> GetRaumImageName()
    {
        var md5 = System.Security.Cryptography.MD5.Create();

        byte[] hash = new byte[0];

        foreach (PanelView panelView in pv)
        {
            hash = md5.ComputeHash(Encoding.ASCII.GetBytes(panelView.Title));
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < hash.Length; i++)
            {
                sb.Append(hash[i].ToString("X2"));

            }
            yield return sb.ToString();
        }          
    } 
```

这将返回`Values`您需要的所有内容`IEnumerable<String>`

典型用法

```
var values = GetRaumImageName();
foreach(value in values)
{
    // use the 'value'
} 
```

# encoding - C# WebClient 非英文请求头值编码

> ID：14751072
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:42.320
> 
> 标签：encoding, header, request, webclient

我想在 Web 请求的标头中添加一些自定义标头。我通过 WebClient.Headers.Add("Header: Value") 方法来做到这一点。ASCII 字符没有问题，但非 ASCII 字符有问题。

是否可以更改“**标头编码值**”？

# fortran - Fortran：输出大数组 - 超出长度，分成两行

> ID：14751073
> 
> 赞同：0
> 
> 时间：2013-02-07T12:25:43.687
> 
> 标签：fortran

在 Fortran 程序中，我需要将数组写入具有特定格式的文件中。我非常适用于较小的数组（例如，下面示例中的 alen=10），但不适用于较大的数组：然后它将每行分成两部分，就好像超过了每行的最大字符数一样。

示例（与我程序中的结构非常相似）：

```
PROGRAM output_probl
IMPLICIT NONE

INTEGER, PARAMETER :: alen=110          
DOUBLE PRECISION, DIMENSION(alen)::a
INTEGER :: i,j

OPEN(20,file='output.dat')
30  format(I5,1x,110(e14.6e3,1x))

DO i=1,15
 DO j=1,alen
  a(j)=(i*j**2)*0.0123456789
 ENDDO
 write(20,30)i,(a(j),j=1,alen)
ENDDO

END PROGRAM output_probl 
```

它可以正确编译和运行（使用 Compaq Visual Fortran）。只是输出文件有误。例如，如果我将每个数组项的字段宽度从 14 更改为 8，它会正常工作（这当然不是一个令人满意的解决方案）。我考虑了一个不合适的默认最大记录长度，但找不到如何更改它（即使使用似乎不起作用的 RECL - 如果您认为应该，欢迎使用 RECL 的具体示例）。

这可能是基本的，但我已经坚持了一段时间......欢迎任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:40:00.483

为什么不进行流式访问？对于顺序，总是有一些依赖于处理器的记录长度限制。

```
PROGRAM output_probl
IMPLICIT NONE

INTEGER, PARAMETER :: alen=110          
DOUBLE PRECISION, DIMENSION(alen)::a
INTEGER :: i,j

OPEN(20,file='output.dat',access='stream', form='formatted',status='replace')
30  format(I5,1x,110(e14.6e3,1x))

DO i=1,15
 DO j=1,alen
  a(j)=(i*j**2)*0.0123456789
 ENDDO
 write(20,30)i,(a(j),j=1,alen)
ENDDO

END PROGRAM output_probl 
```

需要说明的是，我会为格式字符串使用字符变量，或者将其直接放在 write 语句中，而不是`FORMAT`带有标签的语句中。

Fortran 95 版本：

```
PROGRAM output_probl
IMPLICIT NONE

INTEGER, PARAMETER :: alen=110          
DOUBLE PRECISION, DIMENSION(alen)::a
INTEGER :: i,j,rl
character(2000) :: ch

inquire(iolength=rl) ch

OPEN(20,file='output.dat',access='direct', form='unformatted',status='replace',recl=rl)
30  format(I5,1x,110(e14.6e3,1x))

DO i=1,15
 DO j=1,alen
  a(j)=(i*j**2)*0.0123456789
 ENDDO
 write(ch,30)i,(a(j),j=1,alen)
 ch(2000:2000) = achar(10)
 write(20,rec=i) ch
ENDDO

END PROGRAM output_probl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T15:17:09.397

下面的程序应该测试。使用 Absoft 编译器，它适用于 n=10000、10 个字符的单词，即一行 100000 个字符宽（加上一对）。使用 G95，我收到一条消息“没有足够的存储空间来处理此命令”，用于 n=5000（n=4000 有效）。character*10,dimension(:),allocatable:: 测试整数,dimension(:),allocatable::itest

1 write( *,* )'Enter n > 0' read *, n if(n.le.0) then write(* , *)'requires value n > 0' go to 1 endif write(* ,*)'n=',n allocate （测试（n），测试（n））

```
 write(test,'((i10))')(i,i=1,n)
  write(*,*)test

  open(10,file='test.txt')
  write(10,*)test
  write(*,*)'file test.txt written'
  close(10)

  open(11,file='test.txt')
  read(11,*)itest 
  write(*,*)itest
  end 
```

# java - 在 Java 中使用 rnote domino 发送邮件

> ID：14751077
> 
> 赞同：0
> 
> 时间：2013-02-07T12:26:01.353
> 
> 标签：java, email, sendmail, lotus

我正在开发一些有时应该发送邮件的应用程序。不幸的是管理员说我不能通过传统的 smtp 协议发送邮件，因为他阻止了它。

他告诉我有两种方法可以做到：1）“在这种情况下将中继服务器设置为应用程序 somestringrnotesmtp.domain.com”

在这种情况下，它看起来像是 Lotus rnotes 提供的某个 smtp 服务器。但是当我尝试使用 org.apache.commons.mail 发送邮件时，我遇到了异常

```
Caused by: javax.mail.MessagingException: Could not connect to SMTP host: somestringrnotesmtp.domain.com, port: 465;
  nested exception is:
    java.net.ConnectException: Connection refused
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1972)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1388)
    ... 40 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.connect(Unknown Source)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:317)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:207)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)
    ... 47 more 
```

1.  “为此目的使用 unix sendmail”我不知道如何做到这一点。有没有这样做的java库？

# html - bootstrap less mixin .makeColumn 是否小于跨度？

> ID：14751078
> 
> 赞同：3
> 
> 时间：2013-02-07T12:26:04.047
> 
> 标签：html, css, twitter-bootstrap, less, semantic-markup

我正在使用更少的引导程序，我目前正在尝试制作网络语义。

**HTML部分：**

```
<!-- our new, semanticized HTML -->
<div class="article">
  <div class="main-section">...</div>
  <div class="aside">...</div>
</div> 
```

**少部分：**

```
/* its accompanying Less stylesheet */
.article {
  .makeRow();        // Mixin provided by Bootstrap
  .main-section {
    .makeColumn(10); // Mixin provided by Bootstrap
  }
  .aside {
    .makeColumn(2); // Mixin provided by Bootstrap
  }
} 
```

但是当我查看呈现的 html 页面时......我的文章占用的空间比`span12`

我也可以放一个`.makeColumn(10)`and`.makeColumn(4)`它会保持在同一条线上。这就像它是一个 14 格列而不是 12 格列。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:26:32.447

不。如果您需要的列数是`n`，`.makeColumn`mixin 和`.span (#grid > .core > .span)`mixin 都计算宽度如下：

```
(@gridColumnWidth * n) + (@gridGutterWidth * (n-1)) 
```

这是您将元素设置为网格上 n 列的宽度所需的宽度。

如果`n = 6`，它会计算从网格左边缘到第 6 列右侧边缘的所有列宽和装订线宽度。6 列和 5 个装订线。

`.span` *只有*宽度，`.makeColumn`还添加了一个`float: left`，并且有一个可选的@offset 参数，这对您当前的问题并不重要，但它允许您通过添加一个在元素左侧添加列`margin: left`。

正如@sody 上面所说，将现有元素包装在 .container 中应该可以解决您的问题。我同意@kleinfreund 的观点，即尽可能使用 html 元素：

```
<div class="container">
    <article>
        <div class="main-section">Bootstrap rocks
            <aside>
                 By the way...
            </aside>
        </div>
    </article>
</div> 
```

我希望这会有所帮助。

# java - 如何将图像添加到 JFrame 容器？

> ID：14751079
> 
> 赞同：0
> 
> 时间：2013-02-07T12:26:06.500
> 
> 标签：java, swing

我有这个代码，容器显示特定的背景颜色。
我不想显示颜色，而是想将图像添加到背景中，我应该怎么做？

```
public class mark {

public static void main(String[] args) {
    // TODO Auto-generated method stub

    wmmain m=new mark().new wmmain();
    m.setSize(800,500);
    m.setVisible(true); 

}
class wmmain extends JFrame /* MAIN WINDOW */
{
    Container container;

    public wmmain()
    {
        super("Digital Image WaterMarking");

        addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent e)
            {
                System.out.print("Exit");
                System.exit(0);
            }
        });

        container=this.getContentPane();
        container.setLayout(new BorderLayout());
        container.setBackground(new Color(72, 118, 255));

    }
    }
} 
```

# node.js - 如何使用 WebStorm IDE 调试 Meteor 应用程序？

> ID：14751080
> 
> 赞同：17
> 
> 时间：2013-02-07T12:26:10.620
> 
> 标签：node.js, debugging, meteor, remote-debugging, webstorm

谁能提供有关如何将 Meteor 应用程序连接到 WebStorm 调试器的简短步骤列表？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-05T07:36:33.550

WebStorm 是唯一一个原生支持调试 Meteor 服务器代码的 IDE——查看[这个视频](https://www.youtube.com/watch?v=yeqkGF3Z7rU)。即使在 Windows 上，调试也非常简单：

# 网络风暴 9+

转到 Run --> Debug --> Edit configurations... ，单击加号，单击“Meteor”。如果需要，您可以添加 ROOT_URL 等环境变量。

* * *

# WebStorm 9 岁以上

此答案仅出于历史目的而保留。您应该升级 WebStorm。

在较旧的 WebStorms 上，您过去必须创建 Node.js 调试配置。

*   在服务器上，导出环境变量`NODE_OPTIONS=--debug=47977`。例如，

    ```
    NODE_OPTIONS=--debug=47977 meteor  # Linux/Mac
    set NODE_OPTIONS=--debug=47977 & meteor`  # Windows 
    ```

*   使用上面的端口 (47977) 和服务器主机创建 WebStorm/PhpStorm 运行/调试配置。如果您在本地调试，请保留 127.0.0.1。

![运行 -> 运行/调试配置](../Images/08e3ab7886580c4e6813454d4182d997.png)

*   在 WebStorm 中，运行 -> 调试 <myapp>，或按 Shift+F9。确保您在“调试”面板中看到“已连接到 <您的主机>

现在您可以设置断点，访问局部变量等。

对于客户端调试，只需使用 Chrome 调试器或 Firebug。

## 故障排除

*   `Process disconnected unexpectedly`- 由于缺乏对 Meteor 的特定支持，当流星自动重启时会发生这种情况。只需运行 -> 调试 <myapp>，或再次按 Shift+F9。

*   您无法连接到服务器 - 确保防火墙规则允许传入连接到您为 Node.js 调试器选择的任何端口（此处为 47977）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-25T06:30:35.683

其他答案现在已经过时了。不要像上面描述的那样添加 Node.js 调试配置，或者使用 spyjs。

如果您使用的是 Webstorm 9.0，只需运行 --> 调试 --> 编辑配置...，单击加号，单击“Meteor”。

WebStorm 也可能会要求您安装浏览器插件，但这只是用于客户端调试；只需在服务器端代码中添加一个断点，您就会看到它开箱即用。

JetBrains 更新了上面 Dan Dascalescu 回答[中链接的视频，它向您展示了我刚刚描述的过程。](http://youtu.be/yeqkGF3Z7rU)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-31T12:26:22.837

对于使用 的应用程序`webpack:webpack`，使用 WebStorm 的`Meteor`调试配置文件似乎不起作用。

我的设置使用`webpack:webpack`v1.0.12、Meteor v1.3.0 和 WebStorm 2016.1，但可能适用于更高版本（请注意，针对此问题的修复已在 v1.0.12 中发布，因此早期版本可能不适用于此过程）。

这是我为了让它工作而做的：

1.  在项目根目录创建一个`webpack.json`文件。

    它应该包括`devtool`配置，它生成有助于调试的源映射。其余的可能会根据您的特定设置进行更改。

    ```
    {
      "root": "src",
      "devServer": {
        "host": "localhost"
      },
      "devtool": "source-map"
    } 
    ```

2.  创建调试设置：

    Node.js 远程调试，端口`5858`（端口可配置）。

    [![远程节点调试配置](../Images/f80d312f6ef4b4eff64fb98bed40851d.png)](https://i.stack.imgur.com/HtOzv.png)

3.  跑`meteor debug`

    您可以使用 指定端口`--debug-port <port number>`。

    请参阅`meteor help debug`完整的详细信息。

    [![流星调试第一次运行](../Images/85360709df893add70beddb9a339f0f9.png)](https://i.stack.imgur.com/Vxcp1.png)

4.  将 WebStorm 连接到调试器

    *   启动调试器 [![点击](../Images/3ccb5ae2ff8d9e02e85468859d32612b.png)](https://i.stack.imgur.com/LLWQa.png)
    *   状态消息应表明它已连接。脚本应该在`Scripts`选项卡中可用。 [![调试面板应声明已连接](../Images/d93d2933556791a73759fcff666a3096.png)](https://i.stack.imgur.com/euE9X.png)
    *   服务器应该在控制台中运行 [![服务器应该恢复执行](../Images/a0ff039118aea0901f745a6e26b5c230.png)](https://i.stack.imgur.com/QJ08R.png)
5.  击中你的断点并欢欣鼓舞。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-07T20:01:15.337

WebStorm 9 将支持 Meteor。虽然 WS 9 尚未发布（截至 2014 年 10 月 7 日），但有一个[WS 9 的早期访问计划](http://confluence.jetbrains.com/display/WI/WebStorm+9+EAP)。

阅读 JetBrains WebStorm 博客，该博客[描述了一些 Meteor 支持功能](http://blog.jetbrains.com/webstorm/2014/09/meteor-support-in-webstorm-9/)并包含一个简短的视频。

我是 Meteor、WebStorm（和 JavaScript）的新手，并且已经使用 WS 9 EAP build 138.2406 几个星期了。我可以从 IDE 中启动我的项目、设置断点、遍历代码、检查值、跳转到定义以及发出补全。这很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T01:22:46.450

您可以尝试 Webstorm 的 spyjs 插件：http: [//blog.jetbrains.com/webstorm/2014/04/spy-js-webstorm-secret-service/](http://blog.jetbrains.com/webstorm/2014/04/spy-js-webstorm-secret-service/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-10T12:15:12.910

旧版本的 Webstorm有一个[错误，用于调试 Meteor 1.2.x 的服务器端。](https://youtrack.jetbrains.com/issue/WEB-19334)2015 年 12 月 24 日发布的最新版 Webstorm (11.0.3) 修复了它。发行说明可以在这里找到：[https ://confluence.jetbrains.com/display/WI/WebStorm+143.1559.5+Release+Notes](https://confluence.jetbrains.com/display/WI/WebStorm+143.1559.5+Release+Notes)

我现在可以毫无问题地从 Webstorm 进行调试 :)

# postgresql - Postgresql 错误：错误：通过 pgAdminIII 1.16 连接时，ACL 数组必须是一维的

> ID：14751089
> 
> 赞同：0
> 
> 时间：2013-02-07T12:26:35.103
> 
> 标签：postgresql, pgadmin

我正在尝试使用 pgAdminIII 连接到我的远程 postgresql 数据库。我可以使用 psql 客户端通过命令行连接到数据库服务器。但是当我尝试使用 pgAdminIII 1.16 进行连接时，我收到以下错误：

错误：ACL 数组必须是一维的。

我已经检查了 hba_conf 条目。相同的条目适用于另一个数据库服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:36:06.033

pg_hba 不相关。ACL 数组用于存储数据库对象（数据库、模式、表、序列、视图、函数等）的权限。

所以问题是：

1.  您在其中一个 ACL 中有一些奇怪的数据
2.  pgAdmin 有一个错误

解决方案是：

1.  启用远程数据库中所有查询的日志记录（例如：log_statement = all，或 log_min_duration_statement = 0）
2.  启动 pgadmin3，让它连接，然后出错
3.  检查 Pg 日志 pgadmin 发出的最后一个查询是什么，因为问题可能出在最后一个查询的数据上
4.  使用 psql 连接分析数据，并在 db 中修复数据，或在 pgadmin 中报告错误

# html - 在 Firefox 和其他软件中遇到 ul 问题

> ID：14751091
> 
> 赞同：0
> 
> 时间：2013-02-07T12:26:41.467
> 
> 标签：html, css, cross-browser, html-lists

我似乎无法让我的菜单项可点击......它们在 IE 中工作，但在 Firefox 或 Chrome 中不可用。我也可以让它们在我的 iPad 上的 Chrome 和 Safari 上工作，但当我以横向模式拿着 iPad 时就不行了。很奇怪。

HTML：

```
<div id="options" class="clearfix">
<ul id="filters" class="option-set clearfix" data-option-key="filter">
<li><a href="#filter" data-option-value="*" class="selected">All</a></li>
<li><a href="#filter" data-option-value=".tech">Tech</a></li>
<li><a href="#filter" data-option-value=".social">Social</a></li>
<li><a href="#filter" data-option-value=".health">Health</a></li>  
</ul>
</div> 
```

和CSS：

```
#options ul {
  list-style: none outside none;
  text-align: center;
  margin-bottom: 25px;
  margin-top: 10px;
}
#options li {
  display: inline;
}
#options li a {
    color:#666666;
    font-size: 15px;
    padding: 10px 10px;
    text-decoration: none;
    text-transform: uppercase;
    line-height: 34px;
}
#options li a:hover {
    color:#3B5998;
}
#options li a:active {
    color:#3B5998;
}
#options li a.selected {
    color:#3B5998;
} 
```

任何帮助都会很棒，我不是 HTML 和 CSS 方面的佼佼者，所以我很感激任何见解。

我的网站是 www.pinstart.us

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:32:50.460

你试过把你的

```
<a href...> 
```

你之外的标签

```
<li> 
```

标签而不是里面？我知道有时这对我来说会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:32:22.647

对我来说似乎工作正常，但您可以尝试让您的“a”标签显示：inline-block

```
#options li a {
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:02:22.683

您的“.navbar-fixed-top” div 与“#option”栏重叠！

您可以通过设置来验证这一点：

```
.navbar-fixed-top{
z-index: -5;
} 
```

**编辑：**这不会破坏网站的外观。

```
#options{
position:relative;
z-index: 9999;
} 
```

希望这会为您指明正确的方向！

# excel - 如何从 Excel vba 将日文字符插入 ECC

> ID：14751095
> 
> 赞同：2
> 
> 时间：2013-02-07T12:26:54.857
> 
> 标签：excel, vba

**我可以在Excel**单元格中看到日文文本。我有更新**ECC的****VBA**代码。它在**ECC中****执行 INSERT**，但日文字符仅表示为.******`????`******

 ******任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-28T09:20:23.430

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T01:00:01.390

您需要 MS Excel 日语语言包来显示日语字符。

如果要将文本导入 Excel，则需要设置以下内容。.TextFilePlatform = 850 [http://www.ozgrid.com/forum/showthread.php?t=141269](http://www.ozgrid.com/forum/showthread.php?t=141269)******

# android - Android蓝牙：生成随机UUID后无法连接到监听套接字

> ID：14751099
> 
> 赞同：1
> 
> 时间：2013-02-07T12:27:01.457
> 
> 标签：android, sockets, bluetooth, device, serversocket

我的程序有两个不同的实例不会连接到`BluetoothServerSocket`.

`SCAN_MODE_CONNECTABLE_DISCOVERABLE`其中一个实例在使用相同生成的 UUID 创建`BluetoothServerSocket`用于侦听之前和之前启动扫描模式之前仅随机生成 1 个 UUID 。`BluetoothDevice`另一个实例在尝试与刚刚生成的 UUID 连接之前生成一个随机 UUID 。

每个实例都无法完成蓝牙连接。在整个程序中，我放了很多日志，只是想看看为什么它无法连接。

下面是第一个实例的代码。（在应用程序启动时生成 1 个随机 UUID。）如果有人想下载我的 Eclipse 项目只是为了看看，[这里是来自 MediaFire 的项目链接。](http://www.mediafire.com/?5tmd1qfdjelqu7o)至于第二个实例，在下面的代码中取消注释 C 样式的注释将显示它。

**我预计结果将是在两个设备之间建立成功的连接。成功的连接使用生成的 UUID 将设备连接到侦听套接字。观察结果表明这是不可能的。**

据我所知，获取 UUID 的唯一方法是从`UUID.randomUUID()`. 如果还有其他方法，请在下面发表评论，我会检查它。但就目前而言，这不是我想要的答案。

提前致谢。

```
package o.p;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.UUID;
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadPoolExecutor;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

/**
 * The purpose of this app is to create a server-only Bluetooth connection that
 * only accepts incoming Bluetooth connections. It is used only for testing
 * one device that needs Bluetooth tweaking in order to consistently work
 * correctly on the other device. In short, 2 devices are required.
 * */

public class Main extends Activity implements View.OnClickListener {
    //Button
    private Button acceptButton;
    private Button scanButton;

    //Bluetooth stuffs.
    private BluetoothAdapter btAdapter;
    private BluetoothServerSocket serverSocket;
    private BluetoothSocket socket;
    private BluetoothDevice targetDevice;
    private final UUID uuid = UUID.randomUUID();

    /*private UUID randomUUID;*/

    //Accepting thread.
    private class Accept implements Runnable {
        private BluetoothServerSocket socket;
        private BluetoothSocket result = null;

        public Accept(BluetoothServerSocket s) {
            socket = s;
            result = null;
        }

        @Override
        public void run() {
            try {
                Log.d("DEBUG", "Accepting.");
                result = socket.accept();
                Log.d("DEBUG", "Closing server socket.");
                socket.close();
            }
            catch (IOException e) {
                Log.d("DEBUG - onClick(), case Accept", "Unable to accept incoming connection.");
            }
        }

        public BluetoothSocket getSocket() {
            while (result == null);
            return result;
        }
    }

    //Connecting thread.
    private class Connecting implements Runnable {
        private BluetoothDevice device;

        public Connecting(BluetoothDevice d) {
            device = d;
        }

        @Override
        public void run() {
            try {

                   /*Log.d("DEBUG", "Generating a new random UUID.");
                randomUUID = UUID.randomUUID();*/
                Log.d("DEBUG", "Obtaining a socket.");
                BluetoothSocket s = device.createRfcommSocketToServiceRecord(uuid);
                Log.d("DEBUG", "Cancelling discovery, if it's still discovering.");
                if (btAdapter.isDiscovering())
                    btAdapter.cancelDiscovery();
                Log.d("DEBUG", "Connecting to listening socket with UUID: " + uuid.toString());
                s.connect();

            }
            catch (IOException e) {
                Log.d("DEBUG - Connecting.run()", "Unable to connect to the listening socket.");
            }
        }
    }

    //Thread executor
    private ThreadPoolExecutor executor = (ThreadPoolExecutor) Executors.newCachedThreadPool();

    //BroadcastReceiver for accepting Bluetooth
    private BroadcastReceiver receiver;

    @Override
    public void onCreate(Bundle b) {
        super.onCreate(b);
        setContentView(R.layout.main);
        init();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.button_accept:
                Log.d("DEBUG", "Pressing the Accept button.");
                Accept acceptThread = new Accept(serverSocket);
                Connecting connectThread = new Connecting(targetDevice);
                if (serverSocket != null) {
                    executor.execute(acceptThread);
                    executor.execute(connectThread);
                    socket = acceptThread.getSocket();
                }
                else {
                    Log.d("DEBUG", "Server socket isn't ready.");
                    Toast.makeText(this, "Server socket isn't ready.", Toast.LENGTH_LONG).show();
                }
                break;
            case R.id.button_scan:
                if (btAdapter.getScanMode() != BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
                    Log.d("DEBUG", "Initiating discovery scan mode.");
                    Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                    discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
                    this.startActivity(discoverableIntent);
                    Toast.makeText(this, "Being discovered...", Toast.LENGTH_LONG).show();
                }
                if (btAdapter.isDiscovering()) {
                    Toast.makeText(this, "Re-scanning...", Toast.LENGTH_SHORT).show();
                    Log.d("DEBUG", "Re-scanning.");
                    btAdapter.cancelDiscovery();
                }
                Log.d("DEBUG", "Scanning.");
                Toast.makeText(this, "Scanning...", Toast.LENGTH_LONG).show();
                btAdapter.startDiscovery();
                break;
        }
    }

    private void init() {
        Log.d("DEBUG", "Initializing.");
        Log.d("DEBUG", "Button initializing.");
        acceptButton = (Button) findViewById(R.id.button_accept);
        acceptButton.setOnClickListener(this);
        scanButton = (Button) findViewById(R.id.button_scan);
        scanButton.setOnClickListener(this);
        Log.d("DEBUG", "Registering BroadcastReceiver.");
        receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    Log.d("DEBUG", "Device has been found.");
                    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    Log.d("DEBUG", "Obtained a device from Intent.");
                    if (device.getBondState() == BluetoothDevice.BOND_BONDED) {
                        Log.d("DEBUG", "Removing paired device.");
                        try {
                            Method m = device.getClass().getMethod("removeBond", (Class[]) null);
                            m.invoke(device, (Object[]) null);
                            Log.d("DEBUG", "Removed " + device);
                        }
                        catch (NoSuchMethodException e) {
                            Log.e("ERROR - DeviceReceiver.onReceive()", "", e);
                        }
                        catch (IllegalArgumentException e) {
                            Log.e("ERROR - DeviceReceiver.onReceive()", "", e);
                        }
                        catch (IllegalAccessException e) {
                            Log.e("ERROR - DeviceReceiver.onReceive()", "", e);
                        }
                        catch (InvocationTargetException e) {
                            Log.e("ERROR - DeviceReceiver.onReceive()", "", e);
                        }
                    }
                    else {
                        Log.d("DEBUG", "Obtaining remote device's address.");
                        btAdapter.getRemoteDevice(device.getAddress());
                        try {
                            serverSocket = btAdapter.listenUsingRfcommWithServiceRecord(device.getName(), uuid);
                            Log.d("DEBUG", "Listening to " + device.getName() + "...");
                        }
                        catch (IOException e) {
                            Log.d("DEBUG - onReceive()", "Unable to create a server socket after receiving a broadcast.", e);
                            serverSocket = null;
                            Log.d("DEBUG", "Server socket is set to null.");
                        }
                    }
                    targetDevice = device;
                }
                else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                    Log.d("DEBUG", "Scanning finished.");
                }
            }
        };
        Log.d("DEBUG", "Creating Bluetooth Adapter.");
        btAdapter = BluetoothAdapter.getDefaultAdapter();
        try {
            Log.d("DEBUG", "Creating a server socket for listening using UUID: " + uuid.toString());
            serverSocket = btAdapter.listenUsingRfcommWithServiceRecord("server", uuid);
        }
        catch (IOException e) {
            Log.d("DEBUG - init()", "Error in creating a server socket from uuid.");
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        //TODO: Not done with the receivers.
        IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        registerReceiver(receiver, filter);
        filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(receiver, filter);
    }

    @Override
    public void onPause() {
        //TODO: Complete this one. Same for onResume().
        super.onPause();
        unregisterReceiver(receiver);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:03:16.647

为了能够连接 UUID 应该匹配。在服务器端，您所做的是正确的，即生成随机 UUID 并对其进行侦听，但是客户端需要使用服务器正在侦听的相同 UUID 进行连接。获取它的方法是从您的客户端使用服务器 BluetoothDevice 对象上的 fetchUuidsWithSdp() 并使用获得的 UUID 连接到服务器。

# sql - SQL 自连接查询

> ID：14751102
> 
> 赞同：1
> 
> 时间：2013-02-07T12:27:03.487
> 
> 标签：sql

我有四张桌子：

```
Service (serviceId(PK), serviceTypeId, capacity)
Facilitator (facilitatorId(PK), facilitatorName)
ServiceType (serviceTypeId(PK), serviceType)
ServiceFacilitator (serviceId(PK), facilitatorId(PK)) (join entity) 
```

目前'ServiceType'表中的服务类型是酒店和会议中心

“服务”表中的“容量”列包含仅在与 ServiceType.serviceTypeId 相关时才有意义的数字，即根据服务类型表示床或座位。

我需要编写一个查询，它将返回 3 列，名称为：facilitatorName, Beds, Seat

我几乎可以肯定，在存储过程中创建和丢弃临时表是一个糟糕的解决方案，它可能会对未来的可伸缩性等产生负面影响，并且该解决方案涉及到服务表上的自联接。

到目前为止，我的查询如下所示，但没有返回任何行；我错过了什么？

```
SELECT f.facilitatorName,(SUM(ts1.capacity)) as Beds,(SUM(ts2.capacity)) as Seats

FROM dbo.Facilitator as f,
        dbo.TestService as ts1,
        dbo.TestService as ts2,
        dbo.ServiceFacilitator as sf

WHERE f.facilitatorId = sf.facilitatorId AND
        (sf.serviceId = ts1.serviceId or
        sf.serviceId = ts2.serviceId) and 
        ts1.serviceId = ts2.serviceId and
        ts1.serviceTypeId = '1' and -- type hotel
        ts2.serviceTypeId = '2' -- type conference centre           

GROUP BY f.facilitatorName 
```

将查询一分为二将返回 Beds 和 Seats 的准确结果：

```
SELECT f.facilitatorName,(SUM(ts1.capacity)) as Beds

FROM dbo.Facilitator as f,
        dbo.TestService as ts1,
        dbo.ServiceFacilitator as sf

WHERE f.facilitatorId = sf.facilitatorId AND
        sf.serviceId = ts1.serviceId and 
        ts1.serviceTypeId = '1'         

GROUP BY f.facilitatorName

SELECT f.facilitatorName,(SUM(ts2.capacity)) as Seats

FROM dbo.Facilitator as f,
        dbo.TestService as ts2,
        dbo.ServiceFacilitator as sf

WHERE f.facilitatorId = sf.facilitatorId AND
        sf.serviceId = ts2.serviceId and 
        ts2.serviceTypeId = '2'         

GROUP BY f.facilitatorName 
```

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:35:57.487

您的查询的一个简单解决方案应该是：

```
SELECT f.facilitatorName,
       SUM(case when ts.serviceTypeId = '1' then ts.capacity end) as Beds,
       SUM(case when ts.serviceTypeId = '2' then ts.capacity end) as Seats
FROM dbo.Facilitator as f
LEFT JOIN dbo.ServiceFacilitator as sf ON f.facilitatorId = sf.facilitatorId
LEFT JOIN dbo.TestService as ts ON sf.serviceId = ts.serviceId
GROUP BY f.facilitatorName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:20:17.433

您应该为此查询使用 Join。例如：

```
SELECT f.facilitatorName,(SUM(ts1.capacity)) as Beds,(SUM(ts2.capacity)) as Seats

FROM 
        dbo.ServiceFacilitator as sf 
join dbo.Facilitator as f 
on   sf.facilitatorI = f.facilitatorId
join dbo.TestService as ts1 
on sf.serviceId = ts1.serviceId
join  dbo.TestService as ts1
on sf.serviceId = ts2.serviceId

WHERE 
        ts1.serviceTypeId = '1' and -- type hotel
        ts2.serviceTypeId = '2' -- type conference centre           

GROUP BY f.facilitatorName 
```

# sql - SQL Server 过程/函数将表复制到另一个数据库

> ID：14751103
> 
> 赞同：3
> 
> 时间：2013-02-07T12:27:04.020
> 
> 标签：sql, sql-server, database, copy

我需要将表从一个数据库复制到另一个。我的第一个猜测是使用源代码中的以下语句：

```
SELECT *  
INTO TARGETDB.SCHEMA.TABLENAME  
FROM SCHEMA.TABLENAME 
```

（编辑：我知道它不会设置主键等，没关系）

可悲的是，我必须在我的项目中使用的类几乎破坏了这个声明，我无法解决这个问题。

我的下一个想法是在 SQL Server 数据库中创建一个函数或过程，这样我就可以使用

```
SCHEMA.FUNCTNAME paramTARGETDB, paramTABLENAME 
```

作为我的代码中的声明。

我当前的程序如下所示：

```
CREATE PROCEDURE [SCHEMA].FUNCTNAME
    @pVC_TARGETDB VARCHAR(240),
    @pVC_TABLENAME VARCHAR(240)  
AS
BEGIN
  SELECT *
  INTO @pVC_TARGETDB.SYSADM.@pVC_TABLENAME
  FROM SCHEMA.@pVC_TABLENAME
END 
```

但我对 SQL 的了解并不多，SQL Server Management Studio 告诉我有语法错误。每个都`@pVC_*`被标记（编辑：在前两次出现中，它们没有被标记。仅在 BEGIN 和 END 之间的块中）。我得到的信息是：

> “@pVC_* 附近的语法错误需要 ID、QUOTED_ID 或 '.'。”

我几乎尝试了所有我能想象或用谷歌找到的写作方式，也许很容易解决，也许不是。我做不到，请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:34:50.343

您可以动态创建 SQL 语句然后执行它

```
DECLARE @SQL NVARCHAR(MAX)

SET @SQL =
('SELECT *
INTO ' + @pVC_TARGETDB + '.SYSADM.' + @pVC_TABLENAME +
' FROM
SCHEMA.' + @pVC_TABLENAME)

EXEC (@SQL) 
```

# java - Java 在通过 JNI 调用时抛出 Null 异常，但在从 Java 程序调用时有效

> ID：14751104
> 
> 赞同：1
> 
> 时间：2013-02-07T12:27:05.407
> 
> 标签：java, java-native-interface

我正在使用 JNI 从外部系统的 .jar 库中调用 Java 方法。我的问题是，当我编写使用该库的简单 Java 程序时一切正常，但是当我通过 JNI 执行相同的代码时，该库在从 String 解析整数时抛出 Null 异常。我确信我的 JNI 代码没有问题，因为我有一个更新版本的库，它具有相同的接口，可以通过 JNI 正常工作。但不幸的是，由于与外部系统的兼容性问题，我不得不使用旧版本。

我认为问题出在 jvm.dll 创建 VM 的方式上——我可能遗漏了一些在创建 VM 时应该传递给 jvm.dll 的参数。有谁知道问题可能出在哪里？

我不能发布我的代码，但我可以在示例中解释它： - 库版本 1 包含带有构造函数 Router(int i) 的类路由器 - 我没有此类的代码 - 库版本 2 包含相同的类构造函数 - 当我编写简单程序时

```
import java.lang.reflect.*;

public class Basic
{
    public static void main(String[] args)
    {
        Router = new Router(10); 
    }
} 
```

它适用于两个库。

当我通过 JNI 使用较新的库 2 运行相同的代码时，它也可以工作。但是当我通过 JNI 使用库 1 运行代码时，由于以下内部异常而崩溃

```
 Error message: System.Exception: JAVA Exception: java.lang.NullPointerException
at com.coda.core.types.TypeNumber.parseNumber(TypeNumber.java:403)
at com.coda.core.types.TypeInteger.parse(TypeInteger.java:123)
at com.coda.core.types.TypeInteger.parse(TypeInteger.java:137)
at com.coda.core.Options.setOption(Options.java:138)
at com.coda.core.Options.set(Options.java:85)
at com.coda.core.configuration.ConfigurationLoader.getConfiguration(ConfigurationLoader.java:144)
at com.coda.xml.Configuration.init(Configuration.java:453)
at com.coda.xml.Configuration.init(Configuration.java:370)
at com.coda.xml.router.AppServer.<init>(AppServer.java:250)
at com.coda.xml.router.Router.<init>(Router.java:122) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:53:47.140

我已经解决了这个问题。我在 JVM 的参数上确实犯了错误。较旧的库需要另一个我不知道的 jar 库。因此，我已将库添加到类路径中，并且知道它可以正常工作。真的很愚蠢的例外，没有任何消息让我以错误的方式寻找问题。

谢谢大家的意见

# c# - 如何在 C# 中将数据库设置为自动完成的源

> ID：14751105
> 
> 赞同：0
> 
> 时间：2013-02-07T12:27:08.663
> 
> 标签：c#, winforms, autocomplete, textbox

我有一个文本框。现在我想为此文本框使用自动完成选项，但我想使用自动完成的来源是我的数据库。也就是说，我有一个包含 1000 个单词的数据库。所以每当用户输入文本到文本框中，它建议数据库中的一个词。所以我如何使用数据库作为文本框自动完成的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:36:40.107

您可以使用[AutoCompleteStringCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.autocompletestringcollection%28v=vs.110%29.aspx)并使用数据库中的字符串填充它：

```
var autoCompleteData = new AutoCompleteStringCollection();
autoCompleteData.add("SomeString1"); // Can be strings retrieved from database
autoCompleteData.add("SomeString2"); // Can be strings retrieved from database

textBox.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
textBox.AutoCompleteSource = AutoCompleteSource.CustomSource;
textBox.AutoCompleteCustomSource = autoCompleteData; 
```

# google-chrome - 我的 DNN 网站在我的 PC 上的 Chrome 中运行，但在另一台 PC 中却不行。它在任何其他浏览器中都不起作用

> ID：14751109
> 
> 赞同：0
> 
> 时间：2013-02-07T12:27:16.237
> 
> 标签：google-chrome, dotnetnuke

嗯，真的是这样。我有一个网站[https://www.fagakademiet.no](https://www.fagakademiet.no)，使用 DotNetNuke 开发，我们最近升级到了 V7。在我使用 Chrome 的 PC 上一切正常，但有些人抱怨它在他们使用 Chrome 的 PC 中不起作用。当他们登录时，管理工具栏不起作用。它也不适用于 IE、Opera、Firefox 等。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:15:38.670

通常，此类问题与资源（JS、CSS 等）的浏览器缓存有关

您可能会看到硬刷新是否适用于用户。

您还可以检查主机设置以查看是否启用了客户端依赖框架和资源缩减。如果您这样做，请尝试禁用它，看看是否有帮助。

# java - 使用 Google API 中的 com.google.api.client.http.HttpRequest 对象发送 POST 请求

> ID：14751115
> 
> 赞同：16
> 
> 时间：2013-02-07T12:27:32.367
> 
> 标签：java, post, google-fusion-tables, google-api-java-client, google-oauth

我必须发送具有以下结构的 POST 请求。

```
 POST https://www.googleapis.com/fusiontables/v1/tables
    Authorization: /* auth token here */
    Content-Type: application/json

    {
     "name": "Insects",
     "columns": [
     {
        "name": "Species",
        "type": "STRING"
     },
     {
         "name": "Elevation",
         "type": "NUMBER"
     },
    {
         "name": "Year",
         "type": "DATETIME"
    }
      ],
   "description": "Insect Tracking Information.",
   "isExportable": true
    } 
```

我正在使用以下代码发送 POST 请求，但我收到“400 Bad Request”的响应

```
String PostUrl = "https://www.googleapis.com/fusiontables/v1/tables";
HttpRequestFactory requestFactory = HTTP_TRANSPORT.createRequestFactory(credential);

//generate the REST based URL
GenericUrl url = new GenericUrl(PostUrl.replaceAll(" ", "%20"));
//make POST request

String requestBody = "{'name': 'newIndia','columns': [{'name': 'Species','type': 'STRING'}],'description': 'Insect Tracking Information.','isExportable': true}";

HttpRequest request = requestFactory.buildPostRequest(url, ByteArrayContent.fromString(null, requestBody));
request.getHeaders().setContentType("application/json");
// Google servers will fail to process a POST/PUT/PATCH unless the Content-Length
// header >= 1
//request.setAllowEmptyContent(false);
System.out.println("HttpRequest request" + request);
HttpResponse response = request.execute(); 
```

我想知道是否有任何从事过类似任务的人可以帮助我根据本问题开头提到的 POST 请求格式发送 POST 请求。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T07:38:18.020

我已使用以下代码发送 POST 请求

```
String requestBody = "{'name': 'newIndia','columns': [{'name': 'Species','type': 'STRING'}],'description': 'Insect Tracking Information.','isExportable': true}";
HttpRequest request = requestFactory.buildPostRequest(url, ByteArrayContent.fromString("application/json", requestBody));
request.getHeaders().setContentType("application/json"); 
```

# python - Python：RegEx 重复子组查找

> ID：14751121
> 
> 赞同：0
> 
> 时间：2013-02-07T12:27:45.770
> 
> 标签：python, regex, string, regex-lookarounds, regex-group

我有一个`Tue 6:30 AM - 12:00 PM, 3:00 PM- 7:00 PM`我想得到的字符串

```
["Tue", ["6:30 AM - 12:00 PM", "3:00 PM- 7:00 PM"]] 
```

我试过，

```
(
((?:mon|tue|wed|thu|fri|sat|sun|mo|tu|we|th|fr|sa|su|m|w|f|thurs))  #weekday
\s
( ( (?:\d{1,2}(?:[:]\d{1,2})?)\s*(?:[ap][.]?m.?)  \s*[-|to]+\s*   (?:\d{1,2}(?:[:]\d{1,2})?)\s*(?:[ap][.]?m.?) # hour:min period
    ) ,?\s?
)+
) 
```

但这总是只给出第一个持续时间， `["Tue", ["3:00 PM- 7:00 PM", "3:00 PM- 7:00 PM"]]` 我可以尝试在程序中用逗号分隔持续时间，但我不希望这样做，因为有一种方法可以`RegEx`自行完成，但我的表达中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:40:08.913

当您重复一个捕获组时，每个新的重复都将覆盖前一个。这通常是正则表达式中的正常行为。只有 .NET 允许访问重复捕获组的每个实例（“捕获”）。

如果您事先知道可能重复的最大次数是多少，那么您可以根据需要简单地“手动”重复该组。

如果您不知道，请使用两个正则表达式：让第一个匹配从第一个到最后一个时间范围，并让第二个（应用于第一个匹配使用`finditer()`）重复匹配一个范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:29:02.213

您可以将工作日组设为可选，而不是在正则表达式中重复，重复使用`findall`并在循环中构造结果：

```
import re

regex = re.compile(r'''
    (?:(mon|tue|wed|thu|fri|sat|sun|mo|tu|we|th|fr|sa|su|m|w|f|thurs)\s*)?  #weekday
    ( (?:\d{1,2}(?:[:]\d{1,2})?)\s*(?:[ap][.]?m.?)  \s*[-|to]+\s*   (?:\d{1,2}(?:[:]\d{1,2})?)\s*(?:[ap][.]?m[.]?) # hour:min period
    )''', 
    re.VERBOSE | re.IGNORECASE)

matches = regex.findall("Tue 6:30 AM - 12:00 PM, 3:00 PM- 7:00 PM")
#[('Tue', '6:30 AM - 12:00 PM'), ('', '3:00 PM- 7:00 PM')]

res = []
for day, dur in matches:
    if day:
        res += [day, [dur]]
    else:
        res[-1].append(dur)

print res
#['Tue', ['6:30 AM - 12:00 PM', '3:00 PM- 7:00 PM']] 
```

# jquery - 在文档就绪事件中获取 ajax 内容

> ID：14751124
> 
> 赞同：0
> 
> 时间：2013-02-07T12:27:56.370
> 
> 标签：jquery, ajax

在这个例子[http://jsbin.com/avewul/2/](http://jsbin.com/avewul/2/)我使用 rcarousel jQuery 插件来滑动元素

这个想法是通过悬停的幻灯片元素的 id 属性值来更改下面黑色标题的内容。这只是第一个工作。

如果您删除 $(document).ready 事件，一切都会好起来的。但我需要它在 $(document).ready 事件中

javascript:

```
$(document).ready(function($) {
    var J_text = $(".change").text();

    $(".slide").hover(function(){
        var J_id = $(this).attr("id");
        $(".change").text(J_id);
    }, function(){
        $(".change").text(J_text);
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:58:25.270

使用它应该有效：

```
$(document).ready(function($) {
    var J_text = $(".change").text();

    $("body").on('mouseenter', '.slide', function(){
      var J_id = $(this).attr("id");
      $(".change").text(J_id);
    }).on('mouseleave', '.slide', function(){
      $(".change").text(J_text);
    });
}); 
```

它将幻灯片的 mouseenter 和 mouseleave 事件委托给 body 元素。这样，事件也会为动态添加的元素执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:47:49.963

轮播插件似乎动态创建和删除幻灯片元素。但是新创建的元素没有绑定悬停侦听器。

[`pageLoaded`](http://ryrych.github.com/rcarousel/#options)您可以使用 rcarousel 的回调重新绑定事件：

```
function pageLoaded(event, data) {
    var target = $('.change');
    var text = target.text();

    $(this).hover(
        function() {
            target.text($(this).attr('id'));
        },
        function() {
            target.text(text);
        }
    );

    … 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:50:27.600

尝试，

```
$(".slide").on("hover", function() {
        var J_id = $(this).attr("id");
        $(".change").text(J_id);
    }, function(){
        $(".change").text(J_text);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:58:20.620

每次幻灯片移动时，您可能应该在选项 ( [http://ryrych.github.com/rcarousel/#options](http://ryrych.github.com/rcarousel/#options) )中使用回调函数来绑定悬停事件。`pageLoaded`似乎 rcarousel 取消了每张新幻灯片上的所有事件的绑定。

这是一个可行的解决方案：http: [//jsbin.com/upomaf/1](http://jsbin.com/upomaf/1)

您正在使用来自 rcarousel 的示例文件（`<sript>`HTML 部分底部的最后一个文件）。如果你接受它，你可以在`pageLoaded`函数中添加以下内容：

```
$(this).hover(
    function() {
        $(".change").text($(".wrapper > div").attr("id"));
    },
    function() {
         $(".change").text(J_text);
    }
); 
```

# zend-framework2 - 使用 Composer 下载 Zend Framework 2 时出现 404 错误

> ID：14751128
> 
> 赞同：5
> 
> 时间：2013-02-07T12:28:06.817
> 
> 标签：zend-framework2

我正在阅读 Zend Framework 2 教程并卡在[第 2 页](http://framework.zend.com/manual/2.1/en/user-guide/skeleton-application.html)

我发出了以下命令

```
php composer.phar create-project \
--repository-url="http://packages.zendframework.com" \
zendframework/skeleton-application /home/user/zf2-tutorial 
```

并提供了我的 GitHub 凭据。几秒钟后，我收到以下错误：

> 正在下载：连接...
> 
> [Composer\Downloader\TransportException]无法下载
> “ [https://api.github.com/repos/zendframework/ZendSkeletonApplication/zipball/zf/release-2.1.0 ”文件（HTTP/1.1 404 Not Found）](https://api.github.com/repos/zendframework/ZendSkeletonApplication/zipball/zf/release-2.1.0)

有谁知道正确的 URL 是什么以及如何强制作曲家使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:53:43.157

我不是专家（第一次为我安装 ZF2，但我认为这是 packages.zendframework.com 上的一个错误），但我遇到了同样的问题。我使用以下命令使其工作（我安装了 git，并且我使用的操作系统是 Debian 6）。

```
git clone git://github.com/zendframework/ZendSkeletonApplication.git --recursive
$ curl -s https://getcomposer.org/installer | php
cd ZendSkeletonApplication/
php composer.phar self-update
php composer.phar install 
```

请参阅： http: [//getcomposer.org/doc/00-intro.md#locally](http://getcomposer.org/doc/00-intro.md#locally) [https://github.com/zendframework/ZendSkeletonApplication#using-composer-recommended](https://github.com/zendframework/ZendSkeletonApplication#using-composer-recommended)

# xml - 如何创建 MPEG-DASH 的 MPD 文件来播放 webm 视频？

> ID：14751134
> 
> 赞同：6
> 
> 时间：2013-02-07T12:28:35.820
> 
> 标签：xml, html5-video, mpeg, webm, mpeg-dash

我正在关注这个使用 mediaSource API 和**MPEG DASH**标准播放 .webm 视频的[演示。](http://downloads.webmproject.org/adaptive-demo/adaptive/dash-player.html)这是使用的 MPD 文件：

 **```
<?xml version="1.0" encoding="UTF-8"?>
<MPD
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:mpeg:DASH:schema:MPD:2011"
  xsi:schemaLocation="urn:mpeg:DASH:schema:MPD:2011"
  type="static"
  mediaPresentationDuration="PT888.05S"
  minBufferTime="PT1S"
  profiles="urn:webm:dash:profile:webm-on-demand:2012">
  <Period id="0" start="PT0S" duration="PT888.05S" >
  <AdaptationSet id="0" mimeType="video/webm" codecs="vp8" lang="eng" width="720"      height="306" subsegmentAlignment="true" subsegmentStartsWithSAP="1" bitstreamSwitching="true">
  <Representation id="1" bandwidth="534144">
    <BaseURL>mevq_logo_720x306_0250k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="29052226-29054708">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
  <Representation id="2" bandwidth="1078766">
    <BaseURL>mevq_logo_720x306_0500k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="56003676-56006200">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
  <Representation id="3" bandwidth="1745140">
    <BaseURL>mevq_logo_720x306_0750k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="83686040-83688577">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
  <Representation id="4" bandwidth="2295403">
    <BaseURL>mevq_logo_720x306_1000k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="111588024-111590567">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
  <Representation id="5" bandwidth="3797938">
    <BaseURL>mevq_logo_720x306_1500k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="166960740-166963291">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
  <Representation id="6" bandwidth="6418657">
    <BaseURL>mevq_logo_720x306_2000k_int-150-150.webm</BaseURL>
    <SegmentBase indexRange="222165200-222167753">
      <Initialization range="0-229" />
    </SegmentBase>
  </Representation>
</AdaptationSet>
<AdaptationSet id="1" mimeType="audio/webm" codecs="vorbis" lang="eng" audioSamplingRate="41000" subsegmentStartsWithSAP="1">
  <Representation id="7" bandwidth="115479">
    <BaseURL>evq_vorbis_128kbps_cues-5sec_tracks-2.webm</BaseURL>
    <SegmentBase indexRange="11944509-11947524">
      <Initialization range="0-4501" />
    </SegmentBase>
  </Representation>
</AdaptationSet> 
```

**有人知道如何获取/计算任何视频的数字“SegmentBase indexRange”和“初始化范围”吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-27T08:54:50.680

indexRange 包含段索引框 (sidx)。它基本上是元数据片段，其中包含有关播放器在下载文件时应请求的片段的信息。这是规范的引用：

> “indexRange 指定包含表示的所有媒体段中的段索引的字节范围。字节范围应表示并格式化为 RFC 2616 第 14.35.1 条中定义的字节范围规范。它仅限于识别连续字节范围的单个表达式。”

sidx 框在此处进行了描述， 并且可以在此处和此处找到解析器[（](http://arashafiei.wordpress.com/2012/11/13/quick-dash/)来自[dash.js](https://patches.videolan.org/patch/103/)[项目）](https://github.com/Dash-Industry-Forum/dash.js/blob/master/app/js/dash/BaseURLExtensions.js)

初始化 - 根据规范：

> “指定 URL，包括初始化段的可能字节范围。”

希望它有所帮助！**

# php - PHP如何计算单词然后添加“更多”？

> ID：14751136
> 
> 赞同：0
> 
> 时间：2013-02-07T12:28:39.067
> 
> 标签：php

我有这个：

```
<? if (strlen($item->introtext) > 300) { 
    echo substr($item->introtext, 0,300)." More"; 
    } else { 
    echo $item->introtext;}
?> 
```

但它计算符号，我希望它计算**单词**。例如，在第 10 个单词之后添加“更多”。

怎么做，我想我必须用其他东西改变“strlen”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:35:56.307

使用功能**[`str_word_count()`](http://php.net/manual/en/function.str-word-count.php)**。这将根据第二个参数给出计数以及单词数组。欲了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:34:26.260

您可以用空格分隔，并计算您有多少单词：

```
$words = preg_split("/\s+/", $string, null, PREG_SPLIT_NO_EMPTY); 
```

### 笔记：

*   我`preg_split`用来克服连续空格问题。
*   `PREG_SPLIT_NO_EMPTY`不包括空话。

`$words`现在包含所有单词的数组，你可以[`count()`](http://php.net/count)知道你有多少单词，[`array_slice()`](http://php.net/array_slice)并[`implode()`](http://php.net/implode)从中获取一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:31:43.663

您可以在空格上爆炸字符串。这应该给你一个包含每个单词条目的数组。然后数组的计数会告诉您单词的数量。这种技术可能会出现一些误报，因为被 [空格] 包围的所有内容都将被视为一个单词。

# python - http回显服务器和客户端扭曲

> ID：14751138
> 
> 赞同：0
> 
> 时间：2013-02-07T12:28:45.037
> 
> 标签：python, twisted, twisted.web

我正在尝试构建一个基本的 echo http 服务器和带有 twisted 的 http clint，这是我的示例，这不是我所写的，我只是想了解这两个实现的握手。

这是我的client.py

```
from StringIO import StringIO

from twisted.internet import reactor
from twisted.web.client import Agent
from twisted.web.http_headers import Headers

from twisted.web.client import FileBodyProducer

agent = Agent(reactor)
body = FileBodyProducer(StringIO("hello, world"))
d = agent.request(
    'GET',
    'http://example.com/',
    Headers({'User-Agent': ['Twisted Web Client Example'],
         'Content-Type': ['text/x-greeting']}),
    body)

def cbResponse(ignored):
   print 'Response received'
d.addCallback(cbResponse)

def cbShutdown(ignored):
    reactor.stop()
d.addBoth(cbShutdown)

reactor.run() 
```

这是我的 server.py

```
from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        print request

site = server.Site(Simple())
reactor.listenTCP(8080, site) 
reactor.run() 
```

我想在服务器控制台上打印。客户端正文中的消息`hello world`。应该在服务器端添加什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:31:47.663

`Request.content`：

```
def render_GET(self, request):
    print request.content.read() 
```

请参阅[http://twistedmatrix.com/documents/current/api/twisted.web.iweb.IRequest.html#content](http://twistedmatrix.com/documents/current/api/twisted.web.iweb.IRequest.html#content)

# javascript - 在 Ajax 调用之后的函数内部的 document.ready()

> ID：14751139
> 
> 赞同：0
> 
> 时间：2013-02-07T12:28:50.160
> 
> 标签：javascript, jquery, javascript-events

我有一个使用 ajax 调用来加载内容的应用程序。那些 ajax 调用只检索 HTML。Javascript 在另一个文件中。

完成 AJAX 调用后，我将调用一个应该尽快开始执行 javascript 的函数。

在这里，我留下一个小函数，它将从 ajax 调用中检索一些代码。

```
function loadPage(page) {
    $(".container").html("");
    if(page == "page1") {
        $.ajax({
            url: "/page1.php",
            success: function(html){
                $(".container").html(html);
                loadPage1Script();
            } 
        });
    }else if(page == "page2"){
        $.ajax({
            url: "/page2.php",
            success: function(html){
                $(".container").html(html);
                loadPage2Script();
            } 
        });
    }
} 
```

之后，他们将执行 loadPage1Script() 或 loadPage2Script()。

```
function loadPage1Script(){
    //Start the carousel plugin, for example
} 
```

新代码已添加到 HTML 结构中。我应该打电话给 $(document).ready(); 在执行代码之前在 loadPage1Script() 中附加所有事件处理程序？如果我不这样做有什么不同吗？如果我添加 $(document).ready(); 脚本会更快启动吗？?

```
function loadPage1Script(){
    $(document).ready(function(){
        //Start the carousel plugin, for example
    });
} 
```

取自 jquery 站点（[http://api.jquery.com/ready/](http://api.jquery.com/ready/)）：

"*在大多数情况下，脚本可以在 DOM 层次结构完全构建后立即运行。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有内容的最佳位置其他事件处理程序并运行其他 jQuery 代码。* "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:32:39.773

不需要`$(document).ready()`在这些函数内部使用，因为在它们运行时，它们需要的 DOM 元素已经存在（您只是在调用函数之前将它们插入到页面中）。

但是，您应该调用`loadPage`内部的原始函数`$(document).ready()`以确保`.container`元素存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:32:21.320

如果您在`loadpage`aleady 调用后调用该函数

```
$( document ).ready( function () {
    ...
}); 
```

那么应该没关系。此外，由于该`$.fn.html`函数不是异步的，因此您可以`loadPageScript`立即运行函数

# android - 在 Android 2.2 中获取应用程序安装时间？

> ID：14751140
> 
> 赞同：0
> 
> 时间：2013-02-07T12:28:50.260
> 
> 标签：android, package-managers, android-package-managers

我正在尝试`install time`使用 OS 2.2 在我的 Android 手机中安装所有应用程序，但我没有得到它们的安装时间，而是得到今天的日期和时间。我知道我可以彻底搞定：

`packageManager.getPackageInfo(packageName, 0).firstInstallTime;`

但这可用于`API level 9`以后，我需要`firstInstallTime`进入`API level 8`。

搜索向我展示了另一种实现它的方法，但它给出了今天的日期，而不是应用程序的安装日期。

```
PackageManager pm = context.getPackageManager();
ApplicationInfo appInfo = pm.getApplicationInfo("app.package.name", 0);
String app = appInfo.sourceDir;
long installedTime = new File(app).lastModified(); 
```

知道如何获得我想要的结果吗？请更新。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T13:15:44.200

试试这个块。这解决了你的问题

```
PackageManager pm = getApplicationContext().getPackageManager();
         try {
            PackageInfo info = pm.getPackageInfo("com.google.android.googlequicksearchbox", 0);
             Field field = PackageInfo.class.getField("firstInstallTime");
             long timestamp = field.getLong(info);
             Date date = new Date(timestamp);
             Log.e("DATE", date + "");
        } catch (NameNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (SecurityException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalArgumentException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (NoSuchFieldException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

# javascript - 获取所选文本与主 div 的范围（包含所有文本）

> ID：14751144
> 
> 赞同：3
> 
> 时间：2013-02-07T12:29:02.560
> 
> 标签：javascript, iphone, html, ios, uiwebview

我的要求是获取用户选择的文本相对于主 div 的开始和结束字符索引，比如说“内容”div。请参阅下面的示例代码。但是当我在网络视图中选择“丰富”一词时。它的开始和结束字符索引分别对应于“span”标签的位置，即1和5。而它应该是 12 和 16 wrt “内容” div。

```
<html>
<body>
    <div id="content" contenteditable="true" style="font-family: Times New Roman; color: #fff; font-size: 18;">
          This is <span style="background-color: yellow;">out</span> Rich Text Editing View
    </div>
</body> 
```

目前使用的 JavaScript 函数 m 是

```
function getHighlightedString()
{
    var text = document.getSelection();
    startIndex = text.anchorOffset;
    endIndex = text.focusOffset;
    selectedText = text.anchorNode.textContent.substr(startIndex, endIndex - text.anchorOffset);
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T12:38:12.683

这是改编自此的[答案](https://stackoverflow.com/a/4812022/96100)。该答案中的相同警告也适用。

演示：http: [//jsfiddle.net/62Bcf/1/](http://jsfiddle.net/62Bcf/1/)

代码：

```
function getSelectionCharacterOffsetsWithin(element) {
    var startOffset = 0, endOffset = 0;
    if (typeof window.getSelection != "undefined") {
        var range = window.getSelection().getRangeAt(0);
        var preCaretRange = range.cloneRange();
        preCaretRange.selectNodeContents(element);
        preCaretRange.setEnd(range.startContainer, range.startOffset);
        startOffset = preCaretRange.toString().length;
        endOffset = startOffset + range.toString().length;
    } else if (typeof document.selection != "undefined" &&
               document.selection.type != "Control") {
        var textRange = document.selection.createRange();
        var preCaretTextRange = document.body.createTextRange();
        preCaretTextRange.moveToElementText(element);
        preCaretTextRange.setEndPoint("EndToStart", textRange);
        startOffset = preCaretTextRange.text.length;
        endOffset = startOffset + textRange.text.length;
    }
    return { start: startOffset, end: endOffset };
} 
```

# java - 从控制台运行jar时如何获取文件掩码而不是文件数组？

> ID：14751152
> 
> 赞同：0
> 
> 时间：2013-02-07T12:29:27.407
> 
> 标签：java

我遇到了奇怪的事情：当我用“java -jar my.jar acc*”运行jar文件时，其中“acc*”是文件掩码，在我的main（）的字符串数组中，我得到所有以“开头的文件名acc”，但不是面具本身。为什么？我怎样才能得到我的文件掩码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:30:32.273

尝试运行：

```
java -jar my.jar "acc*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:50:39.317

否则你也可以试试：

```
java -jar my.jar acc\* 
```

这也应该可以正常工作。

# c# - 具有多个参数的 C# 类设计

> ID：14751153
> 
> 赞同：0
> 
> 时间：2013-02-07T12:29:28.390
> 
> 标签：c#, class, methods

我有一个存储库类，我想将两种方法添加到：

```
public IEnumerable<OpenCall> OpenCalls()
{
    return something;
}

public IEnumerable<OpenCall> OpenCalls(DateTime start, DateTime endd)
{
    return something_slightly_different;
} 
```

在每个方法中，我将调用另一个返回平均分辨率列表的方法 (AverageResolutions())。显然这个方法也需要带0个参数或者2个参数。我现在做事的方式要么以两个几乎相同的 OpenCalls() 副本结束，要么以两个几乎相同的 AverageResolutions() 副本结束，稍微改变以允许 DateTime 参数。

我想我做错了——我怎么能最终得到一个方法的一个版本，它要么接受 0 个参数，要么接受 2 个参数，然后决定如果它们是 null 或不为 null，则进一步调用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:32:26.713

您可以更改方法签名以使用可选参数：

```
public IEnumerable<OpenCall> OpenCalls(DateTime? start=null, DateTime? end=null)
{
    if (start.HasValue && end.HasValue)
    {
        return something_slightly_different;
    }
    return something;
} 
```

请注意，您需要使`DateTime`-parameters 可以为空，否则您将无法设置默认值（必须是编译时常量）。

有关可空类型和语法糖的更多信息（写作`DateTime?`而不是`Nullable<DateTime>`参阅[关于可空类型的 MSDN 文章](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)

有关可选参数的详细信息，请参阅[MSDN 文章中有关命名参数和可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)的可选参数部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:33:34.923

```
public IEnumerable<OpenCall> OpenCalls()
{
    return OpenCalls(null, null);
}

public IEnumerable<OpenCall> OpenCalls(DateTime? start, DateTime? endd)
{
    //if (!start.HasValue) ... etc.
    return something_slightly_different;
} 
```

如果这个解决方案“聪明”真的取决于你的其他代码。有几十个空检查并不好。如果您只需要检查一次或两次，这可能是一个很好的解决方案。此外，您可以使用可选参数。

# c# - 如何在自定义 WPF C# 项目中的 AvalonEdit 控件中加载大文本文件

> ID：14751159
> 
> 赞同：1
> 
> 时间：2013-02-07T12:29:59.680
> 
> 标签：c#, wpf, avalonedit

我们正在开发一个 .Net 4.0 C# WPF Line-of-business 应用程序，需要向用户显示（只读）大文本文件。`TextBlock`如 SO 中所述，这不是一个选项，并尝试了建议的 AvalonEdit 控件。运行 AvalonEdit.Sample 独立应用程序可以在不到一秒的时间内加载一个 8k 行的 4MB 文件，但是将 AvalonEdit 嵌入`TextEditor`到我们的 WPF 应用程序中需要花费 20 秒，与之前的`TextBlock`.

UI 相当复杂，带有用于树形菜单和表单的拆分器。该表单有几个拆分器来创建可调整大小的区域，其中一个包含一个选项卡控件。其中一个选项卡项具有`TextEditor`来自 AvalonEdit。

XAML

```
<avalonEdit:TextEditor Name="Tbx" HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" /> 
```

CS

```
public void ShowFile(string path)
{
  Tbx.Text = string.Empty;
  ThreadPool.QueueUserWorkItem(o => {
      var lines = File.ReadAllLines(path).Join("\n");
      Dispatcher.BeginInvoke(() => Tbx.Text = lineas);
  });
} 
```

加载文件时，我的笔记本电脑 i7 4 核 CPU 使用率为 33%。

`TextEditor`关于 AvalonEdit作为独立应用程序和自定义 WPF 应用程序中的不同行为的任何建议？

如何加载大文件（10MB，10k 行）`TextEditor`？

**更新：**

视觉树：

![视觉树](../Images/5562cdf07d13bb6309d28ec2c6dd1c60.png)

的属性`TextEditor`：

![文本编辑器属性](../Images/ee0edabe7edd8f882967c07ccbdb5110.png)

我删除了承载`TextEditor`所指出的 ScrollViewer，但实现了同样糟糕的性能。

**更新 2：** 我将其`TextEditor`移至新窗口以减少布局，但性能仍然很差。

新的、简化的可视化树：

![视觉树 2](../Images/e30afe7a7e4bee145685f588d3b70865.png)

`Grid`列和行定义是`*`.

的属性`TextEditor`：

![文本编辑器属性](../Images/49fb157cd48f1a1e233529e4a6f01d92.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:18:13.273

查看应用程序的可视化树（[Snoop](http://snoopwpf.codeplex.com/)可能会有所帮助）并查看 TextEditor 控件周围是否有任何 ScrollViewer。

滚动查看器为包含的控件提供无限空间，这将禁用任何 UI 虚拟化并破坏性能（编辑器需要呈现整个文档，而不仅仅是可见部分）。

如果您出于某种原因需要嵌套滚动查看器，请查看我对[嵌套滚动区域](https://stackoverflow.com/questions/198656/nested-scroll-areas/1571972#1571972)问题的回答，了解如何避免为包含的控件提供无限空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T09:16:21.713

我发现虚拟化不是水平执行的。在我的情况下，我有一个没有换行符的大型 XML 文件，所以水平滚动需要 10 秒以上才能呈现。一旦相同的文本被格式化（使用换行符），它就会呈现亚秒级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:32:26.080

TextDocument 类有一个名为 SetOwnerThread() 的函数，从文档中，您似乎可以临时设置不同的线程来加载和渲染文档。

以下来自 TextDocument.cs 的评论

```
 /// <summary>
    /// Transfers ownership of the document to another thread. This method can be used to load
    /// a file into a TextDocument on a background thread and then transfer ownership to the UI thread
    /// for displaying the document.
    /// </summary>
    /// <remarks>
    /// The owner can be set to null, which means that no thread can access the document. But, if the document
    /// has no owner thread, any thread may take ownership by calling SetOwnerThread.
    /// </remarks> 
```

# junit - junit4 输出解释

> ID：14751162
> 
> 赞同：0
> 
> 时间：2013-02-07T12:30:02.553
> 
> 标签：junit, junit4, junit3

我运行 JUnit 的控制台输出`cmd.exe`如下所示：

```
JUnit version 4.10
.....I
Time: 0,469

OK (5 tests) 
```

`I`第二行是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:57:45.203

这意味着测试已被[@Ignored](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Ignore.java)。

# python - 在 DataFrame 上使用 MultiIndex

> ID：14751165
> 
> 赞同：0
> 
> 时间：2013-02-07T12:30:10.957
> 
> 标签：python, pandas

这是此问题答案的后续问题：

[pandas 性能问题 - 需要帮助优化](https://stackoverflow.com/questions/14737566/pandas-performance-issue-need-help-to-optimize/14750813#14750813)

以下建议有效：

```
df = DataFrame(np.arange(20).reshape(5,4))
df2 = df.set_index(keys=[0,1,2])
df2.ix[(4,5,6)] 
```

使用 MultiIndex

所以我创建了一个文件 sample_data.csv，如下所示：

```
col1,col2,year,amount 
111111,3.5,2012,700 
111112,3.5,2011,600 
222221,4.0,2012,222 
... 
```

然后我运行了以下命令：

```
import numpy as np 
import pandas as pd 
sd=pd.read_csv('sample_data.csv') 
sd2=sd.set_index(keys=['col2','year']) 
sd2.ix[(4.0,2012)] 
```

但这会产生以下错误：IndexError: index out of bounds

任何想法为什么它在前一种情况下有效，但在后一种情况下无效？这是错误的样子：

* * *

```
IndexError                                Traceback (most recent call last)
<ipython-input-19-1d72a961db95> in <module>()
----> 1 sd2.ix[(4.0,2012)]

/Library/Python/2.7/site-packages/pandas-0.8.1-py2.7-macosx-10.7-intel.egg/pandas/core/indexing.pyc in __getitem__(self, key)
     31                 pass
     32 
---> 33             return self._getitem_tuple(key)
     34         else:
     35             return self._getitem_axis(key, axis=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:06:34.257

为了证明它对我有用（熊猫 0.10.1）：

```
In [1]: from StringIO import StringIO
In [2]: import numpy as np 
In [3]: import pandas as pd 
In [4]: s = StringIO("""col1,col2,year,amount 
   ...: 111111,3.5,2012,700 
   ...: 111112,3.5,2011,600 
   ...: 222221,4.0,2012,222""")

In [5]: sd=pd.read_csv(s) 
In [6]: sd2=sd.set_index(keys=['col2','year']) 
In [7]: sd2.ix[(4.0,2012)] 
Out[7]: 
col1       222221
amount        222
Name: (4.0, 2012) 
```

但是，如果我添加一个具有**重复索引**的行，我也会得到同样的错误：

```
In [8]: s = StringIO("""col1,col2,year,amount 
   ...: 111111,3.5,2012,700 
   ...: 111112,3.5,2011,600 
   ...: 222221,4.0,2012,222
   ...: 222221,4.0,2012,223""")

In [9]: sd=pd.read_csv(s) 
In [10]: sd2=sd.set_index(keys=['col2','year']) 
In [11]: sd2.ix[(4.0,2012)] 
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-7-1b787a1d99df> in <module>()
----> 1 sd2.ix[(4.0,2012)]

C:\Python27\lib\site-packages\pandas\core\indexing.pyc in __getitem__(self, key)
     32                 pass
     33 
---> 34             return self._getitem_tuple(key)
     35         else:
     36             return self._getitem_axis(key, axis=0)

...

IndexError: index out of bounds 
```

**您是否可能在（'col1'，'year'）中有重复的值？**

我不知道这是一个错误还是只是对 MultiIndex 的一个约束（但在这种情况下，我认为错误消息可能更清楚）。但是您可以在设置索引之前删除重复值，如下所示：

```
In [21]: sd=pd.read_csv(s) 

In [22]: sd = sd.drop_duplicates(['col2', 'year'])

In [23]: sd2=sd.set_index(keys=['col2','year']) 

In [24]: sd2.ix[(4.0,2012)] 
Out[24]: 
col1       222221
amount        222
Name: (4.0, 2012) 
```

有关这方面的更多信息，请参阅： http: [//pandas.pydata.org/pandas-docs/stable/indexing.html#duplicate-data](http://pandas.pydata.org/pandas-docs/stable/indexing.html#duplicate-data)和[http://pandas.pydata.org/pandas-docs/dev/generated/ pandas.DataFrame.drop_duplicates.html](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.drop_duplicates.html)。

# xml - 在 JAXB 中看不到节点

> ID：14751166
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:30:11.693
> 
> 标签：xml, jaxb, unmarshalling

我想知道是否有人可以帮忙，我有以下 xml 文件，问题是我看不到第三个节点“食物”。我使用 JAXB 创建了文件，其中创建了四个文件 ObjectFactory、Breakfast-menu、foodType 和 food。我可以从早餐菜单进入 foodType 并看到名称（新鲜和冷冻），但不是“食物”，它是内容。可以请给一些想法。谢谢

```
<Breakfast-menu>
    <foodType>
        <name>fresh</name>
        <food name="Milk">
            <price>2</price>
        </food>
        <food name="Pears">
            <price>3</price>
        </food>
        <food name="Apples">
            <price>1</price>
        </food>
    </foodType>
    <foodType>
        <name>frozen</name>
        <food name="Fish">
            <price>2</price>
        </food>
        <food name="chips">
            <price>1</price>
        </food>
    </foodType>
</Breakfast-menu> 
```

爪哇

```
JAXBContext jaxbContext = JAXBContext.newInstance("food");
              Unmarshaller u = jaxbContext.createUnmarshaller();

              BreakfastMenu bM = (BreakfastMenu) u.unmarshal( 
                      new FileInputStream( "C:\\Users\\food.xml" ));
              List<FoodType> tType = bM.getFoodType();                
              for (FoodType tT : tType) {
                System.out.println("\t" + tT.getFood());

              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:49:36.710

由于这个用例有一个非常简单的 XML 文档，我建议从 Java 对象开始。

**早餐菜单**

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是异常配置，因此您只需在希望绑定不同于默认值的地方添加注释（请参阅： [http ://blog.bdoughan.com/2012/07/jaxb-no-annotations-必需](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)的.html )。

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="Breakfast-menu")
public class BreakfastMenu {

    private List<FoodType> foodType;

    public List<FoodType> getFoodType() {
        return foodType;
    }

    public void setFoodType(List<FoodType> foodType) {
        this.foodType = foodType;
    }

} 
```

**食物类型**

默认情况下，映射基于公共属性，但我们可以更改 JAXB 以使用带`@XmlAccessorType(XmlAccessType.FIELD)`注释的字段（请参阅： [http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html ）。

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class FoodType {

    private String name;

    @XmlElement(name="food")
    private List<Food> foods;

} 
```

**食物**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Food {

    @XmlAttribute
    private String name;

    private int price;

} 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(BreakfastMenu.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14751166/input.xml");
        BreakfastMenu bm = (BreakfastMenu) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(bm, System.out);
    }

} 
```

# c++-cli - c++ cli ConcurrentDictionary 警告 4538

> ID：14751169
> 
> 赞同：1
> 
> 时间：2013-02-07T12:30:27.277
> 
> 标签：c++-cli, warnings, concurrentdictionary

当我有这个 c++ cli 代码时：

```
#pragma managed
ref class mcSessions: ConcurrentDictionary <String ^, mcSession^> 
{  //<---- warning here
private:
   static mcSessions ^g_Sessions;
       TimeSpan MaxIdleTime;
   mcSessions (TimeSpan newMaxIdleTime);
public:
    static void Initialize (long MaxIdleMinutes);
        static void Shutdown ();
        static void CreateSession (String ^&SessionId);
        static void RunInSession (String ^SessionId, String ^Command);
        static void RemoveSession (String ^SessionId);
}; 
```

我在第一个 { 上收到警告 C4538。有没有人知道为什么会发生这种情况以及它警告什么，或者这也是一个编译器错误，因为它是针对这个问题中的情况：[使用 C++/CLI 的看似不恰当的编译警告](https://stackoverflow.com/questions/12151060/seemingly-inappropriate-compilation-warning-with-c-cli)

尽管我看到它们有些相关，但我没有`Group`对象而是`ConcurrentDictionary`. 我正在使用针对 .NET 4.0 框架的 Visual Studio 2010 并使用 /clr 编译器标志进行编译。

确切的错误信息是：

```
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=System::Collections::Concurrent::ConcurrentDictionary::Node ^,
1>              dimension=1
1>          ]
1>          This diagnostic occurred while importing type 'System::Collections::Concurrent::ConcurrentDictionary ' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=int,
1>              dimension=1
1>          ]
1>          This diagnostic occurred while importing type 'System::Collections::Concurrent::ConcurrentDictionary ' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=System::Collections::Concurrent::ConcurrentDictionary<TKey,TValue>::Node ^,
1>              dimension=1
1>          ]
1>          d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25) : see reference to class generic instantiation 'System::Collections::Concurrent::ConcurrentDictionary<TKey,TValue>' being compiled
1>          d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25) : see reference to class generic instantiation 'System::Collections::Concurrent::ConcurrentDictionary<TKey,TValue>' being compiled
1>          with
1>          [
1>              TKey=System::String ^,
1>              TValue=IamPowershell::mcSession ^
1>          ]
1>          This diagnostic occurred while importing type 'System::Collections::Concurrent::ConcurrentDictionary::Node ' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=int,
1>              dimension=1
1>          ]
1>          This diagnostic occurred while importing type 'System::Collections::Concurrent::ConcurrentDictionary::Node ' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=System::Collections::Concurrent::ConcurrentDictionary<System::String ^,mcSession ^>::Node ^,
1>              dimension=1
1>          ]
1>d:\t4edevnet2010\umra2\iampowershell\mcIpSessions.h(25): warning C4538: 'cli::array<Type,dimension> ^' : const/volatile qualifiers on this type are not supported
1>          with
1>          [
1>              Type=int,
1>              dimension=1
1>          ]
1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:01:12.627

如前所述，问题在于 ConcurrentDictionary 中的易失性成员。但是，从您显示的代码中，您不需要从 ConcurrentDictionary 继承。

一般来说，我相信如果你正在制作一个通用的、可重用的集合类，你只需要从集合类继承。这似乎不是这里的情况，它似乎非常特定于`mcSession`类，并且可能具有业务逻辑，而不是简单的集合逻辑。

如果你这样声明你的班级，它会起作用吗？

```
ref class mcSessions
{
private:
    static ConcurrentDictionary<String^, mcSession^>^ g_Sessions;
    TimeSpan MaxIdleTime;
    mcSessions (TimeSpan newMaxIdleTime);
public:
    static void Initialize (long MaxIdleMinutes);
    static void Shutdown ();
    static void CreateSession (String ^&SessionId);
    static void RunInSession (String ^SessionId, String ^Command);
    static void RemoveSession (String ^SessionId);
}; 
```

编辑：还是这样？

```
ref class mcSessions
{
private:
    static mcSessions^ g_Sessions;// static session manager
    ConcurrentDictionary<String^, mcSession^>^ SessionList; // instance variable on g_Sessions
    TimeSpan MaxIdleTime;
    mcSessions (TimeSpan newMaxIdleTime);
public:
    static void Initialize (long MaxIdleMinutes);
    static void Shutdown ();
    static void CreateSession (String ^&SessionId);
    static void RunInSession (String ^SessionId, String ^Command);
    static void RemoveSession (String ^SessionId);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:55:50.500

正如@HansPassant 在对问题的评论中指出的那样，他是对的。成员确实不稳定（愚蠢的我，可以检查一下：S）无论如何这应该是答案。谢谢，我认为它现在解决了。

# dojo - 启用和禁用 dojo 菜单栏项

> ID：14751170
> 
> 赞同：1
> 
> 时间：2013-02-07T12:30:30.570
> 
> 标签：dojo

我有一个带有五个菜单栏项的道场菜单栏。在页面加载时，菜单栏项目之一将处于禁用模式。单击“添加”菜单栏项时，必须启用已禁用的菜单栏项（“保存”）。我正在使用以下脚本启用它。但问题是，它不在同一条线上。它在下一行启用。如何解决这个问题。

这是我的道场菜单栏：

```
<div class="claro" id="menuDiv151" onclick="setWidgetproperty(this.id,'x','navMenu151');" onmousedown="setMenuBarProperty('navMenu151');" onmouseup="setDocStyle(this.id)" style="border:1px dotted white; left: auto; position: absolute; width:450px; top: 620px;">
     <div dojotype="dijit.MenuBar" id="navMenu151" style="font-size:11pt;" title="MenuBar">
          <div dojotype="dijit.MenuBarItem" id="SelectMenu151" onclick="getEventLogUserSelect();setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="SelectMenu151" name="Select5.png" onclick="setImgProperty(this.id)" src="images/uploads/select.png" style="height:20px; width:20px;">
               Select
          </div>
          <div dojotype="dijit.MenuBarItem" id="AddMenu151" onclick="getUserAdd();setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="AddMenu151" name="Add6.png" onclick="setImgProperty(this.id)" src="images/uploads/add.png" style="height:20px; width:20px;">
               Add
          </div>
          <div dojotype="dijit.MenuBarItem" id="CopyMenu151" onclick="setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="CopyMenu151" name="Copy7.png" onclick="setImgProperty(this.id)" src="images/uploads/Terminate.png" style="height:20px; width:20px;">
               Copy
          </div>
          <div dojotype="dijit.MenuBarItem" id="DeleteMenu21" onclick="setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="DeleteMenu21" name="Delete8.jpg" onclick="setImgProperty(this.id)" src="images/uploads/cancel.png" style="height:20px; width:20px;">
               Delete
          </div>
          <div dojotype="dijit.MenuBarItem" id="SaveMenu21" onclick="setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="SaveMenu21" name="Save9.jpg" onclick="setImgProperty(this.id)" src="images/uploads/save.png" style="height:20px; width:20px;">
               Save
          </div>
     </div>
</div> 
```

以及启用和禁用该项目的脚本：

```
window.onload = function() {
document.getElementById("SaveMenu21").style.display='none';
};
function getUserAdd(){
document.getElementById("SaveMenu21").style.display='block';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:33:28.213

这是一个示例，显示如何隐藏菜单栏项以及如何禁用菜单栏项

[http://jsfiddle.net/cswing/62Jcp/](http://jsfiddle.net/cswing/62Jcp/)

```
require(["dojo/ready", "dijit/registry", "dojo/dom-style"], 
  function(ready, registry, domStyle) {

    ready(200, function(){
        var menuItem = registry.byId("saveItemDisabled");
        menuItem.set('disabled', true);

        menuItem = registry.byId("saveItemHidden");
        domStyle.set(menuItem.domNode, 'display', 'none');
    });    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:58:08.983

尝试这个

```
dijit.byId("myElement").attr("disabled", false); 
```

# javascript - 将数组从 Javascript 传递到 Actionscript 2

> ID：14751175
> 
> 赞同：0
> 
> 时间：2013-02-07T12:30:38.793
> 
> 标签：javascript, actionscript-2

我需要从 Flash 内部从 JS 函数中导入一个数组，并将其显示在 Flash 中的动态文本中，我的代码是：

AS2：

```
import flash.external.ExternalInterface;

js_btn.onRelease = function() {
    _root.infoBox.text = ExternalInterface.call("getUserInfo()");
} 
```

JS：

```
function getUserInfo() {
    var userinfo = {fullname: 'George One', username: 'goergeo', picturelink: 'http://link.com'};
    return userinfo;
} 
```

一旦我按下按钮，我在文本框中得到“未定义”！非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:07:00.090

正确的 AS2 代码如下：

```
import flash.external.*;

js_btn.onPress = function() {
    allUserInfo = Object(ExternalInterface.call("getUserInfo"));
    _root.infoBox.text = allUserInfo["fullname"];
} 
```

# ios - 在我的 iOS 项目中是否使用文件或使用核心数据的 sqlite 数据库？

> ID：14751177
> 
> 赞同：3
> 
> 时间：2013-02-07T12:30:51.587
> 
> 标签：ios, objective-c, core-data, nsfilemanager

我正在为当前在线运行的 Web 应用程序开发 iPhone 应用程序。当前的 Web 应用程序使用 txt 文件来保存数据。当前系统使用自己的标准将数据保存在文件中，并且还制定了自定义算法来读取和写入数据。每个 txt 文件的大小低于 1 mb。有很多数据操作正在进行。

那么在实现相同的同时我想为 iPhone 应用程序选择什么？在苹果网站上，他们说'SQLite 非常适合低级关系数据库工作' [https://developer.apple.com/technologies/ios/data-management.html](https://developer.apple.com/technologies/ios/data-management.html) 但在我的情况下它是高级别的。

所以请帮我做决定。我想使用核心数据管理文件或 sqlite 数据库中的数据吗？每个的优点和浓度是什么？使用文件时是否存在内存问题或性能问题？

编辑 09/02/2013

* * *

感谢您的回答'user76859403'。当前的 Web 应用程序也使用数据库来保存重要信息，如成员详细信息、登录凭据等，其他内容保存在文件中。在当前系统中有不同的部分，所有这些部分都有几个子部分和相关信息。这些部分及其详细信息保存在文件中。创建的自定义算法只是读取这些文件并将所有数据作为记录放入缓存中（与核心数据 managedobjectcontext 中相同），并且每当数据发生变化时，整个文件都会被覆盖。我还想知道是否可以将 webserver 中使用的那些类和算法导入 iOS，这样我就可以节省时间为 iOS 重写相同的算法？当前的服务器代码是 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:31:26.580

First, I must say that I find it odd that the web-server is storing its data in text files and having customized algorithms to manipulate the data. Giving that lots of data manipulation are occurring, this seems highly inefficient to me; a database would be better in my opinion.

From your side however, it all depends on the data you're processing from the server. You can use the following:

1.  SqlLite or CoreData - Using these approaches is one route to go. But you may have the extra work of sorting out the data into tables etc.. usual database stuff. Refer to the answer on [this link](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone) to get a better idea on the difference between the SqlLite and CoreData or Google a bit.

2.  Just save the data in files just like its being done on the server. There are several ways to do this including [Property List files](https://stackoverflow.com/questions/4075056/saving-data-in-ios) etc. [Here's one method](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager) where it's being done using NSCoding.

I would say that the approach#1 approach has the advantage in organization and speed (has the advantage any relational database would have). However, the disadvantage is you will take more time properly setting up this correctly.

Approach#2 might save you time as you would not have to consider structure of data or anything, just dump and save. However, ask yourself, is the size of server data liable to increase? is speed a factor in processing? etc etc.. Think about long term, not just the short fix. This approach is right for you if the data will be relative the same and load is small.

The approach you choose largely depends on your data load and furture project scope (be it quick fix, or longer term improvement of current system) in my opinion.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:44:34.310

如果您正在处理任何“高级”问题，我强烈建议您使用 Core Data。还可以查看 mogenerator [https://github.com/rentzsch/mogenerator](https://github.com/rentzsch/mogenerator)。这个很棒的教程应该可以帮助您入门：[http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

*   约翰内斯

# css - 为 SVG 图像添加边框

> ID：14751178
> 
> 赞同：27
> 
> 时间：2013-02-07T12:30:53.193
> 
> 标签：css, svg, border

是否可以将 SVG 图像包装在边框内（即 - 在该图像周围放置 CSS 边框）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-07T12:35:16.793

画一个`<rect>`圆形填充=“无”的图像。您可以使用笔划`<rect>`作为边框。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-06-13T15:30:47.103

以下是一些在 Firefox 中测试的示例：

```
<svg width="100" height="100" style="border:1px solid black">
<circle cx="50" cy="50" r="40" stroke="green" stroke-width="4" fill="yellow" />
</svg>

<br><br>

<svg width="300" height="100" style="border:1px solid black">
<rect width="300" height="100" style="fill:rgb(110, 50, 25); stroke-width:4; stroke:rgb(43, 222, 221);" />
</svg>

<br><br>

<svg width="170" height="170" style="border:1px solid black">
<rect x="10" y="10" width="150" height="150" style="fill:blue; stroke:pink; stroke-width:5; fill-opacity:0.1; stroke-opacity:0.9;" />
</svg> 
```

希望能帮助到你。:)

# iis - HTTP 403 Forbidden ：此网站需要您登录

> ID：14751179
> 
> 赞同：1
> 
> 时间：2013-02-07T12:30:55.220
> 
> 标签：iis, asp.net-mvc-4, iis-5

使用**asp .net MVC 4.0** , **razor** , **VS2010** , **IIS5.2** , **windows Server 2003**

我已经构建了一个我想在 IIS 中发布的应用程序。我所做的如下所列：

1.  清理然后构建解决方案。
2.  右键单击项目文件并单击**PUBLISH**。
3.  发布方法：**文件系统**
4.  目标位置：**C:\Inetpub\wwwroot\testing**
5.  然后发布。

然后我去了 IIS 并在**默认网站中获得了我的网站**。快乐的 ：）。然后我做了：

1.  右键单击**测试**（我的应用程序）并打开属性。
2.  在**tabdirectory 中**一切正常。
3.  在**asp.nettab**中，我设置了 asp.net 版本**4.0.30319**
4.  这里有点混乱，我将**home/index设置为****文档**选项卡中的默认内容页面
***   然后我右键单击**测试**并单击**浏览**。它显示：**

 **> 最可能的原因：
> 
> 本网站要求您登录。
> 
> 此错误（HTTP 403 Forbidden）表示该程序能够连接到该网站，但它没有查看该网页的权限。

一个简短的总结我得到的错误信息。这是我的第一个 mvc 应用程序和第一次托管。我在这里有什么错？我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T20:42:02.687

我有类似的问题。请尝试以下方法：

**A. [Microsoft Technet](https://blogs.technet.microsoft.com/praveenh/2013/04/30/intermittent-http-403-forbidden-error-while-trying-to-browse-to-a-sharepoint-web-app/)的以下建议帮助了我**：

解决方案是确保**Authenticated Users**或**\Users**组（通常包含 DOMAIN\Users 组）对C:\inetpub\wwwroot\wss\VirtualDirectories{ 下面的**/BIN文件夹具有****Read & Execute**、**List Folder Contents**和**Read**权限站点名称80}。按照下面列出的步骤授予所需的权限：

 **1.  打开**Windows 资源管理器**并导航到Web 应用程序的**/bin目录**

2.  右键单击该文件夹，然后单击**属性**

3.  转到安全选项卡，然后单击**编辑**

4.  单击**添加**并添加本地服务器组**Authenticated Users**或**< SERVER NAME >\Users**（这通常包含 DOMAIN\Users 组）。

5.  选择**Read & Execute**、**List Folder Contents**和**Read** 权限（如果您打算将 Everyone 添加到 /bin 文件夹，请仅授予 Read 权限）

6.  单击**确定**以应用新设置

7.  注意：您可能需要*在每次 Publish 之后*执行此操作，因为权限可能会以某种方式被重置。

**B. 在 VS 中 - 为您的网站设置默认页面，或尝试导航到特定页面，而不是仅使用站点名称打开网站。**

我知道这听起来很愚蠢，但这也是我的问题

将您的网站发布到 IIS 后，导航到*[http://myServer/mySite/somePage](http://myServer/mySite/somePage)*而不是*[http://myServer/MySite](http://myServer/MySite)*****

# php - 多个搜索查询的一个搜索框

> ID：14751180
> 
> 赞同：0
> 
> 时间：2013-02-07T12:30:55.217
> 
> 标签：php, mysql, sql

所以我有一个搜索框，可以搜索输入的任何内容（手机品牌、型号、操作系统和降价），并有一个循环根据是否满足搜索条件，在自己的框中显示每个结果。但是，当我添加多个查询时，其中两个有效，其余无效。代码如下：

```
mysql_select_db("bg29li", $con);
$phonesearch = $_POST['phonesearch'];

$sql = "SELECT * FROM `phones` JOIN manufacturer USING (ManufacturerID) JOIN operatingsystem USING (OSID) WHERE Price <='$phonesearch' ORDER BY `Price` DESC";
$sql = "SELECT * FROM `phones` JOIN manufacturer USING (ManufacturerID) JOIN operatingsystem USING (OSID) WHERE Model LIKE '%$phonesearch%'";
$sql = "SELECT * FROM `phones` JOIN manufacturer USING (ManufacturerID) JOIN operatingsystem USING (OSID) WHERE OSName LIKE '%$phonesearch%'";
$sql = "SELECT * FROM `phones` JOIN manufacturer USING (ManufacturerID) JOIN operatingsystem USING (OSID) WHERE Name LIKE '%$phonesearch%'";

$result = mysql_query($sql);

echo "<h2>Search Results:</h2>";
while($row = mysql_fetch_array($result))
{ ?> 
```

在此示例中，似乎只有底部查询有效（获取与输入的品牌名称相同的手机）。我想知道是否有人可以帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:34:55.077

您正在覆盖变量`$sql`。将其减少为一个查询，如下所示：

```
SELECT *
FROM `phones`
JOIN manufacturer USING (ManufacturerID)
JOIN operatingsystem USING (OSID)
WHERE (Price <='$phonesearch')
  OR (Model LIKE '%$phonesearch%')
  OR (OSName LIKE '%$phonesearch%')
  OR (Name LIKE '%$phonesearch%')
ORDER BY `Price` DESC 
```

# ruby-on-rails - 了解 Rails 模型功能

> ID：14751181
> 
> 赞同：1
> 
> 时间：2013-02-07T12:30:56.187
> 
> 标签：ruby-on-rails, ruby

我有一个模型 - 会议。在数据库模式中 - 会议有任务。（任务也有模型）当我保存会议时，会议模型中有一个自动调用的方法。它是这样写的：

`def task_attributes=(task_attributes)`

它是如何被调用的？我检查了。该方法没有写在代码的其他任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:38:18.873

如果开会`has_one :task`而你有`accepts_nested_attributes_for :task`，这意味着调用`fields_for :task`将生成遵循格式的参数，`<association_name>_attributes`这可能是你在代码中的任何地方都找不到它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:52:30.320

由于您使用的是`has_many`关联，`ActiveRecord`因此在您的案例任务中保存子模型。如果您正在生成新任务，无论您是否设置`:autosave`为 true，都会发生这种情况。Ruby 在幕后动态生成所有代码，这就是您找不到它的原因。

### 一对多示例

当 :autosave 未声明时，在保存其父级时保存新子级：

```
class Meeting
  has_many :comments # :autosave option is not declared
end

meeting = Meeting.new(title: 'staff')
meeting.tasks.build(name: 'boring stuff')
meeting.save # => saves both meeting and task

meeting = Meeting.create(title: 'staff')
meeting.tasks.build(name: 'boring stuff')
meeting.save # => saves both meeting and task

meeting = Meeting.create(title: 'staff')
meeting.tasks.create(name: 'boring stuff')
meeting.save # => saves both meeting and task 
```

当 :autosave 为真时，所有子项都会被保存，无论它们是否是新记录：

```
class Meeting
  has_many :tasks , autosave: true
end

meeting = Meeting.create(title: 'staff')
meeting.tasks.create(name: 'boring stuff')
meeting.tasks[0].priority = 1
meeting.save # => saves both meeting and task, with 1 as priority 
```

# c# - 如何加密密码/电子邮件c#

> ID：14751186
> 
> 赞同：0
> 
> 时间：2013-02-07T12:31:28.667
> 
> 标签：c#, encryption, smtp, sendmail

我目前正在尝试启动并运行调试邮件。发生错误的那一刻，它将向我使用的邮件发送带有错误的邮件。但是在让某人测试之后，他实际上得到了我的邮件密码并从中发送邮件并决定更改密码。

```
public void Send() {
    MailMessage MailMesaji = new MailMessage();
    MailMesaji.Subject = "subject";
    MailMesaji.Body = "mail body";
    MailMesaji.From = "sender mail adress";
    this.MailMesaji.To.Add(new MailAddress("to mail adress"));
    System.Net.Mail.SmtpClient Smtp = new SmtpClient();
    Smtp.Host = "smtp.gmail.com"; // for example gmail smtp server
    Smtp.EnableSsl = true;
    Smtp.Credentials = new System.Net.NetworkCredential("account name", "password");
    Smtp.Send(MailMesaji);
} 
```

所以我想知道，是否可以加密帐户名和密码以防止被盗？

很抱歉，如果我搜索得不够好，但找不到有关如何加密电子邮件/密码的任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:39:46.610

由于您需要恢复用于发送邮件的原始密码，因此您必须使用某种形式的可逆加密。

听起来您正处于想要将源代码传递给另一个用户进行测试的情况。该测试人员将能够简单地`new System.Net.NetworkCredential`在行上断点您的代码，并查看传递给构造函数的内容。

因此，无论您设法加密您的凭据，如果您将代码（或可执行文件）传递给其他人进行测试，那么他们将能够访问您的密码。

# iphone - uialertview 多次调用

> ID：14751187
> 
> 赞同：2
> 
> 时间：2013-02-07T12:31:28.870
> 
> 标签：iphone, ios, objective-c, uibutton, uialertview

很烦人……！！！

我用谷歌搜索了这个问题，找到了一些**`Relative Questions`**但没有**`Satisfactory Answers`**。

所以我有一种`- (IBAction)`方法可以在单击按钮时添加一些`UITextField's`值。我只是想显示，如果 UITextField 为**空**。`NSMutableArray`**`"Add"`**`UIAlertView`

 ****我的代码：**

```
- (IBAction)addButtonPressed:(id)sender
{
       if ([textField1.text length]==0 || [textField2.text length]==0 || !someFlag)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Please Enter Valid Data..." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
        else
        {
             // Code to add textField's value to Array.
        }
} 
```

**我的问题 ：**

每当我按下带有**空 textField的****“添加”**按钮时，就会出现**三次**。**`UIAlertView`**

 ******1）**第一次出现`"Close"`按钮。（我从未添加过......）它会在一段时间内消失。

**2）**第二次出现**“确定”**按钮。（这就是我添加的......）当我按下**“确定”**按钮时它会消失。

**3)**第三次 再次出现**“关闭”**按钮。当我按下**“关闭”**按钮时它会消失。

**编辑 ：**

类似的问题：[UIAlertView 每次调用弹出三次而不是一次](https://stackoverflow.com/questions/2273283/uialertview-pops-up-three-times-per-call-instead-of-just-once)。有人可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:07:04.173

**奇怪的....！！！**

有时，当您**过度烦躁时，您会****完全忽略**代码的某些行。它也发生在我身上。我忽略了一个从 Method 调用的方法，它里面有一个（当然有按钮）。**`-addButtonPressed``AlertView``"Close"`**

 **这就是解决方案本身！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:54:44.120

您的代码不包含任何问题。没有 3 个，只有 2 个警报。这是警报视图的流程：

1.  一旦您单击`add`按钮，就会出现 2 个选择器（可能是另一个选择器中的一个或两个 IBAction 一个按钮），其中包含警报视图代码
2.  现在 alert2（带有取消按钮）在 alert1（带有确定按钮）之前被调用
3.  然后调用 alert1 并隐藏 alert2
4.  现在，当您解决警报1（通过单击确定按钮）时，警报2 再次出现

现在您需要做的是检查“如果您的按钮未与 2 个 IBAction 连接”，这应该是因为您没有此类代码可以在此方法中调用另一个警报。并检查它是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:17:34.747

是的，我面临同样的问题，但我的情况与你不同。

1.  您应该尝试一下`[textfield.text isEqualToString:@""];`，因为这是在 Objective-C 中比较空文本字段的标准方法。

2.  检查您是否正确关闭了警报视图，有时我们不会专注于关闭警报视图，因此您的警报视图仍然处于活动状态，并且当您重新打开您的应用程序时，它会根据您的情况显示 2 到 3 次。因此，您可以使用**带按钮索引的委托确实关闭警报视图**来关闭视图中的警报**视图确实消失了**。我不确定，但它应该对你有用。祝你好运，伙计。

3.  而且我不确定，但我认为每次单击任何按钮时，您的 IBAction 按钮都会被覆盖，因此您也应该检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:59:10.027

尝试像这样比较。

```
if([testBox.text isEqualToString:@""]
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:errorDesc
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];

    [alert show];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:34:39.250

试试下面的代码......让我知道它是否工作！！！！

你所做的是你给了其他按钮 nil 2 次..所以这可能是问题所在......

快乐编码！！！！

```
 if ([textField.text length]==0)
    {

      UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Please Enter Valid Data..." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T12:55:24.007

```
- (IBAction)addButtonPressed:(id)sender
{
   if ([textField.text length]==0)
    {
           UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Information",@"") message:NSLocalizedString(@"Txt is  Empty!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
        [alert show]; alert = nil;
    }
    else
    {
         // Code to add textField's value to Array.
    }
} 
```

首先检查当 Button 点击​​时你调用了多少次`IBAction`方法？？？

其他明智的 put 实例`UIAlertView`是**public** .. 我的意思是像in一样放入`.h file`并访问它。`self.yourAlertViewName``.m file`

谢谢 ：）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-07T12:36:00.107

检查以下代码：

```
if ([textField.text length]==0)
{
UIAlertView *objAlertMsg = [[UIAlertView alloc] initWithTitle:@"MyApp"
                                                       message:@"Please Enter Valid Data..."
                                                      delegate:nil
                                             cancelButtonTitle:@"OK"
                                             otherButtonTitles:nil];
[objAlertMsg show];
[objAlertMsg release];
} 
```

检查一下，我已将委托设置为“nil”而不是“self”。如果不需要，请确保您没有在视图控制器中实现委托。

希望对您有所帮助。

干杯。********

# rest - REST PUT + 幂等性。客户如何提供有效身份证件？

> ID：14751188
> 
> 赞同：1
> 
> 时间：2013-02-07T12:31:29.227
> 
> 标签：rest, put

我知道这`PUT`应该是幂等的，客户端应该定义要创建的对象的ID。但是有一点我不是很清楚：客户端如何获得可用的ID？是否应该有其他 Web 服务可以提供？这种情况有最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:33:22.100

客户端应该首先`GET`使用资源表示

然后与上述步骤`PUT`一起发出更改`id`

也建议使用`If-Modified`标签来避免冲突

# excel - excel vba userforms：未定义用户定义的类型

> ID：14751189
> 
> 赞同：0
> 
> 时间：2013-02-07T12:31:29.507
> 
> 标签：excel, automation, userform, vba

我的 Excel 书包含一个名为`myUserForm`. 我想打开它，用数据填充它并以编程方式按下它的按钮，但是

```
Sub myUserFormShow()
 Dim muf As myUserForm
 muf.Show
End Sub 
```

提示错误`User-defined type not defined`。如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:38:36.177

使用此代码：

```
Sub myUserFormShow()
 myUserForm.Show
End Sub 
```

# backbone.js - Yeoman 将 Backbone/Ember 与 requireJs 一起使用

> ID：14751190
> 
> 赞同：1
> 
> 时间：2013-02-07T12:31:34.203
> 
> 标签：backbone.js, requirejs, yeoman

我想使用 Yeoman 启动一个带有框架并启用 requireJs 的项目。

如果我用 Amd 启动一个项目并在之后安装骨干网，则模型/控制器/路由......不是用 requireJs 生成的。

我找到了这个主题： [Howto bootstrap Backbone app with yeoman have require.js enabled](https://stackoverflow.com/questions/13153359/howto-bootstrap-backbone-app-with-yeoman-having-require-js-enabled)

但是响应的链接已经死了...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:59:27.327

如果它有任何帮助，我将 Peepcode Backbone 项目移植到 RequireJS 和 Yeoman 启用的项目：[https ://github.com/vishvish/backbone-peepcode-reboot](https://github.com/vishvish/backbone-peepcode-reboot)

Yeoman 刚刚更改了它的 MO，我不知道它是否可以使用，但是模型、路由等都以 RequireJS 格式存在，希望这会帮助您继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:03:53.530

我们更新了 Yeoman[主干生成器](https://github.com/yeoman/generator-backbone)以支持[twitter bootstrap](https://github.com/yeoman/generator-backbone/pull/17)和[RequireJS](https://github.com/yeoman/generator-backbone/pull/22)。但它没有正式添加到 npm。但是您可以尝试使用

```
npm install git://github.com/yeoman/generator-backbone.git 
```

讨论：[在 npm install 中找不到](https://github.com/yeoman/generator-backbone/issues/9)

# ios - 点击 UIButton 并调用它的动作下一个视图表单元格行选择状态？

> ID：14751191
> 
> 赞同：0
> 
> 时间：2013-02-07T12:31:42.837
> 
> 标签：ios, objective-c, xcode4.2

当我单击 mainview 按钮（id 1）时，我在 mainView 中有按钮，它的操作调用 nextView [secondview have tableView] tableView 单元格第一行被选中或突出显示状态。其状态设置为选中。

```
-(IBAction)btnOneClicked:(id)sender
{
    SecondView *nextView = [[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
    [self.navigationController pushViewController:SecondView animated:YES];
    NSIndexPath* selectedCellIndexPath= [NSIndexPath indexPathForRow:0 inSection:0];
    [nextView tableView:nextView.firstTable didSelectRowAtIndexPath:selectedCellIndexPath];
} 
```

你可以看看我的按钮操作方法。我尝试了很多选择，但没有成功。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:34:49.700

`tableView:didSelectRowAtIndex:`实际上是选择一行时调用的委托方法。

要选择行，您需要调用

```
[nextView.firstTable selectRowAtIndexPath:selectedCellIndexPath animated:YES scrollPosition:UITableViewScrollPositionTop] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:12:04.907

试试下面的代码

```
[button_refresh addTarget:<instance where you want to implement the method> action:@selector(refreshContent:) forControlEvents:UIControlEventTouchUpInside]; 
```

希望它会帮助你。

# python - 将文本字符串转换为 XML

> ID：14751197
> 
> 赞同：0
> 
> 时间：2013-02-07T12:31:51.960
> 
> 标签：python, xml, string

我有一个类似于下面的文本字符串：

```
statistics:
    time-started: Tue Feb  5 15:33:35 2013
    time-sampled: Thu Feb  7 12:25:39 2013
    statistic:
        active: 0
        interactive: 0
    count: 0
    up:
        packets: 0
        bytes: 0
    down:
        packets: 0
        bytes: 0 
```

我需要解析上面的字符串（我需要解析的字符串实际上更大/更深，这里我只是提供了一个示例）。我认为解析一些元素的最简单方法是**将此字符串转换为 XML 字符串**并用于`xml.etree.ElementTree`选择我要查找的元素。

所以我想将上面的字符串转换成如下的 XML 字符串：

```
<statistics>
    <time-started>Tue Feb  5 15:33:35 2013</time-started>
    <time-sampled>Thu Feb  7 12:25:39 2013</time-sampled>
    <statistic>
        <active>0</active>
        <interactive>0</interactive>
    </statistic>
    <count>0</count>
    <up>
        <packets>0</packets>
        <bytes>0</bytes>
    </up>
    <down>
        <packets>0</packets>
        <bytes>0</bytes>
    </down>
</statistics> 
```

如您所见，字符串中的所有信息都可用于将其转换为 XML。如果有简单的方法或模块可以做到这一点，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:51:05.090

您基本上是在尝试将 YAML 转换为 XML。您可以使用 PyYAML 将输入字符串解析为 python dict，然后使用 xml 生成器将 dict 转换为 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:52:13.177

user2050283 绝对是对的，它是 yaml，这使得解析变得容易。主要是出于教育原因，我尝试自己解析它。期待一些反馈。

您的数据结构是分层的、树状的。所以让我们在 Python 中定义一棵树，尽可能简单[（参考）](https://gist.github.com/hrldcpr/2012250)：

```
from collections import defaultdict

def tree(): return defaultdict(tree) 
```

接下来，让我们在解析函数中使用这棵树。它遍历行，查看缩进，记录当前路径（也称为面包屑），并尝试将行拆分为键和值（如果存在）并填充我们的树。在适当的情况下，我将逻辑块提取为单独的函数，如下所示。如果缩进与之前的任何缩进都不匹配，则会引发错误——基本上就像 Python 对其源代码所做的那样。

```
def load_data(f):
    doc = tree()
    previous_indents = [""]
    path = [""]

    for line in map(lambda x: x.rstrip("\n"), 
                    filter( is_valid_line, f)
                ):
        line_wo_indent = line.lstrip(" ")
        indent = line[:(len(line) - len(line_wo_indent))]

        k, v = read_key_and_value(line_wo_indent)

        if len(indent) > len(previous_indents[-1]):
            previous_indents.append(indent)
            path.append(k)

        elif len(indent) == len(previous_indents[-1]):    
            path[-1] = k

        else: # indent is shorter
            try:
                while previous_indents[-1] != indent:
                    previous_indents.pop()
                    path.pop()            
            except IndexError:
                raise IndentationError("Indent doesn't match any previous indent.")
            path[-1] = k

        if v is not None:
            set_leaf_value_from_path(doc, path, v)
    return doc 
```

我创建的辅助函数是：

*   **set_leaf_value_from_path**：采用树、路径（键列表）和值。它使用递归下降到树中并设置由路径定义的叶子的值。
*   **read_key_and_value**：将一行拆分为键和值，首先是“：”
*   **is_valid_line**：用于检查一行是否不为空或是否以数字符号开头

这是完整的脚本

```
from collections import defaultdict

def tree(): return defaultdict(tree)

def dicts(t): 
    if isinstance(t, dict):
        return {k: dicts(t[k]) for k in t}
    else:
        return t

def load_data(f):
    doc = tree()
    previous_indents = [""]
    path = [""]

    for line in map(lambda x: x.rstrip("\n"), 
                    filter( is_valid_line, f)
                ):
        line_wo_indent = line.lstrip(" ")
        indent = line[:(len(line) - len(line_wo_indent))]

        k, v = read_key_and_value(line_wo_indent)

        if len(indent) > len(previous_indents[-1]):
            previous_indents.append(indent)
            path.append(k)

        elif len(indent) == len(previous_indents[-1]):    
            path[-1] = k

        else: # indent is shorter
            try:
                while previous_indents[-1] != indent:
                    previous_indents.pop()
                    path.pop()            
            except IndexError:
                raise IndentationError("Indent doesn't match any previous indent.")
            path[-1] = k

        if v is not None:
            set_leaf_value_from_path(doc, path, v)
    return doc

def set_leaf_value_from_path(tree_, path, value):
    if len(path)==1:
        tree_[path[0]] = value
    else:
        set_leaf_value_from_path(tree_[path[0]], path[1:], value)

def read_key_and_value(line):
    pos_of_first_column = line.index(":")
    k = line[:pos_of_first_column].strip()
    v = line[pos_of_first_column+1:].strip()
    return k, v if len(v) > 0 else None

def is_valid_line(line):
    if line.strip() == "":
        return False
    if line.lstrip().startswith("#"):
        return False
    return True

if __name__ == "__main__":
    import cStringIO

    document_str = """
statistics:
    time-started: Tue Feb  5 15:33:35 2013
    time-sampled: Thu Feb  7 12:25:39 2013
    statistic:
        active: 0
        interactive: 0
    count: 1
    up:
        packets: 2
        bytes: 2
    down:
        packets: 3
        bytes: 3
"""
    f = cStringIO.StringIO(document_str)
    doc = load_data(f)

    from pprint import pprint
    pprint(dicts(doc)) 
```

已知限制：

*   仅支持标量作为值
*   只有字符串标量作为值
*   不支持多行标量
*   注释没有像定义中那样实现，也就是说，它们可能不在一行的任何地方开始；只有以数字符号开头的行被视为注释

这些只是**已知**的限制。我敢肯定 YAML 的其他部分也不支持。但这似乎足以满足您的数据。

# highstock - 输出是如何设计的？

> ID：14751208
> 
> 赞同：0
> 
> 时间：2013-02-07T12:32:22.177
> 
> 标签：highstock

我尝试构建一个生成 JSON-Array 的 php 文件。我想为 Highstock-Series 绘制多个系列，如下例所示：

[jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/compare/)

输出是如何设计的？

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?          filename='+ name.toLowerCase() +'-c.json&callback=?', 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:45:51.343

所以在 JSON 中你应该有 3 个系列，就像在示例中一样，但是 json 可以在 php 中构建为数组，然后由 json_encode() 函数编码。

# r - 无法使用 RJDBC 创建到 SQL Server 的连接

> ID：14751214
> 
> 赞同：1
> 
> 时间：2013-02-07T12:32:37.687
> 
> 标签：r, jdbc

我刚刚安装了 RJDBC 库，但无法连接到数据库。当我使用 RODBC 时，相同的连接字符串有效，所以我不确定为什么 RJDBC 无法建立连接。如果您能指导我找到解决方案，我将不胜感激。我在 MAC OSX 10.8.2 中使用 R

```
drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver","/Library/Java/Extensions/sqljdbc4.jar", "‘")
conn <- dbConnect(drv, "jdbc:sqlserver://data.rsquaredltd.com/****","****","****") 
```

drv 对象已成功创建，但 conn 失败并显示错误消息

```
"Error in .jcall(drv@jdrv, "Ljava/sql/Connection;", "connect", as.character(url)[1],  : 
 com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host data.rsquaredltd.com/SandP, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall."." 
```

没有防火墙阻止，正如我提到的，通过 RODBC 连接没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:31:53.773

您的网址不正确。您正在使用`jdbc:sqlserver://data.rsquaredltd.com/SandP`，应该是`jdbc:sqlserver://data.rsquaredltd.com\SandP`。

JDBC URL 的格式为：

```
jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]] 
```

有关详细信息，请参阅MSDN 上的[构建连接 URL 。](http://msdn.microsoft.com/en-us/library/ms378428%28v=sql.105%29.aspx)

# php - php数组组合并使用值作为索引/键

> ID：14751216
> 
> 赞同：0
> 
> 时间：2013-02-07T12:32:42.863
> 
> 标签：php, arrays

如何组合这些数组并使用特定值作为键/索引？
这是我正在玩的示例数组：

```
Array  
(  
    [0]=>john   
    [1]=>peter  
)  

Array  
(  
    [dept]=>engineering  
    [sub]=>trigonometry  
    [time]=>08:00  
 ) 
```

我想要实现的是这样的：

```
Array  
(  
    [john]=>john  
    [dept]=>engineering  
    [sub]=>trigonometry  
    [time]=>08:00    

    [peter]=>peter
    [dept]=>engineering  
    [sub]=>trigonometry  
    [time]=>08:00   
) 
```

在此先感谢各位，希望你们能帮我解决这个问题。欣赏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:40:57.623

我认为您可能希望将第一个数组的值与第二个数组的值相关联。

```
$finalArray = array();
foreach($firstArray as $name) {
    $finalArray[$name] = $secondArray;
}
print_r($finalArray); 
```

你会得到 ：

```
Array
(
    [john] => Array
              (
                  [dept]=>engineering  
                  [sub]=>trigonometry  
                  [time]=>08:00  
              )
    [peter] => Array
              (
                  [dept]=>engineering  
                  [sub]=>trigonometry  
                  [time]=>08:00  
              )
) 
```

这对你有帮助吗？

# objective-c - 这个通过数组的迭代是否与这个展开的代码相同？

> ID：14751217
> 
> 赞同：0
> 
> 时间：2013-02-07T12:32:43.083
> 
> 标签：objective-c, automatic-ref-counting

我的班级有一些@properties（强）；苹果、香蕉和橙子`NSArray*`类；我想知道这是否：

```
for(NSArray* __strong fruit in @[apples, bananas, oranges])     {
    fruit = [fruit sortedArrayUsingComparator:comparator];
} 
```

与此相同：

```
apples  = [apples  sortedArrayUsingComparator:comparator];
bananas = [bananas sortedArrayUsingComparator:comparator];
oranges = [oranges sortedArrayUsingComparator:comparator]; 
```

`comparator`是一个`NSComparator`。

我认为它们应该是相同的，但我不确定在这种情况下`__strong`它们与`for`循环有何关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:37:03.870

这不是相同的代码，循环不会改变变量的值`apples`，`bananas`并且`oranges`

在您的循环中，您将排序结果分配给局部变量`fruit`，这不会影响存储在`apples`,`bananas`或中的值的内容`oranges`。

在“展开”代码中，您将排序结果分配给原始变量，因此覆盖此变量的内容。

另外我认为您的循环类型`Fruit`是错误的，除非`apples`,`bananas`和是其余代码所建议`oranges`的类型`Fruit`而不是类型。`NSArray`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:03:43.753

不，它不一样，相同的是：

```
NSArray* fruits= [apples sortedArrayUsingComparator: comparator ];
fruits= [bananas sortedArrayUsingComparator: comparator];
fruits= [oranges sortedArrayUsingComparator: comparator]; 
```

所以前两种排序是没有用的，因为你只将水果分配给最后一个排序的数组：橙子。

**一个可能的解决方案**

目前尚不清楚您想要实现什么，可能是这样的：

```
NSArray* sortedFruits;
for(NSArray* fruit in @[apples, bananas, oranges])     
{
    NSArray* sorted = [fruit sortedArrayUsingComparator:comparator];
    [sortedFruits addObject: sorted];
} 
```

这样你就得到了一个包含 3 个项目的数组：苹果、香蕉和橙子的排序结果。

# c# - 如何（更新、设置、应用）在 XNA 项目的模型上动态着色？

> ID：14751220
> 
> 赞同：1
> 
> 时间：2013-02-07T12:32:50.477
> 
> 标签：c#, colors, xna, drawing, effects

我在实例化模型上设置背景颜色时遇到问题。我可以改变纹理但不能改变颜色。有没有改变颜色的参数？或者改变不透明度？我正在寻找一种突出模型的方法。

太感谢了

这是我使用的代码：除了最后两行之外，一切正常。我搜索但找不到颜色和不透明度的名称参数

//不起作用

**effect.Parameters["Color"].SetValue(new Vector3(0,1,0)); effect.Parameters["Opacity"].SetValue(0.5f);**

```
 void DrawModelHardwareInstancing(Model model, Matrix[] modelBones,
                                             Matrix[] instances, Matrix view, Matrix projection)
            {
                 .......

                foreach (ModelMesh mesh in model.Meshes)
                {
                    foreach (ModelMeshPart meshPart in mesh.MeshParts)
                    {
                        // Tell the GPU to read from both the model vertex buffer plus our instanceVertexBuffer.
                        Game.GraphicsDevice.SetVertexBuffers(
                            new VertexBufferBinding(meshPart.VertexBuffer, meshPart.VertexOffset, 0),
                            new VertexBufferBinding(instanceVertexBuffer, 0, 1)
                        );

                        Game.GraphicsDevice.Indices = meshPart.IndexBuffer;

                        // Set up the instance rendering effect.
                        Effect effect = meshPart.Effect;
                        //effect.CurrentTechnique = effect.Techniques["HardwareInstancing"];
                        effect.Parameters["World"].SetValue(modelBones[mesh.ParentBone.Index]);

                        //Work perfect
                        effect.Parameters["View"].SetValue(view);
                        effect.Parameters["Projection"].SetValue(projection);
                        effect.Parameters["Texture"].SetValue(textureInstancedModel);
                        /* ***************************** */
                        //Does not work
                        effect.Parameters["Color"].SetValue(new Vector3(0,1,0));
                        effect.Parameters["Opacity"].SetValue(0.5f);
                        /* ***************************** */

                        // Draw all the instance copies in a single call.
                        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
                        {
                            pass.Apply();

                            Game.GraphicsDevice.DrawInstancedPrimitives(PrimitiveType.TriangleList, 0, 0,
                                                                   meshPart.NumVertices, meshPart.StartIndex,
                                                                   meshPart.PrimitiveCount, instances.Length);
                        }
                    }
               ........
} 
```

# bash - 通过 dpkg-query 安装缺失包的脚本

> ID：14751221
> 
> 赞同：1
> 
> 时间：2013-02-07T12:33:01.617
> 
> 标签：bash, shell, ubuntu

我有一个脚本可以回显命令行中缺少的包，但想要一个选项来添加控制以安装缺少的应用程序。这样做的最好方法是什么？apt-get 安装 $tmp?

```
#!/bin/bash

echo "Checking server for missing packages..."
tmp=$(dpkg-query -W -f='${Package} ${Status} \n' apache2 openssh-server php5 \
php5-cli php5-xsl php5-imap php5-curl | grep "no package found")

if [[ $tmp =~ "no package found" ]]
then
echo "working"
apt-get install $tmp
else
echo "foo"
fi 
```

我试图在其中添加一个循环，但没有从 $tmp 获取输出

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:14:00.370

如果您命名系统上已安装的软件包，apt-get 不会抱怨。鉴于这一事实，我不会费心尝试过滤掉已安装的软件包，而只需使用以下单行。

```
apt-get install apache2 openssh-server php5 php5-cli php5-xsl php5-imap php5-curl 
```

您可能想要添加 -qy 开关以安静地运行并且不会被询问任何问题。

# export - highcharts : 在导出时设置标题

> ID：14751224
> 
> 赞同：6
> 
> 时间：2013-02-07T12:33:02.177
> 
> 标签：export, highcharts

我正在寻找一种方法：

*   在 HTML 页面结果中隐藏标题
*   导出时在 highcharts 图表上显示标题（PDF、PNG、JPEG 或打印）

我不知道该怎么做。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T13:06:45.840

您可以在导出时定义此参数。

[http://api.highcharts.com/highcharts#exporting.chartOptions](http://api.highcharts.com/highcharts#exporting.chartOptions)

[http://jsfiddle.net/BdHJM/](http://jsfiddle.net/BdHJM/)

```
exporting:{
            chartOptions:{
                title: {
                    text:'aaaaa'
                }
            }
        }, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-24T14:40:17.847

将此功能放入您的文档就绪功能下面是用于更改 highcharts 打印原型的代码，仅用于补丁或使其正常工作 在您的导出中放置 rangeSelector 选项并将其设置为 false 如下所述，您可以将其设置为您将来的需要

```
 Highcharts.wrap(Highcharts.Chart.prototype, 'print', function (proceed) {

                    var applyMethod = function (whatToDo, margin) {
                    this.extraTopMargin = margin;
                    this.resetMargins();
                    this.setSize(this.container.clientWidth , this.container.clientHeight , false);

                    this.setTitle(null, { text: 'SET TITLE HERE' :'});

                    this.rangeSelector.zoomText[whatToDo]();
                    $.each(this.rangeSelector.buttons, function (index, button) {
                        button[whatToDo]();
                    });
                };
                if (this.rangeSelector) {
                    var extraMargin = this.extraTopMargin;
                    applyMethod.apply(this, ['hide', null]);
                    var returnValue = proceed.call(this);
                    applyMethod.apply(this, ['show', extraMargin]);
                    this.setTitle(null, { text: '' });
                } else {
                    return proceed.call(this);
                    this.setTitle(null, { text: '' });
                    this.yAxis[0].setExtremes();
                }                       }

    }); 
```

并在图表选项中设置这个（根据你的需要改变它，我只是把我的代码供参考）

```
 exporting: {
            scale: 1,
            sourceWidth: 1600,
            sourceHeight: 900,

            chartOptions: {
                rangeSelector: {
                    enabled: false
            },
    } 
```

# php - 为什么 `echo true 的输出？'a'：是吗？'b' : 'c';` 'b'?

> ID：14751225
> 
> 赞同：4
> 
> 时间：2013-02-07T12:33:03.990
> 
> 标签：php

我有这段 PHP 代码：

```
echo true ? 'a' : true ? 'b' : 'c'; 
```

这个的输出是：

> b

但我期望的输出是：

> 一种

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T12:34:19.950

php 中的三元运算符是左结合的。

你需要使用

```
echo true ? 'a' : (true ? 'b' : 'c'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:48:18.433

因为您的代码评估如下：

```
echo (true ? 'a' : true) ? 'b' : 'c'; 
```

它相当于：

```
echo (true) ? 'b' : 'c'; 
```

然后结果是`'b'`

# .htaccess - 从 CakePHP 应用程序中排除根文件夹

> ID：14751226
> 
> 赞同：1
> 
> 时间：2013-02-07T12:33:04.207
> 
> 标签：.htaccess, cakephp

我正在尝试从 Cake（根文件夹应用程序）中排除第一级目录，因为它应该包含不同的应用程序。

/ 持有应用程序

/development/ 保存应用程序的测试版本

目录结构：

公共文件夹

```
.htaccess [modified]
app
    .htaccess [unmodified]
    webroot
        .htaccess [unmodified]
        index.php [unmodified]
        ...
    ...
lib
    Cake
    ...
development
    app
        webroot
            index.php [dumps $_SERVER for test purposes] 
```

因此，我的开发结构内部仍然没有应用程序（也没有 .htaccesses），只是为了测试我的根 .htaccess 是否有效。

这是我对根 .htaccess 的修改：

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   RewriteCond %{REQUEST_URI} ^/development.*
   RewriteRule (.*) - [L]

   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

**怎么了：**

/development/ 显示开发文件夹的 apache 索引

/development/app/ 显示 app 文件夹的 apache 索引

/development/app/webroot 显示根应用程序（尽管开发 url 匹配，仍会捕获请求）。

/development/app/webroot 应该显示我的 /development/app/webroot/index.php 文件，对吗？

我到底在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:41:18.357

原来这是我服务器上的一个奇怪的错误。

现在有效的结果`.htaccess`是：

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   RewriteCond %{REQUEST_URI} !^/development(?:$|/)
   RewriteRule    ^$ app/webroot/    [L]

   RewriteCond %{REQUEST_URI} !^/development(?:$|/)
   RewriteRule    (.*) app/webroot/$1 [L]

</IfModule> 
```

由于我不知道的原因，如果我通过 SSH 连接到我的用户帐户并通过命令行编辑 .htaccess 文件，它将无法正常工作！

当我上传相同的文件（通过 SFTP）时，它开始正常工作。

我在 CentOS (5.9) 上使用 cPanel (11.34.1)。

另一个例子：如果你想在一个 CakePHP 安装中*“忽略”* 多个子文件夹，你可以使用这个模式：

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   # /development, /version1.5 and /version1.8 directories
   # they all hold independent apps
   # or completely non-cake-related content

   RewriteCond %{REQUEST_URI} !^/(?:development|version1\.5|version1\.8)(?:$|/)
   RewriteRule    ^$ app/webroot/    [L]

   RewriteCond %{REQUEST_URI} !^/(?:development|version1\.5|version1\.8)(?:$|/.*)
   RewriteRule    (.*) app/webroot/$1 [L]

</IfModule> 
```

请注意，这两个`RewriteCond`指令是相同的。

# jquery - jQuery sortable() - 在第一个不可排序的元素之前将元素移动到连接列表

> ID：14751234
> 
> 赞同：0
> 
> 时间：2013-02-07T12:33:25.343
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有两个连接的可排序列表。第二个只包含一个元素并且不能移动（但列表是可排序的）。

当我将元素从第一个列表移动到第二个时，我无法将新元素添加为第二个列表的第一个元素。

第二个列表的第一个元素始终为 5（在此示例中）。[http://jsfiddle.net/fuQ4Z/ 示例](http://jsfiddle.net/fuQ4Z/) `.`

思路如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:55:28.237

我假设您希望 #sortable2 的 li 可排序但不与其他列表连接或可拖动。要做到这一点，只需将另一个类添加到列表元素并排除它。 [http://jsfiddle.net/fuQ4Z/3/](http://jsfiddle.net/fuQ4Z/3/)

```
$( "#sortable1, #sortable2" ).sortable({
  connectWith: ".connectedSortable",
  items: "li:not(.new)",
  cancel: '.excluded'
}).disableSelection(); 
```

我给#sortable2 上的li 元素一个排除类而不是新类。

```
<li class="ui-state-highlight excluded">Item 5</li> 
```

# matplotlib - 在 IPython Notebook 中缩放散点图

> ID：14751238
> 
> 赞同：4
> 
> 时间：2013-02-07T12:33:36.980
> 
> 标签：matplotlib, ipython, ipython-notebook

我正在运行一个 IPython Notebook：

```
$ ipython notebook --pylab inline 
```

**是否可以缩放内联的图或图像？**

例如我有

```
pylab.xlabel("Label X")
pylab.ylabel("Label Y")
pylab.scatter(range(2,15,2), [2, 3, 5, 7, 11, 13, 17], c="r") 
```

我想让它更大。

当然，我可以尝试手动更改参数，例如

```
pylab.figure(figsize=(12, 8))
pylab.xlabel("Label X", fontsize = 20)
pylab.ylabel("Label Y", fontsize = 20)
pylab.scatter(range(2,15,2), [2, 3, 5, 7, 11, 13, 17], c="r", s=100) 
```

但这既不方便也不准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T19:11:43.210

在 Windows 8 上运行 IPython v0.13 和 matplotlib v1.2.0 32 位的 Python v2.7.4 中，我在右下角得到一个“句柄”来手动调整内联图的大小（保持纵横比和分辨率），至少在正在`figure_format`使用的是`'png'`. 至于其他格式我不确定，但使用时似乎不存在这种行为`'svg'`。

`figure_format`您可以通过取消注释以开头的行来更改默认值

`# c.InlineBackend.figure_format`

在`ipython_notebook_config.py`IPython 的配置文件文件夹中的配置文件中，并将此参数设置为运行笔记本时要使用的任何格式，例如`'png'`.

如果要更改所有内联图的默认大小，可以更改`c.InlineBackend.rc`同一配置文件中的参数。如果您想设置`figsize`to `(12, 8)`，您只需取消注释文件中的相关行，让它说

`c.InlineBackend.rc = {'figure.figsize': (12, 8)}`

该参数还可以更改默认字体大小、dpi 等。

# javascript - 如何从 extjs4 中的商店获取值

> ID：14751253
> 
> 赞同：2
> 
> 时间：2013-02-07T12:34:31.707
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我有一个从 zend 服务器获取数据的商店。我想获取商店记录以对我的表单进行一些自定义。为了从商店获取数据，我使用下面的代码。

```
var index = Ext.StoreMgr.lookup('product.AttributeComboBox').find('abbr',4);
var reco = Ext.StoreMgr.lookup('product.AttributeComboBox').getAt(index); 
```

上面的代码段不返回任何记录。请让我知道我错在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:26:17.820

1.  在您的调试器中检查商店是否存在

    Ext.StoreMgr.lookup('product.AttributeComboBox')

2.  检查商店中有多少条记录

    Ext.StoreMgr.lookup('product.AttributeComboBox').data.items

3.  检查记录是否已正确解析

来自服务器的记录

```
Ext.StoreMgr.lookup('product.AttributeComboBox').data.items[0].raw 
```

它是如何转化为记录的

```
Ext.StoreMgr.lookup('product.AttributeComboBox').data.items[0].data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:18:31.647

你能告诉我们更多的代码吗？

到目前为止，似乎还可以，但您必须检查商店是否已创建以及是否有所有记录，就像 RichH 所说的那样。

要检查商店是否存在，我会这样做

```
var productStore = Ext.getStore('product.AttributeComboBox');
console.log(productStore ); 
```

检查商店是否已加载

```
console.log(productStore.getCount()); 
```

查找记录

```
console.log(productStore.findRecord('abbr','4')); 
```

# java - 如何将异常全局传递给 Struts 2 中其他操作的单个操作

> ID：14751256
> 
> 赞同：1
> 
> 时间：2013-02-07T12:34:43.923
> 
> 标签：java, exception, struts2, xml-configuration, interceptorstack

我想将异常全局传递给一个名为 的单个动作文件`ErrorAction`，例如从`Index`动作中。

**这是我的`struts.xml`文件：**

```
<global-results>    
    <result name="myErrorHandler" type="redirectAction">    
        <param name="actionName">myError</param>
    </result>    
    <result name="login" type="tiles">
        login
    </result>    
</global-results>    

<global-exception-mappings>    
    <exception-mapping exception="java.lang.Exception" result="myErrorHandler" />    
</global-exception-mappings>    

<action name="myError" class="com.actions.ErrorAction">    
    <interceptor-ref name="exception" />    
    <interceptor-ref name="defaultStack" />    
    <result name="error" type="tiles">error</result>    
</action>   

....    

<action name="Index" class="com.actions.Index">    
    <interceptor-ref name="defaultStack" />    
    <result name="success" type="tiles">home</result>    
</action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:35:53.657

[`exception`拦截](https://struts.apache.org/core-developers/exception-interceptor.html)器已经包含在`defaultStack`. 使用自定义堆栈，以便应用程序未捕获的任何异常都将被记录，然后由全局异常映射处理

```
<interceptors>
  <interceptor-stack name="appDefaultStack">
    <interceptor-ref name="defaultStack">
      <param name="exception.logEnabled">true</param>
      <param name="exception.logLevel">ERROR</param>
    </interceptor-ref>
  </interceptor-stack>
</interceptors>
<default-interceptor-ref name="appDefaultStack" /> 
```

# javascript - 使图像滑块自动工作

> ID：14751265
> 
> 赞同：0
> 
> 时间：2013-02-07T12:35:06.037
> 
> 标签：javascript, jquery, html, image, slider

我已将图像滑块导入我的网页。它工作正常，但不能自动工作。我试图添加一些 jquery，使图像在 4 秒后发生变化，但由于某种原因，它只工作一次并转到列表中的最后一个图像。有人可以告诉我哪里出错并帮助我使滑块自行工作。

这里是标记...

```
<ul id="body">
<input type="radio" name="radio-btn" id="img-1" checked />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/blackscale.jpg">
    </div>
    <label for="img-6" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-2" class="sb-bignav" title="Next">&#x203a;</label>
</li>

<input type="radio" name="radio-btn" id="img-2" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/huf.jpg">
    </div>
    <label for="img-1" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-3" class="sb-bignav" title="Next">&#x203a;</label>
</li>

<input type="radio" name="radio-btn" id="img-3" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/palace.jpg">
    </div>
    <label for="img-2" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-4" class="sb-bignav" title="Next">&#x203a;</label>
</li>

<input type="radio" name="radio-btn" id="img-4" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/skatecafe.jpg">
    </div>
    <label for="img-3" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-5" class="sb-bignav" title="Next">&#x203a;</label>
</li>

<input type="radio" name="radio-btn" id="img-5" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/only.jpg">
    </div>
    <label for="img-4" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-6" class="sb-bignav" title="Next">&#x203a;</label>
</li>
<input type="radio" name="radio-btn" id="img-6" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/supreme.jpg">
    </div>
    <label for="img-5" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-7" class="sb-bignav" title="Next">&#x203a;</label>
</li>
<input type="radio" name="radio-btn" id="img-7" />
<li id="img-container">
    <div id="img-inner">
        <img src="file:///C:/smilburn/Practices/images/adidas.jpg">
    </div>
    <label for="img-6" class="sb-bignav" title="Previous">&#x2039;</label>
    <label for="img-8" class="sb-bignav" title="Next">&#x203a;</label>
</li> 
```

这是我添加的jquery..

```
function gogo(){
    $('label[title="Next"]').click();
}
$(document).ready(function () {
    setInterval('gogo()',4000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:04:17.113

试试这个.. 易于使用滑块插件

[http://bxslider.com/](http://bxslider.com/)

或这个

[http://rhinoslider.com](http://rhinoslider.com)

# java - JSch ChannelSftp 退出状态始终为 -1

> ID：14751266
> 
> 赞同：3
> 
> 时间：2013-02-07T12:35:07.120
> 
> 标签：java, sftp, jsch

我使用 JSch 库开发 SFTP 客户端。

问题是两者`get`，`put`方法的状态是-1。

这是我的代码：

```
class SftpClient {
    private static final Logger LOG = Logger.getLogger(SftpClient.class);

    /** Connection port number */
    public static final int PORT = 22;

    /** SECURED protocol name */
    private static final String PROTOCOL = "sftp";

    /** Connection time out in milliseconds */
    public static final int TIME_OUT = 5000;

    /** This class serves as a central configuration point, and as a factory for Session objects configured with these settings */
    private JSch _client;
    /** A session represents a connection to a SSH server */
    private Session _session;
    /** Channel connected to a SECURED server (as a subsystem of the SSH server) */
    private ChannelSftp _channelSftp;

    /**
     * Value returned by the last executed command.
     */
    private int _exitValue;

    /**
     * Computer contains the url, the login and the password to connect.
     */
    private Computer _computer;

    /**
     * Initialize a SECURED client
     * @param target - Machine we want to connect to
     */
    public SftpClient(Computer target) {
        _client = new JSch();
        _computer = target;
    }

    protected void connect() throws Exception {
        try {
            if (_client == null) {
                _client = new JSch();
            }
            if (_session == null) {
                _session = _client.getSession(_computer.getLogin(), _computer.getUrl(), PORT);
                Properties props = new Properties();
                props.put("StrictHostKeyChecking", "no");
                props.put("compression.s2c", "zlib,none");
                props.put("compression.c2s", "zlib,none");
                _session.setConfig(props);
                _session.setPassword(_computer.getPassword());
                if (LOG.isDebugEnabled()) {
                    LOG.debug("Connecting to "+_computer.getUrl()+" with login "+_computer.getLogin()+"...");
                }
            }
            if (!_session.isConnected()) {
                _session.connect(TIME_OUT);
            }
            // disconnect previous channel if it has not been killed properly
            if (_channelSftp != null && _channelSftp.isConnected()) {
                _channelSftp.disconnect();
            }
            _channelSftp = (ChannelSftp) _session.openChannel(PROTOCOL);
            _channelSftp.connect();
            if (LOG.isInfoEnabled()) {
                LOG.info("Connected to "+_computer.getUrl()+" with login "+_computer.getLogin());
            }
        } catch(JSchException e) {
            LOG.error("Auth failed", e);
            throw e;
        }
    }

    protected void connect(String path) throws Exception {
        connect();
        if (_channelSftp != null && _channelSftp.isConnected()) {
            _channelSftp.cd(path);
        }
    }

    public boolean get(final String remoteDirectory, final String remoteFile, final String localDirectory) throws Exception {
        boolean res = false;
        if (LOG.isInfoEnabled()) {
            LOG.info("Download file "+remoteDirectory+"/"+remoteFile+" from "+_computer+" in "+localDirectory);
        }
        if (remoteDirectory != null && remoteFile != null && !remoteFile.isEmpty() && localDirectory != null) {
            try {
                // connect to the server and change directory
                connect(remoteDirectory);
                // change local directory
                _channelSftp.lcd(localDirectory);
                // download the file, keeping the same name
                _channelSftp.get(remoteFile, remoteFile);
                // update exit value
                _exitValue = _channelSftp.getExitStatus();

                if (_exitValue == 0) {
                    res = true;
                }
                if (LOG.isDebugEnabled()) {
                    LOG.debug("Exit status is: "+_exitValue);
                }
            } catch(SftpException e){
                LOG.error("Auth failed", e);
                throw e;
            } finally {
                if (_channelSftp != null && _channelSftp.isConnected()) {
                    _channelSftp.disconnect();
                    _channelSftp.exit();
                }
            }
        } else {
            LOG.warn("Check remoteDirectory ('"+remoteDirectory+"') or remoteFile ('"+remoteFile+"') or localDirectory ('"+localDirectory+"').");
        }
        return res;
    }

    public void put(final File localFile, final String destPath) throws Exception {
        if (LOG.isInfoEnabled()) {
            LOG.info("Send file "+localFile+" to "+_computer+" in "+destPath);
        }
        if (localFile == null) {
            _exitValue = -1;
            LOG.error("The given local file is null. Aborting tranfer.");
            return;
        }
        if (!localFile.exists()) {
            _exitValue = -1;
            LOG.error("The given local file '"+localFile+"' does not exist. Aborting tranfer.");
            return;
        }
        final InputStream input = new FileInputStream(localFile);
        if (input == null || input.available() <= 0) {
            _exitValue = -1;
            LOG.error("Cannot read file "+localFile);
            return;
        }
        try {
            connect(destPath);
            _channelSftp.put(input, localFile.getName());
            _exitValue = _channelSftp.getExitStatus();
            if (LOG.isDebugEnabled()) {
                LOG.debug("Exit status is: "+_exitValue);
            }
        } catch(SftpException e){
            LOG.error("Auth failed", e);
            throw e;
        } finally {
            if (_channelSftp != null && _channelSftp.isConnected()) {
                _channelSftp.disconnect();
                _channelSftp.exit();
            }
            IOUtils.closeQuietly(input);
        }
    }

    public void disconnect() {
        if (_channelSftp != null && _channelSftp.isConnected()) {
            _channelSftp.disconnect();
            _channelSftp.exit();
        }
        if (_session != null && _session.isConnected()) {
            _session.disconnect();
            if (LOG.isInfoEnabled()) {
                LOG.info("SECURED FTP disconnected");
            }
        }
    }
} 
```

不会抛出异常。

顺便说一句，我要上传和下载的文件是tar文件。Jsch 有 FTP 二进制模式吗？

文件传输良好。我可以正确使用它们，但我担心退出状态。

我查看了[Jsch API](http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/Channel.html#getExitStatus%28%29)，它说：

*`The exit status is only available for certain types of channels, and only after the channel was closed (more exactly, just before the channel is closed).`*

我如何知道退出状态是否可用`ChannelSftp`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:04:05.237

查看源代码，它看起来没有为 SFTP 实现 ExitStatus

```
channel.setExitStatus(reason_code); 
```

在 Session 类中仅针对以下两种情况实现

```
case SSH_MSG_CHANNEL_OPEN_FAILURE:
case SSH_MSG_CHANNEL_REQUEST: 
```

对于我测试的成功场景，至少没有调用这两种情况。

# java - 在 Android 中扩展 AlertDialog.Builder

> ID：14751267
> 
> 赞同：8
> 
> 时间：2013-02-07T12:35:07.627
> 
> 标签：java, android

我想创建一个扩展类`AlertDialog.Builder`：

```
public class AlertBuilder extends AlertDialog.Builder {

    private MultiAdapter mAdapter;
    private ListView lv;
    private Activity mActivity;
    private Context mContext;
    private CheckedTxtView checkedItem;

    public AlertBuilder(Context context, Activity activity, final List<CheckedTxtView> mList) {
        super(context);
        this.mActivity = activity;
        this.mContext = context;

        this.setTitle("Test");
        LayoutInflater inflater = activity.getLayoutInflater();
        View dialoglayout = inflater.inflate(R.layout.main_filter, null);
        this.setView(dialoglayout);

        mAdapter = new MultiAdapter(context, mList); 
        lv = (ListView) dialoglayout.findViewById(R.id.list);
        lv.setAdapter(mAdapter);
        lv.setOnItemClickListener(new ItemClick());
    }

    class ItemClick implements OnItemClickListener {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            checkedItem = mAdapter.mItems.get(position);;
            mAdapter.notifyDataSetChanged();
        }
    }

    private class MultiAdapter extends ArrayAdapter<CheckedTxtView> {

        private List<CheckedTxtView> mItems;

        public MultiAdapter(Context context, List<CheckedTxtView> mList) {
            super(context, R.layout.list2, mList);
            this.mItems = mList;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View row;

            if (convertView == null)  {
                LayoutInflater inflater = mActivity.getLayoutInflater();
                row = inflater.inflate(R.layout.list2, parent, false);
            } else
                row = convertView;

            CheckedTextView txt = (CheckedTextView) row.findViewById(R.id.label);

            CheckedTxtView c = mItems.get(position); 

            System.out.println(c.item);

            txt.setText(c.item);
            if(checkedItem != null && checkedItem.item != null)
                txt.setChecked(c.item.equals(checkedItem.item));

            return row;
        }
    } 
```

然后我在我的活动中使用它：

```
public class MainActivity extends Activity {

    private List<CheckedTxtView> mList;
    private AlertDialog mAlert;
    private AlertDialog.Builder mAlertBuilder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mList = new ArrayList<CheckedTxtView>();
        for(int i=0; i<30; i++) {
            CheckedTxtView c = new CheckedTxtView();
            c.item = "item " + i;
            mList.add(c);
        }

        mAlertBuilder = new AlertBuilder(getApplicationContext(), this, mList);
        mAlert = mAlertBuilder.create();

        Button mButton = (Button) this.findViewById(R.id.mButton);
        mButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mAlert.show();
            }
        });
    }
} 
```

我在控制台中收到此错误：

```
02-07 13:33:05.641: E/AndroidRuntime(12557): FATAL EXCEPTION: main
02-07 13:33:05.641: E/AndroidRuntime(12557): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.view.ViewRoot.setView(ViewRoot.java:566)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:179)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.app.Dialog.show(Dialog.java:265)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at com.example.testdialog.MainActivity$1.onClick(MainActivity.java:35)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.view.View.performClick(View.java:2533)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.view.View$PerformClick.run(View.java:9320)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.os.Handler.handleCallback(Handler.java:587)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.os.Looper.loop(Looper.java:150)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at android.app.ActivityThread.main(ActivityThread.java:4385)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at java.lang.reflect.Method.invoke(Method.java:507)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
02-07 13:33:05.641: E/AndroidRuntime(12557):    at dalvik.system.NativeStart.main(Native Method) 
```

我可能会在这里错过一些东西。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:41:37.280

代替 getApplicationContext() 使用 this 或 MainActivity.this。

```
 mAlertBuilder = new AlertBuilder(this, this, mList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:42:54.000

你不应该在这里传递应用程序的上下文：

```
 mAlertBuilder = new AlertBuilder(getApplicationContext(), this, mList); 
```

由于 Activity 本身就是上下文，因此您应该将构造函数更改为只接受一个参数 - Activity，以后可以将其用作 Context 对象。

# php - 如何检查上传的文件（或通过文本框的文本）是否包含 PHP 代码？

> ID：14751272
> 
> 赞同：0
> 
> 时间：2013-02-07T12:35:21.713
> 
> 标签：php, security, file-upload, input-sanitization

我无法在 stackoverflow 上找到正确的答案。但也许只是我很傻。

我有一个用户表单，用户可以在其中上传文本文件。我们正在做一些明智的事情，比如在 htdocs 之外保存和重命名文件 - 但我如何检查上传的文件是否包含一些可能有害的 PHP 片段？还有一个文本框保存为文本文件，我们想检查用户是否也在其中提交了 php 代码。

像检查“ `<?php`”一样愚蠢吗？是否可以以某种形式的字节形式重写这将使该检查无用。

请注意，该文件可能包含有效的“<”和“>”字符作为输入的一部分——我不想转义这些字符，因为这样我的数据处理应用程序将无法在这个经过清理的表单上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:37:02.467

您不需要这样做：您只需要注意输入永远不会在可以执行 PHP 代码的上下文中使用。

如果您正在接收**表单数据**，请确保您`eval()`在某些时候没有接收到内容。除此之外，你应该没事。

如果您正在接收**文件**，请确保将它们存储在 PHP 解释器无法执行的位置。参见例如[阻止执行上传的 php 文件？](https://stackoverflow.com/questions/5885643/prevent-execution-of-uploaded-php-files)还要确保您永远不会`include()`使用用户上传的文件 - 如果它们是您需要在某些时候显示的文件，请使用`file_get_contents()`（并且不要忘记为 HTML 输出清理它们）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T12:43:15.090

用下划线替换文件名和扩展名之间的点以确保。

# eclipse - Eclipse 未将项目识别为 Gradle 项目

> ID：14751276
> 
> 赞同：21
> 
> 时间：2013-02-07T12:35:30.427
> 
> 标签：eclipse, gradle

我想用 gradle 构建一个项目。我在我的项目中包含了 build.gradle。但是 eclipse 没有将它识别为 gradle 项目，我无法构建它。任何人都可以为此提供解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-04T04:22:18.673

我刚刚在 Spring Tool Suite 中遇到了这个问题。

这就是我所做的。

1.  右键单击项目以获取上下文菜单。
2.  转到菜单底部附近的“配置”（对我而言）
3.  选择“转换为 Gradle 项目”的子菜单选项。
4.  刷新项目。

导入的项目`build.gradle`随后出现在 Gradle 视图的下拉选项中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-04T02:47:53.563

如果您使用[Buildship Eclipse 插件](http://projects.eclipse.org/projects/tools.buildship)进行 Gradle 集成，您可以尝试将以下代码段添加到您的 build.gradle 文件中：

```
eclipse {
    project.natures 'org.eclipse.buildship.core.gradleprojectnature'
    .....
} 
```

然后运行“gradle eclipse”重新生成Eclipse项目文件并在Eclipse中刷新你的项目。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-13T00:28:59.517

在 Eclipse Neon 中，您：

```
Right-click on your project --> Configure --> Add Gradle Nature. 
```

您的项目将自动刷新，您将看到 Gradle 下载的所有依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T12:41:24.720

Eclipse 没有对 Gradle 的原生支持。为了在 Eclipse 中支持 Gradle，SpringSource 提供了一个 eclipse 插件，但最简单的方法是按照文档从 gradle生成[eclipse](http://www.gradle.org/tooling)[项目](http://www.gradle.org/docs/current/userguide/userguide_single.html#eclipse_plugin)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T17:33:23.300

我有一个类似的问题，为了让 eclipse 识别 Gradle 项目，我添加了 Gradle 性质，然后我不得不点击，`Gradle->Refresh All`然后出现 Gradle 图标并解决了所有依赖项。

在刷新之前单击`Enable Dependency Management`会导致“未启用此操作”并且所有 Gradle 菜单选项都变灰。

# c# - ArcGIS | 创建图层和标记

> ID：14751282
> 
> 赞同：1
> 
> 时间：2013-02-07T12:35:57.290
> 
> 标签：c#, arcgis

我正在制作一个管理考古数据的程序，其中一部分是为他们的发现创建新的图层和标记。我正在使用带有 Visual Studio 2010 (C#) 的 ArcGIS Engine 来制作一个独立的程序。

我阅读了有关 Arcgis 引擎的文档，但我还没有找到一种方法来创建将出现在 TOC 控件上的标记，并将其分类在我创建的图层中。

有没有办法通过代码在其中创建新图层和新标记（将出现在 TOC 上）？

谢谢

# c# - 所选项目未获取另一个列表框项目模板中的列表框

> ID：14751290
> 
> 赞同：1
> 
> 时间：2013-02-07T12:36:24.963
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

我有一个`PrimaryItems`列表 & foreach PrimaryItem 有一个列表。`SecondaryItems`所以我使用`ListBox`了`ItempTemplate`另一个`ListBox`。

```
<ListBox ItemsSource="{Binding PrimaryItems}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Name}"/>
                    <ListBox ItemsSource="{Binding SecondaryItems}" SelectedItem="{Binding SelectedSecondaryItem}" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

**我的视图模型代码**

```
 private List<PrimaryItem> _primaryItems;
    public List<PrimaryItem> PrimaryItems
    {
        get { return _primaryItems; }
        set { _primaryItems = value;RaisePropertyChanged(); }
    }

    //SecondaryItems list is inside in each PrimaryItem
    //private List<SecondaryItem> _secondaryItems;
    //public List<SecondaryItem> SecondaryItems
    //{
       // get { return _secondaryItems; }
       // set { _secondaryItems = value; RaisePropertyChanged(); }
    //}

    private SecondaryItem _selectedSecondaryItem;
    public SecondaryItem SelectedSecondaryItem
    {
        get { return _selectedSecondaryItem; }
        set 
        {
            _selectedSecondaryItem = value;
            if (_selectedSecondaryItem != null)
            {
                //TO DO
            }
        }
    }<br/> 
```

这是`class`结构

```
public class PrimaryItem
{
  public int Id { get; set; }
  public string Name { get; set; }
  public List<SecondaryItem> SecondaryItems{ get; set; }
}

public class SecondaryItem
{
  public int Id { get; set; }
  public string Name { get; set; }  
} 
```

我将`SelectedItem`Binding 设置为`Second ListBox`.
但我没有得到选择触发器`Second ListBox`。
我们可以`ListBox`在另一个 ListBox` 模板中使用 a 吗？
如果是，我们如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:00:56.747

首先，使用`ObservableCollection`代替，`List`因为它实现了`INotifyPropertyChanged`接口。

据我了解您的要求，`PrimaryItem`class 应该有一个 property `SecondaryItems`。因此，将其从类中删除`ViewModel`并粘贴到`PrimaryItem`类（以及`SelectedSecondaryItem`属性）：

```
private ObservableCollection<SecondaryItem> _secondaryItems;
public ObservableCollection<SecondaryItem> SecondaryItems
{
    get { return _secondaryItems; }
    set { _secondaryItems = value; RaisePropertyChanged(); }
} 
```

***编辑：***

我已经完全复制了你的情况并让它发挥作用。

*课程：*

```
public class PrimaryItem
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<SecondaryItem> SecondaryItems { get; set; }

    private SecondaryItem _selectedSecondaryItem;
    public SecondaryItem SelectedSecondaryItem
    {
        get { return _selectedSecondaryItem; }
        set
        {
            _selectedSecondaryItem = value;

            if (_selectedSecondaryItem != null)
            { // My breakpoint here
                //TO DO
            }
        }
    }
}

public class SecondaryItem
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

*视图模型：*

```
public class MyViewModel : ViewModelBase
{
    private List<PrimaryItem> _primaryItems;
    public List<PrimaryItem> PrimaryItems
    {
        get { return _primaryItems; }
        set { _primaryItems = value; RaisePropertyChanged("PrimaryItems"); }
    }

    public ErrorMessageViewModel()
    {
        this.PrimaryItems = new List<PrimaryItem>
            {
                new PrimaryItem
                    {
                        SecondaryItems =
                            new List<SecondaryItem>
                                {
                                    new SecondaryItem { Id = 1, Name = "First" },
                                    new SecondaryItem { Id = 2, Name = "Second" },
                                    new SecondaryItem { Id = 3, Name = "Third" }
                                },
                        Name = "FirstPrimary",
                        Id = 1
                    }
            };
    }
} 
```

*看法：*

```
<Window x:Class="TestApp.Views.MyView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:TestApp.ViewModels;assembly=TestApp.ViewModels"
    xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"
    Title="Title" Height="240" Width="270" ResizeMode="NoResize"
    WindowStartupLocation="CenterOwner" WindowStyle="ToolWindow">
<Window.DataContext>
    <vm:MyViewModel/>
</Window.DataContext>
<Grid>
    <ListBox ItemsSource="{Binding PrimaryItems}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Name}"/>
                    <ListBox ItemsSource="{Binding SecondaryItems}" SelectedItem="{Binding SelectedSecondaryItem}" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:41:56.617

您可以尝试使用`LinqToVisualTree`，它可以`Control`在您的应用程序中获取几乎所有 s，您只需选择您想要查找的内容（在您的情况下`ListBoxItem`），然后将其投射到您的模型中。当我需要从中获取文本时，我使用了 `TextBox`它`ListboxItem`。但它也适合您的任务。

# bash - 读取 IP 地址并检查是否有效/范围之间

> ID：14751293
> 
> 赞同：0
> 
> 时间：2013-02-07T12:36:36.697
> 
> 标签：bash, loops, if-statement, ip-address

我当前的脚本：

```
#!/usr/local/bin/bash
echo -n "Enter VPS IP address:"
read userinput
lookupip="vps $userinput"

if [[ $userinput -lt 80.* || $userinput -gt 255.* ]] #checks input is in the range
 then
   echo "Input outside acceptable range."
 else

#The grep removes all from VPS tool output except primary IP address

$lookupip | grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' | sed '1 ! d' | xargs ping -oc 1000 -Q

fi 
```

最低 IP 地址范围在 80.XXX 范围内，我尝试使用：

8*
80*
80 *..* .*

但它总是出错：

```
line 10: [[: 80.X.X.X: syntax error in expression (error token is ".X.X.X") 
```

定义小于（lt）和gt（大于）的IP地址范围的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:22:07.200

如果你只是想检查 IP 地址是否有效，你可以在 bash 中使用 ipcalc 命令来检查。

```
ipcalc -c $userinput
example
ipcalc -c 10.20.30.401
ipcalc: bad IPv4 address: 10.20.30.401 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:57:22.760

可能不是最好的解决方案，但作为脚本的快速修复应该这样做：

```
#!/usr/local/bin/bash
echo -n "Enter VPS IP address:"
read userinput
lookupip="vps $userinput"
first_octet=`echo "$userinput" | cut -d'.' -f1`

if [[ $first_octet -lt 80 || $first_octet -gt 255 ]]
 then
   echo "Input outside acceptable range."
 else

#The grep removes all from VPS tool output except primary IP address

$lookupip | grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' | sed '1 ! d' | xargs ping -oc 1000 -Q

fi 
```

已编辑：**更好的解决方案**是将所有三个 IP 地址（正在检查的一个，最低和最高）作为参数，将它们转换为 32 位数字（这就是`inet_aton()`函数所做的）并检查范围：

```
#!/usr/local/bin/bash

inet_aton ()
{
    local IFS=. ipaddr ip32 i
    ipaddr=($1)
    for i in 3 2 1 0
    do
        (( ip32 += ipaddr[3-i] * (256 ** i) ))
    done

    return $ip32
}

echo -n "Enter VPS IP address, min IP address, max IP address:"
read userinput

ip1=`echo "$userinput" | cut -d' ' -f1`
ip2=`echo "$userinput" | cut -d' ' -f2`
ip3=`echo "$userinput" | cut -d' ' -f3`

lookupip="vps $ip1"

ip=`inet_aton $ip1`
min=`inet_aton $ip2`
max=`inet_aton $ip3`

if [[ $ip -lt $min || $ip -gt $max ]]
 then
   echo "Input outside acceptable range."
 else

#The grep removes all from VPS tool output except primary IP address

$lookupip | grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' | sed '1 ! d' | xargs ping -oc 1000 -Q

fi 
```

唯一的区别是您必须输入 3 个 IP 地址，而不是像以前那样输入一个。当然，最低和最高 IP 地址可以被硬编码或从其他地方获取，但我将其与参数验证和错误检查一起留给您。

# ios - 让 XCode SVN 在更新前显示更新

> ID：14751297
> 
> 赞同：2
> 
> 时间：2013-02-07T12:36:44.443
> 
> 标签：ios, xcode, cocoa-touch, cocoa, svn

我正在使用 XCode 的**GUI** SVN 来管理存储库。我知道您可以在命令行更新之前看到更改。也可以在 GUI SVN 管理中启用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:21:29.420

我刚刚发现。

很简单，您可以按 CTRL + ALT(Option) + COMMAND + X。

在 Xcode 4.3 和更早的版本中，我们不需要按“CTRL”，但从 4.5 开始我们需要。

来源：[https ://stackoverflow.com/a/12190542/1579262](https://stackoverflow.com/a/12190542/1579262)

# php - Symfony2 - 表单错误（对于整个表单，而不是单个字段）不显示

> ID：14751303
> 
> 赞同：0
> 
> 时间：2013-02-07T12:37:08.567
> 
> 标签：php, forms, symfony, error-handling

Symfony2 Google Group 交叉发布，因为我的问题没有任何回应。

我有以下表格：

```
<form id="contact-form" action="{{ path('_contact') }}" method="post" {{ form_enctype(form) }}>
    <fieldset>
        <legend>Send us a message</legend>

        {{ form_errors(form) }}

        <div>
            <p class="label">{{ form_label(form.name) }}</p>
            {{ form_widget(form.name, { 'attr' : { 'class' : 'input' } }) }}
        </div>
        <div>
            <p class="label">{{ form_label(form.email) }}</p>
            {{ form_widget(form.email, { 'attr' : { 'class' : 'input' } }) }}
        </div>
        <div>
            <p class="label">{{ form_label(form.subject) }}</p>
            {{ form_widget(form.subject, { 'attr' : { 'class' : 'input' } }) }}
        </div>
        <div>
            <p class="label">{{ form_label(form.message) }}</p>
            {{ form_widget(form.message, { 'attr' : { 'class' : 'input', 'rows' : '8', 'placeholder' : 'Type your message here' } }) }}
        </div>
        <div class="hidden">
            <p class="label">{{ form_label(form.honeypot) }}</p>
            {{ form_widget(form.honeypot) }}
        </div>

        {{ form_rest(form) }}
    </fieldset> 
```

我不喜欢字段错误直接出现在他们的字段附近。我只想列出表单本身上方的所有错误，这就是为什么每个字段都没有错误的原因。我正在使用稍微修改过的 form_errors 主题：

```
{# src/MajorProductions/SewingDiva/SiteBundle/Resources/views/errors.html.twig #}
{% block form_errors %}
    {% spaceless %}
        {% if errors|length > 0 %}
            <div class="errors">
                <ul>
                    {% for error in errors %}
                        <li>{{
                        error.messagePluralization is null
                        ? error.messageTemplate|trans(error.messageParameters, 'validators')
                        : error.messageTemplate|transchoice(error.messagePluralization, error.messageParameters, 'validators')
                        }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %} 
```

我只是将默认设置放在 a 中`<div>`，这样我就可以更轻松地设置它的样式。

我的问题是根本没有显示表单错误列表。`<div>`如在， HTML中没有空，没有任何东西。如果我输入字段级错误的代码，例如 {{ form_errors(form.email) }}，它会显示。

我想我可以用类似的东西来解决它：

```
<div class="errors">
    {{ form_errors(form.name) }}
    {{ form_errors(form.email) }}
    .
    .
    .
</div> 
```

但这并不能真正解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:37:22.930

也许您可以尝试以下主题，它对我有用：

```
{% block form_errors %}
    {% spaceless %}
         {% if errors|length > 0 %}
              {% if compound %}
              <ul class="form-errors">
                  {% for error in errors %}
                  <li>{{ error.messageTemplate|trans(error.messageParameters, 'validators') }}</li>
                  {% endfor %}
              </ul>
              {% else %}
              <ul class="form-field-errors">
                  {% for error in errors %}
                  <li>{{ error.messageTemplate|trans(error.messageParameters, 'validators') }}</li>
                  {% endfor %}
             </ul>
            {% endif %}
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %} 
```

注意***复合***选项的使用。

您可能必须将每个字段的 error_bubbling 设置为 true

（注：这不是我写的，我不记得应该归功于哪个好心人）

# c# - 特定控制器操作的 ASP.NET MVC 4 路由

> ID：14751304
> 
> 赞同：-2
> 
> 时间：2013-02-07T12:37:09.273
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api-routing

我有以下控制器/动作：

```
public class SomeThingController
{
     IEnumerable<SomeThing> Search(DateTime minDate, DateTime maxDate, bool summaryOnly = true){}
} 
```

想法是不必指定summaryOnly 参数，但必须指定minDate 和maxDate。

有人可以提供上述路线吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:04:48.133

您可以尝试以下路线：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "Search",
            routeTemplate: "api/search/{minDate}/{maxDate}/{summaryOnly}",
            defaults: new { 
                summaryOnly = RouteParameter.Optional,  
                controller = "SomeThing", 
                action = "search" 
            }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

进而：

```
public class SomeThingController : ApiController
{
    [HttpGet]
    public IEnumerable<SomeThing> Search(DateTime minDate, DateTime maxDate, bool summaryOnly = true)
    {
        ...
    }
} 
```

然后你可以像这样请求这个端点：

```
/api/search/2013-02-08/2013-02-10/ 
```

或者：

```
/api/search/2013-02-08/2013-02-10/false 
```

# css - 使用骨架 css 框架时，边距出现在两个尺寸上

> ID：14751305
> 
> 赞同：3
> 
> 时间：2013-02-07T10:07:34.597
> 
> 标签：css, frameworks, margin, dynamic-columns, skeleton-css-boilerplate

我刚刚安装了骨架框架来体验它。我正在使用 16 列布局，当我在 iphone 上测试它时，我发现左右两边都有边距。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:09:28.713

您可以使用CSS 中的[**媒体查询**](http://www.w3.org/TR/css3-mediaqueries/)为手机和其他设备设置列边距。

Skeleton 默认在列上使用 margin-left:10px 和 margin-right:10px 所以....

**使用 Skeleton 为 iPhone 5 设置边距的典型示例是：**

```
@media (max-width: 1136px) { .column, .columns {margin:0;} } 
```

# visual-studio-2010 - Window phone sdk 未安装

> ID：14751307
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:37:16.790
> 
> 标签：visual-studio-2010, windows-phone-7

我是一名安卓开发者。现在对window phone也很感兴趣。我只是将我的问题保留[在 Window Phone 中访问 JSON 服务](https://stackoverflow.com/questions/14750484/json-services-in-window-phone/14750802#comment20643790_14750802)关于 JSON 服务的问题，并得到了很好的答案。但在开始之前。我需要安装windows sdk。我已经安装到视觉 stdio 2010 。但是当我尝试安装 windows phone sdk 时。我有错误。我已经尝试了所有 sdk 版本。但没有安装。我需要使用其他软件吗？还是我做错了。？请慢慢来

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:59:44.363

您需要先安装 WP 7.1 SDK，然后安装 7.1.1 更新，最后安装 7.8 更新

找到以下链接

[WP 7.1 SDK](http://www.microsoft.com/en-in/download/details.aspx?id=27570)

[WP 7.1.1 更新](http://www.microsoft.com/en-in/download/details.aspx?id=29233)

[WP 7.8 更新](http://www.microsoft.com/en-in/download/details.aspx?id=36474)

# winapi - 即时安装设备

> ID：14751308
> 
> 赞同：0
> 
> 时间：2013-02-07T12:37:18.327
> 
> 标签：winapi, cmd, device, printers

可以即时安装设备？？？

我说设备、打印机……，我有驱动程序和所有东西，我只想安装设备，当我关闭程序时，我想删除设备。

所以，我知道，我可以使用命令 RUNDLL32 PRINTUI.DLL,PrintUIEntry 来安装打印机......好吧，我有驱动程序和所有文件来安装打印机，但是，当我去安装时，我收到了这个错误（它是使用超级用户运行）：

![错误 ：（](../Images/d14d08693b8957b460a543588ebbf035.png)

我用来安装打印机的命令行是：

```
rundll32 printui.dll,PrintUIEntry /if /b "Test Printer" /f E:\driver\HP_P2055_default_install_v6.1_ww\hppcp613.inf /r "IP_192.168.0.4" /m "TEST_PRINTER" /Z 
```

我该如何解决这个错误？而且，我如何安装 printe ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:39:04.840

问题很可能是您没有提供驱动程序文件的路径。添加带有驱动程序文件所在位置的完全限定路径的 /l 参数。

# c# - 在c#中使用Backup类必须添加什么using语句

> ID：14751310
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:37:20.630
> 
> 标签：c#

我想使用`Backup`该类来备份我的数据库。

`Backup backup =new Backup();`

但是，我不知道这个类是在哪个命名空间中找到的。

* * *

我添加了 Microsoft.SqlServer.SmoExtended.dll 和 Microsoft.SqlServer.Smo.dll

现在它的工作！

谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:39:03.407

该类的命名空间在`Backup`这里：http: [//msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.backup (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.backup(v=sql.90).aspx)

`Namespace: Microsoft.SqlServer.Management.Smo`

`Assembly: Microsoft.SqlServer.Smo (in microsoft.sqlserver.smo.dll)`

根据您对该`using`声明不起作用的评论，您必须正确添加`.dll`参考。 `Project->Add Reference`在 vs.net 的菜单工具栏中。

# javascript - 错误'document.getelementbyid（...）'为空或不是对象

> ID：14751311
> 
> 赞同：0
> 
> 时间：2013-02-07T12:37:27.407
> 
> 标签：javascript, internet-explorer-6

我创建了两个 JavaScript 函数。

```
var a, b;

function changeTo(a, b) {
    document.getElementById(a).className = 'editborder';
    document.getElementById(b).className = 'editborder';
}
function changeToo(a, b) {
    document.getElementById(a).className = 'editborder_';
    document.getElementById(b).className = 'editborder_';
} 
```

它们由`<asp:LinkButton>`一个参数调用：

```
<asp:LinkButton ID="LinkButton7" runat="server" 
    onMouseover="changeTo('div_master');" 
    onMouseout="changeToo('div_master');" 
    Text="Edit Bg Color" CommandArgument="0" OnClick="lnkchangebg_click">
</asp:LinkButton> 
```

它在 Chrome 中运行良好，但在 IE6 中会导致以下错误：

> 错误'document.getelementbyid（...）'为空或不是对象

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:41:37.463

您的函数有两个必需的参数，而您只传递了一个。

您可以重构您的函数，以便不需要第二个参数，如下所示：

```
function changeToo(a, b) {
    document.getElementById(a).className = 'editborder_';
    if (typeof b !== "undefined") {
        document.getElementById(b).className = 'editborder_';
    }
} 
```

使用两个看起来几乎完全相同的不同功能似乎也有点笨拙。如果您更进一步，您可以将整个代码重构为：

```
function changeClass(a, strClass) {
    if (typeof a === "string") {
        document.getElementById(a).className = strClass;
    } else if (typeof a === "object" && a.length > 0) {
        for (var id in a) {
            if (a.hasOwnProperty(id)) {
                document.getElementById(id).className = strClass;
            }
        }
    } else {
        throw new Error("Invalid argument supplied in changeClass().");
    }
} 
```

现在你可以这样做：

```
<asp:LinkButton ID="LinkButton7" runat="server" 
    onMouseover="changeClass('div_master', 'editborder');" 
    onMouseout="changeClass('div_master', 'editborder_');" 
    Text="Edit Bg Color" CommandArgument="0" OnClick="lnkchangebg_click">
</asp:LinkButton> 
```

甚至：

```
<asp:LinkButton ID="LinkButton7" runat="server" 
    onMouseover="changeClass(['div_master', 'anotherElementId'], 'editborder');" 
    onMouseout="changeClass(['div_master', 'anotherElementId'], 'editborder_');" 
    Text="Edit Bg Color" CommandArgument="0" OnClick="lnkchangebg_click">
</asp:LinkButton> 
```

如果这仍然不能解决您的问题，Louis Lazaris 写了一篇关于避免Internet Explorer出现问题[的优秀文章。](http://www.impressivewebs.com/avoiding-problems-with-javascript-getelementbyid-method-in-internet-explorer-7/)`.getElementById()`

# c# - C# 将数据绑定到文本框

> ID：14751316
> 
> 赞同：1
> 
> 时间：2013-02-07T12:37:50.577
> 
> 标签：c#, asp.net, sql, data-binding, web-controls

我正在尝试将数据库行绑定到 C# 中的文本框，因此它是默认值（但仍然可以编辑文本框）。

我当前遇到的问题是文本框不允许我附加错误的数据源（System.Web.UI.WebControls.TextBox 不包含'DataSource'的定义......）

我能够成功地将数据源绑定到下拉列表，但是对文本框使用相同的代码不起作用。

```
 txtBox1.DataSource = "DataSource";
        txtBox1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:42:23.197

原因是 a`DataSource`包含多行。下拉菜单可以支持这一点，因为它将每行显示一个条目，但 TextBox 不支持它。只有一个文本字段，应该使用数据源中的哪一行？

要设置`TextBox`使用[`Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.text.aspx)属性的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:44:24.120

如果您想为文本框设置一个值，您需要做的是：

```
textBox1.Text= "MyText"; 
```

然后用户可以更改该值，并在回发时将该值用于您需要的任何内容和用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:43:36.120

您不能将 DataSource 绑定到 WebForms 中的 TextBox。您可以使用索引器将文本设置为 DataRow 中的字段。

```
`txtBox1.Text = datarow["SomeField"]` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:47:41.230

```
DataView dv = DataSource.DefaultView;

dv.RowFilter = "id=1"; // or whatever as per your need to make sure only 1 row is there
textBox1.DataBindings.Add("Text",dv,"id"); 
```

# java - 使用构造函数参数模拟类

> ID：14751321
> 
> 赞同：5
> 
> 时间：2013-02-07T12:37:55.137
> 
> 标签：java, mocking, mockito

我需要为测试上课。问题是我正在使用第三方库，其中类（UpdateManager）构造函数采用 5 个参数，即一个 java.sql.Connection 和其他是字符串。在该构造函数内部，它通过将构造函数参数作为连接传递来创建一个类实例（DataSource）。在该数据源实例中，它调用其调用存储过程的方法之一。我的问题是我通过使用模拟连接传递这 5 个参数来创建 UpdateManager 的部分模拟，但是在构造函数内部调用 DataSource 上的方法时会引发空指针异常。在我通过下面给出的数据源存根之前

```
Mockito.doNothing().when(dataSource).update(
Mockito.any(DataSource.class),  Mockito.any(ArrayList.class), Mockito.anyInt()); 
```

每次构造函数创建 DataSource 的新实例时，它仍然会抛出 NullPointException。在这种情况下，我如何在没有数据库连接的情况下模拟它，只抛出我的存根异常或 doNothing。我使用了 MOCKITO。有没有更好的解决方案使用代理模式。

您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:56:58.033

是的，代理类是解决 3rd 方类这些类型问题的一种方法。然后，您可以简单地模拟您的代理类而不是 3rd 方类，而不会产生任何影响。这种方法的缺点是您最终会使用这些额外的包装类来支持您的测试。

在这种特定情况下，添加一个 Factory 类作为代理可能对您有利，因为您对创建这些`UpdateManager`对象感兴趣

```
public class UpdateManagerFactory {

    public UpdateManager createInstance(... args...) {
        return new UpdateManager(... args...);
    }
} 
```

如果您使用 Spring 或类似的方式进行依赖注入，则可以在应用程序上下文中将此 Factory 用作单例 bean，因此需要将其设为`static`. 如果你确实想让这个 Factory 静态，你可以使用[powermockito](http://code.google.com/p/powermock/wiki/MockitoUsage13)来模拟它。

*提示：不要害怕添加代码以使您的应用程序更易于测试*

* * *

**按照您的评论进行**编辑****

 **不要为您的工厂类使用 spy()，而是模拟它

```
public void myTest() {

    Foo classUnderTest = new Foo();

    UpdateManagerFactory umf = mock(UpdateManagerFactory.class);

    UpdateManager um = mock(UpdateManager.class);

    when(umf.createInstance()).thenReturn(um);

    // perform test that will call umf.createInstance() at some point
    classUnderTest.doSomething();

    // verify + assert on "umf" and "um"

} 
```**

# joomla - 安装组件

> ID：14751324
> 
> 赞同：0
> 
> 时间：2013-02-07T12:37:59.553
> 
> 标签：joomla, joomla2.5

大家好我对我在 joomla 的项目有疑问

我尝试安装一个新组件并收到此错误

```
JFolder::create: No se pudo crear el directorio
¡Advertencia: No se pudo mover el archivo!
No se puede encontrar paquete de instalación 
```

我设置了 777 权限但不起作用。任何的想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:09:12.717

您需要的不仅仅是 1 个文件夹是可写的。在您的 Joomla 后端，转到：

**站点（顶部菜单）>>系统信息>>目录权限**

并确保它们都是可写的。如果它们是并且您仍然遇到问题，则很可能是由于文件夹所有权，在这种情况下，您很可能必须与您的主机联系。

希望这可以帮助

# jquery - jQuery 验证插件 - 检查 div 是否存在

> ID：14751325
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:38:05.807
> 
> 标签：jquery, jquery-validate

我正在制作一个表单并使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

用户必须在表单中添加至少 1 个“标签”才能对其进行验证。我使用 div 添加“标签”。这是我的代码

```
$(document).ready(function(){
$("#form").validate({
        rules: {
            tags: {
                    required: function(element) {
                        return ($('.tag').length);
                    }
                },
            name: "required",
            "checkbox[]": "required",

        },
        messages: {
            tags: "No tags found",
            name: "input name!",
            "checkbox[]": "select at least 1 category",

        }
});

}); 
```

即使 div 不幸存在，它也会给出错误。有任何想法吗？

提前致谢！树脂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:55:09.763

似乎我找到了一种方法来做到这一点。

我只是在我的 div 中添加了一个输入并改为引用它，我也改变了

```
return ($('.tag').length); 
```

对此

```
return $(".tag").length == 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:23:49.983

> 标题：jQuery 验证插件 - 检查 div 是否存在

它不起作用，因为 a`div`不是`input`元素。 [请参阅文档以了解完整的正确用法](http://docs.jquery.com/Plugins/Validation)。

# asp.net-mvc - HttpContext.Current 在 ELMAH 的 ErrorMail_Mailing 处理程序（在 Global.asax 中）中返回 null

> ID：14751326
> 
> 赞同：3
> 
> 时间：2013-02-07T12:38:09.513
> 
> 标签：asp.net-mvc, elmah, httpcontext

我们正在使用`ELMAH`我们的`MVC asp.net`应用程序。
当任何`exception`发生时`ELMAH`发送具有事件 ErrorMail_Mailing 的错误邮件时，
我正在 Global.asax 中为此事件编写处理程序，
并尝试从`HttpContext.Current.Items`变量中读取值但获取`null exception`.

任何解决方法请帮忙。

我正在应用斯科特在这里的建议：- [http://scottonwriting.net/sowblog/archive/2011/01/06/customizing-elmah-s-error-emails.aspx](http://scottonwriting.net/sowblog/archive/2011/01/06/customizing-elmah-s-error-emails.aspx) 在 global.asax.cs 我正在尝试写在事件处理程序下方，我想在其中配置错误邮件的主题行，其中包含存储在我的`HttpContext.Current.Items`

```
 protected void ErrorMail_Mailing(object sender, Elmah.ErrorMailEventArgs e)
        {               
            if (HttpContext.Current.Items["CustomerName"] != null)
            {
                e.Mail.Subject = "Error came to / " + HttpContext.Current.Items["CustomerName"] + " / Error Type: " +
                                 e.Error.Type;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:26:42.153

在 MVC 中，这将取决于您在何处设置`HttpContext.Current.Items`值，以确定它是否在 ErrorEmailEvent 中可用。请参考之前的 SO 问题 - [HttpContext.Items with ASP.NET MVC](https://stackoverflow.com/questions/1134442/httpcontext-items-with-asp-net-mvc)以获取有关正确设置或使用替代方法（如[创建自己的 ITempDataProvider](http://billrob.com/archive/2009/07/15/asp-net-mvc-without-sessionstate.aspx) ）的一些指导。

# php - Drupal 无法创建新用户，错误 101 或 324

> ID：14751330
> 
> 赞同：0
> 
> 时间：2013-02-07T12:38:13.540
> 
> 标签：php, mysql, drupal

所以我一直在尝试添加用户并尝试了一些我在网上找到的解决方案，到目前为止我还是空手而归。

我的问题如下，我似乎能够修改和编辑与数据库有关的任何和所有设置，除了用户。每次我尝试创建新用户时，都会收到 101（连接重置）或 324（连接超时）错误。

我尝试过使用 htaccess 添加更长的超时时间，我尝试过移动数据库，我什至查看了一些缓存设置。

所以我真的在这里无人问津，希望你能帮助我。:)

更新：增加 max_allowed_pa​​cket 不起作用。

更新 2：当我第一次尝试创建新用户时，它会使用完全相同的数据生成 101，之后总是会生成 324。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:53:40.403

连接超时和连接重置几乎总是由 max_allowed_pa​​cket 太小引起的。我将我的 Drupal 站点保持在 16M 左右。这是在 my.cnf 中设置的。1048576 等于 1M，这是默认设置，对于 Drupal 来说是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:18:21.657

这似乎是与 MySQL 服务器的设置相关的问题，但是由于网络托管公司不愿意帮助或协助我查找错误，我必须得出结论，我无法找到错误。因此，如果您遇到同样的问题并且 max_allowed_pa​​cket 修复对您不起作用，我建议您要么找到一家知道他们在做什么的网络托管公司，要么自己设置服务器。

# java - 调用远程 ejb 3

> ID：14751332
> 
> 赞同：0
> 
> 时间：2013-02-07T12:38:23.453
> 
> 标签：java, jboss, ejb-3.1

当我在 jboss 4.3 中调用远程 ejb 方法时，在 String 中使用参数并在 Object Serializable 中返回时，出现以下问题：

```
java.rmi.MarshalException: Failed to communicate.  Problem during marshalling/unmarshalling; nested exception is: 
    java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: sun.security.provider.certpath.AdjacencyList
    at org.jboss.remoting.transport.socket.SocketClientInvoker.handleException(SocketClientInvoker.java:127)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:658)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:141)
    at org.jboss.remoting.Client.invoke(Client.java:1858)
    at org.jboss.remoting.Client.invoke(Client.java:718)
    at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.ClientTxPropagationInterceptor.invoke(ClientTxPropagationInterceptor.java:61)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.security.SecurityClientInterceptor.invoke(SecurityClientInterceptor.java:53)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:74)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessRemoteProxy.invoke(StatelessRemoteProxy.java:107)
    at $Proxy1.getDadosPedido(Unknown Source)
    at br.com.comprafacil.sondapagamentobraspag.pedido.BraspagDAO.getDadosPedidoWS(BraspagDAO.java:476)
    at br.com.comprafacil.sondapagamentobraspag.pedido.BraspagDAO.processaPedidoNullos(BraspagDAO.java:77)
    at br.com.comprafacil.sondapagamentobraspag.process.ControlBraspagProcess.processaPedidosNullos(ControlBraspagProcess.java:53)
    at br.com.comprafacil.sondapagamentobraspag.process.SondaPagamentoBraspagProcess.execute(SondaPagamentoBraspagProcess.java:16)
    at br.com.comprafacil.sondapagamentobraspag.main.SondaPagamentoBraspag.main(SondaPagamentoBraspag.java:44)
Caused by: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: sun.security.provider.certpath.AdjacencyList
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1309)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.receiveObjectVersion2_2(JavaSerializationManager.java:245)
    at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.receiveObject(JavaSerializationManager.java:133)
    at org.jboss.remoting.marshal.serializable.SerializableUnMarshaller.read(SerializableUnMarshaller.java:120)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.versionedRead(MicroSocketClientInvoker.java:914)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:602)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:141)
    at org.jboss.remoting.Client.invoke(Client.java:1858)
    at org.jboss.remoting.Client.invoke(Client.java:718)
    at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.ClientTxPropagationInterceptor.invoke(ClientTxPropagationInterceptor.java:61)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.security.SecurityClientInterceptor.invoke(SecurityClientInterceptor.java:53)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:74)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessRemoteProxy.invoke(StatelessRemoteProxy.java:107)
    at $Proxy1.getDadosPedido(Unknown Source)
    at br.com.comprafacil.sondapagamentobraspag.pedido.BraspagDAO.getDadosPedidoWS(BraspagDAO.java:476)
    at br.com.comprafacil.sondapagamentobraspag.pedido.BraspagDAO.processaPedidoNullos(BraspagDAO.java:77)
    at br.com.comprafacil.sondapagamentobraspag.process.ControlBraspagProcess.processaPedidosNullos(ControlBraspagProcess.java:53)
    at br.com.comprafacil.sondapagamentobraspag.process.SondaPagamentoBraspagProcess.execute(SondaPagamentoBraspagProcess.java:16)
    at br.com.comprafacil.sondapagamentobraspag.main.SondaPagamentoBraspag.main(SondaPagamentoBraspag.java:44)
    at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:74)
    ... 14 more
Caused by: java.io.NotSerializableException: sun.security.provider.certpath.AdjacencyList
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:391)
    at java.lang.Throwable.writeObject(Throwable.java:649)
    at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:391)
    at java.lang.Throwable.writeObject(Throwable.java:649)
    at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
    at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.sendObjectVersion2_2(JavaSerializationManager.java:120)
    at org.jboss.remoting.serialization.impl.java.JavaSerializationManager.sendObject(JavaSerializationManager.java:95)
    at org.jboss.remoting.marshal.serializable.SerializableMarshaller.write(SerializableMarshaller.java:120)
    at org.jboss.remoting.transport.socket.ServerThread.versionedWrite(ServerThread.java:861)
    at org.jboss.remoting.transport.socket.ServerThread.processInvocation(ServerThread.java:642)
    at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:407)
    at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:174)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:41:58.457

`NotSerializableException`说明了一切。远程接口中的所有参数和返回类型是否都实现了 Serialazable？

# eclipse - 阻止 Eclipse 在引号内的新行上关闭和打开引号

> ID：14751338
> 
> 赞同：3
> 
> 时间：2013-02-07T12:38:47.597
> 
> 标签：eclipse, newline, quotes, eclipse-wtp

我总是这样定义多行变量：

```
var query = "\
    SELECT \
        this AS that \
        CASE something \
    FROM table \
    WHERE something \
" 
```

但是在Eclipse 3.8.0 (WTP)`Eclipse`的默认设置中，每次我按回车键或粘贴几行时，Eclipse 都会添加如下引号：`JavaScript Editor``Web Tools Platform`

```
var query = "\
    SELECT \
        this AS that \
        CASE something \
    FROM table \" +
        "    JOIN pasted.line1 \" +
        "    JOIN pasted.line2 \" +
        "    JOIN pasted.line3 \" +
        "    JOIN pasted.line4 \" +
        "WHERE something \
" 
```

使缩进烦人和标记不符合我个人的口味。

我可以在不禁用其他魔法技巧的情况下禁用这个特定的“功能”吗？

# sql-server - 执行存储过程内联，类似于 UDF？

> ID：14751340
> 
> 赞同：0
> 
> 时间：2013-02-07T12:38:56.223
> 
> 标签：sql-server, tsql, stored-procedures, sql-server-2008-r2, user-defined-functions

我有一个类似于这样的结构：

```
Company
(
  CompanyID
  CompanyLastTransactionNo
)

Transaction
(
  TransactionID
  CompanyID
  CompanyTransactionNo
  TransactionAmount
) 
```

那么我有一个程序可以执行以下操作：

```
INSERT INTO Transaction
(CompanyID, CompanyTransactionNo, TransactionAmount)
SELECT 
   CompanyID,
   fn_GetNextCompanyTrancationNo(CompanyID),
   TransactionAmount
FROM
   LoadingTable

CREATE FUNCTION [dbo].[fn_GetNextCompanyTrancationNo]
(
 @CompanyID CHAR(10)
)
RETURNS INT
AS
BEGIN
    DECLARE @trxno int
           DECLARE @trxnoNew int

    SELECT @trxno = CompanyLastTransactionNo
    FROM dbo.Company
    WHERE ID = @CompanyID;

    SET @trxnoNew = @trxno + 1;

    UPDATE dbo.Company
    SET CompanyLastTransactionNo = @trxnoNew
    WHERE CompanyID = @CompanyID;

    RETURN @trxno

END 
```

编译时我得到：

> 消息 443，级别 16，状态 15，过程 fns_fn_GetNextCompanyTrancationNo，第 19 行 在函数中无效使用副作用运算符“UPDATE”。

呃。完全忘记了这一点。

所以这是我的问题，有没有办法使用存储过程作为内联函数，类似于这个？也许这是一个不好的方法？

我有点卡在我的表上，或者我会使用一个序列来获得下一个数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:46:08.283

这是一个坏主意。具有副作用的 UDF 的问题是您无法控制在 select 语句的上下文中何时/如何调用它。

考虑以下：

```
CREATE TABLE t (id INT )
INSERT INTO t (id) values (1)
INSERT INTO t (id) values (2)
INSERT INTO t (id) values (3)
INSERT INTO t (id) values (4)
INSERT INTO t (id) values (5)
INSERT INTO t (id) values (6)
INSERT INTO t (id) values (7)
INSERT INTO t (id) values (8)
INSERT INTO t (id) values (9)
INSERT INTO t (id) values (10)

SELECT id, dbo.myUDF() FROM t WHERE t.id <= 3 and dbo.myUDF() = @someValue 
```

myUDF() 被调用了多少次？10？3? 13？还是20？

具体来说，SQL 语言标准中没有规定应用谓词的顺序。

# java - InMemoryDirectoryServer，处理请求（绑定、修改等）

> ID：14751343
> 
> 赞同：0
> 
> 时间：2013-02-07T12:39:10.597
> 
> 标签：java, ldap, unboundid-ldap-sdk

我正在使用 UnboundID SDK 中的 InMemoryDirectoryServer。如何处理来自 ldap 客户端的 ldap 请求？

这是我找到的代码（在[How to get DN and password with UnboundID](https://stackoverflow.com/questions/12596708/how-to-get-dn-and-password-with-unboundid)）：

```
public class MyLDAPListenerRequestHandler extends LDAPListenerRequestHandler {

@Override
public LDAPListenerRequestHandler newInstance(
        LDAPListenerClientConnection arg0) throws LDAPException {
        System.out.println("New Instance.");
        LDAPConnectionOptions option = new LDAPConnectionOptions();
        LDAPConnection connection = new LDAPConnection(option, "yourIPadress", yourport);
        System.out.println("Connected to : " + connection.getConnectedAddress()+ " " + connection.getConnectedPort());

    return this;
}

@Override
public LDAPMessage processBindRequest(int arg0, BindRequestProtocolOp arg1,
        List<Control> arg2) {
    System.out.println(arg1.getBindDN());
    System.out.println(arg1.getSimplePassword());
    return null;
} 
```

这是捕获绑定请求并在下处理它的正确方法吗

```
public LDAPMessage processBindRequest(int arg0, BindRequestProtocolOp arg1,
        List<Control> arg2) { 
```

功能？处理后，我是否必须手动发送绑定到 InMemoryDirectoryServer 实例？

你好，我们又见面了，

基于：http: [//sourceforge.net/p/ldap-sdk/discussion/1001257/thread/796c129d](http://sourceforge.net/p/ldap-sdk/discussion/1001257/thread/796c129d)

在我看来，可以修改 InMemoryRequestHandler 源并更改它回复 ldap 请求的方式（搜索、修改、...）。

对于别名取消引用，我修改了

> for (最终 SearchResultEntry e : entryList)

循环函数：

> 公共同步 LDAPMessage processSearchRequest(final int messageID, final SearchRequestProtocolOp request, final List controls) {

使用此代码：

```
for (final SearchResultEntry e : entryList)
{

    // flag which is set if for loop finds an alias entry.
    boolean aliasEntryFound = false;
    // aliasedObjectName reference to real entry.
    String aliasedObjectName = null;

    // Check that dereferencing is turned on.
    if (aliasDeref)
    {            
        // check if entry is an alias entry. 
        for (String objectClass : e.getAttributeValues("objectClass"))
        {
            if (objectClass.equalsIgnoreCase("alias"))
            {
                // Put on flag.
                aliasEntryFound = true;                    
                // Get real entry path. 
                aliasedObjectName = e.getAttributeValue("aliasedObjectName");

            }
        }

    }

    // If entry e is actually alias entry, then ...
    if (aliasEntryFound && aliasedObjectName != null)
    {
        // Build new SearchRequest query with aliasedObjectName as real DN.
        final SearchRequestProtocolOp newRequest = new SearchRequestProtocolOp(
                aliasedObjectName, request.getScope(), request.getDerefPolicy(),
                request.getSizeLimit(), request.getTimeLimit(),
                false, request.getFilter(), request.getAttributes());
        // Call recursively processSearchRequest() with new request value.
        processSearchRequest(messageID, newRequest, controls);

    }
    else
    {
            try {
                connection.sendSearchResultEntry(messageID, e, e.getControls());
            } catch (final LDAPException le) {
                Debug.debugException(le);
                return new LDAPMessage(messageID, new SearchResultDoneProtocolOp(le.getResultCode().intValue(), le.getMatchedDN(),
                        le.getDiagnosticMessage(), StaticUtils.toList(le.getReferralURLs())), le.getResponseControls());
            }
    }
}
...
} 
```

在 InMemoryRequestHandler 类的开头某处，我添加了：

```
private boolean aliasDeref = true; 
```

我只是将其用作标志来控制是否要取消引用别名。

我的代码只是如何对搜索请求进行别名取消引用的示例。使用自定义请求处理程序，只能提醒 ldap 请求，而不是 ldap 回复或结果。

让我知道是否有更好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:01:03.110

UnboundID LDAP SDK for Java 提供了一个 LDAPListener 框架，它允许您创建自己的代码来接受来自客户端的 LDAP 请求并可以向它们提供响应。当 LDAPListener 收到请求时，它使用 LDAPListenerRequestHandler 处理请求并生成结果。

内存目录服务器使用 InMemoryRequestHandler 执行此处理，但您可以创建自己的请求处理程序实现来执行您想要的任何操作（例如，CannedResponseRequestHandler 绑定地返回对任何请求的固定响应），并且您可以拥有一个请求处理程序在委托给另一个请求处理程序之前进行一些处理（例如，AccessLogRequestHandler 和 LDAPDebuggerRequestHandler 实现拦截请求并将有关它们的信息写入日志文件，然后再将它们转发到另一个请求处理程序，然后在返回之前拦截并记录有关响应的信息返回客户端；相反，ProxyRequestHandler 通过 LDAP 对另一个目录服务器进行处理）。

如果您想提供自定义处理，那么您应该创建自己的 LDAPListenerRequestHandler 子类（并且正如您所假设的，processBindRequest 方法可用于执行绑定操作的处理）。如果该请求处理程序完成了操作的所有处理，那么您可以自己创建并返回响应。如果您只需要在将请求转发到真正执行处理的其他设备之前拦截请求并捕获有关它的信息，那么您应该委托给另一个请求处理程序。LDAP SDK 中已有这两个示例，因此您可以将它们用作模型来创建您需要的内容。

# sql - 用于参数化查询的 Sql 服务器索引

> ID：14751346
> 
> 赞同：3
> 
> 时间：2013-02-07T12:39:16.393
> 
> 标签：sql, sql-server, indexing, sql-server-2012

我想为 sql 查询创建最佳索引。用户可以在 UI 上选择选项，从中构建查询。这是表和查询：

```
CREATE TABLE [dbo].[MyTable](
    [Id] [nvarchar](32) NOT NULL,
    [SomeKey] [int] NOT NULL,
    [Col1] [nvarchar](max) NULL,
    [Col2] [nvarchar](max) NULL,
    [NumCol1] [int] NOT NULL,
    [NumCol2] [int] NOT NULL,
    [BitCol1] [bit] NOT NULL,
    [BitCol2] [bit] NOT NULL,
    [Created] [datetime] NOT NULL
CONSTRAINT [PK_dbo.MyTable] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

查询在这里（SP）：

```
ALTER PROCEDURE [dbo].[MyTable] 
@SomeKey INT,@Col1 BIT,@Col2 BIT,@BitCol1 BIT,@BitCol2 BIT,
@NumCol1 INT,@NumCol2 INT,@offset INT,@take INT
AS
DECLARE @sql NVARCHAR(MAX), @paramlist  nvarchar(4000) 
SET @sql = 'SELECT [Id],[SomeKey],[Col1],[Col2],[NumCol1],[NumCol2],[BitCol1],[BitCol2], FROM MyTable WHERE SomeKey = @SomeKey'
IF @NumCol1 IS NOT NULL SELECT @sql = @sql + ' AND NumCol1 = @NumCol1'
IF @NumCol2 IS NOT NULL SELECT @sql = @sql + ' AND (NumCol2 > @NumCol2)'
IF @Col1 IS NOT NULL SELECT @sql = @sql + ' AND (Col1 = '''' OR Col1 IS NULL)'
IF @Col2 IS NOT NULL SELECT @sql = @sql + ' AND (Col2 = '''' OR Col2 IS NULL)'
IF @BitCol1 IS NOT NULL SELECT @sql = @sql + ' AND BitCol1 = 1'
IF @BitCol2 IS NOT NULL SELECT @sql = @sql + ' AND BitCol2 = 1'
SELECT @sql = @sql + ' ORDER BY Created OFFSET @offset ROWS FETCH NEXT @take ROWS ONLY'
SELECT @paramlist = '@SomeKey INT, @Col1 INT, ....'
EXEC sp_executesql @sql, @paramlist, @SomeKey, @Col1, @Col2, ... 
```

希望你明白这一点。我正在数据库中构建查询字符串并执行它。如果我发送 param Col1 = true，这意味着我想要 db 中的所有空 Col1。从应用程序我确保我准备好所有参数。我希望休息是不言自明的（但请随时在评论中提出任何问题）！

如何为此表/查询创建索引，以避免索引扫描或类似的“慢”搜索？而且，我只是一名网络开发人员，所以这个（高级）索引对我来说是新事物！Db 是 SQL Server 2012。

**更新：使用场景**
表的最大行数为 100k 到 10m-20m。不会更新行。插入将在应用程序运行时（并非始终运行）每 5-10 分钟或更长时间批量完成 500 个（sqlbulkcopy c# 类）。每周一次 - 两行将被删除（基于 SomeKey col）。
应用程序不会有很多用户（可能同时很少，最多 10 个），所以不要期望每秒有很多查询（每 5-10 秒 1 个查询？），但我希望它快（以毫秒为单位） ，而不是秒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:37:09.640

指数是一种权衡。它必须根据表中的数据更改进行更新，因此要小心具有大量 INSERT 和 UPDATE 的表。

在 SQL Server Management Studio 中，您可以看到查询的执行情况。查询菜单下有相应的选项。您将能够看到在查询执行期间花费最多的时间。

其他选项是从菜单工具 > 数据库引擎优化顾问访问的优化顾问。它将提出要创建的索引。

无论您在 WHERE 之类的搜索中使用什么变量，都可以很好地被索引。

索引不是会杀死你的东西。您可以使用它来找到最佳解决方案，并且您可以在生产过程中进行更改而不会出现重大问题。不幸的是，您是否需要索引不仅取决于表设计，还取决于该表中的数据量、数据多样性和您在表上执行的操作的性质。

**更新：**

什么可以帮助你：

[MSDN 查询性能](http://msdn.microsoft.com/en-us/library/ms190610%28v=sql.105%29.aspx)

[MSDN 查询调优](http://msdn.microsoft.com/en-us/library/ms176005%28v=sql.105%29.aspx)

关于您的执行计划，我建议您阅读有关[了解嵌套循环连接的部分](http://msdn.microsoft.com/en-us/library/ms191318%28v=sql.105%29.aspx)

索引扫描通常是从给定列中检索大量数据的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:53.300

最好的解决方案实际上取决于我们正在处理的资源 - 表包含多少行，我们有多少可用内存/空间，使用动态参数的频率，以及表上的典型使用模式是什么（更多阅读比写？）。

我的赌注是添加`SomeKey`总是被引用的索引，然后尝试添加，`Created`因为总是使用排序。您还可以通过使`bit`列过滤静态来改进逻辑（它们始终是一种方式或另一种方式 - 您知道所有可能的值），然后将它们添加到 和 之间的索引`SomeKey`中`Created`。

最后，您可以尝试将`INT`列添加为键的*包含列*，以查看添加的索引大小是否因磁盘读取次数减少而发生偏移。

这是初学者，因为一切都取决于您的典型工作量。做相应的测试。

# websocket - 无法使用 Mosquitto Broker javascript 客户端建立 websocket 连接

> ID：14751347
> 
> 赞同：0
> 
> 时间：2013-02-07T12:39:16.960
> 
> 标签：websocket, mqtt

我在我的 Windows 机器上运行 MQTT 服务器 (mosquitto)。该服务在端口号 1883 上运行。

从 mosquitto.org 下载 mosquitto.js 文件并进行如下调用当我调试时，我看到结果“connection.readyState == 0”。如果我错过了什么，请帮助我。我正在使用 chrome 和 safari 最新版本来测试它。提前致谢。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/JavaScript" src="./js/mosquitto-1.1.js"></script> 

<title>publisher</title>

</head>

<body>
    <table align="center">
        <tr>
            <td>
                <h1>Publisher</h1>
                <table>
                    <tr>
                        <td><textarea rows="5" cols="25" id="txtMsg"></textarea></td>
                    </tr>
                    <tr>
                        <td align="center"><input type="button" value="post"
                            onclick="javaScript:postMessage();" /></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
<script type="text/javascript">
function postMessage()
{

    var postVal = document.getElementById('txtMsg').value;
    var t = new Mosquitto();
    t.connect('ws://localhost',100000);
    t.publish('inbox/msgrec',postVal,0,0);

} 
```

我是否必须安装码头服务器或使用 node.js 来使用 mosquitto javascript 客户端进行连接，或者是否有必要在我的 mosquitto 安装中对配置文件进行任何更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:08:50.047

Mosquitto 不直接支持 WebSockets。您需要其他东西来完成并将携带 MQTT 数据包（由例如 mosquitto.js 生成）的 WebSocket 连接转换为原始 MQTT。

test.mosquitto.org 的服务器有 lighttpd 作为 web 服务器运行，mod_websockets 提供 WebSockets 支持。可以使用这种方法连接到 ws://test.mosquitto.org/mqtt。您需要自己创建一个类似的解决方案。Apache 也有可以执行此操作的 websocket 模块，或者您可以使用例如 libwebsockets 创建自己的 websocket 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:41:20.040

难道不应该

```
t.connect('ws://localhost:1883',100000); 
```

?

# php - Wordpress 21 searchform.php 漏洞

> ID：14751348
> 
> 赞同：0
> 
> 时间：2013-02-07T12:39:19.060
> 
> 标签：php, wordpress, eval

我的 Wordpress 21 searchform.php 被黑客入侵并制造了邪恶`eval(base64_decode("Hi I have hacked your site. Haha"))` 我很快从我的 Nginx 访问日志中发现了这一点，找到了通过 HTTP 协议执行的脚本，然后在第一行退出，现在停止脚本生成大量垃圾邮件来自我服务器的邮件。

我的问题是这最初是怎么发生的？黑客是否通过表单发布了一些 POST 或 GET 变量，`searchform.php`因为他们知道在某个阶段它会使用`eval()`函数执行，因此包含类似`fopen`和`fwrite`作为字符串的一部分？

如果是这样，它`eval()`位于何处以及如何处理？

我`searchform.php`的完全改写了

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:30:34.093

主题的最后一个更新版本是 TwentyTwelve： [http ://wordpress.org/extend/themes/twentytwelve](http://wordpress.org/extend/themes/twentytwelve)

关于你网站的漏洞，文件夹的授权是好的还是你把所有的东西都放在了777里？

检查此链接：[http ://www.orangecopper.com/blog/recommended-file-and-folder-permissions-for-your-wordpress-blog-installation/](http://www.orangecopper.com/blog/recommended-file-and-folder-permissions-for-your-wordpress-blog-installation/)

# javascript - YUI 数据表块在页面上输入其他组件的事件

> ID：14751356
> 
> 赞同：1
> 
> 时间：2013-02-07T12:40:06.403
> 
> 标签：javascript, dom-events, yui-datatable

我通过按回车从组合框中选择一个选项时遇到问题。存在两个页面，其中一个页面使用 YUI 数据表，而另一个没有。我只有在带有 YUI 数据表的页面上才有这个问题。经过一番挖掘，我确信 YUI 数据表会导致页面上所有其他组件的输入键事件出现问题。如果我从页面中删除 YUI 数据表，它可以正常工作。

我将 datatable-beta.js 用于 yui-data 表，我们无法将其替换为较新的版本。与这个库有关的东西太多了，所以公司不想要它。

由于这个问题，我不能使用 enter 在简单的“html 选择标签”中选择一个选项。

我们如何解决这个问题？有人在 YI 图书馆遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:14:43.040

您可以覆盖页面中的方法，这样您就不需要更改原始脚本。

只需像下面那样覆盖它（删除 e.keyCode==13），您对该页面的输入问题就会得到解决。

```
<script type="text/javascript>
YAHOO.widget.DataTable.prototype._onDocumentKeydown=function(e,oSelf)
{
  if((e.keyCode==27))
  {
        oSelf.cancelEditorData();
  }

}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:20:22.953

我注释掉了一些代码块，以找出导致此问题的代码。我通过这种方式消除了很多代码部分并达到了这一行：

```
YAHOO.util.Event.addListener(document,"keydown",this._onDocumentKeydown,this); 
```

这一行位于 datatable-beta.js 中，我不知道他们为什么要这样做。他们正在处理所有 dom 元素的 keydown 事件。这就是为什么我不能按回车键从组合框中选择一个选项。Combobox 只是一个示例，我的意思是我们不能对页面上的任何组件使用 enter。Handler方法的代码如下：

```
YAHOO.widget.DataTable.prototype._onDocumentKeydown=function(e,oSelf)
{
      if((e.keyCode==27))
      {
            oSelf.cancelEditorData();
      }
      if(e.keyCode==13)
      {
            YAHOO.util.Event.stopEvent(e);
            oSelf.saveEditorData();
      }
} 
```

他们正在处理转义并输入字符。我不想评论这些行。它可能会影响其他代码块。我确实找到了问题，但您仍然可以提出解决方案。因为，即使我发现了问题，我仍在寻找在不更改原始脚本的情况下使用回车键的最佳方式。

# .net - TeeChart .Net - 图表墙上的网格带

> ID：14751360
> 
> 赞同：0
> 
> 时间：2013-02-07T12:40:12.943
> 
> 标签：.net, teechart

我使用 TeeChart 控件生成了一个 3D 图表。我对图表有以下问题。

1.  我尝试将网格带控件放在图表上，它在图表的后墙上工作正常。我想在图表的左侧和底墙上有一种网格带效果（即一个带白色和另一个带蓝色）。Teechart 可以做到这一点吗？

2.  当我生成气泡图并将指针样式设置为“抛光球体”时，不会为图表上非常小的气泡生成工具提示。

3.  当我生成气泡图并将指针样式设置为“抛光球体”时，图例中显示了某些值，但图例中不显示它们对应的颜色。就我而言，我在图表上绘制了 4 个气泡，当我使用“抛光球体”时，图例中不显示 2 个气泡的颜色。

4.  图例符号和文字的间距不是很准确。它会自动为某些文本设置较小的间距，而为某些文本设置更多间距。

请帮助解决这些问题。

问候

努普尔莫迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:54:12.527

> 我尝试将网格带控件放在图表上，它在图表的后墙上工作正常。我想在图表的左侧和底墙上有一种网格带效果（即一个带白色和另一个带蓝色）。Teechart 可以做到这一点吗？

恐怕目前是不可能的。我已将其添加为带有编号 [TF02016509] 的未来请求，以考虑将其包含在即将发布的 TeeChartFor.Net 版本中。

> 当我生成气泡图并将指针样式设置为“抛光球体”时，不会为图表上非常小的气泡生成工具提示。

我已经重现了该问题，并将其添加到带有编号 [TF02016510] 的错误列表报告中。我们将尝试将其修复到即将发布的 TeeChartFor.Net 维护版本。

> 当我生成气泡图并将指针样式设置为“抛光球体”时，图例中显示了某些值，但图例中不显示它们对应的颜色。就我而言，我在图表上绘制了 4 个气泡，当我使用“抛光球体”时，图例中不显示 2 个气泡的颜色。

我无法使用最新版本的 TeeChartFor.net 内部版本号 4.1.2012.01310 重现它。能否请您告诉我们您使用的是哪个版本的 teechart？如果您不使用最新版本，我建议您下载评估版，您可以在下一个链接中找到：http: [//www.steema.com/download/net](http://www.steema.com/download/net)

> 图例符号和文字的间距不是很准确。它会自动为某些文本设置较小的间距，而为某些文本设置更多间距。

我无法使用下一个代码重现上一个版本的 TeeChartFor.Net 中的问题：

```
Steema.TeeChart.Styles.Bubble bubble1;       
private void InitializeChart()
{
    bubble1 = new Bubble(tChart1.Chart);
    double y = 0;
    Random rnd = new Random();
    for (int i = 0; i < 10; i++)
    {
        y = rnd.Next(100);
        if (i > 0)
        {
            bubble1.Add(i, y, y / i);
        }
        else
        {
            bubble1.Add(i, y, y/y);
        }
    }

    bubble1.Pointer.Style = PointerStyles.PolishedSphere;
} 
```

代码生成了下一个图像：![在此处输入图像描述](../Images/7cacdaba0503a5aaca4e9e6a9fb52789.png)

您能否告诉我们您的问题是否出现在图像中？

谢谢，

# android - ArrayAdapter 和 ListView

> ID：14751365
> 
> 赞同：0
> 
> 时间：2013-02-07T12:40:39.073
> 
> 标签：android, listview, android-arrayadapter

我有这段代码，它必须获取一个列表视图并用数组适配器填充它：

```
public class news extends ListActivity {
public String[] titoli = new String[99];
public String[] descrizioni = new String[99];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new connection().execute();
    System.out.println("prova1");
}

public class connection extends AsyncTask<Void, Void, Void> {
    public Void doInBackground(Void... params) {
        System.out.println("prova2");
        // All static variables
        final String URL = "http://www.messedaglia.it/index.php/archivio-news?format=feed&type=rss";
        // XML node keys
        final String ITEM = "item"; // parent node
        final String TITLE = "title";
        final String DESC = "description";
        Element e = null;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList nl = doc.getElementsByTagName(ITEM);

        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(TITLE, parser.getValue(e, TITLE));
            map.put(DESC, parser.getValue(e, DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
        }
        System.out.println("prova3");
        for (int c = 0; c < nl.getLength(); c++) {
            e = (Element) nl.item(c);
            titoli[c] = parser.getValue(e, TITLE); // name child value
            descrizioni[c] = parser.getValue(e, DESC);
        }
        return null;
    }

    public void onPostExecute() {
        System.out.println("prova4");
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(news.this,
                android.R.layout.simple_list_item_1, titoli);
        System.out.println("prova5");
        ListView listView = (ListView) news.this
                .findViewById(android.R.id.list);
        listView.setAdapter(adapter);
    }
     }
 } 
```

日志在此处显示**空指针异常**（我的代码的第 33 行）：

```
listView.setAdapter(adapter); 
```

日志：

```
02-07 13:38:36.020: E/AndroidRuntime(13803): FATAL EXCEPTION: main
02-07 13:38:36.020: E/AndroidRuntime(13803): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.messedagliavr.messeapp/com.messedagliavr.messeapp.news}: java.lang.NullPointerException
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.os.Looper.loop(Looper.java:137)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at java.lang.reflect.Method.invoke(Method.java:511)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at dalvik.system.NativeStart.main(Native Method)
02-07 13:38:36.020: E/AndroidRuntime(13803): Caused by: java.lang.NullPointerException
02-07 13:38:36.020: E/AndroidRuntime(13803):    at com.messedagliavr.messeapp.news.onCreate(news.java:33)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.Activity.performCreate(Activity.java:5206)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
02-07 13:38:36.020: E/AndroidRuntime(13803):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-07 13:38:36.020: E/AndroidRuntime(13803):    ... 11 more 
```

大多数人说要添加 setContentView()。我删除了它，因为添加它我得到这个错误：

> 错误：java.lang.RuntimeException：您的内容必须有一个 id 属性为“android.R.id.list”的 ListView

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:50:09.243

您缺少设置主布局

```
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
     setContentView(R.layout.main);    <----------------here
     new connection().execute();
     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, titoli);
ListView listView = (ListView) findViewById(R.id.list);
listView.setAdapter(adapter);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:51:42.063

如日志：

> NullPointerException 02-07 13:38:36.020：E/AndroidRuntime(13803)：
> 在 com.messedagliavr.messeapp.news.onCreate(news.java:33)

因为`titoli`数组是空的。您正在使用 AsyncTask 获取`titoli`数组中的元素，然后只需移动您的适配器代码`onPostExecute`方法

并使用

```
ListView listView = (ListView) findViewById(android.R.id.list); 
```

代替

```
ListView listView = (ListView) findViewById(R.id.list); 
```

获取参考， 如果您正在使用，则必须在 xml 布局中`ListView`声明 ListView id`android:id="@android:id/list"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T12:49:52.837

这是因为您的组件上没有设置布局。首先你需要打电话`setContentView(R.layout.my_great_layout)`，然后打电话才有意义`findViewById`。

确保你的布局中有一个`ListView`with `android.R.id.list`id：

```
 <ListView
      android:id="@android:id/list"
  ..... 
```

# ruby-on-rails - 将html类传递给options_for_select中的选项不起作用Rails 2.3.9

> ID：14751369
> 
> 赞同：2
> 
> 时间：2013-02-07T12:41:01.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我正在开发 Rails 2.3.9 应用程序。我需要将一个类传递给选项。我正在做的方式是

```
<%= select(:resporg, "hresporg_#{row_id}",options_for_select(["Item11",["Item 2", {:class => 'has-versions'}]]), {}, {:multiple => true})%> 
```

**输出**

```
<select id="resporg_hresporg_1" name="resporg[hresporg_1][]" multiple="multiple">
<option value="Item11">Item11</option>
<option value="classhas-versions">Item 2</option>
</select> 
```

如果您检查上述输出，则该类将作为值出现。关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:52:00.927

据此，[_](http://apidock.com/rails/v2.3.8/ActionView/Helpers/FormOptionsHelper/options_for_select)

```
['display','value',:class => 'option_class'] 
```

会产生

```
<option value="value" class="option_class">display</option> 
```

所以在你的情况下，我会试试这个：

```
["Item 2", "Item2", :class => 'has-versions'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:44:33.557

由于限制，我必须手动执行此操作。这[对](http://apidock.com/rails/v2.3.8/ActionView/Helpers/FormOptionsHelper/options_for_select)rails >= 3.0.0 有效

在模板.html.erb

```
<select style="width:160px !important;" id="resporg_hresporg_1" name="resporg[hresporg_1][]" multiple="multiple">
      <%= opts %>
</select> 
```

在帮手

```
def opts
    str = ''.html_safe
    ['Item1','Item2'].each { |val| str << content_tag(:option, val, :value => val,:class => val.eql?('Item2') ? "MyClass" : nil) }
    str.html_safe
end 
```

# highcharts - 如何强制重新计算高图表轴上的缩放比例

> ID：14751372
> 
> 赞同：2
> 
> 时间：2013-02-07T12:41:07.737
> 
> 标签：highcharts

我在 highcharts 中使用 series.setVisible() 来显示和隐藏选定的系列。发生这种情况时，有时轴不会重新缩放。有没有办法告诉图表根据图表中的系列强制重新调整轴的比例。我已经尝试过chart.redraw api，但这并没有。

# ios - 如何根据我放入 UITextbox 的文本量来更改 UICollectionView 单元格的垂直大小？

> ID：14751374
> 
> 赞同：0
> 
> 时间：2013-02-07T12:41:11.860
> 
> 标签：ios, xcode, ios6, uicollectionview

我希望有可变高度的 UICollectionView 单元格，具体取决于我放入通过情节提要定义的 UItextbox 中的文本量。我尝试了谷歌搜索的一些选项，但没有任何效果。

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:38:32.727

您需要找到带有字体的 NSString 的大小。[这里的例子](https://stackoverflow.com/questions/455553/what-is-nsstring-sizewithfontforwidthlinebreakmode-good-for)

这将为您提供一个 CGSize，您可以使用它来调整视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:55:27.647

有一些方法可以根据它们的**内容**`UILabel`了解or的大小。我建议在方法请求单元格高度时询问它的大小之前计算它。`UITextView`**`UICollectionViewDelegate's`**

# c# - Excel-DNA 中指定的 .chm 文件无法在 Excel 中打开

> ID：14751376
> 
> 赞同：1
> 
> 时间：2013-02-07T12:41:13.047
> 
> 标签：c#, excel-2010, excel-dna

我正在使用以下属性（[如此处所述](https://stackoverflow.com/questions/8172591/doing-documentation-using-excel-dna/8173953#8173953)）尝试在 excel 中显示我的 UDF 的帮助文件：

```
 [ExcelFunction(HelpTopic="MyHelp.chm!102")] 
```

不幸的是，当我单击“有关此功能的帮助”链接时，什么也没有发生。如果我使引用无效，如下所示：

```
 [ExcelFunction(HelpTopic="MyHelpInvalid.chm!102")] 
```

我从 Excel 中收到一个弹出窗口，提示“帮助引用无效”，如果我删除标签，我会收到一个弹出窗口，提示“没有可用的帮助”，所以我知道这个属性被正确读取。

我的帮助文件与我的 .xll 文件位于同一目录中，并且我在 Windows 7 机器上使用 MS Office 2010（64 位）。插件中的其余功能正常工作。任何人都可以帮我找到导致此问题的 id 吗？

另外，出于好奇，有人知道帮助文件名后面的“！102”是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:35:58.823

我想你已经回答了你自己的问题。102 指的是帮助TopicId。我认为您看到错误是因为该主题未在您的帮助文件中定义。

您可以在此处阅读更多内容：[确定主题 id 以在 CHM 文件中打开它](https://stackoverflow.com/questions/3440868/help-file-topic-id) 也许：[如何从 C# 中的 chm 文件中获取主题列表](https://stackoverflow.com/questions/9391424/how-to-get-a-list-of-topics-from-a-chm-file-in-c-sharp?lq=1)

# php - Websocket 或长轮询（使用 AJAX）使用 PHP 检测数据库中的更改

> ID：14751379
> 
> 赞同：11
> 
> 时间：2013-02-07T12:41:20.283
> 
> 标签：php, jquery, mysql, ajax, websocket

## 我的研究

我花了几个小时在 Google 和 SO 上研究 Websockets 和 Long Polling，它们的优缺点等，但还没有找到一个**明确**的解决方案。

我已经阅读了更多关于这个主题的文章，而不是我曾经研究过的任何文章，包括这些（仅举几例）：

1.  [Ajax/PHP - 我应该使用一个长时间运行的脚本还是轮询？](https://stackoverflow.com/questions/2960475/ajax-php-should-i-use-one-long-running-script-or-polling)
2.  [使用 jQuery 和 PHP 进行长轮询](https://stackoverflow.com/questions/6955554/long-polling-using-jquery-and-php)
3.  [更改投票数据库 - Ajax/jQuery](https://stackoverflow.com/questions/9282687/poll-database-for-changes-ajax-jquery)

我还研究了以下内容：

1.  [http://cometdproject.dojotoolkit.org/](http://cometdproject.dojotoolkit.org/)
2.  [http://socket.io/](http://socket.io/)

## 这个问题的理由

乍一看，这个问题可能看起来是重复的或过于本地化，但是，经过我的广泛研究，我无法收集足够的信息来做出明智的决定走哪条路线。

因此，我希望你们中的一个天才会愿意花时间回答这个问题，并与我们其他人分享你的精彩知识:-)

## 我的问题

简而言之，我的问题确实在标题中；如果我试图检测对数据库记录的更改，使用 websocket (socket.io) 还是长轮询 (jQuery 和 AJAX) 更好？

如果答案是 websockets，那么请包括一个基本的例子，因为这些真的让我很困惑，即使是谷歌上的所有文章......

此外，可能还有其他更好或更适合的方法，如果是这样，请分享它们，我愿意接受任何建议！

* * *

## 附加信息

这可能不会影响最终答案，但以防万一，我想解释一下我要检测的内容以及可能需要考虑的一些事项。

实际上，我正在尝试检测登录会话的任何更改。换句话说，如果数据库中的用户令牌已更改**或**他们的超时已用完，那么他们已被注销，我想显示一条消息通知他们这一点。

*我认为这不会产生影响，但最终的代码需要适合 SSL。使用 AJAX 很容易，但我不熟悉 websockets 方面。*

***最初，我编写了一个系统，该系统使用 javascript 从服务器检索超时，然后在`timeout`几秒钟内，它会轮询服务器以查看超时是否`timeout`已过期。我认为这是完美的，直到我意识到它只有在客户端计算机上的时间与服务器上的时间匹配时才有效。因此我不得不放弃这个:-(***

无论如何，我希望我的问题不要太本地化，我期待听到您的意见和答案。请不要浪费您的时间来帮助我编写 PHP 数据库代码或 jQuery AJAX 代码，除非它有复杂的部分，因为我有能力自己编写这部分，并且堆栈上还有很多其他需要您的帮助比我多。如果它们是更好的解决方案，我对您的意见和/或如何使用 websockets 实现这一点更感兴趣:-)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:03:03.850

这是我见过的关于长轮询和 WebSocket API 的最佳比较：
[http ://www.websocket.org/quantum.html](http://www.websocket.org/quantum.html)

如上文章所述，WebSocket API 远优于长轮询（或任何其他伪双向通信），但缺点是浏览器支持仍然不完全（IE 终于在 IE10 开始支持 WebSocket API） .

因此，如果您正在寻找一个完整的双向通信解决方案，请在 WebSocket API 可用时使用它，并在它不可用时回退到 Ajax 长轮询或您喜欢的任何彗星方法。

要回答您的问题，如果您只是偶尔进行服务器端/数据库查询（“偶尔”一词是相对的并且需要在您的系统上进行测试），那么简单的 Ajax 请求应该没问题。但是，如果您每隔 10 秒或更短时间就向服务器发送请求，那么使用 WebSocket API 绝对是理想的选择。

要回答您的最后一个问题，SSL 100% 可用于 WebSocket API。只需使用 wss 协议而不是标准 ws 协议，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T01:28:20.493

您在部分中写道“......我正在尝试检测对数据库记录的更改......”。websockets 中没有任何东西可以检测数据库的变化；那不是它的用途。）

在我看来，一种经济的实现方式是让更改代理（在您的情况下是注销）在更改时通知侦听器，而不是以某种方式监视以检测该更改。

我的意思是数据库被一些特定的脚本操作改变了。我会考虑扩展这些操作中的每一个以触发 websocket 事务。

# java - 将 PostGIS 与 ormLite 一起使用

> ID：14751386
> 
> 赞同：0
> 
> 时间：2013-02-07T12:41:48.287
> 
> 标签：java, jdbc, postgis, ormlite

我将 ormlite 与 jdbc 连接到 postgresql 数据库。我的数据结构是预定义的，包含一个称为几何的 Postgis 数据类型。此数据类型可以包含 GIS 应用程序的不同几何结构（点、线串、多边形等）。本机 Postgis 可以将此数据类型转换为 geoJson 或任何其他字符串类型的 gis 相关格式。

当我直接将 ormLite 与 Postgis（作为字符串）一起使用时，它给了我一个二进制格式。所以我想使用 postgis 函数将这种二进制格式转换为 geoJson、KML。

在 SQL 中，它看起来像这样：

```
select ST_AsGeoJson(geometrycolumn) from table; 
```

或者

```
update table set geometrycolumn = ST_GeomFromGeoJSON('{"type":"Point","coordinates":[-5.5,7.2]}') 
```

在模型中，此几何列应作为字符串访问（读/写）。

我尝试使用 ormlite 持久化器，但这为时已晚。此时，使用持久化器（通过`resultToSqlArg`或`parseDefaultString`），查询已发送到数据库，我无法编辑从 postgres 请求的列。[Mrog](https://stackoverflow.com/users/1664198/mrog)有一个与此相关的问题的[解决方案](https://stackoverflow.com/a/12378846/2050564)，但也使用了持久化器。

我还尝试用 jdbc 覆盖特定的类。但不知道如何“注入” sql-functions。

或者我可以使用原始 SQL 查询。但是我需要使用表中的许多其他属性。而且我必须对数据库使用两次查询（一次用于常规属性，一次用于几何列）。而且我的感觉是不使用原始的 sql 语句。

另一种解决方案是在数据库端创建一个 geoJson 列。ormLite 可以从中读取并使用 sql-trigger 将其写入原始列。但这是一个糟糕的解决方案。

我真的必须创建一个自定义数据类型并在服务器端进行转换而不是在数据库上进行吗？还是有使用本机数据库功能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T13:51:04.553

尽管设置略有不同，但我也试图解决这个问题。我一直专注于从 MSSQL 中获取 WKT 中的多边形。

看到我只使用矩形，我决定制作一个矩形数据类型。由于[javaToSqlArg](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/BaseFieldConverter.html#javaToSqlArg%28com.j256.ormlite.field.FieldType,%20java.lang.Object%29) ，这在插入和更新上工作正常，因为我的实现正在返回

```
return String.format("geometry::STGeomFromText('POLYGON ((%d %d, %d %d, %d %d, %d %d, %d %d))',0)",etc...) 
```

哪个叶子选为问题。我发现解决这个问题的唯一方法有点脏。

我在表中创建了另一列作为几何类型的基于字符串的表示。然后我添加了一个触发器以使它们保持同步。当一个更新另一个得到转换和更新。

如果我没有将数据库几何函数用于相交等。我可能只是将字段设为文本。

可能还值得一看：[WKB4J](http://wkb4j.sourceforge.net/)它可能能够读取从 ormlite 返回的二进制数据并使它们更加有形。

# android - 如何在 MapLongClickListener 上弹出窗口？

> ID：14751389
> 
> 赞同：0
> 
> 时间：2013-02-07T12:41:57.087
> 
> 标签：android, google-maps, popupwindow

我想在长按地图时制作一个弹出窗口，这是我的代码和 popup.xml：但是 popupwindow 没有出现，并且`Log`告诉窗口正在显示。`Constructor`此外， and函数有很多版本，`showAtLocation`我不太清楚它们之间的区别。有人能在我的代码中找到错误吗？非常感谢！

```
private void init()
{
    mGMap = ((MapFragment)  getFragmentManager().findFragmentById(R.id.map))
            .getMap();
    if( mGMap != null )
    {
        mGMap.setMyLocationEnabled(true);

        mGMap.getUiSettings().setMyLocationButtonEnabled(true);
        mGMap.getUiSettings().setRotateGesturesEnabled(true);
        mGMap.getUiSettings().setCompassEnabled(true);
        mGMap. setOnMapLongClickListener (new GoogleMap.OnMapLongClickListener(){
            @Override
            public void onMapLongClick(LatLng point) {
                // TODO Auto-generated method stub
                View popup_view = getLayoutInflater().inflate(R.layout.popup, null);
                PopupWindow popupWindow = new PopupWindow(popup_view);              
                View parent =  ((MapFragment)  getFragmentManager().findFragmentById(R.id.map)).getView();
                WindowManager windowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
                @SuppressWarnings("deprecation")
                int xoff = windowManager.getDefaultDisplay().getWidth() / 2 - popupWindow.getWidth() / 2;
                // 使其聚集
                popupWindow.setFocusable(true);
                // 设置允许在外点击消失
                popupWindow.setOutsideTouchable(false);
                popupWindow.showAtLocation(parent, Gravity.CENTER, xoff, 0);
                if(popupWindow.isShowing()){
                    Log.i(mainActivity.toString(), "pop up is showing");
                }
                popupWindow.update();
            }
        });
    } 
```

以下是我的 popup.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
    <TextView
        android:id="@+id/location_time_tag"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/loc_date" />

    <ListView
        android:id="@+id/listview_diary"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_alignParentLeft="true"
        android:smoothScrollbar="true"
        android:layout_below="@id/location_time_tag">
    </ListView>
    <EditText
        android:id="@+id/add_note"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/listview_diary"
        android:layout_alignParentLeft="true"
    />    
    <Button 
        android:id="@+id/add_text_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/add_note"
        android:layout_alignParentLeft="true"
        android:text="写日记"/>
    <Button 
        android:id="@+id/del_text_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/add_text_btn"
        android:layout_alignParentRight="true"
        android:text="删日记"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:13:51.003

正如日志所说，您的弹出窗口已打开意味着您为窗口添加了错误的上下文。这意味着窗口已打开，但在某些其他活动或其他类中。您应该测试将正确的上下文应用于窗口。

# php - 选择菜单 html 值

> ID：14751392
> 
> 赞同：0
> 
> 时间：2013-02-07T12:42:01.690
> 
> 标签：php, html

如何为选择菜单选项添加 html 值：

```
<select name="symbol">
  <option>select</option>
  <option value="<img src="start.jpg"">start</option>
  <option value="<img src="end.jpg"">end</option>
</select> 
```

我希望发布值显示图像。

我读到这个：[如何在选择列表中添加图像](https://stackoverflow.com/questions/2965971/how-to-add-a-images-in-select-list) 但我想发送图像值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:45:47.160

在值内使用单引号而不是双引号...

```
<select name="symbol">
  <option>select</option>
  <option value="<img src='b.jpg'>">start</option>
  <option value="<img src='a.jpg'>">end</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:47:29.153

如果您使用 PHP 或一些类似的服务器端代码处理帖子，您应该只传递对图像的引用。任何标签都可以使用服务器端代码输出。例如：

```
<select name="symbol">
    <option>select</option>
    <option value="start.jpg">start</option>
    <option value="end.jpg">end</option>
</select> 
```

然后通过执行以下操作来处理此问题：

```
echo '<img src="'.$_POST['symbol'].'" />'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:47:54.703

您必须使用单引号和关闭标签。试试这个，

```
<select name="symbol">
          <option>select</option>
          <option value="<img src='start.jpg'>">start</option>
          <option value="<img src='end.jpg'>">end</option>
</select> 
```

# c++ - 生成 LLVM C++ API 代码作为后端

> ID：14751403
> 
> 赞同：14
> 
> 时间：2013-02-07T12:42:30.203
> 
> 标签：c++, linux, llvm, x86-64

[在线 LLVM 演示](http://llvm.org/demo/)页面有一个选项可以从源代码生成 LLVM C++ API 代码作为后端。但是，该演示页面现在已禁用。我想知道我们如何使用可用的 LLVM 工具自己做到这一点。

我尝试了以下

```
clang++ -c -emit-llvm input.cpp -o input.ll
llc -march=cpp -o input.ll.cpp input.ll 
```

这给出了以下错误

```
llc: error: invalid target 'cpp'. 
```

我正在使用 LLVM/Clang 3.2 版。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T22:04:57.753

~~在构建 LLVM 时，必须在配置期间启用 LLVM C++ 后端。它在`configure`(autotools) 构建中默认启用，但在 Windows 上构建时不会在 CMake 构建中启用。您可以通过在使用 CMake 进行配置时设置适当的标志来启用它。请参阅[此页面](http://llvm.org/docs/CMake.html)了解更多信息。~~

引用：

> **LLVM_TARGETS_TO_BUILD:STRING** 以分号分隔的要构建的目标列表，或 all 用于构建所有目标。区分大小写。对于 Visual C++，默认为 X86。在其他情况下，默认为全部。示例：-DLLVM_TARGETS_TO_BUILD="X86;PowerPC"。

 ~~**更新**

由于`version 3.9`CppBackend 不再是有效目标。他们已从代码中删除，因为生成的代码存在一些问题。

[检查这个提交](https://github.com/llvm-mirror/llvm/commit/257fabb18605265a79397d35dd79a3973760ffaf)

```
Remove bit-rotten CppBackend.

This backend was supposed to generate C++ code which will re-construct
the LLVM IR passed as input. This seems to me to have very marginal
usefulness in the first place.

However, the code has never been updated to use IRBuilder, which makes
its current value negative -- people who look at the output may be
steered to use the *wrong* C++ APIs to construct IR.

Furthermore, it's generated code that doesn't compile since at least
2013.

Differential Revision: http://reviews.llvm.org/D19942

git-svn-id: https://llvm.org/svn/llvm-project/llvm/trunk@268631 91177308-0d34-0410-b5e6-96231b3b80d8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-19T14:46:58.137

可悲的是，这在更新的 LLVM 版本中似乎不再可能。相关的提交消息很好地解释了它。

正如您在以下提交中看到的那样， [删除位腐烂的 CppBackend](https://github.com/llvm-mirror/llvm/commit/257fabb18605265a79397d35dd79a3973760ffaf)，生成的代码会显示问题。

```
commit 257fabb18605265a79397d35dd79a3973760ffaf
Author: ---
Date:   Thu May 5 14:35:40 2016 +0000

Remove bit-rotten CppBackend.

This backend was supposed to generate C++ code which will re-construct
the LLVM IR passed as input. This seems to me to have very marginal
usefulness in the first place.

However, the code has never been updated to use IRBuilder, which makes
its current value negative -- people who look at the output may be
steered to use the *wrong* C++ APIs to construct IR.

Furthermore, it's generated code that doesn't compile since at least
2013.

Differential Revision: http://reviews.llvm.org/D19942

git-svn-id: https://llvm.org/svn/llvm-project/llvm/trunk@268631 91177308-0d34-0410-b5e6-96231b3b80d8 
```~~

# jquery - 引导轮播，自动循环然后停止

> ID：14751406
> 
> 赞同：1
> 
> 时间：2013-02-07T12:42:34.173
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在使用 twitter 引导程序和轮播功能。标记如下所示。

我正在尝试在页面加载时实现某些目标，1\. 轮播从第一张幻灯片开始并保持在那里（比如说 500 毫秒）。2\. 然后它移动到幻灯片 2 并永远停止。

只有 2 张幻灯片，用户可以使用箭头在它们之间移动，但这不应触发幻灯片的持续循环。（如果困难，这不是太重要）。

我试过改变轮播控件，但我不太明白：http: [//twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

从：

```
<script type="text/javascript">
$('.carousel').carousel({
        interval: 3000
})
</script> 
```

至：

```
<script type="text/javascript">
                  $('.carousel').carousel({
                  interval: false
                  }).carousel(1).delay('500');
</script> 
```

当我执行后一个选项时，一旦我按下箭头，旋转木马就会连续滚动，但完全不正常。

我已经包含了我的轮播标记。希望这可以帮助。比我的小豌豆脑洞大的人有什么想法或指点吗？

```
<div id="myCarousel" class="carousel slide">
                  <div class="carousel-inner">
                  <div class="item active">
                        <a href="#" class="featurette">
                        <img class="featurette-image pull-right" width="200" height="200" src="en_200x200.png">
                        <h2 class="featurette-heading">Heading 1</h2><p class="lead muted">Strapline 1</p>
                        </a>
                    </div>
                    <div class="item">
                        <a href="#" class="featurette">
                        <img class="featurette-image pull-right" width="200" height="200" src="cloud.png">
                        <h2 class="featurette-heading">Heading 2</h2>
                        <p class="lead muted">Strapline 2</p>
                        </a>
                    </div>

                  </div>
                  <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                  <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
                  <hr>

                </div><!-- /.carousel --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:37:50.653

你可以试试这个，不是 100% 确定它会起作用，但值得一试。

此事件应在第一张幻灯片“滑动”后触发，然后应“暂停”轮播。

```
$('#myCarousel').bind('slid', function() {
    $(this).carousel('pause');
});​ 
```

从这里的信息拼凑而成：

[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T06:18:54.053

推特引导 v3.0.3

```
// initialize carousel
$('.carousel.slide').carousel();

// stop sliding the carousel after clicking next/prev button
$(document).on('slide.bs.carousel', '.carousel.slide', function () {
    $(this).carousel('pause');
}); 
```

[jsfiddle](http://jsfiddle.net/zBU25/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T06:55:53.110

我得到了这个的解决方案：P open boostrap.js goto line number 275 看起来像

```
this.options.pause == 'hover' && this.$element
  .on('mouseenter', $.proxy(this.pause, this))
  .on('mouseleave', $.proxy(this.cycle, this)) 
```

现在将其设置为 true 并且 carousal 将暂停

```
this.options.pause ==true 
```

# c# - 如何在 ICollectionView 上使用 INotifyPropertyChanged 事件？

> ID：14751408
> 
> 赞同：0
> 
> 时间：2013-02-07T12:42:37.167
> 
> 标签：c#, wpf, entity-framework, inotifypropertychanged

我的场景如下：

我正在使用 EF4 并使用 linq。我有一个绑定到 ICollectionView 的数据网格（因为我使用过滤），如下所示：

```
view = CollectionViewSource.GetDefaultView(lstOrdsRlsd);
                if (lstOrdsRlsd.Count > 0)
                {
                    dgRecords1.ItemsSource = view;
                } 
```

其中 lstOrdsRlsd 是一个可观察的集合。

我的问题是：

当数据库中的某些内容发生更改（无论是添加新行还是更改一条记录的某些属性等）时，我需要刷新数据网格。

我试过`datagrid.Items.Refresh()`哪个没有用。在这种情况下我可以使用 INotifyPropertyChanged 吗？有人可以提供一些有关如何实现此功能的示例代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:46:38.370

数据库中的新行不会自动反映在您的应用程序中。您需要从数据库手动请求新项目并将它们添加到您的集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:07:36.453

您可以尝试使用 DbSet<>.Local 属性。这是一个可观察的集合，其中包含您从数据库上下文中查询的所有行。

```
public ObservableCollection<T> DbSet<T>.Local 
```

因此，如果您稍后进行任何查询，并且返回更多行，则 DbSet<>.Local 集合将为您提供 INotifyCollectionChanged。:)

因此，下一步是确保 EF 获取新行。您可以使用 Daniel Hilgarth 回答中的任何内容来实现这一点。

# maven - 找不到符号构造函数 Service(URL,QName,WebServiceFeature[])

> ID：14751415
> 
> 赞同：4
> 
> 时间：2013-02-07T12:42:55.807
> 
> 标签：maven, intellij-idea, webservices-client

我正在尝试使用父 maven 模块 ism-maven 制作一个 maven 模块 web_service_client。该模块包含生成的 WS 类。我没有改变任何东西。我正在使用 IntelliJ IDEA 11.1.2。

这是我的 web_service_client 的 pom.xml。

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>ism-maven</artifactId>
        <groupId>sk.tuke.ism</groupId>
        <version>1.0</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>web_service_client</artifactId>

</project> 
```

在我运行 web_service_client 的 maven 编译后，我得到了这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project web_service_client: Compilation failure: Compilation failure:
[ERROR] \Users\Marek\Dropbox\ism-maven\web_service_client\src\main\java\sk\tuke\ism\webclient\Service1.java:[46,8] cannot find symbol
[ERROR] symbol  : constructor Service(java.net.URL,javax.xml.namespace.QName,javax.xml.ws.WebServiceFeature[])
[ERROR] location: class javax.xml.ws.Service
[ERROR] \Users\Marek\Dropbox\ism-maven\web_service_client\src\main\java\sk\tuke\ism\webclient\Service1.java:[54,8] cannot find symbol
[ERROR] symbol  : constructor Service(java.net.URL,javax.xml.namespace.QName,javax.xml.ws.WebServiceFeature[])
[ERROR] location: class javax.xml.ws.Service
[ERROR] \Users\Marek\Dropbox\ism-maven\web_service_client\src\main\java\sk\tuke\ism\webclient\Service1.java:[62,8] cannot find symbol
[ERROR] symbol  : constructor Service(java.net.URL,javax.xml.namespace.QName,javax.xml.ws.WebServiceFeature[])
[ERROR] location: class javax.xml.ws.Service
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我在这里找到了一些关于这个错误的文章，但我是这个领域的新手，我无法解决这个问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:16:58.380

生成的代码似乎使用 JAX-WS 2.2。您可以尝试覆盖默认版本并在 pom.xml 中设置 target=2.1 或 target=2.0：

```
 <executions>
                <execution>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                    <configuration>
                        <target>2.1</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T16:01:44.547

我遇到了完全相同的问题，franpas 的回答帮助我解决了这个问题。这是我创建类并正确编译的解决方案。我还在 linux 上使用本地 maven 3.1 安装。

```
 <plugin>
            <groupId>org.jvnet.jax-ws-commons</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                    <configuration>
                        <target>2.1</target>
                        <verbose>true</verbose>
                        <!-- Fix naming resolution due to ChangeOrderResponse duplicate stanza -->
                        <args>
                            <arg>-B-XautoNameResolution</arg>
                        </args>
                        <wsdlDirectory>src/main/wsdl</wsdlDirectory>
                        <wsdlFiles>
                            <wsdlFile>changeorder.wsdl</wsdlFile>
                        </wsdlFiles>
                        <packageName>com.whatever.service
                        </packageName>
                    </configuration>
                </execution>
            </executions>

            <dependencies>
                <dependency>
                    <groupId>com.sun.xml.ws</groupId>
                    <artifactId>jaxws-tools</artifactId>
                    <version>2.2.8</version>
                </dependency>

                <dependency>
                    <groupId>javax.xml.ws</groupId>
                    <artifactId>jaxws-api</artifactId>
                    <version>2.2.11</version>
                </dependency>
            </dependencies>

        </plugin> 
```

# php - 以 JSON 格式发送数据时使用 php 返回的数据

> ID：14751416
> 
> 赞同：1
> 
> 时间：2013-02-07T12:42:55.717
> 
> 标签：php, javascript, jquery, ajax, json

我目前是 JSON 的新手，我认为它可能非常有用，下面是我用来将 JSON 对象发送到服务器端 php 脚本的数据格式

```
 // CREATE JSON OBJECT
 var EmailEntity = { "MailMembers":memberecipients , "email":"me@mail.com" } ;

               // send to php server script
        $.ajax({
        type: "POST",
        url: "engine/send-mail.php",
        dataType: "JSON",
        data: {JsonEmailEntity: JSON.stringify(EmailEntity)},
        success: function(Databack){
        alert(Databack);
         }
            }); 
```

然后对于服务器端（PHP）

```
 // get json element and extract contents
           $Json = $_POST['JsonEmailEntity'];
           $EmailEntities = json_decode($Json,true);

           $email = $EmailEntities['email'];

           echo $email; 
```

问题是 Javascript 不会提醒任何返回的任何返回值，即使我用 firebug 检查它表明响应实际上已发送但没有发出警报。想知道Javascript错误在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:49:09.377

我怀疑它可能与这条线有关

```
{JsonEmailEntity: JSON.stringify(EmailEntity)}, 
```

您不需要对该变量进行字符串化，您可以简单地传递`{ JsonEmailEntity: JsonEmailEntity }`，jQuery 将相应地转换它。

话虽如此，由于您是在服务器端对其进行解码，因此我不确定该错误是否与它有关。

在 Firebug 中，如果您转到**控制台**选项卡，然后单击请求，从那里单击**参数**选项卡，您可以看到发送到服务器的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:45:58.230

改变：

```
echo $email; 
```

至：

```
echo json_encode($email); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:46:03.837

`dataType`调用时的属性`jQuery.ajax()`是服务器**返回**的数据的类型，而不是发送给它的数据的类型。

> 数据类型（默认：智能猜测（xml、json、脚本或 html））
> 
> 类型：字符串
> 
> 您期望从服务器返回的数据类型。...

jQuery AJAX 调用需要一个本身就是 JSON 的响应，但您只是输出一个字符串。jQuery 隐式尝试将其解析为 JSON，但失败，因此执行错误回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:47:53.347

改变这个：

```
echo $email; 
```

进入这个：

```
echo json_encode($email); 
```

它应该工作。目前您只是在回显数据，但它不是 JSON 格式的。

**添加：**

为了将来参考，您也可以这样做：

```
$email['email'] = $EmailEntities['email']; //or "some@email.com";
$email['username'] = "some_user";

echo json_encode($email); 
```

然后在Javascript中：

```
success: function(Databack){
    alert("Your username is " + Databack.username + " and your email is " + Databack.email);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:51:56.877

更改您的 JavaScript ajax 代码：

```
 // CREATE JSON OBJECT
       var EmailEntity = { "MailMembers":memberecipients , "email":"me@mail.com" } ;

   // send to php server script
        $.ajax({
        type: "POST",
        url: "engine/send-mail.php",
        data: {JsonEmailEntity: JSON.stringify(EmailEntity)},
        success: function(Databack){
        alert(Databack);
      }
    }); 
```

因为如果您将 dataType 指定为 JSON。如果返回类型为 json，将执行成功函数。

或更改您的 PHP 代码如下：

改变：

```
echo $email; 
```

至：

```
echo json_encode($email); 
```

# windows - 从动态文件夹结构复制文件 [Windows]

> ID：14751418
> 
> 赞同：1
> 
> 时间：2013-02-07T12:42:57.840
> 
> 标签：windows, batch-file, xcopy

我正在尝试创建一个计划任务，该任务将每天早上运行以将文件从一个文件夹复制到另一个。那么问题来了，

源文件夹的名称是动态的，并以每日日期开始（即“06-Feb-13”）。如何创建一个能够确定每日日期并找到该文件夹​​的批处理文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:06:05.280

```
@echo off
For /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
For /f "tokens=1-2 delims=/:" %%a in ('time /t') do (set mytime=%%a%%b)
echo %mydate%_%mytime% 
```

这个[链接](https://stackoverflow.com/a/203116/1064610)会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:53:21.770

如果它是您要查找的最新文件夹，那么您可以创建一个按创建日期排序的目录列表，然后对最后一个条目进行操作。如果您知道您需要的目录将始终是最近创建的，则无需抓取和比较实际日期。

```
@echo off
setlocal
for /f %%I in ('dir /t:c /o:d /b "c:\path\to\containing\dir\*."') do set dir=%%I
copy "%dir%\*.*" "c:\destination\folder" 
```

请注意，我正在做`dir "path\*."`而不是`dir "path\*.*"`. 将`*.`匹配目录但不匹配文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:18:38.030

这是我为该日期提出的最终解决方案：

```
@echo off

REM -- Convert number to 3 character month--

set v=%date:~4,2%
SET map=01-Jan;02-Feb;03-Mar;04-Apr;05-May;06-Jun;07-Jul;08-Aug;09-Sep;10-Oct;11-Nov;12-Dec
CALL SET v=%%map:*%v%-=%%
SET v=%v:;=&rem.%

set y=%date:~12,4%
set d=%date:~7,2%

set "mydate=%d%-%v%-%y%"

echo %mydate% 
```

# jquery - jQuery Mobile 自动完成 JSON 数据

> ID：14751424
> 
> 赞同：0
> 
> 时间：2013-02-07T12:43:08.480
> 
> 标签：jquery, jquery-mobile, jsonp

我正在尝试让 jQuery Mobile 自动完成功能正常工作，但它只能在外部数据上成功。当我尝试使用自己的 JSON 数据时，它失败了。

使用下面 js 中的注释行，它适用于外部数据，但不适用于我自己的数据。

js：

```
$( document ).on( "pageinit", "#mainPage", function() {
$( "#autocomplete" ).on( "listviewbeforefilter", function ( e, data ) {
    var $ul = $( this ),
        $input = $( data.input ),
        value = $input.val(),
        html = "";
    $ul.html( "" );
    if ( value && value.length > 2 ) {
        $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
        $ul.listview( "refresh" );
        $.ajax({
            type : 'GET',
    //url: "http://gd.geobytes.com/AutoCompleteCity",
            url: "data/specs_search.php",
    dataType: "jsonp",
            data: {
                q: $input.val()
            }           
  })
        .then( function ( response ) {
            $.each( response, function ( i, val ) {
                html += "<li>" + val + "</li>";
            });
            $ul.html( html );
            $ul.listview( "refresh" );
            $ul.trigger( "updatelayout");
        });
    }
}); 
```

});

specs_search.php JSON 输出：

```
["Rota, AN, Spain","Rotan, TX, United States","Rothbury, MI, United States","Rothesay, NB, Canada","Rothsay, MN, United States","Rothschild, WI, United States","Rothville, MO, United States","Rothwell, QL, Australia","Rotonda West, FL, United States","Rotorua, BP, New Zealand","Rottenburg, BW, Germany","Rotterdam Junction, NY, United States","Rotterdam, ZH, Netherlands","Barcarrota, EX, Spain","Brothers, OR, United States","Crothersville, IN, United States","Croton Falls, NY, United States","Croton on Hudson, NY, United States","Croton, OH, United States","Crotone, CA, Italy"] 
```

HTML：

```
<p>After you enter <strong>at least three characters</strong> the autocomplete function will show all possible matches.</p> 
<ul id="autocomplete" data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Find a specification..." data-filter-theme="b"></ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:21:09.390

尝试用 dataType: json 替换 dataType: jsonp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T13:33:45.090

自动完成发送唯一的回调 id。您将需要用它来包装您的 json 数据。

```
jQuery191003769553452730179_1370870891109(["London Mills, IL, United States","London, AR, United States","London, EN, United Kingdom","London, KY, United States","London, OH, United States","London, ON, Canada","London, TX, United States","London, WV, United States","Londonderry, NH, United States","Londonderry, OH, United States","Londonderry, VT, United States","East london, EC, South Africa","New London, CT, United States","New London, IA, United States","New London, MN, United States","New London, MO, United States","New London, NC, United States","New London, NH, United States","New London, OH, United States","New London, PA, United States"]); 
```

# cakephp - Windows 2003 服务器上的本地路径的 IIS 6 奇怪行为

> ID：14751427
> 
> 赞同：0
> 
> 时间：2013-02-07T12:43:17.230
> 
> 标签：cakephp, iis, web-applications, iis-7, iis-6

我有一个需要指出的网站：`inetpub\wwwroot\cakephp\app\webroot\`

如果我将“**默认网站**”指向该目录，我的 Web 应用程序将完美运行。

现在，由于我想在同一台计算机上添加更多站点，我将“**默认网站**”指向`inetpub\wwwroot\`，并将我的 Web 应用程序 (cakephp) 的具体文件夹指向上一个路径`inetpub\wwwroot\cakephp\app\webroot\`。

当我这样做时，我注意到它甚至没有`inetpub\wwwroot\cakephp\app\webroot\`像应该执行的那样执行位于相反内部的 index.php 文件。只有在直接访问站点的根目录时才会这样做。

为了澄清它：

*   `www.myweb.com/cakephp/`执行`inetpub\wwwroot\cakephp\app\webroot\index.php`

*   `www.myweb.com/cakephp/actionName/`不执行**_**`inetpub\wwwroot\cakephp\app\webroot\index.php`

为什么会这样？为什么当我向 URL 添加任何参数时它无法识别给定的路径？它尝试列出文件夹内容...

谢谢。

![在此处输入图像描述](../Images/f80402237ba150002e2bdd7381be47b8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:04:39.000

你有没有试过这个：

```
http://www.myweb.com/cakephp/index.php/Controllername/ 
```

例如：

```
http://www.myweb.com/cakephp/index.php/pages/home/ 
```

如果这有效，*则*“URL 重写”不起作用。

URL 重写在 IIS 上不能开箱即用，但可以使用文档中的说明进行配置：

[http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts)

但是，您的设置可能需要与文档略有不同，因为您已将网站安装在子目录中

# cakephp - CakePHP 2 : Ceeram 实现 CakePDF 插件

> ID：14751428
> 
> 赞同：1
> 
> 时间：2013-02-07T12:43:17.473
> 
> 标签：cakephp, cakephp-2.x

我正在尝试实现 Ceeram 设计的 CakePDF 插件。

我正在使用 CakePHP 2，我在 windows vista 上使用 wamp 在本地工作。我按照自述文件中的所有内容进行操作，但在某些时候遇到了困难。

我首先想做的是使用 WkHtmlToPdf 引擎将 HTML 链接转换为 PDF。我看到很多人在让它工作时遇到问题，所以我将在以下不同的步骤中详细介绍。

* * *

## 第 1 步：Ceeram 的 CakePdf 插件

[我在https://github.com/ceeram/CakePdf](https://github.com/ceeram/CakePdf)下载了插件 我将包含的文件夹提取到 app/Plugin/CakePdf

* * *

## 第 2 步：引导程序

我添加了以下几行 - app/Config/bootstrap.php ：

```
CakePlugin::load('CakePdf', array('bootstrap' => true, 'routes' => true));

Configure::write('CakePdf', array(
    'engine' => 'CakePdf.WkHtmlToPdf'
    ),
    'orientation' => 'portrait',
    'download' => true
)); 
```

* * *

## 第 3 步：控制器

我创建了我的控制器“InvoicesController.php” - app/Controller/InvoicesController.php：

类 InvoicesController 扩展 AppController {

```
 public $components = array('RequestHandler');

    public function view($id = null) {

        $this->Invoice->id = $id;

        if (!$this->Invoice->exists()) {
            throw new NotFoundException(__('Invalid invoice'));
        }

        $this->pdfConfig = array(
            'orientation' => 'portrait',
            'filename' => 'Invoice_' . $id
            );

        $this->set('invoice', $this->Invoice->read(null, $id));
    }
} 
```

* * *

## 第 4 步：查看

我在我的视图文件夹中创建了一个 pdf 文件夹，并在 app/View/Invoices/pdf/view.ctp 中创建了 view.ctp。

* * *

## 第 5 步：布局

我在布局文件夹中创建了一个 pdf 文件夹并创建了 app/View/Layouts/pdf/default.ctp

* * *

就是这样。在我看来，我无法从 URL 制作 PDF 文件。虽然我不得不提到我是 OOP 和 CakePHP 的新手，所以如果你能告诉我如何完成这项工作，我将非常感激。我相信它会对其他人有所帮助，因为有很多像我这样的新手想要这样做，但因为这都是为高级程序员准备的，我们无法弄清楚如何将这些部分组合在一起。

非常感谢您的理解和帮助！

[每当有一个新的答案可以改进它时，这个帖子都会被修改]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:04:31.907

您需要添加 RequestHandler 组件，并浏览到 localhost/invoices/view/1.pdf

看起来我忘了在自述文件中添加 RequestHandler 组件。

同样对于 WkHtmlToPdf，您需要告诉它在哪里可以找到它，并且由于您在 Windows 上，因此默认位置肯定不适合您。在 Windows 上安装后，您可以使用 Configure::write('CakePdf.binary', 'C:\Program Files\wkhtmltopdf\wkhtmltopdf.exe') 设置位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T21:49:38.057

您在 app/config/routers.php 中缺少此代码

路由器::parseExtensions(); Router::setExtensions(array('json', 'xml', 'rss', 'pdf'));

详情见：http: [//www.dereuromark.de/2014/04/08/generating-pdfs-with-cakephp/](http://www.dereuromark.de/2014/04/08/generating-pdfs-with-cakephp/)

# linux - 将信号捕获到进程组

> ID：14751430
> 
> 赞同：5
> 
> 时间：2013-02-07T12:43:25.417
> 
> 标签：linux, bash

有什么方法可以捕获发送到进程组的信号，以便任何子进程都不会受到信号的影响？

我的问题是我有一个应用程序可以在 SIGTERM 上很好地终止，但在 SIGUSR1 上中断不干净，所以我想保护它免受 SIGUSR1 的影响。我想写一个简单的 bash 脚本：

```
#!/bin/bash

runapp &
childspid=$!

trap "kill -TERM $childspid ; exit" USR1

while true ; do
    sleep 10 ;
done 
```

不幸的是，杀手很狡猾，将 SIGUSR1 发送给整个进程组，而不仅仅是领导者。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T15:26:54.217

您可以通过利用一点 perl 在任何应用程序上设置 SIGIGN 配置：

```
perl -e '$SIG{"USR1"} = "IGNORE"; exec(@ARGV)' realprogram realargs... 
```

只要 realprogram 不修改信号，它就不会受到它们的影响。

这样做的原因是信号掩码由子进程自动继承，无论它们是由它自己启动`fork(), exec()`还是由`exec()`它自己启动。

注意：我曾尝试使用 bash 内置函数，但信号处理程序在子进程执行之前已恢复（GAH！），这不是我想要的。

没有面具：

```
natsu:~$ grep SigIgn /proc/$$/status
SigIgn: 0000000000384004 
```

添加蒙版：

```
natsu:~$ trap '' USR1
natsu:~$ grep SigIgn /proc/$$/status
SigIgn: 0000000000384204 
```

子进程丢失掩码:(

```
natsu:~$ bash
natsu:~$ grep SigIgn /proc/$$/status
SigIgn: 0000000000384004
natsu:~$ kill -USR1 $$
User defined signal 1 
```

现在使用 perl：

```
natsu:~$ perl -e '$SIG{"USR1"} = "IGNORE"; exec(@_)' bash
natsu:~$ grep SigIgn /proc/$$/status
SigIgn: 0000000000384204
natsu:~$ kill -USR1 $$
natsu:~$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:43:59.913

只需为 SIGUSR1 信号编写自己的信号处理程序，它会捕获信号并且不采取任何行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T12:57:28.717

为了防止`runapp`狡猾的杀手发送SIGUSR1，您可以通过监视模式在单独的进程组中运行它。

```
#!/bin/bash
set -m
runapp&
trap "kill $!; exit" USR1
wait 
```

# php - PHP 或 HTML/CSS 中是否有类似于 ASP.NET 母版页的内容？

> ID：14751431
> 
> 赞同：0
> 
> 时间：2013-02-06T18:13:11.643
> 
> 标签：php, html, css

我在 Visual Studio 工作了一段时间，让我印象深刻的一件事是母版页。PHP中是否有类似的东西，或者可以使用简单的HTML和CSS来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:57:28.190

不完全是母版页，但有一些模板引擎，如 smarty，提供类似的功能。您可以使用 php.ini 填充的内容占位符创建模板文件。Smarty 还提供了额外的工具，可以为您的模板提供更复杂的功能。

但是对于 php，模板只是一种选择。脚本的每个输出都会进入浏览器。模板系统仅有助于将逻辑与输出分离。

# .net - 我似乎没有使用 mini-profiler 获取 LINQ2SQL 查询？

> ID：14751435
> 
> 赞同：1
> 
> 时间：2013-02-07T12:43:36.447
> 
> 标签：.net, linq-to-sql, mvc-mini-profiler

我有一个 2 层 Web 应用程序。数据访问和网站。

因此，在我`dataContext.cs`的 DataAccess 层中，我添加了包装器...

```
 //The autogenreated context when I made the linq2sql class
  public static MyDataContext DataContext
    {
        get
        {
            //We are in a web app, use a request scope
            if (HttpContext.Current != null)
            {
                if (HttpContext.Current.Items["dc"] == null)
                {
                    MyDataContext dc = new MyDataContext ();
                    HttpContext.Current.Items["dc"] = dc;
                    return dc;
                }
                else
                    return (MyDataContext )HttpContext.Current.Items["dc"];
            }
            else
            {
                if (dataContext == null)
                    dataContext = new MyDataContext ();

                return dataContext;
            }
        }
    }

    //the method I added to the autogenreated contex in 
    //an attempt to wrap the profiler around it
    public static MyDataContext Get()
    {
        var sqlConnection = new MyDataContext().Connection;
        var profiledConnection = new StackExchange.Profiling.Data.ProfiledDbConnection(sqlConnection, MiniProfiler.Current);

        return new MyDataContext(profiledConnection);
    } 
```

所以这就是 profileConnection 在被调用时但在调用之前的样子`return New MyDataContext(porofiledConnection)`

![在此处输入图像描述](../Images/19ff05470628290de4eefc253e92e74a.png)

并且在我的业务逻辑中也在 DataAccess 层中，我确保数据库上下文都是用`db = MyDataContext.Get()` 而不是`db = new MyDataContext();`

```
public class MyOrders(){
  private static  MyDataContext db = MyDataContext.Get();

  public static List<model> GetOrderHistory(){
      var = db.MyStoredProcedure(args) //Inspecting here before execution
      //proces result and return list of model
      }

 } 
```

现在，在某些页面上，我曾经获取 SQL 行，我可以单击它们并检查它们。但是在我浏览了该站点后，它只显示了这一点-不再有 SQL 行了吗？就像这个页面一样，它只是随机地向我显示 SQL 重复 - 但如果我重新加载它就消失了。

![在此处输入图像描述](../Images/3612f88dbdc332566bb42f2f15aa5217.png)

在此页面上，我之前从未使用探查器运行过加载时间问题，但我无法识别它使用的 SQL。

![在此处输入图像描述](../Images/908e8350e3ccf9fb837c86b0531c5528.png)

我错过了什么？SQL 是否被缓存？即使 Linq2Sql 缓存它或其他什么，我也总是想查看 SQL。我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:34:27.297

您的`MyOrders`班级中有一个静态数据上下文。`DataContext`内部有一个内部缓存来跟踪实体的变化并避免在一个业务事务中往返数据库。将其保持为静态，意味着内部缓存将暂时增加并且不会正确释放。这可能是分析器中查询消失的原因。此外，当多个用户从多个线程访问相同的上下文时，您可能会遇到问题，并且可能会出现内存泄漏。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)的注释：

> 通常，一个`DataContext`实例被设计为持续一个“工作单元”，但是您的应用程序定义了该术语。DataContext 是轻量级的，创建起来并不昂贵。典型的 LINQ to SQL 应用程序`DataContext`在方法范围内创建实例，或者作为表示一组相关数据库操作的逻辑集的短期类的成员。

[还有](http://msdn.microsoft.com/en-us/library/bb386929.aspx)一个：

> 不要尝试重用`DataContext`. 每个都`DataContext` 维护一个特定编辑/查询会话的状态（包括身份缓存）。要根据数据库的当前状态获取新实例，请使用新的`DataContext`.

您可以在 Rick Strahl 的文章[Linq to SQL DataContext Lifetime Management](http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management)中找到更多详细信息。

# mongodb - 如何在 mapReduce 之后使用 Mongoose.js 填充字段？

> ID：14751436
> 
> 赞同：0
> 
> 时间：2013-02-07T12:43:38.903
> 
> 标签：mongodb, mapreduce, mongoose

我想在 mapReduce 之后填充字段。

```
mongoose.connection.db.collection('createdCollectionNameForResults', function(err, collection) { 
    collection.find({}).populate('ref_field').toArray(function(err, items) { 
           res.send(200, items)
    });
}); 
```

但在这里，它给出了错误：

**TypeError: Object # has no method 'populate'**

因为 collection.find({}) 返回 mongodb 游标。如何填充 ref_field？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:41:30.403

考虑到您在 mongoose 中注册了一个名为“createdCollectionNameForResults”的架构

```
var Model = mongoose.model('createdCollectionNameForResults');
Model.find({}).populate('ref_field').exec(function(err, results){
   console.log(err, results); 
}); 
```

# php - 如何通过 Ant 检索 Composer？

> ID：14751440
> 
> 赞同：8
> 
> 时间：2013-02-07T12:43:53.713
> 
> 标签：php, ant, composer-php

我正在尝试让我的 Ant 脚本为我检索 Composer。[Composer](http://getcomposer.org/)是 PHP 的依赖管理器。 [根据文档](http://getcomposer.org/doc/00-intro.md#installation-nix)，需要运行以下命令：“curl -s [https://getcomposer.org/installer](https://getcomposer.org/installer) | php”，它将 Composer.phar 下载到我所在的目录中。从终端运行时，这将按预期工作.

如何为此设置 Ant 构建文件？到目前为止，我已经为“composerget”目标获得了这个片段，但它不保存文件，只在我的命令 shell 中输出它：

```
....    
<target name="composerget" description="Composer update dependencies">
    <exec executable="curl"> 
        <arg line="-s" />
            <arg line="https://getcomposer.org/installer"/>
        <arg line="| php" />
    </exec>
  </target>
.... 
```

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T12:53:00.343

```
<target name="composerget" description="Composer update dependencies">
    <exec executable="/bin/bash">
        <arg value="-c" />
        <arg value="curl -s https://getcomposer.org/installer | php" />
    </exec>
</target> 
```

应该做的伎俩。

管道 (|) 只能在 shell 脚本中使用。您将它作为参数传递给 curl。因此，您需要执行一个 shell 脚本——您可以使用 bash -c 执行此操作并将命令作为 shell 语句传递。

[归因。](https://stackoverflow.com/questions/1187402/ant-run-command-with-pipes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T05:23:36.937

这将下载 Composer 安装程序，验证其签名，然后运行安装程序：

```
 <target name="composer" description="Install composer">
        <exec executable="wget">
            <arg value="-O" />
            <arg value="composer-setup.sig" />
            <arg value="https://composer.github.io/installer.sig" />
        </exec>
        <exec executable="wget">
            <arg value="-O" />
            <arg value="composer-setup.php" />
            <arg value="https://getcomposer.org/installer" />
        </exec>
        <exec executable="bash">
            <arg value="-c" />
            <arg value="awk '{print $$0 &quot;  composer-setup.php&quot;}' composer-setup.sig | sha384sum --check" />
        </exec>
        <exec executable="php">
            <arg value="composer-setup.php" />
        </exec>
        <exec executable="rm">
            <arg value="composer-setup.php" />
        </exec>
        <exec executable="rm">
            <arg value="composer-setup.sig" />
        </exec>
        <exec executable="mv">
            <arg value="composer.phar" />
            <arg value="composer" />
        </exec>
    </target> 
```

如果您使用的是 GNU Make，这是等价的：

```
all: vendor

vendor: composer composer.json composer.lock
        ./composer install

composer:
        wget -O composer-setup.sig https://composer.github.io/installer.sig
        wget -O composer-setup.php https://getcomposer.org/installer
        awk '{print $$0 "  composer-setup.php"}' composer-setup.sig | sha384sum --check
        php composer-setup.php --quiet
        rm composer-setup.*
        mv composer.phar composer 
```

# java - JNI：给定jobobject，获取其缓存方法

> ID：14751446
> 
> 赞同：0
> 
> 时间：2013-02-07T12:44:23.950
> 
> 标签：java, c++, caching, optimization, java-native-interface

在Java中，我有一个接口：

```
public interface I {...} 
```

声明一个函数`void f()`和一些类：

```
public class A implements I {...}
public class B implements I {...}
public class C implements I {...}
... 
```

我经常调用原生函数：

```
public native void nativeFunc(I obj); 
```

* * *

在 C++ 中，我获得了一个

```
jobject jobj 
```

目的是调用

```
jobj.f(); 
```

无需每次都通过链条

```
cls = jenv->GetObjectClass(jobj);           (1)
mid = jenv->GetMethodID(cls, "f", "()V");   (2)
jenv->CallVoidMethod(jobj, mid);            (3) 
```

* * *

我似乎无法`mid`在本机调用之间进行缓存。作为另一个建议，我可以从第 (1) 行开始，然后使用缓存的`map <jclass, jmethodID>`. 但是，这也可能不起作用，因为`jclass`同一类的引用可能不同。

有没有优化的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:07:14.600

根据您的程序的性质和实现“接口 I”的类的数量，以及可用的类加载器的数量（可以乘以类的数量），您可以决定创建对这些类的全局引用

```
jclass globalRefCls = jni->NewGlobalRef(localRefCls); 
```

然后，您可以将这些实例和 jmethodID 缓存在映射中以供以后使用。

更新

在评论中的谈话之后，我重新阅读了您的要求。
只要你每次都得到一个jobject，你**无论如何**都需要把jclass拿出来，你的map也可以是map，其中字符串是类的描述符。

每次你得到一个作业时，提取 jclass 并询问它的名字（你可以缓存 java/lang/Class getName 方法）。

您还可以根据需要在前面创建此缓存，因为您知道要期望哪些对象（实现 I 的对象）

话虽如此，我想它不会像检查 IsSameObject 那样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:09:04.540

我能想到的解决方案之一是通过将类`A, B, C, ...`的`jclass`引用缓存到任何数据结构（数组、列表等；map 在这里没有加速）。我们称这个结构为 Storage。然后我可以优化步骤（2）并具有以下链：

```
(1) ... (obtain jcls)
(2) for(jclass jclsStored : Storage) {
        if(IsSameObject(jcls, jclsStored))
        {
            mid = ...;
            classFound = true;
        }
    }
    if(!classFound)
        Storage.add(necessary info);
(3) ... 
```

即我使用JNI

```
IsSameObject() 
```

函数绕过`jclass`同一类的不同值。如果`IsSameObject()`很快，那么这会进行优化。

# c# - 使用 XmlDocument 从子节点读取属性字符串

> ID：14751448
> 
> 赞同：1
> 
> 时间：2013-02-07T12:44:26.917
> 
> 标签：c#, xml, xmlnodelist

我在使用 XmlDocument 读取 thro 子节点时无法读取属性字符串。更具体地说，我试图读取一个包含正在运行的进程列表的 XML：

```
<Process_List>
  <Processes>
    <ibmpmsvc ID_1="860" />
    <svchost ID_2="8616" />
    <chrome ID_4="4300" />
    <SearchIndexer ID_5="3868" />
    <smss ID_6="416" />
  </processes>
</Process_List> 
```

每个开始元素都显示了一个正在运行的进程及其 ID（以及稍后的一些其他内容）。

所以我使用 XmlDocument 来读取 /Process_List/Processes 的每个子节点：

```
XmlNodeList xnList = xml.SelectNodes("/Process_List/Processes");
foreach (XmlNode xn in xnList)
{
    XmlNodeList cxnList = xn.ChildNodes;
    foreach (XmlNode child in cxnList)
    {
        listProc1.Add(child.Name.ToString());
    }
} 
```

问题是，我只得到孩子的名字，（ibmpmsvc，svchost，chrome）并且无法弄清楚如何获得它的其他属性。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:49:47.917

你可以使用[`child.Attributes`](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.attributes.aspx)它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:51:26.790

查看 XMLNode C# 类，了解您可以使用哪些属性：http: [//msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)

```
listProc1.Add(child.Name.ToString()); 
```

只会给你元素的名称，这是你收到的。您还需要查看`.Value`属性和`.Attributes`（反过来可以通过枚举）。

# visual-studio-2012 - 如何在 Visual Studio 2012 中获得行尾字形？

> ID：14751451
> 
> 赞同：20
> 
> 时间：2013-02-07T12:44:34.213
> 
> 标签：visual-studio-2012, editor

有没有办法在 Visual Studio 2012 中获得行尾字形？

以下屏幕截图（来自记事本++）显示了我想要的内容（**CR LF**部分）： ![在此处输入图像描述](../Images/f1b176e8095e095b75d3a3ab20229bc7.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-16T10:28:55.193

你可能想看看这个扩展：[Rolf W. Rasmussen 的 End of The Line](http://visualstudiogallery.msdn.microsoft.com/545e56a7-98d7-47f9-9d84-4681f2903060)。当前的二进制版本一直在行尾显示 CR 和 LF 标识符，但源版本将其绑定到 VS 的“查看空白”菜单选项。

它适用于 Visual Studio 2013，但它是[开源](https://bitbucket.org/rolfwr/endoftheline)的，应该很容易重新编译为 VS2012 兼容插件

（您可能需要更改引用 - nuget 上的 VSSDK 包在这里非常有用。您需要[VSSDK.CoreUtility](http://www.nuget.org/packages/VSSDK.CoreUtility.11/)和[VSSDK.Text](http://www.nuget.org/packages/VSSDK.Text.11/)。事实上，无论如何，这可能值得公关......）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T14:48:13.357

不，Visual Studio**没有**显示行尾标记的功能。（[参考](http://www.codinghorror.com/blog/2010/01/the-great-newline-schism.html)）

但它提供了使用 (Ctrl + E + S) 显示空白的能力，[此处](https://stackoverflow.com/questions/257752/how-to-change-visual-studio-whitespace-settings)已解决。
如果包含任何不一致之处，VS 应建议自动修复该文档。

但是，如果您需要执行除此之外的操作，我建议使用Hanselman[此处](http://www.hanselman.com/blog/DeathToCarriageReturnsAndLinefeeds.aspx)描述的[notepad++](http://notepad-plus-plus.org)

如果您认为 Visual Studio 应该包含此功能，您最好投票支持[此请求](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2381472-view-white-space-should-show-line-endings-too)

*编辑：*

顺便说一句，VS 通过启用以下方式显示包装词的字形：

```
Tools ->  Options ->  Text Editor ->  All Languages ->  Show visual glyphs for word wrap 
```

**像：**

![字形示例](../Images/677321fa92b3405764d89c1d6ca6f69b.png)

# sql - SQL 在同一行上显示不同时间段的详细信息行和聚合

> ID：14751457
> 
> 赞同：2
> 
> 时间：2013-02-07T12:45:04.573
> 
> 标签：sql

假设我有一个检索单个供应商交易的查询。我需要保留这些详细信息，但在每一行中，我还希望查看每个供应商的月度、季度和年度总计。我该怎么办？

目前我的查询输出看起来像这样

日期 月份 季度 年份 供应商价值

我希望它也能生成 SupplierMonthlyTotal、SupplierQuarterlyTotal、SupplierAnnualTotal 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:52:33.107

您必须使用分析功能`SUM ... OVER ... PARTITION BY`（[请参阅 Oracle 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions182.htm#i89126)）。

这里有关于分析函数的一般信息：http: [//docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)

# python - 导入错误：没有名为...的模块 [请完成解决方案]

> ID：14751458
> 
> 赞同：-2
> 
> 时间：2013-02-07T12:45:05.690
> 
> 标签：python, linux, eclipse, module

我在 Linux Backtrack5 中使用 Eclipse IDE 编写 Python 程序。

Scapy，Python 2.6 在 Backtrack 中可用。使用我在所有模块中看到的自动完成功能，但是当我运行程序时，我看到以下错误：

```
from scapy.contrib.ospf import OSPF_Hdr
ImportError : No module named contrib.ospf 
```

我刚刚开始使用 Python 进行编程，并且我遇到过这个问题的许多来源。

对我来说这个问题很有趣，当编码一切正常，但它没有运行！

除了解决这个问题，我想知道为什么会出现这个问题？？一般如何解决？

也许我的问题是重复的，但是一个完整的解决方案，我们需要它，在这种情况下，它不会重复任何其他提出问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:12:37.103

您的搜索路径错误。

2个常见的原因是：

*   开发和执行中的 Python 版本是不同的。你确定你两次都使用python2.6吗？因为并非所有包都适用于所有版本的 python。

- IDE 中的搜索路径与 shell 中的搜索路径不同。我没有使用 eclipse for python 的经验，但它发生在我的其他 IDE 上。

因此，在 bash 中，您可以编写：
export PYTHONPATH="$PYTHONPATH:/where/module/lives/"
以包含路径。

如何将其包含在您的 bashprofile 中：http: [//blog.streamitive.com/2011/12/01/export-pythonpathpythonpath/](http://blog.streamitive.com/2011/12/01/export-pythonpathpythonpath/)
您可以通过 python 本身包含路径：http: [//www.johnny-lin.com/cdat_tips /tips_pylang/path.html](http://www.johnny-lin.com/cdat_tips/tips_pylang/path.html)

何时通过 bash 包含以及何时通过 python 本身
包含：通过 python 包含受控程序，当您知道 100% 时您的模块将始终位于同一位置。

否则，您应该明确设置路径。可能在启动 shell 脚本中，在 crontab 命令中，或者在您调用 Python 程序的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:59:32.377

IDE 使用的 PYTHONPATH 与运行程序的 PYTHONPATH 不同

# jenkins - 自动升级按钮不见了

> ID：14751461
> 
> 赞同：17
> 
> 时间：2013-02-07T12:45:24.260
> 
> 标签：jenkins, auto-update

我从 debian 包（1.424.6 版本，Debian/Ubuntu 发行版，在 ubuntu 12.04 上运行）安装了 jenkins CI。我在网上看到 jenkins 提供了一个自动升级按钮，就像在![这个链接](../Images/7130fa04991e3999ee34933a2c3ec4aa.png). 但是我的詹金斯上没有这样的东西。我试图在谷歌和詹金斯配置中找到答案，但失败了。也许 debian/ubuntu 安装包是不可能的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-11-01T09:21:45.880

这是一个权限问题，如果您信任您的 Jenkins 安全配置，只需运行：

```
$ chown -R jenkins /usr/share/jenkins 
```

然后重启jenkins，应该会出现升级按钮，可以升级到最新版本，否则必须使用jenkins版本不是最新的debian包系统。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T12:53:13.760

正如它在[https://wiki.jenkins-ci.org/display/JENKINS/Automated+Upgrade](https://wiki.jenkins-ci.org/display/JENKINS/Automated+Upgrade)中所述“如果 Jenkins 是从 Debian 软件包安装的（尝试下载新的 WAR 文件时导致权限被拒绝错误）！”

所以即使你找到按钮它也会失败。

但它也说

`aptitude update && aptitude install jenkins`

将 jenkins 更新到最新版本，试一试 :)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-08T15:09:09.660

更改 jenkins.war 所在目录和 WAR 文件本身的所有权（更改为 jenkins UID 和 GID）。例如，以下适用于 RHEL：

```
chown jenkins:jenkins /usr/lib/jenkins
chown jenkins:jenkins /usr/lib/jenkins/jenkins.war 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-01T04:32:28.047

> [https://wiki.jenkins-ci.org/display/JENKINS/Automated+Upgrade](https://wiki.jenkins-ci.org/display/JENKINS/Automated+Upgrade)
> 
> 如果您是通过 OS X 安装程序安装的，则运行该进程的“jenkins”不拥有 .war 文件。要使自动升级正常工作，只需修复权限，以便 jenkins 用户可以编写 WAR（在 /Applications/Jenkins 中）。

运行命令找到 jenkins.war 的位置

```
ps -aux | grep jenkins 
```

像这样的输出：jenkins 27765 172 11.0 3528188 432288？Ssl 12:23 4:16 /etc/alternatives/java -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log /jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=8009 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20

jenkins.war 的位置是：/usr/lib/jenkins/jenkins.war

运行命令修复 /usr/lib/jenkins/jenkins.war 权限。例如：

```
chmod 777 /usr/lib/jenkins/jenkins.war 
```

然后刷新管理页面。你会看到按钮。

# fastcgi - 如何强制 Moin Moin 运行 FastCGI 套接字？

> ID：14751464
> 
> 赞同：0
> 
> 时间：2013-02-07T12:45:32.810
> 
> 标签：fastcgi, moinmoin

使用 1.9.6 版本的 moin.fcg（针对安装进行了适当调整）时，fastcgi 进程无法正确启动。

失败的过程在启动时记录以下内容：-

```
WSGIServer: missing FastCGI param REQUEST_METHOD required by WSGI!
WSGIServer: missing FastCGI param SERVER_NAME required by WSGI!
WSGIServer: missing FastCGI param SERVER_PORT required by WSGI!
WSGIServer: missing FastCGI param SERVER_PROTOCOL required by WSGI! 
```

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:34:23.427

我对 fastcgi 的东西帮不上什么忙，因为我个人只使用 apache2/mod-wsgi（直接执行 WSGI 更简单），但是你得到的错误很清楚：wsgi 需要在日志输出中注明的那些东西。也许你需要配置你的服务器来提供它。

顺便说一句：这绝不是特定于 moin 的，因此您可能更应该询问如何使任何 WSGI 应用程序与您的服务器和 fastcgi 一起工作（moin 使用 Flup 作为适配器）。

如果您发现 moin 下载存档中提供的内容有误或可以改进，请联系我们。

# nfs - 使用 auto_direct 的 NFS 网络流量

> ID：14751469
> 
> 赞同：0
> 
> 时间：2013-02-07T12:45:50.830
> 
> 标签：nfs

我对当服务器端有重定向时 NFS 网络流量如何进行感兴趣。

例如：客户端访问**dir_a**，挂载在 NFS **server_a**上，但在**server_a**上，**/etc/auto_direct**包含一个将 dir_a 重定向**到**server_b**上**的**dir_b**的条目。

在这种情况下，NFS 客户端将与哪个服务器通信？最重要的问题是，大部分 NFS 数据流量将发生在哪些机器之间？

如果重要的话，所有这些都是针对 Solaris 10 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:24:53.937

我进行了一些测试，从中似乎客户端以某种方式知道重定向：

```
user@client $ df dir_a
dir_a(auto_direct       ):       0 blocks        0 files 
```

我在**dir_a**中进行了一些文件访问，并观察了客户端对**server_a**和**server_b**的接口。在我做的客户端上：

> cd dir_a; 虽然是真的；做回声 1111111111111111111111111111 >> t; 完毕

在客户端到**server_a**的接口上没有流量增加（仅在总流量中）：（上面脚本循环运行的时间在下面用 * 标记。）

```
nmsadm@atrcxb1951: netstat -I bnxe0 10
    input   bnxe0     output       input  (Total)    output
packets errs  packets errs  colls  packets errs  packets errs  colls 
8819    0     4476    0     0      8920    0     4494    0     0     
8800    0     4451    0     0      8871    0     4466    0     0     
8753    0     4371    0     0      27468   0     26777   0     0     *
8704    0     4378    0     0      27772   0     27227   0     0     *
8734    0     4381    0     0      28425   0     28044   0     0     *
8789    0     4453    0     0      13053   0     9317    0     0     
8765    0     4407    0     0      8871    0     4420    0     0 
```

在客户端对**server_b**的接口上，有：

```
nmsadm@atrcxb1951:~$ netstat -I bnxe4 10
    input   bnxe4     output       input  (Total)    output
packets errs  packets errs  colls  packets errs  packets errs  colls 
121     0     17      0     0      8942    0     4494    0     0     
10467   0     12473   0     0      19264   0     16927   0     0     *
18579   0     22362   0     0      27291   0     26732   0     0     *
21735   0     25978   0     0      30466   0     30364   0     0     *
10971   0     12970   0     0      19760   0     17395   0     0     *
35      0     12      0     0      8782    0     4432    0     0 
```

因此，在我的情况下，客户端似乎处理了重定向，而**server_a**没有代理 NFS 数据流量。我仍然很好奇在什么情况下会这样工作。任何配置选项等。

# symfony - Symfony 中的链接

> ID：14751473
> 
> 赞同：0
> 
> 时间：2013-02-07T12:46:08.887
> 
> 标签：symfony, fosuserbundle

我正在尝试为 FOSUser Bundle 创建一个链接。这看起来很简单，但由于某种原因我遇到了问题。

我想在我的树枝中创建一个“登录”链接。

```
<a class="Link" href="{{ url('/login') }}">Login</a> 
```

这应该指向 `http://localhost:9911/Symfony/web/app_dev.php/login`我的控制器中定义的。

我做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:23:49.567

如果你想链接到路由，你可以使用`{{ path() }}`or`{{ url() }}`并使用路由的名称作为参数。我正要告诉你你应该阅读文档，但它实际上并没有提到登录路由。谁会猜到？

您可以通过查看来找出路线的名称`Resources/config/routing/*.yml`。在您的情况下，该路线被命名为`fos_user_security_login`，因此链接到该路线就像使用一样简单：

```
<a href="{{ path('fos_user_security_login') }}">login</a> 
```

# eclipse - 在 JFace TreeViewer 中禁用选择更改

> ID：14751477
> 
> 赞同：1
> 
> 时间：2013-02-07T12:46:31.827
> 
> 标签：eclipse, selection, jface, treeviewer

我的视图中有一个 TreeViewer。每当我按下一个按钮（比如 s）时，查看器都会选择树中以这个字母开头的第一个项目（比如 stackoverflow）。有没有办法禁用这种行为？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:02:05.270

限制 Tree 上的所有关键事件看起来很有希望，但您会松散导航树结构并在树节点和所有其他功能上展开/折叠。

```
tree.addKeyListener(new KeyAdapter() {
      @Override
      public void keyPressed(KeyEvent e) {
         e.doit = false;
      }
    }); 
```

# php - php 中的时间计算（加法） 例如 -> '22:50:50' + '12:50:50'

> ID：14751478
> 
> 赞同：0
> 
> 时间：2013-02-07T12:46:35.690
> 
> 标签：php, datetime, sum, addition

我的问题是当我添加两次时，它只输出 0-23 小时。我需要一些可以输出时间的东西：

150:0:0

表示 150 小时、0 分钟和 0 秒。

例如：

当我制作“23:59:59”+“01:40:40”时

那么它只输出'00:40:40'

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:08:45.030

```
$a=explode(':','23:59:59');
$t1=$a[0]*3600+$a[1]*60+$a[2];

$a=explode(':','01:40:00');
$t2=$a[0]*3600+$a[1]*60+$a[2];

$t3=$t1+$t2;

$h=floor($t3/3600);
$m=floor(($t3%3600)/60);
$s=$t3-$h*3600-$m*60;

echo $h.':'.$m.':'.$s; 
```

# css - 使用 Compass sprites，生成的 CSS 使用所有类名以及共享一个

> ID：14751482
> 
> 赞同：0
> 
> 时间：2013-02-07T12:46:43.823
> 
> 标签：css, sass, compass-sass, sprite

假设我有一些这样的 HTML：

```
<!DOCTYPE HTML>
  <html lang="en-US">
  <head>
      <meta charset="UTF-8">
      <title></title>
      <link rel="stylesheet" href="css/styles.css"></link>
  </head>
  <body>
      This is a test
      <a class="ribbons-sprite ribbons-exclusive" href="#">Exclusive</a>
      <a class="ribbons-sprite ribbons-featured" href="#">Featured</a>
  </body>
</html> 
```

我有一些像这样的 SASS (SCSS)：

```
@import "compass/utilities"; 
@import "ribbons/*.png";

@include all-ribbons-sprites(true);  

.ribbons-sprite {
   display: inline-block;
   text-indent: -9999px;
} 
```

输出的 CSS 是这样的：

```
.ribbons-sprite, .ribbons-exclusive, .ribbons-featured {
  background: url('../images/ribbons-scfb85024fb.png') no-repeat;
}

.ribbons-exclusive {
  background-position: 0 -38px;
  height: 59px;
  width: 59px;
}

.ribbons-featured {
  background-position: 0 0;
  height: 38px;
  width: 70px;
}

.ribbons-sprite, .ribbons-exclusive, .ribbons-featured {
  display: inline-block;
  text-indent: -9999px;
} 
```

为什么最后一个选择器列表包含所有类，而不仅仅是“.ribbons-sprite”？我可以看看我的精灵中是否有更多的项目，它会变得不必要地臃肿。只有当我使用精灵生成器时才会出现这种情况。如果我删除此行，则内联块和文本缩进行就在共享类名选择器下方。这是我期望的 CSS 输出：

```
.ribbons-sprite {
  background: url('../images/ribbons-scfb85024fb.png') no-repeat;
  display: inline-block;
  text-indent: -9999px;
}

.ribbons-exclusive {
  background-position: 0 -38px;
  height: 59px;
  width: 59px;
}

.ribbons-featured {
  background-position: 0 0;
  height: 38px;
  width: 70px;
} 
```

# mysql - 使用 phpmyadmin 创建 mysql 函数

> ID：14751483
> 
> 赞同：0
> 
> 时间：2013-02-07T12:46:44.783
> 
> 标签：mysql

我想输入以下函数来计算 phpmyadmin 中 mysql 表中已完成任务的数量，但它总是返回非描述性错误：

```
 DELIMITER $$
 CREATE FUNCTION `num_completed`(v1 INT)
 RETURNS INT
 BEGIN
 DECLARE icm INT;
 SELECT SUM(IF(completed='yes',1,0)) AS completed INTO icm FROM ri_t_course_progress WHERE enrollment_id=v1;
 RETURN icm;
 END$$ 
```

查询本身应该是正确的。我已经对其进行了测试并返回了所需的结果。有谁知道怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:55:16.027

您需要将 SELECT 的结果分配给变量。这是一种方法：

```
 SELECT SUM(IF(completed='yes',1,0)) INTO icm 
 FROM ri_t_view_course_progress WHERE enrollment_id=v1; 
```

# css - 在没有 Compass 的情况下将图像作为内联包含在 sass 中？

> ID：14751486
> 
> 赞同：6
> 
> 时间：2013-02-07T12:47:06.477
> 
> 标签：css, sass

我想在 sass 中将图像添加为 base64。我一直在锁定 Compass，但感觉有点笨重，真的不是我想要的。有没有一种在不使用指南针的情况下将图像或其他内联文件包含在 css 中的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T06:54:52.793

如果你使用 grunt，你可以只使用[grunt-data-uri](https://github.com/ahomu/grunt-data-uri)任务来实现常规 url() 字符串到 base64 的对话。

```
 dataUri: {
           dist: {
              src: ['dist/styles/*.css'],
              dest: 'dist/styles/',
              options: {
                target: [
                    'img/low-res/embeded/*.*'
                ],
                fixDirLevel: true
              }
          }
       }, 
```

本质上，该任务将查找 .css 中嵌入文件夹中包含的每个图像。从那里，它将 url() 转换为 base64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:54:47.897

Compass 是开源的，只需获取适合您的部分代码即可。

[这是 Github 上的 ruby​​ 源](https://github.com/chriseppstein/compass/blob/stable/lib/compass/sass_extensions/functions/inline_image.rb)

# java - Solaris KSSL 和 Java Web 服务器

> ID：14751489
> 
> 赞同：0
> 
> 时间：2013-02-07T12:47:08.960
> 
> 标签：java, jetty, solaris

我正在尝试将 Solaris KSSL 代理（[http://www.c0t0d0s0.org/archives/5575-Less-known-Solaris-Features-kssl.html](http://www.c0t0d0s0.org/archives/5575-Less-known-Solaris-Features-kssl.html)）设置为 Jetty Web 服务器的前端。

我能够使 KSSL 与 Apache Web 服务器一起工作，以便 KSSL 将所有传入的 SSL 流量从端口 443 重定向到侦听端口 28080 的 Apache Web 服务器。

但是，当 Jetty 正在侦听端口 28080 时，相同的配置不起作用。我验证了 KSSL 请求甚至没有到达 Jetty，或者至少我在访问日志中看不到它们。此外，即使我设置了一个仅侦听服务器套接字的简单 Java 类，KSSL 也无法将请求重定向到它。

我的问题是，为了能够从 KSSL 获取请求，Web 服务器的先决条件是什么？

最好的问候， Lior

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T14:25:07.267

使用 kssl 时有两个非常常见的问题。

首先是apache监听IP必须和你的ksslcfg命令一样。所以如果你在httpd.conf文件中有Listen 123.123.123.123:28080，那么你必须使用相同IP的ksslcfg命令。您不能让它在任何 (*) 上侦听，然后在 ksslcfg 中列出 IP，或者在 IP 上侦听并忽略 ksslcfg 上的 IP。无论 netstat 显示正在侦听端口 28080 的内容，都必须与 ksslcfg 中使用的 IP 匹配（或者不要使用它正在侦听的 IP *）

第二个是您必须按此顺序执行操作：

1.  ksslcfg
2.  重启阿帕奇

如果 ksslcfg 没有在之后重新启动 apache 的情况下运行，它就不起作用。

我在网上看到很多人在他们的 ksslcfg 命令中使用 localhost 之类的东西进行测试。除非您在 apache 配置中也将 localhost 作为侦听 IP，否则它将无法工作。

# webview - 按钮增加字体大小/按钮减少Webview中的字体大小

> ID：14751492
> 
> 赞同：0
> 
> 时间：2013-02-07T12:47:14.613
> 
> 标签：webview, windows-store-apps, font-size

如何在我的应用程序中添加两个按钮来增加/减少 Windows 商店应用程序的 Webview 控件中 HTML 内容的字体大小。 **我正在设计 Windows 8 阅读器应用程序，即在“Webview”中显示 HTML 内容。如何，当我单击一个按钮时增加 Webview 中 HTML 内容中的字体，当我单击另一个按钮时减小 Webview 中 HTML 内容中的字体**。我为此做了很多尝试。我需要按钮单击事件代码。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:52:24.420

对于 Windows 应用商店应用程序，您无法使用 C# 执行此操作。为什么没有特定的控件来增加或减少 Microsoft 的 Webview 控件中的字体。您必须与 Java Script 集成。

我建议浏览 Microsoft 博客和示例。[这](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)是 Windows Store 应用程序的示例之一。

# iphone - CouchDB / iOS - 发送带有图像的 HTTP POST 请求

> ID：14751494
> 
> 赞同：0
> 
> 时间：2013-02-07T12:47:21.123
> 
> 标签：iphone, ios, couchdb

我已经用谷歌搜索并四处寻找解决方案，但找不到太多。

我需要从objective-c 向我的couchdb 发送一个HTTP POST 请求。我需要知道的是如何在objective-c中添加图像到请求中，最好是一个库/框架的链接，它简化了从iOS发送请求的while过程。

我找到了几个框架，但一个不再处于开发阶段，另一个一年没有更新。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:44:31.247

我一直在做类似的事情，我使用 AFNetworking 库发布到 php 脚本，然后将其放入 Mysql 数据库。

在您的情况下应该更简单，因为您可以直接发布到 couchDB AFNetworking 库中的示例应该可以满足您的需要。

[https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

# nservicebus - NServiceBus 4 发布日期

> ID：14751500
> 
> 赞同：0
> 
> 时间：2013-02-07T12:47:50.333
> 
> 标签：nservicebus, nservicebus4

我读到了一个很棒的 NSB4 功能，可以将原始 XML 文件存储在消息中。NSB4 何时发布，还有哪些其他功能正在开发中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:08:37.853

[Udi Dahan 编辑] 我们刚刚在 specific.net 上发布了 NServiceBus v4 的候选[版本](http://particular.net)。[您可以在此处](http://particular.net/blog/nservicebus-v4.0-release-notes)查看我们的发行说明。[结束编辑]

我不能代表 NServiceBus 团队发言，但开源软件的力量就在你身边：[GitHub 上的 NServiceBus 里程碑](https://github.com/NServiceBus/NServiceBus/issues/milestones)

在我写这篇文章的时候，4.0.0 将在 20 天内到期，并且 95% 的问题已经完成。（开放 13 家，关闭 252 家。）

我敢肯定，在宣布 RTM 之前，团队会想要稳定一段时间。

至于管道中的其他功能，您可以[浏览 4.0 功能](https://github.com/NServiceBus/NServiceBus/issues?milestone=26)或查看[更通用的路线图](http://nservicebus.com/roadmap.aspx)。

# c - 使用 libuv 捕获子进程的标准输出

> ID：14751504
> 
> 赞同：10
> 
> 时间：2013-02-07T12:48:00.680
> 
> 标签：c, spawn, libuv

我正在使用 libuv。我已经阅读了[http://nikhilm.github.com/uvbook/processes.html](http://nikhilm.github.com/uvbook/processes.html)并且仍然无法弄清楚如何捕获子进程的标准输出，以便它在父进程中可用（但不能代替父进程的标准输入） ）。

我的代码目前是：

```
#include <stdio.h>
#include <stdlib.h>
#include "../../libuv/include/uv.h"

uv_loop_t *loop;
uv_process_t child_req;
uv_process_options_t options;
uv_pipe_t apipe;

void on_child_exit(uv_process_t *req, int exit_status, int term_signal) {
    fprintf(stderr, "Process exited with status %d, signal %d\n", exit_status, term_signal);
    uv_close((uv_handle_t*) req, NULL);
}

uv_buf_t alloc_buffer(uv_handle_t *handle, size_t len) {
    printf("alloc_buffer called\n");
    uv_buf_t buf;
    buf.base = malloc(len);
    buf.len = len;
    return buf;
}

void read_apipe(uv_stream_t* stream, ssize_t nread, uv_buf_t buf) {
    printf("read %li bytes from the child process\n", nread);
}

int main(int argc, char *argv[]) {
    printf("spawn_test\n");
    loop = uv_default_loop();

    char* args[3];
    args[0] = "dummy";
    args[1] = NULL;
    args[2] = NULL;

    uv_pipe_init(loop, &apipe, 0);
    uv_pipe_open(&apipe, 0);

    options.stdio_count = 3;
    uv_stdio_container_t child_stdio[3];
    child_stdio[0].flags = UV_IGNORE;
    child_stdio[1].flags = UV_INHERIT_STREAM;
    child_stdio[1].data.stream = (uv_stream_t *) &apipe;
    child_stdio[2].flags = UV_IGNORE;
    options.stdio = child_stdio;

    options.exit_cb = on_child_exit;
    options.file = args[0];
    options.args = args;

    uv_read_start((uv_stream_t*)&apipe, alloc_buffer, read_apipe);
    if (uv_spawn(loop, &child_req, options)) {
        fprintf(stderr, "%s\n", uv_strerror(uv_last_error(loop)));
        return 1;
    }

    return uv_run(loop, UV_RUN_DEFAULT);
} 
```

假人.c：

```
#include <unistd.h>
#include <stdio.h>

int main() {
    printf("child starting\n");
    sleep(1);
    printf("child running\n");
    sleep(2);
    printf("child ending\n");
    return 0;
} 
```

我有一种挥之不去的感觉，我还不太明白 libuv 管道的意义所在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T14:06:55.090

我找到了解决方案：

1.  我有错误的标志，他们应该`UV_CREATE_PIPE | UV_READABLE_PIPE`不是`UV_INHERIT_STREAM`。
2.  我需要在`uv_read_start`之后打电话`uv_spawn`。我假设没有数据丢失的可能性，因为 uv_run 尚未被调用。
3.  上述两个修复同时显示了从`dummy`到到达的所有输出，而不是三个块（就像在命令行上所做的那样）。一个`fflush`in`dummy.c`解决了这个问题。

产卵测试：

```
#include <stdio.h>
#include <stdlib.h>
#include "../../libuv/include/uv.h"

uv_loop_t *loop;
uv_process_t child_req;
uv_process_options_t options;
uv_pipe_t apipe;

void on_child_exit(uv_process_t *req, int exit_status, int term_signal) {
    fprintf(stderr, "Process exited with status %d, signal %d\n", exit_status, term_signal);
    uv_close((uv_handle_t*) req, NULL);
}

uv_buf_t alloc_buffer(uv_handle_t *handle, size_t len) {
    printf("alloc_buffer called, requesting a %lu byte buffer\n");
    uv_buf_t buf;
    buf.base = malloc(len);
    buf.len = len;
    return buf;
}

void read_apipe(uv_stream_t* stream, ssize_t nread, uv_buf_t buf) {
    printf("read %li bytes in a %lu byte buffer\n", nread, buf.len);
    if (nread + 1 > buf.len) return;
    buf.base[nread] = '\0'; // turn it into a cstring
    printf("read: |%s|", buf.base);
}

int main(int argc, char *argv[]) {
    printf("spawn_test\n");
    loop = uv_default_loop();

    char* args[3];
    args[0] = "dummy";
    args[1] = NULL;
    args[2] = NULL;

    uv_pipe_init(loop, &apipe, 0);
    uv_pipe_open(&apipe, 0);

    options.stdio_count = 3;
    uv_stdio_container_t child_stdio[3];
    child_stdio[0].flags = UV_IGNORE;
    child_stdio[1].flags = UV_CREATE_PIPE | UV_READABLE_PIPE;
    child_stdio[1].data.stream = (uv_stream_t *) &apipe;
    child_stdio[2].flags = UV_IGNORE;
    options.stdio = child_stdio;

    options.exit_cb = on_child_exit;
    options.file = args[0];
    options.args = args;

    if (uv_spawn(loop, &child_req, options)) {
        fprintf(stderr, "%s\n", uv_strerror(uv_last_error(loop)));
        return 1;
    }
    uv_read_start((uv_stream_t*)&apipe, alloc_buffer, read_apipe);

    return uv_run(loop, UV_RUN_DEFAULT);
} 
```

假人.c：

```
#include <unistd.h>
#include <stdio.h>

int main() {
    printf("child starting\n");
    fflush(stdout);
    sleep(1);
    printf("child running\n");
    fflush(stdout);
    sleep(2);
    printf("child ending\n");
    fflush(stdout);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-28T17:27:23.523

[在 libuv 单元测试libuv/test/test-stdio-over-pipes.c](https://github.com/joyent/libuv/blob/master/test/test-stdio-over-pipes.c)中查看他们是如何做到的：

*   不要打电话`uv_pipe_open`
*   儿童标准输入的标志：`UV_CREATE_PIPE | UV_READABLE_PIPE`
*   孩子的标准输出和标准错误的标志：`UV_CREATE_PIPE | UV_WRITABLE_PIPE`

Windows 上还有一个[问题](https://github.com/joyent/libuv/issues/865)`uv_spawn`，即使遇到错误也可能返回零，在这种情况下，您需要检查`process.spawn_error`仅在 Windows 上存在的 。

# php - jQuery 类似 Facebook 的评论系统

> ID：14751505
> 
> 赞同：1
> 
> 时间：2013-02-07T12:48:03.020
> 
> 标签：php, javascript, jquery, mysql, pdo

我在这里开发了一个 jQuery 评论系统：http: **[//jsfiddle.net/CKqWz/](http://jsfiddle.net/CKqWz/)**，代码如下：

```
$(document).ready(function () {
    $("#commentlink1").click(function () {
        $("#commentbox1").toggle("slow");
    });
    $("#commentlink2").click(function () {
        $("#commentbox2").toggle("slow");
    });
});

$(document).ready(function() {
        $("#post_box").click(function() {
        $('#post_btn').show('slow');
    });

        $("#post_box").blur(function() {
        $('#post_btn').hide('slow');
    });
}); 
```

我想知道一旦用户单击评论按钮，我该如何让消息和评论“粘贴”。

“坚持”是指使用新消息或评论立即更新页面，并允许用户根据需要编写另一条消息或评论。希望这是有道理的——我正在尝试开发类似于 Facebook 评论系统的东西。

我需要将此作为开发 AJAX 的基础，该 AJAX 会将这些信息发送到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:50:33.767

要实时更新页面或页面的一部分，您必须使用[“彗星”技术](http://en.wikipedia.org/wiki/Comet_%28programming%29)，例如带有脚本标签注入的永久 iframe、服务器的长轮询、服务器的 JSON 轮询等。

[HTML5 WebSockets](http://www.websocket.org/quantum.html)也是一个较新的选项。

无论哪种方式，您都必须退回到长轮询或 JSON 轮询，以防万一。

例如，[用于 Node.js 的 Socket.io](http://socket.io/)会自动执行此操作。

# javascript - 在 Javascript 中发送退格以在 Google Chrome 快捷方式扩展（快捷方式管理器）中引起正常的退格

> ID：14751506
> 
> 赞同：1
> 
> 时间：2013-02-07T12:48:04.147
> 
> 标签：javascript, google-chrome, dom-events, keyboard-shortcuts

在谷歌浏览器中，返回页面的“退格”键快捷键真的让我很恼火。所以有一段时间我一直希望禁用它。我碰到：

[快捷方式管理器](https://chrome.google.com/webstore/detail/shortcut-manager/mgjjeipcdnnjhgodgjpfkffcejoljijf)

我认为通过允许我将“退格”快捷方式重写为空白 Javascript 来解决我的所有问题。

然而，它似乎吞噬了任何退格事件。所以它实际上`backspace`完全禁用了我的密钥！

我正在尝试编写模拟退格键按下的 Javascript，但我以前从未使用过 Javascript，而且我对执行它的“片段”非常不熟悉。

环顾四周后，我发现了这段代码（在 Stack Overflow 上 :-)）

```
 var keyEvent = document.createEvent("KeyboardEvent");
  keyEvent.initKeyEvent("keypress", true, true, null, false, false, false, false, 8, 0);
  field.dispatchEvent(keyEvent); 
```

但这没有说明：

> ShortcutManager：“退格覆盖”类型错误中的错误
> ：对象 # <KeyboardEvent> 没有方法 initKeyEvent

这是我从中获得代码的原始问题： [以编程方式将键发送到输入字段？](https://stackoverflow.com/questions/1472458/programmatically-sending-keys-to-input-field)

我想我可以跳过按钮事件侦听器，因为快捷方式扩展已经在处理按键。

如果有人可以提供帮助，我将不胜感激。

*** 更新 ***

我将代码更改为：

```
 var keyEvent = document.createEvent("KeyboardEvent");
    keyEvent.initKeyboardEvent("keypress", true, true, null, false, false, false, false, 8, 0);
   document.dispatchEvent(keyEvent) 
```

这不会失败，但它也不起作用:(

# javascript - 如何在 Ext.FormPanel 中有一些元素和网格？

> ID：14751507
> 
> 赞同：1
> 
> 时间：2013-02-07T12:48:06.790
> 
> 标签：javascript, extjs

我有一个 ExtJs 3.4 应用程序。
我想在 FormPanel 上设置一些字段和网格我说：

```
 var searchPan = new Ext.FormPanel({
            title:'Поиск',
            labelAlign: 'top',
            frame:true,
            //xtype:'panel',
            //layout:'border',
            //region: 'center',
            split: true,
            collapseMode: "mini",
            collapsed:false,
            items:[{
                xtype:'fieldset',
                columnWidth: 0.5,
                title: 'Поиск объектов',
                collapsible: true,
                collapsed: true,
                autoHeight:true,
                defaults: {
                    anchor: '-20' // leave room for error icon
                },
                items: [{
                        xtype:'textfield',
                        fieldLabel: 'Диспечерское наименование',
                        name: 'name_dispather',
                        anchor:'100%',
                        enableKeyEvents: true,
                        listeners: {
                            'keyup': function(e) {
                                if(e.getValue().length>=4){
                                    var searchFromValues=search.getForm().getValues();
                                    searchStore.load({params:{'name':e.getValue(),'type':searchFromValues.objType,'voltage':searchFromValues.objVolt}});
                                }
                            }
                        }
                    },{
                        layout:'column',
                        //defaults: {/*flex: 1, */layout: 'form',},
                        items:[{
                            columnWidth:.5,
                            layout: 'form',
                            items: [{
                                    xtype: 'combo',
                                    anchor:'60%',
                                    name:'objType',
                                    fieldLabel: 'Тип Объектов',
                                    store: new Ext.data.SimpleStore({
                                        data: [
                                            [1, 'ВЛ'],
                                            [2, 'ТП']
                                        ],
                                        id: 0,
                                        fields: ['value', 'text']
                                    }),
                                    valueField: 'value',
                                    displayField: 'text',
                                    triggerAction: 'all',
                                    lazyRender:true,
                                    mode: 'local',
                                    editable: false
                                }]
                        },{
                            columnWidth:.5,
                            layout: 'form',
                            items: [{
                                xtype: 'combo',
                                anchor:'60%',
                                name:'objVolt',
                                fieldLabel: 'Напряжение',
                                store: new Ext.data.SimpleStore({
                                    data: [
                                        [1, '04'],
                                        [2, '6'],
                                        [3, '35'],
                                        [4, '110']
                                    ],
                                    id: 0,
                                    fields: ['value', 'text']
                                }),
                                valueField: 'value',
                                displayField: 'text',
                                triggerAction: 'all',
                                lazyRender:true,
                                mode: 'local',
                                editable: false
                            }]
                        },searchTab]
                    }]
                }]
        }); 
```

您会看到我想在表单中有一个文本字段、2 个组合框和一个网格。结果：

![在此处输入图像描述](../Images/802ef0f6ab0ac8e9a107de440333da33.png)

但我希望组合框会在网格上方。
我做错了什么？

**更新**

当我在 A1rPun 的答案中使用 layout: table 时，我得到：

![在此处输入图像描述](../Images/71bfacd7a0ac9449573669f8563f9544.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:14:48.883

你做错了几件事。首先尽量*减少嵌套*。做这样的事情：

```
{
    xtype: 'form'
    items: [{
        xtype: 'fieldset',
        layout: 'table'
        items: [{
            xtype:'textfield',
            colspan: 2
        },{
            xtype: 'combobox'
        },{
            xtype: 'combobox'
        }]
    }]
},
{
    xtype: 'grid'
} 
```

接下来是每个*容器*的布局。您正在指定`columnWidth`没有具有列布局的父项的项目。[这](http://docs.sencha.com/ext-js/4-1/#!/guide/layouts_and_containers)是一个很好的布局教程。

顺便说一句：在您的代码中找不到网格。

# restkit - RKPaginator 参数

> ID：14751508
> 
> 赞同：3
> 
> 时间：2013-02-07T12:48:11.063
> 
> 标签：restkit, tastypie

如何使用带有自定义“页面参数”的“RKPaginator”？我的 API 不提供“页面”参数，它使用这样的模式进行分页：

“ [http://my.domain.com/api/lists/?limit=5&offset=10](http://my.domain.com/api/lists/?limit=5&offset=10) ”

“offset”是下一页的参数。

我的 API 的 JSON 返回表单如下所示：

```
"meta": {
    "next": "/api/lists/?limit=5&offset=15",
    "total_count": 22,
    "previous": "/api/lists/?limit=5&offset=5",
    "limit": 5,
    "offset": 10
}, 
```

或者定制tastepie来处理这样的请求会更容易吗？" [http://my.domain.com/api/lists/?page=1](http://my.domain.com/api/lists/?page=1) " 我必须重写哪些方法？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T16:40:39.367

使用objective-c 类别覆盖RKPaginator::loadPage 方法，并计算与页码和限制的偏移量，如以下代码行所示：

```
#import "RKPaginator+Tastypie.h"
#import <objc/runtime.h>

@implementation RKPaginator (Tastypie)

- (void)TastypieLoadPage:(NSUInteger)pageNumber
{
    [self TastypieLoadPage:(pageNumber-1) * self.perPage];
}

+ (void)load {
    method_exchangeImplementations(class_getInstanceMethod(self, @selector(loadPage:)), class_getInstanceMethod(self, @selector(TastypieLoadPage:)));
}

@end 
```

这里是 RKPaginator 对象的构造：

```
RKPaginator *paginator = [[RKObjectManager sharedManager] paginatorWithPathPattern:@"yourResource/?limit=:perPage&offset=:currentPage"]; 
```

# ruby-on-rails - Rails 在多个模型上设计集授权

> ID：14751509
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:13.870
> 
> 标签：ruby-on-rails, ruby, authentication, devise

我有一个标准设计实现，并且在其他模型中，如果会话过期，似乎没有重定向，给用户留下错误消息。

例如，在用户个人资料页面上，如果未登录它只会显示错误，因为 current_user 不存在。

我是否在每个模型中设置了授权。或者更好的解决方案，我可以在应用程序控制器中设置它并在应用程序范围内进行设置，并在必要时简单地设置任何公共页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:53:07.477

如果您希望特定控制器检查用户是否已登录，那么您需要使用 Devise 的 authenticate_user！功能。请参阅下面的示例

```
class StuffController < ApplicationController
  before_filter :authenticate_user!
  def index
    ..... more implementation
  end
end 
```

如果用户未登录，他们将被重定向到登录表单，然后在成功登录后重定向到所需页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:55.870

使用前置过滤器，例如`before_filter :authenticate_user!`. 将它放在您的应用程序控制器中。是一个设计助手，所以如果你想要自定义行为，你可以重载该方法或简单地使用他们的助手方法`authenticate_user!`编写自己的过滤器。`user_signed_in?`

# javascript - 查找 JS 中使用的 CSS 类

> ID：14751510
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:17.450
> 
> 标签：javascript, html, css, code-cleanup

我正在着手清理现有站点的艰巨任务。我完全剥离了多个开发人员添加的价值多年的 CSS，转而添加一个新框架和我自己的一组清晰的 CSS 样式。

我想做的是为 JS 保留 ID 和为 CSS 保留类。我知道有些 JS 需要查看类，但这没关系。然而，有很多次我可以毫无问题地将类名更改为 ID。

现有站点在 457 个文件中有 11755 个 class=" 实例，但我不能将它们删除，因为我知道某些 JS 依赖于其中一些类。

任何人都可以就如何在 JS 中找到依赖类提供任何帮助吗？除了手动之外，我不知道如何做到这一点，这似乎很疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:00:07.403

使用以下正则表达式搜索所有文件（您必须弄清楚您正在使用的系统上的方式）

```
class=("[^"]*") 
```

with 将把你所有的类名放在引号内。

您将此列表与 javascript 中使用的字符串（用引号括起来）相交。交集将是 javascript 所依赖的类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:54:41.463

首先在文件中查找 $(' 或 $(" 或 getElementById

一个好的正则表达式将为您提供大量的工作材料。

# solr - 将 Solr 索引迁移到 Datastax（企业搜索）？

> ID：14751514
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:31.523
> 
> 标签：solr, lucene, datastax-enterprise

我有一个包含约 10 亿行 (180gb) 的索引 (Solr/Lucene v. 4.x)，并希望将其迁移到 Solr 的 Datastax 变体中。我找不到任何 HOWTO 或迁移指南。只需将索引目录复制到 Datastax solr.data// 就可以了，再加上发布 solrconfig.xml 和 schema.xml？

br

酸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T17:06:25.900

第一个问题是“存储”了多少数据，然后您需要将现有 Solr 数据导出为 CSV 文件，然后将该数据导入 Datastax Enterprise。

但是，您不能直接将 Lucene/Solr 索引移动到 Datastax Enterprise。一方面，DSE 为每个 Solr 文档存储了一些附加属性。

DSE 的全部意义在于，Cassandra 成为您的记录系统，维护原始数据，然后 DSE/Solr 只是对数据进行索引以支持丰富的查询。DSE 使用 Cassandra 来存储数据并使用 Solr 来索引数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T16:52:50.293

您可以使用类似[https://github.com/dbashford/solr2solr](https://github.com/dbashford/solr2solr)的方式将数据从一个复制到另一个，但您不能重复使用索引文件。

# android - Listview没有显示一致的数据android

> ID：14751515
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:33.830
> 
> 标签：android, listview, android-listview

我正在尝试[将此 JSON 响应](http://api.androidhive.info/contacts/)解析到 android 中的 ListView 上，我试图通过根据性别显示图像并为男性记录添加按钮来修改列表视图。

逻辑工作正常，除了最后两个条目。约翰韦恩和莱昂纳多迪卡普里奥有详细信息按钮，约翰尼德普和拉维坦布达也是如此。请指导我。

使用此代码，我试图根据性别区分它们

```
 if(rowData.mgender.equalsIgnoreCase("male"))
                {
                    imageViewStatus.setImageResource(R.drawable.male);
                }
    else{
                    imageViewStatus.setImageResource(R.drawable.female);
                button.setVisibility(View.GONE);

                } 
```

![我的输出](../Images/f6fe67d113293a6fae5ee8b3905d4366.png)

**编辑 1**

```
public View getView(final int position, View convertView, ViewGroup parent){
            ViewHolder holder = null;
            TextView title = null;
            TextView detail = null;
            TextView data=null;
            TextView message=null;

            ImageView imageViewStatus=null;
            Button button=null;

            final RowData rowData= getItem(position);
            if(null == convertView)

            {
                convertView = layoutInflater.inflate(R.layout.record, null);
                holder = new ViewHolder(convertView);
                convertView.setTag(holder);
            }

            holder = (ViewHolder) convertView.getTag();

            button=(Button)holder.getProceedButton();

            message=holder.getEmail();
            message.setText(rowData.mEmail);

            title = holder.getName();
            title.setText(rowData.mName);

            detail = holder.getAddress();
            detail.setText(rowData.mAdress);                                                    

            data= holder.getPhoneNumber();
            data.setText(rowData.mMobile+" "+rowData.mOffice);

            imageViewStatus=holder.getImage();

            System.out.println("This is the gender "+rowData.mgender);
            if(rowData.mgender.equalsIgnoreCase("male"))
            {
                imageViewStatus.setImageResource(R.drawable.male);
}

            else{
                imageViewStatus.setImageResource(R.drawable.female);
                System.out.println("Button Visibility"+button.getVisibility());

                button.setVisibility(View.GONE);

            }

            return convertView;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:58:28.383

请记住，当您滚动 ListView 子项时，它们总是会被重用。当您根据 中的某些条件设置属性时`getView()`，您必须在不满足条件时恢复该属性。当性别为女性时，您隐藏了按钮，但是当此视图被重用于填充男性联系人时，该按钮仍然不可见，您必须再次将其设置为可见。

看一下这个：

```
if(rowData.mgender.equalsIgnoreCase("male"))
{
    imageViewStatus.setImageResource(R.drawable.male);
    button.setVisibility(View.VISIBLE); // You need to add this line in your code
} else {
    imageViewStatus.setImageResource(R.drawable.female);
    button.setVisibility(View.GONE);
} 
```

# javascript - 设备浏览器检测

> ID：14751516
> 
> 赞同：1
> 
> 时间：2013-02-07T12:48:37.840
> 
> 标签：javascript, jquery, asp.net, browser-detection

我已经为一个客户站点建立了一个视差介绍——由于预算有限，动画只能在高端浏览器、IOS 和 ie9 上运行。

因此，我需要在站点主页中创建一个检测脚本，它将检测以下内容

如果：

*   ie9/ firefox / chrome/ safari - 留在当前站点
*   IOS - 转到 IOS 版本
*   Android - 跳到主站点
*   IE8 及以下 - 跳到主站点

我过去使用 PHP 进行过“移动”检测 - 但以上内容非常具体，所以我不知道如何处理它。主站点是 aspx，所以我可以将动画页面制作成 aspx 页面还使用服务器端检测，或查看 Javascript/jquery 选项或插件 - 或两者的组合..？

谁能推荐一个好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:51:44.540

希望不要进入浏览器检测/功能检测参数等等等等，[http:](http://www.quirksmode.org/js/detect.html) //www.quirksmode.org/js/detect.html有一个很好的脚本来处理这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:32:30.357

尝试使用以下代码，使用`navigator`对象::

```
 var ua = navigator.userAgent;
    if(navigator.appName == "Netscape"){ //for Firefox, Safari and Chrome
         //do nothing, stay on this page.
         return;
    }
    else if(navigator.appName == 'Microsoft Internet Explorer'){
        //check for version

        var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
        if (re.exec(ua) != null){
          version = parseFloat( RegExp.$1 );
        }
        if(version >= 9.0){
           //do nothing, stay on this page.
           return;
        }
        else{
           //redirect to the site for lower IE versions.
        }
    }
    else if(ua.match(/Android/i)){
       //code for skipping to Android version
    }
    else if(ua.match(/iPhone/i)){
       //code for skipping to iPhone version
    }
    else if(ua.match(/iPad/i)){
       //code for skipping to iPad version
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:51:30.237

有一个 JQuery 对象`$.browser`可以给你你在 javascript 中需要的东西，[这里](http://api.jquery.com/jQuery.browser/)是 api 调用。

在服务器端有一个 .net Request.Browser 对象[，这里](http://msdn.microsoft.com/en-us/library/system.web.httprequest.browser.aspx)也是它的 MSDN Api。

# javascript - 跟踪像素异步或同步

> ID：14751517
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:38.887
> 
> 标签：javascript, external, analytics, tracking, google-tag-manager

我想开始对网站上的所有标签使用谷歌标签管理器，但我刚刚读到它不支持同步标签。

我不完全确定以外部 js 作为源的跟踪像素、图像标签是否属于该类别。我不确定跟踪像素是否被阻塞。

有人可以澄清为什么跟踪像素是同步的还是不同步的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:22:37.507

**tl;dr：**您应该能够包含您想要包含在 GTM[1] 中的大多数标签。GTM 中的文本是指它如何加载标签并且它是异步加载的。由于大多数跟踪像素已经是异步的，所以应该没问题。

[1]：如果用户在 JavaScript 加载之前来到您的视线并立即离开，则可能会有轻微的数据丢失。对于大多数现代互联网连接，除非用户真的错误地访问该网站并立即按下返回按钮，否则不应发生这种情况。

* * *

长答案：

网络世界中脚本的同步或异步行为意味着脚本的加载方式。这两种方法的优缺点是：

同步：

*   保证脚本将在整个页面加载之前加载。
*   也意味着必须先加载同步加载的 JavaScript，然后才能完成任何操作。
*   通常会使页面变慢并导致部分呈现页面。
*   当您肯定需要在执行可以继续之前加载 javascript 时，应该主要完成。

异步：

*   在用户响应方面通常更快（页面在加载时感觉更快）
*   js 稍后加载，因此后续代码不能假定脚本已加载。
*   如果第三方服务器关闭或损坏，还可以防止您的网站崩溃。

# wordpress - 标题内的 Wordpress 标题

> ID：14751521
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:45.577
> 
> 标签：wordpress, page-title

我很想改变标题在 Wordpress 上 header.php 文件中的工作方式。目前我有它，所以它会显示用户所在的每个页面的名称，这很好用，除了加载博客文章的页面。

我希望它设置为 header.php 文件中的“标题”元素也可以处理自定义名称，即当您访问博客页面时，而不是加载最新博客的名称作为标题我希望它只是说博客.

我决定创建自己的变量，然后使用头检查来查看是否已设置，但我无法让它工作，将它放在调用头文件之前或之后。

索引.php

```
$header_title = "Blog";
get_header(); ?> 
```

然后在 header.php 文件中，我有以下代码。

```
<title>
April Kelley | 
    <?php if (isset($header_title)) { 
        echo $header_title;
     } else {
        the_title(); 
    }?> 
```

现在在我看来，这应该可行，那么我哪里出错了？

PS。我只打算在某些页面上使用这个 $header_title 变量，比如 index.php 和 seach.php 页面本身拉入博客文章，所以 isset 仍然会返回 false 是找不到变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:09:01.077

A proper way of doing this is to use [`the_title`](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_title) filter, you don't need to modify template, e.g. :

```
function my_title($title, $id) {
    if (is_home())
        $title.= ' | Blog';

    return $title;
}
add_filter('the_title', 'my_title'); 
```

If you really want to use your own var, you should read this : [How to use own php variables in wordpress template?](https://stackoverflow.com/questions/3211305/how-to-use-own-php-variables-in-wordpress-template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:59:17.297

代替

```
the_title(); 
```

作为

```
echo get_the_title() 
```

希望这对你有用

# javascript - 处理 CSV：Highcharts

> ID：14751523
> 
> 赞同：0
> 
> 时间：2013-02-07T12:48:47.130
> 
> 标签：javascript, jquery, highcharts

我刚刚开始使用 Highcharts JavaScript 插件，但是在遵循 Highcharts 网站上的文档之后，我似乎无法正确加载我的 CSV 文件。图表生成，并在加载数据时读取 CSV，但不是将数据直接加载到图表中，并从数据创建一条线，它只是将所有数据推送到底部的系列部分。这是我的代码：

```
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">

        var options = {
    chart: {
        renderTo: 'container',
        defaultSeriesType: 'line'
    },
    title: {
        text: 'wavenumber'
    },
    xAxis: {
            categories: []
    },
    yAxis: {
        title: {
            text: '% Transmission'
        }
    },
    series: []
};

$.get('1_phenol.csv', function(data) {
    // Split the lines
    var lines = data.split('\n');

    // Iterate over the lines and add categories or series
    $.each(lines, function(lineNo, line) {
        var items = line.split(',');

        // header line containes categories
        if (lineNo == 0) {
            $.each(items, function(itemNo, item) {
                if (itemNo > 0) options.xAxis.categories.push(item);
            });
        }

        // the rest of the lines contain data with their name in the first position
        else {
            var series = {
                data: []
            };
            $.each(items, function(itemNo, item) {
                if (itemNo == 0) {
                    series.name = item;
                } else {
                    series.data.push(parseFloat(item));
                }
            });

            options.series.push(series);

        }

    });

    // Create the chart
    var chart = new Highcharts.Chart(options);
});
        </script> 
```

然后，只是为了让您了解我的 CSV 文件的外观，这里有几行：

```
phenol
,
,
,
,
,
,
,
,
,
,
605,53.527874
610,53.527874
615,51.276432
620,57.655518
625,59.90696
630,61.032677
635,62.158401
640,62.908882
645,62.908882 
```

因此，如果你们知道我如何调整代码以将 CSV 加载到容器的正确区域，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:09:40.240

我建议熟悉有关解析数据的文章[http://docs.highcharts.com/#preprocesssing-data-from-a-file 。](http://docs.highcharts.com/#preprocesssing-data-from-a-file)

您的 csv 是否与页面或外部服务器位于同一目录中？

# wpf - 通过绑定 -WPF 从资源中显示图像

> ID：14751525
> 
> 赞同：6
> 
> 时间：2013-02-07T12:48:56.967
> 
> 标签：wpf, image, resources

我在资源上有一个图标，它的关键是：`xxx`

我想将它绑定到 xaml 中的图像..

1：

```
 <Image Source="{x:Static p:Resources.xxx}"></Image> 
```

2：

```
 <Image>
     <Image.Source>
         <BitmapImage UriSource="{Binding x:Static p:Resources.xxx}"/>
        </Image.Source>
   </Image> 
```

3：

```
 <Image Source=" {Binding x:Static p:Resources.xxx,Converter={StaticResource IconToBitmap_Converter}}"></Image> 
```

4：

```
 <Image>
    <Image.Source>
        <BitmapImage UriSource="{Binding x:Static p:Resources.xxx,Converter={StaticResource IconToBitmap_Converter}}"/>
    </Image.Source>
 </Image> 
```

以上方法都行不通，我该怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T14:08:07.480

首先，您必须将您的图像添加到解决方案资源管理器中的资源文件中。接下来，您必须将 Image 的 Build Action 设置为 Resource，然后您可以在 XAML 代码中使用它，如下所示：

```
<UserControl>
<UserControl.Resources>
    <ResourceDictionary>
        <BitmapImage x:Key="name" UriSource="Resources/yourimage.bmp" />
    </ResourceDictionary>
</UserControl.Resources>
<Grid>
    <Image  Source="{StaticResource name}"/>
</Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-25T17:28:48.590

首先：添加资源 rsx 然后：将图像作为图像添加到资源文件中，并将图像构建操作设置为 Resource。现在您可以像这样访问图像：

```
<Image Source="pack://application:,,,/Resources/image.png"/> 
```

# java - JNI - 来自 C++ 的免费 ByteBuffer

> ID：14751527
> 
> 赞同：4
> 
> 时间：2013-02-07T12:49:01.270
> 
> 标签：java, java-native-interface

**概括**

1.  使用 ByteBuffer.allocateDirect(someBufferSize) 在 Java 中创建称为缓冲区的 ByteBuffer
2.  用数据填充缓冲区
3.  将缓冲区作为作业对象传递给 C++ - jbuffer
4.  使用 env->GetDirectBufferAddress(jbuffer) 获取缓冲区直接指针
5.  在 C++ 端处理缓冲区数据。如何防止 GC 清理我们的缓冲区，否则它永远不会发生？
6.  工作完成——我们现在不需要 jbuffer。
7.  释放jbuffer？free(jbuffer) - 将引发无效地址错误

**长部分**

我使用下一个代码通过 Java AssetManager 加载 PNG 文件，以使用它们创建 Open GL ES 2.0 纹理。

**Java端PNG类**

```
import java.nio.ByteBuffer;
import android.graphics.Bitmap;

public class PNG 
{
 private static final int BYTES_PER_PIXEL_PNG = 4;
 private static final String LOG_TAG = "[PNG]";
 public int width;
 public int height;
 public ByteBuffer pixels;

 public PNG(Bitmap bitmap)
 {
  this.width = bitmap.getWidth();
  this.height = bitmap.getHeight();
  this.pixels = ByteBuffer.allocateDirect(this.width * this.height * BYTES_PER_PIXEL_PNG);
  bitmap.copyPixelsToBuffer(this.pixels);
 }
}

public static PNG loadPNG(String path)
{
    InputStream is = null;
    try
    {
        is = ASSETS_MANAGER.open(path);//get png file stream with AssetsManager instance
    }
    catch (IOException e)
    {
        Log.e(LOG_TAG, "Can't load png - " + path, e);
    }

    return new PNG(BitmapFactory.decodeStream(is));
} 
```

**C++ 端 PNG**

```
typedef struct png
{
int width;
int height;
char* pixels;
} png;

png* load_png(const char* path)
{
 png* res = (res*) malloc(sizeof(png);
 ...
 jobject _png = env->CallStaticObjectMethod(get_java_lib_class(), get_method_id(JAVA_LIB_LOAD_PNG, JAVA_LIB_LOAD_PNG_SIGN), _path);//Calling loadPng() from Java, get PNG jobject
 jobject _pixels =  env->GetObjectField(_png, PNG_FIELDS->PNG_PIXELS_ID);//Getting pixels field from Java PNG jobject
 res->pixels = (char*) env->GetDirectBufferAddress(_pixels);//Get direct pointer to our pixel data
 //Cleanup
 ...
 env->DeleteLocalRef(_png);
 env->DeleteLocalRef(_pixels);
 return res;
} 
```

**然后使用 png 创建纹理**

```
void test_create_tex(const char* path)
{
 ...
 png* source = load_png(path);
 glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, source->width, source->height, 0, GL_RGBA, GL_UNSIGNED_BYTE, source->pixels);
//We don't need source pixel data any more
//free(source->pixels);//INVALID HEAP ADDRESS (deadbaad)
free(source);
} 
```

那么在 C++ 端使用它的直接指针后如何释放字节缓冲区呢？它是直接分配的（如 malloc - 在本机端）并且必须被释放，否则我会得到 OutOfMemory 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:21:58.413

您不需要释放缓冲区。您已经在 J​​ava 端分配了它，这意味着它是 JVM 对象，GC 会处理它。与在 C 端分配相反，因此是 GC 不知道的本机对象。您甚至不需要这样做`DeleteLocalRef`，因为在从本地方法返回时，JNI 机器将为您删除所有本地引用。只有在一个本机调用范围内有数百个 JNI 调用返回 JVM 时，您才需要显式删除，因此即使在返回 JVM 之前，您也会用完句柄。

我必须承认，我不确切知道 GC 是如何知道它不应该触及您的 ByteBuffer，但我猜想通过调用`GetObjectField`您正在增加 ByteBuffer 上的 refcount 并减少`DeleteLocalRef`. 所以在这两个 JNI 调用之间，ByteBuffer 是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:58:57.310

在我看来，你不必担心 的释放`ByteBuffer pixels`，因为它是由 JVM 管理的。您真正应该关心的是在 C++ 使用它时防止它被垃圾收集。

# c# - Windows Phone - 媒体库

> ID：14751529
> 
> 赞同：1
> 
> 时间：2013-02-07T12:49:04.550
> 
> 标签：c#, windows-phone

这是我的代码。

```
MediaLibrary myMediaLibrary = new MediaLibrary();
Uri myUri = new Uri(@"Images/Jellyfish.jpg", UriKind.Relative);
System.IO.Stream photoStream = App.GetResourceStream(myUri).Stream;
byte[] buffer = new byte[photoStream.Length];
photoStream.Read(buffer, 0, Convert.ToInt32(photoStream.Length));
myMediaLibrary.SavePicture("Jellyfish.jpg", buffer); 
```

在模拟器上，一切都被保存了。但在设备上显示错误“发生意外错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-07T14:44:49.590

直接保存您的流不起作用？

```
MediaLibrary myMediaLibrary = new MediaLibrary();
Uri myUri = new Uri(@"Images/Jellyfish.jpg", UriKind.Relative);
System.IO.Stream photoStream = App.GetResourceStream(myUri).Stream;
myMediaLibrary.SavePicture("Jellyfish.jpg", photoStream); 
```

或者，您可以使用`WriteableBitmap`并将其保存到`Stream`，然后使用`MediaLibray`.

```
wr.SaveJpeg(FileStream, wr.PixelWidth, wr.PixelHeight, 0, 85); 
```

# php - PHP：回显txt文件的几行选定的行

> ID：14751534
> 
> 赞同：2
> 
> 时间：2013-02-07T12:49:22.207
> 
> 标签：php, echo, lines

我只需要使用 PHP 从 .txt 文件中回显选定的行。txt 文件内容如下所示：

```
1 111 111 111 111 111 111 111 111 111 111
2 196 182 227 190 195 196 278 197 323 265
3 84.1 84.1 84.1 84.2 85.4 84.1 84.2 84.1 84.1 84.1
4 107 107 107 107 107 107 107 107 107 107
5 10.0 9.29 9.86 9.90 9.57 9.56 9.52 9.55 10.0 9.62
6 0.652 0.622 0.676 0.617 0.637 0.617 0.563 0.601 0.586 0.601
7 132 132 132 132 132 132 481 132 132 132
8 113 113 113 113 113 113 113 113 113 113
9 510 571 604 670 647 667 656 257 264 431
10 245 246 247 246 246 245 247 246 247 247 
```

以前的工作代码正在回显每一行。

```
$fp = fopen("http://xxx/myfile.txt","r");
while (!feof($fp)) {
$page .= fgets($fp, 4096); 
}
fclose($fp); 
echo $page;
break; 
```

我试图获得相同的格式，但仅限于选定的行。例如，只说行：3、5、8、10。

然后，第二步是是否可以以与初始顺序不同的顺序回显这些行。

如果有人知道一个简单的方法来做到这一点，那就太好了！
提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:51:13.687

```
$lines = file('http://xxx/myfile.txt');

print $lines[2];  // line 3
print $lines[4];  // line 5
... 
```

看[`file()`](http://php.net/manual/en/function.file.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:56:32.290

这是如何完成的示例：

```
function echo_selected_lines_of_file($file, array $lines)
{
    $fContents = file_get_contents($file); // read the file
    $fLines = explode("\n", $fContents); // split the lines
    foreach($fLines as $key=>$fLine) // foreach line...
        if(in_array($key, $lines)) //if its in the $lines array, print it
            echo $fLine.'<br>';
}

echo_selected_lines_of_file('index.php', array(1,4,7)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-31T07:02:13.050

您可以使用 file() 将每一行转换为数组。但是如果你的文件很大，它会消耗一些内存。

```
$lines_to_print = [1,3,5,8];

$lines = file('file.txt');
for($i in $line_to_print) {
    echo $lines[$i];
} 
```

一个有效的解决方案是

```
$i = 0;
$lines_to_print = [1,3,5,8];

$file = fopen("file.txt", "r");
while(!feof($file)){
    $line = fgets($file);
    if(in_array(++$i, $lines_to_print)) {
        echo $line
    }
}
fclose($file); 
```

# java - HTTP 状态 415 - 不支持的媒体类型

> ID：14751536
> 
> 赞同：11
> 
> 时间：2013-02-07T12:49:31.007
> 
> 标签：java, web-services, rest, http-status-code-415

我正在开发 Java RESTful Web 服务。在测试 restful 服务时，我得到了正确的 GET 和 DELETE 方法的响应，但它不适用于 POST 和 PUT 方法。谁能帮我？我写了以下代码：

学生服务.java

```
@Stateless
@Path("students")
public class StudentService extends StudentServiceLocal<Students> {
    @PersistenceContext(unitName = "RestFulAPIPU")
    private EntityManager em;

    public StudentsFacadeREST() {
        super(Students.class);
    }

    @POST
    @Override
    @Consumes({"application/xml", "application/json"})
    public String create(Students entity) {
        return(super.create(entity));
    }

    @PUT
    @Override
    @Consumes({"application/xml", "application/json"})
    public String edit(@PathParam("id") Students entity) {
        return(super.edit(entity));
    }

    @DELETE    
    @Path("{id}")
    public String remove(@PathParam("id") Integer id) {
        return(super.remove(super.find(id)));
    }

    @GET
    @Path("{id}")
    @Produces({"application/xml", "application/json"})
    public Students find(@PathParam("id") Integer id) {
        return super.find(id);
    }

    @GET
    @Override
    @Produces({"application/xml", "application/json"})
    public List<Students> findAll() {
        return super.findAll();
    }

    @GET
    @Path("{from}/{to}")
    @Produces({"application/xml", "application/json"})
    public List<Students> findRange(@PathParam("from") Integer from, @PathParam("to") Integer to) {
        return super.findRange(new int[]{from, to});
    }

    @GET
    @Path("count")
    @Produces("text/plain")
    public String countREST() {
        return String.valueOf(super.count());
    }

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

} 
```

StudentServiceLocal.java

```
public abstract class AbstractFacade<T> {
    private Class<T> entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public String create(T entity) {
        getEntityManager().persist(entity);
        return "inserted";
    }

    public String edit(T entity) {
           getEntityManager().merge(entity);
        return "Updated";
    }

    public String remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));        
            return "deleted";  
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    public List<T> findAll() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return getEntityManager().createQuery(cq).getResultList();
    }

    public List<T> findRange(int[] range) {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        q.setMaxResults(range[1] - range[0]);
        q.setFirstResult(range[0]);
        return q.getResultList();
    }

    public int count() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
        cq.select(getEntityManager().getCriteriaBuilder().count(rt));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        return ((Long) q.getSingleResult()).intValue();
    }

} 
```

学生.java

```
@Entity
@Table(name = "students")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Students.findAll", query = "SELECT s FROM Students s"),
    @NamedQuery(name = "Students.findByRollno", query = "SELECT s FROM Students s WHERE s.rollno = :rollno"),
    @NamedQuery(name = "Students.findByName", query = "SELECT s FROM Students s WHERE s.name = :name")})
public class Students implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "rollno")
    private Integer rollno;
    @Size(max = 20)
    @Column(name = "name")
    private String name;

    public Students() {
    }

    public Students(Integer rollno) {
        this.rollno = rollno;
    }

    public Integer getRollno() {
        return rollno;
    }

    public void setRollno(Integer rollno) {
        this.rollno = rollno;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (rollno != null ? rollno.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Students)) {
            return false;
        }
        Students other = (Students) object;
        if ((this.rollno == null && other.rollno != null) || (this.rollno != null && !this.rollno.equals(other.rollno))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.ikanksha.rest.entity.Students[ rollno=" + rollno + " ]";
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-10T14:46:18.887

确保您`Content-Type: application/xml`在请求的标头中进行了设置。

我不知道它是如何使用 NetBeans 完成的，但使用[RESTClient](https://addons.mozilla.org/en-US/firefox/addon/restclient/)非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T16:12:02.543

我的错误是

> InboundJaxrsResponse{ClientResponse{method=POST, uri="http://localhost:8080/test/mypath", status=415, reason=Unsupported Media Type}}

添加以下依赖`pom.xml`项解决了我的问题：

```
<dependency>
    <groupId>org.glassfish.jersey.media</groupId>
    <artifactId>jersey-media-json-jackson</artifactId>
    <version>2.22.1</version>
</dependency> 
```

`MyModelClass`有 name 和 surname 属性

```
@POST
@Path("mypath")
@Consumes(MediaType.APPLICATION_JSON)
public Response convertToObject(MyModelClass modelClass){} 
```

像这样在测试课上发帖。

```
String entity = "{\"name\":\"My Name\", \"surname\":\"My Surname\"}"

request().post(Entity.json(entity) 
```

如果您 POST 或 PUT 一些数据，请注册 JacksonProvider 和 JacksonFeature

```
class TestRestApplication extends ResourceConfig {

    public TestRestApplication() {
        packages(true, "com.your_app_package");
        register(JacksonProvider.class);
        register(JacksonFeature.class);
        property(ServerProperties.RESPONSE_SET_STATUS_OVER_SEND_ERROR, "true");
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T07:21:03.513

我刚才遇到了同样的问题......
我的解决方案是删除带有参数的构造函数。
在您的情况下：删除

```
public Students(Integer rollno) {
    this.rollno = rollno;
} 
```

# java - 管理标签侦听器数组 JAVA GUI

> ID：14751537
> 
> 赞同：0
> 
> 时间：2013-02-07T12:49:33.713
> 
> 标签：java, user-interface, swt, listener

我正在尝试在 SWT、JAVA 中看起来像棋盘。我试图做一系列按钮，但按钮的颜色无法更改（经过长时间的研究，我已经完成了！）。所以我做了一系列标签，我可以改变它们的颜色，但现在我无法在一个监听器中处理它们，而且我认为 64 个复制粘贴监听器不是正确的做法。但是，我发现 setActionCommand 根本不适用于标签。

你有什么建议我可以做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:16:39.787

`Listener`您可以对多个s使用相同`Label`的：

```
public static void main(String[] args)
{
    final Display display = new Display();
    Shell shell = new Shell(display);

    GridLayout layout = new GridLayout(8, true);
    layout.horizontalSpacing = 0;
    layout.verticalSpacing = 0;

    shell.setLayout(layout);
    shell.setText("Chess");

    /* Define listener once */
    Listener listener = new Listener()
    {
        @Override
        public void handleEvent(Event event)
        {
            /* event.widget is the source of the event */
            if(event.widget instanceof Label)
            {
                System.out.println(event.widget.getData());
            }
        }
    };

    for(int i = 0; i < 64; i++)
    {
        Label label = new Label(shell, SWT.CENTER);
        label.setText(i + "");
        label.setData(i);

        /* Use listener here */
        label.addListener(SWT.MouseUp, listener);

        label.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        Color background = ((i + (i/8))%2 == 0) ? display.getSystemColor(SWT.COLOR_BLACK) : display.getSystemColor(SWT.COLOR_WHITE);
        Color foreground = ((i + (i/8))%2 == 0) ? display.getSystemColor(SWT.COLOR_WHITE) : display.getSystemColor(SWT.COLOR_BLACK);

        label.setBackground(background);
        label.setForeground(foreground);
    }

    shell.pack();
    shell.setSize(200, 200);
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

它将`Label`在单击时打印出 s 数据。

看起来像这样：

![在此处输入图像描述](../Images/9bef25307e572619feca7fedf465edcf.png)

# wpf - 失去焦点时关闭 Windows SplashScreen 会引发 Win32Exception

> ID：14751539
> 
> 赞同：2
> 
> 时间：2013-02-07T12:49:38.833
> 
> 标签：wpf, .net-3.5, splash-screen

在我们的应用程序中，我们为登录屏幕的初始加载打开了一个启动屏幕，这个登录屏幕显示为异步的。当我们关闭启动画面时，有时会出现以下错误：

> System.ComponentModel.Win32Exception 未处理。Message="操作成功完成"

我发现这与失去焦点有关，这是 .net 3.5 中的一个已知错误。但是我没有在我的代码中找到解决此问题的解决方案。而且我们无法将应用程序升级到 4.0。

我已经尝试过：`Application.Current.MainWindow.Focus()`但这不起作用，因为由于异步调用，我不在正确的线程上

我希望有人以前遇到过这个问题，并且可以为我提供一个解决这个错误的工作。

这是代码，启动画面来自`system.windows.dll`：

```
 Public Sub New(ByVal splashResourceName As String)

        logonSplash = New SplashScreen(splashResourceName)
        logonSplash.Show(False)

        InitializeComponent()
        GetAllInfo()
        DataContext = context

    End Sub

    Private Sub LoginDialog_Loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded

        'Focus()
        If logonSplash IsNot Nothing Then
            logonSplash.Close(Nothing)
            logonSplash = Nothing
        End If

        txtPassword.Focus()

    End Sub 
```

# c# - 获取网格内的对象坐标

> ID：14751540
> 
> 赞同：0
> 
> 时间：2013-02-07T12:49:42.347
> 
> 标签：c#, wpf, grid, coordinates

我有一个看起来像这样的网格：

```
<grid name="my_grid"></grid> 
```

然后我有一个名为 paramBox 的类对象，名为*myBox*。这个对象被插入到网格中，如下所示：

```
my_grid.Children.Add(myBox); 
```

现在这是我的问题：有没有办法在网格内获取*myBox*的坐标（x 和 y 值） ？我试过使用 PointToScreen 没有任何运气。如果我没有在类/网格中声明任何 x 和 y 值，是否可以获得坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:03:06.603

您可以使用[Margin 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.margin%28v=vs.95%29.aspx)来移动控件。

> 边距是布局创建 UI 时此对象与将相邻的其他对象之间的空间。参与布局的其他对象可能是对等对象（例如公共父控件集合中的其他对象），也可能是该对象在可视树中的父对象。

或按照@my 的建议使用画布而不是网格。这是一个[演示](http://wpftutorial.net/Canvas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:51:32.047

我建议您使用 Canvas 而不是 Grid。然后，如果您要移动一个元素，您可以这样做（这可能不完全适合您的问题，但我可能有一些想法）：

关于元素`MouseDown`事件：

```
private void Element _MouseDown(object sender, MouseButtonEventArgs e)
{
    Point position = e.GetPosition(myCanvas);

    this.myElement.RenderTransform =
            new TranslateTransform(position.X - myElement/ 2.0,
                                    position.Y - myElement/ 2.0);

        this.myCanvas.MouseMove += myCanvas_MouseMove;

        this.myCanvas.MouseUp += myCanvas_MouseUp;
}

private void myCanvas_MouseMove(object sender, MouseEventArgs e)
{
    Point position = e.GetPosition(this.myCanvas);
    ((TranslateTransform)(this.myElement.RenderTransform)).X = position.X - myElement/ 2.0;
        //
    ((TranslateTransform)(this.myElement.RenderTransform)).Y = position.Y - myElement/ 2.0;
}

 private void myCanvas_MouseUp(object sender, MouseEventArgs e)
{
     this.myCanvas.MouseMove -= myCanvas_MouseMove;

     this.myCanvas.MouseUp -= myCanvas_MouseUp;
} 
```

# mysql - 提高我的 SQL 的效率

> ID：14751541
> 
> 赞同：2
> 
> 时间：2013-02-07T12:49:45.513
> 
> 标签：mysql, sql, subquery

我有一个 LIKES（likeID、userID、objectID、likeDate）的 MySQL 表，我希望能够计算在相关用户之后所做的所有“喜欢”。

通常我会得到日期：

```
SELECT likeDate FROM LIKES WHERE userID = <logged in user's ID> 
```

然后找到所有日期并计算返回的行（或使用mysql COUNT），如下所示：

```
SELECT * FROM LIKES WHERE likeDate > <given date> 
```

但是，我确信有一种方法可以在一个查询中执行此操作，而不是对数据库进行两次调用。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:53:29.953

将第一个查询的结果直接输入第二个查询：

```
SELECT COUNT(*)
FROM LIKES
WHERE likeDate > (
    SELECT max(likeDate)
    FROM LIKES
    WHERE userID = <logged in user's ID>
) 
```

但是请注意，您需要`max()`在第一个查询中添加使用。

此查询应该是获得答案的最快方法。为确保最佳性能，请在`userID`和上添加索引`likeDate`：

```
create index likes_userId on likes(userID);
create index likes_likeDate on likes(likeDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:52:12.847

```
SELECT l1.likeDate, 
    (SELECT COUNT(1) FROM LIKES l2 WHERE l2.likeDate > l1.likeDate) AS likesAfter
FROM LIKES l1
WHERE userID = ?
GROUP BY l1.likeDate 
```

或者作为一个连接，

```
SELECT l1.likeDate, COUNT(1)
FROM LIKES l1
LEFT OUTER JOIN LIKES l2 ON l2.likeDate > l1.likeDate
WHERE userID = ?
GROUP BY l1.likeDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:58:38.607

```
SELECT * FROM LIKES WHERE likeDate > 
IFNULL((SELECT max(likeDate) FROM LIKES WHERE userID = <logged in user's ID> 
                                  adn  objectId=<question's Id>),0)
and objectId=<question's Id> 
```

# jquery - Jquery 动态验证

> ID：14751544
> 
> 赞同：1
> 
> 时间：2013-02-07T12:49:51.057
> 
> 标签：jquery, jquery-validate

在 html 中，只有三个文件名称不同，例如 : `number_1 , number_2, number_3`。我想用简洁的js代码进行上述验证。但它不起作用。有人可以解决这个问题吗？

这是我的 HTML，我想借助下面提到的 jquery 规则方法对其进行 jquery 验证：

```
 <form id="cc_form" method="post" action="">
    <div id="container">
    <div id="block1">
    CC_number_1 : <input type="text" id="number_1" name="number_1"> <br>
    </div>
    <div id="block2">
    CC_number_2 : <input type="text" id="number_2" name="number_2"> <br>
    </div>
    <div id="block3">
    CC_number_3 : <input type="text" id="number_3" name="number_3"> <br>
    </div>
    </div>
    <input type="submit" value="submit" name="submit">
    </form> 
```

这是我的验证脚本，我想通过它进行如下验证。此处不包含 Jquery 库文件包含脚本。因此，请添加这些文件以进行如下验证。

```
 $("#cc_form").validate({

    rules:{
    [name^='number_']:{
    required:true
    }

    },
    messages:{
    [name^='number_']:{
    required:"Enter number"
    }
    }

    });
    enter code here 
```

在 html 中，只有三个文件名称不同，例如 : `number_1 , number_2, number_3`。我想用简洁的js代码进行上述验证。但它不起作用。有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:59:45.597

尝试这个 ：-

```
$(document).ready(function(){
$("#cc_form").validate();
    $("input[id*=number]").each(function() {
        $(this).rules("add", {
            required: true,
            messages: {
                required: "This is required field"
            }
        });
    });
  }); 
```

该[`.validate()`文档](http://docs.jquery.com/Plugins/Validation#Plugin_methods)是一个很好的教程，以及如何添加规则[`.rules("add", option)`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)：

> 添加指定规则并返回第一个匹配元素的所有规则。要求验证父表单，即`$("form").validate()`首先调用。

请确保首先您需要加载`Jquery`库，然后再`jquery.validate.min.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:09:08.313

首先-`[name^='number']`不是正确的对象标签-您必须用引号将其封装。而且，不幸的是，它仍然不起作用，因为显然规则和消息标签需要是特定元素的 id 而不是选择器。

在这里工作小提琴：http: [//jsfiddle.net/6nNRD/](http://jsfiddle.net/6nNRD/)

# jquery - 在窗口调整大小时删除 Highchart 数据标签

> ID：14751547
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:49:57.550
> 
> 标签：jquery, html, css, charts, highcharts

我一直在尝试使用 Highcharts 来实现饼图，但遇到了一个问题，即裁剪非常低分辨率的数据标签。

我尝试使用格式化程序添加 windows.resize: function() 但失败了。

这是我目前正在使用的代码：

```
 // Radialize the colors
            Highcharts.getOptions().colors = $.map(Highcharts.getOptions().colors, function(color) {
                return {
                    radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
                    stops: [
                        [0, color],
                        [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
                    ]
                };
            });

            // Build the chart
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    backgroundColor: {
                    linearGradient: [0, 0, 500, 500],
                    stops: [

                     ]
                  },                        
                },
                title: {
                    text: 'Header Here'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                    percentageDecimals: 0
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: false,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            formatter: function() {
                                return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage) +'%';
                            }
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Votes',
                    data: [
                        ['Vote One', 50],                   
                        ['Vote Two', 50],
                        ['Vote three', 2]
                    ]
                }]
            }); 
```

除了在调整大小时创建一个新图表之外，还有其他方法可以将标签设置为假/隐藏吗？并再次显示在某个分辨率之上？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:22:56.783

您可以将数据标签的 useHTML 设置为 true，并在格式化程序中定义您自己的 div。然后，当您捕获调整大小事件时，请使用显示/隐藏功能。

单击按钮后显示/隐藏数据标签的简单示例可在此处获得：

[http://jsfiddle.net/VYGEW/](http://jsfiddle.net/VYGEW/)

```
chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        title: {
            text: 'Monthly Average Temperature'
        },
        plotOptions: {
            series: {
                dataLabels: {
                    enabled: true,
                    useHTML: true,
                    formatter: function () {
                        return '<div class="datalabel">' + this.y + '</div>';
                    }
                }
            }
        },
        series: [{
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }]
    }, function (chart) {

        $('#btn').toggle(function () {

            $('.datalabel').hide();
        }, function () {
            $('.datalabel').show();
        });

    }); 
```

# camera - 旋转相机三.js

> ID：14751551
> 
> 赞同：1
> 
> 时间：2013-02-07T12:50:15.457
> 
> 标签：camera, rotation, three.js

当有人单击按钮以在对象周围移动相机时，我正在尝试。但我不想移动对象（它需要居中）。

我有：

和js函数

```
function MoveUp()
{
    camera.position.y -=50;
}
function MoveDown()
{
    camera.position.y +=50;
} 
```

但是当我单击按钮时，这是向下/向上移动对象。是否有任何可能只是移动相机周围以及如何？我的对象只是立方体..示例：

```
var geometry = new THREE.CubeGeometry( 50, 50, 50 );
        var material = new THREE.MeshFaceMaterial( [
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'drvo.jpg' ) } ),
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'drvo.jpg' ) } ),
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'drvo.jpg' ) } ),
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'beton.jpg' ) } ),
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'beton.jpg' ) } ),
        new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'beton.jpg' ) } )
    ] );

    cube = new THREE.Mesh( geometry, material );
    cube.position.z = 450;
    scene.add(cube); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:30:32.223

Take a look at the RollControls.js at three.js/examples/js/controls/RollControls.js and also at the examples two directories up. Since the controls are there, why try to do it yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:56:52.253

您正在更改相机位置，同时保持其方向。我猜您想重新定位相机，使其指向您的立方体（实际上，将其居中）。移动相机后，尝试`camera.lookAt(cube.position);`这需要是您的 MoveUp 和 MoveDown 中的最后一件事

# jquery - Jquery 接受负值和非负值

> ID：14751552
> 
> 赞同：0
> 
> 时间：2013-02-07T12:50:22.307
> 
> 标签：jquery

我试过这个。这只接受整数。我想要消极的和非消极的。

```
 $(function () {
        $('.spinner').keyup(function () {
            if (this.value.match(/[^0-9]/g)) {
                this.value = this.value.replace(/[^0-9]/g, '');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:00:39.630

无需匹配和替换。代替

```
if (this.value.match(/[^0-9]/g)) {
    this.value = this.value.replace(/[^0-9]/g, '');
} 
```

利用

```
this.value = this.value.replace(/([+-]?\d+)/, '$1'); 
```

我假设您只希望在该字段中找到一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:55:47.227

还没有测试，但你有没有尝试过这样的事情：

```
$(function () {
    $('.spinner').keyup(function () {
        if (this.value.match(/[^0-9-]/g)) {
            this.value = this.value.replace(/[^0-9-]/g, '');
        }
    });
}); 
```

通过在正则表达式中添加额外的“-”：第一个是指定一个范围，第二个是实际的字符。

您还可以优化整个过程并始终将值设置为：匹配的所有内容：

```
^[-]{0,1}[0-9]+ 
```

行的开头没有或 - 后跟连续的数字，至少一个或多个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:11:42.147

您可以继续使用正则表达式，或者如果您更喜欢在我看来更具可读性的“纯逻辑”，您可以使用这样的代码：

```
$('.spinner').keyup(function (evt) {
    var previousValue = $(this).data("prev") || "";
    var currentValue = this.value;
    var valid = true;
    if (currentValue.length > 0 && currentValue !== "-") {
        //having something we can check:
        var number = Number(currentValue);

        //integer only if not NaN and integer value equals
        valid = (!isNaN(number) && parseInt(number, 10) == number);
    }

    if (valid) {
        $(this).data("prev", currentValue);
    } else {
        //restore last good value:
        this.value = (previousValue.length == 0) ? "" : parseInt(previousValue, 10);
    }
}); 
```

这将每次检查该值是否为有效整数，如果无效，则恢复通过验证的先前值。

`Number()`注意代替的用法`parseInt()`，这是因为后面允许像“5a”这样被解析为5的东西，而`Number("5a")`会给出NaN值。

[现场测试用例](http://jsfiddle.net/8dCaY/)。

# angularjs - 如何获取验证错误值（=输入值，但不在模型中）angularjs方式

> ID：14751557
> 
> 赞同：3
> 
> 时间：2013-02-07T12:50:46.383
> 
> 标签：angularjs

我试图在错误消息中获取 user.name.length 值。如果用jQuery的话是可以实现的，但是Angularjs没有什么独特的方法吗？

```
<form novalidate name="myForm" ng-submit="addUser()">
<p>Name:
<input type="text" name="name" ng-model="user.name" required ng-minlength="5" ng-maxlength="8">
<span ng-show="myForm.name.$error.minlength">{{user.name.length}} too short!</span> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T02:01:48.087

您可以尝试使用`{{myForm.name.$viewValue.length}}`，如下所示：

```
<input type="text" name="name" ng-model="user.name" ng-minlength="5" ng-maxlength="8" />
                <span ng-show="myForm.name.$error.minlength">{{myForm.name.$viewValue.length}} too short!</span>
                <span ng-show="myForm.name.$error.maxlength">{{myForm.name.$viewValue.length}} too long!</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:28:58.933

ng-minlength 和 ng-maxlength 的工作方式，如果输入文本框的字符少于或多于两个指令指定的字符，则不会填充 user.name（我什至不认为它已定义）。要了解我的意思，请`{{user.name}}`在 <span> 之后添加。

# javascript - 谷歌地图信息窗口 - 只有在使用时才会出现垂直滚动

> ID：14751558
> 
> 赞同：2
> 
> 时间：2013-02-07T12:50:47.067
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow

我正在使用谷歌地图信息窗口，该窗口填充了来自 3 个输入字段的文本。第一个输入字段是 TITLE，第二个 ADDRESS（使用标准[Google 自动完成](http://canary.cs.illinois.edu/crimedetection/auto.html)）和第三个 DESCRIPTION。所以我在它们之间添加的所有内容看起来都很用户友好`<br/>`，因此每个输入都在信息窗口中分开显示。我就是这样做的：

```
return (name || "") + "<br/>" +
       (addressOrCoordinates || "") + "<br/>" +
       (additionalDetails || ""); 
```

但是当地址稍微长一点时出现垂直滚动，这很奇怪，因为如果你在描述字段中写 300 个字符，信息窗口不会显示垂直滚动，它很好地适应了信息窗口的大小......

所以我尝试删除`<br/>`，即使地址数英里长，一切都可以在没有垂直滚动的情况下工作。所以我认为这`<br/>`与地址混淆了，所以我测试了一点点，似乎地址会受到地址前面的影响，`<br/>`但如果地址后面则不会受到影响......

因此，如果 infowindow 包含普通文本，即使有很多文本并且即使此文本被分隔，它似乎也不会显示垂直滚动，`<br/>`但是为什么`<br/>`在地址前面使用时会出现垂直滚动？有没有其他方法可以让地址输入转到信息窗口中的新行而不出现这个垂直滚动？

BTW CSS 溢出不起作用，我正在使用 API v3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T23:12:06.623

这似乎是我长期以来见过的最疯狂的错误之一。

我无法告诉你为什么会发生这种情况，但对我来说，当我删除以下CSS的粗体标记部分（字体系列）时它会起作用：

```
#mapE { 文本对齐：中心；字体系列：Arial、Helvetica、sans-serif；颜色：#333; 字体大小：14px；溢出：隐藏；}
```

这不是字体宽度的问题（例如，当我使用 Verdana 时没有问题，它比 宽得多`Arial`）。API 必须在 infoWindow 打开之前计算它的大小，似乎这是某些东西的点使用时出错`Arial`。

所以我建议使用另一种基本的 windows 字体而不是 Arial（`Tahoma`应该没问题，对我来说没有问题）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T20:48:02.300

如果您将其添加到 CSS 中，这也有效：

```
.gm-style-iw div {overflow:visible !important;} 
```

根据您的信息窗口的内容，它会完全删除丑陋的垂直滚动条。它覆盖了 google api 提供的计算样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T11:42:48.410

所以我和你的情况类似。我希望我的 infoWindow 中的内容滚动（只是 Y 滚动而不是 X 滚动），但我想禁用自动 google API infoWindow 滚动，因为它掩盖了我的内容。像许多人一样，我将我的 infowindow 内容包装在一个 div 中，并给它一个 ID #info_window。然后我想确保内容有一个最大高度并且被安排成它的滚动条不会覆盖内容（我需要滚动条只能垂直滚动，另一个考虑因素）。最后，我使用了此处找到的答案之一来确保只显示我的滚动条而不是自动谷歌滚动条。所以我的 CSS 最终看起来像这样：

```
#info_window{
  width: 350px;
}

.gm-style .gm-style-iw, .gm-style .gm-style-iw a, .gm-style .gm-style-iw span, .gm-style .gm-style-iw label, .gm-style .gm-style-iw div {
  max-height: 280px;
  padding: 0px 10px 5px 5px;
  overflow-y: scroll;
  overflow-x: visible;
}

.gm-style-iw div {
  overflow:visible !important;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-19T13:06:57.837

我发现添加`white-space: nowrap;`到信息窗口的内容似乎也可以解决滚动条的问题。这是否是一个可行的选项当然取决于实际内容，但它可能是一个选项。

# c# - 在后台发送群发邮件

> ID：14751566
> 
> 赞同：0
> 
> 时间：2013-02-07T12:51:07.657
> 
> 标签：c#, asp.net

我在页面加载时调用了母版页中的线程并调用了电子邮件函数，如下所示：

```
Page_load()
{
    CreatingThread();
}

protected void CreatingThread()
{
    Thread tSendMails;
    tSendMails = new System.Threading.Thread(delegate() { EmailQueueSettings(); });
    tSendMails.IsBackground = true;
    tSendMails.Start();
}

protected void EmailQueueSettings()
{
    // Function to get emails which are not sent ;
    // looping it and sending it one by one
    // Function to send mails
    // Updating the status after mail is sent   
} 
```

邮件将多次发送给同一用户，但邮件会多次发送给他们。

下次加载页面时是否可以分配不同的线程和不同的邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:59:13.053

实际上，重新阅读您的请求和评论。我想我误解了你的要求。我假设您希望它在页面加载时工作并在与用户所在的线程不同的线程中运行。但是您想要的是不断在 Web 应用程序的后面运行的东西，对吗？

一般来说，我会做的是在后台有一个控制台应用程序来执行此操作。但是你可以在 global.asax`Application_Start`方法中做一些类似的事情。

```
void Application_Start(object sender, EventArgs e)
{
    Task beginSendEmailTask = new Task(SendEmailRunningTask);
    beginSendEmailTask.Start();
}

void SendEmailRunningTask()
{
    while (true)
    {
        Thread.Sleep(300000); // 5minutes
        MailMessage[] emails = GetEmailsToSend();
        SmtpClient client = new SmtpClient(); // Configure this

        foreach (MailMessage email in emails) 
        {
            client.Send(email);
            // Mark email in your database/application as sent.
        }
    }
} 
```

不要忘记将电子邮件标记为已发送，无论您将它们存储在何处。这可能是您多次发送它们的原因。也可能是因为它在每次加载母版页时都在运行。

编辑：解释

* * *

网站启动任务创建新线程任务进入循环

任务等待 5 分钟
GetEmailsToSend() 查找 100 封电子邮件中的前 50 封要发送。
迭代并发送电子邮件

任务等待 5 分钟
GetEmailsToSend() 在 100 封电子邮件中查找接下来的 50 封要发送。
迭代并发送电子邮件

任务等待 5 分钟
GetEmailsToSend() 未找到任何电子邮件

任务等待 5 分钟
GetEmailsToSend() 找到 2 封新电子邮件
迭代并发送电子邮件

# java - 我使用的是安卓相机，如果我点击相机按钮，它会打开，但是拍照后，我的应用程序停止了？

> ID：14751569
> 
> 赞同：2
> 
> 时间：2013-02-07T12:51:13.633
> 
> 标签：java, android, eclipse, oop

```
 public void startCamera() {
  Log.d("TDM_CAMERA", "Starting camera on the phone...");
  String fileName = "testphoto.jpg";
  ContentValues values = new ContentValues();
  values.put(MediaStore.Images.Media.TITLE, fileName);
  values.put(MediaStore.Images.Media.DESCRIPTION,
          "Image capture by camera");
  values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
  imageUri = getContentResolver().insert(
          MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
  Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
  intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
  intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
  startActivityForResult(intent, 1337);
} 
```

log cat 在 imageUri = getContentResolver().this line 中显示错误

```
02-08 07:32:11.505: E/AndroidRuntime(2136): FATAL EXCEPTION: main
02-08 07:32:11.505: E/AndroidRuntime(2136): java.lang.UnsupportedOperationException: Unknown URI: content://media/external/images/media
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:169)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:137)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.content.ContentProviderProxy.insert(ContentProviderNative.java:420)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.content.ContentResolver.insert(ContentResolver.java:866)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at com.Ibetter.tdm.ReqEditActivity.startCamera(ReqEditActivity.java:597)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at com.Ibetter.tdm.ReqEditActivity$4.onClick(ReqEditActivity.java:107)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.view.View.performClick(View.java:4202)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.view.View$PerformClick.run(View.java:17340)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.os.Handler.handleCallback(Handler.java:725)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.os.Looper.loop(Looper.java:137)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at java.lang.reflect.Method.invoke(Method.java:511)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-08 07:32:11.505: E/AndroidRuntime(2136):     at dalvik.system.NativeStart.main(Native Method)
02-08 07:32:13.935: I/Process(2136): Sending signal. PID: 2136 SIG: 9
02-08 07:32:14.835: E/Trace(2175): error opening trace file: No such file or directory (2)
02-08 07:32:14.835: W/Trace(2175): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:30:10.473

The way you set the output file is fishy.

Try like this:

```
public void startCamera() throws IOException {
  Log.d("TDM_CAMERA", "Starting camera on the phone...");
  File photosDir = new File(Environment.getExternalStorageDirectory(), "photos");
  if (!photosDir.isDirectory()) {
      photosDir.mkdirs();
  }
  File imageFile = File.createTempFile("testphoto", ".jpg", photosDir);
  Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
  intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(imageFile));
  intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
  startActivityForResult(intent, 1337);
} 
```

Also make sure that using external storage is declared in your Android manifest:

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

For more info see this page in the docs: [http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:37:41.787

我打赌你[忘了插入 SD 卡](http://jtribe.blogspot.com.es/2008/12/saving-view-as-image-with-android.html)

**编辑：** 您可以在活动中使用此代码访问它：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.capture);

    Button capture = (Button) findViewById(R.id.capture_button);
    capture.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            // We use the stock camera app to take a photo
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());
            startActivityForResult(intent, TAKE_PHOTO_CODE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK) {
        Uri imagePath = getImageUri();

        doSomething();
    }
}

/**
 * Get the uri of the captured file
 * @return A Uri which path is the path of an image file, stored on the dcim folder
 */
private Uri getImageUri() {
    // Store image in dcim
    File file = new File(Environment.getExternalStorageDirectory() + "/DCIM", CAPTURE_TITLE);
    Uri imgUri = Uri.fromFile(file);

    return imgUri;
} 
```

# javascript - 如何添加此输入的默认值？（此输入已禁用）

> ID：14751571
> 
> 赞同：-2
> 
> 时间：2013-02-07T12:51:29.280
> 
> 标签：javascript, html

```
<input type="checkbox" disabled="disabled" checked="checked" name="is_ok" id="id_is_ok"/> 
```

如何添加此输入的默认值？（此输入已禁用）

如果禁用此字段如果我编辑我的数据，则不会保存此值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:58:00.037

是的，如果该字段被禁用，则在提交表单时不会发送。如果您想要一个无法编辑但与表单一起提交的字段，请`readonly="readonly"`改用。

**编辑**：啊，这不起作用，`readonly`复选框被忽略，请参阅下面的评论。相反，如果您想在提交时发送该字段值，您可以定义第二个具有相同名称和值的隐藏字段：

```
<input type="checkbox" disabled="disabled" checked="checked" name="is_ok" />
<input type="hidden" name="is_ok" id="is_ok_hidden" value="some value here" /> 
```

`value="some value here"`（您可以像任何其他 html 输入字段一样为该字段提供一个，并通过`element.setAttribute("value","some other value")`在 JavaScript 中设置该值。由于仅`type="hidden"`发送该字段的值，因此只设置该字段的值并忽略复选框的值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:54:03.323

```
 <input type="checkbox" disabled="disabled" checked="checked" name="is_ok" value="bike" id="id_is_ok"/> 
```

这里的自行车是默认值...

# wpf - 非线性 WPF 滑块值

> ID：14751578
> 
> 赞同：3
> 
> 时间：2013-02-07T12:51:50.717
> 
> 标签：wpf, xaml, slider

重新映射 WPF 滑块控件返回的线性值很简单：

```
public double Multiplier
{
  get
  {
    switch ((int)sliderMultiplier.Value)
    {
      case 0: return 0.1;
      case 1: return 0.2;
      case 2: return 0.5;
      case 3: return 1;
      case 4: return 2;
      case 5: return 5;
      case 6: return 10;
      default: throw new ArgumentOutOfRangeException();
    }
  }
} 
```

但是滑块手柄在被拖动时会伴随一个工具提示，显示所选值 - 未映射的线性值。如何提供重新映射的显示值？或者让滑块直接提供非线性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:10:46.487

其他人已经解决了这个问题（就工具提示而言）。找不到让滑块本身实际报告非线性值范围的方法。

[http://joshsmithonwpf.wordpress.com/2007/09/14/modifying-the-auto-tooltip-of-a-slider/](http://joshsmithonwpf.wordpress.com/2007/09/14/modifying-the-auto-tooltip-of-a-slider/)

# extjs - 如何检查extjs中的样式属性

> ID：14751580
> 
> 赞同：1
> 
> 时间：2013-02-07T12:51:58.050
> 
> 标签：extjs, extjs4, extjs4.1

如何检查 extjs 中的样式属性？

要为面板设置样式，我们可以使用`setBodyStyle`. 设置样式后，我想检查特定属性的值。

像，

```
var panel = Ext.getCmp('id');
if(panel.getStyles().fontSize == 24) //for example
    //do this stuff
else
    //do the other stuff 
```

我正在使用 extjs 4.1.1a

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:06:26.087

这些方法仅在 Ext.dom.Element 级别可用。这意味着您需要致电

```
var panel = Ext.getCmp('id');
if(panel.el.isStyle('fontSize', 24)) //for example
    //do this stuff
else
    //do the other stuff 
```

请查看**[Ext.dom.Element](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)**的 API （您可以按“样式”过滤以便快速访问）

# class - 如何在不下载的情况下从 URL 加载 jar？

> ID：14751584
> 
> 赞同：1
> 
> 时间：2013-02-07T12:52:21.363
> 
> 标签：class, url, jar, download, load

JAVA - 就是这样，我知道如何使用类加载器从我的主项目加载外部 jar，甚至从 url 下载 jar 并加载它，但无论如何可以从 url 加载 jar 而无需下载？只需从 url 将其加载到内存中即可使用它？谢谢！

# installation - WIX 安装程序如何删除安装

> ID：14751586
> 
> 赞同：1
> 
> 时间：2013-02-07T12:52:23.383
> 
> 标签：installation, wix

我创建了一个基本的安装程序。
它从 c:\temp.log 获取一个文件并将其复制到正在从注册表读取的目录中。
卸载程序在哪里？它如何添加到 Windows“添加删除程序”的链接？

我在这里想念什么？
在安装时，我需要复制文件，然后停止/启动某个服务。
在卸载时，我需要删除该文件+文件夹，然后停止/启动某个服务。

谢谢

代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="325c4bfd-6614-43e9-aedb-93661295352d" Name="install" Language="1033" Version="1.0.0.0" Manufacturer="install" UpgradeCode="4307526e-3902-40d0-991b-bacff9b3d71b">

    <Package InstallerVersion="200" Compressed="yes" />

    <Media Id="1" Cabinet="media1.cab" EmbedCab="yes" />

    <Property Id="APPDIR">
        <RegistrySearch Id="APPDIRECTORY" Type="raw" Root="HKLM" Key="SOFTWARE\APP\APPInstalPath" Name="InstallationPath" />
    </Property>

    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="APPDIR">
            <Component Id="ProductComponent" Guid="93118c45-f0c0-4c9e-9168-8ea905e9427c">
                <File Id="pluggin" Source="C://setup.log" KeyPath="yes" Checksum="yes"/>
            </Component>     
        </Directory>
    </Directory>

    <Feature Id="ProductFeature" Title="install" Level="1">
        <ComponentRef Id="ProductComponent" />
        <ComponentGroupRef Id="Product.Generated" />
    </Feature>
  </Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:11:26.363

添加/删除程序中的列表是您在*产品*标签中指定的任何*名称。*在您的情况下，添加/删除程序中的名称是**install**：

 ***```
<Product Id="325c4bfd-6614-43e9-aedb-93661295352d" Name="install" 
```***

# api - libspotify：有时创建的播放列表没有名字

> ID：14751587
> 
> 赞同：1
> 
> 时间：2013-02-07T12:52:28.303
> 
> 标签：api, spotify, playlist, libspotify

我正在使用最新版本的 libspotify API (12.1.51)。我正在使用 C# 和 libspotify.NET（libspotify 的简单互操作包装库）进行编码。我已经构建了一个使用 libspotify API 创建播放列表的程序。我正在使用最新的 Windows 原生 Spotify 客户端来检查我创建的播放列表。

我已经构建了一个程序，它等待播放列表名称和曲目 URI 列表或一个专辑 URI 并创建相应的播放列表。如果提供了专辑 URI，则专辑中的所有曲目都将添加到新的播放列表中，否则提供的曲目 URI 列表将用于创建新的播放列表。程序一直等到回调

```
playlist_update_in_progress 
```

在接受要创建的新播放列表之前调用并且 done 参数等于 true。

它运行良好，只是有时创建的播放列表没有名称但确实包含所有曲目。我可以告诉程序创建完全相同但没有名称的播放列表，它可能会在第二次工作。它是随机发生的，但我注意到如果我创建大约 200 个播放列表，那么可能有 5-10 个播放列表没有名字。当程序正在运行并创建播放列表并随机看到没有名称的播放列表时，我可以看到播放列表正在添加到您的 Spotify 客户端中。播放列表几乎在调用回调的同时出现，并且 done 等于 true（当然，并非总是如此，可能会有延迟）。我尝试在 Windows 的 Spotify 客户端中手动重命名播放列表，没有任何问题（播放列表名称长度为 0 或空字符串，如果您愿意）。原生 Spotify 客户端甚至不允许空的播放列表名称。

我用：

```
sp_playlistcontainer_add_new_playlist 
```

添加一个新的播放列表，我尝试使用 IntPtr 和一个 C# 字符串传递给它。两种都试过：

```
[DllImport("libspotify")]
public static extern IntPtr sp_playlistcontainer_add_new_playlist(IntPtr playlistContainerPtr, string name);

[DllImport("libspotify")]
public static extern IntPtr sp_playlistcontainer_add_new_playlist(IntPtr playlistContainerPtr, IntPtr namePtr); 
```

而且我也试过

```
sp_playlist_rename 
```

多次重命名播放列表（作为某种修复）但没有成功。我不知道创建播放列表时服务器会发生什么。这是一个错误还是发生了什么？

我真的尝试了很多技巧来完成这项工作，但无济于事。

有关该计划的更多信息：

首先它连接到 Spotify，然后等待一些控制台输入。它检查以下字符串的输入：

要使用名称和曲目列表创建播放列表：

```
createplaylistfromtracks "Tracks playlist" spotify:track:36MuLw248uzLPtrJ6073ZR spotify:track:5WPkvx0MARhlWhXp1sJg4k spotify:track:1VrdbSFVU9wJkuDM2sWYVe spotify:track:66RG0BBwpQqHxZs06UUyeo spotify:track:0zp3uPuhnARR1XYsgg5JLV 
```

并使用专辑 URI 中的名称和曲目列表创建播放列表：

```
createplaylistfromalbum "Album playlist" spotify:album:5rVwDKRKa1FjDlLofDZyRb 
```

然后程序解析输入并创建播放列表并设置标志 Busy = true 以便控制台在 Busy = false 之前不会读取任何输入，这在调用 playlist_update_in_progress 回调并且 done 为 true 时发生。然后它再次读取输入...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:31:19.957

我们有许多在内部和外部运行 libspotify 的应用程序，并且我们没有遇到类似的库问题，这表明这不是 libspotify 中的错误。

一些可能导致这种情况发生的指针：

*   确保您正确管理线程。当您收到一个`notify_main_thread()`调用（到达某个后台线程）时，您*必须*从主线程异步调用`sp_sesion_process_events()`，因此您需要确保将其正确编组到主线程。如果这个过程不能正常工作，事情就会开始变得奇怪。

*   由于您正在执行许多操作，因此请确保 libspotify 有时间将您的所有更改与服务同步。`playlist_update_in_progress`旨在在播放列表发生多个突变时通知您，并且通常在从其他地方传入更改时很有用。相反，`playlist_state_changed`您需要听这样的更改（通常，在重命名后，我相信播放列表在应用更改时进入“加载”状态，然后在完成后退出（即再次`sp_playlist_is_loading`返回）。`false`

*   此外，当您退出应用程序时，请确保执行`sp_session_logout()`调用并等到`logged_out`回调被触发后再退出。否则，某些更改可能不会与服务同步。

# jquery - ASP.NET MVC 4 + jQuery 地址插件 = 渲染问题

> ID：14751593
> 
> 赞同：0
> 
> 时间：2013-02-07T12:52:47.707
> 
> 标签：jquery, asp.net-mvc, jquery-address

我正在尝试在 MVC4 中设置一个新网站，避免在任何情况下刷新整页。目标是在主布局上有一个媒体播放器，在用户导航到站点期间将保持不变。

我决定使用 jquery 地址插件来使用深度链接。如果通过 ajax 调用该操作，我为我的控制器设置了一条规则以返回部分视图而不是完整视图。我还设置了地址插件来阻止请求，改为执行 ajax 请求，并在 div 中提供结果。

*服务器端*

```
return Request.IsAjaxRequest() ? (ActionResult) PartialView() : View(); 
```

*客户端*

```
 $.address.state('/').init(function (event) {
        $('a').address();
    });

    $.address.change(function (event) {
        $.ajax({
            cache: false,
            url: event.value,
            success: ajaxSuccess
        });
    });

    function ajaxSuccess(data, status) {
        $("#mainContent").html(data);
    } 
```

问题：当视图用作部分视图时，我无法在视图中呈现任何@section。

PS：我想使用插件作为不显眼的，所以即使媒体播放器会刷新，任何没有 javascript 的人仍然可以导航到该网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:18:01.917

您应该重新设计页面以在单独的操作中包含可交换的内容，这始终是部分视图。这样，更改的内容就在主要内容之外。主要内容可以有部分，子内容是在任何请求发生时被替换的内容。

# python - Django：urls.py中的参数+日期命名组

> ID：14751594
> 
> 赞同：0
> 
> 时间：2013-02-07T12:52:53.220
> 
> 标签：python, django, django-views, django-urls

我的 urls.py 中有这个：

```
---urls.py---
urlpatterns = patterns('',
                       (r'^queryinfo3/(.*)/(.*)/(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})/$', queryInfo3), 
```

上面的代码希望能匹配这样的请求：

```
http://localhost:8081/queryinfo3/text1/text2/2012-02-07/ 
```

在我的views.py上，我有这个处理方法：

```
def queryInfo3(request, sname, urlkey, year=None, month=None, day=None):
       return HttpResponse("something") 
```

不幸的是，我收到了这个 TypeError：

```
queryInfo3() takes at least 3 arguments (4 given) 
```

我究竟做错了什么？

提前致谢！

**更新** 我试过这个：

```
def queryInfo3(request, sname, urlkey, year, month, day):
     ... 
```

但我仍然收到 TypeError：

```
queryInfo3() takes exactly 6 arguments (4 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:57:05.373

您必须有两个网址，因为其他 3 个值等于 None

```
(r'^queryinfo3/(\w+)/(\w+)/(?P<year>\d{4})/(?P<month>\d{1,2})/(?P<day>\d{1,2})/$', queryInfo3), 
```

测试：

```
 localhost:8081/queryinfo3/text1/text2/2012/02/07 
```

**或者**

```
 (r'^queryinfo3/(\w+)/(\w+)/(?P<year>\d{4})-(?P<month>\d{1,2})-(?P<day>\d{1,2})/$', queryInfo3), 
```

测试：

```
 localhost:8081/queryinfo3/text1/text2/2012-02-07 
```

# linux - Socket.IO 不能调用'on'

> ID：14751596
> 
> 赞同：8
> 
> 时间：2013-02-07T12:53:00.110
> 
> 标签：linux, node.js, webserver, socket.io

我正在制作一个简单的 node.js 应用程序并打算使用 socket.io 但到目前为止我无法启动服务器。

这是我的代码：

```
var http = require('http'),
    io = require('socket.io'),
    fs = require('fs');

http.createServer(function(request, response){
    fs.readFile(__dirname + '/index.html', function(err, data){
        if(err){
            response.writeHead(500, {'Content-Type': 'text/plain'});
            return response.end('Error');
        }
        response.writeHead(200, {'Content-Type': 'text/html'});
        response.end(data);
    });
}).listen(1337);

io.sockets.on('connection', function(socket){
    socket.emit('pic', { addr: '/pic.jpg' });
    socket.on('status', function(data){
        console.log(data);
    })
}) 
```

这是我收到的输出：

```
[root@ip-10-224-55-226 node]# node server.js

/srv/node/server.js:16
io.sockets.on('connection', function(socket){
           ^
TypeError: Cannot call method 'on' of undefined
    at Object.<anonymous> (/srv/node/server.js:16:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
[root@ip-10-224-55-226 node]# 
```

Socket.IO 是由 NPM 安装的，并且似乎驻留在 /root/node_modules/socket.io 因为我已经将该目录的符号链接（ln -s）连接到我的服务器根目录所在的 /srv/node。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-07T12:56:34.127

`io`只是一个图书馆。您想听连接到一个特定的*实例*：

```
var http = require('http'),
    io = require('socket.io'),
    fs = require('fs');

var serv = http.createServer(function(request, response){
    fs.readFile(__dirname + '/index.html', function(err, data){
        if(err){
            response.writeHead(500, {'Content-Type': 'text/plain'});
            return response.end('Error');
        }
        response.writeHead(200, {'Content-Type': 'text/html'});
        response.end(data);
    });
});
serv.listen(1337);

// Bind socket.io to server
var serv_io = io.listen(serv);
serv_io.sockets.on('connection', function(socket){
    socket.emit('pic', { addr: '/pic.jpg' });
    socket.on('status', function(data){
        console.log(data);
    })
}); 
```

# java - SpringMVC 和静态资源

> ID：14751597
> 
> 赞同：9
> 
> 时间：2013-02-07T12:53:10.427
> 
> 标签：java, rest, spring-mvc, tomcat7

我是java和spring的新手。我正在尝试制作 hello world 应用程序，但不要明白我做错了什么。

这是我的目录结构：

```
test_app
-pom.xml
-src
--main
---java
----com.example.web
-----IndexController.java
---webapp
----static
-----img
------example.jpg
----WEB-INF
-----web.xml
-----dispatcher-servlet.xml
-----jsp
------index.jsp 
```

和来源：web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

    <display-name>Movie Reminder WebApp</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/dispatcher-servlet.xml</param-value>
    </context-param>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
</web-app> 
```

调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.example.web"/>
    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.UrlBasedViewResolver">

        <property name="viewClass"
                  value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>
</beans> 
```

索引控制器.java

```
package com.example.web;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class IndexController {
    @RequestMapping(value = "/")
    public ModelAndView index() {
        return new ModelAndView("index");
    }
} 
```

索引.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Hello Spring!</title>
</head>
<body>
<img src="<c:url value="/static/img/example.jpg" />" />
</body>
</html> 
```

当我部署我的应用程序并请求时，我在图像请求中得到 404

```
http://localhost:8081/  --- http 200 ok 
http://localhost:8081/static/img/example.jpg - http 404 not found 
```

当我将 mvc:resources 添加到 dispatcher-servlet.xml

```
<context:annotation-config/>
<context:component-scan base-package="com.example.web"/>
<mvc:resources mapping="/static/**" location="/static/" /> 
```

并重新编译我得到 404 到 / 请求

```
http://localhost:8081/  --- http 404 not foundok 
http://localhost:8081/static/img/example.jpg - http 200 ok 
```

请帮我弄清楚我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:04:17.417

只需将这两行添加到您的`dispatcher-servlet.xml`

```
<mvc:resources mapping="/static/**" location="/static/" />
<mvc:default-servlet-handler /> 
```

以下是文档中的内容`default-servlet-handler`：

> 通过转发到 Servlet 容器的默认 Servlet 来配置处理静态资源的处理程序。使用此处理程序允许使用“/”映射，`DispatcherServlet`同时仍使用 Servlet 容器来提供静态资源。此处理程序会将所有请求转发到默认 Servlet。因此，重要的是它在所有其他 URL HandlerMappings 的顺序中保持在最后。如果您使用“注释驱动”元素，或者如果您正在设置自定义的 HandlerMapping 实例，请确保将其“order”属性设置为低于 的值`DefaultServletHttpRequestHandler`，即`Integer.MAX_VALUE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:59:29.713

这是因为 servlet 映射。所有进来的请求都被路由到 servlet。但是 servlet 不知道如何处理对静态资源的请求。您需要为静态资源添加映射。有几种不同的方法：

1.  使用网络服务器提供的方式。不幸的是，这取决于您拥有的服务器。

2.  使用可以提供静态资源的 servlet。

您使用的是什么网络服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T15:22:01.460

从 Spring 3.0 及更高版本开始，您需要在 Spring 配置中添加以下内容：

```
<mvc:resources mapping="/static/**" location="/static/" /> 
```

这告诉您的调度程序 servlet 如何解析静态资源。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T16:16:27.043

使用这个，它会一直工作。祝你好运:)

```
@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter {

@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**").addResourceLocations("/public-resources/").setCachePeriod(31556926);`enter code here`
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T18:06:21.540

我在 web.xml 中配置了默认的 servlet 来服务所有的静态资产，所以只有路由请求会到达控制器：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/resources/*</url-pattern>
</servlet-mapping> 
```

# c# - 使用 Excel 加载项

> ID：14751601
> 
> 赞同：2
> 
> 时间：2013-02-07T12:53:19.547
> 
> 标签：c#, vsto, excel-2007, add-in, user-defined-functions

我正在使用以下代码开发一个 excel 插件。我创建了一个类库并添加了以下代码

```
using System;
using System.Collections.Generic;
 using System.Linq;
 using System.Text;
  using System.Runtime.InteropServices;
  using Microsoft.Win32;

  namespace MyCustomAutomation
  {

// Replace the Guid below with your own guid that

// you generate using Create GUID from the Tools menu

[Guid("5268ABE2-9B09-439d-BE97-2EA60E103EF6")]
[ClassInterface(ClassInterfaceType.AutoDual)]
[ComVisible(true)]
public class MyFunctions
{
    public MyFunctions()
    {

    }

    public double MultiplyNTimes(double number1, double number2, double timesToMultiply)
    {
        double result = number1;
        for (double i = 0; i < timesToMultiply; i++)
        {
            result = result * number2;
        }

        return result;

    }

    [ComRegisterFunctionAttribute]
    public static void RegisterFunction(Type type)
    {

        Registry.ClassesRoot.CreateSubKey(

          GetSubKeyName(type, "Programmable"));

        RegistryKey key = Registry.ClassesRoot.OpenSubKey(

          GetSubKeyName(type, "InprocServer32"), true);

        key.SetValue("",

          System.Environment.SystemDirectory + @"\mscoree.dll",

          RegistryValueKind.String);
    }

    [ComUnregisterFunctionAttribute]
    public static void UnregisterFunction(Type type)
    {

        Registry.ClassesRoot.DeleteSubKey(

          GetSubKeyName(type, "Programmable"), false);
    }

    private static string GetSubKeyName(Type type,

      string subKeyName)
    {

        System.Text.StringBuilder s =

          new System.Text.StringBuilder();

        s.Append(@"CLSID\{");

        s.Append(type.GUID.ToString().ToUpper());

        s.Append(@"}\");

        s.Append(subKeyName);

        return s.ToString();

    }
   }
  } 
```

我安装了它，函数在 excel 中运行良好。我可以使用返回值的 MultiplyNTimes 函数。但是我的问题是，当我从单元格调用函数时，结果显示在同一个单元格本身，而我想要结果在被叫单元以外的任何单元中播放。我完全一无所知，因为我无法到达任何方向。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:31:48.557

要将结果保存在另一个单元格中，只需将结果作为数组返回。因此，作为 MultiplyNTimes 函数的另一个版本的示例，可以将其写为：

```
 public double[] MultiplyNTimesNextCell(double number1, double number2, double timesToMultiply)
{
       // result[0] is the value returned on the first cell
       // result[1] is the value returned on the next cell
       double[] result = new double[] {0, number1};
       for (double i = 0; i < timesToMultiply; i++)
       {
            // hardcoded to result[1] where to return the result
            result[1] = result[1] * number2;
       }

        return result;
} 
```

然后在Excel中使用这个函数时，必须使用数组公式语法，也就是说如果你在A1中输入函数，然后选择单元格A1和B1，然后按F2然后Ctrl+Shift+Enter

另请注意，我只是使用 0 在输入公式的单元格中返回。如果您希望将其更改为不同类型的另一个值，您可以使用对象数组作为结果数据类型。

因此，例如，您可以这样重写它：

```
public object[] MultiplyNTimesObj(double number1, double number2, double timesToMultiply)
{
     object[] result = new object[] { "MultiplyNTimesObj=", number1 };
     for (double i = 0; i < timesToMultiply; i++)
     {
         result[1] = (double)result[1] * number2;
     }

     return result;
} 
```

# java - 适用于 Android 的 GWT / GAE 离线应用程序 - 高级

> ID：14751610
> 
> 赞同：1
> 
> 时间：2013-02-07T12:54:01.857
> 
> 标签：java, google-app-engine, gwt, cordova, html5-appcache

大家好，这里有很多关于 gwt 离线可能性的帖子。但他们都没有完全回答我的问题。

这里只是摘录几句：

*   [如何在 GWT 离线应用程序中包含外部 Javascript](https://stackoverflow.com/questions/14749492/how-to-include-external-javascript-in-gwt-offline-application)
*   [HTML5 离线 GWT APP](https://stackoverflow.com/questions/3318240/html5-offline-gwt-app/3320145#3320145)
*   [RequestFactory 和离线客户端](https://stackoverflow.com/questions/9616611/requestfactory-and-offline-clients)
*   [如何构建 GWT 独立离线应用程序？](https://stackoverflow.com/questions/4477992/how-to-build-gwt-standalone-offline-application)

我使用的 GWT、GAE 和 Android 技术的摘录：

*   请求工厂
*   RPC 请求
*   JDO
*   科尔多瓦/Phonegap
*   本地存储
*   html5 应用缓存

那我现在的问题是什么？

*   当我在没有互联网连接的情况下启动我的应用程序时，它不会加载任何内容。我收到错误 500，因为没有互联网连接。
*   它不会从离线缓存中加载 HTML、CSS 和 JavaScript。

我现在是因为我的 webapp 尝试连接到 www.mypage.com，但没有得到任何响应。

如果我在线，我是否可以从我的android设备上的本地资源启动我的页面并从我的服务器获取响应，如果我没有任何连接，是否可以从我的本地存储中获取响应？

我尝试使用本地资源（编译的 HTML、CSS 和 JavaScript）来实现它，但在这种情况下，它不会随时连接到来自谷歌应用引擎的日期。显而易见的结果：没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:15:42.153

是的，如果您没有连接，您可以从本地存储中获取响应。绝对地。

在扩展 com.google.gwt.core.ext.linker.AbstractLinker 的链接器中，遍历工件并检查它是否是 rpc 代码 (1)。如果是，则将其添加到清单 (2) 的网络部分。

然后在您的 rpc 回调中（由于没有网络，这将失败），设置您的`@Override public void onFailure(Throwable caught) { ...}`方法以从本地存储获取数据并从那里继续。

(1) 例子——

```
private boolean isRPRCall(EmittedArtifact artifact) {
        return (artifact.getPartialPath().substring(artifact.getPartialPath().length() - 3)).equals("rpc");
    } 
```

(2) 我的看起来像：

```
CACHE MANIFEST
file.jsp
/myapp/myapp.nocache.js
[etc. etc...]

NETWORK:
/myapp/34C9362A2B2ED625B4FE3FF8E80A4A60.gwt.rpc
/myapp/586D3102158048D2D56BA386A134648D.gwt.rpc
/myapp/CCA65B31464BDB27545C23C142FEEEF8.gwt.rpc
FALLBACK: 
```

# c# - 对 .NET 4 Async 的困惑

> ID：14751614
> 
> 赞同：3
> 
> 时间：2013-02-07T12:54:20.793
> 
> 标签：c#, asynchronous, .net-4.0, async-await

我正在使用 Microsoft.Bcl.Async nuget 包来使用 Async/Await（我的目标是 .NET 4，而不是 4.5）

我是异步/等待的新手。下面的代码示例中描述了我的问题。为什么没有调用突出显示的行？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace AsyncTest
{
class Program
{
    static void Main(string[] args)
    {
        Run();

        Console.WriteLine("Got the value");

        Console.ReadKey();
    }

    public static async void Run()
    {
        Console.WriteLine("Testing Async...");

        var val = await AsyncMethod();

        // HIGHLIGHTED LINE. WHY IS THIS LINE NOT CALLED?
        Console.WriteLine("And the value is... {0}", val);
    }

    public static Task<long> AsyncMethod()
    {
        long myVal = 1;

        for (long l = 0; l < 100000; l++)
        {
            myVal++;
            Console.WriteLine("l = {0}", l);
        }

        return new Task<long>(() => myVal);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:57:03.837

该行：

```
Console.WriteLine("And the value is... {0}", val); 
```

被（由编译器）转换为*延续*；只有当正在“等待”的任务完成时，它才会被调用（使用值等）。问题是：你*创建*了一个任务，但你还没有*开始*它：所以它永远不会完成。

如果您*开始*在底部创建的任务，它最终会完成。此外，通常你会将“正在做的”工作*放在*-而`Task`不是在它之外：

```
 public static Task<long> AsyncMethod()
    {
        var task = new Task<long>(() =>
        {
            long myVal = 1;

            for (long l = 0; l < 100000; l++)
            {
                myVal++;
                Console.WriteLine("l = {0}", l);
            }
            return myVal;
        });
        task.Start();
        return task;
    } 
```

另请注意，在-**之前很久**`Got the value`就打印出来了，这是因为*继续*发生**在工作线程上**；该方法首先将控制权返回给调用者 () 。**`And the value is...`***`Run``Main``await`*****

 ****** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-06T07:14:17.337

您不应该将其称为“AsyncMethod”，因为它没有异步元素。

该方法使用将在与当前线程不同的线程中运行的任务。*****

# php - 这个 PHP 函数有什么问题？

> ID：14751623
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:55:02.553
> 
> 标签：php

谁能告诉我这个功能有什么问题？

我编写了这个函数来从 $reg_errors 数组中获取错误，并在同一个脚本中的不同位置使用这些错误。

```
function testimonialErrors ($reg_errors) {
    if ( !empty($reg_errors) ) {
            foreach ( $reg_errors AS $error) {
                echo "<li>$error</li>";
            }                                       
    }
    return $error; 
} 
```

然后我像这样调用那个函数..

```
if ( !empty($reg_errors) ) {
    echo '<div class="error">
                <img src="images/error.png" />
                <h3>Errors,</h3>
                <ul>';
                echo testimonialErrors($reg_errors);
        echo '</ul>
            </div>';
} 
```

但是这段代码不起作用。

更新：这是我的新代码

```
function tesimonialErrors ($reg_errors) {
    if ( !empty($reg_errors) ) {
            foreach ( $reg_errors AS $error) {
                echo "<li>$error</li>";
            }                                       
    }
    return $error; 
} 
```

并这样称呼它

```
if ( !empty($reg_errors) ) {
    echo '<div class="error">
                <img src="images/error.png" />
                <h3>Errors,</h3>
                <ul>';
                tesimonialErrors($reg_errors);
        echo '</ul>
            </div>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:57:01.960

您应该查看[变量范围](http://php.net/manual/en/language.variables.scope.php)。此时，`$reg_errors`未定义在您的函数范围内。您可以将其传递给函数：

```
function tesimonialErrors ($reg_errors) {
  ... 
```

并称之为：

```
tesimonialErrors($reg_errors); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:12:18.280

为什么不这样做呢？

```
if ( !empty($reg_errors) ) {
    echo '<div class="error">
            <img src="images/error.png" />
            <h3>Errors,</h3>
            <ul>
               <li>';
    echo implode('</li><li>', $reg_errors);
    echo '    </li>
            </ul>
        </div>';
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T13:00:43.777

正如@Akam 指出的那样， $reg_errors 在全局范围内，因此您需要使用`global $reg_errors;`or `$GLOBALS['reg_errors']`。

另外我建议将函数名称更改`tesimonialErrors`为正确的英文（我假设会是`testimonialErrors`）。否则，The Next Guy 可能最终会将其发布在 TDWTF 上。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T13:47:36.270

```
function testimonialErrors ($reg_errors) {
    if ( !empty($reg_errors) ) {
            foreach ( $reg_errors AS $error) {
                echo "<li>$error</li>";
            }                                       
    }
    return $error;  // ****remove return statement**** 
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-07T12:57:10.693

添加`global $reg_errors;`到您的功能。

```
function testimonialErrors () {
    global $reg_errors;
    if (!empty($reg_errors)) {
        foreach ($reg_errors as $error) {
            echo "<li>$error</li>";
        }
    }
} 
```

# jsf - 如何创建自定义 Facelets 标签？

> ID：14751624
> 
> 赞同：10
> 
> 时间：2013-02-07T12:55:02.890
> 
> 标签：jsf, jsf-2, facelets, custom-tags, tagfile

我正在使用 JSF 2.0。我使用标记文件创建了自定义 JSTL 标记，并且在 JSP 中运行良好。但我也想在 Facelets 中使用自定义 JSTL 标记。是否可以在 Facelets 中创建标签文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T13:19:26.080

“自定义 JSTL 标记”老实说毫无意义。这个词完全没有意义。JSTL 本身*已经*是一个标签库。[请仔细阅读我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)的介绍性段落，以了解 JSTL 的真正含义。您可能实际上是指“[自定义 JSP 标记](http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html)”。当然，它们不能在 Facelets 中工作，因为这是一种与 JSP 完全不同的视图技术，实际上是已弃用的 JSP 的继承者。

好吧，“自定义 JSP 标记”的类比是“自定义 Facelets 标记”，或者更常见的是“Facelets 标记文件”。它相当简单，您可以遵循与包含文件相同的语法。

`/WEB-INF/tags/some.xhtml`：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets">
    Hello World
    ...
    <ui:insert /> <!-- This inserts tag body, if necessary. -->
</ui:composition> 
```

并将其注册`/WEB-INF/example.taglib.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0">
    <namespace>http://example.com/jsf/facelets</namespace>
    <tag>
        <tag-name>some</tag-name>
        <source>tags/some.xhtml</source>
    </tag>
</facelet-taglib> 
```

依次注册`/WEB-INF/web.xml`如下：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/example.taglib.xml</param-value>
</context-param> 
```

*（请注意，当文件位于JAR`web.xml`的文件夹中时，无需注册）`*.taglib.xml``/META-INF``/WEB-INF/lib`*

最后在您的模板中使用它，如下所示：

```
<html ... xmlns:my="http://example.com/jsf/facelets">
...
<my:some /> 
```

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)

# c - 使用 SSL_CTX_set_timeout 打开 SSL 通信超时错误

> ID：14751632
> 
> 赞同：0
> 
> 时间：2013-02-07T12:55:35.997
> 
> 标签：c, openssl

我正在使用 Open SSL 通信进行服务器-客户端通信。它工作正常，但会话超时 SSL_CTX_set_timeout 方法不起作用。

## 以下是代码：

```
 SSL_CTX *ctx;
 OpenSSL_add_all_algorithms(); 
 if(SSL_library_init() != 1){
 return -1; 
}
 SSL_load_error_strings();
 meth = SSLv3_method(); 
 ctx = SSL_CTX_new(meth); 
 SSL_CTX_set_timeout(ctx, 180); 
```

即使服务器没有向客户端发送任何消息超过 5 分钟，这里 SSL_CTX_set_timeout 也不起作用。

请建议我解决问题。

在此先感谢 Prakash B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:42:37.703

`SSL_CTX_set_timeout()`仅设置[会话过期超时](http://www.openssl.org/docs/ssl/SSL_CTX_set_timeout.html)（何时重新协商 SSL/TLS），而不是某种通信超时。您应该在套接字管理代码中处理后者。

# jquery - 王牌编辑器同步滚动

> ID：14751633
> 
> 赞同：2
> 
> 时间：2013-02-07T12:55:38.093
> 
> 标签：jquery, vertical-scrolling, ace-editor, synchronizing

我有两个同时运行的 Ace 编辑器会话，我正在尝试同步两个编辑器的垂直滚动。我找到了一个适用于普通 Div 的简单 jQuery 方法，但我怎样才能使其适应 Ace 的正常工作？

**jQuery方法：**

```
$("#editor1").scroll(function () { 
    $("#editor2").scrollTop($("#editor1").scrollTop());
    $("#editor2").scrollLeft($("#editor1").scrollLeft());
});

$("#editor2").scroll(function () { 
    $("#editor1").scrollTop($("#editor2").scrollTop());
    $("#editor1").scrollLeft($("#editor2").scrollLeft());
}); 
```

显然，上述方法不适用于 Ace。我一直在这里查看 Ace API：**[Virtual Renderer](http://ace.ajax.org/api/virtual_renderer.html)**以获得解决方案，但在编辑器上滚动时我什至无法设置任何回调函数。

**[API Here](http://ace.ajax.org/#nav=api&api=scrollbar)**中有对滚动条的引用，但似乎无法让它做任何事情。我试过像这样测试它......

```
editor.ScrollBar.on('scroll', function() {
    alert('Callback?');
}); 
```

有人可以帮我解决这个问题吗？：） 谢谢。

**编辑**

下面的解决方案确实有效，但（在我的情况下）它几乎立即使浏览器（Chrome）崩溃。我在它上面设置了一个超时功能来限制它的触发速度，但它仍然不可避免地崩溃。想法？

```
editor.getSession().on('changeScrollTop', function(scroll) {
    setTimeout(function() {
        editor2.getSession().setScrollTop(scroll);
    }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:09:41.480

### 信息：我为滚动到顶部时发生的崩溃添加了一个解决方法

终于明白了：

```
editor.getSession().on('changeScrollTop', function(scroll) {
  editor2.getSession().setScrollTop(parseInt(scroll) || 0)
}); 
```

[你可以在 CodePen 上](http://codepen.io/ByScripts/pen/fzucK)看到一个工作演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:31:18.287

ace 中有一个错误使您的代码进入无限循环滚动实际上不是一个数字，而是一个对象，并且 editor.session.setScrollTop({}) 导致 scrollTop = NaN。以下代码工作正常

```
s1 = editor1.session
s2 = editor2.session

s1.on('changeScrollTop', function() {
  s2.setScrollTop(s1.getScrollTop())
});

s2.on('changeScrollTop', function() {
  s1.setScrollTop(s2.getScrollTop())
}); 
```

# android - 在 zxing QR 码中处理相机方向

> ID：14751634
> 
> 赞同：0
> 
> 时间：2013-02-07T12:55:43.843
> 
> 标签：android, android-camera, qr-code, zxing

我正在开发一个读取二维码的应用程序。所以我使用*zxing*库来读取二维码。我成功读取了我的应用程序中的二维码。

问题是当我在横向模式下启动我的应用程序时，zxing 相机工作正常，但是当我将设备旋转到纵向模式时，相机仍然处于横向模式——即倾斜 90 度。

我在我的应用程序中使用 zxing 2.1 中的 Android 项目作为库项目。

为了能够在两个方向上使用该应用程序，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:02:03.580

不要在图书馆改变。并且不要使用意图代码。只需调用库。然后它工作正常。

# iphone - UILabel sizeToFit 无法正常工作。使用 setNumberOfLines 不起作用。需要可变高度功能才能工作

> ID：14751638
> 
> 赞同：7
> 
> 时间：2013-02-07T12:55:58.313
> 
> 标签：iphone, xcode, storyboard

我试图通过 UILabel 显示可变高度的文本。
我通过将 Xcode 的故事板和编码直接组合到实现文件中来设置所有内容。

这是代码：

```
CGRect labelFrame = CGRectMake(20, 20, 280, 800);
descriptionLabel.frame = labelFrame;
NSString *description = self.spell[@"description"];
descriptionLabel.text = description;
[descriptionLabel setNumberOfLines:0];
[descriptionLabel sizeToFit]; 
```

我尝试更改自动换行功能并尝试使用许多不同的设置，但无济于事。

故事板中是否需要做一些具体的事情？
我的视图->标签的结构重要吗？
我有它，以便标签在视图中（占据整个屏幕）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-24T14:06:47.447

我正在使用 SWIFT，我遇到了同样的问题。我添加后修复了它**`layoutIfNeeded()`**。我的代码如下：

```
self.MyLabel.sizeToFit()
self.MyLabel.layoutIfNeeded() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-09T04:10:10.893

您无需手动计算高度。对于可变高度，在调用之前将标签的高度设置为 0 `sizeToFit`，如下所示。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20, 20, 280, 0)];
label.numberOfLines = 0;
label.text = @"Some long piece of text...";

[label sizeToFit]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:20:49.290

这是我对您的任何问题的解决方案（动态高度）：

```
NSString *description = @"Some text";

CGSize dynamicSize = [[description sizeWithFont:[UIFont fontWithName:@"FONT_NAME" size:14] constrainedToSize:CGSizeMake(300, 10000)]; //the width should be the one you need and just put in a very big height so that anything you would put in here would fit
//dynamicSize is now the exact size you will need, with the fixed width and the height just enough so that all the text will fit.

UILabel *someLabel = [[UILabel alloc] initWithFrame:CGRectMake:(0, 0, dynamicSize.width, dynamicSize.height)];
someLabel.font = YOUR_FONT;
someLabel.numberOfRows = 10 //You should calculate how many rows you need by dividing dynamicSize.height to the height of one row (should also take into account the padding that your UILabel will put between rows 
```

在我看来，这是确定所需高度的最安全方法。另外，据我所知，如果 sizeToFit 已经足够大以容纳所有文本，则调用 sizeToFit 不会改变它的大小。（不会使它变小……如果需要就变大，但不会添加更多行）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:29:06.857

I tried to create the same thing and it works completely fine with me. (I don't have storyboard in my app but i don't think it will affect anything.)

```
UILabel *bioLabel = [[UILabel alloc] init];
CGRect labelFrame = CGRectMake(0, 100, 320, 500);
bioLabel.frame = labelFrame;
NSString *bio =@"YOUR_TEXT_HERE";
bioLabel.text = description;
[bioLabel setNumberOfLines:0];
[bioLabel sizeToFit];
[self.view addSubview:bioLabel]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T15:27:03.733

看起来您没有设置 lineBreakMode。

我从 stackoverflow 获得了一些代码，然后将其放入一个类别中，您可以在这里了解它： [http ://www.notthepainter.com/multi-line-uilabel/](http://www.notthepainter.com/multi-line-uilabel/)

但如果你只想要代码，这里是：

```
@interface UILabel (BPExtensions)
- (void)sizeToFitFixedWidth:(CGFloat)fixedWidth;
@end

@implementation UILabel (EnkiExtensions)
- (void)sizeToFitFixedWidth:(CGFloat)fixedWidth
{
    if (fixedWidth < 0) {
        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, 0);
    } else {
        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, fixedWidth, 0);
    }
    self.lineBreakMode = UILineBreakModeWordWrap;
    self.numberOfLines = 0;
    [self sizeToFit];
}
@end 
```

你这样称呼它：

```
helpLabel_.text = @"You need to cut the blue wire and ground the red wire. Do not cut the red wire and ground the blue wire, that would be bad.";
[helpLabel_ sizeToFitFixedWidth: desiredWidth ]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-27T07:16:03.000

我也有麻烦，我的代码是这样的：

```
 TeacherTagBtn *tagBtn = [[TeacherTagBtn alloc] init];
    [tagBtn setTitle:tagModel.values forState:UIControlStateNormal];

    [tagBtn.titleLabel sizeToFit]; 
```

你知道的 UIbutton 的 TeacherTagBtn 子类！然后我想得到这样的标签宽度：

```
tempBtn.titleLabel.frame.size.width 
```

最后，我失败了。宽度为0。所以像这样：

```
 TeacherTagBtn *tagBtn = [[TeacherTagBtn alloc] initWithFrame:CGRectMake(0, 0, 100, 16)];
    [tagBtn setTitle:tagModel.values forState:UIControlStateNormal];
    [tagBtn.titleLabel sizeToFit]; 
```

只需添加框架，它就可以完美运行！

# c# - 如何向特定订阅者重新发送消息？

> ID：14751646
> 
> 赞同：2
> 
> 时间：2013-02-07T12:56:35.177
> 
> 标签：c#, masstransit

*背景：*

我们有一个基于 MassTransit 的消息传递子系统。它工作得很好，只需小问题就可以发送数千条消息。到目前为止，失败的消息会自动推送到`xxx_error`队列中。这也很好用。

我们甚至拥有自己的基于 Web 的管理控制台来查看消息队列并重新发送失败的消息。该工具基于**BusDriver**示例并直接在 MSMQ 上工作——它将消息复制`xxx_error`到`xxx`并重新发送。

*现在的情况：*

我们考虑迁移到 RabbitMQ，它似乎更快且更具可扩展性。但是当然，MSMQ 管理控制台变得无用了，我不喜欢编写另一个版本的控制台来处理 RabbitMQ 队列。我宁愿采用通用路由，将失败的消息放入我自己的存储库中，该存储库独立于 MSMQ 传输。

听起来很容易。这就是我们有一个具体问题的地方。

失败消息的存储库将包含（以及其他属性）消息正文和消息订阅者名称。稍后，我可以去存储库，反序列化消息并将其重新发送给特定的订阅者。

但是，我们不想这样，`bus.Publish( msg )`因为消息会再次命中**所有**订阅者，而不是之前失败的订阅者。我们想要的是将消息重新发送给一个订阅者。

这似乎是可能的：

```
senderbus.GetEndpoint( new Uri( "rabbitmq://servername/subscriber1" ) ).Send( msg ); 
```

或者

```
senderbus.GetEndpoint( new Uri( "msmq://localhost/subscriber1" ) ).Send( msg ); 
```

（取决于使用的交通工具）。使用这种方法，消息被传递给唯一的特定订阅者。

*问题是：*

**这是推荐的方法**吗？我们有什么选择？

可能的问题是这种方法可能会忽略有关当前订阅的信息并将消息直接传递到订阅者队列。但是，订阅者可能不再订阅该类型的消息。所以，代码应该是这样的：

```
if ( subscriber1 still subscribes to messages of msg.GetType() ) <- how do to this?
   senderbus.GetEndpoint( new Uri( "rabbitmq://servername/subscriber1" ) ).Send( msg ); 
```

提前感谢您对此的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:16:15.860

我不会。

不确定您的管理控制台在做什么，但 RabbitMQ 的控制台可以做所有事情，除了将消息从一个队列移动到另一个队列。我自己也在寻找该功能，希望有一个我可以专门用于该功能的脚本。

要记住的一件棘手的事情是端点！=消费者。一个端点为该总线上的所有消费者提供服务，虽然端点地址很容易存储和重新发布到其中，但单个消费者不会。

人们建议的是幂等消费者：[http ://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning](http://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning)

我不会担心消费者不订阅特定消息，使用静态类型来建立您正在查看升级的路由信息​​。在升级过程中处理这些消息。

# c# - LINQ（对象）查询是否可能包含无限循环？

> ID：14751647
> 
> 赞同：0
> 
> 时间：2013-02-07T12:56:41.487
> 
> 标签：c#, linq, linq-to-objects

我有一个简单的课程：

```
public class RawBomItem
{
    private string material;
    private string item;
    private string component;
    private string quantity;
    private string b;
    private string spt;
...
} 
```

每个数据成员都有一个属性。

然后我有一个包含此类实例的列表

```
 private List<RawBomItem> rawBom; 
```

该列表包含 70000 多个项目。

此时我想在这个 List 上运行一个有点复杂的 LINQ 查询。

```
List<string> endProducts = new List<string>(
    rawBom.Where(x1 => new List<string>(rawBom.Select(x2 => x2.Component)
                                              .Distinct())
                           .Contains(x1.Material) && (x1.B != "F"))
          .Select(x3 => x3.Material)); 
```

该查询似乎陷入了无限循环。（我等了几分钟才关机）

我会把它变成数据库来工作，我只是对可能是什么问题感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T13:00:59.167

我看不出应该如何存在无限循环，但是您的代码效率极低。
对于`rawBom`您中的每个项目，计算不同的组件集并将它们复制到一个新列表中。因此，如果列表中有 70,000 个项目，则执行 70.000 ^ 2 = 4,900,000,000 次迭代。此外，对于列表中的每个项目，您都在再次迭代不同组件的列表。根据您拥有的不同组件的数量，您可以在顶部添加相同数量的迭代。

这可以改进：

```
var components = new HashSet<string>(rawBom.Select(x => x.Component).Distinct());
var endProducts = rawBom.Where(x => components.Contains(x.Material) &&
                                    x.B != "F")
                        .Select(x => x.Material)
                        .ToList(); 
```

1.  我们从主查询中提取不同组件列表的创建，因此我们只需计算一次 - 而不是 70.000 次。
2.  我们使用 a`HashSet<string>`而不是 a `List<string>`。这会将调用更改为`Contains`from`O(n)`到`O(1)`。

最终结果是您只列举了两次列表，导致只有 140,000 次迭代。现在将其与原始迭代次数进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:04:45.500

这是一个无限循环。除非您的序列是[生成器](https://stackoverflow.com/questions/11799572/what-is-the-name-of-the-yield-return-concept-ienumerable-iterator-generator)，但您这里没有。

你所拥有的是低效的代码。

```
rawBom.Where( // this goes over the 70,000 item collection once 
```

对于这 70,000 个中的每一个，您拥有：

```
new List<string>(rawBom.Select(x2 => x2.Component).Distinct()) // this goes over the 70,000 collection 3 times (first select, then distinct, then new list)
.Contains // another bunch of accesses depending on how many distinct items there were
.Select(x3 => x3.Material) // iterates over the resulting collection once 
```

所以毫无疑问，它会很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:03:27.930

我会稍微简化您的查询。我想这就是你想要的？

```
List<string> endProducts = rawBom
.Where(x1 => rawBom.Any(x2 => x2.Component == x1.Material) && x1.B != "2")
.Select(x1 => x1.Material).ToList(); 
```

这不会为 rawBom 中的每个项目创建任何额外的列表，但会自己使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:07:19.613

```
List<RawBomItem> list = new List<RawBomItem>();
var components = list.Select(x => x.component).Distinct();
var b = new Func<RawBomItem, bool>(x =>
  {
    return components.Contains(x.Material) && x.B != "F";
  });
var v = list.Where(x => b(x)).Select(x1 => x1.material).ToList(); 
```

# jquery - jQuery - 如何使用开始/结束按钮创建函数循环？

> ID：14751656
> 
> 赞同：-3
> 
> 时间：2013-02-07T12:57:08.553
> 
> 标签：jquery, function, loops

我正在寻找一种方法来一遍又一遍地循环一个函数，直到它被一个按钮停止，然后它可以恢复。我用谷歌搜索并找到了一些结果，但它们仅限于循环特定功能..

那么有什么方法可以帮助我吗？

编辑：

它应该能够遍历项目列表

```
<ul>
    <li>
<ul> 
```

并且过渡应该是用fadeOut然后fadeIn在下一个li。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:02:06.650

我认为这应该可以解决问题，

```
var yourFun = new function(){
   this.check = false;

   this.run(){
     if( !this.check ) {
       //do all your stuff here.
     }
  }
};

$("#button1").click(function(){ yourFun.run(); });

$("#button2").click(function(){ yourFun.check = true; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:05:27.713

这行得通。

```
var runLoop;

$('#start').click(function() {
    runLoop = setInterval(function() {
        console.log('running');
    }, 100); // time in milliseconds between each loop
});

$('#stop').click(function() {
   clearInterval(runLoop);
}); 
```

[http://jsfiddle.net/9H2PB/](http://jsfiddle.net/9H2PB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:12:12.847

您可以使用 jQuery 每个函数来启动和停止循环[http://api.jquery.com/each/](http://api.jquery.com/each/)

该`.each()`方法旨在使 DOM 循环结构简洁且不易出错。当被调用时，它会遍历作为 jQuery 对象一部分的 DOM 元素。每次回调运行时，都会传递当前循环迭代，从 0 开始。更重要的是，回调是在当前 DOM 元素的上下文中触发的，因此关键字 this 指的是该元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T13:07:58.613

像这样试试

jQuery

```
$("#pause").click(function (){
if (pause){
    timer = setInterval(function(){$("#content").append("Hello world</br>")},1000);
    pause = false;
}
});
$("#resume").click(function(){
if (!pause){
    pause = true;
    clearInterval(timer);
}
}); 
```

[看演示](http://jsfiddle.net/Dineshkani/maT9N/)

# maven - 要求在子模块中定义 Maven 属性

> ID：14751658
> 
> 赞同：3
> 
> 时间：2013-02-07T12:57:11.323
> 
> 标签：maven, pom.xml, maven-enforcer-plugin

我最近使用[Maven Enforcer Plugin](http://maven.apache.org/enforcer/maven-enforcer-plugin/)来强制所有 POM 定义一个`foo.bar`属性。我将此声明放在我的公司 POM 中，并假设它将适用于我的子项目。

令我沮丧的是（但并不意外），这条规则也在我的公司 POM 上强制执行。结果，我尽职尽责地定义了一个占位符`foo.bar`属性，并认为我已经完成了。

不幸的是，所有子项目都继承了这个属性，从而通过了强制测试。我无法确定孩子是明确定义了这个属性还是只是继承了一个无意义的值。任何人都可以提出一种方法：

*   确保此（特定）规则不适用于我的公司 POM；**或者**

*   确保我的占位符属性不被子项目继承；**或者**

*   以另一种方式解决我的问题？

如果有帮助，我的实施者规则的定义如下所示。这个片段来自我公司的 POM。

```
<!-- Enforce good behaviour in child POMs -->
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-enforcer-plugin</artifactId>
  <version>1.2</version>
  <executions>
    <execution>
      <id>enforce-good-behaviour</id>
      <goals>
        <goal>enforce</goal>
      </goals>
      <configuration>
        <rules>
          <requireProperty>
            <property>foo.bar</property>
            <message>NAUGHTY!</message>
            <regex>.+</regex>
            <regexMessage>The property must contain at least one character.</regexMessage>
          </requireProperty>
        </rules>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

我的目标是自动将此属性值用作 SCM 标记指令的一部分。我的公司 POM 中有以下片段，它为我的子项目定义了一个很好的标记方案：

```
<!-- Ensure we use a consistent tagging scheme for releases -->
<plugin>
  <artifactId>maven-release-plugin</artifactId>
  <configuration>
    <tagNameFormat>a.b.c.${foo.bar}</tagNameFormat>
    <useReleaseProfile>false</useReleaseProfile>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:44:57.500

我有同样的困境。这是我解决它的方法。

在公司 POM 中，我添加了这样的配置文件：

```
 <profile>
    <!-- When we are building the corporate base projects we don't want 
         to require that all of the properties that should be provided by 
         child projects (inheriters) are defined. So we activate this 
         profile when building the corporate projects to bypass anything 
         that only applies to children (the leaf projects). 
         Add "-Dcorporate.build=true" on the maven cmd line when building
         and releasing the corporate POMs to accomplish this. -->
        <id>corporate-pom-build</id>
        <activation>
            <property>
                <name>corporate.build</name>
                <value>true</value>
            </property>
        </activation>
        <properties>
            <enforcer.skip>true</enforcer.skip>
            <remoteresources.skip>true</remoteresources.skip>
            <assembly.skipAssembly>true</assembly.skipAssembly>
        </properties>
    </profile> 
```

然后，正如评论所说，我用

`mvn -Dcorporate.build=true clean deploy`

您想跳过的其他内容也可以放在该配置文件中。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T10:59:40.093

[extra-enforcer-rules](http://mojo.codehaus.org/extra-enforcer-rules/)的[requirePropertyDiverges](http://mojo.codehaus.org/extra-enforcer-rules/requirePropertyDiverges.html)规则允许您检查在父 POM 中定义的属性是否在子 POM 中被覆盖。

对于您的用例，配置应该是这样的（尚未测试）：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-enforcer-plugin</artifactId>
  <version>1.2</version>
  <executions>
    <execution>
      <id>enforce-property-overridden-in-child</id>
      <goals>
        <goal>enforce</goal>
      </goals>
      <configuration>
        <rules>
          <requirePropertyDiverges>
            <property>foo.bar</property>
          </requirePropertyDiverges>
        </rules>
      </configuration>
    </execution>
  </executions>
  <dependencies>
    <dependency>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>extra-enforcer-rules</artifactId>
      <version>1.0-alpha-5</version>
    </dependency>
  </dependencies>
</plugin> 
```

# c# - Moq 验证是否以指定的顺序使用不同的参数调用相同的方法

> ID：14751659
> 
> 赞同：5
> 
> 时间：2013-02-07T12:57:18.587
> 
> 标签：c#, unit-testing, moq

这是我需要进行单元测试的方法：

```
void Do(IEnumerable<string> items, TextWriter tw){
    foreach(var item in items) { tw.WriteLine(item); }
} 
```

如何配置一个模拟`TextWriter`来验证某些参数是否以`WriteLine`特定顺序传递给相同的方法（）？

```
[Test]
public void Test(){
    var mock = new Mock<TextWriter>();
    mock.Setup( ??? ); //check that WriteLine is called 3 times, 
                       //with arguments "aa","bb","cc", in that order.

    Do(new[]{"aa", "bb", "cc"}, mock);
    mock.Verify();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:02:33.553

您可以使用 Callback 来验证每个调用的传递参数：

```
[Test]
public void Test(){
    var arguments = new[]{"aa", "bb", "cc"};
    var mock = new Mock<TextWriter>();
    int index = 0;
    mock.Setup(tw => tw.WriteLine(It.IsAny<string>()))
        .Callback((string s) => Assert.That(s, Is.EqualTo(arguments[index++])));

    Do(arguments, mock.Object);
    mock.Verify();
    // check all arguments where passed
    Assert.That(index, Is.EqualTo(arguments.Length));
} 
```

# google-maps - 如果内容通过节点或字符串传递，谷歌地图信息窗口呈现不同

> ID：14751662
> 
> 赞同：1
> 
> 时间：2013-02-07T12:57:20.967
> 
> 标签：google-maps, google-maps-api-3, infowindow

我有点困惑。我正在尝试将 Google Maps (api v.3) infoWindow 的内容加载为节点。如果我这样做并且内容很大，则不会显示预期的垂直滚动条并且内容会溢出信息窗口，这对用户来说非常混乱。

但是，如果我得到完全相同的节点并将其 html 字符串表示形式传递给它使用垂直滚动条呈现的 InfoWindow。

我创建了一个 jsfiddle 来说明它：http: [//jsfiddle.net/vEBUv/5/](http://jsfiddle.net/vEBUv/5/)

这是预期的行为吗？

感谢您的任何建议

ps：我需要将内容作为节点传递，因为我想保持对 DOM 元素的引用

jsFiddle 中的代码：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
var mapNode = new google.maps.Map(document.getElementById('map_canvas_node'), mapOptions);

var contentNode = $('#infoWindowContent')[0];
var contentString = $('#infoWindowContent').parent().html();

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var infowindowNode = new google.maps.InfoWindow({
    content: contentNode
});

var marker = new google.maps.Marker({
     position: myLatlng,
     map: map,
     title: 'Test Content as String'
});

var markerNode = new google.maps.Marker({
    position: myLatlng,
    map: mapNode,
    title: 'Test Content as Node'
});

google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
});
google.maps.event.addListener(markerNode, 'click', function() {
    infowindowNode.open(mapNode,markerNode);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:35:57.857

`overflow`将内容节点的 parentNode的 -style 设置`auto`为`domready`infoWindow 的 -event 触发时：

```
google.maps.event.addListener(infowindowNode,'domready',function(){
  this.getContent().parentNode.style.overflow='auto';
}); 
```

[**http://jsfiddle.net/doktormolle/7HdKt/**](http://jsfiddle.net/doktormolle/7HdKt/)

# sbt - 如何使用 SBT 在 WAR 文件的根目录中打包隐藏文件夹？

> ID：14751665
> 
> 赞同：1
> 
> 时间：2013-02-07T12:57:41.503
> 
> 标签：sbt, lift, amazon-elastic-beanstalk

我正在尝试构建一个适合部署到 Elastic Beanstalk 的 WAR 文件（包含一个 Lift 项目）。我还需要使用[`.ebextensions`](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html).

`.ebextensions`应该存储在 WAR 文件的根目录中。资源应该放在哪里，以便它们最终位于 SBT 中 WAR 文件的根目录中`package`？使用`src/main/resources`似乎将资源放置在`WEB-INF/classes`.

即使我将`.ebextensions`文件夹放在我的 src/main/resources 文件夹和`package`WAR 文件中，该文件夹也不会出现（在 中`WEB-INF/classes`）。如果我删除领先时期，那么它确实会出现。那么如何配置 SBT 来打包隐藏文件夹呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:50:04.903

将文件夹放在 src/main/webapp 中。

**更新 10/23** 正如 Richard Dallaway 在下面指出的那样，这似乎不再起作用，并且 SBT 的作者在这里有一个很好的解释：[如何使 SBT 不忽略 .ebextensions 文件夹？](https://stackoverflow.com/questions/19054135/how-to-make-sbt-to-not-ignore-ebextensions-folder). 简短的回答是添加以下内容：

```
excludeFilter := HiddenFileFilter -- ".ebextensions" //or whatever your hidden folder name is 
```

到您的 build.sbt 文件。

# linux - 在 board_ahci_mcp_linux 中 mcp 代表什么？

> ID：14751666
> 
> 赞同：0
> 
> 时间：2013-02-07T12:57:43.427
> 
> 标签：linux, linux-device-driver, sata

我正在浏览给定链接[http://lxr.free-electrons.com/source/drivers/ata/ahci.c](http://lxr.free-electrons.com/source/drivers/ata/ahci.c)的 ahci 代码，并且经常看到 mcp 术语，但无法破解它。

任何人都可以让我知道这段代码中 mcp 代表什么，它是通用术语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:05:53.593

MCP 代表`Media Communications Processor`. 这是 nVidia 制造的一种芯片组，您可以在此处看到：[http ://www.tomshardware.com/reviews/ich10r-sb750-780a,2374-6.html](http://www.tomshardware.com/reviews/ich10r-sb750-780a,2374-6.html)

# angularjs - 如何使用 angularjs 中的 ng-options 将对象关联为模型

> ID：14751674
> 
> 赞同：3
> 
> 时间：2013-02-07T12:58:10.227
> 
> 标签：angularjs

假设我有两个对象：颜色和衬衫。

每件衬衫都可以有多个属性以及多种颜色，这基本上是一组颜色对象。

```
function MyCntrl($scope) {
    $scope.colors = [
        {
            label:"Red",
            value:"r-e-d",
            available:true
        },
        {
            label:"Blue",
            value:"b-l-u-e",
            available:false
        }   
    ];

    $scope.shirts=[{
        size:"M",
        cost:100,
        colors:[ ]
    }
    ]
} 
```

我如何使用`ng-options`向/从附加/删除`color`对象`shirts.color`？

我想将对象关联`scope.color`到`scope.shirts.color`对象，以便如果我更改颜色名称或颜色代码等内容，则关联`color`对象中的相应项目`shirts.colors`也应该自动更新。

据我所知`ng-options`，`ng-model`我将不得不为颜色创建新对象并根据选择框中选择的内容设置其值，但这些对象将独立于颜色对象并且更改颜色对象不会更新相应的颜色对象衬衫中的物品。

预先感谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T14:36:05.597

您可以`ng-options`直接使用：

```
Color: <select multiple ng:model="shirt.colors" ng:options="c.value as c.label for c in colors"></select> 
```

这是一个 Plunker：[http ://plnkr.co/edit/FQQxrSE89iY1BnfumK0A?p=preview](http://plnkr.co/edit/FQQxrSE89iY1BnfumK0A?p=preview)

*更新*

关于源代码的编辑`colors`：如果在衬衫的颜色中只存储值，则很难检测到更改了哪些项目并在选项中重新选择它（更改的选定项目取消选择，因为 AngularJS 不知道更改的原因）。

作为解决方法，您可以选择对象，而不是值。我已经更新了 plunker。

# php - 如何将此文件转换为 XML？

> ID：14751682
> 
> 赞同：0
> 
> 时间：2013-02-07T12:58:36.013
> 
> 标签：php, xml, symfony, yaml

如何将此文件转换为 XML？

```
services:
IHQS.nuitblanche.admin.news:
class: IHQS\NuitBlancheBundle\Admin\NewsAdmin
tags:
- { name: sonata.admin, manager_type: orm, group: nuitblanche, label: News }
arguments: [null, IHQS\NuitBlancheBundle\Entity\News, IHQSNuitBlancheBundle:NewsAdmin] 
```

特别是对于标签部分

是 ：

```
<service id="nb.admin.news" class="IHQS\NuitBlancheBundle\Admin\NewsAdmin">
            <tag name="sonata.admin" manager_type="orm" group="NuitBlanche" label="News" />
            <argument />
            <argument>IHQS\NuitBlancheBundle\Entity\News</argument>
            <argument>IHQSNuitBlancheBundle:Admin</argument>
</service> 
```

对还是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:37:45.360

在 str_replace 或 preg_replace 的帮助下，您应该能够将输入文本分解为（多维）数组，这将更容易转换为 XML

```
$example => array(
    'services' => array(
        'IHQS.nuitblanche.admin.news' => array(
            'class' => 'IHQS\NuitBlancheBundle\Admin\NewsAdmin',
            'tags' => array(
                'name' => 'sonata.admin',
                'manager_type' => 'orm',
                'group' => 'nuitblanche',
                'label' => 'News'
            ),
            arguments => array(
                null,
                'IHQS\NuitBlancheBundle\Entity\News',
                'IHQSNuitBlancheBundle:NewsAdmin'
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:06:49.307

您不需要转换它，您只需创建 XML 文件并包含您的 YAML 文件：

```
<container xmlns="http://symfony-project.org/2.0/container">
  <imports>
    <import resource="default.yml" class="sfServiceContainerLoaderFileYaml" />
  </imports>
</container> 
```

这也应该让您开始覆盖设置，以便您可以轻松地将 YAML 转换为 XML：

```
<container xmlns="http://symfony-project.org/2.0/container">
  <imports>
    <import resource="default.xml" />
  </imports>
  <parameters>
    <!-- These parameters override the one defined in default.xml -->
  </parameters>
  <services>
    <!-- These service definitions override the one defined in default.xml -->
  </services>
</container> 
```

这是博客文章系列的一部分，即：

*   [Symfony 服务容器：使用 XML 或 YAML 来描述服务](http://fabien.potencier.org/article/15/symfony-service-container-using-xml-or-yaml-to-describe-services)

组件本身记录在此处：

*   [服务容器（当前版本）](http://symfony.com/doc/current/book/service_container.html)

对一些示例 YAML 使用类似的示例 XML：

```
# app/config/config.yml
services:
    my_mailer:
        class:        Acme\HelloBundle\Mailer
        arguments:    [sendmail] 
```

在 XML 中：

```
<!-- app/config/config.xml -->
<services>
    <service id="my_mailer" class="Acme\HelloBundle\Mailer">
        <argument>sendmail</argument>
    </service>
</services> 
```

# asp.net-mvc - T4MVC 在 ASP.Net MVC 中大幅增加编译时间

> ID：14751685
> 
> 赞同：1
> 
> 时间：2013-02-07T12:58:42.423
> 
> 标签：asp.net-mvc, t4mvc

我正在使用 T4MVC 为 MVC 生成模板文件，我注意到它大大增加了我的构建时间。如果我看一下输出窗口，它首先会非常快地构建引用的项目（大约 5 秒），然后在构建 MVC Web 应用程序时，它需要很长时间。在输出窗口中什么都没有显示，直到它完成，大约需要 45 秒。

我刚刚从 Nuget 安装了 T4MVC，它会在构建时自动编译吗？需要这么长时间吗？关于我可以做些什么来减少编译时间和使用 T4MVC 的任何想法，因为它是一个很好的可维护性工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:36:01.347

那不应该发生。T4MVC 在设计时生成。即每次您保存.tt 文件或选择“运行自定义工具”时，它都会重新生成源。

但是当你构建时，它基本上是不存在的，它生成的源是与其余的一起构建的，不应该增加任何可测量的时间。

所以我怀疑这里可能发生了其他事情。问题：

*   在使用 msbuild 从 cmd 行构建时，您是否也看到了这一点？
*   您是否在刚刚添加 T4MVC 的全新 MVC 项目中看到了这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:53:40.187

我找到了构建需要这么长时间的原因，这是由于在项目文件中`MvcBuildViews`设置了设置。构建所有视图会占用大量编译时间。`true``.csproj`

# python - NameError：未定义全局名称“NAME”

> ID：14751688
> 
> 赞同：2
> 
> 时间：2013-02-07T12:59:01.020
> 
> 标签：python, function, web-scraping, nameerror

我一直在构建一个小的网络爬虫，我觉得我的变量或函数范围做错了。每当我尝试将某些功能提取到单独的函数中时，它都会给我 NameError: global name 'NAME' is not defined。我看到很多人都遇到了类似的问题，但似乎有很多变化与相同的错误，我无法弄清楚。

```
import urllib2, sys, urlparse, httplib, imageInfo
from BeautifulSoup import BeautifulSoup
from collections import deque

global visited_pages
visited_pages = []
global visit_queue
visit_queue = deque([])
global motorcycle_pages
motorcycle_pages = []
global motorcycle_pics
motorcycle_pics = []

global count 
count = 0

def scrapePages(url):
    #variables
    max_count = 20
    pic_num = 20

    #decide how long it should go on...
    global count
    if count >= max_count:
        return

    #this is all of the links that have been scraped
    the_links = []

    soup = soupify_url(url)

    #find all the links on the page
    for tag in soup.findAll('a'):
        the_links.append(tag.get('href'))

    visited_pages.append(url)
    count = count + 1
    print 'number of pages visited'
    print count

    links_to_visit = the_links
#    print 'links to visit'
#    print links_to_visit

    for link in links_to_visit:
        if link not in visited_pages:
            visit_queue.append(link)
    print 'visit queue'
    print visit_queue

    while visit_queue:
        link = visit_queue.pop()
        print link
        scrapePages(link)

    print '***done***'

the_url = 'http://www.reddit.com/r/motorcycles'
#call the function
scrapePages(the_url)

def soupify_url(url):
    try:
        html = urllib2.urlopen(url).read()
    except urllib2.URLError:
        return 
    except ValueError:
        return
    except httplib.InvalidURL:
        return
    except httplib.BadStatusLine:
        return

    return BeautifulSoup.BeautifulSoup(html) 
```

这是我的引用：

```
Traceback (most recent call last):
  File "C:\Users\clifgray\Desktop\Mis Cosas\Programming\appengine\web_scraping\src\test.py", line 68, in <module>
    scrapePages(the_url)
  File "C:\Users\clifgray\Desktop\Mis Cosas\Programming\appengine\web_scraping\src\test.py", line 36, in scrapePages
    soup = soupify_url(url)
NameError: global name 'soupify_url' is not defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:12:50.473

移动你的主要代码：

```
the_url = 'http://www.reddit.com/r/motorcycles'
#call the function
scrapePages(the_url) 
```

在您定义的点之后`soupify_url`，即。文件的底部。

Python 正在读取 def`scrapePages()`已定义，然后尝试调用它；`scrapePages()`想要调用`soupify_url()`尚未定义的函数，因此您得到：

```
NameError: global name 'soupify_url' is not defined 
```

牢记规则：*必须在任何真正起作用的代码之前定义所有函数*

如果您将主代码调用移动`scrapePages()`到所有内容的定义`soupify_url()` 都将被定义并在范围内，则应该可以解决您的错误。

# java - java / android +崩溃应用程序中的时间

> ID：14751689
> 
> 赞同：0
> 
> 时间：2013-02-07T12:59:03.820
> 
> 标签：java, android, utility

好的，伙计们，我正在制作一个不断崩溃的android计时器应用程序。我正在使用一个计时器，它会在达到 25 分钟时重置，然后重新开始。这是通过单击监听器的开始按钮中的 for 循环来完成的。在循环中，我有另一个 while 循环，在该循环中，我通过语句为 long 类型变量分配经过时间的值

// for 循环内while循环的内容

```
 while(found==1){
                temp = chrono.getBase() + SystemClock.elapsedRealtime();
                if(temp == 25*60*1000){
                    found--;
                } 
```

我乘以 1000 因为时间以毫秒为单位？我做错了还是其他原因。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:16:17.803

while 循环可能会阻塞主 UI 线程，直到满足条件`found==1`。您可能需要的是 a`Timer`和 a `TimerTask`。或者，按照[本文](http://www.mopri.de/2010/timertask-bad-do-it-the-android-way-use-a-handler/)的建议，您可以使用处理程序启动 Runnable，以每 50 或 100 毫秒更新一次计时器时间。这是一个示例（未经测试和改编自[链接文章](http://www.mopri.de/2010/timertask-bad-do-it-the-android-way-use-a-handler/)！）：

```
private Handler handler = new Handler();
handler.postDelayed(runnable, 100);

private Runnable runnable = new Runnable() {
   @Override
   public void run() {
      /* do what you need to do */
      boolean isTimerReady=foobar();
      /* and here comes the "trick" */
      if (!isTimerReady) handler.postDelayed(this, 100);
   }
}; 
```

这开始`foobar()`每 100 毫秒。`foobar()`应该返回一个布尔值 - 基本上是您的 while 循环中的计算，并更新用户界面。一旦`foobar()`返回 true，`Runnable`则不会重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:06:36.307

您正在杀死 CPU，并且可能永远不会停止。temp 恰好为 25 * 60 * 1000 的可能性非常低。将“==”检查更改为“>=”。此外，对 found 使用“布尔值”：它更有意义。

# java - Java：使用 RxTx 库

> ID：14751691
> 
> 赞同：6
> 
> 时间：2013-02-07T12:59:06.010
> 
> 标签：java, rxtx, serial-communication

我是 Java 新手，正在尝试编写串行通信应用程序。

我使用的是 Windows 7（32 位）

```
D:\Glaswegian\Java\RXTX\Test>java -version
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) Client VM (build 23.7-b01, mixed mode, sharing)

D:\Glaswegian\Java\RXTX\Test>

D:\Glaswegian\Java\RXTX\Test>javac -version
javac 1.7.0_07

D:\Glaswegian\Java\RXTX\Test>PATH
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32
\WindowsPowerShell\v1.0\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C
:\Program Files\MATLAB\R2009a\bin;C:\Program Files\MATLAB\R2009a\bin\win32;C:\Pr
ogram Files\Java\jdk1.7.0_07\bin;C:\Program Files\Java\jre7\bin;C:\Program Files
\Java\jre7\lib\ext

D:\Glaswegian\Java\RXTX\Test> 
```

我下载了 RxTx

[http://henrypoon.wordpress.com/2010/12/25/installing-rxtx-for-serial-communication-with-java/](http://henrypoon.wordpress.com/2010/12/25/installing-rxtx-for-serial-communication-with-java/) [http://rxtx.qbang.org/wiki/index.php/Using_RXTX](http://rxtx.qbang.org/wiki/index.php/Using_RXTX)

如上链接所述，解压 rxtx-2.1-7-bins-r2。将 rxtxSerial.dll 复制到 C:\Program Files\Java\jre7\bin 将 RXTXcomm.jar 复制到 C:\Program Files\Java\jre7\lib\ext

我只是想运行这段代码：

```
import gnu.io.*;

public class RxTxComm{
    public static void main(String[] args)
    {}

    } 
```

我越来越低于错误。

```
D:\Glaswegian\Java\RXTX\Test>dir
 Volume in drive D has no label.
 Volume Serial Number is C643-EE74

 Directory of D:\Glaswegian\Java\RXTX\Test

07/02/2013  18:09    <DIR>          .
07/02/2013  18:09    <DIR>          ..
07/02/2013  17:45                94 RxTxComm.java
               1 File(s)             94 bytes
               2 Dir(s)  82,430,877,696 bytes free

D:\Glaswegian\Java\RXTX\Test>javac RxTxComm.java
RxTxComm.java:1: error: package gnu.io does not exist
import gnu.io.*;
^
1 error

D:\Glaswegian\Java\RXTX\Test> 
```

也提到了这个： [javac -classpath not doing the trick](https://stackoverflow.com/questions/9876924/javac-classpath-not-doing-the-trick)

怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T14:21:50.353

我想我复制到了错误的文件夹。我这样解决了这个问题：

*   ***将rxtxSerial.dll***复制到*C:\Program Files\Java\jdk1.7.0_07\jre\bin*
*   ***将RXTXcomm.jar***复制到*C:\Program Files\Java\jdk1.7.0_07\jre\lib\ext*

# javascript - 如何在 jquery 动画函数中传递原始显示属性？

> ID：14751697
> 
> 赞同：0
> 
> 时间：2013-02-07T12:59:31.160
> 
> 标签：javascript, jquery, css, animation

我将尝试尽可能简单地解释这个问题：

我有两个 div

第一个div：`<div id="first" style="color:black;"></div>`

第二个分区：`<div id="second" style="color:red;display:inline;"></div>`

我想当我在第一个 div 上调用 slideUp 并且它已经隐藏时，放置第二个的所有 css 样式，包括显示属性（在第一个 div 中是块，在第二个是内联）然后才显示 div。

我尝试这样做，但随后第二个显示属性丢失，第一个div的显示属性恢复为块，而不是内联。

```
$("first").slideUp(function(){ 
    $(this).attr("style","display:none;"+$("second").attr("style"));
    $(this).slideDown();
}); 
```

任何想法怎么做？

对不起我的英语，但我来自保加利亚，我真的需要这个，因为这是一个更大项目的重要组成部分。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:20:53.970

复制第二个元素并替换文本怎么样？

```
$("#first").slideUp(function () {
    var content = $(this).text();
    var copy = $("#second").clone();
    $(copy).html("");
    $(copy).text(content);
    $(copy).attr("id", "first");
    $("#first").replaceWith(copy);
    $("#first").slideDown();
}); 
```

[http://jsfiddle.net/kmd97/rKejG/19/](http://jsfiddle.net/kmd97/rKejG/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:06:48.990

这就是`.slideDown()`它将元素显示为块的工作方式。

```
$(this).slideDown(function(){
   $(this).css('display','inline');
}); 
```

这将使其内联，但也可能会破坏动画效果。这取决于

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:09:24.663

有两个主要问题。首先，您应该使用 jQuery.css 来控制 div 的样式。其次，要通过 id 选择一个 div，你需要使用 CSS 的“#”符号：

```
$(this).attr("style", $("#second").attr("style"));
$(this).css("display", "none"); 
```

# knockout.js - knockoutjs - 区分从 2 视图模型获取绑定的按钮上的单击事件

> ID：14751698
> 
> 赞同：0
> 
> 时间：2013-02-07T12:59:31.657
> 
> 标签：knockout.js

我在每个 div 中有两个嵌套的 div 和 2 个按钮：

```
<div id="d1">
    <button data-bind="click:x">
        invoke x
    </button>
    <div id="d2">
        <button id="Q_btn" data-bind="click:x">
            invoke x
        </button>
    </div>
</div> 
```

和2个视图模型绑定为：

```
var viewModel1 = {
    x : function() {
        alert('from model1')
    }
}

var viewModel2 = {
    x : function() {
        alert('from model2')
    }
}

ko.applyBindings(viewModel2, document.getElementById('d2'));
ko.applyBindings(viewModel1, document.getElementById('d1')); 
```

现在，当我单击 d2 (Q_btn) 内的按钮时，会发出 2 个警报，第一个说“来自 mode2”，第二个说“来自 model1”。我希望当我点击 Q_btn 时只发生第一个警报。

注意：在我的项目中，我在 div 上加载了一些 html 页面。每个 div 都有自己的视图模型。直到现在一切正常（每个 div 都使用自己的视图模型并且没有发生冲突）但是在嵌套 div 的情况下会发生上述问题。

我感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:12:26.453

我认为没有任何方法可以按照您建议的方式做您想做的事情。我建议你看看在这里实现一个发布者/订阅者模式，或者滚动你自己的（使用类似[jquery.pubsub](https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js)的东西），或者你可以使用一个名为[knockout-](https://github.com/rniemeyer/knockout-postbox/) postbox的扩展。

这将使您能够很好地解耦视图模型，同时允许它们相互通信。

# php - 检查数组的递归

> ID：14751708
> 
> 赞同：11
> 
> 时间：2013-02-07T12:59:54.157
> 
> 标签：php, arrays, recursion

检查数组是否在 PHP 中递归的最佳方法是什么？

给定以下代码：

```
<?php 
$myarray = array('test',123); 
$myarray[] = &$myarray; 
print_r($myarray); 
?> 
```

来自[PHP 手册：](http://www.php.net/manual/en/language.types.array.php#73936)

> print_r() 将在到达数组的第三个元素时显示*RECURSION 。*
> 
> 似乎没有任何其他方法可以扫描数组以查找递归引用，因此如果需要检查它们，则必须使用 print_r() 及其第二个参数来捕获输出并查找单词*RECURSION* .

有没有更优雅的检查方式？

PS。这就是我使用 regex 和 print_r() 检查和获取递归数组键的方式

```
$pattern = '/\n            \[(\w+)\] => Array\s+\*RECURSION\*/';
preg_match_all($pattern, print_r($value, TRUE), $matches);
$recursiveKeys =  array_unique($matches[1]); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:25:01.543

尝试解决“不可能”的问题总是很有趣！

这是一个函数，如果递归发生在顶层，它将检测递归数组：

```
function is_recursive(array &$array) {
    static $uniqueObject;
    if (!$uniqueObject) {
        $uniqueObject = new stdClass;
    }

    foreach ($array as &$item) {
        if (!is_array($item)) {
            continue;
        }

        $item[] = $uniqueObject;
        $isRecursive = end($array) === $uniqueObject;
        array_pop($item);
        if ($isRecursive) {
            return true;
        }
    }

    return false;
} 
```

**[看到它在行动](http://ideone.com/OqTKSl)**。

*在任何*级别检测递归显然会更加棘手，但我认为我们可以同意这似乎是可行的。

### 更新

这是检测任何级别的递归的递归（双关语并非有意但令人愉快）解决方案：

```
function is_recursive(array &$array, array &$alreadySeen = array()) {
    static $uniqueObject;
    if (!$uniqueObject) {
        $uniqueObject = new stdClass;
    }

    $alreadySeen[] = &$array;

    foreach ($array as &$item) {
        if (!is_array($item)) {
            continue;
        }

        $item[] = $uniqueObject;
        $recursionDetected = false;
        foreach ($alreadySeen as $candidate) {
            if (end($candidate) === $uniqueObject) {
                $recursionDetected = true;
                break;
            }
        }

        array_pop($item);

        if ($recursionDetected || is_recursive($item, $alreadySeen)) {
            return true;
        }
    }

    return false;
} 
```

**[看到它在行动](http://ideone.com/2IQwpQ)**。

当然，这也可以通过手动保留堆栈来编写为使用迭代而不是递归，这在递归级别非常大的情况下会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-02T17:27:58.440

以下函数比已接受答案中的代码更简单[意见]，并且似乎适用于我能够设计的任何用例。它似乎也快得惊人，通常需要几微秒，尽管我没有做过广泛的基准测试。如果有问题，如果有人能指出来，我将不胜感激？

```
// returns TRUE iff the passed object or array contains
// a self-referencing object or array
function is_r($obj, &$visited=array())
  {
  $visited[] = $obj;
  foreach ($obj as $el)
    {
    if (is_object($el) || is_array($el))
      {
      if (in_array($el, $visited, TRUE))
        return TRUE;
      if (is_r($el, $visited))
        return TRUE;
      }
    }
  return FALSE;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:14:33.670

我前段时间对此进行了深入研究，但找不到任何有用的机制来检测 PHP 数组中的递归。

问题归结为是否有可能判断两个 PHP 变量是否是对同一事物的引用。

如果您使用的是对象而不是数组（甚至是数组中的对象），那么这是可能的，因为可以使用`spl_object_hash()`. 因此，如果您的结构中有对象，那么您可以通过遍历树并比较对象来检测递归。

然而，对于常规变量——即非对象——不可能使用标准 PHP 轻松检测到这一点。

变通方法是使用`print_r()`（如您所知）或`var_dump()`，但这些都不是特别优雅的解决方案。

xDebug 还提供了一个可以提供帮助的功能`xdebug_debug_zval()`，但显然只有在您安装了 xDebug 时才可用，不建议在生产系统上使用。

进一步的意见和建议[可在此处获得](https://stackoverflow.com/questions/4817562/detecting-whether-a-php-variable-is-a-reference-referenced)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:06:20.777

我相信你无法检查。阅读[参考^(文档)](http://www.php.net/manual/en/language.references.spot.php)以获取有关参考的更多信息。

这是检查 RECURSION 的函数（来自 PHP 文档注释），尽管它似乎很慢（我不建议这样做）：

```
 function is_array_reference ($arr, $key) {
        $isRef = false;
        ob_start();
        var_dump($arr);
        if (strpos(preg_replace("/[ \n\r]*/i", "", preg_replace("/( ){4,}.*(\n\r)*/i", "", ob_get_contents())), "[" . $key . "]=>&") !== false)
            $isRef = true;
        ob_end_clean();
        return $isRef;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T23:53:20.523

您会在 SO 上找到的许多解决方案都已损坏（请参阅下面的说明）。我建议的函数适用于所有数组，并且比`print_r`：

```
function is_cyclic(&$array) {
    $isRecursive = false;
    set_error_handler(function ($errno, $errstr) use (&$isRecursive) {
        $isRecursive = $errno === E_WARNING && mb_stripos($errstr, 'recursion');
    });
    try {
        count($array, COUNT_RECURSIVE);    
    } finally {
        restore_error_handler();
    }
    return $isRecursive;
} 
```

该`count`函数采用第二个参数`$mode`，该参数可以设置为`COUNT_RECURSIVE`递归计数的常量（[请参阅文档](https://www.php.net/manual/en/function.count.php)）。如果一个递归数组被传递给`count`，它将发出一个警告，我们可以捕获和检查。我已经[在我的博客上](https://hbgl.dev/detecting-cyclic-arrays-in-php-a-new-approach/)写了更多关于这个解决方案的内容。测试和基准测试在[github 上](https://github.com/hbgl/demo-detecting-cyclic-arrays-in-php-a-new-approach)。

### 为什么大多数解决方案都被破坏了？

任何向数组添加标记然后检查这些标记是否存在的实现都不适用于所有输入。具体来说，在某些情况下，在数组之前已按值分配（例如，由函数返回）的情况下，它们无法检测到递归。这是由于 PHP 处理数组赋值的方式，如[PHP Language Specification 的第 4 章所述](https://phplang.org/spec/04-basic-concepts.html#value-assignment-of-array-types-to-local-variables)。[我在我的博客上](https://hbgl.dev/why-it-is-impossible-to-detect-cyclic-arrays-in-pure-php/)对此进行了更广泛的描述。

# yql - 在缓存响应时，当响应没有改变时，maxage 标头的合理值是多少？

> ID：14751709
> 
> 赞同：0
> 
> 时间：2013-02-07T12:59:54.927
> 
> 标签：yql

我有一个 YQL 查询，它返回我知道肯定不会改变的数据。为了避免速率限制，我正在考虑在 yql 响应中添加一个 maxage 标头。

现在我想知道一个合理的值是多少（在我确定响应永远不会改变的情况下）：一年？10年 ？更多的 ？

关于 yql 处理 maxage 标头的方式是否有任何特殊性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:50:03.873

关于 maxAge 以及如何使用它的好文章：[http ://www.yqlblog.net/blog/2010/03/12/avoiding-rate-limits-and-getting-banned-in-yql-and-pipes-caching-是你的朋友/](http://www.yqlblog.net/blog/2010/03/12/avoiding-rate-limits-and-getting-banned-in-yql-and-pipes-caching-is-your-friend/)。这应该可以回答您关于最大年龄的大部分问题。

对于您的第二个问题，如果响应永远不会改变，为什么还要首先进行 API 调用？您可以完全消除网络延迟，并在服务器本身上有一个 conf/property 文件具有响应。

我不太确定我是否理解您的意思，如果 YQL 处理标头的方式有任何规范，但会尽我所知尽力回答。从我之前分享的链接中，以下是几行：

> 其次，您可以要求 YQL 将语句的响应缓存更长时间——只需将 _maxage 查询参数附加到您的调用中，结果将在缓存中存储该时间长度（但不会比原来的时间短）：
> 
> [http://query.yahooapis.com/v1/public/yql?q=select](http://query.yahooapis.com/v1/public/yql?q=select) * from weather.forecast where location=90210&_maxage=3600
> 
> 当您使用缓存不足的表或 XML 源的输出而无需执行任何打开的表工作时，这非常有用

希望这可以帮助。

# c# - 读取 XML 文件时出错

> ID：14751711
> 
> 赞同：1
> 
> 时间：2013-02-07T13:00:13.893
> 
> 标签：c#, asp.net, xml, vb.net

我需要读取一个 XML 文件，但在这种情况下它跳过了一些元素，如“链接”，我放置了一个断点，我发现 IsStartElement 在元素为链接时为假。有任何想法吗 ？

```
Dim reader As XmlReader = XmlReader.Create(New StringReader(Xml), settings)

While reader.Read()
    If reader.IsStartElement Then
        Select Case reader.Name
            Case "title"
                title = reader.ReadElementContentAsString()
            Case "link"
                link= reader.ReadElementContentAsString()
        End Select
    End If
End While 
```

XML 文件

```
<title> title   1 </title>
<link>link 1 </link> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:13:41.957

你没有阅读结束元素。

它应该类似于（伪代码）：

```
if not reader.IsEmptyElement
    reader.ReadStartElement()
    value = reader.ReadContentAsSomething()
    reader.ReadEndElement()
else 
    reader.Skip() 
```

您缺少`ReadEndElement`和 的检查`IsEmptyElement`。

# android - Android ActionBar 没有出现

> ID：14751715
> 
> 赞同：0
> 
> 时间：2013-02-07T13:00:43.633
> 
> 标签：android

我知道，这听起来很愚蠢，但请耐心等待。

我使用以下

```
android:minSdkVersion="8"                
android:targetSdkVersion="17"
android:Theme.Holo" 
```

当我在 2.2 模拟器上运行我的应用程序时，菜单按钮会显示我的菜单。

当我在 4.2 模拟器上运行我的应用程序时，操作栏应该不会自动激活吗？我可以看到程序图标+标题。我添加了一些这样的菜单项：

```
<item android:id="@+id/itemShare" android:title="@string/titleShare"
    android:icon="@android:drawable/ic_menu_share"
    android:showAsAction="ifRoom"></item> 
```

然后我定义了

```
onCreateOptionsMenu 
```

我所有的活动都继承自。

然而，在 4.2 模拟器中运行我的应用程序时，我看不到任何“操作栏”图标。我一定遗漏了一些明显的东西。

我对 Android 和 Eclipse 很陌生，但我对上面的内容有些困惑。我这样做的方式，如果不想使用ActionbarSherlock，那不应该是获得蜂窝前后兼容性的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:11:12.657

> 当我在 4.2 模拟器上运行我的应用程序时，操作栏应该不会自动激活吗？

是的。

> 我可以看到程序图标+标题。

那是动作栏。

> 然而，在 4.2 模拟器中运行我的应用程序时，我看不到任何“操作栏”图标。我一定遗漏了一些明显的东西。

您的模拟器已确定没有足够的空间来显示图标，因此它们处于溢出状态。根据您的模拟器配置，您可以通过按 MENU 按钮或按右侧操作栏中的 ... 提示来激活溢出。

> 我这样做的方式，如果不想使用ActionbarSherlock，那不应该是获得蜂窝前后兼容性的方法吗？

是的。

# android - 显示对话框后是否可以替换 AlertDialog 的视图？

> ID：14751720
> 
> 赞同：5
> 
> 时间：2013-02-07T13:01:07.637
> 
> 标签：android, android-alertdialog

例如

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setView(someView);
AlertDialog dialog = builder.create();
dialog.show();
... then later ...
dialog.setView(someOtherView); 
```

代码执行没有错误，但对话框中的视图没有被替换。我做错了还是不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-04T15:49:26.333

## 我不知道为什么，但是当使用警报对话框生成器时 setView() 不起作用，但 setContentView() 确实

我认为警报对话框构建器不会以传统方式构建警报对话框，以便与所有版本的 android 兼容，因此您需要更新内容视图。

[Dialog.setContentView（查看视图）](http://developer.android.com/reference/android/app/Dialog.html#setContentView(android.view.View))

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setView(view);
AlertDialog alertDialog = builder.create();
alertDialog.show(); 
```

然后稍后

```
alertDialog.setContentView(newView); 
```

* * *

## 重建一个新的警报对话框可能更容易

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setView(view);
AlertDialog alertDialog = builder.create();
alertDialog.show(); 
```

然后稍后

```
alertDialog.dismiss();
AlertDialog.Builder updatedBuilder = new AlertDialog.Builder(context);
updatedBuilder.setView(updatedView);
AlertDialog updatedAlertDialog = builder.create();
updatedAlertDialog.show(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T13:12:38.570

不，这是不可能的。尝试关闭警报框并设置您的视图并再次显示它。

# mysql - SEC_TO_TIME 时间错误

> ID：14751722
> 
> 赞同：1
> 
> 时间：2013-02-07T13:01:14.397
> 
> 标签：mysql, datetime, select

我正在测试查询以确保它们返回正确的结果。但是我注意到我弄错了时间。我的时间戳之一是

> 2013-02-07 07:26:04

我减去：

> 2013-02-07 07:18:23

从第一个时间戳

这给了我十二分钟左右的差异。现在我不是数学天才，但我什至可以说 18 - 12 = 6... 不是 12... 所以我知道查询有问题。所以我删除了 SEC_TO_TIME 它给了我正确的时间差异：

```
+------------+-----------+--------------+----------------+--------+----------+
| session_id | anum      | first        | last           | why    | time     |
+------------+-----------+--------------+----------------+--------+----------+
|        220 | B00000000 | Testing      | thisout        | Other  | 00:07:41 |
+------------+-----------+--------------+----------------+--------+----------+

This is my query now : 

SELECT 
session.session_id, 
session.anum, 
student.first, 
student.last, 
session.why,
(TIMEDIFF(t.fin, session.signintime)) AS time 
FROM session 
INNER JOIN student 
    ON session.anum = student.anum  
LEFT JOIN (SELECT support.session_id, MAX(support.finishtime) AS fin FROM support GROUP BY support.session_id) AS t  
    ON t.session_id = session.session_id 
WHERE session.status = 3 
```

当我在 TIMEDIFF 之前添加 SEC_TO_TIME 时，问题就来了。

为什么会这样？

现在只是向你们展示 SEC_TO_TIME 的查询结果：

```
+------------+-----------+--------------+----------------+--------+----------+
| session_id | anum      | first        | last           | why    | time     |
+------------+-----------+--------------+----------------+--------+----------+
|        220 | B00000000 | Testing      | thisout        | Other  | 00:12:21 |
+------------+-----------+--------------+----------------+--------+----------+
2 rows in set (0.00 sec) 
```

任何解释都会很可爱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:10:36.247

00:07:41 = 741 秒 = 00:12:21 是 SEC_TO_TIME 看到的。该函数需要几秒钟并将其格式转换为 h:m:i。您已经将它作为 h:m:i 使用，在这里使用 SEC_TO_TIME 是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:10:45.543

您已经有了时间格式，所以也许您希望将时间转换为秒

```
TIME_TO_SEC() 
```

你的 diff 函数返回一个时间，而不是秒，那么你应该使用`TIME_TO_SEC()`

# android - 填充微调器代码的正确位置

> ID：14751724
> 
> 赞同：0
> 
> 时间：2013-02-07T13:01:16.787
> 
> 标签：android

我有一个带有微调控件和文本框的表单；并且表存储在 SQLite 数据库中。

我在活动的 onCreate 方法中填充微调器。调用数据库查询和更新用户界面是否正确？

根据用户从微调器中选择的值，我必须在文本框中给出自动建议。（我可以使用哪个控件代替文本框，我想强制用户从来自数据库的列表中进行选择。）

我也听说过片段，任何人都可以指导我是否有助于提高应用程序的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:11:32.990

最好在 onCreate 方法中调用一个函数并在该函数中填充微调器值，例如

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.spinner);

    addItemsOnSpinner1();
}

 public void addItemsOnSpinner1() {

    Spinner spinner = (Spinner) findViewById(R.id.spinnerSource);
    List<String> list = new ArrayList<String>();
    list.add("sony");
    list.add("apple");
    list.add("samsung");
    list.add("htc");
    list.add("blackberry");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    Collections.sort(list);
    spinner.setAdapter(dataAdapter); 
```

对于使用片段，请使用此链接[我何时应该在 Android 应用程序中使用片段？为什么要使用片段？](https://stackoverflow.com/questions/8597769/when-should-i-use-fragments-in-android-applications-why-to-use-fragments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:12:45.313

您必须使用您想要提供给用户的那一刻起的数据填充您的微调器。所以就在包含Activity的onCreate中。

有关更多信息，我猜[Spinner | 安卓开发者](http://developer.android.com/guide/topics/ui/controls/spinner.html)。

片段使您能够为您的 UI 创建独立的部分。例如一个片段，它包含一个列表和另一个显示所选元素的详细信息的片段。在平板电脑上，您可以将两者并排显示。在小型显示手持设备上，您必须显示列表并在项目选择时显示详细信息。使用 Fragments，您可以重用。看看这里[片段 | Android 开发人员](http://developer.android.com/guide/components/fragments.html)- 如果您将使用 Fragments，我建议您阅读此内容。它将为您省去麻烦。

# ios - iOS 上 Air 中的原生视频停止声音和麦克风

> ID：14751725
> 
> 赞同：1
> 
> 时间：2013-02-07T13:01:18.183
> 
> 标签：ios, actionscript-3, video, air, stagewebview

我正在尝试`StageWebView`在 Air for iPad 应用程序中播放本机视频，该应用程序播放声音并需要通过麦克风进行用户交互。
一切似乎都正常，但是当我开始播放视频时，声音和麦克风停止了。如果我处理了`StageWebView`，声音和麦克风会在 15 秒后恢复（并且我需要声音和麦克风至少在`StageWebView`释放后立即工作）。

我尝试在 iOS5 iPad1 和 iOS6 iPad2 上使用 Air 3.4、3.5 和 3.6 beta 完成这项工作。我尝试切换 iPad 的静音按钮，也尝试将其更改`SoundMixer.audioPlaybackMode`为**Media**和**Ambient**。但它没有用，我被困住了。

这是我处理麦克风的代码：

```
var microphone:Microphone = Microphone.getMicrophone();
microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, __micHandler);

private function micHandler(event : SampleDataEvent) : void {
    trace("mic is working !");
} 
```

对于音频：

```
_snd = new Sound();
_snd.load(new URLRequest(path));
_sndChannel = _snd.play();

private function soundStopHandler(event : MouseEvent) : void {
    if(_sndChannel) _sndChannel.stop();
} 
```

对于视频播放器：

```
_webview = new StageWebView();
_webview.stage = stage;
_webview.viewPort = new Rectangle(10, 120, 480, 300);
_webview.loadURL(path);

private function videoStopHandler(event : MouseEvent) : void {
    if(_webview) {
        _webview.dispose();
        _webview = null;
    }
} 
```

有人在我之前遇到过这个问题吗？有什么我忘记或做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:28:52.783

也许这个问题与iOS系统有关。

从 iOS 的角度来看，据我所知，官方是不可能的。当您开始录制会话时，除了录制不占用它。一旦你在会话中播放和录制会话必须解决。录制和回放会话，会话不能同时被占用。

参考苹果文档：[Audio Session](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)

AVAudioSessionCategoryPlayAndRecord 或等效的 kAudioSessionCategory_PlayAndRecord - 将此类别用于输入和输出音频的应用程序。输入和输出不必同时发生，但如果需要可以。这是用于音频聊天应用程序的类别。

在 AIR 中，如果您编码没有问题。很可能是这个原因。

# java - 具有相同标识符值的不同对象已与会话相关联：。merge 和 saveOrUpdate 都不起作用

> ID：14751730
> 
> 赞同：2
> 
> 时间：2013-02-07T13:01:47.123
> 
> 标签：java, hibernate, jakarta-ee, jpa

我有一个显示教师列表的 GUI。两个由用户选择 - 他们将成为创建的新学校班级的教师。老师-班级的关系是nm。

学校类：（它从其组继承其id）

```
@Entity
@Table(name="school_classes")
@Cacheable(true)
public class SchoolClass extends Group{

    @ManyToMany(cascade=CascadeType.ALL, mappedBy="classes", fetch=FetchType.EAGER)
    private SortedSet<Teacher> teachers; 
```

老师：

```
 @Entity
    @Table(name="teachers")
    @Cacheable(true)
    public class Teacher extends creator.models.school.Entity{
            // name etc

    @ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinTable(name="class_teachers",
    joinColumns = @JoinColumn(name="teacher_id", referencedColumnName="id"),
    inverseJoinColumns = @JoinColumn(name="class_id", referencedColumnName="id"))
    private SortedSet<SchoolClass> classes; 
```

我尝试像这样创建一个新类：

```
String className = request.getParameter("class_name");
String id1 = request.getParameter("class_teacher1");
String id2  = request.getParameter("class_teacher2");
Teacher t1 = DataRetrieveModule.getTeacher(id1);
Teacher t2 = DataRetrieveModule.getTeacher(id2);

Layout l = new Layout();
SchoolClass newClass = new SchoolClass(className);
newClass.setLayout(l);
newClass.addTeacher(t1);
t1.addClass(newClass);

newClass.addTeacher(t2);
t2.addClass(newClass);
DataInsertionModule.insert(newClass); 
```

此语句`DataRetrieveModule.getTeacher(id1)`打开一个会话，通过 ID 检索教师并关闭它。 `DataInsertionModule.insert(newClass)`还打开一个会话，调用 `session.saveOrUpdate(newClass)`. （我也试过`session.merge(newClass)`）

找老师：

```
public static Teacher getTeacher(String id) {
        Session session = null;
        Teacher t = null;
        try{
            sessionFactory = MyFactory.getSessionFactory();
            session = sessionFactory.openSession();
            t = (Teacher) session.get(Teacher.class, Long.parseLong(id));

        }
        catch(Exception e) {
            System.out.println("in DAO:");
            e.printStackTrace();
            if(session!=null)
                session.close();
        }       
        finally{
            if(session!=null)
                session.close();
        }

        return t;
    } 
```

数据插入：

```
public static void insert(Object o) {
        Session session = null;

        try 
        {
            sessionFactory = MyFactory.getSessionFactory();
            session = sessionFactory.openSession();
            Transaction tx = session.beginTransaction();

            session.save(o);
            tx.commit();

            System.out.println("insertion done");
        }
        catch (Exception e)
        {
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
        finally
        {
            if(session!=null)
                session.close();
        }
    } 
```

但是插入永远不会起作用。总是有一个已经存在的具有相同 id 的对象。

```
a different object with the same identifier value was already associated with the session: [creator.models.school.Teacher#3] 
```

我在 stackoverflow 上进行了搜索，并在类中覆盖了我的 getHashCode 和 equals 方法，我的所有业务对象都继承自：

```
@Override
public int compareTo(Entity o) {
    if(this.id < o.getId())
        return -1;
    else if(this.id > o.getId())
        return 1;
    return this.getClass().getName().compareTo(o.getClass().getName());
}

@Override
public boolean equals(Object o) {
    if(o instanceof Entity)
        return this.compareTo((Entity)o)==0;
    else return this.equals(o);
}

@Override
public int hashCode() {

    char[] bla = this.getClass().getName().toCharArray();
    int blue=0;
    for(char c:bla)
        blue = blue*10 + c;
    return (int) (id+blue);

} 
```

此外，我尝试将 of 更改`CascadeType`为`ManyToMany`（`MERGE`再次还原）。

目前，我在使用 session.get(..) 检索两个教师对象后合并教师对象，因为检索会从数据库中取出大量数据。还有进一步的 `..ToMany`关系。因此，可能会发生调用导致两个教师都被加载的情况。

```
public static Object merge(Object o) {
        Session session = null;
        Object returnVal = null;
        try 
        {
            sessionFactory = MyFactory.getSessionFactory();
            session = sessionFactory.openSession();
            Transaction tx = session.beginTransaction();
            returnVal = session.merge(o);
            tx.commit();

        }
        catch (Exception e)
        {
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
        finally
        {
            if(session!=null)
                session.close();
        }
        return returnVal;
    } 
```

.

```
Teacher t1 = DataRetrieveModule.getTeacher(id1);
Teacher t2 = DataRetrieveModule.getTeacher(id2);

t1= DataInsertionModule.merge(t1);
t2= DataInsertionModule.merge(t2); 
```

因此，我想，如果我将我的 get 方法返回的那个与另一个老师的 get 调用必须加载的那个合并，它应该可以工作。（像这里： http: [//www.stevideter.com/2008/12/07/saveorupdate-versus-merge-in-hibernate/](http://www.stevideter.com/2008/12/07/saveorupdate-versus-merge-in-hibernate/)）但它没有:(

可能是因为同一个超类（对象或我的实体类）的对象具有相同的 ID？

请帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:39:02.720

可能导致此错误的一种潜在情况是教师 1 和教师 2 的 id 相同。由于您关闭每个 get 之间的会话，它们将被分离，并且您最终会加载两个不同的对象，它们都代表数据库中的同一行（它们具有相同的主键。）然后，当它们都将被重新附加时对于通过保存 SchoolClass 的会话，Hibernate 将看到两个不同的对象都代表数据库中的同一行，并且不知道哪个代表正确的状态以持久保存到数据库中。

不确定是否是这种情况，但您应该运行调试器并检查teacher1 和teacher2 引用的对象的状态。

# api - 在 RESTfull 服务中实现复杂的搜索

> ID：14751731
> 
> 赞同：2
> 
> 时间：2013-02-07T13:01:48.433
> 
> 标签：api, rest, coldfusion

我们正在尝试使用 Coldfusion 10 在 Rest 服务中实现复杂的搜索功能。类似 projectid=1 和 active=1 和（ManagerName 包含 John 或 ManagerName 包含 alfred）

一种方法是 ?projectid=1&active=1&ManagerName=[John,Alfred]。但是，这不符合我的目的，因为 ManagerName 搜索不会返回所需的结果。此外，随着搜索过滤器数量的增加，查询字符串变得难以处理。

我试图通过 HTTP Get Request 获取一个 xml（带有所有搜索过滤器）作为输入，但这没有帮助，因为 GetHTTPRequestData() 不反映 xml 内容。

有没有办法通过 HTTP 获取请求传递 xml/json？如果 xml 是通过 HTTP Post 请求传递的，这会是一个不好的做法吗？是否有任何其他选项可以将复杂的过滤器参数传递给 REST 服务？

我在网站上浏览了很多类似问题的帖子，但仍然找不到解决我的问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:09:29.280

`GET`应该是幂等的，它不应该修改资源的状态。严格限制`get`对`Read`操作的使用

您的`POST`触发器资源创建，即连同有效负载（xml/json）。使用 POST 进行搜索是非常糟糕的做法。

此外，您应该注意缓存控制，因为您的`GET`请求可能会被缓存，如果您的搜索是实时的，您可能会得到陈旧的数据。

你可以举个`stackoverflow`例子

> [https://stackoverflow.com/questions/tagged/rest?sort=newest&pagesize=30](https://stackoverflow.com/questions/tagged/rest?sort=newest&pagesize=30)

在上面的 UR1 中，路径元素`questions`、`tagged`、`rest`导出`question`资源子集。查询参数建议过滤那些符合条件的参数。

# iphone - 自定义单元格的 UITableView 错误“无法在包中加载 NIB：”

> ID：14751732
> 
> 赞同：1
> 
> 时间：2013-02-07T13:01:50.757
> 
> 标签：iphone, ios, uitableview

当我尝试对自定义单元格使用以下编码时，它显示错误。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpletablcellCell";
    SimpletablcellCell *cell = (SimpletablcellCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpletablcellCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.nameLabel.text = [ar objectAtIndex:indexPath.row];
    cell.thumbnailImageView.image = [UIImage imageNamed:[ar1 objectAtIndex:indexPath.row]];
    cell.prepTimeLabel.text = [ar objectAtIndex:indexPath.row];

    return cell;
} 
```

错误信息

```
'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/apple/Library/Application Support/iPhone Simulator/6.0/Applications/FE02B3A1-C40C-4FAC-BBA6-B245350F3754/SImpleTab.app> (loaded)' with name 'SimpletablcellCell''
 *** First throw call stack:
(0x1c8f012 0x10cce7e 0x1c8edeb 0x22ffac 0x23198d 0x3418 0xcef4b 0xcf01f 0xb780b 0xc819b 0x6492d 0x10e06b0 0x228bfc0 0x228033c 0x228beaf 0x1038cd 0x4c1a6 0x4acbf 0x4abd9 0x49e34 0x49c6e 0x4aa29 0x4d922 0xf7fec 0x44bc4 0x44dbf 0x44f55 0x4df67 0x2d40 0x117b7 0x11da7 0x12fab 0x24315 0x2524b 0x16cf8 0x1beadf9 0x1beaad0 0x1c04bf5 0x1c04962 0x1c35bb6 0x1c34f44 0x1c34e1b 0x127da 0x1465c 0x29fd 0x2925)
libc++abi.dylib: terminate called throwing an exception 
```

请检查，这段代码有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T13:23:23.557

.nib / .xib 是否存在于您名为 的项目中`SimpletablcellCell`？名字可能有错别字，请仔细检查。

确保该文件是您的目标的一部分。您可以通过在 Xcode 中打开右侧菜单来检查这一点。例子：

![文件目标设置](../Images/1f3bb7ccca4ced262854d833f6c4bc4c.png)

如果单元存在，它是否在构建过程中被复制？检查项目目标构建设置中的“复制捆绑资源”阶段，并确保它正在被复制。如果没有，请将文件手动添加到此阶段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-12T04:50:33.330

将 Cocoapods 用于我的私人 pod 库时，我遇到了这个问题。

我错误地将我的 xib 文件包含在 s.source_files 中，就像这样

```
s.source_files =  'MyLibrary/**/*.{h,m,xib}' //DOES NOT WORK 
```

解决方案是使用资源属性：

```
s.resources = 'MyLibrary/**/*.{xib}'        //PROBLEM SOLVED
s.source_files =  'MyLibrary/**/*.{h,m}' 
```

...

如果您的 podspec 正在寻找上面 s.resources 指定的 xib，但 xib 不在该路径中，则会出现问题。

一旦我错误地将 xib 添加到我的根项目目录（您的 AppDelegate 所在的位置），因此 Cocoapods 不会将其复制到使用该 pod 的任何客户端。

我通过更改 s.resources 路径或移动 xib 使其位于 s.resources 路径中来解决此问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-21T13:20:32.723

如果您使用以下方法注册笔尖：

```
let nib: UINib = UINib(nibName: "myNib", bundle: nil)
tableView.registerNib(nib, forCellReuseIdentifier: "myCell") 
```

确保它在`viewDidLoad()`函数中完成。我已将它放在`init()`函数中并收到此错误。一旦转移到`viewDidLoad()`，它工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:14:03.687

当您在 XCode 之外重命名某些文件时，可能会发生此错误。要解决它，您只需从项目中删除文件（右键单击 - 删除和“删除引用”）您重新导入项目中的文件，一切都会好起来的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-27T06:21:17.263

1.  确保将您的自定义单元格添加到您正在构建的目标中。成功注册该单元格。
2.  xib 中应该没有 IBOutlet 错误。此外，将视图连接到文件所有者。
3.  常见错误可能是您正在加载的笔尖名称不正确。

# javascript - 使用 Facebook API for Tizen 上传视频？

> ID：14751734
> 
> 赞同：1
> 
> 时间：2013-02-07T13:01:56.470
> 
> 标签：javascript, facebook, html, facebook-graph-api, tizen

我想知道如何使用 Facebook API 和用 HTML5 开发的 Tizen 应用程序上传视频。任何人都可以说如何整合..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:23:16.000

小部件内的代码应该与将视频上传到 Facebook 的任何其他 JavaScript 实现类似，请参见：[Facebook video upload via Graph API Javascript SDK](https://stackoverflow.com/questions/6094828/facebook-video-upload-via-graph-api-javascript-sdk)

唯一需要注意的是，[应该声明它在外部访问的任何资源（请参阅访问外部网络资源）：](https://developer.tizen.org/help/index.jsp?topic=/org.tizen.web.appprogramming/accessing_external_network_resources.htm)

> 默认情况下，您无法访问外部网络资源（WARP：W3C 访问请求策略）。因此，您必须为小部件请求权限才能检索网络资源。您可以使用“访问”选项卡上的“添加”按钮输入多个 URL。对于每个 URL，您可以指明是否要允许小部件访问 URL 子域。允许子域列的内容可以通过鼠标点击来切换。

因此，如果无法访问我们在以下定义的案例中所需的资源，它就无法工作`config.xml`：

```
<access origin="https://graph.facebook.com/USER_ID/videos" subdomains="true"/> 
```

# asp.net-mvc - 添加具有用户输入和硬编码值的模型

> ID：14751742
> 
> 赞同：1
> 
> 时间：2013-02-07T13:02:36.283
> 
> 标签：asp.net-mvc, razor

好的，所以我正在使用 MVC 框架。我有一个添加模型的视图。目前我正在使用默认的“创建”控制器。

我希望能够创建一个带有我自己的变量预设的模型。例如我想设置为用户 ID 的 model.UserId。我希望用户输入一些值，并且我希望已经设置了一些值。有没有办法我可以做这样的事情

（伪代码）

```
model.matchId = 123
model.prediction type = "user input"
add model 
```

下面是我当前的代码

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Predictions</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.MatchId, "Match")
    </div>
    <div class="editor-field">
        @Html.DropDownList("MatchId", String.Empty)
        @Html.ValidationMessageFor(model => model.MatchId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.UserId, "User")
    </div>
    <div class="editor-field">
        @Html.DropDownList("UserId", String.Empty)
        @Html.ValidationMessageFor(model => model.UserId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Type)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Type)
        @Html.ValidationMessageFor(model => model.Type)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Prediction)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Prediction)
        @Html.ValidationMessageFor(model => model.Prediction)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:12:10.120

在控制器中，您将在模型返回给视图之前设置模型的值。

```
public class HomeController : Controller
    {
        public ActionResult About()
        {
            var model = new MyModel();
            model.SomeId = 123;
            model.SomeOtherProperty = "Hello World";
            return View(model);
        } 
 } 
```

# php - 在“主题\实体\主题#users”中找不到目标实体用户\实体\用户

> ID：14751743
> 
> 赞同：0
> 
> 时间：2013-02-07T13:02:37.777
> 
> 标签：php, doctrine-orm, zend-framework2

好的，这是我尝试映射的代码

这是我的 user.php

```
 <?php

namespace User\Entity;

 use Doctrine\ORM\Mapping as ORM;
 use Zend\InputFilter\InputFilter;
    use Zend\InputFilter\Factory as InputFactory;
 use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

 /**
 * @ORM\Entity

* @ORM\Table(name="users")

* @property string $user_name

* @property string $pass_word

* @property int $id

*/
class User implements InputFilterAwareInterface {

 protected $inputFilter;
/**
 * @ORM\ManyToMany(targetEntity="Subject\Entity\Subject", inversedBy="users")
 * @JoinTable(name="users_subjects")
 * @var Collection
 */
protected $userName;
protected $password;
private $subjects;
/** @ORM\Id() @ORM\Column(type="integer") @ORM\GeneratedValue(strategy="AUTO") @var int */
protected $id;

public function __get($property) {

    return $this->$property;
}

public function __construct() {
    $this->subjects = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Magic setter to save protected properties.
 *
 * @param string $property
 * @param mixed $value
 */
public function __set($property, $value) {

    $this->$property = $value;
}

/**
 * Convert the object to an array.
 *
 * @return array
 */
public function getArrayCopy() {

    return get_object_vars($this);
}

public function populate($data = array()) {
    $this->id = $data['id'];
    $this->userName = $data['userame'];
    $this->password = $data['password '];
}

public function setInputFilter(InputFilterInterface $inputFilter) {
    throw new \Exception("Not used");
}

public function getInputFilter() {
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $inputFactory = new InputFactory();

        $inputFilter->add($inputFactory->createInput(array('name' => 'id',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'Int'),
                        ))));
        $inputFilter->add($inputFactory->createInput(array('name' => 'Username',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));
        $inputFilter->add($inputFactory->createInput(array('name' => 'Password',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));
        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
}

//put your code here
}

?> 
```

这是我的subject.php

```
<?php

  namespace Subject\Entity;

  use Doctrine\ORM\Mapping as ORM;
  use Zend\InputFilter\InputFilter;
  use Zend\InputFilter\Factory as InputFactory;
  use Zend\InputFilter\InputFilterAwareInterface;
  use Zend\InputFilter\InputFilterInterface;

 /**
 *

 * @ORM\Entity

 * @ORM\Table(name="subject")

 * @property string $subjectname

 * @property int $users

 * @property int $id

  */
 class Subject implements InputFilterAwareInterface {

protected $inputFilter;
/**

 * @ORM\Id

 * @ORM\Column(type="integer");

 * @ORM\GeneratedValue(strategy="AUTO")

 */
protected $id;
/**

 * @ORM\Column(type="string")

 */
protected $subjectname;
/**
 * @ORM\ManyToMany(targetEntity="User\Entity\User", mappedBy="subjects")
 */
protected $users;

public function __construct() {
    $this->users = new \Doctrine\Common\Collections\ArrayCollection();
    $this->addUser($this->users);
}

/** @return User|null */
public function getUsers() {
    return $this->users;
}

/** @param User $user */
public function addUser(User $user) {
    if ($users !== null || $user instanceof User) {
        $this->users->add($users);
    } else {
        throw new InvalidArgumentException('$user must be instance of Entity\User or null!');
    }
}

/**

 * Magic getter to expose protected properties.

 *

 * @param string $property

 * @return mixed

 */
public function __get($property) {

    return $this->$property;
}

/**

 * Magic setter to save protected properties.

 *

 * @param string $property

 * @param mixed $value

 */
public function __set($property, $value) {

    $this->$property = $value;
}

/**

 * Convert the object to an array.

 *

 * @return array

 */
public function getArrayCopy() {

    return get_object_vars($this);
}

/**

 * Populate from an array.

 *

 * @param array $data

 */
public function populate($data = array()) {

    $this->id = $data['id'];

    $this->subjectname = $data['subjectname'];

    $this->users = $data['user_id'];
    //print_r($data);
}

public function setInputFilter(InputFilterInterface $inputFilter) {

    throw new \Exception("Not used");
}

public function getInputFilter() {

    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $factory = new InputFactory();
        $inputFilter->add($factory->createInput(array(
                    'name' => 'id',
//                        'required' => true,
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));
        $inputFilter->add($factory->createInput(array(
                    'name' => 'subjectname',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'users',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
  }

 } 
```

由于我正在映射多对多，我不知道为什么会出现此错误

> “在 'Subject\Entity\Subject#users' 中找不到目标实体 User\Entity\User。”

# ios - UIDocumentInteractionController 有自己的视图

> ID：14751744
> 
> 赞同：0
> 
> 时间：2013-02-07T13:02:40.677
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uikit

我有一个弹出窗口，有不同的导出数据的可能性。我目前的目标是让用户能够选择一个应用程序来打开导出的数据。出于这个原因，我调用`UIDocumentInteractionController`'s 方法：

```
- (BOOL)presentOpenInMenuFromBarButtonItem:(UIBarButtonItem *)item 
                              animated:(BOOL)animated; 
```

这可行，但是出现在另一个弹出窗口顶部的弹出窗口看起来不太好。我想在现有的弹出窗口中推送外部程序列表。这可能没有太大的压力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:10:03.610

我认为这是不可能的，但是您可以关闭之前的弹出窗口，然后从同一来源显示 UIDocumentInteractionController

# jquery - 当使用一定数量的单词时，Jquery Autocomplete 下拉文本正在换行

> ID：14751745
> 
> 赞同：0
> 
> 时间：2013-02-07T13:02:43.287
> 
> 标签：jquery, jquery-autocomplete

我正在使用 Jquery 自动完成。我测试了它从数据库中提取的 3 个项目。

测试 1：zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz 结果在下拉列表的一行中显示

Test2: yyy yyyz yyy yyy yyy yyy yyy yyy yyy yyyyyyyyyyyyyyyy yyy yyy yyy 不良结果 - 在下拉列表中的 2 行上换行并显示最后一个 yyy 换行。

Test3: xxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 结果显示在一行。

为什么？？？Test2 是否包装。任何 Jquery Autocomplete 专家都会遇到这种情况。或者知道如何解决。我正在使用 MVC asp.net 非常简单的代码...除了上述问题外，效果很好。这是 Jquery 中的错误吗？

```
Heres my jquery code:
/// <reference path="jquery-1.6.2-vsdoc.js" />
/// <reference path="jquery-ui.js" />
$(document).ready(function () {
    $('*[data-autocomplete-url]')
        .each(function () {
            $(this).autocomplete({
                minLength: 2,
                source: $(this).data("autocomplete-url")
            });
        });
}); 
```

# c# - 使仅显式 xaml 样式或样式仅应用于区域

> ID：14751748
> 
> 赞同：0
> 
> 时间：2013-02-07T13:02:54.267
> 
> 标签：c#, wpf, xaml, .net-4.0

当我在用户控件根的资源中声明样式时，它将应用于该 XAML 文件中目标类型的所有控件。我怎样才能做出这样的样式： * 仅在我明确声明时使用或 * 仅限于用户控件中的某个区域（例如将 Grid 放在 Grid 中，然后在第二个网格中声明样式将仅是应用于该网格）。有没有我可以使用的这样的容器，它对 UI 没有任何影响，而只是样式的容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:51:12.847

要将其应用于整个子树，您可以在任何元素的资源中声明样式，并且它将仅应用于该元素（如果它是正确的类型）及其子树中正确类型的元素。（例如，将其放在您的二级网格`<Grid.Resources>`中）

要将其分配给特定元素，您可以将其放入具有 x:Key 属性 ( `<Style x:Key="MyStyle">`) 的祖先元素的资源字典中，然后使用其 Style 属性 ( ) 将所需的子元素指向它`Style="{StaticResource MyStyle}"`。如果你给它一个显式的 x:Key 属性，它不会根据类型隐式匹配。

或者，如果您根本不想使用资源，您可以在您想要的任何元素中定义内联样式 ( `<Grid><Grid.Style><Style>...</Style></Grid.Style><Grid>`)，它只会应用于该元素。

# javascript - 显示类名

> ID：14751749
> 
> 赞同：1
> 
> 时间：2013-02-07T13:03:00.990
> 
> 标签：javascript, html

大家好，我在这里有一个 Javascript 代码，它创建 HTML 按钮 onload，按钮属性通过 ASP 页面从数据库中获取。现在我想显示这些属性，我可以显示 id、类型和值，但类显示为未定义。我转到浏览器上的页面并检查了元素并显示了类，但未显示在警报框中。请帮忙...

```
function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
return '\n<input'
                + (tbID ? ' id=\'' + tbID + '\'' : '')
                + (tbClass ? ' class=\'' + tbClass + '\'' : '')
                + (tbType ? ' type=\'' + tbType + '\'' : '')
                + (tbValue ? ' value=\'' + tbValue + '\'' : '')
                            + (onClick ? ' onclick=\''+ onClick + '\'':'')
                            + '>';

}

function DisplayButtons(cableData) {

var newContent = '';

$.each(cableData, function (i, item) {

newContent += createButtons(
        item.CommonCable,
        "unclickedButton",
        "submit",
        item.CommonCable,
        'alert(this.id + " " + this.class + " "+"clicked")'
    );

});

$('#Categories').html(newContent);  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:06:10.753

改为.. `this.class`_`this.className`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:06:51.190

当你到达 alert 参数时，传入这个：

```
'alert(this.id + " " +' +  $(this).attr(class) + ' + " "+"clicked")' 
```

您可以使用 jQuery 来获取类名。

# authentication - Kohana 3 auth 用户名作为数字

> ID：14751750
> 
> 赞同：0
> 
> 时间：2013-02-07T13:03:01.460
> 
> 标签：authentication, kohana, kohana-3, kohana-orm, kohana-auth

我想在 Kohana Auth 中使用数字作为用户名。例如，用户名 100001？添加新用户 Kohana 时返回错误：ORM_Validation_Exception [0]：无法验证数组是否可以将用户编号作为 Kohana 中的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:46:35.077

***编辑：** [这个答案](https://stackoverflow.com/a/8606023/1791115)看起来比我的更简单，更好，但试着去理解它。*

* * *

您需要扩展用户模型，我将帮助您使用 ORM 驱动程序的身份验证。

**扩展用户模型的步骤：**

1.  如果您还没有，请将 Auth 模块配置为使用 orm 并创建一个包含所需字段的数据库表。[这是一个很好的例子](http://blog.mixu.net/2010/09/06/step-by-step-guide-to-kohana-3-auth/)（这是一个使用 ko3.1 的旧教程，但你仍然可以从中学习）。**PS：**你可以在'users'表中有任何列，如果你不想要，你不需要'username'列。

2.  打开并仔细阅读这个文件：（`MODULES/orm/classes/model/auth/user.php`它是自我记录的，我希望你理解它。如果没有，请停止阅读这里的答案并阅读 kohana 文档。一些快捷方式：[Auth - Kohana 用户指南](http://kohanaframework.org/3.2/guide/auth/)，[Auth (orm) methods](http://kohanaframework.org/3.2/guide/api/Model_Auth_User)，[addons:auth](http://docs.kohanaphp.com/addons/auth)

3.  将文件（不要编辑原始文件）复制到`APPPATH/classes/model/auth/user.php`并根据需要进行编辑。您可能想要编辑的一些*功能*`rules`是：`filters`和`unique_key`(<- 有用)。有创意，您还可以添加自定义功能。

4.  测试并更改其他任何需要的东西。

* * *

您可以根据需要更改登录方法。您可以通过电子邮件设置登录、自定义验证方法或在保存到数据库之前解析值（请参阅 参考资料`public function filters()`）。这对于您尝试使用 ORM 对 auth 模块进行的任何操作都有帮助...但是...如果您真的不想使用 ORM，您可以构建自己的驱动程序，[学习如何](http://kohanaframework.org/3.2/guide/auth/driver/develop)。

*我前段时间在**kohana 3.2**中做了这个，但我认为你不会在 3.3 中遇到问题。如果您仍有疑问，kohana 论坛上的[这个问题可能会有所帮助。](http://forum.kohanaframework.org/discussion/8241/custom-schema-with-auth-module/p1)*

# sencha-touch - 如何在不使用 AJAX 的情况下在 Sencha Touch 中将数据发布到服务器

> ID：14751752
> 
> 赞同：3
> 
> 时间：2013-02-07T13:03:03.020
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha Touch，我需要使用简单的 HTTP POST（无 AJAX）将一些数据发布到服务器

目前我使用

```
Ext.data.JsonP.request

Ext.Ajax.request 
```

据我了解，两者都适用于 AJAX。

我想知道如何禁用 AJAX 功能并允许我仅通过 HTTP 发送一些参数而不使用 xhr 和 ajax。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:37:53.237

您可以创建一个表单面板，然后`submit`使用要提交的表单的 url 调用该方法：

```
// define your form
var form = Ext.create('Ext.form.Panel', {
  ...
  // your form fields, etc
});

// later, in some handler for a button click, etc
form.submit({
  url: 'url/to/submit.php',
  method: 'POST',
  success: function() {
    // handle successful form submit
  },
  failure: funciton() { ... }
}); 
```

# jquery - Mootools (joomla) + jQuery + Firefox 冲突：选择器错误

> ID：14751753
> 
> 赞同：2
> 
> 时间：2013-02-07T13:03:03.283
> 
> 标签：jquery, firefox, joomla, mootools

这是与这些特定软件版本相关的一个非常具体且奇怪的错误：

*   Joomla 1.5.23
*   jQuery 1.7.2
*   Mootools 升级（一个 Joomla 插件）
*   Mootools 1.2.5
*   火狐 18.0.1

请注意，该错误可能比所暗示的更广泛；这些只是我目前正在运行的版本。

在这个组合中，

```
jQuery('.st'); 
```

匹配以下所有三个元素：

```
<p class="test">one</p>
<p class="st">one</p>
<p class="stellar">one</p> 
```

我已经从 mootools 脚本中隔离了以下原因：

```
Native.implement([Element, Document], {
    getElementsByClassName: function(className){
        MooTools.upgradeLog('1.1 > 1.2: Element.filterByTag is deprecated.');
        return this.getElements('.' + className);
    },

    getElementsBySelector: function(selector){
        MooTools.upgradeLog('1.1 > 1.2: Element.getElementsBySelector is deprecated. Use getElements()');
        return this.getElements(selector);
    }
}); 
```

具体来说，是 return 语句`getElementsByClassName`改变了本机行为。我不确定为什么只在 Firefox 中存在问题，而不是在 Chrome 中。

我对仅仅注释掉该代码持谨慎态度，因为我不太了解这个“mootools 升级”插件，也不知道它会产生什么副作用。是否有足够熟悉上述内容的人能够阐明任何观点？

**更新**

好的，经过一些调试，我越来越接近了。该错误与`Selectors.Filters.byClass`取决于`String.contains()`. 当然，mootools 覆盖了该功能 -*但*覆盖似乎只在 Chrome 中生效。这也会影响对`Element.hasClass`进行类似调用的函数`String.contains()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:45:27.540

解决方案：升级到 Joomla 1.5.26 以获得最新的安全性

将 jQuery 升级到最低 1.8.3。1.9（如果需要，使用 migrate 插件）如果可能的话。问题解决了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:10:40.490

看看这个 Joomla 插件 - [http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18654](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18654) 它可以让你使用没有冲突的 jQuery，所以你可以在 Joomla 1.5 中将它与 Mootols 一起使用. 祝你好运。

# java - 杰克逊：无法反序列化 START_OBJECT 令牌中的 Number 实例

> ID：14751756
> 
> 赞同：4
> 
> 时间：2013-02-07T13:03:10.753
> 
> 标签：java, json, gwt, serialization, jackson

我的 GWT 服务返回`LinkedList<VisualData>`。`VisualData`看起来是这样的：

```
import javax.xml.bind.annotation.XmlRootElement;
import com.google.gwt.user.client.rpc.IsSerializable;

@XmlRootElement
public class VisualData implements IsSerializable {
    private Number value;
    private long timestamp;

    public VisualData() {
    }

    public VisualData(Number value, long timestamp) {
        this.value = value;
        this.timestamp = timestamp;
    }

    public long getTimestamp() {
        return timestamp;
    }

    public Number getValue() {
        return value;
    }

    public void setTimestamp(long timestamp) {
        this.timestamp = timestamp;
    }

    public void setValue(Number value) {
        this.value = value;
    }
} 
```

我得到以下与 field 相关的异常`private Number value`。

```
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.lang.Number out of START_OBJECT token
at [Source: org.apache.catalina.connector.CoyoteInputStream@a0eb51; line: 1, column: 29] (through reference chain: org.jage.charts.client.VisualData["value"]) 
```

当我更改`private Number value`为 时`private Object value`，我得到的所有 getter 和 setter：

```
SEVERE: WebModule[/AgECharts]Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'org.jage.charts.client.VisualData' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = Value:{@type=xs:int, $=6}, timestamp:1360240281439
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619) 
```

第二种情况很清楚，`Object`该类不可序列化。但为什么我会得到`Can not deserialize instance of java.lang.Number out of START_OBJECT token`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T17:23:56.680

如果不为您的字段提供其他类型信息，您将无法将数据反序列化到此对象`value`中。这是因为`Number`类是抽象的，不能被实例化。将字段更改为`Object`将无济于事，因为杰克逊可以将数据反序列化为该类的可写字段。

`Number`您应该将该字段更改为类（`Integer`、、`Long`等`Double`）的具体实现之一。

# dialog - 使用 XRC 创建自定义对话框

> ID：14751757
> 
> 赞同：1
> 
> 时间：2013-02-07T13:03:11.587
> 
> 标签：dialog, wxpython, xrc

我在定义自己的使用 XRC 描述的对话框时遇到了麻烦。

我已经阅读了[http://nebelhom.blogspot.co.nz/2012/04/xrc-and-wxdialogs.html](http://nebelhom.blogspot.co.nz/2012/04/xrc-and-wxdialogs.html)和其他类似的来源告诉我这样做：

```
class ConfigDialog(wx.Dialog):
    def __init__(self, parent):
            self.res = xrc.XmlResource("config_dialog.xrc")
            pre = wx.PreDialog()
            self.res.LoadOnDialog(pre, parent, "ConfigDlg")
            self.PostCreate(pre)

            #Bind controls to events 
```

但是，对于您如何将控件实际绑定到 ConfigDialog 类中定义的不同方法，我仍然很困惑。

我试过

```
self.btn_1 = xrc.XRCCTRL(self.frame, 'btn_1') 
```

和 self.btn_1 = xrc.XRCCTRL(self, 'btn_1')

[（因为我在这里](https://groups.google.com/forum/?fromgroups=#!topic/wxpython-users/mJGrO4T5ifw)读到）

> PostCreate 方法用于将 pre 的胆量转移到 self 中，因此它的行为就像是 ConfigDialog 的真实实例。

但他们都没有工作。

你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:35:39.253

[我使用此处](http://wxpython-users.1045709.n5.nabble.com/XRC-Simple-Dialog-td2348939.html)记录的 2 步创建解决了该问题。

这是一个小例子

```
# Import both wx main module and the xrc module
import wx
import wx.xrc as xrc

class MyDialog(wx.Dialog):
    """
    This is our dialog. XRC will create it's widgets and all we need to do is
    handle the events.
    """
    def __init__(self, parent, res):

        pre = wx.PreDialog()
        self.PostCreate(pre)

        res.LoadOnDialog(self, None, "MyDialog")

        #Binding events

        self.Bind(wx.EVT_BUTTON, self.on_ok, xrc.XRCCTRL(self, "okButton"))
        self.Bind(wx.EVT_BUTTON, self.on_cancel, xrc.XRCCTRL(self, "cancelButton"))

    def on_ok(self, event):
        """Show a message box informing us we pressed the OK button"""
        msgDlg = wx.MessageDialog(self, "OK pressed", style=wx.OK)
        msgDlg.ShowModal()
        msgDlg.Destroy()
        self.Destroy()

    def on_cancel(self, event):
        """Show a message box informing us we pressed the Cancel button"""
        msgDlg = wx.MessageDialog(self, "Cancel pressed", style=wx.OK)
        msgDlg.ShowModal()
        msgDlg.Destroy()
        self.Destroy()

# Create the simplest wxApp object
app = wx.PySimpleApp()

# Load the XRC resources
res = xrc.XmlResource("example.xrc")

# Show and run the dialog
dlg = MyDialog(None, res)
dlg.ShowModal() 
```

和 XRC 文件：

```
<?xml version="1.0" encoding="cp1255"?>
<resource>
  <object class="wxDialog" name="MyDialog">
    <title></title>
    <object class="wxBoxSizer">
      <orient>wxVERTICAL</orient>
      <object class="sizeritem">
        <object class="wxStaticText">
          <label>Just a little bit of text to make
the dialog a little bit less empty
than it has to be for a simple
example.</label>
          <font>
            <size>12</size>
            <family>default</family>
            <style>normal</style>
            <weight>normal</weight>
            <underlined>0</underlined>
          </font>
        </object>
        <flag>wxALL</flag>
        <border>5</border>
      </object>
      <object class="spacer">
        <size>0,20</size>
      </object>
      <object class="sizeritem">
        <object class="wxBoxSizer">
          <orient>wxHORIZONTAL</orient>
          <object class="spacer">
            <option>1</option>
          </object>
          <object class="sizeritem">
            <object class="wxButton" name="okButton">
              <label>OK</label>
            </object>
            <flag>wxALL</flag>
            <border>5</border>
          </object>
          <object class="sizeritem">
            <object class="wxButton" name="cancelButton">
              <label>Cancel</label>
            </object>
            <flag>wxALL</flag>
            <border>5</border>
          </object>
        </object>
        <flag>wxEXPAND</flag>
      </object>
    </object>
  </object>
</resource> 
```

最后，一个小提示：要结束对话，请使用 EndModal(id)

```
self.EndModal(wx.ID_OK) 
```

# ruby-on-rails - ejabberd 数据库到 mysql 的配置

> ID：14751758
> 
> 赞同：0
> 
> 时间：2013-02-07T13:03:11.867
> 
> 标签：ruby-on-rails, ubuntu-12.04, ejabberd

我已经在 ubuntu 12.04 上从命令行安装了 ejabberd，现在，我想将 ejabberd 默认数据库更改为 mysql。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:23:45.070

[ejabberd 的安装和操作指南的](https://github.com/processone/ejabberd/blob/master/doc/guide.html)[MySQL](https://git.process-one.net/ejabberd/mainline/blobs/raw/v2.1.11/doc/guide.html#htoc33)章节提供了一个很好的参考。

简而言之，您需要构建具有 mysql 支持的 ejabberd ('./configure --enable-odbc && make install')，然后对于要与 mysq 一起使用的每个模块，更改 ejabberd.cfg 中的相关部分。

例如，您将使用 'mod_roster_odbc' 而不是['mod_roster'](https://git.process-one.net/ejabberd/mainline/blobs/raw/v2.1.11/doc/guide.html#modroster)。实际的策略取决于您的具体配置，以及您想要迁移到 MySQL（从默认的 Mnesia）或保留在 Mnesia 中的内容。

您将在 ejabberd 的源存储库中找到用于构建 DB 和所有表的 sql 查询。

还要考虑到，如果您在集群中使用 ejabberd，那么您仍然需要 Mnesia 来获得最少的表集（例如“模式”），以允许 Erlang 节点相互连接并保持同步。

# android - 如何在 xml 和类中将图像设置为按钮

> ID：14751761
> 
> 赞同：1
> 
> 时间：2013-02-07T13:03:17.293
> 
> 标签：android, imagebutton

我是android新手..请指导我..

我想将图像设置为按钮..

如何在 xml 和类文件中实现这一点？

我现在像这样在xml和类文件中设置按钮的代码..

> ```
>  <Button
>      android:id="@+id/nxt_btn"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignParentRight="true"
>      android:layout_below="@+id/rdtxt"
>      android:layout_marginRight="22dp"
>      android:layout_marginTop="34dp"
>      android:text="Next" /> 
> ```

```
 Button nextBtn = (Button) findViewById(R.id.nxt_btn); 
```

我想要练习.png 这张图片想要充当按钮..我已经把这张图片放到了 drawables 中..

现在如何通过代码实现这个......请指导我......

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:08:10.533

在 xml 中，您可以添加：

```
<ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/image" /> 
```

在活动中：

```
ImageView image = (ImageView) findViewById(R.id.image);
image.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                  //Do your stuff here
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:10:30.200

在 xml 文件中：-

```
<Button
 android:id="@+id/nxt_btn"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentRight="true"
 android:layout_below="@+id/rdtxt"
 android:layout_marginRight="22dp"
 android:background="@drawable/practice"
 android:layout_marginTop="34dp" /> 
```

或者

在活动中：-

```
Button nextBtn = (Button) findViewById(R.id.nxt_btn);
nextBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
              //Do your stuff here
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:06:48.447

使用`ImageButton`. 您可以使用它设置图像，`android:src="@drawable/myImage"`也可以设置`OnClickListener`它。

例如 ：

```
<ImageButton
 android:id="@+id/nxt_btn"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentRight="true"
 android:layout_below="@+id/rdtxt"
 android:layout_marginRight="22dp"
 android:layout_marginTop="34dp"
 android:src="@drawable/next_btn_img" />

ImageButton next = (ImageButton) findViewById(R.id.nxt_btn); 
```

# at-command - Hylafax 调制解调器卡在“发送作业”状态

> ID：14751763
> 
> 赞同：0
> 
> 时间：2013-02-07T13:03:18.617
> 
> 标签：at-command, fax

我有 12 个调制解调器连接到我的 HylaFax 服务器，似乎有时我的一些调制解调器卡在“正在发送作业”状态，直到我从调制解调器断开线路以终止作业。

调制解调器可以在没有任何通知的情况下永远保持这种状态，这是我在服务器跟踪中得到的关于工作被卡住的信息：

```
Jan 26 10:33:53.57: [29579]: SESSION BEGIN 000028267 79137356
Jan 26 10:33:53.57: [29579]: HylaFAX (tm) Version 6.0.6
Jan 26 10:33:53.57: [29579]: SEND FAX: JOB 5166 DEST 79137356 COMMID 000028267 DEVICE '/dev/ttyT38-23' FROM 'tuxfax <tuxfax@tuxfax.tux>' USER apache
Jan 26 10:33:53.57: [29579]: STATE CHANGE: RUNNING -> SENDING
Jan 26 10:33:53.57: [29579]: <-- [12:AT+FCLASS=1\r]
Jan 26 10:33:53.57: [29579]: --> [2:OK]
Jan 26 10:33:53.57: [29579]: DIAL 79137356
Jan 26 10:33:53.57: [29579]: <-- [10:ATDT79137356\r]
Jan 26 10:34:09.51: [29579]: --> [7:CONNECT]
Jan 26 10:34:17.55: [29579]: --> HDLC<40:FF C0 04 FF FF FF FF 73 1D 01 01 88 A1 B0 BB 00 00 BB BB 00 00 BB BB 00 00 00 00 00 00 00 00 B7 44 0D 00 00 09 00 E1 4F>
Jan 26 10:34:17.55: [29579]: --> [2:OK]
Jan 26 10:34:17.55: [29579]: REMOTE NSF "FF FF FF FF CE B8 80 80 11 85 0D DD 00 00 DD DD 00 00 DD DD 00 00 00 00 00 00 00 00 ED 22 B0 00 00 90 00"
Jan 26 10:34:17.55: [29579]: NSF remote fax equipment: unknown 
Jan 26 10:34:17.55: [29579]: <-- [9:AT+FRH=3\r]
Jan 26 10:34:17.56: [29579]: --> [7:CONNECT]
Jan 26 10:34:18.27: [29579]: --> HDLC<25:FF C0 02 CC 9C 4C AC 1C 4C 4C EC 04 04 04 04 04 04 04 04 04 04 04 04 8B C9>
Jan 26 10:34:18.27: [29579]: --> [2:OK]
Jan 26 10:34:18.27: [29579]: REMOTE CSI "77225292"
Jan 26 10:34:18.27: [29579]: <-- [9:AT+FRH=3\r]
Jan 26 10:34:18.28: [29579]: --> [7:CONNECT]
Jan 26 10:34:18.61: [29579]: --> HDLC<11:FF C8 01 00 73 1D 01 01 88 03 AE>
Jan 26 10:34:18.61: [29579]: --> [2:OK]
Jan 26 10:34:18.61: [29579]: REMOTE best rate 9600 bit/s
Jan 26 10:34:18.61: [29579]: REMOTE max A4 page width (215 mm)
Jan 26 10:34:18.61: [29579]: REMOTE max unlimited page length
Jan 26 10:34:18.61: [29579]: REMOTE best vres 15.4 line/mm
Jan 26 10:34:18.61: [29579]: REMOTE format support: MH, MR
Jan 26 10:34:18.61: [29579]: REMOTE best 20 ms, 10 ms/scanline
Jan 26 10:34:18.61: [29579]: USE 9600 bit/s
Jan 26 10:34:18.61: [29579]: SEND file "docq/doc5166.pdf;f0"
Jan 26 10:34:18.61: [29579]: USE A4 page width (215 mm)
Jan 26 10:34:18.61: [29579]: USE unlimited page length
Jan 26 10:34:18.61: [29579]: USE 3.85 line/mm
Jan 26 10:34:18.61: [29579]: USE 2-D MR
Jan 26 10:34:18.61: [29579]: USE 20 ms/scanline
Jan 26 10:34:18.61: [29579]: SEND training at v.29 9600 bit/s
Jan 26 10:34:18.61: [29579]: <-- [9:AT+FRS=7\r]
Jan 26 10:34:18.69: [29579]: --> [2:OK]
Jan 26 10:34:18.69: [29579]: <-- [9:AT+FTH=3\r]
Jan 26 10:34:18.69: [29579]: --> [7:CONNECT]
Jan 26 10:34:18.69: [29579]: <-- HDLC<23:FF C0 C2 1C 1C 1C 0C 2C CC 8C EC F4 0C AC EC 4C CC 04 0A F2 C2 22 04>
Jan 26 10:34:18.69: [29579]: <-- data [23]
Jan 26 10:34:18.69: [29579]: <-- data [2]
Jan 26 10:34:20.23: [29579]: --> [7:CONNECT]
Jan 26 10:34:20.23: [29579]: <-- HDLC<6:FF C8 C1 00 61 10>
Jan 26 10:34:20.23: [29579]: <-- data [6]
Jan 26 10:34:20.23: [29579]: <-- data [2]
Jan 26 10:34:20.53: [29579]: --> [2:OK]
Jan 26 10:34:20.53: [29579]: <-- [9:AT+FTS=7\r]
Jan 26 10:34:20.66: [29579]: --> [2:OK]
Jan 26 10:34:20.66: [29579]: <-- [10:AT+FTM=96\r]
Jan 26 10:34:20.66: [29579]: --> [7:CONNECT]
Jan 26 10:34:20.66: [29579]: <-- data [1024]
Jan 26 10:34:20.66: [29579]: <-- data [776]
Jan 26 10:34:20.66: [29579]: <-- data [2]
Jan 26 10:34:22.52: [29579]: --> [2:OK]
Jan 26 10:34:22.52: [29579]: <-- [9:AT+FRH=3\r]
Jan 26 10:34:23.47: [29579]: --> [7:CONNECT]
Jan 26 10:34:24.51: [29579]: --> HDLC<5:FF C8 21 57 BE>
Jan 26 10:34:24.51: [29579]: --> [2:OK]
Jan 26 10:34:24.51: [29579]: TRAINING succeeded
Jan 26 10:34:24.51: [29579]: <-- [9:AT+FRS=7\r]
Jan 26 10:34:24.59: [29579]: --> [2:OK]
Jan 26 10:34:24.59: [29579]: <-- [10:AT+FTM=96\r]
Jan 26 10:34:24.59: [29579]: --> [7:CONNECT]
Jan 26 10:34:24.59: [29579]: SEND begin page
Jan 26 10:34:24.59: [29579]: Reading MMR-compressed image file
Jan 26 10:34:24.60: [29579]: <-- data [1029]
Jan 26 10:34:24.60: [29579]: <-- data [1024]
Jan 26 10:34:24.60: [29579]: <-- data [1024]
Jan 26 10:34:24.60: [29579]: <-- data [1024]
Jan 26 10:34:24.60: [29579]: <-- data [1024]
Jan 26 10:34:24.60: [29579]: <-- data [1026]
Jan 26 10:34:24.60: [29579]: <-- data [1043]
Jan 26 10:34:24.60: [29579]: <-- data [1039]
Jan 26 10:34:24.60: [29579]: <-- data [1042]
Jan 26 10:34:24.60: [29579]: <-- data [1034]
Jan 26 10:34:24.60: [29579]: <-- data [1034]
Jan 26 10:34:24.60: [29579]: <-- data [1036]
Jan 26 10:34:24.60: [29579]: <-- data [1032]
Jan 26 10:34:24.60: [29579]: <-- data [1028]
Jan 26 10:34:24.60: [29579]: <-- data [1035]
Jan 26 10:34:24.60: [29579]: <-- data [1033]
Jan 26 10:34:24.60: [29579]: <-- data [1033]
Jan 26 10:34:24.60: [29579]: <-- data [1030]
Jan 26 10:34:24.60: [29579]: <-- data [1027]
Jan 26 10:34:24.60: [29579]: <-- data [1026]
Jan 26 10:34:24.60: [29579]: <-- data [1025]
Jan 26 10:34:24.60: [29579]: <-- data [1035]
Jan 26 10:34:24.60: [29579]: <-- data [1028]
Jan 26 10:34:24.60: [29579]: <-- data [1024]
Jan 26 10:34:24.60: [29579]: <-- data [1030]
Jan 26 10:34:24.60: [29579]: <-- data [264]
Jan 26 10:34:24.60: [29579]: SENT 25864 bytes of data
Jan 26 10:34:24.60: [29579]: <-- data [1031]
Jan 26 10:34:24.60: [29579]: <-- data [1038]
Jan 26 10:34:24.60: [29579]: <-- data [1039]
Jan 26 10:34:24.60: [29579]: <-- data [868]
Jan 26 10:34:24.60: [29579]: SENT 3931 bytes of data
Jan 26 10:34:24.60: [29579]: SEND 2D RTC
Jan 26 10:34:24.60: [29579]: <-- data [30]
Jan 26 10:34:24.60: [29579]: <-- data [2]
Jan 26 10:34:24.60: [29579]: SEND end page
Jan 26 10:34:49.80: [29579]: --> [2:OK]
Jan 26 10:34:49.80: [29579]: <-- [9:AT+FTS=9\r]
Jan 26 10:34:49.96: [29579]: --> [2:OK]
Jan 26 10:34:49.96: [29579]: SEND send EOP (no more pages or documents)
Jan 26 10:34:49.96: [29579]: <-- [9:AT+FTH=3\r]
Jan 26 10:34:49.96: [29579]: --> [7:CONNECT]
Jan 26 10:34:49.96: [29579]: <-- HDLC<3:FF C8 F4>
Jan 26 10:34:49.96: [29579]: <-- data [3]
Jan 26 10:34:49.96: [29579]: <-- data [2]
Jan 26 10:34:51.00: [29579]: --> [2:OK]
Jan 26 10:34:51.00: [29579]: <-- [9:AT+FRH=3\r]
Jan 26 10:34:51.87: [29579]: --> [7:CONNECT]
Jan 26 10:34:52.91: [29579]: --> HDLC<5:FF C8 5F C8 E7>
Jan 26 10:34:52.91: [29579]: --> [2:OK]
Jan 26 10:34:52.91: [29579]: SEND recv DCN (disconnect)
Jan 26 10:34:52.91: [29579]: Remote fax disconnected prematurely
Jan 26 10:34:52.91: [29579]: <-- [9:AT+FRS=7\r]
Jan 26 10:34:52.98: [29579]: --> [2:OK]
Jan 26 10:34:52.98: [29579]: <-- [9:AT+FTH=3\r]
Jan 26 10:34:52.99: [29579]: --> [7:CONNECT]
Jan 26 10:34:52.99: [29579]: <-- HDLC<3:FF C8 DF>
Jan 26 10:34:52.99: [29579]: <-- data [3]
Jan 26 10:34:52.99: [29579]: <-- data [2] 
```

据我了解，调制解调器正在（永远）等待远程传真响应。

服务器配置为：HylaFax 6.0.6 / CentOS 6.3

问题是：

1.  是否有任何配置参数可以避免在 Hylafax 中出现这种冻结？
2.  作为一种快速的解决方法，我可以编写一个脚本来监视发送作业并终止在“发送作业”中持续的作业，但无论如何我都找不到终止正在运行的作业（不是排队的作业）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:10:35.263

在从事手机开发工作时，我只接触过一些传真，但我了解到传真是一个“测试、测试、测试”的问题，在开始工作时需要付出很大的努力（在 GSM 上运行时，传真代码甚至必须启动在某些情况下，由于一些不可能的时间问题，它期望收到的东西发送响应）。即使您按照规范实现了所有内容，也不能保证一切正常。大多数（全部？）移动网络和电话今天已经放弃对传真的支持是有原因的。

> 据我了解，调制解调器正在（永远）等待远程传真响应。

可能是这种情况，据我所知，远程传真机和 hylafax 都没有责任。实施一些监控服务似乎是处理这个问题的唯一明智和可靠的方法。

# clojure - 如何为 datomic 编写可重用的规范查询

> ID：14751771
> 
> 赞同：4
> 
> 时间：2013-02-07T13:04:05.377
> 
> 标签：clojure, datomic

我在编写我认为可重用的一般数据查询时遇到了麻烦。

例如，从这篇文章跟进，[是否有一种规范的方法可以从特定的 datomic 分区中获取所有标识？](https://stackoverflow.com/questions/14720909/is-there-a-canonical-way-to-grab-all-idents-from-a-particular-datomic-partition)，我安装了以下架构

```
{[63 :account/password] 
 [64 :account/firstName] 
 [65 :account/lastName] 
 [62 :account/username]
 [69 :email/prority]
 [68 :email/address]} 
```

我想要一个只显示具有给定命名空间的属性的函数。

该函数显示“:account”命名空间中的所有属性

```
(d/q '[:find ?e ?ident :where
        [?e :db/ident ?ident]
        [_ :db.install/attribute ?e]
        [(.toString ?ident) ?val]
        [(.startsWith ?val ":account")]] (d/db *conn*))

;; => [62 :account/username] [63 :account/password]  
;;    [64 :account/firstName]  [65 :account/lastName] 
```

但是，当我想编写一个可以接受输入的函数时，我必须在各处加上引号才能使其工作。

```
(defn get-ns-attrs [?ns db]
  (d/q [':find '?e '?ident ':where
         ['?e ':db/ident '?ident]
         ['_ ':db.install/attribute '?e]
         [(list '.toString '?ident) '?val]
         [(list '.startsWith '?val (str ":" ?ns))]] db))

(get-ns-attrs "account" (d/db *conn*))
;; => [62 :account/username] [63 :account/password]  
;;    [64 :account/firstName]  [65 :account/lastName]

(get-ns-attrs "email" (d/db *conn*))
;; => [69 :email/prority] [68 :email/address] 
```

有一个更好的方法吗？

### - - - 更新 - - - -

供人们尝试的完整代码在这里：

```
(ns schema.start
  (:require [datomic.api :as d])
  (:use [clojure.pprint :only [pprint]]))

(def *uri* "datomic:mem://login-profile")
(d/create-database *uri*)
(def *conn* (d/connect *uri*))

(defn boolean? [x]
  (instance? java.lang.Boolean x))

(defn db-pair [attr kns val f]
  (list (keyword (str "db/" (name attr)))
        (f val kns)))

(defn db-enum [val kns]
  (keyword (str "db." (name kns) "/" (name val))))

(def DB-KNS
  {:ident        {:required true
                  :check keyword?}
   :type         {:required true
                  :check #{:keyword :string :boolean :long :bigint :float
                           :double :bigdec :ref :instant :uuid :uri :bytes}
                  :attr :valueType
                  :fn db-enum}
   :cardinality  {:required true
                  :check #{:one :many}
                  :fn db-enum}
   :unique       {:check #{:value :identity}
                  :fn db-enum}
   :doc          {:check string?}
   :index        {:check boolean?}
   :fulltext     {:check boolean?}
   :component?   {:check keyword?}
   :no-history   {:check boolean?}})

(defn process-kns [m kns params res]
  (let [val (m kns)]
    (cond (nil? val)
          (if (:required params)
            (throw (Exception. (str "key " kns " is a required key")))
            res)

          :else
          (let [chk  (or (:check params) (constantly true))
                f    (or (:fn params) (fn [x & xs] x))
                attr (or (:attr params) kns)]
            (if (chk val)
              (apply assoc res (db-pair attr kns val f))
              (throw (Exception. (str "value " val " failed check"))))))))

(defn schema [m]
  (loop [db-kns# DB-KNS
         output  {}]
    (if-let [entry (first db-kns#)]
      (recur (rest db-kns#)
             (process-kns m (first entry) (second entry) output))
      (assoc output
        :db.install/_attribute :db.part/db
        :db/id (d/tempid :db.part/db)))))

(def account-schema
  [(schema {:ident       :account/username
            :type        :string
            :cardinality :one
            :unique      :value
            :doc         "The username associated with the account"})
   (schema {:ident       :account/password
            :type        :string
            :cardinality :one
            :doc         "The password associated with the account"})
   (schema {:ident       :account/firstName
            :type        :string
            :cardinality :one
            :doc         "The first name of the user"})
   (schema {:ident       :account/lastName
            :type        :string
            :cardinality :one
            :doc         "The first name of the user"})
   (schema {:ident       :account/otherEmails
            :type        :ref
            :cardinality :many
            :doc         "Other email address of the user"})
   (schema {:ident       :account/primaryEmail
            :type        :ref
            :cardinality :one
            :doc         "The primary email address of the user"})])

(def email-schema
  [(schema {:ident       :email/address
            :type        :string
            :cardinality :one
            :unique      :value
            :doc         "An email address"})
   (schema {:ident       :email/priority
            :type        :long
            :cardinality :one
            :doc         "An email address's priority"})])

(d/transact *conn* account-schema)
(d/transact *conn* email-schema)

(defn get-ns-attrs1 [?ns db]
  (d/q [':find '?e '?ident ':where
        ['?e ':db/ident '?ident]
        ['_ ':db.install/attribute '?e]
        [(list '.toString '?ident) '?val]
        [(list '.startsWith '?val (str ":" ?ns))]] db))

(defn get-ns-attrs2 [?ns db]
  (d/q '[:find ?e ?ident :where
        [?e :db/ident ?ident]
        [_ :db.install/attribute ?e]
        [(.toString ?ident) ?val]
        [(.startsWith ?val ~(str ":" ?ns))]] db))

(get-ns-attrs1 "account" (d/db *conn*))
(get-ns-attrs1 "email" (d/db *conn*))

(get-ns-attrs2 "account" (d/db *conn*))
(get-ns-attrs2 "email" (d/db *conn*)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T06:17:45.260

在阅读了更多内容后，我发现`:in`关键字是所有这些的关键。示例在教程的“高级查询”部分 - [http://docs.datomic.com/tutorial.html](http://docs.datomic.com/tutorial.html)。

这是列出`:account`命名空间中所有属性的等效查询

```
(d/q '[:find ?e ?ident ?ns :in $ ?ns :where
        [?e :db/ident ?ident]
        [_ :db.install/attribute ?e]
        [(.toString ?ident) ?val]
        [(.startsWith ?val ?ns)]] 
     (d/db *conn*)
     "account")
;; => #<HashSet [[68 :account/firstName], [67 :account/password], [71 :account/primaryEmail], [66 :account/username], [69 :account/lastName], [70 :account/otherEmails]]> 
```

这是函数中的等价物

```
(defn get-ns-attrs [_ns db]
  (d/q '[:find ?e ?ident :in $ ?ns :where
         [?e :db/ident ?ident]
         [_ :db.install/attribute ?e]
         [(.toString ?ident) ?val]
         [(.startsWith ?val ?ns) ]] db (str _ns)))

(get-ns-attrs :account (d/db *conn*))

;; => #<HashSet [[68 :account/firstName], [67 :account/password], [71 :account/primaryEmail], [66 :account/username], [69 :account/lastName], [70 :account/otherEmails]]> 
```

`%`如果您需要更多的模块化，可以使用传递一组规则进一步分解该功能：

```
(def rule-nsAttrs
  '[[nsAttrs ?e ?ident ?ns]
    [?e :db/ident ?ident]
    [_ :db.install/attribute ?e]
    [(.toString ?ident) ?val]
    [(.startsWith ?val ?ns)]])

(defn get-ns-attrs [_ns db]
  (d/q '[:find ?e ?ident :in $ % ?ns :where
         (nsAttrs ?e ?ident ?ns)]
       (d/db *conn*)
       [rule-nsAttrs]
       (str _ns)))

(get-ns-attrs :account (d/db *conn*))
;; => #<HashSet [[68 :account/firstName], [67 :account/password], [71 :account/primaryEmail], [66 :account/username], [69 :account/lastName], [70 :account/otherEmails]]> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-12T15:36:14.557

可以使用 Clojure 的[命名空间](http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/namespace)更简单地解决：

```
(d/q '[:find ?name :in $ ?ns 
       :where [_ :db.install/attribute ?a] 
              [?a :db/ident ?name] 
              [(namespace ?name) ?attr-ns] 
              [(= ?attr-ns ?ns)]] (d/db *conn*) "account") 
```

返回：

```
#{[:account/password]
  [:account/firstName]
  [:account/lastName]
  [:account/username]} 
```

# iphone - 将数据从 iPhone 发布到 ASP.NET

> ID：14751774
> 
> 赞同：0
> 
> 时间：2013-02-07T13:04:12.313
> 
> 标签：iphone, ios

我成功地测试了这段代码，但它只适用于 PHP，如果我从 ASP 中输入 TextBox 的名称，它就不起作用。对于 ASP.NET 的任何帮助，我将不胜感激

```
 if (![nameInput.text isEqual: @""] && ![passInput.text isEqual: @""])
{
    NSString *postString = [NSString stringWithFormat:@"name0=%@&name1=%@", nameInput.text, passInput.text];
    NSData *data = [postString dataUsingEncoding:NSASCIIStringEncoding];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.ucimsewebu.eu/info.php"]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:data];

    [webView loadRequest:request];
} 
```

这是 ASP 文本框代码

```
 <tr>
                    <td>
                        <span id="cphmain_LabelJmeno">Přihlašovací jméno:</span></td>
                    <td>
                        <input name="ctl00$cphmain$TextBoxjmeno" type="text" id="cphmain_TextBoxjmeno" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <span id="cphmain_LabelHeslo">Heslo:</span></td>
                    <td>
                        <input name="ctl00$cphmain$TextBoxHeslo" type="password" id="cphmain_TextBoxHeslo" title="heslo" />
                    </td>
                </tr>
                <tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:00:49.723

您可以遍历请求集合

```
For Each Item In Request.Form
 Response.Write Item & ": " & Request.Form(Item) & "<br>"
Next 
```

# java - 获取太多子节点，无法获取属性

> ID：14751776
> 
> 赞同：3
> 
> 时间：2013-02-07T13:04:28.197
> 
> 标签：java, xml, parsing

我有一个简单的 XML，我想获取属性。网上有几个例子，但我仍然不明白为什么当我只看到 4 个时我得到 17 个。我什至尝试计算我认为文本可能存在的位置，但我仍然没有得到这个数字，除非是长度的输出。这导致我不知道如何获取所有 Tag3 的属性名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<tag1 xmlns="something">
    <xxxxxx-Set>
        <tag3 Name="a"/>
        <tag3 Name="b"/>
        <tag3 Name="c"/>
        <tag3 Name="d"/>
    </xxxxxx-Set>
    <tagB>
        <tag3 Name="a"/>
        <tag3 Name="b"/>
        <tag3 Name="c"/>
        <tag3 Name="d"/>
    </tagB>
</tag1> 
```

这是我的java代码：

```
import java.io.File;
import java.util.Arrays;
import java.util.List;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class ParseXML {

    public static void main(String[] args) {
        try {

            File test= new File("test.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(test);

            NodeList tagAs= doc.getElementsByTagName("xxxxxx-Set").item(0).getChildNodes(); //should be all the tag3 elements?

            for(int i = 0; i < tagAs.getLength(); i++)    {
                System.out.println(tagAs);
                System.out.println(i);
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

注意：将 .getAttributes().getNamedItem("Name").getNodeValue() 添加到打印语句会给我空异常。输出是：

```
[xxxxxx-Set: null]
0
[xxxxxx-Set: null]
1
...
[xxxxxx-Set: null]
16 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:27:19.230

如果您想获取所有`Name`属性（最好用小写命名），请使用下一种方法：

```
Element xSet = (Element) doc.getElementsByTagName("xxxxxx-Set").item(0);
NodeList xSetTags = xSet.getElementsByTagName("tag3");

for(int i = 0; i < xSetTags.getLength(); i++)    {
    Element tag3 = (Element) xSetTags.item(i);
    System.out.println(tag3.getAttribute("Name"));
} 
```

我使用`org.w3c.dom.Element`类做到了。使用 不是最好的主意[`org.w3c.dom.Node`](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html)，因为这个类不仅代表 xml 元素，还代表属性、注释等。`Node`查看文档以了解和`Element`类之间的区别。

# php - 像 DIV 背景一样裁剪图像

> ID：14751779
> 
> 赞同：0
> 
> 时间：2013-02-07T13:04:30.323
> 
> 标签：php, python, css

我开发了一个可以在大电视上显示的系统，对于一所大学来说，它可以显示当前和即将到来的课程。为了确定该类的位置，它使用名称+图像的组合。这个想法是任何（允许的）用户都可以使用其各自的照片添加更多教室。

我首先使用 JQuery 和 PHP 开发它。用户上传一张图像，该图像在页面上显示为 DIV 背景，然后，用户可以调整该图像的大小并将其移动到更适合的位置

*background-position* css 标签用于移动图像，*背景尺寸*用于缩放。直到这里一切都很好，因为系统都是网络开发的。

由于 JQuery 动画的性能问题，我不得不放弃 HTML（在我的计算机上运行良好，但在他们想要使用的旧版本上运行得不是很好）。我选择了 pyhton 来完成这项工作。

我需要为 python 调整这些背景位置和大小，所以它不会显示整个图像。为此，我决定首先使用 PHP 处理图像，对其进行裁剪和调整大小。运气不好，我在网上阅读后设法生成了这个。

问题，最后；然而，我仍然没有设法找到将 CSS 值正确转换为裁剪 X、Y 和 Scale 值的方法，因为它们的行为似乎不同。

ps.：我打算发布4个图片链接解释，但不幸的是我不能......

* * *

编辑以总结我想要做的事情：

将 CSS 样式的 div 转换为 JPG（或 png w/e）图像。检查评论中的链接我开发的图像调整大小/裁剪的东西。

* * *

**图片：**

*   屏幕上显示的图像：http: [//i.imgur.com/pm8r6q6.png](http://i.imgur.com/pm8r6q6.png)
*   调整图像的用户界面：http: [//i.imgur.com/FMhDkKQ.png](http://i.imgur.com/FMhDkKQ.png)
*   原图：http: [//i.imgur.com/vv4mAFN.jpg](http://i.imgur.com/vv4mAFN.jpg)
*   PHP处理后的图像：http: [//i.imgur.com/2L1Zsuv.png](http://i.imgur.com/2L1Zsuv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:12:12.647

使用 css 调整图像大小的主要概念非常简单。

想象一下，如果您有一张 100x50 的图像，并且您希望将其重新缩放到 77 宽：

```
.resize-x { width: 77px; height: auto;  } 
```

height: auto 将根据规定的宽度包装图像的高度，这里没有什么大秘密。

至于“裁剪”，您可以使用带有隐藏溢出的容器伪造裁剪，并在其周围移动图像：

```
<div class="frame">
   <img class="resize-x" src="myimg.jpg">
</div> 
```

对于CSS：

```
.frame {
  width: x; height: x;
  overflow: hidden;
} 
```

我不知道我是否以正确的方式回答了您的问题，希望对您有所帮助。

# perl - 我们应该对一个参数使用 DBI 绑定还是占位符

> ID：14751781
> 
> 赞同：0
> 
> 时间：2013-02-07T13:04:32.177
> 
> 标签：perl, dbi

我有一个如下所示的 sql 查询

```
select id from table where name like 'somename'; 
```

现在 db 中只有一条记录。现在绑定，sql查询如下

```
my $sth = $dbh->prepare("select id from table where name=?");
$sth->execute('somename');
.... # fetch single row from array 
```

那么哪个更好呢？单行绑定或不绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:10:11.807

是的。原因很简单 - 使用占位符是个好主意，甚至将它用于单个参数也是一种很好的做法。一段时间后，你的手会不假思索地使用占位符。

# sql-server - 如何统计mssql中特定数据的行数

> ID：14751787
> 
> 赞同：7
> 
> 时间：2013-02-07T13:04:49.897
> 
> 标签：sql-server, count

我有下表：

项目：

```
ID     Type     StockExists  
01     Cellphone   T
02     Cellphone   F
03     Apparrel    T 
```

我想`count the number of items`使用现有库存，即 . 的行数`StockExists='T'`。我正在执行查询；

```
Select count(StockExists) 
From [Items] where StockExists='T' 
```

但它总是返回 1\. 正确的方法是什么？

**编辑：**

另外，如何执行另一个这样的 Count 操作并将它们添加到一行中，例如，

```
Select count(StockExists) 
From [Items] where StockExists='T'` and `Select count(Type) 
From [Items] where Type='Cellphone'` ? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T13:08:38.167

```
SELECT 
    COUNT(*) As ExistCount 
FROM 
    dbo.Items
WHERE
    StockExists='T' 
```

所以你的查询应该有效。

结果：

```
EXISTCOUNT
    2 
```

[**演示**](http://sqlfiddle.com/#!6/c0e44/1/0)

**更新**

> 如何执行另一个这样的 Count 操作并将它们添加到一行中，例如 Select count(StockExists) From [Items] where StockExists='T' 和 Select count(Type) From [Items] where Type='Cellphone' ？

您可以`SUM`使用`CASE`：

```
SELECT 
  ExistCount = SUM(CASE WHEN StockExists='T' THEN 1 ELSE 0 END) ,
  CellphoneCount = SUM(CASE WHEN Type='Cellphone' THEN 1 ELSE 0 END) 
FROM 
    dbo.Items 
```

结果：

```
EXISTCOUNT    CELLPHONECOUNT
    2               2 
```

[**演示**](http://sqlfiddle.com/#!6/c0e44/7/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T14:16:08.800

选择 Sum(Case when field = 'this' then 1 else 0 end) as Total from YourTable

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T13:11:28.630

> 当使用 CASE WHEN 时，在 ELSE 情况下使用 NULL 比使用 0 更好，如下所示

```
 SELECT 
      ExistCount = SUM(CASE WHEN StockExists='T' THEN 1 ELSE NULL END) ,
      TotalCount = COUNT(ID) 
    FROM 
        dbo.Items 
```

# security - 为什么在 CakePHP 中 unlockedActions 不覆盖 requireAuth？

> ID：14751790
> 
> 赞同：1
> 
> 时间：2013-02-07T13:05:01.117
> 
> 标签：security, cakephp

在我的 Cake 2.3 应用程序中，我有一个通过 ajax 调用的操作。由于我使用的是 Security 组件，因此我必须使用`$this->Security->unlockedActions`，否则操作将失败。

但是，调用`unlockActions`时不起作用。`$this->Security->requireAuth()`这是一个错误吗？我对 CakePHP 如何处理安全性有误解吗？

为什么不`unlockActions`覆盖`requireAuth`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:09:20.240

`SecurityComponent::requireAuth()`将该操作添加到所需操作的数组中，存储在`SecurityComponent::$requireAuth`.

如果您查看安全组件的[启动代码](http://api23.cakephp.org/view_source/security-component#l-215)，您会发现`SecurityComponent::_authRequired()`检查`$requireAuth`数组的方法在解锁操作被检查*之前被调用。*我想如果您需要授权某项操作，那应该优先于告诉应用程序它没有授权。

我仍然认为这是一个错误（或记录不正确），因为它在文档中明确指出：

> 在某些情况下，您可能希望禁用某个操作的所有安全检查（例如 ajax 请求）。您可以通过在 beforeFilter 中的 $this->Security->unlockedActions 中列出这些操作来“解锁”这些操作。

这是一项新功能，因此最好打开一张票来解释混乱，看看核心团队对此有何看法。

我还应该在这里注意，为 ajax 请求禁用安全组件并不总是必要的。我有几个成功使用安全组件的应用程序，以及 CSRF 检查，并与 ajax 并排使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T17:40:34.547

身份验证与安全性非常不同。

安全性可防止多种方式侵入您的网站，而身份验证组件则负责处理用户的许可。当成员更新他的个人资料时，我确实想验证它是否是登录成员（身份验证），但我可能不想将安全组件用于他正在调用的操作。

# ruby - Ruby 中 :something => true 和 something: true 有什么区别？

> ID：14751795
> 
> 赞同：1
> 
> 时间：2013-02-07T13:05:20.637
> 
> 标签：ruby, ruby-on-rails-3

我有一个带有选项的 Capabara 方法：

```
page.should have_selector("#jFooterStandardLinks", :visible => true) 
```

也可以提供该选项，例如：

```
page.should have_selector("#jFooterStandardLinks", visible: true) 
```

这两种方法都有效，但我在 Eclipse IDE 中遇到错误。

*   `:visible => true`和 和有什么不一样`visible: true`？
*   是否`visible:`仍被解释为 Ruby 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:22:49.307

唯一的区别是从 ruby​​ 1.8x 到 1.9x 的过渡。现在它仍然完全一样，但可能最终会弃用 :visible => true 以支持 visible: true。

新的语法更简单、更简洁，与 JSON 更相似。

关于你的第二个问题，这是我发现的一个很好的报价：

> “新符号是最常见的哈希样式的语法糖，所谓的符号到对象哈希。如果你在 irb 中这样做，你会看到 ruby​​ 返回旧学校的哈希，带有符号用作键："

```
new_hash = {simon: "Talek", lorem: "Ipsum"}
# => {:simon=>"Talek", :lorem=>"Ipsum"} 
```

> “如果您需要将任意对象作为哈希键，您仍然必须使用老派。”

资料来源：[http ://breakthebit.org/post/8453341914/ruby-1-9-and-the-new-hash-syntax](http://breakthebit.org/post/8453341914/ruby-1-9-and-the-new-hash-syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:08:57.407

没有区别。`symbol: value`是 的别名`:symbol => value`，只是第一个与 ruby​​ 1.8 不兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:09:04.297

没有区别。Ruby 接受`key: value`哈希语法，而键是符号。因此

```
x_method @blah, some_key: 'asdf', another_key: 3, yet_a_key: true # is equivalent to:
x_method(@blah, {:some_key => 'adsf', :another_key => 3, :yet_a_key => true }) 
```

正如@ckruse 所指出的，第一种语法在 ruby​​ 1.8.7 中不可用。

# php - PHP：将 [img]src[/img] 更改为使用正则表达式

> ID：14751797
> 
> 赞同：0
> 
> 时间：2013-02-07T13:05:32.150
> 
> 标签：php, regex, preg-replace

我想`[img]src[/img]`用`<img src="src" alt="src" >`正则表达式更改。

我发现了一些转换`<img src="">`为`[img][/img]`但不是我的情况的示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:13:21.317

我相信这篇文章会帮助你解决你的问题......

[http://thesinkfiles.hubpages.com/hub/Regex-for-BBCode-in-PHP](http://thesinkfiles.hubpages.com/hub/Regex-for-BBCode-in-PHP)

```
function parseCode($txt)
{
   // these functions will clean the code first
   $ret = strip_tags($txt);

   // code replacements
   $ret = preg_replace('#\[b\](.+)\[\/b\]#iUs', '<b>$1</b>', $ret);
   $ret = preg_replace('#\[link\=(.+)\](.+)\[\/link\]#iUs', '<a href="$1">$2</a>', $ret);
   $ret = preg_replace('#\[img\](.+)\[\/img\]#iUs', '<img src="$1" alt="Image" />', $ret); 
   $ret = preg_replace('#\[quote\=(.+)\](.+)\[\/quote]#iUs', '<div class="quote">$2</div><div class="quote-by">By: $1</div>', $ret);

   // return parsed string
   return $ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:08:15.360

```
$ret = preg_replace('#\[img\](.+)\[\/img\]#iUs', '<img src="$1" alt="img">', $ret); 
```

但一般来说，您需要一个专用的 phpBB 脚本或 phpBB 类。甚至 PHP 本身也有 BBCode 文本处理器：[http ://www.php.net/manual/en/book.bbcode.php](http://www.php.net/manual/en/book.bbcode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:10:48.540

你可以测试一下

```
 $str= preg_replace('~\[img\](.*)\[\/img\]~si', '<img src="$1" alt="$1">', $str); 
```

# java - 从动态创建的 EditText 中获取文本

> ID：14751799
> 
> 赞同：0
> 
> 时间：2013-02-07T13:05:34.953
> 
> 标签：java, android, android-edittext, dynamically-generated

在程序中，当我输入数据并按下启动按钮时，我有 3 个字段要输入，创建三个动态输入字段，程序仅计算 3 个顶级字段的平均分数。我希望当用户更改动态创建的字段中的任何数据时，它会计算这些字段中的数据，而不考虑它们的数量

```
 package com.example.averegemark;

    import android.app.Activity;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.LinearLayout;
    import android.widget.TableLayout;
    import android.widget.TableRow;
    import android.widget.TableRow.LayoutParams;
    import android.widget.TextView;
    import android.widget.Toast;

public class Table extends Activity {

    LinearLayout LL;
    EditText et1,et2,et3;
    double coef=0,points=0,sum=0,coefsum=0;
    TextView total;
    Button bNext;
    String name="",mark="",coeff="";
    int i=0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.table);
        bNext = (Button) findViewById(R.id.bNext);
        et1 = (EditText) findViewById(R.id.et1);
        et2 = (EditText) findViewById(R.id.et2);
        et3 = (EditText) findViewById(R.id.et3);
        total = (TextView) findViewById(R.id.tvTotal);
        total.setText("GPA:");
        LL = (LinearLayout) findViewById(R.id.LL);

        bNext.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                name = et1.getText().toString();
                mark = et2.getText().toString();
                coeff = et3.getText().toString();
                if(mark.length()==0 || coeff.length()==0)
                    Toast.makeText(getApplicationContext(), "Enter mark `and coefficient", Toast.LENGTH_LONG).show();
                else
                    NewView(name,mark,coeff);
            }
        });

    }   

    private void NewView(String name, String mark, String coeff) {
        // TODO Auto-generated method stub
        EditText info1 = new EditText(this);
        EditText info2 = new EditText(this);
        EditText info3 = new EditText(this);

        info1.setId(i);i++;
        info1.setId(i);i++;
        info1.setId(i);i++;

        info1.setText(""+name);
        info2.setText(""+mark);
        info3.setText(""+coeff);

        TableLayout table = (TableLayout) findViewById(R.id.tbl);
        table.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        TableRow row = new TableRow(this);
        row.setLayoutParams(new TableRow.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        row.addView(info1);
        row.addView(info2);
        row.addView(info3);

        table.addView(row);

        String rez="";
        rez= info2.getText().toString();
        points = Double.parseDouble(rez);
        rez= info3.getText().toString();
        coef = Double.parseDouble(rez);
        sum +=coef*points;
        coefsum+=coef;
        sum/=coefsum;
        total.setText("GPA : "+sum+"\nCoefficient sum. "+coefsum);

        et3.setText("");
        et2.setText("");
        et1.setText("");
        et1.requestFocus();
    }
} 
```

所以当我将更改行中的任何数据时，我想重新计算它，但在这里它只使用顶部 EditText 而不是动态创建：

```
 String rez="";
        rez= info2.getText().toString();
        points = Double.parseDouble(rez);
        rez= info3.getText().toString();
        coef = Double.parseDouble(rez);
        sum +=coef*points;
        coefsum+=coef;
        sum/=coefsum;
        total.setText("GPA : "+sum+"\nCoefficient sum. "+coefsum); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:39:16.460

当您按下按钮时，您会从原始编辑文本中获取信息。您必须找到表中的最后一行并从那里获取编辑文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-07T09:50:56.913

```
CharSequence data = ((TextView) v).getText();
String result = data.toString(); 
```

# google-maps-api-3 - 编辑圆后如何获取半径... google maps api

> ID：14751800
> 
> 赞同：3
> 
> 时间：2013-02-07T13:05:35.153
> 
> 标签：google-maps-api-3

我正在尝试编辑圆后获取半径，我正在使用drawingManager库将圆绘制到地图中。下一部分是代码的一部分。

```
<script type="text/javascript">

    function initialize() {
        var mapOptions = {
          //center: new google.maps.LatLng(-34.397, 150.644),
          center: new google.maps.LatLng(4.705, -74.113),
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
      mapOptions);
    redondo = new google.maps.Circle(document.getElementById('map_canvas'),mapOptions);

    var drawingManager = new google.maps.drawing.DrawingManager({
        drawingMode: google.maps.drawing.OverlayType.MARKER,
        drawingControl: true,
        drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
              google.maps.drawing.OverlayType.MARKER,
              google.maps.drawing.OverlayType.CIRCLE,
              google.maps.drawing.OverlayType.POLYGON,
              google.maps.drawing.OverlayType.POLYLINE,
              google.maps.drawing.OverlayType.RECTANGLE
        ]
      },
      markerOptions: {
        icon: 'Images/marker_sprite.png'
      },
      circleOptions: {
        strokeColor: '#FF0000',
        fillColor: '#DF0101',
        fillOpacity: 0.3,
        strokeWeight: 2,
        editable:true

      },
       rectangleOptions: {
          strokeColor: "#FF0000",
          strokeWeight: 2,
          fillColor: '#DF0101',
          fillOpacity: 0.35,
       },
       polygonOptions: {
          strokeColor: "#FF0000",
          strokeWeight: 2,
          fillColor: '#DF0101',
          fillOpacity: 0.35,
       }            
    });
    drawingManager.setMap(map);
    google.maps.event.addListener(drawingManager,'circlecomplete', function(circle){
         radius = circle.getRadius();
        document.getElementById("radio").innerHTML=radius;
        redondo=circle;

    });

    google.maps.event.addListener(drawingManager, 'polygoncomplete', function(Polygon) {
        var vertices = Polygon.getPath();
        var pocision="";
        for (var i=0; i < vertices.length; i++){
            var xy=vertices.getAt(i);
            pocision += "<br>"+ xy.lng() +" , " + xy.lat();
            document.getElementById("posicion").innerHTML=pocision;
          }
          //document.getElementById("posicion").innerHTML= Polygon.getPaths(latlang).tostring;
        });

    var redondo= new google.maps.circle();
    google.maps.event.addListener(redondo, 'radius_changed', function(){

    --///////// in this part of the code don't enter 
        alert('buenaS');
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);

</script>
</head>
<body>
     <div id="map_canvas" style="width: 500px; height: 400px; display:table-cell"></div>
     <div style="margin:0px 0px 0px 800px; display:table-cell">     
        Posicion: <span id="posicion" style="display:none"></span><br>      
        Radio = <span id="radio"></span>        
     </div> 
```

我正在搜索事件处理程序以更改半径并调用“radius_changed”但对我来说不起作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T14:16:35.650

观察`radius_changed`圆的事件：

```
google.maps.event.addListener(drawingManager,'circlecomplete', function(circle){
             radius = circle.getRadius();
            document.getElementById("radio").innerHTML=radius;
            redondo=circle;

            //observe radius_changed
            google.maps.event.addListener(redondo,'radius_changed',function(){
            alert(this.getRadius())
          })

        }); 
```

# ruby-on-rails-3 - 如何在控制器中使用名为 Collector 的模型？

> ID：14751801
> 
> 赞同：1
> 
> 时间：2013-02-07T13:05:36.930
> 
> 标签：ruby-on-rails-3, activerecord

我正在尝试在我的控制器中执行此操作：

```
 @collector = Collector.find(params[:id]) 
```

但是当我这样做时，我得到了这个错误：

```
 undefined method `find' for ActionController::MimeResponds::Collector:Class 
```

如何证明我正在尝试使用名为 Collector 的 ActiveRecord 模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:22:16.207

尝试引用以 :: 为前缀的类，如`::Collector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:30:32.873

Try: `Collector::find(params[:id])`

# javascript - 使用 JavaScript 从后面每隔 3 个字符拆分字符串

> ID：14751802
> 
> 赞同：10
> 
> 时间：2013-02-07T13:05:43.580
> 
> 标签：javascript, string, split, character

我们如何使用 JavaScript 从后面每隔 3 个字符拆分一个字符串？

说，我有这个：

```
str = 9139328238 
```

在所需的功能之后，它将变为：

```
parts = ['9','139','328','238'] 
```

我们如何优雅地做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T13:09:57.357

```
var myString = String( 9139328238 );
console.log( myString.split( /(?=(?:...)*$)/ ) );
// ["9", "139", "328", "238"] 
```

我无法做出任何性能保证。对于较小的字符串应该没问题。

这是一个循环实现：

```
function funkyStringSplit( s )
{
    var i = s.length % 3;
    var parts = i ? [ s.substr( 0, i ) ] : [];
    for( ; i < s.length ; i += 3 )
    {
        parts.push( s.substr( i, 3 ) );
    }
    return parts;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-04T18:06:09.237

这里有很多复杂的答案。

```
function group(value) {
  return value.match(/\d{1,3}(?=(\d{3})*$)/g);
}

console.log(group('1'));
console.log(group('123'));
console.log(group('1234'));
console.log(group('12345'));
console.log(group('123456'));
console.log(group('1234567'));
console.log(group('12345678'));
console.log(group('123456789'));
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-31T13:01:39.750

我知道这是一个老问题，但我想提供我自己的单行版本来解决这个问题:)

```
"12345678".split('').reverse().join('').match(/.{1,3}/g).map(function(x){
    return x.split('').reverse().join('')
}).reverse() 
```

这基本上是反转字符串，捕获 3 个元素的组，反转每个组，然后反转整个字符串。

步骤是：

```
"12345678" -> [1, 2, 3, 4, 5, 6, 7, 8] //.split('')
[1, 2, 3, 4, 5, 6, 7, 8] -> [8, 7, 6, 5, 4, 3, 2, 1] //.reverse()
[8, 7, 6, 5, 4, 3, 2, 1] -> "87654321" //.join('')
"87654321" -> [876, 543, 21] //.match(...)
[876, 543, 21] -> [678, 345, 12] //.map(function(x){...})
[678, 345, 12] -> [12, 345, 678] //.reverse() 
```

然后，您可以使用字符加入数组（例如，',' 表示千位分隔符）

```
[12, 345, 678].join(',') -> "12,345,678" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:39:01.570

尝试这个：

```
var str = 9139328238 + ''; //convert int to string
var reqArr = []; // required array
var len = str.length; //maintaining length
while (len > 0) {
    len -= 3;
    reqArr.unshift(str.slice(len)); //inserting value to required array
    str = str.slice(0, len); //updating string
} 
```

希望能帮助到你..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T13:23:37.537

不那么优雅，但向您展示了一个 while 循环

```
 function commaSeparateNumber (val) {
    val = val.toString();
    while (/(\d+)(\d{3})/.test(val)){
      val = val.replace(/(\d+)(\d{3})/, '$1'+','+'$2');
    }
    return val;
  }

  var str = "9139328238";
  var splitStr = commaSeparateNumber(str).split(",");
  console.log(splitStr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-22T15:15:32.523

由于[各种原因](https://stackoverflow.com/questions/764247/why-are-regular-expressions-so-controversial)，不是每个人都喜欢正则表达式操作：这是一个常规函数，它使用常规循环从后面每隔 X 个字符拆分任何常规字符串。没什么花哨的，但它有效：

```
function splitStringFromEnd(customString, every) {
  var result = [], counter = every;
  // loop that captures substring chungs of "every" length e.g.: 1000.00 -> ["000", ".00"]
  for (var i = counter; counter <= customString.length; counter += every) {
    result.unshift(customString.substr(customString.length - counter, every))
  }
  // check if there is a remainder and grabs it.
  // Using our 1000.00 example: diff = 9 - 7; remainder = 3 - 2; -> ["1", "000", ".00"]
  var diff = counter - customString.length;
  var remainder = every - diff;
  if(remainder > 0) { result.unshift(customString.substr(0, remainder)) }
  return result;
} 
```

对于您的示例，它将是：

```
splitStringFromEnd("9139328238", 3);
// :returns => ["9", "139", "328", "238"] 
```

享受 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-01T08:30:38.573

```
const price_format = (price) => {
    let result = [];
    let new_str = [...price].reverse().join("");
    let rightSplit = new_str.match(/.{1,3}/g).reverse();
    for (let item of rightSplit) {
        result.push([...item].reverse().join(""));
    }
    return result.join(",");
}
let price = "2560000000";
console.log(price_format(price));

// output : 2,560,000,000 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-07T13:29:53.177

Finally it seems good. This is what I have got till now without using any loops

```
function breakAt3(x)
    {
            if(x.length < 3){ var parts = [x]; return parts; }
        var startPos = (x.length % 3);
        var newStr = x.substr(startPos); 
        var remainingStr = x.substr(0,startPos); 

        var parts = newStr.match(/.{1,3}/g);
        if(remainingStr != ''){ var length = parts.unshift(remainingStr); }
        return parts;

    }

    var str = '92183213081';  
    var result = breakAt3(str);  // 92,183,213,081 
```

# installation - yeoman 中未找到的包

> ID：14751803
> 
> 赞同：1
> 
> 时间：2013-02-07T13:05:45.130
> 
> 标签：installation, packages, fatal-error, yeoman, bower

我试图通过 yeoman 安装 socket.io，它加载套接字就好了，然后我猜它试图加载依赖项并且它找不到它们并给我致命错误 ws not found（对于 ws 包）。它试图从这些网址中获取：

1.  bower.herokuapp.com/packages/uglify-js
2.  bower.herokuapp.com/packages/ws
3.  bower.herokuapp.com/packages/xmlhttprequest
4.  bower.herokuapp.com/packages/active-x-obfuscator

它找不到 GIT 的链接。我试图加载地址，但服务器没有响应。

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:32:34.907

`socket.io`不是有效的 Bower 组件。[我已要求将其从注册表中删除](https://github.com/twitter/bower/issues/120#issuecomment-13268634)。

它是一个[组件](https://github.com/component/component)组件，而不是 Bower 组件。（令人困惑，我知道......）。

# ruby - 使用 Ox 使用 cdata 生成 XML？

> ID：14751804
> 
> 赞同：1
> 
> 时间：2013-02-07T13:05:47.633
> 
> 标签：ruby, xml, xml-parsing, nokogiri

我需要使用[ox](https://github.com/ohler55/ox)生成 XML，但没有从文档中得到太多帮助。我需要像这样生成 XML：

```
<Jobpostings>
  <Postings>
    <Posting>
      <JobTitle><cdata>Programmer Analyst 3-IT</cdata></JobTitle>
      <Location><cdata>Romania,Bucharest...</cdata></Location>
      <CountryCode><cdata>US</cdata>   </CountryCode>
      <JobDescription><cdata>class technology to develop.</cdata></JobDescription>             
    </Posting>     
  </Postings>
</jobpostings> 
```

我将标签内的数据作为变量中的字符串，如下所示：

```
jobtitle = "Programmer Analyst 3-IT" and so on... 
```

我目前正在使用 Nokogiri 生成 XML，但我需要处理大数据，并且为了性能，我将转向 Ox。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:27:40.013

这很简单，您只需初始化新元素并将它们附加到其他元素。不幸的是，Ox 库中没有 XML 构建器......这是一个例子：

```
require 'ox'
include Ox

source = Document.new

jobpostings = Element.new('Jobpostings')
source << jobpostings

postings = Element.new('Postings')
jobpostings << postings

posting = Element.new('Posting')
postings << posting

jobtitle = Element.new('JobTitle')
posting << jobtitle
jobtitle << CData.new('Programmer Analyst 3-IT')

location = Element.new('Location')
posting << location
location << CData.new('Romania,Bucharest...')

countrycode = Element.new('CountryCode')
posting << countrycode
countrycode << CData.new('US')
countrycode << '   '

jobdescription = Element.new('JobDescription')
posting << jobdescription
jobdescription << CData.new('class technology to develop.')

puts dump(source) 
```

回报：

```
<Jobpostings>
  <Postings>
    <Posting>
      <JobTitle>
        <![CDATA[Programmer Analyst 3-IT]]>
      </JobTitle>
      <Location>
        <![CDATA[Romania,Bucharest...]]>
      </Location>
      <CountryCode>
        <![CDATA[US]]>   </CountryCode>
      <JobDescription>
        <![CDATA[class technology to develop.]]>
      </JobDescription>
    </Posting>
  </Postings>
</Jobpostings> 
```

# python - 在 xlrd 中读取科学数字

> ID：14751806
> 
> 赞同：2
> 
> 时间：2013-02-07T13:05:58.620
> 
> 标签：python, xlrd

很简单的问题，但一直找不到好的答案。

在 Excel 中，我正在生成需要自动读取的文件。它们由 ID 号读取，但我得到的格式是将其设置为文本。使用 xlrd 时，我得到以下格式：

> 5.5112E+12

当我需要这种格式时：

> 5511195414392

实现这一目标的最佳方法是什么？我想避免使用 xlwt 但如果有必要我也可以使用帮助来开始该过程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:13:37.013

试一试：

```
import decimal

decimalNotation = decimal.Decimal(scientificNotationValueFromExcel) 
```

我制作了以下快速程序来测试它。它正在读取的 Excel 文件在第一个单元格中有一个条目。

```
from xlrd import *
import decimal

workbook = open_workbook('test.xlsx')

sheet = workbook.sheet_by_index(0)

value = sheet.cell_value(0, 0)

print decimal.Decimal(value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:34:16.503

我使用 CSV 模块来解决这个问题，因为它正确读取了单元格。

# typescript - TypeScript VS ScriptSharp – 权衡是什么？

> ID：14751807
> 
> 赞同：8
> 
> 时间：2013-02-07T13:06:00.900
> 
> 标签：typescript, script#

我即将构建一个大型 Javascript 应用程序，我想以更结构化的方式构建它。
Jquery 将用于 css 效果。
服务器端将在 c# 中。
你能分享你的知识和经验，哪个更好？

1.  哪个功能更丰富？
2.  哪个记录得更好？
3.  类型脚本真的是强类型吗？

此外，从长远来看，ScriptSharp 是单人表演（据我了解），而 Typescript 是由 Microsoft 构建的。
谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T14:13:44.040

**哪个功能更丰富？**

两者都不 - 编译后的 JavaScript 使您可以使用所有 JavaScript。

**哪个记录得更好？**

文档可能不是正确的问题。当您遇到困难时，哪个有更多可用信息/强大的社区可以帮助您？截至目前，Stack Overflow 上有 141 个 ScriptSharp 问题（有 48 个关注者）和 623 个 TypeScript 问题（有 328 个关注者）。

TypeScript 有一个非常清晰的[语言规范](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)。我查看了有关 ScriptSharp 的文档 - 有人需要指出这是在哪里......我假设您可以使用 C# 的一个子集，我很想知道那个子集是什么。

**TypeScript 真的是强类型的吗？**

TypeScript 是静态类型的。它将在编译时检查类型（IDE 将在设计时检查）。类型违规将生成错误，但如果您愿意，您也可以选择动态类型。

**我应该使用哪一个？**

如果你不能忍受用 C# 以外的任何东西编写代码的想法，你应该使用 ScriptSharp。在所有其他情况下，我推荐使用 TypeScript。了解 JavaScript 是有益的，因为这门语言如此无处不在，而 TypeScript 让您可以及早使用 ECMAScript 6 语言功能，因此，如果您决定放弃一切并使用纯 JavaScript，您的 TypeScript 编码经验将更有价值。

在某种程度上，我有偏见。我非常喜欢 TypeScript，我为此写了一本书。然而，对 TypeScript（而不是 Dart、CoffeeScript、ScriptSharp）的热情出现在该项目之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T07:09:46.327

ScriptSharp 虽然是单人秀，但一直在不断发展。近 3 年来，我们一直在将 ScriptSharp 用于大型 Web 应用程序，它为我们提供了很好的服务。使用 C# 编写代码的能力帮助我们快速行动，并且减少了培训开销。

ScriptSharp 有一个明显的缺点，即当新版本发布时，某些版本中有很多重大更改。但是我们非常喜欢它，以至于我们愿意忍受破坏性的变化并做出相应的改变。

如果您有专门的基础架构团队来处理此类架构更改，您可以使用它们来跟上 ScriptSharp 并为 javascript 库编写包装器，根据我们的经验，我强烈推荐 ScriptSharp。在决定采用哪种技术之前，请先评估两者的简单原型。您也可以尝试 Sharpkit 以获得有趣的替代方案。链接-> [http://sharpkit.net/](http://sharpkit.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-26T01:32:42.343

我也在调查这个问题，从我的研究来看，微软似乎已经使用 Script# 来构建他们所有大型 Web 应用程序的前端，例如 Office Web Apps、Hotmail、Office 365、SharePoint 2013，并且他们使用的是旧版本比最新版本的 Script# 因为人们说它已经足够稳定了。问题是微软似乎通过不向公众发布用于 SharePoint、CRM 和 Office 之类的 Script# 定义文件（导入库）来阻止我们使用这种生产力工具，因此似乎大多数人正在转向 TypeScript。然而，我倾向于使用 Script# 并根据需要构建我需要的定义。

参考：

*   [http://markeev.com/Articles/sharepoint-javascript-typescript.aspx](http://markeev.com/Articles/sharepoint-javascript-typescript.aspx)

[http://weblogs.asp.net/soever/archive/2009/10/20/sharepoint-2010-client-side-javascript-object-model-library-written-in-script.aspx](http://weblogs.asp.net/soever/archive/2009/10/20/sharepoint-2010-client-side-javascript-object-model-library-written-in-script.aspx)

入门：http---scriptsharpcontrib.codeplex.com/wikipage?title=Getting%20started%20with%20ScriptSharp

哦，Codeplex 上有一个 CRM 定义，但我没有链接 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T11:52:30.680

如果您是 .net 开发人员，那么您绝对应该至少检查一下 script#。是的，这是一个人的表演。是的，它不像 TypeScript 那样被宣传，但是周围的许多开发人员可以与 MS 徽标竞争吗？

我有 Script# 的实践经验，但没有 TypeScript 的实践经验。以后不想再接触的唯一原因是 script# 适用于已经熟悉 c#+JS 的人，而 TypeScript 是一个全新的故事，对您的项目来说是新的成本。

# sql - 主键被移动

> ID：14751808
> 
> 赞同：0
> 
> 时间：2013-02-07T13:06:03.210
> 
> 标签：sql, database

## 背景资料

出于某种原因，在从 xml 向多个表中插入大量数据时，我的主键被偏移了一个偏移量。（可能是因为多次尝试失败：P）

我有两张桌子.. tableA 和 tableB。他们是一对一的关系。tableA 是父表，并且具有主键列...例如 DataIndex。

现在DataIndex已经出现了这样的..

> 685、686、687……等等。

子表即TableB中存在的相应值是相同的。

## 问题

**如何将值向上移动，以便 DataIndex 从 1、2、3..等开始；在两个表中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:11:40.520

我假设主键实际上是一个标识列，它在插入时自动递增。您需要做的是“重新播种”身份列。您可以通过重命名表，使用原始名称创建一个重复表，然后将旧表中的数据插入新表（主键字段将被重置并再次从 1 自动递增）来执行此操作。进行插入时，请确保将旧主键值作为附加列包含在其他表中以供参考。

要匹配相关表，您需要做的就是`UPDATE`在旧主键值上执行并加入新表：

```
UPDATE tableB SET
   PRIMARYKEYCOLUMN = tableA.PRIMARYKEYCOLUMN
FROM tableA
WHERE
   tableA.OLDPRIMARYKEYCOLUMN = tableB.PRIMARYKEYCOLUMN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:09:54.270

1.  删除PK
2.  通过 DB CURSOR 浏览记录或使用任何语言编写脚本，依次读取和更改 id
3.  恢复PK
4.  为 PK 设置正确的身份种子

更改种子可能涉及身份列删除和重新创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:25:40.793

我会做以下事情：

1.  构建指向您的 PK 的外键列表；
2.  `ALTER`所有 FK，添加`ON UPDATE CASCADE`子句。此步骤可能不适用于某些数据库，您可能需要再次`DROP`进行`CREATE`约束；
3.  找到最小的当前 PK 值，例如：`SELECT min(id) FROM tableA;`
4.  刷新 PK 值：`UPDATE tableA SET id = id - min_id + 1;`
5.  删除`ON UPDATE CASCADE`子句。

请注意，根据`tableA`您使用的大小和数据库引擎，完全重建表以避免数据文件膨胀可能会更快、更容易。

# .net - .net - 导入一个 excel 文件并删除某些行

> ID：14751818
> 
> 赞同：0
> 
> 时间：2013-02-07T13:06:32.130
> 
> 标签：.net, vb.net

我正在寻找上传一个excel文件，打开它并阅读每一行，并可能删除该行，具体取决于一个单元格是否包含某些值。

我已经有上传工作：

```
 Protected Sub ButtonUploadFile_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonUploadFile.Click
        If FileUploadExcel.HasFile Then
            Try
                FileUploadExcel.SaveAs(Server.MapPath("~/ExcelImport.xls"))
                LabelUpload.Text = "Upload File Name: " & _
                      FileUploadExcel.PostedFile.FileName & "<br>" & _
                     "Type: " & _
                     FileUploadExcel.PostedFile.ContentType & _
                     " File Size: " & _
                     FileUploadExcel.PostedFile.ContentLength & " kb<br>"
            Catch ex As Exception
                LabelUpload.Text = "Error: " & ex.Message.ToString
            End Try
        Else
            LabelUpload.Text = "Please select a file to upload."
        End If
    End Sub 
```

所以我现在有它叫做 ExcelImport.xls

```
 Dim oExcelApp As Excel.Application = Nothing
        Dim sFileName As String = "~/ExcelImport.xls" 
```

这是据我所知......但对其余部分并不完全确定。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:16:02.867

我会尝试使用第三方库进行 Excel 解析。除非您需要通过 COM 接口访问它...我前段时间找到的库是开源的，它给了我足够的灵活性来做我需要在 excel 中做的事情。查看该库本身的[链接](http://code.google.com/p/excellibrary/)以及有关如何使用它的快速示例。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:24:11.640

您可以使用以下命令删除行（或列）`Range`：

```
Dim xlWorkBook As Excel.WorkBook = xlApp.Workbooks.Open(sFileName)
Dim xlWS As Excel.WorkSheet = CType(xlWorkBook.Worksheets(sheet), Excel.Worksheet)

Dim xRng As Excel.Range = CType(xlWS.Rows(rowIndex), Excel.Range)
xRng.Delete() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T11:50:13.103

不要在服务器上使用 Excel 互操作：它很慢，容易“挂起”，Microsoft strongloy 建议不要这样做。当然它看起来“容易”，但它的可维护性太差了，你会在未来的几年里头疼。帮自己一个忙，使用免费的 Library EPPLus 之类的东西，它可以更快地读取 xlsx 文件，并且更容易使用。

# java - 如何组织多个 ActionListener

> ID：14751819
> 
> 赞同：0
> 
> 时间：2013-02-07T13:06:34.573
> 
> 标签：java, swing

我有一个里面`JPopupMenu`有几个`JMenuItem`s。每个`JMenuItem`都有它自己的`ActionListener`，但是代码看起来相当混乱，连续有几个匿名内部类。我见过有人`ActionListener`这样组织几个s：

```
public class Foo implements ActionListener {

    private JMenuItem item1, item2;

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == item1) {
            ...
        } else if (e.getSource() == item2) {
            ...
        }
    }

} 
```

虽然这看起来更整洁，但我不喜欢让它可见的想法。有没有更好的方法来组织几个`ActionListener`s？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:06:15.097

这基本上是[JB Nizet](https://stackoverflow.com/users/571407/jb-nizet)的答案，但是让匿名动作侦听器成为实际的类。

较短的可以留在菜单类中，较大的可以放在自己的类中。我通常把内部类放在类的底部。有些人把它们都放在顶部。

通过使您的动作侦听器成为实际类，您可以使用构造函数将 JComponent 实例传递给动作侦听器类。

# c# - 使用 C# 将文化转换为区域设置或 LCID

> ID：14751820
> 
> 赞同：1
> 
> 时间：2013-02-07T13:06:35.153
> 
> 标签：c#, web-services, .net-2.0

我的文化为“en-GB”或“NL-nl”，但我想为其获取语言环境，我不能使用当前线程，它必须从文化转换为语言环境或 lcid。

不确定要在 Google 上寻找什么，因为没有相关内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:14:17.273

你可以试试这个：

```
CultureInfo myCI = new CultureInfo("en-GB");
int lcid = myCI.LCID; 
```

请参阅[System.Globalization.CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.lcid.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T09:11:24.850

```
CultureInfo.GetCultureInfo("en-US").LCID 
```

# build - IntelliJ IDEA：如何重建模块组？

> ID：14751824
> 
> 赞同：2
> 
> 时间：2013-02-07T13:06:38.197
> 
> 标签：build, intellij-idea

在我的 IntelliJ IDEA 项目中，我有几个模块。其中一些是单独的 webapps (WARs)，其中一些是 webapps (JARs) 共享的库。

例如，想象一下模块 war1 和 war2，每个模块都依赖于模块 jar1。

我需要在项目中包含所有这些模块，因为如果我破坏 jar1 中的某些内容，我想知道 war1 和 war2 是否可以编译。

现在，如果我更改 jar1 中的某些内容（并看到某些内容没有更新），我只需使用“重建项目”-然后一切都会重建，这很好。

但是当我在war1中更改某些内容时，我只想重建war1（或者有时是war1 + jar1）。“制作模块”选项并不总是按我想要的方式工作，因为它似乎没有清理输出目录。

我将 jar1 和 war1 放在一个单独的组中，但我也没有看到“重建组”功能。

有时“重建项目”不够的原因是重建所有模块需要很多时间。我也没有看到任何“清理输出目录”功能（如果有的话，我可以只清理一个模块，然后制作这个模块）。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:24:36.913

有一个选项可以重建选定的模块（你不能重建一组模块），还要注意 Make 在 99% 的情况下就足够了，你不必重建，但是你可能需要重建工件（`Build`| `Build Artifacts`） ，您可以多选几个工件，然后重建选定的。

# erlang - 氮气服务器

> ID：14751828
> 
> 赞同：1
> 
> 时间：2013-02-07T13:06:46.743
> 
> 标签：erlang, yaws, nitrogen

我想知道哪台服务器最适合用于 Nitrogen Web 框架？在网站上列出的 5 个中，我已经删除了 Inets（不推荐用于生产）和 WebMachine。剩下的只有 Mochweb、Yaws 和 Cowboy。我还在网站上注意到 Nitrogen/Yaws Windows 二进制文件不可下载。有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:18:07.983

什么是“最好的”使用没有明确的答案。如果您刚刚开始，只需选择一个即可。Cowboy 和 Yaws 作为“全功能”Erlang 网络服务器处于最活跃的开发阶段，因此如果您的限制是使用 Windows，请使用 Cowboy。

每台服务器都有自己的调优配置，如果您愿意为一台服务器调优和开发，Nitrogen 提供了使用您选择的服务器的机制。

至于不提供 Nitrogen/Yaws 的 Windows 下载，Yaws 不是在“纯 erlang”中完成的（有一些 C 文件需要编译），因此在 Windows 上编译 Yaws 比较复杂，所以为了在那里构建，Yaws 在 Windows 上被排除在外。有足够的时间优化 Nitrogen 在 Windows 中的构建，我只是不会再花时间尝试让 Yaws 在 Windows 上运行 Nitrogen。我希望发布完成，因此 Yaws 被搁置在未来的版本中。

# ruby-on-rails - ruby - 如何使用sketchup api将文本与构造点相关联？

> ID：14751832
> 
> 赞同：1
> 
> 时间：2013-02-07T13:07:05.903
> 
> 标签：ruby-on-rails, ruby, sketchup

我正在用 ruby​​ 开发一个sketchup插件，我已经成功地编写了解析过程，并且我将 cpoints 从 csv 文件获取到了sketchup。csv 文件还包含每个点的坐标内的描述，例如：`["15461.545", "845152.56", "5464.59", "tower1"]`。我想获得与`tower1`每个点相关联的文本。

我怎样才能做到这一点 ？

*PS：您不需要`tower1`从数组中获取，我已经这样做了。我现在将它放在一个独立变量中，例如： `desc_array = ["tower1", "beacon48", "anna55", ...]`*

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:33:53.187

I did that by

> @@todraw_su.each do |todraw|
> 
> @@desc_array.each do |desc|
> 
> @model.entities.add_text desc, todraw
> 
> end
> 
> end

But I found a problem with each statement, it loops for every `todraw` in `desc`
If you know how I can do it, answer on this question [Each statement inside another each malfunctions?](https://stackoverflow.com/questions/14754912/ruby-each-statement-inside-another-each-malfunction)

# sql - 解决sql异常找不到列“partinfo”或用户定义函数或聚合“partinfo.query”，或名称不明确

> ID：14751834
> 
> 赞同：1
> 
> 时间：2013-02-07T13:07:08.893
> 
> 标签：sql, sql-server, for-xml

我使用这个 pgm 从名为 partinfo 的 xmlstring 格式的列中获取值。它是表 test 中的列之一。partinfo 列可以被视为另一个包含许多列的表。我想从其中一个列中读取数据在这种情况下是安装日期。但是在执行时我得到了一个

> **sql异常：**找不到列“partinfo”或用户定义的函数或聚合“partinfo.query”，或者名称不明确。我该如何解决这个问题。

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            try {

               SqlConnection con = new 
                   SqlConnection("Data Source=NIP007\\SQLEXPRESS;
                        Initial Catalog=test;User ID=sa;Password=nest123@!");
                con.Open();

            string query =  "SELECT [partinfo].query('.//InstalledDate').value('.','VARCHAR(MAX)')FROM [test]";

            SqlCommand cmd = new SqlCommand(query, con);
           // StringBuilder builder=new StringBuilder();
           // string PartInfo=string.Empty;

            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                string str5 =dr.ToString();
                if (!string.IsNullOrEmpty(str5))
                {

                    textBox1.Text=str5;
                }
            }

        }
        catch(Exception ex)
        {

        }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:08:52.160

目前尚不清楚您的错误到底在哪里，因为您的 SQL 应该可以正常工作（[Demo Here](http://www.sqlfiddle.com/#!3/3d3f2/4)）并且不会返回错误，尽管我不确定输出是否是您想要的，因为它只是连接了 XML 中的所有已安装日期作为一个长字符串：

正如我之前的回答中所说，如果每行有多个安装日期，您将需要使用 CROSS APPLY 将安装日期作为单独的行获取。

**[使用 CROSS APPLY 的演示 SQL](http://www.sqlfiddle.com/#!3/3d3f2/2)**

如果您真的希望将日期连接到一个字符串，那么我建议使用字符串生成器来执行此操作：

```
try
{
    string query = @"SELECT  InstalledDate = x.value('InstalledDate[1]', 'DATETIME')
                    FROM    dbo.Test
                            CROSS APPLY PartInfo.nodes('/DocumentElement/PartInfo') p (x);";

    using (var con = new SqlConnection("Data Source=NIP007\\SQLEXPRESS;Initial Catalog=test;User ID=sa;Password=nest123@!"))
    using (var cmd = new SqlCommand(query, con))
    {
        con.Open();
        using (var dr = cmd.ExecuteReader())
        {
            var builder = new StringBuilder();
            while (dr.Read())
            {
                string str5 = dr.GetString(0);
                if (!string.IsNullOrEmpty(str5))
                {
                    builder.Append(str5 + ",");
                }
            }
            textBox1.Text = builder.ToString();
        }
    }

}
catch (Exception ex)
{
} 
```

如果这没有帮助，您可以发布表测试的 DDL 和一些示例数据。

谢谢

# json - 如何从 MongoDB + Node.js + Mongoose 获取修改后的 json 输出

> ID：14751835
> 
> 赞同：2
> 
> 时间：2013-02-07T13:07:11.813
> 
> 标签：json, node.js, mongodb, mongoose

**考虑我的集合在MongoDB**中存储如下：

```
 { 
    _id: 'Unique_Value',
    FieldMONGO1: 'ngfn',
    FieldMONGO2: { SomeKey: ['val1','val2','val...']  },
  } 
```

当我在 Mongoose 的模型实例上使用 find 方法检索时。我得到以下**JSON 输出**：

```
 { 
    _id: 'Unique_Value',
    FieldMONGO1: 'NAME_value',
    FieldMONGO2: { SomeKey: ['val1','val2','val...']  },
  } 
```

两者完全相同。

**问题：**有什么方法可以更改字段名称，例如`FieldMONGO1`to `FirstName`，`FieldMONGO2`to `NewName`& `_id`to `IdentityNo`？

所以我的输出将是这样的：

```
 { 
    IdentityNo: 'Unique_Value',
    FirstName: 'ngfn',
    NewName: { SomeKey: []  },
  } 
```

**知道解决方案：**是按原样获取 JSON 输出，然后在 Node.js 代码中更改字段（属性）名称。但这里的问题是，它变成了一个阻塞代码。如果请求大量数据，这可能会在服务器上产生开销。

谁能帮我找出一些有效的方法来做同样的事情？

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:19:02.053

`Virtuals`在[猫鼬](http://mongoosejs.com/docs/guide.html#virtuals)中退房。

查看参考链接中的示例。

如果你像这样调整

```
urSchema.virtual('FirstName').get(function () {
  return this.FieldMONGO1;
}); 
```

你能行的。

检查[这个答案](https://stackoverflow.com/questions/10363513/mongoose-mongodb-alias-id-field)。

# servlets - 是否可以以角度更改基本网址？

> ID：14751836
> 
> 赞同：4
> 
> 时间：2013-02-07T13:07:11.873
> 
> 标签：servlets, angularjs

我正在编写一个带有 java servlet 后端的 Web 应用程序，并且我正在检查前端的角度。由于 servlet 中特定资源的地址取决于它所在的 servlet 上下文，我想知道是否可以更改所有角度函数的基本 url。

示例：如果我在我的 web 应用程序中创建了一个链接，`<a href='/newaccount'>Create new account</a>`并相应地配置了路由提供程序，`$routeProvider.when('/newaccount', ...`那么无论我的 servlet 放置在什么 servlet 上下文中，我都希望它能够工作。因此，如果我将我的 servlet 放在一个名为“mycontext”的上下文中，那么实际的 url 到资源将是`[hostname]/mycontext/newaccount`.

我可以以某种方式设置角度并传入上下文名称，以便将其添加到所有位置和配置的路线之前吗？这样，servlet 可以放置在不同的上下文中并且仍然可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:21:41.923

实际上有两种路由 - 一种在后端，一种在前端。你不是想念他们吗？

当您`$routeProvider`在 AngularJS 中进行配置时，您正在配置客户端路由，因此 url 会有点`[hostname]/anypath/yourpage/#/newaccount`像（如果您使用的是 HashBang 模式，这是 AngularJS 中的默认模式）。

但当然你可以改变基地。Plunker，例如使用这种方式：

```
<script>
      document.write('<base href="' + document.location + '" />');
</script> 
```

更多信息，包括 HTML5 和 HashBang 模式，您可以在这里找到：[https](https://docs.angularjs.org/guide/$location) ://docs.angularjs.org/guide/$location （还有关于`<base>`和*Html 链接重写*的说明）

# python - Python3在字节数组中搜索

> ID：14751840
> 
> 赞同：5
> 
> 时间：2013-02-07T13:07:22.877
> 
> 标签：python, file, python-3.x, binary, find

我在使用 find()/index() （不知道它们之间是否有任何区别）和 bytesarray 时遇到了这个奇怪的问题。

我正在使用二进制文件，我已将其加载为字节数组，现在我需要找到指示消息开始和消息结束的标记。找到消息的开头（0x03 0x02）一切正常，但是当我搜索结尾（0x00）时，我一直得到相同的位置

```
 msg_start_token = bytearray((int(0x03), int(0x02)))
    msg_end_token = bytes(int(0x00))

    def get_message(file,start_pos):
        msg_start = file.find(msg_start_token,start_pos) + 2
        print(hex(msg_start))
        msg_end = file.find(msg_end_token,msg_start)
        print(hex(msg_end))
        msg = file[msg_start:msg_end]
        print(msg)
        return (msg, msg_end) 
```

我以前没有真正使用过二进制文件，所以我不知道我是否错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:11:13.473

您需要从*下一个位置*开始搜索，因此搜索：

```
file.find(msg_start_token, start_pos + 1) 
```

因为搜索从 开始*，* `start_pos`如果`msg_start_token`在那个位置找到， find`start_pos`当然会返回。

`.index()`至于和之间的区别`.find()`；如果未找到子字符串，则`.index()`引发异常，而返回。`ValueError``.find()``-1`

# c# - 统一产量问题

> ID：14751841
> 
> 赞同：0
> 
> 时间：2013-02-07T13:07:22.663
> 
> 标签：c#, unity3d, coroutine, yield-return, ngui

我有一个在 NGUI 中制作简单菜单动画的功能。它似乎工作得很好，但是当我进入游戏然后返回菜单时，该功能无法正常工作。

```
IEnumerator MenuTransition (GameObject panelOut, GameObject panelIn) {
    foreach (Transform child in panelOut.transform)
    {
        if(child.gameObject.collider != null)
        {
            child.gameObject.collider.enabled = false;
            UIButton [] buttons = child.GetComponents<UIButton>();
            foreach(UIButton b in buttons) b.UpdateColor(true, true);
        }
        child.gameObject.animation.Play("MenuTransitionOff");
    }
    Debug.Log("time: "+animTime);
    //yield return new WaitForSeconds(animTime);
    Debug.Log("ini");
    foreach (Transform child in panelIn.transform)
    {       
        UIButton [] buttons = child.GetComponents<UIButton>();
        foreach(UIButton b in buttons) b.UpdateColor(true, true);
        child.gameObject.animation.Play("MenuTransitionOn");
    }
    //yield return new WaitForSeconds(animTime);
    foreach (Transform child in panelIn.transform)
    {           
        if(child.gameObject.collider != null)
        {
            child.gameObject.collider.enabled = true;
        }
    }
    Debug.Log("3");
    yield return null;
    Debug.Log("4");
} 
```

并且此函数从另一个分配给按钮 onclick 事件（使用 NGUI）的函数中分离出来。

```
void OnMainMatch () {
    StartCoroutine(MenuTransition(mainPanel, matchPanel));
} 
```

由于未注释产量，应用程序似乎在第一个时崩溃，之后不再出现日志，但即使我评论了两个产量并在最后添加了一个，我也没有动画并且按钮变得无响应。在最后一种情况下，打印 4。这只发生在进入游戏并返回菜单后，而不是第一次执行菜单时。我也调试过动画时间，不到一秒，所以是正确的。我真的不知道在哪里寻找错误。关于在哪里寻找的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T06:13:09.163

我在使用 NGUI 的 OnClick 和协程时遇到了同样的问题，它出现是因为 OnClick 按钮在调用 StartCoroutine 后被设置为非活动状态。这导致协程的迭代被消灭，因为管理协程的是 OnClick 对象。不确定这是否是同一个问题。

# jakarta-ee - 如何在 Tomcat 上使用 Jersey 正确应用 ContainerRequestFilter

> ID：14751842
> 
> 赞同：1
> 
> 时间：2013-02-07T13:07:24.403
> 
> 标签：jakarta-ee, jersey, servlet-filters

我正在使用 Jersey 和 Tomcat 创建一个 RESTful API。

我想对每个请求应用一个 CustomContainerRequestFilter（它实现了 ContainerRequestFilter）。

所以我添加了

```
<init-param>
        <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
        <param-value>com.CustomContainerRequestFilter</param-value>
</init-param> 
```

问题是尽管部署后正在实例化 CustomContainerRequestFilter，但根本没有触发 filter() 方法的实现。

我是否忘记做某事以便在每个 Rest 方法上调用该过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:31:43.417

确保使用 @Provider 注释对 ContainerRequestFilter 实现进行注释

# java - 如何在 Java 中读取这样的输入？

> ID：14751843
> 
> 赞同：2
> 
> 时间：2013-02-07T13:07:25.200
> 
> 标签：java, input, inputstream, user-input

我有一个输入：

```
aN b c
a1 a2 a3 ... aN 
```

例如：

```
4 3 2
2 1 2 1 (I have here 'a' numbers, a = 4)
5 6 3
3 9 5 7 3 (I have here 'a' numbers, a = 5)
0 0 0 
```

当 a 或 b 或 c 等于 0 时，我想停止读取输入。我试过这个：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.LinkedList;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

public class Test {

    public static void main(String[] args) throws IOException {

        InputStreamReader converter = new InputStreamReader(System.in);
        BufferedReader in = new BufferedReader(converter);
        String line = "";
        int a = -1, b = -1, c = -1;
        LinkedList<Integer> list = new LinkedList<>();

        while (a != 0 && b != 0 && c != 0) 
        {
            line = in.readLine();
            String tmp[] = line.split(" ");
            a = Integer.parseInt(tmp[0]);
            b = Integer.parseInt(tmp[1]);
            c = Integer.parseInt(tmp[2]);
            System.out.println("a = " + a + ", b = " + b + ", c = " + c);
            line = in.readLine();
            list.clear();
            tmp = line.split(" ");
            for (int i = 0; i < tmp.length; i++) {
                list.add(new Integer(Integer.valueOf(tmp[i])));
            }
            System.out.println("List = 4 3 2" + list);   
        }   
    }        
} 
```

但有了这个简单的输入：

```
4 3 2
2 1 2 1
5 6 3
3 9 5 7 3
0 0 0 
```

即使我输入 3 个零，我的程序仍然在等待输入。如何改进它？

**编辑：**

**你误会的人。我需要第二条读取线，因为我需要读取第二条（第四条，第六条）输入线...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:12:32.023

在您的程序读取带有 0 的行后，它仍在等待另一行，然后才会停止..

最简单的修复（也许不是最干净的）：

```
while (true)
{
   line = in.readLine();
   String tmp[] = line.split(" ");
   a = Integer.parseInt(tmp[0]);
   b = Integer.parseInt(tmp[1]);
   c = Integer.parseInt(tmp[2]);
   if (a == 0 || b == 0 || c == 0)
     break;
   // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:13:34.437

你有两行：

```
line = in.readLine(); 
```

因此，当第一次读取 3 个零时`readLine()`，您仍然等待另一个。`break`如果 a、b、c 中的至少一个为零，您可以更改顺序，或在第一个 readline 之后使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:15:08.600

```
while (true) 
{
        line = in.readLine();
        String tmp[] = line.split(" ");
        a = Integer.parseInt(tmp[0]);
        b = Integer.parseInt(tmp[1]);
        c = Integer.parseInt(tmp[2]);
        if (a == 0 || b == 0 || c == 0) {
            break;
        }
        System.out.println("a = " + a + ", b = " + b + ", c = " + c);
        line = in.readLine();
        list.clear();
        tmp = line.split(" ");
        for (int i = 0; i < tmp.length; i++) {
            list.add(new Integer(Integer.valueOf(tmp[i])));
        }
        System.out.println("List = 4 3 2" + list);   
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T13:46:32.437

以下是如何以有助于 OP 学习的方式回答问题。

1) 识别问题。

> “问题在于，您编写的程序仅测试它是否需要在读取偶数行后停止。您可以通过查看读取输入的*位置*来看到这一点。”

2) 给出如何解决当前问题的提示。

> “如果您希望能够在奇数行上停下来，您将需要另一个测试......在阅读奇数行之后”。

3）指出其他问题。

> “事实上，您可能还应该检查：
> 
> *   调用的结果`readLine()`不是`null`（当您的程序到达输入末尾时会发生这种情况；例如，如果您在 Linux 上键入 ^D 或在 Windows 上键入 ^Z），
> *   第一行，第三行，第五行等至少有3个数字，依此类推，
> *   和其他一些事情。
> 
> 如果你不测试这些，你的程序会在输入错误时出现异常而死掉。”

* * *

以这种方式回答问题实际上更难/更多工作（对于有经验的程序员）。但鼓励初学者开始*思考*代码非常重要。毕竟，这是他们作业的*真正*目标。（没有得到分数，没有产生完美的解决方案......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T13:24:58.313

试试这个

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
public class MultipleInputs {
    public static void main(String[] args) throws IOException {
        InputStreamReader converter = new InputStreamReader(System.in);
        BufferedReader in = new BufferedReader(converter);
        while(true){
            String line = in.readLine();
            List<Integer> numbers = getNumbers(line);
            if(numbers.get(0) != 0 && numbers.get(1) != 0 && numbers.get(2) != 0){
                String line2 = in.readLine();
                List<Integer> numbers2 = getNumbers(line2);
                //TODO: do something with numbers2 
            } else {
                break;
            }
        }
    }
    private static List<Integer> getNumbers(String line){
        String [] strs = line.split(" ");
        List<Integer> list = new ArrayList<Integer>();
        for(String str : strs){
            try{
                list.add(Integer.parseInt(str));
            }catch (NumberFormatException e) {
                // Do nothing, just ignore the sub-string 
            }
        }
        return list;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:23:28.817

试试这个。

```
while((line=in.readLine()) != null){
        String tmp[] = line.split(" ");
        a = Integer.parseInt(tmp[0]);
        b = Integer.parseInt(tmp[1]);
        c = Integer.parseInt(tmp[2]);
        if (a == 0 || b == 0 || c == 0) {
            break;
        }
        for (int i = 0; i < tmp.length; i++) {
            list.add(new Integer(Integer.valueOf(tmp[i])));
        }
} 
```

# driver - WinDbg 导致 Windows 在启动时蓝屏 (0x00000124)

> ID：14751845
> 
> 赞同：3
> 
> 时间：2013-02-07T13:07:30.413
> 
> 标签：driver, windbg, virtualbox

我在 VirtualBox VM 中以调试模式运行 Windows 7。

我在 VM 目标上配置了一个 COM 端口调试服务器，它作为命名管道暴露给 Windows 7 主机。

VM 可以自行启动，但是当我尝试使用调试器启动时，它会导致目标崩溃。

以下是我正在采取的步骤：

1.  在主机上启动 WinDbg。
2.  启动目标 VM 实例。
3.  WinDbg 连接，VM 冻结在“启动窗口”屏幕。
4.  在这一点上，事情开始出错了。WinDbg 输出报告致命的系统错误。
5.  WinDbg 在目标中的断点处等待。
6.  “恢复”目标 (F5) 导致目标蓝屏。

完整的 WinDbg 会话输出如下。任何帮助表示赞赏！

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

Waiting for pipe \\.\pipe\SlaveDebugPipe
Waiting to reconnect...
Connected to Windows 7 7601 x64 target at (Thu Feb  7 12:58:54.482 2013 (UTC + 0:00)), ptr64 TRUE
Kernel Debugger connection established.
Symbol search path is: srv*c:\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows 7 Kernel Version 7601 MP (1 procs) Free x64
Built by: 7601.17944.amd64fre.win7sp1_gdr.120830-0333
Machine Name:
Kernel base = 0xfffff800`0265d000 PsLoadedModuleList = 0xfffff800`028a1670
System Uptime: not available

*** Fatal System Error: 0x00000124
                       (0x0000000000000000,0x0000000000000000,0x0000000000000000,0x0000000000000000)

Break instruction exception - code 80000003 (first chance)

A fatal system error has occurred.
Debugger entered on first try; Bugcheck callbacks have not been invoked.

A fatal system error has occurred.

Connected to Windows 7 7601 x64 target at (Thu Feb  7 12:59:48.476 2013 (UTC + 0:00)), ptr64 TRUE
Loading Kernel Symbols
..................................................
Loading User Symbols

*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 124, {0, 0, 0, 0}

Probably caused by : hardware

Followup: MachineOwner
---------

nt!DbgBreakPointWithStatus:
fffff800`026d3df0 cc              int     3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:18:39.650

此问题是由已将 VM 配置为使用多个 CPU 引起的。

使用 VirtualBox 实例配置窗口的 System 面板中的滑块将 CPU 计数设置为**1**。

在此之后，系统将在连接调试器的情况下正常启动。

这个问题在[这里](https://forums.virtualbox.org/viewtopic.php?f=6&t=48313)讨论。

# c# - 与 linq 中的 null 比较

> ID：14751849
> 
> 赞同：0
> 
> 时间：2013-02-07T13:07:45.840
> 
> 标签：c#, entity-framework

我使用 EF 作为 ORM。我的数据库中有表“菜单”，其中列“parentID”（nvarchar）可以为NULL。我想获得所有具有 parentId == NULL 的菜单。当我写这个时，它的工作（菜单有所有nesseccary菜单）：

```
using (var db = new MyDbContext())
{                    
    IEnumerable<Menu> menus = db.Menus.Where(m => m.ParentId == null).ToList();
} 
```

但是这段代码不起作用（菜单等于 null）：

```
using (var db = new MyDbContext())
{    
    string parentId = null;
    IEnumerable<Menu> menus = db.Menus.Where(m => m.ParentId == parentId).ToList();                    
} 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:48:08.237

1）当你写：

```
.Where(m => m.ParentId == parentId) 
```

它转换为 T-SQL 为：

```
WHERE ParentId=null -- incorrect T-SQ evaluation against NULL 
```

2）当你写：

```
.Where(m => m.ParentId == null) 
```

它转换为 T-SQL 为：

```
WHERE ParentId IS NULL -- correct T-SQL evaluation against NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:19:12.680

```
string parentId == null; 
```

应该：

```
string parentId = null; 
```

# mule - Mule ESB 和“multipart/form-data”

> ID：14751850
> 
> 赞同：2
> 
> 时间：2013-02-07T13:07:47.567
> 
> 标签：mule, esb, multipartform-data

我有一个允许我上传文件的工作 Web 服务。我想把 Mule 3 放在它前面，但我没有成功让它传递 MIME 类型为“multipart/form-data”的有效负载。

尝试这样做会产生 400 错误：“客户端发送的请求在语法上不正确（错误请求）。”

以下流程（没有实现我的目的，但用作测试）工作正常，传递我发布的任何文本。

```
<flow name="Flow1" doc:name="Flow1">
<http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="test/rule_file" mimeType="text/plain" doc:name="HTTP"/>
<http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="8080" path="test/rule_file" mimeType="text/plain" doc:name="HTTP"/>
</flow> 
```

但是，当我从“text/plain”切换到“multipart/form-data”时，会产生上面列出的错误。

```
<flow name="Flow1" doc:name="Flow1">
<http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="test/rule_file" mimeType="multipart/form-data" doc:name="HTTP"/>
<http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="8080" path="test/rule_file" mimeType="multipart/form-data" doc:name="HTTP"/>
</flow> 
```

有人可以指出我如何让​​这个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:33:20.690

您似乎正在尝试构建 HTTP 代理：要使其工作，您必须在流的请求和响应阶段复制属性，并传播可能已在入站 HTTP 端点上使用的路径扩展。

这可以手动实现，但最好使用现成的模式：

```
<pattern:http-proxy name="patternProxy"
    inboundAddress="http://localhost:8081/test/rule_file"
    outboundAddress="http://localhost:8080/test/rule_file" /> 
```

# sql-server - 如何从 id 等于某个值的所有表中删除所有行

> ID：14751853
> 
> 赞同：0
> 
> 时间：2013-02-07T13:08:00.750
> 
> 标签：sql-server, sql-server-2005

我需要从一些'user_id' ='some value'的所有表中删除所有记录。我怎样才能在 MS SQL 2005 中做到这一点？PS Cascades 并非无处不在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:14:26.463

如果这是一项一次性任务，那么这是一种快速而肮脏的方式。删除`user_id=999`.

跑

```
SELECT 
        'DELETE FROM ' + quotename(OBJECT_SCHEMA_NAME(object_id)) + '.' 
             + quotename(OBJECT_NAME(object_id)) + ' WHERE user_id=999'
FROM sys.columns 
WHERE OBJECTPROPERTY(object_id, 'IsUserTable') = 1  AND name = 'user_id' 
```

将结果复制并粘贴到 SSMS 中。重复执行，直到没有 FK 错误。

如果您需要它来完成一项以上的任务，则需要对`DELETE`语句进行参数化并以正确的顺序对其进行排序以避免 FK 错误。

# php - phpseclib 无法请求伪终端 (SFTP)

> ID：14751857
> 
> 赞同：0
> 
> 时间：2013-02-07T13:08:06.600
> 
> 标签：php, phpseclib

```
include('Net/SFTP.php');

$sftp = new Net_SFTP($ftp_server,225);
if(!$sftp->login($ftp_user, $ftp_pass)){
 print_r($sftp->getErrors());
 exit('Login Failed');
} 
```

我总是得到：

```
Notice: Unable to request pseudo-terminal in /www/asizi/lib/phpseclib/Net/SSH2.php on line 2239 
Notice: Connection closed prematurely in /www/asizi/lib/phpseclib/Net/SSH2.php on line 2347 
Array ( )
Login Failed 
```

我的登录是正确的，如果我输入不正确，我只会得到：“登录失败”，没有错误/警告

phpseclib 版本：0.3.1

我过不去`$sftp->login();`

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:30:20.980

SSH 日志说什么？以下是如何获取它们的示例：

[http://phpseclib.sourceforge.net/ssh/examples.html#logging](http://phpseclib.sourceforge.net/ssh/examples.html#logging)

注意`define('NET_SSH2_LOGGING', NET_SSH2_LOG_COMPLEX);`和`echo $ssh->getLog();`行。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T18:11:05.910

对我来说，发生此错误是因为我`exec`在 a`read`和`write`session 之间调用。

模拟交互式终端会话时不能调用 exec。

# tfs - 在 TFS 2012 中为任务添加新的状态选项

> ID：14751863
> 
> 赞同：10
> 
> 时间：2013-02-07T13:08:26.887
> 
> 标签：tfs

如何在 web TFS 2012 中为任务项添加新的状态值。我使用敏捷模板。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T04:36:38.447

是的，您不能使用 TFS 服务，但一般来说，您可以通过安装 Team Foundation Power Tool 来使用 GUI 并开始使用流程自定义工具，您将打开要自定义的工作项并拖动和删除新状态，请参见下图：

![在此处输入图像描述](../Images/fc04f0553c8c87c9495dedc120222d90.png)

有关更多信息，您可以在此处查看有关如何执行此操作的详细视频：http: [//mohamedradwan.wordpress.com/2011/10/06/customize-tfs-process-2010-video/](http://mohamedradwan.wordpress.com/2011/10/06/customize-tfs-process-2010-video/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T14:32:46.737

抱歉，您目前无法修改 Team Foundation Service 上的流程模板。

[您可以在此处](http://lajak.wordpress.com/2013/01/09/tfs-2012-versions-of-team-foundation-server/)比较很多限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T08:24:00.690

主要流程描述如下：

[如何自定义 TFS 2010 工作项](http://tedgustaf.com/blog/2011/1/how-to-customize-tfs-2010-work-items-and-workflows/)

但是，是的。目前您无法修改 Team Foundation Service 上的流程模板

# google-maps - 如何在更新记录中监听 maprender

> ID：14751868
> 
> 赞同：0
> 
> 时间：2013-02-07T13:08:43.260
> 
> 标签：google-maps, sencha-touch

我正在加载我的谷歌地图并想显示我的路线。当我将听众放在地图下方时，它工作得很好。

```
{
                xtype: 'map',
                flex: 1,
                mapOptions: {
                    zoom: 13,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                },
                listeners: {
                    maprender : function(comp, map){;
                        var directionsDisplay = new google.maps.DirectionsRenderer();
                        var directionsService = new google.maps.DirectionsService();
                        directionsDisplay.setMap(map);

                        var start = 'New York';
                        var end = 'Chicago';
                        var request = {
                            origin:start, 
                            destination:end,
                            travelMode: google.maps.DirectionsTravelMode.DRIVING
                        };
                        directionsService.route(request, function(response, status) {
                            if (status == google.maps.DirectionsStatus.OK) {
                                directionsDisplay.setDirections(response);
                            }
                        });
                    }
                } 
```

当我将侦听器移动到 updateRecord 以便我可以从我的记录中放置开始和结束时，我的 maprender 侦听器不会启动。

```
updateRecord: function(newRecord) {
        if (newRecord) {
            var record = newRecord;
            this.down('map').setListeners({
                maprender : function(comp, map){
                    var tripsStore= Ext.getStore('Trips');
                    var directionsDisplay = new google.maps.DirectionsRenderer();
                    var directionsService = new google.maps.DirectionsService();
                    directionsDisplay.setMap(map);
                    //alert("ok pressed");
                    console.log
                    var start = record.data.from;
                    var end = record.data.to;
                    var request = {
                        origin:start, 
                        destination:end,
                        travelMode: google.maps.DirectionsTravelMode.DRIVING
                    };
                    directionsService.route(request, function(response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setDirections(response);
                        }
                    });
                }
            });
        }
    }, 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:23:07.563

我将整个地图渲染内容添加到更新记录中，现在可以正常工作。

```
updateRecord: function(newRecord) {
    if (newRecord) {
        this.down('#content').setData(newRecord.data);
        this.down('map').setData(newRecord.data);
    };
    //GET MAP
    var map = this.down('map').getMap();
    //console.log(map);
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsService = new google.maps.DirectionsService();
    //SET map
    directionsDisplay.setMap(map);
    //get data
    var mapData = this.down('map').getData();
    //SET DATA
    var start = mapData.from;
    var end = mapData.to;
    var request = {
        origin:start, 
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING,
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            var miles = Ext.getCmp('miles'),
            distance = Math.floor(response.routes[0].legs[0].distance.value / 1000),
            minutes = Math.floor(response.routes[0].legs[0].duration.value / 60);
            miles.setHtml("Distance: " + distance + " kilometers.<br/> Time: " + minutes + " minutes.");
        }
    });
    Ext.device.Geolocation.getCurrentPosition({
        success: function(position) {
            var long = position.coords.longitude,
                lat = position.coords.latitude;
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat,long),
                title : 'Me',
                map: map
            });
        },
        failure: function() {
            console.log('something went wrong!');
        }
    });
}, 
```

# php - 同时通过多个网页传递一个变量

> ID：14751875
> 
> 赞同：-2
> 
> 时间：2013-02-07T13:08:57.893
> 
> 标签：php, variables, href, webpage

我有一个需要通过几个 php 页面传递的变量。当我将变量发送到 1 页（index.php）时，以下代码工作正常

```
echo "<a href='index.php?PHOTO=".$i."'>select</a>"; 
```

但是如何使用一行代码将变量发送到多个网页（如 index.php 和 test.php）？

我的编程代码只能在一个 href 代码中发生，因此我需要以支持将变量发送到多个网页的方式扩展上述代码。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:10:34.367

`$_SESSION['my_var']= $var`并将它传递到你想要的任何地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:17:17.960

看来您需要会话。它们是在服务器中为用户保留变量的一种方式。在 php 中，常见的做法是：

```
session_start();
$_SESSION['name'] = 'john doe'; 
```

然后，在随后的页面请求中：

```
session_start();
$name = $_SESSION['name']; 
```

如果需要会话，则每个请求都应启动一次会话。更多详细信息：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

# wpf - Styling buttons image only works on last item

> ID：14751876
> 
> 赞同：2
> 
> 时间：2013-02-07T13:09:01.530
> 
> 标签：wpf

I have a style

```
<Style x:Key="HomeButtonStyle" TargetType="Button">
    <Setter Property="Height" Value="32"/>
    <Setter Property="Width" Value="32"></Setter>
    <Setter Property="Content">
        <Setter.Value>
            <Image Source="/Images/HOME.png"></Image>
        </Setter.Value>
    </Setter>
</Style> 
```

and I have some xaml in a control

```
 <StackPanel Grid.Row="0" Orientation="Horizontal">
        <Button Style="{DynamicResource HomeButtonStyle}" />
        <Button Style="{DynamicResource HomeButtonStyle}" />
        <Button Style="{DynamicResource HomeButtonStyle}" />
        <Button Style="{DynamicResource HomeButtonStyle}" />
    </StackPanel> 
```

However the image is only shown in the last button.

My questions are why? and how to make the image show in all the buttons?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:56:26.353

In your style you should set `ContentTemplate` instead of `Content` directly.

```
<Setter Property="ContentTemplate">
  <Setter.Value>
     <DataTemplate>
       <Image Source="/Images/HOME.png"></Image>
     </DataTemplate>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:58:17.903

```
<Image x:Key="HomeImage" x:Shared="false" Source="/Images/Home.jpg" />
<Style x:Key="HomeButtonStyle" TargetType="Button">
    <Setter Property="Height" Value="32"/>
    <Setter Property="Width" Value="32"></Setter>
    <Setter Property="Content" Value="{StaticResource HomeImage}" />
</Style> 
```

Your code is reusing Image control which was already added to another visual tree. Use x:shared to create a new instance of Image control each time and all will be fine. More info [here](http://msdn.microsoft.com/en-us/library/aa970778.aspx).

# php - 在 PHP 中创建霍夫曼树

> ID：14751880
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:15.490
> 
> 标签：php, arrays, recursion, tree, huffman-code

我正在尝试使用 PHP 创建一个霍夫曼树。

这就是我所拥有的：

```
<!DOCTYPE html>
<html>
    <body>
        <?php
            $extract = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse elementum imperdiet aliquet. Duis non molestie orci. Ut eget nibh nec augue ultricies porttitor.';
            $characters = count_chars($extract, 1);            
            asort($characters);
            foreach($characters as $character => $occurrence)
            {
               echo 'There';
               if($occurrence > 1)
               {
                   echo ' were ' . $occurrence . ' occurrences of ';
               }
               else
               {
                   echo ' was '. $occurrence . ' occurrence of ';
               }
               echo '"<strong>' . chr($character) . '</strong>" in the extract.<br />';
               $characterFreq[chr($character)] = $occurrence;              
            }
            print_r($characterFreq);
        ?>
    </body>
</html> 
```

哪个输出：

```
There was 1 occurrence of "S" in the extract.
There was 1 occurrence of "U" in the extract.
There was 1 occurrence of "h" in the extract.
There was 1 occurrence of "L" in the extract.
There was 1 occurrence of "D" in the extract.
There was 1 occurrence of "," in the extract.
There was 1 occurrence of "q" in the extract.
There was 1 occurrence of "b" in the extract.
There were 3 occurrences of "g" in the extract.
There were 4 occurrences of "a" in the extract.
There were 4 occurrences of "." in the extract.
There were 4 occurrences of "d" in the extract.
There were 5 occurrences of "p" in the extract.
There were 6 occurrences of "c" in the extract.
There were 6 occurrences of "l" in the extract.
There were 7 occurrences of "m" in the extract.
There were 8 occurrences of "n" in the extract.
There were 8 occurrences of "r" in the extract.
There were 9 occurrences of "u" in the extract.
There were 9 occurrences of "o" in the extract.
There were 10 occurrences of "s" in the extract.
There were 15 occurrences of "t" in the extract.
There were 17 occurrences of "i" in the extract.
There were 20 occurrences of "e" in the extract.
There were 22 occurrences of " " in the extract.
Array ( [S] => 1 [U] => 1 [h] => 1 [L] => 1 [D] => 1 [,] => 1 [q] => 1 [b] => 1 [g] => 3 [a] => 4 [.] => 4 [d] => 4 [p] => 5 [c] => 6 [l] => 6 [m] => 7 [n] => 8 [r] => 8 [u] => 9 [o] => 9 [s] => 10 [t] => 15 [i] => 17 [e] => 20 [ ] => 22 ) 
```

我一直在使用 , 的混合物，`array_slice()`但在递归方面遇到了麻烦。`array_splice()``array_unshift()`

理想情况下，叶子和分支将由数组索引 0 和 1 表示。

任何关于如何以多维数组形式制作霍夫曼树的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-02T02:06:56.873

这是对问题的完整解决方案，在 PHP 中：

```
function huffmannEncode($string) {
    $originalString = $string;
    $occurences = array();

    while (isset($string[0])) {
        $occurences[] = array(substr_count($string, $string[0]), $string[0]);
        $string = str_replace($string[0], '', $string);
    }

    sort($occurences);
    while (count($occurences) > 1) {
        $row1 = array_shift($occurences);
        $row2 = array_shift($occurences);
        $occurences[] = array($row1[0] + $row2[0], array($row1, $row2));
        sort($occurences);
    }

    // $dictionary is an array that gets filled with the values with a recursive method
    $dictionary = [];
    fillDictionary($dictionary, is_array($occurences[0][1]) ? $occurences[0][1] : $occurences);

    // Generate the final encoded message
    $encoded = '';
    for($i = 0; $i < strlen($originalString); $i++) {
        $encoded .= $dictionary[$originalString[$i]];
    }
    return $encoded;
}

// This function runs recursively to generate the Huffmann tree
function fillDictionary(&$dictionary, $data, $value = '') {
    if (!is_array($data[0][1])) {
        $dictionary[$data[0][1]] = $value.'0';
    } else {
        fillDictionary($dictionary, $data[0][1], $value.'0');
    }
    if (isset($data[1])) {
        if (!is_array($data[1][1])) {
            $dictionary[$data[1][1]] = $value.'1';
        } else {
            fillDictionary($dictionary, $data[1][1], $value.'1');
        }
    }
} 
```

该函数计算出现次数，并使用递归子函数生成为每个字符分配二进制代码的字典。

这是一个例子：

```
// Test the functionality:
echo huffmannEncode('hello world');
// Output: 00100010101101110011110010101111
// And the dictionary:
/* 
[e] => 000
[h] => 001
[r] => 010
[w] => 011
[l] => 10
[o] => 110
[ ] => 1110
[d] => 1111
*/ 
```

# iphone - 架构 armv7s 的未定义符号：“_OBJC_CLASS_$_ZXingWidgetController”，引用自：使用 Zxing 的 RootViewController.o 中的 objc-class-ref

> ID：14751882
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:23.603
> 
> 标签：iphone, ios, zxing, armv7

我在我的应用程序中加入了 Zxing 的二维码阅读器。我在 Xcode4.5 中测试了之前在 Zxing 中的 scantest，它运行良好。我将 iOS sdk 更新到 6.1 并将 Xcode 更新到 4.6，现在这个显示错误。首先，它显示 gcc 编译器的错误，现在已解决，现在显示错误

`"Undefined symbols for architecture armv7s"`

PS：- 在阅读了许多解决方案后，我尝试更改一些东西，例如所有架构设置为相同（Scantest、ZxingWidget、ZxingTouch），将编译器更改为 LLVM GCC 4.2，将其他警告标志设置为 -Werror 等。

特殊问题是构建适用于 iphone 模拟器 6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:14:28.337

如果您正在使用任何 lib 文件，请检查 Build Phases->Link binary with Libraries 并检查是否包含相应的 lib。

如果您正在使用源文件，请检查是否将.m 文件添加到当前目标。

谢谢，
吉姆。

# sql-server - Webservice 到 Sqlite Windows 8 Metro

> ID：14751883
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:22.940
> 
> 标签：sql-server, sqlite, xaml, windows-8, microsoft-metro

我正在创建一个 Windows Metro UI 应用程序，我想在其中使用 Web 服务并将值放入 Sqlite cos 如果网络不可用意味着我可以从中获取详细信息。可能吗？是否有任何工具可以将值从 Sql 服务器值直接转换为 .s3db sqlite db？

# android - Nexus 7、android 4.2.1 上的 Cocos2dx 崩溃

> ID：14751885
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:24.233
> 
> 标签：android, c++, eclipse, cocos2d-x, nexus-7

我在使用 cocos2dx 和 android 4.2.1 时遇到问题 我的应用在 4.2 之前的平台上运行良好，但在我的 nexus 上出现以下错误：

```
02-07 16:55:06.691: W/dalvikvm(10381): Exception thrown (Ljava/lang/ArrayStoreException;) while throwing internal exception (Ljava/lang/ArrayStoreException;)
02-07 16:55:06.691: W/dalvikvm(10381): Exception thrown (Ljava/lang/ArrayStoreException;) while throwing internal exception (Ljava/lang/ArrayStoreException;)
02-07 16:55:06.711: W/dalvikvm(10381): threadid=12: thread exiting with uncaught exception (group=0x40c74930)
02-07 16:55:06.711: W/System.err(10381): java.lang.ArrayStoreException: java.lang.String cannot be stored in an array of type java.lang.String[][]
02-07 16:55:06.711: W/System.err(10381):    at org.cocos2dx.lib.Cocos2dxRenderer.nativeTouchesEnd(Native Method)
02-07 16:55:06.711: W/System.err(10381):    at org.cocos2dx.lib.Cocos2dxRenderer.handleActionUp(Cocos2dxRenderer.java:129)
02-07 16:55:06.711: W/System.err(10381):    at org.cocos2dx.lib.Cocos2dxGLSurfaceView$9.run(Cocos2dxGLSurfaceView.java:255)
02-07 16:55:06.711: W/System.err(10381):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
02-07 16:55:06.711: W/System.err(10381):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
02-07 16:55:06.711: D/FlurryAgent(10381): Error logged: uncaught
02-07 16:55:06.711: D/FlurryAgent(10381): Ending session
02-07 16:55:06.711: E/AndroidRuntime(10381): FATAL EXCEPTION: GLThread 556
02-07 16:55:06.711: E/AndroidRuntime(10381): java.lang.ArrayStoreException: java.lang.String cannot be stored in an array of type java.lang.String[][]
02-07 16:55:06.711: E/AndroidRuntime(10381):    at org.cocos2dx.lib.Cocos2dxRenderer.nativeTouchesEnd(Native Method)
02-07 16:55:06.711: E/AndroidRuntime(10381):    at org.cocos2dx.lib.Cocos2dxRenderer.handleActionUp(Cocos2dxRenderer.java:129)
02-07 16:55:06.711: E/AndroidRuntime(10381):    at org.cocos2dx.lib.Cocos2dxGLSurfaceView$9.run(Cocos2dxGLSurfaceView.java:255)
02-07 16:55:06.711: E/AndroidRuntime(10381):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
02-07 16:55:06.711: E/AndroidRuntime(10381):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

请帮忙，我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:31:04.310

我解决了。

编辑 AnalyticXStringUtilAndroid.cpp (diwu/AnalyticX)
第 24 行

```
jStringCls = pEnv->FindClass("[Ljava/lang/String;");
```

替换为

```
jStringCls = pEnv->FindClass("java/lang/String");
```

# android - 在按钮单击时添加 SearchView

> ID：14751890
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:09:35.320
> 
> 标签：android, button, android-actionbar, actionbarsherlock

我声明了 SearchView：

```
SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
searchView.setQueryHint("some text"); 
```

我的目标是仅在单击按钮后将此搜索视图添加到操作栏。它不是菜单按钮。布局中的普通按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:34:51.663

在 onCreateOptionsMenu 中：

```
SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
searchView.setQueryHint("some text");

smenu=menu.add("smenu").setVisible(false).setActionView(searchView);
smenu.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

然后在 onClickListener 中：

```
smenu.expandActionView(); 
```

或者

```
smenu.collapseActionView(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:18:09.703

这应该工作

```
private ActionBar bar;

//....

SearchView searchView = new SearchView(bar.getThemedContext());
searchView.setQueryHint("some text");
searchView.setIconified(false);
searchView.setOnCloseListener(new SearchView.OnCloseListener() {
    // revert to normal menu
    bar.setDisplayOptions(your_opions);
    invalidateOptionsMenu();
});

//...

@Override
public void onClick(View v) {
    // show custom view
    bar.setDisplayOptions(your_opions | ActionBar.DISPLAY_SHOW_CUSTOM);
    bar.setCustomView(searchView);

} 
```

# c++ - 迭代`std::multiset`的独特元素

> ID：14751891
> 
> 赞同：13
> 
> 时间：2013-02-07T13:09:36.957
> 
> 标签：c++, c++11, multiset

我所需要的只是知道某物是否存在以及它存在多少次。我将遍历现有事物并查询其中存在多少。

到目前为止，我的实现使用`multiset`，我执行以下操作：

```
std::multiset<thing> a;
auto previous = a.end();
for( auto each = a.begin(); each != a.end(); ++each ) {
    if( previous == a.end() || *previous != *each ) {
        a.count(*each);
    }
    previous = each;
} 
```

# 澄清

我有一个向量`thing`s。但他们有时会重复这个值，我想迭代 unique `thing`s 并为每个独特的做一些事情。这个“东西”需要知道它`thing`出现在向量上的时间量。

我上面发布的代码是我现在解决问题的方法，它似乎不是做我想做的最优雅的方式。

我只是遵循 Stackoverflow 指南：我告诉我我的问题是什么，我告诉我（尝试过的）解决方案。

如果真的需要一个带问号的句子，你就去吧：有没有办法在 a 上迭代独特的元素`multiset`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T14:42:29.527

三种可能的方法：

*   用于`std::unique`创建唯一值的临时集合。这可能会使代码更具可读性，但效率较低。
*   通过使用`std::multiset::upper_bound`而不是增量来推进你的迭代器：`for( auto each = a.begin(); each != a.end(); each=a.upper_bound(*each))`- 这样你就不需要`if`检查你的循环内部，而且它的大小保证是**对数的**。很酷（在我查找之前不知道）。对于以下建议，所有功劳**归于@MarkRansom**：使用`std::upper_bound`from `<algorithm>`，您可以指定查找上限的范围。在您的情况下，您已经有一个很好的候选范围开始，因此此方法可能更有效，具体取决于您的标准库中的实现。
*   如果这对您来说是一个真正的性能问题，并且以前的解决方案仍然不够好，请考虑切换到`map<thing, unsigned>`甚至只是跟踪您拥有的等效 s数量的`unordered_map<thing,unsigned>`地方。这意味着尽管重写您的插入/删除代码。`unsigned``thing`

# javascript - 在asp.net 中通过javascript 访问Properties.Settings？

> ID：14751896
> 
> 赞同：1
> 
> 时间：2013-02-07T13:09:47.417
> 
> 标签：javascript, asp.net

是否可以`Properties.Settings`通过javascript访问我在visual studio asp.net项目中设置的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:14:41.347

有点。在 ASP.NET 中，您可以将这些写出到客户端。但是您不能从 JavaScript 更改值。要将其写在标记中，请执行以下操作：

```
<script type="text/javascript">
    var prop = '<%= Properties.X %>';
</script> 
```

我不会过多地使用属性设置。您必须使用完全量化的名称才能引用它，并且它必须是公开的才能正常工作。如果它不是公共的，您可以在 ASP.NET 页面上创建一个公共属性，然后让页面返回该设置。页面属性或方法也很容易以这种方式工作。

# c# - 如何在EF 5 Code First中解决组合的一对一和一对多关系

> ID：14751898
> 
> 赞同：3
> 
> 时间：2013-02-07T13:09:48.283
> 
> 标签：c#, ef-code-first, entity-framework-5, .net-4.5

我正在使用 Entity Framework 5 和 Code First。

我有两个用于测验应用程序的域实体**问题**和**答案。**一个问题有几个可能的答案。一个问题也有一个正确的答案，它应该引用一个可能的答案。我在 to 实体之间的一对多和一对一关系的组合中遇到了一些问题。请参阅**Q1**和**Q2**。

这是实体的代码：

```
public class Question
{
    public virtual int Id { get; set; }
    [Required]
    public virtual string Text { get; set; }

    [InverseProperty("Question")] 
    public virtual ICollection<Answer> PossibleAnswers { get; set; }
    public virtual Answer CorrectAnswer { get; set; }        

    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
    public virtual DateTime? UpdateStamp { get; set; }
}

public class Answer
{
    public virtual int Id { get; set; }
    [Required]
    public virtual string Text { get; set; }

    [ForeignKey("QuestionId")]
    public virtual Question Question { get; set; }
    public virtual int QuestionId { get; set; }
} 
```

**Q1：**我应该怎么做才能在到数据库的一次往返中插入 Question 对象和引用的 Answers（通过属性 PossibleAnswers）（例如，一次调用上下文 SaveChanges）？当我在不先添加答案的情况下保存问题和答案时出现的错误是：

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

为了解决这个问题，我尝试了以下使用流利的 API 来获取要在问题之前添加的答案，只需调用 objectcontexts SaveChanges 即可：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Question>()
            .HasOptional(q => q.CorrectAnswer)
            .WithRequired();

        base.OnModelCreating(modelBuilder);
    } 
```

但是，这导致我出现另一个错误：

> 检测到有冲突的更改。当尝试插入具有相同键的多个实体时，可能会发生这种情况。

Q1 的流利 API 方法是否走在正确的道路上？为什么会出现错误信息？

**Q2**：删除问题时，我意识到会出现错误，因为无法在答案之前删除问题，反之亦然。我该如何解决这个问题？例如，是否应该在 Question.CorrectAnswer 和 Question.PossibleAnswers 上都指定 WillCascadeOnDelete？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:15:32.607

对于您的问题 Q1 和 Q2，您将需要两次往返/两次调用`SaveChanges`（除了可能使用存储过程解决问题）。

Q1：第一个呼叫`Question.CorrectAnswer`设置为`null`，第二个呼叫设置`CorrectAnswer`为存储的答案之一。

Q2：第一次呼叫设置`Question.CorrectAnswer`为`null`和第二次呼叫删除`Question`和相关答案启用级联删除。

如果您不太担心两次往返，而是更担心与两次`SaveChanges`调用相对应的两次​​事务，则可以将包括两次调用在内的整个操作包装`SaveChanges`到一个手动事务中。（示例：[EF：如何在事务中调用 SaveChanges 两次？](https://stackoverflow.com/questions/12809958/ef-how-do-i-call-savechanges-twice-inside-a-transaction)）

关于一对一关系：尽管从业务角度来看，关系`CorrectAnswer`是一对一的，但很难甚至不可能将其建模为与 EF 的一对一关系。

问题是 EF 不支持外键一对一关联，即外键（CorrectAnswerId 左右）具有唯一约束的关系。它仅支持共享主键一对一关联，其中从属（ ）的主键同时是主体（ ）`Question`的外键（for ） 。您的 Fluent 代码是此类共享主键关联的配置。但这意味着唯一有效的是与具有相同主键值的。虽然这在理论上是可以实现的（您的表的记录多于表），但很可能需要不使用自动生成的键，而是手动提供键。从一个改变`Question.CorrectAnswer``Answer``CorrectAnswer``Answer``Question``Answer``Question``CorrectAnswers``Answer`到另一个是不可能的。因此，我认为共享主键不适合您的模型。

更好的解决方案是删除您的 Fluent 映射。`CorrectAnswer`结果将是与表中可为空的外键的一对多关系`Question`。从数据库的角度来看，这意味着对于许多s 来说也是`Answer`如此，这在您的业务逻辑中可能是无稽之谈，因为每个问题都有自己独特的答案集，并且两个问题永远不会共享相同的答案。但是您可以通过不向. 尽管它不能完美地模拟业务约束，但它在技术上可以毫无问题地工作。`CorrectAnswer``Question``QuestionsThisIsTheCorrectAnswerFor``Answer`

有关与 EF 建立一对一关系的困难的更多信息，请参阅以下博客文章：

*   [共享主键一对一关联](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)
*   [一对一外键关联](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)

# ios6 - 适用于 iOS4.3 和 iOS6 的 GKPlayerInternal setAuthenticateHandler ？

> ID：14751899
> 
> 赞同：1
> 
> 时间：2013-02-07T13:09:48.267
> 
> 标签：ios6

使用此日志获取错误 SIGABRT：“-[GKPlayerInternal setAuthenticateHandler:]: unrecognized selector sent to instance”

我在 iPad 3 iOS 5.1.1 上对此进行了测试

GKLocalPlayer* localPlayer = [GKLocalPlayer localPlayer]; localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) //error here { /* some code */ }; 在 iOS 6 上这个工作正常，我知道 setAuthenticateHandler: 仅在 iOS6 上可用，但我怎样才能同时支持 iOS5 和 iOS6 呢？

# javascript - 代替 在 chrome 中使用 on keydown标记HTML 内容可编辑

> ID：14751900
> 
> 赞同：1
> 
> 时间：2013-02-07T13:09:51.963
> 
> 标签：javascript, jquery

我无法在谷歌浏览器的按键上用 br 标签替换 div 标签。当您按 Enter 时，Google chrome 会将其读取为 div 标签，但我想让它作为 br 标签工作。请提出解决方案。

我试过这个：

```
$("#condition_pop").keypress(
   function { 
     if (e.which == 13) { 
           e.preventDefault(); 
           document.selection.createRange().pasteHTML("<br/>"); 
 } }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:45:54.950

这是一个捕获 ENTER 键的跨浏览器方法：

```
$('#condition_pop').keydown( function(e) {
    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
    if(key == 13) {
        e.preventDefault();
        alert("enter pressed");
    }
}); 
```

在 Chrome 24 上测试：http: [//jsfiddle.net/PTauw/1/](http://jsfiddle.net/PTauw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:23:04.083

我正在使用以下函数将`<div>`标签替换为`<br>`

```
$(function($){ 
$.fn.editableContent = function() 
    { 
        return this.html().replace(/<div>/gi,'<br>').replace(/<\/div>/gi,''); 
    }; 
}); 
```

# c - 使用各种格式说明符打印 short int

> ID：14751901
> 
> 赞同：4
> 
> 时间：2013-02-07T13:09:52.433
> 
> 标签：c, casting, integer-arithmetic

请看一下这段代码：

```
#include <stdio.h>
int main(void)
{
short s = -1;

printf("sizeof(short) = %lu\n", sizeof(short));
printf("sizeof(int) = %lu\n", sizeof(int));
printf("sizeof(long) = %lu\n", sizeof(long));
printf("s = %hd\n", s);
printf("s = %d\n", s);
printf("s = %ld\n", s);

return 0;
} 
```

它给出的输出为：

```
sizeof(short) = 2  
sizeof(int) = 4  
sizeof(long) = 8  
s = -1  
s = -1  
s = 4294967295 
```

在最后一行中，为什么`s = 4294967295`不是`s = -1`通过[这个](https://stackoverflow.com/questions/14748734/ambiguity-in-long-integer-arithmetic)问题，我才知道在 C 中，当变量被提升时，它的值保持不变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:13:09.853

`s`正在升级为`int`，这里是 4 字节类型。这在所有 3 种情况下都发生。在前两个中， an`int`是`printf()`预期的，因为格式说明符用于将作为 传递的类型`int`。但是在最后一种情况下，您给出了一个格式说明符，它需要一个 8 字节的类型。

这是调用未定义的行为。

在您的情况下，它*似乎*在值的高字节中读取了零，有效地将已经符号扩展为 32 位的值零扩展到 64 位。但是，您不能依赖于执行此操作的结果 - 它可能正在读取内存或未一致初始化的寄存器。明天可能会有所不同。

参数的提升不依赖于格式字符串 - 您必须始终确保为您指定的格式传递正确的参数。所以 an`int`不会被提升为 a `long`。你需要自己转换它。

一个聪明的编译器应该给你一个警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:13:27.070

调用 时，该变量不会提升为 long `printf("s = %ld\n", s);`。将其提升到 long 的正确方法是`printf("s = %ld\n", (long) s);`.

# java - 接受文件的 Restful Web 服务客户端

> ID：14751903
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:56.520
> 
> 标签：java, amazon-web-services

我创建了一个 Web 服务，它在文件夹更新时发送 xml 文件。我可以在我的客户端中接收它，但它不是动态发生的。也就是说，每当更新文件夹时，服务正在发送文件但客户端没有获取文件我已经编写了一个客户端程序来接受文件并将其写入磁盘。但它会接受返回类型并且只会写入一次。任何人都可以告诉我应该怎么做才能在更新文件夹时动态地编写它我的客户端代码是

```
 public class Clientservice {
        public static void main(String[] args)
        {
        try {
            URL u = new URL("http://10.132.25.193:8082/ServerService/rest/Serverwebservice/get");
            HttpURLConnection uc = (HttpURLConnection) u.openConnection();

            //FileMonitor ee=new FileMonitor(1000);

            InputStream is = uc.getInputStream();

            try {
                FileOutputStream fos = new FileOutputStream(new File("C:\\Users\\298637\\Desktop\\Testing.xml"));
                int c;
                while ((c = is.read()) != -1) {
                   fos.write(c);
                }

                is.close();
                fos.close();
            } catch (Exception e) {
                System.err.println("FileStreamsTest: " + e);
            } 

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    } 
```

# javascript - $httpBackend.whenGET(some url).passThrough() 抛出异常？

> ID：14751904
> 
> 赞同：0
> 
> 时间：2013-02-07T13:09:56.427
> 
> 标签：javascript, angularjs

我这里有一些问题。我正在尝试模拟我对服务器的一些 http 请求并将其中一些通过！当我调用 passThroughth() 时，会抛出一个错误！

```
Error: Unexpected request: GET view/networks.html
No more request expected
    at Error (<anonymous>)
    at $httpBackend (http://localhost:8080/js/lib/angular-mocks.js:887:9)
    at $httpBackend (http://localhost:8080/js/lib/angular-mocks.js:880:11)
    at sendReq (http://localhost:8080/js/lib/angular-scenario.js:18264:9)
    at $http (http://localhost:8080/js/lib/angular-scenario.js:18055:17)
    at Function.$get.$http.(anonymous function) [as get] (http://localhost:8080/js/lib/angular-scenario.js:18198:18)
    at $get.$q.when.then.then.next.locals (http://localhost:8080/js/lib/angular-scenario.js:16605:34)
    at deferred.promise.then.wrappedCallback (http://localhost:8080/js/lib/angular-scenario.js:16028:59)
    at deferred.promise.then.wrappedCallback (http://localhost:8080/js/lib/angular-scenario.js:16028:59)
    at ref.then (http://localhost:8080/js/lib/angular-scenario.js:16065:26) 
```

这是我的跑步

```
myAppDev.run(function ($httpBackend) {
    $httpBackend.whenGET("view/networks.html").passThrough();
    $httpBackend.whenGET('/r/networkInterface').respond(networkInterfaces);

}); 
```

我的配置有什么问题？

无论如何，当我调用 response(" with some response") 时，我得到的结果是正确的。即 $httpBackEnd 返回响应中的内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:59:26.367

好的，伙计们，经过漫长而艰苦的斗争，问题很容易解决。

1- 更新到 angularJS 1.0.5

2-在我的测试中我有这行代码

```
myAppDev.config(function ($provide) {
    $provide.decorator('$httpBackend', angular.mock.e2e.$httpBackendDecorator);
}); 
```

当我删除这行代码时，一切都很完美。然而，这就是 Vojta jina[在这个小提琴中使用的。](http://jsfiddle.net/vojtajina/DQHdk/)

# c++ - 为什么我的代码需要 ?

> ID：14751906
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:00.083
> 
> 标签：c++, iostream

我编写了一些我学到的基本代码，可用于定义一个类型，该类型获取一个枚举值作为其构造函数参数，并具有一个`AsString()`将值作为字符串返回的成员函数。

除非我包含`<iostream>`. 它显示一个警告，`main`说明该类型`color`尚未声明。为什么需要在我的代码中包含输入/输出头文件，而其中没有使用输入/输出函数或运算符？

```
enum ColorEnum {blue, red};

class color
{
    protected:
        ColorEnum value;
    public:
        color(ColorEnum initvalue)
        {
            value = initvalue;
        }
        std::string AsString()
        {
            switch (value)
            {
                case blue:
                    return "blue";
                case red:
                    return "red";
                default:
                    return "N/A";
            }
        }
};

int main()
{
    color mycolor = blue;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:11:33.830

你不需要`<iostream>`，你需要`<string>`，`std::string`你可能通过间接获得`<iostream>`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T13:11:33.783

您不需要包含`<iostream>`, 但是`<string>`，因为您使用`std::string`, 所以这可能会关闭编译器。

如果您包含`<string>`并仍然收到错误，那听起来像是编译器中的错误。

# jquery - 将 body 向左滚动到给定的元素位置

> ID：14751908
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:03.273
> 
> 标签：jquery, scroll

我正在构建一个单页历史时间轴微型站点，它会自动适应浏览器的宽度。

我正在尝试在调整窗口大小时执行此操作，正文滚动到最后一个单击的元素。`article`'s 总是全宽和全高。如果我不这样做，当窗口调整大小时，一切看起来都很丑陋。

我正在尝试这样做：

```
$(window).resize(function() {
  $('body').scrollLeft($('article#a1377').offset().left);
}); 
```

效果很好。但是事情是在最后一个点击的元素上做的。所以我试图这样做：

```
$("header a").click(function(event){
  var element = 'article' + $(this).prop("hash");
});

$(window).resize(function() {
  $('body').scrollLeft($(element).offset().left);
}); 
```

但它似乎不起作用，并且元素作为正确的值（article#a1377）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:15:24.923

Javascript 闭包！！！

`resize`元素对于回调是不可见的，它是单击处理程序的本地元素。

假设这`'article' + $(this).prop("hash");`确实是您要返回的内容！！！

```
var lastClicked = null;
$("header a").click(function(event){
  lastClicked = 'article' + $(this).prop("hash");
});

$(window).resize(function() {
  $('body').scrollLeft($(lastClicked).offset().left);
}); 
```

# zend-framework - 如何在 Zend Developer Cloud (phpcloud.com) 上测试安全页面

> ID：14751913
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:14.647
> 
> 标签：zend-framework, ssl, ssl-certificate

我发现以下链接提到了在 phpcloud.com 上使用共享 ssl 支持来测试安全页面，但就是这样！

[https://getsatisfaction.com/zend_technologies/topics/add_own_ssl_certs_support](https://getsatisfaction.com/zend_technologies/topics/add_own_ssl_certs_support)

这是一个摘录：

“我们没有计划支持外部 SSL 认证。

my.phpcloud.com 是一个开发环境而非生产环境，因此，我们为在该系统中运行的所有用户提供共享 SSL 支持。非常欢迎您使用我们的证书来开发和测试您的安全页面。"

那么如何在 phpcloud.com 上测试我的安全页面呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:57:23.340

使用 $_SERVER['HTTP_X_FORWARDED_PROTO'] 在负载均衡器之后检测安全页面。

# ocaml - OPAM 包未运行

> ID：14751914
> 
> 赞同：6
> 
> 时间：2013-02-07T13:10:16.380
> 
> 标签：ocaml, opam

我已经安装了 OPAM 并运行了初始化并更新了我的 .bashrc 代码。然后我安装了 ocamlfind 包，它成功了。但是当我尝试

```
#use "topfind";; 
```

我得到以下

```
Cannot find file topfind 
```

我在 Opensuse 12.2 上运行从源代码构建的 ocaml 4.00.1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T13:38:00.723

首先，您需要通过执行以下操作导出正确的环境变量：

```
eval `opam config env` 
```

为了更有效，您应该将该行放在您的`~/.profile`(or `~/.bashrc`) 中。

然后，如果您使用的是系统编译器，您可以将这些行添加到您的`~/.ocamlinit`：

```
let () =
  try Topdirs.dir_directory (Sys.getenv "OCAML_TOPLEVEL_PATH")
  with Not_found -> () 
```

在发布 1.0 之前，我们正在努力改进这个过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:16:56.177

如果`$OCAML_TOPLEVEL_PATH`未定义，则必须定义它：

```
export OCAML_TOPLEVEL_PATH=/home/%user%/.opam/%version%/lib/toplevel 
```

不要忘记改变`%user%`你的编译器`%version%`

在 opam bugtracker 上检查这个[问题。](https://github.com/OCamlPro/opam-repository/issues/34)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:39:08.177

如果你从顶层开始怎么办

`rlwrap ocaml -I "$OCAML_TOPLEVEL_PATH"`

您也可以尝试替代顶层：（`utop`存在于 OPAM 中）

# powershell - 想要在 powershell 脚本中使用正则表达式从字符串中提取子字符串

> ID：14751915
> 
> 赞同：1
> 
> 时间：2013-02-07T13:10:17.700
> 
> 标签：powershell

我想从 Windows powershell 脚本中使用 REGEX 的详细描述中了解我正在运行的进程的状态。我想从这个字符串中提取 RUNNING

> 名称：Process_name 开始于 2008-04-21 11:33 Status **RUNNING** Checkpoint Lag 00:00:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:49:02.013

使用 -replace

```
$text = 'Name: Process_name Started 2008-04-21 11:33 Status RUNNING Checkpoint Lag 00:00:00'
$text -replace '.+\sStatus\s(\S+)\sCheckpoint.+','$1'
RUNNING 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:35:12.380

要提取`RUNNING`等`STOPPED`，您可以尝试以下操作：

```
PS > $s = "Name: Process_name Started 2008-04-21 11:33 Status RUNNING Checkpoint Lag 00:00:00", "Name: Process2_name Started 2008-04-21 11:33 Status STOPPED Checkpoint Lag 00:00:00"

PS > $s | % { if ($_ -match "Status (.+) Checkpoint") { 
    #Return match from group 1
    $Matches[1] 
    }
}

RUNNING
STOPPED 
```

如果您正在阅读日志文件，则可以将其内容直接发送到测试，如下所示：

```
PS > Get-Content mylog.txt | % { if ($_ -match "Status (.+) Checkpoint") { 
    #Return match from group 1
    $Matches[1] 
    }
} 
```

这是提取“状态”和“检查点”之间的所有内容，只要它至少是 1 个字符（也可以是多个单词）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:18:12.000

如果您正在寻找 Windows 进程，使用支持属性和过滤的 Get-Process 或 WMI 等效项 gwmi Win32_Process 不是更有意义吗？

在这里可能有点离题，如果我弄错了，请纠正我！

# c# - C# Parallel.ForEach 的工作何时完成？

> ID：14751916
> 
> 赞同：2
> 
> 时间：2013-02-07T13:10:18.353
> 
> 标签：c#, multithreading, concurrency, asp.net-mvc-4, parallel-processing

我正在用 C# 开发一个 MVC4 网站。在将所有内容传递给视图之前，以下代码应`ConcurrentBag`使用项目填充 (DisplayModels)。

```
 Parallel.ForEach(model.Products, p =>
    {
        model.DisplayModels.Add(new DisplayBoardModel()
        {
            Market = model.Market,
            Product = p
        });
    });

    return View(model); 
```

我发现在任何给定的执行中，DisplayModels 似乎都填充到了不同的点。好像 ForEach 在每个后台任务返回之前就完成了。

我的理解`Parallel.ForEach`是它并行处理每个项目，但仍然阻塞调用线程，直到它的所有工作完成。这不正确吗？

在模型准备好之前，我还应该做些什么来阻止动作返回？使用正常`foreach`工作正常

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:17:55.597

工作正常，`Parallel.ForEach()`并按预期一次性完成。

但你`model.DisplayModels.Add()`可能不是线程安全的。你用的是什么系列？

您可以通过 a) 为 DisplayModels 使用 Concurrent 集合或 b) 将 ForEach 转换为 PLINQ 查询来解决此问题。但是除非`DisplayBoardModel()`有一些繁重的 CPU 工作（并且 ctor 通常不会），否则使这种并行化毫无意义。

所以，只需使用一个简单的`foreach()`

* * *

### 编辑，新信息

> 每个 DisplayBoardModel 发出一个数据库请求

所以这是一个潜在的原因。每个 Db 操作是否都创建自己的连接（上下文）？有没有机会默默地忽略异常？

# salesforce - 我可以在 Salesforce 应用程序中将电子邮件模板显示为选项卡吗？

> ID：14751918
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:26.220
> 
> 标签：salesforce, email-templates

我想在我的应用程序本身中设计我的电子邮件模板。

那么我可以获得现有的电子邮件模板或任何其他第三方工具吗？我是销售人员的新手。

我想从我的应用程序的标签中设计我的电子邮件模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T12:23:49.127

您可以为电子邮件模板使用视觉力 ui。此 VF 页面可以覆盖您的选项卡，或者您可以将它们用作选项卡中的内联页面。顶点代码可以提供必要的功能..

# c# - 方法重载不确定如何

> ID：14751919
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:10:28.027
> 
> 标签：c#, asp.net-mvc-3, overloading

我有这些方法：

```
 public static MvcHtmlString GetQTip(this HtmlHelper htmlHelper, string propertyName, string message, string propertyNameOverride = "", QTipPosition position = QTipPosition.Right, bool includeEvents = true, string title = "")
{
  string qtipPosition = String.Empty;

  switch (position)
  {
    case QTipPosition.Right:
      qtipPosition = "my: 'left center', at: 'right center'";
      break;
    case QTipPosition.Left:
      qtipPosition = "my: 'right center', at: 'left center'";
      break;
    case QTipPosition.Top:
      qtipPosition = "my: 'top middle', at: 'bottom middle'";
      break;
    case QTipPosition.Bottom:
      qtipPosition = "my: 'bottom middle', at: 'top middle'";
      break;
  }

  if (!String.IsNullOrWhiteSpace(propertyNameOverride))
    propertyName = propertyNameOverride;

  if (String.IsNullOrWhiteSpace(title))
    title = htmlHelper.Resource(Resources.Global.Title.Information);

  StringBuilder sb = new StringBuilder();
  sb.Append(String.Concat("$('#", propertyName, "').removeData('qtip').qtip({content: {text:"));
  sb.Append(String.Concat("'", message, "', title: { text: '", title, "', button: false }}, position: { ", qtipPosition, " }"));

  if (includeEvents)
    sb.Append(", show: { event: 'focus mouseenter', solo: true, ready: false }, hide: 'blur'");

  sb.Append(", style: { classes: 'ui-tooltip-shadow ui-tooltip-yellow' } });");

  return new MvcHtmlString(sb.ToString());
} 
```

我怎么称呼这个：

```
 <%: Html.GetQTip("training-module-name-container-" + module.CategoryId +"-" + module.TrainingModuleId, trainingModulePointsHintText, Zinc.Web.Extensions.QTipPosition.Bottom, true, Html.Resource(Resources.Training.Module.Completed.View.TrainingModulePoints))%> 
```

我只想要这些参数谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:43:58.970

问题是你不能在中间省略一个参数。您可以使用默认参数，但您遗漏的参数必须是列表中的最后一个。有关 MSDN 的说明，请参见[此处](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

要解决您的问题，您有几个选择：

1) 使`propertyNameOverride`参数成为函数定义中的最后一个参数，如下所示：

```
public static MvcHtmlString GetQTip(this HtmlHelper htmlHelper, string propertyName, string message, QTipPosition position = QTipPosition.Right, bool includeEvents = true, string title = "", string propertyNameOverride = "") { 
    // do stuff
} 
```

然后，您可以毫无问题地将其排除在外。

2）使用参数，但只需将默认值放入：

```
<%: Html.GetQTip("training-module-name-container-" + module.CategoryId +"-" + module.TrainingModuleId, trainingModulePointsHintText, "", Zinc.Web.Extensions.QTipPosition.Bottom, true, Html.Resource(Resources.Training.Module.Completed.View.TrainingModulePoints))%> 
```

3) 编写另一个只包含您想要的参数的函数，然后在“空”位置调用带有默认参数的完整函数：

```
public static MvcHtmlString GetQTip(this HtmlHelper htmlHelper, string propertyName, string message, QTipPosition position = QTipPosition.Right, bool includeEvents = true, string title = "", string propertyNameOverride = "") { 
    return htmlHelper.GetQTip("training-module-name-container-" + module.CategoryId +"-" + module.TrainingModuleId, trainingModulePointsHintText, "", Zinc.Web.Extensions.QTipPosition.Bottom, true, Html.Resource(Resources.Training.Module.Completed.View.TrainingModulePoints))%>
} 
```

# visual-studio-2010 - VS 解决方案无法在另一台机器上打开。

> ID：14751921
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:31.883
> 
> 标签：visual-studio-2010

我使用 Visual Studio 2010 Express 创建了一个网站项目。它工作正常。但是当我在另一台机器上复制项目（带有代码文件）时。它显示一个错误。

```
The Web site 'D:\Project1\MyOnlineWebsite\Website1' does not exist. 
```

只有解决方案对解决方案资源管理器可见，其他文件无法加载。

基本上，它在另一台不存在的机器上搜索上述路径。在另一台机器上复制之前，我应该对项目进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:16:43.823

在文本编辑器中编辑解决方案并更改包含项目的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:46:29.177

Copy the project folder and esp the solution file from the documents folder(Usually saved there in Windows) and try it and see if it works. Is the other machine have same version of visual studio ?

# android - 如何运行 TtsEngine android 示例？

> ID：14751925
> 
> 赞同：0
> 
> 时间：2013-02-07T13:10:40.607
> 
> 标签：android, service, text-to-speech

如何运行 TtsEngine android 示例？它可在 [http://java.llp2.dcc.ufmg.br/apiminer/docs/resources/samples/TtsEngine/index.html](http://java.llp2.dcc.ufmg.br/apiminer/docs/resources/samples/TtsEngine/index.html)获得 ，理论上，它与 Android sdk 一起提供。

这是一项没有 UI 的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:33:56.440

1.  将设备语言设置为英语
2.  菜单 > 设置 > 语言和输入 > 文本到语音输出；选择示例 TTS 引擎

# android - Android：在Eclipse项目中用ActionBarSherlock替换android-support-v4.jar

> ID：14751926
> 
> 赞同：1
> 
> 时间：2013-02-07T13:10:42.133
> 
> 标签：android, eclipse, actionbarsherlock, android-support-library

我正在使用 Eclipse ADT 包 v21。我正在尝试做[这里](http://android.amolgupta.in/2013/01/backward-compatibility-super-quick.html)描述的事情。当我创建一个新的 Android 项目时，它会自动添加`android-support-v4.jar`到项目的依赖项和`/libs`文件夹中。

当我现在使 ActionBarSherlock 成为依赖项（添加 o 的库列表`Project>Properties>Android`）时，Eclipse 说：

> 罐子不匹配！修复你的依赖

因为ABS有相同的罐子。
我曾经设法`android-support-v4.jar`从`/libs`文件夹中删除，一切都很好，但是我创建的每个新项目都不起作用，Eclipse 不会让我删除那个 jar：

> 处理重构“删除”时捕获到异常。
> 原因：删除资源时遇到问题。

在创建一个可以正常删除 jar 的项目时，我没有做任何不同的事情`/libs`。有一些解决方法还是我做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T13:22:26.910

*   从您的项目中删除支持库 jar。
*   删除 ABS 项目中的支持​​库。
*   通过右键单击将最新的支持库添加到 ABS 项目 -> android 工具 -> 添加支持库
*   将 ABS 项目链接到您的项目。

现在您的项目使用了来自 ABS 项目的最新支持 jar，因此无需将其添加到任何其他依赖 ABS 项目的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:14:10.417

可能您在主项目和 actionbarsherlock 中有不同版本的支持库。将支持库从 libs 文件夹复制到 actionbarsherlock/libs 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T19:19:48.973

如果 Doctoror Drive 建议的第一步对您不起作用，请尝试使用管理员权限重新运行 eclipse。我花了半个小时才解决这个问题，所以我想分享一下。

# django - db_index 和 unique=True on OneToOne 关系

> ID：14751931
> 
> 赞同：1
> 
> 时间：2013-02-07T13:11:00.260
> 
> 标签：django, django-sphinx

我正在扩展 django 的用户模型。

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User, _(u"User")) 
```

那么，是否可以将 db_index=True 和 unique=True 与用户字段一起使用？然后我需要通过用户名实现搜索。我想到了斯芬克斯。对此有什么想法吗？也许一些链接很好的教程？TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:15:29.177

按用户名搜索就是：

```
UserProfile.objects.filter(user__username="dave") 
```

另外，我不确定您的第二个参数应该做什么；声明应如下所示：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User) 
```

所有额外的参数都`models.OneToOneField`应该是关键字参数。

正如凯茜所指出的，`models.OneToOneField`暗示`unique=True`. IIRC，这意味着 Django 将自动为该字段创建索引。`db_index=False`（如果您*不*想要索引，则需要显式设置。）

# mysql - 如何显示与显示行数据相同的行

> ID：14751933
> 
> 赞同：0
> 
> 时间：2013-02-07T13:11:11.290
> 
> 标签：mysql, where

我有一个类似的表：product_id - code - name - img - ...

我已经制作了一个页面来显示所有产品。单击一个后，您将转到该产品的详细信息页面。">

在详细信息页面的第一部分中，所有数据都引用了所选代码，这是正常的。

```
$var1_getProduct = "unavailable";
if (isset($_GET['code'])) {
$var1_getProduct = $_GET['code'];
}
...
$query_getProduct = sprintf("SELECT * FROM product WHERE product.code = %s", GetSQLValueString($var1_getProduct, "text")); 
```

在页面底部，我想显示所有其他具有相同名称的产品。我做了类似的颤音，但似乎没有人工作，我不明白我应该如何处理这个......

我应该做一个不同的查询吗？我试过但没用... $query_getProducts = "SELECT * FROM product WHERE product.code = getProducts['code']"

还是我应该尝试自行加入表格，例如 2 个不同的表格？这也没有用... $query_getProducts = "SELECT t2.name FROM `product`t1 JOIN `product`t2 ON (t2.name = t1.name) WHERE t1.name = '$name' AND t1.name != '0'" ;

问题是我不知道如何达到我需要的结果，我的意思是达到的方式（还有代码......，但这将是一个不同的问题！）

编辑我没有提到我发现的更接近我需要的解决方案，即：

```
SELECT product.name
FROM product 
INNER JOIN ( 
SELECT product.name
FROM product
WHERE product.code = var1 
) pname ON pname.name = product.name 
```

问题在于它显示了所有具有该名称的产品，包括活动产品。所以我也无法放置一个 IF '同名产品存在' Echo the parent DIV ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:57:37.690

我认为`code`这是您产品的唯一密钥。好吧，首先我猜您已经在第一个语句的结果中获得了产品的名称，所以也许您可以在第二个查询中重用它，例如`select * from product where name='%s' and code!='%s'`. 如果您不能这样做，在子查询中获取名称可能会起作用，例如：

```
select * from product 
    where name = (select name from product where code='%s')
    and code != '%s'; 
```

`select name from product where code='%s'`如果您从then 可能使用的结果中获得多个结果，`where name in (select name from product where code='%s')`但我认为`code`识别产品的假设是错误的，并且此解决方案可能根本不起作用。

# c# - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：14751938
> 
> 赞同：3
> 
> 时间：2013-02-07T13:11:26.463
> 
> 标签：c#, c++, dllimport, access-violation

尝试将字符串数组从 C# 传递到 C++ 时出现此错误。此错误有时会出现，但并非总是如此。

C# 中的声明

```
[DllImport(READER_DLL, 
        CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode)]
    public static extern void InstalledRooms(string[] rooms,int length); 
```

在 C++ 中

```
void InstalledRooms(wchar_t const* const* values, int length);

void DetectorImpl::InstalledRooms(wchar_t const* const* values, int length)
{
    LogScope scope(log_, Log::Level::Full, _T("DetectorImpl::InstalledRooms"),this);
    std::vector<std::wstring> vStr(values, values + length);
    m_installedRooms=vStr;
 } 
```

如何从 c# 调用它？

```
//List<string> installedRooms = new List<string>();
//installedRooms.add("r1");
//installedRooms.add("r1"); etc
NativeDetectorEntryPoint.InstalledRooms(installedRooms.ToArray(),installedRooms.Count); 
```

错误发生在

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at MH_DetectorWrapper.NativeDetectorEntryPoint.InstalledRooms(String[] rooms, Int32 length) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:27:08.640

这只是一个猜测，但由于错误是间歇性的，我相信这是与`string`数组相关的内存问题`installedRooms`。

如果您不使用`Fixed`关键字标记托管对象，`GC`则可能随时更改对象的位置。因此，当您尝试从非托管代码访问相关内存位置时，可能会引发错误。

您可以尝试以下方法；

```
List<string> installedRooms = new List<string>();
installedRooms.add("r1");
installedRooms.add("r2"); 
string[] roomsArray = installedRooms.ToArray();

fixed (char* p = roomsArray)
{
    NativeDetectorEntryPoint.InstalledRooms(p, roomsArray.Count);
} 
```

# bash - 用于格式化文件名中的数字的 Shell 命令

> ID：14751939
> 
> 赞同：3
> 
> 时间：2013-02-07T13:11:30.277
> 
> 标签：bash, shell

我有一个包含以下文件的文件夹：

```
trackingData-00-1.data, trackingData-00-2.data, ..., trackingData-00-2345.data 
```

我想通过用 4 位数字格式化数字来重命名它们

```
trackingData-00-0001.data, trackingData-00-0002.data, ..., trackingData-00-2345.data 
```

如何使用 bash shell 命令实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:26:48.543

纯`bash`解决方案：

```
for f in trackingData-00-*.data; do
    [[ $f =~ trackingData-00-([0-9]+).data ]]
    mv "$f" $(printf "trackingData-00-%04d.data" ${BASH_REMATCH[1]})
done 
```

正则表达式提取要填充的数字并将其存储在`BASH_REMATCH`数组中。然后`printf`用于创建新文件名，重新插入数字并用零填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:20:54.297

您可以`printf`在 awk 中使用 's 选项打印四位数字：

```
echo 3 | awk '{printf ("%04i", $1)}'
0003
echo 33 | awk '{printf ("%04i", $1)}'
0033 
```

所以它可能是：

```
for file in trackingData*
do
  num=$(awk -F[.-] '{printf ("%04i", $3)}' <<< "$file")
  mv $file trackingData-00-$num.data
done 
```

这`awk`与两个字段分隔符一起使用：要么`.`或`-`。然后，它基于它们获取第 3 个块并使用`%04i`标志格式化其值（几乎等同于[GNU Awk 用户指南#5.5.2 Format-Control Letters](http://www.gnu.org/software/gawk/manual/gawk.html#Control-Letters)`%d`中看到的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:24:10.780

肮脏但有效的黑客：

```
for i in $(seq 2345); do
    mv trackingData-00-$i.data trackingData-00-`printf %04d $i`.data;
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:21:58.387

首先，我假设您的文件名中没有空格。然后

```
ls/find...| awk -F'-|\\.' '{o=$0;$3=sprintf("%04d",$3);$4=".data";gsub(/-\./,".");print "mv "o" "$0}' OFS='-' 
```

将打印`mv ...`命令。要执行它们，只需将输出传递给`sh`喜欢

```
ls...|awk ..|sh 
```

核心是awk部分，测试一下：

```
kent$  echo "trackingData-00-1.data
trackingData-00-2.data"|awk -F'-|\\.' '{o=$0;$3=sprintf("%04d",$3);$4=".data";gsub(/-\./,".");print "mv "o" "$0}' OFS='-'                                                   
mv trackingData-00-1.data trackingData-00-0001.data
mv trackingData-00-2.data trackingData-00-0002.data 
```

# android - 删除线不为Android中的项目保存

> ID：14751941
> 
> 赞同：0
> 
> 时间：2013-02-07T13:11:32.407
> 
> 标签：android, sqlite, listview, strikethrough

我正在为 android 开发简单的购物清单应用程序。因为我能够在列表视图中删除和取消删除项目。但是在打开关闭的应用程序后，我无法获得项目的更新（保存）删除线，所有项目都从删除线中清除

这是我为 onItemClickListener 实现的部分代码

```
 if (checkedVals[position]==true)
                      {                   
                          TextView text1 = (TextView)arg1.findViewById(R.id.customitemsrowTV);
                          text1.setPaintFlags(text1.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);
                          text1.setTextColor(0xff000000);
                          String strikethrough1 = "false";
                          dbAdapterItems.updateItemsStrikethroughRecord(rowitemsid, strikethrough1);
                          //checkedVals[position] = false;
                      }
                      else
                      {
                          TextView text1 = (TextView)arg1.findViewById(R.id.customitemsrowTV);
                          text1.setPaintFlags(text1.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                          text1.setTextColor(0xff888888);
                          String strikethrough1 = "true";
                          dbAdapterItems.updateItemsStrikethroughRecord(rowitemsid, strikethrough1);
                          //checkedVals[position] = true;
                      } 
```

这是为列表视图填充的代码：

```
TextView itemsRowTv = (TextView)convertView.findViewById(R.id.customitemsrowTV);
            TextView quantityRowTv = (TextView)convertView.findViewById(R.id.customquantityrowTV);
            TextView priceRowTv = (TextView)convertView.findViewById(R.id.custompricerowTV);

            cItems.moveToPosition(position);
            String itemName = cItems.getString(1);
            checkedVals[position] = Boolean.parseBoolean(cItems.getString(3));
            String itemQuantity = cItems.getString(4);
            String itemPrice = cItems.getString(5);

             if (checkedVals[position]==true)
             {                   
                 itemsRowTv.setText(itemName);
                 //TextView text1 = (TextView)arg1.findViewById(R.id.customitemsrowTV);
                // itemsRowTv.setPaintFlags(itemsRowTv.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);
                // itemsRowTv.setTextColor(0xff000000);
                // checkedVals[position] = false;
             }
             else
             {
                // TextView text1 = (TextView)arg1.findViewById(R.id.customitemsrowTV);
                 itemsRowTv.setText(itemName);
                 itemsRowTv.setPaintFlags(itemsRowTv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                 itemsRowTv.setTextColor(0xff888888);
                // checkedVals[position] = true;
             } 
```

请为我的问题提出解决方案...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:08:07.617

是的，在对 getView 块进行小幅编辑后，我得到了解决方案：就是这样，

```
 if (checkedVals[position]==true)
             {                   
                 itemsRowTv.setPaintFlags(itemsRowTv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                 itemsRowTv.setTextColor(0xff888888);

             }
             else if(checkedVals[position]==false)
             {

                 itemsRowTv.setPaintFlags(itemsRowTv.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);
                itemsRowTv.setTextColor(0xff000000);
             } 
```

# iphone - 检查 UITableViewCell 上是否已经存在 UIButton

> ID：14751949
> 
> 赞同：0
> 
> 时间：2013-02-07T13:11:45.107
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

对于`UITableViewCell`我`UIButton`在`tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath`方法中创建的每一个。我想`UIButton`在创建它时检查它是否已经存在，所以它不会被多次添加，但我不能。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

        UIImageView *cellBottomLine = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, CELL_HEIGHT, 320.0, 1)];
        cellBottomLine.image = [UIImage imageNamed:@"bottomCellImage.png"];
    if (cellBottomLine.subviews) {
        [cell addSubview:cellBottomLine];
    }

        copyButton = [BSFunctions createButtonWithNormalImageNamed:@"copyCellButton.png" highlightedImageName:@"copyCellButtonPressed.png" target:self selector:@selector(copyPressedFromCell:)];
        [copyButton setFrame:CGRectMake(250, 10, 62, 32.5)];
        copyButton.tag = indexPath.row;
    if (!copyButton.superview) {
        [cell addSubview:copyButton];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:21:12.113

我认为您应该使用`cellForRowAtIndexPath`将任何子视图添加到单元格的方法，以便在来回滚动时重复使用该单元格，并且在将子视图添加到单元格之前不需要进行任何检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:57:26.313

```
- (UITableViewCell *)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
     UIImageView *cellBottomLine = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, CELL_HEIGHT, 320.0, 1)];
cellBottomLine.image = [UIImage imageNamed:@"bottomCellImage.png"];
    if (cellBottomLine.subviews) 
    {
        [cell addSubview:cellBottomLine];
    }

    for (UIView *view in [cell subviews]) 
    {
        if ([view isKindOfClass:[UIButton class]]) 
        {
             return cell;
        }
    }

    copyButton = [BSFunctions createButtonWithNormalImageNamed:@"copyCellButton.png"
                                          highlightedImageName:@"copyCellButtonPressed.png"
                                                        target:self
                                                      selector:@selector(copyPressedFromCell:)];
    [copyButton setFrame:CGRectMake(250, 10, 62, 32.5)];
    copyButton.tag = indexPath.row;
    if (!copyButton.superview)
    {
        [cell addSubview:copyButton];
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T14:32:07.003

Stavash 的答案是最好的，但如果您不想这样做，也可以使用`tableView:cellForRowAtIndexPath:`. 我看到您尝试过，并且在滚动时按钮的状态丢失了。我认为这是由于细胞重用。使用单元重用，一旦表格视图单元离开屏幕，它就会被缓存并带有标识符，然后屏幕上的下一个单元会从缓存中检索具有给定标识符的单元。

为避免按钮在离开屏幕时丢失其状态，您可以使用多个重用标识符并将按钮的状态存储在一个数组中。我们将调用这个属性`buttonStates`（它应该是一个可变数组）。

初始化您的`buttonStates`变量并添加字符串来表示“基本状态”。添加与表格中单元格数量一样多的这些字符串（我假设只有一个部分基于您的代码）。

当状态发生变化时（这可能会在您的`copyPressedFromCell:`方法中发生，请使用表示新状态的字符串更新按钮标记索引处的对象（您已将其设置为单元格的索引）。

完成所有这些后，使您的`cellForRowAtIndexPath:`方法如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *CellIdentifier = self.buttonStates[indexPath.row];
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

在我们继续之前，让我们看一下您的一些`willDisplayCell:`代码（应该移到这里）。

```
UIImageView *cellBottomLine = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, CELL_HEIGHT, 320.0, 1)];
cellBottomLine.image = [UIImage imageNamed:@"bottomCellImage.png"];
if (cellBottomLine.subviews) {
    [cell addSubview:cellBottomLine];
} 
```

你为什么要运行那个 if 语句？如果你刚刚创建了一个新的图像视图，它`YES`每次都会返回（假设子视图数组不是`nil`默认的）。您宁愿检查单元格的子视图中是否已经存在底部单元格图像。但我们甚至不需要这样做。只需在`cellForRowAtIndexPath:`方法中添加图像，在`!cell`if 中。这样，我们只添加`bottomCellImage`尚未创建单元格的情况。

您的`if (!copyButton.superview)`电话也是如此。继续我们在`cellForRowAtIndexPath:`方法中离开的地方：

```
 UIImageView *cellBottomLine = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, CELL_HEIGHT, 320.0, 1)];
        cellBottomLine.image = [UIImage imageNamed:@"bottomCellImage.png"];
        [cell addSubview:cellBottomLine];

        copyButton = [BSFunctions createButtonWithNormalImageNamed:@"copyCellButton.png"
                                      highlightedImageName:@"copyCellButtonPressed.png"
                                                    target:self
                                                  selector:@selector(copyPressedFromCell:)];
        [copyButton setFrame:CGRectMake(250, 10, 62, 32.5)];
        copyButton.tag = indexPath.row;
        [cell addSubview:copyButton];
    }

    UIButton *button = [cell viewWithTag:indexPath.row]; // Get the copy button
    // Update the state of the button here based on CellIdentifier, outside the if statement so that it gets updated no matter what
    // Also configure your cell with any non-button related stuffs here

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:14:15.487

为了完全避免这种情况，为什么不在`UITableViewCell`故事板/XIB 中子类化并创建该类的指定表示？这样，当单元被重用时，操作系统不会一次又一次地创建 UI 元素，而是重用已经从 IBOutlets 分配的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T13:15:15.570

```
you can check it in this way:
1) put somewhere `copyButton = nil;` (in viewDidLoad, or somewhere else;
2) then:
- (UITableViewCell *)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

        UIImageView *cellBottomLine = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, CELL_HEIGHT, 320.0, 1)];
        cellBottomLine.image = [UIImage imageNamed:@"bottomCellImage.png"];
    if (cellBottomLine.subviews) {
        [cell addSubview:cellBottomLine];
    }
    if (!copyButton) {
        copyButton = [BSFunctions createButtonWithNormalImageNamed:@"copyCellButton.png" highlightedImageName:@"copyCellButtonPressed.png" target:self selector:@selector(copyPressedFromCell:)];
        [copyButton setFrame:CGRectMake(250, 10, 62, 32.5)];
        copyButton.tag = indexPath.row;
        if (!copyButton.superview) {
           [cell addSubview:copyButton];
        }
     }

    return cell;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:20:23.683

试试下面的方法

```
if ([cell viewWithTag:LBL_TAG])
{
    UIView *vi = (UIView*)[cell viewWithTag:LBL_TAG];
    if ([vi isKindOfClass:[UILabel class]])
    {
        UILabel *lbl = (UILabel*)vi;
        NSLog(@"test  %@..",lbl.text);
    }
} 
```

希望它可以帮助你。

# c# - 来自用户控制的 Telerik Cover Flow 冒泡事件

> ID：14751956
> 
> 赞同：0
> 
> 时间：2013-02-07T13:12:17.497
> 
> 标签：c#, silverlight, mvvm, telerik, coverflow

我有一个 telrik coverflow，其中的磁贴属于 InfoPageView 类型，一个用户控件。我在 InfoPageView 用户控件中有一个按钮，我想从中触发父事件。我尝试在这篇文章中实现解决方案： [在 Silverlight 中的 UserControl 内公开按钮的 Click 事件，](https://stackoverflow.com/questions/3594363/expose-a-click-event-of-a-button-inside-a-usercontrol-in-silverlight)但我无法在父类中获取 childs 事件。有没有其他方法可以做到这一点？

```
<telerikNavigation:RadCoverFlow x:Name="CoverFlow" Grid.Row="0" OffsetY="0" ItemsSource="{Binding Covers}" HorizontalAlignment="Center"
                DistanceBetweenItems="75" DistanceFromSelectedItem="25"  IsReflectionEnabled="False" ItemScale="0.5"  Margin="0,0,0,0" Width="785" Height="486">
                <telerikNavigation:RadCoverFlow.ItemTemplate>
                    <DataTemplate>
                        <local:InfoPageView Name="Custinfopage" Width="390" Height="390" />
                    </DataTemplate>
                </telerikNavigation:RadCoverFlow.ItemTemplate>
            </telerikNavigation:RadCoverFlow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:05:36.503

我无法通过代码隐藏 .cs 文件在我的主页上捕获 InfoPage 用户控件。所以我在 xaml 中注入了事件：

```
<local:InfoPageView Name="Custinfopage" Width="390" Height="390" OnButtonClick="Button_click_event" /> 
```

在主 .CS 文件中：

```
void Button_click_event(object sender, RoutedEventArgs e)
{

        // Code
} 
```

在用户控件中：

```
public event EventHandler<RoutedEventArgs> OnButtonClick;

    public void Button_Click(object sender, RoutedEventArgs e)
            {

                if (OnButtonClick!= null){
                        OnButtonClick(sender, e);
                }

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:35:03.590

如果您坚持让事件从您的内部视图中冒出来，您将需要依赖路由事件。该按钮会将 LeftMouseButtonDown 事件标记为已处理，这意味着您不能只使用直接的事件处理程序。但是，您可以做的是为已处理的事件设置一个侦听器。

您将需要验证事件是否源自您想要的按钮，也许在该按钮上使用标签就足够了。

```
public MyOuterPage()
{
    InitializeComponent();
    this.AddHandler(UIElement.MouseLeftButtonDownEvent, new System.Windows.Input.MouseButtonEventHandler(MyMouseLeftButtonDownEventHandler), true);
}

void MyMouseLeftButtonDownEventHandler(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    var button = e.OriginalSource as Button;
    if (button.Tag == "MyButton")
    {
        // do something with the event here
    }
} 
```

# java - 下一个下载线程中断前一个：为什么？

> ID：14751958
> 
> 赞同：1
> 
> 时间：2013-02-07T13:12:25.297
> 
> 标签：java, android, multithreading

```
@Override
public void run() {
    try {

        downloadTaskObserver.onPendingStarted();

        File dir = new File(Environment.getExternalStorageDirectory(), RMConfig.RM_FOLDER);
        dir.mkdirs();
        String sFileName = dir + "/" + trackInfo.getTrackMetadata().getTrackId() + ".mp3";
        File root = new File(sFileName);

        if (!root.exists()) {
            root.createNewFile();
        } else {
            return;
        }

        HttpGet mHttpGet = new HttpGet(trackInfo.getMediaUrl());
        HttpResponse response = WSManager.getInstalnce().getRHHttpsClient().execute(mHttpGet);
        InputStream zipStream = response.getEntity().getContent();
        FileOutputStream fOut = new FileOutputStream(root);

        long fileSize = Long.valueOf(response.getFirstHeader("Content-Length").getValue());

        long byteCount = 0;
        byte[] buffer = new byte[4096];
        int bytesRead = -1;

        downloadTaskObserver.onDownloadStarted();

        while ((bytesRead = zipStream.read(buffer)) != -1 && !cancelDownload) {
            fOut.write(buffer, 0, bytesRead);
            byteCount += bytesRead;

            int value = (int) (byteCount * 100L / fileSize);
            downloadTaskObserver.onUpdateProgress(value);
        }
        if (fOut != null) {
            fOut.flush();
            fOut.close();
        }
        if (zipStream != null) {
            zipStream.close();
        }

        if (!cancelDownload) {
            downloadTaskObserver.onDownloadFinished();
        }

    } catch (Exception e) {
        e.printStackTrace();

        downloadTaskObserver.onDownloadError();
    }
}

public interface DownloadTaskObserver {
    public void onPendingStarted();
    public void onDownloadStarted();
    public void onDownloadFinished();
    public void onDownloadCanceled();
    public void onUpdateProgress(int percent);
    public void onDownloadError();
}

public void addToDownloadQueue(GetTrackPlaybackInfo trackInfo, DownloadTaskObserver downloadTaskObserver) {
        DownloadTask downloadTask = new DownloadTask(trackInfo, downloadTaskObserver);
        mDownloadTasks.add(downloadTask);
//      mDownloadTasksPool.execute(downloadTask);
        new Thread(downloadTask).start();
    } 
```

但是每次我开始下载另一个线程时，前一个线程似乎已经完成。这里有什么我看不到的问题？提前感谢您的帮助。

```
I/BrowseActivity(17104): Thread-16 onPendingStarted...
I/BrowseActivity(17104): Thread-16 onDownloadStarted...
E/BrowseActivity(17104): percent 0
E/BrowseActivity(17104): percent 10
E/BrowseActivity(17104): percent 20
Thread-16 onDownloadFinished...    
I/BrowseActivity(17104): Thread-17 onPendingStarted...
I/BrowseActivity(17104): Thread-17 onDownloadStarted...
E/BrowseActivity(17104): percent 0
E/BrowseActivity(17104): percent 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T21:34:38.063

```
HttpResponse response = WSManager.getInstalnce().getRHHttpsClient().execute(mHttpGet); 
```

getRHHttpsClient() 是每次都给你一个新的客户端，还是旧的被回收了？

# javascript - 一个 html 实例的所有事件都被阻止

> ID：14751960
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:12:29.460
> 
> 标签：javascript, jquery

我正在尝试编辑 UI 代码，但随后被阻止。无论我做什么，我都无法将任何类型的事件固定到 jquery 对象上。

有许多带有类名链接的对象。以下代码对 jquery 对象没有任何影响。

```
$(".link").on("click",function(x){alert("clicked")}) 
```

发生这种情况的可能原因是什么。我测试了代码，发现 $(".link") 正在返回一个有效对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:17:06.740

一种可能且很可能的原因是代码在元素实际存在之前执行。将代码包装在`$(document).ready()`调用中：

```
$(document).ready(function() {
    $(".link").on("click",function(x){alert("clicked")});
}); 
```

推荐阅读：

*   [`.ready()`](http://api.jquery.com/ready/)
*   [jQuery 教程](http://docs.jquery.com/Tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:24:27.737

似乎与`.on()`. 在动态添加元素的情况下，您应该`.on()`在父级（文档准备就绪时存在）上应用，并将范围作为`.on()`方法的第二个参数。

在您的情况下，它应该是：

```
$(document).ready(function() {
    $("body").on("click", "div.link", function(x){alert("clicked")})
}); 
```

这也适用于动态创建的此类元素。[现场测试用例](http://jsfiddle.net/Sz8qy/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:16:33.947

通常附加事件`.on("click", function(d, i){ console.log('clicked'); })`应该可以工作......但如果那没有做这项工作，边缘必须有一个css部分，其中 `pointer-events`将设置为无......并且删除它应该可以解决问题

# java - 您如何在 spring-security 中注销所有已登录的用户？

> ID：14751964
> 
> 赞同：20
> 
> 时间：2013-02-07T13:12:37.903
> 
> 标签：java, spring, authentication, spring-security, logout

我希望能够以编程方式注销所有登录的用户。您如何在某些事件中强制注销所有用户？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T16:03:57.327

首先在web.xml中定义HttpSessionEventPublisher

```
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener> 
```

然后`<session-management>`在你的 spring security.xml 文件中定义。

现在，`SessionRegistry`在您的控制器方法中使用使所有会话无效。下面的代码检索所有活动会话。

```
List<SessionInformation> activeSessions = new ArrayList<SessionInformation>();
    for (Object principal : sessionRegistry.getAllPrincipals()) {
        for (SessionInformation session : sessionRegistry.getAllSessions(principal, false)) {
            activeSessions.add(session);
        }
    } 
```

在每个活动会话上，您可以调用`expireNow()`方法使它们过期或失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T10:50:59.593

Ketan 为您提供了您正在寻找的答案，如果您更改第二个 for 块并`session.expireNow();`改为使用，`activeSessions.add(session);`您最终将导致所有活动会话都过期。

# sql-server - 如何从 varbinary 代码中检索图像？

> ID：14751967
> 
> 赞同：0
> 
> 时间：2013-02-07T13:12:42.753
> 
> 标签：sql-server, image

我的数据库是 SQL Server。在那一个照片数据列中。那是`varbinary`数据类型。如何从该代码中检索原始图像。请提出任何更好的方法

问候， Pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:23:21.937

VarBinary 是二进制的 - 所以将结果集中的字段转换为`byte[]`

```
byte[] bytes = (byte[])dataReader["fieldname"]; 
```

然后使用 a`MemoryStream`将字节转换为`Image`

```
public Image BytesToImage(byte[] bytes)
{
     using(MemoryStream ms = new MemoryStream(bytes))
     {
         Image image = Image.FromStream(ms);
         return image;
     }
} 
```

# java - PowerMock 试图模拟静态 getConnection 给出了非法状态异常：转换类失败

> ID：14751971
> 
> 赞同：3
> 
> 时间：2013-02-07T13:12:51.910
> 
> 标签：java, junit, mockito, powermock, illegalstateexception

我正在尝试从类 JDBCConnectionFactory 制作静态 getConnection() 方法。我正在使用 powerMock + mockito 与 Junit4 一起进行模拟。

### 尝试的解决方案：

1.  谷歌搜索并更改了很多 javassist.jar 版本。他们都没有工作。

2.  下面提到的代码有效。但是当我用 JDBCConnectionFactory 替换 Another.class 时，它开始给出下面提到的异常。

3.  当我删除 PrepareFortest 注释并尝试运行此 JUNIT 时，它开始执行 getConnection 方法本身（我想模拟）。

    ```
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.mockito.Mockito;
    import org.powermock.core.classloader.annotations.PrepareForTest;
    import org.powermock.modules.junit4.PowerMockRunner;

    @RunWith(PowerMockRunner.class)
    @PrepareForTest(AnotherClass.class)
    public class MockitoTester {

       @Test
       public void myTest() throws Exception {

          mockStatic(AnotherClass.class);
          Mockito.when(AnotherClass.getStaticString()).thenReturn("mock static string ");
          System.out.println(AnotherClass.getStaticString());

       }

    } 
    ```

我收到以下异常：

```
java.lang.IllegalStateException: Failed to transform class with name org.onesync.dq.gui.testng.testNG.MockitoTester. Reason: 3
    at org.powermock.core.classloader.MockClassLoader.loadMockClass(MockClassLoader.java:207)
    at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:145)
    at org.powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method) 
    at java.lang.Class.forName(Class.java:247)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:133)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:39)
    at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.createTestDelegators(AbstractTestSuiteChunkerImpl.java:217)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.<init>(JUnit4TestSuiteChunkerImpl.java:59)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.<init>(AbstractCommonPowerMockRunner.java:32)
    at org.powermock.modules.junit4.PowerMockRunner.<init>(PowerMockRunner.java:31)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 3
    at javassist.bytecode.ByteArray.write16bit(ByteArray.java:40)
    at javassist.bytecode.StackMapTable$Shifter.update(StackMapTable.java:744)
    at javassist.bytecode.StackMapTable$Shifter.sameFrame(StackMapTable.java:720)
    at javassist.bytecode.StackMapTable$Walker.stackMapFrames(StackMapTable.java:194)
    at javassist.bytecode.StackMapTable$Walker.parse(StackMapTable.java:179)
    at javassist.bytecode.StackMapTable$Shifter.doit(StackMapTable.java:714)
    at javassist.bytecode.StackMapTable.shiftPc(StackMapTable.java:693)
    at javassist.bytecode.CodeIterator.insertGap0(CodeIterator.java:676)
    at javassist.bytecode.CodeIterator.insertGap(CodeIterator.java:636)
    at javassist.bytecode.CodeIterator.insertGapCore(CodeIterator.java:467)
    at javassist.bytecode.CodeIterator.insertGap(CodeIterator.java:413)
    at javassist.expr.Expr.replace0(Expr.java:298)
    at javassist.expr.FieldAccess.replace(FieldAccess.java:213)
    at org.powermock.core.transformers.impl.MainMockTransformer$PowerMockExpressionEditor.edit(MainMockTransformer.java:276)
    at javassist.expr.ExprEditor.loopBody(ExprEditor.java:197)
    at javassist.expr.ExprEditor.doit(ExprEditor.java:90)
    at javassist.CtClassType.instrument(CtClassType.java:1289)
    at org.powermock.core.transformers.impl.MainMockTransformer.transform(MainMockTransformer.java:75)
    at org.powermock.core.classloader.MockClassLoader.loadMockClass(MockClassLoader.java:203)
    ... 29 more 
```

希望以上信息对您有所帮助。欢迎任何想法/方法/建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:15:12.143

有时您需要使用 doReturn() 语法。您是否使用 JDBCConnectionFactory 尝试过以下操作？我将使用您的 AnotherClass 示例：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(AnotherClass.class)
public class MockitoTester {

  @Test
  public void myTest() throws Exception {
    mockStatic(AnotherClass.class);
    PowerMockito.doReturn("mock static string ").when(AnotherClass.class, "getStaticString");
    System.out.println(AnotherClass.getStaticString());
  }
} 
```

另请参阅[https://www.javadoc.io/doc/org.powermock/powermock-api-mockito/1.5上的 PowerMockitoStubber](https://www.javadoc.io/doc/org.powermock/powermock-api-mockito/1.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:06:38.607

[运行PowerMock测试时](https://groups.google.com/forum/?fromgroups=#!topic/powermock/LSJ2g-7ws_k)请看ArrayIndexOutOfBoundsException ，我是这样解决的，更新javassist.jar版本

# c - 什么是 ”！！” 在 C?

> ID：14751973
> 
> 赞同：48
> 
> 时间：2013-02-07T13:12:58.260
> 
> 标签：c, gcc, boolean, boolean-expression

我遇到了以下代码段：

```
pt->aa[!!(ts->flags & MASK)] = -val; 
```

1.  `!!`（双感叹号/感叹号/两个非运算符）在c中代表什么？
2.  不是`(!!NULL) == NULL`吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-07T13:14:16.900

`!`是否定的。`!!`否定之否定也是如此。重要的是结果将是一个`int`.

*   `!!x`如果`x == 0`是`!!0`，就是`!1`，就是`0`。
*   `!!x`如果`x != 0`是`!!(!0)`，就是`!!1`，就是`!0`，就是`1`。

`!!`如果您想将任何非零值转换为 1，同时确定 0 仍然是 0，则通常使用此方法。

事实上， ，`!!NULL == NULL`， 自`!!NULL == !!0`和`!!0 == !1`终于`!1 == 0`。

因此，在您引用的一小段代码中，`0`如果括号中的表达式的值为 ，则数组下标将为`NULL`，`1`否则为。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-07T13:15:21.900

它通常（ab）用于`int`通过重复应用布尔非运算符将任何值转换为 0 或 1 `!`。

例如：`!56`是 0，因为 56 在被视为布尔值时是“真”。这意味着`!!56`是 1，因为`!0`是 1。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-07T13:15:34.937

`!E`与 相同与`E == 0`相同。用于标准化布尔值。`!!E``(E == 0) == 0``!!`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T14:28:05.400

在 C99 中，您可以将其替换为

```
#include <stdbool.h>

pt->aa[(bool)(ts->flags & MASK)] = -val; 
```

当然，如果您的代码要移植到 C89，那么您最好执行 !! 诡计或

```
pt->aa[(ts->flags & MASK)!=0] = -val; 
```

或者

```
pt->aa[(ts->flags & MASK)?1:0] = -val; 
```

生成的代码肯定是相同的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-07T13:15:13.713

它将数字转换为规范的布尔值。

请注意，在这种情况下，这样做很重要，因为结果被用于索引数组。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-07T13:15:40.313

1.  `!!x`只是一个`!(!x)`。
2.  if`NULL`定义为 0 then `!!NULL == !!0 == !(!0) == !(1) == 0`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-07T21:42:45.557

！！是在某些情况下使编译器安静的一种不错的方法，例如在具有多个表达式的条件中赋值，例如：

```
int _blah = 100;
int *blah;
if ( _blah > 100 && !!(blah = &_blah) ) {
// do stuff
} 
```

我不建议这样做——警告通常是为了强制执行良好的编码实践。

# php - 即使在执行 $image->removeAttribute('alt') 之后，alt 标签也没有被删除？

> ID：14751976
> 
> 赞同：0
> 
> 时间：2013-02-07T13:13:02.673
> 
> 标签：php, dom, image

我想从 HTML 文件中存在的所有标签中删除 alt 标签。实际上它正在删除许多标签的 alt 但不是少数。我不明白为什么？有谁能够帮我。提前谢谢。以下是我要删除的代码，并且：

```
function get_clear_data($html){
        $dom = new DOMDocument();

        $dom->loadHTML($html);

        foreach($dom->getElementsByTagName('img') as $image)
        {
            $image->removeAttribute('alt');
            $image->removeAttribute('xmlns');
            $image->removeAttribute('title');
        }

                $final_data=$dom->saveHTML();

                return $final_data;
} 
```

HTML 标记示例如下：

```
<img align="middle" alt="«math xmlns=¨http://www.w3.org/1998/Math/MathML¨»«mo»§#8712;«/mo»«/math»" class="Wirisformula" src="/ckeditor_3.6.1//plugins/ckeditor_wiris/integration/showimage.php?formula=811d8a98dc8c17603bbb0d65bece4423.png" title="Double click to edit"> R define <img align="middle" alt="«math xmlns=¨http://www.w3.org/1998/Math/MathML¨»«msup»«mi»e«/mi»«mi»z«/mi»«/msup»«mo»=«/mo»«msup»«mi»e«/mi»«mi»x«/mi»«/msup»«mo»§nbsp;«/mo»«mo»(«/mo»«mi mathvariant=¨normal¨»cos«/mi»«mo»§nbsp;«/mo»«mi»y«/mi»«mo»§nbsp;«/mo»«mo»+«/mo»«mo»§nbsp;«/mo»«mi»i«/mi»«mo»§nbsp;«/mo»«mi mathvariant=¨normal¨»sin«/mi»«mo»§nbsp;«/mo»«mi»y«/mi»«mo»§nbsp;«/mo»«mo»)«/mo»«mo»§nbsp;«/mo»«mi mathvariant=¨normal¨»sin«/mi»«mo»§nbsp;«/mo»«mi»z«/mi»«mo»§nbsp;«/mo»«mo»=«/mo»«mfrac»«mn»1«/mn»«mrow»«mn»2«/mn»«mi»i«/mi»«/mrow»«/mfrac»«mo»(«/mo»«msup»«mi»e«/mi»«mrow»«mi»i«/mi»«mi»z«/mi»«/mrow»«/msup»«mo»-«/mo»«msup»«mi»e«/mi»«mrow»«mo»-«/mo»«mi»i«/mi»«mi»z«/mi»«/mrow»«/msup»«mo»)«/mo»«mo»§nbsp;«/mo»«mo»§nbsp;«/mo»«mi»a«/mi»«mi»n«/mi»«mi»d«/mi»«mo»§nbsp;«/mo»«mi mathvariant=¨normal¨»cos«/mi»«mo»§nbsp;«/mo»«mi»z«/mi»«mo»§nbsp;«/mo»«mo»=«/mo»«mfrac»«mn»1«/mn»«mn»2«/mn»«/mfrac»«mo»(«/mo»«msup»«mi»e«/mi»«mrow»«mi»i«/mi»«mi»z«/mi»«/mrow»«/msup»«mo»+«/mo»«msup»«mi»e«/mi»«mrow»«mo»-«/mo»«mi»i«/mi»«mi»z«/mi»«/mrow»«/msup»«mo»)«/mo»«/math»" class="Wirisformula" src="/ckeditor_3.6.1//plugins/ckeditor_wiris/integration/showimage.php?formula=7044dd31440f7c753195b5b5e09ba431.png" title="Double click to edit"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:46:44.883

适用于两个图像。您是否将 html 存储在变量中，然后将其传递给方法？

# mysql - MySql 错误“无法连接到任何指定的 MySQL 主机。” 2931插入后

> ID：14751980
> 
> 赞同：1
> 
> 时间：2013-02-07T13:13:17.763
> 
> 标签：mysql, vb.net

我在 vb.net (visual studio 2010) 中创建了可执行应用程序。大局是我试图将我所有的 MSSQL 数据移动到 MySQL。

环境：MS Server 2003 R2 上的应用程序 - MS Server 2008 R2 上的 x64 SP2 MSSQL Ubunto 上的 x64 SP1 MySql 使用：Connector/Net for 2.0

现在，如果我只做 1000 次，它可以正常工作并从 sql server 循环中读取 1000 次，并且为每条记录调用 inserttable 函数并插入记录。当我尝试 5000 条记录时，问题就来了。在记录 2932（以及之后的所有条目）处，插入产生以下内容： Sql 错误：

```
MySql.Data.MySqlClient.MySqlException: Unable to connect to any of the specified MySQL hosts. ---> System.Net.Sockets.SocketException: Only one usage of each socket address (protocol/network address/port) is normally permitted 192.168.0.14:3306
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at MySql.Data.Common.StreamCreator.CreateSocketStream(IPAddress ip, Boolean unix)
   at MySql.Data.Common.StreamCreator.GetStreamFromHost(String pipeName, String hostName, UInt32 timeout)
   at MySql.Data.Common.StreamCreator.GetStream(UInt32 timeout)
   at MySql.Data.MySqlClient.NativeDriver.Open()
   --- End of inner exception stack trace ---
   at MySql.Data.MySqlClient.NativeDriver.Open()
   at MySql.Data.MySqlClient.Driver.Open()
   at MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder settings)
   at MySql.Data.MySqlClient.MySqlConnection.Open() 
```

有什么想法为什么会在 2900 个条目之后发生？

连接字符串

```
<add name="MSSQLdb" connectionString="Data Source=192.168.0.13; Initial Catalog=sqlserverdb; User ID = IUSR_sqlserverusername; Password=sqlserverpwd"/>
    <add name="MySQLdb" connectionString="server=192.168.0.14;Port=3306;Uid=dbusername; Pwd=dbpassword;database=dbname; pooling=false" providerName="MySql.Data.MySqlClient" /> 
```

主要功能

```
Dim myCon As SqlConnection = New SqlConnection(MSSQLDBConn)
                Dim sSQL As String = 'SELECT TOP 5000 * FROM mssqlservertable'
                Dim myCmd As SqlCommand = New SqlCommand(sSQL, myCon)

                Dim iRetVal As Integer = 0

                Try
                    If myCon.State <> Data.ConnectionState.Open Then
                        myCon.Open()
                    End If

                    Dim drOrder As SqlDataReader = myCmd.ExecuteReader()

                    If drOrder.HasRows Then
                        Dim sOutput As String = ""
                        Do While drOrder.Read()
                            Dim sRetVal As String = ""
                            sRetVal = InsertTable(drOrder("ID"), _
                                                        drOrder("ID2"), _
                                                        drOrder("Resume"), _
                                                        drOrder("DateCreated"), _
                                                        drOrder("DateModified"))

                            If sRetVal.StartsWith("ERROR") = True Then
                                LogIt("ID: " & drOrder("ID") & " iCnt: " & iCnt & " Error: " & sRetVal)
                                ToolStripStatusLabel1.Text = "Error found."
                            End If

                            iCnt += 1
                            If iCnt Mod 100000 = 0 Then
                                ToolStripStatusLabel1.Text = "Current count: " & iCnt
                                Application.DoEvents()
                            End If
                        Loop

                        ToolStripStatusLabel1.Text = "Final count: " & iCnt
                    Else
                        ToolStripStatusLabel1.Text = "No rows"
                    End If

                Catch sqlEx As MySqlException
                    MessageBox.Show("Sql error: " & sqlEx.ToString)
                Catch ex As Exception
                    MessageBox.Show("Regular error: " & ex.ToString)
                Finally
                    myCon.Close()
                    myCon.Dispose()
                End Try
            Catch ex As Exception
                MessageBox.Show("Error: " & ex.ToString)
            End Try 
```

插入功能

```
Function InsertTable(ByVal ID As Integer, ByVal ID2 As Integer, _
                                         ByVal Resume As String, ByVal DateCreated As DateTime, _
                                         ByVal DateModified As DateTime) As String
        Dim sRetVal As String = ""
        Dim myCon As MySqlConnection = New MySqlConnection(MySQLDBConn)
        Dim sSQL As String = "INSERT INTO mysqltable (ID, ID2, Resume,DateCreated, DateModified)" _
                             & " VALUES (?ID, ?ID2, ?Resume, ?DateCreated, ?DateModified);"
        Dim myCmd As MySqlCommand = New MySqlCommand(sSQL, myCon)
        myCmd.CommandType = Data.CommandType.Text
        myCmd.Parameters.Add(New MySqlParameter("?ID", MySqlDbType.Int32)).Value = ID
        myCmd.Parameters.Add(New MySqlParameter("?ID2", MySqlDbType.Int32)).Value = ID2
        myCmd.Parameters.Add(New MySqlParameter("?Resume", MySqlDbType.LongText)).Value = Resume
        myCmd.Parameters.Add(New MySqlParameter("?DateCreated", MySqlDbType.DateTime)).Value = DateCreated
        myCmd.Parameters.Add(New MySqlParameter("?DateModified", MySqlDbType.DateTime)).Value = DateModified

        Try
            If myCon.State <> Data.ConnectionState.Open Then
                myCon.Open()
            End If
            myCmd.ExecuteNonQuery()
            myCmd.Dispose()
        Catch sqlEx As MySqlException
            sRetVal = "ERROR: Sql error: " & sqlEx.ToString
        Catch ex As Exception
            sRetVal = "ERROR: Regular error: " & ex.ToString
        Finally
            myCon.Close()
            myCon.Dispose()
        End Try

        Return sRetVal
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:50:31.133

我想由于打开/关闭数据库连接的快速连续性，您正在耗尽所有可用的临时 TCP/IP 端口。您应该打开一次连接并为每个插入使用该连接。Steve 关于使用池的建议也应该可以为您解决这个问题，因为连接将以类似的方式透明地共享。

# web-services - 无法从 gwt 应用程序访问部署在 vert.x 中的应用程序公开的 Web 服务

> ID：14751984
> 
> 赞同：1
> 
> 时间：2013-02-07T13:13:22.970
> 
> 标签：web-services, gwt, vert.x

我有一个由部署在 vert.x 中的应用程序公开的 REST Web 服务，我正在尝试从 GWT 应用程序访问它。获得了一些响应，但主体为空。

当我使用 http4e 访问服务时，它会给出预期的响应。

除了 GWT 中的普通 Web 服务访问代码之外，是否还有任何必需的配置？下面给出的是 Web 服务访问的代码：

```
final RequestBuilder requestBuilder = new RequestBuilder(
                RequestBuilder.POST, "https://localhost:80/login");
requestBuilder.setHeader("Content-Type", "text/plain");
requestBuilder.sendRequest("{\"userId\":\"" + username
                    + "\",\"password\":\""
                    + password + "\"}",
                    new RequestCallback() {

                        @Override
                        public void onResponseReceived(Request request,
                                    Response response) {
                                System.out.println("response:"
                                        + response.getText());
                            }

                            @Override
                            public void onError(Request request,
                                    Throwable exception) {
                                System.out.println("ex:"
                                        + exception.getMessage());
                            }
                        }); 
```

**编辑：**我认为客户端请求存在一些问题。当`sendRequest`函数被调用时，`onResponseReceived`在 RequestCallback 实现中被调用，响应为空。当我使用 Firebug 进行分析时，POST 请求状态报告为**Aborted 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:37:06.960

尽管您转向 localhost，但这是 CORS（跨域资源共享）。根据[规范](http://www.w3.org/TR/cors/#introduction)，不同的端口意味着不同的来源。[现代浏览器](http://caniuse.com/cors)默认禁止跨域*XMLHTTPRequest*。您应该将*Access-Control-Allow-Origin*标头添加到服务器的响应中。阅读 CORS 规范的[语法](http://www.w3.org/TR/cors/#syntax)部分以获取更多信息。

# javascript - 如何创建一个在动画位置和不透明度时立即显示的工具提示？

> ID：14751987
> 
> 赞同：1
> 
> 时间：2013-02-07T13:13:26.920
> 
> 标签：javascript, jquery, css, jquery-animate, css-animations

*这有点宽泛，请注意，我不是在寻找勺子喂养的解决方案，而是在寻找大方向。*

我想创建以下行为：

![工具提示动画](../Images/4c97c15676a9789cea02277246d80403.png)

1.  工具提示立即显示，点击。
2.  不透明度/位置动画立即开始，直到淡出。
3.  可以同时显示多个工具提示（以防两个或多个按钮相继单击）

我正在寻找具有类似行为的插件，但我只找到具有标准工具提示行为的工具提示插件。我可以自己尝试编写代码，但**我想知道是否已经有一个 jQuery 插件允许这个，我不知道**..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:45:05.683

检查我关于工具提示的代码：[http://jsfiddle.net/kdevpl/eDZKt/]

这适用于`mouseover();`，但您可以更改为`click();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:23:35.370

向您拥有的任何工具提示插件添加淡出动画会更容易，然后尝试找到一个完全适合您需求的女巫。

# java - Java 中 Google App Engine 上的自顶向下 Web 服务

> ID：14751991
> 
> 赞同：0
> 
> 时间：2013-02-07T13:13:41.847
> 
> 标签：java, web-services, google-app-engine, cxf

有没有人设法开发自上而下的网络服务（首先是 WSDL）并部署到 Google App Engine。[https://developers.google.com/appengine/articles/soap](https://developers.google.com/appengine/articles/soap)中给出的示例是一种自下而上的方法。

我使用 Apache CXF 从 WSDL 生成 Java Web 服务存根，捆绑在应用程序引擎库和 xml 配置文件中，但没有任何乐趣。`java.lang.NoClassDefFoundError: javax/management/JMException`初始化 时，我在 App Engine 日志中看到一个`CXFServlet`，这非常讨厌。`ClassNotFoundException`我也许可以做点什么，但这`NoClassDefFoundError`表明在编译时可用的类在运行时不可用。`JMException`是一个 JDK 类，所以我希望它可用。

我没有那么在意修复`Exception`，我更感兴趣的是是否有人对 GAE 上的 Java 中自上而下的 Web 服务有概念证明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:58:34.813

我还阅读了您提到的文章以及此练习：[代码实验室练习 5：SOAP Web 服务](http://googcloudlabs.appspot.com/codelabexercise5.html)

我从这两个来源（以及其他一些来源）了解到的是，GAE目前**不支持**自上而下/合同优先的方法来构建 WS-*服务器*（同时支持使用 jax-ws构建 WS-*客户端）。*

至少这就是我理解这些陈述的方式：

> 从 Google App Engine 1.4.2 版开始，可以使用 java.xml.soap 和 JAX-B 构建 SOAP 服务器，并使用 JAX-WS 在 App Engine 上构建 SOAP 客户端。[...]
> 
> 从 1.4.2 版开始，Google App Engine 不支持在 SOAP 服务器中使用 JAX-WS。（它在 SOAP 客户端中受支持。）正如我们将在下面看到的，为了完成 SOAP 服务器，我们必须直接使用 javax.xml.soap 和 JAX-B。[2](https://developers.google.com/appengine/articles/soap?hl=de)

布鲁迪

# php - 解析我无法解决的错误问题

> ID：14751994
> 
> 赞同：0
> 
> 时间：2013-02-07T13:13:53.750
> 
> 标签：php

我不知道我的代码有什么问题。有一个错误：

`Parse error: syntax error, unexpected T_NS_SEPARATOR, expecting T_STRING in /home/&&&&/public_html/oscommerce/admin/modules.php(313) : eval()'d code on line 1`

这是`Line 313`

```
eval('$keys .= ' . $value['set_function'] . "'" . $value['value'] . "', '" . $key . "');"); 
```

价值观：

`$value['set_function']`包含`tep_cfg_select_option(array('Live', 'Sandbox'),`

`$value['value']`包含`Live`

`$key`包含`CONFIGURATION_PAYPAL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:22:15.367

你确定要使用 eval() 吗？

[eval()](http://www.php.net/manual/en/function.eval.php)的 PHP 文档 说

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:15:58.770

一个可能的原因是括号似乎不匹配。最后你有 2 ) 而你只有一个 ( .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:18:59.543

看起来里面有什么或者`$value['set_function']`里面`$value['value']`有`$key`什么`\`

尝试回显其中的内容`eval()`而不是运行`eval()`- 这将让您看到 PHP 尝试运行的代码。

该错误基本上是说在'd 代码`\`中的一个奇怪的地方有一个命名空间分隔符 ( )`eval()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:17:21.110

> eval('$keys .= ' . $value['set_function'] . "'" . $value['value'] . "', '" . $key . "');");

会给你类似的东西

```
$keys .= set_function'value', 'key'); 
```

我相信这是不正确的。

`(`后面加`$value['set_function'] . "`怎么办？您还没有在函数名称后打开括号。

另一件事是 T_NS_SEPARATOR 错误意味着你有`\`一个不应该出现的地方。每：[https](https://stackoverflow.com/a/6454891/2028547) ://stackoverflow.com/a/6454891/2028547 - 查看所有变量的值以查找奇怪的字符。

# javascript - 要求 js 从 CDN 加载脚本失败

> ID：14751996
> 
> 赞同：4
> 
> 时间：2013-02-07T13:13:56.480
> 
> 标签：javascript, jquery, requirejs, cdn

我是 RequireJS 的新手，由于某种原因，我无法通过 CDN 加载脚本。

**我的代码：**

```
// site full url
var siteUrl = window.location.protocol+"//"+window.location.host + "/fresh/";

// requirejs config
requirejs.config({
    baseUrl: siteUrl + "assets/js/",
    paths: {
        "plugins": "plugins",
        "scripts": "scripts",
        "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min",
        "jquery-ui": "https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min",
        "bootstrap": "https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min",
    }
});

require(['jquery', 'jquery-ui', 'bootstrap', 'plugins/chosen'], function($, chosen){

/*
    loading global selectors and variables
*/ 

//chosen for select boxes
$(".chzn-select").chosen();

}); 
```

并且 jquery 无法加载。我收到以下错误：

```
ReferenceError: jQuery is not defined
[Megszakítás ennél a hibánál]   

...h"):this.container.removeClass("chzn-container-single-nosearch")),e="",s=this.re...

chosen.js (1\. sor)

ReferenceError: jQuery is not defined

TypeError: $(...).chosen is not a function
$(".chzn-select").chosen(); 
```

请有人指出我做错了什么？

PS：我正在定义站点 URL，因为我使用的是 Laravel，如果没有该定义，它会在基本 URL 中包含 URL 段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-29T13:45:27.423

Brandon 是正确的，而我认为 shim 无法解决问题

来自[RequireJS 文档](http://requirejs.org/docs/api.html#config-shim)：

> 不要在构建中混合 CDN 加载和 shim 配置。示例场景：您从 CDN 加载 jQuery，但使用 shim 配置加载依赖于 jQuery 的 Backbone 的库存版本。进行构建时，请确保在构建文件中内联 jQuery，并且不要从 CDN 加载它。否则，Backbone 将内联在构建的文件中，并在加载 CDN 的 jQuery 加载之前执行。这是因为 shim 配置只是延迟加载文件，直到加载依赖项，但不执行任何自动包装定义。构建后，依赖项已经内联，shim 配置不能延迟执行非`define()`'d 代码直到以后。`define()`'d 模块在构建后确实与 CDN 加载的代码一起工作，因为它们正确地将其源代码包装在定义工厂函数中，该函数在加载依赖项之前不会执行。所以教训：shim config 是非模块化代码、遗留代码的权宜之计。`define()`'d 模块更好。

简而言之，我相信当您拥有不是 requirejs 的模块并且它们依赖于其他一些模块（jQuery）时，您将无法在 RequireJS 中使用 CDN 中的 jQuery。

在这种情况下，我同意 Brandon 的建议，直接在页面上要求它们可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:22:35.740

这是因为您引用的“选择”库需要定义 jQuery。RequireJS 不会以保证的顺序加载给定模块的依赖项。它并行加载它们。这是出于性能原因。因此，如果您希望首先加载 jQuery，您可以：

*   require jquery 直接在页面上，所以它在任何 AMD 东西开始之前被加载

-或者-

*   创建一个围绕 'chosen' 的包装模块，将 jQuery 列为依赖项

就个人而言，我选择第一选择。我认为通过 AMD 加载 jQuery 没有任何好处，因为每个页面都需要它，而且许多库都依赖它。没有理由延迟加载您总是需要的东西。

编辑：

看起来您也可以使用 RequireJS 的 shim 功能来执行此操作：

[http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

您需要为“选择”定义一个 shim 并列出 jQuery 和任何其他库作为其依赖项。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-02-07T13:34:40.307

```
$(document).ready({

   //all your jquery code should go here
}); 
```

想知道为什么？看到[这个](http://api.jquery.com/ready/)

# java - Glassfish 中的 saaj.soap 到 xml.soap castException

> ID：14751997
> 
> 赞同：1
> 
> 时间：2013-02-07T13:14:01.313
> 
> 标签：java, web-services, glassfish

我有一个在 GlassFish 上部署了 Web 服务的工作解决方案，当客户端向 Web 服务发送 XML 请求时，我从 SOAPBody 中提取第一个子节点。这适用于在 Windows 7、Server 2003 和 Server 2008 R2 上运行的 GlassFish 3.1.1 和 java 运行时 1.6.0_06-b02。

我被要求在 Ubuntu 12.10 上运行的 GlassFish 3.1.2 和 java runtime 1.7.0_09 上部署解决方案

当使用我在 SOAPEnvelope 的 XML 中没有空格的测试工具运行时，3.1.1 和 3.1.2 系统都可以正常工作，但是，如果我使用 SoapUI 发送包含空格的消息，则 Window 安装工作正常，而 Ubuntu版本引发强制转换异常。

当我尝试运行以下代码片段（分配给 Web 服务的消息处理程序）时：

```
public boolean handleMessage(SOAPMessageContext messageContext) {
    SOAPElement requestElt = (SOAPElement) messageContext.getMessage().getSOAPBody().getFirstChild();
    // Do things here
} 
```

当信封包含空格时，将引发以下异常：

```
com.sun.xml.messaging.saaj.soap.impl.TextImpl cannot be cast to javax.xml.soap.SOAPElement 
```

谁能帮我解释一下这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:12:40.433

在将 Windows 机器更新到 jdk1.7.0_13 和 GlassFish 3.1.2 后，我遇到了同样的问题，即我无法处理带有空格的 SOAP 消息。

我不知道为什么会这样，问题出在 JDK 还是 GlassFish 上，以及是引入的问题还是 XML 处理的收紧。

结果是我现在创建了一个例程，您也传递了 SOAPBody，它遍历 ChildElements，直到找到一个元素而不是一个节点。

如果你正在阅读这篇文章，那可能不是你想听到的，但它目前对我有用。

# xcode - 不同类上的xcode计数按钮和使用值

> ID：14751998
> 
> 赞同：1
> 
> 时间：2013-02-07T13:14:00.847
> 
> 标签：xcode, count

我想知道当点击头等舱或二等舱的按钮时，它将计数+1并在三等舱发送值。

在第三类中，我在滚动视图中有按钮作为循环（ i = 1; i < 30; i++）然后如果位置 i = 1 处的 count = 1 按钮将显示标题“第一”，如果位置 i = 2 处的 count = 2 按钮将显示标题“第二”

在 first.h 和 second.h

```
IBOutlet UIButton*countBtn;
NSInteger tapCount; 
```

在 first.m 和 second.m

```
-(IBAction)CountButton:(id)sender{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
tapCount += 1;
[defaults setObject:[NSNumber numberWithInt:tapCount] forKey:@"buttonPress"];
} 
```

在第三.m

```
NSInteger i;
int x = 60;
for ( i = 1; i < 30; i++){
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(x, 20, 120, 120);

button.tag = i;
x = x+170;
[scrollView addSubview:button];
}

[scrollView setScrollEnabled:YES];
scrollView.ContentSize = CGSizeMake(5000, 130);

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadCount = [defaults objectForKey:@"buttonPress"];
int Count = [loadCount intValue];

if (Count = 1){

    button.tag = 1;
    [button setTitle:@"first" forState:UIControlStateNormal];
}
else if (Count = 2){
     button.tag = 2;
    [button setTitle:@"second" forState:UIControlStateNormal];
} 
```