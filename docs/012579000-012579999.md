# StackOverflow 问答 12579000-12579999

# boost - 使用 Composite_key 从 multi_index_container 中擦除每个键的元素

> ID：12579000
> 
> 赞同：0
> 
> 时间：2012-09-25T08:29:05.267
> 
> 标签：boost, compiler-errors, boost-multi-index

我有`multi_index_container`一个索引是`composite_key`. 但我找不到一种方法来通过它的键擦除一个元素。请看下面：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/composite_key.hpp>

using namespace boost::multi_index;

struct Point
{
    int x, y;
};

void func()
{
  multi_index_container<Point,indexed_by<
    hashed_unique<
      composite_key<Point,
                    member<Point,int,&Point::x>,
                    member<Point,int,&Point::y> >
      > > > points;

  points.find( boost::make_tuple( 3, 3 ) );    // <- works
  points.erase( boost::make_tuple( 3, 3 ) );   // <- failes to compile
} 
```

`erase(key)`适用于非复合索引。但我找不到复合键的正确语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:48:44.360

`erase`没有允许与元组互操作的重载类型（从技术上讲，这与[*兼容扩展*](http://www.boost.org/libs/multi_index/doc/reference/hash_indices.html#lookup)的概念有关。）但是您可以使用更多代码获得相同的效果：

```
auto p=points.equal_range(boost::make_tuple(3,3));
points.erase(p.first,p.second); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:39:28.010

根据您的要求添加到先前的答案。你可以这样：

```
Point p={3,3};
points.erase(points.key_extractor()(p)); 
```

唯一的问题是它无法扩展（如果`Point`构建成本很高。）

# ruby - 在生成器模板 SCSS 文件中动态写入

> ID：12579005
> 
> 赞同：0
> 
> 时间：2012-09-25T08:29:18.550
> 
> 标签：ruby, ruby-on-rails-3.2, sass, generator, thor

我正在尝试在 Rails 中为我的管道资产标准设置创建自己的生成器。我一直在关注[Ryan Bates Railscast 的发电机](http://railscasts.com/episodes/218-making-generators-in-rails-3?view=comments)

他解释了如何在 html.erb 文件中添加动态代码，但我尝试在 scss 文件中做类似的事情，它只是输出标签：

```
<% if options.add %>
//Some optional code here
@import "add.css.scss";
<% end %> 
```

但是当我调用 create_template 时并没有执行它，它只是将代码添加到模板中。我试过调用文件 .scss.erb 但也不满意吗？

关于如何调整文件以使 if 语句起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:08:34.943

Try this `<%- if options.add -%>`

# asp-classic - 如何从asp中的数值数组中获取关联数组

> ID：12579018
> 
> 赞同：0
> 
> 时间：2012-09-25T08:30:15.680
> 
> 标签：asp-classic, associative-array

在 php 中很容易从数值数组中获取关联数组，但是如何从 Classic ASP 中的数值数组中获取关联数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:10:56.777

恐怕vbscript数组只是像php数值数组和多维数组。

或者，您可能想根据需要尝试 Server.CreateObject("Scripting.Dictionary")。

# c++ - 在 C++ 中连接字符串

> ID：12579024
> 
> 赞同：1
> 
> 时间：2012-09-25T08:30:41.367
> 
> 标签：c++, string, concatenation

对于这个简单的任务，我需要一个快速的解决方案。

我正在修改具有此功能的源代码：

```
OFCondition MdfDatasetManager::saveFile(const char *file_name,
                                        E_TransferSyntax opt_xfer,
                                        E_EncodingType opt_enctype,
                                        E_GrpLenEncoding opt_glenc,
                                        E_PaddingEncoding opt_padenc,
                                        OFCmdUnsignedInt opt_filepad,
                                        OFCmdUnsignedInt opt_itempad,
                                        OFBool opt_dataset) 
```

在函数内部，有一行：

```
 result = dfile->saveFile(file_name, opt_xfer, opt_enctype, opt_glenc,
                             opt_padenc,
                             OFstatic_cast(Uint32, opt_filepad),
                             OFstatic_cast(Uint32, opt_itempad),
                             (opt_dataset) ? EWM_dataset : EWM_fileformat); 
```

看到 file_name 变量了吗？

我想修改，所以文件名最后会添加“.out”。

所以，我添加了一个新变量：

字符 * 输出文件；

在调用 dfile->saveFile() 函数之前，我添加了：

```
strcpy(output_file, file_name);
strcat(output_file, ".out");

    result = dfile->saveFile(output_file, opt_xfer, opt_enctype, opt_glenc,
                             opt_padenc,
                             OFstatic_cast(Uint32, opt_filepad),
                             OFstatic_cast(Uint32, opt_itempad),
                             (opt_dataset) ? EWM_dataset : EWM_fileformat); 
```

但是，这是行不通的。

应用程序崩溃。而且我认为，问题是我需要初始化 *output_file 吗？

问题是，我不是 C++ 程序员 :(

那么，有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:32:55.873

没有为 分配内存`output_file`。使用 a[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)代替：

```
std::string s(file_name);
s += ".out"; 
```

然后`s.c_str()`用作函数的第一个参数`saveFile()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:49:30.083

很多人建议使用`+=`附加`".out"`到`string`，这是正确和有效的，但不是很直观。如果您考虑更自然的表达方式...

```
std::string x = file_name + ".out"; 
```

...您会发现它不起作用，因为编译器添加了一个指向`char`数组`char`的指针。数组不能添加到任何东西，所以编译器会运行一个标准转换列表来寻找可能有意义的东西。可悲的是，该数组可以转换为另一个指向-`char`的指针，并且允许两个指针的数字总和（它们最终毕竟只是数字），但结果是一个不相关的地址（由于位甚至可能换行-size) 甚至可能与您程序的虚拟地址空间不对应，并且可能是随机的。在`+`编译器的时候没有考虑参数`std::string`s：在涉及左侧目的地之前评估分配右侧的任何内容。因此，使该工作正常进行的最小直观更改是明确地将参数之一`+`设为 a `std::string`：

```
std::string x = std::string(file_name) + ".out"; 
```

...或者...

```
std::string x = file_name + std::string(".out"); 
```

作为一个添加很多东西的表达式是从左到右评估的，一旦你有 a`std::string`作为第一个或第二个参数，你可以添加其他 ASCIIZ/C/ `const char*`“字符串”，直到奶牛回家。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:36:21.410

当然会崩溃。output_file 是指向字符数组的指针。但是您不分配该内存，也不初始化指针。因此它指向堆上的一些随机区域。当您尝试复制到它时，应用程序崩溃。

```
size_t total_size = strlen(file_name) + strlen(".out")+1;
char* output_file = new char[total_size];
memset(output_file, 0, total_size)
strcpy(output_file, file_name);
strcat(output_file, ".out"); 
```

请注意，您必须删除分配的内存。

顺便说一句，你为什么不只使用 std::string 这样你就不必关心了？

```
std::string output_file(file_name);
output_file+= ".out";
result = dfile->saveFile(output_file.c_str(), opt_xfer, opt_enctype, opt_glenc,
                         opt_padenc,
                         OFstatic_cast(Uint32, opt_filepad),
                         OFstatic_cast(Uint32, opt_itempad),
                         (opt_dataset) ? EWM_dataset : EWM_fileformat); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:33:08.147

```
#include <string>     // at the top of the program

std::string output_file = file_name;
output_file += ".out";
result = dfile->saveFile(output_file.c_str(), opt_xfer, opt_enctype, opt_glenc,
                         opt_padenc,
                         OFstatic_cast(Uint32, opt_filepad),
                         OFstatic_cast(Uint32, opt_itempad),
                         (opt_dataset) ? EWM_dataset : EWM_fileformat); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:33:46.330

使用`std::string`并使您的生活更轻松：

```
std::string outputFile(output_file);
outputFile += ".out";

result = dfile->saveFile(outputFile.c_str(), ... ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T08:33:58.047

全 C 方法：

```
output_file = malloc(strlen(output_file) + 5);
strcpy(output_file, file_name);
strcat(output_file, ".out"); 
```

PS`free(output_file)`完成后您需要使用 output_file。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T08:34:33.653

您必须为新字符串分配内存，例如：

```
char *cNewString = malloc(strlen(file_name)+5); //+5 for the ".out" 
```

然后复制过来。

不再使用时不要忘记删除内存

# algorithm - 需要 Krovetz 词干算法 (KStemming) 帮助

> ID：12579026
> 
> 赞同：0
> 
> 时间：2012-09-25T08:30:48.850
> 
> 标签：algorithm, solr, filter, stemming

您能否解释一下 Krovetz 词干算法（Kstemming）的算法，我想知道它是如何工作的。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:17:48.590

阅读[这篇](http://www.comp.lancs.ac.uk/computing/research/stemming/general/krovetz.htm)文章和他的论文[Viewingmorphology as an inference process](https://docs.google.com/viewer?a=v&q=cache:4F9cqY-PE-0J%3alexicalresearch.com/sigir-93.pdf%20&hl=tr&pid=bl&srcid=ADGEESgSqGWyNU8Suqt0ZoOCOTBO1kl8W54gRUeGCdLoX-VWQvjvlF7BbC4ZouSu-DFIredD8UTxSiXGVR0ftOBt_Mf9aCMHiRGXeQcsCWPOEOO2HD9Ke73_cIN9hdyCsUSj-3Wuf2kG&sig=AHIEtbT1jRdBcDn6xVuaKQz-rr1ApiC_aA)。

您还可以在下面找到一些其他有用的文档和论文。他们还讨论了 Krovetz 词干算法。

*   [信息检索和问答系统的词干算法](https://docs.google.com/viewer?a=v&q=cache%3ahHvEa11QaKMJ%3awww.psychology.adelaide.edu.au/personalpages/staff/simondennis/DSTO2.pdf%20&hl=tr&pid=bl&srcid=ADGEESjd_xRl_rUjzY8dbVX0VczZrXW9bBOKeWATguwcrAQC9oSzEcUaxFZ2bDhrBMqX7vCXnIYzGxYVw6W-IcinY5Fh21QODWWw3PTI_ts-mFTKApzgb59X_i0jTXjHb2Y74vwVt5PQ&sig=AHIEtbTk0YiQ_qy7zXZRSKUPlpfvs4blDQ&pli=1)
*   [源于孟加拉语](https://docs.google.com/viewer?a=v&q=cache:22IxvCS0qAcJ%3acrblp.bracu.ac.bd/nlpcourse/report/stemming_report.pdf%20&hl=tr&pid=bl&srcid=ADGEESiGppXH53iLIFPukxIq3Q17n5tcKOAk05Nmvui4gxFf3hQUBRtMczXcqlIaUtwScQScTwn5RKAPUY3i0k2cnZ5obUaMvdiBRxd_r0prBFLlFAvKDX0Eq2L3CeQCrYoxMrJDjIWl&sig=AHIEtbRtZXB99vyOZRdcP9_gi7uDMEUR0w)
*   [词干算法的比较研究](https://docs.google.com/viewer?a=v&q=cache:98J8jZlC-pYJ%3aijcta.com/documents/volumes/vol2issue6/ijcta2011020632.pdf%20&hl=tr&pid=bl&srcid=ADGEESgREGDHo2pvnoDqXxg4cXFUVRzj_7Qy2Qsiy3LyqHGNPmP7hoA8qjdPhqdocRH3jViq1EyUeruTZGm7CeT4Xlx10gWOimzl5yMXxcGp9u2YCCXH4N0SeoyqH30IMEM7Zt6znmeQ&sig=AHIEtbRRMByROpWAh-q6uL1CVq2TqIF5uQ)

# bezier - 如何比较两条二维贝塞尔曲线的相似度

> ID：12579028
> 
> 赞同：2
> 
> 时间：2012-09-25T08:30:59.323
> 
> 标签：bezier

我不熟悉贝塞尔曲线，但我需要为我的项目比较两条贝塞尔曲线。我想到的一个快速想法是对两条曲线进行采样，然后使用拉普拉斯坐标之类的东西比较采样的折线。这样我比较曲线上的点，这是有道理的。但是我需要担心采样率。另一个想法是比较贝塞尔曲线的控制点，但我不确定这样做是否有意义。有没有人有比较贝塞尔曲线的经验？

提前致谢！

# html - 为什么我的 :hover 不起作用？

> ID：12579029
> 
> 赞同：0
> 
> 时间：2012-09-25T08:31:04.673
> 
> 标签：html, css, hover

因此，无论出于何种原因，我在我的一个 div 上设置了一个 :hover 伪属性，因此悬停颜色会有所不同，但它似乎不起作用。我还有其他可以使用悬停的 div，所以我不确定问题出在哪里（我刚开始学习 CSS）。有人可以看看我的代码吗？提前致谢。:)

这是我的 CSS，底部有我遇到问题的 :hover 伪类：

```
#secondnavlinks ul {
display: inline;
text-align: center;
font-family: klavika-light;
list-style-type: none;
}

#secondnavlinks ul li {
display: inline;
text-align: center;
float: right;
font-family: klavika-light;
list-style-type: none;
margin-right:3%;
margin-top:17px;
white-space: nowrap;
}

#secondnavlinks ul li > a {
text-decoration: none;
color: #000000;
}​

#secondnavlinks ul li > a:hover {
color: grey;
} 
```

这是 HTML，带有 #secondnavlinks div，这是我遇到的问题：

```
<div id="nav">

<div id="footer">
</div>

<div id="secondnavlinks">
<ul>
<li><a href="#">Ambient Bookmarklet</a></li>
</ul>
</div>

<div id="class1">
<ul>
<li><a href="#">Saved</a></li>
<li><a href="#">Folders</a></li>
</ul>
</div>

<div id="header">
<img src="ambientfollowhead.gif" alt="ambientfollow" width="160" height="35" />
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:34:03.427

尝试

```
#secondnavlinks ul li a {
text-decoration: none;
color: #000000;
}​

#secondnavlinks ul li a:hover {
color: grey;
} 
```

# php - 从站点下载大文件并使用 php 即时流式传输 - 速度非常低

> ID：12579032
> 
> 赞同：1
> 
> 时间：2012-09-25T08:31:13.043
> 
> 标签：php, wget, popen

首先我很抱歉，但我的英语不流利。我想通过我的服务器将几个大文件从另一个站点流式传输给用户。现在我正在使用那个 wget 和 popen()

```
$plik = "http://test.mm.pl/100.tmp"; // text file for test - 100 MB
header('Content-Type: application/exe');
header('Content-disposition: attachment; filename="'.basename($plik).'"');
header('Content-Transfer-Encoding: binary');

$fp = popen('wget -qO- '.$plik, 'r');

$bufsize = 1024; // 8192, 4096 i've tried many options
$buff = '';
while( !feof($fp) ) {
   $buff = fread($fp, $bufsize);
   echo $buff;
   flush();
}
pclose($fp); 
```

但传输速率在 30-60 kb/s 之间波动：/ 当我直接在服务器上尝试时：

> wget www.somsite.pl/file.tmp

: 我有 ~ 500kb/s

我应该怎么做才能获得更好的传输率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:38:41.487

您可以考虑使用[sendfile](http://php.net/manual/en/function.http-send-file.php)，与 wget/popen 组合相比，它具有良好的性能。

或者只是发送带有 URL 的 HTTP 302

启动 wget 并使用 popen 连接它的输出不如使用 fsockopen 直接连接有效。

# stm32 - 在 STM32/CC1120 上实现无线 m-bus 协议

> ID：12579035
> 
> 赞同：2
> 
> 时间：2012-09-25T08:31:25.487
> 
> 标签：stm32

我正在尝试在 STM32/CC1120 系统上实现无线 m-bus 协议，但我找不到任何有关 wmbus 工作原理或任何实现示例的有用文档。任何人都可以帮我找到一些教程/文档/规范吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T15:55:18.140

无线 M-Bus 协议是欧洲标准 EN 13757 的一部分。

有一整套文档描述了 M-Bus 的不同方面。第 4 部分适用于无线 M-Bus。

您可以在 beuth 购买文件。您肯定需要第 4 部分用于无线 m-bus，第 3 部分用于详细解码包含的 m-bus 记录：
[EN 13757-4 (W-Mbus)](http://www.beuth.de/en/standard/din-en-13757-4/198860297)
[EN 13757-3（应用层）](http://www.beuth.de/en/standard/din-en-13757-3/165937084)

如果您不想直接投资，但想了解基础知识，您可能还想看看免费的基于无线移动总线协议的[OMS（开放式计量系统）规范。](https://oms-group.org/fileadmin/files/download4all/omsSpezifikationen/generation4/spezifikation/vol2/OMS-Spec_Vol2_Primary_v442.pdf)请记住，并非每个无线 m-bus 仪表都一定是 OMS 仪表，但它仍然可以帮助您开始了解该主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:47:46.390

[http://en.wikipedia.org/wiki/Meter-Bus](http://en.wikipedia.org/wiki/Meter-Bus)

我还在 ODIN OD4110 电表的文档中找到了 M-Bus proto 的描述。但来源很难找到。我还需要一个来交流和记录消费。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-11T13:24:47.993

有几个库可用：

*   [jMBus](http://mbus4j.sourceforge.net/)：支持无线，基于 Java
*   [Mbus4J](https://www.openmuc.org/m-bus/)：基于Java
*   [libmbus](http://www.rscada.se/libmbus/)：不支持无线，只支持有线，基于 C

使用其中之一有助于了解完整的 M-Bus 通信协议或购买文档。

# hadoop - 临时挂起 hadoop 节点 - 后台 hadoop 集群

> ID：12579038
> 
> 赞同：0
> 
> 时间：2012-09-25T08:31:38.870
> 
> 标签：hadoop, parallel-processing, cluster-computing, preemption, hadoop-yarn

我想知道是否可以安装“后台”hadoop 集群。我的意思是，毕竟它意味着能够处理节点不可用或有时很慢。

所以假设一些大学有一个计算机实验室。比如说，100 个盒子，全部配备高档桌面硬件、千兆以太网，甚至可能安装相同的软件。Linux 在这里也很受欢迎。

但是，这 100 个盒子当然是**为学生准备的桌面系统**。有时实验室会满员，但有时实验室会空着。用户数据主要存储在中央存储设备上——比如 NFS——因此本地磁盘的使用并不多。

对我来说，在空闲时间将系统用作 Hadoop 集群听起来是个好主意。最简单的设置当然是让一个 cron 作业在晚上启动集群，然后在早上关闭。但是，白天也有许多计算机未使用。

但是，当任何用户登录时，Hadoop 将如何对**节点关闭**等做出反应？是否可以轻松地“暂停”（抢占！）hadoop 中的节点，并在需要时将其移动到交换位置？理想情况下，我们会给 Hadoop 一个在暂停任务之前转移计算的机会（也可以释放内存）。如何进行这样的设置？有没有办法向 Hadoop 发出一个节点将被挂起的信号？

据我所知，不应停止数据节点，并且可能需要将复制增加到 3 个以上。使用 YARN 还可能存在一个问题，即通过将任务跟踪器移动到任意节点，它可能会在某个时候被挂起。但也许可以控制有一小组节点始终处于打开状态，并且将运行任务跟踪器。

只发送或发送（然后用 恢复）`stop`是否合适？第一个可能会让 hadoop 有机会做出反应，第二个会在用户很快注销时继续更快（因为工作可以继续）。纱线怎么样？`tasktracker``SIGSTOP``SIGCONT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:56:04.673

首先，hadoop 不支持“抢占”，您如何描述它。Hadoop 只是重新启动任务，如果它检测到，该任务跟踪器已死。因此，在您的情况下，当用户登录主机时，一些脚本会简单地杀死 tasktracker，并且 jobtracker 会将在杀死的 tasktracker 上运行的所有映射器/减速器标记为 FAILED。之后，这些任务将在不同的节点上重新安排。

当然，这样的场景不是免费的。按照设计，映射器和化简器将所有中间数据保存在本地主机上。此外，reducers 直接从执行 mappers 的 tasktrackers 获取 mappers 数据。因此，当 tasktracker 被杀死时，所有这些数据都将丢失。而对于mapper来说，这不是什么大问题，mapper通常工作在相对较小的数据量（千兆字节？）上，但reducer会受到更大的影响。Reducer 运行 shuffle，这在网络带宽和 cpu 方面成本很高。如果 tasktracker 运行了一些 reducer，重启这个 reducer 意味着所有数据都应该重新下载到新主机上。我记得，那个jobtracker没有立即看到，那个tasktracker已经死了。所以，被杀死的任务不应该立即重新启动。

如果你的工作量很轻，数据节点可以永远存在，当用户登录时不要将它们离线。Datanode消耗少量内存（256M应该足够了，以防数据量小），如果你的工作量很轻，不要吃太多的cpu和磁盘io。

总之，您可以设置这样的配置，但不要依赖于适度工作负载上良好且可预测的作业执行。

# jquery - CSS 选择器背后的订阅模式？

> ID：12579048
> 
> 赞同：1
> 
> 时间：2012-09-25T08:31:57.950
> 
> 标签：jquery, css, data-structures, jquery-selectors, css-selectors

使用 CSS 选择器，选择器字符串`body > h1.span`订阅树中特定类型的节点。有谁知道这是怎么做到的？

转换的选择器，浏览器如何选择结果集？有没有让它高效的诀窍？

我想对于节点订阅的整个结构以及执行选择器查询时使用的整个结构存在某种层次类型树——但这只是一个猜测。

有谁知道真正的答案？或者更有趣的是，基于 jQuery/CSS 搜索查询在树上进行动态查找的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:34:27.013

大多数主流浏览器根据[DOM](http://www.w3.org/TR/dom)处理页面并根据页面中的元素创建文档层次结构或文档树。在应用 CSS 时，他们通常会迭代文档树，在每个元素的基础上工作，并对每个元素的样式表中的候选选择器执行[从右到左的匹配，然后根据](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)[CSSOM](http://www.w3.org/TR/cssom)应用基于这些匹配的 CSS 规则。这意味着对于像这样的选择器`body > h1.span`，浏览器首先检查每个元素以查看它是否`h1`具有 的类`span`，然后检查它是否是 的直接后代`body`。

根据实现的不同，可能会有一些优化来过滤更有可能不匹配的情况。例如，在尝试任何其他匹配例程之前检查名称空间、标记名称、ID 或类名称，因为这些是区分元素的最常用方法。

这种逐元素匹配模式允许浏览器有效地“订阅”选择器对 DOM 中的更改，因为浏览器需要做的（我想）就是查看 DOM 中的更改并应用规则并重排元素进行了相应的更改。

不过，这过于简化了。它也主要指样式表中的选择器匹配。它没有描述每个选择器的实现，因为规范没有定义实现。

例如，浏览器以不同的方式实现[Selectors API](http://www.w3.org/TR/selectors-api)（`document.querySelector()`等），即使它使用[CSS 选择器](http://www.w3.org/TR/selectors)来查询 DOM。特别是，没有任何订阅模式；Selectors API 方法返回的节点列表不会动态更新。从[§6.2 查找元素](http://www.w3.org/TR/selectors-api/#findelements)：

> 该方法`NodeList`返回的对象`querySelectorAll()`必须是静态的，而不是[实时](http://www.w3.org/TR/DOM-Level-3-Core/core.html#td-live)的（[DOM-LEVEL-3-CORE]，第 1.1.1 节）。对基础文档结构的后续更改不得反映在`NodeList`对象中。这意味着该对象将包含一个匹配`Element`节点的列表，这些节点在创建列表时位于文档中。

根据this site上的一些答案，jQuery似乎也执行选择器的从右到左匹配，但我还没有找到任何支持来源。它还进行了许多优化，例如`body`首先读取 ID 选择器等。和 Selectors API 一样，jQuery 返回在调用其选择器引擎时匹配的静态节点列表；它不会订阅 DOM 中的更改并相应地更新节点列表（如果您需要订阅 DOM 更改并委托事件处理程序，则需要使用[`.on()`](http://api.jquery.com/on)或带有选择器的类似方法）。

值得注意的是，jQuery 采用的一项主要优化是遵循 Selectors API 以首先匹配选择器。这意味着它使用浏览器的*本机*实现而不是 JavaScript。如果选择器是有效的 CSS 且受支持，则`document.querySelectorAll()`返回节点列表。如果出错，jQuery 会使用自己的选择器引擎[Sizzle](http://sizzlejs.com)来查询 DOM。

同样，它与浏览器对 CSS 选择器的实现并不完全相同，特别是因为 jQuery 选择器和 CSS 选择器不是一回事，尽管其中一个是对另一个的改编。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:35:25.087

您可能知道 CSS 规则是从右到左评估的，因此在您的示例中，`.span`首先扫描整个 DOM 以查找类，然后按标签过滤`h1`。

# php - 如何使用php从输入的html表单中获取值

> ID：12579051
> 
> 赞同：-1
> 
> 时间：2012-09-25T08:32:16.263
> 
> 标签：php

有人可以帮我在提交表单后如何从输入 name="$photo_id" 中获取值。在下一页上应该是 $photo_id = $_GET['photo_id'] ......

```
$picture = mysql_query( "SELECT * FROM gallery_photos where photo_category = ".$cid."    ");
while($row2 = mysql_fetch_array($picture)){ 

    $photo_id = $row2["photo_id"];
    $photo_filename = $row2["photo_filename"];
    $photo_caption = $row2["photo_caption"];
    $photo_category = $row2["photo_category"];

    echo "<ul style='float:left; list-style:none; '>";
    echo "<li><img src='".$images_dir."/tb_".$photo_filename."' border='0' alt='".$photo_caption."' /><br />";
    echo "<span><input name='$photo_id' type='text' value='$photo_caption' /></li></span>";
    echo "</ul>";
    } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:43:57.630

如果您可以发布页面，则可以从`$_POST`数组中获取它，否则您必须传入 url，例如[http://test.com?photo_id](http://test.com?photo_id) = $_GET['photo_id']; 使用php头函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:42:11.660

这非常简单 - **HTML 101**

这里唯一缺少的是

```
<form> </form> tags 
```

如下更改最后 5 行，它应该按您想要的方式工作...

```
echo '<form method="get" action="next_file.html" >';
echo "<ul style='float:left; list-style:none; '>";
echo "<li><img src='".$images_dir."/tb_".$photo_filename."' border='0' alt='".$photo_caption."' /><br />";
echo "<span><input name='$photo_id' type='text' value='$photo_caption' /></li></span>";
echo "</ul>";
echo "</form>";
} 
```

希望它有帮助，干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:42:50.500

添加`<form>`标签。

分成`<input name='$photo_id' type='text' value='$photo_caption' />`2个输入：

```
<input name='photo_caption' type='text' value='$photo_caption' />
<input name='photo_id' type='hidden' value='$photo_id' /> 
```

在下一页上获取值：

```
$photo_caption = $_POST['photo_caption'];
$photo_id = $_POST['photo_id']; 
```

# php - 登录后隐藏 HTML 元素

> ID：12579054
> 
> 赞同：-1
> 
> 时间：2012-09-25T08:32:39.813
> 
> 标签：php, html

我尝试使用一个 PHP 文件登录，没有任何 HTML 文件。因此，当我成功登录时，我想隐藏 HTML 发布按钮和文本框。

这是我的代码..：

```
 <?php 

    $showHTML = true;

    if ($showHTML) { ?>

    <h1> Bitte einloggen! </h1>
    <form action="test2.php" method="POST">
    <input name="user" type="test"><br>
    <input name="pass" type="password"><br>
    <input type="submit" value"Login">
    </form>

    <?php 

    }

    if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) {

        if ( $_POST['user'] == "test" && $_POST['pass'] == "a123" ) {
            echo "user = test";
            $showHTML = false;
         }
     } 
```

当然，这不会再次隐藏 HTML 代码，因为我认为它已经执行了。

有没有办法再次隐藏 HTML 输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:36:12.530

您不能使用服务器端变量来控制已呈现的 html 内容。

```
<?php 
if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) {
    if ( $_POST['user'] == "test" && $_POST['pass'] == "a123" ) {
        echo "user = test";
　　} 
} else { ?>

<h1> Bitte einloggen! </h1>
<form action="test2.php" method="POST">
<input name="user" type="test"><br>
<input name="pass" type="password"><br>
<input type="submit" value"Login">
</form>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:34:37.560

> 当然，这不会再次隐藏 HTMLCode，因为我认为它已经执行了。

正确的

> 有没有办法再次隐藏 HTML 输出？

移动测试，使其出现在您（不）想要输出的 HTML*之前。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:35:04.297

简而言之：将 HTML 放在 PHP 下。

Long：使用一个像样的登录系统。使用会话。

# java - 将 Phoenix 编译器框架与 Eclipse 集成为 JAVA 类

> ID：12579056
> 
> 赞同：0
> 
> 时间：2012-09-25T08:32:44.980
> 
> 标签：java, compiler-construction, eclipse-juno

我想在我在 Eclipse JUNO 上构建的 JAVA 类中使用 Phoenix 编译器框架（由 Microsoft）的 Phx.Graphs 命名空间中的“Graph”类的方法。有人可以帮我弄清楚如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:41:18.403

奥里特。所以基本上我不能真正使用框架中的那些方法，因为（凤凰城的）工具已经死了。我发现我会使用 ZEST 包以我的方式实现这些方法。感谢看到帖子但无能为力的人！:)

# python - Python Selenium：使用 xpath 查找对象属性

> ID：12579061
> 
> 赞同：23
> 
> 时间：2012-09-25T08:32:55.580
> 
> 标签：python, xpath, selenium

我是 xpath 的新手，试图使用 xpath 获取“值”的值：

```
<input type="submit" value="  Search  " class="long searchButton" style="width:190px !important;"> 
```

虽然很容易通过以下方式找到元素`"type="submit"`：

```
browser.find_elements_by_xpath("//*[@type='submit']") 
```

我一直无法弄清楚如何获得我需要的值，例如：

```
browser.find_elements_by_xpath("//*[@type='submit']/@value") 
```

有点出乎意料地给出了一个错误：

```
expression "//*[@type=\'submit\']/@value" is: [object Attr]. It should be an element 
```

任何想法如何解决这个问题？

编辑： xpath 是正确的，但它“返回”一个 obj 属性，因为它不是一个元素，所以它是不允许的。我找不到像 get_attr_by_xpath() 这样的方法或类似的方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-02T11:37:15.027

我最终用作`get_attribute("value")`：

```
for i in browser.find_elements_by_xpath("//*[@type='submit']"):
    print i.get_attribute("value") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:41:45.933

会是这样

```
browser.find_elements_by_xpath("//*[@type='submit']/@value").text 
```

**更新：**

使用您使用的功能，我们只能提取元素而不是其属性。要获取它的属性，表达式应该是这样的

```
browser.find_elements_by_xpath("//*[@type='submit']").get_attribute("value") 
```

参考： [http ://selenium-python.readthedocs.org/en/latest/api.html#selenium.webdriver.remote.webelement.WebElement.find_elements_by_tag_name](http://selenium-python.readthedocs.org/en/latest/api.html#selenium.webdriver.remote.webelement.WebElement.find_elements_by_tag_name)

# php - 503 Service Unavailable: 后端服务器满负荷........？服务器会收到我的 POST 数据吗？

> ID：12579062
> 
> 赞同：-3
> 
> 时间：2012-09-25T08:33:05.540
> 
> 标签：php, http, httpwebrequest

在我发布我的请求后，服务器给我 503 响应，我想知道服务器是否收到了我的 POST 数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:45:56.320

由于服务器临时过载或维护，Web 服务器（运行网站）当前无法处理 HTTP 请求。这意味着这是一种暂时的情况，经过一段时间的延迟会得到缓解。处于这种状态的一些服务器也可能会简单地拒绝套接字连接，在这种情况下，可能会因为套接字创建超时而产生不同的错误。

这是一个服务器问题。 [来自 HTTP 错误 503 - 服务不可用](http://www.checkupdown.com/status/E503.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T08:43:58.133

你用什么发帖？一个简单的表格？

如果服务器给出了 503，通常这意味着代码或服务器中存在错误，并且无法接收到 POST 数据。

请粘贴一些服务器端代码，以便我可以查看错误是否存在。

# facebook - Facebook 显示基于对象而非操作的聚合打开图操作附件

> ID：12579064
> 
> 赞同：1
> 
> 时间：2012-09-25T08:33:09.240
> 
> 标签：facebook, facebook-opengraph

我创建了一个动作，并在“配置故事附件”中定义了附件的外观。当只有一个此操作类型的帖子时，它在提要中看起来很好。但是，如果有多个动作，FB将它们聚合成一个列表，这很好，但是它在每个动作的附件中显示了**对象的og:description**，并且似乎忽略了动作的附件配置。

有什么我做错了吗？有什么方法可以控制聚合时附件的显示方式？

# android - Canvas 中的动画文本 - Android

> ID：12579066
> 
> 赞同：4
> 
> 时间：2012-09-25T08:33:24.503
> 
> 标签：android, animation, android-canvas, draw

嗨，我在 android 中有一个应用程序，它使用 canvas.drawText() 在 Canvas 上绘制文本。现在，我想为文本绘制设置动画，使其从左到右着色，类似于卡拉 OK 动画。这可能吗？谢谢。

编辑：

我现在可以使用线程来执行此操作，并在每次有新字母要着色或着色时重绘整个画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:13:51.837

我能够通过使用线程并在每次有一个要着色或着色的新字母时重绘整个画布来解决这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T13:28:56.727

您需要使用[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)创建一个主循环，处理时间并且每 X 秒修改一些内容

为了创造卡拉OK效果，我尝试将句子分成两部分。一个是彩色的，第二个是白色的。每 X 秒我将一个字母移动到另一组。或者有一层半透明

# php - wamp 上几个长时间运行的 php 脚本

> ID：12579070
> 
> 赞同：0
> 
> 时间：2012-09-25T08:33:26.260
> 
> 标签：php, wamp

为什么我不能在本地主机环境中并行运行两个或多个脚本？他们只是简单地停止而没有任何错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:51:13.807

tcp 连接有连接超时。在没有数据的空闲时间后，连接关闭，因此脚本停止。

php 有额外的 time_limits 以防止高 cpu 使用率。但这个限制与实际秒数没有直接关系，而是与使用 cpu 周期有关。

对于长时间运行的脚本，最好从命令行而不是浏览器运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:47:08.613

写`set_time_limit(0)`在你的php页面顶部，然后再试一次

试试下面的链接：

[PHP set_time_limit 限制](https://stackoverflow.com/questions/7518439/php-set-time-limit-limit)

[PHP set_time_limit 无效](https://stackoverflow.com/questions/6193104/php-set-time-limit-no-effect)

可能对你有帮助。

# asp.net - 为什么 iPad 不能下载 mp3 文件？

> ID：12579071
> 
> 赞同：0
> 
> 时间：2012-09-25T08:33:26.337
> 
> 标签：asp.net

我有电子商务网站并在其中上传了一些mp3文件，客户可以将mp3文件下载到PC上，但是当他们尝试将它们下载到iPad时，iPad无法下载它们。

下载文件的代码如下

```
public static void DownloadAudio(string url)
{
    if (HttpContext.Current.CurrentHandler is basePage)
    {

        HttpContext.Current.Response.Clear();
        string fileDiskPath = HttpContext.Current.Server.MapPath(url);
        FileInfo fileInfo = new FileInfo(fileDiskPath);

        HttpContext.Current.Response.ContentType = "audio/mp3";
        HttpContext.Current.Response.AddHeader("Content-Disposition", String.Format("attachment;filename={0}", fileInfo.Name));
        HttpContext.Current.Response.AddHeader("Content-Length", fileInfo.Length.ToString());
        HttpContext.Current.Response.WriteFile(fileDiskPath);
        //HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.End();

    }
    else
    {
        throw new NotSupportedException("Note: This method is not supporting user controls.  Consider supporting user controls by getting the parent page from user control.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:38:55.213

iPad 上的 Safari 浏览器只允许用户下载他们安装了可以处理它的应用程序的文件——默认情况下，没有内置的 iOS 应用程序可以处理任意下载或 MP3 文件。

如果您的访问者安装了 GoodReader 之类的应用程序，则 Mobile Safari 将提示用户在 GoodReader 中打开下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:38:39.647

尝试使用官方 MIME 类型。

```
HttpContext.Current.Response.ContentType = "audio/mpeg"; 
```

# actionscript-3 - AS3 AIR TextField 故障（在 TweenMax.to 上闪烁）

> ID：12579072
> 
> 赞同：0
> 
> 时间：2012-09-25T08:33:28.527
> 
> 标签：actionscript-3, flash, air, flash-builder

嘿，我想知道是否有其他人遇到这个问题或可以建议黑客？每当我做太多事情时，比如舞台上有太多剪辑，然后有太多 TweenMax 补间，我的 TextField 对象就会开始闪烁，有点像他们一遍又一遍地渲染。它看起来很糟糕，我想知道是否有一些已知的解决方法？它似乎只发生在文本中，所以我想知道是否可以在第一次绘制后以某种方式将其渲染为位图？

如果我同时触发太多补间，这种情况发生得更早。现在它正在发生，因为我向包含对象添加了过滤器。似乎如果事情变得过于密集，那么文本字段就会开始闪烁。在 Mac Air 和 Mac Pro 上都进行了测试。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:48:37.240

您可以尝试`cacheAsBitmap`在您的 TextFields 上进行设置。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)。

有一些线程（比如这个[http://www.kirupa.com/forum/showthread.php?345755-TextField-with-CSS-and-cacheAsBitmap](http://www.kirupa.com/forum/showthread.php?345755-TextField-with-CSS-and-cacheAsBitmap)）表明 CSS 格式和嵌入字体有点混乱，因此，您可能必须尝试添加内容、设置格式和缓存它们的顺序。

# web-services - 是否对 REST API 使用单独的控制器的建议？

> ID：12579074
> 
> 赞同：6
> 
> 时间：2012-09-25T08:33:40.073
> 
> 标签：web-services, rest, grails, groovy

我们正在为我们的应用程序计划一个 REST api，并试图决定是否应该为 REST 功能实现单独的控制器。

我们可以在我们当前的控制器中使用 withFormat{}，但在不同的控制器中分离 REST 功能感觉更清晰。

通过这种方式，我们可以将我们的 API 与当前控制器分开构建，我们甚至可以将 REST 控制器带入另一个应用程序等。

对这个主题有什么想法吗？任何关于最佳实践的实际经验是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:54:47.013

我们最近面临同样的决定，我们决定为 REST API 使用单独的控制器。

单独控制器的优点包括*更清晰/更清晰*的控制器操作以及以后支持不同版本的 REST API 的可能性。

我们还希望保持在单独的服务器实例上托管 REST API 的选项处于打开状态。这些服务器将使用完全相同的 .war，但[功能切换](http://martinfowler.com/bliki/FeatureToggle.html)的配置设置不同。

单独控制器的一个缺点可能是控制器代码的干燥性。尽管这应该是有限的，但由于恕我直言，您应该使控制器尽可能薄，并将共享逻辑提取到 Grails 服务或帮助程序类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:01:01.700

我很快就会使用 grails，但到目前为止我还没有什么经验。但是在我工作的 Web 应用程序中，我们总是将 Web 服务与控制器代码分开。我们还将 REST 与 SOAP 分开。他们的常用方法将在服务层中。确实，感觉更干净。我们不必在`if`方法中插入很多 s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:05:19.367

对于给定的资源，我会使用一个控制器，该控制器基于上下文（接收或请求的媒体类型——SOAP、JSON、XML 等）与服务层接口。这样，你就有了一个真正**统一的资源标识符**，可以接受并返回各种媒体类型，控制器不需要知道用户想要对什么资源执行什么方法以及涉及什么媒体类型。

例如，服务层可能返回具有诸如“toXml”、“toSoap”或“toJson”等方法的对象。然后，您可以只要求服务层执行任何操作，并在请求的媒体类型上使用 switch 语句来返回请求的信息，或者默认情况下抛出 406 Not Acceptable 状态代码。对于不安全或幂等事务，对象可能具有给定媒体类型的构造函数或工厂方法，然后您只需要求服务层对该对象执行任何操作。

# mysql - MySql 查询选择复杂的 max()

> ID：12579081
> 
> 赞同：2
> 
> 时间：2012-09-25T08:34:02.070
> 
> 标签：mysql, database, max, statements

我有这些记录

![在此处输入图像描述](../Images/7c1934af5472d4d5081f42f322c89916.png)

我想要的是在 balance 中找到最大值并使用关联的名称检索它（我有外键 userid==balanceID），例如在这种情况下它将是“name2 | 2000”。这里有任何Mysql'ist可以告诉我如何实现这一目标吗？

我尝试了类似的东西

```
SELECT MAX(b.balance), i.name 
from balance b, usr i 
WHERE i.userid=b.balanceID; 
```

但它没有为余额中的 MAX 值分配正确的名称。有什么帮助吗？；]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:36:24.243

您需要`GROUP BY`在查询中添加子句。

```
SELECT   MAX(b.balance) as Maximum_Balance, i.name 
FROM     balance b INNER JOIN usr i 
            ON i.userid=b.balanceID
GROUP BY i.name; 
```

或者也许你只想找到拥有最高`balance`权利的人？

```
SELECT  b.balance  as Maximum_Balance, i.name 
FROM     balance b INNER JOIN usr i 
            ON i.userid=b.balanceID
WHERE   b.balance = (SELECT MAX(balance) FROM balance) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/52007/1)

# android - Android：将图像以其原始大小保存在 SD 卡上

> ID：12579084
> 
> 赞同：0
> 
> 时间：2012-09-25T08:34:08.997
> 
> 标签：android, camera, storage

当我从相机（从设备主屏幕）捕获图像并检查 SD 卡上的图像大小时，它显示在 300-500 Kb 之间。

但是当我使用相机意图在我的应用程序中捕获图像并将其保存在 SD 卡上（在新文件夹中）时，它显示的图像大小在 5-10 Kb 之间。

这是我在 onActivityResult 中拍照后用来将图像保存在 SD 卡上的代码：

```
Bitmap bit = (Bitmap) data.getExtras().get("data");
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bit.compress(Bitmap.CompressFormat.JPEG, 100, bao);
byte[] ba = bao.toByteArray();
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "My - Images");
File f = new File(imagesFolder, "test.jpg");
f.createNewFile();
FileOutputStream fo = new FileOutputStream(f);
fo.write(ba);
fo.flush();
fo.close(); 
```

如何将其保存为原始大小的图像（300-500 Kb）？

有没有办法在我将图像保存到 SD 卡之前获取图像大小？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:03:31.587

您正在使用以下内容来压缩您收到的位图对象：

```
bit.compress(Bitmap.CompressFormat.JPEG, 100, bao); 
```

这就是您的位图以压缩格式存储的原因。

此外，您可以使用`bit.getHeight()`and`bit.getWidth()`来获取位图的尺寸。您可以使用`bit.getByteCount()`来获取位图的实际大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:33:57.727

检查此处接受的答案，希望它对您有用

[Android相机意图：如何获得全尺寸照片？](https://stackoverflow.com/questions/6448856/android-camera-intent-how-to-get-full-sized-photo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:09:45.807

首先尝试使用下面的代码找出图片的大小

```
Camera mCamera = null;
Camera.Parameters camParams = mCamera.getParameters();
Size camSize = camParams.getPictureSize(); 
```

如果你得到的图片大小是5-10 KB，那么你的代码没有问题，你可能需要重新访问你的相机参数，看看你设置了什么质量。

# vb.net - VB.NET在实现接口时调整自动生成的代码

> ID：12579090
> 
> 赞同：3
> 
> 时间：2012-09-25T08:34:34.533
> 
> 标签：vb.net, visual-studio-2010, namespaces, code-generation

在`Implements IInterface`Visual Studio 生成用于实现所有方法、属性等的代码后按 enter 时。到目前为止，一切都很好......我的“问题”是它插入了太多代码：

```
Public Class A
    Implements IList(Of String)

    Public Sub Add(item As String) Implements System.Collections.Generic.ICollection(Of String).Add

    End Sub

    ...

End Class 
```

我希望 VS 意识到我`Import System.Collections.Generic`在文件的顶部有一个，因此它可以省略命名空间。

在上面的例子中，`System.Collections.Generic.ICollection(Of String).Add`应该只有 `ICollection(Of String).Add`.

如何实现这种行为？

**更新：你试过什么？**
没有什么。我不知道从哪里开始寻找，我所有的谷歌搜索都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T00:22:30.350

尝试安装 Roslyn 预览版（可在[http://roslyn.codeplex.com](http://roslyn.codeplex.com)获得）我相信它应该足够聪明以不包含额外的命名空间信息，或者立即调出 QuickFix 选项以删除无关代码的所有实例.

# c++ - QSharedData 和继承

> ID：12579091
> 
> 赞同：5
> 
> 时间：2012-09-25T08:34:37.323
> 
> 标签：c++, qt, reference-counting, qshareddata

我正在尝试在使用`QSharedData`. 这个想法很简单，会有许多不同的数据类型，每一种都将派生自基本抽象类。我想用它们`QSharedData`来存储实际数据，但是每个派生类都将存储不同的数据。我现在正在尝试制作最基本的示例，并且遇到了一些麻烦。

假设这些是我的基本纯虚拟类：

```
class cAbstractData: public QSharedData
{
public:
    cAbstractData(){ }
    virtual int type() = 0;
};

class cAbstractValue
{
public:
    cAbstractValue(){ }
    virtual int type() = 0;
protected:
    QSharedDataPointer<cAbstractData>data_;
}; 
```

现在假设我想创建一个表示单个值的类（作为一个简约的例子）。我`cAtomicValue`从基值类派生，我还派生一个数据类来保存值：

```
class cAtomicData:public cAbstractData
{
public:
    cAtomicData() { value_ = 0; }
    int type(){ return 1; }
    QVariant value_;//the actual value
};

class cAtomicValue:public cAbstractValue
{
public:
    cAtomicValue() { 
        data_ = new cAtomicData;//creating the data object.
    }
    int type(){ return 1; }
}; 
```

现在在这个阶段它工作得很好，在调试器中我可以看到正确的指针类型。但是现在我想添加一个设置和获取值的函数，我不明白该怎么做。我们以setter为例。要设置值，我们必须通过类的成员访问`value_`类`cAtomicData`的`data_`成员`cAtomicValue`。然而，由于`data_`持有一个基类指针（`cAbstractData`），我必须以`cAtomicData`某种方式将它转换为正确的类型（）。我试过这样做：

```
template<class T> void set( T value )
{
    static_cast<cAtomicData*>(data_.data())->value_ = value;
} 
```

它显然不起作用，因为它调用`detach()`并尝试复制基类，因为基类是纯虚拟的，所以它不能。然后我尝试投射指针本身：

```
static_cast<cAtomicData*>(data_)->value_ = value; 
```

但我遇到了一个`invalid static_cast ...`错误。

我该怎么做，我什至是从根本上以正确的方式做的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:14:22.457

您可以切换到[`QExplicitlySharedDataPointer`](http://qt-project.org/doc/qt-4.8/qexplicitlyshareddatapointer.html)而不是[`QSharedDataPointer`](http://qt-project.org/doc/qt-4.8/qshareddatapointer.html). `detach()`每当您尝试获取指向对象的非常量指针时，都不会调用这种方式`cAbstractData`，其中包括将`QExplicitlySharedDataPointer<cAbstractData>`对象转换为`QExplicitlySharedDataPointer<cAtomicData>`对象。但是，如果要使用写时复制，则`detach()`每次要修改时都需要手动调用。`cAbstractData`也许您可以编写一个包装类来为您执行分离。

这种方法可能比 using 更受欢迎[`QSharedPointer`](http://qt-project.org/doc/qt-4.8/qsharedpointer.html)，因为 a`QExplicitlySharedDataPointer`与普通指针大小相同（因此保持二进制兼容性），而 a`QSharedPointer`是大小的两倍（请参阅[此博客条目](http://blog.qt.digia.com/2009/08/25/count-with-me-how-many-smart-pointer-classes-does-qt-have/)）。

**编辑：**请注意，从`QExplicitlySharedDataPointer<cAbstractData>`to的转换`QExplicitlySharedDataPointer<cAtomicData>`是静态的，因此您必须保证实际引用的对象是该类型`cAtomicData`（或子类）的对象，或者使用指针时的行为可能是未定义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-21T10:56:28.617

我在我的应用程序中遇到了类似的问题，这就是我解决它的方法。我有一个`BaseClass`使用 Pimpl 成语实现并`QExplicitlySharedDataPointer`指向`BaseClassPrivate`. 此类`DerivedClass`由其私有成员继承的`DerivedClassPrivate`继承`BaseClassPrivate`。

`BaseClassPrivate`有一个名为的浮点成员`baseParam`和`DerivedClassPrivate`另一个名为的浮点参数`derivedParam`。

我通过以下方式解决了这个问题：

1.  定义受保护的构造函数`BaseClass(BaseClassPrivate* p)`

    这用于使用指向的指针实例化新的派生类`DerivedClassPrivate`

2.  在和中定义一个虚`clone()`方法`BaseClassPrivate``DerivedClassPrivate`

    每当需要深度复制时，都会调用此方法来正确复制私有类。因此，我们不调用“QExplicitlySharedDataPointer::detach()”，而是检查 QSharedData 引用计数器是否大于 1，然后调用 clone。请注意 QSharedData::ref 不在文档中，因此它可以随时更改（即使它似乎不太可能很快发生）。

3.  静态转换 d 指针`DerivedClass`

    `dCasted()`我发现定义一个私有函数很方便。

为了测试这一点，在and`foo()`中引入了虚函数，它返回或相应地返回。`BaseClassPrivate``DerivedClassPrivate``baseParam``derivedParam`

这是代码：

基类.h

```
class BaseClass
{
public:
    BaseClass() : d(new BaseClassPrivate()) {}
    BaseClass(const BaseClass& other) : d(other.d) {}
    BaseClass& operator =(const BaseClass& other) {d = other.d; return *this;}
    virtual ~BaseClass() {}

    float baseParam() const {return d->baseParam;}
    void setBaseParam(float value) {
        detach(); // instead of calling d.detach()
        d->baseParam = value;
    }

    float foo() const {return d->foo();}

protected:
    BaseClass(BaseClassPrivate* p) : d(p) {}
    void detach() { 
        // if there's only one reference to d, no need to clone.
        if (!d || d->ref == 1) return;  // WARNING : d->ref is not in the official Qt documentation !!!
        d = d->clone();
    }
    QExplicitlySharedDataPointer<BaseClassPrivate> d;
}; 
```

派生类.h

```
class DerivedClass : public BaseClass
{
public:
    DerivedClass() : BaseClass(new DerivedClassPrivate()) {}

    float derivedParam() const {return dCasted()->derivedParam;}
    void setDerivedParam(float value) {
        detach();  // instead of calling d.detach();
        dCasted()->derivedParam = value;
    }

private:
    DerivedClassPrivate* dCasted() const {return static_cast<DerivedDataPrivate*>(d.data());}
}; 
```

BaseClassPrivate.h

```
class BaseClassPrivate : public QSharedData
{
public:
    BaseClassPrivate() : QSharedData(), baseParam(0.0) {}
    BaseClassPrivate(const BaseClassPrivate& other) : 
        QSharedData(other), baseParam(other.baseParam) {}
    virtual ~BaseClassPrivate() {}

    float baseParam;
    virtual float foo() const {return baseParam;}

    virtual BaseClassPrivate* clone() const {
        return new BaseClassPrivate(*this);
    }
}; 
```

DerivedClassPrivate.h

```
class DerivedClassPrivate : public BaseClassPrivate
{
public:
    DerivedClassPrivate() : BaseClassPrivate(), derivedParam(0.0) {}
    DerivedClassPrivate(const DerivedClassPrivate& other) : 
        BaseClassPrivate(other), derivedParam(other.derivedParam) {}

    float derivedParam;
    virtual float foo() const {return derivedParam;}

    virtual BaseClassPrivate* clone() const {
        return new DerivedClassPrivate(*this);
    }
}; 
```

现在，我们可以执行以下操作：

调用虚函数：

```
DerivedClass derived;
derived.setDerivedParam(1.0);
QCOMPARE(derived.foo(), 1.0);   // proving that DerivedClassPrivate::foo() is called 
```

`DerivedClass`正确地从到复制`BaseClass`：

```
BaseClass baseCopy = derived;   
QCOMPARE(baseCopy.foo(), 1.0);   // proving that DerivedClassPrivate::foo() is called  
                                 // even after copying to a BaseClass 
```

复制`BaseClass`到`BaseClass`尊重原始类，并正确地进行写时复制：

```
BaseClass bbCopy(baseCopy);     // make a second copy to another BaseClass
QCOMPARE(bbCopy.foo(), 1.0);    // still calling DerivedClassPrivate::foo()

// copy-on-write
baseCopy.setBaseParam(2.0);     // this calls the virtual DerivedClassPrivate::clone()
                                // even when called from a BaseClass
QCOMPARE(baseCopy.baseParam(), 2.0);  // verify the value is entered correctly
QCOMPARE(bbCopy.baseParam(), 1.0);    // detach is performed correctly, bbCopy is
                                      // unchanged
QCOMPARE(baseCopy.foo(), 1.0);  // baseCopy is still a DerivedClass even after detaching 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:23:26.410

我看不到任何方法可以实现您在这里尝试的目标。正如您所发现的，`QSharedDataPointer`需要根据它包含的实际类型进行模板化。

您可以使您的基类成为模板，例如

```
template<class T>
class cAbstractValue
{
public:
    cAbstractValue(){ }
    virtual int type() = 0;
protected:
    QSharedDataPointer<T> data_;
}; 
```

但我不确定我看到你会从中得到什么好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-09T06:51:21.163

从 Qt 4.5 开始，您可以为您的类型实现该[`::clone()`功能：](http://doc.qt.io/qt-5/qshareddatapointer.html#clone)

> 提供此功能是为了您可以为自己的类型支持“虚拟复制构造函数”。为此，您应该为您自己的类型声明此函数的模板特化，如下例所示：
> 
> ```
> template<>
> EmployeeData *QSharedDataPointer<EmployeeData>::clone()
> {
>     return d->clone();
> } 
> ```
> 
> 在上面的示例中，clone() 函数的模板特化调用了 EmployeeData::clone() 虚函数。从 EmployeeData 派生的类可以覆盖该函数并返回正确的多态类型。
> 
> 这个函数是在 Qt 4.5 中引入的。

我已经这样做了，它有效。

您的抽象基类和所有派生类都需要实现一个`virtual BaseClass* clone()`您要从中调用的函数，`QSharedDataPointer::clone()`或者您需要一些其他方法（例如工厂）来创建一个与`d`.

# java - 获取两个 DateTime 之间的差异作为 DateTime 对象？

> ID：12579093
> 
> 赞同：3
> 
> 时间：2012-09-25T08:34:37.030
> 
> 标签：java, jodatime

我想将两个 DateTime 对象之间的区别作为 DateTime 而不是 Period 或类似的东西。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:36:56.673

你不能，因为它没有意义。

2012 年 9 月 25 日和 2012 年 12 月 25 日有什么区别？这是两个月，或约 60 天（我没有准确检查过）——但它肯定不是“1970 年 2 月 20 日”或类似的东西。

如果您发现自己*想要*差异化`DateTime`，这意味着您的设计中的某些东西搞砸了，您应该重新审视它。如果您无法准确确定问题出在哪里，您可以向我们提供更多信息，我们也许能够确定类型错误的位置，但从根本上说您所要求的*将*不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:12:44.560

正如其他人所说，不确定你为什么想要这个，但下面的代码会给你两个日期之间的天数，如果你想要这个数字加上 1970 日期

```
@Test
public void test() {
    DateTime d1 = new DateTime(2011, 1, 1, 0, 0);
    DateTime d2 = new DateTime(2011, 2, 1, 0, 0);
    int days = Days.daysBetween(d1, d2).getDays();
    assertEquals(31, days);

    DateTime dateTime = new DateTime(new Date(0), DateTimeZone.UTC).plusDays(days);
    assertEquals(new DateTime(1970, 2, 1, 0, 0, 0, DateTimeZone.UTC), dateTime);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:49:54.133

如果我理解您的问题，您可以将日历类方法[compareTo](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#compareTo%28java.util.Calendar%29)用于表示两次之间的毫秒数的 int 值。

**public int compareTo(Calendar anotherCalendar)** 比较两个 Calendar 对象表示的时间值（从 Epoch 开始的毫秒偏移量）。

**指定者**：接口 Comparable 中的 compareTo

**参数**： anotherCalendar - 要比较的日历。

**返回**：
如果参数表示的时间等于此日历表示的时间，则值为 0；
如果此日历的时间早于参数表示的时间，则值小于 0；
如果此日历的时间在参数表示的时间之后，则值大于 0。

**抛出**： NullPointerException - 如果指定的 Calendar 为 null。IllegalArgumentException - 如果由于任何无效的日历值而无法获取指定 Calendar 对象的时间值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:52:43.340

您始终可以使用 DateFormat 和 Calendar。计算两个日期之间的差异很容易。

见和。[`DateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)_[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

# .net - 具有现代 Windows UI 的 DirectX 的最佳选择

> ID：12579096
> 
> 赞同：2
> 
> 时间：2012-09-25T08:35:06.147
> 
> 标签：.net, graphics, directx

我最近一直在为一个新项目做这样的研究，结果比开始之前更加困惑。我知道已经完成了类似的问题，但我似乎找不到任何关于我需要做什么的好信息。我希望这里的人能够提供一些建议。

我需要将 DirectX 嵌入到具有现代 Windows UI（工具栏、菜单、功能区，如果可能）的 .NET 应用程序中。我已经在 XNA 中对应用程序的 DirectX 部分进行了原型验证，以进行概念验证，但我不需要坚持下去，重写不是问题。利用 WPF 的 UI 优势会很好，但 .NET 中的任何东西都是一种选择（WinForms 等）。

该应用程序不会做任何非常复杂的事情：

```
- It loads of a bitmap image into a texture (or a few textures as the image is often quite large)
- Renders to off screen target (applying a pixel shader based on another texture) and gets the result back as a texture
- Renders to the window with another pixel shader applied
- Pan and zoom of resulting image 
```

问题是我所有的在线研究都打折选项，但没有提出替代方案。例如，我读过：

```
- Managed DirectX in .NET is now unsupported
- Embedded my XNA application in Winforms or WPF isn't recommended
- WPF supports pixel shaders but doesn't seem to get much love for performance 
```

将 DirectX 嵌入现代 Windows 应用程序（如果存在的话）的标准是什么？我们不是唯一想在 .NET 中这样做的人。

人们会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:17:55.897

有两个库会有所帮助：

*   [http://www.slimdx.org/](http://www.slimdx.org/)
*   [http://sharpdx.org/](http://sharpdx.org/)

两者都非常完整，还有一些带有 WPF 互操作的示例。

# c# - .NET GridView 行在回发时为空

> ID：12579099
> 
> 赞同：1
> 
> 时间：2012-09-25T08:35:19.907
> 
> 标签：c#, .net, vb.net, gridview, viewstate

在回发后填充 GridView 的行后，我很难对其进行迭代。

总之，有两个下拉列表确定应在 GridView 中显示的数据。该页面最初仅加载两个下拉列表，此阶段没有 GridView。从下拉列表中选择值后，用户通过按钮提交页面。然后后面的代码调用 db 以检索数据并将其绑定到 GridView。我设法让这个工作！

问题是 GridView 有一列，用户可以在其中编辑 itemtemplate 中保存的文本框中的值。如果用户更改文本框中的值并提交页面，当我尝试迭代 GridView 的行时，它告诉我没有要迭代的行。当我可以在前端看到可用的行和数据时，我很困惑为什么会发生这种情况。

但是，如果我们删除涉及用户选择下拉菜单的步骤并且在初始 page_load 上填充 GridView，我实际上可以遍历行。

因此，如果 GridView 绑定在按钮单击事件中，就好像 ViewState 没有保留回发之间的行数。

有人可以向我解释一下，这是怎么回事。

这是VB.NET中的代码：

```
Protected Sub Me_Load(ByVal sender As Object, ByVal e As EventArgs) _
Handles Me.Load

End Sub

Protected Sub BtnGetData_Click(ByVal sender As Object, ByVal e As EventArgs) _
Handles BtnGetData.Click

    Dim ddlFirstValue As Integer = DropDownListOne.SelectedValue
    Dim ddlSecondValue As Integer = DropDownListSecond.SelectedValue
    MyGridView.DataSource = GetData(ddlFirstValue, ddlSecondValue)
    MyGridView.DataBind()

End Sub

Protected Sub BtnSubmit_Click(ByVal sender As Object, ByVal e As EventArgs) _
Handles BtnSubmit.Click

    For Each row As GridViewRow In MyGridView.Rows 'this returning 0 rows
        'Do something
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:54:49.723

我*认为*我们可能需要更多数据来描述为什么在您的特定情况下会发生这种行为。例如，您*可能会*考虑发布您的 ASPX (XHTML) 文件，以便我们更好地了解您的具体情况。

虽然我*可能*不完全理解您的需求，但您想要的*似乎*是可能的。下面是我整理的一个人为的示例，以大致模拟*我*对您的情况的理解。

我提交的代码允许用户：

1.  打开带有空 GridView 的页面
2.  从下拉列表中选择权重过滤器（尚无回发）
3.  从另一个下拉列表中选择成本过滤器（尚无回发）
4.  按下获取数据按钮以填充 GridView
5.  在每个 GridView 行上的描述字段的文本框中键入信息
6.  点击提交按钮
7.  通过服务器端对文字控件的修改来观察用户的选择

由于处理发生在服务器上，我认为这段代码表明应该可以以规定的方式修改 GridView 并读取 GridView 的更改。

如果此代码没有描述您的情况，请添加评论，以便社区可以为您提供更好的帮助：

**ASPX 模拟文件**

```
<%@ Page Language="VB" AutoEventWireup="false" 
CodeFile="Default.aspx.vb" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>
    Demo of using DropDown Lists to Filter Data for 
    Editable DataGrid
    </title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Literal ID="theLiteral" runat="server" />
    </div>
    <br />
    <div>
        <asp:GridView ID="myGridView" runat="server" 
        AutoGenerateColumns="false" 
        DataKeyNames="weight, cost, Description">
            <Columns>               
                <asp:BoundField DataField="weight" HeaderText="Weight" /> 
                <asp:BoundField DataField="cost" HeaderText="Cost" /> 
                <asp:TemplateField HeaderText="Description">
                    <ItemTemplate>
                        <asp:TextBox runat="server" ID="descId"
                        Text='<%# Bind("Description") %>' />                          
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView><br />
        Get Items With Weight >=:<br />
        <asp:DropDownList ID="DropDownListOne" runat="server">
            <asp:ListItem Text="1" Value="1" />            
            <asp:ListItem Text="2" Value="2" />      
            <asp:ListItem Text="5" Value="5" />                  
        </asp:DropDownList><br />
        Get Items With Cost >=:<br />
        <asp:DropDownList ID="DropDownListSecond" runat="server">
            <asp:ListItem Text="1" Value="1" />            
            <asp:ListItem Text="5" Value="5" />      
            <asp:ListItem Text="51" Value="51" />    
            <asp:ListItem Text="101" Value="101" />                                
        </asp:DropDownList><br />
        <asp:Button ID="BtnGetData" runat="server" Text="Get Data" /><br />
        <asp:Button ID="BtnSubmit" runat="server" Text="Submit" /><br />
    </div>
    </form>
</body>
</html> 
```

**模拟文件背后的代码**

```
' Just some DataItem to stick in an IEnumerable Array to be 
' bound to CreativeInCode's MyGridView
public Class InventoryItem
    Public Sub New (
        ByVal iWeight As Integer, 
        ByVal iCost As Integer, 
        ByVal iDescription As String) 

        weight = iWeight
        cost = iCost
        description = iDescription
    End Sub

    ' Automatic VB.NET properties can be read about here:
    ' http://msdn.microsoft.com/en-us/library/dd293589.aspx
    Public Property weight As Integer
    Public Property cost As Integer
    Public Property description As String
End Class

' The code behind for Default.aspx starts here
Partial Class _Default
    Inherits System.Web.UI.Page

    ' Data to play with 
    Public storeItems As InventoryItem() = 
    {
        New InventoryItem(10, 20, "PaperWeight"), 
        New InventoryItem(1, 1, "Feather"), 
        New InventoryItem(2000, 20000, "Used SUV"), 
        New InventoryItem(3, 50, "Biology TextBook"), 
        New InventoryItem(1, 200, "Professional Isolation Headphones"), 
        New InventoryItem(1, 100, "Caviar (Does this Need to Be Refrigerated?)")
    }

    ' Function to simulate retrieval from DataBase
    Protected Function GetData( _ 
        ByVal weight As Integer, 
        ByVal cost As INteger
    ) As IEnumerable(Of InventoryItem)
        ' Example of LINQ can be found here
        ' http://msdn.microsoft.com/en-us/vstudio/bb688088.aspx
        ' I believe LINQ is the way of the future
        Dim returnValue As IEnumerable(Of InventoryItem) = 
            From items In storeItems
            Where (items.weight >= weight) AndAlso (items.cost >= cost)
            Select items
        Return returnValue
    End Function

     ' CreativeInCode's STuff starts here
    Protected Sub Me_Load(ByVal sender As Object, ByVal e As EventArgs) _ 
        Handles Me.Load 

    End Sub 

    Protected Sub BtnGetData_Click(ByVal sender As Object, ByVal e As EventArgs) _ 
        Handles BtnGetData.Click 

        Dim ddlFirstValue As Integer = DropDownListOne.SelectedValue 
        Dim ddlSecondValue As Integer = DropDownListSecond.SelectedValue                 
        MyGridView.DataSource = GetData(ddlFirstValue, ddlSecondValue) 
        myGridView.DataBind()

    End Sub 

    ''' <summary>
    ''' Made some modifications to CreativeInCode's function to 
    ''' dump the output to the user
    ''' </summary>                
    Protected Sub BtnSubmit_Click(ByVal sender As Object, ByVal e As EventArgs) _ 
        Handles BtnSubmit.Click 

        Dim outputToUser As String = _
            "The user put the following values in the GridView:<br />" 
        For Each row As GridViewRow In MyGridView.Rows 'this returning 0 rows 
            'Do something 

            ' This is just here to make a good place to set a 
            ' breakpoint            
            Dim weightStr As String = row.Cells(0).Text
            Dim costStr As String = row.Cells(1).Text
            Dim tbDescription As TextBox = row.FindControl("descId")
            Dim description As String = tbDescription.Text

            outputToUser &= 
                String.Format(
                    "weight={0}, cost={1}, description={2}<br />", _
                    weightStr, _ 
                    costStr, _
                    description
                )           
        Next 

        ' Show the user the changes she/he made to the GridView
        theLiteral.Text = outputToUser
    End Sub 
End Class 
```

# c++ - 如何使用多个键对 std::set 进行排序

> ID：12579102
> 
> 赞同：1
> 
> 时间：2012-09-25T08:35:36.233
> 
> 标签：c++, sorting, set

我需要根据多个键将一组复制到另一组。键用于共同维护集合中元素的唯一性和顺序。

我的课：

```
class LaneConnector {
public:

    const Lane* getLaneFrom() const {
        return From;
    }
    const Lane* getLaneTo() const {
        return To;
    }

private:

    Lane* From;
    Lane* To;
} 
```

我的函子：

```
struct MyLaneConectorSorter {
  bool operator() (const LaneConnector* rhs, const LaneConnector* lhs) const
  {

    const Lane* a = lhs->getLaneFrom();
    const Lane* b = rhs->getLaneFrom();

    bool key1 = a->getLaneID() < b->getLaneID();
    bool key2 = a->getLaneParent->ID() < b->getLaneParent->ID();
    bool key2 = a->getLaneParent->getParent->ID() < b->getLaneParent->getParent->ID(); 
    //remind you that I NEED the elements to be in ascending order of 
    //getLaneParent->getParent->ID() ,a->getLaneParent->ID() and then a->getLaneID()
    //duplicate elements are the ones which have all three keys same and need to be discarded 
    return (key1 && key2 && key3); //which dont seem to be working
  }
}; 
```

以及我的来源和来源集：

```
const std::set<LaneConnector*> src = ..... ; //the getter give me a const version
std::set<sim_mob::LaneConnector *, MyLaneConectorSorter> dest; 
```

以及我如何填写：

```
for(std::set<sim_mob::LaneConnector*>::iterator it = tempLC.begin(); it != tempLC.end(); it++)
{
    dest.insert(*it);//I know I can insert it right at the time of declaration, but keep it like this for now...please 
} 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:52:06.760

由于`operator<`正确进行多项测试相当困难，因此我提倡[使用我的方法`tuple`](https://stackoverflow.com/q/6218812/500104)（在这种情况下使用`make_tuple`而不是`tie`因为我们正在处理从函数返回的临时对象）：

```
#include <tuple>

struct MyLaneConectorSorter {
  bool operator() (const LaneConnector* lhs, const LaneConnector* rhs) const
  {
    const Lane* a = lhs->getLaneFrom();
    const Lane* b = rhs->getLaneFrom();
    auto const* pa = a->getLaneParent();
    auto const* pb = b->getLaneParent();

    return std::make_tuple(a->getLaneID(), pa->ID(), pa->getParent()->ID()) < 
           std::make_tuple(b->getLaneID(), pb->ID(), pb->getParent()->ID())
} 
```

这应该可以工作，如果您的编译器还没有提供它们，您也可以从 Boost获取`tuple`和获取它们。`make_tuple`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:41:44.183

你需要优先考虑你的关键字段比较......只有当最重要的字段相等时，你才会比较第二个最重要的 - 如果它相等，那么你比较第三个最重要的等等。一旦出现不等式，你就会返回正确或错误。所以，它不是一个`&&`操作，它应该是`? :`一个`if`-`else`链，如：

```
return lhs.key1 < rhs.key1 ? true :
       rhs.key1 < lhs.key1 ? false :
       lhs.key2 < rhs.key2 ? true :
       rhs.key2 < lhs.key2 ? false :
       ...
       false; 
```

为了使集合正确运行，您必须确保键永远不会相等 - 以便`false`永远不会实际使用 last 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T08:49:10.263

如果要比较三个成员 foo、bar 和 baz，这是比较它们的常用方法：

```
return lhs.foo < rhs.foo
    || lhs.foo == rhs.foo && (lhs.bar < rhs.bar
                           || lhs.bar == rhs.bar && lhs.baz < rhs.baz); 
```

你看到图案了吗？;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T08:52:57.863

你`class MyLaneConnectionSorter`有一个缺陷。

`std::set`需要一个可以对元素进行排序的比较类。因此，您的比较函数必须提供类似于`less`仿函数 or的行为`operator<`，即`a < b`or `a > b`(which is `b < a`) or `a == b`(which is `!(a < b) && !(a > b)`)

如果我们采用您的比较函数，它将认为车道 (6, 5, 4) 和 (7, 3, 4) （格式为 (PPID, PID, ID)）相等，因为两者都不小于另一个。所以你需要像这样比较：

```
if (a->getLaneParent->getParent->ID() < b->getLaneParent->getParent->ID()) return true;
else if (a->getLaneParent->getParent->ID() > b->getLaneParent->getParent->ID()) return false;
else {
    if (a->getLaneParent->ID() < b->getLaneParent->ID()) return true;
    else if (a->getLaneParent->ID() > b->getLaneParent->ID()) return false;
    else {
        return (a->getLaneID() < b->getLaneID());
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T08:42:32.200

我无法理解您的排序规则，但如果关系是简单的子排序，则代码应如下所示：

```
if (a->getLaneID() < b->getLaneID())
  return true;
else if (a->getLaneID() == b->getLaneID())
{
  if (a->getLaneParent->ID() < b->getLaneParent->ID())
    return true;
  // etc...
}
return false; 
```

# ios - GMGridView 的单元格突出显示

> ID：12579110
> 
> 赞同：1
> 
> 时间：2012-09-25T08:35:59.530
> 
> 标签：ios, gmgridview, gmgridviewcell

我正在使用[`GMGridView`](https://github.com/gmoledina/GMGridView)带有子类`UIView`的`contentView`单元格。这些被分配在

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index 
```

现在我希望单元格有一个突出显示，类似于`UIButton`. 这意味着有一个稍微不透明的较暗覆盖层。我只是不知道我必须在哪里分配突出显示。

我看到它`GMGridViewCell`有一个名为 的属性`highlighted`，它指示单元格是否突出显示。在上述方法中将其设置为`cell.highlighted = YES;`不会改变单元格外观的任何内容。

在`GMGridView`网站上的描述中它说

> **特点 - 一般：**
> 
> > *   单元格突出显示支持

所以，应该有办法...

谁能告诉我，突出显示应该如何分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:55:08.633

当这种情况发生时，我讨厌它。刚刚找到答案。

显然，突出显示将应用于 的子视图`cell.contentView`，这可以[在提交](https://github.com/futuretap/GMGridView/commit/0135d17f6938b6b458989f5fb81f001a67e94c30)中看到。

触摸时单元格将被设置为突出显示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.highlighted = YES;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.highlighted = NO;
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.highlighted = NO;
} 
```

然后子视图的高亮状态将被激活。

```
-(void)setHighlighted:(BOOL)aHighlighted {
    highlighted = aHighlighted;

    [self.contentView recursiveEnumerateSubviewsUsingBlock:^(UIView *view, BOOL *stop) {
        if ([view respondsToSelector:@selector(setHighlighted:)]) {
            [(UIControl*)view setHighlighted:highlighted];
        }
    }];
} 
```

因此，要实现单元格突出显示，我只需要在`UIImageView`自定义单元格视图的部分上方添加一个透明层。希望这对任何人都有帮助。

# r - R：矩阵上的kmeans（100x21）

> ID：12579114
> 
> 赞同：0
> 
> 时间：2012-09-25T08:36:18.453
> 
> 标签：r, matrix, k-means

我对 R 中的 Kmeans 有疑问。我有一个像变量 data_file 这样的数据框。我的问题是，如何对我的数据执行 kmeans？如果有人有任何建议，我们非常欢迎。谢谢！

```
> data_file

                    WT_Sham WT_Sham.1 WT_Sham.2 WT_Sham.3 WT_Sham.4 WT_Sham.5 WT_CSD WT_CSD.1 WT_CSD.2 WT_CSD.3 RQ_Sham RQ_Sham.1 RQ_Sham.2 RQ_Sham.3 RQ_Sham.4 RQ_Sham.5 RQ_CSD RQ_CSD.1 RQ_CSD.2 RQ_CSD.3
ENSMUSG00000002012     581      1221       681      1789       376       787   1009      480      992     1004     582       896      1319      1200       663      1089   1003      821      807      696
ENSMUSG00000028182       2        11         3         8         2         8      1        3       12        3       1         5        35        13         0         1      8       13        5        1
ENSMUSG00000002017     382       698       555      1290       892       999    546      245      689      539     367       548       927       905       853       623    823      722      494      505
ENSMUSG00000028184     381       666       443       763       491       655    621      376      379      353     382       306       878       690      1787       257    776      636      240      564
ENSMUSG00000002015     402       956       533      1728      1224      1129    668      383      930      355     481       704      1611      1458         0       345   1199     1017      653      917
ENSMUSG00000028180     778      2158      1506      3606      2489      3128   1573     1030     1962      956    1093      1410      3702      3122         1      1433   2535     2125     1242     1825 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:13:01.923

您是否尝试过内置功能`kmeans`？

```
kmeans(USArrests, centers=3) 
```

`USArrests`只是R自带的一个数据集。

* * *

如果你谷歌`R kmeans`你会得到更多的信息。

# c# - 如何使用 WeifenLuo DockPanel Suite 拒绝要拖动的面板

> ID：12579126
> 
> 赞同：2
> 
> 时间：2012-09-25T08:37:00.260
> 
> 标签：c#, winforms, dockpanel-suite

我已经开始使用 WeifenLuo 的 DockPanel 套件，这似乎很有帮助。无论如何，这是一个我无法解决的问题：我需要创建一个类似 VS 的 UI - 它应该包含一个“工具面板”，停靠在父窗口的左侧，以及停靠在中心的其他一些子窗口。很简单，是吗？

但是如何使“工具面板”永远不应该关闭或移动/从它的位置拖动 - 只隐藏/显示或改变大小？

我发现如何拒绝被关闭 - 通过 FormClosing 事件 - 我知道很容易 - 但剩下的呢？有人知道吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:14:54.267

您需要“锁定”工具面板窗口的 PanelPane：

```
toolPanel.PanelPane.AllowDockDragAndDrop = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:35:55.810

`this.AllowEndUserDocking``this`DockContent在哪里对我有用。也许以后的版本？

# parsing - Tika 并使用行和列跨度解析数据

> ID：12579128
> 
> 赞同：2
> 
> 时间：2012-09-25T08:37:02.770
> 
> 标签：parsing, xhtml, apache-tika

我在过去 2 天里一直在寻找这个，但很难找到。但这里的问题是，当您在 google 中使用任何单词搜索 col spans 时，不同的和变体的文档将显示不相关。

问题：是否可以使用 tika apache 解析器从不同类型的文档中检索或获取解析数据，其中 col 跨度和行跨度为 xhtml。如果是，是否有教程或任何文件可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:26:18.857

不幸的是，开箱即用。

您需要扩展用于解析电子表格的基本库，以将此信息输入到 Tika 输出中。

另一种方法是使用[EPPlus](http://epplus.codeplex.com/)

# mysql - 复制文件后MySQL表不存在

> ID：12579133
> 
> 赞同：2
> 
> 时间：2012-09-25T08:37:31.597
> 
> 标签：mysql, linux

我已将我的数据库文件夹从 windows 系统复制`C:/wamp/bin/mysql/mysql.XX/data/database_name`到 linux 系统`/var/lib/mysql/database_name`

我已经通过终端连接到 mysql ，执行查询`show tables;`它显示数据库中的所有 tebles，但是当我执行`select * from table_name`或`desc table_name`它显示错误时`ERROR 1146 (42S02): Table 'database_name.table_name' doesn't exist`。

有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-19T11:00:55.127

我有同样的问题，通过将**ibdata1**从备份复制到**/var/lib/mysql**来解决。

我试图恢复整个数据库，不知道只有一张表会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:34:00.513

用于`mysqldump`复制数据库，**不复制二进制数据文件**。

当您手动复制二进制文件时，一些内部数据可能会不一致，例如，某些事务可能无法完成。

此外，如果您将数据文件移动到不同的 mysql 版本/存储引擎版本，引擎可能无法读取新/以前版本格式的文件。

此外，系统编码可能不同，因此内部数据表示可能不同，并且在 Windows 和 Linux 上完全不兼容。

# java - 如何使用 JAVA SDK 从 Dropboxapi 获取缩略图？

> ID：12579134
> 
> 赞同：2
> 
> 时间：2012-09-25T08:37:37.230
> 
> 标签：java, thumbnails, dropbox, dropbox-api

我正在使用 JAVA SDK 处理 Dropbox API。我尝试通过 API 获取 Dropbox 帐户中每个图像的缩略图。老实说，在我读完课程之后，他们只是提供了对初学者来说不够有用的描述。我这样开始我的代码

```
public void getThumbnails() throws DropboxException{

    DropboxInputStream dis = api.getThumbnailStream("/Koala.jpg", ThumbSize.ICON_256x256, ThumbFormat.JPEG);

} 
```

我不明白的是：

1.  我应该向客户端返回一些东西以显示我从 DropboxAPI 获得的缩略图，但我不知道我应该返回什么。也许是 DropboxInputStream？
2.  如何从 API 获取缩略图？我试图找到一天的示例或指南，但我找不到任何指南......

请有人指导我如何通过 Dropbox API 获取缩略图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:04:14.723

DropboxInputStream 只是一个 FilterInputStream 所以在你得到你写的输入流之后，你可以迭代输入流并读取它。

那么这只是你需要呈现它的方式的问题。您正在编写的是 Swing 应用程序吗？您如何显示该图像？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:59:56.583

您应该能够使用 ImageIO.read 读取图像

```
Image image = ImageIO.read(dis); 
```

[http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)

# c - 与 openssl 兼容的应用程序在 Visual Studio 2005 中编译时出现错误

> ID：12579135
> 
> 赞同：0
> 
> 时间：2012-09-25T08:37:51.760
> 
> 标签：c, visual-studio, openssl, wpa

我正在尝试构建 wpa_supplicant，它在 Visual Studio 2005 上引用 openssl 头文件 x509v3.h。而我正在构建编译器，点击 x509v3.h 头文件并发现大量错误。任何人都可以帮助我。

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(192)：错误 C2059：语法错误：'('

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(200)：错误 C2059：语法错误：“类型”

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(204)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(205)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(211)：错误 C2061：语法错误：标识符“GENERAL_NAME”

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(212)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(231)：错误 C2059：语法错误：'('

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(232)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(249)：错误 C2061：语法错误：标识符“DIST_POINT_NAME”

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(253)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(323)：错误 C2061：语法错误：标识符“GENERAL_NAME”

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(326)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(358)：错误 C2061：语法错误：标识符“DIST_POINT_NAME”

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(364)：错误 C2059：语法错误：'}'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(524)：错误 C2143：语法错误：在 '*' 之前缺少 '{'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(524)：错误 C2143：语法错误：在 '*' 之前缺少 ')'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(524)：错误 C2143：语法错误：在 '*' 之前缺少 '{'

1>D:\Interworking\wpa_supplicant-1.0.tar\wpa_supplicant-1.0\wpa_supplicant-1.0\src\tls\x509v3.h(524)：错误 C2059：语法错误：')'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:25:47.007

由于变量和结构变量的#define，这个问题得到了解决。

# svn - turtoise svn 设置用户权限

> ID：12579137
> 
> 赞同：0
> 
> 时间：2012-09-25T08:37:54.130
> 
> 标签：svn, rights

我的问题是如何为 SVN 中的分支设置一些用户权限？

例如，我使用了 SVN 中的文件夹 A，我已经签出了它，我的同事也是如此。但是我们只希望我们能够以读\写权限访问这个文件夹。

我没有 ssh 控制台访问权限。只有 web svn 视图。我可以从哪里以及如何管理用户权限？SVN - TortoiseSVN 1.7.7，内部版本 22907 - 32 位，2012/05/15 12:16:05

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:15:27.657

1.  TortoiseSVN 是**Subversion 客户端**，不能处理**Subversion 服务器**任务（用于存储库访问的 ACL）
2.  可用的解决方案取决于启用的 RA 层（file:/// svn:// 或 http:// 访问协议） - 你没有提到这个话题
3.  所有解决方案都要求您拥有服务器管理权限
4.  [SVN Book](http://svnbook.red-bean.com/)是有用的读物​​，至少[第 6 章](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.html)开始

# php - 获取服务器的 SPF 记录

> ID：12579139
> 
> 赞同：3
> 
> 时间：2012-09-25T08:37:59.840
> 
> 标签：php, extjs, dns, spf

当读取并进一步处理任何域的 SPF 记录时，我需要使用 PHP+ Ext JS 创建简单的代码。

我找到了像 [http://www.kitterman.com/spf/validate.html](http://www.kitterman.com/spf/validate.html)这样的网站 ，我可以在其中获得网站上的 SPF 记录。

但我需要在我的 PHP+JS 代码中使用此信息，我需要对其进行处理、显示和保存新的更新。

PHP JS中是否有任何命令可以让我获取SPF记录并保存它？

乌尔马斯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T08:45:10.830

SPF 是一个 txt DNS 记录，因此只需用于`dns_get_record ($hostname , DNS_TXT)`获取所有 txt 记录（它返回一个数组）并检查每个记录是否包含`v=spf1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T15:36:24.260

您应该考虑到 SPF 标准非常复杂，而且人们做错了很多事情。我建议您阅读更多内容，以确保您的实施涵盖了您需要的所有检查。

这是了解更多关于 SPF 的一个很好的资源： [http ://www.openspf.org/SPF_Record_Syntax](http://www.openspf.org/SPF_Record_Syntax)

这是技术文档： [https ://www.rfc-editor.org/rfc/rfc4408](https://www.rfc-editor.org/rfc/rfc4408)

它不仅仅是获取域的 TXT 记录。对于早于 5 的 PHP 版本，您可以`shell_exec("dig example.com TXT @nameserver");`在基于 unix 的系统上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-15T05:40:38.300

检查此代码。这可能对某人有帮助

```
<?php
include("util.php");
$exists = false;
$array = dns_get_record("amazon.com", DNS_ALL);
for ($i = 0; $i <= count($array) - 1; $i++) {
    $nestedarray = $array[$i];
    for ($j = 0; $j <= count($nestedarray) - 1; $j++) {
        if (array_key_exists("txt", $nestedarray)) {
            $str = $nestedarray['txt'];
            $search = "v=spf1";
            if (preg_match("/{$search}/i", $str)) {
                echo (prepareAPIResponse("success", $str, "found"));
                $exists = true;
                break;
            }
        }
    }
}
if (!$exists) {
    echo (prepareAPIResponse("error", null, "not found"));
}

function prepareAPIResponse($status='success', $data=null, $msg=null)
{
    header('content-type: application/json');
    return json_encode([
       'status'=>$status,
       'data'=>$data,
       'message'=>$msg
    ]);
} 
```

# sonarqube - 声纳默认端口不可用

> ID：12579140
> 
> 赞同：2
> 
> 时间：2012-09-25T08:38:03.080
> 
> 标签：sonarqube

我已经在我的机器上安装了声纳并启动了服务

我还配置了 sonar.properties 文件，如下所示：

```
# Listen host/port and context path (for example / or /sonar). Default values are  0.0.0.0:9000/.
#sonar.web.host:                           0.0.0.0
sonar.web.port:                            9300
#sonar.web.context:                        / 
```

但是当我尝试使用“http://xx.xx.xx.xx:9300/sonar”访问应用程序时

```
HTTP ERROR: 503
Problem accessing /. Reason: 

    SERVICE_UNAVAILABLE

--------------------------------------------------------------------------------
Powered by Jetty:// 
```

我还复制了 apache tomcat 的 webapps 目录下的 sonar.war 文件，然后当我尝试访问应用程序时出现以下错误

```
--------------------------------------------------------------------------------   
type     Status report 
message /sonar/ description The requested resource is not available.
-------------------------------------------------------------------------------- 
Apache Tomcat/7.0.30 
```

请有人可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:22:52.243

由于您没有在 Web 上下文中指定任何值，因此您应该尝试通过键入“http://xx.xx.xx.xx:9300”而不是“http://xx.xx.xx.xx”来访问 Sonar :9300/声纳"

# f# - F# typeprovider insert query with datacontext 中的“，”附近的语法不正确

> ID：12579141
> 
> 赞同：0
> 
> 时间：2012-09-25T08:38:06.777
> 
> 标签：f#, f#-3.0

我正在尝试通过 F# typeprovider datacontext 插入数据。我在数据库中有一个表`dbo.tbl_Location`，想通过以下简单查询插入数据。

```
let  InsertTaskDetails() = 
 dbSchema.GetDataContext().DataContext.ExecuteCommand("Insert into dbo.tbl_Location (LocationId,Location) Values (11, 'india')")
 dbSchema.GetDataContext().DataContext.SubmitChanges() 
```

但我收到错误：

> ',' 附近的语法不正确

当我在 SQL Server 2008 中运行相同的查询时，我无法理解发生了什么

```
Insert into dbo.tbl_Location (LocationId,Location) Values (11, 'india') 
```

它工作正常。`LocationId`是`int`类型，`Location`是`string`类型。

如果有人对此有想法，请告诉我我在哪里遗漏了这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:44:28.823

克雷格是对的。如果您调用`ExecuteCommand`的是实体框架 DataContext，则不能传入 T-SQL，因为实体框架 DataContext 只理解[实体 SQL](http://msdn.microsoft.com/en-us/library/bb387145.aspx)。

此外，当您像您一样直接执行命令时，无需调用`SubmitChanges`- 这是一件好事，因为您调用`SubmitChanges`的数据上下文实例与您调用的实例不同`ExecuteCommand`。`GetDataContext`每次调用它时都会创建一个实例。如果您想插入惯用的实体框架类型提供程序方式，它看起来更像这样：

```
type tbl_Location = dbSchema.ServiceTypes.tbl_Location

let insertTaskDetails () =
    use db = dbSchema.GetDataContext() // it's disposable!
    db.tbl_Locations.AddObject(tbl_Location(LocationId=11, Location="india"))
    db.DataContext.SaveChanges() |> ignore 
```

# c - C中的类型命名空间

> ID：12579142
> 
> 赞同：5
> 
> 时间：2012-09-25T08:38:21.727
> 
> 标签：c, struct, typedef, unions

我在 SO 中阅读了关于 C 中定义类型的不同命名空间的信息，例如，有一个用于 Structs 和 Unions 的命名空间以及一个用于 typedef 的命名空间。

命名空间是这个的确切名称吗？C中有多少个命名空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:56:46.863

见 6.2.3

来自[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

6.2.3 标识符的命名空间

```
If more than one declaration of a particular identifier is visible at
any point in a translation unit, the syntactic context disambiguates uses
that refer   to different entities.

 Thus, there are separate name spaces for various categories of identifiers,
as follows:
— label names (disambiguated by the syntax of the label declaration and use);

— the tags of structures, unions, and enumerations (disambiguated by 
 following any32) of the keywords struct, union, or enum);

— the members of structures or unions; each structure or union has a 
separate name space for its members (disambiguated by the type of the 
expression used to access themember via the . or -> operator);

— all other identifiers, called ordinary identifiers (declared in ordinary 
  declarators or as enumeration constants). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:56:42.557

我不确定“命名空间”是否是正确的词，但我想我知道你的意思。

你可以做

```
union name1 { int i; char c; };
struct name2 { int i; char c; };
enum name3 { A, B, C };
typedef int name4;
int name5; 
```

这里`name1`,`name2`和`name3`位于不同的“命名空间”中（我暂时保留这个词），因为它们不会相互冲突。

这意味着使用它们需要在它们的使用前加上相应的关键字：

```
struct name1 var; // valid
name1 var; // invalid 
```

另一方面，`name4`又与`name5`生活在全局“命名空间”中发生冲突。因此，在拥有之后`typedef int name4;`，您无法使用该名称定义变量`name4`。

顺便说一句：标签也定义了自己的命名空间。

# objective-c - 不同版本的 Mac OS X 之间的单独代码？

> ID：12579145
> 
> 赞同：0
> 
> 时间：2012-09-25T08:38:36.413
> 
> 标签：objective-c, macos, cocoa, macros

我希望在 10.6 及以下而不是 10.7 及以上编译一些代码。

例如：

```
#ifdef current version is MAC_OS_X_VERSION_10_6 or below

// do this

elif current version is MAC_OS_X_VERSION_10_7 or above 

//do that

#endif 
```

有人可以帮我找到合适的宏吗？我查看了[AvailabilityMacros.h](http://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-18.1/AvailabilityMacros.h)，但无法找出正确的 ifdef。

我有一个动态库，在 10.7 及以上版本下无法加载，但在 10.6 下可以正常加载。这是由于私有符号`_CGContextAppendPath`。我想让它在 10.6 及以下版本中使用，但避免在 10.7 及以下版本中使用。这是因为`_CGContextAppendPath`符号在 10.7 及更高版本上不存在。

我用了，

```
SInt32 version = 0;
Gestalt( gestaltSystemVersion, &version );

bool lionabove = ( version >= 0x1070 ); 
```

不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:00:40.597

对于 Objective C，首选路线是通过例如检查特定 API 的可用性`[object respondsToSelector:]`。

对于您正在使用的 C 库，弱链接到`CoreGraphics.framework`（因此当某些函数不存在时加载不会失败）并通过`&_CGContextAppendPath != NULL`.

http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html#//apple_ref/doc/uid/10000163i-CH1-107837和[http](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html#//apple_ref/doc/uid/10000163i-CH1-107837) [://developer .apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-1114537-BABHHJBC](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-1114537-BABHHJBC)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T02:44:29.100

Apple`Availability.h`为 iOS 和 Mac OS 10.6 及更高版本引入了一个新的宏文件（位于`<SDK>/usr/include/Availability.h`）。您可以像这样执行您的要求：

```
#if __MAC_OS_X_VERSION_MIN_REQUIRED < 1070
    // code to run up through 10.6
#else
    // code to run on 10.7 or higher
#endif 
```

请注意，此宏也可用（根据您的逻辑可能更可取）：

```
#if __MAC_OS_X_VERSION_MAX_ALLOWED >= 1070
    // code to run on 10.7 or above
#else
    // code to run below 10.7
#endif 
```

这方面的文档在这里：[Conditionally Compiling for different SDKs](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-1114741-CJADDEIB)，如果您混合使用 iOS 和 Mac OS X 代码，特别值得一看。我也强烈推荐阅读上面提到的头文件。

# android - 如何在 Android 中构建没有 JNI 的共享库？

> ID：12579146
> 
> 赞同：5
> 
> 时间：2012-09-25T08:38:38.037
> 
> 标签：android, android-ndk, java-native-interface, arm, eclipse-adt

我开发了一个 Android 应用程序，它需要是一个共享库。我已经在 Linux 中创建了相同的库（使用 gcc），所以我想在 Android（ARM 处理器）中编译相同的共享库。但是NDK只支持JNI。现在我想构建一个没有直接 JNI 交互的单独共享库。我有很多 C 文件和头文件，所以我无法为所有内容编写 JNI。我想为 ARM 处理器构建我的库。我怎样才能做到这一点？

```
my stuture is
  ----->JNI
     ---->myfile.c(jni c code)
      ----->android.mk(here i call my two shared lib)

       folder1
             --->include
             ----src
             ---->lib(here i will get my shared lib)
       folder 2
            ----->include
            ----->src
            ----->lib(here i will get my 2nd shared lib) 
```

在这里我想单独构建我的共享库，然后我会调用它。是否可以在 Android 中构建没有 JNI 的 shred 库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:11:33.300

Android NDK 对使用它构建的二进制文件的 JNI 合规性没有任何要求。但通常Android应用程序都是用Java编写的，当它们使用原生组件时，自然的路径是使用JNI。

Android NDK 提供了丰富且易于使用的 ndk-build 命令，它要求您至少准备一个`Android.mk`文件，供他们的 make 系统使用。在许多情况下，根据您的 makefile 准备此类文件是值得的。但是，如果您从其他平台移植的项目使用高级`configure`或`Cmake`功能，您可以完全跳过`Android.mk`，并使用作为 NDK 一部分的独立工具链，如[NDK](http://source-android.frandroid.com/ndk/docs/STANDALONE-TOOLCHAIN.html)官方文档中所述。请注意，Android 不支持完整的 Linux **glibc**，而是支持一个名为**bionic**的子集。STL 支持也不明显，你必须[选择 7 个选项之一](http://source-android.frandroid.com/ndk/docs/CPLUSPLUS-SUPPORT.html)！

您可以在这里停下来，获取共享库或可执行文件，然后以传统的 Linux 方式使用它们。您可以[使用 C++ 构建您的 Android 应用程序](http://source-android.frandroid.com/ndk/docs/NATIVE-ACTIVITY.HTML)。

但最简单的方法是使用 Android SDK 构建一个 Java Android 应用程序，并通过 JDK 调用一些原生方法。您将需要一个包装器`.so`，一个将 JNI 函数导出到 Java 并依次调用*非 JNI库的库。*在`Android.mk`您可以使用`LOCAL_SHARED_LIBRARIES`. 您可能会发现以下问题对这部分很有用：[ndk build library outside main project source tree](https://stackoverflow.com/questions/12551951/ndk-build-library-outside-main-project-source-tree)。

您将需要在 Java 代码中“手动”加载本机库。`/system/lib`系统加载器仅在文件夹中搜索未解析的引用。

常规的地方是使用本地方法的 Java 类的静态构造函数。加载顺序很重要。如果`libone.so`依赖于`libtwo.so`，并且`libjni.so`依赖于`libone`和依赖`libtwo`，你将有类似的东西

```
{
  System.Load("two");
  System.Load("one");
  System.Load("jni");
} 
```

您还应该确保 Android SDK*构建器*在创建**APK**`libs/armeabi`文件时可以在其中或目录中找到文件。`libs-armeabi-v7a`

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T10:39:05.960

`JNI`无需编写任何特定的 C 代码即可构建本机库。您需要为您的库创建`Android.mk`和`Application.mk`文件。你有一个有效的`makefile`准备，所以你可以用它来制作一个`Android.mk`.

`Application.mk`可以如下：

```
APP_OPTIM := release
APP_PLATFORM := android-7
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a
APP_MODULES := <put-the-name-of-your-library-here> 
```

用于`ndk-build`编译库。**

# python - 如何使用 Python Mechanize 更改 HTML 复选框输入的值？

> ID：12579148
> 
> 赞同：2
> 
> 时间：2012-09-25T08:38:43.553
> 
> 标签：python, bots, mechanize-python

我无法使用 Python 库 Mechanize 修改复选框的值。问题是表单不会执行所需的操作，因为该值是由 JavaScript 修改的，而 Mechanize 不支持。

find_control() 方法返回错误。下面是有问题的代码片段：

```
from mechanize import Browser
stringGoesHere = "stringGoesHere"
br = Browser()
br.set_handle_robots(False)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
br.open("http://example.com/form.php")
br.select_form(nr=0)
br.find_control(name="pkid").value = ["stringGoesHere"]
br.submit() 
```

返回的错误是：“mechanize._form.ItemNotFoundError：名称为 'stringGoesHere' 的项目不足”。我还尝试用下面的代码行替换 find_control() 方法，并产生相同的错误消息：

```
br['pkid'] = [stringGoesHere] 
```

如果输入被忽略，我已经能够使用所需的值创建一个名为“pkid”的新表单字段，但尚未测试此解决方案。在我看来，必须创建一个具有相同名称的附加输入才能获得所需的效果，这似乎有点倒退：

```
br.form.new_control('text','pkid',{'value':'stringGoesHere'})
br.form.fixup() 
```

我希望有人能指出我正确的方向。Python Mechanize 的文档有点缺乏，谷歌搜索也没有真正的帮助。

我尝试提交的表单的精简版本如下：

```
<form name="formName" method="post" action="http://example.com">

         <input type="checkbox" id="0" onclick="uncheckMasterCheckbox(); enableExtension('0', 'telephonenumber_0')" class="content-nogroove" name="pkid" value='wglkweg-ewrg-44e4-b2c1-wegwergb5:'/>

         <input type="text" id="telephonenumber_0" name="telephonenumber" value="" disabled size="10" onchange="var e = document.getElementById('0'); e.value = 'wglkweg-ewrg-44e4-b2c1-wegwergb5:' + document.getElementById('telephonenumber_0').value;" onblur="var e = document.getElementById('0'); e.value = 'wglkweg-ewrg-44e4-b2c1-wegwergb5:' + document.getElementById('telephonenumber_0').value;" onkeyup="numbersOnlyIncludeZero('telephonenumber_0')"/>

         <button class="content-formbutton" id="importUsersButton" onclick="save();return false;">Import Selected</button>

    </form> 
```

# python - 重新采样具有特定开始时间的每小时 TimeSeries

> ID：12579150
> 
> 赞同：20
> 
> 时间：2012-09-25T08:38:49.063
> 
> 标签：python, pandas

我想从某个小时开始以每天（正好 24 小时）的频率重新采样 TimeSeries。

像：

```
index = date_range(datetime(2012,1,1,17), freq='H', periods=60)

ts = Series(data=[1]*60, index=index)

ts.resample(rule='D', how='sum', closed='left', label='left') 
```

结果我得到：

```
2012-01-01  7
2012-01-02 24
2012-01-03 24
2012-01-04  5
Freq: D 
```

我希望的结果：

```
2012-01-01 17:00:00 24
2012-01-02 17:00:00 24
2012-01-03 17:00:00 12
Freq: D 
```

几周前，你可以传递`'24H'`给这个`freq`论点，它工作得很好。但现在它结合`'24H'`到`'1D'`.

我是否使用了`'24H'`现在已修复的错误？我怎样才能以高效和 Pythonic（或 Pandas）的方式获得预期的结果？

版本：

*   蟒蛇2.7.3
*   pandas 0.9.0rc1（但也不适用于 0.8.1）
*   numpy 1.6.1

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T09:56:24.167

[Resample](http://pandas-docs.github.io/pandas-docs-travis/timeseries.html#resampling)有一个`base`涵盖这种情况的论点：

```
ts.resample(rule='24H', closed='left', label='left', base=17).sum() 
```

输出：

```
2012-01-01 17:00:00    24
2012-01-02 17:00:00    24
2012-01-03 17:00:00    12
Freq: 24H 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-22T13:27:28.280

**2021 更新：`base`自 1.1.0 版起已弃用：您应该使用的新参数是“偏移”或“原点”。**

```
df.resample('24H',
 origin=datetime(2012,1,1,17) # <--  ADD THIS
).sum() 
```

**1.1.0 版中的新功能**

**origin** {'epoch', 'start', 'start_day'}, Timestamp or str, default 'start_day' 调整分组的时间戳。原始时区必须与索引的时区匹配。如果不使用时间戳，则还支持以下值：

*   “时代”：起源是 1970-01-01
*   'start'：原点是时间序列的第一个值
*   'start_day'：原点是时间序列午夜的第一天

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-24T10:24:29.123

**2020 年更新：对于数据框**

使用[文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html)`base`中提到的关键字：

[![文档的基本描述](../Images/a8e93d82f9be2e82705a7f9040e098dd.png)](https://i.stack.imgur.com/qNsdM.png)

代码示例：

```
df.resample(pd.Timedelta('24 hours'), # or '24H'
 base=17 # <--  ADD THIS
).sum() 
```

# objective-c - 在objective-c中是否有一些我们可以用来设置断点的无操作操作

> ID：12579152
> 
> 赞同：7
> 
> 时间：2012-09-25T08:38:53.187
> 
> 标签：objective-c, xcode4.3, noop

代码不应该有任何效果它应该在任何地方都可以使用它不会产生编译器警告

基本上有时我想做NSAssert。但是，有时我不想做 NSAssert，而是做我的 if {} 我自己。这样我就可以轻松设置或取消设置断点

目前这就是我所做的。

```
if (entityName==@"Business")
{
    error=nil; //Some code for breakpoint. I want something that do nothing actually.
} 
```

只是碰巧我有一个名为 error 的变量，我将不再使用它。但是什么是好的选择

我也试过 [nil donthing]; 但这得到了编译器错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:12:44.747

试试这个：

```
while (false); 
```

还有其他可能性，比如`if (false)`甚至只是一行带有单独的分号`;`，但在这些情况下，执行会在下一条指令处停止，可能是因为编译器只是消除了那些空的代码位。Using`while`的优点是执行将在该行停止（当然，假设您在那里放置了一个断点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:51:36.127

您可以给出断点条件，按住选项和命令并单击断点，您应该会弹出一个窗口。在“条件”字段中，您可以输入类似

```
[entityName isEqualToString:@"Business"] 
```

（请注意，您应该将字符串与`-isEqualToString:`not`==`进行比较，因为后者比较的是指针而不是字符串本身中的字符。）

通过在断点中使用条件，您根本不需要 if 语句，并且无需重新编译即可启用和禁用检查。您可以使用断点设置做更多事情，例如让它自动记录消息或运行调试器命令等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:03:21.633

在 C 中，您可以有一个无操作指令，只需将分号单独放在一行中：

```
if (TRUE) {
  ; // Neutral operation
} 
```

在 Objective-C 中你可以做同样的事情，问题是你的程序在下一行之前停止，你可以在这里看到：

![在此处输入图像描述](../Images/b7f8089949f658ef28fda7827d4c9272.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T08:45:59.067

您不直接比较 2 个字符串；试试 [NSString isEqualToString:]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:59:03.390

您可以使用`__asm int 3;`

```
if ([entityName isEqualToString:@"Business"]) {
    __asm int 3;
} 
```

来自[CFInternal.h](http://opensource.apple.com/source/CF/CF-476.18/CFInternal.h?txt)。

```
#if defined(__ppc__) || defined(__ppc64__)
#define HALT asm __volatile__("trap")
#elif defined(__i386__) || defined(__x86_64__)
#if defined(__GNUC__)
#define HALT asm __volatile__("int3")
#elif defined(_MSC_VER)
#define HALT __asm int 3;
#else
#error Compiler not supported
#endif
#endif
if ([entityName isEqualToString:@"Business"]) {
    HALT;
} 
```

# java - 一般地覆盖Java中的方法

> ID：12579153
> 
> 赞同：23
> 
> 时间：2012-09-25T08:38:55.270
> 
> 标签：java, generics, casting, type-conversion, overriding

如果我有这样一个我无法更改的基类：

```
public abstract class A {
    public abstract Object get(int i);
} 
```

我尝试用这样的类来扩展它`B`：

```
public class B extends A{
    @Override
    public String get(int i){
        //impl
        return "SomeString";
    }
} 
```

一切都好。但是如果我尝试使它更通用的尝试失败：

```
public class C extends A{
    @Override
    public <T extends Object> T get(int i){
        //impl
        return (T)someObj;
    }
} 
```

我想不出任何理由为什么不应该这样做。在我的理解中，泛型类型`T`绑定到一个`Object`- 这是请求的返回类型`A`。如果我可以将`String`or`AnyObject`作为我的返回类型 inside `B`，为什么我不允许放在`<T extends Object> T`我的`C`班级中？

从我的角度来看，另一个奇怪的行为是这样的附加方法：

```
public class D extends A{

    @Override
    public Object get(int i){
        //impl
    }

    public <T extends Object> T get(int i){
        //impl
    }
} 
```

也不允许，带有提供的提示`DuplicateMethod`。至少这一点让我感到困惑，我认为 Java 应该做出决定：如果是***相同***的返回类型，为什么不允许覆盖；如果不是，为什么我不能添加此方法？根据常识，告诉我它是相同的，但不允许它被覆盖，这很奇怪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T08:49:21.330

[JLS #8.4.2。方法签名](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)

> 方法 m1 的签名是方法 m2 签名的子签名，如果：
> 
> *   m2 与 m1 具有相同的签名，或
>     
>     
> *   m1 的签名与 m2 签名的擦除（第 4.6 节）相同。

**根据上述规则，您的父母没有擦除，而您的孩子有擦除，因此它不是有效的覆盖。**

[JLS#8.4.8.3。覆盖和隐藏的要求](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.1)

**示例 8.4.8.3-4。擦除影响覆盖**

一个类不能有两个具有相同名称和类型擦除的成员方法：

```
class C<T> {
    T id (T x) {...}
}
class D extends C<String> {
    Object id(Object x) {...}
} 
```

这是非法的，因为 D.id(Object) 是 D 的成员，C.id(String) 在 D 的超类型中声明，并且：

*   这两个方法具有相同的名称，id
*   D 可以访问 C.id(String)
*   D.id(Object) 的签名不是 C.id(String) 的子签名
*   这两种方法具有相同的擦除

一个类的两个不同方法不能覆盖具有相同擦除的方法：

```
 class C<T> {
     T id(T x) {...}
 }
 interface I<T> {
     T id(T x);
 }
 class D extends C<String> implements I<Integer> {
    public String  id(String x)  {...}
    public Integer id(Integer x) {...}
 } 
```

这也是非法的，因为 D.id(String) 是 D 的成员，D.id(Integer) 在 D 中声明，并且：

*   这两个方法具有相同的名称，id
*   D.id(Integer) 可供 D 访问
*   这两种方法具有不同的签名（并且都不是另一个的子签名）
*   D.id(String) 覆盖 C.id(String) 和 D.id(Integer) 覆盖 I.id(Integer) 但两个被覆盖的方法具有相同的擦除

还给出了允许从超级到子的情况的示例

> 子签名的概念旨在表达两个方法之间的关系，这些方法的签名不相同，但其中一个可以覆盖另一个。具体来说，它允许其签名不使用泛型类型的方法覆盖该方法的任何泛型版本。这一点很重要，以便库设计者可以独立于定义库的子类或子接口的客户端自由地生成方法。

考虑这个例子：

```
class CollectionConverter {
List toList(Collection c) {...}
}
class Overrider extends CollectionConverter {
 List toList(Collection c) {...} 
```

}

现在，假设这段代码是在引入泛型之前编写的，现在 CollectionConverter 类的作者决定对代码进行泛型化，因此：

```
 class CollectionConverter {
   <T> List<T> toList(Collection<T> c) {...}
 } 
```

**如果没有特别规定，Overrider.toList 将不再覆盖 CollectionConverter.toList。相反，该代码将是非法的。**这将显着抑制泛型的使用，因为库编写者会犹豫迁移现有代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T09:51:46.763

好吧，对于第一部分，答案是 Java 不允许非泛型方法被泛型方法覆盖，即使擦除是相同的。这意味着即使您将覆盖方法设为：

```
 public <T extends Object> Object get(int i) 
```

我不知道为什么 Java 会提出这个限制（考虑一下），我只是认为它与为子类泛型类型实现的特殊情况有关。

您的第二个定义本质上将转化为：

```
public class D extends A{

    @Override
    public Object get(int i){
    //impl
    }

    public Object get(int i){
        //impl
    }

} 
```

这显然是一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:57:00.123

从 JLS 部分[8.4.8.3 覆盖和隐藏](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)：

> 如果类型声明 T 具有成员方法 m1 并且存在在 T 中声明的方法 m2 或 T 的超类型，则编译时错误，从而**满足以下所有条件**：
> 
> 1.  m1 和 m2 具有相同的名称。
>     
>     
> 2.  m2 可从 T 访问。
>     
>     
> 3.  m1 的签名不是 m2 签名的子签名（第 8.4.2 节）。
>     
>     
> 4.  m1 或某些方法 m1 覆盖（直接或间接）的签名与 m2 或某些方法 m2 覆盖（直接或间接）的签名具有相同的擦除。

1 和 2 成立。

3 也成立，因为（引自[JLS 第 8.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)）：

> 子签名的概念旨在表达两个方法之间的关系，这些方法的签名不相同，但其中一个可以覆盖另一个。**具体来说，它允许其签名不使用泛型类型的方法覆盖该方法的任何泛型版本。**

而你有另一种方式：一个泛型类型的方法覆盖一个没有泛型的方法。

4 也成立，因为擦除的签名是相同的：`public Object get(int i)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T08:57:59.247

想象一下下面的调用。

```
A a = new C();
a.get(0); 
```

实际上，您正在调用一个泛型方法，但您没有传入任何类型参数。就目前情况而言，这不是什么大问题。无论如何，这些类型参数在代码生成期间都会消失。然而，物化从未被取消，Java 的管理者已经尝试并[继续尝试](http://mail.openjdk.java.net/pipermail/lambda-dev/2010-July/001781.html)保持这扇门敞开。如果类型参数被具体化，您的调用将不会为需要一个的方法提供任何内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-22T04:03:24.113

@RafaelT 的原始代码导致此编译错误...

* * *

```
C.java:3: error: C is not abstract and does not override abstract method get(int) in A
public class C extends A { 
       ^
C.java:5: error: name clash: <T>get(int) in C and get(int) in A have the same erasure, yet neither overrides the other
    public  <T extends Object> T  get ( int i ){ 
                              ^
  where T is a type-variable:
    T extends Object declared in method <T>get(int) 
```

* * *

让@RafaelT 的 C 子类成功编译的最简单、最直接的解决方案是……

* * *

```
public abstract class A {
    public abstract Object get(int i);
} 
```

* * *

```
public class C<T> extends A {
    @Override
    public T get(int i){
        //impl
        return (T)someObj;
    }
} 
```

* * *

尽管我确信其他人的回答是善意的。尽管如此，一些答案似乎主要误解[*了 JLS*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)。

上面只更改类声明，导致编译成功。仅这一事实就意味着@RafaelT 的原始签名[*作为子*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)签名确实非常好——*与其他人的建议相反*。

我不会犯与其他回答者似乎犯的相同的错误，并试图假装我完全了解 JLS 泛型文档。我承认我还没有 100% 确定地弄清楚 OP 最初编译失败的根本原因。

但我怀疑这***与***OP在 Java 泛型的典型令人困惑和古怪的微妙之处之上`Object`作为[*返回类型*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)的不幸组合有关。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:01:16.593

你应该阅读[*擦除*](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

在您的示例中：

```
public class D extends A{

  @Override
  public Object get(int i){
      //impl
  }

  public <T extends Object> T get(int i){
      //impl
  }
} 
```

编译器为您的泛型方法生成的字节码将与您的非泛型方法相同；也就是说，`T`将被替换为上限，即`Object`。这就是您`DuplicateMethod`在 IDE 中收到警告的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T09:59:02.713

如果没有在其他地方声明 - 在方法的参数或封闭类的字段中，将方法声明为`<T extends Object> T get(int i)`没有意义。`T`在后一种情况下，只需使用 type 参数化整个类`T`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T16:32:33.900

有一个概念问题。假设`C#get()`覆盖`A#get()`

```
A a = new C();
Object obj = a.get();  // actually calling C#get() 
```

但`C#get()`需要一个`T`- 应该`T`是什么？没有办法确定。

您可以抗议`T`由于擦除而不需要的内容。今天是正确的。然而，擦除被认为是一种“临时”解决方法。大部分类型系统不假设擦除；它实际上是经过精心设计的，因此它可以在 Java 的未来版本中完全“可修改”，即无需擦除，而不会破坏现有代码。

# php - 将 / 和 / 之间的任意 2 个字符替换为通配符匹配

> ID：12579154
> 
> 赞同：1
> 
> 时间：2012-09-25T08:38:59.097
> 
> 标签：php, string, replace

我有这些字符串`/re/`等`/en/`。

我想替换 / 和 / 中的所有内容，包括 2 `/`，如下所示：

```
str_replace("/??/", $replacement, $string); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:41:25.150

您可能正在搜索[preg_replace](http://php.net/manual/en/function.preg-replace.php)。

```
preg_replace("#/.{1,2}/#", $replacement, $string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:42:46.010

```
preg_replace("{/../}", $replacement, $string); 
```

`/`这将用您想要的替换替换任何两个字符的所有实例。如果您知道内容只会是字母数字，那么您可以`\w\w`代替`..`.

如果您需要将其应用于任何长度的字符串，那么其他人推荐的：“{/.+/}”将起作用。

请注意，我使用`{`and`}`而不是更常见的`/`分隔符，因为它们是有效的，并且因为您的匹配字符串包含`/`. 这样我们就不需要逃避匹配的实例，`/`使其更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:45:40.170

尝试这个：

```
$in = 'foo/ba/r and /so/me';
$out = preg_replace('/\/[^\/]{2}\//','/REPLACEMENT/',$in);
echo $out;//'foo/REPLACEMENT/r and /REPLACEMENT/me' 
```

基本上，正则表达式匹配任何由正斜杠分隔的（子）字符串，并且除了正斜杠之外包含两个（并且只有两个）字符。所以`/s//`不会匹配，但`/ss/`会

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T08:46:36.723

```
$str = '/rr/';
$replacement = 'a';
echo preg_replace("#/\w{2}/#", $replacement, $str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:44:02.030

```
preg_replace('~/[a-z]{2}/~', $replacement, $string); 
```

# c# - 将十进制转换为纬度/经度？

> ID：12579155
> 
> 赞同：0
> 
> 时间：2012-09-25T08:39:09.877
> 
> 标签：c#

我正在尝试 GPS 应用程序，我想将十进制数字转换为纬度/经度，但我没有找到确切的解决方案。我在下面尝试过

```
string decimalToLatLong(decimal lat,decimal refPoint)
{
 bool isNeg = lat < 0;
        int d = (int)lat;
        int m = (int)((lat - d) * 60);
        decimal s = ((((lat - d) * 60) - m) * 60);
return (d+m+s).ToString("00.000");
 if (isLat)
            direction = isNeg ? "S" : "N";
        else
            direction = isNeg ? "W" : "E";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:48:18.347

怎么样：

```
string decimalToLatLong(decimal dec)
{
  int d = (int)dec;
  int m = (int)((dec - d) * 60);
  decimal s = ((((dec - d) * 60) - m) * 60);

  return d + "° " + m + "' " + s + "\"";
} 
```

# c# - ASPx新闻控件

> ID：12579156
> 
> 赞同：1
> 
> 时间：2012-09-25T08:39:11.543
> 
> 标签：c#, asp.net, devexpress

我尝试从中弹出`ASPxNewscontrol`并放入`javascript:void('0')`，`NavigateUrlField`然后引发错误：

> 在所选数据源中找不到名为“javascript:void('0')”的字段。

我正在使用`XPODataSource`数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:07:08.007

来自`ASPxNewsControl.NavigateUrlField`文档文章：一个字符串值，它指定包含项目 URL 的数据源字段的名称。

阅读[ASPxNewsControl.NavigateUrlField](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxNewsControlASPxNewsControl_NavigateUrlFieldtopic)以获得详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:47:16.057

您可以尝试使用`NavigateUrlFormatString`属性

```
 <dxnc:ASPxNewsControl ID="ASPxNewsControl1" runat="server" 
             DataSourceID="..." 
             NavigateUrlFormatString="javascript:void('{0}');" >

             ......

         </dxnc:ASPxNewsControl> 
```

# jquery - 引用 jQuery .load 与 getJSON 结果中的输出

> ID：12579159
> 
> 赞同：1
> 
> 时间：2012-09-25T08:39:23.813
> 
> 标签：jquery, asp.net-mvc, api, getjson

我有以下 jQuery 设置每个（空）DIV 的内容（具有以字母字符开头的唯一 id），其具有 class ='editable'。我正在使用带有 GET 方法的 MVC4 api 控制器来返回 HTML 字符串。

出于某种原因，下面的 loadStuff 函数正在输出可以在返回内容之前和之后在网页中看到的引号。这发生在每个 DIV 上，并且绝对不会在返回字符串的 api 控制器方法中返回。

```
$(document).ready(function () {
     $('.editable').each(function () {
          var curId = this.id.replace('content', '');
          loadStuff(curId, this.id);
     })
});

function loadStuff(curId, targetId) {
     $('#' + targetId).load('api/briefingItem/' + curId);
} 
```

但是，当我用下面的代码替换 loadStuff 函数并使用 .appendTo 时，引号不会出现。

```
function loadStuff(curId, targetId) {
     $.getJSON("api/briefingItem/" + curId,
          function (data) {
               $(data).appendTo('#' + targetId);
          })          
} 
```

对于返回一个简单的字符串和文档建议，这似乎有点过头了。谁能解释这种不寻常的行为？

API 控制器

```
// GET api/BriefingItem/5
public string Get(int id)
{
    string newVal = string.Empty;

    switch (id)
    {
        case 12:
            newVal = @"<p>this is some example text that you can edit inside the <strong>tinymce editor</strong>.</p><p>nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. nam sed lectus quam, ut sagittis tellus. quisque dignissim mauris a augue rutrum tempor. donec vitae purus nec massa vestibulum ornare sit amet id tellus. nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. aliquam molestie volutpat dapibus. nunc interdum viverra sodales. morbi laoreet pulvinar gravida. quisque ut turpis sagittis nunc accumsan vehicula. duis elementum congue ultrices. cras faucibus feugiat arcu quis lacinia. in hac habitasse platea dictumst. pellentesque fermentum magna sit amet tellus varius ullamcorper. vestibulum at urna augue, eget varius neque. fusce facilisis venenatis dapibus. integer non sem at arcu euismod tempor nec sed nisl. morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.</p>";
            break;
        case 13:
            newVal = @"<p>look up $(content).load() jquery method and the callback function.</p>";
            break;
        default:
            newVal =  @"<h3>click to enter content.</h3>";
            break;
    }

    return newVal;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:31:02.927

Web API 的实际响应是一个用双引号括起来的字符串。

`$.getJSON()`和`.load()`方法之间的区别在于，该`$.getJSON`方法假定响应是 JSON 编码的字符串 => 它去除了双引号，其中 .load 假定为 HTML 并且不对结果进行任何处理。

所以你可以让你的 Web API 控制器操作返回一个`text/html`而不是`application/json`编码的请求：

```
public HttpResponseMessage Get(int id)
{
    string newVal = string.Empty;

    switch (id)
    {
        case 12:
            newVal = @"<p>this is some example text that you can edit inside the <strong>tinymce editor</strong>.</p><p>nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. nam sed lectus quam, ut sagittis tellus. quisque dignissim mauris a augue rutrum tempor. donec vitae purus nec massa vestibulum ornare sit amet id tellus. nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. aliquam molestie volutpat dapibus. nunc interdum viverra sodales. morbi laoreet pulvinar gravida. quisque ut turpis sagittis nunc accumsan vehicula. duis elementum congue ultrices. cras faucibus feugiat arcu quis lacinia. in hac habitasse platea dictumst. pellentesque fermentum magna sit amet tellus varius ullamcorper. vestibulum at urna augue, eget varius neque. fusce facilisis venenatis dapibus. integer non sem at arcu euismod tempor nec sed nisl. morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.</p>";
            break;
        case 13:
            newVal = @"<p>look up $(content).load() jquery method and the callback function.</p>";
            break;
        default:
            newVal =  @"<h3>click to enter content.</h3>";
            break;
    }

    var response = Request.CreateResponse(HttpStatusCode.OK);
    response.Content = new StringContent(newVal, Encoding.UTF8, "text/html");
    return response;
} 
```

现在您可以使用该`.load()`方法，但不能使用该`$.getJSON`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:48:52.493

如果您可以发布控制器 API 签名，那就太好了。

load 和 getJSON 的行为是不同的，我假设控制器返回一个 JsonResult 并因此发送引号，加载盲目地发布控制器返回的任何内容作为 HTML 和引号

# perl - 42、42.0、“42.0”、“42”会有什么区别吗

> ID：12579160
> 
> 赞同：13
> 
> 时间：2012-09-25T08:39:25.147
> 
> 标签：perl

在使用“Smart Match(~~)”测试我的 Perl 代码的过程中，我遇到了这个问题。42、42.0、“42.0”、“42”会有什么区别吗

```
$var1 = "42";
$var2 = "42.0";
$a = $var1 ~~ $var2; 
```

我得到`$a`了 0; 这意味着`$var1`和`$var2`不相等。

请解释。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T08:53:14.460

智能匹配运算符将“通常做你想做的事”。请将此视为“并非总是”。

`42 ~~ 42.0`返回真。

`42 ~~ "42.0"`也返回 true：字符串与数字进行比较，因此被视为数字。同上`"42" ~~ 42.0`。

`"42" ~~ "42.0"`返回 false：两个参数都是字符串，并且这些字符串不会比较为“相等”，尽管它们的数值含义会。你不希望 Perl 认为`"two" ~~ "two-point-oh"`是真的。

可以通过添加零来强制字符串对其进行数字解释：

`0+"42" ~~ "42.0"`再次返回 true，因为第一个字符串被强制为 number `42`，第二个也是如此。

`perldoc perlsyn`or[`perldoc perlop`页面](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)定义了智能匹配的工作方式：

```
 Object  Any       invokes ~~ overloading on $object, or falls back:
       Any     Num       numeric equality         $a == $b
       Num     numish[4] numeric equality         $a == $b
       undef   Any       undefined                !defined($b)
       Any     Any       string equality          $a eq $b 
```

您可以看到字符串相等是默认设置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T10:23:19.040

您现在可能需要重新考虑使用智能匹配。Perl 社区认为当前的实现是一个错误，其中包括您的问题和 amon 的回答。

一个“更健全”、更简单但不兼容的智能匹配版本的工作正在进行中，它可能会出现在 Perl 的下一个主要版本（5.18）中。它只会取缔您的示例：当 $b 是简单的标量值（如 42 或“42”）时，将不允许使用 $a ~~ $b。

如果您手头有太多时间，您可以仔细阅读[Perl5 搬运工](http://www.nntp.perl.org/group/perl.perl5.porters/)档案，例如[这个线程](http://www.nntp.perl.org/group/perl.perl5.porters/2012/08/msg190658.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T08:55:19.597

上下文输入。

`$Var1`并且`$Var2`最后被用作字符串（在分配中），所以现在它们表现为字符串。`~~`如果两个参数都是字符串，将进行字符串比较。

如果您**将**其中一个用作数字 - 您甚至不需要分配给它 - 那么它将表现为一个数字并`~~`使用数字比较。

该脚本将输出`NO YES`：

```
my $v1 = "42";
my $v2 = "42.0";
print (($v1 ~~ $v2) ? 'YES ' : 'NO ');

$v1 + 0;
print (($v1 ~~ $v2) ? 'YES ' : 'NO '); 
```

[`~~`操作员参考](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)

# python - python，指数和十进制浮点数

> ID：12579162
> 
> 赞同：0
> 
> 时间：2012-09-25T08:39:30.697
> 
> 标签：python, numpy, floating-point, exponential

我想用 numpy.savetxt() 将一个带有浮点数的数组保存到文件中。浮点数必须是小数（所以非指数！）

代码如下：

```
wav = 1./w
wav = np.array(sorted(wav))
efittet = permfitfuncLD(params1[0], params1[1:],1./wav).real
eefittet = permfitfuncLD(params1[0], params1[1:],1./wav).imag
etoprint = [float(s) for s in ["%.5f" % i for i in efittet]]
eetoprint = [float(s) for s in ["%.5f" % i for i in eefittet]]
wavtoprint = [float(s) for s in ["%.5f" % i for i in wav]]
print "--------------------------------------------------------------------"
print "etoprint"
print etoprint
print "--------------------------------------------------------------------"
print "eetoprint"
print eetoprint
print "--------------------------------------------------------------------"
print "wavtoprint"
print wavtoprint
print "--------------------------------------------------------------------"
arr = np.array([wavtoprint,etoprint,eetoprint]).transpose()
print "txt to safe should contain: ", arr 
```

`w`并且`params`是我的函数 permfitfuncLD() 的一些参数，它本身很复杂。输出是：

```
--------------------------------------------------------------------
etoprint
[0.50391, 0.44551, 0.37837, 0.29117, 0.19734, 0.09081, -0.03854, -0.17022, -0.325, -0.47742, -0.63656, -0.8125, -0.9728, -1.13589, -1.26684, -1.36734, -1.42736, -1.42551, -1.3545, -1.23074, -1.07199, -0.90215, -0.79518, -0.78347, -0.899, -1.14185, -1.51655, -1.87591, -2.07595, -1.89561, -1.53701, -1.56583, -2.20596, -3.38828, -4.77624, -6.39743, -8.43319, -10.62524, -13.43619, -16.55797, -20.35308, -25.49629, -31.56653, -40.21232, -51.0312, -66.09163, -90.35934, -125.69555, -188.95742]
--------------------------------------------------------------------
eetoprint
[3.51955, 3.48008, 3.44968, 3.42508, 3.41183, 3.40951, 3.4217, 3.44898, 3.49899, 3.5671, 3.6595, 3.79075, 3.94391, 4.14716, 4.3697, 4.62296, 4.92274, 5.20694, 5.49578, 5.71423, 5.85755, 5.90724, 5.8566, 5.72561, 5.58159, 5.4753, 5.48067, 5.66307, 6.04179, 6.30754, 6.06509, 5.20939, 4.3096, 3.51667, 2.98072, 2.59107, 2.28845, 2.09188, 1.9525, 1.88784, 1.89048, 1.98989, 2.20993, 2.67266, 3.45841, 4.87942, 7.80959, 13.04591, 25.27873]
--------------------------------------------------------------------
wavtoprint
[0.18787, 0.19165, 0.19527, 0.19935, 0.20327, 0.20735, 0.21196, 0.2164, 0.22142, 0.22627, 0.23134, 0.23709, 0.24265, 0.24899, 0.25514, 0.2616, 0.26897, 0.27616, 0.2844, 0.29244, 0.30096, 0.31077, 0.3204, 0.33154, 0.34253, 0.35428, 0.36794, 0.38153, 0.39742, 0.41332, 0.43054, 0.4509, 0.47147, 0.49599, 0.52099, 0.54866, 0.58214, 0.6169, 0.65956, 0.70453, 0.75608, 0.82117, 0.89206, 0.9841, 1.08769, 1.21565, 1.39322, 1.61035, 1.93745]
--------------------------------------------------------------------
txt to safe should contain:  [[  1.87870000e-01   5.03910000e-01   3.51955000e+00]
 [  1.91650000e-01   4.45510000e-01   3.48008000e+00]
 [  1.95270000e-01   3.78370000e-01   3.44968000e+00]
 [  1.99350000e-01   2.91170000e-01   3.42508000e+00]
 [  2.03270000e-01   1.97340000e-01   3.41183000e+00]
 [  2.07350000e-01   9.08100000e-02   3.40951000e+00]
 [  2.11960000e-01  -3.85400000e-02   3.42170000e+00]
 [  2.16400000e-01  -1.70220000e-01   3.44898000e+00]
 [  2.21420000e-01  -3.25000000e-01   3.49899000e+00]
 [  2.26270000e-01  -4.77420000e-01   3.56710000e+00]
 [  2.31340000e-01  -6.36560000e-01   3.65950000e+00]
 [  2.37090000e-01  -8.12500000e-01   3.79075000e+00]
 [  2.42650000e-01  -9.72800000e-01   3.94391000e+00]
 [  2.48990000e-01  -1.13589000e+00   4.14716000e+00]
 [  2.55140000e-01  -1.26684000e+00   4.36970000e+00]
 [  2.61600000e-01  -1.36734000e+00   4.62296000e+00]
 [  2.68970000e-01  -1.42736000e+00   4.92274000e+00]
 [  2.76160000e-01  -1.42551000e+00   5.20694000e+00]
 [  2.84400000e-01  -1.35450000e+00   5.49578000e+00]
 [  2.92440000e-01  -1.23074000e+00   5.71423000e+00]
 [  3.00960000e-01  -1.07199000e+00   5.85755000e+00]
 [  3.10770000e-01  -9.02150000e-01   5.90724000e+00]
 [  3.20400000e-01  -7.95180000e-01   5.85660000e+00]
 [  3.31540000e-01  -7.83470000e-01   5.72561000e+00]
 [  3.42530000e-01  -8.99000000e-01   5.58159000e+00]
 [  3.54280000e-01  -1.14185000e+00   5.47530000e+00]
 [  3.67940000e-01  -1.51655000e+00   5.48067000e+00]
 [  3.81530000e-01  -1.87591000e+00   5.66307000e+00]
 [  3.97420000e-01  -2.07595000e+00   6.04179000e+00]
 [  4.13320000e-01  -1.89561000e+00   6.30754000e+00]
 [  4.30540000e-01  -1.53701000e+00   6.06509000e+00]
 [  4.50900000e-01  -1.56583000e+00   5.20939000e+00]
 [  4.71470000e-01  -2.20596000e+00   4.30960000e+00]
 [  4.95990000e-01  -3.38828000e+00   3.51667000e+00]
 [  5.20990000e-01  -4.77624000e+00   2.98072000e+00]
 [  5.48660000e-01  -6.39743000e+00   2.59107000e+00]
 [  5.82140000e-01  -8.43319000e+00   2.28845000e+00]
 [  6.16900000e-01  -1.06252400e+01   2.09188000e+00]
 [  6.59560000e-01  -1.34361900e+01   1.95250000e+00]
 [  7.04530000e-01  -1.65579700e+01   1.88784000e+00]
 [  7.56080000e-01  -2.03530800e+01   1.89048000e+00]
 [  8.21170000e-01  -2.54962900e+01   1.98989000e+00]
 [  8.92060000e-01  -3.15665300e+01   2.20993000e+00]
 [  9.84100000e-01  -4.02123200e+01   2.67266000e+00]
 [  1.08769000e+00  -5.10312000e+01   3.45841000e+00]
 [  1.21565000e+00  -6.60916300e+01   4.87942000e+00]
 [  1.39322000e+00  -9.03593400e+01   7.80959000e+00]
 [  1.61035000e+00  -1.25695550e+02   1.30459100e+01]
 [  1.93745000e+00  -1.88957420e+02   2.52787300e+01]] 
```

我的问题是，这些值必须是浮点数（即第一个应该是 0.18787）。我不明白，为什么数组中的数字`arr`具有指数形式。

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:43:15.327

这些*是*花车。这只是显示浮动的另一种方式。Numpy 数组默认以指数格式打印浮点数。如果您需要另一种格式来将数据存储在文本文件中，则必须使用[numpy.save.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html#numpy.savetxt)或使用 python 格式化函数自己执行此操作。

但是，您应该知道，与科学格式相比，您将失去精度。原因是科学格式可以用相同的位数表示非常小的数字，因为它可以表示非常高的数字。你不能用十进制表示来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:00:17.267

如果您对在 NumPy 中打印浮点数组感兴趣，您可以：

*   使用函数的`fmt`参数[`np.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)。例如，如果你想打印 3 列浮点数`"%.5f"`，用空格分隔，你可以使用`fmt="%.5f %.5f ".5f"`.
*   如果你想改变 NumPy 数组在屏幕上的打印方式，你可以使用这个[`np.set_printoptions`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)函数，例如使用`np.set_printoptions(precision=5)`.

There's yet a last trick to transform an array of float in an array of strings: just use a string dtype like `dtype="|S10"` (eg, `wav.astype("|S10")`. That'll require some fiddling to find the proper size of string you want (`"|S10"` means 'up to 10 characters), as if you print something larger it'll get truncated. I wouldn't advise it in real life, but as an exercise it's harmless.

# python - 如何通过python获取'java -version'输出

> ID：12579163
> 
> 赞同：2
> 
> 时间：2012-09-25T08:39:30.127
> 
> 标签：python, command

我试过`os.popen`之类的方法。但这似乎对我不起作用。我想知道命令`'echo xxxx'`和之间是否有任何不同`'java -version'`，以及如何`'java -version'`使用 python 代码获得输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:05:51.900

```
import subprocess
sp = subprocess.Popen(["java", "-version"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
print sp.communicate()
print sp.wait() 
```

是真正的方法。

一个更简单的方法可能是

```
print subprocess.check_output(["java", "-version"], stderr=subprocess.STDOUT) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:42:59.943

不同之处在于`java -version`打印到`stderr`而不是`stdout`. 您可以`stderr`使用（更好）或手动`subprocess.Popen`重定向`stdout`到检查命令：`stderr`

```
java -version 2>&1 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T08:41:59.597

是的，不同之处在于 java -version 转到 stderr 流。试试popen3 [http://docs.python.org/library/popen2.html](http://docs.python.org/library/popen2.html)

# c# - 插入数据时的异常处理

> ID：12579164
> 
> 赞同：-1
> 
> 时间：2012-09-25T08:39:38.980
> 
> 标签：c#, sql-server, exception-handling

我正在使用存储过程插入数据，我想处理异常我该怎么做？我可以获得什么样的异常以及如何抛出它们？

```
 public int insert(string fname,string lname,string city)
  {
      SqlConnection con = new SqlConnection(cstr);
      try
      {
          SqlCommand cmd = new SqlCommand("insert", con);
          cmd.CommandType = CommandType.StoredProcedure;
          cmd.Parameters.AddWithValue("@firstname", TextBox1.Text);
          cmd.Parameters.AddWithValue("@lastname", TextBox2.Text);
          cmd.Parameters.AddWithValue("@city", TextBox3.Text);
          con.Open();
         return cmd.ExecuteNonQuery();

      }
      catch (Exception)
      {
          throw;
      }
   finally
      {
          con.Close();
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:41:59.530

最好是捕获特定的 Exception，而不是 base `Exception`。如果稍后要处理它，您可能会捕获[SqlException](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)然后抛出相同的异常。还可以将[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx) 与您的连接一起使用，该语句将用作 try/finally 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:47:51.610

如果您想了解 ExecuteNonQuery 函数抛出的异常信息，您只需查看 MSDN 页面。

[http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

就像哈比布说的那样做，而不是

```
catch(Exception) 
```

您应该根据您的情况捕获特定的异常类型：

```
catch(SqlException sqlEx) 
```

并且在捕获中，当抛出 SqlException 时做任何你必须做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:46:12.920

`SqlException`如果你想用它做一些业务逻辑，应该在上层处理。如果您不让它自然抛出并在需要时记录异常。

在这里只需使用`using`关键字作为最佳实践。

```
using (var con = new SqlConnection(cstr))
  {
      SqlCommand cmd = new SqlCommand("insert", con);
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.AddWithValue("@firstname", TextBox1.Text);
      cmd.Parameters.AddWithValue("@lastname", TextBox2.Text);
      cmd.Parameters.AddWithValue("@city", TextBox3.Text);
      con.Open();

     return cmd.ExecuteNonQuery();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:52:14.430

如果您打开 ExecuteNonQuery( 之类的方法范围，您将看到它在大多数情况下可能会抛出的异常列表，因此如果您想捕获特定的异常。

比你可以用于前。：catch(System.InvalidCastException exception) 来捕捉这个特定的异常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:48:15.597

[根据文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)，`SqlCommand.ExecuteNonQuery`抛出`InvalidCastException`、`SqlException`、`IOException`、`InvalidOperationException`和`ObjectDisposedException`.

顺便问一下，这是怎么回事？

```
catch (Exception)
{
    throw;
} 
```

# forms - 同一域上 3 个站点的 ASP.NET 身份验证

> ID：12579168
> 
> 赞同：0
> 
> 时间：2012-09-25T08:40:07.230
> 
> 标签：forms, authentication, cookies, forms-authentication

我需要对 3 个站点（login.mydomain.com、www.mydomain.com 和 admin.mydomain.com）进行表单身份验证。用户来自 MSSQL-DB，但我认为这不是问题。

我已经按照此处所述设置了我的 web.config：http: [//msdn.microsoft.com/en-us/library/eb0zx8fc.aspx](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)，但它不起作用。

我的登录代码：

```
string RoleString = string.Empty;
RoleString = user.Gruppe.Bezeichnung;
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, user.Username, DateTime.Now, DateTime.Now.AddMinutes(2), false, user.Gruppe.name, FormsAuthentication.FormsCookiePath);
string hash = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, hash);
cookie.Name = "UserCookie";
cookie.Domain = ".mydomain.com";
Response.Cookies.Add(cookie);
Response.Redirect("http://www.mydomain.com/Default.aspx"); 
```

可能是什么问题呢？我尝试在 webconfig 中使用机器密钥，但这给了我 MAC 的 Viewstate 错误...

# search - 如何在百度地图中将地点/城市名称作为参数传递？

> ID：12579172
> 
> 赞同：1
> 
> 时间：2012-09-25T08:40:20.627
> 
> 标签：search, maps

如何在百度地图中将地名与 URL 一起传递，以便百度自动找到该地点？

示例 - 将“上海”传递到 Google 地图 url 将显示中国上海的地点 [http://maps.google.com.hk/maps?q=Shanghai](http://maps.google.com.hk/maps?q=Shanghai)

关于如何在百度中获得类似功能的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T08:38:14.780

查看[API 文档](http://developer.baidu.com/map/uri-intro.htm#idmykey32)，URL 可能是：

```
http://api.map.baidu.com/geocoder?address=%s&output=html 
```

替换`%s`为您的查询。

# ajax - 如何在 ajax 渲染父组件期间跳过子组件？

> ID：12579175
> 
> 赞同：4
> 
> 时间：2012-09-25T08:40:37.020
> 
> 标签：ajax, jsf, richfaces, render

我正在使用 RichFaces。当我 ajax-render a`<rich:panel>`时，我不想渲染`<h:inputText>`这个面板的孩子。例如：

```
<rich:panel id="A">
    <h:inputText id="B" value="B" ></h:inputText> 
    <h:inputText id="C" value="C" ></h:inputText> 
    <h:inputText id="D" value="D" ></h:inputText> 
    ...
    <a4j:commandButton id="button"  value="click me" render="A" />
</rich:panel> 
```

当我单击按钮时，我打算使用 id="A" 呈现面板，但我不想使用 id="B" 呈现输入文本。除了 id="B" 的输入文本之外，如何渲染整个区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:08:35.277

INMO

您应该添加一个包装器`C`并`D`像这样渲染它

```
<h:panelGroup id="CD">
    <h:inputText id="C" value="C" ></h:inputText> 
    <h:inputText id="D" value="D" ></h:inputText> 
</h:panelGroup>
<a4j:commandButton id="button"  value="click me" render="CD" /> 
```

或者直接在`render`属性中指定他们的 id ，像这样

```
<a4j:commandButton id="button"  value="click me" render="C D" /> 
```

# python - 从包中导入模块的 Pythonic 方式

> ID：12579181
> 
> 赞同：6
> 
> 时间：2012-09-25T08:40:51.140
> 
> 标签：python, scipy, python-import

以下 import 语句的效果之间是否存在细微或不那么细微的区别？我发现两者都在示例程序中使用，果然，它们似乎都可以工作。如果它们在功能上完全等效，那将违背 Python 的“只有一种方法可以做事”，所以我很困惑。我刚开始使用 Python 并试图保持良好的习惯。例如，对于 scipy 包中的插值模块...

```
from scipy import interpolate as spi 
```

或者

```
import scipy.interpolate as spi 
```

两者似乎都将插值模块作为 spi 放在当前命名空间中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T08:42:16.067

不，这两个语句之间没有区别，它们都将完全相同的对象放入您的模块命名空间（`globals()`）中，名称完全相同。

他们以略有不同的方式进行，但最终结果是相同的。

本质上，第一个是：

```
from scipy import interpolate
spi = interpolate
del interpolate 
```

第二个归结为

```
import scipy.interpolate
spi = scipy.interpolate
del scipy 
```

最后，您所拥有的只是`spi`绑定到该`interpolate`函数的名称。

就个人而言，我不会像那样重命名函数，我会保留它`import scipy`并使用`scipy.interpolate`，在整个代码中清楚地传达对象来自哪里，*或者*我会使用`from scipy import interpolate`.

重命名对象可能会使您更容易键入，但可能会使您或其他人在您离开几个月后重新访问此代码时更难理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:05:27.340

这是一个品味问题，真的。

在这种特殊情况下，我会使用`import scipy.interpolate as spi`, 来记住它`interpolate`是`scipy`. 如果我要从模块中导入函数，我会使用`from module import function`.

唯一的事情是，与您选择的约定保持一致。

# java - 如何获取当前端口号 我的设备连接在哪个...？

> ID：12579182
> 
> 赞同：0
> 
> 时间：2012-09-25T08:40:55.607
> 
> 标签：java, rxtx

我正在尝试用 java (Swing) 开发一个应用程序，我必须在其中获取并存储来自数据库中设备的事件。我使用 RXTX 查找所有正在使用的端口，但我只想要连接我的设备的那个端口。我使用了一个多产的驱动程序。

```
private void findPorts() {
  Enumeration<CommPortIdentifier> portEnum =
    CommPortIdentifier.getPortIdentifiers();
  int portCount = 0;

  while ( portEnum.hasMoreElements() ) {
    portIdentifier = portEnum.nextElement();

    // populate the portNames array for display in gui.jcbPort
    //if the port is a serial port
    if(portCount < portNames.length &&
       portIdentifier.getPortType() == portIdentifier.PORT_SERIAL)
    {
      //put it in the array
      portNames[portCount] = portIdentifier.getName();
      portCount++;                
    }
  }        
} 
```

# iphone - iPhone视图将出现在应用程序进入前台

> ID：12579183
> 
> 赞同：0
> 
> 时间：2012-09-25T08:40:57.743
> 
> 标签：iphone, viewwillappear

我有一个应用程序，其中有 3 个选项卡来计算距离和所有。当我第一次启动该应用程序时，单击第三个选项卡时会发生一些网络呼叫。现在我把应用程序放到后台。当应用程序进入前台时，它应该调用 viewwillappear 再次进行网络调用。但它没有发生。它没有调用 viewwillappear。

如何检查应用程序何时进入前台，它应该检查第三个选项卡并调用网络方法

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:48:14.670

当应用程序进入前台时，

```
- (void)applicationWillEnterForeground:(UIApplication *)application; 
```

应用程序委托的调用。

您可以在以下位置重新启动所有暂停的任务：

```
- (void)applicationDidBecomeActive:(UIApplication *)application; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:48:01.953

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //save in NSUserDefaults (or wherever) which tab is currently active
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // read from NSUserDefaults which tab was active before, 
    // and use an IF statement to control the further behavior
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:43:22.103

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"%d",tabBar.selectedIndex);
    if (tabBar.selectedIndex == 2) {
        NSLog(@"Your work");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:57:35.400

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
           if(tab3){
          [viewController3 netWorkCallFromHere];
    } 

} 
```

在这种方法中，您必须在 Appdelegate 中声明 BOOL tab3。

在第三个 viewController 中将其设置为 true，并在另一个 viewController 中将其设置为 false。

当它从后台返回时，它将检查标志并相应地工作。

# git - Git 自时间戳

> ID：12579184
> 
> 赞同：0
> 
> 时间：2012-09-25T08:40:59.877
> 
> 标签：git

当我运行命令时：

```
git log --after=21/9/2012 
```

它似乎有一个隐藏的时间戳设置为当前时间。我的意思是，如果我在上午 10 点运行命令，它只会显示从 21 日上午 10 点开始的提交。我查看了文档和一些网站，但找不到指定时间和日期的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:44:33.873

只需将时间放在日期之后。例如

```
git log --after="2012-09-22 00:00:00" 
```

# go - 访问 C 联合字段时的问题

> ID：12579185
> 
> 赞同：4
> 
> 时间：2012-09-25T08:41:07.913
> 
> 标签：go, language-interoperability, cgo

我想访问 Go 中的 C union 字段。以下是我的源代码，但编译时出现错误：

```
package main

// #include <stdio.h>
// #include <stdlib.h>
// union bar {
//        char   c;
//        int    i;
//        double d;
// };
import "C"

import "fmt"

func main() {
    var b *C.union_bar = new(C.union_bar)
    b.c = 4
    fmt.Println(b)
} 
```

当我构建时，出现如下错误：

bc undefined（类型 *[8]byte 没有字段或方法 c）

谁能告诉我访问联合字段的正确方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:33:40.530

为了类型安全，似乎联合被视为 [N]byte, N == 最大联合项的大小。因此，在这种情况下，有必要将“可见”类型处理为 [8] 字节。然后它似乎工作：

```
package main

/*

#include <stdio.h>
#include <stdlib.h>
union bar {
       char   c;
       int    i;
       double d;
} bar;

void foo(union bar *b) {
    printf("%i\n", b->i);
};

*/
import "C"

import "fmt"

func main() {
    b := new(C.union_bar)
    b[0] = 1
    b[1] = 2
    C.foo(b)
    fmt.Println(b)
} 
```

* * *

```
(11:28) jnml@celsius:~/src/tmp/union$ go build && ./union
513
&[1 2 0 0 0 0 0 0]
(11:28) jnml@celsius:~/src/tmp/union$ 
```

* * *

注意：相同的代码将在具有其他字节序的机器上打印不同的数字。

# sql - MS Access 2010：“无法再打开任何数据库。”

> ID：12579186
> 
> 赞同：8
> 
> 时间：2012-09-25T08:41:07.943
> 
> 标签：sql, excel, ms-access, ms-access-2010

在处理单个遗留 MS Access 应用程序时，我遇到了这个奇怪的错误：

```
Cannot open any more databases. 
```

该应用程序广泛使用`UNION`sql 语句。所以这似乎导致访问达到 2048 个打开表的限制。除了摆脱这些工会还有其他机会吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:40:46.107

我在使用链接的外部表时遇到了这个问题。已达到限制，因为不同的查询一遍又一遍地使用了大约 10 个 excel 文件。所以打开表的数量或多或少是查询和表的乘积。

我想使用工会也会增加这个问题。

我的解决方案是先将链接的 excel 表复制到 Access 本机表中。然后使用本机表运行相同的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:50:21.113

通常，这发生在具有许多子表单和/或组合框/列表框的大/复杂表单中。

尝试按照 Saurabh 所说的去做。反正都是好东西。但我认为这些更改不会解决您的问题。

最近，我解决了同样的问题。我发现在打开给定表单时总是会发生这种情况。这种形式有许多子形式和组合。

第一的。尝试使您的表单或表单更简单：您真的需要所有子表单吗？必须始终加载所有子表单？

我解决了在选项卡控件的不同页面中分配子表单的问题。然后在 Change 事件中动态加载和卸载子表单。

最初，只有第一页上的子表单必须分配“SourceObject”属性。其余的，此属性为空。

在更改事件中，尝试执行以下操作：

```
Private Sub TabControl_Change
    Dim pgn As Access.Page
...
    For Each varCtlSubform In Array(Me.Subform1, Me.Subform1, ...)
        Set pgn = varCtlSubform.Parent
        If pgn.PageIndex <> Me.TabControl.value Then
            if varCtlSubform.SourceObject <> "" Then
                varCtlSubform.SourceObject = ""
            End if
        Else
            If varCtlSubform.SourceObject <> ctlSubform.Tag then
                varCtlSubform.SourceObject = ctlSubform.Tag
            End if
        End If
    Next
...
End sub 
```

这是一个迭代所有子窗体控件的通用函数。如果不在活动页面中，请将其卸载。在其他情况下，从标签属性中获取源对象。

您需要避免引用已卸载的子表单，即，如果“Subform1”已卸载，您将收到类似以下内容的错误：Me.Subform1.Form.InvoiceId

这种变化还有其他好处。您的表单将加载更快，记录导航将更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-02T19:53:03.817

您需要评估 UNION 查询的每个部分以及它所依赖的任何其他查询。您可以通过创建一个表示具有许多连接表的查询的临时表来获得改进，并改用该临时表。

当我开始使用 Access 进行开发时，我习惯于进行大型非规范化[雪花](https://en.wikipedia.org/wiki/Snowflake_schema)查询并将它们用作报告和列表框的来源。我没有任何超过 100,000 条记录的表，并且数据库运行得很快。后来我开始收到烦人的“无法打开更多数据库”错误，并发现了我的方式的错误。

我创建了一个表单，可以帮助跟踪您使用了多少数据库连接以及剩余多少。如果您将此表单添加到数据库并在打开查询和其他对象后单击*重新*查询，您将能够找到使用大量连接的对象。

[![在此处输入图像描述](../Images/a4c8e5fe514b600a8dc3f37920ece17e.png)](https://i.stack.imgur.com/jOhAF.png)

请注意，对本地表或查询对象的每个引用都使用 1 个连接。对链接表的引用使用 2 个连接。连接两个链接表的查询将使用 5 个连接。如果您的联合中的许多其他查询都调用了该查询，则该数字加起来很快。也许您不需要子查询中连接表中的任何字段。在这种情况下，您可以进行新查询。

我在网上阅读了很多关于此的内容，有些人认为 Access/Jet 有大约 2,000 个 TableID，但这个数字与我的表单报告的不匹配。我的表格报告的数字与错误完全一致。它可能会计算与 TableID 不同的东西，但它提供了一个准确的计量器来测量您打开新对象时使用的连接数量。

您可以阅读更多内容并从此处下载：

[https://access.wordpress.com/2014/04/01/how-many-database-connections-are-still-available-in-an-access-database/](https://access.wordpress.com/2014/04/01/how-many-database-connections-are-still-available-in-an-access-database/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-10T18:17:44.957

我要感谢**ricardohzsz**的精彩代码！它确实帮助我提高了数据库性能并消除了错误 3048。

我会投票支持该帖子，但我在这里没有足够的声誉来投票。

我必须进行一些修改才能使其满足我的需要（我需要子表单来允许添加和编辑，并且使用此代码使它们成为只读的）。我在这里发布更改，以防它也可以帮助其他人：

```
Private Sub TabControlMain_Change()

Dim pgn As Access.Page
Dim sbf As SubForm
Dim strSubForm As String
Dim VarCtlSubform As Variant

For Each VarCtlSubform In Array(Me.sf1, Me.sf2, Me.sf3, etc) 
Set pgn = VarCtlSubform.Parent
    If pgn.PageIndex <> Me.TabControlMain.Value Then
        If VarCtlSubform.SourceObject <> "" Then
            VarCtlSubform.SourceObject = ""
        End If
    Else

        If VarCtlSubform.SourceObject <> VarCtlSubform.Tag Then
            VarCtlSubform.SourceObject = VarCtlSubform.Tag

            strSubForm = VarCtlSubform.Name
            Set sbf = Screen.ActiveForm.Controls(strSubForm)
            sbf.Form.AllowAdditions = True
            sbf.Form.AllowEdits = True
        End If
    End If
Next 
```

结束子

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T09:02:40.947

解决此问题的唯一真正方法是使用一组临时表。将联合的结果插入到临时表中，然后使用它们来限制每个查询的表数。我通常在我的临时表前加上下划线 (_tmpCustomers)，然后在完成后销毁它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:07:55.653

您的应用程序正试图打开太多与 Access 数据库的连接。不仅仅是你的 sql 语句中的表加起来为 2048，甚至表单、报告、组合框、未关闭的记录集等加起来就是你的应用程序使用的连接数。您可以在这里尝试的几件事：
1\. 关闭您没有真正使用的资源（例如记录集）。
2\. 如果您正在使用域聚合函数（例如 DLookup），请使用 Elookup 更改它，因为它会在自身之后显式清理。
3.您可以修改您的sql代码以使用临时表。
希望能帮助到你。

# java - 使用 log4j 编写审计日志

> ID：12579187
> 
> 赞同：9
> 
> 时间：2012-09-25T08:41:16.430
> 
> 标签：java, log4j

我有一个应用程序需要编写两种不同类型的日志：应用程序日志和审计日志。应用程序日志用于调试目的，而审计日志用于记录执行的操作。两个日志都将位于不同的文件中，并且每个文件应该只包含提到的那些日志（意味着审计日志文件不能有应用程序日志，反之亦然）。

如何使用 log4j 实现这一点？
我知道实现这一点的一种方法是在 log4j 中定义自定义日志级别。还有其他/更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:55:05.640

我有同样的用例。在您的 log4j.xml 中，您可以定义两个不同的记录器和每个记录器的附加程序。因此举个例子：

```
<logger name="LOGGER_1" additivity="false">
    <appender-ref ref="LOGGER_FILE_1"/>
</logger>

<appender name="LOGGER_FILE_1" class="org.jboss.logging.appender.RollingFileAppender">
   <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
   <param name="File" value="${jboss.server.log.dir}/loggerFile1.log"/>
   <param name="Append" value="true"/>
   <param name="MaxFileSize" value="20MB"/>
      <param name="MaxBackupIndex" value="5"/>

      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
      </layout>
</appender> 
```

在您的 Java 代码中，您可以使用“Logger.getLogger("LOGGER_1")”创建一个记录器，它将日志输出写入定义的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:43:43.797

我不认为你需要一个新的水平。相反，您需要一个特定的[Logger](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html)（或一组`Loggers`）。

通常你用类/包名来实例化它们。但是，出于审计目的，您可以简单地用名称“审计”（或类似名称）实例化一个新`Logger`的，然后使用标准机制进行适当的配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T03:12:53.360

Log4j 2.0 的创建支持审计日志记录作为其主要目的之一。推荐的使用模式是使用 Log4j（或 SLF4J）的 EventLogger，然后使用 FlumeAppender，它可以保证交付到您的目标日志存储库。有关详细信息，请参阅[http://logging.apache.org/log4j/2.x/manual/eventlogging.html](http://logging.apache.org/log4j/2.x/manual/eventlogging.html)和[http://logging.apache.org/log4j/2.x/manual/appenders.html#FlumeAppender](http://logging.apache.org/log4j/2.x/manual/appenders.html#FlumeAppender)。如果您有其他问题，请随时在 Apache Log4j 邮件列表中提问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:49:34.390

Log4J 中的 appender 支持过滤器。为了分离 2 个文件中的消息，您可以使用 LevelMatchFilter [http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/LevelMatchFilter.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/LevelMatchFilter.html)

所以基本上你为 2 个不同的文件定义了 2 个附加程序，每个文件都有适当的过滤器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:47:08.333

自定义日志级别是一个选项，但我不确定您是否需要它。

您可以定义 2 个附加程序：一个用于日志记录，另一个用于写入审计文件的审计。然后，您可以创建一个与审计附加程序连接的记录器，并使用它来报告审计操作，同时使用您通常使用的常规记录器保留所有其他报告。

# ruby-on-rails - rails 3.1 中的 radio_button_tag

> ID：12579190
> 
> 赞同：1
> 
> 时间：2012-09-25T08:41:22.200
> 
> 标签：ruby-on-rails, ruby

我有一个问题要问。我将 radio_button_tag 与 rails 3.1 一起使用。我遇到的问题是，例如：如果我有升序和降序单选按钮，则应该只选择一个。但在我的情况下，两个单选按钮标签都被选中。

请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:45:36.690

这充其量只是一个猜测，因为您还没有输入代码，但是：

您需要确保您的单选按钮具有相同的 HTML`name`属性，方法是在`radio_button_tag`. 请参阅[文档](http://apidock.com/rails/v3.2.8/ActionView/Helpers/FormTagHelper/radio_button_tag)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:48:48.393

如果两个单选字段名称相同，则可以一次选择一个！

传递`true`给您最初要选择的标签。例如，如果您希望最初检查“降序”，请编写如下：

```
radio_button_tag 'order', 'asc'
radio_button_tag 'order', 'desc', true 
```

# java - 用于在 Java 中漂亮打印时间段的库，仅提供最重要的字段

> ID：12579194
> 
> 赞同：1
> 
> 时间：2012-09-25T08:41:41.807
> 
> 标签：java, date, grails, groovy

我想将时间段格式化为英语和其他语言，[就像 Joda Time 一样](https://stackoverflow.com/questions/1440557/joda-time-period-to-string)。

但是，我想要一种简单的方法来列出最重要的一两个字段，例如“2 年零 3 个月”或“5 天”，而无需编写代码来处理这个问题。Joda Time 的问题在于，除非您编写代码，否则它会为您提供“2 年、3 个月和 5 天”之类的输出。

有像[Pretty Time](http://ocpsoft.org/prettytime/)这样的库，它们完全符合我的要求，但仅用于与现在比较时间，例如“3 个月前”。我只想要“3个月”。

肯定有一个库可以像 Pretty Time 一样工作，但持续时间是通用的？

我专门使用 Grails / Groovy，但一个普通的 Java 解决方案同样可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:48:11.733

为什么你不能用 Joda Time 写一点代码？我有一个和你类似的问题，我用这样的实用方法解决了它：

> ```
> DateTime dt = new DateTime(); // Now
> DateTime plusDuration = dt.plus(new Duration(110376000000L)); // Now plus three years and a half
> 
> // Define and calculate the interval of time
> Interval interval = new Interval(dt.getMillis(), plusDuration.getMillis());
> 
> // Parse the interval to period using the proper PeriodType
> Period period = interval.toPeriod(PeriodType.yearMonthDayTime());
> 
> // Define the period formatter for pretty printing the period
> PeriodFormatter pf = new PeriodFormatterBuilder()
>         .appendYears().appendSuffix("y ", "y ")
>         .appendMonths().appendSuffix("m", "m ").appendDays()
>         .appendSuffix("d ", "d ").appendHours()
>         .appendSuffix("h ", "h ").appendMinutes()
>         .appendSuffix("m ", "m ").appendSeconds()
>         .appendSuffix("s ", "s ").toFormatter();
> 
> // Print the period using the previously created period formatter
> System.out.println(pf.print(period).trim()); 
> ```

也许这不是您想要的，但我希望它有所帮助。

问候。

# android - 如何检测报警事件？

> ID：12579198
> 
> 赞同：1
> 
> 时间：2012-09-25T08:41:53.263
> 
> 标签：android, android-intent, alarmmanager

我正在开发一个音乐应用程序。
当闹钟响起时，音乐流必须停止。
问题是**如何检测报警事件**。警报可能随时响起。它是由用户使用安卓报警系统设置的。

# download - 如何使用 wget 下载所有子目录？

> ID：12579200
> 
> 赞同：0
> 
> 时间：2012-09-25T08:41:55.440
> 
> 标签：download, wget, subdirectory

我正在使用带有这些参数的 wget，但我没有下载子目录中的文件：

```
wget -r --no-parent --user=user --password=pass http://www.domain.com/download 
```

-r 参数用于递归，但我只获取下载/目录的文件。我需要一些其他的论据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:45:44.450

您应该设置最大[深度](http://www.gnu.org/software/wget/manual/html_node/Recursive-Retrieval-Options.html)。

# android - GCM 问题。由于包名称中的大写字母导致清单格式错误

> ID：12579202
> 
> 赞同：5
> 
> 时间：2012-09-25T08:41:58.740
> 
> 标签：android, android-manifest, google-cloud-messaging

当我尝试在我的应用程序中添加 GCM 时，当包名称以大写字母开头时，我遇到了问题。

问题出在代码中：

```
<permission android:name="Myapplication.com.permission.C2D_MESSAGE" 
android:protectionLevel="signature" /> 
```

当您尝试在模拟器中安装它时，输出为：

```
install_parse_failed_manifest_malformed 
```

如果您正在启动一个新应用程序，您可以将包名称从*“Myapplication.com”*更改为*“myapplication.com”*（小写字母），但如果您要更新现有应用程序，则无法这样做，因为 Google Play更新时不承认包名的改变。

# javascript - 如何使用 vb.net 计算硒的响应时间

> ID：12579206
> 
> 赞同：1
> 
> 时间：2012-09-25T08:41:58.180
> 
> 标签：javascript, vb.net, selenium, load, automated-tests

我需要编写一个自动化测试来计算屏幕响应的平均响应时间。我正在使用硒和 VB.net。请指导如何计算。因为 waitforpage() 只允许您指定等待的最长时间。我如何才能真正获得加载时间。

亲切的问候 Thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:27:42.117

好吧，我将与您分享我使用但仅在 java 中使用的方法。希望你能以某种方式在 vb.net 上采用它。

```
public class CodeTimingMeasurement extends BaseSeleniumTest {
    @Test
    public void rmsHomeTiming() throws IOException, InterruptedException {

        doLogout();
        locatorFindingHandling("login.logininput", "login.admin.login");

        locatorFindingHandling("login.passinput", "login.admin.pass");
        long startTime = System.currentTimeMillis();
        locatorFindingHandling("login.loginbutton");

        loaderInficatorsDisappear("rms.loadingwindow");

        fluentWait(By.cssSelector(propertyKeysLoader("rms.home.timeoffs.gearicon")));
        fluentWait(By.cssSelector(propertyKeysLoader("rms.home.logout")));
        fluentWait(By.cssSelector(propertyKeysLoader("home.timeoffs.own")));

        long endTime = System.currentTimeMillis();
        long totalTime = endTime - startTime;
        System.out.println("Totaltime: " + totalTime + " milliseconds");

    }
} 
```

这个想法如下：您按下登录按钮或任何其他元素导致页面加载。然后你启动计时器。然后选择一组应该显示在页面上的元素。并使用 fluentWait 机制等到它们出现。然后应该停止计时器。

流利的等待[信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html) 流利的等待方法代码：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
//                .pollingEvery(5, TimeUnit.SECONDS)
                .pollingEvery(1, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              }     ; 
```

希望somthning对你来说很清楚）

# java - 如何管理连接池

> ID：12579207
> 
> 赞同：0
> 
> 时间：2012-09-25T08:42:01.187
> 
> 标签：java, jboss, datasource

连接池通常由应用程序服务器管理，对吗？但是我们现在可以在 META-INF 文件夹中添加一个 context.xml 并在那里配置数据源。

1.  这是一个好方法吗？即使在这种情况下，即使我们在应用程序中有配置，服务器也会获取这些配置并管理池对吗？

    当我不关闭连接时，我注意到它返回不同的连接对象。如果我关闭连接，它会返回相同的连接对象 GenericObjectPool.numActive 在这种情况下显示 1。但是当我不关闭连接时，它也会将连接对象返回到池中，对吗？因为我看到 GenericObjectPool.numActive 不断增加每个请求。

2.  我的第二个问题是虽然我没有关闭连接，但现在仍然返回到连接池？所以即使在请求完成后，为什么服务器不选择该连接对象而是创建一个新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:31:57.590

如果您不关闭连接，它将不会返回到池中。连接必须始终在 finally 块中通过从池中获取它的方法关闭。

您的服务器或池可能有方法检测连接尚未关闭，但不再使用，因此将其返回池，但您不能依赖这种机制。

# c# - ToolStripMenu 中的父项单击触发

> ID：12579209
> 
> 赞同：1
> 
> 时间：2012-09-25T08:42:08.053
> 
> 标签：c#, windows

我在我的 C#.net windows 应用程序中使用 toolStripMenu。

我在toolStripMenu中添加了一个ToolStripSplitButton，这个按钮实现了它的点击事件，并且有2个项目的第一个是“保存”，第二个是“删除”，两个项目都实现了点击事件。

当我运行应用程序并单击 toolStripMenu 按钮下拉图标（三角形图标以获取其子项）时，ToolStripSplitButton![点击事件正在触发](../Images/5b28d944b2f5301207a1a8241b2ae7c0.png)我想只有当我单击工具条按钮而不是其下拉图标时才应该触发它。

请建议我如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:54:18.457

尝试这个：

```
var button = new ToolStripSplitButton("Save", "path to Save image");
button.ButtonClick += clickEventHandler; 
```

ToolStripSplitButton 有两个点击处理程序。一种称为“Click”，另一种称为“ButtonClick”。此`clickEventHandler`构造函数`new ToolStripSplitButton("Save", "path to Save image", clickEventHandler)`中的 是“单击”处理程序，无论您单击控件的哪个位置都会触发。“ButtonClick”处理程序仅在您单击按钮本身时触发，而不是下拉图标。

# amazon - 从亚马逊获取购买反馈

> ID：12579212
> 
> 赞同：2
> 
> 时间：2012-09-25T08:42:24.887
> 
> 标签：amazon, amazon-product-api

我试图以某种方式获得有关亚马逊产品的附属链接的反馈。
所以链接将包含一个参数（用户名），以便我知道哪个用户（登录到我的网站）购买了这个产品。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T21:40:47.147

有很多附属程序提供这种功能，但不幸的是亚马逊没有。他们不提供任何方式来了解谁购买了哪些物品（或者即使某个特定的人购买了任何东西）。您所获得的只是您的关联页面上的报告，这些报告告诉您在特定日期购买/运送了哪些商品以及您获得了多少点击次数。

从技术上讲，您可以为您网站上的每个用户分配一个特定的跟踪 ID，但这很麻烦，而且我认为他们不喜欢您以这种方式处理它（另外，您可以拥有的跟踪 ID 的数量是有限制的.. . 虽然我不记得它是什么）。

# spring - Spring Webflow 2 中的动作实现

> ID：12579213
> 
> 赞同：0
> 
> 时间：2012-09-25T08:42:31.357
> 
> 标签：spring, action, implementation, spring-webflow

我正在尝试实现这样的 SWF 操作：

```
@Component(value = "initializeProjectsTestingFormAction")
public class InitializeProjectsTestingFormAction implements Action {

    @Autowired
    private ProjectsBo projectsBo;

    @Override
    public Event execute(RequestContext requestContext) throws Exception {
        ProjectsTestingForm projectsTestingForm = (ProjectsTestingForm) requestContext.getFlowScope().get("projectsTestingForm");

        EndUse selectedEndUse = (EndUse) requestContext.getFlowScope().get("selectedEndUse");
        projectsTestingForm.setProjects(projectsBo.findImplementableProjectsForTesting(selectedEndUse));

        return new Event("", "initializeProjectsTestingFormAction");
    }
} 
```

当流程调用动作时，它目前工作正常，但我对动作必须返回的事件感到有些不安。有谁知道 Event 是什么以及根据其值（源和 id）可能对流行为产生什么影响？

我正在阅读文档，但我完全无法理解并回答自己的问题：

[http://static.springsource.org/spring-webflow/docs/2.3.x/javadoc-api/index.html](http://static.springsource.org/spring-webflow/docs/2.3.x/javadoc-api/index.html) http://static.springsource.org/spring-webflow/docs/2.3.x/javadoc-api /org/springframework/webflow/execution/Event.html

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:52:39.690

事件的`id`（构造函数的第二个参数）应该对应于在`on`调用动作之后应该采取的转换的属性。

# android - Android Catch Notes 应用程序，如圆形菜单

> ID：12579224
> 
> 赞同：21
> 
> 时间：2012-09-25T08:43:05.447
> 
> 标签：android, menu, geometry

我要开发应用程序，我想创建像[Catch notes App这样的菜单](https://play.google.com/store/apps/details?id=com.threebanana.notes&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS50aHJlZWJhbmFuYS5ub3RlcyJd)

屏幕截图

![在此处输入图像描述](../Images/c607bdd1c9b43abbe9e2094570755c41.png)

任何知道我如何实现这个或者是否有任何可用的库的人。请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T22:10:16.237

我最近创建了这个圆形菜单以添加到我最近的项目中。看起来像 ![在此处输入图像描述](../Images/2b7207c420b3821739812003fcf4230f.png)

您需要的是创建一个新视图并绘制此视图，检查用户输入（他正在触摸的位置），设计一个反馈机制，例如，在我看来，如果用户触摸了 5 个弧中的任何一个，背景颜色会发生变化到天蓝。这是我的视图类代码。

[编辑]：这次我发布了我所有的视图代码。希望它可以帮助你。

```
public class SmallCircleView extends View{

    private Paint smallCircleCore;
    private Paint lineCore;
    private Paint bigArc;
    private Paint bigArcDraw;
    private Paint pencil;
    private Paint middleCircleBody;
    private Paint arcTouchedBack;
    private Paint circlePaint;

    private int initial, midInitial;
    private int finalangle;
    private int middleCircleRadius;
    private int i =0;

    private int centerCircleradius;

    int[] colors = new int[]{0xFF33B5E5,
            0xFFAA66CC,
            0xFF99CC00,
            0xFFFFBB33,
            0xFFFF4444,
            0xFF0099CC,
            0xFFAA66CC,
            0xFF669900,
            0xFFFF8800,
            0xFFCC0000};

    private RectF oval = new RectF();
    private RectF middleOval = new RectF();
    private RectF finalOVal = new RectF();

    private Context context;
    private int px, py;

    private boolean isClicked = true;
    private boolean[] arcTouched= new boolean[]{false, false, false, false, false};

    EmbossMaskFilter emboss;
    EmbossMaskFilter forBig;

    private ArrayList<Bitmap> bitmap = new ArrayList<Bitmap>();

    public SmallCircleView(Context context) {
        super(context);
        this.context = context;
        initSmallCircle();

        // TODO Auto-generated constructor stub
    }

    public SmallCircleView(Context context, AttributeSet attri)
    {
        super(context, attri);
        this.context = context;

        initSmallCircle();
    }

    public SmallCircleView(Context context, AttributeSet attri, int defaultStyle)
    {
        super(context, attri, defaultStyle);
        this.context = context;

        initSmallCircle();
    }

    private void initSmallCircle()
    {
        setFocusable(true);

        smallCircleCore = new Paint(Paint.ANTI_ALIAS_FLAG);
        lineCore = new Paint(Paint.ANTI_ALIAS_FLAG);
        bigArc = new Paint(Paint.ANTI_ALIAS_FLAG);
        pencil = new Paint(Paint.ANTI_ALIAS_FLAG);

        lineCore.setColor(0xFFFFFFFF);
        lineCore.setStyle(Paint.Style.FILL);
        lineCore.setStrokeWidth(4);
        //bigCircleCore.setStrokeWidth(5);

        smallCircleCore.setStyle(Paint.Style.FILL);
        smallCircleCore.setColor(0xFFFFFFFF);

        bigArc.setColor(0xFF424242);
        bigArc.setStyle(Paint.Style.FILL);

        bigArcDraw = new Paint(smallCircleCore);
        bigArcDraw.setStrokeWidth(4);
        bigArcDraw.setColor(0xFF000000);

        pencil.setStrokeWidth(0.5f);
        pencil.setColor(0x80444444);
        pencil.setStyle(Paint.Style.STROKE);

        middleCircleBody = new Paint(bigArc);
        middleCircleBody.setColor(0xFFE6E6E6);

        arcTouchedBack = new Paint(Paint.ANTI_ALIAS_FLAG);
        arcTouchedBack.setColor(0xFF81DAF5);
        arcTouchedBack.setStyle(Paint.Style.FILL);      

        circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setStyle(Paint.Style.STROKE);
        circlePaint.setStrokeWidth(10);

        float[] direection = new float[]{1,1,1};
        float light = 0.4f;
        float specualr = 6;
        float blur = 3.5f;      

        emboss = new EmbossMaskFilter(direection, light, specualr, blur);
        forBig = new EmbossMaskFilter(direection, 1f, 4, 2.5f);

        bitmap.clear();
        bitmap.add(BitmapFactory.decodeResource(getResources(), R.drawable.tasks));
        bitmap.add(BitmapFactory.decodeResource(getResources(), R.drawable.file_manager));
        bitmap.add(BitmapFactory.decodeResource(getResources(), R.drawable.home));
        bitmap.add(BitmapFactory.decodeResource(getResources(), R.drawable.contacts));      
        bitmap.add(BitmapFactory.decodeResource(getResources(), R.drawable.reminder));

        middleCircleBody.setMaskFilter(forBig);
        bigArc.setMaskFilter(forBig);

        String log="";
        Log.d(log, "Value of px & py " + getMeasuredWidth() + " " + getMeasuredHeight());
    }

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        int measuredWidth = measure(widthMeasureSpec);
        int measuredHeight = measure(heightMeasureSpec);

        int d = Math.min(measuredWidth, measuredHeight);

        setMeasuredDimension(d,d);
    }

    private int measure(int measureSpec)
    {
        int result = 0;

        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if(specMode == MeasureSpec.UNSPECIFIED)
        {
            result = 200;
        }
        else
        {
            result = specSize;
        }

        return result;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub

        px = getMeasuredWidth()/2;
        py = getMeasuredHeight();

        initial = 144;
        finalangle = 252;

        centerCircleradius  = 30;
        middleCircleRadius = 140;

            int init, fina;
            init = 160;
            fina = 360;
            finalOVal.set(px-middleCircleRadius-4, py-middleCircleRadius-4, px+middleCircleRadius+4, py+middleCircleRadius+4);
            middleOval.set(px-middleCircleRadius, py-middleCircleRadius, px+middleCircleRadius, py+middleCircleRadius);
            while(init<fina)
            {
                circlePaint.setColor(colors[i]);
                canvas.drawArc(finalOVal,init,10,false, circlePaint);
                i++;
                if(i>=colors.length)
                {
                    i=0;
                }
                init = init + 10;

            }
            //Setting Mask Filter

            canvas.drawArc(middleOval, 180, 180, false, pencil);

            midInitial = 180;

            i=0;

            //Creating the first Arc
            if(arcTouched[0])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(0), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[1])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(1), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[2])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(2), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;
            //Creatring the second Arc

            if(arcTouched[3])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(3), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[4])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(4), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);           
            canvas.drawCircle(px, py-10, 40, pencil);
            canvas.drawCircle(px, py-10, 39, smallCircleCore);

            canvas.drawCircle(px, py-10, 35, bigArc);
            canvas.drawCircle(px, py-10, 20, smallCircleCore);

            canvas.drawCircle(px, py-10, 15, bigArc);
            canvas.drawLine(px-8, py-10, px+8, py-10, lineCore);

        canvas.save();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub

        float centerX = px;
        float centerY = (py-centerCircleradius+(centerCircleradius/4));

        switch(event.getAction())
        {
            case MotionEvent.ACTION_DOWN:
            {
                if(isInSideCenterCircle(centerX, centerY, centerCircleradius, event.getX(), event.getY()))
                {
                    return super.onTouchEvent(event);
                }
                if(isInArc(180, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[0] = true;
                    invalidate();
                    return true;
                }

                if(isInArc(216, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[1] = true;
                    invalidate();
                    return true;
                }

                if(isInArc(252, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[2] = true;
                    invalidate();
                    return true;
                }

                if(isInArc(288,36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[3] = true;
                    invalidate();
                    return true;
                }

                if(isInArc(324, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[4] = true;
                    invalidate();
                    return true;
                }
            }
            case MotionEvent.ACTION_UP:
            {

                if(isInSideCenterCircle(centerX, centerY, centerCircleradius, event.getX(), event.getY()))
                {
                    return super.onTouchEvent(event);
                }

                if(isInArc(180, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {
                    Toast.makeText(getContext(), "In the first Arc !!!", Toast.LENGTH_SHORT).show();
                    makeAllFalse();

                    invalidate();
                    return false;
                }

                if(isInArc(216, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {
                    Toast.makeText(getContext(), "In Second Arc", Toast.LENGTH_SHORT).show();
                    makeAllFalse();

                    invalidate();
                    return false;
                }

                if(isInArc(252, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {
                    Toast.makeText(getContext(), "In Third Arc", Toast.LENGTH_SHORT).show();
                    makeAllFalse();

                    invalidate();
                    return false;
                }

                if(isInArc(288,36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {
                    Toast.makeText(getContext(), "In fourth Arc", Toast.LENGTH_SHORT).show();
                    makeAllFalse();

                    invalidate();
                    return false;
                }

                if(isInArc(324, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {
                    Toast.makeText(getContext(), "In Fifth Arc", Toast.LENGTH_SHORT).show();
                    makeAllFalse();

                    invalidate();
                    return false;
                }

                else
                {
                    makeAllFalse();
                    invalidate();
                    return super.onTouchEvent(event);
                }
            }
            case MotionEvent.ACTION_MOVE:
            {
                if(isInSideCenterCircle(centerX, centerY, centerCircleradius, event.getX(), event.getY()))
                {
                    makeAllFalse();
                    invalidate();
                    return super.onTouchEvent(event);
                }

                if(isInArc(180, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[0] = true;
                    invalidate();
                    return false;
                }

                if(isInArc(216, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[1] = true;
                    invalidate();
                    return false;
                }

                if(isInArc(252, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[2] = true;
                    invalidate();
                    return false;
                }

                if(isInArc(288,36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[3] = true;
                    invalidate();
                    return false;
                }

                if(isInArc(324, 36, middleCircleRadius, px, py, event.getX(), event.getY()))
                {

                    makeAllFalse();
                    arcTouched[4] = true;
                    invalidate();
                    return false;
                }

                else
                {
                    makeAllFalse();
                    invalidate();
                    return super.onTouchEvent(event);
                }
            }
        }
        return super.onTouchEvent(event);
    }

    private boolean isInSideCenterCircle(float centerX, float centerY, float radius, float co_ordinateX, float co_ordinateY)
    {       
        return ((Math.pow((centerX-co_ordinateX),2))+(Math.pow((centerY-co_ordinateY),2))-Math.pow(radius, 2))<=0;      
    }

    private void changeIsClicked()
    {
        isClicked =(isClicked?(false):(true));
    }

    private RectF putBitmapTo(int startAngle, int SweepAngle, float radius, float centerX, float centerY)
    {
        float locx = (float) (centerX +((radius/17*11)*Math.cos(Math.toRadians(
                                                         (startAngle+SweepAngle+startAngle)/2
                                                         ))
                                                         ));
        float locy = (float) (centerY + ((radius/17*11)*Math.sin(Math.toRadians(
                                                         (startAngle+SweepAngle+startAngle)/2
                                                         ))
                                                         ));

        return new RectF(locx-20, locy-20, locx+20, locy+20);   

    }

    private boolean isInArc(int startAngle, int SweepAngle, float radius, float centerX, float centerY, float toCheckX, float toCheckY)
    {

        double degree;

        if(
           (Math.pow(centerX - toCheckX, 2) + 
           Math.pow(centerY - toCheckY, 2) -
           Math.pow(radius, 2))<=0)
        {           
            double radian = Math.atan((centerY-toCheckY)/(centerX-toCheckX));
            if(radian<0)                
            {
                degree = Math.toDegrees(radian);
                degree = 360+ degree;                   
            }
            else
            {               
                degree = Math.toDegrees(radian);
                degree = 180 + degree;          
            }           

            if(degree>=startAngle)
            {               
                if(degree<=(startAngle+SweepAngle))
                {                   
                    return true;
                }               
            }           
        }       
        else
        {
            return false;
        }       
        return false;
    }

    private void makeAllFalse()
    {
        for(int i=0;i<arcTouched.length;i++)
        {
            arcTouched[i] = false;
        }
    }

} 
```

我知道这不是最好的方法，也不专业。我根据需要创建了这个菜单。在您更改角度计算之前，它无法以某种方式缩放。

# android - Ajax 请求发送到服务器但返回状态码 0

> ID：12579226
> 
> 赞同：2
> 
> 时间：2012-09-25T08:43:07.130
> 
> 标签：android, jquery, ajax, cordova

我的应用程序使用捆绑在 android 应用程序中的 phonegap 1.7.0 和 jquery 1.7.1。我的 html 包含多个 getJson() 调用，除了我提交表单时成功运行的调用。

```
$('#proposalForm1').submit(function(event){
    var formInput = $(this).serialize();
    $('#loader').show();
    $.getJSON("http://xxx.xxx.xxx.xxx:8282/Service004/user/jsProposalPage1.action",  formInput,function(data){
    $('#loader').hide();
    if(data.serviceErrorMsg == ""){
      window.location.replace("proposalDisplay.html");
    }
    else{
      alert(data.serviceErrorMsg);
    }
}).error(function(xhr){
        $('#loader').hide();
        alert(xhr.status);
        navigator.notification.alert(
            'Please try again later!',  // message
            doNothing,         // callback
            'Server Unavailable',            // title
            'Exit'                  // buttonName
            );
    });
    return false;
}); 
```

有时它可以工作，但大多数情况下它会返回错误代码 0。发出请求的应用服务器成功接收请求并调用 Web 服务。应用服务器成功接收到来自 Web 服务的响应，但 phonegap 应用报告状态代码 0。有人可以帮我吗？当使用 Web 工程而不是电话间隙为黑莓捆绑应用程序时，也会存在同样的问题。在 Android 2.3.3 和 Blackberry 9300 曲线上测试。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:15:04.063

我建议将您的 $.getJSON 调用切换为完整的 $.ajax() 调用并将超时设置为更长的时间。这可能是由于您的网络服务需要很长时间才能回复。

如果这不起作用，您可能需要将您的应用服务器配置为等待回复，直到它有响应。状态码 0 表示“响应为空，（甚至没有返回标头）。这意味着连接已被接受，然后正常关闭（TCP FIN）。”

有很多事情可能会导致这种情况，在您的情况下很可能是超时，但防火墙也可能是罪魁祸首（不太可能，因为应用服务器正在处理其他请求）。

# objective-c - Xcode 开关/案例完成和警告

> ID：12579232
> 
> 赞同：4
> 
> 时间：2012-09-25T08:43:18.727
> 
> 标签：objective-c, autocomplete, xcode4.5

如何让 XCode (4.5, 4G182) 在 switch/case 构造中完成案例，并警告我缺少案例？

例如：

```
for (int i=0;i<[flat elementCount];i++) {
    NSPoint elements[3];
    NSBezierPathElement elem=[flat elementAtIndex:i associatedPoints:elements];
    switch (elem ) {
        case NSMoveToBezierPathElement: break;
        case NSLineToBezierPathElement: break;
        case 
```

我过去曾见过这种情况。一旦街区关闭，它还警告我有关失踪案件。XCode 4.5 你怎么能做到这一点？

编辑：检查开关语句是否启用，我没有警告。

这是一个完成工作的小例子：

```
typedef enum  {
    kThisCase = 0,
    kThatValue = 1,
    kLastOne = 2
} myEnum;

myEnum var= kLastOne;

switch (var) {
    case kThatValue: break;
    case kLastOne: break;
    case 
```

`CTRL`+`SPACE`这里给了我 myEnum 的剩余可能值

![完成工作](../Images/e35166ed82b1c10e24d73d9ff81e1be0.png) ![完成不工作](../Images/899607a80342ef8df3cf10acbd8d12f4.png)

在 NSBezierPathElement 完成的情况下，当我添加这个时：

```
typedef enum {
    NSMoveToBezierPathElement,
    NSLineToBezierPathElement,
    NSCurveToBezierPathElement,
    NSClosePathBezierPathElement
} NSBezierPathElement; 
```

（从快速帮助面板复制）在开关构造之前，自动完成工作，但警告没有。

## NSBezierPath.h 的内容

```
enum {
    NSMoveToBezierPathElement,
    NSLineToBezierPathElement,
    NSCurveToBezierPathElement,
    NSClosePathBezierPathElement
};
typedef NSUInteger NSBezierPathElement; 
```

这是完成不起作用的解释吗？这个枚举不应该是 NSBezierPathElement 的类型吗？

这与快速帮助面板不匹配。在快速帮助面板中，我有这个：`typedef enum { NSMoveToBezierPathElement, NSLineToBezierPathElement, NSCurveToBezierPathElement, NSClosePathBezierPathElement} NSBezierPathElement;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:04:41.260

您需要一个默认启用的编译器设置。在构建设置中搜索“case”，并找到名为“Check Switch Statements”的（标题），这是 GCC_WARN_CHECK_SWITCH_STATEMENTS。

我认为这需要枚举实际上已正确定义，而不是 NSInteger 等。如果常量是整数，而不是枚举，那么检查将无济于事，因为编译器不知道整数是相关的。

另外，非常重要的是，删除 default: 子句。如果它在那里，那么您正在隐式处理此案例中的所有缺失案例，因此不会触发警告！

# javascript - 使颜色更红、更绿等的最佳值？

> ID：12579234
> 
> 赞同：0
> 
> 时间：2012-09-25T08:43:23.217
> 
> 标签：javascript, colors, rgb, pixel-manipulation

给定一张图片的 RGB 像素图，什么是好的和有意义的值可以使图片更红、更绿、更蓝、更蓝、更蓝、更蓝、更洋红或更黄？

目前在我的 JavaScript 代码中，我有以下 RGB 变化值，但我想知道是否有基于颜色理论的更优化的比率——例如，对于更多的红色，我使用 rgb(+45,-27,-27)，但我我不太确定例如-27。

```
var strength = 45;
var strengthLess = strength - 18;
this.changeColorModes = {
        'moreRed'   : {r: strength, g: -strengthLess, b: -strengthLess},
        'moreGreen' : {r: -strengthLess, g: strength, b: -strengthLess},
        'moreBlue'  : {r: -strengthLess, g: -strengthLess, b: strength},
        'moreCyan'  : {r: -strengthLess, g: strengthLess, b: strengthLess},
        'moreMagenta'  : {r: strengthLess, g: -strengthLess, b: strengthLess},
        'moreYellow'  : {r: strengthLess, g: strengthLess, b: -strengthLess}
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:01:07.797

```
var pad = function(num, totalChars) {
    var pad = '0';
    num = num + '';
    while (num.length < totalChars) {
        num = pad + num;
    }
    return num;
};

// Ratio is between 0 and 1
var changeColor = function(color, ratio, darker) {
    // Trim trailing/leading whitespace
    color = color.replace(/^\s*|\s*$/, '');

    // Expand three-digit hex
    color = color.replace(
        /^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,
        '#$1$1$2$2$3$3'
    );

    // Calculate ratio
    var difference = Math.round(ratio * 256) * (darker ? -1 : 1),
        // Determine if input is RGB(A)
        rgb = color.match(new RegExp('^rgba?\\(\\s*' +
            '(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])' +
            '\\s*,\\s*' +
            '(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])' +
            '\\s*,\\s*' +
            '(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])' +
            '(?:\\s*,\\s*' +
            '(0|1|0?\\.\\d+))?' +
            '\\s*\\)$'
        , 'i')),
        alpha = !!rgb && rgb[4] != null ? rgb[4] : null,

        // Convert hex to decimal
        decimal = !!rgb? [rgb[1], rgb[2], rgb[3]] : color.replace(
            /^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,
            function() {
                return parseInt(arguments[1], 16) + ',' +
                    parseInt(arguments[2], 16) + ',' +
                    parseInt(arguments[3], 16);
            }
        ).split(/,/),
        returnValue;

    // Return RGB(A)
    return !!rgb ?
        'rgb' + (alpha !== null ? 'a' : '') + '(' +
            Math[darker ? 'max' : 'min'](
                parseInt(decimal[0], 10) + difference, darker ? 0 : 255
            ) + ', ' +
            Math[darker ? 'max' : 'min'](
                parseInt(decimal[1], 10) + difference, darker ? 0 : 255
            ) + ', ' +
            Math[darker ? 'max' : 'min'](
                parseInt(decimal[2], 10) + difference, darker ? 0 : 255
            ) +
            (alpha !== null ? ', ' + alpha : '') +
            ')' :
        // Return hex
        [
            '#',
            pad(Math[darker ? 'max' : 'min'](
                parseInt(decimal[0], 10) + difference, darker ? 0 : 255
            ).toString(16), 2),
            pad(Math[darker ? 'max' : 'min'](
                parseInt(decimal[1], 10) + difference, darker ? 0 : 255
            ).toString(16), 2),
            pad(Math[darker ? 'max' : 'min'](
                parseInt(decimal[2], 10) + difference, darker ? 0 : 255
            ).toString(16), 2)
        ].join('');
};
var lighterColor = function(color, ratio) {
    return changeColor(color, ratio, false);
};
var darkerColor = function(color, ratio) {
    return changeColor(color, ratio, true);
};

// Use
var darker = darkerColor('rgba(80, 75, 52, .5)', .2);
var lighter = lighterColor('rgba(80, 75, 52, .5)', .2); 
```

现在处理 RGB(A) 输入，以及十六进制（3 位或 6）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:58:30.500

RGB 值上限为 255。那么当您执行此操作时，RGB 值（240、10、10）会发生什么情况？它会变成 (285, -35, -35) 然后溢出到 (29, 221, 221) 这肯定不是你想要的。

在这种情况下很难给出*正确*的解决方案，因为这取决于美学以及您想要达到的效果。当图形艺术家在 Photoshop 等图像处理程序中对图像进行颜色校正时，他们通常会编辑每个通道的曲线并使其或多或少变得陡峭，这是对该颜色通道值的乘法运算。因此，当您想让图像“多红 20%”时，我会将所有红色值乘以 1.2，并将所有值设置为 255 到 255 以避免溢出。为了使图像“青色减少 20%”（与红色相反），我会将所有绿色和蓝色值乘以 0.8。

# c# - MVVM 应用程序中带有 Scrollviewer 的画布

> ID：12579236
> 
> 赞同：0
> 
> 时间：2012-09-25T08:43:24.810
> 
> 标签：c#, .net, wpf, mvvm, canvas

为了使我的画布自动调整其大小以便我的 ScrollViewer 正常工作，我创建了一个派生自 Canvas 的类，该类然后覆盖 MeasureOverride 方法以使画布根据画布上存在的 UIElements 调整其大小。

```
public class DesignerCanvas : Canvas
{
    protected override Size MeasureOverride(Size constraint)
    {
        Size size = new Size();
        foreach (UIElement element in Children)
        {
            double left = Canvas.GetLeft(element);
            double top = Canvas.GetTop(element);
            left = double.IsNaN(left) ? 0 : left;
            top = double.IsNaN(top) ? 0 : top;

            element.Measure(constraint);

            Size desiredSize = element.DesiredSize;
            if (!double.IsNaN(desiredSize.Width) && !double.IsNaN(desiredSize.Height))
            {
                size.Width = Math.Max(size.Width, left + desiredSize.Width);
                size.Height = Math.Max(size.Height, top + desiredSize.Height);
            }
        }

        // add some extra margin
        size.Width += 10;
        size.Height += 10;
        base.InvalidateMeasure();
        return size;
    }
} 
```

XAML：

```
<ScrollViewer HorizontalScrollBarVisibility="Visible">
        <local:DesignerCanvas x:Name="designerCanvas"  AllowDrop="True">
            <ItemsControl Name="Shapes">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </local:DesignerCanvas>
    </ScrollViewer> 
```

每当我将图形直接添加/删除到 DesignerCanvas 时，滚动查看器都能正常工作！除了我不是。我正在采用 MVVM 方法，因此我将我的画布数据绑定到 ObservableCollection

```
 private ObservableCollection<Shape> shapes = new ObservableCollection<Shape>();
    public ObservableCollection<Shape> Shapes 
    {
        get { return shapes; }
        set { shapes = value; }
    } 
```

每当将项目添加到 observablecollection 时，形状就会显示在画布上。但是，画布无法正确调整自身大小，导致我的滚动查看器不再工作。这是意料之中的，因为我没有直接操作 DesignerCanvas，因此从不调用 MeasureOverride。

我可以在 DesignerCanvas 上调用 InvalidateMeasure，但这需要我的视图模型了解视图。如何在不破坏 MVVM 的情况下解决此问题？

编辑：如果确实值得为此类问题保留这种模式，我也想听听任何建议。最近，我觉得 MVVM 给我的问题多于解决方案。

Edit2：哦.. 好吧，这个问题比我想象的要复杂得多。根据 Florian Gl 的建议，我继续在我的视图模型中创建了一个事件，然后在我的视图中处理该事件以调用 DesignerCanvas.InvalidateMeasure()。

这会在 DesignerCanvas 中调用我的 MeasureOverride 方法。除了它没有正确调整我的画布大小，所以滚动查看器仍然不起作用。我注意到我没有将形状直接添加到 DesignerCanvas 的子代，而是添加到数据绑定到 Canvas 的 observablecollection 中。因此，在我的 foreach 语句中没有要循环的 UIElement

```
 protected override Size MeasureOverride(Size constraint)
    {
        Size size = new Size();

        ItemsControl itemsControl = Children.OfType<ItemsControl>().First();

        foreach (UIElement element in Children) //No UIElements inside Children
        {
            double left = Canvas.GetLeft(element);
            ... 
```

现在我真的被困住了。我该如何规避这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:20:54.593

我的活动理念：

1.  在 ViewModel 中创建自己的事件：

    ```
    public delegate void MyCollectionChangedEventArgs();
    public event MyCollectionChangedEventArgs MyCollectionChanged; 
    ```

2.  ViewModel 中的调用事件：

    ```
    if (MyCollectionChanged != null)
    {
        MyCollectionChanged();
    } 
    ```

3.  让您的视图了解该事件：

    ```
     MainWindowViewModel vm = new MainWindowViewModel();
        vm.MyCollectionChanged += new MainWindowViewModel.MyCollectionChangedEventArgs(MainWindowViewModel_MyCollectionChanged); 
    ```

    或者

    ```
     MainWindowViewModel vm = (MainWindowViewModel)DataContext;
        vm.MyCollectionChanged += new MainWindowViewModel.MyCollectionChangedEventArgs(MainWindowViewModel_MyCollectionChanged); 
    ```

4.  调用方法：

    ```
    void MainWindowViewModel_MyCollectionChanged()
    {
        designerCanvas.InvalidateMeasure()
    } 
    ```

编辑：我不知道我的以下建议是否适用于 MeasureOverride-Method，但您可以尝试：

```
 (MainWindowViewModel) mvm = (MainWindowViewModel)DataContext; 

    foreach (UIElement element in mvm.Shapes)
    { ... } 
```

# facebook - Facebook用户名是唯一的？

> ID：12579238
> 
> 赞同：3
> 
> 时间：2012-09-25T08:43:50.017
> 
> 标签：facebook

每个 Facebook 用户名都是唯一的，这对吗？

例如[http://graph.facebook.com/jacobsome](http://graph.facebook.com/jacobsome)

它只返回一条记录，我们只能从 json 获取一个用户名。

```
{
   "id": "625747405",
   "name": "Jacob Verghese",
   "first_name": "Jacob",
   "last_name": "Verghese",
   "username": "Jacobsome",
   "gender": "male",
   "locale": "en_GB"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T08:39:46.717

Facebook 用户名是唯一的，**但**用户可能会更改它，尽管只有一次。如果您打算使用唯一且不可变的标识符从 Facebook 检索信息，则应使用**(u)id**或**third_party_uid**。

用于标识用户的字段在[Graph API](https://developers.facebook.com/docs/reference/api/user/)中命名为**id** ，在 FQL API中命名为**uid**（来自[用户表）。](https://developers.facebook.com/docs/reference/fql/user/)**third_party_id**是一个[唯一标识符，用于在](https://developers.facebook.com/blog/post/431/)不暴露真实用户 ID 的情况下与第三方共享用户信息。

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:45:36.677

是的。Facebook 用户名**是**独一无二的。必须是因为正如您所说，每个用户都有一个特定的 URL。

具有相同用户名的用户会相互冲突。****

# android - 使用 Intent.ACTION_PICK 选择多个媒体项？

> ID：12579246
> 
> 赞同：0
> 
> 时间：2012-09-25T08:44:11.657
> 
> 标签：android, android-intent

我正在编写一个应用程序，允许用户从 sd 卡中选择多个音乐曲目并播放它们。我正在尝试使用 Intent 系统来选择多个媒体实例，但我只能找到一种选择单个项目的方法。

这是我正在使用的代码：

```
Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, REQUEST_MEDIA); 
```

由于有一个动作“ACTION_SEND_MULTIPLE”，我认为选择动作也会有多个版本，但我找不到任何版本。那么，是否有可能，如果可以，使用什么操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:57:53.637

不幸的是，我遇到了同样的问题。无法使用 Intent.ACTION_PICK 选择多个项目。我采取的方式是为用户创建自己的自定义 GridView 以选择多个项目。您可以采用类似的方法在自定义视图中显示所有 mp3 文件。

# web-applications - 我的网络应用程序的简单加载测试

> ID：12579248
> 
> 赞同：1
> 
> 时间：2012-09-25T08:44:21.940
> 
> 标签：web-applications, load-testing

对我们的新 Web 应用程序运行简单和基本的加载测试很有趣，不太复杂 - 不需要在网站中登录或导航 - 只需使用许多对预定义 URL 列表的并发获取请求来轰炸我们的 Web。

我在看[apache ab](http://httpd.apache.org/docs/2.2/programs/ab.html)和[siege](http://www.joedog.org/siege-home/)，它看起来真的很棒 - 只需几分钟即可设置，我的网站收到了很多 get 请求，这些平台的问题是当我定义一个“GET”请求时页面它只是点击这个页面并且从不请求它的内部资源（图像、css 和 js），当然我可以将这些资源添加到 url 列表中，但它不会给我一个真正的结果（#rpm 和所有）。

有什么建议我能做什么？
我可以用 apache ab 或 siege 做我想做的事吗？
你知道让我这样做的类似工具吗？我查看了 JMeter，它看起来有点矫枉过正。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:18:02.850

I suggest that you try a tool that allows you to record a session in your browser. These tools will generally capture all the resources on each page and include them in the test. A search for "load testing software" will reveal many options. I'll put in a plug for the free version of our product ([Load Tester LITE](http://www.webperformance.com/load-testing/free-load-tester-lite.html)), which should work well for the scenarios you have described and will allow you to test with an unlimited number of users.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:40:16.530

最终使用[httperf](http://www.hpl.hp.com/research/linux/httperf/)。
尽管它有许多 bug 会通过大量分段错误来破坏进程，但它具有很好的功能，可以让您使用会话 (--wsesslog)。

另一种选择是使用 siege 模拟一个客户端并并行运行几个客户端：
假设您有一个 url.txt 包含您要测试的所有 url 和一个 resources.txt 文件，其中包含每个文件的通用资源import (images, css and js), 所以你可以使用这个脚本来模拟并行的客户端数量：

```
#run X users in parallel:
i=1; 
for line in $(head -|NUMBER OF CLIENTS| urls.txt); do 
    echo $line > client$i;
    cat resources.txt >> client$i;
    let "i += 1";
done;

for f in $(ls client*); do 
    siege -c |NUMBER OF CALLS| -r 100 -f $f -b &
done; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:26:42.950

首先，答案是：Siege FAQ 为您提供[两种选择](http://www.joedog.org/siege-faq/#a21)；两者都是直截了当的。

在您的评论中，您写道“Siege 将每个 URL 分开处理”——这不仅仅是 Siege，您的浏览器就是这样工作的。它首先下载一个 HTML 文件，在该 HTML 文件中，它将看到指向其他资产（图像、javascript 文件等）的链接并下载这些文件。通过使用 sproxy，您可以重新创建查看浏览器正在执行的操作，并将其保存为 Siege 的说明。

其次，一个建议——将[Bad Boy](http://www.badboy.com.au/)与 JMeter 结合使用；这样，您可以在您的网站上单击并捕获下载，然后使用 JMeter 重新播放。

第三，请注意 - 通过下载所有图像、链接等，您实际上是在测试您的网络服务器（Apache、IIS 等）的性能，而不是您的网络应用程序的性能。即使是最顽固的愤世嫉俗者也可能接受您的网络服务器的性能已经被其他人建立，并且几乎肯定不会成为问题。你真的要测试这个吗？

# jquery - 使用 jacklmoore 的 jquery zoom 缩放多个图像

> ID：12579251
> 
> 赞同：0
> 
> 时间：2012-09-25T08:44:27.063
> 
> 标签：jquery, ruby-on-rails-3, zooming

我正在使用 jacklmoore 的 jquery zoom ( [jacklmore's](http://www.jacklmoore.com/zoom) ) (mouseOver 函数)

在我看来;

```
<% @pictures.each do |picture| %>
  <span class='zoom' id='ex1'>
    <img src="<%= picture.image.url(:medium) %>" data-zoom-url="<%= picture.image.url %>" />
  </span>
<% end %> 
```

在我的 jquery 文件中；

```
$('.zoom img').each(function(){
      var zoom_url = $(this).attr('data-zoom-url');
      $(".zoom").zoom({url: zoom_url});
   }); 
```

但它不适用于一张以上的图片。有谁知道我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:36:05.360

我在 .js 文件中的（文档）上行走。所以它工作了一次。我编辑了我的 .js 文件，如下所示；

```
$(function(){
    $('#thumbnails img').each(function() {
        var original_img_url = $(this).attr('data-zoom-url');
        $(this)
        .parent()
        .zoom({url: original_img_url});
    });
}); 
```

# php - CakePHP Auth 重定向方法将我重定向到 /users/img/favicon.png？

> ID：12579256
> 
> 赞同：1
> 
> 时间：2012-09-25T08:44:40.610
> 
> 标签：php, authentication, redirect, cakephp-2.1

我正在尝试在 CakePHP 中使用 AuthComponent 的默认行为，但是当我尝试在操作中使用该方法时，我得到了一个奇怪`$this->Auth->redirect()`的行为`login`。

我想将登录的用户重定向到`view`他之前被重定向的位置，例如[CakePHP 登录重定向到请求的 URL](https://stackoverflow.com/questions/3964183/cakephp-log-in-redirect-to-requested-url)文章。我也读过`CakePHP 1.3` [身份验证](http://book.cakephp.org/complete/1250/Authentication#loginRedirect-12709)，但不明白我错在哪里。

这是我的代码：

应用控制器

```
public $components = array(
    'Session',
    'Auth' => array(
        'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
        'authError' => 'Error message',
        'authorize' => array(
            'Controller',
            'Actions' => array(
                'actionPath' => 'controllers'
            )
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

用户控制器

```
public function login () {
    if ($this->request->is ('post')){
        if ($this->Auth->login()) {
            $auth_user = $this->Auth->user();
            $this->User->id = $auth_user['id'];
            $this->User->saveField('last_login', date('Y-m-d H:i:s'));

            $this->Session->write('flash_element','done');
            $this->Session->setFlash('Welcome back <b>'.$auth_user['username'].'</b>!');

            $this->redirect ($this->Auth->redirect());
        } else {
            $this->set('flash_element','warning');
            $this->Session->setFlash('Wrong login');
        }
    }
} 
```

此设置将我重定向到如果`http://site.com/users/img/favicon.png`
我得到完全字符串。`debug``$this->Auth->redirect()``/users/img/favicon.png`

我试图在`default.ctp`布局文件中注释一行，在它之后`everything works perfect`，为什么？

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title><?php echo $title_for_layout; ?></title>

        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <?php
        echo $this->Html->css('style.css');
        //echo $this->Html->meta('icon','img/favicon.png');
        ... 
```

我不明白为什么这条线会破坏我的`AuthComponent`，是网站图标代码错误吗？

应用程序的其余部分与所有模型、视图和控制器完美配合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:02:36.513

尝试从用户控制器中移除脚手架并烘焙它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:37:40.163

尝试将“loginRedirect”键放入 AuthComponent 设置中：

```
public $components = array(
    'Session',
    'Auth' => array(
        'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
        'loginRedirect' => array('controller' => 'users', 'action => 'view'),
        'authError' => 'Error message',
        'authorize' => array(
            'Controller',
            'Actions' => array(
                'actionPath' => 'controllers'
            )
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

也`$this->Auth->login()`应该自动神奇地重定向你。

# matlab - 创建和保存一个非常大的数字列表

> ID：12579261
> 
> 赞同：0
> 
> 时间：2012-09-25T08:44:54.823
> 
> 标签：matlab, io, numbers

如何创建以下列表并将其保存到文件而不会耗尽内存？

```
 li = 1:2^40; 
```

我知道创建列表并将其分块写入文件的明显解决方案。我想知道是否有更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:41:13.737

由于该列表需要 8.8 TB 的内存，所以这里有一个简单的解决方案来防止需要它：

```
loop_limit = uint64(2^40);
ii = uint64(1);
chunksize = 1000;

fid = fopen('output.txt', 'w');
while ii < loop_limit

    for jj = 1:chunksize        
        fprintf(fid, '%d\n', ii);
        ii=ii+1;
        if ii >= loop_limit
            break; end    
    end

end

fclose(fid); 
```

任何地方都没有创建列表；内存开销仅限于使用的少数变量。

请注意，您提供的列表 ( `1:2^40`) 将超过 Matlab 的最大循环索引 2147483647，这就是双循环的原因。

另请注意，此文件`output.txt`将占用 8.8TB，所以...最好先释放一些硬盘空间。

Now obviously, this is absolutely mindbogglingly horrific. Can you provide more information on how the "old" program queries the file? Because I have a strong hunch that there is some bash/DOS batch trick you can use to emulate a file that contains these numbers, without actually needing the file.

# programming-languages - tiny mce 如何预置内容

> ID：12579263
> 
> 赞同：0
> 
> 时间：2012-09-25T08:45:09.473
> 
> 标签：programming-languages, tinymce

我在我的应用程序中使用 Tiny MCE 编辑器。我需要的是如何在微型 mce 编辑器中预填充内容。必须从前一页导航中检索内容。有人知道如何在页面加载时设置编辑器的内容吗？是 Javascript、Jquery、JSP (Java) 还是其他的解决方案？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:00:30.740

您可以将该内容插入到转换为 tinymce 编辑器的 html 元素中。

喜欢

```
<textarea>My predefined content </textarea> 
```

您可以使用服务器脚本语言插入它以在文本区域中呈现内容。`tinymce.init`另一种选择是在调用函数之前使用 javascript 并填充 textarea 。

# c# - 编写整个 html 文件

> ID：12579266
> 
> 赞同：0
> 
> 时间：2012-09-25T08:45:18.520
> 
> 标签：c#, streamwriter

我似乎找不到通过 c# 编写整个 HTML 文件的方法，我只能找到一些东西来逐行编写，但是有没有办法一次添加所有内容？对不起我的英语不好:(。
这就是我目前所拥有的：

```
string path = @"c:\MyTest.html";
// This text is added only once to the file. 
if (!File.Exists(path))
{
    // Create a file to write to. 
    using (StreamWriter sw = File.CreateText(path))
    {
        sw.WriteLine(@"<script type="text/javascript/">");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:47:09.597

您可以使用 将字符串写入文件[`System.IO.File.WriteAllText`](http://msdn.microsoft.com/en-us/library/ms143376.aspx)。

# c# - 无法使用 LaunchFileAsync 从 uri 启动视频

> ID：12579267
> 
> 赞同：0
> 
> 时间：2012-09-25T08:45:28.800
> 
> 标签：c#, windows-8, windows-runtime

对于 Windows 8 应用程序，在 C#/Xaml 中，我想使用 Launcher.LaunchFileAsync 在计算机上使用媒体播放器启动视频。

我有一个来自 url 的视频文件，我正在使用以下代码：

```
 var uri = new Uri(myUrl,UriKind.RelativeOrAbsolute);

            var file = await StorageFile.CreateStreamedFileFromUriAsync("aaa", uri, RandomAccessStreamReference.CreateFromUri(uri));

            if (file != null)
            {
                // Launch the retrieved file
                var success = await Windows.System.Launcher.LaunchFileAsync(file);

                if (success)
                {
                    // File launched
                }
                else
                {
                    // File launch failed
                }
            }
            else
            {
                // Could not find file
            } 
```

这实际上是 LaunchFileAsync 文档中的示例代码。这对我来说似乎很好，但成功总是假的。你知道为什么吗？是否可以将 LaunchFileAsync 用于 url 中的视频？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:26:51.733

我遇到了同样的问题，我试图从特定文件路径位置播放 .mp3 文件。

我无法使用**StorageFile.CreateStreamedFileFromUriAsync**打开文件。我收到无效的参数异常或未经授权的访问错误。

尝试替换更改行：

```
 String myUrl = @"ms-appx:///sources/sounds/ffd19.mp3";          
            var file = await StorageFile.GetFileFromApplicationUriAsync(uri); 
```

唯一的缺点是该文件必须注册为项目的资源。

在我的情况下，.mp3 位于解决方案资源管理器中的源/声音/文件夹中，与应用程序文件位于同一文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:50:42.360

我对你的代码所说的感到困惑。

```
var file = await StorageFile.CreateStreamedFileFromUriAsync("aaa", uri, RandomAccessStreamReference.CreateFromUri(uri)); 
```

“文件”获取函数的返回，但函数返回的是一个 StorageFile 对象，您可以参考 Window.Storage.StorageFile。

我认为这可能是问题所在，但我不知道如何解决。

此外，函数“LaunchFileAsync()”对它可以启动的文件类型有限制，这也可能导致这个问题。

对不起我没有回答的建议。就这样。

# delphi - Win32 WriteFile 因防病毒不返回

> ID：12579273
> 
> 赞同：2
> 
> 时间：2012-09-25T08:45:41.107
> 
> 标签：delphi, winapi, antivirus

我的代码是用 Delphi 7 编写的，但我认为它并没有起到特别的作用。

我尝试用 WriteFile 覆盖文件的内容。除非编写“.dll”文件并且防病毒处于活动状态，否则它可以正常工作。

*   打开文件的句柄仍然可以。
*   写入被阻止：**WriteFile 函数不返回！**

防病毒似乎可以防止覆盖该 dll。但是，最糟糕的是我必须重新启动 PC，因为我的应用程序被阻止、任务管理器被阻止、Windows 资源管理器被阻止等等。

我怎样才能防止这种情况？

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:50:23.433

除了其他人所说的如何解决防病毒问题之外，在您的代码中，您还可以使用重叠 I/O 来设置超时，`WriteFile()`以确保您的代码在此问题再次出现时不会死锁。如果重叠操作超时，您可以使用 取消它`CancelIo()`，然后将问题报告给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:00:44.467

如果您将数字签名添加到您的可执行文件中，则触发防病毒软件的可能性较小。很多delphi程序被杀毒软件误杀，D7最差。

不确定您要写入 dll 的内容。防病毒软件不喜欢 PE 之外的额外数据。

如果您只需要更新一个dll，请尝试重命名旧dll，并编写一个新文件，然后删除旧的。

# c++ - 调用 cvSet2D() 来设置图像的像素值，返回值 0

> ID：12579274
> 
> 赞同：0
> 
> 时间：2012-09-25T08:45:41.000
> 
> 标签：c++, image-processing, opencv

当我`cvSet2D()`像这样设置图像的像素值时：

```
Iplimage* image=cvLoadImage("....");
CvScalar scalar(0.1415, 0, 0, 0);
cvSet2D(image, 0，0，scalar);

double pixelValue=cvGet2D(image, 0, 0).val[0]; 
```

`pixelValue`原来是`0`。为什么？谁能给我一个解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:01:19.843

您正在处理 8 位图像（加载方式为 3 通道，没有任何标志），这意味着对于每个通道，您的值都在 [0, 255] 范围内。因此，即使您分配了一个`float`值，您也只能拥有`uchar`，因此您的 0.1415 变为 0。

如果你有一个`float CvMat`，那么你可以分配`float`值。例如：

```
CvMat* matrix = cvCreateMat(10, 10, CV_32F);
CvScalar scalar(0.1415, 0, 0, 0);
cvSet2D(matrix, 5, 5, scalar);
double pixelValue = cvGet2D(matrix, 5, 5).val[0];  // Now pixelValue = 0.1415 
```

如果您想使用`float`图像，请查看[这个问题](https://stackoverflow.com/questions/394488/how-to-convert-an-8-bit-opencv-iplimage-to-a-32-bit-iplimage)和[这篇文章](http://www.simonsilk.com/content/simonsilk/2011-feb/floating-point-images-opencv)。

# raphael - Raphael V2 中的旋转属性

> ID：12579280
> 
> 赞同：3
> 
> 时间：2012-09-25T08:46:03.513
> 
> 标签：raphael

嗨，我正在关注此页面上的本教程：http: [//net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)

这是我正在测试的代码：

```
window.onload = function() {
var paper = new Raphael(document.getElementById('canvas_container'), 500, 500);
var tetronimo = paper.path("M 250 250 l 0 -50 l -50 0 l 0 -50 l -50 0 l 0 50 l -50 0 l 0 50 z");
tetronimo.attr(
    {
        gradient: '90-#526c7a-#64a0c1',
                    rotation: -90,
        stroke: '#3b4449',
        'stroke-width': 10,
        'stroke-linejoin': 'round'
    }
);

tetronimo.animate({rotation: 360, 'stroke-width': 1}, 2000, 'bounce', function() {
/* callback after original animation finishes */
this.animate({
    rotation: -90,
    stroke: '#3b4449',
    'stroke-width': 10
}, 1000);
    }); 
```

}

动画适用于笔划宽度，但不适用于旋转。经过一番研究，我发现版本 2 不再支持“旋转”属性。所以我有两个选择：

1）找出实现相同目标的替代方法

2）找到一份Raphael V1库的副本

任何人都可以帮助我解决这些选项中的任何一个（我更喜欢选项 1）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:04:38.787

`transform`您现在需要在 v2中使用方法。它并没有太大的不同，请看这个小提琴：

[http://jsfiddle.net/58yqW/3/](http://jsfiddle.net/58yqW/3/)

```
 var paper = new Raphael(document.getElementById('canvas'), 500, 500);
    var tetronimo = paper.path("M 250 250 l 0 -50 l -50 0 l 0 -50 l -50 0 l 0 50 l -50 0 l 0 50 z");
    tetronimo.attr(
      {
        gradient: '90-#526c7a-#64a0c1',
        'transform':"r-90",
        stroke: '#3b4449',
        'stroke-width': 10,
        'stroke-linejoin': 'round'
      }
    );

    tetronimo.animate({'transform':"r360", 'stroke-width': 1}, 2000, 'bounce',       function() {
    this.animate({
        'transform':"r-90",
        stroke: '#3b4449',
        'stroke-width': 10
       }, 1000);
    }); 
```

我不知道您的动画的确切要求，但您可以看到它确实旋转等。要注意的一件事是您可以使用 R-90 和 r-90，查看[element transform](http://raphaeljs.com/reference.html#Element.transform)的文档。

# php - 如何在 php 和 smarty 中制作多维数组

> ID：12579283
> 
> 赞同：-4
> 
> 时间：2012-09-25T08:46:09.460
> 
> 标签：php, multidimensional-array

我有这个数组

```
 $a = array("008_@@_1_@@_Interieur_@@_1_@@_Inner-Bags",  "008_@@_1_@@_Interieur_@@_2_@@_Color", "008_@@_1_@@_Interieur_@@_3_@@_Material");` 
```

我使用带有*@@*的explode 函数来explode this。我得到这样的数组..

```
[0] => 008 
[1] => 1 
[2] => Interieur
[3] => 1 
[4] => Inner-Bags 
```

等等。

所以我想要格式数组的类型。

```
array('008' => array( '1' => array('Interieur' => array('1' => 'Inner-Bags', '2' => 'Color', '3' => 'Material')))); 
```

这是我的逻辑...

```
<?php
$a = array("008_@@_1_@@_Interieur_@@_1_@@_Inner-Bags", "008_@@_1_@@_Interieur_@@_2_@@_Color", "008_@@_1_@@_Interieur_@@_3_@@_Material");
$i = 0;
echo '<pre>';
$innerD = array();
foreach($a as $key => $val) {
 $innerA = array();
 $a_exploded = explode("_@@_", $a[$key]);
 $innerA[$a_exploded[3]] = $a_exploded[4];
}

foreach($a as $key => $val) {
    //print_r($a[$key]);
 $innerB = array();
 $innerC = array();
 $a_exploded = explode("_@@_", $a[$key]);

// print_r($innerA);

 $innerB[$a_exploded[2]] = $innerA;
 $innerC[$a_exploded[1]] = $innerB;
 $innerD[$a_exploded[0]] = $innerC;
}
print_r($innerD);
?> 
```

我已经使用了我的逻辑，但我没有像这样得到正确的数组..

```
Array
(
    [008] => Array
        (
            [1] => Array
                (
                    [Interieur] => Array
                        (
                            [3] => Material
                        )
                )    
        )    
) 
```

我想像这样排列这种格式..

```
Array
(
    [008] => Array
        (
            [1] => Array
                (
                    [Interieur] => Array
                        (
                              [1] => Inner-Bags
                              [2] => Material
                              [3] => Color
                        )    
                )    
        )    
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:59:11.190

试试这个

```
$a = array("008_@@_1_@@_Interieur_@@_1_@@_Inner-Bags", "008_@@_1_@@_Interieur_@@_2_@@_Color", "008_@@_1_@@_Interieur_@@_3_@@_Material");
$i = 0;
echo '<pre>';
$innerD = array();
foreach($a as $val){
  $a_exploded = explode("_@@_", $val);
  $innerD[$a_exploded[0]][$a_exploded[1]][$a_exploded[2]][] = $a_exploded[3];
}
print_r($innerD); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:57:10.220

因为你先在里面重置数组`foreach`。

改变

```
foreach($a as $key => $val) {
    $innerA = array(); // <-- it is wrong string. remove it.
    $a_exploded = explode("_@@_", $a[$key]);
    $innerA[$a_exploded[3]] = $a_exploded[4];
} 
```

到：

```
foreach($a as $key => $val) {
    $a_exploded = explode("_@@_", $a[$key]);
    $innerA[$a_exploded[3]] = $a_exploded[4];
} 
```

# javascript - 使用触发器进行切换

> ID：12579288
> 
> 赞同：0
> 
> 时间：2012-09-25T08:46:33.453
> 
> 标签：javascript, jquery, html

```
<span id="test">​click</span>​​​​​​​​​​​​​​

$('#test').toggle(function() {
    alert('true');
}, function() {
    alert('false');
});

$('#test').trigger('click'); 
```

​</p>

这工作正常，但我想在切换中调用触发器第二个函数 - 使用*alert('false')*。现在，它总是*alert('true')*。

我怎样才能做到？我不想更改功能切换 - 只应更改触发器。

[http://jsfiddle.net/xSbTC/](http://jsfiddle.net/xSbTC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:18:09.020

如果我正确理解了您的问题，您将尝试执行此操作而无需重复第二个切换功能中的代码。为此，只需将其移至单独的函数并调用它...

```
function toggle1() {
    alert("true");
}
function toggle2() {
    alert("false");
}

$('#test').toggle(function() {
    toggle1();
}, function() {
    toggle2();
});

toggle2(); 
```

​ 为了清楚起见，我已将切换两个部分的代码放入单独的函数中。如果您愿意，您显然可以将代码从`toggle1()`第一个切换函数中移出。

[http://jsfiddle.net/xSbTC/4/](http://jsfiddle.net/xSbTC/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:04:16.273

为了只执行一项您不需要切换的功能，您可以使用 click

```
$('#test').on('click', function(){alert('false')});​ 
```

# ios - 从自定义容器视图控制器将消息传递给包含的容器视图控制器的子级？

> ID：12579291
> 
> 赞同：0
> 
> 时间：2012-09-25T08:46:52.107
> 
> 标签：ios, uiviewcontroller, parent-child, message-passing, containment

我为长标题道歉，但它确实是我能想到的最短的准确和描述性的版本。

我正在使用自定义 segue 类型实现自定义容器视图控制器，使用 iOS 5 和故事板。我还为包含的视图控制器提供了一个委托协议，旨在像 UINavigationControllerDelegate 一样工作。目前，我正在从我的自定义容器发送一个委托消息，通知 segued-from 子视图控制器与我的自定义 segue 相关的条件，它需要知道以执行某个操作。

这对于我自己的 UIViewController 子类来说非常简单，我可以指定它以符合 .h 文件中的协议。

但是，当我的自定义容器的包含的视图控制器本身是内置容器（例如 UINavigationController、UITabBarController）时，我发送的委托消息对于包含的容器不一定有意义，但对于活动的子视图会有意义该容器当前显示的控制器。内置容器显然会将通常的`view(Will|Did)(Disa|A)ppear`呼叫转发给他们的孩子，但我没有看到将这种转发扩展到我的自定义消息的通用方法。

快速而肮脏的解决方案是对该内置容器进行子类化并为其添加委托消息转发。例如，`MyTabBarController`将符合委托协议并将委托消息转发到其`selectedViewController`. 另一种方法是让我的自定义容器主动嗅探它包含的视图控制器是否是其自身类型的容器，但这更加肮脏并且无法解释将来可能有一天嵌套在我的自定义容器中的容器类型。

整个自定义包含安排非常特定于我当前的应用程序，所以我可以破解它，因为我知道要求是什么，我*不需要*使它通用，但我肯定想在这个领域遵循良好的设计实践以防万一我需要通过未来应用程序中的潜在重用使其在未来更加通用。

那么，除了我已经描述的两种解决方案之外，还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:05:25.467

我会使用正式的协议，当父母想与孩子交流时，只需询问它是否符合协议。类似于类别，但您不必每次调用类别方法时都询问实例。只需询问它是否响应协议一次，然后您就可以调用您想要的任何协议方法。

请参阅 NSObject 的`-conformsToProtocol:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:16:40.303

在给它更多的思考和试验之后，我想出了第三种方法：分类。它仍然不像我想要的那样通用，但比我以前的有所进步，并且不再依赖于子类化内置容器控制器。

对于我的特定需求，我想要一个标签栏控制器将委托消息转发到其选定的视图控制器。我在 UITabBarController 上创建了一个名为 MessageForwarding 的类别，并实现了正确的方法签名。category 方法只是将相同的调用转发到`self.selectedViewController`，并返回结果。

然后我的自定义容器类导入了这个类别，瞧，标签栏控制器现在神奇地做正确的事情并转发我在容器中发送的委托消息。

对于拆分视图和导航控制器以及任何需要使用的自定义容器，实现类似的类别将是微不足道的。

# android - ListView onItemClick：NullPointerException 检索视图

> ID：12579292
> 
> 赞同：1
> 
> 时间：2012-09-25T08:47:03.743
> 
> 标签：android

我无法单击列表视图来传递新活动。请告诉我如何解决这个问题。

这是我的代码

```
// set UI
        setContentView(R.layout.show_permission);

        //get list from background
        show = getListView();

        //object for permission list
        permission_list = new ArrayList<HashMap<String,String>>();

        // get uid from main activity
        Intent i = getIntent();
        uid = i.getStringExtra(TAG_UID);

        // get data from background thread
        new GetPermission().execute();

        show.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // TODO Auto-generated method stub
                //getting item from list Item
                String project_id = ((TextView) view.findViewById(R.id.report_id)).getText().toString(); <---error here
                String project_name = ((TextView) view.findViewById(R.id.pro_name)).getText().toString();

                Intent in = getIntent();
                //send report_id to next activity
                in.putExtra(TAG_PROJECT_ID, project_id);
                in.putExtra(TAG_PROJECT_NAME, project_name);
                in.putExtra(TAG_UID, uid);
                setResult(100, in);

                finish();
            }
        }); 
```

在这里记录猫显示

```
 09-25 15:41:27.510: E/AndroidRuntime(1457): FATAL EXCEPTION: main
09-25 15:41:27.510: E/AndroidRuntime(1457): java.lang.NullPointerException
09-25 15:41:27.510: E/AndroidRuntime(1457):     at com.example.androidhive.ProjectPermission$1.onItemClick(ProjectPermission.java:82)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.widget.AbsListView$1.run(AbsListView.java:3529)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.os.Handler.handleCallback(Handler.java:615)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.os.Looper.loop(Looper.java:137)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at java.lang.reflect.Method.invokeNative(Native Method)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at java.lang.reflect.Method.invoke(Method.java:511)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-25 15:41:27.510: E/AndroidRuntime(1457):     at dalvik.system.NativeStart.main(Native Method) 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:50:05.133

之一

```
((TextView) view.findViewById(R.id.report_id)).getText().toString(); 
```

一片空白。

*   观点：没有意义
*   findViewById(R.id.report_id)) ：您确定该视图存在于项目布局中吗？
*   getText() ：report_id 视图的文本可以为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:29:32.480

尝试使用以下方法：

```
 String project_id = ((TextView) view.getChildAt(index of project id view)).getText().toString(); 

  String project_name = ((TextView) view.getChildAt(index of project name view)).getText().toString(); 
```

例如，如果项目 ID 文本视图是列表项视图中的第一个视图，则`0`作为项目 ID 的索引传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:50:17.177

而不是使用

```
String project_id = ((TextView) view.findViewById(R.id.report_id)).getText().toString(); 
```

尝试这个 ：

**`mTextView = (TextView)findViewById(R.id.report_id);`**

**`String project_id = mTextView.getText().toString();`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:40:44.770

感谢所有回复我找到了解决方案来解决它

```
setContentView(R.layout.show_permission);

        ListView lv = getListView();

        Intent i = getIntent();
        uid = i.getStringExtra(TAG_UID);

        //report list
        permission_list = new ArrayList<HashMap<String,String>>();
        //load report in background
        new GetPermission().execute();

        // listView OnClicklistener
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                // TODO Auto-generated method stub
                //getting item from list Item
                String project_name = ((TextView) view.findViewById(R.id.pro_name)).getText().toString();

                // pass data to edit
                Intent edit = new Intent(getApplicationContext(), TimeReport.class);

                //send report_id to next activity
                edit.putExtra(TAG_PROJECT_NAME, project_name);
                edit.putExtra(TAG_UID, uid);

                startActivityForResult(edit, 100);
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T09:04:08.153

创建一个 textview 变量说 tv，然后

tv = (TextView)findViewById(R.id.report_id);

将 'tv' 附加到其 ID 后，尝试从中获取文本，使用

字符串 str = tv.getText().toString();

在 'Toast' 中显示字符串 'str' 以确定它是否不包含空值，如果这不起作用，请在此处发布您的代码。

# excel - Excel VBA-不从设置字段加载文件

> ID：12579293
> 
> 赞同：0
> 
> 时间：2012-09-25T08:47:05.477
> 
> 标签：excel, vba

我已将工作表设置为具有参数部分，因此用户可以设置工作表，然后只更新特定区域。其中两个参数是外部文件，它们是“黑匣子”计算模块。

这些设置了完整的路径并存储在工作表上的单元格中。

在开始计算过程时，它们会加载以下代码

> ```
>  'Set file name and location.
> NameOfFile = ActiveWorkbook.Worksheets("Parameters").Cells(8, 2).Value
> PathToFile = Left$(NameOfFile, InStrRev(NameOfFile, "\") - 1)
> FileNameNoPath = Mid$(NameOfFile, InStrRev(NameOfFile, "\") + 1)
> NameOfFile = FileNameNoPath 
> ```

```
completefilepath = PathToFile & "\" & NameOfFile
 'set the target workbook to a variable.  If an error is
 'generated, then the workbook is not open, so open it
On Error Resume Next
Set wbTarget = Workbooks(NameOfFile)
  If Err.Number <> 0 Then
     'Open the workbook
    Err.Clear
    Set wbTarget = Workbooks.Open(NameOfFile, UpdateLinks:=False)
    CloseIt = True
End If

 'Check and make sure workbook was opened
If Err.Number = 1004 Then
    MsgBox "Sorry, but the file you specified does not exist!" _
    & vbNewLine & NameOfFile
    Exit Sub
End If 
```

我遇到的问题是，当我运行代码时，它说找不到文件。如果我去，通过重新选择文件来重置参数表中的字段（我有一个文件对话框设置来执行此操作），然后代码完美运行并且文件打开。从本质上讲，这意味着每次关闭工作表后，都会在运行计算之前重新选择文件。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:02:20.283

在您的代码行中

```
Set wbTarget = Workbooks.Open(NameOfFile, UpdateLinks:=False) 
```

您只指定文件名，没有路径。这将尝试从当前路径打开文件，这可能不是预期的路径。一旦您使用了`OpenFile`对话框并浏览到您的文件，当前路径就会更新，然后代码就可以工作了。

你可能是说

```
Set wbTarget = Workbooks.Open(completefilepath , UpdateLinks:=False) 
```

# c# - PathGeometry 的非 GUI 替代品？

> ID：12579294
> 
> 赞同：5
> 
> 时间：2012-09-25T08:47:07.287
> 
> 标签：c#, wpf, .net-4.0, pathgeometry

我有两个巨大的（> 100000 项）PathGeometry 集合，我需要使用 PathGeometry 进行比较。组合如下：

```
List<PathGeometry> firstList;
List<PathGeometry> secondList;
[...]

foreach (PathGeometry pg1 in firstList)
  foreach (PathGeometry pg2 in secondList)
  {
    PathGeometry intergeo = PathGeometry.Combine(pg1, pg2, GeometryCombineMode.Intersect, null);
    if (intergeo.GetArea() > 0)
    {
      // do whatever with intergeo.GetArea()
    }
  } 
```

令我惊讶的是，PathGeometry 是 GUI 的一部分，并且确实使用了调度程序，这有时会导致问题，因为我的计算确实在没有使用 Parallel.ForEach() 的 GUI 的情况下在某些后台线程中运行

因此，我正在寻找未连接到 GUI 的 PathGeometry 的替代方案。
我的人物非常复杂，在 PathGeometry.Figures 中添加了很多 PathFigures。

我自己从一些臃肿的政府 xml 文件中创建了那些 PathGeometries，所以创建其他东西是没有问题的。但是我需要一个函数来创建这两个几何图形的交集（而不是将它们相互添加）以获得两个几何图形覆盖的区域，例如该图中的红色区域：

![在此处输入图像描述](../Images/cf1110308a750545545a19d40698aa87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:08:25.437

[使用几何“迷你语言”](http://rcosic.wordpress.com/2009/08/11/wpf-geometry-mini-language/)而不是使用对象将您的字符串解析`Path.Data`成字符串怎么样？`PathGeometry`

例如，不要创建这样的东西：

```
<Path Stroke="Black">
    <Path.Data>
        <PathGeometry>
            <PathFigure IsClosed="true" StartPoint="10,100">
                <LineSegment Point="100,100" />
                <LineSegment Point="100,50" />
            </PathFigure>
        </PathGeometry>
    </Path.Data>
</Data> 
```

你可以创建

```
<Path Stroke="Black" Data="M 10 100 L 100 100 L 100 50 Z" /> 
```

或者在您的情况下，XAML 可能看起来像这样：

```
<Path Stroke="Black" Data="{Binding MyPathProperty}" /> 
```

Path.Data是一个字符串，[应该](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.data.aspx)是特定格式的，是绘制路径几何图形的一种更短的方式。

以下是从上面的链接中获取的字母含义以及预期参数的列表：

> *   F 值 - 设置 Geometry.FillRule 属性。对偶奇数使用 0，对非零使用 1。此命令必须出现在字符串的开头（如果您决定使用它）。
>     
>     
> *   M x,y - 为几何体创建一个新的 PathFigure 并设置它的起点。此命令必须在除 F 之外的任何其他命令之前使用。但是，您也可以在绘图序列期间使用它来移动坐标系的原点。（M 代表移动）。
>     
>     
> *   L x,y – 创建到指定点的 LineSegment。
>     
>     
> *   H x – 使用指定的 X 值创建水平 LineSegment 并保持 Y 值不变。
>     
>     
> *   V y - 使用指定的 Y 值创建垂直 LineSegment 并保持 X 值不变。
>     
>     
> *   A radiusx, radiusY, degree isLargeArch, isClockwise x,y – 创建指向指定点的 ArcSegment。您可以指定描述圆弧的椭圆半径、圆弧旋转的度数以及设置 IsLargeArc 和 SweepDirection 属性的布尔标志。
>     
>     
> *   C x1,y1 x2,y2 x,y - 使用 (x1, y1) 和 (x2, y2) 处的控制点创建指向指定点的 BezierSegment。
>     
>     
> *   Q x1,y1 x,y - 创建指向指定点的 QuadraticBezierSegment，在 (x1, y1) 处有一个控制点。
>     
>     
> *   S x2,y2 x,y - 通过使用前一个 BezierSegment 中的第二个控制点作为新 BezierSegment 中的第一个控制点来创建平滑的 BezierSegment。
>     
>     
> *   Z - 结束当前 PathFigure 并将 IsClosed 设置为 true。如果您不想将 IsClosed 设置为 true，则不需要使用此命令——相反，如果您想开始一个新的 PathFigure 或结束字符串，只需使用 M。

例如，上面示例中使用的字符串 ( `M 10 100 L 100 100 L 100 50 Z`) 可以分解为：

*   M 10 100 - 在 10,100 处开始路径
*   L 100 100 - 画一条线到 100,100
*   L 100 50 - 画一条线到 100,50
*   Z - 结束字符串

在您从数据库中读取您的情况下`Path.Data`，您将首先创建一个字符串，`M x y`其中包含`x y`路径的 x,y 起始位置在哪里，然后一次读取一个段并使用上面的速记将它们附加到字符串，然后以`Z`

请注意，大写和小写字母具有不同的含义。大写字母表示您正在为路径段提供绝对值，而小写字母表示它应该相对于最后一段。

例如，如果您的段`"L 10 10"`显示 ，则表示在网格上的位置 10,10 处画一条线，而`"l 10 10"`表示从当前位置向上和 10 处画一条线。

在您从数据库中读取您的情况下`PathGeometry`，您需要将每个转换`PathGeometry`为一个字符串，然后组合这些字符串。

这是一些粗略的代码作为示例。我知道它不起作用，但希望它可以为您指明正确的方向

**编辑**

根据您编辑的问题，听起来您的数据项存储为 a `PathGeometry`，因此您可能需要将`PathGeometry`对象转换为字符串，然后将字符串组合起来

这是一个非常粗略的例子。我很确定我有一些语法错误，可能还有一些逻辑，因为我对这个`PathGeometry`对象不太熟悉，但希望它可以为你指明正确的方向

```
foreach (PathGeometry pg1 in firstList)
    foreach (PathGeometry pg2 in secondList)
    {
        var s1 = ConvertGeometryToString(pg);
        var s2 = ConvertGeometryToString(pg2);

        // Ideally you probably wouldn't want this until you have your 
        // full PathGeometry string built, but I'm not sure what you're doing
        // with the object so left it in anyways
        PathGeometry intergeo = Geometry.Parse(s1 + s2);

    }
}

string ConvertGeometryToString(PathGeometry pg)
{
    StringBuilder sb = new StringBuilder();

    foreach(var figure in pg.PathFigures)
    {
        sb.Append("M " + figure.StartPoint);

        foreach(var seg in figure.Segments)
        {
            if (seg is LineSegment)
                sb.Append(" L " + ((LineSegment)seg).Point);

            else if (seg is ArcSegment)
            ... etc

        }

        if (figure.IsClosed)
            sb.Append(" Z");
    }

    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:01:15.303

`System.Windows.Media`还包含一个类`StreamGeometry`，它是 . 的“轻量级替代品” `PathGeometry`。它不支持数据绑定、动画或修改，但由于它派生自`Geometry`它应该有一个`Combine`方法。

请参阅[StreamGeometry @ MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.streamgeometry.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:51:48.123

我刚刚玩过它，但[NetTopologySuite](http://www.google.co.uk/url?q=http://code.google.com/p/nettopologysuite/&sa=U&ei=01JkUNbnIuSU0QWH2IEg&ved=0CBQQFjAA&usg=AFQjCNG0f6Hr4uMuM4HX8XR1oeekYeXQQg)看起来它会做你想做的事。

下面的代码创建了两个多边形，检查它们是否相交，找到它们的面积并计算它们的相交。

```
var gf = new GeometryFactory();

var c1 = new[] { new Coordinate(0, 0), new Coordinate(2, 0),
                 new Coordinate(2, 2), new Coordinate(0, 2),
                 new Coordinate(0, 0) };
var lr1 = gf.CreateLinearRing(c1);
var p1 = gf.CreatePolygon(lr1, new ILinearRing[0]);

var c2 = c1.Select(c => new Coordinate(c.X + 1, c.Y + 1)).ToArray();
var lr2 = gf.CreateLinearRing(c2);
var p2 = gf.CreatePolygon(lr2, new ILinearRing[0]);

var intersects = p1.Intersects(p2);        // true
var intersection = p1.Intersection(p2);    // another polygon
var area = intersection.Area;              // 1.0 
```

# c++ - 从另一个 .cpp 文件调用函数

> ID：12579299
> 
> 赞同：1
> 
> 时间：2012-09-25T08:47:20.357
> 
> 标签：c++, function, vcl

我正在使用 C++ Builder 并正在创建一个 VCL Forms 应用程序。

这是我的代码：

```
std::string returnStringFromUnicodeString(AnsiString str)
{
std::string s(str.c_str());
return s;
} 
```

目前我在 main.cpp 文件中有这个，并且可以在这个 .cpp 文件中的任何其他函数中使用这个函数。

我的问题是：如何从另一个 GUI 表单调​​用此函数？我已经包含了主 .cpp 文件的 .h 但仍然没有运气。

我必须将其公开还是其他方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:52:09.463

您需要在头文件中声明您的函数，并且您需要将实现放在另一个 cpp 文件中，而不是在其中包含 main，因此没有 int main 或 void main 等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:57:01.780

您可能希望将该辅助函数放在单独的头文件和 cpp 文件中，以便您可以在整个项目中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:49:25.620

您需要添加：

```
std::string returnStringFromUnicodeString(AnsiString str); 
```

到你的 main.h 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T06:35:57.007

另一种方法是，以您想要使用的形式添加带有 extern 的原型：

```
extern std::string returnStringFromUnicodeString(AnsiString str); 
```

但我认为最好使用标题。

# algorithm - 按比例平衡 3 个值

> ID：12579301
> 
> 赞同：0
> 
> 时间：2012-09-25T08:47:23.703
> 
> 标签：algorithm, math

我有三个值，在任何时候总应该达到 100

用户一次只能更改一个值（通过增量认为滑块可能不是一次单个增量）

当一个值发生变化时，我希望其他值也发生变化以反映恒定的总数，但是按比例计算

其他两个值中较大的值应该比较小的值增加得更多

但应该减少小于较小的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:55:36.943

不确定您所说的“但应该减少小于较小的值”是什么意思 - 这似乎表明它*不是*按比例计算的，特别是如果比率仅保持在一个方向上。

假设这是一个错误，按比例分配非移动值`b`的`c`方法只是在移动值`a`发生变化时保持它们的比率，例如：

```
a = 50, b = 30, c = 20             # initial values
aDelta = 10                        # how much to change 'a' by

bDelta = -aDelta * b / (b + c)     # bDelta <- -6
cDelta = -aDelta - bDelta          # cDelta <- -4

a = a + aDelta                     # a <- 60
b = b + bDelta                     # b <- 24
c = c + cDelta                     # c <- 16 
```

您可以在那里看到`b`and `c`( `30:20`and `24:16`are both `3:2`) 之间的比率保持不变，至少直到值变得足够小以使舍入误差发挥作用（减少它们，然后增加它们可能不会给您返回您开始的确切值和）。

如果这很重要，您可以考虑对值使用浮点数，然后将它们简单地转换为整数作为最后一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:16:44.783

因为 B 和 C 也需要计算张贴在帕斯卡（手头的第一个 IDE）中以显示完整的解决方案

```
if inhibit then exit; { stop position changes in callback calling this! }

inhibit:=true;

if (sender=TrackBar1) then begin
  aDelta:= trunc(TrackBar1.Position)-a;
  bDelta:= -aDelta * b / (b + c);
  cDelta:= -aDelta - bDelta;
end;

if (sender=TrackBar2) then begin
  bDelta:= trunc(TrackBar2.Position)-b;
  aDelta:= -bDelta * a / (a + c);
  cDelta:= -bDelta - aDelta;
end;

if (sender=TrackBar3) then begin
  cDelta:= trunc(TrackBar3.Position)-c;
  bDelta:= -cDelta * b / (b + a);
  aDelta:= -cDelta - bDelta;
end;

a:= a+aDelta;
b:= b+bDelta;
c:= c+cDelta;

TrackBar1.Position:=trunc(a);
TrackBar2.Position:=trunc(b);
TrackBar3.Position:=trunc(c);
label1.Caption:=FormatFloat('###.##',a);
label2.Caption:=FormatFloat('###.##',b);
label3.Caption:=FormatFloat('###.##',c);
label4.Caption:=FormatFloat('###.##',a+b+c);

inhibit:=false; 
```

# objective-c - UILabel 段落文本对齐

> ID：12579303
> 
> 赞同：10
> 
> 时间：2012-09-25T08:47:46.587
> 
> 标签：objective-c, ios, uilabel, uitextview, text-alignment

我正在开发一个 Iphone 应用程序，我需要显示一个大文本。我需要它进行段落对齐。请参考下图进行说明。

我尝试使用 UILabel 和 UITextView 但找不到执行此操作的属性。

![在此处输入图像描述](../Images/200b8bf82247fbbddaa70b88685a6b6d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-16T10:00:31.680

对于 ios > 7.1，只需将 textAligment 属性设置为 NSTextAlignmentJustified ，无需任何第三方库：

```
UILabel *label = [UILabel alloc] init];
label.textAligment = NSTextAlignmentJustified; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:58:00.843

UITextView 和 UILabel 他们不提供这种对齐方式。您可以改用 UIWebview。

您可以使用`<p style="text-align:justify">Your text goes here.</p>`

这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:54:37.050

使用具有 UITextAlignmentJustify 的[**TTTAttributedLabel**](https://github.com/mattt/TTTAttributedLabel/downloads) NSAtributedString 标签

```
 yourTTTAttributedLabel.textAlignment = UITextAlignmentJustify; 
```

另一种选择是使用 具有 UITextAlignmentJustify 的[**OHAttributedLabel**](https://github.com/AliSoftware/OHAttributedLabel) NSAtributedString 标签

```
 yourOHAttributedLabel.textAlignment = UITextAlignmentJustify; 
```

# ruby-on-rails-3 - 访问子文件夹中的模型

> ID：12579307
> 
> 赞同：0
> 
> 时间：2012-09-25T08:47:56.273
> 
> 标签：ruby-on-rails-3

我在访问子文件夹中的模型时遇到了这个问题。我的项目中有以下文件结构：

```
app/models
   - accounts
     - type1.rb #Inherits from Account
     - type2.rb #Inherits from Account
     - etc.   
   - account.rb
   - user.rb
   - etc. 
```

现在在 user.rb 中，我有一个尝试创建 type1 或 type2 帐户的函数：

```
def function
   self.account = ::Type1.new(...)
end 
```

知道我添加到我的 application.rb （遵循[http://blog.hasmanythrough.com/2008/5/6/a-simple-alternative-to-namespaced-models](http://blog.hasmanythrough.com/2008/5/6/a-simple-alternative-to-namespaced-models)）以下行：

```
config.autoload_paths += Dir["#{config.root}/app/models/**/"] 
```

以便确实加载模型子文件夹。

现在，当我调用该函数时，我仍然会收到著名的`uninitialized constant Type1`错误消息。我错过了什么？

**更新：**

Type1 类为空：

```
class Type1 < Account
end 
```

Account 类很简单：

```
class Account < ActiveRecord::Base

#======================RELATIONS======================
  belongs_to :currency
  belongs_to :organization

#======================VALIDATIONS=========================
  validates :name, :presence => true
  validates :country, :presence => true
  validates :currency, :presence => true
  validates :organization, :presence => true
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:09:39.303

尝试这个

```
config.autoload_paths += Dir[Rails.root.join('app', 'models', '{**}')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:22:19.757

好的，我终于找到了东西。这个想法来自这个页面：[Rails 3 library not loading until require](https://stackoverflow.com/questions/4235782/rails-3-library-not-loading-until-require/6797707#6797707)

我的问题实际上是文件名 wat 不尊重类的 CamelCase 名称......

# perl - 如何从列中读取值

> ID：12579309
> 
> 赞同：-3
> 
> 时间：2012-09-25T08:48:01.217
> 
> 标签：perl

需要读取列的值（第一），该列已经由下表中的制表符分隔。我怎么能在 perl 中做到这一点。有人可以帮忙吗。下面是表格：

```
 First    Available
JAB                       Result        Dat Con?         Con?     
--------                 ------        ---------------   -----   ---------
SLAL_DEPE                SUCCESS       No                Yes     No 
```

这里的第一个 Con 是“是”。我想读取这个值。请与我分享你的知识......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:56:37.333

有不止一种方法可以做到：

```
while (<>) {
    if (/^-+/) {
        $body = 1;
    } elsif ($body) {
        print ((split)[3])
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:38:57.047

怎么样：

```
use strict;
use warnings;

while(<DATA>) {
    chomp;
    my @vals = split/\t+/;
    print $vals[3],"\n" if defined($vals[3]) && $vals[3] eq 'Yes';
}

__DATA__
                                                         First    Available
JAB                       Result        Dat Con?         Con?     
--------                 ------        ---------------   -----   ---------
SLAL_DEPE                SUCCESS       No                Yes     No
SLAL_DEPE                SUCCESS       No                No      No 
```

**输出：**

```
Yes 
```

# asp.net - 如何在带有 Masterpage 的页面中使用 PostbackUrl

> ID：12579311
> 
> 赞同：2
> 
> 时间：2012-09-25T08:48:10.200
> 
> 标签：asp.net

谁能给我一个 PostbackUrl 的工作示例，其中目标页面和上一页都有母版页。

例如，假设我有两个页面**default1.axpx**和**default2.aspx**。他们都有一个**母版页 MyMasterpage.masterpage**

我想从**default1.aspx**回发到**default2.aspx**，然后从 default2 页面中的 default1 页面控件中提取数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T05:31:03.980

你应该把这个问题命名为“我如何在 a 中找到一个控件`ContentPlaceholder`？”，因为你的问题不是它`PreviousPage`不起作用，而是你不明白它是如何`ContentPlaceholder`工作的。

这个问题与母版页本身无关，完全与使用 a 相关`ContentPlaceholder`，在 asp.net 中它是一个命名容器。 `FindControls`不在命名容器内搜索，这正是它们的设计方式。

`PreviousPage`适用于母版页，因此我对它们与您的问题有什么关系感到困惑。您可以访问上一页上您想要的任何属性，它实际上会起作用。例如：

```
 HtmlForm form = PreviousPage.Form; // this works fine
 Control ctrl = PreviousPage.Master.FindControl("TextBox1"); // this works as well 
```

您可能遇到的问题是您试图`FindControl()`在内容页面中查找特定控件，但它不起作用，正是因为您在 PreviousPage 上调用 FindControl，而不是在控件的命名容器上调用'正在寻找存在于。

要找到你想要的控件，你只需要`FindControl`在命名容器上做一个。以下代码工作正常，假设占位符名为 ContentPlaceHolder1。

```
var ph = PreviousPage.Controls[0].FindControl("ContentPlaceHolder1");
var ctl = ph.FindControl("TextBox1"); 
```

您可以使用以下代码验证此问题是否与此无关，`PreviousPage`该代码仅使用单个页面并在自身上查找控件。在 Default.aspx 页面上放置一个名为 TextBox1 的文本框。然后，在`Page_Load`Default.aspx.cs 后面代码的函数中放入这段代码，然后在调试器中运行并单步执行。

```
protected void Page_Load(object sender, EventArgs e)
{
    // Following code should find the control, right?  Wrong. It's null
    var ctrl = Page.FindControl("TextBox1"); 

    // assuming your content placeholder in the masterpage is called MainContent, this works.
    var ctrl = Page.Controls[0].FindControl("MainContent").FindControl("TextBox1");
} 
```

所以请不要说“`PreviousPage`如果页面有母版页，它就不能正常工作”，因为它完全按照它应该的方式工作。问题是你不知道它应该如何工作。了解页面对象模型的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:04:19.500

你试试这个

这是第一页

```
<%@ Page Language="C#" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  

<script runat="server">  
    protected void Button1_Click(object sender, System.EventArgs e) {  
        Label1.Text = "Your city name: " +  
            TextBox1.Text.ToString();  
    }  
</script>  

<html xmlns="http://www.w3.org/1999/xhtml">  
<head runat="server">  
    <title>PostBackUrl Example: how to submit a page to another page in asp.net</title>  
</head>  
<body>  
    <form id="form1" runat="server">  
    <div>  
        <asp:Label ID="Label1" runat="server" Font-Size="Large" ForeColor="DarkSlateBlue"></asp:Label>  
        <br />  
        <asp:Label ID="Label2" runat="server" Text="Your City" AssociatedControlID="TextBox1"></asp:Label>  
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>  
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1" Text="*"></asp:RequiredFieldValidator>  
        <br />  
        <asp:Button ID="Button1" runat="server" Text="Submit in this page" OnClick="Button1_Click" />  
        <asp:Button ID="Button2" runat="server" Text="Submit in city page" PostBackUrl="~/CityPage.aspx" />  
    </div>  
    </form>  
</body>  
</html> 
```

在第二页

```
<%@ Page Language="C#" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  

<script runat="server">  
    protected void Page_Load(object sender, System.EventArgs e) {  
        TextBox PP_TextBox1;  
        PP_TextBox1 = (TextBox)PreviousPage.FindControl("TextBox1");  
        Label1.Text = "Your City: " +  
            PP_TextBox1.Text;  
    }  
</script>  

<html xmlns="http://www.w3.org/1999/xhtml">  
<head runat="server">  
    <title>City Page</title>  
</head>  
<body>  
    <form id="form1" runat="server">  
    <div>  
        <h1>City Page</h1>  
        <asp:Label ID="Label1" runat="server" Font-Size="Large" ForeColor="Crimson"></asp:Label>  
    </div>  
    </form>  
</body>  
</html> 
```

我想这会对你有所帮助....

# ektron - 按 ID 加载 Ektron 小部件？

> ID：12579314
> 
> 赞同：1
> 
> 时间：2012-09-25T08:48:12.280
> 
> 标签：ektron

我正在寻找有关 Ektron 问题的帮助。

场景是我们有许多小部件，它们位于许多页面上。这些小部件都接受用户输入。当用户浏览填写表单的页面时，我们将他们的字段响应保存到会话状态对象中，这些稍后会写入数据库。当用户到达表单末尾时，我们希望以只读模式显示他们填写的所有小部件。这将充当摘要页面。

我们可以通过查询字符串参数或 CMS 可编辑字段轻松地将小部​​件上的每个输入控件设置为只读。我们还可以将用户响应从会话状态加载回小部件。

我们遇到的问题是将 CMS 编辑的内容重新加载到小部件中。

有没有办法可以重新加载以前查看的小部件？也许通过使用 Ektron API 的 id？

我们已经使用了 WidgetBase.Host 对象，但无法使其工作。我们还尝试将整个小部件对象保存到会话状态并将其重新加载到另一个页面，但这也没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:41:12.093

在您的代码中，
`using Ektron.Cms.PageBuilder;`
`using Ektron.Cms.Widget;`

```
// The CMS Content ID of the first page of your form. 
const long otherPageId = 1036;

PageModel pm = new PageModel();
PageData pd = null;
pm.Get(otherPageId, out pd, false);
foreach (Ektron.Cms.PageBuilder.WidgetData w in pd.Widgets)
{

    WidgetTypeData myWidgetType;
    IWidgetTypeModel typeModel = Ektron.Cms.Widget.WidgetTypeFactory.GetModel();
    typeModel.FindByControlURL(w.ControlURL, out myWidgetType);

    // you may have to prefix the ControlURL with "/Widgets/" + w.ControlURL
    UserControl myWidget = Page.LoadControl(w.ControlURL) as UserControl;

    // _host is your page's widget host controller. 
    _host.PopulateWidgetProperties(ref myWidget, ref myWidgetType, w.Settings);
} 
```

现在您可以添加`myWidget`到您的页面。
如果你想阅读它的属性。首先，您需要小部件的类型。在您的 ASPX 页面中，您可以使用 `<%@ Reference Control="~/widgets/YourWidget.ascx" %>` Then 在您的代码旁文件中，您可以将控件的类型引用为`widgets_YourWidget`. 您可以键入 cast myWidget 为`widgets_YourWidget`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:58:07.790

你提出了一个有趣的情况。最后，我不确定我是否会使用 PageBuilder。如果您可以存储每个小部件控制文件 (.ascx) 的路径，那么最后我将有一个 .aspx 页面，该页面仅将这些小部件中的每一个加载为控件。

为此，您可能需要稍微修改小部件，本质上是在使用之前验证 _host 不为空。像这样：

```
_host = Ektron.Cms.Widget.WidgetHost.GetHost(this);
if (_host != null)
{
    _host.Title = "Widget Name";
    _host.Edit += new EditDelegate(EditEvent);
    _host.Maximize += new MaximizeDelegate(delegate() { Visible = true; });
    _host.Minimize += new MinimizeDelegate(delegate() { Visible = false; });
    _host.Create += new CreateDelegate(delegate() { EditEvent(""); });
} 
```

这应该允许您将小部件用作标准的 .NET 控件，可以在适当时将其动态添加到页面中。

除非有理由让这些页面与页面构建器 UI 一起加载，否则我会采取这种方式。

# cursor - 如何将光标移动到 Dart 中的元素？

> ID：12579322
> 
> 赞同：0
> 
> 时间：2012-09-25T08:48:24.650
> 
> 标签：cursor, element, target, dart

刚开始使用 dartlang 并稍微扩展了项目示例。似乎元素类的焦点方法不起作用，或者我没有正确使用它。想要通过“关注”“错误”来获得验证行为。这是我的代码...

```
#import('dart:html');

num rotatePos = 0;

var nameField;

const DEFAULT_VALUE = "Click here!";

void main() {

  query("#text").text = DEFAULT_VALUE;

  query("#submit").on.click.add(rotateText);
}

void rotateText(Event event) {
  rotatePos += 360;

  nameField = query("#name");

  var textElement = query("#text");

  String insertedName = nameField.value;

  textElement.style.transition = "1s";
  textElement.style.transform = "rotate(${rotatePos}deg)";

  updateFromElement(textElement, insertedName);
}

void updateFromElement(Element textElement, String value) {

  Element errorField = query("#errorValue");

  if (value == "") {
    errorField.text = "Text Field is empty, please insert a value!";
    errorField.style.color = "red";
    textElement.text = DEFAULT_VALUE;
    textElement.focus();
  } else {
    textElement.text = value;
    errorField.text = "";
  }
} 
```

Element.focus() 似乎不起作用，或者我在这里误解了一些东西。还添加了 HTML 文件以便更好地理解：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Sandbox</title>
    <link rel="stylesheet" href="sandbox.css">
  </head>
  <body>
    <h1>Sandbox</h1>

    <p>Dart Sandbox</p>

    Enter any text: <input type="text" id="name"> <input type="button" value="Submit" id="submit"> <div id="error"><p id="errorValue"></div>

    <div id="container">
      <p id="text"></p>
    </div>

    <script type="application/dart" src="web/sandbox.dart"></script>
    <script src="http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:56:27.850

我只是试着模拟一个你所拥有的样本。向 HTML 添加一些组件以大致创建相同的效果。我发现了你的问题：

```
var textElement = query("#text");
// ....
updateFromElement(textElement, insertedName); 
```

您正在传递作为`<P>`（段落）元素的 textElement 。不是文本字段。所以你不能在它上面调用 focus() 。尝试这个：

```
updateFromElement(nameField, insertedName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:25:36.273

感谢马特 B，我能够看到错误......我不会像他建议的那样更改参数。无论如何，这是一个丑陋的模式。但要使其正常工作，只需交换以下行：

- textElement.focus();
+ nameField.focus();

该方法的更好措辞是“updateToElement(Element targetElement, String value)”

# c# - MouseWheel 事件不会触发，因为 TextBox 窃取了焦点

> ID：12579325
> 
> 赞同：0
> 
> 时间：2012-09-25T08:48:35.197
> 
> 标签：c#

我正在尝试以下代码：

```
public Form1()
{
    InitializeComponent();
    this.MouseWheel += new MouseEventHandler(Form1_MouseWheel);
}

private void Form1_MouseWheel(object sender, MouseEventArgs e)
{
    textBox1.Text += "delta : " + e.Delta + "\r\n";
} 
```

但该事件似乎从未发生过。然后我注意到，一旦显示表单，文本框就获得了焦点，事实上，在我删除它之后，事件开始工作。

现在，问题：

1.  每当窗体是顶部窗口时，即使我有一个文本区域，我如何才能触发事件？
2.  我应该简单地将相同的事件添加到 textarea 还是有一种我看不到的更简单的方法来做到这一点？
3.  有没有办法在让事件触发之前等待“车轮滚动”结束？我需要根据车轮滚动的时间以指数方式增加整数值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:16:40.523

将 Form1_MouseWheel 添加到表单和文本框（或者可能只是文本框） 在此代码中，所有鼠标滚轮在彼此之后的一秒内移动属于同一系列。

```
public partial class Form1 : Form
{
    private Timer second = new Timer();
    private int wheelMoves = 0;

    public Form1()
    {
        second.Interval = 1000;
        second.Tick += new EventHandler(second_Tick);
        InitializeComponent();
    }

    void second_Tick(object sender, EventArgs e)
    {
        second.Stop();
        // DoStuff with wheelmoves.
        textBox1.Text = wheelMoves.ToString() + " " + (wheelMoves * wheelMoves).ToString();
        wheelMoves = 0;
    }

    void Form1_MouseWheel(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        // reset the timer.
        second.Stop();
        second.Start();
        // Count the number of times the wheel moved.
        wheelMoves++;
    }
} 
```

编辑：如果您添加另一个控件并让它窃取焦点，您不必将事件处理程序添加到文本框。这使文本框滚动功能保持不变，并且还调用自定义 MouseWheel 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:17:01.333

这里最有可能的是文本框自动窃取焦点，因为操作系统可能会自动假定任何鼠标滚轮滚动都指向它（因为它是唯一可用的文本编辑控件）。

***可能的解决方案：***

1.  您可以像对文本框所说的那样添加鼠标滚轮事件
2.  `SetStyle`您可以通过在这样的自定义文本框类中使用来强制创建一个永远无法获得焦点的文本框：

```
类 unfocusableTextBox : 文本框
    {
        公共不可聚焦文本框（）{
               SetStyle(ControlStyles.Selectable, false);
        }
    }

```

# c# - 使用 Automapper 按条件合并两个集合

> ID：12579328
> 
> 赞同：2
> 
> 时间：2012-09-25T08:48:48.057
> 
> 标签：c#, automapper

有两种类型：

1）DTO类型：

```
[DataContract]
public sealed class OrderDetailDto
{
    [DataMember]
    public Guid MergeId { get; set; }
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string PostionName { get; set; }
    [DataMember]
    public decimal Quantity { get; set; }
    [DataMember]
    public byte[] Version { get; set; }
} 
```

2）对应的域类型：

```
public sealed class OrderDetail
{
    public Guid MergeId { get; set; }
    public int Id { get; set; }
    public string PostionName { get; set; }
    public decimal Quantity { get; set; }
    public byte[] Version { get; set; }
} 
```

和两个集合：`Collection<OrderDetail>`和`Collection<OrderDetailDto>`。

`Collection<OrderDetailDto>`有数据更改，这是在某处进行的。现在我想`Collection<OrderDetail>`使用 Automapper 将这些更改应用于 .

为简单起见，我们假设这些集合中的*项目数*相等，但*项目的顺序*可能不同。

为了正确映射集合项目，我想使用`MergeId`属性。我需要这样的东西：

```
Mapper.CreateMap<Collection<OrderDetailDto>, Collection<OrderDetail>>()
  .MappingExpression((dto, do) => dto.MergeId == do.MergeId); 
```

这可能与Automapper有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:25:54.327

我没有找到比使用如下自定义转换器更好的解决方案。

```
 public class Converter : ITypeConverter<Collection<OrderDetailDto>, Collection<OrderDetail>>
    {
        public Collection<OrderDetail> Convert(ResolutionContext context)
        {
            var destCollection = (Collection<OrderDetail>) context.DestinationValue;
            var sourceCollection = (Collection<OrderDetailDto>)context.SourceValue;
            foreach (var source in sourceCollection)
            {
                var dest = destCollection.SingleOrDefault(d => d.MergeId == source.MergeId);
                Mapper.Map(source, dest);
            }
            return destCollection;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:25:45.950

另一种解决方案可以简单地将 linq 查询 + 自动映射器结合起来。

基本概念在这里显示：

```
 var res = from a in orderDetails
              join b in orderDetailsDto on a.MergeId equals b.MergeId
              where a.Update == true // determine update selector here
              select new { a, b };

    res.Each(item => Mapper.Map<OrderDetail, OrderDetailDto>(item.a, item.b)); 
```

为所有合并提取通用扩展方法（基于连接扩展方法）也很容易

# clojure - Leiningen：如何自定义.m2文件夹的位置？

> ID：12579335
> 
> 赞同：8
> 
> 时间：2012-09-25T08:48:56.190
> 
> 标签：clojure, leiningen

我想更改 leiningen 存储所有依赖项的 .m2 文件夹的位置（在 Linux 上）。

有可能实现这一目标吗？

我检查了 lein.sh 脚本的源代码和所有环境变量，但似乎没有任何东西指向 $HOME$/.m2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T08:59:01.353

对于 leiningen v2：

将 profile.clj 放入 ./users/name/.lein （或 Linux 等效项）中，其中包含以下内容

```
{:user  {;Location of local repository 
         :local-repo "Drive/Path"
         ;Location of locally installed jars
         ;(that can't be downloaded from public repo's)
         :repositories  {"local" {:url "file://Drive/Path"
                                  :releases {:checksum :ignore}}}}} 
```

此用户配置文件在 lein 执行期间与所有项目配置文件合并。

查找此类信息的好地方是lein 的 github 上的带[注释的示例配置文件。](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)

# database - 如何将数据从 Iphone 插入服务器中的远程数据库？？？(xcode 4.2)

> ID：12579351
> 
> 赞同：0
> 
> 时间：2012-09-25T08:49:46.583
> 
> 标签：database, xcode, web-services, insert

当我单击按钮时，我想将视图中的文本字段中的数据插入服务器上的远程数据库

我想从远程数据库中检索数据并在视图中的标签中显示这些数据，例如

如果您有一个好的示例教程，请给我链接或提供代码开始，因为我是 xcode 世界的初学者

提前考虑:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:15:19.587

您将需要一个后端服务器，它将接受您发送的请求并从数据库中执行检索。一旦后端服务器检索到数据，它就会响应您的客户端（iPhone 上运行的应用程序）。

后端通常是用 PHP、C#、Java 等语言编写的。您必须了解如何以您将使用的特定语言进行数据库调用。

我使用 RESTKit 执行从客户端到后端服务器的请求，它以 JSON ( [http://json.org/](http://json.org/) ) 格式发送和检索数据。[http://restkit.org/](http://restkit.org/)

你可以在这里看到一个简单的例子：[Do a simple json POST using RESTKit](https://stackoverflow.com/questions/9102262/do-a-simple-json-post-using-restkit)

所以它去应用程序->后端->数据库->后端->应用程序。

如果没有后端，您无法直接从应用程序直接访问数据库。

# javascript - 在javascript中检测窗口最大化

> ID：12579356
> 
> 赞同：1
> 
> 时间：2012-09-25T08:50:04.497
> 
> 标签：javascript, onresize

> **可能重复：**
> [使用 Javascript 检测浏览器窗口最大化/最小化](https://stackoverflow.com/questions/3371973/detect-browser-window-maximized-minimized-with-javascript)

是否可以在 javascript 中检测 borwserwindow 的最大化窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:09:32.863

如果正确，请检查此代码

```
<SCRIPT LANGUAGE="JavaScript">

function Minimize()
{
window.innerWidth = 100;
window.innerHeight = 100;
window.screenX = screen.width;
window.screenY = screen.height;
alwaysLowered = true;
}

function Maximize()
{
window.innerWidth = screen.width;
window.innerHeight = screen.height;
window.screenX = 0;
window.screenY = 0;
alwaysLowered = false;
}
</SCRIPT>

<A HREF="javascript:onClick=Minimize()">Minimize</A>
<A HREF="javascript:onClick=Maximize()">Maximize</A> 
```

您也可以在加载时给予最大化加载....

# html - 我可以使用 HTML5 读取目录的内容吗？

> ID：12579361
> 
> 赞同：1
> 
> 时间：2012-09-25T08:50:25.417
> 
> 标签：html, drag-and-drop, filesystems, directory

我目前正在使用 HTML5 的拖放功能来允许用户添加本地文件和文件夹。

我想知道是否可以读取拖入的文件夹中的内容并将其中的每个文件显示在某种列表中？

这是我目前拥有的代码：

```
<div id="drop_zone"></div>

<script>
var dropzone = document.getElementById('drop_zone');
dropzone.ondrop = function(e) {
  var length = e.dataTransfer.items.length;
  for (var i = 0; i < length; i++) {
    var entry = e.dataTransfer.items[i].webkitGetAsEntry();
    if (entry.isFile) {
        alert("a file");
    } else if (entry.isDirectory) {
        alert('Directory: ' + entry.fullPath);
    }
  }
};
</script> 
```

有人能指出我正确的方向吗？

任何帮助表示赞赏

谢谢

# c# - 不区分大小写的正则表达式来更改 html 标签

> ID：12579364
> 
> 赞同：2
> 
> 时间：2012-09-25T08:50:52.220
> 
> 标签：c#, regex

我的要求是将所有`<br />`标签更改`<br>`为字符串。`<Br />`, `<bR />`, `<BR />`,`<br />`字符串中的所有四个组合都应更改为`<br>`.

如何在 C# 中为此编写正则表达式？

不允许将字符串转换为大写或小写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:53:55.423

```
result = Regex.Replace(subject, @"<br\s*/>", "<br>", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:54:08.200

试试这个，

```
string _reg = Regex.Replace(keyword, "(?i)<br\\s*/>", "<br>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:18:06.167

对于不区分大小写的`regex`尝试使用[***`IgnoreCase`***](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)选项（指定不区分大小写的匹配）

# c - 错误：在构建 c 应用程序以使用 libxml2 解析 xml 时无法包含 iconv.h

> ID：12579368
> 
> 赞同：5
> 
> 时间：2012-09-25T08:51:04.103
> 
> 标签：c, libxml2

我正在使用 libxml2 来解析 xml，但是在编译它抛出的解决方案时

`fatal error : cannot open iconv.h`

当我把它放在`iconv.h`那里并再次重建时，它又抛出了其他

`error unable to open include file sys/cdefs.h.`

我最终陷入了一个恶性循环。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:53:39.243

在您的机器上构建并安装 libiconv，它将工作

# html - 固定高度容器div，灵活高度内容div

> ID：12579372
> 
> 赞同：1
> 
> 时间：2012-09-25T08:51:29.970
> 
> 标签：html, css

我有一个这样的html代码：

```
<div id="container">
<div id="header">
</div>
<div id="content">
</div>
<div id="footer">
</div> 
```

div#container 的高度是固定的（例如 800px）。开始时不知道 div#footer 和 div#header 的大小（通过 Javascript 设置）。

我希望 div#content 占据剩余高度的 100%。

可以使用 CSS 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:57:32.980

对于这种类型的功能，您可以使用**display:table**。像这样写：

```
.container{
    display:table;
    height:800px;
    width:100%;
}
.container > div{
    display:table-row;
}
.header{background:red; height:100px;}

.content{background:blue}

.footer{background:green; height:100px;} 
```

检查这个[http://jsfiddle.net/Rvbk4/](http://jsfiddle.net/Rvbk4/)

注意：它工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:13:24.077

由于您无法设置页脚高度（如您所写），请
尝试以下操作：

```
#container{
    background : red;
    height:800px;
    min-height:800px
}
#header{
    background : blue;
}
#content{
    background : yellow;
    height:100%
}
#footer{
    background : green;
    //position:absolute;
    position:fixed;
    bottom:0;
    width:100%;
} 
```

和 jsfiddle：http: [//jsfiddle.net/AJtxy/1/](http://jsfiddle.net/AJtxy/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:14:24.030

如果您使用 javascript 设置其他 div 的高度，您可以使用 jquery 来获取窗口的高度，减去其他 2 个 div 的高度，瞧，剩下的数量是正确的......这应该可以帮助你一个想法 [http://api.jquery.com/height/](http://api.jquery.com/height/)

# sas - 选择 SAS 中的特定行

> ID：12579376
> 
> 赞同：-1
> 
> 时间：2012-09-25T08:51:36.380
> 
> 标签：sas, datastep

我有来自单个患者的多次记录的以下数据。

```
ID                       date           day     result
BELF000000084785    20111110    1   164
BELF000000084785    20111202    2   172
BELF000016833470    20070122    2   226
BELF000016833470    20070522    3   398
BELF000016959442    20080429    1   242
BELF000016959442    20080820    1   126
BELF000016959442    20090225    2   302
BELF000016959442    20090424    2   320
BELF000017061714    20080626    1   152
BELF000017801424    20110803    1   298
BELF000017801424    20110913    2   252
BELF000017801424    20111022    3   234
BELF000024405407    20080218    1   232
BELF000024405407    20080318    2   190
BELF000024405410    20070122    3   380
BELF000024405410    20070218    1   506
BELF000024405410    20070320    2   480
BELF000024405410    20070626    3   346
BELF000024408114    20070423    1   296
BELF000024408114    20070711    3   294 
```

我想提取第 1 天有记录的患者；如果第 1 天和第 2 天都可用，第 1 天第 2 天和第 3 天都可用。并通过其他。任何 sas 帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:50:45.460

如果没有重复 ID - 日级别，您可以跳过最近的一天：

```
proc sort data=sample;
by ID day;
run;

data result;
set sample;
by ID;
if not last.ID then output;
run; 
```

您想如何处理重复的 ID - 不同日期的日记录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:49:12.280

我认为这正是 OP 中所要求的。我不知道这是否真的是你想要的，但这需要进一步澄清。

```
data have;
informat date YYMMDD8.;
format ID $17.;
input ID $ date day result ;
datalines;
BELF000000084785    20111110    1   164
BELF000000084785    20111202    2   172
BELF000016833470    20070122    2   226
BELF000016833470    20070522    3   398
BELF000016959442    20080429    1   242
BELF000016959442    20080820    1   126
BELF000016959442    20090225    2   302
BELF000016959442    20090424    2   320
BELF000017061714    20080626    1   152
BELF000017801424    20110803    1   298
BELF000017801424    20110913    2   252
BELF000017801424    20111022    3   234
BELF000024405407    20080218    1   232
BELF000024405407    20080318    2   190
BELF000024405410    20070122    3   380
BELF000024405410    20070218    1   506
BELF000024405410    20070320    2   480
BELF000024405410    20070626    3   346
BELF000024408114    20070423    1   296
BELF000024408114    20070711    3   294
;;;;
run;

data want;
do _n_ = 1 by 1 until (last.ID);
 set have;
 by ID notsorted;
 if first.ID then do; 
    lastday=0; 
    done=0; 
 end;
 if (first.ID) and (day ne 1) then lastday=-99;
 else if day ne lastday+1 then done=1;
 else if not done then lastday=day;
end;
do _n_ = 1 by 1 until (last.ID);
 set have;
 by ID notsorted;
 if first.ID then curday=0;
 curday+1;
 if curday le lastday then output;
end;
run; 
```

结果：

```
Obs      ID        date day result 
1 BELF000000084785  18941 1 164 
2 BELF000000084785  18963 2 172 
3 BELF000016959442  17651 1 242 
4 BELF000017061714  17709 1 152 
5 BELF000017801424  18842 1 298 
6 BELF000017801424  18883 2 252 
7 BELF000017801424  18922 3 234 
8 BELF000024405407  17580 1 232 
9 BELF000024405407  17609 2 190 
10 BELF000024408114  17279 1 296 
```

# makefile - Makefile 规则：我应该如何指定具有修改的目标名称的依赖项？

> ID：12579378
> 
> 赞同：1
> 
> 时间：2012-09-25T08:51:49.193
> 
> 标签：makefile, gnu-make

我需要为以下模式编写规则：

```
SAMPLE1.tsv : SAMPLE1_result23_R1.txt  SAMPLE1_result23_R2.txt
       (do something)

SAMPLE2.tsv : SAMPLE2_result54_R1.txt  SAMPLE2_result54_R2.txt
       (do something)
(...) 
```

我试过类似的东西：

```
%.tsv: $(wildcard %_*_R1.txt) $(wildcard %_*_R2.txt)
       (do something) 
```

但这不起作用。我应该如何写这种规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:16:42.817

您不能引用`%`内部 Makefile 函数。您必须单独声明依赖项，或者使用递归 Make，或者生成 Makefile，或者使用不太精确的依赖项声明。

对依赖项进行简单的重构可能是最简单的：

```
SAMPLE1.tsv: $(wildcard SAMPLE1_*_R1.txt) $(wildcard SAMPLE1_*_R2.txt)
SAMPLE2.tsv: $(wildcard SAMPLE2_*_R1.txt) $(wildcard SAMPLE2_*_R2.txt)
%.tsv:
        (do something with $^) 
```

... where`$^`将扩展到完整的依赖项列表。

我想您可以进一步重构以进行`foreach`循环`SAMPLE1`，`SAMPLE2`但是如果依赖关系如此简单（并且相当稳定，因此您不必一直编辑重复的部分），那就不值得麻烦了。

# maven - gwteventservice 使用 maven 示例

> ID：12579379
> 
> 赞同：1
> 
> 时间：2012-09-25T08:51:53.230
> 
> 标签：maven

我需要 gwteventservice 库的帮助...目前，我需要为我的 gwt 应用程序实现推送通知。我找到了一个很好的库来使用，但是在将它与 maven 一起使用时遇到了问题（因为我现有的 gwt 应用程序使用了 maven）。我试图将依赖项添加到我的 gwt 项目 pom.xml，但它在我的 Eclipse IDE 中不断给我错误。错误信息是：

> ArtifactDescriptorException：无法读取 de.novanic.gwteventservice:eventservice-rpc:jar:1.2.0 的工件描述符：UnresolvableModelException：无法从/向远程存储库传输工件 de.novanic.gwteventservice:parent:pom:1.2.0（ http://XXX.XX.XX.XX:8081/artifactory/remote-repos): 60000 后没有收到响应

我正在使用人工制品与在线 Maven 存储库进行代理。这是我添加到现有 gwt 项目中的 maven 依赖标记：

```
 <dependency>
            <groupId>de.novanic.gwteventservice</groupId>
            <artifactId>parent</artifactId>
            <version>1.2.0</version>
        </dependency>
        <dependency>
            <groupId>de.novanic.gwteventservice</groupId>
            <artifactId>eventservice</artifactId>
            <version>1.2.0</version>
        </dependency>
        <dependency>
            <groupId>de.novanic.gwteventservice</groupId>
            <artifactId>eventservice-rpc</artifactId>
            <version>1.2.0</version>
        </dependency>
        <dependency>
            <groupId>de.novanic.gwteventservice</groupId>
            <artifactId>gwteventservice</artifactId>
            <version>1.2.0</version>
        </dependency> 
```

请任何人帮助我。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:35:47.943

您收到的错误告诉您，maven 找不到父工件，它是您发布的依赖项片段中的第一个工件。这样做的原因是 Maven Central 中的父工件只包含一个没有 jar 的 POM。

查看[Maven 文档](http://maven.apache.org/pom.html#POM_Relationships)，您会注意到，对于 POM 中的依赖块，默认类型是 jar。因此，由于您没有指定类型，maven 正在寻找一个罐子。由于没有罐子，它正确地失败了。

如果你真的想要那个 pom，只需添加`<type>pom</type>`. 但是，您似乎只需要 gwteventservice jars。我建议删除第一个依赖项。

# wcf - NavigationService 在 Silverlight 中不起作用

> ID：12579381
> 
> 赞同：0
> 
> 时间：2012-09-25T08:52:07.163
> 
> 标签：wcf, silverlight, out-of-browser, navigationservice

我正在尝试更改我的 OOB Silverlight 应用程序中加载的页面。我已经添加了对 Navigation 程序集的引用，但是，当我使用 NavigationService 时，我仍然会这样做。和 ctrl+space，我看不到我应该看到的任何方法或属性。这是那部分代码：

```
void client_LoginCompleted(object sender, LoginCompletedEventArgs e)
{
    if (e.Result)
    {
        MessageBox.Show(String.Format("Welcome {0}", user.Text), "Success!", MessageBoxButton.OK);
        NavigationService.Navigate(someUri);
    }
} 
```

问题发生在我调用 NavigationService 的行上。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:50:13.777

我已经找到了这个小问题的答案。考虑到我是 Silverlight 的新手，我什至认为我的问题中没有比那段代码更多的工作。我已经解决了这个视频中显示的问题：[http ://www.silverlight.net/learn/graphics/windows,-screens,-navigation/navigation-framework](http://www.silverlight.net/learn/graphics/windows,-screens,-navigation/navigation-framework)

# android - 在android中设置动态壁纸时调用接收器？

> ID：12579382
> 
> 赞同：5
> 
> 时间：2012-09-25T08:52:07.063
> 
> 标签：android, broadcastreceiver, live-wallpaper

请告诉我如何在 android 中收听动态壁纸变化？我尝试过什么：我在 android 中制作了一个接收器，它可以监听壁纸更改动作。

```
<receiver
            android:name=".Wallpaper_Change"
            android:enabled="true" >
            <intent-filter>
                 <action android:name="android.intent.action.WALLPAPER_CHANGED"/>
             </intent-filter>
</receiver> 
```

它仅在将静态图像设置为墙纸时调用，而不是在设置动态墙纸时调用。

# c# - Linq multiplie where 使用 or 运算符查询

> ID：12579386
> 
> 赞同：1
> 
> 时间：2012-09-25T08:52:14.960
> 
> 标签：c#, linq, linq-to-sql

我有一个`List<string> filterCriteria`包含一个或多个关键字的关键字，用于根据客户端的用户选择在我的数据库中搜索一列。

我遇到的问题是我不太确定如何构建我的 linq to sql 语句，因为它可能没有“或”运算符，也可能有多个（10+）。

这是我的原始查询

```
var originalQuery = (from p in productContext.Products
                         select p); 
```

然后根据列表，我需要通过`List<string> filterCriteria`使用或运算符中的单词查询“originalQuery”。

例如

```
 originalQuery = originalQuery.Where(p => p.ProductRange == "criteria1" || 
    p.ProductRange == "criteria2"); 
```

等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:57:09.317

你可以这样做：

```
originalQuery = originalQuery.Where(p => filterCriteria.Contains(p.ProductRange)); 
```

这样，您将获得 originalQuery 中具有 ProductRange 选定值之一的所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:05:16.907

您可以使用的另一种方式`Any`：

```
originalQuery.Where(p => filterCriteria.Any(c => c == p.ProductRange)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:21:57.940

与 Martin 相同的另一种写法：

```
var originalQuery = 
    from p in productContext.Products 
    where filterCriteria.Contains(p.ProductRange)
    select p; 
```

# gwt - 部署模块按钮

> ID：12579388
> 
> 赞同：1
> 
> 时间：2012-09-25T08:52:17.373
> 
> 标签：gwt

如何启用“部署模块” - Eclipse 4.2（Ubuntu/Windows/GWT SDK 2.5）中的按钮。

![按钮](../Images/f184970dafcb02ac8167d54f573d941d.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:57:38.127

根据图片，eclipse seam 无法将“loginmanager”项目识别为 Web 应用程序。

可能是看看他的属性>方面

# c# - 使用 C# 泛型压缩代码

> ID：12579389
> 
> 赞同：3
> 
> 时间：2012-09-25T08:52:17.863
> 
> 标签：c#, linq, generics

我有以下两种方法，我可以使用泛型在一种方法中进行压缩。我尝试过的无法编译。有人可以让我知道如何做到这一点吗？我需要检查表 AgeLengths 的 2 个不同字段是否至少有一个值。Str_table 与 AgeLengths 有一对多的关系。

```
public static bool HasMeanWeight(int id)
{
    MyDataContext dc = new MyDataContext ();
    return  (from s in dc.Str_table 
             where s.SId == id 
             select s.AgeLengths
             .Where(a => a.MeanWeight != null ).Any() == true
            ).FirstOrDefault();
}

public static bool HasNumbersData(int id)
{
    MyDataContext dc = new MyDataContext ();
    return (from s in dc.Str_table 
            where s.sId == id 
            select s.AgeLengths
            .Where(a => a.Numbers  != null).Any() == true
           ).FirstOrDefault();
} 
```

在此先感谢 B

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:56:02.403

**更新：**抱歉，我没有意识到这是 linq to sql。[丹尼斯的回答](https://stackoverflow.com/a/12579704/358221)似乎是对的。

尝试注入 a`Func<T, TResult>`以注入不同的代码：

```
public static bool HasData(int id, Func<AgeLength, object> selector)
{
    MyDataContext dc = new MyDataContext ();
    return (from s in dc.Str_table 
            where s.sId == id 
            select s.AgeLengths
                .Where(a => selector(a) != null)
                .Any())
           .FirstOrDefault();
} 
```

并像这样调用：

```
HasData(1, a => a.Numbers);
HasData(1, a => a.MeanWeight); 
```

如果`Numbers`和`MeanWeight`属性在同一继承层次结构中，那么您可以`object`用更有用的东西替换，但在这种情况下`object`很好，因为您只是在测试 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:10:43.850

如果您使用 some `DataContext`，那么您正在使用`IQueryable<T>`，并且您可以在表达式中编写的内容非常有限。因此，您需要将*表达式*传递给您的方法，而不是谓词本身：

```
static bool HasData(int id, Expression<Func<AgeLength, bool>> predicate)
{
    using (MyDataContext dc = new MyDataContext())
    {
        return (from s in dc.Str_table
                where s.sId == id
                select s.AgeLengths
                .Any(predicate)
               ).FirstOrDefault();
    }
} 
```

除了：

*   有`Any`重载，接受谓词表达式；
*   必须处理上下文（参见`using`）；
*   没必要写`someBoolExpression == true`；就写吧`someBoolExpression`。

比你可以这样调用这个方法：

```
HasData(1, a => a.MeanWeight != null);
HasData(1, a => a => a.Numbers  != null); 
```

请注意，第二个参数是 lambda 表达式，而不是方法。
这是因为查询的惰性：您提供了一组表达式，相应的提供程序将它们转换为适当的 SQL。

# jasper-reports - iReport 表，每行都有重复的附加记录

> ID：12579390
> 
> 赞同：4
> 
> 时间：2012-09-25T08:52:30.690
> 
> 标签：jasper-reports, ireport

我在整个互联网和这个论坛上进行了搜索，但我找不到实现下表的方法。我正在使用*iReport* 4.7.1。

请给我一个提示？

![在此处输入图像描述](../Images/09d111b0d40c562caf34864970461791.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:13:36.930

这很容易。您应该将*textField*元素添加到带有字段的*textFields下方的**Detail*带中。

 *这是一个示例。

*iReport*中的报表设计：

![iReport 中的报表设计](../Images/55c0e7904999160fa0f1afb527deec32.png)

*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <queryString>
        <![CDATA[SELECT id, street, city FROM ADDRESS]]>
    </queryString>
    <field name="ID" class="java.lang.Integer"/>
    <field name="STREET" class="java.lang.String"/>
    <field name="CITY" class="java.lang.String"/>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Id]]></text>
            </staticText>
            <staticText>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[City]]></text>
            </staticText>
            <staticText>
                <reportElement x="200" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Street]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="40" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="200" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{STREET}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="20" width="300" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA["Details about row " + $V{REPORT_COUNT}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

结果将是：

![通过预览在 iReport 中的结果](../Images/8140ca4fc46f3be0b04f1bdbe61aee67.png)*

# sql - 提取两个表中的不同记录

> ID：12579393
> 
> 赞同：2
> 
> 时间：2012-09-25T08:52:48.747
> 
> 标签：sql, oracle, set-operations

我有两张桌子 -`table1`和`table2`. 两个表具有相同的列。

我想提取记录差异——意思是在`table1`not in 中提取记录，在not in 中`table2`提取记录。`table2``table1`

我如何通过在 Oracle Sys 中使用 SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:56:42.103

**要在一个结果集中获得****两个**表中的所有差异，您可以使用

 **```
select columnlist
from tableA
minus
select columnlist
from tableB
union all
select columnlist
from tableB
minus
select columnlist
from tableA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:17:48.743

RomanKonz 的解决方案，附有哪些表实际包含行的附加信息（我通常使用 WITH 来简化实际的 UNION ALL / MINUS 部分）：

```
with 
  v_a as (
    select *
    from tableA), 
  v_b as (
    select *
    from tableB)
select * from 
(
 (select 'A only' src, v.* from v_a v
  minus 
  select 'A only' src, v.* from v_b v
 ) 
 union all
 (select 'B only' src, v.* from v_b v
  minus
  select 'B only' src, v.* from v_b v
 )
) order by primarykeycolumn, src 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:54:53.180

> [MINUS](http://oreilly.com/catalog/mastorasql/chapter/ch07.html) 获取一个 SELECT 语句的结果集，并删除第二个 SELECT 语句也返回的那些行。

此查询将返回 table1 中的所有行，而不是 table2 中的所有行：

```
SELECT * FROM table1
MINUS
SELECT * FROM table2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:55:18.510

```
select * from table1 where pk_col not in(select pk_col from table2)

select * from table2 where pk_col not in(select pk_col from table1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:57:51.023

```
select t1.column1,t1.column2 from table1 t1 except select t2.column1,t2.column2 from table 2 t2 UNION all select t2.column1,t2.column2 from table 2 t2 except select t1.column1,t1.column2 from table1 t1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T08:58:39.367

```
select t1.Id,t1.name,t2.Id,t2.name from table1 t1 ,table2 t2 where t1.Id and t1.Name not in(select * from  table2) and t2.Id,t2.name not in (select * from table 2) 
```**

# php - 从产品价格中弃用货币符号

> ID：12579394
> 
> 赞同：1
> 
> 时间：2012-09-25T08:52:48.263
> 
> 标签：php, regex, oscommerce

我正在开发 OScommerce 中的一个电子商务项目，我必须在其中实现谷歌跟踪，谷歌不允许在其方法中使用货币符号作为参数的产品价格。但是在我的付款成功页面上，我得到了带有货币符号的产品价格。那么，有什么方法可以从产品价格中提取数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:54:58.253

尝试：

```
$price_no_curr = preg_replace ( '#\D*?(\d+(\.\d+)?)\D*#', '$1', $price); 
```

# html - 让底部 div 填充页面的其余部分

> ID：12579395
> 
> 赞同：0
> 
> 时间：2012-09-25T08:52:54.097
> 
> 标签：html, css

我有以下结构： [图片 http://images.devs-on.net/Image/4eludampmz3Ylfm6-Bereich.png](http://images.devs-on.net/Image/4eludampmz3Ylfm6-Bereich.png)

我不知道头部的高度，但我希望第二个容器填充其余的高度。

当我现在想要头部大小时，我找到了一些解决方案，但我没有。我希望上部容器适合其内容，而第二个容器填充窗口的其余部分。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:57:03.047

你可以这样做

```
position:absolute;
height:100% !important; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:57:07.803

你可以使用 JavaScript/jQuery

```
var topDivHeight = $("#topdiv").height(),
totalHeight = $(document).height();
$('#bottomDiv').height(totalHeight  - topDivHeight ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:57:50.407

使用纯 CSS 并没有真正好的跨浏览器方式来做到这一点。最好的办法是使用 jQuery/javascript 来调整 div 的高度以填充屏幕。假设您的顶部 div 高度为 200px：

```
$("#bottom_div").css({
    minHeight: (($(window).height()) - 200) + 'px'
}) 
```

当你调整屏幕大小时，你也需要调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T09:02:31.513

改编自：[具有基于浏览器窗口高度的动态最小高度的 div，](https://stackoverflow.com/questions/7527152/div-with-dynamic-min-height-based-on-browser-window-height)不依赖于 javascript。

HTML：

```
<div id="header">
  Place your header information here.
</div>
<div id="content">
  Place your content here.
</div> 
```

CSS：

```
* {
  margin: 0;
}
html, body {
  height: 100%;
}
#content {
  min-height: 100%;
  height: auto !important /*min-height hack*/
  height: 100%;           /*min-height hack*/
  background-color: red;
}​ 
```

JSFiddle 测试：http: [//jsfiddle.net/7SP9U/](http://jsfiddle.net/7SP9U/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T09:05:31.777

为此，您可以为此使用**display:table**属性，但它在 IE8 及更高版本之前都可以使用。像这样写：

```
<div class="container">
    <div class="header">header</div>
    <div class="content">content</div>
</div> 
```

**CSS**

```
.container{
    display:table;
    height:800px;
    width:100%;
}
.container > div{
    display:table-row;
}
.header{background:red; height:10%;}

.content{background:blue} 
```

检查这个[http://jsfiddle.net/Rvbk4/2/](http://jsfiddle.net/Rvbk4/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:58:13.233

这是一个仅适用于 IE8 的纯 CSS 解决方案，因为使用了`display: table`.

容器必须占满高度，绝对定位并占满`display: table`。它的孩子将需要`display: table-row`（如果您想要在此级别以下的任何体面的样式，您应该真正将内容包装在进一步的包装器中，`display: table-cell`但我省略了这一点以使示例清晰）。

By default the rows will take up equal fraction heights of the parent, but you can make them shrink to fit their content by setting `height: 0` (or any other height).

Hope this helps:

[http://jsfiddle.net/barney/nXWbL/](http://jsfiddle.net/barney/nXWbL/)

# jakarta-ee - 带有 JAX-RS RESTful 服务的 OSGi Bundle 无法启动

> ID：12579401
> 
> 赞同：6
> 
> 时间：2012-09-25T08:53:03.287
> 
> 标签：jakarta-ee, glassfish, jersey, osgi

我正在为 Glassfish AS 编写捆绑的 OSGi 应用程序。我捆绑了 JAX-RS RESTful 服务，与 Jersey 一起启动（我使用了 Vogella 的教程）。我的`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

当我尝试自动部署捆绑包时出现问题，异常：

```
SEVERE: WebModule[/spm]StandardWrapper.Throwable
com.sun.jersey.spi.service.ServiceConfigurationError: com.sun.jersey.spi.HeaderDelegateProvider: The class com.sun.jersey.core.impl.provider.header.LocaleProvider implementing provider interface com.sun.jersey.spi.HeaderDelegateProvider could not be instantiated: Cannot cast com.sun.jersey.core.impl.provider.header.LocaleProvider to com.sun.jersey.spi.HeaderDelegateProvider
    at com.sun.jersey.core.osgi.OsgiRegistry$OsgiServiceFinder$1.next(OsgiRegistry.java:149)
    at com.sun.jersey.core.spi.factory.AbstractRuntimeDelegate.<init>(AbstractRuntimeDelegate.java:76)
    at com.sun.jersey.server.impl.provider.RuntimeDelegateImpl.<init>(RuntimeDelegateImpl.java:54)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.jersey.core.osgi.OsgiRegistry.hookUp(OsgiRegistry.java:391)
    at com.sun.jersey.core.osgi.OsgiRegistry.getInstance(OsgiRegistry.java:119)
    at com.sun.jersey.core.reflection.ReflectionHelper.getOsgiRegistryInstance(ReflectionHelper.java:737)
    at com.sun.jersey.spi.scanning.AnnotationScannerListener$AnnotatedClassVisitor.getClassForName(AnnotationScannerListener.java:217)
    at com.sun.jersey.spi.scanning.AnnotationScannerListener$AnnotatedClassVisitor.visitEnd(AnnotationScannerListener.java:186)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:136)
    at com.sun.jersey.core.spi.scanning.JarFileScanner.scan(JarFileScanner.java:97)
    at com.sun.jersey.spi.scanning.servlet.WebAppResourcesScanner$1.f(WebAppResourcesScanner.java:94)
    at com.sun.jersey.core.util.Closing.f(Closing.java:71)
    at com.sun.jersey.spi.scanning.servlet.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:92)
    at com.sun.jersey.spi.scanning.servlet.WebAppResourcesScanner.scan(WebAppResourcesScanner.java:79)
    at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:80)
    at com.sun.jersey.api.core.servlet.WebAppResourceConfig.init(WebAppResourceConfig.java:102)
    at com.sun.jersey.api.core.servlet.WebAppResourceConfig.<init>(WebAppResourceConfig.java:89)
    at com.sun.jersey.api.core.servlet.WebAppResourceConfig.<init>(WebAppResourceConfig.java:74)
    at com.sun.jersey.spi.container.servlet.WebComponent.getWebAppResourceConfig(WebComponent.java:672)
    at com.sun.jersey.spi.container.servlet.ServletContainer.getDefaultResourceConfig(ServletContainer.java:415)
    at com.sun.jersey.spi.container.servlet.ServletContainer.getDefaultResourceConfig(ServletContainer.java:582)
    at com.sun.jersey.spi.container.servlet.WebServletConfig.getDefaultResourceConfig(WebServletConfig.java:87)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:703)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1250)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:183)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.execute(OSGiDeploymentRequest.java:118)
    at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:121)
    at org.glassfish.osgijavaeebase.OSGiContainer.deploy(OSGiContainer.java:154)
    at org.glassfish.osgijavaeebase.JavaEEExtender.deploy(JavaEEExtender.java:107)
    at org.glassfish.osgijavaeebase.JavaEEExtender.access$200(JavaEEExtender.java:61)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:151)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:148)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassCastException: Cannot cast com.sun.jersey.core.impl.provider.header.LocaleProvider to com.sun.jersey.spi.HeaderDelegateProvider
    at java.lang.Class.cast(Class.java:3007)
    at com.sun.jersey.core.osgi.OsgiRegistry$OsgiServiceFinder$1.next(OsgiRegistry.java:147)
    ... 64 more 
```

可能是什么问题？试图查看这些类的来源，并且似乎`LocaleProvider`实现了`HeaderDelegateProvider`，一切都很好......非常奇怪的行为。有什么想法，在这种情况下我该怎么办？

# c# - 如何按名称设置目标工作表？

> ID：12579402
> 
> 赞同：0
> 
> 时间：2012-09-25T08:53:03.597
> 
> 标签：c#, excel, silverlight

我想将一个元素（可能是 gridview、List 等）导出为 .xls 文件，并通过 Silverlight 4.0 中的给定字符串设置 WorkSheet。我怎么解决这个问题？

以下是使用 RadGridView API 的导出功能...

```
public RadGridView Grid { get; private set; }
void ExportWithoutDetail()
{
    SaveFileDialog saveDialog = new SaveFileDialog();
    saveDialog.Filter = ReadFilter();
    saveDialog.FilterIndex = 4;

    if (saveDialog.ShowDialog() == true)
    {
        SetAllColumnVisibile();
        Stream stream = null;
        try
        {
            using (stream = saveDialog.OpenFile())
            {
                GridViewExportOptions opt = CreateExportOptions();

                switch (saveDialog.FilterIndex)
                {
                    case 1: //*.txt
                        opt.Format = ExportFormat.Text;
                        break;
                    case 2: //*.html
                        opt.Format = ExportFormat.Html;
                        break;
                    case 3: //*.csv
                        opt.Format = ExportFormat.Csv;
                        break;
                    case 4: //*.xls
                        opt.Format = ExportFormat.ExcelML;
                        break;
                    case 5: //*.xml
                        opt.Format = ExportFormat.ExcelML;
                        break;
                }
                Grid.Export(stream, opt);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (stream != null)
                stream.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:46:04.027

您可以使用此代码将网格或列表导出到 Excel，

```
 if ((xamGridtemplateDet.ItemsSource).Count > 0)
        {
            Workbook wrkbook = new Workbook();

            Worksheet wrkSHT = wrkbook.Worksheets.Add("Sheet 1");

            wrkSHT.DisplayOptions.PanesAreFrozen = true;
            wrkSHT.DisplayOptions.FrozenPaneSettings.FrozenRows = 1;

            wrkSHT.DefaultColumnWidth = 5000;
            int currentcolumn = 0;
            foreach (TemplateDetailUI column in xamGridtemplateDet.ItemsSource)
            {
                if (column != null)
                {
                    SetCellValue(wrkSHT.Rows[0].Cells[currentcolumn], column.ColumnName);
                    currentcolumn++;
                }
            }

            SaveExport(wrkbook); 
```

}

```
 public void SaveExport(Workbook dataworkbook)
    {
        try
        {
            bool? showDialog = this.dialog.ShowDialog();
            if (showDialog == true)
            {
                using (System.IO.Stream exportstream = dialog.OpenFile())
                {
                    dataworkbook.Save(exportstream);
                    exportstream.Close();
                }

            }
        }
        catch (Exception ex)
        {

           throw ex;
        }

    } 
```

# asp.net-mvc - 在单元测试项目中使用模拟时源不工作

> ID：12579403
> 
> 赞同：-1
> 
> 时间：2012-09-25T08:53:13.153
> 
> 标签：asp.net-mvc, unit-testing

当我在单元测试项目中使用模拟概念初始化 httpcontext.Request.Url 时，源项目未初始化。所以它抛出空引用异常。你能告诉我如何解决这个问题吗？

前任：

实际代码

```
class sample

{
    public void sample_method()
    {
        string url=Request.Url.ToString();
    }
} 
```

更新了单元测试代码

```
​

class sample: IRequestAttr
{
    private readonly IRequestAttr _attr;

    public sample(IRequestAttr attr)
    {
        _attr=attr;
    }

    public string URL
    {
        return HttpContext.Request.Url.ToString();
    }

    public void sample_method()
    {
        string url=_attr.URL();
    }
}

public interface IRequestAttr
{
    string URL();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:40:46.427

您是否尝试过使用

```
HttpContextBase 
```

创建一个工厂来获取您的上下文，您可以在其中将真实请求替换为您想要的任何模拟。可根据要求提供更多代码

查看我自己测试中的笔记，我为一个很好地解释事情的博客添加了书签 [http://www.codethinked.com/Using-SystemWebAbstractions-in-Your-WebForms-Apps](http://www.codethinked.com/Using-SystemWebAbstractions-in-Your-WebForms-Apps)

# networking - 虚拟客人之间的无线 Adhoc

> ID：12579408
> 
> 赞同：2
> 
> 时间：2012-09-25T08:53:36.030
> 
> 标签：networking, virtual-machine, virtualbox, adhoc

我正在尝试模拟无线自组织网络环境。

因此，我提出了使用虚拟客户（在 VirtualBox 中）作为移动节点的想法，这些节点可以在运行时以特殊方式相互通信。

我已经在许多其他网站中搜索了有关如何在虚拟客人之间建立临时网络的信息。但是，似乎我没有发现任何相关的东西。

因此，我想就这个问题向任何人寻求帮助。请让我知道，您对虚拟客人之间的 Adhoc 网络有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:30:44.460

首先，您尝试的不是*模拟*自组织网络，而是*模拟*网络。您需要模拟它们之间的物理层，因此根据例如它们之间的距离、干扰和噪声量、类型调制、编码等来丢弃数据包。这很复杂，我建议您使用现有软件而不是创建您的自己的。

查看 EstiNet： [http](http://www.estinet.com/products.php) ://www.estinet.com/products.php 或其免费的旧版本 NCTUns： [http ://nsl10.csie.nctu.edu.tw/](http://nsl10.csie.nctu.edu.tw/)

对于实际模拟检查： [http](http://www.nsnam.org/) ://www.nsnam.org/ ，它也支持模拟。

# java - Android：带有在线文件 链接的 TextView

> ID：12579410
> 
> 赞同：2
> 
> 时间：2012-09-25T08:53:52.807
> 
> 标签：java, android

我有一个 [CDATA] 字符串，其中有一个（a href）链接，该链接链接到在线 PDF 文件（http://online.link.com/file.pdf）。我可以在链接区域使 TextView 可点击，没问题，但问题是我希望它打开 ACTION_VIEW 意图以使用 PDF 查看器在本地查看 PDF 文件。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:09:11.113

是的，您可以使用如下所示的 Intent。

```
Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW, Uri
                        .parse("file://" + aFile.getAbsolutePath()));
startActivity(myIntent); 
```

PDF 文件将在默认手机查看器中打开。我不确定它是否适用于模拟器。还是试试吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:59:11.647

这是可能的 ：）。浏览以下链接。

[http://asmncl.blogspot.in/2012/06/android-open-pdf-file-in-webview.html](http://asmncl.blogspot.in/2012/06/android-open-pdf-file-in-webview.html)

[在 Android 上使用 Java 渲染 PDF 文件](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)

愿这能解决你的问题。

# php - 上传图像 ANDROID

> ID：12579416
> 
> 赞同：0
> 
> 时间：2012-09-25T08:54:19.937
> 
> 标签：php, android, image

我遵循了有关如何上传图像的教程，但文件没有出现，我不知道我在哪里做错了。基本上，我从手机图库中选择一张照片并发送。

**下面是我的代码：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    btnUpload = (Button) this.findViewById(R.id.btnUpload);

    btnUpload.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            // To open up a gallery browser
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"), 1);
        }
    });

    btnSent = (Button) this.findViewById(R.id.btnSent);

    btnSent.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            HttpUploader uploader = new HttpUploader();
            try {
                // String image_name =
                uploader.execute(getRealPathFromURI(currImageURI)).get();
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            }
        }
    });
}

// To handle when an image is selected from the browser
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == 1) {
            // currImageURI is the global variable I’m using to hold the
            // content:
            currImageURI = data.getData();
            path = (TextView) findViewById(R.id.path);
            path.setText(getRealPathFromURI(currImageURI));
        }
    }
}

// Convert the image URI to the direct file system path of the image file
public String getRealPathFromURI(Uri contentUri) {
String[] proj = { MediaStore.Images.Media.DATA };
    android.database.Cursor cursor = managedQuery(contentUri, proj, // Which
                                                                    // columns
                                                                    // to
                                                                    // return
            null, // WHERE clause; which rows to return (all rows)
            null, // WHERE clause selection arguments (none)
            null); // Order-by clause (ascending by name)
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

**这是我的http：**

```
for (String sdPath : path) {
        Bitmap bitmapOrg = BitmapFactory.decodeFile(sdPath);
        ByteArrayOutputStream bao = new ByteArrayOutputStream();

        // Resize the image
        double width = bitmapOrg.getWidth();
        double height = bitmapOrg.getHeight();
        double ratio = 400 / width;
        int newheight = (int) (ratio * height);

        bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg, 400, newheight,
                true);

        // Here you can define .PNG as well
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
        byte[] ba = bao.toByteArray();
        String ba1 = Base64.encodeBytes(ba);

        System.out.println("uploading image now ——–" + ba1);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("image", ba1));

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://path to my server/upload.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();

            // print response
            outPut = EntityUtils.toString(entity);
            Log.i("GET RESPONSE—-", outPut);

            // is = entity.getContent();
            Log.e("log_tag ******", "good connection");

            bitmapOrg.recycle();

        } catch (Exception e) {
            Log.e("log_tag ******",
                    "Error in http connection " + e.toString());
        } 
```

**这是我的 php 代码：**

```
<?php

$base = $_REQUEST["image"];

if (isset($base)) {

$suffix = createRandomID();
$image_name = "img_".$suffix."_".date("Y-m-d-H-m-s").".jpg";

// base64 encoded utf-8 string
$binary = base64_decode($base);

// binary, utf-8 bytes

header("Content-Type: bitmap; charset=utf-8");

$file = fopen("../images/post_images/" . $image_name, "wb");

fwrite($file, $binary);

fclose($file);

die($image_name);

} else {

die("No POST");
}

function createRandomID() {

$chars = "abcdefghijkmnopqrstuvwxyz0123456789?";
//srand((double) microtime() * 1000000);

$i = 0;

$pass = "";

while ($i <= 5) {

$num = rand() % 33;

$tmp = substr($chars, $num, 1);

$pass = $pass . $tmp;

$i++;
}
return $pass;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:01:31.663

该脚本正在运行，您可以在 servar 的上传文件夹中找到该图像。

```
<?php 
 $target = "upload/"; 

 $target = $target . basename( $_FILES['uploaded']['name']) ; 
 $ok=1; 
 if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
 {
     echo "yes";
 } 
 else {
     echo "no";
 }
?> 
```

看看这个[答案](https://stackoverflow.com/questions/9305499/android-uploading-image/9306475#9306475)

# java - 从java调用javascript函数的正确方法？

> ID：12579419
> 
> 赞同：0
> 
> 时间：2012-09-25T08:54:27.367
> 
> 标签：java, javascript, gwt, facebook-javascript-sdk, libgdx

我正在尝试为 facebook 开发游戏，并且正在尝试通过 js-sdk 的“发布到时间线”功能。我的代码库是 java，使用 lib-gdx，问题是，我不知道如何调用显示“发布到时间线”提示的 js 函数。什么是正确的做法？[我已经按照这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing)的描述尝试了这个，但不起作用：

```
public static native void publishFeed(int score) /*-{
publishFeed(score);
}-*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:21:05.837

GWT 代码（通常）运行在 iframe 中，因此 JSNI 代码（ ）的（全局）范围与`window`所谓的 HTML Host Page 的范围不同。那个叫`$wnd`。

```
public static native void publishFeed(int score) /*-{
   $wnd.publishFeed(score);
}-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:04:37.047

Java中的IUnknown::QueryInterface

类对象是类层次结构的根。每个类都有 Object 作为超类。所有对象，包括数组，都实现了这个类的方法。Object::getClass() 方法返回 'Class'，它有许多有用的函数来发现 Java 类本身的细节。虽然详细解释超出了本文的范围，但我想指出 getInterfaces() 方法，它可以动态发现由 Java 类实现的接口。

我没有尝试从 JavaScript 中调用 getClass() 方法，因此无法评论它的可行性。但是使用基础设施类型的小程序，这个功能可以很容易地用于脚本代码。

检查这个链接希望你得到你想要的

[http://www.codeproject.com/Articles/571/Java-to-JavaScript-Communication](http://www.codeproject.com/Articles/571/Java-to-JavaScript-Communication)

# javascript - 在 javascript/jquery 中为 JSON 创建 hashmap

> ID：12579426
> 
> 赞同：0
> 
> 时间：2012-09-25T08:55:04.423
> 
> 标签：javascript, jquery, json, hashmap

是否可以在 javascript/jquery 中为 JSON 对象生成 hashmap？我有复杂而大的 JSON 对象。我必须遍历它以根据时间过滤数据。

从 JSON/哈希映射中获取数据的最佳和最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:02:38.117

大多数浏览器都包含一个带有[JSON.parse(JSONstring)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse "JSON.parse(JSONstring)")方法的原生 JSON 对象。jQuery 提供[$.getJSON(JSONstring)](http://api.jquery.com/jQuery.parseJSON/ "$.getJSON(JSONstring)")以在不原生提供 JSON 对象的环境中从 JSON 字符串返回对象。

从那里开始，获得有用的哈希图取决于 JSON 对象的结构。[Underscore](http://underscorejs.org/)（及其性能更高的分支[LoDash](http://lodash.com)）包含许多有用的方法（例如[filter](http://underscorejs.org/#filter)），可以帮助解析、操作和检索大型对象中的有用数据。

# xamarin.ios - 自从升级到 mono touch 6.0.0 - 我尝试在真正的 iPhone 上运行时出现以下错误 - 但在模拟器中工作正常

> ID：12579431
> 
> 赞同：3
> 
> 时间：2012-09-25T08:55:15.353
> 
> 标签：xamarin.ios

错误 MT2002：无法解析参考：System.Void MonoTouch.ObjCRuntime.Messaging::void_objc_msgSend_UInt32_IntPtr(System.IntPtr,System.IntPtr,System.UInt32,System.IntPtr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:32:25.473

当您使用第三方库时，这是 MonoTouch 6.0.0 中的一个错误。

您可以使用 MonoTouch 6.0.0 重新编译您的第三方库，或者等待 MonoTouch 6.0.1 在本周晚些时候发布。

*更新*修复已发布

# jboss - 如何在 jboss 中部署受密码保护的战争文件

> ID：12579438
> 
> 赞同：0
> 
> 时间：2012-09-25T08:55:38.127
> 
> 标签：jboss, passwords, unzip

我尝试在 jboss 4.0.5 中部署受密码保护的 war 文件，但出现如下部署错误，请帮助，我该如何解决，我需要在 jboss 服务器上做的任何事情。请指教，谢谢。

```
16:29:09,929 ERROR [Tomcat5] Problem in init
java.util.zip.ZipException: encrypted ZIP entry not supported
        at java.util.zip.ZipInputStream.readLOC(ZipInputStream.java:248)
        at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:73)
        at java.util.jar.JarInputStream.<init>(JarInputStream.java:58)
        at java.util.jar.JarInputStream.<init>(JarInputStream.java:43)
        at org.jboss.util.file.JarUtils.unjar(JarUtils.java:262)
        at org.jboss.web.AbstractWebContainer.init(AbstractWebContainer.java:325
)...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:24:42.433

`encrypted ZIP entry not supported`:)

所以，没有破解 JBoss 内部的方法是不可能的。

考虑创建自定义部署脚本，使用存储在安全位置的密码即时解密。

# php - php：“short_open_tag = On”不起作用

> ID：12579448
> 
> 赞同：20
> 
> 时间：2012-09-25T08:56:32.487
> 
> 标签：php

我最近在我的电脑上安装了 Win8。然后我用 php 5.4 安装了 wamp 2.2，我无法使短标签工作。

我已经放了：

> “short_open_tag = 开启”

进入 php.ini 文件，我确信 apache 正在加载正确的文件，因为“加载的配置文件”的路径`phpinfo()`很好。

我会很高兴有任何建议。谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-02-20T17:49:00.217

我最近从升级`PHP 5.3.18`到`PHP 5.5.9.`.

我意识到由于某种原因，`short_open_tag`它出现在我的 php.ini 文件中两次。

如果您进行了查找以找到`php.ini`文件的该部分，请尝试继续查找以查看是否存在另一个实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T09:42:44.523

设置：

```
asp_tags = On and short_open_tag = On 
```

在两个文件 \apache\Apache2.2.22\bin\php.ini 和 \bin\php\php5.4\php.ini 中，然后重新启动 apache 服务器。

如果您无权访问 php.ini，您可以尝试通过 .htaccess 文件启用它们，但如果您使用共享主机，托管公司可能会禁用此功能：

```
php_value short_open_tag 1 
```

请记住重新启动您的服务（apache2 等）以使对 php.ini 的编辑生效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-24T20:52:17.930

将 的值更改`short_open_tag`为`On`。

如果您的`php.ini`文件位于`/etc/php/5.6/fpm`您需要重新启动`php5.6-fpm`服务

```
sudo service php5.6-fpm restart 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-13T11:50:54.787

确保全部更换

```
short_open_tag 
```

在 php.ini 文件中出现。就我而言，有多个地方定义了它。对我来说，错误的设置位于

```
;;;;;;;;;;;;;;;;;;;;
; Language Options ;
;;;;;;;;;;;;;;;;;;;; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-26T08:31:01.890

`;`两个最常见的错误是更改注释部分中的值（不执行以开头的行）和更改*错误*的配置。

根据您的服务器设置，`/etc/php/VERSION/`您将在其中找到多个文件夹，例如`cli`、`mods-available`、等。`apache`例如，如果您想更改 Apache 使用的 PHP 模块的配置，您应该转到`/etc/php/VERSION/apache/php.ini`.

人们经常`cli`错误地修改文件夹中的配置，因为多个在线教程建议使用该命令`php -i | grep "Loaded Configuration File"`来查找您的`php.ini`文件，但是，该命令通常会将您引导至 cli 配置。

使用 Apache 时，您还必须运行`sudo systemctl reload apache2`（对于基于 Debian 的发行版）以启用更改。

# actionscript-3 - 在 Flash 中让一切都变成灰色

> ID：12579452
> 
> 赞同：1
> 
> 时间：2012-09-25T08:56:41.113
> 
> 标签：actionscript-3, flash

我希望我的整个游戏随着游戏的进行变得越来越灰暗。我怎样才能做到这一点？我想到的唯一解决方案是为我的游戏中的每个项目添加一个补间（补间的末尾是灰色的对象），拥有所有对象的数组，并使该数组中的所有项目在帧中缓慢前进（当然是一个糟糕的解决方案）。我也可以将我的整个游戏放在一个电影剪辑中，然后进行补间。但我不能（或不知道如何）这样做，因为我不是直接从 Flash Professional 创建游戏，而是使用引擎（Citrus Engine）。是否有某种过滤器可以改变我整个游戏的颜色？还是另一种解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:23:50.873

您可以使用 Greensock 的 TweenLite/TweenMax 和 colorMatrixFilter。

转到[http://www.greensock.com/tweenlite/](http://www.greensock.com/tweenlite/)向下滚动到插件资源管理器并使用 walues 来查看最适合您的。我想“饱和度”是您正在寻找的那个。

如果您不想使用外部库，您仍然可以使用 Flash 的 ColorMatrixFilter，尽管设置所有矩阵等可能会很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:32:32.317

正如您在`Main.as`（[https://github.com/alamboley/Citrus-Engine/blob/master/src/Main.as](https://github.com/alamboley/Citrus-Engine/blob/master/src/Main.as)）中看到的那样，主要扩展`CitrusEngine`，
当您走得更远时，您可以看到`CitrusEngine`扩展`MovieClip`（[https://github.com /alamboley/Citrus-Engine/blob/master/libs/com/citrusengine/core/CitrusEngine.as](https://github.com/alamboley/Citrus-Engine/blob/master/libs/com/citrusengine/core/CitrusEngine.as)）。

据我所知，您可以像这样对 MovieClips 应用过滤器：

```
var matrix:Array = new Array();
matrix = matrix.concat([1,0,0,0,255]);
matrix = matrix.concat([0,1,0,0,0]);
matrix = matrix.concat([0,0,1,0,0]);
matrix = matrix.concat([0,0,0,1,0]);
var colorFilter:ColorMatrixFilter = new ColorMatrixFilter(matrix);

this.filters = [colorFilter]; 
```

这样您就可以将灰度滤镜添加到 MovieClip。

Try adding this inside `Main.as`.

As I wrote before this is only a guess, but please give it a try :)

# python - 如何在 fabric 中指定有效的非零返回码？

> ID：12579454
> 
> 赞同：3
> 
> 时间：2012-09-25T08:56:41.270
> 
> 标签：python, unix, fabric

我有一个 bash 命令，它会吐出非标准的返回码来指示不同类型的成功和失败。

我想将此命令作为结构文件的一部分运行，同时将所有有效的返回代码列入白名单。

```
from fabric.api import local
local('exit 5') # This will cause an abort even though it is expected behaviour 
```

我的愿望是做类似的事情：

```
from fabric.api import local, settings
with settigns(valid_exit_codes=[0,5]):
    local('exit 5') 
```

我目前正在做一些事情：

```
with settings(warn_only=True):
    output = local('exit 5')

    if output.return_code in [0, 5]:
        return output.return_code
    else:
        abort("Non success return-code: %s" % output.return_code) 
```

寻找更简单的解决方法的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-03T12:15:56.690

由于 Fabric 1.6 有`ok_ret_codes`设置`env`：

[http://docs.fabfile.org/en/1.13/usage/env.html#ok-ret-codes](http://docs.fabfile.org/en/1.13/usage/env.html#ok-ret-codes)

所以你可以做这样的事情：

```
 with fabric.api.settings(ok_ret_codes=[0, 2]):
        fabric.api.sudo('puppet agent -t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:36:09.110

看起来需要对织物进行修补才能获得您想要的东西。这个应该可以让你到达那里：[https ://github.com/opie4624/fabric/compare/master...return-codes](https://github.com/opie4624/fabric/compare/master...return-codes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T10:17:16.073

您可以将 append 添加`; echo $?`到您的命令中，并将退出代码作为字符串文字返回。

```
assert local('(exit 5); echo $?').split()[-1] in "0 1 2 3 4 5" 
```

这样做的好处是在 warn_only 生效时不输出警告。

# java - 如何设置 log4j 属性文件？

> ID：12579468
> 
> 赞同：17
> 
> 时间：2012-09-25T08:57:16.980
> 
> 标签：java, log4j

我有一个使用 log4j 的 Eclipse Java 项目。我无法将 log4j 配置文件设置为通过文件路径访问。我必须在 jar 中导出并运行该项目。

这是我尝试的方法：

```
public class Wita {
  static Logger logger;
  public static void main(String[] args) {
    System.setProperty("log4j.configuration", new File("").getCanonicalPath()+File.separatorChar+"resources"+File.separatorChar+"log4j.xml" );
    // System.out.println( System.getProperty("log4j.configuration") );
    logger = Logger.getLogger(Wita.class.getName());
  }
} 
```

系统输出打印**C:\Users\roncsak\eclipse_workspace\WITA\resources\log4j.xml**很好。*WITA*是项目的基本文件夹。但是使用*-Dlog4j.debug*参数运行项目也会返回以下结果：

```
log4j：尝试使用上下文类加载器 sun.misc.Launcher$AppClassLoader@18e3e60 查找 [C:\Users\roncsak\eclipse_workspace\WITA\resources\log4j.xml]。
log4j：尝试使用 sun.misc.Launcher$AppClassLoader@18e3e60 类加载器查找 [C:\Users\roncsak\eclipse_workspace\WITA\resources\log4j.xml]。
log4j：尝试使用 ClassLoader.getSystemResource() 查找 [C:\Users\roncsak\eclipse_workspace\WITA\resources\log4j.xml]。
log4j：找不到资源：[C:\Users\roncsak\eclipse_workspace\WITA\resources\log4j.xml]。

```

我想随着时间的推移更改 log4j.xml，而不构建另一个 jar 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T09:09:28.880

从[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)的“默认初始化程序” ：

> *   将资源字符串变量设置为 log4j.configuration 系统属性的值。指定默认初始化文件的首选方法是通过 log4j.configuration 系统属性。如果未定义系统属性 log4j.configuration，则将字符串变量资源设置为其默认值“log4j.properties”。
> *   尝试将资源变量转换为 URL。
> *   如果资源变量无法转换为 URL，例如由于 MalformedURLException，则通过调用返回 URL 的 org.apache.log4j.helpers.Loader.getResource(resource, Logger.class) 从类路径中搜索资源. 请注意，字符串“log4j.properties”构成格式错误的 URL。有关搜索位置的列表，请参阅 Loader.getResource(java.lang.String)。

因此，您需要预先`file:`添加`log4j.configuration`属性值，以便将其视为 URL。

请参阅[https://stackoverflow.com/a/7927278/603516](https://stackoverflow.com/a/7927278/603516)。

更好的代码：

```
 System.setProperty("log4j.configuration", new File("resources", "log4j.xml").toURL()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T09:04:45.053

您可以设置 VM 参数：`-Dlog4j.configuration='path_to_log4j.xml'`

或以编程方式：

```
String logFilePath = new File(<path_to_log4j.xml>);
if (logFilePath == null || "".equalsIgnoreCase(logFilePath)) {
    URL file = this.getClass().getResource(DEFAULT_CONF);
    DOMConfigurator.configure(file);
} else {
    DOMConfigurator.configure(<default_config_file>);   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T12:51:10.933

以上所有这些答案都不令人满意，所以我在这里为将来可能需要这个的人发帖：

1.  您需要指定您的财产在哪里。通过程序或命令选项都可以。

以编程方式：

```
private static void setupLog4J(){
    try {
        System.setProperty("log4j.configuration", new File(".", File.separatorChar+"log4j.properties").toURL().toString());
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

2.  创建您自己的 log4j.properties 文件：

```
#  Logging level
# Root logger option
log4j.rootLogger=DEBUG, stdout, file

# Redirect log messages to console
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p     %c{1}:%L - %m%n

# Redirect log messages to a log file, support file rolling.
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=c:/project/resources/t-output/log4j-application.log
log4j.appender.file.MaxFileSize=5MB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

希望这可以帮助。

# javascript - 具有两个功能的 JavaScript 闭包作用域

> ID：12579472
> 
> 赞同：0
> 
> 时间：2012-09-25T08:57:32.937
> 
> 标签：javascript, function, closures

我正在努力解决 JavaScrit 函数中的闭包范围。下面的函数应该创建三个具有不同图像的样本（有效），然后当它们被单击时，应该切换样式表。

问题是同一个对象被传递给`switchTheme`函数，即使单步执行显示`theme`第一个函数中的变量确实发生了变化。

```
var switcherConfig = {
    themes: 
        {
            'Orangeness': {
                folder: 'ui-lightness'
            },
            'Red Matter': {
                folder: 'blitzer'
            },
            'Flubber': {
                folder: 'south-street'
            }
        }
}
function createThemeSwitcher(placeholderSelector) {
    for (var themeName in switcherConfig.themes) {
        var theme = switcherConfig.themes[themeName];
        var anchor = $('<a/>')
            //.text(theme.title)
            .attr('title', theme.title)
            .attr('href', '#')
            .on('click', function () { switchTheme(theme); })
            // append to DOM etc
    }
}
function switchTheme(theme) {
    var themeDirectory = switcherConfig.baseDirectory + '/' + theme.folder + '/';
    // 'theme' variable is always the last in my 'themes' config object
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:02:45.450

使用的值`switchTheme(theme)`将是调用函数时所处的状态，`theme`在您创建匿名回调时该值未绑定。使用闭包绑定该特定值：

```
.on('click', (function (t) {
    return function () { switchTheme(t); };
})(theme)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:03:18.937

移动

```
var theme = switcherConfig.themes[themeName]; 
```

点击功能

```
function createThemeSwitcher(placeholderSelector) {
    for (var themeName in switcherConfig.themes) {

        var anchor = $('<a/>')
            //.text(theme.title)
            .attr('title', theme.title)
            .attr('href', '#')
            .on('click', function () { 
                         var theme = switcherConfig.themes[themeName];
                         switchTheme(theme); 
            })
            // append to DOM etc
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:12:24.670

您可以使用`.data`如下方式而不是关闭（只是一种选择）：

```
var switcherConfig = {
    themes: 
        {
            'Orangeness': {
                title:"Orangeness",
                folder: 'ui-lightness'
            },
            'Red Matter': {
                                title:'Red Matter',
                folder: 'blitzer'
            },
            'Flubber': {
                title:'Flubber',
                folder: 'south-street'
            }
        }
}
function createThemeSwitcher(placeholderSelector) {
    for (var themeName in switcherConfig.themes) {
        var theme = switcherConfig.themes[themeName];
        var anchor = $('<a/>')
            .data("theme",theme)
            .attr('title', theme.title)
            .attr('href', '#')
            .html(theme.title)
            .on('click', function () { switchTheme($(this).data("theme")); })
            $("body").append(anchor);
    }
}
function switchTheme(theme) {
    alert(theme.title)
} 
```

[演示](http://jsfiddle.net/9ZmjD/1/)

# forms - Zend 形式的数据库中的动态标签

> ID：12579476
> 
> 赞同：1
> 
> 时间：2012-09-25T08:57:39.537
> 
> 标签：forms, zend-framework, frameworks, labels

我有一个带有一些元素的 zend 表单。我想在这个表单上有一些动态标签，这些标签应该从数据库中填充。我应该使用哪个元素？文本？例如，lats 说我有一个表单来编辑用户数据。我想要一些标签来显示诸如用户 ID、用户名等值（这些值不应该是可编辑的），以及像电话、地址等用户描述字段（这些应该是可编辑的）。请给我一些建议。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:30:11.653

```
$form = new Zend_Form ();

$rows = array (
    array (
        'type' => 'text',
        'label' => 'Phone'
    ),
    array (
        'type' => 'text',
        'label' => 'Name'
    ),
);

foreach ($rows as $row)
{
    $form->addElement ($row ['type'], $row ['label'], array (
        'label' => $row ['label']
    ));
}

echo $form->render (new Zend_View ()); 
```

# image - HTML5 - 画布 - 大图像的优化

> ID：12579478
> 
> 赞同：3
> 
> 时间：2012-09-25T08:57:42.820
> 
> 标签：image, html, optimization, canvas, large-files

我需要构建一个`HTML5` `canvas`包含非常大的图像，可能高达 10-15MB。我的第一个想法是将图像分成几个块，这些块将在水平移动通过画布时加载。

对这个想法有什么想法吗？这是一个好的吗？也许我错过了一些已经实现的优化功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:29:48.070

你是正确的，这种平铺是大多数提供大图像（如谷歌地图）的应用程序的工作方式。

不幸的是，这里没有任何其他巧妙的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:10:31.680

这*可能*是一个好主意，但这取决于您的应用程序。下载图像所需的时间可以认为是很小的，而且经常如此，但它确实是不可预测的。因此，根据您的应用程序是静态应用程序（谷歌地图）还是动态应用程序（游戏），延迟加载可能是一个好主意，也可能不是一个好主意。

如果用户*可以等待*，您可以安全地将图像拆分为不同的图块并按需加载。

如果它是一个游戏，你最好在它开始之前预加载所有东西——至少预加载一个关卡，但我不知道它是否包含关卡，我们甚至没有被告知它是否是一个游戏:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:53:35.557

如果它不是需要立即响应的东西，您也可以做的是使用服务器脚本来提取您需要的任何较大图像，因此您可以创建一个图像，而不是依赖于预先调整大小的图块，设置它的来源

'imageSliceScript.php?x=whatever&y=whatever'

然后将其绘制到画布上，或者将其保留为图像。这样一来，您只能获得当时需要的图像，而不必处理诸如视口跨边缘的多个图块之类的问题。

# sql-server - 查找最新下载的项目和下载时间

> ID：12579482
> 
> 赞同：1
> 
> 时间：2012-09-25T08:57:54.383
> 
> 标签：sql-server, tsql

我有一个 CRM 系统和一个网络下载服务。在网络下载中，客户使用客户名称进行识别。在 crm 系统中，我有`crmID`作为标识符。要将网络客户名称映射到`crmID`，我有一个映射表。由于一些客户倾向于每次都以不同的方式书写他们的客户名称，因此许多网站名称可能会链接到同一个`crmID`. 链接系统始终保持同步，没有问题。

```
crmMap( webName VACHAR(100),  
        crmID CHAR(6) )  
webDownload( webName VARCHAR(100), 
             item VARCHAR(100), 
             itemVersion VARCHAR(100), 
             downloadTime DATETIME ) 
```

我想要的是显示每个客户 ( `crmMap.crmID`) 上次下载的内容`(webDownload.item and webDownload.itemVersion)`以及下载的时间`(webDownload.downloadTime)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:23:04.830

您可以使用`row_number()`以下方法确定：

```
select m.crnId, d.item, d.itemVersion, d.downloadTime
from crmMap m
inner join
(
  select webname, item, itemVersion, downloadTime,
    row_number() over(partition by webname order by downloadTime desc) rn
  from webDownload
) d
  on m.webName = d.webName
where rn = 1 
```

甚至是子查询：

```
select m.crnId, d.item, d.itemVersion, d.maxTime
from crmMap m
inner join 
(
  select max(downloadTime) maxTime, webName, item, itemVersion
  from webDownload
  group by webName, item, itemVersion
) d
  on m.webName = d.webName 
```

编辑，如果您只想要`MAX()`下载时间，那么您将要使用：

```
select m.crnId, m.item, m.itemVersion, m.maxTime
from crmMap m
inner join 
(
  select max(downloadTime) maxTime
  from webDownload
) d
  on m.downloadTime = d.webName 
```

# eclipse - 如何让eclipse忽略特定的子文件夹

> ID：12579483
> 
> 赞同：2
> 
> 时间：2012-09-25T08:57:56.393
> 
> 标签：eclipse, unit-testing, cppunit

我对日食不熟悉。我有一个问题作为这个主题的标题。场景是我想在文件夹 src 中创建一个子文件夹“test”（用于单元测试）。但是在创建文件夹“test”后，eclipse会自动将这个“test”文件夹及其内容添加到当前项目中。这导致“main”函数的多重定义错误，因为在“test”文件夹下还有一个包含main函数的cpp文件。我想要的是把“test”文件夹放在 src 文件夹中，但是这个文件夹不属于当前项目，这意味着当我编译当前项目时，“test”下的文件不会被编译（还有另一个测试项目做这）。有人知道吗？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:12:12.823

默认情况下，Eclipse 将源文件夹下的所有内容都添加为源，但这可以在项目属性设置中进行更改。右键单击项目，选择“属性”，然后在 java 构建路径中进行更改以添加排除过滤器。

![将排除过滤器添加到源](../Images/421b9fa1e770448e08c0e4089def59f1.png)

更新：

要从项目视图中删除文件夹，请在视图菜单中设置过滤器： ![过滤视图中的文件](../Images/dd99b44e9131c08d6e33117ce0fd8eca.png)

# python - 如何使用 sed 命令注释掉 python 代码

> ID：12579489
> 
> 赞同：1
> 
> 时间：2012-09-25T08:58:10.143
> 
> 标签：python, sed, comments

**我想使用sed**命令注释掉以下代码行。

实际代码：

```
response = HttpResponse()
response['Content-Disposition'] = 'attachment; filename=%s.zip' % file_name.replace('.shp','')
response['Content-length'] = str(len(zip_stream))
response['Content-Type'] = mimetype
response.write(zip_stream)
return response 
```

我想要什么：

```
#response = HttpResponse()
#response['Content-Disposition'] = 'attachment; filename=%s.zip' % file_name.replace('.shp','')
#response['Content-length'] = str(len(zip_stream))
#response['Content-Type'] = mimetype
#response.write(zip_stream)
#return response 
```

唯一的问题是文件很大，而且`response`到处都有，所以搜索应该根据上面提供的更具体。

给定的代码块位于特定文件的整个源代码的中间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:40:37.580

我对您在这里尝试做的事情做了一些假设。我假设您想在您选择的两行之间注释代码块。这是一种使用方法`GNU sed`：

```
sed -i '/response = HttpResponse()/,/return response/s/.*/#&/' file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:43:38.753

```
perl -i -ne 'if(/response = Http/../return response/){$_="#".$_}print' your_file 
```

# c# - C# - 保护应用程序不中止

> ID：12579491
> 
> 赞同：0
> 
> 时间：2012-09-25T08:58:21.620
> 
> 标签：c#

我的应用程序每 6 秒从串行端口接收一个格式为“・99,99999,99999,99999,AAAAAA,AAAAAA”的字符串。我使用这些语句来处理字符串：

```
 stringOut=stringOut.Replace("-",",");
            string[] valor_1=stringOut.Split(',');
            int i_C_AR=Convert.ToInt32(lbl_contador.Text);

            mx_02=Convert.ToInt32(valor_1[1])-Convert.ToInt32(valor_1[2]);
            mx_07=Convert.ToInt32(valor_1[2])-Convert.ToInt32(valor_1[3]);
            mx_10=Convert.ToInt32(valor_1[3]); 
```

在大多数情况下，我们可以毫无问题地得到字符串。

有时应用程序会因为这些语句后的某些字符出现在错误的位置而中止。

```
mx_02=Convert.ToInt32(valor_1[1])-Convert.ToInt32(valor_1[2]);
mx_07=Convert.ToInt32(valor_1[2])-Convert.ToInt32(valor_1[3]);
mx_10=Convert.ToInt32(valor_1[3]); 
```

如何保护应用不中断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:00:31.610

首先，您应该弄清楚*为什么*会收到不良数据。这真的是预期的，还是它代表系统中其他地方的错误，这可能会*导致*应用程序终止而不是继续处理错误数据？

您可以使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)而不是`Convert.ToInt32`. 这将允许您检测错误而无需捕获异常（这是一种替代方法）。

`TryParse`返回一个`bool`结果，说明解析是否成功，并使用一个`out`参数来存储结果。在稍后执行算术之前，您需要引入额外的局部变量来存储解析结果。例如，您可能需要以下内容：

```
// Rename these to be meaningful - in general your variable names should be
// clearer, and ideally without the underscores
int first, second, third;
if (!int.TryParse(valor_1[1], out first) ||
    !int.TryParse(valor_1[2], out second) ||
    !int.TryParse(valor_1[3], out third))
{
    // Do whatever you need to with invalid input
}
else
{
    mx_02 = first - second;
    mx_07 = second - third;
    mx_10 = third;
} 
```

请注意，这也会减少您将要执行的解析操作的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:03:01.953

可以使用int.TryParse，或者catch异常，会更简单

```
try{
// place faulty code here
}catch(Exception ex)
{
// handle exception if you care
} 
```

# maven - netbeans 7.1.1 中的 Maven

> ID：12579496
> 
> 赞同：1
> 
> 时间：2012-09-25T08:58:36.833
> 
> 标签：maven, netbeans, netbeans-7

我正在使用 netbeas 7.1.1，我知道这个版本已经支持 Maven。无论如何，如果尝试输入终端 mvn --version，则无法识别该命令。另一方面，我可以使用 IDE 向导创建一个 Maven 项目。所以我必须下载它吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T09:54:25.453

Netbeans 使用嵌入式 Maven 安装。

打开`Tools->Options->Java->Maven`

在哪里可以看到 Maven 二进制文件。

如果您打开 Maven Home 下拉菜单，您将看到一个 Bundled 的（嵌入的）和一个其他 maven 二进制文件的列表（为您 -> 无）。

捆绑的 maven 安装的二进制文件位于：

```
<netbeans_install>/java/maven/bin/mvn 
```

例如，如果您使用 Linux，则必须在可执行位置中添加指向 maven（mvn 二进制文件）的符号链接`/usr/bin`。这样做将使操作系统在系统范围内识别 mvn 命令。或者，您可以将 `<netbeans_install>/java/maven/bin/mvn`目录添加到可执行位置列表（`$PATH`系统变量）。

如果您使用 Windows，则需要将 maven 二进制文件添加到`%PATH%`.

在这两种情况下，您可能都必须设置`JAVA_HOME`系统变量。

因此，简而言之，如果您不想下载新的 maven 二进制文件，则可以使用与 Netbeans 捆绑的那个。要在命令行中使用 Maven，您需要将 maven 二进制文件的路径添加到操作系统的 PATH 变量中。

# c# - Exe 进程仅适用于 VS2010 单元测试，不适用于 MVC 应用程序

> ID：12579500
> 
> 赞同：0
> 
> 时间：2012-09-25T08:58:48.560
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, unit-testing, process

我有一个类处理 exe 进程的执行，它是一个控制台应用程序（用 Fortran 编写！）。运行此程序时，用户必须首先输入一个输入文件的名称（必须与 exe 存在于同一位置）和一个输出文件（尚不存在，但由 exe 生成）。

在我对 Execute 方法的单元测试中（见下文），一切正常。输出文件正确生成。但是，当我从 MVC 应用程序中点击此方法时，exe 无法找到输入文件，即使它确实存在。我能想到的唯一解释是VS2010自动创建的“TestResults”文件夹在权限方面有所不同，或者单元测试过程有所不同。

```
 public void Execute(string inputFileName, string outputFileName, int timeoutMilliseconds)
    {
        if (outputFileName == null)
            throw new ArgumentNullException("outputFileName");
        else if (inputFileName == null)
            throw new ArgumentNullException("inputFileName");

        if (outputFileName == string.Empty)
            throw new ArgumentException("outputFileName must not be an empty string");
        else if (inputFileName == string.Empty)
            throw new ArgumentException("inputFileName must not be an empty string");

        if (!File.Exists(ConfigurationManager.AppSettings["dataPath"]  + inputFileName))
            throw new FileNotFoundException("File not found.", inputFileName);            

        Process p = new Process();
        p.StartInfo = GetProcessStartInfo();
        p.Start();

        string output = "";

        // Read up to line where program asks for input file name.
        while (output == "")            
            output = p.StandardOutput.ReadLine();            

        // Write the input file name.
        p.StandardInput.WriteLine(inputFileName);

        // Read up to line where program asks for output file name.
        output = "";
        while (output == "")            
            output = p.StandardOutput.ReadLine();            

        // Write the output file name.
        p.StandardInput.WriteLine(outputFileName);

        if(!p.WaitForExit(timeoutMilliseconds))
            throw new ApplicationException("The process timed out waiting for a response.");            
    }

    private ProcessStartInfo GetProcessStartInfo()
    {
        var startInfo = new ProcessStartInfo();
        startInfo.CreateNoWindow = true;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.RedirectStandardInput = true;
        startInfo.FileName = _exeFileLocation;
        startInfo.WindowStyle = ProcessWindowStyle.Hidden;            
        return startInfo;
    } 
```

编辑：

我发现如果我尝试从 C 驱动器上的某个位置运行该进程，单元测试也会失败。在下面的代码中，如果我将“dataPath”设置为硬盘位置（例如“C:\DATALOCATION”），则该过程会失败，说它无法找到输入文件。但是，如果我将配置中的“dataPath”保留为空字符串，则单元测试会自动从 TestResults 文件夹的子目录运行该过程，并且一切正常！

```
 [TestMethod]
    public void ExeRunnerTest()
    {
        var studyData = // populate study data here
        var writer = new StudyDataFileWriter(studyData);

        // Write input
        string fileName = writer.WriteToFile();

        // Run 
        var exeRunner = new ExeRunner(ConfigurationManager.AppSettings["dataPath"] + "myProcess.exe");
        exeRunner.Execute(fileName, "outputFile", 10000);

        // Read output
        IStudyOutputFileReader reader = new StudyOutputFileReader(ConfigurationManager.AppSettings["dataPath"] + "outputFile");
        StudyOutput output = reader.Read();

        // Tests
        Assert.AreEqual(1, output.ConsumerSummary.ConsumerTypes.Count());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:28:46.377

使用绝对路径使代码正常工作。工作目录一定有问题。

# java - 如何使用 Maven 完全自动化 Saucelabs 测试？

> ID：12579504
> 
> 赞同：2
> 
> 时间：2012-09-25T08:58:57.757
> 
> 标签：java, selenium, saucelabs

这是我试图自动化的工作流程（它是一个 Java 网络应用程序）：

1.  开发人员在 Selenium IDE (w/Firefox) 中创建/编辑测试套件
2.  该套件在项目存储库中作为 HTML 文件的集合进行维护
3.  在每个 Maven 构建周期中：
    1.  Jetty 容器在本地启动`http://localhost:12345`（随机端口号）
    2.  [SauceConnect](http://saucelabs.com/docs/sauce-connect)开始连接我的本地主机和 Saucelabs 网格
    3.  HTML 测试套件在网格上执行，针对我的本地容器
    4.  SauceConnect 已关闭
    5.  码头集装箱已关闭
    6.  如果测试套件中的任何测试失败 - Maven 构建失败

有可能实现这一目标吗？一个更具体的问题是如何在 Saucelabs 运行 HTML 测试套件？他们有一个非常简短的关于 的文档`http://ondemand.saucelabs.com:80/selenium-server/driver/`，我可以使用，但我没有找到任何关于它的详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T02:37:15.660

我最近[为 Maven 创建了一个 Sauce Connect 插件](https://github.com/saucelabs/sauce-java/tree/master/sauce-connect-plugin)，它提供 Mojos 来启动和停止 Sauce Connect 进程。

这将允许您使用 Cargo（可以配置为启动 Jetty）、Failsafe] 和 Sauce Connect 的组合来实例化您的容器和 Sauce Connect，运行您的测试，并在测试完成后关闭容器和 Sauce Connect , 所有这些都可以通过调用`mvn verify`.

通过将以下内容添加到您的 pom.xml 文件中，可以将 Sauce Connect Maven 插件包含在您的项目中：

```
<build>
<plugins>
    <!-- Include Sauce Connect plugin -->
    <plugin>
        <groupId>com.saucelabs.maven.plugin</groupId>
        <artifactId>sauce-connect-plugin</artifactId>
        <version>1.0.15</version>
        <configuration>
            <sauceUsername>YOUR_SAUCE_USERNAME</sauceUsername>
            <sauceAccessKey>YOUR_SAUCE_ACCESS_KEY</sauceAccessKey>
        </configuration>
        <executions>
            <!-- Start Sauce Connect prior to running the integration tests -->
            <execution>
                <id>start-sauceconnct</id>
                <phase>pre-integration-test</phase>
                <goals>
                    <goal>start-sauceconnect</goal>
                </goals>
            </execution>
            <!-- Stop the Sauce Connect process after the integration tests have finished -->
            <execution>
                <id>stop-sauceconnect</id>
                <phase>post-integration-test</phase>
                <goals>
                    <goal>stop-sauceconnect</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    ...
</plugins>
</build>
<pluginRepositories>
<pluginRepository>
   <id>saucelabs-repository</id>
   <url>http://repository-saucelabs.forge.cloudbees.com/release</url>
   <releases>
       <enabled>true</enabled>
   </releases>
   <snapshots>
       <enabled>true</enabled>
   </snapshots>
</pluginRepository>
</pluginRepositories> 
```

我还创建了一个[简单的示例项目](https://github.com/saucelabs/sauce-java/tree/master/sauce-connect-example)，它演示了 Sauce Connect 插件以及 Cargo 和 Failsafe 的用法。

该插件相当新，所以如果您有任何反馈，请告诉我！

# xml - XSLT 和 BizTalk：应用模板并将 XML 转换为特定格式的问题

> ID：12579519
> 
> 赞同：2
> 
> 时间：2012-09-25T09:00:23.760
> 
> 标签：xml, xslt, biztalk, transformation

我正在使用 BizTalk Map 构建一条消息并将外部 XSLT 应用到它。我希望转换后的 XML 具有 '<' 和 '>' 而不是 "<" 和 ">" 例如：

我的输入 XML 是：

```
 <DEALER>
      <DEALER_DETAILS>
          <ID>DL00005</ID>
          <DEALER_NAME>Dealer Name</DEALER_NAME>
          <INN_NUMBER>7736530296</INN_NUMBER>
          <KPP_NUMBER>773601001</KPP_NUMBER>
          <OKPO_NUMBER>69076838</OKPO_NUMBER>
          <SAP_CODE>SAP101</SAP_CODE>
          <UPDATE_DATE>2010-08-02</UPDATE_DATE>
      </DEALER_DETAILS>
    </DEALER> 
```

我申请的 XSLT 是：

```
 <xsl:template match="/">
        <xsl:apply-templates select="/DEALER" />
     </xsl:template>
     <xsl:template match="/DEALER">
        <Result>
            <Dealer> 
                <xsl:copy-of select="/*" />
            </Dealer>
        </Result>
     </xsl:template> 
```

输出是：

```
 <Result>
      <DEALER xmlns="http://tempuri.org/RSINT9_Output.xsd">
        <DEALER_DETAILS>
          <ID>DL00005</ID>
          <DEALER_NAME>Dealer Name Again</DEALER_NAME>
          <INN_NUMBER>7736530296</INN_NUMBER>
          <KPP_NUMBER>773601001</KPP_NUMBER>
          <OKPO_NUMBER>69076838</OKPO_NUMBER>
          <SAP_CODE>SAP101</SAP_CODE>
          <UPDATE_DATE>2010-08-02</UPDATE_DATE>
        </DEALER_DETAILS>
      </DEALER>
    </Result> 
```

但我希望输出如下：

```
 &lt;Result&gt;
      &lt;DEALER xmlns="http://tempuri.org/RSINT9_Output.xsd"&gt;
        &lt;DEALER_DETAILS&gt;
          &lt;ID&gt;DL00005&lt;/ID&gt;
          &lt;DEALER_NAME&gt;Dealer Name Again&lt;/DEALER_NAME&gt;
          &lt;INN_NUMBER&gt;7736530296&lt;/INN_NUMBER&gt;
          &lt;KPP_NUMBER&gt;773601001&lt;/KPP_NUMBER&gt;
          &lt;OKPO_NUMBER&gt;69076838&lt;/OKPO_NUMBER&gt;
          &lt;SAP_CODE&gt;SAP101&lt;/SAP_CODE&gt;
          &lt;UPDATE_DATE&gt;2010-08-02&lt;/UPDATE_DATE&gt;
        &lt;/DEALER_DETAILS&gt;
      &lt;/DEALER&gt;
    &lt;/Result&gt; 
```

请指导我。

谢谢，Mayur Jadhav

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:40:25.477

这应该可以解决问题 - 它通过将 XSLT 转换的结果捕获到变量中来工作，然后使用 C# 脚本来获取 XmlEncoded OuterXml。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:userCSharp="http://schemas.microsoft.com/BizTalk/2003/userCSharp"             
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"
                exclude-result-prefixes="userCSharp msxsl"
                >
    <xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <!--Capture the result of the XSLT Transform into a variable-->
        <xsl:variable name="xmlTree">
            <xsl:call-template name="CreateXml">
            </xsl:call-template>
        </xsl:variable>
        <!--Use a C# function to 'escape' the XML-->
        <xsl:value-of select="userCSharp:EscapeXml($xmlTree)"/>
    </xsl:template>

    <!--Do your transform here, using XSLT, Functoids, etc--> 
    <xsl:template name="CreateXml">
        <Result>
            <xsl:copy-of select="/*" />
        </Result>
    </xsl:template>

    <msxsl:script language="C#" implements-prefix="userCSharp">
    <![CDATA[
      // Escape the outer Xml
      public System.String EscapeXml(System.Xml.XPath.XPathNavigator x)
      {
        return x.OuterXml;
      } 
     ]]>
    </msxsl:script>

</xsl:stylesheet> 
```

# c - malloc 的问题

> ID：12579523
> 
> 赞同：2
> 
> 时间：2012-09-25T09:00:34.590
> 
> 标签：c, multidimensional-array, malloc

使用 为二维数组分配内存`malloc()`时，当输入大小（矩阵 N*N）大于`5`（即`N>5`）时会发生分段错误。

以下代码适用于小于 的输入（N）`5`。

你能帮我解决这个问题吗？

```
#include<stdio.h>
#include <stdlib.h>

int main(){
    int n;
    int i,j;
    int **adj;
    //reading size of a N*N matrix
    scanf("%d",&n);

    //dynamically allocating memory for a 2-dimensional array
    adj=(int**)malloc(sizeof(int)*n);
    for(i=0;i<n;i++){
        adj[i]=(int*)malloc(sizeof(int)*n);
    }

    //taking input from the file        
    for(i=0;i<n;i++){
        for(j=0;j<n;j++){
            scanf("%d",&adj[i][j]);
        }
    }

    for(i=0;i<n;i++){
        for(j=0;j<n;j++){
            printf("%d\t",adj[i][j]);
        }
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:01:39.403

这是不正确的：

```
adj=(int**)malloc(sizeof(int)*n); 
```

当你分配一个数组时`int*`，不是`int`。改成：

```
adj = malloc(sizeof(int*)*n); /* Cast unnecessary. */
/* or: adj = malloc(sizeof(*adj)*n); */ 
```

* * *

建议检查返回值`scanf()`以确保`int`正确读取：

```
if (1 == scanf("%d", &n))
{
} 
```

有用的阅读：[我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:04:07.483

```
adj=(int**)malloc(sizeof(int)*n); 
```

将此替换为

```
adj = (int**)malloc(sizeof(int*) * n); 
```

因为一般`sizeof(int*) != sizeof(int)`

另一个提示：初始化你的变量！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:18:29.690

除了 hmjd 指向的内容之外，也许它可能提供更多信息。

int p -> p 是 int 类型。

int * p -> p 是指向“int”的指针 (*p) 类型

int ** p -> p 是指针 (*p) 类型，指向“指向 int 的指针，即：(int *)”

如果是从左往右读，会更容易理解。

int ** adj -> 你需要两个指针解引用（**）才能达到值'int'。

即：“adj”指向的内存数组中的每个位置都应该保存另一块内存的地址。因此，您需要在分配“adj”时提供 sizeof(int *)。

# c# - C# 中的数学函数

> ID：12579525
> 
> 赞同：3
> 
> 时间：2012-09-25T09:00:55.107
> 
> 标签：c#, .net, matlab

我生成了一组随机值，​​我希望它们适合 Beta 分布。

是否有任何库提供计算 betafit 或 uniformfit 的函数，就像 Matlab 中可用的一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:07:39.073

试试Dew Research 的[Stats Master](http://www.dewresearch.com/index.php?option=com_content&view=article&id=156%3astats-master-statistical-add-on-package-for-mtxvec&catid=54%3aproducts&Itemid=79)。

[BetaFit](http://www.dewresearch.com/help/vsnet/statsmaster/frames.html?frmname=topic&frmfile=%21%21OVERLOADED_BetaFit_Dew_Stats_Statistics.html)
[UniformFit](http://www.dewresearch.com/help/vsnet/statsmaster/frames.html?frmname=topic&frmfile=!!OVERLOADED_UniformFit_Dew_Stats_Statistics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:08:34.673

不知道这些功能，但看起来像 dewresearch 得到了它们。以前用过他们的软件，但不是免费的（只有试用版）

[http://www.dewresearch.com/help/vsnet/statsmaster/frames.html?frmname=topic&frmfile=Dew_Stats_Statistics_BetaFit@TVec@TSample@TSample@Integer@TSample.html](http://www.dewresearch.com/help/vsnet/statsmaster/frames.html?frmname=topic&frmfile=Dew_Stats_Statistics_BetaFit@TVec@TSample@TSample@Integer@TSample.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T10:06:14.243

谢谢。我也得到了这个

[http://www.meta-numerics.net/Documentation/html/8ff81058-d821-cfa0-eccf-b0c21d66a0a3.htm](http://www.meta-numerics.net/Documentation/html/8ff81058-d821-cfa0-eccf-b0c21d66a0a3.htm)

Meta.Numerics 还包含一些可以解决我的问题的类。

每个分布中都有一个静态函数 FitToSample()。它计算分布的参数。

例如，BetaDistribution.FitToSample() 计算输入数据的 alpha 和 beta 值。

但是如何检查数据是否真的符合 beta 分布呢？

如果你们中的任何人使用过这个，请告诉我如何验证输入数据是否符合分布（例如：指数，beta）。

# xcode - 仅当用户名为 XXX 时，如何在 Xcode 中自动增加构建版本？

> ID：12579530
> 
> 赞同：0
> 
> 时间：2012-09-25T09:01:20.440
> 
> 标签：xcode, bash, shell

仅当用户名为 XXX 时，如何在 Xcode 中自动增加构建版本？

我试过：

```
 #!/bin/bash
    if [$USER == "XXX"];then
    buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
     buildNumber=$(($buildNumber + 1))
    /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"
   fi 
```

但没有成功..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:24:35.083

我找到了：

```
#!/bin/bash
if [ $ALTERNATE_OWNER == "XXX" ]; then
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"
fi 
```

# php - 使用应用模板在 XSLT 输出中保留和其他特殊字符

> ID：12579537
> 
> 赞同：4
> 
> 时间：2012-09-25T09:01:45.617
> 
> 标签：php, html, xml, xslt, special-characters

我正在使用 XSLT`&nbsp;`从 XML 文件中提取一些带有特殊字符（如 ）的 HTML 内容。内容存储在`<content>`节点中。我已经定义了像这样的大多数特殊字符：`<!ENTITY nbsp "&#160;">`，所以这个表达式工作得很好：

```
<xsl:copy-of select="content" disable-output-escaping="yes"/> 
```

现在，我想添加`target="_blank"` *到该内容中找到的每个链接。*这是我想出的解决方案：

```
<xsl:template match="a" mode="html">
    <a>
        <xsl:attribute name="href"><xsl:value-of select="@*"/></xsl:attribute>
        <xsl:attribute name="target">_blank</xsl:attribute>
        <xsl:apply-templates select="text()|* "/>
    </a>
</xsl:template> 
```

而不是“复制”元素，我使用这个：

```
<xsl:apply-templates select="content" mode="html"/> 
```

现在所有这些特殊字符（以及 nbsp 也是）从输出中消失了。我该如何保留它们？似乎`disable-output-escaping="yes"`在这里没有帮助。

好的，我在 PHP 中使用 XSLTProcessor 类。该`disable-output-escaping`属性实际上并没有给出错误，但是当我删除它时，输出是相同的，所有nbsp的，所以没关系。

* * *

UPD。使用我之前展示的 XSL 模板，我的输入示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page SYSTEM "html-entities.xsl">
<content>There is a&nbsp;non-breaking <a href="http://localhost">space</a> inside.</content> 
```

html-entities.xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ENTITY nbsp "&#160;"> 
```

PHP代码：

```
$xp = new XSLTProcessor();
$xsl = new DOMDocument();
$xsl->load($xsl_filename);
$xp->importStylesheet($xsl);
$xml_doc = new DOMDocument();
$xml_doc->resolveExternals = true;
$xml_doc->load($xml_filename);
$html = $xp->transformToXML($xml_doc); 
```

我当前的输出：

`There is anon-breaking <a href="http://localhost" target="_blank">space</a> inside.`

我想要的输出：

`There is a&nbsp;non-breaking <a href="http://localhost" target="_blank">space</a> inside.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:04:30.340

基本上，输入 XML 文档的源代码是否具有类似字符引用`&#160;`或类似实体引用`&nbsp;`或这样的字符对于 XSLT 而言并不重要，并且不会影响输入的处理方式和输出的外观；基本上，XSLT 在一个树上运行，Unicode 字符存储在文本节点中。至少理论上是这样，您的 PHP 代码似乎可以与 DOM 树模型一起使用，该模型可能存储实体引用节点，但即便如此，对于 XSLT 来说也无关紧要。在输入树中应该有包含 Unicode 字符的文本节点（如果可能是 Unicode 160 的不间断空格字符），如果将这样的文本复制到输出，则结果树有一个文本节点具有相同的 Unicode 字符.

对于输出方法，`html`一些 XSLT 处理器（例如 Saxon 6.5.5）可能会帮助您确保在 HTML 中定义为实体的字符使用相应的实体引用进行序列化，但即使它们不这样做，结果树的序列化应该是具有正确 Unicode 字符的文件，按照元素`encoding`属性的指示进行编码。`xsl:output`

您当前完全放弃角色（例如`There is anon-breaking`）的结果对我来说没有意义。

# c++ - 我是否需要在返回容器副本的函数上添加锁？

> ID：12579538
> 
> 赞同：3
> 
> 时间：2012-09-25T09:01:45.740
> 
> 标签：c++, multithreading

```
class Manager {
public:

    list<Employee> getEmployees() {
        // Do I need to lock here?
        return emps_;
    }
    void addEmp(Employee emp); //Here I have lock
private:
    list<Employee> emps_;
}; 
```

实例`Manager`在多个线程之间共享。我需要给`getEmployees`成员函数加锁吗？

我很确定我需要一个锁，因为完整的列表被复制了，所以在此期间进行的任何修改（直到复制完成）都可能破坏复制操作。

我只是问这个，因为我几乎没有意见认为没有必要锁定。

**编辑**：

既然现在很清楚需要 lock ，我的问题是如何以最小的开销做到这一点。通过执行以下解决方案，您可以复制列表两次。：

```
list<Employee> getEmployees() {
    pthread_mutex_lock( &mutex1 );
    list<Emp> tmp  = emps_; //Copy 1 
    pthread_mutex_unlock( &mutex1 );
    return tmp;//Copy 2
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T09:06:59.353

整个列表被复制，但副本的来源可能正在修改中。stdlib 容器支持完全并发的未锁定读取访问。另一方面写...

如果您要在可能制作副本时写入此列表，则需要将其锁定。顺便说一句，SWMR（单写多读）锁非常适合这个，特别是如果你有几十个甚至几百个线程需要复制，只需要偶尔写入。即便如此，编写器请求的饥饿是一个真正的问题，需要通过锁定类的实现来解决，但不适用于您的问题范围（不是双关语）。

关于您的更新，我非常喜欢适当的范围释放锁，在您的情况下也是如此。即，围绕您的互斥锁的范围对象包装器在进入时将其锁定，并在范围退出时将其解锁。

我很确定 boost:: 家伙有这样的东西很容易获得，而且 C++11 也可能（由于工作日程，我还没有冒险；没有停机时间啊）。但是你想要这样的东西：

```
list<Employee> getEmployees() 
{
    scope_lock latch(&mtx);
    return emps_;
} 
```

以上`scope_lock`只是一个简单的类，它在构造时锁定互斥锁，并在销毁时解锁它。这可以防止在复制构造中抛出的异常不会永久挂起您的互斥锁的非常真实的可能性。将其视为利用自动销毁来解锁互斥锁。[为胜利](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)而战。

我希望这是有道理的。对于像这样的小家伙来说，这样的事情是理想的。同样，包括 boost 在内的许多工具包可能都内置了这样的东西，如果有任何 boost 家伙读到了这篇文章，请牛仔并提供指点。上面的示例与您所能获得的理想范围锁一样微不足道。

最后，对于 SWMR，逻辑完全相同。唯一的区别是锁会附加一个参数来判断你是在请求读还是写访问。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-25T09:05:10.447

在您的情况下，我会说不需要锁，至少不需要您向我们展示的代码。原因是整个列表都被*复制*了，所以每个调用该函数的线程都会得到它自己的私有列表副本。

# web-applications - 如何使用 selenium 对 Web 应用程序进行可扩展性测试

> ID：12579540
> 
> 赞同：0
> 
> 时间：2012-09-25T09:01:51.633
> 
> 标签：web-applications, selenium, scalability, load-testing, performance-testing

我是否需要一些第三方工具（例如负载运行程序）来对 Web 应用程序进行可伸缩性测试，或者我可以使用 selenium 为我做这件事吗？请指导。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:56:58.637

***负载测试****- 在重负载下测试应用程序，例如在一系列负载下测试网站以确定系统的响应时间在什么时候降低或失败。 **可扩展性测试**- 可扩展性测试与负载测试的不同之处在于，它关注您的网站、硬件和软件产品以及内部应用程序在从最小负载到最大负载的所有阶段的性能。*

考虑到上面的定义，我们看到可扩展性测试是性能测试的一个子类型。但是 selenium 实际上并不是专门为性能测试而设计的。selenium 的基本思想是**Selenium 使浏览器自动化。** 一些额外的信息可以从[这里](https://stackoverflow.com/questions/7981200/use-selenium-grid-to-run-performance-testing)获取 主要是针对 Web 应用程序功能/验收测试。

# ios - 如何在 PC 上以编程方式访问 ios 文件系统？

> ID：12579541
> 
> 赞同：0
> 
> 时间：2012-09-25T09:01:52.340
> 
> 标签：ios, file, system

我想知道如何在PC上访问ios文件系统。这似乎很复杂，因为我找不到任何有用的信息。但据我所知，是可以实现的。我尝试了一些文件系统管理软件，例如 iExplorer、iFile 和 DiskAid。有没有专家可以给我一些建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:15:53.987

这是一篇可能有帮助的文章，[从 Windows 访问 HFS+ 分区](http://www.macbreaker.com/2012/02/access-mac-os-x-partition-from-windows.html%20Accessing%20OSX%20partitions%20from%20Windows)，请注意，如果您有 Mac 并且在启动到 Windows 时安装了 Boot Camp（使用 Apple 的 Boot Camp 实用程序），您还可以访问 Mac 的硬盘驱动器。

# flash - 从文本文件加载数据的访问规则

> ID：12579544
> 
> 赞同：0
> 
> 时间：2012-09-25T09:02:01.483
> 
> 标签：flash, .htaccess, mod-rewrite

我的朋友对从外部 .txt 文件加载文本数据的 Flash 电影进行编程，他说数据不会加载到他托管的电影中。此文件放置在 swf 文件附近。本地化它工作正常。

我将文件上传到我的主机（带有电影[http://mysite.com/index.php](http://mysite.com/index.php)的页面 URL和电影 url [http://mysite.com/img/movie.swf](http://mysite.com/img/movie.swf)）并且在我的情况下也没有加载数据。

我在网络检查器中看到了这一点。是的，电影无法加载文本文件

似乎 Apache 阻止了对 txt 文件的访问，我必须在 .htaccess 中添加一些字符串。

你能解释一下我该如何解决这个问题吗？

BR

# google-app-engine - 对超过 30 个项目使用 GAE 的 GQL IN 过滤器？

> ID：12579546
> 
> 赞同：1
> 
> 时间：2012-09-25T09:02:07.617
> 
> 标签：google-app-engine, gql

过滤器`IN`限制为 30 个项目。是否有可能超越该限制？或者是否有可行/推荐的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:07:46.903

无法覆盖该限制。这就是为什么。

当您对 进行`IN`查询时`where x in [n1, n2, n3]`，实际发生的是 3 个单独的查询被提交到数据存储区：

```
where x = n1
where x = n2
where x = n3 
```

然后将生成的键列表合并在一起，删除重复项，为您提供最终结果。

由于`in`列表中的每个项目都会创建一个单独的实际数据存储区查询，并且每个 GQL 查询限制为 30 个实际数据存储区查询，因此列表中的项目数限制为 30 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:23:01.583

如上所述，您只能在一个查询中获得 30 个项目，因为该查询是在 30 个并行的不同查询中解释的。一种解决方法是发出 30 个项目的串行请求，如下例所示

```
offset = 0
item_count = len(keys)
result = []
while offset < item_count:
   data = Entity.all().filter('key IN', keys[offset:30])
   result.extend(data)
   offset += 30 
return result 
```

# android - 使 Facebook 单点登录 (SSO) 适用于 Android 浏览器的某种方法？

> ID：12579555
> 
> 赞同：0
> 
> 时间：2012-09-25T09:02:58.440
> 
> 标签：android, facebook, single-sign-on

据我所知，只有在设备上安装了 Facebook 应用程序时，Facebook 单点登录才有效。但是是否有办法让它识别 Android 浏览器会话以达到相同的结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:28:43.413

为此，我认为我们的应用程序需要访问浏览器 cookie，并且它需要知道 facebook 在浏览器中的浏览会话期间设置的 cookie 键值对（access_token，如果有的话）。我不确定这是否真的可能，但我想这是一种可能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:58:19.447

这似乎是不可能的，因为即使是 Facebook 应用程序也不与其网站共享会话。

# c# - linq orderby，从特定数字开始，然后返回到最低

> ID：12579559
> 
> 赞同：20
> 
> 时间：2012-09-25T09:03:08.970
> 
> 标签：c#, linq

我有一组数据，我想从一个特定的数字开始重新排序，然后，当达到最高数字时，回到最低数字，然后继续递增。

例如，对于序列 (1,2,3,4,5,6)，如果 4 是特定数字，则顺序将变为 (4,5,6,1,2,3)。

linq & c# 有可能吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T09:09:14.907

```
List<int> list = new List<int>() { 1, 2, 3, 4, 5, 6 };
int num = 4;
var newList = list.SkipWhile(x=>x!=num)
                    .Concat(list.TakeWhile(x=>x!=num))
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-25T09:15:05.530

```
int specific = 4;
var numbers = Enumerable.Range(1, 9);

var result = numbers.OrderBy(n => Tuple.Create(n < speficic, n)).ToList(); 
```

我在这里使用了一个小技巧，`Tuple<bool, int>`用作比较器，因为`false < true`. 另一种选择是：

```
var result = numbers.OrderBy(n => n < speficic).ThenBy(n => n).ToList(); 
```

**在基准测试后**编辑**`.OrderBy .ThenBy`我发现第二个解决方案比解决方案快得多`Tuple`。我相信这是因为 FCL`Comparer<T>.Default`用作比较器，这需要花费时间来构建。**

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T09:33:43.413

`OrderBy()`它本身就非常强大，为了扩大它的范围`ThenBy()`，在我看来，更简洁的方法如下：

```
var list = new[] {1, 2, 3, 4, 5, 6};
var pivot = 4;
var order = list.OrderBy(x => x == pivot ? 0 : 1).ThenBy(y => y < pivot ? 1: 0); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T09:14:09.630

您可以实现自定义[IComparer](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)。

类似于以下内容（注意代码未经测试！）：

```
List<int> list = new List<int>() { 1, 2, 3, 4, 5, 6 };
list.OrderBy(n => n, new IntComparer(4));

public class IntComparer : IComparer<int>
{

    int start; 

    public IntComparer (int start)
    {
        this.start = start;
    }

    // Compares by Height, Length, and Width. 
    public int Compare(int x, int y)
    {
        if (x >= start && y < start)
            // X is greater than Y
            return 1;
        else if (x < start && y >= start)
            // Y is greater than X
            return -1;
        else if (x == y)
            return 0;
        else 
            return x > y ? 1 : -1;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T09:16:31.447

```
 List<int> list = new List<int>() { 1, 2, 3, 4, 5, 6 };
 item = 4;

 var index = input.IndexOf(item);
 var firstList = input.Take(index);

 return input.Except(firstList)
             .Concat(firstList)
             .ToList(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-25T09:25:22.890

对于一般情况，以下是*任何*类`IComparer`都应遵循的习惯。

 *```
public class StartWithComparer<T> : IComparer<T>
{
    private T startWith;
    private IComparer<T> baseComparer = Comparer<T>.Default;
    public StartWithComparer(T startWith, IComparer<T> baseComparer = null)
    {
        this.startWith = startWith;
        if (baseComparer != null) this.baseComparer = baseComparer;
    }

    public int Compare(T x, T y)
    {
        int xToS = baseComparer.Compare(x, startWith);
        int yToS = baseComparer.Compare(y, startWith);

        if (xToS >= 0 && yToS < 0)
            return -1;
        else if (xToS < 0 && yToS >= 0)
            return 1;
        else
            return baseComparer.Compare(x, y);
    }
} 
```

调用者

```
new[] { 1, 2, 3, 4, 5, 6 }.OrderBy(i => i, new StartWithComparer<int>(4)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-25T09:08:53.037

您可以使用（或滥用，我承认）一个简单的减法来完成此操作：

```
var seq = Enumerable.Range(0, 10);
int n = 4;
int m = seq.Max() + 1; // or a magic number like 1000, thanks RB.

var ordered = seq.OrderBy(x => x >= n ? x - m : x);

foreach(int i in ordered)
    Console.WriteLine(i); 
```

此外，如果数字变大，请注意*整数溢出*。对于简单的情况，它可能没问题。

这是一个更好的解决方案（受其他答案的启发）：

```
var seq = Enumerable.Range(0, 10);
int n = 4;

var ordered = seq.Where(x => x >= n).OrderBy(x => x)
    .Concat(seq.Where(x => x < n).OrderBy(x => x));

foreach(int i in ordered)
    Console.WriteLine(i); 
```

它对每个序列进行排序。在连接它们之前。T_12 在评论中询问它们是否按升序排序。如果是这样，请使用[LB 的解决方案](https://stackoverflow.com/a/12579669/17713)而不是我的解决方案，因为这`OrderBy`至少会打击努力`O(n log n)`而不是`O(n)`（线性）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-25T09:09:38.807

```
 List<int> list = new List<int>()
        {
            1,2,3,4,5,6
        };
        int number = 4;
        int max = list.Max();
        var result = list.OrderBy(i => i >= number ? i : max + i); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-25T09:14:23.063

我将在这里提出一个异端解决方案，因为它根本不使用标准的 LINQ 运算符：

```
IEnumerable<int> GetSequence(IList<int> input, int index) {
 for (var i = index; i < input.Count; i++) yield return input[i];
 for (var i = 0; i < index; i++) yield return input[i];
} 
```

我认为这很清楚地表明了意图。

我不认为您必须使用标准 LINQ 查询运算符（Skip、Take、Concat 的组合）执行的奇怪扭曲是可读或可维护的。我认为在这种情况下仅仅为了它而使用它们是一种滥用。循环很好。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-25T16:53:27.097

将序列转换为从给定项目开始的扩展方法。这也只会通过原始序列一次，这可能很重要，也可能不重要。这也假设序列已经按照您想要的方式排序，除了移位。

```
public static IEnumerable<T> Shift<T>(this IEnumerable<T> subject, T shouldBeFirst)
{
    return subject.Shift(shouldBeFirst, EqualityComparer<T>.Default);
}
public static IEnumerable<T> Shift<T>(this IEnumerable<T> subject, T shouldBeFirst, IEqualityComparer<T> comparer)
{
    var found = false;
    var queue = new Queue<T>();
    foreach (var item in subject)
    {
        if(!found)
            found = comparer.Equals(item, shouldBeFirst);

        if(found)
            yield return item;
        else
            queue.Enqueue(item);
    }
    while(queue.Count > 0)
        yield return queue.Dequeue();
} 
```

**用法**

```
var list = new List<int>() { 1, 2, 3, 4, 5, 6 };
foreach (var i in list.Shift(4))
    Console.WriteLine(i); 
```

**印刷**

```
4
5
6
1
2
3 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-25T09:17:11.303

如果您的数据是`List<T>`这样的：

```
var sequence = new[] { 1, 2, 3, 4, 5, 6 }.ToList();
List<int> result;
int start = 4;
int index = sequence.IndexOf(start);
if (index == 0)
    result = sequence;
else if (index > -1)
{
    result = sequence.GetRange(index, sequence.Count - index);
    var secondPart = sequence.GetRange(0, sequence.Count - index);
    result.AddRange(secondPart);
} 
```

这不是真正的排序，而是创建一个新列表。***

# scala - Scala：在参数通配符上调用方法/访问值

> ID：12579560
> 
> 赞同：1
> 
> 时间：2012-09-25T09:03:10.873
> 
> 标签：scala, wildcard

如何调用参数通配符的方法或访问参数通配符的值？例如，在这个例子中，我想找到所有 F 对象的最大“rev”值。

```
scala> case class F(rev:Long)
defined class F

scala> List(F(1),F(2),F(3))
res3: List[F] = List(F(1), F(2), F(3))

scala> res3.foldLeft(0L){math.max(_,_.rev)}
<console>:11: error: wrong number of parameters; expected = 2
              res3.foldLeft(0L){math.max(_,_.rev)}
                                    ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:31:18.930

您不能在此处使用通配符，并且需要为参数命名：

```
res3.foldLeft(0L){(x,y) => math.max(x,y.rev)} 
```

请注意，如果您有一个`foo`采用 1 个参数而不是`math.max`:的函数与和不是`foo(_.rev)`相同，那将是相同的。`foo(x => x.rev)``x => foo(x.rev)`

问题是通配符的范围。`math.max(_,_.rev)`扩展到（我认为）`x => math.max(x, y => y.rev)`。由于此函数只有一个参数，因此您会收到此错误。

# java - 如何对同一类型的 Checkstyle 问题应用多个快速修复？

> ID：12579561
> 
> 赞同：11
> 
> 时间：2012-09-25T09:03:11.137
> 
> 标签：java, eclipse, refactoring, checkstyle

Eclipse Checkstyle 插件提供了两种自动更正问题的方法：

1.  右键单击单个源文件并选择“应用检查样式更正”。

2.  右键单击问题标记并选择“快速修复”。

如果我选择多个*相同类型*的标记并尝试快速修复所有标记，Eclipse 会指出：

> **所选问题没有通用的适用快速修复程序。**

有没有办法让我以更有效的方式执行相同类型的多个 Checkstyle 更正？

（*参见相关问题：[如何轻松修复 Checkstyle 错误？](https://stackoverflow.com/questions/8409074/how-can-i-easily-fix-checkstyle-errors)*）

* * *

举个例子，考虑下面的代码：

```
/**
 * Example to demonstrate check-style quick fix.
 */
public final class CheckStyle {

  /**
   * Example constructor with no if braces.
   *
   * @param arg an argument
   */
  public CheckStyle(final String arg) {
    if (arg == null)
      throw new RuntimeException("Arg is null.");

    if (arg.isEmpty())
      throw new RuntimeException("Arg is empty.");
  }
} 
```

当对照 Sun 的 checkstyle 配置进行检查时，会发现三个错误：

![检查样式错误](../Images/ea7a41badb8580b573008853e84b2376.png)

如果我选择与丢失大括号相关的两个错误并尝试快速修复它们，它将不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:31:41.190

这里只是一个猜测，但我认为答案是向 cs-eclipse 插件团队提交错误/功能请求。Eclipse 给您的消息似乎表明这是一种特殊情况，需要由开发人员处理。

如果您确实提交了票证，请告诉我们。我想看。我认为这将是一个有用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:33:03.220

**从 5.6.1 版**开始，这个功能现在在 eclipse-cs 中可用。我刚刚用 5.7.0（最新版本）对此进行了测试，并确认它可以工作。

作为参考，[原始错误报告](http://sourceforge.net/p/eclipse-cs/feature-requests/97/)在这里。该功能未出现在[该版本的发行说明](http://eclipse-cs.sourceforge.net/releasenotes/5.6.1/release_notes.html)中，但这是由于遗漏（请参阅错误报告中的评论）。

# c++ - 当命名空间、类名和命名空间::类名发生冲突时，C++ 会做什么

> ID：12579572
> 
> 赞同：1
> 
> 时间：2012-09-25T09:04:00.167
> 
> 标签：c++, namespaces

我继承了一些名字不好的代码，幸运的是，我收到了一个第三方库，这让我的生活变得更加复杂。这就是我最终的结果。

```
class Something; // third party library

namespace Something {
  class Something;
  class Templated<class TemplateClass>;
} 
```

现在我需要使用第三方库中的类“Something”作为命名空间Something下的新类的TemplateClass参数。我认为这应该工作

```
class Something; // third party library

namespace Something {
  class Something;
  class Templated<class TemplateClass>;

  class Impl : public Templated< ::Something > {}
} 
```

但是编译器不喜欢它。我编译它的唯一方法是

```
class Something; // third party library

class Something2 : public Something {} // dirty hack

namespace Something {
  class Something;
  class Templated<class TemplateClass>;

  class Impl : public Templated< Something2 > {}
} 
```

但我真的不喜欢它。**必须**有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:05:51.200

您可以使用另一个命名空间：

```
class Something; // third party library

namespace third_party{
  using ::Something;
}

namespace Something {
  class Something;
  class Templated<class TemplateClass>;

  class Impl : public Templated< ::third_party::Something > {}
} 
```

不过，总的来说，我认为将您的类和命名空间命名为完全相同是一个非常糟糕的主意。

# version-control - CVS 我在错误的地方添加了一个文件？我应该删除它吗？

> ID：12579573
> 
> 赞同：1
> 
> 时间：2012-09-25T09:04:00.947
> 
> 标签：version-control, cvs

我同时在两个 CVS 分支上工作。现在我在 branch_1 而不是 branch_2 中添加了一个文件。如何“撤消”`cvs add`操作。实际上，它是否会更改存储库中的某些内容，或者仅更改本地`CVS`目录中的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:15:50.943

您可以使用该`cvs remove`命令。

我认为如果你**还没有提交**，你的添加/删除甚至不会出现在回购历史中，否则你会看到它，但文件将不再存在。

如果您**还没有 commit**， a`cvs update -C`也应该这样做，因为该`cvs add`命令将文件标记为要添加，但它们实际上是在下一次提交时添加的。

# javascript - 如何禁用客户端单击链接按钮或图像按钮

> ID：12579577
> 
> 赞同：0
> 
> 时间：2012-09-25T09:04:09.933
> 
> 标签：javascript, jquery, asp.net, css

我有一个图像按钮和链接按钮，它们有客户端点击事件。我想使用 jquery 或 javascript 函数禁用客户端单击这些按钮 查找按钮并附加

```
$("#linkBtn").disable() 
```

对他们来说是禁用服务器点击而不是客户端点击。请帮忙。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:14:50.053

`preventDefault`您可以通过简单地调用事件或通过来防止点击事件`return false`；

```
$("#linkBtn").click(function(e){

   e.preventDefault();
   return false;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:28:37.080

您好，有两种可能：

1.）您希望客户端单击静态禁用：

对于这种情况，您可以使用

```
 <a href="http://www.google.com" onclick="return false;">Open the Glossary</a>.
 <img onclick = "return false;" alt="test" src="1.jpg"/> 
```

或者

2.) 你在运行时想要这个：

```
 <script type="text/javascript" language="javascript">
    function test() {
        //your logic
        return false;
    }
</script>
 <a href="http://www.google.com" onclick="return test();">Open the Glossary</a>.
 <img onclick = "return test();" alt="test" src="1.jpg"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:06:02.787

禁用客户端

```
 YourControl.Attributes.Add("onclick", "this.disabled= 'disabled' "); 
```

你也可以使用

```
OnClientClick = "return false"; 
```

# java - 无法使用 TFTPClient 发送文件（Apache Commons Net 库）

> ID：12579580
> 
> 赞同：0
> 
> 时间：2012-09-25T09:04:15.630
> 
> 标签：java, apache-commons, aix, tftp

我正在尝试使用 Apache Commons Net 创建 TFTPClient 以将文件放在服务器（AIX OS）上，并且 TFTP 服务正在该服务器上运行，运行以下代码时没有引发任何异常，似乎一切正常，但是文件没有放在服务器上。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.SocketException;
import java.net.UnknownHostException;
import org.apache.commons.net.tftp.TFTP;
import org.apache.commons.net.tftp.TFTPClient;

public class Test {

/**
 * @param args
 * @throws IOException 
 * @throws SocketException 
 */

public static void main(String[] args) throws SocketException, IOException {
    int timeout=5000;
    String host="192.168.1.20";
    int port=22;

    TFTPClient tftpClient=new TFTPClient();

    tftpClient.setDefaultTimeout(60000);
    tftpClient.open(69);

    tftpClient.setSoTimeout(timeout);
    System.out.println("DONE");
    FileInputStream input = null;
    File file;

    file = new File("D:\\project.ear");
    input = new FileInputStream(file);
    try{
    tftpClient.sendFile("/home/dev/project.ear", TFTP.BINARY_MODE, input, host);

    }
    catch (UnknownHostException e)
    {
        System.err.println("Error: could not resolve hostname.");
        System.err.println(e.getMessage());
        System.exit(1);
    }
    System.out.println("DONE2");
    tftpClient.close();
}
} 
```

上述代码的输出是：

```
DONE
DONE2 
```

这意味着一切正常，但我没有在代码中指定的目录中找到该文件。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T12:43:50.783

如果您仍然需要帮助，我认为您应该尝试以这种方式调用 tftpClient.sendFile 方法：

```
tftpClient.sendFile("/home/dev/project.ear", TFTP.BINARY_MODE, input, InetAddress.getByName(host)); 
```

在使用**InetAddress.getByName(host)**时，它应该通过 ip 字符串表示或主机名来确定您的主机 IP 地址，如此[处所述](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)。希望它以这种方式工作。

# css - 只有三个元素中的一个元素对齐是正确的

> ID：12579581
> 
> 赞同：0
> 
> 时间：2012-09-25T09:04:20.180
> 
> 标签：css, alignment, imagemap

这是代码：

```
 <style type="text/css">
    body { background: #0c2660; padding: 0px; margin: 0 auto; width: 550; align: center;}
    .logo {text-align: center; margin: 90px 0;  position: relative;}
    .mapper {margin: 0; position: relative;}
    #back { background: #0c2660 url('back.jpg') no-repeat; margin: 0px; width: 1024; height: 768px; text-align: center;}
</style> 
```

以及有图像映射的html

```
<div id="back">
<div class="logo"><img src="logo.png" width="331" height="74" border="0" alt="" /></div>
<div class="mapper"><img src="greece.png" width="550" height="500" border="0" usemap="#map" class="mapper iborder00aa00 icolor00ff00" alt="" />
<map name="map"></map>
</div>
</div> 
```

只有徽标图像按应有的方式在中心对齐，无论我更改什么，背景图像和greece.png都向左对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:16:52.600

您可以从中删除宽度`<div id="back">`以使其居中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:18:38.343

```
body { 
   background: #0c2660; 
   padding: 0px; 
   margin: 0 auto; 
   width: 1024px;
} 
.logo { 
   text-align: center; 
   margin: 90px 0; 
   position: relative; 
}
#mapperi { 
   margin-left: 240px; 
   position: relative; 
   align: middle;
}
#back { 
   background: #0c2660 url('back.jpg') no-repeat; 
   margin: 0px; 
   height: 768px; 
   text-align: center;
} 
```

是最终的解决方案:)

# android - 如何在android中检查空的edittext

> ID：12579585
> 
> 赞同：1
> 
> 时间：2012-09-25T09:04:32.677
> 
> 标签：android

我的代码不打印空编辑文本 itry trim Stirng .length==00 但在我的代码中没有工作帽错误？我的代码如何在 sumbit 查询之前检查edittext是否为空

如果edittext为空，我想在提交方法之前检查？如果为空，则打印 toast 消息

```
public class AgAppTransPayExternalAccount  extends Activity {

TextView lblTPEAWelcomeToPayExternalAccountPage;
TextView lblTPEAOtherAccount;
TextView lblTPEAPinno;
TextView lblTPEAAmount;

EditText txtTPEAotheraccount;

EditText txtTPEApinno;

EditText txtTPEAamount;

Button btnTPEAsubmit;
Button clearTPEAButton;
Button btnTPEAgoback;
String sms;
public  static ProgressDialog PayExternalAccountProgressDialog = null;
public  static  boolean value=true;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.agapptranspayexternalaccount);
    sms=LoginScreen.item.toString();

    /*

    lblTPEAWelcomeToPayExternalAccountPage = (TextView)  
  findViewById(R.id.lblTPEAWelcomeToPayExternalAccountPage);
    lblTPEAWelcomeToPayExternalAccountPage.setText("Welcome To Pay External  
 Account Page");

   lblTPEAWelcomeToPayExternalAccountPage.setTextColor(getResources().getColor
   (R.color.text_color_black));
    */

    lblTPEAOtherAccount = (TextView) findViewById(R.id.lblTPEAOtherAccount);
    lblTPEAOtherAccount.setText("Other Account :");

    txtTPEAotheraccount=(EditText) findViewById(R.id.txtTPEAotheraccount);

    lblTPEAPinno = (TextView) findViewById(R.id.lblTPEAPinno);
    lblTPEAPinno.setText("PIN Number :");

    txtTPEApinno=(EditText) findViewById(R.id.txtTPEApinno);

    lblTPEAAmount = (TextView) findViewById(R.id.lblTPEAAmount);
    lblTPEAAmount.setText("Amount :");

    txtTPEAamount=(EditText) findViewById(R.id.txtTPEAamount);

    btnTPEAsubmit=(Button) findViewById(R.id.btnTPEAsubmit);

  btnTPEAsubmit.setTextColor(getResources().getColor(R.color.text_color_blue));

    clearTPEAButton=(Button) findViewById(R.id.clearTPEAButton);

  clearTPEAButton.setTextColor(getResources().getColor(R.color.text_color_blue));

    btnTPEAgoback=(Button) findViewById(R.id.btnTPEAgoback);

  btnTPEAgoback.setTextColor(getResources().getColor(R.color.text_color_blue));

    clearTPEAButton.setOnClickListener(new OnClickListener()
    {
    public void onClick(View v)

    {
        txtTPEAotheraccount.setText("");
        txtTPEApinno.setText("");
        txtTPEAamount.setText("");

            }
      });

  btnTPEAgoback.setOnClickListener(new OnClickListener()
    {
    public void onClick(View v)

    {
        finish();

             }
       });
  btnTPEAsubmit.setOnClickListener(new OnClickListener()
    {
    public void onClick(View v)

    {
        String tpeapinemptycheck = txtTPEApinno.getText().toString();
        String otheraccountemptycheck =  
                    lblTPEAOtherAccount.getText().toString();
        String amountemptycheck = txtTPEAamount.getText().toString();

         if  (tpeapinemptycheck.trim().equals("")|| 
  (otheraccountemptycheck.trim().equals("")) ||(amountemptycheck.trim().equals("")))
         {
         Toast.makeText(getApplicationContext(), "Please Enter   
   Correct Information", Toast.LENGTH_LONG).show();
                  } 

         else
                    showProgress();
                submitPEA();

    }
    });

     }

private void submitPEA() {
     String message;
        String mobilenumber= LoginScreen.smsmobileno;

         if (( sms.compareTo("SMS")==0))
         {
     SmsManager smsmanager = SmsManager.getDefault();

message="AGPEA"+AgAppHelperMethods.varMobileNo+AgAppHelperMethods.

  arMobileNo+txtTPEAotheraccount.getText().toString()+AgAppHelperMethods.
 varMobileNo+txtTPEApinno.getText().toString()+txtTPEAamount.getText().toString();
     smsmanager.sendTextMessage(mobilenumber, null, message, null, null);
         }
 else
    { 

         Intent j = new Intent(AgAppTransPayExternalAccount.this, AgAppTransPEAResponse.class);

        Bundle bundle = new Bundle();
         bundle.putString("txtTPEApinno", txtTPEApinno.getText().toString());

     bundle.putString("txtTPEAotheraccount",txtTPEAotheraccount.getText().toString());
         bundle.putString("txtTPEAamount",txtTPEAamount.getText().toString());
         j.putExtras(bundle);

        startActivity(j);
        value=false;
        PayExternalAccountProgressDialog.dismiss();

 }

  }
private void showProgress()
{    

    PayExternalAccountProgressDialog = 
ProgressDialog.show(AgAppTransPayExternalAccount.this,null, "Processing please 
    wait...", true);    
    if (PayExternalAccountProgressDialog != null) {
        try
        {
        Handler handler = new Handler();
        handler.postDelayed(new Runnable()
        {
        @Override
        public void run()
        {
            PayExternalAccountProgressDialog.dismiss();
            if(value)
            {
            Toast.makeText(AgAppTransPayExternalAccount.this, "Request 
      TimeOut " , Toast.LENGTH_SHORT).show();
            }
        }
        }, 15000); // <--- here is the time adjustment.
        }
        catch (Exception e)
        {
        }
        }
}
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:08:50.130

你的代码是对的，只有在 else 条件下缺少这个是`{ }`大括号，尝试如下，

```
if  (tpeapinemptycheck.trim().equals("")|| 
        (otheraccountemptycheck.trim().equals("")) ||(amountemptycheck.trim().equals("")))
{

    Toast.makeText(getApplicationContext(), "Please Enter   
            Correct Information", Toast.LENGTH_LONG).show();

} 

else
{ // add this
     showProgress();
     submitPEA();
} // add this 
```

仅仅因为您没有添加那些`{ }`大括号，您的控件就进入了`submitPEA()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:09:15.813

像这样试试

```
edit_text.getText().toString().trim().equals(""); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T09:13:52.120

创建一个字符串变量say x; 现在，如果 et 是您的 EditText 字段，请使用：

x = et.getText().toString();

如果 EditText 字段中有任何文本，它将被传递给字符串 x。现在检查字符串 x 是否不为空或不包含任何内容

```
if(x.matches(""))
{
//your code here
}
else
{
//the counter action you'll take
} 
```

通过这种方式，您可以检查您即将在数据库中输入的条目是否为空。快乐编码。

# java - XML 中 Spring 的 autowire 属性是否覆盖了 bean 的 @Autowired 属性是如何自动装配的？

> ID：12579594
> 
> 赞同：1
> 
> 时间：2012-09-25T09:05:05.463
> 
> 标签：java, spring, spring-annotations

似乎并非如此。我曾经认为 XML 配置旨在覆盖注释。但是当我在 XML 配置中设置 autowire="no" 时，bean 的 @Autowired 注解属性仍然生效。我不再确定 XML autowire 是否与 @Autowired 有任何关系。在我看来，这很违反直觉。

有人可以指点我一份说明这一点的文档吗？

这是我的例子：

```
<bean class="com.example.Tester"></bean>
<bean class="com.example.ClassToTest" autowire="no"></bean>

public class Tester
{
    @Autowired
    ClassToTest testSubject;
}

public class ClassToTest
{
    @Autowired // I want this not to get autowired without removing this annotation
    private OtherDependency;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:24:00.043

autowire="no" 意味着我们必须使用基于 XML 的配置或`@Autowire` 默认设置来显式连接我们的依赖项。通过 xml 配置或注释自动装配意味着使用给定策略隐式映射依赖关系。有关更多详细信息，请参阅[此处](http://springindepth.com/book/in-depth-ioc-autowiring.html)

# ruby-on-rails - 创建指向不同子域 URL 的 Facebook 页面

> ID：12579596
> 
> 赞同：1
> 
> 时间：2012-09-25T09:05:08.513
> 
> 标签：ruby-on-rails, facebook-graph-api

我的 Ruby on Rails 应用程序为每个用户的公共页面都有一个子域 URL。例如。用户名.xyz.com

我想在 Rails 的用户 Facebook 页面上发布这个 URL。

到目前为止，我已经创建了一个 Facebook 应用程序并设置了它的页面选项卡和 URL。

我正在使用 fbgraph gem 在 facebook 页面上设置这个应用程序。（此页面将由用户创建，并具有此页面的管理员访问权限。）

我使用了这段代码：

```
user = FbGraph::User.me("USER_TOKEN")
account = user.accounts.select {|account| account if account.name == "PageName"}.first 
page = FbGraph::Page.new(account.identifier).fetch(:access_token =>"Access_token",:fields => :access_token)
tab = page.tab!(:app_id => "APP_ID_I_CREATED") 
```

使用此代码，每个用户的页面都指向 APP 的 Page Tab URL 中定义的 URL。

我希望每个用户的页面都指向他们自己的子域 URL（例如：user1.xyz.com）

我需要做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:22:51.113

子域不由 Web 服务器处理，它由 DNS 处理。因此，首先您需要让 DNS 将 everyuser.xyz.com 路由到您的 Web 服务器所在的 IP 地址。

DNS 的工作方式，您可能必须为每个用户创建一个 DNS 条目。创建用户时，您可能能够找到用于添加 DNS 子域的 API。

不要问我如何做到这一点，因为我不知道，也没有兴趣研究它。

您还必须让 Web 应用程序接受请求，@lightyrs 对如何执行此操作有很好的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:33:50.877

您可以执行以下操作：

编辑：使所有这些 user.mywebsite.com 子域解析到相同的 URL。在那个网址：

1.  创建一个包罗万象的路由，它将处理来自 的所有流量`*.facebook.com`。
2.  将该路由指向解码的控制器操作`params[:signed_request]`。
3.  解码后的签名请求将产生负责该请求的页面的 facebook id。
4.  在您的系统中获取作为相关页面管理员的用户。
5.  获取用户的子域。
6.  重定向到子域。

目前，这是解决此问题的最常用方法，但是，我希望将来能看到 facebook 的解决方案，它允许我们拥有某种基于页面、用户和推荐上下文的动态标签 URL。

# javascript - 如何在 JavaScript 中将 ARGB 转换为 HEX？

> ID：12579598
> 
> 赞同：6
> 
> 时间：2012-09-25T09:05:12.210
> 
> 标签：javascript, colors, hex, argb

我想将 ARGB 颜色转换为与 CSS 兼容的十六进制

例如：

`-1`应转换为`#FFFFFF`

或者

`-16777216`到`#000000`

我怎样才能在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T09:24:14.940

这将丢弃任何 alpha 分量

```
function argbToRGB(color) {
    return '#'+ ('000000' + (color & 0xFFFFFF).toString(16)).slice(-6);
} 
```

您的颜色是 32 位有符号的，完整的 alpha (0xFF) 使数字变为负数。此代码甚至适用于无符号数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:19:42.927

我假设你想要这样的东西：

```
function convertToColorString (argb){ 
   return '#'+ ('000000' + (argb+16777216).toString(16)).slice(-6); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:42:55.227

您可能想检查这个问题：[如何将整数转换为 javascript 颜色？](https://stackoverflow.com/questions/11866781/how-do-i-convert-an-integer-to-a-javascript-color)

我对这个问题的回答大致是建议，如果你想使用一个库而不是自己编码，[**pusher.color Javascript 库**](http://surfacecurve.org/libraries/color)支持整数到 HTML 颜色转换：

```
// Will set c to "#695083"
var c = pusher.color('packed_argb', -9875325).hex6(); 
```

如果您想尝试上述方法，这里是一个[**JSFiddle 。**](http://jsfiddle.net/bcronin/7LP8B/18/)

另外，让我添加我编写上述库的免责声明。

# iphone - 通用 iPhone/iPad 应用程序

> ID：12579601
> 
> 赞同：0
> 
> 时间：2012-09-25T09:05:30.133
> 
> 标签：iphone, ios, xcode, ipad, ios-universal-app

我知道，如何检测是 iPhone 还是 iPad

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

我知道构建通用应用程序的两种方法：

1) 一个控制器用于 2 个 xibs (iPhone/iPad)

2) 为 iPad 和 iPhone 使用不同的视图控制器

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:09:15.283

iPhone 和 iPad 的相同视图控制器，但`UIUserInterfaceIdiom`用作开关盒以避免创建重复的视图控制器（具有相同的内容）。

不过，您可以为 iPhone 和 iPad 使用不同的 XIB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:13:38.493

我认为使用不同的 XIB 更好，因为使用不同的视图控制器意味着您必须维护两个几乎相同的代码。在 XIB 上，您可以清楚地看到使用适用于 iPhone 或 iPad 的 XIB 可以获得什么。

# javascript - 如何在javascript中选择元素？

> ID：12579603
> 
> 赞同：0
> 
> 时间：2012-09-25T09:05:30.700
> 
> 标签：javascript

dom如下：

```
<li class="category51">
<a class="drop" href="#">Data</a>
<div class="dropdown_2column align_left ">
<div class="col_1">
<ul>
<li class="level1">
<a href="#">
<span class="level1">Solutions1</span>
</a>
</li>
<li class="level1">
<a href="#">
<span class="level1">Solutions</span>
</a>
</li>
</ul>
</div>
</div>
</li> 
```

我想得到 `Solutions1 and Solutions`一个标签。我该怎么办？我使用：

```
var link = document.getElementsByClassName("category51").document.getElementsByTagName(ul).document.getElementsByTagName(li).document.getElementsByTagName(a). 
```

我想要达到的目标：

我想通过 javascript.so 禁用链接，所以我必须将事件绑定到标签，现在，我不知道如何找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:31:33.727

你可以使用`Document.querySelecorAll`.

```
var eles = document.querySelectorAll('li.level1 a'),
    i;

for (i = 0; i < eles.length, i++) {
  eles[i].onclick = function() {
    //...
  };
} 
```

# java - 为什么我得到这个正则表达式的解析异常？

> ID：12579606
> 
> 赞同：1
> 
> 时间：2012-09-25T09:05:41.117
> 
> 标签：java, regex

我在 Web 服务构造函数中有以下模式：

```
rUsername = Pattern.compile("[A-z0-9]{4,30}");
rPassword = Pattern.compile("[A-z0-9!@#$%&*()=+-\\\\s]{6,30}");
rQuestion = Pattern.compile("[A-z0-9\\\\s?]{5,140}");
rAnswer = Pattern.compile("[A-z0-9\\\\s]{1,30}"); 
```

如果我在部署 Web 应用程序时只有 2 个斜杠而不是 4 个斜杠，我会从 Tomcat 获得解析异常。

用户名 1 工作正常，但我似乎在密码、问题和答案方面遇到问题。密码将匹配“testasdas”但不匹配“test1234”，问题将不匹配任何带有空格的内容，并且答案似乎不匹配任何内容。

我希望密码能够匹配小写和大写字母、数字、空格和我输入的符号。问题一应该能够匹配小写和大写、数字、空格和'？'，而答案只是大写和小写字母、空格和数字。

编辑：模式已更改为：

```
rPassword = Pattern.compile("[A-Za-z0-9!@#$%&*()=+\\s-]{6,30}");
rQuestion = Pattern.compile("[A-Za-z0-9\\s?]{5,140}");
rAnswer = Pattern.compile("[A-z0-9\\s]{1,30}"); 
```

这些或多或少是我想要的，但正如答案中指出的那样，我对密码字段的限制非常严格，这可能不是一个好主意。在保存之前我不会散列任何东西，因为这是一个没人会使用的大学项目，我知道这在现实世界中是个坏主意，但这不是项目要求的一部分。然而，我必须停止 SQL 注入攻击，这就是为什么一切都如此严格的原因。这个想法主要是禁止使用`'`我知道的每个 SQL 攻击都需要工作，但我不知道如何仅禁止该字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:11:51.380

让我们看看你的第二个正则表达式：

```
[A-z0-9!@#$%&*()=+-\\\\s] 
```

这里有几个错误。

*   `[A-z]`是不正确的，你需要，`[A-Za-z]`因为之间有一些 ASCII 字符`Z`，`a`你可能不想匹配。但这不是你的错误的问题。

更成问题的是这部分：

```
+-\\\\s 
```

从 Java 字符串转换为实际的正则表达式，这变成

```
+-\\s 
```

这意味着（在字符类中）“匹配 and 之间的任何字符`+`，`\`或任何空格”。`[+-\\]`是一个有效范围（ASCII 43-92），但这不是你想要的。

但是，如果您现在删除两个额外的反斜杠，您的字符类将变为

```
+-\s 
```

这*是*`+`一个语法错误，因为和“任何空白”之间没有 ASCII 范围。

**解决方案：**使用

```
[A-Za-z0-9!@#$%&*()=+\\s-] 
```

或者首先不要对用户可以在密码中选择的字符施加限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:11:00.677

要匹配大写和小写字母，您需要提供模式：-`[a-zA-Z]`

尝试将您的模式更改为： - `[a-zA-Z0-9\\s]{1,30}`为您的答案..

对于你的问题，不带空格，你可以使用`\\S`- 我认为它应该工作的非空格字符 `[a-zA-Z0-9\\S]{1,250}` 。你可以对剩余的 2 进行相应的更改。

*编辑： - 您也可以使用`\\p{Z}`匹配任何空白字符..

有关使用 Java 正则表达式的好教程，请参阅[此链接。](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

# javascript - 只接受带有 2 个十进制 Javascript 的输入数字

> ID：12579607
> 
> 赞同：0
> 
> 时间：2012-09-25T09:05:45.017
> 
> 标签：javascript, asp.net, javascript-framework

我想让用户控制以获得这样的数字：

```
125.00
125
125.27
125.20
1231545.25
2566.66 
```

我尝试过使用掩码文本框，但它的长度可以是任何东西。我使用了带有 Javascript 的文本框，它接受这样的数字： [单击此处](http://www.cambiaresearch.com/articles/39/how-can-i-use-javascript-to-allow-only-numbers-to-be-entered-in-a-textbox)

如果有可用的 Javascript 插件，请告诉我，或任何接受价格格式值的代码。

限制用户在输入时仅插入数字和两个小数空格。

如果数字格式不正确，则在文本更改后剪切并格式化数字。

就像如果 125.2 然后 125.20 或如果 125 然后 125.00 或 135156。然后 135156

我在互联网上搜索过，但没有找到插件或脚本。

我有一个像 numeric.js 这样的插件，但它不限制小数位。

如果有任何 Javascript 可用，请发布。

我不想进行验证以检查输入的值；我想接受有限制的值。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:57:43.287

您可以使用**[Ajax Control Toolkit MaskedEdit](http://www.asp.net/ajaxlibrary/act_MaskedEdit.ashx)**控件：

**MaskedEdit**是一个**ASP.NET AJAX 扩展器，它附加到 TextBox 控件以限制可以输入的文本类型。**MaskedEdit 将“掩码”应用于仅允许输入某些类型的字符/文本的输入。支持的数据格式有：数字、日期、时间和日期时间。MaskedEdit 使用 CultureName 属性中指定的区域性设置。如果没有指定，文化设置将与页面相同：英语（美国）。

示例代码：

```
<ajaxToolkit:MaskedEditExtender  
    TargetControlID="TextBox2"   
    Mask="9,999,999.99"  
    MessageValidatorTip="true"   
    OnFocusCssClass="MaskedEditFocus"   
    OnInvalidCssClass="MaskedEditError"  
    MaskType="Number"   
    InputDirection="RightToLeft"   
    AcceptNegative="Left"   
    DisplayMoney="Left"  
ErrorTooltipEnabled="True"/> 
```

[见工作演示](http://www.ajaxcontroltoolkit.com/MaskedEdit/MaskedEdit.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:15:35.207

我也有同样的问题。这段代码解决了我的问题。这个解决方案正是你想要的。它不仅可以格式化你的十进制数，还可以消除空格。试试这个。在我的情况下，我允许用户输入“+”或“-”，所以我也检查了这个验证。

```
<script type="text/javascript">
        function checkforvalidation() {
            var txtvalue = document.getElementById('<%=txtspherical.ClientID %>').value;
            var leftstr = "";
            var rightstr = "";
            var tempstr = "";
            var operator = "";
            txtvalue = txtvalue.replace(/\s/g, '');
            document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
            if (txtvalue.indexOf(".") != -1) {

                leftstr = txtvalue.split(".")[0];
                rightstr = txtvalue.split(".")[1];
                if (leftstr.indexOf("-") == 0 || leftstr.indexOf("+") == 0) {

                    operator = leftstr.substr(0, 1);
                    tempstr = leftstr.substr(1, leftstr.length - 1);

                    leftstr = ltrim(tempstr, '0');

                    if (leftstr.length == 0) {
                        leftstr = '0';
                    }

                    if (rightstr.indexOf("-") == -1 || rightstr.indexOf("+") == -1) {

                        rightstr = ltrim(rightstr, '0');

                        rightstr = chkdecimalpoints(rightstr);
                        if (operator != null || operator != "") {
                            txtvalue = operator + leftstr + "." + rightstr;
                        }
                        else {
                            txtvalue = leftstr + "." + rightstr;
                        }
                        document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                    }
                    else {
                        document.getElementById('<%=txtspherical.ClientID %>').value = "";
                    }
                }
                else {

                    tempstr = leftstr.substr(0, leftstr.length);
                    leftstr = ltrim(tempstr, '0');
                    if (leftstr.length == 0) {
                        leftstr = '0';
                    }
                    if (rightstr.indexOf("-") == -1 || rightstr.indexOf("+") == -1) {

                        rightstr = rtrim(rightstr, '0');
                        rightstr = chkdecimalpoints(rightstr);
                        txtvalue = leftstr + "." + rightstr;
                        document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                    }
                }
            }
            else if (txtvalue.indexOf("-") == -1 || txtvalue.indexOf("+") == -1) {

                txtvalue = ltrim(txtvalue, '0');
                if (txtvalue.length == 0) {
                    txtvalue = '0';
                }
                if (operator != null || operator != "") {
                    txtvalue = operator + txtvalue + ".00";
                }
                // txtvalue = leftstr + "." + rightstr;
                document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
            }
            else if (txtvalue.indexOf("-") == 0 || txtvalue.indexOf("+") == 0) {

                operator = txtvalue.substr(0, 1);
                tempstr = txtvalue.substr(1, leftstr.length - 1);
                txtvalue = alltrim(tempstr, '0');
                if (operator != null || operator != "") {
                    txtvalue = operator + txtvalue + ".00";
                    document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                }
            }
        }

        function chkdecimalpoints(rightstr) {
            if (rightstr.length == 0) {
                rightstr = '00';

                return rightstr;

            }
            else if (rightstr.length == 1) {
                rightstr = rightstr + '0';
                return rightstr;
            }
            else if (rightstr.length > 2) {

                var tempvar = rightstr.substr(2, 1);

                if (tempvar >= 5) {

                    tempvar = parseInt(rightstr.substr(1, 1)) + 1;
                    tempvar = rightstr.substr(0, 1) + tempvar.toString();
                    if (tempvar.length > 2) {
                        tempvar = tempvar.substr(0, 2);
                    }
                    return tempvar;
                }
                else {

                    tempvar = rightstr.substr(0, 2);
                    return tempvar;
                }
            }
            else {
                return rightstr;
            }
        }
        function ltrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("^[" + chars + "]+", "g"), "");
        }
        function rtrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("[" + chars + "]+$", "g"), "");
        }
        function alltrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("^[" + chars + "]+$", "g"), "");
        }

    </script> 
```

HTML 源代码：

```
<asp:TextBox ID="txtspherical" runat="server" OnBlur="javascript:checkforvalidation();">
        </asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:15:19.720

```
function validNumber(input){
    input=input.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");
    if( input.match(/\d+\.*\d*/i) ){
        input=input.match(/(\d+\.*\d*)/i)[1].replace(/\.$/i, "");
        if(!input.match(/\./i)) input+=".00";
        if(input.match(/\.(\d+)/i)[1].length<2) input+="0";
        return input;
    }else{
        return "0.00";
    }
} 
```

# meteor - 监控meteorjs活动的反应连接

> ID：12579608
> 
> 赞同：2
> 
> 时间：2012-09-25T09:05:50.430
> 
> 标签：meteor

我们的流星服务器有问题。当我们使用 Meteor.publish/Meteor.subscribe 发布大约 300 个项目时，服务器会增加其内存并最终变得无响应。我们想到了：1）监控一个活跃订阅所占用的反应订阅数量/内存2）做类似的事情，一次发布” - 忽略服务器端集合的变化

关于如何完成上述任何一项的任何想法？或任何其他调试/提高流星应用程序性能的技巧？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:49:19.680

zorlak 的回答很好。

其他一些事情：

您可以通过 API 编写自己的自定义发布者`this.set`，基于`_publishCursor`. 你会做这样的事情：

```
Meteor.publish("oneTimeQuery", function () {
  MyCollection.find().forEach(function (doc) {
    sub.added("collectionName", doc._id, doc);
  });
  sub.ready();
}); 
```

这会进行查询，将其结果向下发送，然后不再更新。

也就是说，我们希望 Meteor 的表现是这样的，这是不必要的！

我还想添加一种简单的方法来从应用程序获取统计信息（如观察到的光标数）到 Meteor（作为经过身份验证的订阅公开），但还没有时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:37:17.737

从 Meteor 0.5.1 开始，您可以做的一件事是从发布函数中删除对 userId 的依赖。如果发布函数不依赖于订阅的用户，那么 Meteor 将缓存 db 查询，这样它就不会随着更多用户订阅而变慢。

请参阅这篇 Meteor 博客文章： http: [//meteor.com/blog/2012/11/20/meteor-051-database-scaling](http://meteor.com/blog/2012/11/20/meteor-051-database-scaling)

# java - 从 HTTP GET 请求参数生成搜索 SQL

> ID：12579611
> 
> 赞同：6
> 
> 时间：2012-09-25T09:05:55.463
> 
> 标签：java, sql, hibernate, rest, hql

我们有一个带有提供 REST 资源的休眠后端的 Java Web 应用程序。现在我们面临的任务是实现由 get 请求中的查询参数控制的通用搜索：

```
some/rest/resource?name_like=foo&created_on>=2012-09-12&sort_by_asc=something 
```

或类似的。

*   我们不想预定义所有可能的参数（名称、created_on、something）
*   我们不想分析请求字符串来获取控制字符（如 >=）
*   我们也不想实现我们自己的语法来反映诸如 _eq _like _goe 之类的东西（作为控制字符的替代或补充）

是否有某种**框架**可以提供**从 GET 请求参数到数据库查询的映射的**帮助？

因为我们知道我们正在获取哪个 REST 资源，所以我们有实体/表（选择）。可能还需要预定义将执行的 JOIN 以限制搜索的深度。

**但除此之外，我们希望使用 REST 的客户端能够执行任何搜索，而无需我们预先定义某个参数和某个控制序列将如何转换为搜索。**

* * *

现在我正在尝试在 Mysemas QueryDSL 上构建一些半自动解决方案。它允许我预定义 where 列和排序列，并且我正在进行简单的字符串比较以检测参数中的“_like”、“_loe”等内容，然后激活搜索的相应预定义部分。与 SQL 字符串没有太大区别，只是它是 SQL 注入证明和类型保存。

但是，我仍然必须告诉我的搜索对象，它应该能够潜在地处理一个查询“寻找一个名字像'???'的人”。现在这没问题，因为我们只在内部使用 REST 资源并很好地隔离了实际的搜索创建。如果我们需要做更多的搜索，我们现在可以添加更多的预定义。但是我们是否应该在未来的某个时间公开我们的 REST 资源，那将不会那么好。

* * *

所以我们想知道，必须有一些框架或最佳实践或推荐的解决方案来解决这个问题。我们不是第一个想要这个的人。例如，Redmine 通过 REST 接口提供其所有资源，我可以随意查询。或者 facebook 及其 Graph API。我敢肯定，这些人不仅预先定义了所有可能性，而且还创建了一些通用语法。我们希望尽可能多地节省这项工作，并改用可用的解决方案。

就像我说的那样，我们使用的是 Hibernate，因此 SQL 或 HQL 解决方案或任何构建在 QueryDsl 等实体上的解决方案都可以。（还有关于 SQL 注入的安全问题）

有什么建议么？想法？我们只需要自己做这一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:08:07.067

从 .NET 的角度来看，我能想到的最接近的东西是 WCF 数据服务。

查看OData 网站上指定[的 uri-conventions 。](http://www.odata.org/documentation/uri-conventions)关于[4.5 Filter System Query Option](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption)部分有一些很好的信息。您会注意到此站点上的许多示例都与 .NET 相关，但还有[其他](https://stackoverflow.com/questions/2403359/how-do-i-interact-with-odata-from-java) [建议](http://code.google.com/p/odata4j/)可以让这些示例与 Java 一起使用。

# java - JAVA中动态类加载的性能成本

> ID：12579615
> 
> 赞同：1
> 
> 时间：2012-09-25T09:06:11.843
> 
> 标签：java, tomcat, dynamic-class-loaders

我使用定制版本的 Tomcat 开发应用程序。支持动态类加载，我在测试和开发环境中使用了很多，我也很好奇在生产环境中使用它的影响。

据我所知，由于性能问题，动态类加载不会在生产中使用，因为类加载器会在每次访问时轮询类。

但是，此应用服务器支持配置轮询频率以加载新类。

如果我理解正确，如果我将动态类加载配置为每隔相当长的时间（即 1 小时）轮询一次，我应该避免最不利的性能影响。

在生产中，这种机制的使用方式有限：
1) 无需用户停机的紧急补丁（修复将在第一次关闭时发布）
2) 对我们没有来源的类的永久补丁（遗留第三方库）

这是一个可靠的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:48:15.133

IMHO you should not use the feature for production.
Apart from the polling overhead there may be lot of other scenario which would not cause problems in a dev environment

Few things that come to my mind are

1.  Impact on any constants that are inlined during compiletime
2.  Impact on perm space
3.  You lose track of the version you have deployed in production
4.  there can be mistakes like missing a classfile during the patch

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:22:41.237

如果不知道您拥有什么“定制的 Tomcat 版本”，显然很难判断您是否理解正确。但是，是的，如果它按照锡上所说的那样做，您将避免大多数不利影响。

仍然对于紧急修补等，当您可以使用 Tomcat 管理器应用程序时，为什么要等待一个小时才能重新加载类，如下所述？

如果您想将此功能用于紧急补丁或通用补丁，我强烈建议您使用 Tomcat Manager Application 在需要时触发重新加载：

> 可重新加载
> 
> 如果您希望 Catalina 监视 /WEB-INF/classes/ 和 /WEB-INF/lib 中的类的更改，请设置为 true，并在检测到更改时自动重新加载 Web 应用程序。此功能在应用程序开发期间非常有用，但它需要大量运行时开销，因此不建议在已部署的生产应用程序中使用。这就是该属性的默认设置为 false 的原因。但是，您可以使用 Manager Web 应用程序来按需触发重新加载已部署的应用程序。

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

# vim - vim 命令将键映射到映射键的命令

> ID：12579616
> 
> 赞同：2
> 
> 时间：2012-09-25T09:06:14.030
> 
> 标签：vim

背景：我一直在使用此映射`map ,r :! bundle exec ruby %<CR>`来轻松运行我当前正在编辑的测试文件。但是我也这样做：

```
map ,t :! bundle exec ruby test/integration/some_integration_test.rb<CR> 
```

这样我就可以*在处理其他文件时*用两个键击运行这个特定的集成测试。它具有硬编码路径，当我移动到应用程序的某个其他区域时，我在上面的命令中键入另一个集成测试文件路径。

如何制作自动创建此类映射的命令？

`map ,T :map ,t :! bundle exec ruby %<CR>`将不起作用，因为它在创建映射时不会扩展 %，因此 ,t 将始终运行当前文件（而我希望它运行我在创建映射时正在编辑的文件）。

[编辑]：从答案稍微调整解决方案：

```
nnoremap ,r :! bundle exec ruby %<CR>
nnoremap ,T :let g:testfile = expand('%:p')
nnoremap ,t :! bundle exec ruby <C-r><C-r>=g:testfile<CR><CR> 
```

*   `,r`总是在光标下运行文件
*   `,T`将当前文件路径保存在变量中以供以后运行
*   `,t`运行之前存储的文件路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:31:39.823

只需将当前文件名（最好使用完整的绝对路径以免受对当前目录的更改；`:p`修饰符会这样做）在变量中，然后插入变量而不是`%`via `<C-r>`：

```
:noremap ,r :let g:testfile = expand('%:p')<Bar>! bundle exec ruby %<CR>
:noremap ,t :! bundle exec ruby <C-r><C-r>=g:testfile<CR><CR> 
```

^(PS：我使用`:noremap`，因为这通常更安全，应该是首选，除非你真的需要重新映射。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:34:05.940

```
execute ":nnoremap ,t :! bundle exec ruby ".shellescape(expand('%:p'))."<CR>" 
```

创建一个`,t`映射，该映射将在执行时对当前文件执行您的测试。

但每次你这样做，你都会失去前一个`,t`。我不确定这就是你想要做的。

# c++ - 在鼠标光标平面上绘图或创建自定义动画系统光标？

> ID：12579617
> 
> 赞同：3
> 
> 时间：2012-09-25T09:06:17.320
> 
> 标签：c++, windows, winapi, mouse

平台：Windows 7 语言：C++

你好，

我正在尝试为可访问性应用程序创建视觉辅助。我的目标是在鼠标光标周围绘制更多信息。它应该在每个应用程序窗口中都可用，如果可能的话，也可以在全屏应用程序中使用。

到目前为止我发现的可能性并不令人满意： - 绘制整个桌面的设备上下文 - 始终位于顶部的分层窗口

是否有可能在与鼠标光标相同的图层上绘图？是否有特殊的内存或设备上下文，可以在其中写入与默认鼠标光标相同的内存。

我可以在其他应用程序中使用自定义动画布局覆盖默认鼠标光标吗？我可以有一个带有动画内容的系统范围的鼠标光标布局吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:13:24.127

您需要使用 DirectX 获取桌面背景表面的句柄，然后使用 GetCursorPos GDI 函数获取鼠标坐标，将信息渲染到您获得的表面句柄中，循环执行此操作，它应该可以工作.

# facebook - Facebook 主页帐户：但应用程序没有注册？

> ID：12579619
> 
> 赞同：0
> 
> 时间：2012-09-25T09:06:30.257
> 
> 标签：facebook, account

我在 Facebook 网站上“创建了一个页面”，创建了一个帐户。然后，开发者页面的开发者注册认证。但是当我尝试注册移动应用程序时，它会继续失败。

当我单击“https://www.facebook.com/developers/createapp.php”时，我会转到我的 Facebook 页面帐户：但为什么应用程序没有注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:10:12.097

您必须使用个人 Facebook 帐户来创建应用程序。您不能使用“页面帐户”。

这样一来，Facebook 就能够将“不良”应用程序追踪回真实（经过验证的）用户。

# php - 正则表达式两边都有感叹号 ('!\d!')

> ID：12579620
> 
> 赞同：16
> 
> 时间：2012-09-25T09:06:41.973
> 
> 标签：php, regex

我已经`'!\d!'`在 PHP`preg_match`函数中看到了正则表达式。这是什么鬼？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T09:08:38.740

来自[PHP PCRE 文档](http://php.net/manual/en/regexp.reference.delimiters.php)：

> 使用 PCRE 函数时，需要用分隔符将模式括起来。定界符可以是任何非字母数字、非反斜杠、非空白字符。

在这种情况下，它只是`!`用作分隔符。如果您想在正则表达式本身中使用普通分隔符而不必对其进行转义，通常会使用它。在这种情况下并不是真正必要的，因为正则表达式的其余部分是简单的`\d`，但它在检查路径是否包含三个以上目录级别等事情时会派上用场。您可以使用以下任何一种：

```
/\/.*\/.*\/.*\/ blah blah blah / 
```

或者：

```
!/.*/.*/.*/ blah blah blah ! 
```

现在它们还没有经过彻底的测试，并且可能无法完全像宣传的那样工作，但是您应该了解所需的最小转义的一般概念。

另一个示例（来自上面链接的页面）是检查字符串是否以`http://`标记开头。这两个之一：

```
/^http:\/\//
!^http://! 
```

就足够了，但第二个更容易理解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T09:09:17.167

`!`用作分隔符，`\d`匹配单个数字。

它与`/[0-9]/`

# android - andengine 以特定的角度用力扔球

> ID：12579630
> 
> 赞同：1
> 
> 时间：2012-09-25T09:07:10.870
> 
> 标签：android, andengine, angle, throw

在 AndEngine 游戏中，我想扔一个球物理体。用户设置它的角度和力量并抛出它。它的场景和我们在愤怒的小鸟中看到的一样。我已经计算了力和角度，但我很困惑如何同时将两者应用在球上，这意味着球应该以计算出的角度投掷但具有特定的力量。任何人都可以引导我走向正确的方向吗？

这是我的代码片段：

```
@Override
public boolean onAreaTouched(TouchEvent event,ITouchArea pTouchArea, float x, float y) {
    // TODO Auto-generated method stub
    if(event.isActionDown()) {
        ......
    }
    else if(event.isActionMove()) {
        ......
    }
    else if(event.isActionCancel() || event.isActionOutside() || event.isActionUp()) {
        .....
        launchHero(hero, string1.getX1()/PIXEL_TO_METER_RATIO_DEFAULT, string1.getY1()/PIXEL_TO_METER_RATIO_DEFAULT, x/PIXEL_TO_METER_RATIO_DEFAULT, y/PIXEL_TO_METER_RATIO_DEFAULT);
}

public void launchHero(Hero hero, float originX, float originY, float fingerX, float fingerY) {
    Vector2 shoot = new Vector2((originX - fingerX), -(originY - fingerY));
    shoot = shoot.nor().mul(10);

    hero.getBody().setLinearVelocity(shoot);

}
    }

    return false;

} 
```

我在 (originY - fingerY) 中添加了负数，因为如果我不这样做，球首先会下降，然后在与底座碰撞后会上升。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:32:21.550

这很简单，使用`Body.setLinearVelocity(Vector2 pVector)`. 方向和力都由矢量的参数决定。这是一个示例代码：

```
Vector2 shoot = new Vector2((originX - fingerX), (originY - fingerY));
body.setLinearVelocity(shoot); 
```

这将朝手指和原点所形成的方向射击身体，或者，在愤怒的小鸟的情况下，手指和吊索。

如果您想使力恒定并将其乘以某个数字，您可以在拍摄前执行此操作：

```
shoot = shoot.nor().mul(multiplier); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:56:44.383

您可以使用

```
body.applyLinearImpulse(Vector2 impulse, Vector2 point) 
```

我更喜欢这个功能，`setLinearVelocity`因为它提供了更多的可能性。要使用此功能，您需要在坐标和应用它的身体点中给出脉冲。

# sql - postgres 中的异常处理

> ID：12579631
> 
> 赞同：0
> 
> 时间：2012-09-25T09:07:21.053
> 
> 标签：sql, postgresql, postgresql-9.1

我有一个查询，我需要找到`exp`一个数字。在某些情况下，`exp`返回溢出错误的函数太大，或者在某些情况下，函数的参数`exp`太大。在这些情况下，我需要返回一些任意值。

示例（不起作用）

```
select LEAST(exp(1000), 1::double precision); 
```

在这里，我试图找到`exp(1000)`. 如果它太大，我返回 1。

我怎样才能在 Postgres 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:35:27.627

像这样的东西：

```
create or replace function safe_exp(val double precision)
  returns double precision
  language plpgsql
as
$body$
declare
  result double precision;
begin
  begin
    result := exp(val);
  exception 
    when others then 
      result := 1.0;
  end;
  return result;
end;
$body$ 
```

但是由于异常块，这将比“常规”`exp()`调用慢。

# mysql - MySQL：将数据从 OldDB 普通表迁移到多对多关系

> ID：12579635
> 
> 赞同：1
> 
> 时间：2012-09-25T09:07:28.010
> 
> 标签：mysql, database, migration, many-to-many

***这是一个非常简化的图形情况：http:*** [//i.stack.imgur.com/5NoRe.png](http://i.stack.imgur.com/5NoRe.png)

有两个不同模式的数据库，旧的黄色数据库（一个简单明了的表）和新的绿色数据库（有一些类似上面描述的关系）。

问题是我想将 OldDB 上的信息（超过 40k 行）迁移到 NewDB 中，并且我被这种关系转换所困扰。在 OldDB 中，每个中心都有不同的字段，取决于它们的 CHAR(1) = Y 还是 = N，它们是否处于某种操作之下。

现在在 NewDB 中，我们将这些中心放在另一个表中，它们有自己的 id，并且与主表 (b) 的多对多相关。

所以我想要的是遍历 Old.DB 中的每个中心（最多 20 个），当它变成例如`center14 CHAR(1) = Y`时，设置`NewDB.center_has_b.center_id = 14`and `NewDB.center_has_b.b_id = OldDB.oldb.oldb_id`。

我是 MySQL 的新手，但我正在考虑做这样的事情，但没有运气：

```
INSERT NewDB.center_has_b (center_id, b_id) (N, (SELECT oldb_id from OldDB.oldb WHERE centerN = 1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:13:47.043

试试这个：

```
INSERT NewDB.center_has_b (center_id, b_id)
 select 'N', oldb_id from OldDB.oldb WHERE centerN = 1 
```

**编辑**：这是基于此答案的第一条评论

```
insert into center_has_b (center_id,b_id)
select c.enter_id ,old.b_id
from centers c
cross join old.b
where Allcenters = 'Y' 
```

# qt - 分离线程中的 Qt4/Opengl bindTexture

> ID：12579642
> 
> 赞同：0
> 
> 时间：2012-09-25T09:07:53.943
> 
> 标签：qt, opengl, qt4, qthread

我正在尝试使用 QGLWidget 实现类似 CoverFlow 的效果，问题是纹理加载过程。

我有一个用于从磁盘加载图像的工作线程（QThread），主线程检查新加载的图像，如果找到，则使用 bindTexture 将它们加载到 QGLContext 中。在绑定纹理时，主线程被阻塞，所以我有一个 fps 下降。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:10:32.287

我发现 Qt4 中 bindTexture 的默认行为非常慢：

```
bindTexture(image,target,format,LinearFilteringBindOption | InvertedYBindOption | MipmapBindOption) 
```

在绑定选项中仅使用 LinearFilteringBindOption 可以大大加快速度，这是我当前的调用：

```
bindTexture(image, GL_TEXTURE_2D,GL_RGBA,QGLContext::LinearFilteringBindOption); 
```

更多信息： [3800x2850](https://bugreports.qt-project.org/browse/QTBUG-4515) bmp 文件的加载时间从 2 秒减少到 34 毫秒

当然，如果你需要 mipmapping，这不是解决方案。在这种情况下，我认为要走的路是 Pixel Buffer Objects。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:07:09.797

**在主线程中绑定**（单一`QGLWidget`解决方案）：

1.  决定最大纹理大小。例如，您可以根据最大可能的小部件大小来决定它。假设您知道小部件最多（大约）800x600 像素，并且可见的最大封面具有上下 30 像素的边距和 1:2 纵横比 -> 600-2*30 = 540 -> 封面的最大尺寸是270x540，例如存储在`m_maxCoverSize`.

2.  在加载器线程中将传入的图像缩放到该大小。绑定更大的贴图是没有意义的，越大的贴图上传到显卡的时间就越长。用于`QImage::scaled(m_maxCoverSize, Qt::KeepAspectRatio)`缩放加载的图像并将其传递给主线程。

3.  限制纹理的数量或花费在每帧绑定它们的更好时间。即记住你开始绑定纹理的时间（例如`QTime bindStartTime`;）和绑定每个纹理之后：

    if (bindStartTime.elapsed() > BIND_TIME_LIMIT) 中断；

`BIND_TIME_LIMIT`将取决于您要保持的帧速率。但是当然，如​​果绑定每个纹理需要的时间比`BIND_TIME_LIMIT`你没有解决任何问题要长得多。

尽管在较慢的机器/显卡上加载图像时，您仍可能会遇到帧率下降。其余的代码应该准备好接受它（例如使用实际时间来驱动动画）。

* * *

**另一种解决方案**是**在单独的线程中绑定**（使用第二个 invisible `QGLWidget`，请参阅[文档](http://qt-project.org/doc/qt-4.8/QGLWidget.html#threading)）：

> `2.`在线程中上传纹理。
> 
> 在线程中进行纹理上传对于处理需要显示的大量图像的应用程序可能非常有用，例如照片库应用程序。这在 Qt 中通过现有的 bindTexture() API 得到支持。一个简单的方法是创建两个共享的 QGLWidgets。一个在主 GUI 线程中成为当前的，而另一个在纹理上传线程中成为当前的。上传线程中的小部件从不显示，它仅用于与主线程共享纹理。对于通过 bindTexture() 绑定的每个纹理，通知主线程以便它可以开始使用该纹理。

# ios - 新的 XCode 版本是否包含 XCode.app 包中的所有框架？

> ID：12579644
> 
> 赞同：0
> 
> 时间：2012-09-25T09:07:56.877
> 
> 标签：ios, xcode, xcode4

使用 XCode 3，框架似乎存储在单独的目录中。现在我已经升级到 4.5，我应该更新我的项目以在 XCode 本身中查找所有标准框架吗？

使用其他框架（例如 Cg）是否会改变这些框架，或者我可以将它们放在我希望的任何地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:51:44.460

对于标题问题的答案是肯定的。所有标准框架 (SDK) 现在都放入 XCode.app 包中。如果您检查包的内容，您可以看到文件夹`Frameworks`和XCode 包`Other Frameworks`的文件夹中。`Contents`

您可以将其他框架放置在任何地方，但不能放在 XCode.app 包中（每次更新过程中都会替换此包）。

# php - 如何在 Symfony 2.1 的 composer.json 中提供第三方库并访问我们包中的库？

> ID：12579645
> 
> 赞同：1
> 
> 时间：2012-09-25T09:07:57.360
> 
> 标签：php, symfony, symfony-2.1, composer-php, packagist

我需要将[TCPDF](http://www.tcpdf.org/)作为第三方库集成到 Symfony 2.1 中。

我在 composer.json 中尝试过

```
"repositories": [
    {
        "type": "vcs",
        "url": "git://tcpdf.git.sourceforge.net/gitroot/tcpdf/tcpdf"
    }
],
"require": {
    "tcpdf/tcpdf":"*"
}, 
```

但它给出了一个错误`The requested package tcpdf * could not be found.`

如何在 composer.json 文件中正确提供第三方库？

[TCPDF](http://www.tcpdf.org/)库不遵循命名空间，那么我们如何在我们的包中访问这个库呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:24:11.343

找不到它的原因是 tcpdf repo 中的包名称是`tecnick.com/tcpdf`，所以这就是您应该要求的。

也就是说，由于它[在 packagist](http://packagist.org/packages/tecnick.com/tcpdf)上可用，因此您根本不需要在 composer.json 中添加 vcs 存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:20:53.880

[Packagist](http://packagist.org/)上有[几个](http://packagist.org/search/?q=tcpdf)与 TCPDF 相关的包——其中一些是用于将其与 Symfony 集成的捆绑包。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T11:00:00.413

由于 tcpdf 不支持作曲家，您需要使用包存储库。这方面的文档可在以下位置获得：

[http://getcomposer.org/doc/05-repositories.md#package-2](http://getcomposer.org/doc/05-repositories.md#package-2)

请注意，他们的示例配置既有你需要的，`dist`也有你需要的。您可能还需要配置自动加载以匹配 tcpdf。您也可以在作曲家网站上找到相关文档。`source``source`

还可以向 tcpdf 作者发送一封电子邮件，询问他们是否不介意添加 composer.json。

# bash - bash 脚本 prova.sh：第 76 行：语法错误：文件意外结束

> ID：12579646
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:08:00.053
> 
> 标签：bash, eof, unexpectendoffile

我有以下脚本，但找不到错误。有人帮我吗？

具体来说，我将一个大文件拆分为不同的文件，然后压缩任何文件，移动它并通过 ftp 重命名目标文件名发送。

有些东西不起作用:(

在线：放 ${file} ${7}.T${j}(+1)

我尝试用（+1）结尾的新文件名重命名文件

亲切的问候

```
#!/bin/bash

# configuration stuff

# ${1} absolute path file
# ${2} num_files
# ${3} output_filename
# ${4} ipMainframe ip to put files
# ${5} FTP username
# ${6} FTP password
# ${7} destination filename

if [ ! $# == 7 ]; then
        #number of parameter different of two
        echo "Number of parameter incorrect"
        echo "Command use: LLP_split_gzip_sendFTPandTrigger.sh absolute_path_file number_of_pieces output_filename ipMainframe userFTP pwdFTP destinationFilename"
        exit 1
fi

if [ -f ${1} ]; then
        # If file exists
        if [[ ${2} =~ ^[\-0-9]+$ ]] && (( ${2} > 0)); then
                # if number of pieces is an integer > 0
                #Remove old files
                echo "home directory = $HOME"
                CMD=`rm -f '"$HOME"/"$3"*'`
                if [ $? != 0 ]; then
                        echo "Impossible to remove old files $home/llp_tmp* $home/"$3"* in home directory"
                        echo $CMD
                fi
                # Calculate line for every file splitted
                total_lines=$(cat ${1} | wc -l)
                ((lines_per_file = (total_lines + ${2} - 1) / ${2}))
                # Split the actual file, maintaining lines.
                CMD=`split -l "$lines_per_file" "$1" "$HOME"/llp_tmp`
                if [ $? != 0 ]; then
                        echo "SPLITTING FILE ERROR: problem to split file."
                        echo $CMD
                        exit 3
                fi
                #For every file splitted rename and zip it
                i=1
                for file in $HOME/llp_tmp*; do
                        CMD=`mv "$file" "$3"."$i"`
                        if [ $? != 0 ]; then
                                echo "Impossible to rename file"
                                echo $CMD
                                exit 5
                        fi
                        CMD=`gzip "$3"."$i"`
                        if [ $? != 0 ]; then
                                echo "Impossible to compress file $3.$i"
                                echo $CMD
                                exit 6
                        fi
                        i=`expr $i + 1`
                done
                ftp -n ${4} << EOF

                j=1
                user ${5} ${6}
                for file in $3.*; do
                        put ${file} ${7}.T${j}(+1)
                        j=`expr $j + 1`
                done
                quit
        else
                echo "number of pieces second parameter must be more than 0."
                exit 2
        fi
else
        echo "absolute path first paramater doesnt exist"
        exit 1
fi
exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:59:40.053

您没有终止您的此处文档。当我运行你的脚本时，我得到：

```
gash.sh: line 72: warning: here-document at line 54 delimited by end-of-file (wanted `EOF')
gash.sh: line 73: syntax error: unexpected end of file 
```

`ftp -n ${4} << EOF`是问题。你的文件在哪里？

警告说明了一切，您没有`EOF`标记。请注意，这不能缩进！`EOF`必须在“第0 列”并且没有尾随字符，包括空格。

编辑：您似乎想在单个 FTP 会话中使用程序构造——我不知道在 Bash 中这样做的方法。Perl 有一个易于使用的 FTP 模块，您可以在其中执行此操作，简单示例：

```
use strict;
use Net::FTP;

my $ftp = Net::FTP->new ("hostname");
$ftp->login ("username", "password");
$ftp->binary ();

for my $file (glob("$ENV{HOME}/llp_tmp*")) {

    $ftp->put ($file); 
}
$ftp->quit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:38:29.250

你不需要括号`+1`。

将其更改为：

```
put "${file}" "${7}.T${j}+1" 
```

引用变量是一种很好的做法。

另一个提示：`j=`expr $j + 1``您可以简单地使用. 而不是`((j++))`.

# python - 如何在 FormAlchemy 中制作级联选择框？

> ID：12579647
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:08:00.333
> 
> 标签：python, pyramid, formalchemy

我不知道如何在 FormAlchemy 中制作级联选择框。像地址选择表一样，我们有四个类：

```
class Country(Base, DBBase):
    __tablename__ = 'countries'

    id = Column(Integer, primary_key = True)
    name = Column(String)

    def __init__(self, name):
        self.name = name

class Province(Base, DBBase):
    __tablename__ = 'provinces'

    id = Column(Integer, primary_key = True)
    country_id = Column(Integer, ForeignKey('countries.id'), nullable = True)
    country = relationship('Country', backref = 'provinces')
    name = Column(String)

    def __init__(self, country, name):
        self.country = country
        self.name = name

class City(Base, DBBase):
    __tablename__ = 'cities'

    id = Column(Integer, primary_key = True)
    province_id = Column(Integer, ForeignKey('provinces.id'), nullable = True)
    province = relationship('Province', backref = 'cities')
    name = Column(String)

    def __init__(self, province, name):
        self.province = province
        self.name = name

class District(Base, DBBase):
    __tablename__ = 'districts'

    id = Column(Integer, primary_key = True)
    city_id = Column(Integer, ForeignKey('cities.id'), nullable = True)
    city = relationship('City', backref = 'districts')
    name = Column(String)

    def __init__(self, city, name):
        self.city = city
        self.name = name 
```

当用户从第一级选择框（这里是国家字段）中选择一个选项时，第二级选择框应该列出属于相应第一级选择框的所有内容（如果您在“国家”字段中选择美国，“省/州”字段应显示所有州属于美国）。三级和四级盒子就是这样。所有数据都像上面的四个类一样排序。问题是如何在 FormAlchemy 中制作这样的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:20:41.523

我将在这里假设您想要构建一个由 JavaScript 动态加载的表单。从本质上讲，您说第二到第四层是空的，直到选择了上面的层。

它实际上取决于这里的前端使用情况，但我将提出一个简单的解决方案，它只会重新加载整个表单。您可以轻松地将其修改为更具动态性以获得更好的体验。

您想要做的是构建一个表单，您不知道那些尚未选择上述级别的选择框内将包含什么。假设您有一个国家/地区（例如“美国”）的第一级，然后有一个显示省份列表的第二级（在这种情况下是美国的所有州）。

现在您的用户应该只看到一个首先选择国家的框。

构建您的表单以包含所有字段（即所有级别），但将除第一个之外的所有字段都设为空。然后用户选择第一级。提交表单，但现在因为您有第一级，您可以使用第二级的数据构建表单（例如，从您的模型中获取美国的所有州）。然后将其传递给 FormAlchemy。然后将该表单发回给用户。他选择了第二个级别，然后您再次从模型中构建列表并将其传递给表单。这种情况一直持续下去，直到每个级别都建立起来。

因此，您的表单包括您拥有的**所有**字段，但它们都是空的，但第一个。每次提交表单时，您都会检查存在哪些级别并从模型中检索这些级别。这就是这种方法的精髓。在 FormAlchemy 中实现这一点就像构建任何表单一样简单。

*注意*：您需要一次又一次地将表单提交到同一个视图，并且每次都需要检查数据是否完整。

我不会在这里举个例子，因为问题是针对一般方法而不是一些特殊的 FormAlchemy 语法。

# c - AND运算的错误答案

> ID：12579653
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:08:28.583
> 
> 标签：c

我正在尝试对充满所有 1 的缓冲区执行 AND 操作。
我正在编写以下代码，

```
unsigned char pTemp[1024];
 memset(pTemp,0xFF,1024);
printf("AND - %d ",((unsigned char)pTemp[0] && 0x2)); 
```

我得到了答案 - 1 。

请让我知道发生了什么。提供解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:13:02.323

按位与运算符是`&`，不是`&&`。后者是用于组合布尔值的逻辑运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:13:45.560

`&&`是逻辑运算符，`&`而是位运算符，它们是不同的。

`2 && 1`给出非零，并`2 & 1`给出`0`.

我相信你想要`&`这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:09:04.210

& 是逻辑运算符，如果你对这种操作感觉不习惯，你可以按照你记得的更好的方式定义它。如果你必须经常使用它，那就更多了。请参见下一个示例：

```
#define AND(x,y) (x) & (y)             //definition of custom operation.
#include <string.h>
#include <stdio.h>

void main(){

    unsigned char pTemp[1024];

    memset(pTemp,0xFF,1024);
    printf("and:%d", AND(pTemp[0], 0x2));      //AND(x,y) returns the operation

} 
```

如果您必须使用大量操作或想要定义更复杂的操作，这可能会使任务更舒适。

# sql - SQL 插入语法错误

> ID：12579656
> 
> 赞同：0
> 
> 时间：2012-09-25T09:08:35.603
> 
> 标签：sql, ms-access, syntax

我在 Java 程序中编写了以下代码。

```
public int insertRecord()
       {

connection=PersistentieController.getInstance().getConnection();

int resultaat = 0;

String sql ="INSERT INTO TestDb (Nr Dossier, Année) VALUES (?,?)";

          try 
          {
             pstatement = initStatement(connection, sql);
             pstatement.setString(1, "9999");            
             pstatement.setInt(2, 2012);

             resultaat = pstatement.executeUpdate(); 
             pstatement.close();

          } //einde try
          catch ( SQLException sqlException ){
              sqlException.printStackTrace();

          }  

          return resultaat;

       } //einde insert() 
```

我收到语法错误。我检查了我没有使用保留字。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:10:05.573

您已经转义了列名（*带有空格，例如`Nr Dossier`*）。

如果您使用的是**MySQL** ，请使用反引号，

```
INSERT INTO TestDb (`Nr Dossier`, `Année`) VALUES (?,?) 
```

如果您使用的是**SQLServer**和**MS Access** ，则使用括号，

```
INSERT INTO TestDb ([Nr Dossier], [Année]) VALUES (?,?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:10:56.160

在这行代码中 String sql ="INSERT INTO TestDb (Nr Dossier, Année) VALUES (?,?)"; 您提到的列名`Nr Dossier`是无效的列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:10:57.043

我建议使用它，因为您的“Nr Dossier”字段中有一个空格。

您没有提及您正在使用哪种 SQL 类型，但是 [] 或 ` 标记通常可以解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:13:45.687

使用单引号内的字符串值：

```
String sql ="INSERT INTO TestDb ('Nr Dossier', 'Année') VALUES (?,?)"; 
```

# php - PHP 静态匿名函数真的有效吗？

> ID：12579657
> 
> 赞同：15
> 
> 时间：2012-09-25T09:08:35.783
> 
> 标签：php, anonymous-function

我正在尝试学习 PHP，现在我被困在“静态匿名函数”中。

我在教程中找到了这个（[http://www.slideshare.net/melechi/php-53-part-2-lambda-functions-closures-presentation](http://www.slideshare.net/melechi/php-53-part-2-lambda-functions-closures-presentation)）

> “面向对象
> 
> *   Lambda 函数是闭包，因为它们会自动绑定到创建它们的类的范围。
> *   ' `$this`' 并不总是需要在范围内。
> *   删除 ' `$this`' 可以节省内存。
> *   您可以通过将 Lambda 函数声明为静态来阻止此行为。”

这段代码有什么问题？

我收到此错误：

> 解析错误：解析错误，在第 11 行的 C:\wamp\www\z-final\a.php 中期待 `T_PAAMAYIM_NEKUDOTAYIM'

为什么此代码行不起作用“return static function(){var_dump($this);};” ?

```
class foo
{
    public function getLambda()
    {
        return function(){var_dump($this);};
    }

    public function getStaticLambda()
    {
        return static function(){var_dump($this);};
    }
}

$foo = new foo();
$lambda = $foo->getLambda();
$staticLambda = $foo->getStaticLambda();
$lambda();
$staticLambda(); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-05-08T23:53:55.317

是的，这是 5.4+ 中完全有效的语法。

基本上，它会阻止当前类自动绑定到闭包（实际上，它会阻止所有绑定，但稍后会详细介绍）。

```
class Foo {
    public function bar() {
        return static function() { var_dump($this); };
    }
    public function baz() {
        return function() { var_dump($this); };
    }
} 
```

如果我们在 5.4+ 上实例化它，闭包`bar()`返回将`$this`设置为 null。就像您对它进行了静态调用一样。但是`baz()`会`$this`设置为您调用的 foo 实例`baz()`。

所以：

```
$bar = $f->bar();

$bar(); 
```

结果是：

> 注意：未定义的变量：第 5 行 /in/Bpd3d 中的 this
> 
> 无效的

和

```
$baz = $f->baz();

$baz(); 
```

结果是

> 对象（Foo）#1（0）{
> 
> }

说得通？伟大的。

现在，如果我们采用在函数外部定义的闭包会发生什么：

```
$a = function() { var_dump($this); };
$a(); 
```

我们得到`null`（和通知）

```
$c = $a->bindTo(new StdClass());
$c(); 
```

我们得到`StdClass`了，正如你所期望的那样

```
$b = static function() { var_dump($this); };
$b(); 
```

我们得到`null`（和通知）

```
$d = $b->bindTo(new StdClass());
$d(); 
```

这就是事情变得有趣的地方。现在，我们收到警告、通知和 null：

> 警告：无法将实例绑定到第 12 行 /in/h63iF 中的静态闭包
> 
> 注意：未定义的变量：第 9 行 /in/h63iF 中的 this
> 
> 无效的

所以在 5.4+ 中，你可以声明一个静态闭包，这会导致它永远不会`$this`绑定到它，你也不能将对象绑定到它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:11:12.397

应该不需要用`static`关键字定义它。

```
<?php
class House
{
     public function paint($color)
     {
         return function() use ($color) { return "Painting the house $color..."; };
     }
}

$house = new House();
$callback = $house->paint('red');
var_dump($callback); // object(Closure)#2 (2) {..}
var_dump($callback()); // "Painting the house red..." 
```

# c++ - 错误：“std”之前的预期初始化程序

> ID：12579658
> 
> 赞同：2
> 
> 时间：2012-09-25T09:08:36.563
> 
> 标签：c++, std

```
anisha@linux-trra:~> make
g++ -c -m64 -pipe -I/usr/lib64/R/include -I/usr/lib64/R/library/Rcpp/include -I/usr/lib64/R/library/RInside/include -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/home/anisha/qtsdk-2010.05/qt/mkspecs/linux-g++-64 -I. -I/home/anisha/qtsdk-2010.05/qt/include/QtCore -I/home/anisha/qtsdk-2010.05/qt/include/QtGui -I/home/anisha/qtsdk-2010.05/qt/include -I. -o zoomCornerPanDatabaseParser.o zoomCornerPanDatabaseParser.cpp
In file included from zoomCornerPanDatabaseParser.h:9:0,
                 from zoomCornerPanDatabaseParser.cpp:1:
*******************boundaryLineEquation.cpp:6:1: error: expected initializer before ‘std’
make: *** [zoomCornerPanDatabaseParser.o] Error 1 
```

`.cpp`: _

```
#include <math.h>
#include <string>
#include "boundaryLineEquation.h"

/// This function will return the direction of the new point as w.r.t to the given rectangle.
********************std :: string findPanDirection (float x1, float y1, float x2, float y2, float newX, float newY)
{
    if (x1 > x2)
    {
        float temp = x1;
        x1 =x2;
        x2 = temp;
    }

    if (y2 > y1)
    {
        float temp = y2;
        y2 = y1;
        y1 = temp;
    }

    if (newX < x1 )
    { 
```

`.h`: _

```
#include <iostream>

#ifndef RLINE
#define RLINE

std :: string findPanDirection (float x1, float y1, 
                        float x2, float y2, 
                        float newX, float newY);

bool returnDistance (float centerPointLng, float centerPointLat, 
                float newCenterPointLng, float newCenterPointLat)

#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:10:38.103

声明中缺失`;`。`returnDistance()`应该：

```
bool returnDistance (float centerPointLng, float centerPointLat, 
                     float newCenterPointLng, float newCenterPointLat);
                                                                    //^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:11:23.267

你需要一个分号

```
bool returnDistance (float centerPointLng, float centerPointLat, 
                     float newCenterPointLng, float newCenterPointLat);
                                                                      ^ 
```

# android - 在 GCM 上注册设备：未调用 onRegistered

> ID：12579662
> 
> 赞同：1
> 
> 时间：2012-09-25T09:08:43.943
> 
> 标签：android, registration, google-cloud-messaging

我在我的应用程序上使用 GCM，但是当我尝试注册我的设备时，不会调用 GCMIntentService 上的 onRegistered 方法。

我在我的设备上安装了 GCM 演示应用程序，它可以工作：

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

在这个应用程序中，设备已注册，我可以向它发送消息。我尝试使用相同的 GCMIntentService 在我自己的应用程序中使用 GCM。我也调整了清单，但是当我尝试注册时，这就是我的日志中出现的内容：

09-25 10:00:10.195: V/GCMRegistrar(591): 注册应用程序 com.pfc.dps 的发件人 38322290XXXXX

没有别的，我没有得到任何回应。这些是我的清单权限：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pfc.dps"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>

<uses-permission android:name="android.permission.MANAGE_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.USE_CREDENTIALS"></uses-permission>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.READ_SYNC_STATS" />
<uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.GET_TASKS"/>

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<!-- Creates a custom permission so only this app can receive its messages. -->
<permission
    android:name="com.pfc.dps.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission
    android:name="com.pfc.dps.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission
    android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

我在 Google API 控制台中创建了一个新项目以检查它是否以这种方式工作，但使用任何发件人 ID 都会得到相同的结果。

有谁知道这是为什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:34:23.207

在“Registering app ***your_package*** of senders ***sender_id*** ”之后

你应该会收到一个`onReceive`事件，它会叫你`GCMIntentService`唤醒你的应用程序。

如果您没有，请检查您是否错过了收件人或忘记更改您自己的包裹的类别。

```
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"
          android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
       <action android:name="com.google.android.c2dm.intent.RECEIVE" />
       <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
       <category android:name="***your_package***" />
     </intent-filter>
</receiver> 
```

# android - 如何编写可以将 xml 文件发送到在 Android 设备中运行的 HTTP 服务器的 html 文件？

> ID：12579665
> 
> 赞同：1
> 
> 时间：2012-09-25T09:08:51.737
> 
> 标签：android, html

如何编写可以将xml文件发送到服务器的html文件？有一个要求：将以下信息发送到我在 Android 设备上运行的 HTTP 服务器。1）信息为xml格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<APMode>
<SSID>htc</SSID>
<password>1234567890</password>
<credentials>abcd</credentials>
</APMode > 
```

`org.apache.http`2）HTTP服务器用API解析HTTP body

```
 if (request instanceof HttpEntityEnclosingRequest) {
                HttpEntity entity = ((HttpEntityEnclosingRequest) request)
                            .getEntity();
    parserXML(entity);

....
private void parserXML(HttpEntity entity) {
        InputStream is = null;
        try {
            is = entity.getContent();
            printEntity(is);
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        XmlPullParser parser = Xml.newPullParser();
        try {
            parser.setInput(is, "UTF-8");
            int eventType = parser.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                switch (eventType) {
                case XmlPullParser.START_DOCUMENT:
                    break;
                case XmlPullParser.START_TAG:
                    String name = parser.getName();
                    if (name.equalsIgnoreCase(SSID_TAG)) {
                        ssid = parser.nextText().trim();
                    } else if (name.equalsIgnoreCase(PASSWORD)) {
                        password = parser.nextText().trim();
                    } else if (name.equalsIgnoreCase(CREDENTIAL)) {
                        credential = parser.nextText().trim();
                    } else if (name
                            .equalsIgnoreCase(DazzleApplication.DATETIME_TAG)) {
                        dateTime = parser.nextText().trim();
                    }
                    break;
                case XmlPullParser.END_TAG:
                    break;
                }
                eventType = parser.next();
            }
            if (is != null)
                is.close();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

但是我不知道如何编写可以在浏览器中加载的html？我现在不能修改服务器代码？

# javascript - 用什么来代替切换？

> ID：12579667
> 
> 赞同：2
> 
> 时间：2012-09-25T09:09:03.443
> 
> 标签：javascript, jquery, html

我了解到函数 toggle() 已被弃用。那么对于这个例子，我可以用什么来代替切换：

```
<div id="block" style="width: 200px; height: 150px; background-color: blue"></div>

<span id="click">hide</span> 
```

​</p>

```
$("#click").toggle(
            function(){
               $("#block").slideUp();
               $(this).html('show');
            },
            function(){
               $("#block").slideDown();
               $(this).html('hide');

            }); 
```

[http://jsfiddle.net/2rERJ/](http://jsfiddle.net/2rERJ/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T09:12:42.583

你可以使用`click`and`slideToggle`方法。

```
$("#click").click(function(){
     var $block = $("#block"),
         $this = $(this);
     $block.slideToggle(function(){
         $this.text($block.is(':visible') ? 'hide' : 'show');
     });
}); 
```

# scala - 停止框架使用 HTTP 代理

> ID：12579675
> 
> 赞同：5
> 
> 时间：2012-09-25T09:09:29.713
> 
> 标签：scala, playframework, wsdl, playframework-2.0, http-proxy

在几乎被沮丧的泪水淹没之后，我不得不问你一个问题。

我的 play (2.0.3, scala) 应用程序正在使用一个 wsdl，如果我在**localhost**上运行我的 web 服务的开发版本，它工作得非常好，这使得 wsdl-url 类似于`http://localhost:8080/Service/Service?wsdl`. 当我尝试使用来自远程测试系统服务器的 WSDl 时，使用类似 的 Url `http://testserver.company.net:8084/Service/Service?wsdl`，我得到：

`[WebServiceException: Failed to access the WSDL at: [http://testserver.company.net:8084/Service/Service?wsdl](http://testserver.company.net:8084/Service/Service?wsdl). It failed with: Got Server returned HTTP response code: 502 for URL: [http://testserver.company.net:8084/Service/Service?wsdl](http://testserver.company.net:8084/Service/Service?wsdl) while opening stream from http://testserver.company.net:8084/Service/Service?wsdl.]`

我的公司使用 http 代理来上网，这就是 502 错误的原因。所以我想玩停止使用代理。

到目前为止，我已经尝试过（一起）：

*   从 Internet Explorer 中删除的代理
*   设置 _JAVA_OPTIONS=-Dhttp.noProxyHosts="testserver.company.net"
*   设置 JAVA_OPTIONS=-Dhttp.noProxyHosts="testserver.company.net"
*   播放运行 -Dhttp.noProxyHosts="testserver.company.net"

这些都不起作用。有任何想法吗？如何停止使用 HttpProxy 进行游戏？

**编辑：**

我发现它与 java Webservices-api / jaxws 库有关。有任何想法吗？

**编辑 2012-10-17：**

它似乎取决于系统代理设置。我仍然不知道为什么那天它没有工作，尽管我从 IE 中删除了整个代理并重新启动了一切。有什么方法可以让我的游戏应用程序独立于系统设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:50:58.423

尝试：

```
play -Dhttp.noProxyHosts="testserver.company.net" run 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T15:04:08.453

我注意到您的属性中有一个错字，正确的属性是`http.nonProxyHosts`so add and extra n after no。

# sonarqube - Sonar runner 退出代码始终为 0

> ID：12579683
> 
> 赞同：1
> 
> 时间：2012-09-25T09:09:52.330
> 
> 标签：sonarqube, exit-code, sonar-runner

我通过 sonar runner 客户端使用 Sonar。实际上，我从 NAnt 构建系统调用它，如果退出代码不是 0，NAnt exec 调用应该会失败。

但是，我最近遇到了一个问题，即声纳运行器总是返回 0 退出代码，即使其中一个插件（例如 NDeps）抛出异常。据我所知，在这种情况下，分析数据没有提交到数据库，因此这是一个很好的失败理由。

我似乎记得之前版本的 Sonar / Sonar runner 曾经以我预期的方式运行 - 如果插件失败，退出代码不是 0。

今天我使用 Sonar 3.2 / Sonar runner 2.0 / C# Ecosystem 1.4，据我所知，这是最新的。

某处是否有配置标志可以返回正确的退出代码？这个问题还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:11:29.763

有关信息：有关此主题的讨论目前正在 Sonar 用户邮件列表中进行。可以在这里关注：http: [//sonar.15.n6.nabble.com/Sonar-runner-exit-code-is-always-0-tt5003433.html](http://sonar.15.n6.nabble.com/Sonar-runner-exit-code-is-always-0-tt5003433.html)

编辑：在与 Yan 进行调查后，事实证明 Sonar BAT 脚本的行为取决于所使用的 Windows 版本。Yan 提出了解决此问题的方法，并且[已经](http://jira.codehaus.org/browse/SONARPLUGINS-2296)为 Sonar Runner 的下一个版本打开了一张票。

# php - php爆炸数组中的元素

> ID：12579685
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:00.240
> 
> 标签：php, arrays, explode

我怎样才能爆炸数组中的每个元素？

```
Array
(
    [0] => countryId:2, productId:1, status:1, pId:18, xId:pdgje5566
) 
```

请参阅下面的上述数组：

```
$searchfor = $xId;

header('Content-Type: text/plain');

$contents = file_get_contents($file);
$pattern = preg_quote($searchfor, '/');
$pattern = "/^.*$pattern.*\$/m";

// search, and store all matching occurences in $matches
if(preg_match_all($pattern, $contents, $matches)){

   print_r($matches[0]);
   //echo implode("\n", $matches[0]);

} 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:14:50.723

```
foreach ($array as &$value) {
  $arr = array();
  foreach (explode(', ', $value) as $el) {
     $ret = explode(':', $el);
     $arr[$ret[0]] = $ret[1];
  }
  $value = $arr;
} 
```

# php - 从表中获取旧数据并附加新数据

> ID：12579686
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:10:01.300
> 
> 标签：php, javascript, jquery, ajax

我无法从表中获取现有数据并将新数据附加到表中，类似于评论系统。我只能看到由于`.click`.

我想知道我是否仍然需要创建一个新查询来从表中获取现有数据然后附加新的，或者是否有更简单的方法来做到这一点。这是我的代码：

```
<!doctype html>
<?php
     require_once('get.php');
 ?>
<html class="no-js" lang="en">
   <head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <title></title>
   <meta name="description" content=""> 
   <meta name="viewport" content="width=device-width">
 </head>
    <body>
       <div id="wrap-body">
        <form action="" method="post">
           <input type="text" name="username" id="username">
           <input type="text" name="msg" id="msg">
           <input type="button" id="submit" value="Send">
        </form>
       <div id="info">
       </div>
        </div> 
    </body>
    <script>
         $(document).ready(function (){
            var username ;
            var msg ;
        $('#submit').click(function (){
             username = $('#username').val();
                msg = $('#msg').val();

            $.ajax({
                      type: 'POST',
                      url: 'get.php',
                      dataType: 'json',
                     data:{'username': username, 'msg':msg},
                      success: function (data){
                     $.each(data, function(i,item) {
                          $('#info').append("<p> you are:"+data[i].username+"</p> <p> your  message  is:"+data[i].mesg);
                          })
                       }
                });
            });
        });
    </script>
    </html> 
```

获取.php：

```
 <?php
          $host='localhost';
          $username='root';
            $password='12345';
          $db = 'feeds';
          $connect = mysql_connect($host,$username,$password) or die("cant connect");
               mysql_select_db($db) or die("cant select the".$db);
               $username = $_POST['username'];
               $msg = $_POST['msg'];
               $insert = "INSERT INTO info(user_name,message) VALUES('$username','$msg')";
            if(@!mysql_query($insert)){
                  die('error insertion'.mysql_error());
                   }
               $get = "SELECT * FROM info ORDER BY id desc LIMIT 1";
               $result=mysql_query($get)or die(mysql_error());  
               $inside_counter =   mysql_num_rows($result);
                  $data=array();
                    while ($row = mysql_fetch_array($result))
                     {
                      $data[] = array(
                      'username'=>$row['user_name'],
                      'mesg'=>$row['message'],
                      'counter'=>$inside_counter
                    );
                  }
                echo json_encode($data);
           ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:13:48.073

看来您将第二个查询限制为 1 个返回，因此您只能返回一行

```
$get = "SELECT * FROM info ORDER BY id desc LIMIT 1"; 
```

应该

```
$get = "SELECT * FROM info ORDER BY id desc"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:14:18.760

尝试像这样编辑

```
$('#info').append("<p> you are:"+data[i].username+"</p> Hello<p>"+data[i].msg); 
```

# objective-c - 更改 nib 文件加载的内容

> ID：12579692
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:16.530
> 
> 标签：objective-c, ios, ipad, nib

在我的 iPad 应用程序中，我有一个按钮面板，我使用了一个`UIImageView`作为这个面板并将按钮放在它上面并创建了我的 nib 文件。在某些视图中，不应显示此面板的某些按钮。所以我要做的是删除这些按钮并降低面板的高度（a `UIImageView`）然后重新定位按钮以占用已删除按钮的空间。我已经为所有这些创建了出口。

这是这样做的方法吗？我的问题是，如果我想更改按钮在某些时候显示的顺序，我无法通过简单地更改 nib 文件来做到这一点。我还必须对代码进行一些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:35:00.737

在这种情况下，首先不要使用笔尖来定位按钮。听起来这是偶尔的情况之一，您最好只从代码中工作。

如果您决定重新定位按钮以及删除和重新定位按钮，则不必担心保护布局的某种抽象，只要您的特定视图知道它需要哪些按钮，您就可以在运行时进行布局。您的代码已经完成了大部分布局工作（删除和重新定位）。

# android - Flex 应用程序与本机移动应用程序之间的 Flex 移动通信

> ID：12579693
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:19.497
> 
> 标签：android, objective-c, ios, apache-flex, flex-mobile

我想从我的 Flex 移动应用程序发送一些字符串数据到另一个应用程序并同时启动最后一个应用程序？这是否可以使用 Flex SDK（适用于 Android 和 iOS）？

任何建议将不胜感激！

PS我认为在原生移动开发中有一些方法可以做同样的事情

更新：我根据本教程使用网络完成了此操作：http: [//blog.leeburrows.com/2011/10/p2p-flash-on-a-local-network-part1/](http://blog.leeburrows.com/2011/10/p2p-flash-on-a-local-network-part1/)

任何其他类似“命令行”的方法都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:42:48.400

要从另一个应用程序启动应用程序，请在 Stackoverflow 上查看此答案： [https ://stackoverflow.com/a/10493320/1069487](https://stackoverflow.com/a/10493320/1069487)

不确定是否可以传递启动参数（您的字符串），一个简单的解决方法是本地共享文件。

# javascript - 防止同步加载商店

> ID：12579694
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:19.943
> 
> 标签：javascript, extjs, dependencies

我使用分机 4.1.1

我不断得到：

> [Ext.Loader] 同步加载'Eml.store.eml.EventSummary'；考虑在 Ext.onReady 上方添加 Ext.require('Eml.store.eml.EventSummary')

我首先将商店引用添加到我的控制器，但控制器直到稍后才加载..所以我将它添加为“需要”但没有雪茄..有人知道我做错了什么吗？

![依赖问题](../Images/86f6742152efe4ef9b8ac721c9846ce4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:12:46.723

因为它在创建期间没有被评估，所以它在将对象字面量传递给 define() 之前创建了存储。

相反，在 initComponent 中指定存储。

# css - CSS加载但在第一次加载时不起作用 - ie7,ie8

> ID：12579698
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:32.093
> 
> 标签：css, internet-explorer-7

我有这个头

```
<head>
    <title>TITLE</title>
    <link rel="stylesheet" type="text/css" href="<?php echo FO_CSS_PATH . 'all.css'; ?>" />
    <script type="text/javascript" src="<?php echo FO_JS_PATH . 'jquery-1.8.0.min.js'; ?>"></script>
</head> 
```

`FO_CSS_PATH`并且`FO_JS_PATH`在所有其他浏览器上是正确的并且完全可以工作。

首先，当我单击链接并打开新页面时，css 已完全加载（我可以在 ie 的开发人员工具中看到它）。我认为我的 css 中没有任何错误，因为如果我按`F5`（刷新），则页面已完全加载。

因此，当我打开页面时，css 正在加载但无法正常工作。如果我按下`F5`它就可以正常工作了。

PS。我在这个网站上发现了同样的问题：[http](http://forums.asp.net/t/1180199.aspx/1/10) ://forums.asp.net/t/1180199.aspx/1/10 ，但我没有使用 ASP 并且我没有找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:01:02.597

首先，尝试使用 CSS 文件的实际路径（根本没有 PHP），看看问题是否仍然存在。如果是这样，请仔细检查问题是否出现在具有相同版本 IE 的另一台 PC 上。如果问题仍然存在，您将不得不尝试使用一些随机属性创建的另一个新 CSS 文件来进行测试。

如果它仍然不能只在某些特定版本的 IE 上工作，我会检查用于创建文件的字符集（使用像记事本++这样的优秀文本编辑器）。确保用于保存文件的字符集与 php header() 或 html 元中声明的字符集相同。

看起来 IE 确实没有正确检测您的 CSS 文件或 PHP/html 页面的字符集。当它刷新时，它现在可以正确检测到。

# model - 从 jsp 中保留 Struts2 ModelBean 数据

> ID：12579702
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:38.107
> 
> 标签：model, struts2, request, javabeans

我有 ModelBean（假设是 MyBean），我在其中设置大量来自数据库的数据

```
class MyBean{
   List<String> someData;
   //getters and setters and other properties
} 
```

现在我在 jsp 中显示这些数据。到现在为止都很好。

现在，当我从 JSP 提交任何操作时，一旦 Flow 进入 Action 类，除了使用隐藏变量再次提交的参数外，ModelBean 数据丢失了。我知道如果我们仅出于查看目的显示数据，我们需要使用隐藏变量提交它们以便将它们保留在 bean 中。

由于我有大量来自 db 的数据，我不想将它们隐藏起来并让我的 jsp 加载速度非常慢。在不使用会话/隐藏的情况下保持数据从模型 bean 流向 jsp 再到模型 bean 的任何其他解决方法。我对请求参数很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:24:32.653

您想要的行为没有干净的替代方案。从本质上讲，HTTP 是一个无状态协议，为了存储状态，例如你的 modelBean，你将不得不将它放在会话中，或者通过请求参数将整个 bean 传递给下一个操作（通常通过表单）。现在，你不想两者都做，所以你能做的很少。

你真的更新了你放在你的modelBean中的所有信息吗？如果您只是将 bean ID 放在隐藏字段中，那么当您将其传递给下一个操作时，从数据库中检索 bean 并使用它做您想做的事情。这样，您的状态将存储在数据库中，您无需在 JSP 中传递这个巨大的对象。

现在，如果你真的想传递整个对象，并且你正在寻找第三种选择，我能想到的最好的方法是使用[GSON](http://code.google.com/p/google-gson/)之类的东西将对象转换为 json 对象，然后将其传递到 JSP 上的 javascript 对象中，例如：

```
//Java code
String modelBeanJson = GSON.toJson(modelBean, ModelBean.class);

//JS code
var jsonToPass = <s:property value="modelBeanJson" escape="false" />;
//On next action
window.location.href = "NextAction?param1=" + JSON.stringify(jsonToPass); 
```

但是......这几乎与将对象放在隐藏字段中相同。

**TL;DR 如果您真的不需要传递整个 beanObject，请考虑在下一步操作中仅传递 bean 的 ID 并从数据库中检索它。**

# macos - 使用 OpenOffice 打开 ms-access 数据文件 (*.mdb)

> ID：12579705
> 
> 赞同：2
> 
> 时间：2012-09-25T09:10:45.183
> 
> 标签：macos, ms-access, openoffice.org

我正在尝试在 mac 上浏览 ms-access 数据库。到目前为止，最好的结果是我在 Mac 上使用 OpenOffice，就像[这里](http://blog.petermolgaard.com/2011/11/22/working-with-access-databases-mdb-files-on-mac-osx/)描述的那样。

现在我可以看到所有的表。但是当我尝试使用选择访问数据时，我只看到 3 行结果集，并且字符串列的内容只显示第一个字母。

但是，不知何故我可以访问所有数据：

*   `select count(*) from SomeTable`给我正确的行数。

*   `select * from SomeTable where SomeStringCol='SomeWord'`返回预期的行（因此选择似乎使用的不仅仅是第一个字母......并`select * from SomeTable where SomeStringCol='S'` 返回空结果）

知道为什么会这样以及如何访问完整数据吗？（没有必要使用 OpenOffice，这是迄今为止最好的方式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-20T05:24:00.447

`select * from SomeTable where SomeStringCol='S'`只选择 SomeStringCol 中唯一的文本是字母“S”的那些行。这可能不太可能（但并非不可能）

您需要将查询更改为`select * from SomeTable where left(SomeStringCol, 1) ='S'`或`select * from SomeTable where SomeStringCol like 'S*'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T23:18:21.917

> . 当我尝试使用选择访问数据时，我只看到 3 行结果集

正如问题中引用的博客文章的评论中所提到的，该 ODBC 驱动程序的未许可版本已被削弱，并且只会返回 3 行。

[我最近在这里](https://askubuntu.com/a/519571/323236)回答了一个关于 Linux 上的 LibreOffice Base 的类似问题。解决方案是使用（免费的）[UCanAccess](http://ucanaccess.sourceforge.net/site.html) JDBC 驱动程序将 LibreOffice 连接到 Access 数据库。Mac OS X 的实际步骤会略有不同，但基本方法是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T14:44:48.470

I finally installed [MDB Tool](https://itunes.apple.com/de/app/mdb-tool-for-microsoft-access/id513995545?mt=12) which opened the full DB and allowed me csv-exports.

# php - 如何处理 PHP 异常并保持其语义？

> ID：12579707
> 
> 赞同：2
> 
> 时间：2012-09-25T09:10:49.553
> 
> 标签：php, exception

我正在为一个 HTML 设计人员使用 PHP 方法检索内容的项目进行开发。现在，是处理异常的时候了，我们遇到了同时保持 HTML 漂亮、干净和语义以及 PHP 正确的问题。

除非有例外，否则 HTML 模板具有以下内容：

```
<h2 class="title"><?php Content::getTitle() ?></h2> 
```

现在，如果我们想处理异常，我们应该这样写：

```
<h2 class="title">
    <?php
    try {
        Content::getTitle();
    } catch (Exception $e) {
        echo $e->getMessage();
    }
    ?>
</h2> 
```

这一点都不干净。

或者

```
<?php
try {
    // THE WHOLE TEMPLATE RENDERING!!!
} catch (Exception $e) {
    echo $e->getMessage();
}
?> 
```

这是不可接受的，因为当它应该报告问题并继续时，它会在任何异常时停止渲染。

因此，我们正在考虑将 try/catch 的内容放入方法本身：

```
class Content {

    public static function getTitle {
    try {
        if (something==happened) throw new Exception 'OMG!';
        else {
            DoTheJob();
        }
    } catch (Exception $e) {
        echo $e->getMessage();
    }

} 
```

它现在似乎起作用了，所以问题是：**这是一个好习惯吗？有没有更好更干的替代品？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:27:31.790

您正在讨论的是 MVC 的早期阶段。您肯定希望从模板中拆分代码登录（异常处理）。完全推荐以适当的方法（或以上，当然）具有异常逻辑。

您实际上不想做的只是打印错误，这通常会使用户感到困惑。如果您已经输出了部分内容，您可以决定是重定向到错误页面还是在损坏的页面中呈现一般用户友好的错误消息（假设您不知道已经呈现了多少）。

用[`set_exception_handler`](http://php.net/manual/en/function.set-exception-handler.php). 那是完全干燥的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:29:20.050

是的，这很好。它被称为[模板视图模式](http://martinfowler.com/eaaCatalog/templateView.html)：

> 处理动态网页的最佳方法 [*原文如此*] 是像编写静态页面一样编写动态网页，但要放入可解析为调用以收集动态信息的标记。由于页面的静态部分充当特定响应的模板，因此我将其称为模板视图。

更多细节可以在[*Fowler, Patterns of Enterprise Application Architecture 中找到。*](http://www.martinfowler.com/books/eaa.html)

# c# - 从 Windows 8 应用程序访问 Windows Phone 7 上的图片？

> ID：12579708
> 
> 赞同：0
> 
> 时间：2012-09-25T09:10:50.183
> 
> 标签：c#, windows-phone-7, windows-8

我正在尝试从 Windows 8 C# 应用程序访问诺基亚 Lumia 610 上的图像。正如在其他帖子中所指出的那样，这种访问只能通过 Zune 进行，而且 Windows Phone 甚至在 Windows 8 中都不会直接可见。

但是，使用 Windows 8 RTM 版本时，我现在注意到 Lumia 610 作为设备可见。仍然 StorageDevice.FromId() 引发异常。

所以我的问题是：以前有效的信息（“只能通过 Zune 访问 Windows Phones 上的文件夹”）是否仍然有效？如果没有，如何在 Metro/C# 应用程序中为 Windows Phone 创建 StorageFolder 对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:54:24.887

我认为您无法将任何 WP7 设备用作 StorageDevice。如果我没记错的话，Windows Phone 7 使用IsolatedStorage 来存储任何和所有内容，因此您无法通过Windows Explorer 访问Windows Phone 上的文件，而无需root/越狱您的Windows Phone。即便如此，您也无法通过 Windows 8 应用程序访问它并同时通过认证。

# java - 从 .properties 文件初始化 JUnit 的常量，该文件从 pom.xml 文件中初始化

> ID：12579712
> 
> 赞同：2
> 
> 时间：2012-09-25T09:10:56.497
> 
> 标签：java, properties, junit, initialization, constants

**请原谅错综复杂的标题**

**背景**

/pom.xml

```
...
<foo.bar>stackoverflow</foo.bar>
... 
```

/src/main/resources/config.properties

```
...
foo.bar=${foo.bar}
... 
```

配置文件

```
...

public final static String FOO_BAR;

static {
    try {
        InputStream stream = Config.class.getResourceAsStream("/config.properties");
        Properties properties = new Properties();
        properties.load(stream);
        FOO_BAR = properties.getProperty("foo.bar");
    } catch (IOException e) {
        e.printStackTrace();
    }
}

... 
```

**问题**

在 /src/main/java 中，我`Config.FOO_BAR`在 MyClass.java 中使用。如果我想`MyClass`在 /src/test/java 文件夹中使用带有 MyClassTest.java 的 JUnit 进行测试，如何加载属性以便`Config.FOO_BAR`初始化常量？

我试图在 /src/test/resources 中添加一个几乎没有编写的 config.properties `foo.bar=stackoverflow`，但它仍然无法初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:35:37.937

`pom.xml`我可以通过更改 your和 your中的一些来使其工作`Config.java`。

将这些行添加到您的`pom.xml`：

```
<project>
    ...
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

并更改某些行的顺序`Config.java`：

```
public class Config {
    public final static String FOO_BAR;

    static {
        InputStream stream = Config.class.getResourceAsStream("/config.properties");
        Properties properties = new Properties();
        try {
            properties.load(stream);
        } catch (IOException e) {
            e.printStackTrace();
            // You will have to take some action here...
        }
        // What if properties was not loaded correctly... You will get null back
        FOO_BAR = properties.getProperty("foo.bar");
    }

    public static void main(String[] args) {
        System.out.format("FOO_BAR = %s", FOO_BAR);
    }
} 
```

运行时输出`Config`：

```
FOO_BAR = stackoverflow 
```

**免责声明**

我不确定您设置这些静态配置值的目的是什么。我只是让它工作。

* * *

**评论后编辑**

添加了一个简单的 JUnit 测试`src/test/java/`：

```
package com.stackoverflow;

import org.junit.Test;

import static org.junit.Assert.assertEquals;

/**
 * @author maba, 2012-09-25
 */
public class SimpleTest {

    @Test
    public void testConfigValue() {
        assertEquals("stackoverflow", Config.FOO_BAR);
    }
} 
```

这个测试没有问题。

# c - 指针数组的动态分配

> ID：12579719
> 
> 赞同：7
> 
> 时间：2012-09-25T09:11:32.560
> 
> 标签：c, pointers, segmentation-fault, malloc

以下代码给出了分段错误。我不知道为什么。请参见..

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int **ptr;
    int *val;
    int x = 7;
    val = &x;
    *ptr = (int *)malloc(10 * sizeof (*val));
    *ptr[0] = *val;
    printf("%d\n", *ptr[0] );

    return 0;
} 
```

在使用 gdb 进行调试时，它说：

```
Program received signal SIGSEGV, Segmentation fault.

0x0804843f in main () at temp.c:10

*ptr = (int *)malloc(10 * sizeof (*val)); 
```

任何有关此事的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T09:17:30.490

```
int **ptr; 
*ptr = (int *)malloc(10 * sizeof (*val)); 
```

第一条语句声明了一个双指针。
第二个取消引用指针。为了能够取消引用它，指针应该指向一些有效的内存。它不会因此出现段错误。

如果您需要为指针数组分配足够的内存，您需要：

```
ptr = malloc(sizeof(int *) * 10); 
```

现在`ptr`指向一个足够大的内存来保存`10`指向`int`.
现在可以使用`ptr[i]`where 访问每个本身是指针的数组元素，

```
i < 10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:19:22.793

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int **ptr;
    int x;

    x = 5;

    ptr = malloc(sizeof(int *) * 10);
    ptr[0] = &x;
    /* etc */

    printf("%d\n", *ptr[0]);

    free(ptr);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:34:18.990

看下面的程序，也许有助于更好地理解。

```
#include<stdio.h>
#include <stdlib.h>
int main(){

/* Single Dimention */

int *sdimen,i;
sdimen = malloc ( 10 * sizeof (int));
/* Access elements like single diminution. */
sdimen[0] = 10;
sdimen[1] = 20;

printf ("\n.. %d... %d ", sdimen[0], sdimen[1]);

/* Two dimention ie: **Array of pointers.**  */

int **twodimen;

twodimen = malloc ( sizeof ( int *) * 10);

for (i=0; i<10; i++) {
  twodimen[i] = malloc (sizeof(int) * 5);

}

/* Access array of pointers */

twodimen[0][0] = 10;
twodimen[0][3] = 30;
twodimen[2][3] = 50;

printf ("\n %d ... %d.... %d ", twodimen[0][0], twodimen[0][3], twodimen[2][3]);
return 0;
} 
```

希望这可以帮助.. ;）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T07:58:01.850

从概念上讲，如果您正在使用 **ptr，那么您需要为 ptr 和 *ptr 分配内存以防御 **ptr。

但是在你的情况下，你只为*ptr分配内存，如果你的编译器足够聪明，它为ptr（一个指针位置）分配内存以链接*ptr，因此它可以链接ptr-> *ptr->* *ptr.Hence你没有得到 Seg Fault。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-20T11:19:16.413

# 包括

# 包括

```
int main()    
{    
    int **ptr;    
    int *val;    
    int x = 7;    
    val = &x;    
    ptr = (int**)malloc(sizeof(int**));    
    *ptr = (int *)malloc(10 * sizeof (*val));    
    *ptr[0] = *val;    
    printf("%d\n", *ptr[0] );    
    return 0;    
} 
```

上面会工作。您也可以找到差异并了解原因。

最重要的是，您在没有为其分配内存的情况下取消引用 **ptr。

# dependency-injection - 无法通过 DI 覆盖路由

> ID：12579721
> 
> 赞同：0
> 
> 时间：2012-09-25T09:11:38.947
> 
> 标签：dependency-injection, zend-framework2, zfcuser

我正在尝试使用[akrabat 的方法](http://akrabat.com/zend-framework-2/overriding-module-configuration-in-zf2/)覆盖 ZfcUser 提供的路由，但它似乎没有任何效果。我首先将路由从`/user`to 重新设置为基础，`/users`但稍后会想要添加其他路由（如果我能做到这一点应该很简单）。

我的 DI 配置：

```
return [ 
    'di' => [
        'instance' => [
            'Zend\Mvc\Router\RouteStack' => [
                'parameters' => [
                    'routes' => [ 
                        'zfcuser' => [
                            'options' => [
                                'route' => '/users'
                            ]   
                        ]   
                    ]   
                ]   
            ]   
        ]   
    ]   
]; 
```

自从这篇博文以来，我是否犯了一个明显的错误或为此更改了配置结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:30:37.340

您将从自己的模块中覆盖配置。

```
'router' => array(
    'routes' => array(
         'zfcuser' => array(
              //...
         )
    )
) 
```

虽然如果我是正确的，完整的 DI 路径应该仍然有效......同样重要的是，您的模块在 zfcUser-Module 之后加载。因此，在您的 application.config.php 中，请确保您的模块命名空间在 zfcUser 之后列出。由于数组只是根据加载时间被覆盖^^

# excel - 在另一台机器上运行时编译错误

> ID：12579722
> 
> 赞同：0
> 
> 时间：2012-09-25T09:11:42.513
> 
> 标签：excel, vba, compiler-errors

我的工作簿有问题。它在我的机器上运行良好，但是当它由其他人运行时，它会出现错误消息“编译错误找不到项目或库”的问题——事实上，它是在 Mid$ 字符串命令上执行的！

有谁知道这可能是什么原因？他们在某个地方需要设置吗？代码是用 Excel 2010 编写的，它们正在运行 Excel 2010

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:16:52.063

这是在您缺少参考时引起的。在抛出错误的机器上查看工具 > 参考。您应该看到某些引用以 MISSING 为前缀。

这些库需要安装在其他机器上才能使用它们，或者，如果它们具有您正在使用的参考的早期版本，您可以尝试后期绑定。

如果以上都不起作用，我在机器上安装失败时遇到了这个问题。没有任何引用丢失，但在打开 Excel 时（通常不相关的）应用程序会陷入失败的安装循环。如果发生这种情况，您需要纠正失败的安装。

# javascript - 如何在 Javascript 中设置隐式对象响应

> ID：12579723
> 
> 赞同：0
> 
> 时间：2012-09-25T09:11:42.060
> 
> 标签：javascript, jsp

我想在 Javascript 中移动以下代码：

```
response.setHeader("Content-disposition:", "attachment; filename="+file); 
response.setContentType("application/vnd.ms-excel"); 
response.setCharacterEncoding("UTF-8"); 
```

请建议如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:16:06.013

您不能为通过 Javascript 下载的文件设置响应标头。您的服务器将不得不这样做（或者浏览器需要能够自己找出它，例如从 URL 中的文件名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:16:28.557

您正在尝试设置 HTTP 标头。你不能用 Javascript 做到这一点。

用户浏览器在解释 HTML 之前接收和解释 HTTP 标头，这是在解释任何嵌入式 Javascript 之前完成的，这是在执行任何 Javascript 之前完成的。你可以用 Javascript 做任何事情的时刻已经太晚了，无法编辑任何 HTTP 标头。

你想解决什么问题？也许我们可以想出一个不同的解决方案。

# postgresql - PostgreSQL 连接以使用 generate_series 对表进行非规范化

> ID：12579724
> 
> 赞同：3
> 
> 时间：2012-09-25T09:11:44.487
> 
> 标签：postgresql, join, denormalization, generate-series

我有这张桌子：

```
CREATE TABLE "mytable"
(  name text,  count integer );
INSERT INTO mytable VALUES ('john', 4),('mark',2),('albert',3); 
```

我想以这种方式“去规范化”行：

```
SELECT name FROM mytable JOIN generate_series(1,4) tmp(a) ON (a<=count) 
```

所以每个名字的行数等于计数列：我有 4 行 john，2 行 mark，3 行 albert。但是如果我不知道最高计数（在本例中为 4），我将无法使用 generate_series() 函数。有没有办法在不知道 MAX(count) 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:18:16.653

```
select name, 
       generate_series(1,count)
from mytable; 
```

集合返回函数可以在`select`列表中使用，并将与从基表中检索到的行进行交叉连接。

我*认为*这是一种未记录的行为，将来可能会消失，但我不确定（我记得在邮件列表中对此进行了一些讨论）

[SQLFiddle 示例](http://sqlfiddle.com/#!1/05773/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:01:01.123

```
DROP TABLE ztable ;
CREATE TABLE ztable (zname varchar, zvalue INTEGER NOT NULL);

INSERT INTO ztable(zname, zvalue) VALUES( 'one', 1), ( 'two', 2 ), ( 'three', 3) , ( 'four', 4 );

WITH expand AS (
        WITH RECURSIVE zzz AS (
        SELECT 1::integer AS rnk , t0.zname
        FROM ztable t0
        UNION
        SELECT 1+rr.rnk , t1.zname
        FROM ztable t1
        JOIN zzz rr ON rr.rnk < t1.zvalue
        )
        SELECT zzz.zname
        FROM zzz
        )
SELECT x.*
FROM expand x
        ; 
```

# documentation - Doxygen 如何避免“此行有多个标记”

> ID：12579730
> 
> 赞同：2
> 
> 时间：2012-09-25T09:12:16.337
> 
> 标签：documentation, doxygen

我有两个同名但位于两个不同目录中的文件。

```
 graphic_test ---semLib.c
               |
               |
               -- vxWorksApi---semLib.c 
```

我想用 Doxygen 构建一个 Html。这是文件 semLib.c 的标题

```
 /**
 * @file    semLib.c
*/ 
```

我收到了这条信息

```
 Multiple markers at this line
        - the name `semLib.c' supplied as the second argument in the \file statement matches the following input files: /home/linuxdev/
         Linux_Development_Workspace/graphic_tests/graphic_test/semLib.c /home/linuxdev/Linux_Development_Workspace/graphic_tests/vxWorksApi/semLib.c
        - Line breakpoint: semLib.c [line: 2] 
```

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:48:50.567

从[命令的](http://www.doxygen.nl/manual/commands.html#cmdfile)[doxygen 文档`\file`](http://www.doxygen.nl/manual/commands.html#cmdfile)（强调我的）：

> `\file`
> 
> 表示注释块包含名称为 的源文件或头文件的文档`<name>`。**如果单独的文件名不是唯一的，则文件名可能包括（部分）路径。**

所以尝试在适当的文件中使用`\file semLib.c`和。`\file vxWorksApi/semLib.c`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T21:58:38.093

我遇到了同样的问题，进行上述更改仍然无效：“所以尝试在适当的文件中使用 \file semLib.c 和 \file vxWorksApi/semLib.c。”

我的情况有所不同，因为文件位于单独但平行的文件夹中，这对我有用：\file xdir/semLib.c 和 \file ydir/semLib.c 在适当的文件中。

出于您的目的，请尝试在适当的文件中为以下两者添加完整路径或部分路径：\file adir/xdir/semLib.c 和 \file adir/ydir/semLib.c。

# java - 在 Android 应用程序中推送通知

> ID：12579731
> 
> 赞同：0
> 
> 时间：2012-09-25T09:12:18.883
> 
> 标签：java, android, push-notification

我已经`Listview`使用数据库中的soap开发了一个应用程序。现在在我`WebService`的`MySQL`数据库中插入了一个订单意味着这个（插入新订单）通知消息显示在我的android设备上。现在我单击通知消息意味着运行应用程序的时间并`Listview`在我的数据库中插入每个新订单时自动成功显示`MySQL`。这里使用什么方法????请帮助我。

这是我的`RetailerActivity.java`代码：

```
public class RetailerActivity extends Activity {
ListView list;
private static final String SOAP_ACTION = "http://xcart.com/customerData1";
private static final String METHOD_NAME = "customerData1";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://192.168.1.168:8089/XcartLogin/services/RetailerWs?wsdl";
private static final String KEY_STATUS = "status";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");
        list=(ListView)findViewById(R.id.list);

        list.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1,resultArr));
        list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) { 

                String status =  parent.getItemAtPosition(position).toString();

                String[] status1  = status.split(" ");

                 String StrStatus = status1[1].toString();

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_STATUS, StrStatus);

                startActivity(in);            

            }
        });     
    } 

    catch (Exception e) {
        e.printStackTrace();
    }
  }
 } 
```

请在这里`Listview`成功显示。但是新订单已插入我的数据库中，这意味着插入新订单的时间`Notification`消息会显示在android设备上。现在我必须单击通知消息，这意味着它正在显示更新`Listview`。我该怎么办？ ？？？？？？我必须在这里使用什么方法？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:31:41.420

如果您在 ListView 的新数据中获取数据，那么我认为您唯一需要做的就是

`adapter.notifyDataSetChanged();`//`adapter`是`ArrayAdapter`.

# c++ - 如何将字符数组转换为 LPCTSTR

> ID：12579732
> 
> 赞同：0
> 
> 时间：2012-09-25T09:12:18.413
> 
> 标签：c++

> **可能重复：**
> [c 中的字符数组到 LPCTSTR 转换](https://stackoverflow.com/questions/976568/char-array-to-lpctstr-conversion-in-c)
> [如何将 LPCSTR 字符串转换为 LPCTSTR 字符串？](https://stackoverflow.com/questions/1642494/how-can-convert-lpcstr-string-into-lpctstr-string)

已经有很多可用的材料，但我是 C++ 新手，所以我无法正确理解它们。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:16:16.950

谷歌给了我[这个链接](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)，有很多信息。

类型名 LPCTSTR 可以分类为：

```
LP - Pointer
C - Constant
T = TCHAR
STR = String 
```

根据项目设置，LPCTSTR 将映射到 LPCSTR (ANSI) 或 LPCWSTR (Unicode)。

类型名 LPCSTR 可以分类为：

```
LP - Pointer
C - Constant
STR = String 
```

STR 与 char* 相同

类型名称 LPCWSTR 可以分类为：

```
LP - Pointer
C - Constant
WSTR - Wide character String 
```

这里 WSTR 是 wchar_t* 或宽字符（2 字节字符）

最后但并非最不重要的是[这篇](http://support.microsoft.com/kb/138813)关于如何进行转换的文章。如您所见，除了简单的类型转换之外，还有更多内容。

# iphone - 以编程方式在 CircleImage 上创建 UIButton

> ID：12579733
> 
> 赞同：5
> 
> 时间：2012-09-25T09:12:19.783
> 
> 标签：iphone, ios, xcode, geometry, obshapedbutton

`UIButtons`我需要在圆形图像上创建拱形。（O/p 需要看起来像同心圆），

目前我正在使用 5 张图像，但将来我可能会添加更多图像，动态我需要用添加的图像填充圆形图像。

我有一段示例代码，O/P 是下图

```
int numberOfSections = 6;
    CGFloat angleSize = 2*M_PI/numberOfSections;
 for (int j = 0; j < numberOfSections; ++j) {
        UIButton *sectionLabel = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 150.0f, 2.0f)];
sectionLabel.backgroundColor = [UIColor redColor];
 sectionLabel.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
        sectionLabel.layer.position = CGPointMake(container.bounds.size.width/2.0, container.bounds.size.height/2.0); // places anchorPoint of each label directly in the center of the circle.
        sectionLabel.transform = CGAffineTransformMakeRotation(angleSize*j);
        [container addSubview:sectionLabel];
    } 
```

![以上代码的图像](../Images/67c39cff0fb50cdd7fd93d94d2e16522.png)

我试过这段代码，O/P 是下图

```
 int numberOfSections = 5;
    CGFloat angleSize = 2*M_PI/numberOfSections;
    for (int j = 0; j<numberOfSections; ++j) {
        UIImage *imageframe = [imagesArray objectAtIndex:j];
OBShapedButton *button = [[OBShapedButton alloc] initWithFrame:CGRectMake(0.0f, 150.0f, 150.0f, 128.0f)];
button.transform = CGAffineTransformMakeRotation(angleSize*j);
[container addSubview:button];
} 
```

![第二张图片](../Images/1ae3d517bcf136ec6acb7b2225aa4b0a.png)

我需要如下图所示的输出 ![第三张图片](../Images/5f1250ad2907dda5ff0eee5d5ad45e1a.png)

我怎样才能做到这一点

我尝试了 Sarah Zuo 的代码后的 O/P

![萨拉佐码](../Images/d17a5928c6238bbcb565d4d8b0e79594.png)

相同宽度和高度的按钮![Sarah Zuo 代码第二个答案](../Images/f988e8ea66ba2426a65668dea9a745eb.png)
AnyKind of Help 更受赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:47:22.330

我只能回答最后一部分，

如果您能够获取按钮的图像，那么您可以参考[本教程](http://iphonedevelopment.blogspot.in/2010/03/irregularly-shaped-uibuttons.html)。这可能会帮助你。前提是您形成的图像具有透明背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:57:57.537

```
float radius = container.bounds.size.width / 2;
int numberOfSections = 5;
CGFloat angleSize = 2*M_PI/numberOfSections;
for (int j = 0; j<numberOfSections; ++j) {
    UIImage *imageframe = [imagesArray objectAtIndex:j];
    OBShapedButton *button = [[OBShapedButton alloc] initWithFrame:CGRectMake(0.0f, 150.0f, 150.0f, 128.0f)];

    button.transform = CGAffineTransformMakeRotation(2*M_PI-angleSize*j);
    button.center = CGPointMake(radius + radius * sin(angleSize * j) / 2, radius +  radius * cos(angleSize * j) / 2);
    [container addSubview:button];
} 
```

试试这个代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:18:29.893

您可以改用您的`UIImageView`。您可以给不同`tag`的图像视图并添加[Gesture Recognizer](https://stackoverflow.com/questions/3907397/gesturerecognizer-on-uiimageview)。现在您可以在图像视图上获得触摸事件，例如按钮单击事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T06:12:29.843

如果所有按钮的图像看起来都像一个（相同方向），则变换值可能有效。

```
button.transform = CGAffineTransformMakeRotation(2*M_PI-angleSize*j);
button.center = CGPointMake(radius + radius * sin(angleSize * j) / 2, radius +  radius * cos(angleSize * j) / 2); 
```

![按钮切片](../Images/e09c21d39c031cbfbff62562d49a94ac.png)

# python - 访问同一字典中的字典成员

> ID：12579749
> 
> 赞同：4
> 
> 时间：2012-09-25T09:13:23.267
> 
> 标签：python, syntax, dictionary

我正在尝试做这样的事情：

```
_dict = {"foo" : 1234,
         "bar" : _dict["foo"] + 1} 
```

似乎无法使语法正确，有没有办法在不使用多个字典或在其他地方定义它们的情况下完成这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T09:15:33.983

`_dict` *定义时*不能访问。Python 首先评估`{...}`dict 文字，然后将其分配给`_dict`. 换句话说，在评估`{...}`dict 文字语句时，`_dict`尚未定义，因此无法访问。

改为这样做：

```
_dict = {"foo" : 1234}
_dict["bar"] = _dict["foo"] + 1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T09:16:46.563

然后您可以从同一个变量分配：

```
foo = 1234
_dict = {
  "foo" : foo,
  "bar" : foo + 1,
} 
```

或者用两个语句来做（仍然是同一个字典）：

```
_dict = { "foo": 1234 }
_dict["bar"] = _dict["foo"] + 1 
```

* * *

如果您可以详细说明您要实现的目标，也许可以找到更优雅的解决方案。通常，当需要`dict`基于另一个定义值时，这是因为这些值是使用参数化操作动态定义的。在这些情况下，有时可以使用列表理解/生成器表达式。例如

```
>>> dict((v, 1234+i) for i, v in enumerate(("foo", "bar")))
{'foo': 1234, 'bar': 1235} 
```

# java - 通过 JFrame 移动 JLabel 的计时器类！为什么 JLabel 文本不能是可变的？

> ID：12579760
> 
> 赞同：2
> 
> 时间：2012-09-25T09:13:52.740
> 
> 标签：java, swing, timer, jframe, jlabel

如果我说，在最后一秒和第三行

```
label.setText("x = "); 
```

标签正在完美移动，但是当我将其更改为

```
label.setText("x = "+ x); 
```

它不动。具体来说，我想查看 JLabel 移动变量**x**时的宽度位置！除此之外，我说`label.setBounds(x,(getHeight()/2),300,300);`将标签的 Y 边界设置为帧大小的一半，但它不在帧的中间？任何的想法？

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JLabel;
import javax.swing.Timer;

import javax.swing.JFrame;

public class myTiemr {

    public static void main(String args[])
    {
        TimeFrame frame = new TimeFrame();
    }
}

class TimeFrame extends JFrame
{
    private static final long serialVersionUID = 1L;
    private int x = 0;
    JLabel label = new JLabel("Here is my label");
    public TimeFrame()
    {
        int d = 10;
        setTitle("My Frame");
        setSize(500,500);
        this.setLocationRelativeTo(null);
        add(label);
        Timer time = new Timer(d,new TimerListener());
        time.start();       
        setVisible(true);
    }
    class TimerListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            if(x>getWidth()){
                x=-100;
            }
            x+=1;
            label.setText("x = "+ x);
            //label.setText("x = ");
            label.setBounds(x,(getHeight()/2),300,300);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:22:36.213

在`TimeFrame`构造函数中，添加：

```
this.setLayout(null); 
```

之后`this.setLocationRelativeTo(null);`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:31:07.420

`label.setText("x = "+ x)`导致文本保持静止但行`label.setText("x = ")`导致标签跨框架移动的原因是`revalidate()`在`JLabel`. 这将导致应用当前布局管理器规则的正确行为（即`BorderLayout`在这种情况下）。

当文本*没有改变*时，`revalidate()`永远不会被调用。

正如@Sébastien Le Callonnec 建议的那样，在框架上设置 no layout 会导致

```
label.setText("x = "+ x) 
```

根据需要移动。

# photo-gallery - dotCMS：相册 - 创建缩略图时出错

> ID：12579763
> 
> 赞同：1
> 
> 时间：2012-09-25T09:14:03.017
> 
> 标签：photo-gallery, dotcms

我尝试在 dotCMS 2.1 中启动相册。但我看不到缩略图和照片。我尝试了两种方法：

1）使用宏

```
#photoGallery('/img/gallery/clenove') 
```

在这种情况下，我看不到缩略图。如果我单击照片，则仅当我以管理员身份登录时才会发生（尽管我检查了用户权限）。

tomcat 日志如下：

> [25/09/12 10:56:54:577 CEST] 错误 image.ThumbnailImage：从 servlet 创建缩略图时出错：找不到 contentlet：c829ebd1-4719-491d-b915-ea2c8bc1f476 lang:1 live:false
> 
> com.dotmarketing.portlets.contentlet.business.DotContentletStateException: 找不到 contentlet: c829ebd1-4719-491d-b915-ea2c8bc1f476 lang:1 live:false at com.dotmarketing.exception.DotRuntimeException.fillInStackTrace(DotRuntimeException.java:33)在 ..

2) 通过内容 -> 图像库 -> 添加新内容，这将显示消息：“文件夹中当前没有图像。” 但在管理中，我可以看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:27:17.400

你确定你发布了图片？

# oracle - 查询将根据列名带来表名

> ID：12579767
> 
> 赞同：0
> 
> 时间：2012-09-25T09:14:20.677
> 
> 标签：oracle, schema

> **可能重复：**
> [Oracle 列查询或搜索](https://stackoverflow.com/questions/1953239/oracle-column-query-or-search)

我需要一个查询，它将在 oracle 中带来包含该列名的表的名称。

**示例：**假设我有`table1`with columns `(a,b)`，`table2`with columns`(b,c)`和`table3`with columns`(a,b,c,d)`所以我需要知道哪些表包含`C`列，所以我需要一个带表名的查询，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:22:02.127

尝试选择`all_tab_columns`：

```
select table_name
from all_tab_columns 
where column_name = 'C' 
and table_name in ('table1','table2','table3') -- optional
and OWNER = 'owner'; -- optional 
```

# sql - 在一个查询中使用两个选择

> ID：12579772
> 
> 赞同：4
> 
> 时间：2012-09-25T09:14:40.537
> 
> 标签：sql, sqlite, select

我有两个 SQL 查询来计算表中的行数`tContentNode`，具体取决于类型 2 或 3。
**查询 1：**

```
SELECT count(*) _countA FROM TCONTENTNODE WHERE type = '2' 
     AND parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5'; 
```

**查询 2：**

```
SELECT count(*) _countB FROM TCONTENTNODE WHERE type = '3' 
     AND parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5'; 
```

现在我想获取`_countA`并`_countB`只使用一个查询的值。如何使用一个查询获得计数。有没有办法做到这一点。我正在使用 SQLite 数据库。

**编辑：** 我想要 和 的值，`_countA`而`_countB`不是一起（不使用`IN`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:23:41.593

我使用以下查询解决了这个问题：-

```
SELECT 
  COUNT(case TCONTENTNODE.type when '2' then 1  end) as _countA,
  COUNT(case TCONTENTNODE.type when '3' then 1  end) as _countB
FROM  TCONTENTNODE 
WHERE TCONTENTNODE.parentid ="02b3abc2-4983-485a-ab09-1a8cb328b9b5"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:17:33.093

没有 SQLite 来确认，但是

```
select count(*), type FROM TCONTENTNODE WHERE (type = '2' or type = '3' )
     AND parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5' group by type 
```

只是为了澄清这将返回

```
count type

23     2
23888  3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:16:44.893

尝试使用`group by`

```
SELECT type,count(*) as cnt
FROM TCONTENTNODE 
WHERE parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5';
group by type 
```

对于两个变量：

```
SELECT 
  COUNT(case TCONTENTNODE.type when '2' then 1 end) as _countA,
  COUNT(case TCONTENTNODE.type when '3' then 1 end) as _countB
FROM  TCONTENTNODE 
WHERE TCONTENTNODE.parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T04:16:14.963

使用 IN 关键字

> 从 TCONTENTNODE WHERE 中选择 count(*) _countB（输入 (3,2) AND parentid ='02b3abc2-4983-485a-ab09-1a8cb328b9b5'）；

# objective-c - 如何通过代码在 ImageViewer 中打开 uiimage？

> ID：12579774
> 
> 赞同：0
> 
> 时间：2012-09-25T09:14:44.563
> 
> 标签：objective-c, uiimage, image-viewer

我在我的 iOS 应用程序中添加了一些图像。现在，当我单击它们时，我想在 iPhone/iPad 图像查看器中打开这些图像。是否可以使用代码？如何？

# c - 为什么“国际货币符号”以空格字符结尾？

> ID：12579783
> 
> 赞同：3
> 
> 时间：2012-09-25T09:15:13.890
> 
> 标签：c, locale

```
// code
#include <stdio.h>
#include <stdlib.h>
#include <locale.h>

#define SIZE 32
const char name[][SIZE] = {"en_US.utf8", "zh_CN.utf8", "zh_HK.utf8", "zh_TW.big5", "fr_BE.iso88591"};

int main(void)
{
    int count = sizeof(name) / SIZE;
    for (int i = 0; i < count; i++)
    {
        setlocale(LC_ALL, name[i]);
        const struct lconv *p = localeconv();
        printf("locale:[%s], currency symbol: [%s]\n", name[i], p->currency_symbol);
        printf("locale:[%s], international currency symbol: [%s]\n", name[i], p->int_curr_symbol); // why a tail space
    }

    return 0;
}

// output
locale:[en_US.utf8], currency symbol: [$]
locale:[en_US.utf8], international currency symbol: [USD ]
locale:[zh_CN.utf8], currency symbol: [?]
locale:[zh_CN.utf8], international currency symbol: [CNY ]
locale:[zh_HK.utf8], currency symbol: [HK$]
locale:[zh_HK.utf8], international currency symbol: [HKD ]
locale:[zh_TW.big5], currency symbol: [NT$]
locale:[zh_TW.big5], international currency symbol: [TWD ]
locale:[fr_BE.iso88591], currency symbol: [EUR]
locale:[fr_BE.iso88591], international currency symbol: [EUR ] 
```

为什么每个“国际货币符号”都以空格字符结尾？我对结果很困惑，谁能给我一些帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:29:14.583

它只是用作分隔符。两个单词之间最常见的分隔符是空格。

> int_curr_symbol 后跟国际货币符号。这必须是一个 4 个字符的字符串，其中包含 ISO 4217 标准定义的国际货币符号（三个字符），后跟一个分隔符。资料来源：[http ://www.tin.org/bin/man.cgi?section=5&topic=LOCALE](http://www.tin.org/bin/man.cgi?section=5&topic=LOCALE)

阅读： http: [//ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_node/libc_111.html](http://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_node/libc_111.html)

# android - 如何使用 xml 解析器将列表视图项图像从一个活动发送到另一个活动

> ID：12579784
> 
> 赞同：0
> 
> 时间：2012-09-25T09:15:14.333
> 
> 标签：android, android-intent

我制作了一个应用程序，在该应用程序中，我从一个（带有图像和几个文本字段）中`weburl`使用检索数据，并且我为另一个活动编写了代码和值显示，但我无法将图像从一个活动发送到另一个活动，但是使用item 发送文本数据。`xmlparsing``listview``onItemClick``listview`

有人可以指导我写一些代码，还有一点描述吗？

这是我的一些代码：

主要活动代码：

```
 public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
         // getting values from selected ListItem
            String title = ((TextView)  view.findViewById
             (R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById
               (R.id.artist)).getText().toString();
            String duration = ((TextView) view.findViewById
              (R.id.duration)).getText().toString();
            String image=((ImageView)view.findViewById
             (R.id.list_image)).getImageMatrix().toString();
            //byte[] array=null;
            //Bitmap bMap = BitmapFactory.decodeByteArray
                     //  (array, 0, array.length);

            // Starting new intent
            Intent in = new Intent
                     (getApplicationContext(),        SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_DURATION, duration);
            in.putExtra(KEY_THUMB_URL, image);
            startActivity(in);

        }
    });     
 }  
     }

    SingleMenuItemActivity Code:-

    public class SingleMenuItemActivity  extends Activity {

// XML node keys
private static final String KEY_TITLE = "title";
private static final String KEY_ARTIST = "artist";
private static final String KEY_DURATION = "duration";
private static final String KEY_THUMB_URL = "thumb_url";
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent

    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);
    String image = in.getStringExtra(KEY_THUMB_URL);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
    ImageView lblImage = (ImageView) findViewById(R.id.image_label);   

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);
        //Getting error in below line
        //the method setImageResource(int) is the type 
        //Image View is not applicable for the argument(string)
    lblImage.setImageResource(image);//(R.drawable.rihanna);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:26:47.163

```
 in.putExtra(KEY_IMAGE, image); 
```

其中图像是 byte[] ..任何图像都可以转换为 bytearray.. 并且在检索时

```
Bitmap bMap = BitmapFactory.decodeByteArray(array, 0, array.length); 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:24:45.250

您不必通过 传递图像`Bundle`，而是传递`image path as String data`和 在每个活动中，无论您需要图像，从该图像路径创建图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:24:30.590

将此图像转换为位图并使用 Intent.putExtra() 将其作为捆绑包传递给下一个活动。

# tridion - 此用户的模拟需要将 DOMAIN\MTSUSER 帐户配置为模拟用户

> ID：12579787
> 
> 赞同：2
> 
> 时间：2012-09-25T09:15:27.710
> 
> 标签：tridion, tridion-2011

当我尝试访问我的自定义应用程序时，我经常在 GUI 中收到以下错误。有时它阻止我在 GUI 中做任何事情。有人可以帮我解决这个问题吗？

我正在使用 Tridion 2011 SP1

**(80040302) 此用户的模拟需要将 DOMAIN\MTSUSER 帐户配置为模拟用户。无法获取用户。无法初始化 TDSE 对象。RESID_4537TDSE Tridion.ContentManager.Security.AuthorizationManager.GetImpersonationUserSettings(String) Tridion.ContentManager.Security.AuthorizationManager.LoadAccessToken(String,String) Tridion.ContentManager.Session..ctor(String,String,UserContext) Tridion。 ContentManager.BLFacade.SystemFacade.InitializeUserContext(UserContext,String,String) UtilitiesTDS.GetUserContext TDSE.Initialize TDSE.User**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:19:27.147

我认为错误很明显。似乎您的应用程序正在运行`DOMAIN\MTSUSER`并且您正在尝试模拟（以登录到 Tridion GUI 的用户身份执行操作）。要使其工作，您应该在其中一个模拟用户下运行您的应用程序`NETWORK SERVICE`，例如，或者您可以`Impersonation Users`在 Tridion MMC 中找到的任何其他用户，否则只需添加`DOMAIN\MTSUSER`到 MMC 中的模拟用户

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:20:58.347

如错误所述，您需要将 DOMAIN\MTSUSER 帐户添加到模拟用户列表

您可以在模拟用户列表下的Tridion MMC 管理单元（又名： **“Sdl Tridion Content Manager Configuration”** ）中找到此选项。

![MMC 管理单元](../Images/c4524ca6d3b8e9af9c13692691d80ced.png)

但是，您应该问自己，您正在与该用户一起执行什么任务，它是正确的帐户吗？

# string - Actionscript 3 重新排列 URL？

> ID：12579788
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:15:30.460
> 
> 标签：string, url, flickr, actionscript-3

我怎样才能得到这个网址：

```
http://api.flickr.com/services/rest/?method=flickr.auth.getFrob&format=rest&api_key=xxx&perms=write&api_sig=xxx 
```

进入：

```
http://api.flickr.com/services/auth/?api_key=xxx&perms=write&frob=xxx&api_sig=xxx 
```

我从 XML 中提取并存储在字符串中的 frob 参数，所以它看起来像

```
String frob;
String originalURL;
//just need to join frob as well remove and rearrange accordingly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:41:02.850

尝试这个：

```
var orgURL:String="http://api.flickr.com/services/rest/?method=flickr.auth.getFrob&format=rest&api_key=xxx&perms=write&api_sig=xxx";
var index:int = orgURL.indexOf("api_key");
var newURL:String="http://api.flickr.com/services/auth/?"+orgURL.substr(index)+"&frob=xxx"; 
```

甚至更简单：

```
var orgURL:String="http://api.flickr.com/services/rest/?method=flickr.auth.getFrob&format=rest&api_key=xxx&perms=write&api_sig=xxx";
var newURL:String="http://api.flickr.com/services/auth/?"+orgURL.substr(orgURL.indexOf("api_key"))+"&frob=xxx"; 
```

可能有一种使用正则表达式的方法，但是这个更容易理解:)

# javascript - jQuery：提取动态加载的 html 的一部分

> ID：12579791
> 
> 赞同：1
> 
> 时间：2012-09-25T09:15:35.933
> 
> 标签：javascript, jquery, ajax

这是在 Firebug 中运行的测试。我正在尝试动态创建一个 jQuery 对象，然后使用类或 id 选择器找到它的一部分。注意 find() 调用如何给出空结果。

```
>>> var testhtml = '<div class="oggi">h</div>'
undefined
>>> $(testhtml)
[div.oggi]
>>> $(testhtml).find(".oggi")
[]
>>> var testhtml2 = '<div id="yggi">hjhj</div>'
undefined
>>> $(testhtml2)
[div#yggi]
>>> $(testhtml2).find("#yggi")
[] 
```

我是否应该将其解释为您无法对未连接到浏览器中主 DOM 树的 html 执行一些 jQuery 操作？还有其他一些技巧可以用来完成这项工作吗？

通过在 html 中创建一个临时 div，在那里加载数据然后执行 find()，我设法获得了更好的效果。

我的实际任务是使用 ajax 加载一段 html，然后将它的不同部分复制到网页中的不同位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:18:02.507

`.find()`用于查找子项，`.filter()`改为使用。

```
var testhtml = '<div class="oggi">h</div>';

// if you want to check it whether has a class, use    
console.log($(testhtml).is(".oggi"));

// or you could use filter to get the element you want.
console.log($(testhtml).filter('.oggi')); 
```

# c# - 是否可以将 Application.Run() 方法置于 catch 中以避免应用程序终止？

> ID：12579796
> 
> 赞同：3
> 
> 时间：2012-09-25T09:15:56.883
> 
> 标签：c#, try-catch

我试图让（我的测试版）应用程序尽可能多地运行，所以我在`try-catch`里面放了另一个`Program.cs`，以防发生一些严重错误并意外关闭应用程序。并且`catch`我重写了`Application.Run()`方法，以便应用程序可以在因任何原因终止后自行恢复。
针对这种特定情况制定这样的计划是否正确？
如果不正确，那么为了保持程序运行，还有什么建议？

这是演示我的意思的示例代码：

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;
using Hossein;
using Pishro.Classes;

namespace Pishro
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            try
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new frmMain());
            }
            catch(Exception exc)
            {
                API.SaveAndShowLog(exc);
                Application.Run(new frmMain());
            }
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:21:56.070

全局处理异常是记录和警报的好主意。

是的，像您这样的自动重启策略可能很有用。但是存在一个风险：如果崩溃**损坏了全局数据结构**，重新启动应用程序可能会产生不可预知的结果，例如静默数据损坏。例如，文件可能仍处于打开和锁定状态。锁可能还没有被释放。静态变量可能处于未定义状态。流氓线程可能仍在运行，不知道应用程序 UI 已被破坏。

我建议您**通过启动应用程序的新进程**来重新启动应用程序。让旧进程死掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:20:58.830

我认为你的问题涉及一个更深层次的问题。我应该抓住所有的例外吗？要继续前进，您可以全部捕获它们。但是所有那些您不期望或不知道的可能异常都可能是错误。

也许您应该尝试在您的应用程序中实现更好的错误处理方法。所以所有的异常都是已知的或预期的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:24:12.850

与其包装`try catch`应用程序的运行方法，不如考虑使用事件处理异常。

```
static void Main()
{
  AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
  Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
  Application.EnableVisualStyles();
  Application.SetCompatibleTextRenderingDefault(false);
  Application.Run(new Form1());
}

static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
  MessageBox.Show("Exception handled");
}

static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
{

} 
```

主要是线程异常是您想要的，但理想情况下 - 您希望设置某种形式的日志记录/向用户标记错误并仍然处置程序，因为它可能导致程序继续处于不合适的状态。请在您的表单和点击事件中放置一个按钮，`throw new Exception("");`然后应该显示消息框。

# php - PHP mkdir（）无法工作

> ID：12579804
> 
> 赞同：1
> 
> 时间：2012-09-25T09:16:40.430
> 
> 标签：php, path, directory, mkdir

这是我的代码；显然，我已经重命名了目录。;)

```
$thepath = "/var/www/vhosts/sub.domain.co.uk/web/apps/storage/".$userclient."/evidence/".$scid."/".$doctype."/";
$testdir = is_dir($thepath); 
if ($testdir == false) {
    mkdir($thepath, 0777);
} 
```

在这种情况下，以下变量适用；

```
$userclient = '000';
$scid       = '9263';
$doctype    = 'Insurance Policy'; 
```

所以，路径应该是；

```
/var/www/vhosts/sub.domain.co.uk/web/apps/storage/000/evidence/9263/Insurance Policy/ 
```

我知道这行得通，在我的代码中的其他任何地方，我都有其他应用程序使用几乎相同的设置。但是上面的那个似乎在 /evidence/ 上出错了——它将权限设置为 755，但是如果我将证据设置为 777（八进制），那么每次运行代码时都会创建目录。

我收到以下错误消息；

```
if (!@mkdir($thepath)) {
    $error = error_get_last();
    echo $error['message'];
}
mkdir(): No such file or directory 
```

任何帮助将不胜感激，我必须在星期四之前完成这个应用程序 - 这个文件上传部分是最后一点！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:19:02.520

PHP 找不到要在其中创建其他目录的目录。

您需要将`$recursive`参数设置为 true：

```
mkdir($thepath, 0777, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:18:53.283

也许您也想尝试`mkdir($path,$mode,true)`创建缺失的链接？

# ios - UIActivityViewController。如何定制它？

> ID：12579805
> 
> 赞同：7
> 
> 时间：2012-09-25T09:16:39.840
> 
> 标签：ios, objective-c, ipad, ios6

我想`UIActivityViewController`在我的 iPad 应用程序中创建一个，但我在 Google 上找不到任何东西，因为它是仅在 iOS 6 `UIActivityView`中实现的新视图。是用户点击时出现的视图，例如，照片应用程序中的共享按钮。一组活动由活动视图控制器呈现（通过电子邮件发送、在 facebook 上共享、打印 ecc...）。每个活动都由一个图标和一个显示在图标下方的标题表示。现在我想自定义视图中的项目，但我找不到怎么做？有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:37:49.807

没有必要子类化`UIActivityViewController`。相反，创建您自己的[`UIActivity`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)子类，然后`UIActivityViewController`使用您的活动数组进行实例化：

```
- (id)initWithActivityItems:(NSArray *)activityItems applicationActivities:(NSArray *)applicationActivities; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:53:22.630

[REActivityViewController](https://github.com/romaonthego/REActivityViewController)可能是您正在寻找的。它还允许自定义比 UIActivityViewController 更多。尝试一下。:)

# brightcove - Brightcove - 以编程方式更改或隐藏视频名称

> ID：12579814
> 
> 赞同：0
> 
> 时间：2012-09-25T09:16:55.097
> 
> 标签：brightcove

我可以以编程方式更改或隐藏 Brightcove 视频播放器的视频名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:58:10.673

是的，您可以使用 Brightcove Media API 的 update_video 方法更改视频的名称（又名 display_name）：http: [//docs.brightcove.com/en/media/samples/update_video.html](http://docs.brightcove.com/en/media/samples/update_video.html)

如果您想在客户端更改名称而不是永久名称，可以按照以下示例更改视频名称：[http ://docs.brightcove.com/en/smart-player-api/samples/更新-media.html](http://docs.brightcove.com/en/smart-player-api/samples/update-media.html)

# android - 在 ARM 上的 start_kernel 之前调试内核引导流程

> ID：12579821
> 
> 赞同：1
> 
> 时间：2012-09-25T09:17:09.457
> 
> 标签：android, linux-kernel, arm, boot, bootloader

在调用 start_kernel() 之前调试引导流程的不同方法是什么？我指的是**head.S 和相关汇编文件**中的代码。***由于 Trace32 不可用，使用串行端口***的调试技术会很有帮助。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:29:13.550

您的目标系统上是否有任何 LED？我使用 LED 来帮助我追踪引导流程的去向和挂起位置。也许你可以试试，通过控制 GPIO 很简单。

# c# - 获取 kinect 的特定深度值

> ID：12579823
> 
> 赞同：4
> 
> 时间：2012-09-25T09:17:14.970
> 
> 标签：c#, xna, kinect, depth-buffer

我目前正在尝试使用 XNA 中的 kinect 进行手/手指跟踪。为此，我需要能够指定我希望我的程序渲染的深度范围。我环顾四周，我看不到这是如何完成的。据我所知，kinect 的深度值仅适用于在 depthStream 中找到的预设范围。

我想做的是让它模块化，这样我就可以改变我的 kinect 渲染的深度范围。我知道这之前已经失败了，但我在网上找不到任何可以告诉我如何做到这一点的东西。

有人可以帮我吗？

我已经可以使用kinect渲染标准深度视图，并且我为转换深度帧所做的方法如下（我感觉这里需要设置一些东西）

```
 private byte[] ConvertDepthFrame(short[] depthFrame, DepthImageStream depthStream, int depthFrame32Length)
    {
        int tooNearDepth = depthStream.TooNearDepth;
        int tooFarDepth     = depthStream.TooFarDepth;
        int unknownDepth    = depthStream.UnknownDepth;
        byte[] depthFrame32 = new byte[depthFrame32Length];

        for (int i16 = 0, i32 = 0; i16 < depthFrame.Length && i32 < depthFrame32.Length; i16++, i32 += 4)
        {
            int player      = depthFrame[i16] & DepthImageFrame.PlayerIndexBitmask;
            int realDepth   = depthFrame[i16] >> DepthImageFrame.PlayerIndexBitmaskWidth;

            // transform 13-bit depth information into an 8-bit intensity appropriate
            // for display (we disregard information in most significant bit)
            byte intensity = (byte)(~(realDepth >> 8));

            if (player == 0 && realDepth == 00)
            {
                // white 
                depthFrame32[i32 + RedIndex]    = 255;
                depthFrame32[i32 + GreenIndex]  = 255;
                depthFrame32[i32 + BlueIndex]   = 255;
            }

         // omitted other if statements. Simple changed the color of the pixels if they went out of the pre=set depth values

            else
            {
                // tint the intensity by dividing by per-player values
                depthFrame32[i32 + RedIndex]    = (byte)(intensity >> IntensityShiftByPlayerR[player]);
                depthFrame32[i32 + GreenIndex]  = (byte)(intensity >> IntensityShiftByPlayerG[player]);
                depthFrame32[i32 + BlueIndex]   = (byte)(intensity >> IntensityShiftByPlayerB[player]);
            }
        }

        return depthFrame32;
    } 
```

我有一种强烈的预感，我需要更改 int player 和 int realDepth 值，但我不能确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T03:15:47.100

Kinect for Windows Toolkit 1.8.0 中有一个名为[Adaptive UI-WPF](http://msdn.microsoft.com/en-us/library/dn435685.aspx)的新示例。它直接在交互区域查看器部分处理这个问题。看一下调整近边界和远边界的代码。它应该对您的情况有所帮助。.

# asp.net - 在页面的 css 部分插入内联服务器标签的正确方法是什么？

> ID：12579824
> 
> 赞同：5
> 
> 时间：2012-09-25T09:17:24.690
> 
> 标签：asp.net, css, syntax-highlighting, visual-studio-2012, inline

我正在尝试在页面上放置一些内联服务器标签，以便使用 Visual Studio 2012 获取图像的正确路径。

我这样做是这样的：

```
<style type="text/css">
.someclass
{
    background-image: url(<%=Url.Content("~/Content/Images/messageIcon.gif")%>);
}
</style> 
```

问题是，一旦编写完成，整个样式部分就会失去使用 VS2012 编辑器的颜色格式。是否有一种不同的方式来做到这一点（或 VS2012 中的一个选项），这样我就不会丢失颜色和缩进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:27:41.417

这是 CSS 样式的 Visual Studio Highlight 问题或功能。尝试使用已知的服务器相对 URL。

如果您需要在 css 样式中插入服务器端代码，您可以使用`style`html-markup 中的属性。例如：

```
<div class="beautiful-button" style="background-image: url('<%=Url.Content("~/Content/Images/messageIcon.gif")%>')">
...
</div> 
```

如果您不喜欢此代码，或者您需要在不同的地方多次使用它，最好的方法是使用公共属性 URL 创建您自己的服务器端控件（例如）。最后它看起来像这样：

```
<asp:MyOwnControl runat="server" class="beautiful-button" URL="~/Content/Images/messageIcon.gif" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:43:39.060

Visual Studio 丢失其格式的原因是您正在混合 css 和服务器端代码，如下所示。

```
<style type="text/css"> 
.someclass  
{     
    background-image: url(<%=Url.Content("~/Content/Images/messageIcon.gif")%>);
}    
</style> 
```

您应该将您的 css 与您的代码分开。

图像路径是相对于 css 文件的位置的，所以像下面这样的 css 是正确的，因此您不需要使用 Url.Content(~) 制定的应用程序路径

```
.someclass  
{     
     background-image: url(../Images/messageIcon.gif); 
} 
```

# javascript - 对象属性不可访问，但有

> ID：12579826
> 
> 赞同：0
> 
> 时间：2012-09-25T09:17:30.693
> 
> 标签：javascript

我有一个数据存储对象，它基本上将数据存储在其“属性”项中。

```
datastorage = {
    attributes: {
        51: {/*data, another object*/}
    }
} 
```

当我将 datastorage.attributes 记录到控制台时，我得到了预期的结果。但是，当我尝试访问属性 [51] 或属性 ['51'] 甚至将名称更改为属性 ['cert_51'] 时，它将始终未定义。

我什至无法遍历 datastorage.attributes，要么它甚至不迭代一次，要么我得到的只是 datastorage.attributes 对象一遍又一遍。

```
$.each(datastorage.attributes, function (name, content) {
    console.log(name, content, this);
    // -> 0, {51:{..}}, {51:{..}
    $.each(this, function () {
         console.log(this);
         // -> {51:{..}}
    });
}); 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:22:42.097

我解决了这个问题。我正在异步加载有问题的属性并忘记了这一点。我实现了一个回调，一旦设置，它将提供属性的值。

# ruby-on-rails - 在 link_to do 函数中添加 css

> ID：12579829
> 
> 赞同：1
> 
> 时间：2012-09-25T09:17:35.173
> 
> 标签：ruby-on-rails

我正在尝试使 link_to 函数附加一个 css 类，

我的代码是这样的：

```
<%= link_to newGame do%>
<%= image_tag newGame.image_url.to_s %>
<% end %> 
```

它将图像链接到其内容，但我需要在链接中添加一个 class="thumbnail"，

IE：

```
<a href="/games/:id" class="thumbnaill> 
```

而不是它当前产生的：

```
<a href="/games/:id"> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:30:24.173

参考[链接到](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/UrlHelper.html#M002140)

```
<%= link_to newGame, class: 'thumbnail'  do %> 
```

使用较旧的参数样式时要小心，因为需要额外的文字哈希：

```
<%= link_to "Articles", { :controller => "articles" }, :id => "news", :class => "article" %>
#Gives <a href="/articles" class="article" id="news">Articles</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:21:08.067

你可以做

```
<%= link_to newGame, class: 'thumbnail' do %>
  <%= image_tag newGame.image_url.to_s %>
<% end %> 
```

# enyo - enyo 中的操作栏

> ID：12579834
> 
> 赞同：0
> 
> 时间：2012-09-25T09:17:49.837
> 
> 标签：enyo

我想在 enyo.js 中创建一个操作栏。这在每个页面顶部的应用程序的所有页面中都很常见。请帮助我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:21:01.130

我会使用 onyx.Toolbar 作为我的第一个组件，然后使用 enyo.Panels 来保存我想给用户的“页面”或视图。然后只有面板视口发生变化，工具栏始终存在。

# ios5 - 使用 Storyboard 自定义 UITableViewCell

> ID：12579844
> 
> 赞同：3
> 
> 时间：2012-09-25T09:18:12.363
> 
> 标签：ios5, uitableview, storyboard

我正在尝试使用情节提要制作自定义单元格。我已经用基本单元测试了我的程序并且它有效。现在我创建了一个名为 NewsCell 的新类，它包含自定义单元格中的不同标签。我还使单元格成为 NewsCell 的子类。小区标识符是“NewsCell”。

这是 cellForRowAtIndexPath: 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NewsCell *cell = (NewsCell *)[tableView dequeueReusableCellWithIdentifier:@"NewsCell"]; //signal : SIGABRT
    News *info = [self.news objectAtIndex:indexPath.row];
    cell.titreLabel.text = info.titre;
    cell.descriptionLabel.text = info.description;
    return cell;
} 
```

当我运行我的应用程序时，它在第一行以信号信号 SIGABRT 崩溃。我确信我在标签和表格视图单元之间建立了正确的连接。

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“NIB 数据无效。”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T15:21:14.370

我有同样的问题。事实证明，我在 Storyboard 文件的 Interface Builder Document 窗格中选中了“Use Autolayout”。这在 iOS 5 上运行时会引发“无效的 NIB”错误，因为自动布局仅在 iOS 6 上受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:40:28.580

您尚未为单元创建实例。尝试为单元创建实例。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    NewsCell *cell = (NewsCell *)[tableView dequeueReusableCellWithIdentifier:@"NewsCell"]; //signal : SIGABRT

     if (cell == nil) {
            cell = [[[NewsCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }
    News *info = [self.news objectAtIndex:indexPath.row];
    cell.titreLabel.text = info.titre;
    cell.descriptionLabel.text = info.description;
    return cell;
} 
```

# javascript - 如何将参数从点击传递到实时功能？

> ID：12579845
> 
> 赞同：0
> 
> 时间：2012-09-25T09:18:13.720
> 
> 标签：javascript, jquery

我有两个功能点击和生活。我想将一个参数从 click 传递给 live。我尝试了类似下面的方法，但它不起作用。

```
jQuery(document).ready(function(){
  var test = 'test' ;                               
  jQuery('.item a').click(test);//pass an argument from here
});

jQuery('.item a').live('click',function(e,test) {
  alert(test);//access argument here
}); 
```

这可能吗？

更新：

```
function init() {   
    //When you click on a link
    jQuery('.item a').live('click',function(e,test) {
        alert(test);
    });
}
jQuery(document).ready(init);
jQuery(document).ready(function(){
    var test= 'test';
    jQuery('.item a').trigger('click', test);   
}); 
```

我期待一个警报。

编辑2：

```
jQuery(document).ready(function(){
    (function($){
        $('.item').each(function() {
            $(this)[0].oncontextmenu = function() { return false }
          });
        $.fn.ctrl = function(key, callback) {
            if(typeof key != 'object') key = [key];
            callback = callback || function(){ return false; }
            return $(this).keydown(function(e) {
                var ret = true;
                $.each(key,function(i,k){
                    if(e.keyCode == k.toUpperCase().charCodeAt(0) && e.ctrlKey) {
                        ret = callback(e);
                    }
                });
                return ret;
            });
        };

        $.fn.disableSelection = function() {
            $(window).ctrl(['a','s','c']);
            return this.each(function() {           
                $(this).attr('unselectable', 'on')
                       .css({'-moz-user-select':'none',
                            '-o-user-select':'none',
                            '-khtml-user-select':'none',
                            '-webkit-user-select':'none',
                            '-ms-user-select':'none',
                            'user-select':'none'})
                       .each(function() {
                            $(this).attr('unselectable','on')
                            .bind('selectstart',function(){ return false; });
                       });
            });
        };
        $('.item').disableSelection();
    })(jQuery);             

}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:21:05.733

您可以改用`trigger()`它，它允许您传递参数；

```
jQuery(document).ready(function(){
  var test = 'test' ;                               
  jQuery('.item a').trigger('click', test); //pass an argument from here
});

jQuery('.item a').live('click',function(e,test) {
  alert(test);//access argument here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:23:48.667

或者您可以使用隐藏字段来存储需要传递的参数，然后在点击功能中读取它

```
jQuery(document).ready(function(){
  var test = 'test' ;
  jQuery('#hiddenID').val(test);
  jQuery('.item a').click(test);//pass an argument from here
});

jQuery('.item a').live('click',function(e,test) {
  var test = jQuery('#hiddenID').val();
  alert(test);//access argument here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:31:06.890

你也可以试试这个

```
jQuery(document).ready(function(){
    var test = 'test' ;                               
    $('.item a').trigger({type:'click', myParam:test}); // pass the event object with param
});

$('.item a').live('click',function(e) {
    alert(e.myParam); //access param here
}); 
```

还要记住`live`不推荐使用[**on**](http://api.jquery.com/on/)。

**更新：**

```
jQuery(document).ready(function(){
    var test= 'test';
    $('.item a').trigger({type:'click', myParam:test});
});
$('.item a').live('click',function(e) {
    alert(e.myParam); //access param here
}); 
```

# php - PHP - 如何限制 curl 的结果

> ID：12579851
> 
> 赞同：0
> 
> 时间：2012-09-25T09:18:28.213
> 
> 标签：php, curl

我使用 php 和 curl 编写了一个代码，它们从 url 返回大量数据。我想限制

使用 curl 来自 url 的响应。

我们的准则是：

```
$ch = curl_init($Url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$content = curl_exec($ch);
curl_close($ch); 
```

谢谢！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:27:56.190

如果你使用`file_get_contents()`你可以很容易地做到这一点：

```
$size = 1000;
$content = file_get_contents($url, false, null, 0, $size); 
```

您可以使用自定义请求`stream_context_create()`并将其作为第三个参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:21:46.720

尝试范围标题：

```
$offset = 0;
$size = 10*1024;

$a = $offset;
$b = $offset + $size-1;

curl_easy_setopt(curlHandle, CURLOPT_HTTPHEADER, array("Range: bytes=$a-$b") ); 
```

这将返回 10KB 的数据。

看到[这个](https://stackoverflow.com/questions/985455/curl-how-to-limit-size-of-get?rq=1)

# wcf - WCF：如何根据 XSD 文件和服务契约生成 WSDL 文件？

> ID：12579853
> 
> 赞同：0
> 
> 时间：2012-09-25T09:18:33.253
> 
> 标签：wcf, xsd, wsdl

我查看了 xsd.exe、wsdl.exe 和 svcutil.exe 实用程序，以找到基于 XSD 文件和服务合同生成 WSDL 文件的方法，但看不到解决方案。

服务合同是这样的：

```
[ServiceContract]
public interface IMessageManager
{
    [OperationContract]
    string ConvertToUpper(string text);
}

public class MessageManager : IMessageManager
{
    public string ConvertToUpper(string text)
    {
        return text.ToUpper();
    }
} 
```

如果有人可以建议如何以任何方式做到这一点，我将不胜感激。

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:47:39.043

我无法理解您的问题，我假设您需要使用 XSD 来提取数据合同，为此尝试 -

[http://wscfblue.codeplex.com/](http://wscfblue.codeplex.com/)

# c++ - 类命名空间？

> ID：12579855
> 
> 赞同：0
> 
> 时间：2012-09-25T09:18:52.217
> 
> 标签：c++, oop, lang

是我还是 C++ 中面向对象范式的实现缺少类命名空间的概念？

这是我的意思的一个例子：

> 文档{页眉{}正文{}页脚{}}

Document 是一个可以有页眉、正文和页脚的对象。

从外部命名空间处理此类对象及其元素的直接方法是

*   文档
*   文档::标题
*   文档::正文
*   文档::页脚

有没有办法在 C++ 中实现这样的命名结构而不限制 Document 类的定义？

1) 命名空间文档 { ... }

这种情况需要在其自己的命名空间内有一个对象类，并且使用 Document::Document 似乎是多余的和无意的。

2) 命名空间 Document { class ... } typedef Document::Document 文档；

这种情况下给出了 document 和 Document::{part}，在区分大小写的情况下，它们可能看起来很奇怪且不相关。

3）类文档{类...}；

这种情况需要在每个嵌套类的定义中包含 Document 标头，并且不允许使最终对象成为其部分的派生对象，因为它们是在其自己的范围内定义的。

4）类文档{类...}；类文档：公共文档{}

这种情况接近预期，但需要额外的类和继承。

！）理想情况下，我想要的是

```
namespace class Document {

class Header;
class Body;
class Footer;

class Document; // linked with the parent namespace as with its own name space

}

Document doc; // ok, resolves Document as a class
Document::{Part} docPart; // ok, resolves Document as namespace 
```

.) 是否有任何其他合理的方式来实现预期目标而无需不合理的额外费用？

我也不完全确定为什么这些琐碎的事情不是标准的方法。:/ 有什么具体原因吗？

**--- 澄清 ---**

为了解决一些提出的问题，

“有什么用？” 1) 普通语言 2) 从语言结构到对象抽象模型的透明映射，反之亦然。

“为什么要从它的各个部分派生出一个对象？” 并非一个对象引入的每个实体都必须是它的一部分。例如，它可以是它的本质。例如：

> 文档 { Skeleton{} Parts { Header {} Body {} Footer {} } }

**--- 抽象框架 ---**

将对象视为一个模块，它的定义可以使用外部符号并引入它自己的一些符号以及它自己的逻辑实体的定义，因为它引入了它们，所以它们应该保持相关。

**- - 观点 - -**

整个模块是一个对象的定义。如果能够在没有任何额外的语言嘲笑的情况下使用它，那就太好了。

=== 分辨率 ===

感谢您的反馈意见。

在 C++ 中有一种方法可以将命名空间名称链接到类之前，我想我会使用

> *ObjectName* { ... Object {} } -> *ObjectName* ::对象，*ObjectName* :: *Part*

在这种情况下构建。它可能没有我想的那么短，但至少足够透明，没有额外的成本，并且可以与前向声明一起使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T09:26:20.867

Your third option - using nested class declarations / definitions, will get you the ideal scope resolution as you want (though it will not involve a single namespace).

```
class Document 
  {
  public:
    class Header
      {
      // Header class declaration here
      };

    class Body
      {
      // Body class declaration here
      };

   class Footer
      {
      // Footer class declaration here
      };

    // Document declaration here.
  }; 
```

Your concerns with that option are:

**Requires including Document header in definition of every nested class**

Yes - the nested classes are inextricably linked to the surrounding class, their implementations will depend on the definition of the surrounding class because it contains the definitions of the nested classes. This is unavoidable.

**Dpesn't allow to make the final object be a derivative of its parts, since they are defined within its own scope.**

What you are trying to do seems to make very little logical sense - you are trying to define something based on its own parts, which is a circular definition. What are you trying to achieve by deriving Document from Header, Body or Footer?

The final line of your question suggests that you find your desired functionality "trivial", but in my opinion and experience it is far from trivial. You seem to be conflating a namespace and a class because of syntactical similarities, but they are entirely different concepts. You have to separate the two in your mind, they have very little overlap besides some scoping effects and scope resolution syntax. Your "Document" must be either a namespace and a class. Pick one ;) (technically it's actually possible to have both a namespace Document and a class Document, but this is likely to be a source of confusion. )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:29:58.610

您的第一个案例完全符合您的要求。没有什么多余的`Document::Document`——它指的是命名空间中的`Document`类`Document`。命名空间中很可能有一个 Document 类，`XML`命名空间中还有另一个`MyCompany`。

您的第二种情况看起来像是试图从根本上破坏使用名称空间的目的。如果您不想使用命名空间，请不要 - 只需使用全局（未指定）命名空间并冒冲突的风险。如果您只想避免`Document::`代码中与您的`Document`类相关的部分，请在该代码中添加`using namespace Document`指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:27:09.683

> 3）类文档{类...}；
> 
> 这种情况需要在每个嵌套类的定义中包含 Document 标头，并且不允许使最终对象成为其部分的派生对象，因为它们是在其自己的范围内定义的。

不，这种设计是最有意义的。我不明白你认为`class`和之间的区别是什么`namespace class`。

```
class Document
{
public:
    class Header
    {
    };

    Header m_header;

    class Body
    {
    };

    Body m_Body;
}; 
```

这个设计有什么问题？您可以通过 访问这些类型`Document::Header`。您可以通过`myDocument.m_header`.

唯一固有的奇怪之处是您不能将类型和成员变量命名为相同的名称，但是有很多方法可以解决这个问题，这实际上是一个表面上的限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T09:27:23.960

您只需将零件类包含在`Document`类中。

```
class Document {
public:
   class Header;
   class Body;
   class Footer;
}; 
```

您可以有效地使用它：

```
Document myDoc;   // Type Document
Document::Header myHeader; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T09:50:09.853

仅仅因为一个`Document` *对象*包含一个`Header` *对象*并不意味着`Header` *该类*应该包含在`Document` *该类*中。至少，通常不会这样做。

我只会在极少数情况下嵌套类；即，当嵌套类是外部类的实现细节，并且不暴露给外部世界时（但即使这样，放弃嵌套也是很常见的）。

顺便说一句，这与 C++ 无关：除了隐藏实现细节之外，类通常很少嵌套。在您的情况下，用于建模对象关系的框架通常不会使用嵌套。相反，你可能有这样的事情：

```
namespace Html {
    class Document;
    class Header;
    class Body;
    // …
} 
```

C++ 尤其使用平面命名空间层次结构，但上述内容同样适用于 C# 或 Java。

最后，要明确解决您的介绍性问题：

> 是我还是 C++ 中面向对象范式的实现缺少类命名空间的概念？

C+ 具有与其他现代 OO 语言相同的概念：一个类形成一个名称空间，用于名称查找，因此您*可以*实现您想要的。但出于上述原因，我认为这不是一个特别理想的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:52:59.360

我不完全清楚你想公开多少嵌套类，但如果它们是 的一部分`Document`，它们可能应该是嵌套类。你的意思的例子，在你的代码的开头，就是在 C++ 中如何做到这一点：

```
class Document
{
public:  //  or not?
    class Header
    {
    };
    class Body
    {
    };
    class Footer
    {
    };
}; 
```

关于我能看到的唯一反对意见是，只关心的实现文件`Document::Header`必须包含整个`Document` 类定义，但我认为这不是一个大问题；如果 `Document::Header`真的不是独立的，那么要求这个似乎是合理的。关于你对这个解决方案的第二个反对意见：你永远不想让一个对象从它的部分派生：a `Document` *hasA* `Header` ; 这不是*isA*关系。

`Header`如果单独使用 et al确实有意义，那么最好的解决方案是在`Document`类之外定义它们，或者给它们更多描述性的名称（例如`DocumentHeader`）或将它们包装在一个特殊的名称空间中（例如`namespace DocumentParts`）。根据它们与 的关系，使用in`Document`可能是有意义的 ，这样它们就可以被称为 or 或。`typedef``Document``DocumentParts::Header``Document::Header`

# asp.net - 避免在字符串中拆分 HTML 标签

> ID：12579857
> 
> 赞同：0
> 
> 时间：2012-09-25T09:18:58.370
> 
> 标签：asp.net

我的网站上有一个定制的新闻页面。如果从数据库返回的字符串超过 400 个字符，则问题是添加“更多”选项。在 400 个字符之后拆分字符串有时可能意味着 HTML 标记可能会被分成两半，或者 html 标记中包含的文本将被拆分，拆分时不会给出正确的外观。

无论如何我可以避免这种情况，还是我完全错了？

我目前正在使用 Literal Control 来显示字符串，如果 string.length > 400 我使用 substring 方法获取前 400 个字符进行显示。如果单击“更多”选项，我将显示完整的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:27:03.927

我会做的是从内容中去除 HTML 标签，然后将其截断为 400 个字符。

```
strContent = Regex.Replace(strContent, "<.*?>", "")

If strContent.Length > 400 Then
   strContent = strContent.Substring(0, 400)
   btnMore.Visibile = True
Else
   btnMore.Visibile = False
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:26:38.843

Strip out the HTML content from your summary string before truncating to 400 characters.

This is the neatest way you can display a short summary, and will prevent any issues with tags left open.

* * *

For info on how to strip, see this SO Post:

[How can I strip HTML tags from a string in ASP.NET?](https://stackoverflow.com/questions/785715/how-can-i-strip-html-tags-from-a-string-in-asp-net)

```
Regex.Replace(htmlText, "<.*?>", string.Empty); 
```

# mysql - When to choose hashed column against composite index

> ID：12579860
> 
> 赞同：4
> 
> 时间：2012-09-25T09:19:04.597
> 
> 标签：mysql, optimization, indexing

I would like to know in which cases a single hashed column with an index should be preferred against using a composite index. In my case i have two tables with approx 1 mio datasets, one of it receives an updated value from the other table (it is an data-import routine). MySQL 5.1 and 5.5 is used in my environments.

Example:

```
CREATE TABLE permanent (
ref_id_1 INT(10),
ref_id_2 INT(10),
ref_id_3 INT(10),
ref_id_4 INT(10),
ref_date DATE,
value INT(10));

CREATE TABLE import (
ref_id_1 INT(10),
ref_id_2 INT(10),
ref_id_3 INT(10),
ref_id_4 INT(10),
ref_date DATE,
value INT(10));

//Option 1
ALTER TABLE import ADD UNIQUE INDEX idx_composite(ref_id_1,ref_id_2,ref_id_3,ref_id_4,ref_date);
//Option 2
ALTER TABLE import ADD hash_col CHAR(32);
UPDATE import SET hash_col = MD5(CONCAT(ref_id_1,ref_id_2,ref_id_3,ref_id_4,ref_date)); 
ALTER TABLE import ADD UNIQUE INDEX idx_hash_col(hash_col); 
```

Of course, the permanent table will also have an hash_col and the required indizes. Now the two possible update/joins will be:

```
//Join via columns 
UPDATE permanent
INNER JOIN import
ON import.ref_id_1 = permanent.ref_id_2
AND import.ref_id_2 = permanent.ref_id_2
AND import.ref_id_3 = permanent.ref_id_3
AND import.ref_id_4 = permanent.ref_id_4
AND import.ref_date = permanent.ref_date 
SET permanent.value = import.value;

//Join via Hash-col
UPDATE permanent
INNER JOIN import
ON import.hash_col = permanent.hash_col
SET permanent.value = import.value 
```

So which approach should be preferred? Is there a rule of thumb like "if you have more than X columns, use hash instead". Thanks in advance!

p.s. this is my first question here, so please excuse if something is missing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:56:54.513

Use a composite index. Comparing ten integers is faster than comparing two strings. Besides, in theory, MD5 hashes are not guaranteed to be unique (althought this shouldn't be too much of a practical issue).

# .net - Windows 更新后 WCF 服务中的 ServiceActivationException：无法加载文件或程序集 'App_global.asax.vtxl8efb，版本 = 0.0.0.0

> ID：12579862
> 
> 赞同：4
> 
> 时间：2012-09-25T09:19:09.003
> 
> 标签：.net, wcf, iis

我在 IIS 中安装了一个 .NET 3.5 Web 应用程序，它提供了多个 WCF 服务。这已经在数十家公司部署了一年多，但是最近他们在一台服务器上调用服务或导航到 IE 中的 .svc 文件时遇到了这个错误：

```
System.ServiceModel.ServiceActivationException: The service '/MyService/MySyncService.svc' cannot be activated due to an exception during compilation. The exception message is: Could not load file or assembly 'App_global.asax.vtxl8efb, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.. ---> System.IO.FileNotFoundException: Could not load file or assembly 'App_global.asax.vtxl8efb, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
File name: 'App_global.asax.vtxl8efb, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'
at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
at System.Reflection.Assembly.Load(String assemblyString)
at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath)
at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(String normalizedVirtualPath)
at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) 
```

服务器在周末应用了 Windows 更新，之后发生此错误并且服务无法正常工作。同一台服务器上的另一个 .NET 3.5 Web 应用程序（不是 WCF）运行良好。

> 我能够通过停止应用程序池、删除 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\myservice 中的文件并再次启动应用程序池来解决问题。

但我真的很想知道为什么会发生这种情况以及我能做些什么来防止它发生。在我的所有客户应用 Windows 更新后，要求他们完成这些步骤对我来说似乎是不合理的。

我没有将 Web 部署项目与这些应用程序中的任何一个一起使用（我能找到的唯一对此类错误的引用都指 Web 部署项目，例如[this](https://stackoverflow.com/questions/6943226/wcf-service-in-a-precompiled-web-application-could-not-load-file-or-assembly)）。我的 Web 应用程序项目已构建，然后进行复制部署。

它看起来有点像来自 MS 的[这个问题](http://support.microsoft.com/kb/934839)，他们已经发布了一个补丁，但实际上并不相同。

交叉张贴在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/d6db23ce-6269-429f-ae25-3790b0dc9ead)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T05:40:48.407

这更像是一个历史猜测，我认为您正在看到我在上一份工作中看到的内容。

当您安装安全更新或 .net 框架更新并且在安装更新时应用程序 [站点] 仍在使用中时，会出现此问题。它不能清除所需的文件，也不能算作将影子复制缓存标记为脏的事件，因此它不会重新编译。问题是现在无法访问 dll，因为 [这是我不能 100% 确定的地方] 我认为 dll 上的入口点发生了变化，因此 dll 在系统看来不是正确的. 因为它找不到它认为正确的东西，所以它抛出了上面的异常。如果您让系统通过触摸文件 [dll 或配置] 将您的应用程序标记为已更改，则足以使其重新编译卷影副本。

# blackberry - 如何在黑莓应用程序中获取谷歌地图搜索位置纬度和经度？

> ID：12579869
> 
> 赞同：1
> 
> 时间：2012-09-25T09:19:50.957
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我使用以下代码调用安装在黑莓设备中的谷歌地图

```
public void invokeGMaps(GMLocation l) {

    URLEncodedPostData uepd = new URLEncodedPostData(null, false);
    uepd.append("action", "LOCN");
    uepd.append("a",
       "@latlon:" + l.getLatitude() + "," + l.getLongitude());
    uepd.append("title", l.getName());
    uepd.append("description", l.getDescription());
    String[] args = { "http://gmm/x?" + uepd.toString() };
    ApplicationDescriptor ad = CodeModuleManager.getApplicationDescriptors(mh)[0];
    ApplicationDescriptor ad2 = new ApplicationDescriptor(ad, args);
    try {
        ApplicationManager.getApplicationManager().runApplication(ad2, true);
    } catch (ApplicationManagerException e) {
        System.out.println(e.getMessage());
        Dialog.alert("error1 " + e.getMessage());
    } catch (Exception e) {
        Dialog.alert("error2 " + e.getMessage());
    }
} 
```

这工作正常。我已将当前职位传递给它。

假设用户在使用谷歌地图后将在谷歌地图上搜索任何特定位置。所以在返回应用程序时，我想从谷歌地图中搜索位置纬度和经度。

所以请告诉我如何从谷歌地图应用程序中获取它？请帮助我，或者有关黑莓搜索位置的任何帮助如何完成？

感谢您耐心阅读我的问题。

# javascript - 在使用 Cordova/PhoneGap 的应用程序电子邮件中，无需打开模式电子邮件窗口

> ID：12579872
> 
> 赞同：1
> 
> 时间：2012-09-25T09:20:23.003
> 
> 标签：javascript, ios, cordova, phonegap-plugins

我想从我的应用程序中发送一封电子邮件，但直接从我的应用程序中发送出去，而无需打开模式电子邮件窗口。

我通过使用本机代码并通过使用cordova *exec*函数调用模式电子邮件窗口并传递以下参数找到了一些示例：

```
var args = {
  subject: 'Subject',
  body: 'message',
  toRecipients: 'recipients'
};
cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]); 
```

一个非常简单和好的方法。
但我想直接从我的应用程序中发送电子邮件，就像本机应用程序 invy 正在做的那样。

![直接从应用程序发送电子邮件](../Images/156b71131cd99916b5b30ea2fefb66ff.png)

有人知道怎么做，或者有人听说过类似的事情吗？

提前感谢
伊夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:34:32.163

您是否尝试从用户的邮件帐户（为 Mail.app 保存）发送电子邮件而不向他们显示电子邮件模式？抱歉，如果我错过了确切的问题，但如果是这样，我认为这是不可能的。

您可以在应用程序中使用本机元素来触发某处的电子邮件服务器以发送电子邮件，但我不认为您甚至不存在在不使用模式或直接获取用户的电子邮件凭据的情况下发送电子邮件的权限，例如，通过让他们再次输入。

# objective-c - 如何在 iOS 上快速估计调整大小图像的文件大小？

> ID：12579876
> 
> 赞同：24
> 
> 时间：2012-09-25T09:20:37.573
> 
> 标签：objective-c, ios, image, cocoa-touch, image-processing

在 Mail 中，当我添加图像并尝试发送它时，它会快速询问我要以哪种尺寸发送图像。看截图：

![在此处输入图像描述](../Images/52de73b7b2522f1cf806c8300f3547a8.png)

我想在我将上传图像的应用程序中做类似的事情，并希望用户能够在上传图像之前调整图像大小。像Apple在这里所做的那样估计文件大小的最佳方法是什么？

似乎实际上创建每个调整大小的图像只是为了检查它们的大小需要太长时间。有没有更好的办法？

我确实发现[这个 Apple 示例代码](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011173-Intro-DontLinkElementID_2)有点帮助，但老实说有点不知所措。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T16:40:29.503

决定最终压缩图像大小的最大因素不是图像大小或 JPEG 压缩质量，而是图像复杂度（点燃熵）。如果您知道您总是要处理高度详细的照片（而不是纯色场或渐变），这会在一定程度上减少沿该维度的差异，但是......

我花了相当多的时间对这个问题进行数值分析。我以 9 个不同的 JPEG 质量级别对一张详细的高分辨率图像的压缩图像大小进行了采样，该图像以 10 个百分点的增量缩小。这产生了一个描述隐式函数 z = (x, y) 的 3 维数据集，其中 x 是以像素为单位的缩放图像大小 (w*h)，y 是 JPEG 压缩质量，z 是结果图像的大小以字节为单位。

由此产生的表面很难估计。与直觉相反，它具有振荡和多个拐点，这意味着 x 和 y 中的 2 次函数不足以拟合它，并且增加多项式次数和创建自定义拟合函数并没有产生明显更好的结果。它不仅不是线性关系，甚至不是单调关系。这很复杂。

让我们变得实用。请注意 Apple 何时提示您输入图像大小：当您点击“发送”时，而不是图像首次出现在邮件撰写视图中时。这可以让他们在必须准备好估计的图像尺寸之前撰写您的消息。所以我的怀疑是：**他们做的很艰难**。将图像缩放到不同大小可以在后台并行执行，即使在 iPhone 4 calibur 硬件上需要几秒钟，所有这些工作都可以对用户隐藏。如果您担心内存使用情况，您可以将图像写入临时文件并按顺序而不是并行渲染它们，这将使用不超过内存中未压缩文件的 2 倍内存。

总而言之：除非您对正在压缩的图像的预期熵有很多了解，否则对于某些类别的图像，任何估计函数都会非常不准确。如果你能处理好，那么对一些样本数据进行线性或二次拟合并产生一个用于估计目的的函数是相当容易的。但是，如果您想像 Apple 一样接近，您可能需要在后台进行实际的调整大小工作，因为构建一个始终正确的启发式方法的因素太多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:39:06.357

我已经构建了一个可以调整图像大小的方法，如下所示：

```
-(UIImage *)resizeImage:(UIImage *)image width:(CGFloat)resizedWidth height:(CGFloat)resizedHeight
{
CGImageRef imageRef = [image CGImage];

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef bitmap = CGBitmapContextCreate(NULL, resizedWidth, resizedHeight, 8, 4 * resizedWidth, colorSpace, kCGImageAlphaPremultipliedFirst);
CGContextDrawImage(bitmap, CGRectMake(0, 0, resizedWidth, resizedHeight), imageRef);
CGImageRef ref = CGBitmapContextCreateImage(bitmap);
UIImage *result = [UIImage imageWithCGImage:ref];

CGContextRelease(bitmap);
CGImageRelease(ref);

return result;
} 
```

要获得图像的大小，您必须将其转换为`NSData`，并询问长度：

```
 UIImage* actualImage = [UIImage imageNamed:@"image"];

NSData* actualImageData = UIImagePNGRepresentation(actualImage);

NSLog(@"Actual %f KB", (CGFloat)actualImageData.length / (CGFloat)1024);

UIImage* largeImage = [self resizeImage:actualImage width:actualImage.size.width * 0.8 height:actualImage.size.height * 0.8];

NSData* largeImageData = UIImagePNGRepresentation(largeImage);

NSLog(@"Large %f KB", (CGFloat)largeImageData.length / (CGFloat)1024);

UIImage* mediumImage = [self resizeImage:actualImage width:actualImage.size.width * 0.5 height:actualImage.size.height * 0.5];

NSData* mediumImageData = UIImagePNGRepresentation(mediumImage);

NSLog(@"Medium %f KB", (CGFloat)mediumImageData.length / (CGFloat)1024);

UIImage* smallImage = [self resizeImage:actualImage width:actualImage.size.width * 0.3 height:actualImage.size.height * 0.3];

NSData* smallImageData = UIImagePNGRepresentation(smallImage);

NSLog(@"Small %f KB", (CGFloat)smallImageData.length / (CGFloat)1024); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:49:06.473

如果将其存储到`NSData`您可以调用`[NSData length]`以获取包含的字节数，然后将其划分以获得适当的大小（以 kB 或 MB 为单位）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:01:53.357

Mail 应用程序中提供的图像大小仅为估计值 - 发送图像的实际文件大小不同。将全尺寸图像（iPhone 4S 中为 3264 x 2448）转换为各种尺寸，只是为了获得文件大小也太慢了。

[编辑]

压缩文件大小不是线性的，因此您不能只获取 numPixels/filesize 来准确估计较小图像的文件大小。

所以这个答案并不是完全没用，这里是 Mail.app 导出的图像大小：

小号：320x240 中号：640x480 大号：1224x1632

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:54:03.800

您始终可以使用`UIImageJPEGRepresentation`来压缩图像。四个选项可以是 0.25、0.5、0.75 和 1.0 范围内的值，它们的大小可以很容易地通过应用相同方法后的图像计算找到。

# php - 解析文本文件以获取一些包含

> ID：12579878
> 
> 赞同：2
> 
> 时间：2012-09-25T09:20:47.130
> 
> 标签：php

我有一些文本文件。例如：`file1.txt`和`file2.txt.`

的包含`file1.txt`是`Walk word1 in the rain Walking in the rain is one of the most beautiful word2 experiences.`

有一些条件：

1.  如果有`word1`AND `word2`，我想得到这两个词之间的文本，`$between`所以我会得到`in the rain Walking in the rain is one of the most beautiful`。我也想得到文本`word2`，`$content`所以我会得到`experiences`
2.  如果只有`word1`OR `word2`(eg = `Walk in the rain Walking in the rain is one of the most beautiful word1 experiences.`) 那么`$between =''`并且`$content`是所有文本->`Walk in the rain Walking in the rain is one of the most beautiful word1 experiences.`
3.  如果`word2`前面是`word1`example :`Walk in word2 the rain Walking in the rain is one of the most word1 beautiful word1 experiences.`那么 $between = '' `and`$content` 是所有的文本。

这是我的代码：

```
//to get and open the text files
$txt = glob($savePath.'*.txt');
foreach ($txt as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content = file_get_contents($files);

//count the words of text, to reach until the last word
$words = preg_split('/\s+/',$ori_content ,-1,PREG_SPLIT_NO_EMPTY);
$count = count ($words);

$word1 ='word1';
$word2 ='word2';
    if (stripos($ori_content, $word1) && stripos($ori_content, $word2)){
        $between  = substr($ori_content, stripos($ori_content, $word1)+ strlen($word1), stripos($ori_content, $word2) - stripos($ori_content, $word1)- strlen($word1));
        $content  = substr($ori_content, stripos($ori_content, $word2)+strlen($word2), stripos($ori_content, $ori_content[$count+1])  - stripos($ori_content,$word2));
    }
    else 
    $content = $ori_content;

$q0 = mysql_query("INSERT INTO tb VALUES('','$files','$content','$between')") or die(mysql_error()); 
```

但我的代码仍然无法处理：

1.  条件号 2（上），我得到结果 $between = 经验，它应该是 $between=''
2.  条件编号 3（上）。我得到结果 $etween = the rain 在雨中行走是 word1 最美丽的 word1 体验之一，应该是 $between=''
3.  如果我在 file1.txt 中得到 $between，但在 file2.txt 中没有，在数据库中的表之间，对于数据 file2.txt，它应该在之间的列中为空。但它不为空，它由其他文本文件之间填充
4.  我无法说出最后一句话。

请帮助我..提前谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:47:27.967

我认为您只是缺少一个声明：

```
...
}
else {
    $between = '';
    $content = $ori_content;
} 
```

您可能在循环中使用它，因此如果您没有明确设置`$between`为空字符串，您将获得前一个循环的值:)

**编辑**

您还忘记了比较职位：

```
if (stripos($ori_content, $word1) && stripos($ori_content, $word2)){ 
```

应该：

```
$pos1 = stripos($ori_content, $word1);
$pos2 = stripos($ori_content, $word2);
if (false !== $pos1 && false !== $pos2 && $pos1 < $pos2) { 
```

**编辑 2**

另一件事; 您的 SQL 容易被注入，并且您不能以`NULL`这种方式正确使用该值。您可以使用这种构造，但最好使用`PDO`or `mysqli`。

```
$sql_between = is_null($between) ? 'NULL' : "'" . mysql_real_escape_string($between) . "'";
// apply the same treatment for `$files`, etc.
...
mysql_query("INSERT INTO tb VALUES('', $sql_files, $sql_content, $sql_between)"); 
```

通过这种方式，您可以设置`$between`并`null`使其正确发送到 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:49:26.460

我已经将解析器逻辑包装成一个函数`parse_content`。

```
$txt = glob($savePath.'*.txt');
foreach ($txt as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content = file_get_contents($files);
    $word1 ='word1';
    $word2 ='word2';

    $result = parse_content($word1, $word2, $ori_content);
    extract($result);

    $q0 = mysql_query("INSERT INTO tb VALUES('','$files','$content','$between')") or die(mysql_error());

}

function parse_content($word1, $word2, $input) {
    $between = '';
    $content = '';

    $w1 = stripos($input, $word1);
    $w2 = stripos($input, $word2);

    if($w1 && $w2) {
        if($w2 < $w1) {
            // Case 3
            $content = $input;
        } else {
            // Case 1
            $reg_between = '/' . $word1 . '(.*?)' . $word2 . '/';
            $reg_content = '/' . $word2 . '(.*)$/';

            preg_match($reg_between, $input, $match);
            $between = trim($match[1]);
            preg_match($reg_content, $input, $match);
            $content = trim($match[1]);
        }
    } else if($w1 || $w2) {
        // Case 2
        $content = $input;
    } else {
        // Case 4
        $content = $input;
    }

    return compact('between', 'content');
} 
```

# java - Java：我们可以将 DAO 用作 Singleton 实例吗

> ID：12579880
> 
> 赞同：5
> 
> 时间：2012-09-25T09:20:48.010
> 
> 标签：java, singleton, dao

这是一个一般性问题，并非针对我当前的应用程序。

在大流量多线程应用程序中，以下方法是什么：假设有一个 DAO，其中包含`updateData`更新数据库内部某些数据的方法。

**问题：**

1.  拥有该 DAO 类的 Singleton 实例并访问它的方法是一种好方法`updateData`吗？
2.  还是我应该每次都创建该 DAO 的新对象并调用该方法`updateData`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:24:22.000

是的，为此类服务创建一个单例绝对是个好主意，确保它在被多个线程访问时没有任何与状态相关的问题

我会将此类 DAO 标记为 Spring bean

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:38:44.787

最好创建一个 DAO 实例并将其传递给需要它的类的构造函数。我倾向于尽可能避免使用单例，因为除其他外，它们使您的代码难以测试和隐藏依赖项。

看看这个问题的答案：[单身人士有什么不好？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:25:04.553

您可以拥有 DAO 的单例实例，您只需确保 DAO 是无状态的，但 DAO 无论如何都应该是无状态的。

# java - 如何使用 Java-JDBC 切换数据库

> ID：12579892
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:21:25.183
> 
> 标签：java

我有 2 个数据库，Derby DB 和 Oracle DB。我的逻辑是检查 Derby DB 是否处于活动状态。如果是，我将向它发送 SQL 查询。如果 Derby DB 未处于活动状态，我想创建一个到 Oracle 的连接池并在那里执行 SQL 更新。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:33:05.030

您可以通过以下方式进行操作。1）加载Derby DB的驱动程序并尝试连接到数据库，如果它抛出异常，那么你可以在catch块中处理它。2) 加载 Oracle DB 驱动程序并连接到数据库并执行您的事务。

这样你就可以做到...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:32:56.547

您可以根据需要使用任意数量的数据库连接。您只需要创建将服务于逻辑的连接提供程序。在该连接提供程序中，如果失败，您首先创建到 Derby 的连接，然后尝试到 Oracle。

您需要确保的是，您对数据库和正确的连接字符串都有适当的驱动程序。

确保你有课

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 

Class.forName("org.apache.derby.jdbc.EmbeddedDriver"); 
```

万一没有找到上面的类，代码将抛出异常

[关于 Derby 连接字符串](http://db.apache.org/derby/docs/10.7/devguide/cdevdvlp17453.html)

[关于 Oracle 连接字符串](http://docs.oracle.com/cd/B28359_01/java.111/b31224/urls.htm#BEIDHCBA)

我还建议您阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/index.html)，当您的项目发展时，您可能想要使用一些[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:35:34.447

你可以尝试这样的事情我想：

```
 getDerbyConnection();
   if(derbyConnectionActive) {
        //execute queries on derbyDb
      }
     else {
       getOracleDBConnection();
          //execute queries on Oracle 
      } 
```

# java - 使用 Objectify4 持久化地图

> ID：12579894
> 
> 赞同：0
> 
> 时间：2012-09-25T09:21:27.500
> 
> 标签：java, google-app-engine, objectify

假设我已经让 Objectify4 与我的项目一起工作（尽管我仍在努力使其工作）是否可以像这样持久化带有 Map 字段的实体：

```
class Foo {
  Map<String, Object> map; 
  public Foo() {}
  public Foo(Map map) {
   this.map = map;
  }
} 
```

基本思想是能够存储/保留一个“通用”字段，它可以是

*   java.lang.String
*   java.lang.Number
*   java.lang.Boolean
*   空值
*   java.util.List
*   java.util.Map

例如我可以存储这个：

```
map.put("uid:sarah:fname", "Sarah");
persist(new Foo(map)); 
```

或者

```
map.put("uid:sarah:age", 25);
persist(new Foo(map)); 
```

这甚至可以通过 Objectify 实现吗？还是应用引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:57:09.230

这将与 Objectify4 一起工作，但有几点需要注意：

1.  您不能使用“。” 键名中的字符
2.  该`Object`值根本不会被转换；它将是数据存储接受的任何内容。

1 是因为这最终被存储在原始实体中`field.keyname`（可能有几层“。”分隔嵌入字段）。

2 是因为您要删除任何类型信息，所以 Objectify 只是按原样处理 Object。就像您直接使用低级api一样；您只能存储基元或基元集合。没有数组，当然没有地图。集合总是作为列表返回。数字总是以 Long 形式返回，无论它们以何种大小存储。还有一些其他古怪的行为。

如果你真的想要这种行为，你可以创建一个自定义的 TranslatorFactory，它将在运行时内省类型并做任何你想做的事情。然而，这是相当先进的，需要对现有的翻译人员进行一些研究。我们可以在[Google Group](http://groups.google.com/group/objectify-appengine)上为您提供帮助；stackoverflow 可能不是这个讨论的正确位置。

# xpages - 在 xpages 中使用扩展库和 dojo 时出错

> ID：12579895
> 
> 赞同：0
> 
> 时间：2012-09-25T09:21:37.147
> 
> 标签：xpages, xpages-extlib

我已经安装了 domino Designer 8.5.2，和扩展库 8.5.2，dojo 1.6.1。然后我使用移动应用程序控件开发了 Xpage。

在 Web 中预览 Xpage 时，我在控制台中收到错误由

加载资源失败：服务器响应状态为 404 (Not Found) /domjs/dojo-release-1.6.1/dojo/dojo.js:14
failed loading /domjs/dojo-release-1.6.1/dojo/ ./parser.js 错误：ReferenceError：找不到变量：定义 /domjs/dojo-release-1.6.1/dojo/dojo.js:14
错误：无法加载“dojo.parser”；最后尝试 './parser.js' /domjs/dojo-release-1.6.1/dojo/dojo.js:14
加载失败 /domjs/dojo-release-1.6.1/dojo/./hash.js 错误： ReferenceError：找不到变量：定义 /domjs/dojo-release-1.6.1/dojo/dojo.js:14
加载 /xsp/.ibmxspres/.extlib/dijit/Mobile.js 失败，错误：错误：无法加载'dojo.hash'；最后尝试 './hash.js' /domjs/dojo-release-1.6.1/dojo/dojo.js:14
错误：无法加载“extlib.dijit.Mobile”；最后尝试'/xsp/.ibmxspres/.extlib/dijit/Mobile.js' /domjs/dojo-release-1.6.1/ibm/domino/widget/layout/css/domino-default.css加载资源失败：服务器响应状态为 404（未找到）

请你能帮我做什么我需要做的进一步......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:24:18.273

Domino 8.5.2 仅随 Dojo 1.4.3 一起提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:36:20.547

由于依赖 Dojo 1.6，Mobile Controls 需要 Domino 8.5.3。请参阅 OpenNTF [http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8MHA78](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8MHA78)上的帖子。

如果您想在 8.5.2 上使用移动设备，我认为您需要使用 OpenNTF 上的 Mobile Controls 项目，该项目使用自定义控件。

如果可能，升级到 8.5.3。除了性能优势之外，还可以更轻松地部署扩展库并利用仅通过对基本代码集进行增强才能实现的附加功能（例如 RDBMS 支持、社交等）。因为 8.5.3 提供了 Dojo 1.6.1，这意味着您的 XPage 将在 IE9 上工作而无需强制兼容模式 - 在兼容模式之外，IE9 不支持早于 1.6 的任何 Dojo 版本。

# c# - 使用 webclient.downloadfile 下载时打开 xlsx 文件时出错

> ID：12579898
> 
> 赞同：0
> 
> 时间：2012-09-25T09:21:47.990
> 
> 标签：c#

我正在尝试将文件从站点下载到文件夹

```
TheWebclientL.Credentials = new System.Net.NetworkCredential(zUserIdL, zPasswordL);
  TheWebclientL.DownloadFile(zSharePointURLPathL, "E:\FolderOutputs\ExcelTemplate\Lookup.xlsx"); 
```

下载时不会给我任何错误。

在尝试打开它时，它给了我一个错误

Excel 无法打开文件，因为其文件格式或文件扩展名无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:15:10.723

我解决了这个问题，webclient 无法访问 sharepoint 站点中的文件

# php - 使用 require_once

> ID：12579905
> 
> 赞同：1
> 
> 时间：2012-09-25T09:22:17.537
> 
> 标签：php, constants

我正在使用函数 require_once，但在尝试运行页面时不断出错。尝试寻找其他地方，但似乎无法为我的问题找到准确的答案。我的代码是：

```
 <?php
        require_once(ROOT_DIR . 'Pages/Page.php'); 
        require_once(ROOT_DIR . 'lib/Application/Authentication/namespace.php'); 
```

它给了我以下错误：

> 注意：使用未定义的常量 ROOT_DIR - 在第 3 行的 /opt/lampp/htdocs/myDiary/Pages/LoginPage.php 中假定为“ROOT_DIR”
> 
> 警告：require_once(ROOT_DIRPages/Page.php) [function.require-once]：无法打开流：第 3 行的 /opt/lampp/htdocs/myDiary/Pages/LoginPage.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：无法在 /opt/lampp/htdocs/myDiary/Pages/ 中打开所需的 'ROOT_DIRPages/Page.php' (include_path='.:/opt/lampp/lib/php')第 3 行的 LoginPage.php。

请解释我的问题是什么，我很久没有编程了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:25:33.990

错误消息中都清楚地说明了这一点：

*   您的常量`ROOT_DIR`未在脚本中的该位置定义，
*   所以PHP找不到相应的文件，
*   这导致`require_once()`呼叫失败。

作为解决方案，请务必`ROOT_DIR`在使用前进行设置。看[`define()`](http://php.net/manual/en/function.define.php)这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:25:50.063

您收到此错误，因为您尚未定义目录

定义为

```
define('ROOT_DIR', '/path/to/your/scripts/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:24:04.153

您必须`ROOT_DIR`在顶部定义常量：

```
define('ROOT_DIR', '/path/to/your/scripts/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:25:26.580

尝试 DOCUMENT_ROOT

```
<?php 
   $path = $_SERVER['DOCUMENT_ROOT'];
   $path .= 'Pages/Page.php';
  include_once($path);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T09:26:23.947

Think this should work

```
require_once(__ROOT__.'Pages/Page.php'); 
```

the useful link is here :

[http://php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:24:20.470

您应该首先定义 ROOT_DIR .. 像这样：

```
define('ROOT_DIR', 'path'); 
```

# css - 我们可以在不使用 inline-block 的情况下水平居中那些宽度可变的 div“IE7 及以上”吗？

> ID：12579907
> 
> 赞同：1
> 
> 时间：2012-09-25T09:22:27.960
> 
> 标签：css

没有：

*   在那里添加任何标记元素；
*   不使用`display: inline-block;`
*   不知道 div 的宽度；
*   没有黑客。代码应该验证。

我们如何才能将这三个 div 水平居中，但将它们**设为 INLINE**？

[http://jsfiddle.net/mMPMh/](http://jsfiddle.net/mMPMh/)

**请注意：** 我避免的原因`inline-block`在于 IE7 应该表现得很好。其他不适用于 IE 7 的规则也应该被忽略。

**是否可以 ？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:32:41.783

像这样 - [http://jsfiddle.net/mMPMh/10/](http://jsfiddle.net/mMPMh/10/)

或者这个 - [http://jsfiddle.net/mMPMh/14/](http://jsfiddle.net/mMPMh/14/)？这个适用于 IE7

至于黑客，可以使用条件语句来提供服务，例如

```
<!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="ie7-and-down.css" />
<![endif]--> 
```

或者在您的 HTML 上使用它（来自 HTML5BP）

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

并提供这样的风格：

```
.lt-ie8 #one,
.lt-ie8 #two,
.lt-ie8 #three {
    display:inline;
    zoom:1;
} 
```

没有黑客

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:25:40.160

UPD：更新您的问题后，您可以使用 IE `display:inline;`，也许它会解决您的问题？

* * *

像这样 - [http://jsfiddle.net/mMPMh/4/](http://jsfiddle.net/mMPMh/4/)？

`float`如果需要高度和宽度，请移除、设置清除并给出。

# android - 搜索栏拇指位置不等于进度

> ID：12579910
> 
> 赞同：1
> 
> 时间：2012-09-25T09:22:39.610
> 
> 标签：android, seekbar

我想用拇指创建不会改变进度的搜索栏。我的搜索栏的进度必须与拇指位置分开设置。我该怎么做？

我应该说，我必须扩展 Seekbar 并覆盖一些方法。但是不明白是哪个？？？确定拇指位置的方法是什么？哪个决定了进展？

```
Please help me!!
Thanks at advance! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T18:48:43.410

尝试使用不同`drawbles` 的让我给你看一个例子：

你的`code` .java

```
import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.widget.SeekBar;

public class MainActivity extends Activity {
    private SeekBar seekBar1;

    private SeekBar seekBar2;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         seekBar1 = (SeekBar) findViewById(R.id.seekBar1);
         seekBar2 = (SeekBar) findViewById(R.id.seekBar2);
         seekBar1.setProgress(15);
         seekBar2.setProgress(55);
         Drawable ii = getResources().getDrawable(R.drawable.ii);
        // Drawable iii = getResources().getDrawable(R.drawable.ii);
         seekBar1.setThumb(ii);
         seekBar2.setThumb(ii);

    }

} 
```

你的问题：

![在此处输入图像描述](../Images/01dd4a94e96eb220c1b51d11382b6cd4.png)

你可以做的就是`simple`像这样重命名相同的drawable：

```
import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.widget.SeekBar;

public class MainActivity extends Activity {
    private SeekBar seekBar1;

    private SeekBar seekBar2;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         seekBar1 = (SeekBar) findViewById(R.id.seekBar1);
         seekBar2 = (SeekBar) findViewById(R.id.seekBar2);
         seekBar1.setProgress(15);
         seekBar2.setProgress(55);
         Drawable ii = getResources().getDrawable(R.drawable.ii);
         Drawable iii = getResources().getDrawable(R.drawable.ii);
         seekBar1.setThumb(ii);
         seekBar2.setThumb(iii);

    }

} 
```

这就是结果：

![在此处输入图像描述](../Images/b52271ebc13fe516fc61ee5ea279a18b.png)

希望有帮助！！:)

# objective-c - UICollectionView 中按钮的索引路径

> ID：12579911
> 
> 赞同：7
> 
> 时间：2012-09-25T09:22:40.307
> 
> 标签：objective-c, ios6, uicollectionview

我尝试过了：

```
- (IBAction)delete:(UIButton*)sender{
    NSIndexPath *indexPath = [self.collectionView indexPathForCell:(TourGridCell *)[[[sender superview]superview]superview]];
} 
```

但 NSLog 显示单元存在，但 indexpath 为 nil。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T15:14:39.250

好的，这里是：

```
- (IBAction)delete:(UIButton *)sender{
    NSIndexPath *indexPath = nil;
    indexPath = [self.collectionView indexPathForItemAtPoint:[self.collectionView convertPoint:sender.center fromView:sender.superview]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T18:41:21.257

有时这是最简单的答案。我遇到了与@Schmidt 完全相同的问题，但很沮丧地看到他的答案是使用 indexPathForItemAtPoint:，就好像 indexPathForCell: 以某种方式损坏并且无法按预期使用一样。

然后我尝试了他的解决方案，仍然得到相同的结果：索引路径返回为零。

解决方案：视图控制器的 collectionView 插座未连接到 NIB 中的 UICollectionView 实例（在情节提要上）。建立缺失的连接后，两种方法（indexPathForCell: 和 indexPathForItemAtPoint）都按预期工作。

我知道其他开发人员有时会遇到这个问题，所以提醒一下：问题可能不是您的代码本身，而是 Interface Builder 中的某些东西，例如未连接的插座（或者同样令人困惑，*连接到某物的插座）不再存在*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-24T15:56:25.457

Swift 版本的答案

```
var indexPath: IndexPath? = nil
indexPath = collectionView.indexPathForItem(at: collectionView.convert(sender.center, from: sender.superview)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T11:37:19.680

另一个最好的方法是继承 UIButton 并向它添加一个 NSIndexPath 属性。在
`- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath`方法中加载单元格时添加此语句。 `yourCell.customButton.indexPath = indexPath;`

和

```
- (IBAction)delete:(UIButton *)sender  
{
  NSIndexPath *indexPath = sender.indexPath;
} 
```

# linq - 需要一个 linq 来生成自己加入

> ID：12579917
> 
> 赞同：-4
> 
> 时间：2012-09-25T09:23:18.537
> 
> 标签：linq, join

根据这篇文章[为什么 MYSQL 更高的 LIMIT 偏移量会减慢查询速度？](https://stackoverflow.com/questions/4481388/why-does-mysql-higher-limit-offset-slow-the-query-down)这篇文章[http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)我需要一个 linq 来创建下面的查询

```
SELECT  news.*
FROM    (
        SELECT  id
        FROM    news
        WHERE   cat_id= x
        ORDER BY
                id DESC
        LIMIT m, n
        ) o
JOIN    news
ON      news.id = o.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:50:48.990

这应该这样做。（Skip/Take 等于极限）

```
from u in news
join n in
(
    from x in news
    where x.cat_id = 10
    orderby x.Id descending
    select x
).Skip(10).Take(20) on u.Id equals n.Id
select u 
```

# google-analytics - 我可以在谷歌分析中同时使用 ga:adCost 和 ga:hour 维度吗？

> ID：12579919
> 
> 赞同：0
> 
> 时间：2012-09-25T09:23:36.423
> 
> 标签：google-analytics

考虑一个包含各种广告系列的网站...我可以获取 AdWords 维度的每小时详细信息吗？

我曾尝试查询 Google Analytics API 以获取

维度：ga:campaign、ga:adGroup、ga:keyword、ga:date、ga:hour

指标：ga:adCost

它因错误消息“远程服务器返回错误：（400）错误请求”而中断。

我尝试过同时使用 API 和[Google Analytics Query Explorer 2](http://ga-dev-tools.appspot.com/explorer/?csw=1)。

但似乎 Google Analytics（分析）没有 AdWords 维度的小时详细信息（例如 ga:adCost、ga:adClicks、ga:CPC、ga:impressions）

我找不到任何关于我可以在查询中使用的维度组合的文档。但是我发现[https://developers.google.com/analytics/devguides/reporting/core/dimsmets](https://developers.google.com/analytics/devguides/reporting/core/dimsmets) 但它只提供维度和指标的有效组合，而不是维度本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:58:40.043

您不能直接通过 API 执行此操作，因为对于可以组合哪些维度和指标存在（有些随意）限制。我使用[Shufflepoint](http://www.shufflepoint.com)作为查询的中介来绕过这些限制。SP 提供了一种类似 SQL 的语法（准确地说，它实际上是被监禁的[MDX](http://en.wikipedia.org/wiki/MultiDimensional_eXpressions)）并为您完成所有汇总。因此，您只需编写一个简单的查询，就好像 Google Analytics 和 Adwords 是两个数据库一样，瞧。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:29:50.093

某些 adWords 指标每小时可用，但 ga:adCost 和 ga:adClick 不可用。

使用您提供的相同工具，您应该可以尝试。

[https://developers.google.com/analytics/devguides/reporting/core/dimsmets](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)

只需选中 ga:adCost 旁边的复选框，您就会看到 ga:hour 显示为灰色。

# c# - Linux 上的 RichTextBox 编码 - Mono

> ID：12579920
> 
> 赞同：1
> 
> 时间：2012-09-25T09:23:37.087
> 
> 标签：c#, linux, winforms, encoding, mono

我的 RichTextBox 包含一些彩色文本。他的字体是`new Font("Arial", 8.25f, FontStyle.Regular, GraphicsUnit.Point, ((byte)0))`

在 Windows 中我没有任何问题。

但在 Linux 中，变音符号不起作用。我可以看到在 Linux 的 Rtf 标头中是：

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033
{\fonttbl{\f0\fnil\fcharset0 DejaVu Sans;}}
{\colortbl \red0\green0\blue0;\red0\green0\blue255;}
{\*\generator Mono RichTextBox;}\pard\f0\fs16 
\par

\par

\par

....

D9B1DE9DE\'FDE9\'FD 
```

（从Linux终端复制）

在 Windows 中则完全不同

```
{\rtf1\ansi\ansicpg1250\deff0\deflang1029
{\fonttbl{\f0\fnil\fcharset238{\*\fname Arial;}Arial CE;}}
{\colortbl ;\red0\green0\blue255;\red255\green69\blue0;\red0\green128\blue0;}

Jak se m\'e1\'9a? \fs17 
```

（从 VS 调试窗口复制）

有很多新行，虽然我正在使用`Environment.NewLine`并且变音符号字母被转换成这样的东西`D9B1DE9DE\'FDE9\'FD`

我尝试改变 CultureInfo，也改变字体，但没有改变。

我该如何解决？我想在两个系统上使用相同的字体。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:54:14.507

If the same code has different results on Mono than on .Net, it can be considered as a bug.

Which version of mono are you using? The Winforms have got a few bugs fixed in the last few months.

If you already run the lastest version (2.10.9) you should post your problem on the mono mailing (mono-devel-list[at]lists.ximian.com)

# hadoop - 如何在hdfs中持久化namenode信息

> ID：12579921
> 
> 赞同：1
> 
> 时间：2012-09-25T09:23:38.033
> 
> 标签：hadoop, hdfs

我已经在我的桌面上设置了一个单节点集群。问题是我不能让我的桌面一直运行。我确实执行了 stop-all.sh，稍后当我执行 start-all.sh 时，我的 namenode 没有启动。最后我必须做 %hadoop namenode -format ，通过丢失我的所有数据来继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:41:33.137

有什么严重的错误。请检查 namenode 写入的图像和编辑文件会发生什么。如果他们没问题 - NameNode 可以启动。
另外......存储NN数据的最后一个地方是HDFS - 因为你会遇到鸡蛋和鸡肉的问题。W/o NN 数据 HDFS 不可访问。

# sql - 将一个变量分配给另一个变量 (SQL)

> ID：12579922
> 
> 赞同：1
> 
> 时间：2012-09-25T09:23:38.813
> 
> 标签：sql, tsql, variables

我正在用一些计算方法编写一小段代码，并且我使用临时变量来执行它。

当我只是将`SELECT`语句分配给`@sum1`它正在工作时，但是当我将它更改为`@sum1 += SELECT...`它时返回`NULL`（见附图）

我已经尝试过以下方法：

*   尝试进行一些转换（尽管 @sum1 和 activityDur 都定义为 INT）

*   试图将`SELECT`语句分配给一个变量，然后将该变量分配给一个新变量。

*   试图在网上找到类似的问题（包括stackoverflow）

谢谢。

```
SET @sum1=0
        WHILE @i <= 10
            BEGIN   
 //**** HERE IS THE PROBLEM
SET @sum1 += (SELECT activityDur FROM dbo.tmp_activityCalculation WHERE RowNum = @i)
//**** 
IF (@sum1 > 200)
                    BEGIN
                        SET @index += 1
                        SET @sum1 = 0
                    END
                INSERT INTO tmp_finalCalc (RowNum, activityID, activityDur,actDay)
                SELECT 
                    RowNum,
                    activityID,
                    activityDur,
                    @sum1
                FROM tmp_activityCalculation WHERE Rownum = @i      
                SET @i += 1
            END 
```

[查询的执行结果](http://i.stack.imgur.com/lrCIW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:26:22.413

```
SET @sum=0
    WHILE @i <= 10!
            BEGIN   
     //**** HERE IS THE PROBLEM
            SELECT @sum1=isnull(@sum1,0)+isnull(activityDur,'0') FROM dbo.tmp_activityCalculation WHERE RowNum = @i
    //**** 
                IF (@sum1 > 200)
                    BEGIN
                        SET @index += 1
                        SET @sum1 = 0
                    END
                INSERT INTO tmp_finalCalc (RowNum, activityID, activityDur,actDay)
                SELECT 
                    RowNum,
                    activityID,
                    activityDur,
                    @sum1
                FROM tmp_activityCalculation WHERE Rownum = @i      
                SET @i += 1
            END 
```

# git - 在没有变基的情况下恢复合并

> ID：12579923
> 
> 赞同：1
> 
> 时间：2012-09-25T09:23:41.680
> 
> 标签：git, git-merge, git-rebase, revert, git-revert

我意识到一个分支被合并到我不应该的主分支中 - 提交已经被推送。分支没有重新设置基础——这意味着我看不到一个“合并提交”——来自分支的提交现在在 master 分支中，我不知道哪些提交来自合并，哪些之前在那里。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:53:39.820

看起来就像有人在当前 master 之上重新设置了您的分支，然后将 master 快速转发到您的分支的头部。或者，它可能是一系列精选。最简单的事情是从主分支中逐一还原提交。

**请注意：**如果您曾经将主分支与恢复的提交合并到您的分支中，那么您分支中的提交也将被恢复。

PS 在这里查看还原想法：[在 Git 中回滚](https://stackoverflow.com/q/218023/1065190)

# google-apps-script - 如何在谷歌应用程序中获取谷歌文档的内容？

> ID：12579930
> 
> 赞同：0
> 
> 时间：2012-09-25T09:23:53.190
> 
> 标签：google-apps-script

我在获取文档内容时遇到问题。我能够获取文档 ID，但无法获取文档的文本。我为此使用以下代码：

```
function getDocuments(user){
  var scope = 'https://docs.google.com/feeds/';
  //oAuth
  user="email-id"
  var fetchArgs = googleOAuth_('docs', scope);
  var url = scope + user+'/private/full?v=3&alt=json';
  var urlFetch = UrlFetchApp.fetch(url, fetchArgs);
  var json=Utilities.jsonParse(urlFetch.getContentText())
  var entry = json.feed.entry;
  var docs = [];
  for(var i in entry){
    var tempDoc = {};
    for(var j in entry[i]){

      tempDoc.id = entry[i].id.$t.split('%3A')[1];
    }
    docs.push(tempDoc);
    //Logger.log(docs[i])
  }

  var url='https://docs.google.com/feeds/download/documents/Export?docID=?'

  var data=UrlFetchApp.fetch(url,fetchArgs).getAs('text/html').getDataAsString()
  MailApp.sendEmail("email","","",{htmlBody:data})
}

//--------------------------------------------------------------------------------------
//Google oAuth
//Used by getDocuments(user)
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("consumerkey");
  oAuthConfig.setConsumerSecret(consumersecret);
  return {oAuthServiceName:name, oAuthUseToken:"always",method:"GET"};
} 
```

它返回 html 格式的文档，但无法返回文档的内容。请尽快与我分享任何建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:38:08.970

如果您希望文档成为邮件的 html 正文，您可以使用以下代码：

```
 var id = 'the ID of your document'
    var bodytext = DocumentApp.openById(id).getText();//the text content of your doc (optional)
    var url = 'https://docs.google.com/feeds/';
    var doc = UrlFetchApp.fetch(url+'download/documents/Export?exportFormat=html&format=html&id='+id,
    googleOAuth_('docs',url)).getContentText(); 

    MailApp.sendEmail(destination email, subject, bodytext, {htmlBody:doc}); 
```

和 OAuth 功能：

```
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:19:25.193

目前我还不知道有什么函数可以获取文件内容，可以参考文件分享链接的文档。

我希望能帮助你！

# c# - 在表单加载时缓存数据

> ID：12579937
> 
> 赞同：0
> 
> 时间：2012-09-25T09:24:15.533
> 
> 标签：c#, winforms

我有 ac# windows 表单，它使用线程工作者在加载时拉出一个通用列表。这会填充客户编号的下拉列表。

```
private void ZurichAccountTrades_Load(object sender, EventArgs e)
{
   tbLocation.Text = @"C:\Reports\Output\";
   lbGettingData.Visible = true;
   CheckForIllegalCrossThreadCalls = false;
   var thdWorker = new Thread(PopulateDropDownPersonNumbers);
   thdWorker.Start();
}

private void PopulateDropDownPersonNumbers()
{
        ddProviderNo.Enabled = false;

  progressBar1.Increment(10);

  //Get data somehow here....

  foreach (var person in providerPNos)
  {
    ddProviderNo.Items.Add(person.PersonNo);
    progressBar1.Increment(1);
  }
  progressBar1.Increment(100);
  lbGettingData.Visible = false;
  ddProviderNo.Enabled = true;
  progressBar1.Value = 0;
}

private void ddProviderNo_SelectedIndexChanged(object sender, EventArgs e)
{
 //What do I do here??
} 
```

我想要的是当用户选择一个客户号码时，客户名称（保存在同一个列表中）会自动显示。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:33:37.697

添加对象`Person`而不是`PersonNo`

```
 ddProviderNo.Items.Add(person); 
```

然后：

```
private void ddProviderNo_SelectedIndexChanged(object sender, EventArgs e)
{
    ComboBox comboBox = sender as ComboBox;
    textBox.Text = (comboBox.SelectedItem as Person).Name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:37:20.110

您可以将客户端名称绑定到 ComboBox 的 DisplayName 属性。然后当它改变时，你可以使用它..

# php - 检索给定日期最近（之前和之后）的记录

> ID：12579946
> 
> 赞同：3
> 
> 时间：2012-09-25T09:24:34.173
> 
> 标签：php, mysql

考虑一个`tasks`具有给定字段的表：

```
id | release_date | task_number
-------------------------------------
1  | 2012-09-01   | task_number#1
2  | 2012-09-07   | task_number#2
3  | 2012-09-11   | task_number#3
4  | 2012-09-05   | task_number#4
5  | 2012-09-21   | task_number#5
6  | 2012-09-31   | task_number#6 
```

我想检索最接近（之前和之后）给定日期的记录。

我知道这可以通过使用两个单独的查询来完成。

但是有什么方法可以检索 a 中最近的记录`single mysql query`吗？

例如，如果给定的日期是`2012-09-11`，则输出应该是：

```
 id | release_date | task_number
    -------------------------------------
    2  | 2012-09-07   | task_number#2
    3  | 2012-09-11   | task_number#3
    5  | 2012-09-21   | task_number#5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:27:50.170

以下应该可以解决我认为的问题 - 它按顺序使用[timeDiff ：](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timediff)

```
select 
    id, 
    release_date, 
    task_number 
from 
    tasks 
order by 
    abs(timediff('2012-09-11',release_date)) desc 
```

您可以使用输入的值作为 PHP 连接中的参数，如下所示：

```
select 
    id, 
    release_date, 
    task_number 
from 
    tasks 
order by 
    abs(timediff(:yourDate,release_date)) desc 
```

并将相同`yyyy-mm-dd`格式的字符串很好地传递给它。

编辑：来自下面印章的有趣评论，似乎准确 - 但是以下应该作为一种解决方法来解决问题：

```
select 
    id, 
    release_date, 
    task_number 
from 
    tasks 
order by 
    abs(time_to_sec(timediff('2012-09-11',release_date))) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:57:26.053

如果您在 release_date 上有索引，则可以这样做以获得更好的性能。

```
select 
    id, 
    release_date, 
    abs( datediff(release_date,"$the_date") ) as sort_key
from tasks
where 
    id = (select id from tasks where release_date > "$the_date" order by created_time limit 1)      
    or 
    id = (select id from tasks where release_date < "$the_date" order by created_time desc limit 1) 
order by sort_key limit 1; 
```

第一个子查询将找到 $the_date 之后的第一个日期的 id，第二个子查询将找到 $the_date 之前的最后一个日期的 id，之后我们可以轻松选择想要的日期。

# java - 永远计算和覆盖 hashCode 是否是一种好习惯

> ID：12579955
> 
> 赞同：0
> 
> 时间：2012-09-25T09:24:50.420
> 
> 标签：java

我使用 OpenSource OODB [db4o](http://community.versant.com/Downloads.aspx)，我的序列化类继承自一个通用的 abstract.class，它有两个字段：

```
. . .
private final Long timeCreate = (System.currentTimeMillis() << 20) + (System.nanoTime() & 0xfffff);
private final int hashCode = timeCreate.hashCode();
. . . 
@Override
public final int hashCode() {
    return hashCode;
}
. . . 
```

这样做是个好习惯吗？

我尝试过的基准测试给出了更快的响应，但是一个陷阱是否嵌套在某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:34:24.260

理想情况下，对象的 hashCode 在任何情况下都不应该改变。一种选择是仅按需生成它，但在您的情况下，您遇到的问题是 timeCreate 不确定是唯一的或单调递增的。如果您只有微秒级的分辨率，System.nanoTime() 可以产生超过 1000 次相同的值。

```
private static final AtomicLong TIME_ID = new AtomicLong(0);
private static long generateTimeId() {
    long now = System.currentTimeMillis() * 1000000;
    long id = TIME_ID.getAndIncrement();
    if (id > now)
        return id;
    TIME_ID.compareAndSet(id+1, now);
    return TIME_ID.getAndIncrement();
}

// produce a monotonically increasing time id.
private final long timeCreate = generateTimeId();
private final int hashCode = (int)((timeCreate >> 32) ^ timeCreate); 
```

注意：如果两个对象等于 == true，则它们必须具有相同的 hashCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:27:14.960

一般hashcode是根据对象的状态来确定的，如果在计算hashcode的时候不考虑对象的状态需要注意`hashcode()`和`equals()`关系

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:33:12.773

您在那里所做的事情并不真正[符合 hashCode 的合同](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

在您的系统中，除非两个对象是同时创建的，否则它们没有相同的 hashCode，因此您也可以使用`Object`该类的默认实现，如果它们是不同的实例，它会认为两个对象是不同的（这是这里发生的事情）。

如果这是所需的，我将删除该自定义代码...

# iphone - 如何获取所有正在运行的应用程序信息

> ID：12579962
> 
> 赞同：0
> 
> 时间：2012-09-25T09:25:25.720
> 
> 标签：iphone, ios

我正在开发一个应用程序。我已经编写了以下代码来获取后台运行应用程序的列表。

```
- (NSArray *)runningProcesses {
@try {
 int mib[4] = {CTL_KERN, KERN_PROC, KERN_PROC_ALL, 0};
    size_t miblen = 4;

    size_t size;
    int st= sysctl(mib, miblen, NULL, &size, NULL, 0);

    struct kinfo_proc * process = NULL;
    struct kinfo_proc * newprocess = NULL;

    do {

        size += size/ 10;
        newprocess = realloc(process, size);

        if (!newprocess){

            if (process){
                free(process);
            }

            return nil;
        }

        process = newprocess;
        st = sysctl(mib, miblen, process, &size, NULL, 0);

    } while (st == -1 && errno == ENOMEM);

    if (st == 0){

        if (size % sizeof(struct kinfo_proc) == 0){
            int nprocess = size / sizeof(struct kinfo_proc);

            if (nprocess){

                NSMutableArray *array = [[NSMutableArray alloc]init];
                BOOL Found=NO;

                for (int i = nprocess - 1; i >= 0; i--){

                    NSString * processID = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_pid];
                    NSString * processName = [[NSString alloc] initWithFormat:@"%s", process[i].kp_proc.p_comm];
[array addObject:processName]; 
 [processID release];
                    [processName release];
                    //[array addObject:dict];
                    //[dict release];
                }
 free(process);
                 return [array autorelease];
             }
         }
     }

     return nil;
 }
@catch (NSException *ex)
{
    NSLog(@"Exception is %@",ex);
    return nil;
} 
```

}

它提供应用程序信息。例如，它提供应用程序信息，如 Templerun、Skype、Angrybirds 等。在我运行此代码一段时间后，这将应用程序列表仅提供为 Skype。但其余应用程序出现在移动后台运行的应用程序中列表。所以请告诉我如何从移动后台运行的应用程序列表中获取所有正在运行的应用程序列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:45:50.280

这是因为您认为在后台运行的后台应用程序实际上并未在后台运行。它们只是应用程序的图标。

设备上的每个应用程序都在后台运行 10 minz。之后 ios 杀死了那些线程并只显示图标。

尝试运行任何应用程序，而不是将其推送到后台，快速检查应用程序中正在运行的应用程序列表，您会在那里找到它。但是在 10 minz 之后，你不会在那里找到它。

试试看。让我知道我是对的吗？

# c# - 绘制深度适用于 WP7 模拟器，但不适用于设备

> ID：12579966
> 
> 赞同：0
> 
> 时间：2012-09-25T09:25:36.003
> 
> 标签：c#, windows-phone-7, xna

我正在使用 C# 和 XNA 在 WP7 设备上制作游戏。我有一个系统，我总是希望用户触摸的对象被带到顶部，所以每次触摸它时，我都会增加`float.Epsilon`它的绘制深度（我设置它，0 是后面，1 是前面） .

在模拟器上一切正常，但是当我在我的设备上运行它时，绘制深度似乎是完全随机的。

我希望有人知道解决此问题的方法。我尝试过清理和重建并从设备上卸载，但这并不走运。我的电话`spritebatch.Begin`是：

```
spriteBatch.Begin(SpriteSortMode.FrontToBack, BlendState.AlphaBlend); 
```

并绘制我使用

```
spriteBatch.Draw(Texture, new Rectangle((int)X, (int)Y, (int)Width, (int)Height), null, Color.White, 0, Vector2.Zero, SpriteEffects.None, mDrawDepth); 
```

哪里`mDrawDepth`是绘制深度的浮点值（可能是一个非常小的数字；是`float.Epsilon`.

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:30:04.613

**问题是您使用`float.Epsilon`.** 从[文档](http://msdn.microsoft.com/en-us/library/system.single.epsilon.aspx)中：

> 在 ARM 系统上，Epsilon 常数的值太小而无法检测到，因此它等于零。您可以改为定义一个等于 1.175494351E-38 的替代 epsilon 值。

我希望仿真器没有运行完全准确的 ARM 仿真——这就是它在仿真器而不是设备上正常工作的原因。（我什至不确定模拟器是否真的在运行 ARM - 它很可能是 x86。）

* * *

需要注意的是，将 epsilon 添加到事物中并期望结果值是有意义的是非常冒险的。的值`float.Epsilon`是 32 位浮点数（在 x86 上）**在零附近**的精度。

在大于零的数字处，精度增量变得更大。将会有一个点，添加`float.Epsilon`给定值会给你*准确地*返回那个值。

在不[详细说明](http://en.wikipedia.org/wiki/Single_precision)[浮点的工作原理的情况](http://en.wikipedia.org/wiki/Floating_point)下，我将仅指出 32 位浮点数（当考虑以 10 为基数时）可以存储 6 个（左右）有效数字。

* * *

我个人建议实施您自己的订购系统。我一直觉得`layerDepth`XNA 中的东西有点弱。

也许您正在从列表中绘制这些组件？只是在触摸组件时重新排序列表？

# java - Struts2 验证重定向操作输入 - FieldErrors 消失了

> ID：12579967
> 
> 赞同：3
> 
> 时间：2012-09-25T09:25:38.030
> 
> 标签：java, struts2

以下是我对拦截器的配置：

```
 <interceptors>
        <interceptor-stack name="storeStack">
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
        </interceptor-stack>

        <interceptor-stack name="retrieveStack">
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
        </interceptor-stack>

        <interceptor-stack name="appDefaultStack">
            <interceptor-ref name="defaultStack">
                <param name="exception.logEnabled">true</param>
                <param name="exception.logLevel">ERROR</param>
            </interceptor-ref>
        </interceptor-stack>
    </interceptors> 
```

而我的行动：

```
 <action name="update/*" class="comics.comics.ComicsAction" method="view">
        <interceptor-ref name="retrieveStack" />
        <param name="key">{1}</param>
        <result>/comics/comics-chapters.jsp</result>
    </action>

    <action name="add" class="comics.comics.ChapterAction" method="add">
        <interceptor-ref name="storeStack" />
        <result type="redirectAction">
            <param name="parse">true</param>
            <param name="key">${key}</param>
            <param name="actionName">update</param>
            <param name="namespace">/comics</param>    
        </result>

        <result name="input" type="redirectAction">
            <param name="parse">true</param>
            <param name="key">${key}</param>
            <param name="actionName">update</param>
            <param name="namespace">/comics</param>    
        </result>

    </action> 
```

在我的comics-chapters.jsp 页面中，字段错误消失了。但是当我将输入结果更改为：

```
 <result name="input">/comics/comics-chapters.jsp</result> 
```

显示字段错误。

当我的输入结果是一个动作时如何显示字段错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:25:54.263

这是因为当你使用时`redirectAction`，Struts2 正在创建一个新的请求和响应对象，并且会清除值堆栈并将新的请求和响应放入值堆栈中，这样它就会覆盖以前的数据。

您在这里几乎没有选择

1.  将您的消息存储在操作中，然后`redirectAction`您可以从操作中获取它们并将它们显示给用户。
2.  使用[MessageStoreInterceptor](http://struts.apache.org/2.x/struts2-core/apidocs/org/apache/struts2/interceptor/MessageStoreInterceptor.html)

对范围结果的长期未决请求将能够处理此类用例，但我相信它会出现在 struts-3.x（又名 2.5）版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:32:16.080

尝试将`store`拦截器放在`defaultStack`这样的顶部：

```
<interceptor-stack name="storeStack">
         <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
         </interceptor-ref>
         <interceptor-ref name="defaultStack"/>

</interceptor-stack>

<interceptor-stack name="retrieveStack">
         <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
         </interceptor-ref>
         <interceptor-ref name="defaultStack"/>

 </interceptor-stack> 
```

请***始终***注意拦截器的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:47:31.980

正如 Umesh 所说，您指定为结果的 redirectAction 会导致在调用新操作时从值堆栈中清除错误消息。在这种情况下，您可以使用的另一个选项是使用[链](http://struts.apache.org/2.x/docs/chain-result.html)结果。链结果导致调用另一个操作，将所有现有值保留在值堆栈中，但错误消息除外，您必须为此使用[ChainingInterceptor](http://struts.apache.org/2.x/docs/chain-result.html)。
您还可以查看[这篇博](http://chrisiecorner.blogspot.gr/2012/09/struts2-action-patterns.html)文，了解有关如何使用链结果和 ChainingInterceptor 的更多详细信息。

# android - 创建 AVD 时 LCD 像素宽度、高度和分辨率有什么区别？(android)

> ID：12579973
> 
> 赞同：0
> 
> 时间：2012-09-25T09:25:54.237
> 
> 标签：android, pixel, avd, screen-resolution

在为 android 创建 AVD 时，LCD 像素宽度、高度和分辨率有什么区别？![在此处输入图像描述](../Images/8fe73f51f7a79e18629e77ea0568010e.png)

更清楚地说，我需要为分辨率为 1024x768 的设备开发一个应用程序，所以有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:43:04.407

在 Skin Resolution 区域中指定模拟器的分辨率。根据我的经验，LCD Pixel Height 和 LCD Pixel Width 设置被忽略。如果皮肤没有指定分辨率，可能唯一会使用它们。

# php - 如何将自定义字段添加到 Wordpress 中的帖子 RSS 标题

> ID：12579974
> 
> 赞同：0
> 
> 时间：2012-09-25T09:25:55.080
> 
> 标签：php, wordpress, rss

我找到了一个关于如何将类别添加到 wordpress RSS 提要的主题，但是如何将自定义字段添加到 wordpress RSS 提要标题？

```
 function rssTitle_add_categories($title) {
    $category_array = array_map(create_function('$category', 'return $category->name;'), get_the_category());
    $categories = join(', ', $category_array);
    $title = $title . ' - '.$categories.' - ';
    return $title;
}
add_filter('the_title_rss', 'rssTitle_add_categories'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:52:45.310

您只需使用自定义字段[`get_post_meta`](http://codex.wordpress.org/Function_Reference/get_post_meta)（或插件 API，如果您使用自定义字段插件）并将其添加到您的标题中，例如：

```
function rssTitle_add_categories($title) {
    global $wp_query;

    $category_array = array_map(create_function('$category', 'return $category->name;'), get_the_category());
    $categories = join(', ', $category_array);

    $field = get_post_meta($wp_query->post->ID, 'your_field_name', true);

    $title = $title.' - '.$categories.' - '.$field;
    return $title;
}
add_filter('the_title_rss', 'rssTitle_add_categories'); 
```

# android - 使用 Cygwin 创建 .SO 文件时出错

> ID：12579975
> 
> 赞同：2
> 
> 时间：2012-09-25T09:26:02.667
> 
> 标签：android, c++, c, opencv, android-ndk

我正在尝试使用 Cygwin 为我的 Android ndk 应用程序创建 .so 文件。但是 Cygwin 终端显示以下错误。

```
$ /cygdrive/c/native_work/android-ndk-r8b/ndk-build
Cygwin         : Generating dependency file converter script
Compile++ thumb  : main <= main.cpp
In file included from jni/NotePaperDetector.hpp:4:0,
             from jni/main.cpp:1:
jni/NoteLocation.hpp:4:30: fatal error: opencv2/opencv.hpp: No such file or directory
compilation terminated.
/cygdrive/c/native_work/android-ndk-r8b/build/core/build-binary.mk:255: recipe for         target `obj/local/armeabi/objs/main  /main.o' failed
make: *** [obj/local/armeabi/objs/main/main.o] Error 1 
```

我的 jni 文件夹中有以下文件 -

```
NotePaperDetector.hpp 
NotePaperDetector.cpp 
NoteDescription.hpp 
NoteDescription.cpp 
NoteLocation.hpp 
NoteLocation.cpp 
ImageUtils.hpp
ImageUtils.cpp
MarkerCandidate.hpp
MarkerCandidate.cpp
main.cpp 
```

Android.mk 文件是 -

```
 LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Here we give our module name and source file(s)
LOCAL_MODULE    := main
LOCAL_SRC_FILES := main.cpp

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:28:46.220

系统找不到 OpenCV 安装路径。您需要将`LOCAL_C_INCLUDES`变量添加到指向该`OpenCV`文件夹的 Android.mk，即：

```
LOCAL_PATH := $(call my-dir)
LOCAL_C_INCLUDES += $(LOCAL_PATH)/../../opencv 
```

# sql-server - 在 SQL Server 中查找韩语单词（任何 Unicode 字符）中的韩语字母（任何 Unicode 字符）的索引

> ID：12579977
> 
> 赞同：4
> 
> 时间：2012-09-25T09:26:16.910
> 
> 标签：sql-server, unicode, sql-server-2008-r2, cjk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:48:05.093

您必须分解韩语音节并将它们存储到 SQL 数据库中的单独列中（如 ㅈㅓㅇㅅㅜㅇㅕㄴ 用于정수연）。我建议您编写一个小型自定义应用程序来解析您的数据库，分解所有韩语音节，并将结果保存到单独的列中。

## 编辑

下面是一些分解韩文音节的 Python 代码：

```
#!/usr/local/bin/python
# -*- coding: utf8 -*-
import codecs, sys, os, math

JLT="ㄱ,ㄲ,ㄴ,ㄷ,ㄸ,ㄹ,ㅁ,ㅂ,ㅃ,ㅅ,ㅆ,ㅇ,ㅈ,ㅉ,ㅊ,ㅋ,ㅌ,ㅍ,ㅎ&quot;.split(",")
JTT=",ㄱ,ㄲ,ㄱㅅ,ㄴ,ㄴㅈ,ㄴㅎ,ㄷ,ㄹ,ㄹㄱ,ㄹㅁ,ㄹㅂ,ㄹㅅ,ㄹㅌ,ㄹㅍ,ㄹㅎ,ㅁ,ㅂ,ㅂㅅ,ㅅ,ㅆ,ㅇ,ㅈ,ㅊ,ㅋ,ㅌ,ㅍ,ㅎ&quot;.split(",")
JVT="ㅏ,ㅐ,ㅑ,ㅒ,ㅓ,ㅔ,ㅕ,ㅖ,ㅗ,ㅘ,ㅙ,ㅚ,ㅛ,ㅜ,ㅝ,ㅞ,ㅟ,ㅠ,ㅡ,ㅢ,ㅣ&quot;.split(",")
SBase=0xAC00
SCount=11172
TCount=28
NCount=588

def HangulName(a):
 b=a.decode('utf8')
 sound=''
 for i in b:
  cp=ord(i)
  SIndex = cp - SBase
  if (0 > SIndex or SIndex >= SCount):
#  "Not a Hangul Syllable"
    pass

  LIndex = int(math.floor(SIndex / NCount))
  VIndex = int(math.floor((SIndex % NCount) / TCount))
  TIndex = int(SIndex % TCount)
  sound=sound+(JLT[LIndex] + JVT[VIndex] + JTT[TIndex]).lower()
 return sound

print HangulName("정수연&quot;) 
```

> dda$ python test.py
> ㅈㅓㅇㅅㅜㅇㅕㄴ

# php - 是否有替代 TCPDF::writeHTML 来获取内联粗体文本

> ID：12579984
> 
> 赞同：5
> 
> 时间：2012-09-25T09:26:24.447
> 
> 标签：php, tcpdf

我正在使用 TCPDF 生成仅包含文本的 PDF。

首先，我使用 multiCell 添加文本，现在我想让两个单词变为粗体（在文本中间的某个位置）。所以我改变了我的代码以使用 writeHTML 并用 b-tags 包围 i ，瞧，这些词现在是血腥的。但与此同时，我的文档大小从 41kB 变为 205kB，这似乎有点极端。

无论如何在文本中使用内联 blod 格式而不将 PDF 大小增加 300%？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T10:32:13.250

`Cell()`正如我在评论中所说，在使用or之前尝试更改字体`Multicell()`，示例如下：

```
$pdf=new PDF();
...
$pdf->Cell(180,10,'bla bla',0,1,'C');
$pdf->SetFont('Times','B',16);            //Change to bold
$pdf->Cell(180,10,'bla bla bla',0,1,'C'); //this printed in bold
$pdf->SetFont('Times','',12);             //Revert to plain font
$pdf->Cell(180,10,'bla bla bla',0,1,'C'); 
```

# ios - How to flip a CALayer around its Y-axis?

> ID：12579985
> 
> 赞同：2
> 
> 时间：2012-09-25T09:26:24.447
> 
> 标签：ios, core-animation, perspective, rotational-matrices

I use this code inside a subclass of CALayer which instances are sublayers of the root CALayer.

```
-(void)setSelected:(bool)s {
    selected=s;
    if (s)
    {
        CATransform3D  rot = CATransform3DMakeRotation(M_PI, 0, 1, 0);
        rot.m34=-1.0 / 200;
        [self setTransform:rot];

    }
    else
    {
            CATransform3D  rot = CATransform3DMakeRotation(0, 0, 1, 0);
        rot.m34=-1.0 / 200;
        [self setTransform:rot];
    }
} 
```

When the selected property to set to TRUE, here is what happens: the rotation is done until the angle is equal to M_PI/2, then the layer disappears because it is orthogonal. The end of the animation is wrong: the edge that appeared to grow in the first part of the animation (for example on the left side), ends the animation on the left side instead of the right side. However the content is flipped.

I think this has something to do with the interpolation between the two rotation matrices but I can't understand exactly what is happening.

Details: The animation looks like it is doing this:

1.  increment rotation around Y axis by +Pi/2
2.  content flipping
3.  increment rotation around Y axis by -Pi/2, as if it bounced of the (yz)plane

The flipped content is what I am trying to achieve.

Here are the frames of the animation I get. As you can see, the small side of the trapezoid is always of the left; it should be on the right on at the end of the animation (top right frame). ![A layer rotating around the Y-axis](../Images/4f03c2a1db1f4c636802b85391a235b1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-10T09:10:36.320

如果有人只想水平翻转图像或视图的方向

```
yourView.layer.transform = CATransform3DMakeScale(-1, 1, 1); 
```

或者

```
yourView.layer.affineTransform =  CGAffineTransformMakeScale(-1, 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T14:30:46.983

你的变换的数学是不正确的。您应该在旋转变换之后应用透视变换，这意味着连接两个变换。更改旋转变换的 m34 系数并不等效。

您应该用以下代码替换您的代码：

```
-(void)setSelected:(bool)s {
    selected=s;
    CATransform3D perpectiveTransform = CATransform3DIdentity;
    perpectiveTransform.m34 =-1.0 / 200;

    if (s)
    {

        CATransform3D  rot = CATransform3DMakeRotation(M_PI, 0, 1, 0);
        [self setTransform:CATransform3DConcat(rot, perpectiveTransform)];

    }
    else
    {
        CATransform3D  rot = CATransform3DMakeRotation(0, 0, 1, 0);
        [self setTransform:CATransform3DConcat(rot, perpectiveTransform)];
    }
} 
```

顺便说一句，应用透视变换通常更方便的方法是使用超层的`sublayerTransform`属性，从而将其应用于每个子层（如果需要）。

这将产生类似：

```
self.superlayer.sublayerTransform = perspectiveTransform;  //do this in your setup
....
self.transform = rot; 
```

以获得相同的外观结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:38:46.387

想象一下，您的图层是一块平坦的半透明塑料，上面投射有图像，因此它的两面都发光。在 pi/2 旋转时，它是边缘打开的，因此它消失了。当您的旋转大于 pi/2 但小于 pi 时，塑料平板的背面就会暴露出来。因为它是半透明的，所以你可以看到图像的背面，但是因为你是从背面看到的，所以它是镜像的。当角度达到 pi 时，纸张在 y 轴上翻转了 180 度。它是倒置的，你可以从后面看到图像，所以它是倒着的。

# javascript - How to get only selected checkboxes in angularjs?

> ID：12579986
> 
> 赞同：8
> 
> 时间：2012-09-25T09:26:24.997
> 
> 标签：javascript, angularjs

I have `ng-repeat`ed data, and am trying to get only the ones the user has selected. I'm not sure how to do it though, this is what I have:

HTML:

```
<div data-ng-controller="MyCtrl">
    <ul>
        <li data-ng-repeat="record in records">
            <input type="checkbox" ng-model="record.Id"> {{record.Id}}
        </li>
    </ul>
    <a href="javascript:;" data-ng-click="ShowSelected()">Show Selected</a>
</div> 
```

JS:

```
function MyCtrl($scope) 
{
    $scope.records = [ { "Id": 1 }, { "Id": 2 }, { "Id": 3 } ];
    $scope.ShowSelected = function() 
    {
        // how can I get only the selected records here ?
    }
} 
```

I did get it working one way - by adding a `isSelected:false` property to each object and changing the `ng-model` of the checkbox to `record.isSelected`, I can then filter on that in the `ShowSelected` function. This seems inefficient though, I don't want to be adding extra properties to the model if can avoid it.

Is there a better way ?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T09:48:12.203

### JavaScript

```
var app = angular.module('plunker', ['ui']);

app.controller('MyCtrl', function($scope) {
    $scope.records = [ { "Id": 1 }, { "Id": 2 }, { "Id": 3 } ];
    $scope.selected = {};
    $scope.ShowSelected = function() {
      $scope.records = $.grep($scope.records, function( record ) {
        return $scope.selected[ record.Id ];
      });
    };      
}); 
```

### HTML

```
<div data-ng-controller="MyCtrl">
    <ul>
        <li data-ng-repeat="record in records">
            <input type="checkbox" ng-model="selected[record.Id]"> {{record.Id}}
        </li>
    </ul>
    <a href="javascript:;" data-ng-click="ShowSelected()">Show Selected</a>
</div> 
```

[http://plnkr.co/edit/lqtDQ6](http://plnkr.co/edit/lqtDQ6)

您可以单独存储标志并使用它来过滤数据。

# 由于某些 CDN 链接已损坏，因此更新了 plunk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T18:26:17.877

我相信最好的方法是将属性“isSelected”添加到您的记录中并绑定到该值。像这样的东西：

```
<input type="checkbox" ng-model="record.isSelected"> 
```

您可以做的另一件事（特别是如果您“不能”将该额外属性添加到记录中，将是维护一个选定项目的数组，并在用户进行选择时从选定的数组中添加/删除它们：

```
<input type="checkbox" ng-change="recordSelected(result)" ng-true-value="{{record.id}}" ng-false-value="{{-record.id}}" ng-model="result"> 
```

recordSelected 函数将在您的控制器中处理，以从选定的记录列表中添加/删除和记录。

PS：我用了一个否定的记录id来表示该记录未被选中。

# html - Keeping the same style in each page but sometimes having an element that is slightly different

> ID：12579988
> 
> 赞同：0
> 
> 时间：2012-09-25T09:26:36.223
> 
> 标签：html, css

I have a situation where I am using a list of images on certain pages of my website. Say I have a list that appears horizontally in one page but I want the same list to appear vertically in another page, would I have to create a whole new div so that one list appears horizontally and the other vertically like this:

```
#imagevertical {
}

#imagehorizontal {
} 
```

This doesn't seem that bad but where you have lots and lots of web pages that you want your image list appearing slightly different in each one, it can be fairly messy.

Is there any alternative ways of doing this?

Thanks guys

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:28:04.350

制作一个外部样式表并将样式放在每个页面中，您可以通过 CSS 提供略有不同。

```
external < internal < inline 
```

您也可以使用`!important`.

如果你在风格上产生冲突，风格就会不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:42:34.960

您不需要更改每个页面上 div 的名称，只需更改应用于它的样式，因此使用名为“imagelist”的 div 并应用样式表中的所有常见样式，然后将额外样式应用于页面本身。

在 CSS 中：

```
#imagelist { common styles...} 
```

在一个 HTML 页面中：

```
<style type="text/css">
    #imagelist { something that makes it vertical... }
</style> 
```

在另一个 HTML 页面中：

```
<style type="text/css">
    #imagelist { something that makes it horizontal... }
</style> 
```

页内样式将覆盖从外部样式表导入的样式，因此无需更改 div 的名称并重新指定两者之间的所有常用样式。

或者，您可以为此创建水平和垂直类：

CSS：

```
 #imagelist { common styles... }
 .horizontal { something that makes it horizontal... }
 .vertical { something that makes it vertical... } 
```

水平页面的 HTML：

```
 <div id="imagelist" class="horizontal">content...</div> 
```

垂直页面的 HTML：

```
 <div id="imagelist" class="vertical">content...</div> 
```

我认为这可能是比第一个更好的解决方案。

# c# - 打开 Outlook“新邮件”对话框并从 ASP.NET 网页插入附件

> ID：12579990
> 
> 赞同：0
> 
> 时间：2012-09-25T09:26:39.170
> 
> 标签：c#, asp.net, email, outlook

我想知道是否可以打开 Outlook 的“新邮件”对话框并从 ASP.Net 网页插入附件。

我正在尝试从 Intranet 运行它，并且我的台式机上确实有 Outlook，这是我打开页面的地方，这里的其他人也是如此。

我将不胜感激任何想法，帮助，教程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:32:57.717

可能你可以在 IE 中使用一些 ActiveX 对象来做到这一点，但是使用常规的 JS/HTML 你不能做这样的事情。从浏览器打开 Outlook 窗口的唯一方法是`<a href="mailto:...."`打开默认邮件程序（它可能是与 Outlook 不同的程序）。但这是非常有限的选择（正文大小有限，没有 html，没有附件等）

假设这里最好的方法是从服务器发送电子邮件。您可以向用户询问电子邮件正文和收件人列表并将其发送到使用`System.Net.Mail`命名空间。

# iphone - GLTapLabel 的问题 + 某些字符不会被绘制

> ID：12579993
> 
> 赞同：0
> 
> 时间：2012-09-25T09:26:48.377
> 
> 标签：iphone, ios, uilabel, nsscanner

我正在将[GLTapLabel](https://github.com/laullon/GLTapLabelDemo)用于一个项目，几乎一切工作正常。

当我尝试显示以 a`+`或任何其他特殊字符开头的文本时，整个内容如下所示：[屏幕截图 1](http://d.pr/i/zsbq)（左：模拟器中的输出，右：界面构建器中的文本）。

通常它就像[ScreenShot 2](http://d.pr/i/phmp)中看到的魅力一样。

我认为这与 `GLTapLabel.m`（在`drawTextInRect`函数中）的这一行有关：

```
while ([s scanCharactersFromSet:[NSCharacterSet symbolCharacterSet] intoString:&read]) 
```

有什么解决办法吗？我只是错过了什么吗？我以前从来没有用`NSScanner`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:39:56.877

我昨晚刚遇到这个问题，我花了 3 个小时才弄清楚。你在正确的轨道上出了什么问题，但它更多地与范围有关。无论如何忘记这个问题，只需用我的解决方案替换最后一个 while 语句，你应该会很好。我已经添加了一些评论，所以你可以跟着看看我做了什么。享受！

```
 while ([s scanCharactersFromSet:[NSCharacterSet symbolCharacterSet] intoString:&read]) { //symbolCharacterSet
        for(int idx=0;idx<read.length;idx=idx+6) //For Some Reason "6" works with + sign and Emojis... 

        {

            NSString *word=[read substringFromIndex:0];  //substringWithRange:NSMakeRange(idx, 2)]; <-- I switched out the range and decided to get the WHOLE string.
            CGSize s = [word sizeWithFont:self.font];
            if(drawPoint.x + s.width > rect.size.width) {
                drawPoint = CGPointMake(0, drawPoint.y + s.height);

            } 
```