# StackOverflow 问答 14410000-14410999

# jquery - 响应式网格 2 列需要相同的高度

> ID：14410005
> 
> 赞同：0
> 
> 时间：2013-01-19T00:57:36.527
> 
> 标签：jquery, html, css

我有一个响应式网站，它有一个主要内容区域 ( `.content-wrapper`) 和一个侧边栏区域 ( `.search-listing`)。我需要两列高度相同。目前我正在尝试使用以下内容：

```
jQuery(document).ready(function() {
    var divone = jQuery(".search-listing").height();
    var divtwo = jQuery(".content-wrapper").height();

    var maxdiv = Math.max(divone, divtwo);

    jQuery(".search-listing").height(maxdiv);
    jQuery(".content-wrapper").height(maxdiv);

}); 
```

但问题是，`.search-listing`从页面开始向下比`.content-wrapper`. 在这里你可以看到它：

[http://landpros.turnpostinteractive.com/LandPros_Results_2.html](http://landpros.turnpostinteractive.com/LandPros_Results_2.html)

侧边栏的高度相同，但我需要减去一些像素，因为 div .search-listing 在页面上的起始位置与 .content-wrapper 不同。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:30:25.620

如果 .content-wrapper 高于 .map、.search-listing 和 .search-listing-header 的总和，则将 .search-listing 设置为 .content-wrapper 减去 .map 和 .search-listing-header 的高度.

如果 .map 和 .search-listing 的总和高于 .content wrapper，则将 .content-wrapper 的高度设置为 .map、.search-listing-header .search-listing 的总和。

```
<script type="text/javascript">
jQuery(document).ready(function() {
    var searchListing = jQuery(".search-listing").height();
    var wrapper = jQuery(".content-wrapper").height();
    var mapping = jQuery(".map").height();
    var header = jQuery(".search-listing-header").height();

    if ( wrapper > searchListing+mapping+header ) {
      jQuery(".search-listing").height(wrapper-mapping-header);
    }

    else {
      jQuery(".content-wrapper").height(searchListing+mapping+header);
    }

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:17:59.753

可能的[克隆](https://stackoverflow.com/questions/6041654/achieving-equal-height-columns-in-a-responsive-flexible-layout) 作者得到了[答案](http://css-tricks.com/equal-height-blocks-in-rows/)

# google-maps - 如何在对 Google Places api 的单个请求中对多个位置进行附近搜索

> ID：14410009
> 
> 赞同：4
> 
> 时间：2013-01-19T00:57:53.793
> 
> 标签：google-maps, google-places-api, google-places

我想使用 google places api 附近的搜索来获取多个特定位置。使用 NAME 参数查询多个位置的格式是什么。该 api 针对单个位置显示以下内容：

```
 https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere 
```

我在文档中读到，您可以通过附加 | 来指定多种类型。.

如何在 google place api 附近搜索中指定多个名称参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-29T10:43:28.767

如果要使用多种类型进行搜索，可以使用按位或运算符。请参阅附加的最后一行，其中我使用了 3 种不同的类型。这是一个例子

```
private String getUrl(){

    StringBuilder sb = new StringBuilder("https://maps.googleapis.com/maps/api/place/nearbysearch/json?");
    if(mLastLocation != null){
        sb.append("location=" + mLastLocation.getLatitude() + "," + mLastLocation.getLongitude());
    }
    sb.append("&radius=" + searchWithin);
    sb.append("&sensor=true");
    sb.append("&key=" + getString(R.string.map_api_key));
    sb.append("&types=" + "restaurant|atm|bank");

    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-13T22:54:27.457

您必须在请求变量的“名称”字段中指定不同的名称。用 | 分隔它们 并用引号包围。

```
var request = {
  location: new google.maps.LatLng(-33.8665433,151.1956316),
  radius: '500',
  name: "name1|name2|name3",
  types: ['store']
};

service = new google.maps.places.PlacesService(map);
service.nearbySearch(request, callback); 
```

[https://developers.google.com/maps/documentation/javascript/places#place_search_requests](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)

# algorithm - 使用回溯算法找到获得至少 x 奖励积分的最快周期

> ID：14410011
> 
> 赞同：2
> 
> 时间：2013-01-19T00:58:08.663
> 
> 标签：algorithm, path, backtracking

有一张带点的地图：

![带有多个节点的地图，每个节点旁边都有一个绿色和红色数字](../Images/f3bf43b828ee44c87f8bdbe2ba31f04c.png)

每个点旁边的绿色数字是该点的 ID，红色数字是该点的奖励。我必须找到在 #1 点开始和结束的最快周期，并且至少获得 x（在这种情况下为 15）加分。我可以多次使用城市；但是，我只会获得一次奖励积分。我必须使用回溯算法来做到这一点，但我真的不知道从哪里开始。我已经对此进行了研究，但我看不出这与回溯之间的联系。

输出将如下所示：

```
(1,3,5,2,1) (11.813 length) 
```

![与以前相同的地图，预期的输出路线以橙色突出显示](../Images/f2ad64d854c4d0102108bdd3e95fed42.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:33:55.557

`Backtracking`是一种用于减少问题搜索空间的技术。所以，你有一个问题，你有一个有最优和非最优解的空间，你必须选择一个最优解。

在您的问题中，一个简单的策略是生成所有可能的解决方案。但是，此解决方案将遍历整个解决方案空间，并且有时会意识到*不会找到最佳解决方案*。

这是 的主要作用`backtracking`：您遍历解决方案的空间，并且当您到达一个给定点时，如果您知道如果在同一路径上继续搜索将不会获得最佳答案，您可以简单地*悔改*所采取的步骤，返回遍历，然后选择您发现无助的步骤之后的步骤。

在您的问题中，由于可以多次访问节点，因此想法是为每个顶点维护一个顶点列表，该列表按与列表的顶点所有者的距离递减排序。

然后，您可以简单地从其中一个顶点开始，逐个顶点地在图上进行遍历，始终检查目标是否仍然可以实现，并在发现无法解决某个问题时回溯解决方案观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:37:11.020

您可以使用递归回溯算法列出所有可能的循环并保留最佳答案：

```
visitCycles(list<Int> cycleSoFar)
{
  if cycle formed by closing (cycleSoFar) > best answer so far
  {
    best answer so far = cycle formed by closing (cycleSoFar)
  }
  if (cannot improve (cycleSoFar))
  {
    return
  }
  for each point that makes sense
  {
    add point to cycleSoFar
    visitCycles(cycleSoFar)
    remove point from cycleSoFar
  }
} 
```

添加更多细节：

1) 一个循环是不好的，除非它至少有 15 个奖励点。如果它有任何好处，那么它比迄今为止最好的答案更好，如果它更短的话。

2）当您向循环添加更多点时，您只会使其更长，而不是更短。因此，如果您找到了可能的答案并且 cycleSoFar 已经至少与该可能的答案一样长，那么您无法改进它，您还不如返回。

3）由于重复使用循环中的积分不会获得任何奖励积分，因此尝试两次添加积分是没有意义的。

4）您可以通过以合理的顺序迭代“每个有意义的点”来加速程序，例如首先选择离当前点最近的点。您可以通过为每个点预先计算按距离升序排列的所有其他点的列表来节省时间（或者您可能不会 - 您可能必须通过实验尝试不同的方案）。

# php - Codeigniter 内部的迁移

> ID：14410013
> 
> 赞同：1
> 
> 时间：2013-01-19T00:58:47.970
> 
> 标签：php, mysql, sql, codeigniter, auto-increment

今天早些时候，我注册了一个 nettuts plus 帐户，并一直在看这个关于 codeigniter cms 构建的系列。我正在创建一个迁移文件来创建我的用户表。对于我的用户 ID，我更喜欢使用看起来像这样的用户 ID，并为下一个插入的用户`10000`递增。`10001`我想弄清楚的是如何设置，以便在创建用户表时让密钥从`10000`

[https://tutsplus.com/course/build-a-cms-in-codeigniter/](https://tutsplus.com/course/build-a-cms-in-codeigniter/)

环顾四周后，我无法找到如何做到这一点。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:01:25.333

（我没有看视频）。创建表后，运行以下 SQL：

```
ALTER TABLE tablename AUTO_INCREMENT = 10000; 
```

更改`tablename`为表名

# sql - 改进/优化 SQL Server 中的 LEFT JOIN

> ID：14410017
> 
> 赞同：3
> 
> 时间：2013-01-19T00:59:23.213
> 
> 标签：sql, sql-server, sql-server-2008

我有一个相当长的查询（10 个表，每个表大约 60k 条记录），所有这些表都使用左连接连接，因为它们可以包含空值（所有这些）。

我看到了巨大的性能损失，我将其追踪到这段代码。

```
SELECT * 
FROM MAIN_TABLE d 
LEFT JOIN INSURANCES i on i.IMREDEM_CODE = d.IMREDEM_CODE 
                      and i.INS_TERMINATIONDATE IS NULL 
                      and INS_RANK = 0
                      and i.IMREINS_CODE = (SELECT TOP 1 IMREINS_CODE 
                                              from INSURANCES i2
                                             WHERE i2.IMREDEM_CODE = i.IMREDEM_CODE 
                                               and i2.INS_TERMINATIONDATE IS NULL 
                                               and i2.INS_RANK = 0
                                          ORDER BY TAG_SYSTEMDATE DESC) 
```

基本上我需要做的是保险表可能包含 0 条或多条记录，因为当他们更新保险时，它会执行插入而不是出于审计目的的更新。所以我必须加入表两次，在左连接上。此外，我需要对主要和次要保险执行两次此查询（主要是 rank = 0，次要是 rank =1。IMREDEM_CODE 是 D 表的 PK 和 i 表的 FK。

**答案在这里**：

```
left join INSURANCES i on i.IMREDEM_CODE = d.IMREDEM_CODE 
and i.IMREINS_CODE = (SELECT max(imreins_code) FROM INSURANCES i2  WHERE i2.IMREDEM_CODE = i.IMREDEM_CODE and i2.INS_TERMINATIONDATE IS NULL and i2.INS_RANK = 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:41:30.917

虽然我确信您可以进一步优化它，但我已经快速尝试了一下。您的执行计划将执行 3 次表扫描。你可以试试这个，它将减少到 2：

```
SELECT *
FROM Main_Table d
    LEFT JOIN 
        (SELECT TOP 1 *
         FROM Insurances 
         WHERE INS_TERMINATIONDATE IS NULL 
             AND INS_RANK = 0
         ORDER BY TAG_SYSTEMDATE DESC) i on i.IMREDEM_CODE = d.IMREDEM_CODE; 
```

可能有比 TOP 1 和 Order By 更好的方法，但我累了，暂时想不出。无论哪种方式，这绝对是更有效的。

这是包含两组查询的[SQL Fiddle 。](http://sqlfiddle.com/#!3/8694e/7)您可以在每个中看到执行计划。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:24:56.183

我相信以下内容会为您提供完全相同的结果，但速度更快；

```
 SELECT * 
     FROM MAIN_TABLE d 
LEFT JOIN INSURANCES i on i.IMREDEM_CODE = d.IMREDEM_CODE 
                      and i.IMREINS_CODE = select max(i.imreins_code) from INSURANCES
                      and i.INS_TERMINATIONDATE IS NULL
                      and i.INS_RANK = 0 
```

# emacs - 如何设置键绑定以在 emacs 中的某些模式下工作，而不是在其他模式下工作

> ID：14410018
> 
> 赞同：3
> 
> 时间：2013-01-19T00:59:28.127
> 
> 标签：emacs, elisp

如果这是一个愚蠢的问题，我很抱歉，但我一直在寻找如何做到这一点几个小时。我希望某些 elisp 函数绑定到特定的键绑定，并让这些键绑定根据当前缓冲区所在的模式调用函数。我将举一个例子。

```
(defun sml-create-comment ()
    "Documentation.."
    (interactive)
    (code-to-insert-comment)) 
```

我希望将此函数绑定到一个键，例如“Cc c”。如果我处于 sml 模式并输入“Cc c”，它会做一个 sml 评论；同样，如果我处于 c 模式，它会做出 ac 评论。如果我用这种奇怪的措辞或者它应该是显而易见的，我很抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T01:21:34.227

```
(eval-after-load 'sml-mode 
  '(define-key sml-mode-map (kbd "C-c c") 'sml-create-comment)) 
```

# javascript - 如何通过javascript确定触摸事件（或鼠标事件）中的真正xy坐标？

> ID：14410023
> 
> 赞同：3
> 
> 时间：2013-01-19T01:00:16.643
> 
> 标签：javascript, html, touch, coordinates, offset

我一直在处理触摸事件并且有一些代码工作得很好，直到画布没有从左上角开始。只要我在它之前添加任何内容，报告的事件就会被画布的位置偏移。

我通过在触摸的位置画一个圆圈来确定这一点。圆圈总是被画布从屏幕左上角的偏移量偏移。

查看 on touch start 的事件，我可以看到有一个 pageY 可用（在 chrome 中，使用 USB 调试）。但是当我用谷歌搜索它时，它似乎不是标准的一部分，并且似乎有人认为它可能会贬值（尽管我无法找到一种或另一种方式）。

所以我的问题是处理这个问题的最佳跨浏览器方法是什么（主要关注的是 safari 和 chrome，即 webkit，firefox 是一个不错的选择）？

鼠标事件也会出现同样的问题，为此我创建了[JSFiddle of the question](http://jsfiddle.net/metalskin/DG4fb/1/)。但是我不确定鼠标事件和触摸事件是否可以使用相同的属性。

我应该注意，我知道我可以对偏移量进行硬编码并且问题得到解决，但是我正在寻找一种使用手头信息而不需要任何特定于我的 html 的硬连线代码的解决方案。

要重新创建 JSFiddle，HTML、CSS 和 Javascript 如下：

```
<div class="title"></div>
<div class="container">
  <canvas id="myCanvas"></canvas>
</div> 
```

CSS：

```
body {
  background-color: #ff0000;
  margin: 0px;
}

canvas {
  display:block;
  position:absolute;
  width:100%;
  height:100%;
  background-color:#000;
}

.title {
  position:absolute;
  top:0px;
  left:0px;
  width: 100%;
  height: 40px;
  background-color: #888;
}

.container {
  width:auto;
  text-align:center;
  background-color:#777;
  width:100%;
  position:absolute;
  top:40px;
  left:0px;
  bottom:0px;
} 
```

Javascript：

```
var onMouseDown = function(e) {
    draw(document.getElementById('myCanvas').getContext('2d'), e.clientX, e.clientY);
}

$(function () {
    document.getElementById('myCanvas').addEventListener('mousedown', onMouseDown, false);
});

function draw(ctx, x, y) {
ctx.canvas.width = ctx.canvas.offsetWidth; 
ctx.canvas.height = ctx.canvas.offsetHeight;      

  var radius = 50;
  var lineWidth = 15;
  var r = 255;
  var g = 75;
  var b = 75;
  var a75 = 0.05;

  var adj = Math.abs(lineWidth / 2);

  rad = radius + adj;

  var stop1 = (rad - lineWidth) / rad;
  var stop2 = 0;
  var stop3 = stop1 + (1 - stop1) / 2;
  var stop4 = 0;
  var stop5 = 1;

  stop2 = stop3 - (stop3 - stop1) / 2;
  stop4 = stop3 + (stop5 - stop3) / 2;

  var radgrad = ctx.createRadialGradient(x, y, 0, x, y, rad);

  radgrad.addColorStop(stop1, 'rgba(' + r + ',' + g + ',' + b + ', 0)');
  radgrad.addColorStop(stop2, 'rgba(' + r + ',' + g + ',' + b + ', .4)');
  radgrad.addColorStop(stop3, 'rgba(' + r + ',' + g + ',' + b + ', 1)');
  radgrad.addColorStop(stop4, 'rgba(' + r + ',' + g + ',' + b + ', .4)');
  radgrad.addColorStop(stop5, 'rgba(' + r + ',' + g + ',' + b + ', 0)');

  ctx.fillStyle = radgrad;
  ctx.arc(x, y, rad, 0, 2 * Math.PI, true);
  ctx.fill();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T07:53:27.020

这应该工作：http: [//jsfiddle.net/DG4fb/3/](http://jsfiddle.net/DG4fb/3/)

你画布的顶部和左侧不是`clientX == 0; clientY == 0;`所以你需要计算偏移量。你的画布的左上角在哪里？它是它的`offsetLeft`和`offsetTop`加上它`offsetParent`的值和它`offsetParent.offsetParent`的值，等等。这就是该`recursiveOffsetLeftAndTop`函数为您处理的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T15:39:18.620

如果我们使用 PageX 和 PageY 而不是 ClientX 和 ClientY，它在我的情况下工作得很好......

```
 var offsets = recursiveOffsetLeftAndTop(canvas);
        var x = evt.targetTouches[0].pageX - offsets.offsetLeft;
        var y = evt.targetTouches[0].pageY - offsets.offsetTop; 
```

谢谢你的解决方案。

# javascript - 无法使用 firefox 从下拉列表中进行选择（在 Chrome 中工作）

> ID：14410026
> 
> 赞同：2
> 
> 时间：2013-01-19T01:00:47.397
> 
> 标签：javascript, html, css

我想要做的是能够在不改变手风琴的情况下从下拉菜单中进行选择。这适用于 Chrome。但是，当我在 Firefox 中尝试它时，它不再起作用。

[这](http://jsfiddle.net/fuLxu/)是我的jsfiddle。

为什么这在 Firefox 中不起作用？

我相信正是这段代码导致了问题（没有 selectOne 类的下拉菜单可以正常工作）：

```
$(function () {
  $('.selectOne').click(function(){
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:21:01.340

Try to upload the linked libraries. Have you linked the plugin. Accordian is a jQuery Plugin, not just jQuery.

# asp.net-mvc - asp.net MVC 4 中的第二个 MapRoute 不适用于参数

> ID：14410028
> 
> 赞同：3
> 
> 时间：2013-01-19T01:00:54.617
> 
> 标签：asp.net-mvc, vb.net, maproute

我想在我的第一个 MVC 4 项目中添加第二个 MapRoute，我在**Global.asax.vb中添加了这段代码**

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}")
    routes.MapRoute( _
        "Math", _
        "Calculator/{action}/{foo}/{intBar}", _
        New With {.controller = "Calculator", .action = "Add", .foo = ""} _
    )
    routes.MapRoute( _
        "Default", _
        "{controller}/{action}/{id}", _
        New With {.controller = "Default", .action = "Index", .id = ""} _
    ) 
```

这是我的控制器**/Controllers/CalculatorController.vb**

```
 Function Add(         ByVal foo     As String, 
                Optional ByVal intBar? As Integer = 1) As ActionResult
        ViewData("Message") = foo & " Welt"
        Return View()

    End Function 
```

现在我的问题，我做错了什么？

localhost:18118/Calculator/Add/Hallo - 消息只是“Welt”，但“Hallo”在哪里？

localhost:18118/Calculator/Add/Hallo/7 - 错误 404 ？为什么 ？

我希望你能帮助/教我。谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:03:37.343

问题是由以下事实引起的，当您调用时，您的两条路线“数学”和“默认”定义了不同的**命名**参数：

本地主机：18118/计算器/添加/你好

然后使用“默认”路由，命名参数为：

*   控制器 = 计算器
*   动作 = 添加
*   id = 你好

但是您的*Action* `Add`需要名为 的参数`foo`。我建议，将“数学”路由映射中的 foo 参数重命名为**id**：

```
 routes.MapRoute( _
        "Math", _
        "Calculator/{action}/{id}/{intBar}", _ ' foo renamed to id
        New With {.controller = "Calculator", .action = "Add", .id = ""} _
    ) 
```

并重命名 Action 参数：`Function Add(ByVal id As String,...`使其工作。

*注意：重命名是建议使其正常工作，而不是说这是最好的方法......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:07:51.363

我认为这是因为您使用默认对象中`foo`的语句覆盖了 URL 中的参数。`.foo = ""`你映射`{foo}`你的路线，所以它接受你的'Hallo'字符串 - 但是你用空字符串替换它。

尝试`.foo = ""`从您的默认对象中取出。

# zend-framework - 如何使用自签名证书通过 SSL 创建 HelloWorld Zend Soap 服务器和客户端

> ID：14410038
> 
> 赞同：2
> 
> 时间：2013-01-19T01:02:34.820
> 
> 标签：zend-framework, soap, openssl

我正在尝试通过 SSL 创建一个基本的 SOAP 服务器。在我的生产网站上提供 Web 服务之前，我必须在具有自签名证书的开发系统上对其进行测试（现在谁的身份验证是一个问题）。以下是我在这方面面临的问题：

1.  当我尝试调用[https://zendsoap.lan/Zend_Soap_server.php?wsdl](https://zendsoap.lan/Zend_Soap_server.php?wsdl)时 ，它工作正常，我可以查看 wsdl。
2.  但是当我尝试[https://zendsoap.lan/Zend_Soap_server.php](https://zendsoap.lan/Zend_Soap_server.php)时，我得到了这个：

> SOAP 错误：解析 WSDL：无法从“ [https://zendsoap.lan/Zend_Soap_Server.php?wsdl](https://zendsoap.lan/Zend_Soap_Server.php?wsdl) ”加载：无法加载外部实体“ [https://zendsoap.lan/Zend_Soap_Server.php?wsdl](https://zendsoap.lan/Zend_Soap_Server.php?wsdl) ”

这是我应该得到的东西还是一些漂亮的 HTML 页面描述了在 NuSoap 中的 web 服务的使用。

我在开发服务器上运行它时尝试了 verify_peer=>false，因此无需验证我自己创建的证书，但显然在生产中我希望验证证书。这个东西在 NuSoap 上**工作得很好，**但是 NuSoap 中的大部分东西对于我们运行 PHP 5.4.6 的服务器来说已经被弃用了，所以对我来说使用 PHP 的 SOAP 扩展是最可靠的解决方案。我使用 Zend 的原因是我们正在将我们的系统从某个第三方框架迁移到 Zend 框架，并且每天我都会收到来自客户端的请求以添加这个和那个新组件，我假设如果我开发来自客户端的每个新请求使用 Zend 库之后，我很容易在后期迁移到 Zend 框架。

openssl 已启用并尝试定义 local_cert，但没有 Joy。

我希望我在那里有所了解。

**基本上寻找一些说明如何为此目的创建自签名证书，服务器和客户端的代码应该是什么。**

# sql-server-2008 - 对分组查询进行排序

> ID：14410042
> 
> 赞同：0
> 
> 时间：2013-01-19T01:03:09.097
> 
> 标签：sql-server-2008, tsql

我正在使用以下查询来显示我的数据库有数据的月份列表。

```
SELECT DATENAME(MONTH, EVENT_DATE) + ' ' + DATENAME(YEAR, EVENT_DATE) AS MonthYear
FROM [ODA].[dbo].[REPORT_CASE_EXT]
GROUP BY DATENAME(MONTH, EVENT_DATE) + ' ' + DATENAME(YEAR, EVENT_DATE) 
```

如果我将以下排序添加到查询中，我会收到错误，因为它们没有出现在 groupby 中

```
SORT BY DATENAME(YEAR, EVENT_DATE), DATENAME(MONTH, EVENT_DATE) 
```

有没有办法完成这种排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:09:20.293

如果您`ORDER BY`在`GROUP BY`.

```
ORDER BY
    DATENAME(MONTH, EVENT_DATE) + ' ' + DATENAME(YEAR, EVENT_DATE) 
```

但是您需要向 中添加更多信息`GROUP BY`才能按时间顺序而不是按字母顺序排序（否则二月在一月之前）：

```
GROUP BY
    datename(YEAR, EVENT_DATE),
    datename(MONTH, EVENT_DATE),
    datepart(YEAR, EVENT_DATE),
    datepart(MONTH, EVENT_DATE)
ORDER BY
    datepart(YEAR, EVENT_DATE),
    datepart(MONTH, EVENT_DATE) 
```

# java - 有没有办法将异步 I/O 操作排入队列？

> ID：14410044
> 
> 赞同：1
> 
> 时间：2013-01-19T01:03:23.043
> 
> 标签：java, asynchronous, queue, nio

具体来说，我正在寻找的行为是这样的：读取操作同时发生，并且将在所有挂起的写入操作完成后执行。写操作总是等到所有其他读/写操作完成。关闭操作总是等到所有其他读/写操作完成。换句话说，这些操作应该排队。

NIO FileLocks 的官方文档没有指定这种行为。事实上，它指出：

> 文件锁代表整个 Java 虚拟机持有。它们不适用于控制同一虚拟机内的多个线程对文件的访问。

在提交新的 I/O 请求之前，我已经考虑过手动对所有请求进行排队并在所有未完成的 Futures 上调用 get() ，但我不知道这是否是一个好主意。

我怎样才能实现这种行为？

编辑：感谢 fge 的见解，我设法找到了解决问题的基本方法：

```
import java.nio.file.Path;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;

public class ChannelAccessFactory {

    public static final ExecutorService IO_THREADS = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());

    private final Path file;
    private final ReadWriteLock lock;

    public ChannelAccessFactory (Path file){
        this.file = file;
        this.lock = new ReentrantReadWriteLock();
    }

    public ReadWriteLock getLock(){
        return lock;
    }

    public ChannelAccess newAccess() throws Exception{
        return new ChannelAccess(file, lock);
    }

} 
```

包装频道类：

```
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.channels.AsynchronousFileChannel;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import java.util.concurrent.locks.ReadWriteLock;

public class ChannelAccess implements AutoCloseable{

    private final ReadWriteLock lock;
    private final AsynchronousFileChannel channel;

    protected ChannelAccess (Path file, ReadWriteLock lock) throws Exception{
        this.lock = lock;
        this.channel = AsynchronousFileChannel.open(file, StandardOpenOption.READ, StandardOpenOption.WRITE);
    }

    public Future<Integer> read(final ByteBuffer buffer, final long position){
        return ChannelAccessFactory.IO_THREADS.submit(new Callable<Integer>(){
            @Override
            public Integer call() throws InterruptedException, ExecutionException{
                lock.readLock().lock();
                try{
                    return channel.read(buffer, position).get();
                }
                finally {
                    lock.readLock().unlock();
                }
            }
        });
    }

    public Future<Integer> write(final ByteBuffer buffer, final long position){
        return ChannelAccessFactory.IO_THREADS.submit(new Callable<Integer>(){
            @Override
            public Integer call() throws InterruptedException, ExecutionException {
                lock.writeLock().lock();
                try{
                    return channel.write(buffer, position).get();
                }
                finally {
                    lock.writeLock().unlock();
                }
            }
        });
    }

    public long size() throws Exception{
        lock.readLock().lock();
        try{
            return channel.size();
        }
        finally{
            lock.readLock().unlock();
        }
    }

    @Override
    public void close() {
        lock.readLock().lock();
        try{
            channel.close();
        }
        catch (IOException e){}
        finally{
            lock.readLock().unlock();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:05:08.627

使用[`ReentrantReadWriteLock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html). 它允许许多并发读者，但只允许一个作者。

它不是一个“纯”的 NIO 解决方案，但它是一个以您想要的方式运行的原语。

**当心**：使用这样的锁来避免死锁：

```
rwlock.readLock().lock();
try {
    // do stuff
} finally {
    rwlock.readLock().unlock();
} 
```

# javascript - HTML5/Javascript - 如何在画布上获取形状/图像的坐标？

> ID：14410046
> 
> 赞同：1
> 
> 时间：2013-01-19T01:03:35.053
> 
> 标签：javascript, html5-canvas

假设我在画布上画了一个矩形。肯定有某种内置方法可以获取 XY 坐标和该矩形的尺寸吗？但经过一番谷歌搜索后，我一无所获。为了澄清，我不是在谈论画布元素本身的坐标，而是在画布上绘制的形状/图像。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:06:01.577

如果您在谈论 2D 画布绘图，则绘图与屏幕坐标 1:1 映射，因此它只是`<canvas>`绘图的位置 + 位置。

澄清一下，在 a 上绘制`<canvas>`基本上只是改变了画布的像素——在你绘制到它之后，你不能像引用 html 元素一样引用绘制的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:09:18.857

画布是数字（=像素=颜色）的二维表（数组）。在画布中绘制时，您只是在编辑此表。当您绘制到画布（=更改表格中的数字）时，您的调整坐标应该是什么？

如果您只绘制矩形并且可以定义矩形的坐标，那么您必须在程序中知道您的坐标，因为您刚刚绘制了它。

如果您希望将图像分成一些“对象”（形状），则应使用 SVG。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:05:37.720

基本上，您应该使用画布作为将图形输出到屏幕的一种方式，其余的逻辑直接进入为您的游戏/应用程序提供动力的 JavaScript。做这样的事情的最好方法是创建对象并为它们分配属性；最简单的形式如下所示：

```
function Player(x, y)
{
    this.x = x;
    this.y = y;
}

var examplePlayerObject = new Player(20, 20); 
```

通过原型扩展此对象，您可以创建具有完全相同功能的对象的多个副本；比如画图。在这种情况下绘制玩家可能只是一个 20px*20px 的红色正方形。

```
Player.prototype.draw = function()
{
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.fillStyle = 'red';
    context.fillRect(this.x, this.y, 20, 20);
} 
```

然后，您应该有一个更新步骤，其中包含一些清除屏幕上的内容并重新绘制已更改的部分的方法。

```
function animationStep()
{
    examplePlayerObject.x++;
    examplePlayerObject.y++;
    examplePlayerObject.draw();
} 
```

这个动画步骤应该运行每一帧；查看 requestAnimationFrame 以获得流畅的动画。Paul Irish为旧版浏览器[提供了很好的 shim 。](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)`requestAnimationFrame(animationStep)`在该函数的末尾添加，您将看到一个红色方块在屏幕上缓慢移动。祝你好运！

# ajax - Ajax - 序列化表单并使用数据添加多维数组

> ID：14410048
> 
> 赞同：0
> 
> 时间：2013-01-19T01:03:50.297
> 
> 标签：ajax, jquery

我正在尝试使用 ajax 提交表单，并使用包含要发送到的电子邮件地址的 POST 信息发送一个多维数组。我无法让这个工作。它似乎没有发送数组，它只是发送单词“数组”（从我在 Chrome 检查器中看到的内容）：

```
//$results is the result of mysql query - multidimensional array
var email_array = "<?php echo json_encode($results); ?>"
$.ajax({  
        type: "POST",  
        url: "php/sendmail_client.php", 
        data: $("#send_mail_form").serialize() + "&email_array=" + email_array,
        dataType: "json", 
```

这里是 jQuery 新手....

# r - 识别列表的哪些对象包含在 R 中的另一个列表中（子集）

> ID：14410050
> 
> 赞同：3
> 
> 时间：2013-01-19T01:03:58.147
> 
> 标签：r, list, comparison

感谢您对我之前的问题的友好回复。我有两个列表：list1 和 list2。我想知道list1的每个对象是否包含在list2的每个对象中。例如：

```
> list1
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

> list2
[[1]]
[1] 1 2 3

[[2]]
[1] 2 3

[[3]]
[1] 2 3 
```

以下是我的问题： 1.) 我如何让 R 检查一个对象是否是列表中另一个对象的子集？例如，我想检查是否`list2[[3]]={2,3}`包含在 (subset of) 中`list1[[2]]={2}`。当我这样做时`list2[[3]] %in% list1[[2]]`，我得到了`[1] TRUE FALSE`。然而，这不是我想要做的吗？！我只想检查是否`list2[[3]]`是 的子集`list1[[2]]`，即 {2,3} \subset of {3} 是否如集合论概念中的那样？我不想执行元素检查，因为 R 似乎正在使用 %in% 命令。有什么建议么？

2.) 是否有某种方法可以有效地进行所有成对子集比较（即，对于所有组合的子集？一旦第 1 个问题得到回答，类似`list1[[i]]`的方法会起作用吗？谢谢您的反馈！`list2[[j]]``i,j``outer(list1,list2, func.subset)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T01:10:04.617

`setdiff`比较*唯一*值

```
length(setdiff(5, 1:5)) == 0 
```

或者，`all(x %in% y)`会很好地工作。

要进行所有比较，这样的事情会起作用：

```
dt <- expand.grid(list1,list2)
dt$subset <- apply(dt,1, function(.v) all(.v[[1]] %in% .v[[2]]) )

  Var1    Var2 subset
1    1 1, 2, 3   TRUE
2    2 1, 2, 3   TRUE
3    3 1, 2, 3   TRUE
4    1    2, 3  FALSE
5    2    2, 3   TRUE
6    3    2, 3   TRUE
7    1    2, 3  FALSE
8    2    2, 3   TRUE
9    3    2, 3   TRUE 
```

请注意，`expand.grid`在处理大量数据时，这并不是最快的方法（dwin 的解决方案在这方面更好），但它允许您快速直观地检查这是否符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:50:10.897

您可以`sets`按如下方式使用该软件包：

```
library(sets)
is.subset <- function(x, y) as.set(x) <= as.set(y)

outer(list1, list2, Vectorize(is.subset))
#      [,1]  [,2]  [,3]
# [1,] TRUE FALSE FALSE
# [2,] TRUE  TRUE  TRUE
# [3,] TRUE  TRUE  TRUE 
```

@Michael 或@DWin 的基本版本也`is.subset`可以正常工作，但是对于您问题的第二部分，我认为这`outer`是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:35:09.520

```
is.subset <- function(x,y) {length(setdiff(x,y)) == 0} 
```

首先是作为 list2 项子集的 list1 元素的组合：

```
> sapply(1:length(list1), function(i1) sapply(1:length(list2), 
                 function(i2) is.subset(list1[[i1]], list2[[i2]]) ) )
      [,1] [,2] [,3]
[1,]  TRUE TRUE TRUE
[2,] FALSE TRUE TRUE
[3,] FALSE TRUE TRUE 
```

然后不出所料地缺少任何作为列表一项目子集的列表 2 项目（所有长度 > 1）（长度均为 1）：

```
> sapply(1:length(list1), function(i1) sapply(1:length(list2), 
                 function(i2) is.subset(list2[[i2]], list1[[i1]]) ) )
      [,1]  [,2]  [,3]
[1,] FALSE FALSE FALSE
[2,] FALSE FALSE FALSE
[3,] FALSE FALSE FALSE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T02:03:54.527

添加到@Michael's，这是使用 AsIs 函数避免 expand.grid 混乱的一种巧妙方法：

```
list2 <- list(1:3,2:3,2:3)
a <- data.frame(list1 = 1:3, I(list2))
a$subset <- apply(a, 1, function(.v) all(.v[[1]] %in% .v[[2]]) )

  list1   list2 subset
1     1 1, 2, 3   TRUE
2     2    2, 3   TRUE
3     3    2, 3   TRUE 
```

# storage - nuodb 如何管理存储大小的增加

> ID：14410053
> 
> 赞同：1
> 
> 时间：2013-01-19T01:04:12.707
> 
> 标签：storage, nuodb

假设我的数据存储的大小将增加，如果数据增加，存储管理器将如何管理数据。存储管理器是否使用不同的域机器拆分数据（绝对不是这种情况）？

该过程将如何运作？这方面的推荐是什么，key-value store？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:38:51.220

如果您的存储管理器即将耗尽磁盘空间，您可以启动具有更大磁盘子系统或指向可扩展云存储（如 Amazon S3）的新存储管理器。一旦新的存储管理器是最新的，旧的可以脱机。这整个操作可以在数据库运行时完成。通常，我们还建议您始终运行至少 2 个存储管理器以实现冗余。

如果您有更多问题，请随时将他们引导至 NuoDB 论坛：

[http://www.nuodb.com/community](http://www.nuodb.com/community)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:30:24.403

NuoDB 支持多种后端存储设备，包括 Hadoop 分布式文件系统 (HDFS)。如果您启动为 HDFS 配置的代理，您可以使用 HDFS 工具即时扩展分布式存储，无需任何 NuoDB 管理员操作。正如 Duke 所描述的，您可以从基于文件的存储管理器过渡到 HDFS 而不中断服务。

NuoDB 使用文件系统语义与称为“原子”的离散存储单元连接存储层。它们很容易映射到 HDFS 目录结构中，从而简化了管理。

# c# - 我应该在调用 File.Delete 之前调用 File.Exists 吗？

> ID：14410056
> 
> 赞同：11
> 
> 时间：2013-01-19T01:05:08.640
> 
> 标签：c#, file, exception, io

我的 finally 子句中有一个`File.Delete`像这样的：

```
finally
{
    //remove the temporary file
    if(File.Exists(transformedFile))
        File.Delete(transformedFile);
} 
```

根据[C# 文档](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)，对不存在的文件调用 File.Delete 不会引发任何异常。

是否可以删除`File.Exists`包装，或者这会使我面临可能的其他异常？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T01:07:11.593

如果你需要它，它是不够的，因为文件可以在你确认它存在后被删除。在这种情况下，最佳做法是简单地尝试删除文件。如果它因“找不到文件”类型的错误而失败，那么您将知道该文件不存在。这消除了额外的操作并避免了任何类型的竞争窗口。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-19T01:08:33.660

在一种情况下，`Exists`之前检查`Delete`可以防止异常。如果您的文件名具有无效路径，则该`Exists`方法返回`false`.

那么这取决于你想要什么行为。*在某些情况*下，无效路径会导致异常。

此外，仅仅因为文件存在并不意味着总是可以删除它（当时）。对于不可预见的问题，您仍然需要异常处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-11T19:09:09.933

`File.Delete`不抛出 a `FileNotFoundException`，它不在乎。只有当路径无效时它才会抛出异常，因为它有不存在的目录，在这种情况下它会抛出`DirectoryNotFoundException`.

此代码不会引发任何异常。

```
var file = new FileInfo(@"C:\doesnotexist.file11111");
file.Delete(); 
```

这会抛出`DirectoryNotFoundException`

```
var file = new FileInfo(@"C:\bad.dir\doesnotexist.file11111");
file.Delete(); 
```

[MSDN 文件.删除](https://msdn.microsoft.com/en-us/library/system.io.file.delete(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T01:47:28.287

您仍然可以获得其他类型的异常。例如 IOException 如果文件正在使用中。

因此，如果您**坚持**在**finally**块中删除文件并希望确保不会出现异常，只需在 File.delete 周围放置另一个 try-catch。

```
finally
{
   try 
   {
     //remove the temporary file
     File.Delete(transformedFile);
   }
   catch
   {
   }
} 
```

但是如果您的目标是在任何情况下删除文件，我认为如果您专门打开文件会是个好主意，在这种情况下您应该先**关闭**文件然后**删除**它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:21:37.690

让我们从逻辑上和批判性地看待这个问题。假设 MSDN doco 不是 100% 准确（它确实包含偶尔的错误）并且*可能引发*[FileNotFoundException](http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception.aspx) ，它可能由以下任一原因引起：

 *1.  该文件从不存在（您在创建文件之前退出`try`并进入）`finally`

2.  您有一个程序错误（您错误地组装了文件路径或名称）

有人会假设选项＃2不应该发生，因为您对此进行了测试，如果它仍然可以发生，那么您的代码很臭。这使得选项 #1 作为唯一可行的选项，在这种情况下，您不关心异常，因此您只需抓住它并继续前进。这意味着即使可以抛出[FileNotFoundException ，您的具体问题也基本上是多余的。](http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception.aspx)

**但是...**
我仍然会使用 try/catch 包装 File.Delete，因为 IMVHO 仍然存在两个可能的异常，您需要注意：[IOException](http://msdn.microsoft.com/en-us/library/system.io.ioexception.aspx)和[UnauthorizedAccessException](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)。如果其中任何一种发生，您应该查看某种缓解措施（可能设置文件以在下次重新启动时删除和/或以某种方式通知用户）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T01:32:09.457

我之前问[过这个问题的类似问题](https://stackoverflow.com/questions/8823395/guarding-against-exceptions-preventative-maintenance-when-working-with-network)，我得出了这个结论：

*这取决于*. 是的，我知道......这不是一个直接的答案，但这里有一些注意事项可以确定您的情况是否需要文件存在检查和/或方法`try { ... } catch { ... }`周围的块`File.Delete(...)`。

*   您的代码是否生成了文件？如果是这样，您实际上不需要检查文件是否存在。
*   你关心处理其他问题吗？请记住，您正在使用文件系统，并且 MSDN 文档清楚地向您显示该方法可能会由于其他情况而产生异常。*

# javascript - Jquery追加到不工作

> ID：14410058
> 
> 赞同：0
> 
> 时间：2013-01-19T01:05:15.493
> 
> 标签：javascript, jquery, html, meta

由于某种原因，此代码块将不起作用。它拒绝将元标记放入头部。有任何想法吗 ？

```
<html>
<head>
<title>hello world</title>
</head>

<body>
HELLO WORLD!

<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>
$(document).ready(function(){
  $("head").append("<meta blabla>");
});
</script> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:23:14.557

它确实有效，[http://jsfiddle.net/LGnxg/](http://jsfiddle.net/LGnxg/)

```
$(function(){
   $('head').append('<meta test="true"/>'); 
}); 
```

您缺少元标记中的结束 /> 。这向 jQuery 表明这是一个要插入的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:39:04.180

代码在我的计算中正确运行。

我的测试环境如下：
系统：window vista
浏览器：chrome && firefox
Jquery：jquery-1.8.3.min.js

那么你能提供更多信息吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T01:16:33.907

它实际上正在工作。如果您查看源代码，它不会显示，因为源代码是原始 HTML 文件。例如，如果您尝试将字符串附加到正文，它会显示出来，但是，如果您查看源代码，正文中没有字符串的痕迹。

前任

```
<script>
$(document).ready(function(){
  $("body").append("random sentence");});
</script> 
```

# ios - 在垂直布局中将工具栏停靠在底部

> ID：14410068
> 
> 赞同：0
> 
> 时间：2013-01-19T01:06:09.690
> 
> 标签：ios, titanium, appcelerator

我有一个布局的视图`vertical`

```
var tray = Ti.UI.createView({
    width:deviceWidth * 0.9,
    height:'100%',
    top:0,
    left:0,
    backgroundColor:'transparent',
    layout:'vertical'
});
win.add(tray); 
```

里面`tray`我有一个`TableView`和一个`Toolbar`

```
var slideList = Ti.UI.createTableView({
    width:deviceWidth * 0.9,
    height:xxx, //--> Need to know what to do here
    top:0,
    left:0,
    search:searchList,
    filterAttribute:'searchFilter',
    backgroundColor:(Ti.Platform.osname == 'android') ? '#000000' : '#ffffff'
});
tray.add(slideList);

var iOSControls = Ti.UI.iOS.createToolbar({
    items:[flexSpace,backBtn,flexSpace,playBtn,flexSpace,linkBtn,flexSpace],
    bottom:0,
    borderTop:false,
    borderBottom:true,
    barColor:'#000'
});
tray.add(iOSControls); 
```

我不完全确定如何调整`TableView`s`height`属性的大小，使其填充高度`tray`减去`iOSControls`. 任何想法将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:14:14.787

我认为在 iOS 设备中，工具栏默认高度等于“44px”。

但是，在您的情况下，您尝试使用此代码，只需在您的应用程序中复制此代码即可。

```
var tray = Ti.UI.createView({
    width:deviceWidth * 0.9,
    height:'100%',
    top:0,
    left:0,
    backgroundColor:'transparent',
    layout:'horizontal'
});
win.add(tray);

var iOSControls = Ti.UI.iOS.createToolbar({
    items:[flexSpace,backBtn,flexSpace,playBtn,flexSpace,linkBtn,flexSpace],
    bottom:0,
    borderTop:false,
    borderBottom:true,
    barColor:'#000'
});
tray.add(iOSControls);
var slideList = Ti.UI.createTableView({
    width:deviceWidth * 0.9,
    height:Ti.UI.FILL, //--> Need to know what to do here
    top:0,
    left:0,
    search:searchList,
    filterAttribute:'searchFilter',
    backgroundColor:(Ti.Platform.osname == 'android') ? '#000000' : '#ffffff'
});
tray.add(slideList); 
```

# c++ - 在构造函数中初始化成员

> ID：14410071
> 
> 赞同：0
> 
> 时间：2013-01-19T01:06:39.003
> 
> 标签：c++

> **可能重复：**
> [C++ 初始化列表](https://stackoverflow.com/questions/4589237/c-initialization-lists)

```
class Base
{
public:
int m_nValue;

Base(int nValue=0)
    : m_nValue(nValue)
{
}
}; 
```

在这段代码中，构造函数是否正在初始化`m_nvalue`成员变量？我不确定这种语法：

```
Base(int nValue=0) : m_nValue(nValue) {} 
```

我们通常写成：

```
Base(int nValue) { m_nValue = nValue;} 
```

有人可以解释 C++ 的上述语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:10:37.093

这个语法：

```
Base(int nValue=0)
: m_nValue(nValue) 
```

称为成员初始值设定项。它将使用给定的 nValue 初始化 m_nValue。这种语法在 C++ 中通常是首选，因为它在构造函数的主体之前执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:15:18.900

它被称为成员初始化列表。

成员初始化器列表由逗号分隔的初始化器列表组成，其前面有一个冒号。它位于参数列表的右括号之后和函数体的左括号之前

从概念上讲，这些初始化发生在对象创建时和括号内的任何代码执行之前。

注意：您不能将成员初始化器列表语法与构造函数以外的类方法一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:53:46.283

在代码中初始化变量的方式称为**成员初始化器列表**。通常我们使用这样的列表来初始化**const 成员变量**（正常 - 非 const 也是），因为在构造时我们可以给 const 变量一些值。

第二种初始化类型基本上是一个普通的**参数化构造函数**。当您拥有一个对象并且在创建您想要初始化成员变量的对象时使用它。

# c - Postgresql SPI：操作类型“基准”以创建双数组

> ID：14410072
> 
> 赞同：1
> 
> 时间：2013-01-19T01:06:50.733
> 
> 标签：c, postgresql

我用来从光标`SPI_getbinval`中拉出一列类型。`double precision[]`如何将其重建为`double *`C 中的 a 以便我可以使用这些值？

我在文档中看到的大多数示例都引用了晦涩的辅助函数（即`construct_md_array()`），我找不到这些函数的列表或如何根据我的情况适当地使用它们。

基本上，我需要知道从 contains 构造`double`数组`Datum`的最有效方法`double precision[]`。

（请参阅先前的问题[在使用 C 函数扩展 PostgreSQL 时实现高性能事务](https://stackoverflow.com/q/13236714/398670)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T21:31:44.653

```
...    
bool is_null = true;
Datum raw_array = SPI_getbinval(heap_tuple, tuple_desc, column_of_array, &is_null);

if ( !is_null ) {
    ArrayType *pg_array = DatumGetArrayTypeP(raw_array);
    int array_dimensionality = ARR_NDIM(pg_array);

    // Not prepared for multi-dimension array
    if ( array_dimensionality == 1 ) {
        double *c_array = VARDATA(pg_array);  // Pointer to the array data
        int array_size = ARR_DIMS(pg_array)[0];  // Element count of array at [dimension]

        // Cycle through a single dimension array
        for (int i = 0 ; i < array_size ; ++i) {
            elog(INFO, "Double value at element %d: %lf\n", i, c_array[i]);
        }
    }
}
... 
```

PS`elog()`是`printf()`函数的 PostgreSQL 版本（带有附加功能） - 使用它。

# jquery - 在焦点上接收两个“focusin”事件

> ID：14410075
> 
> 赞同：5
> 
> 时间：2013-01-19T01:07:21.467
> 
> 标签：jquery, focusin

## 我在做什么

在代码的某些部分，我有一个`focusin`事件监听器，而在另一部分以编程方式将焦点设置在`input`. 在 Chrome、Safari、Firefox 上，事件监听器被调用一次，但在 IE（包括 IE10）上，它被调用两次。我用 jQuery 注册监听器并用 jQuery[`.on()`](http://api.jquery.com/on/)设置焦点[`.focus()`](http://api.jquery.com/focus/)。有关显示此行为的示例的完整来源，请参见下文，如果您愿意，可以[运行该示例](https://dl.dropbox.com/u/6900/resources/20130116-focus.html)。

## 问题

1.  即使不使用 jQuery，IE 也会触发`focusin`两次。只有在以编程方式设置焦点时才会这样做，而不是在用户选项卡或单击字段时。为什么？它只是一个 IE 错误，还是 IE 有充分的理由这样做？
2.  不管是不是 IE 的 bug，jQuery 不应该在这里解决 IE 和其他浏览器的区别吗？换句话说，这样做是不是一个 jQuery 错误？
3.  你将如何解决这个问题？（也就是说，我可以让每个焦点只运行一次的代码，无论焦点是通过编程方式设置还是由用户设置。）

## 完整来源

```
<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            $(function() {
                $('input').on('focusin', function() {
                    var c = $('#count');
                    $('#count').text(1 + parseInt(c.text()));
                    console.log('focusin');
                });
                $('input').focus();
            });
        </script>
    </head>
    <body>
        <input>
        <code>focusin</code> received: <span id="count">0</span>.
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:33:13.657

这绝对是一个IE问题。从[JQuery 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/#order-of-triggered-focus-events)：

> 不幸的是，所有版本的 Internet Explorer（6 到 10）都会异步触发焦点事件。当您在 IE 中使用 .trigger("focus") 时，jQuery 不会“看到”稍后将发生的异步焦点事件，因此它会触发自己的一个以确保始终如上文所述发生焦点事件。这会导致对事件处理程序的两次调用。为避免这种双重调用——但存在根本不调用事件处理程序的风险——直接使用 DOM 焦点方法，例如 $("selector").get(0).focus()。

我用过`$('input').get(0).focus()`，它在页面加载上不是很一致。如果我将代码移动到一个按钮，那么我会始终`focusin`触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T16:22:23.717

我对此有不同的解决方案。这很丑陋，但有效。

1.  创建一个自己的 focus_handler() 函数并将其绑定到焦点事件
2.  在调用 .focus() 之前取消绑定焦点事件 // 记住 IE 会在这里调用两次焦点
3.  在再次需要之前将 focus_handler 绑定到焦点事件（例如：focusout、click）

这对我有用。

# php - PHP 中的许多东西都在托管服务器上打印 0 或 1

> ID：14410076
> 
> 赞同：0
> 
> 时间：2013-01-19T01:07:29.907
> 
> 标签：php

我想知道为什么有些东西会自动“回显”`0`或`1`在我的托管服务器上。

例如此代码输出`0`

```
<?php

class Test
{
      public function __construct()
      {
      }
}

$t = new Test;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:11:51.170

这是您的网络主机错误配置的服务器。将此问题通知您的网络主机，他们应该能够解决它。在正确配置的系统上，此代码不应产生任何输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:18:25.600

好的，我相信这与PHP配置有关。它要么输出假，要么输出真。我建议检查您的 php.ini 文件，以查看是否为变量的默认布尔值启用了设置。

# android - GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES - Nexus 7

> ID：14410084
> 
> 赞同：2
> 
> 时间：2013-01-19T01:08:57.460
> 
> 标签：android, opengl-es, android-ndk, opengl-es-1.1, nexus-7

我的 Nexus 7 上的 OpenGL ES 1.0 渲染引擎出现问题 - 我正在尝试创建帧缓冲区，但它总是返回`GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES`，代码如下所示：

```
#ifdef __ANDROID__
glGenFramebuffersOES(1, &gameSurfaceFrameBuffer);   
#else
glGenFramebuffers(1, &gameSurfaceFrameBuffer);
#endif

#ifdef __ANDROID__
glBindFramebufferOES(GL_FRAMEBUFFER_OES, gameSurfaceFrameBuffer);
#else
glBindFramebuffer(GL_FRAMEBUFFER, gameSurfaceFrameBuffer);
#endif

glGenTextures(1, &gameSurfaceTexture);
glBindTexture(GL_TEXTURE_2D, gameSurfaceTexture);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glTexImage2D(GL_TEXTURE_2D, 0, 4, 48 * 14, 48 * 12, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);

#ifdef __ANDROID__
glFramebufferTexture2DOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_TEXTURE_2D, gameSurfaceTexture, 0);
#else
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D,    gameSurfaceTexture, 0);
#endif

#ifdef __ANDROID__
GLenum status = glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES);
#else
GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
#endif

#ifdef __ANDROID__
if(status != GL_FRAMEBUFFER_COMPLETE_OES){
#else
if(status != GL_FRAMEBUFFER_COMPLETE){
#endif
std::stringstream ss;
ss << "gameSurfaceFrameBuffer, status != GL_FRAMEBUFFER_COMPLETE ";
ss << "status = " << status;
throw ss.str();
}
} 
```

如您所见，我有适用于 Android 和普通 OpenGL 的代码 - 该代码在 Windows 上运行良好，但在 Android 上它返回不完整的附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:31:10.467

OpenGL ES（没有扩展）要求纹理的宽度和高度是 2 的幂。检查 glTexImage2D() 调用后是否收到 GL_INVALID_VALUE 错误。如果您遇到错误，那么您可能会考虑调整纹理的大小。

# salesforce - 将字段从查找更改为主详细信息时，Apex 托管共享触发器停止工作

> ID：14410089
> 
> 赞同：0
> 
> 时间：2013-01-19T01:09:28.870
> 
> 标签：salesforce, apex-code

我有两个自定义对象，列表和交易。最初，我在列表对象的事务对象上有一个查找字段。我设置了 Apex 托管共享，以便与相关列表对象上的多个用户查找字段共享交易。它工作得很好。

我将事务对象上的列表字段的字段类型更改为 Master-Detail，现在每次尝试保存新事务时都会收到以下错误：

“TransactionApexSharing：AfterInsert 的执行导致：第 1 行，第 1 列：触发器主体无效并且重新编译失败：实体不可组织访问”

Transaction 和 Listing 对象都设置为 Private，我在代码中找不到任何拼写错误。触发器在使用 Lookup 字段后未更改。

这是我的代码：

```
trigger TransactionApexSharing on Transaction__c (after insert, after update) {

if(trigger.isInsert || trigger.isUpdate){

    Set<id> triggerIds = trigger.newMap.keyset();

    List<Transaction__c> listWithParentData = [select Listing__r.Listing_Agent_1__r.id, Listing__r.Listing_Agent_2__r.id, Listing__r.Listing_Agent_3__r.id from Transaction__c where id in :triggerIds];

    List<Transaction__Share> tranShrs = new List<Transaction__Share>();

    Transaction__Share laShr;
    Transaction__Share la2Shr;
    Transaction__Share la3Shr;
    Transaction__Share saShr;
    Transaction__Share sa2Shr;
    Transaction__Share sa3Shr;

    for(Transaction__c atransaction : listWithParentData){

        laShr = new Transaction__Share();
        la2Shr = new Transaction__Share();
        la3Shr = new Transaction__Share();

        laShr.ParentId = atransaction.Id;
        la2Shr.ParentId = atransaction.Id;
        la3Shr.ParentId = atransaction.Id;

        if (atransaction.Listing__r.Listing_Agent_1__c != null)
        {
            // Set the ID of user or group being granted access 
            laShr.UserOrGroupId = atransaction.Listing__r.Listing_Agent_1__c;
            // Set the access level 
            laShr.AccessLevel = 'edit';
            // Set the Apex sharing reason 
            laShr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            // Add objects to list for insert 
            tranShrs.add(laShr);
        }

        if (atransaction.Listing__r.Listing_Agent_2__c != null)
        {
            la2Shr.UserOrGroupId = atransaction.Listing__r.Listing_Agent_2__c;
            la2Shr.AccessLevel = 'edit';
            la2Shr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            tranShrs.add(la2Shr);
        }

        if (atransaction.Listing__r.Listing_Agent_3__c != null)
        {
            la3Shr.UserOrGroupId = atransaction.Listing__r.Listing_Agent_3__c;
            la3Shr.AccessLevel = 'edit';
            la3Shr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            tranShrs.add(la3Shr);
        }

    }

    for(Transaction__c mytransaction : trigger.new){
        // Instantiate the sharing objects 

        saShr = new Transaction__Share();
        sa2Shr = new Transaction__Share();
        sa3Shr = new Transaction__Share();

        // Set the ID of record being shared 

        saShr.ParentId = mytransaction.Id;
        sa2Shr.ParentId = mytransaction.Id;
        sa3Shr.ParentId = mytransaction.Id;

        if (mytransaction.Selling_Agent_1_User__c != null)
        {
            saShr.UserOrGroupId = mytransaction.Selling_Agent_1_User__c;
            saShr.AccessLevel = 'edit';
            saShr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            tranShrs.add(saShr);
        }

        if (mytransaction.Selling_Agent_2_User__c != null)
        {
            sa2Shr.UserOrGroupId = mytransaction.Selling_Agent_2_User__c;
            sa2Shr.AccessLevel = 'edit';
            sa2Shr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            tranShrs.add(sa2Shr);
        }

        if (mytransaction.Selling_Agent_3_User__c != null)
        {
            sa3Shr.UserOrGroupId = mytransaction.Selling_Agent_3_User__c;
            sa3Shr.AccessLevel = 'edit';
            sa3Shr.RowCause = Schema.Transaction__Share.RowCause.Share_Transaction_with_Agency_Agents__c;
            tranShrs.add(sa3Shr);
        }

    }

    // Insert sharing records and capture save result  

    // The false parameter allows for partial processing if multiple records are passed  

    // into the operation  

    Database.SaveResult[] lsr = Database.insert(tranShrs,false);

    // Create counter 

    Integer i=0;

    // Process the save results 

    for(Database.SaveResult sr : lsr){
        if(!sr.isSuccess()){
            // Get the first save result error 

            Database.Error err = sr.getErrors()[0];

            // Check if the error is related to a trivial access level 

            // Access levels equal or more permissive than the object's default  

            // access level are not allowed.  

            // These sharing records are not required and thus an insert exception is  

            // acceptable.  

            if(!(err.getStatusCode() == StatusCode.FIELD_FILTER_VALIDATION_EXCEPTION  
                                           &&  err.getMessage().contains('AccessLevel'))){
                // Throw an error when the error is not related to trivial access level. 

                trigger.newMap.get(tranShrs[i].ParentId).
                  addError(
                   'Unable to grant sharing access due to following exception: '
                   + err.getMessage());
            }
        }
        i++;
    } 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:30:32.503

当您将关系从查找翻转到主细节时，会发生很多变化。你失去了对细节的细粒度访问，就是这样。无论用户对主人拥有什么权利 - 他也拥有他们的详细信息（好的，不包括个人资料中的“读取/创建/编辑/删除”之类的东西，我说的是对特定记录的访问，而不是一般权限） .

1.  在细节上“OwnerId”将消失（无法查询、描述等）
2.  如果你曾经有过一些更好的点：
    *   需要详细审批流程，突然不能使用队列，需要直接指定用户。
    *   用户在列表视图或报告中询问“我的交易发生了什么”
3.  最后但同样重要的是 - **Detail__Share 表也消失**了。

尝试在沙箱中编辑您的触发器（只需添加 1 个空格或其他内容），它可能会抱怨没有这样的 table `Transaction_Share`。

您可以确保代理对父列表具有编辑权限（但这意味着他们可以编辑任何相关事务）并放弃触发器或撤消 MD。这真的是一个回到你的用户并询问业务逻辑的案例；）

你为什么把它转给MD？如果事实证明您无法承受失去对每个事务的这种细粒度的编辑访问权限，则可以使用一些代码来完成级联删除、汇总等操作。

但是在快速查看您的代码之后，在我看来，您可以控制列表级别的访问而不是详细信息？

# python - Blender 鼠标悬停未返回正确的 HitObject

> ID：14410090
> 
> 赞同：1
> 
> 时间：2013-01-19T01:09:30.983
> 
> 标签：python, controller, mouse, sensors, blender

所以我有一个 Python 控制器，它连接了两个传感器，一个鼠标左键传感器和一个鼠标悬停传感器，两者都启用了频率为 0 的 TRUE 级别触发。Python 控制器链接到如下所示的脚本：

```
# Gather information.
scene = GameLogic.getCurrentScene();
camera = scene.active_camera;
controller = GameLogic.getCurrentController();

# Change to Earth camera.
clicked = controller.sensors['MouseClick'].positive;
if clicked:
    hitObject = controller.sensors['MouseOver'].hitObject;
    if hitObject is not None:
        print(hitObject.name);
        if(hitObject.name == 'Earth'):
            scene.active_camera = 'Earth Camera';
    else:
        print('Nothing hit!'); 
```

基本上，它应该检查是否单击了鼠标的左键，如果是，则抓住鼠标悬停传感器的 hitObject 并打印出它的名称，如果鼠标悬停在对象上是 None，则打印出“Nothing hit！” . 然而，在游戏中，当我点击一个物体（例如地球，很难错过点击）时，它所做的只是打印出“Nothing hit！”。

我使用传感器的方式有问题吗？我的 Python 在这里不正确吗？为什么`controller.sensors['MouseOver'].hitObject`总是类型`None`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T13:42:27.577

您要单击的对象不应具有物理类型“无碰撞”。我知道“静态”有效。

祝你好运。

# html - 单击jquery中的链接时如何获取输入文本

> ID：14410096
> 
> 赞同：0
> 
> 时间：2013-01-19T01:10:06.973
> 
> 标签：html, click

我在网页中做一个 goto 链接，旁边有一个输入文本。goto 链接同时出现在网页的顶部和底部。

```
<div class="gotopage">
    goto page<input type="text" class="page_i"/>
    <a href="###" class="Goto">Go</a>
</div> 
```

在 jquery 中，我需要在链接旁边获取文本：

```
$('a.Goto').live('click',function(){
    window.location.href = ...;
}); 
```

如何获取文本值，它不应该是 id，因为 id 出现了两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:14:40.060

用于[`prev()`](http://api.jquery.com/prev/)获取同级文本输入：

```
$('a.Goto').live('click',function(){
    window.location.href = $(this).prev('.page_i').val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:15:00.527

将文本包装在`span`标签中：

```
<div class="gotopage">
 <span>goto page</span><input type="text" class="page_i"/>
 <a href="###" class="Goto">Go</a>
</div> 
```

然后选择它

```
$('a.Goto').live('click',function(){
   window.location.href = $(this).closest('span').text();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T08:57:20.283

您可以使用此代码获取输入框的文本

```
<script>
$('a.Goto').live('click',function(){
    txt=$('.gotopage .page_i').val();
    alert(txt);
});
</script> 
```

# javascript - JavaScript 引擎可能会忽略什么样的代码？

> ID：14410097
> 
> 赞同：4
> 
> 时间：2013-01-19T01:10:10.290
> 
> 标签：javascript, code-coverage, static-analysis, compiler-theory, dead-code

（这有点 XY 问题，但我决定问我感兴趣的问题，而不是我目前严格需要的问题。）我知道各种现代 JavaScript 引擎都有死代码消除器和其他方法来摆脱没有效果或副作用的代码，但是您如何识别和/或编写此类代码？

关于死代码消除的[Wikipedia 文章](http://en.wikipedia.org/wiki/Dead_code_elimination)给出了一个无法访问代码的简单示例，即发生在`return`函数中的无条件语句之后的代码。但是我可以指望现代的主流 JavaScript 引擎来消除这些代码吗？例如，Rhino 或 V8 会消除此代码吗？

```
function (foo) {
    return;
    return foo;
}

function (foo) {
    foo = foo;
} 
```

没有操作功能怎么办？

```
(function () {}(foo));
jQuery.noop(foo); 
```

所有这些例子都愚弄了 JSHint，虽然 JSLint 捕捉到了*奇怪的赋值* `foo = foo`，你仍然可以很容易地用 noops 或一对变量来欺骗它：

```
function (foo) {
    var bar = foo;
} 
```

如果他们可以欺骗静态代码分析器，他们会欺骗引擎本身吗？

如果没有仔细检查所有不同 JavaScript 引擎的源代码，是否有任何方法可以识别和/或构建在程序运行之前肯定会被消除的代码类型，如果这样的代码是没有被忽略，还是仅仅是一种设计选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:14:41.690

在 JavaScript 中查找死代码与在 C++ 等其他语言中查找死代码不同。例如，您可以编译 C++ 来检测无法访问的代码，但显然这对于​​ JavaScript 是不可能的。

`function () { return; var foo = 1; }`与分配给页面上不再存在的 HTML 元素的事件处理程序相比，您给出的死代码示例发生的可能性要小得多。没有自动死代码分析器可以检测到后者。

您可以做的是在测试运行期间使用[代码覆盖工具](http://hrtimer.mozdev.org/)并查找未使用的行。您只需要确保您的测试脚本非常彻底。

# objective-c - 以 0.03 秒重复运行 NSTimer - 提高准确性

> ID：14410100
> 
> 赞同：1
> 
> 时间：2013-01-19T01:10:37.127
> 
> 标签：objective-c, nstimer

```
 recordingTimer = [NSTimer scheduledTimerWithTimeInterval:0.03
                                                          target:self
                                                        selector:@selector(recordingTimerSelector:)
                                                        userInfo:nil
                                                         repeats:YES]; 
```

这需要非常准确。我一直在尝试它，它似乎时不时地跳过一个节拍。有没有更好的方法每 0.03 秒运行一次方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T02:05:30.537

NSTimer 的分辨率为 50 到 100 毫秒，或 0.05 到 0.1 秒。你可以试试 CADisplayLink。

```
CADisplayLink* link = [CADisplayLink displayLinkWithTarget:self selector:@selector(doSomething)];
        link.frameInterval = 2;//thirty times a second
        [link addToRunLoop:[NSRunLoop mainRunLoop]
                         forMode:NSDefaultRunLoopMode]; 
```

那将每秒调用您的方法三十次。

* * *

编辑：我四处寻找 CADisplayLink 的分辨率，但找不到太多，所以我自己做了一些测试。

我修改了一些现有代码，这些代码使用 mach_absolute_time() 记录帧速率，以打印调用我设置为由 CADisplayLink 调用的方法之间的间隔（以毫秒为单位）。我对 CADisplayLink 和 NSTimer 调用之间的几百个时间间隔进行了测试。CADisplayLink 的平均偏差（与目标时间）为十分之三毫秒，而 NSTimer 的平均偏差为半毫秒。考虑到只有少数精灵被渲染到屏幕上，这是一个相当大的准确性差异。CADisplayLink 的准确性提高了 40%。

所以，我的结论是，如果你想每秒调用一个方法`60/n`（其中是一个整数），CADisplayLink 是非常优越的。`n`您也可以尝试在不同的线程上运行，那里的情况较少。这也可能会提高调用的准确性。

# prolog - 列出递归谓词，高级

> ID：14410102
> 
> 赞同：1
> 
> 时间：2013-01-19T01:10:49.733
> 
> 标签：prolog

只是通过一些教程，我发现了一些高级递归过程，比如 flatten。我试图在谷歌上找到涉及多个递归（头尾）但无法得到我需要的结果的类似示例。

您能否推断出一些涵盖高级列表回避（头部，尾部）的谓词或教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T05:56:35.937

只是为了扩展@hardmath 的意思，让我们看一下列表的定义：

*   基本情况：`[]`
*   归纳案例：`[Head|Tail]`

使它成为递归数据结构的原因在于`Tail`它也是一个列表。所以当你看到时`[1,2,3]`，你也在看到`[1|[2|[3|[]]]]`。让我们证明一下：

```
?- X = [1|[2|[3|[]]]].
X = [1, 2, 3]. 
```

因此，更“高级”的递归形式是涉及更复杂的递归数据类型或更复杂的计算的形式。大多数人接触到的下一个递归数据类型是二叉树，二叉树有一个很好的特性，即每个节点有两个分支，所以让我们先看看树。

首先，我们需要一个很好的定义，比如列表中的定义。我提出以下建议：

*   基本情况：`empty`
*   归纳案例：`tree(LeftBranch, Value, RightBranch)`

现在让我们创建一些示例树来感受一下它们的外观：

```
% this is like the empty list: no data
empty

% this is your basic tree of one node
tree(empty, 1, empty)

% this is a tree with two nodes
tree(tree(empty, 1, empty), 2, empty). 
```

在结构上，最后一个例子可能看起来像这样：

```
 2
  /
 1 
```

现在让我们用几个层次来做一个更完整的例子。让我们构建这棵树：

```
 10
   /    \
  5      9
 / \    /  \
4   6  7   14 
```

在我们的 Prolog 语法中，它看起来像这样：

```
tree(tree(tree(empty, 4, empty), 5, tree(empty,  6, empty)), 
     10, 
     tree(tree(empty, 7, empty), 9, tree(empty, 14, empty))) 
```

我们首先需要的是一种将树的大小相加的方法。与列表一样，我们需要考虑基本案例，然后是归纳案例。

```
% base case
tree_size(empty, 0).

% inductive case
tree_size(tree(Left, _, Right), Size) :-
  tree_size(Left, LeftSize),
  tree_size(Right, RightSize),
  Size is LeftSize + RightSize + 1. 
```

为了比较，让我们看一下列表长度：

```
% base case
length([], 0).

% inductive case
length([_|Rest], Length) :- 
  length(Rest, LengthOfRest), 
  Length is LengthOfRest + 1. 
```

**编辑**：@false 指出，尽管上述内容很直观，但可以通过将归纳案例更改为：

```
length([_|Rest], Length) :-
  length(Rest, LengthOfRest),
  succ(LengthOfRest, Length). 
```

因此，通过比较这两者，您可以清楚地看到递归处理数据结构的标志：

*   您将获得一个递归数据结构，根据基本案例和归纳案例定义。
*   您编写规则的基础来处理基本情况。

    这一步通常很明显；在长度或大小的情况下，您的数据结构将有一个空的基本情况，因此您只需将零与该情况相关联。

*   你写下你的规则的归纳步骤。

    归纳步骤采用数据结构的递归案例并处理该案例添加的任何内容，并将其与递归调用您的规则以处理数据结构的“其余部分”的结果相结合。

因为列表只在一个方向上递归，所以在大多数列表处理规则中只有一次递归调用。因为树有两个分支，所以可以有一个或两个，这取决于您是需要处理整棵树还是只走一条路径。列表和树实际上都有两个“构造函数”，因此大多数规则都有两个主体，一个处理空案例，一个处理归纳案例。更复杂的结构，例如语言语法，可以有两个以上的基本模式，通常你要么分别处理它们，要么只寻找一种特别的模式。

作为练习，您可能想尝试编写`search`、`insert`、`height`或`balance`以及`is_balanced`各种其他树查询来更熟悉该过程。

# asp.net - asp.net oauth 在 facebook 身份验证中构建

> ID：14410110
> 
> 赞同：1
> 
> 时间：2013-01-19T01:12:08.080
> 
> 标签：asp.net, facebook, login, oauth

如何使用 Facebook 帐户完成登录（并将这些详细信息保存在会员数据库中）。我正在阅读需要获取用户的电子邮件，当然在 txt 框中添加任何电子邮件或名称都不会验证......但是可以在用户使用任何其他方法（如谷歌左右）登录后将其添加为另一项服务...

那么我如何更改代码以在.net 4.5中使用内置的oauth模型时从fb中提取用户的电子邮件

# spring - 在身份验证之前访问控制器 Spring Security

> ID：14410112
> 
> 赞同：1
> 
> 时间：2013-01-19T01:12:31.280
> 
> 标签：spring, servlets, spring-mvc, spring-security

我一直在尝试为多个登录页面实施解决方案。我目前有一个唯一的 LoginController，它所做的只是在有人请求 /app_name/login.htm 时检索登录 jsp。我希望保持这种状态，但还要添加另外两个位置：/app_name/customers/login.htm 和 /app_name/employees/login.htm，每个位置都有一个单独的控制器 CustomerLoginController 和 EmployeeLoginController。

所以我的想法是员工通过他们的 URL 和客户使用他们的 URL 进行访问，但是如果有人尝试访问旧的 login.htm，控制器会将他/她重定向到他们各自的登录，默认使用存储的 cookie 和客户。

对我来说这听起来不错，但是当我尝试访问 /app_name/customers/login.htm 或 /app_name/employees/login.htm 时，它只会在我未通过身份验证时将我重定向到 login.htm。

我真的不知道为什么它没有解决它们。任何意见、建议、指南、教程、示例代码或链接都会有所帮助。

我正在做的项目有这个配置

**Web.xml**

```
<!-- Spring Security -->
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**servlet-config.xml**

```
<!-- Controllers Mapping -->
<context:component-scan base-package="com.company.project.controllers">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

**安全上下文.xml**

```
<sec:http auto-config="false" entry-point-ref="authenticationProcessingFilterEntryPoint" access-denied-page="/warning/accessDenied.htm" >
    <sec:intercept-url pattern="/employees/login.htm" filters="none" />
    <sec:intercept-url pattern="/customers/login.htm" filters="none" />
    <sec:intercept-url pattern="/login**" filters="none" />
</sec:http>
<bean id="authenticationProcessingFilterEntryPoint" class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
    <property name="loginFormUrl" value="/login.htm" />
    <property name="forceHttps" value="false" />
</bean>
<bean id="authenticationProcessingFilter" class="org.springframework.security.ui.webapp.AuthenticationProcessingFilter">
    <property name="authenticationFailureUrl" value="/login.htm?login_error=1"/>
    <property name="defaultTargetUrl" value="/home.htm"/>
    <property name="alwaysUseDefaultTargetUrl" value="true"/>
    <property name="filterProcessesUrl" value="/j_spring_security_check"/>
</bean> 
```

PD：使用 Spring 2.5.4 和 Spring Security 2.0.4 -_- 我知道，但这是一个相当大的项目，并且已经投入生产一段时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T18:23:24.663

可以使用 2 个单独的 http 声明来完成多个登录页面：

```
<http pattern="/customers/**" authentication-manager-ref="customerAuthenticationManager">
    <form-login login-page="/customers/login" default-target-url="/customers" login-processing-url="/customers/j_spring_security_check"/>
    <logout logout-url="/customers/logout"/>
    ...
</http>

<http pattern="/employees/**" authentication-manager-ref="employeeAuthenticationManager">
    <form-login login-page="/employees/login" default-target-url="/employees" login-processing-url="/employees/j_spring_security_check"/>
    <logout logout-url="/employees/logout"/>
    ...
</http> 
```

# testing - apache和jboss上的功能测试覆盖工具

> ID：14410116
> 
> 赞同：0
> 
> 时间：2013-01-19T01:13:56.587
> 
> 标签：testing, code-coverage, functional-testing

我正在寻找一些工具来提供我的功能测试的代码覆盖率（不是单元测试代码覆盖率）。为了详细说明，假设 QA 团队使用 selenium 执行他们的测试套件。在测试结束时，我想知道被调用/测试的代码量（目标代码，而不是测试代码库）。

我为 .Net 找到了类似的帖子，但在我的情况下，网络服务器是 Apache，应用程序服务器是 jBoss

[功能测试的覆盖率分析](https://stackoverflow.com/questions/5604273/coverage-analysis-for-functional-tests/5959247#5959247)

另外，我们以前从未做过这种分析，这是否值得努力，有人尝试过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:22:13.683

我曾经对汇编代码和Java代码进行代码覆盖测试。这绝对值得。您会发现，当您获得接近 100% 的覆盖率时，为剩余代码构建测试变得越来越困难。

您甚至可能会发现可以证明永远无法执行的代码。您会在边缘发现从未测试过的代码，并且假设代码已将这些考虑在内，您将被迫运行多用户测试以强制发生竞争条件。

在汇编代码上，我有一个 3000 行的汇编程序，花了几个月的时间来测试，但运行了 9 年，没有任何 bug。在这种情况下，覆盖测试证明了它的价值，因为这段代码在语言解释器的深处。

就 Java 而言，我使用了 Clover： http: [//www.atlassian.com/software/clover/overview](http://www.atlassian.com/software/clover/overview)

这篇文章：[JDK7 的开源代码覆盖库？](https://stackoverflow.com/questions/11523058/open-source-code-coverage-libraries-for-jdk7)推荐Jacoco，但我从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:47:19.687

感谢@Peter Wooster 的指点。我对 clover 文档做了很多研究，但不幸的是，甚至没有很好的迹象表明 clover 支持功能/集成，更不用说好的文档了。幸运的是，我找到了 clover 文档本身中的一个链接，该链接讨论了这一点并且看起来很有希望（感谢 Google 搜索）。我正在使用蚂蚁，所以甚至没有在这个 Maven2 区域中搜索。这也谈到了蚂蚁:)

[https://confluence.atlassian.com/display/CLOVER/Using+Clover+in+various+environment+configurations](https://confluence.atlassian.com/display/CLOVER/Using+Clover+in+various+environment+configurations)

我会试试这个，很快就会更新更多！

# jython - 要让 SimpleXMLRPCServer 工作，Jython 需要什么？

> ID：14410125
> 
> 赞同：1
> 
> 时间：2013-01-19T01:15:29.887
> 
> 标签：jython, simplexmlrpcserver

我尝试了[SimpleXMLRPCServer](http://docs.python.org/2/library/simplexmlrpcserver.html#simplexmlrpcserver-example)的 python 文档中的第一个示例。

它在 python 中工作得非常好，但是当我使用 jython 尝试它时，我得到以下堆栈跟踪：

```
Traceback (most recent call last):
  File "sampleclient.py", line 4, in <module>
    print s.pow(2,3)  # Returns 2**3 = 8
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1147, in __call__
    return self.__send(self.__name, args)
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1433, in _ServerProxy__request
    response = self.__transport.request(
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1201, in request
    return self._parse_response(h.getfile(), sock)
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1324, in _parse_response
    p, u = self.getparser()
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1210, in getparser
    return getparser(use_datetime=self._use_datetime)
  File "/usr/share/jython/Lib/xmlrpclib.py", line 1023, in getparser
    parser = ExpatParser(target)
  File "/usr/share/jython/Lib/xmlrpclib.py", line 536, in __init__
    self._parser = parser = expat.ParserCreate(None, None)
  File "/usr/share/jython/Lib/xml/parsers/expat.py", line 63, in ParserCreate
    return XMLParser(encoding, namespace_separator)
  File "/usr/share/jython/Lib/xml/parsers/expat.py", line 91, in __init__
    self._reader = XMLReaderFactory.createXMLReader(_xerces_parser)
java.lang.ClassNotFoundException: org.apache.xerces.parsers.SAXParser
    at org.xml.sax.helpers.XMLReaderFactory.loadClass(XMLReaderFactory.java:229)
    at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(XMLReaderFactory.java:220)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)

org.xml.sax.SAXException: org.xml.sax.SAXException: SAX2 driver class org.apache.xerces.parsers.SAXParser not found
java.lang.ClassNotFoundException: org.apache.xerces.parsers.SAXParser 
```

我在 python 方面比 java 更有经验，所以我不知道如何解决这个问题。我的系统是否缺少依赖项，或者我是否需要摆弄类路径？

编辑：我用 Jython 网站上的独立版本重新尝试了这个，他们工作了，所以看起来 Ubuntu 的安装版本可能有问题？

# c#-4.0 - OracleBulkCopy 错误：“0”不是“间隔”的有效值

> ID：14410126
> 
> 赞同：1
> 
> 时间：2013-01-19T01:15:35.577
> 
> 标签：c#-4.0

我有以下代码

```
 using (OracleConnection srcConn = new OracleConnection())
    using (OracleConnection destConn = new OracleConnection())
    {
      srcConn.ConnectionString = AppInfo.SrcConnStr;
      srcConn.Open();
      destConn.ConnectionString = AppInfo.DestConnStr;
      destConn.Open();

      using (OracleCommand destCmd = new OracleCommand("ALTER SESSION SET NLS_DATE_FORMAT = 'yyyy-mm-dd hh24:mi:ss'", destConn))
      using (OracleCommand srcCmd = new OracleCommand("ALTER SESSION SET NLS_DATE_FORMAT = 'yyyy-mm-dd hh24:mi:ss'", srcConn))
      {

        // Non-query
        srcCmd.ExecuteNonQuery();
        destCmd.ExecuteNonQuery();
        if (Timing) { ut.TimeIt(stopwatch, "Get Connection and Command"); }

        srcCmd.CommandTimeout = 0;
        destCmd.CommandTimeout = 0;

        srcCmd.CommandText = "select * from table_name";
        rd = srcCmd.ExecuteReader();
        rd.FetchSize = rd.RowSize * AppInfo.BatchSize; }

        OracleBulkCopy copy = new OracleBulkCopy(destConn);
        copy.DestinationTableName = DestTable;
        copy.BatchSize = AppInfo.BatchSize;
        copy.NotifyAfter = AppInfo.BatchSize;
        copy.OracleRowsCopied += new OracleRowsCopiedEventHandler(OnOracleRowsCopied);
        copy.BulkCopyTimeout = AppInfo.CommandTimeOut;
        copy.WriteToServer(rd);

      }
    } 
```

当它要复制时。WriteToServer(rd); 它给出了以下错误

```
 System.ArgumentException was caught
 Message='0' is not a valid value for 'Interval'. 'Interval' must be greater than 0.
 Source=System
 StackTrace:
   at System.Timers.Timer.set_Interval(Double value)
   at Oracle.DataAccess.Client.OracleBulkCopy.PerformBulkCopy()
   at Oracle.DataAccess.Client.OracleBulkCopy.WriteDataSourceToServer()
   at Oracle.DataAccess.Client.OracleBulkCopy.WriteToServer(IDataReader reader) 
```

我的问题是，我该如何解决？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:22:15.633

问题可能是将`CommandTimeout`s 设置为零。尝试一个合理的数字。我认为这是以秒为单位指定的。

# neo4j - 对于以双向关系连接的节点，密码返回两次

> ID：14410127
> 
> 赞同：4
> 
> 时间：2013-01-19T01:15:45.420
> 
> 标签：neo4j, cypher

我有 2 个节点：（A），（B），由 [:FRIEND] 连接

当我运行以下命令时，

```
start n = node(*) match (n)-[r:FRIEND]-(b) return n.name, b.name; 
```

它返回 2 行：A、B 和 B、A。

我想知道，如何让它只返回一条记录，因为关系是双向的， A -[:FRIEND]-B 和 B-[:FRIEND]-A 被认为是相同的结果。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T02:29:44.757

一个技巧是`where`在 ID 上添加一个，因此您也可以以一致的顺序获得它们：

```
start n = node(*) 
match (n)-[r:FRIEND]-(b) 
where id(n) < id(b) 
return n.name, b.name; 
```

[http://console.neo4j.org/r/1ry0ga](http://console.neo4j.org/r/1ry0ga)

如果它们之间有多个关系（例如，在两个方向上），则可以添加不同的修饰符以获得相同的结果：

```
start n = node(*) 
match (n)-[r:FRIEND]-(b) 
where id(n) < id(b) 
return distinct n.name, b.name; 
```

# c - 如何验证tcp校验和

> ID：14410128
> 
> 赞同：4
> 
> 时间：2013-01-19T01:16:09.763
> 
> 标签：c, linux, tcp, network-programming, pcap

出于某种奇怪的原因，我无法正确验证 TCP 校验和。我有检查 IP 和 UDP 校验和的代码，它工作得非常好，但是对于 TCP，我的逻辑中有些东西是错误的。

我对这些标头的结构定义很好，因为我可以很好地读取数据（从 wireshark 验证）。我遇到的唯一问题是对于 TCP 校验和，我无法验证校验和是否真的正确。关于我在哪里做错的任何想法？

非常感谢。

**校验和函数**

```
unsigned short in_cksum(unsigned short *addr,int len)
{
    register int sum = 0;
    u_short answer = 0;
    register u_short *w = addr;
    register int nleft = len;

    /*
     * Our algorithm is simple, using a 32 bit accumulator (sum), we add
     * sequential 16 bit words to it, and at the end, fold back all the
     * carry bits from the top 16 bits into the lower 16 bits.
     */
    while (nleft > 1)  {
            sum += *w++;
            nleft -= 2;
    }

    if (nleft == 1) {
            *(u_char *)(&answer) = *(u_char *)w ;
            sum += answer;
    }

    sum = (sum >> 16) + (sum & 0xffff);
    sum += (sum >> 16);                
    answer = ~sum;                     
    return(answer);
} 
```

**读取 TCP 功能（旧，检查编辑版本）**

```
/* packets are read using the pcap libraries */
void readTCP(const u_char *packets) {
   struct TCP_Header *tcp = (struct TCP_Header*) (packets + sizeof(struct Ethernet_Header) + sizeof(struct IP_Header));
   struct IP_Header *ip = (struct IP_Header*) (packets + sizeof(struct Ethernet_Header));
   struct TCP_Pseudo tcpPseudo;
   char tcpcsumblock[sizeof(struct TCP_Pseudo) + sizeof(struct TCP_Header)];

   /* tcp pseudo header */
   memset(&tcpPseudo, 0, sizeof(struct TCP_Pseudo));
   tcpPseudo.source_ip = ip->source_ip.s_addr;
   tcpPseudo.destination_ip = ip->destination_ip.s_addr;
   tcpPseudo.zero = 0;
   tcpPseudo.protocol = 6;
   tcpPseudo.length = htons(sizeof(struct TCP_Header));

   /* grab tcp checksum and reset it */
   int tcpCheckSum = htons(tcp->tcp_checksum);
   tcp->tcp_checksum = 0;

   /* place the data from the tcp pseudo infront of the tcp header */
   memcpy(tcpcsumblock, &tcpPseudo, sizeof(TCPPseudoHeader));   
   memcpy(tcpcsumblock+sizeof(TCPPseudoHeader),tcp, sizeof(TCPHeader));

   /* here is the issue, the checksum that i'm calculating isn't the correct checksum (i checked this by examing the packets from wireshark */
   u_short checksum = in_cksum((unsigned short *)tcpcsumblock, sizeof(tcpcsumblock));
} 
```

==编辑==

**新的 TCP 功能**

```
/* packets are read using the pcap libraries */
void readTCP(const u_char *packets) {
   struct TCP_Header *tcp = (struct TCP_Header*) (packets + sizeof(struct Ethernet_Header) + sizeof(struct IP_Header));
   struct IP_Header *ip = (struct IP_Header*) (packets + sizeof(struct Ethernet_Header));
   struct TCP_Pseudo tcpPseudo;

   /* tcp pseudo header */
   memset(&tcpPseudo, 0, sizeof(struct TCP_Pseudo));
   tcpPseudo.source_ip = ip->source_ip;
   tcpPseudo.destination_ip = ip->destination_ip;
   tcpPseudo.zero = 0;
   tcpPseudo.protocol = 6;
   tcpPseudo.len = htons(ip->ip_len - (ip->ip_hdr_len * 4));

   int len = sizeof(struct TCP_Pseudo) + tcpPseudo.len;
   u_char tcpcsumblock[len];

   memcpy(tcpcsumblock, &tcpPseudo, sizeof(struct TCP_Pseudo));
   memcpy(tcpcsumblock + sizeof(struct TCP_Pseudo), (packets + sizeof(struct Ethernet_Header) + sizeof(struct IP_Header)), tcpPseudo.len);

   /* here is the issue, the checksum that i'm calculating isn't the correct checksum (i checked this by examing the packets from wireshark */
   u_short checksum = in_cksum((unsigned short *)ps_tcp, len);
   char *cs = checksum ? "Invalid Checksum!" : "Valid!";
} 
```

**ip头**

```
typedef struct IP_Header {
#if __BYTE_ORDER__ == __LITTLE_ENDIAN__
   uint8_t ip_hdr_len:4;   /* header length */
   uint8_t ip_version:4;   /* ip version */
#else
   uint8_t ip_version:4;   /* ip version */
   uint8_t ip_hdr_len:4;   /* The IP header length */
#endif

   uint8_t ip_tos;      /* type of service */
   uint16_t ip_len;     /* total length */
   uint16_t ip_id;      /* identification */
   uint16_t ip_off;     /* fragment offset field */
#define IP_DF 0x4000            /* dont fragment flag */
#define IP_MF 0x2000            /* more fragments flag */
#define IP_OFFMASK 0x1fff       /* mask for fragmenting bits */
   uint8_t  ip_ttl;     /* time to live */
   uint8_t  ip_p;       /* protocol */
   uint16_t ip_sum;     /* checksum */
   struct in_addr ip_src, ip_dst;   /* source and dest address */
} __attribute__ ((packed)); 
```

**tcp 标头**

```
typedef struct TCP_Header {
  uint16_t tcp_source_port; /* source port */
  uint16_t tcp_dest_port; /* destination port */
  uint32_t tcp_seq; /* sequence */   
  uint32_t tcp_ack; /* acknowledgement number */
  uint8_t tcp_offest; /* data offset */
#define TH_OFF(th)      (((th)->th_offx2 & 0xf0) >> 4)
  uint8_t tcp_flags; /* flags */
#define TH_FIN      0x01
#define TH_SYN      0x02
#define TH_RST      0x04
#define TH_PUSH     0x08
#define TH_ACK      0x10
#define TH_URG      0x20
#define TH_ECE      0x40
#define TH_CWR      0x80

#define TH_NS       0x100
#define TH_RS       0xE00

   uint16_t tcp_window; /* window */
   uint16_t tcp_sum; /* checksum */
   uint16_t tcp_urp; /* urgent pointer */
} __attribute__ ((packed)); 
```

**tcp 伪标头**

```
typedef struct TCP_Pseudo {
   struct in_addr src_ip; /* source ip */
   struct in_addr dest_ip; /* destination ip */
   uint8_t zeroes; /* = 0 */
   uint8_t protocol; /* = 6 */
   uint16_t len; /* length of TCPHeader */
} __attribute__ ((packed)); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T01:25:51.113

问题是这一行：

```
tcpPseudo.length = htons(sizeof(struct TCP_Header)); 
```

根据[RFC 793](https://www.rfc-editor.org/rfc/rfc793)：

> TCP Length 是 TCP 标头长度加上八位字节的数据长度（这不是显式传输的数量，而是计算出来的），它不计算伪标头的 12 个八位字节。

您只设置 TCP 标头长度，但它应该是 TCP 标头长度 + 数据长度。

数据长度是`Total Length`IP头减去IP头长度（字段`IHL`在IP头中命名，必须乘以4才能得到字节长度）减去TCP头的大小。

![在此处输入图像描述](../Images/515535864e0d209a92212e5b7fc0d0a6.png)

然而，由于您想将 TCP 标头的长度添加到数据长度，您只需从总数据包长度中减去 IP 标头长度，剩下的是 TCP 标头和数据长度的总和。

```
tcpPseudo.length = htons(ntohs(ip->total_length) - (ip->ihl * 4)); 
```

同样根据 RFC：

> 校验和字段是标题和文本中所有 16 位字的反码和的 16 位反码。

“和文本”表示 TCP 标头后面的所有数据也被校验和。否则 TCP 无法保证数据正确传输。请记住，TCP 是一种可靠的协议，它会重新传输损坏的数据，但因此它还必须识别数据何时损坏。

因此，必须将减去 IP 标头的整个数据包添加到`tcpcsumblock`. 因此`tcpcsumblock`必须足够大以容纳整个数据包（在 TCP 的情况下，1500 字节通常就足够了，尽管理论上一个 IP 数据包可能有 64 KB 大，并且如果需要会被分段）然后您必须添加伪标头, tcp 标头和数据包末尾的所有内容。

我为你写了一段工作代码。我通过输入一些实时数据验证了它是否正常工作。作为奖励，此实现对 IP 标头执行了一些健全性检查，包括验证其校验和（因为如果不匹配，则所有标头字段都可能包含伪造的标头，因为标头很可能已损坏），而且它也没有不需要分配任何动态内存或复制任何数据，所以它应该很快。特别是对于最后一个功能，我不得不改变`in_cksum`函数接受第三个参数。如果此参数为零，它将与您的代码中的版本完全相同，但通过提供正确的值，您可以使用此函数更新已经计算的校验和，就好像您要校验和的数据直接跟随您的数据一样之前已经做过校验和（非常漂亮，对吧？）

```
uint16_t in_cksum (const void * addr, unsigned len, uint16_t init) {
  uint32_t sum;
  const uint16_t * word;

  sum = init;
  word = addr;

  /*
   * Our algorithm is simple, using a 32 bit accumulator (sum), we add
   * sequential 16 bit words to it, and at the end, fold back all the
   * carry bits from the top 16 bits into the lower 16 bits.
   */

  while (len >= 2) {
    sum += *(word++);
    len -= 2;
  }

  if (len > 0) {
    uint16_t tmp;

    *(uint8_t *)(&tmp) = *(uint8_t *)word;
    sum += tmp;
  }

  sum = (sum >> 16) + (sum & 0xffff);
  sum += (sum >> 16);
  return ((uint16_t)~sum);
}

void readTCP (const u_char *packets) {
  uint16_t csum;
  unsigned ipHdrLen;
  unsigned ipPacketLen;
  unsigned ipPayloadLen;
  struct TCP_Pseudo pseudo;
  const struct IP_Header * ip;
  const struct TCP_Header * tcp;

  // Verify IP header and calculate IP payload length
  ip = (const struct IP_Header *)(packets + sizeof(struct Ethernet_Header));
  ipHdrLen = ip->ip_hdr_len * 4;
  if (ipHdrLen < sizeof(struct IP_Header)) {
    // Packet is broken!
    // IP packets must not be smaller than the mandatory IP header.
    return;
  }
  if (in_cksum(ip, ipHdrLen, 0) != 0) {
    // Packet is broken!
    // Checksum of IP header does not verify, thus header is corrupt.
    return;
  }
  ipPacketLen = ntohs(ip->ip_len);
  if (ipPacketLen < ipHdrLen) {
    // Packet is broken!
    // The overall packet cannot be smaller than the header.
    return;
  }
  ipPayloadLen = ipPacketLen - ipHdrLen;

  // Verify that there really is a TCP header following the IP header
  if (ip->ip_p != 6) {
      // No TCP Packet!
      return;
  }
  if (ipPayloadLen < sizeof(struct TCP_Header)) {
    // Packet is broken!
    // A TCP header doesn't even fit into the data that follows the IP header.
    return;
  }

  // TCP header starts directly after IP header
  tcp = (const struct TCP_Header *)((const u_char *)ip + ipHdrLen);

  // Build the pseudo header and checksum it
  pseudo.src_ip = ip->ip_src;
  pseudo.dest_ip = ip->ip_dst;
  pseudo.zeroes = 0;
  pseudo.protocol = 6;
  pseudo.len = htons(ipPayloadLen);
  csum = in_cksum(&pseudo, (unsigned)sizeof(pseudo), 0);

  // Update the checksum by checksumming the TCP header
  // and data as if those had directly followed the pseudo header
  csum = in_cksum(tcp, ipPayloadLen, (uint16_t)~csum);

  char * cs = csum ? "Invalid Checksum!" : "Valid!";
  printf("%s\n", cs);
} 
```

# java - 如何将数组列表的内容写入文本文件？

> ID：14410131
> 
> 赞同：1
> 
> 时间：2013-01-19T01:16:26.830
> 
> 标签：java, object, arraylist, text-files, filewriter

我有这个足够基本的 Java 程序，它要求用户将歌曲输入到音乐库数组列表中。从那里，用户可以随机播放他们的歌曲，删除一首歌曲，删除所有歌曲等。它快完成了，我只有一个我无法解决的问题。当我尝试将数组列表导出到文本文件时会发生这种情况。我的输出不是数组列表的内容，而是如下所示，而不是用户提交的详细信息：

"1: MainClass.SongClass@c137bc9 MainClass.SongClass@c137bc9"

我将在下面发布我的代码，如果有人能指出我正确的方向，我将不胜感激！

**我的最终项目课程作为我的主要课程：**

```
package MainClass;

import java.io.FileNotFoundException;
import java.util.Scanner;

public class FinalProject extends UserInput {

    public String nextInt;

    public static void main(String[] args) {

//        SongLibrary iTunes;  //Object stores the file cars.txt
//        iTunes = new SongLibrary("MUSIC LIBRARY.txt");
//        songData CLO = iTunes.readFileIntoList();

        UserInput ui;
        ui = new UserInput();

        Scanner input = new Scanner(System.in);

        int opt;

        //Calls Methods Class so methods can be used below
        Menu menuFunctions = new Menu();

        //Calls FileReaderTest Class so file can be read
        SongLibrary Reader = new SongLibrary();

        //initial prompt only displayed when program is first ran
        System.out.println("Welcome to your music library!");

do {

            //Menu Prompts printed to the screen for the user to select from
            System.out.println(" ");
            System.out.println("Main Menu:");
            System.out.println("........ \n"); 
            System.out.println("Press 0 to Exit");
            System.out.println("Press 1 to Add a Song");
            System.out.println("Press 2 to View All Songs");
            System.out.println("Press 3 to Remove a Song");
            System.out.println("Press 4 to Shuffle Library");
            System.out.println("Press 5 to Play a Random song");
            System.out.println("Press 6 to Remove ALL Songs");
            System.out.println("Press 7 to Save Library\n");

            //Monitors the next Int the user types
            opt = input.nextInt();

            //"if" statements
            if (opt == 0) {
                //This corresponds to the condition of the while loop,      
                //The program will exit and print "Goodbye!" for the user.  
                System.out.println(" ");
                System.out.println("Goodbye!");
            } else if (opt == 1) {
                //This method allows the user to add a song to the library.
                //With the format being Title, Artist, Year.
                System.out.println(" ");
                menuFunctions.addEntry();
            } else if (opt == 2) {
                //This method prints the contents of the Array List to the screen  
                System.out.println("\n");
                menuFunctions.viewAll();
            } else if (opt == 3) {
                //This method allows the user to remove an indiviual song from
                //their music library  
                System.out.println("\n");
                menuFunctions.removeOne();
            } else if (opt == 4) {
                //This method uses the Collections.shuffle method
                //to re-arrange the track list
                //song to simulate a music player's shuffle effect.
                System.out.println("\n");
                menuFunctions.shuffleSongs();

            } else if (opt == 5) {
                //This method will clear all contents of the library.
                //It will ask the user to confirm their choice.
                System.out.println("\n");
                menuFunctions.randomSong();
            } else if (opt == 6) {
                //This method will clear all contents of the library.
                //It will ask the user to confirm their choice.
                System.out.println("\n");
                menuFunctions.clearLibrary();
            }   

            else if (opt == 7) {

                try {
                    menuFunctions.saveLibrary();
                } catch (FileNotFoundException x) {
                    System.out.println("File not found. " + x);
                }
            }

            else {
                //If the user selects an incorrect number, the console will 
                //tell the user to try again and the main menu will print again
                System.out.println("\n");
                System.out.println("Incorrect Entry, please try again");
            }

        } //do-while loop
        while (opt > 0);

}

    } 
```

**我的 SongClass 类包含构造函数和 Get/Set 方法**

```
package MainClass;

public class SongClass {

        private int songMinutes;
        private int songSeconds;
        private String songTitle;
    private String songArtist;
    private String songAlbum;
    private int songYear;

public SongClass(int m, int ss, String t, String art, String al, int y){
        songMinutes = m;
                songSeconds = ss;
        songTitle = t;
        songArtist = art;
        songAlbum = al;
                songYear = y;
    }

//GET METHODS

    public int getMinutes() {
        return songMinutes;
    }

    public int getSeconds() {
        return songMinutes;
    }

    public String getTitle() {  //
        return songTitle;
    }
    public String getArtist() {
        return songArtist;
    }
    public String getAlbum() {
        return songAlbum;
    }
    public int getYear() {
        return songYear;
    }

//SET METHODS

    public void setMinutes(int m){
        songMinutes = m;
    }

     public void setDuration(int ss){
        songSeconds = ss;
    }

    public void setTitle(String t){
        songTitle = t;
    }   
    public void setArtist(String art){
        songArtist = art;
    }
    public void setAlbum(String al){
        songAlbum = al;
    }

    public void printSong(){
        System.out.println(songMinutes+":"+ songSeconds + " - " + songTitle + " - " + songArtist + " - " +songAlbum + " - "+ "("+songYear+")");
    } 

} 
```

**我的菜单类包含程序中使用的大部分方法**

```
package MainClass;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.*;

public class Menu {

    public void add(SongClass s) throws NumberFormatException {
        try {
            songLibrary.add(s);
        } catch (NumberFormatException x) {
        }

    }
    Scanner input = new Scanner(System.in);
    UserInput ui = new UserInput();
    public ArrayList<SongClass> songLibrary;

    public Menu() {
        songLibrary = new ArrayList<SongClass>();
    }

    public void removeOne() throws ArrayIndexOutOfBoundsException {

        try {

        System.out.println("Which song would you like to delete? (1 of " + songLibrary.size() + ")");
        viewAll();
        //calls the viewAll method to print current library to screen

        int remove = input.nextInt();
        //creates an int that corresponds to the nextInt typed.

        if (remove > songLibrary.size()) {
            System.out.println("Invalid ");
            //if the user types a number higher than the highest index of the
            //array list, they will be shown an error and return to the menu

        }

        else { 
            remove --;
            SongClass s = songLibrary.get(remove);
            System.out.println("Are you sure you would like to delete the following track from your music library? "); 
            s.printSong();
             //confirms user wants to delete the selected track

            System.out.print("1: Yes \n2: No" + "\n");
            int confirmDelete = input.nextInt();
            //Asks the user to input 1 or 2, 

            if (confirmDelete == 1) {
                songLibrary.remove(remove);
                //removes the index of the 4 array lists
                System.out.println( "Removed.");
                viewAll();
            } else if (confirmDelete == 2) {
                System.out.println("\n" + "Okay, the song won't be removed");
            } else {
                System.out.println("\n" + "Invalid option.");
            }

        }
        }
        catch (ArrayIndexOutOfBoundsException x) {
            System.out.println("Please select an valid entry");
        }
    }

    public void clearLibrary() {
        System.out.println("Confirm?");
        System.out.print("1: Yes \n2: No" + "\n");

        int confirmDelete = input.nextInt();
        //if the user types one, this triggers the clear method.

        if (confirmDelete == 1) {
            songLibrary.clear();
            System.out.println("\n" + "Your music library has been cleared" + "/n");
        }

    }

    public void shuffleSongs() {
        //The shuffle function shifts the location of all the elements of an 
        //array list. This mimics the shuffle effect of a Music player
        //The attributes of the song all get shuffled together because they 
        //are all linked by the same seed.

        long seed = System.nanoTime();
        Collections.shuffle(songLibrary, new Random(seed));
        System.out.println("Your library is now shuffled" + "\n");
        viewAll();

        //Shuffles library, then outputs the new library list.
    }

    public void viewAll() {

        if (songLibrary.isEmpty()) {
            System.out.println("Your library is currently empty!");
        } else {

            System.out.println("Your Music Library" + "\n" + "Duration - Artist - Song - Album -(Year)  " + "\n");
            for (int i = 0; i < songLibrary.size(); i++) {
                SongClass s = songLibrary.get(i);
                s.printSong();
            }
        }

        System.out.println("\n");
    }

    public void randomSong() {

        int randomSong = (int) (Math.random() * (songLibrary.size() - 1));
        //uses Math.random to generate a random double between 0.0 and 1.0
        //it then multiplies it by the size of the array list - 1
        //The end result is that a random index of the array list is selected

        System.out.println("Now Playing:");
        //the selected song randomSong is then outputted
        //this changes each time the randomSong method is called
        SongClass s = songLibrary.get(randomSong);
        s.printSong();

    }

    public void saveLibrary() throws FileNotFoundException {

        try (PrintWriter pw1 = new PrintWriter("MUSIC LIBRARY.txt")) {
            File inFile = new File("MUSIC LIBRARY.txt");
            Scanner in = new Scanner(inFile);
            System.out.println("Your music library has been successfully exported!\n");
            pw1.println("Your Music Library");
            pw1.println(" ");
            pw1.println("Duration - Artist - Song - Album (Year)  " + "\n");
            pw1.println(" ");

            for (int i = 0; i < songLibrary.size(); i++) {
                System.out.println("The loop ran this many times");
                System.out.println(i);
                int counter = i + 1;
                pw1.println(counter + ": " + songLibrary.get(i));
            }
            System.out.println("Loop is over, PrintWriter should close.");
            pw1.close();
        }
    }

    public void addEntry() throws NumberFormatException {

        try {
            int minutes = ui.getInt("How many minutes does this song last?");
            int seconds = ui.getInt("How many seconds does this song last?");
            String title = ui.getString("What is the title of the track?");
            String artist = ui.getString("Who performs the track?");
            String album = ui.getString("What album is the track from?");
            int year = ui.getInt("What year was the track released?");
            System.out.println("Please enter a number:");
            System.out.println("\n");
            SongClass s = new SongClass(minutes, seconds, title, artist, album, year);
            songLibrary.add(s);
            System.out.println("Thank you!" + " " + title + " " + "was added to your library:");

        } catch (NumberFormatException x) {

            System.out.println(" ");
            System.out.println("Year/Duration can use numbers only, please try again.");
            System.out.println(" ");
        }

    }
} 
```

我的用户输入类

```
package MainClass;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Scanner;

public class UserInput{

    private Scanner keyboard;

    public UserInput() {
        this.keyboard = new Scanner(System.in);
    }

    public String getString(String prompt) {
        String line;

        System.out.print(prompt + ": ");
        line = this.keyboard.nextLine();

        return line;
    }

    public int getInt(String prompt) {
        String line;
        int num;

        System.out.print(prompt + ": ");
        line = this.keyboard.nextLine();
        num = Integer.parseInt(line);

        return num;
    }

    public Date getDate(String prompt) {
        String line;
        SimpleDateFormat formatter;
        Date date;

        System.out.print(prompt + " (dd/MM/yyyy): ");
        line = this.keyboard.nextLine();

        formatter = new SimpleDateFormat("dd/MM/yyyy");
        try {
            date = formatter.parse(line);
        }
        catch (ParseException ex) {
            date = null;
        }

        return date;
    }

    public boolean getBoolean(String prompt) {
        String line;

        System.out.print(prompt + "? (Y|N)");
        line = this.keyboard.nextLine();

        return line.equalsIgnoreCase("Y");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:19:31.957

> "1: MainClass.SongClass@c137bc9 MainClass.SongClass@c137bc9"

这是`toString`输出的默认实现。

您需要`toString`在 SongClass 中覆盖：

```
@Override
public String toString(){
   return String.format("%d:%d - %s - %s - %s - (%d)", 
      songMinutes,songSeconds, songTitle, songArtist , songAlbum, songYear);
} 
```

另一种选择（如果您不想覆盖 toString 可能会更好，因为该方法在其他地方使用）是循环遍历列表的所有元素并通过调用适当的 getter（或类似于您的`printSong`方法的其他方法）显式格式化输出）。

# php - preg_replace_callback 模式问题

> ID：14410134
> 
> 赞同：0
> 
> 时间：2013-01-19T01:16:36.130
> 
> 标签：php, regex, preg-replace-callback

我正在使用以下模式来捕获链接，并将它们转换为 HTML 友好链接。我在 preg_replace_callback 中使用了以下模式，并且在大多数情况下它都有效。

```
"#(https?|ftp)://(\S+[^\s.,>)\];'\"!?])#" 
```

但是当文本如下所示时，这种模式就会失败：

```
http://mylink.com/page[/b] 
```

在这一点上，它捕获了 [/b 有趣的是它是链接的一部分，结果如下：

```
<a href="http://woodmill.co.uk[/b">woodmill.co.uk[/b</a>] 
```

我已经查看了模式，并使用了一些备忘单来尝试了解正在发生的事情，但这让我很困惑。你们中的任何人都可以编码忍者的帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:29:09.897

尝试将左方括号添加到您的字符类：

```
(\S+[^\s.,>)[\];'\"!?])
            ^ 
```

**更新**

试试这个更有效的 URL 正则表达式：

```
^(https?://)?([\da-z\.-]+)\.([a-z\.]{2,6})([/\w \.-]*)*/?$ 
```

*（来自： http: [//net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)）*

我没有直接使用 PHP 正则表达式的经验，但是上面的内容足够简单和通用，我不会想到任何问题。您可能希望对其进行一些修改以仅提取域，就像您似乎使用当前的正则表达式一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:26:44.220

好的，我解决了这个问题。感谢@Cyborgx37 和@MikeBrant 的帮助。这是解决方案。

首先，我用 João Castro 在这个问题中使用的模式替换了我的正则表达式模式：[Making a url regex global](https://stackoverflow.com/questions/12352635/making-a-url-regex-global/14410248#14410248)

该模式的问题在于它在末尾捕获了任何尾随点，因此在模式的最后一部分中，我添加了`^.`使最终部分看起来像这样`[^\s^.]`。当我阅读它时，不要匹配尾随空格或点。

如上所述，这仍然导致匹配 bbcode 的问题，因此我使用 preg_replace_callback() 和 create_function() 将其过滤掉。最终的 create_function() 如下所示：

```
create_function('$match','
                $match[0] = preg_replace("/\[\/?(.*?)\]/", "", $match[0]);
                $match[0] = preg_replace("/\<\/?(.*?)\>/", "", $match[0]);
                $m = trim(strtolower($match[0]));
                $m = str_replace("http://", "", $m);
                $m = str_replace("https://", "", $m);
                $m = str_replace("ftp://", "", $m);
                $m = str_replace("www.", "", $m);

                if (strlen($m) > 25)
                {
                    $m = substr($m, 0, 25) . "...";
                }

                return "<a href=\"$match[0]\" target=\"_blank\">$m</a>";
'), $string); 
```

到目前为止的测试看起来不错，所以我很高兴它现在已经解决了。

再次感谢，我希望这对其他人有帮助:)

# git - git Bug 阻止合并

> ID：14410135
> 
> 赞同：0
> 
> 时间：2013-01-19T01:17:02.043
> 
> 标签：git, git-index

如何`git bisect`处理 git bug 或恢复我的 git 索引。首先出现错误消息，然后尝试以下修复失败

使用 GIT_MERGE_VERBOSITY=5 我运行`git merge origin master`并得到......

```
Merging:
9201eee porque no, "not and"
virtual origin
found 2 common ancestors:
21d206e (redo) merged in feature/edb and fixed the unit test. Also fixed a bug in bq where the imposition of the MIN_BUILDINGS constraint results in zero results, but an erroneous 'found_entities' field.
ac55def Merge pull request #276 from company/feature/chromeframe_support
  Merging:
  21d206e (redo) merged in feature/edb and fixed the unit test. Also fixed a bug in bq where the imposition of the MIN_BUILDINGS constraint results in zero results, but an erroneous 'found_entities' field.
  ac55def Merge pull request #276 from company/feature/chromeframe_support
  found 1 common ancestor:
  2f55197 Merge pull request #271 from company/feature/autobahn-host-as-setting
  Auto-merging requirements.unstable.txt
  Auto-merging requirements.txt
  Auto-merging project/tests/test_querier.py
  CONFLICT (content): Merge conflict in project/tests/test_querier.py
  Skipped project/static/project/images/bg-paper.png (merged same as existing)
  Skipped project/static/project/apps/scatter-plot/js/xcharts.custom.js (merged same as existing)
  Skipped edb/models.py (merged same as existing)
  CONFLICT (rename/rename): Rename "edb/migrations.broken/0006_auto__del_field_site_entity_id.py"->"edb/migrations/0012_lengthen_owner_type_and_rating_charfield.py" in branch "Temporary merge branch 1" rename "edb/migrations.broken/0006_auto__del_field_site_entity_id.py"->"edb/migrations/0005_change_site_id_to_site_entity_id.py" in "Temporary merge branch 2" (left unresolved)
  Skipped edb/migrations/0007_rvalue_changed_to_r_value.py (merged same as existing)
  Skipped edb/migrations/0004_regenerate_garbled_field_names_due_to_slashes_in_csv_header_strings.py (merged same as existing)
  Auto-merging BE/templates/base.html
BUG: There are unmerged index entries:
BUG: 1 edb/migrations.broken/0005_auto__add_field_site_id__chg_field_site_entity_id.py
fatal: Bug in merge-recursive.c 
```

*   `git reset --hard`不起作用（后续合并仍然失败）。
*   在任一方向（master -> mybranch 或 mybranch -> weather）合并都会导致相同的 BUG。
*   有问题的文件在工作目录中不存在，但 master ( `edb/migrations.broken/`) 中的相关空目录在 master 结帐时被删除`rm -f`，并且`git commit`ted （但显然 git 记录索引中没有任何更改）修复
*   不高兴`git update-index --force-remove --unmerged --really-refresh --again --remove`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:51:22.983

`hub` (github client) alias or a .gitignore of the deleted path migrations.broken was probably the source of the git "bug".

```
alias git=git   # or `brew remove hub`
git rm -rf edb/migrations.broken
git commit -am 'delete non-existent path to update git index'
git push origin feature/edb
git pull origin master
git checkout master
git pull origin master
git rm -rf edb/migrations.broken
git commit -am 'delete non-existent path to update git index'
git push origin master
git checkout feature/edb
git merge master
git commit -am 'delete non-existent path to update git index' 
```

Many of these commands (all of the `rm -rf` commands) will result in warnings about nothing done or nonexistent files. But somehow it worked to eliminate the BUG caused by a confused git index.

# c++ - 做一个函数还是不做一个函数

> ID：14410138
> 
> 赞同：1
> 
> 时间：2013-01-19T01:17:49.013
> 
> 标签：c++, coding-style

注意：对于这个问题，我主要指的是 C++，但这可能适用于其他语言。

注意：请假设没有递归。

人们经常说（如果你有一个非常大的函数）将一个函数“分解”成几个更小的函数，但这是合乎逻辑的吗？如果我知道我永远不会使用其中一个较小的函数怎么办，那只是浪费：内存、性能，而且您在阅读代码时可能不得不更多地跳过代码。另外，如果您只使用一次（假设很大）函数，您是否应该将函数体插入到将被调用的位置（出于与上次相同的原因，即：内存、性能，并且您可能有在阅读代码时更多地跳转代码）？所以...做一个功能还是不做一个功能，这是个问题。

**全部** **编辑**

我仍在浏览所有答案，但是从我到目前为止所读到的内容中，我已经形成了一个假设。

在开发期间将其拆分功能是否正确，但在部署之前执行我在问题中的建议，以及在开发中使用一次的功能，但在部署之前插入主体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:27:06.220

这真的取决于上下文。

当我们说函数的大小时，我们实际上是指函数内部线条的语义距离。我们更喜欢一个函数只做一件事。如果你的函数只做一件事，并且里面的语义距离很小，那么有大函数是可以的。

但是，让一个函数做很多事情并不是一个好习惯，最好将这些函数重构为几个较小的，命名好，代码放置好，这样代码的用户就不需要跳转大约。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:28:13.687

不要太担心性能和内存。您的编译器应该为您处理大部分内容，尤其是对于非常薄的函数。

我的目标通常是确保可以在读者的记忆中完全替换给定的函数调用——开发人员可以纯粹地处理抽象。拿着这个：

```
// Imagine here that these are real variable/function names as written by a
// lazy coder. I have seen code like this in the wild.
void someFunc(int arg1, int arg2) {
  int val3 = doFirstPart(arg1, field1);
  int val4 = doSecondPart(arg2, val3);
  queue.push(val4);
} 
```

doFirstPart 和 doSecondPart 的重构给你带来的收益很少，而且可能会让事情变得更难理解。但是，这里的问题不是方法提取：问题是糟糕的命名和抽象！您将不得不阅读`doFirstPart`，`doSecondPart`或者整个功能的重点都丢失了。

考虑一下，而不是：

```
void pushLatestRateAndValue(int rate, int value) {
  int rateIndex = calculateRateIndex(rate, latestRateTable);
  int valueIndex = caludateValueIndex(rateIndex, value);
  queue.push(valueIndex);
} 
```

在这个人为的例子中，你不必阅读`calculateRateIndex`，或者`calculateValueIndex`除非你真的想深入挖掘——你只要阅读就知道它做了什么。

除此之外，这可能是个人风格的问题。我知道有些程序员喜欢将每个业务“声明”提取到不同的函数中，但我发现这有点难以阅读。我个人的偏好是寻找机会从任何长于一个“屏幕”（约 25 行）的函数中提取一个函数，这具有使整个函数一次可见的优点，而且因为 25 行发生在我的个人心理上短期记忆的限制和暂时的理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:40:03.670

有很多很好的论据可以证明例程的长度不要超过一页纸的大致长度。大多数人并不总是想到的是——除非你部署调试符号，大多数人不这样做——从现场传来的堆栈跟踪更容易分析并变成关于原因的假设它所指的例程比错误发生在你从未有机会拆分的方法的 2,000 行鲸鱼中的某个地方时要小。

# java - 后台进程完成后显示通知Android

> ID：14410139
> 
> 赞同：0
> 
> 时间：2013-01-19T01:17:54.007
> 
> 标签：java, android, multithreading, http-request, loopj

我正在使用[loopj HTTP CLIENT](http://loopj.com/android-async-http/)在后台加载一个 HTTP 请求，完成后，我想显示一个“成功”通知（对话框、toast 等）

我将代码放在一个单独的（非活动）类中，该类具有执行后台请求的静态方法。最后，响应位于 onSuccess 方法下的 AsyncHttpResponseHandler 中。在这种方法中，我可以打印出响应，确认请求通过，将数据保存到 sd 卡/共享首选项，但是如何访问 UI 线程以显示通知？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:29:03.247

您可以使用 a`Handler`或调用`Activity.runOnUiThread()`. 所以你要么将一个`Handler`, 或一个`Activity`对象传递给你的静态方法，然后在你的`onSuccess()`方法中，做，

```
activity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
      // i'm on the UI thread!
    }
  }
); 
```

或者，

```
handler.post(new Runnable() {
    @Override
    public void run() {
      // i'm on the UI thread!
    }
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T05:54:32.223

我猜你的意思是作为后台进程的服务。服务有许多内置方法，如`onCreate`、`onStartCommand`、`onDestroy`等。我建议使用通知，因为通知不需要 UI 线程来完成这项工作。

Create a method to generate a notification and call it after your HTML read is over.

```
private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_stat_gcm;
    long when = System.currentTimeMillis();

    NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, MainActivity.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, notification);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T03:41:06.687

您可以使用消息触发本地广播，并使用接收器显示敬酒。

在进行更新的课堂上执行此操作：

```
Intent intent = new Intent("ACTION_TOAST");
intent.putExtra("message", "Success!");
LocalBroadcastManager.getInstance(context).sendBroadcast(intent); 
```

然后在任何可能想了解更新的活动中，执行以下操作：

```
BroadcastReceiver receiver = new BroadcastReceiver() {      
    @Override
    public void onReceive(Context context, Intent intent) {
        if ("ACTION_TOAST".equals(intent.getAction()) {
            Toast.makeText(MyActivity.this, intent.getStringExtra("message"), 
                    Toast.LENGTH_SHORT).show();
        }
    }
}

@Override
protected void onStart() {
    super.onStart();
    LocalBroadcastManager.getInstance(this).registerReceiver(
            receiver, new IntentFilter("ACTION_TOAST"));
}

@Override
protected void onStop() {
    LocalBroadcastManager.getInstance(this).unregisterReceiver(receiver);
} 
```

您仍然需要将上下文传递给您的静态方法，但即使该上下文是服务或其他无法显示 Toast/创建 UI 的上下文，这仍然有效。

# c# - 在 c# 中使用插入排序无法理解一个点

> ID：14410140
> 
> 赞同：-2
> 
> 时间：2013-01-19T01:17:59.247
> 
> 标签：c#, algorithm, insertion-sort

> *这是一个插入排序算法*

我理解将最大的 no 转发到下一个索引，但无法理解当它向前移动时，它的先前位置（索引）如何被刚刚比较的较小数字占据，例如在列表 [2,1] 2 移动到下一个索引列表 [ j+1]=列表[j]；但是 1 如何向后移动或移动到上一个索引

```
 //unsorted array   
int[] list = new int[] { 5, 2, 4, 6, 1 };   

// the key element being sorted   
int key;   
// 
//start looping starting from the second element  
for (int i = 1; i < list.Length; i++)   
{  
    key = list[i];//store the key 
    int j = i - 1;//get the previous index  
    //
    //loop until you meet a smaller number or 0 
    while (j >= 0 && list[j] > key)  
    { 
        //move the greater number forward  
        list[j + 1] = list[j];  
        // Decrementing  
        j--;   
    }  
    //set the key in the proper index  
    list[j + 1] = key; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:42:39.123

这是在循环内的最后一行完成的。向前移动一个或多个（甚至零个）项目后，当前值被放置在正确的位置。

例如，如果您已将数组排序到最后一项，它看起来像这样：

```
2, 4, 5, 6, 1 
```

值 1 被复制到`key`变量中，然后项被一一向前复制：

```
2, 4, 5, 6, -   <-  the empty slot here still contains 1, but it's unused
2, 4, 5, -, 6   <-  the empty slot here still contains 6, but it's unused
2, 4, -, 5, 6
2, -, 4, 5, 6
-, 2, 4, 5, 6 
```

现在`key`变量中的值被放置在最后一项被复制的位置：

```
1, 2, 4, 5, 6 
```

* * *

插入排序背后的理论是从一个数组中取出项目并插入到一个新数组中。您使用的实现仅使用单个数组，您可以将其视为已排序部分和未排序部分。已排序的部分从大小为零开始：

```
[][ 5, 2, 4, 6, 1 ] 
```

对数组进行排序时，会从未排序的部分中挑选项目，并将其插入到已排序部分的正确位置。已排序部分增长，未排序部分缩小，直到未排序部分为空：

```
[ 5 ][ 2, 4, 6, 1 ]
[ 2, 5 ][ 4, 6, 1 ]
[ 2, 4, 5 ][ 6, 1 ]
[ 2, 4, 5, 6 ][ 1 ]
[ 1, 2, 4, 5, 6 ][] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:33:23.753

```
There are TWO lists/arrays
The declaration at the top...

int[] list = new int[] { 5, 2, 4, 6, 1 };

Says to make a list/array of integer format called X 
X being whatever name you give it...

In this case the lists/arrays are list/array I[] and list/array J[]

So it (most likely) could be READING from one list/array maybe the I[] list/array
and assigning the SORTED values into the other list/array maybe the J[] list/array 
```

# knockout.js - 初始化嵌套数据后，Knockout 计算的 observable 不会更新

> ID：14410141
> 
> 赞同：3
> 
> 时间：2013-01-19T01:18:04.113
> 
> 标签：knockout.js, knockout-2.0, computed-observable

我正在尝试实现一个`HasOpenIssues`计算的 observable，它绑定到一个 UI 元素，如果嵌套的 observableArray 的任何成员满足条件，该元素就会更新，并且无法使其工作。我正在使用 KO 2.2.0。

我的视图模型有一个 observableArray of **Visits**；每个**访问**都有一个 observableArray of **Issues**；每个**Issues**数组都可以包含**Issue**的实例，它有一个可观察的**IsFixed**属性。我还有一个计算出的 observable **LatestVisit**，它返回**Visits**数组中的最后一次**访问：**

 **```
function myVM( initialData ) {
    var self = this;

    var Issue = function( id, isFixed, description ) {
        var self = this;
        self.Id             = id;
        self.IsFixed        = ko.observable( isFixed );
        self.Description    = ko.observable( description );
    };
    var Visit = function( id, visitDate, issues ) {
        var self = this;
        self.Id             = id;
        self.VisitDate      = ko.observable( visitDate );
        self.Issues         = ko.observableArray([]);

        // init the array
        issues && ko.utils.arrayForEach( issues, function( issue ) {
            self.addIssue( issue.Id, issue.Fixed, issue.Description );
        });
    }
    Visit.prototype.addIssue    = function( id, isFixed, description ) {
        this.Issues.push( new Issue( id, isFixed, description ) );
    };

    self.LatestVisit                = ko.computed( function() {
        var visits = self.Visits();
        return visits[ visits.length - 1 ];
    });
... vm continues 
```

所有这些都开始为空，在 I 之前`ko.applyBindings()`，我从服务器获取一些初始数据并将其作为参数传递给我的视图模型，它使用它来初始化各种可观察对象：

```
... continued from above...
    self.init = function() {
        // init the Visits observableArray
        ko.utils.arrayForEach( initialData.Visits, function( visit ) {
            self.Visits.push( new Visit( visit.Id, visit.InspectionDateDisplay, visit.Issues ) );
        });
        ... more initialization...
    };
    self.init();
}

function registerVM() {
    vm = new myVM( initialDataFromServer );
    ko.applyBindings( vm );
} 
```

因此，在此过程中的某一时刻，我无法观察到`LatestVisit`，因为`Visits`尚未填充数组，也无法观察到数组，因为尚未填充`Issues`其父级。`Visit`在我初始化之后，这些结构有数据，我需要更新`HasOpenIssues`以反映初始数据的状态。

然后，我允许用户向 中添加新`Issues`的`LatestVisit`，并将新的或现有的标记`Issues`为`Fixed`。所以我也需要`HasOpenIssues`对这些变化做出反应。

我试图`HasOpenIssues`在视图模型的根、`Visits`数组、`Visit`原型上以及直接在`LatestVisit`计算上添加一个计算属性，但没有任何效果。它看起来像这样：

```
 self.LatestVisit().HasOpenIssues = ko.computed( function() {
        var unfixed = ko.utils.arrayFirst( this.Issues(), function( issue ) {
            return issue.IsFixed == false;
        });
        console.log('HasUnfixedIssues:', unfixed);
        if ( unfixed ) { return true; }
    }); 
```

如果我让它在初始化之前运行，我会得到一些变化

```
Uncaught TypeError: Object [object Window] has no method 'Issues' 
```

或者，如果我`, root, { deferEvaluation: true }`向计算函数调用添加参数，我会得到

```
Uncaught TypeError: Cannot set property 'HasUnfixedIssues' of undefined 
```

如果我不使用 ()，比如`self.LatestVisit.HasOpenIssues`，那么我会得到

```
Uncaught TypeError: Object [object Window] has no method 'Issues' 
```

如果我不使用延迟选项。如果我添加它，我不会在初始化时收到错误，但是当我更新`Issues`后没有任何反应。

关于如何实现这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:32:28.913

我会做`HasOpenIssues`所有访问的财产。这样您就可以检查任何访问是否有未解决的问题，而不仅仅是最新的问题。

```
function Visit(id, visitDate, issues) {
    this.Id             = id;
    this.VisitDate      = ko.observable(visitDate);
    this.Issues         = ko.observableArray();

    this.HasOpenIssues  = ko.computed(function() {
        var unfixed = ko.utils.arrayFirst(this.Issues(), function (issue) {
            return !issue.IsFixed();
        });
        return unfixed !== null;
    }, this);

    // init the array
    this.Issues(ko.utils.arrayMap(issues, function (issue) {
        return new Issue(issue.Id, issue.Fixed, issue.Description);
    }));
} 
```

这样，即使没有问题，您也不会尝试将属性添加到`undefined`值中。

[人为的演示 1](http://jsfiddle.net/jeff1203/fgsmw/2/)

* * *

如果您只关心最近的访问，那么将`HasOpenIssues`属性附加到该属性`LatestVisit`是放置它的好地方。你只需要做对。检查您是否有`LatestVisit`第一个，然后返回适当的值，否则返回一些默认值（在这种情况下为 false）。

```
this.LatestVisit.HasOpenIssues  = ko.computed(function() {
    var visit = this.LatestVisit();
    if (!visit) {
        return false;
    }
    var unfixed = ko.utils.arrayFirst(visit.Issues(), function (issue) {
        return !issue.IsFixed();
    });
    return unfixed !== null;
}, this); 
```

[人为的演示 2](http://jsfiddle.net/jeff1203/fgsmw/3/)**

# c++ - 如何有效地改变矩阵的连续部分？

> ID：14410143
> 
> 赞同：0
> 
> 时间：2013-01-19T01:18:15.210
> 
> 标签：c++, performance, algorithm

*给定一个M*行*N*列的矩阵，并分配为`M*N`元素的字节数组（这些元素最初设置为零），我将根据以下规则修改此矩阵：在 a 附近找到的元素某些元素必须设置为给定值。换句话说，给定一个矩阵，我应该设置矩阵的一个区域：为此，我应该访问数组的不连续部分。

为了执行上述操作，我可以访问以下信息：

*   指向位于邻域中心的元素的指针（在上述操作期间不得更改此指针）；还提供了该元素的位置（行和列）；
*   `L*L`邻域的大小（ *L*始终是奇数）。

实现此操作的代码应该在 C++ 中尽可能快地执行：出于这个原因，我想到了使用上面的指针来访问数组的不同部分。相反，邻域中心元素的位置（行和列）可以让我检查指定区域是否超过矩阵的维度（例如，区域的中心可能位于矩阵的边缘） ：在这种情况下，我应该只设置位于矩阵中的那部分区域。

```
int M = ... // number of matrix rows
int N = ... // number of matrix columns

char* centerPtr = ... // pointer to the center of the region
int i = ... // position of the central element
int j = ... // of the region to be modified

char* tempPtr = centerPtr - (N+1)*L/2;
for(int k=0; k < L; k++)
{
    memset(tempPtr,value,N);
    tempPtr += N;
} 
```

如何改进代码？如何处理一个区域可能超过矩阵维度的事实？如何使代码在执行时间方面更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:10:28.160

对于区域不与矩阵外部重叠的一般情况，您的代码可能是最佳的。使用这种代码可能导致的主要效率问题是在列而不是行上进行外部循环。这会破坏缓存和分页性能。你没有这样做。

对于大多数现代编译器，使用指针几乎没有速度优势。优化器将从普通数组索引中得出非常好的指针代码。在某些情况下，我看到数组索引代码比手动调整的指针代码运行得更快。因此，如果索引算术更清晰，请不要使用指针算术。

有 8 种边界情况：北、西北、西、...、东北。这些中的每一个都需要一个自定义版本的循环来接触正确的元素。我会展示西北的情况，让你解决剩下的问题。

处理这种情况的最快方法是使用 3 级“if”树：

```
if (j < L/2) {  // northwest, west, or southwest
  if (i < L/2) {  
    // northwest
    char* tempPtr = centerPtr - (L/2 - i) * N - (L/2 - j);
    for(int k = 0; k < L; k++) {
      memset(tempPtr, value, L - j);
      tempPtr += N;
    }
  } else if (i >= M - L/2) { 
    // southwest
  } else { 
    // west
  }
} else if (j >= N - L/2) { // symmetrical cases for east.
  if (i < L/2) {  
    // northeast
  } else if (i >= M - L/2) { 
    // southeast
  } else { 
    // east
  }
} else { 
  if (i < L/2) {  
    // north
  } else if (i >= M - L/2) { 
    // south
  } else { 
    // no overlap
  }
} 
```

这样做很乏味，但每个区域最多只能进行 3 次比较。

# bash - 如何根据文本中的单词进行交互？（外壳脚本）

> ID：14410144
> 
> 赞同：1
> 
> 时间：2013-01-19T01:18:20.290
> 
> 标签：bash, shell, unix, scripting, ksh

我有一个文件目前的形式

```
location1 attr attr  ... attr
location2 attr attr  ... attr
...
locationn attr atrr  ... attr 
```

我想要做的是遍历每一行，获取位置（第一个字段）然后遍历属性。到目前为止，我知道如何获取第一个字段，但不遍历属性。每行也有不同数量的属性。

```
TEMP_LIST=$DIR/temp.list

while read LINE
do
        x=`echo $LINE | awk '{print $1}'`
        echo $x
done<$TEMP_LIST 
```

有人可以告诉我如何遍历属性吗？我想得到这样的效果

```
while read LINE
do
    location=`echo $LINES |awk '{print $1}'`
    for attribute in attributes
        do something involving the $location for the line and each individual $attribute
done<$TEMP_LIST 
```

我目前在 ksh shell 中工作，但任何其他 unix shell 都可以，我会找出如何翻译。如果有人可以提供帮助，我真的很感激，因为这可以节省我很多时间。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:36:33.083

类似于 DreadPirateShawn 的解决方案，但更简单一些：

```
while read -r location all_attrs; do
    read -ra attrs <<< "$all_attrs"

    for attr in "${attrs[@]}"; do
        : # do something with $location and $attr
    done
done < inputfile 
```

第二`read`行利用了 bash 的 herestring 特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:58:48.487

由于您已经在发布的代码中使用了 awk，为什么不学习如何使用 awk，因为它是为此类问题而设计的。

```
while read LINE
do
    location=`echo $LINES |awk '{print $1}'`
    for attribute in attributes
        do something involving the $location for the line and each individual $attribute
done<$TEMP_LIST 
```

用 awk 写成

```
#!/bin/bash
tempList="MyTempList.txt"

awk '{  # implied while loop for input records by default
    location=$1
    print "location=" location    # location as a "header"
    for (i=2;i<NF;i++) {
        printf("attr%d=%s\t", i, $i) # print each attr with its number
   }
   printf("\n")     # add new-line char to end of each line of attributes
}' ${tempList} 
```

如果要保存输出，请使用`awk '{.....}' ${tempList}> ${tempList}.new`

awk 在读取文件时设置了许多变量。`NF`表示当前行的 NumberOfFields。因此，for 循环从字段 2 开始，并以提供的格式打印该行上的所有剩余字段（根据您的需要进行更改）。该`i<=NF`驱动器能够在一行上打印所有元素。有时你会希望第三个到最后一个元素在线，所以你可以对存储在 NF 中的值进行数学运算，比如`thirdFromLast=$(NF-3)`. 对于所有数字变量，您可以将其作为值“取消引用”，并要求 awk 打印 $N(th) 字段中存储的值。即尝试

```
print "thirdFromLast="(NF-3)
print "thirdFromLast="$(NF-3) 
```

...查看在`$`包含数字的变量上产生的差异。

（对于大量数据，1 个 awk 进程将比使用子进程收集部分文件的效率高得多。）

还可以按照本教程[grymoire 的 awk 教程进行操作](http://www.grymoire.com/Unix/Awk.html)

IHTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T01:28:25.040

这可能也适用于其他 shell，但这里有一种适用于 Bash 的方法：

```
#!/bin/bash

TEMP_LIST=temp.list

while read LINE
do

    # Split line into array using space as delimiter.
    IFS=' ' read -a array <<< $LINE

    # Use first element of array as location.
    location=${array[0]}
    echo "First param: $location"

    # Remove first element from array.
    unset array[0]

    # Loop through remaining array elements.
    for i in "${array[@]}"
    do
        echo "   Value: $i"
    done

done < $TEMP_LIST 
```

# javascript - 用图像填充 div（忽略比例）

> ID：14410150
> 
> 赞同：0
> 
> 时间：2013-01-19T01:19:05.380
> 
> 标签：javascript, jquery, html, css, image

我试图`<div>`用图像填充父母，同时完全忽略比例。我知道它在某些维度上会看起来很丑，我只是想看看在这一点上是否可行。如您所见，图像正在缩放，而不是根据我的要求拉伸（Chrome）：http: [//jsfiddle.net/qdzaw/61/](http://jsfiddle.net/qdzaw/61/)

不幸的是，我在网上只能找到如何在保持比例的同时做到这一点：/

```
<img class="someimage" src="imgsrc" />

$(window).resize(function() {
    $(".someimage").height($(".someimage").parent().height());     
    $(".someimage").width($(".someimage").parent().width());  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:47:58.523

```
div {
   position:relative;
}
div img {
   position:absolute; 
   top:0; left:0; right:0; bottom:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:26:59.223

我想我在这篇文章中找到了你的答案：[Stretch and scale a CSS image in the background - with CSS only](https://stackoverflow.com/questions/1150163/stretch-and-scale-a-css-image-in-the-background-with-css-only#answer-1208392)

使用父 div 元素和此样式表：

```
div {
    width: 100%; 
    height: 100%; 
}

img {
    width:100%;
    height:100%;
} 
```

# python - PyQT 点击打开新窗口

> ID：14410152
> 
> 赞同：0
> 
> 时间：2013-01-19T01:19:15.937
> 
> 标签：python, pyqt

我是 PyQT 的新手，我正在寻找一个演示简单按钮的代码，单击该按钮将打开一个新的小窗口，其中包含 QTextEdit

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T10:00:00.137

这是开始的：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class MyDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(MyDialog, self).__init__(parent)

        self.buttonBox = QtGui.QDialogButtonBox(self)
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)

        self.textBrowser = QtGui.QTextBrowser(self)
        self.textBrowser.append("This is a QTextBrowser!")

        self.verticalLayout = QtGui.QVBoxLayout(self)
        self.verticalLayout.addWidget(self.textBrowser)
        self.verticalLayout.addWidget(self.buttonBox)

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonWindow = QtGui.QPushButton(self)
        self.pushButtonWindow.setText("Click Me!")
        self.pushButtonWindow.clicked.connect(self.on_pushButton_clicked)

        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.pushButtonWindow)

        self.dialogTextBrowser = MyDialog(self)

    @QtCore.pyqtSlot()
    def on_pushButton_clicked(self):
        self.dialogTextBrowser.exec_()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# c - 如何使用 C 读取命令处理器的结果？

> ID：14410158
> 
> 赞同：1
> 
> 时间：2013-01-19T01:20:14.667
> 
> 标签：c, shell, terminal, command

> **可能重复：**
> [以最佳方式从 system() 命令捕获标准输出](https://stackoverflow.com/questions/125828/capturing-stdout-from-a-system-command-optimally)

我正在尝试调用函数 system() 并读取它将在命令处理器上产生的任何输出。

```
//system acts as a command processor
char string[250];
system("ls");

//put result into string

return 0; 
```

有什么好的方法去做呢？

# java - GUI 通常是如何操作的？

> ID：14410161
> 
> 赞同：1
> 
> 时间：2013-01-19T01:20:35.000
> 
> 标签：java, swing, user-interface

我正在尝试学习 Java（此时在 Swing 中进行 GUI 编程并作为一般概念）并且我已经设法创建了一个基本的登录页面。然而，我想要做的是让它以某种方式将显示的内容更改为“主页”页面，就像它一样。我只能想到两种方法，第一种是打开一个新窗口并关闭旧窗口，第二种是以某种方式将登录页面所在的框架更改为我想要显示的任何内容。这通常如何在实际应用中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:29:48.553

有很多方法可以完成，包括你提到的两种。这实际上取决于您要达到的目标。可以使用在主窗口上弹出的 JDialog 来完成登录表单之类的操作，这样您就可以启动主窗口，而主窗口只需弹出一个 JDialog 以获取凭据等。

有时您使用 JInternalFrame 创建多文档界面。您需要的各种窗口似乎都在一个更大的主窗口中。

因此，如果您正在创建一个简单的 UI，那么只需按照您的建议切换 JFrame 的内容就足够了。您可以使用适当的 LayoutManager 来辅助，例如 CardLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:04:09.523

如果你有一个登录框架，更好的方法是让它成为一个模态对话框，即：

1）更人性化。

2）让你的编码工作更容易。

# jquery - IE10 每个选项卡上的 YouTube 嵌入叠加层

> ID：14410162
> 
> 赞同：2
> 
> 时间：2013-01-19T01:20:49.850
> 
> 标签：jquery, jquery-ui, internet-explorer, jquery-tools, internet-explorer-10

我遇到了一个奇怪的问题，似乎找不到解决方案。当嵌入 Youtube 视频时，使用 JqueryTools 选项卡小部件或 JqueryUI 选项卡小部件，它会不断将其覆盖在每个选项卡上。这只发生在 IE 中，专门用 IE10 测试过。有谁知道为什么？

我创建了一个 jsfiddle 来更好地说明这个问题：http: [//jsfiddle.net/ncfbX/19/](http://jsfiddle.net/ncfbX/19/)

**编辑：**

在不包含一些代码的情况下不会让我提交它，所以：

```
HTML:

<div class="main">
    <div class="slides">Slides division</div>

    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">tab1</a></li>
            <li><a href="#tabs-2">tab2</a></li>
            <li><a href="#tabs-3">tab3</a></li>            
        </ul>
        <div id="tabs-1">
            <div class="inner_panel">
                <p>working</p>
<iframe width="531" height="270" src="http://www.youtube.com/embed/7_nyhwuEX2c?rel=0" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
        <div id="tabs-2">
             <div class="inner_panel">
                 <p>Tab2 should not have a youtube video embedded.</p>     
            </div>
        </div>
        <div id="tabs-3">
             <div class="inner_panel">
                 <p>Tab3 should not have a youtube video embedded.</p>                 
            </div>
        </div>
    </div>
</div> 
```

**CSS：**

```
.inner_panel{height:350px;} 
```

**JAVASCRIPT：**

```
$(document).ready(function(){
   $('#tabs').tabs();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T06:51:36.313

好吧，我找到了一个修复，显然它与 Youtube 不尊重动态分配的 z-index 有关。

在标签下嵌入 Youtube 视频时使用以下代码，以使其与 IE10 一起正常工作：

```
<iframe title="YouTube video player" width="480" height="390" src="[YOUR_YOUTUBE_URL_HERE]?wmode=transparent" frameborder="0" wmode="Opaque"> 
```

**?wmode=transparent** at the end of the URL and **wmode="Opaque"** as an extra parameter is what makes it work.

# objective-c - 附加到 stringByReplacingCharactersInRange 的最后一个字母

> ID：14410164
> 
> 赞同：-1
> 
> 时间：2013-01-19T01:21:13.637
> 
> 标签：objective-c, xcode, cocoa-touch

我有一个`UItextfield`基于预定义字符串的自动完成其值。如果第一个字符串中有多个单词`currentString`，则结果显示将`currentString`附加最后一个字符。

所以在示例代码中

键入`No`时，`UITextField`s 结果文本变为`Note todayt`（附加到字符串的第二个单词的最后一个字母）

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range  replacementString:(NSString *)string {

NSString *currentString = [_txt.text stringByReplacingCharactersInRange:range withString:string];

 NSString *currentString = [_txt.text stringByReplacingCharactersInRange:range withString:string];
if ([currentString isEqualToString:@"No t"]) {
    textField.text = @"Note today"; 
```

有没有办法可以避免这种行为？

我努力了

```
 if(_txt.text.length>1)
    {
       _txt.text =[textField.text substringToIndex:[textField.text length] - 1];

    } 
```

和

```
if(_txt.text.length>1)
    {
        NSString *text2;

        NSString *currentString = textField.text;
        NSString *newString = [text2 substringToIndex:[text2 length]-1];
        textField.text=newString;
    }

    return NO;
}
return YES;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:37:32.117

我敢打赌你会返回 YES，这会导致输入“t”。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range  replacementString:(NSString *)string {
  NSString *currentString = [_txt.text stringByReplacingCharactersInRange:range withString:string];

  if ([currentString isEqualToString:@"No t"]) {
    textField.text = @"Note today";
    return NO;
  }

  return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:57:18.567

好的排序这个，我添加了一个 if 语句来删除多余的字符

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range  replacementString:(NSString *)string {

NSString *currentString = [_txt.text stringByReplacingCharactersInRange:range  withString:string];

NSString *currentString = [_txt.text stringByReplacingCharactersInRange:range withString:string];
if ([currentString isEqualToString:@"No t"]) {
textField.text = @"Note today";

  }

 if(_txt.text.length>=4)

  {
        NSString *text;

        text =[[textField text] stringByAppendingString:string];
        NSString *newString = [text substringToIndex:[text length]-1];

        textField.text=newString;

    return NO;

   }
   return YES;
} 
```

# google-maps-api-3 - 使用 Google 的脚本加载器时如何设置 API 密钥？

> ID：14410167
> 
> 赞同：6
> 
> 时间：2013-01-19T01:21:36.407
> 
> 标签：google-maps-api-3, google-ajax-api, google-loader

[我在https://code.google.com/apis/console/](https://code.google.com/apis/console/)注册了我的项目并生成了一个浏览器密钥。

[现在在使用Google Script Loader](https://developers.google.com/loader/)时如何使用该键？

我一直在这样做，它可以工作（有或没有 key 参数），但即使在几周后 API 控制台也没有显示任何请求：

```
<script src=//www.google.com/jsapi?key=my_key"></script>
<script>
    google.load('maps', '3.10', { other_params : 'libraries=places&sensor=false', callback : ... })
</script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T03:23:04.350

该密钥对 jsapi 无用，您必须将其附加到`other_params`：

```
<script>
    google.load('maps', '3', {
        other_params: 'key=my_key',
        callback: function(){}
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T08:06:02.780

使用图表/加载器时，您必须执行以下操作：

```
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
    });
    google.charts.setOnLoadCallback(drawRegionsMap);
    ...
</script> 
```

注意**mapsApiKey**属性。

如[https://developers.google.com/chart/interactive/docs/gallery/geochart中所述](https://developers.google.com/chart/interactive/docs/gallery/geochart)

# java - 如何序列化 HttpServletRequest/HttpServletResponse？

> ID：14410172
> 
> 赞同：-2
> 
> 时间：2013-01-19T01:22:29.233
> 
> 标签：java, servlets, serialization

我有两个客户端（A 和 B）和 Servlet。我想，当 A 客户端向 SERVLET 发送请求时，SERVLET 将请求重定向到客户端 B，客户端 B 将响应发送回客户端 A。客户端不是 SERVLETS ！！！它们是普通的套接字客户端，因此不可能经典的 servlet 重定向！

你有什么故障排除建议？？？

非常感谢！！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T01:42:00.097

首先，您不能使用 Java 序列化来序列化 HttpServletRequest 或 HttpServletResponse。符合这些 API 的对象通常包括对 servlet 实现堆栈中的“东西”的引用，这些东西本质上是不可序列化的。

其次，您不能将请求“重定向”到另一个客户端。从 HTTP 协议的角度来看，这没有意义。

*   当客户端向服务器发送请求并且服务器响应具有 3xx 状态代码表示“在其他地方尝试该请求”时，就会发生重定向。这是重定向到不同的*服务器*，而不是不同的客户端。

*   甚至忽略重定向意味着什么的细节。您不能向 HTTP 客户端角色中的对象发送 HTTP 请求。它不会期待它（听它），也不知道如何处理它。（实际上这将违反 HTTP 协议。）

第三，“普通套接字客户端”不能与 HTTP 服务（使用 Servlet 或其他任何东西实现）通信。客户端必须至少实现 HTTP 协议的一个子集才能让 HTTP 服务理解它自己。可以“手动”实现，但 IMO 这是一个坏主意......当有高质量的实现可以免费使用时。

简而言之，您似乎想要做的事情是不可能/荒谬的。（如果我正确理解你的问题......这是有争议的。）

* * *

如果您在这里解释了您实际尝试做的事情，我们也许可以提出明智的替代方法。

* * *

> 我正在尝试跨服务器连接两个 java 客户端应用程序。客户端将能够直接与其他客户端通信。

从字面上看，您不能使用 HTTP 做到这一点。但是您*可以*构建一个 HTTP 服务器/servlet，将消息从一个客户端传输到另一个客户端；例如

1.  客户端 A 向服务器发送包含 A 消息的 PUT 请求。
2.  服务器存储消息并回复客户端 A。
3.  客户端 B 发送一个 GET 请求，询问“任何消息？” 到服务器。
4.  服务器查找消息并用来自 A 的消息进行响应。

但请注意，您*不能*使用普通的套接字客户端来做到这一点。客户端必须是 HTTP 客户端。

如果您准备放弃服务器是 HTTP 服务器/servlet 的要求，您可以让“简单套接字”客户端打开到服务器的双工连接，并让服务器在客户端之间传递“消息”。这需要为消息传递实现自定义“协议”。

第三种选择是使用现有的 RPC 或对象代理技术；例如 RMI、CORBA、ICE 等

# c# - 显示输出查询？

> ID：14410177
> 
> 赞同：1
> 
> 时间：2013-01-19T01:23:47.670
> 
> 标签：c#, mysql, console-application

我正在尝试显示`SELECT * FROM phpbb_topics` 从 C# 控制台应用程序运行的查询的输出，`using the MySql connector api`.
该查询在我运行时运行良好`phpmyadmin`，并为我提供了论坛主题列表。

但是，当我在 C# 应用程序中远程运行它时，它似乎什么也没做。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql;
using MySql.Data; 

namespace SqlConsoleSlr
{
    class Program
    {
        static void Main(string[] args)
        {
            MySql.Data.MySqlClient.MySqlConnection mycon =
            new  MySql.Data.MySqlClient.MySqlConnection(GetConnectionString());
            Console.WriteLine(GetConnectionString());

            if (mycon.State != System.Data.ConnectionState.Open)

                try
                {
                    mycon.Open();
                    Console.WriteLine("we're in");
                }

                catch (System.Data.SqlClient.SqlException ex)
                {
                    Console.WriteLine(ex);
                }

                MySql.Data.MySqlClient.MySqlCommand msc = new MySql.Data.MySqlClient.MySqlCommand("SELECT * FROM `phpbb_topics` ");

            Console.WriteLine("completed");  /// gets to here, but doesn't show output of msc

            Console.ReadLine();
        }

        public static string GetConnectionString()
        {
            string hostname = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx;";
            string username = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx;";
            string dbname = "xxxxxxxxxxxxxxxxxxxxxxxx;";
            string password = "xxxxxxxxxxxxxxxxxxxxxxxxxxx;";

            string s = "Server=" + hostname + "User=" + username + "Database=" + dbname + "Password=" + password;

            return s; 
        }
    }
} 
```

我需要在查询对象上调用一些方法吗？我能找到的唯一一个是`msc.BeginExecuteReader();`，但这似乎也没有改变执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:28:55.263

您将需要创建一个 MYSQL 数据读取器对象。

```
MySql.Data.MySqlClient.MySqlDataReader read = msqlCommand.ExecuteReader(); 
```

然后您可以在`read.read()`所有记录之后输出记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:42:41.090

您必须创建 MySQL Data Reader 的对象，然后执行命令。

```
MySql.Data.MySqlClient.MySqlCommand msc = new MySql.Data.MySqlClient.MySqlCommand("SELECT * FROM `phpbb_topics` ");

    MySql.Data.MySqlClient.MySqlDataReader read = msqlCommand.ExecuteReader();

    if(read != null)
    {
    //Sample output
    while (read.Read())
            {
                int TopicID = Convert.ToInt32(read["Topic_ID"]);
                string TopicName = Convert.ToString(read["Topic_Name"]);
                Console.WriteLine(TopicID.ToString() + " : " + TopicName);
            }

    } 
```

# kotlin - kotlin 命令行编译器

> ID：14410179
> 
> 赞同：4
> 
> 时间：2013-01-19T01:24:26.447
> 
> 标签：kotlin

如何使用 js 命令行编译器？

```
fun main(args: Array<String>): Unit { 
    println("Hello world!") 
}

E:\kotlinc\bin>kotlinc-js -output test -sourceFiles test.kt
ERROR: E:\kotlinc\bin\test.kt: (4, 5) Unresolved reference: println
exec() finished with COMPILATION_ERROR return code 
```

在 IDE 中，我也无法让 js 编译工作。IntelliJ IDEA 12 是否有最新的入门指南？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:02:14.383

您需要指定库的路径（kotlin-jslib.jar），使用`-libraryFiles`命令行选项

# iphone - iPhone 上的 Safari 渲染问题

> ID：14410183
> 
> 赞同：0
> 
> 时间：2013-01-19T01:25:25.447
> 
> 标签：iphone, html, css

我想知道是否有人可以在他们的 iPhone 上查看这个网站[http://dev.beckin.com/razorsharpgame/](http://dev.beckin.com/razorsharpgame/)并告诉我为什么它看起来像这样以及如何修复它。不幸的是，我没有 iPhone，但我的客户有并希望将其修好。他说（页脚的右半部分和页眉的一部分被透明的白色覆盖。）

任何帮助将非常感激！谢谢！

![在此处输入图像描述](../Images/f11aefe3603ffc25b2742e2f2440313a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:36:04.197

Iphone 调试控制台说它的视口元标记有问题。

`<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">`

不确定这是否与它有关？

# codeigniter - 无法提取嵌入的字体 - Code Igniter 和 dompdf

> ID：14410185
> 
> 赞同：0
> 
> 时间：2013-01-19T01:25:40.197
> 
> 标签：codeigniter, dompdf

按照此链接（[https://github.com/EllisLab/CodeIgniter/wiki/PDF-generation-using-dompdf](https://github.com/EllisLab/CodeIgniter/wiki/PDF-generation-using-dompdf)）中的说明，打开创建的 pdf 文件时总是遇到错误。错误消息是：“无法提取嵌入字体'TradeGothicLT-CondEighteen'。某些字符可能无法正确显示或打印。”当我单击确定时，pdf 显示黑色背景，当我开始突出显示正文时，它会捕获文本但文本为黑色字体颜色。我应该怎么做才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:46:48.737

您的字体缓存可能有问题，位于 dompdf/lib/fonts/dompdf_font_family_cache.php（尽管确切的文件名取决于您的版本以及您是否已加载字体）。该文件告诉 dompdf 哪些字体可用于 PDF。如果此文件引用了实际上不可用的字体，您可能会在查看时遇到重大问题。您可能需要重新加载字体文件。查看[Unicode how-to](https://github.com/dompdf/dompdf/wiki/UnicodeHowTo)以了解使用嵌入字体的概述。本文档尚未更新以反映 dompdf 0.6.0 beta 3 中实施的更改，但信息仍然相关。

# java - Java 桌面应用程序有没有好的框架？

> ID：14410190
> 
> 赞同：32
> 
> 时间：2013-01-19T01:26:02.067
> 
> 标签：java, swing, eclipse-rcp, desktop-application, spring-rcp

我已经在 Swing 中开发了许多桌面应用程序，即使是那些稍微复杂一点的桌面应用程序，它们都集成了 Hibernate 和 Spring。我发现很多事情都是重复的，应该以方便快捷的方式完成，比如应用程序生命周期、日志记录、警报、授权、表单及其验证。我开始寻找框架。我遇到了 Swing 应用程序框架，它已经死了好几年了，事实证明。Spring RCP 确实符合我的期望，尤其是基于 Java Bean 模型创建表单是我喜欢的，但我意识到它也死了。Netbeans RCP 不适合我，我正在使用 Eclipse，我不想使用其他 IDE 进行桌面开发。我对 Eclipse RCP 并不是很兴奋，我觉得它太面向 Eclipse，我更喜欢与任何工具耦合度低的东西，

我很惊讶用 Java 开发基于桌面的业务应用程序的支持如此薄弱。就像Java仅用于Web环境一样。那么制作此类应用程序的首选语言是什么？如果我想继续使用 Java，是否有机会找到类似于 Spring RCP 的东西（到目前为止我找不到）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T02:16:08.760

请尝试[格里芬](http://griffon-framework.org)。这是基于[groovy 语言](http://groovy.codehaus.org)并受到 [grails 框架](http://grails.org/)的启发。它运行在 JVM 上，语言对 Java 程序员非常友好。

来自网站的报价

> Griffon 是用于在 JVM 中开发桌面应用程序的应用程序框架，其中 Groovy 是首选语言。受 Grails 的启发，Griffon 遵循约定优于配置的范式，搭配直观的 MVC 架构和命令行界面。

.... 该架构具有很强的可扩展性。

> Griffon 框架可通过插件进行扩展。有很多可供选择。例如，您会找到适用于 Swingx、Jide 和 Macwidgets 等 3rd 方 Swing 组件的插件；与持久性相关的插件，如 DataSource、GSQL、Hibernate 等；可以通过 JOGL、LWJGL 和 Processing 支持 3D 图形和动画。还有很多！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T17:59:04.903

前段时间我问了一个类似的问题，如果您有兴趣，请参阅[Swing 桌面开发。](https://stackoverflow.com/questions/9392463/swing-desktop-development/9405162#9405162)

我的结论是/是根本没有框架可以为您的桌面应用程序做任何事情，任何无数伟大的 WEBframeworks 都可以为您的 web 应用程序做些什么。这似乎很荒谬，但根据我的经验，由于出色的 Web 框架和缺乏桌面框架，开发 Web 应用程序变得更加容易。

我一直在为 2 个项目使用 Spring-RCP。它很棒，但现在几乎无法使用，因为你坚持使用它的 spring 2.5。而且它对我来说“感觉”有点慢，并且在 64 位机器上真的很耗内存，这很可能是 Spring-Swing 问题：[https ://jira.springsource.org/browse/SPR-9628](https://jira.springsource.org/browse/SPR-9628)

我等了瓦尔基里计划，但它似乎已经死了

我认为您不会找到完全满足您要求的任何东西。[http://swingx.java.net/](http://swingx.java.net/)可能会为您提供一些 GUI 小部件，例如 JXDatePicker。我还推荐 JGoodies Binding 和 JGoodies Form，两者都很棒。如果您使用客户端-服务器应用程序，我强烈建议您使用 Spring-Remoting（例如 HTTP Invoker）和 Spring-Security。真的让事情变得更简单。

我喜欢用 Swing 开发桌面应用程序，但不幸的是你真的必须“加倍努力”。客户端-服务器通信、安全性甚至验证只是如今看起来过于复杂的许多事情中的几个例子（与现代 web 框架相比）。此外，您可能会发现使用 java-webstart 自动构建、签名和部署应用程序并不像应有的那么容易。

Spring-RCP 是迄今为止我发现的最接近“完整”桌面框架的东西，它已经死了好几年了。

祝你好运！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-19T01:58:04.307

这主要取决于应用程序的大小。

对于中小型应用程序，使用不使用其他语言的 JavaFX 2 是有意义的，您可以从一些基本[教程](http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm)开始。

正如您提到的企业级应用程序[Eclipse RCP](http://wiki.eclipse.org/index.php/Rich_Client_Platform)和[Netbeans RCP](http://netbeans.org/features/platform/)是一个不错的选择。

Netbeans RCP 对于开发来说要简单得多，您不应该仅仅因为 IDE 偏好而忽略它。有一本关于它的免费[书籍](http://wiki.netbeans.org/BookNBPlatformCookbook)，这是一个很好的起点。

还有一个[选项 e4](http://wiki.eclipse.org/Eclipse4/Tutorials)应该是 Eclipse 的显着改进，但我不能说我已经使用它了

值得一看的相关资源可能是：

[http://netbeans.dzone.com/why-from-eclipse-rcp-to-netbeans-platform](http://netbeans.dzone.com/why-from-eclipse-rcp-to-netbeans-platform)

[Netbeans RCP 与 Eclipse RCP](https://stackoverflow.com/questions/4003372/netbeans-rcp-vs-eclipse-rcp)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-20T09:08:31.370

查看[JGoodies](http://www.jgoodies.com/)。不仅外观更好，它们还提供了设计 Swing 应用程序的框架。

桌面应用程序的最大问题是它实际上取决于您要设计的内容。与网页->请求->网页的 webapps 不同，桌面应用程序几乎可以做任何事情。没有标准周期，即使对于商业应用程序也是如此。它更像 AJAX，而不是普通的 Java EE 或 PHP webapp。以及有多少 AJAX 库实际上提供了除了调用和更新特定组件之外的框架。

您可以更新菜单、按钮、面板、动态渲染的内容、更改图形、更新数据等。

如果您只是在寻找表格，那么[JGoodies](http://www.jgoodies.com/)可能是您最好的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:44:24.193

我不知道任何这样的框架，但`Netbeans`为 Swing 组件提供了拖放向导。`Eclipse`也有类似的插件，但它基于 Netbeans 插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-25T20:00:53.500

> 我发现很多事情都是重复的，应该以方便快捷的方式完成，比如应用程序生命周期、日志记录、警报、授权、表单及其验证。

我建议将这些提取到您的个人“核心”库中，您可以在所有项目中共享和使用。既然你已经实现了你正在谈论的东西，那么概括它们应该比研究一个全新的框架更容易。可能是一个私人 Maven 项目？

开发重点正在转向 Web 和移动，因此我们不应该期望桌面框架供应商做出任何重大努力。

# python - Scikit-learn：半监督朴素贝叶斯实现可用吗？

> ID：14410193
> 
> 赞同：2
> 
> 时间：2013-01-19T01:26:10.677
> 
> 标签：python, classification, bayesian, scikit-learn, bayesian-networks

我想使用 Scikit-learn 的半监督朴素贝叶斯（伯努利）的实现。根据[github 中的这个链接，](https://github.com/scikit-learn/scikit-learn/pull/430/files)一年前有一些工作和讨论（半监督NB 类）。另一方面，似乎还有[另一种不同的实现（函数 fit_semi？），它似乎后来被另一个用户打磨了](https://github.com/scikit-learn/scikit-learn/pull/107)。但是，它们都没有在当前的稳定版本中可用。

有人可以向我展示一个示例，说明如何在当前版本的 scikit-learn 中使用这两种实现之一来构建半监督朴素贝叶斯？谢谢。

PS：我正在使用来自 NLTK 的 scikit-learn 分类器和 SklearnClassifier 类

**编辑**

我在我的项目中尝试了 SemiSupervisedNB 的代码，将未标记类的标签从 -1 更改为 2（我正在使用 NLTK 中的 SKlearnClassifier，我的未标记类获得标签 2）。但是，我得到 ValueError: array must not contain infs or NaNs when computing d （模型的当前参数和先前参数之间的差异），因为截距数组包含 inf 值......关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:29:24.757

几个月前，我[在 GitHub 上](https://github.com/scikit-learn/scikit-learn/issues/1310)打开了一个关于这个主题的问题。可以将相应的代码添加到 scikit-learn 的当前 master 分支。

大约一年前，用户@larsmans`SemisupervisedNB`在文件中添加了一个实验类。`sklearn/naive_bayes.py`此代码位于`emnb`他的分叉 scikit-learn 存储库的分支中，可以在[此处](https://github.com/larsmans/scikit-learn/tree/emnb)访问。

基本代码位于两个文件中：

1.  当前主分支中的文件`naive_bayes.py`必须替换为该`emnb`分支中较旧的文件。

2.  需要对类进行编辑，`LabelBinarizer`这可以`sklearn/preprocessing.py`在 master 分支的文件中找到。整个类必须由其在@larsmans`emnb`分支中的定义替换。在那里，它驻留在文件中`sklearn/preprocessing/__init__.py`。

尽管一年来朴素贝叶斯分类器的代码没有太大变化，但还是添加了一些错误修复。`naive_bayes.py`因此，保留文件和类的当前版本`LabelBinarizer`而不是给实验版本不同的名称是有意义的。

我刚刚创建了自己的 scikit-learn 存储库分支，并将实验文件添加到当前 stable 分支之上`0.13.X`。这个分支被调用`0.13.X-emnb`并且可以在[这里](https://github.com/pemistahl/scikit-learn/tree/0.13.X-emnb)访问。如果您查看我最近的三个提交（[1](https://github.com/pemistahl/scikit-learn/commit/9beea6bb51b847c1f33fb56870101b0796130f2f)和[2](https://github.com/pemistahl/scikit-learn/commit/547e4f58f9e39d72f81cb3d53b95fe165570ef55)和[3](https://github.com/pemistahl/scikit-learn/commit/f85d76c602f4f13ca9a0702415e49d35d09b2cdf)），您会看到我已更改和新创建的文件。

由于`SemisupervisedNB`不能与其他分类器的最新版本一起使用，我刚刚在`naive_bayes.py`called旁边添加了一个新模块`semisupervised_naive_bayes.py`。在那里，您可以在重命名的版本中找到旧版本的分类器，例如`SemiMultinomialNB`，`MultinomialNB`这样它们就不会与最新版本的分类器发生冲突。同样，我在`SemisupervisedLabelBinarizer`旁边添加了一个类`LabelBinarizer`（名称的选择有点不幸，但至少很清楚它应该用于什么）。

因此，如果您想使用分类器的半监督版本，请使用模块`sklearn.semisupervised_naive_bayes`。对于当前版本，请使用模块`sklearn.naive_bayes`。

但请记住，这是高度实验性的。这只是使旧代码正常工作的设置。我没有搜索错误。

# matlab - Matlab - 同一图上的连续图和 Semilogx

> ID：14410195
> 
> 赞同：1
> 
> 时间：2013-01-19T01:26:30.860
> 
> 标签：matlab, plot

我试图在同一个图上绘制函数 f 的演化，参数 x 在 ]0,1] 中。我想在同一个图中用一个 x 轴看到 f 远离 0 和接近 0 的演变。

现在我只有两个不同的数字，一个使用带有 x=[0.1 ... 1] 的 plot，另一个使用**带有**x=[1e-9 1e-7 1e-5...0.1] 的**semilogx 。**我希望两个图都在同一个图上，x 轴在开始时是对数的，然后在某个 x0 之后是线性的（假设 x0=0.1）。

我不想要使用**plotxx 的**东西，因为我只想要一个 x 轴。

你知道这是否可能吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:45:24.410

只需在`y`不指定向量的情况下绘制`x`向量，这将为您提供均匀间隔的绘图，然后使用`XTick`and`XTickLabel`使其工作。例如，

```
x1=logspace(-10,-1,10);
x2=linspace(1,10,10);
y1=x1.^0.25;
y2=1./x2;

plot([y1 y2],'-x') 
xlabels=num2cell([x1 x2]);
set(gca,'XTick',1:numel(x1)+numel(x2),'XTickLabel',xlabels) 
```

![在此处输入图像描述](../Images/ff2a46c20941c6d3422b8f5d6847860a.png)

如果你想使用 Latex 来格式化刻度标签，你需要[从 Matlab File Exchange 下载一个函数](http://www.mathworks.com/matlabcentral/fileexchange/15986)。

# c# - 返回一个类的所有字段

> ID：14410197
> 
> 赞同：3
> 
> 时间：2013-01-19T01:26:50.073
> 
> 标签：c#, reflection

我正在尝试循环浏览班级中的字段，将某种类型的字段放入列表中，然后返回该列表。我知道我缺少一些关键组件，但我无法弄清楚我做错了什么。这是我到目前为止所拥有的：

`...`

我需要将实际字段的列表作为指针返回，而不是数据的副本。任何帮助使其工作的帮助将不胜感激。

我删除了上面的代码（你应该仍然可以在历史记录中看到它），因为它令人困惑。这是更新的代码（删除了一些额外的东西），这要归功于 Competitive_tech 的回答：

```
string prop1;
BaseClass prop2;
SubClass prop3;
SubClass prop4;

public List<BaseClass> GetData()
{
    List<BaseClass> DataList = new List<BaseClass>();

    foreach (System.Reflection.PropertyInfo thisInfo in this.GetType().GetProperties())
    {
        var tempPropery = thisInfo.GetValue(this, null);
        if (tempPropery.GetType().IsSubclassOf(typeof(BaseClass)) || tempPropery.GetType().Equals(typeof(BaseClass)))
        {
            DataList.Add((BaseClass)tempPropery);
        };
    }

    return DataList;
} 
```

上面的代码将允许您从您的类中获取特定基类型的所有属性并将它们返回到一个列表中。所以上面的代码会返回 prop2 - prop4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:53:43.113

你可以通过反思来做到这一点。

```
foreach (System.Reflection.PropertyInfo oProperty in this.GetType().GetProperties()) {
} 
```

拥有此信息或过滤属性后，您可以通过多种方式使用它（例如，通过向要收集的属性添加属性）。

[您可以从 MSDN](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)获得更多信息。

请注意，此代码专门引用属性，但有用于检索字段 ( [GetFields](http://msdn.microsoft.com/en-us/library/ch9714z3.aspx) ) 和所有成员 ( [GetMembers](http://msdn.microsoft.com/en-us/library/424c79hc.aspx) ) 的等效方法。

获得 PropertyInfo 后，您可以调用 GetValue 方法：

```
 foreach (System.Reflection.PropertyInfo oProperty in this.GetType().GetProperties()) {
            Console.WriteLine(oProperty.Name + " = " + oProperty.GetValue(this, null).ToString());
        } 
```

或者，如果您同时查看字段和属性：

```
 foreach (System.Reflection.MemberInfo oMember in this.GetType().GetMembers())
        {
            switch (oMember.MemberType)
            {
                case System.Reflection.MemberTypes.Field:
                    var oField = (System.Reflection.FieldInfo)oMember;
                    Console.WriteLine(oField.Name + " = " + oField.GetValue(this).ToString());
                    break;

                case System.Reflection.MemberTypes.Property:
                    var oProperty = (System.Reflection.PropertyInfo)oMember;
                    Console.WriteLine(oProperty.Name + " = " + oProperty.GetValue(this, null).ToString());
                    break;

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:43:40.237

您可以将数据存储在字典中。对于每个属性，仅从字典中设置/获取值。像这样的东西：

```
public class MyData {
    private Dictionary<string, object> myData;
    public MyData {
        this.myData = new Dictionary<string, object>();
    }

    public decimal LastVersion { get { return (decimal)this.myData["LastVersion"]; } private set { this.myData["LastVersion"] = value; } }

    public PrimaryAbility STR { get { return (PrimaryAbility)this.myData["STR"]; } private set { this.myData["STR"] = value; } }
    public PrimaryAbility DEX { get { return (PrimaryAbility)this.myData["DEX"]; } private set { this.myData["DEX"] = value; } }
    public PrimaryAbility CON { get { return (PrimaryAbility)this.myData["CON"]; } private set { this.myData["CON"] = value; } }
    public PrimaryAbility INT { get { return (PrimaryAbility)this.myData["INT"]; } private set { this.myData["INT"] = value; } }
    public PrimaryAbility WIS { get { return (PrimaryAbility)this.myData["WIS"]; } private set { this.myData["WIS"] = value; } }
    public PrimaryAbility CHA { get { return (PrimaryAbility)this.myData["CHA"]; } private set { this.myData["CHA"] = value; } }

    public DerivedAbility HP { get { return (DerivedAbility)this.myData["HP"]; } private set { this.myData["HP"] = value; } }
    public DerivedAbility MP { get { return (DerivedAbility)this.myData["MP"]; } private set { this.myData["MP"] = value; } }
    public DerivedAbility SP { get { return (DerivedAbility)this.myData["SP"]; } private set { this.myData["SP"] = value; } }
    public DerivedAbility AC { get { return (DerivedAbility)this.myData["AC"]; } private set { this.myData["AC"] = value; } }
} 
```

有一天我发现了这个：“Enum.GetValues(typeof(TvStations))”，也许你应该像这样搜索一些。

# php - 添加标签计数 wp_tag_cloud 功能

> ID：14410198
> 
> 赞同：1
> 
> 时间：2013-01-19T01:26:54.767
> 
> 标签：php, wordpress

我想使用该`wp_tag_cloud`功能显示我的热门标签和标签计数。

这是我的 HTML 代码示例：

```
<a href="#">science <span>2</span></a>
<a href="#">tools <span>3</span></a>
<a href="#">music <span>6</span></a>
<a href="#">lahore <span>0</span></a> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:50:35.400

我刚刚得到它 - 这是解决方案：

```
<?php 
$tags = get_tags('order=desc&number=10');
foreach ($tags as $tag) {
    $tag_link = get_tag_link($tag->term_id);  
    $html .= "<a href='{$tag_link}' title='{$tag->name} ile ilgili yazılar' class='{$tag->slug}'>";
    $html .= "{$tag->name}<span>{$tag->count}</span></a>";
}
echo $html;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T04:30:34.663

像这样简单地使用 CSS：

```
a[title]:after{
 content: attr(title);
} 
```

# ruby-on-rails - rails activerecord：如何指定与“belongs_to ...：class_name ...”的反向关系

> ID：14410200
> 
> 赞同：0
> 
> 时间：2013-01-19T01:27:00.883
> 
> 标签：ruby-on-rails, rails-activerecord

我的`belongs_to ... :class_name`关联工作正常，但看不到如何创建互惠关联。

这是我现在拥有的：

```
class Contact < ActiveRecord::Base
  # has fields email_id and phone_id
  belongs_to :email, :class_name => 'Rolodex' # this works fine
  belongs_to :phone, :class_name => 'Rolodex' # this works fine
end

class Rolodex < ActiveRecord::Base
  # entry:string  holds a phone#, email address, etc
  has_many :contacts    # does NOT WORK, since no Contact.rolodex_id field
end 
```

并且该关联在 Contact -> Rolodex 方向上运行良好（通过名称：电话和：电子邮件）

```
john = Contact.first
john.phone.entry
# correctly returns the person's rolodex.entry for their phone, if any
john.email.entry
# correctly returns the person's rolodex.entry for their email, if any 
```

但是，如果我想查找所有共享 rolodex 条目的联系人，我无法使用：

```
r = Rolodex.first
r.contacts
# column contacts.rolodex_id does not exist 
```

当然，我可以绕过关联，直接进行查找：

```
Contacts.where("(email_id = ?) OR (phone_id = ?)", r.id. r.id) 
```

但我认为有一些（更好的）方法，例如，一种指定`belongs_to ... :class_name`关联倒数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:40:11.373

像下面这样的东西会起作用：

```
class Rolodex < ActiveRecord::Base
  has_many :email_contacts, class_name: 'Contact', foreign_key: 'email_id'
  has_many :phone_contacts, class_name: 'Contact', foreign_key: 'phone_id'

  def contacts
    email_contacts + phone_contacts
  end
end 
```

# javascript - 开关未触发

> ID：14410203
> 
> 赞同：0
> 
> 时间：2013-01-19T01:27:46.653
> 
> 标签：javascript

我有五个图像。当我单击一个时，我希望打开一个警报框。现在只是为了测试。它不会触发任何东西。有什么建议为什么不呢？谢谢你。

```
$(document).ready(function() {
$("input:image").click(function(evt) {
evt.preventDefault();
setSearch( $(this).val() );})
})

function setSearch()
{
    switch(this){
        case "Place":
            alert("Case is Place"); 
            break;
        case "Cuisine":
            alert("Case is Cuisine");
            break;
        case "City":
            alert("Case is City");
            break;
        case "State":
            alert("Case is State");
            break;
        case "ZipCode":
            alert("Case is ZipCode");   
            break;  
        }
} 
```

在图像上

```
 <td width="192"><div align="center"> <input name="Place" type = "image" id="Place" value = "Place" src="../Glass-Place.jpg" alt="Place" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:30:13.123

我猜这是因为`n`没有在`click`处理程序中定义。

请尝试以下操作：

```
$("input:image").click(function(e) {
    setSearch(this.value);
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:57:20.973

这行得通。

```
$(document).ready(function() {
$("input:image").click(function(e) {
var n = setSearch(this.value);
e.preventDefault();
});}) 
```

和这个....

```
function setSearch(n)
{
    switch(n){
        case "Place":
            alert("Case is Place"); 
            break;
        case "Cuisine":
            alert("Case is Cuisine");
            break;
        case "City":
            alert("Case is City");
            break;
        case "State":
            alert("Case is State");
            break;
        case "ZipCode":
            alert("Case is ZipCode");   
            break;  
        }
} 
```

# javascript - 通过检索 rel 属性调用变量

> ID：14410211
> 
> 赞同：0
> 
> 时间：2013-01-19T01:29:01.583
> 
> 标签：javascript, jquery, frontend

> **可能重复：**
> [有没有办法使用包含变量名称的字符串来访问 javascript 变量？](https://stackoverflow.com/questions/1441532/is-there-a-way-to-access-a-javascript-variable-using-a-string-that-contains-the)

我根据用户与我的原型的交互编写了一些内容脚本来显示。当他们点击某个标注时，我试图使用`rel`与其关联的标签来输入正确的变量，但到目前为止我还没有运气。

这是一个小例子。

```
<div class='cool-btn' rel='awesome'>
Content here
</div> 
```

接着

```
var awesome = 'some content';

$('.cool-btn').click(function() {
    //do stuff
    $('.other-selector').append($(this).attr('rel'));
} 
```

我记得当您在 ActionScript 中跳入和跳出变量和选择器（闪回！）时，您会将内容放在括号中`[]`，但我在这里尝试类似的事情或查找有关此的信息没有成功。

感谢您的任何帮助-

# ocaml - 如何安装支持 lwt 的 Cohttp？

> ID：14410213
> 
> 赞同：4
> 
> 时间：2013-01-19T01:29:05.170
> 
> 标签：ocaml, opam

在 findlib 中运行`opam install cohttp`并没有为我提供。`cohttp.lwt`我是否缺少使用 lwt 支持安装的命令行选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:06:49.130

`lwt`是 的可选依赖项`cohttp`。所以要激活 lwt 支持，你只需要安装它：

```
opam install ssl lwt cohttp 
```

备注：您可以稍后安装 lwt，OPAM 将使用正确的选项重新编译 cohttp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T18:30:59.500

除了`lwt`包，还需要安装`ssl`包：

```
opam install ssl lwt cohttp 
```

# javascript - 只要变量达到特定值就运行函数

> ID：14410216
> 
> 赞同：2
> 
> 时间：2013-01-19T01:29:40.973
> 
> 标签：javascript, jquery

我有一个画布游戏，每次在游戏中执行一个动作来增加分数时，它都会调用一个函数 incScore。

在 incScore 中，我有一些 if 语句来绘制特定图像以表示画布上的级别编号。

我还想在每个级别上播放一次声音。每次分数与 if 语句匹配时，我都会播放 lvlup 声音的方式。

谁能帮我弄到这个，这样声音只会在关卡改变时播放一次，直到下一个关卡改变才再次播放？我还提到我正在使用 jQuery，因为它有任何可以帮助我的东西。

```
incScore(); //everytime an action in the game causes the score to increase

function incScore(){

    if (scoreTotal < 500){
        lvlimg = "L01";
        drawLevel(lvlimg);
        lvlupSound();
    }

    else if (scoreTotal > 500  && scoreTotal < 1000){
        lvlimg = "L02";
        drawLevel(lvlimg);
        lvlupSound();
    }

    else{
        lvlimg = "L03";
        drawLevel(lvlimg);
        lvlupSound();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:36:21.190

一个简单的解决方案是将当前级别与旧级别进行比较，以检测级别何时发生变化：

```
function scoreToLevel(score)
    if(score < 500){
        return 1
    }else if (score < 1000){
        return 2
    }else{
        return 3
    }
}

function incScore()
    var next_level = scoreToLevel(scoreTotal)
    if(next_level !== current_level){
        lvlimg = "L0" + next_level;
        drawLevel(lvlimg)
        lvlupSound()
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T01:36:35.170

您可以缩短函数并使用半静态属性来保存状态。使用它，您可以将当前级别与以前的级别进行比较，并在它们不同时播放声音。

```
function incScore(){
        incScore.level = incScore.level || 'L0'; //< initialize property
        lvlimg = "L0" + scoreTotal < 500 ? 1 : scoreTotal < 1000 ? 2 : 3; 
        drawLevel(lvlimg);
        if (incScore.level!=='L0' && 
            incScore.level !== lvlimg) { lvlupSound(); };
        //  ^compare local level to current
        incScore.level = lvlimg;
        //             ^ update local level
} 
```

[**编辑**，基于评论]第三行是所谓的*三元*或*条件运算符*。见[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。您可以使用更多条件。

为了避免在分数达到第一级之前播放声音，您可以使用
`if (incScore.level!=='L0' && incScore.level !== lvlimg)`.

我创建了一个[**模型 jsFiddle**](http://jsfiddle.net/KooiInc/NRAEC/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T01:47:16.170

最简单的解决方案是将声音从这些 if 语句中剔除。如果水平像那样好且有规律（每 500 点），并且点数总是以一种方式增加，当你升级时，你总是会精确地落在 500 的偶数倍上，这样的事情应该这样做：

```
if(scoreTotal % 500 === 0 && scoreTotal < 1001)
{
    lvlupSound();
} 
```

如果您不会总是直接降落在通往下一个级别的大门上（也许玩家一次可以获得 1 到 15 分之间的任何点），那么您应该能够在增加之前使用类似的东西来获得玩家得分：

```
if( (scoreTotal % 500) > ((scoreTotal + increment) % 500)
{
    lvlupSound();
} 
```

如果你的关卡边界不是那样的规则，显然它会变得有点复杂，但这应该让你开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T01:35:34.617

那是因为你在每个语句中都有每个分数（这意味着从 0 到无限）。

您将需要编写内部 if 语句，例如；

```
if (scoreTotal < 500){
        lvlimg = "L01";
        drawLevel(lvlimg);
        if(scoreTotal x times of each the level) // That means for each level completed
{
        lvlupSound();

}
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:35:50.937

如果您的分数增量仅为 1，则仅在分数等于新级别的阈值时才播放音调。

如果他们可以将他们的分数提高 1 以上，那么您可以传递分数并检查前后分数，看看分数是否落在阈值的每一侧。

如果这仍然不起作用，将不胜感激有关“级别”和积分的更多信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-19T03:38:36.037

尝试这样的事情（[演示](http://jsfiddle.net/Mottie/k7AWe/3/)）：

```
var scoreTotal,
  lastLevel = 0,
  levels = [500, 1000, 2500, 5000, 10000, 25000, 50000, 75000],
  currentLevel = 0,
  lvlImg;

function incScore() {
  while (scoreTotal > levels[currentLevel]) {
    currentLevel++;
  }
  if (lastLevel !== currentLevel) {
    lastLevel = currentLevel;
    // gives a two digit number with a leading zero
    lvlImg = ('0' + currentLevel).slice(-2);
    drawLevel("L" + lvlimg);
    lvlupSound();
  }
} 
```

`levels`然后，您可以通过将分数截止值添加到变量来轻松添加其他级别。

# java - 悖论数据库的java更新查询

> ID：14410220
> 
> 赞同：1
> 
> 时间：2013-01-19T01:29:51.283
> 
> 标签：java, sql, sql-update, paradox

我正在尝试从 java 更新悖论表，但我得到了一个异常

java.sql.SQLException: [Microsoft][ODBC Paradox Driver] 操作必须使用可更新查询。java.sql.SQLException: [Microsoft][ODBC Paradox Driver] 操作必须使用可更新查询。java.sql.SQLException: [Microsoft][ODBC Paradox Driver] 操作必须使用可更新查询。

我正在使用这段代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try {
        Connection paradoxCon = paradox.createConnection();
        Results res = new Results();
        res.getAll();
        if (res.allRes.isEmpty()) {
            JOptionPane.showMessageDialog(mainPanel, "There are no Finished or Postponed Games!", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            int y = res.allRes.size();
            for (int x = 0; x < y; x = x + 1) {
                try {
                    if (res.getAll().get(x).Reversed == 0) {
                        if (res.getAll().get(x).Status.equals("Fin")) {
                            String sql = "UPDATE Kvote SET _45_d = '" + res.getAll().get(x).HThome + "', _45_g = '" + res.getAll().get(x).HTaway + "', _90_d= '" + res.getAll().get(x).FThome + "', _90_g = '" + res.getAll().get(x).FTaway + "', Ok='Y' WHERE Kolo = '" + res.getAll().get(x).tRound + "' AND Sifra='" + res.getAll().get(x).TID + "'";
                            PreparedStatement ps = paradoxCon.prepareStatement(sql);
                            ps.executeUpdate();
                        }
                        if (res.getAll().get(x).Status.equals("Post")) {
                            String sql = "UPDATE Kvote SET _45_d = '" + res.getAll().get(x).HThome + "', _45_g = '" + res.getAll().get(x).HTaway + "', _90_d= '" + res.getAll().get(x).FThome + "', _90_g = '" + res.getAll().get(x).FTaway + "', Ok='O' WHERE Kolo = '" + res.getAll().get(x).tRound + "' AND Sifra='" + res.getAll().get(x).TID + "'";
                            PreparedStatement ps = paradoxCon.prepareStatement(sql);
                            ps.executeUpdate();
                        }
                    }
                    if (res.getAll().get(x).Reversed == 1) {
                        if (res.getAll().get(x).Status.equals("Fin")) {
                            String sql = "UPDATE Kvote SET _45_d = '" + res.getAll().get(x).HTaway + "', _45_g = '" + res.getAll().get(x).HThome + "', _90_d= '" + res.getAll().get(x).FTaway + "', _90_g = '" + res.getAll().get(x).FThome + "', Ok='Y' WHERE Kolo = '" + res.getAll().get(x).tRound + "' AND Sifra='" + res.getAll().get(x).TID + "'";
                            PreparedStatement ps = paradoxCon.prepareStatement(sql);
                            ps.executeUpdate();
                        }
                        if (res.getAll().get(x).Status.equals("Post")) {
                            String sql = "UPDATE Kvote SET _45_d = '" + res.getAll().get(x).HTaway + "', _45_g = '" + res.getAll().get(x).HThome + "', _90_d= '" + res.getAll().get(x).FTaway + "', _90_g = '" + res.getAll().get(x).FThome + "', Ok='O' WHERE Kolo = '" + res.getAll().get(x).tRound + "' AND Sifra='" + res.getAll().get(x).TID + "'";
                            PreparedStatement ps = paradoxCon.prepareStatement(sql);
                            ps.executeUpdate();
                        }
                    }
                } catch (Exception ex) {
                    System.out.println(ex);
                }
            }
        }
        res.getAll().clear();
    } catch (ParseException ex) {
        Logger.getLogger(AutoResultsImporterView.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:56:53.040

我使用 INTERSOLV 3.11 32-BIT ParadoxFile (*.db) 驱动程序解决了这个问题 我使用这个驱动程序创建了一个系统 DSN 数据源并连接到这个数据源

# vim - UltraEdit 中的 Vim 键映射

> ID：14410229
> 
> 赞同：1
> 
> 时间：2013-01-19T01:31:12.687
> 
> 标签：vim, ultraedit

有人知道如何在 UltraEdit 中启用 VIM 键映射吗？默认 UE 键映射适用于 windows、emacs 等，但不适用于 VIM。谷歌搜索简单的方法或一些模板文件产生零结果。

谢谢， 叶甫根尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:14:58.610

我确信没有办法在 UltraEdit 中启用任何其他键映射“模式”（即无法切换到应用程序内的另一组键映射，例如使其使用 emacs 或 vim 键映射）。

话虽如此，UltreEdit 为您提供*了许多*自定义键盘映射的方法。这是一个很好的概述：[http](http://www.ultraedit.com/support/tutorials_power_tips/ultraedit/keymapping.html) ://www.ultraedit.com/support/tutorials_power_tips/ultraedit/keymapping.html 。AFAIK 您可以更改每一个键映射。根据自己的喜好自定义键盘映射后，您还可以备份键盘映射文件并在其他安装中使用它（键盘映射文件的位置在概述中概述）。

一个非常酷的功能可以帮助您创建自定义键映射：高级 > 配置 > 键映射 > 单击在编辑器中显示键映射。这将生成一个包含所有当前键映射的文本文件。

除了键映射之外，您还可以创建宏并为其分配键盘快捷键。

# bash - Bash 浮点数和负值

> ID：14410230
> 
> 赞同：1
> 
> 时间：2013-01-19T01:31:36.197
> 
> 标签：bash, shell, unix, sh

嗨，我正在尝试使用以下代码生成浮点精度

让 number1=0 number2=0 运算符=+

```
printf "%0.2f\n" result=$(( number1 $operator number2 )) 
```

该代码在没有 printf 的情况下工作，但我无法弄清楚如何执行负（-）计算和浮点数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:42:33.990

Bash 不支持浮点计算，因此，您可以将要操作的数字乘以与小数一样多的零：

```
# 10.321 - 123.01
result=$(( 10321 - 123010 ))
echo ${result:0:-3}.${result:${#result} - 3} 
```

或者干脆使用其他工具来执行此操作，例如`bc`：

```
echo "scale=2; 10.321 - 123.01" | bc 
```

此外，您使用的语法无效；你应该有：

```
printf "%0.2f\n" $(( number1 $operator number2 )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:13:58.817

最后我想通了！

```
result=$(echo "scale=4; (( $number1 $operator $number2 ))" | bc) 
```

# javascript - 主干嵌套 - 通用架构

> ID：14410231
> 
> 赞同：5
> 
> 时间：2013-01-19T01:31:44.277
> 
> 标签：javascript, backbone.js, nested

我一直在做一些研究，但没有看到我的具体用例的示例。因此，我们将不胜感激一般架构建议/资源。

我正在创建一个地址簿。

*   用户创建联系人和组。
*   创建的联系人存在于一个通用池中。
*   联系人可以与多个组相关联。
*   如果更新了联系人，则会在所有组中更新。
*   如果从常规池中删除联系人，则会将其从所有关联组中删除。

为联系人和组创建单独的集合很容易，但现在我有点卡住了。

看来[Backbone-associations](https://github.com/dhruvaray/backbone-associations)或[Backbone-relational](https://github.com/PaulUithol/Backbone-relational)甚至是[nesting.js](https://gist.github.com/1610397)将提供我正在寻找的东西。看起来 Backbone-associations 比 Backbone-relational 性能更高。有人对任何插件有经验吗？有没有更简单的手工编码解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T20:41:49.477

你能有一个代表一个组和一个集合的主干模型吗？该组可以包含一个contactIds数组：

```
var Contact = Backbone.Model.extend({
    defaults: {
        name: "SomeName",
        phone: "1234567890",
        ...
    }
});

var Group = Backbone.Model.extend({
    defaults: {
       name: "someName",
       contactIds: [1, 2, 3, 4]
    }
});

var Contacts = Backbone.Collection.extend({
    model: Contact
}); 
```

如果您需要访问存储在给定组中的联系人的详细信息，您可以执行以下操作：

```
contacts.get(id); 
```

返回单个联系人的信息以进行 CRUD 操作。您可以类似地维护一组组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:06:59.573

首先，您应该尝试使用标准主干方法找到解决方案，并且只有在您不能解决的情况下 - 您应该采取辅助应用程序。

至于您的应用程序 - 有一个解决方案。您应该将联系人集合和组集合存储在两个不同的单独集合中。联系人集合中的每个模型都应该具有指向其组元素的“链接” - 例如仅包含其组模型的附加字段“组”（如果您知道，JavaScript 在您操作同一个对象时操作链接，因此它是轻量级的）

收集此类联系人后，您可以编写一个特殊的方法，该方法使用按组排序的此集合（为此实现集合比较器方法）并返回任何有用的对象进行渲染。例如：

```
{"group1": elements_of_group1, ...} 
```

作为副作用，当您删除任何联系人时，您已经拥有一致的列表。

# c# - 为什么我的 IE 条件注释在未通过 Response.Write 添加时会导致编译错误？

> ID：14410234
> 
> 赞同：3
> 
> 时间：2013-01-19T01:32:07.257
> 
> 标签：c#, asp.net, internet-explorer

我有一个有条件评论的页面：

```
<%@ Page language="c#"  %>
<html>
  <head>
    <title>ASP.NET Application</title>
    <!--[if lt IE 8]><script type="text/javascript" src="scripts/json_parse.js"></script><![endif]-->
  </head>
  <body>
    test
  </body>
<html> 
```

当我像上面那样做时，它会抛出一个编译错误，说它需要一个关闭的“脚本”标签。但是下面的代码（应该以相同的页面结束）完美地工作：

```
<%@ Page language="c#"  %>
<html>
  <head>
    <title>ASP.NET Application</title>
    <!--[if lt IE 8]>
    <% Response.Write( "<script type=\"text/javascript\" src=\"scripts/json_parse.js\"></script>" ); %>
    <![endif]-->
  </head>
  <body>
    test
  </body>
<html> 
```

为什么 IE 条件语句有问题？脚本标签在注释内，不是“runat”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:48:02.000

在这种情况下，您希望将条件注释显示给下层浏览器，而不是被上层浏览器隐藏，因此可以使用稍微不同的语法：

```
<![if lt IE 8]>
<script type="text/javascript" src="scripts/json_parse.js"></script>
<![endif]> 
```

有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。

# javascript - 计算来自 javascript 函数的复选框

> ID：14410235
> 
> 赞同：1
> 
> 时间：2013-01-19T01:32:06.977
> 
> 标签：javascript, html

这个 JavaScript 函数在我正在调用的网页中：

```
function getChecked(button, form) {

 var name;
 for (i = 0; i < document.forms['CheckForm'].list.length; i++) {
 name = "Check" + (i+0);
 if(document.forms['CheckForm'].list[i].checked == true) { 

 if(name == "Check0")
 form.Check0.value = "2437315";

 else if(name == "Check1")
 form.Check1.value = "2437104";

 else if(name == "Check2")
 form.Check2.value = "2434936";

 else if(name == "Check3")
 form.Check3.value = "2434574";

 else if(name == "Check4")
 form.Check4.value = "2433541";

 else if(name == "Check5")
 form.Check5.value = "2426021";

 } 
```

有时有 6 个检查，有时 7 个有时 3 个，我需要帮助来计算有多少 Check(Somenumber)，然后使用 Check0=0&Check1=0&Check2=0 等建立一个帖子字段。

我没有将每个检查设置为不同的值，我需要计算有多少复选框，然后将它们设置为 0，我正在使用 PHP 来卷曲页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:24:34.503

在 javascript 中，您可以执行以下操作：

```
var form = top.document.forms.CheckForm;
var numFormElements = form.length;
var counter = 0;
for( i = 0; i < numFormElements && !foundItem; i++ )
  {
    var obj = form[i];
    if( obj.type == 'checkbox' )
    {
      counter++;
    }
  }
 alert( counter ); // or whatever else 
```

我应该补充...我认为服务器端语言无法知道输入的类型。该信息必须通过客户端方式从用户的网络浏览器中获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:37:17.923

您可以在进行时简单地构建字符串。还有其他方法可以做到这一点（我建议使用 jQuery 并循环使用“this”）。这是我对您现有代码的处理方式。

```
//set a string
var values = '';

if(name == "Check0") {
    form.Check0.value = "2437315";
    values += 'Check0=' + form.Check0.value;
} else if(name == "Check1") {
    form.Check0.value = "2437315";
    values += 'Check1=' + form.Check1.value;
} 
```

# uinavigationcontroller - 在 UINavigationController 中使用 UIPageViewController 时页面始终为空

> ID：14410239
> 
> 赞同：1
> 
> 时间：2013-01-19T01:32:36.517
> 
> 标签：uinavigationcontroller, uipageviewcontroller

我有一个以`UINavigatonController`. `rootViewController`指向一个`UIViewController`上面有一个按钮的。按钮 segues (push) 到 a `UIPageViewController`。

加载时`UIPageViewController`，我以编程方式创建页面视图（由 xib 文件中的另一个视图控制器定义）。

当我运行应用程序时，单击按钮按预期转换，但结果视图始终为空（只是黑屏）。似乎我遗漏了一些非常明显的东西，但几天后我寻求帮助！

这是 viewDidLoad 的代码`UIPageViewController`

```
- (void)viewDidLoad
{    
    [super viewDidLoad];

    //Create the content
    [self createContentPages];

    //Set the initial view controllers.

    NSDictionary *options = 
    [NSDictionary dictionaryWithObject:
    [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin]
                            forKey: UIPageViewControllerOptionSpineLocationKey];

    self.pageController = [[UIPageViewController alloc] 
                       initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                       navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                       options: options];

    pageController.dataSource = self;

    ContentViewController *contentViewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
    contentViewController.dataObject = [self.pageContent objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:contentViewController];

    [self.pageController setViewControllers:viewControllers 
                                  direction:UIPageViewControllerNavigationDirectionForward
                                   animated:NO 
                                 completion:nil];

    [self addChildViewController:self.pageController];
    [self.view addSubview:self.pageController.view];
    [self.pageController didMoveToParentViewController:self];    

    //Assign the gestureRecognizers property of our pageViewController to our view's  gestureRecognizers property.
    self.view.gestureRecognizers = self.pageController.gestureRecognizers;
} 
```

# logging - Facebook 的 Scribe 是否得到维护？

> ID：14410240
> 
> 赞同：2
> 
> 时间：2013-01-19T01:32:47.337
> 
> 标签：logging

我正在寻找聚合日志的工具。去年年初，我在一次会议上听说了 Facebook 的 Scribe。然而，此时github账号（https://github.com/facebook/scribe）一年没更新了？抄写员还维护吗？相关的？还是我应该继续使用其他工具？

# javascript - 骨干路由器不适用于requirejs

> ID：14410242
> 
> 赞同：1
> 
> 时间：2013-01-19T01:33:13.373
> 
> 标签：javascript, jquery, backbone.js, requirejs

我有一个使用`require js`. 一切对我来说似乎都很好，但它不起作用。我`router`从我的电话`app.js`：

**路由器JS：**

```
define([
   'jquery',
   'underscore',
   'backbone',
   'view/questions/index'
], function($, _, Backbone, IndexView){
var AppRouter = Backbone.Router.extend({
    routes: {
        '/': 'index'
    }
});

var initialize = function(){
    var app_router = new AppRouter();

    // Index Route
    app_router.on('index', function(){
        var indexView = new IndexView();
        console.log('test');
        indexView.initialize();
    });

    // Default Route
    app_router.on('defaultAction', function(actions){
        console.log('No Route', actions);
    });

    Backbone.history.start();
};

return {
    initialize: initialize
};
}); 
```

**应用程序JS：**

```
define([
  'jquery',
  'underscore',
  'backbone',
  'router'
], function($, _, Backbone, Router){
var initialize = function(){
    Router.initialize();
};

return {
    initialize: initialize
};
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T02:41:36.380

伙计们，我实际上得到了这个工作。这是我在代码中所做的更改。

```
var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'index'
    }
}); 
```

和这里：

```
app_router.on('route:index', function(){
    var indexView = new IndexView();
    console.log('test');
    indexView.initialize();
}); 
```

# r - 从数据框中按类别选择随机行？

> ID：14410256
> 
> 赞同：2
> 
> 时间：2013-01-19T01:34:56.860
> 
> 标签：r, dataframe

我有一个数据框如下：

`Category Name Value`

我将如何选择每个类别 5 个随机名称？Using`sample`使用所有行作为可能的候选返回随机行。但是，我想指定每个类别的随机行数。有什么建议么？

**更新**：我愿意使用`ddply`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T01:38:55.153

没有测试用例的最佳猜测：

```
 do.call( rbind, lapply( split(dfrm, df$cat) ,
                         function(df) df[sample(nrow(df), 5) , ] )
          ) 
```

用乔纳森的数据测试：

```
> do.call( rbind, lapply( split(df, df$Category) ,
+                          function(df) df[sample(nrow(df), 5) , ] )
+           )

      Category Name      Value   
1.8          1    8 -0.2496109   #  useful side-effect of labeling source group
1.15         1   15 -0.4037368
1.17         1   17 -0.4223724
1.12         1   12 -0.9359026
1.18         1   18  0.3741184
2.37         2   37  0.3033610
2.34         2   34 -0.4517738
2.36         2   36 -0.7695923
snipped remainder 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T01:43:47.940

如果您想要每个类别中相同数量的项目，这很容易：

```
df[unlist(tapply(1:nrow(df),df$Category,function(x) sample(x,3))),] 
```

例如，我生成`df`如下：

```
df <- data.frame(Category=rep(1:5,each=20),Name=1:100,Value=rnorm(100)) 
```

然后我从我的代码中得到以下信息：

```
> df[unlist(tapply(1:nrow(df),df$Category,function(x) sample(x,3))),]
    Category Name       Value
5          1    5  0.25151044
20         1   20  1.52486482
18         1   18  0.69313462
30         2   30  0.73444185
27         2   27  0.24000427
39         2   39 -0.10108203
46         3   46 -0.37200574
49         3   49 -1.84920469
43         3   43  0.35976388
68         4   68  0.57879516
76         4   76 -0.11049302
64         4   64 -0.13471303
100        5  100  0.95979408
95         5   95 -0.01928741
99         5   99  0.85725242 
```

如果您希望每个类别的行数不同，那将更加复杂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T11:36:41.447

过去，我使用了我为[“采样”包](http://cran.r-project.org/web/packages/sampling/index.html)中的一些函数编写的一个小包装器。

这是功能：

```
strata.sampling <- function(data, group, size, method = NULL) {
  #  USE: 
  #   * Specify a data.frame and grouping variable.
  #   * Decide on your sample size. For a sample proportional to the 
  #     population, enter "size" as a decimal. For an equal number of 
  #     samples from each group, enter "size" as a whole number. For
  #     a specific number of samples from each group, enter the numbers
  #     required as a vector.

  require(sampling)
  if (is.null(method)) method <- "srswor"
  if (!method %in% c("srswor", "srswr")) 
    stop('method must be "srswor" or "srswr"')
  temp <- data[order(data[[group]]), ]
  ifelse(length(size) > 1,
         size <- size, 
         ifelse(size < 1,
                size <- round(table(temp[group]) * size),
                size <- rep(size, times=length(table(temp[group])))))
  strat = strata(temp, stratanames = names(temp[group]), 
                 size = size, method = method)
  getdata(temp, strat)
} 
```

以下是您可以使用它的方法：

```
# Sample data --- Note each category has a different number of observations
df <- data.frame(Category = rep(1:5, times = c(40, 15, 7, 13, 25)), 
                 Name = 1:100, Value = rnorm(100))

# Sample 5 from each "Category" group
strata.sampling(df, "Category", 5)
# Sample 2 from the first category, 3 from the next, and so on
strata.sampling(df, "Category", c(2, 3, 4, 5, 2))
# Sample 15% from each group
strata.sampling(df, "Category", .15) 
```

还有一个我在[这里](https://github.com/mrdwab/2657-R-Functions/blob/master/scripts/stratified.R)写的增强功能。该函数可以优雅地处理一组观察值可能少于指定样本数的情况，并且还允许您按多个变量进行分层。有关几个示例，请参阅[文档。](https://github.com/mrdwab/2657-R-Functions/blob/master/docs/Part-1-Stratified.md)

# php - 将 JavaScript 变量发送到 PHP 文件

> ID：14410264
> 
> 赞同：0
> 
> 时间：2013-01-19T01:37:01.983
> 
> 标签：php, javascript, jquery

这是 JavaScript：

```
var sendlat;
var sendlng;
var sendid;

// More code...

$.post('insert.php', {variable: sendlat});
$.post('insert.php', {variable: sendlng}); 
```

这是`insert.php`文件：

```
$latitude = $_POST['sendlat'];
$longtitude = $_POST['sendlng']; 
```

这给了我 0 个值。我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:41:39.287

看起来您并没有真正[阅读 jQuery 文档以在](http://api.jquery.com/jQuery.post/)此处发布。

试试这个：

```
$.ajax({
  type: "POST",
  url: '/insert.php',
  data: {sendlat: sendlat, sendlng: sendlng},
  success: function(data){
    //do something with your success
  }
}); 
```

一方面，您不需要 2 个邮局电话。这将分离数据。
在一个 ajax 调用中完成。

其次，正如 Charmander 指出的那样，您发送的帖子变量“变量”是错误的。

冒号左边是后置变量名。`sendlat:100`将导致`$_POST['sendlat'] = 100`PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:40:00.243

您的 postdata 变量错误，您的 insert.php 收到`$_POST['variable']`两次

将代码更改为：

```
$.post('insert.php', {sendlat: sendlat, sendlng: sendlng}); 
```

因此，您可以一次性发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T01:46:49.210

您正在将值设置为名为 variable 的变量。这与：index.php?variable=sendlat 相同

此外，您可以在一次调用中设置这两个变量，以停止在服务器上进行额外的点击。

`$.post('insert.php', {sendlat: sendlat, sendlng: sendlng});`

# objective-c - 如何检索 Objective-c GData 视频描述？

> ID：14410267
> 
> 赞同：0
> 
> 时间：2013-01-19T01:38:08.050
> 
> 标签：objective-c, xcode, youtube-api

我一直在尝试使用 gdata Objective-c 检索 youtube 视频的描述。我已经能够获得标题，但我如何获得描述？

标题代码：

```
GDataEntryBase *entry = [[feed entries] objectAtIndex:indexPath.row];
NSString *title = [[entry title] stringValue]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:48:21.643

Objective-C GData 库中 YouTube 视频的类是 GDataEntryYouTubeVideo，而不是 GDataEntryBase。

但是旧的基于 XML 的 GData 库不再适合与 YouTube API 一起使用。应该使用较[新的基于 JSON 的库。](http://code.google.com/p/google-api-objectivec-client/)JSON API 中的视频描述在[此处](https://developers.google.com/youtube/v3/docs/videos#resource)记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T21:09:07.170

```
 NSString *description=[(GDataEntryYouTubeVideo *)entry mediaGroup].mediaDescription.stringValue; 
```

# javascript - 茉莉花依赖

> ID：14410268
> 
> 赞同：2
> 
> 时间：2013-01-19T01:38:23.533
> 
> 标签：javascript, jasmine

我正在使用一个 javascript 文件，该文件 a) 使用函数声明一个对象，并且 b) 使用它期望在外部声明的哈希调用该对象的 init 函数。我的 Jasmine 规范抱怨它找不到哈希，因为它不存在！

```
var Foo = {
  init: function(param) { ... }
};

Foo.init(externalVariable); 
```

我最初的感觉是它的结构很糟糕，而不仅仅是声明变量，外部声明也应该调用函数，但现在让我们忽略它。

有没有办法让我在加载源文件之前向 Jasmine 声明这个变量？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:50:33.477

如果它确实是全局对象，则将值分配给全局对象。只是不要忘记在测试结束时将其删除，以保持环境清洁以进行其他测试。

```
beforeEach(function() {
  window.externalVariable = "this kinda sucks";
});

afterEach(function() {
  delete window.externalVariable;
}); 
```

# android - 用于手势输入 IME 的控制词表

> ID：14410269
> 
> 赞同：1
> 
> 时间：2013-01-19T01:38:25.783
> 
> 标签：android, ime, android-input-method

有没有办法/API 来控制手势输入 IME 的单词表？主要对 JellyBean 附带的库存产品感兴趣，但与 Touchpal、Swype、.. 的兼容性也很好 ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:15:37.400

You won't get compatibility with Swype, and probably not any of the other big keyboards outside the default- the format of the wordlist is part of the app, and stores information like usage frequency for better predictions.

New as of 4.0 Android added the SpellCheckerService, which handles single tap editing for the default keyboard. If you implemented your own it may work for the default keyboard. Its less likely to work for others, but they could pull from it as a source. I don't know of anyone who's actually implemented one though, so expect surprises.

# c++ - 当只需要 XY 旋转时，3D 对象沿所有三个轴旋转

> ID：14410272
> 
> 赞同：2
> 
> 时间：2013-01-19T01:38:56.417
> 
> 标签：c++, math, opengl, rotation, quaternions

所以我在 OpenGL 场景中为我的 3D 对象实现旋转，到目前为止，基本旋转本身（使用四元数）工作正常。我还主要解决了“观察”问题，这样我现在可以让任何 3D 对象，包括相机，准确无误地面对 3D 空间中的任何点。

*然而*，当命令一个物体面对一个给定的点时，它会频繁地沿着它的局部 Z 轴滚动；看这张图片，小船正在看红、绿、蓝三条线的交汇点。您可以看到它看起来不像人们期望的那样，例如，沿其 Y 轴旋转以面向绿线，然后沿其 X 轴向下倾斜以面向三条线的交点。

![在此处输入图像描述](../Images/12704670f900a4b027c446fe5118ffff.png)

我不一定想要这个。我宁愿它直接看那个点，但顺时针稍微倾斜一点（从前面看），这样它的翅膀的尖端就在同一个 Y 平面上。由于面对一个点的整个点是局部 Z 轴穿过该点，因此对象如何围绕其局部 Z 轴旋转并不重要，但产生的旋转始终是倾斜的，尽管倾斜似乎取决于物体的相对位置及其焦点。

无论如何，这是我的 LookAt() 代码，我想对其进行修改，以便我可以更好地控制最终的 Z 旋转。

```
void Thing::LookAt(sf::Vector3<float> Target)
{
    ///Derived from pseudocode found here:
    ///http://stackoverflow.com/questions/13014973/quaternion-rotate-to
    //Reset the rotation to default
    m_Orientation = Quaternion();

    //Get the normalized vector from the camera position to Target
    sf::Vector3<double> VectorTo(Target.x - m_Position.x,
                                 Target.y - m_Position.y,
                                 Target.z - m_Position.z);
    //Get the length of VectorTo
    double VectorLength = sqrt(VectorTo.x*VectorTo.x +
                               VectorTo.y*VectorTo.y +
                               VectorTo.z*VectorTo.z);
    //Normalize VectorTo
    VectorTo.x /= VectorLength;
    VectorTo.y /= VectorLength;
    VectorTo.z /= VectorLength;

    //Straight-ahead vector
    sf::Vector3<double> LocalVector = m_Orientation.MultVect(sf::Vector3<double>(0, 0, -1));

    //Get the cross product as the axis of rotation
    sf::Vector3<double> Axis(VectorTo.y*LocalVector.z - VectorTo.z*LocalVector.y,
                             VectorTo.z*LocalVector.x - VectorTo.x*LocalVector.z,
                             VectorTo.x*LocalVector.y - VectorTo.y*LocalVector.x);
    //Normalize the axis
    //Get the length of VectorTo
    double AxisLength = sqrt(Axis.x*Axis.x +
                             Axis.y*Axis.y +
                             Axis.z*Axis.z);
    //Normalize VectorTo
    Axis.x /= AxisLength;
    Axis.y /= AxisLength;
    Axis.z /= AxisLength;

    //Get the dot product to find the angle
    double DotProduct = (VectorTo.x*LocalVector.x +
                        VectorTo.y*LocalVector.y +
                        VectorTo.z*LocalVector.z);
    double Angle = acos(DotProduct);

    //Determine whether or not the angle is positive
    //Get the cross product of the axis and the local vector
    sf::Vector3<double> ThirdVect(Axis.y*LocalVector.z - Axis.z*LocalVector.y,
                                  Axis.z*LocalVector.x - Axis.x*LocalVector.z,
                                  Axis.x*LocalVector.y - Axis.y*LocalVector.x);
    //If the dot product of that and the local vector is negative, so is the angle
    if (ThirdVect.x*VectorTo.x + ThirdVect.y*VectorTo.y + ThirdVect.z*VectorTo.z < 0)
    {
        Angle = -Angle;
    }

    //Finally, create a quaternion
    //Quaternion AxisAngle;
    m_Orientation.FromAxisAngle(Angle, Axis.x, Axis.y, Axis.z);
    m_Orientation.RotationMatrix(m_RotationMatrix);
} 
```

我的问题是我不知道如何获得对围绕 Z 轴的最终旋转的控制。请注意，当我从 m_Orientation 四元数中提取 Z 角时，它告诉我上图中的船围绕其 Z 轴旋转了 0 弧度。我尝试手动将 Z 分量设置为 0 并重新规范化四元数，但是（显然我想）这不起作用。

就目前而言，计算船“顶朝上”旋转所需的特定 Z 分量是可以的，即它的两个翼尖在同一 Y 平面上，并且它的 Y 轴尽可能陡峭，但是我想更清楚地了解如何操纵最终的 Z 旋转。有什么想法或资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:40:57.787

如果您围绕任意轴执行单次旋转，很自然会得到这个结果。你想象过这种转变吗？

但是，有一种更简单的方法来构建旋转矩阵。您只需要找到轴映射到的向量。

因此，例如，z 轴（正向）映射到`z = VectorTo`或者`z = -VectorTo`如果模型指向 -z。要保留向上方向，您需要对其进行定义。比方说`up = (0, 1, 0)`。然后将 x 轴映射到 的叉积`x = z x up`。最后，您需要重新计算上向量以保持纯旋转`y = x x z`。（中间的 x 指定叉积运算符）。

计算完这些向量后，您现在可以按如下方式构造变换矩阵（使用归一化向量）：

```
 /  x.x  y.x  z.x  0  \
    |  x.y  y.y  z.y  0  |
T = |  x.z  y.z  z.z  0  |
    \  0    0    0    1  / 
```

根据您的 API，您可能需要转置此矩阵。

如果你需要四元数，你可以使用这样的[方法](http://www.cg.info.hiroshima-cu.ac.jp/~miyazaki/knowledge/teche52.html)。

# scala - 函数可以返回不共享共同祖先的多种类型之一吗？

> ID：14410275
> 
> 赞同：11
> 
> 时间：2013-01-19T01:39:40.883
> 
> 标签：scala

当然，我意识到所有类型*都有*一个共同的祖先，但我的意思是：

在动态类型语言中，具有“混合”返回类型是一种常见的做法。一个常见的情况是一个函数尝试从数据库中检索数据，然后返回一个对象（用找到的数据初始化）或 FALSE（如果没有找到数据）。

一个小伪代码来演示这种反模式：

```
function getObjectFromDatabase(object_id) {
  if(result = db_fetch_object("SELECT * FROM objects WHERE id = %d", object_id) {
    return result
  } else {
    return FALSE
  }
} 
```

如果为我的对象 id 找到数据，我将返回一个数据库记录作为对象。如果没有，我会得到一个布尔值。然后，当然，由我（客户）来处理多种可能的返回类型。

是在 Scala 中为所有可能的返回类型找到一个共同祖先并将其声明为签名中的返回类型的唯一方法吗？

```
// Like so:
def getObjectFromDatabase(objectId: Int): Any = {
   val result = dbFetchObject("SELECT * FROM objects WHERE id = %d", object_id) 
   if(result) {
     return result
   } else {
     return false
  }
} 
```

或者是否可以注释多种可能的返回类型？

（请注意，我不*希望*这样做，因为我希望强制函数返回类型尽可能明确。得知该语言禁止模棱两可的返回类型，这让我松了一口气，这就是我要问的原因。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-19T02:03:24.897

是的，使用[`Either`](http://www.scala-lang.org/api/current/scala/util/Either.html)：

```
def getObjectFromDatabase(objectId: Int): Either[Boolean, DbResult] = {
   val result = dbFetchObject("SELECT * FROM objects WHERE id = %d", object_id) 
   if (result) Right(result) else Left(false)

}

getObjectFromDatabase(id) match {
  case Right(result) => // do something with result
  case Left(bool) => // do something with bool
} 
```

或者，如果没有结果的情况不需要特定值，请使用[`Option`](http://www.scala-lang.org/api/current/scala/Option.html)：

```
def getObjectFromDatabase(objectId: Int): Option[DbResult] = {
   val result = dbFetchObject("SELECT * FROM objects WHERE id = %d", object_id) 
   if (result) Some(result) else None
}

getObjectFromDatabase(id) match {
  case Some(result) => // do something with result
  case None => // do something about no results
} 
```

请参阅 Tony Morris 的[选项备忘单](http://blog.tmorris.net/posts/scalaoption-cheat-sheet/index.html)，了解您可以调用的最常用方法的列表`Option`以及它们如何转化为模式匹配。

另外两个替代方案[`Validation`](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc/scalaz/Validation.html)来自 scalaz 和[`Try`](http://www.scala-lang.org/api/current/scala/util/Try.html)Scala 2.10 中的新功能。

因为`Validation`StackOverflow 上有一些非常好的答案，例如：[Scala 中的方法参数验证，带有 for comprehension 和 monads](https://stackoverflow.com/questions/12307965/method-parameters-validation-in-scala-with-for-comprehension-and-monads/12309023#12309023)。

请`Try`参阅此博客文章：[Scala 新手指南第 6 部分：使用 Try 进行错误处理](http://danielwestheide.com/blog/2012/12/26/the-neophytes-guide-to-scala-part-6-error-handling-with-try.html)。[`Option`](http://danielwestheide.com/blog/2012/12/19/the-neophytes-guide-to-scala-part-5-the-option-type.html)同一位作者在和上有很好的帖子[`Either`](http://danielwestheide.com/blog/2013/01/02/the-neophytes-guide-to-scala-part-7-the-either-type.html)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-19T02:38:04.917

您要查找的内容称为*标记联合*、*变体*、*变体记录*、*区分联合*、*不相交联合*或*总和类型*。

结合*产品类型*，它们成为*代数数据类型*。

Scala 不直接支持代数数据类型，但它不需要，因为它们可以通过继承轻松建模。（Scala*确实*有`sealed`支持*封闭*ADT 的修饰符。）

**注意：从 Scala 3 开始，Scala*确实以*[`enum`s](https://docs.scala-lang.org/scala3/reference/enums/adts.html)的形式直接支持代数和类型。以下所有内容仅适用于 Scala 2。**

在您的示例中，如果您知道返回类型是`SomeType`or `SomeOtherType`，则可以这样建模：

```
sealed trait ReturnType

final case class SomeType extends ReturnType
final case class SomeOtherType extends ReturnType

def meth: ReturnType 
```

如果您不知道返回类型是什么，只知道其中有两个，那么您可以类似地对其进行建模：

```
sealed trait ReturnType[A, B]

final case class Type1[A, B](a: A) extends ReturnType[A, B]
final case class Type2[A, B](b: B) extends ReturnType[A, B]

def meth: ReturnType[A, B] 
```

这实际上是一种众所周知的数据类型，称为 an `Either`（因为它包含 an`A`或 a `B`），并且在 Scala 的标准库中以`scala.util.Either`.

但是在您的特定情况下，有一个更具体的类型，称为`Maybe`or `Option`，它封装了一个值可能存在或不存在的想法。它看起来像这样：

```
sealed trait Maybe[T]

case object None extends Maybe[Nothing]
final case class Just[T](value: T) extends Maybe[T]

def meth: Maybe[T] 
```

同样，这已经由 Scala 提供为`scala.Option`.

`Either`over的好处`Option`是它允许你在失败的情况下也返回信息，而不是只表明没有价值你也可以说*为什么*没有价值。（按照惯例，左边`Either`是错误，右边是“有用”的值。）

的优点`Option`是它是一个单子。（注意：你可以`Either`通过向左或向右偏置来创建一个 monad。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T02:02:37.093

如果您在运行时知道每次调用中要查询的类型，您的签名可能如下：

```
def getObjectFromDatabase[T](object_id: Int): T = { 
```

或者，要在那里模拟您的 if/else 逻辑，我建议在此处使用 Option：

```
def getObjectFromDatabase[T](object_id: Int): Option[T] = {
  ...
  if(result) Some(result)
  else None
} 
```

示例用法：

```
val result = getObjectFromDatabase[String](123123).getOrElse(whatever_you_need) 
```

# c++ - int 太大，不能对 double 和 int 使用 mod (%)

> ID：14410281
> 
> 赞同：0
> 
> 时间：2013-01-19T01:40:47.880
> 
> 标签：c++, types

这是我查找数字的主要因素的代码：

```
#include <iostream>
using namespace std;

int main()
{
    long int a, b, c, d = 0, f;
    int w = 0;

    f = 13195;

    for(a = 3; a < 100; a++)
    {
        w = f % a;

        if(w == 0)
        {
            for(b = 2; b < a; b++)
            {
                d = 0;
                c = a % b;
                if(c == 0)
                {
                    d++;
                    break;
                }
            }

            if(d == 0)
                cout << a << " is a prime\n";
        }
    }

    system("pause");

    return 0;
} 
```

`f`是要检查的数字。我必须检查一个 12 位数字，但我不能同时使用`double`，`long int`也`%`不能同时对两者采取行动。我能做些什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:42:12.200

A`long long`是一种较大的数据类型，可以处理 64 位（>12 位）数字。使用它应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:22:06.377

如果由于某种原因您不允许使用`long long`另一个答案中提到的，您可以模拟`%`双打：

```
c = a - floor(a / b) * b; 
```

如果`a`和`b`小于大约 2**52 (4503599627370496) 这应该有效。

# python-3.x - IPython %%cython 魔术给出 ImportError: dlopen(long_file_name.so, 2): image not found

> ID：14410284
> 
> 赞同：1
> 
> 时间：2013-01-19T01:41:27.817
> 
> 标签：python-3.x, ipython, cython, python-3.2

操作系统 X，10.7。我已经浏览了 cython 教程中的前几个 cython 示例，到目前为止，所有教程示例对我来说都是正确的。

但是，当我尝试执行 Fernando 在加拿大 Pycon 的 Science And Python 演示中所做的事情时（播放位置 37:42），我收到了一个奇怪的错误。代码是：

```
%load_ext cythonmagic
%%cython
cdef double fcy(double x) except? -2:
    return x**2-x

def integrate_fcy(double a, double b, int N):
    cdef int i
    cdef double s, dx
    s = 0; dx = (b-a)/N
    for i in range(N):
    s += fcy(a+i*dx)
    return s * dx 
```

笔记本输出：

```
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-72-e327d909d703> in <module>()
----> 1 get_ipython()._run_cached_cell_magic('cython', '')

/usr/local/lib/python3.2/site-packages/IPython/core/interactiveshell.py in _run_cached_cell_magic(self, magic_name, line)
   2513         cell = self._current_cell_magic_body
   2514         self._current_cell_magic_body = None
-> 2515         return self.run_cell_magic(magic_name, line, cell)
   2516 
   2517     def run_cell(self, raw_cell, store_history=False, silent=False):

/usr/local/lib/python3.2/site-packages/IPython/core/interactiveshell.py in run_cell_magic(self, magic_name, line, cell)
   2092             magic_arg_s = self.var_expand(line, stack_depth)
   2093             with self.builtin_trap:
-> 2094                 result = fn(line, cell)
   2095             return result
   2096 

/usr/local/lib/python3.2/site-packages/IPython/extensions/cythonmagic.py in cython(self, line, cell)

/usr/local/lib/python3.2/site-packages/IPython/core/magic.py in <lambda>(f, *a, **k)
    190     # but it's overkill for just that one bit of state.
    191     def magic_deco(arg):
--> 192         call = lambda f, *a, **k: f(*a, **k)
    193 
    194         if isinstance(arg, collections.Callable):

/usr/local/lib/python3.2/site-packages/IPython/extensions/cythonmagic.py in cython(self, line, cell)
    187             self._code_cache[key] = module_name
    188 
--> 189         module = imp.load_dynamic(module_name, module_path)
    190         self._import_all(module)
    191 

ImportError: dlopen(/Users/lab/.ipython/cython/_cython_magic_0e71fc3338606be06aed17a605e60bbd.cpython-32m.so, 2): image not found 
```

这是我用来启动 IPython 笔记本会话的终端中的输出：

```
/Users/lab/.ipython/cython/_cython_magic_e9a2648cd85a2b3bce8e97b6bbc5f379.c:467:15: warning: 
      unused function
      '__pyx_f_46_cython_magic_e9a2648cd85a2b3bce8e97b6bbc5f379_fcy'
      [-Wunused-function]
static double __pyx_f_46_cython_magic_e9a2648cd85a2b3bce8e97b6bbc5f379_fcy(...
              ^
1 warning generated. 
```

这对我来说没问题，但不是上面的 %%cython 魔法：

```
a=10
b=20

%%cython_inline
return a+b

Compiling /Users/lab/Library/Caches/cython/inline/_cython_inline_074486d5a226d2c163f10589ac495ca2.pyx because it changed.
Cythonizing /Users/lab/Library/Caches/cython/inline/_cython_inline_074486d5a226d2c163f10589ac495ca2.pyx
Out[52]: 30 
```

有人知道这里有什么问题吗？

# ruby-on-rails - Rails] 改变 'render' 方法迭代集合的方式

> ID：14410287
> 
> 赞同：0
> 
> 时间：2013-01-19T01:41:55.833
> 
> 标签：ruby-on-rails, render, loops

当你有一部分

**/app/views/posts/comments/_comment.html.erb** ,

执行以下操作

`<%= render @post.comments %>`

迭代 @post.comments 集合，如

`@post.comments.each do |comment|`

自动，即使您没有将集合传递到部分中。

但是，由于对象按 created_at 排序的方式，这会将注释呈现在另一个方向。

我想改变方向：以另一种方式对集合进行排序`created_at DESC`，然后迭代评论集合。

我会做

`@comments = @post.comments.paginate(:page => params[:page], :per_page => 10, :order => "created_at")`在`PostsContoller`and`<%= render @comments %>`而不是`<%= @post.comments %>`，但我很好奇是否有更常见的方法来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:59:48.857

你肯定想做：

```
@comments = @post.comments.order("created_at ASC").paginate(page: params[:page]) 
```

而不是改变 Rails 助手的工作方式！为什么要这么做？

您可以定义注释在关联中的排序方式。在 Post 模型中：

```
has_many :comments, order: "comments.created_at ASC" 
```

您还可以设置默认范围以更改默认情况下评论的排序方式。

在模型中：

```
default_scope order('created_at ASC') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:35:08.210

像在模型中设置的顺序一样`render @post.comments.paginate(params[:page])`工作吗？例如。

```
class Post < ActiveRecord::Base
  has_many :comments, order: 'created_at DESC'
end 
```

# regex - 在vim上使用正则表达式来查找并将所有href链接内容替换为'#'？

> ID：14410293
> 
> 赞同：3
> 
> 时间：2013-01-19T01:42:46.057
> 
> 标签：regex, vim, macvim

是否可以使用 vim 替换 'http://google.com/' 和其他指向 '#' 的链接？

```
 <a class="link1" href="http://google.com/">My Link</a>
 <a class="link1" href="http://yahoo.com/">My Link</a>
 <a href="http://stackoverflow.com/">My Link</a> 
```

到

```
 <a class="link1" href="#">My Link</a>
 <a class="link1" href="#">My Link</a>
 <a href="#">My Link</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T01:47:10.017

这个应该处理基本`http`情况：

```
:%s/http:\/\/[^\"]*/#/g 
```

但这应该更灵活——一般的想法是找到 的实例`href="`，将其保存为一个组，然后匹配直到我们遇到另一个`"`。然后我们用我们的组 ( `\1`) 和井号替换它：

```
:%s/\(href=\"\)[^\"]*/\1#/g 
```

# eclipse - 在没有 JDT 的情况下安装 pydev 或 PDT

> ID：14410296
> 
> 赞同：0
> 
> 时间：2013-01-19T01:43:29.543
> 
> 标签：eclipse, pydev, eclipse-jdt, eclipse-pdt

我一直在花一点时间尝试看看我能得到一个 Eclipse 安装的基本原理。我发现可用的软件包往往包含我并不真正需要的东西，而且由于 eclipse 都是关于插件的，我认为我可以从一个最小的集合开始，然后安装需要的东西。

为此，我从[http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/)下载了平台运行时二进制文件 并开始试验。我常用的插件安装得很好，但我在安装语言插件时遇到了一些烦恼。也就是说，它们似乎都以某种方式依赖于 JDT 插件。在尝试从 Juno 存储库或 PDT 更新站点安装 PDT 时，在我安装 JDT 之前，从他们的更新站点安装 Pydev 会引入 JDT 以及一堆其他不明确依赖它的杂物。

有没有办法在没有 JDT 的情况下安装这样的插件，eclipse 是 eclipse 等等？我会完全错了吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:09:37.880

PDT 依赖于 JDT。如果您查看PDT[的源代码](http://git.eclipse.org/c/pdt/org.eclipse.pdt.git/tree/plugins/org.eclipse.php.core/.classpath)，您可以在 .classpath 文件中看到以下内容：

```
 <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5"/> 
```

.classpath 文件包含用于创建在构建时、运行时等使用的类路径的信息。我认为这对于任何插件项目来说基本上都是正确的。

# tomcat - CometD 过度处理请求

> ID：14410300
> 
> 赞同：0
> 
> 时间：2013-01-19T01:44:18.577
> 
> 标签：tomcat, logging, tapestry, atmosphere, cometd

我一直在我的 web 应用程序的日志文件中看到奇怪的消息。

```
127.0.0.1 - - [15/Jan/2013:23:00:53 +0000] "POST /cometd/connect HTTP/1.1" 200 147 
```

这条消息一直出现在那里，在过去的几天里，我在一小时内看到了超过 20000 次，因此它设法使我的 CPU 利用率达到 100。有谁知道这是关于什么的？

如果我尝试去那个地址，它会抛出 400 Unknown Bayeux Transport Exception

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:11:02.587

看起来您在 Tomcat 上部署了[CometD bayeux 服务器](http://cometd.org/)，并且任何客户端都在使用长轮询或回调轮询访问它（在您的 access.log 中有数千个 POST 请求的原因）。

这是正常的，除非您在与 CometD 相关的应用程序中出现错误，否则不应占用您的 CPU。

# php - ExtJS 开箱即用的文档页面

> ID：14410301
> 
> 赞同：-2
> 
> 时间：2013-01-19T01:44:20.993
> 
> 标签：php, jquery, extjs

我正在尝试为我们的产品建立一个文档页面。就像是：

[http://docs.sencha.com/ext-js/4-1/#](http://docs.sencha.com/ext-js/4-1/#)

[http://docs.ckeditor.com/](http://docs.ckeditor.com/)

是我想做的。这两个站点完全相同，看起来它们是用 ExtJS 构建的。这是否可以在没有大量定制的情况下使用 ExtJs 完成？我从来没有搞过煎茶，所以我对这个产品并不熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:26:51.417

文档是使用[JSDuck](https://github.com/senchalabs/jsduck)从 JS 源代码自动构建的。

# php - 将伦敦时间转换为中部时间

> ID：14410304
> 
> 赞同：-1
> 
> 时间：2013-01-19T01:44:31.243
> 
> 标签：php, date, datetime

试图将伦敦时间转换为中央时间。这是我正在使用的脚本：

```
$timestamp = date('Y-d-m H:i:s');

$dt = new DateTime($timestamp, new DateTimeZone('Europe/London'));
echo $dt->format('r') . PHP_EOL;

$dt->setTimezone(new DateTimeZone('America/Chicago'));
echo $dt->format('r') . PHP_EOL; 
```

我得到这个错误：

> 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::__construct() [datetime.--construct]：无法在位置 6 (9) 解析时间字符串 (2013-19-01 01:40:23)：意外/home/filevanc/public_html/scripts/cpa/control/update.php:7 中的字符' 堆栈跟踪：#0 /home/filevanc/public_html/scripts/cpa/control/update.php(7): DateTime->__construct ('2013-19-01 01:4...', Object(DateTimeZone)) #1 {main} 在第 7 行的 /home/filevanc/public_html/scripts/cpa/control/update.php 中抛出

我看不出意外的字符是什么，因为时间戳对我来说看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:45:36.403

除非突然有 19 个月，否则您的日期无效。;)

你打算这样做：

```
$timestamp = date('Y-m-d H:i:s'); 
```

或者，更好的是，这样做：

```
// $timestamp = date('Y-m-d H:i:s'); ,- don't need this anymore

$dt = new DateTime(null, new DateTimeZone('Europe/London')); 
```

# php - 什么类/函数调用了当前方法？

> ID：14410306
> 
> 赞同：1
> 
> 时间：2013-01-19T01:44:44.973
> 
> 标签：php, cakephp, logging

# 问题

我创建了一个日志记录类，并希望用`class::method`调用记录器类的静态方法的方法标记每一行。

是否可以告诉 PHP 中的当前方法是什么？

# 解决方案

谢谢您的帮助。这是我的日志记录方法的 PHP 代码。

```
/**
 * Writes a line into the log.
 * @param string $level The logging level.
 * @param string $message The message.
 */
protected static function write($level,$message)
{
    self::scope_init();
    if(self::$scope[$level])
    {
        $e = new Exception;
        $stack = $e->getTrace();
        $caller = '';
        if(isset($stack[2]))
        {
            $class = isset($stack[2]['class']) ? $stack[2]['class'] : false;
            $method =  isset($stack[2]['function']) ? $stack[2]['function'] : '';
            if($class !== false)
            {
                $caller = $class.'::'.$method;
            }
            else
            {
                $caller = $method;
            }
        }

        $caller = substr(str_pad($caller,20),0,20);

        $msg = date('m.d.y h:i:sa').' ['.$level.'] ['.$caller.'] '.$message;
        self::$lines[] = $msg;
        echo "$msg\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:47:55.870

[这个关于打印堆栈跟踪的答案](https://stackoverflow.com/a/7039409/931721)提供了一种访问堆栈跟踪的方法。从那里，您可以只获取倒数第二个项目并记录它。

```
$e = new Exception;
var_dump($e->getTraceAsString());

#2 /usr/share/php/PHPUnit/Framework/TestCase.php(626): SeriesHelperTest->setUp()
#3 /usr/share/php/PHPUnit/Framework/TestResult.php(666): PHPUnit_Framework_TestCase->runBare()
#4 /usr/share/php/PHPUnit/Framework/TestCase.php(576): PHPUnit_Framework_TestResult->run(Object(SeriesHelperTest))
#5 /usr/share/php/PHPUnit/Framework/TestSuite.php(757): PHPUnit_Framework_TestCase->run(Object(PHPUnit_Framework_TestResult))
#6 /usr/share/php/PHPUnit/Framework/TestSuite.php(733): PHPUnit_Framework_TestSuite->runTest(Object(SeriesHelperTest), Object(PHPUnit_Framework_TestResult))
#7 /usr/share/php/PHPUnit/TextUI/TestRunner.php(305): PHPUnit_Framework_TestSuite->run(Object(PHPUnit_Framework_TestResult), false, Array, Array, false)
#8 /usr/share/php/PHPUnit/TextUI/Command.php(188): PHPUnit_TextUI_TestRunner->doRun(Object(PHPUnit_Framework_TestSuite), Array)
#9 /usr/share/php/PHPUnit/TextUI/Command.php(129): PHPUnit_TextUI_Command->run(Array, true)
#10 /usr/bin/phpunit(53): PHPUnit_TextUI_Command::main()
#11 {main}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:48:42.793

您可以使用[`__METHOD__`](http://php.net/manual/en/language.constants.predefined.php)调用方法的魔术常量绑定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:48:25.650

你是说这个：[apd-callstack](http://php.net/manual/en/function.apd-callstack.php)？</p>

# c++ - 字符串类赋值运算符 (+=) 行为怪异

> ID：14410313
> 
> 赞同：0
> 
> 时间：2013-01-19T01:46:20.137
> 
> 标签：c++

我的这段代码表现得很奇怪：

```
int main() {

    string a = "TRY";
    string b = "THIS";

    a += b[0] + '!';      //This outputs "TRYu"?
    //a = a + b[0] + '!'; //This outputs "TRYT!" as expected.

    cout << a;

} 
```

以上两种说法不应该是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:49:43.253

不，你的第一个例子不等于

```
a = a + b[0] + '!' 
```

而是为了

```
a = a + ( b[0] + '!' ) 
```

你知道 char 是一个数值。因为`b[0]`和`'!'`都是字符，所以`b[0] + '!'`不会给你一个连接，而是一个加法（`b[0] + 33`基本上）。然后您将尝试将代码的 ASCII 字符附加`b[0] + 33`到您的字符串中。由于`b[0]`is `'T'`(ASCII 84)，你最终得到 ASCII 码 117 : 的字符`'u'`。

您将不得不替换`'!'`by`std::string("!")`以修复代码并进行连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:49:03.863

不，`char + char = char;`

`std::string + char = std::string;`

在你的第二个例子中。

`a = a + b[0] + '!';`

将会

`string = ((string + char) + char)`

你总是在向`std::string`对象添加一些东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:50:10.830

在

```
a += b[0] + '!'; 
```

首先评估该`b[0] + '!'`部分。就像`b[0]`一个字符和'！' 是一个 char （原始类型），`+`运算符以算术方式将它们相加以产生另一个 char，然后使用运算符将​​其附加到字符串中`+=`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T01:49:54.290

b[0] 只是一个字符。所以 b[0] + '1' 是 char + char，这不好。内置类型不像字符串那样有任何花哨的东西，它们只是添加值。;) 在第二个（工作）示例中，b[0] 被添加到 a 然后 '!' 被添加到其中，所以总是使用字符串运算符。

# java - 使用反射的奎因

> ID：14410315
> 
> 赞同：1
> 
> 时间：2013-01-19T01:47:01.410
> 
> 标签：java, reflection, quine

是否可以使用反射 API 在 Java 中编写一个 quine（其输出为自身的程序）来访问 quine 的代码，然后将其打印出来？即使添加了对输出没有影响的随机行，这样的程序仍然可以准确地打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:52:30.837

我不这么认为。反射 api 不提供对实际源代码的访问，而只提供对类和成员定义的访问。

# sql - SQL Server - 两个查询的交集，都使用 WHERE 子句

> ID：14410324
> 
> 赞同：1
> 
> 时间：2013-01-19T01:48:19.413
> 
> 标签：sql, sql-server

我有`table1`和`table2`。

```
table1 contains ZipCode (varchar(12)), GeogCol1 (Geography)-spatial index
table2 contains ZipCode (varchar(12)), Product (varchar(12)) 
```

我需要从假定包含在两个表中的用户返回`Product's`一定半径内的所有内容，显示从到每个返回的，并为用户提供按到提供的排序或反向排序的选项。`Zipcode ('90266')``distance``Zipcode``Product``Products``distance``Zipcode`

查询 1- 这是我的半径距离查询：

```
SELECT h.* 
FROM table1 g  
JOIN table1 h on g.Zipcode <> h.Zipcode AND g.Zipcode = '90266' AND h.Zipcode <> '90266' 
WHERE g.GeogCol1.STDistance(h.GeogCol1)<=(10 * 1609.344) 
ORDER BY g.GeogCol1.STDistance(h.GeogCol1) 
```

查询 2- 这是我的产品查询：

```
SELECT * 
FROM table2 
WHERE (Active = 1) AND (ProductName LIKE '%54%') 
```

另外，如果我将`GeogCol1`空间索引`table2`与每个产品的其他信息一起放入，这样查询可以针对单个表进行，会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:49:17.160

首先，您的第一个查询不包括当前的邮政编码，因此即使产品在我的邮政编码中可用，我也无需转到下一个邮政编码来获取产品。对我来说似乎不合适。

反正

```
SELECT t2.Zipcode
      ,t2.Product
FROM table1 g  
     INNER JOIN 
     table1 h ON g.Zipcode <> h.Zipcode 
                 AND 
                 g.Zipcode = '90266' 
     INNER JOIN
     table2 t2 ON (t2.Active=1) 
                   AND 
                   (t2.ProductName LIKE '%54%')
                   AND
                   g.Zipcode=t2.Zipcode
WHERE g.GeogCol1.STDistance(h.GeogCol1)<=(10 * 1609.344) 
ORDER BY g.GeogCol1.STDistance(h.GeogCol1) 
```

自联接的第三个条件与第一个条件相比是多余的。

不要将它们放在同一张表中 - 您将对数据进行非规范化。

# spring - 如何在 JBoss 上为 Spring 配置 Log4j

> ID：14410325
> 
> 赞同：1
> 
> 时间：2013-01-19T01:48:25.553
> 
> 标签：spring, jboss, log4j

我正在尝试在我的 JBoss 5.1.0GA 服务器上部署 spring mvc + tile 演示项目。我在使用 Log4J 时遇到了这个问题：

```
 02:35:49,443 ERROR [StandardContext] Error listenerStart
02:35:49,443 ERROR [StandardContext] Context [/travel] startup failed due to previous errors
02:35:49,443 INFO  [[/travel]] Closing Spring root WebApplicationContext
[Loaded org.springframework.web.context.ContextCleanupListener from jar:file:/opt/jboss-5.1.0.GA/server/default/deploy/travel.war!/WEB-INF/lib/spring-web-3.0.5.RELEASE.jar]
02:35:49,444 ERROR [[/travel]] Exception sending context destroyed event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager
        at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:249)
        at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:155)
        at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:131)
        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)
        at org.springframework.web.context.ContextCleanupListener.<clinit>(ContextCleanupListener.java:43)
        at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:80)
        at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3949)
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4615)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4437)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:310)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
        at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
        at $Proxy38.start(Unknown Source)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/META-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Enables use of HTTP methods PUT and DELETE -->
    <filter>
        <filter-name>httpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>httpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Handles all requests into the application -->
    <servlet>
        <servlet-name>travel</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:/META-INF/spring/travel/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>travel</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

我在想这可能是类路径上的双 log4j.jar 但我该如何检查？

# java - java.util.Scanner 与 System.in 一起使用时的奇怪行为

> ID：14410327
> 
> 赞同：1
> 
> 时间：2013-01-19T01:48:42.513
> 
> 标签：java, system.in

这段简单的代码：

```
import java.util.Scanner;

public class TestScanner {

    public static void main(String[] args){

        Scanner sc1 = new Scanner(System.in);
        int number1 = sc1.nextInt();
        sc1.close();

        Scanner sc2 = new Scanner(System.in);
        int number2 = sc2.nextInt();
        sc2.close();
    }

} 
```

总是给我这个错误：

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:838)
    at java.util.Scanner.next(Scanner.java:1461)
    at java.util.Scanner.nextInt(Scanner.java:2091)
    at java.util.Scanner.nextInt(Scanner.java:2050)
    at mainpkg.TestScanner.main(TestScanner.java:14) 
```

这个也不行。这一次它陷入了一个永无止境的循环！

```
import java.util.Scanner;

public class TestScanner {

    public static void main(String[] args){

        Scanner sc1 = new Scanner(System.in);
        int number1 = sc1.nextInt();
        sc1.close();

        Scanner sc2 = new Scanner(System.in);
        while(!sc2.hasNextInt())
            ;
        int number2 = sc2.nextInt();
        sc2.close();
    }

} 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:55:54.607

问题是`sc1.close();`关闭了底层流。第二次，你试图从一个封闭的流中读取，所以它显然失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:50:23.107

您应该每次都使用 进行检查`hasNextInt`，而不是仅仅假设还有更多内容要阅读。

# maven - Grails 2.x Maven Ear 项目夹具集成测试中断

> ID：14410330
> 
> 赞同：1
> 
> 时间：2013-01-19T01:49:04.893
> 
> 标签：maven, grails, ear, fixtures

我有一个使用 Grails 2.1.1 的 Maven EAR 项目设置

```
根
   耳朵
   战争
     grails 应用程序
     固定装置
     ...

```

这是一个 Grails 项目，它使用 fixtures 插件进行集成测试。

```
如果我跑
    mvn grails:test-app
从“战争”文件夹中，一切正常。

如果我跑
    mvn包

从 Root 文件夹中，然后在测试阶段，夹具插件无法加载夹具资源，因为它找不到它们。

```

看起来插件正在使用根级别的上下文，以尝试解决驻留在“战争”文件夹中的固定装置资源。我倾向于将此归类为“grails 测试运行程序”错误，因为它在运行测试阶段时似乎没有将应用程序上下文设置为正确的文件夹。有没有人见过这种行为，并且知道如何解决它？我试过调试fixtures插件，正如我所说的，它似乎使用了适当的grailsApplication和servletContext，我只是不确定grailsApplication上下文设置是否正确。

# gzip - 无法让 iis7 到 gzip 字体字体文件

> ID：14410331
> 
> 赞同：24
> 
> 时间：2013-01-19T01:49:05.607
> 
> 标签：gzip, font-face, mime-types

我在一个共享的虚拟主机上，我只能访问 iis7.5 的 web.config 文件。javascript 文件和 css 文件被 gzip 压缩，所以可以工作，但我认为默认情况下可以工作，因为在 iis7.5 中启用了静态压缩。但是，我无法获取字体文件以进行 gzip 压缩，它们在发送时大小相同，并且响应标头没有内容编码：gzip。感谢您的任何帮助。

这是 web.config 文件：

```
<configuration>
<system.webServer>
    <directoryBrowse enabled="false" />
<staticContent>
    <mimeMap fileExtension=".otf" mimeType="font/opentype" />
</staticContent>
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
        <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
        <dynamicTypes>
    <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="font/open-type" enabled="true" />
    <add mimeType="application/javascript" enabled="true" />
    <add mimeType="text/css" enabled="true" />
    <add mimeType="text/html" enabled="true" />
    <add mimeType="*/*" enabled="false" />
        </dynamicTypes>
    <staticTypes>
    <add mimeType="text/*" enabled="true" />
    <add mimeType="font/opentype" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
    <add mimeType="*/*" enabled="false" />
        </staticTypes>
</httpCompression>
    <urlCompression dynamicCompressionBeforeCache="true" doDynamicCompression="true" doStaticCompression="true" />
    <defaultDocument>
        <files>
            <clear />
            <add value="Default.htm" />
            <add value="Default.asp" />
            <add value="index.htm" />
            <add value="index.html" />
            <add value="iisstart.htm" />
            <add value="default.aspx" />
            <add value="index.php" />
        </files>
    </defaultDocument>

</system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-05-29T18:19:53.133

默认情况下，IIS 不在 httpCompression 模块中包含这些 MIME 类型。您需要修改您的 applicationHost.config 文件：**C:\Windows\System32\inetsrv\config**。

此文件将影响您的所有网站，并且必须在 64 位 Windows 中使用 64 位文本编辑器打开。（Notepad2 64位，记事本，**请勿使用Notepad++**）

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
        <staticTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="application/atom+xml" enabled="true" />
            <add mimeType="application/xaml+xml" enabled="true" />
            <add mimeType="*/*" enabled="false" />

            <!-- HERE -->
            <add mimeType="image/svg+xml" enabled="true" />
            <add mimeType="application/font-woff" enabled="true" />
            <add mimeType="application/x-font-ttf" enabled="true" />
            <add mimeType="application/octet-stream" enabled="true" />
            <!-- HERE -->

        </staticTypes>
        <dynamicTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="*/*" enabled="false" />

            <!-- HERE -->
            <add mimeType="image/svg+xml" enabled="true" />
            <add mimeType="application/font-woff" enabled="true" />
            <add mimeType="application/x-font-ttf" enabled="true" />
            <add mimeType="application/octet-stream" enabled="true" />
            <!-- HERE -->

        </dynamicTypes>
</httpCompression> 
```

这些是我压缩**SVG**、**WOFF**、**EOT**和**TTF**文件的个人设置。

然后只需在命令行中键入**iisreset**即可在 IIS 中重新加载配置，或重新启动计算机。

**更新**

**Woff**和**Woff2**文件已被压缩，因此您无需执行此操作。实际上，如果您对它们进行 gzip，客户端将失去性能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-16T17:46:58.533

需要注意的重要一点是，从以下设置修改您的**applicationHost.config （在 %windir%\system32\inetsrv\config 中）：**

```
<section name="httpCompression" allowDefinition="AppHostOnly" overrideModeDefault="Deny" /> 
```

到：

```
<section name="httpCompression" overrideModeDefault="Allow" /> 
```

**将在您的web.config**中的 system.webServer 标记下启用 httpCompression 标记的配置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T20:46:06.730

问题在于，默认情况下，IIS 不会在可压缩的 mime 类型列表中包含 web 字体的 mime 类型。包含 Javascript 和 css 文件，这就是您看到它们被压缩的原因。

您的 httpCompression 设置可能没有被使用，默认情况下这些设置被锁定并且不能在 web.config 中设置。看看这个页面： http: [//support.microsoft.com/kb/969062](http://support.microsoft.com/kb/969062)。在“更多信息”部分它说，“您只能为 Web 服务器级别设置 MIME 类型。”

我可以让它在我的本地服务器上工作的唯一方法是在 applicationHost.config 的 httpCompression 部分中添加 mime 类型（这需要管理员访问权限）。在 web.config 中设置它们没有影响。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-03T12:54:48.513

如果您无法在所有环境中访问 applicationhosts.config，则更实用的方法是简单地实现一个用于 gzip 压缩 svg 文件的 httpmodule。

有关代码示例，请参阅此帖子：http: [//laubplusco.net/gzip-svg-files-asp-net/](http://laubplusco.net/gzip-svg-files-asp-net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-20T14:11:23.890

尽管通过 IIS 远程管理控制台启用了静态和动态压缩，但我仍然遇到此问题。

我终于设法通过将`.tff`文件的 mime 类型从`application/octet-stream`更改为`font/ttf`IIS 来解决它。

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：程序（错误名称：程序/程序）

> ID：14410332
> 
> 赞同：0
> 
> 时间：2013-01-19T01:49:15.017
> 
> 标签：java, compilation

我在我的mac上写了一个程序并通过终端编译它：

```
cd user/desktop/Code/Program/src/program
javac Program.java
**java Program** 
```

然后我得到这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Program (wrong name: program/Program)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480) 
```

有谁知道我该如何解决这个问题？

源代码：

```
package learning;

public class Learning{

    public static void main(String[] args){
        String[] wordListOne = {"you are","I know","I eat"};
        String[] wordListTwo = {"a poo","a funny","a posh"};
        String[] wordListThree = {"Sandwich","person","object"};

        int oneLength = wordListOne.length;
        int twoLength = wordListTwo.length;
        int threeLength = wordListThree.length;

        int rand1 = (int) (Math.random() * oneLength);
        int rand2 = (int) (Math.random() * twoLength);
        int rand3 = (int) (Math.random() * threeLength);

        String phrase = wordListOne[rand1]+" "+wordListTwo[rand2]+" "+wordListThree[rand3];

        System.out.println(phrase);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T01:52:24.070

尝试使用这个。

```
javac learning/Learning.java
java learning.Learning 
```

你的程序被称为`Learning`，不是`Program`。您必须从文件夹所在的目录执行此`learning`操作。例子：

```
C:/path/to/files/learning/Learning.class 
```

然后导航到`C:/path/to/files/`使用`cd`命令：

```
cd C:/path/to/files/ 
```

然后执行你的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:52:40.840

将文件名更改为 Learning.java

然后编译并运行它（Learning.java不是program.java）

文件名应与静态类的文件名相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T01:57:32.543

NoClassDefFoundError 通常意味着在编译时可用的类在运行时不可用。例如，您的编译和运行时类路径不匹配。这是一篇更详细地解释它的博客文章：http: [//javarevisited.blogspot.ca/2011/06/noclassdeffounderror-exception-in.html ?m=1](http://javarevisited.blogspot.ca/2011/06/noclassdeffounderror-exception-in.html?m=1)

# sql - 查询以返回 Access 中的表列表

> ID：14410334
> 
> 赞同：0
> 
> 时间：2013-01-19T01:49:49.200
> 
> 标签：sql, ms-access

> **可能重复：**
> [如何从访问中获取表名？](https://stackoverflow.com/questions/201282/how-to-get-table-names-from-access)
> [我们可以使用 sql 列出 msaccess 数据库中的所有表吗？](https://stackoverflow.com/questions/2629211/can-we-list-all-tables-in-msaccess-database-using-sql)

我可以创建一个查询来返回 Microsoft Access 数据库中所有表的名称吗？我在网站上有一些下拉列表，其中一个下拉列表需要查询我的数据库并返回表名列表，以便进一步的下拉列表知道要查询哪个表以获取各自的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:24:03.443

实际上是我自己想出来的

```
SELECT Name
FROM MSysObjects
WHERE (Name NOT LIKE "MSys*") AND (Type=1 OR Type=6); 
```

这个对我有用

# ruby - 在一个语句中为多个对象分配一个值

> ID：14410340
> 
> 赞同：6
> 
> 时间：2013-01-19T01:50:20.260
> 
> 标签：ruby

如果我想声明三个新数组（`a1`, `a2`, `a3`），我可以这样做：

```
a1=[]
a2=[]
a3=[] 
```

但现在我想在一条线上完成这一切，比如

```
a1, a2, a3 = [] 
```

但这失败了。如何将它们全部分配给一行上的空数组？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-19T01:52:01.350

要执行与第二个示例类似的操作，您仍然需要创建三个数组：

```
a1, a2, a3 = [], [], [] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T02:02:11.987

如果您坚持不重复`[]`文字，那么一种方法是：

```
a1, a2, a3 = Array.new(3){[]} 
```

另一种方法是：

```
a1 = (a2 = (a3 = []).dup).dup 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-16T18:34:53.647

[正如 Andrew Marshall 所指出的](https://stackoverflow.com/questions/14410340/assigning-multiple-variables-to-the-same-value-in-one-line#comment20054736_14410355)，还有另一种更短的方法可以*将一个值分配给多个对象*。

```
a1, a2, a3 = [42] * 3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-19T07:19:33.473

在以下情况下，Ruby 多重赋值是意外的：

```
a1, a2, a3 = [] 
```

上面的代码不会在任何数组变量中分配空白数组。

采用，

```
a1, a2, a3 = [], [], [] 
```

您需要提供值的数量，因为变量的数量用于初始化。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-29T21:01:13.130

这些答案被过度设计，专注于`Array`OP 样本中的误导性使用。

```
a1 = a2 = a3 = []
# => [] 
```

测试结果

```
a1
# => []
a2
# => []
a3
# => []
a4 # for sake of comparison
NameError: undefined local variable or method `a4' for main:Object 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-15T18:39:42.790

您还可以执行以下操作：

```
a1=[]; a2=[]; a3=[] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-29T13:04:57.340

以下代码段在所有 ruby​​ 虚拟机上的行为是否相同？

```
a,b = b,nil 
```

这一行的重点是将“a”设置为“b”中的值并重置“b”。

# grails - 移动到另一台电脑后无法在 STS 中运行 grails 应用程序

> ID：14410343
> 
> 赞同：0
> 
> 时间：2013-01-19T01:50:25.913
> 
> 标签：grails

我正在使用 STS 3.1 处理 Grails 项目，我需要将该项目迁移到另一台 PC。我将文件夹复制到新环境并运行“刷新依赖项”。它工作得很好。我成功地运行了“圣杯战争”。问题是当我尝试“在服务器上运行”时出现错误：

“存档：类*路径引用的旧 pc* /lib/org.codehaus.groovy/groovy-all/jars/groovy-all-1.8.8.jar 中的 grails 目录的路径不存在。”

我在哪里可以更新此参考？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:19:53.550

我最终迁移到 IntelliJ Idea。让我告诉你，功能上有很大的不同，而且价格似乎合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:15:27.233

您是否尝试过项目根目录中的 .classpath 文件？

# rest - Jersey REST 支持简历/媒体流

> ID：14410344
> 
> 赞同：18
> 
> 时间：2013-01-19T01:50:29.417
> 
> 标签：rest, streaming, jersey, media, resume

我需要支持 Jersey REST 上的简历，我正在尝试这样做：

```
@Path("/helloworld")
public class RestServer {

@GET

@Path("say")
@Produces("audio/mp3")
public Response getMessage(@HeaderParam("Range") String r ) throws IOException{
    String str="/Users/dima/Music/crazy_town_-_butterfly.mp3";

    System.out.println(r);
    RandomAccessFile f=new RandomAccessFile(str, "r");

    int off=0;
    int to=(int)f.length();
    byte[] data ;
    if(r!=null){
        String from=r.split("=")[1].split("-")[0];
        String t=r.split("=")[1].split("-")[1];
        off=Integer.parseInt(from);
        to=Integer.parseInt(t);

    }
    data= new byte[to-off];
    f.readFully(data, off, to-off);

    ResponseBuilder res=Response.ok(data)
            .header("Accept-Ranges","bytes")
            .header("Content-Range:", "bytes "+off+"-"+to+"/"+data.length)
            .header("Pragma", "no-cache");;

            if(r==null){
                res=res.header("Content-Length", data.length);
            }
            f.close();

            Response ans=res.build();

            return ans;

}
} 
```

我希望能够流式传输 mp3，以便浏览器可以搜索音乐，但在 safari 中它仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T09:34:50.043

这是我基于[此处](https://stackoverflow.com/questions/12768812/video-streaming-to-ipad-does-not-work-with-tapestry5/12829541#12829541)提供的解决方案的看法。它可以在不同的浏览器上正常工作。我也可以在 Safari 和其他浏览器中很好地寻找音乐。[您可以在我的 Github存储库](https://github.com/aruld/jersey-streaming)中找到示例项目，其中包含更多详细信息。Chrome 和 Safari 很好地利用了范围标头来流式传输媒体，您可以在请求/响应跟踪中看到它。

```
 @GET
    @Produces("audio/mp3")
    public Response streamAudio(@HeaderParam("Range") String range) throws Exception {
        return buildStream(audio, range);
    }

    private Response buildStream(final File asset, final String range) throws Exception {
        // range not requested : Firefox, Opera, IE do not send range headers
        if (range == null) {
            StreamingOutput streamer = new StreamingOutput() {
                @Override
                public void write(final OutputStream output) throws IOException, WebApplicationException {

                    final FileChannel inputChannel = new FileInputStream(asset).getChannel();
                    final WritableByteChannel outputChannel = Channels.newChannel(output);
                    try {
                        inputChannel.transferTo(0, inputChannel.size(), outputChannel);
                    } finally {
                        // closing the channels
                        inputChannel.close();
                        outputChannel.close();
                    }
                }
            };
            return Response.ok(streamer).header(HttpHeaders.CONTENT_LENGTH, asset.length()).build();
        }

        String[] ranges = range.split("=")[1].split("-");
        final int from = Integer.parseInt(ranges[0]);
        /**
         * Chunk media if the range upper bound is unspecified. Chrome sends "bytes=0-"
         */
        int to = chunk_size + from;
        if (to >= asset.length()) {
            to = (int) (asset.length() - 1);
        }
        if (ranges.length == 2) {
            to = Integer.parseInt(ranges[1]);
        }

        final String responseRange = String.format("bytes %d-%d/%d", from, to, asset.length());
        final RandomAccessFile raf = new RandomAccessFile(asset, "r");
        raf.seek(from);

        final int len = to - from + 1;
        final MediaStreamer streamer = new MediaStreamer(len, raf);
        Response.ResponseBuilder res = Response.status(Status.PARTIAL_CONTENT).entity(streamer)
                .header("Accept-Ranges", "bytes")
                .header("Content-Range", responseRange)
                .header(HttpHeaders.CONTENT_LENGTH, streamer.getLenth())
                .header(HttpHeaders.LAST_MODIFIED, new Date(asset.lastModified()));
        return res.build();
    } 
```

这是 MediaStreamer 实现，它用于在资源方法中流式传输输出。

```
public class MediaStreamer implements StreamingOutput {

    private int length;
    private RandomAccessFile raf;
    final byte[] buf = new byte[4096];

    public MediaStreamer(int length, RandomAccessFile raf) {
        this.length = length;
        this.raf = raf;
    }

    @Override
    public void write(OutputStream outputStream) throws IOException, WebApplicationException {
        try {
            while( length != 0) {
                int read = raf.read(buf, 0, buf.length > length ? length : buf.length);
                outputStream.write(buf, 0, read);
                length -= read;
            }
        } finally {
            raf.close();
        }
    }

    public int getLenth() {
        return length;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-03T16:53:35.387

由于我遇到了同样的问题，我尝试了一个更通用的解决方案[1]，`ContainerResponseFilter`它会在请求中存在标头时触发，`Range`并且可以与任何媒体类型、实体和资源方法无缝协作。

这是`ContainerResponseFilter`将使用封装输出流的方法`RangedOutputStream`（见下文）：

```
public class RangeResponseFilter implements ContainerResponseFilter {

    private static final String RANGE = "Range";

    private static final String ACCEPT_RANGES = "Accept-Ranges";

    @Override
    public void filter(ContainerRequestContext requestContext, ContainerResponseContext responseContext)
            throws IOException {
        if (requestContext.getHeaders().containsKey(RANGE)) {
            String rangeHeader = requestContext.getHeaderString(RANGE);
            String contentType = responseContext.getMediaType().toString();
            OutputStream originOutputStream = responseContext.getEntityStream();
            RangedOutputStream rangedOutputStream = new RangedOutputStream(originOutputStream, rangeHeader, contentType, responseContext.getHeaders());
            responseContext.setStatus(Status.PARTIAL_CONTENT.getStatusCode());
            responseContext.getHeaders().putSingle(ACCEPT_RANGES, rangedOutputStream.getAcceptRanges());
            responseContext.setEntityStream(rangedOutputStream);
        }
    }

} 
```

这是`RangedOutputStream`：

```
public class RangedOutputStream extends OutputStream {

    public class Range extends OutputStream {

        private ByteArrayOutputStream outputStream;

        private Integer from;

        private Integer to;

        public Range(Integer from, Integer to) {
            this.outputStream = new ByteArrayOutputStream();
            this.from = from;
            this.to = to;
        }

        public boolean contains(Integer i) {
            if (this.to == null) {
                return (this.from <= i);
            }
            return (this.from <= i && i <= this.to);
        }

        public byte[] getBytes() {
            return this.outputStream.toByteArray();
        }

        public Integer getFrom() {
            return this.from;
        }

        public Integer getTo(Integer ifNull) {
            return this.to == null ? ifNull : this.to;
        }

        @Override
        public void write(int b) throws IOException {
            this.outputStream.write(b);
        }

    }

    private final static char[] MULTIPART_CHARS = "-_1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
            .toCharArray();

    private static final String BOUNDARY_LINE_FORMAT = "--%s";

    private static final String CONTENT_TYPE_LINE_FORMAT = "Content-Type: %s";

    private static final String CONTENT_RANGE_FORMAT = "%s %d-%d/%d";

    private static final String CONTENT_RANGE_LINE_FORMAT = "Content-Range: " + CONTENT_RANGE_FORMAT;

    private static final String EMPTY_LINE = "\r\n";

    private OutputStream outputStream;

    private String boundary;

    private String accept;

    private String contentType;

    private boolean multipart;

    private boolean flushed = false;

    private int pos = 0;

    List<Range> ranges;

    MultivaluedMap<String, Object> headers;

    public RangedOutputStream(OutputStream outputStream, String ranges, String contentType, MultivaluedMap<String, Object> headers) {
        this.outputStream = outputStream;
        this.ranges = new ArrayList<>();
        String[] acceptRanges = ranges.split("=");
        this.accept = acceptRanges[0];
        for (String range : acceptRanges[1].split(",")) {
            String[] bounds = range.split("-");
            this.ranges.add(new Range(Integer.valueOf(bounds[0]), bounds.length == 2 ? Integer.valueOf(bounds[1]) : null ));
        }
        this.headers = headers;
        this.contentType = contentType;
        this.multipart = this.ranges.size() > 1;
        this.boundary = this.generateBoundary();
    }

    private String generateBoundary() {
        StringBuilder buffer = new StringBuilder();
        Random rand = new Random();
        int count = rand.nextInt(11) + 30;
        for (int i = 0; i < count; i++) {
            buffer.append(MULTIPART_CHARS[rand.nextInt(MULTIPART_CHARS.length)]);
        }
        return buffer.toString();
    }

    public boolean isMultipart() {
        return this.multipart;
    }

    public String getBoundary() {
        return this.boundary;
    }

    public String getAcceptRanges() {
        return this.accept;
    }

    public String getContentRange(int index) {
        Range range = this.ranges.get(index);
        return String.format(CONTENT_RANGE_LINE_FORMAT, this.accept, range.getFrom(), range.getTo(this.pos), this.pos);
    }

    @Override
    public void write(int b) throws IOException {
        for (Range range : this.ranges) {
            if (range.contains(this.pos)) {
                range.write(b);
            }
        }
        this.pos++;
    }

    @Override
    public void flush() throws IOException {
        if (this.flushed) {
            return;
        }
        if (this.multipart) {
            this.headers.putSingle(HttpHeaders.CONTENT_TYPE, String.format("multipart/byteranges; boundary=%s", this.boundary));
            for (Range range : this.ranges) {
                this.outputStream.write(String.format(BOUNDARY_LINE_FORMAT + EMPTY_LINE, this.boundary).getBytes());
                this.outputStream.write(String.format(CONTENT_TYPE_LINE_FORMAT + EMPTY_LINE, this.contentType).getBytes());
                this.outputStream.write(
                        String.format(CONTENT_RANGE_LINE_FORMAT + EMPTY_LINE, this.accept, range.getFrom(), range.getTo(this.pos), this.pos)
                                .getBytes());
                this.outputStream.write(EMPTY_LINE.getBytes());
                this.outputStream.write(range.getBytes());
                this.outputStream.write(EMPTY_LINE.getBytes());
            }
            this.outputStream.write(String.format(BOUNDARY_LINE_FORMAT, this.boundary + "--").getBytes());
        } else {
            Range range = this.ranges.get(0);
            this.headers.putSingle("Content-Range", String.format(CONTENT_RANGE_FORMAT, this.accept, range.getFrom(), range.getTo(this.pos), this.pos));
            this.outputStream.write(range.getBytes());
        }
        this.flushed = true;
    }

} 
```

[1] [https://github.com/heruan/jersey-range-filter](https://github.com/heruan/jersey-range-filter)

# php - 为日期范围的登录者选择 MySql 行，返回每天的小时数

> ID：14410349
> 
> 赞同：0
> 
> 时间：2013-01-19T01:50:47.877
> 
> 标签：php, mysql, sql, date

我对编写 SQL 查询感到头疼，希望互联网世界的人可以帮助我！

我有一个 mysql 表，其中包含人们何时登录和注销的值，我需要报告一个日期范围的数据，该数据给出一天中每个小时的登录人数。

示例所需的输出：

```
2013-1-10 00:00 5
2013-1-10 01:00 13
... for every hour of 2013-1-10 ending at 23:00...
2013-1-10 23:00 23
...and then the same for every date in the range...
2013-1-11 00:00 4
2013-1-11 01:00 6 
```

我可以编写查询以按日期对所有内容进行分组，并根据登录时间获取每小时的计数，问题是如果人们登录或超过一个小时，他们的计数将不会在第二个小时出现，因为我' m 按 DATE_FORMAT(time_login, '%H') 分组。

示例查询在这里：

```
SELECT mac, 
DATE_FORMAT(time_login, '%H') AS hour_logged_in,
DATE_FORMAT(time_logout, '%H') AS hour_logged_out,
DATE_FORMAT(time_login, '%Y-%m-%d') as date,
count(*) as dealcounts 
FROM sessions 
WHERE (
    time_logout IS NOT NULL 
     ) 
AND (
    DATE_FORMAT(time_login, '%Y-%m-%d') BETWEEN 
    DATE_FORMAT('2013-1-1', '%Y-%m-%d') AND DATE_FORMAT('2013-1-18', '%Y-%m-%d')) 
GROUP BY hour_logged_in 
```

有谁知道我如何才能完成每天每小时登录的行数？

我在这里设置了一个 sqlfiddle：[http](http://www.sqlfiddle.com/#!2/e13a0/7) ://www.sqlfiddle.com/#!2/e13a0/7上面的查询

额外学分：没有人登录的小时的空值:-)

很高兴向任何可以提供帮助的人提供一些啤酒和咖啡！！！！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:48:37.220

我认为下面的 mysql 代码与您要找的很接近？

**笔记**

1.  它不是优雅的，除非它优雅的方式可以认为一个主要的黑客是优雅的。乍一看可能会因为它的丑陋而引起中度至严重的肠/脑痉挛。

2.  我的猜测是，它需要添加索引等才能真正使用。

3.  请注意，我将会话表的名称更改为**sessions_example**。如果您执行此操作，我不想破坏您的会话表。

4.  最后，在名为**hours_expanded**的新表中查找结果。

5.  它需要更多的测试。我现在累坏了，所以我正在提交潜在的解决方案。我认为一般方法是正确的，代码似乎是正确的，但请验证！

6.  我通过将登录计数按小时延长到当前时间 (NOW()) 来处理主动登录记录。如果有人可能在没有注销的情况下注销总是进入会话表，那么您可能需要做一些不同的事情。即为标记为活动的记录提出一个最大截止时间。

**一般的做法**

基本上，当我阅读这个问题时，我知道我的首选方法是将涉及的所有时间“扩展”到实际的表行中。我发现这在这种情况下更适合测试和理解，即使它不一定是一个很好的表现者。当我想办法做到这一点时，我发现了一篇博客文章[http://datacharmer.blogspot.com/2007/12/data-from-nothing-solution-to-pop-quiz.html](http://datacharmer.blogspot.com/2007/12/data-from-nothing-solution-to-pop-quiz.html)，（参见对 Roland的参考Bouman 和 Kai Voigt）真的，真的帮助我获得了我想要的行扩展。我习惯用 CTE 在 MSSQL 中做这种事情——所以我需要帮助来找到一种在 MySQL 中生成任意数量行的方法。

开始：

```
/* Following test data from provided sql fiddle */

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*changed name of sessions table to sessions_example, so as not to interfere with any prior sessions table*/
DROP TABLE IF EXISTS sessions_example;
CREATE TABLE `sessions_example` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `network_id` int(11) NOT NULL,
  `mac` varchar(17) NOT NULL,
  `time_login` datetime NOT NULL,
  `time_logout` datetime DEFAULT NULL,
  `data_in` bigint(20) DEFAULT NULL,
  `data_out` bigint(20) DEFAULT NULL,
  `sessionid` varchar(20) NOT NULL,
  `user_ip` varchar(20) DEFAULT NULL,
  `external_ip` varchar(20) DEFAULT NULL,
  `opfield1` varchar(255) DEFAULT NULL,
  `opfield2` varchar(255) DEFAULT NULL,
  `opfield3` varchar(255) DEFAULT NULL,
  `txtfield4` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `sessionid` (`sessionid`),
  KEY `time_login` (`time_login`),
  KEY `time_logout` (`time_logout`),
  KEY `ap_id` (`network_id`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1009253406 ;

INSERT INTO `sessions_example` (`id`, `user_id`, `network_id`, `mac`, `time_login`, `time_logout`, `data_in`, `data_out`, `sessionid`, `user_ip`, `external_ip`, `opfield1`, `opfield2`, `opfield3`, `txtfield4`) VALUES
(1009250911, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 15:45:05', '2013-01-07 16:55:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250912, 0, 254, '00-88-65-D9-B1-8E', '2013-01-07 15:50:04', '2013-01-07 19:11:58', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250914, 0, 254, 'D0-23-DB-17-DC-FA', '2013-01-07 16:20:04', '2013-01-07 17:35:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250915, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 16:25:01', '2013-01-07 16:50:04', NULL, NULL, 'active', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250917, 0, 254, 'E0-B9-BA-F0-45-83', '2013-01-07 16:45:05', '2013-01-07 19:11:58', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250919, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 16:55:05', '2013-01-07 17:12:30', NULL, NULL, 'active', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250920, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 17:12:30', '2013-01-07 17:15:06', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250921, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 17:15:06', '2013-01-07 19:11:59', NULL, NULL, 'active', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250926, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 19:11:59', '2013-01-07 20:30:04', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250927, 0, 254, '00-1B-9E-75-3E-DA', '2013-01-07 19:11:59', '2013-01-07 20:45:04', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250929, 0, 254, '00-88-65-D9-B1-8E', '2013-01-07 20:35:04', '2013-01-07 22:15:04', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250930, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 20:50:04', '2013-01-07 22:25:04', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250931, 0, 254, '00-26-C7-CD-10-9C', '2013-01-07 21:10:04', NULL, NULL, NULL, 'active', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250933, 0, 254, '00-1B-9E-75-3E-DA', '2013-01-07 21:30:04', '2013-01-08 00:20:04', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250934, 0, 254, '00-88-65-D9-B1-8E', '2013-01-07 23:30:04', '2013-01-08 00:05:04', NULL, NULL, 'active', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250935, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-07 23:50:04', '2013-01-08 00:50:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250936, 0, 254, '00-88-65-D9-B1-8E', '2013-01-08 00:05:04', '2013-01-08 02:20:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250940, 0, 254, '00-26-C7-CD-10-9C', '2013-01-08 01:10:05', '2013-01-08 02:10:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250941, 0, 254, '5C-0A-5B-5E-5D-C3', '2013-01-08 01:25:05', '2013-01-08 02:25:06', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250942, 0, 254, '00-88-65-D9-B1-8E', '2013-01-08 03:00:06', '2013-01-08 05:45:07', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009250943, 0, 254, '10-40-F3-6E-D0-FA', '2013-01-08 03:05:07', '2013-01-08 04:45:06', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251100, 0, 254, '28-CF-DA-D9-30-66', '2013-01-08 03:20:06', '2013-01-08 05:10:06', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251101, 0, 253, '00-26-AB-00-E0-1F', '2013-01-08 03:45:03', '2013-01-11 05:15:12', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251102, 0, 253, '8C-A9-82-85-EF-72', '2013-01-08 03:45:03', '2013-01-11 05:25:15', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251103, 0, 253, 'F0-CB-A1-43-A8-4D', '2013-01-08 04:05:03', '2013-01-11 05:15:09', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251104, 0, 254, '00-1B-9E-75-3E-DA', '2013-01-08 04:10:07', '2013-01-08 05:10:07', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251105, 0, 254, 'F8-7B-7A-AC-EA-D6', '2013-01-08 04:20:06', '2013-01-08 06:35:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251106, 0, 253, '90-18-7C-A9-0B-2B', '2013-01-08 04:30:03', '2013-01-11 05:15:14', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251107, 0, 253, '30-F7-C5-C5-9F-61', '2013-01-08 04:30:03', '2013-01-11 05:15:15', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251108, 0, 253, '70-DE-E2-32-F8-66', '2013-01-08 04:30:03', '2013-01-11 09:55:15', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251109, 0, 254, '00-26-C7-CD-10-9C', '2013-01-08 04:55:07', '2013-01-08 06:00:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251110, 0, 254, '5C-0A-5B-A7-54-20', '2013-01-08 05:15:07', '2013-01-08 06:15:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251111, 0, 253, '78-A3-E4-E7-0F-1C', '2013-01-08 05:20:03', '2013-01-11 05:15:06', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251112, 0, 254, '00-1B-9E-75-3E-DA', '2013-01-08 05:35:08', '2013-01-08 06:45:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251113, 0, 253, '00-1F-F3-FA-01-43', '2013-01-08 06:35:04', '2013-01-11 05:15:14', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251114, 0, 253, 'D8-B3-77-7A-C3-F2', '2013-01-08 06:40:03', '2013-01-11 05:15:13', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL),
(1009251128, 0, 254, '00-88-65-D9-B1-8E', '2013-01-08 16:25:08', '2013-01-08 17:40:05', NULL, NULL, 'passive', NULL, NULL, NULL, NULL, NULL, NULL);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;

/* end of provided sql fiddle data */

#Here is where we set up a table to hold expansion of all hours in rage as unix timestamp values.
DROP TABLE IF EXISTS hours_expanded;
CREATE TABLE hours_expanded
(
     id int auto_increment,
     hour_as_unix_ts int,
     full_datetime datetime NULL,
     hour_as_time time NULL,
     count_logged_in int DEFAULT 0,
     PRIMARY KEY (id)
);

#get min/max hours
SELECT @min_in := floor(unix_timestamp(min(time_login))/3600), 
    @max_out := floor(unix_timestamp(NOW())/3600)
FROM sessions_example;

#total number of rows that we will need in the `hours_expanded` table

SELECT @hours_in_sessions:= @max_out - @min_in + 1;

#dial up packet length for the string based row-generation solution (see tip of the hat)
SET @old_max_packet = @@max_allowed_packet;
SET GLOBAL max_allowed_packet = 1073741824;

#Next, we will create a long UNION ALL string that will create one row per hour needed.
#For the following concat based approach major tip of the hat to
#http://datacharmer.blogspot.com/2007/12/data-from-nothing-solution-to-pop-quiz.html
#and Roland Bouman who is mentioned there as proposing this solution to generating rows.
SET @one_row_per_hour = (SELECT concat("INSERT INTO hours_expanded (hour_as_unix_ts) ",(repeat(concat(@s:="select 1 ","union all "),@hours_in_sessions)),"select 1;"));

#dial packet length back down
SET GLOBAL max_allowed_packet = @old_max_packet;

#make that a prepared statement via the string and execute
prepare q from @one_row_per_hour;
execute q;

#set hour_as_unix_ts column to actual UNIX TIMESTAMP hour value and full_datetime to show datetime for that hour
UPDATE hours_expanded SET hour_as_unix_ts = (SELECT @min_in * 3600 + 3600 *( id - 1)),
    full_datetime = FROM_UNIXTIME(hour_as_unix_ts),
    hour_as_time = time(full_datetime);

#get the counts and update the hours table
UPDATE hours_expanded h
INNER JOIN
(
    SELECT h.hour_as_unix_ts, COUNT(*) as the_count
    FROM hours_expanded h
    INNER JOIN sessions_example
    WHERE h.hour_as_unix_ts >= floor(unix_timestamp(time_login)/3600)*3600 and h.hour_as_unix_ts <= floor(unix_timestamp(ifnull(time_logout,now()))/3600)* 3600
    GROUP by h.hour_as_unix_ts 
) t on h.hour_as_unix_ts = t.hour_as_unix_ts SET h.count_logged_in = t.the_count;

#null out any hours that have a count of 0
UPDATE hours_expanded SET full_datetime = NULL, hour_as_time = NULL WHERE count_logged_in = 0;

#Final Select with desired output (reformat full_datetime and hour_as_time as desired)
SELECT full_datetime, hour_as_time, count_logged_in FROM hours_expanded WHERE full_datetime IS NOT NULL 
```

**关于字符串 concat/repeat 的最后说明**。

1000000 行小时，涵盖超过 110 年的时间，需要 13.5M 字符串“SELECT 1 UNION ALL SELECT 1 ...”等。

因此，尽管该方法涉及使用大字符串来获得行扩展，但字符串大小对于所涉及问题的规模来说并不坏——除非你有几千年的会话日志要处理:-}。

我确实将 max_packet_size 临时增加到最大值 (1G)，以确保不会发生任何问题——矫枉过正，具有很大的安全边际。一旦我不再需要它，我就会将 max_packet_size 减小回系统设置。

# android-widget - Android 随着游戏的进行添加视图或更改视图的可见性

> ID：14410350
> 
> 赞同：0
> 
> 时间：2013-01-19T01:50:47.530
> 
> 标签：android-widget

我正在尝试编写一个简单的游戏，其中通过关卡的进度为用户提供了更多功能，即出现另一个视图，它增加了用户在游戏中可以做的事情。如果这很重要，我现在特别想添加 ZoomControls。据我所知或可以弄清楚，您必须在 OnCreate 中添加视图。因此，我尝试在 OnCreate 中将视图设置为不可见，以便在游戏后期将其更改为可见。但是游戏是在一个单独的自定义视图类中执行的，所以也看不到改变主活动中视图可见性的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T21:45:55.900

解决了，使用自定义接口发回数据。然后不得不使用主 UI 线程来更改 View 对象。

另外，如果您像我一样是新来的，请提示，如果您没有收到任何回复，您的声誉会在您没有意识到的情况下迅速下降。如果可以的话，回答你自己的问题。

# android - Android 操作系统如何监听电源按钮按键短按？

> ID：14410353
> 
> 赞同：3
> 
> 时间：2013-01-19T01:51:11.807
> 
> 标签：android, android-button, android-framework

我正在寻找 Android 源代码中关于电源按钮如何映射到关闭屏幕的实现。我正在开发一个自定义 ROM，并试图找出这两个事件之间的关系（短按键和屏幕关闭）。我发现**frameworks/base/services/java/com/android/server/PowerManagerService.java**中的屏幕状态发生了变化，但我没有看到与电源按钮本身相关的任何内容。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:42:44.893

查看 com.android.internal.policy.impl.WindowManagerPolicy.java。这处理将关键事件分派到适当的位置，并提供电源按钮的自定义处理。

特别是，您可能对 interceptKeyBeforeQueueing() 感兴趣，或者只搜索**KEYCODE_POWER**。

# java - 控制台在eclipse中显示终止消息

> ID：14410356
> 
> 赞同：14
> 
> 时间：2013-01-19T01:52:09.430
> 
> 标签：java, eclipse

每当我在 eclipse 中运行一个配置为

```
Eclipse Java EE IDE for Web Developers.
Version: Indigo Service Release 2 
Build id: 20120216-1857 
```

我得到一个空白控制台，并显示以下终止消息

![在此处输入图像描述](../Images/c66c306301e53e32b3abb153a13c75af.png)

构建路径有问题吗？

我的代码是一个基本的 hello world 应用程序

```
import java.lang.*;
 public class Connection {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println("Hello World");
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T01:59:55.773

终止意味着（您的程序或工具......）的执行完成并且JVM退出。这并不表明任何事情本身都出了问题。

无论您的程序退出时没有错误，还是带有讨厌的堆栈跟踪，您都会看到此消息。

通常，如果程序向 system.out 或 System.err 发送了任何内容，您会在控制台中看到它。

[这里](https://stackoverflow.com/q/18504493/366749)还有其他建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-02T14:58:17.773

1.  关闭控制台并重新打开 - 窗口 -> 显示视图 -> 控制台。

2.  蛮力方法 - 重新启动 Eclipse。

3.  如果上述方法不适合你试试[这个](https://stackoverflow.com/questions/18504493/no-console-output-in-eclipse-juno)。这里还有很多其他可能的问题和解决方案。

# javascript - 带有ajax响应的javascript函数返回错误

> ID：14410365
> 
> 赞同：0
> 
> 时间：2013-01-19T01:53:40.383
> 
> 标签：javascript, ajax, return

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我对这段代码有问题。

当此函数返回 FALSE 时，它工作正常。

但如果它返回 TRUE，则不会。

我希望在函数返回 TRUE 时提交表单。

```
<form  action='register.php' method="post" onsubmit="return validate()" > ... </form> 
```

这是脚本

```
<script language="JavaScript">
function validate() 
{
    var toreturn = false;

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        var e = document.getElementById('e').value;
        var p = document.getElementById('p').value;
        var r = document.getElementById('r').value;

        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {

                if(xmlhttp.responseText != "ok")
                {
                    document.getElementById("msg").innerHTML = xmlhttp.responseText;

                    $(function() {
                      $("#msg").hide().fadeIn("slow");
                    }, 3000);

                }
                else    toreturn = true;    

            }
        }

        xmlhttp.open("POST","register_validate.php");
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("e="+e+"&p="+p+"&r="+r);

        return toreturn;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:07:41.677

正如评论中提到的，您在使用异步代码时遇到了问题。从函数返回时，您的`toreturn`变量尚未填充。`validate`

对于 AJAX 回调：

```
xmlhttp.onreadystatechange = function () {
    // ...
} 
```

您可以想象，您放入该函数中的代码将被“放在一边”并稍后在您当前的函数完成后调用（特别是，当 AJAX 请求的就绪状态发生变化时）。

您要做的是使您的按钮不是提交按钮。然后，在您的 AJAX 回调中，如果您获得成功的结果，则提交表单（这将需要为表单提供一个 id）：

```
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        if (xmlhttp.responseText != "ok") {
            document.getElementById("msg").innerHTML = xmlhttp.responseText;

            $(function () {
                $("#msg").hide().fadeIn("slow");
            }, 3000);

        } else document.getElementById('your-form-id').submit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:12:46.427

通过添加 false 解决了问题

```
xmlhttp.open("POST","register_validate.php",false); 
```

感谢@Felix Kling 在[如何从异步调用中返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

添加 FALSE 值使函数 SYNCHRONOUS

# html - 使用 CSS 设置表单样式

> ID：14410369
> 
> 赞同：0
> 
> 时间：2013-01-19T01:54:12.690
> 
> 标签：html, css

我在我的网站上创建了一个搜索功能。我想从 CSS 加载搜索按钮的图像。搜索功能有效，但按钮图像无法加载——为什么不呢？

这是我的表格：

```
<form>
<div id="form"><input value="/etn/pagetree" type="hidden" name="c" /> 
<input value="search" type="hidden" name="func" /> 
<input value="1148074" type="hidden" name="rid" /> 
<input onblur="if(value==''){value='Search'}" id="search_str" onfocus="if(value=='Search'){value='';}" value="Search" name="search_str" type="text" /><input id="search_btn" value=" " type="submit" name="Submit" /></div>
</form> 
```

这是我的 CSS：

```
FORM { margin:0px; }

A, A:visited, A:hover { text-decoration:none; }

.subpages_box A, .subpages_box A:visited, .subpages_box A:hover { color:#ab0019; font-size:13px; font-weight:bold;  }

.footer_area A, .footer_area A:visited, .footer_area A:hover { color:#fec80c; }

a.sitemenu, a.sitemenu:visited { font-size:14px; color:#fff; padding:2 5 3 5; margin:2; line-height:170%; }
a.sitemenu:hover { background-color:transparent;}
#sitemenulit{ background-color:transparent; }

.map_box A, .map_box A:visited { color:#AB0019; }
.Xmap_box A:hover { color:#000; }

.lineOdd {
    BACKGROUND-COLOR: #e8e8e8
}
.lineEven {
    BACKGROUND-COLOR: #e8e8e8
}
.dropmenu A {
    PADDING-BOTTOM: 2px; PADDING-LEFT: 20px; PADDING-RIGHT: 10px;  COLOR: #443f3f; PADDING-TOP: 2px
}
.dropmenu A:visited {
    PADDING-BOTTOM: 2px; PADDING-LEFT: 20px; PADDING-RIGHT: 10px;  COLOR: #443f3f; PADDING-TOP: 2px
}
.dropmenu A:hover {
    BACKGROUND-COLOR: #901a6c; COLOR: #fff; TEXT-DECORATION: none
}

TABLE.search_box {
    WIDTH: 130px; MARGIN:8 50 0 0; float:right;
}
TABLE.search_box TD {
    TEXT-ALIGN: left; FONT-SIZE: 90%
}
TABLE.search_box #search_str {
    WIDTH: 94px;
    height: 21px;
    background: url(/wbn/slot/u3252/style/extbox.png) no-repeat;
    border: 0px solid transparent;
    padding: 3 2 0 5; font-size:11px;
}
TABLE.search_box #search_btn {
    WIDTH: 28px;
    height: 21px;
    background: url(/wbn/slot/u3252/style/btn.png) no-repeat;
    border: 0px solid transparent;
    cursor: pointer;
}

INPUT { margin:0px }

.content_area OL { margin:0px; padding-left:10px } 
```

新编辑的代码

```
<table border="1">
<tbody>
<tr>
<td><form>
<div id="header"><input value="/etn/pagetree" type="hidden" name="c" /> <input value="search" type="hidden" name="func" /> <input value="1148074" type="hidden" name="rid" /> <input onblur="if(value==''){value='Search'}" id="search_str" onfocus="if(value=='Search'){value='';}" value="Search" name="search_str" type="text" /><input id="search_btn" value=" " type="submit" name="Submit" /></div>
</form></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:15:14.930

Try this

```
input#search_str {
    WIDTH: 94px;
    height: 21px;
    background: url(/wbn/slot/u3252/style/extbox.png) no-repeat;
    border: 0px solid transparent;
    padding: 3 2 0 5; font-size:11px;
}
input#search_btn {
    WIDTH: 28px;
    height: 21px;
    background: url(/wbn/slot/u3252/style/btn.png) no-repeat;
    border: 0px solid transparent;
    cursor: pointer;
} 
```

Look at how your elements are nested, in what div, class or id. There is something wrong with your CSS definitions. It's not good enough to build a website with an automated tool and then come and look for an answer here, you have to understand what you are doing...

# c# - 在 C# 中读取和写入自定义配置

> ID：14410370
> 
> 赞同：3
> 
> 时间：2013-01-19T01:54:32.880
> 
> 标签：c#, configuration-files

c# 中是否有一个库可以让您读取和写入配置或某种配置文件？

我不是在谈论 app.config，而更像是一个 custom.config，类似于 ol .ini 文件，其中内置了 lib/functions 来读取/写入配置文件。

我当然可以自己写，但想知道是否存在一些常见的库或方法来做到这一点......

我知道自定义配置部分，但不想走那条路。

解决方案

我找到了我要找的东西。这将起作用：

[http://www.codeproject.com/Articles/14465/Specify-a-Configuration-File-at-Runtime-for-aC-Co](http://www.codeproject.com/Articles/14465/Specify-a-Configuration-File-at-Runtime-for-a-C-Co)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T01:58:41.323

我会将我的自定义配置作为 a `class`，然后使用`XmlSerializer`来读取和写入配置值。

```
public class MyConfig
{
    const string configPath = @"...";

    public string Setting1 { get; set; }
    // ...

    public static MyConfig Load()
    {
        var serializer = new XmlSerializer(typeof(MyConfig));
        using (var reader = new StreamReader(configPath))
            return (MyConfig)serializer.Deserialize(reader);
    }

    public void Save()
    {
        var serializer = new XmlSerializer(typeof(MyConfig));
        using (var writer = new StreamWriter(configPath))
            serializer.Serialize(writer, this);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:18:24.007

如果您只需要非常简单的键值对（例如旧的 .ini 或 .cfg 文件），那么还有来自 ApplicationData.Current 的本地存储：

```
ApplicationData.Current.LocalSettings.Values["test"] = "Setting Value"; 
string t = (string)ApplicationData.Current.LocalSettings.Values["test"]; 
```

但是，这与单个应用程序相关联，不确定它处理多线程/多实例问题的能力如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T05:06:11.693

为什么不使用设置设计器（`Settings.settings`项目中的文件）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-11T06:34:56.857

如果有人确实需要将更改保存到自定义配置文件（在本例中为与 dll 程序集同名的配置文件）：

```
ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();
fileMap.ExeConfigFilename = Assembly.GetExecutingAssembly().GetName().Name + ".dll.config";
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);

//... make modification (as you would for any app.config, etc...)

config.Save(ConfigurationSaveMode.Modified); 
```

# sql-server - 在 TSQL 中将 Int 值拆分为行

> ID：14410371
> 
> 赞同：2
> 
> 时间：2013-01-19T01:54:46.700
> 
> 标签：sql-server, tsql

我有一张 StartTimes 和 EndTimes 表

我想在每个开始时间和结束时间之间每 15 分钟增量将它们分成 1 行。

就像是

```
SELECT StartTime, DATEDIFF(mi, StartTime, EndTime) / 15 AS Offset FROM myTable
CROSS APPLY
-- put something in here to split each row into (EndTime - StartTime) / 15 rows 
```

我想我可以为此使用 SQL OVER 函数……但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:11:34.573

在您需要生成不存在的行的情况下，创建一个数字表会很有帮助，该表仅包含一组编号为 1、2、3 等的行。例如，这将创建一个表从 0 到 99 的数字：

```
create table ids ( id int )

declare @id int
set @id = 0
while @id < 100
begin
    insert ids values (@id)
    set @id = @id + 1
end 
```

然后在这个数字表上构建，就像与原始表连接在一起一样简单，并且限制基于`id`小于生成的 15 分钟周期数：

```
select
  DATEADD(mi, id * 15, StartTime) AS StartTime,
  DATEADD(mi, (id + 1) * 15, StartTime) AS EndTime
from
  MyTable T
join
  ids I on I.id < DATEDIFF(mi, StartTime, EndTime) / 15 
```

请注意，上述查询做了两个假设：

*   您所有的 StartTime - EndTime 组合都具有可被 15 整除的差异。
*   您的 StartTime - EndTime 对都不会跨越超过一百个 15 分钟周期的范围（如果是这样，您只需要使`ids`表格更大）。

演示：[http ://www.sqlfiddle.com/#!6/595a9](http://www.sqlfiddle.com/#!6/595a9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:11:09.010

您还可以为此使用递归 CTE 以避免创建辅助表：

```
WITH "CTE"
AS
(
  SELECT "id", "starttime" FROM "data"
  UNION ALL
  SELECT "id", DATEADD( MINUTE, 15, "starttime" )
  FROM "CTE"
  WHERE "starttime" < ( SELECT "endtime" FROM "data" AS D2 WHERE D2."id" = CTE."id" )
)
SELECT * FROM "CTE" 
ORDER BY "ID" 
```

请参阅[SQL-Fiddle-Demo](http://www.sqlfiddle.com/#!3/39346/8/0)！

上述查询还假设数据表中的开始时间和结束时间组合的差异可以被 15 整除。

我已经编辑了查询以使用不能被 15 整除的日期时间 - 如果您选择的 15 分钟间隔不适合最后计算的间隔，它将被拒绝：

```
WITH "CTE"
AS
(
  SELECT "id", "starttime" FROM "data"
  UNION ALL
  SELECT "id", DATEADD( MINUTE, 15, "starttime" )
  FROM "CTE"
  WHERE "starttime" <= ( SELECT DATEADD( MINUTE, -15, "endtime" ) FROM "data" AS D2 WHERE D2."id" = CTE."id" )
)
SELECT * FROM "CTE" 
ORDER BY "ID" 
```

如果您想在结果中拒绝最后一个时间戳（在 fiddle-demo 中`id 2, timestamp "12:00:00"`），只需更改`<=`为`<`. 如果您正在使用半开区间，这也将是相关的。

请参阅[已编辑的 SQL-Fiddle-Demo](http://www.sqlfiddle.com/#!3/ce2e4/1/0)

# sql-server - 可为空的主键

> ID：14410372
> 
> 赞同：3
> 
> 时间：2013-01-19T01:55:04.343
> 
> 标签：sql-server

我有两张桌子。

购买：

*   `PurchaseId`
*   `SenderId`
*   `ReceiverId`

顾客：

*   `Customerid`（主要-唯一）
*   `CUSID`（不是主要的-不是唯一的-允许为空）
*   `FirsName`
*   `LastName`

我想在客户表中使用用户名和姓氏对所有购买进行一些报告。我无法建立任何关系。我所有的代码都给我错误或返回错误的结果。请帮助我。（接收者和发送者的值在客户表中是相等的 CUSID）关系是错误的：因为我不能创建任何主键，因为我的字段允许为空。

```
(select (tbl_Customers.FirstName + '-' +  tbl_Customers.LastName) as receiver
FROM         tbl_PurchaseForms
INNER JOIN
tbl_Customers ON tbl_PurchaseForms.ReceiverUId = tbl_Customers.CUSID) 
or
(select (tbl_Customers.FirstName + '-' +  tbl_Customers.LastName) as sender
FROM         tbl_PurchaseForms
INNER JOIN
tbl_Customers ON tbl_PurchaseForms.SenderUId = tbl_Customers.CUSID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:23:56.970

诚然，我对您的问题有些困惑，但听起来您正试图退回所有已从您的购买表接收或发送某些东西的客户，链接到您的 cusid 字段？

如果是这样，这样的事情应该可以工作（如果您需要区分发送者和接收者，我已经包含了一个称为购买类型的额外列）：

```
SELECT 
    'Sender' as PurchaseType, 
    C.FirstName, 
    C.LastName
FROM Customers C 
    JOIN Purchase P ON C.CUSID  = P.SenderId
UNION 
SELECT 
    'Receiver' as PurchaseType, 
    C.FirstName, 
    C.LastName
FROM Customers C 
    JOIN Purchase P ON C.CUSID  = P.ReceiverId 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:04:33.257

```
Select p.*
,(Select  c.FirstName + '-' +  c.LastName  from customers c where c.CUSID  = P.ReceiverId) as  receiver
,(Select  c.FirstName + '-' +  c.LastName  from customers c where c.CUSID  = P.SenderId) as  Sender
from purchase p 
```

而购买应设计为启用此功能

```
Select p.*
,(Select  c.FirstName + '-' +  c.LastName  from customers c where c.Customerid  = P.ReceiverId) as  receiver
,(Select  c.FirstName + '-' +  c.LastName  from customers c where c.Customerid  = P.SenderId) as  Sender
from purchase p 
```

# eclipse - eclipse插件TextEditorMessages无法解析

> ID：14410380
> 
> 赞同：0
> 
> 时间：2013-01-19T01:56:07.210
> 
> 标签：eclipse, eclipse-plugin

我想添加“添加书签...”之类的按钮，以实现“我的书签”导致 eclipse book 插件无法导出和导入，

我已经将popmenu放在java编辑器中，但是当我使用“TextEditorMessages”类时，它无法解析，但我已经导入“org.eclipse.core.runtime”依赖项，并且eclipse可以导航 ![eclipseCanFeelClass](../Images/3b998de58142743c94e5ef78229276b8.png)

看图 ![成功标签](../Images/613e88c56b293b74de29b2669cb7a38f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:01:28.297

我认为您正在寻找 org.eclipse.text 插件中的 TextEditMessages 类。尝试将 org.eclipse.text 添加到您的插件依赖项中，更改类名并进行组织导入。

搜索基本 Eclipse 类的一个好方法是打开插件视图，选择您感兴趣的插件（我只做所有插件），然后右键单击->添加到 Java 搜索...

这将允许您使用 Open Type (ctrl-o) 从您的基础 Eclipse 中搜索任何类。

# cakephp - CakePHP 错误信息位置

> ID：14410382
> 
> 赞同：3
> 
> 时间：2013-01-19T01:56:25.430
> 
> 标签：cakephp, cakephp-2.2

**已编辑**

**CakePHP 版本：2.2.4**

当输入验证失败时，CakePHP 生成的错误消息位于我的输入元素之后

```
<div class="control-group">
    <label class="control-label">Name <span class="required-field">*</span></label>
        <div class="controls">
            <input name="data[User][name]" class="input-xlarge form-error" type="text" value="">
            <div class="error-message">This field cannot be left blank.</div>
            <input type="hidden" name="data[User][public_name]" id="UserPublicName_" value="0">
           <input type="checkbox" name="data[User][public_name]" class="span1" value="1">
        </div>
 </div> 
```

但我想把它放在我的复选框之后，如下所示：

```
<div class="control-group">
    <label class="control-label">Name <span class="required-field">*</span></label>
        <div class="controls">
           <input name="data[User][name]" class="input-xlarge form-error" type="text" value="">
           <input type="hidden" name="data[User][public_name]" id="UserPublicName_" value="0">
           <input type="checkbox" name="data[User][public_name]" class="span1" value="1">
           <div class="error-message">This field cannot be left blank.</div>
        </div>
 </div> 
```

我读过[FormHelper::input()](http://api20.cakephp.org/class/form-helper#method-FormHelperinput)但我不知道该怎么做。我想用`inputDefaults`.

**已编辑**

我的.ctp

```
<div class="control-group">
    <label class="control-label">Nanme <span class="required-field">*</span></label>
        <div class="controls">
            <?php
               echo $this->Form->input('name', array(
                   'type' => 'text', 'class' => 'input-xlarge'));
               echo $this->Form->checkbox('public_name', array('class' => 'span1'));
            ?>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T17:33:43.317

其实我已经解决了。我已经添加`'error' => false`并定位了我想要的错误消息`$this->Form->error()`

我的.ctp

```
<div class="control-group">
  <label class="control-label">Nanme <span class="required-field">*</span></label>
    <div class="controls">
        <?php
           echo $this->Form->input('name', array(
               'type' => 'text', 'class' => 'input-xlarge', 'error' => false));
           echo $this->Form->checkbox('public_name', array('class' => 'span1'));
           echo $this->Form->error('User.name', null, array('class' => 'error-message'));
        ?>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:22:37.580

“复选框”输入类型应该已经将错误放在输入之后。

但是要指定确切的顺序，请使用`format`输入`$options`数组中的键：

```
$this->Form->input('fieldname', 
    array('type'=>'checkbox',
          'format'=>array('before', 'input', 'between', 'label', 'after', 'error')
)); 
```

只需更改这些数组元素的顺序以匹配您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T12:50:53.903

1.  在您的控制器中使用下面的语法

    ```
     if($this->{$this->pageModel}->validates())
     {
        // your code....
     }
     else{
           // your errors 
        $errors = $this->{$this->pageModel}->validationErrors;
        $this->set('errors',$errors);
     } 
    ```

2.  在您的 ctp 文件中，将下面的代码放在您要显示错误消息的位置

    ```
    if(isset($errors) && !empty($errors['fieldname']))
    { 
        echo $errors['fieldname'][0];
    } 
    ```

# java - Swing：鼠标悬停时显示/隐藏按钮

> ID：14410388
> 
> 赞同：6
> 
> 时间：2013-01-19T01:58:15.303
> 
> 标签：java, swing, events, button, listener

所以我想在 a 中放一个按钮`JPanel`，但我想让它保持不可见/隐藏，除非鼠标指针悬停在它上面。此时，按钮应该是可见的，对点击做出反应等等。当鼠标离开该区域时，它应该再次被隐藏。

我尝试`MouseListener`在我的`JButton`和使用中添加 a `setVisible()`，但是当我隐藏按钮 ( `setVisible(false)`) 时，监听器不再工作 - 应用程序的行为就像按钮根本不存在一样。

实现此行为的正确方法是什么？

编辑：我正在使用绝对布局 ( `setLayout(null)`)，并且我正在使用`setBounds(x, y, width, height)`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T02:39:16.540

使用图标分别显示（彩色）或隐藏（透明）按钮。

![在此处输入图像描述](../Images/6a6d6e59ad25fa5f710ff69b632e4f63.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

class InvisiButton {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                int size = 30;
                JPanel gui = new JPanel(new GridLayout(4,10,4,4));
                for (int ii=0; ii<40; ii++) {
                    JButton b = new JButton();
                    b.setContentAreaFilled(false);
                    b.setIcon(new ImageIcon(
                        new BufferedImage(size,size,BufferedImage.TYPE_INT_RGB)));
                    b.setRolloverIcon(new ImageIcon(
                        new BufferedImage(size,size,BufferedImage.TYPE_INT_ARGB)));
                    b.setBorder(null);
                    gui.add(b);
                }

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T02:39:11.780

一种方法是给按钮没有文本、没有边框和一个空图标，其大小与真正的翻转图标相匹配。

附录：这个更新的例子依赖于@Andrew 的简洁的空[图标](https://stackoverflow.com/a/14410597/230513)。

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.image.BufferedImage;
import javax.swing.BorderFactory;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

/** @see https://stackoverflow.com/a/14410594/230513 */
public class RollButton {

    private static final int N = 64;

    private void display() {
        JFrame f = new JFrame("RollButton");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel p = new JPanel(new GridLayout());
        p.setBorder(BorderFactory.createEmptyBorder(N, N, N, N));
        p.add(createButton(UIManager.getIcon("OptionPane.errorIcon")));
        f.add(p);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private JButton createButton(Icon icon) {
        JButton b = new JButton();
        b.setBorderPainted(false);
        b.setText("");
        // https://stackoverflow.com/a/14410597/230513
        b.setIcon(new ImageIcon(new BufferedImage(icon.getIconWidth(),
            icon.getIconHeight(), BufferedImage.TYPE_INT_ARGB)));
        b.setRolloverEnabled(true);
        b.setRolloverIcon(icon);
        return b;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new RollButton().display();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T03:06:47.733

似乎可以作为 CardLayout 工作（带有空标签的按钮）

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
class Testing
{
  JButton btn = new JButton("Click Me");
  JLabel lbl = new JLabel();
  CardLayout cl = new CardLayout();
  JPanel cardLayoutPanel = new JPanel(cl);
  public void buildGUI()
  {
    lbl.setPreferredSize(btn.getPreferredSize());
    lbl.setBorder(BorderFactory.createLineBorder(Color.black));//testing size, remove later
    cardLayoutPanel.add(lbl,"lbl");
    cardLayoutPanel.add(btn,"btn");
    JPanel p = new JPanel(new GridBagLayout());
    p.add(cardLayoutPanel,new GridBagConstraints());
    JFrame f = new JFrame();
    f.getContentPane().add(p);
    f.setSize(400,300);
    f.setLocationRelativeTo(null);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
    MouseListener listener = new MouseAdapter(){
      public void mouseEntered(MouseEvent me){
        if(me.getSource() == lbl) cl.show(cardLayoutPanel,"btn");
      }
      public void mouseExited(MouseEvent me){
        if(me.getSource() == btn) cl.show(cardLayoutPanel,"lbl");
      }
    };
    lbl.addMouseListener(listener);
    btn.addMouseListener(listener);
    btn.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent ae){
        System.out.println("me clicked");
      }
    });
  }
  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        new Testing().buildGUI();
      }
    });
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-19T02:11:29.897

您应该处理`JPanel`. 获取鼠标在 上的位置`JPanel`，看看它是否在`JButton`的范围内。

虽然大多数`LayoutManager`s 忽略了不可见的组件，所以当按钮被隐藏时你不能总是得到它的边界——感谢 MadProgrammer。您应该添加一个附加组件来保留“位置”——例如使用 JPanel：

```
JPanel btnContainer = new JPanel(new BorderLayout());    // use BorderLayout to maximize its component
btnContainer.add(button);    // make button the only component of it
panel.add(btnContainer);    // panel is the JPanel you want to put everything on

panel.addMouseMotionListener(new MouseAdapter() {
    public void mouseMoved (MouseEvent me) {
        if (btnContainer.getBounds().contains(me.getPoint())) {    // the bounds of btnContainer is the same as button to panel
            button.setVisible(true);    // if mouse position on JPanel is within the bounds of btnContainer, then make the button visible
        } else {
            button.setVisible(false);
        }
    }
});

button.addMouseLisener(new MouseAdapter() {
    public void mouseExited (MouseEvent me) {    // after thinking about it, I think mouseExited() is still needed on button -- because
                                                 // if you move your mouse off the button very quickly and move it out of panel's bounds,
                                                 // before panel captures any mouse move event, button will stay visible
        button.setVisible(false);    // And now, it will hide itself.
    }
}); 
```

* * *

**还有另一种“模拟”不可见按钮的方法。您可以覆盖类的`paint()`方法，`JButton`如果“不可见”清除一个空白矩形：**

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Demo extends JFrame {

    class MyButton extends JButton {
        private boolean show;

        public MyButton (String text) { // You can implement other constructors like this.
            super(text);
        }

        @Override
        public void paint (Graphics g) {
            if (show) {
                super.paint(g);
            } else {
                g.setBackground(panel.getBackground());
                g.clearRect(0, 0, getWidth(), getHeight());
            }
        }

        public void setShow (boolean show) {    // make a different name from setVisible(), use this method to "fakely" hide the button.
            this.show = show;
            repaint();
        }
    }

    private MyButton btn = new MyButton("Yet another button");
    private JPanel panel = new JPanel(new BorderLayout());

    public Test () {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(500, 500);
        setLocationRelativeTo(null);

        btn.setShow(false);
        btn.setPreferredSize(new Dimension(100, 100));
        btn.addMouseListener(new MouseAdapter() {   // capture mouse enter and exit events of the button, simple!
            public void mouseExited (MouseEvent me) {
                btn.setShow(false);
            }

            public void mouseEntered (MouseEvent me) {
                btn.setShow(true);
            }
        });

        panel.add(btn, BorderLayout.NORTH);

        add(panel);
        setVisible(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-19T02:03:13.287

`MouseEvent`（或其他输入事件）只会在组件实际可见时触发。

你的另一个问题是布局管理器在布局时可能会忽略它，使按钮（可能）0x0宽度和高度......

~~您可以将按钮添加到自定义面板（使用`BorderLayout`），覆盖面板`getPreferredSize`并返回按钮的首选大小。这将允许布局管理器布局面板，但允许您将按钮放在上面。~~

~~这也可以用于代表按钮捕获鼠标事件。~~

**nb**经过一番思考，以上行不通。一旦按钮变得可见，`mouseExit`就会触发一个事件，这将触发面板隐藏按钮。一旦按钮变得可见，它也将开始使用鼠标事件，这意味着几乎不可能判断鼠标何时超出了窗格的范围。当然，您可以使用一堆`if`语句和标志来确定发生了什么，但是有一些简单的方法......

**更新**

另一种方法是为您自己创建一个自定义按钮，并通过覆盖该`paint`方法，您可以欺骗组件显示为透明，但仍会收到鼠标事件通知并获得布局管理器的好处。

```
public class TestButton02 {

    public static void main(String[] args) {
        new TestButton02();
    }

    public TestButton02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            TestButton btn = new TestButton("Testing");
            btn.setBoo(false);
            add(btn);
        }

    }

    public class TestButton extends JButton {

        private boolean boo;

        public TestButton(String text) {
            super(text);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseEntered(MouseEvent e) {
                    setBoo(true);
                }

                @Override
                public void mouseExited(MouseEvent e) {
                    setBoo(false);
                }
            });
        }

        public void setBoo(boolean value) {
            if (boo != value) {
                boo = value;
                repaint();
            }
        }

        public boolean isBoo() {
            return boo;
        }

        @Override
        public void paint(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setComposite(AlphaComposite.SrcOver.derive(isBoo() ? 1f : 0f));
            super.paint(g2d);
            g2d.dispose();
        }

    }

} 
```

这基本上有一个特殊的标志，可以影响`AlphaComposite`将按钮绘制为透明或不透明......

# mysql - 思考一种组织数据库的方法

> ID：14410392
> 
> 赞同：0
> 
> 时间：2013-01-19T01:59:15.097
> 
> 标签：mysql, sql, arrays

我正在制作一个函数，它将显示当前正在访问的站点的文章是什么，按当前访问者的数量排序。每次有人访问一篇文章时，它都会将他的信息添加到数据库中。我的BD是这样制作的：

第一个列是 IP_Adress，第二个列是 Article_ID，最后一个列是时间戳。

我需要使用当前访问者最多的文章订购我的数据，但我的条目取决于 IP 地址（因为 IP 地址在数据库中是唯一的，因为当访问者更改页面时，它只会修改文章 ID & 时间戳，它不会创建另一个条目），而不是文章 ID。

我被困在那里，希望有人能为我解答:)。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:06:35.090

你有没有调查过`GROUP BY`：

```
SELECT Count(*), Article_id
FROM TableName
GROUP BY Article_id
ORDER BY Count(*) DESC 
```

这将为您提供最新访问者最多的文章。

祝你好运，如果我误解了，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:07:43.710

```
 Select Article_ID, count(Article_ID) 
    from yourtable 
    group by Article_ID 
```

# assembly - 如何使用布尔运算将位设置为 0？

> ID：14410401
> 
> 赞同：1
> 
> 时间：2013-01-19T02:00:09.603
> 
> 标签：assembly, 6502

6502 汇编中的按位运算仍然是新的。我想要一个有 8 个标志的字节。这将存储我的元精灵的状态。

我希望能够在不更改其他标志的情况下设置特定标志。

我知道如何使用 ORA 将它们设置为一个：

```
 lda status
  ora #%00000001 ; set bit 0 to true
  sta status 
```

我知道如何使用 EOR 来切换它们：

```
 lda status
  eor #%00000001 ; if bit 0 = true, then bit 0 = false and vise versa
  sta status 
```

最后，我知道如何检查某位是否属实：

```
 lda status
  and #%00000001 ; if bit 0 = true then set overflow flag to true 
```

但是如何在不改变任何其他标志的情况下将特定标志设置为 0？即使我使用 AND，我将如何强制它将所需的位设置为 0？

谢谢，我确定我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T02:17:54.733

怎么样

```
lda status
and #%11111110 ; set bit 0 to false
sta status 
```

请注意，所有其他位都不会被触及，因为对于每一位`1 AND X`都是如此。`X`只有位 0 更改，因为`0 AND X`始终是`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:13:47.117

我对 6502 并不特别熟悉，但是要清除一点，您通常会使用一个值，除了您要清除的那个之外，每个位都已设置。

# javascript - 在 AngularJS 中对已解决的承诺使用 ng-model（奇怪的行为）

> ID：14410403
> 
> 赞同：0
> 
> 时间：2013-01-19T02:00:22.273
> 
> 标签：javascript, angularjs, promise

这是我的简单控制器和指令：

```
var myApp = angular.module('myApp',[]);

function MyCtrl($scope, $q) {
    var myObject = {
        name: "Dingus",
        favoriteFood: "Chicken",
    };

    var itemDeferred = $q.defer();
    $scope.item = itemDeferred.promise;

    var resolveIt = function() {
        itemDeferred.resolve(myObject);
    };
    resolveIt();
}

myApp.directive('promised', function() {
    return {
        restrict: 'E',
        scope: { boundModel: '=' },
        template: '<input type="text" ng-model="boundModel">',
    };
}); 
```

范围项是从一个承诺中解决的。当我`ng-model`在 HTML 中使用时，为什么输入不更新项目，为什么指令甚至不让我输入？

请参阅此小提琴以获取工作示例：http: [//jsfiddle.net/winduptoy/XmBxK/](http://jsfiddle.net/winduptoy/XmBxK/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T05:09:37.170

我认为发生的情况是，每次您在输入框中输入内容时，Angular 的摘要循环都会检查 promise 的结果并将 myObject 重新分配给 $scope.item。这是避免这种情况的一种方法：

```
//$scope.item = itemDeferred.promise;
var promise = itemDeferred.promise;

promise.then(function(obj) {
   alert('Success: ' + obj);
   $scope.item = obj;
}, function(reason) {
   alert('Failed: ' + reason);
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/z49cZ/)。

# opengl - glutinit 参数

> ID：14410404
> 
> 赞同：6
> 
> 时间：2013-01-19T02:00:38.310
> 
> 标签：opengl

我是openGL的初学者。在所有简单的示例中，主函数都有参数，而 glutinit func 使用这些参数。但我不明白为什么它们是必要的。我在命令参数中什么也没写，程序仍然有效。它们是用来做什么的？能给我举个例子吗？

```
glutInit(&argc, argv) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T03:30:43.343

使用它们以便 GLUT 可以处理命令行参数。它有许多始终使用的参数。如果您不希望 GLUT 处理参数，只需传递如下内容：

```
{
  int argc = 1;
  char *argv[1] = {(char*)"Something"};
  glutInit(&argc, argv);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-11T16:42:20.743

glutInit 用于初始化 GLUT 库。在 C 中，可以接受命令行参数。命令行参数在 DOS 或 Linux 等命令行操作系统中的程序名称之后给出，并从操作系统传递给程序。要在程序中使用命令行参数，您必须首先了解 main 函数的完整声明，该函数以前不接受任何参数。事实上， main 实际上可以接受两个参数：一个参数是命令行参数的数量，另一个参数是所有命令行参数的完整列表。

argcp：指向程序未修改的 argc 变量的指针。返回时， argcp 指向的值将被更新，因为 glutInit 提取任何用于 GLUT 库的命令行选项。argv：程序未修改的来自 main 的 argv 变量。与 argcp 一样，argv 的数据将被更新，因为 glutInit 提取 GLUT 库可以理解的任何命令行选项。

glutInit 也处理命令行选项，但具体的选项解析取决于窗口系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T23:31:09.853

另一种情况是当**unix** `main()`接受命令行参数时，我们都不希望通过 GLUT 获得“管道”。

在这种情况下，我们应该在内部某处声明并初始化“自定义”GLUT 初始化变量`main()`：

```
int foo = 1;
char * bar[1] = {" "};
glutInit(&foo, bar); 
```

# python - 如何在 PyQt4 进程中使用多核 python？

> ID：14410416
> 
> 赞同：1
> 
> 时间：2013-01-19T02:02:49.787
> 
> 标签：python, pyqt4, multiprocessing, signals-slots

我正在用 pyqt4 编写一个应用程序，它必须读取并解析大量的 xml 文件。完成单线程需要一段时间来完成所有解析并使数千个 python 对象与传入的 xml 相对应。我已经对代码进行了概要分析，据我所知，它是计算绑定的，而不是 I/O。

我想将应用程序转换为多核模型以分散负载，使用工人农场模型（python 中的?Process.Pool）。

但是，我也希望能够从工作人员那里发出进度信号以更新 gui。

到目前为止，在我看来，QThread 不支持多核（因为它在一个核心上循环），但我需要 QThread 来执行 Signal，所以基本上我不能这样做。

我也许可以安排不需要来自工人的信号，只需要来自农民的信号，这可能意味着我可以继续，但我想知道：我可以将 python 对象列表从一个进程返回到另一个进程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T02:15:09.650

*   产生一个 QThread。
*   QThread 可以将任务分配给多处理池。您可以使用具有回调参数的[pool.apply_async() 。](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.apply_async)
*   回调参数允许您指定一个函数，该函数在目标函数完成时调用。
*   回调在 QThread 中运行，并将目标函数的返回值作为其唯一的参数发送。
*   每次回调函数运行时，您都可以更新 GUI 以指示进度。

# c# - 被屏蔽的文本框文本被拒绝

> ID：14410419
> 
> 赞同：1
> 
> 时间：2013-01-19T02:03:36.760
> 
> 标签：c#, winforms, maskedtextbox

我试图弄清楚如何做到这一点，以便如果我按下按钮执行操作（例如显示消息框）并且我的 maskedtextbox 的文本不是数字，那么它会执行类似说你只能在 TextBox 中有一个数字或类似的东西。我似乎无法弄清楚。

我试过用这个：

```
if (!System.Text.RegularExpressions.Regex.IsMatch(binTxtbx.Text, @"0-9"))
            e.Handled = true; 
```

但如果我使用它，它不会将任何文本放入 maskedtextbox。

如果你知道是否有人问过我同样的问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:05:52.160

如果您不介意使用 maskedTextBox，并且只是不喜欢下划线（正如您在评论中提到的那样），只需将 PromptChar 更改为空白即可。

您可以在 MaskedTextBox 属性的设计视图中执行此操作，也可以在如下代码中执行此操作：

```
myMaskedTextBox.PromptChar = ' '; 
```

* * *

编辑：

或者，（如果您不想使用 maskedTextBox）您可以将 KeyDown 事件连接到 EventHandler，如下所示：

```
 private void numericComboBox_KeyDown(object sender, KeyEventArgs e)
    {
        try
        {
            e.SuppressKeyPress = false;

            // Determine whether the keystroke is a number from the top of the keyboard.
            if (e.KeyCode < Keys.D0 || e.KeyCode > Keys.D9)
            {
                // Determine whether the keystroke is a number from the keypad.
                if (e.KeyCode < Keys.NumPad0 || e.KeyCode > Keys.NumPad9)
                {
                    // Determine whether the keystroke is a backspace or arrow key
                    if ((e.KeyCode != Keys.Back) && (e.KeyCode != Keys.Up) && (e.KeyCode != Keys.Right) && (e.KeyCode != Keys.Down) && (e.KeyCode != Keys.Left))
                    {
                        // A non-numerical keystroke was pressed.
                        // Set the flag to true and evaluate in KeyPress event.
                        e.SuppressKeyPress = true;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            //Handle any exception here...
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:07:07.687

表达式应`[0-9]`带有方括号。

完整代码：

```
!System.Text.RegularExpressions.Regex.IsMatch(binTxtbx.Text, "^[0-9]*$") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T04:25:56.430

也许你可以使用

```
if (binTxtbx.Text.Any(c => char.IsNumber(c)))
{
   // found a number in the string
} 
```

或者

```
if (binTxtbx.Text.All(c => char.IsNumber(c)))
{
    // the string is a number
} 
```

# git - Git rebase合并冲突无法继续

> ID：14410421
> 
> 赞同：172
> 
> 时间：2013-01-19T02:03:56.747
> 
> 标签：git, git-rebase

我正在尝试重新设置“dev”以赶上“master”分支。

```
$ git checkout dev 
$ git rebase master 
First, rewinding head to replay your work on top of it...
Applying: Corrected compilation problems that came from conversion from SVN.
Using index info to reconstruct a base tree...
M       src/com/....
<stdin>:125: trailing whitespace.
/**
<stdin>:126: trailing whitespace.
 *
<stdin>:127: trailing whitespace.
 */
<stdin>:128: trailing whitespace.
package com....
<stdin>:129: trailing whitespace.

warning: squelched 117 whitespace errors
warning: 122 lines add whitespace errors.
Falling back to patching base and 3-way merge...
Auto-merging src/com/....
CONFLICT (content): Merge conflict in src/com/...
Failed to merge in the changes.
Patch failed at 0001 Corrected compilation problems that came from conversion from SVN.

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort".

$ vi src/com/.....   { fixed the merge issue on one file } 
$ git add -A . 
$ git rebase --continue 
src/com/....: needs merge
You must edit all merge conflicts and then
mark them as resolved using git add
$ vi src/com....      { verified, no >>> or <<< left, no merge markers } 
$ git rebase --continue 
Applying: Corrected compilation problems that came from conversion from SVN.
No changes - did you forget to use 'git add'?
If there is nothing left to stage, chances are that something else
already introduced the same changes; you might want to skip this patch.

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort". 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-01-19T02:31:31.803

有几种情况我看到`rebase`卡住了。一种是如果更改变为空（提交具有先前在 rebase 中所做的更改），在这种情况下您可能必须使用`git rebase --skip`.

这很容易说出来。如果你这样做`git status`，它应该不会显示任何变化。如果是这样，请跳过它。如果不是这种情况，请发布一份副本，`git status`我可以尝试进一步提供帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-07-16T01:14:17.853

我遇到此问题的一次是在执行 a `git commit`after a时`git add`。因此，以下序列将产生您提到的变基错误：

```
git add <file with conflict>
git commit -m "<some message>"  
git rebase --continue 
```

同时，下面的序列运行没有任何错误，并继续变基：

```
git add <file with conflict>
git rebase --continue 
```

使用“全部”选项可能会`git add -A`产生类似的情况。（请注意，我对 git 非常缺乏经验，所以这个答案可能不正确。）为了安全起见，`git rebase --skip`在这种情况下似乎也能很好地工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-03T17:46:19.017

注意：Git 2.0.2（2014 年 7 月）修复了一种情况，即 a`git rebase --skip`会卡住并且无法继续使用当前的 rebase。
请参阅[brian m](https://github.com/bk2204)的[提交 95104c7 。](https://github.com/git/git/commit/95104c7e257652b82aed089494def344e3938928)[卡尔森 ( `bk2204`)](https://github.com/bk2204)

## `rebase--merge`: 修复`--skip`连续两个冲突

> 如果`git rebase --merge`遇到冲突，**`--skip`如果下一次提交也发生冲突，则不会工作**。
> 该`msgnum`文件永远不会用新的补丁号更新，因此实际上不会跳过任何补丁，从而导致不可避免的循环。
> 
> 将文件的值更新`msgnum`为 call_merge 中的第一件事。
> 这也避免了`Already applied`在跳过提交时出现“”消息。
> 调用 call_merge 的其他上下文没有明显变化，因为在这些情况下 msgnum 文件的值保持不变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-19T02:12:37.183

```
$ vi src/com....      { verified, no >>> or <<< left, no merge markers } 
$ git rebase --continue 
```

看起来你忘记了`git add`你的改变......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-12T12:35:20.267

在经历了很多冲突（长`git status`）的变基之后，我无法弄清楚我应该上演的是什么。我使用与 PhpStorm 集成的 Git，它没有显示任何未暂存的文件。

`git add .`没有解决它，但[此评论](https://stackoverflow.com/questions/12759390/cannot-continue-git-rebase#comment17240698_12759390)建议致电 `git diff-files --ignore-submodules`. 这显示了我必须专门 git add 的三个文件，并且成功了。

# windows-installer - 从 VS Setup 项目升级时，WiX 中 Bundle vs Setup 的版本和升级代码

> ID：14410425
> 
> 赞同：7
> 
> 时间：2013-01-18T22:21:55.703
> 
> 标签：windows-installer, visual-studio-2012, wix, wix3.6

我正在将一些东西从 Visual Studio 2008 迁移到 2012。我的一个项目包含一个在 2012 年不再支持的安装项目。我决定在 WiX 3.6 中重建它。我创建了一个 WiX 设置项目来设置我的文件，并创建了另一个 WiX 捆绑项目来将我的先决条件与设置项目捆绑在一起。

现在，如果可能的话，我想让这个安装项目与以前的安装无缝协作。例如，我的机器使用 VS 安装项目在 VS2008 中创建的 setup.exe 在其系统上安装了 1.0 版。现在我已经使用 VS2012 中的 WiX 捆绑项目创建的 setup.msi 编译了 2.0 版。当运行 2.0 msi 版本时，我希望它能够识别已安装相同设置的旧版本并对其进行更新（或重新安装）。

所以我的问题是每个包和安装项目都包含他们自己的升级代码和版本。哪一个应该收到我的 1.0 版设置的 UpgradeCode？当我现在和将来版本时，我会版本其中一个还是两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T16:21:04.200

通过尝试不同的事情，我或多或少地想通了。当引导程序安装时，这就是添加/删除程序菜单中的内容。因此，我认为引导程序的升级代码应该与我的旧包匹配。然后安装程序将立即知道已安装以前的版本，应在继续之前将其卸载。msi 的升级代码应该是另一个唯一代码。然后在每次构建时都应该更新 msi 项目和引导程序项目的版本。

# java - 类 Rational 中的构造函数 Rational 不能应用于给定类型？

> ID：14410426
> 
> 赞同：0
> 
> 时间：2013-01-19T02:04:40.303
> 
> 标签：java, constructor, rational-number, fractions

所以这个程序的要点是创建一个 Rational 类，这样当你运行它时，会出现一个 GUI 输入并询问分子和分母。然后它将返回减少的分数。但我不断收到此错误消息，我不知道为什么。这是到目前为止的程序：

```
import javax.swing.JOptionPane;

public class lab8
{
public static void main (String args[])
{
    String strNbr1 = JOptionPane.showInputDialog("Enter Numerator ");
    String strNbr2 = JOptionPane.showInputDialog("Enter Denominator ");

    int num = Integer.parseInt(strNbr1);
    int den = Integer.parseInt(strNbr2);

    Rational r = new Rational(num,den);
    JOptionPane.showMessageDialog(null,r.getNum()+"/"+r.getDen()+" equals "+r.getDecimal());

    System.exit(0);
}
}

class Rational
{
private int num;
private int den;

public Rational()
{
    num = 0;
    den = 1;
}
public double getNum()
{
    return num;
}

public int getDen()
{
    return den;
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:08:53.483

您正在尝试调用一个不存在的构造函数。您的类构造函数什么都不要求：

```
public Rational() 
```

虽然它应该要求 2 个整数：

```
public Rational(int num, int den){
     this.num = num;
     this.den = den;
} 
```

所以你可以像你试图做的那样把它`num`和它都传递给它`den`

```
Rational r = new Rational(num,den); 
```

# python - 在 pygame 上创建简单的声音

> ID：14410427
> 
> 赞同：1
> 
> 时间：2013-01-19T02:04:51.380
> 
> 标签：python, audio, pygame, midi

我一直试图在 pygame 上获得简单的哔哔声，但找不到确切的方法。我知道我需要创建一个声音数组对象并将其提供给`pygame.sndarray.make_sound(array)`但我如何准确地制作这个数组以及如何播放它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:57:12.603

我没有亲自在 PyGame 中玩过 SoundArray，但我发现了一些教程应该可以帮助你入门。

[http://lists.canonical.org/pipermail/kragen-hacks/2007-November/000465.html](http://lists.canonical.org/pipermail/kragen-hacks/2007-November/000465.html) http://web.media.mit.edu/~nvawter/otherProduct/explanation%20Part%20I.html

# iphone - 我可以在不同的帐户中发布现有应用程序的较新版本并保留应用程序的名称吗？

> ID：14410428
> 
> 赞同：1
> 
> 时间：2013-01-19T02:05:20.310
> 
> 标签：iphone, itunes

我最近在我的苹果**个人**帐户中发布了 iPhone 应用程序的 1.0 版。我希望将该应用程序的较新版本（1.1）发布到新的苹果**公司**帐户。有可能吗？怎么做？如有必要，我准备从我的旧帐户中删除 1.0 版应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T18:19:44.503

是的，您可以，但您必须将您的应用程序转移到您的新帐户：[https ://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/TransferringAndDeletingApps.html](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/TransferringAndDeletingApps.html)

# html - iframe 隐藏容器的样式

> ID：14410429
> 
> 赞同：0
> 
> 时间：2013-01-19T02:05:20.480
> 
> 标签：html, css, iframe, youtube, video-embedding

我正在设计一个网站，它有一个半透明的内容容器，分为两列。我的 CSS：

```
#content {
  width: 80%; margin-left: 10%; margin-top: 25px; margin-bottom: 25px;
  background-color: rgba(256,256,256,.6); box-shadow: 0 0 6px}

#sidebox {
  width: 25%; padding-left: 2.5%; padding-right: 2.5%; float: right; 
  background-color: #FFF}

#main {
  width: 65%; padding-left: 2.5%; padding-right: 2.5%; float: left} 
```

嵌入视频的 HTML：

```
<div id="content">

  <div id="sidebox">...</div>

  <div id="main">
    <div class="post">
      <a name="song" />
      <p class="title">New song!</p>
      <p class="date">Posted January 16, 2013</p>
      <center>
  <iframe width="480" height="360"
     src="http://www.youtube.com/embed/tF7DQBlYQGM"
     frameborder="0" allowfullscreen style="margin-left: -3%" />
      </center>
    </div>
  </div>
</div> 
```

我在边箱中放了一些静态的东西，然后在主 div 上发布新闻。如果我在 main 的 iframe 中嵌入视频，则内容（以及投影）的半透明背景不会呈现。如果您想在 iframe 上覆盖 div，我发现了很多解决方案，但没有任何关于将 iframe 放入 div 容器中来破坏该容器的样式。

目前嵌入视频的网站：http: [//physics.nyu.edu/~dzb212/music_index.html](http://physics.nyu.edu/~dzb212/music_index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:40:11.973

我不是 100% 确定它背后的原因，但是如果您将 display:inline-block 添加到您的内容样式中，它似乎对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T06:24:04.903

试试这个...

html内容：

```
<div id="content">
<p> content div </p>
 <div id="sidebox">...</div>
    <div id="main">
        <div class="post">
        <p> main div </p>
            <a name="song" />
            <p class="title">New song!</p>
            <p class="date">Posted January 16, 2013</p>
            <center>
                <iframe width="480" height="360"
                src="http://www.youtube.com/embed/tF7DQBlYQGM"
                frameborder="0" allowfullscreen style="margin-left: -3%" />
            </center>
    </div>
  </div>
 </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:02:12.520

我注意到我`<a href="blah" />`在 HTML 中使用各种语句引起的一些奇怪行为。我的印象`<[stuff] />`是 和 相同`<[stuff]></[stuff]>`，它只是一个不包含其他元素的方便的简写。但是，我不知道这是否属实，我发现大量文本意外地被移动到`<a>`元素中。因此我改变了

```
<iframe width="480" height="360" src="http://www.youtube.com/embed/tF7DQBlYQGM"
frameborder="0" allowfullscreen style="margin-left: -3%" />` 
```

到

```
<iframe width="480" height="360" src="http://www.youtube.com/embed/tF7DQBlYQGM"
frameborder="0" allowfullscreen style="margin-left: -3%"></iframe> 
```

一切似乎都正确显示。我什至不再需要`display: inline-block`内容样式。

谢谢你的帮助。

# php - 尝试使用 PHP > 致命错误解析 IMAP 电子邮件：在第 0 行的 Unknown 中抛出没有堆栈帧的异常

> ID：14410430
> 
> 赞同：3
> 
> 时间：2013-01-19T02:05:22.120
> 
> 标签：php, email

我正在尝试使用 PHP 解析发送到“parsethis@mysite.com”的电子邮件（我将使用 cronjob，但现在我只是在浏览器中点击 mysite.com/cronJobs/parseMail）。

这是我第一次尝试解析电子邮件..所以我根本不知道如何解决这个问题。

这是我正在使用的代码，在一个网站上找到它，它似乎是我可以使用的东西。（是的，我已经替换了所有的占位符）

```
 $mailbox = imap_open("{mysite.com:143/notls}INBOX", "parsethis@mysite.com", "123password");  //connects to mailbox on your server

        if ($mailbox == false) {
            echo "<p>Error: Can't open mailbox!</p>";
            echo imap_last_error();
        }else{

            //Check number of messages
            $num = imap_num_msg($mailbox);

            //if there is a message in your inbox
            if( $num > 0 ) { //this just reads the most recent email. In order to go through all the emails, you'll have to loop through the number of messages
                $email = imap_fetchheader($mailbox, $num); //get email header

                $lines = explode("\n", $email);

                // data we are looking for
                $from = "";
                $subject = "";
                $to = "";
                $headers = "";
                $splittingheaders = true;

                for ($i=0; $i < count($lines); $i++) {
                    if ($splittingheaders) {
                    // this is a header
                    $headers .= $lines[$i]."\n";

                    // look out for special headers
                        if (preg_match("/^Subject: (.*)/", $lines[$i], $matches)) {
                            $subject = $matches[1];
                        }
                        if (preg_match("/^From: (.*)/", $lines[$i], $matches)) {
                            $from = $matches[1];
                        }
                        if (preg_match("/^To: (.*)/", $lines[$i], $matches)) {
                            $to = $matches[1];
                        }
                    }
                }
                //We can just display the relevant information in our browser, like below or write some method, that will put that information in a database
                echo "FROM: ".$from."<br>";
                echo "TO: ".$to."<br>";
                echo "SUBJECT: ".$subject."<br>";
                echo "BODY: ".imap_qprint(imap_body($mailbox, $num));

                //delete message
                // imap_delete($mailbox,$num);  // not while testing
                // imap_expunge($mailbox);  // not while testing
            }else{
                // echo "No more messages";
            }
        imap_close($mailbox);
    } 
```

问题是：当我击中它时我得到了这个

```
FROM: "K.K.Smith" 
TO: parsethis@mysite.com 
SUBJECT: test subject 
BODY: --50f9f846_140e0f76_3df1 Content-Type: // etc .. with the body of the email unformatted in a continuous string

// INTERESTING > I get the body twice .. doubled.. once as a long unformatted string, and then again with formatting
--50f9f846_140e0f76_3df1 Content-Type: text/html; // etc.. the rest of the body with formatting .. ie my signature is correctly formatted with spacing and line breaks unlike the first body output

/// ***and then this weird error at the end*** 
--50f9f846_140e0f76_3df1-- 
Fatal error: Exception thrown without a stack frame in Unknown on line 0 
```

所以我不知道那是什么意思。我用谷歌搜索，所有结果似乎都表明这是一个“神秘错误”。看起来它即将第三次输出正文（我真的不知道那个奇怪的字符串是什么......也许是一个电子邮件 ID？）.. 但是它在前两次没有窒息的地方窒息了.

..任何人都可以提出任何想法我应该如何前进？

***编辑***

所以我将 parseMail 功能减少到最低限度..

```
public function parseMail(){
    $mailbox = imap_open("{mysite.com:143/notls}INBOX", "parsethis@mysite.com", "123password");  //connects to mailbox on your server
    imap_close($mailbox);
} 
```

当我击中它时我仍然得到错误。想法？

***解决了***

看起来它与 Codeigniter 将 IMAP 函数抛出的错误/警告解释为异常有关。

我的解决方案是把它放在我的 imap_close() 函数之后

```
imap_errors(); 
```

这为我摆脱了错误通知。

[这是我在 Kohana 讨论板上找到我的解决方案的地方](http://forum.kohanaframework.org/discussion/6371/exception-thrown-without-a-stack-frame/p1)

# list - TCL：循环 如何从最内层循环到外面？

> ID：14410431
> 
> 赞同：2
> 
> 时间：2013-01-19T02:05:25.817
> 
> 标签：list, loops, tcl

在下面的代码中，一旦我将 check_access 设为 0，我如何保留该值并点击下面的 if 条件 ($check_root && $check_access) 。Break 只会终止内部循环。但其他循环将按照我的方式继续。

```
 } else {
           set check_access 0
           break
         }
      }
   }
   if {$check_root && $check_access} {
    set result 1
  } else {
    set result 0
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T17:18:57.790

`break`仅跳转到最内层循环的末尾，并且 Tcl 没有`goto`. 但是`return`，除非它在 ​​a`catch`或类似的内部，否则退出一个过程，就像跳到它的末尾一样。因此，如果您将最外层循环设为过程的最后一条命令（如果您的代码是顶级代码，则必须先将其放入过程中才能使用 return），您可以将`return`其用作多断点。只需将循环后的命令移出过程并进入调用者的代码：

```
proc callMe {} {
  foreach ... {
    foreach ... {
      if ... {
        return
      }
    }
  }
  # move this code from here...
}

callMe
# ...to here 
```

另一种方法是进行额外的测试：

```
set done 0
foreach ... {
  foreach ... {
    foreach ... {
      if ... {
        set done 1
        break
      }
    }
    if {$done} {break}
  }
  if {$done} {break}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T13:16:57.793

`break`and`continue`操作只进行一级循环。如果您需要更多，请***考虑重构***，以便您只需`return`. 或者，尝试 Tcl 8.6 中的自定义异常：

```
try {
    foreach a $longList1 {
        foreach b $longList2 {
            if {[someCondition $a $b]} {
                # Custom non-error exception
                return -level 0 -code 123
            }
        }
    }
} on 123 {} {
    # Do nothing; we're out of the loop
} 
```

# android - Android GCM 注册 ID 错误

> ID：14410434
> 
> 赞同：3
> 
> 时间：2013-01-19T02:05:51.907
> 
> 标签：android, registration, google-cloud-messaging

我有一个已经向 GCM 注册的设备。我试过搜索，但我找不到任何类似的问题。大多数用户似乎在让 getRegistrationId 返回非空字符串时遇到问题。关于为什么这会导致错误的任何想法？

```
public class UploadOption extends Activity{
    Intent extras = getIntent();
    String optionid = extras.getStringExtra("KEY_OPTION");
    String duration = extras.getStringExtra("KEY_DURATION");
    String reward = extras.getStringExtra("KEY_REWARD");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.debug_layout);

        final String regId = GCMRegistrar.getRegistrationId(this);
        TextView tvDebug = (TextView) findViewById(R.id.tvDebug);
        tvDebug.setText(regId);

        // Stores option id, php grabs option.
        //new Upload().execute();
    }
} 
```

错误日志如下：

```
01-18 18:02:51.756: D/AndroidRuntime(4478): Shutting down VM
01-18 18:02:51.756: W/dalvikvm(4478): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
01-18 18:02:51.803: E/AndroidRuntime(4478): FATAL EXCEPTION: main
01-18 18:02:51.803: E/AndroidRuntime(4478): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.matt.drapp/com.matt.drapp.UploadOption}: java.lang.NullPointerException
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.os.Looper.loop(Looper.java:130)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread.main(ActivityThread.java:3687)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at java.lang.reflect.Method.invokeNative(Native Method)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at java.lang.reflect.Method.invoke(Method.java:507)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at dalvik.system.NativeStart.main(Native Method)
01-18 18:02:51.803: E/AndroidRuntime(4478): Caused by: java.lang.NullPointerException
01-18 18:02:51.803: E/AndroidRuntime(4478):     at com.matt.drapp.UploadOption.<init>(UploadOption.java:32)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at java.lang.Class.newInstanceImpl(Native Method)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at java.lang.Class.newInstance(Class.java:1409)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-18 18:02:51.803: E/AndroidRuntime(4478):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
01-18 18:02:51.803: E/AndroidRuntime(4478):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T04:59:18.813

问题是由于`Intent`代码。请记住活动仅在之后初始化，`onCreate()`并且您试图在活动初始​​化之前获取 Intent 值。

**将下面的代码放入`onCreate();`**

```
Intent extras = getIntent();
String optionid = extras.getStringExtra("KEY_OPTION");
String duration = extras.getStringExtra("KEY_DURATION");
String reward = extras.getStringExtra("KEY_REWARD"); 
```

它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:05:37.903

您的示例中的哪一行导致 NullPointerException。因为如果只是没有找到 textView，那么这可能会导致整个应用程序崩溃，因为您尝试设置文本并且它是一个空对象。

所以首先，注释掉 textview 的东西，看看它是否仍然有效。如果不是这样，您能否让我们知道您班上的第 32 行是哪一行，因为它显然与此处不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:31:18.670

问题是您的 getRegistratonID 返回 null。这是因为您在您的活动类中调用它，在您实际注册到 GCM 服务器之前，并接收到您的 GCMIntentService 的 onRegistered 回调。如果 getRegistrationID 返回 null，您应该触发 AsyncTask 以调用 GCMRegistrar.register。

[请按照此处的](https://developer.android.com/google/gcm/gs.html)说明进行操作：

# css - 选中的复选框如何更改 div 的 z-index？

> ID：14410435
> 
> 赞同：0
> 
> 时间：2013-01-19T02:06:00.930
> 
> 标签：css, checkbox

我有一个带贝宝按钮的跨度。我必须让这个贝宝按钮只有在用户确认 TOS 后才能按下。为此，我认为用 paypal 按钮覆盖另一个 div，其中未选中复选框、不透明度和 z-index。用户选中复选框，覆盖的 div 得到这样的 z-index，因此带有 paypal 按钮的 span 将在其上方并且可以按下。

我需要类似的东西

**HTML**

```
<div class="with_zindex">
    <input type="checkbox​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​">
<span class="here_is_paypal_button"></span>
</div> 
```

**CSS**

```
.with_zindex{
background-color:#fafafa;
    opacity: .5;
    filter: alpha(opacity=50);
    -moz-opacity: .5;
z-index:1000;
}
.with_zindex + input[type=checkbox]:checked {
z-index:-1000;
} 
```

但这对我不起作用（只有第一个格式，不能通过选中/取消选中复选框来改变）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:42:15.770

我是这样弄的：

**HTML：**

```
<input class="Checkbox1" name="TOS" id="TOS" value="read" type="checkbox";"/> 
```

**JS**

```
var $K2 = jQuery.noConflict();

 $K2(document).ready(function(){

//$K2('#TOS').attr('checked', false);
//$K2('input[type=image]').attr("class", "agbunchecked");
//$K2('input[type=image]').bind("click", giveAllert);

if(!$K2('#TOS').attr('checked')) //Existenzcheck
{
    $K2('input[type=image]').attr("class", "agbunchecked");
    $K2('input[type=image]').bind("click", giveAllert);
}

function giveAllert()
{
    alert("\Pleas check the checkbox!");
    return false;
}

$K2('#TOS').change(function(event){
    if(this.checked) 
    {
        $K2('input[type=image]').attr("class", "agbchecked");
        $K2('input[type=image]').unbind("click");
    }
    else
    {
        $K2('input[type=image]').attr("class", "agbunchecked");
        $K2('input[type=image]').bind("click", giveAllert)
    }
});

  }); 
```

**CSS**

```
.agbunchecked{
background-color:#fafafa;
opacity: .5;
filter: alpha(opacity=50);
-moz-opacity: .5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:15:43.213

### 建议

相反，您最初可以禁用 PayPal 按钮，然后在用户单击复选框后启用它。

### HTML (jQuery 版本)

```
<input type="checkbox" name="terms" 
       onclick="$('#paypal').removeAttr('disabled');" />
<input type="image" name="paypal" id="paypal" disabled="disabled" /> 
```

### HTML (JavaScript 版本)

```
<input type="checkbox" name="terms" 
       onclick="document.getElementById('paypal').removeAttribute('disabled');" />
<input type="image" name="paypal" id="paypal" disabled="disabled" /> 
```

* * *

### 否则，如果您坚持`z-index`：

你需要`position: relative;`为`z-index`工作付出。而且没有负数`z-index`！

```
.with_zindex {
    background-color:#fafafa;
    opacity: .5;
    filter: alpha(opacity=50);
    -moz-opacity: .5;
    position: relative;
    z-index:1000;
}
.with_zindex + input[type=checkbox]:checked {
    position: relative;
    z-index: 0;
} 
```

* * *

### 您需要的答案

### HTML

```
<div class="with_zindex">
    <input type="Checkbox" name="TOS" value="read">
    <span class="catItemExtraFieldsValue">
        <img src="http://gutgeordnet.de/reise/images/epaypal_de.gif">
    </span>
</div> 
```

### CSS

```
.with_zindex {position: relative;}

.with_zindex input[type=checkbox] {
    background-color:#fafafa;
    filter: alpha(opacity=50);
    position: absolute;
    z-index: 50;
    top: 10px;
    left: -35px;
    width: 135px;
    text-align: right;
    vertical-align: top;
    cursor: pointer;
}

.with_zindex input[type=checkbox] + .catItemExtraFieldsValue {
    position: relative;
    opacity: .5;
    -moz-opacity: .5;
    z-index: 45;
}

.with_zindex input[type=checkbox]:after {
    content: 'I accept';
    font-size: 14px;
    vertical-align: top;
    line-height: 1em;
    font-weight: bold;
    font-family: tahoma;
}

.with_zindex input[type=checkbox]:checked {position: static; display: none;}

.with_zindex input[type=checkbox]:checked + .catItemExtraFieldsValue {
    position: static;
    background-color: transparent;
    opacity: 1;
    -moz-opacity: 1;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/35cQz/](http://jsfiddle.net/praveenscience/35cQz/)

# java - 发布到一个aspx站点，并在android应用程序中返回和查看xml

> ID：14410439
> 
> 赞同：1
> 
> 时间：2013-01-19T02:06:21.057
> 
> 标签：java, android

我正在尝试制作一个简单的 android 应用程序。我想向[这个](http://timeplan.uia.no/swsuiagrv/public/no/default.aspx)aspx 站点发布请求。我有一个用户可以从中选择的列表。当用户选择一个列表项时，我想要一个 if 语句将正确的帖子变量输入到站点。我假设我必须使用某种 http post 包。发送帖子后，我想返回站点提供的 xml，并将其显示给用户。

我该怎么办？我似乎找不到任何方法向用户显示结果。而且我不确定这是否是最好的方法。

有没有更简单的方法？最初，我想为用户提供一个简单的 WebView，其中包含指向表单列表中每个项目的唯一链接。但是由于 annyoing .aspx 服务器端处理，我无法创建独立的直接链接。

谁能帮帮我？:)

# javascript - 更新记录时的主干模型和 idAttribute

> ID：14410440
> 
> 赞同：2
> 
> 时间：2013-01-19T02:06:34.367
> 
> 标签：javascript, backbone.js

我正在使用 mongoLab，模型 id 看起来像这样

```
"_id": {
  "$oid": "50f9a0f5e4b007f27f766cf3"
}, 
```

我正在使用 将`idAttribute`模型 ID 设置为，`_id`并且在我尝试更新模型之前一切正常。

因为该`_id`属性存在于模型中，所以当我尝试插入时出现错误。

我需要`_id`从我的属性中删除该属性吗？我假设 Backbone 的魔法会适当地清理属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:51:13.847

您需要删除该`_id`属性。

在 MongoLab REST API 中，id 不是数据负载本身的一部分，但并非所有后端都是如此。Backbone 假设 id 应该存在于有效负载中可能比假设它不应该存在更有意义。

话虽如此，没有真正的*好*方法可以让 Backbone 自动从有效负载中清除 id。如果没有猴子补丁/重写太多代码，最好的选择可能是覆盖`Model#toJSON`，类似于：

```
Backbone.Model.prototype.toJSON = function (options) {
  var attrs = _.clone(this.attributes);
  // In this case you'd have to pass `includeId: true` to `toJSON` when you
  // actually *want* the _id in the output.
  return options && options.includeId ? attrs : _.omit(attrs, '_id');
}; 
```

您还可以进行monkeypatch同步，例如：

```
var sync = Backbone.sync;
Backbone.sync = function (method, model, options) {
  options || (options = {});
  // if options.attrs is present, Backbone will use it over dumping toJSON
  if (!options.attrs) options.attrs = _.omit(model.attributes, '_id');
  return sync.call(Backbone, method, model, options);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:25:13.650

有同样的问题，在 javascript 中 _id 转换为 null .. 必须做类似的事情..

```
 var myModel = Backbone.Model.extend({
   parse: function(response){
     var response = response.whatever;
     response.id = response.null;
     delete response.null;
     return appointment;
     }
  }); 
```

或收藏

```
systems.forEach(function(system){
    console.log(system);
    system.id = system.null;
    delete system.null;
}); 
```

# c - Visual C++ 中未声明的标识符 C 编程

> ID：14410442
> 
> 赞同：4
> 
> 时间：2013-01-19T02:06:37.023
> 
> 标签：c, visual-studio-2010, visual-c++

所以我正在创建一个简单的程序，我通常使用 GNU 编译器。

但是，这次我选择使用 Visual C++ 进行 C 开发。

我已经正确设置了我的项目，更改了设置以使其在 C 中编译。代码非常简单：

```
#include <stdlib.h>
#include <stdio.h>

int main(){

    printf("Hey!");
    int x = 9;
    printf("%d",x);

    return 0;
} 
```

如果我使用 Code::Blocks IDE 和 GNU 编译器编译它，它会起作用，但由于某种原因，它在 Visual C++ 中不起作用。我不断收到这些错误：

```
error C2143: syntax error : missing ';' before 'type'

error C2065: 'x' : undeclared identifier 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T02:09:02.410

VC++ 2010 仅实现 C89/C90，而不是较新的 C 标准，后者允许在函数体内的其他语句之后声明变量。要修复它，请将声明移动`x`到的开头`main`：

```
#include <stdlib.h>
#include <stdio.h>

int main() {
    int x = 9;
    printf("Hey!");
    printf("%d",x);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:14:52.073

将文件扩展名更改为 .cpp

# c - 替换 C 中#define 指令的值

> ID：14410445
> 
> 赞同：1
> 
> 时间：2013-01-19T02:06:52.243
> 
> 标签：c

我想替换指令

```
#define MAX_LINE 15 
```

具有可变值。

例如行为，如果某物（文本）包含 15 行或更多行 #define MAX_LINE 返回 15 否则如果文本包含少于 15 行 #define MAX_LINE 返回行数。

```
for( i = 0; i < MAX_LINE; i++ ) {
   /* print lines in expandable menu window */
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:13:40.430

然后更换它

```
int MAX_LINE = 15; 
```

或者

```
int max_line = 15;
#define MAX_LINE max_line 
```

请记住，这`MAX_LINE`将不再是一个常量，即您将无法在需要常量的任何地方使用它。

基本上，一旦它变成一个变量值，它就不再与预处理器有任何关系。它现在只是一个普通的变量。让它成为一个变量，适当地命名它，然后忘记`#define`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:12:38.410

`#define`s 只需用一些其他文本替换一些文本。例如，您可以使用这个：

```
#define MAX_LINES ((num_lines > 15) ? 15 : num_lines) 
```

然后您可以`MAX_LINES`在某些语句中像以前一样使用。但是，它并非在所有情况下都有效。你可能有这样的代码：

```
const char *lines[MAX_LINES]; 
```

旧的`#define`,`MAX_LINES`是 15，所以它扩展为：

```
const char *lines[15]; 
```

这在任何符合标准的编译器中都应该是有效的。但是，假设您使用了我们的新`#define`. 展开后，它看起来像这样：

```
const char *lines[((num_lines > 15) ? 15 : num_lines)]; 
```

假设这是一个全局声明，那将是无效的。即使它只是一个局部声明，它也只有在编译器支持可变长度数组时才有效。

如果我是你，我会简单地尝试让你想要做的任何事情都能正常工作，而不是使用非常`#define`量`MAX_LINES`表达式；这样会更清楚，并且在使用无效的地方会更明显`MAX_LINES`。

# javascript - openjs grid v2.1 - 可编辑列不起作用

> ID：14410449
> 
> 赞同：0
> 
> 时间：2013-01-19T02:07:07.880
> 
> 标签：javascript, php, mysql

我一直在测试 openjs 网格 v2.1 - 从修改 ajax.php 和 index.php 开始 - 我可以让网格显示数据、删除功能、排序和导航，但我似乎无法进行内联编辑工作，我已经尝试了一切，观看了旧版本的 youtube 视频，搜索了谷歌，尝试了很多小时 - 我被卡住了！

我的表有一个主键“id”

ajax.php

```
<?php
    // connect to db
    mysql_connect("localhost","user","pass");
    mysql_select_db("db");

    // require our class
    require_once("grid.php");

    // load our grid with a table
    $grid = new Grid("phpbb_rivals_players", array(
        "save"=>true,
        "delete"=>true,
        "editing"=>true,
        "where"=>"Console = 'PS3'",
        "select" => 'selectFunction'
    ));

    // drop down function
    // if you have anonymous function support, then you can just put this function in place of
    // 'selectFunction'
    function selectFunction($grid) {
        $selects = array();

        // category select
        $grid->table = "phpbb_rivals_players";
        $selects["id"] = $grid->makeSelect("id","ForumID");

        // active select
        $selects["active"] = array("1"=>"true","0"=>"false");

        // render data          
        $grid->render($selects);
    }

?> 
```

索引.php

```
<!DOCTYPE html>
<html lang="en">
    <head>

        <link rel="stylesheet" href="bootstrap/css/bootstrap.css"/>

        <link rel="stylesheet" href="grid.css" title="openJsGrid"/>
        <!--<link rel="stylesheet" href="jquery-ui/css/smoothness/jquery-ui-1.8.22.custom.css"/>-->
        <script src="jquery.js" type="text/javascript"></script>
        <!--<script src="jquery-ui/js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>-->
        <script src="root.js"></script>
        <script src="grid.js"></script>

        <script type="text/javascript">
            $(function() {

                $(".users").grid({
                    title : "users",
                    page : 1,
                    showPager : true,
                    editing : true,
                    nRowsShowing : 10,
                    width: 800,
                    editing: true,
                    deleting : true
                }).on("loadComplete",function(e) {
                    //console.log("loadComplete", this.instance);
                }).on("cellClick",function(e, $cell) {
                    //console.log("cell",$cell);
                }).on("rowCheck",function(e, $checkbox) {
                    //console.log("rowCheck",$checkbox);
                }).on("rowClick",function(e, $rows) {
                    //console.log("rowClick",$rows);
                });

            });
        </script>
    </head>
    <body>
        <h2>Players</h2>
        <table class="grid users" action="ajax.php">
            <tr>    
                <th col="id" width="50">id</th>
                <th col="ForumID">ForumID</th>
                <th col="GTPSN">GTPSN</th>
                <th col="Position">Position</th>
                <th col="Formation">Formation</th>
            </tr>
        </table>
    </body>
</html> 
```

我希望能够编辑 GTPSN、位置、阵型、控制台等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:17:23.937

开发者很友善地在 github 上回答了我的问题！

在您的表格 html 中，设置 type="text" - 它在原始文档中被省略，现在将被添加。

```
 <table class="grid users" action="ajax.php">
        <tr>    
            <th col="id" width="50">id</th>
            <th col="ForumID">ForumID</th>
            <th col="GTPSN">GTPSN</th>
            <th col="Position">Position</th>
            <th col="Formation">Formation</th>
        </tr>
    </table> 
```

应该

```
 <table class="grid users" action="ajax.php">
        <tr>    
            <th col="id" width="50">id</th>
            <th col="ForumID">ForumID</th>
            <th type="text" col="GTPSN">GTPSN</th>
            <th type="text" col="Position">Position</th>
            <th type="text" col="Formation">Formation</th>
        </tr>
    </table> 
```

向这个伟大工具的开发者致敬。对于任何构建后端管理控制面板的人来说都是极好的补充！

# python - Http 404 NOT FOUND 错误 - Apache Solr

> ID：14410453
> 
> 赞同：0
> 
> 时间：2013-01-19T02:07:58.987
> 
> 标签：python, solr

我正在尝试使用 Apache Solr 抓取一组网页并对其进行索引。为了抓取网页，我在 BeautifulSoup 和 urllib2 的帮助下使用 python。我成功检索了 url 和 html 数据。

现在我正试图让 Solr 通过 solr(http://code.google.com/p/solrpy/) 对它们进行索引。我不断收到未找到的 Http 404 错误。

我没有修改默认的 schema.xml，我使用的是 Apache Solr 附带的示例服务器。

这是我的代码：

```
import sys 
import urllib2
import solr
from bs4 import BeautifulSoup
from lxml import etree
import hashlib
solrUrl = 'http://localhost:8983/solr/'
solrInstance = solr.SolrConnection(solrUrl)
conn = urllib2.urlopen('http://seekingalpha.com/market_currents.xml')   
root = etree.fromstring(conn.read())
links = root.findall(".//link")
counter = 0
for link in links:
    counter=counter+1
    url = link.text 
    url_md5 = hashlib.md5(url).hexdigest()
    conn = urllib2.urlopen(link.text)
    soup = BeautifulSoup(conn.read())
    title_page = soup.html.head.title.string.decode("utf-8")
    print title_page
    try: # Add to the Solr instance
        solrInstance.add(id=str(url_md5),url_s=url,text=str(title_page),title=str(title_page))
    except Exception as inst:
        print "Error adding URL: "+url
        print "\tWith Message: "+str(inst)
    else:
        print "Added Page \""+title+"\" with URL "+url
try:
    solrInstance.commit()
except:
    print "Could not Commit Changes to Solr Instance - check logs"
else:
    print "Success. "+str(counter)+" documents added to index" 
```

这是错误：

```
Error adding URL: http://seekingalpha.com/currents/all
    With Message: HTTP code=404, reason=Not Found 
```

我该如何纠正这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:26:13.887

我自己没有使用过`solrpy`，但是在玩过它之后，看来您必须删除`/`solr URL 中的尾随。将其更改为

`solrUrl = 'http://localhost:8983/solr'`

# python - 在 Apache 上使用 WSGI 为目录设置 Python

> ID：14410455
> 
> 赞同：8
> 
> 时间：2013-01-19T02:08:42.243
> 
> 标签：python, python-2.7, mod-wsgi, wsgi

我正在尝试使用 WSGI 为 Apache 上的特定目录设置 Python，但出现以下错误：

```
mod_wsgi (pid=3857): Target WSGI script '/var/www/test/test.py' does not contain WSGI application 'application'. 
```

我的 test.py 包含：

```
print 'Hello, World!' 
```

我的 wsgi.conf 包含：

```
LoadModule wsgi_module modules/mod_wsgi.so

WSGIPythonHome /usr/local/bin/python2.7

Alias /test/ /var/www/test/test.py

<Directory /var/www/test>
    SetHandler wsgi-script
    Options ExecCGI
    Order deny,allow
        Allow from all
</Directory> 
```

最重要的是，有趣的是，Web 浏览器返回“404 Not Found”错误，但幸运的是，error_log 更有启发性。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T03:00:46.810

您使用 WSGI 就好像它是 CGI（奇怪的是没有标题）。

您需要做的，因为您的直接问题是从[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide调整以下内容](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

这样你就有了`application`礼物。

并来自引用的文档。

> 请注意，mod_wsgi 要求将 WSGI 应用程序入口点称为“应用程序”。如果您想将其命名为其他名称，则需要显式配置 mod_wsgi 以使用其他名称。因此，不要随意更改函数的名称。如果这样做，即使您正确设置了其他所有内容，也不会找到该应用程序。

# mysql - 为什么 mysql_query() 会打印错误？

> ID：14410468
> 
> 赞同：2
> 
> 时间：2013-01-19T02:11:34.533
> 
> 标签：mysql, c, api

我只是从 C 和 MySQL C API 开始。我正在使用 mysql_query() 创建一个表。根据[手册](http://dev.mysql.com/doc/refman/5.0/en/mysql-query.html)，函数用法是`int mysql_query(MYSQL *mysql, const char *stmt_str)`，函数成功返回0，出错返回非零。但是，无论我使用`if (mysql_query())`还是`if ! (mysql_query())`，程序总是打印到标准输出，“错误 0：”。此外，在任何一种情况下，程序都会创建数据库和表。

```
#include <my_global.h>
#include <mysql.h>

int main (int argc, char **argv)
{
    MYSQL *connection;

    const char DATABASE[] = "test";
    const char HOSTNAME[] = "localhost";
    const char USERNAME[] = "root";
    const char PASSWORD[] = "123456";

    connection = mysql_init(NULL);

    if (connection == NULL)
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    if (mysql_real_connect(connection, HOSTNAME, USERNAME, PASSWORD, NULL, 0, NULL, 0) == NULL)
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    if (mysql_query(connection, "DROP DATABASE IF EXISTS test"))
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    if (mysql_query(connection, "CREATE DATABASE test"))
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    if (mysql_select_db(connection, DATABASE))
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    /* The problem that I do not understand is happening in the statement below.
     * It seems that a successful query returns zero, so I should not see "Error 0:"
     */
    if (mysql_query(connection, "CREATE TABLE jobs (id int(11) NOT NULL AUTO_INCREMENT, name varchar(255) NOT NULL, PRIMARY KEY (id), UNIQUE KEY name_index (name)) ENGINE=InnoDB DEFAULT CHARSET=utf8"));
    {
        printf("Error %u: %s\n", mysql_errno(connection), mysql_error(connection));
        exit(1);
    }

    mysql_close(connection);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:54:06.583

你只是放了一个分号**;** 在**if**语句的末尾，所以花括号之间的代码总是被执行！！！

拿走**;** 一切都会按预期进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:12:54.063

这在手册页中并不完全清楚，但我猜该函数的返回代码是错误代码。因此，您必须在变量中捕获该返回值，然后在出现错误时打印该变量的值。

# xcode - Admob 的新 SDK 是否兼容 cocos2d？

> ID：14410470
> 
> 赞同：1
> 
> 时间：2013-01-19T02:12:00.723
> 
> 标签：xcode, cocos2d-iphone, admob, adbannerview

Admob 发布了新的 SDK v6.2.1，在过去的几天里，我一直在尝试实现它，但没有成功。SDK 中的谷歌分析插件 main.m 有问题：

```
Error 1: Stray '@' in program
Error 2: 'autoreleasepool' undeclared (first use in this function)
Error 3: Expected ';' before '{' token

main.m file:

//
// main.m
// CuteAnimals
//
// Copyright 2012 Google, Inc. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[]) {
    @autoreleasepool {
       return UIApplicationMain(argc, argv, nil,
             NSStringFromClass([AppDelegate class]));
    }
} 
```

我已经链接了所有必需的库：

```
AudioToolbox.framework
MessageUI.framework
AVFoundation.framework
StoreKit.framework
iAd.framework
SystemConfiguration.framework
QuartzCore.framework
OpenGLES.framework
OpenAL.framework
UIKit.framework
Foundation.framework
CoreGraphics.framework
libGoogleAdMobAds.a
libGoogleAnalytics.a
libGoogleAnalytics_debug.a 
```

我什至还没有包括或实施 GAdbannerView。该项目甚至不会与包含的 SDK 一起编译。每当我删除包含（DoubleClick、GoogleAnalyticsiOS_2.0beta3、Mediation、Search）的附加组件文件夹时，项目都会编译。但是如果我尝试实现 GADBannerView（没有插件文件夹），则会出现 Mach-O 链接器错误分析插件文件。

```
cocos2d v1.X
Xcode v4.5.2 
```

我在这里缺少什么吗？

*** 编辑 ***
似乎我包含了 SDK 下载中提供的所有内容，其中包括一个示例项目。在仅包含 GAD 类、libGoogleAdMobAds.a、README.txt 和一个附加库 (AdSupport.framework) 之后，它编译得很好。希望有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:44:53.210

I believe `@autoreleasepool` is only valid under ARC. If your project isn't using ARC, you can enable it just for that file with the `-fobjc-arc` compiler flag. (Or, since that `main.m` doesn't really do anything special, stick with the one you've got.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:47:46.527

您可以在 cocos2d 游戏中使用 admob。这是工作代码。

```
@interface MyMainMenu : CCLayer
{
    GADBannerView *mBannerView;
}

@implementation MyMainMenu

-(void)onEnter
{
    [super onEnter];

    [self createAdmobAds];

}

-(void)createAdmobAds
{
    AppController *app =  (AppController*)[[UIApplication sharedApplication] delegate];    
    // Create a view of the standard size at the bottom of the screen.
    // Available AdSize constants are explained in GADAdSize.h.
    mBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerLandscape];

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    mBannerView.adUnitID = MY_BANNER_UNIT_ID;

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.

    mBannerView.rootViewController = app.navController;
    [app.navController.view addSubview:mBannerView];

    // Initiate a generic request to load it with an ad.
    [mBannerView loadRequest:[GADRequest request]];

    CGSize s = [[CCDirector sharedDirector] winSize];

    CGRect frame = mBannerView.frame;
    frame.origin.y = s.height;

    frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);

    mBannerView.frame = frame;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

    frame = mBannerView.frame;
    frame.origin.y = s.height - frame.size.height;
    frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);

    mBannerView.frame = frame;
    [UIView commitAnimations];    

}

-(void)showBannerView
{
    if (mBannerView) 
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGSize s = [[CCDirector sharedDirector] winSize];

             CGRect frame = mBannerView.frame;
             frame.origin.y = s.height - frame.size.height;
             frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);

             mBannerView.frame = frame;
         } 
                         completion:^(BOOL finished)
         {
         }];
    }

}

-(void)hideBannerView
{
    if (mBannerView) 
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGSize s = [[CCDirector sharedDirector] winSize];

             CGRect frame = mBannerView.frame;
             frame.origin.y = frame.origin.y +  frame.size.height;
             frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);
         } 
                         completion:^(BOOL finished)
         {
         }];
    }

}

-(void)dismissAdView
{
    if (mBannerView) 
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGSize s = [[CCDirector sharedDirector] winSize];

             CGRect frame = mBannerView.frame;
             frame.origin.y = frame.origin.y + frame.size.height ;
             frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);
             mBannerView.frame = frame;
         } 
                         completion:^(BOOL finished)
         {
             [mBannerView setDelegate:nil];
             [mBannerView removeFromSuperview];
             mBannerView = nil;

         }];
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T07:43:22.037

似乎我包含了 SDK 下载中提供的所有内容，其中包括一个示例项目。在仅包含 GAD 类、libGoogleAdMobAds.a、README.txt 和一个附加库 (AdSupport.framework) 之后，它编译得很好。希望有帮助。

# python - 如何在python中创建和销毁独立于操作系统的非阻塞子进程？

> ID：14410471
> 
> 赞同：2
> 
> 时间：2013-01-19T02:12:07.600
> 
> 标签：python

*   在 python 脚本中，我想生成一个在同一目录中运行文件的进程
*   我不希望 python 脚本被新进程阻止
*   然后希望能够从脚本中关闭生成的进程。
*   最重要的是，我需要它独立于操作系统。

这样做最好的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-30T17:21:27.820

正如@Keith 建议的那样使用 subprocess 模块，但更具体地说是使用 Popen。例如，在 Windows 上，这会使用记事本打开 myfile.txt，然后在 20 秒后终止它：

```
import subprocess
import time

command = "notepad myfile.txt"
pipe = subprocess.Popen(command, shell=False)
time.sleep(5)
pipe.poll()
print("%s" % pipe.returncode)   #"None" when working fine
time.sleep(5)
pipe.terminate()
pipe.wait()
print("%s" % pipe.returncode)   # 1 after termination 
```

# java - 声明具有两个替代类的接口给出 null

> ID：14410474
> 
> 赞同：0
> 
> 时间：2013-01-19T02:12:15.650
> 
> 标签：java, interface, javabeans

我正在尝试通过名为`IUserDAO.java`. 两个类实现了这个接口：`UserDAO.java`，它使用 List 来管理用户，以及`UserDAOJPA.java`，它使用 entitymanager 来管理数据库中的用户。

问题是，当我声明接口时，它返回`null`. 当我直接打电话时`UserDAO`，它可以工作。

这是我的服务类的代码：

```
@Named(value = "userService")
@Stateless
public class UserService{

    @Inject
    private IUserDAO userDAO; 
//apperantly null. If I declare UserDAO instead, it works

    public UserService() {
        initUsers();
    }

    public void create(User user) {
        userDAO.create(user);
    }

...

    userDAO.create(u1);
    userDAO.create(u2);
    userDAO.create(u3);
    userDAO.create(u4); 
```

我的界面名为`public interface IUserDAO`.

UserDAO 类的开头是这样的：

```
@Alternative
@Stateless
public class UserDAO implements Serializable, IUserDAO {

    private List<User> users;

    public UserDAO() {
        users = new ArrayList();
    } 
```

我的 UserDAOJPA 类的开头是这样的：

```
@Stateless
@Alternative
public class UserDAOJPA implements IUserDAO, Serializable{

    @PersistenceContext
    private EntityManager em;

    public UserDAOJPA() {

    } 
```

我让网站通过文件决定使用哪个类`beans.xml`。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">

       <alternatives>
           <class>dao.UserDAO</class>
       </alternatives>
</beans> 
```

我做错了什么或者我错过了什么？错误消息如下：

```
SEVERE: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer load method
java.lang.RuntimeException: EJB Container initialization error
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:242)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:305)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:108)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at service.userService.initUsers(userService.java:65)
    at service.userService.<init>(userService.java:21)
at service.__EJB31_Generated__KwetterService__Intf____Bean__.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.ejb.containers.BaseContainer.instantiateOptionalEJBLocalBusinessObjectImpl(BaseContainer.java:3887)
    at com.sun.ejb.containers.StatelessSessionContainer.initializeHome(StatelessSessionContainer.java:253)
    at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:167)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
    ... 33 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:34:09.483

显然，上面的代码都是正确的。我清理了 Glassfish 服务器并打了个盹，当我醒来重新启动它时，它几乎可以正常工作。

# bash - 可以在 bash 中生成 ngram 吗？

> ID：14410478
> 
> 赞同：3
> 
> 时间：2013-01-19T02:12:45.793
> 
> 标签：bash

我在 Python、Perl 等中找到了各种 ngram 实现，但我真的很喜欢 bash 脚本中的一些东西。我遇到了“Missing textutils”版本，但它只列出了 ngram，它没有按频率计算它们，这对于使用 ngram 来说是相当重要的——或者至少对我的使用来说是这样。我只想要一个基本的结果列表及其频率，就像这样......

```
17 blue car
14 red car
5  and the
2  brown monkey
1  orange car 
```

任何人都可以发布类似的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T05:50:03.797

是的，ngrams 可以在 bash 中实现。

```
# Usage: ngrams N < FILE
ngrams () { 
  local N=$1
  local line
  set --
  while read line; do
    set -- $* $line
    while [[ -n ${*:$N} ]]; do
      echo ${*:1:$N}
      shift
    done
  done |
  sort | uniq -c
}

$ ngrams 2
Here is some text, and here is
some more text, and here is yet
some more text
  1 Here is
  2 and here
  2 here is
  2 is some
  1 is yet
  1 more text
  1 more text,
  2 some more
  1 some text,
  2 text, and
  1 yet some 
```

注意：上面是一个*函数*，而不是一个*脚本*（也许这个[问题](https://stackoverflow.com/questions/7276476/functions-vs-scripts-unix-bash-programming)有帮助，或者也许还有另一个更好的问题）。这是脚本版本：

```
#!/bin/bash
# Usage: ngrams N < FILE
N=$1
set --
while read line; do
  set -- $* $line
  while [[ -n ${*:$N} ]]; do
    echo ${*:1:$N}
    shift
  done
done |
sort | uniq -c 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T16:42:11.700

这是一个纯 bash 实现。您需要使用支持关联数组的 ba​​sh >= 4.2 版本。

```
#!/usr/bin/env bash

((n=${1:-0})) || exit 1

declare -A ngrams

while read -ra line; do
        for ((i = 0; i < ${#line[@]}; i++)); do
                ((ngrams[${line[@]:i:n}]++))
        done
done 

for i in "${!ngrams[@]}"; do
        printf '%d\t%s\n' "${ngrams[$i]}" "$i"
done 
```

另存为`ngram`并用作`ngram 2 < file`.

# php - 没有 Javascript 的 CSS 框架

> ID：14410481
> 
> 赞同：1
> 
> 时间：2013-01-19T02:12:55.310
> 
> 标签：php, html, css, web, css-frameworks

我需要建立一个网站，但我有不使用 javascript 的具体说明。除此之外，我还必须制作一个适用于 iPhone/移动设备（也没有 javascript）。我可以根据具有一些 PHP 魔法的设备切换样式表，因此它不必是同一个 CSS 文件。

我想知道的是，对于这两种情况，有哪些推荐的 CSS 框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T02:16:31.637

您将使用媒体查询来实现这一点。

[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

基本思想是从移动端进行设计，或“响应式”设计。你应该谷歌搜索以获得更多洞察力。

然后，您可以使用这样的运算符

```
@media only screen and (max-width: 480px){
    #content{
        display:block;
    }
} 
```

例如，定义特定元素如何为每个视图更改。可以通过基本搜索找到大量资源，因此无需在此处详细概述。

您还可以像这样添加特定的样式表：

```
<link rel="stylesheet" media="all and (max-width: 480px)" href="http://foo.bar.com/stylesheet.css" /> 
```

如果要分隔每个视图的样式表。

祝你好运。

如果您有具体问题，请随时提出，我可以更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T03:06:28.427

正如[**凯青**](https://stackoverflow.com/users/461186/kai-qing)所指出的，媒体查询确实是满足您提到的标准所需的全部内容。

如果你想使用 CSS 框架让事情变得更简单，你可以使用[**Bootstrap**](http://getbootstrap.com/)、[**Foundation**](http://foundation.zurb.com/)或任何其他框架，而不需要 JavaScript 部分。

[**下面**](http://jslegers.github.io/responsiveness/)是一个演示如何使用[**Cascade 框架实现**](http://jslegers.github.io/cascadeframework/)[**响应式设计**](https://en.wikipedia.org/wiki/Responsive_web_design)。该演示不使用任何 JavaScript 代码并回退到 IE6 到 IE8 的桌面版本（因为这些浏览器不支持媒体查询）。[](http://jslegers.github.io/cascadeframework/)

# mysql - 防止 MySQL (InnoDB) 上跨 2 个表的重复 ID

> ID：14410482
> 
> 赞同：0
> 
> 时间：2013-01-19T02:12:59.460
> 
> 标签：mysql, foreign-keys, many-to-many

是否可以让下一个生成的行（跨 2 个表）的 ID 是唯一的？

我有 4 张桌子：

*   1 教师
*   1 学生
*   1 项目
*   1 关系

*关系*表有 3 个外键。一个是教师ID，一个是学生ID，另一个是项目ID

由于一个项目可以同时与教师和学生相关，我如何确保新创建的教师或学生不会有其他类型帐户已使用的 ID？

如果我能做到，那么关系表将只有 3 列：ID、project_ID 和 related_to(ID)

如果没有，我将不得不添加第 4 行，指示它所涉及的帐户类型（学生或教师）。

谢谢你的帮助！

关于帐户类型之间的区别：我必须将这种完全相同的情况转换为我的另一个项目，其中前两个表完全不同。这就是为什么我不费心在这里合并学生和教师表的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:20:17.630

您不需要在`student`和`teacher`表之间具有唯一值，因为关系表对每个关系都有单独的字段，因此不存在冲突。

然而，这不是做事的正确方式。您需要两个关系表`teacher_project`和`student_project`. 或者，根据教师和学生之间不同的唯一数据，您可以拥有一个`person`表和一个关系，这可能更接近现实世界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T06:01:07.463

我认为您可以识别老师以1开头，增量2；学生以2开头，递增2。这样奇数代表老师，偶数代表学生，不会发生冲突。

# ios - 尝试将节页脚添加到 UICollectionView 时崩溃

> ID：14410483
> 
> 赞同：1
> 
> 时间：2013-01-19T02:13:03.697
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

我正在尝试将节页脚添加到 UICollectionView 并以我不理解的方式失败。

我正在像这样设置主单元格：

```
[collectionView registerClass:[PickerOpenCell class] forCellWithReuseIdentifier:cellIdentifier];
UINib *cellNib = [UINib nibWithNibName:@"PickerOpenCell" bundle:nil];
[collectionView registerNib:cellNib forCellWithReuseIdentifier:cellIdentifier];

UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.scrollDirection = UICollectionViewScrollDirectionVertical;
flowLayout.itemSize = CGSizeMake(130, 50);

[collectionView setCollectionViewLayout:flowLayout]; 
```

xib 是 UICollectionViewCell 的子类，只包含一个 UILabel。这一切都很好。

现在我想添加节页脚，所以我添加了这个（与上面的代码交错，所以 setCollectionViewLayout 调用仍然是序列中的最后一个）：

```
[collectionView registerClass:[PickerOpenFooter class] forCellWithReuseIdentifier:footerIdentifier];

UINib *footerNib = [UINib nibWithNibName:@"PickerOpenFooter" bundle:nil];
[collectionView registerNib:footerNib forSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:footerIdentifier];

flowLayout.footerReferenceSize = CGSizeMake(130, 2); 
```

这次的 xib 是 UICollectionReusableView 的子类，并包含一个视图（它的意思是部分之间的水平白线）。视图的大小为 130 x 2。

在我添加 footerReferenceSize 行的那一刻，应用程序在 setCollectionViewLayoutLine 上崩溃

由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array”

我不知道这可能是哪个数组，Google 也没有提供任何帮助。有任何想法吗？我一定是忘记连接什么东西了，但我找不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-04T01:48:23.857

我遇到了这个问题。在

```
[collectionView setCollectionViewLayout:flowLayout]; 
```

并使用 lldb 调试器控制台检查 collectionView 是否已经作为 collectionViewLayout 实例属性

```
(lldb) expr collectionView.collectionViewLayout 
```

我猜这不是你所期望的 nil ，但实际上是一个 UICollectionViewFlowLayout 指针。很可能您已在界面构建器中将 Collection View 的 Layout 属性设置为“流动”。

无需实例化另一个流布局，只需使用已经存在的布局即可。

```
UICollectionViewFlowLayout *flowLayout = (UICollectionViewFlowLayout*) collectionView.collectionViewLayout; 
```

这为我解决了这个问题

# python - 在 Python 中使用余弦求解三角形

> ID：14410484
> 
> 赞同：0
> 
> 时间：2013-01-19T02:13:07.090
> 
> 标签：python, geometry, trigonometry, angle

嗨，我是新来的，我不太了解 python 或代码，但我正在尝试，我已经尝试了 2-3 个小时，我正在尝试

“考虑一个边长为 3、7 和 9 的三角形。余弦定律指出，给定三角形的三个边（a、b 和 c）以及边 a 和 b 之间的角度 C：c^2 = b^ 2 +a^2 - 2 * a * b * cos(C) 编写 Python 代码计算三角形的三个角。”

这是家庭作业，这很难！！！！！！！！！！！！！！！这是我到目前为止所做的......

```
 import math

  a_float = 3 
  b_float = 7 
  c_float = 9

  def find_angle_cosine_of_c_float =

 (c_float**2-b_float**2-a_float**2)/(-2*a_float*b_float)

  a = input("enter A: ") 
  b = input("enter B: ") 
  c = input("enter C: ")

  angle_c_float = math.acos(cosine_of_float)

  angle_c_float = angle_c_float*180/math.pi

  assert find_angle_cosine_of_c_float(7, 9, 3)
  assert find_angle_cosine_of_c_float(3, 7, 9) 
  assert find_angle_cosine_of_c_float(9, 3, 7)

  Return angle(angle_c_float) 
```

如果它看起来像一堆废话那是因为它是......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T02:25:52.740

你有一个 python 问题和一个数学问题。

这段代码应该做你想做的事：

```
import math

a = 3 
b = 7 
c = 9

def angle (a, b, c):
    return math.degrees(math.acos((c**2 - b**2 - a**2)/(-2.0 * a * b)))

angA = angle(a,b,c)
angB = angle(b,c,a)
angC = angle(c,a,b)

assert angA + angB + angC == 180.0

print angA
print angB
print angC 
```

解释：你的作业要你计算每个或三个角的角度。这是通过公式完成的，三个角的总和应为 180，就像每个三角形一样。我所做的是创建一个函数，它以度数为单位获取每个角度的余弦（该函数考虑参数的顺序），然​​后创建断言并打印结果。

重要的一点是您输入的数字是整数（3、7、9），并且公式中有除法。这是一个整数除法，因为分母和分子中的所有内容都是整数。所以我曾经`2.0`告诉 Python 这两个是浮点数，其他的都是自动转换的。这有点微妙，你应该注意这一点。

希望这会有所帮助，不要放弃学习 Python 和数学！

# php - PHP 速记 if/else 三元

> ID：14410485
> 
> 赞同：1
> 
> 时间：2013-01-19T02:13:18.647
> 
> 标签：php

我怎样才能使它成为一两行速记三进制？

```
if ($tame == null): 
    echo $tame = '0' . '<br />';
else: 
    echo $tame . '<br />';
endif; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T02:31:49.620

看起来 OP 期望 $tame 是一个整数值。否则他为什么要为 null 写零？

如果是这种情况。这是最短的解决方案。

```
echo (int)$tame.'<br/>'; 
```

这将为 null 或数值回显 0。也没有理由将 $tame 设置为零，因为 PHP 将 null 和零视为相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T02:14:48.373

```
$tame = ($tame == null) ? 0 : $tame;
echo $tame . '<br />'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T02:15:03.020

```
echo $tame == null ? $tame = '0<br />' : $tame.'<br />'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T02:21:07.043

```
echo ($tame == null ? ($tame = 0) : $tame), '<br />'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T02:21:15.593

三元运算符本质上是`if..else`一行中的语句。

```
if (condition) {
    action(a);
} else {
    action(b);
} 
```

变成：

```
action( condition ? a : b ); 
```

你所拥有的是：

```
if ($tame == null) {
    echo $tame = '0' . '<br />';
} else {
    echo $tame . '<br />';
} 
```

可以写成：

```
echo $tame == null ? $tame = '0<br />' : $tame . '<br />'; 
```

然而，这个三元语句相对复杂，因为它`$tame`正在作为语句的一部分进行变异。以这种方式编写的代码更难阅读，因此也难以调试，这使得它更容易出错。如果您以更详细的形式编写代码，总体上会更好：

```
if ($tame == null) {
    $tame = '0';
}
echo $tame . '<br />'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T02:14:57.110

```
echo (is_null($tame)) ? '0<br />' : $tame . '<br />'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-19T02:27:50.597

还有一种方法怎么样:)

```
echo $tame . (!is_null($tame)?:'0'). '<br />'; 
```

如你所见，我省略了中间部分，因为 php 5.3 你可以这样做

三元部分只是需要打印的部分，对于旧的php，您仍然可以这样做

```
echo $tame . (is_null($tame)?'0':''). '<br />'; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-19T02:36:49.330

如果`$tame`为 null 或整数，则可以完全跳过逻辑：

```
echo sprintf("%d<br />", $tame); 
```

正如@mellamokb 所指出的，这假设您并不打算在第二行中分配`"0<br />"`给。`$tame`

# android - Android：从选项列表中选择项目时单击退出屏幕

> ID：14410486
> 
> 赞同：1
> 
> 时间：2013-01-19T02:13:25.640
> 
> 标签：android, ruby, selenium-webdriver

我正在查看 android 设备上的选项列表选项代码如下所示：

```
<div class = "addMode">
 <label for ="activityType">Activity Type</label>
 <div class="dataRow activityType">
  <select id="activityType" class="valid">
   <option value ="1" selected="selected">Appointment</option>
   <option value ="2">Call</option>
   <option value ="3">To-Do</option>
  </select>
 </div>
<div> 
```

起初我尝试了xpath：

```
el = @d.find_elements(:xpath, "//*[@id='activityType']/option")
el.each do |t|
   if t.text() == 'Call' then
      t.click
      break
   end
end 
```

这适用于从弹出菜单中选择“呼叫”活动，但是，一旦选择它，它就会从当前页面退出，并返回到调用页面。

然后我尝试了：

```
el = @d.find_element(:id, "activityType")
el.click 
el_opt = el.find_elements(:tag_name, "option")
el_opt.each.do |t|
   if t.text() == 'Call' then
       t.click
       break
   end
end 
```

这也具有相同的结果，即进行选择，然后退出屏幕

然后是：

```
opt = Selenium::WebDriver::Support::Select.new(@d.find_element(:xpath, "//*[@id='activityType']"))
opt.select_by(:text, "Call") 
```

这也做出了选择，然后退出了页面

然后我想，我也许可以使用 Touch 操作我还是 Ruby 的新手，而且我很可能错误地阅读了 TouchScreen 的 API 我尝试了以下操作：

```
TapObject = Selenium::WebDriver::TouchScreen.new(@d.find_element(:id, "activityType"))
el = @driver.find_element(:id, "activityType")
el_opt = el.find_elements(:tag_name, "option")
el_opt.each do |t|
  if t.text() == "Call" then
      TapObject.single_tap(t)
  end
end 
```

我得到一个未定义的方法“touchSingleTap”错误

有没有人遇到过这个问题，或者知道在移动设备上单击/点击选择而不退出当前页面的方法？

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:36:56.610

看起来这个问题的解决方案非常简单。与其尝试单击弹出列表中的元素，不如使用发送键。

```
el = @driver.find_element(:id, "activityType")
el.send_keys("Call") 
```

谢谢，

杰夫

# .net - App.vshost.exe 在 Visual Studio 2012 中加载解决方案时崩溃

> ID：14410498
> 
> 赞同：0
> 
> 时间：2013-01-19T02:15:00.463
> 
> 标签：.net, visual-studio-2012, vshost.exe

比方说，我完全绝望了，在最后一天半的时间里试图调试这个问题，重要的截止日期即将到来......

我正在使用 C# 开发一个针对 4.0 在 Windows 7 64 位和 Visual Studio 2012 上的项目（因此，安装了 4.5 .NET Framework），截至昨天下午，VSHOST 因错误 0xc000007b 崩溃（应用程序无法正确启动...消息）每次我打开解决方案时（如果在加载时被禁用，则启用调试主机）。这只发生在针对 4.0 的应用程序（但它也发生在 4.0 解决方案更改为 4.5，所以它无助于更改为另一个框架版本，我也不能，因为客户端没有（也不能）有 4.5工作站）。

至于应用程序，它是 WinForms，我从 12 月中旬开始使用 VS2012 有一段时间了，一切都很好，直到昨天。至于电脑，我已经将Win7（Pro，SP1）重新安装到香草，然后它工作了一段时间，现在它又崩溃了。我已经运行了内存测试并且计算机通过了它...

当我创建针对 4.5 的 vanilla 项目 (winforms) 时，一切顺利并且加载了 VSHOST。但是将其更改为4.0，即使是香草也开始崩溃...

如果您偶然发现了相同的问题甚至更好的问题，请找到解决方案，请尝试提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:46:52.633

**我找到了答案。RogueAmoeba Airfoil Instant On 是罪魁祸首。**

RogueAmoeba Airfoil 具有“Instant On”功能，允许将自身连接到应用程序的音频。此功能导致某些 .NET 应用程序（作为 Airfoil 自行管理）无法启动。由于我不知道的原因，但我仍然尝试多次启用和禁用 Instant On，它产生了预期的结果。

# backbone.js - 基于用户组的主干读取/编辑视图

> ID：14410507
> 
> 赞同：1
> 
> 时间：2013-01-19T02:16:23.207
> 
> 标签：backbone.js

我创建了一个简单的主干应用程序，效果很好。现在我需要解决一个问题，我遇到了麻烦。所以我寻求建议。

我需要在每个用户/组的基础上表示我的模型/集合只读或可编辑。

我最初的想法是，创建两个模板（阅读和编辑）及其各自的视图。（伪代码）：

```
var appRouter = Backbone.Router.extend({
  routes: {
       '' : 'schedule',
  }
  schedule: function() {
    this.collection = new Collection();
    this.collection.fetch({success:function(resp) {
                                   if (resp.group == 'allowedToEdit')
                                     myview = new editView(this.collection);
                                   else 
                                     myview = new readView(this.collection);
                                   }});
}); 
```

这种方法最终使我不得不复制模板：

```
<script type="text/template" id="edit-template">
  <div class="myclass">
    <input class="fn" type="text" value="<%= (fn) != '' ? fn : 'default' %>">
  </div>
</script>

<script type="text/template" id="static-template">
  <div class="myclass">
    <div class="fn"><%= fn %></div>
  </div>
</script> 
```

使用内联 javascript 来选择`input`or`div`标记会更好，还是有一个我没有想到的更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T22:42:20.117

这就是我最终做的事情：

我创建了一个用户模型，其中包含用户首选项和布尔值（根据用户权限从数据库返回）是否允许用户编辑。

结果代码是：

```
var appRouter = Backbone.Router.extend({
  routes: {
     '' : 'schedule',
  }
  schedule: function() {
    this.collection = new Collection();
    this.collection.fetch({
      success:function(resp) {
        myview = user.schedule() ? new editView(this.collection)
                                 : new readView(this.collection);
        myview.render();
    }});
 }); 
```

该函数`user.schedule()`只返回与请求的路由关联的布尔值。

后端的权限受组限制 - 因此，如果用户手动更改这些布尔值以访问可编辑页面 - 他们仍然没有在后端操作数据的授权。

此外，就我而言，可编辑/静态视图完全不同，因此我创建了两个单独的模板。

# android - 如何正确将 Eclipse Indigo 升级到 Juno

> ID：14410509
> 
> 赞同：3
> 
> 时间：2013-01-19T02:16:51.723
> 
> 标签：android, eclipse, sdk

我正在尝试将我的 Eclipse Indigo 升级到最新版本 Juno。我已经下载了。但是，我注意到我的 Android SDK 没有安装。有没有办法从 Indigo 版本简单地“恢复”我以前的插件和 Android SDK？此外，它不允许我打开我以前的工作区。有什么简单的方法可以导入我的项目？还是我每次都必须将它们作为新项目导入？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:15:31.923

您可以通过添加 Juno 更新站点（就像您对任何其他插件一样）升级现有安装（无需重新安装），也可以将旧安装中的所有插件轻松导入全新安装：[https：/ /stackoverflow.com/a/11264964/44089](https://stackoverflow.com/a/11264964/44089)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:26:57.407

您最好使用 eclipse 在新的 eclipse 中重新安装 droid sdk；不过，如果您将 SDK 添加为 dropin，只需打开 dropin 目录并将其复制到新版本的 eclipse 的 dropin 目录即可。

如果它像我的 android 构建它在你的插件目录中。我不建议将您的插件库复制到您的新 Eclipse（例如：）`cp -Rv ./eclipse/plugins/*droid* ./newEclipse/plugins > ~/copiedFiles.txt`，因为我不能 100% 确定这种方式可以解决启动问题或 Eclipse 正常运行所需的进一步 xml 配置。

# jquery - 带有 # 故障排除的 Jquery load()

> ID：14410510
> 
> 赞同：1
> 
> 时间：2013-01-19T02:16:58.927
> 
> 标签：jquery

我有一个包含三个输入的页面，color1、color2 和 color3。一旦用户输入十六进制值或颜色名称，我需要在 #mydiv 中加载 script.php ：

```
$("#color1").change(function() {
    $("#mydiv").load("script.php?color1=" + this.value + "&color2=" + color2.value + "&color3=" + color3.value + "");
}); 
```

我面临的问题是 # 导致 Jquery 在 script.php?color1= 处停止，我想知道除了 substring(1) 之外是否有机会绕过这个问题（因为我希望用户继续看到 # in输入）

谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:18:45.543

这些值需要使用正确编码`encodeURIComponent()`。否则字符喜欢`#`或`&`会破坏事物。因此，`this.value`您不会使用`encodeURIComponent(this.value)`.

但是，由于您使用的是 jQuery，因此您有一个更好的方法：`data`参数接受一个对象，在这种情况下，jQuery 负责转义。但是，在这种情况下，它会切换到 POST - 但如果这对您来说不是问题，那么这是最干净的方式：

```
$("#color1").change(function() {
    $("#mydiv").load("script.php", {
        color1: this.value,
        ...
    });
}); 
```

# c# - 将项目保存在列表框中

> ID：14410513
> 
> 赞同：-1
> 
> 时间：2013-01-19T02:18:37.513
> 
> 标签：c#, listbox, save

在我的 C# windows 应用程序中（如果您需要知道，请使用 Visual C# 2012）我需要将内容添加到列表框并保存项目，以便在程序关闭时它们会在下次打开时保留在那里。我宁愿不使用设置来存储信息。

我还需要一些东西。也不能将它们保存到文本文件中。它需要以不能在程序之外进行编辑的方式保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:23:07.873

抱歉，这是不可能的。任何`save`可以被其他程序修改的东西。

您可以对保存的数据进行签名，然后检测到其他人修改了数据，但您不能阻止其他程序读取/更改数据。

**编辑**

DPAPI 可用于加密/解密数据。请参阅[使用 C# 和 SymmetricAlgorithm 进行真正简单的加密](https://stackoverflow.com/questions/9031537/really-simple-encryption-with-c-sharp-and-symmetricalgorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:41:25.473

如果您是唯一使用该程序的人...我的意思是...如果您是唯一知道该程序在做什么的人，则可以将二进制格式的数据保存到二进制文件中。我怀疑查看您文件的人会说“哦，该死的这个目录中有一个 .bin 文件！我必须找到一种方法来发现如何阅读它以及它的内容是什么！”。

只要您保护您的程序及其来源……我怀疑有人会从该内容中得到什么。您将所有数据转换为 Byte[]、压缩、加密并写入文件。再见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:50:43.927

在 Web 服务器上设置 SQL。

将信息保存到您的网络服务器。

他们不能修改远程服务器上的数据，所以我认为数据库是要走的路。

# facebook - 如何获取多个 facebook 用户的共同好友？

> ID：14410516
> 
> 赞同：0
> 
> 时间：2013-01-19T02:18:48.667
> 
> 标签：facebook, api, facebook-graph-api

我有一个大约 35 个 facebook 用户 ID 的列表。我想使用 facebook API 生成一个用户列表，这些用户与我列表中的每个人都是朋友。

我和名单上的每个人都是朋友。

这可能与此[API Explorer 工具有关吗？](https://developers.facebook.com/tools/explorer)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:14:16.833

There is no straightforward way to do this. Your best best is to choose one of them as the center. Find the mutual friends that A (the center) has with B. Now find what A has with C. Toss the ones that don't fit. Now find what A has with D. Toss. Find. Repeat.

You should batch these calls together to save resources.

# asp.net-mvc-3 - MVC3 删除动作名称全部

> ID：14410518
> 
> 赞同：0
> 
> 时间：2013-01-19T02:19:24.887
> 
> 标签：asp.net-mvc-3, if-statement, actionresult

**我在“注册、配置文件和问题”**上的 3 个不同控制器上有 3 个动作名称删除，它们都有动作删除方法。如何从我的注册删除方法中调用**profile-delete 和 questions-delete**。这样，当用户想要删除他们的帐户时，他们所要做的就是继续注册删除，而不是继续注册、个人资料和问题删除方法。我希望在 1 **[HttpPost, ActionName("Delete")]** (registration) 中调用其他 2 ActionName("Delete") 方法，因为我更喜欢人们在一个地方删除所有内容这可能吗？假设每个用户共享一个相同的唯一 ID。我只是用来说明任何帮助的代码中的注释会很棒

**注册-删除下方**

```
 [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed()
    {
        var ss = User.Identity.Name;
        var getid = (from s in db.registration where ss == s.email select s.RegistrationID).FirstOrDefault();
        registration registration = db.registration.Find(getid);
//This delete's the registration
        db.buyers.Remove(registration);

// How can i call-out profile-delete actionname here and questions-delete like
//if (question-delete != null){
// include  ActionResult deleteconfirmed("question-delete" }

        db.SaveChanges();
        return RedirectToAction("logout");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:55:01.167

如果我理解您的问题，您是在要求从当前执行的操作方法中调用其他控制器的操作方法吗？你通常不会那样做。Controller的action方法的第一条规则是：任何action方法都不能超过10行代码。基本上，动作方法实际上应该是一种简单的方法来收集视图，或在您的域中调用动作并返回。

换句话说，SRP 模式： [http ://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/](http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/)

相反，您将为这个重复的代码组织您的域逻辑（您所描述的被认为是域模型逻辑，而不是控制器逻辑），例如在此处删除问题，但是当用户被删除时，也会删除问题等。

```
// an example of IOC injection of your IUserService
private IUserService
public RegistrationController(IUserService userService)
{
    _userService = userService;
}

[HttpPost]
public ActionResult Delete()
{

    // insert modelstate and/or validation logic
    //
    if (User.Identity.IsAuthenticated == false)
    {
        return RedirectToAction("index", "Home");
    }

    // good practice to never bubble up exceptions to users
    try 
    {
        if (_userService.DeleteByEmail(User.Identity.Name) == false)
        {
            ModalState.AddModelError(String.Empty, "Not allowed?");
            return View();
        }

        // save it all in a single atomic operation here to keep it all in
        // a single Transaction Scope that will rollback properly if there is
        // an error.
        //
        db.SaveChanges();
    }
    catch (Exception)
    {
        ModalState.AddModelError(String.Empty, "An error occurred...");
        return View();
    }

    // all ok!
    return RedirectToAction("logout");
} 
```

注意这个动作方法是多么干净。它只是用一两行代码和一大堆退出路径来处理用户在许多不同情况下的体验。

现在，您的域逻辑可以封装到服务（或提供程序等）中：

```
namespace MyWebsite.Models
{
public class UserService : IUserService
{
    // Todo: convert to some IoC lovin'
    //

    public Boolean DeleteByEmail(String email)
    {

        var user = 
            (from user in db.Registrations 
             where 
                 user.Email == email
             select s).FirstOrDefault();

         if (user == null)
             return false;

         // call into other services to delete them
         ProfileDataService.DeleteByUserId(user.UserId);
         QuestionsService.DeleteByUserId(user.UserId);

         // finally, delete the user
         db.Registrations.Delete(user);

         // note, I am NOT calling db.SaveChanges() here.  Look
         // back at the controller method for the atomic operation.
         //

         return true;
    }
}
} 
```

这可以通过 100 种不同的方式实现。关键是将逻辑抽象到一个公共代码库或“域”中。在此示例中，我选择将该逻辑放在模型下的当前网站名称空间中作为快捷方式。

至于`Delete()`其他控制器上的其他方法，您只需调用 a`QuestionsService.DeleteByUserId()`并`ProfileDataService.DeleteByUserId()`处理这些方法。您甚至可以跨域共享这些服务，如我上面所示。

# android - Google Drive API 不能很好地与 ProGuard (NPE) 配合使用

> ID：14410520
> 
> 赞同：26
> 
> 时间：2013-01-19T02:20:46.147
> 
> 标签：android, google-api, google-drive-api, proguard, google-api-java-client

目前，我的经验是，一段使用 Google Drive API 的代码**在不引入 ProGuard 的情况下运行良好。**

但是，在引入 ProGuard 之后，我收到了以下运行时错误。

```
 at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.NullPointerException
    at com.google.api.client.util.Types.getActualParameterAtPosition(Types.java:329)
    at com.google.api.client.util.Types.getIterableParameter(Types.java:309)
    at com.google.api.client.json.JsonParser.parseValue(JsonParser.java:546)
    at com.google.api.client.json.JsonParser.parse(JsonParser.java:350)
    at com.google.api.client.json.JsonParser.parseValue(JsonParser.java:586)
    at com.google.api.client.json.JsonParser.parse(JsonParser.java:289)
    at com.google.api.client.json.JsonObjectParser.parseAndClose(JsonObjectParser.java:76)
    at com.google.api.client.json.JsonObjectParser.parseAndClose(JsonObjectParser.java:71)
    at com.google.api.client.http.HttpResponse.parseAs(HttpResponse.java:491)
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:456)
    at com.jstock.c.b.a(CloudFile.java:136) 
```

请注意，崩溃发生在我的代码中（如果我使用 mapping.txt 进行回溯，则为 com.jstock.cba）

```
// request is Files.List
FileList files = request.execute(); 
```

在我的 proguard 中，我认为有以下 2 个关键指令，能够防止崩溃发生：**我告诉 ProGuard 永远不要接触 jackson 和 Google 库。**

```
-keep class org.codehaus.** { *; }
-keep class com.google.** { *; }
-keep interface org.codehaus.** { *; }
-keep interface com.google.** { *; } 
```

但这不起作用。NPE 仍然发生在[Types.java](http://grepcode.com/file/repo1.maven.org/maven2/com.google.http-client/google-http-client/1.7.0-beta/com/google/api/client/util/Types.java#329)

请注意，我有另一个尝试是，我认为**混淆**过程会导致 NPE 发生。因此，我尝试使用`-dontobfuscate`. 但这一次，我将无法生成 APK 文件，并收到一条流行的错误消息：**Conversion to Dalvik format failed with error 1**

这是导致 Google Drive API 出现 NPE 的 proguard 配置。

```
-optimizationpasses 1
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

# Comment out the following line, will cause popular "Conversion to Dalvik format failed with error 1"
##-dontobfuscate

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-dontwarn javax.swing.**
-dontwarn java.awt.**
-dontwarn org.jasypt.encryption.pbe.**
-dontwarn java.beans.**
-dontwarn org.joda.time.**
-dontwarn com.google.android.gms.**
-dontwarn org.w3c.dom.bootstrap.**
-dontwarn com.ibm.icu.text.**
-dontwarn demo.**

# Hold onto the mapping.text file, it can be used to unobfuscate stack traces in the developer console using the retrace tool
-printmapping mapping.txt

# Keep line numbers so they appear in the stack trace of the develeper console 
-keepattributes *Annotation*,EnclosingMethod,SourceFile,LineNumberTable

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

# https://sourceforge.net/p/proguard/discussion/182456/thread/e4d73acf
-keep class org.codehaus.** { *; }
-keep class com.google.** { *; }
-keep interface org.codehaus.** { *; }
-keep interface com.google.** { *; }

-assumenosideeffects class android.util.Log {
  public static int d(...);
  public static int i(...);
  public static int e(...);
  public static int v(...);  
}

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** i(...);
}

-keepclasseswithmembers class com.google.common.base.internal.Finalizer{
    <methods>;
} 
```

还有什么我可以尝试的吗？

我不确定这可能是由库的组合引起的。（虽然在没有引入 ProGuard 的情况下运行得很好）

![在此处输入图像描述](../Images/0cf6c617fb198f60d7d43a09175e8d53.png)

如果我查看 NPE 崩溃位置 (Types.getActualParameterAtPosition(Types.java:329))

```
private static Type getActualParameterAtPosition(Type type, Class<?> superClass, int position) {
    ParameterizedType parameterizedType = Types.getSuperParameterizedType(type, superClass);
    Type valueType = parameterizedType.getActualTypeArguments()[position];
    // this is normally a type variable, except in the case where the class of iterableType is
    // superClass, e.g. Iterable<String>
    if (valueType instanceof TypeVariable<?>) {
      Type resolve = Types.resolveTypeVariable(Arrays.asList(type), (TypeVariable<?>) valueType);
      if (resolve != null) {
        return resolve;
      }
    }
    return valueType;
} 
```

我怀疑`Types.getSuperParameterizedType`回归`null`。所以，我进一步研究`Types.getSuperParameterizedType`.

```
public static ParameterizedType getSuperParameterizedType(Type type, Class<?> superClass) {
    if (type instanceof Class<?> || type instanceof ParameterizedType) {
    outer: while (type != null && type != Object.class) {
     Class<?> rawType;
     if (type instanceof Class<?>) {
       // type is a class
       rawType = (Class<?>) type;
     } else {
       // current is a parameterized type
       ParameterizedType parameterizedType = (ParameterizedType) type;
       rawType = getRawClass(parameterizedType);
       // check if found Collection
       if (rawType == superClass) {
         // return the actual collection parameter
         return parameterizedType;
       }
       if (superClass.isInterface()) {
         for (Type interfaceType : rawType.getGenericInterfaces()) {
           // interface type is class or parameterized type
           Class<?> interfaceClass =
               interfaceType instanceof Class<?> ? (Class<?>) interfaceType : getRawClass(
                   (ParameterizedType) interfaceType);
           if (superClass.isAssignableFrom(interfaceClass)) {
             type = interfaceType;
             continue outer;
           }
         }
       }
     }
     // move on to the super class
     type = rawType.getGenericSuperclass();
    }
    }
    return null;
} 
```

**经过ProGuard处理后可能导致`getSuperParameterizedType`返回的可能根本原因是什么？`null`**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T15:13:33.680

以下组合对我有用：

```
-keep class com.google.** { *;}
-keep interface com.google.** { *;}
-dontwarn com.google.**

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-keepattributes *Annotation*,Signature
-keep class * extends com.google.api.client.json.GenericJson {
*;
}
-keep class com.google.api.services.drive.** {
*;
} 
```

这为最近的 Google Drive 项目提供了一个有效的 proguard 兼容解决方案。

但是，不能将此解决方案全部归功于此解决方案，最初在[此处的此链接中找到](http://softwyer.wordpress.com/2012/10/20/android-google-drive-sdk-and-proguard/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T19:43:17.943

正确的组合是：

-keepattributes Signature,RuntimeVisibleAnnotations,AnnotationDefault

谷歌为项目 google-api-java-client 准备了 proguard 配置

[https://github.com/google/google-api-java-client/blob/57fe35766cbba0a0d5a9a296be81468d730a29f8/google-api-client-assembly/proguard-google-api-client.txt](https://github.com/google/google-api-java-client/blob/57fe35766cbba0a0d5a9a296be81468d730a29f8/google-api-client-assembly/proguard-google-api-client.txt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:47:07.490

首先——保留一个班级并不意味着不去碰它。意思是不要更改其名称，并以此作为判断其他类是否不被引用&是否可以删除的依据。

优化仍然存在，这可能是您的问题。我要做的下一步是尝试：-dontoptimize

这应该会导致您的其他优化被忽略。

顺便说一句，不确定您使用的是什么版本的 SDK。我正在使用 15，20 是最新的，并且使用该项目创建了一个 proguard-project.txt 文件。它使用的优化选项是：

```
-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/* 
```

如果关闭优化让它运行，也许关闭 SDK 所做的所有优化（这就是！所做的），也将允许您进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:44:25.610

GooglePlayServices 最近几乎没有更新。我不喜欢新的 API。我有同样的问题。

我无法使用 proguard 编译已签名的应用程序。Google 的 Proguard 模板对我不起作用。

我将这四行添加到我的 proguard 配置中，它正在工作：

```
-dontwarn com.google.android.gms.**
-keep interface com.google.** { *; }
-keep class * extends com.google.api.client.json.GenericJson {*;}
-keep class com.google.api.services.drive.** {*;} 
```

这很奇怪。以前版本的 google-api-services-drive-v2 编译没有任何问题。

我目前正在使用最新版本：google-api-services-drive-v2-rev47-1.12.0-beta.jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T23:52:45.523

Types.getSuperParameterizedType 方法依赖于有关泛型的信息。泛型在 Java 中被删除。编译器只将它们添加为注解属性，JVM 会忽略它们，ProGuard 会丢弃它们，除非你告诉它不要这样做。所以这可能会有所帮助：

```
-keepattributes *Annotation* 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-22T20:45:55.520

您的代码是否使用任何实现 Serializable 的东西？所有这些也需要排除。

# php - php: 是否可以在不将 zip 写入磁盘的情况下从 URL 中提取 zip 文件？

> ID：14410529
> 
> 赞同：1
> 
> 时间：2013-01-19T02:22:53.657
> 
> 标签：php, url, zip, extract, unzip

我从 URL 中获取 zip 文件，然后我将 zip 复制到磁盘上，只是为了从磁盘中获取并解压缩它。我想消除必须将 zip 写入磁盘以优化它的步骤。这是我的代码...

```
$url_zip = 'http://returns_my_zip_file';
$new_file = '/zip_name.zip';
if (!copy($url_zip, $new_file)) { //<--- I want to eliminate this step.
    echo "\n\nFailed to copy file...\n\n";
}

$zip = new ZipArchive;
if(is_readable($new_file)) {
    $zip = new ZipArchive;
    if ($zip->open($new_file) === TRUE) {
        $zip->extractTo('ExtractToThisFolder');
        $zip->close();
        echo 'ok';
    } else {
        echo 'failed';
    }
} 
```

提前致谢。

# java - MongoDB 从 BasicDBObject (Java) 中提取值

> ID：14410531
> 
> 赞同：7
> 
> 时间：2013-01-19T02:23:23.303
> 
> 标签：java, mongodb, nosql

我无法从 MongoDB 中的查询文档中检索值。

例如，文档结构如下：

```
 {
        "_id": {
            "$oid": "50f93b74f9eccc540b302462"
        },
       "response": {
            "result": {
                "code": "1000",
                "msg": "Command completed successfully"
            },
            "resData": {
                "domain:infData": {
                    "domain:name": "ritesh.com",
                    "domain:crDate": "2007-06-15T12:02:36.0000Z",
                    "domain:exDate": "2013-06-15T12:02:36.0000Z"
                }
            }
        }
    } 
```

查询代码是：

```
 DBCollection collection = db.getCollection("domains");

    BasicDBObject p = new BasicDBObject("response.resData.domain:infData.domain:name", "ritesh.com");
    DBCursor c = collection.find(p);

    while(c.hasNext()) {
        DBObject obj = c.next();
        Object value = obj.get("response.resData.domain:infData.domain:name");
    } 
```

它可以很好地查询并获取文档，但我似乎无法弄清楚如何从 DBObject（或自 c. next() 返回类型 BasicDBObject)。

我可以一次获取一个对象，例如：

```
 ((DBObject)obj.get("response")).get("resData").... 
```

但这似乎很麻烦。

我想既然你可以在 BasicDBObject 中放置（）一个嵌套字段值，例如：

```
 basicDBObject.put("response.resData.domain:infData.domain:name", "ritesh.com"); 
```

我可以类似地使用 get() 使用相同类型的键从 BasicDBObject 结果中获取。就像我试图在上面的代码中做的那样：

```
 Object value = obj.get("response.resData.domain:infData.domain:name"); 
```

但那是返回一个空值。

这可能很简单，但我似乎无法弄清楚。而且我在网上检查过的所有示例都只从结果中获取未嵌套的值。喜欢

```
 doc.get("name"); 
```

而不是类似的东西：

```
 doc.get("name.lastname.clanname"); 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T02:57:10.660

没有办法像使用 Java 驱动程序那样链接属性名称（`get`s 肯定，并且根据[this](https://jira.mongodb.org/browse/JAVA-151)，`put`也不应该工作）。

您需要按照您的建议一次获取一个对象。

```
((DBObject)obj.get("response")).get("resData") 
```

请参阅[此处](https://jira.mongodb.org/browse/JAVA-260?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)以了解可能使您的语法可能工作的潜在未来功能（尽管可能使用新方法名称）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-12T11:54:15.943

我遇到了同样的问题，我写了一个小函数来获取链式属性。

```
private Object getFieldFromCursor(DBObject o, String fieldName) {

    final String[] fieldParts = StringUtils.split(fieldName, '.');

    int i = 1;
    Object val = o.get(fieldParts[0]);

    while(i < fieldParts.length && val instanceof DBObject) {
        val = ((DBObject)val).get(fieldParts[i]);
        i++;
    }

    return val;
} 
```

我希望它有所帮助。

# websocket - Cloud Foundry 是否支持 Web 套接字？

> ID：14410539
> 
> 赞同：2
> 
> 时间：2013-01-19T02:24:44.540
> 
> 标签：websocket, playframework-2.0, cloud-foundry

我已经将 play framework 2.0 的示例 websock-chat 应用程序部署到 cloud Foundry 上，但是加入聊天室后的部分没有显示任何内容。我想知道这是否是 websocket 支持问题，因为该应用程序在本地运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T16:41:35.327

是的，CloudFloundry 支持 Websockets，这要归功于它的[gorouter 组件](http://docs.run.pivotal.io/concepts/architecture/router.html)。

PWS 实例上也提供支持，在`wss:`端口上`4443`，[请参阅官方文档](http://docs.run.pivotal.io/release-notes/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T02:54:17.163

根据[https://cloudfoundry.atlassian.net/browse/CF-45](https://cloudfoundry.atlassian.net/browse/CF-45)回答我自己的问题，答案是否定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T08:13:38.177

现在随着 CFv2 的最新更新，它支持 websockets（参见gorouter 代码中的[这一行](https://github.com/cloudfoundry/gorouter/blob/46f240c7af52eb45f0c0011cd69c1d2be2c8feee/proxy.go#L189)，它负责将请求重定向到您的应用程序）。我在 Node.js 中编写了一个概念验证应用程序（完整示例，请参见[我的答案](https://stackoverflow.com/a/17878010/1948038)），它适用于我的本地 CF 部署，因此我希望它也适用于其他框架和语言。

但是，它尚未在[https://console.run.pivotal.io/](https://console.run.pivotal.io/)上运行，因为我认为他们没有在每次提交时更新 CF 的部署。IE 10 和 Firefox 也存在一些问题（可能是 CF 问题），但在 Chrome 中它可以按预期工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-29T16:19:24.813

如果它的 websockets ，那么我建议你必须去 Jelastic ，它简单可靠。 [http://jelastic.com/docs/websockets](http://jelastic.com/docs/websockets)

# php - 带有 PHP 的 cURL 的 GitHub API 没有得到正确的状态响应

> ID：14410543
> 
> 赞同：2
> 
> 时间：2013-01-19T02:26:34.473
> 
> 标签：php, curl, github, github-api

我正在使用 WordPress 的 HTTP API，它有一个 cURL 的包装器（我假设它可以完成 PHP 的 cURL 所做的所有事情）。

尝试检查以下标头`If-None-Match`并`If-Modified-Since`通过 API 应返回：

```
Status: 304 Not Modified 
```

相反，我得到了一个`Status: 200 OK`

从命令行测试 curl 工作正常并返回正确的状态，这有效：

```
curl -i https://api.github.com/users/wycks -H 'If-None-Match: "7efeb402e491989a4f37d8d82aae8946"' 
```

在 PHP 中输​​入相同的 ETag`'If-None-Match' => '7efeb402e491989a4f37d8d82aae8946'`不起作用。

这是我对 API 的 PHP 请求：

```
array
  'method' => string 'HEAD' (length=4)
  'timeout' => int 5
  'redirection' => int 0
  'httpversion' => string '1.0' (length=3)
  'user-agent' => string 'WordPress/3.5; http://dev.local/Foo15' (length=37)
  'blocking' => boolean true
  'headers' => 
    array
      'Accept-Encoding' => string 'deflate;q=1.0, compress;q=0.5' (length=29)
  'cookies' => 
    array
      empty
  'body' => null
  'compress' => boolean false
  'decompress' => boolean true
  'sslverify' => boolean false
  'stream' => boolean false
  'filename' => null
  'If-None-Match' => string '7efeb402e491989a4f37d8d82aae8946' (length=32)
  'Cache-Control' => string 'must-revalidate' (length=15)
  '_redirection' => int 0
  'ssl' => boolean true
  'local' => boolean false
boolean true 
```

和*错误*的反应：

```
response' => 
    array
      'code' => int 200
      'message' => string 'OK' (length=2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:06:31.047

我不确定根本原因，但从一些戳中你需要在字符串中引用 etag 值：

```
'If-None-Match' => '"7efeb402e491989a4f37d8d82aae8946"' 
```

# r - lapply 失败，但函数对于每个单独的输入参数都可以正常工作

> ID：14410551
> 
> 赞同：-2
> 
> 时间：2013-01-19T02:29:38.750
> 
> 标签：r

非常感谢您提供任何建议或提示。我正在使用数据框。简化编码如下：`

```
f<-funtion(name){
    x<-tapply(name$a,list(name$b,name$c),sum)
1)  y<-dataset[[deparse(substitute(name))]]
    #where dataset is an already existed list object with names the same as the 
    #function argument. I would like to avoid inputting two arguments.
    z<-vector("list",n) #where n is also defined already
2)  for (i in 1:n){z[[i]]<-x[y[[i]],i]}
    ...
}
lapply(list_names,f) 
```

`

警告消息是： In is.na(x) : is.na() 应用于“NULL”类型的非（列表或向量）

并且输出不正确。我尝试调试，发现冲突可能在第 1) 和 2) 行。但是，当我尝试 f(name) 时，它非常好并且输出是正确的。我想问题出在 lapply 上，我搜索了一段时间，但没有找到重点。有任何想法吗？非常感谢！

## 数据结构

谢谢乔兰。再次检查我发现问题可能不在我所描述的范围内。我按如下方式生成完整代码，您可以复制粘贴以查看错误。

```
n<-4
name1<-data.frame(a=rep(0.1,20),b=rep(1:10,each=2),c=rep(1:n,each=5),
                  d=rep(c("a1","a2","a3","a4","a5","a6","a7","a8","a9","a91"),each=2))
name2<-data.frame(a=rep(0.2,20),b=rep(1:10,each=2),c=rep(1:n,each=5),
                  d=rep(c("a1","a2","a3","a4","a5","a6","a7","a8","a9","a91"),each=2))
name3<-data.frame(a=rep(0.3,20),b=rep(1:10,each=2),c=rep(1:n,each=5),
                  d=rep(c("a1","a2","a3","a4","a5","a6","a7","a8","a9","a91"),each=2))
#d is the name for the observations. d corresponds to b.
dataset<-vector("list",3)
names(dataset)<-c("name1","name2","name3")
dataset[[1]]<-list(c(1,2),c(1,2,3,4),c(1,2,3,4,5,10),c(4,5,8))
dataset[[2]]<-list(c(1,2,3,5),c(1,2),c(1,2,10),c(2,3,4,5,8,10))
dataset[[3]]<-list(c(3,5,8,10),c(1,2,5,7),c(1,2,3,4,5),c(2,3,4,6,9))
f<-function(name){
  x<-tapply(name$a,list(name$b,name$c),sum)
  rownames(x)<-sort(unique(name$d)) #the row names for 
  y<-dataset[[deparse(substitute(name))]]
  z<-vector("list",n)
  for (i in 1:n){
    z[[i]]<-x[y[[i]],i]}
  nn<-length(unique(unlist(sapply(z,names)))) # the number of names appeared
  names_<-sort(unique(unlist(sapply(z,names)))) # the names appeared add to the matrix 
                                                # below
  m<-matrix(,nrow=nn,ncol=n);rownames(m)<-names_
  index<-vector("list",n)
  for (i in 1:n){
    index[[i]]<-match(names(z[[i]]),names_)
    m[index[[i]],i]<-z[[i]]
  }
  return(m)
}
list_names<-vector("list",3)
list_names[[1]]<-name1;list_names[[2]]<-name2;list_names[[3]]<-name3
names(list_names)<-c("name1","name2","name3")
lapply(list_names,f)
f(name1) 
```

lapply(list_names,f) 会失败，但 f(name1) 会产生我想要的矩阵。再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T07:48:49.807

## 为什么它不起作用

问题是调用堆栈在两种情况下看起来都不一样。中`lapply`，看起来像

```
[[1]]
lapply(list_names, f) # lapply(X = list_names, FUN = f)

[[2]]
FUN(X[[1L]], ...) 
```

在被评估的表达式中，`f`被调用`FUN`并且它的参数`name`被调用`X[[1L]]`。

当你`f`直接调用时，堆栈就是简单的

```
[[1]]
f(name1) # f(name = name1) 
```

通常这无关紧要，但`substitute`它确实如此，因为它`substitute`关心函数参数的名称，而不是它的值。当你到达

```
y<-dataset[[deparse(substitute(name))]] 
```

在里面`lapply`它正在寻找`dataset`named中的元素`X[[1L]]`，并且没有一个，所以`y`绑定到`NULL`.

## 一种让它工作的方法

处理这个问题的最简单方法可能是`f`对字符串进行操作并传递`names(list_names)`给 lapply。这可以通过更改 to 的开头来相当容易地`f`完成

```
f<-function(name){
  passed.name <- name
  name <- list_names[[name]]
  x<-tapply(name$a,list(name$b,name$c),sum)
  rownames(x)<-sort(unique(name$d)) #the row names for 
  y<-dataset[[passed.name]]
# the rest of f... 
```

并更改`lapply(list_names, f)`为`lapply(names(list_names),f)`. 这应该以几乎最小的修改为您提供您想要的东西，但您也可以考虑重命名您的一些变量，这样这个词`name`就不会用于这么多不同的东西——函数`names`、参数`f`以及包含的所有各种变量`name`.

# javascript - 索引 1 处的绑定值为 null

> ID：14410553
> 
> 赞同：0
> 
> 时间：2013-01-19T02:30:08.700
> 
> 标签：javascript, sqlite, mobile, titanium

我在使用钛的应用程序中使用 sqlite，并且在查询中使用变量。我的问题是，当我不使用变量时，它给了我完美的结果。没有变量的查询是

```
 "select * from IQ where Quote_id =1 " 
```

当我使用变量时，它给了我上面提到的错误。使用变量的查询如下，Ti.App.index 的值可能在 0-47 之间

```
 "select * from IQ where Quote_id =? ",Ti.App.index 
```

有人可以帮我做错什么吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:57:40.883

使用这个语法

```
"select * from IQ where Quote_id ='"+Ti.App.index+"' " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:07:18.013

你确定 Ti.App.index 不为空吗？这种类型的错误通常意味着输入值为空。

这会起作用吗：

```
"select * from IQ where Quote_id =? ",new String[] { Ti.App.index } 
```

或者

```
"select * from IQ where Quote_id = " + Ti.App.index 
```

祝你好运。

# java - 我输入的分数总是返回 0？

> ID：14410556
> 
> 赞同：0
> 
> 时间：2013-01-19T02:30:41.110
> 
> 标签：java, class, rational-number

> **可能重复：**
> [Java 中的除法总是导致零 (0)？](https://stackoverflow.com/questions/10455677/division-in-java-always-results-in-zero-0)

所以我正在编写这个程序，我认为它很好。GUI 窗口弹出，我输入了一个分子和一个恶魔。但是不管我输入什么，它总是说它等于0。所以如果我把2作为分子，3作为恶魔，输出将是2/3 = 0。有什么问题？

我将“int dec”更改为“double dec”，如下所示，并将“this.dec = dec”放在 Rational 类下，但这并没有解决任何问题

```
import javax.swing.JOptionPane;

public class lab8
{
public static void main (String args[])
{
    String strNbr1 = JOptionPane.showInputDialog("Enter Numerator ");
    String strNbr2 = JOptionPane.showInputDialog("Enter Denominator ");

    int num = Integer.parseInt(strNbr1);
    int den = Integer.parseInt(strNbr2);

    Rational r = new Rational(num,den);
    JOptionPane.showMessageDialog(null,r.getNum()+"/"+r.getDen()+" equals "+r.getDecimal());

    System.exit(0);
}
}

class Rational
{
private int num;
private int den;
private double dec;

public Rational(int num, int den){
 this.num = num;
 this.den = den;
 this.dec = dec;
}
public int getNum()
{
    return num;
}

public int getDen()
{
    return den;
}

public double getDecimal()
{
    return dec;
}

private int getGCF(int n1,int n2)
{
    int rem = 0;
    int gcf = 0;
    do
    {
        rem = n1 % n2;
        if (rem == 0)
            gcf = n2;
        else
        {
            n1 = n2;
            n2 = rem;
        }
    }
    while (rem != 0);
    return gcf;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:32:16.403

在 class`Rational`中，`dec`未初始化，因此默认为 0。因此，当您稍后调用 时`getDecimal()`，它始终返回 0。

```
public Rational(int num, int den){
  this.num = num;
  this.den = den;

  // TODO: initialize dec here, otherwise it is implicitly set to 0.
} 
```

# ios - UIPanGestureRecognizer 无法按预期使用多个平底锅

> ID：14410557
> 
> 赞同：0
> 
> 时间：2013-01-19T02:31:10.853
> 
> 标签：ios, uipangesturerecognizer

本质上，我想要做的是移动视图以跟随用户的平移。只要使用相同的平移对象，它就可以正常工作。当用户释放并启动另一个平底锅时，问题就出现了。

根据文档， in 的值`translationInView`是相对于平移开始时的位置。

所以我处理这个问题的策略是在我的视图中添加两个属性，这样我就可以判断是否使用了同一个平移对象以及参考位置是什么。`self`对象是被移动的对象。它是一个 UIView 子类。

```
 CGPoint originalPoint;
   if (pan == self.panObject) {
      //If the pan object is the same as the one in the property, use the saved value as the reference point.
      originalPoint = CGPointMake(self.panStartLocation.x, self.panStartLocation.y);
   } else {
      //If the pan object is DIFFERENT, set the originalPoint from the existing center.
      //self.center is in self.superview's coordinate system.
      originalPoint = CGPointMake(self.center.x, self.center.y);
      self.panStartLocation = CGPointMake(originalPoint.x, originalPoint.y);
      self.panObject = pan;
   }
   CGPoint translation = [pan translationInView:self.superview];
   self.center = CGPointMake(originalPoint.x+translation.x, originalPoint.y+translation.y); 
```

这个方案不起作用，因为每个平移对象显然是同一个对象。我在调试器中花了一些时间来验证这一点，这似乎是真的。我认为每次触摸的平移对象都会有所不同。那么既然这不起作用，那还有什么替代方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:38:36.423

我解决了。这是更正后的代码：

```
 CGPoint originalPoint;
   if (pan.state == UIGestureRecognizerStateBegan) {
      originalPoint = CGPointMake(self.center.x, self.center.y);
      self.panStartLocation = CGPointMake(originalPoint.x, originalPoint.y);
   } else {
      originalPoint = CGPointMake(self.panStartLocation.x, self.panStartLocation.y);
   }
   CGPoint translation = [pan translationInView:self.superview];
   self.center = CGPointMake(originalPoint.x+translation.x, originalPoint.y+translation.y); 
```

编辑：更好的方法是利用手势识别器允许您设置翻译的事实：

```
[sender setTranslation:CGPointMake(0.0, 0.0) inView:self.pieceBeingMoved]; 
```

当您移动项目时执行此操作，然后下一次的新翻译将相对于您刚刚移动到的位置。

# .htaccess - htaccess url重写行代码之间的冲突

> ID：14410558
> 
> 赞同：1
> 
> 时间：2013-01-19T02:31:29.770
> 
> 标签：.htaccess, url-rewriting

我在这两个代码之间有问题

```
#----------------------------------------------------------------------
# Hide File Extentions
#----------------------------------------------------------------------
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

#-----------------------------------------------------------------------
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?username=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$ profile.php?username=$1 [L]
#-----------------------------------------------------------------------
#-----------------------------------------------------------------------
RedirectMatch 301 ^/buzz/(.*)$ http://buzz.perghhh.com/$1
#-----------------------------------------------------------------------
RewriteRule ^buzz/([^/]*)$ /buzz.php?buzz=$1 [L] 
```

当我输入这样的网址时[http://example.com/buzz/17](http://example.com/buzz/17) 它就像我要去个人资料页面一样..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:44:03.910

在链接的完整 htaccess 中，您有以下重定向：

```
RedirectMatch 301 ^/buzz/(.*)$ http://buzz.perghhh.com/$1 
```

完成后，该重定向`/$1`也将与通用规则匹配`([a-zA-Z0-9_-]+)`。由于您也进行了`^buzz/([^/]*)$`重写，因此以前的内容似乎`RedirectMatch`不应该存在。如果要匹配`buzz/xxxx`，请仅使用 the`RewriteRule`而不是`RedirectMatch`.

此外，Apache 的重写规则是通过第一次匹配来处理的，因此`buzz/`后面没有任何内容与通用`profile.php`规则匹配。您只需将其移至通用规则之上。始终将特定规则放在通用规则之前。

```
RewriteEngine On
RewriteRule ^buzz/([^/]*)$ /buzz.php?buzz=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/?$ profile.php?username=$1 [L] 
```

我还`profile.php`通过简单地在第一个规则中添加一个可选的尾随`/`替换了第二个规则`/?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:44:25.213

只需更改顺序

```
RewriteEngine On
RewriteRule ^buzz/([^/]*)$ /buzz.php?buzz=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?username=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$ profile.php?username=$1 [L] 
```

您以 [L] 结束行，这意味着这将是 (L)ast 规则，并且`^([a-zA-Z0-9_-]+)$`更具包容性，并且还将包括嗡嗡声。

# vim - VIM：插入行号，后面有空格

> ID：14410564
> 
> 赞同：4
> 
> 时间：2013-01-19T02:32:43.907
> 
> 标签：vim

我需要使用 Vim 在每行文本之前插入行号，并且行号后面必须有一个空格。例如，如果这是 TestFile：

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Morbi nunc enim, vehicula eget, ultricies vel, nonummy in, turpis. 
```

它应该看起来像这样

```
1 Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
2 Morbi nunc enim, vehicula eget, ultricies vel, nonummy in, turpis. 
```

我一直在使用`:%s/^/\line('.')/`具有多种变体的命令，但我无法弄清楚如何在最后获得空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T02:37:20.560

你很亲近！

此替换将通过将字符串[连接](http://vimdoc.sourceforge.net/htmldoc/eval.html#expr-.)`' '`到行号来完成这项工作：

```
%s!^!\=line('.').' '! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:24:20.297

这可能是使用外部工具最简单的方法：

```
:%!nl -ba -w1 -s' ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T16:49:40.467

您可以使用宏。首先确保在第一行之前有一个 0 并将光标放在上面：

```
0 Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Morbi nunc enim, vehicula eget, ultricies vel, nonummy in, turpis.
foo
bar
etc... 
```

然后执行此键序列以将正确的宏存储在寄存器 a:`qaywjP0<C-A>q`中。现在按`@a`执行宏。使用量词多次执行它。

键入`:help q`以了解有关录制宏的更多信息。

# ios - 变换旋转后定位视图

> ID：14410565
> 
> 赞同：0
> 
> 时间：2013-01-19T02:32:51.690
> 
> 标签：ios, rotation, linear-algebra, cgaffinetransform, affinetransform

我正在创建一个自定义弹出框背景，因此我将 UIPopoverBackground 抽象类子类化。在创建布局函数时，我遇到了放置和旋转背景箭头的问题。

第一张图片显示了所需位置的箭头。在下面的代码中，我计算了我想要的原点，但旋转似乎已经将图像的新位置平移了大约 11 个点。如您所见，我创建了一个 hack 解决方案，将箭头移动了 11 个点。但这仍然无法掩盖我的数学技能存在漏洞这一事实。如果有人能向我解释这里发生了什么，我将永远感激不尽。还有一个很好的是一个不涉及幻数的解决方案，这样我就可以将此解决方案应用于带有向上、向下和向右箭头的情况

![截屏](../Images/7e12192d3074f67c082c4c5bdbdc97cf.png)

```
#define ARROW_BASE_WIDTH 42.0
#define ARROW_HEIGHT 22.0

    case UIPopoverArrowDirectionRight:
    {
        width -= ARROW_HEIGHT;
        float arrowCenterY = self.frame.size.height/2 - ARROW_HEIGHT/2 + self.arrowOffset;
        _arrowView.frame = CGRectMake(width,
                                      arrowCenterY,
                                      ARROW_BASE_WIDTH,
                                      ARROW_HEIGHT);
        rotation = CGAffineTransformMakeRotation(M_PI_2);
        //rotation = CGAffineTransformTranslate(rotation, 0, 11);
         _borderImageView.frame = CGRectMake(left, top, width, height);
        [_arrowView setTransform:rotation];
    }
    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T06:50:34.593

好吧，如果围绕箭头视图的中心应用旋转（按原样），则会`(ARROW_BASE_WIDTH - ARROW_HEIGHT) / 2`在箭头的左旋转后留下一个间隙，这似乎是您必须补偿的。通过将箭头视图的中心偏移这么多，它应该重新对齐。

# drupal - 在 Drupal 上编辑页面设计

> ID：14410566
> 
> 赞同：0
> 
> 时间：2013-01-19T02:32:58.803
> 
> 标签：drupal

我姐姐有一个在 Drupal 上运行的网站，我完全没有使用经验。她现在想编辑首页的设计，也想编辑内页，但我不知道如何在非 Drupal 平台上访问像“index.html”这样的文件。

它采用了某种主题和模块（这两个术语让我很困惑）。

我可以知道如何编辑布局以及如何访问必要的文件吗？谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:33:26.793

你不会得到你的问题的答案。你的问题基本上是'告诉我drupal是如何工作的'。似乎需要阅读一些关于drupal主题层如何工作的信息。它还取决于您使用的主题。看看：[http ://drupal.org/node/171194](http://drupal.org/node/171194)

# cakephp - 使用 Jenkins 的 CakePHP 中的 lib 文件夹的覆盖率报告？

> ID：14410567
> 
> 赞同：0
> 
> 时间：2013-01-19T02:33:03.063
> 
> 标签：cakephp, jenkins, continuous-integration, code-coverage

我正在尝试将 Jenkins 与 CakePHP 一起使用，作为我推动更好 CI 的一部分。

我正在使用以下命令进行构建作业步骤。

```
/var/lib/jenkins/workspace/ABC-MASTER/src/abc/Console/cake testsuite -app 
/var/lib/jenkins/workspace/ABC-MASTER/src/abc app AllTests --log-junit 
/var/lib/jenkins/workspace/ABC-MASTER/build/logs/junit.xml --coverage-clover 
/var/lib/jenkins/workspace/ABC-MASTER/build/logs/clover.xml --coverage-html 
/var/lib/jenkins/workspace/ABC-MASTER/build/coverage 
```

这甚至会为 lib 文件夹生成覆盖率报告。

我的问题是：

1.  我也应该为 lib 文件夹生成覆盖 html 页面吗？
2.  如果没有，我该如何关闭它？

我的代码结构如下：

```
build
src
   abc (this is the app folder)
   lib ( this is the Cake lib folder)
tests
   Test (this follows the Cake convention) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:00:03.043

解决方案有 3 个部分：

1）在项目根目录中创建一个 phpunit.xml.dist 。

build src abc（这是 app 文件夹） lib（这是 Cake lib 文件夹） tests Test（这遵循 Cake 约定） build.xml phpunit.xml.dist

2) 在 phpunit.xml.dist 中创建以下内容

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit>

  <filter>
    <blacklist>
      <directory suffix=".php">src/lib</directory>
    </blacklist> 
  </filter>

</phpunit> 
```

3）添加`--configuration /path/to/phpunit.xml.dist`到命令中。

在问题中给出的示例中，这变为：

```
/var/lib/jenkins/workspace/ABC-MASTER/src/abc/Console/cake test \
--app /var/lib/jenkins/workspace/ABC-MASTER/src/abc app AllTests \
--log-junit /var/lib/jenkins/workspace/ABC-MASTER/build/logs/junit.xml \
--coverage-clover /var/lib/jenkins/workspace/ABC-MASTER/build/logs/clover.xml \
--coverage-html /var/lib/jenkins/workspace/ABC-MASTER/build/coverage \
--configuration /var/lib/jenkins/workspace/ABC-MASTER/phpunit.xml.dist 
```

For more information on how to use phpunit configuration file, look at this [link](http://www.phpunit.de/manual/3.5/en/appendixes.configuration.html#appendixes.configuration.blacklist-whitelist). It will help to understand how to use the phpunit configuration file in particular the blacklist and whitelist section.

# sitecore - Sitecore 如何将创作与交付分离

> ID：14410574
> 
> 赞同：-3
> 
> 时间：2013-01-19T02:34:43.553
> 
> 标签：sitecore

我正在计划 Sitecore 部署，我正在阅读“将创作与交付分开” [http://www.awareweb.com/AwareBlog/ArchConsideration.aspx](http://www.awareweb.com/AwareBlog/ArchConsideration.aspx)。

我是否需要在两个环境中安装和配置 Sitecore。在这种情况下，用户可以访问 Delivery/Sitecore 和 Authoring/Sitecore。

我怎样才能真正分开两个网站？我有点困惑。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:20:43.437

Dhanuka777，正如 techphoria 所提到的，你真的必须开始阅读很多东西才能获得更直接的帮助。

话虽这么说，这是您要实现的基本目标：

1.  **交付：**这是一个运行 sitecore web 应用程序的网站，但它不允许用户登录到 Sitecore 编辑界面。它只能将内容提供给您的外网用户。

2.  **创作：**这是一个运行 sitecore Web 应用程序的网站，但它允许用户登录到 Sitecore 编辑界面。Extranet 用户无法访问它。这通常意味着它在防火墙后面的虚拟机或服务器上运行。

您还需要查看您希望如何部署数据库以支持这两个站点。

# c# - Json 评估 - 重音问题

> ID：14410575
> 
> 赞同：1
> 
> 时间：2013-01-19T02:34:47.880
> 
> 标签：c#, json.net

![在此处输入图像描述](../Images/3d512fee4e83c4137e382e7d61d2b979.png)嘿伙计们！

当我直接在 facebook 网站上进行查询时，我遇到了口音问题。

当内容有重音时，网站会返回如下内容：

"__html":"M\u00fasico/Banda"

但是使用 JsonParserOnline ( [http://json.parser.online.fr/](http://json.parser.online.fr/) ) 进行测试时，它们分为 2 列，最后一列是“JSEval”，它们可以在其中规范化 Json，如下所示：

"__html":"音乐/班达"

既然我已经有了字符串，我该如何规范化呢？

我在我的查询中附上了一个样本，以便更具体。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T02:41:11.020

`"__html":"M\u00fasico/Banda"`是字符串的正确 JSON 编码。 `\u00fa`正在指定一个 UNICODE 代码点。c# 中的任何 JSON 解析器都会处理这个问题。

# android - 通过 ADB 在 Android 中创建快捷方式

> ID：14410577
> 
> 赞同：10
> 
> 时间：2013-01-19T02:35:32.170
> 
> 标签：android, adb

可以在我的 android 启动器上从 ADB 创建快捷方式吗？我有一个 .bat 文件可以从我的 PC 安装我的应用程序（通过双击），但在此之后我需要始终在启动器的巨大（不是那么用户友好）应用程序列表中进行搜索。如果可以将此功能添加到我的 .bat 文件中，那就太好了。我已经尝试在网上搜索没有任何运气：S。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T14:32:03.710

有几种方法可以处理这个问题。如果您的主要需求是每次重新编辑时都能快速启动应用程序，那么 an`adb shell am intent -n com.example.app/.App`是最简单的解决方案。

如果您只想创建一个快捷方式（并且您不在乎在哪里） ，请`com.android.launcher.action.INSTALL_SHORTCUT`按照每个人的说法使用。您需要一个应用程序或 bin 来执行此操作，因为 am 广播不会采用嵌套意图。

如果您正在使用特定的启动器（如 ADW Launcher），您可以破解快捷方式数据库。这将允许您指定快捷方式的坐标（在本例中为 [2, 3]）

```
adb shell sqlite3 /data/data/org.adw.launcher/databases/launcher.db "DELETE FROM favorites WHERE _id=1; INSERT INTO favorites VALUES(1,'MyApp','#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10200000;component=com.example.app/.App;end',-100,0,2,3,1,1,0,-1,NULL,0,NULL,NULL,NULL,NULL,NULL);" 
```

您需要告诉启动器从数据库中刷新。通常唯一的方法是杀死发射器。更高版本的 am（ActivityManager shell 命令）具有重新启动包的选项，而早期版本没有。在这种情况下，您需要编写一个小应用程序：

```
ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
am.restartPackage("org.adw.launcher"); 
```

# python - 在 python 中解析大型 tcpdump 文件

> ID：14410580
> 
> 赞同：4
> 
> 时间：2013-01-19T02:36:52.290
> 
> 标签：python, wireshark, tcpdump

我有一个大的 tcpdump 捕获（在 .dump 文件中包含 > 1gb 的数据），我想对其进行解析以获取一些统计信息，例如发送流量所涉及的不同 IP 的数量等。我想知道是否有通过python访问二进制跟踪文件中此类数据的干净方式？我尝试这样做的方式是运行 `tcpdump -r something.dump > myfile.out` 然后尝试使用 python 代码解析 myfile.out 以获取我想要的数据。但是上面的命令需要很长时间才能完成，并且希望使用更好的方法来完成此操作。

编辑：Wireshark 在尝试打开文件时内存不足。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T07:48:29.980

看看[`dpkt`模块](http://code.google.com/p/dpkt/)。它应该能够按需解析 pcap 文件。Jon Oberheide 有一篇很棒的[博客文章，展示了如何访问](http://jon.oberheide.org/blog/2008/10/15/dpkt-tutorial-2-parsing-a-pcap-file/)pcap 数据包捕获文件中数据包的解析表示。

# windows - Advanced query syntax: canonical name for 'Protected' file property

> ID：14410583
> 
> 赞同：1
> 
> 时间：2013-01-19T02:37:27.973
> 
> 标签：windows, windows-8, windows-search

I'm trying to form a canonical query to search for all music files that aren't protected on a Windows 8 device. The reason for the canonical syntax is that the traditional 'kind:=music AND protected:=no' would need to be localized, which I want to avoid.

I have this:

```
System.Kind:System.Kind#Music AND System.Music.Protected:System.StructuredQueryType.Boolean#True 
```

The first part, `System.Kind:System.Kind#Music` returns all music files properly. It's the second condition that I'm having trouble with. Does anybody know the canonical name for the 'Protected' property? It's available when you right-click/Details (under "Content") a music file.

I have been using this resource as a guide: [http://msdn.microsoft.com/en-us/library/windows/desktop/bb266512(v=vs.85).aspx#win7](http://msdn.microsoft.com/en-us/library/windows/desktop/bb266512(v=vs.85).aspx#win7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:38:44.213

Figured it out, the property is `System.DRM.IsProtected` and can be used like this:

```
System.DRM.IsProtected:System.StructuredQueryType.Boolean#False 
```

# c++ - 为什么 wcslen 在 argv[1] 上计算 1 个额外字符？

> ID：14410585
> 
> 赞同：0
> 
> 时间：2013-01-19T02:37:40.750
> 
> 标签：c++, c, gcc, mingw32, widechar

`argv[1]`似乎比输入的内容多返回 1 个字符。 `argv[2]`是正确的。

```
#include <stdio.h>
int main(int argc, wchar_t *argv[])
{
  printf("%d %d\n",wcslen(argv[1]),wcslen(argv[2]) );
  return 0;
} 
```

我正在使用 mingw32 进行编译。我用`gcc myprog.c`.

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:20:44.873

这是 C 标准草案 n1570.pdf 的引述：

> **5.1.2.2.1 程序启动**
> 
> **1**程序启动时调用的函数名为main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：
> 
> ```
> int main(void) { /* ... */ } 
> ```
> 
> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：
> 
> ```
> int main(int argc, char *argv[]) { /* ... */ } 
> ```
> 
> 或同等学历; [10)]或以其他一些实现定义的方式。
> 
> [10) 因此，int 可以替换为定义为 int 的 typedef 名称，或者 argv 的类型可以写为 char ** argv，依此类推。]

这应该很容易理解。如果您的实现支持`argv`type `wchar_t**`，那么它将以实现定义的方式在您的实现上工作。如果您需要可移植性，请不要依赖任何实现定义的内容。

此外，[`wcslen()`](https://pubs.opengroup.org/onlinepubs/9699919799/functions/wcslen.html)被声明为返回一个`size_t`值，您应该将其与`%zu`指令一起使用来打印，并且`#include <wchar.h>`.

我认为这些都不会导致您的问题，但它们都会导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-12T00:37:26.613

`main`需要类型为`int`and的参数`char**`（或`char*[]`等价的）。还有一个可选的第三个参数，即环境字符串数组。

但是发生的情况是，大多数编译器都对`main`. 它很高兴地让您声明`main`为 argc 和 argv 采用任何类型的参数（或不使用参数）。我认为这在很大程度上是历史性的，具有向后兼容性`C`。并且由于将类型隐式转换为`char*[]`，`wchar_t*[]`字符串会以完全不同的方式进行解释。

因此，正确地说您从 wcslen 获得了预期的 +1 是不正确的。这是技术上未定义的行为。

两个可能的修复：

简单的解决方法就是将第二个参数改为字符串数组`char`而不是`wchar_t`字符串。

```
int main(int argc, char* argv[]) 
```

如果您的编译器是 Visual Studio 并且您希望传递 Unicode 参数，则解决方法是将程序的入口点声明`wmain`为`main`

```
int wmain(int argc, wchar_t* argv[]) 
```

上面的`wmain`修复肯定会用mingw编译，但我不确定链接器是否支持启用`wmain`作为程序入口点。试一试就知道了。

# macos - JRE 文件的路径是什么？

> ID：14410587
> 
> 赞同：20
> 
> 时间：2013-01-19T02:38:05.140
> 
> 标签：macos, operating-system, java

我正在寻找 Mac OS X 10.6.8 上 JRE 文件的路径。还是没有这样的文件？JRE 只是一个想法或概念的俚语吗？Java 运行时环境是真实存在的。

它有文件吗？我正在安装一些要求 JRE 文件路径的东西 [http://www.boonex.com/trac/dolphin/wiki/RayMediaServerInstallation](http://www.boonex.com/trac/dolphin/wiki/RayMediaServerInstallation)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-22T01:08:49.847

在 Mac 上，将 JAVA_HOME 设置为“/System/Library/Frameworks/JavaVM.framework/Home”

JRE 不是文件。JRE 是 java 运行时环境，由许多文件组成。java 的约定是指定 JAVA_HOME。那是一个包含 bin 文件夹的目录。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-09T03:45:46.553

在 Mac 中，您可以在以下文件夹中找到已安装的 Java JRE

/库/Java/JavaVirtualMachines/

示例 /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-06-07T20:45:18.153

安装最新的 JRE8（截至今日更新 131）后，执行以下操作：

在您`.bash_profile`添加以下内容

```
export JAVA_HOME='/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home' 
```

然后将其添加到您的路径`export PATH=$PATH:$JAVA_HOME`。保存并打开一个新终端。键入`java -version`。你应该看到这样的输出：

```
->java -version
java version "1.8.0_131"
Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-28T01:37:51.453

在使用 Java 8 的**El Capitan**上，这是一种检查 jre 路径的方法。转到“系统偏好设置/Java”，然后转到第三个选项卡“Java”并单击“查看”。然后就可以得到JRE路径，也就是`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-10-19T13:27:57.180

`/usr/libexec/java_home`在终端中运行。它将返回与 Mac 的默认 Java 安装的 $JAVA_HOME 对应的路径。附加`/jre`到此路径以获取 Java 运行时环境 (JRE) 路径。

例子：

```
$ /usr/libexec/java_home
/Library/Java/JavaVirtualMachines/jdk1.8.0_212.jdk/Contents/Home 
```

JRE 将是`/Library/Java/JavaVirtualMachines/jdk1.8.0_212.jdk/Contents/Home/jre`

验证：

```
$ ls -al /Library/Java/JavaVirtualMachines/jdk1.8.0_212.jdk/Contents/Home/jre
total 552
drwxr-xr-x  10 root  wheel     340 Apr  2  2019 .
drwxr-xr-x  15 root  wheel     510 Apr  2  2019 ..
-r--r--r--   1 root  wheel    3244 Apr  2  2019 COPYRIGHT
-r--r--r--   1 root  wheel      44 Apr  2  2019 LICENSE
-r--r--r--   1 root  wheel      46 Apr  2  2019 README
-rw-r--r--   1 root  wheel  112748 Mar 14  2019 THIRDPARTYLICENSEREADME-JAVAFX.txt
-r--r--r--   1 root  wheel  149725 Apr  2  2019 THIRDPARTYLICENSEREADME.txt
-r--r--r--   1 root  wheel     955 Apr  2  2019 Welcome.html
drwxr-xr-x  13 root  wheel     442 Apr  2  2019 bin
drwxr-xr-x  98 root  wheel    3332 Apr  2  2019 lib 
```

这也适用于任何 OpenJDK 安装：

```
$ /usr/libexec/java_home
/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home 
```

### 版本

如果您安装了多个 JRE 或 JDK，则可以使用以下`-v`选项获取特定版本的 $JAVA_HOME：

```
$ % /usr/libexec/java_home -v 11  
/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home 
```

## 蒂普

要设置 JAVA_HOME 环境变量，请使用

```
$ export JAVA_HOME=`/usr/libexec/java_home`
$ echo $JAVA_HOME
/Library/Java/JavaVirtualMachines/jdk1.8.0_212.jdk/Contents/Home 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-25T16:56:14.603

如果你通过 dmg 安装了 jre。

您可以在以下位置找到您的“java”

> /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java

您可以通过命令检查版本：

> /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-25T23:22:48.727

以前的`/System/Library/Frameworks/JavaVM.framework/Home`答案是正确的。

在 MacOSX Sierra 上使用 Oracle Java 8（及更高版本？）`/System/Library/Frameworks/JavaVM.framework/Home`不存在。

的答案`/Library/Java/JavaVirtualMachines/`更接近。例如，对于位于 的 JDK `/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Content/Home`，只需将`/jre`JRE 添加到该路径的末尾即可。

# opengl - 使用 JOGL 的 glDrawElementsInstanced() 的索引参数中的内容

> ID：14410589
> 
> 赞同：1
> 
> 时间：2013-01-19T02:38:34.900
> 
> 标签：opengl, jogl

在 JOGL 中调用 glDrawElementsInstanced() 时，我无法理解将什么用作“索引”参数。

通过查看一些 C++ 教程，似乎只要您想从索引缓冲区的开头开始渲染顶点，您就可以只为索引传递 0。JOGL 要求 indices 参数是一个 Buffer 对象。我尝试在其中创建一个包含一个元素 0 的 IntBuffer，但这不起作用。

当我用它来绘制我的顶点时，我看到在屏幕上绘制的东西：

```
gl.glDrawElements(GL.GL_TRIANGLES, 10, GL.GL_UNSIGNED_BYTE, 0) 
```

但是当我改用它时，屏幕是黑色的：

```
gl.glDrawElementsInstanced(
    GL.GL_TRIANGLES, 10, GL.GL_UNSIGNED_BYTE, IntBuffer.wrap(Array(0)), 1
) 
```

当我使用它时，我得到一个类型不匹配的错误：

```
gl.glDrawElementsInstanced(
    GL.GL_TRIANGLES, 10, GL.GL_UNSIGNED_BYTE, 0, 1
) 
```

我正在使用 OpenGL 4 和 Scala。我还将我的程序设置为使用 DebugGL4，并且没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:46:27.190

在 LWJGL 中，它的工作方式几乎相同，当我需要在索引槽中传递零时，我是这样做的：(IntBuffer)null。只需将 null 转换为缓冲区类型。

# c - 这段代码有逻辑错误吗？

> ID：14410591
> 
> 赞同：4
> 
> 时间：2013-01-19T02:38:57.153
> 
> 标签：c, linux, signals

我是新手，请温柔！我从书中复制了代码：

```
#include <sys/types.h>
#include <signal.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

static int alarm_fired = 0;

void ding(int sig)
{
    alarm_fired = 1;
}

int main(int argc, char* argv[])
{
    pid_t pid;

    printf("alarm application starting\n");

    pid = fork();

    switch(pid)
    {
        case -1:
            perror("fork failed");
            exit(EXIT_FAILURE);
        case 0:
            sleep(5);
            kill(getpid(), SIGALRM);
            exit(EXIT_SUCCESS);
    }
    printf("waiting for alarm to go off\n");
    (void) signal(SIGALRM, ding);

    pause();
    if (alarm_fired)
        printf("Ding!\n");

    printf("done\n");
    exit(EXIT_SUCCESS);
} 
```

正如作者所写：

> `ding``SIGALRM`，模拟闹钟。子进程在向其父进程发送信号之前等待五秒钟。

* * *

我试过上面的代码，但打印后没有反应`alarm application starting`

`waiting for alarm to go off`.所以我怀疑代码有逻辑错误。该行`kill(getpid(), SIGALRM);`可能是错误的。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T02:44:06.600

你是对的，线

```
kill(getpid(), SIGALRM); 
```

如果孩子要向其父母发送信号，则这是错误的。事实上，它正试图向自己发送信号，因为他正在通过`getpid()`（获取进程 ID）传递他自己的 pid。

您应该使用`getppid()`(get parent process id) 以便可以将消息发送到父进程，如下所示：

```
kill(getppid(), SIGALRM); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:46:41.697

这一行：

```
kill(getpid(), SIGALRM); 
```

由孩子执行并向自己发送警报信号。

这一行：

```
signal(SIGALRM, ding); 
```

父级是否为警报信号设置了信号处理程序

而这条线正在等待信号：

```
pause(); 
```

您需要孩子将信号发送给父母而不是自己，然后所有的多米诺骨牌都会倒下。

# android - JPGEncoder 冻结应用

> ID：14410593
> 
> 赞同：2
> 
> 时间：2013-01-19T02:39:09.667
> 
> 标签：android, ios, flash-builder, bytearray, bitmapdata

我正在 Flash Builder 中创建一个 iOS 和 Android 应用程序，该应用程序使用 JPGEncoder 函数将拍摄的图像从设备转换为字节数组，但在 iOS 中我的应用程序冻结，在 Android 中屏幕变黑一分钟左右然后继续。下面是我正在使用的代码。

```
private var uploadData:ByteArray;
        protected var camera:CameraUI;
        protected var loader:Loader;
        public var file:File;

        protected function takePhoto():void {
            if (CameraUI.isSupported){
                camera = new CameraUI();
                camera.addEventListener(MediaEvent.COMPLETE, savePhoto);
                camera.launch(MediaType.IMAGE);
            }
        }

        protected function savePhoto(e:MediaEvent):void 
        {
            uploadProgress.visible = true;
            var imagePromise:MediaPromise = e.data;
            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onPhotoBitmapLoadComplete);
            loader.loadFilePromise(imagePromise);
        }

        protected function onPhotoBitmapLoadComplete(e:Event):void
        {
            var loaderInfo:LoaderInfo = e.target as LoaderInfo;
            if (CameraRoll.supportsAddBitmapData)
            {
                var bitmapData:BitmapData = new BitmapData(loaderInfo.width, loaderInfo.height);
                bitmapData.draw(loaderInfo.loader);
                file = File.applicationStorageDirectory.resolvePath("receipt" + new Date().time + ".jpg");
                var stream:FileStream = new FileStream()
                stream.open(file, FileMode.WRITE);
                var j:JPEGEncoder = new JPEGEncoder();
                var bytes:ByteArray = j.encode(bitmapData);
                stream.writeBytes(bytes, 0, bytes.bytesAvailable);
                stream.close();

                uploadData = bytes;
                SetupWebService();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:30:11.750

这是因为编码器不是异步的，编码大图像可能需要一段时间；尤其是 jpeg，尤其是在移动设备上。

那里有异步编码器，但不允许自我推广。提示提示。

编辑：该死的规则！这是我关于异步编码的博客文章（和代码）的链接：http: [//blog.leeburrows.com/2011/01/saving-an-image-to-hd-with-actionscript-part-2/](http://blog.leeburrows.com/2011/01/saving-an-image-to-hd-with-actionscript-part-2/)

# c++ - 在 SSH Secure Shell c++ 中编译

> ID：14410596
> 
> 赞同：0
> 
> 时间：2013-01-19T02:39:15.887
> 
> 标签：c++, shell, ssh, compiler-errors, g++

当我运行 g++ 时，它会引发几个错误：

```
$ g++  SongStructure.cpp mtmtest.cpp Song.cpp examples/OldSongExample.cpp -std=c++11 -Wall -Werror -pedantic-errors -DNDEBUG -o example

cc1plus: error: unrecognized command line option "-std=c++11"
cc1plus: error: unrecognized command line option "-std=c++11"
cc1plus: error: unrecognized command line option "-std=c++11"
cc1plus: error: unrecognized command line option "-std=c++11" 
```

如何解决这个问题以及为什么会发生这种情况？有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:42:49.470

您只需拥有一个不支持 C++11 标准的 g++ (gcc) 版本。您可以不使用 C++11（或者如果您不使用，则不要指定`-std=c++11`），请尝试`-std=c++0x`在 C++11 是实验性的并被命名为 C++0x 时使用某些旧版本的 GCC 支持的，或升级你的编译器。

# python - python程序不会在后台运行

> ID：14410598
> 
> 赞同：0
> 
> 时间：2013-01-19T02:39:26.757
> 
> 标签：python, background-process

以下程序：

```
import time
import random
while True:
    t=time.time()+1.
    f=0.
    while time.time()<t:
        f+=random.random()-.5
    time.sleep(1.) 
```

将永远运行，或者使用 100% 的处理器一秒钟，然后休眠一秒钟，然后永远继续这样做。当我从命令行运行程序时，它就是这样做的。当我从命令行运行程序后跟一个 & 字符时，它也在后台按预期工作 - 直到我关闭我用来启动它的终端应用程序，这导致它退出。当我关闭终端时，如何防止这种行为并让它继续运行？我将在远程服务器上运行类似的东西，当我断开连接时它也会退出程序。我可以判断它是否继续运行，因为顶部或系统监视器显示程序在 100% 处理器使用率和正常系统使用率之间循环。

*** 编辑澄清 *** 这不是我要运行的实际程序，在这里发布太长了，但它以类似的方式运行，花 5 分钟左右高度活跃，然后几分钟它什么都不做。它永远延续了这种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:46:21.300

你需要`daemonize`这个过程。这意味着将其与控制终端断开。当您按原样运行它时，它会保留其控制终端并在该终端关闭时通过信号 SIGHUP 退出。[daemonize 模块](https://code.google.com/p/pycopia/source/browse/trunk/core/pycopia/daemonize.py)的纯 Python 实现具有`daemonize`. 您只需调用它，您就在后台运行，与控制终端断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:49:07.580

让终端打开的一种方法是将程序另存为`*.pyw`，或使用`pythonw.exe`(windows) 运行它。为了终止程序，您可以使用 PID：

```
import os

f = file('test.txt','w')
f.write(str(os.getpid()))
f.close() 
```

希望这可以帮助。我不使用 OSX 的 Linux，但我想它会是相似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:46:02.553

程序“gnu screen”就是这样做的。您可以启动屏幕会话，运行程序，然后使用 Ctrl-a 后跟 d 从会话中分离。要重新连接，请运行 screen -r。

# html - Table with alternate backround rows and header

> ID：14410606
> 
> 赞同：2
> 
> 时间：2013-01-19T02:40:58.057
> 
> 标签：html, css

I use css to make my rows alternate like this: [Fiddle](http://jsfiddle.net/SaQk9/2/)

```
tr:nth-child(odd) td   { background-color:red; }
tr:nth-child(even) td   { background-color:blue; }
tr th { background-color: yellow}

table {
    border: 1px solid black;
    margin: 10px;
    width: 100px;
    } 
```

Some tables have headers, and some tables do not. The data always needs start with red, but when a table has a header, its row is counted as first row and data starts with blue instead. Is there any way to make it always start with red?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T02:43:26.670

### Use `<tbody>` and `<thead>`

Use `<tbody>` and put all the body rows in it. Also, wrap your header inside `<thead>`. Updated CSS below:

```
tbody tr:nth-child(odd) td   { background-color:red; }
tbody tr:nth-child(even) td   { background-color:blue; }
thead tr th { background-color: yellow} 
```

This way you will be targeting only the data rows and not header rows. Hope this helps you...

### Fiddle: [http://jsfiddle.net/praveenscience/TQgjC/](http://jsfiddle.net/praveenscience/TQgjC/)

# java - 静态类/常量字段层次结构——可以吗？

> ID：14410608
> 
> 赞同：1
> 
> 时间：2013-01-19T02:41:07.213
> 
> 标签：java, oop, static, hierarchy

我想要实现的是对我的数据库表的一个很好的抽象。我正在寻找的结果是能够做到这一点：

```
System.out.println(Table.Appointment);    // prints the name of the table 
System.out.println(Table.Appointment.ID); // prints the name of the column 
```

这是我已经接近的内容，但字段似乎优先于静态内部类。

```
public class Table {

    // attempt to allow 'Table.Appointment' to resolve to a String
    public static final Table Appointment = new Table("Appointment");

    // attempt to give access to column names within the table,
    // these class names should be the same as its name field above.
    public static final class Appointment{
        public static final String ID = "AppointmentId";
    };

    private String name; 
    private Table(String name){ this.name = name; }
    public String toString() { return name; }
} 
```

这真的可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:58:35.567

虽然我强烈反对您正在做的事情，只是因为它使您的应用程序过于稳固，但这是有效的（已**编辑**以避免循环引用。）：

```
public final class Table {

    // ===== DECLARE YOUR INSTANCES HERE =====

    static public final AppointmentTable Appointment = new AppointmentTable();
    // static public final FooTable Foo = new FooTable();

    // =======================================

    static private abstract class TableImpl {
        public abstract String getTableName();
        public String toString() { return getTableName(); }
    }

    // ==== DECLARE YOUR DEFINITIONS BELOW ====

    static public class AppointmentTable extends TableImpl {
        public final String ID = "appointmentId";
        // public final <type> <columnName> = <dbFieldName>;

        public String getTableName() { return "appointment"; }
        private AppointmentTable() {}
    }

    // static public class FooTable extends TableImpl { ... }

} 
```

这是尽可能接近你想要的。请注意，用户实际上不会看到这种设计，只有程序员会……所以谁在乎呢？

此外，访问`Table.AppointmentTable`是正常的。这是您可以访问的方式`Table.Appointment.ID`。但是您不能创建它的实例，也不能扩展它，这一切都很好。

****编辑****

为什么会有这个限制？因为您不能只使用类型并将其视为值。类型定义容器，而不是内容。尽管你不能`System.out.println(int);`，因为`int`它是一个标记（或一个类型，或一个容器），你不能将一个类名视为一个可以回显的值。除其他外，这就是您拥有`Table.AppointmentTable.class.getSimpleName()`（或`.getName()`）的原因。

您只能使用值。类定义*不是*一个值，它是一个值的容器的*定义*。该类定义的变量包含该容器的内容，您可以从中回显或操作。

未分配的变量也是如此。如果你试试 ：

```
int foo;
System.out.println(foo); 
```

编译器会抱怨`foo`未初始化。这是因为声明一个变量不会为其分配任何内容（您声明一个`int`名为类型的容器`foo`），除非您为其分配某些内容（内容），否则不会使其包含任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:58:44.683

我会做类似的事情

```
Table appointment = new Table("appointment" // table name
                            , "appointmentId"  // id column name);

System.out.println(appointment.getTableName());    
System.out.println(appointment.getIdColumnName()); 
```

如果您想将完成的事情推送到编译时，您可以使用子类。

```
class Appointment extends Table{
    Appointment(){  super("appointment", "appointmentId"); }
} 
```

# android - 如何从 LatinIME 重新实现 dpad 事件处理

> ID：14410610
> 
> 赞同：2
> 
> 时间：2013-01-19T02:41:14.523
> 
> 标签：android, android-input-method, d-pad

ics 中的默认键盘（使用 4.0.4 测试）允许您使用移动键（使用 dpad 或键盘箭头）“选择”屏幕键盘上的键。通过单击选定的键被键入。

我正在编写一个需要此功能的新输入法。我尝试了一些示例键盘，例如 sdk 中包含的 Softkeyboard 示例。但那些行为不同。按下移动键不允许选择键盘上的键。相反，它在输入区域中移动光标。

我还检查了 LatinIME 包，但找不到负责所需行为的代码部分。任何见解都会有所帮助！

到目前为止，我的假设是选择的视觉表示是通过 state_active 完成的。至少这是我在查看样式定义后得出的结论。似乎负责的方法是 InputMethodService 中的 onKeyUp/onKeyDown。LatinIME 不会覆盖这些方法。

编辑：此时我确信这不是 AOSP LatinIME，即使它显示为“Android 键盘 (AOSP)”。我已经用 android mini PC（MK808 和 UG802）对此进行了测试。似乎他们对 IME 有一个补充。在显示 InputView 的情况下按下 DPAD 键会给出以下输出：

```
D/LatinKeyboardView(  487): ##----- keycout = 39 ------@@@ 
I/LatinKeyboardView(  487): ######## index=37, y= 271 x =1107
I/LatinKeyboardView(  487): ######## index=37---action =0---code =45
D/PointerTracker(  487): -------- release old key ---------------
I/LatinKeyboardView(  487): SendKeyEvent2Touch  m_iIndexCurKey=37 m_iKeyCount =39 keyCode =21 
```

我在谷歌上找不到任何关于此的内容。我想听听有关如何实施这一点的建议。

# c# - IObserver -- 调用 IObserver.OnError 时观察者应该做什么

> ID：14410613
> 
> 赞同：5
> 
> 时间：2013-01-19T02:41:45.893
> 
> 标签：c#, system.reactive, observer-pattern

我在我的一个项目中使用`IObserver`/`IObservable`接口。

这`CommandReader`是一个`IObservable`连续从流中读取数据，然后将其传递给它的`CommandHandler` `IObserver`（s）。

当底层流关闭（例如连接终止）时，我将使用该`IObserver.OnError(exception)`方法通知观察者

观察者收到这个通知后应该怎么做？它应该从 observable 中释放自己吗？还是那是父类的责任？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T05:30:59.170

对于初学者，您通常不应该实现自己的对象`IObservable`和`IObserver`对象。你的问题暗示了为什么。使基本行为正确是非常困难的。

现在每次调用都`IObservable.Subscribe`返回一个`IDisposable`. 如果调用者`Subscribe`希望在调用`OnCompleted`or之前取消订阅 observable，则使用此选项`OnError`。但是，如果一个`OnCompleted`or`OnError` 被调用，那么它`IDisposable`会被自动处理掉。因此，当一个可观察的集合完成时，Rx 会自动清理自己。

每个单独的观察者不需要管理自己的订阅生命周期。观察者只需要响应`OnCompleted`/`OnError`消息。

在您的代码中，我建议您考虑稍微更改代码。我希望一个`CommandReaderPublisher`有`Subscribe`方法的类可能比一个`CommandReader`类更合适。一旦 Rx 流完成，它就不能继续使用。

另外我想知道调用`OnCompleted`是否会比`OnError(exception)`底层流关闭时更好。如果发生错误，那很好，但如果它关闭，那么`ONCompleted`可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:37:24.897

我建议 IObservable 的工作是从它自己的订阅列表中删除观察者。同样，如果 IObserver 有一个 IObservable 列表，那么 IObserver 应该管理该列表。

# android - 可能永远不会调用 onLocationChanged 吗？

> ID：14410614
> 
> 赞同：2
> 
> 时间：2013-01-19T02:41:52.543
> 
> 标签：android

我正在编写一个通过短信查找手机位置的应用程序。我使用一个短信广播接收器，当正确的短信进来时，获取一个唤醒锁，然后启动定位服务，该服务从 GPS 和 NETWORK 请求位置更新。在第一次**onLocationChanged 上**，我将位置发送给请求者，停止服务并释放锁。

我想知道android总是调用**onLocationChanged**吗？或者当它找不到设备的位置（例如设备在室内）时，它不会被称为永远？

调用这个函数非常重要，因为如果不是这样，直到电池没电时才会释放锁。在那种情况下，有没有其他方法可以完成服务？

还有什么，Dose 定位服务需要电源锁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:10:17.257

Yes, if it can't get a GPS lock it will never call onLocationChanged. Unless you want to keep the screen on I don't think you need to hold a wakelock though- I believe the GPS system will call you when the phone is woken up.

# osx-lion - 运行 dnsmasq 时如何设置域别名？

> ID：14410616
> 
> 赞同：4
> 
> 时间：2013-01-19T02:42:07.160
> 
> 标签：osx-lion, hosts, dnsmasq

我知道我的 dnsmasq.conf 文件中的以下规则会将所有带有“.dev”顶级域的请求重定向回我的本地计算机。

```
listen-address=127.0.0.1
address=/.dev/127.0.0.1 
```

我遇到的问题是我想设置一个别名，以便将“myserver”定向到网络“myserver.example.com”上的真实地址。

在安装 dnsmasq 之前，我在 hosts 文件中使用了一个条目来完成任务，例如...

```
555.555.555.555   myserver 
```

这使我可以简单地键入以下内容：

```
ssh myserver 
```

连接到我的远程服务器。

**问题是，自从我安装了 dnsmasq 后，这不再有效。**

我试图配置 dnsmasq 将这些请求定向到正确的服务器，但到目前为止我还没有运气。我尝试过的一些事情没有成功，包括...

1）以下列方式使用“本地”配置指令：

```
local=/myserver/ 
```

据我了解，这将迫使 dnsmasq 使用主机文件来查找别名，但事实并非如此。

2）我尝试在配置中定义一个地址条目：

```
address=/myserver/555.555.555.555 
```

也许这是一个语法问题，但这也不起作用。

3）我尝试调整计算机上的主机文件以别名完整的主机名，像这样......

```
myserver.example.com  myserver 
```

像上面这样，也没有工作。

有人对下一步要尝试什么有任何建议吗？

提前致谢。

# css - 使用 HTML/CSS 下移图像

> ID：14410625
> 
> 赞同：-1
> 
> 时间：2013-01-19T02:44:23.670
> 
> 标签：css, html

我需要将蓝色导航栏下方的图像向下移动，以便它与下面的内容主体连接（他们应该在网页内容周围创建一个阴影框的外观）。下面是页面的 HTML。我试图将它向下移动的图像 boy_top.png。有谁知道如何做到这一点？我还包括了“主”“页面”和“菜单”部分的 CSS。蓝色的导航区域附在“菜单”部分，主要内容区域附在“主”部分，它们都封装在“页面”css中。

![在此处输入图像描述](../Images/5dba793adc20a4045cc95fe6ef600b8d.png)

```
 <div class="page">
        <header>            
        <div style="margin: 20px;">
@*                <a href="Home" style="color: white; font-size: 36px; font-weight: bold;text-decoration: none;" onclick="DoFun();">Monet </a>*@
            <span href="Home" style="color: white; font-size: 36px; font-weight: bold;text-decoration: none;" onclick="DoFun();">Monet </span>
            <span style="color: white; font-size: 18px; ">&nbsp;&nbsp; </span>
        </div>
@*            </a>*@
@*            <div id="logindisplay">
            @Html.Partial("_LogOnPartial")
        </div>*@
            <nav>
                <ul id="menu">
                    <li>@Html.MenuLink("Agents", "Index", "Agent")</li>
                    <li>@Html.MenuLink("Products", "Index", "Product")</li>
                    <li>@Html.MenuLink("Product Training", "Index", "Course")</li>
                    <li>@Html.MenuLink("Continuing Ed", "Index", "ContEdCourse")</li>
                    <li>@Html.MenuLink("Help", "About", "Home")</li>
                </ul>
            </nav>
    </header> 
    <img src="../../Content/images/body_top.png"  id="topPic" alt="tag"/>       
        <section id="main">            
        @RenderBody()
    </section>
    <footer>
        <span style="color: Gray;"> Copyright © 2012 Symetra Life Insurance Company. All rights reserved. Symetra® is a registered service mark of Symetra Life Insurance Company. For Internal Use Only. </span>
    </footer>
    </div> 
```

CSS

```
 #main 
    {
        background-image: url('../../Content/Images/body_rpt.png');
        background-repeat: repeat-y;
        clear: both;  /*add this so tabs go left! */
        padding: 15px 15px 15px 30px; /*30px 30px 15px 30px; */
        background-color: #fff;
        /*border-radius: 4px 0 0 0;*/
        -webkit-border-radius: 4px 0 0 0;
        -moz-border-radius: 4px 0 0 0;
    }

    .page {
        width: 83.7em;
        margin-left: auto;
        margin-right: auto;
    }

    ul#menu {
        /*border-bottom: 1px #5C87B2 solid;*/
        background-image: url('../../Content/Images/Nav-Background.gif');
        padding: 0 0 2px;
        position: relative;
        margin: 0;
        text-align: right;
    }

    ul#menu li {
        display: inline;
        list-style: none;
    }

    ul#menu li#greeting {
        padding: 10px 20px;
        font-weight: bold;
        text-decoration: none;
        line-height: 2.8em;
        color: #fff;
    }

    ul#menu li a {
        padding: 10px 20px;
        font-weight: bold;
        text-decoration: none;
        line-height: 2.8em;
        /*background-color: #e8eef4;*/
        color: Navy; /*#034af3; */
        border-radius: 4px 4px 0 0;
        -webkit-border-radius: 4px 4px 0 0;
        -moz-border-radius: 4px 4px 0 0;
    }

    /*ul#menu li a:hover {
        background-color: #fff;
        text-decoration: none;
    }*/

    ul#menu li a:active {
        background-color: #a6e2a6;
        text-decoration: none;
    }

    ul#menu li.selected a {
        background-color: #fff;
        color: #000;
    }
    /* this one is for the active tab  */
    .current 
    {
        font-size: 120%;
        font-weight: bold;
        border-style: double;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:33:03.970

将图像放入主体内，将主体设置为位置：相对，然后将图像设置为位置：绝对；顶部：0；左：0；

如果您不能将图像放在主体内，则在主体上添加负边距顶部。这有点“hacky”但仍然有效。

# android - android sdk 如何使 TextView 以动态的文本大小集为中心

> ID：14410627
> 
> 赞同：0
> 
> 时间：2013-01-19T02:44:28.760
> 
> 标签：android

在更改文本大小时，我已经用尽了我的搜索来保持 TextView 居中。

这个网站上有很多类似的问题，但没有一个线程为我的问题提供解决方案。

在我的 XML 文件中，我有一个 RelativeLayout 和其中的 TextView（下面的代码）。

当以编程方式从 TextView 的 1 --> 300 更改文本大小，然后从 300 --> 1 更改回文本大小时，TextView 的位置会发生变化并向下移动到屏幕底部。

如何使 TextView 以一组动态的文本大小为中心？

这是我的xml文件

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/vgRelativeLayout">

    <TextView            
        android:id="@+id/tViewID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"            
        android:layout_gravity="center"  
        android:center_vertical="true"
        android:center_horizontal="true" />   
</RelativeLayout> 
```

如果您以编程方式执行以下操作，则 TextView 的位置将从 center_vertical 和 center_horizo​​ntal 属性设置的原始居中位置发生变化。

TextView 的新位置将在垂直刻度上向下移动。

水平刻度上的位置不变。

```
 TextView tView = (TextView) findViewById(R.id.tViewID);  

 tView.setTextSize(1);
 Thread.sleep(5000);

 tView.setTextSize(300);
 Thread.sleep(5000);

 tview.setTextSize(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:02:07.513

听起来您需要调用布局来重新布局。在这种情况下，您通常使用 RequestLayout()，可以通过获取对 RelativeLayout 的引用来调用它。

因此，您需要给RelativeLayout 一个Id，然后通过findViewById() 获取引用，然后在更改文本大小后调用RequestLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:06:41.290

试试这个 android:layout_centerHorizo​​ntal="true" & android:layout_centerVertical="true" 或者试试这个 android:layout_centerInParent="true"。如果它有效，请点击投票给我

# java - Why didn't java let me call this protected function

> ID：14410629
> 
> 赞同：0
> 
> 时间：2013-01-19T02:45:46.723
> 
> 标签：java, syntax, methods, protected

Suppose following class Structure:

inside namespace a

```
public abstract class A {

    protected int someVal;
    protected abstract int action();

} 
```

in namespace a.b

```
public class B extends A{

    //magically filled with elements ;)
    List<A> elements; 

    protected int action(){
        someVal = 42; // OK
        int l = 0;
        for (A a : elements){
            l+= a.action(); //FORBIDDEN!!
        }
        return l;
    }
} 
```

so Eclipse suggests me to

> Change the visibility of 'action' to 'protected'

I feel some kind of fooled.

Why I'm allowed to implement action, but not to call it? I have no problem accessing `someVal` either.

I'm well aware of copying `B` into the same namespace, but I have many Classes which extend B or similiar C's and D's etc. and like to have them in order.

Or to rephrase my Question: Is this packet 'thingy' the only way to force my classes to have a protected method, but hide that from client code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:53:56.813

From a static typing perspective `a` may not be an instance of `B`. You can't touch the protecteds of a non-descendent class (except via the same package get out). `protected` should be used rarely, if at all.

# java - 网络服务 IRAD 7

> ID：14410634
> 
> 赞同：0
> 
> 时间：2013-01-19T02:46:59.543
> 
> 标签：java, web-services

我正在使用 jaxws 2.1.and jaxb 在 IRAD 7 上开发 webservice 自下而上的方法

我想强制 webmethod 参数，我尝试使用 @Xmlelement(required=true) 但它没有更新我的 XSd。

你能建议一个合适的方法来强制我的 webmethod 参数吗

提前致谢。拉玛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:06:11.227

The JAX-WS runtime for Websphere is Axis2\. You can find an example in [Java Web services: JAXB and JAX-WS in Axis2](http://www.ibm.com/developerworks/library/j-jws8/index.html) using required parameters.

For Metro runtime, check this question in [How can I make a WebMethod parameter required](https://stackoverflow.com/questions/2210346/how-can-i-make-a-webmethod-parameter-required)

# applescript - 使用 AppleScript 通过 TextEdit 替换 HTM 文件中的文本

> ID：14410636
> 
> 赞同：0
> 
> 时间：2013-01-19T02:47:12.880
> 
> 标签：applescript, textedit

AppleScript 新手在这里....

尝试设置一个applescript，它将替换.htm文件中的几行代码

**这很丑陋，但有效：**

```
tell application "Finder"
  activate
          tell application "System Events"
  key down {command}
  keystroke "a"
  key up {command}
          end tell
end tell

tell application "Finder"
  activate
          set fileCount to count files in front window
          set fileCountAlert to fileCount
end tell
tell application "System Events"
          tell process "Finder"
                    tell menu bar 1
                              tell menu bar item "File"
                                        tell menu "File"
                                                  tell menu item "Open With"
                                                            tell menu "Open With"
                                                                      click menu item "TextEdit"
                                                            end tell
                                                  end tell
                                        end tell
                              end tell
                    end tell

          end tell
  delay 3
end tell

repeat until fileCount = 0

          tell application "TextEdit"
  activate
                    tell application "System Events"

  key down {command}
  keystroke "f"
  key up {command}
  --delay 1
                              keystroke "BORDER=1"
                              delay 0.5
  keystroke tab
  keystroke tab

                              keystroke "BORDER=0"
                              delay 0.5
  key down {command}
  keystroke "w"
  key up {command}
                              delay 0.5
                    end tell

          end tell

          set fileCount to (fileCount - 1)
end repeat

tell application "Finder"
          display dialog "Completed Adjusting " & fileCountAlert & " files."
end tell 
```

**我也尝试过使用这样的东西......但是这个东西根本不起作用......**

```
set the search_document to (choose file)
replaceText("BORDER=1", "BORDER=0", search_document)

on replaceText(search_string, replacement_text, this_document)
          tell application "TextEdit"
  open this_document
                    set AppleScript's text item delimiters to the search_string
                    set this_text to the text of the front document as list
                    set AppleScript's text item delimiters to the replacement_text
                    set the text of the front document to (this_text as string)
  close this_document saving yes
          end tell
end replaceText 
```

**最后......我试图弄清楚如何使用这样的东西点击applescript中的按钮：**

```
 tell application "System Events"
                    tell process "TextEdit"
  click button "All" of scroll area of window "3.htm"
                    end tell
          end tell 
```

**但是 - 我在这里不断收到错误。我正在使用 UIElementInspector 应用程序，但没有运气。

想知道是否有人有任何快速帮助建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:44:15.090

用测试文件试试这个：

```
set myFiles to (choose file with multiple selections allowed)
repeat with aFile in myFiles
    set myData to do shell script "cat " & quoted form of (aFile's POSIX path)
    set newData to do shell script "echo " & quoted form of myData & " | sed 's/BORDER=1/BORDER=0/g' > " & quoted form of (aFile's POSIX path)
end repeat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:07:12.553

**首先**，您可以在不模拟键盘事件但直接与应用程序通信的情况下编写 TextEdit 脚本。

您可以打开一个文件，将文本转换为字符串，处理字符串，再次将字符串作为打开文件的内容并保存。

从 AppleScript 编辑器打开 TextEdit 字典以查看可用的内容。

**但是**对于您需要做的事情（打开文件、进行更改、保存），**您甚至不需要 TextEdit**。

您可以将文件直接加载到脚本中，进行编辑和保存。它会更快：

将文件的路径设置为**theFile**并将文件打开为字符串

```
set fref to a reference to file theFile
set theText to read fref as string 
```

您已经准备好将内容放入**theText**以进行处理。

你会发现很多关于使用 AppleScript 处理字符串的教程；只是谷歌周围...

假设您只想替换一些文本，请使用该功能

```
on Substitute(s, f, r)
    if f = "" then return s
    set AppleScript's text item delimiters to f
    set theTextItems to text items of s
    set AppleScript's text item delimiters to r
    set s to theTextItems as string
    set AppleScript's text item delimiters to ""
    return s
end Substitute 
```

它需要字符串**s**搜索**f**替换**r**返回结果字符串。

最后你想保存你的文本。

再次将**theFile**设置为文件的文件路径（或保留原始路径）。

请注意，如果文件存在并且可写，它将被静默覆盖。

```
set fref to a reference to file theFile
open for access fref with write permission
set eof of fref to 0
write theText to fref starting at eof as string
close access fref 
```

**最后注意：**文件**theFile**的路径必须以*Applescript方式指定*

例如

```
set theFile to "MyMacHD:Users:Paolo:Desktop:myTextFile.txt" 
```

# signalr - 获取 SignalR 以引发 JQuery 延迟失败事件

> ID：14410637
> 
> 赞同：0
> 
> 时间：2013-01-19T02:47:35.343
> 
> 标签：signalr, jquery-deferred

我正在尝试确定如何让 SignalR 正确提升`fail`jQuery 延迟的方法。

目前我正在实现以下目标“

```
public void JoinChat(string username) 
{
  var user = userRepo.getUser(username);

  if(user == null)
  { 
    throw new Exception('user doesn't exist');
  }

  //set up user here

} 
```

然后在我的客户端的 js 中我正在这样做

```
$.connection.myHub.joinChat(this.username)
                  .done(//success callback)
                  .fail(//fail callback); 
```

我觉得让集线器生成异常以实现延迟失败并不是实现此目的的理想方法，但无论如何我都无法找到生成正确的失败回调。

我想避免使用 a，`return code`因为有些方法可以从集线器返回实际有用的信息（join 方法只是一个简单的示例）。

是否有为 jQuery deferred 调用失败条件的首选方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:53:00.190

这是唯一会调用 fall 回调的情况。当出现故障时（即异常）。

# c# - WCF 常用参数 ClientMessageInspector、DispatchMessageInspector 还是替代方法？

> ID：14410638
> 
> 赞同：8
> 
> 时间：2013-01-19T02:48:41.947
> 
> 标签：c#, asp.net, wcf, soa, wcf-4

我仅将 WCF 用于数据服务（即应用程序内部并且非常精简，没有会话状态等），以保持我们的 Web 应用程序可扩展。

我们需要为当前一直传入的每个服务调用提供一些通用属性。每次调用都只有一个请求对象并不理想，因为除了这些公共属性之外，其余的都非常多样化，并且在开发过程中变化非常频繁。

目前我正在考虑使用自定义标头和 clientmessageinspector 来设置值。对于这种情况，这是最简单的推荐方法还是有更好的方法？

**更多详情..**

下面的红点是我不确定正确方法（或如何去做）的地方。

![在此处输入图像描述](../Images/903da82b0668e8058f194e4ddece5f05.png)

**发送什么**

发送的数据是一组简单的 id（3 或 4 个用于 userid、clientid 等）——所有这些 id 都会影响安全性和性能（在某些情况下，它决定了要访问的数据库）。

我们还将扩展它以获得更复杂的权限 - Windows 工作人员不需要。

调用者将是一个 Web 应用程序，其中这些来自会话对象，或者是一个 Windows 服务工作者，其中这些是手动填充的。

**当前的想法**

理想情况下，调用者工作流上的 getinstance 将使用会话对象自动填充这些属性，或者使用 Windows 服务调用（不同的构造函数？）更手动地填充这些属性。

然后，我们将确保这些参数始终可用，无需任何思考，也无需在整个代码中不断引用，以在调用它的每个函数上构造合约。我们目前有很多服务调用（由于应用程序的规模/复杂性，而不是由于糟糕的工程:)），因此随着复杂权限的扩展，以自我记录的方式执行规则变得有点困难。

从概念上讲，会话是您在应用程序中处理此问题的地方，但服务实际上只是一个数据访问层（具有视图映射、分页和来自存储库调用的最后调用安全性），因此我们不需要那种重复或复杂性，只是要包含在查询中的关键身份和权限字段。

**问题**

这感觉很像我们应该对调用的标头做的事情，因为我们总是需要这些字段，但是我有点不确定 set 和 get 应该在端点和客户端接口的生命周期中的什么位置。我也很高兴我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T03:31:32.170

根据我使用消息检查器的经验，最初设置和配置可能非常棘手，而且在我的研究中，没有涵盖所有内容的网站，我不得不从几个不同的地方挑选片段并将它们拼凑在一起。

您需要质疑您在标题中添加的内容。是被调用的方法需要使用的信息吗？如果是这样，那么将其放在标题中是错误的选择，因为每种方法都需要将信息解析回来。

理想的信息类型是自定义身份验证和/或与 WCF 调用相关的用户特定元数据。在我的情况下，我有一个由自动化服务发起的 WCF 调用，该调用被中继到进一步的 WCF 端点，这是使用消息检查器的理想场景，因为我能够将元数据添加到中继点的标头以供后续使用终点。

如果您只是想打包一些对每个调用都通用的数据，那么我将包括创建一个具有适当属性的基本数据对象，然后将其扩展为更专业的调用（端点可以确保公共数据要么存在，要么假设一些默认值（如果不存在）。对于每个端点所需的公共数据，使用消息检查器是多余的，并且可能不可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:32:30.633

这可能是一种较旧的方法，但您可以轻松[地](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.aspx)从`System.Runtime.Remoting.Messaging`. 客户端可以使用 的实现`IClientMessageInspector`来设置操作调用的调用上下文，并使用`IMessageInspector`服务器上的实现来从`CallContext`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:01:34.907

我应用了类似的架构；基本上每个客户端调用都需要携带一些关于选择哪个DB的信息，一个标识符等。在服务器端，这些参数应该被自动处理并存储在一个字典中。

我创建了一个通用代理类来包装客户端代理，以便为每个服务调用添加相关的标头。每个需要调用服务的开发人员都在他们的调用中使用了这个通用代理类。

在服务端，我实现了`DispatchMessageInspector`一个端点行为，其中数据从请求标头中提取并存储在字典中。字典在 OperationContext ( ) 的扩展中初始化，`IExtension<OperationContext>`并且在请求处理期间可用。

请注意，服务的实例上下文模式是`PerCall`.

# php - 如何使用 $_GET 和 fancybox 获取期权价值？

> ID：14410642
> 
> 赞同：-1
> 
> 时间：2013-01-19T02:50:23.343
> 
> 标签：php, html, get, fancybox

在我的 html 页面中

```
$(function(){
    $('.addallitem ').fancybox({
        openEffect : 'elastic',
        closeEffect : 'elastic'
    });
}); 
```

**HTML**

```
 <select class="category">
            <option value="All">All</option>
            <option value="Apparel">Apparel</option>
            <option value="Appliances">Appliances</option>
    </select>
    <a href="addallitem.php?category=" class="addallitem fancybox.ajax">Add All</a> 
```

我很困惑我应该在里面放`addallitem.php?category=`什么？

当我单击全部添加时，将弹出一个表单，该表单应接收选项值

感谢那些帮助的人：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:55:58.330

### 这是什么类型的 HTML？

```
<a href="addallitem.php?category=" class="addallitem fancybox.ajax">Add All</button> 
```

它以!开头`<a>`和结尾`</button>`

如果你想做一个`$_GET`请求，最好的方法是：

```
<button onclick="location.href='addallitem.php?category=' + $('.category').val()" class="addallitem fancybox.ajax">Add All</button> 
```

我还是不明白，为什么你需要一个像`fancybox.ajax`. 如果有的话，让我们更多地了解您想要实现的目标和完整的 JavaScript 代码。

# ios - 应用程序进入后台时显示暂停菜单

> ID：14410644
> 
> 赞同：1
> 
> 时间：2013-01-19T02:50:51.057
> 
> 标签：ios, objective-c, cocos2d-iphone

在我的应用程序中，我有一个`showPauseMenu`方法可以暂停导演并显示我的暂停菜单。我想要的是当应用程序进入后台时（当这个人接到电话，点击主页按钮等）时自动调用这个方法。我相信我将不得不使用类方法或类似的东西。有任何想法吗？

更新：我现在在应用程序重新进入前台时成功调用了该方法。导演暂停了，但我的不安菜单从未出现。我的菜单是一个 CCLayer，当应用程序在前台时，它在屏幕外。所以在`pauseGameLayer`我简单地设置`pauseMenuLayer.position = ccp(0,0);`和暂停导演。就像我说的导演被暂停但图层没有移动到新位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:59:23.290

您想`applicationWillResignActive`在您的应用程序委托中实现消息。

看：

[http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillResignActive](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillResignActive)：

和

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:41:00.627

为了最好地解决我在应用程序进入后台时自行弹出暂停菜单的问题，这就是我所做的。`isPlaying`我首先在我的单例类中设置了一个变量 ( )。如果应用程序即将进入后台（我`applicationWillResignActive`在 AppDelegate 中使用）`isPlaying`设置为`TRUE`. 在我在游戏中的更新功能中会检查是否`isPlaying`设置为`TRUE`，一旦设置，它就会启动显示暂停菜单的功能。希望这可以帮助！

# delphi - 没有可以使用这些参数调用的“SendMsg”的重载版本

> ID：14410651
> 
> 赞同：3
> 
> 时间：2013-01-19T02:52:08.903
> 
> 标签：delphi, delphi-xe2

我正在将项目从 Delphi 2006 升级到 Delphi XE2 并遇到编译错误**没有可以使用这些参数调用的“SendMsg”的重载版本。** 这是问题所在的代码。

```
procedure TMessageComms.UpgradeError(Msg: String);
begin
  FConnection.SendMsg(cUpgradeError, Msg, FConnection.GetNextMsgID);
end; 
```

SendMsg 方法如下所示。

```
procedure SendMsg(ACommand, AParamStr : String; AMsgID : Integer); overload;

procedure TMsgConnection.SendMsg(ACommand, AParamStr: String; AMsgID: Integer);
begin
  // construct message
  // send message
end; 
```

cUpgradeError 是一个像这样声明的 const。

```
 cUpgradeError = 'UpgradeError'; 
```

这是返回整数的 GetNextMsgID 函数。

```
function TMsgConnection.GetNextMsgID: Integer;
begin
  Inc(FLastMsgID);
  Result := FLastMsgID;
end; 
```

这些参数对我来说似乎都是有效的。我已设法将其范围缩小到与 GetNextMsgID 函数有关但不确定是什么的程度。如果我将从函数返回的值转换为整数，那么它编译得很好，但我不明白为什么我必须这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:06:53.753

我的猜测是`FConnection.SendMsg(cUpgradeError, Msg, FConnection.GetNextMsgID);`试图解释`FConnection.GetNextMsgID`为函数指针而不是函数结果。

将其更改为，`FConnection.SendMsg(cUpgradeError, Msg, FConnection.GetNextMsgID());`以便清楚地表明您正在寻找函数结果。

# mysql - 变量作为列表不起作用 - 手动列表起作用

> ID：14410658
> 
> 赞同：0
> 
> 时间：2013-01-19T02:53:46.300
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL 查询以逗号分隔的字符串查找值](https://stackoverflow.com/questions/5033047/mysql-query-finding-values-in-a-comma-separated-string)

有个奇怪的问题，希望大家能帮我解答。如果我使用 g.questions （这是一个逗号分隔的 varchar 列表），这只会输出第一个 id。但是如果我手动输入“1,2,3,4”而不是 g.questions，我会得到我所期望的......

这是怎么回事？:-)

```
SELECT q.id FROM `questions` q 
LEFT OUTER JOIN `game` g 
ON g.id = 1 
WHERE q.id IN (g.questions) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:41:23.673

这将完成您正在尝试做的事情：

```
SELECT q.id FROM `questions` q 
LEFT OUTER JOIN `game` g 
ON g.id = 1 
WHERE concat(',',g.questions,',') like concat('%,',q.id,',%') 
```

在逗号分隔的字符串之前和之后添加一个逗号，以确保每个值都由逗号绑定，然后使用 like 将 ",1,2,3,4" 与 "%,2,%" 或任何你的 q.id 匹配.

# linux - PHP Socket编程从MCU读取数据

> ID：14410661
> 
> 赞同：0
> 
> 时间：2013-01-19T02:54:06.627
> 
> 标签：linux, atmel, php-socket

快速提问，我是套接字新手，所以我想知道有没有办法从**MCU**（Atmel）读取数据？我正在运行 Linux，我可以通过`RS232`或 USB 将 Atmel 连接到我的计算机（服务器）。有没有一种方法可以直接读取来自 MCU（USB/COM）的数据到我的计算机并进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:45:12.187

套接字是网络通信 (IP) 的概念，因此您需要两个设备上的网络接口，以及您的 Atmel 上的 IP 协议栈（对于运行真实操作系统的大型板可能是这种情况，例如嵌入式 Linux）。

如果您的 Atmel 具有 USB 接口，并且它实现了 USB 存储设备，您可能可以将 Atmel 安装到您的服务器上。

否则（即使用裸露的处理器 + 外围设备，但没有操作系统），您确实需要从头开始构建解决方案 - 然后使用 Atmel 的 UART 功能的串行接口将最快实现。

在（Unix/Linux）服务器端，您只需使用字符设备从串行或 USB 读取数据 - 例如`cat < /dev/ttySxx >> SerPort.txt`

# python - 解码带有隐藏控制字符的字符串

> ID：14410663
> 
> 赞同：0
> 
> 时间：2013-01-19T02:54:29.043
> 
> 标签：python

我有一个文件，其中包含带有隐藏控制字符的行。示例行如下所示：

```
go!^Mbap^[<80> 
```

、`^M`和`^[`是`<80>`隐藏字符。当我打印该行时，我看不到这些字符。但是，如果我使用该`repr()`函数，我可以看到这些字符由`\x1b0`.

如何将这些字符更改为我选择的 unicode 字符？

我尝试使用字符串模块`translate()`函数和正则表达式，但我似乎无法转换这些隐藏字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:06:48.383

Here is an example of how to use `str.translate` and (below) `unicode.translate`:

```
In [48]: import string

In [49]: text = 'go!\x1b0'

In [50]: text.translate(string.maketrans('\x1b\xa0','??'))
Out[50]: 'go!?0' 
```

The above command translates all `'\x1b'` and `'\xa0'` to question marks.

* * *

Or, if you want to translate a unicode string:

```
In [55]: text = 'go!\x1b0'

In [56]: unitext = text.decode('latin-1')

In [57]: unitext
Out[57]: u'go!\x1b0'

In [58]: unitext.translate({ord(u'\x1b'):ord(u'?')})
Out[58]: u'go!?0' 
```

If you have more than one character to translate, it may be more convenient to define the table this way:

```
In [59]: table = dict(zip(map(ord, u'\xb1\xa0'), map(ord, u'??')))

In [60]: unitext.translate(table)
Out[60]: u'go!\x1b0' 
```

# c++ - 64位Linux上的函数指针大小

> ID：14410669
> 
> 赞同：2
> 
> 时间：2013-01-19T02:56:26.483
> 
> 标签：c++, functional-programming, function-pointers

我正在编写一个更简单（更快）的 std/boost::function 等价物。我主要关心的是简单性和效率，该平台仅限于 x86-64 linux，使用 gcc 和 clang 编译。

在上述限制下，是否可以假设

1.  所有函数指针，即指向自由函数的指针、成员函数（POD、具有虚拟方法的类、派生类、虚拟继承类……）、仿函数、lambda……的大小都最多为 16 个字节？
2.  什么是对齐要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:01:36.200

对于 x86_64，您可以放心地假设任何指向函数和/或成员的指针都不会超过指向成员函数的指针的大小。对于 GCC，这将是`sizeof(void*)`，对于 clang 这将是`sizeof(void*)*2`（我上次检查时）。对齐要求是 16 个字节。使用 GCC，您可以依赖`__BIGGEST_ALIGNMENT__`预定义的宏。然而，它在 clang 上是不存在的。我唯一可以建议的是尽量不要假设，而是使用计算最大大小的编译时表达式。

**更新：**

正如@David 所指出的，在多重和/或虚拟继承的情况下，8 个字节可能不足以调度成员函数调用。因此`sizeof(void*)*2`在这两种情况下都适用，以保持安全。

最好的方法仍然是使用`sizeof`. 例如：

```
struct Foo {
};

typedef void* (Foo::*pmf)();
typedef void* (*bar)();

constexpr auto max_func_pointer_size() -> decltype(sizeof(void*)) {
    return sizeof(pmf) > sizeof(bar) ? sizeof(pmf) : sizeof(bar);
}

int main()
{
    static_assert(max_func_pointer_size() == 16, "oops!?");
} 
```

# java - Eclipse NullPointerException 我似乎无法修复

> ID：14410671
> 
> 赞同：1
> 
> 时间：2013-01-19T02:57:16.390
> 
> 标签：java, android, nullpointerexception

我正在将 Java Maze 应用程序移植到 Android 中。这意味着我正在使用给我的 Java 代码（我没有编写这部分），重写了一些类（即，将 Java 图形更改为 Android 图形，以便它可以在 Android 上运行，并且我已经创建了 Android UI 活动已经。

我的问题是……据我所知，迷宫是用“buildthread”建造的。我试图在迷宫构建过程线程（buildthread）期间进行干预，以更新我的生成活动的进度条。但是当我在我的 Mazebuilder 类中声明我的生成活动，然后使用我的“生成活动”变量 (GA) 尝试将更新的进度号发送回我的 android UI 类时，它会抛出一个空指针预期。

我很确定我在下面的代码中声明了变量并对其进行了初始化。

```
 public GeneratingActivity GA;

/**
 * Constructor for a randomized maze generation
 */
public MazeBuilder(){
    random = new Random();
}

public MazeBuilder(GeneratingActivity activity){
    random = new Random();
    GA = activity ;
} 
```

此处抛出错误（GA.increaseprogress(...)）：

```
private Seg findPartitionCandidate(Vector<Seg> sl) {
    Seg pe = null ;
    int bestgrade = 5000; // used to compute the minimum of all observed grade values, set to some high initial value
    int maxtries = 50; // constant, only used to determine skip
    // consider a subset of segments proportional to the number of tries, here 50, seems to randomize the access a bit
    int skip = (sl.size() / maxtries);
    if (skip == 0)
        skip = 1;
    for (int i = 0; i < sl.size(); i += skip) {
        Seg pk = (Seg) sl.elementAt(i);
        if (pk.partition)
            continue;
        partiters++;
        if ((partiters & 31) == 0) {
            // During maze generation, the most time consuming part needs to occasionally update the current screen
            // 
            if (GA.increaseProgress(partiters*100/expected_partiters))
            {

                // give main thread a chance to process keyboard events
                try {
                    Thread.currentThread().sleep(10);
                } catch (Exception e) { }
            }
        }
        int grade = grade_partition(sl, pk);
        if (grade < bestgrade) {
            bestgrade = grade;
            pe = pk; // determine segment with smallest grade
        }
    }
    return pe;
} 
```

这是我的生成活动 android 类，它启动迷宫构建过程并具有 increaseprogress 方法：

```
package edu.wm.cs.cs301.KatzAMaze;

public class GeneratingActivity extends Activity {

private ProgressBar progressBar1;
private int progressBarStatus = 0;

public MazeBuilder mazeBuilder;
public Maze maze;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_generating);

    progressBar1 = (ProgressBar) findViewById(R.id.progressBar1);

    Intent intent = getIntent();
    int mazeDifficulty = intent.getIntExtra("difficulty", 0);
    String mazeAlgorithm = intent.getStringExtra("algorithm");

    if (mazeAlgorithm == "Prim's"){
        mazeBuilder = new MazeBuilderPrim();
        mazeBuilder.build(maze, mazeBuilder.skill_x[mazeDifficulty], mazeBuilder.skill_y[mazeDifficulty],
                mazeBuilder.skill_rooms[mazeDifficulty], mazeBuilder.skill_partct[mazeDifficulty]); // changed THIS to maze
    }
    else { 
        mazeBuilder = new MazeBuilder();
        mazeBuilder.build(maze, mazeBuilder.skill_x[mazeDifficulty], mazeBuilder.skill_y[mazeDifficulty],
            mazeBuilder.skill_rooms[mazeDifficulty], mazeBuilder.skill_partct[mazeDifficulty]); // changed THIS to maze
    }

}
public boolean increaseProgress(int percentage){
    progressBar1.setProgress(percentage);
    return true ;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_generating, menu);
    return true;
}

// Configures the Back button to bring the user to the Title Screen
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        Toast.makeText(this, "Going back to Title Screen", Toast.LENGTH_SHORT).show();
        Log.i("GeneratingActivity", "You have selected to return to the Title Screen");
    }
    return super.onKeyDown(keyCode, event);
}

public void finishGenerating (View view) {
    Button generatingButton = (Button) findViewById(R.id.button1);
    generatingButton.isClickable();
    switch(view.getId()) {
    case R.id.button1:
        if (generatingButton.isPressed()) {
            Toast.makeText(this, "You have selected to Play", Toast.LENGTH_SHORT).show();
            Log.i("GeneratingActivity", "You have selected to Play");
        }
        break;
    }

    Intent intent = new Intent(this, PlayActivity.class);
    startActivity(intent);
}
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:24:06.347

您`MazeBuilder`使用无参数构造函数创建您的，但您需要使用另一个并传入`GeneratingActivity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T01:18:02.867

非常感谢@Squonk，正在改变

```
new MazeBuilder() 
```

至

```
new MazeBuilder(this) 
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:03:54.373

我相信当你打电话时`GA.increaseProgress(partiters*100/expected_partiters)`你的意思是`GeneratingActivity.increaseProgress(partiters*100/expected_partiters)`。如果这是正确的，那么`increaseProgress`必须是静态方法。

在这里，GA 为空。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T03:07:18.167

Just from a quick look at your code, it doesn't seem as though you are initializing the variable partiters. Since it is called in your GA.increaseprogress(...) function maybe that's causing a problem? It seems as though it would throw an error during the if statement above this call though and there is also a possibility that it is initialized somewhere else? If that is not the case, I'll continue looking at the problem to see if there is a more valid issue.

# php - 带或不带括号的优点和/或缺点

> ID：14410672
> 
> 赞同：0
> 
> 时间：2013-01-19T02:57:30.480
> 
> 标签：php, coding-style, tags

抱歉，如果这已经涵盖，但使用括号的优点/缺点是什么？这里有几个例子：

`exit;`或者`exit();`

`include "configuration.php";`或者`include("configuration.php");`

这只是“编码风格”，比如使用长标签和短标签，还是有实际区别？如果没有，为什么还要输入这两个额外的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:16:58.240

它们是语言结构而不是函数，因此不需要括号。事实上，使用括号的用处大致如下：`$five = (2+3);`

但是，由于它们可以采用“参数”（ 的退出代码`exit`、 的文件名`include`），并且其中一些甚至可以返回值（`include`并且相关函数“返回”`return`包含文件顶层中的语句返回的任何内容），将它们视为实际上是函数会有所帮助。

# forms - 如何比较 Play Framework 2 表单中的枚举？

> ID：14410673
> 
> 赞同：2
> 
> 时间：2013-01-19T02:58:00.130
> 
> 标签：forms, scala, enums, playframework, playframework-2.0

如何将 Play Framework 2 形式的枚举与枚举值进行比较？即使它们相等，此语句也会失败。

```
@if(myForm("sectionType").value == SectionType.MAIN_CONTACT_INFO) {
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:40:08.887

你说那`myForm("sectionType").value`是一个`Option[String]`，所以你不能直接使用`toString`，因为`Some("hello").toString`返回“Some(hello)”。

我建议尝试使用这种语法：

```
myForm("sectionType").value.get == SectionType.MAIN_CONTACT_INFO.toString
// or .getOrElse("") to avoid errors 
```

并且不要忘记`SectionType`在必要时导入（即，如果此类不在模型包中）

# c++ - C++ 性能：局部变量与数据成员

> ID：14410677
> 
> 赞同：1
> 
> 时间：2013-01-19T02:58:19.967
> 
> 标签：c++

假设代码打击是我的班级。它是简化的而不是完整的。让我们专注于`operator()`.

```
class Delta{
public:
    long long operator()() {
        auto now = steady_clock::now(); 
        auto delta = (now - last).count();
        last = now;
        return delta;
    }
private:
    steady_clock::time_point last;
}; 
```

`operator()`每秒可能被调用数千次。我只是想知道频繁分配和解除分配变量`now`，`delta`可能会损害`operator()`. 如果我想最大限度地提高速度，那么制作`now`和`delta`数据成员会更好吗？`class Delta`但我也听说编译时局部变量甚至可能不存在。所以不知何故，开销也不存在。

好吧，实际上这个运算符的速度对我的应用程序的速度没有任何影响。我只是想知道编译器中立的答案。当这种情况来临时。我应该让它成为数据成员还是局部变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:47:23.993

在 x86-64 上，我希望这段代码最终会同时出现`now`并`delta`在 RAX 中分配。在汇编语言中，代码将按以下顺序显示：

```
assume RSI:ptr _Delta
call steady_clock::now()
sub rax, [rsi].last
mov [rsi].last, rax
ret 
```

当然，在真正的汇编语言中，您会看到`steady_clock::now()`（例如）错误的名称，但您会明白大体上的意思。进入任何非静态成员函数后，它都会`this`在某个寄存器中。返回值总是在`rax`. 我没有看到编译器需要（甚至想要）为任何其他变量分配空间的任何特别好的理由。

在 32 位 x86 上，这最终会使用一些堆栈空间的可能性要高得多，尽管它可能会在 EDX:EAX 中返回 64 位值，在这种情况下，事情最终会与上面的非常相似，只需使用一个寄存器。

大多数其他处理器开始时的寄存器比 x86 多，因此寄存器压力较低。例如，在 SPARC 上，例程通常会从 8 个可用的本地寄存器开始并准备好使用，因此`now`在寄存器中分配几乎是确定的。

底线：您不太可能看到显着的速度差异，但如果您确实看到差异，我猜它更有可能倾向于使用局部变量而不是成员变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:18:11.850

它不会产生太大的影响（如果有的话）。操作系统根据页面分配内存（包括堆栈）。因此堆栈可能不会完成一个页面，因此该过程不需要上下文切换来获得另一个页面。

至于编译器中立的答案，速度将归结为上下文切换，处理器上运行的其他东西，......

此外，像您这样的一些人似乎专注于微观性能改进，但避开了大局。最好先找出瓶颈在哪里，然后集中精力解决这些问题。记住[80/20](http://en.wikipedia.org/wiki/Pareto_principle)法则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T03:38:05.170

优化通常取决于编译器。但是假设您使用的是相当不错的编译器，不会有性能损失，所以不用担心。为了证明这一点，我用 gcc 4.7 编译了你的代码，优化级别 3：

```
call   400770 <std::chrono::system_clock::now()@plt> ;; Call.
mov    rdx,rax             ;; Remembe temporary value in %rdx.
sub    rax,QWORD PTR [rbx] ;; Divide
mov    QWORD PTR [rbx],rdx ;; Wrie Back. 
```

根据上下文，它可能会得到进一步优化。或者它可能会变得更糟。举个例子，什么时候可以在堆栈上创建一个临时变量——你在 of`now`和之间放置了很多代码，`last`并且寄存器分配算法不能将所有变量都放在寄存器中，它会求助于使用堆栈。因此，对于实际结果，您必须检查生成的机器代码。但坦率地说，除了一件显而易见的事情外，这里没有太多需要优化的地方。如果您非常关心性能**，**那么您必须担心的是通过 PLT 进行的大量调用。换句话说——不要使用`std::chrono::system_clock::now()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T04:39:55.957

我不反对任何其他答案，但让我尝试用简单的术语来解释这一点，而无需机器代码。我将忽略一些重要的现实生活细节，但不要教授您所询问的概念。

假设您有一个包含这些变量的函数

```
 int a;
 int b;
 int c;
 int d; 
```

在编译期间，编译器将所有局部变量的大小相加，当调用函数时，运行时代码会为所有变量分配足够的堆栈空间。所以如果sizeof(int)为4，那么上面的变量需要16字节的栈空间。大多数编译器使用机器寄存器来保存堆栈指针（sp），所以当我们的函数被调用时，运行时代码会做类似的事情

```
sp = sp + 16 
```

为我们的 4 个变量保留空间。请注意，如果函数有 1 个或 1000 个局部变量，则分配局部变量的运行时代码需要相同的时间。每个变量没有成本（除非他们有 ctors 可以调用）。如果我们有一个像这样的 C 语句

```
d = b; 
```

伪机器代码看起来像

*(sp+12) = *(sp+4)

其中 12 是变量 d 在堆栈上的偏移量，4 是 b 的偏移量。（偏移量不会这么简单，堆栈上分配了其他东西。）

当您使用成员变量定义结构/类时

```
class X {
 int a;
 int b;
 int c;
 int d;
 void foo() { d = b; }
}; 
```

编译器还将所有变量的大小相加并为每个变量分配偏移量。但是现在 foo() 里面的代码变成了

```
*(this+12) = *(this + 4) 
```

虽然 sp 几乎总是保存在机器寄存器中，但“this”指针很可能只保存在机器寄存器中。现代编译器查看哪些变量使用最多，并将这些变量存储在寄存器中。由于“this”通常被大量引用（通常是隐含的），它通常被分配给一个寄存器。当“this”在寄存器中时，性能应该是相同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T03:04:55.063

粗略地说，您的代码中存在性能问题。

每当每次在堆栈上调用**operator()**时，都会创建和销毁两个变量（实际上它会发生）。

短期内你不会注意到性能，因为系统总是会为 Stack 保留一些内存，并且每次访问相同的内存。

但从长远来看（性能运行），您将能够看到差异。

# java - Java 8 中的“静态导入”与“静态导入”

> ID：14410681
> 
> 赞同：9
> 
> 时间：2013-01-19T02:59:21.413
> 
> 标签：java, static, import, java-8

我试图在 Java 上使用静态导入，但我写错了

```
static import java.lang.System.out; 
```

并且编译的代码（虽然找不到“out”符号），没有语法错误。

那么，“静态导入”究竟意味着什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T03:09:32.363

This should not compile.

```
static import java.lang.System.out; 
```

According to the [JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.3), a single static import should look like this:

```
import static java.lang.System.out; 
```

All forms of the Java import statement *start with* the `import` keyword, and I don't think there is any other context (i.e. apart from an import statement) in which the `import` keyword can be used.

[Note: the `import` and `static` keywords are not modifiers in this context, so the "modifiers can be supplied in any order" meta-rule does not apply here.]

* * *

In short, either your compiler / IDE is broken or confused ... or what you are looking at is not real Java source code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T03:44:11.890

显然，这是一个错误。

我正在使用 Sun 的 Java 8（JDK 1.8）来测试 lambdas ......但我认为接受“静态导入”很奇怪。

感谢所有的答案。我要把这个报告给孙。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T03:03:58.370

为了访问类的静态成员，您必须使用包含它的完整类名。例如，要访问类`pi`中的值`Math`，您必须使用`java.lang.Math.PI`. 但是，如果您导入它 ( `import static java.lang.Math.PI`)，您可以在代码中只使用 use`PI`来访问它。

# iphone - 当我开始输入时 UISearchBar 不起作用

> ID：14410684
> 
> 赞同：0
> 
> 时间：2013-01-19T03:00:21.443
> 
> 标签：iphone, uitableview, uisearchbar

我有一个搜索栏，但是当我开始输入时不起作用，应用程序不会崩溃，但搜索栏没有显示任何内容。

我的 TableViewController.h 文件：

```
#import <UIKit/UIKit.h>
#import "DetailController.h"

@interface TableViewController : UIViewController<UITableViewDelegate,UITableViewDataSource,UISearchBarDelegate>

@property (strong, nonatomic) IBOutlet UITableView *myTableView;
@property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
@property (weak, nonatomic) IBOutlet UINavigationItem *barra;
@property (strong,nonatomic) NSArray* jsonObject;
@property (strong,nonatomic) NSMutableArray* jsonObject2;
@property (nonatomic,strong) NSString* conexion;
@property (nonatomic,strong) NSString* titul;

- (IBAction)back:(id)sender;

@end 
```

我的 TableViewController.m 文件

```
#import "TableViewController.h"
#import "CostumCell.h"
#import <SDWebImage/UIImageView+WebCache.h>
#import <QuartzCore/QuartzCore.h>

@interface TableViewController ()

@end

@implementation TableViewController

@synthesize myTableView;
@synthesize searchBar;
@synthesize barra;
@synthesize jsonObject;
@synthesize jsonObject2;
@synthesize conexion;
@synthesize titul;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

//
//load the JSON object
barra.title=titul;
[UIApplication sharedApplication].networkActivityIndicatorVisible=YES;
NSData *response = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:conexion]];
NSInputStream *stream = [[NSInputStream alloc] initWithData:response];
[stream open];
//
if(stream)
{
    NSError *parseError = nil;
    jsonObject = [NSJSONSerialization JSONObjectWithStream:stream options:NSJSONReadingAllowFragments error:&parseError];
    jsonObject2 = [[NSMutableArray alloc]initWithArray:jsonObject];
}
//
self.myTableView.delegate=self;
self.myTableView.dataSource=self;
self.searchBar.delegate=self;

[UIApplication sharedApplication].networkActivityIndicatorVisible=NO;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return [jsonObject count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath{
static NSString* CellIdentifier=@"Cell";
CostumCell * cell =[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(!cell){
    cell=[[CostumCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}
cell.label.text = [[jsonObject objectAtIndex:indexPath.row]objectForKey:@"nombres"];
[cell.imageView setImageWithURL:[NSURL URLWithString:[[jsonObject objectAtIndex:indexPath.row]objectForKey:@"imagenes"]]placeholderImage:[UIImage imageNamed:@"Untitled-1.png"]];
[cell.imageView.layer setBorderColor: [[UIColor blackColor] CGColor]];
[cell.imageView.layer setBorderWidth: 2.0];
UIView *backView = [[UIView alloc] initWithFrame:CGRectZero];
backView.backgroundColor = [UIColor clearColor];
cell.backgroundView = backView;
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"marcadeagua.jpg"]];
[tempImageView setFrame:self.myTableView.frame];
self.myTableView.backgroundView = tempImageView;
self.myTableView.separatorColor= [UIColor blackColor];

return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"showDetail"]) {
    NSIndexPath *indexPath = [self.myTableView indexPathForSelectedRow];
    DetailController *destViewController = segue.destinationViewController;
    destViewController.nombre=[[jsonObject objectAtIndex:indexPath.row]objectForKey:@"nombres"];
    destViewController.telefonos=[[jsonObject objectAtIndex:indexPath.row]objectForKey:@"telefonos"];
    destViewController.imagen=[[jsonObject objectAtIndex:indexPath.row]objectForKey:@"imagendetalles"];
    destViewController.conexion=[[jsonObject objectAtIndex:indexPath.row]objectForKey:@"conexion"];
    destViewController.value=indexPath.row;
}
}

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
if([searchText length] == 0){
    [jsonObject2 removeAllObjects];
    [jsonObject2 addObjectsFromArray:jsonObject];
}else{
    [jsonObject2 removeAllObjects];
    for (NSDictionary *item in jsonObject) {
            NSString *string = [item objectForKey:@"nombres"];
            NSRange range = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                [jsonObject2 addObject:item];
        }
    }
}
[myTableView reloadData];
}

-(void)searchBarSearchButtonClicked:(UISearchBar *)asearchBar{

[searchBar resignFirstResponder];

}

- (void)viewDidUnload
{
[self setMyTableView:nil];
[self setSearchBar:nil];
[self setBarra:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)back:(id)sender {
[self dismissModalViewControllerAnimated:YES];
}
@end 
```

我尝试过使用不同的代码，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:09:57.920

You made a mistake

you don't initialize **UISearchBar** in your `-(void)viewDidLoad` method

just put this line into `-(void)viewDidLoad`

```
 searchBar = [[UISearchBar alloc] init]; 
```

**EDIT :**

For more information about **UISearchBar** Refer this [Link](http://www.iphonedeveloperdiary.com/2010/07/adding-a-uisearchbar-to-top-part-tableview/)

& for Documentation about **UISearchBar** Refer this [http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:21:35.107

不是您的问题的答案，而是这一行：

```
NSData *response = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:conexion]]; 
```

在主线程上执行，这是一个很大的不。`initWithContentsOfURL`正在阻塞线程，直到它完成下载，并且每次您呈现此视图控制器时都会导致您的应用程序冻结一秒钟。

# heroku - 限制对heroku应用程序的访问

> ID：14410685
> 
> 赞同：8
> 
> 时间：2013-01-19T03:00:25.233
> 
> 标签：heroku, cloudflare

我正在使用 cloudflare 来保护我的 heroku 应用程序，但用户仍然可以通过 myapp.herokuapp.com 直接访问该应用程序，并且似乎无法删除 heroku 使用的默认域名。如何通过删除默认域名或设置某种白名单规则来防止直接访问应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-04T05:42:11.413

照原样，heroku 不允许删除应用程序的 herokuapp.com 域。但是，他们建议如果必须仅通过自定义域访问应用程序，则可以将对 herokuapp.com 目标的请求重定向（301 重定向）到您的自定义域 URL。

这篇笔记中提到了：

[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

# jquery - $("#id") 只选择第一个元素但 $("div#id") 选择两者？

> ID：14410693
> 
> 赞同：2
> 
> 时间：2013-01-19T03:02:33.053
> 
> 标签：jquery, css-selectors

```
<!DOCTYPE HTML>

<script src='http://code.jquery.com/jquery-latest.min.js'></script>

<body>

<div id='mydiv'>Hello, buddy.</div>
<div id='mydiv'>Hello, friend.</div>

</body> 
```

在 JQuery 中，如果我`$('#mydiv')`只选择第一个 div，但如果我这样做`$('div#mydiv')`，它将选择所有这些。

我知道指定元素以及 id 会阻止选择具有相同 id 但不是 div 的其他元素。

这不是一个错误吗？不应该`$('#mydiv')`选择 id 为“mydiv”的所有元素吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T03:07:13.157

### Explanation for jQuery

Also, in your case, jQuery should select only one element, and the first element for `ID`. Since you have also given `div`, it uses `getElementsByTagName`, and matches the attribute with ID. So, it returns all the instances. Please correct me if I am wrong.

### Suggestion

According to web standards, the `id` attribute must be unique. So, each element should have unique ID. If you want to use things for multiple elements, you have classes.

Also, your HTML won't validate, if you have multiple IDs.

Also, from the [XHTML 1.0 Spec](http://www.w3.org/TR/xhtml1/#h-4.10)

> In XML, fragment identifiers are of type ID, and there can only be a single attribute of type ID per element. Therefore, in XHTML 1.0 the id attribute is defined to be of type ID. In order to ensure that XHTML 1.0 documents are well-structured XML documents, XHTML 1.0 documents MUST use the id attribute when defining fragment identifiers on the elements listed above. See the HTML Compatibility Guidelines for information on ensuring such anchors are backward compatible when serving XHTML documents as media type text/html.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T03:04:14.267

这根本不是错误... ID (#myId) 不应该在多个实例中使用。这就是我们有类（.myClasses）的原因。

因此，您可以随心所欲地使用类。但是每个 HTML 页面的 ID 始终是唯一的。您可能有一个 ID 显示在许多不同的页面中，但始终作为唯一 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T03:07:35.650

`#mydiv` is likely optimized to use `getElementById`, which is described in the [specs](http://www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-html.html) as:

> Behavior is not defined if more than one element has this id.

Usually the first element with such an ID is returned though.

# mysql - MySQL 数据汇总技巧 - 是否有 UNGROUP BY？

> ID：14410696
> 
> 赞同：4
> 
> 时间：2013-01-19T03:03:22.287
> 
> 标签：mysql, sql, group-by

我正在尝试做一些数据报告，并且不要经常做 SQL 体操来知道我在寻找什么功能。我将其称为“取消分组依据”。我有一个 SELECT 输出这个，反映了一系列每月订阅项目：它们何时创建、关闭以及每月支出是多少：

```
+----+---------------------------------+------------+------------+------------+
| id | description                     | created_on | closed_on  | monthly    |
+----+---------------------------------+------------+------------+------------+
|  3 | Daily horoscope email           | 2012-01-01 | null       | 10000.0000 |
|  5 | Pet food delivery               | 2012-01-05 | null       |  3500.0000 |
|  6 | Dirty magazine subscription     | 2012-01-09 | null       |  1500.0000 |
|  7 | Stupid nuts posted in a box     | 2012-01-01 | 2012-01-04 |  1500.0000 |
  .... etc ... 
```

我正在尝试做的是每天计算“运行率”。因此，每天都会列出当前每月承诺的总计，即上述数据将映射到：

```
+------------+----------+
| date       | run_rate |
+------------+----------+
| 2012-01-01 | 11500    |
| 2012-01-02 | 11500    |
| 2012-01-03 | 11500    |
| 2012-01-04 | 10000    |
| 2012-01-05 | 13500    |
| 2012-01-06 | 13500    |
| 2012-01-07 | 13500    |
| 2012-01-08 | 13500    |
| 2012-01-09 | 15000    | 
```

我认为可能的是创建一个每天有一行的临时表，然后编写一个引用第一个表的 LEFT JOIN / GROUP BY 语句来构建我的输出。但是我只能看到如何以这种方式创建每天的“差异”，而不是运行总计，并且我需要将第一个表“取消组合”为两个条目，这是创建订阅时的正条目，以及关闭时的否定条目。

我想坚持 MySQL，如果可能的话，在一个大型声明中。如果这不可能，我可以将一些存储过程或临时表添加到我的查询框架中。或者我真的必须通过 Ruby 来研究我的数据吗？（我确切地知道怎么做，但希望我能把所有的逻辑都放在一个地方，我正在努力改进我们目前使用 ActiveRecord 的缓慢计算）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:38:28.683

尝试这样的事情——应该会产生你想要的结果：

```
SET @runtot:=0;
SELECT
   mydates.seeddate,
    (@runtot := @runtot + IFNULL(m.amt,0) - IFNULL(m2.amt,0)) AS rt
FROM
   mydates left join 
    (Select createdon, SUM(monthly) amt
     FROM mytable 
     group by createdon
     ) m on mydates.seeddate = m.createdon
left join 
    (Select closed_on, SUM(monthly) amt
     FROM mytable 
     group by closed_on  
     ) m2 on mydates.seeddate = m2.closed_on 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/cdd984/2)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T05:48:38.020

试试这个：

```
select date,sum(monthly)
from     
(
   select created_on as date from yourtable 
   union 
   select closed_on from yourtable where closed_on is not null
) as alldates
left outer join yourtable
  on date >= created_on
 and (closed_on is null or date < closed_on)
where date between '2012-1-1' and '2012-1-31'
group by date order by 1 
```

根据您的示例数据，输出为：

```
+------------+--------------+
| date       | sum(monthly) |
+------------+--------------+
| 2012-01-01 |     11500.00 |
| 2012-01-04 |     10000.00 |
| 2012-01-05 |     13500.00 |
| 2012-01-09 |     15000.00 |
+------------+--------------+
4 rows in set (0.00 sec) 
```

我们可以计算出当天不存在的日期等于最接近的日期。例如，“2012-01-02”的 run_rate 等于“2012-01-01”的 run_rate。

假设您已经有一个包含当月所有日期的表，我们称之为“mydate”，其中有一列“date”。

```
mysql> select * from mydate where date >= '2012-1-1' and date <= '2012-1-31';
+------------+
| date       |
+------------+
| 2012-01-01 |
| 2012-01-02 |
| 2012-01-03 |
| 2012-01-04 |
| 2012-01-05 |
| 2012-01-06 |
| 2012-01-07 |
... 
```

然后更换

```
(
select created_on as date from yourtable 
union 
select closed_on from yourtable where closed_on is not null
) as alldates 
```

和`mydate`

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T06:25:04.067

这是另一种使用方法：`INFORMATION_SCHEMA.COLLATION_CHARACTER_SET_APPLICABILITY`它将在其中创建日期，而无需创建临时表。`Explan plan`可以确认哪种方法最适合您。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/d58af/2)

SET @rrate:=0;

```
SELECT X.rdate, (@rrate:=@rrate +
COALESCE(Y.summonthly,0) -
COALESCE(Z.summonthly,0)) as run_rate
FROM(
      SELECT date_add(P.createdon, interval `day` day)
      as rdate
      FROM 
          (SELECT @i:= @i + 1 AS `day`
           FROM   
           INFORMATION_SCHEMA.COLLATION_CHARACTER_SET_APPLICABILITY,
           (SELECT @i:= -1) AS i
           ) As D,
      rategroups P
      GROUP BY rdate
      HAVING rdate <= (SELECT MAX(createdon) FROM rategroups)
      ORDER BY rdate) X
LEFT JOIN 
      (SELECT createdon, sum(monthly) summonthly
       FROM rategroups
       GROUP BY createdon) Y
ON X.rdate = Y.createdon
LEFT JOIN 
      (SELECT closed_on, sum(monthly) summonthly
       FROM rategroups
       GROUP BY closed_on) Z
ON X.rdate = Z.closed_on
GROUP BY X.rdate
;

|                          RDATE | RUN_RATE |
---------------------------------------------
| January, 01 2012 00:00:00+0000 |    11500 |
| January, 02 2012 00:00:00+0000 |    11500 |
| January, 03 2012 00:00:00+0000 |    11500 |
| January, 04 2012 00:00:00+0000 |    10000 |
| January, 05 2012 00:00:00+0000 |    13500 |
| January, 06 2012 00:00:00+0000 |    13500 |
| January, 07 2012 00:00:00+0000 |    13500 |
| January, 08 2012 00:00:00+0000 |    13500 |
| January, 09 2012 00:00:00+0000 |    15000 | 
```

# spring-security - Spring Security 3.1 中的小写比较发生了什么？

> ID：14410697
> 
> 赞同：2
> 
> 时间：2013-01-19T03:03:33.880
> 
> 标签：spring-security

我最近从 3.0 升级到 3.1，小写比较不再可用。

它发生了什么？在使用 ldap 服务器进行身份验证时，我可以做些什么来确保区分大小写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:03:19.950

我找到了一种确保在登录过程中使用区分大小写的方法。

我将 caseExactMatch 添加到搜索过滤器中。我在下面粘贴了我的 ldap-authentication-provider 的一部分，以帮助其他人解决同样的问题。

```
<authentication-manager>
<ldap-authentication-provider server-ref="ldapServer"  
   user-search-base="ou=users,dc=mydomain,dc=com" 
   user-search-filter="(uid:caseExactMatch:={0})"
   group-role-attribute="cn"
   group-search-base="ou=Groups,dc=mydomain,dc=com"
   group-search-filter="(uniqueMember={0})"
   role-prefix="ROLE_"
   user-details-class="inetOrgPerson" 
   />
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T10:54:07.360

正如卢克所建议的那样，这似乎是替代 - request-matcher="ciRegex"（在 3.1+ 中）到小写比较 =“true”（3.0）。没有哪个弹簧与区分大小写进行比较。

# ruby-on-rails - 简单的模式。如何将输入覆盖为 text_field？

> ID：14410698
> 
> 赞同：1
> 
> 时间：2013-01-19T03:03:38.307
> 
> 标签：ruby-on-rails, jquery-ui, date, simple-form

我正在使用 simple_form gem，我需要将“created_at”字段的类型从输入更改为 text_field（以便将此字段与 jQuery 日期选择器一起使用）。可能吗？

```
as: :string 
```

不是合适的答案，因为它不适用于 jQuery.datepicker

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:39:18.107

需要在 app/inputs/date_picker.rb 中创建特定的 DatePickerInput 类

```
app/inputs/date_picker.rb

class DatePickerInput < SimpleForm::Inputs::StringInput 
  def input                    
    value = object.send(attribute_name) if object.respond_to? attribute_name
    input_html_options[:value] ||= I18n.localize(value) if value.present?
    input_html_classes << "datepicker"

    super # leave StringInput do the real rendering
  end
end 
```

javascript

```
jQuery -> 
 $('input.date_picker').datepicker() 
```

在表格中只需添加以下行

```
 = f.input :due, as: :date_picker 
```

该线程解决了我的问题[如何](https://stackoverflow.com/questions/5007785/how-do-i-write-a-cleaner-date-picker-input-for-simpleform)感谢 rio为 SimpleForm 编写更简洁的日期选择器输入

# javascript - 我做了一个小书签，它似乎可以在除 safari 之外的所有浏览器上正常工作。由于某种原因，包含的文件有问题

> ID：14410702
> 
> 赞同：0
> 
> 时间：2013-01-19T03:04:13.650
> 
> 标签：javascript, jquery, bookmarklet

好的，所以我有一个书签，可以打开加载程序 img，然后创建/加载/附加 5 个包含的 JS/CSS 文件。

在 chrome、FF、IE、Opera 中运行良好。但是在野生动物园它有一个问题。

由于 firebug lite 非常没用，而且 safari 开发者工具没有抛出任何错误，我不得不尝试`console.log()`某些输出来查看问题出在哪里。

我发现问题在于包含的加载或我检查包含是否已加载的方式。

如果您仔细查看代码，您会看到它的 CSS 包含。更奇怪的是，当我检查元素并滚动到标题时，它显示包含的文件在那里。

我知道我可能可以创建一个函数来提高这段代码的效率，但现在我没有。

代码有点长，所以这里有一个 gisthube 链接： [https ://gist.github.com/b443582b1ced537b7612](https://gist.github.com/b443582b1ced537b7612)

```
/* creating loading and appending include files for the bookmarklet*/
if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
var done = false;
var jquery_load = document.createElement("script");
jquery_load.src = "http://ajax.googleapis.com/ajax/libs/jquery/" + v + "/jquery.min.js";
jquery_load.setAttribute('id', 'yk_bookmarklet_jquery');
jquery_load.onload = jquery_load.onreadystatechange = function(){
    if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
        loaded_headers++;
        console.log("Next1"); // <-- is being printed to console 
        if(loaded_headers >= total_headers){
            done = true;
            $.getJSON("xxxx",
                function(data){
                    /* more variables*/
                    window.mbm = false;
                    initMyBookmarklet(); // function that has the bookmarklet info.
                });
        }
    }
};

var CssScript = document.createElement("link");
CssScript.href = "xx;
CssScript.setAttribute('type', 'text/css');
CssScript.setAttribute('rel', 'stylesheet');
CssScript.setAttribute('media', 'all');
CssScript.setAttribute('id', 'yk_bookmarklet_css');
CssScript.onload = CssScript.onreadystatechange = function(){
    if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
        loaded_headers++;
        console.log('Next2');// <-- DOES NOT print to console
        if(loaded_headers >= total_headers){
            done = true;
            $.getJSON("xxxx",
                function(data){
                    /* more variables*/
                    window.mbm = false;
                    initMyBookmarklet(); // function that has the bookmarklet info.
                });
        }
    }
};

/*appending the created elements*/
document.getElementsByTagName("head")[0].appendChild(jquery_load);
document.getElementsByTagName("head")[0].appendChild(yk_bookmarklet);

} 
```

我知道代码有点长，所以我将包含一个 gist hub 链接： [https ://gist.github.com/b443582b1ced537b7612](https://gist.github.com/b443582b1ced537b7612)

谢谢。

# android - 将数据从一个活动设置到另一个活动

> ID：14410706
> 
> 赞同：2
> 
> 时间：2013-01-19T03:04:58.527
> 
> 标签：android, android-intent

我有一个 ListFragment，我想在列表视图中单击时编辑项目。

我正在使用这种方法。

```
 @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(dbHelper != null){
            Item item = dbHelper.getProjectRowById(id);
            Intent intent = new Intent(getActivity(), Save.class);
            //Here i want to start the activity and set the data using item.  
        }           
    } 
```

我如何在上述方法中设置数据。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:03:55.860

当你开始一个新的 Activity 时，你可以发送额外的数据和一个 Intent。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    if(dbHelper != null){
        Item item = dbHelper.getProjectRowById(id);

        // Put the data on your intent.
        Intent intent = new Intent(getActivity(), Save.class);
        // If Item implements Serializable or Parcelable, you can just send the item:
        intent.putExtra("dataToEdit", item);
        // Otherwise, send the relevant bit:
        intent.putExtra("data1", item.getSomeDataItem());
        intent.putExtra("data2", item.getAnotherDataItem());
        // Or, send the id and look up the item to edit in the other activity.
        intent.putExtra("id", id);

        // Start your edit activity with the intent.
        getActivity().startActivity(intent);
    }
} 
```

在编辑活动中，您可以获得启动它的 Intent。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(...);

    Intent intent = getIntent();
    if (intent.hasExtra("dataToEdit")) {
        Item item = (Item) intent.getSerializableExtra("dataToEdit");
        if (item != null) {
            // find edittext, and set text to the data that needs editing
        }
    }

} 
```

然后用户可以编辑该文本，您可以在他们单击保存或其他任何内容时将其保存到数据库中。然后调用`finish`您的保存活动。

如果您需要将保存的数据发送回原始活动（而不是说，只是在 中重新查询`onStart`），请查看[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29). 如果你使用它，你可以[`setResult`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)在调用之前设置一个结果代码`finish`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:05:14.737

利用

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    if(dbHelper != null){
        //don't do this here Item item = dbHelper.getProjectRowById(id);
        Intent intent = new Intent(getActivity(), Save.class);
        intent.putExtra("MyItemId", id);
    }           
} 
```

在您的第二个活动中，您获取 Id 并加载元素

```
Bundle extras = getIntent().getExtras();
long id = extras.getInt("MyItemId");
Item item = dbHelper.getProjectRowById(id); 
```

你也需要 dbHelper。如果您只想要它的一个实例，请将其设为 App 类的变量。

# mysql - Order results by date in second table

> ID：14410715
> 
> 赞同：1
> 
> 时间：2013-01-19T03:07:10.483
> 
> 标签：mysql, select, group-by, sql-order-by

a bit of background...

I currently have a client area for clients to login and see their job's progress and leave any comments etc. In the client area, I have an admin area where it enables me to login and view all of the jobs. Everything is working fine, but i'd like to be able to sort it a bit neater.

The database consists of 4 tables, 2 of these are relevant to this query... Jobs and Posts. Currently the list just shows a full list of jobs for every client using the following:

```
$result = mysql_query("SELECT * FROM Jobs ORDER BY date DESC"); 
```

Then:

```
<a href="jobdetail.php?clientid='. $row['ClientID'].'&jobid='.$row['JobNumber'].'">'. $row['Username'].' - '. $row['ClientID'].'.'.$row['JobNumber'].' - '.$row['Description'].' - '.$row['Status'].'</a> 
```

As you can see, the details are taken from the database and echoed, and the whole thing is then linked to the page that loads the job from their ClientID and JobNumber. All client's can have a job number 1 eg ClientID: 12345 and ClientID: 12346 can both have JobNumber1\. At the moment this all works fine, but i'd like to have the the Job that has the newest post related to it in the Posts table at the top, and then the next newest, and so on.

At the moment after some research i've got to this:

```
SELECT
Jobs.*
FROM Jobs
LEFT JOIN Posts ON Posts.JobNumber=Jobs.JobNumber
GROUP BY
Jobs.ClientID, Jobs.JobNumber
ORDER BY Posts.PostDate 
```

And whilst I am getting all of the results, I am not getting them in order of the date of the post. I have a feeling it is because i'm not actually pulling the PostDate value from the Posts table, but i've tried loads and i'm not managing to get anything to work!

If anyone could give me any pointers it'd be much appreciated. Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:44:16.750

得到它的工作：

```
SELECT
c.ClientID
, j.JobNumber , j.Username , j.Description , j.ClientID , j.Status , j.AdminUnread
, MAX(p.PostDate) as postedOn
FROM Clients c
INNER JOIN Jobs j ON c.ClientID=j.ClientID
LEFT JOIN Posts p ON j.JobNumber=p.JobNumber AND c.ClientID=p.ClientID
GROUP BY
c.ClientID
, j.JobNumber
ORDER BY
postedOn DESC, c.ClientID, j.JobNumber DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:30:39.117

尝试这个：

```
SELECT *  
FROM Jobs j 
INNER JOIN ( SELECT p.* 
             FROM posts p 
             INNER JOIN (SELECT JobNumber, MAX(postdate) postdate 
                         FROM posts GROUP BY jobnumber
                        ) a ON p.JobNumber = a.JobNumber AND a.postdate = p.postdate
           ) p ON p.JobNumber = j.JobNumber 
GROUP BY j.ClientID, j.JobNumber 
ORDER BY p.PostDate; 
```

# android - android webview错误页面未找到

> ID：14410725
> 
> 赞同：7
> 
> 时间：2013-01-19T03:08:43.280
> 
> 标签：android, html, webview, assets

我使用 webVIew 读取本地 HTML。资产的HTML 存储位置 **项目**

有些手机可以成功（三星...）有些手机不能（HTC nexus...）

这是我的代码

```
public class MainActivity extends Activity {
    private WebView wvBrowser; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        findViews();
    }

    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (wvBrowser.canGoBack() && event.getKeyCode() == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            wvBrowser.goBack();
            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

    private void findViews() {
        wvBrowser = (WebView) findViewById(R.id.Browser);

        //wvBrowser.loadUrl(getString(R.string.googleUrl));

        wvBrowser.getSettings().setSupportZoom(true);
        wvBrowser.getSettings().setBuiltInZoomControls(true);
        wvBrowser.loadUrl("file:///android_asset/ts.htm");      
    }   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-25T19:20:42.373

只是想再添加一个答案。有人可能会发现我的建议很有帮助。您需要在 AndroidManifest.xml 中添加使用权限。我通过添加此行修复了类似的错误

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T05:03:05.787

试试这个链接，它会帮助你更好 [的 webview](http://developer.android.com/reference/android/webkit/WebView.html)

将 WebViewClient 附加到您的 WebView，您可以在其中覆盖 onReceivedError()

```
webview.setWebViewClient(new WebViewClient() {
       public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {

       }
     }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T03:25:43.163

这是你的解决方案

根据文档和我的经验，它应该工作得很好。您只需在**WebView**中使用**覆盖**方法**onReceivedError设置您的****WebClient**。

 ******这是我的一些旧测试应用程序的片段：

```
 wvBrowser = (WebView) findViewById(R.id.Browser);
 wvBrowser.setWebViewClient(new WebViewClient() {
    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Log.i("WEB_VIEW_TEST", "error code:" + errorCode);
            super.onReceivedError(view, errorCode, description, failingUrl);
    }
 }); 
```

我已经对其进行了测试，并且效果很好。检查你的日志，看看你得到什么样的代码错误。

这都可以在[http://developer.android.com/reference/android/webkit/WebView.html上找到](http://developer.android.com/reference/android/webkit/WebView.html)

希望能帮助到你。******

# asp.net - 不可见列的 ASP.NET GridView 数据是否存储在视图状态中？

> ID：14410728
> 
> 赞同：0
> 
> 时间：2013-01-19T03:09:35.083
> 
> 标签：asp.net, sql-server, select, gridview

如果我`select *`从 MS-SQL 表中查询并仅显示几个数据列（其余列不可见或不存在），发送到 GridView 的查询结果是否包括所有未使用列的数据或GridView 仅发送将要显示的数据。如果发送了所有数据，那么是仅将这些数据存储在 ViewState 中还是存储所有数据谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:20:00.807

你的问题有点模棱两可。您的意思是，如果您不显示或定义数据集中包含的列，`ViewState`大小是否仍会像显示时一样增加？如果这就是你要问的，那么答案是否定的。例如，您可以拥有一个包含 100 列的 DataTable，但如果您在 GridView 中仅显示其中的 1 列，那么`ViewState`大小将与您的 DataTable 仅包含该一列相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:39:26.337

是的。所有列都可供 GridView 显示。现在取决于您是要显示部分还是全部。`AutoGenerateColumns="true"`当您在 GridView 上进行设置时，这一点很明显。

GridView 是一个表示对象，抽象/提取底层数据源中的信息，例如

```
<asp:GridView runat="server" DataKeyNames="ProductID" ID="GridView1">
<Columns>
    <asp:BoundColumn HeaderText="Product Name" DataField="ProductName" />
    <asp:BoundColumn HeaderText="Price" DataField="Price" />
</Columns>
</asp:GridView> 
```

从上面的示例中，`ProductName`并`Price`显示在 GridView 中，但您的数据源中的其他一些列可用，例如`ProductID`用于`DataKeyNames`

# php - 我可以在这个 php 电子邮件表单中添加什么以使其发送附件

> ID：14410730
> 
> 赞同：-2
> 
> 时间：2013-01-19T03:09:49.720
> 
> 标签：php, image, forms, email, attachment

我想这样做，以便我可以将文件字段“图像”中指定的图像附加到我的表单发送的电子邮件中。我可以在这里添加什么来做到这一点？我很感激帮助。如果一切顺利，它应该向我发送一条带有指定信息和图像附件的消息。

```
<?php 
if ($_POST["email"]<>'') { 
$ToEmail = 'skidberna@yahoo.com'; 
$EmailSubject = 'Contact form from Legendmaker Customer: ' .$_POST["email"]; 
$mailheader = "From Legendmaker Customer: ".$_POST["name"]."\r\n"; 
$mailheader .= "Reply-To: ".$_POST["name"]."\r\n"; 
$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
$MESSAGE_BODY = "Name: ".$_POST["name"]."     "; 
$MESSAGE_BODY .= "Email: ".$_POST["email"]."     "; 
$MESSAGE_BODY .= "Recipient's Gender: ".nl2br($_POST["gender"])."     ";
$MESSAGE_BODY .= "Recipient's Name: ".$_POST["recipientname"]."     ";
$MESSAGE_BODY .= "Recipient's Hobbies/Interests: ".nl2br($_POST["hobbies"])."   ";
$MESSAGE_BODY .= "Recipient's Age: ".$_POST["age"]."     ";
$MESSAGE_BODY .= "Other Information: ".nl2br($_POST["otherinfo"])."     "; 
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?>
<title>The Legend Maker - submit a story (test server)</title>
<link href="/CSS/CSS.css" rel="stylesheet" type="text/css"> 
<div align="center">
<p><span class="linkText"><a href="/index.html">Home</a> 
<a href="/contact-us.php">Contact Us</a> 
<a href="/payments.html">Payments</a>    </span> </p>
<p>&nbsp;</p>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">(for testing purposes)</h2>
<h2 class="headingText">Submit a story test server</h2>
</div>
<p>Your story request was submitted
<?php 
 } 
 else 
 { 

?> 
</p>
<title>The Legend Maker - submit a story (test server)</title>
<link href="/CSS/CSS.css" rel="stylesheet" type="text/css">

<div align="center">
<p><span class="linkText">
<a href="/index.html">Home</a> 
<a href="/contact-us.php">Contact Us</a> 
<a href="/payments.html">Payments</a></span> </p>
<p>&nbsp;</p>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">&nbsp;</h2>
<h2 class="headingText">(for testing purposes)</h2>
<h2 class="headingText">Submit a story test server</h2>
</div>
<form action="submit-story-with-attach.php" method="post" enctype="multipart/form-data">
<table width="476" height="468" border="0" cellpadding="0" cellspacing="2">
<tr>
<td width="23%" height="25" class="bodytext"><p align="center">Your Name:</p></td>
<td width="77%"><input name="name" type="text" id="name" size="32"></td>
</tr>
<tr>
<td height="25" class="bodytext"><p align="center">Email Address:</p></td>
<td><input name="email" type="text" id="email" value="you@example.com" size="32"></td>
</tr>
<tr>
<td height="44" class="bodytext"><p align="center">Recipient's Gender:</p></td>
<td><label>
<select name="gender" id="gender">
<option value="male" selected="selected">Male</option>
<option value="female">Female</option>
<option value="other">Other</option>
                          </select>
</label></td>
</tr>
<tr>
<td height="44" class="bodytext"><p align="center">Recipient's Name:</p>  </td>
<td align="left" valign="top"><input name="recipientname" type="text"  id="recipientname" value="ex: Jonny" size="32" /></td>
</tr>
<tr>
<td height="44" class="bodytext"><p align="center">Recipient's Interests or Hobbies: </p></td>
<td align="left" valign="top"><textarea name="hobbies" cols="50" rows="6"   id="hobbies">ex: horseback riding, biking...</textarea></td>
</tr>
<tr>
<td class="bodytext"><p align="center">Recipient's Age:</p></td>
<td align="left" valign="top"><input name="age" type="text" id="age" size="5" maxlength="3" /></td>
</tr>
<tr>
<td class="bodytext"><p align="center">Other Important Information:</p></td>
<td align="left" valign="top"><textarea name="otherinfo" cols="50" rows="6"  id="otherinfo">ex: other things the recipient may enjoy or their favorite superhero
Please specify information you are giving us also: don't do this: superman
submit it like this: favorite superhero: superman</textarea></td>
</tr>
<tr>
<td class="bodytext"><p align="center">Images You Would Like To Include In Story:</p>     </td>
<td align="left" valign="top"><label>
<br />
<input type="file" name="image" id="image" />
</label></td>
</tr>
<tr>
<td class="bodytext"><p align="center">&nbsp;</p></td>
<td align="left" valign="top"><input type="submit" name="Submit" value="Send" /></td>
</tr>
</table>
</form> 
<?php 
}; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:11:57.447

有什么理由不能使用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)吗？我强烈推荐它单独用于附件。

然后，您可以执行以下操作：

```
$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = preg_replace('/[\]/i','',$body);

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

[来源](https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicMail)

# git - Git直接修改索引的内容以进行预提交格式化钩子

> ID：14410733
> 
> 赞同：5
> 
> 时间：2013-01-19T03:10:41.063
> 
> 标签：git, code-formatting, githooks

我想在将文件添加到 Git 索引之前自动格式化我的文件。现在，我有一个看起来像这样的预提交钩子：

```
#!/bin/bash

set -e
exec 1>&2

workingext="working.$$"
ext="bak.$$"
git diff -z --cached --name-only | egrep -z '\.(pl|pm|t)$' | \
        while read -d'' -r f; do
    # First modify the file in the index
    mv "$f" "$f.$workingext"
    git show :"$f" > "$f"
    perl -c "$f"
    perltidy -pbp -nst -b -bext="$ext" "$f";
    rm -f "$f.$ext"
    git add "$f"
    mv "$f.$workingext" "$f"
    # Then the working copy
    perl -c "$f"
    perltidy -pbp -nst -b -bext="$ext" "$f";
    rm -f "$f.$ext"
done 
```

基本上，我备份工作副本，检查索引副本，格式化它们，将它们添加到索引中，然后恢复工作副本并格式化它们，这样工作副本和索引副本之间的差异就不会增长太多大的。我首先检查文件的语法，`perl -c`这样格式化程序`perltidy`就不会被语法无效的文件弄糊涂。

到目前为止，这似乎运作良好。但是，我想知道是否有办法将一个文件的内容添加到另一个文件名下的索引中。也就是说，类似的命令`git update-index-from-file --from-file foo.pl.tmp foo.pl`会更新文件`foo.pl`，使其索引中的内容完全来自`foo.pl.tmp`，但其在工作目录中的版本保持不变。这可能会避免我现在正在做的重命名之舞（尽管这可能有助于确保我不会无可挽回地丢失索引的内容）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T14:02:40.763

是的，这是可能的。首先，您需要通过运行以下命令从文件中创建一个 blob：

```
git hash-object -w foo.pl.tmp 
```

见这里：[http ://www.kernel.org/pub/software/scm/git/docs/git-hash-object.html](http://www.kernel.org/pub/software/scm/git/docs/git-hash-object.html)

> 使用命名文件的内容（可以在工作树之外）计算具有指定类型的对象的对象 ID 值，并可选择将结果对象写入对象数据库。将其对象 ID 报告给其标准输出。

使用`git hash-object`发送到 STDOUT 的 blob sha，您现在可以通过运行将此 blob 作为“foo.pl”添加到索引中

```
git update-index --add --cacheinfo 100644 *YOURSHA* foo.pl 
```

从[update-index 的联机帮助页](http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html#_using_cacheinfo_or_info_only)：

> --cacheinfo 用于注册不在当前工作目录中的文件。这对于最小结帐合并很有用。
> 
> 假装你在路径中有一个带有 mode 和 sha1 的文件，说：
> 
> ```
> $ git update-index --cacheinfo mode sha1 path 
> ```

但我想指出，您的情况看起来很像您实际上应该使用污迹过滤器来做这些事情。请参阅此处了解它们：[https ://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#Keyword-Expansion](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#Keyword-Expansion)

# ruby-on-rails - Rails form triggering wrong action

> ID：14410736
> 
> 赞同：1
> 
> 时间：2013-01-19T03:10:50.383
> 
> 标签：ruby-on-rails, forms, routes

I have several forms in the same view, and it seems that they are conflicting with each other. I have a form that is supposed to call the reveal action in the users controller but instead it is calling the logins action in the user controller.

Here is my config/routes.rb:

```
get "logins" => 'users#logins', :as => 'logins'
delete "logins" => 'users#deletelogin', :as => 'logins'
post 'logins' => 'users#addlogin', :as => 'add_login'
get "logins" => 'users#search', :as => 'search'
get "logins" => 'users#reveal', :as => 'reveal' 
```

Here is the button that is linking to the wrong action:

```
<td><%= button_to "Reveal", { :controller => :users, :action => 'reveal', :id => login.id }, method: :get, :class => 'btn' %></td> 
```

This is the html that is rendering:

```
<td><form action="/logins?id=24" class="button_to" method="post"><div><input class="btn" type="submit" value="Reveal" /><input name="authenticity_token" type="hidden" value="POKdWunwvaKQHb+Mzj/3UrG0xIbKPqELy4n3VGqGrxU=" /></div></form></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:16:40.287

All three get methods map to the `/logins` url, so the behaviour is expected.

The first part in the hash used in the `get` method defines the actual path that will be used in the url. You'll have to do something like:

```
get "logins" => 'users#logins', :as => 'logins'
get "search" => 'users#search', :as => 'search'
get "reveal" => 'users#reveal', :as => 'reveal' 
```

to get the desired effect.

# javascript - 选择多项选择 - 选择其他任何内容时取消选择“全部”选项，反之亦然

> ID：14410747
> 
> 赞同：4
> 
> 时间：2013-01-19T03:14:44.420
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用带有“全部”选项的**选择多项选择。**

[参考这个](http://jsfiddle.net/qCzK9/1/)

基本上我想要发生的事情如下：

1.  如果用户选择“全部”以外的任何选项，我希望自动取消选择“全部” -使用以下方法**工作**：

    ```
    if ($('#customTextFilterSelect option[value="ALL"]').attr('selected') == 'selected' 
            && $("#customTextFilterSelect option:selected").length > 1) {
        $('#customTextFilterSelect option[value="ALL"]').removeAttr("selected");
    } 
    ```

2.  我也希望相反的工作 - 如果用户选择“全部”，我希望自动取消选择其他选项。**不知道如何最好地实施**

3.  最后，如果用户取消选择所有内容（手动，通过单击“x”），则应自动选择“全部”。**kind of working** , but the placeholder comes back when "All" is selected as if length==0

    ```
    if ($("#customTextFilterSelect option:selected").length == 0) {
        $('#customTextFilterSelect option[value="ALL"]').attr('selected', 'selected');
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T05:28:48.253

这是解决方案：

```
$(function()
{
    var cSelect = $('.chzn-select').chosen();
    var allItem = cSelect.find("option[value='ALL']"); //reference to the "ALL" option
    var rest = cSelect.find("option[value!='ALL']"); //reference for the rest of the options
    var allItemAlreadySelected = true; //set a flag for the "ALL" option's previous state

    cSelect.change(function(event)
    {   
        if ($(this).find("option:selected").length == 0) //if no selection
        {
            allItem.prop('selected', true); //select "ALL" option
        }
        else
        {
            if (allItem.is(':selected')) //currently "ALL" option is selected, but:
            {
                if (allItemAlreadySelected == false) //if previously not selected
                {
                    rest.prop('selected', false); //deselect rest
                    allItem.prop('selected', true); //select "ALL" option
                }
                else //if "ALL" option is previously selected (already), it means we have selected smthelse
                    allItem.prop('selected', false); //so deselect "ALL" option
            }
        }
        allItemAlreadySelected = allItem.is(':selected'); //update the flag
        $('.chzn-select').trigger("liszt:updated"); //update the control
    });
}); 
```

现在，您根本不需要那个占位符。控件现在永远不会为空。因此，要摆脱占位符，您所要做的就是；将此属性添加到您的**`select`**.

```
data-placeholder=" " 
```

它的值应该有一个**空格**，否则选择可能会覆盖它。

```
<select data-placeholder=" " id="customTextFilterSelect" multiple='multiple' style="width:350px;" class="chzn-select"> 
```

这是[**jsFiddle 上的工作代码**](http://jsfiddle.net/yxC4J/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T05:29:09.037

使用以下 javascript 来执行此操作。

```
$(function () {
    //Defining the 'ALL' as default option.
    var prevdata = ["ALL"];
    $('.chzn-select').chosen().change(function(e) {

        if ($(this).find("option:selected").length === 0) {
            $(this).find("option[value='ALL']").attr('selected', 'selected');
        } else {
            var cur_date = $(this).val();

            if ($(this).find("option[value='ALL']").attr("selected") == "selected" && $(this).find("option:selected").length > 1)
                $(this).find("option[value='ALL']").removeAttr("selected");

            if(( $.inArray('ALL', prevdata) == -1) && $.inArray('ALL', cur_date) > -1){

               $(this).find('option').removeAttr('selected');
                $(this).find("option[value='ALL']").attr("selected", "selected");
               }
        }
        $('.chzn-select').trigger("liszt:updated");

        //Storing the current processed value 
        prevdata = $('#customTextFilterSelect').val();
    });

}); 
```

以下是 jsFiddle 链接

[http://jsfiddle.net/qCzK9/7/](http://jsfiddle.net/qCzK9/7/)

# javascript - Is `document.write` suitable for finding the element associated with the currently running script?

> ID：14410748
> 
> 赞同：11
> 
> 时间：2013-01-19T03:14:58.767
> 
> 标签：javascript, html, dom

How can I find the script element associated with the currently running script? I'm only interested in scripts inside the body of the document, not in the head (or elsewhere).

Here is what I have so far, it seems to work alright. Are there any possible pitfalls I'm not thinking of?

```
function getCurrentScriptElement() {
    var placeholderId = 'placeholder-' + Math.random(), 
        script, placeholder;
    document.write('<br id="' + placeholderId + '">');
    placeholder = document.getElementById(placeholderId);
    script = placeholder.previousSibling;
    placeholder.parentNode.removeChild(placeholder);
    return script;
} 
```

The use case I have in mind for this involves scripts that need to inject content at the same place in the document where the script tag occurs, so delayed loading will not be an issue. In other words I will only be calling this function in places where it's appropriate, it's not going to be exposed as part of an API or anything.

I'm also aware of the [problem](http://ln.hixie.ch/?start=1091626816&count=1) with `document.write` and XHTML, and am not worried about it in this case (so far).

* * *

My previous attempt looked something like this:

```
function getCurrentScriptElement() {
    var scripts = document.getElementsByTagName('script');
    return scripts[scripts.length - 1];
} 
```

But, as we see in [this question](https://stackoverflow.com/questions/14409982/), this could easily fail if another script has been injected into the document.

* * *

I also found `document.currentScript` in this [WHATWG spec](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#dom-document-currentscript). It doesn't seem to be widely supported at this point. There's an interesting shim for `document.currentScript` that takes [another route](https://github.com/samyk/jiagra/blob/master/jiagra.js#L380)... The script triggers an error, catches it, inspects the stack trace to find the URL of the script, and then finds the script element with the matching `src` attribute.

It's a clever solution, but it apparently won't work in IE, and it would break if several scripts use identical URLs.

* * *

Ideally, I would like to find a solution that gives the same result as the top code sample (no extra requirements), but doesn't rely on `document.write`. Is this possible? If not, is this code fairly safe assuming it's used correctly (only during page load, not XHTML)?

* * *

Edit: See [this answer](https://stackoverflow.com/a/15583466/886931) for another potential use case, and details on why a `br` element is used for the placeholder.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T01:35:14.110

OP 对棘手的问题有很好的解决方案。然而，这里有一些小的建议来改进它。

该函数应在可用时使用 document.currentScript。无论情况如何，它都能很好地工作。在 FireFox +4、Chrome +29 和 Opera +16 中可用。

在 IE 6-10 中，script.readyState 可用于模拟 document.currentScript。无论情况如何，它似乎也能很好地工作。

为避免出现问题，该函数应在 document.readyState == "complete" 时退出，甚至在早期的“交互”阶段退出，具体取决于代码。document.currentScript 在“完成”时似乎停止工作。但是，document.write 停止在“交互式”，即查找脚本的标记写入方法将因延迟加载脚本而失败。

在使用 document.write() 之前，应检查脚本异步属性。标记为 async 的脚本与文档分离，并且 document.write() 方法将无法按预期工作。

OP 的代码编写了一个 <p> 标记，但样式标记似乎更适用于正文和头部中的脚本......并且没有副作用。

随机数标签 ID 似乎没有多大用处，因为该元素已被删除。使用可重用的 GUID 常量可能会更好。

**更新：**

我在下面更新了我的代码示例，以说明一种无需编写标签即可执行此操作的方法。它似乎可以在 Chrome、FireFox、Opera 和 IE 5-10 上正常工作。无论注入的脚本和脚本属性（延迟和异步）如何，都返回正确的值。难点是IE+11怎么办？微软在 IE11 中删除了 script.readyState，但没有提供替代方案。一种解决方法是使用“MutationObserver”来查找脚本。在 IE 中，这些事件事件每次在脚本执行之前发生（与之后发生的 onload 不同）。这很好用，除非有外部加载的脚本设置了 defer 或 async 属性。异步脚本特别困难，因为它们可以随时执行，而且并不总是以相同的顺序执行（我的观察）。

无论如何，我想我会发布这段代码，希望它可以提供一个起点并帮助其他人。

参考：

[https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

[http://msdn.microsoft.com/en-us/library/ie/dn265034(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/dn265034%28v=vs.85%29.aspx)

**代码片段：**

```
 var currentScript = (function() {

        // PRIVATE
        var observer, current, nodes;

        // IE+11 - untested with other browsers.
        if (!document.currentScript && typeof MutationObserver=='function') {
            observer = new MutationObserver(function(mutations) {
                if (document.readyState=='complete') observer.disconnect();
                mutations.forEach(function(mutation) {
                    nodes = mutation.addedNodes;
                    if (nodes.length && nodes[0].nodeName=='SCRIPT') {
                        current = nodes[0];
                    }
                });
            });
            observer.observe(window.document, {childList: true, subtree: true});
        }

        // PUBLIC
        return function() {

            if (document.readyState=='complete') return;

            // CHROME+29, FIREFOX+4, OPERA+16
            if (document.currentScript) return document.currentScript;

            var i, s=document.getElementsByTagName('SCRIPT');

            // MSIE+5-10
            if (s[0].readyState) 
                for(i=0; i<s.length; i++)
                    if (s[i].readyState=='interactive') return s[i];

            // IE+11
            if (current) return current;

            // BEST GUESS
            return s[s.length-1];

        }

    })() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T14:49:24.527

如果你的脚本不是内联的（例如它是通过'<script src>'加载的，在try块中抛出一个错误然后在catch块中检查它的堆栈跟踪。你将能够确定文件名。你可以然后使用 'querySelector('[src="'+filename+'"]')' 找到标签并在它之前插入您的内容或它的兄弟。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-02T14:51:47.363

假设你的脚本没有被推迟，你可以这样做：

```
var allScripts = document.getElementsByTagName("script"),
    currentScript = allScripts[allScripts.length-1]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-11T12:23:53.820

另一个想法：根据 w3schools，[`<script>`标签支持全局 HTML 属性](http://www.w3schools.com/tags/tag_script.asp)。

使用任何全局属性 ( `id`, `class`, `title`) 您可以区分使用的脚本标签，尽管在这种情况下您必须预先定义`id`and `class`。

# html - 将 HTML 复选框移动到其宽度的左侧

> ID：14410753
> 
> 赞同：21
> 
> 时间：2013-01-19T03:16:37.430
> 
> 标签：html, css, checkbox, css-float, forms

我不能使用任何 JavaScript，**如果可能的话，我只想用 CSS 来回答**。我在表单中有以下复选框：

```
<label for="autologin">Remember Me</label>
<input type="checkbox" class="checkbox" id="autologin" name="autologin" value="1">
<div class="clear"></div> 
```

使用以下 CSS：

```
label {
    float: left;
    margin: 5px 0px;
}

input {
    float: right;
    margin: 5px 0px;
    width: 200px;
}

.clear {
    clear: both;
} 
```

我可以在复选框中添加什么 CSS 以使其显示在其 200px 宽度的左侧？我对浮动（特别是垂直对齐）有点困难，但我听说这是正确的做法。 ![chrome显示复选框宽度](../Images/146cd7963673656fd203d390d8d1a786.png)

编辑：好的，所以很多人建议不要将输入浮动到右侧。如果是这样，我可能根本不使用浮点数，只需设置标签的宽度并
在每行后面都有一个。这是可以接受的做法还是我只是在这里错过了使用花车？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T03:23:05.837

不要“将其移动到其宽度的左侧” - 让它决定自己的宽度，然后在需要时在右侧添加填充。但从你的设计来看，你没有。

`input[type=checkbox] { width: auto }`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-19T04:03:10.530

我认为导致您的复选框像这样居中的问题是因为您设置了输入`width:200px`，所以您需要做的就是`width:auto`通过其 id（自动登录）将其添加到您的复选框。您还需要为您的复选框创建一个 div 容器。这是HTML：

```
<label for="autologin">Remember Me</label>
<div id='check'><input type="checkbox" class="checkbox" id="autologin" name="autologin" value="1"></div>
<div class="clear"></div> 
```

这是CSS：

```
label {
    float: left;
    margin: 5px 0px;
}

input {
    float: right;
    margin: 5px 0px;
    width: 200px;
    border:solid 1px;
}
#autologin
{
width:auto;
float:left;
}
#check
{
float:right;
width:200px;
border:solid 1px;
}

.clear {
    clear: both;
} 
```

希望这有帮助:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-19T04:08:23.453

试试这个，这是演示[链接](http://jsfiddle.net/sourcecode/sHfDq/)

```
label {
    float:left;
    margin: 5px 0px;
}

input {
    // float right;
    margin: 5px 0px;
    width: 200px;

}

.clear {
    clear: both;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T03:32:17.163

你应该在你的类声明中删除`float: right;`和。我会为所有标签（即200px）设置宽度以对齐第二列。`width: 200px;``input`

```
label {
    float: left;
    margin: 5px 0px;
    width: 200px; 
}

input {
    /*float: left;*/   /* This will also work. */
    margin: 5px 0px;
}

.clear {
    clear: both;
} 
```

请参阅**[jsFiddle 示例](http://jsfiddle.net/pZRJQ/)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T03:20:01.687

一个表格就可以了，因为你有（用户提供的）表格数据。这也将解决您的垂直对齐问题。

不幸的是，您不能将复选框放在其宽度的左侧。就个人而言，我建议`input`在不指定`[type=something]`. 但是，如果您使用大量 HTML5 输入类型，例如`email`,等`number`，`url`那么您可能会发现以一种方式设置样式很有用`input`，然后使用`width:auto`for`[type=radio]`和`[type=checkbox]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T03:26:56.000

如果您使用浮动属性意味着，您必须为表单容器提供宽度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T19:38:08.820

您不能对齐或更改复选框的方向，因为它没有附件，它只是一个框。

为了完成这件事，只需将它放在一个 div 中，并给 div 这个样式：

```
.checkDIV
{
    text-align:left;
} 
```

例子：

```
<div align="center" class="checkDIV">
    <input type="checkbox" class="checkbox" id="autologin" name="autologin" value="1">
</div> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-19T03:22:13.617

将其宽度设置为 20px 即可解决问题。它不需要是 200px 是吗？

# c++ - 为 Windows 7 运行 qt 终端

> ID：14410756
> 
> 赞同：0
> 
> 时间：2013-01-19T03:16:59.843
> 
> 标签：c++, qt, terminal

我的程序（如下）可以编译，但不允许我输入值。我查看了许多线程，说明从运行中单击终端框，但这只会弹出一个窗口，说明“按下以关闭此窗口”，这确实违背了目的。对此的任何帮助都会很棒。谢谢

```
#include <QCoreApplication>
#include <QTextStream>

//using namespace std;
QTextStream cin(stdin);
QTextStream cout(stdout);

int main()
{
    QString firstName;
    QString lastName;
    QString houseNumber;
    QString streetName;
    QString streetType;
    QString city;
    QString state;
    QString zipCode;
    QString phone;

    cout<<"Please enter your first name:  " << endl;
    cin >> firstName;
    cout << endl <<"Please enter your first name:  " << endl;
    cin >> lastName;

    cout << endl <<"Please enter your house number:  " << endl;
    cin >> houseNumber;

    cout << endl <<"Please enter your street Name:  " << endl;
    cin >> streetName;

    cout << endl <<"Please enter your street type (i.e. Rd, St, Blvd, ect):  ";
    cin >> streetType;

    cout << endl <<"Please enter your city:  " << endl;
    cin >> city;

    cout << endl <<"Please enter your state:  " << endl;
    cin >> state;

    cout << endl <<"Please enter your zip code:  " << endl;
    cin >> zipCode;

    cout << endl <<"Please enter your phone number:  " << endl;
    cin >> phone;

    cout << endl << "Your information is:  " << endl << endl;
    cout << firstName <<" "<<lastName<<endl;
    cout << houseNumber << " " << streetName << " " << streetType << endl;
    cout << city << ", " << state << "  " << zipCode << endl;
    cout << "Phone Number:  " << phone << endl << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:26:05.643

如果您需要使用终端运行程序，这里已解决：[Console input with Qt Creator](https://stackoverflow.com/questions/1356328/console-input-with-qt-creator)

至少它对我有用。

# firefox - Firefox 目录中没有 chrome 文件夹

> ID：14410759
> 
> 赞同：0
> 
> 时间：2013-01-19T03:17:32.473
> 
> 标签：firefox, firefox-addon, overlay, xul

我希望在 Firefox 浏览器中学习 XUL 覆盖。教程建议我创建一个 xul 文件并在 chrome 文件夹中编辑清单文件以执行覆盖。但我只是在 Firefox 安装目录或用户配置文件目录中找不到任何 chrome 文件夹。因此，我找不到任何 xul 文件。请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:18:48.917

现在整个结构都变了。它现在被发现`Omni.jar`。

# excel - 如何在excel中将行传输到关系边缘

> ID：14410761
> 
> 赞同：0
> 
> 时间：2013-01-19T03:18:09.633
> 
> 标签：excel, vba

我在excel表中有如下数据

```
A,B,C
D,E,F 
```

我想将其转换为

```
A,B
A,C
B,C
D,E
D,F
E,F 
```

我有以下宏，只能这样：

```
A,B
A,C
D,E
D,F 
```

如何调整以下代码以达到目的？

```
Dim targetRowNumber As Long
targetRowNumber = Selection.Rows(Selection.Rows.Count).Row + 2

Dim col1 As Variant
Dim cell As Range

Dim sourceRow As Range: For Each sourceRow In Selection.Rows

    col1 = sourceRow.Cells(1).Value
    For Each cell In sourceRow.Cells

        If Not cell.Column = Selection.Column Then
            Selection.Worksheet.Cells(targetRowNumber, 1) = col1
            Selection.Worksheet.Cells(targetRowNumber, 2) = cell.Value
            targetRowNumber = targetRowNumber + 1
        End If

    Next cell

Next sourceRow 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:31:42.760

我在您的宏中添加了第二个循环以实现我所理解的结果：

```
Dim targetRowNumber As Long
targetRowNumber = Selection.Rows(Selection.Rows.Count).Row + 2

Dim col1 As Variant
Dim cell As Range
Dim colCounter As Long
Dim colCounter2 As Long

Dim sourceRow As Range: For Each sourceRow In Selection.Rows

    For colCounter = 1 To Selection.Columns.Count - 1

        'col1 = sourceRow.Cells(colCounter).Value
        'For Each cell In sourceRow.Cells
        col1 = sourceRow.Cells(colCounter).Value
        For colCounter2 = colCounter + 1 To Selection.Columns.Count
            Set cell = sourceRow.Cells(, colCounter2)

            If Not cell.Column = Selection.Column Then
                Selection.Worksheet.Cells(targetRowNumber, 1) = col1
                Selection.Worksheet.Cells(targetRowNumber, 2) = cell.Value
                targetRowNumber = targetRowNumber + 1
            End If

        Next colCounter2

    Next colCounter

Next sourceRow 
```

请注意，如果您将选择复制到一个局部变量（数组）中进行处理，在数组中创建结果，然后在完成后将内容复制回工作表，则性能会大大提高。除非您正在处理更大的数据集，否则这可能并不重要。

# c++ - 使用 wxWidgets 检查外部应用程序是否正在运行

> ID：14410766
> 
> 赞同：1
> 
> 时间：2013-01-19T03:19:19.357
> 
> 标签：c++, cocoa, wxwidgets

我正在寻找一些`wxWidgets`功能来检查系统中是否正在运行外部应用程序。类似于`NSRunningApplications`Cocoa 的东西。我查看了很多 wxwidgets api，包括 wxProcess 类，但没有找到解决方法。有谁知道根据外部进程`wxWidgets`的名称或应用程序标识符（不是 pid）检查外部进程是否正在运行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:05:37.293

除了使用 wxWidgets 中的 pid 之外，没有其他方法可以检查外部进程。

检查存在的唯一方法是您自己使用 wxExecute / wxProcess 或使用静态函数[wxProcess::Exists(int pid)](http://docs.wxwidgets.org/trunk/classwx_process.html#a3c81aa4ef5b6b76018e245f0b004f51b)来检查具有给定 pid 的正在运行的进程的进程。

# python - 如果python程序的参数是目录，我如何读取每个文件？

> ID：14410767
> 
> 赞同：1
> 
> 时间：2013-01-19T03:19:53.950
> 
> 标签：python

我有一个应该从命令提示符运行的程序，并作为它的论点一个 txt 文件，然后它将行和输出解析到与程序相同目录的文件中。

但是，如果我有一个包含多个文件的目录，我需要解析它就行不通了。它仍然在程序的当前目录中而不是在目录中查找文件名，这就是我遇到的问题，使程序读取目录中的文件。

```
import os, sys

input_filenames = os.listdir(sys.argv[1])

for file in input_filenames:
    parser(file) 
```

我对此有点困惑。任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:22:29.717

`glob`是一种遍历目录并仅使用您想要的所有文件的简单方法。

```
import os, glob

for file in glob.glob("*.txt"):
    parser(file) 
```

或者，如果您将整个目录作为列表使用`os.listdir()`，您可以遍历该目录并使用检查字符串`.endswith()`，例如：

```
input_dir = os.listdir(sys.argv[1])

for file in input_dir:
  if file.endswith(".txt"):
    parser(file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:21:54.453

```
import os, glob

input_dir = sys.argv[1]

for file in glob.glob(input_dir + "/*"):
    parser(file) 
```

# python - Python 获取 iTunes 歌曲

> ID：14410771
> 
> 赞同：0
> 
> 时间：2013-01-19T03:21:04.543
> 
> 标签：python, applescript, itunes

我一直在做一些研究，但没有发现任何可以奏效的东西。我想让 python 知道当前在 iTunes 中播放的歌曲是什么，这样我就可以将它串行发送到我的 Arduino。

我见过 Appscript 但它不再受支持，而且从我读到的内容中充满了一些错误，因为它尚未更新。

我正在使用 Mac OS X 10.8.2 和 iTunes 10.0.1

任何人都对如何使这项工作有任何想法。非常感谢任何信息。

仅供参考：我的项目是一个 1.8 英寸的小彩色显示屏，我将有一些关于 RAM HDD CPU 歌曲等的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T03:35:28.290

经过 5 分钟的搜索后，我发现 ScriptingBridge 可以工作

在这里找到的信息[链接](http://www.macosxautomation.com/applescript/features/scriptingbridge.html "关联")

```
#Information and basic source from
#http://www.macosxautomation.com/applescript/features/scriptingbridge.html

#!/usr/bin/python
#imports for iTunes support
from Foundation import *
from ScriptingBridge import *

import time

import serial

ser = serial.Serial('/dev/tty.usbserial-A600afCt')

iTunes = SBApplication.applicationWithBundleIdentifier_("com.apple.iTunes")

#print iTunes.currentTrack().name()
#print iTunes.currentTrack().artist()
#print iTunes.currentTrack().album()

outputString = iTunes.currentTrack().name() + "[" + iTunes.currentTrack().artist() + "[" + iTunes.currentTrack().album()
time.sleep(10)
print outputString
ser.write(outputString)
time.sleep(10)
ser.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:40:13.193

您可以设置一个简单的 Automator 工作流程来检索当前的 iTunes 歌曲。尝试以下两个操作：

*   **iTunes：获取当前歌曲**
*   **实用程序：运行 Shell 脚本**

将 shell 脚本更改为`cat > ~/itunes_track.txt`，您应该有一个包含当前曲目路径的文本文件。一旦您从 Automator 中获取数据，您就应该准备就绪 :)

# java - 尝试使用 Intent putExtra 方法时出现运行时错误

> ID：14410773
> 
> 赞同：-1
> 
> 时间：2013-01-19T03:21:32.923
> 
> 标签：java, android, android-intent

我想将 OAScene 场景对象发送到下一个 Activity 类，但我不能。它立即停止应用程序..如果我打开其他活动类而不使用 putExtra 方法它可以工作......但在我的情况下我需要发送对象......

这是代码

```
public void setScene(OAScene scene) {
    final OAScene _scene = scene; 
    this.currentScene = scene;
    setColor(color_black);

    double dis; 
    dis = CalculationByDistance(latitudeOri, latitudeOri, scene.getLatitude(), scene.getLongitude());

    // Set the text fields of the notification bubble to match the data of
    // the selected scene.
    popup_name.setText("Name: " + scene.getName());
    popup_text.setText("Distance: " + dis + "m");

    more_info.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             OAScene scene=_scene; 
             Intent FacilityIntent;
             FacilityIntent = new Intent(getContext(), MapViewActivity.class);
             FacilityIntent.putExtra("scene", _scene);
             getContext().startActivity(FacilityIntent);
        }
     });
} 
```

日志..

```
01-20 15:50:31.196: E/AndroidRuntime(21403): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = com.hitlabnz.outdoorar.api.OAScene)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Parcel.writeSerializable(Parcel.java:1181)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Parcel.writeValue(Parcel.java:1135)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Parcel.writeMapInternal(Parcel.java:493)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Bundle.writeToParcel(Bundle.java:1612)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Parcel.writeBundle(Parcel.java:507)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.content.Intent.writeToParcel(Intent.java:6190)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1696)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1382)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.app.Activity.startActivityForResult(Activity.java:3190)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.app.Activity.startActivity(Activity.java:3297)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at com.hitlabnz.tutorialbasic.TutorialSceneNotificationBubble$2.onClick(TutorialSceneNotificationBubble.java:141)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.view.View.performClick(View.java:3620)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.view.View$PerformClick.run(View.java:14292)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Handler.handleCallback(Handler.java:605)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.os.Looper.loop(Looper.java:137)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at android.app.ActivityThread.main(ActivityThread.java:4512)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 15:50:31.196: E/AndroidRuntime(21403):    at java.lang.reflect.Method.invoke(Method.java:511) 
```

代码接收意图：

```
Intent i = getIntent();
        OAScene scene = (OAScene)i.getSerializableExtra("scene"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:42:09.357

一种选择可能是让您的自定义类实现 Serializable 接口，然后您可以使用 Intent#putExtra() 方法的 putExtra(Serializable..) 变体以额外的意图传递对象实例。

伪代码：

```
//to pass :
   intent.putExtra("MyClass", obj);  

// to retrieve object in second Activity
getIntent().getSerializableExtra("MyClass"); 
```

有关更多说明，请参阅[此](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:26:18.590

试试这个，

```
 facilityIntent= new Intent(YourCurrectActivity.this, MapViewActivity.class);
 facilityIntent.putExtra("scene", _scene);
 startActivity(facilityIntent); 
```

在第二个活动中，您可以使用

```
getIntent().getSerializableExtra("scene"); 
```

*   尝试按照为预定义类创建对象。使用**facilityIntent**而不是**FacilityIntent**

# java - 将库加载授予 Java 代码的问题

> ID：14410774
> 
> 赞同：0
> 
> 时间：2013-01-19T03:21:45.587
> 
> 标签：java, permissions

我在我的应用程序中使用 Java 安全管理器。我正在授予权限，我遇到了一个我似乎无法授予的权限。它是加载库的权限。它是 $JAVA_HOME/lib/ext 目录中的 java *.jar 库。

```
at com.theatsgroup.startup.startup_managers.startup(startup_managers.jav
a:98)
at com.theatsgroup.startup.app_startup.main(app_startup.java:357)
Caused by: java.security.AccessControlException: access denied ("java.lang.Runti
mePermission" "loadLibrary.sunec")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkLink(Unknown Source)
at java.lang.Runtime.loadLibrary0(Unknown Source)
at java.lang.System.loadLibrary(Unknown Source) 
```

我的授权文件如下：

```
grant codeBase "file:../bin/atsapp.jar" {
permission java.lang.RuntimePermission "loadLibrary.sunec";
}; 
```

下面是我如何调用我的 Java 应用程序：

```
java -Djava.security.manager -Djava.security.policy==..\cfg\atsapp.security.poli
cy -jar atsapp.jar 
```

有任何想法吗？

谢谢，

——贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:46:34.170

由于您使用的是“==”，因此您将覆盖 jvm 的“默认”权限。为了让 jvm 工作，您很可能需要在策略文件中复制一项重要的默认授权。此权限授予作为 jvm 一部分安装的所有扩展库所需的权限，以执行所有“内部”工作。不知道为什么这不是内置的，因为没有这个 jvm 不能做很多事情。

```
grant codeBase "file:${{java.ext.dirs}}/*" {
  permission java.security.AllPermission;
}; 
```

这是从与 jre 一起安装的“lib/security/java.policy”文件的开头开始的。您可能需要调查此文件的其余部分，以查看您是否需要其他重要的基本权限。

# java - “localhost”是Java中的常量吗？

> ID：14410778
> 
> 赞同：3
> 
> 时间：2013-01-19T03:21:55.930
> 
> 标签：java

“localhost”在 Java SE 6 中的任何地方都是常量吗？输入出来并不是很困难，但是在很多地方有一个常量而不是字符串可能会很好。有没有围绕这个的标准做法？

编辑：我知道如何创建一个常量。过去，我发现 org.apache.http.HttpHeaders 等常量比使用我自己的更干净，因为它们不太容易出现拼写错误或意外编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T03:26:05.863

好吧，您可以像这样获取本地主机的名称：

```
InetAddress.getLocalHost().getHostName() 
```

前面的代码片段将返回本地主机的配置*名称*（不是真正的字符串`"localhost"`）。我相信您最好编写自己的常量：

```
public static final String LOCAL_HOST = "localhost"; 
```

并且（尽管有些人会说这是一种不好的做法，但这是有争议的）您可以在任何需要它的类中静态导入常量，只需替换`"package.to"`为该类所在的真实包和该类`TheClass`的实际名称定义常量：

```
import static package.to.TheClass.LOCAL_HOST; 
```

通过这种方式，在需要的地方使用常量将是一件简单的事情`LOCAL_HOST`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T04:02:32.370

> “localhost”在 Java SE 6 中的任何地方都是常量吗？

简单的答案是*否定*的。

您可以通过转到“L”的 Java SE javadoc 索引页面并搜索来确认这一点。在 javadoc 中没有以任何大写形式列出公共“localhost”或 local_host“常量。

> 输入出来并不是很困难，但是在很多地方有一个常量而不是字符串可能会很好。

首先，我不同意它会“很好”。IMO，它会使代码*的*可读性降低。`SomeInterface.LOCAL_HOST`字符多于`"localhost"`. 而且，如果您使用静态导入，读者仍然需要查找 的定义`LOCALHOST`以找出它实际绑定的内容。

其次，**更重要**的是，“localhost”名称实际上是一种约定，而不是一种标准。旧的 Windows 系统（例如）没有为“localhost”名称提供默认映射，因此无法保证该名称会解析。（即使是这样，也不能保证它会解析为环回 IP 地址。）因此，如果 Java SE API 确实为“localhost”主机名定义了一个符号，它（理论上）会引发可移植性问题。

请注意，`"localhost"`和`InetAddress.getLocalHost().getHostName()`很可能不一样。前者通常解析为`127.0.0.1`，后者通常解析为其他系统可以将数据包路由到的 IP 地址；即不是`127.x.x.x`IP地址。有关系吗？在很多情况下，是的！`127.x.x.x`例如，当您明确不希望 IP 流量离开当前主机时，通常使用地址；例如，因为它是在未加密的情况下发送的。

# c - C 中的动态数组函数 - 设置容量并创建更大的数组

> ID：14410779
> 
> 赞同：1
> 
> 时间：2013-01-19T03:22:00.393
> 
> 标签：c, dynamic-arrays, capacity

我正在为 C 中的动态数组构建函数。在大多数情况下，它们似乎工作正常，直到需要扩展数组的容量。我的函数 _dynArrSetCapacity 似乎有两个问题。

```
/* Resizes the underlying array to be the size cap

param:  v       pointer to the dynamic array
param:  cap     the new desired capacity
pre:    v is not null
post:   v has capacity newCap
*/
void _dynArrSetCapacity(DynArr *v, int newCap)
{
    assert(v != NULL);
    struct DynArr largerArray; /*create a new dynamic array*/
    initDynArr(&largerArray, newCap); /*initialize the new array*/
    int i;
    /*copy the old array into the new array*/
    for(i = 0; i < v->size; i++) {
       largerArray->data[i] = v->data[i];
       largerArray->size++;
    }
freeDynArr(v); /*free memory of the old array*/
v = &largerArray; /*point to the new array*/
} 
```

首先，对于 for 循环中的两个语句中的每一个，我都收到错误消息“'->' 的类型参数无效（具有结构 DynArr）”。这是一个突然出现的新错误，尽管我没有对这个特定的功能进行更改，并且最初并没有给我这个错误。其次，当这个函数返回到调用它的函数时，数组的大小和容量会恢复到原来的值。我的陈述“v = &largerArray;” 似乎没有达到预期的效果，即将新数组的所有指针和值都分配给 v。下面提供了完整的代码以供上下文。任何解决这两个问题的建议将不胜感激。提前致谢。

```
#include <assert.h>
#include <stdlib.h>
#include "dynArray.h"

struct DynArr
{
   TYPE *data;      /* pointer to the data array */
   int size;        /* Number of elements in the array */
   int capacity;    /* capacity ofthe array */
};

/* ************************************************************************
Dynamic Array Functions
 ************************************************************************ */

/* Initialize (including allocation of data array) dynamic array.

param:  v       pointer to the dynamic array
param:  cap     capacity of the dynamic array
pre:    v is not null
post:   internal data array can hold cap elements
post:   v->data is not null
*/
void initDynArr(DynArr *v, int capacity)
{
    assert(capacity > 0);
    assert(v!= 0);
    v->data = (TYPE *) malloc(sizeof(TYPE) * capacity);
    assert(v->data != 0);
    v->size = 0;
    v->capacity = capacity;
}

    /* Allocate and initialize dynamic array.

param:  cap     desired capacity for the dyn array
pre:    none
post:   none
ret:    a non-null pointer to a dynArr of cap capacity
        and 0 elements in it.
    */
DynArr* newDynArr(int cap)
{
    assert(cap > 0);
    DynArr *r = (DynArr *)malloc(sizeof( DynArr));
    assert(r != 0);
    initDynArr(r,cap);
    return r;
}

/* Deallocate data array in dynamic array.

param:  v       pointer to the dynamic array
pre:    none
post:   d.data points to null
post:   size and capacity are 0
post:   the memory used by v->data is freed
*/
void freeDynArr(DynArr *v)
{
   if(v->data != 0)
   {
       free(v->data);   /* free the space on the heap */
       v->data = 0;     /* make it point to null */
   }
   v->size = 0;
   v->capacity = 0;
}

/* Deallocate data array and the dynamic array ure.

param:  v       pointer to the dynamic array
pre:    none
post:   the memory used by v->data is freed
post:   the memory used by d is freed
*/
void deleteDynArr(DynArr *v)
{
    freeDynArr(v);
    free(v);
}

/* Resizes the underlying array to be the size cap

param:  v       pointer to the dynamic array
param:  cap     the new desired capacity
pre:    v is not null
post:   v has capacity newCap
*/
void _dynArrSetCapacity(DynArr *v, int newCap)
 {
    assert(v != NULL);
        struct DynArr largerArray; /*create a new dynamic array*/
    initDynArr(&largerArray, newCap); /*initialize the new array*/
    int i;
    /*copy the old array into the new array*/
    for(i = 0; i < v->size; i++) {
       largerArray->data[i] = v->data[i];
       largerArray->size++;
}

     freeDynArr(v); /*free memory of the old array*/
     v = &largerArray; /*point to the new array*/
}

/* Get the size of the dynamic array

param:  v       pointer to the dynamic array
pre:    v is not null
post:   none
ret:    the size of the dynamic array
*/
int sizeDynArr(DynArr *v)
{
    int i;
     v->size = 0;
     for (i = 0; i < v->capacity; i++) {
         if (!(EQ(v->data[i], NULL))) {
            v->size++;
    }
}
return v->size;
}

 /*     Adds an element to the end of the dynamic array

param:  v       pointer to the dynamic array
param:  val     the value to add to the end of the dynamic array
pre:    the dynArry is not null
post:   size increases by 1
post:   if reached capacity, capacity is doubled
post:   val is in the last utilized position in the array*/
void addDynArr(DynArr *v, TYPE val)
{
    /* Check to see if a resize is necessary */
    assert(v != NULL);

   if(v->size >= v->capacity) {
           _dynArrSetCapacity(v, 2 * v->capacity);
   }
   v->data[v->size] = val;
   printf("Added %d to Array to position %d\n", v->data[v->size], v->size);
   v->size++;
}

/*  Get an element from the dynamic array from a specified position

param:  v       pointer to the dynamic array
param:  pos     integer index to get the element from
pre:    v is not null
pre:    v is not empty
pre:    pos < size of the dyn array and >= 0
post:   no changes to the dyn Array
ret:    value stored at index pos
*/

TYPE getDynArr(DynArr *v, int pos)
{
   assert(pos < v->size && pos >= 0);
   return v->data[pos];
}

/*  Put an item into the dynamic array at the specified location,
overwriting the element that was there

param:  v       pointer to the dynamic array
param:  pos     the index to put the value into
param:  val     the value to insert
pre:    v is not null
pre:    v is not empty
pre:    pos >= 0 and pos < size of the array
post:   index pos contains new value, val
*/
void putDynArr(DynArr *v, int pos, TYPE val)
{
    assert(pos >= 0 && pos < v->size);

    v->data[pos] = val;
    v->size++;
}

/*  Swap two specified elements in the dynamic array

param:  v       pointer to the dynamic array
param:  i,j     the elements to be swapped
pre:    v is not null
pre:    v is not empty
pre:    i, j >= 0 and i,j < size of the dynamic array
post:   index i now holds the value at j and index j now holds the value at i
 */
void swapDynArr(DynArr *v, int i, int  j)
{
    int temp = 0;
    assert(i >= 0 && i < v->size);
    assert(j >= 0 && j < v->size);
    temp = v->data[i];
    v->data[i] = v->data[j];
    v->data[j] = temp;

}

/*  Remove the element at the specified location from the array,
shifts other elements back one to fill the gap

param:  v       pointer to the dynamic array
param:  idx     location of element to remove
pre:    v is not null
pre:    v is not empty
pre:    idx < size and idx >= 0
post:   the element at idx is removed
post:   the elements past idx are moved back one
*/
 void removeAtDynArr(DynArr *v, int idx)
{
    int i;
    assert(idx < v->size && idx >= 0);

        printf("%d is being removed from array\n", v->data[idx]);
    v->data[idx] = 0;
    for (i = idx; i < v->size; i++) {
        v->data[i] = v->data[i + 1];
    }

    v->size--;
    v->data[v->size+1] = NULL;
}

/* ************************************************************************
    Stack Interface Functions
************************************************************************ */

/*  Returns boolean (encoded in an int) demonstrating whether or not the
dynamic array stack has an item on it.

param:  v       pointer to the dynamic array
pre:    the dynArr is not null
post:   none
ret:    1 if empty, otherwise 0
*/
int isEmptyDynArr(DynArr *v)
{
   if(v->size == 0) return 1;
       return 0;
}

/*  Push an element onto the top of the stack

param:  v       pointer to the dynamic array
param:  val     the value to push onto the stack
pre:    v is not null
post:   size increases by 1
        if reached capacity, capacity is doubled
        val is on the top of the stack
*/
void pushDynArr(DynArr *v, TYPE val)
{
    addDynArr(v, val);
    printf("Pushed %d on Stack\n",val);
}

/*  Returns the element at the top of the stack

param:  v       pointer to the dynamic array
pre:    v is not null
pre:    v is not empty
post:   no changes to the stack
*/
TYPE topDynArr(DynArr *v)
{
    assert(sizeDynArr(v) != 0);
    return getDynArr(v, sizeDynArr(v) - 1);
}

/* Removes the element on top of the stack

param:  v       pointer to the dynamic array
pre:    v is not null
pre:    v is not empty
post:   size is decremented by 1
        the top has been removed
*/
void popDynArr(DynArr *v)
{
    assert(sizeDynArr(v) != 0);
    removeAtDynArr(v, sizeDynArr(v) - 1);
    v->size--;
}

/* ************************************************************************
Bag Interface Functions
 ************************************************************************ */

/*  Returns boolean (encoded as an int) demonstrating whether or not
the specified value is in the collection
true = 1
false = 0

param:  v       pointer to the dynamic array
param:  val     the value to look for in the bag
pre:    v is not null
pre:    v is not empty
post:   no changes to the bag
*/
int containsDynArr(DynArr *v, TYPE val)
{

int i;
    for (i = 0; i < v->size; i++) {
        if(EQ(v->data[i], val)) {
            return 1;
        }
     }
    return 0;
}

/*  Removes the first occurrence of the specified value from the collection
if it occurs

param:  v       pointer to the dynamic array
param:  val     the value to remove from the array
pre:    v is not null
pre:    v is not empty
post:   val has been removed
post:   size of the bag is reduced by 1
 */
 void removeDynArr(DynArr *v, TYPE val)
 {
    int i;
    for (i = 0; i < v->size; i++) {
            if (EQ(val, v->data[i])) {
                 removeAtDynArr(v, i);
                 return;
            }
    }
}

int main(int argc, char** argv){
    printf("Program: Dynamically-allocated Array\n");
    int cap = 10;
    int i;

DynArr *r;
r = newDynArr(cap);

    for (i = 0; i < cap; i++) {
        pushDynArr(r, i);
    }

    r->size = sizeDynArr(r);
    if(isEmptyDynArr(r) == 1) {
        printf("Array is empty\n");
    }

    else if(isEmptyDynArr(r) == 0) {
        printf("Array is not empty\n");
    }
    removeDynArr(r, 5);

    printf("Before adding to array, size is %d and capacity is %d\n", r->size, r->capacity);
    printf("The top of the array before push is %d\n", topDynArr(r));

    for (i = r->size; i < cap + 4; i++) {
       pushDynArr(r,i);
    }

    printf("After adding to array, size is %d and capacity is %d\n", r->size, r->capacity);
    printf("The top of the array after push is %d\n", topDynArr(r));

    printf("The top of the array before remove is %d\n", topDynArr(r));
    printf("Before removing from array, size is %d and capacity is %d\n", r->size, r->capacity);

    for (i = r->size; i < cap; i++) {
        pushDynArr(r,i);
    }

    printf("After removing from array, size is %d and capacity is %d\n", r->size, r->capacity);
    printf("The top of the array after remove is %d\n", topDynArr(r));

    if (containsDynArr(r, 3) == 1) {
        printf("Value 30 is in the array.\n");
    }

    printf("The top of the array before pop is %d\n", topDynArr(r));
    popDynArr(r);
    printf("The top of the array after pop is %d\n", topDynArr(r));

deleteDynArr(r);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:35:32.107

`struct DynArr largerArray`是一个栈变量，它只存在于当前栈中。指向堆栈上的内存地址`v = &largerArray`。`v`然后你的函数返回并且堆栈被销毁，所以`v`指向不存在的内存，当其他函数回收这个堆栈空间时，它将被进一步覆盖。

您也永远不会真正创建动态数组。

```
DynArr *r;
initDynArr(r, cap); 
```

`r`是一个指向 DynArray 的指针，这是它的类型，但是您没有将它初始化为实际指向这样的数组，并`initDynArr()`假设它`r`已经指向 DynArray，但事实并非如此，它未初始化。正确的要么是

```
DynArr r;
initDynArr(&r, cap); 
```

在这种情况下 DynArray 存在于堆栈中或

```
DynArr *r = malloc(sizeof(*r));
initDynArr(r, cap); 
```

在这种情况下 DynArray 存在于堆上。

你的代码在内存管理方面有很多错误，我什至不知道从哪里开始。

也许你应该[看看这个页面](http://happybearsoftware.com/implementing-a-dynamic-array.html)。这个人已经实现了你在这里尝试实现的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T03:52:02.907

忘记堆栈。`largerArray`是自动管理的。该对象将在`_dynArrSetCapacity`返回时被销毁。

当你传递给 C 中的函数时，你是按值传递的。这意味着该函数接收新对象中的数据副本，而不是旧对象。如果更改新对象，旧对象将保持不变。`v = &largerArray;`无效，因为`v`是副本，而不是原件。请注意，在下面的示例中， in 与in`int x`不是`parse_by_value_example`同一个对象`int x`。`main`

```
#include <stdio.h>
int parse_by_value_example(int x);
int main(void) {
    int x = 0, y;
    y = parse_by_value_example(x);
    printf("Value of x: %d. Value of y: %d\n", x, y);
    return 0;
}
int parse_by_value_example(int x) {
    x = 42;
    return x;
} 
```

我认为您混淆了 C 中“数组”的定义。在 C 中，数组是`sizeof (array)`元素数量和元素大小的乘积，整个数组是一个连续的分配。例如，以下代码不会导致任何断言失败：

```
size_t array_capacity = 42;
int array[array_capacity];
assert(sizeof (array) == sizeof (array_capacity) * sizeof (array[0])); 
```

数组`[]`下标运算符实际上是一个指针下标运算符；数组衰减为指针，除非它们在诸如 之类的表达式中`&array`，`sizeof (array)`或者它们在初始化中使用。

你在看哪本书？看来你遇到了麻烦。我有信心，只要您在遇到它们时进行练习（不要跳过它们），您将从 K&R 2E 中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T03:49:49.040

在`_dynArrSetCapacity`中，您只需将本地指针更改`v`为指向您的本地堆栈变量，这不会影响 . 指向的真实数据`v`。你需要使用

```
*v = largerArray; 
```

从 复制`largerArray`。

# python - python上的实时Web应用程序

> ID：14410782
> 
> 赞同：1
> 
> 时间：2013-01-19T03:22:32.853
> 
> 标签：python, web-applications, real-time

我刚刚用[Meteor 框架](http://meteor.com/)为 NodeJS 做了一个小项目，感觉非常棒。我认为实时网络应用程序将是网络应用程序的未来，尤其是移动网络应用程序。

你能推荐一个 Python 的 Meteor 替代框架吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:25:51.180

Django Orbited with Twisted - [http://www.clemesha.org/blog/realtime-web-apps-python-django-orbited-twisted/](http://www.clemesha.org/blog/realtime-web-apps-python-django-orbited-twisted/)

或者，还有带有 Tornado 的 Django Socket JS - [https://github.com/peterbe/django-sockjs-tornado](https://github.com/peterbe/django-sockjs-tornado)

# php - 将两个（或更多）变量设置为另一个变量 PHP

> ID：14410785
> 
> 赞同：-2
> 
> 时间：2013-01-19T03:23:21.403
> 
> 标签：php, variables, echo

我需要将另外两个变量分配给一个变量。

基本上，我需要做这样的事情：

```
$gameName = $jackpot->gameName = $jackpot->MachineName;
echo $gameName; 
```

两者都`$jackpot->gameName`从`$jackpot->MachineName`两个不同的已解析 XML 文件返回“文本”（名称）。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T03:27:31.717

您可以使用数组来保存值：

```
$gameName = Array($jackpot->gameName,$jackpot->MachineName); 
```

但是，如果您尝试`echo`这样做，您将得到`Array`. 您将需要`print_r()`它，或者`echo $gameName[0]." / ".$gameName[1];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T03:30:59.733

您可以根据自己的要求遵循两种方法。

您可以将数据保存在数组中。

```
$gameName = Array($jackpot->gameName,$jackpot->MachineName); 
```

您可以连接这两个变量并将其存储在一个新变量中。

```
$gameName = $jackpot->gameName." ".$jackpot->MachineName; 
```

# php - 计算页面上传出链接的数量并忽略 rel="nofollow" 的 PHP 脚本

> ID：14410786
> 
> 赞同：1
> 
> 时间：2013-01-19T03:23:35.727
> 
> 标签：php

我是一个 php 新手，但我很确定这将很难完成并且非常消耗服务器。但我想问一下，得到比我更聪明的用户的意见。

这是我正在尝试做的事情：

我有一个 URL 列表，实际上是一个 URL 数组。

对于每个 URL，我想计算该页面上**没有 REL="nofollow" 属性**的传出链接。

所以在某种程度上，恐怕我必须让 php 加载页面并使用正则表达式匹配所有链接？

如果我有 1000 个链接，这会起作用吗？

这是我的想法，将其放入代码中：

```
$homepage = file_get_contents('http://www.site.com/');

$homepage = htmlentities($homepage);

// Do a preg_match for http:// and count the number of appearances:
$urls = preg_match();

// Do a preg_match for rel="nofollow" and count the nr of appearances:
$nofollow = preg_match();

// Do a preg_match for the number of "domain.com" appearances so we can subtract the website's internal links:
$internal_links = preg_match();

// Substract and get the final result: 
$result = $urls - $nofollow - $internal_links; 
```

希望你能提供帮助，如果这个想法是正确的，也许你可以帮助我处理 preg_match 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T04:37:32.303

您可以使用 PHP 的[DOMDocument](http://php.net/manual/en/class.domdocument.php)类来解析 HTML 和[parse_url](http://php.net/manual/en/function.parse-url.php)来解析 URL：

```
$url = 'http://stackoverflow.com/';
$pUrl = parse_url($url);

// Load the HTML into a DOMDocument
$doc = new DOMDocument;
@$doc->loadHTMLFile($url);

// Look for all the 'a' elements
$links = $doc->getElementsByTagName('a');

$numLinks = 0;
foreach ($links as $link) {

    // Exclude if not a link or has 'nofollow'
    preg_match_all('/\S+/', strtolower($link->getAttribute('rel')), $rel);
    if (!$link->hasAttribute('href') || in_array('nofollow', $rel[0])) {
        continue;
    }

    // Exclude if internal link
    $href = $link->getAttribute('href');

    if (substr($href, 0, 2) === '//') {
        // Deal with protocol relative URLs as found on Wikipedia
        $href = $pUrl['scheme'] . ':' . $href;
    }

    $pHref = @parse_url($href);
    if (!$pHref || !isset($pHref['host']) ||
        strtolower($pHref['host']) === strtolower($pUrl['host'])
    ) {
        continue;
    }

    // Increment counter otherwise
    echo 'URL: ' . $link->getAttribute('href') . "\n";
    $numLinks++;

}

echo "Count: $numLinks\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T03:48:41.153

您可以使用[SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/)：

```
// Create DOM from URL or file
$html = file_get_html('http://www.site.com/');

// Find all links 
foreach($html->find('a[href][rel!=nofollow]') as $element) {
    echo $element->href . '<br>';
} 
```

由于我不确定 SimpleHTMLDOM 是否支持`:not`选择器并且`[rel!=nofollow]` *可能*只返回`a`具有`rel`属性的标签（而不是*不*存在属性的标签），您可能必须：

```
foreach($html->find('a[href][!rel][rel!=nofollow]') as $element) 
```

注意添加的`[!rel]`. 或者，手动而不是使用 CSS 属性选择器：

```
// Find all links 
foreach($html->find('a[href]') as $element) {
    if (strtolower($element->rel) != 'nofollow') {
        echo $element->href . '<br>';
    }
} 
```

# facebook - 实时统计facebook分享

> ID：14410792
> 
> 赞同：1
> 
> 时间：2013-01-19T03:24:41.747
> 
> 标签：facebook, share

> **可能重复：**
> [如何使用图形 API 获取共享计数](https://stackoverflow.com/questions/5699270/how-to-get-share-counts-using-graph-api)

我有一个网站，我在网上卖东西。我想在一个项目下方添加一个 FB 共享按钮，这样每次单击该按钮并共享该链接（无论是通过我的网站还是在 Facebook 本身），项目价格都会降低 X 数量。

所以我的问题是：是否可以跟踪或计算链接的整体共享次数？

谢谢

# c# - 从 .Net 3.5 应用程序的数据库表模式生成模型类的 C# 源代码

> ID：14410794
> 
> 赞同：2
> 
> 时间：2013-01-19T03:25:38.263
> 
> 标签：c#, sql, sql-server, orm, object-relational-model

我使用 Ado.Net 创建了一些 WinForms 应用程序来连接数据库。我正在使用MVP模型。

该应用程序使用 .Net 3.5，因此我不能使用 EF 5.0，也不愿意使用较低版本的 EF。我正在使用 VS 2012。是否有任何工具可用于从数据库表模式生成 C# 模型类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:28:48.757

这称为首先实体框架模型：您基于现有数据库模式生成基于 Edmx 设计器的模型，然后基于此模型生成 POCO 类。

Visual Studio 2012 默认支持该方法： Add -> New item -> Data -> **EF 5.x DbContext Generator**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-12T14:52:20.983

有一个可用的 Windows 工具[SqlToCSharp](https://github.com/amit7verma/SqlToCSharp)，它为数据库表、视图、SP 等创建 C# 类。

我已经开发了它，我相信它会有助于解决上述问题。

# google-maps-api-3 - Google Map API v3 未准确返回日本地址

> ID：14410795
> 
> 赞同：1
> 
> 时间：2013-01-19T03:25:42.403
> 
> 标签：google-maps-api-3, map, street-address

我有一个实现“Google Map API v3”的站点，以在我们的数据库中创建带有瑜伽工作室图钉的地图。不幸的是，这些地点都在日本。我们有英文和日文的地址，但是，谷歌地图对英文的日文地址不太灵活，而且我们的地址数据库不是最干净的，所以有时地址无法正确显示。我们的日文字符（汉字）地址可能没问题，我想使用它们，所以这就是问题所在......

使用带有 Google Map API 的汉字地址时，地图会显示完全错误的位置。但是当我在谷歌地图中手动输入相同的地址时，它会准确地传递。

有语言设置之类的吗？

谢谢你。

* * *

更新和另一个问题...

通过在此处编辑“GoogleMapAPIv3.class.php”文件，我想出了如何在地图上获取正确的位置：

```
public function geocoding($address)
{
    $encodeAddress = urlencode($this->withoutSpecialChars($address));
    $url = "http://maps.google.com/maps/geo?q=".$encodeAddress."&output=csv"; 
```

...ETC...

将 '$url...' 行更改为：

```
$url = "http://maps.google.com/maps/geo?q='".$address."'&output=csv"; 
```

要使函数按原样使用输入的地址。我的问题是，这会导致其他任何问题吗？

请记住，此地图功能仅用于映射驻留在我们数据库中的位置，因此地址仅限于那里。即没有随机的用户输入。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T09:00:11.250

更改 ***`$url = "http://maps.google.com/maps/`***为**`$url = "https://google.co.jp/maps/`**，如果您愿意，可以**`language=ja`**在末尾添加，以便语言为日语，例如： **`https://google.co.jp/maps/api/js?language=ja`**

[https://developers.google.com/maps/documentation/javascript/examples/map-language](https://developers.google.com/maps/documentation/javascript/examples/map-language) 和[https://google.co.jp/maps/](https://google.co.jp/maps/)是日本的谷歌地图

# c++ - 获取 wxTaskBarIcon 的屏幕位置

> ID：14410803
> 
> 赞同：0
> 
> 时间：2013-01-19T03:26:30.090
> 
> 标签：c++, wxwidgets, taskbar

我的应用程序中有一个`wxTaskBarIcon`在应用程序运行时添加到任务栏的应用程序。我想知道，`location of this icon`但到目前为止还没有做到这一点。我需要该位置，因为我想在该位置打开一个自定义框架（不是菜单）。由于 wxTaskBarIcon 直接从 wxObject 派生，因此是否有可能获取位置，因此没有这样的函数来获取位置？有没有其他方法可以让它工作？任何想法或代码都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:23:07.920

不，似乎没有办法得到你需要的职位。例如，在[wxWiki](http://wiki.wxwidgets.org/WxTaskBarIcon)上使用自定义气球的示例在角落执行弹出窗口，因为它不知道正确的位置。

# javascript - 未从服务器检索 jQuery 文件

> ID：14410806
> 
> 赞同：1
> 
> 时间：2013-01-19T03:26:59.710
> 
> 标签：javascript, jquery, html

由于某种原因，我的 html 文件对我的 jquery.js 文件的请求失败，但是当我在浏览器的新选项卡中输入该确切的 url 时，我得到了我在网站加载时尝试获取的确切 jquery.js 文件。

我的代码是这样的：

```
<script src="js/jquery.js"></script> 
```

我的网站[在这里](http://ilanshomekitchen.x10.mx/)。如果将 jquery.js 附加到根目录，您将看到确切的文件。

谁能解释为什么网站加载时文件没有正确检索？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T03:37:49.533

在您的 HTML 文件的开头是这样的：

```
<!DOCTYPE html>
<html manifest="appcache.appcache"> 
```

`appcache.appcache`指的是文件appcache.appcache [，](http://ilanshomekitchen.x10.mx/appcache.appcache)其内容为：

```
CACHE MANIFEST
# V1.65 1-18-2013 10:15 PM

# cache

index.html
about.html
services.html
contact.html
css/signika.css
css/mq.css
css/index.css
css/about.css
css/services.css
css/contact.css
assets/signika_400.woff
assets/signika_600.woff
js/html5.js
js/index.js
js/mq.js
js/services.js
mail.php
images/chicken.png
images/salad.png
images/soup.png
images/steak.png
images/wontons.png 
```

如您所见`jQuery.js`，不存在。我建议您添加`js/jQuery.js`一个新行并重试。

* * *

我通过以下方式解决了这个问题：

*   与 Chrome 并行运行[Fiddler 软件（在 Windows 上）。](http://www.fiddler2.com/)
*   使用开发者工具在 Chrome 中加载您的网站（在 Windows 上为`Ctrl`+ `Shift`+ ，`I``Command ⌘</kbd>+`Option ⌥</kbd>+`I` on Mac), then go to the Network tab.``

然后我看到 Chrome`appcache.appcache`从第二次开始加载，加载时出现错误`jQuery.js`。

* * *

该`manifest`属性指的是**HTML5 缓存清单文件**。

教程：

*   [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

更多参考：

*   [http://caniuse.com/#search=manifest](http://caniuse.com/#search=manifest)（浏览器兼容性）
*   [http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)（维基）
*   [https://www.google.com/search?q=html5+manifest](https://www.google.com/search?q=html5+manifest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:34:43.283

包含相关脚本头的 HTML 文件很可能不在“根”中，但可能在同一个 JS 文件夹或其他地方。

所以从技术上讲，这应该有效：

```
<script src="/js/jquery.js"></script> 
```

请记住，这条路径是相对的。

# android - Android SeekBar 在 onCreateView 中不起作用

> ID：14410807
> 
> 赞同：2
> 
> 时间：2013-01-19T03:27:17.970
> 
> 标签：android, seekbar

在我的 MainActivity onCreateView 中，我以编程方式（无 xml）创建了一个搜索栏，如下所示：

```
 mVolControlSB = new SeekBar(context);
        mVolControlSB.setMax(maxVolume);
        mVolControlSB.setProgress(curVolume);
        mVolControlSB.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
            Log.d("MainActivity", "volControlSB.setOnSeekBarChangeListener onStopTrackingTouch arg0="+arg0);
        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
            Log.d("MainActivity", "volControlSB.setOnSeekBarChangeListener onStartTrackingTouch arg0="+arg0);
        }

        @Override
        public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
            mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, arg1, 0);
        }
    });
    mVolControlSB.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0, 20));
    kitctrlLayout.addView(mVolControlSB); 
```

它显示了搜索栏，但拇指位置在错误的位置（在我的示例中，maxVolume 为 15，curVolume 为 10，但它一直显示到左侧）。此外，当我拖动拇指时没有调用回调，没有任何反应。我将 mVolControlSB 设置为 MainActivity 类中的静态字段，但我也尝试将其作为本地

```
static  SeekBar mVolControlSB; 
```

有人有想法吗？

请注意，我应该补充一点，我正在使用选项卡布局，并且在内部调用了此代码

```
 public static class DummySectionFragment extends Fragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) { 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:38:00.933

像这样对我来说很好。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ll = (LinearLayout) findViewById(R.id.lay);

    mVolControlSB = new SeekBar(this);
    mVolControlSB.setMax(15);
    mVolControlSB.setProgress(10);
    mVolControlSB
            .setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) {
                    Log.d("MainActivity",
                            "volControlSB.setOnSeekBarChangeListener onStopTrackingTouch arg0="
                                    + arg0.getProgress());
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) {
                    Log.d("MainActivity",
                            "volControlSB.setOnSeekBarChangeListener onStartTrackingTouch arg0="
                                    + arg0.getProgress());
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int arg1,
                        boolean arg2) {

                }
            });
    mVolControlSB.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    ll.addView(mVolControlSB);
} 
```

# android - 为 ViewPager 动态生成片段

> ID：14410808
> 
> 赞同：1
> 
> 时间：2013-01-19T03:27:19.750
> 
> 标签：android, android-fragments, android-viewpager

我是使用 a 的新手`ViewPager`，但我的应用程序上的初始屏幕是`ListView`用户可以添加/删除新项目的，然后单击其中一个项目会将它们带到基于传递的 id 的“详细信息”片段。我希望用户也能够从列表中滑动到每个详细信息。

我有`ViewPager`工作，除了 id 总是关闭一个。这可能是我`ViewPagers`对`onCreateView`. 因此，假设 id 为 1、2、3、4，当应用程序加载时，应用程序启动时的 id`onCreateView`为 1。当我从列表执行初始滑动到第一个详细信息片段时，id 为 2（当我期望它是1）。

这是我到目前为止所拥有的：

**Main.class（应用程序启动时的初始活动）**

```
public class Main extends SherlockFragmentActivity
{
    private static int NUMBER_OF_PAGES;  
    private ViewPager mViewPager;  
    private MyFragmentPagerAdapter mMyFragmentPagerAdapter; 
    private static List<Fragment> fragments;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager);  
        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
        mViewPager.setAdapter(mMyFragmentPagerAdapter);

        final List<Integer> ids = GetIds(); //loads ids to popular the viewpager

        NUMBER_OF_PAGES = ids.size();

        fragments = new ArrayList<Fragment>();

        fragments.add(new ListingFragment()); //initial screen

        for(Integer id : ids)
            fragments.add(DetailsFragment.newInstance(id));
    }

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {            

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }

        @Override  
        public Fragment getItem(int index) {

            return fragments.get(index);
        }

        @Override  
        public int getCount() {  

             return NUMBER_OF_PAGES;  
        }
   }
} 
```

**DetailsFragment.class**

```
public class DetailsFragment extends SherlockFragmentActivity
{
    private int detailId;
    private List<Integer> items;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);         
    }

    @Override
    public void onActivityCreated(final Bundle icicle)
    {    
        super.onActivityCreated(icicle);
    }

    public static DetailsFragment newInstance(int id) {

        DetailsFragment lf = new DetailsFragment();
        Bundle bundle = new Bundle();
        bundle.putInt("id", id);
        lf.setArguments(bundle);
        return lf;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.details, container, false);

        detailId = getArguments().getInt("id"); //this id is always off

        items = GetItems();

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:27:51.987

> 我有 ViewPager 工作，除了 id 总是关闭一个。这可能是我对ViewPagers的理解不够，但是如果我在detailsfragment的onCreateView中放了一个断点，那么这个断点就会在app加载的时候被命中，传递的id就是第一个id。因此，假设 id 为 1、2、3、4，当应用程序加载时，onCreateView 中应用程序启动时的 id 为 1。当我从列表执行初始滑动到第一个详细信息片段时，id 为 2 （当我期望它是 1 时）。

也许我不明白你面临的问题，但你发布的代码（再次，如果这是你使用的完整代码（目前它不会编译为你的`DetailsFragments`扩展`SherlockFragmentActivity`（？！）））不能做你说的. 您设置片段的方式将使它们具有正确的 ID。

您所看到的很可能是由于`ViewPager`工作方式造成的，这可能会产生误导。首次启动应用程序时，您会看到`ListingFragment`. 现在，`ViewPager`为了给用户提供流畅的滑动，还将在当前可见片段的每一侧加载（默认情况下）一个额外的片段（所以当应用程序启动时，`ViewPager`将加载页面`0`（`ListingFragment`）和下一个（到对，因为我们没有地方可以去左边））页面，`1`（`DetailsFragment`带有 id `1`）。当您从第一个滑动`ListingFragment`到第一个`DetailsFragment`（具有 id `1`）时，`ViewPager`将自动提前创建第二个`DetailsFragment`（具有 id `2`）（再次，以便能够立即滑动到它）。现在，如果你有一个`Log``onCreateView`在`DetailsFragment`（查看）中的语句，当您从第一个滑动到第一个`id`时，您看到第二个 id 是正常的，因为它不会从第一个（已创建的 id ）出现，它会出现是因为第二个（带有 id ）是提前创建的。`ListingFragment``DetailsFragment``Log``DetailsFragment``1``DetailsFragment``2`

另外，修改你的代码，因为你引入了一个微妙的错误。您设置了 `NUMBER_OF_PAGES`初始化的适配器的大小，`ids.size()`但随后添加了`ListingFragment`将使`DetailsFragment`最后一个 id(from `ids`) 的适配器根本不出现。

# android - WebView 中边框的大小呈现不同

> ID：14410810
> 
> 赞同：5
> 
> 时间：2013-01-19T03:27:45.990
> 
> 标签：android, webview, android-webview

我有一个正在使用 WebView 查看的移动网页，但由于某种原因，它以不同的方式呈现边框 - 1px 或 2px 厚。有人经历过吗？

所以下面的示例图片显示了一个 1px 顶部和 1px 底部边框的 div 是如何以 1px 顶部和 2px 底部呈现的。这个问题也出现在其他地方，这使得设计看起来很便宜......

有什么建议么？

![在此处输入图像描述](../Images/27d284df7d5c4f3f60ebcbf90b619088.png)

**一些代码**

活动

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);
        deleteDatabase("webview.db");
        deleteDatabase("webviewCache.db");
        WebView mywebview = (WebView) findViewById(R.id.webview);

         mywebview.loadUrl("http://example.mobi/");
         WebSettings webSettings = mywebview.getSettings();
         webSettings.setJavaScriptEnabled(true);
         //webSettings.setBuiltInZoomControls(true);
         mywebview.setWebViewClient(new WebViewClient());

    }

} 
```

**XML**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity" >

    <WebView android:id="@+id/webview" 
         android:layout_width="fill_parent" 
         android:layout_height="fill_parent"
         />

</RelativeLayout> 
```

**HTML**

```
...
 <meta name="viewport" content="target-densitydpi=device-dpi; width=device-width; initial-scale=1; minimum-scale=1; maximum-scale=1; user-scalable=0;">
<div id="mobilesStatusSubmit">
   post status
</div>
.... 
```

**CSS**

```
div#mobilesStatusSubmit{
width: 100%;
height: 30px;
padding-top:10px;
font-size: 16px;
font-weight: bold;
color: #2684b0;
text-align: center;
background: white;
display: block;
border-top: 1px solid #bbbbbb;
border-bottom: 1px solid #bbbbbb;

} 
```

**电话**

Galaxy S2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:51:02.377

我已经找到了解决这个问题的方法，并且在下面的教程中得到了很好的解释。

显然屏幕密度会影响边框，因为我的 Galaxy S2 的像素密度约为 1.5 像素，因此在某些边框中 1px 变为 2（可能有一半时间）

[https://web.archive.org/web/20120703185504/http://bradbirdsall.com/mobile-web-in-high-resolution](https://web.archive.org/web/20120703185504/http://bradbirdsall.com/mobile-web-in-high-resolution)

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T06:24:17.700

你试过这个吗...

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);
        deleteDatabase("webview.db");
        deleteDatabase("webviewCache.db");
        WebView mywebview = (WebView) findViewById(R.id.webview);
       mywebview .setKeepScreenOn(true);
            mywebview .getSettings().setJavaScriptEnabled(true);
             mywebview .getSettings().setDomStorageEnabled(true);
             mywebview .getSettings().setBuiltInZoomControls(true);
             mywebview .setInitialScale(100);
            mywebview .getSettings().setUseWideViewPort(true);
             mywebview .setWebViewClient(new MyWebViewClient());
              mywebview .setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            mywebview.loadUrl("http://example.mobi/");
           WebSettings webSettings = mywebview.getSettings();
           webSettings.setJavaScriptEnabled(true);
         //webSettings.setBuiltInZoomControls(true);
         mywebview.setWebViewClient(new WebViewClient());

    } 
```

# html - 为什么 ” 对我放轻松。我只是在学习 HTML。 根据http://www.w3.org/TR/html-markup/syntax.html#comments和我 问问题 问问题 2013-01-19T03:28:34.320 15517 次 This question shows research effort; it is useful and clear 16 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 对我放轻松。我只是在学习 HTML。 根据http://www.w3.org/TR/html-markup/syntax.html#comments和我见过的许多其他网站，例如http://www.w3schools.com/tags/tag_comment.asp 他们说 HTML 注释 和下一个破折号之间没有空格。! 然而，我在下面表明，只有当我写的时候 ，里面的东西才会真正被忽略。注意 

| test |

现在在你运行它之前，表格是否应该有边框？ 如果 text/css 中的东西真的被注释掉了，那么表格应该没有边框吧？但确实如此。我在 linux mint 14 和 firefox 18.0 下的 chrome 版本 24.0.1312.52 上试过这个 现在，当我将线路更改为 现在注意额外的空间。然后表格按预期显示没有边框。当我实际删除整行时也会发生同样的情况：

| test |

问题是：是评论 还是它？ CSS 不接受 HTML注释。相反，CSS 用于/* comment */注释行。试试那个。 htmlcsscomments 4 3 回答 3 This answer is useful 32 CSS 不接受 HTML注释。相反，CSS 用于/* comment */注释行。试试那个。 于 2013-01-19T03:30:30.653 回答 This answer is useful 21 该字符串）在某些上下文中被允许和忽略（跳过）。因此，样式表 被视为 {border: 1px solid gray;} 您可以使用 W3C CSS Validator进行检查。第一种情况，带空格，报错，不报有效CSS规则。第二种情况，没有报错，规则显示为有效。 在 CSS 中，注释总是以 . 开头/*和结尾*/。 是很久以前（我们谈论的是 Netscape 1 仍在使用的时候），一些浏览器根本无法识别该style元素。这意味着他们忽略了标记并处理它们之间的内容，就好像它是普通的 HTML 内容一样。这将导致样式表显示在此类浏览器的页面内。为了防止这种情况，为了“隐藏样式表”，样式表被包裹在 HTML 注释分隔符之间。旧的浏览器会简单地忽略元素的内容style。但是随后必须在 CSS 规范中添加一个特殊规则以允许分隔符。 这是古老的历史，但旧习惯盛行，甚至从其他人的代码中复制而不理解它们的含义。长期以来，没有理由“隐藏样式表”，而这个技巧现在已成为潜在的风险（由于可能干扰 XHTML 规则或人们的混淆和输入错误）。 所以，永远不要在 CSS 中使用出于兼容性目的使用 CSS 样式块。 在这种情况下，不支持CSS的旧浏览器会将其注释掉以避免错误。  将被解释为 通过不支持CSS的旧浏览器。这样，这些浏览器就可以避免潜在的错误。 然而，在现代浏览器中，内部 CSS 样式块将被忽略。  将被解释为  通过具有 CSS 支持的浏览器。 于 2016-03-09T13:26:39.380 回答 Related 5 javascript - 如何从 DIV 中获取选定的文本 2 c# - DataGrid 上的对象处理异常 1 java - 在服务器启动时初始化同步线程池执行器 4 mongodb - mongo --shell file.js 和“使用”语句 1 iphone - 如何在文本标签而不是键中获取数组的值 1 oauth-2.0 - 使用 OAuth2 设备配置文件支持实现授权服务器 1 php - 如何为设备制作文档查看器？ 3 c# - 如何在忽略时区问题的情况下从 SQL Server 获取 DateTime 数据？ 3 c# - 输入数据时出现 C# 表单错误，未设置为对象的实例 4 css - CSS: How to have to divs side by side with height 100%? Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14410811
> 
> 赞同：16
> 
> 时间：
> 
> 标签：html, css, comments

对我放轻松。我只是在学习 HTML。

根据[http://www.w3.org/TR/html-markup/syntax.html#comments](http://www.w3.org/TR/html-markup/syntax.html#comments)和我见过的许多其他网站，例如[http://www.w3schools.com/tags/tag_comment.asp](http://www.w3schools.com/tags/tag_comment.asp)

他们说 HTML 注释 和下一个破折号`<!-- text -->`之间没有空格。`!`

然而，我在下面表明，只有当我写的时候`<! -- test -->` ，里面的东西才会真正被忽略。注意 `<!`和之间添加的空格`--`

这是HTML代码

```
<!DOCTYPE HTML>
<html>
    <head>
     <style type="text/css">   
<!-- td {border: 1px solid gray;} -->
    </style>
</head>
<body>

<table>
  <tr>   <td>      test   </td>  </tr>
</table>

</body>
</html> 
```

现在在你运行它之前，表格是否应该有边框？

如果 text/css 中的东西真的被注释掉了，那么表格应该没有边框吧？但确实如此。我在 linux mint 14 和 firefox 18.0 下的 chrome 版本 24.0.1312.52 上试过这个

现在，当我将线路更改为

```
 <! -- td {border: 1px solid gray;} --> 
```

现在注意额外的空间。然后表格按预期显示没有边框。当我实际删除整行时也会发生同样的情况：

```
<!DOCTYPE HTML>
<html>
    <head>
     <style type="text/css">   
     </style>
</head>
<body>

<table>
  <tr>   <td>      test   </td>  </tr>
</table>

</body>
</html> 
```

**问题是**：是评论 `<!-- text -->`还是它`<! -- text -->`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-19T03:30:30.653

CSS 不接受 HTML`<!-- comment here -->`注释。相反，CSS 用于`/* comment */`注释行。试试那个。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-19T04:56:06.760

该字符串`<! --`不会注释掉任何内容。相反，在 CSS 中它是一个语法错误，并且 CSS[错误处理](http://www.w3.org/TR/CSS21/syndata.html#parsing-errors)规则意味着在这种情况下所有样式表都被忽略。

该字符串`<!--`也不开始注释，但根据 CSS[注释](http://www.w3.org/TR/CSS21/syndata.html#comments)规则，它（以及`-->`）在某些上下文中被允许和忽略（跳过）。因此，样式表

```
<!-- td {border: 1px solid gray;} --> 
```

被视为

```
{border: 1px solid gray;} 
```

您可以使用 W3C [CSS Validator](http://jigsaw.w3.org/css-validator/)进行检查。第一种情况，带空格，报错，不报有效CSS规则。第二种情况，没有报错，规则显示为有效。

在 CSS 中，注释总是以 . 开头`/*`和结尾`*/`。

`<!--`和 的特殊规则的原因 `-->`是很久以前（我们谈论的是 Netscape 1 仍在使用的时候），一些浏览器根本无法识别该`style`元素。这意味着他们忽略了`<style>`and`</style>`标记并处理它们之间的内容，就好像它是普通的 HTML 内容一样。这将导致样式表显示在此类浏览器的页面内。为了防止这种情况，为了“隐藏样式表”，样式表被包裹在 HTML 注释分隔符之间。旧的浏览器会简单地忽略元素的内容`style`。但是随后必须在 CSS 规范中添加一个特殊规则以允许分隔符。

这是古老的历史，但旧习惯盛行，甚至从其他人的代码中复制而不理解它们的含义。长期以来，没有理由“隐藏样式表”，而这个技巧现在已成为潜在的风险（由于可能干扰 XHTML 规则或人们的混淆和输入错误）。

所以，永远不要在 CSS 中使用`<!--`（或）。`<! --`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T13:26:39.380

我见过人们**`<!-- -->`**出于兼容性目的使用 CSS 样式块。

在这种情况下，不支持**CSS**的旧浏览器会将其注释掉以避免错误。

```
<style type="text/css">   
<!-- td {border: 1px solid gray;} -->
</style> 
```

将被解释为

```
<style type="text/css">
</style> 
```

通过不支持**CSS**的旧浏览器。这样，这些浏览器就可以避免潜在的错误。

然而，在现代浏览器中，**`<!-- -->`**内部 CSS 样式块将被忽略。

```
<style type="text/css">   
<!-- td {border: 1px solid gray;} -->
</style> 
```

将被解释为

```
<style type="text/css">
td {border: 1px solid gray;}
</style> 
```

通过具有 CSS 支持的浏览器。

# css - 如何使用自定义 CSS 设置 GTK+ 样式？

> ID：14410821
> 
> 赞同：9
> 
> 时间：2013-01-19T03:30:37.550
> 
> 标签：css, linux, ubuntu, gtk, gtk3

有人可以键入一个简单的示例来使用 CSS 设置 GTK+ 小部件的样式吗？我无法弄清楚如何查看文档：

```
#include <gtk/gtk.h>
int main(int argc,char *argv[])
{
    gtk_init(&argc,&argv);
    GtkWidget *window;
    GtkWidget *button;
    GtkCssProvider *cssProvider;

    gtk_css_provider_load_from_path(cssProvider,"./gtkExample2.css",NULL);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    button = gtk_button_new_with_label("GTK Button");

    gtk_style_context_add_provider(gtk_widget_get_style_context(window),cssProvider,GTK_STYLE_PROVIDER_PRIORITY_USER);

    g_signal_connect_swapped(window,"delete-event",G_CALLBACK(gtk_widget_destroy),window);

    gtk_container_set_border_width(GTK_CONTAINER(window),20);
    gtk_container_add(GTK_CONTAINER(window),button);

    gtk_widget_show(window);
    gtk_widget_show(button);

    gtk_main();
    return 1;
} 
```

# mysql - MySQL按字母数字顺序排列varchar

> ID：14410834
> 
> 赞同：2
> 
> 时间：2013-01-19T03:32:55.087
> 
> 标签：mysql, sql, select, sql-order-by

给定一个名为 title 的 VARCHAR 列，`SELECT title FROM table ORDER BY title`结果如下：

```
Alpha 11
Alpha 2
Beta 1
Beta 11
Beta 2 
```

我希望这是在“正确”的顺序

```
Alpha 2
Alpha 11
Beta 1
Beta 2
Beta 11 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:35:59.023

尝试这个：

```
SELECT title ,
  SUBSTRING_INDEX(title, '', 1) as title_str,
  SUBSTRING_INDEX(title, ' ', -1) + 0 as title_num
FROM table 
ORDER BY title_str, 
  title_num 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:37:40.230

这称为自然顺序排序。不幸的是，MySQL 没有内置这样的排序算法，所以你最可靠的选择是创建一个 UDF 来为你做这件事。

然而，[这个问题](https://stackoverflow.com/questions/153633/natural-sort-in-mysql)有一个有趣的答案：

> 这是一个快速的解决方案：
> 
> ```
> SELECT title
> FROM table
> ORDER BY LENGTH(title), title 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T03:55:11.907

尝试这个：

```
SELECT title 
FROM tablename 
ORDER BY SUBSTRING_INDEX(title, ' ', 1), 
         CAST(SUBSTRING_INDEX(title, ' ', -1)  AS UNSIGNED); 
```

# android - Android：如何将属性动画应用于 Drawable

> ID：14410837
> 
> 赞同：1
> 
> 时间：2013-01-19T03:33:28.033
> 
> 标签：android, android-animation

我有一个视图，我在其中将多个图像绘制为 Drawables。我有一个 ImageHolder 类，其中我有 Drawable 对象和其他位置信息。我正在使用 drawable.draw(canvas) 方法绘制每个图像/可绘制对象。我想将属性动画应用于图像。有没有办法我可以做到这一点。在 Drawable 上使用 Frame Animation 不会达到我的目的。

提前致谢

# xml - XML 架构错误 - w3c xml 架构的根元素

> ID：14410838
> 
> 赞同：1
> 
> 时间：2013-01-19T03:33:37.910
> 
> 标签：xml, visual-studio, ssis, wsdl, schema

我正在尝试通过 [[Visual Studio 2010 Shell for SQL Server 2012 SSIS]] 添加 Web 服务任务。

我在同一个文件夹中有 wsdl 文件和 xsd 文件。当我尝试引用下面的 wsdl 文件时，我从 Visual Studio 收到错误消息：

**W3C XML Schema 的根元素应该是`<schema>`，其命名空间应该是“http://www.w3.org/2001/XMLSchema”。**

这是 13,000 行 wsdl 文件的前几行：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:s0="http://www.cisco.com/AXLAPIService/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:xsd1="http://www.cisco.com/AXL/API/8.0" targetNamespace="http://www.cisco.com/AXLAPIService/">
<import location="AXLSoap.xsd" namespace="http://www.cisco.com/AXL/API/8.0"/>
<message name="addSipProfileIn">
<part element="xsd1:addSipProfile" name="axlParams"/>
</message> 
```

AXLSoap.xsd 的前几行：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://www.cisco.com/AXL/API/8.0" xmlns:axlapi="http://www.cisco.com/AXL/API/8.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="unqualified" attributeFormDefault="unqualified" version="8.0">
<xsd:complexType name='XSipProfile'>
<xsd:sequence minOccurs='0'>
<xsd:element maxOccurs='1' nillable='false' name='name' minOccurs='1' type='axlapi:String50'></xsd:element> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:52:45.673

原来是 XSD 中的元素需要一个完全限定的（http 或 https，不能是 c:\ d:\ 相对等）位置属性。一旦我将 xsd 上传到 Web 服务器并将 location 属性指向它，瞧！

# javascript - 如何使用 javascript 更改特定的 JQuery Mobile 按钮图标

> ID：14410847
> 
> 赞同：-1
> 
> 时间：2013-01-19T03:34:59.740
> 
> 标签：javascript, jquery-mobile

我以前曾问过一个类似的问题，即如何更改按钮图标，此处已回答[如何使用 javascript 更改 JQuery Mobile 按钮图标](https://stackoverflow.com/questions/14409282/how-to-change-a-jquery-mobile-button-icon-with-javascript)

虽然这确实帮助我改变了图标，但它改变了我项目中所有按钮的图标。我现在要问的是如何将图标更改隔离为单个按钮

例如，如果我的页面上有两个按钮；

```
 <a href="#language1" id="language4" 
    data-rel="popup" data-role="button" 
    data-icon="edit" data-inline="true" 
    data-position-to="origin" >Russian</a> 
```

和

```
 <a href="#language2" id="language3" 
    data-rel="popup" data-role="button" 
    data-icon="edit" data-inline="true" 
    data-position-to="origin" >English</a> 
```

然后应用以下建议的javascript；

```
 $('#index').live('pagebeforeshow',function(e,data){    
$('a').buttonMarkup({ icon: "star" });  
    }); 
```

两个按钮都会受到影响。相反，如果我尝试引用语言 3 而不是“a”，那么什么也不会发生。我想我对它的工作原理缺少一些基本的了解

[请参阅http://jsfiddle.net/rdAnY/1/](http://jsfiddle.net/rdAnY/1/)上的Fiddle 示例Javascript 将两种语言按钮的图标以及“下一步”按钮设置为星号。您如何将（例如）仅将英文按钮设置为星号，而将俄文按钮保留为原始按钮

```
data-icon="edit" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T03:51:12.533

最基本的是[jquery 选择器](http://api.jquery.com/category/selectors/)。

这将仅更改图标语言2：

```
$('a[href=#language2]').buttonMarkup({ icon: "star" }); 
```

# ruby - 如何在 ruby 1.8.7 中编写 "string".encode("us-ascii")？

> ID：14410854
> 
> 赞同：3
> 
> 时间：2013-01-19T03:37:18.337
> 
> 标签：ruby, ruby-1.9.3, ruby-1.8.7

我正在尝试使用“gmail_xoauth”gem，不幸的是，gem`encode("us-ascii")`用于字符串，它仅适用于 Ruby 1.9.3。

我对`encode`Ruby 1.9.3 不熟悉，所以我想知道`"string".encode("us-ascii")`1.8.7 是什么以及如何编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T05:32:31.700

string.encode("us-ascii") 方法将字符串中的所有字符转换为美国 ASCII 7 位值。

US-ASCII 本质上是总共 128 个字符的纯文本。这种编码在 1970 年代至 1990 年代的美国计算机上很常见。

您现在看到它的原因可能是因为您正在使用电子邮件。电子邮件协议要求对字符串进行 US-ASCII 编码。

Ruby 1.8.7 没有内置字符串编码方法，因为 Ruby 1.8.7 将字符串存储为字节，而不是编码字符。

要在 Ruby 1.8.7 中进行转换，请参阅 Iconv 库：

[http://ruby-doc.org/stdlib-1.8.7/libdoc/iconv/rdoc/Iconv.html](http://ruby-doc.org/stdlib-1.8.7/libdoc/iconv/rdoc/Iconv.html)

另请参阅此答案中的转换 iconv 代码示例：

[Ruby 1.8.7（或 Rails 2.x）中的 String.force_encoding()](https://stackoverflow.com/questions/4583924/string-force-encoding-in-ruby-1-8-7-or-rails-2-x)

# objective-c - Objective-C 代码分析

> ID：14410858
> 
> 赞同：0
> 
> 时间：2013-01-19T03:38:25.943
> 
> 标签：objective-c, c, objective-c-runtime, llvm-clang

我想写一个工具来完成objective-c类名、选择器名和属性名的代码，因为软件正在开发中。（即可以定期运行并构建类名树及其属性/选择器的东西）。

有没有我可以使用的 API？. . 我正在查看 clang 静态分析器，但是从快速运行文档来看，我似乎需要一些更底层的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:32:19.857

对此没有太多答案，但基于@CodaFi 的评论：

那么 CLANG AST 就是要走的路。真的，你单枪匹马写的任何东西都无法与 CLANG 团队努力的质量和广度相提并论，所以不妨使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T00:19:35.360

这确实是一项*艰巨的*任务。Eclipse 会做你想做的事吗？为Objective C添加它也许是一个可以实现的目标......

# python - 确定 Python 类是抽象基类还是具体类

> ID：14410860
> 
> 赞同：40
> 
> 时间：2013-01-19T03:38:35.613
> 
> 标签：python, abstract-class, abc

我的 Python 应用程序包含许多抽象类和实现。例如：

```
import abc
import datetime

class MessageDisplay(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractproperty
    def display(self, message):
        pass

class FriendlyMessageDisplay(MessageDisplay):
    def greet(self):
        hour = datetime.datetime.now().timetuple().tm_hour

        if hour < 7:
            raise Exception("Cannot greet while asleep.")
        elif hour < 12:
            self.display("Good morning!")
        elif hour < 18:
            self.display("Good afternoon!")
        elif hour < 20:
            self.display("Good evening!")
        else:
            self.display("Good night.")

class FriendlyMessagePrinter(FriendlyMessageDisplay):
    def display(self, message):
        print(message) 
```

`FriendlyMessagePrinter`是我们可以使用的具体类...

```
FriendlyMessagePrinter().greet() 
```

```
Good night. 
```

...但是`MessageDisplay`and`FriendlyMessageDisplay`是抽象类，尝试实例化一个会导致错误：

```
TypeError: Can't instantiate abstract class MessageDisplay with abstract methods say 
```

如何检查给定的类对象是否是（不可实例化的）抽象类？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-19T03:54:17.633

```
import inspect
print(inspect.isabstract(object))                  # False
print(inspect.isabstract(MessageDisplay))          # True
print(inspect.isabstract(FriendlyMessageDisplay))  # True
print(inspect.isabstract(FriendlyMessagePrinter))  # False 
```

这会检查`TPFLAGS_IS_ABSTRACT`类对象中是否设置了内部标志，因此它不会像您的实现那样容易被愚弄：

```
class Fake:
    __abstractmethods__ = 'bluh'

print(is_abstract(Fake), inspect.isabstract(Fake)) # True, False 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-19T03:38:35.613

抽象类及其具体实现有一个`__abstractmethods__`属性，其中包含尚未实现的抽象方法和属性的名称。[PEP 3199](http://www.python.org/dev/peps/pep-3119/)中描述了这种行为：

> **实现：**装饰`@abstractmethod`器将函数属性`__isabstractmethod__`设置为 value `True`。该`ABCMeta.__new__`方法将 type 属性计算为具有值为 true`__abstractmethods__`的属性的所有方法名称的集合。`__isabstractmethod__`它通过组合`__abstractmethods__`基类的属性、添加新类 dict 中具有 true`__isabstractmethod__`属性的所有方法的名称以及删除新类 dict 中不具有 true`__isabstractmethod__`属性的所有方法的名称来做到这一点。如果结果`__abstractmethods__`集非空，则该类被认为是抽象的，并且尝试实例化它会引发 TypeError。（如果这是在 CPython 中实现的，则可以使用内部标志`Py_TPFLAGS_ABSTRACT`来加速此检查。）

所以在具体的类中，这个属性要么不存在，要么是一个空集。这很容易检查：

```
def is_abstract(cls):
    if not hasattr(cls, "__abstractmethods__"):
        return False # an ordinary class
    elif len(cls.__abstractmethods__) == 0:
        return False # a concrete implementation of an abstract class
    else:
        return True # an abstract class 
```

或者更简洁地说：

```
def is_abstract(cls):
    return bool(getattr(cls, "__abstractmethods__", False)) 
```

```
print(is_abstract(object))                 # False
print(is_abstract(MessageDisplay))         # True
print(is_abstract(FriendlyMessageDisplay)) # True
print(is_abstract(FriendlyMessagePrinter)) # False 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-19T04:05:48.933

您可以使用`_ast`模块执行此操作。例如，如果您的示例代码在其中，您可以使用和作为参数`foo.py`调用此函数。`"foo.py"``"FriendlyMessagePrinter"`

```
def is_abstract(filepath, class_name):
    astnode = compile(open(filename).read(), filename, 'exec', _ast.PyCF_ONLY_AST)
    for node in astnode.body:
        if isinstance(node, _ast.ClassDef) and node.name == class_name:
            for funcdef in node.body:
                if isinstance(funcdef, _ast.FunctionDef):
                    if any(not isinstance(n, _ast.Pass) for n in funcdef.body):
                        return False
            return True
    print 'class %s not found in file %s' %(class_name, filepath) 
```

# ios - 未找到该设备的临时配置文件

> ID：14410863
> 
> 赞同：1
> 
> 时间：2013-01-19T03:38:40.703
> 
> 标签：ios, xcode

我知道它已被问过数千次，但我在阅读每一种可能的解决方案时都挣扎了 4 个小时，但我仍然无法在我的设备中测试我的应用程序。

以下是事实：

1）我的应用程序已上传到 IOS 商店，因此我创建了配置文件、应用程序 ID 等。我现在想在我的 iPhone4 上测试它，目标是 iOS 6.0。

2）我在我的开发者帐户中的设备中添加了我的设备 UDID。

3）我将调试的代码签名设置为我的配置文件。

4）我在mac中插入了我的ios设备，我看到了那张照片。

![在此处输入图像描述](../Images/29ee8255e059b4cee4253b806318be1e.png) 如您所见，没有配置文件。

5）如果我将应用程序运行到我的 ios 设备（在 Xcode 中列出），我会收到错误消息

```
No provisioned iOS devices are available with a compatible iOS version. 
```

我尝试了很多解决方案，以至于我什至无法记住所有解决方案。我正在一步一步地执行所有步骤。- 有人说要从开发者帐户中注销 - 有人说要更改部署目标 - 有人说要更改“编辑方案”以进行调试。

谁能帮我？我不明白自从应用程序发布以来缺少什么，我只想在我的设备上测试它。我应该改变什么吗？

编辑：我选择了 Ganee 所说的设备。然后在我的组织者中，我看到以下图片：

![组织者](../Images/a021f08bf3c01331896d94a8f456f859.png)

如果我按刷新，我会看到“团队中的项目太少”。

因此，如果我删除配置文件，我该如何下载新的配置文件？我想我输入我的开发人员帐户并在配置标签下的分发配置文件中按下载，对吗？但这是否使用所选设备进行了更新？

这是我在开发者帐户中的图片：

![开发者账号](../Images/d14ba48752fb606ab484f83243d4fbd3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:12:27.970

我认为您遵循了所有步骤，但仍然必须遵守以下步骤。

*   将设备添加到开发者帐户后，您必须在配置文件中选择该设备。
*   从您的组织者中删除旧的配置文件，下载新的修改后的配置文件并将其安装在您的 Mac 上。
*   请检查您是否修改了开发人员/分发配置文件并在您的 xcode 上选择它。

希望这会给出一些清晰的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:43:57.317

我记得过去有类似的问题。我不确定你的是否相似。但是不久前，当我升级我的 iOS 设备时，它不再与我正在运行的 xcode 版本兼容。我不得不升级到最新版本的 xcode。你运行的是什么 Xcode 版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:52:58.627

最后的问题是我设置了分发配置文件，而不是开发人员。谢谢您的帮助！

# rally - Analytics API：查询何时标记对象？

> ID：14410867
> 
> 赞同：0
> 
> 时间：2013-01-19T03:39:27.723
> 
> 标签：rally

是否可以使用 Analytics API 来查询特定类型的工件（如缺陷或测试用例）何时被标记为特定标签？

查询会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:55:12.223

如果您感兴趣的标签的 ObjectID 是 12345678910，那么类似以下的查询应该可以解决问题：

```
 "_TypeHierarchy":"TestCase",
    "Tags":{$in:[12345678910]},
    "_PreviousValues.Tags":{$nin:[12345678910]} 
```

# iphone - 在 CoronaSDK 中驾驶汽车

> ID：14410872
> 
> 赞同：0
> 
> 时间：2013-01-19T03:40:18.530
> 
> 标签：iphone, ipad, lua, coronasdk

有点问题，我想要实现的是一辆可以用 D-Pad 驾驶的汽车。我正在汽车“框架”的所有 4 个角上尝试物理关节。然后每个“轮子”被施加一个力来向前和向后移动它。我认为很简单，甚至无法让轮子保持连接。我将它们焊接到它上面，但它不会移动。

第二，转向？！这到底是怎么做到的？

非常感谢，为让它工作而感到压力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:06:14.473

我不确定这是否有帮助，但这里有一个链接可能会将您推向正确的方向：[http ://www.emanueleferonato.com/2009/04/06/two-ways-to-make-box2d-cars /](http://www.emanueleferonato.com/2009/04/06/two-ways-to-make-box2d-cars/)。这是我相信您正在寻找的一个示例，但它在 AS3 中。但是，它使用的是 CoronaSDK 使用的 Box2D 物理。应该可以翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:06:03.543

焊接连接不允许任何形式的移动。枢轴接头将是一个更好的选择，更现实。至于转向，如果这是一个自上而下的游戏，你可能应该对汽车的前部区域施力，而不是每个车轮，因为它可能会做一些奇怪的事情。

# smlnj - 无法确定操作系统

> ID：14410879
> 
> 赞同：20
> 
> 时间：2013-01-19T03:43:06.353
> 
> 标签：smlnj

当我进入终端（我安装了 smlnj）并输入`sml`时，它给了我错误`sml: unable to determine architecture/operating system`。这是什么意思？？？我[在这个网站上](http://www.cs.washington.edu/education/courses/cse341/11au/sml-emacs.html#install-smlnj)安装了这样的 sml ，但我不确定 - 说明有误吗？
![在此处输入图像描述](../Images/82fe48b8d69ea5b9152a1d9fe8e6ca3d.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-10-03T13:32:00.823

最近的 OS X 二进制安装程序的问题仍然存在，只是焦点转移到了 OS X 的 10.9 Mavericks 和 10.10 Yosemite 版本。尽管在最近的源代码版本中解决了根本原因。

这就是为什么从现在开始解决这个问题只是拥有一个新编译的二进制包。为此，您可能最好通过`homebrew`. 您可以使用以下命令执行此操作：

```
brew update
brew cask install smlnj 
```

截至 2021 年，使用 cask 安装的命令是

```
brew install --cask smlnj 
```

这将为您编译包，这样您就可以省去检查源代码并自己进行编译的麻烦。

只是为了清理您的系统并避免重复，您只需执行以下操作即可删除以前的安装：

```
sudo rm -rf /usr/local/smlnj* 
```

对于星号：我有一个包含 110.76 的裸 smlnj 文件夹和一个 smlnj-110.75 文件夹，我想我之前曾尝试安装两个不同的版本...

您可能需要删除您自己创建的任何指向旧 smlnj 文件夹的软链接，这些软链接直接位于上一步中删除的 /usr/local/ 下。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-19T04:08:46.313

如果您使用的是 OSX 10.8 或更高版本（`uname -r`为您提供从 12 或更高版本开始的东西），如果没有一些额外的调整，SML/NJ pre 110.75 就不能很好地工作。这是一个[已知问题](http://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=94&group_id=33&atid=215)，可以通过将 10.8 选项（参见`12`下面的行）添加到操作系统检测代码中来解决`.arch-n-opsys`：

```
 :
    10*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.6
    11*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.7
    12*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.8
    13*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.9 Mavericks
    14*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.10 Yosemite
    15*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.11 El Capitan
    16*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.12 Sierra
    17*) OPSYS=darwin; HEAP_OPSYS=darwin ;; # MacOS X 10.13 High Sierra

    *)   exit 1;;
esac;; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-23T21:05:16.067

作为对 paxdiablo 答案的更新，如果您正在运行 macOS Sierra（版本 10.12），则需要输入以下行以使 sml 运行：

```
16*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # macOS 10.12 Sierra 
```

因此，如果有更多上下文，它将如下所示：

```
 11*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # MacOS X 10.7 Lion
      12*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # MacOS X 10.8 Mountain Lion
      13*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # MacOS X 10.9 Mavericks
      14*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # MacOS X 10.10 Yosemite
      15*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # MacOS X 10.11 El Capitan
      16*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # macOS 10.12 Sierra
      17*) OPSYS=darwin;  HEAP_OPSYS=darwin ;; # macOS 10.13 High Sierra
      *) exit 1;;
    esac;; 
```

SML/NJ 版本 110.79 配置了 OS X 到 El Capitan，但 Sierra 仍然缺失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-12T22:50:36.720

塞拉利昂 10.12.6

通过 Homebrew 安装 SML`brew install smlnj`

编辑您的`.bash_profile`并添加`export PATH=/usr/local/Cellar/smlnj/110.81/bin:$PATH`到文件末尾。

之后`source ~/.bash_profile`应用新路径，以便您的系统添加新位置，然后在您键入时知道在哪里可以找到所需的文件`sml`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-25T17:52:11.500

升级我的 Macbook 后，我为此苦苦挣扎了好几个小时。以前我在 Macbook Air 上使用 OSX 10.8 Maverick，分发版[https://www.smlnj.org/dist/working/current/index.html#macos-installer](https://www.smlnj.org/dist/working/current/index.html#macos-installer)实际上运行良好。

升级到运行 OSX 10.14 Mojave 的 Macbook Pro`sml`后，在安装并添加到 PATH 后运行会给我 OP 的错误消息。

**在努力找到一些解决方案（包括此处标记为接受的解决方案）之后，最终起作用的是`brew cask install smlnj`.**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T15:51:00.833

我不小心安装了旧版本的 SML/NJ 后遇到了这个问题。我删除了我之前的安装，`/usr/local/smlnj`并使用[OS X for SML/NJ 110.78 的预构建系统](http://www.smlnj.org/dist/working/110.78/index.html)重新安装。最新下载可在[此处](http://www.smlnj.org/)**下载** ，这是未来寻求者应该咨询的内容，因为我的解决方案的细节在他们出现时可能已经过时了。

# java - 新创建的 JButton 不会覆盖之前创建的 JButton

> ID：14410892
> 
> 赞同：2
> 
> 时间：2013-01-19T03:45:56.333
> 
> 标签：java, image, swing

本质上，我编写的是一个益智游戏。

它包含一个图像，图像进一步分为 9 块，放置在 JPanel 上，其中包含一个 3x3 JButton GridLayout。最初，9 个按钮是空的。当用户单击“开始游戏”时，9 个按钮将显示按钮上的图像。

我使用 setPreferredSize() 来设置包含 9 个空 JButton 的 JPanel 的大小。之后，我使用 Inset ( 0,0,0,0 ) 使按钮的内容填满整个按钮。

但是现在，当我想在用户单击“开始游戏”时添加图像按钮来替换空按钮时，它不起作用。

我认为这是因为`setPreferredSize()`我之前设置的值阻止了这些`Insets`值的工作。

我插入了一些`system.out.println`值来检查该方法是否正在运行，它运行了，但是当用户单击“开始游戏”时，图像仍然拒绝出现在按钮上。

```
 public class GameFrame extends JFrame implements ActionListener {
        private JButton button1;
        private JButton[] button = new JButton[9];
        private Insets buttonMargin;
        private boolean testImageMethod;
        private JPanel puzpiece;

        public GameFrame(){
            //.. coding ..

            // create new buttons - button1
            button1  = new JButton("Start Game");
            // add action event to "Start" button
            button1.addActionListener(this);

            // creates a new panel for the splitted puzzle pieces
            puzpiece = new JPanel();
            puzpiece.setLayout(new GridLayout(3,3));

            // check if testImageMethod boolean ( in setupImage() ) is true, 
            //if it isn't, adds 9 buttons w/o images.
             for(int a=0; a<9; a++){
                 if(testImageMethod){
                 }
                 else{
                     // adds 9 buttons without images 
                   button[a] = new JButton();  
                   puzpiece.add(button[a]);
                   puzpiece.setPreferredSize(new Dimension(500,200));
                 }

             }
             // adds puzpiece panel into the frame 
              this.add(puzpiece,BorderLayout.WEST);     
            //.. coding ..

        }

        public void actionPerformed(ActionEvent e){
            if (e.getSource() == button1){
                // puzpiece.button.setVisible(false);
                //puzpiece.remove(button);

                // call setImage() method
                setImage();

                for(int a=0; a<9; a++){
                // adds the new 9 buttons with images into panel
                puzpiece.add(button[a]);
                // test if method is running
                System.out.println("qq");
                }
            }
            else{
                System.out.println("bbb");
            }
        } 

        // method setImage() divides the image into subimages
        public void setImage(){
          //.. coding ..
          // test if method is running
          System.out.println("a");

            setupImage( count++, sc );
        }

        // method setupImage() adds the subimages to the buttons
        private void setupImage( int a, Image wi )
        { 
          // test if method is running
          System.out.println("d");

            buttonMargin = new Insets( 0, 0, 0, 0 );
            button[a] = new JButton( new ImageIcon( wi ) );
            button[a].setMargin( buttonMargin );

            // test if method is running
            System.out.println("e");

        } // end method setupImage()
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T04:34:00.310

简单地`setIcon`说`JButton`，不要`JButton`重新添加到`JPanel`已经可见的

同样的一个小例子：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * Created with IntelliJ IDEA.
 * User: Gagandeep Bali
 * Date: 1/19/13
 * Time: 10:05 AM
 * To change this template use File | Settings | File Templates.
 */
public class ButtonImageTest
{
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private JButton button;
    private int counter = 1;

    private void displayGUI()
    {
        JFrame frame  = new JFrame("Button Image Test");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        button = new JButton();
        button.setBorderPainted(false);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (counter % 2 != 0)
                {
                    button.setIcon(errorIcon);
                    counter = 2;
                }
                else
                {
                    button.setIcon(infoIcon);
                    counter = 1;
                }
            }
        });
        contentPane.add(button);

        frame.setContentPane(contentPane);
        frame.setSize(100, 100);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }
    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ButtonImageTest().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T04:35:23.050

我不确定我确切地知道你在做什么，但是，...

*   看来您正在使用 3x3 的普通 JButton 网格填充 JPanel，
*   并且在按下按钮时，您正在添加显示图像的 JButtons。
*   但是我没有看到您在添加新按钮之前删除了原始按钮。
*   我也没有看到您在更改组件后调用`revalidate()`然后`repaint()`在 puzpiece JPanel 上。
*   更重要的是，为什么在 puzpiece JPanel 已经拥有的 JButton 中交换 ImageIcon 更容易时，为什么要交换 JButton？这是我 10 分钟前在评论中推荐的内容，但现在我正在回答。

# bash - 三个变量的大括号范围扩展

> ID：14410893
> 
> 赞同：2
> 
> 时间：2013-01-19T03:46:08.033
> 
> 标签：bash, brace-expansion

我不确定我是否在标题和这个问题中使用了正确的术语，所以如果不正确，请编辑它。

在 bash 脚本中，我有三个数组，`dirs`,`files`和`extensions`. 如何制作包含来自`dirs`、 then`files`和 then的值的所有字符串组合`extensions`？

我根本没有使用 Bash 的经验，但我确实尝试过这个，看看我是否可以只用两个数组来实现这一点：

```
$ echo ${dirs[@]}
a b
$ echo ${files[@]}
c d
$ echo ${dirs[@]}{${files[@]}}
a bc d 
```

我想从这个例子中得到的输出是`ac bc ad bd`

编辑：我完全搞砸了这个例子并修复了它，以防你想知道发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T03:52:58.360

你不能用`{foo,bar}`语法来做到这一点；*bash 仅在看到大括号之间的文字*逗号时才会扩展它。（我想你可以使用`eval`，但这会带来自己的混乱。）

只需使用循环：

```
for dir in "${dirs[@]}"; do
    for file in "${files[@]}"; do
        for ext in "${extensions[@]}"; do
            echo "$dir$file$ext"
        done
    done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:48:26.290

这受到@Suku 的回答的启发，但使用`{a,b,c}`-style 扩展而不是`{a..c}`：

```
$ dirs=(this/ that/)
$ files=(a b c)
$ extensions=(.c .h)
$ saveIFS=$IFS
$ IFS=,
$ eval echo "{${dirs[*]}}{${files[*]}}{${extensions[*]}}"
this/a.c this/a.h this/b.c this/b.h this/c.c this/c.h that/a.c that/a.h that/b.c that/b.h that/c.c that/c.h
$ IFS=$saveIFS 
```

请注意，与几乎任何涉及 的内容一样`eval`，如果任何数组值具有错误的元字符，这可能会导致灾难性的失败。如果这是一个问题，请改用@Eevee 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T04:08:18.560

**以下将适用于满足大括号扩展条件的所有条件**

```
$ dirs=(a b)
$ files=(c d)

$ eval echo {${dirs[0]}..${dirs[$((${#dirs[@]}-1))]}}{${files[0]}..${files[$((${#files[@]}-1))]}}
ac ad bc bd 
```

为了您的更多理解：

```
$ A=`echo {${dirs[0]}..${dirs[$((${#dirs[@]}-1))]}}`
$ B=`echo {${files[0]}..${files[$((${#files[@]}-1))]}}`
$ echo $A$B
{a..b}{c..d}
$ eval echo $A$B
ac ad bc bd 
```

# jquery - Jquery.mousewheel:delta 不会改变

> ID：14410895
> 
> 赞同：0
> 
> 时间：2013-01-19T03:46:26.403
> 
> 标签：jquery, jquery-plugins

我尝试使用 jquery.mousewheel 插件开发一个简单的演示。然而，三角洲从未改变。我的代码如下：

```
<head>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#myImage").mousewheel(function (event, delta) {
                var a = $("#txtResult").val()=="NaN"?0:parseInt($("#txtResult").val());
                var b = delta;

                $("#txtResult").val(a+b);
                event.stopPropagation();
                event.preventDefault();
        });
        });
    </script>
</head>
    <body>
        <img id="myImage" src="QQ截图20130119105432.png" style="width: 200px;height: 200px" />
        <input id="txtResult" type="text" value="0"/>
    </body> 
```

当我将鼠标移动到图像后操作鼠标滚轮时，`$("#txtResult").val()`从未改变。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:52:44.090

你的 javascript 代码是错误的。它应该是这样的：

```
$(function () {
    $("#myImage").mousewheel(function (event, delta) {
        var a = parseInt($("#txtResult").val());
        var b = delta;

        $("#txtResult").val(a + b);
        event.preventDefault();
    });
}); 
```

`parseInt`将解析`null`为`0`不需要额外的检查。此外，在这种情况下，`event.stopPropagation();`是无用的。

# php - unable to skip unreadable directories with RecursiveDirectoryIterator

> ID：14410899
> 
> 赞同：9
> 
> 时间：2013-01-19T03:46:53.747
> 
> 标签：php, directory, directory-walk

I want to get a list of all the subdirectories and my below code works except when I have readonly permissions on certain folders.

In the below question it shows how to skip a directory with RecursiveDirectoryIterator [Can I make RecursiveDirectoryIterator skip unreadable directories?](https://stackoverflow.com/questions/4547485/can-i-make-recursivedirectoryiterator-skip-unreadable-directories) however my code is slightly different here and I am not able to get around the problem.

```
$path = 'www/';
foreach (new RecursiveIteratorIterator(
       new RecursiveDirectoryIterator($path,RecursiveDirectoryIterator::KEY_AS_PATHNAME),
            RecursiveIteratorIterator::CHILD_FIRST) as $file => $info) 
            {
                if ($info->isDir())
                {
                       echo $file . '<br>';                     
                }
            } 
```

I get the error

```
Uncaught exception 'UnexpectedValueException' with message 'RecursiveDirectoryIterator::__construct(../../www/special): failed to open dir: Permission denied' 
```

I have tried replacing it with the accepted answer in the other question.

```
new RecursiveIteratorIterator(
new RecursiveDirectoryIterator("."), 
RecursiveIteratorIterator::LEAVES_ONLY,
RecursiveIteratorIterator::CATCH_GET_CHILD); 
```

However this code will not give me a list of all the directories inside of www like I want, where am I going wrong here?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T11:54:11.130

**Introduction**

The main issue with your code is using `CHILD_FIRST`

[FROM PHP DOC](http://php.net/manual/en/recursiveiteratoriterator.construct.php)

> Optional mode. Possible values are
> 
> *   RecursiveIteratorIterator::LEAVES_ONLY - The default. Lists only leaves in iteration.
> *   RecursiveIteratorIterator::SELF_FIRST - Lists leaves and parents in iteration with parents coming first.
> *   **RecursiveIteratorIterator::CHILD_FIRST** - Lists leaves and parents in iteration with leaves coming first.

What you should use is `SELF_FIRST` so that the current directory is included. You also forgot to add optional parameters `RecursiveIteratorIterator::CATCH_GET_CHILD`

[FROM PHP DOC](http://php.net/manual/en/recursiveiteratoriterator.construct.php)

> Optional flag. Possible values are RecursiveIteratorIterator::CATCH_GET_CHILD which will then ignore exceptions thrown in calls to RecursiveIteratorIterator::getChildren().

**Your CODE Revisited**

```
foreach (new RecursiveIteratorIterator(
        new RecursiveDirectoryIterator($path,RecursiveDirectoryIterator::KEY_AS_PATHNAME),
        RecursiveIteratorIterator::SELF_FIRST, RecursiveIteratorIterator::CATCH_GET_CHILD) as $file => $info)
{
    if ($info->isDir())
    {
        echo $file . '<br>';
    }
} 
```

**You really want `CHILD_FIRST`**

If you really want to maintain the `CHILD_FIRST` structure then i suggest you use `ReadableDirectoryIterator`

Example

```
foreach ( new RecursiveIteratorIterator(
        new ReadableDirectoryIterator($path),RecursiveIteratorIterator::CHILD_FIRST) as $file ) {
    echo $file . '<br>';
} 
```

Class Used

```
class ReadableDirectoryIterator extends RecursiveFilterIterator {
    function __construct($path) {
        if (!$path instanceof RecursiveDirectoryIterator) {
            if (! is_readable($path) || ! is_dir($path))
                throw new InvalidArgumentException("$path is not a valid directory or not readable");
            $path = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
        }
        parent::__construct($path);
    }

    public function accept() {
        return $this->current()->isReadable() && $this->current()->isDir();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T09:50:21.407

```
function dirScan($dir, $fullpath = false){

    $ignore = array(".","..");
    if (isset($dir) && is_readable($dir)){
        $dlist = array();
        $dir = realpath($dir);
        $objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir,RecursiveDirectoryIterator::KEY_AS_PATHNAME),RecursiveIteratorIterator::SELF_FIRST, RecursiveIteratorIterator::CATCH_GET_CHILD);

        foreach($objects as $entry){    
                    if(!in_array(basename($entry), $ignore)){
                        if (!$fullpath){
                            $entry = str_replace($dir, '', $entry);
                        }           
                            $dlist[] = $entry;
                    }                        
        }       
        return $dlist;
    }

} 
```

This code works 100%...

You can simply use this function in order to scan for files and folders in your desired directory or drive. You just need to pass the path of the desired directory into the function. The second parameter of the function is to show full-path of the scanned files and folder. False value of the second parameter means not to show full-path.

The array $ignore is used to exclude any desired filename or foldername from the listing.

The function returns the array containing list of files and folders.

This function skips the files and folders that are unreadable while recursion.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:05:29.443

I've set up the following directory structure:

```
/
    test.php <-- the test script
    www/
        test1/ <-- permissions = 000
            file1
        test2/
            file2
        file3 
```

I ran the following code (I've added the `SKIP_DOTS` flag to skip `.` and `..` btw):

```
$i = new RecursiveIteratorIterator(
  new RecursiveDirectoryIterator("www", FilesystemIterator::SKIP_DOTS),
  RecursiveIteratorIterator::LEAVES_ONLY,
  RecursiveIteratorIterator::CATCH_GET_CHILD
);

print_r(iterator_to_array($i)); 
```

It outputs the following:

```
Array
(
    [www/test2/file2] => SplFileInfo Object
        (
            [pathName:SplFileInfo:private] => www/test2/file2
            [fileName:SplFileInfo:private] => file2
        )

    [www/file3] => SplFileInfo Object
        (
            [pathName:SplFileInfo:private] => www/file3
            [fileName:SplFileInfo:private] => file3
        )

) 
```

This works as expected.

**Update**

Added the flags you've had in your original example (although I believe those are default anyway):

```
foreach (new RecursiveIteratorIterator(
  new RecursiveDirectoryIterator("www", FilesystemIterator::SKIP_DOTS | FilesystemIterator::KEY_AS_PATHNAME),
  RecursiveIteratorIterator::LEAVES_ONLY,
  RecursiveIteratorIterator::CATCH_GET_CHILD | RecursiveIteratorIterator::CHILD_FIRST
) as $file => $info) {
        echo $file, "\n";
        print_r($info);
        if ($info->isDir()) {
            echo $file . '<br>';
        }
} 
```

Output:

```
www/test2/file2
SplFileInfo Object
(
    [pathName:SplFileInfo:private] => www/test2/file2
    [fileName:SplFileInfo:private] => file2
)
www/file3
SplFileInfo Object
(
    [pathName:SplFileInfo:private] => www/file3
    [fileName:SplFileInfo:private] => file3
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-27T08:29:44.200

```
<?php
    $path = "D:/Movies";

    $directory_iterator = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::KEY_AS_PATHNAME);

    $files = new RecursiveIteratorIterator($directory_iterator,
            RecursiveIteratorIterator::SELF_FIRST,
            RecursiveIteratorIterator::CATCH_GET_CHILD);

    try {
        foreach( $files as $fullFileName => $file) {
            $path_parts = pathinfo($fullFileName);

            if(is_file($fullFileName)){
                $path_parts = pathinfo($fullFileName);
                $fileName[] =  $path_parts['filename'];
                $extensionName[] =  $path_parts['extension'];
                $dirName[] =  $path_parts['dirname'];
                $baseName[] =  $path_parts['basename'];
                $fullpath[] = $fullFileName;
            }
        }

        foreach ($fullpath as $filles){
                echo $filles;
                echo "</br>";
        }

    }
    catch (UnexpectedValueException $e) {
        printf("Directory [%s] contained a directory we can not recurse into", $directory);
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T07:58:53.790

The [glob](http://php.net/manual/en/function.glob.php) function skips read errors automatically and should simplify your code a bit as well.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T08:03:32.350

If you are getting unhandled exceptions, why don't you put that code in a try block, with an exception catch block to catch errors when it can't read directories? Just a simple suggestion by looking at your code and your problem. There is probably a neater way to do it in PHP.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T10:20:30.500

You need to use `SELF_FIRST` constant if you want to return the unreadable directory name. When you're doing `CHILD_FIRST`, it attempt to get into the directory, fails, and the current directory name is not included.

```
$path = 'testing';

$directory_iterator = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::KEY_AS_PATHNAME);

$iterator = new RecursiveIteratorIterator($directory_iterator,
    RecursiveIteratorIterator::SELF_FIRST,
    RecursiveIteratorIterator::CATCH_GET_CHILD);

foreach ($iterator as $file => $info) {
    if ($info->isDir()) {
        echo $file . "\n";
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-21T17:25:06.647

What about try catch the UnexpectedValueException. Maybe there is even an unique exception code for that error you can check. Otherwise you can evil parse exception message for "permission denied".

I would suggest to examine the [http://php.net/manual/de/class.unexpectedvalueexception.php](http://php.net/manual/de/class.unexpectedvalueexception.php)

# javascript - 多组“下一页”

> ID：14410900
> 
> 赞同：0
> 
> 时间：2013-01-19T03:47:15.997
> 
> 标签：javascript, html, button, gallery

首先，对于大多数人来说，我是网络编码的新手，或多或少只是在空闲时间自学......所以如果我没有什么意义，我深表歉意。

我基本上有一个简单的 javascript，它允许我有一个上一个和下一个按钮来移动多个图像。然而，我想拥有多个这样的“画廊”，但在我的情况下，它们是相互影响的。我试图包含每个部分（图库、小文本框和两个按钮），但我没有运气。

如果您点击下面的链接，您可以看到我的问题...根据您的屏幕大小，您可能只会看到一个画廊，但您可以看到每组按钮都会影响每个画廊。这也出于某种原因添加了“空白" 图像添加到图像库列表中。

[http://robinwkurtz.com/slider/issue.html](http://robinwkurtz.com/slider/issue.html)

先谢谢了！

这是我的源代码

```
<div class="section black" id="top_ten">       
<div id="title"><h1>TOP TEN</h1></div>          
<div id="image">
    <div class="container">
        <ol>
            <li><img src="images/project5_1.jpg"></li>
            <li><img src="images/project5_2.jpg"></li>
            <li><img src="images/project5_3.jpg"></li>
        </ol>
      <div id="contentfooter">
        <div id="footer">A publication and poster, which teaches guide lines to technical constraints. With any design job there comes rules and guidelines to follow in order to put out a proper project.</div>
            <span class="button prevButton">&#8211;</span>
            <span  class="button nextButton">+</span>
 </div>
 </div>
 </div>
 </div> 
```

这是我的js

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script>
$(window).load(function(){
    var pages = $('.container ol li'), current=0;
    var currentPage,nextPage;

    $('.button').click(function(){
        currentPage= pages.eq(current);
        if($(this).hasClass('prevButton'))
        {

            if (current <= 0)
                current=pages.length-1;
            else
                current=current-1;
        }
        else
        {
            if (current >= pages.length-1)
                current=0;
            else
                current=current+1;
        }
        nextPage = pages.eq(current);   
        currentPage.hide(); 
        nextPage.show();        
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:06:42.817

您有多个具有相同 ID 的元素`#container`。只有一个元素可以有一个 ID。如果您想将其提供给多个元素，请使其成为一个类。

现在，当您选择 时`pages`，您将选择所有这些。

```
var pages = $('#container ol li') 
```

这将选择 #container 内部的每个 li 和 ol （这将是每个容器，但它是一个 ID，所以这也会给你带来问题）。

您知道您单击了哪个按钮，`$(this)`因此您可以使用[`.parent()`](http://api.jquery.com/parent/)向上 DOM 并找到包含该按钮和页面集的容器，然后只选择它。

# jquery - jquery文件上传，选择文件对话框，点击捕获取消按钮

> ID：14410902
> 
> 赞同：1
> 
> 时间：2013-01-19T03:47:27.443
> 
> 标签：jquery, file, file-upload, upload

当`click`触发选择文件的事件时

```
$("input[type='file']").trigger("click") 
```

选择文件对话框打开。

我需要的是在单击此选择文件对话框的取消按钮时触发事件。

# android - 权限：INJECT_EVENTS 用于仪表到其他应用程序

> ID：14410903
> 
> 赞同：6
> 
> 时间：2013-01-19T03:47:29.210
> 
> 标签：android, permissions, code-injection, keyevent

我知道这不是关于此权限的第一个线程，但是其他的还没有完成或不帮助我。

我需要的是使用 Instrumentation 为 KeyEvents 充气。这很好用，而且比 shell（“input keyevent”）方法快得多。但如果我想注入其他应用程序，我会捕获一个 SecurityException。这并没有让我感到惊讶，所以我添加`<uses-permission android:name="android.permission.INJECT_EVENTS" />`到我的清单中。Eclipse 停止调试，告诉我只有系统应用程序才能使用此权限。所以我使用签名的 apk 工具编译并将该 apk 推送到 /system/app。重新启动，你猜怎么着

```
W/PackageManager( 3499): Not granting permission android.permission.INJECT_EVENTS to package com.<....> (protectionLevel=2 flags=0x8be45) 
```

该应用程序仅针对一种特殊设备。所以我知道所有的规格，它是植根的。但是 `su`注入命令需要很长时间并且需要超级用户。我很想用 Instrumentation 来做到这一点，或者我应该尝试其他什么？

固件不是我写的，所以我没有平台密钥。

谢谢你的帮助！

编辑：获得平台密钥（开发人员使用普通的谷歌密钥），签名并对齐，然后将 apk 推送到 /system/app. 也添加`android:sharedUserId="android.uid.system"`到我的清单中。在启动时不再有 logcat 消息。但是，当我想发送 keysync 时，我仍然会收到`SecurityException`. 有任何想法吗？

EDIT2：这是摘录自`ps`. 似乎该软件包未列为系统

```
u0_a108   5241  2399  492044 48968 ffffffff 40113ab0 S com.mypackage 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:43:36.427

# 更新

使用位于[此处](https://drive.google.com/file/d/0BzOF0XGjhOopLTd6NzFsaHhWVlk/edit?usp=sharing)的signtool ，然后继续[阅读我的博客。](http://allmydroids.blogspot.de/2014/04/android-system-platform-signed.html)

* * *

好的，我得到了正确的平台键，它现在就像一个魅力！我使用[http://forum.xda-developers.com/showthread.php?t=1125626](http://forum.xda-developers.com/showthread.php?t=1125626)签名 并替换（将符号重命名为 testkey....）signare 文件夹中的 testkeys

```
signapk-key.platform.x509.pem
signapk-key.platform.pk8 
```

（谷歌为他们）

还要确保 zipalign，然后复制到 /system/app。**无法**以正常方式安装 .apk，因为它被标记为系统应用程序。

# scala - 有没有办法避免在 Scala 中转换数字类型？我应该使用数字还是积分？

> ID：14410905
> 
> 赞同：1
> 
> 时间：2013-01-19T03:48:00.233
> 
> 标签：scala, types, casting

我不想介意数字的类型。所有数字都可以被视为 Double，但我想知道将数字用作数字的更好的 scalaish 方式。

**这只是一个例子**，假设我有以下内容：

```
val n = 5
val l = List(1,2,3,4,5) grouped (n / 2d).ceil.toInt 
```

有没有办法做到（**确切地说**）：

```
val l = List(1,2,3,4,5) grouped (n / 2).ceil 
```

由于“分组”参数的类型不匹配而没有编译错误？

编辑

在另一个示例`n / 2`中`grouped (n / 2).ceil`，部分可能是函数的非整数结果`f`：

```
grouped f.ceil 
```

它仍然需要类型**转换**，或者在所有情况下都有一个技巧或设计模式来避免它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T04:05:53.990

```
val l = List(1,2,3,4,5) grouped((n + 1) / 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:46:28.060

您可以查看数字库[Spire](https://github.com/non/spire)，我相信它具有您正在寻找的东西，即能够将数字视为数字，无论它们是 int/double/float/etc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:18:15.087

有*办法*做到这一点。您可以像这样定义隐式转换：

```
implicit def double2Int(d: Double): Int = d.toInt 
```

一旦在范围内，它将`Double`自动转换为`Int`. 但是，不建议这样做，因为您会失去类型安全性。

# android - 在 Android 中通过 GPS / 电话网络以外的方式查找位置？

> ID：14410906
> 
> 赞同：-1
> 
> 时间：2013-01-19T03:48:08.523
> 
> 标签：android, geolocation

我正在开发一个需要不断获取位置数据或尽可能不断地获取位置数据的 android 应用程序。我知道如果用户不在 wifi 上，这会耗尽电池并使用大量数据。

有没有其他方法可以将某种你在这里的消息传输到不会使用数据或使用 GPS 不断消耗电池电量的手机。我对手机的了解足以认为这是一个愚蠢的问题，但我也知道我知道的不多。

那么，是否有任何非常熟悉 Android 的人知道*是否有任何方法可以在不使用 GPS 或您的数据连接的情况下将位置数据或任何数据发送到手机？*

背景：我正在开发一个应用程序，当用户在某个位置的某个半径范围内（例如历史遗址、商场或剧院）时，它会通知用户有趣的事情，我真的不想经常询问 GPS 或电话网络在哪里他们是，但我不知道任何其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:53:38.113

**获取适用于 Android 的位置策略：**

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:54:27.503

没有其他办法。您必须使用 GPS 或数据。

# joomla - Joomla 错误上传手工编码的模板

> ID：14410909
> 
> 赞同：0
> 
> 时间：2013-01-19T03:48:51.087
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla-template

我正在尝试将我的手工编码模板上传到 Joomla 2.5。

我已将其移至在线模板文件夹。现在我正在尝试从 Extension Manager > Install 安装它（我在安装按钮的文本框中看到它的路径）。但是单击按钮后，我收到此错误：

> -1 - 发生错误。
> 
> 复制失败

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<extension version="2.5" type="template">
    <name>Travels</name>
    <description>
        Template for Target Travels
    </description>
    <files>
        <filename>index.php</filename>
        <filename>catergory.php</filename>
        <filename>templateDetails.xml</filename>
        <filename>css/template.css</filename>  
        <filename>css/mystyle.css</filename>  
        <filename>css/common.css</filename>  
        <filename>css/crasel.css</filename>  
        <filename>css/jquery.jcarousel.css</filename>  
        <filename>css/skin.css</filename>
        <folder>css</folder>  
        <folder>images</folder>
    </files>
    <positions>  
        <position>breadcrumb</position>  
        <position>welcome</position>  
        <position>tour_catergory</position>  
        <position>left</position>  
        <position>right</position>  
        <position>top</position>  
        <position>user1</position>  
        <position>user4</position>  
        <position>footer</position>  
    </positions>
</extension> 
```

关于原因以及如何解决的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:19:57.280

这通常是由于文件夹的权限问题。在 Joomla 后端转到：

**站点**（顶部菜单）>>**系统信息**>>**目录权限**并确保“*模板*”文件夹是可写的。当您使用它时，请确保列表中的所有文件夹和文件都是可写的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:32:02.147

如果您的模板已经到位，您应该使用发现安装而不是从目录安装。如果文件已经在它们需要的位置，则无需复制文件。

# jquery - 音轨端的 Soundcloud 自定义播放器事件

> ID：14410912
> 
> 赞同：2
> 
> 时间：2013-01-19T03:49:09.333
> 
> 标签：jquery, html, soundcloud

我从这里获得的自定义 soundcloud HTML 5 soundcloud 播放器一直存在问题：[https ://github.com/soundcloud/soundcloud-custom-player](https://github.com/soundcloud/soundcloud-custom-player)

我要做的是将soundcloud播放器作为全屏幻灯片中的单独曲目加载。在每首曲目结束时，我希望触发一个事件，点击导航按钮，然后启动下一个播放器（由于滑块的设置方式，它不会自动读取“下一首曲目”，而是应该能够找到下一个单独的“播放”按钮并单击它）

我得到了一些临时的想法来工作

```
$(document).bind('onPlayerPause.scPlayer', function(event){
$('.next').click();
}); 
```

真的很基本，它确实可以按其编写方式单击功能。但是，由于该事件在播放器暂停时触发，所以当我单击“播放”按钮暂停时，它也会单击“.next”。

总结一下：

找到查看轨道何时结束的事件处理程序，而不是何时暂停并成功地将其实现到代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:02:37.183

我在 soundclousd-custom-player 文档中找到了这个：

> `onMediaTimeUpdate.scPlayer`
> 
> 在播放器播放时不断触发，可用于在播放器节点之外显示轨道进度

```
$(document).bind('onMediaTimeUpdate.scPlayer', function(event){
    console.log(event.target, 'the track is at ' + event.position + ' out of ' + 
    event.duration + ' which is ' + event.relative + ' of the total'); 
}); 
```

`event.relative`您必须在等于 100% 或`event.positon`等于时触发您的事件`event.duration`。

# ruby - 解码字符串

> ID：14410914
> 
> 赞同：-4
> 
> 时间：2013-01-19T03:49:30.520
> 
> 标签：ruby, base64

我发现我的网络服务器上的许多文件都包含这些输入：

```
K3SQCI5YoWjgHwLacjuuWrKs7yE=
yEw5FOQQ1LFUa3aBbKQJLqXTVGo= 
```

我需要弄清楚加密类型或这些输入是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:53:28.330

它看起来像一个 base64 编码的字符串，而不是一个加密的字符串。见[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

# ios - 如何获取应用商店中显示的点赞数

> ID：14410919
> 
> 赞同：0
> 
> 时间：2013-01-19T03:50:22.113
> 
> 标签：ios, facebook, ios6

我想知道是否存在一种方法来获取 App Store 或 Game Center 中显示的点赞数。通过这种方式，我可以检查用户是否真的喜欢我在 Facebook 上的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:11:11.180

使用 http-get 您可以查看应用程序的 iTunes 页面。例如愤怒的小鸟里约：[https ://itunes.apple.com/us/app/angry-birds-rio/id420635506?mt=8&ign-mpt=uo%3D2](https://itunes.apple.com/us/app/angry-birds-rio/id420635506?mt=8&ign-mpt=uo%3D2)

然后，如果您想知道总评分，请查看此处并尝试将字符串拆分为相关部分：

```
<div class='extra-list customer-ratings'>
<h4>Customer Ratings</h4>
<div>Current Version:</div>
<div class='rating' role='img' tabindex='-1' aria-label='4 and a half stars, 3113 Ratings'><div><span class="rating-star">&nbsp;</span><span class="rating-star">&nbsp;</span>    <span class="rating-star">&nbsp;</span><span class="rating-star">&nbsp;</span><span class="rating-star half">&nbsp;</span></div><span class="rating-count">3113 Ratings</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:00:19.367

您应该使用 iTunes 查找 API 以 JSON 格式的结果取回所需的信息：http:
[//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api。 html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

您应该为 Angry Birds Rio 使用的链接如下所示：http:
[//itunes.apple.com/lookup ?id=420635506](http://itunes.apple.com/lookup?id=420635506)

```
{
    "resultCount":1,
    "results":[
        {
             "artistId":298910979,
             "artistName":"Rovio Entertainment Ltd",
             ...
             "averageUserRating":4.5,
             "averageUserRatingForCurrentVersion":4.5,
             ... 
```

# xcode - iPhone SDK：追加 NSString 和计数数据

> ID：14410924
> 
> 赞同：0
> 
> 时间：2013-01-19T03:51:26.477
> 
> 标签：xcode, arrays, loops, nsstring

我正在访问的 Web 服务返回以下值：

```
A1;A2;A3;A4;A5;B2;B10;B11;B12; 
```

我想获得以 . 分隔的所有返回数据的总数`;`。我怎样才能做到这一点？我正在考虑在字符串中做一个循环，获取之前的值，`;`但对如何正确运行循环感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T05:46:47.680

有许多字符串函数，您可以使用其中之一，即**componentsSeparatedByString**。

考虑到上面提到的返回值是一个 NSString。

```
NSString *strResponse = @"A1;A2;A3;A4;A5;B2;B10;B11;B12;";
NSArray *arCount = [strResponse componentsSeparatedByString:@";"];
NSLog(@"响应的对象总数为：%d", [arCount count]);

```

# hyperlink - 如何获取 Youtube 实际 http 源地址

> ID：14410933
> 
> 赞同：1
> 
> 时间：2013-01-19T03:52:54.637
> 
> 标签：hyperlink

我是一名开发OTT box使用Youtube XML接口的工程师，我遇到一个问题，XML中的http源不是真实的，我只能使用工具将其转换为实际的flv源。

我想知道是否有任何理论或源代码来获取实际的 flv 源地址，而不是工具。

非常感谢！

# sencha-touch - 在 Sencha Touch 中禁用轮播过度滚动/过度拖动

> ID：14410934
> 
> 赞同：3
> 
> 时间：2013-01-19T03:52:57.010
> 
> 标签：sencha-touch, sencha-touch-2, carousel

在 Sencha Touch 2 轮播的结尾或开头，用户可以将项目拖动到它应该能够到达的位置并显示白色背景（此处的屏幕截图：http: [//i.imgur.com/MkX0sam.png](http://i.imgur.com/MkX0sam.png)）。我正在尝试禁用此功能，因此用户**无法**拖过轮播的结尾/开头。

我尝试使用各种`scrollable`配置来执行此操作，包括通常建议用于处理过度滚动的设置

```
scrollable : {
  direction: 'horizontal',
  directionLock: true,
  momentumEasing:  {
     momentum: {
       acceleration: 30,
       friction: 0.5
     },
     bounce: {
        acceleration: 0.0001,
        springTension: 0.9999,
     },
     minVelocity: 5
  },
  outOfBoundRestrictFactor: 0   
  } 
```

上面的配置，尤其是`outOfBoundRestrictFactor`确实停止了拖过末端的能力，但它也停止了在轮播中拖动其他任何地方的能力......所以这不起作用。我已经搞砸了所有其他配置，但没有产生积极影响。

不幸的是，我找不到太多关于修改拖动配置的信息。这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T20:31:19.500

您需要做的是覆盖`onDrag`Carousel 中的功能。这是逻辑检测用户拖动的方向的地方，您可以在其中检查它是第一个还是最后一个项目。

这是一个完全符合您要求的课程。您感兴趣的代码就在函数的底部。其余的只是从`Ext.carousel.Carousel`.

```
Ext.define('Ext.carousel.Custom', {
    extend: 'Ext.carousel.Carousel',

    onDrag: function(e) {
        if (!this.isDragging) {
            return;
        }

        var startOffset = this.dragStartOffset,
            direction = this.getDirection(),
            delta = direction === 'horizontal' ? e.deltaX : e.deltaY,
            lastOffset = this.offset,
            flickStartTime = this.flickStartTime,
            dragDirection = this.dragDirection,
            now = Ext.Date.now(),
            currentActiveIndex = this.getActiveIndex(),
            maxIndex = this.getMaxItemIndex(),
            lastDragDirection = dragDirection,
            offset;

        if ((currentActiveIndex === 0 && delta > 0) || (currentActiveIndex === maxIndex && delta < 0)) {
            delta *= 0.5;
        }

        offset = startOffset + delta;

        if (offset > lastOffset) {
            dragDirection = 1;
        }
        else if (offset < lastOffset) {
            dragDirection = -1;
        }

        if (dragDirection !== lastDragDirection || (now - flickStartTime) > 300) {
            this.flickStartOffset = lastOffset;
            this.flickStartTime = now;
        }

        this.dragDirection = dragDirection;

        // now that we have the dragDirection, we should use that to check if there
        // is an item to drag to
        if ((dragDirection == 1 && currentActiveIndex == 0) || (dragDirection == -1 && currentActiveIndex == maxIndex)) {
            return;
        }

        this.setOffset(offset);
    }
}); 
```

# javascript - 上传到亚马逊 S3

> ID：14410938
> 
> 赞同：3
> 
> 时间：2013-01-19T03:53:29.270
> 
> 标签：javascript, ruby-on-rails, amazon-s3

我正在尝试将图片上传到亚马逊 S3。我成功使用了carrierwave。然后我切换到 jQuery 多图像上传。在railscast 383之后。

我的 upload_helper 看起来完全如图所示；除了初始化方法。 [https://github.com/railscasts/383-uploading-to-amazon-s3/blob/master/gallery-jquery-fileupload/app/helpers/upload_helper.rb](https://github.com/railscasts/383-uploading-to-amazon-s3/blob/master/gallery-jquery-fileupload/app/helpers/upload_helper.rb)

以下是用户可以上传照片的页面：

```
 = s3_uploader_form post: items_url, as: "painting[image_url]" do
        = file_field_tag :file, multiple: true

    %script#template-upload{type: "text/x-tmpl"}
        .upload
            {%=o.name%}
            .progress
                .bar{ style: "width: 0%" } 
```

我也有以下js：

```
//= require jquery-fileupload/basic
//= require jquery-fileupload/vendor/tmpl
//= require paintings 
```

如教程中所示

即使我的 S3 上传在carrierwave 和单个文件上传中运行良好，但我得到了

```
failed to upload image error (coming from the last line in paintings.js.coffee). and 
Failed to load resource: the server responded with a status of 400 (Bad Request)

<Error>
    <Code>AccessDenied</Code>
    <Message>Access Denied</Message>
    <RequestId>XYZ</RequestId>
    <HostId>
        XYZ
    </HostId>
</Error> 
```

我的 CORS 配置是：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration>
    <CORSRule>
        <AllowedOrigin>http://localhost:3000</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

非常感谢任何指导

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:25:19.293

找到了！！！

在 upload_helper > S3Uploader > initialze 中为您的“过期：”添加一个时区，如下所示：

```
 expiration: 10.hours.from_now.utc, 
```

那为我创造了魔力

祝你好运

# php - Magento 加入购物车操作

> ID：14410941
> 
> 赞同：-1
> 
> 时间：2013-01-19T03:54:17.437
> 
> 标签：php, magento, shopping-cart

我正在做一个 magento 定制网站，我是 magento 的新手。我的产品有模型类型和模型版本。我想将模型类型和版本传递给购物车页面和结帐页面，所以我决定将这两个字段存储在购物车表中我应该在哪里找到 magento 的购物车插入代码以及如何添加这些购物车表中的两个字段？请任何人帮助！

我已经在 Mage/checkout/controllers/cartcontroller.php 的 addAction() 中尝试了以下代码来发布额外的字段。

```
$postData = Mage::app()->getRequest()->getPost(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:26:49.140

而不是找到magento核心代码，你可以做的是你可以为magento事件编写观察者。就像每当产品添加到购物车或从购物车中删除，或者刚刚登陆结帐页面或者您刚刚下订单......就像这样，对于magento中的每一个动作，都会为此生成一个事件......你只需要在观察者中编写逻辑要做什么......并且您还可以在观察者对象中获取购物车项目和购物车的所有细节......

以下链接可能会有所帮助...

> > [http://www.excellencemagentoblog.com/magento-add-custom-fields-checkout-page](http://www.excellencemagentoblog.com/magento-add-custom-fields-checkout-page)
> > 
> > [http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/](http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/)
> > 
> > 您可以在 google 中搜索“magento 中的事件和观察者”

# android - 无法下载整个 YouTube 链接的 HTML 代码

> ID：14410943
> 
> 赞同：0
> 
> 时间：2013-01-19T03:54:20.323
> 
> 标签：android, youtube, download

我正在编写一个下载 youtube 视频的应用程序，但遇到了一个小问题。

您可能知道，youtube 中的每个视频链接都包含指向该视频的直接链接。当页面使用 flash flayer（而不是 html5 左右）时，它存储在 flash 对象中（在它的 flashvar attr 中）。我的应用程序解析该 Flash 对象并从中提取那些直接链接（每个可用视频质量一个链接）。

我通过下载视频的 html 代码（例如[http://www.youtube.com/watch?v=VIDEOID](http://www.youtube.com/watch?v=VIDEOID)）并解析它来获取 flash 对象的 html 代码。

我使用 asynctask 下载 html 代码（非移动版本），这是我的下载代码：

```
 HttpClient client = new DefaultHttpClient();
      client.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1)");

      HttpGet request = new HttpGet(url);
      HttpResponse response = client.execute(request);

      String html = "";
      InputStream in = response.getEntity().getContent();
      BufferedReader reader = new BufferedReader(new InputStreamReader(in));
      StringBuilder str = new StringBuilder();
      String line = null;
      while((line = reader.readLine()) != null)
      {
          str.append(line);
      }
      in.close();
      html = str.toString();

      return html; 
```

现在我遇到了一个小问题：

上面的代码不会下载 whloe html 代码。下载的 html 字符串在中间某处被剪切，我没有得到 flash 对象部分。此功能适用于其他网站！

难道我做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:20:58.730

退房[`BasicResponseHandler`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/BasicResponseHandler.html)。

```
 String html = client.execute(request, new BasicResponseHandler()); 
```

# php - symfony 的 require_once

> ID：14410946
> 
> 赞同：1
> 
> 时间：2013-01-19T03:54:39.723
> 
> 标签：php, symfony, composer-php

我现在正在使用 php + Symfony2 框架制作东西，并且我有以下代码：

```
require_once("one_file.php");
require_once("another_file.php"); 
```

... 等等。

问题是，如何“Symfonyze”这些不舒服的 require 语句，然后，如何将这些文件包含在 Symfony2 包中？

我们考虑了两种可能性：

1.  将文件包含在`/vendors`symfony 目录中，或者
2.  包括每个类作为服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T14:31:08.800

如果这些类驻留在包中，那么您可以使用如下：假设您的包名称是 AcmeDemoBundle。将此文件放在 Acme/DemoBundle/Model/ 中

```
 //one_file.php
   namespace Acme/DemoBundle/Model;
   class one_file {
   ...........
   } 
```

要在控制器或任何其他文件中使用此文件：

这里是 Acme/DemoBundle/Controller/UserController.php

```
 namespace Acme/DemoBundle/Controller   
   use Acme/DemoBundle/Model/one_file
    class UserController {
    public $one_file=new one_file();
    } 
```

从 php 5.3 开始，引入了命名空间。您可能应该查看名称空间及其在 php 文档中的用途

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:42:32.670

您可以遵循 PSR-0 标准让自动装载机处理此问题。请参阅[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)和[http://getcomposer.org/doc/04-schema.md#psr-0](http://getcomposer.org/doc/04-schema.md#psr-0)。

或者你可以保持你的文件原样，并告诉作曲家每次都需要它们：http: [//getcomposer.org/doc/04-schema.md#files](http://getcomposer.org/doc/04-schema.md#files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:51:50.547

您必须在 acme 文件夹中创建一个文件夹，例如 lib 将这些文件放在 lib 文件夹中，然后使用此语句

```
use Acme\DemoBundle\lib\Abc; // its your class name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-12T17:09:29.920

您想遵循这些其他答案，尤其是批准的答案，但如果您使用的是包含大量 PHP 文件的第三方库，则可以`require_once(__DIR__.'/path/to/file.php')`快速修复。

# ftp - 通过 ftp 将我的本地主机与我的服务器同步

> ID：14410949
> 
> 赞同：2
> 
> 时间：2013-01-19T03:55:34.433
> 
> 标签：ftp, localhost, sync, remote-server

我想实时自动地将我的本地主机（Windows）与我的远程服务器同步。因此，当我修改、创建或删除文件时，此工具应自动更新远程服务器。此应用程序必须保持两台服务器实时同步。请我真的需要你的帮助。我试过 FTPbox，但它并不总是更新，我需要更好的。我在 Windows 上工作，但如果在 linux 上存在一些更好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-22T20:41:41.613

[WinScp](https://winscp.net)有一个[同步功能](https://winscp.net/eng/docs/task_synchronize_full)，可以满足您的需求。

linux 用户可以看[这里](https://stackoverflow.com/a/56717832/1619521)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:31:39.410

如果您不需要同步太多信息，请尝试使用[Dropbox](https://www.dropbox.com/)或[Google Drive 。](https://www.google.com/intl/en_US/drive/start/index.html?authuser=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T09:35:29.993

我假设您要同步数据库和文件。这是我的出路，我希望它对某人有所帮助。

第一个代码是本地的，另一个是远程的。

```
//make sure you are connected to your local database

<?php

//function to check internet connection.

function is_connected() {
  if($connected = fsockopen("www.example.com", 80)){
  // website, port  (try 80 or 443)
  if ($connected){
    $is_conn = true; //action when connected
    fclose($connected);
  }

return $is_conn;

} else {
    $is_conn = false; //action in connection failure
  }
}

//if connected to internet, do the following...
if(is_connected()== true){

  echo "connected"; 

  ini_set('max_execution_time', 3000);//increase this incase of slow internet

$table_name = TableName::find_all();
//whatever way you find an array
//of all your entries on this particular 
//table that you want to sync with the remote table.

$file = 'to_upload_local.php'; //a local file to put table contents into
$current = serialize($table_name);//serialize the table contents (google).
file_put_contents($file, $current);//put the serialized contents to the file.

$remote_file = 'public_html/to_upload_remote.php';//this is the file that is on the remote server that you want to overwrite with the local file to upload. 

$ftp_server = "ftp.yourwebsite.org";// your ftp address

// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, "yourFTPUsername", "yourFTPPassword");

// turn passive mode on
ftp_pasv($conn_id, true);

// upload a file
if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)){
    echo "Upload Successful";
} else {

}

// close the connection
ftp_close($conn_id);

//this script called below is to update your remote database. Its in the next example

$call_script = file_get_contents('http://path_to_your_script');
} else { 
 //if not connected to internet,....
echo "offline";
}
?> 
```

应该完成这项工作的在线脚本（您在前面代码的最后一行中调用的那个）应该如下所示：

```
//make sure you're connected to remote database
<?php 

//this function should compare num_rows of your two 
//databases values (local  remote) and return the 
//difference. It's used with array_udiff function.
function compare_objects($obj_a, $obj_b) {
  return $obj_a->id - $obj_b->id;
}
//this function should compare contents of your two 
//databases values (local  remote) and return the 
//difference. It's used with array_udiff function.
function comparison($obj_a, $obj_b){
   if ($obj_a==$obj_b){
     return 0;
   }else{
    return -1;
   }
 }

$file = '../to_upload_remote.php';//the uploaded file
$current = file_get_contents($file);//load the file
$array = unserialize($current);//unserialize to get the object array
$remote_table_name = remote_table_name::find_all();//get what you have in 
//remote database

//if a new value is added, create a new entry to database with new vals
if($try_new = array_udiff($array, $remote_table_name, 'compare_objects')){
  foreach($try_new as $entry){
  $remote_table_name = new remote_table_name();
  $remote_table_name->value = $entry->value;
  //depending on the number of your columns,
  //add values to remote table that were not there before.
  //you can use any other suitable method to do this.
      if($remote_table_name->save()){
          echo "the remote_table_name was saved successfully";
      }
  }
} else {
  echo "same number of rows";
}

//if some values are changed, update them with new vals
if($try_change = array_udiff($array, $remote_table_name, 'comparison')){
  foreach($try_change as $entry){
  $remote_table_name = remote_table_name::find_by_id($entry->id);
  $remote_table_name->value = $entry->value;
    //depending on the number of your columns,
    //update values to remote table.
    //you can use any other suitable method to do this.
    if($remote_table_name->save()){
        echo "the remote_table_name was saved successfully";
    }
  }
} else {
  echo "All values match";
}

?> 
```

因此，任何时候执行第一个代码，它都会读取本地表，获取所有值并将它们放入本地文件，上传本地文件并替换远程文件夹中的一个，调用远程脚本来检查未序列化的本地表并将其与在线表格进行比较，然后进行必要的操作。

# python - 如何使用python登录Nike+网站？

> ID：14410950
> 
> 赞同：0
> 
> 时间：2013-01-19T03:56:12.950
> 
> 标签：python, web

这是链接： http: [//nikeplus.nike.com/plus/](http://nikeplus.nike.com/plus/) 电子邮件/密码选项仅在我单击“登录”按钮时显示。那么如何使用python登录这个网站呢？

我尝试了斜纹并在页面上获得了表格，但它只包含搜索栏。所以不知道如何进行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T15:04:12.977

虽然不是 python 解决方案，但我编写了一个 PHP 类，实际上可以让您从 Nike+ 网站获取数据：[https ://nikeplusphp.charanj.it](https://nikeplusphp.charanj.it)

该类通过伪造网站上的登录名来工作，然后向提要发出请求。如果您查看代码，您会发现发出必要的 GET 请求的所有 URL，并且有一个方法被调用`_login()`，这应该让您了解发布了哪些参数。

# f# - 将 F# 管道运算符（<|、>>、<<）转换为 OCaml

> ID：14410953
> 
> 赞同：10
> 
> 时间：2013-01-19T03:56:31.760
> 
> 标签：f#, ocaml, inline

我正在将一些 F# 代码转换为 OCaml，并且我看到了这个管道运算符的很多用途`<|`，例如：

```
let printPeg expr =
    printfn "%s" <| pegToString expr 
```

`<|`运算符显然被定义为：

```
# let ( <| ) a b = a b ;;
val ( <| ) : ('a -> 'b) -> 'a -> 'b = <fun> 
```

我想知道为什么他们费心在 F# 中定义和使用这个运算符，是不是为了避免像这样放入括号？：

```
let printPeg expr =
    Printf.printf "%s" ( pegToString expr ) 
```

据我所知，这就是将上面的 F# 代码转换为 OCaml，对吗？

另外，我将如何在 Ocaml 中实现 F#`<<`和运算符？`>>`

（`|>`运营商似乎只是`let ( |> ) a b = b a ;;`：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-19T06:03:33.897

> 为什么他们费心在 F# 中定义和使用这个运算符，只是为了避免放入括号？

这是因为编程的函数式方式假设通过一系列函数来线程化一个值。比较：

```
let f1 str server =
    str
    |> parseUserName
    |> getUserByName server
    |> validateLogin <| DateTime.Now

let f2 str server =
    validateLogin(getUserByName(server, (parseUserName str)), DateTime.Now) 
```

在第一个片段中，我们清楚地看到了值发生的所有事情。阅读第二个，我们必须通过所有的括号来弄清楚发生了什么。

[这篇](http://blogs.msdn.com/b/chrsmith/archive/2008/06/14/function-composition.aspx)关于函数组合的文章似乎是相关的。

所以，是的，在日常生活中，主要是关于父母。而且，管道运算符与部分函数应用和无点编码风格密切相关。例如，参见[Programming is "Pointless"](http://blogs.msdn.com/b/ashleyf/archive/2011/04/21/programming-is-pointless.aspx)。

管道`|>`和函数组合`>>` `<<`运算符在传递给更高级别的函数时会产生另一个有趣的效果，比如[这里](https://stackoverflow.com/questions/11378402/partial-function-application-for-a-non-symmetric-operator-using-point-free-style)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-19T04:15:30.787

直接来自[F# 源](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fs)：

```
let inline (|>) x f = f x
let inline (||>) (x1,x2) f = f x1 x2
let inline (|||>) (x1,x2,x3) f = f x1 x2 x3
let inline (<|) f x = f x
let inline (<||) f (x1,x2) = f x1 x2
let inline (<|||) f (x1,x2,x3) = f x1 x2 x3
let inline (>>) f g x = g(f x)
let inline (<<) f g x = f(g x) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-19T12:21:47.280

OCaml Batteries 支持这些运算符，但出于优先级、关联性和其他语法怪癖（如 Camlp4）的原因，它使用不同的符号。最近刚刚确定了使用哪些特定符号，有一些变化。请参阅：[电池 API](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatPervasives.html)：

```
val (|>) : 'a -> ('a -> 'b) -> 'b 
```

功能应用。x |> f 等价于 f x。

```
val ( **> ) : ('a -> 'b) -> 'a -> 'b 
```

功能应用。f **> x 等价于 f x。注意这个操作员的名字不是一成不变的。它很快就会改变。

```
val (|-) : ('a -> 'b) -> ('b -> 'c) -> 'a -> 'c 
```

功能组成。f |- g 很有趣 x -> g (fx)。这也相当于应用 <** 两次。

```
val (-|) : ('a -> 'b) -> ('c -> 'a) -> 'c -> 'b 
```

功能组成。f -| g 很有趣 x -> f (gx)。在数学上，这是算子 o。

但[电池后备箱](https://github.com/ocaml-batteries-team/batteries-included/blob/master/src/batPervasives.mliv)提供：

```
val ( @@ ) : ('a -> 'b) -> 'a -> 'b 
```

功能应用。[f @@ x] 等价于 [fx]。

```
val ( % ) : ('a -> 'b) -> ('c -> 'a) -> 'c -> 'b 
```

函数组成：数学[o]运算符。

```
val ( |> ) : 'a -> ('a -> 'b) -> 'b 
```

“管道”：功能应用。[x |> f] 等价于 [fx]。

```
val ( %> ) : ('a -> 'b) -> ('b -> 'c) -> 'a -> 'c 
```

管道功能组成。[f %> g] 是 [fun x -> g (fx)]。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-20T12:06:08.430

> 我想知道他们为什么要费心在 F# 中定义和使用这个运算符，只是为了避免像这样放入括号吗？

很好的问题。您所指的特定运算符 ( `<|`) 是非常无用的 IME。它可以让您在极少数情况下避免使用括号，但更一般地说，它通过拖入更多运算符使语法复杂化，并使经验不足的 F# 程序员（现在有很多）更难理解您的代码。所以我已经停止使用它了。

该`|>`运算符更有用，但只是因为它有助于 F# 在 OCaml 不会出现问题的情况下正确推断类型。例如，这里有一些 OCaml：

```
List.map (fun o -> o#foo) os 
```

在 F# 中直接等效失败，因为在`o`读取其属性之前无法推断出的类型，`foo`因此惯用的解决方案是使用这样的代码重写代码，`|>`以便 F# 可以推断出使用了`o`之前的类型`foo`：

```
os |> List.map (fun o -> o.foo) 
```

我很少使用其他运算符 ( `<<`and `>>`)，因为它们也使语法复杂化。我也不喜欢引入大量运算符的解析器组合库。

Bytebuster 给出的例子很有趣：

```
let f1 str server =
  str
  |> parseUserName
  |> getUserByName server
  |> validateLogin <| DateTime.Now 
```

我会这样写：

```
let f2 str server =
  let userName = parseUserName str
  let user = getUserByName server userName
  validateLogin user DateTime.Now 
```

我的代码中没有括号。我的临时对象有名称，因此它们出现在调试器中，我可以检查它们，当我将鼠标悬停在它们上面时，Intellisense 可以给我类型回溯。这些特性对于非专业 F# 程序员将要维护的生产代码很有价值。

# ios - Objective-C 在IOS中设置变量

> ID：14410955
> 
> 赞同：0
> 
> 时间：2013-01-19T03:57:11.667
> 
> 标签：ios, objective-c

人们为什么写：

```
UIView *view = [[UIView alloc] init];
object.somePreperty = view; 
```

代替

```
object.someProperty = [[UIView alloc] init]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T04:11:02.803

ARC 之前世界中分配源的一些使用需要完整的内存管理。也就是说，过去的代码通常看起来像这样：

```
UIView *view = [[UIView alloc] init];
object.property = view;
[view release]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T04:12:51.163

我可以想到两个原因：

*   为了调试，我们可以`view`在将其分配给属性之前检查实例。
*   `view`可能需要更多的初始化，而不仅仅是`init`，例如 setFrame。

就个人而言，我总是首先为花哨的对象分配局部变量。如果只是小数组或字典，我直接赋值。

# javascript - Node.js 错误抛出被称为不好的做法，但对 TDD 至关重要

> ID：14410959
> 
> 赞同：3
> 
> 时间：2013-01-19T03:58:09.140
> 
> 标签：javascript, node.js, unit-testing, coding-style, tdd

我听很多人说在 Node 中抛出错误是不好的做法，你应该通过 CommonJS 的回调语法手动处理它们：

```
somethingThatPassesAnError( function(err, value) {
    if (err) console.log("ERROR: " + err);
}); 
```

然而，我在多个单元测试框架（Mocha、Should.js、Gently）中发现，它们似乎*希望*你`throw`在发生某些事情时出错。我的意思是，当然，您可以设计测试来检查变量的相等性并检查错误变量中的非空值，但用 Ryan Dahl 自己的话来说，“您应该编写框架以使正确的事情易于执行并且错事难做”。

那么给了什么？谁能解释为什么存在这种做法？`require()`如果找不到模块，我应该开始抛出致命异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T04:09:03.873

这是因为 nodejs 程序通常大量使用异步，因此在您的 try/catch 成功完成后经常会抛出错误。考虑这个人为的例子。

```
function foo(callback) {
  process.nextTick(function() {
    if (something) throw "error";
    callback("data");
  });
}

try {
  foo(function(data) {
    dosomething(data);
  });
} catch (e) {
  // "error" will not be caught here, as this code will have been executed
  // before the callback returns.
} 
```

回调中的第一个参数是错误的典型节点模式避免了这个问题，提供了从异步代码返回错误的一致方式。

```
function foo(callback) {
  process.nextTick(function() {
    if (something) return callback("error");
    callback("data");
  });
}

foo(function(error, data) {
  if (error) return handleError(error);
  dosomething(data);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T04:05:23.813

据我了解，反对在 JavaScript 中抛出异常的情况是由于大量使用了异步模式。当另一个堆栈发生错误时，您无法捕获它。在这些情况下，使用`err`参数作为回调的第一个参数。

我不认为这与说“永远不要扔任何东西”是一样的。如果我有同步代码，并且发生异常，我会抛出它。有不同的意见，但如果根本不涉及回调，我认为没有理由不使用`throw`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-03T20:09:01.007

对于这一点，我倾向于遵循[Joyent 在 Node.js 中的错误处理](https://www.joyent.com/node-js/production/design/errors)的指导。过于简单的要点是实际上有两种类型的错误（操作错误和程序员错误），以及三种传递错误的方式（在事件发射器上发出错误事件，返回带有错误参数的回调非空，以及抛出错误）。

操作错误是您期望可能发生并且能够处理的错误，即。不一定是错误。程序员错误是代码本身的错误。如果您正在编写代码并且预计会出现错误，那么任何传递错误的模式都是有价值的。例如：

*   如果错误发生在接受回调的异步函数内部，则使用惯用的 return callback(new Error('Yadda yadda yadda')) 是正确的解决方案（如果您无法处理函数中的错误）。
*   如果错误发生在同步函数内部并且是一个破坏性问题（即，如果没有尝试过的操作，程序就无法继续），那么由于未捕获的抛出错误而爆炸是可以接受的。
*   如果错误发生在同步函数中但可以处理，则该错误应该处理，否则应该抛出，也许父函数可以处理，也许不能。

就我个人而言，我倾向于只抛出我认为致命的错误，因此我的代码大多没有 try/catch 块（我什至将 JSON.parse 包装在一个如此定义的函数中：function jsonParseAsync(json, cb) { var out, err;尝试 { out = JSON.parse(json) } catch(e) { err = e }; return cb(err, out); } )。我还尽量避免使用 Promise，因为它们将 Promise 拒绝和抛出的错误混为一谈（尽管随着 Promise 变得越来越普遍，这变得越来越难）。相反，我倾向于将同步函数视为数学证明，因为如果它们是正确的，它们必须始终是正确的（因此同步函数中的错误应该会破坏整个程序，否则证明可能是错误的但仍然可用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T04:05:59.887

我建议使用异常来处理严重错误，就像 require() 的工作方式一样。如果此功能导致 Node.js 行为不端，那么这是一个错误，我相信它会及时修复。

# crystal-reports - 水晶中的 Sumifs

> ID：14410969
> 
> 赞同：1
> 
> 时间：2013-01-19T04:02:48.923
> 
> 标签：crystal-reports

我正在研究一个基本上看起来像这样的数据库（以最简单的形式）：

{阶段} {代码} {数量}

例子：

{Phase}="R" 和 {Code}="Nat" = 0 的 {Qty}

{Phase}="F" 和 {Code}="Nat" = 5 的 {Qty}

{Phase}="R" 和 {Code}="Int" = 10 的 {Qty}

{Phase}="F" 和 {Code}="Int" = 15 的 {Qty}

我试图得到一个结果来显示阶段“R”和代码“Nat”（其中 R <> 0）的数量，否则给我阶段“F”的数量。所以对于上面的例子，我会得到 Nat 的答案 = 5（因为 R 阶段的数量为 0）和代码为 Int 的 10 的答案（因为 R 阶段的数量 <> 0）

我使用了三个公式字段来执行此操作：

1：如果 ({PHASE}="F" 和 {CODE}="NAT") 则 {QTY} 否则 0

2: if ({PHASE}="R" and {Code}="NAT") 然后 {QTY} else 0

3：如果 {2} = 0 则 {1} 否则 {2}

公式字段 1 和 2 得出正确的金额。但是，公式字段 {3} 返回两个阶段。例如，代码“Int”阶段“R”显示为 qty = 25 而不是 qty = 10。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:28:42.303

1.  您需要按 {table.code} 分组，因为这不是单行计算，而是需要对 2+ 个阶段（即 2+ 行数据）的每个代码进行计算。

2.  创建一个包含两个变量的公式，用于存储每个阶段的值 F 和 R。这个公式需要放在报告的详细信息部分。

    ```
    whileprintingrecords;
    numbervar Fqty;
    numbervar Rqty;

    if {table.phase}="F" then Fqty:={table.qty}
    else Rqty:={table.qty};
    ```

3.  现在，在组页脚中，您可以通过变量引用这两个数量值。

    ```
    whileprintingrecords;
    numbervar Fqty;
    numbervar Rqty;

    if Fqty=0 then Rqty else Fqty
    ```

你完成了。不要忘记重置组标题中的两个变量，这样您就不会在不同代码之间传递数量。

# java - Java - 如何从点数组中删除元素并正确返回新的固定数组

> ID：14410972
> 
> 赞同：0
> 
> 时间：2013-01-19T04:03:12.530
> 
> 标签：java, arrays, return, point

编写一个名为 removeSomePoints 的方法。此方法接受一个点数组，并返回一个与原始数组相同的新点数组，除了它删除所有 x 和 y 坐标相差小于 20 的点。换句话说，返回的数组可能比原始数组的大小更小。此方法应保持原始数组不变。澄清：如果以下任何点在原始数组中，它们将不在返回的数组中。

100 90（x 和 y 相差 10）

90 100（x 和 y 相差 10）

3 22（x 和 y 相差 19）

另一方面，以下任何点都将在返回的数组中：

100 80（x 和 y 相差 20）

80 100（x 和 y 相差 20）

2 25（x 和 y 相差 23）

我的代码：

```
 public static Point[] removeSomePoints(Point[] arr)  {

   int count = 0;      
   for (int i = 0; i < arr.length; i++) {
     if (Math.abs(arr[i].getX() - arr[i].getY()) > 19) {
        count++;
      }
     }

    Point[] finalArr = new Point[count];

    for (int i = 0; i < finalArr.length; i++) {
      if (Math.abs(arr[i].getX() - arr[i].getY()) > 19) {
           finalArr[i] = arr[i];
      }

 }

   return finalArr;
} 
```

我还使用 ArrayLists 使用此代码进行了尝试：

```
 public static Point[] removeSomePoints(Point[] arr) {
    ArrayList<Point> pointList = new ArrayList<Point>(Arrays.asList(arr));
    for (int i = 0; i < pointList.size(); i++) {
        if (Math.abs(pointList.get(i).getX() - pointList.get(i).getY()) < 20) {
            pointList.remove(i);

        }
    }
    Point[] finalArr = new Point[pointList.size()];
    finalArr = pointList.toArray(finalArr);

    return finalArr;
} 
```

上述代码块都不适用于我完成的返回数组应该是什么，许多点（例如 Point(6, 3) 当它们的绝对差肯定小于 19 时被留下）。

似乎无法弄清楚出了什么问题。它正在返回一个数组，但它不会改变任何东西。在我的主要方法中，我有：

```
 Scanner scan = new Scanner(System.in);
    System.out.print("Please enter name of file containing Points: ");
    String fileName = scan.next();
    Point[] myPoints = readPoints(fileName);
    sortPoints(myPoints); // works fine
    writePoints(myPoints, "sorted.txt");  //works fine up until this point
    removeSomePoints(myPoints)       //doesn't work, effects below method call
    writePoints(myPoints, "sortedAndRemoved.txt");
    new PointDisplay(myPoints, 10, false);  //works fine, pre-written class 
```

我在问我的 removeSomePoints 方法有什么问题以及可以采取哪些不同的方法。如何正确删除并返回点数组，其中所有点的绝对差为 19 及以下已删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:08:58.253

您正在返回一个新数组，但没有将原始数组设置为返回值。你应该改变

```
removeSomePoints(myPoints)       //doesn't work, effects below method call 
```

至

```
myPoints=removeSomePoints(myPoints);       //works now 
```

那应该可以解决您的问题。

注意：这与 sortPoints 不同，因为您对数组进行了就地排序，但您创建了一个新数组来删除这些点。

# javascript - HTML5 Appcache 导致 Google Analytics 出现问题

> ID：14410974
> 
> 赞同：2
> 
> 时间：2013-01-19T04:03:50.087
> 
> 标签：javascript, jquery, html, google-analytics

我的网站上有一个[appcache](http://ilanshomekitchen.x10.mx/)文件，如下所示：

```
CACHE MANIFEST
# V1.691 1-18-2013 10:57 PM

# cache 

index.html
about.html
services.html
contact.html
css/signika.css
css/mq.css
css/index.css
css/about.css
css/services.css
css/contact.css
assets/signika_400.woff    
assets/signika_600.woff
js/jquery.js
js/html5.js
js/index.js
js/mq.js
js/services.js
mail.php
images/chicken.png
images/salad.png
images/soup.png
images/steak.png
images/wontons.png

# network

https://google-analytics.com/ga.js 
```

我觉得这导致与正在检索的谷歌分析文件发生冲突......但我不知道如何。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T04:31:13.840

尝试添加`CACHE:`标题和`NETWORK:`标题，如下所示：

```
CACHE MANIFEST
# V1.691 1-18-2013 10:57 PM

# cache
CACHE:

index.html
about.html
...
images/steak.png
images/wontons.png

# network
NETWORK:

https://google-analytics.com/ga.js 
```

以注释开头的行`#`，因此被忽略。

有关更多信息，请查看有关**HTML5 缓存清单**[的 wiki 页面](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)或[本教程](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T17:49:02.040

缓存清单规范允许在“NETWORK:”标题下使用通配符。此代码将允许 http: 或 https: 以及实际检索并进行跟踪的 gif 文件正常工作。

```
NETWORK:
* 
```

我最初将 ga.js 添加到我的 CACHE: 并在检索 gif 文件时不断收到错误，直到我添加了上面的代码。**

# javascript - 防止文本出现负值

> ID：14410979
> 
> 赞同：-1
> 
> 时间：2013-01-19T04:05:35.520
> 
> 标签：javascript, html

如何禁用或防止文本框中的负值？

这是我的 js 文件中的代码：

```
function compare(val)
{
if(document.getElementById("num1").value==""||document.getElementById("num2").value=="")
{
alert("Click start to start the game");
}
else
{
uservalue=compute(randomnumber1,val,randomnumber2);
if(uservalue==document.getElementById("res").value)
{
    score=score+100;
    document.getElementById("rimg").src="images/correct.png";
    document.getElementById("txt2").value=score;
}
else if(uservalue!=document.getElementById("res").value)
{
    score=score-100;
    document.getElementById("rimg").src="images/wrong.png";
    document.getElementById("txt2").value=score;

}
else
document.getElementById("rimg").src="images/wrong.png";
generate();
    }
    } 
```

html文件中的文本框：

```
<input id="txt2" readonly="true" type="text" value="0" name="score"> 
```

在`score=score-100;`我不断得到负值。谁能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:10:44.643

从 中减去 100 后`score`，检查它是否低于零。如果是，请将其设置为零。

```
score -= 100;
if(score < 0) {
    score = 0;
} 
```

# c# - .NET 客户端编程中出现异常“AMQP 操作被中断”（代码 = 406）

> ID：14410985
> 
> 赞同：16
> 
> 时间：2013-01-19T04:06:00.850
> 
> 标签：c#, exception, rabbitmq, amqp

我有一个 2.8.2 RabbitMQ 服务器和一个 2.8.2 客户端 dll，有声明队列并获取消息的代码，它工作正常（所有参数都正确）：

```
IModel channel=null;

ConnectionFactory factory = new ConnectionFactory ();
factory.HostName = "192.168.68.4";
_QueueName = "172.16.1.1";

factory.UserName = "guest";
factory.Password = "guest";
factory.VirtualHost = "/";

factory.RequestedHeartbeat = 30;

if (factory.Endpoint == null) {
    Console.WriteLine (" factory.Endpoint==null ");
}

// 接受消息的队列名称是本地的IP地址
_QueueName = "172.16.1.1";
_RMQConnection = factory.CreateConnection ();

Console.WriteLine ("factory.CreateConnection()");

channel = _RMQConnection.CreateModel ();

channel.QueueDeclare(_QueueName, false, false,false,null); 
```

但是当我下载 3.0.1 RabbitMQ 服务器和 3.0.1 客户端 dll 时，我使用相同的代码并出现异常：

> AMQP 操作被中断：AMQP 关闭原因，由 Peer 发起，code=406，text="PRECONDITION_FAILED - vhost '/' 中队列 '172.16.1.1' 的参数不等效"，classId=50，methodId=10，原因=

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-21T09:50:19.847

当您使用不同的参数重新声明现有队列时，通常会收到该错误消息。检查管理控制台以查看队列是否已存在。如果是这样，请尝试删除它，然后重新运行您的代码。

# .net - 实体框架代码优先迁移错误

> ID：14410987
> 
> 赞同：26
> 
> 时间：2013-01-19T04:06:25.687
> 
> 标签：.net, entity-framework, exception-handling, ef-code-first

我是 MVC 4 和实体框架的新手，当我从包管理器控制台运行此命令时：

```
Enable-Migrations -ContextTypeName MyFirstMvcApp.Models.InventoryDbContext 
```

加入路径：无法将参数绑定到参数“路径”，因为它为空。

我收到以下错误：

```
Join-Path : Cannot bind argument to parameter 'Path' because it is null.
At D:\GitProjects\MyFirstMvcApp\trunk\packages\EntityFramework.6.0.0-alpha2\tools\EntityFramework.psm1:363 char:27
+     $toolsPath = Join-Path <<<<  $installPath tools
    + CategoryInfo          : InvalidData: (:) [Join-Path], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.JoinPathCommand

Join-Path : Cannot bind argument to parameter 'Path' because it is null.
At D:\GitProjects\MyFirstMvcApp\trunk\packages\EntityFramework.6.0.0-alpha2\tools\EntityFramework.psm1:392 char:73
+     $utilityAssembly = [System.Reflection.Assembly]::LoadFrom((Join-Path <<<<  $toolsPath EntityFramework.PowerShell.Utility.dll))
    + CategoryInfo          : InvalidData: (:) [Join-Path], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.JoinPathCommand

You cannot call a method on a null-valued expression.
At D:\GitProjects\MyFirstMvcApp\trunk\packages\EntityFramework.6.0.0-alpha2\tools\EntityFramework.psm1:393 char:50
+     $dispatcher = $utilityAssembly.CreateInstance <<<< (
    + CategoryInfo          : InvalidOperation: (CreateInstance:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

Join-Path : Cannot bind argument to parameter 'Path' because it is null.
At D:\GitProjects\MyFirstMvcApp\trunk\packages\EntityFramework.6.0.0-alpha2\tools\EntityFramework.psm1:426 char:19
+         (Join-Path <<<<  $runner.ToolsPath EntityFramework.PowerShell.dll),
    + CategoryInfo          : InvalidData: (:) [Join-Path], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.JoinPathCommand 
```

我该如何解决？请注意，我使用的是带有 SP1 的 Visual Studio 2010 Ultimate，并且我已在此[链接](http://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=MVC4VS2010_Loc)中安装了 MVC4 。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-22T03:37:47.197

通过卸载并重新安装实体框架来修复它。为了他人的利益，这里是命令...

卸载：

> PM> 卸载-打包EntityFramework -Force

卸载后重新安装EntityFramework：

> PM> Install-Package EntityFramework -Pre

那里！它是固定的。虽然我仍然不知道是什么导致了问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-10-02T19:00:39.240

Visual studio 2019: Uninstall-Package EntityFramework -Force

then

Install-Package EntityFramework -Pre -Version 6.2.0

something is up with v6.3.0

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-09-28T18:46:27.623

I was facing the same issue this is how I solved the issue,

I'm using Visual Studio 2019 and hence I installed latest Entity framework 6.3.0(stable) I was facing the issue when I run the Enable-Migrations command, I tried to re-install the Entity framework but it didn't work so I have installed the old version 6.2.0 from the Nuget package manger apparently it turned out working.

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-10-25T08:06:38.717

Tried all the things here. I personally hate solving things without knowing what the problem is in the first place. Digging down in forums this seems to be a known bug caused in version 6.3.0 when the startup project is a web app. They have already fixed it in their daily builds. So to solve it you need to install that.

First, uninstall the package:

```
PM> Uninstall-Package EntityFramework -Force 
```

Then install the latest daily build (in my case the following one)

```
PM> Install-Package EntityFramework -Version 6.4.0-preview1-19506-01 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-10T04:18:09.760

I came across this issue while upgrading to EntityFramework "6.3.0" from "6.2.0". The issue and workaround can be found here [EF 6.3.0 PMC commands throw `ParameterBindingValidationException` when Startup Project is a Web App](https://github.com/aspnet/EntityFramework6/issues/1290).

The problem arises when you have multiple projects and you set an ASP.NET project as the Startup project

Workaround suggested by the link:

> If you added a new dummy console app to the solution and installed the daily build of the EntityFramework into it, that version of the commands which includes the fix would be used. The commands would work just fine with projects referencing EF 6.3.

Personal Solution:

Setting the Startup project to a non ASP.NET project fixed the issue in my case. Note that you will have to copy the connection strings to the relevant project's configuration file if you're using them.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-15T06:01:08.983

Some years later...
Another possible reason for this issue is the VS 2017 csproj format - or better said, the PackageReference approach in contrast to using packages.config.

With the new approach to include Nuget Packages using the PackageReference format in your project files, the install script of EntityFramework is not being executed (it is a known fact for this new approach of including nuget packages). Due to that fact, the PowerShell commands are not being ready for execution.

There is an ongoing discussion on that issue on the [Entity Framework GitHub repository](https://github.com/aspnet/EntityFramework6/issues/189 "on the Entity Framework GitHub repository").
Until this is fixed (either by the NuGet people or the EF people) in order for migrations to run (talking of EF 6 - not EF Core!) you need to stick to the "old" way of including Nuget packages using the packages.config approach.

Check your Visual Studio settings at
`Tools -> Options -> NuGet Package Manager -> General` and make sure that the
`Default package management format` is set to `Packages.config`.

Note that you will have to uninstall all Packages, save the project, restart visual studio and afterwards re-install all packages when switching this setting.
In current Version of VS 2017 (I think from v 15.4 onwards) there is an automatic conversion from Packages.config to PackageReference, but not vice versa (unfortunately).

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-10-19T12:50:00.797

I had the same problem and solved it by changing the `Startup Project`.

I have 5 project in the same solution and each time I `Right Click` and `Set as startup` to a non ASPNET CORE project, I get this kind of error.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-05T15:03:00.693

i had the same problem when i updated EntityFramework to version 6.3.0 so when i went back to 6.2.0 it fixed the problem so i advice you to do the same

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-22T13:55:49.420

卸载实体框架对我不起作用。

It turned out that it was not `Visual Studio` or `Entity Framemwork` casuing the problem, but it was the fact I was running `PowerShell 2` (on `Windows 7`).

`Entity Framework` and `Visual Studio` require `PowerShell 3`.

Following the update and reboot, the issue was gone. Hopefully this will help a few people.

You can find PowerShell here -> [https://www.microsoft.com/en-us/download/details.aspx?id=40855](https://www.microsoft.com/en-us/download/details.aspx?id=40855)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-11-23T11:45:50.607

In my case none of the above solutions worked, so I had a quick look in the packages.config file and to my surprise found two entries for Entity Framework

```
<package id="EntityFramework" version="6.1.1" targetFramework="net45" />
<package id="EntityFramework" version="6.1.3" targetFramework="net45" /> 
```

Note that they are different versions, not sure how this could actually happen. Anyway, once I removed the older one from the packages.config file i.e. ended up with just this one:

```
<package id="EntityFramework" version="6.1.3" targetFramework="net45" /> 
```

I could then Enable-Migrations with no issues.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-07T22:14:19.947

I was facing the same problem while working with Code First migrations.

What worked for me is go to NuGet packet manager, then search `Entity Framework`. There I had installed the `Pre-release version`, then I selected the `Latest Stable version` and installed it.

Everything worked perfectly afterwards.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-09-28T20:17:31.040

As of version 6.3, the Entity Framework tooling supports the new SDK-style project format.

However, this issue can still happen when the project containing your migrations uses the new SDK-style format, while the startup project is using the classic csproj format.

To fix this, make both projects use the same csproj format.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-14T17:28:13.560

Shared with above suggestions here's my addition.

PM> Uninstall-Package EntityFramework -Force Then;

PM> Install-Package EntityFramework -Pre

this two above actions not enough. I needed to do the next one:

Then in the Solution Explorer, create a class with the below code inside your project at root level - in my case. and then Migrations folder with Configurations.cs file in it created automatically.

```
public class MyDbContext : DbContext
{
pubic MyDbContext()
{
} 
```

}

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-22T11:30:03.507

I would like to add an additional thing that I found while having this issue.

As it turns out, in my case (Running Visual Studio 2017, Entity Framework 6.2) the issue was that the project was in a remote directory (\server\user\location) rather than a local directory.

Upon copying the project to a local location, the command runs without issue.

# autofixture - 具有派生类型的 AutoFixture

> ID：14410991
> 
> 赞同：3
> 
> 时间：2013-01-19T04:07:14.907
> 
> 标签：autofixture

在我使用 AutoFixture 之前的日子里，我可能已经做了以下安排来设置一个名为的服务的单元测试`CustomerService`：

```
public void TestName()
{
  //Arrange
  var fakeResponse = new DerivedHttpResponse();
  var fakeHandler = new FakeHttpMessageHandler(fakeResponse); // takes HttpResponse
  var httpClient = new HttpClient(fakeHandler);

  var sut = new CustomerService(httpClient);
  // ...
} 
```

这种冗长的安排似乎是 AutoFixture 擅长解决的问题。我想我可以使用 AutoFixture 重写该安排也看起来像这样：

```
public void TestName([Frozen] DerivedHttpResponse response, CustomerService sut)
{
  //Nothing to arrange
  // ...
} 
```

我的问题是，有没有办法配置 AutoFixture 来为我执行此操作，因为我有许多派生`HttpResponse`类型要从测试方法换成测试方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T05:15:20.277

您可以将`[Frozen]`属性与命名参数一起使用`As`：

```
[Theory, AutoData]
public void TestName(
    [Frozen(As = typeof(HttpResponse))] DerivedHttpResponse response,
    CustomerService sut)
{
    // 'response' is now the same type, and instance, 
    // with the type that the SUT depends on. 
} 
```

命名参数`As`指定冻结参数值应映射到的类型。

* * *

如果`HttpResponse`类型是抽象的，则必须创建`AutoDataAttribute`派生类型，例如`AutoWebDataAttribute`

```
public class AutoWebDataAttribute : AutoDataAttribute
{
    public AutoWebDataAttribute()
        : base(new Fixture().Customize(new WebModelCustomization()))
    {
    }
}

public class WebModelCustomization : CompositeCustomization
{
    public WebModelCustomization()
        : base(
            new AutoMoqCustomization())
    {
    }
} 
```

在这种情况下，您将`[AutoWebData]`改用。

# javascript - 在AngularJS中的ng-repeat循环内绑定ng-model

> ID：14410993
> 
> 赞同：97
> 
> 时间：2013-01-19T04:08:04.127
> 
> 标签：javascript, angularjs

我正在尝试处理 ng-repeat 循环内的范围问题 - 我已经浏览了很多问题，但还不能让我的代码正常工作。

控制器代码：

```
function Ctrl($scope) {
  $scope.lines = [{text: 'res1'}, {text:'res2'}];
} 
```

看法：

```
<div ng-app>
     <div ng-controller="Ctrl">
       <div ng-repeat="line in lines">
           <div class="preview">{{text}}{{$index}}</div>

       </div>
       <div ng-repeat="line in lines">
           <-- typing here should auto update it's preview above -->
           <input value="{{line.text}}" ng-model="text{{$index}}"/>
            <!-- many other fields here that will also affect the preview -->
       </div>
     </div>
    </div> 
```

这是一个小提琴：http: [//jsfiddle.net/cyberwombat/zqTah/](http://jsfiddle.net/cyberwombat/zqTah/)

基本上我有一个包含多行文本的对象（它是一个传单生成器）。用户可以调整每一行文本（文本、字体、大小、颜色等），我想为它创建一个预览。上面的示例仅显示了用于输入文本的输入字段，我希望它能够自动/在键入时自动更新预览 div，但会有更多控件。

我也不确定我的代码是否适合循环索引 - 这是在循环内创建 ng-model 名称的最佳方法吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-01-19T04:36:01.383

对于 ng-repeat 循环的每次迭代，`line`都是对数组中对象的引用。因此，要预览值，请使用`{{line.text}}`.

同样，要数据绑定到文本，数据绑定到相同：`ng-model="line.text"`。使用 ng-model 时不需要使用`value`（实际上不应该使用）。

[小提琴](http://jsfiddle.net/mrajcok/7MhLd/)。

要更深入地了解范围和 ng-repeat，请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs), 部分**ng-repeat**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-02T02:03:22.567

```
<h4>Order List</h4>
<ul>
    <li ng-repeat="val in filter_option.order">
        <span>
            <input title="{{filter_option.order_name[$index]}}" type="radio" ng-model="filter_param.order_option" ng-value="'{{val}}'" />
            &nbsp;{{filter_option.order_name[$index]}}
        </span>
        <select title="" ng-model="filter_param[val]">
            <option value="asc">Asc</option>
            <option value="desc">Desc</option>
        </select>
    </li>
</ul> 
```

# html - 背景重复 CSS 的浏览器中的图像性能

> ID：14410994
> 
> 赞同：30
> 
> 时间：2013-01-19T04:08:06.370
> 
> 标签：html, css, browser

有谁知道这两个选项之间的浏览器加载时间哪个更好：

```
background-image:url('1by1px.png'); 
```

或者

```
background-image:url('10by10px.png'); 
```

为 div 重复的 1px x 1px 半透明 png。或者更大的说 10px x 10px。

必须进行某种循环才能在浏览器中显示重复的图像，所以我想知道`1px by 1px`导致大量循环显示图像的图像是否实际上可能比更大的图像速度慢具有较少循环的尺寸图像？

当然，相反的论点是 1by1 的图像尺寸比 10by10 的图像尺寸更小，但这并不意味着它更小更好，因为循环多次可能不如循环大图像尺寸稍微少一些。

有没有人知道哪个更好以及浏览器如何处理这种情况？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-19T08:41:59.023

当不重复背景图像时，渲染所需的时间仅取决于最终缩放的图像，而不是原始图像。

文件中的图像被压缩为PNG格式，但被浏览器加载后，它是RGBA位图格式（一个像素4字节）。当重复背景时（假设在 Intel x86 上），浏览器的本机代码将使用**REP MOVSD**将位图数据从 RAM 移动到视频内存（这是标准顺序，在图形驱动程序或特定 GPU 的各种实现上可能会有所不同）。

假设包含背景的 HTML DIV 的尺寸为 100x100。

对于只有 1 个像素的图像：浏览器程序必须执行**1 万条“REP MOVSD”**指令。

对于 10x10 的图像：对于每个重复的图像，浏览器程序只需执行 10 次“REP MOVSD”（1 次调用“REP MOVSD”可以渲染图像的 1 像素行（像素行））。所以在这种情况下，执行的“REP MOVSD”指令的数量只有 10x100 次（1 张图像中 10 次，100 次重复图像）。这总共需要**1000 个 'REP MOVSD'**。

**因此，基于较大图像的最终背景渲染速度会更快**。

更多注意事项： *上述解释并不意味着 10x10 图像的性能正好好 10 倍。'REP MOVSD'（例如 CX=9999）只有 1 条单 CPU 指令，但仍需要通过数据总线传输 9999x4 字节。如果使用 9999 个简单的 'MOV's，那么很多数据仍然需要通过数据总线，但是，CPU 必须执行更多的 9998 条指令。一个更聪明的浏览器会为背景创建一个带有复制图像的预渲染位图；所以每次需要传输到显存时，它只需要 100 个“REP MOVSD”（100 是最终背景中的像素行数，如上所示）而不是 10000 或 1000。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-27T15:51:24.727

我同意保罗的回答。我最近用 Google Chrome 开发者工具做了一些粗略的测试。我在背景图像上使用了不同大小的半透明 png 图像，并使用页面绘制时间来查看刷新屏幕需要多长时间。

结果如下：

没有 -webkit-transform hack 的刷新时间（四舍五入）：

**2x2 图像**：65-160 毫秒

**10x10 图像**：60-150 毫秒

**100x100 图像**：55-135 毫秒

**1000x1000 图像**：55-130 毫秒

是时候使用 -webkit-transform hack（四舍五入）刷新了：

**2x2 图像**：40-120 毫秒

**10x10 图像**：30-90 毫秒

**100x100 图像**：30-90 毫秒

**1000x1000 图像**：30-90 毫秒

就像保罗所说的那样，较大的图像比较小的图像需要更短的时间来加载（刷新）。但是，在图像大于 10px 后，它似乎变得不那么有效了。我认为 100x100 和 1000x1000 之间没有太大区别。

在我看来，一个巨大的图像不会给你一个明显的结果，它可能会增加加载时间。所以，我认为 10 - 100 左右的任何大小都足以满足性能和加载时间。

但是，不同的图像可能会有不同的结果，我认为您应该使用 Google Chrome 开发人员工具中的页面绘制时间工具测试您的网站以获得准确的结果。

# php - 在导航中显示 WordPress 页面的前几个单词

> ID：14410995
> 
> 赞同：0
> 
> 时间：2013-01-19T04:08:06.563
> 
> 标签：php, html, wordpress, nav

我想显示一个 WordPress 导航，它下面有每个页面的前几个单词。

这是我目前拥有的：

```
<?php wp_list_pages('title_li=&link_after=<span>FIRST FEW WORDS HERE</span>'); ?> 
```

我希望输出如下：

```
<li><a href="#">Home<span>Welcome to the website</span></a></li> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:30:24.153

我唯一能想到的就是这样做：

用于`wp_get_pages`获取所有标题（或您想要的标题），然后使用查询访问数据库，该查询将使用标题获取每个帖子。因此，对于`get_pages`返回的数组中的每个标题，您都会获得相应的帖子。在 SQL 或 PHP 中，使用该`substring`方法获取前几个单词，并根据需要显示。

这只是逻辑，我对代码有点生疏，所以我不想让你感到困惑。如果你不明白我会试试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T04:34:35.983

我认为没有办法通过将参数传递给`wp_list_pages`. 但是，您可以过滤它并使用`preg_replace`. 例如...

```
add_filter('wp_list_pages', function($data) {
    return preg_replace('/(<a[^>]+[^<]+)<\/a>/si', '\\1<span>FIRST FEW WORDS HERE</span></a>', $data);
}); 
```

虽然我使用过`preg_replace()`你也可以（并且可能应该）使用`DomDocument`，但这适用于大多数用例。

另一种方法是使用[自定义助行器](http://codex.wordpress.org/Function_Reference/Walker_Class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T04:53:06.433

另一种选择是制作一个自定义循环并将其添加到您要显示它的主题的“index.php”文件中。

一个简单的例子：

```
<div id="nav"><ul>

 <!-- start the loop-->
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

 <li class="nav_post">
 <a href="<?php the_permalink(); ?>"><?php the_title(); ?>
 <span><?php formatPreview(the_content()); ?></span></a>
 </li>

 <!-- stop the loop-->
 <?php endwhile; else: ?>
 <p>No posts!</p>
 <?php endif; ?>

</ul></div> 
```

the_permalink()、the_title() 和 the_content() 是此处使用帖子信息填充自定义导航的关键参与者。然后只需为导航 ID、nav_post 类和 h2/p 添加适当的 css 就可以了！您可能希望在一定数量的帖子后硬停止循环 - 我怀疑您是否希望在导航中列出每个帖子！

您必须单独创建“formatPreview()”函数来控制如何格式化每篇文章内容的预览 - 但仅删除前几个单词应该不难！