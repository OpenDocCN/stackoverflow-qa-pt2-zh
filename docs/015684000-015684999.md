# StackOverflow 问答 15684000-15684999

# arrays - Linux Bash 将函数参数传递给数组名称

> ID：15684000
> 
> 赞同：0
> 
> 时间：2013-03-28T14:07:47.113
> 
> 标签：arrays, bash, function, arguments

我正在编写一个脚本，该脚本具有许多功能，可以从几个不同的数组中提取数据。我们希望保持阵列个性化以用于报告目的。数组中的信息不会改变，每个函数之间唯一不同的是正在使用的数组名称。由于所有功能都有 98% 的相同内容，我试图将它们拉入 1 个单一阵列以简化管理。

我面临的问题是我无法根据函数参数中传递的数组标题找出正确的语法来获取数组的长度。我不能发布实际的脚本，但这里有一个模型，详细说明了我正在测试的简化版本。我相信如果我们可以使用下面的模拟脚本让它工作，我可以将所需的更改转移到实际脚本中。

```
array1=(
    "item1 123"
    "item2 456"
)

array2=(
    "stockA qwe"
    "stockB asd"
    "stockC zxc"
)

test() {
     local ref=${1}[@]
     IFS=$'\n'; for i in ${!ref}; do echo $i ; done
}

test array1
test array2 
```

到目前为止，上面的脚本将在调用函数及其参数时根据参数 1 回显每个数组行的内容；这是根据需要工作的。我尝试了许多不同的组合，例如，`len=${#${1}[@]}`但我总是收到“错误替换”错误。我之前提到的函数有 while 循环和 for 语句，它们使用数组长度来知道何时停止，因此能够提取这些信息确实将它们联系在一起。我希望的是类似于下面的流程

我计划继续对此进行研究，但感谢您提供的任何帮助和知识！

-氰化物

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:13:13.220

我认为唯一的解决方案是创建数组的副本，然后取该数组的长度：

```
local ref=${1}[@]
copy=( "${!ref}" )
len=${#copy[@]} 
```

由于`bash`不允许参数扩展运算符的链接，我知道没有更短的方法可以在同一行上同时`${#...}`使用两者。`${!...}`

# java - 从wsdl创建java代码的axis2错误

> ID：15684002
> 
> 赞同：2
> 
> 时间：2013-03-28T14:07:53.543
> 
> 标签：java, wsdl, axis2, wsdl2java

我必须为给定的 wsdl 创建一个客户端...

```
<?xml version="1.0" encoding="UTF-8"?><wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:base="http://www.impresainungiorno.gov.it/schema/base" xmlns:bus="http://www.cnipa.it/schemas/2003/eGovIT/Busta1_0/" xmlns:eb="http://www.metaware.it/geofront2/estensioni_busta.xsd" xmlns:ns0="http://www.impresainungiorno.gov.it/schema/suap/ri/spc/ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:spc="http://www.impresainungiorno.gov.it/schema/suap/ri/spc" targetNamespace="http://www.impresainungiorno.gov.it/schema/suap/ri/spc/ws">
  <wsdl:types>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:pi="http://www.impresainungiorno.gov.it/schema/base" xmlns:ri="http://www.impresainungiorno.gov.it/schema/suap/ri/spc" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://www.impresainungiorno.gov.it/schema/suap/ri/spc" version="1.0.0" xmlns:spc="http://www.impresainungiorno.gov.it/schema/suap/ri/spc">
    <!--  
    -->
    <xs:import namespace="http://www.impresainungiorno.gov.it/schema/base"/>

........

    <xsd:element name="Intestazione">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="IntestazioneMessaggio"/>
                <xsd:element minOccurs="0" ref="ListaRiscontri"/>
                <xsd:element minOccurs="0" ref="ListaTrasmissioni"/>
                <xsd:element minOccurs="0" ref="ListaEccezioni"/>
            </xsd:sequence>
            <xsd:attribute fixed="http://www.cnipa.it/eGov_it/portadominio" ref="SOAP_ENV:actor" use="required"/>
            <xsd:attribute fixed="1" ref="SOAP_ENV:mustUnderstand" use="required"/>
        </xsd:complexType>
    </xsd:element>

........ 
```

我正在使用命令行中的axis2 1.6.2 wsdl2java 工具，但遇到以下错误：

```
Retrieving document at 'richiesta-iscrizione-impresa-RI.wsdl'.
Exception in thread "main" org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:293)
    at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
    at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.apache.axis2.wsdl.codegen.extension.XMLBeansExtension.engage(XMLBeansExtension.java:126)
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:246)
    ... 2 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.axis2.wsdl.codegen.extension.XMLBeansExtension.engage(XMLBeansExtension.java:115)
    ... 3 more
Caused by: java.lang.RuntimeException: org.apache.xmlbeans.XmlException: error: src-resolve: attribute 'actor@http://schemas.xmlsoap.org/soap/envelope/' not found.
    at org.apache.axis2.xmlbeans.CodeGenerationUtility.processSchemas(CodeGenerationUtility.java:325)
    ... 8 more
Caused by: org.apache.xmlbeans.XmlException: error: src-resolve: attribute 'actor@http://schemas.xmlsoap.org/soap/envelope/' not found.
    at org.apache.xmlbeans.impl.schema.SchemaTypeSystemCompiler.compile(SchemaTypeSystemCompiler.java:225)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.xmlbeans.XmlBeans.compileXmlBeans(XmlBeans.java:667)
    at org.apache.axis2.xmlbeans.CodeGenerationUtility.processSchemas(CodeGenerationUtility.java:189)
    ... 8 more 
```

我检查了架构并且存在“演员”属性....

有什么问题？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:31:20.987

[WSDL](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)有不同的编码类型，例如 RPC/encoded、RPC/literal、Document/encoded、Document/literal。我认为您的 WSDL 正在使用 RPC/编码。Axis2 不直接支持 RPC/encoded 编码样式。

本文是关于[在 Axis2 中使用 RPC/编码的 WSDL](http://axis.apache.org/axis2/java/core/docs/Axis2-rpc-support.html)。我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T21:32:46.867

轴 2 不支持**rpc/编码**风格的 web 服务。您将不得不使用轴 1

# objective-c - 将目标添加到 UIView

> ID：15684005
> 
> 赞同：1
> 
> 时间：2013-03-28T14:08:11.947
> 
> 标签：objective-c, cocoa-touch, uiview, delegates

我正在编写自己的自定义控件，该控件通过`UIView`.

当我初始化它时，我想像这样向它添加一个自定义目标：

```
[myControl addTarget:self action:@selector(turnOn) forControlEvents:UIControlEventValueChanged]; 
```

我这样做是因为当我在 UIView 上更改某些内容时，它会在其父控件中触发这种方法。我知道有一个用于此类目的的**代表**，但我想知道是否可以不使用它。

你如何在 Objective-C 中做这种事情？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:13:26.397

如果你改为子类`UIContol`，你可以调用

```
- (void)sendActionsForControlEvents:(UIControlEvents)controlEvents 
```

从您的子类中，这将触发动作

# android - Android滑动片段而不是菜单

> ID：15684008
> 
> 赞同：1
> 
> 时间：2013-03-28T14:08:18.000
> 
> 标签：android, android-fragments, slidingdrawer, android-sliding

我想在平板电脑应用程序中实现一个包含 2 个片段的活动。左侧的片段 A 和右侧的第二个片段 B 以及一些附加信息。假设每个片段都有一半的屏幕宽度。现在我想添加将右片段 B 滑动到屏幕右侧的选项，并让片段仅例如宽度的 10%（因此片段 A 可以扩展到 90%）。

所以片段 A 现在可以有更多的空间，片段 B 可以再次滑到中间。我想问一下是否有可以帮助我的库，或者是否已经有功能解决方案。

我从来没有使用过 SlidingDrawer 这似乎是正确的，但现在它已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:18:25.040

下载这个库： [https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

在这里查看如何实现： [带滑动菜单和操作栏的动态 UI](https://stackoverflow.com/questions/14274676/dynamic-ui-with-sliding-menu-and-actionbarsherlock/14360860#14360860)

# c++ - C / C ++如何减少变量的浮点数有效小数位数

> ID：15684012
> 
> 赞同：1
> 
> 时间：2013-03-28T14:08:30.593
> 
> 标签：c++, c, floating-point

生成 [0, 1.0] 之间的随机数

```
i = (float) rand() / RAND_MAX / 1; 
```

我不只是想打印一个小数点，我希望变量有一个小数点我们如何做到这一点？

（即 0.1 ；不是 0.1224828）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:11:01.133

你实际描述的是一个随机整数，可能值在 0 到 10 之间。所以你会写：

```
int i = rand() / (RAND_MAX / 11 + 1); 
```

或者确实是其他一些方法来生成一个整数`i`，使得 0 <= i <= 10。

现在，`i`您的值是否按 10 缩放。

如果您想除以 10，请执行以下操作：

```
float f = i / 10.0; 
```

请注意，二进制浮点变量不能精确表示 0.1、0.2、0.3、0.4、0.6、0.7、0.8 和 0.9。列表中唯一可以精确表达的值是 0.0、0.5 和 1.0。这就是为什么最好将信息存储在整数变量中的原因。

*注意*：正如其他人所指出的（谢谢），显而易见`rand() % 11`的随机性很差。我更新了答案以避免使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:19:30.460

当您将值“R”存储在浮点变量中时，您通常不会存储“R”。*相反，您必须存储最接近*“R”的合法浮点值。[comp.lang.c 常见问题](http://c-faq.com/fp/printfprec.html)

即使您不尝试在某个范围内生成随机整数，您也应该阅读[如何获得某个范围内的随机整数？](http://c-faq.com/lib/randrange.html) 这个表达

```
(int)((double)rand() / ((double)RAND_MAX + 1) * N) 
```

比显而易见的要好`rand() % N`；此外，它的教训也适用于其他情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:11:01.233

尝试：

```
i = ((float)( rand()%11) ) /10; 
```

# arrays - 在 2D Lua 表中查看越界

> ID：15684018
> 
> 赞同：3
> 
> 时间：2013-03-28T14:08:46.713
> 
> 标签：arrays, lua, lua-table

我有时在 Lua 中制作小游戏，并且经常需要将 2D 数组实现为网格或棋盘。当我想检查特定单元格周围的单元格时，我通常给二维数组一个元表，这样当 grid[outOfBoundsNum] 被索引时，它会返回一个空表而不是错误：

```
setmetatable(grid, {
    __index = 
    function(t, key)
        if not table[key] then
            return {}
        else
            return table[key]
        end
    end}) 
```

所以当`grid[outOfBoundsNum][anything]`被调用时，它会返回`nil`. 然后，要检查周围的单元格，我会执行以下操作：

```
for k, v in ipairs(neighbours) do
    local cell = grid[v[1][v[2]]
    if cell then -- check if this is actually within the 2D array
        if cell == 1 then 
            -- do something
        elseif cell == 2 then
            -- do something else
        ...
    end
end 
```

这行得通，但对我来说似乎很尴尬。有更好或更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:21:01.297

你不需要元表。

```
for k, v in ipairs(neighbours) do
   local cell = grid[v[1]] and grid[v[1]][v[2]]

   if cell == 1 then 
      -- do something
   elseif cell == 2 then
      -- do something else
   ... 
   end 
end 
```

应该做的工作。`and`使用逻辑和在表达式中的作用类似于 C 中的三元运算符，这是一个相对常见的 lua 习惯用法`or`。所以这一行相当于：

```
local cell = nil
if grid[v[1]]~=nil then
    cell = grid[v[1]][v[2]]
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:18:10.950

您可以编写一个`forEachNeighbor()`函数来获取网格、一个位置和一个函数，然后使用每个现有的neighborfield 调用它，即将循环和外部封装`if`在函数的第二个片段中，您可以使用如下：

```
forEachNeighbor(grid, position, function(cell)
    if cell == 1 then
        -- do something
    elseif cell == 2 then
        -- do something else
    ...
end) 
```

此外，您可以提供一个`at()`函数，它将网格位置作为一个参数并返回相应的字段 or `nil`，这样`grid[v[1]][v[2]]`就变成了`at(grid, v)`. 这也可以作为元方法的补充或替代来实现`__index`。

对于元`__index`方法本身：首先，您可能的意思是`t`代替`table`和 `rawget(t, key)`代替`t[key]`（这将导致无限递归）。但正如 lhf 指出的那样，检查是完全没有必要的，因为`__index`只有[当密钥不存在于`t`](http://www.lua.org/manual/5.2/manual.html#2.4). 所以你可以写：

```
__index = function(t, key)
    return {}
end 
```

最后一句话：

> 我有时用 Lua 做小游戏，经常要实现一个 2D 数组

为什么不实现一次并在其他游戏中重复使用呢？这就是[模块](http://www.lua.org/manual/5.2/manual.html#6.3)的用途！

# matlab - 如何在 MATLAB 中绘制 4D 等高线（XYZ-V）？

> ID：15684023
> 
> 赞同：2
> 
> 时间：2013-03-28T14:08:56.780
> 
> 标签：matlab, 3d, contour, 4d, geometry-surface

我将 XYZ 数据集作为坐标，将 V 作为每个点的值（100x4 矩阵）。

我使用补丁绘制 3D 表面。（按面和顶点）

如何在 3D 表面上绘制 V（不是 Z）的轮廓线！？

（Contour3 函数绘制 Z 的 3D 等高线；但我需要 V 的等高线。）

其实我想要[这样](http://www.lausanneheart.ch/images/vector.png)或[这样](http://www.lausanneheart.ch/images/pqinterval.png)的东西。

感谢十亿的帮助。

* * *

好吧，实际上我发现等值面命令正是我想要的。

但是，此命令要求 V 数据为 3D 矩阵。但我的 V 是一个向量。而且里面的数据是完全不均匀和不规则的。现在这里提出了一个新问题：

**如何将此非均匀向量转换为 3D 矩阵，以便可以与等值面命令一起使用！！？**

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:22:33.617

[`cont3d`](https://www.mathworks.com/matlabcentral/fileexchange/4663-cont3d-m)来自 MathWorks 的 FileExchange 并不完全是您正在寻找的东西，但它可能会给您一些想法。

# java - 指定 ArrayList 的类型

> ID：15684024
> 
> 赞同：12
> 
> 时间：2013-03-28T14:08:58.087
> 
> 标签：java, arrays, generics, arraylist

在 Java 和 Android 中，我最终使用`ArrayList<String>`了供应列表，因为我发现它们比标准的`String[]`. 我真正的问题是：

被调用的`<String>`部分是什么`ArrayList<String>`？
如何创建类并使用`<>`[修饰符]？（我不知道它实际上叫什么，所以现在它是修饰符）。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T14:14:19.643

在这里，您可能会看得更清楚：

```
ArrayList<TypeOfYourClass> 
```

您可以创建一个 Person 类并将其传递给 ArrayList ，如此片段所示：

```
ArrayList<Person> listOfPersons = new ArrayList<Person>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T14:10:07.137

该`<String>`部分是*类型参数*。它为in ... 的*类型参数*提供了一个“值” ，就像你有一个方法一样：`E``ArrayList<E>`

```
public void foo(int x) 
```

你用以下方式调用它：

```
foo(5) 
```

参数是`x`，提供的参数是`5`。类型参数和类型参数基本上是通用的等价物。

有关更多详细信息，请参阅[JLS 的第 4.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5)（以及其中的链接） - 以及有关泛型的更多信息，而不是您可能想要阅读的[Java Generics FAQ :)](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T14:11:32.493

之间的位`<>`是类型参数，该功能称为[泛型](http://docs.oracle.com/javase/tutorial/java/generics/why.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T14:17:55.780

假设您希望 ArrayList 仅填充字符串。如果你写：

```
ArrayList<String> list = new ArrayList<String>();
    list.add("A");
    list.add("B");
    list.add("C"); 
```

您可以确定，如果有人试图用 int 填充 arrayList，它将在编译时被检测到。

因此，泛型用于您想要强制执行此类限制的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T14:11:49.287

查找 Java 的*泛型*语法。这会让你直截了当（嗯，有点；很多人发现 Java 的方法不如 C++ 和 C#）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T14:19:00.643

是类型参数。在 Java 中，当类被编写为泛型时，您必须提供其中之一。

这是一个通用类定义的示例

```
private class GNode<T>
{
    private T data;
    private GNode<T> next;

    public GNode(T data)
    {
        this.data = data;
        this.next = null;
    }
} 
```

您现在可以创建传入的任何类型的节点。 T 充当类定义的泛型类型参数。如果要创建整数节点，只需执行以下操作：

```
 GNode<Integer> myNode = new GNode<Integer>(); 
```

需要注意的是，你的类型参数必须是一个对象。这通过 Java 的自动装箱和自动拆箱工作。这意味着您不能使用 java 原始类型，而必须使用相应的类。

```
Boolean instead of bool
Integer instead of int
Double instead of double 
etc... 
```

此外，如果您不传入类型参数，我很确定您的代码仍然可以编译。但它不会起作用。

# sql-server-2008-r2 - SQL Server 索引性能

> ID：15684025
> 
> 赞同：0
> 
> 时间：2013-03-28T14:09:00.363
> 
> 标签：sql-server-2008-r2, indexing

我对数据库很感兴趣，并且已经开始使用 SQL Server 2008，我读到在表上使用适当的索引可以帮助提高数据库的整体性能。

我有两个表，使用 SQL 数据生成器在每个表中自动生成 100 万行，表 1 是客户表，表 2 是租户表，设计如下：

```
Customer                                    Renters
CustomerID (PK)                             RentersID (PK)
ForeName (Non clustered index)              StartDate
SurName                                     EndDate
Email                                       RentalNights
                                            CustomerID (FK) (Non Clustered index) 
```

我读过在最常用的列和外键列上放置非聚集索引将有助于提高性能。我在使用索引之前和使用索引之后创建了一个简单的连接查询，但对我来说，我看不到使用索引时性能的提高，任何人都可以帮助我吗？下图是索引前和使用后的执行计划。

索引前： ![在此处输入图像描述](../Images/2baaae07e44ef1a33a8cc0d158a6a662.png)

索引后： ![在此处输入图像描述](../Images/5b2fbd144e2015b9735b44653465a28f.png)

**编辑：** 这是我正在使用的 SQL 语法

```
SELECT cu.ForeName + ' ' + cu.SurName AS 'Name' 
FROM dbo.Customers cu
INNER JOIN dbo.Renters re ON re.CustomerID = cu.CustomerID
WHERE cu.ForeName = 'Daniel' 
```

**编辑** 这是我使用以下回复中发布的索引语法：

`CREATE NONCLUSTERED INDEX [ix_Customer] ON [dbo].[Customers] ( [ForeName] ASC, [CustomerID] ASC ) INCLUDE ( [SurName]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] GO`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:15:24.450

根据您的查询，要构建的最佳非聚集索引将是：

```
CREATE NONCLUSTERED INDEX ix_IndexA on dbo.Customers (Forename, CustomerID) 
     INCLUDE (SurName)

CREATE NONCLUSTERED INDEX ix_IndexB on dbo.Renters (CustomerID) 
```

您希望您的关键字段位于您的过滤器或`JOIN`列上，并且您的`INCLUDE`列位于叶级别以在`SELECT`.

# sorting - 使用批处理对复杂的文件夹进行排序，并将名称中带有特定字符串的任何文件排序到特定目录？

> ID：15684028
> 
> 赞同：0
> 
> 时间：2013-03-28T14:09:21.357
> 
> 标签：sorting, input, batch-file, find

所以我从网上收集了一些艺术品；它非常大，并且跨越了我将其全部保存在主文件夹下的大量子目录（名为 Uda）。我在大约 4 年的时间里建立了这个系列。在最近 2 年里，我一直在整理我保存的艺术家的东西（如果重要的话，大部分来自网站 DeviantArt）。但是我有 2 年的未分类文件，到处都是，我想对它们进行分类。

我认为这是练习一些批处理脚本的理想时机，但是……我一点也不知道从哪里开始。谷歌并不是很有帮助，很难在一个问题中解释我想做什么，更不用说找到需要同样事情并得到指导的人。另外，老实说，我更愿意拆开并找出一个已经制作好的脚本来理解它并从中学习（这就是我倾向于学习的最佳方式）。

那么任何人都可以帮助我吗？如果您不明白我想要做什么：我希望制作一个脚本，我可以在其中输入一些内容（即艺术家的姓名）并在某个目录下为其创建一个文件夹（无论批处理是从哪里运行的）或从中提取的文件）具有输入的术语的名称，然后找到并移动具有该术语的另一个目录下的所有文件。

作为记录，即使我对批处理脚本不感兴趣，我也无法使用 Windows 资源管理器搜索它们然后将它们全部删除，因为我禁用了它（出于个人原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:36:21.540

我不会为你写它，但是这里列出了你必须实现的大致目标。尝试寻找其中的每一个，然后将它们组合起来

1.  输入名称
2.  用这个名字创建一个目录
3.  查找具有此名称的文件
4.  将找到的文件移动到目录

如果您发布您正在尝试的代码，我很乐意为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:23:37.343

```
@ECHO OFF
SETLOCAL
:: Note that SPACES are significant in simple SET statements
:: Set relative or local root (start-point of subtree to scan)
:: Use normal then safemethod 1 then safemethod2 - all do the same thing
:: Note : from the prompt,
:: command /?
:: will generally show help...
SET relroot=c:\wherever
(SET relroot=c:\wherever)
SET "relroot=c:\wherever"
:: repeat for destination directory
SET "destdir=c:\destination"
::
:: Read Artist
:: Make sure ARTISTS has no existing value, then prompt for input
::
:again
(SET artist=)
SET /p artist="Artist ? "
::
:: Check for input, exit if none
:: Note :EOF is a special predefined label meaning "END OF FILE"
:: character case is generally insignificant
::
IF NOT DEFINED artist GOTO :eof
::
:: make a new directory
:: the 2>nul suppresses an error message like 'it already exists'
:: In quotes in case variables contain spaces
MD "%destdir%\%artist%" 2>nul
::
:: Now look for filenames containing the data entered
:: Note: here, the metavariable %%i IS Case-sensitive
:: >nul means 'don't show message like '1 file(s) moved'
FOR /f "delims=" %%i IN ( 
   ' dir /s /b /a-d "%relroot%\*%artist%*" '
   ) DO (
 ECHO %%i
 IF EXIST "%destdir%\%artist%\%%~nxi" (
    ECHO Cannot MOVE "%%i" because "%destdir%\%artist%\%%~nxi" exists
 ) else (ECHO MOVE "%%i" "%destdir%\%artist%\%%~nxi" >nul)
)

GOTO again 
```

好吧，这是一个启动脚本 - 假设艺术家的名字在文件名中。

大多数文档是内联的。

请注意，`::...`文档的形式实际上是一个损坏的标签，通常在循环和括号代码中是不可取的 - 在那里使用 REM。然而，它更容易打字，干扰更少

循环需要一点解释：其中`FOR`大部分可以通过文档中的一些持久性来破译

```
for /? 
```

从提示。但要注意的是：

`for /f`逐行读取“文件”，并在分隔符之间进行标记后将每个连续行应用于元变量。您可以通过从 1 开始计数的数字来指定标记，分隔符是出现在 the`delims=`和右引号之间的任何字符。默认分隔符为 [空格]、[制表符]、[逗号]、[分号]，默认标记为`1`. "delims=" 指定没有分隔符，因此整行应用于元变量。

可以在数据行上使用此工具，例如使用 to 、`Wed. 07/11/2012`to`FOR/f "tokens=2,3,4delims=/ " %%i in...`和`07`to -标记是, ，并且当使用 [空格或] 标记行并且将第二个标记应用于循环元变量时，通过令牌编号列表以此类推。特殊标记“ ”表示“指定的最高编号标记之后的其余行”`%%i``11``%%j``2012``%%k``Wed.``07``11``2012``/``%%i``%%j``*`

AND.. 单引号“文件名”是命令的输出。`dir /s /b /a-d "%relroot%\*%artist%*"`是`/b`基本形式的目录列表（仅文件名）`/s`扫描子目录`/a-d`，但不提及从 %relroot% 开始并在文件名中的某处有 %artist%~~的战争~~目录名 - 全部引用以防出现空格。

# java - 为什么即使“module”和“sModule”相等，java代码中的if语句也会跳转

> ID：15684032
> 
> 赞同：2
> 
> 时间：2013-03-28T14:09:41.947
> 
> 标签：java, android, sqlite, sorting, if-statement

我尝试从 sql 表中仅选择要在列表视图中显示的具有相同模块的文件。如果我使用 if (module == smodule) 应用程序没问题，但 if 语句被跳转，使用 if (module.equals(smodule)) 应用程序正在崩溃。

谢谢@Nambari 问题是我在数据库中的模块值有一个空值。

感谢@Buhake Sindi 的建议'像 String module = ""' 一样实例化它

Java 代码........

```
private void getFiles() {                               //getting data from the SQL database
    String[] columns = {"id", "file", "module", "date", "note"};
    database = helper.getWritableDatabase();
    Cursor cursor = database.query("files", columns, null, null, null, null, null);
    cursor.moveToFirst();
    files.clear();
    while (!cursor.isAfterLast()) {
        String module = cursor.getString(2);
        String smodule = "Alllllll";
        Log.v("test", smodule+" "+module+" <-if m=sm getting sql data /not if");
        if (module.equals(smodule)){
             String file = cursor.getString(1);
             files.add(file);
             Log.v("test", file+" "+files+" <-if m=sm getting sql data/if");
        }
    cursor.moveToNext();
    }
    cursor.close();
    helper.close(); 
```

日志猫：

```
Alllllll null <-if m=sm getting sql data not/if
Alllllll null <-if m=sm getting sql data not/if
Alllllll null <-if m=sm getting sql data not/if
Alllllll null <-if m=sm getting sql data not/if
Alllllll Alllllll <-if m=sm getting sql data not/if
Alllllll Alllllll <-if m=sm getting sql data not/if
Alllllll Alllllll <-if m=sm getting sql data not/if 
```

将 == 替换为 .equals() 后的错误日志：

```
03-28 14:31:03.985: E/SpannableStringBuilder(25898): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-28 14:31:03.985: E/SpannableStringBuilder(25898): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-28 14:31:15.030: D/AbsListView(25898): Get MotionRecognitionManager
03-28 14:31:15.085: W/ResourceType(25898): Failure getting entry for 0x010802c1 (t=7 e=705) in package 0 (error -75)
03-28 14:31:15.090: W/ResourceType(25898): Failure getting entry for 0x010802c1 (t=7 e=705) in package 0 (error -75)
03-28 14:31:15.225: E/SpannableStringBuilder(25898): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-28 14:31:15.225: E/SpannableStringBuilder(25898): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-28 14:31:28.950: D/AbsListView(26523): Get MotionRecognitionManager
03-28 14:31:29.060: D/libEGL(26523): loaded /system/lib/egl/libEGL_mali.so
03-28 14:31:29.075: D/libEGL(26523): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-28 14:31:29.080: D/libEGL(26523): loaded /system/lib/egl/libGLESv2_mali.so
03-28 14:31:29.090: D/(26523): Device driver API match
03-28 14:31:29.090: D/(26523): Device driver API version: 10
03-28 14:31:29.090: D/(26523): User space API version: 10 
03-28 14:31:29.090: D/(26523): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Thu Oct 25 08:43:05 KST 2012 
03-28 14:31:29.115: D/OpenGLRenderer(26523): Enabling debug mode 0
03-28 14:31:29.135: W/ResourceType(26523): Failure getting entry for 0x010802c1 (t=7 e=705) in package 0 (error -75)
03-28 14:31:29.145: W/ResourceType(26523): Failure getting entry for 0x010802c1 (t=7 e=705) in package 0 (error -75)
03-28 14:31:30.780: D/AbsListView(26523): Get MotionRecognitionManager
03-28 14:31:30.800: V/test(26523): Alllllll null <-if m=sm getting sql data /not if
03-28 14:31:30.805: D/AndroidRuntime(26523): Shutting down VM
03-28 14:31:30.805: W/dalvikvm(26523): threadid=1: thread exiting with uncaught exception (group=0x4189f2a0)
03-28 14:31:30.810: E/AndroidRuntime(26523): FATAL EXCEPTION: main
03-28 14:31:30.810: E/AndroidRuntime(26523): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cn/com.example.cn.ListView2}: java.lang.NullPointerException
03-28 14:31:30.810: E/AndroidRuntime(26523):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
03-28 14:31:30.810: E/AndroidRuntime(26523):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
03-28 14:31:30.810: E/AndroidRuntime(26523):    at android.app.ActivityThread.access$700(ActivityThread.java:140) 
```

结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:10:21.970

```
if (module == smodule){ 
```

应该

```
 if (module.equals(smodule)){ 
```

在比较字符串/对象时。使用起来`equals()`比`==`

`==`检查引用相等性。`equals()`检查对象是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:11:08.403

那是因为您不是在评估 的**值**，`String`而是在比较它的对象引用。

对于字符串值比较，使用`equals()`方法，如下所示：

```
if (module.equals(smodule)) { 
```

* * *

看到它`smodule`永远不会为空并且该模块可以为空，以避免`NullPointerException`宁愿这样做：

```
if (smodule.equals(module)) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:13:41.663

使用 module.equals(smodule),

**== 与 .equals**

*   == -> 是一个引用比较，即两个对象都指向同一个内存位置

*   equals() -> 计算对象中值的比较

*   它是 .equals(...) （第一个字母不大写）。

*   equals 只会比较它写来比较的内容，不多也不少。

*   如果 equals 没有被覆盖，则默认为 ==; 也就是说，如果两个变量都引用同一个对象，则返回 true。

*   如果您覆盖 equals ，请务必记住覆盖 hashCode 以免“违反合同”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:12:05.687

请在 Java 中使用 .equals 方法而不是 == 。已经在这里进行了大量的[讨论。](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:12:24.530

```
if (module == smodule) 
```

应该

```
if (module.equals(smodule)) 
```

`==`比较对象引用。

`equals()`比较对象内容。

# asp.net-mvc - 表单中的多个提交按钮均未出现在 ASP.Net MVC 方法的 FormCollection 中

> ID：15684033
> 
> 赞同：0
> 
> 时间：2013-03-28T14:09:45.133
> 
> 标签：asp.net-mvc

我在这里束手无策......我的表单有以下剃刀标记：

```
<input class="k-button" type="submit" value="Post" name="SubmitButton" />
<input class="k-button" type="submit" value="Save" name="SubmitButton" /> 
```

我遇到的问题是控制器操作方法的 FormCollection 参数在其键/值对中不包含 SubmitButton。

[我在这里](https://stackoverflow.com/questions/7093088/multiple-submit-buttons-in-mvc3-formcollection-has-no-key-value-for-input-type)遇到了这个帖子，似乎也有同样的问题。解决方案似乎是使用 ActionMethodSelectorAttribute 并删除 [Remote] 验证的使用。但是我确实需要我的 [Remote] 验证器，所以我不能选择删除它。没有其他解决方案，或者这是我必须处理的一些错误？

我正在考虑必须用一个保存按钮替换我对两个按钮的使用，然后添加一个“发布”复选框。然后在控制器操作中检查是否存在 Post KeyValue 对。但这不是想法。我更喜欢使用两个按钮。

编辑：按照伊戈尔的要求查看更多标记：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(false)
    <fieldset>
        <legend>Edit details for Client Warehouse Request </legend>
        @Html.HiddenFor(model => model.ModelObject.CustomerCode)
        @Html.HiddenFor(model => model.ModelObject.ReqNr)

        <div style="table-layout: initial;">
            <div class="columnDivider">
                <div class="editor-label">
                    @Html.LabelFor(model => model.ModelObject.ReqNr)
                </div>
                <div class="editor-field">
                    @Html.DisplayFor(model => model.ModelObject.ReqNr)
                </div>
                <div class="clear">
                </div>
                <div class="editor-label">
                    @Html.LabelFor(model => model.ModelObject.CreationDate)
                </div>
                ... many other fields following the above structure...
                <input class="k-button" type="submit" value="Post" name="SubmitButton" />
                <input class="k-button" type="submit" value="Save" name="SubmitButton" />
            </div> 
            <div class="columnDivider">
               ...some more fields
            </div>
            <div>
               Here I have a Kendo UI datagrid that gets submitted with the form
            </div>
      </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:19:08.557

尝试：

```
<input type="hidden" name="SubmitButtonValue" id="SubmitButtonValue" />

<input class="k-button" type="submit" value="Post" name="SubmitButton" />
<input class="k-button" type="submit" value="Save" name="SubmitButton" />

<script type="text/javascript">
  $(document).ready(function(){
    $(".k-button").click(function(){
      $("#SubmitButtonValue").val($(this).val());
    });
  });
</script> 
```

并检查`"SubmitButtonValue"`输入`FormCollection`。

# c# - 为什么我的 DBContext.SaveChanges() 方法会更改我正在添加的对象的值？

> ID：15684035
> 
> 赞同：1
> 
> 时间：2013-03-28T14:09:47.257
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, dbcontext

我正在向 DBContext 集合添加一个对象。在将它保存到集合之前，该对象中的变量都是正确的，在保存它之后，使用 VS2012 具有的调试工具查看 DBContext 集合内部，我注意到对象内部的所有值都发生了变化。以下是相关代码：

```
public class AdmissionsStoreEntities : DbContext
{
    public DbSet<Cart> Carts { get; set; }
    public DbSet<Order> Orders { get; set; }
    public DbSet<OrderDetail> OrderDetails { get; set; }
}

public void AddToCart(Product product)
{
    // Get the matching cart and product instances
    var cartItem = storeDB.Carts.SingleOrDefault(
        c => c.CartId == ShoppingCartId
        && c.ProductId == product.ProductId);

    if (cartItem == null)
    {
        // Create a new cart item if no cart item exists
        cartItem = new Cart
        {
            ProductId = product.ProductId,
            Product = product,
            CartId = ShoppingCartId,
            Count = 1,
            DateCreated = DateTime.Now
        };

        // storeDB is my AdmissionsStoreEntities() object.
        storeDB.Carts.Add(cartItem);
    }
    else
    {
        // If the item does exist in the cart, then add one to the quantity.
        cartItem.Count++;
    }

    // Save Changes (where the changes occur)
    storeDB.SaveChanges();
} 
```

因此，例如，在将 cartItem 对象保存到 storeDB.Carts 之前，其值如下：

*   产品 ID = 5
*   记录 ID = 0
*   计数 = 1
*   产品.ProductID = 5
*   Product.CategoryID = 5

保存更改后，cartItem 的值发生了变化（我还注意到传递给方法的原始对象的值发生了变化）。这是之后的值

*   产品 ID = 7
*   记录 ID = 9
*   计数 = 1
*   产品.ProductID = 7
*   产品.CategoryID = 7

为什么会这样？如果需要，我可以提供更多代码。

根据要求，这就是我获取 ShoppingCartId 的方式。

```
public ActionResult AddToCart(int id)
    {
        // Retrieve the product from our ViewData object that holds all current  data        in the SharePoint list
        var addedProduct = ((List<Product>)ViewData["AllProducts"]).Find(x => x.ProductId == id);

        // Get our cart instance.
        var cart = ShoppingCart.GetCart(this.HttpContext);

        // Add product to cart.
        cart.AddToCart(addedProduct);

        // Go back to the main store page for more shopping
        return RedirectToAction("Index");
    }

public static ShoppingCart GetCart(HttpContextBase context)
    {
        var cart = new ShoppingCart();
        cart.ShoppingCartId = cart.GetCartId(context);
        return cart;
    }

public string GetCartId(HttpContextBase context)
    {
        if (context.Session[CartSessionKey] == null)
        {
            if (!string.IsNullOrWhiteSpace(context.User.Identity.Name))
            {
                context.Session[CartSessionKey] = context.User.Identity.Name;
            }
            else
            {
                Guid tempCartId = Guid.NewGuid();

                context.Session[CartSessionKey] = tempCartId.ToString();
            }
        }
        return context.Session[CartSessionKey].ToString();
    } 
```

根据 Rob 的要求，我的 Cart 和 ShoppingCart 模型的链接位于以下链接：

*   [http://pastebin.com/M3rCscWE](http://pastebin.com/M3rCscWE)
*   [http://pastebin.com/RDGTwttP](http://pastebin.com/RDGTwttP)

Rob 提供的调试代码结果：

*   [http://pastebin.com/t7NF3kfZ](http://pastebin.com/t7NF3kfZ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:12:56.860

**编辑**

尝试删除`Product = product`：

```
if (cartItem == null)
    {
        // Create a new cart item if no cart item exists
        cartItem = new Cart
        {
            ProductId = product.ProductId,
            //Product = product,
            CartId = ShoppingCartId,
            Count = 1,
            DateCreated = DateTime.Now
        };

        // storeDB is my AdmissionsStoreEntities() object.
        storeDB.Carts.Add(cartItem);
    } 
```

设置 ProductId 应该可以解决问题，您不需要实际的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:44:19.013

我不确定，但我认为这可能是在有效的多线程环境（ASP.NET）中使用静态工厂方法的副作用。

这就是你所拥有的：

```
public static ShoppingCart GetCart(HttpContextBase context)
{
    var cart = new ShoppingCart();
    cart.ShoppingCartId = cart.GetCartId(context);
    return cart;
} 
```

根据`context`您传递的内容，您会为 cart.GetCartId(context) 获得不同的值，但由于这是一个静态方法，因此您只有该方法及其内部变量的一个副本。如果两个人同时调用它，您可以将值`cart.GetCartId()`分配给与预期不同的购物车。

在您的情况下，我将创建一个新的构造函数`ShoppingCart`并使用它而不是您的静态工厂方法：

```
public ShoppingCart(HttpContextBase context)
{
    ShoppingCartId = GetCartId(context);
} 
```

# android - 在ANDROID中调用数据库中的图像

> ID：15684037
> 
> 赞同：0
> 
> 时间：2013-03-28T14:09:55.673
> 
> 标签：android, database, image

我是初学者，请帮助我。我很混乱。我想使用数据库调用我的图像，但我不知道如何。请帮我。我的做法是这样的。当文本视图也发生变化时，我想自动更改图像视图的图像

```
 String question = Utility.capitalise(currentQ.getQuestion());
        TextView qImg = (TextView) findViewById(R.id.question);
        qImg.setText(question);
        ImageView yes = (ImageView) findViewById(R.id.imageQuestions);

        if (qImg.equals("aso"))
            // yes = R.drawable.aso;
            yes.setBackgroundResource(R.drawable.aso);

        else if (qImg.equals("Pusa"))
            yes.setBackgroundResource(R.drawable.pusa);
        else if (qImg.equals("Daga"))
            yes.setBackgroundResource(R.drawable.daga); 
```

question是我在数据库中的问题。它只是一个文本。当问题改变时，图像也在改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:18:32.650

好吧，我*认为*您想在 TextView 的文本更改时更改 ImageView 的内容。但是我不确定，所以如果我弄错了，请告诉我。

从您发布的代码来看，这似乎只会运行一次。相反，您应该将其移动到如下方法中：

```
public void updateImages() {
    String question = Utility.capitalise(currentQ.getQuestion());
    TextView qImg = (TextView) findViewById(R.id.question);
    qImg.setText(question);
    ImageView yes = (ImageView) findViewById(R.id.imageQuestions);

    if (qImg.equals("aso"))
        yes.setBackgroundResource(R.drawable.aso);
    else if (qImg.equals("Pusa"))
        yes.setBackgroundResource(R.drawable.pusa);
    else if (qImg.equals("Daga"))
        yes.setBackgroundResource(R.drawable.daga);
} 
```

现在只需`updateImages()`在您调用`setText()`TextView 后立即调用。

您还可以将 TextWatcher 分配给 TextView：

```
qImg.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {}
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}
    public void onTextChanged(CharSequence s, int start, int before, int count){
        YourActivity.this.updateImages();
    }
}); 
```

# c# - 检查Sqlite + C#中是否存在记录

> ID：15684039
> 
> 赞同：10
> 
> 时间：2013-03-28T14:09:58.360
> 
> 标签：c#, sqlite, c#-4.0

我正在尝试检查表中的记录是否已存在。

我怎么能那样做？

我已经写了以下代码：

```
string dbName = "Data Source=searchindex.db";
SQLiteConnection con = new SQLiteConnection(dbName);
con.Open();
SQLiteCommand cmd = new SQLiteCommand(con);

// If this sql request return false
cmd.CommandText = "SELECT rowid FROM wordlist WHERE word='word'"; 
cmd.ExecuteNonQuery();

// then add record in table
cmd.CommandText = "INSERT INTO wordlist(word) VALUES ('word')"; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T14:14:22.587

要检查该记录是否存在，您可以简化代码

```
cmd.CommandText = "SELECT count(*) FROM wordlist WHERE word='word'"; 
int count = Convert.ToInt32(cmd.ExecuteScalar());
if(count == 0)
{
    cmd.CommandText = "INSERT INTO wordlist(word) VALUES ('word')"; 
    cmd.ExecuteNonQuery();
} 
```

[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)将返回查询返回的第一行的第一列。
（链接是针对SqlServer的，但是对于SQLite来说是一样的，因为SQLiteCommand应该实现[IDbCommand](http://msdn.microsoft.com/en-us/library/bt2afddc.aspx)接口）

另一种使用方法如下

```
cmd.CommandText = "INSERT INTO wordlist (word) 
                   SELECT ('word')
                   WHERE NOT EXISTS 
                       (SELECT 1 FROM wordlist WHERE word = 'word');";
cmd.ExecuteNonQuery(); 
```

这甚至更好，因为您使用单个查询而不是两个查询（尽管本地数据库中的差异应该很小）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:49:32.430

```
 insert into wordlist(word)
        select 'foo' 
        where not exists ( select 1 from wordlist where word = 'foo') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-08T14:33:19.537

如果您使用的是**sqlite-net-pcl**，您可以编写以下内容。

我有几个表的基类，其中有一个 RowExists 方法。相关源代码如下：

```
public abstract class BaseSQLiteAccess
{
    protected SQLiteConnection _databaseConnection;
    protected String TableName { get; set; }

    //...

    protected bool RowExists(int id) 
    {
        bool exists = false;
        try
        {
            exists = _databaseConnection.ExecuteScalar<bool>("SELECT EXISTS(SELECT 1 FROM " + TableName + " WHERE ID=?)", id);
        }
        catch (Exception ex)
        {
            //Log database error
            exists = false;
        }
        return exists;
    }
} 
```

# visual-studio-2012 - durandal 优化器在 Visual Studio 中将其构建为后期构建过程时引用了错误的路径

> ID：15684040
> 
> 赞同：2
> 
> 时间：2013-03-28T14:10:01.083
> 
> 标签：visual-studio-2012, durandal

我在 Visual Studio 中设置了一个构建后事件，以使用 durandal 的优化器（它使用 nodejs）来构建 main-built.js 文件以进行生产。得到一个错误，说它找不到 main-built.js。我相信这是因为它没有正确引用我的项目。我的基本目录位于 c:\projects\myapp\myapp。它只是从 c:\projects\myapp 中寻找 durandal 目录。

有没有办法告诉它正确的目录？

这是一些输出。

```
if 'Release'=='Release' C:\Projects\myapp\myapp\\App\durandal\amd\optimizer.exe
  Using default base configuration.
  Configuring for deploy with almond (custom).
  {
    "name": "durandal/amd/almond-custom",
    "inlineText": true,
    "stubModules": [
      "durandal/amd/text"
    ],
    "paths": {
      "text": "durandal/amd/text"
    },
    "baseUrl": "C:\\Projects\\myapp",
    "mainConfigFile": "C:\\Projects\\myapp\\main.js",
    "include": [
      "packages/Durandal.1.1.0/content/App/durandal/app",
         ...etc...
    ],
    "exclude": [],
    "keepBuildDir": true,
    "optimize": "uglify2",
    "out": "C:\\Projects\\myapp\\main-built.js",
    "pragmas": {
      "build": true
    },
    "wrap": true,
    "insertRequire": [
      "main"
    ]
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:20:53.520

我发现即使它指向错误的位置，我也可以通过使用优化器上的 --source 属性来更改它。

修复方法是使用源属性并将其指向构建后事件中 durandal 文件的基本目录。

就我而言，它看起来像这样：

```
if '$(Configuration)'=='Release' $(ProjectDir)\App\durandal\amd\optimizer.exe --source c:\projects\myapp\myapp\app 
```

'app' 是 durandal 文件和文件夹的根目录。

# linux - 用 mailx 操作字符

> ID：15684049
> 
> 赞同：0
> 
> 时间：2013-03-28T14:10:40.080
> 
> 标签：linux, email, outlook, sendmail, mailx

我正在使用`mailx`

我想知道是否有可能，比如说，在某些单词下划线，或将某些单词加粗，或任何东西..

我有一个包含邮件内容的文件`content.txt`

`content.txt:`

`testing mail`

我正在使用这个`mailx`命令：

`mailx -s "testing" me@gmail.com < content.txt`

我想做点什么，所以`mail`收到的邮件里面的字会是这样的：**mail**

我找不到任何关于它的示例或教程，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:59:22.303

使用纯文本文件无法实现，但可以使用 HTML 编码`Content-Type: text/html`

# ios - 我无法设置自定义文本字段的文本

> ID：15684050
> 
> 赞同：1
> 
> 时间：2013-03-28T14:10:40.753
> 
> 标签：ios, objective-c, uitextfield

我正在尝试制作自定义 TextField (KSTextField)。我从 UITextField 继承了我的文本字段。正如您在下面看到的我的 KSTextField.h 文件。

```
#import <UIKit/UIKit.h>
#import <UIKit/UITextField.h>

@interface KSTextField : UITextField {}

@end 
```

在我的 KSTextField.mi 中尝试设置一个虚拟文本属性。但它不起作用。super.text 使用错误吗？

我的主要目的是制作一个仅允许我的项目所需的大写字符的自定义 UITextField。

```
#import "KSTextField.h"

@implementation KSTextField

- (id)init {
    self = [super init];

    super.text = @"help";
    return self;
}

- (void)textFieldDidChangeForKS:(KSTextField *)textField {
    self.autocapitalizationType = UITextAutocapitalizationTypeAllCharacters;
    NSString *textToUpper = [textField.text uppercaseString];
    [self setText:textToUpper];
}

@end 
```

还有我的 ViewController.h 在下面

```
#import <UIKit/UIKit.h>
#import "KSTextField.h"

@interface ViewController : UIViewController 

@property (nonatomic, copy) IBOutlet KSTextField *txtKsName;

@end 
```

这是我的 ViewController.m，我想设置我的 KSTextField.text

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.txtKsName = [[KSTextField alloc] init];

} 
```

代表事件不能解决我的问题。因为我稍后会添加更多功能。这将是我的自定义文本字段，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:12:35.433

答案是：你做错了！您不必子类化以仅允许大写字符。使用`UITextFieldDelegate`：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

使用该`textField:shouldChangeCharactersInRange:replacementString:`方法，您可以判断是否允许将键入的字符添加到框中。

尝试这样的事情：

```
- (BOOL)textField:(UITextField *)field shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)characters
{
    NSCharacterSet *blockedCharacters = [[[NSCharacterSet uppercaseLetterCharacterSet] invertedSet] retain];
    return ([characters rangeOfCharacterFromSet:blockedCharacters].location == NSNotFound);
} 
```

# spring - Spring MVC 图像或字符通用控制器

> ID：15684051
> 
> 赞同：0
> 
> 时间：2013-03-28T14:10:41.443
> 
> 标签：spring, http, model-view-controller, handler

我想用一种或两种对任何 GET 请求作出反应的方法来实现一个通用控制器。我试图将其简化到可以返回字节（图像等）或基于字符（XML、CSS）的程度，而无需映射每种内容类型并为每个内容类型放置一个 RequestMapping。

该应用程序必须是 abel 才能处理任何内容类型的任何请求。

我的调度程序当前设置为通过 / 处理所有请求。

到目前为止，我所做的几次尝试都会引发模棱两可的处理程序错误，或者映射无法工作到将文本作为 byte[] 或相反的方式发送回的地步。

有没有人做过这样的工作？

问候，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:41:56.053

你可以有一个这样的控制器

```
@Controller
public class YourController {
    @RequestMapping("/*")
    public String doLogic(HttpServletRequest request, HttpServletResponse response) throws Exception {
        OutputStream out = response.getOutputStream();
        out.write(/* some bytes, eg. from an image*/); // write the response yourself

        return null; // this is telling spring that this method handled the response itself
    }
} 
```

控制器映射到每个 url 和每个 http 方法。Spring为其处理程序方法提供了一组[可接受的返回类型。](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/htmlsingle/#mvc-ann-return-types)使用`String`，如果您返回`null`，Spring 假定您已经自己处理了响应。

正如@NilsH 评论的那样，您最好为此使用一个简单的servlet。

# c++ - 如何使用 fstream 指针对文件进行操作？

> ID：15684052
> 
> 赞同：2
> 
> 时间：2013-03-28T14:10:41.940
> 
> 标签：c++, fstream

我想使用一些抽象对流进行操作，因此我想使用 fstream* 而不是 ifstream 和 ofstream。我试图这样做，但会导致访问冲突：

```
char* text= "test"; 
fstream* o = new fstream(); 
o = &fstream("name.txt"); 
o->write(text, 4); 
o->close(); 
```

我该如何解决它，或使用其他想法？

我想在这种情况下使用指针（您可以在这里查看更多一般信息）[如何在 C++ 中实现我自己的 IO 文件 API](https://stackoverflow.com/questions/15681574/how-to-implement-my-own-io-file-api-in-c)

更改后现在看起来像这样：

```
class GIO_Persistent_File_System : public GIO_CORE
{
public:
GIO_Persistent_File_System(void);
int open(char*, int);
int close();
void write(char* s, int size);
void read(char* s, int size);
public:
~GIO_Persistent_File_System(void);

private:
fstream file;
};

int GIO_Persistent_File_System::open(char* path, int mode){
file.open(path);
return 0;
}

int GIO_Persistent_File_System::close(){
file.close();
return 0;
}

void GIO_Persistent_File_System::write(char* s, int size){
file.write(s, size);
return;
}

void GIO_Persistent_File_System::read(char* s, int size){
file.read(s, size);
return;
} 
```

主要的：

```
GIO_CORE* plik = new GIO_Persistent_File_System();
char* test = new char[10];
char* napis = "testgs";
plik->open("name.txt", OPEN_MODE);
plik->write(napis, 2);
//plik->read(test,2);
plik->close(); 
```

**虽然我找不到文件**，但这段代码似乎工作得很好。我检查并正确指向了当前目录（ProjectName/Debug）

我检查了它并将**fstream 更改为 ofstream 将正常工作**，我可以找到该文件。但是因为我想实现某种程度的抽象，**所以我想使用 fstream**。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T14:11:59.667

这段代码会给你一个错误，因为你不能像使用`&fstream("name.txt")`.

```
error: taking address of temporary 
```

另外，请注意，从字符串文字到 a 的转换`char*`已被弃用，并且在 C++11 中无效。使用 a`const char*`代替：

```
const char* text = "test"; 
```

尽管如此，让我们看看你*想要*做什么。首先，您正在动态分配`fstream`并初始化指向该对象的指针：

```
fstream* o = new fstream(); 
```

然后在下一行中，您创建一个临时对象，`fstream("name.txt")`然后获取其地址并将其分配给`o`（如我们所见，这会产生错误）。现在您将失去对动态分配的任何访问权限`fstream`，而是`o`指向一个现已销毁的临时对象。

取消引用该指针（使用`o->`）会给您带来未定义的行为。

你把这个复杂化了。您根本不需要动态分配`fstream`对象或使用指针。相反，请尝试：

```
fstream o("name.txt");
o.write(text, 4);
o.close(); 
```

* * *

使用更新的代码，问题在于您正在写入 0 个字节：

```
plik->write(napis, 0); 
```

也许你的意思是：

```
plik->write(napis, 6); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:13:41.530

几乎不需要*指向*. `fstream`只需这样做：

```
std::ofstream o("name.txt");
o.write(napis, 4);
o.close(); 
```

请注意，`o`当它超出范围时它也会关闭，因此您通常甚至不必调用`close()`.

# c# - 我应该使用 Power Collection 的 OrderedMultiDictionary 作为优先级队列吗？

> ID：15684056
> 
> 赞同：3
> 
> 时间：2013-03-28T14:10:55.340
> 
> 标签：c#, .net, data-structures, priority-queue

C# 不提供优先级队列的本机实现。

在 Stackoverflow 上，此类问题的常见答案是使用[Power Collections](http://powercollections.codeplex.com/)。

我应该继续这样做，还是有任何不利之处？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:10:55.340

Power Collections 确实提供了一些在 .NET 框架中（尚未）存在的常用数据结构的出色实现。虽然使用该选项并不可怕，但我想指出这种方法的一个重要缺陷。

OrderedMultiDictionary（以及所有其他 Power Collection 类）使用红黑树来创建键值对的有序包。对于优先级队列，RB 树往往是一种劣等的数据结构。我假设优先级值可以散列为整数。

原因很简单——字典可以在 O(1) 中立即跳转到特定的优先级值，其中可以使用专门的数据结构来存储该优先级的值（即队列）。

# 测试

为了检查我的声明，我编写了一个简单的基准，根据 3 个不同的想法比较优先级队列结构：

1.  Power Collections OrderedMultiDictionary
2.  排序字典
3.  字典

第二个选项使用[SortedDictionary](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)，它在内部被实现为 BST。第三个选项使用具有 O(1) 查找的简单字典。

我测试了不同数量的元素，如 Y 轴所示，以及不同数量的不同值，如 X 轴所示。特定组合的结果显示为 3x3 值矩阵。第一行指的是选项 1（OrdererdMultiDictionary，第二行指的是 SortedDictionary，第三行指的是 Dictionary。这 3 行中的每一个中的第一个值显示了将相应数量的值排入队列所花费的时间，第二个是枚举所花费的时间在所有值上，第三次再次将所有值出列。

**所有时间都是 log 2**。值 10 表示 2^10ms = 1s，尽管绝对值不重要。元素的数量增加了一倍，这意味着，如果结构的行为类似于 O(n)，则时间应该每次增加 1。

横向上，不同值的数量每列乘以 32。因此，第一列（一遍又一遍地插入相同的值）显示了保存这些值的内部数据结构的性能。

使用的机器是带有 16 GB 加 SSD 的 i7。

```
 |           1        |          32        |        1024        |       32768        |     1048576        |

       128
          | -4.9 / -4.3 /  n/a | -4.7 / -4.1 /  n/a | -4.8 / -2.9 /  n/a | -4.9 / -2.9 /  n/a | -4.9 / -2.9 /  n/a |
          | -7.5 / -6.1 / -5.3 | -6.5 / -5.7 / -5.1 | -4.7 / -4.9 / -4.3 | -4.6 / -4.7 / -4.2 | -4.6 / -4.8 / -4.2 |
          | -7.5 / -7.6 / -6.6 | -6.8 / -7.3 / -6.3 | -5.9 / -5.9 / -3.0 | -6.2 / -6.4 / -2.8 | -6.2 / -6.3 / -2.8 |

       256
          | -3.8 / -3.2 /  n/a | -3.7 / -3.1 /  n/a | -3.7 / -2.2 /  n/a | -3.8 / -1.8 /  n/a | -3.7 / -1.8 /  n/a |
          | -6.8 / -5.5 / -4.4 | -5.8 / -5.4 / -4.2 | -3.8 / -4.3 / -3.4 | -3.5 / -4.1 / -3.2 | -3.5 / -4.1 / -3.1 |
          | -6.6 / -6.9 / -5.7 | -6.1 / -6.7 / -5.7 | -5.5 / -5.3 / -1.8 | -5.3 / -5.0 / -0.9 | -5.3 / -5.6 / -1.0 |

       512
          | -2.7 / -2.1 /  n/a | -2.5 / -2.1 /  n/a | -2.5 / -1.5 /  n/a | -2.6 / -0.7 /  n/a | -2.6 / -0.7 /  n/a |
          | -5.9 / -5.2 / -3.4 | -4.9 / -5.0 / -3.3 | -3.2 / -4.2 / -2.6 | -2.4 / -3.2 / -2.1 | -2.3 / -3.2 / -2.0 |
          | -5.7 / -6.1 / -4.9 | -5.2 / -6.1 / -4.8 | -4.8 / -5.0 / -1.7 | -4.3 / -4.0 /  1.0 | -4.4 / -4.7 /  1.0 |

      1024
          | -1.6 / -1.0 /  n/a | -1.4 / -1.0 /  n/a | -1.4 / -0.7 /  n/a | -1.5 /  0.4 /  n/a | -1.5 /  0.3 /  n/a |
          | -4.9 / -4.7 / -2.4 | -4.1 / -4.5 / -2.3 | -2.6 / -4.0 / -1.8 | -1.2 / -2.3 / -1.0 | -1.2 / -2.3 / -0.9 |
          | -4.7 / -5.4 / -3.9 | -4.4 / -5.3 / -3.8 | -4.1 / -4.6 / -1.6 | -3.3 / -3.0 /  2.9 | -3.5 / -3.8 /  3.0 |

      2048
          | -0.4 /  0.1 /  n/a | -0.3 /  0.1 /  n/a | -0.3 /  0.3 /  n/a | -0.3 /  1.5 /  n/a | -0.5 /  1.4 /  n/a |
          | -4.0 / -4.1 / -1.4 | -3.2 / -4.0 / -1.3 | -1.7 / -3.5 / -0.9 | -0.2 / -1.4 /  0.1 | -0.2 / -1.3 /  0.1 |
          | -3.8 / -4.5 / -2.9 | -3.5 / -4.4 / -2.9 | -3.2 / -3.9 / -1.0 | -2.5 / -2.0 /  4.9 | -2.4 / -2.1 /  4.9 |

      4096
          |  0.7 /  1.2 /  n/a |  0.8 /  1.2 /  n/a |  0.9 /  1.3 /  n/a |  0.8 /  2.8 /  n/a |  0.6 /  2.9 /  n/a |
          | -3.0 / -3.2 / -0.4 | -2.2 / -3.3 / -0.3 | -0.8 / -3.0 /  0.1 |  0.9 / -0.4 /  1.1 |  0.9 / -0.2 /  1.2 |
          | -2.9 / -3.5 / -1.9 | -2.6 / -3.5 / -1.9 | -2.3 / -3.2 / -0.9 | -1.6 / -1.1 /  6.6 | -1.3 / -1.1 /  6.9 |

      8192
          |  1.8 /  2.8 /  n/a |  1.9 /  3.0 /  n/a |  2.0 /  3.0 /  n/a |  1.9 /  4.0 /  n/a |  1.8 /  4.1 /  n/a |
          | -2.0 / -2.4 /  0.6 | -1.3 / -2.4 /  0.7 |  0.1 / -2.2 /  1.1 |  1.8 /  0.4 /  2.1 |  2.1 /  0.9 /  2.3 |
          | -1.9 / -2.6 / -1.0 | -1.6 / -2.5 / -0.9 | -1.4 / -2.4 / -0.3 | -0.6 / -0.3 /  8.0 | -0.5 /  0.1 /  8.9 |

     16384
          |  2.9 /  3.7 /  n/a |  3.0 /  3.6 /  n/a |  3.1 /  3.8 /  n/a |  3.1 /  4.6 /  n/a |  3.0 /  5.2 /  n/a |
          | -1.0 / -1.5 /  1.6 | -0.3 / -1.5 /  1.7 |  1.1 / -1.4 /  2.0 |  2.4 /  0.7 /  2.9 |  3.2 /  1.9 /  3.6 |
          | -0.9 / -1.6 /  0.0 | -0.6 / -1.6 /  0.1 | -0.5 / -1.5 /  0.4 |  0.0 / -0.1 /  8.0 |  0.6 /  1.2 / 10.9 |

     32768
          |  4.0 /  5.0 /  n/a |  4.1 /  5.0 /  n/a |  4.3 /  5.0 /  n/a |  4.2 /  5.5 /  n/a |  4.1 /  6.4 /  n/a |
          | -0.1 / -0.5 /  2.6 |  0.7 / -0.5 /  2.7 |  2.0 / -0.5 /  3.1 |  3.1 /  0.9 /  3.8 |  4.3 /  3.0 /  4.8 |
          |  0.1 / -0.6 /  1.0 |  0.4 / -0.6 /  1.1 |  0.5 / -0.5 /  1.3 |  0.9 /  0.4 /  8.0 |  1.6 /  2.3 / 12.9 |

     65536
          |  5.2 /  6.6 /  n/a |  5.4 /  6.4 /  n/a |  5.5 /  6.4 /  n/a |  5.5 /  6.8 /  n/a |  5.4 /  7.4 /  n/a |
          |  1.0 /  0.4 /  3.6 |  1.8 /  0.5 /  3.7 |  3.0 /  0.4 /  4.1 |  4.2 /  1.9 /  4.9 |  5.5 /  4.2 /  6.0 |
          |  1.1 /  0.4 /  2.0 |  1.4 /  0.4 /  2.1 |  1.5 /  0.5 /  2.4 |  2.0 /  1.4 /  9.8 |  3.2 /  3.4 / 14.8 |

    131072
          |  6.5 /  7.8 /  n/a |  6.6 /  7.6 /  n/a |  6.8 /  7.4 /  n/a |  6.9 /  7.7 /  n/a |  6.8 /  8.6 /  n/a |
          |  2.0 /  1.4 /  4.6 |  2.9 /  1.4 /  4.8 |  4.1 /  1.5 /  5.2 |  5.2 /  2.4 /  5.8 |  6.8 /  5.4 /  7.0 |
          |  2.1 /  1.4 /  3.1 |  2.4 /  1.4 /  3.1 |  2.5 /  1.5 /  3.3 |  3.0 /  2.0 /  9.9 |  4.4 /  4.6 / 16.6 |

    262144
          |  7.5 /  8.9 /  n/a |  7.6 /  8.9 /  n/a |  7.8 /  8.6 /  n/a |  8.0 /  8.8 /  n/a |  8.2 /  9.6 /  n/a |
          |  3.0 /  2.4 /  5.6 |  3.9 /  2.4 /  5.7 |  5.1 /  2.4 /  6.1 |  6.1 /  2.9 /  6.7 |  8.1 /  6.4 /  8.1 |
          |  3.1 /  2.5 /  4.1 |  3.3 /  2.4 /  4.1 |  3.5 /  2.4 /  4.2 |  4.7 /  3.6 /  9.9 |  5.7 /  5.8 / 18.2 |

    524288
          |  8.6 / 10.0 /  n/a |  8.8 / 10.0 /  n/a |  9.0 /  9.6 /  n/a |  9.4 /  9.7 /  n/a |  9.3 / 10.4 /  n/a |
          |  4.0 /  3.4 /  6.6 |  4.9 /  3.4 /  6.7 |  6.1 /  3.4 /  7.1 |  7.0 /  3.7 /  7.6 |  8.9 /  7.0 /  8.8 |
          |  4.1 /  3.5 /  5.0 |  4.4 /  3.4 /  5.1 |  4.5 /  3.4 /  5.2 |  4.9 /  3.6 /  9.9 |  6.8 /  6.5 / 19.2 |

   1048576
          |  9.7 / 11.0 /  n/a |  9.9 / 11.1 /  n/a | 10.2 / 10.7 /  n/a | 10.7 / 10.7 /  n/a | 10.7 / 11.2 /  n/a |
          |  5.0 /  4.4 /  7.5 |  5.9 /  4.4 /  7.7 |  7.1 /  4.4 /  8.1 |  8.0 /  4.6 /  8.5 |  9.7 /  7.3 /  9.8 |
          |  5.1 /  4.4 /  n/a |  5.3 /  4.4 /  n/a |  5.5 /  4.4 /  n/a |  5.9 /  4.6 /  n/a |  7.7 /  6.8 /  n/a |

   2097152
          | 10.8 / 12.0 /  n/a | 11.0 / 12.1 /  n/a | 11.3 / 11.8 /  n/a | 12.1 / 11.8 /  n/a | 12.0 / 12.1 /  n/a |
          |  6.0 /  5.4 /  8.5 |  7.0 /  5.4 /  8.7 |  8.1 /  5.4 /  9.1 |  9.0 /  5.6 /  9.5 | 10.6 /  7.6 / 10.3 |
          |  6.1 /  5.4 /  n/a |  6.4 /  5.4 /  n/a |  6.6 /  5.4 /  n/a |  6.9 /  5.6 /  n/a |  8.8 /  7.2 /  n/a |

   4194304
          | 11.9 / 13.0 /  n/a | 12.0 / 13.1 /  n/a | 12.5 / 12.9 /  n/a | 13.3 / 12.8 /  n/a | 13.2 / 13.0 /  n/a |
          |  7.0 /  6.4 /  9.5 |  8.0 /  6.4 /  9.7 |  9.2 /  6.4 / 10.1 | 10.1 /  6.5 / 10.5 | 11.6 /  8.0 / 11.1 |
          |  7.1 /  6.4 /  n/a |  7.3 /  6.4 /  n/a |  7.6 /  6.4 /  n/a |  8.0 /  6.5 /  n/a |  9.9 /  7.7 /  n/a |

   8388608
          |  n/a /  n/a /  n/a |  n/a /  n/a /  n/a | 13.7 / 14.1 /  n/a | 14.5 / 13.8 /  n/a | 14.4 / 13.9 /  n/a |
          |  8.0 /  7.4 / 10.5 |  9.0 /  7.4 / 10.7 | 10.2 /  7.4 / 11.1 | 11.1 /  7.5 / 11.5 | 12.6 /  8.5 / 12.0 |
          |  8.1 /  7.4 /  n/a |  8.4 /  7.4 /  n/a |  8.6 /  7.4 /  n/a |  9.1 /  7.5 /  n/a | 10.8 /  8.3 /  n/a |

 16777216
         |  n/a /  n/a /  n/a |  n/a /  n/a /  n/a |  n/a /  n/a /  n/a |  n/a /  n/a /  n/a |  n/a /  n/a /  n/a |
         |  9.0 /  8.4 / 11.6 | 10.0 /  8.4 / 11.7 | 11.2 /  8.4 / 12.1 | 12.2 /  8.4 / 12.5 | 13.6 /  9.1 / 12.9 |
         |  9.1 /  8.4 /  n/a |  9.3 /  8.4 /  n/a |  9.6 /  8.4 /  n/a | 10.1 /  8.4 /  n/a | 11.9 /  9.0 /  n/a | 
```

# 测试的缺陷

所有小于 100 个值的行都没有显示，因为它们没有实际意义，可以被认为是热身。

所有测试只执行一次，没有进行平滑处理，因此任何方向的尖峰都是可能的。超过 10000 的值的测试运行了相当长的时间，以至少排除短尖峰。我将整个基准测试重复了几次，差异在 10% 以内。

数据结构尚未使用它们可能期望保存的适当数量的元素进行初始化。这部分是由于较大集合的内存消耗。

OMD Dequeuing 没有值，因为我还没有找到合理的方法来实现它。我将不胜感激这方面的任何帮助。

# 结果

对于较大的值，结果非常一致。

1.  对于较小的桶数（不同值的数量），基于选项 2 或 3 的方法在排队时比 OMD 快几倍，在枚举时甚至更快。出队不存在比较。
2.  对于较大的桶数，OMD 不会减慢，而选项 2+3 会减慢（因子 10）。最终，选项 2 在入队时稍差，但在枚举时仍然非常快，选项 3（简单字典）胜过两者。
3.  然而，选项 3 在大桶数出列时变得很糟糕，到了确定不可用的地步。这是由于对 SortedDictionary 中不存在的最小键的永久搜索。

关于内存使用，OMD 使用的内存比选项 2 和 3 多几倍，并且持续抛出超过 500 万个值的 OutOfMemory 异常。选项 3 再次使用的内存明显少于选项 2。每次测试后，都会强制执行完整的垃圾回收。

总之，我建议使用队列排序字典，因为它往往与 Power Collections 中使用的 RB-tree 方法一样快，同时使用更少的内存。如果不同的优先级值很少，则优势会增加。当然，这仅在您处理大量数据时才重要。

# 源代码

添加 SortedDictionary 的源代码。更多信息请访问[http://pastebin.com/J4snVYzb](http://pastebin.com/J4snVYzb)

```
public class PriorityQueue<TK, TV>
{
    private readonly SortedDictionary<TK, Queue<TV>> _D = new SortedDictionary<TK, Queue<TV>> ();

    public void Enqueue (TK key, TV value)
    {
        Queue<TV> list;
        if (!_D.TryGetValue (key, out list)) {
            list = new Queue<TV> ();
            _D.Add (key, list);
        }
        list.Enqueue (value);
        Count++;
    }

    public int Count
    {
        get;
        private set;
    }

    public TV Dequeue ()
    {
        var first = _D.First ();
        var item = first.Value.Dequeue ();
        if (!first.Value.Any ()) {
            _D.Remove (first.Key);
        }
        return item;
    }

    public IEnumerable<TV> Values
    {
        get
        {
            var keys = _D.Keys.ToArray ();
            foreach (var key in keys) {
                foreach (var item in _D[key]) {
                    yield return item;
                }
            }
        }
    }
} 
```

# php - php mysql 选择查询

> ID：15684063
> 
> 赞同：0
> 
> 时间：2013-03-28T14:11:17.433
> 
> 标签：php, mysql, drop-down-menu

我有多个下拉列表框，其中包含来自数据库的数据，所以我想根据第一个的部分选择第二个下拉列表第一个
表有这三个字段 **District_id（主键），district_name，Governate_id（外键）** 第二个表有这三个字段 **村庄_id（主键），村庄名，区ID（外键）**

所以我希望用户首先选择地区框，然后根据选择的地区名称具有 id 我希望第二个框显示所有具有村庄.district_id = District.district_id 的村庄名称。谁能帮我？？我正在选择独立于另一个的每个表，但我需要它基于第一个

# 代码块

```
function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}
// function for select by village
function villageQuery(){

//$villageData = mysql_query("SELECT * FROM village");

  $villageData = mysql_query("SELECT village_name FROM village WHERE district_id = ('SELECT district_id FROM districts')") or die (mysql_error());

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:19:28.303

您需要使用服务器端调用并根据第一个下拉列表的选择填充第二个下拉列表。

[php + populate 选择另一个下拉菜单](https://stackoverflow.com/questions/15129695/php-populate-drop-down-menu-on-the-selection-of-another?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T12:06:19.563

### 这里我描述了两种类型的选择查询

```
$query = "select * from table_name"; 
```

上面一个选择整个表

```
$query = "select * from table_name where id = 1"; 
```

以上仅选择特定记录

# sql - SQL Server 2008 R2 查询需要指导

> ID：15684073
> 
> 赞同：1
> 
> 时间：2013-03-28T14:11:50.317
> 
> 标签：sql, sql-server, select, sql-server-2008-r2

```
SELECT 
    A.First_Name, b.First_Name, A.DOB, B.DOB, A.Token, B.Token, 
    DATEDIFF(YEAR, A.DOB, B.DOB)                        -
    (CASE
       WHEN DATEADD(YY, DATEDIFF(YEAR, A.DOB, B.DOB), A.DOB) > Getdate() 
         THEN 1                                        
         ELSE 0 END) 'Age Difference' 
FROM 
   Boys_details A , Girls_details B
WHERE
   a.Cast = 'brahmin'
   AND A.City = 'pune'
   AND a.Height >= B.Height
   AND a.Salary >= B.salary 
```

输出：

```
Nilesh  Ruchita 1973-01-21  1964-12-01  9   89  -9
Nilesh  Smitha  1973-01-21  1976-07-30  9   77  3
Nilesh  Richa   1973-01-21  1974-04-21  9   2   1 
```

我不想在 output 中出现负值，但它仍然是作为身高和薪水之类的条件之一令人满意的，但如果年龄大了，它们就失败了。所以失败的人不想在o / p中显示它们请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:15:27.120

在子查询中怎么样？

```
SELECT  *
FROM
        (
            SELECT  A.First_Name,
                    b.First_Name,
                    A.DOB,
                    B.DOB,
                    A.Token,
                    B.Token, 
                    DATEDIFF(YEAR,A.DOB,B.DOB) -
                        (CASE WHEN DATEADD(YY,DATEDIFF(YEAR,A.DOB,B.DOB),A.DOB)> Getdate() 
                                THEN 1                                        
                                ELSE 0 
                        END) AS [Age Difference] 
            from    Boys_details A , 
                    Girls_details B
            where   a.Cast='brahmin' and 
                    A.City='pune' and 
                    a.Height >= B.Height and 
                    a.Salary>=B.salary
        ) s
WHERE [Age Difference] >= 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:48:50.837

只需将您的 case 语句添加到您的 where 子句中：

```
SELECT 
    A.First_Name, b.First_Name, A.DOB, B.DOB, A.Token, B.Token, 
    DATEDIFF(YEAR, A.DOB, B.DOB)                        -
    (CASE
       WHEN DATEADD(YY, DATEDIFF(YEAR, A.DOB, B.DOB), A.DOB) > Getdate() 
         THEN 1                                        
         ELSE 0 END) 'Age Difference' 
FROM 
  Boys_details A , Girls_details B
WHERE
   a.Cast = 'brahmin'
   AND A.City = 'pune'
   AND a.Height >= B.Height
   AND a.Salary >= B.salary
   AND (CASE WHEN DATEADD(YY, DATEDIFF(YEAR, A.DOB, B.DOB), A.DOB) > Getdate() 
     THEN 1                                        
     ELSE 0 END) => 0 
```

# c# - 使用实体框架获取

> ID：15684077
> 
> 赞同：2
> 
> 时间：2013-03-28T14:11:55.510
> 
> 标签：c#, entity-framework

[我只是从这里](http://www.prideparrot.com/blog/archive/2012/12/how_to_create_a_simple_blog_part1#story2)复制并发布以下方法，这是定义：

```
public IList<Post> PostsForCategory(string categorySlug, int pageNo, int pageSize)
{
    var query = _session.Query<Post>()
                    .Where(p => p.Published && p.Category.UrlSlug.Equals(categorySlug))
                    .OrderByDescending(p => p.PostedOn)
                    .Skip(pageNo * pageSize)
                    .Take(pageSize)
                    .Fetch(p => p.Category);

    query.FetchMany(p => p.Tags).ToFuture();

    return query.ToFuture().ToList();
} 
```

但是，我使用的是 Entity 框架而不是 NHibernate，但是 EntityFramework 没有任何定义`Fetch`or `FetchMany`！如何使用实体框架做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:14:14.160

您可以通过以下`Include`方法执行此操作：http: [//msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

注意，`Include`是一个扩展方法，所以你必须`System.Data.Entity`在编译之前添加到你的 using 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T19:18:58.123

我使用 NHibernate 将 MVC 中的完整项目迁移到实体框架。如果您在项目中有良好的逻辑并牢记下一次转换，我相信您不会有问题。

```
ISession ==> DbContext
session.QueryOver<T> ==> dbContext.Set<T>
session.Query<T> ==> dbContext.Set<T>
Query<T>.Fetch() ==> Set<T>.Include()
session.CreateSQLQuery ==> dbContext.Database.SqlQuery
ClassMapping<T> ==> EntityTypeConfiguration<T> 
```

# iphone - 将其添加到地图时使用自定义注释

> ID：15684080
> 
> 赞同：0
> 
> 时间：2013-03-28T14:12:01.713
> 
> 标签：iphone, ios, objective-c, mapkit

将自定义注释类添加到地图视图时，我无法访问它。我的自定义类正常工作，但是当我将它添加到地图时，我不确定如何通过此委托访问自定义注释：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
```

我已经尝试在网上寻找并没有找到任何东西。任何帮助都会很棒。

它的名字是这样的：

```
CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(shops.latitude, shops.longitude);
    AnnotationForId *shop = [[AnnotationForId alloc] initWithCoordinate:coords];
    //[[CLLocationCoordinate2DMake(shops.latitude, shops.longtitude)]];
    shop.title = shops.name;
    shop.subtitle = @"Coffee Shop";
    shop.shopId = shops.id;
    [map addAnnotation:shop]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:23:01.823

**这是关于如何创建自定义 AnnotationView 的简单示例。**

创建自定义`AnnotationView`：

```
#import <MapKit/MapKit.h>

@interface AnnotationView : MKPlacemark

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

// you can put here any controllers that you want. (such like UIImage, UIView,...etc)

@end 
```

而在`.m file`

```
#import "AnnotationView.h"

@implementation AnnotationView

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}

@end 
```

// 使用注释添加`#import "AnnotationView.h"`你的相关`.m file`：

```
CLLocationCoordinate2D pCoordinate ;
pCoordinate.latitude = LatValue;
pCoordinate.longitude = LanValue;

// Create Obj Of  AnnotationView class  

AnnotationView *annotation = [[AnnotationView alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

    annotation.title = @"I m Here";
    annotation.subtitle = @"This is Sub Tiitle";

[self.mapView addAnnotation:annotation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:46:32.573

测试注释以查看它是否与您的自定义类相同：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *mkav = nil;

    if ([annotation isKindOfClass:[AnnotationForId class]])
    {
        // This should be safe now.
        AnnotationForId *aid = annotation;
        // Whatever you wanted to add, including making your own view.
    }

    return mkav;
} 
```

# android - Android：通过Service执行http请求

> ID：15684081
> 
> 赞同：0
> 
> 时间：2013-03-28T14:12:01.687
> 
> 标签：android, android-activity

在我旋转屏幕并收到来自 AsyncTask 的回调以更新我对片段的视图之后，我在获取 Activity(Nullpointerexception) 时遇到了麻烦。如果我不改变方向，那么一切都很好（但不是一直，有时会出现这个错误）

我的主要活动：

```
public class MainActivity extends SherlockFragmentActivity  {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pager_layout);

    fm = getSupportFragmentManager();
    fm.addOnBackStackChangedListener(this);

    session = new SessionManager(getApplicationContext());
    if (session.isAuthorizated()) {

        disableTabs();
        FragmentTransaction ft = fm.beginTransaction();

        if (session.termsAndConditions()) {
            ft.replace(android.R.id.content, new TermsAndConditionsFragment(), "terms-and-conditions").commit();
        } 
        }
    } else {
        enableTabs();

        mTabsAdapter = new TabsAdapter(this, mViewPager);
        mTabsAdapter.addTab(actionBar.newTab().setText("Log in"), LoginFragment.class, null);
        mTabsAdapter.addTab(actionBar.newTab().setText("Calculator"), CalculatorFragment.class, null);

    }
} 
```

那是我的片段：

```
public class TermsAndConditionsFragment extends SherlockFragment implements OnClickListener, OnTouchListener, OnEditorActionListener, ValueSelectedListener, AsyncUpdateViewsListener {
private static final String TAG = "TermsAndConditionsFragment";

private TermsAndConditionsManager termsAndConditionsM;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    prepareData();
}

public void prepareData() {
    if (getSherlockActivity() == null)
        Log.d(TAG, "Activity is null");
    termsAndConditionsM = new TermsAndConditionsManager(getSherlockActivity().getApplicationContext());
    termsAndConditions = termsAndConditionsM.getTermsAndConditions();
    ...
    // some stuff
    ...
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    rootView = init(inflater, container);
    return rootView;
}

private View init(LayoutInflater inflater, ViewGroup container) {
    rootView = inflater.inflate(R.layout.fragment_terms_and_conditions, container, false);

    //bla bla bla

    return rootView;
}

public void updateTermsAndConditionsView() {
    //update views here
}

@Override
public void onClick(View v) {
    ft = fm.beginTransaction();
    switch (v.getId()) {
        case R.id.etHowMuch:
            d = NumberPaymentsPickerFragment.newInstance(getSherlockActivity(), Integer.valueOf(howMuch.replace("£", "")), 0);
            d.setValueSelectedListener(this);
            d.show(getFragmentManager(), Const.HOW_MUCH);
            break;
  }
}

@Override
public void onValueSelected() {
    Bundle args = new Bundle();

    ...

    ExecuteServerTaskBackground task = new ExecuteServerTaskBackground(getSherlockActivity());
    task.setAsyncUpdateViewsListener(this);
    task.action = ServerAPI.GET_TERMS_AND_CONDITIONS;
    task.args = args;
    task.execute();
}

@Override
public void onUpdateViews() {
    prepareData();
    updateTermsAndConditionsView();
}
} 
```

我的带有回调的 AsyncTask：

```
public class ExecuteServerTaskBackground extends AsyncTask<Void, Void, Void> {

private static final String TAG = "ExecuteServerTaskBackground";

Activity mActivity;
Context mContext;
private AsyncUpdateViewsListener callback;

public ExecuteServerTaskBackground(Activity activity) {
    this.mActivity = activity;
    this.mContext = activity.getApplicationContext();
}

public void setAsyncUpdateViewsListener(AsyncUpdateViewsListener listener) {
    callback = listener;
}

@Override
protected Void doInBackground(Void... params) {

    ServerAPI server = new ServerAPI(mContext);
    if (!args.isEmpty())
        msg = server.serverRequest(action, args);
    else
        msg = server.serverRequest(action, null);
    return null;
}

@Override
protected void onPostExecute(Void result) {
    super.onPostExecute(result);
    callback.onUpdateViews();
}
} 
```

为什么会这样？如果我改变方向，如何正确获得活动。

**编辑：** 据我了解，由于 asyctask 和 Activity 之间的引用错误，在方向更改和 asynctask 执行后会出现空指针。重新创建的活动`t have this reference that`不是为什么当我收到回调时我使用了不再存在的错误活动引用。但是如何保存当前的活动参考？

**编辑：** 我决定尝试在整个服务过程中实现我的任务，这就是我所做的。活动：

公共类 MainFragment 扩展 Fragment 实现 ServiceExecutorListener，OnClickListener {

```
private static final String TAG = MainFragment.class.getName();

Button btnSend, btnCheck;
TextView serviceStatus;
Intent intent;
Boolean bound = false;
ServiceConnection sConn;
RESTService service;
ProgressDialog pd = new ProgressDialog();

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);
    intent = new Intent(getActivity(), RESTService.class);
    getActivity().startService(intent);
    sConn = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName name, IBinder binder) {
            Log.d(TAG, "MainFragment onServiceConnected");
            service = ((RESTService.MyBinder) binder).getService();
            service.registerListener(MainFragment.this);
            if (service.taskIsDone())
                serviceStatus.setText(service.getResult());
            bound = true;
        }

        public void onServiceDisconnected(ComponentName name) {
            Log.d(TAG, "MainFragment onServiceDisconnected");
            bound = false;
        }

    };
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.main_fragment, container, false);
    serviceStatus = (TextView) rootView.findViewById(R.id.tvServiceStatusValue);
    btnSend = (Button) rootView.findViewById(R.id.btnSend);
    btnCheck = (Button) rootView.findViewById(R.id.btnCheck);

    btnSend.setOnClickListener(this);
    btnCheck.setOnClickListener(this);
    return rootView;
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.btnSend:
            pd.show(getFragmentManager(), "ProgressDialog");
            service.run(7);
            service.run(2);
            service.run(4);
            break;
        case R.id.btnCheck:
            if (service != null)
                serviceStatus.setText(String.valueOf(service.taskIsDone()) + service.getTasksCount());
            break;
    }
}

@Override
public void onStart() {
    super.onStart();
    Log.d(TAG, "Bind service");
    getActivity().bindService(intent, sConn, 0);
}

@Override
public void onPause() {
    super.onDestroy();
    Log.d(TAG, "onDestroy: Unbind service");
    if (!bound)
        return;
    getActivity().unbindService(sConn);
    service.unregisterListener(this);
    bound = false;
}

@Override
public void onComplete(String result) {
    Log.d(TAG, "Task Completed");
    pd.dismiss();
    serviceStatus.setText(result);
}
} 
```

对话：

```
public class ProgressDialog extends DialogFragment implements OnClickListener {

final String TAG = ProgressDialog.class.getName();

public Dialog onCreateDialog(Bundle savedInstanceState) {
    setRetainInstance(true);
    AlertDialog.Builder adb = new AlertDialog.Builder(getActivity())
            .setTitle("Title!")
            .setPositiveButton(R.string.yes, this)
            .setNegativeButton(R.string.no, this)
            .setNeutralButton(R.string.maybe, this)
            .setCancelable(false)
            .setMessage(R.string.message_text)
            .setOnKeyListener(new OnKeyListener() {
                @Override
                public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                    return true;
                }
            });
    return adb.create();
}

public void onClick(DialogInterface dialog, int which) {
    int i = 0;
    switch (which) {
        case Dialog.BUTTON_POSITIVE:
            i = R.string.yes;
            break;
        case Dialog.BUTTON_NEGATIVE:
            i = R.string.no;
            break;
        case Dialog.BUTTON_NEUTRAL:
            i = R.string.maybe;
            break;
    }
    if (i > 0)
        Log.d(TAG, "Dialog 2: " + getResources().getString(i));
}

public void onDismiss(DialogInterface dialog) {
    Log.d(TAG, "Dialog 2: onDismiss");
    // Fix to avoid simple dialog dismiss in orientation change
    if ((getDialog() != null) && getRetainInstance())
        getDialog().setDismissMessage(null);

    super.onDestroyView();
}

public void onCancel(DialogInterface dialog) {
    super.onCancel(dialog);
    Log.d(TAG, "Dialog 2: onCancel");
}
} 
```

服务：

```
public class RESTService extends Service {

final String TAG = RESTService.class.getName();

MyBinder binder = new MyBinder();
ArrayList<ServiceExecutorListener> listeners = new ArrayList<ServiceExecutorListener>();
Handler h = new Handler();
RequestManager mRequest;
ExecutorService es;
Object obj;
int time;
StringBuilder builder;
String result = null;

public void onCreate() {
    super.onCreate();
    Log.d(TAG, "RESTService onCreate");
    es = Executors.newFixedThreadPool(1);
    obj = new Object();
    builder = new StringBuilder();
}

public void run(int time) {
    RunRequest rr = new RunRequest(time);
    es.execute(rr);
}

class RunRequest implements Runnable {

    int time;

    public RunRequest(int time) {
        this.time = time;
        Log.d(TAG, "RunRequest create");
    }

    public void run() {
        Log.d(TAG, "RunRequest start, time = " + time);
        try {
            TimeUnit.SECONDS.sleep(time);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        try {
            Log.d(TAG, "RunRequest obj = " + obj.getClass());
        } catch (NullPointerException e) {
            Log.d(TAG, "RunRequest error, null pointer");
        }
        builder.append("result " + time + ", ");
        result = builder.toString();
        sendCallback();
    }
}

private void sendCallback() {
    h.post(new Runnable() {
        @Override
        public void run() {
            for (ServiceExecutorListener listener : listeners)
                listener.onComplete();
        }
    });
}

public boolean taskIsDone() {
    if (result != null)
        return true;
    return false;
}

public String getResult() {
    return result;
}

public void registerListener(ServiceExecutorListener listener) {
    listeners.add(listener);
}

public void unregisterListener(ServiceExecutorListener listener) {
    listeners.remove(listener);
}

public IBinder onBind(Intent intent) {
    Log.d(TAG, "RESTService onBind");
    return binder;
}

public boolean onUnbind(Intent intent) {
    Log.d(TAG, "RESTService onUnbind");
    return true;
}

public class MyBinder extends Binder {
    public RESTService getService() {
        return RESTService.this;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:12:28.557

正如您在编辑中提到的那样，电流`Activity`在方向变化时被破坏并重新创建。

```
But how can I save current activity reference? 
```

你不应该。以前`Activity`的不再有效。这不仅会导致`NPE`s 还会导致内存泄漏，因为 s`AsyncTask`可能会持有对 old 的引用，甚至`Activity`可能永远存在。

解决方案是使用[Loaders](http://developer.android.com/guide/components/loaders.html)。

# ios - IOS：AOT提前，是什么？

> ID：15684085
> 
> 赞同：7
> 
> 时间：2013-03-28T14:12:14.670
> 
> 标签：ios, xamarin, xamarin.ios

我读过一篇来自 Xamarin 的文章，偶然发现了一个特定的计算机科学词：Ahead of Time。根据一些谷歌搜索结果，这个 AOT 不允许在运行时生成代码。这是否意味着，它不支持动态的东西？

我知道这个问题可能很愚蠢，我对 IOS 的了解为 0，希望能从这里得到一些答案。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:53:59.783

首先，动态的定义是什么？对于公众来说，动态代码意味着应用程序可以在运行时更改功能。对于 iOS 平台，对二进制文件进行签名以防止恶意软件。而且 Apple 不喜欢可以在运行时加载功能的应用程序。

**[提前 (AOT) 编译器](http://en.wikipedia.org/wiki/AOT_compiler)**与动态代码本身无关。它与**[即时编译 (JIT) 的](http://en.wikipedia.org/wiki/Just-in-time_compilation)**中间语言有关。中间语言最大的例子是Java字节码；编译一次，随处运行。当 Java 应用程序正在执行时，编译后的代码是本地机器代码的 JIT。AOT 编译器只是提前做，以节省时间。

对于 iOS 平台，Xcode 将 Objective-C 编译为设备的本机二进制文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-03T00:43:32.697

另一种看待这个问题的方法是举个例子......

在 .Net 中，您可以使用[Reflection.Emit](https://msdn.microsoft.com/en-us/library/3y322t50(v=vs.100).aspx)命名空间在运行时生成和编译代码。

例如，您可以创建一个带有接受 C# 的文本框的“IDE”。当您单击一个按钮时，.Net 框架可以将 C# 编译为动态加载的自定义库或作为新进程启动的成熟可执行文件。

当与 System.Reflection 命名空间的其余部分结合使用时，这非常强大。您可以在运行时检查对象并根据您喜欢的任何标准编译自定义代码。

也就是说......在大多数情况下，问题通常超过好处。主要是，这是一个巨大的安全问题，尤其是在消费设备上运行时。

可以创建一个没有任何接近恶意代码的应用程序，让苹果对其进行审核，然后让应用程序从您的网络服务器下载代码，编译并执行它。这个新代码不会被审计......

在消费者应用程序中这样做确实没有充分的理由。

# scala - 将 Akka 配置与我的配置相结合

> ID：15684089
> 
> 赞同：4
> 
> 时间：2013-03-28T14:12:27.343
> 
> 标签：scala, akka

我正在编写一个 Akka 微内核应用程序，并希望它使用`java.net.InetAddress.getLocalHost.getHostAddress`. 如果此调用成功，那么我将使用属性的地址`akka.remote.netty.hostname`，但如果不是，我将回退到`application.config`.

`System.setProperty("akka.remote.netty.hostname", addr)`如[Akka docs](http://doc.akka.io/docs/akka/2.2-M2/cluster/cluster-usage-scala.html)`SimpleClusterApp`中所示，这可以正常工作。

当我想首先检查是否在 application.config 中设置了其他键时，问题就来了。例如，以下将无法覆盖主机地址，因为（我认为）初始调用`ConfigFactory.load()`意味着后面的`System.setProperty`which 无效。

```
if(ConfigFactory.load().getBoolean("my-app.do-something")){
    //Do some stuff, then change the host address
    Try{
        java.net.InetAddress.getLocalHost.getHostAddress
    } match {
        case Success(addr) => 
            System.setProperty("akka.remote.netty.hostname", addr)
        case Failure(_) => 
    }
} 
```

我必须使用单独的配置文件来配置我自己的应用程序，还是有其他方法可以解决上述问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:05:28.180

称呼

```
ConfigFactory.invalidateCaches() 
```

设置属性后。这是一个很好的单元测试技巧。

或者，使用解析的配置片段，`fallbackTo`例如：

```
def remoteConfig(hostname: String, port: Int, commonConfig: Config): Config = {
  val configStr = s"""
    akka.remote.netty.hostname = $hostname
    akka.remote.netty.port = $port
  """
  ConfigFactory.parseString(configStr).withFallback(commonConfig)
}

val baseConfig = ConfigFactory.load()
val akkaConfig = if (!baseConfig.getBoolean("my-app.do-something")) baseConfig
else
  Try(java.net.InetAddress.getLocalHost.getHostAddress).
    map(remoteConfig(_, 0, baseConfig)).
    getOrElse(baseConfig) 

val system = ActorSystem("foo", akkaConfig) 
```

# solr - 使用 Solr 4.2 安装 ComplexPhraseQueryParser

> ID：15684090
> 
> 赞同：2
> 
> 时间：2013-03-28T14:12:35.027
> 
> 标签：solr, lucene

参考我的其他 SO 问题（[使用 solr 4.2 如何使用/启用模糊短语搜索](https://stackoverflow.com/questions/15626990/using-solr-4-2-how-do-i-use-enable-fuzzy-phrase-searching)）

有人告诉我，我可以通过安装那里提到的插件（[https://issues.apache.org/jira/browse/SOLR-1604](https://issues.apache.org/jira/browse/SOLR-1604)）来获得模糊短语。然而，我所做的每一次尝试都无法让它发挥作用。当我下载最新的日期文件时，没有自述文件或安装说明。另外，我还不能完全确定 Solr 4.2 是否有版本。

有人可以向我提供有关如何使用 Solr 4.2 安装该插件的说明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-30T18:57:20.523

我自己只是在看这个。根据另一个 SO 问题（[https://stackoverflow.com/a/28463319/1222019](https://stackoverflow.com/a/28463319/1222019)），解析器是在 Solr 4.8 中添加的，尽管可以将它添加到早期版本的 solr war 文件中并重新编译。

# postgresql - 如何在 Npgsql 中使用 hstore 列类型？

> ID：15684091
> 
> 赞同：3
> 
> 时间：2013-03-28T14:12:35.423
> 
> 标签：postgresql, npgsql, hstore

我有一个具有以下架构的表：

```
CREATE TABLE account
(
  id serial primary key,
  login varchar(40) not null,
  password varchar(40) not null,
  data hstore
); 
```

我想使用`NpgsqlCommand`带参数的对象从我的应用程序中检索和存储帐户数据。我必须使用哪个 DbType `NpgsqlParameter`？枚举`NpgsqlDbType`没有 hstore 的值。我可以使用`Dictionary`或`HashTable`作为`NpgsqlParameter`对象的值吗？

当我使用 JSON 列时，我可以创建类型参数`NpgsqlDbType.Text`，使用 JSON.Net 之类的库将对象序列化为 JSON 字符串并发送如下 SQL 语句：

```
INSERT INTO account (login, password, data) VALUES (:login, :password, :data::json) 
```

不幸的是，这不适用于 hstore 列。尝试执行此操作时出现语法错误：

```
INSERT INTO account (login, password, data) VALUES (:login, :password, :data::hstore) 
```

我传递给 data 参数的字符串如下所示：

> 'key1 => "value1", key2 => "value2"'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:28:45.347

谢谢你，弗朗西斯科！我在日志中看到，字符串开头和结尾的单引号（'）在传递给PostgreSQL时被转义了。当我经过

> key1 => "value1", key2 => "value2"

相反，我可以将数据插入到 hstore 列中。

# sql - 在只有数据库 dbproj 项目的 VS 解决方案中使用 nuget 来引用其他 dbproj 文件

> ID：15684096
> 
> 赞同：7
> 
> 时间：2013-03-28T14:12:37.417
> 
> 标签：sql, visual-studio-2010, visual-studio, nuget, dbproj

所以我有一个包含 3 个数据库 (.dbproj) 项目的 Visual Studio 解决方案。这些项目需要引用其他解决方案中的其他sql项目，我已经打包上传到nuget。如何在 dbproj 的 Visual Studio 中管理这些外部包/引用？

右键单击 Visual Studio 中的数据库项目不会给我“管理 NuGet 包...”选项。

我可以管理解决方案的 NuGet 包至少将所需的包下载到解决方案根目录，但在项目级别，需要引用我必须手动管理每个项目引用中的引用，并在包的任何时候手动更新已更新，因此引用指向正确的版本化包目录。

有没有更好的方法来为 Visual Studio 中数据库项目的 dbproj 引用执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T17:27:13.280

我最终遵循相同的路径，创建引用数据库的 NuGet 包，然后手动（通过命令行）将它们安装在标准 \package 位置。然后在 IDE 中手动更正数据库引用

这个功能有一个[工作项](https://nuget.codeplex.com/workitem/2439)，去投票吧。已经开发了一个功能分支，听起来功能相当完整。你可以试试看。

# coding-style - 方法级 SRP 与接口膨胀

> ID：15684108
> 
> 赞同：1
> 
> 时间：2013-03-28T14:13:08.330
> 
> 标签：coding-style, single-responsibility-principle

我建议重构一位同事，他反驳说基本上是引用 SRP。这是情况。

我们有一堆对我来说都是相关目的的辅助方法 - html 生成。可能有很多选项可供应用，我们称它们为 AB 和 C，您可以混合搭配。

他的原始代码对每个选项和有效组合使用了单独的方法。我认为这很糟糕，因为排列可能会迅速升级失控。

```
public string MethodWithA() { /* ... */ }

public string MethodWithB() { /* ... */ }

public string MethodWithC() { /* ... */ }

public string MethodWithAandB() { /* ... */ }

public string MethodWithAndC() { /* ... */ }

public string MethodWithBandC() { /* ... */ } 
```

*我们的情况并不像这样极端，但我要求的是一般情况。*

我说应该有一个方法，并且选项应该作为参数或枚举标志传递。

```
public string Method(SomeOptions flags)
{
    /* minimal base processing */

    if (/* flag A */)
    {
        ModifyForA();
    }

    /* etc for B and C */
} 
```

他的回答是，打开这样的标志意味着该方法正在做多种事情。我知道“清洁代码”确实说明了标志或开关语句是一种气味，但我认为它不适用于这种情况。我认为这条规则是关于寻找多态性的机会。无论如何，我认为我的版本仍然在做一件事，但我想这取决于解释。

有没有什么不完全主观的东西可以用来解决哪种方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:20:09.110

很难说，因为你的例子有点太笼统了，但我不喜欢这两种方法。正如您正确指出的那样，第一个导致组合爆炸，但替代方案将导致无法测试或分析的可怕方法。我更喜欢某种构建器，或者像现在流行的那样称之为流利的界面。然后你会有类似的东西：

```
string html = htmlBuilder.WithA().WithC().Build() 
```

# java - SWT 网格布局宽度

> ID：15684110
> 
> 赞同：1
> 
> 时间：2013-03-28T14:13:13.973
> 
> 标签：java, swt

我正在尝试使用 SWT 创建一个简单的显示。到目前为止，我成功地显示了我的数据库中的信息并使用 RowLayout 显示它，每一行都包含一个 GridLayout。它看起来像这样：

![在此处输入图像描述](../Images/a561e07e9c4b4322f7f474997434e39b.png)

我真正想要的是让行扩展以占据窗口的整个宽度。我如何实现这一目标？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T21:42:23.983

实现这一点的常用方法是使用[`GridData`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Flayout%2FGridData.html). 这`GridData`告诉组件如何在其父级中表现，例如如何在父级中传播。

通过使用：

```
component.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false)); 
```

你告诉组件在水平方向上占据尽可能多的空间，但在垂直方向上只占据必要的空间。

这是一个小例子，它应该按照您期望的方式运行：

```
public class StackOverflow
{
    public static void main(String[] args)
    {
        Display display = Display.getDefault();
        Shell shell = new Shell(display);

        /* GridLayout for the Shell to make things easier */
        shell.setLayout(new GridLayout(1, false));

        for(int i = 0; i < 5; i++)
        {
            createRow(shell, i);
        }

        shell.pack();
        shell.open();

        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private static void createRow(Shell shell, int i)
    {
        /* GridLayout for the rows, two columns, equal column width */
        Composite row = new Composite(shell, SWT.NONE);
        row.setLayout(new GridLayout(2, true));

        /* Make each row expand horizontally but not vertically */
        row.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

        /* Create the content of the row, expand horizontally as well */
        Button first = new Button(row, SWT.PUSH);
        first.setText("FIRST " + i);
        first.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));
        Button second = new Button(row, SWT.PUSH);
        second.setText("SECOND " + i);
        second.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));
    }
} 
```

这是启动后的样子：

![在此处输入图像描述](../Images/7cbe3a0a90ae35214cf480fb66ee2c44.png)

调整大小后：

![在此处输入图像描述](../Images/d3512f4d83121ce191362fbaddbac825.png)

* * *

附带说明：如果您还没有阅读过，我建议您阅读Eclipse 中关于 Layouts 的[本教程。](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)每个 SWT 开发人员都应该读过它。

# d3.js - D3 在画笔中更改 Alpha

> ID：15684112
> 
> 赞同：4
> 
> 时间：2013-03-28T14:13:14.097
> 
> 标签：d3.js, brush

我想知道是否可以将画笔内的区域显示为与画笔外区域不同的颜色或不同的不透明度级别。我使用焦点+上下文示例作为起点（[http://bl.ocks.org/mbostock/1667367](http://bl.ocks.org/mbostock/1667367)）。我想知道下直方图中的区域（画笔存在的地方）是否可以使用 0.5 的 alpha 通道进行渲染，而画笔内部的区域的 alpha 可以为 1.0。这可能吗？我已经解决这个问题好几天了，似乎无法接近解决方案。提前致谢。

编辑**好的。我想我从您下面关于添加条件填充的评论中理解了基本概念......但我很难实现它。在原始示例 ( [http://bl.ocks.org/mbostock/1667367](http://bl.ocks.org/mbostock/1667367) ) 中，焦点是主要的直方图，而上下文是带有画笔的较小直方图。我想我可以在画笔函数中添加两条线，以便为画笔内的上下文直方图上的区域涂上不同的颜色......但它并不完全有效。我在控制台窗口中收到一条错误消息，提示“无法读取未定义的属性长度”。这是我的刷过功能的样子：

```
function brushed() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.select("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
  //these are the two lines that I've added 
  context.select("path").attr("d", area)
    .style("fill", "#ff0000");
} 
```

你可以看到我实际上并没有使用条件填充部分......但我认为刷过的函数正在返回一组裁剪的数据“区域”，我认为我可以使用相同的区域但归因于上下文（而不是焦点）......但这没有用。

# c# - 使用 C# 更新 SQL 数据库中两列的值

> ID：15684116
> 
> 赞同：0
> 
> 时间：2013-03-28T14:13:28.060
> 
> 标签：c#

```
cmd.CommandText = "update  dbo.diagnosis SET id=" + SetValueForText + "ss=" + sh; 
```

where`sh`和 column`ss`是 bool 数据类型，`id`and`SetValueForText`是 int 数据类型。异常是附近的无效语法`ss`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:14:30.143

您在第一个值和第二个列名之间缺少逗号。您还应该使用参数化查询来防止 SQL 注入攻击：

```
cmd.CommantText =
    "update dbo.diagnosis set id=@id, ss=@ss";

cmd.Parameters.Add("@id", SetValueForText);
cmd.Parameters.Add("@ss", sh); 
```

另请记住，您没有过滤任何值，因此此更新语句将更新表中的每一行。

# android - JSON错误Android No Value For X in List

> ID：15684121
> 
> 赞同：1
> 
> 时间：2013-03-28T14:13:40.267
> 
> 标签：android, json, android-listview

所以我在我的小 JSON 解析应用程序中收到 No Value For visibility 错误。

如果我运行 Log.i(TAG, visibility); 我得到结果。当我进行 LogCat 输出时，我得到了所有数据的结果，但是，它们没有被推送到我的列表中......

不知道我在这里缺少什么。如果我在 LogCat 中获得它，为什么我没有将它放入我的列表中？

这是我的课：

```
public class DarkSkyForecast extends NavigationActivity {

    private static final String TAG = "DarkSkyForecast";
    private AQuery aq;
    private ProgressDialog dialog;
    private ListView lv;
    protected Object WXAdapter;

    String time = null;
    String summary = null;
    String icon = null;
    String precipIntensity = null;
    String temperature = null;
    String windSpeed = null;
    String windBearing = null;
    String cloudCover = null;
    String humidity = null;
    String pressure = null;
    String visibility = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setSubtitle("Hourly Weather Forecast");
        setContentView(R.layout.darksky_item);
        aq = new AQuery(this);
        dialog = new ProgressDialog(this);
        dialog.setCancelable(true);
        dialog.setInverseBackgroundForced(false);
        dialog.setCanceledOnTouchOutside(true);
        dialog.setMessage("Fetching nearby weather conditions...");
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

        work();
    }

    public void work() {
        //truckee
        String url = "https://api.forecast.io/forecast/071b586662cdc405e80ee0e3021ea590/39.31667,-120.13333";
        aq.progress(dialog).ajax(url, JSONObject.class, this, "dsWX");

    }

    public void dsWX(String url, JSONObject json, AjaxStatus status) {
        if (json != null) {
            try {

                JSONObject JSONhourly = json.getJSONObject("hourly");

                //Log.v(TAG, JSONhourly.toString());

                JSONArray hourlyArray = JSONhourly.getJSONArray("data");

                List<DarkSkyWx> wx = new ArrayList<DarkSkyWx>();

                for (int i = 0; i < hourlyArray.length(); i++) {
                    JSONObject hourlyData = hourlyArray.getJSONObject(i);
                    time = hourlyData.getString("time");
                    summary = hourlyData.getString("summary");
                    icon = hourlyData.getString("icon");
                    precipIntensity = hourlyData.getString("precipIntensity");
                    temperature = hourlyData.getString("temperature");
                    windSpeed = hourlyData.getString("windSpeed");
                    windBearing = hourlyData.getString("windBearing");
                    cloudCover = hourlyData.getString("cloudCover");
                    humidity = hourlyData.getString("humidity");
                    pressure = hourlyData.getString("pressure");
                    visibility = hourlyData.getString("visibility");

                    Log.i(TAG,time+" :  "+ summary+" :  "+ icon+" :  "+ precipIntensity+" :  "+
                            temperature+" :  "+ windSpeed+" :  "+ windBearing+" :  "+ cloudCover+" :  "+
                            humidity+" :  "+ pressure+" :  "+ visibility);

                    wx.add(new DarkSkyWx(time, summary, icon, precipIntensity,
                            temperature, windSpeed, windBearing, cloudCover,
                            humidity, pressure, visibility));
                }

                lv = (ListView) findViewById(R.id.list);
                lv.setAdapter(new WXAdapter(this,
                        android.R.layout.simple_list_item_1, wx));

            } catch (JSONException e) {

                Log.e(TAG, e.getMessage());
            }

        } else {

            // ajax error, show error code
            Toast.makeText(aq.getContext(), "Error:" + status.getCode(),
                    Toast.LENGTH_LONG).show();
        }
    }

    private class WXAdapter extends ArrayAdapter<DarkSkyWx> {

        private List<DarkSkyWx> items;

        public WXAdapter(Context context, int textViewResourceId,
                List<DarkSkyWx> items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        // Create a title and detail, icon is created in the xml file
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.darksky_item, null);
            }
            DarkSkyWx o = items.get(position);
            if (o != null) {
                TextView time = (TextView) v.findViewById(R.id.time);
                TextView summary = (TextView) v.findViewById(R.id.summary);
                TextView icon = (TextView) v.findViewById(R.id.icon);
                TextView precipIntensity = (TextView) v
                        .findViewById(R.id.precipIntensity);
                TextView temperature = (TextView) v
                        .findViewById(R.id.temperature);
                TextView windSpeed = (TextView) v.findViewById(R.id.windSpeed);
                TextView windBearing = (TextView) v
                        .findViewById(R.id.windBearing);
                TextView cloudCover = (TextView) v
                        .findViewById(R.id.cloudCover);
                TextView humidity = (TextView) v.findViewById(R.id.humidity);
                TextView pressure = (TextView) v.findViewById(R.id.pressure);
                TextView visibility = (TextView) v
                        .findViewById(R.id.visibility);

                if (time != null) {
                    time.setText(o.getTime());
                }
                if (summary != null) {
                    summary.setText(o.getSummary());
                }
                if (icon != null) {
                    icon.setText(o.getIcon());
                }
                if (precipIntensity != null) {
                    precipIntensity.setText(o.getPrecipIntensity());
                }
                if (temperature != null) {
                    temperature.setText(o.getTemperature());
                }
                if (windSpeed != null) {
                    windSpeed.setText(o.getWindSpeed());
                }
                if (windBearing != null) {
                    windBearing.setText(o.getWindBearing());
                }
                if (cloudCover != null) {
                    cloudCover.setText(o.getCloudCover());
                }
                if (humidity != null) {
                    humidity.setText(o.getHumidity());
                }
                if (pressure != null) {
                    pressure.setText(o.getPressure());
                }
                if (visibility != null) {
                    visibility.setText(o.getVisibility());
                }
            }
            return v;
        }
    }

} 
```

我的吸气剂/二传手：

```
public class DarkSkyWx {

    private String time;
    private String summary;
    private String icon;
    private String precipIntensity;
    private String temperature;
    private String windSpeed;
    private String windBearing;
    private String cloudCover;
    private String humidity;
    private String pressure;
    private String visibility;

    public DarkSkyWx(String time, String summary, String icon,
            String precipIntensity, String temperature, String windSpeed,
            String windBearing, String cloudCover, String humidity,
            String pressure, String visibility) {

        this.time = time;
        this.summary = summary;
        this.icon = icon;
        this.precipIntensity = precipIntensity;
        this.temperature = temperature;
        this.windSpeed = windSpeed;
        this.windBearing = windBearing;
        this.cloudCover = cloudCover;
        this.humidity = humidity;
        this.pressure = pressure;
        this.visibility = visibility;

    }

    public String getTime() {
        return time;
    }

    public void setTime(String time) {
        this.time = time;
    }

    public String getSummary() {
        return summary;
    }

    public void setSummary(String summary) {
        this.summary = summary;
    }

    public String getIcon() {
        return icon;
    }

    public void setIcon(String icon) {
        this.icon = icon;
    }

    public String getPrecipIntensity() {
        return precipIntensity;
    }

    public void setPrecipIntensity(String precipIntensity) {
        this.precipIntensity = precipIntensity;
    }

    public String getTemperature() {
        return temperature;
    }

    public void setTemperature(String temperature) {
        this.temperature = temperature;
    }

    public String getWindSpeed() {
        return windSpeed;
    }

    public void setWindSpeed(String windSpeed) {
        this.windSpeed = windSpeed;
    }

    public String getWindBearing() {
        return windBearing;
    }

    public void setWindBearing(String windBearing) {
        this.windBearing = windBearing;
    }

    public String getCloudCover() {
        return cloudCover;
    }

    public void setCloudCover(String cloudCover) {
        this.cloudCover = cloudCover;
    }

    public String getHumidity() {
        return humidity;
    }

    public void setHumidity(String humidity) {
        this.humidity = humidity;
    }

    public String getPressure() {
        return pressure;
    }

    public void setPressure(String pressure) {
        this.pressure = pressure;
    }

    public String getVisibility() {
        return visibility;
    }

    public void setVisibility(String visibility) {
        this.visibility = visibility;
    }

} 
```

**e.printStackTrace(); 输出：**

```
 03-28 07:35:10.638: W/System.err(24234): org.json.JSONException: No value for visibility
03-28 07:35:10.638: W/System.err(24234):    at org.json.JSONObject.get(JSONObject.java:354)
03-28 07:35:10.638: W/System.err(24234):    at org.json.JSONObject.getString(JSONObject.java:510)
03-28 07:35:10.638: W/System.err(24234):    at com.backcountryskiers.avalanche.conditions.DarkSkyForecast.dsWX(DarkSkyForecast.java:96)
03-28 07:35:10.638: W/System.err(24234):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 07:35:10.646: W/System.err(24234):    at java.lang.reflect.Method.invoke(Method.java:511)
03-28 07:35:10.646: W/System.err(24234):    at com.androidquery.util.AQUtility.invokeMethod(AQUtility.java:200)
03-28 07:35:10.646: W/System.err(24234):    at com.androidquery.util.AQUtility.invokeHandler(AQUtility.java:177)
03-28 07:35:10.646: W/System.err(24234):    at com.androidquery.callback.AbstractAjaxCallback.callback(AbstractAjaxCallback.java:497)
03-28 07:35:10.646: W/System.err(24234):    at com.androidquery.callback.AbstractAjaxCallback.afterWork(AbstractAjaxCallback.java:1262)
03-28 07:35:10.646: W/System.err(24234):    at com.androidquery.callback.AbstractAjaxCallback.run(AbstractAjaxCallback.java:987)
03-28 07:35:10.646: W/System.err(24234):    at android.os.Handler.handleCallback(Handler.java:725)
03-28 07:35:10.646: W/System.err(24234):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 07:35:10.646: W/System.err(24234):    at android.os.Looper.loop(Looper.java:137)
03-28 07:35:10.646: W/System.err(24234):    at android.app.ActivityThread.main(ActivityThread.java:5195)
03-28 07:35:10.646: W/System.err(24234):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 07:35:10.646: W/System.err(24234):    at java.lang.reflect.Method.invoke(Method.java:511)
03-28 07:35:10.646: W/System.err(24234):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-28 07:35:10.646: W/System.err(24234):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-28 07:35:10.653: W/System.err(24234):    at dalvik.system.NativeStart.main(Native Method) 
```

真正的原始 JSON：

```
{"latitude":39.31667,"longitude":-120.13333,"timezone":"America/Los_Angeles","offset":-7,"currently":{"time":1364479080,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"temperature":30.12,"windSpeed":0.83,"windBearing":350,"cloudCover":0.95,"humidity":0.93,"pressure":811.5,"visibility":9.5},"minutely":{"summary":"Overcast for the hour.","icon":"cloudy","data":[{"time":1364479080,"precipIntensity":0},{"time":1364479140,"precipIntensity":0},{"time":1364479200,"precipIntensity":0},{"time":1364479260,"precipIntensity":0},{"time":1364479320,"precipIntensity":0},{"time":1364479380,"precipIntensity":0},{"time":1364479440,"precipIntensity":0},{"time":1364479500,"precipIntensity":0},{"time":1364479560,"precipIntensity":0},{"time":1364479620,"precipIntensity":0},{"time":1364479680,"precipIntensity":0},{"time":1364479740,"precipIntensity":0},{"time":1364479800,"precipIntensity":0},{"time":1364479860,"precipIntensity":0},{"time":1364479920,"precipIntensity":0},{"time":1364479980,"precipIntensity":0},{"time":1364480040,"precipIntensity":0},{"time":1364480100,"precipIntensity":0},{"time":1364480160,"precipIntensity":0},{"time":1364480220,"precipIntensity":0},{"time":1364480280,"precipIntensity":0},{"time":1364480340,"precipIntensity":0},{"time":1364480400,"precipIntensity":0},{"time":1364480460,"precipIntensity":0},{"time":1364480520,"precipIntensity":0},{"time":1364480580,"precipIntensity":0},{"time":1364480640,"precipIntensity":0},{"time":1364480700,"precipIntensity":0},{"time":1364480760,"precipIntensity":0},{"time":1364480820,"precipIntensity":0},{"time":1364480880,"precipIntensity":0},{"time":1364480940,"precipIntensity":0},{"time":1364481000,"precipIntensity":0},{"time":1364481060,"precipIntensity":0},{"time":1364481120,"precipIntensity":0},{"time":1364481180,"precipIntensity":0},{"time":1364481240,"precipIntensity":0},{"time":1364481300,"precipIntensity":0},{"time":1364481360,"precipIntensity":0},{"time":1364481420,"precipIntensity":0},{"time":1364481480,"precipIntensity":0},{"time":1364481540,"precipIntensity":0},{"time":1364481600,"precipIntensity":0},{"time":1364481660,"precipIntensity":0},{"time":1364481720,"precipIntensity":0},{"time":1364481780,"precipIntensity":0},{"time":1364481840,"precipIntensity":0},{"time":1364481900,"precipIntensity":0},{"time":1364481960,"precipIntensity":0},{"time":1364482020,"precipIntensity":0},{"time":1364482080,"precipIntensity":0},{"time":1364482140,"precipIntensity":0},{"time":1364482200,"precipIntensity":0},{"time":1364482260,"precipIntensity":0},{"time":1364482320,"precipIntensity":0},{"time":1364482380,"precipIntensity":0},{"time":1364482440,"precipIntensity":0},{"time":1364482500,"precipIntensity":0},{"time":1364482560,"precipIntensity":0},{"time":1364482620,"precipIntensity":0}]},"hourly":{"summary":"Mostly cloudy later this morning.","icon":"partly-cloudy-day","data":[{"time":1364475600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":29,"windSpeed":3.64,"windBearing":352,"cloudCover":0.77,"humidity":0.96,"pressure":810.5,"visibility":9.53},{"time":1364479200,"summary":"Overcast","icon":"cloudy","precipIntensity":0.001,"precipProbability":0.04,"precipType":"rain","temperature":30.16,"windSpeed":0.73,"windBearing":350,"cloudCover":0.96,"humidity":0.93,"pressure":811.53,"visibility":9.5},{"time":1364482800,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"temperature":30.51,"windSpeed":3.27,"windBearing":347,"cloudCover":0.95,"humidity":0.91,"pressure":812.28,"visibility":7.52},{"time":1364486400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":36.34,"windSpeed":4.14,"windBearing":344,"cloudCover":0.75,"humidity":0.82,"pressure":812.23,"visibility":8.62},{"time":1364490000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":42.22,"windSpeed":5.82,"windBearing":286,"cloudCover":0.73,"humidity":0.72,"pressure":812.93,"visibility":9.44},{"time":1364493600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":48.01,"windSpeed":6.85,"windBearing":281,"cloudCover":0.7,"humidity":0.64,"pressure":813.25,"visibility":10},{"time":1364497200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":53.27,"windSpeed":8.03,"windBearing":279,"cloudCover":0.71,"humidity":0.55,"pressure":813.21,"visibility":10},{"time":1364500800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.001,"precipProbability":0.02,"precipType":"rain","temperature":57.24,"windSpeed":10.16,"windBearing":273,"cloudCover":0.72,"humidity":0.5,"pressure":813.8,"visibility":10},{"time":1364504400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.001,"precipProbability":0.04,"precipType":"rain","temperature":59.29,"windSpeed":11.04,"windBearing":270,"cloudCover":0.74,"humidity":0.46,"pressure":814.14,"visibility":10},{"time":1364508000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.001,"precipProbability":0.06,"precipType":"rain","temperature":59.4,"windSpeed":11.98,"windBearing":266,"cloudCover":0.76,"humidity":0.46,"pressure":813.64,"visibility":10},{"time":1364511600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.003,"precipProbability":0.1,"precipType":"rain","temperature":57.99,"windSpeed":12.46,"windBearing":263,"cloudCover":0.79,"humidity":0.48,"pressure":813.77,"visibility":10},{"time":1364515200,"summary":"Overcast","icon":"cloudy","precipIntensity":0.003,"precipProbability":0.22,"precipType":"rain","temperature":55.31,"windSpeed":12.07,"windBearing":264,"cloudCover":0.96,"humidity":0.52,"pressure":813.96,"visibility":10},{"time":1364518800,"summary":"Overcast","icon":"cloudy","precipIntensity":0.002,"precipProbability":0.08,"precipType":"rain","temperature":52.4,"windSpeed":10.37,"windBearing":261,"cloudCover":0.97,"humidity":0.57,"pressure":814.13,"visibility":10},{"time":1364522400,"summary":"Overcast","icon":"cloudy","precipIntensity":0.001,"precipProbability":0.05,"precipType":"rain","temperature":48.61,"windSpeed":8.01,"windBearing":261,"cloudCover":0.96,"humidity":0.63,"pressure":814.43,"visibility":10},{"time":1364526000,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"temperature":44.99,"windSpeed":5.43,"windBearing":262,"cloudCover":0.95,"humidity":0.73,"pressure":815.11,"visibility":9.96},{"time":1364529600,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"temperature":42.37,"windSpeed":3.94,"windBearing":260,"cloudCover":0.9,"humidity":0.79,"pressure":815.64,"visibility":9},{"time":1364533200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.03,"precipType":"rain","temperature":39.84,"windSpeed":2.93,"windBearing":249,"cloudCover":0.68,"humidity":0.84,"pressure":820.38,"visibility":9.76},{"time":1364536800,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.03,"precipType":"rain","temperature":38.14,"windSpeed":2.1,"windBearing":241,"cloudCover":0.62,"humidity":0.86,"pressure":820.66,"visibility":10},{"time":1364540400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":36.13,"windSpeed":1.38,"windBearing":342,"cloudCover":0.39,"humidity":0.89,"pressure":820.85,"visibility":9.7},{"time":1364544000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":34.54,"windSpeed":1.87,"windBearing":253,"cloudCover":0.34,"humidity":0.89,"pressure":820.96,"visibility":9.7},{"time":1364547600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"temperature":33.13,"windSpeed":1.3,"windBearing":353,"cloudCover":0.16,"humidity":0.91,"pressure":821.04,"visibility":9.58},{"time":1364551200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"temperature":31.12,"windSpeed":1.84,"windBearing":150,"cloudCover":0.17,"humidity":0.93,"pressure":821.13,"visibility":9.75},{"time":1364554800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"temperature":29.64,"windSpeed":1.31,"windBearing":0,"cloudCover":0.19,"humidity":0.93,"pressure":821.21,"visibility":9.82},{"time":1364558400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":28.99,"windSpeed":1.86,"windBearing":138,"cloudCover":0.21,"humidity":0.93,"pressure":821.28,"visibility":9.91},{"time":1364562000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":29.79,"windSpeed":1.26,"windBearing":6,"cloudCover":0.23,"humidity":0.89,"pressure":821.48,"visibility":10},{"time":1364565600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":33.36,"windSpeed":2.27,"windBearing":26,"cloudCover":0.33,"humidity":0.82,"pressure":821.73},{"time":1364569200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":36.61,"windSpeed":2.24,"windBearing":35,"cloudCover":0.38,"humidity":0.78,"pressure":821.94},{"time":1364572800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":43.46,"windSpeed":2.8,"windBearing":41,"cloudCover":0.39,"humidity":0.69,"pressure":822.13},{"time":1364576400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":51.61,"windSpeed":3.6,"windBearing":44,"cloudCover":0.38,"humidity":0.59,"pressure":822.29},{"time":1364580000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"temperature":57.8,"windSpeed":4.21,"windBearing":45,"cloudCover":0.37,"humidity":0.52,"pressure":822.4},{"time":1364583600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.001,"precipProbability":0.08,"precipType":"rain","temperature":61.78,"windSpeed":4.51,"windBearing":33,"cloudCover":0.38,"humidity":0.48,"pressure":822.34},{"time":1364587200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.003,"precipProbability":0.2,"precipType":"rain","temperature":64.38,"windSpeed":4.66,"windBearing":9,"cloudCover":0.38,"humidity":0.46,"pressure":822.18},{"time":1364590800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.004,"precipProbability":0.28,"precipType":"rain","temperature":66,"windSpeed":4.75,"windBearing":341,"cloudCover":0.39,"humidity":0.45,"pressure":822.02},{"time":1364594400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.004,"precipProbability":0.26,"precipType":"rain","temperature":64.99,"windSpeed":4.89,"windBearing":310,"cloudCover":0.45,"humidity":0.45,"pressure":821.84},{"time":1364598000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.003,"precipProbability":0.19,"precipType":"rain","temperature":62.44,"windSpeed":4.99,"windBearing":289,"cloudCover":0.53,"humidity":0.47,"pressure":821.67},{"time":1364601600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.003,"precipProbability":0.14,"precipType":"rain","temperature":60.25,"windSpeed":5.01,"windBearing":276,"cloudCover":0.58,"humidity":0.48,"pressure":821.57},{"time":1364605200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.002,"precipProbability":0.1,"precipType":"rain","temperature":57.05,"windSpeed":4.46,"windBearing":266,"cloudCover":0.53,"humidity":0.53,"pressure":821.68},{"time":1364608800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.002,"precipProbability":0.07,"precipType":"rain","temperature":53.35,"windSpeed":3.67,"windBearing":257,"cloudCover":0.44,"humidity":0.61,"pressure":821.91},{"time":1364612400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.002,"precipProbability":0.04,"precipType":"rain","temperature":50.18,"windSpeed":3.03,"windBearing":247,"cloudCover":0.38,"humidity":0.67,"pressure":822.13},{"time":1364616000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.02,"precipType":"rain","temperature":47.87,"windSpeed":2.62,"windBearing":228,"cloudCover":0.39,"humidity":0.71,"pressure":822.37},{"time":1364619600,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.01,"precipType":"rain","temperature":46.27,"windSpeed":2.32,"windBearing":203,"cloudCover":0.43,"humidity":0.74,"pressure":822.61},{"time":1364623200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"temperature":45.09,"windSpeed":2.14,"windBearing":186,"cloudCover":0.47,"humidity":0.75,"pressure":822.78},{"time":1364626800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.01,"precipType":"rain","temperature":43.36,"windSpeed":2.28,"windBearing":182,"cloudCover":0.47,"humidity":0.77,"pressure":822.77},{"time":1364630400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.03,"precipType":"rain","temperature":41.6,"windSpeed":2.58,"windBearing":339,"cloudCover":0.46,"humidity":0.78,"pressure":822.65},{"time":1364634000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.001,"precipProbability":0.06,"precipType":"rain","temperature":40.18,"windSpeed":2.82,"windBearing":22,"cloudCover":0.47,"humidity":0.79,"pressure":822.52},{"time":1364637600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.002,"precipProbability":0.16,"precipType":"rain","temperature":38.64,"windSpeed":2.88,"windBearing":47,"cloudCover":0.54,"humidity":0.8,"pressure":822.29},{"time":1364641200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.004,"precipProbability":0.29,"precipType":"rain","temperature":37.19,"windSpeed":2.85,"windBearing":41,"cloudCover":0.64,"humidity":0.81,"pressure":822.03},{"time":1364644800,"summary":"Sprinkling","icon":"rain","precipIntensity":0.006,"precipProbability":0.37,"precipType":"rain","temperature":36.18,"windSpeed":2.84,"windBearing":35,"cloudCover":0.72,"humidity":0.82,"pressure":821.85},{"time":1364648400,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.005,"precipProbability":0.31,"precipType":"rain","temperature":36.61,"windSpeed":3.01,"windBearing":41,"cloudCover":0.72,"humidity":0.81,"pressure":821.79}]},"daily":{"summary":"Sprinkling off-and-on throughout the week; temperatures falling to 51° on Monday.","icon":"rain","data":[{"time":1364454000,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1364478709,"sunsetTime":1364523687,"precipIntensity":0.003,"precipType":"rain","temperatureMin":29,"temperatureMinTime":1364475600,"temperatureMax":59.4,"temperatureMaxTime":1364508000,"windSpeed":5.64,"windBearing":292,"cloudCover":0.79,"humidity":0.74,"pressure":813.03,"visibility":9.58},{"time":1364540400,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1364565013,"sunsetTime":1364610146,"precipIntensity":0.004,"precipType":"rain","temperatureMin":28.99,"temperatureMinTime":1364558400,"temperatureMax":66,"temperatureMaxTime":1364590800,"windSpeed":3.04,"windBearing":332,"cloudCover":0.37,"humidity":0.69,"pressure":821.81,"visibility":9.78},{"time":1364626800,"summary":"Light rain throughout the day.","icon":"rain","sunriseTime":1364651317,"sunsetTime":1364696604,"precipIntensity":0.015,"precipType":"rain","temperatureMin":36.18,"temperatureMinTime":1364644800,"temperatureMax":59.63,"temperatureMaxTime":1364677200,"windSpeed":4.7,"windBearing":8,"cloudCover":0.73,"humidity":0.7,"pressure":819.1},{"time":1364713200,"summary":"Light rain throughout the day.","icon":"rain","sunriseTime":1364737622,"sunsetTime":1364783062,"precipIntensity":0.029,"precipType":"rain","temperatureMin":34.97,"temperatureMinTime":1364731200,"temperatureMax":52.75,"temperatureMaxTime":1364763600,"windSpeed":4.63,"windBearing":263,"cloudCover":0.97,"humidity":0.84,"pressure":815.54},{"time":1364799600,"summary":"Overcast throughout the day.","icon":"partly-cloudy-day","sunriseTime":1364823926,"sunsetTime":1364869521,"precipIntensity":0.005,"precipType":"rain","temperatureMin":31.91,"temperatureMinTime":1364817600,"temperatureMax":51.23,"temperatureMaxTime":1364860800,"windSpeed":4.52,"windBearing":244,"cloudCover":0.83,"humidity":0.83,"pressure":817.95},{"time":1364886000,"summary":"Sprinkling starting in the afternoon, continuing until evening.","icon":"rain","sunriseTime":1364910232,"sunsetTime":1364955979,"precipIntensity":0.007,"precipType":"rain","temperatureMin":30.72,"temperatureMinTime":1364904000,"temperatureMax":61.06,"temperatureMaxTime":1364940000,"windSpeed":3.68,"windBearing":229,"cloudCover":0.41,"humidity":0.77,"pressure":820.08},{"time":1364972400,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1364996537,"sunsetTime":1365042437,"precipIntensity":0.001,"precipType":"rain","temperatureMin":30.94,"temperatureMinTime":1364990400,"temperatureMax":64.17,"temperatureMaxTime":1365022800,"windSpeed":3.63,"windBearing":252,"cloudCover":0.38,"humidity":0.71,"pressure":819.81},{"time":1365058800,"summary":"Overcast in the morning.","icon":"partly-cloudy-night","sunriseTime":1365082843,"sunsetTime":1365128896,"precipIntensity":0.001,"precipType":"rain","temperatureMin":34.63,"temperatureMinTime":1365076800,"temperatureMax":42.52,"temperatureMaxTime":1365058800,"windSpeed":3.5,"windBearing":304,"cloudCover":0.92,"humidity":0.68,"pressure":815.82}]},"alerts":[{"title":"Special Weather Statement for Nevada, CA","expires":1364518800,"uri":"http://alerts.weather.gov/cap/wwacapget.php?x=CA124EF50E7030.SpecialWeatherStatement.124EF51C1F50CA.STOSPSSTO.bb8abdb52e14e02477a8d74f36621a9e"}],"flags":{"sources":["nwspa","isd","fnmoc","naefs","rap","cmc","gfs","nam","metar","lamp","darksky"],"isd-stations":["724880-23185","725846-93201","725846-99999","999999-23185","999999-53133"],"metar-stations":["KBLU","KTRK","KTVL"],"lamp-stations":["KBLU","KTRK","KTVL"],"darksky-stations":["KRGX"]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:36:57.033

获得真正的 JSON 后的简单答案：此时 JSON 中没有可见性键。无论出于何种原因，API 都没有返回：

```
{
"time":1364565600,
"summary":"Partly Cloudy",
"icon":"partly-cloudy-day",
"precipIntensity":0,
"temperature":33.36,
"windSpeed":2.27,
"windBearing":26,
"cloudCover":0.33,
"humidity":0.82,
"pressure":821.73
}, 
```

而不是数据没有正确存储，错误（如`printStackTrace`将显示的那样）出现在这一行：

```
visibility = hourlyData.getString("visibility"); 
```

这是它第一次尝试从 JSON 中提取值的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:18:02.693

```
 visibility = hourlyData.getString("visibility"); 
```

可见性不是字符串，而是 JSON 中的整数。

# node.js - 在 Mongoose 中创建具有独特属性的文档

> ID：15684126
> 
> 赞同：1
> 
> 时间：2013-03-28T14:13:46.147
> 
> 标签：node.js, mongodb, mongoose

我正在尝试在整个集合中保存具有唯一属性的文档。

因此，如果有人试图用 {name: 'kitty'} 保存一只小猫并且该名字已经存在，它会失败并用 {name: 'kitty1'} 重试（然后是 'kitty2' 等）。

我真的想不出一个好的方法来做到这一点，有什么想法吗？

这是我到目前为止所拥有的（不起作用）。

```
var kittenSchema = new Schema ({
    name: {type: String, index: {unique: true}}
})

var Kitten = mongoose.model('Kitten', kittenSchema);

var kitten = new Kitten({
    name: 'kitty'
});

kitten.save(function(err, kitten){
    if (err){
        saveKitten(kitten, 1, function(err, kitten){
            if (err){
                console.log("Damn, no kitten");
            } else {
                console.log("New kitten " + kitten.name + "saved.");
            });
    } else {
        console.log("New kitten " + kitten.name + "saved.");
    }
}));

function saveKitten(kitten, count, callback){
    kitten.name = kitten.name + count;

    kitten.save(function(err, newKitten){
        if (err){
            if (count > 100){
                // Give up!
                callback(err, null);
            }

            saveKitten(kitten, count + 1, callback);
        } else {
            callback(null, newKitten);
        }
    }));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:25:21.500

您的示例几乎可以按原样运行，但有一些拼写错误和范围问题。

第一次调用时`kitten.save`，回调的参数是`kitten`. 问题是 local`kitten`参数掩盖了 external `kitten`，并且在发生错误的情况下，本地`kitten`是`undefined`。

```
var kittenSchema = new mongoose.Schema ({
    name: {type: String, index: {unique: true}}
})

var Kitten = mongoose.model('Kitten', kittenSchema);

var kitten = new Kitten({
    name: 'kitty'
});

kitten.save(function(err, newKitten){
    if (err){
        saveKitten(kitten, 1, function(err, newKitten){
            if (err){
                console.log("Damn, no kitten");
            } else {
                console.log("New kitten " + newKitten.name + " saved.");
            }
        });
    } else {
        console.log("New kitten " + newKitten.name + " saved.");
    }
});

function saveKitten(kitten, count, callback){
    kitten.name = kitten.name + count;

    kitten.save(function(err, newKitten){
        if (err){
            if (count > 100){
                // Give up!
                callback(err, null);
            }

            saveKitten(kitten, count + 1, callback);
        } else {
            callback(null, newKitten);
        }
    });
} 
```

另请注意，您在此处使用“+”的方式意味着此代码将插入“kitten”、“kitten1”、“kitten12”、“kitten123”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:26:06.307

在 NilsH 的指针之后，我想我可能会尝试撤回所有可能的名称冲突并在本地寻找一个新名称。

像这样的东西：

```
var Kitten = mongoose.model('Kitten', kittenSchema);

var kitten = new Kitten({
    name: 'kitty'
});

Kitten.find({name: new RegExp('^'+ kitten.name +'*', "i")}, 'name').exec(function(err, docs){
    var tryName = name;
    var count = 0;

    while (True){
        if (_.indexOf(docs, tryName) != -1){
            break;
        } else {
            tryName = name + count;
        }
    }

    kitten.name = tryName;

    kitten.save(function(err, kitten){
        if (err){
            console.log("Damn, no kitten");
        } else {
            console.log("New kitten " + kitten.name + "saved.");
        }
    }));    
}); 
```

找到名称和使用它之间可能存在竞争条件，但我认为我可以忍受。

# jqgrid - jqGrid 内联编辑 - addRow 键第一次不起作用

> ID：15684127
> 
> 赞同：1
> 
> 时间：2013-03-28T14:13:46.580
> 
> 标签：jqgrid, jqgrid-inlinenav

我想用`Esc`和`Enter`键使用内联编辑，我正在使用`inlineNav`方法。我已经设置`keys: true`了`editRow`方法并且键正在工作。当我使用“添加行”按钮时，键不是第一次分叉。我必须通过鼠标取消此操作，当我再次尝试添加行时，按键工作正常。我不知道如何调试它。这是 jqGrid v. 4.4.4

```
$("myGrid").jqGrid(finalConfig)
  .navGrid(gridToolbar).inlineNav(gridToolbar, {
     editParams: { keys: true }
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:49:51.460

如果您想为内联编辑定义一些常用设置，我建议您使用`$.jgrid.inlineEdit`. 例如

```
$.extend($.jgrid.inlineEdit, { keys: true }); 
```

在这种情况下，您将以**任何形式**的内联编辑使用`Enter`​​键工作。在每个格式化程序激活内联编辑的情况下：“操作”的工作方式与添加和编辑按钮相同。**`inlineNav`**

 **或者，您必须`inlineNav`通过以下方式为“添加行”按钮的选项指定特殊

```
$("#myGrid").jqGrid("inlineNav", "#pager", {
    editParams: { keys: true },
    addParams: { addRowParams: { keys: true } }
}); 
```

通常在一个对象中定义所有内联编辑选项并使用相同的选项对象两次：

```
var editingOptions = { keys: true };

$("#myGrid").jqGrid("inlineNav", "#pager", {
    editParams: editingOptions,
    addParams: { addRowParams: editingOptions }
}); 
```

有关更多代码示例，请参见[答案](https://stackoverflow.com/a/10887652/315935)。

**更新**：我想我找到了你一开始在 Add 操作期间使用但后来工作的*原因。*原因是我在刚刚发布[的错误报告中描述的错误。](http://www.trirand.com/blog/?page_id=393/bugs/jgrid-inlineedit-be-changed-by-restorerow/#p28552)您可以尝试使用固定版本（您可以在[此处](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.4/js/jquery.jqGrid.src-restoreRow.js)获取）。原因是`keys: false``keys: false``jquery.jqGrid.src.js`

1.  `inlineNav`有一个错误：即使我们取消“添加”操作，它也总是`editParams`在“取消”事件处理程序内部使用（见[行）。](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.inlinedit.js#L570)所以该方法`restoreRow`被`editParams`作为参数调用。
2.  下一个错误是**更改**[行](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.inlinedit.js#L372)而不是仅使用它。要修复错误，必须更改行`restoreRow` **`$.jgrid.inlineEdit`**

 **```
o = $.extend(true, $.jgrid.inlineEdit, o ); 
```

到

```
o = $.extend(true, {}, $.jgrid.inlineEdit, o); 
```****

# node.js - Express js 错误处理

> ID：15684130
> 
> 赞同：21
> 
> 时间：2013-03-28T14:13:55.493
> 
> 标签：node.js, express

我正在尝试使用 express 运行错误处理，但没有看到“错误！！！”的响应 就像我希望我在控制台上看到“一些异常”，然后进程被终止。这是应该如何设置错误处理，如果是这样，还有另一种方法来捕获错误吗？

```
var express = require('express');
var app = express();

app.use(function(err, req, res, next) {
    console.log("error!!!");
    res.send("error!!!");
});

app.get('/', function(request, response) {
    throw "some exception";
    response.send('Hello World!');
});

app.listen(5000, function() {
  console.log("Listening on 5000");
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T15:38:43.940

[https://expressjs.com/en/guide/error-handling.html](https://expressjs.com/en/guide/error-handling.html)提供了有关错误处理的示例应用程序/指南 但是应该修复您的代码：

```
// Require Dependencies
var express = require('express');
var app = express();

// Middleware
app.use(app.router); // you need this line so the .get etc. routes are run and if an error within, then the error is parsed to the next middleware (your error reporter)
app.use(function(err, req, res, next) {
    if(!err) return next(); // you also need this line
    console.log("error!!!");
    res.send("error!!!");
});

// Routes
app.get('/', function(request, response) {
    throw "some exception";
    response.send('Hello World!');
});

// Listen
app.listen(5000, function() {
  console.log("Listening on 5000");
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-17T07:06:25.597

一些提示：

1）您的代码不起作用，因为您的错误处理程序中间件在到达您的路由之前运行，因此错误处理程序永远没有机会将错误传递给它。这种风格被称为延续传递。将错误处理程序放在中间件堆栈的最后。

2）当您遇到未处理的错误时，您应该关闭服务器。最好的方法是调用`server.close()`，其中 server 是做的结果`var server = http.createServer(app);`

这意味着，您应该执行以下操作：

```
var server = http.createServer(app);

app.use(function(err, req, res, next) {
  console.log("error!!!");
  res.send("error!!!");
  server.close();
}); 
```

您可能还应该超时 server.close()，以防它无法完成（毕竟您的应用程序处于未定义状态）：

```
var server = http.createServer(app);

app.use(function(err, req, res, next) {
  console.log("error!!!");
  res.send("error!!!");

  server.close();

  setTimeout(function () {
    process.exit(1);
  }, 3*1000);
}); 
```

我创建了一个库，可以为您完成所有这些工作，并允许您定义自定义响应，包括专门的错误视图、要服务的静态文件等......：

[https://github.com/ericelliott/express-error-handler](https://github.com/ericelliott/express-error-handler)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-18T12:57:52.483

我有同样的问题，无法弄清楚出了什么问题。问题是，如果您定义了 express errorHandler，那么您的自定义错误处理程序将永远不会被调用。如果您有下一个代码，只需将其删除：

```
if ('development' === app.get('env')) {
  app.use(express.errorHandler());
} 
```

为我工作:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T08:08:30.490

安装快速安装连接域，然后是这样的：

```
var express = require("express"),  
    connectDomain = require("connect-domain"),
    app = express(),
    errorHandler; 
```

// 我们的错误处理程序

```
app.use(connectDomain());  
    errorHandler = function (err, req, res, next) {  
        res.send(500, {
           "status": "error",
           "message": err.message
        });
    console.log(err);
}; 
```

然后在设置端点时，在 use() 中添加 errorHandler：

```
app.get("/some/data", function (req, res) {  
    // ... do some stuff ...
    res.send(200, "Yay! Happy Success!");
}).use(errorHandler); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-26T20:54:02.890

创建误差函数：

```
function throwError(status, code, message) {
  const error = new Error(message);
  error.name = '';
  error.status = status;
  error.code = code;
  throw error;
} 
```

例如

```
throwError(422, 'InvalidEmail', '`email` should be a valid email address') 
```

我们分配`name`给，`''`这样当我们`toString`出现错误时，它不会在它前面加上`"Error: "`

如前所述，如果您使用 express，您可以通过指定 4 个参数来创建特殊的错误处理中间件：

```
app.use((err, req, res, next) => {
  if (err) {
    res.status(err.status || 500).json({ code: err.code || 'Error', message: err.toString() });
  }
}); 
```

如果您不使用 express 或其他方式，请将该代码添加到您的`catch`处理程序中。

**为什么？**

1.  现代应用程序处理 JSON，在 JSON 中抛出错误更有意义，并导致更清晰的 UI 代码。

2.  您不仅应该抛出错误消息，因为它们解析不精确。如果 UI 是多语言应用程序怎么办？在这种情况下，他们可以使用`code`来显示本地化消息。

# java - 错误 ArtifactTransferException

> ID：15684134
> 
> 赞同：0
> 
> 时间：2013-03-28T14:14:04.410
> 
> 标签：java, maven-3, parent

嗨，我是 maven java 的新手。我想在 Eclipse Juno 中创建一个 Maven 项目，但是通过在 Eclipse 中保存更改会出现此错误：我的项目类似于：[example](http://docs.geoserver.org/latest/en/developer/programming-guide/ows-services/implementing.html)。

```
- Archive for required library: 'C:/Users/Iman/.m2/repository/org/geoserver/main/2.2/main-2.2.jar' in project 'hello' cannot be read or is not a valid ZIP file
- ArtifactTransferException: Failure to transfer it.geosolutions.imageio-ext:imageio-ext streams:jar:1.1.4 from http://download.java.net/maven/2 was cached in the local repository, resolution will not be reattempted until the update interval of maven2-repository.dev.java.net has elapsed or updates are forced. Original error: Could not transfer artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from/to maven2 repository.dev.java.net (http://download.java.net/maven/2): The operation was cancelled.
- ArtifactTransferException: Failure to transfer it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from http:// maven.geo-solutions.it/ was cached in the local repository, resolution will not be reattempted until the update interval of geosolutions has elapsed or updates are forced. Original error: Could not transfer artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from/to geosolutions (http://maven.geo-solutions.it/): The operation was cancelled.
- ArtifactTransferException: Failure to transfer org.jaitools:jt vectorbinarize:jar:1.2.0 from http://maven.restlet.org was cached in the local repository, resolution will not be reattempted until the update interval of maven-restlet has elapsed or updates are forced. Original error: Could not transfer artifact org.jaitools:jt-vectorbinarize:jar:1.2.0 from/to maven-restlet (http://maven.restlet.org): The operation was cancelled.
- Missing artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4
- ArtifactTransferException: Failure to transfer org.jaitools:jt-vectorbinarize:jar:1.2.0 from http://download.osgeo.org/webdav/geotools/ was cached in the local repository, resolution will not be reattempted until the update interval of osgeo has  elapsed or updates are forced. Original error: Could not transfer artifact org.jaitools:jt-vectorbinarize:jar:1.2.0 from/to osgeo (http://download.osgeo.org/webdav/geotools/): The operation was cancelled.
- ArtifactTransferException: Failure to transfer org.jaitools:jt-vectorbinarize:jar:1.2.0 from http://download.java.net/maven/2 was cached in the local repository, resolution will not be reattempted until the update interval of maven2-repository.dev.java.net has elapsed or updates are forced. Original error: Could not transfer artifact org.jaitools:jt-vectorbinarize:jar:1.2.0 from/to maven2 repository.dev.java.net (http://download.java.net/maven/2): The operation was cancelled.
- ArtifactTransferException: Failure to transfer org.jaitools:jt vectorbinarize:jar:1.2.0 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.jaitools:jt-vectorbinarize:jar:1.2.0 from/to central (http://repo.maven.apache.org/maven2): The operation was cancelled.
- ArtifactTransferException: Failure to transfer it.geosolutions.imageioext:imageio-ext-streams:jar:1.1.4 from http://maven.restlet.org was cached in the local repository, resolution will not be reattempted until the update interval of maven-restlet has elapsed or updates are forced. Original error: Could not transfer artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from/to maven-restlet (http://maven.restlet.org): The operation was cancelled.
- ArtifactTransferException: Failure to transfer org.jaitools:jtvectorbinarize:jar:1.2.0 from http://maven.geo-solutions.it/ was cached in the local repository, resolution will not be reattempted until the update interval of geosolutions has elapsed or updates ar forced. Original error: Could not transfer artifact org.jaitools:jt-vectorbinarize:jar:1.2.0 from/to geosolutions (http://maven.geosolutions.it/): The operation was cancelled.
- ArtifactTransferException: Failure to transfer it.geosolutions.imageioext:imageio-ext-streams:jar:1.1.4 from http://download.osgeo.org/webdav/geotools/ was cached in the local repository, resolution will not be reattempted until the update interval of osgeo has elapsed or updates are forced. Original error: Could not transfer artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from/to osgeo (http://download.osgeo.org/webdav/geotools/): The operation was cancelled.
- Missing artifact org.jaitools:jt-vectorbinarize:jar:1.2.0
- ArtifactTransferException: Failure to transfer it.geosolutions.imageioext:imageio-ext-streams:jar:1.1.4 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact it.geosolutions.imageio-ext:imageio-ext-streams:jar:1.1.4 from/to central (http://repo.maven.apache.org/maven2): The operation was cancelled. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T21:57:28.770

m2eclipse 正在使用 .m2/settings.xml 中指定的代理，但如果重新定义原型，它会忽略 nonProxyHosts。

如果所有新工件都出现这样的连接错误：m2eclipse 默认使用嵌入式 Maven 实例，而不是您的外部 Maven 安装。内部 Maven 实例可能不会使用与外部设置相同的 Maven 设置（例如 %USERPROFILE%/.m2/settings.xml），这可能会导致内部 Maven 实例无法通过您的代理进行连接。

您可以使用 Eclipse 首选项来添加您的外部 Maven 安装，并让它用于从 Eclipse 内部运行 Maven 命令。

尝试关闭您的 m2e 插件。

# java - 使用 CGLIB 创建实现新接口的 mixin

> ID：15684136
> 
> 赞同：0
> 
> 时间：2013-03-28T14:14:09.027
> 
> 标签：java, cglib

首先，我认为这不一定是一个好主意，我只是看看这是否真的可能。我可以看到一些好处，例如不必显式转换为我们发送给客户端的对象，以及使用接口将某些存在安全问题的字段列入黑名单。我绝对不会坚持这个想法，但我想试一试。

我们使用 Spring MVC + Jackson 直接从对象生成 JSON。我们的域对象包含发送给客户端的必要数据，并且我们有一个错误字符串列表，根据需要添加到每个传出的 JSON 请求中。

所以返回的 JSON 可能类似于

```
{ name: 'woohoo', location : 'wahoo', errors : ['foo'] } 
```

目前，我们有一个类来模拟客户端应该是什么，但我们总是用错误方法扩展一个公共基类。

所以，我们有：

```
interface NameAndLoc { 
  String getName(); 
  String getLocation(); 
} 
```

和

```
interface ResponseErrors { 
  List<String> getErrors(); 
  void appendError(String); 
} 
```

我们有两个实现这些接口的类，并希望 CGLIB 生成一个新的实现类：

```
interface NameAndLocResponse extends NameAndLoc, ResponseErrors {} 
```

目前，使用 CGLIB mixins，我可以生成具有以下内容的对象：

```
Object mish = Mixin.create(
   new Class [] {NameAndLoc.class, ResponseErrors.class},  
   new Object [] { new NameAndLocImpl(), new ResponseErrorsImpl() } ); 
```

然后我可以将对象转换为 NameAndLoc 或 ResponseErrors，但是，我想做的是创建一个使用相同支持类但实现 NameAndLocResponse 接口的对象，而不必扩展我们的常见错误处理类然后实现 NameAndLoc .

如果我尝试用我拥有的东西进行投射，它会出错。我确信这是可能的。

我认为它与此非常相似，但不完全是： [http ://www.jroller.com/melix/entry/alternative_to_delegate_pattern_with](http://www.jroller.com/melix/entry/alternative_to_delegate_pattern_with)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T01:09:55.523

只需将`NameAndLocResponse`接口添加到构造函数中的`Class`数组作为*最后一个*参数。结果对象将实现它。您可以在此博客条目中找到一个示例：http: [//mydailyjava.blogspot.no/2013/11/cglib-missing-manual.html](http://mydailyjava.blogspot.no/2013/11/cglib-missing-manual.html)`Mixin`

# php - PHP，包含多次需要include_once还是include？

> ID：15684143
> 
> 赞同：-3
> 
> 时间：2013-03-28T14:14:29.823
> 
> 标签：php

我在问自己为什么要使用 include 或 include_once。

我知道有一个[关于它](https://stackoverflow.com/questions/186338/why-is-require-once-so-bad-to-use)的问题，但我没有在其中找到我的答案。

就我而言，我的问题有点不同，但可以总结如下。如果我使用 4 个包含自己的文件，例如：

A 包括 D

B 包括 C、D

C 不包括

D 包括 C

我应该使用“include”还是“include_once”，为什么？

**编辑**

问题中的小错误。我只是重写。

**编辑**

为了解释我自己，D需要C才能工作，但C不需要D才能工作。有时我必须包含 C，有时我必须包含 D。D 已被重构，所以现在它自动包含 C，但是在许多目录中有超过 2000 个文件要查看......所以我想知道我是否使用D 中的“include_once”最好在 D 中使用“include”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:20:00.750

您应该使用`include_once`，否则，在加载 B 时，您将加载 D，然后再加载 B，然后再加载 D，以此类推（或者更准确地说，直到内存不足）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:28:16.360

使用 *_once。有这么多“奇怪”的包含让我想知道您的编程逻辑是否仍然有效。如果可能，我建议将 *_once 与自动加载器结合使用。

# c# - 沙箱之类的特权问题和 SPGroup.Users

> ID：15684147
> 
> 赞同：0
> 
> 时间：2013-03-28T14:14:49.450
> 
> 标签：c#, asp.net, sharepoint, web-parts

`SPSecurity.RunWithElevatedPrivileges`不适用于沙盒，这给我带来了一些问题。

```
SPGroupCollection _collGroups = _web.Groups;
foreach (SPGroup _Group in _collGroups)
{
    foreach (SPUser _User in _Group.Users /*<--ERROR HERE*/)
    {
        //CODE//
    }
} 
```

这部分代码在由不是站点集合管理员的用户执行时生成我的访问错误。问题是，我需要获取当前网站集的所有用户的列表，并通过 ajax 控件向他们发送通知。以上代码在 webpart 内的 aspx 页面中执行。有没有办法在不授予网站集管理权限的情况下获取用户列表？我只需要这个列表来放置用户，并将它们从 docLibrabry 中带有按钮的两个字段中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:40:46.017

> foreach（_web.SiteUsers 中的 SPUser _User）

从那个范围

> 站点用户

解决问题

# xpages - 在 XPages 中获取 Value Picker 和 HughesConnect Viewpicker 组合

> ID：15684149
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:00.043
> 
> 标签：xpages

我有一个从视图中使用 Ext Lib 值选择器的应用程序，它可以工作，但它非常笨拙。原因是有超过一千种选择，用户必须滚动浏览它们才能到达他/她想去的地方。我想使用 HughesConnect.com 的选择列表 CC，它非常好。但是，我遇到了一个可能非常简单但我无法弄清楚的特定问题。

我希望能够使用 HughesConnect.com 选择列表 CC 一次获取一个值并将其放入字段中。然后，当用户再次单击按钮时，我只希望他们能够获取一个值并将其附加到同一字段。我现在每次运行它时，它只是覆盖该字段。我不能在 CC 中使用多值，因为视图在同一文档的列中有多个值。我发现如果是这种情况，它就行不通。不管我怎么尝试。我对 XPages 中的数组不太擅长，所以我可能做错了什么，老实说，我什至没有任何示例代码，因为我尝试过的一切都没有奏效。

我开始怀疑这是否可能，但这听起来很简单，必须如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:33:04.393

值选择器允许您使用视图数据源添加搜索。有理由不使用它吗？我不记得搜索是否支持多选。它可能不会。

如果您想使用 Mark 的视图选择器，不妨来点创意。将值推送到具有 onChange 事件的隐藏输入字段中。在 onChange 事件中，将值附加到不同的多值字段。如果您将 Dojo 列表文本框绑定到您的多值字段，它将使用户更容易取消选择条目。这有点创意，但应该会产生您正在寻找的结果。

# java - 从组件中消除灰色背景

> ID：15684150
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:07.163
> 
> 标签：java, swing, jpanel, custom-component

我正在尝试将 jpanel 覆盖到我的画布的自定义背景上。我的背景是一个非常复杂的基于线程的渐变。问题是当我添加一个`JPanel`大小为 400 x 600 的（我的屏幕分辨率要大得多）时，画布的其余部分被洗成灰色。我尝试将 opaque 设置为 false 和其他假定的解决方案，但没有一个有效。有没有办法创建一个完整的自定义 JPanel 或消除 JPanel 区域之外的灰色层？

**编辑：**

将 JPanel 设置为红色，尺寸为 400 x 600 并设置在屏幕上 600 x 100 的位置后，整个面板将填满画布的完整大小。

```
 JPanel ptest = new JPanel();
    ptest.setLayout(null);
    ptest.setBackground(Color.RED);
    ptest.setBounds(new Rectangle(600, 100, 400, 600));
    frame_.getContentPane().add(ptest); 
```

我尝试了不同的布局，但得到了相同的结果。

# c++ - 平面内点的线性可分性

> ID：15684151
> 
> 赞同：1
> 
> 时间：2013-03-28T14:15:11.323
> 
> 标签：c++

我正在使用 c++ 创建一个算法。我有一个 320*240 像素的平面和一条线 (y=ax + b)，它将平面分成 2 个多边形。鉴于这些信息，我想问一下，是否有可能知道新的像素（x，y）属于 2 个多边形中的哪一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:15:50.893

你可以根据if分开

```
 y<ax+b or y>ax+b 
```

# c++ - 将十六进制转换为十进制

> ID：15684155
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:17.813
> 
> 标签：c++, visual-studio-2010, opencv

我想将从图像中读取的一些值保存在文本文件中。

它是关于方形字符 (uchar*)。所以我把它转换成 Float*。

进展顺利。但问题是这些值是六进制的！

请问如何将hexa转换为dec？我在 Stack over flow 中看到过（其他回答的问题是他们正在引入一些 C# 库，但我正在使用 c++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:28:25.227

是不是因为您将其转换为指针，而指针通常以十六进制显示。尝试铸造为双重

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:35:29.217

从您发布的评论中，我假设您想写出图像的内容，而不是像素的地址。在这种情况下，它只是

```
FILE << img[i] << ...; 
```

或者，如果您想将值解释为双精度值

```
FILE << static_cast<double>(img[i]) << ...; 
```

如果你想打印出像素的地址，而不是十六进制表示，你应该使用

```
FILE.setf(std::ios::dec);
FILE << &(img[i]) << ... 
```

# c# - .NET MySqlTransactions 是否在本地进行批处理/缓冲？

> ID：15684156
> 
> 赞同：2
> 
> 时间：2013-03-28T14:15:18.000
> 
> 标签：c#, mysql, performance, database-performance, mysql-connector

假设您有一百万行要插入到远程数据库中。

不费吹灰之力，您已执行以下操作来提高性能：

1.  重用单个 MySQL 连接
2.  创建一个准备好的`MySqlCommand`，您将在所有插入中重复使用
3.  用于`MySqlTransaction`防止每次插入后自动提交，并且仅`transaction.Commit()`在完成批处理后调用。

问题很简单：MySQL Connector.NET 在这些情况下会自动执行事务批处理，还是应该将多行单独连接成一个`INSERT INTO foo(bar) VALUES (..), (..), (..), (..), ...;`并在事务中执行多个？

在什么时候使用它成为一个好主意`MySqlBulkLoader`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T16:37:49.223

答：不，他们不是。即使在使用编译语句时，每次添加参数时，数据都会通过网络发送，然后在执行时进行更多的远程通信。

# binary - 在整数中切换位的最佳方法？

> ID：15684159
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:20.433
> 
> 标签：binary, integer, boolean-logic

假设我想将第 5 位切换为**32 位**/64 位整数（从零开始，位索引 = 4）。最有效的方法是什么？

字节长度示例：**01001010** → **01011010**

感兴趣的语言是：

*   动作脚本 3
*   C＃
*   爪哇：
    *   `int x = y ^ (1 << n);`[redcayuga](https://stackoverflow.com/users/199838/redcayuga)的提示
*   C/C++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:30:32.457

您想要独占或 1\. 在 java 中：

```
x = y ^ ( 1 << (n-1))
```

我从右到左计算位，即从最低有效位开始。我从零开始。

# asp.net - SqlReader 中未读取数据 不存在数据时尝试读取无效。

> ID：15684160
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:21.963
> 
> 标签：asp.net, sql, handler, sqldatareader

我知道这个问题之前已经发布了数百万次，但这可能会有所不同。

我正在使用带有列 id、year、month、pdffile 的 sql 表

在我的网页中，我希望用户从他们选择的时间范围内查看他们希望查看的 pdf 文档。

到目前为止：

```
string year = ddlYear.SelectedValue.ToString();    
string month = ddlMonth.SelectedValue.ToString();
pdfFrame.Attributes["src"] = "../pdfDocs.ashx?Year=" + year + "&Month=" + month; 
```

它加载pdf，如果它在那里。那是我的问题。我如何在我的问题标题中发现错误？我想捕获该错误并在标签中向用户显示一条消息，说明未找到文件。我正在使用处理程序来读取我的 pdf 文件的 varbinary。

这是处理程序代码：

```
SqlConnection conn = new SqlConnection(@"Server=DEV6\MSSQLHOSTING;Database=Intranet;Trusted_Connection=True;");
conn.Open();
SqlCommand cmd = new SqlCommand("select PDFDocument from LeaveChart where (Year like @Year and Month like @Month)", conn);
cmd.Parameters.AddWithValue("Year", context.Request.QueryString["Year"]);
cmd.Parameters.AddWithValue("Month", context.Request.QueryString["Month"]);
SqlDataReader reader = cmd.ExecuteReader();

reader.Read();

byte[] content = (byte[])reader.GetValue(0);
MemoryStream ms = new MemoryStream(content);
ms.Position = 0;
context.Response.ContentType = "Application/pdf";
ms.WriteTo(context.Response.OutputStream);
context.Response.End();
reader.Close();
conn.Close(); 
```

就像我说的那样，它可以显示当前文件。谁能提供一些建议？是否可以从处理程序将消息发送回网页，说明没有文件以及如何在不震惊客户的情况下显示它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:48:55.693

如果您可以更改 Handler 的签名，则：

```
public bool <YourHandlerName>(out MemoryStream ms)
{
SqlConnection conn = new SqlConnection(@"Server=DEV6\MSSQLHOSTING;Database=Intranet;Trusted_Connection=True;");
conn.Open();
SqlCommand cmd = new SqlCommand("select PDFDocument from LeaveChart where (Year like  @Year and Month like @Month)", conn);
cmd.Parameters.AddWithValue("Year", context.Request.QueryString["Year"]);
cmd.Parameters.AddWithValue("Month", context.Request.QueryString["Month"]);
SqlDataReader reader = cmd.ExecuteReader();
reader.Read();
ms = new MemoryStream(content);
if(reader.HasRows)
 {
  byte[] content = (byte[])reader.GetValue(0);
  ms.Position = 0;
  context.Response.ContentType = "Application/pdf";
  ms.WriteTo(context.Response.OutputStream);
  context.Response.End();
  reader.Close();
  conn.Close();
  return true;
 }
 return false;
} 
```

我想我正确地回答了你的问题。

# mysql - 在mysql中对unix类型日期进行排序

> ID：15684161
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:23.357
> 
> 标签：mysql, unix, date

有什么方法可以从以 unix 方式存储日期的 mysql 表中检索 SORTED 结果集？我的意思是这样的“Select * from tableName order by DATE DESC”，如果它是 Unix 类型，则意味着它存储为整数或 bigint，所以它并不能像我在这里写的那样工作，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:16:59.190

您可以使用`FROM_UNIXTIME`.

```
SELECT ..
ORDER BY FROM_UNIXTIME(column) 
```

[文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:17:13.100

如果要按日期而不是 unix int/bigint 对数据进行排序，则可以使用将 unix 时间转换为日期[`FROM_UNIXTIME`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

```
select *
from tableName
order by FROM_UNIXTIME(DATE) desc 
```

在转换之前按 unix 值排序应该仍然有效，因为它是一个 int 值。

# android - 如何从 android 4.0 上的 usb hid 设备读取数据

> ID：15684162
> 
> 赞同：1
> 
> 时间：2013-03-28T14:15:23.370
> 
> 标签：android, usb, hid

我不知道如何在Android 4.0上从usb hid设备读取数据，我已经使用`HashMap<String, UsbDevice> deviceList = managerme.getDeviceList()`了这个设备，但是我不知道如何从usb hid设备异步读取数据，请谁能帮助我，谢谢。

# xml - Docbook - 如何从 xsl 样式表中检索输入的 xml 文件

> ID：15684167
> 
> 赞同：2
> 
> 时间：2013-03-28T14:15:36.683
> 
> 标签：xml, xslt, docbook-5

我正在使用 docbook maven 插件编写一些文档，并且正在寻找自动在 HTML 输出的标题中制作导航栏。

我有一些这样组织的书：

*   指南1
*   指南2
*   教程
    *   教程1
    *   教程2

期望的结果是使用 XSL 样式表在 HTML 输出中为每本书生成一个导航栏。就像是 ：

```
<xsl:template name="user.header.content">
  <xsl:for-each select="something">
      <xsl:value-of select="somethingelse"/>
  </xsl:for-each>
</xsl:template> 
```

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:12:20.403

根据我的经验，通过 Web 浏览器提供文档的最佳方式是通过`maven-site-plugin`.

`maven-site-plugin`允许您生成站点，然后将其发布到`<distributionManagement>`POM 部分中指定的 URL。

`index.html`您可以通过编辑（以类似 wiki 的[APT 格式](http://maven.apache.org/plugins/maven-site-plugin/examples/creating-content.html)）来编写您的“导航栏” `index.apt`：

```
+- src/
   +- site/
      +- apt/
      |  +- index.apt 
```

然后生成站点：

```
+- target/
   +- site/
      +- index.html
      +- resources/
         +- Guide1.html
         +- Guide2.html
         +- tuto1.html
         +- tuto2.html
         +- Guide1.pdf
         +- Guide2.pdf
         +- tuto1.pdf
         +- tuto2.pdf 
```

可以通过*Maven 方式*实现：

*   创建一个包含两个子项目（Maven 模块）的项目：即`my-prj-doc`，`my-prj-site`
*   `my-prj-doc`通过 构建 DocBook 文档`docbkx-maven-plugin`。该项目的主要工件应该是`my-prj-doc-1.0.0.jar`将安装在本地 Maven 存储库（`.m2`目录）中的
*   `my-prj-site`生成网站`maven-site-plugin`；此外，`maven-dependency-plugin`（最终附加到`site`阶段）从本地 Maven 存储库获取`my-prj-doc-1.0.0.jar`并将其解压缩到`target/site/resources/`目录中

我的经验证明，这种方式是最好的方式之一，因为它提供：

*   **解耦**- 阅读文档和浏览文档是独立的概念，您可以将其反映在不同的项目和流程中
*   **可维护性**——在单独的项目上工作不太容易出错
*   **模块化**- 简而言之：如果您*开始将文档视为代码*，您可以将文档打包和分发为 API；即您可以编写一个FAQ Maven 子项目，然后您可以在您的和Maven 子项目中导入`faq-1.0.0.jar`工件，因此维护一个FAQ 子项目您将在两个（或更多）不同的最终文档中拥有相同的FAQ。`Guide1``Guide2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:32:46.277

**使用标准 XSLT 函数[`document()`](http://www.w3.org/TR/xslt#function-document)。**

**示例**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:value-of select=
  "document('http://www.w3.org/2007/schema-for-xslt20.xsd')
     /*/xs:annotation[1]/xs:documentation
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于任何 XML 文档（未使用）时，它会访问指定 URL 处的 XML 文档（这是 XSLT 2.0 语言的 XSD）并输出`xs:annotation/xs:documentation`此远程 XML 文档的第一个元素**的字符串值：

```
This is a schema for XSLT 2.0 stylesheets.

It defines all the elements that appear in the XSLT namespace; it also
provides hooks that allow the inclusion of user-defined literal result elements,
extension instructions, and top-level data elements.

The schema is derived (with kind permission) from a schema for XSLT 1.0 stylesheets
produced by Asir S Vedamuthu of WebMethods Inc.

This schema is available for use under the conditions of the W3C Software License
published at http://www.w3.org/Consortium/Legal/copyright-software-19980720

The schema is organized as follows:

PART A: definitions of complex types and model groups used as the basis 
        for element definitions
PART B: definitions of individual XSLT elements
PART C: definitions for literal result elements
PART D: definitions of simple types used in attribute definitions

This schema does not attempt to define all the constraints that apply to a valid
XSLT 2.0 stylesheet module. It is the intention that all valid stylesheet modules 
should conform to this schema; however, the schema is non-normative and in the event 
of any conflict, the text of the Recommendation takes precedence.

This schema does not implement the special rules that apply when a stylesheet
has sections that use forwards-compatible-mode. In this mode, setting version="3.0"
allows elements from the XSLT namespace to be used that are not defined in XSLT 2.0.

Simplified stylesheets (those with a literal result element as the outermost element)
will validate against this schema only if validation starts in lax mode.

This version is dated 2007-03-16
Authors: Michael H Kay, Saxonica Limited
         Jeni Tennison, Jeni Tennison Consulting Ltd.

2007-03-15: added xsl:document element
            revised xsl:sequence element
            see http://www.w3.org/Bugs/Public/show_bug.cgi?id=4237 
```

**请注意**：

如果要访问的 XML 文档位于本地文件中，请使用“file:”模式，如下所示：

`'file:///c:/temp/myXmlDocument.xml'`

# javascript - JavaScript 两个 onload 函数

> ID：15684168
> 
> 赞同：2
> 
> 时间：2013-03-28T14:15:39.847
> 
> 标签：javascript, html, function, dom, onload

我对 JavaScript 编程很陌生，我正在尝试创建一些脚本，以节省我维护我的一个网站的时间。

现在我在同一个脚本中有两个函数，我从文档的头部调用它们，我试图让它们同时使用 onload 事件处理程序加载。我在我的脚本中使用 window.onload 命令执行此操作（我想让我的脚本尽可能不引人注目，所以我只是在标题中调用脚本）。问题是只有第一个函数加载，第二个没有。可以使用以下方法调用这两个函数：

```
window.onload=function(){
function1();
function2();
} 
```

还是我需要使用其他代码来完成此操作？

如果您能尽可能简单地解释一下，我将不胜感激，因为我对 JavaScript 和一般编程非常陌生。

PS如果onload无法加载多个功能，请您向我解释为什么会这样，以便我将来知道。

好的，我从答案中看到我的问题可能留下了太多的假设，所以这里是我试图调用的函数的完整代码（这是我在我的 html 文档的头部调用的脚本）：

我试图避免将代码放在这里，因为我的变量是用塞尔维亚语编写的（就像我来自塞尔维亚一样），但我希望您仍然能够在没有太多混淆的情况下浏览它。

在下面的代码中，我在脚本底部调用了两个函数（lista() 和 ostale()），而 moveover() 函数只是由 lista() 函数调用的辅助函数。本质上，第一个 (lista()) 列出了 div“boje”（英文翻译为“colors”）的所有元素，并且根据用户将鼠标悬停在上面的颜色，背景图像会发生变化。它还为那些用户应该悬停的图像元素添加了一些属性。第二个（ostale（）（翻译成英文“others”）应该只为其余的彩色图像添加属性，如果用户将鼠标悬停在它们上面就不应该做任何事情。但是当我在本地主机中打开页面时它不会在 Firefox 中显示

```
function lista()
{
var boje = document.getElementById('boje');
var broj = boje.childNodes.length;
for(i=1; i<broj; i++)
{
    var stavka = boje.childNodes.item(i);
    stavka.setAttribute("id", i);
    stavka.setAttribute("onmouseover", "moveover(src)");
    stavka.setAttribute("alt", "Boja");
    stavka.setAttribute("class", "boja");
    stavka.hspace="2";
    stavka.height="23";
}
}

function moveover(adresaBoje)
{
var izvor = adresaBoje;
var slika = izvor.slice(0, izvor.length-4);
var pocetak = "url(";
var ekstenzija = ".jpg)";
var novaSlika = pocetak.concat(slika, ekstenzija);
document.getElementById('slika').style.backgroundImage=novaSlika;
}

function ostalo(){
var ostaleboje = document.getElementById('ostale');
var ostalebroj = ostaleboje.childNodes.length;
for(n=1; n<ostalebroj; n++)
{
    var ostalestavka = ostaleboje.childNodes.item(n);
    ostalestavka.setAttribute("alt", "Boja");
    ostalestavka.hspace="2";
    ostalestavka.height="23";
}
}

window.onload=function(){
try
{
lista();
ostalo();
}
catch(err)
{
alert(err);
}
} 
```

在我尝试加载页面后，它会提示我一个错误：“TypeError: stavka.setAttribute is not a function”。

这是我试图操作的 html 文档：

```
<div id="slika" style="background-image: url(images/nova_brilliant/1.jpg)">
</div>

<div id="tekst">

<h1>Nova Brilliant</h1>

<div id="sadrzaj">
<p>Pre&#273;ite mi&#353;em preko &#382;eljene boje da biste videli kako izgleda ova kuhinja u toj boji:</p>
<div id="boje">
<img src="images/nova_brilliant/1.gif"><img src="images/nova_brilliant/2.gif"><img src="images/nova_brilliant/3.gif">
</div>
<p>Ostale dostupne boje:</p>
<div id="ostale">
<img src="images/nova_brilliant/4.gif"><img src="images/nova_brilliant/5.gif"><img src="images/nova_brilliant/6.gif">
</div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-02T15:10:11.293

我遇到了同样的问题。我遇到了一些帮助，但这个很容易理解并且对我有用：

```
window.addEventListener("load", func1); window.addEventListener("load", func2); 
```

就像@Quentin 你可以[在这里阅读更多关于它的信息](http://www.htmlgoodies.com/beyond/javascript/article.php/3724571/Using-Multiple-JavaScript-Onload-Functions.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:18:26.470

> 两个函数都可以调用吗

是的。如果您通过分配给 DOM 属性来添加事件处理程序，那么您只能为每个属性分配一个函数，但该函数可以调用其他函数。

但是，如果你这样做并且第一个函数抛出错误，那么第二个函数根本不会触发。它还将丢弃上下文和参数，因为它们不会传递给被调用的函数。

您可以像这样解决这些问题：

```
window.onload=function(){
  try {
    function1.apply(this, arguments);
  } catch (e) { }
  try {
    function2.apply(this, arguments);
  } catch (e) { }
} 
```

> 还是我需要使用其他代码来完成此操作？

你应该`addEventListener`改用。这避免了摆弄 apply 的需要，并保护您免受抛出错误的影响。有关更多详细信息，请参阅[MDN 事件文档](https://developer.mozilla.org/en-US/docs/DOM/event)。

```
window.addEventListener('load', function1);
window.addEventListener('load', function2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:52:35.957

是的你可以。但是，如果第一个出错，第二个不会触发。

使用它来捕获错误：

```
try { //try executing the functions
  function1();
  function2();
}
catch(error) { // If there's an error
  alert(error); // alert the error.
} 
```

在试验 javascript 时放置`try`和放置是一个很好的做法。`catch`

**已编辑：对不起，我将 childNodes[] 与 childNodes.item() 混淆了。**

顺便说一句，我尝试了这样的事情，它工作得很好：

```
<head>
<script>

window.onload = function() {
div = document.getElementById("someDiv");
length = div.childNodes.length;
    first();
    second();
}
function first() {
    for(var i=0;i<length;i++)   {
        var set = div.childNodes.item(i);
        set.setAttribute("name", "span " + (i+1));
    }     
}
function second() {
    for(var i=0;i<length;i++)   {
        name = div.childNodes[i].getAttribute("name");
        console.log(name);
    }
}
</script>
</head>
<body>
<div id='someDiv'><span id='span1'></span><span id='span2'></span></div>
</body> 
```

**更新：我发现了错误：** 实际上您的代码没有任何问题。它工作得很好，但是 boje 的最后一项是空白空间，这意味着一个文本节点。这就是错误不断出现的原因。改变`for(i=1; i<broj; i++)`，`for(i=1; i<broj-1; i++)`一切都应该很好。

# java - SFTP 连接抛出暴露 SFTP 密码的奇怪 FileTransferException

> ID：15684173
> 
> 赞同：1
> 
> 时间：2013-03-28T14:15:51.497
> 
> 标签：java, sftp

真的很奇怪，为什么 zehon 会返回我的日食位置，以及我的 SFTP 密码作为*FileSystemException 的一部分*？

我检查了远程主机确实是一个 SFTP 服务器，并且客户端正在使用 SFTP 进行连接。

Zehon API[在这里](http://www.zehon.com/javadocs/com/zehon/sftp/SFTPClient.html)

**堆栈跟踪**

```
 Reading file from C:\srcFolde\FileToBeUploaded.zip
    com.zehon.exception.FileTransferException:
    org.apache.commons.vfs.FileSystemException: 
    Unknown message with code:
        "C:<location of eclipse>/<sftp password>?" does not exist
        at int result = sftp.sendFile(filePath, ftpDestFolder); 
```

**代码**

```
SFTPClient sftp = new SFTPClient(ftpServer, 22, ftpUserName, ftpPassword, true);
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(fileName);                
            String filePath=fileName.substring(0, fileName.length()-4) + ".zip";
            String ftpDestFolder="\\sftpDestFolder";
            int result = sftp.sendFile(filePath, ftpDestFolder);
            Logger.debug("sftp result = " + result);
        } catch (FileTransferException e) {
            e.printStackTrace();
            return false;
        } finally {
            try {
                if (fis != null) {
                    fis.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:24:20.120

您使用了错误的构造函数。来自 Javadocs

[http://www.zehon.com/javadocs/com/zehon/sftp/SFTPClient.html](http://www.zehon.com/javadocs/com/zehon/sftp/SFTPClient.html)

你已经通过`ftpPassword`了它所期望的地方`privateKeyPath`。

# sockets - 我可以仅通过端口号关闭套接字吗？

> ID：15684176
> 
> 赞同：0
> 
> 时间：2013-03-28T14:15:55.633
> 
> 标签：sockets, junit, port

我正在测试一个简单的客户端/服务器应用程序。我在客户端的单元测试需要服务器启动，但我似乎遇到了挂起（单个测试有效，但不超过一个）。

作为我的 tearDown() 的一部分，我认为关闭服务器套接字会很好，但是......因为我无法从客户端代码访问服务器对象，所以我不能做一个简单的事情： serverSocket.close()。也就是说，我确实知道套接字正在运行的端口号，仅使用端口号，是否可以关闭套接字，而不管使用它的对象在哪里/如何驻留？

对不起，这可能是一个微不足道的问题......谢谢......

我想另一个相关的问题是......我可以根据已经使用的端口号创建一个套接字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:11:48.930

如果套接字在您的进程中，您可以做的是遍历从 0 到的所有文件描述符`getrlimit(RLIMIT_NOFILE)`并调用`getsockname()`它们中的每一个。如果调用成功并且端口号匹配，则您已经通过端口号找到了您的套接字（但请注意，可能是具有相同端口号但绑定到不同地址的多个套接字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:25:16.490

不可以。您需要获取服务器软件才能关闭端口。

唯一的另一种选择是终止服务器：您可以使用 lsof 或 netstat 识别端口打开的进程，然后终止该进程。不过，这是一种释放端口的残酷方式。在你的情况下，你最好修复你的软件不要挂起！

# apache-flex - Flex 上的可追溯性矩阵图

> ID：15684177
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:15:56.347
> 
> 标签：apache-flex, matrix, charts, flex4, traceability

我需要使用 FLEX 4 生成一个可追溯性矩阵。我找到的最接近的东西是绘图图，但它对我来说似乎不是正确的东西。

有什么功能或框架可以帮助我吗？我检查了 axiis 框架，但我没有找到任何东西 =/

谢谢你，抱歉英语不好：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:05:12.350

如果您喜欢冒险，您可以使用`DataGrid`控件来实现这一点。我不认为有一个图表对象会给你这个。

第一列将是您的行标题，单元格将是 ownerdraw。

让第一行垂直写入可能是一个问题，但我确信它已经在某个地方完成了。

# python - 计数行为滚动文本框提供了错误的结果

> ID：15684178
> 
> 赞同：2
> 
> 时间：2013-03-28T14:15:58.930
> 
> 标签：python, textbox, scroll, xbmc

我在 python 中为这样的文本计算行数：

```
count = 0
for ch in text:
    if( ch == "\n" ):
        count += 1
return count 
```

相同的文本进入 textBox 控件。我想滚动到最后一行，但行数无济于事，因为 textBox 包裹了长行，使它们成为 2 行或更多行。
我可以通过滚动到最后一行`-1`，但是我不能再向上滚动了。我需要知道（实际）最大行数，以便可以滚动到我想要的任何位置。

```
lastLine = self.count_lines( text )
self.getControl( 100 ).setText( text )
self.getControl( 100 ).scroll( lastLine ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:45:24.450

你说一条长线被分成两行或更多，对吧？

你可以这样数行

```
count=0
for a in string.split():
    count+= 1+a//MaxLen 
```

其中 string 是您正在处理的文本，MaxLen 是文本框可以在一行中显示的最大字符数

但是，如果您不知道如何获得 MaxLen，这并不能解决问题，而且我实际上不...

# android - 在新活动中按下按钮时Android应用程序崩溃

> ID：15684180
> 
> 赞同：0
> 
> 时间：2013-03-28T14:16:05.633
> 
> 标签：android, database, button, logcat

我正在制作一个在 SQLite 数据库中保存国家/地区列表的 Android 应用程序。初始屏幕显示列表。当您按下“编辑列表”时，一个新的活动开始，您可以在其中进入一个新的国家或删除整个列表。该应用程序运行良好，直到我在第二个活动中单击一个按钮。如果我进入我的新国家并单击添加，该应用程序会给我一条消息，它已停止，但该国家仍会添加到我的数据库中。我的全部删除按钮也是如此。我的 logcat 中出现错误，但它仍然删除了所有内容。这是我发生错误的类的代码：

```
public class EditList extends Activity
{
    private DBManager db;
    Cursor cursor;
    EditText editCountry, editYear;
    Button add, delete, back;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editCountry = (EditText)findViewById(R.id.editcountry);
        editYear = (EditText)findViewById(R.id.edityear);
        add = (Button)findViewById(R.id.add);
        delete = (Button)findViewById(R.id.delete);
        back = (Button)findViewById(R.id.backmain);

        //Open database and fill it with content, then close it
        db = new DBManager(this);
        db.openToWrite();

        add.setOnClickListener(buttonAddOnClickListener);
        delete.setOnClickListener(buttonDeleteAllOnClickListener);

        //------
        Log.i("Test", "back to main");

        //go back to the main list screen
        back = (Button)findViewById(R.id.backmain);
        back.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                db.close();
                finish();
            }
        });
    }

    //insert new country button
    Button.OnClickListener buttonAddOnClickListener = new Button.OnClickListener()
    {  
        @Override
        public void onClick(View arg0) 
        {
            int year = Integer.parseInt(editYear.getText().toString());
            String country = editCountry.getText().toString();

            db.insert(year, country);

            updateList();

            //clear text fields after use
            editYear.setText(null);
            editCountry.setText(null);
        }
    };

    //delete all button
    Button.OnClickListener buttonDeleteAllOnClickListener = new Button.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            db.deleteAll();

            updateList();
        }
    };

    private void updateList()
    {
        cursor.requery();
    }
} 
```

这是发生的 logcat 错误：

```
02-07 22:32:31.117: D/AndroidRuntime(2633): Shutting down VM
02-07 22:32:31.117: W/dalvikvm(2633): threadid=1: thread exiting with uncaught exception (group=0xb4e35908)
02-07 22:32:31.158: E/AndroidRuntime(2633): FATAL EXCEPTION: main
02-07 22:32:31.158: E/AndroidRuntime(2633): java.lang.NullPointerException
02-07 22:32:31.158: E/AndroidRuntime(2633):     at com.mypackage.msdassignment.EditList.updateList(EditList.java:90)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at com.mypackage.msdassignment.EditList.access$1(EditList.java:88)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at com.mypackage.msdassignment.EditList$1.onClick(EditList.java:68)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.view.View.performClick(View.java:4202)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.view.View$PerformClick.run(View.java:17340)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.os.Handler.handleCallback(Handler.java:725)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.os.Looper.loop(Looper.java:137)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at java.lang.reflect.Method.invokeNative(Native Method)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at java.lang.reflect.Method.invoke(Method.java:511)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-07 22:32:31.158: E/AndroidRuntime(2633):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:22:26.623

你永远不会实例化你的光标。您声明它，然后使用它。那将失败。

# google-maps-api-3 - 谷歌地图 API v3 没有得到坐标

> ID：15684181
> 
> 赞同：0
> 
> 时间：2013-03-28T14:16:07.747
> 
> 标签：google-maps-api-3, qlikview

这是我在 Qlickview 中的代码：

```
let noRows = NoOfRows('GoogleMaps')-1;

for i=0 to $(noRows)

let a=peek('CUSTACCOUNT',$(i),'GoogleMaps');
let b=peek('Adresa',$(i),'GoogleMaps'); 

Data:
LOAD
'$(a)' as [Kupac šifra],
'$(b)' as Adresa,
subfield([Response/Placemark/Point/coordinates], ',' ,1) AS longitude,
subfield([Response/Placemark/Point/coordinates], ',' ,2) AS latitude
FROM [http://maps.googleapis.com/maps/geo?q=$(b)&output=xml&oe=utf8&key=AIzaSyBByoqS6QmwjSOSRDIOxRe82cUW-iLYJo4] (XmlSimple, Table is [kml]); 
```

接下来我；

“输出”如下所示：

```
Data:
LOAD
'454874' as [Kupac šifra],
'Frankfurt Deutschland' as Adresa,
subfield([Response/Placemark/Point/coordinates], ',' ,1) AS longitude,
subfield([Response/Placemark/Point/coordinates], ',' ,2) AS latitude
FROM [http://maps.googleapis.com/maps/geo?q=Frankfurt Deutschland&output=xml&oe=utf8&key=AIzaSyBByoqS6QmwjSOSRDIOxRe82cUW-iLYJo4] (XmlSimple, Table is [kml]) 
```

与谷歌的通信不起作用，没有返回坐标。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:23:31.503

do this trick, it's definitelly working: [http://www.qvsource.com/wiki/General-Web-Connector-For-QlikView.ashx#Example_2](http://www.qvsource.com/wiki/General-Web-Connector-For-QlikView.ashx#Example_2)

1) open QV Script 2) open wizard Web File 3) copy&paste this link [http://maps.google.com/maps/api/geocode/XMLaddress=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.google.com/maps/api/geocode/XMLaddress=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false) 4) choose XML 5) three tables will be generated, just to simplify the queries use only GeoCodeResponse: 6) Data in address do not have to include any special letters (Ö => Oe, ...) and should be concatenated with ,+ signs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:31:18.740

最后更新：

如果您使用此字符串修改您的 url，您将看到状态：

[ [http://maps.googleapis.com/maps/api/geocode/xml?address=](http://maps.googleapis.com/maps/api/geocode/xml?address=) $(vAddress)+fr&output=csv&oe=utf8&sensor=false&key=AIzaSyBByoqS6QmwjSOSRDIOxRe82cUW-iLYJo4]

我的仍然是 REQUEST_DENIED。我想这可能是我们的域名在谷歌的价目表上，他们要求我们注册为“公司的谷歌地图 api”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:07:44.503

解决方案是：

表：添加 LOAD '$(i)' 作为 Rowno，@1、@2、@3 作为纬度，@4 作为经度 FROM [ [http://maps.googleapis.com/maps/api/geocode/json?address=](http://maps.googleapis.com/maps/api/geocode/json?address=) $(vAddress)&sensor=false]

请注意，您的邮政数据与

```
 ,+ 
```

就像在示例中一样： [http ://maps.google.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.google.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:32:44.140

我面临同样的问题，发现以下内容： [https ://developers.google.com/maps/documentation/geocoding/?hl=de](https://developers.google.com/maps/documentation/geocoding/?hl=de)

自 8.3.2013 起，不再支持地理编码 API 2.0。

新的编码是： [http ://maps.googleapis.com/maps/api/geocode/output?parameters](http://maps.googleapis.com/maps/api/geocode/output?parameters)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T06:21:39.750

下次更新：请参考此链接：http: [//community.qlikview.com/thread/46602](http://community.qlikview.com/thread/46602)

这种编码也从谷歌获得状态，在我的情况下，我得到 610 = bad key [http://community.qlikview.com/servlet/JiveServlet/download/188551-30764/QVGeocodeur.qvw](http://community.qlikview.com/servlet/JiveServlet/download/188551-30764/QVGeocodeur.qvw)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-11T21:23:05.727

尝试这个：

数据： LOAD '454874' as [Kupac šifra]，'Frankfurt Deutschland' as Adresa，子字段（[lng]，'，'，1）作为经度，子字段（[lat]，'，'，1）作为纬度 FROM [ [http://maps.googleapis.com/maps/api/geocode/xml?address=Frankfurt](http://maps.googleapis.com/maps/api/geocode/xml?address=Frankfurt) Deutschland&sensor=false]（XmlSimple，表格为 [GeocodeResponse/result/geometry/location]）；

# mysql - 将多个元组选择为一个

> ID：15684182
> 
> 赞同：-3
> 
> 时间：2013-03-28T14:16:13.063
> 
> 标签：mysql, sql, select

```
SELECT contact_id, name, email, phone, city 
FROM ak_contact
WHERE email = 'test@gmail.com'
ORDER BY contact_id DESC 
```

Tis 查询返回如下内容：

```
contact_id  name       email     phone      city

  8499  Serj    test@gmail.com      
  8498  Serj    test@gmail.com  3-33-333    
  8494  Serj    test@gmail.com              London
  8493  Serj    test@gmail.com  2-22-222 
```

但是我需要一个元组，因为结果只包含最新的值（如果它们不是 null/empty）所以我需要的结果应该是这样的：

```
 contact_id name   email           phone       city

      8499  Serj    test@gmail.com  3-33-333    London 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:26:12.130

我通常不喜欢嵌套`select`语句，但这是在 MySQL 中解决此问题的一种方法：

```
select (select contact_id
        from ak_contact
        where email = 'test@gmail.com' and
              contact_id is not null
        order by contact_id desc
        limit 1
       ) as contact_id,
       (select name
        from ak_contact
        where email = 'test@gmail.com' and
              name is not null
        order by contact_id desc
        limit 1
       ) as name,
       (select phone
        from ak_contact
        where email = 'test@gmail.com' and
              phone is not null
        order by contact_id desc
        limit 1
       ) as phone,
       (select city
        from ak_contact
        where email = 'test@gmail.com' and
              city is not null
        order by contact_id desc
        limit 1
       ) as city 
```

每列可能来自不同的行，因此每列都有自己的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:34:37.180

更符合戈登的回答......

```
SELECT a.c_id, 
       CASE 
         WHEN b.name IS NULL THEN (SELECT name 
                                   FROM   ak_contact 
                                   WHERE  name IS NOT NULL 
                                          AND email = a.email 
                                   ORDER  BY c_id DESC 
                                   LIMIT  1) 
         ELSE b.name 
       end AS name, 
       b.email, 
       CASE 
         WHEN b.phone IS NULL THEN (SELECT phone 
                                    FROM   ak_contact 
                                    WHERE  phone IS NOT NULL 
                                           AND email = a.email 
                                    ORDER  BY c_id DESC 
                                    LIMIT  1) 
         ELSE b.phone 
       end AS phone, 
       CASE 
         WHEN b.city IS NULL THEN (SELECT city 
                                   FROM   ak_contact 
                                   WHERE  city IS NOT NULL 
                                          AND email = a.email 
                                   ORDER  BY c_id DESC 
                                   LIMIT  1) 
         ELSE b.city 
       end AS city 
FROM   (SELECT email, 
               Max(c_id) AS c_id 
        FROM   ak_contact 
        WHERE  email = 'test@gmail.com' 
        GROUP  BY email) a 
       LEFT JOIN ak_contact b 
              ON b.c_id = a.c_id 
```

**结果**

```
| C_ID | 姓名 | 电子邮件 | 电话 | 城市 |
-------------------------------------------------- --
| 8499 | 服务 | test@gmail.com | 3-33-333 | 伦敦 |
```

[查看演示](http://sqlfiddle.com/#!2/a8732/3)

# eclipse - 如何在 Eclipse 项目资源管理器中的包内创建子包

> ID：15684183
> 
> 赞同：42
> 
> 时间：2013-03-28T14:16:13.593
> 
> 标签：eclipse, package

如何在 Eclipse 项目资源管理器的包中创建子包？

我已经试过了。。

`com.proj.test`

然后我创建一个新包

`com.proj.test.child`

在包处添加子包

`com.proj.test`,

但没有成功

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-01-29T13:46:03.047

要在 Eclipse 包资源管理器中启用分层可视化，请执行以下步骤：

在 Package Explorer View / View Menu 中（右上方的向下箭头）转到 Package Presentation 并将类型设置为 Hierarchical。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-28T14:22:17.230

您所做的是正确的，我假设您正在使用“项目资源管理器”视图，切换到分层视图以将内容视为子父级：Window->Show View->Navigator

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-28T14:20:03.237

右键单击 package `com.proj.test`，**new** -> **package**然后`com.proj.test.child`输入名称。

我刚才试了一下，效果很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-28T11:30:57.443

**当您从 eclipse 菜单中选择“New Package”时，相应的文件夹也将自动创建。**

您不必一次定义一个级别的子包。

如果您定义一个新包并输入包名

> **com.coder.javapackage.innerone.etc**

该包树中的任何缺失元素也将自动创建。

![日食的例子](../Images/23a5253c6cea76b0efc188fa2d25122f.png)

这只是包装上的视觉表示。实际上，它们可以放在两个不同的 jar 中，但您不应该担心它，因为 jvm 和 loader 会在内部处理它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-06T10:28:40.030

在 Project Explorer 透视图中 View Menu -> Package Presentation -> Hierarchical 。我希望它有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-26T00:10:50.810

我放弃了尝试使用 Eclipse 进行推理，因为它似乎完全忽略了我的层次包表示设置，而且由于某种原因它忽略了包并因此拒绝编译……我只是自己在 Finder 中创建了文件夹层次结构，然后将其导入蚀。这解决了一切。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-15T18:11:04.643

我能够更改“ **Package Presentation** ”选项，默认情况下将“ **Flat** ”选项更改为“ **Hierarchical** ”。此选项出现在“项目资源管理器”透视图上的“**查看菜单”按钮中。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-25T07:13:50.013

首先创建父包，然后右键单击父包选择新包，您会看到新窗口出现，然后在父包旁边用点写新包名称。Ex-test（这是称为 test 的父包） test.model（这是称为模型的子包）这样你可以不断地制作更多的包，如 - test.model.modelOne 希望这会对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-22T09:20:19.150

右键单击父包并写入子包的完整名称即可。但是为了获得良好的图形表示，您必须在此*子包中***添加一个文件**......它只是刷新 IHM（如果您查看项目的文件夹，它们在此刷新之前已经存在）。Eclipse 没有刷新足够多的项目窗口...

 ** * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-20T19:51:42.090

如果您的项目在 "Project explorer" 视图下，则将其更改为 "Navigator" 。如下

```
 Window->Show View->Navigator
      By doing this you will able to see packages as parent child hierarchy. 
```*

# connection - Phantomjs 加载页面缓慢

> ID：15684185
> 
> 赞同：18
> 
> 时间：2013-03-28T14:16:22.100
> 
> 标签：connection, phantomjs

我是 phantomjs 的新手，在标准的 centOS 服务器上尝试它（安装了 httpd 等，但除了名称服务器设置为 8.8.8.8 和 8.8.4.4 之外没有修改设置）。

我正在使用默认的 loadspeed.js 文件（被重命名）。但是，页面速度似乎非常慢。这是一个例子：

```
$ phantomjs phantomjs.js  http://www.google.com/
starting
Loading time 90928 msec

$ phantomjs phantomjs.js http://173.194.67.138/ #(one of google's public ips)
starting
Loading time 30204 msec 
```

当我在服务器上加载任何 url（例如[http://something.be](http://something.be)）时，加载时间为 141 毫秒：

```
 $ phantomjs phantomjs.js http://something.be
 starting
 Loading time 141 msec 
```

有谁知道是什么导致我的连接这么慢？连接本身很好，wget 需要几秒钟来下载几 MB 的文件。

此外，当我在本地 OSX 上为 Google 运行完全相同的脚本时，输出如下：

```
 phantomjs phantomjs.js http://google.com/
 starting
 Loading time 430 msec 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-28T14:34:55.180

找到它 - 似乎 ipv6 是罪魁祸首。

我通过运行以下命令暂时禁用了它：

```
echo 1 > /proc/sys/net/ipv6/conf/all/disable_ipv6 
echo 1 > /proc/sys/net/ipv6/conf/default/disable_ipv6 
```

测试证实：

```
$ phantomjs phantomjs.js http://google.com
starting
Loading time 230 msec 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-13T06:29:22.793

好吧，在我的例子中，页面正在等待一些 GET 请求并且无法到达请求的服务器并且它一直等待很长时间。我只有在使用远程调试器选项时才能弄清楚。

```
phantomjs --remote-debugger-port=9000 loadspeed.js <some_url> 
```

在 loadspeed.js 文件中

```
page.onResourceRequested = function (req) {
    console.log('requested: ' + JSON.stringify(req, undefined, 4));
};

page.onResourceReceived = function (res) {
    console.log('received: ' + JSON.stringify(res, undefined, 4));
}; 
```

然后在任何 webkit 浏览器（safari/chrome）中加载 localhost:9000 并查看控制台日志，我可以在其中发现它正在等待一些失败的请求很长时间。

绕过这个 - 减少超时：

```
page.settings.resourceTimeout = 3000; //in secs 
```

在那之后事情进展得很快。希望这可以帮助

# c# - Booksleeve 过早关闭连接？

> ID：15684187
> 
> 赞同：1
> 
> 时间：2013-03-28T14:16:36.050
> 
> 标签：c#, booksleeve

我在 VS2010 中的 Booksleeve 1.1.0.5 版本无法按照我打算使用的方式工作。发生的事情是在执行并等待操作之后，Booksleeve 有时会使连接处于关闭状态，因此下游操作会引发异常。

我遇到的最简单的问题是：

```
static void Main(string[] args)
{
     Func<RedisConnection> getNewRedisConnection = () =>
        {
            RedisConnection conn = new RedisConnection("Belasco");
            conn.Error += (obj, eArgs) => { throw eArgs.Exception; };
            return conn;
        };

    RedisConnection redisConn = null;
    TaskScheduler.UnobservedTaskException += new EventHandler<UnobservedTaskExceptionEventArgs>(TaskScheduler_UnobservedTaskException);

    redisConn = getNewRedisConnection();
    redisConn.Open();

    var test1 = redisConn.Sets.GetAllString(0, "test1");
    var testValues1 = test1.Result;
    //var testValues1 = redisConn.Wait(test1);

    var test2 = redisConn.Sets.GetAllString(0, "test2");
    var testValues2 = test2.Result;
    //var testValues2 = redisConn.Wait(test2);

    redisConn.Close(false);

    Console.WriteLine("Done");
    Console.ReadKey();
}

static void TaskScheduler_UnobservedTaskException(object sender, UnobservedTaskExceptionEventArgs e)
{
    throw new NotImplementedException();
} 
```

行`var test2 = redisConn.Sets.GetAllString(0, "test2");`抛出“队列已关闭”异常。

现在，如果我关闭并重新打开请求之间的连接，看起来一切正常。

```
 var test1 = redisConn.Sets.GetAllString(0, "test1");
    var testValues1 = test1.Result;
    //var testValues1 = redisConn.Wait(test1);

    redisConn.Close(false);
    redisConn = getNewRedisConnection();
    redisConn.Open();

    var test2 = redisConn.Sets.GetAllString(0, "test2");
    var testValues2 = test2.Result;
    //var testValues2 = redisConn.Wait(test2); 
```

但是，如果我执行“设置”操作，一切似乎又回到了破碎状态。

```
 redisConn = getNewRedisConnection();
    redisConn.Open();

    var test0 = redisConn.Sets.Add(0, "test1", new string[] { "11", "22", "33", "44", "55" });
    redisConn.Wait(test0);

    redisConn.Close(false);
    redisConn = getNewRedisConnection();
    redisConn.Open();

    var test1 = redisConn.Sets.GetAllString(0, "test1");
    var testValues1 = test1.Result;
    //var testValues1 = redisConn.Wait(test1);

    redisConn.Close(false);
    redisConn = getNewRedisConnection();
    redisConn.Open();

    var test2 = redisConn.Sets.GetAllString(0, "test2");
    var testValues2 = test2.Result;
    //var testValues2 = redisConn.Wait(test2); 
```

Transactions 我也有同样的问题，但我觉得它源于同一个问题。我需要检索值，然后排队另一个命令的原因是因为我以后对 Redis 的操作是根据我返回的值来确定的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:21:00.920

首先，不要在这里急切地关闭连接离子。BookSleeve 被设计为用作线程安全的多路复用器，同时从任意数量的调用者那里获取负载。打开连接有开销。现在，有几种方法可以关闭红色连接：

*   你选择性地关闭它
*   服务器关闭它（连接超时，客户端无法处理积压）
*   客户端在入站流中检测到它不期望的东西

我的猜测是服务器配置了连接超时。我不知道 1.1.*，但在某些时候添加了自动超时配置检测和保持活动“ping”消息，这有帮助。您可以通过 redis-cli 中的“config get timeout”检查超时。如果这是问题所在，您可能会发现升级客户端版本会有所帮助。在某些构建中，您还可以手动指定超时配置（如果您想否决服务器）。

对于意外数据 - 这不太可能，但您可以挂钩一些事件来检测、记录和对此做出反应。

# nhibernate - （流利的）当业务对象由合同转换器构造时，nHibernate 不会从集合中删除项目

> ID：15684189
> 
> 赞同：0
> 
> 时间：2013-03-28T14:16:45.157
> 
> 标签：nhibernate, fluent-nhibernate

几天来我一直在寻找我的问题的答案，我已经尝试了大多数提示/答案，甚至查看了 nHibernate 生成的数百行日志，但我找不到让我的映射工作的方法.. nHiberante 在要求 SaveOrUpdate 时仍然拒绝生成任何删除语句。

我有三个独立的实体，Person、House 和 Room……实际上，每个 Person 将有一个房子，每个房子可以有多个房间，房子和房间之间的映射正如预期的那样是一对多的，我想要在 Person 和 House 之间进行一对一的映射，然后我在流畅的 nHibernate wiki 上读到，它说这确实是一个多（人）对一（房子），因为在数据库级别没有什么可以阻止多人共享相同的屋。我想这是有道理的，所以我的数据库架构和类映射设计如下：

```
CREATE TABLE [dbo].[Person](
    [PersonId] [int] IDENTITY(1,1) NOT NULL,
    [HouseId] [int] NOT NULL
)

CREATE TABLE [dbo].[House](
    [HouseId] [int] IDENTITY(1,1) NOT NULL,
    [HouseName] [varchar](500) NOT NULL
)

CREATE TABLE [dbo].[Room](
    [RoomId] [int] IDENTITY(1,1) NOT NULL,
    [HouseId] [int] NOT NULL
)

HouseId on [Person] and [Room] are both foreign keys referencing HouseId from [House] table

    public class PersonMap : ClassMap<Person>
    {
        public PersonMap()
        {
            Table("Person")
            Id (x=>x.Id).Column("PersonId").GeneratedBy.Identity().UnsavedValue(0);
            Reference(x=>x.House).Column("HouseId").ForeignKey("HouseId").Not.LazyLoad().Cascade.All();
        }
    }

    public class HouseMap : HouseMap<Room>
    {
        public RoomMap()
        {
            Table("House")
            Id (x=>x.Id).Column("HouseId").GeneratedBy.Identity().UnsavedValue(0);

            HasMany(x => x.Persons)
                .KeyColumn("HouseId")
                .Not.LazyLoad()
                .Cascade.AllDeleteOrphan().Inverse();

            HasMany(x => x.Rooms)
                .KeyColumn("HouseId")
                .Not.LazyLoad()
                .Cascade.AllDeleteOrphan().Inverse();
        }
    }

    public class RoomMap : ClassMap<Room>
    {
        public RoomMap()
        {
            Table("Room")
            Id (x=>x.Id).Column("RoomId").GeneratedBy.Identity().UnsavedValue(0);
            Reference(x=>x.House).Column("HouseId").ForeignKey("HouseId").Not.LazyLoad().Cascade.All();
        }
    } 
```

House 类分别拥有两个 Person 和 Room 类型的列表，Person 和 Room 类都拥有对 House 对象的引用。

所以我创建了一个 House 的实例并设置了它的两个子列表 Person(one 1) 和 Room(multiple rooms)，并将 Person/Rooms 的属性链接回 House..并使用 session.SaveOrUpdate 将 Person 全部保存效果很好。

然后我尝试检索 Person 的一个实例，并从 Person.House.List 中删除一个房间并将 room.House 设置为 null 以完全破坏引用，然后使用 session.SaveOrUpdate 再次保存 Person（我们称之为 Person A）， , nHibernate 正确生成了删除语句以删除不再链接到其父 House 的孤儿房间.. 到目前为止一切顺利...

这是我的问题开始的地方......在我的应用程序中，我需要将对象 Person 转换为 PersonContract 然后将其发送给客户端，客户端能够从 PersonContract.HouseContract 中删除 roomContract 并发送 PersonContract 的副本背部。请注意，在 PersonContract 中，没有双边引用，即 PersonContract 具有 HouseContract 的一个属性，而 HouseContract 仅包含 RoomContract 列表，因此 HouseContract 不保留 PersonContract 列表，并且 RoomContract 没有 HouseContract 属性。

然后在服务器端，我将 PersonContract 转换回 Person 对象，转换器负责创建 Person、Room 和 house 的所有新实例，并设置它们的 Id 并在它们之间建立所有双边引用。

问题是......当我在 Person 对象上使用 session.SaveOrUpdate 时（合同转换后），nHibernate 似乎忽略了一个房间已从集合中删除的事实，但它很好地完成了更新或插入工作。

我已经仔细检查了我的合同转换器，以确保正确设置了所有属性/引用/ID，并且它看起来与上面的人 A 完全相同......但我不明白为什么 nHibernate 在这里没有做这项工作.

我已经覆盖了 Person/Room/House 上的 Equals 和 GetHashCode 以返回其 ID。

我观察到的另一个事实是，当我在转换后的 Person 对象上使用 session.SaveOrUpdate 时，nHibernate 会生成大量 Update 语句，即使值并没有真正改变，看起来 nHibernate 不知道持久化的状态Person 对象因此选择通过使用 Id 标识来更新所有内容...

我对 nHibernate 很陌生……所以如果我在这里做错了什么，请告诉我:)

**更新**：如果我从 House 和 Room 之间的一对多映射中删除 Inverse ，则 nHibernate 会将已删除 Room 的房屋 ID 设置为 NULL ...比根本不删除房间要好，但我真的希望它从中删除孤立的房间D B..

**更新 2**： session.Merge on Person 正在工作（SaveOrUpdate 没有）..虽然我不明白为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T14:11:09.000

尝试将您的保存/更新包装在事务中：

```
using (ITransaction transaction = session.BeginTransaction())
{
    session.Save(SomeObject);
    transaction.Commit();
} 
```

# autocomplete - 如何防止“。”（点）取消 Sublime Text 2 中的自动完成功能？

> ID：15684193
> 
> 赞同：3
> 
> 时间：2013-03-28T14:17:00.253
> 
> 标签：autocomplete, sublimetext2

我为我在工作中使用的专有语言定义了一些关键字：

```
{ "match": "\\b(util.tickettimelimit|util.user_ip|util.server_name|util.today)\\b",
  "name": "keyword.source.GTX2",
    "comment": "Tags"
} 
```

我还有一个完成文件：

```
{
  "scope": "source.GTX2",

  "completions":
  [
    "util.server_name",
    "util.tickettimelimit",
    "util.today",
    "util.user_ip"
  ]
} 
```

当我开始输入“util”时，我看到了正确的自动完成选项：

![自动完成工作正常](../Images/fa34062d359ee5bceb10725bbb5cb102.png)

但是一旦我输入“。”（点）自动完成选项就会消失：

![自动完成功能无法按预期工作](../Images/44fe9dccbf0e25a2bd3f37c218aafc62.png)

有没有办法改变这种行为？我只想将关键字作为一个整体来处理，而忽略这些点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:02:40.850

我到处寻找，似乎自动完成代码嵌入在可执行文件本身中（至少在 Windows 上，我还没有检查我的 Mac），而不是`.py`分散在众多外部文件之一中，所以我什至看不到如何执行自动完成的参数。我查看了默认`Packages/Default/Preferences.sublime-settings`文件，虽然有几个与自动完成相关的选项，但没有一个与我们正在寻找的内容相关。在查看`Default (Windows).sublime-keymap`同一目录中的文件时，我尝试添加以下内容：

```
{ "keys": ["."], "command": "hide_auto_complete", "context":
    [
        { "key": "auto_complete_visible", "operator": "equal", "operand": false }
    ]
}, 
```

但可惜它没有用。那里有许多`auto_complete`命令，虽然这看起来最有希望，但我还没有尝试过其余的命令。

我没有详尽地查看漂亮的[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)插件（也可以通过[Package Control](http://wbond.net/sublime_packages/package_control)获得）的源文件和配置文件，因此您可能可以在那里找到一个选项。您可能必须首先完全禁用内置的自动完成功能，因此它不会覆盖 SCI。

所以，我想现在你能做的不多。你可以随时留下一个[功能请求](http://sublimetext.userecho.com/)，看看它是否进入了[Sublime Text 3 ，或者在](http://www.sublimetext.com/3)[Sublime Text 论坛](http://www.sublimetext.com/forum/)上搜索/打开一个线程，看看其他人是否有任何建议。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:41:38.347

我认为@Ashish 暗指的是`word_separators`设置。您将需要创建一个特定于语法的首选项 ( `Preferences -> Settings - More -> Syntax Specific - User`)。创建一个`word_separators`删除点的条目（从默认首选项复制作为基础）。这会给你你想要的行为，但有一些事情需要注意。显然，点不会被视为单词分隔符，这会改变一些行为。

我将以 java 为例。如果我有一个变量`foo`，使用某种方法`bar`，我可以输入`foo.b`并`bar`显示为完成。如果没有点作为分隔符，您将看不到这一点。

另一个可能更容易理解的例子是在选择单词时。如果您使用 ctrl/cmd + d 选择单词，它会选择单词，由单词分隔符绑定。所以如果我有`foo.ba|r`，在哪里| 表示光标位置并使用 ctrl/cmd+d 它将选择`bar`. 删除点作为单词分隔符后，`foo.bar`将被选中。

让我知道我是否可以澄清任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T00:27:50.010

有点晚了，但我希望这会有所帮助，创建一个新插件并添加以下代码：

```
import re

myObjects = {"util": ["server", "tickettimelimit", "today", "user_ip"]}

class CustomAutocomplete(sublime_plugin.EventListener):
    def on_query_completions(self, view, prefix, locations):
        if not view.match_selector(0, "source.GTX2"):
            return

        if prefix == "":
            # get the last word in the current line
            currentposition = view.sel()[0].begin()
            currentline = view.full_line(currentposition)
            text = view.substr(currentline)
            words = re.findall("\w+", text)
            lastword = words[-1]

            if lastword in myObjects.keys():
                # return a list of tuples, it represents snippets
                # the first element is the trigger and the second one
                # is the content
                return [(x, x) for x in myObjects[lastword]]

        return [] 
```

并在用户设置中添加下一个键：

```
"auto_complete_triggers":
[
    {
        "characters": ".",
        "selector": "source.GTX2"
    }
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:25:53.630

不要按。（点）否则您需要在点之后输入至少一个字符，以便列表可以再次出现。使用括号或点告诉 Sublime Text 2 用户已完成输入。

例如：如果我输入`for`sublime 将显示下拉列表，但如果我输入`for(`列表将消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-28T21:35:39.957

单击首选项>设置-用户，然后复制并粘贴以下内容

```
// Characters that are considered to separate words – does not include periods.
// Place comma at the end of the line if there are multiple keybindings.
"word_separators": "/\\()\"‘-:,;~!@#$%^&*|+=[]{}`~?" 
```

从这个网页： [http ://tomschenkjr.net/using-sublime-text-2-for-r/](http://tomschenkjr.net/using-sublime-text-2-for-r/)

# java - JSpinner：如何同时显示数字和文本？

> ID：15684196
> 
> 赞同：4
> 
> 时间：2013-03-28T14:17:13.783
> 
> 标签：java, swing, jspinner

我想创建一个 JSpinner ，它可以在**指定的最小值**和**指定的最大值**`Double`之间获取每个可能的值。

 ****此外，JSpinner 应该能够**显示文本而不是特定的值**。假设我们的 JSpinner 可以从 -1 到 10 取值。我想显示一个文本，例如“Auto”，而不是 -1。

如何替换![普通 Jspinner ：我们可以看到](../Images/464f42acada36d5c0ce5dadf746dd14f.png)为 ![JSpinner 在哪里我们可以看到](../Images/9cfd73c02e6ed4ebcef302f887ae4df5.png)

这是我写的模型，但似乎还不够，因为它在 JSpinner 中说有一个错误，因为文本不是`Double`.

```
public class SpinnerSpecialModel
        extends AbstractSpinnerModel implements SpinnerMinMaxModel {

  public static final double DEFAULT_MINIMUM = 0.0;
  public static final double DEFAULT_MAXIMUM = Double.POSITIVE_INFINITY;
  public static final double DEFAULT_STEP = 1.0;
  public static final double DEFAULT_VALUE = 1.0;
  public static final double DEFAULT_SPECIAL_NUMBER = -1.0;
  public static final String DEFAULT_SPECIAL_TEXT = "Auto";

  private double maximum;
  private double minimum;
  private double stepSize;
  private double currentNumber;
  private double specialNumber;
  private String specialText;

  private Object m_Value;

  public SpinnerSpecialModel(double max, double min, double step, double num, 
        double specialNum, String specialTxt) {
    maximum = max;
    minimum = min;
    stepSize = step;
    currentNumber = num;
    specialNumber = specialNum;
    specialText = specialTxt;
    setAccurateValue(num);
  }

  public SpinnerSpecialModel(double specialNum, String specialTxt) {
    this(DEFAULT_MAXIMUM, DEFAULT_MINIMUM,
        DEFAULT_STEP, DEFAULT_VALUE, specialNum, specialTxt);
  }

  public SpinnerSpecialModel() {
    this(DEFAULT_SPECIAL_NUMBER, DEFAULT_SPECIAL_TEXT);
  }

  @Override
  public Object getValue() {
    if (currentNumber == specialNumber) {
      m_Value = specialText;
    }
    else {
      m_Value = currentNumber;
    }
    return m_Value;
  }

  @Override
  public void setValue(Object value) {
    setAccurateValue(value);
  }

  private void setAccurateValue(Object value) {
    if (value instanceof Double) {
      double doubleValue = (Double) value;
      if (doubleValue != currentNumber) {
        if (doubleValue == specialNumber) {
          currentNumber = specialNumber;
          m_Value = specialText;
        }
        else if (doubleValue > maximum) {
          currentNumber = maximum;
          m_Value = maximum;
        }
        else if (doubleValue < minimum) {
          currentNumber = maximum;
          m_Value = minimum;
        }
        else {
          currentNumber = doubleValue;
          m_Value = doubleValue;
        }
        fireStateChanged();
      }
    }

    if (value instanceof String) {
      String stringValue = (String) value;
      if (stringValue.equals(specialText)) {
        this.currentNumber = specialNumber;
        this.m_Value = specialText;
        fireStateChanged();
      }
    }
  }

  @Override
  public Object getNextValue() {
    return getNewValue(+1);
  }

  @Override
  public Object getPreviousValue() {
    return getNewValue(-1);
  }

  /**
   * 
   * @param direction
   * @return 
   */
  private Object getNewValue(int direction) {
    double newValue = currentNumber + direction * stepSize;
    setAccurateValue(newValue);
    return m_Value;
  }

  @Override
  public double getMaximum() {
    return maximum;
  }

  @Override
  public double getMinimum() {
    return minimum;
  }

  @Override
  public double getStepSize() {
    return stepSize;
  }

  @Override
  public void setMaximum(double max) {
    maximum = max;
  }

  @Override
  public void setMinimum(double min) {
    minimum = min;
  }

  @Override
  public void setStepSize(double step) {
    stepSize = step;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:22:20.657

我认为您可以通过实现自己的[`SpinnerModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SpinnerModel.html)并将其作为参数提供给`JSpinner`构造函数来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T15:17:05.043

做到这一点的最好和正确的方法并不像仅仅写一个模型那么简单，但也不是很复杂。您实际上需要编写 an`Editor`和 a`Formatter`才能拥有真正的 MVC 微调器：

*   一个扩展类`JSpinner`：`SpecialValuesSpinner`。
*   一个实现 SpinnerModel 的类：`SpecialValuesSpinnerModel`
*   扩展`DefaultEditor`和实现的类`DocumentListener`：`SpecialValuesSpinnerEditor`
*   扩展的类`NumberFormatter`：`SpecialValuesSpinnerFormatter`

我不会向您展示所有类的代码，但这里基本上是您必须在每个类中执行的操作：

特殊值微调器：

```
public class SpecialValuesSpinner() extends SpinnerNumberModel {
    // in your constructor do this
    setModel(new SpecialValuesSpinnerModel(YOUR_SPECIAL_VALUES);
    setEditor(new SpecialValuesSpinnerEditor());
} 
```

SpecialValuesSpinnerModel :

```
public class SpinnerSpecialValuesModel() extends JSpinner {
    // in this class you handle the fact that now, you have an
    // interval of values and a list of special values that are allowed.
    // here is what I did :
    @Override
    public Object getNextValue() {
        return incrValue(+1);
    }

    @Override
    public Object getPreviousValue() {
        return incrValue(-1);
    }

    private Object incrValue(int dir) {
        // NB : BigDecimal here because this is what I used,
        // but use what you want in your model
        BigDecimal result = null;
        BigDecimal numberBD = new BigDecimal(getNumber().toString());
        BigDecimal stepSizeBD = new BigDecimal(getStepSize().toString());
        BigDecimal dirBD = new BigDecimal(dir);
        BigDecimal nextValue = numberBD.add(stepSizeBD.multiply(dirBD));

        TreeSet<BigDecimal> currentAllowedValues = new TreeSet<BigDecimal>();
        currentAllowedValues.addAll(m_SpecialValues);
        if (getMaximum() != null) {
          currentAllowedValues.add((BigDecimal) getMaximum());
        }
        if (getMinimum() != null) {
          currentAllowedValues.add((BigDecimal) getMinimum());
        }
        if (isIncludedInBounds(nextValue)) {
          currentAllowedValues.add(nextValue);
        }

        if (dir > 0) {
          try {
            result = currentAllowedValues.higher(numberBD);
          }
          catch (NoSuchElementException e) {}
        }
        else if (dir < 0) {
          try {
            result = currentAllowedValues.lower(numberBD);
          }
          catch (NoSuchElementException e) {}
        }
        return result;
    }
} 
```

在 SpecialValuesSpinnerEditor 中，我们使用 Document Listener 进行自动补全（很容易做到，只需要在 SO 上搜索）。

```
public class SpecialValuesSpinnerEditor extends DefaultEditor implements DocumentListener {

    // You have to do in your contructor
    SpecialValuesSpinnerFormatter formatter = 
        new SpecialValuesSpinnerFormatter (spinner.getSpecialValues(), format);
    getTextField().setFormatterFactory(new DefaultFormatterFactory(formatter));
} 
```

现在，最重要的是 Formatter，它在用户输入（字符串）和数字之间进行转换，并处理模型的显示：

```
public class SpecialValuesSpinnerFormatter extends NumberFormatter {
    // Just override the methos StringToValue and ValueToString.
    // You can check here if the value is special
    // i.e you must display its special text instead. e.g. : "Auto" instead of -1
} 
```****

# git - Git 文件在 checkout、reset --hard 等之后修改，即使 autocrlf 设置为 false

> ID：15684197
> 
> 赞同：17
> 
> 时间：2013-03-28T14:17:16.347
> 
> 标签：git, newline, core.autocrlf

这是我的系统对话：

```
unrollme-dev-dan:views Dan$ git reset --hard HEAD
HEAD is now at 3f225e9 Fix scan titles
unrollme-dev-dan:views Dan$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   app/signup/finish.html
#   modified:   app/signup/scan.html
# 
```

我将 autocrlf 设置为 false：

```
unrollme-dev-dan:unroll-website Dan$ git config core.autocrlf
unrollme-dev-dan:unroll-website Dan$ 
unrollme-dev-dan:unroll-website Dan$ git config --global core.autocrlf
unrollme-dev-dan:unroll-website Dan$ 
```

~~而且我没有任何 .gitattributes 文件搞砸了：~~

 ~~```
unrollme-dev-dan:unroll-website Dan$ find . -name .gitattributes
[ only results are in different directory tree ] 
```~~  ~~这是由`.gitattributes`下面的答案中指出的一个级别引起的。

当我`od -c`对它显示的文件执行操作时`\r\n`。我不知道他们“应该”是什么，大概他们应该以什么结尾，`\n`这就是差异显示的原因。但我不明白的是，即使是`autocrlf`假的，这些文件也可能在结账时被修改。

除了 autocrlf 之外，还有什么会导致 git 在结帐时修改文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T16:52:23.063

这个问题可能是由 gitattributes 的文本选项引起的 [https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)

`.gitattributes`可以通过临时编辑项目文件夹中的文件来解决此问题。

更改`* text=auto` 以`#* text=auto`对文件行结尾进行必要的更改并推送您的提交。然后，您可以在进行更改后再次启用它，或者选择可能更适合您的项目的其他选项之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-14T15:51:25.087

我没有接受的答案中提到的 gitattributes 文件，在我的情况下这是一个文件权限问题。要查看这是否是您的问题，请使用 git diff 检查更改的文件的差异，例如：

```
git diff path/to/file.html 
```

如果您看到的唯一更改是旧模式/新模式，则可能是权限问题。您可以使用以下命令告诉 git 忽略文件权限更改：

```
git config core.filemode false 
```

或者

```
git config --global core.filemode false 
```

（取决于你如何使用 git）。

出于性能原因，我最近从使用 Cygwin git 切换到 Windows 的 git，另外为了 TortoiseGit 可以正常工作，这可能是我的情况下权限被丢弃的原因。

参考：

1.  [如何从 Git 中的未暂存更改中删除说“旧模式 100755 新模式 100644”的文件？](https://stackoverflow.com/questions/1257592/how-do-i-remove-files-saying-old-mode-100755-new-mode-100644-from-unstaged-cha)~~

# php - 如果存在则替换php中的字符串

> ID：15684204
> 
> 赞同：0
> 
> 时间：2013-03-28T14:17:40.663
> 
> 标签：php, string, replace

我在 php 中有一个字符串，看起来像这样

```
$(window).load(function(){
  $('.someclass').click(function () {
    $(this).text("clicked");
  });
}); 
```

我想要的是 - 如果字符串包含然后用空字符串`$(window).load(function(){`替换这个以及结束括号`});``""`

但如果`$(window).load(function(){`不存在，则什么也不做。

这是我尝试过的：

```
if(strpos($str,"$(window).load(function(){") == -1){
  // do nothing
}
else{
     str_replace("$(window).load(function(){","",$str);
     // how do i replace the last }); with ""
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:20:57.027

如果您可以保证 }); 将是最后一个。如果是这样的话：

```
$str = preg_replace("#\$\(window\)\.load\(function\(\) \{(.*)\}\);#is","",trim($str)); 
```

应该做的伎俩。

如果您不能保证 }); 您要替换将是最后一次出现，您将不得不遍历您的代码并计算大括号。没有别的办法，可悲的是:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:25:57.533

如果您的代码像这样很好地缩进，这可能对您有用：

```
$str = <<<EOM
$(window).load(function(){
  $('.someclass').click(function () {
    $(this).text("clicked");
  });
});
EOM;

$start = preg_quote('$(window).load(function(){');
$end = preg_quote('});');

$new = preg_replace("/^$start\s*(.*?)^$end/ms", '$1', $str);

print_r($new); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:21:56.050

```
$str = substr($str, 0, strlen($str) - 4); 
```

这将删除字符串的最后 3 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:22:41.480

[用strrpos](http://www.php.net/manual/en/function.strrpos.php)找到最后一次出现的位置？然后也许从那一点做一个 str_replace 限制为1？您应该通过对 JSlint 之类的外部调用来检查修改后的字符串，以确保您没有创建格式错误的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:34:16.317

我认为，一种工作方式就是测试`(window).load`并添加：

```
str_replace('$(window).load', "var functionOnLoad = ", $str); 
```

如果您希望执行此函数，请不要忘记添加对该函数的调用。有人认为：

```
str_replace('</script>', "functionOnLoad();</script>", $str); 
```

# aem - CQ5 hybris 集成

> ID：15684209
> 
> 赞同：3
> 
> 时间：2013-03-28T14:17:50.583
> 
> 标签：aem, hybris

我正在努力将 Hybris 与 CQ 电子商务集成。我正在关注 - [http://dev.day.com/docs/en/cq/current/ecommerce/eCommerce-framework.html上的文档](http://dev.day.com/docs/en/cq/current/ecommerce/eCommerce-framework.html)

然而，其中一个步骤是通过 Hybris 目录导入器将目录从 Hybris 导入 CQ - localhost:4502/etc/importers/hybris.html

当我打开此链接时：如果有人已经尝试过，我有一个错误“HtmlRendererServlet 转储的资源”；谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T19:57:16.933

我遇到了同样的错误——当我注意到 CQ 的 OSGI 控制台中有一个不活动的包时解决了：CommerceService 接口。请参阅 /system/console/bundles 并确保所有非片段都处于活动状态。

# jquery - IE 7 & 8 Object 不支持此属性或方法消息与函数调用

> ID：15684210
> 
> 赞同：0
> 
> 时间：2013-03-28T14:17:51.763
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

我在 IE 8 和 7 中收到以下错误消息，代码如下，特别是当我调用该函数时：

```
setDayDelay(); 
```

这里有什么问题？

```
function setDayDelay() {    
    if (twoDigitDate == 1) {              
           day = ("day1");
           startbuttondelay = 1600;
    } else if (twoDigitDate == 7) {
           day = ("day7");
           startbuttondelay = 9400;
    } else if (twoDigitDate == 8) {
           day = ("day8");
           startbuttondelay = 10300;
    } else if (twoDigitDate == 9) {
           day = ("day9");
           startbuttondelay = 11000;
    } else {
           day = ("inactive");
           startbuttondelay = 1000;
    }

    console.log("The day variable is: " + day);
    console.log("The startbutton delay is: " + startbuttondelay);   
}

setDayDelay(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:30:58.320

twoDigitDate 是全局变量还是代码中未定义？“错误信息”说什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:40:23.717

## 在使用它之前在某处声明`twoDigitDate`变量。

[试试这个](http://jsfiddle.net/adiioo7/2sYJM/)，这适用于 IE7 和 IE8。

# php - 通过php创建带有用户变量的mysql表

> ID：15684224
> 
> 赞同：-5
> 
> 时间：2013-03-28T14:18:33.907
> 
> 标签：php, mysql

我正在尝试使用用户引入的变量创建一个表。如果我“回显”最终变量，则表明该行是正确的，但是我仍然无法创建它。有人能帮我吗？

```
<?php

$ligacao=mysql_connect('localhost','root','')
or die ('Problems connecting to MySQL');
$dbname = $_POST['txt_db_name'];
$tbname = $_POST['txt_tb_name'];
$campo1 = $_POST['txt_campo1'];
$campo2 = $_POST['txt_campo2'];
$campo3 = $_POST['txt_campo3'];
$campo4 = $_POST['txt_campo4'];
$campo5 = $_POST['txt_campo5'];
$campo6 = $_POST['txt_campo6'];
$campo7 = $_POST['txt_campo7'];

mysql_select_db($dbname,$ligacao);

$query = "CREATE TABLE ".$tbname." ( id INT NOT NULL AUTO_INCREMENT, ".$campo1."VARCHAR(20) NOT NULL, ".$campo2." VARCHAR(50) NOT NULL, ".$campo3." VARCHAR(30) NOT NULL, ".$campo4." VARCHAR(30) NOT NULL, ".$campo5." VARCHAR(30) NOT NULL, ".$campo6." VARCHAR(30) NOT NULL, ".$campo7." VARCHAR(30) NOT NULL, PRIMARY KEY(id))";

echo $query;

$resultado = mysql_query($query,$ligacao);

mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:21:30.820

看起来您需要在第一个 "VARCHAR(20)

# c++ - Visual Studio 未找到包含的定义

> ID：15684238
> 
> 赞同：0
> 
> 时间：2013-03-28T14:19:31.420
> 
> 标签：c++, visual-studio-2010, visual-studio-express, include-path

我对 C++ 很生疏，所以请原谅我有任何愚蠢的评论/问题。现在我正在使用 Microsoft Visual C++ 2010 Express。我有两个文件——一个源文件和一个头文件——当我包含头文件时，VS 正在识别头文件，但它无法从头文件中找到任何定义。它显示'错误：标识符“RAW_PACKET_SIZE”未定义'。该代码作为示例提供以使用设备的 API，因此它应该可以工作。我假设问题出在VS设置上。下面是一些介绍代码形式：

记录器.cpp

```
#include <vector>
#include "APIW32.h"
#pragma comment(lib,"APIW32.lib")

int devID;
float* buf = new float[RAW_PACKET_SIZE];  // error is here, at 'RAW_PACKET_SIZE' 
```

APIW32.h

```
#pragma once

#ifdef EXPORTS
#define API __declspec(dllexport)
#else
#define API __declspec(dllimport)
#endif

#define MIN_BW                0.301003456
#define MAX_BW                10100000
#define RAW_PACKET_SIZE       299008 
```

**更新：**

该错误似乎仅出现在 Intellisense 中，而不是实际的构建错误。故事的寓意——智能感知并不总是正确的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:24:23.007

尝试`float* buf = new float[RAW_PACKET_SIZE];`

# eclipse - Eclipse BPEL 设计器案例研究

> ID：15684239
> 
> 赞同：0
> 
> 时间：2013-03-28T14:19:36.850
> 
> 标签：eclipse, bpel

BPEL 中描述的真实世界业务流程是否可用？我正在使用 Eclipse BPEL 设计器和 apache ODE。

感谢您的帮助，莫妮卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:56:26.013

以下书籍中有一些真实世界业务流程的好例子：

*   [Oracle SOA 套件 11g 手册](https://rads.stackoverflow.com/amzn/click/com/0071608974)
*   [Oracle SOA Suite 11g R1 入门](https://rads.stackoverflow.com/amzn/click/com/184719978X)

它适用于 Oracle BPEL，但在 BPEL 设计器中重新创建它们应该不难。

# xml - 将多个 xml 元素值添加到列表中

> ID：15684247
> 
> 赞同：2
> 
> 时间：2013-03-28T14:20:01.673
> 
> 标签：xml, linq

以下代码有效，但我想完成相同的结果，即通过一个查询将元素“triptype”和“description”的不同值插入到列表中。任何帮助将不胜感激。

在此先感谢，马塞洛

```
class Program
{
    static void Main(string[] args)
    {
        string xml = @"<Trips>
                      <Trip>
                        <triptype>vacation</triptype>
                        <description>Trip to Bahamas</description>
                        <id>89</id>
                      </Trip>
                      <Trip>
                        <triptype>vacation</triptype>
                        <description>Trip to California</description>
                        <id>75</id>
                      </Trip>
                      <Trip>
                        <triptype>business</triptype>
                        <description>Trip to Chicago</description>
                        <id>82</id>
                      </Trip>
                    </Trips>";

        List<string> trips = new List<string>();

        XDocument xdoc = XDocument.Parse(xml);

        var tripTypes = (from t in xdoc.Descendants("Trip")
                             .Elements("triptype")
                      select t.Value).Distinct();

        foreach (var tripType in tripTypes)
        {
            trips.Add(tripType);
        }

        var tripDescriptions = (from t in xdoc.Descendants("Trip")
                                    .Elements("description") 
                                select t.Value).Distinct();

        foreach (var tripDescription in tripDescriptions)
        {
            trips.Add(tripDescription);
        }

        Console.ReadLine();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:00:17.417

AFAIK，当您尝试使用不同的值实现时，无法使用单个 LINQ to XML 查询选择多个元素。

但是，您可以将序列投影到具有每个元素值的匿名类型，然后找到不同的值，但我怀疑这可能比您现在正在做的事情过分且更难理解，即

```
var query = xdoc.Root.Elements( "Trip" )
        .Select( x => new
                      {
                              trip = x.Element( "triptype" ).Value,
                              desc = x.Element( "description" ).Value
                      } ).ToList();

trips.AddRange( query.Select( x => x.trip ).Union( query.Select( x => x.desc ) ).Distinct() ); 
```

[相反，我建议通过使用List.AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.110%29.aspx)而不是循环进行轻微清理，`foreach`并使用与您现在使用的逻辑相同的逻辑，方法是为所需的每个节点获取每个不同的值集：

```
var q1 = xdoc.Descendants( "triptype" ).Select( x => x.Value ).Distinct();
var q2 = xdoc.Descendants( "description" ).Select( x => x.Value ).Distinct();
trips.AddRange( q1.Union( q2 ) ); 
```

# ftp - 我无法使用 Spring Integration 让 FTP 工作

> ID：15684252
> 
> 赞同：0
> 
> 时间：2013-03-28T14:20:16.587
> 
> 标签：ftp, spring-integration

我正在尝试设置我的应用程序以使用 Spring Integration（版本 2.2.0.RELEASE）接收文件。当我启动 Tomcat（部署应用程序的位置）时，我收到以下错误消息。任何人都知道为什么？

```
SEVERE: Error configuring application listener of class com.xxxx.aaa.web.mvc.context.CccccContextListener
java.lang.NoClassDefFoundError: com/xxxx/bbb/application/core/exception/unchecked/InvalidFormatException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4079)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: com.xxxx.bbb.application.core.exception.unchecked.InvalidFormatException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
    ... 20 more 
```

我相信上面的错误信息是一个红鲱鱼。在将 spring 集成依赖项添加到 pom 文件并具有 ftp 配置文件之前，Tomcat 已成功启动。

我使用 Java6 和 Tomcat6。我的 FTP 配置文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:int="http://www.springframework.org/schema/integration"
    xmlns:int-ftp="http://www.springframework.org/schema/integration/ftp"
    xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/integration
           http://www.springframework.org/schema/integration/spring-integration-2.2.xsd
           http://www.springframework.org/schema/integration/ftp
           http://www.springframework.org/schema/integration/ftp/spring-integration-ftp-2.2.xsd">

    <int:channel id="ftpChannel">
        <int:queue/>
    </int:channel>

    <bean id="ftpClientFactory"
        class="org.springframework.integration.ftp.session.DefaultFtpSessionFactory">
        <property name="host" value="localhost" />
        <property name="port" value="21" />
        <property name="username" value="user" />
        <property name="password" value="password" />
    </bean>

    <int-ftp:inbound-channel-adapter 
        id="ftpInbound"
        channel="ftpChannel" 
        filename-pattern="*.csv" 
        session-factory="ftpClientFactory"
        auto-create-local-directory="true" 
        delete-remote-files="true"
        remote-directory="/" 
        local-directory="C:/folder/IN">
            <int:poller fixed-rate="1000" max-messages-per-poll="15"/>
    </int-ftp:inbound-channel-adapter>

</beans> 
```

我在 pom 文件中添加了依赖项，如下所示：

```
<dependency>
   <groupId>org.springframework.integration</groupId>
   <artifactId>spring-integration-ftp</artifactId>
   <version>2.2.0.RELEASE</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:22:54.117

实际上 Spring Integration 至少需要 Spring 核心版本 3.0.5，而我将它设置为 3.0.2。一旦我将弹簧核心升级到 3.0.5，它就可以工作了。

# cordova - PhoneGap 构建 Android 选择

> ID：15684256
> 
> 赞同：0
> 
> 时间：2013-03-28T14:20:21.030
> 
> 标签：cordova, select, phonegap-build

我已经使用 phonegap 2.0 构建了一个 phonegap 应用程序

效果很好！

更新到 phonegap 2.2 时，我失去了下拉菜单的功能

她是我的下拉菜单之一

```
<select name="ctl00$ContentPlaceHolder2$ddlAgent" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder2$ddlAgent\',\'\')', 0)" id="ctl00_ContentPlaceHolder2_ddlAgent" style="width:90%;text-align:center;">
<option selected="selected" value="1">Option1</option>
<option selected="selected" value="1">Option1</option>
<option selected="selected" value="1">Option1</option>

</select> 
```

我不认为这是配置问题，是最新版本的 phonegap 的问题吗？还是在我的代码中？这是一个开始......这是我的头

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-    scale=1.0"/>
<link rel="apple-touch-icon" sizes="114x114" href="images/splash/splash-icon.png"> 
<link rel="apple-touch-startup-image" href="images/splash/splash-screen.png"     media="screen and (max-device-width: 320px)" /> 
<link rel="apple-touch-startup-image" href="images/splash/splash-screen@2x.png" media="        (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" /> 
<meta name="apple-mobile-web-app-capable" content="yes"/>
<title>DCC On-The-Go</title>

<link href="style/style.css" rel="stylesheet" type="text/css">
<link href="style/retina.css" media="only screen and (-webkit-min-device-pixel-ratio:     2)" rel="stylesheet" />
<link href="style/buttons.css" rel="stylesheet" type="text/css">
<link href="style/photoswipe.css" rel="stylesheet" type="text/css">

<script src="scripts/jquery.js"></script>
<script src="scripts/easing.js"></script>
<script src="scripts/tweetable.js"></script>
<script src="scripts/roundabout.js"></script>
<script src="scripts/contact.js"></script>
<script src="scripts/swipe.js"></script>
<script src="scripts/klass.min.js"></script>
<script src="scripts/photoswipe.js"></script>
<script src="scripts/retina.js"></script>
<script src="scripts/custom.js"></script>

</head> 
```

我现在也将尝试在 2.3 和 2.1 中测试其他版本...

期待大家对phonegap 2.2和这个问题的想法、意见和讨论……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:12:48.637

我建议检查你的 html、css 和 js。Phonegap 不应干扰下拉等简单功能。另外，您甚至没有在 html 头中包含 cordova.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:37:03.253

它在某些时候是用 config.xml 编译的，而 build.phonegap.com 不允许在没有 config.xml 的情况下进行构建……新构建并且离开了！！！

谢谢

# css - 我需要跨浏览器 CSS 问题的指针

> ID：15684260
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:20:27.907
> 
> 标签：css, google-chrome, safari, cross-browser

我在使用此网站的标题时遇到问题：http: [//jenn.anniezs.com/enzo_demo/](http://jenn.anniezs.com/enzo_demo/)

它在 Firefox 中运行良好，但在 Chrome 和 Safari 中却是一场灾难。不幸的是，我对这些浏览器不是很了解，我还在学习它们。

我认为这可能与定位或浮动有关，但我无法确定它。

任何想法？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:28:18.263

`float: center`不存在。把它拿出来，你所拥有的只是一些间距问题，导致你的最后一个菜单项低于其余菜单项。

```
#primary-menu ul li.button {
...
float: center;/*No, use float:left or take this out entirely*/
...
} 
```

# javascript - Gmap指针的动态放置

> ID：15684261
> 
> 赞同：0
> 
> 时间：2013-03-28T14:20:28.243
> 
> 标签：javascript, google-maps, typeerror

我有一个正在使用的定位系统，它使用 gmap3.net jquery 插件进行 Googlemap 交互。

当指针是静态的时，我可以毫无问题地放置指针，但是动态地这样做有困难，我知道有一个错误，我似乎无法发现它。

我设法让 eval 工作，它只是缺少一些括号，但是，eval 只检测到一个对象，它似乎忽略了逗号后的所有内容。

所以这是启动地图更改的Javascript：

```
 //Clear old map
    $('#map').gmap3('destroy').html('');

    var ajaxURL = BASE_URL + 'ajax/getPeopleNearMe/';

    $.ajax({
        type: 'POST',
        url: ajaxURL,
        data: { 
            filter: filter
        },
        success: function(data){

            $('#map').gmap3({
                getgeoloc:
                {

                    callback:function(latLng)
                    {

                        if(latLng)
                        {

                            //Found
                            $(this).gmap3({
                                marker:
                                {                       
                                    values:[eval("(" + data + ")"],
                                },
                                map:
                                {
                                  options:
                                  {
                                    zoom:12,
                                    mapTypeControl: false,
                                    navigationControl: true,
                                    streetViewControl: false
                                  }

                              }

                            });

                        } 
                        else 
                        {

                            //Not found

                        }

                    }

                }

            });

        }
    }); 
```

然后这里是在 get people near me 函数上调用的 PHP。

```
function getPeopleNearMe()
{

    $apiHandler = new APIHandler();

$result = $apiHandler->usersWithinRadius();

$json = json_decode($result);

$items = '';

if($json->value->results != null)
{

    if($json->value->numberOfResults > 0)
    {

        $count = 0;

        foreach($json->value->results as $result)
        {

            $items .= '
            {
                latLng:['.$result->lat.','.$result->lon.'], 
                options:
                {
                    shadow: 
                    {

                        url: "'.BASE_URL.'css/png/markerBg.png",
                        scaledSize: 
                        {
                            width:40,
                            height:43.5
                        }
                    },
                    icon: 
                    {
                        url: "'.$result->user->profileImage.'",
                        scaledSize: 
                        {
                            width:32,
                            height:32
                        },
                        anchor: 
                        {
                            x: 16,
                            y: 40
                        }

                    }

                }

              }';

            if($count <= $json->value->numberOfResults){ $items .= ','; $count++;} 

        }

    }

}

    echo $items;

} 
```

我得到的错误是类型错误：

```
TypeError: '
                {
                    latLng:[37.3323,-122.031], 
                    options:
                    {
                        shadow: 
                        {

                            url: "https://m.hollatme.com/css/png/markerBg.png",
                            scaledSize: 
                            {
                                width:40,
                                height:43.5
                            }
                        },
                        icon: 
                        {
                            url: "https://www.holla.com/img/resize/aHR0cHM6Ly9ob2xsYS1zdGF0aWMtaW1hZ2VzLnMzLmFtYXpvbmF3cy5jb20vcHJvZmlsZS84My8xMzYxODk2MDE2LmpwZw==/48/48/1",
                            scaledSize: 
                            {
                                width:32,
                                height:32
                            },
                            anchor: 
                            {
                                x: 16,
                                y: 40
                            }

                        }

                    }

                  },
                {
                    latLng:[37.3343,-122.049], 
                    options:
                    {
                        shadow: 
                        {

                            url: "https://m.hollatme.com/css/png/markerBg.png",
                            scaledSize: 
                            {
                                width:40,
                                height:43.5
                            }
                        },
                        icon: 
                        {
                            url: "https://www.holla.com/img/resize/aHR0cHM6Ly9ob2xsYS1zdGF0aWMtaW1hZ2VzLnMzLmFtYXpvbmF3cy5jb20vcHJvZmlsZS8xNDEva2F5c2FtcGxlLmpwZw==/48/48/1",
                            scaledSize: 
                            {
                                width:32,
                                height:32
                            },
                            anchor: 
                            {
                                x: 16,
                                y: 40
                            }

                        }

                    }

                  },
                {
                    latLng:[37.3323,-122.031], 
                    options:
                    {
                        shadow: 
                        {

                            url: "https://m.hollatme.com/css/png/markerBg.png",
                            scaledSize: 
                            {
                                width:40,
                                height:43.5
                            }
                        },
                        icon: 
                        {
                            url: "https://www.holla.com/img/resize/aHR0cHM6Ly9ob2xsYS1zdGF0aWMtaW1hZ2VzLnMzLmFtYXpvbmF3cy5jb20vcHJvZmlsZS8xNDIvMTM5Mzk0MF80NDcwMDYwOC5qcGc=/48/48/1",
                            scaledSize: 
                            {
                                width:32,
                                height:32
                            },
                            anchor: 
                            {
                                x: 16,
                                y: 40
                            }

                        }

                    }

                  },' is not a valid argument for 'in' (evaluating '"address" in O[L]') 
```

我相信问题在于它将数据变量视为字符串而不是对象......但是没有运气尝试了 eval，不知道我还能做什么......提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:36:33.823

这可能是因为浏览器将响应解释为`text/html`而不是`application/json`. 确保在 PHP 脚本中指定内容类型：

```
header("Content-Type: application/json"); 
```

虽然这可能会导致旧版本的 Internet Explorer（7 或更低版本）出现问题。所以你可以做的另一件事是告诉你的 jQuery Ajax 调用你期望一个 JSON 响应：

```
 $.ajax({
    type: 'POST',
    url: ajaxURL,
    dataType: 'json',
    data: { 
        filter: filter
    },
    ... 
```

此外，您可以简单地创建一个哈希表/数组并使用 转换为 JSON 字符串，而不是将响应构造为字符串，`json_encode`例如：

```
$items = array();
foreach($json->value->results as $result)
{
    $items[] = array('latLng' => '['.$result->lat.','.$result->lon.']', 'options' => array('shadow' => '...', ...), ...);
}

echo json_encode($items); 
```

这将避免像您刚才那样的错误，因为那不是有效的 JSON 字符串（结构类似于`{...},{...},{...}`肯定不是 JSON，因为您缺少`[`and `]`）。

最后，`eval`从你的 JavaScript 中去掉与任何东西无关的函数：

```
...
marker:
{                       
    values:data,
}
... 
```

# resharper - 获取格式不一致以生成警告

> ID：15684264
> 
> 赞同：0
> 
> 时间：2013-03-28T14:20:51.413
> 
> 标签：resharper

我正在使用 ReSharper 7。
我已经设置了我的格式样式，并且我希望 Resharper 在不遵守此样式时生成警告（vs 中的琥珀色灯）。例如，如果我们不遵循 K&R 方法支撑样式，我希望看到琥珀色灯。

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:27:54.600

[您可以通过安装StyleCop](http://stylecop.codeplex.com/) for Resharper生成无效样式的警告。StyleCop 的默认设置是否适合你是另一个问题。

# javascript - 管理 Flex 和 Javascript 之间的监控式回调

> ID：15684268
> 
> 赞同：0
> 
> 时间：2013-03-28T14:20:57.957
> 
> 标签：javascript, apache-flex, design-patterns

我们目前有一些 Javascript 代码依赖于 Flex 通过 ExternalInterface 回调来完成一些繁重的工作。这不是世界上最漂亮的东西，但它确实有效。在 Flex 方面，我们定义了这样的东西（remoteCall 是一个具有典型 RemoteObject 行为的包装器）：

```
ExternalInterface.addCallback("doOperation",
    function(data:String, windowId:String):void { doOperation(data, windowId) });

private function doOperation(data:String, windowId:String):void {
    remoteService.remoteCall(data, function(e:ResultEvent):void {
        ExternalInterface.call("doOperationComplete", windowId, e.result);
    });
} 
```

在 Javascript 方面，我们有：

```
function doOperationComplete(windowId, result) {
    var win = windowHandles[windowId];
    win.handleResult(result);
} 
```

这适用于我们的大多数用例，但我即将实现一些基本的任务监控，我希望有更好的方法。如果我从与上面相同的路径开始，我最终会遇到一个场景，即有一个 JS -> Flex 调用来获取任务状态。该调用返回 void，当该调用完成时，会有一个 Flex -> JS 调用为 JS 提供任务状态。然后 JS 需要查看状态并采取一些行动：放弃，对结果做一些事情，延迟后再次检查状态（另一个 JS -> Flex，Flex -> JS 循环）。

我还没有开始编写这个代码，但它似乎很快就会变得非常棘手，管理多个任务，将 Flex 调用与原始回调关联到 Javascript，传递适当范围的数据等。

有没有好的选择？为这种回调场景设计的某种 Javascript 任务插件？我忽略了一些设计模式？甚至一些有问题的技术，比如同步远程服务调用，以便`doOperation`返回任务状态而不是 void？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:45:58.393

我会做一些类似于 Adob​​e 在制作 IResponder 时所做的事情。

当您进行每个调用时创建一个对象，该对象负责处理调用，并且该对象具有您希望与特定调用关联的其他数据的“点”（例如 IResponder 中的 AsyncToken）。当往返完成时，该对象应该调度一个事件，并且您可以使用该事件来获取对“点”或具有该点的对象的引用。

我在纯 Flash 中完成了这项工作，以使处理数据读/写更清晰。我将 Loader 包装在另一个类中，该类记住有关调用的信息并在调用完成时生成一个 COMPLETE 事件。当我得到 COMPLETE 事件时，我从包装器中读取相关信息并处理整个事情。

我的回忆是，这与 RemoteObject 和 HTTPService 代码的工作方式不同，但在思维过程上是相似的。您可以使用 F3 转到其中一个或另一个的源代码，并确切了解 Adob​​e 是如何处理它的，并尝试按照您自己的任务的模式进行操作。

# c# - 应用更新而不重新启动应用程序

> ID：15684269
> 
> 赞同：11
> 
> 时间：2013-03-28T14:20:58.263
> 
> 标签：c#, wpf, winforms, patch, auto-update

最近我接受了一个 .NET 职位的面试。在提出的问题中，我很难回答一个问题。我希望有人可以帮助我。

场景（问题）：应用程序的第一个版本（可能是 winform/wpf UI 应用程序）已经发布给客户端，他们开始使用该应用程序。但不幸的是，QA 团队后来在当前版本中发现了一个严重的问题。现在的挑战是，我们应该能够发送和应用补丁（修复），而无需强制重新启动应用程序。假设该应用程序是一个实时应用程序，无法重新启动以应用补丁程序。

就个人而言，我在给出一个在应用补丁时不会影响正在运行的应用程序的令人信服的答案时遇到了真正的麻烦。

回答：

感谢您迄今为止所做的所有贡献。我已经设法解决了这个问题。不知道这是不是面试官问的。尽管如此，我很高兴读到微软的 ClickOnce，它几乎可以满足我的需求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:44:48.670

对于当前运行的可执行文件，您几乎被卡住了——您无法明智地修改内存中运行的进程。

但是，从 DLL 加载的东西要灵活得多。程序集可以在运行时动态加载，并且可以在单个应用程序中启动多个 AppDomain。一种解决方案可能是这样的：

*   您的可执行文件是一个瘦包装器，可将所有功能传递给 DLL
*   您的 DLL 功能通过单独的 AppDomain 加载和运行
*   当需要补丁时，新的 DLL 被复制进来（与现有的并排）
*   自动或响应用户交互，在现有 AppDomain 旁边启动一个新 AppDomain，运行新补丁
*   在应用程序中的适当位置（例如，全屏切换或定时刷新），新的 AppDomain 成为“实时”的
*   旧的 AppDomain 被关闭并丢弃

但是，这是非常高级的。在现实情况下，您很可能会拥有一个具有缓存和实时数据以及许多其他考虑因素的多层应用程序。例如，可能有必要将应用程序的前端逻辑与缓存或数据处理部分分开，以便可以在不干扰其余部分的情况下切换任何部分。

某些不常见的技术可能在这里有用，具体取决于确切的要求。高级缓存可以允许交换数据层，而前端不会失去显示数据的能力。命令队列或可靠的消息传递机制可以允许 UI 在业务层被换出时保持响应，然后新的业务层可以处理队列。如果您假设一个（逻辑上）基于服务器的应用程序，那么每一层的冗余可能允许更新一层的一个冗余“服务器”，而另一台服务器继续处理......等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:51:05.160

如果您从一开始就有这个要求，您可以将您的应用程序分成两个不同的应用程序 - UI 部分和一个在单个原子函数调用中完成所有工作的服务。最有可能的是，您的错误存在于服务中，因此您可以随时替换该应用程序而不会破坏用户体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:34:12.787

首先，您需要知道此应用程序是否依赖于配置文件，例如 xml、ini 或任何形式的基于文本的文件。如果是这样，补丁是否可以作为配置插入，只要它们可以在当前进程范围之外进行编辑。

如果第一个解决方案不可行，那么第二个解决方案确定正在运行的应用程序是否具有可靠的 dll，以及通过引用 dll 注入补丁作为依赖项是否会暂时解决问题，直到调用重新启动。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-28T14:23:54.400

将旧文件重命名为其他文件（例如在文件名中添加“旧”），然后将新的可执行文件复制到其位置，相同的文件名。下次运行时，新的可执行文件将运行。

# jquery - 如何更改光标

> ID：15684271
> 
> 赞同：-2
> 
> 时间：2013-03-28T14:21:00.067
> 
> 标签：jquery, css, mouse-cursor

我已经开始探索 jQuery 并且对事物的外观有疑问。我有一张图片，点击它会切换导航栏。当我将鼠标悬停在图像上时，我有文本选择光标。

如何更改它，使其看起来与我将鼠标悬停在 a `href`（看起来像手形指针）上时相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:21:45.460

使用 CSS，您可以：

```
img:hover {
    cursor: pointer;
    cursor: hand; /* If you want to support IE < 6\. See http://quirksmode.org/css/user-interface/cursor.html#note */
} 
```

或者：

```
img{
    cursor: pointer;
    cursor: hand;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:24:22.110

正如其他人所说

```
img {
    cursor: pointer;
    cursor: hand;
} 
```

但是，如果您想使用“自己的”手，可以将自定义图像设置为光标：

```
img {
    cursor:url(img/hand-url.cur), default;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:22:56.417

那里与jquery无关。

你可以在那里使用css

```
.img:hover{
    cursor: auto

} 
```

**[所有可能的光标样式](http://rainbow.arch.scriptmania.com/css/css_cursor_control.html)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:22:38.360

浏览器对指针有不同的名称:) 跨浏览器：

```
img {
    cursor: pointer;
    cursor: hand;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:23:26.513

如果你给了它一个 id 然后使用这个：

```
$("#id").css("cursor","pointer") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T14:27:38.803

如果您想使用 jquery 而不是其他人发布的首选 css 解决方案，请尝试以下操作：

```
$('#myImage').hover(function() { 
    $(this).css('cursor','pointer'); 
}, function() { 
    $(this).css('cursor','auto'); 
}); 
```

# c - 使用 FSCTL_LOCK_VOLUME win32 api 控制码锁定设备后使用？

> ID：15684273
> 
> 赞同：0
> 
> 时间：2013-03-28T14:21:01.043
> 
> 标签：c, winapi, systems-programming

通过win32 api控制代码锁定设备后如何使用设备`FSCTL_LOCK_VOLUME`，例如列出设备中的文件或从设备中删除文件等。
我可以在设备未锁定时列出所有文件，`FindFirstFile()`但是`FindNextFile()`当我锁定它们时，我无法使用这两个功能。
是否有任何替代功能，例如列出与设备句柄一起使用的文件？
msdn 说：

> 只能通过锁定该卷的文件对象 (*hDevice) 的句柄来访问锁定的卷。

非常感谢，祝你好运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:41:22.910

你不能。

一旦卷被锁定，它只能作为卷数据结构的原始视图访问，而不是作为文件访问。这就是`FSCTL_LOCK_VOLUME`为了让你搞乱原始数据结构。您可以在传递给的句柄上使用`ReadFile`, `ReadFileEx`and `WriteFile`and and and and cousins`WriteFileEx``DeviceIoControl`表兄弟来读取原始卷。

如果您不想这样做，而只是在您查看磁盘时阻止其他人修改磁盘（用于备份等），您可能会考虑卷影副本。不过，这确实取决于您要做什么。

# qt - 如何更改 QGraphicsTextItem 的背景？

> ID：15684277
> 
> 赞同：3
> 
> 时间：2013-03-28T14:21:07.293
> 
> 标签：qt, graphics

我想添加一个 QGraphicsTextItem 并且我想改变背景的颜色。我的意思是我希望包含文本的 boundingRect 具有特定的颜色。一种方法是创建一个 QGraphicsRectItem 并将其放在文本的背面，但我想知道是否还有另一种方法可以做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T14:39:00.640

我会子类化`QGraphicsTextItem`，例如：

```
class QGraphicsTextItemWithBackgroundColorOfMyChoosing : public QGraphicsTextItem
{
    public:
        QGraphicsTextItemWithBackgroundColorOfMyChoosing(const QString &text) :
            QGraphicsTextItem(text) { }

        void paint( QPainter *painter, const QStyleOptionGraphicsItem *o, QWidget *w) {
            painter->setBrush(Qt::red);
            painter->drawRect(boundingRect());
            QGraphicsTextItem::paint(painter, o, w); 
        }   
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T14:47:03.443

[您可以使用setHtml()](http://qt-project.org/doc/qt-5/qgraphicstextitem.html#setHtml)将 HTML 写入 QGraphicsTextItem ，因此您可以使用例如填充背景

```
 item->setHtml("<div style='background-color:#666666;'>" + yourText + "</div>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-18T15:04:03.893

这可能太少了，太晚了，但是以下对我有用，而无需子类或重新实现某些东西。

```
item->setHtml(QString("<div style='background:rgba(255, 255, 255, 100%);'>" + QString("put your text here") + QString("</div>") ); 
```

# c++ - Nvidia Nsight Eclipse 版远程调试与 C/C++ 远程启动配置

> ID：15684284
> 
> 赞同：1
> 
> 时间：2013-03-28T14:21:41.363
> 
> 标签：c++, cuda, eclipse-cdt, remote-debugging, nsight

我有一台安装了支持 CUDA 的 GPU 的服务器（Ubuntu 服务器 12.04 LTS - 无 GUI），以及一台没有 CUDA GPU 的桌面 linux（Fedora 18）机器。我想在我的桌面机器上开发我的代码，然后在我的远程服务器机器上编译然后调试它。

为此，我计划使用带有 C/C++ 远程启动插件的 Nsight 5 Eclipse 版本（如本示例中的[http://wiki.eclipse.org/CDT/User/FAQ#How_do_I_debug_a_remote_application.3F](http://wiki.eclipse.org/CDT/User/FAQ#How_do_I_debug_a_remote_application.3F)）。但是，即使在 Nsight 中安装了所有必需的插件（C/C++ 远程启动、RSE），我在项目的可用调试配置中也没有选择“C/C++ 远程应用程序”。

这是 Nsight Eclipse IDE 的限制还是我在这里遗漏了一些重要的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:17:47.273

Nsight 5.0 不支持远程调试 - 因为这需要特殊的 cuda-gdb 服务器软件。cuda-gdbserver 和 Nsight EE 远程调试将作为 CUDA 工具包 5.5 的一部分发布（我们上周在 GTC 上演示了 CUDA 工具包 5.5，我们正在努力尽快发布它）。

请注意，我们的远程调试器连接 UI 会略有不同，并且不需要单独安装任何 Eclipse 插件。

**更新：** CUDA Toolkit 5.5 RC（包括 Nsight EE 5.5）可供注册的 CUDA 开发人员下载。它包括远程调试支持。

# mysql - 将数据加载到 MySQL：如何处理反斜杠？

> ID：15684286
> 
> 赞同：5
> 
> 时间：2013-03-28T14:21:44.677
> 
> 标签：mysql, sql, bash, unix

我从一个知名来源下载了一个制表符分隔的文件，现在想将它上传到 MySQL 表中。我正在使用`load data local infile`.

这个拥有超过 1000 万条记录的数据文件也有很多反斜杠的不幸。

```
$ grep '\\' tabd_file.txt | wc -l
223212 
```

这些反斜杠不是问题，除非它们出现在字段的末尾。MySQL 将反斜杠解释为转义字符，当它出现在字段末尾时，它会弄乱下一个字段，或者可能是下一行。

尽管有这些反斜杠，但在将 MySQL 加载到表中时，我只收到了 6 个警告。在这些警告中的每一个中，一行都没有正确的列数，因为反斜杠连接了同一行中的两个相邻字段。

我的问题是，如何处理这些反斜杠？我应该指定`load data local infile [...] escaped by ''`从它们中删除任何特殊含义吗？或者这会产生意想不到的后果吗？我想不出这个数据文件中转义序列的一个重要用途。终止字段的实际选项卡是“物理选项卡”，而不是“\t”序列。

或者，从我的加载命令中删除转义字符是不好的做法？`'\'`我应该用 替换文件中的每个实例`'\\'`吗？

感谢您的任何建议:-)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T15:00:41.510

如果您不需要转义，那么一定要使用 ESCAPED BY ''。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

“如果 FIELDS ESCAPED BY 字符为空，则不会发生转义序列解释。”

# actionscript-3 - 在 Flash 中循环图像

> ID：15684296
> 
> 赞同：1
> 
> 时间：2013-03-28T14:22:06.330
> 
> 标签：actionscript-3, flash-cs5

我想要一个场景，其中 5000 像素高的图像在每次帧刷新时向上移动 5 像素。当图像全部向上时，我希望看到图像的顶部连接到图像的底部。这应该一直持续到关卡“完成”。我怎样才能“循环”这样的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:06:21.607

请注意，[Flash 无法加载大于 16,769,025](http://helpx.adobe.com/flash-player/kb/size-limits-swf-bitmap-files.html)像素（或 4095x4095）的图像。只要宽度不大于 3353，5000 像素的高度就可以使用。

也就是说，我会通过在舞台上保留两个图像副本来循环图像，使用父对象同时移动两者，并在遇到循环点后重置为原点。

考虑以下阶段设置：

```
Stage ¬
    0: MainTimeline:MovieClip ¬
        0: Container:MovieClip ¬
            0: img1:Bitmap
            1: img2:Bitmap 
```

现在向上移动容器，您只需要检查循环的第二个图像是否到达了第一个图像的原点。

```
function onEnterFrame(e:Event):void {
    Container.y = Container.y - 5;

    if (Container.y < -5000) {
        Container.y = -5;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:12:15.577

您可以创建该图像的副本，将其隐藏/保持在上方，诀窍是更新位置并相应地循环，以便当一个图像低于屏幕时，它会回到顶部并重复。

下面是一个基本片段，用于说明使用 DisplayObject 类和 scrollRect 属性的想法：

```
//ignore this, you have your content already
var dummyContent:BitmapData = new BitmapData(100,100,false);
dummyContent.perlinNoise(10,10,8,12,true,true);

//important stuff starts here
var container:Sprite = addChild(new Sprite()) as Sprite;//make a container
container.scrollRect = new Rectangle(0,0,dummyContent.width,dummyContent.height);//set a scrollRect/'mask'
var part1:DisplayObject = container.addChild(new Bitmap(dummyContent));//add two copies
var part2:DisplayObject = container.addChild(new Bitmap(dummyContent));//of the same content
part2.y -= part2.height;//set the 2nd at the top of the 1st

addEventListener(Event.ENTER_FRAME,update);
function update(e:Event):void{
    //move both
    part1.y += 5;
    part2.y += 5;
    //check if any reach the bottom so they can be moved back up
    if(part1.y >= part1.height) part1.y = -part1.height;
    if(part2.y >= part2.height) part2.y = -part2.height;
    //the above can also be nicely placed in a loop if you plan on using more seamless looping clips/images
} 
```

显然你会有不同的内容，但原理是一样的。

如果您正在处理图像，您可以简单地使用 BitmapData 的 copyPixels 方法：

```
var s:int = 5;//scroll speed
//make some content
var w:int = 100;
var h:int = 100;
var dummyContent:BitmapData = new BitmapData(w,h,false);
dummyContent.perlinNoise(10,10,8,12,true,true);

//prepare for stiching
var renderPos:Point = new Point();//position to render the current image to
var prenderPos:Point = new Point();//position to render the previous image (the 'hidden' copy above)
var render:BitmapData = new BitmapData(w,h,false);//create a bitmap data instance to render updated pixels int
addChild(new Bitmap(render));//and add it to the stage

addEventListener(Event.ENTER_FRAME,update);
function update(e:Event):void{
    renderPos.y = (renderPos.y+s)%h;//update the scroll position for the 1st part, % is used to loop back to 0 when the position gets to the content height
    prenderPos.y = renderPos.y - h;//update the scroll position for the 2nd part (above)
    render.lock();//freeze pixel updates
    render.copyPixels(dummyContent,dummyContent.rect,renderPos);//copy pixels from the scroll position to the bottom
    render.copyPixels(dummyContent,dummyContent.rect,prenderPos);//copy pixels from the top to the scroll position
    render.unlock();//unfreeze/update ALL THE PIXELS
} 
```

您可以尝试使用更改高度（height-scrollPosition）的 Rectangle 对象，这样您每次可能访问更少的像素，或者您可以使用 BitmapData 的 getVector 方法手动计算单个 for 循环，但如果性能实际上是一个问题，则需要研究对于这样一个简单的任务，值得检查什么更快（复制完整位图矩形与复制部分位图矩形与使用矢量手动复制值）

# java - 如何从 Oracle 中的 JDBC 批量插入中获取生成的密钥？

> ID：15684297
> 
> 赞同：12
> 
> 时间：2013-03-28T14:22:07.283
> 
> 标签：java, oracle, jdbc, primary-key, batch-insert

我正在使用 JDBC 批量插入插入许多记录。有什么方法可以获取每条记录的生成密钥吗？我可以`ps.getGeneratedKeys()`与批量插入一起使用吗？

我在用`oracle.jdbc.OracleDriver`

```
final String insert = "Insert into Student(RollNumber, Name, Age) values(StudentSEQ.nextval, ? , ?)";
final int BATCH_SIZE = 998;
int count = 0;
Connection con = null;
PreparedStatement ps =  null;
try {
    con = getConnection();
    ps = con.prepareStatement(insert);
    for (Student s : students) {
        ps.setString(1, s.getName());
        ps.setInt(2, s.getAge());
        ps.addBatch();
        count++;
        if (count % BATCH_SIZE == 0) {
        // Insert records in batches
            ps.executeBatch();
        }
    }
    // Insert remaining records
    ps.executeBatch();
} finally {
    if(ps != null)
        ps.close();
    release(con);
} 
```

我正在考虑在循环内部使用`ps.executeUpdate()`with`ps.getGeneratedKeys()`来获得所需的结果。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T14:49:07.683

[JDBC 4.1 规范](http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html)，第13.6 节*检索自动生成的值*说：

> `getGeneratedKeys`调用`executeBatch`方法后是否返回生成的值是实现定义的。

因此，您需要检查您的驱动程序是否真的支持批量更新。如[Philip O. 的回答所示，](https://stackoverflow.com/a/18108552/466862) [Oracle 12 JDBC Standards Support](http://docs.oracle.com/cd/E16655_01/java.121/e17657/jdbcvers.htm#CHDEGDHJ)中记录的批量更新不支持检索生成的密钥：

> 您不能将自动生成的密钥与批量更新结合使用。

在任何情况下，如果您的驱动程序支持它，那么您的语句 prepare 应更改为以下代码以指示驱动程序检索生成的密钥：

```
ps = con.prepareStatement(insert, Statement.RETURN_GENERATED_KEYS); 
```

注意：您可能需要使用其他生成的密钥准备方法之一（[`prepareStatement(sql, columnIndexes)`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20int%5B%5D%29)或[`prepareStatement(sql, columnNames)`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20java.lang.String%5B%5D%29)），因为 Oracle 将`ROW_ID`在我的示例中返回该方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-07T16:20:15.513

根据以下页面，Oracle 12c 似乎不支持将自动生成的密钥与批量更新相结合：

[http://docs.oracle.com/cd/E16655_01/java.121/e17657/jdbcvers.htm](http://docs.oracle.com/cd/E16655_01/java.121/e17657/jdbcvers.htm)

请参阅“检索自动生成的密钥”部分下标有“限制”的小节

# java - 通过 keySet 比较地图

> ID：15684299
> 
> 赞同：3
> 
> 时间：2013-03-28T14:22:11.840
> 
> 标签：java, maps, equals

在[这个](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)oracle java 中它说：

> 类似地，假设您想知道两个 Map 对象是否包含所有相同键的映射。
> 
> if (m1.keySet().equals(m2.keySet())) { ... }

我完全理解它的工作原理以及它是如何工作的。但是，做类似的事情并不容易：

```
if (m1.equals(m2)){
..} 
```

或者由于其他原因，我没有看到使用集合视图更好？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:24:57.743

地图可以有相同的**键**但不同的**值**：

```
 Map<String, String> m1 = new HashMap<>();
    m1.put("x", "1");
    m1.put("y", "2");

    Map<String, String> m2 = new HashMap<>();
    m2.put("x", "1");
    m2.put("y", "4");

    System.out.println(m1.equals(m2)); // false
    System.out.println(m1.keySet().equals(m2.keySet()));  // true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:24:58.110

不，因为第一种方法只检查密钥集是否相等。这在逻辑上不同于确定两张地图是否相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T14:26:38.867

比较 m1.equals(m2) 将检查两个映射之间的键和值是否相等。

来自 Java 7 javadoc：

> 布尔等于（对象 o）
> 
> 比较指定对象与此映射是否相等。如果给定对象也是一个映射并且两个映射表示相同的映射，则返回 true。更正式地说，如果 m1.entrySet().equals(m2.entrySet())，则两个映射 m1 和 m2 表示相同的映射。这确保了 equals 方法在 Map 接口的不同实现中正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:25:29.080

您的第二个示例检查的内容与您的第一个示例不同。

*   在您的第一个示例中，您仅比较两个s 的**键**`Map`，而忽略与这些键关联的值。
*   在您的第二个示例中，您比较两个s的**键**和对应**值。**`Map`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:25:18.133

这取决于您如何尝试定义地图的相等性。如果您希望它基于键，您将使用第一个功能：

```
if (m1.keySet().equals(m2.keySet())) { ... } 
```

但是，如果您对这些值更感兴趣：

```
if (m1.values().equals(m2.values())) { ... } 
```

如果你想比较完整的地图：

```
if (m1.entrySet().equals(m2.entrySet())) { ... } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T14:25:27.517

不，接口中的合约`Map`指定比较包含键*和*值`equals()`的映射。因此，接口（等）的实现将遵守该合同。`entrySet()`*`Map``HashMap`*

# android - OnItemClickListener 和自定义 OnTouchListener

> ID：15684309
> 
> 赞同：4
> 
> 时间：2013-03-28T14:22:36.760
> 
> 标签：android, listview, swipe

我在列表视图上有一个视图列表，我想单击它并触发 OnItemClickListener。虽然同时我希望能够滑动每个视图并进行自定义操作。这意味着当在 ArrayAdapter 中创建每个视图时，我必须为每个视图创建自己的 OnTouchEvent。

有没有办法让两者一起工作，以便我可以轻松进行自定义操作，例如滑动项目和单击项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:03:15.447

这与 android 最近活动的处理方式非常相似 - 你知道，它们显示了所有最近打开的应用程序的列表，它们可以滑动删除，或单击打开。查看他们的代码，我想你会得到一个很好的主意：[https ://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/recent](https://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/recent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T07:12:41.163

**你的类可以同时实现 View.OnTouchListener、AdapterView.OnItemClickListener**

```
@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    if(motionEvent.getAction() == MotionEvent.ACTION_UP){
        Log.d(TAG, "ontouch: UP");

     **// Here you can figure if it was simple item click event.
        // We return false only when user touched once on the view. 
        // this will be handled by onItemClick listener.**

        if(lastAction == -1){
            lastAction = MotionEvent.ACTION_UP;
            view.clearFocus();
            return true;
        }
        return false;
    }
    else if(motionEvent.getAction() == MotionEvent.ACTION_DOWN){
        Log.d(TAG, "ontouch: DOWN");
        return false;
    }
    else {
        // This is all action events. 
        lastAction = -1;
        return true;
    }
}

@Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
     // We come here after onTouch event figured out that its a simple touch event and needs to be handled here.
    } 
```

# php - NodeJS：扩展类和__construct方法

> ID：15684313
> 
> 赞同：1
> 
> 时间：2013-03-28T14:22:40.080
> 
> 标签：php, node.js, class, methods, construct

我将我的系统从 PHP 迁移到 NodeJS，我有以下疑问：

在 PHP 中，我有课

```
class Users extends Groups {
    function __construct(){
        parent::__construct();
        //do something
    }
} 
```

但是，如何在 Javascript/NodeJS (ExpressJS) 中做同样的事情？我认为这是扩展，但我如何定义 __construct 方法？像 PHP 一样，在 Class 实例开始时调用的方法的名称是什么？

```
var utils = require('utils');
var Groups = require('./groups.js');
var Users = function(){
    //where is the __construct??
};
util.inherits(Users, Groups); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:51:57.573

没有`parent`具体的构造，所以由你决定以某种方式调用父构造函数。

`inherits`将`super_`属性添加到它的第一个参数

```
Users.super_ = Groups; 
```

所以你可以像这样调用父构造函数：

```
Users.super_.call(this); // Can pass arguments to function as more params.

// OR
Users.super_.apply(this, arguments); // Pass all arguments through. 
```

或者你也可以直接引用父构造函数：

```
Groups.call(this); // Can pass arguments to function as more params.

// OR
Groups.apply(this, arguments); // Pass all arguments through. 
```

# facebook - 从 Facebook API 获取每个帖子的总点赞数

> ID：15684318
> 
> 赞同：0
> 
> 时间：2013-03-28T14:22:51.003
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

我正在使用以下 Facebook API 端点：`/statuses`, `/links`,`/photos` 对于每个返回的对象，我只获取`likes`和`comments`显示 top25 结果的对象，以及通向下一个 25 的分页。

我只对**喜欢的数量**感兴趣。有没有办法通过不需要多次分页调用的不同 API 调用来获取该数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:41:51.097

您可以使用 FQL 返回各种对象的总点赞数。以下是有关如何获取评论的总点赞数的文档：

[https://developers.facebook.com/docs/reference/fql/comment](https://developers.facebook.com/docs/reference/fql/comment)

查询本身如下所示：

`SELECT likes FROM comment WHERE post_id = xyx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T14:48:27.757

```
SELECT like_info.like_count FROM stream WHERE source_id = '<id>' 
```

或者

```
SELECT like_info.like_count FROM stream WHERE source_id = '<id>' and and actor_id = '<id>' 
```

更多：[https ://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)

# magento - 无法从 url 访问 magento（多个网站）上的自定义表单

> ID：15684323
> 
> 赞同：0
> 
> 时间：2013-03-28T14:23:04.817
> 
> 标签：magento

我在只有一个网站设置的本地服务器上为 magento 网站创建了一个自定义 Web 表单，我可以使用 URL 访问表单，但是当我将模块上传到具有多个网站设置的服务器时，我无法访问表单使用 URl ，例如在我的本地服务器上，我可以访问表单

```
 http://localhost/cars/index.php/surcontest-contest 
```

但是当我在服务器上上传模块时，例如 dev.test.org（它有多个网站设置，超过 50 个站点）我无法访问表单

```
 http://dev.test.org/surcontest-contest (gives me a 404 error) 
```

我将如何访问该模块，我将如何了解访问表单的 url。任何帮助将不胜感激。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:46:27.960

如果您的默认 URL 是 [http://www.test.org/](http://www.test.org/)，那么要访问多个子域，您应该通过提供主机设置 Hostname=*.test.org, address=, Record Type=A(address) 从域面板启用

此外，在您的服务器上添加子域 dev.test.org。它将在文件管理器的 public_html 文件夹中创建 dev 文件夹。

您应该在 magento 多个网站步骤之后复制 index.php 和 .htaccess 文件，请参阅链接 [http://inchoo.net/ecommerce/magento/how-to-set-multiple-websites-with-multiple-store- Magento 中的视图/](http://inchoo.net/ecommerce/magento/how-to-set-multiple-websites-with-multiple-store-views-in-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:27:07.207

1）清理缓存以确保模块已安装（在管理员或数据库中检查）

2）检查 url 重写是否已启用并且可以正常工作（您可以在没有 index.php 的情况下访问某些类别或产品页面吗？）

# drools - JBPM 5 ProcessInstanceInfo && EventTypes

> ID：15684326
> 
> 赞同：0
> 
> 时间：2013-03-28T14:23:11.203
> 
> 标签：drools, jbpm

JBPM 5 中的 EventTypes 表有什么用？

它是否存储了进程实例可以接受的可能信号的名称？

或者它是否存储流程实例上发生的事件？

我可以看到这个 EventTypes 表中的条目在实例 ID 的流程实例执行中不断变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:33:23.377

EventTypes 表包含特定流程实例（可能）等待的所有（外部）信号。该表用于确定在检测到信号时应加载哪些流程实例。

克里斯

# c# - 深度优先搜索的递归方法与堆栈

> ID：15684330
> 
> 赞同：7
> 
> 时间：2013-03-28T14:23:27.807
> 
> 标签：c#

我有一个方法如下，它搜索一个集合并递归地评估一个条件：

```
public static bool Recurse(this INodeViewModel node, Func<INodeViewModel,bool> predicate)
{
   INodeViewModel currentNode = node;

   return predicate(currentNode) || node.Children.Select(x => Recurse(x, predicate)).Any(found => found);
} 
```

或者，这可以使用堆栈来实现以避免递归，如下所示：

```
public static bool UsingStack(this INodeViewModel node, Func<INodeViewModel, bool> predicate)
{
   var stack = new Stack<INodeViewModel>();
   stack.Push(node);

   while(stack.Any())
   {
       var current = stack.Pop();

       if (predicate(current))
           return true;

       foreach (var child in current.Children)
       {
           stack.Push(child);
       }
   }
   return false;
} 
```

我的问题是，与递归版本相比，当树的深度很大时，堆栈版本是否提供任何性能优势？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T14:48:58.120

> 我的问题是，与递归版本相比，当树的深度很大时，堆栈版本是否提供任何性能优势？

是的。当树的深度很大时，递归版本比迭代版本*慢得多。*这是因为递归版本会破坏调用堆栈，导致不可停止的堆栈空间外异常，并在返回 bool 之前终止程序。*迭代版本在堆空间*耗尽之前不会这样做，并且堆空间可能比堆栈空间大数千倍。

根本不给出结果显然比在任何有限时间内给出结果更差。

但是，如果您的问题确实是“当树很深时堆栈版本是否提供任何好处，但又不会太深以至于炸毁堆栈”，那么答案是：

**您已经以两种方式编写了程序。运行它并找出答案。** 不要在网上随便给陌生人看两匹马的照片，问哪个更快；比赛他们，然后你就会知道。

另外：我倾向于通过编写遍历并*产生每个元素*的方法来解决您的问题。如果您可以编写方法`IEnumerable<INode> BreadthFirstTraversal(this INode node)`，`IEnumerable<INode> DepthFirstTraversal(this INode node)`那么您就不需要编写自己的搜索；你可以说什么`node.DepthFirstTraversal().Where(predicate).FirstOrDefault()`时候要搜索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T14:37:09.170

让我们先明确一点：递归不是为了速度。它所做的任何事情都可以通过迭代至少以同样快的速度完成，而且通常更快。递归的好处在于代码的清晰性。

话虽如此，除非您绝对需要尽可能快的代码（坦率地说，您几乎从不这样做），否则第二个（数据递归）版本甚至不值得考虑，因为它无缘无故地增加了复杂性。它在 C# 中尤其没有价值，因为每个`Stack`操作都涉及一个方法调用，而消除递归主要是为了摆脱方法调用。您几乎肯定会*添加*工作，强制方法调用运行时可以使用内置堆栈更有效地处理的内容。

[Eric 对堆栈溢出提出了一个合理的观点](https://stackoverflow.com/a/15684914/319403)，但为了解决这个问题，您需要一棵树深数千个节点，或者您必须从已经很深的调用堆栈中搜索，或者谓词需要本身是递归的（可能通过触发其他搜索）。有了一个稍微平衡的树和一个不会导致更多递归的谓词，堆栈深度应该不是问题；默认堆栈已经足够大，可以处理相当多的递归，如果需要，可以做得更大。

尽管如此*：*我猜想，你也一样，所有没有实际实现和测试过这两个版本的人也是如此。如果你那么在乎，那就抓紧时间吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:49:12.837

第二个版本有几个优点：

您可以使用队列而不是堆栈轻松地从 DFS 切换到 BFS。

如果深度太大，它会抛出一个可以处理的 OutOfMemoryException。（我相信 StackOverflowException 会自动重新抛出）。

性能和内存使用可能会更好，因为递归方法将所有局部变量（包括编译器生成的）保存在调用堆栈上。

# javascript - 将 phpFox 的一个特性导入 SocialEngine

> ID：15684334
> 
> 赞同：1
> 
> 时间：2013-03-28T14:23:36.060
> 
> 标签：javascript, variables, socialengine, phpfox

phpFox 发布了一个名为“Nebula”的主题，版本为 3.5.0。在这个主题上，标题上有一个按钮，当用户单击按钮时菜单会向下滑动。（其实不是一个按钮，而是一个div）

我想将此功能添加到 SocialEngine。但是 JavaScript 代码包含一个 phpFox 变量，我不知道它指的是什么。我不太擅长 JavaScript。

HTML：

```
<div id="nb_features">
  <a href="#" id="nb_features_link">Features</a>
  <div id="nb_features_holder">
    Menu widget code will be added here...
  </div>                                
</div> 
```

JavaScript：

```
$Behavior.customNebula = function(){

    $('#nb_features_link').click(function(){

        if ($(this).hasClass('nb_is_clicked')) {
            $(this).removeClass('nb_is_clicked');
            $('#nb_features_holder').slideUp('fast');
        } else {
            $(this).addClass('nb_is_clicked');
            $('#nb_features_holder').slideDown('fast');
        }

        return false;
    });
}; 
```

CSS：

```
#nb_features {
    position:absolute;
    top:0px;
    right:0px;
}

#nb_features_link,
#nb_features_link:hover {
    display:block;
    width:40px;
    height:40px;
    line-height:40px;   
    text-indent:-1000px;
    overflow:hidden;
    background:url(~/application/modules/Wonder/externals/images/nb_features_link.png') no-repeat;
    margin-top:-7px;
    margin-right:20px;
}

#nb_features_link:hover {
    background:#334d83 url(~/application/modules/Wonder/externals/images/nb_features_link.png') no-repeat;
}

#nb_features a.nb_is_clicked,
#nb_features a.nb_is_clicked:hover {
    background:#334d83 url(~/application/modules/Wonder/externals/images/nb_features_link.png') no-repeat;
}

#nb_features_holder {
    position:absolute;
    background:#4f4f4f;
    right:0px;
    width:980px;    
    border:1px #304779 solid;
    border-top:0px;
    display:none;
    margin-top:20px;
}

#nb_features_holder ul li a,
#nb_features_holder ul li a:hover {
    float:left;
    color:#fff;
    height:30px;
    line-height:30px;
    padding:0px 10px 0px 10px;
    text-decoration:none;
}

#nb_features_holder ul li a.menu_is_selected,
#nb_features_holder ul li a.menu_is_selected:hover {
    background:#009AEF;
    color:#fff;
}

#nb_features_holder ul li a:hover {
    background:#2F2F2F;
    -webkit-transition: all 0.50s ease;
    -moz-transition: all 0.50s ease;
    -o-transition: all 0.50s ease;      
} 
```

我应该怎么做才能使此代码与 SocialEngine 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:26:06.180

那么 $Behavior 命名空间是 onLoad 事件的包装器，这就是你说的 js 变量吗？如果是，您可以将其替换为更传统的 jquery/mootools/etc 方式，尽管您必须正确匹配选择器，但它可能会起作用，但不知道您发布的代码是否是您需要的一切

# python - 使用美味派过滤时出现 404 错误

> ID：15684335
> 
> 赞同：1
> 
> 时间：2013-03-28T14:23:46.780
> 
> 标签：python, django, rest, tastypie

我正在尝试使用美味派过滤，但是当我尝试通过过滤获取资源时，我收到 404。

### 代码

```
class UserResource(ModelResource):
   class Meta:
       queryset = UsersCouchDb.objects.all()
       resource_name = 'users/list'
       fields = ['firstName', 'lastName', 'gender','status','date']
       always_return_data = True
       authorization= Authorization()
       filtering = {
           "firstName": ('exact', 'startswith'),
       } 
```

我`urlopen`用来访问资源：

```
 info= urllib2.urlopen('http://127.0.0.1:8000/api/users/list/&firstName__exact=David').read() 
```

我如何做到这一点，以便在尝试通过 Tastypie 过滤获取资源时不会得到 404？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:53:18.860

如果您查询的列表中没有结果，TastyPie 只会发回带有零元素的 Json（如下所示）：

```
{
    meta: {
        limit: 20,
        next: null,
        offset: 0,
        previous: null,
        total_count: 0
    },
} 
```

所以看起来如果你得到一个 404，你没有正确设置一些东西。

以下事情可以解决您的问题：

*   确保您已`?format=json`附加到您的网址之前`&`
*   确保您已注册 APIResource
*   如果有任何不同，请确保您已设置适当的 urls.py。

# ios - IOS：将运行文本设为“在电视中运行新闻行”？

> ID：15684337
> 
> 赞同：2
> 
> 时间：2013-03-28T14:23:48.547
> 
> 标签：ios

我很有趣，怎么可能让文本像“电视中的新闻行”一样从右向左移动？
我可以在 UILabel 中从右到左（或任何其他）移动文本，但是这个动画移动应该是无限循环，而不仅仅是一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:27:32.083

这里有几个：

*   [https://github.com/caydenliew/CLTickerView](https://github.com/caydenliew/CLTickerView)
*   [https://github.com/malcommac/DMScrollingTicker](https://github.com/malcommac/DMScrollingTicker)
*   [https://github.com/MugunthKumar/MKTickerViewDemo](https://github.com/MugunthKumar/MKTickerViewDemo)
*   [https://github.com/jeffhodnett/JHTickerView](https://github.com/jeffhodnett/JHTickerView)
*   [https://github.com/cbess/AutoScrollLabel](https://github.com/cbess/AutoScrollLabel)

[Cocoa Controls](http://www.cocoacontrols.com/)可能还有更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:27:35.130

像这样怎么样：

```
-(void) animate {

    label.center = CGPointMake(self.view.bounds.size.width + label.bounds.size.width/2, label.center.y);
    [UIView animateWithDuration:20 delay:0 options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionRepeat) animations:^{

        label.center = CGPointMake(0 - label.bounds.size.width/2, label.center.y);

    } completion:nil];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:42:32.923

```
// CrawlView.h

#import <UIKit/UIKit.h>

@interface CrawlView : UIScrollView

@property (assign, nonatomic) NSTimeInterval period;
@property (strong, nonatomic) NSMutableArray *messages;

- (void)go;

@end

// CrawlView.m

#define kWORD_SPACE  16.0f

#import "CrawlView.h"

@interface CrawlView ()
@property (assign, nonatomic) CGFloat messagesWidth;
@end

@implementation CrawlView

- (void)buildSubviews {

    for (UIView *subview in [self subviews]) {
        if ([subview isKindOfClass:[UILabel self]]) {
            [subview removeFromSuperview];
        }
    }

    CGFloat xPos = kWORD_SPACE;

    for (NSString *message in self.messages) {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
        label.text = message;
        CGSize size = [message sizeWithFont:label.font];
        CGFloat width = size.width + kWORD_SPACE;
        label.frame = CGRectMake(xPos, 0.0, width, self.frame.size.height);
        [self addSubview:label];
        xPos += width;
    }
    self.messagesWidth = xPos;
    self.contentSize = CGSizeMake(xPos, self.frame.size.height);
    self.contentOffset = CGPointMake(-self.frame.size.width, 0.0);
}

- (void)go {

    [self buildSubviews];
    if (!self.period) self.period = self.messagesWidth / 100;

    [UIView animateWithDuration:self.period
                          delay:0.0
                        options:UIViewAnimationOptionCurveLinear |UIViewAnimationOptionRepeat
                     animations:^{
                         self.contentOffset = CGPointMake(self.messagesWidth, 0.0);
                     } completion:^(BOOL finished){
                         [self buildSubviews];}];
}

@end 
```

# magento - 向 Magento 单页结帐流程添加步骤

> ID：15684338
> 
> 赞同：2
> 
> 时间：2013-03-28T14:23:50.500
> 
> 标签：magento, magento-1.7

我正在尝试在 Magento 单页结帐过程中创建一个额外的步骤。我正在关注位于[http://www.excellencemagentoblog.com/magento-onestep-checkout-add-step](http://www.excellencemagentoblog.com/magento-onestep-checkout-add-step)的教程，但在审查之前特别添加了一个步骤。

我的文件夹/文件结构如下。（忽略小部件.xml） ![文件夹结构](../Images/58fb6a064941be268414142c71513738.png)

我已将当前状态的代码上传到此要点： [https ://gist.github.com/Relequestual/5263498](https://gist.github.com/Relequestual/5263498)

我将主题设置为“新”。

我正在对 $this->getSteps() 进行 var_dumping，这表明“testcheck”返回 null。在 config.xml 中，如果我在 gobal、blocks、checkout、rewrite、onepage 下更改为最后带有“_TestCheck”的同一类，则结帐根本不显示，但“Test Check”出现在进度部分正确的。当我恢复此更改时，它会在 var 转储中显示为不为空，就像这样...... ![测试检查 vardump](../Images/7e0df35caade9a8bfdc2340de643f80b.png) 但是，我仍然没有看到实际添加到页面的步骤。

我以前没有做过任何magento，所以感觉有点过头了。我预计 xml 配置文件存在一些问题，但我已经为此工作了 2 天，对于我还能尝试什么感到有些迷茫。

我知道这个问题听起来可能与其他问题相似，但是我找不到 OP 与我所看到的症状相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T06:08:16.360

默认情况下，magento 提供了一些结帐步骤。但有时您需要添加来自客户的额外信息以供将来参考。一个常见的请求自定义是在默认结帐过程中添加自定义表单。这不是接触核心文件的好习惯。您可以通过覆盖模块来做到这一点。在此示例中，公司名称为**Ipragmatech**，模块名称为**Checkoutstep**。

Step1：在结账过程中添加自定义步骤

打开 Ipragmatech > Checkoutstep > Block > Onepage> Checkoutstep.php 文件并编写以下代码

```
 class Ipragmatech_Checkoutstep_Block_Onepage_Checkoutstep extends Mage_Checkout_Block_Onepage_Abstract
    {
       protected function _construct()
       {     
          $this->getCheckout()->setStepData('checkoutstep', array(
          'label'     => Mage::helper('checkout')->__('Invitation to participation'),
          'is_show'   => true
        ));
        parent::_construct();
       }
     } 
```

步骤 2：在结帐过程中添加您想要的步骤和位置

打开 Ipragmatech > Checkoutstep > Block > Onepage> Checkoutstep.php 文件并编写以下代码

```
 class Ipragmatech_Checkoutstep_Block_Onepage extends Mage_Checkout_Block_Onepage
    {
      public function getSteps()
      {
             $steps = array();

             if (!$this->isCustomerLoggedIn()) {
                $steps['login'] = $this->getCheckout()->getStepData('login');
             }

            $stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'checkoutstep', 'review');
         foreach ($stepCodes as $step) {
             $steps[$step] = $this->getCheckout()->getStepData($step);
          }

    return $steps;
   }
} 
```

Step3：抓取自定义表单的提交值，设置自定义表单的值

打开 ipragmatech > Checkoutstep > controllers > OnepageController.php 并编写以下函数

```
 public function saveCheckoutstepAction()
    {
      $this->_expireAjax();
      if ($this->getRequest()->isPost()) {

     //Grab the submited value 
     $_entrant_name = $this->getRequest()->getPost('entrant_name',"");
     $_entrant_phone = $this->getRequest()->getPost('entrant_phone',"");
     $_entrant_email = $this->getRequest()->getPost('entrant_email',"");
     $_permanent_address = $this->getRequest() ->getPost('permanent_address',"");
     $_address = $this->getRequest()->getPost('local_address',"");

     Mage::getSingleton('core/session') ->setIpragmatechCheckoutstep(serialize(array(
    'entrant_name' =>$_entrant_name,
    'entrant_phone' =>$_entrant_phone,
    'entrant_email' =>$_entrant_email,
    'permanent_address' =>$_permanent_address,
    'address' =>$_address
     )));

    $result = array();
    $redirectUrl = $this->getOnePage()->getQuote()->getPayment() ->getCheckoutRedirectUrl();
        if (!$redirectUrl) {
            $this->loadLayout('checkout_onepage_review');
            $result['goto_section'] = 'review';
            $result['update_section'] = array(
                'name' => 'review',
                'html' => $this->_getReviewHtml()
            );

        }

        if ($redirectUrl) {
            $result['redirect'] = $redirectUrl;
        }

        $this->getResponse()->setBody(Zend_Json::encode($result));
    }
} 
```

Step4：保存自定义表单信息

当调用 checkout_onepage_controller_success_action 事件挂钩时。打开 Ipragmatech > Checkoutstep > Model >Observer.php 并编写以下内容

```
 class Ipragmatech_Checkoutstep_Model_Observer {
      const ORDER_ATTRIBUTE_FHC_ID = 'checkoutstep';
      public function hookToOrderSaveEvent() {
      if (Mage::helper('checkoutstep')->isEnabled()) {
         $order = new Mage_Sales_Model_Order ();
         $incrementId = Mage::getSingleton ( 'checkout/session' )->getLastRealOrderId ();
         $order->loadByIncrementId ( $incrementId );

       // Fetch the data 
       $_checkoutstep_data = null;
       $_checkoutstep_data = Mage::getSingleton ( 'core/session' )->getIpragmatechCheckoutstep ();
       $model = Mage::getModel ( 'checkoutstep/customerdata' )->setData ( unserialize ( $_checkoutstep_data ) );
       $model->setData ( "order_id",$order["entity_id"] );
       try {
           $insertId = $model->save ()->getId ();
             Mage::log ( "Data successfully inserted. Insert ID: " . $insertId, null, 'mylog.log');
        } catch ( Exception $e ) {
            Mage::log ( "EXCEPTION " . $e->getMessage (), null, 'mylog.log' );
          }
        }
    } 
```

}

Magento – 在结帐扩展中添加自定义表单是一个完整的解决方案，可以在您的电子商务网站的结帐过程中添加额外的步骤。它允许管理员以 CSV 格式从自定义表中导出数据。

访问链接以获取此免费扩展[http://www.magentocommerce.com/magento-connect/custom-form-in-checkout.html](http://www.magentocommerce.com/magento-connect/custom-form-in-checkout.html)

# sorting - 堆排序的速度和内存分析

> ID：15684339
> 
> 赞同：0
> 
> 时间：2013-03-28T14:23:52.917
> 
> 标签：sorting, big-o, heapsort

我尝试用谷歌搜索和维基搜索这些问题，但似乎找不到具体的答案。我发现的大部分内容都涉及使用主定理的证明，但我希望用简单的英语能更直观地记住一些东西。另外我不在学校，这些问题是为了面试。

记忆：

在内存使用方面确定 big-o 到底意味着什么？例如，当您必须存储所有 n 个项目时，为什么认为堆排序使用 O(1) 内存运行？是因为您只为堆创建一个结构吗？或者是因为你知道它的大小，所以你可以在堆栈上创建它，这始终是恒定的内存使用？

速度：

如果在 O(1) 中完成添加元素但在 O(logn) 中完成渗透，如何在 O(n) 时间内完成堆的创建？这是否意味着您在 O(1) 处进行 n 次插入，使其成为 O(n) 并在每次插入后渗透为 O(logn)。所以总共 O(n) * O(logn) = O(nlogn)。我还注意到堆排序的大多数实现都使用 heapify 函数而不是渗透来创建堆？由于 heapify 在 O(logn) 处进行 n 次比较，这将是 O(nlogn)，并且在 O(1) 处进行 n 次插入，我们将得到 O(n) + O(nlogn) = O(nlogn)？第一种方法在 n 较小的情况下不会比第二种方法产生更好的性能吗？

我在上面假设了这一点，但是执行 O(1) 操作 n 次是否会导致 O(n) 时间？还是 n * O(1) = O(1)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:05:48.143

所以我从维基百科中找到了一些关于构建二进制堆的有用信息：[http](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap) ://en.wikipedia.org/wiki/Binary_heap#Building_a_heap 。

我认为我的主要困惑来源是如何“插入”到堆中是 O(1) 和 O(logn)，即使第一个不应该被称为插入，也许只是一个构建步骤或其他东西。因此，在创建堆之后，您将不再使用 heapify，而是使用 O(logn) 插入方法。

在保持堆属性的同时迭代添加项的方法在 O(nlogn) 中运行，并且在不考虑堆属性的情况下创建堆，然后进行堆化，实际上在 O(n) 中运行，原因不是很直观，需要证明，所以我错了。

在每个方法都有一个尊重堆属性的堆之后，获取有序项的删除步骤是相同的​​成本，O(nlogn)。

所以最后你会有一个 O(1) + O(n) + O(nlogn) = O(nlogn) 用于构建堆方法，以及一个 O(nlogn) + O(nlogn) = O(nlogn ) 用于插入方法。显然第一个更可取，尤其是对于小的 n。

# log4net - 基于 Web 的 log4net 查看器

> ID：15684343
> 
> 赞同：1
> 
> 时间：2013-03-28T14:24:00.280
> 
> 标签：log4net, viewer

我们有一个 asp.net 应用程序，它使用 log4net 将错误和警告记录到 xml 文件中。

我们已经尝试了很多 log4net 查看器，但没有找到任何像样的查看器。

我们尝试过的最新版本是 log4net 仪表板，它非常好，但并不能完全满足我们的需要。

我们的日志保存在 C:\MyApp\Logs[year][month]\log[date].xml

是否有任何不错的基于 Web 的查看器可以让我们查看 C:\MyApp\Logs\ 下的所有日志

查看器不需要免费使用许可证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:15:21.283

我在他们的博客上看到了一篇关于这个问题的帖子，以及在删除新版本时如何解决这个问题。

[http://blog.reflectsoftware.com/2013/04/17/directorynotfoundexception/](http://blog.reflectsoftware.com/2013/04/17/directorynotfoundexception/)

我可以确认手动创建此目录可以解决引发的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:43:01.153

我过去使用过 l4ndash，它是一个很好的工具。

您是否尝试在 web.config 中更改此设置？这应该加载该文件夹中的所有文件。

```
 <datasource name="XML Text file" Description="XML Text file (output from FilAppender or RollingFileAppender)">
        <provider type="L4NDashXmlTextFileProvider.XmlTextFileProvider" assembly="L4NDashXmlTextFileProvider, Version=2.4, Culture=neutral"/>
        <predefinedsearchfilter value="Filters\DefaultSearchFilters.xml"/>
        <providersettings>
            <filename value="C:\MyApp\Logs\*.*" /> 
            <SleepOnRename value="100"/>
        </providersettings> 
```

# php - 无法读取 UTF-8 文件名

> ID：15684348
> 
> 赞同：5
> 
> 时间：2013-03-28T14:24:18.640
> 
> 标签：php

无法从 Windows 文件系统读取 UTF-8 文件名（主要 Windows 语言为英语）

```
<?php

$path_to_read = 'D:\music';

class AudioFilterIterator extends FilterIterator
{
    public function accept()
    {
        return (strpos(parent::current(), '.mp3'));
    }
}

$object = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path_to_read));

$iterator = new AudioFilterIterator($object);

echo "<pre>";

$files = array();

foreach($iterator as $file)
{
    echo $file . "\n";
} 
```

因此，例如，我有一个名为“10 Hort auf.mp3”的文件，但作为输出我得到“10 Hort auf.mp3”

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:00:36.257

由于 PHP 在 WinAPI 下工作，没有合理的 UTF-8 支持，因此无法解决这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T18:21:55.723

您可以使用 iconv 函数轻松完成此操作。窗户示例：

```
iconv("WINDOWS-1250", "UTF-8", $name); 
```

# c# - 将数据访问层的值直接接受到数据合约中是否正确？

> ID：15684354
> 
> 赞同：2
> 
> 时间：2013-03-28T14:24:23.480
> 
> 标签：c#, .net, wcf, data-access-layer, datacontracts

我有一个关于将从数据访问层中的数据库获得的值分配给 WCF 层的数据合同的正确方法的问题。

考虑一个简单的场景，从数据库中获取所有学生的列表，然后将其分配给学生数据合约。

我的学生数据合同如下所示：

```
[DataContract]
public class StudentDC
{

    [DataMember]
    public int StudentID { get; set; }

    [DataMember]
    public string StudentName { get; set; }
} 
```

在我的数据访问类中，我会有一个像 List GetAllStudents() 这样的方法

我的问题是关于我的 GetAllStudents() 方法的实现。它看起来像下面这样是否可以：

1.  公共列表 GetAllStudents() {

    ```
    List<StudentDC> studentDCs = new List<StudentDC>();

    var students = db.Students_TB.Select(s => s).ToList();

    foreach(Student_TB student in students)
    {
        StudentDC studentDC = new StudentDC();
        studentDC.StudentID = student.StudentID;
        studentDC.StudentName = student.StudentName;
        studentDCs.Add(studentDC);
    }

    return studentDCs; 
    ```

    }

上述为数据合约赋值的方式是否正确，或者我应该让学生业务对象类接受数据访问层中的数据，然后在服务合约实现中将值传递给数据合约，如下所示：

1.  我会有如下的学生业务对象类：

    公共课学生BO {

    ```
    int studentID;
    string studentName;

    public int StudentID
    {
        get { return studentID; }
        set { studentID = value; }
    }

    public <return type> BusinessLogicMethod1()
    {
        // Implementation
    } 
    ```

    }

在数据访问层中，我将从数据库中获取的值分配给学生业务对象的集合，如下所示：

```
public List<StudentBO> GetAllStudents()

{

    List<StudentBO> studentBOs = new List<StudentBO>();

    var students = db.Students_TB.Select(s => s).ToList();

    foreach(Student_TB student in students)

    {
        StudentBO studentBO = new StudentBO();
        studentBO.StudentID = student.StudentID;
        studentBO.StudentName = student.StudentName;
        studentBOs.Add(studentBO);
    }

    return studentBOs;
} 
```

然后，学生业务对象中的值将被分配给服务合同实现中的学生数据合同，从那里通过线路发送出去。

以上两种方式哪一种是正确的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:47:58.357

首先，您应该询问您的设计目标：

*   您的数据库层对象多久更改一次（例如添加/更新/删除新字段）？
*   数据层表多久更改一次（重新设计关系、表结构）？
*   您的 WCF 域对象多久更改一次以满足业务/UI 要求？

将数据层与业务对象分离的主要思想是在它们之间进行某种程度的抽象。因此，持久层（又名：数据访问层）的变化不会对更高级别的业务逻辑产生重大的连锁反应。业务逻辑也是如此……如果有更改……对持久层的更改是最小的。

另一个方面是代码的可测试性。您可以为您的业务逻辑提供单元测试用例，并在没有连接到实际数据库的持久层的情况下运行它们。相反，您可以在持久层中使用“模拟”类，以便您可以在内存中运行所有内容并测试您的业务层，而无需连接到数据库。

最后，如果您不期望在您的应用程序的整个生命周期中更改任何一个层并维护不期望的代码，您可以使用它。但在大多数情况下，应用程序会发生变化，维护成本是关键点之一……而层松耦合在这里有很大帮助。

您还可以考虑使用[AutoMapper将数据访问层和业务层对象之间的映射外部化](http://automapper.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:25:55.533

如果我理解正确，问题基本上是以下两个选项中哪个更“正确”：

*   数据库数据对象 -> 数据传输对象
*   数据库数据对象 -> 业务对象 -> 数据传输对象

我会说前者。您的业​​务对象的存在是为了封装应用程序业务域的逻辑，您的 DTO 的存在是为了帮助将数据从您的应用程序移动到其客户端。不仅从数据库对象复制到业务对象以及从那里复制到 DTO 需要付出更多的努力，而且有些人说（尤其是在[命令-查询职责分离](http://martinfowler.com/bliki/CQRS.html)世界中）业务对象上的属性甚至不应该公开访问，因为这会暴露它们的属性内部状态并违反封装。所以是的——在我看来，直接从 ORM 数据库对象复制到 DTO 既好又更正确。

另外@user1697575 指出[AutoMapper](http://automapper.org)可以帮助您进行映射是非常正确的 :)

# html - 如何使用 CSS 为图标添加悬停效果？

> ID：15684357
> 
> 赞同：-3
> 
> 时间：2013-03-28T14:24:29.623
> 
> 标签：html, css, hover, effects

我正在更新我的网站并使用了这篇文章[如何使用 HTML 和 CSS 在我的网站上显示社交图标？](https://stackoverflow.com/questions/15645634/how-can-i-display-social-icons-on-my-website-with-html-and-css)在我的网站上添加一些社交媒体图标。

现在我想知道，我怎样才能实现悬停效果，即改变不透明度）。我知道这应该只有几行代码，但我不知道如何实现（CSS初学者）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T14:25:28.147

如果您想使用 class 定位特定元素，请像这样（CSS）`.email`：

```
.icons .email:hover {
    // Your code here
    opacity: .5;
} 
```

如果您想要更通用的解决方案，请为所有元素提供相同的类（`.icon`在本例中）并执行以下操作：

```
.icons:hover {
    // Your code here
    opacity: .5;
} 
```

您可能想了解 CSS[级联和继承](http://www.w3.org/TR/CSS21/cascade.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:26:35.373

您可以通过以下代码简单地做到这一点：

```
.className:hover (or) #id:hover{
opacity:0.5;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:27:02.103

```
div:hover{ do: something } 
```

在此处了解有关[CSS 选择器的更多信息](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:30:23.913

你不需要不透明度，你也可以使用 display 属性。这适用于所有带有内部类图标的图像的标签。

我添加了蓝色背景作为图像的替代品。

[**演示**](http://jsfiddle.net/7uLbF/3/)

**html:**

```
<label class="labelWithIcon"><img class="icon" />test</label> 
```

**CSS：**

```
.labelWithIcon .icon{
    display:none;
    width:10px;
    height:10px;
    background-color:blue;
}

.labelWithIcon:hover .icon{
    display:inline;
}

.labelWithIcon{
    padding-left:10px;
}

.labelWithIcon:hover{
     padding-left:0px;   
} 
```

**编辑：**使选择器比“标签”更具体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:28:09.280

您可以使用`:hover`伪类：

```
.social:hover{opacity: .7;} 
```

# java - Eclipse 错误地自动构建 Android 项目

> ID：15684360
> 
> 赞同：0
> 
> 时间：2013-03-28T14:24:36.957
> 
> 标签：java, android, eclipse, corruption

我的 Eclipse 似乎已经损坏了自己/我的项目。我重命名了 XML 中一些 TextViews 的 id，它改变了其他 XML 文件中一些其他 TextViews 的 id，导致许多空指针异常。当我尝试重命名它们时，更改新名称，然后跳转到已经存在的完全随机的东西。它完全破坏了我的项目，所以我必须重新开始，但是有人知道是什么原因造成的吗？

谢谢

编辑：当我正在编辑 ID 时，似乎某些元素共享一个 ID。每次我改变一个，它都会改变另一个。我认为这是因为 Eclipse 生成 TextViews 并将它们称为 TextView01 等。它将所有它称为 TextView01 的内容链接在一起。现在，每当我编辑其中一个时，它都会改变另一个...

我怎样才能解决这个问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:39:11.730

您可以尝试从 Gen 文件夹中删除 R 文件。这将强制重建所有生成的 Id。将 R 文件删除到另一个位置后，执行 Project > Clean 以重建 R 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:14:12.273

ID 在 XML 中的多个元素之间共享，并且在图形布局中编辑 ID 会导致“链接”元素 ID 也被更改。这已通过进入文件的 XML 并通过代码而不是 GUI 更改 ID 来解决。然后我保存了所有更改并清理了项目，它解决了我的问题。

# ios - TTTAttributedLabel 断行模式在 iOS6 中被破坏

> ID：15684370
> 
> 赞同：3
> 
> 时间：2013-03-28T14:25:10.457
> 
> 标签：ios, nsattributedstring, truncation

如果我在 TTTAttributedLabel 示例应用程序“Espresso”中将 linebreakmode 设置为截断尾部，一切看起来都应该在 iOS 5 模拟器中，但如果我在 iOS 6 模拟器中运行应用程序，则文本在第一行之后被截断，尽管文本超过 3 行. 行数设置为零。我错过了什么？在我注意到 Espresso 应用程序中的这种行为后，我可以不再担心我自己的应用程序中代码的损坏。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T20:05:50.583

我目前面临同样的问题。在实际设置文本之前尝试设置 LineBreakMode。例如：

```
TTTAttributedLabel* descriptionLabel = [[TTTAttributedLabel alloc] initWithFrame:CGRectMake(20, 120, 280, expectedSize.height)];
descriptionLabel.lineBreakMode = UILineBreakModeWordWrap;
descriptionLabel.numberOfLines = 0;
descriptionLabel.text = description; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:23:44.993

iOS 6 中的标签和文本视图原生支持属性文本。因此，如果您不需要支持旧版本的 iOS，您可以摆脱 3rd 方控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T22:25:03.480

就我而言，由于某种原因，以下代码导致标签仅显示一行。删除它有助于' self.attributedLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:09:23.453

奇怪的是问题自己解决了。我无法弄清楚为什么这个特殊问题会发生在 iOS6 模拟器上，但现在它可以与 iOS6 设备和模拟器上的 NSLineBreakTailTruncation 一起使用。

谢谢您的反馈！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-22T13:06:17.303

你可以试一试。

`NSMutableAttributedString * mutableAttributedString = [[NSMutableAttributedString alloc]initWithString:text]; [self.attributedLabel setText:mutableAttributedString afterInheritingLabelAttributesAndConfiguringWithBlock:nil];`

# jquery - $(element).on(event) 与 $(ancestor).on(event, element)

> ID：15684371
> 
> 赞同：0
> 
> 时间：2013-03-28T14:25:14.653
> 
> 标签：jquery

自从添加了以下功能后，我几乎一直在使用后者`.on()`，但我最近注意到很多答案都使用前者。

有什么区别：

```
$(ancestor).on(event, element, function() { ... }) 
```

和：

```
$(element).on(event, function() { ... }) 
```

[JSFiddle 示例](http://jsfiddle.net/DFgxw/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:27:13.853

第一个示例将事件处理程序*委托给 DOM 树的上层。*这意味着它可以附加到 DOM 中的元素 ( `ancestor`)，但适用于`element`可能尚未在 DOM 中的后代 ( )。

第二个示例将事件处理程序直接附加到`element`，这意味着在代码运行时该元素必须存在于 DOM 中。

委派具有效率的额外优势。想象一下，您想将一个事件处理程序绑定到`li`一个大列表中的每个元素。将单个处理程序绑定到`ul`委托给`li`元素的 parent 比绑定同一函数的多个副本要有效得多。

委托之所以有效，是因为大多数 DOM 事件从它们起源的元素（*目标*）向上*冒泡。*按照前面提到的示例，考虑以下代码：*`li`*

 *```
$("#myList").on("click", "li", function () { /* Do stuff */ }); 
```

当单击的后代时`#myList`，将生成一个`click`事件并将从该元素冒泡到`#myList`（这是一个轻微的简化 - 事件还有另一个阶段称为“捕获”，但这在这里并不重要）。绑定到的事件处理程序`#myList`将被触发，jQuery 检查目标元素是否与选择器匹配。如果是，则执行处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:29:11.167

对我来说你的第一个：

```
$(ancestor).on(event, element, function() { ... }) 
```

当某些元素已被动态加载或创建时使用。将事件直接绑定到那些将不起作用，因此需要将事件委托给其最近的父元素，这在页面加载时`$(document)`可用是始终可用于委托事件的那些之一。

你的第二个：

```
$(element).on(event, function() { ... }) 
```

这是事件在元素上的直接绑定，但这将适用于页面加载时存在的元素。*

# php - 如果 ldap_connect 失败，分配给它的变量应该是假的？

> ID：15684373
> 
> 赞同：0
> 
> 时间：2013-03-28T14:25:15.663
> 
> 标签：php

我有一个使用 LDAP 身份验证的网站。我有两个用于冗余的活动目录服务器。如果主服务器关闭，则应由备用服务器处理身份验证。我尝试使用以下方法来实现这一点：

```
 $LDAP_SERVER = "10.100.10.1";
  $LDAP_SERVER_BACKUP = "10.100.10.2";

  $ldap_mycorp = ldap_connect($LDAP_SERVER);

  if(!$ldap_mycorp){
    $ldap_mycorp = ldap_connect($LDAP_SERVER_BACKUP);
  } 
```

但我注意到，如果与主服务器的连接失败，'ldap_connect($LDAP_SERVER)' 返回资源 id 而不是 false，这意味着永远不会使用 if 语句。

我通过稍后在脚本中添加一些额外的代码来解决这个问题，但是必须有一个解决方案来处理上述上下文中的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:31:09.823

主机名参数可以是空格分隔的主机名列表。这意味着如果主服务器无法运行，LDAP 代码将与备份服务器通信。当代码超时尝试与主服务器通信时会有延迟，但一切仍然有效。

```
$LDAP_SERVERS = "10.100.10.1 10.100.10.2";
$ldap_mycorp = ldap_connect($LDAP_SERVERS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:31:55.827

这是你想要的？ [http://php.net/manual/en/function.ldap-error.php](http://php.net/manual/en/function.ldap-error.php)

我不知道没有错误时它会返回什么，但它应该让您朝着正确的方向迈出一步。如果前一个失败，则给出自动连接到多个服务器的答案，您仍然应该检查连接是否没有任何错误；）

# c++ - 使用 C++ 从另一个类访问一个类中的数组

> ID：15684380
> 
> 赞同：0
> 
> 时间：2013-03-28T14:25:25.017
> 
> 标签：c++, arrays, pointers

我在尝试从另一个类访问我的主类中使用的数组时遇到问题。我的应用程序是用于制作 2D 平台游戏的编辑器 - 它基本上允许您放置 2D 资产（片段）并构建关卡。

我的主类处理一组地图分段类（数组中的每个分段类都保存了地图上分段的位置、比例和旋转等信息）并将它们绘制到屏幕上。

我有一个单独的类，它基本上是一个面板（可拖动，并且可以调整大小，就像您在 Photoshop 之类的东西中找到的那样），它在主类中初始化，用于从文件中绘制可用段的网格。我需要的是能够单击其中一个段，然后将信息添加到主类中引用的数组中。

我有我的主类“Map”，它声明了一个数组：

map.h（简化）

```
class Map
{
public:
  MapSegment* mapSeg[512];
}; 
```

然后，当我创建面板以显示可用段时，我尝试发送该数组的引用，如下所示：

```
Panel* segmentPane = new SegmentPanel(sf::Rect<float>(200,200,250,200), mapSeg); 
```

Segment Panel报头形成如下：

```
class SegmentPanel : public Panel
{
public:
    SegmentPanel(sf::Rect<float> _position, MapSegment* mapSeg[512];);
    void Update();
    void Draw(sf::RenderWindow & renderWindow);
    void ReadSegments();
private:
    std::vector<SegmentDefinition *> segDef;
    MapSegment* mapSeg[512];
}; 
```

和 SegmentPanel cpp：

```
SegmentPanel::SegmentPanel(sf::Rect<float> _position, MapSegment* mapSeg[512])
    : Panel(_position)
{
    panelTitle = "Segment Selection";
}

void SegmentPanel::Update()
{
    // Update segments
}

void SegmentPanel::Draw(sf::RenderWindow & renderWindow)
{
    // Draw default panel items
    Panel::Draw(renderWindow);

// Draw segments
} 
```

但是，从 SegmentPanel.cpp 类向数组添加元素似乎并没有反映在我的主 Main 类中 - 它似乎在内存中创建了一个新数组。

在使用 C# 之后，我对 C++ 还是很陌生！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:32:46.510

首先，C++ 中不存在数组参数类型。在您的`SegmentPanel`构造函数中，`MapSegment* mapSeg[512]`参数实际上等同于`MapSegment** mapSeg`; 它只是一个指向指针的指针！

```
Panel* segmentPane = new SegmentPanel(sf::Rect<float>(200,200,250,200), mapSeg); 
```

在这里，您尝试传递数组`mapSeg`。这经历了数组到指针的转换，将其转换为指向其第一个元素 (a `MapSegment**`) 的指针，然后传递该指针。

`mapSeg`这一切都很好，但是你对构造函数中的参数什么都不做。如果要访问数组，则需要将该指针存储在某处。您可以通过将被调用的*成员*更改为：`SegmentPanel``mapSeg`

```
MapSegment** mapSeg; 
```

然后将您的构造函数更改为：

```
SegmentPanel::SegmentPanel(sf::Rect<float> _position, MapSegment** mapSeg)
    : Panel(_position), mapSeg(mapSeg)
{
    panelTitle = "Segment Selection";
} 
```

注意`mapSeg`成员初始化列表中的初始化。

* * *

您可以这样做的另一种方法是使用*对数组*类型参数的引用。您的构造函数现在看起来像：

```
SegmentPanel::SegmentPanel(sf::Rect<float> _position, MapSegment* (&mapSeg)[512])
    : Panel(_position), mapSeg(mapSeg)
{
    panelTitle = "Segment Selection";
} 
```

参数的类型`mapSeg`是“对 512 个指向的数组的引用`MapSegment`”。然后，您需要使成员`mapSeg`具有相同的类型。

# c#-4.0 - 设置 AssemblyName.CodeBase 是否会强制在 LoadFrom 上下文中加载程序集？

> ID：15684391
> 
> 赞同：1
> 
> 时间：2013-03-28T14:25:40.750
> 
> 标签：c#-4.0, plugins, appdomain, .net-assembly, probing

设置 AssemblyName.CodeBase 是否会强制在 LoadFrom 上下文中加载程序集？

我正在研究一种插件系统。我需要能够使用 Type.GetType 等...在我的代码中的任何地方，我都不必知道 Type 是否来自插件 dll。

我的插件位于我的应用程序（windows/web）的 bin 目录下的 Plugins 文件夹中，每个插件都在它自己的文件夹中。

我将探测路径设置为 Plugins（或 bin;bin\Plugins for web），即使它没有任何区别，因为它们位于子文件夹中。

我像这样加载我的插件

```
pluginInfo.EntryAssemblyName = new AssemblyName(myAssemblyName);

pluginInfo.EntryAssemblyName.CodeBase = assemblyPath;

pluginInfo.EntryAssembly = Assembly.Load(pluginInfo.EntryAssemblyName); 
```

注意：PluginInfo 只是一个保持我的插件状态的类。

我想知道，因为我设置了程序集名称 Assembly.Load 的 CodeBase 属性，即使它不在探测路径中也能够找到我的程序集，这是否意味着程序集在默认上下文中加载或从上下文中加载？

再次为入口程序集引发 AssemblyResolve 事件是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:06:02.730

通过使用[AssemblyName(string)](http://msdn.microsoft.com/en-us/library/b6ccxba0.aspx) .ctor**并**设置`AssemblyName.CodeBase`属性，您无法确定[Assembly.Load(AssemblyName)](http://msdn.microsoft.com/en-us/library/x4cw969y.aspx)将在默认上下文中加载它。它将首先尝试在默认上下文中加载它，但如果失败，它将使用代码库在 LoadFrom 上下文中加载它。查看[Suzanne Cook 关于该主题的博客文章](http://blogs.msdn.com/b/suzcook/archive/2004/08/04/load-assemblyname.aspx)以获取更多信息。

为确保程序集将在默认上下文中加载，**请不要**设置`AssemblyName.CodeBase`属性并为[System.IO.FileLoadException](http://msdn.microsoft.com/en-us/library/system.io.fileloadexception.aspx)做好准备。如果对象构造成功（未引发异常），则程序集在默认上下文中加载。

LoadFrom 上下文的优点是，如果加载的程序集存在于同一路径上，则可以解析它们的依赖关系。另一方面，加载在默认上下文中的程序集只有在 GAC、`AppDomain.BaseDirectory`或`AppDomain.RelativeSearchPath`. 可能会引发该`AppDomain.AssemblyResolve`事件，因为在这些位置中找不到加载的程序集的依赖项。

# r - 在 if 循环中删除/忽略 NA 值

> ID：15684402
> 
> 赞同：1
> 
> 时间：2013-03-28T14:26:00.533
> 
> 标签：r, if-statement, na

所以我有这个简单的 if 循环

```
chick<-lapply(1:length(t),function(i){
if(t[[i]]<0.01){
chick=1
}else 0 
}) 
```

所以基本上当 t<0.01 它打印出 1 如果不是它打印 0 但有时我的数据具有 NA 值，如下面的......我怎样才能将 NA 值也分配为 0 因为我会得到如果我不这样做，则会出现类似的错误：

```
Error in if (t[[i]] < 0.01) { : missing value where TRUE/FALSE needed 
```

这是一个名为“t”的数据的示例输出

```
[[1]]
[1] NA

[[2]]
[1] NA

[[3]]
[1] 0.01 
```

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:27:40.760

利用`is.na`

```
if(t[!is.na(t)][[i]]<0.01) ... 
```

* * *

更重要的是，由于您正在分配 to `chick`，因此不要尝试在您的`lapply`（或类似的）语句中也分配。它会给您带来与您期望的结果不同的结果。而是尝试

```
chick <- lapply(1:length(t),function(i)  
  if(t[!is.na(t)][[i]]<0.01)  1  else 0 
) 
```

或者更好的是，使用 ifelse。

```
chick <- ifelse(t[!is.na(t)] < 0.01, 1, 0) 
```

如果您想`chick`与 的长度相同`t`，请使用 '|' ifelse 中的运算符。正如 NPE 所建议的（但使用 single `|`not `||`in `ifelse`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:28:24.933

以下检查是否`t[[i]]`是`NA`或小于`0.01`：

```
if (is.na(t[[i]]) || t[[i]] < 0.01) {
   .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:42:10.697

为什么不只是这个（反转测试并为补充测试和 NA 返回 0）：

```
 chick <- ifelse(is.na(t)|t>=0.01, 0, 1) 
```

这应该有效，因为 FALSE|NA 将返回 FALSE。请参阅 ?Logic 页面。使用 循环也更有效`lapply`。我想如果您需要列表格式的结果，您可以对结果执行 as.list 或使用：

```
 if( is.na(t) || t>=0.01 ) { 0 }else{ 1 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:32:29.277

或者你可以使用...

```
chick <- numeric( length(t) )
chick[ t < 0.01 ] <- 1 
```

...并避免循环并完全检查 NA。

# oracle - 如何在 Excel 中将 Oracle 内部日期转换为 Excel 日期？

> ID：15684404
> 
> 赞同：0
> 
> 时间：2013-03-28T14:26:05.263
> 
> 标签：oracle, excel

我有一个从 Oracle 数据库中捕获的 .csv 文件。.csv 文件中的日期采用 Oracle 内部格式（不知道它叫什么，因为我不熟悉 Oracle）。看起来像`16474`

当我在我们用于访问数据库的应用程序中查看该日期时，日期为`2/6/2013`.

但是，当我将 .csv 文件导入 Excel 并将列格式设置为短日期时，日期显示为`2/6/1945`

我做了一个随机抽样，看起来月/日总是正确的，但年份相差 68 年。我假设这是因为 Oracle 的“时间开始”不同于 Excel 的“时间开始”

有什么办法可以解决这个问题，以便在将 Oracle 数据导入 Excel 时正确显示日期？

我无权访问 Oracle 方面的任何内容......只有 .csv 文件和 Excel。如果有帮助，我最终也会将 Excel 文件导入 Access。

到目前为止，我在 Excel 中将 Oracle 日期格式化为短日期，并在我的日期列 (J) 旁边插入了一列，并使用了以下内容：

```
=DATE(YEAR(J1)+68,MONTH(J1),DAY(J1)) 
```

考虑到闰年，我不确定这是否 100% 准确

编辑：我认为这段代码可以做到：

```
Public Sub ReplaceData()

    Dim RangeCell As Range

    For Each RangeCell In Selection

        If IsNumeric(RangeCell.Value) Then
            lngDate = CLng(RangeCell.Value)
            RangeCell.Value = DateAdd("d", lngDate - 1, "1/1/1968")
        End If

    Next RangeCell

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:45:34.400

看来甲骨文可能会在 1968 年 1 月 1 日开始。我不是数据库专家，但我认为这个数字在我读过的其他读物中听起来很熟悉。

如果上述假设 1/1/1968 为真，则下面是一个将 Oracle 日期转换为 Excel 日期的示例例程。

```
Sub OracleToExcelCSVDates()
Dim rng as Range 'range of cells containing dates'
Dim cl as Range
Dim strDate As String 'date received from Oracle'
Dim lngDate As Long
Dim newDate As Date 'Converted date'

Set rng = Range("J1:J1000") '< modify this for the number of rows you use in col J'

For each cl in rng 'Iterate over the rng you defined above.'
    'Capture the date from Oracle'
    strDate = cl.Value
    If Not Trim(strDate) = vbNullString Then 'ignore blanks'
        'convert to Long data type'
        lngDate = CLng(strDate)

        'Add the # of days (lngDate) to Oracles base date of 1/1/1968'
        newDate = DateAdd("d", lngDate - 1, "1/1/1968")

        'Overwrite the cell value with the new converted date:'
        cl.Value = newDate
    End If

End Sub 
```

**有关 Excel 日期的更多信息：**

Excel 将序列日期存储为“表示自 1900 年 1 月 0 日以来的天数的数字，加上 24 小时日的小数部分：ddddd.tttttt。这称为序列日期或序列日期时间。”

[http://www.cpearson.com/excel/datetime](http://www.cpearson.com/excel/datetime)。

# php - 我想存储查询的结果，然后将这些结果与下一组进行比较。可能的？

> ID：15684410
> 
> 赞同：0
> 
> 时间：2013-03-28T14:26:31.800
> 
> 标签：php, mysql, compare, average

```
//This is my query
SELECT bline_id, ROUND(Avg(flow),3) avg  
FROM   (SELECT id, bline_id, flow, date, CASE 
             WHEN @previous IS NULL 
               OR @previous = bline_id THEN @rownum := @rownum + 1 
             ELSE @rownum := 1 
           end rn, 
           @previous := bline_id 
    FROM   blf, 
           (SELECT @rownum := 0, 
                   @previous := NULL) t 
    WHERE bline_id > 0 and bline_id < 31
    ORDER  BY bline_id, 
              date DESC, 
              id) t 
  WHERE  rn < 11
  GROUP  BY bline_id 
```

此查询取最后 10 条记录的平均值。我希望能够将这些结果保存回数据库，并在添加新记录时将它们与下一组 10 个进行比较。

我正在寻找的最终结果是能够判断平均值是否有 + 或 - 2% 的变化。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:19:40.913

您可以创建一个包含以下字段的表：

id, bline_id, avg, 时间戳

每次添加记录时，将上面的查询结果插入到此表中。

然后，您可以将此表中的最新记录与之前的记录进行比较。

# android-ndk - 构建 icsopenvpn

> ID：15684413
> 
> 赞同：2
> 
> 时间：2013-03-28T14:26:37.957
> 
> 标签：android-ndk, openvpn

我在构建`ics-openvpn`项目时遇到了一些问题。当我在设备上部署应用程序并尝试导入`.ovpn`文件时，我得到`cannot find minivpn`. 我认为此错误与应用程序构建期间的错误有关。

我已经下载了 android NDK 并在 Eclipse 中设置了路径，下载了 cygwin 并启动了`./build-native.sh`，但它返回了错误

`./build-native.sh: line 1: ndk-build: command not found`

我试图用 ndk-build 的路径修改 .sh 中的路径，但我得到另一个错误：

`NON-CYGWIN COMPATIBLE MAKE PROGRAM.....`

任何人都知道我必须遵循哪些步骤才能正确构建项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T11:11:56.423

运行 build-native.bat 确保您必须拥有 NDK 8b 并为 ndk 文件设置环境变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:11:36.110

您不应该尝试使用 cygwin 构建它。项目中还有一个`build-native.bat`允许使用 windows 构建项目。确保您已安装 ndk 并且 ndk-build 在您的 PATH 中。

# jquery - jQuery UI 自动完成功能在 IE 中不起作用 - 错误：SCRIPT5007

> ID：15684416
> 
> 赞同：0
> 
> 时间：2013-03-28T14:26:49.707
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在尝试将 jQuery UI Autocomplete 与远程 JSON 源一起使用。在 FF 和 chrome 中一切正常，但在 IE 中，自动完成下拉菜单不会触发。我收到一个奇怪的错误：

> SCRIPT5007：无法获取属性“调用”的值：对象为 null 或未定义

这是我的自动完成代码：

```
 $("#product").autocomplete({
         source: function( request, response ) {
            $.ajax({
                url: 'https://secure1.valuecentric.com/Portal/ds_products.cfm',
                type: 'GET',
                data: request,
                success: function( data ) {
                    // feeding back to jquery autocomplete 
                    response(data );
                }
            })
            },
        minLength: 1,
        autoFocus: true,
        select: function(event, ui){
            //alert(ui.item.id);
            query = ui.item.id;
            drawChart(ui.item.id);
        }
    }); 
```

你可以在这里看到这个问题：http: [//vciq.com/index.php/component/datastore/](http://vciq.com/index.php/component/datastore/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:34:04.360

看起来您正在执行跨域请求。如果是这种情况，您将不得不使用[JSONP](http://en.wikipedia.org/wiki/JSONP)：

```
source: function(request, response) {
    $.ajax({
        url: 'https://secure1.valuecentric.com/Portal/ds_products.cfm',
        type: 'GET',
        dataType: 'jsonp',
        data: request,
        success: function( data ) {
            // feeding back to jquery autocomplete 
            response(data);
        }
    });
}, 
```

[有关使用 JSONP 的工作示例，请参阅带有JSONP](http://jqueryui.com/autocomplete/#remote-jsonp)的远程示例。

# angularjs - 如何使用 AngularJS 指令创建这个自定义控件？

> ID：15684417
> 
> 赞同：8
> 
> 时间：2013-03-28T14:26:50.460
> 
> 标签：angularjs, angularjs-directive

我对 AngularJS 有点陌生，正在尝试基于 Zurb Foundation 的自定义选择编写自定义选择控件（请参见此处： http: [//foundation.zurb.com/docs/components/custom-forms.html](http://foundation.zurb.com/docs/components/custom-forms.html)）

我知道我需要为此使用指令，但不确定如何完成此操作。

它必须是可重用的，并允许迭代传递给它的任何数组。当用户从下拉列表中选择项目时可能需要回调。

这是自定义 Foundation 下拉列表的标记：

```
 <select name="selectedUIC" style="display:none;"></select>
    <div class="custom dropdown medium" style="background-color:red;">
        <a href="#" class="current custom-select">Please select item</a>
        <a href="#" class="selector custom-select"></a>
        <ul ng-repeat="uic in uics">
            <li class="custom-select" ng-click="selectUIC(uic.Name)">{{uic.Name}}</li>
        </ul>
    </div> 
```

这暂时有效。我可以从此页面的 Ctrl 填充控件。但是，如您所见，每次我想使用自定义下拉控件时都必须这样做。

关于如何将这个婴儿变成可重复使用的指令的任何想法？

谢谢你的帮助！

克里斯

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T22:46:21.013

如果你想让你的指令不仅可以在同一个页面上重复使用，而且可以在多个 AngularJS 应用程序中重复使用，那么在它们自己的模块中设置它们并将该模块作为依赖项导入你的应用程序是非常方便的。

我把 Cuong Vo 的 plnkr 放在上面（所以最初的功劳归于他）并用这种方法把它分开了。现在这意味着，如果您想创建一个新指令，只需将其添加到`reusableDirectives.js`所有已经`['reusableDirectives']`作为依赖项的应用程序，就可以使用该新指令，而无需向该特定应用程序添加任何额外的 js。

我还将指令的标记移到它自己的 html 模板中，因为它比直接在指令中作为字符串更容易阅读、编辑和维护。

`[**Plnkr Demo**](http://plnkr.co/edit/L02j8z?p=preview)`

**html**

```
<zurb-select data-label="{{'Select an option'}}" data-options="names" 
  data-change-callback="callback(value)"></zurb-select> 
```

**应用程序.js**

```
// Add reusableDirectives as a dependency in your app
angular.module('angularjs-starter', ['reusableDirectives'])
.controller('MainCtrl', ['$scope', function($scope) {
  $scope.names = [{name: 'Gavin'}, {name: 'Joseph'}, {name: 'Ken'}];
  $scope.callback = function(name) {
    alert(name);
  };
}]); 
```

**可重用Directives.js**

```
angular.module('reusableDirectives', [])
.directive('zurbSelect', [function(){
  return {
    scope: {
      label: '@', // optional
      changeCallback: '&',
      options: '='
    },
    restrict: 'E',
    replace: true, // optional 
    templateUrl: 'zurb-select.html',
    link: function(scope, element, attr) { }
  };
}]); 
```

**zurb-select.html**

```
<div class="row">
  <div class="large-12 columns">
    <label>{{label || 'Please select'}}</label>
    <select data-ng-model="zurbOptions.name" data-ng-change="changeCallback({value: zurbOptions.name})" 
       data-ng-options="o.name as o.name for o in options">
    </select>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T17:34:09.517

你在找这样的东西吗？

[http://plnkr.co/edit/wUHmLP](http://plnkr.co/edit/wUHmLP?p=preview)

在上面的示例中，您可以将两个属性参数传递给您的自定义 zurbSelect 指令。Options 是具有 name 属性的选择选项对象的列表，clickCallback 是控制器范围内可用的函数，您希望指令在用户单击某个部分时调用该函数。

请注意，链接函数中没有代码（这是您的指令的逻辑通常所在的位置）。我们所做的只是包装一个模板，使其可重用并接受一些参数。

我们创建了一个隔离范围，因此该指令不需要依赖于父范围。我们将隔离作用域绑定到传入的属性参数。“&”表示绑定到调用 this 的父作用域上的表达式（在我们的例子中是控制器中可用的回调函数），“=”表示创建双向绑定在选项属性之间，所以当它在外部范围内发生变化时，变化会反映在这里，反之亦然。

我们还将此指令的使用限制为仅元素 ()。您可以将其设置为类、属性等。

有关更多详细信息，AngularJs 指令指南非常好：

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

希望这可以帮助。

# c# - 按功能排序

> ID：15684418
> 
> 赞同：0
> 
> 时间：2013-03-28T14:26:52.317
> 
> 标签：c#, sorting

我有一个方法，给定 2 个字符串，他返回一个数字（介于 0 和 100 之间），代表它们的相似程度，0“完全不相似”和 100“它们相同”

现在问题是我有一个县列表（字符串名称，GeoRef 坐标，字符串市长），我想根据我的函数的返回对其进行排序......
我正在寻找类似的东西`myList.Sort(f=>MyScoreEvaluator("York",f.Name))`

谁能告诉我该怎么做？

**Edit1：**我不认为“排序”方法是我想要的......排序比较列表内的项目......我想将列表的项目与外部信息进行比较，并根据该结果对项目进行排序

OrderBy 和 OrderByDescending 正在返回相同的项目订单...

**Edit2：**这是我正在使用的 OrderBy 的代码：`aux.OrderBy(f => StringComparisonHelper.HowAlike(f.Name, countyNameSearched));`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:29:09.703

`OrderBy`LINQ中有一个：

```
var sorted = myList.OrderBy(f => MyScoreEvaluator("York", f.Name)) 
```

或者降序排序：

```
var sortedDesc = myList.OrderByDescending(f => MyScoreEvaluator("York", f.Name)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:32:18.747

您可以只使用[OrderBy](http://msdn.microsoft.com/en-gb/library/bb534966.aspx)：

```
list.OrderBy(f => MyScoreEvaluator("York", f.Name)) 
```

或实现自定义比较器：

```
public static int SortByName(County x, County y)
{
    return x.Name.CompareTo(y.Name);
} 
```

用法：

```
list.Sort(new Comparison<County>(SortByName)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:05:51.377

您可以使用[`OrderBy`](http://msdn.microsoft.com/en-gb/library/bb534966.aspx)并重新分配您的列表：

```
list = list.OrderBy(f => MyScoreEvaluator("York", f.Name)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T14:41:53.623

使用 LINQ 扩展非常容易`OrderBy`（参见其他人的答案）。

如果您想使用`Sort`，它将是：

```
myList.Sort((x, y) => MyScoreEvaluator("York", x.Name)
    .CompareTo(MyScoreEvaluator("York", y.Name))); 
```

这假设`myList`是一个`System.Collections.Generic.List<>`.

如果你想要另一个排序方向，当然交换`x`和`y`在 lambda 箭头的一侧`=>`。

编辑：

记住`.Sort`方法`List<>` *修改*同一个实例。方法的返回类型`Sort`是`void`. 另一方面，`OrderBy`创建一个新`IEnumerable<>`的，您可以调用它`.ToList()`来获取一个*新*的列表对象。旧对象不变。您可以将新对象分配给保存原始列表的变量。*引用旧对象的其他*变量不会受此影响。例子：

```
myList = myList.OrderBy(f => MyScoreEvaluator("York", f.Name)).ToList(); 
```

新编辑：

如果性能是一个问题，则不清楚使用这两者中的哪一个。该`OrderBy`方法只调用`MyScoreEvaluator`原始列表中的每个项目一次。这里介绍的`Sort`方法调用`MyScoreEvaluator`了很多次，因为它不会“记住”每次`MyScoreEvaluator`调用的结果（`Comparison<>`委托实例是算法的黑匣子`Sort`）。因此，如果它想比较`"Fork"`and `"Kork"`，它会调用`MyScoreEvaluator`两次。然后，如果它想比较`"Kork"`and `"Yorc"`，它会`"Kork"` `MyScoreEvaluator`再做一次。另一方面， 的排序算法`List<>.Sort`优于 的`OrderBy`。

# sql - 使用什么：记录或光标？

> ID：15684419
> 
> 赞同：0
> 
> 时间：2013-03-28T14:26:53.880
> 
> 标签：sql, oracle11g, cursor, record

创建一个 PL/SQL 块来检索和显示在指定月份做出的所有承诺的数据。每个质押应显示一行输出。在每行输出中包括以下内容：

• 认捐ID、捐赠者ID和认捐金额
• 如果认捐是一次性支付的，则显示“Lump Sum”。
• 如果承诺按月支付，则显示“每月-#”（# 代表支付的月数）
• 列表应排序以首先显示所有一次性承诺。

这是表结构。

```
CREATE TABLE DD_Pledge (
                   idPledge number(5),
                   idDonor number(4),
                   Pledgedate DATE,
                   Pledgeamt number(8,2),
                   idProj number(5),
                   idStatus number(2),
                   Writeoff number(8,2),
                   paymonths number(3),
                   Campaign number(4),
                   Firstpledge char(1),
                   CONSTRAINT pledge_id_pk PRIMARY KEY(idPledge),
                   CONSTRAINT pledge_idDonor_fk FOREIGN KEY (idDonor)
                           REFERENCES dd_donor (idDonor), 
                   CONSTRAINT pledge_idProj_fk FOREIGN KEY (idProj)
                           REFERENCES dd_project (idProj),
                   CONSTRAINT pledge_idStatus_fk FOREIGN KEY (idStatus)
                           REFERENCES dd_status (idStatus)); 
```

我尝试使用记录，但似乎记录不起作用，因为当指定月份有多个承诺时，它会给我错误。有没有办法使用记录来做到这一点（因为这是我们在覆盖记录后接受的任务）

也许光标将是一个不错的选择，但由于前面提到的一点，我想知道解决这个问题的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:40:58.323

```
SELECT
  p.idPledge,
  p.idDonor,
  p.Pledgeamt as this_payment,
  case 
    when p.paymonths = 0 then 'Lump Sum'
    else 'Monthly - ' || p.paymonths 
  end as payment_method
FROM
  dd_pledge p
WHERE
  TRUNC(p.Pledgedate) >= '01-Mar-2010' AND TRUNC(p.Pledgedate) < '01-Apr-2010'  
order by
  4 
```

假设您将根据需要添加您的月份的开始/结束日期。

# sass - 在 sublime text 2 中禁用文件类型的自动完成

> ID：15684425
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:01.323
> 
> 标签：sass, sublimetext2

有什么方法可以禁用文件类型中的默认片段/自动完成选项？我目前正在使用[hayaku](http://hayakubundle.com)来加快我的 sass/scss 写作速度，我发现默认的代码片段一直妨碍我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:28:51.577

您可以通过使用相同的关键字设置自己的片段来覆盖默认值。您还可以设置文件范围以仅影响特定的范围，这样您的 Sublime 的其余部分仍然可以正常工作（如果那是您的事情）。

同样通过查看他们的[github 页面](https://github.com/hayaku/hayaku)，您可以在此文件中设置一些选项以满足您的需求：[Preferences.sublime-settings](https://github.com/hayaku/hayaku/blob/master/Preferences.sublime-settings)

以下是制作片段的方法： [http ://www.webtempest.com/sublime-text-2-how-to-create-snippets/](http://www.webtempest.com/sublime-text-2-how-to-create-snippets/)

# intellij-idea - IntelliJ 的远程主机可以同步 .class 文件吗？

> ID：15684429
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:06.010
> 
> 标签：intellij-idea

我在 IntelliJ 中使用[远程主机](http://www.jetbrains.com/idea/webhelp/remote-host-tool-window.html)，它不同步 .class 文件；它会同步其他文件，例如 .java 文件。

我的设置：

1.  Windows 7 上的 IntelliJ 12 Ultimate
2.  Ant build 在远程 unix 主机上执行 SSHExec 以编译、jar 等
3.  在 Linux 主机上将远程主机设置为 SFTP（和 FTP 尝试）
4.  更新 .java 文件（类）确实会同步/更新到远程主机

我的目标：启动远程运行 Tomcat 6 的远程调试会话，在本地对类进行小幅更新，并将该类同步到远程主机，目的是 Tomcat 会自动加载新的 .class 文件。

我知道“热插拔”可以手动工作。不起作用的是远程主机没有将新生成的 .class 文件上传到远程主机。

有谁能做到这一点？是否应该使用不同的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:12:03.537

发现远程主机仅在您保存文件时触发。只有这样才会发生文件同步，但仅限于您保存/触摸的文件。远程主机不会“收听”以查看是否仅更新了任何文件/文件夹。希望这可以帮助某人。

# c# - GDI+ 中出现一般错误

> ID：15684431
> 
> 赞同：1
> 
> 时间：2013-03-28T14:27:08.643
> 
> 标签：c#, asp.net

嗨 frnds 任何人都可以帮我解决这个问题，因为我是 .net 世界的新手。下面的代码在本地服务器上运行良好，但是每当我尝试在服务器上上传时，它就会
得到

> *“GDI+ 中出现一般错误。”*

```
if (FileUpload2.PostedFile.ContentType == "image/pjpeg" || FileUpload2.PostedFile.ContentType == "image/jpg" || FileUpload2.PostedFile.ContentType == "image/gif" || FileUpload2.PostedFile.ContentType == "image/jpeg" || FileUpload2.PostedFile.ContentType == "image/png")
            {

            string filename = FileUpload2.FileName;

            // Specify a upload directory
            string directory = Server.MapPath(@"datalistimg\");

            // Create a bitmap in memory of the content of the fileUpload control
            Bitmap originalBMP = new Bitmap(FileUpload2.FileContent);

            // Calculate the new image dimensions
            int origWidth = originalBMP.Width;
            int origHeight = originalBMP.Height;
            int sngRatio = origWidth / origHeight;
            int newWidth = 218;
            int newHeight = (newWidth * origHeight) / origWidth;

            // Create a new bitmap which will hold the previous resized bitmap
            Bitmap newBMP = new Bitmap(originalBMP, newWidth, newHeight);

            // Create a graphic based on the new bitmap
            Graphics oGraphics = Graphics.FromImage(newBMP);

            // Set the properties for the new graphic file
            oGraphics.SmoothingMode = SmoothingMode.AntiAlias;
            oGraphics.InterpolationMode = InterpolationMode.HighQualityBicubic;

            // Draw the new graphic based on the resized bitmap
            oGraphics.DrawImage(originalBMP, 0, 0, newWidth, newHeight);

            // Save the new graphic file to the server
            newBMP.Save(directory + filename);
            dfn2 = @"datalistimg/" + filename;

            originalBMP = null;
            newBMP = null;
            oGraphics = null;

            fn2 = System.IO.Path.GetFileName(FileUpload2.PostedFile.FileName);
            string SaveLocation = Server.MapPath("event") + "\\" + fn2;
            fn2 = "event/" + fn2;
            FileUpload2.PostedFile.SaveAs(SaveLocation); 
```

# extjs - ExtJs 选项卡面板随机消失

> ID：15684434
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:19.357
> 
> 标签：extjs, tabs, extjs4.1, tabpanel

我有一个 Ext.tab.Panel，每个选项卡中都包含一些对象（即 Ext.panel.Panel）。当我尝试在选项卡之间切换时，选项卡中包含的项目随机消失，如图所示。

![在此处输入图像描述](../Images/7c7260ebc10149de3da128c2ea7d9d14.png)

这是一个已知问题还是我犯了一个错误？

谢谢

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:09:43.640

感谢您的评论。

我有两次从 zeke ank pllee 报告的问题。

因为所有人都有同样的问题，所以要小心如何使用布局。我已经在每个元素内设置了适合的布局，删除了它工作的所有“布局”值。

但是，我也已经报告过问题，布局渲染也有同样的问题。上次我解决了在活动选项卡中强制所有组件的 doLayout()

# spring - 如何在后续失败的登录尝试中保留主页 i18n

> ID：15684439
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:31.597
> 
> 标签：spring, spring-mvc, internationalization, spring-security

当用户第一次点击指向我主页的链接时，如果该链接包含 ?langId=fr_FR，则页面以法语显示；到目前为止，一切都很好。如果用户尝试登录失败，页面会以法语显示错误信息，非常完美。问题是如果第二次尝试登录失败。在这种情况下，页面语言默认为英语。

对于上述情况，我不确定如何将页面保留为法语（即初始 url 包含 langId=fr_FR 时的任何后续请求）。我应该使用 CookieLocaleResolver 而不是 SessionLocaleResolver？

该站点使用 Spring Security，我实现了一个在 Spring Security 过滤器之前运行的过滤器。此过滤器将使用 langId 请求参数设置 LocaleContextHolder。这对于初始登录尝试非常有用。提出的任何其他请求，我都会丢失 langId 参数。

我可以在 loadByUserName() 方法中做些什么来让我保留原始的 langId？

这是解析器和拦截器的配置

```
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver" >
 <property name="defaultLocale" value="en" />
</bean>

<mvc:interceptors>
     <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="langId" />
    </bean>
</mvc:interceptors> 
```

**编辑**

使用 CookieLocaleResolver 而不是 SessionLocaleResolver 确实可以解决此问题。但是，如果用户禁用 cookie，那么我又回到了原点。我想找到一种在用户多次登录尝试时将页面保持为法语的方法。非常感谢任何帮助谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:05:38.803

问题正是 sessionlocaleresolver。由于登录尝试失败，每次都会创建一个新会话（我相信）。

这就是 cookielocaleresolver 工作的原因。cookie 已设置并保留在您的域中。

我确实使用了 sessionlocaleresolver 并且还没有考虑过这个问题。

我看到的一种方法应该是在表单操作中包含 locale 参数。这可能是最简单的解决方案？

# c# - COM 对象在 Win7 中有效，但在 XP 中无效

> ID：15684441
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:33.057
> 
> 标签：c#, windows-7, com, windows-xp, com-interop

这让我很沮丧。我有一个读取 RFID 卡的 OPOS 程序。我写了 2 个 C# COM 库。两者都可以在 Windows 7 中正常运行。其中一个很难开始工作，但我终于做到了。为了让我的 COM 库与 OPOS 程序一起工作，我必须确保目标平台是 x86。由于我有win7 pro，并且我在其他x86并运行Win XP的计算机上运行相同的程序，我启动了我的虚拟机。我已经尝试了一百万件事来试图让它发挥作用，但无济于事。我尝试过的事情

我的一个 C# 库（键盘）首先要求我不仅使用 regasm，而且我还必须将该库作为服务对象和可执行文件（即我的 OPOS 程序）放在该位置，如果我在 Win7 中搜索注册表中的 GUID 有一个名为 CodeBase 的键，它基本上是库的位置。如果我将相同的密钥放入我的 XP 机器中，我就不必在两个位置都有库。对其进行了测试，效果很好。

于是就产生了对另一个图书馆的需求。它是用 C#（与键盘相同）编写的，具有几乎完全相同的设置。两者之间的唯一区别是继承接口的网络库类具有`ComSourceInterfaces(typeof(ITapEvents)`并使用 Log4Net。我从未使用过 Log4Net。但为了让它编译我必须得到它，所以我只是将所有库复制到我的 Program Files 文件夹并编译。我没有运行安装程序（甚至不知道是否存在），但就像我说的那样。它适用于Win7。

我无法让它在 XP 中运行。我得到的 HResult 通常是 0x80040154。有什么线索吗？有什么我应该检查的吗？

**编辑** 显示 COM 对象的实例化

```
BOOL hasit = FALSE;
try
{
    CString str1;
    CString str2;
    str1.Format("%llu", sid); //send as decimal
    str2.Format("%llX", uid);//send as hex

    _bstr_t uidStr(str2);
    _bstr_t sidStr(str1);
    INetworkPtr obj = NULL;
    HRESULT hRes = obj.CreateInstance(_uuidof(Network));
    hasit = SUCCEEDED(hRes);
    if (hasit)
    {
        CNetwork cti(obj);
        cti.SendStrings(sidStr, uidStr);
        cti.ReleaseDispatch();
    }
    else
    {
        LogWriter::WriteError(__FUNCTION__, "Error sending Strings", (int)hRes);
    }
}
catch(...)
{
    LogWriter::WriteError(__FUNCTION__, "Error sending Strings");
    hasit = FALSE;
}
return hasit; 
```

# linux - 我如何在 gdb 中自动继续断点

> ID：15684442
> 
> 赞同：2
> 
> 时间：2013-03-28T14:27:34.647
> 
> 标签：linux, debugging, gdb, kernel, breakpoints

我正在调试我的 linux 内核模块。它会导致死锁，我正试图弄清楚如何。我正在使用`vmware`+ `gdb`。这个想法是挂钩函数并将回溯记录到文件中。我正在尝试以下操作：

```
(gdb) br _raw_spin_lock
Breakpoint 5 at 0xffffffff815eb700: file kernel/spinlock.c, line 136.
(gdb) commands 5
Type commands for breakpoint(s) 5, one per line.
End with a line saying just "end".
>silent
>bt
>continue
>end 
```

但`continue`在这里不起作用。如果我`bt`用它代替`echo 1`它。每次调用函数时有没有办法记录信息？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-15T07:03:56.633

您很可能正在点击 gdb 分页提示。 [https://sourceware.org/gdb/onlinedocs/gdb/Screen-Size.html](https://sourceware.org/gdb/onlinedocs/gdb/Screen-Size.html)

在设置断点之前运行它

```
set height 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T04:10:03.930

你不说为什么它不起作用。究竟出了什么问题？

通常这种事情可以正常工作。将“继续”放入断点的命令中是我多年来经常做的事情。它并非没有问题（它会干扰“下一步”），但如果你只是在做日志记录等，它会很好用。

一种猜测是“bt”因错误而失败。这将导致命令中止，并且我相信下级会在断点处停止。那么问题是，发出了什么确切的错误消息？或者，也许你正在打分页。或者也许是我没有想到的其他事情:-)

如果这是一个错误，一种可能的选择可能是限制回溯。

# html - 选择后面的第一个标签使用 xpath 标记

> ID：15684447
> 
> 赞同：1
> 
> 时间：2013-03-28T14:27:43.817
> 
> 标签：html, xpath

我有如下给出的 HTML：

```
<root>
 <Customer cid= "C1" name="Janine" city="Issaquah">
  <input name="Client.ClaimsAdjudicationPendReason" />
  <a onclick="javascript:pendReasonLookup('MFM_Pend Reason', 'PendReason','txtClaimsAdjudicationPendReason','','')>
            <img title="Lookup" class="imgSearchIcon" alt="Lookup" src="/F005web/images/search.gif"/>

<input name="Client.ClaimsAdjudication" />
    <a onclick="javascript:pendReasonLookup('MFM_Pend Reason', 'PendReason','txtClaimsAdjudication','','')>
            <img title="Lookup" class="imgSearchIcon" alt="Lookup" src="/F005web/images/search.gif"/>

  </Customer>  
</root> 
```

使用下面的 xpath，我可以选择“输入”节点，其中

```
name="Client.ClaimsAdjudicationPendReason"

xpath:=//input[@name='Client.ClaimsAdjudicationPendReason'] 
```

但我需要选择`img`节点（就在`a`标签下方）

```
name="Client.ClaimsAdjudicationPendReason" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:44:47.277

原始 html 缺少一些位，请参阅我上面的评论。因此，假设这是预期的：

```
<root>
    <Customer cid="C1" name="Janine" city="Issaquah">
        <input name="Client.ClaimsAdjudicationPendReason" />
        <a onclick="javascript:pendReasonLookup('MFM_Pend Reason', 'PendReason','txtClaimsAdjudicationPendReason','','')" />
        <img title="Lookup" class="imgSearchIcon" alt="Lookup" src="/F005web/images/search.gif" />
        <input name="Client.ClaimsAdjudication" />
        <a onclick="javascript:pendReasonLookup('MFM_Pend Reason', 'PendReason','txtClaimsAdjudication','','')" />
        <img title="Lookup" class="imgSearchIcon" alt="Lookup" src="/F005web/images/search.gif" />
    </Customer>
</root> 
```

下面的 xpath 将选择 “Client.ClaimsAdjudicationPendReason”之后的第一个`img`节点`input``name`

```
//input[@name="Client.ClaimsAdjudicationPendReason"]/following-sibling::img[1] 
```

# java - 登录后使用数据库中的数据填充 selectOneMenu

> ID：15684448
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:46.333
> 
> 标签：java, jsf-2, primefaces, converter

这个项目是用 Primefaces 3.5、JSF 2.0、Oracle 数据库制作的。

首先，用户需要登录。登录后重定向到“议程”。此页面包含一个 selectOneMenu，需要根据已登录的用户填充数据。

登录.xhtml

```
<p:inputText style="text-transform: uppercase" value="#{loginBean.username}"   
                            id="username" required="true" label="username" />  
                   <h:outputLabel for="password" value="Password: " />  
                   <h:inputSecret value="#{loginBean.password}"   
                            id="password" required="true" label="password" /> 
```

我的 LoginBean.java

```
sets and get my userId which i need to identify my user
also handles my loginrequest. 
```

议程.xhtml

```
<p:selectOneMenu value="#{orResourcesBean.orResource}" converter="resourcesConverter" var="orResource"
                         style="width:250px"  filter="true" filterMatchMode="startsWith">
            <f:selectItem itemLabel="Select Resource" itemValue="" />  
            <f:selectItems value="#{orResourcesBean.orResources}" var="orResource" itemLabel="#{orResource.RLname}  #{orResource.RFname}" 
                           itemValue="#{orResource}" />
                <p:column>  
                    #{orResource.RLname}  
                </p:column>
                <p:column>  
                    #{orResource.RFname}  
                </p:column> 
        </p:selectOneMenu> 
```

或Resourcesbean.java

```
@ManagedBean(name="orResourcesBean")
@SessionScoped
public class OrResourcesBean implements Serializable {

private OrResources orResource;
private List<OrResources> orResources;

public void setOrResource(OrResources orResource)
{
    this.orResource = orResource;
}

public OrResources getOrResource() {
    return orResource;
}

public List<OrResources> getOrResources() {
    orResources = ResourcesConverter.resources;
    return orResources;
} 
```

}

ResourcesConverter.java**更新的工作功能**

```
public static List<OrResources> resources;
static OrResourcesDao orResourceDao = new OrResourcesDaoImpl();

public Integer uKey;

{
    LoginBean loginBean = (LoginBean) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("loginBean");
    if (loginBean != null) {
        uKey = loginBean.getUKey();
        if (uKey == null ) {
            resources = null;
        } else {
            resources = orResourceDao.getOrResourcesById(uKey);
        }
    } else {
        resources = null;
    }
}

@Override
public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue) {
    if (submittedValue.trim().equals("")) {
        return null;
    } else {
        try {
            String number = submittedValue;

            for (OrResources orR : resources) {
                if (orR.getRCode().equals(number)) {
                    return orR;
                }
            }
        } catch(NumberFormatException exception) {
            throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Conversion Error", "Not a valid resource"));
        }
    }
    return null;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    if (value == null || value.equals("")) {
        return "";
    } else {
        return String.valueOf(((OrResources) value).getRCode());
    }
} 
```

所以你可以在我的 Agenda.xhtml 中看到，selectOneMenu 充满了所有资源，现在我必须只用已登录的用户可用的资源来填充它。我的问题是我无法获得来自任何地方的参数，因此我可以使我的 init 方法如下：

它不会让我将非静态变量放入静态（初始化）方法中。

但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:26:16.600

我可以从您的问题中得出的结论是您想要尝试登录的用户的 userId，并且根据您想要触发查询的 userId，在检查用户进行身份验证时，您需要从（DAO到控制器）然后在您的模型中设置 userId 然后获取相同的 userId 以进行进一步处理

# javascript - wunderlist.com 上的动画弹出窗口

> ID：15684451
> 
> 赞同：2
> 
> 时间：2013-03-28T14:27:51.270
> 
> 标签：javascript, jquery, html, css, jquery-animate

我遇到了[wunderlist.com](http://www.wunderlist.com)网站，并且爱上了他们在标题“了解更多关于 Wunderlist”下方的图像上的类似缩放的弹出窗口。我很想在我的网站上实现这样的东西。

有人可以告诉我这是怎么做到的吗？我尝试进行逆向工程，但没有运气 :) 我不希望得到完整的代码，但也许有一些关于如何使用 CSS/jQuery 实现这一目标的指南。

或者你知道一些我可以使用的 jQuery 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:40:55.753

尝试查看两个主要方面：打开您选择的检查器工具，看看会发生什么`body.login .feature` ......更具体地说，看看它`transform: scale`和`opacity`:hover 时的值会发生什么。

提示：过渡主要在他们身上。

仍然在您的检查器中，将比例更改为 (1)，将不透明度更改为 1。它如何从一种状态平滑地到达另一种状态由`transition`属性决定。

这并不是要告诉您确切的实现方法，而是要让您上路:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:45:22.720

他们使用所有的 CSS。真的很简单.. 我会为你编写一个完整的 js fiddle 示例，但我没有时间，所以我将列出你需要的不同元素以及它们如何交互。

1.  首先，大图像只是一个带有设置尺寸的背景图像的 div。
2.  圆形图像本身是从一个包含所有圆圈的大图像生成的，这称为精灵。圆圈只是带有背景图像和背景定位的 div，用于在精灵图像的框内定位正确的圆圈。
3.  文本框本身也是带有标准 H2 和 P 文本标签的 div。
4.  一切都是绝对定位，以实现正确的布局。
5.  小圆圈是具有`:hover`绝对定位在其各自目标区域上的状态的 div。
6.  `:hover`通过使用 css3 过渡和 css3 变换来实现动画。

这应该让你开始。

如果您有任何问题，请发表评论。

有时间找点乐子：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/fun-experiment-mh/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/fun-experiment-mh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:47:40.790

其实没那么难。Wunderlist 团队甚至让它变得更容易。他们有一个大的精灵图像，缩放后的图像被裁剪并准备好圆角、边框和阴影。你可以在这里看到它：[https ://wunderlist2.s3.amazonaws.com/179510ff7c929bfcc6e9819f3c2539baca5d3325/images/welcome-screen.png](https://wunderlist2.s3.amazonaws.com/179510ff7c929bfcc6e9819f3c2539baca5d3325/images/welcome-screen.png)

您所做的是在鼠标悬停时显示一个半透明的黑色背景（可以是位置：固定为全宽和全高）。然后你创建一个元素，将精灵作为背景图像（更好的是，在你的 css 中准备好一个类并将其附加到新创建的元素中）。将位置设置为悬停元素的位置。

当添加到 dom 时，为元素的变换比例设置动画（从 scale(.24) 之类的东西开始）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:46:50.310

好吧，因为您尝试了逆向工程。我会试着引导你沿着这条路走。

只有一个具有 id**覆盖**的 div会改变它的位置和内容，悬停在任何具有类**feature**的 div 上。从他们的[应用程序 js](https://wunderlist2.s3.amazonaws.com/96005445b6d83819437e1584ffd81b4e1de63635/app.js)进一步工作，它没有被缩小。

在这种情况下弹出的内容是移动到不同位置的[图像。](https://wunderlist2.s3.amazonaws.com/179510ff7c929bfcc6e9819f3c2539baca5d3325/images/welcome-screen.png)

# android - 触发原始查询时出错

> ID：15684453
> 
> 赞同：0
> 
> 时间：2013-03-28T14:27:56.077
> 
> 标签：android, illegalstateexception

我在此语句中说“IllegalStateException：数据库未打开”时出错：

```
Cursor cursor = database.rawQuery("select rec_field_id, field_value from records_fields_data where cat_field_id = "+get_cat_field_id(category_fields_array_list.get(i))+" AND rec_id = "+rec_id+";", null); 
```

这是我的完整java代码：

```
 package com.walletapp;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class AddRecords extends Activity {

    Spinner category_spinner;
    SQLiteDatabase database;
    ArrayList<String> category_spinner_array_list, category_fields_array_list;
    int cat_id;
    int rec_id;
    String[] tags;
    ArrayList<String> tmp_category_fields_array_list;
    ArrayList<String> tags_list;
    private ArrayList<String> selectedTags;
    ArrayList<EditText> edit_text_array_list;
    EditText et_tags;
    int tag_editText_id;
    String cat_name;
    String record_data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add_records);

        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        Intent intent = getIntent();
        rec_id = intent.getIntExtra("rec_id", 0);
        record_data = intent.getStringExtra("record_data");
        cat_name = intent.getStringExtra("cat_name");

        category_spinner = (Spinner) findViewById(R.id.spinnerAddRecords);
        build_spinner_list();
        database.close();

        if (rec_id != 0) {
            category_spinner.setSelection(category_spinner_array_list
                    .indexOf(cat_name));
            // generateUI(cat_name);
            category_spinner.setEnabled(false);
        }

        category_spinner
                .setOnItemSelectedListener(new OnItemSelectedListener() {

                    @Override
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {

                        generateUI(arg0.getItemAtPosition(arg2) + "");
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {

                    }
                });
    }

    protected void generateUI(String string) {

        Log.i("generate UI string passed is : ", string);

        LinearLayout linearLayout_inner = (LinearLayout) findViewById(R.id.linearLayoutAddRecordsScrollViewInner);

        if (string.equals("Category")) {

            linearLayout_inner.removeAllViews();
            Toast.makeText(getBaseContext(),
                    "Select the category to proceed further.",
                    Toast.LENGTH_SHORT).show();
        } else {

            linearLayout_inner.removeAllViewsInLayout();

            tmp_category_fields_array_list = new ArrayList<String>();

            cat_id = getId(string);
            tmp_category_fields_array_list = get_field_names(cat_id);

            category_fields_array_list = new ArrayList<String>();
            category_fields_array_list = get_sorted_fields(tmp_category_fields_array_list);

            edit_text_array_list = new ArrayList<EditText>();

            if (rec_id == 0) {
                for (String s : category_fields_array_list) {
                    TextView tv = new TextView(this);
                    tv.setText(s);
                    linearLayout_inner.addView(tv);

                    EditText et = new EditText(this);
                    et.setHint(s);
                    et.setTag(new Tag(get_cat_field_id(s), s));
                    edit_text_array_list.add(et);

                    linearLayout_inner.addView(et);

                    if (s.equals("Tags")) {
                        tag_editText_id = et.getId();
                        et_tags = et;
                        et.setFocusable(false);
                        et.setFocusableInTouchMode(false);
                        et.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {

                                showSelectTagsDialog();
                            }
                        });
                    }
                }
            } else {
                Log.i("database is open.", database.isOpen() + "");
                // for(String s : category_fields_array_list)
                for (int i = 0; i < category_fields_array_list.size(); i++) {
                    TextView tv = new TextView(this);
                    tv.setText(category_fields_array_list.get(i));
                    linearLayout_inner.addView(tv);

                    ArrayList<Integer> al_rec_field_id = new ArrayList<Integer>();
                    ArrayList<String> al_field_value = new ArrayList<String>();

                    Cursor cursor = database
                            .rawQuery(
                                    "select rec_field_id, field_value from records_fields_data where cat_field_id = "
                                            + get_cat_field_id(category_fields_array_list
                                                    .get(i))
                                            + " AND rec_id = "
                                            + rec_id + ";", null);
                    while (cursor.moveToNext()) {
                        al_rec_field_id.add(cursor.getInt(0));
                        al_field_value.add(cursor.getString(1));
                    }
                    cursor.close();

                    // ----------------------------------------------------------------------------------------------

                    EditText et = new EditText(this);
                    // et.setHint(category_fields_array_list.get(i));
                    et.setText(al_field_value.get(i));
                    // Tag(int tmp_rec_field_id, int tmp_rec_id, int
                    // tmp_cat_field_id)
                    et.setTag(new Tag(al_rec_field_id.get(i), rec_id,
                            get_cat_field_id(category_fields_array_list.get(i))));
                    edit_text_array_list.add(et);

                    linearLayout_inner.addView(et);

                    if (category_fields_array_list.get(i).equals("Tags")) {
                        tag_editText_id = et.getId();
                        et_tags = et;
                        et.setFocusable(false);
                        et.setFocusableInTouchMode(false);
                        et.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {

                                showSelectTagsDialog();
                            }
                        });
                    }
                }
            }

            Button btn = new Button(this);
            btn.setText("Save");
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    loadDatabase();
                    ContentValues values = new ContentValues();
                    String currentDate = new SimpleDateFormat("yyyy/MM/dd")
                            .format(Calendar.getInstance().getTime());
                    Tag tag = null;
                    int rec_id = 0;

                    for (int i = 0; i < edit_text_array_list.size(); i++) {
                        if (i == 0) {
                            // --------------first insert into records_data
                            // table------------

                            values.put("cat_id", cat_id);
                            values.put("tag_id", "0");
                            values.put("is_favourite", "0");
                            values.put("rec_name", edit_text_array_list.get(i)
                                    .getText() + "");
                            values.put("is_delete", "0");
                            values.put("create_date", currentDate);
                            values.put("update_date", "0");

                            database.insert("records_data", null, values);
                            values.clear();

                            // -------------then fetch the rec_id for previously
                            // entered record----------

                            Cursor cursor = database
                                    .query("records_data",
                                            new String[] { "rec_id" },
                                            "rec_name=?",
                                            new String[] { edit_text_array_list
                                                    .get(i).getText() + "" },
                                            null, null, null);
                            while (cursor.moveToNext())
                                rec_id = cursor.getInt(0);
                            cursor.close();

                            // -------------use this rec_id for inserting record
                            // into records_fields_data------------

                            values.put("rec_id", rec_id);

                            // ---------get cat_field_id----------

                            tag = (Tag) edit_text_array_list.get(i).getTag();

                            values.put("cat_field_id", tag.get_cat_field_id());
                            values.put("field_value",
                                    edit_text_array_list.get(i).getText() + "");
                            values.put("is_delete", "0");
                            values.put("create_date", currentDate);
                            values.put("update_date", "0");

                            database.insert("records_fields_data", null, values);
                            values.clear();
                        } else if (i < edit_text_array_list.size() - 1) {

                            values.put("rec_id", rec_id);
                            tag = (Tag) edit_text_array_list.get(i).getTag();

                            values.put("cat_field_id", tag.get_cat_field_id());
                            values.put("field_value",
                                    edit_text_array_list.get(i).getText() + "");
                            values.put("is_delete", "0");
                            values.put("create_date", currentDate);
                            values.put("update_date", "0");

                            database.insert("records_fields_data", null, values);
                            values.clear();
                        } else {
                            for (String s : selectedTags) {
                                int tag_id = get_tag_id(s);

                                values.put("rec_id", rec_id);
                                values.put("tag_id", tag_id);

                                database.insert("record_tag_relation", null,
                                        values);
                                values.clear();
                            }
                        }
                    }

                    if (database.isOpen())
                        database.close();

                    finish();
                    startActivity(new Intent(AddRecords.this, AllRecords.class));
                }
            });
            linearLayout_inner.addView(btn);
        }
    }

    protected int get_tag_id(String s) {

        int tag_id = 0;
        Cursor cursor = database.query("tags", new String[] { "tag_id" },
                "tag_name=?", new String[] { s }, null, null, null);
        while (cursor.moveToNext()) {
            tag_id = cursor.getInt(0);
        }
        return tag_id;
    }

    protected void showSelectTagsDialog() {

        build_tags_list();
        selectedTags = new ArrayList<String>();

        boolean[] checkedTags = new boolean[tags.length];
        int count = tags.length;

        for (int i = 0; i < count; i++)
            checkedTags[i] = selectedTags.contains(tags[i]);

        DialogInterface.OnMultiChoiceClickListener tagsDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which,
                    boolean isChecked) {
                if (isChecked)
                    selectedTags.add(tags[which]);
                else
                    selectedTags.remove(tags[which]);

                onChangeSelectedTags();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Select Tag(s)");
        builder.setMultiChoiceItems(tags, checkedTags, tagsDialogListener);
        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.dismiss();
            }
        });

        AlertDialog dialog = builder.create();
        dialog.show();
    }

    protected void onChangeSelectedTags() {

        StringBuilder stringBuilder = new StringBuilder();

        int count = 0;
        for (CharSequence tag : selectedTags) {
            count = count + 1;
            stringBuilder.append(tag);
            if (count < selectedTags.size())
                stringBuilder.append(",");
        }

        for (EditText e : edit_text_array_list) {

            if (e == et_tags) {
                e.setText(stringBuilder.toString());
                break;
            }
        }
    }

    private void build_tags_list() {

        loadDatabase();

        tags_list = new ArrayList<String>();
        Cursor cursor = database.query("tags", new String[] { "tag_name" },
                null, null, null, null, null);
        while (cursor.moveToNext())
            tags_list.add(cursor.getString(0));
        cursor.close();
        database.close();

        tags = tags_list.toArray(new String[tags_list.size()]);
    }

    private int get_cat_field_id(String s) {

        loadDatabase();

        int tmp_cat_field_id = 0;
        Cursor cursor = database.query("category_fields",
                new String[] { "cat_field_id" }, "field_name=?",
                new String[] { s }, null, null, null);
        while (cursor.moveToNext())
            tmp_cat_field_id = cursor.getInt(0);
        cursor.close();
        database.close();

        return tmp_cat_field_id;
    }

    private ArrayList<String> get_sorted_fields(
            ArrayList<String> tmp_category_fields_array_list2) {

        int count = 0;
        ArrayList<String> al_tmp = new ArrayList<String>();
        for (String s : tmp_category_fields_array_list2) {
            if (s.equals("Description")) {
                if (al_tmp.contains(s)) {
                    // ----do nothing
                } else {
                    al_tmp.add(s);
                }
            } else if (s.equals("Notes")) {
                continue;
            } else if (s.equals("Tags")) {
                continue;
            } else {
                if (al_tmp.contains(s)) {
                    // ----do nothing
                } else {
                    al_tmp.add(s);
                }
            }
            count++;
            if (count == tmp_category_fields_array_list.size() - 2) {
                al_tmp.add("Notes");
                al_tmp.add("Tags");
            }
        }
        return al_tmp;
    }

    private ArrayList<String> get_field_names(int cat_id) {

        loadDatabase();

        ArrayList<String> tmp_cat_field_array_list = new ArrayList<String>();

        Cursor cursor = database.query("category_fields",
                new String[] { "field_name" }, "cat_id=?",
                new String[] { cat_id + "" }, null, null, null);
        while (cursor.moveToNext())
            tmp_cat_field_array_list.add(cursor.getString(0));
        cursor.close();

        return tmp_cat_field_array_list;
    }

    protected int getId(String string) {

        loadDatabase();

        int tmp_cat_id = 0;
        Cursor cursor = database.query("category", new String[] { "cat_id" },
                "cat_description=?", new String[] { string }, null, null, null);
        while (cursor.moveToNext())
            tmp_cat_id = cursor.getInt(0);
        cursor.close();
        database.close();

        return tmp_cat_id;
    }

    private void build_spinner_list() {

        loadDatabase();

        category_spinner_array_list = new ArrayList<String>();
        category_spinner_array_list.add("Category");
        Cursor cursor = database.query("category",
                new String[] { "cat_description" }, null, null, null, null,
                null);
        while (cursor.moveToNext())
            category_spinner_array_list.add(cursor.getString(0));
        cursor.close();
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,
                category_spinner_array_list);
        dataAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        category_spinner.setAdapter(dataAdapter);
    }

    private void loadDatabase() {

        database = openOrCreateDatabase("WalletAppDatabase.db",
                SQLiteDatabase.OPEN_READWRITE, null);
    }

    class Tag {
        int cat_field_id;
        String cat_field_name;
        int rec_field_id;
        int rec_id;

        Tag(int id, String name) {
            cat_field_id = id;
            cat_field_name = name;
        }

        Tag(int tmp_rec_field_id, int tmp_rec_id, int tmp_cat_field_id) {
            cat_field_id = tmp_cat_field_id;
            rec_id = tmp_rec_id;
            rec_field_id = tmp_rec_field_id;
        }

        int get_cat_field_id() {
            return cat_field_id;
        }

        String get_cat_field_name() {
            return cat_field_name;
        }

        int get_rec_field_id() {
            return rec_field_id;
        }

        int get_rec_id() {
            return rec_id;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

            if (database.isOpen())
                database.close();
            finish();

            if (rec_id == 0)
                startActivity(new Intent(AddRecords.this, AllRecords.class));
            else
                startActivity(new Intent(AddRecords.this,
                        RecordsDetailedView.class));
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

这是我的 logcat 输出：

```
03-28 19:52:09.060: W/KeyCharacterMap(19142): No keyboard for id 0
03-28 19:52:09.070: W/KeyCharacterMap(19142): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
03-28 19:52:10.480: D/dalvikvm(19142): DexOpt: --- BEGIN 'ads34104.jar' (bootstrap=0) ---
03-28 19:52:10.650: D/dalvikvm(19142): DexOpt: --- END 'ads34104.jar' (success) ---
03-28 19:52:10.650: D/dalvikvm(19142): DEX prep '/data/data/com.walletapp/cache/ads34104.jar': unzip in 1ms, rewrite 167ms
03-28 19:52:10.770: D/dalvikvm(19142): GC_FOR_MALLOC freed 4534 objects / 295152 bytes in 86ms
03-28 19:52:11.140: E/ActivityThread(19142): Failed to find provider info for com.google.plus.platform
03-28 19:52:11.220: W/Ads(19142): loadAd called while the ad is already loading, so aborting.
03-28 19:52:11.350: I/Ads(19142): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":0,"session_id":"10699442437020247494","seq_num":"1","slotname":"a1512f50d8c3692","u_w":320,"msid":"com.walletapp","cap":"m,a","adtest":"on","js":"afma-sdk-a-v6.3.0","bas_off":0,"net":"ed","app_name":"1.android.com.walletapp","hl":"en","gnt":3,"carrier":"310260","u_audio":4,"kw":[],"u_sd":1,"simulator":1,"ms":"gHmei5U7VoADe6IEmAL5vLv6CPgwrxTqIxD3RsiiiukAljgNpKCC5wdhfTaJDFudJqp3jlSMt7IQh69rq2tF4dF7mb6cGUjuVtaNrXWv8IlY0shz8dI-iJtcdL05kuErjnIEkpkaKeilFUqY5qSSnF6siTb2kesTfzUM1VS76XkV7IE1q6yulBNFiXmECeZh349c0TjGh_3JdavLTR8MNSo8_c54G3_YkWKGEfhi3Q_lC4lkKWez-_l5_1moHM1MDDMxri5-2E348uKO75YfPB7CvBvFURAd7hD9ijU3Zq5G5dc72VPnnYdq5q819tb0NauVIQ450JDUN5mcbKGHAQ","isu":"B3EEABB8EE11C2BE770B684D95219ECB","format":"320x50_mb","oar":0,"ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"u_h":480,"pt":1,"bas_on":0,"ptime":0});</script></head><body></body></html>
03-28 19:52:11.960: D/webviewglue(19142): nativeDestroy view: 0x293c08
03-28 19:52:11.970: D/dalvikvm(19142): GC_FOR_MALLOC freed 4152 objects / 371416 bytes in 218ms
03-28 19:52:15.091: W/webcore(19142): Can't get the viewWidth after the first layout
03-28 19:52:15.300: I/Ads(19142): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=0&session_id=10699442437020247494&seq_num=1&u_w=320&msid=com.walletapp&cap=m%2Ca&adtest=on&js=afma-sdk-a-v6.3.0&bas_off=0&net=ed&app_name=1.android.com.walletapp&hl=en&gnt=3&carrier=310260&u_audio=4&kw&u_sd=1&ms=gHmei5U7VoADe6IEmAL5vLv6CPgwrxTqIxD3RsiiiukAljgNpKCC5wdhfTaJDFudJqp3jlSMt7IQh69rq2tF4dF7mb6cGUjuVtaNrXWv8IlY0shz8dI-iJtcdL05kuErjnIEkpkaKeilFUqY5qSSnF6siTb2kesTfzUM1VS76XkV7IE1q6yulBNFiXmECeZh349c0TjGh_3JdavLTR8MNSo8_c54G3_YkWKGEfhi3Q_lC4lkKWez-_l5_1moHM1MDDMxri5-2E348uKO75YfPB7CvBvFURAd7hD9ijU3Zq5G5dc72VPnnYdq5q819tb0NauVIQ450JDUN5mcbKGHAQ&isu=B3EEABB8EE11C2BE770B684D95219ECB&format=320x50_mb&oar=0&u_h=480&bas_on=0&ptime=0&u_so=p&output=html&region=mobile_app&u_tz=330&client_sdk=1&ex=1&slotname=a14e8f77524dde8&kw_type=broad&gsb=3g&caps=interactiveVideo_th_autoplay_mediation_sdkAdmobApiForAds_di&jsv=46" type: "admob" afmaNotifyDt: "null" activationOverlayUrl: "null" useWebViewLoadUrl: "false">
03-28 19:52:15.300: I/Ads(19142): Request scenario: Online server request.
03-28 19:52:16.201: I/generate UI string passed is :(19142): web mail
03-28 19:52:16.300: I/database is open.(19142): true
03-28 19:52:16.390: D/AndroidRuntime(19142): Shutting down VM
03-28 19:52:16.390: W/dalvikvm(19142): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-28 19:52:16.480: D/dalvikvm(19142): GC_FOR_MALLOC freed 4094 objects / 277504 bytes in 77ms
03-28 19:52:16.491: W/SQLiteCompiledSql(19142): Releasing statement in a finalizer. Please ensure that you explicitly call close() on your cursor: select rec_field_id, field_value from records_fields_data where cat_field_id = 8 AND rec_id = 1;
03-28 19:52:16.491: W/SQLiteCompiledSql(19142): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:62)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1315)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at com.walletapp.AddRecords.generateUI(AddRecords.java:158)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at com.walletapp.AddRecords$1.onItemSelected(AddRecords.java:77)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView.access$200(AdapterView.java:42)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.os.Handler.handleCallback(Handler.java:587)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.os.Looper.loop(Looper.java:123)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at java.lang.reflect.Method.invoke(Method.java:521)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-28 19:52:16.491: W/SQLiteCompiledSql(19142):     at dalvik.system.NativeStart.main(Native Method)
03-28 19:52:16.500: E/AndroidRuntime(19142): FATAL EXCEPTION: main
03-28 19:52:16.500: E/AndroidRuntime(19142): java.lang.IllegalStateException: database not open
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1333)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1315)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at com.walletapp.AddRecords.generateUI(AddRecords.java:158)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at com.walletapp.AddRecords$1.onItemSelected(AddRecords.java:77)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.widget.AdapterView.access$200(AdapterView.java:42)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.os.Handler.handleCallback(Handler.java:587)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.os.Looper.loop(Looper.java:123)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at android.app.ActivityThread.main(ActivityThread.java:4627)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at java.lang.reflect.Method.invoke(Method.java:521)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-28 19:52:16.500: E/AndroidRuntime(19142):    at dalvik.system.NativeStart.main(Native Method)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142): Releasing statement in a finalizer. Please ensure that you explicitly call close() on your cursor: SELECT field_name FROM category_fields WHERE cat_id=?
03-28 19:52:16.510: W/SQLiteCompiledSql(19142): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:62)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at com.walletapp.AddRecords.get_field_names(AddRecords.java:427)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at com.walletapp.AddRecords.generateUI(AddRecords.java:107)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at com.walletapp.AddRecords$1.onItemSelected(AddRecords.java:77)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView.access$200(AdapterView.java:42)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.os.Handler.handleCallback(Handler.java:587)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.os.Looper.loop(Looper.java:123)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at java.lang.reflect.Method.invoke(Method.java:521)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-28 19:52:16.510: W/SQLiteCompiledSql(19142):     at dalvik.system.NativeStart.main(Native Method)
03-28 19:52:16.550: 
```

但是我在这个语句之前记录了数据库状态，它表明数据库是打开的。谁能帮我这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:44:46.730

在`get_tag_id(String s)`你忘记打电话`cursor.close()`。这可能无法解决整个问题，但它可能是其中的一部分。

# spotify - Spotify API 1.x 获取用户会话

> ID：15684455
> 
> 赞同：1
> 
> 时间：2013-03-28T14:28:05.450
> 
> 标签：spotify

尝试 Spotify API 1.x。我的清单

```
"Dependencies": {
      "api": "1.20.1",
      "views": "1.24.1"
  } 
```

使用新的 spotify API 获取当前会话时遇到问题。[会议文件](http://developer.spotify.com/technologies/apps/docs/preview/api/api-models-session.html)

过了一会儿，我得到了用户信息：

```
require(['$api/models','$api/models#User','$api/models#Session'], function(models) {
    var user = models.User.fromURI('spotify:user:@');
    user.load('username', 'name').done(function(u) {
        userUid = u.identifier;
    });
}); 
```

但是会话没有加载方法（得到抛出错误），在查看模型时。会话我看不到任何值？？？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T21:28:36.713

我发现 Spotify 文档对 Sessions 有点误导。我通过反复试验和谷歌搜索而不是从文档中发现了很多东西。

就像@Backer 所说，将 API 版本更改为 1.3.0（或更高版本，如果可用）。*请注意，您必须重新启动 Spotify 才能使其生效*。

然后你可以像这样访问 Session 对象（这里，“session”*必须*是小写的）：

```
models.session.load('product','connection','device','user').done(function(s){
    console.log('sess:',s)
}); 
```

User 对象将是其中的一部分，但除非您加载它们，否则它不会填充属性。以下是从 Session 和 User 检索属性子集的示例：

```
require([
'$api/models','$api/models#Session'
], function(models) {
app.user = {};
    models.session.load('product','connection','device','user').done(function(sess){
       sess.user.load('name', 'username', 'subscribed').done(function(user){
           app.user.name = user.name; // string
           app.user.username = user.username; // string
           app.user.subscribed = user.subscribed; // boolean
       });
       app.user.connection = sess.connection; // string
       app.user.country = sess.country; // string ISO-2
       app.user.device = sess.device; // string
       app.user.language = sess.language; // string ISO-2
       app.user.product = sess.product; // string

    });
}); 
```

整个 Session 对象：

```
Session
_done: 65535
_listening: true
_ob: Object
_obcount: 1
_requestArgs: Array[0]
_requestName: "session_event_wait"
capabilities: Object
connecting: false
connection: "wlan"
country: "SE"
developer: true
device: "desktop"
incognito: false
language: "en"
online: true
product: "open"
resolution: 1
streaming: "enabled"
testGroup: 000
user: User
    _done: 255
    currentUser: true
    identifier: "longcodehere"
    image: "http://profile-images.scdn.co/artists/default/anotherlongcodehere"
    images: Array[2]
    name: "My Name"
    subscribed: false
    uri: "spotify:user:@"
    username: "myusername"
    __proto__: c
    __proto__: c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:04:12.557

我将`manifest.json`API 版本更改为：

```
"api": "1.3.0" 
```

现在我可以从会话中获取信息，例如我的国家：

```
var userCountry = models.session.country; 
```

# java - Java - 位级的字节数组算术？

> ID：15684461
> 
> 赞同：0
> 
> 时间：2013-03-28T14:28:20.667
> 
> 标签：java, math, bytearray, bits

我正在使用字节数组（大小为 2 或 4）来模拟`short`和`int`数据类型的效果。主要思想是拥有一个同时支持`char`和`int`类型的数据类型，但是我真的很难以这种方式模拟算术运算，因为我必须在位级别进行运算。对于那些不遵守的人：

123的`int`表示不等于 {0,1,2,3} 的 byte[]，因为它们的位表示不同（123 表示是`00000000000000000000000001111011`，而 {0,1,2,3} 的表示`00000000000000010000001000000011`在我的系统上。

所以“ `int`of 123”实际上等同于“ `byte[]`of {0,0,0,123}”。当值跨越几个字节并且我尝试从这些字节数组中减去或减少时，就会出现问题，因为那时你必须与几个不同的字节进行交互，而我的数学并不那么清晰。

欢迎任何伪代码或 java 库建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:36:03.183

除非您*真的*想知道从一个字节到下一个字节传输的位是什么，否则我建议*不*要这样做！如果只是简单的数学运算，则将数组转换为*实数* `short`和`int`类型，进行数学运算，然后再次将它们转换回来。

如果您*必须*这样做，请考虑以下事项：

成像您正在添加两个数组`short`中的变量`byte`。

您遇到的第一个问题是所有 Java 整数类型都是有*符号*的。

第二个是从最低有效字节到最高有效字节的“进位”最好使用比 a*更长*`byte`的类型，因为否则您无法检测到溢出。

即如果你添加两个 8 位值，进位将在第 8 位。但是 a`byte`只有 bits `0..7`，所以要计算第 8 位，你必须将你的字节提升到下一个适当的更大类型，做加法操作，然后弄清楚如果它导致进位，然后在添加 MSB 时处理。这不值得。

顺便说一句，很多年前，当我写一个 MC6809 CPU 仿真器时，我确实不得不做这种位操作。当硬件 ALU“免费”生成相同的位时，必须对相同的操作数执行多个操作，以便能够弄清楚对 CPU 的各种状态位的影响。

例如，我添加两个 8 位寄存器的 (C++) 代码如下所示：

```
void mc6809::help_adc(Byte& x)
{
    Byte    m = fetch_operand();

    {
        Byte    t = (x & 0x0f) + (m & 0x0f) + cc.bit.c;
        cc.bit.h = btst(t, 4);          // Half carry
    }

    {
        Byte    t = (x & 0x7f) + (m & 0x7f) + cc.bit.c;
        cc.bit.v = btst(t, 7);          // Bit 7 carry in
    }

    {
        Word    t = x + m + cc.bit.c;
        cc.bit.c = btst(t, 8);          // Bit 7 carry out
        x = t & 0xff;
    }

    cc.bit.v ^= cc.bit.c;
    cc.bit.n = btst(x, 7);
    cc.bit.z = !x;
} 
```

这需要对操作数的不同变体进行*三个*`h`不同的加法，以提取,`v`和`c`标志。

# php - WHERE子句MySQL中的PHP字符串变量

> ID：15684465
> 
> 赞同：10
> 
> 时间：2013-03-28T14:28:35.777
> 
> 标签：php, mysql, sql, select

我对这个简单的 sql 查询有疑问：

```
<?php 
require_once('../../Connections/tohoshows.php'); 

$show ='gothaf';

mysql_select_db($database_tohoshows, $tohoshows);
$query_getShows = "SELECT * FROM toho_shows WHERE toho_shows.show =' ". $show. " '";
$getShows = mysql_query($query_getShows, $tohoshows) or die(mysql_error());
$row_getShows = mysql_fetch_assoc($getShows);
$totalRows_getShows = mysql_num_rows($getShows);

mysql_free_result($getShows);
?> 
```

当我像这样在 WHERE 子句中直接使用字符串时

```
 $query_getShows = "SELECT * FROM toho_shows WHERE toho_shows.show ='gothaf'"; 
```

我得到一个结果。当我改用该变量时，我没有得到任何数据！我是新手，我无法弄清楚我做错了什么。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T14:30:13.880

你没有约会，因为你在引号之间有多余的空间，

```
$query_getShows = "SELECT * FROM toho_shows WHERE toho_shows.show =' ". $show. " '";
                                                                    ^ HERE      ^ 
```

然后将其解析为

```
SELECT * FROM toho_shows WHERE toho_shows.show =' gothaf ' 
```

* * *

删除它，它会工作

```
$query_getShows = "SELECT * FROM toho_shows WHERE toho_shows.show ='". $show. "'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# java - 如何从 Java 打开文件？（具体来说是一个.bat文件）

> ID：15684466
> 
> 赞同：0
> 
> 时间：2013-03-28T14:28:36.080
> 
> 标签：java, eclipse, file

这是我尝试过的：

```
import java.awt.Desktop;

public class File {
    static java.io.File myFile = new java.io.File("C:/Users/me/Desktop/file.bat");
    public void hello(){
        Desktop.open(myFile);
    }
} 
```

我不断收到错误：

> 不能对非静态方法进行静态引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:34:37.040

请执行下列操作

```
public void hello() {
    if (Desktop.isDesktopSupported()) {
        Desktop desktop = Desktop.getDesktop();
        desktop.open(myFile);
    }
} 
```

由于该方法`open()`不是静态的，因此您不能在`Desktop`like上静态调用它`Desktop.open()`。你必须在一个实例上调用它，你可以使用`Desktop.getDesktop()`它是静态的。

该[`open(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)方法本身将启动与文件扩展名关联的应用程序，它可能不会像您期望的那样运行文件`.bat`。

# javascript - Opera 浏览器上的 Javascript 错误“无法将 m 转换为对象”

> ID：15684467
> 
> 赞同：0
> 
> 时间：2013-03-28T14:28:37.733
> 
> 标签：javascript, html, facebook, web, mootools

我正在我的网站上工作并在 localhost WAMP 服务器上对其进行测试。我在我的主页上包含了一个 javascript，用于显示滑动的 facebook likebox（使用 mootools 框架）。javascript 在 Chrome、Firefox、IE9 上运行良好。但是，我在 Opera 上看不到幻灯片框。

添加我的 javascript 文件夹（首选项 -> 内容 -> Javascript 选项）后，我尝试调试错误，但出现以下错误。（一旦我将本地驱动器中的 javascript 文件包含到 Opera 内容扩展中，我就可以看到滑动的 facebook likebox，但我仍然无法找出问题所在。）

```
Uncaught exception: TypeError: Cannot convert 'm' to object
Error thrown at line 1, column 47082 in <anonymous function: bottom>(n, m) in http://ajax.googleapis.com/ajax/libs/mootools/1.2.5/mootools-yui-compressed.js:
    m.appendChild(n);
called from line 1, column 51362 in <anonymous function: inject>(n, m) in http://ajax.googleapis.com/ajax/libs/mootools/1.2.5/mootools-yui-compressed.js:
    a[m||"bottom"](this,document.id(n,true));
called from line 19, column 1 in <anonymous function: FBSideLike.init>() in http://localhost/Demola_Template/media/js/fb-sidelike.js:
    var box = new Element('div', { 
```

这是我的 javascript 看起来和调用 mootools-yui-compressed.js

```
var FBSideLike = {};

FBSideLike.init = function() {

    var scr = $$('script[fbpage]');

    if (scr.length == 1) {
        scr = scr[0];
        var fbpage = scr.get('fbpage');
    } else {
        return;
    }

    var border = scr.get('bordercolor') || '3b5997';
    var image  = scr.get('image') || 'plain';
    var base   = scr.get('src').replace('fb-sidelike.js', '');

    var box = new Element('div', {
        id: 'fb-side-like',
        styles: {
            backgroundImage: 'url(' + base + 'fb-sidebar-' + image + '.png)',
            backgroundRepeat: 'no-repeat',
            position: 'fixed',
            top: '12%',
            right: -292,
            width: 322,
            height: 200
        }
    }).inject(document.body);

    var like = new Element('div', {
        styles: {
            position: 'absolute',
            left: 30,
            width: 292,
            height: 480,
            background: '#FFF'
        }
    }).inject(box);

    var toggle = function(dir) {
        box.tween('right', dir < 0 ? -1 : -292);
    }

    like.set('html', '<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2F'
                    + fbpage
                    + '&amp;width=292&amp;height=480&amp;colorscheme=light&amp;show_faces=true&amp;border_color=grey'
                    + border
                    + '&amp;stream=true&amp;header=false&amp;appId=************"'
                    + 'scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:480px;" allowTransparency="true"></iframe>');

    box.set('tween', {
        duration: 550,
        transition: Fx.Transitions.Pow.easeInOut
    }).addEvents({
        'mouseenter': function() { toggle(-1); },
        'mouseleave': function() { toggle(1); }
    });
}

if (typeof(MooTools) == 'undefined') {
    (function() {
        var mt = document.createElement("script");
        mt.type = "text/javascript";
        mt.src = ("https:" == document.location.protocol ? "https" : "http") + "://ajax.googleapis.com/ajax/libs/mootools/1.2.5/mootools-yui-compressed.js";
        mt.async = true;
        mt.onload = FBSideLike.init;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(mt, s);
    })();
} else {
    window.addEvent('load', FBSideLike.init);
} 
```

在我的主页上，我包含了 javascript

```
<script type="text/javascript" src="media/js/fb-sidelike.js" fbpage='*******'></script> 
```

查看错误消息，看起来问题出在 mootools-yui-compressed.js javascript 文件中。但是，我无法弄清楚出了什么问题，因为它在所有其他浏览器上都可以正常工作。这是浏览器特定的问题还是我遗漏了什么。

# batch-file - 在目录中批量查找文件夹名称

> ID：15684470
> 
> 赞同：5
> 
> 时间：2013-03-28T14:28:46.167
> 
> 标签：batch-file

我有一个关于批处理文件的问题

所以在这个目录中，假设 C:\temp\ 我有两个项目，一个是文件夹，另一个是名为“list.txt”的文本文件

我如何找到文件夹的名称？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:32:26.747

如果您只想列出当前目录的子目录：

```
dir /ad /b 
```

如果您在另一个目录中，您可以这样做：

```
dir c:\temp /ad /b 
```

`/ad`表示列出所有具有“目录”属性的项目，并且`/b`是裸格式

**更新：**

就像比尔在下面评论的那样，您可以遍历 dir cmd 的输出并设置环境变量。这里的陷阱是，如果有多个子文件夹，您将不知道哪个将是“最后一个”。这是一个按名称 (/on) 对目录进行排序并将环境变量 MY_ENV_VAR 设置为最后一个子文件夹的名称的示例：

```
for /f "delims=" %%a in ('dir "c:\temp" /on /ad /b') do @set MY_ENV_VAR=%%a 
```

顺便说一句，如果您要进行更多的脚本编程，您可能需要花一些时间在一些 PowerShell 基础知识上，这会给您更多的编程控制。

```
Get-ChildItem | where {$_.PSIsContainer} 
```

一段时间后，我发现批处理脚本令人沮丧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:33:30.180

试试这个：

```
for /d /r "C:\temp" %%i in (*.*) do echo %%~i 
```

# java - 如何从 JList 中打印出字符串值

> ID：15684471
> 
> 赞同：0
> 
> 时间：2013-03-28T14:28:51.073
> 
> 标签：java, jlist, selectedvalue, listselectionlistener

我有一个 JList，它是一个名称列表，我想打印出我从列表中选择的任何项目。这听起来很简单，但我不知道该怎么做。这是我的代码：

```
final DefaultListModel<String> myNamesList = new DefaultListModel<String>();
final JList list = new JList(myNamesList);

final Object chosenName = list.getSelectedValue();

list.addListSelectionListener(new ListSelectionListener(){

    public void valueChanged(ListSelectionEvent e) {        
    System.out.println(chosenName);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:30:30.023

确保该 `Object chosenName = list.getSelectedValue();` 行在`valueChanged()`方法内。否则，它将始终是初始选定值。

# python - Python - 在文本文件中搜索字符串

> ID：15684473
> 
> 赞同：1
> 
> 时间：2013-03-28T14:28:53.517
> 
> 标签：python, string, text

我有以下功能，它为 3 个人获取 3 条信息（姓名、年龄、家乡）并将其保存在 txt 文件中。

```
def peopleInfo():
    txtFile = open("info.txt", "w")
    i = 0
    for i in range(0, 3):
        name = input("Enter name ")
        age = input("Enter age ")
        hometown = input("Enter hometown ")
        txtFile.write(name + "\n" + age + "\n" + hometown + "\n")
    txtFile.close() 
```

我现在正在尝试创建一个函数，如果他们的家乡是“牛津”，它将读取文本文件并打印一个人的名字。到目前为止，我有以下内容只是为了从文件中读取文本，但如果城镇是牛津，我不确定如何跳过一行并打印名称。

```
def splitLine():
    txtFile = open("info.txt", "r")
    for line in txtFile:
        line = line.rstrip("\n")
        print(line) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:51:56.240

我对任何感兴趣的人使用了以下内容：

```
def peopleInfo():
    txtFile = open("info.txt", "w")
    i = 0
    for i in range(0, 3):
        name = input("Enter name ")
        age = input("Enter age ")
        hometown = input("Enter hometown ")
        txtFile.write(name + "\n" + age + "\n" + hometown + "\n")
    txtFile.close()

def splitLine():
    txtFile = open("info.txt", "r")
    lineList = []
    i = 0
    for line in txtFile:
        lineList.append(line.rstrip("\n"))
        if "Oxford" in lineList[i]:
            print(lineList[i - 2])
        i += 1 
```

# linq - LINQ to SQL 延迟执行和实现

> ID：15684481
> 
> 赞同：6
> 
> 时间：2013-03-28T14:29:14.370
> 
> 标签：linq, linq-to-sql

我对此有点陌生。好奇以下情况会发生什么？

```
var q = //MY LINQ TO SQL QUERY.Select(...)
.........
.........
var c = q.Count();
.........
.........
var x = q.Where(....).Select(....);
var y = x.ToList();//or something such that forces materialization
var d = q.Count();//same as c
var e = x.Count();
var f = y.Count(); 
```

sql 语句实际访问数据库多少次？一次在 Count()。再次在哪里（）？还是 Linq 保留了它在 Count() 期间实现的内容？

或者它也取决于 Where(..) 有什么？就像它再次引用数据库与它只是引用作为'q'/或任何其他.net集合等的一部分获得的内容一样？

编辑：

用其他几个场景更新了我的代码。请在下面更正我的答案：

```
q -no db trip
c -yes, but translates to aggregate qry - select Count(*) and not a result set (as per answer below)
x -no db trip. No matter what is written in the Where(..)
y - yes
d - yes - does not *reuse* c
e - yes - select count(*) EVEN THOUGH x already materized during y
f - no db trip 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:55:43.983

当您调用`Count`它时，它不会实现整个数据集。相反，它准备并执行一个查询，如

```
SELECT COUNT(*) FROM ... 
```

用于`ExecuteScalar`得到结果。

当你打电话时`Where`，`Select`它没有实现任何东西（假设`q`是一个`IQueryable`）。相反，它只是准备一个查询，例如

```
SELECT col1, col2, ... FROM ... 
```

但它实际上并没有在那时执行它。它只会在您调用时执行`GetEnumerator`查询`q`。您很少会直接执行此操作，但类似以下的任何操作都会导致您的查询被执行：

```
var arry = q.ToArray();
var list = q.ToList();
foreach(var rec in q) ... 
```

它只会执行*一次*此查询，因此具有多个`foreach`循环不会创建多个数据库查询。当然，如果你创建一个新`IQueryable`的基于`q`（例如`var q2 = q.Where(...)`）它不会被绑定到使用的结果集`q`，所以它必须再次查询数据库。

我在 LINQPad 中测试了您的代码，看来您的所有分析都是正确的。

# android - monodroid 4.6断点未命中

> ID：15684482
> 
> 赞同：1
> 
> 时间：2013-03-28T14:29:14.733
> 
> 标签：android, debugging, for-loop, mono, xamarin.android

我将 Mono for Android 版本 4.6.00049 与 Visual Studio 一起使用。我正在使用 USB 连接的 Google Nexus 7 进行调试。

我能够闯入正在调试的应用程序。安装最新的 Mono for Android 后，调试似乎变得不稳定。

起初我根本无法调试我的应用程序：启动调试器时，应用程序在设备上启动，但 Visual Studio 没有进入调试模式。几秒钟后，应用程序在设备上关闭。

我按照这里关于堆栈溢出的建议关闭了应用程序项目设置的“Mono Android 选项”页面中的“使用快速部署”。

现在 Visual Studio 进入调试模式，并且应用程序不会在设备上中止。**然而，没有一个突破点被击中。**

我在这里阅读了几个关于堆栈溢出的答案，这些答案都与“Mono Android Options”项目属性页面上的各种设置有关。我意识到在尝试重建解决方案时，有几个设置会导致一些尴尬的“包 tv.ouya.console.api 不存在”错误。

请帮忙。谢谢克里斯托夫

# java - 使用整数的 BST 树

> ID：15684483
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:29:25.827
> 
> 标签：java

我必须在 java 中实现一个 BST 树，我正在使用以下代码：

```
 ArrayDeque a = new ArrayDeque();    

    a.add(root); // to add root to queue
    a.add(new Node(null)); // to add newline node 
```

但我收到此错误：类节点中的构造函数节点不能应用于给定类型（因为为空），因为我使用的是整数而不是字符串。有人能帮助我吗。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:04:09.923

您可以使用默认构造函数

```
public Node() {
    // initialize Node with the internal representation
    // of newline node
} 
```

或更改构造函数

```
public Node(int nodeValue) { ... }; 
```

到

```
public Node(Integer nodeValue) { ... }; 
```

然后您将能够将 null 作为参数传递，因为现在 new 是一个 Object 并且可以为 null。

# c# - EF、ASP.NET Web API 和 JSON.NET - 返回的限制层次结构

> ID：15684484
> 
> 赞同：2
> 
> 时间：2013-03-28T14:29:29.113
> 
> 标签：c#, entity-framework, asp.net-web-api, json.net

我正在使用 EF 5 和 ASP.NET Web API 从我的控制器返回 JSON。我的例子是宠物服务。对于这个问题，实体是`Client`、`Pet`和`Veterinarian`。关系是：

> 客户 => 一对多 => 宠物 => 一对一 => 兽医

并且，颠倒层次结构：

> 兽医 => 一对多 => 宠物 => 一对一 => 客户

在我`PetsController`的 中，`GetPets`动作如下所示：

```
var pets= db.Pets
    .Where(p => p.IsActive == true)
    .Include(p => p.Client)
    .Include(p => p.Veterinarian);

return Mapper.Map<IEnumerable<Pet>, IEnumerable<PetDTO>>(pets); // Using Automapper to map to a DTO 
```

生成的 JSON 包含 Pets，每个 Pet 一个 Client，每个 Pet 一个 Veterinarian **，每个 Veterinarian，一个 Pets 集合**。

我理解为什么宠物集合会出现在 JSON 中，但它与控制器操作中的宠物列表无关（至少现在不是）。我正在寻找一种优雅的方式来删除宠物的集合。现在我正在使用感觉像黑客的东西：

```
var pets= db.Pets
    .Where(p => p.IsActive == true)
    .Include(p => p.Client)
    .Include(p => p.Veterinarian);

foreach (Pet pet in pets) {
    pet.Veterinarian.Pets = null; // Remove the Pets collection before serializing
}

return Mapper.Map<IEnumerable<Pet>, IEnumerable<PetDTO>>(pets); // Using Automapper to map 
```

我已经用序列化器和一些`IQuerable`方法（其中许多我不熟悉）尝试了一些东西，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:49:11.597

您可以禁用延迟加载以修剪图形。但这始终不能解决问题。如果您有双向关系（例如 pet <=> Veterinarian），使用 Include 获取关系的一侧也会自动构建另一侧。因此，`pet.Veterinarian.Pets`即使您没有在`Include`.

使用 DTO 是我能想到的最好方法。您可以完全控制对象图。

此外，OData 协议已经通过 $select 和 $expand 定义了这种机制，并为客户端提供控制以指定它需要的对象图的深度和广度。例如，对于您的场景，OData url 看起来像`~/Pets?$expand=Client,Veterinarian`. 您是否考虑过 OData 以满足您的需求？

如果您不想每次都创建 DTO，您可以使用匿名对象即时进行。例如，对于您的场景，您可以这样做，

```
db.Pets.Select(p => new 
{ 
    Id = p.ID, 

    .... other pet properties you want, 

    Veterinarian = new 
    { 
        ID = p.Veterinarian.ID 
        ... other veterinarian properties you want
    },
    Client = 
    {
        ... client properties you need.
    }

}); 
```

这只是将映射移动到 select 子句中。

# mono - C# 的最新 TagLib 端口？

> ID：15684486
> 
> 赞同：1
> 
> 时间：2013-03-28T14:29:35.600
> 
> 标签：mono, taglib, taglib-sharp

有人知道我在哪里可以下载最新 TagLib 版本的 C# 包装器吗？我使用的最新版本来自 Mono 包： [https ://github.com/mono/taglib-sharp](https://github.com/mono/taglib-sharp)

但它不支持某些 WAV 格式的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:26:56.100

看起来你提到的 GitHub 位置是正确的。如果您想要 tarball（即所有源代码），请从[Banshee 位置](http://download.banshee.fm/taglib-sharp/)下载它们。我也同意*Brian Nickel*的观点，github 位置是获取源代码的最新位置。

# wpf - Datagrid行隐藏，在wpf vb.net

> ID：15684488
> 
> 赞同：0
> 
> 时间：2013-03-28T14:29:36.077
> 
> 标签：wpf, vb.net, datagrid, row

问题是我需要根据显示的监视器隐藏 DataGrid 的某些行。

这是我的代码：

```
For Each row As DataRowView In DataGrid1.Items
        cellValue = row.Item("Monitor")
        If cellValue.StartsWith("B") Then
                //the code i need   
        End If
Next 
```

`DataGrid1.Items.Remove()`或`DataGrid1.Items.RemoveAt()`不能使用，因为我的 ItemSource 在被调用时正在使用中。

我更喜欢将其可见性更改为隐藏或高度为 0。

抱歉，如果这个问题的格式不正确或看起来很糟糕，这是我的第一个问题：P（欢迎任何提示）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:13:53.550

这应该适合你：

```
row.Visibility = Windows.Visibility.Collapsed 
```

PS：
在我的范围内，DataGrid 绑定到 a`List(Of String)`所以我必须先得到那一行。因此，在使用时， `DataGrid.Items(i)`您只会得到项目本身，它是一个`String`.

要获得相关信息`DataGridRow`，您必须使用此功能：

```
DataGrid.ItemContainerGenerator.ContainerFromIndex(IndexOfItem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:36:57.800

将我的代码更改为：

```
Dim numOfRows As Integer
Dim listA As New List(Of Integer)
Dim listB As New List(Of Integer)
Dim deleted As Integer = 0

For Each row As DataRowView In DataGrid1.Items
        numOfRows += 1       'Adding up to total number of rows'
        If row.Item("Monitor").ToString.StartsWith("A") Then
            listA.Add(numOfRows - 1)  'Adding rows indexes to a list'
        ElseIf row.Item("Monitor").ToString.StartsWith("B") Then
            listB.Add(numOfRows - 1)  'Adding rows indexes to a list'
        End If
Next 
```

我没有使用的原因`row.Delete()`是如果我在运行中更改其项目源，则 For Each 循环会中断。因此，我正在删除另一个循环上的行（每个监视器一个）：

```
Dim rowA As DataRowView
    For Each litem As Integer In listA
        litem -= deleted 

        'The indexes on the list were added in a sorted order'
        'ex. {4,7,14,28,39} . So if i delete the fourth row'
        'all of the rows that remain will have their index'
        'decreased by one,so by using an integer that represents'
        'the number of the deleted rows, i can always delete the'
        'correct "next" row'

        rowA = DataGrid1.Items.Item(litem)
        rowA.Delete()

        deleted += 1
Next 
```

# javascript - Web SQL 数据库日期时间字段比较

> ID：15684492
> 
> 赞同：0
> 
> 时间：2013-03-28T14:29:50.093
> 
> 标签：javascript, datetime, web-sql

我有一个 web sql 数据库表，其中有两个 DateTime 字段。当我发出以下命令时，我得到 0 行：

```
SELECT * FROM State WHERE LastModified > LastUploaded 
```

但我可以在 Chrome Inspector 的资源选项卡中看到，有一行 LastModified 大于 LastUploaded。

我想我什至不知道我在处理什么。我应该读什么书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:38:21.743

你可以这样做 ：

SELECT * FROM state WHERE UNIX_TIMESTAMP(lastModified) > UNIX_TIMESTAMP(LastUploaded)

最好的祝福 ：）

# javascript - 获取文本框值并放入 HREF

> ID：15684499
> 
> 赞同：1
> 
> 时间：2013-03-28T14:29:55.967
> 
> 标签：javascript, jquery

我敢肯定这可能非常简单，但它就在这里......

```
<input type='textbox' name='qtybox' id='qtybox' style='width:20px;'> <a href=""/Cart.asp?Code=123456&QTY=GET QTYBOX VALUE HERE"" onclick=""somefunction(this, event); return false;"" title=""Add To Cart""><img src=""testbutton.gif"" alt=""Add To Cart"" title=""Add To Cart""/></a> 
```

我试过了

```
<input type='textbox' name='qtybox' id='qtybox' style='width:20px;'> <a href=""/Cart.asp?Code=123456&QTY='+document.getElementById('qtybox').value;'"" onclick=""somefunction(this, event); return false;"" title=""Add To Cart""><img src=""testbutton.gif"" alt=""Add To Cart"" title=""Add To Cart""/></a> 
```

但它失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:38:55.727

除了所有双`"`引号之外，您还尝试在 javascript 中为 href 构建一个字符串，但这种方式不起作用。

最简单的解决方案是将 url-part 添加到您指定为 onclick 处理程序的 somefunction 函数中（无论如何都以 return false 结尾）。

或者，您可以尝试：

```
<input id="qtybox">

<a   href="#" 
    title="Add To Cart" 
  onclick="this.href='/Cart.asp?Code=123456&QTY='   
                      +document.getElementById('qtybox').value;
           somefunction(this, event); return true;">
 <img src="testbutton.gif" alt="Add To Cart" title="Add To Cart" />
</a> 
```

请参阅此小提琴以获取工作示例：http: [//jsfiddle.net/acMrj/](http://jsfiddle.net/acMrj/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:37:43.343

你有没有这样改变并尝试过？？

表达式的问题`document.getElementById('qtybox').value`。我认为它是字符串。

```
 <input type='textbox' name='qtybox' id='qtybox' style='width:20px;'> <a href="/Cart.asp?Code=123456&QTY="document.getElementById('qtybox').value;" onclick=""somefunction(this, event); return false;"" title=""Add To Cart""><img src=""testbutton.gif"" alt=""Add To Cart"" title=""Add To Cart""/></a> 
```

# ffmpeg - ffmpeg 直播覆盖问题，当任何一个流丢失时，其他流被卡住

> ID：15684500
> 
> 赞同：1
> 
> 时间：2013-03-28T14:29:56.583
> 
> 标签：ffmpeg, overlay, rtmp, flash-media-server

**到目前为止，我们已经完成了**

我们有一个视频聊天客户端，它有一组 9 个视频流（用户）和使用 Adob​​e FMS 的 h.264 编解码器。现在，使用 ffmpeg，我们可以使用叠加（视频）和混合（音频）过滤器将这些流组合成一个流。我们能够将单个组合流发送到实时流媒体服务。使用 ffmpeg 的 scale 属性以更大的尺寸显示当前发言者的流。

代码如下：

```
ffmpeg -i "rtmp://localhost/live/mystream" -i "rtmp://localhost/live/mystream2 " -i "rtmp://localhost/live/mystream3 "-filter_complex"nullsrc=size=300x300 [b1];[0:v] setpts=PTS-STARTPTS,scale=100x100 [s1];[1:v] setpts=PTS-STARTPTS,scale=200x200 [s2];[2:v]setpts=PTS-STARTPTS,scale=100x100 [s3];[b1][s1] overlay=shortest=1 [b1+s1];[b1+s1][s2] overlay=shortest=1 [b1+s2];
[b1+s2][s3] overlay=shortest=1:x=100" out.mp4 
```

**以下 2 个主要问题需要帮助。任何帮助，将不胜感激。**

1.  每当当前发言人发生变化时，该用户的流应该以更大的尺寸显示。这可以在不重新启动ffmpeg进程的情况下完成吗？

2.  现在，如果 9 个流之一停止，则 ffmpeg 进程崩溃。

# php - 以正确的 9:16 格式显示 Youtube 视频和缩略图

> ID：15684503
> 
> 赞同：8
> 
> 时间：2013-03-28T14:30:03.780
> 
> 标签：php, jquery, youtube, thumbnails

我可以通过此处描述的链接轻松获取 Youtube 图像缩略图：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

但是所有这些缩略图都是 3:4 格式（或类似的格式），即使视频本身是其他格式。然后在图片的顶部和底部可以看到一些黑色的水平条。

我需要一张没有黑条的 9:16 格式（这是我的视频格式）的图像。这有可能收回吗？

**更新**

尽管 Youtube 页面上的视频上没有黑条，但 Youtube 视频本身的顶部和底部似乎也有黑条。

有什么方法可以简单地以正确的格式显示缩略图和视频？

**更新**

我发现了这个：[删除 youtube 缩略图上的黑色边框 4:3](https://stackoverflow.com/questions/13220715/removing-black-borders-43-on-youtube-thumbnails)

提问者想要移除黑色的顶部和底部条。这里最好的答案是通过手动校正调整高度并“隐藏”黑条。下面的一些评论也表明了这一点。
这是否意味着无法避免？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-24T10:37:19.720

YouTube 提供的图像没有 4:3 比例的黑条。要获得没有黑条的 16:9 视频缩略图，请尝试以下方法之一：

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

第一个`mqdefault`是 320x180 像素的图像。

第二张`maxresdefault`是 1500x900 像素的图像，因此需要调整大小才能用作缩略图。这是一个很好的图像，但它并不总是可用。如果视频质量低（我想不到 720p，不确定），则此“maxresdefault”将不可用。所以永远不要依赖它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T22:41:07.620

[根据 API 文档：](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_media:thumbnail)

> yt:name 属性值为 mqdefault 的标记标识 320x180 (16:9) 缩略图图像。此图像也没有时间戳，并且可能来自视频中的任何点。

所以有一个图像可用于 16:9 格式的每种视频分辨率（至少我已经测试过）。当然，这不是这个星球上最大的图像......

如果尺寸是一个问题，并且您需要更大的东西，那么最好的选择实际上是选择*始终*为 4:3 比例的可用选项之一，并使用 CSS 隐藏多余的选项。[YouTube 本身已经这样做了很长时间](https://groups.google.com/d/msg/youtube-api-gdata/ICRyWebsY7w/q-LnkSzRz18J)。他们现在在其网站上使用多种缩略图大小，包括`mqdefault.jpg`.

当所有尺寸都已知时，从图像中隐藏多余的宽度和/或高度真的很容易。[这是一个使用来自 YouTube 的 4:3 图像的示例](http://cssdesk.com/f7aXD)，其中隐藏了黑条，留下 16:9 的结果。为了您的享受，对 CSS 进行了评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T07:52:42.280

在网上搜索了一段时间以解决此问题后，我一无所获，我想我已经尝试了一切，但没有解决我的问题。然后在我的逻辑驱动下，我只是将嵌入式 youtube 视频的 iframe 包装在一个 div 集溢出：隐藏；到这个 div 并使其高度比 iframe 高度小 2px（在我的视频中，底部有黑色边框）。所以包装器 div 比 iframe 小，并且通过将其定位在视频上，您可以隐藏您不想要的黑色边框。我认为这是迄今为止我尝试过的所有方法中最好的解决方案。

在下面的这个例子中，尝试只嵌入 iframe，你会在底部看到小的黑色边框，当你将 iframe 包裹在 div 中时，边框消失了，因为 div 与 iframe 重叠并且它比视频小，而且它has overflow: hidden 所以所有超出 div 维度的东西都被隐藏了。

```
<div id="video_cont" style="width: 560px;
                            height: 313px;
                            overflow: hidden;">

    <iframe id="the-video" class="extplayer" width="560" height="315" src="https://www.youtube.com/embed/EErx017kDHQ?&amp;autoplay=0&amp;rel=0&amp;fs=0&amp;showinfo=0&amp;controls=0&amp;hd=1&amp;wmode=transparent&amp;version=2;yt:quality=high;"   frameborder="0" allowfullscreen></iframe>

</div> 
```

在我的情况下，边框的高度约为 2px，因此我将包装器 div 的高度缩小了 2px 以隐藏边框，在您的场景中，如果边框位于视频的顶部或两侧和/或具有不同的尺寸，您必须为包装器 div 制作不同的尺寸并将其放置好，以便它与边框所在的视频重叠并且溢出：隐藏；边界是隐藏的。

希望这会有所帮助。

# ruby-on-rails - Rails：在助手中访问模型——对还是错？

> ID：15684504
> 
> 赞同：0
> 
> 时间：2013-03-28T14:30:10.547
> 
> 标签：ruby-on-rails, model, view-helpers

我的同事编写了很多代码，这些代码可以从视图助手访问模型。这是一个好习惯还是坏习惯？

PS 我知道 Stackoverflow 上的某个地方存在类似的问题 - 谷歌找到了它，但链接已经过时了。

# c# - 位图到 int[]

> ID：15684505
> 
> 赞同：2
> 
> 时间：2013-03-28T14:30:13.677
> 
> 标签：c#, microsoft-tag

我正在尝试在 Windows 表单中使用 Microsoft Tag，但在尝试使用`ScanFromFrame`.

我有一个来自 Windows Phone 的示例，用于`TagContext.Current.ScanFromFrame`在相机源中查找标签。我的问题是`ScanFromFrame`需要`ImageToDecode`一个`int[]`. 在 Forms 我有一个`BitMap`，但不知道如何将其转换为`int[]`.

你们有没有人使用过带有位图的 TagContext，或者你知道我应该如何以及是否应该将它转换为 int 数组？

# delphi - DWScript 基类型效率

> ID：15684508
> 
> 赞同：2
> 
> 时间：2013-03-28T14:30:17.087
> 
> 标签：delphi, dwscript

DWScript 中数量有限的基本类型非常方便，但不会增加很多开销。考虑到整数是 Int64，例如，当您使用字节值时，这应该是相当多的开销。DWScript 是否在内部对此进行了优化？如果没有，有没有办法使用语言扩展来添加其他基本类型，例如`Byte`？

如果这会导致类型推断出现问题，如果可以在语言扩展中处理这个问题，那么整数值的推断可以推迟到主`Integer`类型或由扩展处理以选择最小的拟合数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:46:32.037

DWS 使用 Variants 作为存储所有值的内部基本类型。由于 Variant 比 Byte 大得多，因此在脚本中使用 Byte 类型实际上并没有什么好处。

# c# - 获取xml节点值

> ID：15684517
> 
> 赞同：2
> 
> 时间：2013-03-28T14:30:40.457
> 
> 标签：c#, xpath, xml-parsing, xml-serialization, linq-to-xml

下面的 xml 有一个属性 Itemcount( `<rs:data ItemCount="4">`) 。我如何通过代码获得它的价值。xmldocument.childnodes.count 没有给我正确的计数

我需要获取子节点的计数，即 Itemcount

```
 <listitems xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema" xmlns="http://schemas.microsoft.com/sharepoint/soap/">

<rs:data ItemCount="4">

   <z:row ows_Attachments="0" ows_UniqueId="1;#{DF5B35E4-D3EB-4E16-9D6F-23F368CDE05C}"/>

 <z:row ows_Attachments="0" ows_UniqueId="2;#{83803774-A2F6-4265-AD73-E8600ECFCE04}"/>

<z:row ows_Attachments="0"  ows_UniqueId="3;#{8B1C0737-EAA2-4313-BEC3-A5A907341856}"/>

 <z:row ows_Attachments="0"  ows_UniqueId="5;#{65CA20E9-E427-412C-A98B-367DDEBE8911}"/>

</rs:data>
</listitems> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:34:32.850

```
//xmlStr contains your xml as a string
var xml = XDocument.Parse(xmlStr);

XNamespace rs = "urn:schemas-microsoft-com:rowset";

string[] result = xml.Descendants(rs + "data")
                     .Select(node => node.Attribute("ItemCount").Value)
                     .ToArray();

Console.WriteLine(string.Join(Environment.NewLine, result)); 
```

印刷：

```
4 
```

# gwt - GWT 模块可能需要（重新）编译

> ID：15684518
> 
> 赞同：0
> 
> 时间：2013-03-28T14:30:41.677
> 
> 标签：gwt, maven-3

我可以毫无问题地在开发模式下运行我的应用程序。但有时需要在没有 gwt.codesvr=127.0.0.1:9997 的情况下测试应用程序。每次我尝试这个我都会得到上面提到的异常。感谢 Thomas 在这篇文章中的回答：[GWT 模块可能需要（重新）编译 REDUX](https://stackoverflow.com/questions/5719118/gwt-module-may-need-to-be-recompiled-redux)我知道导致问题的原因。我还没有找到解决它的方法。

我正在使用 maven 并使用目标目录来运行应用程序。当我在构建（全新安装）后运行应用程序（gwt：run）时，*.nochache.js 文件被覆盖，导致错误。我有另一个应用程序不会发生这种情况。但我无法弄清楚有什么不同。大多数 pom 的东西看起来都是一样的。有人可以帮我吗？你需要更多信息？

问候，阿恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:16:26.167

请检查您的构建路径是否设置为正确的输出文件夹。

还请编译项目并确保它使用 6 个排列进行编译。

编译器版本也应该兼容。

另请参阅以下链接。 [http://code.google.com/webtoolkit/usingeclipse.html](http://code.google.com/webtoolkit/usingeclipse.html)

# java - 来自两个 Android 活动的数据显示在一个布局上？

> ID：15684519
> 
> 赞同：0
> 
> 时间：2013-03-28T14:30:43.443
> 
> 标签：java, android, android-activity

我对 Android 开发非常陌生，所以希望这是一个容易回答的问题。我做了很多搜索，但找不到答案 - 可能我走错了路。

我有两个类文件，一个是获取电池电量信息（下面的 A 类），另一个使用 TelephonyManager 获取设备 IMEI 并显示它（下面的 B 类）。

我无法弄清楚如何让这两个类的值出现在同一布局上。

这是A类：

```
package com.XXXXXX.XXXXXX;

import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.BatteryManager;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class AboutScreen extends ListActivity {  
/** Called when the activity is first created. */  

private String[] strText = new String[] {"Battery Level", "Voltage", "Status"};  
  private int voltage = 0;  
  private boolean trun = true;  
  private Handler myHandler = new Handler();  
  private Runnable myRun = new Runnable() {  
       public void run() {  
            updateNow();  
       }  
  };  
  // using Thread to keep the process running  
  private Thread myThread = new Thread() {  
       public void run () {  
            do {  
              batteryLevelUpdate();  
              myHandler.post(myRun);  
              try {  
                      Thread.sleep(1000);  
                 } catch (InterruptedException e) {  
                      // TODO Auto-generated catch block  
                      e.printStackTrace();  
                 }                   
            } while (trun);  
       }  
  };  
@Override  
public void onCreate(Bundle savedInstanceState) {  
 super.onCreate(savedInstanceState);  
 Toast.makeText(getApplicationContext(), "email", 2000).show();  
 startMonitor();  
}  
@Override  
public void onDestroy() {  
    trun = false;  
    super.onDestroy();  
}  

private void startMonitor() {  
    myThread.start();  
}  
private void updateNow() {  
    ListView thisListView = getListView();  
    thisListView.setEnabled(false);  
    ArrayAdapter<String> myList = new ArrayAdapter<String>(this, R.layout.about_screen, strText);  
    thisListView.setAdapter(myList);  
}  
private void batteryLevelUpdate() {  
 BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {  
   public void onReceive(Context context, Intent intent) {  
        context.unregisterReceiver(this);  
     int rawlevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);  
     int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);  
     int level = -1;  
     if (rawlevel >= 0 && scale > 0) {  
       level = (rawlevel * 100) / scale;  
     }  
     voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);  
     int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);  
     int onplug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);  
     boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING || status == BatteryManager.BATTERY_STATUS_FULL;  
     boolean onUSB = onplug == BatteryManager.BATTERY_PLUGGED_USB;  
     boolean onAC = onplug == BatteryManager.BATTERY_PLUGGED_AC;  
     String strStatus = "Charging on ";  
     if (isCharging && onUSB)  
          strStatus += "USB";  
     else if (isCharging && onAC)  
          strStatus += "AC Power";  
     else  
          strStatus = "Battery Discharging";          

     strText[0] = "Battery Level: " + Integer.toString(level) + "%";  
     strText[1] = "Voltage: " + Integer.toString(voltage) + "mV";  
     strText[2] = strStatus;  
     //strText[3] = "test";
   }  
 };  
 IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);  
 registerReceiver(batteryLevelReceiver, batteryLevelFilter);  
}  
} 
```

这是B类：

```
package com.XXXXXX.XXXXXX;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.widget.TextView;

public class AndroidTelephonyManager extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.phone);
    TextView textDeviceID = (TextView)findViewById(R.id.deviceid);

    //retrieve a reference to an instance of TelephonyManager
    TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

    textDeviceID.setText(getDeviceID(telephonyManager));

}

String getDeviceID(TelephonyManager phonyManager){

 String id = phonyManager.getDeviceId();
 if (id == null){
  id = "not available";
 }

 int phoneType = phonyManager.getPhoneType();
 switch(phoneType){
 case TelephonyManager.PHONE_TYPE_NONE:
  return "NONE: " + id;

 case TelephonyManager.PHONE_TYPE_GSM:
  return "GSM: IMEI=" + id;

 case TelephonyManager.PHONE_TYPE_CDMA:
  return "CDMA: MEID/ESN=" + id;

 /*
  *  for API Level 11 or above
  *  case TelephonyManager.PHONE_TYPE_SIP:
  *   return "SIP";
  */

 default:
  return "UNKNOWN: ID=" + id;
 }

}
} 
```

这是显示电池电量信息的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>  
 <TextView  
     xmlns:android="http://schemas.android.com/apk/res/android"  
     android:layout_width="fill_parent"  
     android:layout_height="fill_parent"  
     android:padding="10dp"  
             android:textSize="12sp"   
             android:clickable="false" /> 
```

但是我不知道如何从 B 类中获取 IMEI 信息以显示。理想情况下，它将是电池电量项目下方的另一个列表行。任何关于如何将不同活动组合到一个布局中的建议都会非常有用。

如果我的解释不是很好，我深表歉意，但我对 Java 的理解目前是新手。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:19:51.683

您可以将这些值写入 Sharedpreferences....

`getSharedPreferences("sp", MODE_PRIVATE). edit(). putString("login", ed_login.getText().toString()). commit();`

那么你可以通过......在任何地方得到它

```
getSharedPreferences("sp", MODE_PRIVATE).getString("login", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:48:25.013

我想你可能在这里弄错了一些基本概念。`Activity`仅适用于 UI。它不需要你需要`Activity`一个特定的功能。因此，您可以在一个活动中同时拥有这两种功能，并更新其布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:34:59.490

使用静态方法，例如

```
static String getDeviceID(TelephonyManager phonyManager) 
```

然后用类名调用方法，

classB.getDeviceID(phonyManager);

# c++ - 如何从纯抽象基类引用创建对象副本？

> ID：15684520
> 
> 赞同：4
> 
> 时间：2013-03-28T14:30:44.287
> 
> 标签：c++

我想编写一个适用于特定层次结构中的任何派生类的函数，而无需修改抽象类输入参数：

```
class A {
public:
    A(int val): m_i(val) { }
    virtual void add(int i) = 0;

    int m_i;
};

class B: public A {
public:
    B(int val): A(val) { }
    B(): A(0) { }
    virtual void add(int i) { m_i += i; }
};

class C: public A {
public:
    C(int val): A(val) { }
    C(): A(0) { }
    virtual void add(int i) { m_i += i*2; }
};

int f(const A& base_class)
{
    // how to create a concrete copy of class base_class?
    base_class.add(5);
} 
```

这里 f() 应该适用于 B 和 C，但我无法创建具体类的副本，因为我不知道实际类型，除非我使用 dynamic_cast。

是否有另一种方法来解决这个问题或者应该只使用dynamic_cast？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:33:49.473

通常称为[*虚拟构造函数习语*](http://www.parashift.com/c++-faq/virtual-ctors.html)的典型方法是定义另一个虚拟方法来克隆具体类，使其在抽象基中为虚拟，并在不知道其类型的情况下根据需要调用它以生成所需类的实例：

```
class A {
public:
    A(int val): m_i(val) { }
    virtual void add(int i) = 0;
    virtual A* clone() const = 0; // Override in derived classes to return new B/C
    int m_i;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:33:58.113

从您的问题中不清楚为什么您甚至需要制作副本。

但是，如果你这样做，你可以有一个`clone()`方法：

```
class A {
public:
    virtual A* clone() const = 0;
};

class B: public A {
public:
    virtual B* clone() const { return new(*this); }
};

class C: public A {
public:
    virtual C* clone() const { return new(*this); }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:38:07.743

问题是您正在传递`const A&`但`add`不是一种`const`方法，如果您拿走`const`修饰符，那么这有效：

```
int f(A& base_class)
{
    // how to create a concrete copy of class base_class?
   base_class.add(5);

   ///Need a return here
} 
```

我正在使用`gcc`，真正告诉你发生了什么的错误是：

```
error: no matching function for call to 'A::add(int&) const'
  base_class.add(a);                                  ^^^^^  

no known conversion for implicit 'this' parameter from 'const A*' to 'A*'
                                                        ^^^^^^^^ 
```

根据您的回复，另一个选项是 make`m_i` `mutable`并使成员方法`const`如下所示：

```
class A {
  public:
    A(int val): m_i(val) { }
    virtual void add(int i) const = 0;

  protected:
    mutable int m_i;
};

class B: public A {
 public:
    B(int val): A(val) { }
    B(): A(0) { }
    virtual void add(int i) const { m_i += i; }
};

class C: public A {
  public:
    C(int val): A(val) { }
    C(): A(0) { }
    virtual void add(int i) const { m_i += i*2; }
};

int f(const  A& base_class)
{
    base_class.add(5) ;

    //Need a return here
} 
```

# c# - 如何从子窗口关闭父窗口？

> ID：15684522
> 
> 赞同：15
> 
> 时间：2013-03-28T14:30:47.073
> 
> 标签：c#, asp.net, ajax, telerik, radwindow

我有以下情况：

我的页面上有一个gridview：

```
page1.aspx 
```

[我在rad 窗口](http://demos.telerik.com/aspnet-ajax/window/examples/contenttemplatevsnavigateurl/defaultcs.aspx)`page2.aspx`中通过该 gridview打开另一个页面（ ），然后通过某个按钮打开最后一页（）。`page2.aspx``page3.aspx``rad window`

所有这些步骤都是通过服务器端代码执行的：

* * *

```
 protected void OpenNewWindow(string url, int width, int height, int mode)
        {
            RadWindow newWindow = new RadWindow();
            newWindow.NavigateUrl = url;
            newWindow.VisibleOnPageLoad = true;
            newWindow.KeepInScreenBounds = true;
            newWindow.Skin = "Metro";
            if (width > 0)
            {
                newWindow.Width = width;

            }
            if (height > 0)
            {
                newWindow.Height = height;
            }
            newWindow.VisibleStatusbar = false;
            if (mode == 0)
            {
                {

                }
                //newWindow.OnClientClose = "OnChildWindowClosed";
                newWindow.DestroyOnClose = true;
                newWindow.InitialBehaviors = WindowBehaviors.Maximize;
            }
            RadWindowManager1.Windows.Add(newWindow);
        } 
```

* * *

我想做的是：

当单击 my ( `page3.aspx`) 上的特定按钮时，关闭它及其父级`page2.aspx`。

如何做到这一点（服务器端）？

我试试这个：但它只是关闭了`page3.aspx`我想关闭父母的孩子`page2.aspx`？！

* * *

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            ((RadAjaxManager)this.Parent.FindControl("RadAjaxManager1")).ResponseScripts.Add("CloseModal();");

            RadAjaxManager1.ResponseScripts.Add("CloseModal();");
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T15:12:56.673

```
protected void Button1_Click(object sender, EventArgs e)
{
    ((RadAjaxManager)this.Parent.FindControl("RadAjaxManager1")).ResponseScripts.Add("CloseModal();");

    RadAjaxManager1.ResponseScripts.Add("CloseModal();");
} 
```

如果`CloseModal()`事件正确触发，您应该能够在`window.close()`其中调用。RadWindows 仅存在于父窗口的上下文中，因此您仍然应该能够调用`window.close()`which 将关闭每个打开的窗口。

**编辑：**虽然有点离题，但 Telerik 的[这个链接](http://www.telerik.com/help/aspnet-ajax/window-programming-opening-from-within-dialog.html)向您展示了如何从 RadWindow 获取父窗口的句柄。然后你可以调用客户端的close方法关闭浏览器窗口（page1.aspx），这将关闭所有后续的RadWindows。

从[这个链接](http://demos.telerik.com/aspnet-ajax/window/examples/radopen/defaultcs.aspx)：

> RadWindow 和浏览器的弹出窗口之间的主要区别在于，就像任何其他 DHTML 元素一样，RadWindow 仅存在于创建它的页面的上下文中。它不能离开浏览器窗口的边界。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T14:45:55.390

您可以通过实现每个父级的接口来执行气泡事件。我试图说明我的想法。

```
public interface IClosingParent
{
    void Close();
}

public class PageA : System.Web.Page, IClosingParent
{
    public void IClosingParent.Close()
    {
        //Code to close it or hide it
    }
}

public class PageB : System.Web.Page, ClosingParent
{
    public void IClosingParent.Close()
    {
        ((IClosingParent)this.Parent).Close();

        //Code to close it or hide it
    }
}

public class PageC : System.Web.Page
{        
    protected void ButtonClose_Click(object sender, EventArgs e)
    {
        ((IClosingParent)this.Parent).Close();

        //Code to close it or hide it     
    }
} 
```

这包括您必须将 RadWindow 声明为父级。因此，在似乎是这样的分层视图中：

```
PageA : IClosingParent
|
|-- PageB : IClosingParent
    |
    |-- 页面C
        |--关闭按钮

```

我认为您可以使用此解决方案来管理您想要的关闭过程，并随时或随心所欲地进行更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:23:47.107

这可能听起来很土，但是为什么不简单地在关闭之前执行要运行的服务器代码，然后向客户端返回一个 bool 参数，该参数允许它运行关闭窗口（客户端）的 if 语句？

PS：我在考虑算法，我对服务器端 C# 没有太多经验。

# css - 当客户端是 IE8 时，GWT 不应用 Css 样式

> ID：15684524
> 
> 赞同：0
> 
> 时间：2013-03-28T14:30:52.697
> 
> 标签：css, gwt, internet-explorer-8, cssresource

我有这个CSS类：

```
.defaultActionButton {
height: auto;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 10px;
padding-right: 10px;
white-space: normal;
border: 1px solid #3079ed;
border-radious: 2px;
font-size: 13px;
color: white;
font-weight: bold;
text-align: center;

background: #4d90fe; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzRkOTBmZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM0ZDg3ZWQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #4d90fe 0%, #4d87ed 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4d90fe), color-stop(100%,#4d87ed)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #4d90fe 0%,#4d87ed 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #4d90fe 0%,#4d87ed 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #4d90fe 0%,#4d87ed 100%); /* IE10+ */
background: linear-gradient(to bottom,  #4d90fe 0%,#4d87ed 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4d90fe', endColorstr='#4d87ed',GradientType=0 ); /* IE6-8 */
<!--[if gte IE 9]>
filter: none;
<![endif]-->
} 
```

此类由 GWT CssResource 加载：

```
interface Common extends CssResource {
            //cut
    String defaultActionButton();
            //cut
} 
```

应用此行：

```
loginButton.addStyleName(Styles.INSTANCE.common().defaultActionButton()); 
```

这适用于 Chome、Firefox 和 IE9： ![风格还行](../Images/dc8994baae8205cfdc098f2adee97fdd.png) 但在 IE8 中不应用这种样式并且按钮很难看：![风格柯](../Images/c15ea8244f11ce656778a2b2d424b120.png)

（IE8 不支持border-radius，但这不是问题）。

顺便说一句，将 css 样式类复制到仅包含一个简单按钮的纯 HTML 文件中，IE8 也可以很好地显示它：![样式OkIE8simpleHtml](../Images/5c658d3f2d817c911b0964e03d8ad2fc.png)

我怎样才能在“内部”GWT 中获得相同的结果？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:41:46.447

我在我的项目中做到了，它在 IE8 中工作。您必须在 CSS 中编写以下行。

```
border-collapse: separate !important; 
```

# java - 使用什么原语来实现同步关键字？

> ID：15684530
> 
> 赞同：8
> 
> 时间：2013-03-28T14:31:11.227
> 
> 标签：java, multithreading, synchronized

当我们`synchronized`在java中使用关键字时，究竟使用了哪个同步原语？`Lock, Semaphore, Monitor, Mutex`?

**编辑：** JVM 如何在本机级别实现锁定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T14:45:54.430

在字节码级别，java has`monitorenter`和`monitorexit`操作，记录在[Java 虚拟机规范的这个页面中](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc9.html)，下面粘贴了片段（*objectref*是操作的操作数，取自堆栈）：

## *监视器*输入片段

> 每个对象都有一个与之关联的监视器。执行 *monitorenter的线程获得与**objectref*关联的监视器的所有权。如果另一个线程已经拥有与*objectref*关联的监视器，则当前线程等待直到对象被解锁，然后再次尝试获得所有权。如果当前线程已经拥有与*objectref*关联的监视器，它会增加监视器中的计数器，指示该线程进入监视器的次数。如果与*objectref*关联的监视器不属于任何线程，则当前线程将成为监视器的所有者，将此监视器的条目计数设置为 1。

## *监视器*退出片段

> 当前线程应该是与*objectref*引用的实例关联的监视器的所有者。线程递减指示它进入此监视器的次数的计数器。如果结果计数器的值变为零，则当前线程释放监视器。如果与*objectref*关联的监视器 空闲，则允许等待获取该监视器的其他线程尝试这样做。

因此，“监视器”是答案，NPE 的答案中引用的这个和 JLS 都没有指定在本机代码级别发生的情况。如果您有特定的平台（CPU 和操作系统）和特定的 JVM 实现（包括版本），您当然可以查看 JVM 源代码（如果它是开源 JVM），或者在这里询问。

从 1997 年开始，我也偶然发现了[这个博客](http://www.javaworld.com/jw-07-1997/jw-07-hood.html)，其中有更多细节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T14:37:07.877

来自 JLS（[第 17.1 节。同步](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.1)）：

> Java 编程语言为线程之间的通信提供了多种机制。这些方法中最基本的是同步，**它是使用监视器实现的**。Java 中的每个对象都与一个监视器相关联，线程可以锁定或解锁监视器。一次只有一个线程可以锁定监视器。任何其他试图锁定该监视器的线程都会被阻塞，直到它们能够获得对该监视器的锁定。一个线程 t 可能会多次锁定一个特定的监视器；每次解锁都会反转一次锁定操作的效果。

因此，“监视器”是您第一个问题的答案。

至于第二个问题，这是一个未指定的实现细节。

# html - 我的站点地图架构有多重要

> ID：15684531
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:13.367
> 
> 标签：html, xml, sitemap

我想知道我的网站的站点地图架构对于我的网站的谷歌抓取有多大的作用。

我的产品出现在第三层重要吗？

希望我能找到答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:37:24.277

好吧，如果您向 google 提交站点地图，它会找到这些页面。您是在谈论这里的三次点击规则，因为事情应该距离主页三次点击？这不仅仅是坚持一个规则，而且您网站上其他页面上内容的相关性（加上所有常见因素，如入站链接等）都将共同影响您的所有谷歌搜索结果中的页面票价。

第三层，或者距离主页三次点击是一个已经存在很长时间的规则，并且对于人们喜欢快速轻松地找到他们想要的东西并将重要页面嵌套在建筑可能会让人们反感。仅此一项就会影响您的谷歌排名 - 例如，如果您的主页获得大量点击，而谷歌可以看到人们没有停留并返回搜索结果，这可能会影响您的网页在搜索中的排名引擎比其他任何东西都重要，因为谷歌可能会在某种程度上将其视为“误报”。在这种情况下，所有页面上的相关内容都是一件好事，因为不给用户无限的链接来点击以获得他们想要的东西。

我建议与谷歌网站管理员（[http://www.google.com/webmasters/](http://www.google.com/webmasters/)）注册该网站并密切关注那里的网站，并通过这里向谷歌提交站点地图以确保他们可以找到所有您想要的页面，并保持您的导航尽可能直截了当。如果他们必须在架构中比三层更深，那么请确保您正在尽您所能确保谷歌能够理解您的网站。当然，还有一个（可能成本高昂）选项，即使用谷歌广告将目标流量吸引到您网站上的特定页面。

老实说，如果假设网站上的其余页面和其他所有页面完全符合逻辑，那么我不会梦想改变网站结构以使产品升级。正确完成。所以我会说是的，越高越好，因为它是谷歌算法的一部分（afaik），但它不可能是全部和全部，如果你需要它们，我会很想把我的时间用于优化一切否则，本质上是使最终用户体验达到最佳状态。

# c++ - 在 C++ 中包装不同的 C API 实现

> ID：15684532
> 
> 赞同：1
> 
> 时间：2013-03-28T14:31:16.910
> 
> 标签：c++, c, wrapper

假设我们使用的是 gcc/g++ 和一个随机委员会指定的 C API。本规范定义了功能

```
void foo(void); 
```

现在，根据本规范有几种实现方式。让我们选择两个作为示例并将它们称为`nfoo`and `xfoo`（由 libnfoo 和 libxfoo 分别作为静态和动态库提供）。

现在，我们要为`foo`-API 创建一个 C++ 框架。因此，我们指定一个抽象类

```
class Foo
{
  public:
    virtual void foo(void) = 0;
}; 
```

和相应的实现

```
#include <nfoo.h>
#include "Foo.h"

class NFoo : public Foo
{
  public:
    virtual void foo(void) 
    {
      ::foo(); // calling foo from the nfoo C-API
    }
}; 
```

也

```
#include <xfoo.h>
#include "Foo.h"

class XFoo : public Foo
{
  public:
    virtual void foo(void) 
    {
      ::foo(); // calling foo from the xfoo C-API
    }
}; 
```

现在，我们面临一个问题：**我们如何将所有内容创建（即链接）到一个库中？**

我看到将与`foo`C API 实现的函数符号发生符号冲突。

我已经尝试将 C++ 包装器实现拆分为单独的静态库，但后来我（再次）意识到静态库只是未链接目标文件的集合。所以这根本行不通，除非有办法将 C 库完全链接到包装器中并删除/隐藏它们的符号。

建议高度赞赏。

**更新：**最佳解决方案应同时支持这两种实现。

注意：代码并不意味着可以正常工作。将其视为伪代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:32:25.483

您能否在运行时使用[dlopen](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html) / [dlsym](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html)来解决您的 foo 调用。

类似于来自链接的示例代码（可能无法编译）：

```
void    *handle,*handle2;
void (*fnfoo)() = null;
void (*fxfoo)() = null;

/* open the needed object */
handle = dlopen("/usr/home/me/libnfoo.so", RTLD_LOCAL | RTLD_LAZY);
handle2 = dlopen("/usr/home/me/libxfoo.so", RTLD_LOCAL | RTLD_LAZY);

fnfoo = dlsym(handle, "foo");
fxfoo = dlsym(handle, "foo");

/* invoke function */
(*fnfoo)(); 
(*fxfoo)(); 
```

// 不要忘记 dlclose() 的

否则，需要修改库中的符号。这不能移植到 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:12:24.690

首先，如果您要在 C++ 代码中封装 C API，您应该将该依赖项隐藏在[编译防火墙](http://www.gotw.ca/publications/mill04.htm)后面。这是为了 (1) 避免使用来自 C API 的名称污染全局命名空间，以及 (2) 将用户代码从依赖项中释放到第三方标头。在此示例中，可以进行相当简单的修改以隔离对 C API 的依赖关系。你应该做这个：

```
// In NFoo.h:

#include "Foo.h"

class NFoo : public Foo
{
  public:
    virtual void foo(void);
};

// In NFoo.cpp:

#include "NFoo.h"

#include <nfoo.h>

void NFoo::foo(void) {
  ::foo();   // calling foo from the nfoo C-API
} 
```

上面的重点是 C API 头文件`<nfoo.h>`，仅包含在 cpp 文件中，而不包含在头文件中。这意味着用户代码不需要提供 C API 标头来编译使用您的库的代码，C API 中的全局命名空间名称也不会与正在编译的任何其他内容发生冲突。此外，如果您的 C API（或任何其他外部依赖项）在使用 API 时需要创建许多东西（例如句柄、对象等），那么您也可以将它们包装在 PImpl（指向前向声明的实现类，仅在 cpp 文件中声明定义）以实现相同的外部依赖隔离（即“编译防火墙”）。

现在，基本的东西已经不碍事了，我们可以转移到手头的问题：同时使用名称冲突符号链接到两个 C API。这是一个问题，没有简单的出路。上面的编译防火墙技术实际上是关于在*编译*期间隔离和最小化依赖关系，通过这种方式，您可以轻松*编译*依赖于两个名称冲突的 API 的代码（在您的版本中不是这样），但是，您仍然会受到打击到达链接阶段时出现 ODR（一个定义规则）错误。

[这个线程](https://stackoverflow.com/questions/678254/c-function-conflict)有一些有用的技巧来解决 C API 名称冲突。总之，您有以下选择：

*   如果您可以访问两个 C API 中的至少一个的静态库（或目标文件），那么您可以使用`objcopy`（在 Unix/Linux 中）之类的实用程序为该静态库（目标文件）中的所有符号添加前缀)，例如，使用命令`objcopy --prefix-symbols=libn_ libn.o`为 libn.o 中的所有符号添加前缀`libn_`. 当然，这意味着您需要在 API 的头文件中的声明中添加相同的前缀（或仅使用您需要的内容制作一个简化版本），但从维护的角度来看，这不是问题，只要因为您为该外部依赖项设置了适当的编译防火墙。

*   如果您无权访问静态库（或目标文件）或不想在上述方法中执行此操作（有些麻烦），则必须使用动态库。然而，这并不像听起来那么微不足道（而且我什至不会进入[DLL Hell的主题](http://en.wikipedia.org/wiki/DLL_Hell)）。您必须使用动态链接库（或共享对象文件）的动态加载，而不是更常见的静态加载。也就是说，您必须使用 LoadLibrary / GetProcAddress / FreeLibrary（适用于 Windows）和 dlopen / dlsym / dlclose（所有类 Unix 操作系统）。这意味着您必须为您希望使用的每个函数单独加载和设置函数指针地址。同样，如果在代码中正确隔离了依赖项，这将只是编写所有这些重复代码的问题，但这里并没有太大的危险。

*   如果您对 C API 的使用比 C API 本身简单得多（即，您只使用数百个函数中的几个函数），那么创建两个动态库可能会容易得多，每个 C API 一个，它只导出有限的函数子集，赋予它们唯一的名称，包装对 C API 的调用。然后，您的主应用程序或库可以直接链接到这两个动态库（静态加载）。当然，如果您需要对 C API 中的所有函数执行此操作，那么经历所有这些麻烦是没有意义的。

因此，您可以选择对您来说更合理或更可行的方法，毫无疑问，这需要大量的手动工作来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:37:53.320

如果您一次只想访问一个库实现，一种自然的方法是作为动态库

在 Windows 中也可以一次访问两个或多个库实现，因为 Windows 动态库提供了对内部任何内容的完全封装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:38:35.767

IIUC`ifdef`是您所需要的

放入`#define _NFOO` nfoo lib 和`#define XFOO`xfoo lib。

还要记住，如果 nfoo lib 和 xfoo lib 都有一个名为 Foo 的函数，那么编译过程中就会出错。为避免这种情况，GCC/G++ 通过名称修饰使用函数重载。

然后您可以使用 ifdefs 检查 xfoo 是否已链接

```
#ifdef XFOO
//call xfoo's foo()
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:30:07.520

链接器无法区分同一符号名称的两个不同定义，因此如果您尝试使用具有相同名称的两个函数，则必须以某种方式将它们分开。

分离它们的方法是将它们放入动态库中。您可以选择从动态库中导出哪些内容，这样您就可以导出包装器，同时隐藏底层 API 函数。您还可以在运行时加载动态库并一次绑定到一个符号，因此即使在多个中定义了相同的名称，它们也不会相互干扰。

# css - DIV 不使用 CSS 浮动对齐左上角和右上角

> ID：15684533
> 
> 赞同：3
> 
> 时间：2013-03-28T14:31:20.977
> 
> 标签：css, html

抱歉，对 HTML 和 CSS 有点陌生，但我已经尝试了所有方法，但我似乎无法让它工作。我有一个顶部 DIV 和一个底部 DIV。顶部 DIV 包含另外两个需要左右对齐的 DIV。

```
<!DOCTYPE html>
<html>
<body>
    <div>
        <div style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(187, 187, 187);">
            <div style="font-size: 30px; float: left;">Top Left</div>
            <div style="font-size: 30px; float: right;">Top Right</div>
        </div>
        <div >blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah
            blah blah blah blah blah blah blah blah blah blah blah blah
            blah blah blah
        </div>
    </div>
</body>
</html> 
```

我想看到类似的东西：

```
Top Left                          Top Right
-------------------------------------------

blah blah blah blah blah blah blah 
```

但相反我得到

```
----------------------------
Top Left blah blah Top Right 
```

似乎顶部 DIV 的高度设置为零。为什么我不知道。我想如果你把一些东西放在一个 DIV 中，它应该会自动拉伸吗？

我的实际代码是：

```
<div style="border-bottom: 1px solid rgb(187, 187, 187); overflow: auto; clear: both; padding: 15px;">
    <div style="font-size: 30px;">Bearbeiten</div>
    <div style="font-size: 30px; width: 50px;">X</div>
</div>
<div style="position: absolute; bottom: 10px;"><input style="font-size: 15px; height: 30px; width: 130px;"
                                                      value="Cancel" class="OverlayButton" id="Overlay.CancelButton"
                                                      type="button"><input
        style="font-size: 15px; height: 30px; width: 130px;" value="Save" class="OverlayButton" type="button"><input
        style="font-size: 15px; height: 30px; width: 130px;" value="Delete" class="OverlayButton" type="button"></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:33:36.173

放在`overflow: hidden`包含两个浮点数的 div 上。

[http://jsfiddle.net/SntpD/](http://jsfiddle.net/SntpD/)

您也可以使用 CSS `:after`，但它有点复杂。

```
.container:after {
    clear: both;
    display: block;
    content: "";
    height: 0;
} 
```

[http://jsfiddle.net/SntpD/1/](http://jsfiddle.net/SntpD/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:38:30.990

您可以`overflow: auto; float: none; clear: both`在父级上使用`div`。 `overflow: hidden`也可以按照@Explosion Pills 的建议使用。但这是更清洁、更兼容的方式

[http://jsfiddle.net/pixelass/yPZQ9/](http://jsfiddle.net/pixelass/yPZQ9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:34:43.070

您应该对包含浮动的父 div 应用清除（例如，使用给定的标记）

```
body > div > div:first-child {
    height: auto;
    overflow: hidden;
} 
```

（当然，为了性能，你应该使用更好的选择器）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T14:36:15.220

您可以`width:50%`在顶部 Div 中给您的两个 div。

看一看：

[http://jsfiddle.net/v5Dn3/](http://jsfiddle.net/v5Dn3/)

# solr - Solr 术语组件完整字段匹配

> ID：15684535
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:24.217
> 
> 标签：solr

我是 Solr 的新手。我正在使用术语组件从字段中获取热门术语。例如：我得到了“公司”字段，其中有很多类型的公司，结尾是“gmbh”和“ag”。但我需要用它的全部内容分隔这个字段。例如：Mustermann gmbh、max gmbh 等.....我在 schema.xml 中尝试了许多不同的字段类型，但没有任何效果。

先感谢您。

最好的祝福，

洛伦佐:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:47:56.233

您可以在请求中使用 Facets 来获取“字段 Y 的前 X”

例如

```
q=*&facet=true&facet.field=Firm&facet.limit=50&facet.minCount=1 
```

当您使用 facet.limit 时，您将获得前 X 个结果。您在 schema.xml 中的字段 Firm 不应使用 Tokenizer，因为您会得到“mustermann”和“gmbh”而不是“mustermann gmbh”（我认为“string”是标准字段，没有 Tokenizer）

如果您必须更改字段值，请不要忘记重新索引。

# visual-studio-2010 - ReSharper 在初始化对象时更改智能感知行为

> ID：15684536
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:26.070
> 
> 标签：visual-studio-2010, resharper, intellisense, resharper-7.1, object-initialization

假设我有一堂课

```
public class Dummy
{
    public int DummyInt { get; set; }
    public string DummyString { get; set; }
} 
```

在我拥有的代码中的某处：

```
var dummy = new Dummy
{ 
```

在 VS10 中，如果我现在按 'a'，我会得到一个成员列表：DummyInt,DummyString。但是打开 ReSharper 后，如果我按“a”，则不会显示任何内容。我必须按“d”才能列出这两个字段。

我浏览了 ReSharper 选项，但在任何地方都找不到。有没有可能把它关掉？

R# 7.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:57:50.173

Resharper 提供了几个不同的符号补全。基本的称为[符号完成](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Code_Completion__Symbol.html)，并具有 Ctrl-Space 的默认键绑定。更智能的称为[Smart Completion](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Code_Completion__Smart.html)，并具有 Ctrl-Shift-Space 的默认键绑定。

# backbone.js - 使用backbonejs下划线模板错误

> ID：15684537
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:27.663
> 
> 标签：backbone.js, underscore.js

当这个带有 Backbonejs 的 html 代码打开时，Chrome Java 脚本控制台抛出以下错误 - 但是当我 从方法中删除包含模板`uncaught TypeError: Cannot call method 'replace' of undefined` 使用的这一行代码时，它工作正常。为什么使用下划线模板会引发错误？这是代码`underscore``this.template = _.template($('#listing').html())``List_view's` `initialize`

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example Backbone Whisky APP</title>
  </head>
  <body>
    <script src="LIB/json2.js"></script> 
    <script src="http://underscorejs.org/underscore.js"></script>  
    <script src="http://code.jquery.com/jquery.js"></script>  
    <script src="http://backbonejs.org/backbone.js"></script>  
    <script type = "text/template" id="listing">
      <li>%= value %</li>
    </script>
    <script>

      Whisky = Backbone.Model.extend();
        firstWhisky = new Whisky({
        name : 'Blenders Pride'
      });
      Whiskies = Backbone.Collection.extend({
        Model:Whisky ,
        url:"#"
      });

      first_view = Backbone.View.extend({
        el : 'body',
        initialize : function() { 
          this.$el.empty();
          this.render();
        } , 

        render : function() { 
          this.$el.append("<h1>The Whisky APP</h1>");
         this.list_view = new List_view();
          this.$el.append(this.list_view.render().el);
          return this ; 
        }
      });
      List_view = Backbone.View.extend({ 
        tagName : 'ul' , 
        initialize : function() { 
          this.template = _.template($('#listing').html());
        } , 
        render : function() {
          this.$el.empty();
          this.$el.append("<li>Royal stag</li>");
          this.$el.append("<li>Signature </li> ");
          return this ; 
        }
      });
      index_view = new first_view();    
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:21:31.430

问题是您的调用`$("#listing").html()`正在返回`undefined`，因为该元素尚不可用。您需要等待 DOM 加载完毕才能按 ID 访问元素。您可以通过执行简单的内联[警报](http://jsfiddle.net/wiredprairie/YYvKU/)来确认这一点。您需要延迟检索，直到 DOM 准备好。

在这种情况下，这是因为您在正文中有脚本标签，使它们在您请求它们时不可用。移动脚本标签（和模板），它将起作用：

[http://jsbin.com/obahux/2/](http://jsbin.com/obahux/2/)

您将遇到的一个问题是您的语法错误，您应该使用`<%`and`%>`来执行代码或发出值：

```
<script type = "text/template" id="listing">
    <li><%= value %></li>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:55:35.410

那是因为，在您的 first_view 初始化函数中，您正在使用 this.$el.empty() 清除 el，这会使 body 为空并且其中没有任何内容，其中的所有脚本和模板都将被省略。

您可以找到更好的解决方案来清除它。或者只是将其包装在另一个 div 标签中

# php - 使用带有 php 变量的 php 发送电子邮件

> ID：15684538
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:34.713
> 
> 标签：php, phpmailer

我正在使用一个 PHP 脚本来发送带有 php 变量的电子邮件（通过使用 POST 方法的表单获得）。这是我的代码：

```
<?php
/* These will gather what the user has typed into the fieled. */

$nameField = $_POST['name'];
$emailField = $_POST['email'];
$questionField = $_POST['question'];

/* These are the variable that tell the subject of the email and where the email will be sent.*/

$emailSubject = 'Recupero password LightSchool';
$mailto = $_POST['email'];
$mail->From = 'from@example.com';
$mail->FromName = 'Mailer';

/* This takes the information and lines it up the way you want it to be sent in the email. */

$body = '<br><hr><br> Name: '.$name.' <br> Email: '.$email.' <br> Question: '.$question.' <br>';

$headers = "From: $email\r\n"; // This takes the email and displays it as who this email is from.
$headers .= "Content-type: text/html\r\n"; // This tells the server to turn the coding into the text.
$success = mail($mailto, $emailSubject, $body, $headers); // This tells the server what to send.

?>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">  
    <head>  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
    <title>MY Studenti</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    </head>  
    <body style="background-image:url(http://studenti.lightschool.it/new/bkg.png)">  
    <div id="main">
    <h1>
    <img src="http://images.lightschool.it/logo/medium250x250.png" alt="" height="66" style="float: left; margin-right: 20px" width="62" />MY Studenti</h1>
    <p>Recupera password ti permette di recuperare la tua password, tramite 
    l'inserimento del tuo nome utente.</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <form id="form1" name="form1" method="post" action="reset-pwd.php">
<table width="455" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="175" height="44" align="center"><label for"name">name</label></td>
    <td width="280"><input name="name" type="text" id="name" size="30" />
      </td>
  </tr>
  <tr>
    <td height="45" align="center"><label for="email">email</label></td>
    <td><input name="email" type="text" id="email" size="30" /></td>
  </tr>
  <tr>
    <td height="41" align="center"><label for="question">question</label></td>
    <td><textarea name="question" cols="30" rows="5" id="question"></textarea></td>
  </tr>
  <tr>
    <td height="38">&nbsp;</td>
    <td><label>
      <input type="submit" name="Submit" id="Submit" value="Submit" />
    </label></td>
  </tr>
</table>

</form>
    </div>
    </body>
    </html> 
```

此 PHP 脚本成功运行，但有三个变量（姓名、电子邮件和问题）不会显示在发送的电子邮件中。我也试过这个`var_dump($_POST['email']);`没有解决。我怎么解决这个问题？

谢谢。

PS：我知道这个网站和其他网站上发布了很多这样的问题，但这些发布的解决方案都没有帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:37:06.847

改变

```
$nameField = $_POST['name'];
$emailField = $_POST['email'];
$questionField = $_POST['question']; 
```

到

```
$name = $_POST['name'];
$email = $_POST['email'];
$question = $_POST['question']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:39:51.343

您将 Vars 称为两个不同的东西。你要小心这个。如果您没有过滤掉任何人的电子邮件，那么有人可以向它提供地址列表并开始从您的邮箱发送垃圾邮件。

# android - android 应用程序显示来自通过 wifi 连接的 PC 的内容

> ID：15684541
> 
> 赞同：1
> 
> 时间：2013-03-28T14:31:48.167
> 
> 标签：android

我是这个应用程序开发人员的新手，首先我将描述我的系统的设置。我有一台机械机器，它通过PLC与PC连接，现在我在PC（来自机器）中有一些数据（十进制数字），现在我需要开发一个应用程序来显示内容（十进制数字）在安卓手机，通过WiFi在PC上。

我需要将一些命令发送回PC，

使用简单编码的简单应用程序开发人员是否有可能？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:44:49.587

您可以轻松使用基于 IP 协议的 TCP 套接字，并允许您通过任何 IP 网络进行通信。

**对于您的服务器/PC**

您可以在您的 PC 上编写一个简单的 java tcp 服务器。

教程：

*   [TCP 服务器](http://systembash.com/content/a-simple-java-tcp-server-and-tcp-client/)
*   [All About Sockets](http://docs.oracle.com/javase/tutorial/networking/sockets/) ......很好的起点。

**对于您的 Android/客户端**

您将必须了解 android 开发的基础知识并查看几个网络示例。

请点击以下链接：

*   [你的第一个安卓应用](http://developer.android.com/training/basics/firstapp/index.html)
*   [Android TCP 客户端示例](http://myandroidsolutions.blogspot.com/2012/07/android-tcp-connection-tutorial.html)

额外的 ：

*   [维基百科上的 TCP](http://docs.oracle.com/javase/tutorial/networking/sockets/)无需阅读实施细节，只需了解概念即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:42:48.133

如果您只想使用您的 PC<-> 移动设备来执行此操作，您可以通过网络服务器公开数据文件，然后让移动设备读取该文件并以所需的方式公开。这不是建议的方法，因为它有几个缺点，例如限制暴露的数据等。

假设您要公开的数据不是微不足道的并且可能包含多个数据源，那么以更具互操作性的方式进行操作将需要更多的工作。

1.  编写从服务器公开数据的 Web 服务 (REST/SOAP)
2.  编写一个使用来自 web 服务的数据的移动应用程序（通过 REST 客户端）
3.  应用程序消耗数据后，您可以编写所需的 ui 以将其显示在移动应用程序上。

# tinymce - 无法让 TinyMCE 获取我自己的 CSS 文件

> ID：15684542
> 
> 赞同：1
> 
> 时间：2013-03-28T14:31:50.853
> 
> 标签：tinymce

我已按照此处的说明 [http://www.tinymce.com/wiki.php/configuration:content_css](http://www.tinymce.com/wiki.php/configuration:content_css) 并在我的 Apps 根文件夹中创建了自己的 CSS 文件，并使用

```
 tinyMCE.init({
    content_css : "mycontent.css", 
```

但它永远不会被捡起。我们正在使用 TinyMCE '3.5.6' 如果我对 content.css 文件进行更改，这些都可以正常获取，因此这不是缓存问题。关于还有什么可以尝试的任何想法？

# javascript - 如何验证时间的集合？

> ID：15684543
> 
> 赞同：0
> 
> 时间：2013-03-28T14:31:52.137
> 
> 标签：javascript, ruby, web-applications

我想分别使用 javascript/coffeescript 和 ruby​​ 在客户端和服务器端验证提交的时间字符串集合。验证后，时间值将存储到数据库中。对于如何最好地实现这一点的建议表示赞赏。谢谢。

我想验证：

1.  输入的时间是可实现的
2.  集合中的时间段不重叠。

以下是一组用户提交的数据示例：

```
[{"start": "10:00 AM", "end": "11:30 AM"}, 
 {"start": "11:30 AM", "end": "1:00 PM"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:28:06.137

**对于红宝石：**

您需要[自定义验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)：

1.  您可以尝试将您的开始/结束实例化为 Date.new，如果不能，则它无效。

2.  如果你可以 instatiante，你可以验证 start_date <= end_date。

# php - 更新 mysql，新数据从唯一 id 1 开始

> ID：15684546
> 
> 赞同：1
> 
> 时间：2013-03-28T14:31:54.360
> 
> 标签：php, mysql, database

我想知道如何用新数据更新我的数据库表，但最新数据位于顶部，唯一 ID 从 1 开始。这就是我的意思：

以第一个插入查询为例，插入3个文章主题：

```
id        article
 1        firstNews
 2        secondNews
 3        thirdNews 
```

然后下次我运行 Cron 作业检查新文章时，例如出现两篇新文章，我希望这两篇新文章在表的开头，如下所示：

```
id        article
 1        NewArticle1
 2        NewArticle2
 3        firstNews
 4        secondNews
 5        thirdNews 
```

希望这是有道理的。这可能是一种不好的方法，我想我可以有一个带有插入日期（）的列，然后从 OrderBy 日期中取出数据，但它必须是一种更简单的方法。我认为这将是最容易从表中输出最新数据的方法......

如果我按 DESC 排序，它会在 NewArticle1 之前输出 NewArticle2，这会破坏目的......

```
id       article
 1       firstNews
 2       secondNews
 3       thirdNews
 4       NewArticle1
 5       NewArticle2 
```

所以通过 DESC，id 5 将是第一个输出......我真的希望有办法解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:33:21.480

你不应该这样做。只需在末尾插入，要获取最新文章，请使用查询：

```
SELECT * FROM articles ORDER BY id DESC; 
```

一般来说：不要让数据适合您的查询，而是让查询适合您的数据。id 不是位置或数字，它唯一标识该行数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:34:34.367

您可以使用日期列并对其进行排序。或者只是按 ID 降序排序。

就地更改 PK 很少是一个好主意。尤其重要的是，您可能有使用该 PK 的子表，也许还有历史表

请注意，SQL 表没有隐式顺序：您始终需要 ORDER BY 来保证结果集的顺序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:42:01.927

您应该添加另一列专门用于排序，例如日期。并在其上添加一个`INDEX`。

然后查询变为：

```
SELECT * 
FROM news
ORDER BY newsdate DESC 
```

*最新消息最先出现*

如果有两个新闻项目可以同时发布，您可能希望包含第二个排序：

```
ORDER BY newsdate DESC, id ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:50:58.120

这根本不应该是你的担心。

**ID绝不是一个数字，也不是一个位置**。它只是一个**唯一标识符**。

意味着每个数据库行都永远坚持它的 id。虽然您想将您的“唯一” id 分配给每条新消息，但这是没有意义的。

因此，只需使用通常的自动递增 id 并选择它`ORDER BY id DESC`以首先获取最新条目。

# excel - 用excel将列旋转成行

> ID：15684549
> 
> 赞同：1
> 
> 时间：2013-03-28T14:32:01.793
> 
> 标签：excel, vba

我有一个看起来像这样的 excel 表：

![在此处输入图像描述](../Images/67cbf0490f33723347acbf66fc85f516.png)

不要问我这是怎么发生的，但不知何故，应该是列的东西在这张表中作为行......

您可以在 c 列中看到重复的帐号和单词，想象一切都旋转了 180 度。并为该特定帐号不存在的字段插入空白或空值。

简而言之，它应该最终看起来像这样：

![在此处输入图像描述](../Images/d1931af8f609f65959ae21c97e32be98.png)

我想不出在 excel 中执行此操作的简单方法。但也许有一些 VBA 代码？

什么是最简单的解决方案？以及如何实施？

我知道这个问题不是很清楚，但如果你留下一些指导意见，我很乐意编辑这个问题，直到它有意义为止。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:55:21.190

你不需要 VBA :)

我正在举一个选择性的例子来展示你可以如何进行。

假设您的数据如下所示

![在此处输入图像描述](../Images/19e3fb0b6c0cf37d284fda0aea656bbc.png)

现在，创建数据的 Pivot。这将为您提供唯一的帐号。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/959f6d6dbcab64be4d18b508d86a4366.png)

然后创建一个带有相应标题的表格，如屏幕截图所示，然后从您的数据透视表中复制并粘贴唯一的帐号。

![在此处输入图像描述](../Images/b1dfbc603ad01707a0fadcdf5a7ba988.png)

现在您已准备好提取数据。所以按照上面的截图在单元格中输入这个公式`B13`。请注意，这是一个数组公式。你必须按`CTL`+ `SHIFT`+`ENTER`

```
=INDEX($D$2:$D$5,MATCH(1,($C$2:$C$5=B12)*($A$2:$A$5=A13),0)) 
```

![在此处输入图像描述](../Images/ec836ea22cdcc6172d2c21b7010de9fe.png)

其余的只需这样做:)

# ios - 即时更改 UIPopoverController

> ID：15684553
> 
> 赞同：0
> 
> 时间：2013-03-28T14:32:25.013
> 
> 标签：ios, cocoa-touch, uipopovercontroller

一个 UIPopoverviewController 当前可见....
它的 ViewController 包含一个按钮，单击该按钮会将 PopoverviewController 的 viewController 更改为其他一些 viewController。

效果很好，viewController 更改成功......
但 PopoverViewController 的 contentsize 仍然相同

让我们手动更改 contentSize第 1 步
：视图控制器已更改
第 2 步：popoverviewController.popovercontentSize = CGSizeMake(500,500);

:( 尺寸仍然没有变化

注意：两个视图控制器都加载成功并且如果弹出框的内容大小足够大以容纳两者，那么两个视图控制器都是可见的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:44:48.457

`[UIViewController contentSizeForViewInPopover]`只读一次 - 显示弹出框时。您可以将其视为弹出框控制器大小的初始值。

但是，一旦显示弹出框，即使您更改了`contentViewController`.
你必须`[UIPopoverController setPopoverContentSize:animated:]`改用。

```
UIPopoverController* popover = [... already existing and visible popover ...];
UIViewController* newPopoverContents = [... new content for the popover ...];

[popover setPopoverContentSize:newPopoverContents.contentSizeForViewInPopover
                      animated:YES];
[popover setContentViewController:newPopoverContents 
                         animated:YES]; 
```

# entity-framework - 如何按照约定首先删除代码中外键字段的下划线

> ID：15684555
> 
> 赞同：51
> 
> 时间：2013-03-28T14:32:28.123
> 
> 标签：entity-framework, naming-conventions, code-first, entity-framework-6

我的项目中有多个课程（包括 TPT）。每个 POCO 都有一个`BaseClass`，它有一个`GUID`（称为`GlobalKey`）作为主键。

首先，我用来`DataAnnotations`创建正确的外键。但是我在将相应的 GUID 与对象本身同步时遇到了问题。

现在我只想拥有一个虚拟导航属性，以便数据库中的 GUID 字段由`NamingConvention`. 但是字段名称总是加一个下划线，后跟单词`GlobalKey`（这是正确的）。当我想删除下划线时，我不想通过 fluent API 中的所有 POCO 来执行此操作：

```
// Remove underscore from Navigation-Field     
modelBuilder.Entity<Person>()
            .HasOptional(x => x.Address)
            .WithMany()
            .Map(a => a.MapKey("AddressGlobalKey")); 
```

通过覆盖约定为所有 POCOS 执行此操作的任何想法？

提前致谢。

安德烈亚斯

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-08-15T01:59:32.263

通过编写自定义约定，我终于找到了答案。这个约定在 EF 6.0 RC1（上周的代码）中有效，所以我认为在 EF 6.0 发布后它可能会继续有效。

使用这种方法，标准 EF 约定识别独立关联 (IA)，然后为外键字段创建 EdmProperty。然后这个约定出现并重命名外键字段。

```
/// <summary>
/// Provides a convention for fixing the independent association (IA) foreign key column names.
/// </summary>
public class ForeignKeyNamingConvention : IStoreModelConvention<AssociationType>
{

    public void Apply(AssociationType association, DbModel model)
    {
        // Identify a ForeignKey properties (including IAs)
        if (association.IsForeignKey)
        {
            // rename FK columns
            var constraint = association.Constraint;
            if (DoPropertiesHaveDefaultNames(constraint.FromProperties, constraint.ToRole.Name, constraint.ToProperties))
            {
                NormalizeForeignKeyProperties(constraint.FromProperties);
            }
            if (DoPropertiesHaveDefaultNames(constraint.ToProperties, constraint.FromRole.Name, constraint.FromProperties))
            {
                NormalizeForeignKeyProperties(constraint.ToProperties);
            }
        }
    }

    private bool DoPropertiesHaveDefaultNames(ReadOnlyMetadataCollection<EdmProperty> properties, string roleName, ReadOnlyMetadataCollection<EdmProperty> otherEndProperties)
    {
        if (properties.Count != otherEndProperties.Count)
        {
            return false;
        }

        for (int i = 0; i < properties.Count; ++i)
        {
            if (!properties[i].Name.EndsWith("_" + otherEndProperties[i].Name))
            {
                return false;
            }
        }
        return true;
    }

    private void NormalizeForeignKeyProperties(ReadOnlyMetadataCollection<EdmProperty> properties)
    {
        for (int i = 0; i < properties.Count; ++i)
        {
            string defaultPropertyName = properties[i].Name;
            int ichUnderscore = defaultPropertyName.IndexOf('_');
            if (ichUnderscore <= 0)
            {
                continue;
            }
            string navigationPropertyName = defaultPropertyName.Substring(0, ichUnderscore);
            string targetKey = defaultPropertyName.Substring(ichUnderscore + 1);

            string newPropertyName;
            if (targetKey.StartsWith(navigationPropertyName))
            {
                newPropertyName = targetKey;
            }
            else
            {
                newPropertyName = navigationPropertyName + targetKey;
            }
            properties[i].Name = newPropertyName;
        }
    }

} 
```

请注意，使用以下命令将约定添加到您`DbContext`的`DbContext.OnModelCreating`覆盖中：

```
modelBuilder.Conventions.Add(new ForeignKeyNamingConvention()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T17:15:10.127

您可以执行以下两项操作之一：

1.  在外键命名时遵循 EF 约定，即如果您有 virtual `Address`，请将您的 key 属性定义为`AddressId`

2.  明确告诉 EF 使用什么。一种方法是使用 Fluent API，就像您目前正在做的那样。不过，您也可以使用数据注释：

    ```
    [ForeignKey("Address")]
    public int? AddressGlobalKey { get; set; }

    public virtual Address Address { get; set; } 
    ```

那是你唯一的选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-10T13:29:58.783

我知道这有点老了，但这是我如何通过我的流利配置（OnModelCreating）指定映射列的示例：

```
modelBuilder.Entity<Application>()
            .HasOptional(c => c.Account)
                .WithMany()
                .Map(c => c.MapKey("AccountId")); 
```

希望这可以帮助，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-05T03:58:53.510

当字段的类型关闭时，我也看到了同样的问题。仔细检查字段 Ex 的类型：

```
public string StateId {get;set;} 
```

指向以 int 作为 State.Id 类型的域对象。确保您的类型相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T15:58:41.577

我发现键列自定义没有被 ForeignKeyNamingConvention 捕获。做这个改变是为了抓住他们。

```
private bool DoPropertiesHaveDefaultNames(ReadOnlyMetadataCollection<EdmProperty> properties, string roleName, ReadOnlyMetadataCollection<EdmProperty> otherEndProperties)
{
    if (properties.Count == otherEndProperties.Count)
    {
        for (int i = 0; i < properties.Count; ++i)
        {
            if (properties[i].Name.EndsWith("_" + otherEndProperties[i].Name))
            {
                return true;
            }
            else
            {
                var preferredNameProperty =
                    otherEndProperties[i]
                        .MetadataProperties
                        .SingleOrDefault(x => x.Name.Equals("PreferredName"));

                if (null != preferredNameProperty)
                {
                    if (properties[i].Name.EndsWith("_" + preferredNameProperty.Value))
                    {
                        return true;
                    }
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-23T10:53:03.400

将它与 EntityNameId 的 id 命名约定结合使用时出现问题。

当使用以下约定来确保 Customer 表具有 CustomerId 而不是简单的 Id。

```
modelBuilder.Properties()
                        .Where(p => p.Name == "Id")
                        .Configure(p => p.IsKey().HasColumnName(p.ClrPropertyInfo.ReflectedType == null ? "Id" : p.ClrPropertyInfo.ReflectedType.Name +"Id")); 
```

外键命名约定需要更改为以下内容。

```
 /// <summary>
    /// Provides a convention for fixing the independent association (IA) foreign key column names.
    /// </summary>
    public class ForeignKeyNamingConvention : IStoreModelConvention<AssociationType>
    { 
        public void Apply(AssociationType association, DbModel model) 
        { 
            // Identify ForeignKey properties (including IAs)  
            if (!association.IsForeignKey) return;

            // rename FK columns  
            var constraint = association.Constraint; 
            if (DoPropertiesHaveDefaultNames(constraint.FromProperties, constraint.ToProperties)) 
            { 
                NormalizeForeignKeyProperties(constraint.FromProperties); 
            } 

            if (DoPropertiesHaveDefaultNames(constraint.ToProperties, constraint.FromProperties)) 
            { 
                NormalizeForeignKeyProperties(constraint.ToProperties); 
            }
        } 

        private static bool DoPropertiesHaveDefaultNames(IReadOnlyList<EdmProperty> properties, IReadOnlyList<EdmProperty> otherEndProperties) 
        { 
            if (properties.Count != otherEndProperties.Count) 
            { 
                return false; 
            } 

            for (var i = 0; i < properties.Count; ++i)
            {
                if (properties[i].Name.Replace("_", "") != otherEndProperties[i].Name) 
                { 
                    return false; 
                } 
            } 

            return true; 
        } 

        private void NormalizeForeignKeyProperties(ReadOnlyMetadataCollection<EdmProperty> properties) 
        { 
            for (var i = 0; i < properties.Count; ++i) 
            { 
                var underscoreIndex = properties[i].Name.IndexOf('_'); 
                if (underscoreIndex > 0) 
                { 
                    properties[i].Name = properties[i].Name.Remove(underscoreIndex, 1); 
                }                 
            } 
        } 
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-05T16:02:46.210

这些答案中的大多数都与独立关联（定义了“MyOtherTable”导航属性，但没有定义“int MyOtherTableId”）而不是外键关联（定义了两者）有关。

这很好，因为问题是关于 IA（它使用 MapKey），但我在寻找 FKA 相同问题的解决方案时遇到了这个问题。由于其他人可能出于同样的原因来到这里，我想我会分享我使用 ForeignKeyDiscoveryConvention 的解决方案。

[https://stackoverflow.com/a/43809004/799936](https://stackoverflow.com/a/43809004/799936)

# django - 在运行时为表单向导设置选项和表单？

> ID：15684557
> 
> 赞同：1
> 
> 时间：2013-03-28T14:32:31.330
> 
> 标签：django, python-2.7, django-forms, django-formwizard

我正在尝试使用表单向导，但我不知道在哪里设置字段的选项。

```
#views.py
class QuizWizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        return render_to_response('done.html', {
            'form_data':[form.cleaned_data for form in form_list],
        })

#forms.py
class QuestionForm(forms.ModelForm):
    #selection = forms.ChoiceField()
    class Meta:
        model = Question 
```

我看到一个空表单，看起来像是添加对象的管理面板。我希望能够将问题传递给表单并填写问题字段且不可编辑且最好不要提交。

如果我做

```
(r'^(?P<quiz_id>\d+)', QuizWizard.as_view(get_form_list)), 
```

函数 get_form_list 没有长度

```
(r'^(?P<quiz_id>\d+)', QuizWizard.as_view(get_form_list(quiz_id))), 
```

Quiz_id 未知。

所以现在我正在尝试将 quiz_id 传递给视图函数并生成要在表单向导中使用的问题表单列表

# 网址.py

```
url(r'^(?P<quiz_id>\d+)', 'quiz.views.get_form_list'), 
```

# 视图.py

```
class QuizWizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        return render_to_response('done.html', {
            'form_data':[form.cleaned_data for form in form_list],
        })

def get_form_list(request, quiz_id):
    quiz = Quiz.objects.get(id=quiz_id)

    question_forms = []

    for question in quiz.questions.all():        
        choices = []
        for choice in question.choices.all():
            choices.append(choice)
        f = QuestionForm(instance=question)        
        question_forms.append(f)

    return QuizWizard.as_view(question_forms)(request) 
```

我收到错误消息

```
issubclass() arg 1 must be a class 
```

**根据 Rohan 的回答更新：**

```
def get_form_list(request, quiz_id):
    quiz = Quiz.objects.get(id=quiz_id)

    question_forms = []

    for question in quiz.questions.all():        
        choices = []
        for choice in question.choices.all():
            choices.append(choice)
        f = QuestionForm(instance=question)        
        question_forms.append(f)

    inst_dict = {}
    for idx, question in enumerate(question_forms):
        inst_dict[str(idx)] = question
    print inst_dict
    #inst_dict = { str(index(x)) : x for x in question_forms}

    QuestFormList = []
    for i in range(len(question_forms)):    
        QuestFormList.append(QuestionForm)

    QuizWizard.as_view(QuestFormList, instance_dict=inst_dict)(request) 
```

使用此代码，我收到错误

```
'ModelFormOptions' object has no attribute 'many_to_many' 
```

这是我的models.py

```
class Choice(models.Model):
    choice = models.CharField(max_length=64)
    def __unicode__(self):
        return self.choice

#create a multiple choice quiz to start
class Question(models.Model):
    question = models.CharField(max_length=64)
    answer = models.CharField(max_length=64)
    choices = models.ManyToManyField(Choice)
    module = models.CharField(max_length=64)

    def __unicode__(self):
        return self.question

class Quiz(models.Model):
    name = models.CharField(max_length=64)
    questions = models.ManyToManyField(Question)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:40:18.160

您应该使用类而不是对象来调用它。所以把你的电话改成

```
QuizWizard.as_view(question_forms)(request) 
```

更新：

向导视图将表单类列表作为参数而不是表单实例。您正在创建表单实例`question_forms`并将其传递给视图。

如果你想在每一步中为表单传递实例，你可以传递`instance_dict`. 就像是 ...

```
inst_dict = { '0': question_forms[0], #step 0 instance
              '1': question_forms[1], #step 1 instance
            }
QuestFormList = [QuestionForm, QuestionForm ...]
QuizWizard.as_view([QuestFormList, instance_dict=inst_dict)(request) 
```

# shell - 使用awk解析源码

> ID：15684563
> 
> 赞同：1
> 
> 时间：2013-03-28T14:32:42.447
> 
> 标签：shell, unix, sed, awk, gawk

我正在寻找从我拥有的源代码创建文档。我一直在环顾四周，像 awk 这样的东西似乎会起作用，但到目前为止我还没有运气。信息分为两个文件，`file1.c`和`file2.c`.

*注意*：我已经为程序设置了一个自动构建环境。这会检测源中的更改并构建它。我想生成一个文本文件，其中包含自上次成功构建以来已修改的所有变量的列表。我正在寻找的脚本将是构建后步骤，并将在编译后运行

在`file1.c`我有一个函数调用列表（所有相同的函数），它们有一个字符串名称来识别它们，例如：

```
newFunction("THIS_IS_THE_STRING_I_WANT", otherVariables, 0, &iAlsoNeedThis);
newFunction("I_WANT_THIS_STRING_TOO", otherVariable, 0, &iAnotherOneINeed);
etc... 
```

函数调用中的第四个参数包含 中字符串名称的值`file2`。例如：

```
iAlsoNeedThis = 25;
iAnotherOneINeed = 42;
etc... 
```

我希望将列表输出到以下格式的 txt 文件：

```
THIS_IS_THE_STRING_I_WANT = 25
I_WANT_THIS_STRING_TOO = 42 
```

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:50:52.077

这是一个开始：

```
NR==FNR {                     # Only true when we are reading the first file
    split($1,s,"\"")          # Get the string in quotes from the first field
    gsub(/[^a-zA-Z]/,"",$4)   # Remove the none alpha chars from the forth field
    m[$4]=s[2]                # Create array 
    next
}
$1 in m {                     # Match feild four from file1 with field one file2
    sub(/;/,"")               # Get rid of the ;
    print m[$1],$2,$3         # Print output
} 
```

保存`script.awk`并使用您的示例运行它会产生：

```
$ awk -f script.awk file1 file2
THIS_IS_THE_STRING_I_WANT = 25
I_WANT_THIS_STRING_TOO = 42 
```

**编辑：**

您需要的修改会影响脚本的第一行：

```
NR==FNR && $3=="0," && /start here/,/end here/ { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:36:17.733

您可以执行文件`file2.c`，以便在 bash 中定义变量。然后，您只需打印`$iAlsoNeedThis`即可从中获得价值`iAlsoNeedThis = 25;`

可以用`. file2.c`.

然后，您可以做的是：

```
while read line;
do
    name=$(echo $line | cut -d"\"" -f2);
    value=$(echo $line | cut -d"&" -f2 | cut -d")" -f1);
    echo $name = ${!value};
done < file1.c 
```

获取`THIS_IS_THE_STRING_I_WANT`,`I_WANT_THIS_STRING_TOO`文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:52:40.897

您可以像这样在外壳中执行此操作。

```
#!/bin/sh

eval $(sed 's/[^a-zA-Z0-9=]//g' file2)

while read -r line; do
  case $line in
    (newFunction*)
      set -- $line
      string=${1#*\"}
      string=${string%%\"*}
      while test $# -gt 1; do shift; done
      x=${1#&}
      x=${x%);}
      eval x=\$$x
      printf '%s = %s\n' $string $x
   esac
done < file1.c 
```

假设： newFunction 位于行首。后面没有任何内容`);`。空白与您的示例完全相同。输出

```
THIS_IS_THE_STRING_I_WANT = 25
I_WANT_THIS_STRING_TOO = 42 
```

# jquery - 为图像保留（或设置）box-shadow inset

> ID：15684566
> 
> 赞同：0
> 
> 时间：2013-03-28T14:32:46.580
> 
> 标签：jquery, css, insets

我想为图像设置一个盒子阴影插图。这对于图像是不可能的，所以我搜索了解决方法，发现这是其中之一：[JsFiddle](http://jsfiddle.net/WpGsx/34/)

问题是跨度对图像有很好的包裹，但是如果图像的样式包括边距或填充，那么跨度不适合图像，如您在示例中所见。

那么我该怎么做才能使跨度始终包裹图像而没有边距的空白呢？如果有更好的方法，请告诉我。

CSS

```
.image-wrap {
    position: relative;
    display: inline-block;
    max-width: 100%;
    vertical-align: bottom;
}
.image-wrap:after {
    content: ' ';
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
        box-shadow: inset 0px 0px 0px 5px red;
}

.image-wrap img {   
    width:300px;
    margin-left:150px;
} 
```

jQuery

```
$('img').each(function() {
    var imgClass = $(this).attr('class');
    $(this).wrap('<span class="image-wrap ' + imgClass + '" style="width: auto; height: auto;"/>');
    $(this).removeAttr('class');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:41:14.630

在这种特定情况下有效的一种方法是手动将`margin-left`img 移动到父跨度：

```
$('img').each(function () {
    var imgClass = $(this).attr('class');
    $(this).wrap('<span class="image-wrap ' + imgClass + '" style="width: auto; height: auto;"/>').removeClass(imgClass)
        .parent().css('margin-left',$(this).css('margin-left')).end()
        .css('margin-left',0);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:04:11.357

`**[LIVE DEMO](http://jsbin.com/ilodic/7/edit)**`

```
$('img').each(function() {
    $(this).wrap('<span class="image-wrap ' + this.className + '"/>').removeAttr('style');
    this.className='';
}); 
```

CSS：

```
.img1{
  width:300px;
  border:3px solid #f00;
  margin-left:40px;       /* NOTE THE IMAGE MARGIN ! */
}

.image-wrap{
  position:relative;
  display:inline-block;
  box-shadow: inset 0px 0px 20px #f00;
}

.image-wrap img{
   position:relative;
   width:100%;
   z-index:-1;
} 
```

# c# - pdf文件提取期间的solr延迟加载错误

> ID：15684567
> 
> 赞同：1
> 
> 时间：2013-03-28T14:32:49.097
> 
> 标签：c#, apache, solr, solrnet, bitnami

我正在使用 solr 来索引 pdf 和 doc 文件。我正在使用 bitnami 堆栈（[http://bitnami.com/stack/solr](http://bitnami.com/stack/solr)）

现在我将以下代码添加到我的 c# 应用程序中：

```
 string filecontent = null;

    using (var file = File.OpenRead(@"C:\\cookbook.pdf"))
    {
        var response = solr.Extract(new ExtractParameters(file, "abcd1")
        {
            ExtractOnly = true,
            ExtractFormat = ExtractFormat.Text,
        });

        filecontent = response.Content;
    }
    solr.Commit(); 
```

这就是我到目前为止所做的，请参阅[来自 C# 客户端的 Solr 中的索引 pdf 文档](https://stackoverflow.com/questions/8935060/index-pdf-documents-in-solr-from-c-sharp-client)

不幸的是，我总是遇到以下异常：

```
SolrNet.Exceptions.SolrConnectionException was unhandled
  HResult=-2146232832
  Message=<?xml version="1.0" encoding="UTF-8"?>
<response>
<lst name="error"><str name="msg">lazy loading error</str><str name="trace">org.apache.solr.common.SolrException: lazy loading error
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWrappedHandler(RequestHandlers.java:258)
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:240)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1797)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:637)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:343)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:141)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:642)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.solr.common.SolrException: Error loading class 'solr.extraction.ExtractingRequestHandler'
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:440)
    at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:519)
    at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:593)
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWrappedHandler(RequestHandlers.java:249)
    ... 30 more
Caused by: java.lang.ClassNotFoundException: solr.extraction.ExtractingRequestHandler
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:789)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:266)
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:424)
    ... 33 more
</str><int name="code">500</int></lst>
</response>

  Source=SolrNet
  Url=http://berserkerpc:444/solr/update/extract?literal.id=abcd1&resource.name=C:%5ccookbook.pdf&extractOnly=true&extractFormat=text&version=2.2
  StackTrace:
       bei SolrNet.Impl.SolrConnection.PostStream(String relativeUrl, String contentType, Stream content, IEnumerable`1 parameters) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrConnection.cs:Zeile 119.
       bei SolrNet.Commands.ExtractCommand.Execute(ISolrConnection connection) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Commands\ExtractCommand.cs:Zeile 36.
       bei SolrNet.Impl.SolrBasicServer`1.Send(ISolrCommand cmd) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrBasicServer.cs:Zeile 102.
       bei SolrNet.Impl.SolrBasicServer`1.SendAndParseExtract(ISolrCommand cmd) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrBasicServer.cs:Zeile 106.
       bei SolrNet.Impl.SolrBasicServer`1.Extract(ExtractParameters parameters) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrBasicServer.cs:Zeile 83.
       bei SolrNet.Impl.SolrServer`1.Extract(ExtractParameters parameters) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrServer.cs:Zeile 133.
       bei SolrTest.Program.IndexPDFFile(ISolrOperations`1 solr) in c:\Users\troth\Desktop\SolrTest\SolrTest\Program.cs:Zeile 35.
       bei SolrTest.Program.Main(String[] args) in c:\Users\troth\Desktop\SolrTest\SolrTest\Program.cs:Zeile 21.
       bei System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       bei System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       bei Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       bei System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       bei System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.Net.WebException
       HResult=-2146233079
       Message=Der Remoteserver hat einen Fehler zurückgegeben: (500) Interner Serverfehler.
       Source=System
       StackTrace:
            bei System.Net.HttpWebRequest.GetResponse()
            bei HttpWebAdapters.Adapters.HttpWebRequestAdapter.GetResponse() in c:\Users\troth\Desktop\SolrNet-master\HttpWebAdapters\Impl\HttpWebRequestAdapter.cs:Zeile 36.
            bei SolrNet.Impl.SolrConnection.GetResponse(IHttpWebRequest request) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrConnection.cs:Zeile 193.
            bei SolrNet.Impl.SolrConnection.PostStream(String relativeUrl, String contentType, Stream content, IEnumerable`1 parameters) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrConnection.cs:Zeile 111.
       InnerException: 
```

任何提示我可以做些什么来解决这个问题？

谢谢，特罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:06:11.707

在检查错误日志时，这似乎是这里的主要问题：

> 引起：org.apache.solr.common.SolrException：加载类“solr.extraction.ExtractingRequestHandler”时出错

Solr 似乎无法加载 solr.extraction.ExtractingRequestHandler 类。

您是否按照您提供的链接中的步骤将 Solr Cell 和提取 jar 文件添加到您的 Solr 安装可以从中加载它们的库文件夹中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:34:21.370

知道了！问题出在 solrconfig.xml 文件中。我不得不粘贴以下代码：

```
<lib dir="../../extract" regex=".*\.jar" />

  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler> 
```

感谢您的帮助！

特罗

# php - SimpleXML 访问元素 - PHP

> ID：15684572
> 
> 赞同：0
> 
> 时间：2013-03-28T14:33:19.073
> 
> 标签：php, namespaces, simplexml

我试图进入`<err:Errors>`位于下面的 SOAP 中。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header/>
    <soapenv:Body>
        <soapenv:Fault>
            <faultcode>Client</faultcode>
            <faultstring>An exception has been raised as a result of client data.</faultstring>
            <detail>
                <err:Errors xmlns:err="http://www.ups.com/XMLSchema/XOLTWS/Error/v1.1">
                    <err:ErrorDetail>
                        <err:Severity>Hard</err:Severity>
                        <err:PrimaryErrorCode>
                            <err:Code>120802</err:Code>
                            <err:Description>Address Validation Error on ShipTo address</err:Description>
                        </err:PrimaryErrorCode>
                    </err:ErrorDetail>
                </err:Errors>
            </detail>
        </soapenv:Fault>
    </soapenv:Body>
</soapenv:Envelope> 
```

这是我尝试执行的操作，但 $fault_errors->Errors 没有任何内容。

```
$nameSpaces = $xml->getNamespaces(true);
$soap = $xml->children($nameSpaces['soapenv']);
$fault_errors = $soap->Body->children($nameSpaces['err']);

if (isset($fault_errors->Errors)) {
    $faultCode = (string) $fault_errors->ErrorDetail->PrimaryErrorCode->Code;               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:50:35.517

您可以使用 XPath 进行搜索：

```
$ns = $xml->getNamespaces(true);
$xml->registerXPathNamespace('err', $ns['err']);

$errors = $xml->xpath("//err:Errors");
echo $errors[0]->saveXML(); // prints the tree 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:36:41.463

您正试图一次跳下 XML 中的几个步骤。`->`运算符和`->children()`方法只返回*直接子代*，而不是任意后代。

如另一个答案所述，您可以使用XPath向下跳转，但是如果您确实要遍历，则需要注意您传递的每个节点的命名空间，并`->children()`在更改时再次调用。

下面的代码逐步分解它（[现场演示](http://codepad.viper-7.com/UVwc2y)）：

```
$sx = simplexml_load_string($xml);
// These are all in the "soapenv" namespace
$soap_fault = $sx->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->Fault;
// These are in the (undeclared) default namespace (a mistake in the XML being sent)
echo (string)$soap_fault->children(null)->faultstring, '<br />';
$fault_detail = $soap_fault->children(null)->detail;
// These are in the "err" namespace
$inner_fault_code = (string)$fault_detail->children('http://www.ups.com/XMLSchema/XOLTWS/Error/v1.1')->Errors->ErrorDetail->PrimaryErrorCode->Code;               
echo $inner_fault_code, '<br />'; 
```

当然，您可以一次性完成部分或全部操作：

```
$inner_fault_code = (string)
    $sx
    ->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->Fault
    ->children(null)->detail
    ->children('http://www.ups.com/XMLSchema/XOLTWS/Error/v1.1')->Errors->ErrorDetail->PrimaryErrorCode->Code;               
echo $inner_fault_code, '<br />'; 
```

# c# - 即使在安装和注册提供程序之后，也会出现错误“'VFPOLEDB.1'提供程序未在本地计算机上注册”

> ID：15684575
> 
> 赞同：13
> 
> 时间：2013-03-28T14:33:34.220
> 
> 标签：c#, com, windows-services, visual-foxpro

好的，所以我有一个 Windows 服务，它有一个`FileSystemWatcher`监视一些 Visual FoxPro 数据库文件的输出文件夹。它利用`VFPOLEDB.1`提供者来读取这些文件。**我不能离开这个提供商，因为它正在生产中使用。**

但是，我以前从未支持过这个应用程序，所以这就是为什么我的开发箱没有为它设置。这是我的环境：

*   视窗 7 x64
*   视觉工作室 2005
*   .NET 2.0 Windows 服务

所以，当我第一次开始收到错误时，我认为我根本没有提供程序，我是对的。所以，我[从这里](http://www.microsoft.com/downloads/details.aspx?FamilyId=E1A87D8F-2D58-491F-A0FA-95A3289C5FD4&displaylang=en)下载并安装了它。

然后我再次将文件放入文件夹中，但我得到了**同样的错误。**

我想是因为它是一`x64`台机器，我可能在注册时遇到问题，因为它可能被放入`SysWOW64`，并且正如我预期的那样，所以我运行了这个命令：

```
regsvr32 "C:\Windows\SysWOW64\mscomct2.ocx" 
```

它说它已成功注册（这意味着没什么大笑）但我再次将文件放入 -**同样的错误。**

我还没有重新启动我的机器，如果有人有令人信服的理由，我可以重新启动，但一般来说，如果程序集已正确注册`regsvr32`，则没有必要。我已经使用了**大量**的 COM 对象，只要我已经注册了它，就不必重新启动才能访问该对象。

**有人知道我需要执行的另一个步骤来注册这个东西吗？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-28T14:41:58.733

它已按应有的方式注册。为 AnyCPU 平台编译的是您的应用程序。
在 x64 操作系统中，这会产生 64 位代码，而 64 位代码无法访问 32 位驱动程序。

将您的平台更改为 x86，您会没事的。

**编辑**
两年后，这个答案有一些补充。现在有了 Visual Studio 2013，[奶酪已经被移动了](http://blogs.microsoft.co.il/sasha/2012/04/04/what-anycpu-really-means-as-of-net-45-and-visual-studio-11/)。链接的文章详细解释了编译器设置默认值是如何更改的。`AnyCPU`目标 CPU意味着您的`Prefer 32 bit`应用程序也可以在 x64 位操作系统中作为 32 位应用程序工作，除非特别需要，否则几乎没有空间给 x64 应用程序。

有了这种新配置，记住 Mark Berry 在下面的评论中发布的内容也变得很重要。如果您的（现在是 32 位）应用程序需要在 IIS 64 位环境中工作，您需要设置`Application Pool`with`Enable 32 bit Applications`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-19T21:48:40.627

我有桌面应用程序（Win7 x64 VS 2015） - 无论如何都会遇到相同的错误。我将平台目标更改为 x86，以管理员身份安装 MSI 等——尽我所能谷歌搜索——但没有运气。帮助我的是为**所有人**而不是为**我**安装 MSI - 安装程序中最后一个向导的屏幕之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T06:03:59.370

我也有同样的问题。

我`VFP Ole DB Provider`在我的系统中安装并解决了。

[下载链接](http://www.microsoft.com/downloads/details.aspx?FamilyId=E1A87D8F-2D58-491F-A0FA-95A3289C5FD4&displaylang=en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-07T14:07:24.100

使用[Advantage OLE DB Provider](http://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=19&Product=15)，适用于 32 或 64，[这里](https://www.connectionstrings.com/advantage-ole-db-provider/)是连接字符串

# maven - Maven需要JDK吗

> ID：15684584
> 
> 赞同：6
> 
> 时间：2013-03-28T14:33:57.410
> 
> 标签：maven

我是 Maven、Java 的新手……当我`mvn clean package`对 Java 项目进行操作时，它确实为我创建了 JAR 文件。

但是我仍然如何知道我是否有 JDK 还是仍然是 JRE？

我在 OSX 10.8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T14:45:41.373

Maven 需要 JDK，而不是 JRE。

执行此操作以获取有关您安装的 Java 版本的更多信息：

```
echo $JAVA_HOME
echo $PATH
which java
java -version
mvn --version 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:45:53.917

Maven 需要 JDK 进行编译。

要检查您是否有 JDK 编译器，您可以`javac`在终端中键入：

# java - 如何将序列化文件加载回arrayList

> ID：15684586
> 
> 赞同：3
> 
> 时间：2013-03-28T14:33:58.537
> 
> 标签：java, arraylist, load, jlist, serializable

我已经在这个问题上查看了一些问题，但无法解决我的问题。

正如您在下面看到的，我通过序列化将我的`Patient ArrayList`（`pList`- 在类的顶部是私有的）中的所有对象保存到“Patient.ser”文件中。据我所知，这是没有问题的。“ `patSizeAtSave`”是一个私有变量，我在加载文件时用来标记为绑定使用（见下文）

“ `patModel`”是我在我的中`DefaultListModel`使用的，所以我尝试用添加回的内容填充这些列表`JLists``GUI``Patient ArrayList(pList)`

**我的问题**：当我点击加载按钮时，`GUI`它会调用`loadPatientList()`下面的方法，但我的 JLists 中没有任何内容，所以我无法判断它是否有效。

有想法该怎么解决这个吗？

```
private void savePatientList() throws FileNotFoundException {
    try
    {
    FileOutputStream fs = new FileOutputStream("Patient.ser");
    ObjectOutputStream os = new ObjectOutputStream(fs);
    for(Patient p: pList)
    {
        os.writeObject(p);
    }
    fs.close();
    os.close();
    patSizeAtSave = pList.size();
    JOptionPane.showMessageDialog(jTabPane, "Save Complete!", "Notification", JOptionPane.INFORMATION_MESSAGE);
    } 
    catch (IOException ex) {
        Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
    } 

}
private void loadPatientList()
{
    FileInputStream fs;
    ObjectInputStream is;
    try
    {
    fs = new FileInputStream("Patient.ser");
    is = new ObjectInputStream(fs);

    for(int i = 0; i < patSizeAtSave; i++)
    {
        Patient p = (Patient) is.readObject();
        pList.add(p);
        patModel.addElement(p.getPNo() + ": " + p.getPName());
    }
    jListPatient.setModel(patModel);
    jListPatient2.setModel(patModel);
    fs.close();
    is.close();
    } 
    catch (FileNotFoundException ex) {
        Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException | ClassNotFoundException ex) {
        Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:52:57.747

您是否尝试在保存后将患者列表加载到同一个 JVM 中（不退出 JVM）？因为如果您在重新加载患者列表之前退出 JVM，您的 patSizeAtSave 将被重置为 0（因为它不会保存到任何文件/永久存储中），而只会在内存中。当您在新的 JVM 中调用 loadPatientList 时，您的 for 循环将不会加载任何患者，因为 patSizeAtSave 为 0。

您应该保存整个列表 pList（假设您使用 List 的 Serializable 实现，例如 ArrayList / LinkedList），如下所示：

```
FileOutputStream fs = new FileOutputStream("Patient.ser");
ObjectOutputStream os = new ObjectOutputStream(fs);
os.writeObject(pList); 
```

并将其加载回来：

```
pList = (List<Patient>) is.readObject();
for(Patient p: pList)
{
    patModel.addElement(p.getPNo() + ": " + p.getPName());
} 
```

这样，列表大小也将保存在您的序列化文件中。

问候

# jquery - jquery移动加载php脚本

> ID：15684588
> 
> 赞同：0
> 
> 时间：2013-03-28T14:34:06.673
> 
> 标签：jquery, jquery-mobile

我有一个带有图像的页面。

如果用户位于页面末尾，则会加载更多内容，因此如果用户位于页面末尾并且可以继续阅读，则内容会扩展。

我的问题是，当我得到内容时。

```
 <a data-role="button" data-theme="b" href="/ref">
        Title
  </a> 
```

html 看起来是正确的，但它没有获得按钮的样式。它没有风格。

它看起来像一个旧链接（蓝色下划线）

我用 ：

```
var url = "more.php?p=" + nextpage;

$.post(url, function (data) {

    $('#all').children().last().after(data);
    alreadyloading = false;
    nextpage++;
}); 
```

加载 div #all 中的内容

但我发现样式改变了，因为我添加了

```
 id="all" 
```

到

```
 <div data-role="content" > 
```

但我需要一个 div id 来加载脚本 more.php 我该怎么做？所以我想保留样式但在 div 中加载内容。

如果我删除 id="all" 并将 html 粘贴到 div 中：

像

```
 <div data-role="content" >

 <a data-role="button" data-theme="b" href="link.php?id=26" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-btn-up-b ui-shadow ui-btn-corner-all"><span class="ui-btn-inner ui-btn-corner-all">

 <span class="ui-btn-text">
 Title</span></span></a> 
```

有用。

但

```
 <div data-role="content" **id="all"** >

 <a data-role="button" data-theme="b" href="link.php?id=26" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-btn-up-b ui-shadow ui-btn-corner-all">

 <span class="ui-btn-inner ui-btn-corner-all">

 <span class="ui-btn-text">

 Title</span></span></a> 
```

不会工作

所以我的问题是如何在保持按钮样式的同时导入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:43:30.617

`create`加载新标记后，您可以在容器元素上触发事件：

```
$("#all").load("more.php?p=0", function() {
    $(this).trigger("create");
}); 
```

**编辑：**如果您使用[$.post()](http://api.jquery.com/jQuery.post/)而不是[load()](http://api.jquery.com/load/) ，则适用相同的策略：

```
$.post(url, function(data) {
    $("#all").append(data).trigger("create");
    alreadyloading = false;
    nextpage++;
}); 
```

# caching - IE 缓存问题，即使配置正确

> ID：15684596
> 
> 赞同：1
> 
> 时间：2013-03-28T14:34:34.130
> 
> 标签：caching, browser-cache

我向 www.mysite.com 发出 GET 请求，并在收到的标题中：

```
Cache-Control   no-cache, no-store, must-revalidate
Expires Thu, 01 Jan 1970 00:00:00 GMT
Pragma  no-cache 
```

否则，我会收到通知，一些访问者看不到我的网站，但上周发生了错误，现在已修复。似乎错误已缓存在他们的浏览器中，并且没有发出新请求。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:50:12.773

我相信浏览器（包括 IE）不会缓存整个页面，并且每次请求后都会重新加载 DOM。毕竟这些数据包含在请求中。

因此，您的访问者可能仍会遇到错误。您的修复是否依赖于 JS 或 CSS 等资源？在这种情况下，您可能会遇到缓存问题。

# python - Python For循环获取索引

> ID：15684605
> 
> 赞同：56
> 
> 时间：2013-03-28T14:34:45.467
> 
> 标签：python, loops, for-loop, indexing

我正在编写一个简单的 Python for 循环来打印字符串中的当前字符。但是，我无法获得角色的索引。这就是我所拥有的，有人知道在循环中获取角色当前索引的好方法吗？

```
 loopme = 'THIS IS A VERY LONG STRING WITH MANY MANY WORDS!'

 for w  in loopme:
    print "CURRENT WORD IS " + w + " AT CHARACTER " 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-28T14:35:23.680

使用该[`enumerate()`函数](http://docs.python.org/2/library/functions.html#enumerate)生成索引以及您正在循环的序列的元素：

```
for index, w in enumerate(loopme):
    print "CURRENT WORD IS", w, "AT CHARACTER", index 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T14:47:02.000

你想迭代字符或单词吗？

对于单词，您必须先拆分单词，例如

```
for index, word in enumerate(loopme.split(" ")):
    print "CURRENT WORD IS", word, "AT INDEX", index 
```

这将打印单词的索引。

对于绝对字符位置，您需要类似

```
chars = 0
for index, word in enumerate(loopme.split(" ")):
    print "CURRENT WORD IS", word, "AT INDEX", index, "AND AT CHARACTER", chars
    chars += len(word) + 1 
```

# java - Primefaces：ajax 导航和 dataTable 复选框选择

> ID：15684606
> 
> 赞同：0
> 
> 时间：2013-03-28T14:34:49.037
> 
> 标签：java, ajax, jsf, primefaces

我在我的应用程序中遇到复选框选择问题。我在一页上有一个数据表（index.xhtml）。在同一页面上有一个 ajax 按钮，当用户单击它时，应用程序应该导航到另一个页面（detail.xhtml）。详细信息页面包含用于导航回 index.xhtml 的返回按钮。导航有效，但是当用户从详细信息页面返回时，当用户单击它时不会检查 dataTable 中的行复选框（选择所有行的标题复选框有效）。当我重复场景（又名访问详细信息页面并返回）时，复选框再次起作用。第三次重复后，它们不再工作（因此每隔一次导航它们就不起作用）。当我在按钮上使用 ajax="false" 或 faces-redirect=true 时，一切正常。

使用 Mojarra 2.10.19、PF 3.5 和 Glassfish 3.2.1

为简单起见，我通过简单的示例重新创建问题：

索引.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"      
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui" >

<h:head></h:head>   
<h:body>
    <h:form>
        <p:commandButton value="Add" action="add" />
        <p:dataTable id="cars" var="car" value="#{tableBean.mediumCarsModel}" 
                     selection="#{tableBean.selectedItems}" >

            <p:column selectionMode="multiple" style="width: 2%" />

            <p:column headerText="Model">
                #{car.model}
            </p:column>

        </p:dataTable> 
    </h:form>    
</h:body> 
```

细节.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui" >

<h:head></h:head>

<h:body>
     <h:form>
      <p:commandButton value="Return" action="return" /> 
     </h:form>    
</h:body> 
```

TableBean.java

```
@ManagedBean
@SessionScoped
public class TableBean {    
    private final static String[] manufacturers;

    static { 
      manufacturers = new String[10];
      manufacturers[0] = "Mercedes";
      manufacturers[1] = "BMW";
      manufacturers[2] = "Volvo";
      manufacturers[3] = "Audi";
      manufacturers[4] = "Renault";
      manufacturers[5] = "Opel";
      manufacturers[6] = "Volkswagen";
      manufacturers[7] = "Chrysler";
      manufacturers[8] = "Ferrari";
      manufacturers[9] = "Ford";
    }

    private List<Car> carsSmall;    
    private CarDataModel mediumCarsModel;
    private List<Car> selectedItems; 

    public TableBean() {
        carsSmall = new ArrayList<Car>();
        populateRandomCars(carsSmall, 5);
        mediumCarsModel = new CarDataModel(carsSmall);
    }

    private void populateRandomCars(List<Car> list, int size) {
        for (int i = 0; i < size; i++) {
            list.add(new Car(manufacturers[i]));
        }
    }

    public List<Car> getSelectedItems() {
        return selectedItems;
    }

    public void setSelectedItems(List<Car> selectedItems) {        
        this.selectedItems = selectedItems;
    }

    public CarDataModel getMediumCarsModel() {        
        return mediumCarsModel;
    }
} 
```

CarDataModel.java

```
public class CarDataModel extends ListDataModel<Car> implements SelectableDataModel<Car> {  

    public CarDataModel(List<Car> data) {
        super(data);
    }

    @Override
    public Car getRowData(String rowKey) { 
        List<Car> cars = (List<Car>) getWrappedData();

        for(Car car : cars) {
            if(car.getModel().equals(rowKey)){                
                return car;
            }
        }
        return null;
    }

    @Override
    public Object getRowKey(Car car) {
        return car.getModel();
    }
} 
```

汽车.java

```
public class Car implements Serializable {

    private String model;

    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    public Car(String model) {
        this.model = model;
    }
} 
```

面孔-config.xml

```
<navigation-rule>
    <from-view-id>/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>add</from-outcome>
        <to-view-id>/detail.xhtml</to-view-id>
    </navigation-case>       
</navigation-rule>   

<navigation-rule>
    <from-view-id>/detail.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>return</from-outcome>
        <to-view-id>/index.xhtml</to-view-id>
    </navigation-case>       
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:14:50.663

您需要从 faces-config.xml 中删除**导航规则**以尝试以下操作...

**索引.xhtml**

```
<p:commandButton value="Add" action="#{tableBean.redirectToDetail}" /> 
```

**细节.xhtml**

```
<p:commandButton value="Return" action="#{tableBean.redirectToIndex}" /> 
```

**TableBean.java**

```
@ManagedBean(name = "tableBean")
...
...
...
public String redirectToDetail() {
    return "detail?faces-redirect=true";
}
public String redirectToIndex() {
    return "index?faces-redirect=true";
} 
```

# sql - SQL 破折号字符有什么作用？

> ID：15684612
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:35:03.303
> 
> 标签：sql, syntax

在我正在调试的 SQL 语句中，我发现了`-`一个我不认识的使用方式：

它出现在“Book_Balance”和“Participation_Lookups”之间的这个 SELECT 语句中

```
SELECT "LNIMPR"."Book_Balance" - "Participation_Lookups"."Participation Principal Assets" AS "C7" 
FROM ... 
```

`-`在上述情况下做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:36:28.400

它减去两列。

它们都必须是数值，并且在 SQL 中[减去](http://www.tizag.com/sqlTutorial/sqloperators.php)您使用减号`-`。

如果`Book_balance`是 100 和`Participation Principal Assets`25，那么它基本上是在说：

```
select 100 -25 as C7
from ... 
```

此计算针对返回的每一行进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:36:37.033

数字减法，如 10 - 4 = 6

# selenium - 测试数据应该从 PageObject 还是测试类传递？

> ID：15684621
> 
> 赞同：1
> 
> 时间：2013-03-28T14:35:31.730
> 
> 标签：selenium, webdriver, testng, pageobjects

我正在使用 Selenium Webdriver 开发自动化框架，遵循 PageObject 模式，其中有 2 层：

*   测试类（测试规范）
*   PageObject 类（测试实现）

我的测试类包含 TestNG 注释方法（`@Test`、`@BeforeTest`等`@AfterTest`），我在其中创建 PageObject 类的对象并调用这些类中的方法，这些方法实际上将与 AUT 交互。

我将数据传递给测试的方式是包括：

*   应用程序中元素的所有定位器（css​​/xpath/class/id 定位器）。
*   所需的所有测试数据

在属性文件中（例如：testDataSet1.properties）。我正在创建一个`HashMap<String, String>`属性文件并将其作为参数传递给所有页面对象，这些页面对象将从哈希图中读取数据并在脚本中使用它们。我根本没有从测试类传递测试数据。

我的问题是，我不确定在 PageObjects 中读取测试数据是否合适。我感觉这种方法非常不灵活，因为我将测试数据绑定到 PageObjects 而不是将其绑定到测试。因此，当我需要执行数据驱动测试/在多次迭代中运行自动化套件时，这将不起作用。因为，目前如果我每次都需要使用不同的数据，我需要手动去更改哈希图中指定的键，这将从属性文件中获取不同的值。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:49:45.387

我个人喜欢让页面对象充当网页本身，为我提供要执行的操作和要使用的验证方法。例如，我将所有的 CSS、ID 等选择器保存在页面对象本身中。这样，如果网页的更新破坏了测试，我只需转到该网页的相应页面对象并在那里更新选择器。

就测试数据而言，我还有一些其他文件（类、属性等）可用于从中提取测试数据。测试用户。测试类本身提取此测试数据并将其传递到页面对象（需要时）或用于验证目的的页面对象方法。

一个测试数据类的例子（我的有点复杂，但这是一个简单的例子）：

```
public TestUser(){
    username = getUniqueUser();
    password = ""; 
    name = "Test User";
    email = getUniqueEmail(username);
} 
```

tl;博士;

*   我将 html 选择器保留在它们各自的页面对象中（如果需要，可以使用子页面对象进行重用）。
*   我将测试数据混合在类、属性文件和测试类之间。

# razor - mvc4 将控件 ID 添加到 url - 例如：http://myapp/mycontroller/myview#myanchorid

> ID：15684624
> 
> 赞同：0
> 
> 时间：2013-03-28T14:35:56.293
> 
> 标签：razor, asp.net-mvc-4

我的应用程序有一个包含许多部分的页面，当从应用程序中的其他页面链接到这些部分时，这些部分需要大量滚动。有没有办法从调用页面上的 actionlink 请求中传递 url 上的控件 ID？这将允许我在目标页面上轻松地直接滚动到该部分。

我可能缺少一些明显的东西。

* * *

这是我用来使它工作的助手。

```
@helper  Action(actionName As String, controllerName As String, fragment As String, routeValues As Object,     displayText As String) 
     Dim url As New UrlHelper(HttpContext.Current.Request.RequestContext)
     Dim str As String = UrlHelper.GenerateUrl(routeName:=Nothing, actionName:=actionName, controllerName:=controllerName, routeValues:=New System.Web.Routing.RouteValueDictionary(routeValues), fragment:=fragment, protocol:=Nothing, _
hostName:=Nothing, routeCollection:=url.RouteCollection, requestContext:=url.RequestContext, includeImplicitMvcValues:=True)

     Dim outurl As String = String.Format("<a href=\'{0}\'>{1}</a>", str, displayText)

     @MvcHtmlString.Create(outurl)

End helper 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:44:38.877

在 System.Web.Mvc 命名空间中，您可以找到带有方法 GenerateUrl() 的类 UrlHelper，您可以在其中使用作为您的控件 ID 的**片段**参数构建您的 url。

# json - SmartGWT RestDataSource 调用现有 REST 服务

> ID：15684626
> 
> 赞同：0
> 
> 时间：2013-03-28T14:36:02.437
> 
> 标签：json, rest, spring-mvc, smartgwt

我有一个数据库后端，我已经通过几个单元测试对其进行了彻底的测试。控制器如下所示：

```
@RequestMapping(value = "/create", method = RequestMethod.POST, produces = "application/json", headers = "content-type=application/json")
public @ResponseBody UserDTO createUser(@RequestBody UserDTO user)
{
    UserEntity userEntity = service.add(user);
    return mappingUser(userEntity);
} 
```

单元测试如下所示：

```
 @Test
    public void testCreateUser() throws Exception
    {
        UserDTO userDto = createUserDto();
        String url = BASE_URL + "/rest/users/create";
        UserDTO newUserDto = restTemplate
        .postForObject(url, userDto, UserDTO.class, new Object[]{});
    } 
```

我已经确认单元测试效果很好，并且正确调用了实际的 Web 服务，并且将数据放入了数据库中。

现在，我正在使用 SmartGWT RestDataSource，我正在尝试正确配置 RestDataSource 以在请求正文中传递新用户，并返回新对象。我想在正文中将数据作为 JSON 发送，并从此调用返回 JSON。因此，我可能需要更改控制器本身以匹配数据源。

这是扩展 RestDataSource 的 AbstractDataSource：

```
import java.util.Map;

import com.google.gwt.http.client.URL;
import com.smartgwt.client.data.DSRequest;
import com.smartgwt.client.data.OperationBinding;
import com.smartgwt.client.data.Record;
import com.smartgwt.client.data.RestDataSource;
import com.smartgwt.client.types.DSOperationType;
import com.smartgwt.client.types.DSProtocol;

public abstract class AbstractRestDataSource extends RestDataSource
{
    public AbstractRestDataSource(String id)
    {
        setID(id);
        setClientOnly(false);

        // set up FETCH to use GET requests
        OperationBinding fetch = new OperationBinding();
        fetch.setOperationType(DSOperationType.FETCH);
        fetch.setDataProtocol(DSProtocol.GETPARAMS);
        DSRequest fetchProps = new DSRequest();
        fetchProps.setHttpMethod("GET");
        fetch.setRequestProperties(fetchProps);

        // set up ADD to use POST requests
        OperationBinding add = new OperationBinding();
        add.setOperationType(DSOperationType.ADD);
        add.setDataProtocol(DSProtocol.POSTMESSAGE);
        DSRequest addProps = new DSRequest();
        addProps.setHttpMethod("POST");
        addProps.setContentType("application/json");
        add.setRequestProperties(addProps);

        // set up UPDATE to use PUT
        OperationBinding update = new OperationBinding();
        update.setOperationType(DSOperationType.UPDATE);
        update.setDataProtocol(DSProtocol.POSTMESSAGE);
        DSRequest updateProps = new DSRequest();
        updateProps.setHttpMethod("PUT");
        update.setRequestProperties(updateProps);

        // set up REMOVE to use DELETE
        OperationBinding remove = new OperationBinding();
        remove.setOperationType(DSOperationType.REMOVE);
        DSRequest removeProps = new DSRequest();
        removeProps.setHttpMethod("DELETE");
        remove.setRequestProperties(removeProps);

        // apply all the operational bindings
        setOperationBindings(fetch, add, update, remove);

        init();
    }

    @Override
    protected Object transformRequest(DSRequest request)
    {
        super.transformRequest(request);

        // now post process the request for our own means
        postProcessTransform(request);

        return request.getData();
    }

    /*
     * Implementers can override this method to create a 
     * different override.
     */
    @SuppressWarnings("rawtypes")
    protected void postProcessTransform(DSRequest request)
    {
        StringBuilder url = new StringBuilder(getServiceRoot());

        Map dataMap = request.getAttributeAsMap("data");
        if (request.getOperationType() == DSOperationType.REMOVE)
        {
            // in case of remove, append the primary key
            url.append(getPrimaryKeyProperty()).append("/").append(dataMap.get(getPrimaryKeyProperty()));
        }
        else if (request.getOperationType() == DSOperationType.UPDATE)
        {
            url.append("update");
            appendParameters(url, request);
        }
        else if (request.getOperationType() == DSOperationType.FETCH && dataMap.size() > 0)
        {
            url.append(getPrimaryKeyProperty()).append("/").append(dataMap.get(getPrimaryKeyProperty()));
        }
        else if (request.getOperationType() == DSOperationType.ADD)
        {
            url.append("create");
        }

        System.out.println("AbstractRestDataSource: postProcessTransform: url=" + url.toString());
        request.setActionURL(URL.encode(url.toString()));
    }

    /*
     * This simply appends parameters that have changed to the URL
     * so that PUT requests go through successfully. This is usually
     * necessary because when smart GWT updates a row using a form,
     * it sends the data as form parameters. Most servers cannot
     * understand this and will simply disregard the form data
     * sent to the server via PUT. So we need to transform the form
     * data into URL parameters.
     */
    @SuppressWarnings("rawtypes")
    protected void appendParameters(StringBuilder url, DSRequest request)
    {
        Map dataMap = request.getAttributeAsMap("data");
        Record oldValues = request.getOldValues();
        boolean paramsAppended = false;

        if (!dataMap.isEmpty())
        {
            url.append("?");
        }

        for (Object keyObj : dataMap.keySet())
        {
            String key = (String) keyObj;
            if (!dataMap.get(key).equals(oldValues.getAttribute(key)) || isPrimaryKey(key))
            {
                // only append those values that changed or are primary keys
                url.append(key).append('=').append(dataMap.get(key)).append('&');
                paramsAppended = true;
            }
        }

        if (paramsAppended)
        {
            // delete the last '&'
            url.deleteCharAt(url.length() - 1);
        }
    }

    private boolean isPrimaryKey(String property)
    {
        return getPrimaryKeyProperty().equals(property);
    }

    /*
     * The implementer can override this to change the name of the
     * primary key property.
     */
    protected String getPrimaryKeyProperty()
    {
        return "id";
    }

    protected abstract String getServiceRoot();

    protected abstract void init();
} 
```

这是扩展 AbstractRestDataSource 的 UserDataSource：

```
import java.util.Map;

import com.google.gwt.http.client.URL;
import com.opensource.restful.shared.Constants;
import com.smartgwt.client.data.DSRequest;
import com.smartgwt.client.data.fields.DataSourceBooleanField;
import com.smartgwt.client.data.fields.DataSourceDateField;
import com.smartgwt.client.data.fields.DataSourceIntegerField;
import com.smartgwt.client.data.fields.DataSourceTextField;
import com.smartgwt.client.types.DSDataFormat;
import com.smartgwt.client.types.DSOperationType;

public class UserDataSource extends AbstractRestDataSource
{
    private static UserDataSource instance = null;

    public static UserDataSource getInstance()
    {
        if (instance == null)
        {
            instance = new UserDataSource("restUserDS");
        }

        return instance;
    }

    private UserDataSource(String id)
    {
        super(id);
    }

    private DataSourceIntegerField userIdField;
    private DataSourceBooleanField userActiveField;
    private DataSourceTextField usernameField;
    private DataSourceTextField passwordField;
    private DataSourceTextField firstnameField;
    private DataSourceTextField lastnameField;
    private DataSourceTextField emailField;
    private DataSourceTextField securityQuestion1Field;
    private DataSourceTextField securityAnswer1Field;
    private DataSourceTextField securityQuestion2Field;
    private DataSourceTextField securityAnswer2Field;
    private DataSourceDateField birthdateField;

    private DataSourceIntegerField positionIdField;

    protected void init()
    {
        setDataFormat(DSDataFormat.JSON);
        setJsonRecordXPath("/");

        // set the values for the datasource
        userIdField = new DataSourceIntegerField(Constants.USER_ID, Constants.TITLE_USER_ID);
        userIdField.setPrimaryKey(true);
        userIdField.setCanEdit(false);

        userActiveField = new DataSourceBooleanField(Constants.USER_ACTIVE, Constants.TITLE_USER_ACTIVE);

        usernameField = new DataSourceTextField(Constants.USER_USERNAME, Constants.TITLE_USER_USERNAME);
        passwordField = new DataSourceTextField(Constants.USER_PASSWORD, Constants.TITLE_USER_PASSWORD);

        firstnameField = new DataSourceTextField(Constants.USER_FIRST_NAME, Constants.TITLE_USER_FIRST_NAME);
        lastnameField = new DataSourceTextField(Constants.USER_LAST_NAME, Constants.TITLE_USER_LAST_NAME);

        emailField = new DataSourceTextField(Constants.USER_EMAIL, Constants.TITLE_USER_EMAIL);

        securityQuestion1Field =
            new DataSourceTextField(Constants.USER_SECURITY_QUESTION_1, Constants.TITLE_USER_SECURITY_QUESTION_1);
        securityAnswer1Field =
            new DataSourceTextField(Constants.USER_SECURITY_ANSWER_1, Constants.TITLE_USER_SECURITY_ANSWER_1);
        securityQuestion2Field =
            new DataSourceTextField(Constants.USER_SECURITY_QUESTION_2, Constants.TITLE_USER_SECURITY_QUESTION_2);
        securityAnswer2Field =
            new DataSourceTextField(Constants.USER_SECURITY_ANSWER_2, Constants.TITLE_USER_SECURITY_ANSWER_2);

        birthdateField = new DataSourceDateField(Constants.USER_BIRTHDATE, Constants.TITLE_USER_BIRTHDATE);

        positionIdField = new DataSourceIntegerField(Constants.USER_POSITION_ID, Constants.TITLE_USER_POSITION_ID);
        // positionActiveField = new DataSourceBooleanField(Constants.USER_ACTIVE, Constants.TITLE_USER_ACTIVE);
        // positionCodeField;
        // positionDescriptionField;

        setFields(userIdField, userActiveField, usernameField, passwordField, firstnameField, lastnameField,
            emailField, birthdateField, securityQuestion1Field, securityAnswer1Field, securityQuestion2Field,
            securityAnswer2Field, positionIdField);
    }

    protected String getServiceRoot()
    {
        return "rest/users/";
    }

    protected String getPrimaryKeyProperty()
    {
        return "userId";
    }

    /*
     * Implementers can override this method to create a 
     * different override.
     */
    @SuppressWarnings("rawtypes")
    protected void postProcessTransform(DSRequest request)
    {
        // request.setContentType("application/json");

        StringBuilder url = new StringBuilder(getServiceRoot());

        Map dataMap = request.getAttributeAsMap("data");
        if (request.getOperationType() == DSOperationType.REMOVE)
        {
            // in case of remove, append the primary key
            url.append(getPrimaryKeyProperty()).append("/").append(dataMap.get(getPrimaryKeyProperty()));
        }
        else if (request.getOperationType() == DSOperationType.UPDATE)
        {
            url.append("update");
            System.out.println("UserDataSource: postProcessTransform: update: url=" + url.toString());
        }
        else if (request.getOperationType() == DSOperationType.FETCH && dataMap.size() > 0)
        {
            url.append(getPrimaryKeyProperty()).append("/").append(dataMap.get(getPrimaryKeyProperty()));
        }
        else if (request.getOperationType() == DSOperationType.ADD)
        {
            url.append("create");
        }

        System.out.println("UserDataSource: postProcessTransform: url=" + url.toString());
        request.setActionURL(URL.encode(url.toString()));
    }
} 
```

如果我能找到如何将 UserDTO 作为 JSON 放入 requestBody，我想我将解决我所有的问题。有关您应该知道的额外信息，我正在使用 Spring 3.2 和 springmvc-servlet.xml 文件中配置的 Jackson 消息转换器。

在某一时刻，我确实看到所有数据都附加到了 URL 中，但我更希望数据不是作为参数在 URL 中，而是在请求正文中。所以，我需要知道这是否可能，以及如何去做。

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:37:28.010

您可能想要撤消所有这些修改并只实现默认的 RestDataSource 协议，如果您只是调用 RestDataSource.setDataFormat()，该协议已经将请求正文作为 JSON 传递。文档中有示例 JSON 消息：

[http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/data/RestDataSource.html](http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/data/RestDataSource.html)

在您创建的其他问题中：

1.  不同的 CRUD 操作现在转到不同的 URL 并使用不同的 HTTP 动词，因此它们不能再组合成一个队列并一起发送。这意味着您不能做一些**基本**的事情，例如在事务中同时执行创建和更新操作、保存新订单及其 OrderItems 或保存数据并获取转换到新屏幕所需的相关数据。

2.  您假设“获取”将基于 HTTP GET，但这需要将嵌套标准结构 (AdvancedCriteria) 笨拙地编码为 URL 参数，这很容易达到最大 URL 长度

由于这些和其他原因，大多数生成的 Java 服务不能满足现代 UI 的需求，因此不应使用自动生成方法。常见问题解答中的更深入解释：

[http://forums.smartclient.com/showthread.php?t=8159#aExistingRest](http://forums.smartclient.com/showthread.php?t=8159#aExistingRest)

# meteor - 如何生成新的 Meteor 登录令牌（服务器端）以建立快速登录链接

> ID：15684634
> 
> 赞同：16
> 
> 时间：2013-03-28T14:36:21.810
> 
> 标签：meteor

Meteor 有一个`loginWithToken`方法，用户对象中有`resume`令牌。因此，可以使用这些令牌之一登录`loginWithToken`。这样可行。

有没有办法生成新的登录令牌，或者我应该只使用简历令牌来创建快速登录链接？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-10-27T12:07:15.953

正如约翰尼所说，你可以使用`Accounts._generateStampedLoginToken()`函数，它实际上并没有什么特别的，只是下面的函数：

```
_generateStampedLoginToken = function () {
  return {
    token: Random.secret(),
    when: new Date
  };
} 
```

无论如何，要使用它，这里有一个例子：

```
// Server //

// Creates a stamped login token
var stampedLoginToken = Accounts._generateStampedLoginToken();

/**
 * Hashes the stamped login token and inserts the stamped login token 
 * to the user with the id specified, adds it to the field 
 * services.resume.loginTokens.$.hashedToken. 
 * (you can use Accounts._hashLoginToken(stampedLoginToken.token) 
 * to get the same token that gets inserted)
 */
Accounts._insertLoginToken(user._id, stampedLoginToken);

// Client //

// Login with the stamped loginToken's token
Meteor.loginWithToken(stampedLoginToken.token); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T19:15:18.200

是的，您可以通过调用`Accounts._generateStampedLoginToken()`. 您可以从登录处理程序中调用它。

[https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_server.js#L114](https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_server.js#L114)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-05T09:27:31.823

现在是 2015 年 - 使用以下软件包之一：

*   诗意：帐户-无密码
*   acemtp:accounts-passwordless

[http://fastosphere.meteor.com/?q=passwordless](http://fastosphere.meteor.com/?q=passwordless)

# php - .css 文件未执行

> ID：15684636
> 
> 赞同：1
> 
> 时间：2013-03-28T14:36:32.703
> 
> 标签：php, .htaccess

当 url 为时 Style.css 不会执行`[http://example.com/mvc/login/requestsExceeded](http://example.com/mvc/login/requestsExceeded)`，

但它确实在我的登录索引页面中`[http://example.com/mvc/login](http://example.com/mvc/login)`，

如果我添加正斜杠`[http://example.com/mvc/login/](http://example.com/mvc/login/)`，那么它也不起作用。

> mvc = 子目录中的站点
> login = 控制器
> requestsExceeded = 查看

.css 文件位于`[http://www.example.com/mvc/views/themes/default/style.css](http://www.example.com/mvc/views/themes/default/style.css)`

文件路径没问题，因为我试过这样：

```
<?php if(file_exists("views/themes/{$theme}/style.css")) echo 'TEST'; ?>
<link href="views/themes/<?=$theme;?>/style.css" type="text/css" rel="stylesheet" /> 
```

它确实回显了 TEST。

这是我的简化路由器：

```
<?php

$controller = "Index";
$action = "index";
$query = null;

if (isset($_GET['load']))
{
    $params = array();
    $params = explode("/", $_GET['load']);

    $controller = ucwords($params[0]);

    if (isset($params[1]) && !empty($params[1]))
    {
        $action = $params[1];
    }

    if (isset($params[2]) && !empty($params[2]))
    {
        $query = $params[2];
    }
}
$modelName = $controller;
$controller .= 'Controller';

$load = new $controller($modelName, $action);

if (method_exists($load, $action))
{
    $load->{$action}($query);
}
else 
{
    die('Invalid method. Please check the URL.');
} 
```

我很确定这是由 .htaccess 文件引起的：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?load=$1 [PT,L] 
```

-我想限制所有访问，除非 index.php...，
-允许访问 .css、.gz、.js 和图像文件，-
从 url 中删除正斜杠，
-redirect 301 到 index.php，
-redirect`[http://example.com/mvc/home](http://example.com/mvc/home)`到 index.php，

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:37:53.270

将您的导入更改为

```
<link href="/mvc/views/themes/<?=$theme;?>/style.css" type="text/css" rel="stylesheet" /> 
```

如果您希望在站点的任何位置都可以使用相同的链接，那么您最好让路径是绝对的，即以`/`.

# google-chrome - Apache-Shiro 和 Chrome

> ID：15684643
> 
> 赞同：-2
> 
> 时间：2013-03-28T14:36:57.533
> 
> 标签：google-chrome, tomcat, shiro

我们有一个网络应用程序。我们正在使用tomcat 7 ans shiro。该网站在 IE 和 Firefox 上运行良好，但在 Chrome 中运行不佳：

假设我们有 2 个用户：一个是管理员，可以访问整个站点。另一个是访客，只能访问网站的一部分。在 Chrome 中，当我使用管理员帐户登录时，一切正常。但是如果我注销，然后使用访客帐户登录，我可以访问整个站点......如果我硬刷新，那么对受限部分的访问将再次起作用。

我不明白为什么它会发生在 Chrome 上。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:31:27.753

我终于设法找到了解决方案：

我添加了这个 Jquery 方法：

```
$.ajaxSetup({
        cache: false
}); 
```

它阻止浏览器缓存。希望它能有用。

# jquery - 可排序、可拖放和可拖动的容器

> ID：15684644
> 
> 赞同：3
> 
> 时间：2013-03-28T14:37:01.063
> 
> 标签：jquery, draggable, jquery-ui-sortable

这个问题与 jQuery 的 UI 有关。

任何人都可以提供一个示例来执行以下操作：

1.  容器 A 是可排序和可放置的
2.  任何元素都可以拖入Container A，然后进行排序。
3.  任何元素都可以从容器 A 中拖出，然后简单地在页面中拖动即可。
4.  容器 A 也可以在页面周围拖动

这是我到目前为止所拥有的：

```
$(function() {
    $("#sortable").sortable().droppable();
    $("#sortable").disableSelection();
    $("#drop").droppable({
        accept: "#sortable li",
        drop: function (evt, ui) {
            var $destination = $(this); 
            ui.draggable.appendTo( $destination ); 

        }
    }).draggable();
}); 
```

我在这里创建了一个小提琴：http: [//jsfiddle.net/eEJHb/1/](http://jsfiddle.net/eEJHb/1/)

我遇到的问题：A）我无法将可排序的内容放入容器中 B）一旦进入容器，我需要将元素拖回可排序列表

谢谢你的帮助！

****更新**** 我的部分问题在于选项“connectWith”。它根本行不通。相反，我使用了“connectToSortable”选项（作为可拖动选项中的一个选项），我能够让可排序和可拖动选项一起工作。**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-09T06:51:10.593

[在我找到这个](http://www.pureexample.com/jquery-ui/draggable-options-connect-to-sortable.html)之前我遇到了同样的问题

```
 $(function () {
        $("#timetable .items").sortable({
        	connectWith: "ul"   
        });

        $("ul[id^='available']").draggable({
            helper: "clone",
            connectToSortable: ".items"
        });
    });
```

```
<style type="text/css">
.bar {
    width: 100px;
    height: 20px;
    margin: 2px;
    border: 1px solid black;
    background-color: lightgreen;
    text-align: center;
    float: left;
    margin: 2px;
    padding: 2px;
    cursor: pointer;
    border-radius: 3px;
}

.list {
    background-color: lightblue;
    border: 1px solid gray;
}

.items .ui-selected {
    background: red;
    color: white;
    font-weight: bold;
}

.items {
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 100px;
}

.items li {
    margin: 2px;
    padding: 2px;
    cursor: pointer;
    border-radius: 3px;
}

.weekday {
    float: left;
}

.availablelist {
    background-color: orange;
    display: inline;
}
</style>
```

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="http://www.pureexample.com/js/lib/jquery.ui.touch-punch.min.js"></script>

<div style="float:left;width:500px;">
    <div>Available employee</div>
    <ul id="available1" class="items">
        <li class="list availablelist">Jhonny</li>
    </ul>
    <ul id="available2" class="items">    
        <li class="list availablelist">Tim</li>
    </ul>
    <ul id="available3" class="items">    
        <li class="list availablelist">George</li>
    </ul>
    <ul id="available4" class="items">    
        <li class="list availablelist">Melissa</li>
    </ul>
    <ul id="available5" class="items">    
        <li class="list availablelist">Alice</li>
    </ul>
</div>
<div style="clear:both"></div>
<div id="timetable" style="float:left;width:700px;">
    <div style="text-align:center">Time table</div>
    <div class="weekday">Monday
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Tuesday 
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Wednesday 
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Thursday 
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Friday
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Saturday
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
    <div class="weekday">Sunday
        <ul class="items">
            <li class="list">Jhonny</li>
            <li class="list">Tim</li>
            <li class="list">George</li>
            <li class="list">Melissa</li>
            <li class="list">Alice</li>
        </ul>
    </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:06:41.803

我建议您查看此文档：

[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

[http://jqueryui.com/draggable/#sortable](http://jqueryui.com/draggable/#sortable)

以及这些问题的答案：

[让 jQuery 可排序、可拖放和可拖动以协同工作](https://stackoverflow.com/questions/5794574/getting-jquery-sortable-droppable-and-draggable-to-work-together)

[jQuery-UI 可拖动和可排序](https://stackoverflow.com/questions/7828495/jquery-ui-draggable-and-sortable)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T14:48:51.823

您可以使用来自 jquery-ui 的交互。它提供可拖动和可排序的交互。

[以下是示例](http://jqueryui.com/draggable/)。**

# bash - bash（配置文件）中的类似数据结构的数组？

> ID：15684646
> 
> 赞同：7
> 
> 时间：2013-03-28T14:37:05.250
> 
> 标签：bash, configuration-files

我写了一个 bash 脚本，它处理多个文件。我现在想添加对配置文件的支持。这是我想要的数据结构：

```
Array ( 
    [0] => Array (
        [name] => datset1
        [path] => /var/lib/bliTool/ds1
        [type] => cvs
    )

    [1] => Array (
        [name] => datset2
        [path] => /var/lib/bliTool/ds2
        [type] => xml
    )

    [2] => Array (
        [name] => datset3
        [path] => /home/igor/test/ds3
        [type] => cvs
    )
) 
```

**Q1**这样的数据结构在 bash 中是否可行？还有其他建议吗？请记住，这应该在配置文件中...

**Q2：**我正在考虑每个“集合”一个配置文件，例如

```
/etc/myApp/
/etc/myApp/myApp.conf
/etc/myApp/datasets.d/
/etc/myApp/datasets.d/ds1.conf
/etc/myApp/datasets.d/ds2.conf
/etc/myApp/datasets.d/dsN.conf 
```

并且每个*/etc/myApp/datasets.d/dsN.conf*文件看起来像

```
name=The DS name
path=/the/path/to/the/ds/files
type=thetype 
```

你有什么建议吗？有没有办法在一个文件中做所有事情？

**Q3：**我想每组支持多个路径值。我可以支持类似的东西

```
path="/first/path /second/path" 
```

但我认为我会遇到空格问题，所以我应该引入一个分隔符

```
path="/first/path:/second/path" 
```

拆分字符串。

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:18:30.380

您不能将数据结构嵌套在`bash`. 充其量，您可以将关联数组的名称存储在一个数组中，并通过间接循环来访问它们。

```
$ declare -A aa0=([name]=dataset1 [path]=/var/lib/bliTool/ds1 [type]=cvs )
$ declare -A aa1=([name]=dataset2 [path]=/var/lib/bliTool/ds2 [type]=xml )
$ declare -A aa2=([name]=dataset3 [path]=/home/igor/test/ds3 [type]=cvs )

$ declare -a array=( aa0 aa1 aa2 )
$ tmp=aa0[name]
$ echo ${!tmp}
dataset1 
```

对于第二个问题，当然可以定义带有部分的配置文件格式，但是您需要编写一个可以处理它的解析器。其他语言通常具有可用于解析丰富配置文件格式的库。

至于每个变量的多个路径，坚持使用`:`. 理论上，任何分隔符都可以用作路径名组件的一部分，因此如果分隔符是路径的一部分，则需要用引号引起来。但是由于`PATH`用作`:`它的分隔符，所以历史意识`:`在路径名中使用不是一个很好的字符，并且需要在类似`PATH`参数中引用它。

```
path="/first/poor\:path\:name:/second/bad\:path\:name" 
```

然后由您的应用程序来处理反斜杠`:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:00:35.983

我遇到了类似的情况，我的解决方案是在不同级别使用不同的 IFS，这在某种程度上类似于 chepner 的想法。代码和示例可以在这里找到[https://github.com/pppoe/Nested-Array-Bash/](https://github.com/pppoe/Nested-Array-Bash/)

# django - Elastic Beanstalk 上的 Django - Apache robots.txt

> ID：15684655
> 
> 赞同：2
> 
> 时间：2013-03-28T14:37:28.920
> 
> 标签：django, amazon-ec2, amazon-elastic-beanstalk, ec2-ami

我让 Django 在 Amazon Elastic Beanstalk 上成功运行。我想从 Apache 而不是通过 Django 提供 /robots.txt。如何连接到 Apache 配置以控制 Apache 提供的服务？

# android - 在 Android 中更改图像/按钮位置（相对）

> ID：15684659
> 
> 赞同：-3
> 
> 时间：2013-03-28T14:37:42.647
> 
> 标签：android, image, button, layout

我有一个 toggleButton 我想根据用户偏好更改它的位置（在运行时，而不是在布局 XML 中）。我看了看，发现的只是 AbsoluteLayout，这不是我想要的（我需要相对于屏幕边缘）。有没有办法这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:42:06.007

您可以使用 a`RelativeLayout`并将您的`toggleButton`相对设置`View`为`Layout`.

看看这篇文章是如何完成的：

[如何以编程方式在 RelativeLayout 中布局视图？](https://stackoverflow.com/questions/2305395/laying-out-views-in-relativelayout-programmatically)

**例子：**

```
RelativeLayout layout = new RelativeLayout(this);
TextView tv2 = new TextView(this);
tv2.setText("B");
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
lp.addRule(RelativeLayout.RIGHT_OF, tv2.getId());

layout.addView(tv2, lp); 
```

要编辑视图的边距，请使用 LayoutParams 对象，如下所示：

```
 lp.setMargins(left, top, right, bottom); 
```

# python - 数字列表对应于文件中的一行

> ID：15684662
> 
> 赞同：0
> 
> 时间：2013-03-28T14:37:44.067
> 
> 标签：python, file, list

我有一个包含一系列数字的列表。此数字列表对应于 .dat 文件中的一行。如何使用列表说`[0,1,2,3,4,5,6,9,4]`然后打印出 .dat 文件中每个数字对应的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:38:53.633

您将这些行读入内存，读入一个列表，然后索引到该列表中：

```
with open('somefile') as fileobj:
    lines = list(fileobj)

for index in indices:
    print lines[index] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:52:15.590

```
file = [ l for l in open('file.name') ]
for i in list:
   print file[i] 
```

# c# - 许多方法的相同捕获代码

> ID：15684663
> 
> 赞同：4
> 
> 时间：2013-03-28T14:37:48.503
> 
> 标签：c#, .net

我有几个 C# 方法，我想将它们包装在一个 try-catch 块中。每个函数都有相同的 catch 逻辑。有没有一种优雅的方法可以为这些函数中的每一个添加一个装饰器，以便它们都用相同的 try/catch 块包装？我不想将 try/catch 块添加到所有这些函数中。

例子：

```
public void Function1(){
   try {
     do something
   }catch(Exception e) {
      //a BUNCH of logic that is the same for all functions
   }
}

public void Function2() {
   try {
     do something different
   }catch(Exception e) {
      //a BUNCH of logic that is the same for all functions
   }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T14:45:18.263

那么对此的一些功能解决方案呢？请注意，我不会吞下异常并使用`throw;`语句，这将重新引发异常并保持其原始堆栈跟踪。不要默默地吞下异常——这被认为是一种非常糟糕的做法，调试代码会变得很糟糕。

```
void Main()
{
    WrapFunctionCall( () => DoSomething(5));
    WrapFunctionCall( () => DoSomethingDifferent("tyto", 4));
}

public void DoSomething(int v){ /* logic */}

public void DoSomethingDifferent(string v, int val){ /* another logic */}

public void WrapFunctionCall(Action function) 
{
    try
    {
        function();
    }
    catch(Exception e)
    {
         //a BUNCH of logic that is the same for all functions
         throw;
    }
} 
```

* * *

如果你需要返回一些值，`WrapFunctionCall`方法的签名会改变

```
void Main()
{
    var result = WrapFunctionCallWithReturn( () => DoSomething(5));
    var differentResult = WrapFunctionCallWithReturn( () => DoSomethingDifferent("tyto", 4));
}

public int DoSomething(int v){ return 0; }

public string DoSomethingDifferent(string v, int val){ return "tyto"; }

public T WrapFunctionCallWithReturn<T>(Func<T> function) 
{
    try
    {
        return function();
    }
    catch(Exception e)
    {
        //a BUNCH of logic that is the same for all functions
        throw;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:08:51.997

这是乔尔·埃瑟顿（Joel Etherton）的评论，被解释为答案。请注意，这不是最佳解决方案（请参阅 Ilya Ivanov 的答案以获得更好的解决方案）。
但这很简单，如果我正确阅读了您的问题，那正是您所要求的：

```
void errorHandling(Exception e)
{
  // Your BUNCH of logic
}

public void Function1(){
   try {
     do something
   }catch(Exception e) {
      errorHandling(e);
   }
}

public void Function2() {
   try {
     do something different
   }catch(Exception e) {
      errorHandling(e);
   }
} 
```

# regex - 使用 gawk、grep 进行正则表达式模式匹配的问题

> ID：15684664
> 
> 赞同：0
> 
> 时间：2013-03-28T14:37:52.990
> 
> 标签：regex, bash, grep, gawk

我有一个文件“Input_file”，内容如下

```
%name=ABC
%value=123
sample text in file
sample text in file
%name=XYZ
%value=789
sample text in file 
```

我需要提取此文件中与此模式匹配的行。

```
str="%name=*\n%value=*" 
```

我是这样工作的

```
gawk -v st=$str '/"$st"/ {print}' $Input_file 
```

我收到错误

```
gawk:              ^ backslash not last character on line 
```

即使使用 grep

```
grep -e "$str" $Input_file 
```

它说没有这样的匹配模式。我哪里错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:51:03.107

试试这个：

```
grep -A1 "^%name=" $Input_file | grep -B1 "^%value=" | grep -v "^--" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:58:17.940

您不能在 awk 中直接使用您的“模式（str）”。因为 awk default 在多行模式下不起作用。但是，您可以使用 awk 执行此操作：

```
 awk '/^%name=/{n=$0;next}/^%value=/&&n{print n"\n"$0}{n=""}' file 
```

以您的示例为例，上述单行输出：

```
%name=ABC
%value=123
%name=XYZ
%value=789 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:52:38.977

您可以在 $str 变量中使用不同的语法，'*' 没有用，因为您正在搜索模式而不是文字值，对于 gawk 我不禁抱歉

试试这个：

```
str="\%name=|\%value="
egrep $str $input_file 
```

所以你可以匹配你搜索的两个条件

# java - 在 Java 中使用 XQueryCompiler 仅提取值

> ID：15684669
> 
> 赞同：0
> 
> 时间：2013-03-28T14:38:13.213
> 
> 标签：java, xml, xml-parsing, xquery, saxon

我正在使用以下代码从存储在字符串中的 XML 文件中获取一些结果。但是 xquerycompiler 要求我将它们包含在`<result></result>`. 我可以不将它们括起来而只将输出放在一个字符串中吗？这是我的代码：

```
Configuration saxonConfig = new Configuration();
Processor processor = new Processor(saxonConfig);                    

    XQueryCompiler xqueryCompiler = processor.newXQueryCompiler();
    XQueryExecutable xqueryExec = xqueryCompiler.compile("<result>{/book/chapter}</result>");
    XQueryEvaluator xqueryEval = xqueryExec.load();
    xqueryEval.setSource(new SAXSource(new InputSource(new StringReader(xmltext))));
    XdmDestination destination = new XdmDestination();
    xqueryEval.setDestination(destination);
    xqueryEval.run();

    System.out.println(destination.getXdmNode()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:58:29.223

为什么不将结果包装在“结果”中，将元素返回到字符串中，然后使用简单的子字符串函数去除前导`<result>`和尾随`</result>`？

# ruby-on-rails-3 - 如何使用acts-as-taggable-on在rails上构建标签层次结构

> ID：15684678
> 
> 赞同：3
> 
> 时间：2013-03-28T14:38:50.190
> 
> 标签：ruby-on-rails-3, hierarchy, tagging, acts-as-taggable-on

我有一个 Rails 应用程序，其中包括使用 gem 作为可标记的博客文章的标记。我的想法是使用中等链接方法扩展此 gem 的标记机制，我可以选择创建一些用户作为标签所有者，他们可以选择将一个标签链接到另一个标签作为父/子。

目前该系统有独立的标签，如`Education`, `Child Education`和`Distance Education`

的标签所有者`Education`可以选择选择`Child Education`和`Distance Education` 作为第一级孩子并将它们链接在一起。在分类学家（标签管理员）批准之前，这种关系是不可见的。

同样，最终用户也可以建议`Distance Education`标签成为其子标签，`Education`并且该请求将对标签管理员可见。在他的同意下，双方的关系将建立。

这些是我与上述要求有关的几个问题：-

1.  是否建议扩展 gem 或者我应该使用从头开始编写的独立标记模型来支持这个分层系统？

2.  如果我继续使用 gem 提供的模式，应该使用什么样的模型来设计这样的需求。具体来说，我应该使用带有标签 id 和标签名称的 parent_id 列的单个表吗？或者我应该在具有多对多关联（tag_id、parent_tag_id（作为外键））的单独表中维护它们的关系。

3.  我也是数据结构的新手，所以我需要一些关于算法选择的初始输入，以便在标签系列之间有效地遍历。使用链表是我的选择之一，但是考虑到 Rails 的约定优于配置的口头禅，我真的不确定如何继续进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:17:55.467

我记得 4 年前用[ActsAsTree](https://github.com/amerine/acts_as_tree)做过类似的事情。

[这里](http://blog.hashrocket.com/posts/recursive-sql-in-activerecord)还有一个如何手动操作的示例。

这两个选项都需要标签表上的 parent_id 列，并且非常简单。只需在您的模型文件夹中创建一个 tag.rb 并扩展 Tag 类。

附言。已经很久了，但我记得必须检查是否有循环，请记住

# asp.net-web-api - 如何为 Web Api Odata 生成类型化数据定义

> ID：15684681
> 
> 赞同：1
> 
> 时间：2013-03-28T14:38:57.977
> 
> 标签：asp.net-web-api, odata, jaydata

我已阅读此文档“ [http://jaydata.org/blog/how-to-use-jaydata-with-asp.net-web-api---i](http://jaydata.org/blog/how-to-use-jaydata-with-asp.net-web-api---i) ”，它向用户展示了一种非常清晰和简单的方式来访问网络api odata，但在这个例子中，所有的数据类型都是手动定义的，我从文档“ASP.NET Web API 提供程序不使用服务器生成的元数据来设置客户端。您需要提供 JayData 库包含有关您将要处理的数据类型的一些信息。目前您只能手动执行此操作**。JayData 1.2.7 版本为自动生成客户端环境带来了 Visual Studio 开发时间支持**.” 目前发布了1.2.7.1版本，但是我找不到任何关于如何使用jaydata的一些工具来自动生成这些数据类型的信息。有没有这方面的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:03:06.527

是的，我们答应了，我们做了一个概念证明，但是自从那篇帖子之后没有人问过这个问题，你是第一个，所以我们认为我们当前的用户对手动创建模型或使用 WebAPI 和 oData 感到满意，其中模型可以从 $metadata 动态构建，也可以使用 JaySvcUtil 静态构建。我不能保证我们发布它的任何日期。你不能只使用 WebAPI 和 oData 吗？

# python - 使用pyqt将图像插入mysql

> ID：15684687
> 
> 赞同：0
> 
> 时间：2013-03-28T14:39:05.493
> 
> 标签：python, mysql, file-io, pyqt, blob

我正在将本地图像插入到我的 mysql 服务器上的表中。我可以插入数据，但是当我下载它时，它不是有效的 jpg。

这是我正在使用的示例。格式化数据时我做错了什么吗？

```
printFileLoc = QtGui.QFileDialog.getOpenFileName(self,  caption = 'Open Print', filter = '*.jpg')
with open(printFileLoc,  'r') as f:
    printBin = re.escape(f.read())
newQry = QtSql.QSqlQuery()
qry = "Insert into prints set print = '{0}'".format(printBin)
newQry.exec_(qry) 
```

代码按预期完成，但 jpg 不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:25:14.110

我想出了如何让它工作。由此：

```
qry = "Insert into prints set print = '{0}'".format(printBin) 
```

对此：

```
qry = "Insert into prints set print = '0x{0}'".format(printBin) 
```

# asp.net - 无效的列名：SQL / ASP.NET

> ID：15684692
> 
> 赞同：3
> 
> 时间：2013-03-28T14:39:20.020
> 
> 标签：asp.net, sql, sql-server, linq

我很难调试一个特定的问题并且有几个问题。首先，这是发生了什么：

我有一个相对简单的表叫做`Employees`，它有一个主键/身份`Id`。还有一`Username`列 - 这是我用于成员资格的表的`GUID`外键。`aspnet_Users`最后，还有另一个`Team_Id`指向另一个表的外键`Teams`.

我真正想做的就是提供选定员工的 ID 并将其传递给 DAL 中的方法，然后使用以下语句找到员工：

```
var employee = entities.Employees.Where(emp => emp.Id == employeeId); 
```

检索到员工后，我想使用传递给同一方法的另一个值 - 所选团队的 ID - 来更新员工的`Team_Id`值（他们被分配到哪个团队），使用以下内容：

```
employee.First().Team_Id = teamId;
entities.SaveChanges(); 
```

我得到了例外

> 列名无效：{Name}

这对我来说没有意义，因为 Employee 没有名称列。

说了这么多，我的问题是：

1.  混乱可能来自哪里？我试图想出一种方法来逐步执行代码，但似乎错误出现在查询本身的某个地方，所以我不确定如何跟踪查询本身的执行。

2.  是否可能与我生成的实体有关？我注意到当我键入时`employee.First().` `Name`出现在 Intellisense 中。我对此感到非常困惑，因为正如我所提到的，员工表中没有名称列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:42:08.487

修复了问题。我刚刚删除了现有的实体框架模型并重新添加了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:43:23.003

就查询而言，您始终可以使用 SQL Profiler 来查看实际运行的脚本。无论如何，这是对生成的 SQL 进行故障排除的好方法。

对于您的财产，不知何故它确实进入了您的班级，因此您的数据模型认为它就在那里，无论出于何种原因。我会说只是转到您的数据模型（您没有提到这是 EF 还是 LINQ-to-SQL），您会在那里看到“名称”。只需将其删除，它就会将其从类和数据访问内容中删除。

# c++ - 在 C++ 中获取 CPU 费用

> ID：15684694
> 
> 赞同：1
> 
> 时间：2013-03-28T14:39:22.713
> 
> 标签：c++, linux, process

我制作了一个程序来获取我的 C++ 程序中的 CPU 使用率。但是我什么也得不到

```
0.000000 sec user
0.000000 sec system 
```

如何获得可用价值？

我试过那个代码：

```
#include <stdio.h>
#include <sys/resource.h>
#include <sys/time.h>
#include <unistd.h>

void print_cpu_time() {
    struct rusage usage;
    getrusage (RUSAGE_SELF, &usage);
    printf ("CPU time: %ld.%06ld sec user, %ld.%06ld sec system\n",
    usage.ru_utime.tv_sec, usage.ru_utime.tv_usec,
    usage.ru_stime.tv_sec, usage.ru_stime.tv_usec);
} 
```

# parsing - 如何使用 powershell 将 PDF 内容解析到数据库

> ID：15684699
> 
> 赞同：1
> 
> 时间：2013-03-28T14:39:35.497
> 
> 标签：parsing, pdf, powershell, extract

我有一个 pdf 文档，我想从中提取内容。我遇到的问题是……我搜索 IMEI 关键字，它找到了它，但我需要实际的 IMEI 值，它是循环中的下一项。

在 PDF 中，值如下所示：IMEI 90289393092

通过以下脚本返回值：-0.1 -8.8 9.8 -0.1 446.7 403.9 Tm (IMEI:) Tj

我只想拥有价值：90289393092

我正在使用的脚本：

```
Add-Type -Path .\itextsharp.dll
$reader = New-Object iTextSharp.text.pdf.pdfreader -ArgumentList "$pwd\PDF\DOC001.pdf"

for ($page = 1; $page -le $reader.NumberOfPages; $page++) {
 $lines = [char[]]$reader.GetPageContent($page) -join "" -split "`n"
 foreach ($line in $lines) {
  if ($line -match "IMEI") { 
   $line = $line -replace "\\([\S])", $matches[1]
   $line -replace "^\[\(|\)\]TJ$", "" -split "\)\-?\d+\.?\d*\(" -join ""

  }
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:50:01.173

this is the way for using itextsharp.dll and read a pdf as plain text:

```
Add-Type -Path .\itextsharp.dll
$reader = New-Object iTextSharp.text.pdf.pdfreader -ArgumentList c:\ps\a.pdf        

for ($page = 1; $page -le $reader.NumberOfPages; $page++)
{
    $strategy = new-object  'iTextSharp.text.pdf.parser.SimpleTextExtractionStrategy'            
    $currentText = [iTextSharp.text.pdf.parser.PdfTextExtractor]::GetTextFromPage($reader, $page, $strategy);
    [string[]]$Text += [system.text.Encoding]::UTF8.GetString([System.Text.ASCIIEncoding]::Convert( [system.text.encoding]::default  , [system.text.encoding]::UTF8, [system.text.Encoding]::Default.GetBytes($currentText)));      
}
$Reader.Close(); 
```

And this can be the regex you need but I haven't tested it

```
[regex]::matches( $text, '(?<=IMEI\s+)(\d+)(?=\s+)' ) | select -expa value 
```

# vba - 自动关闭警报/弹出窗口 VBA

> ID：15684700
> 
> 赞同：1
> 
> 时间：2013-03-28T14:39:39.387
> 
> 标签：vba, excel, popup

请尝试下面的代码，正在做的是从网页表面下载一些数据，但我需要它自动工作，并且在打开 Excel 时出现问题，弹出窗口。有什么办法可以摆脱它自动按下启用？

```
Private Declare Function URLDownloadToFile Lib "urlmon" Alias "URLDownloadToFileA" _
(ByVal pCaller As Long, _
ByVal szURL As String, _
ByVal szFileName As String, _
ByVal dwReserved As Long, _
ByVal lpfnCB As Long) As Long

Sub DownPDF()
' This macro downloads the pdf file from webpage
' Need to download MSXML2 and MSHTML parsers and install
Application.OnTime Now + TimeValue("00:01:10"), "DownPDF"
Dim sUrl As String
Dim xHttp As MSXML2.XMLHTTP
Dim hDoc As MSHTML.HTMLDocument
Dim hAnchor As MSHTML.HTMLAnchorElement
Dim Ret As Long
Dim sPath As String
Dim i As Long

sPath = "C:\Documents and Settings\ee28118\Desktop\Ordine\"
sUrl = "http://cetatenie.just.ro/wp-content/uploads/"

'Get the directory listing
Set xHttp = New MSXML2.XMLHTTP
xHttp.Open "GET", sUrl
xHttp.send

'Wait for the page to load
Do Until xHttp.readyState = 4
    DoEvents
Loop

'Put the page in an HTML document
Set hDoc = New MSHTML.HTMLDocument
hDoc.body.innerHTML = xHttp.responseText

'Loop through the hyperlinks on the directory listing
For i = 0 To hDoc.getElementsByTagName("a").Length - 1
    Set hAnchor = hDoc.getElementsByTagName("a").Item(i)

    'test the pathname to see if it matches your pattern
    If hAnchor.pathname Like "Ordin-*.2013.pdf" Then
        Ret = URLDownloadToFile(0, sUrl & hAnchor.pathname, sPath & hAnchor.pathname, 0, 0)

        If Ret = 0 Then
            Debug.Print sUrl & hAnchor.pathname & " downloaded to " & sPath
        Else
            Debug.Print sUrl & hAnchor.pathname & " not downloaded"
        End If
    End If
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:43:17.243

尝试在桌面上将您的 Excel 安全级别设置得非常高或非常低，那么 Exel 将无法保护您免受打开工作簿时可能运行的恶意代码的侵害（但无论如何，一个好的防病毒软件都会这样做！）

*   非常高意味着它不会问你
*   低意味着它不会问你。

高温高压

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:13:48.463

它要求您启用宏的原因是因为宏实际上会损害您的 PC。这是一个安全问题，您不能通过 VBA 自动覆盖该功能。

一个人必须手动转到Excel：“信任中心->信任中心设置->宏设置->启用所有宏（不推荐；有潜在危险的代码可以运行）”

# tsql - 动态 SQL 不将 VARCHAR 转换为 INT（无论如何都不应该）

> ID：15684701
> 
> 赞同：2
> 
> 时间：2013-03-28T14:39:49.163
> 
> 标签：tsql, sql-server-2008-r2

我收到一个错误：

> 将 varchar 值 'INSERT INTO TableRowCount (IntFieldID, DecimalField) SELECT ' 转换为数据类型 int 时转换失败

使用以下代码：

```
DECLARE @start INT -- @start is an INT
SET @start = 1 -- INT

DECLARE @sql NVARCHAR(MAX)
SET @sql = 'INSERT INTO TableRowCount (IntFieldID, DecimalField)
SELECT ' + @start +', COUNT(*)
FROM dbo.somewhere' -- location is irrelevant

EXECUTE(@sql) -- this is where it fails 
```

如果我删除`IntFieldID`和`@start`，它将与插入一起使用（尽管它违背了目的）。我试过包括 a `SELECT CAST(' + @start + ' AS INT)`，这似乎有点多余，因为`@start`它`INT`已经是 a （将 an 转换`INT`为`INT`），但这也不起作用。我还尝试从`N'` **DYNAMIC-SQL**开始，但没有成功，我尝试`'''`在所有内容中使用三个（没有工作），在我在线阅读的一些地方，响应建议将变量放入字符串中，这会生成错误：

> 必须声明标量变量@start

（毫不奇怪，因为这听起来不正确）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:43:52.767

比尝试连接整数更好的方法是将其作为强类型参数传递：

```
DECLARE @start INT = 1;

DECLARE @sql NVARCHAR(MAX) = N'INSERT ...
  SELECT @start, COUNT(*) FROM ' + @conn;

EXEC sp_executesql @sql, N'@start INT', @start; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T14:40:55.853

您需要将您的转换`@Start`为`varchar`.

```
DECLARE @sql NVARCHAR(MAX)
SET @sql = 'INSERT INTO TableRowCount (IntFieldID, DecimalField)
SELECT ' + CAST(@start as nvarchar(20)) +', COUNT(*)
FROM ' + @conn 
```

SQL Server 根据一些相当复杂的标准在连接或添加的数据类型之间隐式转换。可以说，如果您尝试将 an`int`和一个字符串组合在一起，它将始终尝试将字符串转换为 an `int`，除非您明确告知它。

下面是[来自 MSDN 的转换表供您参考。](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)

![在此处输入图像描述](../Images/6c9ebefc9cf6769e982d229a24cdf8bf.png)

# c++ - 无法从 C++ 中的字符串流中获取整数

> ID：15684703
> 
> 赞同：0
> 
> 时间：2013-03-28T14:39:55.080
> 
> 标签：c++

我只是搜索流（内存流或文件流）然后我找到了 fstream 和 stringstream

但是，我已经尝试了这两种方法，但是在获取整数时它总是给我错误的输出，我使用二进制文件来测试它（数据不是字符串，数据是一堆字节），这是我的代码：

```
#include <iostream>
#include <fstream>
#include <sstream>

using namespace std;
void getinfo(char* buffer, int length)
{
    stringstream stream(ios::in | ios::out | ios::binary);
    // write data to stream
    stream.write(buffer, length);

    // reset position
    stream.seekg(0);

    // get 4 bytes (value is OMC with null-byte at the end)
    char* format = new char[4];
    stream >> format;

    // get 4 byte (value is depending of file version)
    int ojmver = 0; 
    stream.read(reinterpret_cast<char*>(&ojmver), sizeof ojmver);

    // get 2 byte (encryption signature 1 that used for this file)
    short encsign1 = 0; 
    stream.read(reinterpret_cast<char*>(&encsign1), sizeof encsign1);

    // get 2 byte (encryption signature 2 that used for this file)
    short encsign2 = 0;
    stream.read(reinterpret_cast<char*>(&encsign2), sizeof encsign2);

    // get 4 byte (samples count)
    int samplecount = 0; 
    stream.read(reinterpret_cast<char*>(&samplecount), sizeof samplecount);

    // show info

    cout << "Format\t\t\t: " << format;
    cout << "\nOJM Ver\t\t\t: " << ojmver;
    cout << "\nEnc Sign1\t\t: " << encsign1;
    cout << "\nEnc Sign1\t\t: " << encsign2;
    cout << "\nSample Count\t\t: " << samplecount;
    cout << "\n\n";
}

int main()
{
    fstream fs = fstream("D:\\o2ma100.ojm", ios::in | ios::out | ios::binary);
    fs.seekg(0, fs.end);
    int length = fs.tellg();
    fs.seekg(0, fs.beg);

    char* buffer = new char[length];
    fs.read(buffer, length);

    if (fs)
        cout << "Length: " << length << "\nSuccess to load data\n";
    else
        cout << "Failed to load data\n";

    fs.seekg(0, fs.beg);

    // get 4 bytes (value is OMC with null-byte at the end)
    char* format = new char[4];
    fs.read(format, 4);

    // get 4 byte (value is depending of file version)
    int ojmver = 0; 
    fs.read(reinterpret_cast<char*>(&ojmver), sizeof ojmver);

    // get 2 byte (encryption signature 1 that used for this file)
    short encsign1 = 0; 
    fs.read(reinterpret_cast<char*>(&encsign1), sizeof encsign1);

    // get 2 byte (encryption signature 2 that used for this file)
    short encsign2 = 0;
    fs.read(reinterpret_cast<char*>(&encsign2), sizeof encsign2);

    // get 4 byte (samples count)
    int samplecount = 0; 
    fs.read(reinterpret_cast<char*>(&samplecount), sizeof samplecount);

    cout << "\nRead Data using fs:\n";

    cout << "Format\t\t\t: " << format;
    cout << "\nOJM Ver\t\t\t: " << ojmver;
    cout << "\nEnc Sign1\t\t: " << encsign1;
    cout << "\nEnc Sign1\t\t: " << encsign2;
    cout << "\nSample Count\t\t: " << samplecount;

    fs.close();

    cout << "\n\nRead Data Using stringstream:\n";
    getinfo(buffer, length);

    system("PAUSE");
    return 0;
} 
```

它给了我以下结果：

```
Length: 4231047 // -> this correct :)
Success to load data // -> this correct :)

Read Data using fs:
Format                  : M30    // -> this correct :)
OJM Ver                 : 196608 // -> this correct :)
Enc Sign1               : 16     // -> this correct :)
Enc Sign1               : 0      // -> this correct :)
Sample Count            : 300    // -> perfect :D

Read Data Using stringstream:
Format                  : M30         // -> this correct :)
OJM Ver                 : 50331648    // -> this wrong :(
Enc Sign1               : 4096        // -> this wrong :(
Enc Sign1               : 0           // -> this wrong :(
Sample Count            : 76800       // -> this wrong :(

Press any key to continue . . . 
```

我在 C#.NET 中创建了类似的应用程序，我测试了文件，它给了我正确的输出（在 C# 中使用 FileStream 和 MemoryStream 和 .NET Framework 2.0），这里是输出：

```
Length: 4231047 // -> Length is correct
Success to load data

Read Data using FileStream:
Format                  : M30     // -> this correct :)
OJM Ver                 : 196608  // -> this correct :)
Enc Sign1               : 16      // -> this correct :)
Enc Sign1               : 0       // -> this correct :)
Sample Count            : 300     // -> perfect :D

Read Data Using MemoryStream:
Format                  : M30     // -> this correct :)
OJM Ver                 : 196608  // -> this correct :)
Enc Sign1               : 16      // -> this correct :)
Enc Sign1               : 0       // -> this correct :)
Sample Count            : 300     // -> perfect :D 
```

我需要处理内存和文件的流，所以我需要如何使用两个流正确读取数据......

任何人都可以帮助我吗？我是 C++ 新手 谢谢 :D

**编辑**

我更改了代码，感谢 john，它适用于 fstream，但它仍然不适用于 stringstream

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:46:08.603

您使用了错误类型的 I/O。当您说您应该使用二进制 I/O 时，您正在执行文本 I/O。

例如不

```
int ojmver = 0; 
stream >> ojmver; 
```

但

```
int ojmver = 0; 
stream.read(reinterpret_cast<char*>(&ojmver), sizeof ojmver); 
```

当然，由于大小问题（您确定 int 是四个字节吗？）和字节顺序，这可能仍然不正确。

# java - 是否有系统属性可以知道设备在android中是移动设备还是平板电脑还是台式机？

> ID：15684705
> 
> 赞同：0
> 
> 时间：2013-03-28T14:39:59.263
> 
> 标签：java, android

嗨，是否有系统属性可以知道 JVM 正在哪个设备上运行。是要知道它是android中的手机还是平板电脑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:53:57.587

或者您可以使用 DisplayMetric 属性（宽度、高度）来查找设备是否是选项卡/移动设备。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
int width = metrics.widthPixels;
int height = metrics.heightPixels;

if (SharedCode.width > 1023 || SharedCode.height > 1023){
//code for big screen (like tablet)
}else{
//code for small screen (like smartphone)
} 
```

# jquery - 设置动态高度 in Google Chrome and Safari

> ID：15684707
> 
> 赞同：2
> 
> 时间：2013-03-28T14:40:09.877
> 
> 标签：jquery, google-chrome, iframe, browser, safari

I am developing a web application using Spring MVC framework, in one of my modules I have implemented an `<iframe>` to display user posts and comments. Now my problem is the `<iframe>` height should be set dynamically based on the contents in the `<iframe>`. I am using the following JavaScript for this purpose. It works fine in Firefox and Internet Explorer but not in Google Chrome and Safari. How to solve this problem?

```
function sizeFrame() {
  jQuery("#myframe", top.document).css({ height: 0 });
                        var iframe=document.getElementById('myframe');
                var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
                var the_height=0;
                 if (iframeWin.document.body) {
                 the_height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
                }
               jQuery("#myframe", top.document).css({ height: the_height }); 
              }

             </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:43:59.927

Add following code to your java script function that solves your problem,

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
var is_safari=navigator.userAgent.toLowerCase().indexOf('safari') > -1;
 if(is_chrome || is_safari)
{
jQuery("#myframe", top.document).css({ height: 0 }); 
var myframe = jQuery("#myframe");var innerDoc = (myframe.get(0).contentDocument) ? myframe.get(0).contentDocument : myframe.get(0).contentWindow.document;
var h;
if(innerDoc.body.scrollHeight)
 h=innerDoc.body.scrollHeight+35;
else
 h=innerDoc.documentElement.scrollHeight;
jQuery("#myframe", top.document).css({ height: h  }); 
} 
```

# android - Android Systrace 跟踪文件格式

> ID：15684715
> 
> 赞同：7
> 
> 时间：2013-03-28T14:40:32.537
> 
> 标签：android, linux, perf, ftrace, systrace

Android **systrace**工具，通过 ADB调用**atrace工具。**但是，我不太了解跟踪文件的格式。**显然它与 linux ftrace**工具非常相似，但有一些区别。主要区别在于它不使用**System.Map**文件，但它将所有信息包含在跟踪文件中。此外，还有特定于 android 的新 B|E 条目。

在 Android 源代码中有一些关于这种格式的信息：[http ://androidxref.com/4.1.1/xref/external/chromium-trace/src/tracing/linux_perf_importer.js](http://androidxref.com/4.1.1/xref/external/chromium-trace/src/tracing/linux_perf_importer.js)

但是，在该文档中，我们可以看到该格式属于 Linux **Perf** Tool。我不这么认为，linux perf 作为输出提供了一种非常不同的格式...（除非某些特殊配置处于活动状态...）

我的问题是：有人知道我在哪里可以找到关于使用adb 的**atrace**工具生成的 android 跟踪文件的官方文档吗？

这种格式你熟悉吗？

```
# tracer: nop
#
# entries-in-buffer/entries-written: 66427/66427   #P:2
#
#                              _-----=> irqs-off
#                             / _----=> need-resched
#                            | / _---=> hardirq/softirq
#                            || / _--=> preempt-depth
#                            ||| /     delay
#           TASK-PID   CPU#  ||||    TIMESTAMP  FUNCTION
#              | |       |   ||||       |         |
          atrace-1724  [000] d..3 14186.680000: sched_switch: prev_comm=atrace prev_pid=1724 prev_prio=120 prev_state=S ==> next_comm=swapper/0 next_pid=0 next_prio=120
          <idle>-0     [000] d.h7 14186.690000: sched_wakeup: comm=tfm_b6bcf800 pid=1714 prio=35 success=1 target_cpu=000
          <idle>-0     [000] d..3 14186.690000: sched_switch: prev_comm=swapper/0 prev_pid=0 prev_prio=120 prev_state=R ==> next_comm=tfm_b6bcf800 next_pid=1714 next_prio=35
    tfm_b6bcf800-1714  [000] d..3 14186.690000: sched_switch: prev_comm=tfm_b6bcf800 prev_pid=1714 prev_prio=35 prev_state=D|W ==> next_comm=swapper/0 next_pid=0 next_prio=120
          <idle>-0     [001] d.h3 14186.690000: sched_wakeup: comm=Player Aud Mixe pid=146 prio=35 success=1 target_cpu=001
          <idle>-0     [001] d..3 14186.690000: sched_switch: prev_comm=swapper/1 prev_pid=0 prev_prio=120 prev_state=R ==> next_comm=Player Aud Mixe next_pid=146 next_prio=35
 Player Aud Mixe-146   [001] d..3 14186.690000: sched_switch: prev_comm=Player Aud Mixe prev_pid=146 prev_prio=35 prev_state=D ==> next_comm=swapper/1 next_pid=0 next_prio=120
          <idle>-0     [001] d.h3 14186.690000: sched_wakeup: comm=Player Aud Mixe pid=146 prio=35 success=1 target_cpu=001
          <idle>-0     [001] d..3 14186.690000: sched_switch: prev_comm=swapper/1 prev_pid=0 prev_prio=120 prev_state=R ==> next_comm=Player Aud Mixe next_pid=146 next_prio=35
 Player Aud Mixe-146   [001] d..3 14186.690000: sched_switch: prev_comm=Player Aud Mixe prev_pid=146 prev_prio=35 prev_state=S ==> next_comm=swapper/1 next_pid=0 next_prio=120
          <idle>-0     [001] d.h3 14186.700000: sched_wakeup: comm=Player Aud Mixe pid=146 prio=35 success=1 target_cpu=001
          <idle>-0     [001] d..3 14186.700000: sched_switch: prev_comm=swapper/1 prev_pid=0 prev_prio=120 prev_state=R ==> next_comm=Player Aud Mixe next_pid=146 next_prio=35
  EventThread-110   [001] d..5 14190.100000: sched_wakeup: comm=SurfaceFlinger pid=103 prio=112 success=1 target_cpu=001
     EventThread-110   [001] d..3 14190.100000: sched_switch: prev_comm=EventThread prev_pid=110 prev_prio=111 prev_state=S ==> next_comm=SurfaceFlinger next_pid=103 next_prio=112
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|onMessageReceived
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|handleTransaction
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|doTransaction
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|handleMessageInvalidate
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|onMessageReceived
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|handleMessageRefresh
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|rebuildLayerStacks
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|computeVisibleRegions
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: E
  SurfaceFlinger-103   [001] ...1 14190.100000: tracing_mark_write: B|96|doComposition
  SurfaceFlinger-103   [001] d.h4 14190.100000: sched_wakeup: comm=surfaceflinger pid=96 prio=120 success=1 target_cpu=001
  SurfaceFlinger-103   [001] d..3 14190.100000: sched_switch: prev_comm=SurfaceFlinger prev_pid=103 prev_prio=112 prev_state=R ==> next_comm=surfaceflinger next_pid=96 next_prio=120 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:00:51.883

好了，现在可以确定了：格式属于**ftrace**工具。Android **atrace**是**ftrace** build 的扩展，方便配置。

来自**ftrace**的官方文档显示，可以通过以下方式直接生成此输出格式：

```
root@adroid:# echo 1 > /sys/kernel/debug/tracing/events/sched/sched_switch/enable
root@adroid:# echo 1 > /sys/kernel/debug/tracing/tracing_on
root@adroid:# cat /sys/kernel/debug/tracing/trace > mytracefile.txt
root@adroid:# echo 0 > /sys/kernel/debug/tracing/tracing_on
root@adroid:# echo 0 > /sys/kernel/debug/tracing/events/sched/sched_switch/enable 
```

官方文档位于： http: [//git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/trace/ftrace.txt](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/trace/ftrace.txt)

```
# cat trace
# tracer: nop
#
# entries-in-buffer/entries-written: 77/77   #P:8
#
#                              _-----=> irqs-off
#                             / _----=> need-resched
#                            | / _---=> hardirq/softirq
#                            || / _--=> preempt-depth
#                            ||| /     delay
#           TASK-PID   CPU#  ||||    TIMESTAMP  FUNCTION
#              | |       |   ||||       |         |
          <idle>-0     [007] d...  2440.707395: sched_switch: prev_comm=swapper/7 prev_pid=0 prev_prio=120 prev_state=R ==> next_comm=snapshot-test-2 next_pid=2243 next_prio=120
 snapshot-test-2-2229  [002] d...  2440.707438: sched_switch: prev_comm=snapshot-test-2 prev_pid=2229 prev_prio=120 prev_state=S ==> next_comm=swapper/2 next_pid=0 next_prio=120
[...] 
```

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T17:42:55.660

很棒的帖子但是不要忘记安装调试文件系统，

```
"mount -t debugfs none /sys/kernel/debug" or 
"mount -o rw,remount -t debugfs none /sys/kernel/debug" 
```

否则你不会得到类似的东西

> “打开/sys/kernel/debug/tracing/options/overwrite时出错：没有这样的文件或目录”

运行跟踪时

这里有一些更有用的信息[http://rahulonblog.blogspot.se/2013/06/how-to-enable-debugfs-in-kernel.html](http://rahulonblog.blogspot.se/2013/06/how-to-enable-debugfs-in-kernel.html)

# java - utf-8 编码、java、mysql 和表单插入问题

> ID：15684717
> 
> 赞同：1
> 
> 时间：2013-03-28T14:40:37.963
> 
> 标签：java, mysql, jsp, encoding, utf-8

我有一个 utf-8 mysql 数据库。

在我的 jsp 文件中，我使用：

```
 <%@ page pageEncoding="UTF-8"%>
 ...
 <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

我的浏览器编码是 UTF-8。

在一个表单中，我有一个输入文本。

当我提交表单时，如果输入文本的值包含，例如：

```
à è é à ò ù € 
```

它在数据库中插入了一个“错误”的字符串。

提交后，如果我打印输入的文本内容已经包含“奇怪”的字符。

当我在任何地方使用 utf-8 时，我都无法理解我必须改变什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:54:59.117

首先，DB 编码为 UTF-8 是不够的，您还应该通过附加`useEncoding=true&characterEncoding=UTF-8`到 JDBC URL 来在驱动程序连接处指定编码

其次，页面编码不会影响浏览器对文本进行编码的方式。您还应该注意请求级别的编码：`request.setCharacterEncoding("UTF-8")`

# sql - 带有影响第二次连接的 WHERE 子句的内部连接

> ID：15684718
> 
> 赞同：0
> 
> 时间：2013-03-28T14:40:40.487
> 
> 标签：sql, syntax-error, inner-join, where-clause

我有这个查询，顶部的内部连接工作正常，但是当我添加第二个连接时，我在“INNER”附近收到不正确的语法，有人知道为什么吗？

```
SELECT  Time_ID,
    Site_Type_ID,
    SUM (staging.dbo.incoming_measure.ring_time) AS Ring_Time,
    SUM (staging.dbo.incoming_measure.hold_time) As Hold_Time,
    SUM (staging.dbo.incoming_measure.talk_time) AS Talk_Time,
    SUM (staging.dbo.incoming_measure.acw_time) AS ACW_Time
FROM staging.dbo.incoming_measure
      INNER JOIN
   (SELECT Time_ID FROM datamartend.dbo.Time_Dim ) TimeID
      ON TimeID.Time_ID = incoming_measure.StartTime

      INNER JOIN 
   (SELECT Site_Type_ID, Site_Type_Code FROM datamartend.dbo.Site_Type_dim) SiteID
      ON SiteID.Site_Type_ID = incoming_measure.DBID

WHERE StartTimeDate BETWEEN StartTimeDate AND EndTimeDate  
   AND
WHERE SiteId.Site_type_code = incoming_measure.DBID

GROUP BY time_id, site_type_id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:47:17.217

您必须将您的`WHERE`向下移动到`GROUP BY`：

```
WHERE StartTimeDate BETWEEN StartTimeDate AND EndTimeDate
AND SiteId.Site_type_code = incoming_measure.DBID

Group by time_id, site_type_id 
```

# javascript - jQuery 正则表达式验证

> ID：15684722
> 
> 赞同：0
> 
> 时间：2013-03-28T14:40:46.130
> 
> 标签：javascript, jquery, regex, forms, validation

我想用一个在我的表单上调用 onsubmit 的小 jQuery 函数来验证用户输入客户端。我希望字段 #fname（名字）只允许 az、AZ 和空格。return false 应该是阻止表单提交。

```
function validateregister(){
    if (!($("fname") =~ [a-zA-Z ])) {
        return false;
    }
} 
```

这是我的 HTML：

```
<input type="submit" value="Join now!" id="registersubmit" class="paddingoutline2" onsubmit="return validateregister()"> 
```

当然，稍后我将在服务器端验证用户输入。当我提交表单时，它给了我一个“内部服务器错误”。这让我觉得我在函数 validateregister() 中犯了一个错误。有什么不对的吗？如果我对 jQuery 很陌生，那么任何帮助都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:42:22.963

你想要的是

```
function validateregister(){
    return /^[a-zA-Z ]+$/.test($('#fname').val());
} 
```

除了修复建议使用`val`和[测试](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)功能的选择器外，我还冒昧地更改了正则表达式：

*   `^`并`$`强制测试覆盖整个字符串
*   `+`至少需要一个字符

但是你知道如果你想让人们输入他们的真实名字，这个正则表达式可能太严格了吗？例如，您的不会通过...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:50:30.120

您必须以这种方式使用正则表达式：

```
function validateregister(){
    var nameRgx = /[a-zA-Z]/;
    var phoneRgx = /[0-9]/;
    if (!nameRgx.test($("#fname").val())) {
       return false;
    }
    if (!phoneRgx.test($("#phone").val())) {
       return false;
    }
} 
```

并确保使用带有`#`id 表示法或`.`类表示法的 Either 引用您的元素。在您的代码中，您没有以正确的方式引用您的元素。

```
^ ---->Start of a string. 
$ ---->End of a string. 
. ----> Any character (except \n newline) 
{...}----> Explicit quantifier notation. 
[...] ---->Explicit set of characters to match. 
(...) ---->Logical grouping of part of an expression. 
* ---->0 or more of previous expression. 
+ ---->1 or more of previous expression. 
? ---->0 or 1 of previous expression; 
       also forces minimal matching when an expression might 
       match several strings within a search string. 
```

[有关正则表达式写作的更多信息](http://geekswithblogs.net/brcraju/archive/2003/10/23/235.aspx)

# c - 循环遍历链表 - 无限循环

> ID：15684730
> 
> 赞同：0
> 
> 时间：2013-03-28T14:40:59.197
> 
> 标签：c, arrays, list, loops, linked-list

自学编程后，我决定制作一个简单的功率计算器。每个州都有不同的（平均）价格/KWh。我的问题从代码中的第 34 行开始。curr->next 永远不会为空。

我究竟做错了什么？

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

float calculate(float w, float cents, float h);

struct states 
{
    char *name;
    char *price;
    struct states *next;
};

int main()
{
    float watts,hours,cents;
    int a = 0;
    struct states *curr, dict[52];
    char st_ab[52][3] = {"ID","ND","WA","AR","UT","LA","WY","SD","NE","KY","WV","OK","OR","MT","MS","TN","IN","NC","MS","IA","KS","VA","NM","MN","SC","AZ","GA","AL","CO","OH","TX","IL","FL","NV","MI","WI","PA","MD","DC","DE","MA","RI","CA","ME","VT","NJ","NH","AK","CT","NY","HI"};
    char st_pr[52][5] = {"8.0","8.1","8.2","8.7","8.8","8.9","8.9","9.0","9.0","9.0","9.2","9.2","9.4","9.6","9.7","9.8","10.0","10.2","10.3","10.5","10.5","10.5","10.7","10.9","11.0","11.1","11.1","11.1","11.2","11.2","11.3","11.7","11.7","11.7","13.0","13.0","13.2","13.7","13.7","13.7","14.8","14.9","15.2","15.5","16.1","16.3","16.5","17.5","18.1","18.1","33.2"};
    char state[2];

    for(a=0;a<=52;a++)
    {
        memset(&dict[a],0,sizeof(struct states)); /* zero out structure */
        if(a==52)
        {
            break;  /* if this is the last struct, leave it NULL so we can loop through linked list */
        }
        dict[a].next=&dict[a+1];        
    }

    for(curr = dict;curr ->next != NULL;curr = curr->next)  /* fill our list with state abbr. and cost/KWh */
    {
        curr->name = st_ab[a];
        curr->price = st_pr[a];
        a++;
    }

    puts("Dictionary loaded!");
    printf(" Two letter state code: ");                 /* get info from user */
    scanf("%s",state);

    printf(" Wattage of appliance: ");
    scanf("%f",&watts);

    printf(" Hours of use per day: ");
    scanf("%f",&hours);

    for(curr = dict; curr->next != NULL; curr=curr->next)
    {
        printf("comparing %s with %s\n", curr->name,state);  /* search for our state, set cents respectively */
        if((strcmp(curr->name,state)) == 0)
        {
            printf("State found! -- %s\n",state);
            cents=atof(curr->price);
            printf("%f cents\n",cents);
            break;
        } else {
            printf("state didn't match\n");
            continue;
        }
    }

    printf("\nAverage cost per day: %.2f\n",  calculate(watts,cents,hours));
    printf("Average cost per year: %.2f\n\n", (calculate(watts,cents,hours)) * 365);    

    return 0;

}

float calculate(float w, float c, float h)
{   
    float kwh = (w/1000) * h;
    float cos = kwh*(c/100);
    return(cos);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:43:57.907

问题出在

```
dict[a].next = &dict[a+1]; 
```

C 标准保证`&dict[a+1]`永远不会为 NULL，即使它在数组末尾之后也是如此。这会导致下一个循环超出列表的末尾，从而导致未定义的行为（程序可能会做任何事情）。在第一个循环之后，执行

```
dict[51].next = NULL; 
```

结束链表。

**编辑**：`for(a=0;a<=52;a++)`实际上，您将两个元素移过数组的末尾，因此行为在两个地方是未定义的。要解决这个问题，您需要循环直到`a<52`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:43:43.990

“curr->next 永远不会为空” - 好吧，如果您的停止条件是 curr->next 等于 null，您如何期望您的 for 循环停止？

# java - 从带有天气的 xml 文件中提取字段

> ID：15684733
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:41:02.967
> 
> 标签：java, xml, parsing

有一个带有类似结构的 XML 文件

```
<codes>
    <condition>
        <code>395</code>
        <description>Moderate or heavy snow in area with thunder</description>
        <day_icon>wsymbol_0012_heavy_snow_showers</day_icon>
        <night_icon>wsymbol_0028_heavy_snow_showers_night</night_icon>
    </condition>
    <condition>
        <code>392</code>
        <description>Patchy light snow in area with thunder</description>
        <day_icon>wsymbol_0016_thundery_showers</day_icon>
        <night_icon>wsymbol_0032_thundery_showers_night</night_icon>
    </condition>
</codes> 
```

如何编写函数，那将仅通过代码响应描述

作为 func(395) 返回@雷区中的中雪或大雪@

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:16:39.333

您可以使用以下 XPath：

```
/codes/condition[code='395']/description/text() 
```

这是在 java 中使用 XPath 的示例：http: [//www.ibm.com/developerworks/library/x-javaxpathapi/index.html](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:58:44.613

一个简单的方法是使用正则表达式来提取值。它快速高效（为什么将所有内容都解析到内存中（dom）。

```
public static String extractDescription(String code, String xmlData){
        //search for the entire condition element based on the id
        Pattern elementPattern=Pattern.compile("<condition><code>"+code+"</code><description>(.*?)</description>.*</condition>");

        Matcher elementMatcher=elementPattern.matcher(xmlData);

        if(elementMatcher.groupCount()>0){//if we have some groups to match in our pattern
            if(elementMatcher.find()){//find the matches
                return elementMatcher.group(1);
            }
            else{//no match found
                return null;
            }
        }
        else{//our pattern is useless and does not contain any groups to match
            return null;
        }
    } 
```

这里唯一繁重的操作是 Pattern.compile(..) 但它仍然相当快。

# php - 如何使用 PHP DOMDocument 获取属性键而不是值

> ID：15684734
> 
> 赞同：0
> 
> 时间：2013-03-28T14:41:04.643
> 
> 标签：php, domdocument

我有一个 html 字符串

```
$html_string = '<div style="font-family:comic sans ms,cursive;">
<div style="font-size:200%;">Some Text </div></div>'; 
```

我试过了

```
$dom = new DOMDocument;
$dom->loadHTML($html_string);
$divs = $dom->getElementsByTagName('div');

for($i=0;$i<$divs->length;$i++) {
$attrib = $divs->item($i)->getAttribute("style");
echo $attrib;
echo '<br />';
} 
```

它给出以下输出

```
font-family:comic sans ms,cursive
font-size:200%; 
```

我需要

```
font-family
font-size 
```

我怎样才能只得到这些键而不是它们的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:57:20.093

你可以使用正则表达式来做到这一点。像这样的东西：

```
$style = 'font-family:comic sans ms,cursive;font-size:15em';
preg_match_all('/(?<names>[a-z\-]+):(?<params>[^;]+)[; ]*/', $style, $matches);

var_dump($matches['names']);
var_dump($matches['params']); 
```

结果：

```
array
  0 => string 'font-family' (length=11)
  1 => string 'font-size' (length=9)

array
  0 => string 'comic sans ms,cursive' (length=21)
  1 => string '15em' (length=4) 
```

这甚至可以与多个 css 参数一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:12:48.450

使用 CSS 解析器！

`explode`所有带有正则表达式的答案本质上都是错误的。这是您要分析的 CSS 源代码。简单的文本操作永远不会正确地做到这一点。例如`background-image:url('http://my.server.com/page?a=1;b=2'); list-style-image:url('http://my2.server.com/page/a=1;b=2')`，完全有效，包含这两个属性`background-image`，`list-style-image`并且大多数文本处理将失败，因为文本中间有分号或 4 个冒号（两者都会被错误的解决方案误认为指示 4 个属性）。

一般来说，永远不要尝试在源代码中摆弄文本操作工具；不适用于 CSS、HTML 或其他任何源代码。语言的设计比这更复杂。这就是解析器要完成的任务，这也是它们为什么大的原因——或者至少比 strpos() 更复杂......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:42:30.530

[`explode`](http://www.php.net/explode)在当前输出上使用，然后继续使用从 explode 收到的第一个元素

# spring - 当我在 web.xml 中添加 spring 安全配置时，我收到错误“未找到 WebApplicationContext：没有注册 ContextLoaderListener？”

> ID：15684736
> 
> 赞同：1
> 
> 时间：2013-03-28T14:41:24.620
> 
> 标签：spring, spring-security

当我将以下内容添加到 web.xml

```
 <filter>
     <filter-name>springSecurityFilterChain</filter-name>
     <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
         <param-name>contextAttribute</param-name>
    <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.spring</param-value>
    </init-param>
    </filter>

    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我收到以下错误

```
java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251) 
```

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:08:15.033

我看到您没有附加整个 web.xml。从你得到的异常中，我假设你没有配置 Spring IoC 容器，它是 Spring 的一个组成部分。

您有几种方法可以这样做，这是一种方法（在您的 web.xml 中）：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

您可以从一个空的 applicationContext.xml 开始，这是一个示例：

```
<?xml version="1.0" encoding="utf-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:flex="http://www.springframework.org/schema/flex" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/flex
    http://www.springframework.org/schema/flex/spring-flex-1.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
">
</beans> 
```

您可以在此处阅读有关 Spring 配置的更多信息

[Spring IoC 容器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#context-create)

# php - 在 Symfony2 中自定义选择/实体字段的呈现

> ID：15684751
> 
> 赞同：10
> 
> 时间：2013-03-28T14:42:07.483
> 
> 标签：php, symfony, rendering, customization

我希望一个`<select>`元素在其`<option>`s 上使用附加数据进行渲染。例如，我想要一个服务选择器（非多个实体字段），在选择更改时重置另一个输入值。我对使用 JS 数据结构不感兴趣，我需要渲染的字段如下所示：

```
<select name="...">
    <option value="1" data-price="90">Service 1</option>
    <option value="2" data-price="40">Service 2</option>
</select> 
```

我会采用两种不同的解决方案，并且很高兴看到它们的答案。

1.  `form`通过使用传递给树枝的变量开始组装上述 HTML 代码，我将在 Twig 中手动呈现该字段。我有两个问题解决这个问题。**A)**我找不到一种安全的方法来告诉文件应该命名什么，即如何`name`通过使用变量获得 Symfony 期望的属性`form.service`（服务是 FormType 中字段的名称）。[请原谅我根据Symfony*当前*如何命名字段来连接一些值的技巧；应该依赖接口而不是逆向工程。] **B）**我不知道如何访问选项列表，即由`entity`字段组装的数组`query_builder`选项。[因为我正在寻找一个通用的解决方案，我不愿意将这些项目复制到控制器中的一个 twig-parameter ——只是为了避免这样的建议。]
2.  正如食谱的表单样式章节中所建议的那样，我会覆盖相关字段块的呈现，但这存在三个问题。**A）**我找不到应该覆盖哪些块（所以我找不到样本）。**B）**我会将参数从表单构建器传递给块，让它知道`data-`要呈现哪些额外属性，但我不知道该怎么做。最后是**C）**在那些我不需要偏离标准渲染的情况下（例如，当字段是多个时）我不知道如何回退到默认渲染。

所以这些实际上是 5 个问题（1A、1B、2A、2B、2C），但我认为它们对一起回答的其他人更有用，因为它们都解决了我认为关于选择字段渲染的未记录点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-25T04:17:31.753

**1.**手动渲染。最好是单独的字段表单，而不是在某个地方重复，因为它需要更少的时间来工作。

**A）**获取您可以使用的字段名称`form.service.vars.full_name`

**B)**选择列表 - `form.service.vars.choices`。它是一个数组`ChoiceView`，要让实体简单地访问公共`data`财产。

```
{% for choice in form.service.vars.choices %}
    {% set service_entity = choice.data %}
{% endfor %} 
```

**2.**通过覆盖模板。如果您喜欢蛮力选择必须覆盖的块的名称。

**A）**您只能按照[文档](http://symfony.com/doc/current/book/forms.html#form-fragment-naming)所述覆盖`widget`,`label`和`errors`块。您可以按小部件名称（[文档](http://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field)）指定块。就像是

```
{% block _form_service_widget %}
    {% if expanded %}
        {{ block('choice_widget_expanded') }}
    {% else %}
        {{ block('my_service_widget') }}
    {% endif %}
{% endblock %}

{% block my_service_widget %}
{% spaceless %}
    <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
        {% if empty_value is not none %}
            <option value="">{{ empty_value|trans({}, translation_domain) }}</option>
        {% endif %}
        {% set options = choices %}
        {{ block('my_service_options') }}
    </select>
{% endspaceless %}
{% endblock my_service_widget %}

{% block my_service_options %}
{% spaceless %}
    {% for group_label, choice in options %}
        {# here you can access choice #}
        <option value="{{ choice.value }}"{% if choice is selectedchoice(value) %} selected="selected"{% endif %}>{{ choice.label|trans({}, translation_domain) }}</option>
    {% endfor %}
{% endspaceless %}
{% endblock my_service_options %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-22T06:35:56.123

您可以使用`choice_attr`表单构建器中的选项：

```
$builder->add('myField', ChoiceType:class, [
        ....
        'choice_attr' => function($val, $key, $index) {
            return ['data' => '...', 'class' => '', ... etc ];
        },
        ....
]); 
```

这会将属性应用于您选择的每个`option`, `checkbox`, `radio`（取决于您`expanded`和`multiple`选项的选择）

# java - 用java提取xml数据

> ID：15684753
> 
> 赞同：1
> 
> 时间：2013-03-28T14:42:13.890
> 
> 标签：java, javascript, xml, webpage

我用 Java 编写了一个应用程序，用于在一个共享目录中对数千个教育资源进行分类。我收集了 XML 文件中的信息，例如：

```
<Resources>
   **<resource>**
      <name>resource_name</name>
      <path>path_to_resource</path>
      <subjects>
         <sub>ICT</sub>
         <sub>Maths</sub>
      </subjects>
      <topics>
         <top>functions_&amp;_formulae</top>
         <top>average(mean)</top>
     </topics>
     <!--more tags>
 **</resource>
   <resource>**
       <name>resource_two</name>
       <path>path_to_resource_two</path>
       <subjects>
         <sub>Literacy</sub>
       </subjects>
   <topics>
       <top>commas_in_a_list</top>
   </topics>
   <!--more tags> 
```

 **该应用程序允许用户根据主题、主题、级别等标记和描述资源。结果将写入完整的资源列表（如上），并写入特定主题相关文件。我编写了 XSL 样式表以使这些样式表对用户可读。我想创建一个过滤器，以便用户可以搜索，例如，“commas_in_a_list”，它将返回所有资源的所有数据，并将其作为标签值。我想在网页中显示数据。我不是专门在这里寻找代码，而是寻求建议。这可以用Java完成还是我最好研究一下Javascript或其他东西？非常感谢您的建议。问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:54:12.917

根据我的理解，您将需要所有这些技术，而 Java 是您完成复杂任务的主要语言。

对于强大的自定义功能，我建议您[在 Sourceforge 上使用 JavaWebParts taglib](http://ajaxtags.sourceforge.net/)。

希望这可以帮助 ：）**

# javascript - 文本字段上的密码 int - 没有 jQuery/CSS3/HTML5

> ID：15684754
> 
> 赞同：1
> 
> 时间：2013-03-28T14:42:15.967
> 
> 标签：javascript, passwords, textfield, onblur, onfocus

```
<input type="text" name="theName" value="password"
onblur="if(this.value == ''){ this.value = 'password'; this.style.color = '#333'; this.type="text";}"
onfocus="if(this.value == 'password'){ this.style.color = '#666';}"
onkeypress="if(this.value == 'password'){ this.value = ''; this.style.color = '#000';this.type="password";}"
style="color:#BBB;" /> 
```

像这样，如果文本字段处于焦点上但没有写任何东西，则 DefaultValue 将以较浅的颜色可见。（更像 facebook 搜索栏）...但是 id 不起作用...我写错了什么？

我不明白的另一件事是，如果我使用这个 javascript 并将其放入这样的标签中：

```
<script type="text/javascript">
function passfocus(){
   if(this.value == 'password'){this.style.color = '#666';}}
function passblur(){
   if(this.value == 'password'){ this.style.color = '#666';}}
function passkey(){
   if(this.value == 'password'){
      this.value = ''; this.style.color = '#000';this.type="password";}}
</script> 
```

我在文本字段中调用这个脚本，如下所示：

```
<input type="text" name="theName" value="password" onblur="passblur()"
onfocus="passfocus()" onkeypress="passkey()" style="color:#BBB;" /> 
```

什么都没有了……我想我把一切都搞砸了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:45:12.573

为什么不简单地使用`placeholder`HTML5 属性？

```
<input type="text" placeholder="Default value"/> 
```

# php - 使用 PHP POST 方法写入特殊字符

> ID：15684755
> 
> 赞同：1
> 
> 时间：2013-03-28T14:42:16.510
> 
> 标签：php, html, forms, encoding, character-encoding

我有一个表单，我正在使用 PHP 文件将其内容写入文本文件。我的问题是，每当我尝试编写特殊字符（例如 è é à á ä 等）时，它们都会被其他奇怪的字符（例如 Ã¨ Ã© Ã）替换。

我环顾四周，但不同论坛上建议的解决方案都没有解决我的问题。

在这里你可以找到我正在谈论的 HTML 表单：http: [//beginninghtml.altervista.org/InfinitySMS_Web/index.html](http://beginninghtml.altervista.org/InfinitySMS_Web/index.html)

处理我的 html 表单的 PHP 文件是`http://beginninghtml.altervista.org/InfinitySMS_Web/process-form-data.php`：

```
$phonenum = $_POST['phonenum'];
$messagetext = $_POST['messagetext'];
$types=$_POST['types'];
$message=stripslashes($messagetext);
//if no message entered and no mobile num entered print an error 
if (empty($phonenum) && empty($messagetext)){
print "Non sono stati inseriti il testo del messaggio e il numero del destinatario.<br>Inseriscili per poter inviare il tuo messaggio.";
}
//if no message entered send print an error 
elseif (empty($messagetext)){
print "Non è stato inserito alcun testo per il messaggio.<br>Inseriscilo per poter inviare il tuo messaggio.";
}
//if no mobile num entered send print an error 
elseif (empty($phonenum)){
print "Non è stato inserito il numero del destinatario.<br>Inseriscilo per poter inviare il tuo messaggio.";
}
elseif (strlen($phonenum)<11){
    if (strlen($phonenum)>9){
        //if the form has both a phone number and a text message. 
        //write data to the file
        $name = $_POST['phonenum'];
        $email = $_POST['messagetext'];
        $fp = fopen("formdata.txt", "a");
        $savestring = $name . "!$@$!;" . $email . "!$@$!;\n";
        fwrite($fp, $savestring);
        fclose($fp);
        header("location:success.html");
    }
    else
    {
        print "Il numero di cellulare inserito non è corretto: il numero del destinatario deve contenere 10 cifre.";
    }
} 
```

这里是包含所谓“奇怪”字符的 txt 文件的 URL：http: [//beginninghtml.altervista.org/InfinitySMS_Web/formdata.txt](http://beginninghtml.altervista.org/InfinitySMS_Web/formdata.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:49:09.183

认为您错过了在您的`header()`

`Add header('Content-Type: text/html; charset=utf-8');`一切都应该没问题。

另外，请确保您的 formdata.txt 文件也有 utf-8 编码

# http - HTTP 405——网络服务器合规性

> ID：15684764
> 
> 赞同：8
> 
> 时间：2013-03-28T14:42:51.387
> 
> 标签：http, rest, web, web-frameworks

[RFC](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.6)规定：

> 10.4.6 405 方法不允许

> Request-URI 所标识的资源不允许使用 Request-Line 中指定的方法。响应必须包含一个 Allow 标头，其中包含所请求资源的有效方法列表。

但是，我无法识别出符合该 MUST 的单个服务器。

我可以看到，考虑到存在的代理、动态应用程序等的多样性，现代 Web 服务器很难满足*这一要求。*

1.  为什么，从历史上看，这个要求是有意义的？
2.  有什么依赖于这种行为，或者曾经有过吗？它的用例是什么？
3.  是否*有任何*Web 服务器“正确”实现了 http 的这一方面？据我所知，IIS（至少在使用 ASP.NET 时）甚至某些“RESTful”API 在提供虚假方法时返回 404 而不是 405。

此外，为什么服务器会为诸如 BOGUS 之类的方法返回 405，这些方法显然不是由服务器实现的，即使在提供文档而不是代理或调用某些代码（cgi/etc）时，它们应该返回 501？

HTTP 的这些部分是否应该被认为是“残留的”，如果有服务器符合规范的话，是否应该被视为很少？

* * *

实际上，大多数框架正确返回“允许”并不难。我知道的所有框架都需要指定将调用特定控制器的方法（通常默认为 GET），并且代码可以轻松地向框架注册扩展方法以使其返回。

到目前为止，证据似乎表明：a）没有人阅读规范，也没有人知道这个要求，b）没有人关心这个特性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-09T12:15:35.487

试图直接回答问题：

1.  该要求**仍然**有意义，尤其是 - 正如[Meryn 对 HATEOAS API 的评论](https://stackoverflow.com/questions/15684764/http-405-web-server-compliance#comment22277454_15684764)所说。

2.  由于[服务器是“一个接受连接以通过发回响应来为请求提供服务的应用程序”](https://www.rfc-editor.org/rfc/rfc2616#section-1.3)，因此很容易说是 - 网络上有依赖于它的应用程序。;) 一个这样的用例是响应with`405`以指示资源不是[“工厂资源”](http://books.google.com/books?id=XUaErakHsoAC&pg=PA230&lpg=PA230&dq=http%20rest%20%22factory%20resource%22&source=bl&ots=5kclEjqFnB&sig=fup9F4-kJlefGeEZAsk0EKIa7nQ&hl=en&sa=X&ei=sllfVOv_EY3-yQSpt4D4Cw&ved=0CEcQ6AEwBg#v=onepage&q=http%20rest%20%22factory%20resource%22&f=false)。`POST /resource/1/``Allow: GET, HEAD, PUT, DELETE`

3.  由于资源上允许的方法可能因应用程序逻辑而异，因此我们还应该考虑应用程序服务器 - 正如您在问题中指出的那样。在这种情况下，是的 - 例如，[django 返回一个`Allow`带有`405`响应](https://github.com/django/django/blob/ebc8e79cf3bdd42a99e91d6e679248d07097d3db/django/http/response.py#L485-L490)的正确标头。

# delphi - 如何防止 Firemonkey TLang 翻译太长而无法放入表单中的元素

> ID：15684768
> 
> 赞同：0
> 
> 时间：2013-03-28T14:43:08.690
> 
> 标签：delphi, localization, firemonkey, delphi-xe3, firemonkey-fm2

当我使用新的 TLang 本地化应用程序并且翻译的文本比原始文本长得多时，它会不会破坏我的布局，例如，因为按钮可能太小而无法适应翻译的文本？你怎么处理这个？或者是否可以根据翻译字符串的长度调整字体大小（我知道我可以对表单上的每个元素执行此操作，例如使用 Canvas.TextWidth() 但这会很痛苦）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T05:21:18.930

使用 autosize 属性，并将您的 Tlayout 组件与其父级的 alContents 对齐。

例子：

```
Layou1.ALign:=alContents;
Label1.Autosize:=True; 
```

# django - Django Postgres psycopg2 生成错误脚本 - 引用表名

> ID：15684769
> 
> 赞同：1
> 
> 时间：2013-03-28T14:43:16.253
> 
> 标签：django, postgresql, psycopg2

Django 1.5
PostgreSQL 9.2
psycopg2 2.4.6

我正在使用 QuerySet API 中的额外功能，以便能够为 Postgres 使用多维数据集扩展中的函数 - 我知道出于可移植性原因，额外功能不是很好，但无论如何我不会使用另一个数据库（不是在 Postgres 之后，不！）。所以问题是我从这段代码中得到了错误的 SQL 查询：

```
return self.select_related('item_place').extra(
            select={ 'distance': 'round(earth_distance(ll_to_earth(%s, %s), ll_to_earth(%s.latitude, %s.longitude))::numeric, 0)' },
            select_params=[latitude, longitude, ItemPlace._meta.db_table, ItemPlace._meta.db_table],
            where=['round(earth_distance(ll_to_earth(%s, %s), ll_to_earth(%s.latitude, %s.longitude))::numeric, 0) <= %s'],
            params=[latitude, longitude, ItemPlace._meta.db_table, ItemPlace._meta.db_table, radius]) 
```

似乎 psycopg2 用单引号将表名括起来，这对于 Postgres 是不正确的，在正在执行的脚本中我可以看到：

```
round(earth_distance(ll_to_earth(%s, %s), ll_to_earth('item_place'.latitude, 'item_place'.longitude))::numeric, 0) 
```

我应该使用表名，因为我在另一个表中有纬度和经度，没有它我会得到“模糊列”错误。现在我不知道，也许我做错了，这就是为什么我得到这个错误或者它可能是 psycopg2 中的一个错误？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:42:12.190

根据[doc](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#django.db.models.query.QuerySet.extra)，`params`and`select_params`用于指示 Psycopg2 引用参数。它不适用于引用表名（通过双引号完成）。

引用[Psycopg2 的文档](http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)：

> 只有变量值应该通过这种方法绑定：它不应该用于设置表或字段名。对于这些元素，应该在运行 execute() 之前使用普通的字符串格式。

此外，我们通常不会使用需要双引号作为表名的标识符，请参阅[此答案的注释](https://stackoverflow.com/a/10891404/165603)。因此，直接在代码中使用表名是安全的：

```
return self.select_related('item_place').extra(
        select={ 'distance': 'round(earth_distance(ll_to_earth(%s, %s), ll_to_earth({tbl}.latitude, {tbl}.longitude))::numeric, 0)'.format(tbl=ItemPlace._meta.db_table) },
        select_params=[latitude, longitude],
        where=['round(earth_distance(ll_to_earth(%s, %s), ll_to_earth({tbl}.latitude, {tbl}.longitude))::numeric, 0) <= %s'.format(tbl=ItemPlace._meta.db_table)],
        params=[latitude, longitude]) 
```

# linux - 如何可移植地扩展使用 mmap() 访问的文件

> ID：15684771
> 
> 赞同：30
> 
> 时间：2013-03-28T14:43:20.080
> 
> 标签：linux, macos, mmap

我们正在尝试更改嵌入式数据库系统 SQLite，以使用 mmap() 而不是通常的 read() 和 write() 调用来访问磁盘上的数据库文件。对整个文件使用单个大型映射。假设文件足够小，我们可以毫不费力地在虚拟内存中找到它的空间。

到目前为止，一切都很好。在许多情况下，使用 mmap() 似乎比 read() 和 write() 快一点。在某些情况下更快。

调整映射大小以提交扩展数据库文件的写入事务似乎是一个问题。为了扩展数据库文件，代码可以这样做：

```
 ftruncate();    // extend the database file on disk 
  munmap();       // unmap the current mapping (it's now too small)
  mmap();         // create a new, larger, mapping 
```

然后将新数据复制到新内存映射的末尾。但是，munmap/mmap 是不可取的，因为这意味着下次访问数据库文件的每个页面时都会发生次要页面错误，并且系统必须在 OS 页面缓存中搜索正确的帧以与虚拟内存地址相关联。换句话说，它会减慢后续的数据库读取速度。

在 Linux 上，我们可以使用非标准的 mremap() 系统调用代替 munmap()/mmap() 来调整映射大小。这似乎避免了轻微的页面错误。

问题：在没有 mremap() 的其他系统（如 OSX）上应该如何处理？

* * *

目前我们有两个想法。还有一个关于每个问题的问题：

1) 创建大于数据库文件的映射。然后，在扩展数据库文件时，只需调用 ftruncate() 来扩展磁盘上的文件并继续使用相同的映射。

这将是理想的，并且似乎在实践中有效。但是，我们担心手册页中的这个警告：

“更改映射的基础文件大小对与文件的添加或删除区域相对应的页面的影响是未指定的。”

问题：这是我们应该担心的事情吗？还是在这一点上不合时宜？

2) 扩展数据库文件时，使用 mmap() 的第一个参数来请求与位于虚拟内存中当前映射之后的数据库文件的新页面相对应的映射。有效地扩展了初始映射。如果系统不能满足在第一次之后立即放置新映射的请求，则回退到 munmap/mmap。

在实践中，我们发现 OSX 以这种方式定位映射非常好，所以这个技巧在那里有效。

问题：如果系统确实在虚拟内存中的第一个映射之后立即分配第二个映射，那么最终使用对 munmap() 的一次大调用最终取消映射它们是否安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-07-18T01:34:24.160

2 will work but you don't have to rely on the OS happening to have space available, you can reserve your address space beforehand so your fixed mmapings will always succeed.

For instance, To reserve one gigabyte of address space. Do a

`mmap(NULL, 1U << 30, PROT_NONE, MAP_ANONYMOUS | MAP_PRIVATE, -1, 0);`

Which will reserve one gigabyte of continuous address space without actually allocating any memory or resources. You can then perform future mmapings over this space and they will succeed. So mmap the file into the beginning of the space returned, then mmap further sections of the file as needed using the fixed flag. The mmaps will succeed because your address space is already allocated and reserved by you.

Note: linux also has the MAP_NORESERVE flag which is the behavior you would want for the initial mapping if you were allocating RAM, but in my testing it is ignored as PROT_NONE is sufficient to say you don't want any resources allocated yet.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T05:06:55.200

1.  我认为＃2是目前最好的解决方案。除此之外，在 64 位系统上，您可以在操作系统永远不会为映射选择的地址（例如 Linux 中的 0x6000 0000 0000 0000）显式创建映射，以避免操作系统无法在第一个映射之后立即放置新映射的情况一。

2.  使用单个 munmap 调用取消映射多个 mappinsg 始终是安全的。如果您愿意，您甚至可以取消映射映射的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-12T04:50:31.527

1.  在可用的情况下使用 fallocate() 而不是 ftruncate()。如果没有，只需在 O_APPEND 模式下打开文件并通过写入一些零来增加文件。这大大减少了碎片。

2.  如果可用，请使用“大页面”——这大大减少了大映射的开销。

3.  块大小不那么小的 pread()/pwrite()/pwritev()/preadv() 确实并不慢。比实际执行的 IO 快得多。

4.  使用 mmap() 时的 IO 错误只会生成 segfault 而不是 EIO 左右。

5.  大多数 SQLite WRITE 性能问题都集中在良好的事务使用上（即您应该在 COMMIT 实际执行时进行调试）。

# javascript - 如何使用 javascript 更改 HTML 元素的值？

> ID：15684772
> 
> 赞同：0
> 
> 时间：2013-03-28T14:43:20.153
> 
> 标签：javascript, html

我有 DIV，在 div 里面有表格。我想使用 java 脚本更改表的列值之一。我可以通过获取列的元素 id 来做到这一点，**但是没有任何 id 分配**给任何表的列。下面是示例。

```
<div id="usersec">
<TABLE style="TEXT-ALIGN: center; WIDTH: 279px; HEIGHT: 70px">
<TBODY>
<TR>
<TD style="FONT-FAMILY: Verdana" vAlign=center align=middle>Talk to me </TD></TR></TBODY></TABLE>
</div> 
```

是否可以使用 javascript 更改“与我交谈”文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:46:49.360

是的，您需要获取元素，然后将新值设置为`element.innerHTML`. 如果你给`id`你想要改变但你不需要的元素，这是最简单的

[jsFiddle](http://jsfiddle.net/SxSXC/2/)

```
<script type="text/javascript">
    var usersec = document.getElementById('usersec');
    var td = usersec.getElementsByTagName('td')[0];
    td.innerHTML = 'New value';
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:49:42.597

如果您的用户群是 IE8+，您可以安全地使用`querySelector`：

```
var container = document.getElementById('usersec');
var td = container.querySelector('tr:first-child > td');
if(td){
  td.innerHTML = "New Text!";
} 
```

这是一个 JSFIDDLE：http: [//jsfiddle.net/rgthree/YkhwE/](http://jsfiddle.net/rgthree/YkhwE/)

`querySelector`（或`querySelectorAll`）允许您通过 CSS 语法定位 DOM 中的元素，这非常有用。它在每个当前和以前的浏览器中都得到了很好的支持。（通过[我可以使用](http://caniuse.com/#feat=queryselector "我可以用吗")）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:49:53.427

您可以为 TD 分配一个 id，并使用它；

```
<div id="usersec">
<TABLE style="TEXT-ALIGN: center; WIDTH: 279px; HEIGHT: 70px">
<TBODY>
<TR>
<TD style="FONT-FAMILY: Verdana" vAlign=center align=middle id="cellToChange">Talk to me</TD>
</TR></TBODY></TABLE>
</div>

<script type="text/javascript">
document.getElementById("cellToChange").innerText = "Go on, talk to me please!";
</script> 
```

# php - 在后端更改运输方式名称

> ID：15684777
> 
> 赞同：0
> 
> 时间：2013-03-28T14:43:35.970
> 
> 标签：php, magento

我已经更改了许多运输方式及其在前端的显示。由于自定义，我以编程方式给出了名称，例如“标准：1-2 个工作日：2”现在我想将后端的显示和上述方法的显示更改为“标准（1-2 个工作日） )”。我想知道保存到数据库时在哪里更改这些名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:45:34.350

您可以在位于 app/locale/en_US/Mage_Shipping.csv 的 Mage_Shipping.csv 中更改运输方式的翻译

搜索包含您的运输方式名称的行。例如 `"Flat Rate","Flat Rate"` 并将最后的报价更改为您想要的。 `"Flat Rate","Shipping (1-2 days)"`

# ruby-on-rails - Rails：限制特定用户角色编辑/删除特定记录

> ID：15684778
> 
> 赞同：0
> 
> 时间：2013-03-28T14:43:42.907
> 
> 标签：ruby-on-rails, ruby, gem

我希望限制某个用户角色编辑数据库中的特定记录。

例如，我的项目表中有项目记录 1、2、3、4 和 5。

我想为 user1 授予对项目 1 和 2 的编辑/删除访问权限，但限制 user1 编辑/删除项目 3、4 和 5。

是否有一种宝石或一种特定的方式可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:08:15.380

康康是您的选择！目前许多人使用它[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)和最新的

例如：

```
 <% if can? :update, @article %>
  <%= link_to "Edit", edit_article_path(@article) %>
<% end %> 
```

# php - 将 3D 数组转换为 HTML 表格

> ID：15684780
> 
> 赞同：-3
> 
> 时间：2013-03-28T14:43:52.250
> 
> 标签：php, html

**大批**

```
$array['1']                         = null;

$array['2']['21']                   = null;

$array['3']['31']                   = null;
$array['3']['32']                   = null;

$array['4']['41']                   = null;
$array['4']['42']['421']            = null;
$array['4']['42']['422']            = null;

$array['5']['51']                   = null;
$array['5']['52']                   = null;
$array['5']['53']['531']            = null;
$array['5']['53']['532']            = null;
$array['5']['53']['533']            = null;

$array['6']['61']['611']            = null;
$array['6']['62']                   = null;
$array['6']['63']['631']            = null;
$array['6']['63']['632']            = null;
$array['6']['63']['633']            = null;
$array['6']['63']['634']            = null;

$array['7']['71']['711']            = null;

$array['8']['81']['811']            = null;
$array['8']['81']['812']            = null;

$array['9']['91']['911']            = null;
$array['9']['91']['912']            = null;
$array['9']['92']['921']            = null;
$array['9']['92']['922']            = null; 
```

我正在尝试将上面的数组转换为 HTML 表格。我需要添加`rowspan`以获得如下图所示的输出，但果汁用完了。

**PHP**

```
//If condition is satistied
if (isset($array) && count($array) > 0)
{
    //echo '<pre>'; print_r($array); exit;

    //Initiate variables
    $row = null;
    $level_one_array = $array;

    //Iterate through menu level one
    foreach ($level_one_array as $level_one_name => $level_two_array)
    {
        //If level two is an array
        if (is_array($level_two_array))
        {
            //Iterate through menu level two
            foreach ($level_two_array as $level_two_name => $level_three_array)
            {
                //If level two is an array
                if (is_array($level_three_array))
                {
                    //Iterate through menu level three
                    foreach ($level_three_array as $level_three_name => $null)
                    {
                        $row .= '<tr>';
                        $row .= '<td class="td_data">' . $level_one_name . '</td>';
                        $row .= '<td class="td_data">' . $level_two_name . '</td>';
                        $row .= '<td class="td_data">' . $level_three_name . '</td>';
                        $row .= '</tr>';
                    }
                }
                //If level two is not an array
                else
                {
                    $row .= '<tr>';
                    $row .= '<td class="td_data">' . $level_one_name . '</td>';
                    $row .= '<td class="td_data">' . $level_two_name . '</td>';
                    $row .= '<td class="td_data">&nbsp;</td>';
                    $row .= '</tr>';
                }
            }
        }
        //If level two is not an array
        else
        {
            $row .= '<tr>';
            $row .= '<td class="td_data">' . $level_one_name . '</td>';
            $row .= '<td class="td_data">&nbsp;</td>';
            $row .= '<td class="td_data">&nbsp;</td>';
            $row .= '</tr>';
        }
    }

    $table  = '<table>';
    $table .= '<tr><td class="td_title">Menus</td><td class="td_title">Submenus/Items</td><td class="td_title">Items</td></tr>';
    $table .= $row;
    $table .= '</table>';

    echo $table;
    }
else
{
    echo '<center>No record found</center>';
} 
```

**我需要的是：** ![在此处输入图像描述](../Images/ef9f6ab9713ea7742a455d0f354e7ba3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:41:04.907

我写了新的代码来解决这个问题。工作`rowspan`非常棘手。关键元素是`calculate_rowspan()`和标志`$on_level_X_row`来确定是否需要添加`<tr>`。

有必要从最内部的 foreach 中分离输出，因为您必须使用它处理多行。`"\n"`我还在每个之后添加，`</tr>`以使输出更具可读性。

```
function calculate_rowspan($array)
{
    if (!is_array($array) || count($array) == 0)
        return 1;

    $rowspan = 0;
    foreach ($array as $key=>$value)
    {
        $rowspan++;
        if (is_array($value) && count($value) > 0)
        {
            $rowspan += count($value);
            // -1 because first element is one same row
            $rowspan--;
        }
    }
    return $rowspan;
}

if (is_array($array) && count($array) > 0)
{
    $output = '';
    foreach ($array as $level_one_name => $level_two_array)
    {
        if (!is_array($level_two_array) || count($level_two_array) == 0)
        {
            $output .= '<tr><td>';
            $output .= $level_one_name;
            $output .= '</td><td></td><td></td></tr>'."\n";
        }
        else
        {
            $output .= '<tr>';
            $output .= '<td rowspan="'.calculate_rowspan($level_two_array).'">';
            $output .= $level_one_name;
            $output .= '</td>';

            $on_level_one_row = TRUE;
            foreach ($level_two_array as $level_two_name => $level_three_array)
            {
                if ( ! $on_level_one_row)
                    $output .= '<tr>';
                else
                    $on_level_one_row = FALSE;

                if (!is_array($level_three_array) || count($level_three_array) == 0)
                {
                    $output .= '<td>';
                    $output .= $level_two_name;
                    $output .= '</td><td></td></tr>'."\n";
                }
                else
                {
                    $output .= '<td rowspan="'.calculate_rowspan($level_three_array).'">';
                    $output .= $level_two_name;
                    $output .= '</td>';

                    $on_level_two_row = TRUE;
                    foreach ($level_three_array as $level_three_name => $null)
                    {
                        if ( ! $on_level_two_row)
                            $output .= '<tr>';
                        else
                            $on_level_two_row = FALSE;

                        $output .= '<td>';
                        $output .= $level_three_name;
                        $output .= '</td></tr>'."\n";
                    }
                }
            }
        }
    }

    print '<table>'."\n";
    print $output;
    print '</table>';
} 
```

# time-series - NoSQL (BigTable...) 和 TimeSeries 数据

> ID：15684784
> 
> 赞同：1
> 
> 时间：2013-03-28T14:43:58.767
> 
> 标签：time-series, bigtable

我在一个收集/存储大量时间序列数据（*time=value,time=value...*）的组织中工作。今天，我们使用历史学家来收集和处理这些数据。使用 historian 的主要优点是压缩数据并在数据存储方面更有效。然而，随着大数据、NoSQL 等技术的出现，压缩数据（因为存储 $$）的努力似乎正在消退，趋势是存储“大量”数据。

1.  有没有人尝试过用大数据解决方案替换时间序列历史数据库？我知道 OpenTSDB，有没有人在非 IT 角色中使用过这个？
2.  NoSQL 数据库（*Cassandra...*）是否适合时间序列数据？如果是这样，实现可能是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:51:34.927

仅仅是收集或存储的重要性，还是分析速度或易于分析的重要性？

对于大多数合理的数据大小，标准 SQL 就足够了。

除此之外，特别是对于分析，您最好需要一个内存和面向列的数据库。在最高端，这意味着 kx.com 的 kdb，被所有主要银行使用（$$ 昂贵）。但是，您具体询问开源，我会根据您的数据大小和访问要求考虑内存中的 monetdb 或 mysql。

Cassandra 是 nosql 群中更合适的选择之一，人们已经尝试使用它： [http ://www.datastax.com/dev/blog/advanced-time-series-with-cassandra](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra) [http://synfin.net /sock_stream/technology/advanced-time-series-metric-data-with-cassandra](http://synfin.net/sock_stream/technology/advanced-time-series-metric-data-with-cassandra)

我发现我花了很多时间在最小的数据级别上进行黑客攻击以使事情正常工作并创建大量冗长的代码。然后它将我的数据分布在多台服务器上，并尝试通过使用多台机器来弥补低效的存储。当我评估它时，它的时间支持和操纵时间的功能很差，我只能轻松地拉出范围。由于这些原因，我离开了 cassandra。

# java - 如何在没有对话提示的情况下自动重试语音识别？

> ID：15684786
> 
> 赞同：0
> 
> 时间：2013-03-28T14:44:00.220
> 
> 标签：java, android, voice-recognition

我的应用使用 Google 的语音识别 API。我希望它是一种免提体验，但是当它无法识别声音时，它会提示用户通过单击对话框中的按钮重试。如何避免这种情况并自动重试。我知道我应该检查 resultCode。这是我试过的：

```
if(resultCode == RecognizerIntent.RESULT_NO_MATCH){
/* I wasnt' able to retry voice recognition, so instead to check
if I'm able to actually check if resultCode == RecognizerIntent.RESULT_NO_MATCH
I tried this */
TextView.setText("No match");

} 
```

但这没有用。唯一有效的是 RESULT_CANCELED 和 RESULT_OK。请建议更改或发布工作代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:56:30.780

只有在Jelly Bean你才能达到你想要的，在`onActivityResult`你可以做一个

```
if(resultCode == RecognizerIntent.RESULT_OK)  
// handle result
else
//finish Google voice recognition and start again. 
```

对于 JB 以下的版本，只有在匹配或按下取消按钮时才会调用 onActivityResult。

# c++ - 在C++中，如果基类构造函数异常，那么构造函数和析构函数的顺序可能是这样的？

> ID：15684795
> 
> 赞同：0
> 
> 时间：2013-03-28T14:44:32.497
> 
> 标签：c++, exception, constructor

```
#include <iostream>
#include <string>
using namespace std;

class Base
{
public:
    Base()
    {
        cout << "Base"<<endl;
    }
    ~Base()
    {
        cout << "~Base"<<endl;
    }

};

class Child: public Base
{
public:
    Child()
    {
        cout << "Child"<<endl;
    }
    ~Child()
    {
        cout << "~Child"<<endl;
    }
};

int main()
{
    try
    {
        Child cc;
    }
    catch(...)
    {
    }

    return 0;
} 
```

一般输出将是

```
Base 
Child
~Child
~Base 
```

但是，如果在 Base 是构造函数时捕获了一些可怕的或异常，那么序列是否可能是：

```
Base 
~Base
Child
~Child 
```

任何人都可以写一个演示来说明这一点吗？C++ 通常不会在构造函数中抛出异常，但如果是，那么它会导致该输出吗？

感谢大家的帮助。我不确定在通常的代码中是否会发生这种情况。是否有可能在复杂的 Base 构造函数或错误之类的东西中改变通常的输出？如果是这样，谁能给我一个例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:47:41.057

如果您的类构造函数中发生异常，`Base`则不会调用析构函数。
仅仅因为没有需要销毁的完整对象！

不禁**[在此引用 Herb](http://www.gotw.ca/gotw/066.htm)**：

## “它不会死，因为它从未活过！”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:46:58.327

```
include <stdexcept>
Base()
{
    cout << "Base"<<endl;
    throw std::runtime_error("error");
} 
```

# asp.net-mvc - ASP.NET MVC - 如何获取 URL 而不是操作链接？

> ID：15684797
> 
> 赞同：28
> 
> 时间：2013-03-28T14:44:37.627
> 
> 标签：asp.net-mvc, href, actionlink

我想在小程序参数中嵌入一个 URL。

我知道自动创建 URL 的唯一方法是`Html.ActionLink()`，但我只想要内部`HREF`属性，而不是整个链接。

`Regex`除了在输出上使用`ActionLink()`来获取`HREF`属性之外，还有其他方法可以获得我不想要的东西吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-28T14:46:12.620

要仅获取 URL，您可以使用[`Url.Action()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action%28v=vs.108%29.aspx)而不是`Html.ActionLink()`.

它有很多重载，所以你可以给它一个路由的名字，或者动作和控制器的名字，或者一些其他的选项。

**例子：**

```
Url.Action("YourAction", "YourController") 
```

# android - 设置 InfoWindowAdapter 仅显示单击的第一个标记的信息

> ID：15684805
> 
> 赞同：2
> 
> 时间：2013-03-28T14:44:49.437
> 
> 标签：android, google-maps-api-3, map, infowindow

所以，我已经`infowindowadapter`为我的谷歌地图设置了，但问题是当我点击第一个标记时，它会正确显示信息，但是当我点击第二个标记时，它会显示第一个标记的信息，所以`infowindowadapter`不会刷新。

有人可以告诉我为什么会这样以及如何解决吗？

我正在关注这篇文章来设置`infowindowadapter`：

[地图 v2 中带有自定义数据的自定义信息窗口适配器](https://stackoverflow.com/questions/15090148/custom-info-window-adapter-with-custom-data-in-map-v2/15091202#15091202)

编辑：

```
 new getMarkers().execute();

    mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

        @Override
        public boolean onMarkerClick(Marker marker) {
            marker.showInfoWindow();
            return false;
        }
    });
    mMap.setInfoWindowAdapter(new InfoWindowAdapter() {

        @Override
        public View getInfoWindow(Marker marker) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public View getInfoContents(Marker marker) {

            View view = getLayoutInflater().inflate(R.layout.post_details_on_map,null);

            date = (TextView)view.findViewById(R.id.txtMarkerDate);
            comment = (TextView)view.findViewById(R.id.txtMarkerComment);
            image = (ImageView)view.findViewById(R.id.ivMarkerPicture);

            MyMarkerInfo mmi = markerMap.get(marker.getId());
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("id",mmi.getId()));

            MarkerDetails mDetails = new JSONAdapter().getMarkerDetails(params);
            date.setText(mDetails.getDate());
            comment.setText(mDetails.getComment());

            new getPicture().execute(mDetails.getImageUrl());
            return view;
        }
    }); 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T14:54:53.770

这是我完全相同操作的代码：

```
 // Setting a custom info window adapter for the google map
        map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }
                                /*
                                findDirections(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude(),
                                               SGTasksListAppObj.getInstance().currentUserLocation.getLongitude(),
                                               clickMarkerLatLng.latitude, clickMarkerLatLng.longitude, GMapV2Direction.MODE_DRIVING );
                                */
                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

我的猜测是您以错误的方式获取其他标记信息。尝试比较我的方法和您的方法，并尝试记录该过程以查看您传递了正确的 ID 并获取了正确的信息。

# asp.net-mvc-3 - KendoUI：选项卡内容中的 TabStrip 重定向页面

> ID：15684818
> 
> 赞同：0
> 
> 时间：2013-03-28T14:45:21.323
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, telerik, kendo-ui

我有一个 TabScript，并且在该 TabScript 的内容中我有一个按钮。所以当我点击按钮时，它会重定向到另一个页面。但是有什么办法让它只是重定向到 TabScript 的内容中，而不是刷新页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:06:34.883

单击按钮时，您可以执行自己的[$.ajax](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-url-settings)请求并将服务器返回的结果设置为contentElement[的](http://docs.kendoui.com/api/web/tabstrip#methods-contentElement)[html](http://api.jquery.com/html/#html-htmlString)。

# java - 将 JSON 映射传递给 Spring MVC 控制器

> ID：15684822
> 
> 赞同：20
> 
> 时间：2013-03-28T14:45:24.953
> 
> 标签：java, json, spring, spring-mvc

我正在尝试将 Map 的 JSON 表示形式作为 POST 参数发送到我的控制器中。

```
@RequestMapping(value = "/search.do", method = RequestMethod.GET, consumes = { "application/json" })
public @ResponseBody Results search(@RequestParam("filters") HashMap<String,String> filters, HttpServletRequest request) {
       //do stuff
} 
```

我发现 @RequestParam 只会抛出 500 错误，所以我尝试改用 @ModelAttribute。

```
@RequestMapping(value = "/search.do", method = RequestMethod.GET, consumes = { "application/json" })
public @ResponseBody Results search(@ModelAttribute("filters") HashMap<String,String> filters, HttpServletRequest request) {
       //do stuff
} 
```

这将正确响应请求，但我意识到地图是空的。通过后来的实验，我发现任何对象（不仅仅是 HashMap）都会被实例化，但不会填写任何字段。我的类路径中有 Jackson，我的控制器将使用 JSON 响应。但是，我当前的配置似乎不允许 Spring 通过 GET/POST 参数读取 JSON。

如何将来自客户端 AJAX 请求的对象的 JSON 表示形式作为请求参数传递给 Spring 控制器并获取 Java 对象？

**编辑**添加我的相关 Spring 配置

```
 <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
      <map>
        <entry key="html" value="text/html" />
        <entry key="json" value="application/json" />
      </map>
    </property>
    <property name="viewResolvers">
      <list>
        <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
          <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
          <property name="prefix" value="/WEB-INF/jsp/" />
          <property name="suffix" value=".jsp" />
        </bean>
      </list>
    </property>
    <property name="defaultViews">
      <list>
        <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
          <property name="prefixJson" value="true" />
        </bean>
      </list>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
      <list>
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
      </list>
    </property>
  </bean> 
```

根据评论者的建议，我尝试了@RequestBody。这将起作用，只要 JSON 字符串用**双引号**引起来。

```
@RequestMapping(value = "/search.do", method = RequestMethod.POST, consumes = { "application/json" })
public @ResponseBody Results<T> search(@RequestBody HashMap<String,String> filters, HttpServletRequest request) {
      //do stuff
} 
```

这确实解决了我的直接问题，但我仍然对如何通过 AJAX 调用传入多个 JSON 对象感到好奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-10T12:08:25.820

> 这确实解决了我的直接问题，但我仍然对如何通过 AJAX 调用传入多个 JSON 对象感到好奇。

做到这一点的最好方法是拥有一个包含您要传递的两个（或多个）对象的包装器对象。然后，您将 JSON 对象构造为两个对象的数组，即

```
[
  {
    "name" : "object1",
    "prop1" : "foo",
    "prop2" : "bar"
  },
  {
    "name" : "object2",
    "prop1" : "hello",
    "prop2" : "world"
  }
] 
```

然后在您的控制器方法中，您将请求正文作为单个对象接收并提取两个包含的对象。IE：

```
@RequestMapping(value="/handlePost", method = RequestMethod.POST, 
                consumes = {      "application/json" })
public void doPost(@RequestBody WrapperObject wrapperObj) { 
     Object obj1 = wrapperObj.getObj1;
     Object obj2 = wrapperObj.getObj2;

     //Do what you want with the objects...

} 
```

包装器对象看起来像......

```
public class WrapperObject {    
private Object obj1;
private Object obj2;

public Object getObj1() {
    return obj1;
}
public void setObj1(Object obj1) {
    this.obj1 = obj1;
}
public Object getObj2() {
    return obj2;
}
public void setObj2(Object obj2) {
    this.obj2 = obj2;
}   

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T12:24:28.643

您可以使用 Jackson 库将 Json 转换为 Map。

@web-context.xml

```
<bean id="messageAdapter" class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" />
        </list>
    </property>
</bean> 
```

@maven 依赖：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-lgpl</artifactId>
    <version>1.9.13</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-lgpl</artifactId>
    <version>1.9.13</version>
</dependency> 
```

@控制器

```
@RequestMapping(value = "/method", method = RequestMethod.DELETE)
public String method(
                @RequestBody Map<String, Object> obj){ 
```

@Request（例如 jquery Ajax）

```
$.ajax({"type": "DELETE",
        "contentType": "application/json;",
        "url": "/method",
        "data": JSON.stringify({"key": "Ricardo"}),
        "dataType": "json";}
}); 
```

使用 Python 框架或 Play 更容易！噗噗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-02T11:05:38.193

我已使用以下代码将 Map 对象传递给 Java：

**Javascript代码：**

```
var values = {
                    "object1" : JSON.stringify(object1),
                    "object2" : JSON.stringify(object2)
            };
 var response = $http.post(url,data); 
```

**服务器端代码：**

```
@RequestMapping(value = "/deleteData",method = RequestMethod.POST,consumes = MediaType.APPLICATION_JSON_VALUE)
    @ResponseBody
    public Result deleteData(@RequestBody HashMap<String, Object> dataHashMap) {
    Object1 object1=  (Object1) JsonConvertor.jsonToObject((String) dataHashMap.get("object1"), Object1.class);
        Object2 object2= (Object2) JsonConvertor.jsonToObject((String) dataHashMap.get("object2"), Object2.class);   
} 
```

**JsonConvertor 类：**

```
public class JsonConvertor {
  public static <T> Object jsonToObject(String json, Class<T> clazz) {
    if (json == null)
      throw new IllegalArgumentException("null cannot be converted to Object");
    Gson gson = new GsonBuilder().disableHtmlEscaping().setDateFormat("dd-MMM-yyyy").create();
    return gson.fromJson(json, clazz);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-07T14:43:16.653

```
 @RequestMapping(method = RequestMethod.POST)
    public HttpEntity<Resource<Customize>> customize(@RequestBody String customizeRequest) throws IOException {
       Map<String, String> map = mapper.readValue(customizeRequest, new TypeReference<Map<String,String>>(){});
       log.info("JSONX: " + customizeRequest);
       Long projectId_L = Long.parseLong(map.get("projectId"));
       [...] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T04:46:30.587

您没有正确获取 json。

就这样吧....

```
/*
 * Mapping for Demographics And Profiling Question Filter
 */
@RequestMapping (value = "/generalFilter")
public void ageFilteration(@RequestParam Map <String,String> filterParams,HttpServletRequest request,HttpServletResponse response) throws IOException
{
    //  System.out.println("Geographies in Controller :"+ filterParams.get("geographies"));
    List<FeasibilityBean> feasibilityList = feasibilityDao.getGeneralFeasibilityList(filterParams,request);
    //  System.out.println(" General Filter List Size:"+feasibilityList.size());
    response.getWriter().print(new Gson().toJsonTree(feasibilityList,new TypeToken<List<FeasibilityBean>>(){}.getType()));
} 
```

}

JS代码

```
var ages='',ageCond='',genders='',genderCond='';

    $.ajax({
        type: "POST",
        url : url,
        data : {ages:ages,ageCond:ageCond,genders:genders,genderCond:genderCond},
        beforeSend: function() { 
            $(thisVar).find('i').addClass('fa-spin');
        },
        success : function(feasibilityJson){ 

        },
        error : function(data) {
            alert(data + "error");
        },
        complete:function(){  
            $(thisVar).find('i').removeClass('fa-spin');
        }
    }); 
```

或者你想用 json 绑定 bean....

[https://stackoverflow.com/a/21689084/5150781](https://stackoverflow.com/a/21689084/5150781) [https://stackoverflow.com/a/37958883/5150781](https://stackoverflow.com/a/37958883/5150781)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-12T10:23:49.153

作为@dario的回答，但对于杰克逊2版本：

`spring-web-context.xml`

```
 <bean id="messageAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter" >
            <property name="supportedMediaTypes">    
                <list>    
                    <value>application/json;charset=utf-8</value>    
               </list>    
            </property>  
            </bean>
        </list>
    </property>
</bean> 
```

行家`pom.xml`：

```
 <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.9.6</version>
    </dependency> 
```

java控制器

```
@RequestMapping(value = "/search.do", method = RequestMethod.GET, consumes = { "application/json" })
public @ResponseBody Results search(@RequestBody Map<String,Object> filters, HttpServletRequest request) { 
```

# java - BigDecimal.ROUND_UP 的问题

> ID：15684826
> 
> 赞同：0
> 
> 时间：2013-03-28T14:45:34.890
> 
> 标签：java, bigdecimal, rounding

为什么我的卖出价是 184.84？为什么它在 BigDecimal.ROUND_UP 中表现得这样。我检查了 BigDecimal.ROUND_HALF_EVEN。它工作正常。但我想知道它为什么会这样。

```
for(int i = 0; i < 50; i++){
    double  sellrate    = 184.83;
    BigDecimal sellRate = new BigDecimal(sellrate);
    sellRate    = sellRate.setScale(2,BigDecimal.ROUND_UP);
    System.out.println("sellRate : "+sellRate); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:48:43.597

这就是为什么：

```
double sellrate = 184.83;
BigDecimal sellRate = new BigDecimal(sellrate);
System.out.println("sellRate: " + sellRate); 
```

印刷

```
sellRate: 184.830000000000012505552149377763271331787109375 
```

[BigDecimal JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)对此进行了解释：

> *此构造函数的结果可能有些不可预测。有人可能会假设用 Java 编写 new BigDecimal(0.1) 会创建一个正好等于 0.1 的 BigDecimal（未缩放的值 1，缩放为 1），但它实际上等于 0.1000000000000000055511151231257827021181583404541015625。这是因为 0.1 不能完全表示为双精度数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。*

使用`String`构造函数

```
BigDecimal sellRate = new BigDecimal("184.83"); 
```

如果您想获得`BigDecimal`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:49:51.650

[BigDecimal(double)](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)构造函数不是很可靠，请查看 API javadoc。构造 BigDecimal 的首选方法是使用[BigDecimal(String)](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)构造函数。

> **此构造函数的结果可能有些不可预测。**有人可能会假设用 Java 编写 new BigDecimal(0.1) 会创建一个正好等于 0.1 的 BigDecimal（未缩放的值 1，缩放为 1），但它实际上等于 0.10000000000000000555511151231257827021181583404541015625。这是因为 0.1 不能完全表示为双精度数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。

# visual-studio-2012 - 获取最后一个版本在 TFS 中无法正常工作 Visual Studio 2012

> ID：15684828
> 
> 赞同：2
> 
> 时间：2013-03-28T14:45:35.733
> 
> 标签：visual-studio-2012, tfs

我有 Visual Studio 2012，当我尝试获取最新版本时它不起作用，它说它说“所有文件都是最新的”。这是因为我从 TFS 获取文件后在本地删除了文件，我猜在 Visual Studios 内存中写到从那时起没有任何更改，现在虽然我没有它，但它不允许我下载它.

如何“告诉” VS 我的本地文件夹已更改？

PS我想它也可以通过“获取特定版本”来完成，但是当我右键单击我想从服务器获取的文件时，该选项不会出现在我面前。

编辑：

我发现我的工作区会自动更改（或者说我在创建新项目时没有集中注意力），所以 VS 实际上一直在检查其他目录。对于所有可能遇到相同问题的人 - 检查您的本地路径，如果您发现它不好，请更改它。以下是如何更改它： [http ://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/d0c6982f-4f5e-4b1c-830b-3af9fb127922/](http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/d0c6982f-4f5e-4b1c-830b-3af9fb127922/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:50:14.887

你是对的，TFS 会保存他给你的版本并在不通知 TFS 的情况下更改/删除它，你将一无所获。“获取特定版本...”是您所需要的。因此右键单击您想要的项目，在上下文菜单中选择“高级-> 获取特定版本”。选中第二个选项“覆盖所有文件，即使本地版本与指定版本匹配”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T17:45:21.500

并不是说这是一个解决方案，但是在重新映射我的一个项目后我遇到了类似的问题。最终我所做的是删除我的本地解决方案文件（.sln）并通过项目文件（.vbproj）重新打开项目。之后，我能够看到所有似乎没有下载的最新文件版本。一旦您单击任何内容的保存，它将重新提示您保存新的解决方案文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T20:34:53.613

我不知道这是否是 OP 想要完成的具体目标，但这是我的故事：我的机器崩溃了，必须重新映像；安装 VS2015 后，我转到源代码管理资源管理器，右键单击我需要的分支 >> 高级 >> 获取特定版本，选中“覆盖...”框，单击“获取”并获取“所有文件都是最新的...“ 信息。克星。显然代码不是最新的。

快进：我通过删除我的工作区与我需要的代码库的相关映射来解决这个问题，保存它，然后重新添加它。

希望这可以避免一些头痛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:50:54.083

您需要获取特定版本并选中该框以启用覆盖现有文件。这将确保您实际上是最新的。

您还可以从服务器工作空间切换到新的本地工作空间，这也应该有助于解决此类问题。

# unix - 使用命令行查找丢失的 URL 路由

> ID：15684829
> 
> 赞同：1
> 
> 时间：2013-03-28T14:45:39.450
> 
> 标签：unix, grep, url-routing, pipe, playframework-1.x

我正在尝试自动检查 Play 中丢失的路线！Web应用程序。路由表位于以下格式的文件中：

```
GET /home          Home.index
GET /shop          Shop.index 
```

我已经设法使用我的命令行 fu 来爬取我的代码并列出文件中应该存在的所有操作。此列表采用以下格式：

```
Home.index
Shop.index
Contact.index
About.index 
```

现在我想将此文本的输出通过管道传输到另一个命令，该命令检查路由文件中是否存在每一行。我不确定如何进行。

结果应该是这样的：

```
Contact.index
About.index 
```

有人对我如何做到这一点有有用的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:50:17.577

试试这一行：

```
awk 'NR==FNR{a[$NF];next}!($0 in a)' routes.txt list.txt 
```

**编辑**

如果您希望上述行`list`从标准输入接受：

```
cat list.txt|awk 'NR==FNR{a[$NF];next}!($0 in a)' routes.txt - 
```

`cat list.txt`用你的*魔法命令*替换

# google-app-engine - Eclipse 不生成谷歌云端点客户端库

> ID：15684837
> 
> 赞同：2
> 
> 时间：2013-03-28T14:46:05.307
> 
> 标签：google-app-engine, google-cloud-endpoints, google-eclipse-plugin

我正在尝试创建我的第一个 GAE 端点应用程序，而不是从类中生成端点，我想创建自己的个性化端点……这可能吗？

我写了这个类：

```
@Api(name="my_endpoint", path="my_endpoint")
public class MyFirstEndpoint {

  @ApiMethod (name="my_method", path="my_method", httpMehod=HttpMethod.GET)
  public Response myMethod(@Named("param1") String param1) {
    ...
  }

} 
```

但是当我尝试在 Eclipse 中生成 Endpoint Client Library 时，它说有一个错误......最糟糕的是它没有说它是什么错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:47:06.687

是的，可以创建自定义端点。

我有同样的错误。我认为您不能在 Api 或 ApiMethod 的名称中使用“_”...

尝试使用“myEndpoint”和“myMethod”作为名称，并在路径中保留“_”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:40:07.583

与这种特殊情况有点无关，但这是在搜索错误时在 Google 上弹出的第一件事：您的 Endpoints 类中不能有重载方法。通过查看上面评论中描述的错误控制台找到了这一点。

# ios - contentOffset 跳过 Log 中的值

> ID：15684838
> 
> 赞同：1
> 
> 时间：2013-03-28T14:46:07.230
> 
> 标签：ios, xcode, skip, collectionview, contentoffset

所以我有以下代码：

```
int actualPosition = self.collectionView.contentOffset.y;
NSLog(@"%i", actualPosition); 
```

输出是：

```
2013-03-28 15:36:42.737 test[10544:907] 484
2013-03-28 15:36:42.754 test[10544:907] 490
2013-03-28 15:36:42.770 test[10544:907] 512
2013-03-28 15:36:42.787 test[10544:907] 550 
```

我现在的问题是：为什么它会“跳过”（例如为什么“actualPosition”从来没有这些值）485-489、491-511 和 513-549？它不应该为所有“位置”记录/给出actualPosition这个值，即使我滚动得更快？它对浮点数的工作方式相同，所以这无关紧要。我该如何解决这个问题，以便实际位置接收已滚动的每个位置的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:51:42.630

由于屏幕上有很多像素，并且只有一些时间来移动您滚动的内容，因此这些值会被 FPS“跳过”。换句话说，如果您在 1 秒内以 30 fps 移动 100 个像素，则 1 fps 将跳值 33 个像素。所以你每一步都会得到+3而不是+1。

始终获得准确的位置是不可能的，因为可能有一些滚动手势如此之快，以至于整个屏幕在一帧内飞过。所以“跳跃”将与屏幕一样大。

# php - 是否可以在 JS 或 PHP 中打印 HTML 实体？

> ID：15684839
> 
> 赞同：1
> 
> 时间：2013-03-28T14:46:08.000
> 
> 标签：php, javascript, html, entity

我想知道是否可以在 JavaScript 或 PHP 中打印 html 实体。

例子 ：

`console.log("&#55;");`

每当我尝试时，它都会转换`&#55;`为 7 而不是显示实体编号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:47:19.650

您必须对 & 符号进行编码才能使其正常工作。尝试以下操作，看看它是如何工作的：

```
console.log('&amp;#55;'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:56:35.970

PHP 解决方案将是 - 除了简单地回显它（可能是服务器端设置） - 以下。

```
 echo '&#49;&#51;&#51;&#55;'; //Outputs 1337 on my server.

   $string = '&#49;&#51;&#51;&#55;';
   $entities = htmlentities($string); 
   echo $entities; //Outputs &#49;&#51;&#51;&#55;

   $decode = html_entity_decode($entities);
   echo $decode; //Outputs 1337 
```

# python - 这是在IPython中分配变量和直接在数组中工作的区别

> ID：15684842
> 
> 赞同：4
> 
> 时间：2013-03-28T14:46:13.837
> 
> 标签：python, parallel-processing, ipython

我正在玩 IPython 和遥控器：

```
in:  from IPython Import parallel as p
in:  rc=p.client(profile=myprofile) 
```

之间存在行为差异

```
in:  rc[0].block
out: False
in:  rc[0].block=True
in:  rc[0].block
out: False 
```

和

```
in:  view=rc[0]
in:  view.block
out: False
in:  view.block=True
in:  view.block
out: True 
```

我真的不明白什么附加？这是为什么 ？分配做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:44:17.793

赋值本身什么都不做。`rc`这是你的客户。Doing`rc[0]`或任何类型的索引会生成并返回一个 DirectView 对象，该对象是一个包含您在 [] 中指定的任何引擎的视图。这是生成视图的简写：它实际上不仅仅是获取特定对象。

因此，这些观点并不是唯一的。我认为最好的解释方法是举个例子。假设您有 2 个引擎。您只想在引擎一上运行一些任务，并希望这些任务被阻止。您只想在引擎一上运行其他人，但不希望他们阻塞。您希望在引擎 1 和 2 上运行更多，并且不希望它们阻塞。然后你可以这样做：

```
view_1_block = rc[0]
view_1_block.block = True
view_2_noblock = rc[0]
view_2_noblock.block = False
view_3_noblock = rc[[0,1]]
view_3_noblock.block = False 
```

然后，您可以使用它们以您喜欢的任何方式运行任务，例如

```
view_1_block.map(lambda x:x**10, range(32)) # blocks, returns results, runs only on 1
view_3_noblock.map(lambda x:x**10, range(32)) # does not block, returns AsyncResult, runs on 1 and 2 
```

这里没有使用真正的魔法。当您运行 rc[0] 两次时，它会生成两个视图。第二种观点与第一种观点不同。当您将 rc[0] 分配给一个变量，然后使用该变量时，您正在使用一个视图，而不是创建一个新视图。

iPython 与 Numpy 和 Scipy 一样，有很多速记符号，它们不一定完全符合 Python 的习惯用法。对于 [] 和 getitem 尤其如此。一种更纯粹的 Python 编写方式可能是使用更笨拙`rc.direct_view(1)`的 ，等等，这将清楚地表明这不仅仅是获取一个项目，而且实际上是在创建一个视图。

# django - 从管理员注销默认 Django 应用程序会中断测试

> ID：15684844
> 
> 赞同：4
> 
> 时间：2013-03-28T14:46:14.653
> 
> 标签：django, nose, django-testing, mezzanine

在我的一个应用程序/admin.py 中，我有

```
from django.contrib import admin
from django.contrib.sites.models import Site
from django.contrib.redirects.models import Redirect

from mezzanine.generic.models import ThreadedComment
from mezzanine.conf.models import Setting

admin.site.unregister(Site)
admin.site.unregister(Redirect)
admin.site.unregister(ThreadedComment)
admin.site.unregister(Setting) 
```

这会导致它们像我想要的那样从管理员中删除，并且应用程序工作正常。然而，当我通过鼻子运行我的测试时，我得到了这个错误，`raise NotRegistered('The model %s is not registered' % model.__name__) NotRegistered: The model Site is not registered`我认为这是因为它试图取消注册已经取消注册的东西。这是一个失败的测试示例：

```
class TestRegistration(TestCase):

    def setUp(self):
        self.client = Client()
        email = ConfirmedEmail(email='test.com',company='Test Industries')
        email.save()

    def test_landing(self):
        response = self.client.get(reverse('home'))
        self.assertEqual(response.status_code, 200) 
```

# java - 将 curl 调用转换为 java urlconnection 调用

> ID：15684846
> 
> 赞同：5
> 
> 时间：2013-03-28T14:46:21.020
> 
> 标签：java, curl, rabbitmq, trace

我有 curl 命令：

```
curl -i -u guest:guest -H "content-type:application/json"
-XPUT \ http://localhost:15672/api/traces/%2f/my-trace \
-d'{"format":"text","pattern":"#"}' 
```

我想在 Java API 中创建 HTTP 请求，它会做同样的事情。这个 curl 命令可以在这个[README](https://github.com/rabbitmq/rabbitmq-tracing/blob/master/README)中找到。它用于在 RabbitMQ 上开始记录日志。回应并不重要。

现在我创建了这样的东西（我删除了不太重要的行，即捕获异常等），但不幸的是它不起作用：

```
url = new URL("http://localhost:15672/api/traces/%2f/my-trace");
uc = url.openConnection();

uc.setRequestProperty("Content-Type", "application/json");
uc.setRequestProperty("format","json");
uc.setRequestProperty("pattern","#")
String userpass = "guest:guest";
String basicAuth = "Basic " + javax.xml.bind.DatatypeConverter.printBase64Binary(userpass.getBytes());
uc.setRequestProperty ("Authorization", basicAuth); 
```

[整个代码](http://pastebin.com/RFARk3jA)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T10:35:14.853

这是最终解决方案：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.Proxy;
import java.net.InetSocketAddress;
import java.io.OutputStreamWriter;

public class Curl {

  public static void main(String[] args) {

    try {

    String url = "http://127.0.0.1:15672/api/traces/%2f/trololo";

    URL obj = new URL(url);
    HttpURLConnection conn = (HttpURLConnection) obj.openConnection();

    conn.setRequestProperty("Content-Type", "application/json");
    conn.setDoOutput(true);

    conn.setRequestMethod("PUT");

    String userpass = "user" + ":" + "pass";
    String basicAuth = "Basic " + javax.xml.bind.DatatypeConverter.printBase64Binary(userpass.getBytes("UTF-8"));
    conn.setRequestProperty ("Authorization", basicAuth);

    String data =  "{\"format\":\"json\",\"pattern\":\"#\"}";
    OutputStreamWriter out = new OutputStreamWriter(conn.getOutputStream());
    out.write(data);
    out.close();

    new InputStreamReader(conn.getInputStream());   

    } catch (Exception e) {
    e.printStackTrace();
    }

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:05:17.090

我可以看到两个问题：

*   您没有设置请求方法，在您的 curl 示例中它是“PUT”
*   '-d' 数据应该是请求*正文*，而不是请求参数（即您应该将该字符串写入请求输出流）

此外，当您这样做时，`userpass.getBytes()`您将使用默认平台字符编码获取字节。这可能是也可能不是您想要的编码。最好使用显式字符编码（大概是服务器所期望的）。

# java - 使用 Hibernate 调用实体方法

> ID：15684849
> 
> 赞同：3
> 
> 时间：2013-03-28T14:46:26.783
> 
> 标签：java, hibernate, jakarta-ee, hql, jpql

我在 SO 中环顾四周，但没有找到我的具体问题的答案。

有没有办法告诉 Hibernate 在执行查询时调用实体方法？

例如：

```
SELECT o.getDescription() from Order o WHERE o.id = :id 
```

`getDescription()`实现是这样的：

```
public String getDescription(){
    return getFormattedOrderTime() + " " + getOrderDetails().getDescription();
} 
```

我知道在这个例子中这样的事情是没有必要的。我创建这个例子只是为了说明我想要什么。

我只想知道查询中的调用是否完全可行，这样我就可以避免我必须做的巨大变通方法。

PS：解决方案是否特定于 Hibernate 并不重要。

**附加信息：**休眠版本：3.6.10.Final

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:33:29.523

您应该在 @Entity 中添加一个 @PostLoad 方法

```
@PostLoad
public String getDescriptionWithDetails(){
   return getFormattedOrderTime() + " " + getOrderDetails().getDescription();
} 
```

# ios - UINavigationController 的导航栏似乎不可见，但标题和按钮仍然可见

> ID：15684851
> 
> 赞同：0
> 
> 时间：2013-03-28T14:46:28.263
> 
> 标签：ios, objective-c, ipad, cocoa

我遇到了一个奇怪的情况。这一切都在代码中完成 - 没有 Interface Builder。

我正在创建一个`UIViewController`并向其添加一些内容：

```
UIViewController* popoverViewController = [[[UIViewController alloc] init] autorelease];

UIView* popoverContentView = [[[UIView alloc] init] autorelease];
popoverContentView.backgroundColor = [UIColor blackColor];
// Add some stuff to popoverContentView

popoverViewController.view = popoverContentView; 
```

然后我创建一个`UINavigationController`，将其根视图控制器设置为`UIViewController`从上面，并添加一个标题和一个按钮到`navigationItem`：

```
UINavigationController* popoverNav = [[[UINavigationController alloc] initWithRootViewController:popoverViewController] autorelease];
popoverViewController.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissPopover)] autorelease];
[popoverViewController.navigationItem setTitle:@"MY TITLE"]; 
```

然后我在其中设置了一个`UIPopoverController`并`UINavigationController`呈现它：

```
self.popoverController = [[[UIPopoverController alloc] initWithContentViewController:popoverNav] autorelease];
self.popoverController.delegate = self;

[self.popoverController setPopoverContentSize:CGSizeMake(320, 216) animated:NO];
[self.popoverController presentPopoverFromRect:self.cell.frame inView:self.popoverParentView permittedArrowDirections:UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown animated:YES]; 
```

问题是一切都正确显示，但有一个例外：导航栏不可见，但标题文本和栏按钮仍然显示并正常工作。我试过弄乱栏`hidden`和`tintColor`属性并改变弹出框的大小，但没有任何改变。

我确定我遗漏了一些明显的东西，但我看不到它。

我的项目代码库中还有其他类似事物的示例，但这些示例显示正确。关于为什么会发生这种情况或如何解决它的任何想法？

![隐形酒吧](../Images/9a9dc5266dc9a111cb49a6412ec2de49.png)

**编辑**

不确定以下内容是否会有所帮助，但我希望它能为以前见过类似情况的人提供一些线索，了解这里到底发生了什么。

我推了一个新的（空白）视图控制器，`popoverNav`只是为了看看会发生什么。它完美地推动和动画化。除了导航栏仍然是透明的并且栏按钮项被推到视图的顶部之外，一切看起来都是正确的。

![推送新的视图控制器后](../Images/5adabd92a0b6c14c31d72ae12b2da8a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:08:43.577

也许不是问题的主要原因，但看起来你已经设置`UIDatePicker`了。`CGSize`据我记得，选择器的默认高度是 216（你有），但你没有考虑到`UINavigationBar`.

我不确定为什么视图的背景看起来是某种带纹理的灰色，除非在您的设置中设置，`UIViewController`但从您粘贴的代码中不会出现这种情况。不过，这当然不是 iOS 的默认纹理。

也许尝试让你`CGSize`的视图变大一点以容纳视图的内容，因为它看起来好像“完成”按钮正在拥抱右上角，默认情况下应该有相当多的间距值。

此外，您是否有理由创建一个新视图并将其分配为视图控制器的视图属性？

```
UIView* popoverContentView = [[[UIView alloc] init] autorelease];
popoverContentView.backgroundColor = [UIColor blackColor];
// Add some stuff to popoverContentView

popoverViewController.view = popoverContentView; 
```

为什么不将内容添加为视图的子视图呢？

# attributes - 如何通过厨师食谱通过刀加载 JSON 属性？

> ID：15684853
> 
> 赞同：5
> 
> 时间：2013-03-28T14:46:32.350
> 
> 标签：attributes, chef-infra, knife

我有一个 web 服务器，它基本上接受 knife ec2 create server 命令的输入。

在我的刀命令中，我传入

```
-j '{"branch":"clone"}' 
```

从文档中，我认为我可以在正在加载的食谱中执行此操作：

```
@@branch = node['branch']
...
git clone git@github.com/blah -b #{@@branch} 
```

但是，git 克隆失败了，因为`@@branch`没有返回。或者至少厨师日志说开始输出结果：

```
git clone git@github.com/blah -b

~Git error showing options and appropriate input~ 
```

如何加载我传递的 JSON 属性？正确的方法是什么？

编辑：

我手动输入了刀命令，并且 JSON 属性似乎使用 Ruby 哈希而不是 JSON 加载

`JSON Attributes: {"branch"=>"Air"}`

最后编辑：

我的命令：

`sudo knife ec2 server create -x ubuntu -i ~/.ssh/key.pem -I ami-0eca6e67 -d ubuntu-12.04 -j '{ "branch" : "clone" }' -Z us-east-1a -s subnet-6827ec00 -f c1.medium -g sg-bc9d86d0 -r 'role[role]'`

下面回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:44:10.200

因此，如果我使用已经存在的引导模板`-d ubuntu-12.04`，knife ec2 似乎**不会**加载 -j json-attributes。

去掉 -d 选项。Json 正确加载。

# scala - Play框架中基于查询参数的路由

> ID：15684854
> 
> 赞同：8
> 
> 时间：2013-03-28T14:46:36.980
> 
> 标签：scala, playframework-2.0

我的 Web 应用程序将从外部系统触发。它将调用我的应用程序的一个请求路径，但对不同类型的请求使用不同的查询参数。

参数之一是定义要做什么的“动作”。其余参数取决于“动作”。

所以我可以得到这样的请求参数：

```
action=sayHello&user=Joe
action=newUser&name=Joe&address=xxx
action=resetPassword
... 
```

我希望能够在路由文件中对其进行类似的编码以供播放，以便它执行基于查询参数的路由并尽可能多地验证其他参数。

相反，我拥有的是一个路由，用于所有这些可能性，并带有大量可选参数。它的动作处理从一个大的模式匹配开始，以进行调度和参数验证。

谷歌搜索和检查 SO 只是弹出了大量样本，其中参数以某种方式在请求路径中编码，因此多个路径被路由到相同的操作，但我想要相反：一个路径路由到不同的操作。

我的一位同事说我们可以有一个“调度程序”操作，它只会根据“操作”参数进行重定向。它会比当前的解决方案更有条理，但它不会消除应该有选择地传递给下一个操作的一长串可选参数，所以我希望有人知道一个更好的解决方案:-)

顺便说一句，调用我的应用程序的外部系统是由另一家公司开发的，我对这个设计没有影响，所以改变我的应用程序的触发方式不是一个选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:13:38.073

单个调度程序操作可能是要走的路，您不需要在路由中指定所有可选参数。如果`action`总是在那里，那么这就是您真正需要的唯一一个。

```
GET  /someRoute      controller.dispatcher(action: String) 
```

然后在您的操作方法中，您可以访问`request.queryString`以获取任何其他可选参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T17:38:50.707

*注意：我**不是**经验丰富的 Scala 开发人员，所以也许可以优化呈现的片段......对你来说重要的是它们是有效的并且可以工作。*

**所以...**

您不需要在`routes`文件中声明每个可选参数。这是类型参数验证的绝佳捷径，最好的选择是说服“*其他公司*”使用您准备的 API……无论如何，如果您没有这种可能性，您也可以根据需要处理***他们的***请求。

一般来说：*调度*程序方法似乎在这个地方是正确的，幸运的是你不需要在中声明所有可选参数`routes`并在动作/方法之间传递它，因为它们可以直接从请求中获取。在 PHP 中，它可以与`$_GET['action']`Play 2 控制器 -`DynamicForm`类 -的 Java 版本进行比较`form().bindFromRequest.get("action")`。

**假设您有一条路线：**

```
GET     /dispatcher      controllers.Application.dispatcher 
```

在这种情况下，您的调度程序操作（和其他方法）可能如下所示：

```
def dispatcher = Action { implicit request =>
    request.queryString.get("action").flatMap(_.headOption).getOrElse("invalid") match {
      case "sayHello" => sayHelloMethod
      case "newUser"  => newUserMethod
      case _          => BadRequest("Action not allowed!")
    }
}

// http://localhost:9000/dispatcher?action=sayHello&name=John
def sayHelloMethod(implicit request: RequestHeader) = {
  val name = request.queryString.get("name").flatMap(_.headOption).getOrElse("")
  Ok("Hello " + name )
}

// http://localhost:9000/dispatcher?action=newUser&name=John+Doe&address=john@doe.com
def newUserMethod(implicit request: RequestHeader) = {
  val name = request.queryString.get("name").flatMap(_.headOption).getOrElse("")
  val address = request.queryString.get("address").flatMap(_.headOption).getOrElse("")
  Ok("We are creating new user " + name + " with address " + address)
} 
```

当然，您将需要“手动”验证传入的类型和值，尤其是当操作将在数据库上运行时，无论如何您现在已经解决了大部分问题。

# java - serversocket 不接受连接？

> ID：15684857
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:46:54.743
> 
> 标签：java, macos, sockets

我正在使用 Mac 并尝试在**本地计算机**上运行服务器。这是代码

```
//1\. creating a server socket
        providerSocket = new ServerSocket(0, 10);
        //2\. Wait for connection
        System.out.println("Waiting for connection");
        try{
        connection = providerSocket.accept();
        }
        catch (IOException ex){
            System.err.println(ex);
        }
        System.out.println("Connection received from " +                   connection.getInetAddress().getHostName()); 
```

我看到打印“等待连接”但没有打印“从...收到连接”我看到代码仍在运行，这意味着接受（）被阻止？我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:49:24.153

您必须有一个连接到该服务器的客户端。直到那时服务器将等待。

检查此链接：

[http://www.javaworld.com/jw-12-1996/jw-12-sockets.html](http://www.javaworld.com/jw-12-1996/jw-12-sockets.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:58:26.600

由于您使用`0`的是端口号，这意味着`ServerSocket`它将侦听任何可用的空闲端口。您必须确保客户端连接到该端口上的服务器。端口可以​​通过 获得`ServerSocket.getLocalPort()`。

更好的方法是硬编码端口号并使客户端连接到该端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:48:43.307

accept() 阻塞，直到建立连接。您实际上是否有客户端尝试访问套接字？[如果没有，我认为运行以下 java 跟踪](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)对您是有益的。

# c++ - 如何将函数应用于双端队列的每个元素？

> ID：15684861
> 
> 赞同：0
> 
> 时间：2013-03-28T14:47:02.623
> 
> 标签：c++, deque

我有一个`std::deque<float> k{3, 4, 5, 0};`.

如何将函数应用于每个元素？

```
float o(float k) {if (k > 4) return k - CONSTDIFF;}; 
```

将此函数应用于每个元素后，结果将是：

```
k == {3, 4, 5-CONSTDIFF, 0}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:52:32.760

您可以使用`std::transform`和 lambda 表达式：

```
std::transform(
    k.begin(),
    k.end(),
    k.begin(),
    [](float f) { 
        return (f > 4.0f) ? (f - CONSTDIFF) : f;
    }
); 
```

这是一个 C++11 解决方案。如果您使用的是 C++03，则可以将该 lambda 表达式移至自由函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:50:27.980

你可以用它`for_each()`来做到这一点。

[http://www.cplusplus.com/reference/algorithm/for_each/](http://www.cplusplus.com/reference/algorithm/for_each/)

例子：

```
#include <iostream>
#include <deque>
#include <algorithm>

using namespace std;
float CONSTDIFF=1;
void o(float& k) {if (k > 4) k-= CONSTDIFF;};

int main()
{
    deque<float> k;
    k.push_back(3);
    k.push_back(4);
    k.push_back(5);
    k.push_back(0);

    for_each(k.begin(),k.end(),o);

    for(deque<float>::iterator i=k.begin(); i!=k.end(); i++)
    {
        cout << *i << endl;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:58:01.737

```
for_each(k.begin(),k.end(),[=](float x)
            {return x>4.0f ? x-CONSTDIFF : x ;}); 
```

还有这个？

```
for(auto&x:k) if (x>4) x-=CONSTDIFF; 
```

# ios - xCode 4.6 - 缺少所需的架构 armv6

> ID：15684864
> 
> 赞同：2
> 
> 时间：2013-03-28T14:47:08.817
> 
> 标签：ios, xcode

我正在尝试将我的二进制文件发送到 Apple（通过 Application Loader）以获得 App Store 的批准。但是，每次发送 .zip 文件时，都会收到错误消息“应用程序缺少所需的架构。必须至少存在以下架构之一：armv6。”

这是我的构建设置：

![在此处输入图像描述](../Images/651fc37030b5c631fa0ae1dfc7c0b39c.png)

我的 iOS 部署目标是 4.3。

进行这些设置更改后，我执行产品 -> 构建 -> 存档。打开 Products 文件夹下的 .app 文件并执行“压缩”操作以创建 .zip 文件。

当我在 Application Loader 中加载所述 .zip 文件时，它仍然给我错误。这些架构设置适用于我的项目和目标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:57:30.993

带有 iOS 6 SDK 的 Xcode 4.* 不再支持 voor ARMv6。

因此，如果您想针对 iOS SDK 6.0 进行构建，您将不得不放弃对 ARMv6 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T21:41:41.870

如果此更改未解决您的问题，请检查您的应用程序加载器版本，可能是您使用的是旧的 xcode 应用程序加载器。尝试使用新的应用程序加载器

# c# - 根据单词的位置从段落中提取单词

> ID：15684871
> 
> 赞同：-4
> 
> 时间：2013-03-28T14:47:37.207
> 
> 标签：c#

假设我有一段文字（注意这是编造的，我的样本有更多文字）：

“你好

这是我的密码：abc123

再见”

我知道密码将紧跟在“这是我的密码：”这句话之后

此外，密码将是 8 个字符。如何提取上面的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:59:38.130

因为我不知道正则表达式：

```
string data = "Hello.\n This is my password: abcd1234 n\goodbye.";
string passFlag = "This is my password: ";
int startPos = data.IndexOf(passFlag) + passFlag.Length;
string password;
if(startPos >= 0 )
    password = data.Substring(startPos,startPos+8); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:52:00.770

```
 string Password = Regex.Replace(Input, @"^.*This is my password: (.{8}).*$", "$1", RegexOptions.Singleline); 
```

# java - 无法将 Holoeverywhere 应用程序转换为 getapplicationcontext

> ID：15684874
> 
> 赞同：0
> 
> 时间：2013-03-28T14:47:40.823
> 
> 标签：java, android, android-holo-everywhere

我扩展了应用程序类以向我的应用程序添加一些偏好，我开始在任何地方实现 holoevery，现在我收到了这个错误：

```
03-28 10:39:10.020: E/AndroidRuntime(12511): java.lang.ClassCastException: org.holoeverywhere.app.Application cannot be cast to com.myapp.Globals 
```

在这一行：

```
Globals global = (Globals) getApplicationContext(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:40:23.163

```
import org.holoeverywhere.app.Application;

public class Globals extends Application {
  ..
}

<application android:name="com.package.Globals"
  ..
/>

Globals application = (Globals) getApplication(); 
```

# web-services - Rally：保存更改时启动进程/程序？

> ID：15684876
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:47:46.643
> 
> 标签：web-services, ipc, dynamics-crm, rally

我的任务是重新编写一些代码以集成 CRM 和 Rally。

目前，我们有一段代码位于服务器上，并且每隔一段时间就会点击 Rally REST 服务来拉下已更改的项目并将它们分流到 CRM。CRM 可以设置为在发生特定事情（新项目、更改等）时调用一段代码，因此不涉及中间代码或延迟。

可以设置 Rally 来做同样的事情吗？

非常感谢，

雷克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:23:11.197

Rally 没有任何调度程序/触发机制，因此您可以将其设置为自动轮询以响应某些事件。最可行的选择可能是使用 Rally 的[REST 工具包](https://developer.help.rallydev.com/rest-apis)之一来开发在外部系统上运行的调度轮询器。

# sql - 使用 Count 和 GroupBy 的 Sql 查询

> ID：15684878
> 
> 赞同：1
> 
> 时间：2013-03-28T14:47:54.770
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个类似于下面的场景：

有两张桌子`Transaction`和`Product`

`Transaction`表有列

```
Id, Amount ProductId TransactionDate ,DepartmentId
1,  100       100       01/01/2013       1
2,  200       101       02/01/2013       2 and so on.... 
```

`Product`表有列

```
Id,   Name, ProductType.
100,  AB ,    1
101   C ,     2 
```

我想编写一个输出以下内容的存储过程：

```
Month Year Department Count(Transactions) Count(Transactions of ProductType1) 
Feb   2012    1              100                        50 
Mar   2012    1              100                        50 
Apr   2012    1              100                        50 
Feb   2012    2              100                        50 
```

我到了这里：

```
select 
    YEAR(T.TransactionDate) AS [YEAR],
    MONTH(T.TransactionDate) AS [MONTH], 
    Count(T.Id)
from 
    Transaction T 
INNER JOIN 
    Product P ON P.Id = T.ProductId
group by 
    T.DepartmentId, YEAR(T.TransactionDate), MONTH(T.TransactionDate); 
```

它输出以下内容：

```
Month Year Department Count(Transactions) 
```

我想知道我还可以如何包括：

```
Count(Transactions of ProductType1) 
```

我也试过这个：

```
select 
    YEAR(T.TransactionDate) AS [YEAR],
    MONTH(T.TransactionDate) AS [MONTH],    
    Count(T.Id)
    (Select Count(T.Id)
     from Transaction T 
     INNER JOIN Product P ON P.Id = T.ProductId
     where P.Id = 1)
from 
     Transaction T 
INNER JOIN 
     Product P ON P.Id = T.ProductId
group by 
     T.DepartmentId, YEAR(T.TransactionDate), MONTH(T.TransactionDate); 
```

由于 group by 子句，它给我的交易计数结果不准确，其中 productid = 1

我不想编写单独的查询..但我想知道是否有一种有效的方法可以让 SQL 语句在一个查询中返回以下内容？

```
 Month Year Department Count(Transactions) Count(Transactions of ProductType1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:50:54.960

你真的很接近，你需要添加另一个`COUNT`，但使用`CASE`表达式：

```
SELECT  YEAR(T.TransactionDate) AS [YEAR],
        MONTH(T.TransactionDate) AS [MONTH], 
        COUNT(T.Id) AS Transactions,
        SUM(CASE WHEN P.ProductType = 1 THEN 1 ELSE 0 END) AS TransactionsType1
FROM [Transaction] T 
INNER JOIN Product P 
    ON P.Id = T.ProductId
GROUP BY T.DepartmentId, YEAR(T.TransactionDate), MONTH(T.TransactionDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:57:15.853

您还可以使用该`PIVOT`函数来获取结果：

```
select month, year, 
  departmentid, totalTransactions, 
  [1] ProductType1,
  [2] ProductType2
from
(
  select month(t.transactiondate) month,
    year(t.transactiondate) year,
    t.departmentid,
    p.productType,
    count(*) over(partition by month(t.transactiondate), 
                                year(t.transactiondate),
                                t.departmentid) totalTransactions
  from [transaction] t
  inner join Product p
    on p.id = t.productid
) s
pivot
(
  count(productType)
  for productType in ([1], [2])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/744b0/6)

# google-chrome-extension - Chrome 打包应用程序窗口在 Windows 8 上最大化为全屏

> ID：15684879
> 
> 赞同：5
> 
> 时间：2013-03-28T14:47:57.910
> 
> 标签：google-chrome-extension, google-chrome-app

当我在 Windows 8 上最大化打包的应用程序窗口（使用 chrome.app.window.create 创建）时，它会最大化为全屏（隐藏任务栏）。

有没有办法让chrome窗口正常最大化而不是全屏？（让任务栏可见）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T01:51:49.330

我意识到这有点过时了，但不知何故问题仍然存在，我想我找到了一个临时解决方案。

您可以使用`chrome.system.display`API 查询屏幕的可用区域，然后将其设置为窗口的宽度/高度：

```
chrome.system.display.getInfo(function(info) {
    var width = info[0].workArea.width;
    var height = info[0].workArea.height;
    chrome.app.window.create(url, {
        bounds: {
            width: width,
            height: height
        },
    });
}); 
```

`chrome.system.display.getInfo()`返回一个对象，其中包含有关显示器的数据，其中的`workArea`属性指定可用的高度/宽度。请记住`system.display`在应用清单中包含权限！[你可以在这里](https://developer.chrome.com/apps/system_display.html)阅读更多。

绝对是一个黑客，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:00:33.900

它应该最大化而不隐藏标题栏。我尚未对此进行验证，但我已针对错误[https://code.google.com/p/chromium/issues/detail?id=224924](https://code.google.com/p/chromium/issues/detail?id=224924)提交了铬问题。

# python - Python：浅拷贝和深拷贝构造函数的实现

> ID：15684881
> 
> 赞同：10
> 
> 时间：2013-03-28T14:48:01.670
> 
> 标签：python, copy-constructor, deep-copy

在大多数情况下，在 C++ 中很容易实现复制构造函数（或重载赋值运算符），因为存在指针的概念。但是，我对如何在 Python 中实现浅拷贝和深拷贝感到很困惑。

我知道其中一个库中有特殊命令，但它们不适用于您自己编写的类。那么常见的实现方式有哪些呢？

PS 显示一些基本数据结构（链表或树）的过程将不胜感激。

编辑：谢谢，他们工作，这是我的语法错误。我对用`__copy__()`和覆盖这些函数非常感兴趣`__deep_copy()__`。例如。如何在不知道数据结构中包含哪种类型的信息的情况下进行深层复制？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T14:52:44.013

python[`copy`模块](http://docs.python.org/2/library/copy.html)可以重用[`pickle`模块](http://docs.python.org/2/library/pickle.html#module-pickle)接口来让类自定义复制行为。

自定义类实例的默认设置是创建一个新的空类，换出`__class__`属性，然后对于浅拷贝，只需`__dict__`使用原始值更新副本。一个深拷贝在`__dict__`替代上递归。

否则，您指定一个`__getstate__()`返回内部状态的方法。这可以是您的班级`__setstate__()`可以再次接受的任何结构。

您还可以指定`__copy__()`和/或`__deepcopy__()`方法来控制*仅*复制行为。这些方法应该自己完成所有的复制，该`__deepcopy__()`方法被传递一个备忘录映射以传递给递归`deepcopy()`调用。

一个例子可能是：

```
from copy import deepcopy

class Foo(object):
    def __init__(self, bar):
        self.bar = bar
        self.spam = expression + that * generates - ham   # calculated

    def __copy__(self):
        # self.spam is to be ignored, it is calculated anew for the copy
        # create a new copy of ourselves *reusing* self.bar
        return type(self)(self.bar)

    def __deepcopy__(self, memo):
        # self.spam is to be ignored, it is calculated anew for the copy
        # create a new copy of ourselves with a deep copy of self.bar
        # pass on the memo mapping to recursive calls to copy.deepcopy
        return type(self)(deepcopy(self.bar, memo)) 
```

此示例定义了自定义复制挂钩以防止`self.spam`被复制，因为新实例将重新计算它。

# php - Codeigniter：如何获取文件的文件名

> ID：15684885
> 
> 赞同：7
> 
> 时间：2013-03-28T14:48:05.813
> 
> 标签：php, codeigniter

我是 Codeigniter 菜鸟，我正在尝试获取上传图像的文件名，以便将其保存在数据库中。我有两个模型，homemodel 处理我的数据库，image_upload_model 处理图像上传。一切正常，除了我不知道如何将图像文件名发布到数据库

**image_upload_model.php**

```
<?php

class Image_upload_model extends CI_Model {

    var $image_path;

    //constructor containing the image path
    function Image_upload_model() {

        $this->image_path = realpath(APPPATH.'../assets/img');
    }

    //uploading the file
    function do_upload() {

        $config = array(
            'allowed_types' => 'jpg|jpeg|gif|png',
            'upload_path' => $this->image_path
        );
        $this->load->library('upload',$config);
        $this->upload->do_upload();
    }
}
?> 
```

**homemodel.php**

```
<?php

class homeModel extends CI_Model {

    //inserting into the table tenants
    function addTenants() {

        $this->load->model('Image_upload_model');

        $data = array(
            'Fname' => $this->input->post('Fname'),
            'Lname' => $this->input->post('Lname'),
            'contact' => $this->input->post('contact'),
            'email' => $this->input->post('email'),
            'location' => $this->input->post('location'),
            'img_url' => " "//the filename of the image should go here
        );

        $this->db->insert('tenants', $data);
    }
}
?> 
```

控制器
**homecontroller.php**

```
<?php

class HomeController extends CI_Controller {

    public function index() {

        $this->load->helper('form');
        $this->load->helper('html');
        $this->load->model('homemodel');
        $this->load->model('Image_upload_model');

        if ($this->input->post('submit') == 'Submit') {

            $this->homemodel->addTenants();
            echo 'inserted';
            $this->Image_upload_model->do_upload();
            echo 'image uploaded';
        }
        $this->load->view('index.php');
    }
}
?> 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T15:53:28.640

你可以得到这样的文件名

```
 $upload_data = $this->upload->data(); 
  $file_name =   $upload_data['file_name']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:03:26.790

在非常高的层次上，您需要按如下方式重构您的代码：

（1）在你的`HomeController`，先上传图片（`$this->Image_upload_model->do_upload()`然后更新你的数据库（`$this->homemodel->addTenants()`

(2) 在您的上传模型中，您需要调用`$this->upload->data()`以获取包含您的文件名的信息数组（参见 CodeIgniter 文档）。然后，您必须获取该文件名并将其提供给 HomeController 并将其传递给`addTenants`函数。

有了这个指导，您应该能够相应地修改您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-08T03:37:47.923

轻松获取文件名`$this->upload->file_name`

基于函数上传`system/library/upload.php`

```
public $file_name               = "";
public function data()
{
    return array (
                    'file_name'         => $this->file_name,
                    'file_type'         => $this->file_type,
                    ...
                );
} 
```

# javascript - Jquery编辑代码只选择一个复选框

> ID：15684887
> 
> 赞同：0
> 
> 时间：2013-03-28T14:48:07.460
> 
> 标签：javascript, jquery, html, checkbox

**编辑 -**

感谢您对这些人的帮助，接受您的建议一个问题满足我的需求。

这是我要使用的代码。

[http://jsfiddle.net/magicalex/FmQvc/](http://jsfiddle.net/magicalex/FmQvc/)

HTML

```
<input data-bedrooms="1" type="checkbox">1 bedroom<br>
<input data-bedrooms="2" type="checkbox">2 bedrooms<br>
<input data-bedrooms="3" type="checkbox">3 bedrooms<br><br>
<ul>
<li data-bedrooms="1">1 bedroom apartment</li>
<li data-bedrooms="1">1 bedroom apartment</li>
<li data-bedrooms="3">3 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="3">3 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="1">1 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
</ul> 
```

Javascript

```
$('input').change(function() {
  var allchecked=0; 
  $('input').each(function() {
    var checked;
    if (checked = $(this).attr('checked')) {allchecked++};
    var numberofrooms = $('li[data-bedrooms='+$(this).data('bedrooms')+']');
    checked ?  numberofrooms.show('slow'): numberofrooms.hide('slow');
  });
  if(allchecked==0){$('li').show('slow');}
}); 
```

当您启动它时，它会立即将所有结果显示到复选框中，然后在用户勾选相关结果的复选框时过滤它们，然后当您取消勾选每个框时，结果都会再次显示。谁能告诉我如何扭转这一点，在启动时隐藏所有结果，并在没有勾选复选框时再次隐藏？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:16:20.803

您似乎正在寻找默认的复选框行为。您可以使用常规复选框并应用类似于该示例页面中的样式。不要使用他们的 javascript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:10:20.830

为了触发其他复选框，您可以将事件处理程序绑定到“标记所有”复选框并使其触发过滤复选框。

### 演示

这是[关于 jsbin 的演示](http://jsbin.com/ulasox/2/edit)。

## html:

给定以下html：

```
<div class="checkbox-wrapper">
  <input class="checkbox-all" type="checkbox">
  <input class="checkbox" type="checkbox">
  <input class="checkbox" type="checkbox">
  <input class="checkbox" type="checkbox">
  <input class="checkbox-all" type="checkbox">
  ...
</div> 
```

## Javascript：

您可以使用此 Javascript 来启动触发其他复选框的复选框：

```
$(function(){ // Same as $(document).ready(function(){});

  // Cache variables
  var list, $this, checked;

  // Bind event handler for check all checkbox
  $('.checkbox-wrapper').on('click', '.checkbox-all', function(){

    // Get all checkboxes following the clicked "mark all"
    list = $(this).nextUntil('.checkbox-all', '.checkbox');

    // See if the current all checkbox is "chceked"
    checked = $(this).prop('checked');

    list.each(function(){

      $this = $(this);

      // Trigger the click event          
      if ( checked ){
        if ( !$this.prop('checked') )
          $(this).trigger('click');
      } else {
        if ( $this.prop('checked') )
          $(this).trigger('click');
      }

    });

  });

}); 
```

这将与您引用的脚本一起用于切换元素。

# r - 在 R 中读取文件

> ID：15684888
> 
> 赞同：1
> 
> 时间：2013-03-28T14:48:08.690
> 
> 标签：r

我一直在为我的问题在许多主题中寻找解决方案，但我找不到答案。我有十几个文件试图从目录中读取，但似乎没有任何效果。我首先尝试了这个：

```
files <- list.files(path="../..")
files1 <- lapply(files, read.table, header=TRUE, sep="", skip=5) 
```

还有这个：

```
files <- list.files(path="../..")
for (i in 1:length(files)) {
files1 <- read.table(files[i], header=TRUE, sep="",skip=5)
} 
```

它说错误文件（文件，“rt”）无法打开此类文件或目录，但当我执行>文件时，它会列出所有文件。

哪里错了？发送

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:53:13.753

`list.files`为您提供文件名，您需要完整的路径名。

一种选择是将完整路径粘贴到文件列表中：`paste("path/to/files/", files, sep="/")`

正如@BenBarnes 指出的那样，另一种选择是`full.names`在`list.files()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:21:41.710

我更喜欢将`plyr`包用于这种类型的事情。根据您计划使用文件的方式，您可能需要使用不同的 l*ply 函数：

```
require(plyr)
files <- dir("../..", full= TRUE)
data <- llply(files, read.table, header= T, sep= "", skip= 5) 
```

这将为您提供 12 个（或许多）数据集的列表。

# android - 未为 AudioManager 类型定义 getProperty()

> ID：15684889
> 
> 赞同：0
> 
> 时间：2013-03-28T14:48:09.583
> 
> 标签：android, eclipse, android-audiomanager

我对 API 17 AudioManager 的方法有疑问`getProperty`

Eclipse 无法识别此方法并显示：

`The method getProperty() is undefined for the type AudioManager`

我在 Android SDK Manager 中更新了 Eclipse 和包。API 17 已安装并且是最新的。

> Eclipse 版本：4.2.2
> 
> 版本号：M20130204-1200

示例代码：

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
audio.getProperty(AudioManager.PROPERTY_OUTPUT_SAMPLE_RATE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:18:18.660

如果我将项目的 Android 版本设置为 4.2.2，对我来说效果很好。

```
String s = am.getProperty(AudioManager.PROPERTY_OUTPUT_FRAMES_PER_BUFFER); 
```

在包资源管理器中右键单击您的项目，单击`Properties`、`Android`、设置`Project Build Target`为`Android 4.2.2`并单击`Apply`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:07:59.357

确保您在项目 AndroidManifest.xml 中设置了 sdk 级别：

```
<uses-sdk android:targetSdkVersion="17" /> 
```

为了安全起见，在 project.properties 中：

```
# Project target.
target=android-17 
```

# php - 当前浏览器检测的最佳实践是什么

> ID：15684893
> 
> 赞同：3
> 
> 时间：2013-03-28T14:48:16.170
> 
> 标签：php, jquery, html, cross-browser

我有一个 php 例程，它接受 HTML，对其进行一些处理，然后将其呈现出来。

问题在于，根据浏览器的不同，可能会或可能不会
向输出中添加额外内容。

如果我能得到浏览器，我可以为这个问题编写代码。但是，到目前为止，我对如何获取正在使用的浏览器的发现感到困惑。

JQuery 文档说不要使用 $browser 属性。其他人说不要使用 navigator.userAgent。那我应该用什么？

谢谢！

[编辑：谢谢大家的精彩回答。我学到了一些新东西，并想将所有回复标记为答案，但由于我只能选择一个，我将选择贾斯汀的，因为他的回复表明我的问题可能是样式。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:50:34.833

浏览器检测的最佳做法是**不使用它**。

您应该改用特征检测。查看[jQuery.support](http://api.jquery.com/jQuery.support/)中的测试套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:53:49.300

如果你真的，真的，真的想了解浏览器，你可以使用 get_browser() ( [http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php) )。我不推荐它，因为它不仅速度慢而且需要不断更新文件，而且根据不同的浏览器为用户提供不同的输出也是一种不好的做法。

对于 chrome/firefox 以外的浏览器，最好在之后修复 javascript/css 的错误和问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:55:17.163

当前的最佳实践是使用特征检测。有整个库专门用于此，例如[Modernizr](http://modernizr.com/)和[`$.support`](http://api.jquery.com/jQuery.support/)作为 jQuery API 的一部分。这个想法是检查缺少的*功能*并回退到辅助支持，一直到仅提供不支持该功能的消息。

现在 Web 开发人员的口头禅是**不要进行浏览器检测**，但我认为这在某些情况下是不现实的。很多时候您可能想说“您正在使用 Internet Explorer 7！” 或类似的，这显然需要通过 php`get_browser()`或`navigator.userAgent`JavaScript 端猜测用户代理字符串。我还遇到了一个 Web 应用程序的问题，其中 IE7 和 IE8 使用太多内存来处理特定的数据负载——这显然不是可以检测到的“功能”。

您还可以使用特征检测来猜测特定的浏览器。例如，IE7 没有`window.localStorage`.

关键是，如果您想尝试猜测浏览器是什么，您将不得不接受一定的错误可能性。

# vb.net - 在安装 vb.net 期间添加连接字符串

> ID：15684897
> 
> 赞同：0
> 
> 时间：2013-03-28T14:48:25.800
> 
> 标签：vb.net, visual-studio-2010, connection, connection-string, app-config

这是我最后一个问题的跟进：[在安装 vb.net 项目期间添加连接字符串](https://stackoverflow.com/questions/15682988/adding-connection-string-during-installation-of-vb-net-project?noredirect=1#comment22266321_15682988)

这是我到目前为止的代码，但行中的“配置”：

将配置调暗为配置 = ConfigurationManager.OpenExeConfiguration(exePath)

有一条蓝线，因此我无法运行该程序。我将 C# 代码转换为该代码并出现蓝线。我在这里要做的是获取一个字符串，该字符串可用于 app.config 将使用的连接字符串。

导入 System.ComponentModel

导入 System.Configuration.Install

公共类 InstallerClass

```
Public Sub New()
    MyBase.New()

    InitializeComponent()

End Sub

<RunInstaller(True)> _
Partial Public Class MyInstaller
    Inherits Installer

    Partial Public Class MyInstaller
        Inherits Installer

        Public Overrides Sub Install(ByVal stateSaver As System.Collections.IDictionary)

            MyBase.Install(stateSaver)

            Dim targetDirectory As String = Context.Parameters("targetdir")

            Dim param1 As String = Context.Parameters("Param1")

            Dim param2 As String = Context.Parameters("Param2")

            Dim param3 As String = Context.Parameters("Param3")

            Dim exePath As String = String.Format("{0}MyWindowsFormsApplication.exe", targetDirectory)

            Dim config As Configuration = ConfigurationManager.OpenExeConfiguration(exePath)

            config.AppSettings.Settings("Param1").Value = param1

            config.AppSettings.Settings("Param2").Value = param2

            config.AppSettings.Settings("Param3").Value = param3

            config.Save()

        End Sub

    End Class

End Class 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:44:44.783

我不知道是不是这样，但我从您发布的代码中注意到了一些事情：

*   [`ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager%28v=vs.90%29.aspx)来自`System.Configuration`命名空间，[`Configuration`](http://msdn.microsoft.com/en-us/library/system.configuration.configuration%28v=vs.90%29.aspx)类也是如此，但您的代码中似乎没有`Imports System.Configuration`（仅）...如果您还没有这个`Imports System.Configuration.Install`，我会尝试添加一个语句`Imports System.Configuration`

*   您是否在安装程序项目中添加了对程序集的[引用](http://msdn.microsoft.com/en-us/library/vstudio/wkze6zky%28v=vs.100%29.aspx)`System.Configuration`？（对不起，我不记得它是否默认添加了这个程序集引用）

# infopath2010 - 在 infopath 2010 中动态设置只读

> ID：15684899
> 
> 赞同：0
> 
> 时间：2013-03-28T14:48:38.660
> 
> 标签：infopath2010

我是 infopath 的新手，我有一个包含多个视图的表单，显示的视图由字段用户类型控制，该字段在工作流中设置并具有 int 值（1 = 请求者，2 = 销售，3 = 产品......）因此，如果我将 usertype 设置为 2，则表单会加载销售视图，这是它应该如何工作的，但我需要做的是将所有其他视图设置为只读，以便销售人员可以查看所有视图中的数据，但只能更改在他的视图中呈现的日期，即销售视图。

那么如何构建规则或添加c#代码来实现根据usertype的值将views属性设置为只读呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:51:38.287

隐藏功能区中的视图下拉菜单，以便您可以控制在特定情况下可以访问哪些视图。

为三个视图中的每一个创建只读版本。使用可编辑表单上的按钮显示其他两个视图的只读版本。

# scala - Akka 2.1.2 调度程序出现问题（“系统”无法识别）

> ID：15684901
> 
> 赞同：18
> 
> 时间：2013-03-28T14:48:43.343
> 
> 标签：scala, akka

根据这些示例，我正在尝试运行一个非常简单的重复函数循环：

[http://doc.akka.io/docs/akka/2.1.2/scala/scheduler.html](http://doc.akka.io/docs/akka/2.1.2/scala/scheduler.html)

编码：

```
import akka.actor.Actor
import akka.actor.Props
import scala.concurrent.duration._

object Main extends Application {
  val system = akka.actor.ActorSystem("system")    // this was missing!
  import system.dispatcher

  system.scheduler.schedule( 0 milliseconds, (10*1000) milliseconds, {
    println( "click!" )
  })
} 
```

我得到（sbt）：

```
> .../src/Main.scala:34: not found: value system [error]       import
> system.dispatcher [error]              ^ [error]
> .../src/Main.scala:36: not found: value system [error]      
> system.scheduler.schedule( 0 milliseconds /*initial delay*/,
> (entry.secs*1000) milliseconds /*delay between*/, { [error]       ^ 
```

`system`应该从哪里来？

**附录：**

我在'main（）'函数中有代码，我没有从`Actor`or继承任何东西`ActorSystem`。关键是我想安排功能，但不涉及演员。框架是否认为我必须从某些东西中派生（如果是的话，它应该这么说吗？）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-28T15:14:40.483

之前似乎缺少以下表达式`import system.dispatcher`：

```
val system = akka.actor.ActorSystem("system") 
```

# actionscript-3 - 课程 - “这个”课程的新手。

> ID：15684903
> 
> 赞同：1
> 
> 时间：2013-03-28T14:48:45.720
> 
> 标签：actionscript-3

我在课堂上很新。下面是创建一个 StageObject 类的尝试，我可以设置宽度、高度、xy 和背景颜色。

```
 package 
    {
        import flash.display.MovieClip;

public class StageObjects extends MovieClip
    {

        public function StageObjects()
        {
            // constructor code
        }
        public function setUpStageObject(w:int, h:int, X:int, Y:int, color:Number):void
        {
            this.width = w;
            this.height = h;
            this.x = X;
            this.y = Y;

            this.cacheAsBitmap = true;
            this.graphics.beginFill(color,1);
            this.graphics.drawRect(0,0,w,h);
            this.graphics.endFill();
            this.opaqueBackground = color;
            trace("parameters: " + w + " - " + h + " - " + X + " - " + Y + " - " + color);

        }

        /*~~~ adjust position and scale functions ~~~*/
        public function adjustXY(ch:Object, par:Object):void
        {
            var w = par.width;
            var h = par.height;

            ch.x = par.x + (w - ch.width) / 2;
            ch.y = par.y + (h - ch.height) / 2;
        }

        public function adjustWH(ch:Object, par:Object):void
        {
            var w = par.width;
            var h = par.height;

        }

    }

} 
```

在主时间线（Flash）中，我这样做：

```
var titleBkg:StageObjects = new StageObjects();
titleBkg.setUpStageObject(imageBoxWidth, titleBkgHeight, -1, imageBoxHeight +1, 0x589199);
this.addChild(titleBkg); 
```

但它没有出现。我有没有提到“这个”。错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:54:15.267

您没有使用 addChild 正确创建图形并将其作为父图形。

实际上，您的舞台如下所示：

```
Stage ¬
    0: MainTimeline:MovieClip ¬
        0: instance1:StageObjects 
```

它需要看起来像这样：

```
Stage ¬
    0: MainTimeline:MovieClip ¬
        0: instance1:StageObjects ¬
            0: instance1:Shape 
```

您的图形调用应该在形状上调用，而不是在影片剪辑上调用。您也可以在第一次通话时使用一条线路而不是两条线路进行此设置。

```
package {
    import flash.display.MovieClip;

    public class StageObjects extends MovieClip {
        public function StageObjects(w:int, h:int, X:int, Y:int, color:uint) {
            // Constructor
            this.x = X;
            this.y = Y;

            var rect:Shape = new Shape();
            rect.graphics.beginFill(color,1);
            rect.graphics.drawRect(0,0,w,h);
            rect.graphics.endFill();
            addChild(rect);
            trace("parameters: " + w + " - " + h + " - " + X + " - " + Y + " - " + color);
        }

        public function adjustXY(ch:Object, par:Object):void {
            // adjust position and scale functions
            var w = par.width;
            var h = par.height;

            ch.x = par.x + (w - ch.width) / 2;
            ch.y = par.y + (h - ch.height) / 2;
        }

        public function adjustWH(ch:Object, par:Object):void {
            var w = par.width;
            var h = par.height;
        }
    }
} 
```

并且创建对象将被简化为：

```
var titleBkg:StageObjects = new StageObjects(imageBoxWidth, titleBkgHeight, -1, imageBoxHeight +1, 0x589199);
this.addChild(titleBkg); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T14:59:49.323

我想你已经在构造函数中声明了宽度、高度、图形等。在我的课程代码中，我从未使用过“this.”。如果变量被声明为类私有/公共编译器将不允许您声明另一个具有相同名称的变量。所以你不必使用'this.'，但是当你使用'this.'时它更具可读性。（你会知道它是类变量）。
您是否将您的图形添加到舞台（不是titleBkg，而是您在titleBkg 对象中创建的对象）？;)

# javascript - 禁用捏放大highstock/highcharts

> ID：15684910
> 
> 赞同：1
> 
> 时间：2013-03-28T14:48:55.090
> 
> 标签：javascript, ios, highcharts, highstock

随着 highcharts 的新更新支持在 iPad/iPhone 上进行缩放缩放，但这并不符合我的预期。我假设图表实际上会放大日期范围，而实际上只是放大了图表线条和标记，从而使功能变得毫无意义。

是否可以禁用此功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T02:55:56.433

有一个 chart.zoomType 和 chart.pinchType 属性采用相同的值 (x,y,xy,none)。默认情况下，chart.pinchType 为 null 并恢复为 chart.zoomType。如果您只想在 x 轴上缩放以进行捏合，您可以：

```
chart : {
  pinchType : 'x'
  ...
} 
```

或者将 chart.pinchType 设置为 'none' 以完全禁用。或者将其保留为 null 并将您的 chart.zoomType 设置为其中任何一个。

[http://api.highcharts.com/highcharts#chart.pinchType](http://api.highcharts.com/highcharts#chart.pinchType)

[http://api.highcharts.com/highcharts#chart.zoomType](http://api.highcharts.com/highcharts#chart.zoomType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T18:55:06.097

看起来将 pinchType 设置为任何东西都不起作用。在我们将 zoomType 设置为 null 之前，图表仍然会通过 iOS Safari 上的强硬手势进行缩放。另外，我们查看了源代码，似乎没有实现该属性。我们有 Highcharts JS v.4.1.7。

# javascript - Javascript / node.js：使用来自变量的字符串数据调用特定函数

> ID：15684915
> 
> 赞同：0
> 
> 时间：2013-03-28T14:49:01.793
> 
> 标签：javascript, string, node.js, variables

我正在编写一个程序，它会自动为我找到有关 Node.js 特定模块的信息。在某一时刻，用户输入他们想要执行的函数以查找有关它返回的对象的信息。但是，我遇到的问题是当我必须调用该函数时。我发现以下方法不起作用：

*   module = 用户选择的模块
*   ReturningFunction = 包含函数名的字符串
*   data = 一个字符串，其中包含一些要传递给函数的数据

    module.returningFunction(数据);

显然这不起作用，因为返回函数是一个字符串。我需要做的是使用输入到返回函数变量中的字符串数据以某种方式调用函数。这可能吗？

谢谢。

# iphone - 如何识别代码中的 UITableViewCell？

> ID：15684918
> 
> 赞同：0
> 
> 时间：2013-03-28T14:49:07.903
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

`indexPath`如果我有一个表格视图，其中包含不同类型的单元格，每个单元格都有其唯一标识符，我是否可以在将其出列之前找出与哪个重用标识符相关：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
                     cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

如果有另一种方法可以对单元格进行某种反射，那也可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:09:50.820

你可以，但你必须做所有的工作。您的工作是检查 indexPath 并确定您为特定单元格生成的内容类型，然后出列/或创建该类型的单元格，设置它并返回它。

但是，您不能对单元格进行反射，因为该单元格还不存在。这就是`-tableView:cellForRowAtIndexPath:`.

您可能会解决此问题的一种方法是拥有一个包含每个单元格信息字典的数组（表的每个部分都需要一个数组；我假设只有一个部分）。在开始时`-tableView:cellForRowAtIndexPath:`，您将使用索引路径中的行号对数组进行索引，然后检查字典的值以确定要出列的单元格类型以及如何设置它。

**编辑：**听起来您可能对单元重用标识符是什么以及它是如何生成的有些困惑。单元重用标识符是附加到表格视图内的单元的任意字符串。当您要求将单元格出列时，表格视图会检查是否有任何具有该重用标识符的未使用单元格可用。如果所有单元格都是相同类型的单元格并以相同方式配置，那么您将只有一个重用标识符，它可以是您选择的任何字符串。只需确保在调用`-dequeueReusableCellWithIdentifier:`和`UITableViewCell`'s时都使用该字符串`-initWithStyle:reuseIdentifier:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:14:19.143

最终，您是 cellIds 的发起者，将它们提供给 中新创建的单元格`tableView:cellForRowAtIndexPath:`，因此您不需要向 table view 询问 cellIds。完成你所寻求的最好方法是在你的类中添加一个函数：

```
-(NSString *)cellReuseIdForIndexPath:(NSIndexPath *)indexPath; 
```

该函数可以在字典、数组或您希望的任何其他方式中查找 cellId。在需要时使用该功能，只要它与您在表格视图中显示的数据保持一致，它就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:24:01.380

您需要将数据存储在 indexpath 中您需要什么类型的单元格，因为可重用标识符是从中挑选单元格以进行重用的池。

例如：如果

```
 reusableidentifier = @"reuse"; then when 
-dequeueReusableCellWithIdentifier: 
```

使用它从一个名为“重用”的池中选择一个单元格，如果一个单元格可用于重用，否则创建一个新单元格。因此，您无法找到哪个 indexpath 属于哪个可重用标识符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T15:24:08.140

```
if(cell != nil)    
NSLog(@"%@", cell.reuseIdentifier); 
```

# matlab - randperm() 可以生成几个随机排列吗？

> ID：15684928
> 
> 赞同：5
> 
> 时间：2013-03-28T14:49:28.803
> 
> 标签：matlab

在 Matlab 中

> p = randperm(n,k) 返回一个行向量，其中包含从 1 到 n （含）随机选择的 k 个唯一整数。

一次调用 randperm() 是否可以返回多行向量，每一行都如上？如果没有，还有其他方法可以生成几个随机排列吗？

在这种情况下，避免循环一定会更快吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:58:34.947

[RANDPERM](http://www.mathworks.com/help/matlab/ref/randperm.html)本身只返回一个排列。如果你想避免循环，你可以用 ARRAYFUN 调用它：

```
Nperm = 5; 
N = 6;
result = arrayfun(@(x)randperm(N),(1:Nperm)','UniformOutput',0); 
```

这将返回 Nperm x 1 元胞数组。要将其转换为矩阵，您可以使用 CELL2MAT：

```
result = cell2mat(result); 
```

还有一个[PERMS](http://www.mathworks.com/help/matlab/ref/perms.html)函数可以返回所有排列，但它只适用于小数字。

[还要检查FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/index?term=tag%3a%22permutations%22)提交[的 ALLCOMB](http://www.mathworks.com/matlabcentral/fileexchange/10064-allcomb)、[PERMS](http://www.mathworks.com/matlabcentral/fileexchange/32978-perms)等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:12:06.913

如果您要求所有排列都是相互唯一的，那么您可以使用以下

```
permN = 5; 
permK = 4; 
nPerms = 10;
nGoodPerms = 0;
nMaxFailedTries = 100; 
nFailedTries = 0;

permList = cell(nPerms, 1);

while nGoodPerms < nPerms && nFailedTries <= nMaxFailedTries
    candidatePerm = randperm(permN, permK);
    if any(cellfun(@(x)~isempty(x) && all(x == candidatePerm), permList))
        nFailedTries = nFailedTries + 1;
    else
        nGoodPerms = nGoodPerms + 1;
        permList{nGoodPerms} = candidatePerm;
    end
end

permList = cell2mat(permList{1:nGoodPerms}); 
```

如果没有生成所有请求的排列，则可能应该在那里发出警告（或错误）。也可以添加一个事先检查以确保它不是愚蠢的大（即，比使用给定的and`nPerms`生成的更独特的排列）。`permN``permK`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-10T22:48:54.107

**至于`p = randperm(n)`**：

在 Matlab 2010a 及更早版本中，`k`不支持输入参数。如果您查看`randperm`'s 代码

```
[~, p] = sort(rand(1,n)); 
```

您会看到修改它非常容易，以便它产生元素的`m`排列`n`（结果现在具有大小`m`x `n`）：

```
[~, p] = sort(rand(m,n), 2); 
```

**至于`p = randperm(n,k)`**：

我不知道 Matlab 在这种情况下是如何做到的，因为我的版本不支持它。你总是可以像上面那样做，然后修剪：

```
p = p(:,1:k); 
```

`k`但是，对于比 小得多的情况不是很有效`n`。

# php - php myslql 从多个表中选择

> ID：15684930
> 
> 赞同：0
> 
> 时间：2013-03-28T14:49:32.157
> 
> 标签：php, mysql, select

我有多个下拉列表框，其中包含来自数据库的数据，所以我想根据第一个的部分选择第二个下拉列表第一个
表有这三个字段 **District_id（主键），district_name，Governate_id（外键）** 第二个表有这三个字段 **村庄_id（主键），村庄名，区ID（外键）**

所以我希望用户首先选择地区框，然后根据选择的地区名称具有 id 我希望第二个框显示所有具有村庄.district_id = District.district_id 的村庄名称。谁能帮我？？我正在选择独立于另一个的每个表，但我需要它基于第一个

# 代码块

```
function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}
// function for select by village
function villageQuery(){

//$villageData = mysql_query("SELECT * FROM village");

  $villageData = mysql_query("SELECT village_name FROM village WHERE district_id = ('SELECT district_id FROM districts')") or die (mysql_error());

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

} 
```

**ps** 我不知道怎么用ajax和jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:05:43.143

`WHERE`您的条款中有几个问题：

```
WHERE district_id = ('SELECT district_id FROM districts') 
```

首先，从内部选择中删除单引号：

```
WHERE district_id = (SELECT district_id FROM districts) 
```

接下来，请注意，如果子查询 ( `SELECT district_id FROM districts`) 返回多于一行，这将失败。我怀疑你想要这样的东西：

```
WHERE district_id IN (SELECT district_id from districts) 
```

最后，您的查询仅获取具有已定义 District_id 的每个村庄的列表。推荐的方法是使用`INNER JOIN`：

```
SELECT village_name
FROM village
INNER JOIN districts ON village.district_id = districts.district_id 
```

* * *

**附录**：基于反馈的完整查询。

我对 PHP/Ajax 无能为力，但我知道如果一切都正确连接，它将为您提供地区 ID。当你得到它时，只需使用这个基本查询：

```
SELECT village_name FROM village WHERE district_id = <your district id value> 
```

祝你好运，对不起，我对 Ajax 部分无能为力。

# c# - 无法实现接口

> ID：15684932
> 
> 赞同：1
> 
> 时间：2013-03-28T14:49:35.227
> 
> 标签：c#, asp.net-mvc, class-library, nopcommerce

我正在尝试为**nopCommerce**用户中的管理员创建一个插件，并想为其创建一个自定义菜单项，我四处搜索，发现我必须`IAdminMenuPlugin`在 BuildMenuItem 中实现接口并配置我的菜单，我在我`MyPluginNamePlugin.cs`实现的文件`BasePlugin`，当使用 Visual Studio 自动实现默认界面而不修改任何东西时，`BuildMenuItem`我收到如下错误：

> 错误 1 ​​'Nop.Plugin.Misc.DobaImport.DobaImportPlugin' 没有实现接口成员 'Nop.Web.Framework.Web.IAdminMenuPlugin.BuildMenuItem(Telerik.Web.Mvc.UI.MenuItemBuilder)' ....\Plugins\Nop .Plugin.Misc.DobaImport\DobaImportPlugin.cs 8 18 Nop.Plugin.Misc.DobaImport

在编写我的代码后，我得到了同样的错误，这是我的整个`MyPluginNamePlugin.cs`文件：

```
using Nop.Core.Plugins;
using Nop.Web.Framework.Web;
using Telerik.Web.Mvc.UI;

namespace Nop.Plugin.Misc.DobaImport
{
    public class DobaImportPlugin : BasePlugin, IAdminMenuPlugin
    {

        public void BuildMenuItem(MenuItemBuilder menuItemBuilder)
        {
            menuItemBuilder.Text("Doba Import");
            menuItemBuilder.Url("/Admin/DobaImport/1");
            menuItemBuilder.Route("Nop.Plugin.Misc.DobaImport");
        }
    }
} 
```

我不知道我做错了什么，你能指出明显的错误吗？

我试图在 Nop.Web 项目中创建一个类并实现`BasePlugin`并`IAdminMenuPlugin`没有收到错误，但仍然不知道如何修复我的插件以实现接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:06:24.740

我发现问题“MenuItemBuilder”需要 Telerik.Web.Mvc 库，我从 nuget 包下载了 2013.1.219.340 版本，并且在输入正确的参考后，界面实现了“MenuItemBuilder”版本为 2012.1.214.340。

# vhdl - 与寄存器组相关的 VHDL 仿真错误

> ID：15684943
> 
> 赞同：0
> 
> 时间：2013-03-28T14:49:59.813
> 
> 标签：vhdl

我想制作一个由 4 个寄存器组成的寄存器组，每个寄存器都有 2 位，具有读/写功能............我使用了混合类型的架构............ .....这里我根据架构和模拟波形上传我的硬件图像............

> Deco - 2*4 解码器
> PIPO - 并行输入并行输出 2 位寄存器，具有读写能力（正沿触发）
> ConnectedBus - 输出侧的硬件在读取被断言时转移输出端口上选定寄存器的输出

![在此处输入图像描述](../Images/d083d7298d799b1b029da8e37b441f0c.png)

![在此处输入图像描述](../Images/485758417859d638cc92ca0577035a22.png)

![在此处输入图像描述](../Images/c0a76b56cd3a0074f5531ff6c63d6f8b.png)

但我的问题是在读取 2-3 个时钟脉冲后，我没有得到写入寄存器中的相同值.....但是我的程序编译成功并且我做了与下面硬件描述的相同的事情...... ......可能是什么错误？？？？？？

PIPO代码：

> lup1：
> 对于 0 到 N-1 中的 a，生成
> c(a) <= bid 和 clk；
> Tix: TriState 端口图(ip(a), bid, i(a));
> Dlx：DLat端口映射（i（a），c（a），o（a））；
> Tox: TriState port map(o(a), (not bid), op(a));
> 结束生成 lup1；
> 
> ip 和 op 端我使用了三态缓冲区，并且 ip 缓冲区具有控制位投标（双向），操作缓冲区具有控制位（不是投标），因此一次只有一个缓冲区将打开，并且在我使用的 DFF 中（ bid 和 clk) 作为 DFF 的时钟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:12:17.160

在我看来，您的任何信号都与您的时钟不同步。当信号相互漂移时，这很可能会导致“奇怪的行为”。以这种方式无法预测代码的行为。您应该选择同步设计并生成与同一时钟相关的所有信号。

# javascript - jQuery & twitter 引导模式

> ID：15684948
> 
> 赞同：2
> 
> 时间：2013-03-28T14:50:14.287
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

希望在一些 javascript 问题上获得一些帮助或指导。客户端站点将通过 CMS 进行维护，我们需要检查任何可能添加的 URL，如果是外部的，则启动 speedBump。我们确实需要一些例外（白名单）。

我们正在使用 twitter 引导模式，当前代码有一些意想不到的结果。

例如，模式中的继续按钮关闭对话框，而不是在确认时传递 URL。如果 URL 被声明为 http，模式关闭，如果它被声明为 www，它将 URL 附加到域（奇怪）。还在寻找改进/扩展或添加应该被 speedBump 忽略的 URL 白名单的最佳方法。我确信有比我们现有的方法更好的方法。

```
jQuery(document).ready(function () {
// FIND EXTERNAL LINKS
$.expr[":"].external = function (a) {
    // DO NOT INCLUDE THE FOLLOWING MATCHES: EMAIL LINKS, TELEPHONE LINKS, HOSTNAME
    return !a.href.match(/^mailto\:/) && !a.href.match(/^tel\:/) && a.hostname != location.hostname
};
// ADD BOOTSTRAP DATA-TOGGLE ATTRIBUTE TO THE LINKS
$('a:external').attr('data-toggle', 'modal');
// ADD BOOTSTRAP DATA-TARGET ATTRIBUTE TO THE LINKS
$('a:external').attr('data-target', '#speedbump');
// ADD EXTERNAL LINK CLASS .ext_link FOR STYLING
$("a:external").addClass("ext_link");
// ADD THE LINK AND TITLE TO THE MODAL WINDOW
$(function () {
    $('a.ext_link').click(function () {
        var url = $(this).attr('href');
        var title = $(this).attr('title');
        $('#url_link').attr('href', url);
    });
}); 
```

});

jsfiddle 上的当前代码和模态示例，供不介意查看的任何人使用：http: [//jsfiddle.net/zendiko/TYAeD/](http://jsfiddle.net/zendiko/TYAeD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:11:43.623

我不知道为什么会这样。但是，将重定向功能与事件挂钩`show`似乎可以解决问题。

```
$('#speedbump').on('show', function () {
    $('#url_link').click(function () {
        document.location = $(this).attr('href');
    });
}); 
```

# excel - Excel VBA 更改 Application.GetOpenFilename 的默认目录

> ID：15684950
> 
> 赞同：0
> 
> 时间：2013-03-28T14:50:16.020
> 
> 标签：excel, excel-2007, vba

我用谷歌搜索并找到了部分问题的答案，但不是完整的问题。我想在 Excel VBA 中使用 Application.GetOpenFilename 打开一个文件，我希望它在与 ThisWorkbook.Path 相同的目录中打开。我发现事先我可以做到

```
OpenPath = ThisWorkbook.Path
ChDrive OpenPath
ChDir OpenPath 
```

但是，在运行之后，如果我运行任何其他 Application.GetOpenFilename 它仍然会访问同一个目录（直到我关闭 Excel ？？？）。但是，我希望它恢复到默认目录（不管那是什么）。在我的计算机上，它是 Windows XP，它恰好是 MyDocuments。但是，使用它的一些人可能有 XP，而另一些人可能有 Windows 7。我找不到任何地方如何找出原始默认目录是什么，以便我可以存储它，以便以后可以重置为默认值. 任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:53:03.597

所以，这可能是解决方案：

```
Dim StartingDir as string
    StartingDir = CurDir

'...your code here

ChDir StartingDir    'just before you leave 
```

如有必要，请与`Drive`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-19T08:57:24.287

我很难回答这个问题，因为 ChDir 和 ChDrive 在我的网络文件夹中不起作用。这是我在论坛中发现的，效果出奇的好：

```
Private Declare Function SetCurrentDirectoryA Lib _
"kernel32" (ByVal lpPathName As String) As Long

Sub SetUNCPath(sPath As String)
Dim lReturn As Long
lReturn = SetCurrentDirectoryA(sPath)
If lReturn = 0 Then MsgBox "Error setting path."
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:04:49.700

这可能是你想要的

```
dim sStarDir as string
sStarDir=curDir
... do all you stuff
' now reset!
Application.DefaultFilePath=sStarDir 
```

菲利普

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-11T12:53:44.367

只需将其放在`application.getopenfilename()`：

```
ChDir "C:" 
```

例如：

```
ChDir "C:\userjjjj"

myfile = Application.GetOpenFilename()
'Open the file selected
Workbooks.Open (myfile) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-04T00:14:57.193

使用下一个代码正在工作

```
' declare the variable as string
Dim ruta As String
' get the dir of the current workbook
ruta = ThisWorkbook.Path & "\"
' this line set the dir as the same of the workbook
ChDir ruta 
' open a book in the same directory of the current book
Workbooks.Open(Application.GetOpenFilename) 
```

# android - 使用通用图像加载器

> ID：15684954
> 
> 赞同：1
> 
> 时间：2013-03-28T14:50:19.233
> 
> 标签：android, universal-image-loader

我正在尝试优化我的应用程序中的照片库，但遇到了 Universal Image Loader。但是，在我的应用程序中实现它的所有尝试都失败了。这是我当前应用程序中的 2 个类：活动类：

```
public class Galerija extends Activity {

ArrayList<RSSItem> lista = new ArrayList<RSSItem>();
ArrayList<String> lst_slika = new ArrayList<String>();
RSSItem tempItem = new RSSItem();
ImageAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_galerija);

    try 
    {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader myReader = sp.getXMLReader();

        URL url = new URL("http://erdut.gausstesting.info/generateXML/galerija.php");

        XMLHandler myXMLHandler = new XMLHandler();
        myReader.setContentHandler(myXMLHandler);
        myReader.parse(new InputSource(url.openStream()));
        lista = myXMLHandler.getRss_lista();
        lst_slika = lista.get(0).getImages();

    } catch (Exception e) {
        System.out.println(e);
    }

    adapter = new ImageAdapter(this, lst_slika);
    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(adapter);

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }
    });

} } 
```

这是适配器类：

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
private ArrayList<String> lista;

public ImageAdapter(Context c, ArrayList<String> lista) {
    mContext = c;
    this.lista = lista;

}

public int getCount() {
    return lista.size();
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;

    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);

        imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(0, 0, 0, 0);
    } else {
        imageView = (ImageView) convertView;
    }

    new ImageDownloadTask(imageView).execute(lista.get(position));

    return imageView;
}} 
```

我想通过使用通用图像加载器（或任何其他缓存我的图像的方法）来修改这些类，因为目前我的照片库活动由于内存不足错误而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:52:03.420

将下面的代码行写入适配器的 getView() 方法，这里 imageUrls[position] 是 Image Urls 的数组， holder.image 是 imageview。

```
imageLoader.displayImage(imageUrls[position], holder.image, null); 
```

并将下面的代码行写入您的适配器构造函数。

```
ImageLoader imageLoader=new  ImageLoader(activity.getApplicationContext()); 
```

有关通用图像加载器示例的完整源代码，请参见下面的链接。

[Android - 通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

# c# - C# 列表 按拆分排序

> ID：15684959
> 
> 赞同：3
> 
> 时间：2013-03-28T14:50:28.200
> 
> 标签：c#, list

我试图在拆分后按值排序列表。

例如我的数据看起来像这样。

```
Z|2  
A|1 
```

我希望我的列表按拆分后的值排序

所以我会得到

```
A|1  
Z|2 
```

这是我正在使用的，但我得到了错误：

> *{“输入字符串的格式不正确。”}*

`All = All.OrderBy(s => int.Parse(s.Split('|')[1])).ToList();`

任何帮助都是极好的！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:53:07.663

这会起作用：

```
All = All.OrderBy(s => int.Parse(s.Split('|').Last())).ToList(); 
```

更好的方法是使用结构化类型的列表而不是哑字符串列表。例如，您可以有一个列表`Tuple<string, int>`并简单地按第二个成员对其进行排序。您还可以将元组放入有序容器中并自动完成排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:51:49.760

您需要先跳过无效格式，假设放在顶部：

```
All = All.OrderBy(s => {
    var parts = s.Split('|');

    if (parts.Length != 2)
        return int.MinValue;

    int value;
    if (int.TryParse(parts[1], out value))
        return value;

    return int.MinValue;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:00:30.460

`TryParse`如果您有不确定的值，您可以使用。这会将无法解析的任何值放在列表的最后：

```
All = All.OrderBy(s => {
  int value;
  if (!Int32.TryParse(s.Split('|')[1], out value)) {
    value = Int32.MaxValue;
  }
  return value;
}).ToList(); 
```

（注意：最大可能的 int 值用于将这些项目放在列表的最后，如果您有任何其他值为 2147483648 的项目，它们将与这些项目混合。对于也适用于该值的解决方案，您将需要创建一个比较器而不是仅从字符串中提取值的委托。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T14:53:34.340

您的代码很好 - 您必须有一些无效数据。仔细检查初始列表中的值，以确保在管道之后没有任何非数字值或其他类似的值。

**编辑**

您总是可以捕获错误并以不同的方式处理它们，例如：

```
// This would put all failures at the top of the list
All = All.OrderBy(s => {
    try { return int.Parse(s.Split('|')[1]); }
    catch { return 0; }
}).ToList(); 
```

# view - Xpages ViewPanel：覆盖展开链接

> ID：15684962
> 
> 赞同：0
> 
> 时间：2013-03-28T14:50:32.343
> 
> 标签：view, xpages

我有一个在视图面板中显示分类视图的 Xpage。

我无法自定义类别的“链接”或“点击事件”。Domino 总是用我不想要的 expand 函数覆盖这些。

我试过了：

```
<xp:viewColumn columnName="productnumber"
    id="viewColumn2" styleClass="ViewcatFilter"
    collapsedImage="/spacer.jpg" expandedImage="/spacer.jpg">
    <xp:viewColumnHeader value="" id="viewColumnHeader2"
        sortable="false">
    </xp:viewColumnHeader>
    <xp:link id="link2">
        <xp:this.value>#</xp:this.value>
        <xp:this.text><![CDATA[#{javascript:myVar.getColumnValue("productnumber")}]]></xp:this.text>
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete" immediate="false" save="true"
            id="eventHandler3">
            <xp:this.action><![CDATA[#{javascript:sessionScope.searchQuery = myVar.getColumnValue("productnumber")}]]></xp:this.action>
        </xp:eventHandler>
    </xp:link>
</xp:viewColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:10:35.697

看看这里：

[XPages 视图控制链接操作](https://stackoverflow.com/questions/11741366/xpages-view-control-link-manipulation)

我假设您可以以与“普通”列相同的方式操作分类列的链接。

# asp.net - SQL 查询未返回所需值

> ID：15684967
> 
> 赞同：1
> 
> 时间：2013-03-28T14:50:41.013
> 
> 标签：asp.net, sql, c#-4.0, windows-8, sql-server-2008-r2

我有三个表如下：

```
CREATE Table [Product]( 
[product_id] int primary key,
[name] varchar(100) not null,
[date] varchar(20) not null,
[quantity] int not null,
[stock] int not null,
[category] varchar(50) not null,
[unitPrice] int not null,
[vendor_id] int not null
)

create table [distribution](
[distribution_id] int primary key,
[showroom] varchar(50) not null,
[quantity] int not null,
[date] varchar(20) not null,
[unitPrice] int not null,
[product_id] int not null
)

create table [sales](
[sales_id] int primary key,
[product_id] int not null, 
[date] varchar(20) not null,
[time] varchar(15) not null,
[quantitiy] int not null,
[cash] int not null,
[branch] varchar(50) not null
) 
```

现在我想做一个查询，将返回每个产品 ID

```
[product].product_id, 
[product].unitPrice as 'pUnitPrice', 
[product].quantity, 
[product].unitPrice*[product].quantity as "stockTotal",
SUM([sales].quantitiy) as 'salesUnit', 
[distribution].unitPrice as 'sUnitPrice',
SUM([sales].quantitiy)*[distribution].unitPrice as 'saleTotal', 
[product].quantity-SUM([sales].quantitiy) as 'balance' 
```

我正在使用 Microsoft SQL Server 2008 R2 在 ASP.NET 中做我的项目。我做了一个查询（附加），但结果错误可能是检查一个product_id的所有数据。我非常失望...如果有人有时间请帮助我...请...

我的查询：

```
SELECT 
    [sales].product_id, 
    [product].unitPrice                             as 'pUnitPrice', 
    [product].quantity                              as 'stock', 
    [product].unitPrice * [product].quantity        as "stockTotal", 
    SUM([sales].quantitiy)                          as 'salesUnit',
    [distribution].unitPrice                        as 'sUnitPrice',
    SUM([sales].quantitiy)*[distribution].unitPrice as 'saleTotal',
    [product].quantity-SUM([sales].quantitiy)       as 'balance'
from sales 
JOIN product        ON sales.product_id     = product.product_id
JOIN [distribution] ON [product].product_id = [distribution].product_id 
group by [sales].product_id, 
         [product].unitPrice, 
         [product].quantity, 
         [distribution].unitPrice
order by [sales].product_id 
```

只有

```
SUM([sales].quantity) 
```

给出错误。它只是增加了三倍。比如说，想要的数量是 4，它变成了 12，就像每个 product_id....

产品价值

(product_id, name, date ,quantity, stock, category, unitPrice, vendor_id)

(1,HP, 2013-03-15, 10, 6, 笔记本电脑, 55000, 2)

表中的值`Distribution`：

```
distribution_id   showroom   quantity      date     unitPrice    product_id
      1            Ritzy1        2      2013-03-02    55000          1
      2            Ritzy2        2      2013-03-02    55000          1
      3            Ritzy3        2      2013-03-02    55000          1 
```

表中的值`Sales`：

```
 sales_id   product_id       date       time      quantitiy    cash     branch
    1           1         2013-03-29  7:26:22 PM      2   110000    Ritzy1 
```

我的查询结果

```
(product_id,    pUnitPrice, stock,  stockTotal, salesUnit,  sUnitPrice, saleTotal,  balance)

(1, 50000,  10, 500000, **6**,  55000,  330000, 4) 
```

期望的输出：

```
 product_id  pUnitPrice  stock  stockTotal  salesUnit  sUnitPrice  saleTotal  balance
     1         50000       10     500000        2         55000      110000      8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:33:03.603

您目前无法通过 product_id 从 Distribution 表中获取价格，因为对于相同的 product_id，Distribution 表中可能存储了许多不同的价格。对于给定的产品，没有办法知道每次销售应该使用哪个分销价格。

在您包含的示例数据中，给定产品的所有分销价格都是相同的。这是您打算如何设计您的系统的方式 - 给定的产品将始终具有相同的价格，无论它在哪里分发？如果是这样，请从分布表中删除价格并将其仅存储在产品表中。

另一方面，鉴于您当前的设计包括 Distribution 表中的价格，并且您的查询尝试从分销价格中得出销售价值，这意味着产品的销售价格可能因陈列室而异。这是您打算如何设计您的系统的方式 - 产品将具有不同的销售价格，具体取决于它的分销地点？如果是这样，您需要能够将每条销售记录链接到销售它的特定 Distribution - 这意味着将 distribution_id 添加到 Sales 表。

再说一次，确定销售价格的另一种方法是将销售价格存储在销售记录中 - 从表面上看，这看起来像非规范化，但实际上价格可能会随着时间而变化；除非您想建立一个分销历史表，其中包含每个陈列室在什么时间适用的价格的详细信息，否则这将是记录每次销售实际收取的价格的最简单方法。

我问这是否是家庭作业（包括期末项目）的原因是，出于学术目的，这些场景中的任何一个都是对现实系统外观的合理简化——你必须决定你正在使用哪个/打算使用。（现实生活中的系统需要更复杂。）

您的查询返回的销售额值比实际销售额值高三倍的原因是因为您将给定产品的所有销售记录链接到同一产品的所有分布，然后对结果求和 - 因为您有该产品的三个分布记录因此，在销售记录中，您看到的是实际销售额的三倍。可以重写查询以使其正常工作，但前提是*您*决定要以哪种方式存储价格。

# java - split() 在 for 循环的第一行之后不起作用

> ID：15684973
> 
> 赞同：0
> 
> 时间：2013-03-28T14:50:54.143
> 
> 标签：java, for-loop, split

运行此代码段时：

```
for(int i=0; i<np; i++){
        giver=f.readLine();
        String[] numbers=f.readLine().split("\\s");
        System.out.println(giver+" "+numbers[0]+" "+numbers[1]); 
```

它正确地给出了火线的输出，但随后给出了错误。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
    at gift1.main(CopyOfgift1.java:47) 
```

我是 Java 新手，无法弄清楚我做错了什么。所有帮助将不胜感激。谢谢你。

编辑：输入格式如下

```
amy 
600 5 
jane 
477 9 
clara 
599 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:55:56.640

试试这个循环来弄清楚发生了什么：

```
for(int i=0; i<np; i++){
        giver=f.readLine();
        String assumedNumbers = f.readline();
        try {
            String[] numbers =f.readLine().split("\\s");
            System.out.println(giver+" "+numbers[0]+" "+numbers[1]);
        }
        catch ( ArrayIndexOutOfBoundsException e ) {
            System.out.println( "INVALID NUMBERS LINE '" + assumedNumbers + "'" );
            throw( e );
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:53:19.060

那你读林伯斯太多了。确保不超过行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:59:15.417

使用以下修改后的代码。

```
for(int i=0; i<np; i++){
        giver=f.readLine();
        String[] numbers=giver.split("\\s");
        System.out.println(giver+" ");
        for(String s:numbers)  //inhance for loop
        {
            System.out.println(" "+s);  
        }
} 
```

如果`giver`不包含空格字符串，那么您将不会得到输出，但您永远不会得到`ArrayIndexOutOfBoundException`.

# neo4j - 如何使用空过滤器在一个密码查询中返回 2 个集合

> ID：15684977
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:00.287
> 
> 标签：neo4j, cypher

因此，我尝试从单个密码查询中返回 2 组：

给定父节点在索引中，则

1.  父节点的子节点
2.  无子父节点。

我能够得到一个类似的查询，该查询返回一组索引中的父母和另一组索引中的孩子，如下所示

```
START Parents = node:app_fulltext('name:"City"'),
 MATCH Parents-[?:ChildOf]-Apps 
 RETURN collect(Apps.Title), collect(Parents.Name);

==> +--------------------------------------------------------------+
==> | collect(Apps.Title) | collect(Parents.Name)                  |
==> +--------------------------------------------------------------+
==> | ["Empty City 3D"]   | ["Empty City 3D","Empty City 3D Fake"] |
==> +--------------------------------------------------------------+ 
```

这接近我想要的。但是，我想从 Parents.Name 中过滤掉那些在 Apps.Title 集合中已经有 Children 的项目。

这是我想要得到的结果集。“Empty City 3D Fake”没有任何子元素，因此在 Parents.Name 中返回。

```
==> +--------------------------------------------------------------+
==> | collect(Apps.Title) | collect(Parents.Name)                  |
==> +--------------------------------------------------------------+
==> | ["Empty City 3D"]   | ["Empty City 3D Fake"]                 | 
```

当我刚刚添加 Where r is null 子句时，它没有返回任何内容，因此我最终不得不添加两个相同的起始父集（Parents 和 Parents2）来执行此操作。但是，这看起来真的很笨拙，所以我希望有更好的方法。

```
START Parents = node:app_fulltext('name:"City"'), 
      Parents2 = node:app_fulltext('name:"City"')
      MATCH Parents-[r?:ChildOf]-Children, Parents2-[:ChildOf]-Apps 
      Where r is null 
      return collect(Apps.Title), collect(Parents.Name);

==> +--------------------------------------------------------------+
==> | collect(Apps.Title) | collect(Parents.Name)                  |
==> +--------------------------------------------------------------+
==> | ["Empty City 3D"]   | ["Empty City 3D Fake"]                 |
==> +--------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:00:24.667

你可以试试这个 -

```
START Parents = node:app_fulltext('name:"City"'),
 MATCH Parents-[?:ChildOf]-Apps 
 WITH collect(Apps.Title) as myapps, collect(Parents.Name) as myparents
 RETURN myapps, filter(x in parents : not x in myapps) as myfilteredparents 
```

# javascript - 提取转发器元素的值以在模式弹出窗口上预填充文本框

> ID：15684979
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:03.820
> 
> 标签：javascript, jquery, asp.net

这是模式弹出窗口上的定义文本框。

```
<asp:TextBox MaxLength="20" runat="server" id="tbName" style="visibility:visible;display:inline;"/> 
```

以下 jQuery 构造能够提取中继器元素中的值并预填充 tbName

```
 $("[id$=tbName]").val($.trim($('#revListTitle_' + rowIndex).text())); 
```

但是下面的 jQuery 构造没有填充 tbName。

```
$("#tbName").val($.trim($('#revListTitle_' + rowIndex).text())); 
```

我的问题是：

和有什么区别`$("[id$=tbName]").val("something") and $("#tbName").val("something");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:56:14.227

的功能`document.getElementById()`仅对 HTML 内容进行了很好的定义。

在您的情况下，`<asp:TextBox ... />`严格来说不是 HTML（不同的命名空间），因此无法被标识符引用。

# c# - Lerp 基于计时器的对象

> ID：15684980
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:04.060
> 
> 标签：c#, unity3d

我正在尝试基于计时器在两个对象之间创建一个目标 lerp。

目前，我有以下代码：

```
 float distCovered = (Time.time - waitTime) * speed;
    float fracJourney = distCovered / journeyLength;
    if (_moveDown == false)
    {
        if (startTime + waitTime < Time.time)
        {

            transform.position = Vector3.Lerp(start.position, end.position, fracJourney);

            if (transform.position == end.position)
            {
                Debug.Log("going down");
               _moveDown = true;

                transform.position = Vector3.Lerp(end.position, start.position, fracJourney);
            }

        }
    }

    if (_moveDown == true)
    {
        float distCovered1 = (Time.time - goDowntimer) * speed;
        float fracJourney1 = distCovered1 / journeyLength;
        transform.position = Vector3.Lerp(end.position, start.position, fracJourney1);

        if (transform.position == start.position)
        {
            Debug.Log("going up");
           // waitTime = 20;
            _moveDown = false;

        }

    } 
```

此代码在我的更新函数中，并附加到我要上下移动的每个对象。每个对象都可以独立于其他对象设置它们的等待时间，因此我可以在 5 秒后移动 1 次，在 10 秒后移动一次，以此类推。

然后，每个目标等待几秒钟，然后向下移动。但是，运动并不顺畅，而且往往会跳跃一段设定的距离。但是，当它回到底部时，它会在 _movedown 布尔值之间变得疯狂并且不会移动。

有谁知道我可以解决这些问题的方法？

我知道 Mathf.PingPong 方法会不断地在两点之间来回移动对象，但这不允许我在每个部分暂停移动。不过，如果有人知道我可以做到这一点的方法，也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:35:33.513

这是对代码的快速破解。它可能更清洁，但它应该在紧要关头做。我已经用“方向”变量替换了 OPs if/then 块，该变量指示我们是从开始移动到结束还是从结束移动到开始。

**Vector3.Lerp** () 采用 [0,1] 范围内的**t**值，名义上是从起点到终点的 % 距离。如果您想反转该方向，您需要做的就是从 1 中减去，以便范围变为 [1,0]（反转方向）。这就是我在下面使用**direction_**所做的一切。一旦 fracJourney 超出范围，我们就会切换方向、触发暂停并重置主计时器。

我将暂停代码放在**Update** () 中以将其与移动代码分开，但没有任何理由两个代码块都不能在**FixedUpdate** () 或**Update** () 中。

此示例是[Vector3.Lerp 文档](http://docs.unity3d.com/Documentation/ScriptReference/Vector3.Lerp.html)中的示例的修改版本：

```
// additional data members beyond Vector3.Lerp's documentation
public float PauseTime = 2.0f;
int direction_ = 1;
bool doPause_ = false;

void Update(){
    float elapsedTime = Time.time - startTime;

    //  if the elapsed time has exceeded the pause time and we're paused
    //  unpause and reset the startTime;
    if(elapsedTime > PauseTime && doPause_){
        doPause_ = false;
        startTime = Time.time;
    }
}
void FixedUpdate(){
    if(doPause_)return;

    float distCovered = (Time.time - startTime) * Speed;
    float fracJourney = distCovered / journeyLength;

    // +direction means we are going from [0,1], -direction means [1,0]
    fracJourney = (direction_>0)?fracJourney:1.0f-fracJourney;
    transform.position = Vector3.Lerp(StartPt.position, EndPt.position, fracJourney);

    // When fracJourney is not in [0,1], flip direction and pause
    if(fracJourney > 1.0 || fracJourney < 0.0){
        direction_ = -direction_;
        startTime = Time.time;
        doPause_ = true;
    }
} 
```

我的“方向”成员也可以很容易地成为布尔值，但我喜欢为其他目的签署方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:18:57.727

我在下面添加了一些评论，可以帮助您澄清您的意图。

```
float distCovered = (Time.time - waitTime) * speed;
float fracJourney = distCovered / journeyLength;

// Going up...
if (_moveDown == false)
{
    // Should we be checking this in the other half of the statement too?
    // Or, outside the conditional altogether?
    if (startTime + waitTime < Time.time)
    {
        transform.position = Vector3.Lerp(start.position, end.position, fracJourney);

        if (transform.position == end.position)
        {
            Debug.Log("going down");

           // The way this is structured, we're going to *immediately* fall into the
           // following block, even if that's not your intended behavior.
           _moveDown = true;

            // Going down, but with the fracJourney value as though we were going up?
            transform.position = Vector3.Lerp(end.position, start.position, fracJourney);
        }
    }
}

// As noted above, we're going to fall directly into this block on the current pass,
// since there's no *else* to differentiate them.
if (_moveDown == true)
{
    // Doesn't follow the same pattern as in the previous block, though that may be intended
    float distCovered1 = (Time.time - goDowntimer) * speed;
    float fracJourney1 = distCovered1 / journeyLength;
    transform.position = Vector3.Lerp(end.position, start.position, fracJourney1);

    if (transform.position == start.position)
    {
        Debug.Log("going up");
       // waitTime = 20;
        _moveDown = false;

       // Should there be a Lerp here, as above, to start heading back the other way again?  Or, do you need to remove the other one?
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:15:10.727

尝试这个 ：

```
transform.position = Vector3.Lerp(start.position, end.position, fracJourney * Time.deltaTime); 
```

甚至可能是这样：

```
transform.position = Vector3.Lerp(start.position, end.position, speed * Time.deltaTime); 
```

x *Time.deltaTime 在这种情况下基本上是指示移动方法以每秒 x 米的速度移动对象。如果没有 deltaTime，它会以每帧 x 米的速度执行这些运动。

# actionscript-3 - AS3 中的功能

> ID：15684981
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:04.193
> 
> 标签：actionscript-3, function, parameters, flash-cs5.5

我尝试制作这样的功能：

```
 function splashlafadz(obj:MovieClip):void{
var varsplash1 = new TimelineMax({delay:3});
varsplash1.to(obj, 1, {alpha:100, x:427.85, y:208.90, ease:Back.easeOut, delay:1});
varsplash1.to(obj, 1,{visible:false, delay:3});
} 
```

然后，我有一个名为 splash1 的影片剪辑。我如何将该功能应用于 splash1？我尝试使用

```
splashlafadz.call(splash1); 
```

但它得到错误..我如何使用该功能与不同的影片剪辑一起使用？

我可以将声音作为参数吗？所以每个电影剪辑都有不同的声音吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:17:40.627

您可以添加另一个参数来传递您想要使用的声音：

```
function splashlafadz(obj:MovieClip, sound:Sound):void{
    var varsplash1 = new TimelineMax({delay:3});
    varsplash1.to(obj, 1, {alpha:100, x:427.85, y:208.90, ease:Back.easeOut, delay:1});
    varsplash1.to(obj, 1,{visible:false, delay:3});
    sound.play();
} 
```

然后你就这样称呼它：

```
splashlafadz(yourObject, yourSound); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:32:06.517

要调用函数，您可以直接使用函数名称，如下所示：`splashlafadz(splash1)`.

`call`当您想要更改对象时需要该功能，您`this`很可能永远不需要它。这里有一些关于 MDN 的详尽文档：[`Function.prototype.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call). （此参考适用于 JavaScript，但其工作方式与动作脚本相同）。

# c# - 使用 MVC 时实体模型的命名约定

> ID：15684985
> 
> 赞同：3
> 
> 时间：2013-03-28T14:51:07.757
> 
> 标签：c#, asp.net, entity-framework, naming-conventions

当我使用实体代码优先创建我的数据库时，如果我在 asp.net 中创建一个 MVC 4 项目，我应该使用什么命名约定。我想明确指出实体模型不是 MVC 模型。例如，我是否应该有一个名为的类`Project`来定义 EF 将使用的属性，然后创建一个名为`ProjectModel`. 我还将拥有 viewModel，它与以 `ProjectDashboardViewModel. 在设置这样的项目时，对命名约定有哪些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:55:36.600

您已经有问题表达的强大命名约定。我确实使用完全相同的:)

1.  域模型没有前缀 -`Project`
2.  `Model`不是完全视图模型的 mvc 类的后缀 -`ProjectTableRowModel`
3.  `ViewModel`视图模型的后缀 -`ProjectDetailsViewModel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:59:40.030

不幸的是，像这样的问题可以有很多答案，实际上并没有一个事实上的标准，但这就是我所做的。

首先，我创建了一个空解决方案，我们将其命名为**MyProject**。**然后我在这个解决方案中添加了一个名为MyProject**的类库（我喜欢将域放在根命名空间中）。此类库将包含某些文件夹/命名空间，如下所示：

```
MyProject
    Entities
        MyEntity1.cs
        MyEntity2.cs
    Database
        MyContext.cs 
```

然后我将一个 MVC 项目添加到我的解决方案中，将其命名为**MyProject.Mvc**。我在**MyProject.Mvc**`ViewModels`中使用and并使用[AutoMapper](http://automapper.codeplex.com/)使用我的实体构造它们。我对每个视图都有一个，所以假设我有一个调用了一个动作的控制器， 那么我将有一个专门为此的对象。`DataTransferObjects`**`ViewModel``DashboardController``Overview``DashboardOverviewViewModel`**

 **将我的域分开的一个好处是单元测试变得更容易，我将有相应的测试项目，称为**MyProject.Tests**和**MyProject.Mvc.Tests**。

[这篇文章作为 ViewModel 处理的另一个视角非常有帮助](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:56:48.030

最佳实践是将映射到数据库表的实体放置到解决方案中的单独类库中。

您对 DB 模型使用 Project 和 MVC 模型使用 ProjectModel 的建议是适当的。

我认为您的 ProjectModel 实际上是一个 ProjectViewModel，因为属性的选择以及它们的填充方式主要由演示要求驱动。仅仅因为您可能没有项目视图，并不意味着您不能拥有项目视图模型。也许您的 ProjectDashboardViewModel 包含许多 ProjectViewModel 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:24:11.110

这一切都是为了更好的可读性和可维护性。

您可以为 ViewModels 创建一个库，比如 SomeProduct.ViewModel.dll 并在 MVC Web 项目中引用它。此程序集中的类后缀为“ViewModel”，例如 RevenueViewModel/RegisterViewModel。还要在这个项目中创建命名空间来组织视图模型模块。

对于实体，您可以创建另一个库，例如 SomeProduct.Entities.dll 并在 MVC Web 项目中引用此程序集。再次有效地使用命名空间来组织程序集中的对象。您可以为这些对象添加“模型”后缀。**

# android - Android getActiveNetworkInfo() - 它是否只检查网络连接或互联网连接？

> ID：15684990
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:39.017
> 
> 标签：android

很多关于如何检查互联网连接的主题都使用 getActiveNetworkInfo() 但文档和我的经验告诉我它只检查网络连接。我对么？

那么测试互联网连接的最佳方法是什么？requestRouteToHost() 是互联网主机的主机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T10:30:54.063

getActiveNetworkInfo() 仅指直接网络连接（以太网、wifi、...）以检查您是否有互联网我通常尝试访问 www.google.com 或其他网络或我自己的服务器。

# node.js - 对 Mongo 执行多次调用，然后等待它们全部返回

> ID：15684991
> 
> 赞同：0
> 
> 时间：2013-03-28T14:51:42.893
> 
> 标签：node.js, mongoose

因此，在发布了一些其他问题并进行了一些研究之后，看起来不可能在对 mongodb 的同一次调用中更新具有不同数据的多个文档。

```
doc1 : {
  _id: 1,
  name: 'John Smith'
}

doc2 : {
  _id: 2,
  name: 'Jane Smith'
} 
```

因此，如果客户端将两个文档都传递给服务器，则添加一个年龄字段并希望在两者都更新后从服务器返回响应，我必须等待两个更新回调返回。

没什么大不了的，因为看起来有一些好的异步模块，比如 Step 和 Async。但是我已经在使用 Mongoose。我看到猫鼬中有承诺。查看文档，我认为这是不可能的，但可能是我不明白。

使用 mongoose，我可以向 mongo 提交 N 次更新，并知道所有 N 何时完成，以便我可以响应客户端。当然没有柜台（因为那是我已经在做的）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:37:25.010

我不相信，而是使用异步（或者可能是步骤，我不熟悉）多次运行多个查询/查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:28:39.100

正如你所说，你可以使用承诺。我自己没有尝试过这样做，但看起来您可以使用`Promise.then`，尽管这意味着您将对查询进行排序，而不是像现在一样一次提交所有查询。

链接： http: [//mongoosejs.com/docs/api.html#promise_Promise-then](http://mongoosejs.com/docs/api.html#promise_Promise-then)

# jboss7.x - 未找到来自 rt.jar 的类

> ID：15684993
> 
> 赞同：8
> 
> 时间：2013-03-28T14:51:46.647
> 
> 标签：jboss7.x, java, classnotfoundexception

在 JBOSS EAP 6 (AS 7) 中：

我正在调用 Spring 的 WebServiceTemplate.marshalSendAndRecieve，而后者又无法找到 rt.jar 中存在的类

```
Caused by: java.lang.ClassNotFoundException: com.sun.org.apache.xerces.internal.dom.DocumentImpl 
```

我不明白这怎么会发生？rt.jar 中的所有内容肯定会在启动时加载？

有任何想法吗？

谢谢，

肯尼

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T16:10:08.720

好的，我找到了一个解决方案（不确定它是否正确，但它有效）。

我通过运行 java -verbose:class 注意到只加载了 rt.jar 中的一些类，而不是我需要的类（com.sun.org.apache.xerces.internal.dom.DocumentImpl）

所以在 JBoss EAP 6 (As 7) 中有一个模块目录 ($JBOSS_HOME/modules/) 并且在下面有 sun/jdk/main/modules.xml

我添加了以下条目：

```
<path name="com/sun/org/apache/xerces/internal/dom"/>
<path name="com/sun/org/apache/xerces/internal/xni"/>
<path name="com/sun/org/apache/xerces/internal/jaxp"/> 
```

（最后 2 个因为后续类在添加 dom 后未发现异常）

正如我所说，我不能 100% 确定这是否是正确的方法。欢迎任何意见！

谢谢，

肯尼