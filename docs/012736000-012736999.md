# StackOverflow 问答 12736000-12736999

# jquery - 带有灰度 jquery 插件和简单 jquery 函数的 CSS 问题（无浮动图像）

> ID：12736001
> 
> 赞同：1
> 
> 时间：2012-10-04T21:10:32.880
> 
> 标签：jquery, css, grayscale

我正在使用灰度 jquery 插件来动态灰度图像（由 Andrew Pryde 编写）。

效果就像一个魅力： [http ://www.reflexion-graphic.com/projets/forum/jquery/greyscale/1-test-jquery-greyScale-html5.html](http://www.reflexion-graphic.com/projets/forum/jquery/greyscale/1-test-jquery-greyScale-html5.html)

但我尝试添加另一个 jquery 函数：在翻转时显示图像信息。

该功能单独工作，但使用插件我有一个css问题。图像不再浮动： [http ://www.reflexion-graphic.com/projets/forum/jquery/greyscale/3-test-jquery-hover-greyScale-html5.html](http://www.reflexion-graphic.com/projets/forum/jquery/greyscale/3-test-jquery-hover-greyScale-html5.html)

你能帮我找出css有什么问题吗？

源代码（在示例中很容易找到 css、html、jquery）。

非常感谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:25:04.850

这是因为您已将带有标题的图像包装在块元素内，这些块元素跨越了其容器的整个宽度。 `float`适用于灰度图像，而不适用于它们的父元素，因此即使所有图像都是浮动的，它们也不再是彼此的兄弟；它们是悬停包装器的兄弟姐妹。

图像仍然是浮动的，但它们在它们的容器（包装器）内是单独的，并且包装器没有浮动。

您可以在没有任何 JS 的情况下添加悬停标题：只需将标题添加为每个`.gsWrapper`元素内的另一个元素，并将其设置为在悬停时显示。

精简示例：

```
<div class="gsWrapper">
  <img class="img_mosaique_cat_projets noir_blanc" src="img/sj-concelles/220x168.jpg" alt="titre projets">
  <canvas class="gsCanvas" height="168" width="220" style="left: 0px; position: absolute; top: 0px;"></canvas>

  <div class="hide-hover">test content for hover</div>
</div> 
```

和造型：

```
.hide-hover {
  position: absolute;
}

.gsWrapper:not(:hover) .hide-hover { 
  display: none;
} 
```

这样您就不必担心调整所有其他样式和 JS 以适应某些图像的包装器。

其他演示：使用 jQuery slideToggle 效果隐藏/显示标题：http: [//jsbin.com/idugaw/3/edit](http://jsbin.com/idugaw/3/edit)

使用纯 CSS 实现 slideToggle 效果：http: [//jsbin.com/idugaw/4/edit](http://jsbin.com/idugaw/4/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:17:48.493

我认为您需要做的就是将以下代码放入您的 CSS

```
.imgHover {
  position: relative;
  display: inline-block;
} 
```

Image Hover div 显示为“块”，因此它们胜过 gsWrapper CSS。

# jquery-mobile - 为什么 jQuery Mobile 将 JavaScript 放在页面底部，而不是底部？

> ID：12736009
> 
> 赞同：0
> 
> 时间：2012-10-04T21:11:06.337
> 
> 标签：jquery-mobile

根据[jQuery Mobile 文档](http://jquerymobile.com/test/docs/pages/page-anatomy.html)，`<script>`加载 jQuery 和 jQuery mobile 的标签应该放在`<head>`元素内部。

我一直被告知要`<script>`在页面底部加载标签以获得更好的性能。例如：http: [//developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)

对于 jQuery Mobile 脚本，是否有理由更喜欢一个位置而不是另一个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:38:18.887

将 放在`<script>`底部是为了在代码执行之前促进更快地加载外部元素，但是在**jQM 中，直到 pageinit/pageshow 事件触发之前什么都不会真正显示**，这基本上是 jQM 的 document.ready 版本（所有内容都已加载并且 DOM 在那里ETC）

我可以想象在您希望尽快显示内容的较大站点中，这会派上用场，就像在 document.ready是人们使用的另一个技巧**之前**`on`附加被动侦听器一样。

 **但是，当您等待 a`document.ready`显示任何内容时，所有这些速度优化都没有多大意义。**

# vb.net - Outlook 程序将附件移动到子文件夹

> ID：12736010
> 
> 赞同：0
> 
> 时间：2012-10-04T21:11:07.770
> 
> 标签：vb.net, visual-studio-2010, outlook-2007

我在 VS2010 中编写了这个小程序，可以在 Outlook 2007 上运行。

它适用于收件箱的标准通读，但我无法让它正确指向其他文件夹，我收到“用户代码未处理 COMException”错误，显示“操作失败。找不到对象。 " ...

如果有帮助，我已经包含了我的 Outlook 结构的屏幕截图...

```
Imports Microsoft.Office.Interop

Public Class ThisAddIn
Private Sub ThisAddIn_Startup() Handles Me.Startup
End Sub
Private Sub ThisAddIn_Shutdown() Handles Me.Shutdown
End Sub
Private Sub Application_Startup() Handles Application.Startup

    Dim MyApp As Outlook.Application = New Outlook.Application
    Dim MyNS As Outlook.NameSpace = MyApp.GetNamespace("MAPI")
    Dim MyInbox As Outlook.MAPIFolder = MyNS.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox)
    Dim MyEmails As Integer = MyInbox.Items.Count
    Dim MyEMail As Outlook.MailItem
    Dim MyCount As Integer
    Dim MySubFolder As Outlook.MAPIFolder = MyNS.Folders("Kickabout") **<<< Error occurs here**

    For MyCount = MyEmails To 1 Step -1
        MyEMail = MyInbox.Items(MyCount)
        If MyEMail.SenderEmailAddress = "MrX@abc.com" Then
            If MyEMail.Attachments.Count > 0 Then
                MySubFolder = MyNS.Folders("Kickabout\Attachments")
            End If
            MyEMail.Move(MySubFolder)
        End If
    Next
End Sub

End Class 
```

![我的展望结构](../Images/787fda7cb24c159af2247970d75ddb5e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:27:14.847

好的，我自己解决了这个问题......如果有人对未来感兴趣，你必须非常明确地设置路径并且需要一个函数来这样做，这是代码......

```
Imports Microsoft.Office.Interop

Public Class ThisAddIn

Dim strFolderPath As String

Private Sub ThisAddIn_Startup() Handles Me.Startup
End Sub
Private Sub ThisAddIn_Shutdown() Handles Me.Shutdown
End Sub
Private Sub Application_Startup() Handles Application.Startup

    Dim MyApp As Outlook.Application = New Outlook.Application
    Dim MyNS As Outlook.NameSpace = MyApp.GetNamespace("MAPI")
    Dim MyInbox As Outlook.MAPIFolder = MyNS.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox)
    Dim MyEmails As Integer = MyInbox.Items.Count
    Dim MyEMail As Outlook.MailItem
    Dim MyCount As Integer
    Dim MySubFolder As Outlook.Folder = GetMyFolder("Outlook (Gary)\Kickabout")
    Stop
    For MyCount = MyEmails To 1 Step -1
        MyEMail = MyInbox.Items(MyCount)
        If MyEMail.SenderEmailAddress = "MrX@abc.com" Then
            If MyEMail.Attachments.Count &gt; 0 Then
                MySubFolder = GetMyFolder("Outlook (Gary)\Kickabout\Attachments")
            End If
            MyEMail.Move(MySubFolder)
        End If
    Next
End Sub

Function GetMyFolder(FolderPath)
    ' folder path needs to be something like 
    '   "Public Folders\All Public Folders\Company\Sales"
    Dim aFolders
    Dim fldr
    Dim i
    Dim objNS

    On Error Resume Next
    strFolderPath = Replace(FolderPath, "/", "\")
    aFolders = Split(FolderPath, "\")

    'get the Outlook objects
    ' use intrinsic Application object in form script
    objNS = Application.GetNamespace("MAPI")

    'set the root folder
    fldr = objNS.Folders(aFolders(0))

    'loop through the array to get the subfolder
    'loop is skipped when there is only one element in the array
    For i = 1 To UBound(aFolders)
        fldr = fldr.Folders(aFolders(i))
        'check for errors
        'If Err() &lt;&gt; 0 Then Exit Function
    Next
    GetMyFolder = fldr

    ' dereference objects
    objNS = Nothing
End Function
End Class 
```

# bash - 比较 Unix 中的两个文本文件的比较函数

> ID：12736013
> 
> 赞同：15
> 
> 时间：2012-10-04T21:11:27.520
> 
> 标签：bash, unix, cmp

我想知道是否有人可以告诉我unix中是否有一个函数，bash可以比较文件的所有行。如果它们不同，则应输出真/假或-1,0,1。我知道这些 cmp 函数存在于其他语言中。我一直在查看手册页，但没有成功。如果它不可用，有人可以帮我想出一个替代解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-04T21:38:40.143

做这件事有很多种方法：

*   `cmp -s file1 file2`: 看值`$?`。如果两个文件都匹配则为零，否则为非零。
*   `diff file1 file2 > /dev/null`: 某些形式的`diff`命令可以带一个参数，告诉它不要输出任何东西。然而，大多数都没有。毕竟，您使用`diff`的是查看两个文件之间的差异。同样，退出代码（如果文件匹配，您可以检查的值为`$?`0，否则为非零。

您可以在 shell if 语句中使用这些命令：

```
if cmp -s file1 file2
then
   echo "The files match"
else
   echo "The files are different"
fi 
```

该`diff`命令专门用于文本文件。该`cmp`命令也应该适用于所有二进制文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T21:31:07.433

有一个简单的`cmp file file`命令可以做到这一点。如果它们相等则返回 0，如果它们不同则返回 1，因此在`if`s 中使用它是微不足道的：

```
if cmp file1 file1; then
    ...
fi 
```

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-15T04:52:03.447

```
#!/bin/bash

file1=old.txt
file2=new.txt

echo " TEST 1 : "
echo

if [ $( cmp -s ${file1} ${file2}) ]
then
   echo "The files match :  ${file1} - ${file2}"
else
   echo "The files are different :  ${file1} - ${file2}"
fi

echo
echo " TEST 2 : "
echo
bool=$(cmp -s "$file1" "$file2" )
if cmp -s "$file1" "$file2"
then
   echo "The files match"
else
   echo "The files are different"
fi

echo
echo " TEST 3 : md5 / md5sum - compute and check MD5 message digest"
echo

md1=$(md5 ${file1});
md2=$(md5 ${file2});

mdd1=$(echo $md1 | awk '{print $4}' ) 
mdd2=$(echo $md2 | awk '{print $4}' ) 

# or md5sum depends on your linux flavour :D
#md1=$(md5sum ${file1});
#md2=$(md5sum ${file2});

#mdd1=$(echo $md1 | awk '{print $1}' ) 
#mdd2=$(echo $md2 | awk '{print $1}' ) 

echo $md1
echo $mdd1
echo $md2
echo $mdd2
echo

#if [ $mdd1 = $mdd2 ]; 
if [ $mdd1 -eq $mdd2 ]; 
then
   echo "The files match :  ${file1} - ${file2}"
else
   echo "The files are different :  ${file1} - ${file2}"
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:19:34.050

您可以对这两个文件执行[md5](http://linux.about.com/library/cmd/blcmdl1_md5sum.htm)`bash` ，然后比较.

这里没有要测试的 Unix 机器，但这应该是正确的。

```
#!/bin/bash

md1=$(md5 file1);
md2=$(md5 file2);

if [ $md1 -eq $ $md2 ]; then
  echo The same
else
  echo Different
fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-15T04:36:54.643

echo "读取第一个文件" 读取 f1 echo "读取第二个文件" 读取 f2

diff -s f1 f2 # 打印两个文件是否相同

# sql - sql server - 如何仅在第一个失败时执行'or'子句的后半部分

> ID：12736017
> 
> 赞同：1
> 
> 时间：2012-10-04T21:11:42.257
> 
> 标签：sql, sql-server

假设我有一个包含以下记录的表

```
value                    text
company/about            about Us
company                  company
company/contactus        company contact 
```

我在 sql server 中有一个非常简单的查询，如下所示。我对“或”条件有疑问。在下面的查询中，我正在尝试查找值“公司/关于”的文本。如果没有找到，那么只有我想运行'或'的另一面。以下查询返回两条记录，如下所示

```
value                       text
company/about               about Us
company                     company 
```

询问

```
 select 
        *
    from 
        tbl
    where 
        value='company/about' or
         value=substring('company/about',0,charindex('/','company/about')) 
```

如何修改查询，使结果集看起来像

```
value                       text
company/about               about Us 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:26:31.787

有点迂回，但您可以检查第一个 where 子句的结果是否存在：

```
select 
    *
from 
    tbl
where 
    value='company/about' or
(
    not exists (select * from tbl where value='company/about')
    and
    value=substring('company/about',0,charindex('/','company/about'))
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:35:17.963

由于您的第二个条件可以重写，因为`value = 'company'`这会起作用（至少对于您提供的数据和查询）：

```
select top(1) [value], [text]
from dbo.MyTable
where value in ('company/about', 'company')
order by len(value) desc 
```

The `TOP()` ignores the second row if both are found, and the `ORDER BY` ensures that the first row is always the one with 'company/about', if it exists.

# jquery - 无法禁用引导模式窗口

> ID：12736021
> 
> 赞同：2
> 
> 时间：2012-10-04T21:12:01.170
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

使用 twitter bootstrap 我想有条件地禁用它调用的模式窗口。我有这个功能：

链接如：

```
<a data-toggle="modal" href="#contact">Contact</a> 
```

JS 喜欢：

```
if (Modernizr.touch){
$("a[data-toggle='modal']").each(function() {
    this.href = this.href.replace('/#', '/');
    $(this).data('toggle', '');
});
} 
```

我在加载 bootstrap.min.js 之前包含了这个脚本，但是当我点击链接时仍然没有任何反应。我认为它与 data-toggle 属性有关，但我不知道如何摆脱它。

考虑切换它并尝试添加属性，但我怀疑这会起作用（出于同样的原因），我不想更改标记。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T22:28:35.907

你可以试试：

```
$(this).removeAttr("data-toggle"); 
```

# c# - 使用 JSON 和 MultipartEntity 将图像从 Android 发送到 WCF

> ID：12736022
> 
> 赞同：1
> 
> 时间：2012-10-04T21:12:02.030
> 
> 标签：c#, android, json, wcf

由于我所有的其他消息都是 JSON，我想我会将我的 android 解决方案转换为使用 JSON 多部分消息从相机拍摄的图像发送到 WCF 服务。我想我有发送工作，但不知道如何反序列化。我不使用 base64 编码的原因是我希望 android 2.1 工作而 base64 编码不起作用（至少这是我读过的，而且我发现唯一的“hack”只适用于小文件）。

所以在android中我尝试发送图像：

```
public void upload() throws Exception {
    //Url of the server
    String url = "http://192.168.0.10:8000/service/UploadImage";
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);
    MultipartEntity mpEntity = new MultipartEntity();
    //Path of the file to be uploaded
    String filepath = path;
    File file = new File(filepath);
    ContentBody cbFile = new FileBody(file, "image/jpeg");     

    //Add the data to the multipart entity
    mpEntity.addPart("image", cbFile);
    post.setEntity(mpEntity);
    //Execute the post request
    HttpResponse response1 = client.execute(post);
    //Get the response from the server
    HttpEntity resEntity = response1.getEntity();
    String Response=EntityUtils.toString(resEntity);
    Log.d("Response:", Response);

    client.getConnectionManager().shutdown();
} 
```

wcf（就像我使用来自 android 的 httpurlconnect 和 outputstream 发送时一样）代码。它当时正在工作：D：

```
public string UploadImage(Stream image)
    {
        var buf = new byte[1024];
        var path = Path.Combine(@"c:\tempdirectory\", "test.jpg");
        int len = 0;
        using (var fs = File.Create(path))
        {
            while ((len = image.Read(buf, 0, buf.Length)) > 0)
            {
                fs.Write(buf, 0, len);
            }
        }
        return "hej";
    } 
```

wcf 的接口 [OperationContract] [WebInvoke( Method = "POST", UriTemplate = "/UploadImage", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)] string UploadImage(Stream image);

如果重要的话，运行 wcf 的控制台应用程序

```
 static void Main(string[] args)
    {
        string baseAddress = "http://192.168.0.10:8000/Service";
        ServiceHost host = new ServiceHost(typeof(ImageUploadService), new Uri(baseAddress));
        WebHttpBinding binding = new WebHttpBinding();
        binding.MaxReceivedMessageSize = 4194304;

        host.AddServiceEndpoint(typeof(IImageUploadService),binding , "").Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");
        Console.ReadKey(true);
    } 
```

那么现在问题来了，我如何解析传入的 JSON 流？有更好的方法吗？

注意：我尝试设置提琴手，但 3 小时后甚至无法读取流量，我放弃了。

有没有真正调试此代码的好方法？

如果我将流转换为字节数组并将其保存到文件中，忘记包含结果：

```
--IZZI8NmDZ-Id7DWP5z0nuPPZspVAGglcfEY9
    Content-Disposition: form-data; name="image"; filename="mypicture.jpg"
    Content-Type: image/jpeg
    Content-Transfer-Encoding: binary

   ÿØÿá°Exif and other funny letters of cause :D ending with
   --IZZI8NmDZ-Id7DWP5z0nuPPZspVAGglcfEY9-- 
```

使用一些新代码，我可以设法得到这个

```
--crdEqve1GThGGKugB3On0tGNy5h2u746
Content-Disposition: form-data; name="entity"

{"filename":"mypicture.jpg"}
--crdEqve1GThGGKugB3On0tGNy5h2u746
Content-Disposition: form-data; name="file"; filename="mypicture.jpg"
Content-Type: application/octet-stream

ÿØÿá´Exif and the whole image here ... 
```

新的更新例程如下所示：

```
public void uploadFile() {
         String filepath = path;
            File file = new File(filepath);
        HttpClient httpClient = new DefaultHttpClient();

        HttpPost postRequest = new HttpPost("http://192.168.0.10:8000/service/UploadImage");
        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        // Indicate that this information comes in parts (text and file)
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        try {

            //Create a JSON object to be used in the StringBody
            JSONObject jsonObj = new JSONObject();

            //Add some values
            jsonObj.put("filename", file.getName());

            //Add the JSON "part"
            reqEntity.addPart("entity", new StringBody(jsonObj.toString()));
        }
        catch (JSONException e) {
            Log.v("App", e.getMessage());
        }
        catch (UnsupportedEncodingException e) {
            Log.v("App", e.getMessage());
        }

        FileBody fileBody = new FileBody(file);//, "application/octet-stream");
            reqEntity.addPart("file", fileBody);

            try {
                postRequest.setEntity(reqEntity);

                 //Execute the request "POST"
            HttpResponse httpResp = httpClient.execute(postRequest);

            //Check the status code, in this case "created"
            if(((HttpResponse) httpResp).getStatusLine().getStatusCode() == HttpStatus.SC_CREATED){
                Log.v("App","Created");
            }
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
    } 
```

我仍然需要一种方法来分离流的不同部分，以便我可以划分 json 消息部分（如果我需要这些部分），然后将图像的字节数组作为单独的部分进行存储。我想我可以跳过 json 并回到我原来的只是发送图像的字节数组，但是无论如何我都需要能够处理 JSON 消息。

感谢到目前为止的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:24:49.447

我的第一个想法是它不是 JSON 流。它可能是一个字节流。此外，如果您的图像大于 1024 字节，您将无限读取和写入前 1024 字节。您应该有一个偏移量变量来跟踪您已阅读的内容并在此之后开始阅读。

# html - HTML5 视频 - 测量播放

> ID：12736029
> 
> 赞同：1
> 
> 时间：2012-10-04T21:12:20.773
> 
> 标签：html, video

是否可以测量“视频”标签的观看时间？我看到它有“onplaying”和“onpause”事件，所以我可能会伪造一个计时器。

只是想知道我是否还缺少其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:06:39.037

HTML5 媒体元素触发 'timeupdate' 事件。请参阅[http://dev.w3.org/html5/spec/media-elements.html#event-mediacontroller-timeupdate](http://dev.w3.org/html5/spec/media-elements.html#event-mediacontroller-timeupdate)。当该事件触发时，您可以检查 .currentTime 的当前时间和 .duration 的视频长度。它还会触发“durationchange”事件。

完整的 HTML5 媒体 DOM 接口规范：[http ://dev.w3.org/html5/spec/media-elements.html](http://dev.w3.org/html5/spec/media-elements.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:18:11.930

```
videoElement.currentTime 
```

[在 jsFiddle 上试试吧！](http://jsfiddle.net/adamzr/9cR4T/)

来源：[https ://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T11:58:32.507

我试图在我正在从事的项目中完成同样的事情。我使用[jquery 秒表插件](http://www.seph.dk/blog/projects/javascript-stopwatch-class/)做到了。

这是您需要的 JS：

```
var w = new Stopwatch();

document.querySelector("#video").addEventListener("playing", Start, false);
document.querySelector("#video").addEventListener("pause", Stop, false);
document.querySelector("#video").addEventListener("waiting", Stop, false);

function Start() {
    if ($("#video").get(0).paused == true)
        Stop();
    else
        w.start();
}

function Stop() {
    w.stop();
} 
```

这就是你如何获得经过的查看时间（以毫秒为单位）：

```
var e = w.getElapsed();
time = (((e.hours * 3600) + (e.minutes * 60) + e.seconds) * 1000 + e.milliseconds); // Total view time 
```

请记住 - 这不是最准确的方法，但它是我用我的编码技能设法完成的最好的方法。

祝你好运！

# javascript - 使用 Javascript 基于路径名交换图像/超链接

> ID：12736030
> 
> 赞同：1
> 
> 时间：2012-10-04T21:12:27.020
> 
> 标签：javascript, variables, pathname

我知道这可能很简单，但我是 JavaScript 的新手。

尝试根据 url 路径更改正在显示的图像/链接。

因此 foo.com 上的任何页面都会显示狗的图像`<div id="promo"><a href="dog.html"><img src="img/dog.jpg"></a></div>`

除非它在目录 foo.com/cat 下`<div id="promo"><a href="cat.html"><img src="img/cat.jpg"></a></div>`

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:21:24.900

以下是如何使用您发布的标记实现此目的的示例：

```
<div id="promo">
  <a href="dog.html">
    <img src="img/dog.jpg">
  </a>
</div> 
```

现在这里有一些普通的 JavaScript 可以满足您的需要：根据位置路径名更改图像 src：

```
var path = window.location.pathname;
var promo = document.getElementById('promo');    

if(path.match(/cat/)){
  promo.getElementsByTagName('img')[0].src = 'img/cat.jpg';
}​ 
```

您还可以在此处查看带有测试用例的源代码：http: [//jsfiddle.net/jordanandree/3yCgY/2/](http://jsfiddle.net/jordanandree/3yCgY/2/)

# c# - C#“此媒体类型无效”

> ID：12736031
> 
> 赞同：1
> 
> 时间：2012-10-04T21:12:37.543
> 
> 标签：c#, media

我尝试使用拼接器从图片和 MP3 创建视频。对于某些音频文件，我没有任何问题，但由于某些原因，我得到“此 Mediatype 无效。”。

这是我的代码，也许你可以帮助我

```
CreateVideo(@"C:\save_in_here\test.wmv", @"C:\pic\1.jpg", @"C:\mus\1.mp3"); 
```

. . .

```
 public void CreateVideo(string videoToCreate, string imageLoc, string tuneLoc)
    {
        if (videoToCreate.Equals(""))
        {
            MessageBox.Show("Error");
        }
        else
        {
            using (ITimeline timeline = new DefaultTimeline())
            {
                IGroup group = timeline.AddVideoGroup(32, 720, 576);
                ITrack videoTrack = group.AddTrack();
                IClip clip = videoTrack.AddImage(imageLoc, 0, 120);

                // add some audio
                ITrack audioTrack = timeline.AddAudioGroup().AddTrack();
                    IClip audio = audioTrack.AddAudio(tuneLoc, 0, 120); // ERROR?!

                // create an audio envelope effect, this will:
                // fade the audio from 0% to 100% in 1 second.
                // play at full volume until 1 second before the end of the track
                // fade back out to 0% volume
                audioTrack.AddEffect(0, 120, StandardEffects.CreateAudioEnvelope(1.0, 1.0, 1.0, 120));

                // render our slideshow out to a windows media file
                using (WindowsMediaRenderer renderer = new WindowsMediaRenderer(timeline, videoToCreate, WindowsMediaProfiles.HighQualityVideo))
                //using (AviFileRenderer renderer= new AviFileRenderer(timeline,videoToCreate))
                {
                    renderer.Render();
                }
            }
        }
    } 
```

顺便说一句：我集成了dll并链接了它。

```
System.Runtime.InteropServices.COMException (0x80040200): Es wurde ein ungültiger Medientyp angegeben.
   bei DirectShowLib.DES.DESError.ThrowExceptionForHR(Int32 hr)
   bei Splicer.Utilities.MediaInspector.GetLength(String fileName)
   bei Splicer.Timeline.MediaFile..ctor(String fileName, Boolean manageLifespan)
   bei Splicer.Timeline.Track.AddClip(String name, String fileName, GroupMediaType mediaType, InsertPosition position, Double offset, Double clipStart, Double clipEnd, Boolean manageLifespan)
   bei Splicer.Timeline.Track.AddClip(String name, String fileName, GroupMediaType mediaType, InsertPosition position, Double offset, Double clipStart, Double clipEnd)
   bei Splicer.Timeline.Track.AddClip(String fileName, GroupMediaType mediaType, InsertPosition position, Double offset, Double clipStart, Double clipEnd)
   bei Splicer.Timeline.Track.AddAudio(String fileName, Double offset, Double clipEnd)
   bei uMusic.lib.Helper.CreateVideo(String videoToCreate, String imageLoc, String tuneLoc) in C:\Users\Moe\Documents\Visual Studio 2010\Projects\WindowsFormsApplication5\WindowsFormsApplication5\lib\Helper.cs:Zeile 135. 
```

这就是我得到的完整异常错误。

# android - Android MediaRecorder 错误(1, -2147483648)

> ID：12736033
> 
> 赞同：2
> 
> 时间：2012-10-04T21:12:43.553
> 
> 标签：android, android-4.2-jelly-bean, android-mediarecorder

我正在使用 MediaRecorder 录制音频并将其保存为带有 AAC 音频的 .mp4。除了搭载 Android 4.1 的 Nexus S 之外，在我尝试过的所有设备上一切正常。在这些设备上，我要么在 start() 上收到错误（1，-2147483648）（我认为），要么继续正常，但输出文件始终为空。我拥有必要的权限，因为该应用程序可以在其他设备上运行。

```
mRecorder.reset();
mRecorder.setOnErrorListener(new MediaRecorder.OnErrorListener() {

        @Override
        public void onError(MediaRecorder mr, int what, int extra) {
            Log.e("sagasg", what + "   "   + extra);

        }
    });
    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mRecorder.setAudioSamplingRate(SAMPLING_RATE);
    mRecorder.setAudioEncodingBitRate(BIT_RATE);
    mFileName = "unnamed-" + mTimeStarted.year + "-" + mTimeStarted.month + "-" + mTimeStarted.monthDay
            + "-" + mTimeStarted.hour + "-" + mTimeStarted.minute + "-" + mTimeStarted.second;

    mRecorder.setOutputFile(mFilePath + mFileName + mExtension);

    try {
        mRecorder.prepare();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }

    mRecorder.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:08:18.017

我已经通过对设置进行随机更改来解决它。当我删除它开始工作

```
mRecorder.setAudioSamplingRate(SAMPLING_RATE); 
```

采样率在哪里

```
public static final int SAMPLING_RATE = 48000; 
```

根据文档，AAC 支持 8-48 kHz，但由于某种原因它不支持。现在我只需要修复另一个只出现在 Nexus S 上的错误。现在我明白为什么开发人员更喜欢 iOS。

编辑：现在它不会因为这个选项而崩溃，只是录音是一个空文件。尝试了其他值，例如 24000。结果相同。我将不得不坚持使用默认采样率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:38:31.970

这些错误很难调试，但我认为这可以解决问题。

这是我建议您更改的行：

```
mRecorder.setOutputFile(mFilePath + mFileName + mExtension); 
```

您应该使用[**`FileInputStream`**](http://developer.android.com/reference/java/io/FileInputStream.html)：

```
FileInputStream inputStream = new FileInputStream(mFilePath + mFileName + mExtension);
mRecorder.setDataSource(inputStream.getFD()); 
```

或者您也可以尝试[**`FileOutputStream`**](http://developer.android.com/reference/java/io/FileOutputStream.html)：

```
FileOutputStream outputStream = new FileOutputStream(mFilePath + mFileName + mExtension);
mRecorder.setOutputFile(outputStream.getFD()); 
```

请注意，对于这些解决方案中的任何一个，您可能必须捕获 、 、 和 中的`IllegalArgumentException`一个`SecurityException`或`IllegalStateException`多个`IOException`。

# javascript - 使用 Flash 和 JavaScript 从网络摄像头录制的库

> ID：12736035
> 
> 赞同：3
> 
> 时间：2012-10-04T21:12:52.460
> 
> 标签：javascript, flash, youtube, webcam

有没有人使用任何库从浏览器中的网络摄像头录制，然后使用它上传到 YouTube？我认为有一些 Flash/JavaScript 解决方案，我发现一些是 ScriptCam (http://www.scriptcam.com/)、jpegcam (http://code.google.com/p/jpegcam/)、nimbb (http ://nimbb.com/) 和 Viddler (http://developers.viddler.com/documentation/articles/howto-record/)。

有没有人使用过这些库，或者你能推荐其他库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T10:27:26.393

YouTube has an interface for webcam recordings and upload:

[http://www.youtube.com/my_webcam](http://www.youtube.com/my_webcam)

However, I read on your question that you are seeking a video hosting service that isn't necessarily YouTube.

I would recommend red5, they allow you to gain full control on both server side, and client side events

[http://www.red5-recorder.com/demo.php](http://www.red5-recorder.com/demo.php)

# android - XML 布局文件中的条件语句

> ID：12736036
> 
> 赞同：0
> 
> 时间：2012-10-04T21:12:52.677
> 
> 标签：android

我正在制作一个 Android 应用程序，其中每个成员最多有 5 个孩子，因此我需要动态显示孩子。但是，我不能对 XML 布局应用条件。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:19:26.890

这就是java代码的用途。您为活动和小部件创建 xml 布局，然后在 Java 中操作它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:27:29.900

在您的 xml 代码上，您可以进行布局

```
android:visibility="gone" 
```

让它们不显示并在您的 mainActivity （java代码）中使用

```
LayoutView.setVisibility(View.VISIBLE);
// or
LayoutView.setVisibility(View.GONE); //depending on the case 
```

我通常使我的布局具有水平或垂直的其他布局，按钮文本视图等（子字段）在按钮单击事件中显示或消失。

# php - 从php中的关联数组中获取值

> ID：12736037
> 
> 赞同：0
> 
> 时间：2012-10-04T21:13:02.583
> 
> 标签：php, associative-array

我在 php 中编程多年，但我遇到了一个可笑的问题，不知道为什么会发生。我想我错过了一些东西，但我的大脑已经停止工作了！我有一个屁股。数组，当我 var_dump() 它时，它是这样的：

```
 array
  0 => 
    array
      4 => string '12' (length=2)
  1 => 
    array
      2 => string '10' (length=2)
  2 => 
    array
      1 => string '9' (length=1) 
```

我想对这些值做一些事情，比如将它们存储在一个数组中，(12,10,9)，但我不知道如何检索它！我测试了foreach()、array_value()，但没有结果。不管我做什么， var_dump() 结果还是一样的！顺便说一句，我正在使用 codeigniter 框架，但从逻辑上讲，它应该与框架无关，谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:17:37.783

您可以尝试使用`array_map`

```
$array = array(
        0 => array(4 => '12'),
        1 => array(2 => '10'),
        2 => array(1 => '9'));

$array = array_map("array_shift", $array);
var_dump($array); 
```

输出

```
array
  0 => string '12' (length=2)
  1 => string '10' (length=2)
  2 => string '9' (length=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:16:43.827

您可以像这样访问它们：

```
$array[0][4]= '13'; 
$array[1][2]= '11'; 
$array[2][1]= '10'; 
```

var_dump($array); 给出这个结果：

```
 array(3) { 
      [0]=> array(1) { 
         [4]=> string(2) "13" } 
      [1]=> array(1) { 
         [2]=> string(2) "11" } 
      [2]=> array(1) { 
         [1]=> string(2) "10" } 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:21:13.317

If you have an unknown depth, you can do something like this:

```
$output = array();
array_walk_recursive($input, function($value, $index, &$output) {
    $output[] = $value;
}, $output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:18:04.440

像这样：

```
for ($i = count($array) ; $i >= 0 ; $i--) {
    foreach($array[$1] as $k => $v) {
        echo $k . "=>".$v;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:18:44.473

如果您希望它们最终出现在一个数组中，请声明一个，然后遍历您的项目。

```
$arr = new array();

foreach ($arrItem in $yourArray) {
  foreach ($innerArrItem in $arrItem) {
    array_push($arr, $innerArrItem);
  }
}

print_r($arr); 
```

# php - 显示会话变量

> ID：12736042
> 
> 赞同：4
> 
> 时间：2012-10-04T21:13:27.657
> 
> 标签：php, session

我想显示所有会话数据，但可以对其进行一些控制。问题是，我无法确切知道会话中存储了什么，因为它是来自购物车的数据。

例如，我的会话中有一个变量：

> item_name_1：产品名称
> item_quantity_1：5

每个产品都有一些带有数字的变量。如果购物车中有 2 种不同的产品，则第二个将是

item_number_2 等等。

还有一个名为 itemcount 的变量，它告诉购物车中有多少不同的产品。

我如何告诉 php，所有以 item_name_ 开头的变量都应该显示在所有其他变量（如总价）之后的单个 div 中？

这是我目前用来打印会话数据的：

```
<?php
foreach ($_SESSION as $key=>$val)
echo $key. ": ".$val. "<br>";
?> 
```

这就是我所看到的：

> 货币：欧元
> 运费：10
> 总计：70.5
> itemCount：4
> item_name_1：Tomato Suppe
> item_quantity_1：1
> item_price_1：3.5
> item_options_1：
> item_name_2：Lentils Suppe
> item_quantity_2：14
> item_price_2：3.5
> item_options_2： item_name_3
> ：Chicken Suppe
> item_quantity_3：1
> item_price_3:
> _name_4 。
> 绿叶
> 供应 item_quantity_4：1
> item_price_4：3.5
> item_options_4：

显然我想让它更容易阅读。

我可以使用 echo $_SESSION['shipping'] 将其放在任何我想要的地方，但是我如何处理产品？

比如说我希望每个产品都显示在 div 和 /div 中？

对不起菜鸟问题。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:28:00.983

如果您无法控制数据保存到会话的方式，您可以编写一个简单的帮助函数，以更可用的格式检索产品数据。

```
function getSessionProducts()
{
  $itemCount = $_SESSION['itemCount'];
  $products = array(); 
  for($i = 1; $i <= $itemCount; $i++) {
     $products[] = array(
       'name' => $_SESSION['item_name_'.$i],
       'quantity' => $_SESSION['item_quantity_'.$i],
       'price' => $_SESSION['item_price_'.$i],
       'options' => $_SESSION['item_options_'.$i]
    );
  }
  return $products;
} 
```

您当然应该添加适当的验证来检查 $_SESSION 数组中的数据是否在访问之前设置。

如下使用它

```
$products = getSessionProducts(); 
foreach($products as $product) { 
    echo $product['name']; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:20:11.240

你可以使用像这样粗略的东西：

```
foreach($_SESSION AS $key => $val)
    if (preg_match("/item_name/i", $key)) {
        echo $val.'<br>';
    }
} 
```

显然，如果匹配成功，您可以随心所欲地处理您所做的事情。这只是提供一个想法。

顺便说一句，考虑一下其他人在说什么。如果您可以控制会话变量，那么最好以更好、更有条理的方式存储它们。不过，这个糟糕的示例可以与您提供的内容一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:21:15.467

每当你开始问自己“我如何处理变量名？” 这是一个好兆头，你正朝着错误的方向前进。如您所见，寻找`$_SESSION['item_number_$n']`. 然而，简单的是循环遍历数组的内容，幸运的是，您可以将其存储在会话中（除了它在页面加载之间的持久性之外，它只是一个普通数组）。

也就是说，与其试图弄清楚如何到达`$_SESSION['item_number_5']`，您只需看看`$_SESSION['shopping_cart'][5]`。这使得迭代项目、计算项目数量、添加项目、删除项目变得容易，并且通常更干净，可以全面使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:26:02.130

无论如何，您不应该真正使用会话变量来存储此类信息。您应该在会话中存储一个 id 以引用数据库中的购物车，而不是将有关购物车的所有信息直接存储在会话变量中。

# jquery - 我的开关坏了。你能帮忙修一下吗？

> ID：12736043
> 
> 赞同：0
> 
> 时间：2012-10-04T21:13:31.257
> 
> 标签：jquery

我的代码的初始部分正在工作。它加载`-`标志，然后`+`在单击时更改为标志。或者，如果需要，它可以加载多个`+`标志。无论哪种方式，第一次初始加载都很好。问题出在点击事件上。它根本行不通。

```
$(document).ready(function() {
    if ($('.user-email').length == 1) {
        $('.user-email .section-icon').toggleClass('open');
        $('.section-icon').text('-');
    } else if ($('.user-email').length > 1) {
        $('.section-icon').text('+');
    }

    $('.user-email-text').click(function(event) {
        event.preventDefault();
        if ($(".section-icon:contains('-')")) {
            $('.section-icon').text('+');
        } else if ($(".section-icon:contains('+')")) {
            $('.section-icon').text('-');
        }
        $(this).parent().next().toggle();
        $(this).siblings('.section-icon').toggleClass('open');
        return false;
    });
});​ 
```

我的小提琴在这里[http://jsfiddle.net/6QW2K/](http://jsfiddle.net/6QW2K/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:16:20.513

```
if ($(".section-icon:contains('-')")) { 
```

总是评估为`true`，您可以使用`length`属性：

```
if ($(".section-icon:contains('-')").length) { 
```

[http://jsfiddle.net/f2GZG/](http://jsfiddle.net/f2GZG/)

您也可以使用`text`方法而不是使用`:contains`选择器：

```
$('.section-icon').text(function(i, cur){
   return cur === '+' ? '-' : '+'
}) 
```

[http://jsfiddle.net/UaGrt/](http://jsfiddle.net/UaGrt/)

# c# - 如何将我的数据库上下文注入我的所有存储库类

> ID：12736047
> 
> 赞同：3
> 
> 时间：2012-10-04T21:13:55.220
> 
> 标签：c#, asp.net, asp.net-mvc-3, ninject

我的每个存储库类如下所示：

```
public class ProfileRepository : IProfileRepository{

   private MyEntities myEnt = new MyEntities();
   ...

} 
```

我正在注入我的存储库类，如下所示：

```
private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IProfileRepository>().To<ProfileRepository>();
            ....
            GlobalHost.DependencyResolver =  new NinjectDependencyResolver(kernel);
            GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new MyConnectionFactory());
            RouteTable.Routes.MapHubs(new NinjectDependencyResolver(kernel));
        } 
```

我想将 MyEntities 上下文注入到我的所有存储库类中，因此我在每个存储库类中都没有它的实例。我该如何做到这一点？这会是更好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:21:07.310

首先，您最好使用[Ninject.MVC3](http://nuget.org/packages/Ninject.MVC3)包。它将为您节省将 Ninject 附加到框架中的负担，并且只会让您担心绑定。

然后您可以使用 `kernel.Bind<your-database-context>().ToSelf().InRequestScope()`.

如果它们是在同一个 MVC 请求中创建的，这将确保您的所有存储库都将获得相同的 DbContext。

注意：你不能在没有 Ninject.MVC3 的情况下使用 InRequestScope()。

也就是说，我认为存储库是一个绝对可怕的抽象。您需要经过许多环节来抽象出您的数据访问，仅用于单元测试。你最好不要抽象出你的数据访问（微软已经在实体框架方面做得很好），而只是为你的单元测试准备一个体面的数据库副本。Django 为单元测试做了类似的事情，我想知道是否有一个单元测试系统可以自动处理这个问题（包括应用比 unit-test-only-database-snapshot 更新的迁移）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:36:43.890

我通过创建一个通用接口来实现这一点，即`IMyEntitiesContext`.

现在，我现在是凭记忆写的，所以这可能是也可能不是 100% 正确：

像这样的东西：

```
public interface IMyEntitiesContext : IDisposable
{
    IDbSet<Profile> Profiles { get; }
    ...
    ...
    int SaveChanges();
} 
```

然后，更改您的 DbContext 类以实现此接口：

```
public MyEntities : DbContext, IMyEntitiesContext
{
    public IDbSet<Profile> Profiles { get; set; }
    ...
    ...
} 
```

现在，您可以使用 IMyEntitiesContext 设置构造函数/属性注入：

```
public ProfileRepository : IProfileRepository
{
    private IMyEntitiesContext _ctx;

    public ProfileRepository(IMyEntitiesContext ctx)
    {
        _ctx = ctx;
    }
} 
```

# android - 带有 Aftek AMF 的 Android。为什么即使我编译代码没有错误并且应用程序加载正常，我的服务器也没有响应？

> ID：12736051
> 
> 赞同：1
> 
> 时间：2012-10-04T21:14:14.150
> 
> 标签：android, amf

我遵循了 Aftek 示例并加载了应用程序，我输入了名称和密码，单击按钮发送，但没有得到任何回报。没有错误或任何事情要继续，我很抱歉我对这个主题缺乏了解。如果有人对 Aftek 的 AMF 库有任何经验，我将非常感谢您的意见。

```
package com.ryan.etrak2;

import com.al.amf.channels.AMFChannel;
import com.al.amf.events.ErrorEvent;
import com.al.amf.events.ResultEvent;
import com.al.amf.remoting.RemoteListener;
import com.al.amf.remoting.RemoteObject;
import flex.messaging.io.ArrayCollection;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity 
implements OnClickListener, RemoteListener 
{
public ArrayCollection resultarr;

public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(this);
}

public void onClick(View v) 
{
System.out.println(" button clicked");
EditText username=(EditText) findViewById(R.id.editText1);
EditText password=(EditText) findViewById(R.id.editText2);

try
{
AMFChannel channel = new AMFChannel("http://192.168.0.109/8084/default/servlet/AMFgateway", this);
    RemoteObject remoteObject = channel.getRemoteObject("messageBO");

    remoteObject.addRemoteListener(this);
    Object[] params = new Object[]{};
            RemoteObject client = null;
    client.call("login", params);
}
catch(Exception e)
{
    e.printStackTrace();
}
}

// Invoked on successful remote procedure call.
public void onResult(ResultEvent resultEvent)
{
System.out.println("success:" + resultEvent.getData());
}

// Invoked on remote procedure call failure.   
public void onError(ErrorEvent errorEvent)
{
System.out.println("Error occured:" + errorEvent.getData());
}
} 
```

# ssis - 如果未打开，ssis 无法读取文件

> ID：12736054
> 
> 赞同：1
> 
> 时间：2012-10-04T21:14:28.183
> 
> 标签：ssis

我是 SSIS 的新手，我在这个网站上找到了一个解决方案，该解决方案对于如何遍历 Excel 文件并将它们加载到数据库中非常有帮助。[你可以在这里](https://stackoverflow.com/questions/7411741/how-to-loop-through-excel-files-and-load-them-into-a-database-using-ssis-package?answertab=active#tab-top)看到帖子。

奇怪的是，该解决方案仅在我打开 Excel 文件时才有效。有没有人遇到过这样的事情？

先感谢您。

# c - 为什么我不能设置大于 2^32 的 time_t？

> ID：12736066
> 
> 赞同：0
> 
> 时间：2012-10-04T21:15:43.953
> 
> 标签：c, fuse, time-t

我在 C 中搞乱 FUSE，我想创建一个似乎在很远的将来创建的文件。我在 FUSE 中编写的自定义 stat() 函数写入 struct stat* stbuf，我想做类似的事情

```
stbuf->st_ctime = (1 << 39) - 1; 
```

为了获得一个创建日期，未来的时间长得离谱。

我在 64 位 linux 系统上运行它，所以我希望我的 time_t 是一个 64 位值，实际上，如果我只是 printf("%d\n",(int) sizeof(x)); 在我的程序中测试 time_t 的大小我得到 8。但是，当我在打开警告的情况下编译我的代码时，我得到

```
warning: left shift count >= width of type [enabled by default] 
```

以及我在已安装的文件系统中统计文件时的更改时间

```
1969-12-31 15:59:59.000000000 -0800 
```

好像实际值是 0。有谁知道为什么在应该有 64 位 time_t 的 64 位系统上发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T21:19:23.777

在`1 << 39`你正在转移一个`int`而不是一个`time_t`。

# sql - 给定另一个查询的 SQL 选择

> ID：12736069
> 
> 赞同：0
> 
> 时间：2012-10-04T21:15:56.933
> 
> 标签：sql, sqlite

所以我想在一列中搜索最大时间：

```
sqlite> SELECT max(strftime('%Y-%m-%d %H:%M',time)) FROM posts WHERE thread_id=123456;
2012-10-02 02:31 
```

对于此查询返回的每个 thread_id：

```
sqlite> SELECT thread_id FROM threads WHERE out_of_date=0;
111
123
187
... 
```

然后我想搜索其字段与第一个查询返回的`last_post`字段不匹配的所有线程`time`，并将该`out_of_date`字段设置为1：

```
sqlite> UPDATE threads SET out_of_date=1 WHERE thread_id=123456 AND last_post!='2012-10-02 02:31'; 
```

问题是，我不太确定应该如何组合这三个单独的查询。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:55:30.007

The below SQL should update the threads table correctly. It uses a correlated sub-query to combine the 1st and 3rd of your queries. This can then be combined with your 2nd query by adding it's `WHERE` clause.

```
UPDATE threads T
SET out_of_date = 1
WHERE out_of_date = 0
    AND last_post != (
        SELECT MAX(strftime('%Y-%m-%d %H:%M',time))
        FROM posts
        WHERE thread_id = T.thread_id
    )
; 
```

# java - 适用于 Android 开发环境的 Windows XP

> ID：12736072
> 
> 赞同：0
> 
> 时间：2012-10-04T21:16:13.210
> 
> 标签：java, android, windows, development-environment

**澄清：** 我以前的 Android 开发环境是一台 Win7 机器，它使用命令行构建工具和与 Git 一起安装的 MinGW bash shell。我正在尝试在一台古老的 WinXP 机器上创建一个类似的环境。

**原始问题：**

我正在为我的 Android 开发环境设置一台旧的 Windows XP 机器。（是的，我知道我希望我有办法购买一台新的 Win7 或更好的 Win8 机器。我正在使用我目前拥有的机器。）我目前的问题是，当我运行我的机器时，`ant -f build-android.xml debug`我得到了以下错误：

```
-dex:
      [dex] Found Deleted Target File
      [dex] Converting compiled files and external libraries into c:\devel\src\java\bbct\bin\classes.dex...
       [dx] ************ java_exe=
       [dx] The system cannot find the path specified.
       [dx]
       [dx] ERROR: No suitable Java found. In order to properly use the Android Developer
       [dx] Tools, you need a suitable version of Java JDK installed on your system.
       [dx] We recommend that you install the JDK version of JavaSE, available here:
       [dx]   http://www.oracle.com/technetwork/java/javase/downloads
       [dx]
       [dx] You can find the complete Android SDK requirements here:
       [dx]   http://developer.android.com/sdk/requirements.html
       [dx] 
```

通过一些侦探工作，我发现`-dex`目标运行，而目标运行`${android.platform.tools.dir}/dx${bat}`又运行其中的`..\tools\lib\find_java.bat`一部分，如下所示：

```
rem Useful links:
rem Command-line reference:
rem   http://technet.microsoft.com/en-us/library/bb490890.aspx

rem Check we have a valid Java.exe in the path. The return code will
rem be 0 if the command worked or 1 if the exec failed (program not found).
for /f %%a in ('%~dps0\find_java.exe -s') do set java_exe=%%a
if not defined java_exe goto :CheckFailed 
```

`find_java.exe -s`从命令行运行给出

```
c:/PROGRA~1/Java/JDK16~1.0_3\bin\java.exe 
```

这是我的 JDK 安装的正确位置。`for`但是，当我在上述批处理脚本片段中的and命令之间添加 echo 语句时`if`，我可以看到该`java_exe`变量未设置或为空。我已经在 Win7 机器上成功编译了我的 Android 应用程序，所以我认为问题在于`for`上面的命令对于 WinXP 环境不正确。如何更改它以使其在 WinXP 中工作？如果问题不是特定于 WinXP，那么问题出在哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:20:14.257

**简短的回答：**

简短的回答是我认为我在 WinXP 命令行解释器中发现了一个错误。至少，Win7 中的行为与 WinXP 不同。我首先讨论和分解问题的原因。`find_java.bat`最后，我将对Android SDK 附带的脚本提出修复建议。

**长答案：**

有问题的行实际上是`find_java.bat`脚本中的 for 循环：

```
for /f %%a in ('%~dps0\find_java.exe -s') do set java_exe=%%a 
```

根据[MS docs](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/for.mspx?mfr=true)，此处适用的语法是用于迭代文件名的 for 循环：

```
for /F ["ParsingKeywords"] {%% | %}variable in (filenameset) do command [CommandLineOptions] 
```

让我们分解一下：

*   我们没有使用`"ParsingKeywords"`
*   如果这个命令是在批处理脚本中使用的，那么我们需要`%%`在变量名前面。如果我们从命令行运行它，那么只`%`使用一个。
*   在我们的情况下，`'%~dps0\find_java.exe -s'`描述了“文件名集”。这*应该*评估 running 的输出`find_java.exe -s`。

    *   `find_java.exe`在我的 WinXP 机器上从 MinGW 命令行手动运行会得到正确的输出。
    *   接下来我修改了`find_java.bat`文件如下：

        *   `rem`一开始就发出`@echo off`命令。（这在 OP 中没有显示。）这会在执行时打印出批处理文件中的每个命令。
        *   添加了一个 echo 命令来查看`java_exe`

        为了`find_java.bat`直接运行修改后的文件，我使用了原生的 WinXP`cmd`命令行。（我也应该使用 MinGW 中的 ant 脚本尝试此操作。）相关输出是

        ```
        C:\Program Files\Android\android-sdk\tools\lib>for /F %a in ('C:\PROGRA~1\ANDROID\ANDROI~1\tools\lib\FIND_J~1\find_java.exe -s') do set java_exe=%a
        The system cannot find the path specified.

        C:\Program Files\Android\android-sdk\tools\lib>echo ************ java_exe=
        ************ java_exe= 
        ```

        如您所见，`java_exe`为空。我也发现路径`C:\PROGRA~1\ANDROID\ANDROI~1\tools\lib\FIND_J~1\find_java.exe`有点奇怪；相反，它应该是`C:\PROGRA~1\ANDROID\ANDROI~1\tools\lib\find_java.exe`。进一步的调查揭示了正在发生的事情：

        *   %0、%1、%2 等是指命令行参数
        *   语法 %~[modifiers][#] 提供了一些关于如何处理命令行参数的附加参数。特别是，`modifiers`这里的值包括

            *   d = 展开驱动器号
            *   p = 展开路径名
            *   s = 使用 8.3 DOS 短名称展开

            这个想法是我们要运行与该代码所在`find_java.exe`的脚本位于同一目录中的可执行文件。指批处理脚本的名称。现在由于某种原因，WinXP 命令行解释器在此扩展中包含批处理脚本的文件名，而不仅仅是扩展它所在的路径。由于路径不正确，因此永远不会执行并且变量永远不会设置为有效值。另一方面，Win7只扩展了批处理脚本的路径，一切运行良好。`find_java.bat``%0``find_java.exe``java_exe`

    *   `command`设置`java_exe`稍后在另一个脚本中使用的变量的值。

**解决方案：** 当我删除`s`修饰符时，`'%~dps0\find_java.exe -s'`给出不带文件名的执行批处理文件的路径。但是，现在路径中可能存在空格和其他特殊字符。为了解决这个问题，我只需在适当的地方添加双引号。最后的 for 命令如下所示：

```
for /f %%a in ('"%~dp0\find_java.exe" -s') do set java_exe=%%a 
```

由于删除`s`修饰符时行为会发生变化，因此我认为 WinXP 命令行解释器中存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:38:20.830

将 c:/PROGRA~1/Java/JDK16~1.0_3\bin\ 添加到 Path 环境变量

# python - 两个字符串之间的正则表达式匹配？

> ID：12736074
> 
> 赞同：18
> 
> 时间：2012-10-04T21:16:18.670
> 
> 标签：python, regex, python-3.x, regex-negation

我似乎无法找到一种方法来提取以下示例中的所有评论。

```
>>> import re
>>> string = '''
... <!-- one 
... -->
... <!-- two -- -- -->
... <!-- three -->
... '''
>>> m = re.findall ( '<!--([^\(-->)]+)-->', string, re.MULTILINE)
>>> m
[' one \n', ' three '] 
```

由于正则表达式错误，很可能与 block with`two -- --`不匹配。有人可以指出正确的方向如何提取两个字符串之间的匹配项。

* * *

嗨，我已经测试了你们在评论中提出的建议....这是工作解决方案，几乎没有升级。

```
>>> m = re.findall ( '<!--(.*?)-->', string, re.MULTILINE)
>>> m
[' two -- -- ', ' three ']
>>> m = re.findall ( '<!--(.*\n?)-->', string, re.MULTILINE)
>>> m
[' one \n', ' two -- -- ', ' three '] 
```

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-04T21:24:10.170

这应该可以解决问题

```
 m = re.findall ( '<!--(.*?)-->', string, re.DOTALL) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:25:09.783

一般来说，用[正则文法](http://en.wikipedia.org/wiki/Regular_grammar)在两个分隔符之间进行任意匹配是不可能的。

具体来说，如果您允许嵌套，

```
<!-- how do you deal <!-- with nested --> comments? --> 
```

你会遇到问题。因此，虽然您可以使用正则表达式解决这个特定问题，但您编写的任何正则表达式都可能被其他一些奇怪的注释嵌套破坏。

要解析任意注释，您需要继续使用一种解析[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)的方法。一个简单的方法是使用[下推自动机](http://en.wikipedia.org/wiki/Pushdown_automaton)。

# gwt - GWT 链接到一个应用程序中，在不同的链接之间有不同的结果

> ID：12736079
> 
> 赞同：2
> 
> 时间：2012-10-04T21:16:28.340
> 
> 标签：gwt, redirect, hyperlink

我正在制作一个 GWT 应用程序。我希望我的用户从 id 接收带有与动态生成的页面相对应的链接的电子邮件。有没有办法给他们一个链接，其中应用程序读取 url，并作用于 url 字符串，做不同的事情，即，如果链接对应于第 1 页，那么

```
www.mycompany.com/#page1 
```

会在我的 gwt 应用程序中加载第 1 页。甚至类似的东西，

```
www.mycompany.com/specficentrypoints/#page1 
```

将加载该页面，并且常规入口点将被单独保留。

这甚至可能吗，如果这是我该怎么做呢？是否有任何教程，甚至简短的描述会有所帮助。

如果没有，我可以以某种方式破解它吗？使用其他层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:02:09.667

创建动态页面链接的新方法是使用“hash bang”( `#!`) 来支持[google 索引](https://developers.google.com/webmasters/ajax-crawling/docs/specification)。

```
wwww.mycompany.com/#!page1 
```

查看 GWT 活动和地点——“地点”只是一个动态的“页面”。

请参阅：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

# ios - 如何在 iOS 上的变量中获取位置（纬度和经度值）？

> ID：12736086
> 
> 赞同：15
> 
> 时间：2012-10-04T21:16:44.680
> 
> 标签：ios, cocoa-touch, geolocation, location

我想使用我的应用用户的位置，更具体地说是纬度和经度值。

我需要它们在变量中使用，以便我可以使用 url 发送它们......

我以前从未在 iOS 和 Xcode 上使用过位置，并且在 Internet 上找不到与我的问题相匹配的内容......

所以我希望有人可以用代码示例向我解释:)

谢谢你帮助来自德国的劳伦兹

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-04T21:39:24.047

您可以使用 CoreLocation 获取经度和纬度。

**包括框架：**

在导航器中单击您的项目。

单击“将二进制文件与库链接”下的加号按钮

将 Corelocation 添加到您的项目中。

**导入头文件：**

```
#import <CoreLocation/CoreLocation.h> 
```

**声明 CLLocationManager：**

```
CLLocationManager *locationManager; 
```

**初始化位置管理器：**

```
- (void)viewDidLoad
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone; 
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [locationManager startUpdatingLocation];
} 
```

**然后，使用**

```
float latitude = locationManager.location.coordinate.latitude;
float longitude = locationManager.location.coordinate.longitude; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-04T13:50:50.020

第 1 步：在您的项目中添加 CoreLocation 框架。

1.  选择*目标*->*构建阶段*
2.  选择*链接二进制与库*
3.  单击加号*(+)*按钮。这将弹出框架列表。
4.  搜索*CoreLocation 框架*并*添加*它。

![截图 1](../Images/e8b3325b7e477a6ac2a17b755f957bd2.png)

![截图 2](../Images/e976261efca8e4083bdfd72bd4558be6.png)

第 2 步：在要获取位置的视图控制器的头文件中写入以下代码：

```
#import <CoreLocation/CoreLocation.h> 
```

另外，添加`CLLocationManagerDelegate`接口。

现在，创建 LocationManager 的对象

```
 CLLocationManager *locationManager; 
```

第 3 步：在`ViewDidLoad`方法中编写以下代码：

```
 locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [locationManager startUpdatingLocation];

    [locationManager requestAlwaysAuthorization]; //Note this one 
```

您可以将 desiredAccuracy 值设置为`kCLLocationAccuracyBest, kCLLocationAccuracyNearestTenMeters, kCLLocationAccuracyHundredMeters, kCLLocationAccuracyKilometer, kCLLocationAccuracyThreeKilometers`

现在，编写下面的代码来获取纬度和经度值

```
 float Lat = locationManager.location.coordinate.latitude;
    float Long = locationManager.location.coordinate.longitude;
    NSLog(@"Lat : %f  Long : %f",Lat,Long); 
```

第 4 步：在 iOS 8 中，此*代码会静默失败*，即您不会收到任何错误或警告。

您需要做两件额外的事情才能使位置正常工作：

1.  **将密钥添加到您的 Info.plist**
2.  **请求位置管理器的授权**，要求它开始。

需要在 Info.plist 文件中添加以下任何一个或两个键。

1.  **NSLocationWhenInUseUsageDescription**
2.  **NSLocationAlwaysUsageDescription**

这些是字符串类型，值可以是任何消息描述或为空。

现在您需要为相应的定位方法请求授权。使用以下任一调用：

1.  **[self.locationManager requestWhenInUseAuthorization]**
2.  **[self.locationManager requestAlwaysAuthorization]**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-19T20:37:52.887

迅速：

```
var locationManager = CLLocationManager()
locationManager.distanceFilter = kCLDistanceFilterNone
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters
locationManager.startUpdatingLocation() 
```

更多信息在这里：[https ://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/index.html#//apple_ref/occ/cl/CLLocationManager](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/index.html#//apple_ref/occ/cl/CLLocationManager)

# xaml - 为什么视觉工作室 2012 很慢？

> ID：12736087
> 
> 赞同：6
> 
> 时间：2012-10-04T21:16:51.163
> 
> 标签：xaml, compiler-construction, crash, visual-studio-2012

我很沮丧在 Visual Studio 2012 中开发 xaml 应用程序。为什么它总是死机，甚至崩溃？我知道当您编辑 xaml 文件时它必须生成一些文件。有什么方法或配置可以让它流畅运行吗？而且 C++/CX 的编译器速度太慢了。我几乎无法忍受。有任何想法吗？

# c# - 收藏已修改；枚举操作可能无法执行

> ID：12736088
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:16:53.120
> 
> 标签：c#, foreach

我有下面的代码。我正在尝试删除记录，并且在删除记录时抛出异常。“集合已修改；枚举操作可能无法执行。”

关于如何摆脱消息的任何想法。珍惜你的时间。

```
//validClaimControlNo has valid ClaimControl Numbers.
List<string> validClaimControlNo = new List<string>();

int count = 0;
foreach (List<Field> f in records)
{
    foreach (Field fe in f)
    {
        if (i == 0)
            if (!(validClaimControlNo.Contains(fe.Value)))
            {
                //if this claim is not in the Valid list, Remove that Record
                records.RemoveAt(count);
            }
        i++;
    }
    i = 0;
    count++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:18:39.577

您不能从正在迭代的集合中删除项目。添加`.ToList()`将创建一个新列表，从而使其工作。

```
 foreach (List<Field> f in records.ToList()) 
```

另一种方法是向后迭代集合（并且您不需要额外的列表）：

```
for(int i = records.Count - 1; i >= 0; i--)
{
   var f = records[i]; 
```

但是查看您的代码可以大大简化：

```
//Put the claim numbers into a set for fast lookup
var set = new HashSet<string>(validClaimControlNo);

//Remove undesired items
records.RemoveAll(f => f.Count > 0 && !set.Contains(f[0].Value)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:18:22.813

将您更改`foreach`为：

`foreach (List<Field> f in records.ToList())`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:07:15.000

向后迭代你的集合是最快的方法。

```
for (int i = records.Count - 1; i >= 0; i--) { ... } 
```

# jquery - Jquery 淡入淡出

> ID：12736090
> 
> 赞同：0
> 
> 时间：2012-10-04T21:16:54.960
> 
> 标签：jquery, fadein, fadeout

我正在尝试淡出 div 元素，更改其中的文本，然后将其淡入...

我的代码在这里 -

```
<script>
        $(document).ready(function(){
            $("#l2").click(function(event){
                event.preventDefault();
                $("#1").fadeOut();
                $("#1").replaceWith('Testing');
                $("#1").fadeIn();
            });
        });
    </script> 
```

单击l2，它将淡出div id 1替换并淡入...但它失败了..任何帮助谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:21:11.097

您想使用`.text`or`.html`而不是`.replaceWith`-- 那是为了使用 DOM 元素。另外，`.text`不要`.html`使用队列，所以你不能链接它们。您必须使用回调：

```
$("#1").fadeOut(function () {
   $(this).text('Testing').fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:21:14.500

You need to use callbacks to achieve your goal:

```
$("#1").fadeOut(500, function(){
     $("#1").html('Testing');
     $("#1").fadeIn();
}); 
```

The function passed as a parameter will be executed when the fadeOut completes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:22:23.290

在第二行中，您将元素 #1 替换为新元素，然后您无法再次将其淡入。

```
$("#1").replaceWith('Testing'); 
```

结果在 div#1 被替换为文本测试

所以你应该改用：

```
$("#1").html('Testing'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:20:58.613

只需使用淡出回调。这是一个快速的小提琴[http://jsfiddle.net/M5PnY/2/](http://jsfiddle.net/M5PnY/2/) 点击文本

编辑 - - -

改成 html() 替换，之前没见过

```
$(document).ready(function(){
    $("#1").click(function(event){
        event.preventDefault();
        $("#1").fadeOut(function(event){
            $("#1").html('Testing').fadeIn();
        });
    });
});​ 
```

# mysql - MySQL 查询：查询所有超过 1 年的条目

> ID：12736092
> 
> 赞同：3
> 
> 时间：2012-10-04T21:16:58.470
> 
> 标签：mysql

我正在为 LibreOffice 中的一个非营利慈善机构建立一个会员数据库，但没有 mysql 查询方面的经验，因此我将不胜感激。

我正在尝试创建一个查询，该查询显示会员注册日期字段（*PaymentDate*）早于当前日期 1 年且*另一个*字段（ AwaitingRenewal ）的布尔值为**NO**的所有记录。日期采用*05/03/85*格式。感谢你给与我的帮助！

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T21:22:20.223

您可以执行以下操作：

```
select * from `members` 
  where `paymentDate` < DATE_SUB(CURDATE(), INTERVAL 1 YEAR)
  and `AwaitingRenewal` = 'NO' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:31:17.757

```
* from dt_tb where `dt` >= DATE_SUB(CURDATE(), INTERVAL 1 YEAR) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T13:50:13.663

我的注意力被吸引到这个问题上，因为另一个类似的问题被关闭，引用这个问题是重复的。但我认为这些答案中的任何一个都不能*完全*解决这两个问题，所以我想补充一点我觉得缺失的一点。

当调用 MySQL或函数以分别获取当前日期或日期和时间时，一个`DATE`或`DATETIME`列还没有携带时区信息，返回的值始终相对于当前有效的会话时区。所以有人要问，最初的列值是如何设置的？是通过调用还是如果是这样，当时有效的会话时区是否与现在有效的时区相同？或者，如果该列已使用诸如or之类的文字进行设置，那么setter 在创建该文字时会考虑什么*隐式时区？*同样，它是否与为当前会话设置的时区相同？`CURDATE``NOW``CURDATE``NOW``'2020-03-01'``'2020-03-01 03:00:00'`

 *只有当当前会话时区设置为与当前日期或日期和时间比较的列时显式或隐式有效的相同时区，MySQL 函数`DATE_SUB`才会为您提供正确的结果（或者，如果您知道这两个时区之间的小时差异，则可以调整`DATE_SUB`由该差异返回的结果）。

因此，如果您需要存储日期时间信息，以后您会问诸如此日期时间是否发生在一年多以前的问题，那么`DATEIME`列是一个糟糕的数据类型选择，因为它不包含时区信息. 如果此列类型被`TIMESTAMP`初始化为`CURDATE()`or `NOW()`，那么在内部数据将*有效*（尽管不完全）转换为 UTC 时间，因此将具有隐式 UTC 时区。随后，当该列与诸如 之类的函数进行比较或使用时`CURDATE()`，它将自动转换回对会话有效的当前时区，您将获得正确的结果。`NOW()``DATE_SUB`

然而，在这个特定的例子中，我们正在处理一个`DATE`列。假设它是`CURDATE()`在使用默认会话时区（即`America/Los_Angeles'`. 一段时间后，您移至另一台服务器，现在当前默认会话时区为`'America/New_York'`. 如果您真的关心 3 小时的差异并希望尽可能准确（假设您意识到时区发生了这种变化），那么您需要设置正确的会话时区，该`DATE`列应该被解释为：

```
set session time_zone = 'America/Los_Angeles';
select * from `members` 
  where `paymentDate` < DATE_SUB(CURDATE(), INTERVAL 1 YEAR)
  and `AwaitingRenewal` = 'NO' 
```

或者一劳永逸地，您可以通过将`paymentDate`列转换为列来“修复”您的数据库`TIMESTAMP`（即使您只存储`CURDATE()`值，这些值将隐含`00:00:00`时间值）：

```
set session time_zone = 'America/Los_Angeles';
alter table `members` change `paymentDate` `paymentDate` timestamp not null; 
```

然后，您不必担心当前会话时区是什么，只要您将该`paymentDate`列与具有时区信息的值（例如由`CURDATE()`or返回）进行比较`NOW()`。但是您现在可能必须`DATE`对列使用该函数来抑制具有时间分量的结果，即使它是`00:00:00`：

```
select * from `members` 
  where DATE(`paymentDate`) < DATE_SUB(CURDATE(), INTERVAL 1 YEAR)
  and `AwaitingRenewal` = 'NO' 
```

但是，如果您进行这种转换，还有一件事需要注意。列`TIMESTAMP`( `pyamentDate`) 将通过将内部值转换为当前会话时区来显示，而原始`DATE`列的显示完全独立于当前会话时区。***

# c++ - 如何使用 C++ 在 SQLite3 数据库上实现回滚事务

> ID：12736093
> 
> 赞同：0
> 
> 时间：2012-10-04T21:16:59.390
> 
> 标签：c++, visual-c++, sqlite

我在我的项目中使用开源 CppSQLite 包装器来访问 SQLIte3 表，

我正在尝试将几个 sql 查询插入到 sqlite3 表中。如果任何插入查询失败，我需要回滚事务。

我的代码类似于以下内容：

```
 CppSQLiteDB db;
    db.execDML(L"begin transaction;");
    db.execDML("insert into emp values (7, 'Test7');");
    db.execDML("insert into emp values (8, 'Test8');");
    db.execDML("insert into emp values (9, 'Test9');");
    db.execDML(L"commit transaction;"); 
```

如果任何一个插入查询失败，我如何回滚事务。我应该检查每个插入查询的返回码吗？

> 参考： http: [//www.codeproject.com/Articles/6343/CppSQLite-C-Wrapper-for-SQLite](http://www.codeproject.com/Articles/6343/CppSQLite-C-Wrapper-for-SQLite)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:30:40.813

如果`execDML`发生错误时抛出异常，您可以使用异常处理程序：

```
db.execDML("begin");
try {
    db.execDML("insert ...");
    db.execDML("insert ...");
    db.execDML("commit");
} catch (...) {
    db.execDML("rollback");
    throw;
} 
```

如果没有，您将不得不编写一个包装函数来`execDML`检查返回码并*抛出*异常。但是，CppSQLite 似乎已经为您做到了。

# visual-studio - Visual Studio 10 文件扩展名

> ID：12736094
> 
> 赞同：1
> 
> 时间：2012-10-04T21:17:03.697
> 
> 标签：visual-studio

我是 MS Visual Studio 2010 的新手。文件名 .cs 和 .resx 的作用是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:24:16.297

[.cs 文件被指定为 c# 源代码文件](http://msdn.microsoft.com/en-us/library/ms228500%28v=vs.90%29.aspx)。通常，这些包含应用程序执行的逻辑，并由 C# 编译器 csc.exe 编译。如果您的项目是 Visual Basic.NET 项目，您将拥有 .vb 文件，其中包含 VB 代码。

[.resx 文件](http://msdn.microsoft.com/en-us/library/ekyft91f%28v=vs.80%29.aspx)包含有关项目中使用的资源的信息，例如导入的图像等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:24:39.767

.cs 包含 C# 源代码

[.resx 资源文件](http://msdn.microsoft.com/en-us/library/ekyft91f%28v=vs.80%29.aspx)格式由 XML 条目组成，这些条目在 XML 标记内指定对象和字符串

# ruby - 根据是否在新行开始，以不同方式缩进续行

> ID：12736098
> 
> 赞同：2
> 
> 时间：2012-10-04T21:17:23.440
> 
> 标签：ruby, vim, indentation, auto-indent

我试图让 vim 以这种方式从新行开始缩进续行：

```
def foo
  open_paren_at_EOL(
      100, 200)

  a = {
      :foo => 1,
  }
end 
```

Vim 7.3 对这些行的默认缩进 [1] 如下所示：

```
def foo
  open_paren_at_EOL(
    100, 200)

  a = {
    :foo => 1,
  }
end 
```

我尝试了多个 cino= 值，甚至尝试从 [2] 改编 .vim 脚本，但没有成功。

我的 .vimrc 在这里：

[https://github.com/slnc/dotfiles/blob/master/.vimrc](https://github.com/slnc/dotfiles/blob/master/.vimrc)

谢谢！

*   [1] [https://github.com/vim-ruby/vim-ruby/blob/master/indent/ruby.vim](https://github.com/vim-ruby/vim-ruby/blob/master/indent/ruby.vim)
*   [2] [“谷歌” python 样式脚本不工作](https://stackoverflow.com/questions/5696837/google-python-style-script-not-working)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:33:16.510

要获得这种缩进，您可以做的是找出`GetRubyIndent`函数的哪些区域与这些延续相关并增加返回值。对于您给出的示例，这似乎可以完成工作：

```
diff --git a/indent/ruby.vim b/indent/ruby.vim
index 05c1e85..6f51cf2 100644
--- a/indent/ruby.vim
+++ b/indent/ruby.vim
@@ -368,7 +368,7 @@ function GetRubyIndent(...)

  " If the previous line ended with a block opening, add a level of indent.
  if s:Match(lnum, s:block_regex)
-    return indent(s:GetMSL(lnum)) + &sw
+    return indent(s:GetMSL(lnum)) + &sw * 2
  endif

  " If the previous line ended with the "*" of a splat, add a level of indent
@@ -383,7 +383,7 @@ function GetRubyIndent(...)
    if open.pos != -1
      if open.type == '(' && searchpair('(', '', ')', 'bW', s:skip_expr) > 0
        if col('.') + 1 == col('$')
-          return ind + &sw
+          return ind + &sw * 2
        else
          return virtcol('.')
        endif 
```

我不完全确定这是否不会破坏其他任何东西，但这对我来说似乎是一个安全的改变。如果您发现不按您想要的方式缩进的情况，您可以通过困难的方式修复它：`return`在函数的限制内搜索，然后增加一个`&shiftwidth`（或`&sw`）返回的缩进。检查它是否有效，如果无效，请撤消然后继续下一个`return`，直到您真正找到它。

您可以 fork `vim-ruby`，或者您可以将`indent/ruby.vim`文件复制到`~/.vim/indent/ruby.vim`并根据需要进行更改。它应该优先于捆绑的`indent/ruby.vim`.

如果您正在寻找一个完全不引人注目的解决方案，那将是困难的。从理论上讲，您可以通过使用将函数覆盖`GetRubyIndent`为缩进器`setlocal indentexpr=CustomGetRubyIndent(v:lnum)`，然后定义一个`CustomGetRubyIndent`函数，该函数仅在特定情况下实现您的行为并委托给`GetRubyIndent`. 不过，我不建议走那么远，它可能会变得相当混乱。

# php - 重定向一些没有缩短链接的网址

> ID：12736101
> 
> 赞同：0
> 
> 时间：2012-10-04T21:17:24.600
> 
> 标签：php, api, hyperlink

我编写了一个程序来自动缩短链接，它使用我网站的 api，但是当我点击一个缩短的链接时我必须这样做（比如：goo.gle/~~~）这个程序不使用我的服务并重定向到链接没有 Reshorten 链接！如您所知，更短的链接服务现在更改了 url，我需要一个程序，如果在我的值中找到类似 (goo.gle) 的内容，那么不管 Reshorten 服务并使用 api

```
elseif ($url == "http://goo.gle/")
{
header("HTTP/1.1 301 Moved Permanently");
header("Location: $url");
}

else
{

            $orls = "http://losa.net/api.php?key=dc4c0b38b62b44f69467c33eaf7ce08b&uid=128&adtype=int&url=".$url."";
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL,$orls);
            curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
            $content=curl_exec ($ch);
            curl_close ($ch);
            header("HTTP/1.1 301 Moved Permanently");
            header("Location: $content");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:47:13.577

不知道你在问什么，但我会回答我所理解的。

1.  您可以通过使用正则表达式并查看 url 的第一部分是否在一定数量的字符以下来确定 URL 是否使用缩短服务，不确定最长的字符有多长，但大约是 5 个或更少的字符。

2.  如果是，则尝试让 PHP 捕获标头并找出它重定向两个的位置或使用 API，例如[LongUrl](http://longurl.org/api)。

3.  重新缩短。

或者，如果您说如果 URL 已经缩短，您想忽略您的 API，您可以执行以下操作：

1.  与上一步相同，使用正则表达式查看第一部分是否少于 5 个字符。

2.  尝试 展开

3.  如果您可以扩展重定向。

# asp.net-mvc - 使用剃刀进行表单验证

> ID：12736102
> 
> 赞同：3
> 
> 时间：2012-10-04T21:17:35.870
> 
> 标签：asp.net-mvc, razor, validation, submit

我的 .net mvc razor 表单中有以下内容，我正在单击提交按钮，但它没有通过 js 中的验证进行验证。我在 Firefox 中对其进行了调试，而是直接使用表单方法，并且表单上没有验证以停止表单提交。

model.LoanId 的 HTML 输出就是 LoanId。

如何正确验证表格？？？？

我究竟做错了什么？

**HTML**

```
 @using (Html.BeginForm("Refresh", "Home", FormMethod.Post, new { id = "frmTemps" })) 
    <tr>
                    <td>
                    @Html.LabelFor(model => model.LoanId)
                    @Html.TextBoxFor(model => model.LoanId)
                    <td colspan="3">
                        <input type="submit" id="btnRefresh" value='Refresh' />
                    </td>
                </tr>

js

$("#frmTemps").validate({
        event: "submit",
        rules: {
            LoanID: {
                required: true
            }
        },
        messages: {
            LoanID: {
                required: ' Please enter a Loan ID. '
            }
        }
    });

I also tried it with non-model data below and got the same thing.

    @Html.Label("loanid:", "LoanID")
                    @Html.TextBox("loanID")

Here is the html I'm trying to validate:
<td>@Html.LabelFor(model => model.LoanType)
                    @Html.TextBox("SBA", "SBA")
                    @Html.ValidationMessageFor(model => model.LoanType)
                    @*@Html.TextBoxFor(model => model.LoanType)*@
                </td>
                <td>
                    <label for="ddlDept">Department:</label>
                    @(Html.Kendo().DropDownListFor(model => model.SelectedDeptText)
                            .Name("ddlDept")
                            .DataTextField("DepartmentName")
                            .DataValueField("DepartmentID")
                            .Events(e => e.Change("Refresh"))
                            .DataSource(source =>
                            {
                                source.Read(read =>
                                {
                                    read.Action("GetDepartments", "Home");
                                });
                            })
                    )
                    @Html.ValidationMessageFor(model => model.SelectedDeptText) 
```

**查看模型**

```
public class ViewModelTemplate_Guarantors
{
    public int SelectedTemplateId { get; set; }
    public IEnumerable<PDFTemplate> Templates { get; set; }

    public int SelectedGuarantorId { get; set; }
    public IEnumerable<tGuarantor> Guarantors { get; set; }

    public string LoanId { get; set; }
    public string SelectedDeptText { get; set; }
    public string LoanType { get; set; }

    public bool ShowTemps { get; set; }
    public string Error { get; set; }
    public string ErrorT { get; set; }
    public string ErrorG { get; set; }
    public bool ShowGeneratePDFBtn { get; set; }
} 
```

**_Layout.cshtml**

```
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script src="~/Scripts/modernizr-2.5.3.js"></script>
<script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.all.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js")"></script> 
```

**验证类**

```
namespace PDFService03Validation.Validations
{
    [MetadataType(typeof(PDFService03_Validation))]
    public partial class PDFService03
    {

}

    public partial class PDFService03_Validation
    {
        public class PDFService03
        {
            [Required(ErrorMessage = "Loan ID Required")]
            [DataType(DataType.Text)]
            public string LoanID { get; set; }

            [Required(ErrorMessage = "Loan Type Required")]
            [DataType(DataType.Text)]
            public string LoanType { get; set; }

            [Required(ErrorMessage = "Department Name Required")]
            [DataType(DataType.Text)]
            public string SelectedDeptText { get; set; }
        }
    }
} 
```

**指数法**

```
public ActionResult Index(ViewModelTemplate_Guarantors model)
{
    ViewBag.Error = "";

    model.ShowGeneratePDFBtn = false;

    return View();
} 
```

`Index.cshtml`- 仍然认为对象未设置。调试时，我进入我的控制器，在模型中设置变量，然后回到这里。请帮忙......我不知道我在这里做错了什么。我想我已经按照需要遵循了一切。

很抱歉再次打扰你，但我快到了....

我按照你说的做了，但仍然没有收到任何验证错误......

下面是我的 View 生成的 html 标记。您可以在顶部看到我正在使用的脚本，还可以在 span 标签中看到验证。我错过了什么？？？我还将向您展示我编辑的 ViewModel。非常感谢提前...

视图模型

```
namespace PDFConverterModel.ViewModels
{
    [MetadataType(typeof(ViewModelTemplate_Guarantors_Validation))]
    public partial class ViewModelTemplate_GuarantorsValidation
    {

    }

    public partial class ViewModelTemplate_Guarantors_Validation
    {
        public class ViewModelTemplate_Guarantors
        {
            [Required(ErrorMessage = "Loan ID Required")]
            [DataType(DataType.Text)]
            public string LoanID { get; set; }

            [Required(ErrorMessage = "Loan Type Required")]
            [DataType(DataType.Text)]
            public string LoanType { get; set; }

            [Required(ErrorMessage = "Department Name Required")]
            [DataType(DataType.Text)]
            public string SelectedDeptText { get; set; }
        }
    }

    public class ViewModelTemplate_Guarantors
    {
        public int SelectedTemplateId { get; set; }
        public IEnumerable<PDFTemplate> Templates { get; set; }

        public int SelectedGuarantorId { get; set; }
        public IEnumerable<tGuarantor> Guarantors { get; set; }

        public string LoanId { get; set; }
        public string SelectedDeptText { get; set; }
        public string LoanType { get; set; }

        public bool ShowTemps { get; set; }
        public string Error { get; set; }
        public string ErrorT { get; set; }
        public string ErrorG { get; set; }
        public bool ShowGeneratePDFBtn { get; set; }
    }
} 
```

页面输出：

```
<!DOCTYPE html>
<html>
<head>
    <title>BHG :: PDF Generator</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/kendo/2012.2.913/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/kendo/2012.2.913/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/kendo/2012.2.913/kendo.blueopal.min.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.7.1.min.js"></script>
    <script src="/Scripts/jquery.validate.min.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="/Scripts/modernizr-2.5.3.js"></script>
    <script src="/Scripts/kendo/2012.2.913/kendo.all.min.js"></script>
    <script src="/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js"></script>
</head>

<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>BHG :: PDF Generator</h1>
            </div>
        </header>
        <section id="main">

<h2></h2>

<div>

    <table style="width: 1000px">
        <tr>
            <td colspan="5">
                <img alt="BHG Logo" src="/Images/logo.gif" />
            </td>
        </tr>

<form action="/Home/Refresh" id="frmTemps" method="post">            <tr>
                <td>

                <label for="LoanId">LoanId</label>
                <input id="LoanId" name="LoanId" type="text" value="" />
                <span class="field-validation-valid" data-valmsg-for="LoanId" data-valmsg-replace="true"></span>
                <td colspan="3">
                    <input type="submit" id="btnRefresh" value='Refresh' />
                </td>
            </tr>
            <tr>
                <td><label for="LoanType">LoanType</label>
                    <input id="SBA" name="SBA" type="text" value="SBA" />
                    <span class="field-validation-valid" data-valmsg-for="LoanType" data-valmsg-replace="true"></span>

                </td>
                <td>
                    <label for="ddlDept">Department:</label>
                    <input id="ddlDept" name="ddlDept" type="text" /><script>
    jQuery(function(){jQuery("#ddlDept").kendoDropDownList({"change":Refresh,"dataSource":{"transport":{"read":{"url":"/Home/GetDepartments"}},"schema":{"errors":"Errors"}},"dataTextField":"DepartmentName","dataValueField":"DepartmentID"});});
</script>
                    <span class="field-validation-valid" data-valmsg-for="SelectedDeptText" data-valmsg-replace="true"></span>
                </td>
            </tr>
</form>
    </table>

</div>

<script type="text/javascript">

    $('btnRefresh').on('click', '#btnRefresh', function () {
        Refresh();
    });

    function Refresh() {

        var LoanID = $("#LoanID").val();

        if (LoanID != "") {
            document.forms["frmTemps"].submit();
        }
    }
</script>

        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:19:42.113

哦……我明白为什么会这样了。你忘记了这一点：

```
@Html.ValidationMessageFor(model => model.LoanId) 
```

如果不放`ValidationMessageFor`，不显眼的验证不会知道这个模型属性需要在表单提交之前进行验证。

所以你必须有这个：

```
@Html.LabelFor(model => model.LoanId)
@Html.TextBoxFor(model => model.LoanId)
@Html.ValidationMessageFor(model => model.LoanId) 
```

不要忘记`LoanId`首先在您的属性中放置一些数据注释......

有关这方面的更多信息，请查看此处：[使用数据注释验证器进行验证 (C#)](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

**编辑**

在您为问题提供更多代码后，我可以看到为什么没有显示验证错误。

发生这种情况是因为您实际上是在将自定义 ViewModel 传递`ViewModelTemplate_Guarantors`给视图。如您所见，您的视图模型没有数据注释。您在元数据类中提供的数据注释只有在您将类型对象传递给视图`PDFService03_Validation`时才会生效。`PDFService03`所以要解决这个问题，你必须在你的`ViewModelTemplate_Guarantors`视图模型对象中复制你的数据注释。这是代码重复，非常丑陋，但它是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:32:08.963

1.  jquery-1.7.1.min.j
2.  kendo.web.min.js
3.  kendo.aspnetmvc.min.js
4.  kendo.validator.min.js
5.  kendo.dataviz.min.js

这 5 个文件是验证工作所必需的。我已经看到您添加了其中的一些添加所有这些并尝试。我也遇到了这个问题，但这已经解决了这个问题。

还要检查你的网络配置：

```
<appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

这也是必需的。让我不知道它的工作原理。

# mysql - Mysql查询中的圆形unix时间戳

> ID：12736105
> 
> 赞同：0
> 
> 时间：2012-10-04T21:17:39.040
> 
> 标签：mysql

我有一个包含两列、一个 ID 和一个 unix 时间戳的表（即不是 Mysql 样式，而是从 1970 年开始的纯秒数。）

我想知道每天有多少个时间戳。

到目前为止我的查询是：

```
SELECT unixtime, count(unixtime)
    AS count
    FROM core
    GROUP BY unixtime 
```

我需要做的当然是将 unixtime 标记四舍五入到最近的一天。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:21:12.847

使用`FROM_UNIXTIME`with`DATE`应该可以得到你想要的结果：

```
SELECT DATE(FROM_UNIXTIME(unixtime)), COUNT(unixtime) AS count
FROM core
GROUP BY DATE(FROM_UNIXTIME(unixtime)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T14:54:55.067

您可以使用整数除法来查找自纪元以来的日期（整数）。

```
# current day
mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2014-04-16 14:52:06 |
+---------------------+

#number of days since epoch - there 86400
mysql> select unix_timestamp() div 86400 as days_since_epoch;
+------------------+
| days_since_epoch |
+------------------+
|            16176 |
+------------------+

#convert back to rounded off day
mysql> select from_unixtime((unix_timestamp() div 86400) * 86400) as today;
+---------------------+
| today               |
+---------------------+
| 2014-04-16 00:00:00 |
+---------------------+ 
```

# .net - 如何为 WCF 应用程序生成 CSR？

> ID：12736107
> 
> 赞同：0
> 
> 时间：2012-10-04T21:17:44.470
> 
> 标签：.net, wcf, soap, x509, pki

我有一个应用程序使用带有证书类型的消息凭据的 WCF SOAP 服务。我生成了开发级证书，以便在使用 makecert 进行开发/测试期间使用，现在我已准备好将我的代码推广到下一个环境。为此，我想获得生产级证书。

在与我们的一位系统代表合作后，我可以获得客户端证书的 PFX 文件。这是生成证书的 OpenSSL 配置：

```
[req] # openssl req params
prompt = no
distinguished_name = MyName.Client

[MyName.Client]
C = US
ST = New York
O = MyCompany
OU = MyUnit
CN = MyName
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always
basicConstraints = critical,CA:FALSE 
```

我们在其中一台服务器上使用 Microsoft 证书服务（我不太熟悉）来生成 MyName.Client.cer 和 MyName.Client.key 文件。我们有一个名为 MyCA.cer 的根授权证书。然后，我们使用 OpenSSL 从 MyName.key、MyName.Client.cer 和 MyCA.cer 生成 MyName.pfx。我安装了 MyName.Client.pfx、MyCA.cer 和 MyCA.crl，并从 Service Trace 文件中得到以下异常：

```
The X.509 certificate CN=MyName.Client, OU=MyUnit, O=MyCompany, S=New York, C=US chain building failed. The certificate that was used has a trust chain that cannot be verified. Replace the certificate or change the certificateValidationMode. The revocation function was unable to check revocation because the revocation server was offline. 
```

所以我被困住了。我是一个有证书的菜鸟，并认为这将是直截了当的。我们打算在最终环境中使用 GeoTrust 证书。我们为他们做了很多生意。我试图弄清楚如何告诉我们的系统人员如何从 GeoTrust 为我的应用程序获取证书。在我看来，由于我的应用程序与我应该能够安装它们的开发证书一起使用，所以只需更改我的配置以查找新证书。我错了吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:28:31.583

所以我发现了问题和解决方法（现在）。根据错误，吊销列表无法访问，所以我在服务器web.config中添加了这个：

```
<authentication revocationMode="NoCheck"> 
```

似乎成功了！

# c# - c#中要数组的整数列表

> ID：12736111
> 
> 赞同：1
> 
> 时间：2012-10-04T21:18:07.190
> 
> 标签：c#

我有一个名为的整数列表`MyList`。在javascript中，当我们调用`toString`一个数字数组时，它会将其转换为一个字符串，每个数字用逗号分隔；我希望在 C# 中做同样的事情。

我尝试调用`.ToString`() 到列表，但它返回列表的类型。我正在考虑一个循环，它遍历列表并将每个元素与逗号一起添加到字符串生成器，然后将 .ToString() 添加到字符串生成器。

这是最好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T21:19:58.453

使用[`string.Join`](http://msdn.microsoft.com/en-us/library/dd988350.aspx)：

```
string result = string.Join(",", MyList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:24:37.410

尝试使用此代码：

```
 List<int> MyList = new List<int>();
            MyList.Add(1);
            MyList.Add(2);
            MyList.Add(3);
            MyList.Add(4);
            MyList.Add(5);
            MyList.Add(6);

            var m = string.Join(",", MyList);

            MessageBox.Show(m.ToString()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T21:21:23.240

您可以使用该[`String.Join`](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)方法使用分隔符“内爆”数组。

例如：

```
String.Join(",", MyList); 
```

# php - 在 Laravel 迁移文件中填充数据库

> ID：12736120
> 
> 赞同：149
> 
> 时间：2012-10-04T21:18:36.140
> 
> 标签：php, laravel, migration, mysql-error-1146

我刚刚学习 Laravel，并且有一个工作迁移文件创建一个用户表。我正在尝试填充用户记录作为迁移的一部分：

```
public function up()
{
    Schema::create('users', function($table){

        $table->increments('id');
        $table->string('email', 255);
        $table->string('password', 64);
        $table->boolean('verified');
        $table->string('token', 255);
        $table->timestamps();

        DB::table('users')->insert(
            array(
                'email' => 'name@domain.com',
                'verified' => true
            )
        );

    });
} 
```

但是运行时出现以下错误`php artisan migrate`：

```
SQLSTATE[42S02]: Base table or view not found: 1146 Table 'vantage.users' doesn't exist 
```

这显然是因为 Artisan 尚未创建表，但所有文档似乎都说有一种方法可以使用 Fluent Query 来填充数据作为迁移的一部分。

有谁知道怎么做？谢谢！

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-10-04T21:25:19.780

不要将 DB::insert() 放在 Schema::create() 中，因为 create 方法必须先完成表的创建，然后才能插入内容。试试这个：

```
public function up()
{
    // Create the table
    Schema::create('users', function($table){
        $table->increments('id');
        $table->string('email', 255);
        $table->string('password', 64);
        $table->boolean('verified');
        $table->string('token', 255);
        $table->timestamps();
    });

    // Insert some stuff
    DB::table('users')->insert(
        array(
            'email' => 'name@domain.com',
            'verified' => true
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2015-09-30T02:43:20.237

我知道这是一篇旧帖子，但由于它出现在谷歌搜索中，我想我会在这里分享一些知识。@erin-geyer 指出，混合迁移和播种器可能会让人头疼，@justamartin 反驳说，有时您希望/需要在部署过程中填充数据。

我会更进一步说，有时希望能够一致地推出数据更改，以便您可以例如部署到登台，看到一切都很好，然后部署到生产环境中对相同的结果充满信心（并且不必记住运行一些手动步骤）。

然而，分离种子和迁移仍然是有价值的，因为它们是两个相关但不同的问题。我们的团队通过创建称为播种机的迁移来妥协。这看起来像：

```
public function up()
{
    Artisan::call( 'db:seed', [
        '--class' => 'SomeSeeder',
        '--force' => true ]
    );
} 
```

这使您可以像迁移一样执行一次种子。您还可以实现阻止或增强行为的逻辑。例如：

```
public function up()
{
    if ( SomeModel::count() < 10 )
    {
        Artisan::call( 'db:seed', [
            '--class' => 'SomeSeeder',
            '--force' => true ]
        );
    }
} 
```

如果 SomeModel 少于 10 个，这显然会有条件地执行您的播种机。如果您想将播种器作为标准播种器包含在您调用`artisan db:seed`和迁移时执行的标准播种器中，这将非常有用，这样您就不会“加倍”。您还可以创建一个反向播种器，以便回滚按预期工作，例如

```
public function down()
{
    Artisan::call( 'db:seed', [
        '--class' => 'ReverseSomeSeeder',
        '--force' => true ]
    );
} 
```

需要第二个参数`--force`才能使播种机在生产环境中运行。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-22T20:19:27.167

这是一个很好的解释为什么使用 Laravel 的数据库播种器比使用迁移更可取：[https ://web.archive.org/web/20171018135835/http://laravelbook.com/laravel-database-seeding/](https://web.archive.org/web/20171018135835/http://laravelbook.com/laravel-database-seeding/)

虽然按照官方文档上的说明是一个更好的主意，因为上面链接中描述的实现似乎不起作用并且不完整。 [http://laravel.com/docs/migrations#database-seeding](http://laravel.com/docs/migrations#database-seeding)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-05-02T09:45:35.260

如果你使用 Laravel 8 并且想用**多**条记录进行初始化，你可以通过这两种方式中的任何一种来完成。

**1\. 不推荐的方式**

```
public function up()
    {
        Schema::create('categories', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->timestamps();
        });

        DB::table('categories')->insert(
            array(
                [
                    'name' => 'Category1',
                ],
                [
                    'name' => 'Category2',
                ],
                [
                    'name' => 'Category3',
                ],
            )
        );
    } 
```

上述方法很好，但会将**created_at**和**updated_at**列留空。

**2.推荐方式**

```
 public function up()
    {
        Schema::create('categories', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->timestamps();
        });

        $data =  array(
            [
                'name' => 'Category1',
            ],
            [
                'name' => 'Category2',
            ],
            [
                'name' => 'Category3',
            ],
        );
        foreach ($data as $datum){
            $category = new Category(); //The Category is the model for your migration
            $category->name =$datum['name'];
            $category->save();
        }

    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-21T05:11:57.210

这应该做你想要的。

```
public function up()
{
    DB::table('user')->insert(array('username'=>'dude', 'password'=>'z19pers!'));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-20T16:03:51.270

另一种干净的方法是定义一个私有方法来创建实例并持久化相关模型。

```
public function up()
{
    Schema::create('roles', function (Blueprint $table) {
        $table->increments('id');
        $table->string('label', 256);
        $table->timestamps();
        $table->softDeletes();
    });

    $this->postCreate('admin', 'user');
}

private function postCreate(string ...$roles)  {
    foreach ($roles as $role) {
        $model = new Role();
        $model->setAttribute('label', $role);
        $model->save();
    }
} 
```

使用此解决方案，Eloquent 将生成时间戳字段。

编辑：最好使用播种系统来区分数据库结构生成和数据库填充。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-24T10:24:33.843

我尝试了这种 DB 插入方法，但由于它不使用模型，因此它忽略了我在模型上具有的 sluggable 特征。因此，鉴于此表的模型存在，一旦它迁移，我认为该模型将可用于插入数据。我想出了这个：

```
public function up() {
        Schema::create('parent_categories', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->string('name');
            $table->string('slug');
            $table->timestamps();
        });
        ParentCategory::create(
            [
                'id' => 1,
                'name' => 'Occasions',
            ],
        );
    } 
```

这可以正常工作，并且还考虑了我的模型上的 sluggable 特征来自动为该条目生成一个 slug，并且也使用时间戳。注意。添加 ID 不是必需的，但是，在此示例中，我希望为我的类别提供特定的 ID。测试在 Laravel 5.8 上工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-24T15:32:26.760

如果您已经填写了列并添加了新列，或者您想用新的模拟值填写旧列，请执行以下操作：

```
public function up()
{
    DB::table('foydabars')->update(
        array(
            'status' => '0'
        )
    );
} 
```

# vb.net - 多线程 TCP 客户端

> ID：12736123
> 
> 赞同：1
> 
> 时间：2012-10-04T21:18:40.533
> 
> 标签：vb.net, multithreading, sockets, tcp

好的一些背景。我正在编写一个从我的世界服务器获取信息的 TCP 客户端。

我想创建一个同时从 10 个服务器获取信息的客户端。所以为此我必须使用多线程。

这是我到目前为止的代码，但它似乎不起作用。

```
Imports System.Net.Sockets
Imports System.Text
Imports System.IO

Module main
Private socketclient As New System.Net.Sockets.TcpClient()

Sub Main()
    Dim serverList() As String = _
    {"ag1.playeoe.com", "lava-craft.net", "play.diamcraft.com", "mc.ecocitycraft.com", "main.kingscrafters.com", "pvp.cursecraft.net"}

    For i = 0 To serverList.Length - 1 Step 1
        Console.WriteLine("Connecting to " & serverList(i) & ":" & port & "..")
        socketclient.BeginConnect(serverList(i), "25565", New AsyncCallback(AddressOf connect), socketclient)
        Threading.Thread.Sleep(1000)
    Next

    Console.ReadLine()

End Sub

Public Sub connect(ByVal ar As IAsyncResult)
    If socketclient.Connected = True Then
        Console.WriteLine("Connected!")
        Dim stream As NetworkStream = socketclient.GetStream
        Dim sendBytes As [Byte]() = {&HFE}
        Console.WriteLine("Sending Data...")
        stream.Write(sendBytes, 0, sendBytes.Length)

        'copied
        Console.WriteLine("Recieving Response..." & vbNewLine)
        Dim bytes(421) As Byte
        stream.Read(bytes, 0, CInt(421))

        'Trim Bytes
        Dim trimbytes(bytes.Length - 3) As Byte
        Array.Copy(bytes, 3, trimbytes, 0, bytes.Length - 3)

        'Process output
        Dim sb As New System.Text.StringBuilder
        For i As Integer = 1 To 241 Step 2
            If trimbytes(i) <> 0 Then
                sb.Append(ChrW(BitConverter.ToInt16(trimbytes, i)))
            End If
        Next i
        Dim message() As String = sb.ToString.Split("§")

        'Display OutPut
        Console.WriteLine("----------Response Begin----------")
        Console.WriteLine(message(0))
        Console.WriteLine(message(1))
        Console.WriteLine(message(2))
        Console.WriteLine("----------Response End----------" & vbNewLine & vbNewLine)

        socketclient.Close()
    End If
End Sub
End Module 
```

现在这似乎不起作用。我只从第一台服务器获取数据，而不是其他服务器。当我调试它时，它显示套接字没有为其他服务器打开。

这是输出 ![程序的输出](../Images/7dd158ffaa3afe7122f51ed93ed1013f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:17:14.300

您已经将客户端作为状态变量传递给 BeginConnect。您可以通过传递给回调的 IAsyncResult (ar) 访问特定客户端。只需将 state 属性转换为 TcpClient。

* * *

抱歉，这假设您听取了评论者的建议，并为每个服务器地址创建了一个新的客户端对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:26:27.553

无论如何，我都不是 VB 专家，因此您需要使用语法，但这应该可以帮助您入门：

```
Module main

Sub Main()
    Dim serverList() As String = _
    {"ag1.playeoe.com", "lava-craft.net", "play.diamcraft.com", "mc.ecocitycraft.com", "main.kingscrafters.com", "pvp.cursecraft.net"}

    For i = 0 To serverList.Length - 1 Step 1
        Console.WriteLine("Connecting to " & serverList(i) & ":" & port & "..")
        Dim socketclient As New System.Net.Sockets.TcpClient()
        socketclient.BeginConnect(serverList(i), "25565", New AsyncCallback(AddressOf     connect), socketclient)
        Threading.Thread.Sleep(1000)
    Next

    Console.ReadLine()

End Sub

Public Sub connect(ByVal ar As IAsyncResult)
    Dim socketClient As CType(ar.AsyncState, System.Net.Sockets.TcpClient)
    If socketclient.Connected = True Then
    ... // Everything else can stay the same. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T18:00:45.067

您将 beginConnect 函数的参数 PORT 作为字符串而不是整数传递。

隐式转换将 0 作为函数调用中的参数传递。

(int) "25565" = 0

# php - 在我的应用程序日志文件中写入 PHP 日志

> ID：12736125
> 
> 赞同：0
> 
> 时间：2012-10-04T21:18:46.063
> 
> 标签：php, logging, error-handling

我正在开发一个 php 应用程序，并为它创建了日志记录功能。我的意思是每次出现问题时，我都会将其写入日志文件中，因此如果用户报告错误，我可以使用我的日志文件来跟踪该错误。

问题是如果我在生产服务器上上传我的项目，我必须禁用 PHP 的默认错误显示；我只想在我自己的日志文件中记录 php 错误以及网络服务器的“error.log”。有什么办法让我可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:18:55.723

您可以使用自定义错误处理程序在 php.ini 中进行自己的日志记录。这也将允许您登录到数据库（假设错误与数据库无关并且您有有效的连接）或基于错误的平面文件，并设置自定义错误页面。看：

[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:15:13.143

对于 FEATURED USABLE EXCEPTIONS（我正在调用全功能的可用异常，（没有堆栈跟踪））：

如果您是开发人员，请设置为：

```
 define('EXCEPTION_HANDLER_ACTIVE', true); 
```

在生产中，这也应该是正确的，但修改了代码以不向最终用户显示错误。（使用：`error_reporting(0); ini_set('display_errors', false)`在页面顶部））；

首先设置处理异常的main函数：

```
set_error_handler("_handler_exception"); 
```

调用异常处理函数：

```
function _handler_exception($err_severity, $err_msg, $err_filepath, $err_line)
    {
        if (EXCEPTION_HANDLER_ACTIVE == 1)
        {
            $eh = new exceptionhandler;

            $eh->exception_active = true;
            $eh->set_exception_handler_log($err_severity, $err_msg, $err_filepath, $err_line);
        }
        else
        {
            $eh = new exceptionhandler;

            $eh->exception_active = false;
            $eh->set_exception_handler_log($err_severity, $err_msg, $err_filepath, $err_line);
        }
    } 
```

类异常处理程序：

```
class exceptionhandler
{
    public $exception_active = true;

   public function set_exception_handler_log($err_severity, $err_msg, $err_filepath, $err_line)
    {        
    $ret_err_severity = NULL;
    $ret_err_no = NULL;
    $ret_info = NULL;
    $filenameerr = NULL;
    $dbout = NULL;

    switch ($err_severity)
    {
        case E_ERROR:
            $ret_err_severity = "E_ERROR"." [ ".$err_severity." ]";
            $ret_err_no = "1";
            $ret_info = "Fatal run-time errors. These indicate errors that can not be recovered from, such as a memory allocation problem. Execution of the script is halted.";
            $ret_err_msg = $err_msg;
            break;

        case E_STRICT:
            $ret_err_severity = "E_STRICT"." [ ".$err_severity." ]";
            $ret_err_no = "2048";
            $ret_info = "Enable to have PHP suggest changes to your code which will ensure the best interoperability and forward compatibility of your code. ";
            $ret_err_msg = $err_msg;
            break;
        default:
            $ret_err_severity = "CODE"." [ ".$err_severity." ]";
            $ret_err_no = $err_severity;
            $ret_info = "Other error";
            $ret_err_msg = $err_msg;
            break;
    }

    $ef = explode("/", $err_filepath);
    $ec = (count($ef) - 1);
    $filenameerr = $ef[$ec];

    $backtrace = debug_backtrace();

    if (!isset($doc_root)) {
        $doc_root = str_replace('\\', '/', $_SERVER['DOCUMENT_ROOT']);
    }

    $debug_backtrace_parse = print_r(debug_backtrace(), true);
    $debug_backtrace2 = str_replace($err_msg, '<b>'.$err_msg.'</b>', $debug_backtrace_parse);
    $debug_backtrace = str_replace($err_filepath, '<b>'.$err_filepath.'</b>', $debug_backtrace2);

    $line = (isset($backtrace[1]['line'])) ? htmlspecialchars($backtrace[1]['line']) : '';
    $file = (isset($backtrace[1]['file'])) ? htmlspecialchars(str_replace(array('\\', $doc_root), array('/', ''), $backtrace[1]['file'])) : '';
    $class = !empty($backtrace[2]['class']) ? htmlspecialchars($backtrace[2]['class']) . '::' : '';
    $function = !empty($backtrace[2]['function']) ? htmlspecialchars($backtrace[2]['function']) . '() ' : '';
    $dbout = "<pre>$class$function =&gt;$file #$line</b><pre>";

    $memory = memory_get_usage()/1024/1024;

    if ($this->exception_active == true)
    {
        $source_highlight = $this->source_highlight($file, $backtrace);

        ob_start();
        include_once(exception.tpl);
        $buffer = ob_get_contents();
        ob_end_clean();
        echo $buffer;
        exit(-1);
    }
    } 
```

异常.tpl

```
<html>
    <head>
    <title><?php echo $ret_err_severity; ?> | <?php echo $filenameerr; ?></title>
    <style type="text/css">
        div#errorhandlerexception
        {
            border: 1px solid #ff0000;
            background-color: #ff9999;
            width: 96%;
            padding: 10px;
            color: #000;
            font-family: sans-serif;
            font-size: 10px;
            margin: 0 auto;
        }
        div#errorhandlerexception h2
        {
            border-bottom: 1px solid #fff;
            color: #ffffff;
        }
        div#errorhandlerexception td
        {
            background-color: #ffcccc;
            width: 100%;
            padding: 3px;
        }
        div#errorhandlerexception .main
        {
            width: 100px;
            height: 30px;
        }
        div#errorhandlerexception
        {
            margin-bottom: 40px;
        }
        .linenum
        {
            text-align:right;
            background:#FDECE1;
            border:1px solid #cc6666;
            padding:0px 1px 0px 9px;
            float:left;
            width:25px;
            margin:3px 0px 30px 0px;
            font-family: Courier New, Courier;
            font-size: 11px;
        }
        .code
        {
            font-family:Courier New, Courier;
            font-size: 11px;
            float: left;
            width: 100%;
        }
        .linetext
        {
            width:95%;
            text-align:left;
            background: #fff;
            border: 1px solid #cc6666;
            border-left:0px;
            padding:0px 1px 0px 8px;
            font-family: Courier New, Courier;
            float:left;
            margin:3px 0px 30px 0px;
            font-size: 11px;
        }
        br.clear
        {
            font-family:Courier New, Courier;
            clear:both;
            font-size: 11px;
        }
        #exception_selected_block
        {
            background-color: #ffff00;
        }
        div.exception_filename
        {
            border-left: 19px solid #AA7777;
            border-top: 3px solid #AA7777;
            color: #000000;
            float: left;
            font-weight: bold;
            padding: 6px;
            width: 98%;
        }
    </style>
    </head>

<body>
<div id="errorhandlerexception"><?php #echo $msg; ?>
<h2>EXCEPTION ERROR HANDLER</h2>
<table>
    <tr><td class="main">Status:</td><td><?php echo $ret_err_severity; echo " #".$err_severity; ?></td></tr>
    <tr><td class="main">Debug stack:</td><td><?php echo $dbout; ?></td></tr>
    <tr><td class="main">Code:</td><td><?php echo $ret_err_no; ?></td></tr>
    <tr><td class="main">Message:</td><td><?php echo $ret_err_msg; ?></td></tr>
    <tr><td class="main">Info:</td><td><?php echo $ret_info; ?></td></tr>
    <tr><td class="main">File:</td><td><?php echo $filenameerr; ?><br><?php echo $err_filepath; ?></td></tr>
    <tr><td class="main">Line:</td><td><?php echo $err_line; ?></td></tr>
    <tr><td class="main" colspan="2"><?php echo $source_highlight; ?></td></tr>
    <tr><td class="main">Debug backtrace:</td><td><pre><?php echo $debug_backtrace; ?></pre></td></tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:08:18.727

您可以使用 set_error_handler 定义您自己的函数，在出错时调用该函数。

```
<?php
//error handler function
function customError($errno, $errstr, $errfile, $errline)
  {
  echo "<b>Custom error:</b> [$errno] $errstr<br />";
  echo " Error on line $errline in $errfile<br />";
  echo "Ending Script";
  die();

//set error handler
set_error_handler("customError");

$test=2;

//trigger error
if ($test>1)
  {
  trigger_error("A custom error has been triggered");
  }
?> 
```

参考：[http ://www.w3schools.com/php/func_error_set_error_handler.asp](http://www.w3schools.com/php/func_error_set_error_handler.asp)

# c - C中的3d连续数组问题

> ID：12736128
> 
> 赞同：0
> 
> 时间：2012-10-04T21:19:10.223
> 
> 标签：c, arrays, multidimensional-array, malloc

我需要在 C 中构建两个 3D 连续数组（注意`x0`和`x`）。尺寸必须是`x[size_tot_y][size_tot_x][size_tot_z]`和。`x0[size_tot_y][size_tot_x][size_tot_z]`这是我的代码：

```
 double*** x;
  double** x_val2;

  double*** x0;
  double** x0_val2;

  x0 = malloc(size_tot_y*sizeof(double**));
  x0_val2 = malloc(size_tot_x*size_tot_y*size_tot_z*sizeof(double*));

  x = malloc(size_tot_y*sizeof(double**));
  x_val2 = malloc(size_tot_x*size_tot_y*size_tot_z*sizeof(double*));

  for(j=0;j<=size_tot_y-1;j++) {    
      x0[j] = &x0_val2[j*size_tot_x*size_tot_z];
      x[j] = &x_val2[j*size_tot_x*size_tot_z];
      }

  for(i=0;i<=size_tot_y-1;i++) {
      for(j=0;j<=size_tot_x-1;j++) {
          x0[i][j] = malloc(size_tot_z*sizeof(double));
      x[i][j] = malloc(size_tot_z*sizeof(double));
      }
     }

  for(i=0;i<=size_tot_y-1;i++) {
      for(j=0;j<=size_tot_x-1;j++) {
          x0[i][j] = x0_val2[i*j*size_tot_z];
      x[i][j] = x_val2[i*j*size_tot_z];
      }
     } 
```

你能看到错误在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:38:47.803

你的代码对我来说似乎太复杂了。做就是了：

```
 double ***x;
 x = malloc(size_tot_y * sizeof(*x));
 for (i = 0; i < size_tot_y; i++) {
   x[i] = malloc(size_tot_x * sizeof(**x));
   for (j = 0; j < size_tot_x; j++) {
     x[i][j] = malloc(size_tot_z * sizeof(***x));
   }
 } 
```

对`x0`. 将其包装在一个例程中，这样您就不需要两次编写相同的代码。

**编辑**

对于连续数组，请执行以下操作：

```
 double *storage = malloc(size_tot_x * size_tot_y * size_tot_z * sizeof(*storage));
 double *alloc = storage;
 double ***x;
 x = malloc(size_tot_y * sizeof(*x));
 for (i = 0; i < size_tot_y; i++) {
   x[i] = malloc(size_tot_x * sizeof(**x));
   for (j = 0; j < size_tot_x; j++) {
     x[i][j] = alloc;
     alloc += size_tot_z;
   }
 } 
```

那是如果你真的想要指针。如果没有，只需分配所有内存并自己进行索引：

```
double *storage = malloc(size_tot_x * size_tot_y * size_tot_z * sizeof(*storage));
double get(const double *storage, int x, int y, int z) {
    return storage[(y * size_tot_x + x) * size_tot_z + z];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:20:37.760

我需要 MPI 代码的 3d 连续数组，我在进程之间交换 2d 数组。为此，我使用需要连续数组的 MPI_Sendrecv 例程。

@Keith，您的解决方案似乎不起作用。

例如，在此代码的 2D 版本中，我以`x0`这种方式创建 2D 连续数组：

```
 x0 = malloc(size_tot_y*sizeof(double*));
  x0_vals = malloc(size_tot_x*size_tot_y*sizeof(double));

  for(j=0;j<=size_tot_y-1;j++) {
    x0[j] = &x0_vals[j*size_tot_x];
  } 
```

3D 的等价物是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T21:26:44.860

我大约一年前才开始使用 C，而你对这个人一点帮助也没有。

我还想使用连续的内存块来制作张量，这是奇怪的多维对象。想象一下打印在立方体的 3 个正交面上的三个 3x3 矩阵。

C 中的一个大问题是，当你制作一个 3D 数组时，arr[number][column][row]，这将是“column x row”矩阵的“number”，内存块是连续的，但它没有很好的排序.

你有没有想过为什么要初始化一个说 arr[2][4][4] 的数组

```
int arr[2][4][4]=   
        {
            {
            {1, 2, 3, 4},
            {5, 6, 7, 8},
            {9, 10, 11, 12},
            {13, 14, 15, 16}
            },
            {
            {1, 2, 3, 4},
            {5, 6, 7, 8},
            {9, 10, 11, 12},
            {13, 14, 15, 16}
            },
        }; 
```

但是我们都知道 C 从零开始计数，所以我们将矩阵嵌入到一个更大的矩阵中，周围有垃圾数据，第三个矩阵完全是垃圾数据。这是我打印垃圾数据的方式：

```
#define COMPLEX 2
#define ROW 2
#define COLUMN 2
void L_print(int u[COMPLEX][ROW][COLUMN])
{
    int i,j,k;
    for(i=0;i<=COMPLEX;i++)
    {
        for(j=0;j<=ROW;j++)
        {
            for(k=0;k<=COLUMN;k++)
            {
                printf("%d ",u[i][j][k]);
            }
            printf("\n");
        }
        printf("\n");
    }
} 
```

所以你得到了嵌入垃圾矩阵的正确数据。C 似乎用随机垃圾数据填充垃圾数据槽，它们并不全是 '\0' 或类似的东西。

所以我想使用指针来修改矩阵大小的运行时，因此我必须基于指针为我的操作做一个同构。

现在，当我声明一个指针并将其指向我的矩阵的第一个条目时：

```
ptr=&a[0][0][0]; 
```

然后我打印

```
 L_ptr_print(ptr,(2*4*4)); 
```

这将吐出正确的矩阵条目，在这种情况下是两个 4x4 矩阵。

但是我们都知道数组从零开始计数，因此数组 arr[2][4][4] 实际上有 3*5*5 个 sizeof(int) 大的“槽”。所以让我们打印插槽！

```
L_ptr_print(ptr,(3*5*5)); 
```

您将得到的是前 32 个条目是正确排序的矩阵条目。接下来的 43 个条目是完全打印出矩阵 arr[2][4][4] 时得到的垃圾数据。

因此，我已经确定，制作 3D 动态分配的连续数组的最简单和最优雅的方法不是一开始就不让它成为 3D。

只需 malloc 指针并使其大小等于数组元素的数量。所以你会 malloc 一个 32*sizeof(int) 指针：

```
int* ptr;
ptr=(int*)malloc(32*sizeof(int)); 
```

然后像这样填充数组的每个元素，或者你想做什么。

```
for(i=0;i<31;i++)
{
    *(ptr+i)=i+1;
} 
```

这可以打印出 32 个整数，而且只有 32*sizeof(int) 个字节。这消除了对双指针和三指针的需要。

或者，如果您已经有一个矩阵，您总是可以手动将单个指针指向每个块，然后您不必担心清除内存，因为您的指针不占用内存，数组占用，并且指针指向到数组。但是你不能在运行时修改数组的大小。

# asp.net-mvc - CKeditor Upload Image 仅当我将其部署到 IIS7.5 服务器时不起作用

> ID：12736134
> 
> 赞同：1
> 
> 时间：2012-10-04T21:19:31.267
> 
> 标签：asp.net-mvc, upload, iis-7.5, ckeditor

我目前正在构建一个 ASP.Net MVC3 网站并使用 ckeditor 作为我的 wsywig。从 Visual Studio 部署服务器时，一切正常，但是当我出于某种原因在 IIS7.5 上设置网站时，发布的文件一直返回为空。

这是 UploadController 文件中的代码：

```
public ActionResult Upload(HttpPostedFileBase upload, string CKEditorFuncNum, string CKEditor, string langCode)
    {
        string fileName = upload.FileName;

        string basePath = Server.MapPath("~/Uploads");
        upload.SaveAs(basePath + "\\" + fileName);

        return View();
    } 
```

**HttpPostedFileBase 上传一直为空。**

这是 ckeditor config.js 文件中的代码：

```
 CKEDITOR.editorConfig = function( config )
{
    config.filebrowserBrowseUrl = "/Admin/Uploads/Browse";
    config.filebrowserWindowWidth = 500;
    config.filebrowserWindowHeight = 650;
    config.filebrowserUploadUrl = "/Admin/Uploads/Upload";
}; 
```

这是堆栈跟踪：

```
 System.NullReferenceException: Object reference not set to an instance of an object.
   at SOSWebCMS.Areas.Admin.Controllers.UploadsController.Upload(HttpPostedFileBase upload, String CKEditorFuncNum, String CKEditor, String langCode) in **C:\Documents\SOSWebCMS\Areas\Admin\Controllers\UploadsController.cs:line 31**
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我确实注意到的一件事是控制器操作的路径是我的本地主机的路径，而不是我的实时环境中的正确路径。考虑到它似乎确实引用了文件中的正确行，不确定这是否有任何限制。

我已经给了 MachineName\IIS_IUSRS 所有适当的权限，所以我知道这不是权限问题。

如果您需要我发布其他任何内容，请告诉我。

# apache-flex - 如何在 flex mx 文本区域中滑动长文本

> ID：12736140
> 
> 赞同：0
> 
> 时间：2012-10-04T21:19:42.373
> 
> 标签：apache-flex, pagination, textarea, flex-mx

我有一个长字符串（~10k 行），我正在尝试做一些类似于分页的事情：将文本拆分为具有索引的部分，并将该区域中的文本设置为当前索引。

例如，当设置了前 100 行并且滚动达到最大值时，将新部分设置到该区域中。

我的问题是：如何防止滚动条的缩略图改变其大小。

我想在文本区域中有 100 行，但滑块应该*认为*有 ~10k 行。

# java - 使用列表的线程和并发修改异常

> ID：12736142
> 
> 赞同：1
> 
> 时间：2012-10-04T21:19:50.533
> 
> 标签：java, multithreading, exception, concurrency

我知道这是一个愚蠢的问题，但不知道如何解决这个问题，我以前没有太多使用线程的经验。

下面应该首先创建一个计时器，它将每 10 秒执行一次命令 output.write(mylist)，它将简单地输出 mylist 的内容。

其次，它循环遍历我拥有的大约 3 个列表，并为每个列表创建一个线程，该线程将继续循环获取列表中的下一个单词。请注意：这是精简版，并不完整，因此请不要评论数组列表/列表，而是评论错误本身。

有一个并发修改异常经常发生，但在它尝试做的时候并不总是发生`output.write()`。我猜这是因为其他线程之一当前正在保存一些东西`mylist`？我将如何解决这个问题？

```
 Runnable timer = new Runnable() {
        public void run() {
            try {
                while (true) {
                    Thread.sleep(10000);
                    output.write(mylist);
                }
            } catch (InterruptedException iex) {}
        }
    };
    Thread timerThread = new Thread(timer);
    timerThread.start();

    for (final ValueList item : list) {

        Runnable r = new Runnable() {
            public void run() {
                try {
                    while (true) {

                        char curr = item.getNext();

                         mylist.addWord(curr);
                    }
                } catch (InterruptedException iex) {}
            }
        };

        Thread thr = new Thread(r);
        thr.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T21:25:36.977

> 有一个并发修改异常经常发生，但不是所有的时间当它试图做`output.write`...

问题是（我假设）该`output.write(...)`方法`myList`在另一个线程调用`myList.addWord(curr);`. `myList`除非是并发集合，否则这是不允许的。

> 我将如何解决这个问题？

您需要在`myList`每次访问它时进行同步——在这种情况下，当您输出它或添加一个单词时。

```
 synchronized (myList) {
      output.write(mylist);
  }
  ...

  synchronized (myList) {
      myList.addWord(curr);
 } 
```

在这种情况下，因为`output.write(mylist)`可能是遍历列表，所以不能使用该`Collections.synchronizedList(...)`方法，因为迭代器需要由调用者同步。

如果这是一种被多次调用的高性能方法，那么您也可以使用 a`ConcurrentLinkedQueue`但那是一个队列，而不是一个列表。 `ConcurrentSkipList`是另一种选择，尽管这是一个较重的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T21:13:58.543

就像你说的那样，发生这种情况是因为 Java 迭代器是快速失败的，如果集合被同时修改，它将失败。一种简单的解决方案是使用 保护对列表的访问`synchronized`，但这会导致线程停止，等待输出完成。

一种可能更聪明的解决方案是使用 List 的一些并发实现。由于您的列表经常被修改，`CopyOnWriteArrayList`因此不是您想要的解决方案。如果不需要太多修改，您可以使用 a`ConcurrentLinkedDeque`或 a `LinkedBlockingDeque`，它们由链表支持，并且**不**实现`List`，因此它们没有`get`方法（您似乎没有使用）。无论如何，这些集合返回的迭代器不是快速失败的，而是弱一致的（这意味着它们将“看到”集合在创建迭代器时的样子，或者反映一些后来的修改）。

另一种解决方案可能是使用并发集合 ( `ConcurrentLinkedDeque`) 和 ReadWriteLock，但以更原始的方式。您的编写器线程将使用读锁（因此能够同时写入）。您的打印机线程将获取写锁（从而暂时阻塞其他线程），将集合的副本复制到非并发集合中，释放写锁并最终打印其本地副本。

一个绝对更聪明（并且可能更快）的选择是为每个线程分配一个不同的非并发列表。所以你会有一个非并发列表的列表，每个列表都分配给一个线程。完成所有线程后，您可以将所有列表合并为一个。此外，每个列表都应该受到锁的保护。当您的打印机线程想要打印时，它会遍历列表，一次锁定一个，制作一份副本，释放锁定，然后打印它。

我坚持制作副本的原因是它比打印 I/O 快得多。如果您的工作线程必须等待打印机线程打印列表，那么您的所有计算都会变慢。

PS：即使你能看到的唯一错误是异常，`ArrayList`s 也不是线程安全的。如果您从多个线程将元素添加到同一个列表中，您将丢失一些元素（除非发生一些更奇怪的异常）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T20:36:40.627

或者只是增加`synchronized`减速`run()`。或者将方法的内容包含在一个`synchronized{...}`块中，只要睡眠/等待在“同步区域”中，即一次只允许一个线程操作。

任何阅读此内容的人都应该阅读：
[http](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)
://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html 这将是对时间的合理投资；）

# scala - 通过将发送和接收拆分为承诺和未来而不阻塞，在 Scala 中实现 S3 并发

> ID：12736143
> 
> 赞同：2
> 
> 时间：2012-10-04T21:19:57.273
> 
> 标签：scala, concurrency, amazon-s3, akka

什么是适合执行大规模并发 S3 调用的 scala 库，我在哪里可以找到显示如何使用该库的示例代码？我已经搜索和试验了好几天，但没有找到足够的解决方案。

许多库将 S3 调用实现为离散阻塞调用。其他人将它们实现为线程阻塞调用。一些暗示支持承诺/未来的潜力，但给出的例子不足。

简化问题：如何向 S3 发送 URL、标头和正文并立即返回，当 S3 响应时，我想在上下文中获取响应。

完整问题：我如何构造 1000 个 URL、标头和正文，发送它们并立即返回，当每个响应到达时，将响应与正确的接收者连接起来。

在我尝试过的库中（并非详尽无遗）如下：

*   派遣（仍然是最有可能的候选人）
*   akka.dispatch
*   喷气机3t
*   s3lib

欢迎任何回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:18:42.603

查看基于 NIO 构建的[https://github.com/dispatch/reboot 。](https://github.com/dispatch/reboot)

要使用它，你可以做一些简单的事情

```
import dispatch._

def foo = {
  val svc = url("http://api.hostip.info/country.php")
  val country = Http(svc OK as.String)
  val length = for (c <- country) yield c.length
} 
```

您可以在并行集合中执行此操作，因为这些都承诺解除阻塞.. 例如要并行执行 1000 次，请输入以下内容

```
(1 to 1000).par.foreach(foo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T12:12:09.983

从第一眼看代码 Apache Async HttpClient 是真正的异步

[http://hc.apache.org/httpcomponents-asyncclient-dev/examples.html](http://hc.apache.org/httpcomponents-asyncclient-dev/examples.html)

您可以编写一个简单的包装器，从完成处理程序创建一个 Scala 未来

您还可以查看 Grizzly/Netty 支持的 http 客户端

# ruby-on-rails - 父控制器导轨之外的部分？

> ID：12736148
> 
> 赞同：0
> 
> 时间：2012-10-04T21:20:24.517
> 
> 标签：ruby-on-rails, ruby

对于如何为用户解决部分问题，我真的很困惑。我有一个应用程序，用户有书，每本书都有很多章节。所以用户 A 会创建一本书和章节，并且 URL 看起来像 site.com/book/1/chapter/1。我想做的是当用户登录时我想向用户显示最近的章节或最近的学分

**内容/home.html.erb**

```
<% if signed_in? %>
  <%= render 'dashboard/home'%>
<% else %>
  <%= render 'homepage'%>
<% end %> 
```

**块/_user_chapters.html.erb**

```
<% @user.chapters.each do |chapter| %>
  <%= div_for chapter do  %>
    <tr>
      <td><%= chapter.title %></td>
      <td><%= chapter.body %></td>
      <td><%= link_to 'View Chapter', book_chapter_path %></td>
    </tr>
  </table>
  <% end %>
<% end %> 
```

**仪表板/_home.html.erb**

```
<%= content_tag :h1, "Recent Chapters" %>
<%= render 'blocks/user_chapters', :locals => {:book => @book} %> 
```

当我从上面重新加载页面时，我得到了***book:0x007fd996697630 的未定义方法“章节”***。即使我进入 book/1/，我仍然看不到用户最近的章节。

如何在我的 Rails 应用程序中的任何位置访问登录用户最近的章节或书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:38:27.953

从您的代码看来，您有部分内容，`blocks/_user_chapters.html.erb`但您正试图通过`render 'shared/user_chapters'`. 您需要将 '_user_chapters.html.erb' 移入`app/views/shared`才能使用它。

# jquery - 当用户在 jQuery 中调整网站时更改手风琴元素的宽度

> ID：12736149
> 
> 赞同：0
> 
> 时间：2012-10-04T21:20:24.183
> 
> 标签：jquery, width, jquery-ui-accordion

我想将宽度从 % 更改为元素手风琴的宽度 - 244px（手风琴右侧元素的总大小）。

```
 $(function() {
        $('.accordion > li').hoverIntent(
                function () {
                    var $this = $(this);

              >>>  $this.stop().animate({'width':'80%'},500);   <<<

                    $('.heading',$this).stop(true,true).fadeOut();
                    $('.bgDescription',$this).stop(true,true).slideDown(500);
                    $('.description',$this).stop(true,true).fadeIn();
                },
                function () {
                    var $this = $(this);
                    $this.stop().animate({'width':'5em'},1000);
                    $('.heading',$this).stop(true,true).fadeIn();
                    $('.description',$this).stop(true,true).fadeOut(500);
                    $('.bgDescription',$this).stop(true,true).slideUp(700);
                }
        );
    }); 
```

我刚在想：

```
var accordwidth = $("accordion").width() -244;
$this.stop().animate({'width':accordwidth },500); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:06:59.643

```
<script type="text/javascript">
    $(function() {
        $('.accordion > li').hoverIntent(
                function () {
                    var $this = $(this);
                    var wide1 = $('body').width();
                    var wide2 = $('li.bg1').width()*3;
                    var wide3 = wide1 - wide2 - 4;
                    $this.stop().animate({'width':wide3},500);
                    $('.heading',$this).stop(true,true).hide();
                      $('.bgDescription',$this).stop(true,true).slideDown(500);
                    $('.description',$this).stop(true,true).fadeIn();
                },
                function () {
                    var $this = $(this);
                    $this.stop().animate({'width':'5em'},500);
                    $('.heading',$this).stop(true,true).fadeIn();
                    $('.description',$this).stop(true,true).fadeOut(500);
                    $('.bgDescription',$this).stop(true,true).slideUp(700);
                }
        );
    });
</script> 
```

我相信它可能是一种更好的语法，但它可以工作。wide1 是手风琴的父元素，wide2 是手风琴的三个元素占用的空间（4 个元素），wide3 是我从正文中减去另外三个元素占用的空间 + 这些元素的边框占用的边框后的可用空间元素。我为像我这样不懂 javascript 的人提供了这个解决方案，并花了一个小时寻找解决这个特定问题的方法。

# javascript - 从三元运算符返回的函数中丢失上下文

> ID：12736153
> 
> 赞同：2
> 
> 时间：2012-10-04T21:21:02.140
> 
> 标签：javascript, ternary-operator

我知道如何解决这个特殊问题，但我想知道它为什么会发生。基本上，当我尝试调用这样的函数时：

```
(callFoo ? this.foo : this.bar)(); 
```

它调用了正确的 foo 函数，但在 foo 内部，`this`是全局的窗口对象，而不是我期望的对象。

我希望这会做同样的事情，但它不会：

```
(this.foo)(); 
```

上面的代码调用了正确的函数并维护了正确的上下文（`this`这是我所期望的）。

[这是一个 jsfiddle 供您使用。](http://jsfiddle.net/lbstr/RKcMG/)

有人可以解释发生了什么吗？我知道如何解决这个问题（我什至不喜欢这种语法），但我仍然想知道`this`如果你从三元运算符返回一个函数，为什么会变成窗口。

* * *

**编辑**
我想完善我的问题：这对我来说很有意义：

```
(callFoo ? this.foo : this.bar)(); 
```

相当于：

```
var f = (callFoo ? this.foo : this.bar);
f(); 
```

这对我来说很有意义，为什么`this`会成为该功能中的窗口。

为什么这里没有发生同样的事情：

```
(this.foo)(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:23:26.007

要拥有正确的上下文调用对象，请将其称为

```
this[ callFoo ? 'foo' : 'bar' ](); 
```

always的值`this`取决于*您*调用函数的方式。您基本上是在调用该函数，就像

```
fnc(); 
```

这导致`this`始终是*全局*/*窗口*（在非严格模式下）。您需要将函数作为*方法*/*属性*调用，例如`this.fnc()`. 在这种情况下，`this`将默认引用调用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:31:36.123

这个表达式在逻辑上等价于这样的：

```
var tempFun;
if(callFoo) {
    tempFun = this.foo;
} else {
    tempFun = this.bar;
}
tempFun(); 
```

这是失去`this`参考的经典例子。正如您所说，您知道解决方法/解决方案：

```
tempFun.call(this); 
```

或者：

```
(callFoo ? this.foo : this.bar).call(this) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:54:26.417

产生差异的原因：

```
var obj = new (function MyConstructor(){
    this.getConstructor = function(){ return this.constructor.name; }
}); 
```

当任何运算符对操作数进行操作时，结果的工作方式与函数的返回值非常相似。传递的对象方法不再被视为绑定到对象。

```
(function(){ return obj.getConstructor; })(); //'Window' 
```

但是，如果除了属性访问之外在括号内没有发生任何事情，则括号会被简单地忽略，而不是被视为运算符本身。所以：

```
(obj.getConstructor)(); //'MyConstructor' 
```

真的只是相当于：

```
obj.getConstructor(); 
```

但是添加任何类型的有效操作都会导致该方法：

```
(false || obj.getConstructor)(); //'Window' 
```

并且 obj.getConstructor 被视为已传递的方法，而不是通过“。”绑定到对象的方法。协会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:30:22.347

当您使用三元运算符时，您是在两个函数之间进行选择。这类似于执行以下操作：

```
var func = this.foo;
foo(); // Inside this call, "this" will now refer to the global context
       // -- "window" in a browser environment 
```

this（即“this”）是 JavaScript 中最棘手的事情之一，并且已经写了很多关于它的文章。

当你在“this.foo”周围加上括号时，这个问题也不会发生，这有点令人惊讶。但这不是你的问题:-)

# c++ - 简单程序生成的 2D 城市的算法？

> ID：12736154
> 
> 赞同：0
> 
> 时间：2012-10-04T21:21:04.440
> 
> 标签：c++, algorithm

我对程序生成非常感兴趣，并且想知道可以使用哪些类型的算法来创建一个简单的城市。

只是主要街道延伸成几条较小的街道，空旷的地形填补了大小不一的空隙。

如果有人能指出这种算法的正确方向，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:05:58.700

老实说，这可能会变得非常复杂或非常简单。

如果我只将图像作为参考，那么这个算法似乎在某种程度上模仿了树的视觉结构。您有大街道，较小的街道位于其左侧或右侧。唯一重要的部分是定义该算法的深度（基于图像 3）并定义新的小街可以出现的最大/最小距离。这个算法也应该反过来工作，以便小街道可以连接到更大的街道。非常简化[的 Lindenmayer 系统](http://en.wikipedia.org/wiki/L-system)。

然而，这个想法在很多方面都存在缺陷。实际上，在许多情况下，您通常不仅有一条向左或向右的小街，而且还有一条小街道穿过一条较大的街道。有时 1 级街道也可以穿过 3 级街道而与 2 级街道没有连接，您必须回溯所有之前的街道。街道并不总是有 90 度转弯，这是最大的问题。

就像@jakev 已经提到的那样，网格方法也是可能的（许多城市都是这样设计的）。

# spring - restlet spring jpa

> ID：12736155
> 
> 赞同：1
> 
> 时间：2012-10-04T21:21:04.293
> 
> 标签：spring, jpa-2.0, restlet-2.0

Jersey-Spring-JPA 似乎存在一些已知问题。有谁知道演示 Restlet-Spring-JPA 的任何完全实现的简单示例？最好使用hibernate、glassfish和mysql。

# tomcat - 使用 play2war 在 tomcat 上运行 play 2 应用程序

> ID：12736162
> 
> 赞同：0
> 
> 时间：2012-10-04T21:21:14.303
> 
> 标签：tomcat, hosting, playframework-2.0, war, reverse-proxy

我有一个从 play 命令行调用运行良好的项目。我想托管这个应用程序。我发现 play2war 会创建一个战争文件。为了在 apache 中运行它，我将战争重命名为 root.war 并部署。当我转到 http:localhost:8080 空白页时。我尝试按照播放网站上的说明进行操作，看来我还需要从命令行运行游戏。我不确定反向代理究竟如何工作，因为它不告诉编辑哪个配置文件。

使用 play2war 战争文件，我还需要这样做吗？有没有办法让这场战争托管在常规提供商中或在我安装的 tomcat 中运行。我是否需要提供 web.xml 和清单，这些有必要吗？

如果可能的话，有人可以提供步骤列表吗？我迷路了——我对开发过程的所有兴奋都随着部署噩梦而烟消云散。

与其他托管相比，像 Heroku 这样的本地托管的所有选项都相当昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:39:21.860

您必须以某种方式部署您的应用程序。有不同的方法可以做到这一点。

*   命令行。您只需使用 stage/package 或 start 命令启动它。查看[该部分的文档](http://www.playframework.org/documentation/2.0.4/Production)。
*   将您的文件打包为 WAR 并将该战争部署到应用程序服务器中。以 Tomcat 为例。

一旦你的应用程序运行起来，它应该可以通过它的传统端口访问。（tomcat 为 8080，命令行为 9000）

之后，您可以添加反向代理。反向代理的全部意义在于监听一个公共端口，比如 80 并将所有请求转发到另一个端口。比如说9000。

作为反向代理，您也可以使用不同的服务器：

*   [Apache](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)最常见的服务器。它有一个很棒的生态系统，但性能不高。
*   [nginx](http://wiki.nginx.org/HttpProxyModule)， lighttpd 等作为反向代理更好。试一试。

# php - PHP Mass mailer 不发送所有邮件

> ID：12736166
> 
> 赞同：1
> 
> 时间：2012-10-04T21:21:33.527
> 
> 标签：php, email

所以我正在做的是为我编写一个脚本来亲自对我的软件接收电子邮件的能力进行压力测试（我正在开发一个简单的电子邮件客户端）。基本上，它应该发送尽可能多的电子邮件，就像我告诉它发送到我的电子邮件地址一样。这是代码：

```
$i=0; 
while ($i < $numberofemails) { 
        $m = rand(10e16, 10e20);

    $n = base_convert($m, 10, 36);

$subject = 'Test';

mail("myemail@gmail.com", $subject, $message, null, "-f" . $n . "@mydomain.com"); 
$i++; 
} 
```

该脚本有效，但它不会发送我告诉它的所有电子邮件（或至少收到所有电子邮件。）它通常只收到不到一半，然后有时它会收到一些，然后几个小时后随机收到还有几个。知道为什么会这样吗？我也用 gmail 和 AOL 试过。有没有更好的方法为此发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:25:34.153

脚本中没有任何内容可以提供诊断问题所需的信息。您必须查看流量或查看邮件日志。

请注意，许多目的地会限制尝试发送给他们的人，包括 gmail、aol 和许多其他人。如果您突然开始在短时间内发送比平时多得多的电子邮件，那么他们会让您在发送更多电子邮件之前等待。实际限制通常是秘密的，并且似乎因您的行为而异。

# javascript - 快速正则表达式到 Javascript 中的正则表达式对象构造函数

> ID：12736167
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:21:35.297
> 
> 标签：javascript, regex

> **可能重复：**
> [来自字符串的javascript新正则表达式](https://stackoverflow.com/questions/5172183/javascript-new-regexp-from-string)

我有一个正则表达式测试：

```
// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value); 
```

它工作正常。我需要在模式中添加一个用户定义的参数，所以我尝试了：

```
var exp = new RegExp("^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$","i");
exp.test(value); 
```

不加参数会报错：

```
SyntaxError: invalid quantifier 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:27:49.610

如果使用字符串创建 RegExp 对象，则必须双重转义反斜杠。基本上，你需要把每一个都`\`拿走`\\`。

# python - Gevent greenlet 向父级冒泡异常

> ID：12736172
> 
> 赞同：4
> 
> 时间：2012-10-04T21:21:47.970
> 
> 标签：python, exception-handling, gevent, greenlets

在使用 gevent 时，每当子 greenlet 抛出异常时，我希望它冒泡到父级（理想情况下让父级抛出异常）。在 greenlets 的文档中，它说这是自动完成的，但在 gevent 中似乎并非如此。

如何在 gevent 中冒泡异常？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:22:38.603

如果您`link()`将子greenlet 传递给父greenlet，那么`LinkedExited`当子退出时将在父greenlet 中提出。此时，您可以检查`exception`子 greenlet 的属性。它将包含在孩子中引发的异常实例（如果孩子以错误结束）。现在您有了异常，您可以立即在父级中处理它，或者您可以在父级中引发它。

# multipart - 将文件上传到 nancy 而无需通过流搜索

> ID：12736179
> 
> 赞同：2
> 
> 时间：2012-10-04T21:22:17.077
> 
> 标签：multipart, multipartform-data, restsharp, nancy

我正在尝试使用 RestSharp 将文件上传到 nancy。我使用 request.AddFile() 使用多部分请求将流上传到 nancy 服务器。

问题是，当 Nancy 解析请求以将其传递给它在整个流中寻找的模块时，违背了流的目的（我想将文件直接流式传输到磁盘）。

我浏览了 nancy 源代码，发现它在哪里这样做，

在[`HttpMultipart.cs`](https://github.com/NancyFx/Nancy/blob/master/src/Nancy/HttpMultipart.cs)它尝试使用`GetBoundarySubStreams()`which 调用获取所有子流，`GetNextBoundaryPosition()`并且该方法基本上寻找流。

我想知道我是否做错了什么？也许我没有配置什么？有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-22T17:42:08.523

我知道这是一个古老的问题，但你可以试试这个：

```
var fileStream = new FileStream(filePath, FileMode.Create);
Request.Body.CopyTo(fileStream); 
```

AFAIK，这似乎将文件流直接流式传输到磁盘。

# jquery - JQuery Mobile - 在显示页面之前调整表单元素的大小

> ID：12736184
> 
> 赞同：1
> 
> 时间：2012-10-04T21:22:23.680
> 
> 标签：jquery, css, jquery-mobile

我正在调整 JQM 控制按钮组的大小以适应其包含的 DIV 的宽度。

但是，我想在用户看到任何东西之前执行此操作。目前，我只能在页面显示后才能完成这项工作，这就像一个小故障。

这是我的调整大小代码：

```
var myWidth = $(window).width() - 1.3*($(window).width() - $('#eventForm').width());
$('.eStatusLabel').css("width", myWidth/3); 
```

以下是我尝试用来触发此事件的函数，但 #eventForm 宽度始终为 0：

```
$("#myPage").live('pageinit',function(){ //Resize});
$("#myPage").live('pageload',function(){ //Resize});
$("#myPage").live('pagebeforeshow',function(){ //Resize}); 
```

有没有办法在显示之前获取表单的大小？是否有另一种方法可以在不包含 data-role="page" 填充的情况下获取内容页面的内部宽度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:21:00.527

唯一可行的方法是覆盖默认的 jquery-mobile css。您可以在页面加载后将 id 分配给父元素，并在页面加载后以 id 开头定义宽度和其他属性。这个概念就像通过 ajax 加载 html 内容并将 css 应用于该 html。

# php - jquery在两个视图之间切换

> ID：12736185
> 
> 赞同：0
> 
> 时间：2012-10-04T21:22:27.030
> 
> 标签：php, javascript, jquery

我有两个 div 的 id`today`和`tomorrow`. 由于只能显示其中一个，我编写了一个在这两者之间切换的 javascript 函数。

```
 function switchDay(selector) {
    if (selector == "tomorrow") {
        $("#today").hide();
        $("#tomorrow").show();
        $("#daySelector").html('<a href="#" onclick="return switchDay(\'today\');">this day</a> | next day');

    }
    if (selector == "today") {
        $("#tomorrow").hide();
        $("#today").show();
        $("#daySelector").html('this day | <a href="#" onclick="return switchDay(\'tomorrow\');">next day</a>');

    }   
  return false;
} 
```

在我的 PHP 中，我回显了这样的开关链接：

```
echo '<p id="daySelector">today | <a href="#" onclick="return switchDay(\'tomorrow\');">tomorrow</a></p>'; 
```

如您所见，我已经将 hide() 和 show() 切换为 jquery 函数（在我使用 .style.display 函数之前），现在还想放弃旧的`onclick`，而是使用 jquery `.click()`。不过，我不确定如何更改切换链接。

我怎样才能做到这一点？（最好不要让我的脚本变得更大......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:33:17.713

有很多方法可以解决这个问题（上帝，我因此喜欢编程）。

一个简单的方法是这样做：

```
$('#daySelector a').live('click', function () {
    if ($(this).hasClass("tomorrow")) {
        $("#today").hide();
        $("#tomorrow").show();
        $("#daySelector").html('<a href="#" class="today">this day</a> | next day');    
    }
    if ($(this).hasClass("today")) {
        $("#tomorrow").hide();
        $("#today").show();
        $("#daySelector").html('this day | <a href="#" class="tomorrow">next day</a>');

    }   
  return false;
}); 
```

然后像这样做PHP：

```
echo '<p id="daySelector">today | <a href="#" class="tomorrow">tomorrow</a></p>'; 
```

我没有测试它。应该还能工作。

下面的评论让我想起了 live 已被弃用。这是使用 .on 方法的方式。我也进行了编辑，避免使用文档进行绑定。

```
$('#daySelector').on('click', 'a', function () {
    if ($(this).hasClass("tomorrow")) {
        $("#today").hide();
        $("#tomorrow").show();
        $("#daySelector").html('<a href="#" class="today">this day</a> | next day');    
    }
    if ($(this).hasClass("today")) {
        $("#tomorrow").hide();
        $("#today").show();
        $("#daySelector").html('this day | <a href="#" class="tomorrow">next day</a>');

    }   
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:34:08.020

从链接中删除点击处理程序，添加选择器属性：

```
echo '<p id="daySelector">today | <a href="#" selector="tomorrow">tomorrow</a></p>'; 
```

添加点击处理程序：

```
$('#daySelector').on('click','a', function() {
    return switchDay(this.attr("selector"));
}); 
```

应该注意的是，从 1.7 开始[`live`不推荐使用](http://api.jquery.com/live/)

```
function switchDay(selector) {
    if (selector == "tomorrow") {
        $("#today").hide();
        $("#tomorrow").show();
        $("#daySelector").html('<a href="#" selector="today">this day</a> | next day');

    } else if (selector == "today") {
        $("#tomorrow").hide();
        $("#today").show();
        $("#daySelector").html('this day | <a href="#" selector="tomorrow">next day</a>');

    }   
   return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:38:11.423

将事件委托给父元素，您可以摆脱 if/else，因为[.toggle()](http://api.jquery.com/toggle/)允许您传入条件 - true=show/false=hide..

```
$('#daySelector').on('click','a',function(e){    
   e.preventDefault(); // prevent default anchor click action
    var day = $(this).text();  // get text to check
    $("#tomorrow").toggle(day.indexOf('this') > -1); // show if currently this
    $("#today").toggle(day.indexOf('next') > -1); // show if currently next
    $(this).text(day.indexOf('this') > -1 ? 'next day':'this day'); // toggle text
});​​​ 
```

[http://jsfiddle.net/pFDsZ/](http://jsfiddle.net/pFDsZ/)

我只是在猜测某些部分，因为您没有显示所有的 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:01:20.727

这有效：

标记：

```
<div id='today'>Content A</div>
<div id='tomorrow'>Content B</div>
<p><a href="#" id='switch'>Switch to <span id='switchText'>tomorrow</span></a></p> 
```

脚本：

```
 $(document).ready(
    function () {
        showToday();
        $('#switch').click(
            function () {
                var switchText = $('#switchText').text();
                if (switchText == 'tomorrow') {
                    showTomorrow();
                } else {
                    showToday();
                }
            }
        );
    }
    );
    function showToday() {
        $('#today').show();
        $('#tomorrow').hide();
        $('#switchText').text('tomorrow');
    }

    function showTomorrow() {
        $('#today').hide();
        $('#tomorrow').show();
        $('#switchText').text('today');
    } 
```

# ruby-on-rails - RnR 3：在表单中使用 Ajax 查找数据

> ID：12736190
> 
> 赞同：1
> 
> 时间：2012-10-04T21:22:46.987
> 
> 标签：ruby-on-rails, ajax, forms

我正在寻找一些很接近的东西，但它们要么是 Rail 2.x 并且不能在 3 中工作，要么它们足够不同，以至于我花了很多时间试图弄清楚如何重做它们。

这就是我想做的。我们有两种类型的人，会员和客人。会员拥有会员号码并获得折扣。我喜欢在表格中做的是当他们输入会员编号时，在数据库中查找，如果会员编号存在，则显示绿色检查，如果它不显示红色 x。这是为了改善体验，而不是不得不张贴整个表格，然后他们又弹回来了，因为他们粗暴地指了指会员号。

我想我可以使用 button_to 或 link_to 并将它们设置为 :remote => true，在控制器中调用一个函数并根据该结果，取消隐藏包含图像的 div。因此，在这些问题中，调用了该函数，但我不知道如何表示成功或失败。或者它转到 show.html.erb 页面而不是我所在的页面。或者我最喜欢的没有...

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:55:16.273

**PeopleController**

```
def valid_member?(member_number)
  member_number = params[:number]
  member = People.find(number: member_number)
  if People.exists?(member)
    render :status => 200, :nothing => true
  else
    render :status => 404, :nothing => true
  end
end 
```

**routes.rb**

```
match "/valid_member" => "people#valid_member" 
```

**application.js or people.js**

```
function checkValidMember() {
  $("input#member-number").data("oldVal", $("input#member-number"));
  $("input#member-number").bind("propertychange keyup input paste", function(event){
    if ($(this).data('oldVal') != $(this).val()) {
      $(this).data('oldVal', $(this).val());
      if ( isValidMember($(this).val()) ) {
        alert("success");
        // your jquery magic for success case goes here
      }
      else {
        alert("fail");
        // your jquery magic for failure case goes here
      }
    }
  });
}

function isValidMember(member_number) {
  $.ajax({
    url: "valid_member?number="+member_number,
    success: function(data) {
      return true;
    },
    statusCode: {
      404: function() {
        return false;
      }
    }
  });
} 
```

first edit.

Obviously, you need to have input field with correct id, member-number, as the javascript i wrote above.

# testing - Grails 集成测试过滤器

> ID：12736193
> 
> 赞同：5
> 
> 时间：2012-10-04T21:23:06.640
> 
> 标签：testing, grails, filter, integration

有没有办法测试在集成测试中使用过滤器的控制器？

似乎有一种方法可以使用 @Mock 注释进行单元测试，而不是将控制器调用包装在 withFilter 闭包上。

但是我无法在集成测试中测试过滤器，从我的观点来看，这应该是非常直接的。

更新

所以这是我找到的解决方案。我没有使用 @Mock 注释，而是实例化了 FiltersUnitTestMixin 类并用必要的值填充它。

```
public class ControllerTest {  

    def controller = new Controller()  
        FiltersUnitTestMixin f = new FiltersUnitTestMixin()

    @Before
    public void setup() {
        f.grailsApplication = grailsApplication
        f.applicationContext = grailsApplication.mainContext
        f.mockFilters(ControllerFilters)
    }

    @Test
    public void shouldPassTheTest() {
        f.withFilters(action:"actionName") {
            controller.actionName()
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T07:07:33.653

我有同样的问题，我发现了这个-> [http://ldaley.com/post/392153102/integration-testing-grails-filters](http://ldaley.com/post/392153102/integration-testing-grails-filters)

并对其进行了修改以适应我的需求

```
import grails.util.GrailsWebUtil
import org.junit.After
import org.junit.Before
import org.junit.Test

class SomethingIntegrationTests {

    def filterInterceptor
    def grailsApplication
    def grailsWebRequest

    @Before
    void setUp() {

    }

    @After
    void tearDown() {

    }

    @Test
    void testFilterRedirects() {

        def result = request("home", "index", someParameter: "2")
        assert !result
        assert response.redirectedUrl.endsWith(/* something */)
    }

    def getResponse() {
        grailsWebRequest.currentResponse
    }

    def request(Map params, controllerName, actionName) {
        grailsWebRequest = GrailsWebUtil.bindMockWebRequest(grailsApplication.mainContext)
        grailsWebRequest.params.putAll(params)
        grailsWebRequest.controllerName = controllerName
        grailsWebRequest.actionName = actionName
        filterInterceptor.preHandle(grailsWebRequest.request, grailsWebRequest.response, null)
    }
} 
```

# c++ - 将类型转换为双 C++

> ID：12736197
> 
> 赞同：1
> 
> 时间：2012-10-04T21:23:23.530
> 
> 标签：c++, windows, casting

我是编程新手，这可能是一个显而易见的问题，尽管我一生都无法弄清楚为什么我的程序没有以双重身份返回。

我想写一个股票程序，接收股票、价格的整美元部分和小数部分。小数部分将作为两个 int 值输入，并包含一个具有 3 个 int 值的函数定义。该函数将价格作为双精度值返回。

```
#include <iostream>
using namespace std;

int price(int, int, int);

int main()
{
    int dollars, numerator, denominator, price1, shares;
    char ans;
    do
    {
        cout<<"Enter the stock price and the number of shares.\n";
        cout<<"Enter the price and integers: Dollars, numerator, denominator\n";
        cin>>dollars>>numerator>>denominator;
        cout<<"Enter the number of shares held\n";
        cin>>shares;
        cout<<shares;
        price1 = price(dollars,numerator,denominator);
        cout<<" shares of stock with market price of ";
        cout<< dollars << " " << numerator<<'/'<<denominator<<endl;
        cout<<"have a value of " << shares * price1<<endl;
        cout<<"Enter either Y/y to continue";
        cin>>ans;
    }while (ans == 'Y' || ans == 'y');
    system("pause");
    return 0;
}

int price(int dollars, int numerator, int denominator)
{
    return dollars + numerator/static_cast<double>(denominator);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:24:57.660

那是因为你的变量是 int 类型的。因此，您正在失去精度。

将您的 int 返回类型和变量更改为双精度值。

```
#include <iostream>
using namespace std;
double price(double, double, double);
int main()
{
  double dollars, numerator, denominator, price1, shares;
char ans;
do
{
cout<<"Enter the stock price and the number of shares.\n";
cout<<"Enter the price and integers: Dollars, numerator, denominator\n";
cin>>dollars>>numerator>>denominator;
cout<<"Enter the number of shares held\n";
cin>>shares;
cout<<shares;
price1 = price(dollars,numerator,denominator);
cout<<" shares of stock with market price of ";
cout<< dollars << " " << numerator<<'/'<<denominator<<endl;
cout<<"have a value of " << shares * price1<<endl;
cout<<"Enter either Y/y to continue";
cin>>ans;
}while (ans == 'Y' || ans == 'y');
system("pause");
return 0;
}
double price(double dollars, double numerator, double denominator)
{
  return dollars + numerator/denominator;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:26:00.657

这是因为您要返回一个`int`. 这将解决它。

```
double price (int dollars, int numerator, int denominator)
{ 
    return dollars + (double) numerator / denominator;
} 
```

# ruby - RUBY - 网页抓取 - (OpenURI::HTTPError)

> ID：12736201
> 
> 赞同：5
> 
> 时间：2012-10-04T21:23:34.130
> 
> 标签：ruby, web, web-scraping

我正在尝试用 ruby​​ 编写一个简单的网络抓取。它工作到第 29 个 url 然后我收到此错误消息：

> ```
> C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:346:in `open_http': 500 Internal Server Er
> ror (OpenURI::HTTPError)
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:201:in `catch'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:677:in `open'
>         from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:33:in `open'
>         from test.rb:24:in `block (2 levels) in <main>'
>         from test.rb:18:in `each'
>         from test.rb:18:in `block in <main>'
>         from test.rb:14:in `each'
>         from test.rb:14:in `<main>' 
> ```

我的代码：

```
require 'rubygems'  
require 'nokogiri'  
require 'open-uri'  

aFile=File.new('data.txt', 'w')

ag = 0
  for i in 1..40 do
    agenzie = ag + 1

    #change url parameter 

    url = "http://www.infotrav.it/dettaglio.do?sort=*RICOVIAGGI*&codAgenzia=" + "#{ ag }"  
    doc = Nokogiri::HTML(open(url))
    aFile=File.open('data.txt', 'a')
    aFile.write(doc.at_css("table").text)
    aFile.close
  end 
```

你有一些想法来解决它吗？谢谢！

作为

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:27:58.273

代码有一个小错字。它应该是`ag = ag + 1`而不是`agenzie = ag + 1`。我假设在您将代码复制到 stackoverflow 时发生了，因为代码无法处理错字。

我能够在本地运行代码，并得到同样的错误。原来[正在访问的 url （当 codAgenzia=30 时）在](http://www.infotrav.it/dettaglio.do?sort=%2aRICOVIAGGI%2a&codAgenzia=30)[http://www.infotrav.it](http://www.infotrav.it)站点上不可用；它返回 HTTP 错误 500。

所以问题不在于您的代码，而在于远程服务器（[http://www.infotrav.it](http://www.infotrav.it)）

正如 slivu 在他的回答中提到的那样，您应该挽救错误并继续抓取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T07:50:29.657

在这里，让我为你清理它：

```
File.open('data.txt', 'w') do |aFile|
  (1..40).each do |ag|
    url = "http://www.infotrav.it/dettaglio.do?sort=*RICOVIAGGI*&codAgenzia=#{ag}"
    response = open(url) rescue nil
    next unless response
    doc = Nokogiri::HTML(response)
    aFile << doc.at_css("table").text
  end
end 
```

笔记：

*   使用块样式 File.open 意味着文件将在块退出时自行关闭
*   使用 each 来迭代而不是 for 循环

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T21:28:26.227

如果您无法解决远程服务器上的问题，请尝试从错误中挽救并继续报废：

```
begin
  doc = Nokogiri::HTML(open(url))
  aFile=File.open('data.txt', 'a')
  aFile.write(doc.at_css("table").text)
  aFile.close
rescue => e
  puts e.message
end 
```

# mysql - mysql select里面的select优化

> ID：12736204
> 
> 赞同：1
> 
> 时间：2012-10-04T21:24:11.603
> 
> 标签：mysql

我遇到了一个问题，我有庞大的数据库，现在我无法进行更改，我需要先处理所有这些数据。问题是下面编写的每个查询大约需要 1-2 分钟。如果有人知道如何进行优化选择，我会应用它。

```
select distinct x.peerId
,(select max(id) from checkPeer where peerId=x.peerId) as idd 
from checkPeer x where x.id>0 order by x.id desc 
```

有没有办法从下面定义的表中优化这个选择？

```
CREATE TABLE `checkPeer` (
`id` bigint(20) NOT NULL AUTO_INCREMENT,
`peerId` varchar(100) COLLATE utf8_bin DEFAULT NULL,
`peerDate` datetime DEFAULT NULL,
`peerUrl` bigint(20) DEFAULT '0',
`peerState` bigint(20) DEFAULT '0',
`peerMessage` varchar(500) COLLATE utf8_bin DEFAULT NULL,
`peerResource` varchar(5000) COLLATE utf8_bin DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `peerId` (`peerId`),
KEY `peerUrl` (`peerUrl`)
) ENGINE=MyISAM AUTO_INCREMENT=688791 DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:31:17.387

一些直接的建议，删除`DISTINCT`并尝试以下操作：

```
select x.peerId, x1.id as idd 
from checkPeer x 
left join
(
    select max(id) id, peerid
    from checkPeer
    group by peerid
) x1
    on x.peerid = x1.peerid
where x.id>0 
order by x.id desc 
```

如果您最终需要更多字段但您说只需要两个字段，则上述方法效果很好，因此您可以尝试：

```
select peerId, max(id) as idd
from checkPeer 
where id > 0
group by peerid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:41:19.953

为什么不按 peerid 分组并选择 max(id)？

```
select peerId, max(id) as idd
from checkPeer 
  where id > 0
  group by peerid
  order by id 
```

# tomcat - 是否有可以配置正在运行的 Tomcat 服务器的 Maven 插件或类似工具？

> ID：12736207
> 
> 赞同：0
> 
> 时间：2012-10-04T21:24:12.537
> 
> 标签：tomcat, maven, containers, configuration-management

我的组织希望将容器的“配置”（例如 JMS 资源和数据源）放入源代码控制中。我希望 Maven 能够将其作为目标来执行。这与 liquibase 背后的基本思想相距不远，您可以在其中使用`mvn liquibase:update`.

我想要一些可能是这样的：

```
mvn container:config -Pdev 
```

它会发送到开发服务器，并可能将数据源添加到 server.xml。如果解决方案可跨 GlassFish 移植，则可加分。

有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:14:07.013

不，似乎没有现成的工具可以做到这一点。您可能必须使用[Maven Antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)来执行脚本以登录到 Tomcat 服务器（即通过 ssh）并`server.xml`直接操作文件。

我可能会使用[Ant SCP 任务](http://ant.apache.org/manual/Tasks/scp.html)和[XML 任务的组合](http://www.oopsconsultancy.com/software/xmltask/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:20:20.610

如果您想将运行时配置置于版本控制之下，请考虑使用以下工具：

*   [木偶](http://puppetlabs.com/)
*   [厨师](http://www.opscode.com/chef/)

可以使用 Maven 来运行您的部署，但建议您将应用程序部署到 Maven 存储库（如 Nexus），然后在部署期间从那里下载。这样您就可以避免每次要安装应用程序时重新编译代码。

# javascript - 通过后退按钮返回时会持续存在什么？

> ID：12736209
> 
> 赞同：13
> 
> 时间：2012-10-04T21:24:31.820
> 
> 标签：javascript, jquery, html, css

我了解当您通过后退按钮返回页面时，复选框将保持选中状态。使用 jquery 的 addClass 添加的类却没有。有人可以帮助我了解通过后退按钮返回时某些事情何时会持续存在吗？另外，有没有办法保存变量的值，以便我可以使用变量值重新创建不持久的对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T21:31:32.503

*什么*都不会持久 - 类不会持久，因为 DOM 重新生成，JS 变量不会持久，因为代码被重新执行等。同时，浏览器实现似乎非常同意保留用户输入的表单数据以方便，即使这种行为不是任何官方规范的一部分。

如果您需要一些数据在客户端保留 - 您很可能在架构上做错了什么。为什么你试图覆盖浏览器的“返回”按钮行为，让用户回到任意状态，而不是转到以前的 URL 并重新呈现页面？如果您的应用程序交互繁重，并且需要这种“后退”按钮行为，您可能希望放弃让用户在独立页面之间导航，转而使用 AJAX 请求并依赖诸如[html5 history api](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)之类的东西来执行任何将页面置于所需状态的任意代码。

您没有详细了解您实际期望存储的内容 - 也许[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)或 cookie 替代品会更合适

***更新：***

我已经整理了[一个小提琴](http://jsfiddle.net/ovfiddle/AqNXr/)来测试遍历历史时表单数据的持久性，并且隐藏字段*可供*JS 处理-尽管 imo 仍然不是一个好主意

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:18:49.457

现代浏览器试图越来越多地坚持下去。Firefox 几年前尝试保留包括类名更改在内的所有内容，只要服务器指示该页面可在 HTTP 标头中缓存并且该网页尚未注册任何`onunload`事件处理程序。Firefox 会`onpageshow`在`onpagehide`用户按下后触发。

[https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching](https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching) https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:33:20.870

这在很大程度上取决于您是否处理网址的哈希值，即如果您这样做，您可以坚持一切。

编辑：

您必须熟悉单页应用程序 (SPA) 的概念。

由于能够更改[位置哈希属性](http://www.w3schools.com/jsref/prop_loc_hash.asp)和管理浏览器历史记录，这一切都成为可能。

为了使这个简单，有很多像[Sammy.js这样的库](http://sammyjs.org/)

每次让用户执行操作时，您都会推送新状态，因此您将能够处理按下后退按钮。

为了了解它的外观，请检查以下[jsfiddle](http://jsfiddle.net/rniemeyer/PKDdG/)

在您看到设置的代码中`routes`：

```
Sammy(function() {
    this.get('#:folder', function() { ... });
    this.get('#:folder/:mailId', function() { ... });
})).run(); 
```

哪个指定哈希，即`www.mygreatwebsite.com/#inbox/#1`您的应用程序将如何处理它。

这里还有更多内容，所以我的链接只是您探索的起点。

已编辑：[使用 sammy.js 的更简单的示例](http://jsfiddle.net/individual11/HnYar/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T23:08:55.630

补充上述答案，您可以使用视图状态保存表单状态。

*   [了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx)
*   [ASP.NET Web 窗体 - 维护 ViewState](http://www.w3schools.com/aspnet/aspnet_viewstate.asp)

ViewState 允许 ASP.NET 在每次回发到服务器时重新填充表单字段，以确保在用户点击提交按钮时不会自动清除表单。

# php - PHP打印数组项分组

> ID：12736210
> 
> 赞同：1
> 
> 时间：2012-10-04T21:24:36.580
> 
> 标签：php, arrays, codeigniter, grouping

```
$array = (
'item'=>'1',
'category'=>'2',
'item'=>'2',
'category'=>'2',
'item'=>'3',
'category'=>'1',
'item'=>'4',
'category'=>'3'
); 
```

如果可能的话，我想以 html 格式返回：

```
Category 1
- item3
Category 2
- item1
- item2
Category 3
- item4 
```

有什么建议吗？真的不知道从哪里开始做这个脚本：/

编辑真实数组是：

```
 array(39) {
  [0]=>
  object(stdClass)#50 (6) {
    ["id"]=>
    string(2) "20"
    ["name"]=>
    string(7) "youtube"
    ["url"]=>
    string(11) "youtube.com"
    ["shortname"]=>
    string(2) "yo"
    ["category"]=>
    string(5) "video"
    ["img"]=>
    string(1) "y"
  }
  [1]=>
  object(stdClass)#51 (6) {
    ["id"]=>
    string(2) "23"
    ["name"]=>
    string(5) "vimeo"
    ["url"]=>
    string(9) "vimeo.com"
    ["shortname"]=>
    string(2) "vm"
    ["category"]=>
    string(5) "video"
    ["img"]=>
    string(1) "y"
  }
  [2]=>
  object(stdClass)#52 (6) {
    ["id"]=>
    string(1) "1"
    ["name"]=>
    string(10) "googleplus"
    ["url"]=>
    string(15) "plus.google.com"
    ["shortname"]=>
    string(2) "g+"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [3]=>
  object(stdClass)#53 (6) {
    ["id"]=>
    string(1) "2"
    ["name"]=>
    string(8) "facebook"
    ["url"]=>
    string(12) "facebook.com"
    ["shortname"]=>
    string(2) "fb"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [4]=>
  object(stdClass)#54 (6) {
    ["id"]=>
    string(1) "4"
    ["name"]=>
    string(7) "twitter"
    ["url"]=>
    string(11) "twitter.com"
    ["shortname"]=>
    string(2) "tw"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [5]=>
  object(stdClass)#55 (6) {
    ["id"]=>
    string(1) "9"
    ["name"]=>
    string(9) "instagram"
    ["url"]=>
    string(13) "instagram.com"
    ["shortname"]=>
    string(2) "is"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [6]=>
  object(stdClass)#56 (6) {
    ["id"]=>
    string(2) "17"
    ["name"]=>
    string(8) "diaspora"
    ["url"]=>
    string(16) "joindiaspora.com"
    ["shortname"]=>
    string(2) "dp"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [7]=>
  object(stdClass)#57 (6) {
    ["id"]=>
    string(2) "22"
    ["name"]=>
    string(7) "myspace"
    ["url"]=>
    string(11) "myspace.com"
    ["shortname"]=>
    string(2) "my"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [8]=>
  object(stdClass)#58 (6) {
    ["id"]=>
    string(2) "32"
    ["name"]=>
    string(5) "orkut"
    ["url"]=>
    string(9) "orkut.com"
    ["shortname"]=>
    string(2) "ot"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [9]=>
  object(stdClass)#59 (6) {
    ["id"]=>
    string(2) "33"
    ["name"]=>
    string(8) "linkedin"
    ["url"]=>
    string(12) "linkedin.com"
    ["shortname"]=>
    string(2) "ln"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [10]=>
  object(stdClass)#60 (6) {
    ["id"]=>
    string(2) "34"
    ["name"]=>
    string(9) "delicious"
    ["url"]=>
    string(13) "delicious.com"
    ["shortname"]=>
    string(2) "dl"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [11]=>
  object(stdClass)#61 (6) {
    ["id"]=>
    string(2) "35"
    ["name"]=>
    string(4) "digg"
    ["url"]=>
    string(8) "digg.com"
    ["shortname"]=>
    string(2) "dg"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [12]=>
  object(stdClass)#62 (6) {
    ["id"]=>
    string(2) "40"
    ["name"]=>
    string(11) "stumbleupon"
    ["url"]=>
    string(15) "stumbleupon.com"
    ["shortname"]=>
    string(2) "sb"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [13]=>
  object(stdClass)#63 (6) {
    ["id"]=>
    string(2) "41"
    ["name"]=>
    string(10) "friendfeed"
    ["url"]=>
    string(14) "friendfeed.com"
    ["shortname"]=>
    string(2) "ff"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [14]=>
  object(stdClass)#64 (6) {
    ["id"]=>
    string(2) "47"
    ["name"]=>
    string(6) "tumblr"
    ["url"]=>
    string(10) "tubmlr.com"
    ["shortname"]=>
    string(2) "tu"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [15]=>
  object(stdClass)#65 (6) {
    ["id"]=>
    string(2) "48"
    ["name"]=>
    string(9) "pinterest"
    ["url"]=>
    string(13) "pinterest.com"
    ["shortname"]=>
    string(2) "pi"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [16]=>
  object(stdClass)#66 (6) {
    ["id"]=>
    string(2) "67"
    ["name"]=>
    string(11) "tripadvisor"
    ["url"]=>
    string(15) "tripadvisor.com"
    ["shortname"]=>
    string(2) "tp"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [17]=>
  object(stdClass)#67 (6) {
    ["id"]=>
    string(2) "76"
    ["name"]=>
    string(8) "dribbble"
    ["url"]=>
    string(12) "dribbble.com"
    ["shortname"]=>
    string(2) "db"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [18]=>
  object(stdClass)#68 (6) {
    ["id"]=>
    string(2) "88"
    ["name"]=>
    string(10) "foursquare"
    ["url"]=>
    string(14) "foursquare.com"
    ["shortname"]=>
    string(2) "fs"
    ["category"]=>
    string(6) "social"
    ["img"]=>
    string(1) "y"
  }
  [19]=>
  object(stdClass)#69 (6) {
    ["id"]=>
    string(1) "3"
    ["name"]=>
    string(5) "yahoo"
    ["url"]=>
    string(9) "yahoo.com"
    ["shortname"]=>
    string(2) "yh"
    ["category"]=>
    string(6) "search"
    ["img"]=>
    string(1) "y"
  }
  [20]=>
  object(stdClass)#70 (6) {
    ["id"]=>
    string(2) "36"
    ["name"]=>
    string(6) "reddit"
    ["url"]=>
    string(10) "reddit.com"
    ["shortname"]=>
    string(2) "re"
    ["category"]=>
    string(6) "search"
    ["img"]=>
    string(1) "y"
  }
  [21]=>
  object(stdClass)#71 (6) {
    ["id"]=>
    string(2) "42"
    ["name"]=>
    string(10) "craigslist"
    ["url"]=>
    string(14) "craigslist.com"
    ["shortname"]=>
    string(2) "cg"
    ["category"]=>
    string(6) "search"
    ["img"]=>
    string(1) "y"
  }
  [22]=>
  object(stdClass)#72 (6) {
    ["id"]=>
    string(2) "51"
    ["name"]=>
    string(6) "flickr"
    ["url"]=>
    string(10) "flickr.com"
    ["shortname"]=>
    string(2) "fk"
    ["category"]=>
    string(5) "photo"
    ["img"]=>
    string(1) "y"
  }
  [23]=>
  object(stdClass)#73 (6) {
    ["id"]=>
    string(2) "85"
    ["name"]=>
    string(6) "picasa"
    ["url"]=>
    string(10) "picasa.com"
    ["shortname"]=>
    string(2) "ps"
    ["category"]=>
    string(5) "photo"
    ["img"]=>
    string(1) "y"
  }
  [24]=>
  object(stdClass)#74 (6) {
    ["id"]=>
    string(2) "38"
    ["name"]=>
    string(9) "wordpress"
    ["url"]=>
    string(13) "wordpress.com"
    ["shortname"]=>
    string(2) "wp"
    ["category"]=>
    string(6) "others"
    ["img"]=>
    string(1) "y"
  }
  [25]=>
  object(stdClass)#75 (6) {
    ["id"]=>
    string(1) "5"
    ["name"]=>
    string(10) "soundcloud"
    ["url"]=>
    string(13) "souncloud.com"
    ["shortname"]=>
    string(2) "sc"
    ["category"]=>
    string(5) "music"
    ["img"]=>
    string(1) "y"
  }
  [26]=>
  object(stdClass)#76 (6) {
    ["id"]=>
    string(1) "6"
    ["name"]=>
    string(7) "spotify"
    ["url"]=>
    string(11) "spotify.com"
    ["shortname"]=>
    string(2) "sp"
    ["category"]=>
    string(5) "music"
    ["img"]=>
    string(1) "y"
  }
  [27]=>
  object(stdClass)#77 (6) {
    ["id"]=>
    string(2) "10"
    ["name"]=>
    string(6) "lastfm"
    ["url"]=>
    string(10) "lastfm.com"
    ["shortname"]=>
    string(2) "lf"
    ["category"]=>
    string(5) "music"
    ["img"]=>
    string(1) "y"
  }
  [28]=>
  object(stdClass)#78 (6) {
    ["id"]=>
    string(1) "8"
    ["name"]=>
    string(5) "gmail"
    ["url"]=>
    string(9) "gmail.com"
    ["shortname"]=>
    string(2) "gm"
    ["category"]=>
    string(5) "email"
    ["img"]=>
    string(1) "y"
  }
  [29]=>
  object(stdClass)#79 (6) {
    ["id"]=>
    string(1) "7"
    ["name"]=>
    string(13) "stackoverflow"
    ["url"]=>
    string(17) "stackoverflow.com"
    ["shortname"]=>
    string(2) "st"
    ["category"]=>
    string(10) "developers"
    ["img"]=>
    string(1) "y"
  }
  [30]=>
  object(stdClass)#80 (6) {
    ["id"]=>
    string(2) "55"
    ["name"]=>
    string(6) "github"
    ["url"]=>
    string(10) "github.com"
    ["shortname"]=>
    string(2) "gt"
    ["category"]=>
    string(10) "developers"
    ["img"]=>
    string(1) "y"
  }
  [31]=>
  object(stdClass)#81 (6) {
    ["id"]=>
    string(2) "54"
    ["name"]=>
    string(7) "dropbox"
    ["url"]=>
    string(11) "dropbox.com"
    ["shortname"]=>
    string(2) "do"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [32]=>
  object(stdClass)#82 (6) {
    ["id"]=>
    string(2) "59"
    ["name"]=>
    string(5) "skype"
    ["url"]=>
    string(9) "skype.com"
    ["shortname"]=>
    string(2) "sk"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [33]=>
  object(stdClass)#83 (6) {
    ["id"]=>
    string(2) "72"
    ["name"]=>
    string(10) "googletalk"
    ["url"]=>
    string(10) "google.com"
    ["shortname"]=>
    string(2) "gk"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [34]=>
  object(stdClass)#84 (6) {
    ["id"]=>
    string(2) "81"
    ["name"]=>
    string(10) "googleplay"
    ["url"]=>
    string(15) "play.google.com"
    ["shortname"]=>
    string(2) "gp"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [35]=>
  object(stdClass)#85 (6) {
    ["id"]=>
    string(2) "82"
    ["name"]=>
    string(11) "googledrive"
    ["url"]=>
    string(16) "drive.google.com"
    ["shortname"]=>
    string(2) "gd"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [36]=>
  object(stdClass)#86 (6) {
    ["id"]=>
    string(2) "84"
    ["name"]=>
    string(6) "ubuntu"
    ["url"]=>
    string(10) "ubuntu.com"
    ["shortname"]=>
    string(2) "ub"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [37]=>
  object(stdClass)#87 (6) {
    ["id"]=>
    string(2) "89"
    ["name"]=>
    string(14) "ifthisthenthat"
    ["url"]=>
    string(9) "ifttt.com"
    ["shortname"]=>
    string(2) "if"
    ["category"]=>
    string(4) "apps"
    ["img"]=>
    string(1) "y"
  }
  [38]=>
  object(stdClass)#88 (6) {
    ["id"]=>
    string(2) "29"
    ["name"]=>
    string(6) "custom"
    ["url"]=>
    string(0) ""
    ["shortname"]=>
    string(3) "..."
    ["category"]=>
    NULL
    ["img"]=>
    string(1) "y"
  }
} 
```

我需要按类别键对项目进行分组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:30:24.680

我不太了解您的数组结构，但这 - 希望 - 可以帮助您：

```
$array = array (
   '1' => array('item3'),
   '2' => array('item1', 'item2'),
   '3' => array('item4')
);

foreach($array as $id => $category) {
   echo "Category " . $id. "<br/>";
   foreach($category as $item) {
      echo $item . "<br/>";
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:03:22.750

您可以创建一个数组，其中类别作为键，项目作为值：

```
foreach ($array as $item) {
    $itemsByCategory[$item->category][] = $item;
} 
```

然后，您可以使用以下内容显示它们：

```
header('Content-Type: text/plain');
foreach ($itemsByCategory as $category => $items) {
    echo $category . "\n";
    foreach ($items as $item) {
        echo '- ' . $item . "\n";
    }
} 
```

# magento - 您如何估算 Magento 升级？

> ID：12736211
> 
> 赞同：9
> 
> 时间：2012-10-04T21:24:35.880
> 
> 标签：magento

我很想知道您如何衡量 Magento 升级所需的时间？我想，你们大多数人都很难回答客户的问题：“升级我的 Magento 商店需要多长时间？”

通常客户只需要听到一个数字，例如：“需要 X 小时，花费 Y 美元。”

这个问题背后的主要思想是关于技术方面的，作为开发人员，你检查什么来为 Magento 升级进行自己的计算。

我创建了下一个清单，只是为了我自己的计算：

*   Magento核心是否被触动？
*   是否触及 Magento DB 架构？
*   我们在数据库中是否有不一致的数据？
*   本地和社区代码池中安装了多少自定义扩展？
*   自定义扩展是否与最新版本的 Magento 兼容？
*   主题开发者是否使用 local.xml 文件作为布局指令，或者只是将 xml 文件从 base/default/layout 复制到自定义主题的布局目录？
*   我们在布局 xml 文件中是否有弃用的布局指令/块方法？
*   我开发了这个 Magento 商店吗？

您是否认为我遗漏了一些东西，如果是，您愿意与我和社区分享您对检查清单的补充吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:00:02.070

确实超出了主题，但至少将工作分为两个部分：

1.  升级 magento 代码和数据库模式（禁用所有自定义，这通常需要 1 - 4 小时，具体取决于数据库大小和您的 IO 速度）
2.  将主题文件迁移到新结构（如果它们基于 magento 默认值）
3.  一个一个地升级扩展（如果他们需要升级）
4.  就测试数量达成一致
5.  并出售良好的开发管道

在给客户报价之前，您通过将您的主题与升级的基本主题和布局进行区分，分析您需要花费在迁移主题上的时间，并制作已安装扩展及其版本和本地覆盖的地图。

$$$$

# mysql - Google Maps API - 来自 mySQL 数据库并通过 ClusterMarkerer 显示的信息窗口内容

> ID：12736218
> 
> 赞同：0
> 
> 时间：2012-10-04T21:25:04.570
> 
> 标签：mysql, google-maps-api-3, infowindow

这可能是一个简单得可笑的问题。

我正在尝试显示地图，其中标记信息窗口将显示以下内容：

名称
地址
关于（即描述）
URL

使用 PHP 从 mySQL 数据库中查询标记。该代码当前正确映射所有标记，但仅在信息窗口中显示“名称”属性。添加其他 3 个属性所需的缺失代码是什么？（地址、关于、URL？）我的猜测是代码中此时需要调整一些内容：

```
 google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(markers[i].getAttribute("name"));
                        infowindow.open(map, marker);
                    }
                })(marker, i)); 
```

如果可能，请用必要的脚本回答！

- 数据库输出的实时链接：[http](http://www.oaktonjapan.com/testmap/testcode3.php)
://www.oaktonjapan.com/testmap/testcode3.php ***请注意，第一个（PAX Coworking）和最后一个（Venture Generation）填充了“地址、关于和 URL 内容。
- 现有输出的实时链接：http: [//oaktonjapan.com/testmap/testmap5.html](http://oaktonjapan.com/testmap/testmap5.html)
** *单击红色相扑摔跤手标记。如果编码正确，该标记应显示所有 4 个属性...

当前代码：

```
 function load() {
  var cluster = [];
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(35.681382,139.766084),
    zoom: 14,
    mapTypeId: 'roadmap'
  });
  var infowindow = new google.maps.InfoWindow();
    var min = .999999;
    var max = 1.000001;

  // Change this depending on the name of your PHP file
  downloadUrl("testcode3.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var about = markers[i].getAttribute("about");
      var url = markers[i].getAttribute("url");
      var offsetLat = markers[i].getAttribute("lat") * (Math.random() * (max - min) + min);
      var offsetLng = markers[i].getAttribute("lng") * (Math.random() * (max - min) + min);
      var point = new google.maps.LatLng(offsetLat, offsetLng);
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        content: html
      });
      google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(markers[i].getAttribute("name"));
                        infowindow.open(map, marker);
                    }
                })(marker, i));   
      cluster.push(marker);
    }
    var mc = new MarkerClusterer(map,cluster);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:51:00.470

我原以为你会在“html”上得到一个未定义的变量错误。

这是您从 xml 中获取数据的地方：

```
 var name = markers[i].getAttribute("name");
  var address = markers[i].getAttribute("address");
  var type = markers[i].getAttribute("type");
  var about = markers[i].getAttribute("about"); 
```

这会将其合并到您在上面指定的列表中：

```
 var html = name + "<br>" + address + "<br>"+ about + "<br>" + url; 
```

这将在信息窗口中显示它（不知道为什么那里有“内容：html”，但至少现在它不会导致错误）：

```
 var marker = new google.maps.Marker({
    map: map,
    position: point,
    icon: icon.icon,
    content: html
  });
  google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    infowindow.setContent(html);
                    infowindow.open(map, marker);
                }
            })(marker, i)); 
```

# html - iframe 不显示内容

> ID：12736219
> 
> 赞同：0
> 
> 时间：2012-10-04T21:25:08.877
> 
> 标签：html, firefox, iframe, youtube, embed

这个片段是从一个随机的 youtube 视频中收集的：

```
<iframe class="youtube-player" src="http://www.youtube.com/embed/http://www.youtube.com/v/gnrvYsZWR1c?rel=0" title="YouTube video player" type="text/html" frameborder="0" height="390" width="480"></iframe> 
```

同样，更容易阅读：

```
<iframe
class="youtube-player" 
src="http://www.youtube.com/embed/http://www.youtube.com/v/gnrvYsZWR1c?rel=0" 
title="YouTube video player" 
type="text/html" 
frameborder="0" 
height="390" 
width="480"
></iframe> 
```

它不会在 Windows 或 Linux 上的 Firefox 15.0.1 中显示嵌入式 youtube。这个片段的构造方式有问题，还是 Firefox 根本不显示 iframe 内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:27:36.257

iframe 适合 FF

你的视频链接有问题。

```
http://www.youtube.com/embed/http://www.youtube.com/v/gnrvYsZWR1c?rel=0 
```

应该读

```
http://www.youtube.com/embed/gnrvYsZWR1c?rel=0 
```

或者

```
http://www.youtube.com/v/gnrvYsZWR1c?rel=0 
```

所以这段代码有效：

```
<iframe class="youtube-player" src="http://www.youtube.com/embed/gnrvYsZWR1c?rel=0"
 title="YouTube video player" frameborder="0" height="390" width="480"></iframe> 
```

# python-multithreading - 简单的 Python 聊天服务器

> ID：12736222
> 
> 赞同：1
> 
> 时间：2012-10-04T21:25:21.603
> 
> 标签：python-multithreading, python-sockets

我有这个聊天服务器代码，消息传递基本上不起作用，我用 telnet 测试它，它没有发送任何东西，我将它发送回客户端。我知道客户端已连接，实际上整个 wait_for_connection() 工作正常。我感觉这与我对 python 中的多线程知识的不好有关。有人可以纠正我吗？

```
import socket, thread, sys

connections = []
isRunning = True

def wait_for_connection():
    while isRunning:
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    s.bind(("", 1234))
    s.listen(5);
    print "Server is listening"
    con, addr = s.accept()
    print "Connected to", addr
    connections.append(con)

def loop_through_connections():
    for con in connections:
    con.setblocking(0)

while isRunning:
    for con in connections:
        data = con.recv(100)
        if not data:
            break
        for connection in connections:
            connection.send(data)

if __name__ == "__main__":
thread.start_new_thread(wait_for_connection, ())
thread.start_new_thread(loop_through_connections, ())
while isRunning:
    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T23:42:06.967

我不太明白你的代码。我建议使用更少的线程。在接受连接的主线程中添加一个主循环，并为它接受的每个连接在连接处理函数处启动一个线程。该函数首先将阻塞设置为 false，然后在循环中检查从客户端发送的数据并发送所有数据。

如果从客户端接收到一条消息，该函数会将其附加到存储在一个或多个全局变量中的消息主列表中。这些变量必须在每个线程和函数中设置为全局变量才能工作请评价此评论并随时回复任何问题

# python - Python：如何将月份添加到 2012 年 12 月并获得 2013 年 1 月？

> ID：12736229
> 
> 赞同：7
> 
> 时间：2012-10-04T21:25:39.503
> 
> 标签：python, date, calendar

```
>>> start_date = date(1983, 11, 23)
>>> start_date.replace(month=start_date.month+1)
datetime.date(1983, 12, 23) 
```

`<=11`只要我这样做，这就会一直有效

```
>>> start_date = date(1983, 12, 23)
>>> start_date.replace(month=start_date.month+1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: month must be in 1..12 
```

当新月份添加到 12 月时，如何继续添加月份以增加年份？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T21:32:02.683

dateutil库对于[这样](http://labix.org/python-dateutil)的计算很有用：

```
>>> start_date + relativedelta(months=2)
datetime.date(1984, 1, 23) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T21:30:59.437

使用[`datetime.timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects)和[`calendar.monthrange`](http://docs.python.org/library/calendar.html#calendar.monthrange)：

```
>>> from datetime import date, timedelta
>>> import calendar
>>> start_date = date(1983, 12, 23)
>>> days_in_month = calendar.monthrange(start_date.year, start_date.month)[1]
>>> start_date + timedelta(days=days_in_month)
datetime.date(1984, 1, 23) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T21:28:33.650

```
try:
    start_date.replace(month=start_date.month+1)
except ValueError:
    if start_date.month == 12:
         start_date.replace(month=1)
         start_date.replace(year=start_date.year+1)
    else:
         raise 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:33:26.620

如果您想为这个问题提供更通用的解决方案，例如将天、月和年混合到一个日期：

```
import time, datetime, calendar
def upcount(dt, years=0, months=0, **kwargs):
    if months:
        total_months = dt.month + months
        month_years, months = divmod(total_months, 12)
        if months == 0:
            month_years -= 1
            months = 12
        years += month_years
    else:
        months = dt.month

    years = dt.year + years
    try:
        dt = dt.replace(year=years, month=months)
    except ValueError:
        # 31st march -> 31st april gives this error
        max_day = calendar.monthrange(years, months)[1]
        dt = dt.replace(year=years, month=months, day=max_day)

    if kwargs:
        dt += datetime.timedelta(**kwargs)
    return dt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:34:15.020

您将不得不决定如何处理奇怪的情况，例如 1 月 31 日 + 1 个月 = 2 月 31 日（不存在）。但我倾向于使用 timedelta 添加到您的日期，如下所示：

```
import datetime as dt
dt.datetime.now() + dt.timedelta(days=30) 
```

您可以根据当前或下个月的大小或其他一些值来选择天数，这样您就不会在下个月溢出。

# php - PHP通过步行合并2个数组？

> ID：12736232
> 
> 赞同：0
> 
> 时间：2012-10-04T21:25:49.093
> 
> 标签：php, arrays

我有一个像这样的数组：

```
array(2) {
  [0]=>
  array(4) {
    [0]=>
    string(6) "04ba2c"
    [1]=>
    string(6) "f4a204"
    [2]=>
    string(6) "d40604"
    [3]=>
    string(6) "990000"
  }
  [1]=>
  array(4) {
    [0]=>
    string(6) "666666"
    [1]=>
    string(6) "666666"
    [2]=>
    string(6) "666666"
    [3]=>
    string(6) "666666"
  }
} 
```

我想构建数组，使其看起来像这样，但我不知道该怎么做？

```
array(1) {
  [0]=>
  array(8) {
    [0]=>
    string(6) "04ba2c"
    [1]=>
    string(6) "666666"
    [2]=>
    string(6) "f4a204"
    [3]=>
    string(6) "666666"
    [4]=>
    string(6) "d40604"
    [5]=>
    string(6) "666666"
    [6]=>
    string(6) "990000"
    [7]=>
    string(6) "666666"
  } 
```

有什么想法可以在 PHP 中轻松做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:28:56.887

```
for ($i = 0, $len = count($array[0]); $i < $len; ++$i) {
    $result[] = $array[0][$i];
    $result[] = $array[1][$i];
} 
```

或者，如果两个数组的长度不相等，则可以循环直到达到最大值并仅添加找到的项目：

```
for ($i = 0, $len = max(count($array[0]), count($array[1])); $i < $len; ++$i) {
    if (isset($array[0][$i])) $result[] = $array[0][$i];
    if (isset($array[1][$i])) $result[] = $array[1][$i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:28:59.487

假设`$arr[0]`和`$arr[1]`等长：

```
$arr2 = array(); 

foreach($arr[0] as $key=>$val) {
    $arr2[] = $arr[0][$key];
    $arr2[] = $arr[1][$key];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:30:39.587

```
$newarray = array();
$len = max(count($array[0]), count($array[1]));
for ($x = 0; $x < $len; $x++) {
   if (isset($array[0][$x])) {
      $newarray[] = $array[0][$x];
   }
   if (isset($array[1][$x])) {
      $newarray[] = $array[1][$x];
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:10:06.917

```
$arr = array (
    array("04ba2c","f4a204","d40604","990000"),
    array("666666","666666","666666","666666"),
);
$newArr = array();
array_map(function($a,$b) use(&$newArr) {
    $newArr[0][]=$a;$newArr[0][]=$b;
}, $arr[0], $arr[1]);
print_r($newArr);
/*
Array
(
    [0] => Array
        (
            [0] => 04ba2c
            [1] => 666666
            [2] => f4a204
            [3] => 666666
            [4] => d40604
            [5] => 666666
            [6] => 990000
            [7] => 666666
        )

)
*/ 
```

# c# - 为 getter 和 setter 使用支持变量

> ID：12736237
> 
> 赞同：11
> 
> 时间：2012-10-04T21:26:04.863
> 
> 标签：c#, .net

也许这是一个愚蠢的问题，但是，我是 C# 的新手（更多来自 Java 背景），并且对我看到的关于属性的 getter 和 setter 的不同示例感到困惑。

在某些情况下，代码如下所示：

```
 private string _something;
    public string Something
    {
        get { return _something; }
        set { _something = value; }
    } 
```

但是，在其他示例中，他们不使用此支持成员，因此更像这样：

```
 public string Something { get; set; } 
```

我并没有真正看到使用这些支持变量（_something）的好处，除非您当然对变量的设置有一些复杂的逻辑。

我正在使用后一种方法编写我的程序，但想检查一下我没有错过任何东西。

有人可以简单解释一下为什么人们选择做前者吗？是不是更“好习惯”？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T21:28:19.937

> 我并没有真正看到使用这些支持变量（_something）的好处，除非您当然对变量的设置有一些复杂的逻辑。

如果您不使用它，则没有任何优势。使用第二种方法，仍然有一个支持变量，但是您让编译器完成添加它的工作。从 .NET 3.5 及更高版本开始，您当前的方法是完全有效的。

当然，一旦您需要引入额外的逻辑，那么自己管理后备存储就变得至关重要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T21:27:51.600

前一种语法在 .NET 3.5 之前是必需的，因此可以在较旧的代码中找到。

它在功能上是等效的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T21:30:07.177

使用第一种语法的一个很好的理由是与属性绑定到前端元素的 MVVM 架构一起使用。

就像是：

```
 private string _something;
    public string Something
    {
        get { return _something; }
        set { 
              _something = value; 
              OnNotifyPropertyChanged("Something");
            }
    } 
```

这会提醒您的前端它的绑定属性已更改并且必须更新。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T21:28:12.147

公共字符串的东西{得到; 放; } 只是简写。在后台它正在做与上面完全相同的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:30:11.980

第二种方法是[自动实现属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T21:37:15.243

从您的实例中引用自动属性与声明一个公共字段相同，这违反了[封装原则](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。因此，如果您不在同一个类中访问它们，请使用自动属性。否则，使用成员（支持）字段并从本地方法中引用该字段，同时通过普通的 .NET 属性公开它们。

.NET 3.0 添加了自动属性作为语法糖，因此您不再需要在类中未引用的支持字段。

# objective-c - Objective C - 为什么在实现部分中声明的实例变量在 main 中不被识别？

> ID：12736244
> 
> 赞同：1
> 
> 时间：2012-10-04T21:26:37.170
> 
> 标签：objective-c

在实现部分我声明了变量：

```
double n_YTD_t; 
```

主要：

```
NSLog(@"New YTD Sales are: %f ", n_YTD_t); 
```

生成以下错误：

> 使用未声明的标识符：'n_YTD_t'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:51:09.217

`main`没有任何对象可以访问。你需要提供你的类的一个实例：

```
int main(int argc, char **argv)
{
    ...
    MyClass *obj = [[MyClass alloc] init];
    NSLog(@"New YTD Sales are: %f ", obj.n_YTD_t);  // assuming it's a property
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:06:52.187

您`n_YTD_t`在一个完全不相关的对象实现文件中声明。变量超出`main`; 您必须实例化您的类的一个实例并从中访问该变量（如果它是一个实例变量）。如果它是全局和文件范围的，那么您需要导入声明它的文件。

您应该考虑查看[Apple 关于 Objective-C 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)，查看教程（[例如这些用于 iOS 开发的](http://www.raywenderlich.com/tutorials)教程），也许还可以[阅读一本好书](http://shop.oreilly.com/product/0636920023562.do)，因为您似乎不了解该语言的基础知识。

# python - pyodbc 通过 IIS7 连接到 MSSQL 2005 服务器

> ID：12736248
> 
> 赞同：2
> 
> 时间：2012-10-04T21:26:54.063
> 
> 标签：python, sql-server-2005, iis-7, pyodbc

我在笔记本电脑上安装并配置了 IIS7，并使用了 python cgi 接口。我可以从 Eclipse 中运行 python 脚本并从数据库中获取我正在寻找的结果。但是当我从网页运行脚本时，我得到一个身份验证错误。似乎连接字符串没有将凭据传递给 SQL 服务器。有什么想法吗？

```
import pyodbc
import cgi
import cgitb; cgitb.enable()

cnxn = pyodbc.connect(driver='{SQL Server}', 
                  server='SERVER\INSTANCE', 
                  Trusted_Connection='yes', 
                  database='Test_Chad', 
                  uid='SERVER\username', 
                  pwd='password')

def getRow():
    cursor = cnxn.cursor()
    cursor.execute("select user_id, user_name from users")
    row = cursor.fetchone()
    print 'name:', row.user_id     
    print 'name:', row.user_name

getRow() 
```

例外：

```
<class 'pyodbc.Error'>: ('28000', "[28000] [Microsoft][ODBC SQL Server Driver][SQL Server]Login failed for user 'NT AUTHORITY\\ANONYMOUS LOGON'.
(18456) (SQLDriverConnect); [28000] [Microsoft][ODBC SQL Server Driver][SQL Server]Login failed for user 'NT AUTHORITY\\ANONYMOUS LOGON'. (18456)") 
args = ('28000', r"[28000] [Microsoft][ODBC SQL Server Driver][SQL ... for user 'NT AUTHORITY\ANONYMOUS LOGON'. (18456)") 
message = '' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:20:19.963

决定要使用哪种形式的身份验证，数据库或 Windows。你不能同时使用两者。

如果要使用 Windows 身份验证，请将连接设置更改为以下内容：

```
cnxn = pyodbc.connect(driver='{SQL Server}', server='SERVER\INSTANCE',  
                      database='Test_Chad', trusted_connection='yes') 
```

通过 Windows 身份验证将 Web 应用程序连接到数据库需要一些其他配置。如果您的 Web 应用程序在 IIS 中使用匿名身份验证，则将使用运行 Web 应用程序的应用程序池的标识来建立数据库连接。这是设置此身份的屏幕截图：

![IIS 应用程序池标识](../Images/9f1a6b19cbd4570cf924db909757ef6c.png)

如果要使用简单的数据库身份验证，请为`uid`and`pwd`和 remove提供适当的值`Trusted_Connection=yes`：

```
cnxn = pyodbc.connect(driver='{SQL Server}', server='SERVER\INSTANCE',  
                      database='Test_Chad', uid='username', pwd='password') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-15T12:03:27.753

我将以下代码与 Identity: 一起使用，如图所示，但不起作用：

```
cnxn = pyodbc.connect(
        "Driver={SQL Server Native Client 11.0};Server=MyServerName;Database=MyDbName;Trusted_Connection=yes;") 
```

[![在此处输入图像描述](../Images/4e7109c1aedeac449dbb38f629cf3b42.png)](https://i.stack.imgur.com/vwrvc.png)

* * *

然后我只需将连接更改为以下代码并与 Identity= Localsystem 完美配合

```
cnxn = pyodbc.connect(
        "Driver={SQL Server Native Client 11.0};Server=MyServerName;Database=MyDbName; uid=MyUsernameLoginDb; pwd=MyDbPasswordLoginToDB; ") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T13:37:10.940

如果您正确设置了应用程序池安全性（即应用程序池用户在 SQl 服务器上具有登录和访问权限），那么您需要配置匿名访问以使用应用程序池标识而不是其默认值 (IUSR)。转到身份验证部分 IIS 7 --> 匿名身份验证 --> 右键单击​​以编辑 --> 选择使用应用程序池标识的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-03T17:41:37.297

只需创建一个 MYSQL 用户并将其传递给 uid 和 pwd。

使用密码创建登录 MyUser = 'pass@123'; 为登录 MyUser 创建用户 MyUser；

它会起作用，不要忘记提供所需的模式访问。

# c++ - 仅在链接为 -static 时从链接库中调用包装函数

> ID：12736251
> 
> 赞同：4
> 
> 时间：2012-10-04T21:27:02.630
> 
> 标签：c++, gcc, static, linker, wrapper

*编辑*：使标题更清晰。

我正在尝试用我自己的来包装 glibc`__assert_fail`和`__assert_perror_fail`函数，这些函数使用`syslog`.

我已经验证，如果我的断言失败，我的函数就会被调用。问题在于 libzmq 的断言。libzmq 的断言仅在我使用`-static`.

**笔记**

*   我修补了 libzmq 以调用`__assert_*`而不是`fprintf(stderr, ...)`，并且我已经验证它可以正确调用`__assert_*`.

*   我还修补了 libzmq 以从 zmq_assert 宏中随机出现断言失败，以便我可以轻松重现。如果需要补丁，我会放上去的。

这是一些测试代码

```
#include <stdlib.h>
#include <stdio.h>
#include <assert.h>
#include <errno.h>
#include <string.h>
#include <zmq.h>

extern "C" void
__wrap___assert_perror_fail(int __errnum, const char *__file,
                            unsigned int __line, const char *__function)
{
        fprintf(stderr, "TESTING123:: %s:%u %s: Unexpected error: %s.\n",
                __file, __line, __function, strerror(__errnum));
        abort();
}

extern "C" void
__wrap___assert_fail(const char *__assertion, const char *__file,
                     unsigned int __line, const char *__function)
{
        fprintf(stderr, "TESTING123:: %s:%u %s: Assertion '%s' failed.\n",
                __file, __line, __function, __assertion);
        abort();
}

int main()
{
#ifdef DO_ASSERT
        assert(1 == 0);
#endif
        void *ctx = zmq_init(0);
        void *req = zmq_socket(ctx, ZMQ_REQ);
        void *rep = zmq_socket(ctx, ZMQ_REQ);
        zmq_bind(rep, "inproc://inproc-1");
        zmq_connect(req, "inproc://inproc-1");
        unsigned long long c = 0;
        while (1) {
                zmq_msg_t msg;

                zmq_msg_init_size(&msg, 1024);
                zmq_send(req, &msg, 0);
                zmq_msg_close(&msg);

                zmq_msg_init(&msg);
                zmq_recv(rep, &msg, 0);
                zmq_send(rep, &msg, 0);
                zmq_msg_close(&msg);

                zmq_msg_init(&msg);
                zmq_recv(req, &msg, 0);
                zmq_msg_close(&msg);

                ++c;
                if (c % 1000000 == 0) {
                        fprintf(stderr, "processed %llu messages\n", c);
                }
        }
        return 0;
} 
```

我使用/不使用 DO_ASSERT、动态/静态构建 4 种方式

```
$ g++ -DDO_ASSERT -o t-me-dyn t.cc -Wl,-wrap,__assert_fail -Wl,-wrap,__asser_perror_fail -lzmq -lpthread -luuid -lrt 
$ g++ -static -DDO_ASSERT -o t-me-sta t.cc -Wl,-wrap,__assert_fail -Wl,-wrap,__asser_perror_fail -lzmq -lpthread -luuid -lrt 
$ g++ -o t-zmq-dyn t.cc -Wl,-wrap,__assert_fail -Wl,-wrap,__asser_perror_fail -lzmq -lpthread -luuid -lrt 
$ g++ -static -o t-zmq-sta t.cc -Wl,-wrap,__assert_fail -Wl,-wrap,__asser_perror_fail -lzmq -lpthread -luuid -lrt 
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../lib/libzmq.a(libzmq_la-ip.o): In function 'zmq::resolve_ip_interface(sockaddr_storage*, unsigned int*, char const*)':
(.text+0x49b): warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking 
```

运行它们时我得到以下信息

```
$ for bin in t-{me,zmq}-{dyn,sta}; do echo ==== $bin ====; ./$bin; done
==== t-me-dyn ====
TESTING123:: t.cc:29 int main(): Assertion '1 == 0' failed.
Aborted
==== t-me-sta ====
TESTING123:: t.cc:29 int main(): Assertion '1 == 0' failed.
Aborted
==== t-zmq-dyn ====
t-zmq-dyn: lb.cpp:142: int zmq::lb_t::send(zmq_msg_t*, int): Assertion 'rc == 0' failed.
Aborted
==== t-zmq-sta ====
TESTING123:: lb.cpp:142 int zmq::lb_t::send(zmq_msg_t*, int): Assertion 'rc == 0' failed.
Aborted 
```

那么我做错了什么？根据`man ld`

> 如果您使用 --wrap malloc 将其他代码与此文件链接，则所有对“malloc”的调用将改为调用函数“__wrap_malloc”。

这不是我所看到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:04:12.513

您对链接器选项如何工作的心理模型`--wrap`可能全错了。

这真的很简单：当您使用 链接特定的 ELF 可执行文件或共享库时`--wrap foo`，链接器*所做*的就是：

*   如果它看到对 的引用`foo`，则将其替换为对 的引用`__wrap_foo`，
*   如果它看到对 的引用`__real_foo`，它将替换为对 的引用`foo`。

我再说一遍，这就是它的*全部*作用。特别是，由于您没有`libzmq.so`与重新链接`--wrap`，因此`libzmq.so`继续调用`__assert_fail`（即，内部没有发生任何重命名`libzmq.so`）。

为了设置`libc`功能，忘记`--wrap`.

相反，只需在您的主可执行文件中*定义*一个新的。`__assert_fail`当你这样做时，无论调用是来自主可执行文件还是来自`libzmq.so`（或来自其他任何地方），你的定义都会被调用。

如果你不想调用`__assert_fail`from libc 的版本，你就完成了。如果这样做，您将不得不动态地查找它（通过`dlsym`）。

# xcode - 如何使用 Jenkins 运行 UIAutomation？

> ID：12736253
> 
> 赞同：1
> 
> 时间：2012-10-04T21:27:12.440
> 
> 标签：xcode, jenkins, instruments, ios-ui-automation

我正在尝试将 Instruments UIAutomation 与 Jenkins 的 CI 结合起来。

在 Jenkins 项目的配置中，我定义了一个调用脚本：

```
sh buildAndTest.sh 
```

它所做的就是调用 uitest

```
#!/bin/sh 
make uitest 
```

uitest 在 Makefile 中定义，它调用 Instruments：

```
/usr/bin/instruments -t pathToTemplate/MyTemplate.tracetemplate  pathToSimulator/Library/Application\ Support/iPhone\ Simulator/5.1/Applications/a_very_long_name/Main.app 
```

此代码在终端中以及当我调用“make uitest”时有效。Jenkins执行脚本时不起作用，控制台输出：

> 仪器使用错误：（空）make：*** [uitest] 错误 254 构建步骤“执行外壳”标记为构建失败已完成：失败

任何想法如何整合这两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T15:04:12.193

我刚做了，有点痛苦。

# 第 1.1 步：使用 Xcode 插件和模拟器 SDK 构建您的应用程序

![sdk](../Images/bfdbd8815d8d53b2aada9082758df6a9.png)

# 步骤 1.2：定义一个可读的构建目录

![在此处输入图像描述](../Images/6e6b0c0c67fc61eb12b5505bb1269dc1.png)

# 第 3 步：使用以下行添加 Shell 构建步骤：

```
instruments -t ~/Desktop/test1.tracetemplate __YOUR_BUILD_PATH__/_YOUR_APP_.app 
```

为我工作。告诉我你是否有任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:37:14.973

另一个原因可能是您正在给出各自的路径。如果有的话，用完整的限定路径替换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:29:24.917

确保 Jenkins 从代理以系统用户身份运行，并且系统已登录到桌面。如果桌面不可见，UI 自动化将失败。

# .net - 向现有应用程序提供第二个 *.config 文件

> ID：12736254
> 
> 赞同：1
> 
> 时间：2012-10-04T21:27:22.803
> 
> 标签：.net, configuration, batch-file, msbuild, version

我需要运行具有默认配置的程序（如果有帮助，它是 .net 框架的 MSBuild.exe）并提供额外的配置（重新绑定第 3 方程序集版本）。

问题是我不想更改现有的 MSBuild 配置。它对我有用，但是运行我的构建脚本的每个其他人都必须这样做，这是不希望的。我可以在不更改现有 MSBuild 配置的情况下以某种方式自动执行此操作吗？

当前批量构建内容：

```
%windir%\Microsoft.NET\Framework\v4.0.30319\MSBuild BuildRelease.msbuild 
```

配置，我需要与现有的合并：

```
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="xunit.extensions" publicKeyToken="8d05b1bb7a6fdb6c" culture="neutral"/>
                <bindingRedirect oldVersion="1.6.1.1521" newVersion="1.9.1.1600"/>
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="Moq" publicKeyToken="69f491c39445e920" culture="neutral"/>
                <bindingRedirect oldVersion="3.1.416.3" newVersion="4.0.10827.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

# python - 为什么我的 Scrapy CrawlSpider 规则不起作用？

> ID：12736257
> 
> 赞同：10
> 
> 时间：2012-10-04T21:27:33.457
> 
> 标签：python, scrapy

我已经设法用 Scrapy 编写了一个非常简单的爬虫，具有这些给定的约束：

*   存储所有链接信息（例如：锚文本、页面标题），因此有 2 个回调
*   使用 CrawlSpider 来利用规则，因此没有 BaseSpider

它运行良好，但如果我向第一个请求添加回调，它不会执行规则！

这是我的代码：（工作但不正确，有一个活生生的例子）

```
from scrapy.contrib.spiders import CrawlSpider,Rule
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from scrapySpider.items import SPage
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class TestSpider4(CrawlSpider):
    name = "spiderSO"
    allowed_domains = ["cumulodata.com"]
    start_urls = ["http://www.cumulodata.com"]
    extractor = SgmlLinkExtractor()

    def parse_start_url(self, response):
        #3
        print('----------manual call of',response)
        self.parse_links(response)
        print('----------manual call done')
        # 1 return Request(self.start_urls[0]) # does not call parse_links(example.com)
        # 2 return Request(self.start_urls[0],callback = self.parse_links) # does not call parse_links(example.com)

    rules = (
        Rule(extractor,callback='parse_links',follow=True),
        )

    def parse_links(self, response):
        hxs = HtmlXPathSelector(response)
        print('----------- manual parsing links of',response.url)
        links = hxs.select('//a')
        for link in links:
                title = link.select('@title')
                url = link.select('@href').extract()[0]
                meta={'title':title,}
                yield Request(url, callback = self.parse_page,meta=meta)

    def parse_page(self, response):
        print('----------- parsing page: ',response.url)
        hxs = HtmlXPathSelector(response)
        item=SPage()
        item['url'] = str(response.request.url)
        item['title']=response.meta['title']
        item['h1']=hxs.select('//h1/text()').extract()
        yield item 
```

我尝试通过 3 种方式解决此问题：

*   1：返回带有起始 url 的请求 -**不执行规则**
*   2：与上述相同，但有回调`parse_links`- 相同的问题
*   3：抓取起始地址`parse_links` *后*`parse_start_url`调用，通过实现，函数不会被调用

以下是日志：

```
----------manual call of <200 http://www.cumulodata.com>)

----------manual call done

#No '----------- manual parsing links', so `parse_links` is never called! 
```

**版本**

*   Python 2.7.2
*   Scrapy 0.14.4

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T21:35:03.610

这是一个完美运行的刮刀：

```
from scrapy.contrib.spiders import CrawlSpider,Rule
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from scrapySpider.items import SPage
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class TestSpider4(CrawlSpider):
    name = "spiderSO"
    allowed_domains = ["cumulodata.com"]
    start_urls = ["http://www.cumulodata.com/"]

    extractor = SgmlLinkExtractor()

    rules = (
        Rule(extractor,callback='parse_links',follow=True),
        )

    def parse_start_url(self, response):
        list(self.parse_links(response))

    def parse_links(self, response):
        hxs = HtmlXPathSelector(response)
        links = hxs.select('//a')
        for link in links:
            title = ''.join(link.select('./@title').extract())
            url = ''.join(link.select('./@href').extract())
            meta={'title':title,}
            cleaned_url = "%s/?1" % url if not '/' in url.partition('//')[2] else "%s?1" % url
            yield Request(cleaned_url, callback = self.parse_page, meta=meta,)

    def parse_page(self, response):
        hxs = HtmlXPathSelector(response)
        item=SPage()
        item['url'] = response.url
        item['title']=response.meta['title']
        item['h1']=hxs.select('//h1/text()').extract()
        return item 
```

**变化**：

1.  已实现`parse_start_url`- 不幸的是，当您为第一个请求指定回调时，不会执行规则。这是内置在 Scrapy 中的，我们只能通过一种解决方法来管理它。所以我们 `list(self.parse_links(response))`在这个函数里面做了一个。为什么`list()`？因为`parse_links`是生成器，而生成器是惰性的。所以我们需要明确地完全调用它。

2.  `cleaned_url = "%s/?1" % url if not '/' in url.partition('//')[2] else "%s?1" % url`- 这里有几件事：

    一个。我们在 URL 的末尾添加 '/?1' - 由于`parse_links`返回重复的 URL，Scrapy 将它们过滤掉。避免这种情况的更简单方法是传递`dont_filter=True`给 Request()。但是，您的所有页面都是相互链接的（从 pageAA 回到索引等），并且`dont_filter`此处会导致过多的重复请求和项目。

    湾。`if not '/' in url.partition('//')[2]`- 同样，这是因为您网站中的链接。其中一个内部链接是“www.cumulodata.com”，另一个是“www.cumulodata.com/”。由于我们明确添加了一种允许重复的机制，这导致了一个额外的项目。因为我们需要完美，所以我实现了这个 hack。

3.  `title = ''.join(link.select('./@title').extract())`- 您不想返回节点，而是返回数据。另外：在空列表的情况下，''.join(list) 比 list[0] 更好。

恭喜您创建了一个提出了一个奇怪问题的测试网站 - 重复既是必要的，也是不需要的！

# java - 如何发现监听端口 x 的 IP 地址

> ID：12736260
> 
> 赞同：0
> 
> 时间：2012-10-04T21:27:42.973
> 
> 标签：java, sockets, local-network, port-scanning

我想从我的子网扫描 IP 范围。我想保存将在特定端口上听到的 IP 地址。我使用这段代码：

```
 for (int host = 1; host < 255; host++) {
            String ip = networkAddress + host;

            Socket socket;
            try {
                socket = new Socket(ip, port);
                System.out.println(ip + "  +");
                serverList.add(ip);
                socket.close();
            }
            catch (Exception e) {
                System.out.println(ip + "  -");
            }
        } 
```

但我的问题是它需要太多时间......有没有更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:37:03.423

使用多线程。由于大部分时间实际上都花在等待响应上，因此您可以安全地创建 100 个（甚至 200 个）线程，从而将总时间减少两个数量级。使用[`Executors`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)类创建线程池并为每个主机提交一个任务。

请记住，`serverList`集合必须是线程安全的。使用`shutdown()`和`awaitTermination()`配对等待结果。或者用于[`CompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html)在结果到达时收集结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:17:19.563

使用`new Socket()`（无参数），然后`Socket.connect()`用短暂的超时调用，比如几秒钟。

# javascript - 如何在 TypeScript 中声明函数的返回类型

> ID：12736269
> 
> 赞同：168
> 
> 时间：2012-10-04T21:28:07.677
> 
> 标签：javascript, typescript, oop

我在这里检查了[https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md)这是[TypeScript 语言规范](http://www.typescriptlang.org/)，但我找不到如何声明函数的返回类型。

我在下面的代码中展示了我的期望：`greet(name:string): string {}`

```
class Greeter {
  greeting: string;
  constructor(message: string) {
    this.greeting = message;
  }
  greet(): string {
    return "Hello, " + this.greeting;
  }
} 
```

我知道我可以使用`(name:string) => any`，但这主要在传递回调函数时使用：

```
function vote(candidate: string, callback: (result: string) => any) {
  // ...
} 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-04T21:32:08.667

你是对的 - 这是一个完整的工作示例 - 你会看到它`var result`隐含地是一个字符串，因为返回类型是在`greet()`函数上指定的。将类型更改为`number`，您将收到警告。

```
class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() : string {
        return "Hello, " + this.greeting;
    }
} 

var greeter = new Greeter("Hi");
var result = greeter.greet(); 
```

这是数字示例 - 如果您尝试以下操作，您将在操场编辑器中看到红色曲线：

```
greet() : number {
    return "Hello, " + this.greeting;
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-11-04T20:45:50.610

使用箭头符号的返回类型与以前的答案相同：

```
const sum = (a: number, b: number) : number => a + b; 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-01-01T16:43:35.027

```
functionName() : ReturnType { ... } 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-10-04T22:43:18.653

您可以在 3.5.3.5 和 3.5.5 部分中阅读有关[语言规范中函数类型的更多信息。](http://go.microsoft.com/fwlink/?LinkId=267121)

TypeScript 编译器会在可能的情况下推断类型，这样做你不需要指定显式类型。所以对于 greeter 的例子，greet() 返回一个字符串字面量，它告诉编译器函数的类型是一个字符串，不需要指定类型。因此，例如在这个示例中，我有一个 greeter 类，它带有一个返回字符串的 greet 方法和一个分配给数字文字的变量。编译器将推断这两种类型，如果您尝试将字符串分配给数字，则会出现错误。

```
class Greeter {
    greet() {
        return "Hello, ";  // type infered to be string
    }
} 

var x = 0; // type infered to be number

// now if you try to do this, you will get an error for incompatable types
x = new Greeter().greet(); 
```

同样，此示例将导致错误，因为根据信息，编译器无法确定类型，这将是您必须具有显式返回类型的地方。

```
function foo(){
    if (true)
        return "string"; 
    else 
        return 0;
} 
```

但是，这将起作用：

```
function foo() : any{
    if (true)
        return "string"; 
    else 
        return 0;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-03T14:40:28.970

External return type declaration to use with multiple functions:

```
type ValidationReturnType = string | boolean;

function isEqual(number1: number, number2: number): ValidationReturnType {
    return number1 == number2 ? true : 'Numbers are not equal.';
} 
```

# python - choosing the right type of data for machine learning

> ID：12736278
> 
> 赞同：1
> 
> 时间：2012-10-04T21:28:39.953
> 
> 标签：python, scipy, scikit-learn

I've been wildly curious about [machine learning](http://scikit-learn.org), and I'm using [this](http://scikit-learn.org/dev/auto_examples/applications/plot_stock_market.html) to learn.

I was able to compile the code without issue, and generate the graph.

I would like to use a different data source. Currently they are using stock prices:

```
d1 = datetime.datetime(2003, 01, 01)
d2 = datetime.datetime(2008, 01, 01)

symbol_dict = {
        'TOT': 'Total',
        'XOM': 'Exxon',
        'CVX': 'Chevron',
        'COP': 'ConocoPhillips',
     ...
...
    }

symbols, names = np.array(symbol_dict.items()).T

quotes = [finance.quotes_historical_yahoo(symbol, d1, d2, asobject=True)
          for symbol in symbols]

open = np.array([q.open for q in quotes]).astype(np.float)
close = np.array([q.close for q in quotes]).astype(np.float) 
```

1.  what does `quotes` return? I understand it is price per stock, but I am getting something like this:

> [rec.array([ (datetime.date(2003, 1, 2), 2003, 1, 2, 731217.0, 28.12235692134198, 28.5, 28.564279672963064, 28.09825204398083, 12798800.0, 28.5), (datetime.date(2003, 1, 3), 2003, 1, 3, 731218.0, 28.329084507042257, 28.53, 28.634476056338034, 28.28890140845071, 9221900.0, 28.53), (datetime.date(2003, 1, 6), 2003, 1, 6, 731221.0, 28.482778999450247, 29.23, 29.406761957119297, 28.45064046179219, 11925100.0, 29.23), ...,

1.  i would like to input my own dataset. can you please give me an example of a dataset that I can input into `quotes` ?

the entire code is here:

[http://scikit-learn.org/dev/auto_examples/applications/plot_stock_market.html](http://scikit-learn.org/dev/auto_examples/applications/plot_stock_market.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:22:55.590

If you execute `finance.quotes_historical_yahoo?` in ipython it would tell you:

```
In [53]: finance.quotes_historical_yahoo?
Type:       function
String Form:<function quotes_historical_yahoo at 0x10f311d70>
File:       /Users/dvelkov/src/matplotlib/lib/matplotlib/finance.py
Definition: finance.quotes_historical_yahoo(ticker, date1, date2, asobject=False, adjusted=True, cachename=None)
Docstring:
Get historical data for ticker between date1 and date2\.  date1 and
date2 are datetime instances or (year, month, day) sequences.

See :func:`parse_yahoo_historical` for explanation of output formats
and the *asobject* and *adjusted* kwargs.

...(more stuff) 
```

So we check `parse_yahoo_historical`:

```
In [54]: finance.parse_yahoo_historical?
Type:       function
String Form:<function parse_yahoo_historical at 0x10f996ed8>
File:       /Users/dvelkov/src/matplotlib/lib/matplotlib/finance.py
Definition: finance.parse_yahoo_historical(fh, adjusted=True, asobject=False)
Docstring:
Parse the historical data in file handle fh from yahoo finance.

*adjusted*
  If True (default) replace open, close, high, and low prices with
  their adjusted values. The adjustment is by a scale factor, S =
  adjusted_close/close. Adjusted prices are actual prices
  multiplied by S.

  Volume is not adjusted as it is already backward split adjusted
  by Yahoo. If you want to compute dollars traded, multiply volume
  by the adjusted close, regardless of whether you choose adjusted
  = True|False.

*asobject*
  If False (default for compatibility with earlier versions)
  return a list of tuples containing

    d, open, close, high, low, volume

  If None (preferred alternative to False), return
  a 2-D ndarray corresponding to the list of tuples.

  Otherwise return a numpy recarray with

    date, year, month, day, d, open, close, high, low,
    volume, adjusted_close

  where d is a floating poing representation of date,
  as returned by date2num, and date is a python standard
  library datetime.date instance.

  The name of this kwarg is a historical artifact.  Formerly,
  True returned a cbook Bunch
  holding 1-D ndarrays.  The behavior of a numpy recarray is
  very similar to the Bunch. 
```

In your case you are using `asobject=True` so the format you get is `date, year, month, day, d, open, close, high, low, volume, adjusted_close`.

# c++ - 结合基于异常和错误代码的类实现

> ID：12736279
> 
> 赞同：1
> 
> 时间：2012-10-04T21:28:40.577
> 
> 标签：c++, exception, interface

我正在编写一个具有两种不同使用模型的 C++ 类。一种是外部的，我们假设用户不希望引发任何异常。而是返回错误代码。另一种使用方式是内部的，我努力避免繁琐的错误代码检查并更喜欢处理异常。

将这两种方法结合起来的好方法是什么？

**编辑：**

*   两种方法都可以在同一个二进制文件中使用
*   显式优于隐式
*   避免向用户公开特殊构造。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:33:09.070

创建该类的两个版本，一个抛出，一个返回错误代码。它们都可以从包含大量代码的公共基础派生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:44:39.447

我比我更喜欢 Mark Ransom 的回答，除非由于其他原因创建两个类是不可行的。

作为替代方案，您可以创建接口，以便每个函数都有一个带有默认值的最终参数，例如 int *pRet = NULL。如果 pRet == NULL 表示使用异常。如果 pRet != NULL，则调用者已传入一个指针，该指针应在函数末尾使用错误代码进行更新。

在函数内部，您需要捕获异常，然后根据 pRet 参数吞下它们或重新抛出它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:44:34.467

从来没有尝试过这样的事情，但这就是我会做的。

错误类型：

```
extern const bool exceptionmode;

enum error_codes {no_error, whatever};
struct error_type {
    error_codes id;
    //maybe also a non-owning const char* message?

    error_type() :id(no_error) {}
    error_type(error_codes code) :id(code) 
    {
        if (exceptionmode) throw_as_exception();
    }

    const char* get_as_string() {
        switch(id) {
        case whatever: return "out of bounds exception";
        case no_error: return "no error";
        default: return "unknown exception";
        }
    }
    void throw_as_exception() {
        switch(id) {
        case whatever: throw std::out_of_bounds("out of bounds exception");
        case no_error: break; //no error
        default: throw std::exception("unknown exception");
        }
    }

}; 
```

类和函数：

```
class myclass {
public:        
    error_type my_member_function() {
         //stuff
         if (condition)
             return whatever;
         //more stuff
         return no_error;
    }
}; 
```

如果你真的很勇敢，你可以让 error_type 类断言它是否永远不会被比较、转换或检查，以确保没有人忘记检查返回值。

# ajax - Rails 3.2 嵌套路由和 AJAX

> ID：12736281
> 
> 赞同：0
> 
> 时间：2012-10-04T21:28:55.543
> 
> 标签：ajax, routes, ruby-on-rails-3.2

我正在使用 Ruby on Rails 3.2 并创建了一个简单的测试博客应用程序。有一个 Post 模型和一个 Comment 模型，其中一个 post`has_many :comments`和一个 comment `belongs_to :post`。

**在 routes.rb 中：**

```
resources "posts" do
  resources "comments"
end 
```

我在父帖子页面的底部显示评论并通过 AJAX 提交新评论。因此，我认为用户没有必要能够访问/posts/1/comments/XXX。但是，如果我`resources "comments"`从我的路线中删除，那么评论功能将不再起作用。如何防止用户在浏览器中访问 /posts/1/comments/XXX 但保持评论 AJAX 功能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:42:10.733

作为解决方案，您可以做的是将请求设置为 xhr 请求的条件。您可以通过以下方式进行操作：

```
# routes.rb
class OnlyAjaxRequest
  def matches?(request) 
    request.xhr?
  end
end

resources "posts" do
  resources "comments", :constraints => OnlyAjaxRequest.new
end 
```

[您可以在此博客文章](http://railsadventures.wordpress.com/2012/10/07/routing-only-ajax-requests-in-ror/)中找到有关路由约束的更多信息。

# angularjs - AngularJS - 在其他分部中动态使用分部

> ID：12736283
> 
> 赞同：25
> 
> 时间：2012-10-04T21:28:58.447
> 
> 标签：angularjs

我对 AngularJS 比较陌生，想知道动态拉入部分模板的可行性。考虑这个抽象（并为本示例简化）的模块。这本身就是一个部分模板，将在整个应用程序中重复使用。

**部分模块标记**

```
<div class="module">
    <h2 class="module-title">{{module.title}}</h2>

    <div class="module-content">
        {{module.content}}
    </div>

</div> 
```

在客户端获取一些数据后，我可能希望`module.content`是一个简单的文本字符串，没有问题。如果我可以`module.content`根据我正在使用的数据动态地将其他部分模板插入其中，这将是有用的。例如，在我的回复中，我有一个我希望显示的标题列表，是否可以引入处理标题的部分模板？在另一个地方，`module.content`可能是处理图像库的部分模板。

任何输入或方向将不胜感激！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-04T22:34:49.923

有几种方法可供您使用。

您最好的选择是添加您自己的[指令](http://docs.angularjs.org/guide/directive)。扩展您的示例：

```
module.directive('myModule', function() {
  return {
    restrict: 'A',
    scope : {
      title : '@'
    },
    templateUrl : '/partial/module.html',
    transclude : true
  };
}); 
```

我们将使用嵌入来使内容更加灵活。现在部分：

```
<div class="module">
  <h2 class="module-title">{{title}}</h2>

  <div class="module-content" ng-transclude></div>
</div> 
```

安装此指令后，您可以使用以下 HTML：

```
<div my-module title="{{module.title}}">
  {{module.content}}
</div> 
```

另一种选择是使用该[`ng-include`](http://docs.angularjs.org/api/ng.directive:ngInclude)指令。这是对部分的简单嵌入，不同之处在于被嵌入的部分与其包含的上下文处于相同的范围内。

```
<div ng-include="module.partialUrl"></div> 
```

在上述情况下，Angular 将在 URL 处嵌入部分内容`$scope.module.partialUrl`。（编辑：这意味着您可以通过替换 ngInclude 使用的范围变量来动态替换 UI。太棒了，对吧？）

如果您只是重用相同的部分以避免重复代码，那么只需将 URL 括在单引号中：

```
<div ng-include="'/partial/foo.html'"></div> 
```

# asp.net - 如何在detailview控件中添加下拉列表

> ID：12736286
> 
> 赞同：0
> 
> 时间：2012-10-04T21:29:05.810
> 
> 标签：asp.net

如何在 DetailView 控件中放置下拉列表？我已经将该字段转换为模板，但是在添加下拉列表时遇到了一些问题，基本上它没有将数据绑定到我的表中。我只是想在下拉列表中有一些静态数据，但是当我点击更新按钮时它应该保存它。我在编辑模式下有 DetailView。谢谢

```
<asp:DetailsView ID="DetailsView2" runat="server" AutoGenerateRows="False" 
            BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid" BorderWidth="3px" 
            CellPadding="4" CellSpacing="2" DataKeyNames="Post_ID" 
            DataSourceID="MyDataSource" ForeColor="Black" Height="50px" 
            Width="805px" DefaultMode="Edit">
            <EditRowStyle BackColor="#FFFFCC" Font-Bold="True" ForeColor="#003366" 
                BorderStyle="Groove" />
            <Fields>
                <asp:BoundField DataField="Post_ID" HeaderText="ID" ReadOnly="True" 
                    SortExpression="Post_ID" />
                <asp:TemplateField HeaderText="Category" 
                    SortExpression="CategoryList">

                     <EditItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" 
                            Text='<%# Bind("CategoryList") %>'
                            Height="20px" Width="250px"></asp:TextBox>
                    </EditItemTemplate>

                      <InsertItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" 
                            Text='<%# Bind("CategoryList") %>'
                            Height="20px" TextMode="MultiLine" Width="300px"></asp:TextBox>
                    </InsertItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label2" runat="server" Text='<%# Bind("CategoryList") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>

 <asp:TemplateField ShowHeader="False">
                    <EditItemTemplate>
                        <asp:Button ID="Button1" runat="server" CausesValidation="True" 
                            CommandName="Update" Text="Update" />
                        &nbsp;<asp:Button ID="Button2" runat="server" CausesValidation="False" 
                            CommandName="Cancel" Text="Cancel" />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Button ID="Button1" runat="server" CausesValidation="False" 
                            CommandName="Edit" Text="Edit" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Fields>
            <FooterStyle BackColor="#CCCCCC" />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
            <InsertRowStyle BackColor="#FFFFCC" />
            <PagerStyle BackColor="#CCCCCC" ForeColor="Black" HorizontalAlign="Left" />
            <RowStyle BackColor="White" />
        </asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:52:19.090

你可以试试

```
 <EditItemTemplate>
        <asp:DropDownList ID="DropDownList2" Runat="server"   >
           <asp:ListItem>1</asp:ListItem>
           <asp:ListItem>2</asp:ListItem>
        </asp:DropDownList>
     </EditItemTemplate> 
```

代码背后

```
protected void dvItem_DataBound(object sender, EventArgs e)
{
    if (this.dvItem.CurrentMode == DetailsViewMode.Edit)
    {
       DropDownList control= (DropDownList)this.dvItem.FindControl("IdDDL");
       ..          
    }
} 
```

选择

```
protected void dvItem_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{
       DropDownList control = (DropDownList)this.dvItem.FindControl("IdDDL");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:52:59.883

它很简单，只需将您的字段转换为模板字段，然后单击 DetailsView 的智能标签，然后选择编辑模板，然后在 EditItem 模板的字段中添加带有静态数据的 DropDownList 并在 EditDataBindings 中设置 BoundTo 属性。

像这样 ：

```
<asp:DropDownList ID="DropDownList1" runat="server" 
                            SelectedValue='<%# Bind("yourField") %>'>
                            <asp:ListItem>One</asp:ListItem>
                            <asp:ListItem>Two</asp:ListItem>
                            <asp:ListItem>Three</asp:ListItem>
                        </asp:DropDownList> 
```

# php - 用于读取 GET 变量的 AS3 类

> ID：12736293
> 
> 赞同：0
> 
> 时间：2012-10-04T21:29:34.540
> 
> 标签：php, actionscript-3, communication, httprequest

当通过 GET 到 php 脚本与服务器通信时，我需要反馈，通常格式为：status=OK&msg=No further actions&other=blablabla ... 所以我知道这是一个成功的请求。但是 AS3 是非常面向对象的，所以我做了一个 Class 把它放在一个对象中：

```
package com.gustavopi.comm {

    public class Vars {

        public var demo:String = new String();
        public var Obj:Object = new Object();
        public var Var:Array = new Array();
        public var Val:Array = new Array();
        public function Vars(strVars:String=null) {
            var Termos:Array = strVars.split("&");
            for(var t in Termos){
                var termo:String = Termos[t];
                var Elem:Array = termo.split("=");
                Obj[Elem[0]] = Elem[1];
                Var.push(Elem[0]);
                Val.push(Elem[1]);
                demo += Elem[0]+": "+Elem[1]+String.fromCharCode(13);
            }
        }

    }

} 
```

优点是使用“演示”方法快速检测错误，但变量是 Obj 的属性，而不是对象本身的属性，这有点奇怪 - 但有效。

我不确定这是否是处理任务的最佳方式，或者我是否做了一些在 AS3 核心中已经存在的事情。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:54:54.990

首先，您的变量应以小写字母开头，而类应以大写字母开头。

有几种方法可以从服务器获取一些数据，您的方法是最简单和最古老的一种。它通常与 AS2 一起使用。这正是为什么已经有一个类来处理这个问题的原因：

```
var urlVariables:URLVariables = new URLVariables("firstName=Tom&lastName=Jones");
trace(urlVariables.lastName + "," + urlVariables.firstName); 
//will trace "Jones,Tom" 
```

查看[AS3 URLVariables 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html)。

# voip - 从免费 PBX/Trixbox 运行 Shell 脚本

> ID：12736294
> 
> 赞同：0
> 
> 时间：2012-10-04T21:29:43.853
> 
> 标签：voip, asterisk, pbx, trixbox

我没有运气找到满足我要求的解决方案。我有一项送货服务，并想通过拨打他们的电话号码来通知一组用户。我有电话号码列表和一种以 shell 脚本形式呼叫人们的方法，但是，我想通过调用分机号码和最好是密码来执行此脚本，这样即使分机暴露，也只有拥有密码的人才能拨打电话不知何故。

我正在运行以 IVR 作为主菜单并启用直拨的 TrixBox 2.8.0.4。

这是我尝试过的，希望解决方案是围绕自定义扩展。不确定我是否朝着正确的方向前进。

1.  取消注释 extensions.conf 文件中的 extensions_custom.conf。
2.  在 extensions_custom.conf 文件中添加了一个条目，如下所示。

[来自-internal-custom] exten => 200,1,System(/home/rj/call.sh)

现在，当我拨打分机 200 时，PBX 说它不是有效的分机。由于此扩展不是在标准扩展中创建的，因此 PBX 可能无法找到它。似乎我需要创建入站路由或以不同的方式创建扩展，以便 PBX 可以看到它并运行我的脚本。

您能否告知遗漏了什么或我的完整方法不正确？如果这可行，我希望在执行脚本之前从拨打分机的人那里得到一些输入来验证代码等。

预先感谢您的支持。

-RJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:24:15.823

使用扩展为您的应用程序创建自定义竞赛`s`。使用自定义目的地，将您的自定义上下文添加为目的地，如下所示：![自定义目的地](../Images/588a7ccd33e9e372105c8904681a18d6.png)

然后添加一个杂项应用程序，功能代码为（根据您的示例）200，并将其指向您的自定义目标，如下所示：

![在此处输入图像描述](../Images/50afc6081ded59c2a2264cf7a269743a.png)

完成后不要忘记点击应用配置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:14:33.983

您的来电必须匹配上下文 [from-internal-custom]。您配置的扩展 (200) 仅在此上下文中有效。要检查您的设置是否通常启用，请运行以下命令并检查您的 200：

asterisk -rx "拨号方案显示"

# wcf - 如何以编程方式读取 WCF 路由器上的当前筛选表

> ID：12736296
> 
> 赞同：2
> 
> 时间：2012-10-04T21:30:01.747
> 
> 标签：wcf, wcf-binding, wcf-routing, wcf-behaviour

我们有一个现有的 wcf 路由器，其配置如下：

```
 <routing>
        <filters>
            <filter name="Other" filterType="MatchAll" />
            <filter name="action1" filterType="Action" filterData="http://tempuri.org/action2" />
            <filter name="action2" filterType="Action" filterData="http://tempuri.org/action1" />
        </filters>
        <filterTables>
            <filterTable name="FilterTable">
                <add filterName="action1" endpointName="Service1" priority="1" />
                <add filterName="action2" endpointName="Service2" priority="1" />
                <add filterName="Other" endpointName="Service1" priority="0" />
            </filterTable>
        </filterTables>
    </routing> 
```

我们希望能够查询路由器以询问“给定请求，您将路由到哪个端点？”

有没有办法通过 API 以编程方式执行路由？例如，通过将返回端点名称的路由方法运行请求

# javascript - beforeSend jquery 函数的参数是什么？

> ID：12736299
> 
> 赞同：0
> 
> 时间：2012-10-04T21:30:17.753
> 
> 标签：javascript, ajax, jquery

我已经看到了一些`beforeSend`回调函数的例子。这些示例有时使用输入参数：`beforeSend:function(req)`或`beforeSend:function(xhr)`。

我想这个参数是`XMLHTTPRequest`jquery 请求的，但是当我尝试这些示例时，似乎`xhr`或者`req`对象是`null`.

`xhr`在调用jquery对象的执行之前是否需要创建参数并初始化？

这是我正在尝试的查询：

```
function make_basic_auth(un, pss)
{
  var tok = un + ':' + pss;
  var hash = Base64.encode(tok);
  return "Basic " + hash;
}

$('#loginform').submit(function()
{
    $.ajax
    (
        {
            type: 'POST',
            url: 'my.ip.address',
            beforeSend: function(jqXHR, settings)
            {   
                var username = $('.username').val();
                var password = $('.passcode').val();
                var auth = make_basic_auth(username, password);

                jqXHR.setRequestHeader("Authorization",  auth);
                jqXHR.setRequestHeader('Content-Type', 'text/plain');
            },
            success: function (){
               alert("ok");
            },
            error: function (){
               alert("no");
            }
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:05:01.653

签出以下代码：

```
$.ajax({
  url: "google.com",
    beforeSend: function(jqXHR, settings) {
        jqXHR.error = function(){
            alert("failed");
        }
    }
})​ 
```

工作示例：http: [//jsfiddle.net/kXerD/](http://jsfiddle.net/kXerD/)

在这里，我是说在发送请求之前，为这个请求添加一个错误处理程序。JQuery 提供了 jqXHR 的对象和与此请求相关的设置。我们不需要初始化它们。

# c# - 如何有效地将传入数据写入磁盘？

> ID：12736301
> 
> 赞同：4
> 
> 时间：2012-10-04T21:30:22.840
> 
> 标签：c#, io

我目前正在编写一个程序，该程序每秒从（可能很大）数量的源中读取一个短字符串。我需要能够将这些数据写入单独的文件，并且我希望获得有关最有效方法的一些指导。

我当前的实现将数据排队，并在队列超过一定大小时刷新它。

有更好的方法吗？在 C# 中，有没有特别高效的 IO 构造？

编辑：总的来说，我相信“合理”的最大值将是 ~100 个数据源，但在最坏的情况下可能是几百个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:33:18.540

您必须定义“大”以获得最佳答案。你真的不需要你自己的队列。.NET Framework 的 BufferedStream 非常高效

[http://msdn.microsoft.com/en-us/library/3dsccbf4.aspx](http://msdn.microsoft.com/en-us/library/3dsccbf4.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.write.aspx](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.write.aspx)

如果“大”没有达到操作系统允许的最大文件句柄数，您可以简单地让文件保持打开状态（如果其他进程在您编写它们时必须访问它们，则根据需要设置共享）。这将避免每秒打开每个文件一次的开销。

确保无论您使用何种缓冲方法，在停电或其他系统故障的情况下，您缓冲的数据不会超过您准备丢失的数据。

如果您不能接受数据丢失，您可以立即将每个字符串写入文件（无需任何缓冲），而是使用带有写入缓存和电池备份的磁盘控制器。

**更新**

100 个数据源远远低于任何运行 .Net 的操作系统的最大打开文件数。您应该没问题，只需打开文件并让它们保持打开状态，直到您完成它们。

有关 Windows 中句柄数量限制的有趣读物，请参阅

[http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx](http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx)

# c# - 如何在 Metro (Windows 8) 应用程序中检测 Alt？

> ID：12736305
> 
> 赞同：1
> 
> 时间：2012-10-04T21:30:33.517
> 
> 标签：c#, keyboard, windows-8, windows-runtime

我试图弄清楚如何检测 Alt 已被按下。

Keyboard 类已被弃用，并且 KeyUp/Down 事件在其 EventArgs 中不包含对应于 Alt 的虚拟键。

那我该如何检测呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:37:05.590

根据 MSDN 上 VirtualKey 页面的社区添加部分中的 Companynerd255，您仍然可以获得丢失的密钥：

> 枚举中缺少某些键 VirtualKey 中缺少键盘上的某些键，包括 Equals 键和其他一些键。但是，这些键仍然会触发 WinRT 中的键事件，因此存在一个简单的解决方法：
> 
> 找出该键的整数键码是什么（例如，对于 Equals，它是 187） 在检查该键时将该整数转换为 VirtualKey（例如 (VirtualKey)187）

在这里找到：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.system.virtualkey.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.virtualkey.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:44:17.557

呜呜。显然“菜单”VirtualKey 代码用于“Alt”

我猜是因为它会调出菜单。

如果你去[旧的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)，它实际上就是这样说的：

> 菜单 ALT 键。

但是，在[新文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.virtualkey.aspx)中，并没有说：

> 菜单 | menu 18 菜单键或按钮。

呃，好吧....

# python - 测试以查看 Python LDAP 连接是否有效

> ID：12736309
> 
> 赞同：2
> 
> 时间：2012-10-04T21:30:51.910
> 
> 标签：python, django, python-ldap

在我们工作的应用程序中，我们有一个用于身份验证的 CAS 后端，然后我们存储我们希望从 LDAP 服务器检索的用户数据。为方便起见，我们有一个自定义`backends.py`的后端进行身份验证。这个后端扩展了[Django-CAS 后端](https://bitbucket.org/cpcc/django-cas/overview)。为了不必每次将 LDAP 连接存储到类变量并查看它是否存在时都重新连接到 LDAP 服务器。如果是这样，那么我们重用那个。

```
if not hasattr(PopulatedCASBackend, 'ldap_server'):
    PopulatedCASBackend.ldap_server = ldap.initialize(settings.LDAP_SERVER_URL)
    PopulatedCASBackend.ldap_server.simple_bind_s() 
```

但我们发现，经过一段时间后，LDAP 会认为此连接已失效，并拒绝使用此连接。所以我决定在代码中添加一个 else 语句

```
else :
# we are trying to see if our current connection isn't stale. If it is, close it and remake
    try :
        user_data = ldap_server.search_s(
                        # all the correct params to search
                    )
    except:
        #connection is stale, so remake a new connection
        PopulatedCASBackend.ldap_server.unbind_s()
        PopulatedCASBackend.ldap_server = ldap.initialize(settings.LDAP_SERVER_URL)
        PopulatedCASBackend.ldap_server.simple_bind_s() 
```

那么我的问题是，有没有更好的方法来实现这一点？我知道这是可行的，但这意味着每次我这样做时，我都必须运行两次搜索（或者我想我可以使用从这两种方式返回的数据......）无论如何，我觉得这很骇人听闻，在哪里为了查看连接是否无法正常工作，`try`如果它没有成功，我会修复它。有没有更好的办法？

# php - 文件未发布 html+js+php

> ID：12736314
> 
> 赞同：1
> 
> 时间：2012-10-04T21:31:07.067
> 
> 标签：php, jquery, html, file, posting

我的 HTML 中有一个发送文件的字段。当用户选择图像时，他们会预览即将上传的图像（js）。当这个预览脚本被激活时，`$_FILES`帖子不会发送任何数据（用 php 验证`var_dump($_FILES)`）。

这是JS：

```
function readURL(input) {
if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (e) {
        $('#preview')
            .attr('src', e.target.result)
            .css('display', 'block');
        $('#upload').html('<i class="icon-upload"></i> <input type="file" onchange="readURL(this);" size="1" name="foto" class="input-file" />Cambiar im&aacute;gen')
    };

    reader.readAsDataURL(input.files[0]); // <- If I delete this line it posts correctly but dosen't preview the image.
} 
```

有人看到错误了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:05:50.750

实际上，我认为这是 html 5 功能。它肯定会运行

Internet Explorer = 10+，Firefox：10+，Chrome：13+，Opera：12+，Safari：部分

# jquery - JpList 灯箱不工作

> ID：12736315
> 
> 赞同：1
> 
> 时间：2012-10-04T21:31:09.460
> 
> 标签：jquery, sorting, filter, lightbox

我在我们的网站上添加了 JPList jQuery 排序和过滤插件。该站点提供了有关如何集成 Shadowbox 的示例。然而，Shadowbox 在我们嵌入的 Vimeo 视频中表现不佳，因此我们想切换到非常相似且与 Vimeo 配合良好的 Orangebox。

因此，我们将它们切换出来并引用了 Orangebox，但现在排序和过滤器不起作用。这是我们网站的链接： [http ://www.metrolibrary.org/stories/stories.htm](http://www.metrolibrary.org/stories/stories.htm)

这是演示的链接：http: [//do-web.com/jplist/demo-shadowbox](http://do-web.com/jplist/demo-shadowbox)

谁能帮我解决这个问题？我不知所措。

# scala - 流式传输完成后，Play2 Framework 代理流式传输内容到客户端保持连接打开

> ID：12736320
> 
> 赞同：2
> 
> 时间：2012-10-04T21:31:20.057
> 
> 标签：scala, streaming, playframework-2.0, iterate

下面的代码确实流回客户端，我收集的是比使用 Java 的 IO 流更惯用的方式。但是，它有一个问题：流完成后连接保持打开状态。

```
def getImage() = Action { request =>
  val imageUrl = "http://hereandthere.com/someimageurl.png"
  Ok.stream({ content: Iteratee[Array[Byte], Unit] => 
    WS.url(imageUrl).withHeaders("Accept"->"image/png").get { response => content }
    return
  }).withHeaders("Content-Type"->"image/png")
} 
```

这用于将大型（>1 mb）文件从内部 API 流式传输到请求者。

问题是，为什么它保持连接打开？它对上游服务器有什么期望吗？我使用 curl 测试了上游服务器，并且连接确实关闭了 - 它只是在通过此代理时没有关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:45:48.757

流未完成的原因是没有将 EOF 发送到从 WS.get() 调用返回的迭代对象。如果没有这个明确的 EOF，连接将保持打开状态——因为它处于分块模式，并且可能是一个长时间运行的类似彗星的连接。

这是固定代码：

```
Ok.stream({ content: Iteratee[Array[Byte], Unit] => 
  WS.url(imageUrl)
    .withHeaders("Accept"->"image/png")
    .get { response => content }
    .onRedeem { ii =>
       ii.feed(Input.EOF)
    }
}).withHeaders("Content-Type"->"image/png") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T20:25:01.730

播放 2.2.x 更新：

```
def proxy = Action.async {
  val url = "http://localhost:9000"

  def enumerator(chunks: Iteratee[Array[Byte], Unit] => _) = {
    new Enumerator[Array[Byte]] {
      def apply[C](i: Iteratee[Array[Byte], C]): Future[Iteratee[Array[Byte], C]] = {
        val doneIteratee = Promise[Iteratee[Array[Byte], C]]()
        chunks(i.map {
          done =>
            doneIteratee.success(Done[Array[Byte], C](done)).asInstanceOf[Unit]
        })
        doneIteratee.future
      }
    }
  }

  val iterateePromise = Promise[Iteratee[Array[Byte], Unit]]()
  val resultPromise = Promise[SimpleResult]()

  WS.url(url).get {
    responseHeaders =>

      resultPromise.success(new Status(responseHeaders.status).chunked(
        enumerator({
          content: Iteratee[Array[Byte], Unit] => iterateePromise.success(content)
        }
        )).withHeaders(
        "Content-Type" -> responseHeaders.headers.getOrElse("Content-Type", Seq("application/octet-stream")).head,
        "Connection" -> "Close"))

      Iteratee.flatten(iterateePromise.future)
  }.onComplete {
    case Success(ii) => ii.feed(Input.EOF)
    case Failure(t) => throw t
  }

  resultPromise.future
} 
```

如果有人有更好的解决方案，我很感兴趣！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T15:02:58.827

这是play 2.1.0的修改版本。请参阅[https://groups.google.com/forum/#!msg/play-framework/HwoRR-nipCc/gUKs9NexCx4J](https://groups.google.com/forum/#!msg/play-framework/HwoRR-nipCc/gUKs9NexCx4J)

感谢 Anatoly G 的分享。

```
def proxy = Action {

   val url = "..."

   Async {
     val iterateePromise = Promise[Iteratee[Array[Byte], Unit]]
     val resultPromise = Promise[ChunkedResult[Array[Byte]]]

     WS.url(url).get { responseHeaders =>
       resultPromise.success {
         new Status(responseHeaders.status).stream({ content: Iteratee[Array[Byte], Unit] =>
           iterateePromise.success(content)
         }).withHeaders(
           "Content-Type" -> responseHeaders.headers.getOrElse("Content-Type", Seq("application/octet-stream")).head,
           "Connection" -> "Close")
       }
       Iteratee.flatten(iterateePromise.future)
     }.onComplete {
       case Success(ii) => ii.feed(Input.EOF)
       case Failure(t) => resultPromise.failure(t)
     }

     resultPromise.future
   }

} 
```

# php - 如果两者中的任何一个等于

> ID：12736326
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:31:37.823
> 
> 标签：php, date, datetime, calendar, logical-operators

具有以这种格式存储在数据库中的开始日期和结束日期：

```
start date= 20121004     //4th October 2012
end date= 20121004     //16th November 2012 
```

所以我可以使用日期格式：

```
$date = date("Ymd"); // returns: 20121004 
```

确定何时显示和不显示

重新填充我使用的更新输入框：

```
$start=(str_split($stdate,4));// START DATE: splits stored date into 2x4 ie: 20121209 = 2012 1209
$syr =  $start[0];// re first half ie: 2012 which is the year
$start2 = $start[1];//re second half ie: 1209
$start3=(str_split($start2,2));// splits second half date into 2x2 ie: 1209 = 12 09
$smth = $start3[0]; // first half = month ie: 12
$sday = $start3[1];  // second half = day ie: 09
$expiry=(str_split($exdate,4)); ///SAME AGAIN FOR EXPIRY DATE ...
$xyr =  $expiry[0];
$expiry2 = $expiry[1];
$expiry3=(str_split($expiry2,2));
$xmth = $expiry3[0]; 
$xday = $expiry3[1]; 
```

这工作正常，但我需要重新填充显示数据库中日期的月份的输入框，如下所示

```
<option value="01">January</option`> 
```

使用

```
if ($smth==01):$month='January'; endif;
if ($xmth==01):$month='January'; endif;
// if the start and/or expiry month number = 01 display $month as January
if ($smth==02):$smonth='February'; endif;
if ($xmth==02):$smonth='February'; endif;
if ($smth==03):$month='March'; endif;

<select name="stmonth" class="input">
<option value="<?=$smth?>"><?=$month?></option>
...
</select> 
```

**有没有一种更简单的方法来显示 IF EITHER ONE EQUALS 而不必为每个$smth**和**$xmth**写两次同一行？回覆：`if ($smth **and or** $xmth ==01):$month='January'; endif;`

======================UPDATE==================== 找到了一种更简单的显示方式使用嵌套的 if 循环。与原始问题无关，但可能对某人有用：

```
$months = array(X,January,February,March,April,May,June,July,August,September,October,November,December); 
```

///第一个记录虚拟以保持代码更具相关性

```
//simple swith command
switch ($smth){
case 1: $s = 1; break;
case 2: $s = 2; break;
case 3: $s = 3; break;
case 4: $s = 4; break;
case 5: $s = 5; break;
case 6: $s = 6; break;
case 7: $s = 7; break;
case 8: $s = 8; break;
case 9: $s = 9; break;
case 10: $s = 10; break;
case 11: $s = 11; break;
case 12: $s = 12; break;
default; }
switch ($xmth){
case 1: $x = 1; break;
case 2: $x = 2; break;
case 3: $x = 3; break;
case 4: $x = 4; break;
case 5: $x = 5; break;
case 6: $x = 6; break;
case 7: $x = 7; break;
case 8: $x = 8; break;
case 9: $x = 9; break;
case 10: $x = 10; break;
case 11: $x = 11; break;
case 12: $x = 12; break;
default; } 
```

然后显示如下：

```
<select name="stmonth" class="input">
<option value="<?=$smth?>"><?=$months[$s]?></option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:34:48.577

`if( statement || statement)`如果任一陈述为真，则将通过。

```
if( $smth == 1 || $xmth == 1) 
```

请注意，带有前导`0`的数字被认为是八进制数字，因此`09`将成为`0`因为`9`不是有效的八进制数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:36:11.177

我相信 OR 语句是您正在寻找的。

`if ($smth == 1 || $xmth == 1)`

请阅读[PHP 运算符](http://php.net/manual/en/language.operators.logical.php)。

如果它们都必须是正确的，则有一个 AND，而不是使用嵌套`if`语句：

```
if(something && somethinelse) {
    //do this 
} 
```

代替：

```
if(something) { 
    if(somethingelse) {
       //do this
 } 
```

# wordpress - Wordpress MU - 能够访问索引 .html 和 .php

> ID：12736335
> 
> 赞同：0
> 
> 时间：2012-10-04T21:32:38.010
> 
> 标签：wordpress, .htaccess, redirect

我有一个索引`.html`保留页面，但我想访问 wordpress 的`.php`. 我需要在我的 .htaccess 中放置什么来启用它？

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)(.*)$ [NC]
RewriteRule ^(.*)$ http://%2/$1 [L,R=301]
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:14:41.387

我安装了一个名为**Permalink Fix & Disable Canonical Redirects Pack**的插件，你可以在[这里找到它](http://wordpress.org/extend/plugins/permalink-fix-disable-canonical-redirects-pack/)

# arrays - Matlab - 笛卡尔点的标准偏差

> ID：12736336
> 
> 赞同：1
> 
> 时间：2012-10-04T21:32:47.823
> 
> 标签：arrays, matlab, statistics, standard-deviation

我有一个笛卡尔点数组（第 1 列是 x 值，第 2 列是 y 值），如下所示：

```
308 522
307 523
307 523
307 523
307 523
307 523
306 523 
```

我将如何获得积分的标准偏差？它将与平均值进行比较，平均值是一条直线。这些点不是那条直线，因此标准偏差描述了线段与直线的波浪或“偏离基准”程度。

我真的很感激帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:37:42.163

如果您确定`xy`数据描述的是一条直线，则可以执行以下操作。

找到最佳拟合直线等于`Ax = b`在最小二乘意义上求解超定线性系统，其中

```
xy = [
308 522
307 523
307 523
307 523
307 523
307 523
306 523];

x_vals = xy(:,1);
y_vals = xy(:,2);

A = [x_vals ones(size(x_vals))];
b = y_vals; 
```

这可以在 Matlab 中完成，如下所示：

```
sol = A\b;

m = sol(1);
c = sol(2); 
```

我们现在所做的是找到 和 的值`m`，`c`以便等式描述的线`y = mx+c`最适合您给出的数据。这条最佳拟合线并不完美，因此它在 y 数据中存在错误：

```
errs = (m*x_vals + c) - y_vals; 
```

这些误差的标准差可以这样计算：

```
>> std(errs)
ans = 
    0.2440 
```

如果要使用与直线的垂直距离（欧几里得距离），则必须包含一个几何因子：

```
errs = (m*x_vals + c) - y;
errs_perpendicular = errs * cos(atan(m)); 
```

使用 trig 身份可以将其重新设计为

```
errs_perpendicular = errs * 1/sqrt(1+m*m); 
```

而且当然，

```
>> std(errs_perpendicular)
ans = 
    0.2182 
```

如果您不确定直线是否适合数据和/或您的`xy`数据基本上描述了某个公共中心周围的点云，您可以执行以下操作。

求质心 ( `COM`)：

```
COM = mean(xy); 
```

所有点到 的距离`COM`：

```
dists = sqrt(sum(bsxfun(@minus, COM, xy).^2,2)); 
```

及其标准差：

```
>> std(dists)
ans =  
    0.5059 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:41:01.987

一组二维值的平均值是另一个二维值，即它是一个点，而不是一条线。我相信这个点也被称为质心。

在这种情况下尚不完全清楚标准偏差是什么，但我认为根据与平均值的距离来定义它是有意义的。

# bash - 在 Unix 中提取文本文件的某些指定行的函数

> ID：12736340
> 
> 赞同：1
> 
> 时间：2012-10-04T21:33:16.823
> 
> 标签：bash, unix

想知道是否有人可以帮助我。所以我有一个包含 10 行的文本文件、一个 while 循环和一个从 10 开始的计数器。对于循环的每次迭代，我都会递减它。但是对于每次迭代，我想提取一条线，比如第一次旋转的第 10 行和第二次旋转的第 9 行来比较它们。是否有一个函数说你将一个值传递给它并提取某一行？或它的某种组合。非常感谢帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:49:23.650

您可以使用尾部和头部执行此操作：

```
line=$(tail -n "+$N" file | head -n 1) 
```

`tail -n "+$N" file`将从行号开始打印文件`$N`，`head -n 1`并将打印从尾部接收到的第一行。然后最终结果将存储在变量中`$line`（没有结束换行符）。

如果你想要更短的东西，有一个 sed oneliner：

```
line=$(sed -n -e "$N { p; q }" file) 
```

它将仅在行号上调用 print "p" 命令`$N`，然后使用 quit "q" 命令退出。

编辑：添加了*格伦杰克曼*`q`建议的命令以评论另一个答案

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:50:05.070

将您的行号传递给`awk`：

如果变量中有行号，`i`则：

`val=$(awk -v line=$i 'NR==line{print;exit}' filename)`

将`i`第 th 行存储到变量`val`中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:51:56.357

在 shell 中尝试以下操作：

```
read -p "Give me the number of the wanted line >>> "
sed -n "${REPLY}{p;q}" FILE 
```*

# php - 关闭彩盒模式窗口时如何防止退出时出现javascript警报？

> ID：12736344
> 
> 赞同：0
> 
> 时间：2012-10-04T21:33:18.750
> 
> 标签：php, javascript, modal-dialog, colorbox

当用户尝试离开表单页面时，我有一条 javascript 消息提醒用户，以防他尚未完成填写表单，如下所示：

```
window.onbeforeunload = function (evt) {
if(window.nounloadcheck == true) return;
var message = 'Data you entered may not be saved';
if (typeof evt == 'undefined') {
evt = window.event;
}
if (evt) {
evt.returnValue = message;
}
return message;
} 
```

我在同一页面上还有一个链接，它打开了一个颜色框模式，因此用户可以上传一张新照片。提交新照片后，彩盒模式关闭并刷新主页，以便用户可以看到他们上传的新照片。这是刷新主页的颜色框代码：

```
jQuery(document).ready(function(){
jQuery(".iframe").colorbox({iframe:true, width:"748px", height:"92%", onClosed:function(){ location.reload(true); } });
}); 
```

问题是当页面尝试重新加载时，会出现 javascript 警报。我试过了：

```
 <form ... onSubmit='window.nounloadcheck = true; return true;'> 
```

这句话用于主页上表单的提交按钮。但它不适用于彩盒模式上的提交按钮。如何防止主页在关闭颜色框模式时显示 javascript 警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:39:15.550

您正在寻找：

```
<form ... onSubmit='window.onbeforeunload = null; return true;'> 
```

这将在事件处理程序运行之前清除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:37:10.683

你不能在 ?`onClosed`之前将它添加到函数中`location.reload`？

# mysql - 慢 SELECT COUNT(*), information_schema, 基数字段

> ID：12736350
> 
> 赞同：0
> 
> 时间：2012-10-04T21:33:34.920
> 
> 标签：mysql, database-performance, large-data-volumes, large-data

我有一个大（60+ 百万条记录）表。该表有一个主键（id、auto_increment、index id）

我有一个从该表中选择记录的报告。为了浏览和浏览这份报告（用 PHP 编写），我使用了分页脚本。

此脚本使用 SELECT COUNT( *) 来获取此表中的记录总数。SELECT COUNT(* ) 非常慢。

**问题：** 我可以查询统计表中的基数字段 information_schema DB where table_name = my_large_table_name and column_name = id and(or) index_name is the index name of my auto_incremented id 然后使用结果作为分页脚本中的总行数?

**更新：**

或者我可以查询表中的`TABLE_ROWS`字段，以获取表中行的总数？结果准确吗？`TABLES``information_schema`

该表使用 InnoDB 引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:29:02.437

听起来像一个 innodb 表，其中行数没有被缓存，因此必须计算。

表格统计数据也不太可能准确：

> 对于其他存储引擎，例如 InnoDB，这个值是一个近似值，可能与实际值相差 40% 到 50%。 [http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)

你见过`SQL_CALC_FOUND_ROWS`吗？ [http://dev.mysql.com/doc/refman/5.0/en/information-functions.html](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)

# sudoers - 退出/保存对 sudoers 文件的编辑？腻子 SSH

> ID：12736351
> 
> 赞同：42
> 
> 时间：2012-10-04T21:33:40.053
> 
> 标签：sudoers

一直按照编辑 sudoers 文件的说明进行更改，但说明说要使用 ctrl+x 退出 - 这只是给了我一个大写的 X 和一个插入符号。试过ctrl:x ctrl+Q Esc。

不使用 nano 或任何其他 gui（只是腻子终端），我试图保存的更改是将 nano 设置为默认编辑器。

我只需要知道我按哪些键以及按什么顺序？

另外作为一个附带问题，是否有任何“好”的 linux 教程网站，我似乎花了几个小时试图找到最简单的答案？'好' 解释得很好，没有省略重要信息（比如你正在使用哪个 gui）。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-31T12:11:58.050

要从 putty/bash 更改 sudo：

*   键入 visudo 并按`enter`。
*   使用向上和向下箭头键导航到您要编辑的位置。
*   按`insert`进入编辑模式。
*   进行更改 - 例如：用户 ALL=(ALL) ALL。
*   注意 - 进行更改时使用制表符还是空格很重要。
*   完成更改后，按`esc`退出编辑模式。
*   现在输入 :wq 保存并按`enter`。
*   您现在应该回到 bash。
*   现在，如果您愿意，可以按`ctrl`+`D`退出会话。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-05T10:11:53.417

只需打开文件`nano /file_name`

完成后，按`CTRL+O`，然后`Enter`保存。然后按`CTRL+X`返回。

这里`CTRL+O`: is`CTRL`和`O`for Orange Not`0 Zero`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T22:57:35.190

您看到的教程告诉您如何退出 nano 编辑器。通过键入 Ctrl+X nano 退出，如果您的文件需要更改，系统将提示您保存更改，在这种情况下要保存，您应该按 Y，然后输入以将更改保存在您打开的同一文件中。

如果您不使用任何 gui 并且只想离开 shell，命令是 Ctrl+D。

关于教程，[Linux 文档项目](http://tldp.org/guides.html)将是一个很好的起点。如果你喜欢书籍，我会推荐任何你想要的[O'Reilly](http://oreilly.com/linux/)书籍。他们有漂亮的 cd 书架，可以为任何 linux 系统管理员提供良好的编译，并且不费吹灰之力，您可以找到许多可以在线阅读这些 html 书架的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-25T13:59:42.380

**#UBUNTU20**

如果您以 root 身份打开此文件，请键入

```
root# visudo 
```

该文件将被打开，转到您想要添加/修改任何内容的行，而无需按下任何插入或 i 按钮。

按 ctrl + O
按 ctrl + x
按 Enter

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T02:43:22.687

请注意准确键入 :wq，如 Wouter Verleur 在步骤 7 中所说。键入 enter 后，您将保存更改并退出 visudo 编辑器到 bash。

# asp.net - HtmlTextWriter.AddAttribute 在错误的标签中写入属性（不是由 WriteBeginTag 创建的下一个）

> ID：12736352
> 
> 赞同：1
> 
> 时间：2012-10-04T21:33:50.600
> 
> 标签：asp.net, custom-controls

我正在玩从 System.Web.UI.WebControls.Table/Cell/Row 派生并且无法让 HtmlTextWriter.AddAttribute 工作：

桌子：

```
public class Table : System.Web.UI.WebControls.Table
{
    public string Title { get; set; }
    public bool Sorted { get; set; }

    public Table()
    {
    }
} 
```

表头行：

```
public class TableHeaderRow : System.Web.UI.WebControls.TableHeaderRow
{
    public TableHeaderRow()
    {
        this.TableSection = TableRowSection.TableHeader;
        this.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    }
} 
```

表头单元格：

```
public class TableHeaderCell : System.Web.UI.WebControls.TableHeaderCell
{
    public TableHeaderCell()
    {
    }

    public override void RenderBeginTag(HtmlTextWriter writer)
    {
        AddAttributesToRender(writer);
        writer.AddAttribute("test", "whee");
        writer.WriteBeginTag("th");
        //writer.WriteAttribute("test", "whee");
        writer.WriteLine('>');
    }

    public override void RenderEndTag(HtmlTextWriter writer)
    {
        writer.WriteEndTag("th");
        writer.WriteLine();
    }
} 
```

用法：

```
 <Internal:Table ID="somethingTbl" runat="server" Title="A Table" Sorted="true">
        <Internal:TableHeaderRow>
            <Internal:TableHeaderCell>
                Stuff
            </Internal:TableHeaderCell>
            <Internal:TableHeaderCell>
                More Stuff
            </Internal:TableHeaderCell>
            <Internal:TableHeaderCell>
                Less Stuff
            </Internal:TableHeaderCell>
        </Internal:TableHeaderRow>
    </Internal:Table> 
```

然后在cs中添加一些常规行。我得到以下部分输出：

```
 <table id="activationsTbl">
<thead>
    <tr>
        <th>

                Stuff
            </th>
        <th>

                More Stuff
            </th>
        <th>

                Less Stuff
            </th>
    </tr>
</thead><tbody test="whee" test="whee" test="whee">
... 
```

正如你所看到的，属性被写在所有 th 标签之后的下一个开始标签（最后的 tbody 标签）。如果我使用注释掉的 WriteAttributes，那么它会被正确写入。如果没有任何其他行（因此没有`<tbody>`），则属性不会写入任何其他标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:50:20.163

几分钟后，我意识到 WriteBeginTag 和 RenderBeginTag *facepalm* 之间存在差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:54:03.253

这是一个自定义控件的示例，它是轻量级的并且是为应用程序量身定制的。它继承自我用于所有项目的基本自定义控件，但它的基类是 System.Web.UI.Control，我建议使用从其他具有开销和代码的 WebControls 过度继承，你看不到，有时可以装箱你呢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Solution.Data.Portfolio;
using Solution.Web.Data.Portfolio;

namespace Solution.Web.UI.Portfolio
{
    public class ClientIconListControl : UI.Control
    {
        private PortfolioSystem Portfolio { get { return ((iPortfolioControl)Parent).PortfolioSystem; } }

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            Page.HeadJQueryOnLoadGeneralRendering += new Deployment.Web.UI.Head.AdditionalRenderingHandler(Page_HeadJQueryOnLoadGeneralRendering);
        }

        void Page_HeadJQueryOnLoadGeneralRendering(System.Web.UI.HtmlTextWriter writer)
        {
            if (this.Visible)
            {
                foreach (KeyValuePair<string, Client> c in this.Portfolio.Clients)
                {
                    writer.WriteLine("gPortfolio.RegisterClientIcon('{2}_{0}_container', {1}, '{0}');", c.Key, c.Value.SpriteIconIndex * 183, this.ClientID);
                }
            }
        }

        protected override void Render(System.Web.UI.HtmlTextWriter writer)
        {
            if (this.Visible)
            {
                string sImageSpacerPath = Page.ResolveUrl("~/ui/image/spacer.gif");
                writer.Indent = 2;
                foreach (KeyValuePair<string, Client> c in this.Portfolio.Clients)
                {
                    if (c.Value.Projects.Count > 0)
                    {
                        writer.WriteLine("<div id=\"{1}_{0}_container\" class=\"icon\">", c.Key, this.ClientID);
                        writer.Indent++;
                        writer.Write("<img id=\"{4}_{3}\" src=\"{0}\" alt=\"{1}\" class=\"{2}\" />", sImageSpacerPath, c.Value.Title, "spwi", c.Key, this.ClientID);
                        writer.WriteLine();
                        writer.WriteLine("<div class=\"hover\">");
                        writer.Indent++;
                        writer.WriteLine("<img src=\"{0}\" alt=\"\" class=\"spwi spwi_overlay\" />", sImageSpacerPath);
                        writer.WriteLine("<h3>{0}</h3><p>{1}</p>", c.Value.Title, String.Empty);
                        writer.Indent--;
                        writer.WriteLine("</div>");
                        writer.Indent--;
                        writer.WriteLine("</div>");
                    }
                }
            }
        }
    }
} 
```

您将不得不忽略一些基于较大项目/解决方案的功能，但只需覆盖 Render 功能，您就可以在此处自定义控件，而不必弄乱 RenderBeginTag 等。

不是您的问题的答案，而是创建控件时要考虑的问题。我花了大约 10 分钟的时间来完成它，如果发生了未计划的更改，我可以完全控制以任何我想要的方式进行更改，而不必在更强大的控制范围内工作。

# heroku - Play 2 框架导入 play 2modules

> ID：12736355
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:34:11.287
> 
> 标签：heroku, playframework-2.0

我用 heroku 创建了一个游戏框架，并将其导入到我的本地 eclipse 中。如何将以下 play2 模块导入我的项目。

[https://github.com/joscha/play-authenticate](https://github.com/joscha/play-authenticate)

我要向 dependencies.yml 添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:46:19.380

您链接到的项目中包含示例。只需阅读它们。它发生在[Build.scala](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-simple-oauth/project/Build.scala)文件中。

# ios - iOS 应用程序无法在设备上编译，但在模拟器中运行良好

> ID：12736356
> 
> 赞同：3
> 
> 时间：2012-10-04T21:34:12.323
> 
> 标签：ios, xcode, ios5, ios6, xcode4.5

我假设这与链接有关，但我已经删除了 RestKit 并重新添加了它。我确保我所有的连接和链接都到位。如果我将 XCode 设置为使用模拟器，它运行良好，但是一旦我将它设置为在任何设备上运行，它甚至都不会构建。唯一需要注意的是，直到我升级到 XCode 4.5 才开始发生这种情况。以下是它给我的错误

```
ld: warning: ignoring file /Users/luke/Library/Developer/Xcode/DerivedData/ehrx-btsujlxuhtytahfaikwjeqfjybtt/Build/Products/Debug-iphoneos/libRestKit.a, file was built for archive which is not the architecture being linked (armv7s): /Users/luke/Library/Developer/Xcode/DerivedData/ehrx-btsujlxuhtytahfaikwjeqfjybtt/Build/Products/Debug-iphoneos/libRestKit.a
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_RKClient", referenced from:
      objc-class-ref in ehrxAppDelegate.o
      objc-class-ref in ehrxLoginView.o
      objc-class-ref in ehrxInboxView.o
      objc-class-ref in ehrxCMView.o
      objc-class-ref in ehrxEncounterDemoView.o
      objc-class-ref in ehrxEncounterDiagListView.o
      objc-class-ref in ehrxEncounterChargeView.o
      ...
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这些是 RestKit 的构建设置。 ![在此处输入图像描述](../Images/4abbbecddc881e551e4d11073646ce4c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T21:38:26.830

看起来这些框架不是为在 armv7s 设备上工作而构建的，如果没有必要，请将其从构建设置中的“有效架构”中删除。

如果没有，您将不得不更新它们以在 armv7s 上工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:41:22.823

链接器抱怨您的 RestKit 库中缺少 armv7 的数据。

请将此架构添加到您的 RestKit 项目中作为有效架构。出于显而易见的原因，这比从主项目中删除 armv7 要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T21:39:14.427

这是因为您的库 RestKit 仅针对架构 armv7 而​​不是为新的 iPhone 架构 armv7s 编译。如果您没有为 armv7s 编译的 lib，请尝试将 armv7s 删除到项目设置中的架构和有效架构列表中。

# android - 自定义列表视图条目适用于 JB 而不是 Gingerbread

> ID：12736368
> 
> 赞同：1
> 
> 时间：2012-10-04T21:35:02.087
> 
> 标签：android, android-layout

我有一个带有自定义 ArrayAdapter 的 ListFragment，我在其中重写 getView() 以为列表项提供自定义视图。

```
private class DirListAdaptor extends ArrayAdapter<DirItem> {

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View aView = convertView;
        if (aView == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            // TODO: can we not access textViewResourceId?
            aView = vi.inflate(R.layout.dir_list_entry, parent, false);
        }
 etc... 
```

这是 dir_list_entry.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="?android:attr/listPreferredItemHeight"
            android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
            android:paddingRight="?android:attr/listPreferredItemPaddingRight">

<ImageView
    android:id="@+id/dir_list_icon"

    android:layout_width="wrap_content"
    android:layout_height="match_parent"

    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="6dp"
    android:src="@drawable/ic_launcher"
    />

<TextView
    android:id="@+id/dir_list_details"

    android:textAppearance="?android:attr/textAppearanceListItem"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:layout_toRightOf="@id/dir_list_icon"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"

    android:singleLine="true"
    android:ellipsize="marquee"

    android:textSize="12sp"
    android:text="Details" />

<TextView
    android:id="@+id/dir_list_filename"

    android:textAppearance="?android:attr/textAppearanceListItem"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:layout_toRightOf="@id/dir_list_icon"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_above="@id/dir_list_details"
    android:layout_alignWithParentIfMissing="true"

    android:gravity="center_vertical"
    android:textSize="14sp"

    android:text="Filename"/>

</RelativeLayout> 
```

奇怪的是，这在 Android 4.1 模拟器上运行良好，但在 Android 2.3 上出现以下错误：

```
10-01 15:07:59.594: ERROR/AndroidRuntime(1003): FATAL EXCEPTION: main
    android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at com.eveps.evepsdroid.ui.PhotoBrowserListFragment$DirListAdaptor.getView(PhotoBrowserListFragment.java:104)
    at android.widget.AbsListView.obtainView(AbsListView.java:1430)
    at android.widget.ListView.makeAndAddView(ListView.java:1745)
    at android.widget.ListView.fillDown(ListView.java:670)
    at android.widget.ListView.fillFromTop(ListView.java:727)
    at android.widget.ListView.layoutChildren(ListView.java:1598)
    at android.widget.AbsListView.onLayout(AbsListView.java:1260)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1243)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1049)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
    at android.view.View.layout(View.java:7175)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7175)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
    ... 42 more
    Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
    at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
    at android.view.View.<init>(View.java:1957)
    at android.view.View.<init>(View.java:1899)
    at android.view.ViewGroup.<init>(ViewGroup.java:286)
    at android.widget.RelativeLayout.<init>(RelativeLayout.java:173)
    ... 45 more 
```

我显然正在使用 Android Support 库来支持片段。

膨胀自定义列表视图条目似乎是一个问题，与维度有关 - 但为什么它适用于 JellyBean？这方面有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:42:30.827

`textAppearanceListItem`不是 Gingerbread SDK 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:47:24.843

您正在使用 Gingerbread 中不存在的属性。以下不存在：

*   `listPreferredItemPaddingLeft`
*   `listPreferredItemPaddingRight`
*   `textAppearanceListItem`

您可以通过查看 SDK 文件夹中的`/platforms/android-version/data/res/values/attrs.xml`.

# psexec - 如何使用 psexec 与远程 GUI 交互？

> ID：12736374
> 
> 赞同：1
> 
> 时间：2012-10-04T21:35:30.903
> 
> 标签：psexec

我想使用 PSExec 测试远程应用程序，问题是我无法与之交互。有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:42:32.287

并不真地。

PSexec 通过远程创建配置为运行您选择的命令的服务来工作。在较新版本的 Windows 操作系统（Vista、2008、7）中，不允许服务具有交互式组件。是的，有一些已弃用的选项来允许交互，但 windows 会给它一个新的 windows 会话，它与其他会话是分开的。用户将看到提示显示任何类似于用户帐户控制的 GUI 组件。当您接受提示时，会加载一个完全空白的桌面，其中包含服务的 GUI 部分。

# php - 将id与不同表行mysql的id进行比较

> ID：12736376
> 
> 赞同：0
> 
> 时间：2012-10-04T21:36:00.340
> 
> 标签：php, mysql

所以我试图从某人那里检索所有兴趣，并能够列出它们。这适用于以下查询。

```
SELECT *,(
    SELECT GROUP_CONCAT(interest_id SEPARATOR ",")
    FROM people_interests
    WHERE person_id = people.id
) AS interests
FROM people
WHERE id IN (
    SELECT person_id
    FROM people_interests
    WHERE interest_id = '.$site->db->clean($_POST['showinterest_id']).'
)
ORDER BY lastname, firstname 
```

在我遇到问题的这个问题中，我只想选择那些恰好在名为`volleyballplayers`. 该表只有一个 id、person_id、team_id 和 date 字段。

```
SELECT *,(
    SELECT GROUP_CONCAT(interest_id SEPARATOR ",")
    FROM people_interests
    WHERE person_id = people.id
) AS interests
FROM people
WHERE id IN (
    SELECT person_id
    FROM people_interests
    WHERE volleyballplayers.person_id = person_id
)
ORDER BY lastname, firstname 
```

我只是想确保只有 volleyballplayers 表中的人出现，但我收到一条错误消息，`Unknown column 'volleyballplayers.person_id' in 'where clause'`虽然我很确定表的名称并且我知道该列名为 person_id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:46:43.170

尝试用子查询加入它，

```
SELECT  *, GROUP_CONCAT(interest_id) interests
FROM    people a
        INNER JOIN people_interests b
            ON b.person_id = a.id
        INNER JOIN
        (
            SELECT DISTINCT person_id
            FROM volleyballplayers
        ) c ON b.person_id = c.person_id
GROUP BY a.id
ORDER BY lastname, firstname 
```

# c# - C#用多个逗号替换字符串中的两个特定逗号

> ID：12736380
> 
> 赞同：1
> 
> 时间：2012-10-04T21:36:12.300
> 
> 标签：c#, string

我正在尝试将每行中的日期格式从逗号更改为连字符。分隔月、日、日和年的逗号索引会有所不同。

```
 lines_in_List[i] = lines_in_List[i].Insert(0, cnt + ","); // Insert Draw # in 1st column

   string one_line = lines_in_List[i];
   // 0,5,1,2012,1,10,19,16,6,36,,,
   // 1,11,5,2012,49,35,23,37,38,28,,,
   // 2,12,10,2012,8,52,53,54,47,15,,,
   //  ^-^--^ replace the ',' with a '-'.

   StringBuilder changed = new StringBuilder(one_line);
   changed[3] = '-';
   changed[5] = '-';
   changed[3] = '-';
   lines_in_List[i] = changed.ToString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:39:58.800

您可以使用 IndexOf 的重载，它采用初始偏移量来开始搜索。

[http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx](http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx)

```
int idxFirstComma = line.IndexOf(',');
int idxSecondComma = line.IndexOf(',', idxFirstComma+1);
int idxThirdComma = line.IndexOf(',', idxSecondComma+1); 
```

使用这些索引进行替换。

要有效地替换这些字符（不创建大量临时字符串实例），请查看：

[http://www.dotnetperls.com/change-characters-string](http://www.dotnetperls.com/change-characters-string)

该片段将字符串转换为字符数组，进行替换并创建一个新字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:49:35.387

你也可以这样做：

```
string modifiedLine = Regex.Replace(line, @"(^\d+,\d+),(\d+),(\d+)", @"$1-$2-$3") 
```

如果您需要在行首修剪空格，请改用：

```
string modifiedLine = Regex.Replace(line, @"^[ \t]*(\d+,\d+),(\d+),(\d+)", @"$1-$2-$3") 
```

最后，如果您只想检索格式化的日期，请使用：

```
string justTheDate = Regex.Replace(line, @"^[ \t]*\d+,(\d+),(\d+),(\d+).*", @"$1-$2-$3") 
```

# tomcat - 使用tomcat将所有htm文件重定向到cfm

> ID：12736383
> 
> 赞同：1
> 
> 时间：2012-10-04T21:36:29.067
> 
> 标签：tomcat, coldfusion, url-rewriting

我们有大量的 HTML 页面，它们只是 CFM 对应页面的副本。这似乎效率很低，我想知道是否有一种方法可以简单地将所有对 .htm 文件的请求重定向到 .cfm 文件。

另一个要求是查询字符串也被重定向

所以真的StupidDesignDecision.htm?this=true 会重定向到reallyStupidDesignDecision.cfm?this=true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:22:10.420

解决此问题的一种方法是使用 REST。使用 REST，您的所有 URL 都没有扩展名。在您的示例中，您的 URL 将类似于 realStupidDesignDecision/this=true，（还有其他处理参数的方法）。

现在知道，这个解决方案比过滤器需要更多的工作，但是继续前进，无论您使用哪种后端语言，您的页面将始终具有相同的 URL，而且不透露后端语言还有一个安全优势正在使用。

# facebook - Facebook RunWithFriend 重定向到主页

> ID：12736384
> 
> 赞同：0
> 
> 时间：2012-10-04T21:36:31.963
> 
> 标签：facebook

我正在关注 Facebook 的[Canvas 应用示例](http://developers.facebook.com/docs/samples/canvas/)，但我似乎无法成功登录，因此我无法使用示例应用，因为我总是被重定向到主页。

我认为我正确设置了所有参数，除了应该启用的 OAuth 迁移。Facebook 开发者面板中没有这样的选项。

这是登录后出现在我面前的主页屏幕： ![与朋友一起运行主页](../Images/8587fb67a6f401a6bed3766c1dd0bdc3.png)

我在这里解释了同样的问题：

[画布演示（runwithfriends）总是重定向到我自己的 GAE 下的主页](https://stackoverflow.com/questions/10891670/canvas-demo-runwithfriends-always-redirects-to-main-page-under-my-own-gae)

除了即使我成功登录，即使 facebook GAE 上的应用程序也会将我重定向到主页。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:44:53.060

最终，facebook 的例子已经过时了。我在这里提交了一个工作示例 [https://github.com/fbsamples/web-runwithfriends](https://github.com/fbsamples/web-runwithfriends)

# sql-server - 这种 .NET/SQL Server 事务场景是否可行？

> ID：12736388
> 
> 赞同：3
> 
> 时间：2012-10-04T21:36:48.390
> 
> 标签：sql-server, vb.net, transactions, transactionscope

我刚刚意识到我根本不了解 .NET/SQL Server 事务是如何工作的。我觉得我可能会把信封推到“没有愚蠢的问题”，但我读过的所有文档都不容易理解。我将尝试以这样一种方式来表达这个问题，答案几乎是是/否。

如果我在一台有效执行此操作的机器上运行 .NET 进程（不是真正的代码）：

```
For i as Integer = 0 to 100
    Using TransactionScope
        Using SqlClient.SqlConnection
            'Executed using SqlClient.SqlCommand'
            "DELETE from TABLE_A"
            Thread.Sleep(5000)
            "INSERT INTO TABLE_A (Col1) VALUES ('A')"
            TransactionScope.Complete()
        End Using
    End Using
Next i 
```

是否有任何事务/隔离级别配置会使“SELECT count(*) FROM TABLE_A”在从其他进程运行时始终返回“1”（即即使表中没有行时有 5 秒的时间块在交易的背景下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:51:03.843

是的，您可以让其他进程看不到您在所示事务中所做的更改。为此，您需要更改*其他*进程，而不是进行修改的进程。

打开快照隔离并`IsolationLevel.Snapshot`在其他读取进程上使用。他们将在您进行任何修改之前看到该表的状态。他们不会阻止（等待）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:53:28.010

[SNAPSHOT 隔离](http://msdn.microsoft.com/en-us/library/ms179599%28v=sql.105%29.aspx)是您要找的。假设当您开始循环时该表有一行，在 SNAPSHOT 隔离级别下运行的并发 SELECT 将**始终**看到 1 行，无论何时运行，*而无需等待*。

除 READ UNCOMMITTED 外，所有其他隔离级别也将始终准确看到 1 行，但通常会阻塞长达 5 秒。请注意，我将 READ_COMMITTED_SNAPSHOT 视为此参数的 SNAPSHOT。

脏读，即。在 READ UNCOMMITTED 隔离级别下运行的 SELECT 将有 0、1 甚至*2*行。没错，脏读可能会看到 2 行，即使您从未一次插入 2 行，这是因为 SELECT 的扫描点和事务的插入点之间的竞争条件，请参阅[如果 NOLOCK 可能会错过先前提交的行提示用于](http://blogs.msdn.com/b/sqlcat/archive/2007/02/01/previously-committed-rows-might-be-missed-if-nolock-hint-is-used.aspx)类似的问题讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:44:59.490

我相信默认事务超时为 1 分钟（请参阅：http: [//msdn.microsoft.com/en-us/library/ms172070.aspx](http://msdn.microsoft.com/en-us/library/ms172070.aspx)），因此在您的事务上下文中，我认为您期望该表是正确的在插入之前没有记录（无论暂停如何），因为每个命令将在事务中按顺序完成，这将是删除的结果。

希望有帮助。

# ios - Xcode 4 ios模拟器权限问题

> ID：12736390
> 
> 赞同：0
> 
> 时间：2012-10-04T21:37:04.543
> 
> 标签：ios, xcode4, osx-mountain-lion

我刚刚升级到 Lion，我搞砸了我的 ios 模拟器权限......你看，当我升级到 lion 时，我被迫创建一个新用户，现在所有 Xcode 权限都指向该用户。

我知道这一点是因为我可以很好地从那个新用户加载 ios 模拟器，但是我不能从我的原始用户帐户执行此操作——模拟器确实打开了，但它立即挂起。

我已经尝试递归地使用 Xcode.app（其中包含我的 iPhone Simulator.app）以及 ios 应用程序支持文件夹来将我的普通帐户设置为所有者我还使用 a+rwx 和 a= chmod'd 相同的两个目录rwx 按此顺序。

ios 模拟器还引用了哪些其他需要更新权限的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:48:20.157

我建议重新安装 Xcode。Xcode（至少是 App Store 版本）不属于安装它的用户：

```
$ ls -ld /Applications/Xcode.app
drwxr-xr-x  3 root  wheel  102  4 Oct 17:34 /Applications/Xcode.app 
```

也这样做`chmod a+rwx`或`a=rwx`肯定不是一个好主意。并非所有文件都必须是可执行的 ( `x`)，更糟糕的是**，不加思索地****添加`rw`**会使您的系统易受攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:49:22.253

重新安装 Xcode。方法如下：http: [//osxdaily.com/2012/02/20/uninstall-xcode/](http://osxdaily.com/2012/02/20/uninstall-xcode/)

# iphone - UIModalPresentationCurrentContext 与转换？

> ID：12736394
> 
> 赞同：10
> 
> 时间：2012-10-04T21:37:15.277
> 
> 标签：iphone, objective-c, ipad, uimodaltransitionstyle, uimodalpresentationstyle

我正在尝试模态显示如下视图控制器：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"addPopover"];
vc.view.backgroundColor = [UIColor clearColor];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentModalViewController:vc animated:YES]; 
```

现在使用`UIModalPresentationCurrentContext`意味着我可以用透明背景呈现这个视图，并在新视图后面看到我的另一个视图。但是，它使我无法通过过渡来呈现它。

任何想法为什么？或者我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T01:09:57.397

我可以通过设置`modalPresentationStyle = UIModalPresentationCurrentContext`我的 UIWindow 的 rootViewController 来实现这一点，如果我没有在这个 rootViewController 之上呈现任何新的全屏 viewControllers。我做了这样的事情：

```
UIViewController *rootViewController = [UIApplication sharedApplication].delegate.window.rootViewController;
rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:vc animated:YES completion:nil]; 
```

我已经尝试使用 UINavigationController 作为我的窗口的 rootViewController 和各种其他自定义视图控制器。似乎只要窗口的 rootViewController 知道发生了什么，任何子视图控制器都可以调用`presentViewController:animated:completion:`而不会使底层视图变黑。

但是，假设您在窗口的 rootViewController 之上展示了另一个 viewController。并且这个新的 viewController 被呈现`modalPresentationStyle = UIModalPresentationFullScreen`（即占据屏幕），然后你必须调用`modalPresentationStyle = UIModalPresentationCurrentContext`最顶层的 viewController。

回顾一下：

*   如果您有 UINavigationController -> UIViewController(s)（它们可以被推入和弹出），那么您`modalPresentationStyle = UIModalPresentationCurrentContext`在 UINavigationController 上进行设置。
*   如果你有 UINavigationController -> UIViewController -> new-UIViewController（modalPresentationStyle 设置为 UIModalPresentationFullScreen），那么你`modalPresentationStyle = UIModalPresentationCurrentContext`在 new-UIViewController 上进行设置。

希望这也适用于你们！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T14:44:44.593

全屏模式不应该让您看到底层。烦人我知道。

从您的代码中，我假设“addPopover”实际上是一个全屏视图，您将内容作为一个小节，而其余部分是透明的。

尝试这个：

```
vc.modalPresentationStyle = UIModalPresentationCurrentContext;
vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:vc animated:YES completion:NULL]; 
```

注意：我建议添加低 alpha 背景颜色，让用户知道当您将其弹出到顶部时，他们无法与视图的其余部分进行交互...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T00:21:22.377

T先生的建议几乎完美，你只是失去了呈现的视图控制器上的过渡动画

由于它还设置了 appDelegates rootviewController 的呈现样式，它还将删除从该点呈现的任何视图的过渡动画。

我的解决方法是在我需要透明背景的 viewcontroller 关闭时将 AppDelegates rootViewController 的演示样式恢复为默认值

我有一个关闭presentedViewController的按钮，我还使用以下方法将rootViewController的演示样式设置回默认值：

```
 UIViewController *rootViewController = [[[[UIApplication sharedApplication] delegate] window] rootViewController];
    rootViewController.modalPresentationStyle = UIModalPresentationFullScreen; 
```

我希望这可以帮助其他人在这个问题上遇到困难。

# c# - 简单的聚类算法 2D。检测点丛

> ID：12736395
> 
> 赞同：2
> 
> 时间：2012-10-04T21:37:18.693
> 
> 标签：c#, algorithm

任何人都知道用 C# 实现一个简单的算法来检测 2D 游戏中的怪物组。

EX: 100 范围内 char 周围有怪物。我想检测哪些怪物在彼此的范围 2 内，如果至少有 5 个一起，请在该位置使用区域效果技能。否则使用单目标技能。

一个实现的链接会很棒，最好是 C#。我只是迷失了阅读维基百科的文章。

编辑：“你的问题不完整。你到底想做什么？你想找到所有组吗？最大的组？任何组，如果有组，没有其他组？请更具体。” -吉拉德霍赫

我想找到主角周围 100 个单位范围内的所有组。如果至少有 5 个或更多的怪物都在彼此 2 范围内，或者可能在距离中心怪物 10 范围内，则应组成组。

所以结果应该可能是一个新的组列表或潜在目标位置的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:54:46.183

a very simple clustering algorithm is the k-mean algorithm. it is like

*   create random points
*   assign all points to the nearest point, and create groups
*   relocate the original points to the middle of the groups
*   do the last two steps several times.

an implementation you can find for example here, or just google for "kmean c#"

[http://kunuk.wordpress.com/2011/09/20/markerclusterer-with-c-example-and-html-canvas-part-3/](http://kunuk.wordpress.com/2011/09/20/markerclusterer-with-c-example-and-html-canvas-part-3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:09:35.300

我最近实现了 Efraty 在[这篇论文](http://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCcQFjAB&url=http://www.cs.arizona.edu/~alon/papers/cir.ps.gz&ei=HghuULuhJ4yi8ASEi4HADg&usg=AFQjCNFoYRdkCoq4WSRBIxsw6UoeN1lg6A&sig2=XHyE5y9P2ZofvyLUg7ZkGQ)中给出的算法，它通过考虑以每个给定点为中心的半径为 2 的圆的交点来解决这个问题。简单来说，如果你把两个圆相交的点按顺时针顺序排列，那么你可以做类似扫线的事情来找出需要发射炸弹（或AoE法术）才能击中最多的点敌人。实现是这样的：

```
#include <stdio.h>
#include <cmath>
#include <algorithm>

using namespace std;

#define INF 1e16
#define eps 1e-8
#define MAXN 210
#define RADIUS 2

struct point {
    double x,y;

    point() {}
    point(double xx, double yy) : x(xx), y(yy) {}

    point operator*(double ot) {
        return point(x*ot, y*ot);
    }

    point operator+(point ot) {
        return point(x+ot.x, y+ot.y);
    }

    point operator-(point ot) {
        return point(x-ot.x, y-ot.y);
    }

    point operator/(double ot) {
        return point(x/ot, y/ot);
    }
};

struct inter {
    double x,y;
    bool entry;
    double comp;

    bool operator< (inter ot) const {
        return comp < ot.comp;
    }
};

double dist(point a, point b) {
    double dx = a.x-b.x;
    double dy = a.y-b.y;
    return sqrt(dx*dx+dy*dy);
}

int N,K;
point p[MAXN];
inter it[2*MAXN];

struct distst {
    int id, dst;
    bool operator<(distst ot) const {return dst<ot.dst;}
};

distst dst[200][200];
point best_point;

double calc_depth(double r, int i) {
    int left_inter = 0;

    point left = p[i];
    left.y -= r;
    best_point = left;

    int tam = 0;

    for (int k = 0; k < N; k++) {
        int j = dst[i][k].id;
        if (i==j) continue;

        double d = dist(p[i], p[j]);

        if (d > 2*r + eps) break;
        if (fabs(d)<eps) {
            left_inter++;
            continue;
        }

        bool is_left = dist(p[j], left) < r+eps;
        if (is_left) {
            left_inter++;
        }

        double a = (d*d) / (2*d);

        point diff = p[j] - p[i];
        point p2 = p[i] + (diff * a) / d;

        double h = sqrt(r*r - a*a);

        it[tam].x = p2.x + h*( p[j].y - p[i].y ) / d;
        it[tam].y = p2.y - h*( p[j].x - p[i].x ) / d;  

        it[tam+1].x = p2.x - h*( p[j].y - p[i].y ) / d;
        it[tam+1].y = p2.y + h*( p[j].x - p[i].x ) / d; 

        it[tam].x -= p[i].x;
        it[tam].y -= p[i].y;
        it[tam+1].x -= p[i].x;
        it[tam+1].y -= p[i].y;

        it[tam].comp = atan2(it[tam].x, it[tam].y);
        it[tam+1].comp = atan2(it[tam+1].x, it[tam+1].y);

        if (it[tam] < it[tam+1]) {
            it[tam].entry = true;
            it[tam+1].entry = false;
        }
        else {
            it[tam].entry = false;
            it[tam+1].entry = true;
        }

        if (is_left) {
            swap(it[tam].entry, it[tam+1].entry);
        }

        tam+=2;
    }

    int curr,best;
    curr = best = left_inter;

    sort(it,it+tam);

    for (int j = 0; j < tam; j++) {
        if (it[j].entry) curr++;
        else curr--;

        if (curr > best) {
            best = curr;
            best_point = point(it[j].x, it[j].y);
        }
    }

    return best;
}

int main() {
    scanf("%d", &N);
    for (int i = 0; i < N; i++) {
        scanf("%lf %lf", &p[i].x, &p[i].y);
    }

    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            dst[i][j].id = j;
            dst[i][j].dst = dist(p[i],p[j]);
        }
        sort(dst[i],dst[i]+N);
    }

    int best = 0;
    point target = p[0];
    for (int i = 0; i < N; i++) {
        int depth = calc_depth(RADIUS, i);
        if (depth > best) {
            best = depth;
            target = best_point;
        }
    }

    printf("A bomb at (%lf, %lf) will hit %d target(s).\n", target.x, target.y, best+1);
} 
```

示例用法：

```
2 (number of points) 
0 0
3 0
A bomb at (1.500000, 1.322876) will hit 2 targets. 
```

# c# - 在 Microsoft.SqlServer.Management.Smo 中，User.HasDBAccess 指的是什么样的访问？

> ID：12736398
> 
> 赞同：0
> 
> 时间：2012-10-04T21:37:27.453
> 
> 标签：c#, sql-server, sql-server-2008, sql-server-2008-r2

[微软的文档](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.user.hasdbaccess%28v=sql.105%29.aspx)几乎只是说它返回“一个布尔值，指定数据库用户是否有权访问数据库”，但它到底指的是哪种访问？用户可以读/写数据库，还是仅仅意味着您可以简单地连接到它？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:46:36.510

这意味着用户可以连接到该数据库，但它不会告诉您他在数据库中拥有哪些权限。[等效 TSQL 函数](http://msdn.microsoft.com/en-us/library/ms187718.aspx)的文档提供的信息略多一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:45:54.827

这意味着它可以`USE`数据库。

# python - 在 Python 中捕获正则表达式

> ID：12736399
> 
> 赞同：1
> 
> 时间：2012-10-04T21:37:28.403
> 
> 标签：python, regex, capturing-group

我想在 Python 中使用正则表达式来获取`</html>`标记后的所有内容，并将其放入字符串中。所以我试图理解如何在 Python 中做到这一点，但我无法让它工作。谁能解释我如何做这个荒谬的简单任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T21:41:14.907

您可以在没有正则表达式的情况下执行此操作：

```
text[text.find('</html>')+7:] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:40:49.183

```
m = re.match(".*<\html>(.*)",my_html_text_string)
print m.groups() 
```

甚至更好

```
print my_html_string.split("</html>")[-1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:42:53.950

```
import re

text = 'foo</html>bar'
m = re.search('</html>(.*)', text)
print m.group(1) 
```

# magento - MAGENTO：如何设置默认付款单选按钮

> ID：12736400
> 
> 赞同：1
> 
> 时间：2012-10-04T21:37:32.190
> 
> 标签：magento, checkout

因此，我在结帐时有两种付款方式，单选按钮似乎总是默认为 PayPal 选项。我通过信用卡将订单排序为 31，将 PayPal 排序为 #2，即使将 PayPal 作为 #2，单选按钮仍会在 paypal 上选中。

**我需要在`methods.phtml`文件中进行哪些更改以使信用成为默认选择的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T06:13:19.080

通过使用 Jquery 将默认付款选择作为您网站中的信用卡付款。

在您的 method.phtml 文件中添加以下脚本。

```
<script type="text/javascript">
    var j = jQuery.noConflict(); 

        j(document).ready(function() 
        { 

            var paypal = j('#p_method_paypal').is(':checked');

            if(paypal)
            { 

            j('#p_method_paypal').removeAttr('checked'); 

            j('#p_method_credit_card').attr("checked","checked");   

            }

        });

</script> 
```

**注意：**确保在上面的脚本中使用贝宝和信用卡单选按钮 ID 而不是`#p_method_paypal`& 。`#p_method_credit_card`

# c# - 使用隐式枚举字段来表示数值是一种不好的做法吗？

> ID：12736405
> 
> 赞同：15
> 
> 时间：2012-10-04T21:37:59.903
> 
> 标签：c#, enums, numbers, naming-conventions, hex

使用隐式枚举字段来表示数值一定是不好的做法吗？

这是一个用例：我想要一种简单的方法来表示十六进制数字，并且由于 C# 枚举基于整数，因此它们看起来很自然。我不喜欢 a`char`或 a`string`这里，因为我必须明确地验证它们的值。枚举的问题是数字`[0-9]`不是有效的字段标识符（有充分的理由）。我突然想到我不需要声明 numbers `0-9`，因为它们是隐式存在的。

所以，我的十六进制数字枚举看起来像：

```
public enum Hex : int { 
    A = 10,
    B = 11,
    C = 12,
    D = 13,
    E = 14,
    F = 15
} 
```

所以，我可以写`Tuple<Hex,Hex> r = Tuple.Create(Hex.F,(Hex)1);`，并且`r.Item1.ToString() + r.Item2.ToString()`会给我“F1”。基本上，我的问题是，如果`ToString()`数字常量的值是我想要命名枚举字段的值，**为什么完全省略声明会有问题？**

作为枚举的替代表示可以使用一些前缀声明的字段，例如：

```
public enum Hex : int {
    _0 = 0,
    _1 = 1,
    _2 = 2,
    _3 = 3,
    _4 = 4,
    _5 = 5,
    _6 = 6,
    _7 = 7,
    _8 = 8,
    _9 = 9, 
    A = 10,
    B = 11,
    C = 12,
    D = 13,
    E = 14,
    F = 15
} 
```

问题是上面的例子会给我“F_1”而不是“F1”。显然，这很容易解决。我想知道我没有考虑的隐式方法是否还有其他问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T02:37:22.457

这是不好的做法，因为它是一个聪明的技巧，让阅读您的代码的人感到惊讶。令我惊讶的是它确实有效，它让我说 wtf. 记住唯一有效的代码质量衡量标准：

![在此处输入图像描述](../Images/e253b19fa72d32e32aa50b56e96bc88a.png)

聪明的技巧不属于应该由他人阅读和维护的代码。如果要将数字输出为十六进制，请使用普通将其转换为十六进制字符串`String.Format("{0:X}", value)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T00:15:08.680

这是处理十六进制的根本方法。Hex 是一个人机界面细节。它始终是一个**字符串**，一个数字的表示。就像“1234”是值 1234 的表示。当它以十六进制表示时恰好是“4D2”，但程序中的数字仍然是 1234。程序应该只关注数字，而不是表示。

*仅当您将数字显示*给人眼时才应将数字转换为十六进制。使用 ToString("X") 很简单。并使用 NumberStyles.HexNumber 使用 TryParse() 从人工输入中解析回来。输入和输出，在其他任何时候你都不应该处理十六进制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T21:48:55.710

我会定义一个`struct`for `HexDigit`。您可以将`HexDigit`“A”添加到“F”作为静态常量（或静态只读字段）。

您可以定义隐式转换器以允许转换整数 0-9、转换为整数，并且您可以覆盖 ToString() 以使元组看起来不错。

这将比枚举灵活得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:44:44.660

在我看来，这是一种不好的做法。如果您需要十六进制表示，只需创建一个帮助类来处理您需要的所有操作。

正如[本文](http://www.geekpedia.com/KB8_How-do-I-convert-from-decimal-to-hex-and-hex-to-decimal.html)所建议的，这些代码片段将有助于创建助手：

```
// Store integer 182
int decValue = 182;
// Convert integer 182 as a hex in a string variable
string hexValue = decValue.ToString("X");
// Convert the hex string back to the number
int decAgain = int.Parse(hexValue, System.Globalization.NumberStyles.HexNumber); 
```

我认为这是不好的做法的原因是因为它不是面向对象的，并且遇到了依赖枚举来转换硬编码的所有值的问题——这很糟糕。如果您可以避免对任何内容进行硬编码，那么这始终是朝着正确方向迈出的一步。此外，帮助程序类是可扩展的，并且可以随着时间的推移进行改进以提供更多功能。

话虽如此，我确实喜欢枚举的简单性，但是，在我看来，这并不能取代保持 OO 的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:56:02.397

我不确定您在这里实际上要完成什么，但是如果您希望将某些内容限制为两个十六进制数字，为什么不将其声明为一个字节？虽然您的 enum hack 很聪明，但我实际上并不认为需要它。如果在没有解释的情况下将其传递给另一个程序员，也可能会被误解，因为您对枚举使用未声明的值是违反直觉的。

关于数字基数和文字表示，计算中的整数本身不是base-10或base-16，它实际上是base-2（二进制），并且任何其他表示都是人类方便。该语言已经包含以十进制和十六进制格式表示文字数字的方法。Limiting the number is a function of appropriately choosing the type.

如果您试图将某些内容限制为任意偶数的十六进制数字，则可能像这样简单地初始化一个字节数组会更合适：

```
 byte[] hexBytes = new byte[3] { 0xA1, 0xB2, 0xC3 }; 
```

此外，通过将您的值保持为常规数字类型或使用字节数组而不是将其放入带有枚举的元组中，您可以轻松访问整个范围的操作，否则会变得更加困难。

关于将数字限制为任意奇数的十六进制数字，您可以选择至少包含所需值 + 1 位的类型并在运行时限制该值。一种可能的实现如下：

```
 public class ThreeNibbleNumber
    {
        private _value;
        public ushort Value
        {
            get
            {
                return _value;
            }
            set
            {
                if (value > 4095)
                {
                    throw new ArgumentException("The number is too large.");
                }
                else
                {
                    _value = value;
                }
            }
        }

        public override string ToString()
        {
            return Value.ToString("x");
        }
    } 
```

在您对另一个答案的评论中，您引用了使用 CSS 颜色的想法。如果这就是您想要的，那么这样的解决方案似乎是合适的：

```
 public struct CssColor
    {
        public CssColor(uint colorValue)
        {
            byte[] colorBytes = BitConverter.GetBytes(colorValue);

            if (BitConverter.IsLittleEndian)
            {
                if (colorBytes[3] > 0)
                {
                    throw new ArgumentException("The value is outside the range for a CSS Color.", "s");
                }

                R = colorBytes[2];
                G = colorBytes[1];
                B = colorBytes[0];
            }
            else
            {
                if (colorBytes[0] > 0)
                {
                    throw new ArgumentException("The value is outside the range for a CSS Color.", "s");
                }

                R = colorBytes[1];
                G = colorBytes[2];
                B = colorBytes[3];
            }
        }

        public byte R;
        public byte G;
        public byte B;

        public override string ToString()
        {
            return string.Format("#{0:x}{1:x}{2:x}", R, G, B).ToUpperInvariant();
        }

        public static CssColor Parse(string s)
        {
            if (s == null)
            {
                throw new ArgumentNullException("s");
            }

            s = s.Trim();
            if (!s.StartsWith("#") || s.Length > 7)
            {
                throw new FormatException("The input is not a valid CSS color string.");
            }

            s = s.Substring(1, s.Length - 1);

            uint color = uint.Parse(s, System.Globalization.NumberStyles.HexNumber);

            return new CssColor(color);
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T04:22:11.800

我并不特别明白为什么要这样做，但是您可以在每个枚举值上使用 Description 属性来摆脱 _ 并创建某种静态函数，该函数允许您获取其中一个枚举值很容易像 Hex(15) -> 'F'。

```
public enum Hex {
    [Description("0")] _0 = 0,
    ...
} 
```

# symfony - Symfony2 和 FOSUserBUndle - 强制用户更改密码

> ID：12736408
> 
> 赞同：4
> 
> 时间：2012-10-04T21:38:06.937
> 
> 标签：symfony, passwords, fosuserbundle

我需要强制用户至少每 30 天更改一次密码。如何开始呢？我在数据库中注意到表用户有列`credentials_expire_at`，当它设置为过去日期时，这样的用户无法登录，我想在检测到过期消息时允许在登录表单中更改密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:03:11.337

你需要这样做：

1.  创建`EventListener`到`onSecurityInteractiveLogin`事件
2.  检查日期
3.  如果重定向更改密码表单失败

看看这个 coderwall protip：[http ://coderwall.com/p/cfmbaq](http://coderwall.com/p/cfmbaq)

# sql - 简单的 SQL 查询未执行

> ID：12736413
> 
> 赞同：1
> 
> 时间：2012-10-04T21:38:24.043
> 
> 标签：sql

我对 MySQL 很熟悉，并且认为 Microsoft SQL 对于简单的东西在语法上并没有什么不同。

因此，每当我想将名为**Country**的表上每一行的**Published**字段（布尔值）更新为 false 时，我都会这样做：

 **```
UPDATE Country SET Published = false; 
```

当我执行查询时，我收到此错误：

![错误](../Images/b13ec2de8ce0600651c31b06d9a468e7.png)

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:39:23.583

`Published`用单引号将值包裹起来，

```
UPDATE Country SET Published = 'false'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:40:26.723

```
Add [ and ]

UPDATE Country SET [Published] = false; 
```**

# iphone - iPhone 旋转横向

> ID：12736419
> 
> 赞同：0
> 
> 时间：2012-10-04T21:39:05.330
> 
> 标签：iphone, ios

我需要一些关于横向模式下 iphone 旋转的帮助导航栏没有被拉伸

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    UIImage *navBarImage = [UIImage imageNamed:@"nav-bar.png"];
    [[UINavigationBar appearance] setBackgroundImage:navBarImage 
                                       forBarMetrics:UIBarMetricsDefault];

    UIImage *barButton = [[UIImage imageNamed:@"bar-button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
    [[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal 
                                          barMetrics:UIBarMetricsDefault];

    UIImage *backButton = [[UIImage imageNamed:@"back-button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0,15,0,6)];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButton forState:UIControlStateNormal 
                                                    barMetrics:UIBarMetricsDefault];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:23:47.160

您不要在此方法中编写此代码。首先您必须在方法中返回 Yes -

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
} 
```

然后你必须使用：

```
-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation
{ if(orientation == UIInterfaceOrientationPortrait)
// here your code
} 
```

# java - 如何验证 SWT 小部件的输入（文本）

> ID：12736421
> 
> 赞同：2
> 
> 时间：2012-10-04T21:39:11.380
> 
> 标签：java, eclipse, swt, eclipse-rcp, jface

如何向`SWT`小部件添加验证？例如`Text`？
我尝试了以下两种方法（在网上找到）：

```
txtPort.addListener(SWT.Verify,new Listener() {  
  @Override  
  public void handleEvent(Event event) {  
      String port = ((Text)event.widget).getText();  
      try{  
          int portNum = Integer.valueOf(port);  
          if(portNum <0 || portNum > 65535){  
                event.doit = false;  
         }  
      }  
      catch(Exception ex){  
         event.doit = false;  
      }                 
   }  
}); 
```

还：

```
txtPort.addVerifyListener(new VerifyListener() {  
   @Override  
   public void verifyText(VerifyEvent e) {  
     String port = ((Text)e.widget).getText();  
      try{  
         int portNum = Integer.valueOf(port);  
         if(portNum <0 || portNum > 65535){  
             e.doit = false;  
          }  
      }  
      catch(Exception ex){  
          e.doit = false;  
      }  
   }  
}); 
```

如果我添加一个字符，光标会卡住，我什至无法删除它。
即使我第一次删除所有内容，光标也会卡住，我无法写其他任何内容。
我在这里搞砸了什么？我应该如何验证 a `Text`？
在这种情况下，我只想接受一个数字作为端口。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T21:59:01.780

您正在创建的`VerifyListener`将在实际输入任何文本之前被调用。您当前正在检查已输入的文本以查看该值是否有效，但它永远不会有效，因为尚未输入任何文本。

尝试读取 的值`e.text`以查看它是否为整数，并使用`e.start`和`e.end`属性以及`getText()`您现在拥有的 来查看整体新值是否介于 0 和 65535 之间。

一个更简单的解决方案可能是创建一个`ModifyListener`仅在 Text 小部件的文本包含有效端口号时才启用提交按钮的方法。

您可以尝试类似的方法：

```
txtPort.addVerifyListener(new VerifyListener() {  
    @Override  
    public void verifyText(VerifyEvent e) {
        /* Notice how we combine the old and new below */
        String currentText = ((Text)e.widget).getText();
        String port =  currentText.substring(0, e.start) + e.text + currentText.substring(e.end);
        try{  
            int portNum = Integer.valueOf(port);  
            if(portNum <0 || portNum > 65535){  
                e.doit = false;  
            }  
        }  
        catch(NumberFormatException ex){  
            if(!port.equals(""))
                e.doit = false;  
        }  
    }  
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T09:44:06.950

我想建议 JFace DataBinding。您可以轻松地在`ControlDecorationSupport`您的文本字段中添加一个，并为用户提供一些关于出了什么问题的指示。

```
/* with portText being your SWT text control */
IObservableValue textObservable = WidgetProperties.text().observe(portText);

UpdateValueStrategy strategy = new UpdateValueStrategy();
strategy.setBeforeSetValidator(new IValidator() {

    @Override
    public IStatus validate(Object value) {
        Integer portNumber = null;
        try {
            portNumber = Integer.valueOf((String) value);
        } catch (NumberFormatException e) {
            return error(e.getMessage() + " is not a number");
        }
        if (portNumber < 0 || portNumber > 65535) {
            return error("Number is out of range");
        }
        return ok();
    }
});

/* with text being the port value in your model */
Binding binding = new DataBindingContext().bindValue(
        textObservable,
        PojoProperties.value(Model.class, "text").observe(this.model), 
        strategy, null);

ControlDecorationSupport.create(binding, SWT.TOP | SWT.LEFT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T11:58:39.773

> （简单）在 java rcp/swt Eclipse 中使用 VerifyEvent 输入文本字段或仅输入数字

```
 Text txt_mobile = new Text(grpBasicDetails, SWT.BORDER);
    txt_mobile.addVerifyListener(new VerifyListener() {
        public void verifyText(VerifyEvent e) {

            /////  Keycode : backspace==8 (Enable backspace)

            if(!(e.character>='0'&&e.character<='9'||e.keyCode==8))
                {
                    txt_mobile.setText("");
                    //OR
                    //e.doit=false;

                }
                btnCancel.setEnabled(true);
        }
    }); 
```

# sql - mysql 选择计数资源 id #10

> ID：12736424
> 
> 赞同：0
> 
> 时间：2012-10-04T21:39:18.990
> 
> 标签：sql, select

当我运行以下代码时，回显返回资源 id #10 而不是数字，在我的情况下为 6。不胜感激！

```
$result = mysql_query("SELECT COUNT(`category_id`) FROM `products_has_product_category`
WHERE `category_id`=1");
        echo $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:44:13.607

使用函数`mysql_fetch_object`或`mysql_fetch_row`将查询结果转换为数据

```
$result = mysql_query("SELECT COUNT(`category_id`) as count FROM `products_has_product_category`
WHERE `category_id`=1");

$row = mysql_fetch_object($result);
$count = $row->count;
echo $count; 
```

见[mysql_fetch_object](http://php.net/manual/en/function.mysql-fetch-object.php)

# node.js - nodejs / winston logging -- 我想要几个日志文件，一个包含所有请求，一个只有 POST，另一个 GET（里面有详细信息）

> ID：12736430
> 
> 赞同：3
> 
> 时间：2012-10-04T21:39:49.253
> 
> 标签：node.js, logging, express, connect, winston

下面的代码将所有请求记录到两个文件，其中一个是 JSON 格式。这具有将每个请求记录到控制台两次的副作用。这是为什么？我确定我使用 Winston 不正确，任何反馈将不胜感激。

```
var winston = require('winston');

winston.loggers.add('main_nojson', {
    file: {
        filename: '/home/stu/logs/winston_txt.log',
        json: false
    }
});

winston.loggers.add('main_json', {
    file: {
        filename: '/home/stu/logs/winston_json.log',
        json: true
    }
});

var winlog1 = winston.loggers.get('main_nojson');
var winlog2 = winston.loggers.get('main_json');

var winstonStream = {
    write: function(message, encoding){
        winlog1.info(message);
        winlog2.info(message);
    }
};

app.use(express.logger({stream:winstonStream,  format: ':remote-addr - [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent" :response-time' })); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T09:32:38.183

对于任何可能从谷歌或其他地方偶然发现这个老问题的人：

另一种方法是以与添加它们的方式类似的方式删除控制台传输：

添加文件传输：

```
winston.add(winston.transports.File, { filename: 'logs/log.log' }); 
```

并回答 OP 的问题，类似于删除控制台传输，从而抑制控制台输出：

```
winston.remove(winston.transports.Console); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:00:55.550

尝试这个：

```
winston.loggers.add('main_json', {
    console: {
        silent: true
    },
    file: {
    filename: '/home/stu/logs/winston_json.log',
        json: true
    }
}); 
```

`console`和`file`传输都可以`silent`选择抑制输出；通过将其添加到您的一个记录器 - 或两者，就此而言 - 它会抑制控制台输出，但保留文件输出。

# java - FreeMarker 和 JSP 2 标记文件

> ID：12736434
> 
> 赞同：1
> 
> 时间：2012-10-04T21:40:22.347
> 
> 标签：java, jsp, freemarker, taglib

我正在尝试在 FreeMarker (2.3.19) 模板中使用 JSP 2 标签。为此，我需要转换以下 JSP 2 行：

```
<%@ taglib prefix="pagestudio" tagdir="/WEB-INF/tags" %> 
```

进入 FreeMarker 支持的代码行。我尝试过以下方法：

```
<#assign pagestudio=JspTaglibs["/WEB-INF/tlds/pagestudio.tld"]> 
```

但我需要一种解决方法，允许我包含标记文件而不是 tld。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:50:45.283

不，FreeMarker 不支持`.tag`文件，只支持传统的标记库。

# gcc - 为什么 gcc 在 main 开头推送 %rbx？

> ID：12736437
> 
> 赞同：8
> 
> 时间：2012-10-04T21:40:48.383
> 
> 标签：gcc, assembly

最新版本的 gcc 正在生成对我来说没有意义的程序集。我没有使用优化编译代码；但是，即使没有优化，这段代码的某些部分也没有意义。

这是C源代码：

```
 #include <stdio.h>

   int main()
   {
     int a = 1324;
     int b = 5657;
     int difference = 9876;
     int printf_answer = 2221;

     difference = a - b;

     printf_answer = printf("%d + %d = %d\n", a, b, difference);

     return difference;
   } 
```

它产生这个程序集：

```
 .file   "exampleIML-1b.c"
    .section    .rodata
.LC0:
    .string "%d + %d = %d\n"
    .text
.globl main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    pushq   %rbx
    subq    $24, %rsp
    movl    $1324, -32(%rbp)
    movl    $5657, -28(%rbp)
    movl    $9876, -24(%rbp)
    movl    $2221, -20(%rbp)
    movl    -28(%rbp), %eax
    movl    -32(%rbp), %edx
    movl    %edx, %ecx
    subl    %eax, %ecx
    movl    %ecx, %eax
    movl    %eax, -24(%rbp)
    movl    $.LC0, %eax
    movl    -24(%rbp), %ecx
    movl    -28(%rbp), %edx
    movl    -32(%rbp), %ebx
    .cfi_offset 3, -24
    movl    %ebx, %esi
    movq    %rax, %rdi
    movl    $0, %eax
    call    printf
    movl    %eax, -20(%rbp)
    movl    -24(%rbp), %eax
    addq    $24, %rsp
    popq    %rbx
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (GNU) 4.4.6 20120305 (Red Hat 4.4.6-4)"
    .section    .note.GNU-stack,"",@progbits 
```

有几件事没有意义：

(1) 为什么要推送 %rbx？%rbx 中有什么需要保存？

(2) 为什么我们在减法之前将 %edx 移动到 %ecx ？它不只是做`sub %eax, %edx`什么？

(3) 同样，为什么在存储值之前从 %ecx 移回 %eax？

(4) 编译器将变量 a 放入内存位置 -32(%rbp)。除非我添加错误，否则 -32(%rbp) 不等于堆栈指针吗？不应该将所有局部变量存储在*小于*当前堆栈指针的值处吗？

我正在使用这个版本的 gcc：

[eos17:~/Courses/CS451/IntelMachineLanguage]$ gcc -v 使用内置规范。目标：x86_64-redhat-linux 配置：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http:// bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --with-java- home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share /java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux 线程模型: posix gcc 版本 4.4.6 20120305 (Red Hat 4.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T21:56:37.477

```
GCC dictates how the stack is used. Contract between caller and callee on x86:

    * after call instruction:
          o %eip points at first instruction of function
          o %esp+4 points at first argument
          o %esp points at return address 
    * after ret instruction:
          o %eip contains return address
          o %esp points at arguments pushed by caller
          o called function may have trashed arguments
          o %eax contains return value (or trash if function is void)
          o %ecx, %edx may be trashed
          o %ebp, %ebx, %esi, %edi must contain contents from time of call 
    * Terminology:
          o %eax, %ecx, %edx are "caller save" registers
          o %ebp, %ebx, %esi, %edi are "callee save" registers 
```

main 函数与此上下文中的任何其他函数一样。gcc 决定`ebx`用于中间计算，因此它保留了它的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T22:02:50.867

默认情况下，gcc 在禁用优化的情况下编译，显然就是这种情况。

您需要使用其中一个优化开关（例如`-O2`或`-O3`）来启用它。

这样你就不会看到多余的、看似毫无意义的东西了。

至于`rbx`，它必须被保留，因为这是调用约定所要求的。您的函数会修改它 ( `movl -32(%rbp), %ebx`)，因此必须显式保存和恢复它。

# php - 为什么这个 php mailer 脚本 fort HTML & 附件不起作用？

> ID：12736439
> 
> 赞同：0
> 
> 时间：2012-10-04T21:40:53.410
> 
> 标签：php, html, email, sendmail, email-attachments

> **可能重复：**
> [如何使用 PHP 发送带附件的电子邮件？](https://stackoverflow.com/questions/2027069/how-to-send-email-with-attachment-using-php)
> [PHP mail() 附件问题](https://stackoverflow.com/questions/6275070/php-mail-attachment-problems)

我正在尝试实现这个脚本： [发送带有附件的 PHP HTML 邮件](https://stackoverflow.com/questions/9519588/send-php-html-mail-with-attachments)

我在脚本中唯一修改的是发送地址和文件。我正在尝试附加`.mp3`文件而不是`.zip`文件 - 也许这就是我得到意外结果的原因？

`.mp3`文件只有31kb

但是当我收到电子邮件时，邮件中没有附件，也没有 HTML 格式。

电子邮件包含：

```
--PHP-mixed-a80d597fc7c02e67ff5be867c7a48bab
Content-Type: multipart/alternative; boundary="PHP-alt-a80d597fc7c02e67ff5be867c7a48bab"

--PHP-alt-a80d597fc7c02e67ff5be867c7a48bab
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello World!!!
This is simple text email message.

--PHP-alt-a80d597fc7c02e67ff5be867c7a48bab
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2>
<p>This is something with <b>HTML</b> formatting.</p>

--PHP-alt-a80d597fc7c02e67ff5be867c7a48bab--

--PHP-mixed-a80d597fc7c02e67ff5be867c7a48bab
Content-Type: application/zip; name="attachment.zip"
Content-Transfer-Encoding: base64
Content-Disposition: attachment

SUQzAwAAAAABIVRQRTEAAAAfAAAB//5DAGgAZQBlAHMAZQBDA..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:44:35.723

我正在查看您邮件中的这一行：

内容类型：应用程序/zip；名称="附件.zip"

您正在附加一个 mp3 文件，因此您的内容类型应为音频/mpeg3，文件名应与您发送的任何内容一致。

内容类型：音频/mpeg3；名称="somefile.mp3"

另外 - 小心 64 位编码。您必须对 mp3 进行编码才能邮寄，因为如果您不这样做，您将再次得到意想不到的结果。

# c++ - 未定义参考 C++ 队列模板处理字符串

> ID：12736440
> 
> 赞同：0
> 
> 时间：2012-10-04T21:40:54.057
> 
> 标签：c++, templates, queue

我正在做作业，我必须编写一个模板，然后将模板实现到驱动程序中。不幸的是，我在编译时收到错误消息。我刚刚开始学习 C++ 更复杂的方面，我不知道如何解决这个问题。

/tmp/ccdvvLpF.o:main.cpp: (.text$_ZN11LinkedQueueISsE7enqueueERKSs[LinkedQueue, std::allocator > >::enqueue(std::basic_string, std::allocator > const&)]+0x4a): 对`LinkedQueue<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::number' /tmp/ccdvvLpF.o:main.cpp:(.text$_ZN11LinkedQueueISsE7enqueueERKSs[LinkedQueue<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::enqueue(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x66): undefined reference to`LinkedQueue的未定义引用, std::allocator > >::number' /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: /tmp/ccdvvLpF.o: `.text$_ZN11LinkedQueueISsE7enqueueERKSs [LinkedQueue, std::allocator > >::enqueue(std::basic_string, std::allocator > const&)]' 部分中的错误重定位地址 0x66: ld 返回 1退出状态

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:47:19.437

`static int number`从未定义。在您的课程之外添加以下定义。

```
template <class T> int LinkedQueue<T>::number = 0; 
```

`static`成员是*特殊*的，`static int number`类内部只是一个声明而不是定义。这样做的原因是因为标头通常包含在*多个*翻译单元中，因此 C++ 强制您通常在 cpp 文件中的类之外定义它们，这样您就不会遇到多个定义错误。

# sql - 将多行合并为一，但根据值有新行

> ID：12736441
> 
> 赞同：0
> 
> 时间：2012-10-04T21:40:53.900
> 
> 标签：sql, common-table-expression, sql-server-2012

我想将多行合并为一个，但是当某个值出现在字段中时会有一个新行，请参见下面的示例数据

数据当前在表中的方式

```
IncomingNumber  QueNumber Datetime
--------------  --------- -------------------
12345678        1         2012-01-01 09:01:00
12345678        2         2012-01-01 09:02:00
12345678        3         2012-01-01 09:05:00
12345678        2         2012-01-01 09:07:00
12345678        3         2012-01-01 09:08:00
12345678        1         2012-01-01 09:10:00
12345678        2         2012-01-01 09:11:00
12345678        3         2012-01-01 09:13:00
09876543        1         2012-01-01 09:01:00
09876543        2         2012-01-01 09:02:00
09876543        1         2012-01-01 09:05:00
09876543        2         2012-01-01 09:06:00
09876543        3         2012-01-01 09:08:00 
```

我希望数据看起来如何

```
IncomingNumber  Datetime1            Datetime2            Datetime3            Datetime4            Datetime5
--------------  -------------------  -------------------  -------------------  -------------------  -------------------
12345678        2012-01-01 09:01:00  2012-01-01 09:02:00  2012-01-01 09:05:00  2012-01-01 09:07:00  2012-01-01 09:08:00
12345678        2012-01-01 09:10:00  2012-01-01 09:11:00  2012-01-01 09:13:00  Null                 Null
09876543        2012-01-01 09:01:00  2012-01-01 09:02:00  Null                 Null                 Null
09876543        2012-01-01 09:05:00  2012-01-01 09:06:00  2012-01-01 09:08:00  Null                 Null 
```

因此，每次在 QueNumber 字段中出现 1 时，它都是一条新记录。我知道它与 CTE 查询有关，但我从来没有真正使用过它们并且完全被卡住了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:41:36.817

欢迎来到 StackOverflow。如果您发布 DDL 和示例数据以帮助他们帮助您，它通常会帮助其他人。这是您的表格数据。

```
create table tbl (IncomingNumber int,QueNumber int,Datetime datetime);
insert tbl values
    (12345678 ,1 ,'2012-01-01 09:01:00'),
    (12345678 ,2 ,'2012-01-01 09:02:00'),
    (12345678 ,3 ,'2012-01-01 09:05:00'),
    (12345678 ,2 ,'2012-01-01 09:07:00'),
    (12345678 ,3 ,'2012-01-01 09:08:00'),
    (12345678 ,1 ,'2012-01-01 09:10:00'),
    (12345678 ,2 ,'2012-01-01 09:11:00'),
    (12345678 ,3 ,'2012-01-01 09:13:00'),
    (09876543 ,1 ,'2012-01-01 09:01:00'),
    (09876543 ,2 ,'2012-01-01 09:02:00'),
    (09876543 ,1 ,'2012-01-01 09:05:00'),
    (09876543 ,2 ,'2012-01-01 09:06:00'),
    (09876543 ,3 ,'2012-01-01 09:08:00'); 
```

以下查询为您提供所需的内容，最多 5 个日期时间列。如果任何行产生超过 5 列，则不会显示额外内容。我使用了一种很容易让您扩展的模式。从下往上数，您只需要更改第 2 行和第 4 行即可满足更多日期时间列。

```
;with c1 as (
    select *,rn=ROW_NUMBER() over (partition by IncomingNumber order by DateTime)
    from tbl
), c2 as (
    select IncomingNumber,1 row,1 col,rn,DateTime
    from c1
    where rn=1
    union all
    select c1.IncomingNumber,
            case when c1.QueNumber=1 then c2.row+1 else c2.row end,
            case when c1.QueNumber=1 then 1 else c2.col+1 end,
            c1.rn,
            c1.DateTime
    from c2
    join c1 on c1.IncomingNumber=c2.IncomingNumber and c1.rn=c2.rn+1
)
select IncomingNumber,[1][DateTime1],[2][DateTime2],[3][DateTime3],[4][DateTime4],[5][DateTime5]
from(select IncomingNumber,row,col,DateTime from c2)p
pivot(max(DateTime)for col in([1],[2],[3],[4],[5]))v
order by IncomingNumber,row 
```

# objective-c - 从 iPad 状态栏中删除电池和手表图标

> ID：12736442
> 
> 赞同：1
> 
> 时间：2012-10-04T21:40:55.153
> 
> 标签：objective-c, ios, uistatusbar

我需要从 iPad 应用程序的状态栏中移除电池和手表图标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:43:49.217

不，你不能这样做。您只能删除完整的状态栏。

我不知道为什么人们会想要移除时钟和电池，但无论如何都要离开酒吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:18:36.623

您可以使用`UIWindow`布局为不透明视图的子类，复制状态栏的外观。您可以相应地设置它的框架，以便它只阻挡您需要隐藏的状态栏部分。然后将`windowLevel`属性设置为类似`UIWindowLevelStatusBar + 1.0f`. 希望这可以帮助！

**编辑**

我想出了一些基本的示例代码。这仅应被视为概念证明。值得生产代码的尝试有很多考虑因素，例如旋转、不同的状态栏样式（我想说半透明实际上不可能做到）以及状态栏中项目的不同布局。

子类`UIWindow`：

```
@interface StatusBarMask : UIWindow

@end

@implementation StatusBarMask

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.windowLevel = UIWindowLevelStatusBar + 1.0f;
        self.backgroundColor = [UIColor greenColor];
        self.hidden = NO;
    }
    return self;
}

@end 
```

以及实例化它的视图控制器：

```
@interface ViewController ()

@property (nonatomic, strong) StatusBarMask *mask;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect appStatusBarFrame = [[UIApplication sharedApplication] statusBarFrame];
    appStatusBarFrame.size.width = 384.0f;
    appStatusBarFrame.origin.x = 384.0f;
    self.mask = [[StatusBarMask alloc] initWithFrame:appStatusBarFrame];
}

@end 
```

这将用亮绿色矩形遮住状态栏的右侧。根据需要调整颜色和大小，并考虑所有渐变、弯曲边缘等。通过仔细考虑各种边缘情况，您应该能够实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:44:54.500

您可以使用以下代码隐藏顶部状态栏

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

# android - Android - 未检测到设备

> ID：12736445
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:41:00.460
> 
> 标签：android

我正在尝试在我的 Galaxy Nexus（来自 Google）上测试 Android 应用程序。我为 Web 开发人员使用 Windows 7 Home Premium 64 位和 Eclipse Java EE IDE。

我的设备没有显示在 Eclipse DDMS 视图中。当我在 cmd 中运行**adb devices**时，我的设备也没有显示。

我启用了 USB 调试。

当我尝试安装[此处](http://developer.android.com/tools/device.html)显示的 USB 驱动程序时， 我收到一条消息，指出我的设备软件是最新的。

我还尝试杀死 adb 服务器并重新启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:06:00.027

试试[通用裸体司机](http://forum.xda-developers.com/showthread.php?t=1379875)？请务必按照论坛帖子中的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T16:13:55.617

我有一个类似的问题。我无法让我的设备显示在我的 Eclipse 设备窗口中。当我输入`adb devices`时，没有发现任何设备。幸运的是，我发现了[这个](http://theunlockr.com/2009/10/06/how-to-set-up-adb-usb-drivers-for-android-devices/)网站。它基本上让我为我的摩托罗拉（Android 2）安装了一个通用驱动程序。它为三星和其他制造商提供了其他驱动程序。安装后，我的摩托罗拉手机在 ADB 中可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:21:44.257

Nexus 设备需要[Google USB Drivers](http://developer.android.com/sdk/win-usb.html)，您可以通过 SDK Manager 获取它们。

如果您已安装它们但仍未检测到设备，请尝试以下操作：

*   使用不同的 USB 端口（对我来说，USB 3.0 端口总是有问题）
*   重启设备和电脑
*   重启亚行

另请查看[此处](http://nexusshacks.com/nexus-s-hacks/how-to-install-nexus-s-windows-usb-drivers/)，其中解释了如何为 Nexus S 安装驱动程序。

# python - 如何使用 __init__.py 中的 import * 将文档字符串带入包范围？

> ID：12736451
> 
> 赞同：3
> 
> 时间：2012-10-04T21:41:18.480
> 
> 标签：python, module, documentation, docstring

我有一个 Python 包，其中实现被分成（为了可维护性）两个内部子模块。但是，从用户的角度来看，包应该作为一个单元出现，因此在包的`__init__.py`两个子模块中都使用 导入`import *`，如下所示：

```
# filesystem layout:
mypkg/
    __init__.py
    subA.py # defines class A
    subB.py # defines class B 
```

和

```
# __init__.py
from .subA import *
from .subB import * 
```

从包功能的角度来看，这可以按预期工作：

```
>>> import mypkg
>>> a = mypkg.A() # works
>>> b = mypkg.B() # works 
```

如果直接查找这些类的内联帮助，一切都很好：

```
>>> help(mypkg.A) # works
>>> help(mypkg.subA.A) # also works 
```

问题是，如果我只是查找顶级包的帮助，请参阅。

```
>>> help(mypkg) 
```

那么子模块中的类和函数根本不会“自愿”出现（尽管它们中的变量确实出现在该`DATA`部分中）。这是预期/正确的行为吗，有没有办法绕过它，以便用户不必知道仅为实现/维护方便而存在的子模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:28:34.807

我所知道的最佳解决方案就是将相关的文档化对象（类、函数、数据）添加到`__all__`您的`__init__.py`.

# xpages - replaceItem 和日期值发生异常

> ID：12736454
> 
> 赞同：1
> 
> 时间：2012-10-04T21:41:38.970
> 
> 标签：xpages

尝试使用 @Date 值和 replaceItemValue 设置日期值时出现以下错误。

我得到的错误发生在代码的最后一行：

```
var dt = @Date(2012,1,1);
docContractor.replaceItemValue("NewField","Hello World");
docContractor.replaceItemValue("ContractorStartDateTime",dt); 
```

错误是：

执行 JavaScript 动作表达式时出错脚本解释器错误，line=21，col=31：[TypeError] 调用方法 NotesDocument.replaceItemValue(string, Date) null 发生异常

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:39:04.243

以下作品：

```
docContractor.replaceItemValue("ContractorStartDateTime", session.createDateTime("Today")); 
```

您可以在 Notes 和 Domino App Dev wiki 中找到更多示例：[http ://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDateTime_sample_JavaScript_code_for_XPages](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDateTime_sample_JavaScript_code_for_XPages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:35:58.817

您是否尝试改用 NotesDateTime 对象？或者使用 toString()

# javascript - Express + node.js 中的服务器端数据验证

> ID：12736458
> 
> 赞同：7
> 
> 时间：2012-10-04T21:41:49.707
> 
> 标签：javascript, validation, node.js

我的服务器由三个主要组件组成 - node.js + express + mongojs。现在我正在寻找一种方法来插入客户端输入的服务器端验证。Mongoose 通过其 Schema 定义提供它，但是，我希望验证独立于特定的 DB 层。

理想情况下，我正在寻找支持声明式验证规则的东西（再次，如猫鼬模式），但与 mongo 没有任何耦合。

有任何想法吗？

附言

我提到 Express，因为我的目的是将验证层作为 Express 中间件插入。这应该有效，不是吗？

聚苯乙烯

如果在客户端也可以使用相同的 javascript 代码，则额外的好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T21:44:27.090

我对节点验证器很幸运：[https ://github.com/chriso/node-validator](https://github.com/chriso/node-validator)

# mysql - 计算 MySQL 列中子字符串的出现次数

> ID：12736459
> 
> 赞同：5
> 
> 时间：2012-10-04T21:41:51.797
> 
> 标签：mysql, select, count

我有一个表，其中存储了许多推特推文的信息，包括推文文本和发布推文的用户的屏幕名称。推文包含主题标签（以 # 开头），我想计算特定用户发布的主题标签数量：

```
tweet_id |                       tweet_text                           | screen_name    |
--------------------------------------------------------------------------------------------
       1 | #hashtag1 #otherhashtag2 #hashtag3 some more text          | tweeter_user_1 |
       2 | some text #hashtag1 #hashtag4 more text                    | tweeter_user_2 |
       3 | #hashtag5 #hashtag1 @not a hashtag some#nothashtag         | tweeter_user_1 |
       4 | #hashtag1 with more text                                   | tweeter_user_3 |
       5 | #otherhashtag2 #hashtag3,#hashtag4 more text               | tweeter_user_1 | 
```

如果我要计算 tweeter_user_1 的标签，我期望的结果是 8，如果我想要 tweeter_user_3 的标签，它应该返回 1。假设我的表名是 tweets，我该怎么做。

我试过这个：`SELECT COUNT( * ) FROM tweets WHERE( LENGTH( REPLACE( tweet_text, '#%', '@') = 0 ) ) AND screen_name = 'tweeter_user_1'`但它没有用

如果 tweeter_user_1 的结果也是 9，我会很高兴：D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T22:18:54.943

这应该会给你一个 screen_names 列表和他们使用的所有主题标签的总数。

```
SELECT  foo.screen_name, SUM(foo.counts) FROM 
  (
    SELECT screen_name, 
           LENGTH( tweet_text) - LENGTH(REPLACE(tweet_text, '#', '')) AS counts 
    FROM tweet_table 
  ) as foo 
GROUP BY  foo.screen_name 
```

但是....如果表很大，这是一个讨厌的查询。如果您只需要单个用户的计数，我可能会在内部选择中指定特定用户。像这样：

```
SELECT  foo.screen_name, SUM(foo.counts) FROM 
 (
    SELECT screen_name, 
         LENGTH( tweet_text) - LENGTH(REPLACE(tweet_text, '#', '')) AS counts 
    FROM tweet_table WHERE  screen_name = 'tweeter_user_1' 
 ) as foo 
GROUP BY  foo.screen_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:02:15.120

根据您需要运行查询的频率，您可能会导致 MySQL 花费大量 CPU 时间来解析和重新解析`tweet_text`列。我强烈建议`hashtag_qty`您在填充行开始时添加一列（或类似列）并在其中存储主题标签元素的数量。

# c# - 在 C# 中创建数据子集时的最佳实践

> ID：12736461
> 
> 赞同：0
> 
> 时间：2012-10-04T21:42:00.380
> 
> 标签：c#, sql, sql-server, sql-server-2008, tsql

处理以下场景时，什么被认为是最佳实践？

我有一个总计约 600 万条记录的数据集，分为 30 多个表，其中一些表有几十万条记录。我需要使用一次只允许插入 200 条记录的 api。

我正在按表格分解插入。现在，我正在考虑我想到的前两个选项。我可以获取该表的完整数据集，然后在 C# 中循环遍历数据集，一次仅插入 200 个。或者我可以进行多个数据库调用，一次抓取 200 条记录。创建我的对象并调用 API 以插入我的记录。我想我可以在插入其他记录的同时进行下一个数据库调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:56:39.367

Use multiple threads, with each reading and inserting 200 at a time. Not only will this be faster, but you won't run into potential [OutOfMemoryExceptions](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx) with that large of a dataset by being unable to allocate contiguous blocks over fragmented memory.

# javascript - 将 JSON 属性映射到 HTML ID 以轻松设置值

> ID：12736464
> 
> 赞同：2
> 
> 时间：2012-10-04T21:42:20.597
> 
> 标签：javascript, jquery, json

假设我有以下内容：

```
var address = {id: 100, name: "Gregg", addressOne: "111 1st Street"}; 
```

和一个 HTML 表单：

```
<input id="name" />
<input id="addressOne" /> 
```

我想知道是否有一种方法可以遍历表单的所有 INPUT 元素，并根据 JSON 对象的属性设置它们的值。以下是我可以采取的长期方法：

```
$.each($("input"), function(idx, input) {
   if (input.attr("id") == "name") input.val( address.name );
   if (input.attr("id") == "addressOne") input.val( address.addressOne );
}); 
```

我想知道是否有办法在没有 IF 语句的情况下执行上述操作。JavaScript中是否有某种方法可以将两者动态映射在一起。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T21:48:48.023

您可以使用`val`方法：

```
$('input').val(function(i, v){
    return address[this.id]
}) 
```

[http://jsfiddle.net/GKUMk/](http://jsfiddle.net/GKUMk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:47:35.920

```
$("#name").val(address.name);
$("#addressOne").val(address.addressOne); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:46:53.843

```
$.each($("input"), function(idx, input) {
   if (address[input.attr("id")]) {
       address[input.attr("id")]
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:48:36.277

你可以试试这个

```
$('input').each(function(){
    $(this).val(address[this.id]);
}); 
```

[**演示**](http://jsbin.com/olujel/4/edit)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:56:43.170

I think that this would work, but I redefine the var address to a JSON object.

```
var address = {id: 100, name: "Gregg", addressOne: "111 1st Street"} 
```

And the iterator could be:

```
$.each($("input"), function(idx, input) {
    $(this).val( address[input.id] );
});​ 
```

I hope this helps.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T21:58:51.920

```
<input type="text" id="name" />
<input type="text" id="addressOne" />

var address = { id: 100, name: "Gregg", addressOne: "111 1st Street" },
prop, $field;

for ( prop in address ) {
    $( "#" + prop ).val( address[prop] );
} 
```

Note the address variable is now an object literal rather than an array.

Fiddle: [http://jsfiddle.net/kboucher/Gt9ND/](http://jsfiddle.net/kboucher/Gt9ND/)

# c# - 如何使用 DbContext 设置此查询

> ID：12736466
> 
> 赞同：0
> 
> 时间：2012-10-04T21:42:28.583
> 
> 标签：c#, entity-framework, datacontext

我在 SQL Server 中有两张表用于客户及其地址。

```
CREATE TABLE Customers
(
    ID              INT NOT NULL IDENTITY(1,1),
    LastName        VARCHAR(50) NOT NULL,
    FirstName       VARCHAR(50) NOT NULL,
    DateOfBirth     DATETIME2 NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY CLUSTERED ([ID] ASC)
)
CREATE TABLE CustomerAddresses
(
    ID              INT NOT NULL IDENTITY(1,1),
    CustomerID      INT NOT NULL CONSTRAINT [FK_CustomerAddresses_Customers] FOREIGN KEY([CustomerID]) REFERENCES [dbo].[Customers] ([ID]),
    Street          VARCHAR(100) NOT NULL,
    City            VARCHAR(50) NOT NULL,
    Country         VARCHAR(50) NOT NULL,
    CONSTRAINT [PK_CustomerAddresses] PRIMARY KEY CLUSTERED ([ID] ASC)
) 
```

我已经生成了一个 EFdatamodel 并使用 DataContext 连接到它。我正在尝试吸引特定国家/地区的所有客户。我的代码如下。

```
static List<Customer> GetByCountry(string country)  
        {  
            MyDbContext MyContext = new MyDbContext ();  
            return MyContext.Customers.Where(x => x.CustomerAddresses.Where( y => y.Country == country)).ToList();  
        } 
```

但我收到以下编译错误。

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“bool”无法将 lambda 表达式转换为委托类型“System.Func”，因为块中的某些返回类型不能隐式转换为委托返回类型

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:09:11.563

您的代码必须是

```
return MyContext.Customers.Where(x => x.CustomerAddresses.Any( y => y.Country == country)).ToList(); 
```

因为您要返回所有具有指定国家/地区地址的客户。Where() 期望一个函数返回条件是否为真，并返回所有保持该条件为真的元素的枚举。在您的外部 Where() 中，您提供了一个 IEnumerable 类型的参数（这是您的内部 where 的返回值），这是错误的。

# java - Java SOAP 类不存在

> ID：12736469
> 
> 赞同：0
> 
> 时间：2012-10-04T21:42:36.060
> 
> 标签：java, soap

当 Java 类不存在时会发生什么？我们有一个带有客户端和服务器的 SOAP 设置。我们有以下代码：

```
try{

new myClass()
} catch (Exception e){} 
```

在 myClass 中，创建了另一个对象“classNotReallyPresent”，它位于我们从未放在服务器上的 .jar 中，这就是我们得到错误的原因。然而，我们很惊讶 catch 块没有做任何事情，并且我们的服务器日志上没有打印任何消息。所以我问，在这种无法实例化类 (myClass) 的场景中，预期的行为是什么，因为它正在构造的成员对象/变量 (classNotReallyPresent) 缺少 .class 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:12:20.940

您没有在`catch`子句中打印错误。最简单的打印方法是使用以下代码：

```
try{
    new myClass();
} catch (Exception e) {
    e.printStackTrace();
} 
```

除此之外，不好抓`Exception`，最好只抓`java.lang.ClassNotFoundException`。

# backbone.js - 使用 pushState 的 Express 和 Backbone 路由

> ID：12736470
> 
> 赞同：0
> 
> 时间：2012-10-04T21:42:36.950
> 
> 标签：backbone.js, express

我对这两种技术都很陌生，并且想知道如何配置我的应用程序的最佳方式。我想没有hastags，只使用pushState。同样从我读到的最好的方法是在渲染服务器端和客户端之间进行混合，但我不确定如何设置它。我已经想出了如何做一个或另一个，但不是一起做。

截至目前，这是我所在的位置：

特快路线

```
app.get('/', site.index);
app.get('/product/:id', wiki.show); 
```

再次，这在不使用 pushState 的情况下也可以正常工作，但现在我如何将两者结合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:21:21.100

要创建混合客户端/服务器应用程序，您希望客户端和服务器都能够呈现每个视图。当用户访问您的站点时，服务器会呈现视图并将 html 发送给用户。此时，客户端应用程序加载和任何相关链接都应该被拦截并替换为主干导航。

```
$(document).on('click', 'a:not([data-bypass])', function(e){
  href = $(this).prop('href')
  root = location.protocol+'//'+location.host+'/'
  if (root===href.slice(0,root.length)){
    e.preventDefault();
    Backbone.history.navigate(href.slice(root.length), true);
  }
}); 
```

一旦主干应用程序启动，这行代码将捕获所有没有数据绕过属性的锚标记，并在您的客户端应用程序中触发路由功能，而不是将对该页面的请求发送到服务器。添加一个 data-bypass 属性来创建一个不会触发路由功能的链接。

# python - 当作为 www-data 运行时，为什么 input.send_keys() 在我的 Selenium WebDriver Python 脚本中不起作用？

> ID：12736471
> 
> 赞同：4
> 
> 时间：2012-10-04T21:42:44.453
> 
> 标签：python, firefox, selenium, debian, selenium-webdriver

我有一个 Python 脚本，它使用[Selenium WebDriver](http://pypi.python.org/pypi/selenium)（以[PyVirtualDisplay](http://pypi.python.org/pypi/PyVirtualDisplay)作为显示器）登录 Flickr。

*   [http://pastebin.com/dqmf4Ecw](http://pastebin.com/dqmf4Ecw)（您需要添加自己的 Flickr 凭据）

当我在我的 Debian 服务器上以自己的身份运行它时，它运行良好。（我是 sudoer，但我在运行脚本时不使用 sudo。）

当我以用户身份运行它时`www-data`（最终它将运行它，因为我想从 Django 网站触发它），我遇到了两个问题，一个小，一个大：

1.  （小）：`webdriver.Firefox()`调用需要 30-45 秒才能返回，而我自己运行时需要 2 秒
2.  （大）：脚本无法登录 Flickr。为了登录，我在 Flickr 登录页面 (http://www.flickr.com/signin/) 上找到了用户名和密码字段，并使用它`element.send_keys()`来输入用户名和密码。尽管 Selenium 似乎找到了元素（即没有抛出），但是当脚本运行时（根据我使用的屏幕截图`NoSuchElementException`），值不会输入到字段中，这与脚本作为我自己运行时不同。`www-data``browser.save_screenshot`

为什么`send_keys()`当脚本运行时不起作用`www-data`？（这是否与浏览器启动时间更长有关？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:07:19.417

也许你的环境中有一些不同的东西。

尝试通过示例复制您`~/.bashrc`的`/home/www-data`

如果还不够，请以您当前用户的身份运行此命令并以以下身份运行`www-data`：

```
strace -tt -f -s 1000 -o /tmp/trace ./script.py 
```

并将其粘贴（过滤掉您的登录名/密码）某处。

我们会看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:01:03.227

还有一些需要思考的事情：

*   您能否从 www-data 帐户手动生成一次 firefox，并确保 Firefox 在每次执行脚本之前都不会自我更新？我曾经在 Windows 上使用 Selenium RC 遇到过这个问题，并且必须在使用更新的二进制文件启动脚本之前让更新完成。

*   作为一种解决方法，我想您可以尝试以 www-data 用户身份运行脚本，但远程连接到在您的登录名中运行的 webdriver 服务器（也称为“网格”模式）。这对你有用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:18:46.257

有时，Firefox 在启动期间会执行一些令人讨厌的插件兼容性检查。由于每个用户可以有一组不同的浏览器插件，这可能是启动时间不同的原因。您可以尝试在用户之间同步您的 Firefox 配置文件。

那么，您确定 Firefox 作为用户 www-data 具有正确的网络/互联网访问权限吗？您能否确认 Flickr 站点通过 SeleniumHQ 正确加载？“*脚本无法登录 Flickr* ”太不精确了。关于失败原因的更多细节可能会立即揭示问题。

编辑：对不起，我只是明白配置文件不应该有差异，因为 Selenium 创建了一个。不过，我的第二点可能有用，所以我不会删除这个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T06:32:10.343

我建议从 google 获取最新的 chrome，然后在该浏览器中尝试 input.send_keys()。

有时 webdriver 的某些功能会在新版本中被破坏。如果您一心想用 Firefox 进行测试，那么使用旧/新版本的 selenium webdriver 可能会更好。

我记得在 mac 上遇到过关于 send_keys() 的类似问题。我的问题是，在我更新 selenium webdriver 后，send_keys() 在某些模式窗口中不起作用。我通过恢复到我知道可以工作的旧 webdriver 来修复它. 但是，我使用 Ruby 而不是 Python 来驱动 webdriver。

有时，如果您将其用作其他用户，则在您的 shell 中获取正确的 ENV 变量也可能会出现问题。我建议尝试进行故障排除，看看是否所有 shell ENV 变量都在 www-data 下正确设置。

# intellij-idea - 使用 gradle 的 IDEA 插件进行深度嵌套的项目

> ID：12736474
> 
> 赞同：2
> 
> 时间：2012-10-04T21:43:08.867
> 
> 标签：intellij-idea, gradle

我们有一个像这样的项目结构：

```
root
    core
        auth
        ... 
```

在根目录的 build.gradle 文件中：

```
allprojects {
    apply plugin: 'idea'
} 
```

及其settings.gradle：

```
include 'core' 
```

核心有一个 gradle.build 文件和一个 settings.gradle ：

```
include 'auth' 
```

因此，当我从根目录运行时：

```
gradle idea 
```

它将在根目录上构建 ipr、iws 和 iml 文件，并且 core 文件夹将有一个 core.iml。但是 auth 模块没有被创建。我必须进入 intellij 并手动将模块添加到核心。有点烦人。gradle 是否支持像这样的深度嵌套项目，或者这是 IDEA 插件的限制？或者，很可能，我做错了什么:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:10:43.587

Figured it out. I'll phrase this for best google results: A deeply nested gradle project only can have one settings.gradle file at the root, and it looks like this:

```
include 'core'
include 'core:auth' 
```

Once this is done, gradle will read in all subprojects and configure IDEA accordingly.

# django - Django中的命名路由不能在模板中反转

> ID：12736478
> 
> 赞同：0
> 
> 时间：2012-10-04T21:43:48.587
> 
> 标签：django, django-urls

我有一个简单的命名路线：

```
url(r'^$', 'appname.views.static.home', name='homepage'), 
```

并试图在视图中使用它：

```
{% url 'homepage' %} 
```

据我所知，根据[文档](https://docs.djangoproject.com/en/dev/topics/http/urls/#id2)，这是正确的- 那么为什么我会收到`NoReverseMatch`错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:45:27.480

与文档中的示例相反，不在`url`帮助程序中使用引号：

```
{% url homepage %} 
```

# c# - 使用RequiredFieldValidator 时，JQuery 方法不会从后面的代码中触发

> ID：12736480
> 
> 赞同：1
> 
> 时间：2012-10-04T21:43:49.073
> 
> 标签：c#, asp.net

在使用RequiredFieldValidator 时，我遇到了从代码后面调用的jQuery 方法的问题。如果没有表单上的RequiredFieldValidator，这很有效。当它在表单上时，我收到一个错误：

**Microsoft JScript 运行时错误：对象不支持属性或方法“toastmessage”**

好像它没有加载 jquery.js 文件一样。

作为测试，我有一个简单的页面，上面有一个 TextBox 和一个 UpdatePanel 中的按钮。当您单击该按钮时，它会使用以下代码触发服务器端 OnClick 方法：

```
 ScriptManager.RegisterClientScriptBlock(this.Page, this.Page.GetType(), "alert", @"$().toastmessage('showWarningToast', 'Record Saved Successfully.'); ", true); 
```

这很好用，并弹出消息。当我将RequiredFieldValidator 附加到TextBox 时，就会弹出错误。有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:22:18.150

将此添加到您的必填字段验证器：

```
EnableClientScript="false" 
```

# javascript - HTML如何删除标签而不是内容

> ID：12736482
> 
> 赞同：2
> 
> 时间：2012-10-04T21:44:01.503
> 
> 标签：javascript, html, dom

如何使用 javascript html 标签（例如 span）而不是内容和内容中的 html 标签删除？一个例子：

```
<div id="content">
    <span id=1 class="note" >
        <p>   <span id=1 class="note" >hello! its one example  </span> </p>
        <li>  <span id=1 class="note" >yes,one example  </span> </li>
    </span> 
</div> 
```

结果应该是：

```
<div id="content">
    <p> hello! its one example</p><li>yes,one example</li>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:52:31.127

由于您没有提到您需要 JQuery，以下是我建议的代码：

[http://jsfiddle.net/9qgK7/](http://jsfiddle.net/9qgK7/)

相关代码：

```
span.outerHTML = span.innerHTML; 
```

参考：[https](https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML)
://developer.mozilla.org/en-US/docs/DOM/element.outerHTML PS：Firefox`outerHTML`从 v11 开始支持，但我们已经在使用 v15 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:48:33.863

在您的特定示例中，仅覆盖直接的*parentNode*可能是最佳实践。

```
var content  = document.getElementById('content'),
    span     = content.getElementsByTagName('span')[0],
    p        = content.getElementsByTagName('p')[0];

content.innerHTML = span.innerHTML; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:50:20.567

如果你可以使用 jQuery，试试这样的

```
var newContent = $("#content span").html();
$("#content").html(newContent); 
```

**编辑**

纯JS解决方案

```
var spans = document.getElementById("content").getElementsByClassName("note");
var out = "";

for (var i = spans.length - 1; i >= 0; i--) {
  out += spans[i].innerHTML;
}
document.getElementById("content").innerHTML = out; 
```

[jsFiddle 示例](http://jsfiddle.net/cvm7K/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T21:50:55.740

可以使用 Jquery 轻松完成：

```
$('span.note').each(function(){
    $(this).replaceWith($(this).html());
}); 
```

# scala - Scala-IDE 中工作表中的类导致错误

> ID：12736485
> 
> 赞同：4
> 
> 时间：2012-10-04T21:44:06.607
> 
> 标签：scala, scala-ide

只需通过在 Worksheet 中键入以下内容来实例化一个类（注意，Worksheet，使用 File > New > Scala Worksheet 创建，一个`.sc`文件，而不是普通`.scala`文件）并单击 Save 会导致虚假错误：

![在此处输入图像描述](../Images/4769f6aa083e4795941ba777f9b4f78e.png)

鼠标移到：

![在此处输入图像描述](../Images/6034982686ab139f422a245642849102.png)

“此行有多个标记 - 简单表达式的非法开头 - ';' 预期但找到标识符。”

我怀疑像这样简单的事情可能会通过测试，所以可能是配置问题。我已经在 2 台机器上尝试过并且得到了相同的行为：

1) 带有 Eclipse Helios 的 Windows 7

2) 带有 Eclipse Indigo 的 Windows XP - 从 Typesafe 网站干净下载

有任何想法吗？其他人在他们的设置中得到这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:08:08.820

在 Martin Odersky 在[Coursera](https://class.coursera.org/progfun-2012-001/class/index)上的讲座中，我注意到他在工作簿的主要对象之外声明了他的类。

我希望这有帮助

```
object Worksheet {
  new Foo
}

class Foo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T08:21:56.123

此错误已在 Scala 编译器中修复，但该修复不在里程碑版本附带的版本中。

如果您更新到每晚构建的 Scala IDE，您应该能够使用此 Code Pattern。

# c# - 发送带有附件 C# 的邮件

> ID：12736489
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:44:24.840
> 
> 标签：c#, asp.net, .net, web-farm

我正在编写一个应该发送电子邮件的应用程序，最多包含 3 个附件。

它只是一个非常简单的 Web 表单，带有 3 个 FileUpload 控件来浏览可能的附件。

该应用程序部署在 webfarm 中，当然也可以在服务器端运行。

我设法让它发送电子邮件，但附件有问题。现在，我正在使用此过程附加文件：

```
 if (fuAttatchment.HasFile)
                {                        
                    fuAttatchment.SaveAs(Server.MapPath(fuAttatchment.FileName));
                    MyMessage.Attachments.Add(new System.Net.Mail.Attachment(Server.MapPath(fuAttatchment.FileName))); 

                    filesize += fuAttatchment.PostedFile.ContentLength;
                } 
```

我提交后得到的错误如下：

> 发送失败：System.UnauthorizedAccessException：对路径“E:\Inetpub\IS\MSTicketRequest\wallpaper-3010.jpg”的访问被拒绝。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs , String msgPath, Boolean bFromProxy, Boolean useLongPath) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) at System.IO.FileStream ..ctor(String path, FileMode mode) at System.Web.HttpPostedFile.SaveAs(String filename) at System.Web.UI.WebControls.FileUpload.SaveAs(String filename) at MSTicketRequest.WebForm1。

我无法弄清楚为什么会发生这种情况，可能我错过了一些关于安全策略或类似的东西。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:21:05.803

而不是这个：

```
fuAttatchment.SaveAs(Server.MapPath(fuAttatchment.FileName));
                    MyMessage.Attachments.Add(new System.Net.Mail.Attachment(Server.MapPath(fuAttatchment.FileName))); 
```

做这个：

```
fuAttatchment.SaveAs("somewhere local"+fuAttatchment.FileName);
                    MyMessage.Attachments.Add(new System.Net.Mail.Attachment("somewhere local"+fuAttatchment.FileName)); 
```

您无需将附件保存在服务器上！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:46:28.663

看起来运行该站点的用户无权写入目标文件路径。检查目录的安全权限并确保 IIS 用户具有写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:57:52.507

取决于您的应用程序池的类型。但如果是网络服务，你必须添加网络服务。
ApplicationPoolIdentity 的 IIS_Users 但我不确定这个。 [http://www.windowsecurity.com/articles/understanding-windows-ntfs-permissions.html](http://www.windowsecurity.com/articles/understanding-windows-ntfs-permissions.html)

如果这没有帮助，您可以尝试删除只读选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T07:30:46.357

您通过您的 gmail 帐户发送电子邮件。这是如何做到的（我不知道它是否有帮助）。1.您需要在其中上传附件的文本框。2\. 按钮“浏览”和“OpenFileDialog1”。在“浏览”按钮中，您将其放入

```
private void btnBrowse_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            txt_attachment.Text = openFileDialog1.FileName;
        }
    } 
```

您需要在其中放置以下内容的“带附件发送”按钮：

```
MailMessage mail = new MailMessage(txt_gmail.Text, txt_to.Text, txt_subject.Text, txt_body.Text);
        mail.Attachments.Add(new Attachment(txt_attachment.Text));
        SmtpClient client = new SmtpClient(txt_server.Text);
        client.Port = 587;
        client.Credentials = new System.Net.NetworkCredential(txt_gmail.Text, txt_password.Text);
        client.EnableSsl = true;
        client.Send(mail);
        MessageBox.Show("Mail sent", "Succes", MessageBoxButtons.OK);
        foreach (Control control in this.Controls)
        {
            TextBox box = control as TextBox;
            if (box != null)
            {
                box.Text = "";
            }
        }
    } 
```

最后一件事（因为这样做会显示一些错误）您需要创建 Gmail.dll 文件。这是执行此操作的链接：[在这里您可以创建 Gmail.dll](http://www.youtube.com/watch?v=UV35xkJssmA)

我希望这有帮助。

# php - ZF2 - 如何在 Select 中执行聚合函数？

> ID：12736495
> 
> 赞同：1
> 
> 时间：2012-10-04T21:44:58.197
> 
> 标签：php, sql, zend-framework2

将我的一个应用程序从程序转换为 ZF2，并且正在跨 SQL 进行复制。我正在添加分页，所以需要使用`Zend\Db\Sql\Select`. 我有一个数据库，它命令用户的表现如何，需要使用聚合函数，但在文档或代码中看不到任何内容。

我有`SUM()`并且`COUNT()`我需要在我的查询中使用一长串用户（所以不能只为每一行单独做一个）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:10:06.120

找到了这个，它工作正常：`'total_stuff' => new Expression('SUM(table.stuff)')`

# android - 为什么在 API 15 上调用 AppWidgetProvider.onAppWidgetOptionsChanged？

> ID：12736497
> 
> 赞同：1
> 
> 时间：2012-10-04T21:45:00.833
> 
> 标签：android, samsung-mobile, android-appwidget

目睹 AppWidget 崩溃后，我在 logcat 中发现了这个错误：

> 10-04 12:46:17.315: I/dalvikvm(13791): 找不到方法 android.appwidget.AppWidgetProvider.onAppWidgetOptionsChanged，引用自方法 com.appkey.widget.MyAppWidgetProvider.onAppWidgetOptionsChanged

虽然我确实有一个`onAppWidgetOptionsChanged`方法，但我的代码没有调用它，而且我认为系统只会从 API 级别 16 或更高级别调用它（根据 SDK 文档）。此错误发生在运行 android 4.0.4 @ API 级别 15 的三星 Galaxy S2 Epic (SPH-D710) 上。

```
public class MyAppWidgetProvider extends AppWidgetProvider {
    @TargetApi(16)
    @Override
    public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions) {
        super.onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId, newOptions);
    }
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:23:27.643

在加载您的课程时，该日志行似乎只是来自 dalvik 的信息（注意“I”前缀）。这不是一个错误，也不应该是您崩溃的原因。

我相信如果您注释掉该方法，您的崩溃很可能仍然会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T22:45:32.373

这只是一个类加载错误。当 DalvikVM 加载你的类时，它没有找到对提到的方法的引用，所以它会发出警告。

# xcode4 - 在 Xcode 4 中使用外部构建系统 (Makefile) 之前执行脚本以初始化环境变量

> ID：12736501
> 
> 赞同：0
> 
> 时间：2012-10-04T21:45:23.267
> 
> 标签：xcode4

我正在使用 Xcode4 构建一个基于 Makefile 的项目。如何告诉 xcode 在运行 Makefile 之前运行一个脚本，该脚本为英特尔的 CC/fortran 编译器初始化环境变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:51:16.300

相反，我创建了一个调用 Intel 初始化脚本然后执行 /usr/bin/make 的 shell 脚本。

# php - 如何监控三个的更新值 我使用 codeigniter 并遇到以下问题。在控制器（results.php）中，我有这样的东西： if(isset($_POST['tournaments'])){ $tournament_id = $_POST['tournaments']; }else{ $tournament_id=1; } if( isset($_POST['categories'])){ $category_id = $_POST['categories']; }else{ $cate

> ID：12736508
> 
> 赞同：1
> 
> 时间：2012-10-04T21:45:53.627
> 
> 标签：php, codeigniter, jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:56:15.093

像这样的东西？

```
$("form select").change(function () {
    $.getJSON("results_view.php", $(this).parent().serialize(), function() {
        // update form from JSON data
    });
}); 
```

# batch-processing - 给定使用批处理（.bat）脚本的行号，如何删除文本文件的一行？

> ID：12736509
> 
> 赞同：1
> 
> 时间：2012-10-04T21:45:55.903
> 
> 标签：batch-processing, batch-file

我想编写一个批处理脚本，用户可以在其中输入行号，脚本将删除文本文件的该行。

例如：tmp.txt

```
1\. aaa
2\. bbb
3\. ccc
4\. ddd 
```

我希望当我执行我的脚本和用户输入 3 时，tmp.txt 是

```
1\. aaa
2\. bbb
4\. ddd 
```

我正在尝试这样的事情：

```
@ECHO OFF

SET /P LINENUMBER=Enter the Line No:

FOR /F "tokens=1* delims=[]" %%a IN ('FIND /n /v "" ^< tmp.txt') DO (   
    IF %%a equ %LINENUMBER% (
                  ????????????????????
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:12:21.107

您不能直接修改文件。您必须创建一个包含所需内容的新文件，然后用新文件替换原始文件。

您可以通过重定向输出和回显所需内容来创建新文件。我`ECHO(%%b`在 %%b 为空的情况下使用，因为该行是空白的。如果 b 为空，`ECHO %%b`将产生。`ECHO is off.`大多数人使用`ECHO.`，但在深奥的条件下可能会失败。`ECHO(`永远不会失败。

您使用 MOVE 将原始文件替换为新文件。

您可以通过在 FIND 之后使用 FINDSTR 过滤掉不需要的行来消除检查 FOR /F 循环中的数字的需要。

请注意，到目前为止，您的代码将删除每一行的所有前导`[`和`]`字符。因为线路过滤器是在 FOR 迭代之前应用的，所以您可以通过将 DELIMS 设置为 only 来稍微改善这种情况`]`。

```
@ECHO OFF
SET /P LINENUMBER=Enter the Line No:
>tmp.txt.new (
  FOR /F "tokens=1* delims=]" %%a IN (
    'FIND /n /v "" ^<tmp.txt^|FINDSTR /VLB "[%LINENUMBER%]"'
  ) DO ECHO(%%b
)
>nul MOVE /y tmp.txt.new tmp.txt 
```

如果您的任何原始行已经开始，`]`那么您可以使用 FINDSTR 而不是 FIND 来引入行号。这使用`nn:`格式而不是`[nn]`. `:`该解决方案将从您的生产线中去除领先优势。

```
@ECHO OFF
SET /P LINENUMBER=Enter the Line No:
>tmp.txt.new (
  FOR /F "tokens=1* delims=:" %%a IN (
    'FINDSTR /n "^" tmp.txt^|FINDSTR /VLB "%LINENUMBER%:"'
  ) DO ECHO(%%b
)
>nul MOVE /y tmp.txt.new tmp.txt 
```

如果您的文本文件包含以两者开头的行，`:`那么`]`您不能使用 FOR /F 来解析行号。相反，您使用搜索和替换。延迟扩展在循环中打开和关闭，以保护`!`文件中可能存在的任何内容。

```
@ECHO OFF
setlocal disableDelayedExpansion
SET /P LINENUMBER=Enter the Line No:
>tmp.txt.new (
  FOR /F "delims=" %%a IN (
    'FINDSTR /n "^" tmp.txt ^| FINDSTR /VLB "%LINENUMBER%:"'
  ) DO (
    set "ln=%%a"
    setlocal enableDelayedExpansion
    echo(!ln:*:=!
    endlocal
  )
)
>nul MOVE /y tmp.txt.new tmp.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T17:15:33.283

试试这个：

```
@echo off & setlocal 
set "InFile=Z:\Text.txt" 
set "OutFile=Z:\Erg.txt" 
set /p LineToDelete=

if exist "%OutFile%" del "%OutFile%" 
for /f "tokens=1* delims=:" %%i in ('findstr /n $ "%InFile%"^|findstr /b "%LineToDelete%:"') do findstr /v /b /c:"%%j" "%InFile%">>"%OutFile%" 
```

# iphone - iOS：图像的渐变透明度

> ID：12736512
> 
> 赞同：0
> 
> 时间：2012-10-04T21:46:07.717
> 
> 标签：iphone, ios, gradient, cgcontext

我试图弄清楚它是否可以在图形上下文中绘制如下图像： ![](../Images/fdb11f06029b536979e592daa9194a93.png)

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T21:13:51.717

这个答案似乎正是您所需要的：[如何在图像上实现 alpha 渐变？](https://stackoverflow.com/questions/5908731/how-to-implement-alpha-gradient-on-a-image?rq=1)

# asp.net - asp.net mvc3/4 request.form 从选择列表中返回选定的值和选定的文本

> ID：12736524
> 
> 赞同：0
> 
> 时间：2012-10-04T21:46:52.963
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我将如何进入我的控制器，Request.Form["StandID"] 的文本部分

```
<div class="editor-field">
<select id="StandID" name="StandID">
<option value=""/>
<option value="3">Mark</option>
<option value="5" Selected>Brian</option>
<option value="6">Ian</option>
<option value="7">Vin</option>
</select>
</div> 
```

所以在我的控制器中， Request.Form["StandID"] = 5

是否可以检索文本（我知道这没有作为表单的一部分发布 - 有没有办法做到这一点）？

所以我想返回“Brian”——以及 5 的 ID？

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:52:54.000

不会。HTML 只会将值发布到控制器。但是，您可以使您的值类似于`"5 - Brian"`，然后将您的文本设置为“Brian”。然后您必须解析该值以从中获取实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:02:07.930

作为替代方案，您可以使用隐藏的输入字段来存储您的文本值。缺点是您必须使用 javascript 将您的值放入此隐藏字段（在选定的更改或表单提交上），但优点是您将为值分隔字段，因此您不必在服务器端解析它并且您可以避免命名可能出现的问题。

# haskell - 将函数提升到 IO monad 以解析从文件读取的 json 字符串

> ID：12736533
> 
> 赞同：1
> 
> 时间：2012-10-04T21:47:29.803
> 
> 标签：haskell

我遇到的问题是`readFile`返回一个`IO String`但 parse 需要一个正则`String`（或在下面的示例中 a `ByteString`）。我虽然只是简单地使用`liftM`，但下面的示例仍然失败。问题是什么？

```
import Data.Aeson
import Data.Attoparsec
import Data.ByteString (ByteString, pack)
import Data.Maybe
import Network.HTTP
import Network.URI
import qualified Data.ByteString.Char8 as C
import Control.Monad

main = do
    myres  <-  liftM parse json (C.readFile "dummy.json")
    print myres 
```

错误：

```
Couldn't match expected type `t0 -> Parser a0'
            with actual type `Parser Value'
In the second argument of `liftM', namely `json'
In a stmt of a 'do' block:
  myres <- liftM parse json (C.readFile "dummy.json")
In the expression:
  do { myres <- liftM parse json (C.readFile "dummy.json");
       print myres } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T21:58:26.170

你错过了周围的括号`(parse json)`，所以`liftM`适用于`parse`

# google-apps-script - 找到一种方法来使用库版本？

> ID：12736537
> 
> 赞同：3
> 
> 时间：2012-10-04T21:47:57.367
> 
> 标签：google-apps-script

我正在通过库在多个电子表格上部署脚本。但您可能知道，脚本（目前）无法知道它是否运行最新版本。

我试图通过为我的代码创建自己的版本来解决这个问题。我有一个 Web 服务返回我的库代码的最新版本号，以便我可以比较它，但是 onOpen() 无法运行 fetchURL。我尝试打开一个可以保留信息的电子表格，但是 onOpen() 再次不允许您 openById ...

onOpen() 触发器具有安全限制，阻止我查阅可用于保持版本控制的外部数据源。

注意：我不想为 onOpen() 事件使用脚本触发器。复制电子表格时不复制脚本触发器。

因此，关于如何通过指向外部数据源（作为 url、其他电子表格 - 任何东西！）来检查 onOpen() 触发事件的库版本，我已经没有什么想法了。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:47:02.533

最简单的解决方案是在您的库中添加一个 getVersion() 方法，并在每次更新库时手动更新它。

已编辑：我看到您不仅想知道版本，还想知道这是否是最新版本。您可以将该信息存储在库中的 ScriptProperties 中，并具有如下功能：

```
function isLatestVersion() {
  return currentVersion == ScriptProperties.getProperty("latestVersion");
} 
```

（我假设您可以将 currentVersion 硬编码到代码中并在每次重新部署 webapp 时更改它。）脚本属性可以通过 File > Project Properties 菜单进行编辑，您可以在不重新部署脚本的情况下更改值，所以通过从该菜单更改 latestVersion，您将使旧版本在调用 isLatestVersion() 时突然开始响应“false”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:29:33.693

我知道的唯一解决方法，我确定我在这个论坛上看到过（如果我找到它，会链接线程），是为用户提供一些机制来手动运行一个脚本，让他们通过授权过程。这可能是工作簿开头的一张表，带有一个可按下的按钮和说明性文本。当脚本运行时，该“启动页”表可能会被脚本本身删除。

但结果是，您可能需要一个脚本（例如，菜单驱动的），而不是复制电子表格，该脚本将创建具有必要启动页面的电子表格副本。

不理想，但这是我唯一能想到的。

# html - 从另一个页面访问 div 选项卡

> ID：12736538
> 
> 赞同：1
> 
> 时间：2012-10-04T21:48:03.873
> 
> 标签：html, twitter-bootstrap

我正在使用来自 twitters bootstrap 的一些代码，一种导航栏选项卡。

这些选项卡似乎是使用 #tab 功能检索的。假设这个菜单在一个名为 index.php 的文件上

```
<div class="bs-docs-example">
    <div class="tabbable tabs-left">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
        <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
        <li><a href="#tab3" data-toggle="tab">Section 3</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="tab1">
          <p>I'm in Section A.</p>
        </div>
        <div class="tab-pane" id="tab2">
          <p>Howdy, I'm in Section B.</p>
        </div>
        <div class="tab-pane" id="tab3">
          <p>What up girl, this is Section C.</p>
        </div>
      </div>
    </div>
  </div> 
```

但是我怎么能从另一个页面比如 main.php 直接跳转到 tab2 呢？你明白我的意思吗？我在尝试：

```
<a href="index.php#tab2">link to tab2</a> 
```

或者

```
<a href="index.php#tab2" data-toggle="tab">link to tab2</a> 
```

但它不起作用......，不知道是否需要 data-toggle="tab" 以某种方式？

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:55:34.517

使用 jquery easytabs 插件很容易解决这个问题。阅读更多并下载插件： http: [//os.alfajango.com/easytabs/](http://os.alfajango.com/easytabs/)记得安装 jquery 和其他 Javascripts

HTML：

```
<head> <!-- other markup -->
   <script src="/javascripts/jquery.js" type="text/javascript"></script>
   <script src="/javascripts/jquery.hashchange.js" type="text/javascript"></script>
   <script src="/javascripts/jquery.easytabs.js" type="text/javascript"></script>
   <script type="text/javascript">
       $(function() {
             $('#tab-container').easytabs();
       });
   </script>
</head>
<body>

<div id="tab-container" class="tab-container">
<ul class='etabs'>
  <li class='tab'><a href="#tabs1-html">HTML Markup</a></li>
  <li class='tab'><a href="#tabs1-js">Required JS</a></li>
  <li class='tab'><a href="#tabs1-css">Example CSS</a></li>
</ul>
<div id="tabs1-html">
  <h2>HTML Markup for these tabs</h2>
  <!-- content -->
</div>
<div id="tabs1-js">
  <h2>JS for these tabs</h2>
  <!-- content -->
</div>
<div id="tabs1-css">
  <h2>CSS Styles for these tabs</h2>
  <!-- content -->
</div> 
```

CSS：

```
.etabs { margin: 0; padding: 0; }
.tab { display: inline-block; zoom:1; *display:inline; background: #eee; border: solid 1px #999; border-bottom: none; -moz-border-radius: 4px 4px 0 0; -webkit-border-radius: 4px 4px 0 0; }
.tab a { font-size: 14px; line-height: 2em; display: block; padding: 0 10px; outline: none; }
.tab a:hover { text-decoration: underline; }
.tab.active { background: #fff; padding-top: 6px; position: relative; top: 1px; border-color: #666; }
.tab a.active { font-weight: bold; }
.tab-container .panel-container { background: #fff; border: solid #666 1px; padding: 10px;    -moz-border-radius: 0 4px 4px 4px; -webkit-border-radius: 0 4px 4px 4px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:14:26.687

使用 Bootstrap 和包含的 jQuery UI，导航哈希的实现非常简单。使用这样的 Javascript

```
$(function () {
  var gotoTab = $('[href=' + location.hash + ']');
  gotoTab && gotoTab.tab('show');
}); 
```

但是，这不适用于历史记录或后退按钮。所以这是使用 javascript 进行标签导航的缺点。不知道有没有其他解决办法？

# c++ - 在 Visual Studios 2010 的 External Dependencies 文件夹中搜索文本/代码

> ID：12736542
> 
> 赞同：0
> 
> 时间：2012-10-04T21:48:19.770
> 
> 标签：c++, visual-studio-2010

我的一个 Visual Studios 项目中的某个包含文件有问题，我需要更改该包含文件中的一些代码行。我希望能够在 External Dependencies 文件夹中搜索我需要更改的代码行。他们有办法做到这一点吗？

注意：包含一个更大的构建球的一部分的文件。我可以搜索构建球，但我需要一些误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:44:40.537

“在文件中查找”对话框（编辑 > 查找和替换 > 在文件中查找）提供了两种搜索任意文件夹的方法。首先是在“查找范围”编辑框中输入文件夹，然后一次搜索一个。您也可以在一行中键入所有文件夹，用分号 (;) 分隔。

第二种方法是定义一组文件夹，然后搜索所有文件夹。如果您要更频繁地进行此搜索，这将非常方便。要定义文件夹集，请单击“查看”编辑框旁边标有“...”的按钮。在新窗口中手动查找所有文件夹，将它们存储在列表框“选定文件夹”中，在“文件夹集”编辑框中为列表输入一些名称，然后单击分配。之后，该列表将与“在文件中查找”对话框中的其他预定义列表一起可用。

但在执行任何此操作之前，请考虑“查找范围”下拉列表中的选项、“整个解决方案”和“Visual C++ 包含目录”。也许他们已经做了你需要的。此外，请记住所有可用的搜索选项（主要是“包括子文件夹”）。

# sql - 查询以生成调查摘要 (PIVOT)

> ID：12736551
> 
> 赞同：0
> 
> 时间：2012-10-04T21:49:04.820
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

假设我有两张桌子：

```
Question (Id, Text)
Answer (Value, QuestionId, Guid) 
```

列`Guid`分组来自同一个人的答案。

我需要一个查询来产生这样的结果：

```
'Question 1' | 'Question 2'
4            | 3
1            | NULL
NULL         | 5
2            | 6
9            | NULL 
```

问题文本转换为列标题，答案值在行中。答案按 分组`Guid`，因此一排有一个人的答案。如果一个人没有回答特定问题，则返回 NULL。

问题的数量可能会有所不同。

用于产生样本结果的数据：

```
 Question
 Id   | Text
 1    | Question 1
 2    | Question 2

 Answer
 Value | QuestionId | Guid
 4     | 1          | AAA
 3     | 2          | AAA
 1     | 1          | BBB
 5     | 2          | CCC
 2     | 1          | DDD
 6     | 2          | DDD
 9     | 1          | EEE 
```

你能帮我查询一下以产生结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:55:34.060

由于您有未知数量的问题，因此您需要`PIVOT`对此使用动态 SQL：

```
DECLARE @colsFinal AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsFinal = STUFF((SELECT distinct ',' 
                      + QUOTENAME(Id) 
                           + ' as Question_'+ cast(Id as varchar(10))
                    from question
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivot = STUFF((SELECT distinct ',' 
                      + QUOTENAME(Id) 
                    from question
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @colsFinal + ' from 
             (
                select questionid, value, guid
                from question q
                left join value v
                  on q.id = v.questionid
            ) x
            pivot 
            (
                min(value)
                for questionid in (' + @colsPivot + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/cf1c3/2)

如果您有已知数量的列，那么您可以硬编码`PIVOT`（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!3/cf1c3/6)）的值：

```
select [1] as Question1, [2] as Question2
from 
(
  select questionid, value, guid
  from question q
  left join value v
    on q.id = v.questionid
) x
pivot
(
  max(value)
  for questionid in ([1], [2])
) p 
```

或者你可以使用一个聚合函数`CASE`（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!3/cf1c3/9)）：

```
select max(case when q.id = 1 then v.value end) Question1,
  max(case when q.id = 2 then v.value end) Question2
from question q
left join value v
  on q.id = v.questionid
group by guid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:53:53.880

如果您不想对问题编号进行硬编码，那么您只能使用动态 SQL 来构建问题列表。

[SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

对于具体问题，如果您知道他们的文本，请参阅下面的示例

```
create table Question(id int, text varchar(100));
insert Question select 1, 'Question 1'
union all select 2, 'The 2nd';
create table Answer(
  value int,
  questionid int,
  guid varchar(10));
insert Answer select
 4     , 1          , 'AAA' union all select
 3     , 2          , 'AAA' union all select
 1     , 1          , 'BBB' union all select
 5     , 2          , 'CCC' union all select
 2     , 1          , 'DDD' union all select
 6     , 2          , 'DDD' union all select
 9     , 1          , 'EEE';
GO
select guid, [Question 1], [The 2nd]
from (
    select guid, text, value
    from Answer A
    join Question Q on A.questionid=q.id) p
pivot (max(value) for text in ([Question 1], [The 2nd])) v 
```

# php - 有人可以解释 PHP 中这两种参考用法之间的区别吗？

> ID：12736552
> 
> 赞同：6
> 
> 时间：2012-10-04T21:49:04.657
> 
> 标签：php, arrays, reference, tree

下面的代码说明了 PHP 引用的奇怪行为：

```
<?php

function this_works()
{
    $root = array('name'=>'root', 'children'=>array());
    $level_1 = array('name'=>'level_1', 'children'=>array());
    $item1 = array('name'=>'level_2_1', 'children'=>array());
    $item2 = array('name'=>'level_2_2', 'children'=>array());

    $croot = &$root;

    $croot['children'][] = &$level_1;

    $croot = &$level_1;

    $croot['children'][] = &$item1;
    $croot['children'][] = &$item2;

    $croot = &$root;

    print_r($croot);
}    

function this_fails()
{    
    $root = array('name'=>'root', 'children'=>array());
    $level_1 = array('name'=>'level_1', 'children'=>array());
    $item1 = array('name'=>'level_2_1', 'children'=>array());
    $item2 = array('name'=>'level_2_2', 'children'=>array());
    $croot = &$root;

    $stack = array();

    $croot['children'][] = &$level_1;
    $crootref = &$croot;

    array_push($stack, $crootref);

    $croot = &$level_1;

    $croot['children'][] = &$item1;
    $croot['children'][] = &$item2;

    # this works, assignment below - doesn't... WHY?
    #$x = array_pop($stack);
    #var_dump($x);

    $croot = array_pop($stack);

    print_r($croot);
}    

this_works();
echo "------------------\n";
this_fails();

?> 
```

第一个函数提供了预期的结果，而第二个函数失败并声称递归循环：

```
Array
(
    [name] => root
    [children] => Array
        (
            [0] => Array
                (
                    [name] => level_1
                    [children] => Array
                        (
                            [0] => Array
                                (
                                    [name] => level_2_1
                                    [children] => Array
                                    (
                                    )

                                )

                            [1] => Array
                                (
                                    [name] => level_2_2
                                    [children] => Array
                                        (
                                        )

                                )

                           )

                )

        )

)
------------------
Array
(
    [name] => root
    [children] => Array
        (
            [0] => Array
                (
                    [name] => root
                    [children] => Array
 *RECURSION*
                )

    )

) 
```

奇怪的是，如果在第二个函数中，中间变量将用于从堆栈中获取值，结果又可以了。我不明白发生了什么事。由于一个assinment，我如何多次获得根元素作为其自身的子元素？

最初，我需要从 XML 构建树（使用 sax 解析器）并打算让“当前根”指向当前级别的树节点，并将其推入/弹出堆栈并向其中添加子元素，但是，令人惊讶的是，由于上述两个函数显示的问题，我未能实施此方案。

那么，这种方法有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:52:33.357

这是因为 PHP 在数组中引用的奇怪方式。使用右侧的引用进行普通（非引用）赋值通常不会将左侧变为引用，但数组内的引用**会保留**在赋值中，即使没有引用运算符也是如此。

我在下面评论了您的代码以帮助解释正在发生的事情，我希望我已经正确解释了这一点，现在是凌晨 1 点，我累了。

```
$root = array('name'=>'root', 'children'=>array());
$level_1 = array('name'=>'level_1', 'children'=>array());
// $croot and $root now point to the same variable
$croot = &$root;

$stack = array();

$croot['children'][] = &$level_1;
// $crootref, $croot and $root all now point to the same variable
$crootref = &$croot;
// $stack[0], $crootref, $croot and $root all now point to the same variable.
// $stack[0]['children'][0], $level_1, $croot['children'][0] point to the same variable
array_push($stack, $crootref);
// $croot, $level_1 and $stack[0]['children'][0] now point to the same variable
// Infinite loop is caused as $stack[0]['children'][0] is now an alias for $croot
// which contains $croot['children'][0] which is an alias for $stack[0]['children'][0]
// which is an alias for $croot which contains....
$croot = &$level_1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:53:11.243

只是一种解决方法，使用 unset() 而不是 array_pop()。并且因为当您使用 array_pop() 时输入数组的数组指针被重置，所以我使用 reset() 来模拟相同的结果，在这里您可以：

```
<?php

function this_fails_fixed()
{    
    $root = array('name'=>'root', 'children'=>array());
    $level_1 = array('name'=>'level_1', 'children'=>array());
    $item1 = array('name'=>'level_2_1', 'children'=>array());
    $item2 = array('name'=>'level_2_2', 'children'=>array());
    $croot = &$root;

    $stack = array();

    $croot['children'][] = &$level_1;
    $crootref = &$croot;

    array_push($stack, $crootref);

    $croot = &$level_1;

    $croot['children'][] = &$item1;
    $croot['children'][] = &$item2;

    unset($croot[count($croot)-1]);
        reset($croot);

    print_r($croot);
}    

this_fails_fixed();

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:54:46.010

一张图片价值1000字。花了一些时间来了解到底发生了什么。

我必须使用 Xdebug 正确转储内部数据并查看引用计数和写入时复制的效果。

第一篇文章中代码的问题是分配

$croot = array_pop($stack);

当 croot 为 'level_1' 时，通过复制完成，即 croot 的元素（与 level_1 相同）由堆栈中的数据填充，并且在此操作后 croot 与原始 root 不同。

图像将更好地解释。

![内存中的 PHP 变量](../Images/ee8181f35514cf52c6ce5e06bf1fc42c.png)

# java - Spring MVC - 插入语句是否正确编写？

> ID：12736553
> 
> 赞同：0
> 
> 时间：2012-10-04T21:49:07.870
> 
> 标签：java, mysql, spring

我正在尝试将一条记录插入我正在使用 Spring 3.0 的数据库中。我没有使用 Hibernate 或任何持久性框架。想知道 DAO 是否正确编写或有什么不同的编写方式：

**官员道**

```
public void saveOfficer(Officers officer) {
        logger.info("In saveOfficer");
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        try{

            logger.info("Values are "+officer.getUserName()+" "+officer.getPassword()+" "+officer.getfName()+" "+officer.getoName()+" "+officer.getDivisionNo()+" "+officer.getPositionId()+" "+officer.getEmailAdd()+" "+dateFormat.format(officer.getStartDate())+" "+dateFormat.format(officer.getEndDate())+" "+ officer.getGenderId()+" "+officer.getPhoneNo()+" "+dateFormat.format(officer.getDob()));

            String sql= "INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, " +
                        "divisionNo, poisitionId, emailAdd, startDate, endDate, genderId, " +
                        "phoneNo, dob) VALUES (:userName,:password, :fName, :lName, :oName, :divisionNo, "+
                        ":poisitionId, :emailAdd, :startDate, :endDate, :genderId, " +
                        ":phoneNo, :dob)";

            logger.debug("Executing saveOfficer String " + sql);
            int count = getJdbcTemplate().update(sql,new MapSqlParameterSource()
                    .addValue("userName",officer.getUserName())
                    .addValue("password", officer.getPassword())
                    .addValue("fName", officer.getfName())
                    .addValue("lName", officer.getlName())
                    .addValue("oName", officer.getoName())
                    .addValue("divisionNo", officer.getDivisionNo())
                    .addValue("positionId",officer.getPositionId())
                    .addValue("emailAdd", officer.getEmailAdd())
                    .addValue("startDate", dateFormat.format(officer.getStartDate()))
                    .addValue("endDate", dateFormat.format(officer.getEndDate()))
                    .addValue("genderId", officer.getGenderId())
                    .addValue("phoneNo",officer.getPhoneNo())
                    .addValue("dob", dateFormat.format(officer.getDob())));

            System.out.println(sql);
            logger.info(count +" Rows affected in tblOfficers");

        }catch(Exception e){

            logger.error("Could not save officer ", e);
        }

    }

public static class OfficerMapper implements ParameterizedRowMapper<Officers>{

         public Officers mapRow(ResultSet rs, int rowNum) throws SQLException {

                Officers officer = new Officers();
                officer.setUserName(rs.getString("userName"));
                officer.setDivisionNo(rs.getInt("divisionNo"));
                officer.setDob(rs.getDate("dob"));
                officer.setEmailAdd(rs.getString("emailAdd"));
                officer.setEndDate(rs.getDate("endDate"));
                officer.setfName(rs.getString("fName"));
                officer.setGenderId(rs.getString("genderId"));
                officer.setlName(rs.getString("lName"));
                officer.setoName(rs.getString("oName"));
                officer.setPassword(rs.getString("password"));
                officer.setPhoneNo(rs.getString("phoneNo"));
                officer.setPositionId(rs.getInt("positionId"));
                officer.setStartDate(rs.getDate("startDate"));
                return officer;
            }       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:40:42.697

我重新编写了代码，这对我有用：

```
public void saveOfficer(Officers officer) {
        logger.info("In saveOfficer");
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        try{

            logger.info("Values are "+officer.getUserName()+" "+StringSecurity.EncryptString(officer.getPassword())+" "+officer.getfName()+" "+officer.getoName()+" "+officer.getDivisionNo()+" "+officer.getPositionId()+" "+officer.getEmailAdd()+" "+dateFormat.format(officer.getStartDate())+" "+dateFormat.format(officer.getEndDate())+" "+ officer.getGenderId()+" "+officer.getPhoneNo()+" "+dateFormat.format(officer.getDob()));

            int count = getJdbcTemplate().update("INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, divisionNo, positionId, emailAdd, startDate, endDate, genderId,phoneNo, dob,badgeNo) "+
                                                "VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)"
                                                , new Object[]{officer.getUserName(),StringSecurity.EncryptString(officer.getPassword()),officer.getfName(),
                                                 officer.getlName(),officer.getoName(),officer.getDivisionNo(),officer.getPositionId(),
                                                 officer.getEmailAdd(),officer.getStartDate(),officer.getEndDate(),officer.getGenderId(),
                                                 officer.getPhoneNo(),officer.getDob(),officer.getBadgeNo()});

        logger.info(count +" Rows affected in tblOfficers");

        }catch(Exception e){

            logger.error("Could not save officer ", e);
        }       
    } 
```

# python - django视图中的无限循环

> ID：12736554
> 
> 赞同：0
> 
> 时间：2012-10-04T21:49:10.420
> 
> 标签：python, django

我一直在试图弄清楚为什么我不返回 PrivateMessages 列表。有时另一双眼睛可以立即发现它，所以我在这里发布这个，希望有人发现错误。

这是一个获取 20 条或更少的私人消息并删除同一用户的重复消息的函数，即每个用户只有 1 条消息进入返回的一批下午。

它还排除了静音列表中的用户。这些一直运行良好，所以我认为这与 Silenced 位无关。

在调用 remove_duplicate_users 后，我得到最后一个对象的 id 以在下一个查询中使用它。

我冲洗并重复，直到我在列表中准备好返回 20 个对象或查询不返回任何内容。

```
def get_private_messages(request):
    ss = Silenced.objects.filter(user=request.user)
    last_pm_id = None
    n = 20
    bl = []
    while True:
        if last_pm_id:
            pmr = PrivateMessage.objects.filter(user=request.user,hidden=False,id__lt=last_pm_id).exclude(sender__in=[s.brat for s in ss]).order_by('-id')[:n]
        else:   
            pmr = PrivateMessage.objects.filter(user=request.user,hidden=False).exclude(sender__in=[s.brat for s in ss]).order_by('-id')[:n]
        l = list(pmr)
        bl = bl + l
        bl = remove_duplicate_senders(bl)
        n = 20 - len(bl)
        last_pm_id = bl[-1].id
        if len(bl) >= 20 or not pmr:
            break

    return HttpResponse(bl) 
```

这是删除重复用户消息的功能。对于名为 pin 或 note 的用户，如果 pm.info1 与仅在前 10 点具有的欢迎匹配，则它会例外。

```
def remove_duplicate_senders(pmr):
    l = []
    a = False
    for p in pmr:
        a = True
        if p.sender.username in ['pin','note'] or p.info1=='welcome':
            l.append(p)
            continue
        for px in l:
            if p.sender.username == px.sender.username:
                a = False
                break
        if a:
            l.append(p)
    return l 
```

我正在测试的用户有超过 60 pm，但是当我尝试检索前 20 pm 时，我得到了一个似乎是无限循环的东西。它适用于其他用户，但在第一个用户中订购 pm 的方式导致错误。

感谢您对此的任何见解，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:25:50.140

我认为您的休息条件无效：

```
if len(bl) >= 20 or not pmr:
    # Stop if I have more than 20 messages? Shouldn't I continue filtering?
    break 
```

应该：

```
if n >= 0:
    # Stop only if I have 20 or less [n = 20 - len(bl)], continue otherwise
    break 
```

我可能误解了一些东西，但是你的 while 循环的最后一部分是有副作用的。请考虑重写代码以使其更易读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:29:39.950

原来是同一用户的 pm 太多连续出现的情况，所以当它尝试获取 n 条私信时，它从未达到 20。我添加了一个函数来创建所有用户的列表bl 并在查询中排除它们。感谢您的回复。

# rdf - Jena、RDF、Data Cube 词汇

> ID：12736555
> 
> 赞同：0
> 
> 时间：2012-10-04T21:49:11.550
> 
> 标签：rdf, jena

我知道我做错了什么，但我不知道是什么...我正在尝试使用 Data Cube 词汇生成 RDF 文件。

问题是，输出应该是这样的：

```
<qb:DataSet rdf:about="about...">
<rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string">label.</rdfs:label>
<dcterms:subject rdf:resource="http://purl.org/linked-data/sdmx/2009/subject#2.2"/> 
```

...

但是，我得到的是：

```
<qb:DataSet rdf:about="about...">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string">.</rdfs:label>
    <dcterms:subject>
         <rdf:Thing rdf:about="http://purl.org/linked-data/sdmx/2009/subject#2.2"/>
    </dcterms:subject> 
```

我可以提供代码示例，但这可能就足够了……问题不应该那么难。我需要具有另一个资源的资源...

最好的，斯雷科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T07:51:19.223

RDF 的两种形式基本上是等价的。第二种形式包含一些附加信息，即额外的三元组：

```
<http://purl.org/linked-data/sdmx/2009/subject#2.2> rdf:type rdf:Thing . 
```

这不会有什么坏处，尽管`Thing`它不是 RDF 命名空间中的标准术语——您可能的意思是`owl:Thing`. RDF 的一般经验法则是不必担心输出的确切句法形式，因为给定的 RDF 模型可能有许多不同的序列化，它们都解析为完全相同的三元组集，因此在语义上具有相同的含义。对于 XML 序列化尤其如此。除非您出于某种原因确实需要 XML（例如使用工具链的另一部分进行处理），否则我建议您使用 Turtle 输出序列化。它更加紧凑和人类可读。

如果您想要关于您正在生成的模型的更具体的建议，如果您发布代码会有所帮助。

顺便说一句，如果您**确实**需要 XML 以便可以使用其他 XML 工具对其进行处理，那么您可能希望自己生成输出，而不是依赖`Model.write()`. 这是因为模型内容的微小变化可能会导致由`write`. 这会使编写 XSLT 样式表等变得很痛苦。最好生成自己的序列化，因为这样您就可以使用您对特定域模型的了解来更好地控制输出。

# jquery - 如何让“查看更多”div 标签链接到不同的链接一个 Jquery 调用菜单链接

> ID：12736562
> 
> 赞同：0
> 
> 时间：2012-10-04T21:49:46.793
> 
> 标签：jquery, html, css

[http://jsfiddle.net/xDaL8/6/](http://jsfiddle.net/xDaL8/6/)是它举行的地方。我有四个 div，右边的一个位置是菜单链接，左边的 3 个 div 按从上到下的顺序是图像、内容和查看更多。“查看更多”需要对悬停在右侧链接上的任何一个具有相同的链接，因为一旦点离开链接，左侧内容就会保持活动状态，因此该特定链接的更多视图需要具有与该特定链接相同的链接地址链接在右边。希望那不是那么令人困惑。

`$(document).ready(function() {

```
 var defaultText  = '.description';
    $("#MenuBar1 li").mouseover(function() {
        $("#back").attr("src", $(this).data("img"));
        defaultText = $(".description").html();
        $(".description").html($(this).data("description"));
    }).mouseout(function() {
        $("#back").attr("src", $("#back").data("original"));
        $(".description").html(defaultText);
});​   <div>
<div style="width: 377px; position:relative; left: 395px;">
    <ul id="MenuBar1" class="MenuBarHorizontal">
        <div style="height:20px;">
            <li id="button1" data-img="http://http://demo/images/anne.jpg" width="357" height="241" border="0" data-description="Demo Images Description">
                <a href="#">Anywhere</a>
            </li>
        </div>
        <div style="height:20px;">
            <li id="button2" data-img="http://demo/images/Banner.jpg"  data-description="Banner Description" >
                <a href="#">ware</a>
            </li>
        </div>
        <div style="height:20px;">
            <li id="button3" data-img="http://demo/images/Banner.jpg"  data-description="Demand Description" >
                <a href="#">Demand</a>
            </li>
        </div>
        <div style="height:20px;">
            <li id="button4" data-img="http:http://demo/images/Bans.jpg"  data-description="CMO Description" >
                <a href="#">CM</a>
            </li>
        </div>
        <div style="height:20px;">
            <li id="button5" data-img="http://demo/images/eat.jpg"  data-description="Key Description" >
                <a href="#">Key</a>
            </li>
        </div>

    </ul>
</div>
<div style="width: 357px; position: relative; top: -380px;" id="content"> 
    <img id="back"src="http://demo/images/Banner.jpg"data-original="http://demo/images/Banner.jpg" alt="e.s.t" /> 
</div> 
```

将每次悬停的文本内容放在这里 ​`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:58:40.983

查看[更新的小提琴](http://jsfiddle.net/xDaL8/7/)。

假设我理解您想要正确执行的操作，这里是更新后的代码：

**更新的 HTML：**

```
<div>
  <div style="width: 377px; position:relative; left: 395px;">
    <ul id="MenuBar1" class="MenuBarHorizontal">
      <div style="height:20px;">
        <li id="button1" data-img="http://http://demo/images/anne.jpg" width="357" height="241" border="0" data-description="Demo Images Description" data-link="http://www.google.com">
          <a href="#">Anywhere</a>
        </li>
      </div>
      <div style="height:20px;">
        <li id="button2" data-img="http://demo/images/Banner.jpg"  data-description="Banner Description" data-link="http://www.yahoo.com">
          <a href="#">ware</a>
        </li>
      </div>
      <div style="height:20px;">
        <li id="button5" data-img="http://demo/images/eat.jpg"  data-description="Key Description" data-link="http://www.bing.com">
          <a href="#">Key</a>
        </li>
      </div>
    </ul>
  </div>
  <div style="width: 357px; position: relative; top: -380px;" id="content"> 
    <img id="back"src="http://demo/images/Banner.jpg"data-original="http://demo/images/Banner.jpg" alt="e.s.t" /> 
  </div>
  <div class="description" id="Text">put text content here for each hover</div>  
  <div> 
    <a href="#" id="view_more_link" style="color: #000">View More&gt;&gt;</a> </div>
  </div>​
</div> 
```

**更新的javascript：**

```
$(document).ready(function() {

    var defaultText = $(".description").html();
    $("#MenuBar1 li").mouseover(function() {
        $("#back").attr("src", $(this).data("img"));
        defaultText = $(".description").html();
        $(".description").html($(this).data("description"));
        $('#view_more_link').prop('href', $(this).data("link"));
    }).mouseout(function() {
        $("#back").attr("src", $("#back").data("original"));
        $(".description").html(defaultText);
    });

});
​ 
```

您将描述放在列表项的数据属性中是正确的。我只是通过向`data-link`列表项添加一个属性然后将该属性绑定到“查看更多”链接的`href`属性来做同样的事情。

# node.js - 在 localhost 上退出客户端，而不断开与 localhost 上服务器的 TCP 连接（没有 FIN 数据包）

> ID：12736564
> 
> 赞同：2
> 
> 时间：2012-10-04T21:49:49.920
> 
> 标签：node.js, telnet

# 原始问题

我正在使用 telnet 连接到 node.js TCP 服务器（在 localhost 上），并且我正在尝试探索保持活动状态的探针。

作为第一个测试，我想用 telnet 连接到服务器并以不发送 FIN 数据包的方式终止 telnet 会话。（让服务器认为 TCP 套接字仍然“健康”。）不幸的是，我似乎找不到一个聪明的方法来测试它。

*   当我从 telnet 提示符退出 telnet 时，套接字的`end`事件在节点中触发。它显然得到了一个 FIN 数据包。
*   当我`kill`telnet 的进程时，它也会在进程终止之前用 FIN 数据包干净地退出连接。

您是否知道在不发送 FIN 数据包的情况下退出 telnet 的方法（最好不涉及断开/产生物理网络故障的网络电缆。）

# 改进的问题

我想仅使用 localhost / loopback 来模拟网络故障（实际上没有断开任何接口/网络电缆）。我想在本地主机上打开客户端和服务器之间的 TCP 连接。然后我希望客户端“死”而不让服务器知道它已经消失了。（即不发送 FIN 数据包。）这可能发生在真实网络中，例如，如果路由器出现故障。

感谢下面的评论，我了解到当进程死亡（或被强制终止）时，内核将收集进程拥有的任何打开的端口/套接字，就像我`telnet`上面的一样，并通过发送 FIN 来关闭它们包。所以我需要欺骗内核不要关闭现有的连接。

那么我怎样才能创建一个客户端进程，让它保持活动状态，但让它表现得像一个完全死掉的 TCP 连接呢？

## 剧透

*   （下面的答案1：使用原始套接字（scapy），让它忽略初始连接后服务器发送的任何数据包和一些测试数据。（例如，在一定时间后。）
*   （答案2，同事的想法：配置`iptables`切断客户端和服务器之间的流量。实际`iptables`规则在下面的评论中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:08:26.790

你必须杀死客户端进程吗？如果是这样，只需使用 netcat 并让进程在后台运行。在 bash 中：

```
for i in $(seq 5) do nc localhost 5001 &; sleep 1; done 
```

这将创建 5 个 TCP 客户端，SYN 间隔为 1 秒。如果您需要与其中一个会话进行交互，您可以使用

```
fg $PID 
```

将其中一个 netcat 返回到 shell 前台。

另一种选择是 iptables 规则：

```
iptables -A OUTPUT -p tcp --tcp-flags FIN -j DROP 
```

另一种选择是使用带有原始套接字的低级网络工具，例如 Scapy。这是[Scapy 的 Python 文档](http://www.secdev.org/projects/scapy/doc/usage.html)。您将执行类似于 TCP SYN 扫描的操作，但您需要确认服务器提供给您的 SYN-ACK。这将使服务器套接字处于“已连接”状态，您可以继续执行其他操作。服务器可能偶尔会确认您，但您的测试程序不会在意。它只会发送 SYN 并响应 SYN-ACK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:54:03.607

您需要断开机器与网络的连接。“断开”进程将始终导致操作系统/机器正确关闭套接字。

无需物理拔出电缆即可断开机器的最简单方法是更改​​机器的 IP 地址。

# html - HTML5 Canvas 未清除

> ID：12736565
> 
> 赞同：4
> 
> 时间：2012-10-04T21:49:51.607
> 
> 标签：html, canvas

我正在使用所有可能的方法来清除画布，但没有运气。当我在画布上单击返回时，所有以前的图纸都会重新出现。

这是代码。

```
function clearCanvas() {

    //clickX = [];
    //clickY = [];
    //clickDrag = [];
    //context.clearRect(0, 0, canvas.width, canvas.height);

    //curColor = colorBlack;
    //redraw();

    //clickX = new Array();
    //clickY = new Array();
    //clickDrag = new Array();

    context.fillStyle = '#faebd7'; 
    context.fillRect(0, 0, canvas.width, canvas.height); 
    canvas.width = canvas.width; 
    //context.beginPath();

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:03:54.410

在我看来，您正在使用数组来存储绘图信息。我看到您已尝试清除它们，但据我所知，最好的清除方法是将长度设置为零。试试这个：

```
function clearCanvas() {
clickX.length = 0;
clickY.length = 0;
clickDrag.length = 0;
context.clearRect(0, 0, canvas.width, canvas.height);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:18:21.393

如果它没有清除（并且您没有错误），那么要么

1.  `clearCanvas()`未输入您的方法，或
2.  `clearCanvas()`通话后，您正在画布上重绘。

抱歉，这是我得到的可用信息中最好的：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T07:32:46.640

你说“只要我点击画布”。这是否意味着在您单击之前，画布最初会被清除？然后这对我说，您有一个事件处理程序，它正在重绘所有内容。

此外，验证您的上下文是否仍指向正确的画布。一些画布变通方法需要创建一个临时画布。如果您这样做了，那么您可能正在清除错误的上下文。否则我看不出为什么 context.clearRect 不能像你所拥有的那样工作。

# objective-c - 如何在 ViewController 中的 UIWebView 之上处理 SwipeGestures？

> ID：12736566
> 
> 赞同：1
> 
> 时间：2012-10-04T21:49:53.703
> 
> 标签：objective-c, ios, uiswipegesturerecognizer

我正在深入研究 iOS 开发，为此我正在开发一个显示博客文章的简单应用程序。

我的 DetailViewController 中有以下设置：

![我的 DetailViewController](../Images/c69389f8e20a446d23a40f40a9af5920.png)

我想要实现的是，当用户在屏幕上向左或向右滑动时，我会更改 webView 的内容。

然而，滑动手势似乎被 UIWebView 吞噬了，所以我想我可以在顶部制作一个透明的 UIView（“Posts Detail Touch Interceptor View”）并让它处理滑动手势并将它们转发到 DetailViewController。

这有效，DetailViewController 中的滑动处理程序被调用，但我不能再在 webView 中滚动或按下任何按钮。我假设，因为透明 UIView 在到达 UIWebView 之前会消耗所有事件。

使透明视图下方的所有控件正常响应事件，而滑动手势转发到 DetailViewController 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:49:12.950

您仍然可以将滑动识别器添加到 UIWebView 并在您的手势识别器委托中实现此方法：

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

或者，您可以查看此 SO 帖子以在两个视图中处理事件：

[由多个视图处理的触摸事件](https://stackoverflow.com/questions/8370610/touch-event-handled-by-multiple-views)

我建议首先尝试在 UIWebView 中使用您自己的手势识别器。我之前成功地做到了这一点。

# sml - 更好地理解错误

> ID：12736567
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:50:00.443
> 
> 标签：sml, smlnj

我是 SML 的初学者。这很容易，但花了几个小时，但我无法解决。

我必须获取一个字符串列表并反转每个字符串以及列表。并且在不定义 main 之外的多个函数的情况下做所有事情。例如 ["stack","overflow","nice"] 会给出 ["ecin","wolfrevo","kcats"]

```
fun oppositelist(l)=foldl (op::) nil (map ((fn(x)=>(implode o rev o explode)(x)), l)); 
```

错误信息是：

```
Error: operator and operand don't agree [tycon mismatch]
  operator domain: 'Z -> 'Y
  operand:         (string -> string) * 'X
  in expression:
    map ((fn x => <exp> <exp>),l) 
```

如果方法错误，不要解决所有问题。提示一下。它是一个家庭作业问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:08:25.687

SML 函数`map`是[curried](http://en.wikipedia.org/wiki/Currying)。`f`要在列表的每个元素上映射一个函数`l`，您必须编写`map f l`. 你写的是`map (f,l)`，这意味着“将函数映射到`(f,l)`......稍后确定的东西”。编译器在抱怨你，因为`(f,l)`它*不是*一个函数（`'Z -> 'Y`）；它是一个由函数和列表 ( `(string -> string) * 'X`) 组成的元组。

我没有仔细研究您的解决方案，但是如果您对此答案发表评论并要求我这样做，我可能会这样做。:)

**编辑：**哦，`(fn(x)=>(implode o rev o explode)(x))`这只是一种冗长的写作方式，就像`(implode o rev o explode)`写作`(fn(x)=>f(x))`是一种冗长的写作方式一样`f`。

# django - 如何用 postgres 9.1 重新实现 django 的 BCryptPasswordHasher

> ID：12736576
> 
> 赞同：1
> 
> 时间：2012-10-04T21:50:27.277
> 
> 标签：django, postgresql-9.1, bcrypt

我有一个 django 网站和应用程序服务器都使用的 postgres 9.1 数据库。

目前，我在两个系统中都使用旧的 SHA1 身份验证，但将升级到 bcrypt。我有这个：

```
CREATE OR REPLACE FUNCTION random_string(length INTEGER, OUT RETURNS TEXT) 
AS $$
BEGIN
  IF length < 0 THEN
    raise exception 'Given length cannot be less than 0';
  END IF;

  RETURNS = libs.gen_salt('bf', length);
END;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION encryp_TEXT(_TEXT TEXT, OUT RETURNS TEXT)
AS $$
DECLARE
    hash TEXT := '';
    salt TEXT := '';
BEGIN
    salt := random_string(12);
    hash := libs.crypt(_TEXT,salt);

    RETURNS =  'bcrypt$' || salt || '$' || hash;
END;
$$
LANGUAGE 'plpgsql';

select encryp_TEXT('123'); 
```

但是，正在生成无效密码（即 django 无法使用该密码登录）：

```
In [9]: from django.contrib.auth.hashers import BCryptPasswordHasher

In [10]: a=BCryptPasswordHasher()

In [19]: p='bcrypt$$2a$12$dCw4N7U1aQbuTVhE8ybV0O$2a$12$dCw4N7U1aQbuTVhE8ybV0OVVeFYgl1EMtBhG.4/PobMWDlih1IGLK'

In [20]: a.verify('123',p)
Out[20]: False 
```

之前，使用 SHA1 auth 两个系统都可以正常工作，所以我想知道我错过了什么......

在我有这个之前：

```
-- Genera una cadena aleatoria del tamaño especificado
CREATE OR REPLACE FUNCTION random_string(length INTEGER, OUT RETURNS TEXT) 
AS $$
DECLARE
  chars TEXT[] := '{0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}';
  result TEXT := '';
  i INTEGER := 0;
BEGIN
  IF length < 0 THEN
    raise exception 'Given length cannot be less than 0';
  END IF;

  FOR i IN 1..length LOOP
    result := result || chars[1+random()*(array_length(chars, 1)-1)];
  END LOOP;

  RETURNS =  result;
END;
$$
LANGUAGE plpgsql;

-- Encripta con SHA1 una cadena y retorna el tipo de algoritmo + salt + hash
CREATE OR REPLACE FUNCTION encryp_TEXT(_TEXT TEXT, OUT RETURNS TEXT)
AS $$
DECLARE
    hash TEXT := '';
    salt TEXT := '';
BEGIN
    salt := random_string(12);
    hash := encode( libs.digest(salt || _TEXT, 'sha1'), 'hex');

    RETURNS =  'sha1$' || salt || '$' || hash;
END;
$$
LANGUAGE 'plpgsql'; 
```

查看 django 的源代码[并检查 this](http://crafted-software.blogspot.com/2011/05/modern-way-to-store-passwords-bcrypt.html)，我修改了 salt 生成。但是，即使我使用相同的代码，检查也会失败（使用 a `ValueError: Invalid salt`），所以我不知道问题出在盐还是加密

PD：如果有必要，我同样会很高兴重新实现 PBKDF2 或使用自定义哈希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:28:44.603

好吧，最后我做到了。我检查了 postgres 和 django 生成的字符串，发现带有 postgres 的字符串重复了 salt。所以是一个简单的改变：

```
-- Encripta con bcrypto una cadena y retorna el tipo de algoritmo + salt + hash, django compatible
CREATE OR REPLACE FUNCTION encryp_text(_TEXT TEXT, OUT RETURNS TEXT)
AS $$
DECLARE
    hash TEXT := '';
    salt TEXT := '';
BEGIN
    salt := random_string(12);
    hash := libs.crypt(_TEXT,salt);

    RETURNS =  'bcrypt$' || hash;
END;
$$
LANGUAGE 'plpgsql'; 
```

# java - 安卓，警报对话框。单击时如何访问其标题？

> ID：12736587
> 
> 赞同：1
> 
> 时间：2012-10-04T21:51:27.760
> 
> 标签：java, android, android-alertdialog

在某些时候，我需要将 Alertdialogs 向用户提出问题，等待他/她一一回答。代码将类似于：

```
for (int i=0; i<SomeValue; i++)
{
    Msg = "Do you want to add " + mylist.get(i) + " to the system?";
    AlertDialog ADB = new AlertDialog.Builder(this)
      .setIcon(android.R.drawable.ic_dialog_alert)
      .setTitle("New document " + mylist.get(i))
      .setMessage(Msg)
      .setPositiveButton("Add", new DialogInterface.OnClickListener() {

  @Override
  public void onClick(DialogInterface dialog, int which) {
      // Function to develop

   }
   })
.setNegativeButton("Ignore", null)
.show();
} 
```

那么，为 onClick 功能开发：我怎么知道与哪个 Alertdialog 相关联？例如，如何通过 onClick 函数知道当前 Alertdialog 的标题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:57:24.577

您应该查看 DialogFragments。创建一个扩展 DialogFragment 的类。onClickListener 应该可以访问片段变量和方法 - 这可能包括标题的成员变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:24:36.790

现在，您无法访问默认标题，因此您需要使用 : 设置标题 `setCustomTitle(View v)`- 只需将其设为一个简单的布局 XML 文件，其中包含您的标题`TextView` 。

在这样的方法中`DialogInterface`转换为：`AlertDialog``onClick()`

```
((AlertDialog)dialog) 
```

现在你可以像这样访问任何你想要的东西：

```
((AlertDialog)dialog).findViewById(R.id.YOUR_TITLE_TEXTVIEW_ID).getText() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:47:45.610

由于您使用的是匿名内部类，因此只有一个`AlterDialog`会调用此`onClick()`方法，即您正在构建的内部类。您不需要检测单击了哪个`Dialog`按钮，因为只有一个。如果您出于其他原因需要标题，请随意使用其他建议。

# php - .htaccess 仅删除第一个目录的 php 扩展名

> ID：12736588
> 
> 赞同：0
> 
> 时间：2012-10-04T21:51:39.240
> 
> 标签：php, html, apache, .htaccess, web

> **可能重复：**
> [删除 URL 中的 .PHP 文件扩展名](https://stackoverflow.com/questions/12372096/remove-php-file-extension-in-url)

我将 .htaccess 文件设置为从 URL 中省略 .php 扩展名。例如：

mysite.com/page
mysite.com/item
mysite.com/about

读自：

mysite.com/page.php
mysite.com/item.php
mysite.com/about.php

这很棒；但是，我使用 URL 的其余部分作为参数，我希望将其忽略。例如，我想要：

mysite.com/item/1234567890/a-product

阅读自：

mysite.com/item.php

而不是：

mysite.com/item/1234567890/a-product.php

知道如何在 .htaccess 中完成此操作吗？这是我当前的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:27:49.967

尝试：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/([^/]+)/?
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^(.*)$ %1.php [L] 
```

这与您的规则最初所做的一样，并在第一个文件夹之后删除了这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:59:37.147

您可以使用某种“路由器”通过路由器文件路由所有请求。在那个路由器文件中，你可以嗅出 url 的其余部分，然后用它做你想做的事。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ router.php?url=$1 [PT,L,QSA]
</IfModule> 
```

然后在 router.php 中，类似：

```
if (isset($_GET["url"])) {
    $url = $_GET["url"];
} 
```

/* 将 $url 分隔为变量，包含您的 item.php 文件，将 $url 的其余部分传递给包含的文件 */

不确定这是否是正确的方法，但这是一种方法。

# php - PHP fwrite - 哪些文件类型有效？- linux服务器

> ID：12736590
> 
> 赞同：0
> 
> 时间：2012-10-04T21:51:50.263
> 
> 标签：php, mysql, mailmerge

我的客户要求我使用现有的联系人数据库设置邮件合并结构。他们希望能够将某种 Microsoft Office 文档上传到系统中，然后我需要能够将此文件生成为可打印的循环，以替换与数据库匹配的设置字段。

例如`Dear %%FIRST_NAME%%`将更改为`Dear John`数据库中的记录或任何记录。

所以我想知道他们可以从 Microsoft Word 导出什么文件类型以上传到我的系统中，我可以使用 fwrite 来字符串替换这些变量，然后以某种方式设置一个循环以便能够将这些全部打印出来。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:01:50.433

您可以为此使用 PHPWord。[http://phpword.codeplex.com/](http://phpword.codeplex.com/)

它允许您打开 doc/docx 文件并对其进行编辑，尽管对于 .doc 文件，您需要一些兼容性包（希望您可以获得只是 XML 文件 zip 的 docx 文件）

如果可以的话，我会推荐你​​使用他们的模板系统，因为这会极大地方便你的生活。

所有你需要的：而不是这样做：

```
Dear %%FIRST_NAME%%, I still listen to your music, man! 
```

做这样的事情：

```
Dear ${FirstName}, I still listen to your music, man! 
```

然后在你的 PHP 代码中你可以这样做：

```
<?php
require_once('PHPWord.php');

$phpWord = new PHPWord();
$doc = $phpWord->loadTemplate("yourdoc.docx");
$document->setValue("FirstName", "John Lennon");
$document->save("yourdoc_modified.docx"); 
```

一个额外的我忘了说：你不需要在 Windows 上运行 PHP 服务器来使用它。只要您安装了 zip 和 XML 库，就可以了。

# java - 触摸项目时如何设置自定义背景颜色？

> ID：12736591
> 
> 赞同：4
> 
> 时间：2012-10-04T21:51:52.830
> 
> 标签：java, android, background-color

我基本上想在被触摸时自定义列表项的背景颜色。我厌倦了写一个听众，但似乎我犯了某种错误或误解了这些动作的概念。

```
v.setOnTouchListener( new TextView.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                v.setBackgroundColor(Color.RED); 
                    break;
            case MotionEvent.ACTION_UP:
                v.setBackgroundColor(Color.WHITE);
                break;
            }

    return false;
    }
}
); 
```

默认颜色为浅蓝色。我想为每个列表项更改它。此代码在触摸时将项目颜色更改为红色，但之后不会变回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:11:02.220

但也许最好的方法是使用颜色状态...在颜色文件夹中创建一个文件 mycolors.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_pressed="true"
              android:color="#ff0000"/> <!-- pressed -->
        <item android:color="#ffffff"/> <!-- default -->
    </selector> 
```

然后稍后您将视图的背景设置为： android:background="@color/mycolors" 在布局 xml 中或以编程方式如下： v.setBackgroundColor(getResources().getColor(R.color.mycolors);

在这种情况下，不需要点击或触摸监听器。一切都会神奇地发生。

更多关于它：http: [//developer.android.com/guide/topics/resources/color-list-resource.html](http://developer.android.com/guide/topics/resources/color-list-resource.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:01:48.680

你也试着抓住`ACTION_CANCEL`了吗？

所以...

```
...
case MotionEvent.ACTION_CANCEL:
case MotionEvent.ACTION_UP:
    v.setBackgroundColor(Color.WHITE);
     break;
... 
```

我认为 ListView 正在接收触摸事件，因为它开始滚动。所以你永远不会得到一个向上的动作，而是一个取消动作（我假设）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T21:56:28.553

使用 statelistdrawable。您可以在各处找到示例，包括 Android 开发者网站。

# extjs4.1 - Extjs Grid 面板滚动条在调整大小时消失

> ID：12736596
> 
> 赞同：0
> 
> 时间：2012-10-04T21:52:21.573
> 
> 标签：extjs4.1

从过去的几天开始，我一直在努力解决这个问题，非常感谢任何帮助/指示。

我创建了一个布局合适的 MainPanel (Ext.panel.Panel)。MainPanel 包含两个面板（searchPanel、ResultsPanel）

```
MainPanel {
    layout: 'fit',
    region : 'center',
    items : [{ 
        layout: 'border'
        items : [
            searchPanel,
            resultsPanel
        ]
    ] 
```

SearchPanel 是常规面板（区域：中心），结果面板（区域：南）是 GridPanel，可调整大小设置为 true。完成搜索后，我在启用了两个滚动条的 gridPanel 中看到了结果。最大化我的 MainPanel 时的几个问题

1.  ResultsPanel 没有完全扩展到最大窗口大小。（我必须拖到最大尺寸）。

2.  如果我这样做，那么恢复我的滚动条就会消失。

我需要在网格面板上做些什么，这样我就不会在恢复时松开滚动条，并且最大化网格面板应该扩展到最大窗口大小。感谢帮助

理士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:08:35.250

您提供的示例代码包含一些错误，因此我假设您有一个适合整个浏览器视口的主面板或“围绕”主面板的任何其他面板以及填充该主面板的其他 2 个面板。

```
Ext.create('Ext.panel.Panel', {
    itemId: 'mainPanel',
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    items : [{
        itemId: 'searchPanel',
        ...
    }, {
        flex: 1,
        itemId: 'resultsPanel',
        ...
    }]
}); 
```

这会生成一个 searchPanel，其高度满足内容（表单域）的需要，而 resultsPanel 则填充剩余空间。

请注意，我刚刚添加了 itemId 属性以阐明哪个项目是什么。你不需要它们。

如果这回答了您的问题，请注意您的一级嵌套太多并使用了边框布局（仅当您知道“北”面板的高度时才有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:14:31.750

您不能将多个项目放在合适的布局中。适合布局是让单个组件占用父组件的大小。

您需要自动/锚定布局或 vbox。检查示例中的布局浏览器是否符合您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:50:38.090

它曾经在早期版本中工作，但不再适用。有 HBox/VBox 布局。

# windows-phone-7 - 具有搜索绑定和显示绑定的 WP7 自动完成功能

> ID：12736597
> 
> 赞同：0
> 
> 时间：2012-10-04T21:52:28.773
> 
> 标签：windows-phone-7, binding, autocomplete

我在 WP7 中遇到自动完成文本框的问题。现在我已经设法通过“标题”搜索客户，然后将显示带有“标题”和“地址”的选项。但是我如何在自动完成文本框中显示两个绑定？我可以在我的数据模板中将它们都显示为选项，但是当我选择它时，它只会显示 ValueMemberBinding 的绑定。

```
<toolkit:AutoCompleteBox x:Name="acBox" ValueMemberBinding="{Binding Title}" ItemsSource="{Binding Address}" HorizontalAlignment="Left" Margin="6,126,0,436" Width="420" Height="72">
            <toolkit:AutoCompleteBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Title}"></TextBlock>
                        <TextBlock FontSize="{StaticResource PhoneFontSizeNormal}"
                Foreground="#ff666666"
                 Text="{Binding Address}"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </toolkit:AutoCompleteBox.ItemTemplate>
        </toolkit:AutoCompleteBox> 
```

# html - 元素名称 gcse:searchbox-only 不能表示为 XML 1.0

> ID：12736598
> 
> 赞同：10
> 
> 时间：2012-10-04T21:52:29.980
> 
> 标签：html, xml, validation, w3c-validation

我在 w3 验证器中收到以下错误，

```
 Line 62, Column 140: Element name gcse:searchbox-only cannot be represented as XML 1.0. 
```

我正在使用此代码添加的网站内的 Google 搜索栏，

```
<gcse:searchbox-only></gcse:searchbox-only> 
```

请帮助避免此错误。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T17:03:23.370

我发现这个答案隐藏在谷歌文档中：

[https://developers.google.com/custom-search/docs/element#html5](https://developers.google.com/custom-search/docs/element#html5)

**HTML5 有效的 div 标签**

只要您遵守以下准则，您就可以使用 HTML5 有效的 div 标签：

*   类属性必须设置为 gcse-XXX
*   任何属性都必须以 data- 为前缀。

例如：

```
<div class="gcse-searchbox" data-resultsUrl="http://www.example.com" data-newWindow="true" data-queryParameterName="search" > 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-05T07:32:04.250

您总是可以使用`<div class="gcse-search"></div>`而不是`<gcse:search></gcse:search>`，然后错误将从 w3c 验证器中消失。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T00:13:04.703

负责 W3C HTML 验证器的人 Michael[tm] Smith 在[这里说](http://comments.gmane.org/gmane.org.w3c.validator/13353)：

> 这不是错误，而是警告。之所以发出它是因为内容是作为 HTML 而不是 XML MIME 类型提供的，而且 HTML 解析器对命名空间一无所知——用 XML 术语来说，每个元素名称都是一个本地名称——等等HTML，该元素的文字名称是“g:plusone”。并且该名称不能用 XML 表示，因为 XML 不允许在本地名称中使用冒号。因此，警告的精神是说，如果您希望将此内容作为 XML 而不是 HTML 来提供，那么您在其中有一个 XML 不允许的元素名称。

他在谈论元素`g:plusone`，但这是同一个问题。

但我有点不同意。[冒号在XML 1.0](http://www.w3.org/TR/REC-xml/#d0e804)中的元素本地名称中有效。它们仅在[XML 1.0 + 命名空间](http://www.w3.org/TR/xml-names/#NT-NCName)中被禁止所以警告消息肯定可以改进。

更新：我之前提供了一个基于 document.write 的解决方法，但正如 Jan M 在评论中指出的那样，IE 对如何处理标签名称中带有冒号的元素有自己的想法，所以它在那里不起作用。相反，我建议遵循 Jan 的回答。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-03T10:16:15.940

解决方法很简单，不要直接在html页面中 使用**google搜索标签。***只需放置一个简单的 javascript 代码，通过****javascript 的 innerhtml****选项在 html**中插入**google 搜索标签*****。**

 **这是示例：

```
<div id="gsearch"></div>

<script>
   var gcseDiv = document.getElementById('gsearch');
   gcseDiv.innerHTML = '<gcse:search></gcse:search>'
</script> 
```

在此行之后，您可以编写或粘贴您的谷歌搜索代码，如下所示

```
 <script>
      (function() {
                var cx = 'xxxxxxxxxxxxxxxxxxxxxxxxx:xxxxxxxxx';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                    '//www.google.com/cse/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();

      </script> 
```

**建议：**只需将上述 div 和两个脚本放在一个父 div 中，并只为父 div 管理 css。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-22T03:17:19.733

也许这太简单了，但我只是把它放在javascript的内部和末尾来解决这个问题：

```
document.write('<gcse:search><\/gcse:search>'); 
```

并删除

它适用于 IE、Chrome、Firefox 和 Safari 并进行验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-31T08:05:49.933

如果您只想使用 DIV 显示搜索框（没有结果框），请使用以下代码：

```
<div class="gcse-searchbox-only"></div> 
```**

# javascript - 如何访问数组中、数组中、另一个数组中的元素……在 JavaScript 中

> ID：12736600
> 
> 赞同：0
> 
> 时间：2012-10-04T21:52:33.610
> 
> 标签：javascript, arrays

我正在尝试调用数组中的元素，即在另一个数组中，即在另一个数组中。例如....

```
 var a1 = ["1","2","3"];
  var a2 = ["4","5","6"];
  var a3 = ["7","8","9"];
  var a4 = ["10","11","12"];

  var b1 = ["a1","a2"];
  var b2 = ["a3","a4"];

  var c = ["b1","b2"];

  var x = c[0];

  console.log(x); 
```

答案是`x = b1`

我怎样才能定义`var x = c[0] b1[1] a2[2]`答案是6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:57:54.790

将数组定义为其他数组的元素，而不是字符串：

```
var a1 = [1, 2, 3];
...
var b1 = [a1, a2];
...
var c = [b1, b2];

var x = c[0][0][0]; // 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:58:36.307

数组`a1`实际上并不在`b1`其中——只有一个包含文本“a1”的字符串。如果你这样定义它们：

```
var a1 = ["1","2","3"];
var a2 = ["4","5","6"];
var a3 = ["7","8","9"];
var a4 = ["10","11","12"];

var b1 = [a1, a2];
var b2 = [a3, a4];

var c = [b1, b2]; 
```

然后你可以通过写得到“6” `c[0][1][2]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:58:37.887

你想要的是嵌套数组。

```
var a1 = ["1","2","3"];
var a2 = ["4","5","6"];
var a3 = ["7","8","9"];
var a4 = ["10","11","12"];

var b1 = [a1,a2];
var b2 = [a3,a4];

var c = [b1,b2];

var x = c[0][1][2];

console.log(x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:00:53.050

```
var a1 = ["1","2","3"], a2 = ["4","5","6"], a3 = ["7","8","9"], a4 = ["10","11","12"];
var b1 = [a1,a2];
var b2 = [a3,a4];
var c = [b1,b2];

var x1 = c[0][0][0];
var x2 = c[0][0][1];
var x3 = c[0][0][2];

console.log(x1); //1 (1st/0 item of a1) from c
console.log(x2); //2 (2nd/1 item of a1) from c
console.log(x3); //3 (3rd/2 item of a1) from c 
```

[**演示**](http://jsbin.com/acaruw/1/edit)。

# php - in_array() 没有按预期工作

> ID：12736601
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:52:35.263
> 
> 标签：php, arrays

> **可能重复：**
> [!in_array 在 PHP 中使用 - 条件语句](https://stackoverflow.com/questions/12730648/in-array-use-in-php-conditional-statments)

我有这个相反的代码。

假设我有 1,2,3,3,4,5 的数组

```
while ($row = mysql_fetch_assoc($result)) {

    $item = $row['item'];
    echo $item . '<br />'; // for testing
    $items[] = $row['item'];
    if (!in_array($item, $items)) {

        $output[] = $row;

        foreach ($items as $item) {
            echo 'Array thus far: ' . $item . '<br />';  // for testing
        }
    } 

} 
```

基本上我希望数组没有重复。测试代码最终应该打印出 1,2,3,4,5.. 但它实际上打印出 1,2,3,3,4,5 in_array() 函数似乎在这里与变量一起工作？

这是真实的输出：

```
Avengers
Array thus far: Avengers
Avengers
Array thus far: Avengers
Array thus far: Avengers
American Dad!
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
American Dad!
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Christopher Columbus
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Avatar
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Kung Pao Chicken
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
The Brak Show
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Avengers
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
The Brak Show
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Space Ghost: Coast to Coast
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Array thus far: Space Ghost: Coast to Coast
Battlestar Galactica (2004)
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Array thus far: Space Ghost: Coast to Coast
Array thus far: Battlestar Galactica (2004)
Potstickers
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Array thus far: Space Ghost: Coast to Coast
Array thus far: Battlestar Galactica (2004)
Array thus far: Potstickers
Potstickers
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Array thus far: Space Ghost: Coast to Coast
Array thus far: Battlestar Galactica (2004)
Array thus far: Potstickers
Array thus far: Potstickers
Avatar
Array thus far: Avengers
Array thus far: Avengers
Array thus far: American Dad!
Array thus far: American Dad!
Array thus far: Christopher Columbus
Array thus far: Avatar
Array thus far: Kung Pao Chicken
Array thus far: The Brak Show
Array thus far: Avengers
Array thus far: The Brak Show
Array thus far: Space Ghost: Coast to Coast
Array thus far: Battlestar Galactica (2004)
Array thus far: Potstickers
Array thus far: Potstickers
Array thus far: Avatar 
```

这里有重复的项目，我试图避开阵列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:56:42.687

您正在保护对 的插入`$output`，但实际上您正在打印`$items`根本没有保护的内容。

还要考虑到，根据结果集的预期大小和可能的重复百分比，允许重复然后将它们过滤掉可能会快得多`array_unique`（这将需要额外的内存，并且可以被认为是经典的时间/空间权衡）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:56:48.057

`$row['item']`执行完以下操作`$items`后，您需要继续`in_array()`：

```
while ($row = mysql_fetch_assoc($result)) {
    $item = $row['item'];
    echo $item . '<br />'; // for testing
    if (!in_array($item, $items)) {
        $output[] = $row;
        foreach ($items as $item) {
            echo 'Array thus far: ' . $item . '<br />';  // for testing
        }
        $items[] = $row['item'];
    }
} 
```

或者您可以通过删除来简化它`$items`：

```
while ($row = mysql_fetch_assoc($result)) {
    $item = $row['item'];
    echo $item . '<br />'; // for testing
    if (!in_array($item, $output)) {
        $output[] = $row;
        foreach ($items as $item) {
            echo 'Array thus far: ' . $item . '<br />';  // for testing
        }
    }
} 
```

# devise - 设计 1.5.3 和 Flash 消息演示？

> ID：12736603
> 
> 赞同：0
> 
> 时间：2012-10-04T21:52:44.530
> 
> 标签：devise, activeadmin, devise-confirmable

如果您使用的是可注册和可确认的，为什么您只能获得可注册样式的 Flash 消息？

活动管理员修改了我的 il8n 配置，并且不会显示我的 devise.en.yml 文件。

我只是想让我的员工知道他们正在收到一封电子邮件。与可确认的消息相同，但仅显示可注册的消息。

我尝试在我的模型中将可确认的放在可注册的前面，但这并没有改变任何东西。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:12:55.433

事实证明，您需要在`devise.en.yml`文件前面添加以下内容：

```
 registrations:
      user:
        signed_up: 'Welcome friend! You have signed up successfully.'
        inactive_signed_up: 'Yo! You done signed up. Please Check your email and click the confirmation link to continue.' 
```

在发现这一点之前，我没有在前面加上`user:`，因为我们也`admin:`非常感谢活跃的管理员。添加`user:`是关键。

希望谷歌会为试图更改设计 en.yml 文件但它没有生效的人找到这个。

# jqplot - jqplot堆叠条，多个系列没有堆叠

> ID：12736608
> 
> 赞同：1
> 
> 时间：2012-10-04T21:53:05.653
> 
> 标签：jqplot

[我正在尝试按照页面http://www.jqplot.com/deploy/dist/examples/bar-charts.html](http://www.jqplot.com/deploy/dist/examples/bar-charts.html)示例 3中的示例创建堆叠条形图。但是，我的系列数据没有堆叠。相反，仅绘制了第一个系列。我的第二个和第三个系列的值小于 1，而第一个系列的平均值约为 10，所以我认为 jqplot 可能会忽略其他系列，因为它无关紧要。

为了确认是不是这样，我从那里的示例中复制粘贴（没有鼠标单击花哨的东西），结果仍然相同，图表仅显示一个系列。

```
 var s1 = [2, 6, 7, 10];
    var s2 = [7, 5, 3, 4];
    var s3 = [14, 9, 3, 8];
    var plot3 = $.jqplot('vmstats_0', [s1, s2, s3], {
        // Tell the plot to stack the bars.
        stackSeries: true,
        captureRightClick: true,
        seriesDefaults:{
          renderer:$.jqplot.BarRenderer,
          rendererOptions: {
              // Put a 30 pixel margin between bars.
              barMargin: 30,
              // Highlight bars when mouse button pressed.
              // Disables default highlighting on mouse over.
              highlightMouseDown: true   
          },
          pointLabels: {show: true}
        },
        axes: {
          xaxis: {
              renderer: $.jqplot.CategoryAxisRenderer
          },
          yaxis: {
            // Don't pad out the bottom of the data range.  By default,
            // axes scaled as if data extended 10% above and below the
            // actual range to prevent data points right on grid boundaries.
            // Don't want to do that here.
            padMin: 0
          }
        },
        legend: {
          show: true,
          location: 'e',
          placement: 'outside'
        }     
      }); 
```

我需要调整以使该系列真正堆叠的任何建议？

# python - 将 python 字典附加到 csv

> ID：12736614
> 
> 赞同：1
> 
> 时间：2012-10-04T21:54:20.367
> 
> 标签：python, json, csv, dictionary

我正在尝试将一些 API JSON 数据导出到 csv，但我只想要其中的一些。我试过`row.append`了，但我得到了错误`TypeError: string indices must be integers`。

我是 python 新手，对于它为什么需要一个整数有点困惑。

```
import urllib2
import json
import csv

outfile_path='/NYTComments.csv'

writer = csv.writer(open(outfile_path, 'w'))

url = urllib2.Request('http://api.nytimes.com/svc/community/v2/comments/recent?api-key=ea7aac6c5d0723d7f1e06c8035d27305:5:66594855')

parsed_json = json.load(urllib2.urlopen(url))

print parsed_json

for comment in parsed_json['results']:
    row = []
    row.append(str(comment['commentSequence'].encode('utf-8')))
    row.append(str(comment['commentBody'].encode('utf-8')))
    row.append(str(comment['commentTitle'].encode('utf-8')))
    row.append(str(comment['approveDate'].encode('utf-8')))
    writer.writerow(row) 
```

打印出来的 parsed_json 看起来像这样：

```
{u'status': u'OK',
u'results':
    {u'totalCommentsReturned': 25,
    u'comments':
        [{
            u'status': u'approved',
            u'sharing': 0,
            u'approveDate': u'1349378866',
            u'display_name': u'Seymour B Moore',
            u'userTitle': None,
            u'userURL': None,
            u'replies': [],
            u'parentID': None,
            u'articleURL': u'http://fifthdown.blogs.nytimes.com/2012/10/03/thursday-matchup-cardinals-vs-rams/',
            u'location': u'SoCal',
            u'userComments': u'api.nytimes.com/svc/community/v2/comments/user/id/26434659.xml',
            u'commentSequence': 2,
            u'editorsSelection': 0,
            u'times_people': 1,
            u'email_status': u'0',
            u'commentBody': u"I know most people won't think this is a must watch game, but it will go a long way .... (truncated)",
            u'recommendationCount': 0,
            u'commentTitle': u'n/a'
        }]
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:06:58.367

看起来你犯了一个我一直犯的错误。代替

```
for comment in parsed_json['results']: 
```

你要

```
for comment_name, comment in parsed_json['results'].iteritems(): 
```

（或者`.items()`如果您使用的是 Python 3）。

只需遍历字典（`parsed_json['results']`大概是这样）就可以为您提供字典的*键*，而不是元素。如果你这样做

```
for thing in {'a': 1, 'b': 2}: 
```

然后`thing`将循环“a”和“b”。

然后，因为该键显然是一个字符串，所以您正在尝试执行类似 的操作`"some_name"['commentSequence']`，这会导致您看到的错误消息。

`dict.iteritems()`, 另一方面，给你一个迭代器，它会给你像`('a', 1)`then这样的元素`('b', 2)`；然后循环中的两个变量`for`被分配给那里的两个元素，所以`comment_name == 'a'`和`comment == 1`这里。

由于您似乎实际上并没有使用 from 的密钥`parsed_json['results']`，因此您也可以循环`for comment in parsed_json['results'].itervalues()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:13:28.630

```
for comment in parsed_json['results']: #'comment' contains keys, not values 
```

应该

```
for comment in parsed_json['results']['comments']: 
```

`parsed_json['results']`本身就是另一本字典。

`parsed_json['results']['comments']`是您要迭代的字典列表。

# boost - 无法确定 lua 包含目录

> ID：12736615
> 
> 赞同：0
> 
> 时间：2012-10-04T21:54:25.213
> 
> 标签：boost, lua, luabind, bjam

我正在尝试在我的 Windows 8 RP 中安装 Luabind。这是我到目前为止所做的。

*   我的 Visual Studio 是 2012 RC 版本。
*   我已经安装了 LuaforWindows 5.1.4
*   我已经下载了 luabind-0.9.1
*   我已经下载了 luabind 需要的 boost_1_51_0
*   我已经成功安装了 BOOST
*   我在 BOOST_ROOT 环境变量中设置了 Bjam 的路径
*   我在 LUA_PATH 环境变量中设置了 Lua 的路径

现在，当我尝试在 Luabind 目录中运行 bjam 时，会出现以下错误。

```
error: at Jamroot:41 error: 
*** Unable to determine Lua include directory. 
```

我不明白为什么 Jamroot 很难找到 Lua 目录的路径。我还尝试在我的 PATH 环境变量中包含路径，而不仅仅是在 LUA_PATH 环境变量中。

我已经连续搜索了三天。我也尝试过[这种方法](https://stackoverflow.com/questions/9989319/building-luabind-in-windows)，但它仍然没有帮助。

如果有人知道我做错了什么，请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:08:12.623

这是 luabind-0.9.1 第 41 行的 jamroot 代码：

```
LUA_PATH = [ os.environ LUA_PATH ] ;

if ! $(LUA_PATH)
{
    errors.user-error "*** LUA_PATH must be set." ;
}

local includes = [ GLOB $(LUA_PATH)/include $(LUA_PATH)/src : lua.h ] ;

if ! $(includes)
{
    errors.user-error "*** Unable to determine Lua include directory." ;
} 
```

看起来您设置了环境变量，因为您没有收到错误说明，但 bjam在您的or文件夹中`LUA_PATH`找不到。`lua.h``%LUA_PATH%/include``%LUA_PATH%/src`

我以前也遇到过类似的问题，`LUA_PATH`最终暂时将 的值复制`LUA_DEV`到其中以使某些工具可以工作。`LUA_PATH`检查您的变量，然后考虑执行此值复制，直到构建 luabind。

* * *

编辑：我使用的是旧版本的 Boost，但我希望构建工作相同。下面是我的环境变量，因为它们是由 Lua 安装程序配置的。请注意，它并不像我预期的那样`LUA_PATH`指向目录，因此我需要暂时更改它。`Lua\5.1`

> LUA_PATH=;;C:\Program Files\Lua\5.1\lua\?.luac
> 
> LUA_DEV=C:\Program Files\Lua\5.1

# ruby - 如何使用builder生成xml

> ID：12736618
> 
> 赞同：-2
> 
> 时间：2012-10-04T21:54:59.820
> 
> 标签：ruby, xml, builder

我需要使用builder创建以下xml，我该怎么做？

```
<rss xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:wp="http://wordpress.org/export/1.2/">
  <channel>
    <title>Your Site Title</title>
    <link>http://example.com</link>
    <pubDate>Tue, 02 Oct 2012 13:52:46 +0000</pubDate>
    <description />
    <language>en-US</language>
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:author>
      <wp:author_id>608422065</wp:author_id>
      <wp:author_login>xxx@hotmail.com</wp:author_login>
      <wp:author_email>xxx@hotmail.com</wp:author_email>
      <wp:author_display_name><![CDATA[abc123]]></wp:author_display_name>
      <wp:author_first_name><![CDATA[abc123]]></wp:author_first_name>
      <wp:author_last_name><![CDATA[abc123]]></wp:author_last_name>
    </wp:author>
    <wp:category>
      <wp:cat_name><![CDATA[null - null]]></wp:cat_name>
      <wp:category_nicename>null-null</wp:category_nicename>
      <wp:category_parent />
    </wp:category>
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:11:25.577

这应该让你开始：

```
xml = Builder::XmlMarkup.new
xml.rss "xmlns:excerpt" => "http://...", "xmlns:content" => "http://..." do
  xml.channel do
    xml.title "Your Site Title"
    xml.description
    xml.wp :wxr_version, "1.2"
    xml.wp :author do
      xml.wp :author_id, "608422065"
    end
  end
end 
```

会产生

```
<rss xmlns:excerpt="http://..." xmlns:content="http://...">
  <channel>
    <title>Your Site Title</title>
    <description />
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:author>
      <wp:author_id>608422065</wp:author_id>
    </wp:author>
  </channel>
</rss> 
```

# c# - Design time data

> ID：12736619
> 
> 赞同：0
> 
> 时间：2012-10-04T21:55:01.207
> 
> 标签：c#, wpf, windows-phone, design-time-data

Using *design-time data* for my *Windows Phone Apps* which works fine for **string**, **int** etc. (e.g. here: Person name, Person age) but when I like to do that for "nested object" (e.g. here: Company/Employer) I have no idea how to do this in the design-time-data-XAML file.

**Company:**

```
public class Company
{
  public string Name { get; set; }
  public int Size { get; set; }
} 
```

**Person:**

```
public class Person
{
  public int Age { get; set; }
  public string Name { get; set; }
  public Company Employer { get; set; }
} 
```

**PersonViewModel.cs:**

"Normal" ViewModel which implements INotifyPropertyChanged and has properties for all data I want to display.

**PersonViewModelSampleData.xaml:**

```
<local:PersonViewModel 
    xmlns="http:schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http:schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Hfr.BlaBla.ViewModels"

    Name="Harald-René Flasch"
    Age="36">
</local:PersonViewModel> 
```

**Person Page XAML:**

```
<TextBlock
    Text="{Binding Path=Employer.Name}"
    Style="{StaticResource PhoneTextLargeStyle}"
    TextWrapping="Wrap" ... /> 
```

So, **Path=Employer.Name** works fine at run-time but I have no idea how to provide that data for design-time support. Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:47:32.423

我不理解您的示例数据：它将是一个实例`Person`或一个实例`PersonViewModel`（但在这种情况下，viewModel 应该具有类型属性`Company`或`Person`两者兼有）。

如果您的示例数据是 Person 的一个实例：

```
<local:Person
    xmlns="http:schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http:schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Hfr.BlaBla.MyModelsNamespace"

    Name="Harald-René Flasch"
    Age="36">
     <local:Person.Employer>
             <local:Company Name="MyCompany"/>
     </local:Person.Employer>
</local:Person> 
```

注意命名空间：这里的“本地”xmlns 指的是模型命名空间（而不是 viewModel）。

**编辑：** 如果您的示例数据是 viewModel，假设您的 ViewModel 作为`Employer`具有 setter（不仅是 getter）的属性，类型为`Company` ：

```
<local:PersonViewModel 
    xmlns="http:schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http:schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Hfr.BlaBla.ViewModels"
    xmlns:myModel="clr-namespace:Hfr.BlaBla.MyModelsNamespace"
    Name="Harald-René Flasch"
    Age="36">
    <local:PersonViewModel.Employer>
            <myModel:Company Name="MyCompany"/>
    </local:PersonViewModel.Employer>
</local:PersonViewModel> 
```

# hibernate - MappingException: Could not determine type; Using @Embeddable and @Embedded

> ID：12736622
> 
> 赞同：3
> 
> 时间：2012-10-04T21:55:13.077
> 
> 标签：hibernate, jpa-2.0, hibernate-mapping

I am attempting to move a framework from hibernate3 to 4, this code worked in 3\. The framework uses Interfaces to break the tight coupling of classes. Hence:

The Entity class is marked with @Entity and this instance uses and an instance of and @Embeddable defined as its interface, a very familiar pattern in Spring.

The code works fine in older versions of hibernate (V3), I am moving it to JPA2 and Hibernate 4

I realize that Hibernate would have a difficult time figuring out which implementation (concrete class) of the interface was being being mapped. Hence I understand the error, however, it does work on older versions.

Is this due to hibernate templates and mapping classes in older versions that are abstracted away in JPA2 & H4.

Is the best approach to simply create concrete implementations of all the interface implementing classes and define the @embedded as a concrete class.

Thanks much in advance.

// the Entity class HibAttribute

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
// Define a unique constraint on item, namespace, and localname
@Table(name="attribute", uniqueConstraints = {
        @UniqueConstraint(columnNames={"itemid", "namespace", "localname"})})
// Define indexes on discriminator and key fields
@org.hibernate.annotations.Table(
        appliesTo="attribute", 
        indexes={@Index(name="idx_attrtype", columnNames={"attributetype"}),
                 @Index(name="idx_attrname", columnNames={"localname"}),
                 @Index(name="idx_attrns", columnNames={"namespace"})})
@DiscriminatorColumn(
        name="attributetype",
        discriminatorType=DiscriminatorType.STRING,
        length=16)
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)

public abstract class HibAttribute extends HibAuditableObject implements java.io.Serializable, Attribute {

    // Fields

    @Embedded
    @AttributeOverrides( {
            @AttributeOverride(name="namespace", column = @Column(name="namespace", nullable = false, length=255) ),
            @AttributeOverride(name="localName", column = @Column(name="localname", nullable = false, length=255) )
    } )
    private QName qname;

//  The interface public interface QName {

    /**
     * Get local name
     * @return local name
     */
    public String getLocalName();

    /**
     * Set local name
     * @param localName local name
     */
    public void setLocalName(String localName);

    /**
     * Get namespace
     * @return namespace
     */
    public String getNamespace();

    /**
     * Set namespace
     * @param namespace namespace
     */
    public void setNamespace(String namespace);

    /**
     * Create copy of QName object.
     * @return copy of current QName object
     */
    public QName copy();

}

@Embeddable
public class HibQName implements QName {

    public static final String DEFAULT_NAMESPACE = "org.osaf.cosmo.default";

    private String namespace = null;
    private String localName = null;

    public HibQName() {}

    /**
     * Create new QName with specified namespace and local name.
     * @param namespace namespace
     * @param localName local name
     */
    public HibQName(String namespace, String localName) {
        this.namespace = namespace;
        this.localName = localName;
    } 
```

// rest of class has been omitted ....... it is not needed to understand this issue.

The Stack trace: Caused by: org.hibernate.MappingException: Could not determine type for: org.timbre.model.QName, at table: attribute, for columns: [org.hibernate.mapping.Column(attributes_KEY)] at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:304) at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:288) at org.hibernate.mapping.IndexedCollection.validate(IndexedCollection.java:90) at org.hibernate.cfg.Configuration.validate(Configuration.java:1294) at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1732) at org.hibernate.ejb.EntityManagerFactoryImpl.(EntityManagerFactoryImpl.java:88) at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) ... 57 more

# java - 源文件夹和（普通）文件夹有什么区别

> ID：12736632
> 
> 赞同：17
> 
> 时间：2012-10-04T21:55:53.423
> 
> 标签：java, ide, directory, src

我正在遵循本指南：[Spring MVC](http://www.javacodegeeks.com/2012/09/spring-adding-spring-mvc-part-1.html)，我意识到我不知道源文件夹（src）和普通文件夹之间的区别。

我正在使用 Eclipse，所以也许差异仅在 IDE 中有用？

另外，我注意到 java 类倾向于放在 src 文件夹中。而其他所有文件都进入一个普通文件夹（或项目根文件夹）。

那么，源文件夹（src）有什么意义呢？为什么在普通文件夹上使用源文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-04T22:10:33.953

Eclipse 将源文件夹标记为包含 java 源。然后，当您编译您的项目时，Eclipse 会在您的所有源文件夹中查找您的源代码。

您可以使任何文件夹成为源文件夹，并将其添加到 java 构建路径。因此，下次编译项目时，Eclipse 还将在该文件夹中查找 java 类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-03-05T22:58:44.170

源文件夹包含与项目构建路径相关的源代码。在下面的 Spring Boot 项目`com.example.demo`中位于类路径中，由包图标指示（以及项目根目录中的 .classpath 文件，在项目根文件夹中的 eclipse 之外找到）。路径`src/main/java/`是这个包相对于项目根目录的位置。

[![在此处输入图像描述](../Images/8f211bd4ca0168060d98a9c9a9a2d260.png)](https://i.stack.imgur.com/qaENS.png)

`src/test/java/`您可以通过右键单击文件夹 Build Path > Remove from Build Path 从构建路径中删除源文件夹（例如）。要背靠背添加它，方法是右键单击包含您的构建路径的文件夹（例如`src/test/java/`），然后选择构建路径 > 用作源文件夹。

[![在此处输入图像描述](../Images/a8d6645002fa53c72e9ac82fbac31ed2.png)](https://i.stack.imgur.com/agPeJ.png)

# list - 按 PHP 顺序列出 Levenshtein 分数

> ID：12736633
> 
> 赞同：-1
> 
> 时间：2012-10-04T21:55:54.403
> 
> 标签：list, echo, levenshtein-distance

我有一个表格，可以将 1 个单词与多个单词进行比较，并输出一个 levenshtein 分数列表。我怎样才能得到这些分数，以便它们按顺序列出，最小的 levenshtein 分数第一：

```
<?php
$string5 = $_POST["singleword"];
$string6 = $_POST["manywords"];
$array6 = explode(', ',$string6); 

foreach ($array6 as $derp)
{
    echo $string5, "/", $derp, ": ", levenshtein($string5, $derp), "<br>";
}

?> 
```

输出的列表是这样的：

```
apple/mango: 5
apple/peach: 5
apple/toothpaste: 8
apple/apes: 3 
```

我希望它是这样的：

```
apple/apes: 3
apple/mango: 5
apple/peach: 5
apple/toothpaste: 8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:17:00.897

```
$string5 = $_POST["singleword"];
$string6 = $_POST["manywords"];

$words = array_flip(array_map('trim', explode(',', $string6)));

foreach ($words as $key => $value)
{
    $words[$key] = levenshtein($string5, $key);
}

asort($words);

foreach ($words as $key => $value)
{
    echo sprintf('%s / %s: %s<br />', $string5, $key, $value);
} 
```

# android - shadowed screen after android settings view

> ID：12736634
> 
> 赞同：1
> 
> 时间：2012-10-04T21:55:55.197
> 
> 标签：android

I've got an issue with the android app im developping. When i open the settings menu, if i press the return button once, the main activity show up but it's shadowed (see the screenshot). Then i have to press the return button once again to unfreeze the main view and menu...

[Screenshot](http://i.stack.imgur.com/TgIlq.png)

**AndrdoidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="lauzon.eric.dataloger"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />

<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name"  android:theme="@style/AppTheme">
    <activity android:name=".MainActivity" android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 

    <activity
        android:name=".BrowseActivity"
        android:label="@string/title_activity_browse" 
    /> 

    <activity android:name="SettingsActivity" />

</application> 
```

**How i start the settings view**

```
startActivity(new Intent(this, SettingsActivity.class)); 
```

**SettingsActivity.java**

```
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class SettingsActivity extends PreferenceActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings);

}

@Override
    public void onBackPressed() {
        finish();
        return;
    }
} 
```

# xml - DTD element empty and any

> ID：12736648
> 
> 赞同：2
> 
> 时间：2012-10-04T21:57:35.570
> 
> 标签：xml, dtd

In a dtd, can an element be defined as

```
<!ELEMENT name (ANY|EMPTY)> 
```

meaning that an name can either be like `<name/>` or it can contain any elements that does break xml rules?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:14:48.797

不，但如果你使用 type `ANY`，它仍然可以是空的。

例子：

```
<!DOCTYPE name [
<!ELEMENT name ANY>
]>
<name/> 
```

-

```
<!DOCTYPE name [
<!ELEMENT name ANY>
<!ELEMENT foo (#PCDATA)>
]>
<name>
    <foo/>
</name> 
```

# c++ - 遍历二叉搜索树 C++

> ID：12736649
> 
> 赞同：1
> 
> 时间：2012-10-04T21:57:48.193
> 
> 标签：c++, recursion, binary-search-tree

我正在做一个编程作业并编写一堆函数来实现二叉搜索树，并给出了一些函数。我以为我理解递归，但如果你愿意的话，我一直对切换方向感到困惑。

这是分配给定的函数：

```
static void deleteAll(BSTNode<Data>* n) {
  if (0 == n) return;
  deleteAll(n->left);
  deleteAll(n->right);
  delete n;
} 
```

要删除一棵非常短的树，

```
    根
   / \
左右右
```

我打电话`deleteAll(root)`。`n != 0`所以现在我打电话`deleteAll(lefty)`。`n != 0`所以我打电话`deleteAll(lefty->left)`。当然没有左节点。当我添加 lefty 节点时，我的构造函数将 left、right 和 parent 指针初始化为 0，所以 now `n == 0`. 所以我退出了函数并且永远不会删除 righty。我怎么去`deleteAll(n->right)`？

正如我所说，提供了此功能，因此我不应该更改它。我想也许我必须调用`deleteAll(b.begin())`或`b.end()`从最左边或最右边的节点开始，但每次我在脑海中通过它时，我都会点击`n == 0`.

请帮我理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:11:19.113

想象一个指向正在执行的当前行的箭头。当我们调用 时`deleteAll(root)`，首先我们检查是否`root`为 0：

```
--> if (0 == root) return;
    deleteAll(root->left);
    deleteAll(root->right);
    delete root; 
```

因为`root != 0`，我们然后调用`deleteAll(root->left)`：

```
 if (0 == root) return;
--> deleteAll(root->left); /*
    |-1-> if (0 == lefty) return;
    |-2-> deleteAll(lefty->left);
    |-3-> deleteAll(lefty->right);
    |-4-> delete lefty; */
    deleteAll(root->right);
    delete root;
  } 
```

现在箭头将移回函数的顶部并开始对 执行相同的操作`lefty`，贯穿我评论中的第 1-4 行（在第 2 行，将再次发生相同的扩展，直到找到一个空节点）。但是这里重要的是它会*记住*函数调用之前的位置，以便以后可以恢复。所以`deleteAll(root->left)`会去做它所做的事情并最终返回。然后原始调用继续：

```
 if (0 == root) return;
    deleteAll(root->left);
--> deleteAll(root->right);
    delete root; 
```

现在右节点也被删除了。这发生在递归的每一步。请记住，`return`只返回当前函数，而不是整个递归链。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:02:33.400

return 只返回到调用它的函数。在这种情况下`deleteAll(lefty)`（如果我理解正确，那或`deleteAll(root)`）。`deleteAll(n->right)`返回后会被调用`deleteAll(n->left)`。deleteAll 的后置条件是删除 n 及其所有子项。

假设我们有以下树：

```
 a
   / \
   b c
  /   \
 d     e 
```

调用图如下：

```
deleteAll(a)
    deleteAll(a->left)
        deleteAll(a->left->left)
            deleteAll(a->left->left->left)
            deleteAll(a->left->left->right)
        deleteAll(a->left->right)
    deleteAll(a->right)
        deleteAll(a->right->left)
        deleteAll(a->right->right)
            deleteAll(a->right->right->left)
            deleteAll(a->right->right->right) 
```

或者就节点名称而言：

```
deleteAll(a)
    deleteAll(b)
        deleteAll(d)
            deleteAll(NULL)
            deleteAll(NULL)
        deleteAll(NULL)
    deleteAll(c)
        deleteAll(NULL)
        deleteAll(e)
            deleteAll(NULL)
            deleteAll(NULL) 
```

# html - 使用 HTML 和 Perl 上传文件

> ID：12736652
> 
> 赞同：2
> 
> 时间：2012-10-04T21:57:53.983
> 
> 标签：html, perl, cgi

我正在尝试简单上传 .csv 文件并将其保存在我的服务器上。我不是 HTML 或 Perl 方面的专家，但由于客户端限制，这是我必须做的。

这是HTML：

```
<form action="/path/to/service" target="_self" method="POST" enctype="multipart/form-data">
File: <input type="file" name="attachment" size="50">
<SUBMIT_RESET Upload File>
</form> 
```

Perl 代码如下所示：

```
 my $sql = "SELECT NOW()";
    my $date = $DB->get_field($sql);

    my ($path, $ext) = split(/\./, $in{'attachment'});
    my @pathParts = split(/\//, $path);            
    my $filename = $pathParts[@pathParts - 1] . " - " . $date;

    if ($ext eq "csv") {                

        open (OUTFILE, ">", "$datadir/imports/" . $filename . "." . $ext);

        while (read($in{'attachment'}, $buffer, 1024)) {
            $file .= $buffer;
        }
        print OUTPUT $file;
        close (OUTFILE);
    } 
```

谁能给我一些关于我做错了什么的指导。我得到位于正确路径的文件，但它总是空的。

现在，我在这里处理的代码库很糟糕，我不能使用严格的。

建议？

EDIT1：为了尝试回答 $in{'attachment'} 的填充方式，我提供了一段有关如何处理表单的代码。

if ($ENV{'CONTENT_TYPE'} =~ m#^multipart/form-data#) {
my $cgi = new CGI; 我的@names = $cgi->param;

```
 foreach $name (@names) {
            my @value = $cgi->param($name);
            if (scalar(@value) > 1) {
                foreach $val (@value) {
                    $in{$name} .= $val."\0";
                }
                $in{$name} =~s/\\0$//;
            } else {
                my $value = $cgi->param($name);
                #my $value = join "\0", @value;
                $in{$name} = $value;
            }
            #my $value = $cgi->param($name);
            #my $value = join "\0", @value;
            #$in{$name} = $value;
        } 
```

编辑2：

总结一下ikegami提供的解决方案...

我错过了 read 和 print 语句的文件句柄不同 -`OUTFILE`和`OUTPUT`. 显然，这完全是一个新手错误，为此我深表歉意！

向所有试图帮助我的人致以最良好的祝愿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:24:36.210

您不应该使用全局变量。如果您的文件句柄是词法变量（自 2000 年以来受支持！）并且您一直在使用`use strict;`（自 2000 年以来也受支持，如果不是更早的话！），您会发现问题：

您没有在`print`通话中使用正确的变量。

```
open (OUTFILE, ">", "$datadir/imports/" . $filename . "." . $ext);
print OUTPUT $file; 
```

* * *

当我发现问题时，我正要建议您找出您实际遇到的错误：

```
open(my $OUTFILE, ">", "$datadir/imports/$filename.$ext")
   or die $!;

while (1) {
   my $rv = read($in{'attachment'}, my $buf, 1024);
   die $! if !defined($rv);
   last if !$rv;

   print $OUTFILE $buf
      or die $!;
}

close($OUTFILE)
   or die $!; 
```

（我打算假设错误是“ `Bad file descriptor`”，因为将不是文件句柄的东西传递给了`read`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T09:23:57.687

**HTML 代码**：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    <title>File Upload</title> 
</head> 
<body> 
    <form action="upload.cgi" method="post" enctype="multipart/form-data"> 
        <p>Photo to Upload: <input type="file" name="photo" /></p> 
        <p><input type="submit" name="Submit" value="Submit Form" /></p> 
    </form> 
</body> 
</html> 
```

**文件名upload.cgi下的**Perl代码：****

 **```
#!C:\Program Files\perl\bin\perl.exe

use strict; 
use CGI; 
use CGI::Carp qw ( fatalsToBrowser ); 
use File::Basename; 
$CGI::POST_MAX = 1024 * 5000; 
my $safe_filename_characters = "a-zA-Z0-9_.-"; 
my $upload_dir = "fileUpload/"; 
my $query = new CGI; my $filename = $query->param("photo"); 
if ( !$filename ) 
{ 
    print $query->header ( ); 
    print "There was a problem uploading your photo (try a smaller file)."; 
    exit; 
} 
my ( $name, $path, $extension ) = fileparse ( $filename, '..*' ); 
$filename = $name . $extension; 
$filename =~ tr/ /_/; $filename =~ s/[^$safe_filename_characters]//g; 
if ( $filename =~ /^([$safe_filename_characters]+)$/ ) 
{ 
    $filename = $1; 
} else { 
    die "Filename contains invalid characters"; 
} 
my $upload_filehandle = $query->upload("photo"); 
open ( UPLOADFILE, ">$upload_dir/$filename" ) or die "$!"; 
binmode UPLOADFILE; 
while ( <$upload_filehandle> ) 
{ 
    print UPLOADFILE; 
} 
close UPLOADFILE;
print $query->header ( ); 
print <<END_HTML; 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>Thanks!</title> 
<style type="text/css"> 
img {border: none;} 
</style> 
</head> 
<body> 
<p>Thanks for uploading your photo!</p> 
</body> 
</html> 
END_HTML 
```

我没有编写此代码，但它确实对我有很大帮助。我希望它也能帮助你。使这段代码对我有用的原因是正确地找到了 perl.exe 的路径。**

# ruby-on-rails - 将键/值对转换为哈希

> ID：12736661
> 
> 赞同：2
> 
> 时间：2012-10-04T21:58:56.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

> **可能重复：**
> [将两个数组组合成哈希](https://stackoverflow.com/questions/5174913/combine-two-arrays-into-hash)

我有一个模型，它将键值对存储为另一个模型人的属性。

将 person.person_attributes 转换为哈希的简单方法是什么？

这是我想出的一个愚蠢的方法：

```
keys = person.person_attributes.map(&:key)
values = person.person_attributes.map(&:value)

hashed_attributes = Hash.new

keys.each_index do |i|
  hashes_attribues[keys[i]] = values[i]
end 
```

有什么更优雅的方法来做到这一点？

先感谢您，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:13:22.810

我喜欢[`Enumerable#each_with_object`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_object)这些东西

```
attributes = person.person_attributes.each_with_object({}) do |attribute, hash|
  hash[attribute.key] = attribute.value
end 
```

如果你还在使用 Ruby 1.8.7，不用担心，[Rails 已经向后移植了这个方法](http://api.rubyonrails.org/classes/Enumerable.html#method-i-each_with_object)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:02:48.023

您想将一个对象数组（每个对象都有一个`key`和`value`属性）转换为一个哈希，其中`key`映射到`value`?

您可以使用以下内容，用于`Hash[array]`将二维数组转换为哈希：

```
Hash[person.person_attributes.map { |e| [e.key, e.value] }] 
```

### 输入：

```
Obj = Struct.new(:key, :value)

[ { Obj.new(:key1, :value1) },
  { Obj.new(:key2, :value2) },
  { Obj.new(:key3, :value3) }
] 
```

### 输出：

```
{ :key1 => :value1, :key2 => :value2, :key3 => :value3 } 
```

# workflow-foundation-4 - 是否可以在树视图或面包屑中表示 WF4 向导流程？

> ID：12736671
> 
> 赞同：0
> 
> 时间：2012-10-04T22:00:15.227
> 
> 标签：workflow-foundation-4, workflow-foundation

我正在考虑在 MVC 中的树视图或面包屑小部件中表示在 WF4 中实现的向导工作流。这个想法是，这将使用户能够轻松地浏览工作流程。一个小问题是，通过任何条件门将只显示“到目前为止经过的路线”。显然，XAML 具有完整的工作流程，而不是经过验证的工作流程。请注意确定 WF4 是否将此数据存储在任何地方。不确定这是否可能？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:40:55.597

您可以实现自定义 TrackingParticipant 扩展，将工作流中执行的活动记录到数据库中，您的 MVC 应用程序可以从中读取和显示。

# c - C中的算术右移

> ID：12736672
> 
> 赞同：0
> 
> 时间：2012-10-04T22:00:42.230
> 
> 标签：c, bit-manipulation, bit-shift

在 C 中，在 32 位机器上，我只是想知道给定的`1>>31`返回值是否是有符号整数，因为对于 2 的补码，在进行右移（算术）时，会复制符号位以给出结果`-1``1`

`1111 1111 1111 1111 1111 1111 1111 1111`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:04:02.727

不，在任何符合要求的实现中，结果都将为零。

C99, 6.5.7/5（“按位移位运算符”）状态：

> E1 >> E2 的结果是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有有符号类型和非负值，则结果的值是 E1 / 2^E2 的商的整数部分。如果 E1 具有带符号类型和负值，则结果值是实现定义的。

由于是非负的，因此结果是其明显为零`1`的积分商。`1 / (2^31)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:05:06.793

结果将为零，因为整数 1 的符号位（最高有效位）为 0：

```
0000 0000 0000 0000 0000 0000 0000 0001
^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:07:35.667

的结果`1>>31`为零，因为 1 的符号位为 0。

但是，您不能指望被复制的符号位，因为根据 K&R 第二版，结果是为有符号值的右移实现定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-28T05:01:28.080

以下代码有助于确定右移是否是有符号整数的算术，对于使用`int`s 的二进制补码表示的实现。

```
#include <stdio.h>

//below function returns 1 if system is little endian, 0 otherwise
int is_little_endian() { //checks endianness
  short x = 0x0100; //256
  char *p = (char*) &x;
  if (p[0] == 0) {
    return 1; 
  }
  return 0;
}

/* Below function returns 1 if shifts are arithmetic, 0 otherwise.
   It checks whether the most significant bit is 1 or 0, for an int which
   had most the significant bit as 1 prior to the right shift. If the MSB
   is 1 after the bit shift, then the (unsigned) value of the most
   significant Byte would be 255.
*/

int int_shifts_are_arithmetic() {
  int x = -2;
  x = x >> 1 ;
  char *px = (char*)&x;
  if (is_little_endian()) {
    unsigned char *upx = (unsigned char*)&px[(int)sizeof(int) - 1];
    if (upx[0] == 255) return 1; 
    return 0;
  } else { //big endian
    unsigned char* upx = (unsigned char*)px;
    if (upx[0] == 255) return 1;
    return 0;
  }
}

int main() {
  if (int_shifts_are_arithmetic()) {
    printf("Shifts are arithmetic\n");
  }
  else {
    printf("Shifts are not arithmetic\n");
  }
  return 0;
} 
```

# php - Paypal 按钮 + IPN（通过付款人用户名）

> ID：12736674
> 
> 赞同：3
> 
> 时间：2012-10-04T22:01:14.843
> 
> 标签：php, paypal, paypal-ipn

有没有办法也传递和接收自定义变量（例如付款人的用户名）？我不能强迫我的用户使用与他们在我的网站上使用的相同的电子邮件地址（最初由 paypal 返回）。传递一个额外的用户名将有助于轻松检查付款人的身份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:27:49.763

您可以在发布到 PayPal 的表单中包含自定义隐藏字段，如下所示：

```
<input type="hidden" name="custom" value="<?php echo $user_name; ?>">  // I don't know php well, so correct that part if it's wrong 
```

然后，PayPal 会将该值与其余的 IPN 数据一起传回给您。请注意，此字段允许的最大字符数为 256。

此外，您不能只定义*任何*字段 - 您只能使用 PayPal[在此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)指定的字段（即输入`name`是“自定义”，因为 PayPal 明确允许它 - 如果您将其设置`name`为“用户名”，它将被忽略）。

# javascript - console.log(document.head) 结果在每次刷新时交替出现

> ID：12736679
> 
> 赞同：2
> 
> 时间：2012-10-04T22:01:32.333
> 
> 标签：javascript, html, google-chrome, safari, webkit

我刚刚发现了一件让我非常困惑的事情：

```
 <!DOCTYPE html>
  <html lang="en">
    <head>
      <title></title>
    </head>
    <body>
      <script type="text/javascript">
        console.log(document.head);
      </script>
    </body>
  </html> 
```

每次我在 Safari 和 Chrome 中刷新此页面时，控制台输出都会在 JavaScript“HTMLHeadElement”和 HTML 本身之间交替。

有人愿意详细说明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:00:07.190

我在 Chrome 中尝试了这个实验并得到了相同的结果。我的猜测是 webkit 实现中的某种解析竞争条件。

当我修改代码以不立即运行代码时，我可以获得一致的结果。

```
<script type="text/javascript">
    setTimeout(function() { console.log(document.head) } , 0);
</script> 
```

控制台将显示带有展开/折叠三角形的 HTML，因此可能作为一个对象。

```
<head>
    <title></title>
</head> 
```

如果我添加`.outerHTML`，我也会在那里得到一致的结果，将 HTML 记录为字符串。

```
<script type="text/javascript">
    console.log(document.head.outerHTML);
</script> 
```

最后，添加一个`.toString()`将始终记录`[object HTMLHeadElement]`

```
<script type="text/javascript">
    console.log(document.head.toString());
</script> 
```

# jquery - 使用表单 id 在 JQuery.ajax() 中传递 ActionForm 数据

> ID：12736682
> 
> 赞同：0
> 
> 时间：2012-10-04T22:01:53.930
> 
> 标签：jquery, struts

有没有一种方法可以使用 JQuery.ajax() 将所有表单数据传递给 struts 1 操作。我不想传递单个值并且不使用 $("#formId").serailize()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:00:56.627

看看这个[插件](http://www.malsup.com/jquery/form/)

你可以打电话`$("#formId").ajaxSubmit();`做你想做的事。

# mysql - 通过 Windows 上的 putty 在 ssh 上编写脚本

> ID：12736683
> 
> 赞同：4
> 
> 时间：2012-10-04T22:01:55.190
> 
> 标签：mysql, ssh, putty

我需要从 Windows 机器编写 mysql 恢复 linux 机器的脚本。我有腻子，我知道它有 ssh 功能。这是我所拥有的：

```
C:\Progra~1\Putty\putty.exe -ssh root@10.1.2.3 && mysql -u USER -pPASS db < /tmp/dump.sql 
```

我在编写脚本时遇到的问题是腻子会打开一个新窗口并将控制权转移到那里，所以接下来的任何事情

```
putty.exe -ssh 
```

不做任何事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T22:19:15.960

您可以使用该`-m`选项指定包含要在远程连接上运行的命令的文件。

例子：

```
C:\Progra~1\Putty\putty.exe -ssh -m C:\cmd.txt root@10.1.2.3 
```

的内容`C:\cmd.txt`

```
 mysql -u USER -pPASS db < /tmp/dump.sql 
```

从[腻子文档](http://the.earth.li/~sgtatham/putty/0.62/puttydoc.txt)：

> 3.8.3.6 `-m'：从文件中读取远程命令或脚本
> 
> PuTTY 配置框的 SSH 面板中的“`-m' option performs a similar function to the`远程命令”框（参见第 4.18.1 节）。然而， `-m' 选项应该被赋予一个本地文件名，它会从那个文件中读取一个命令。
> 
> 对于某些服务器（尤其是 Unix 系统），您甚至可以在该文件中放置多行并依次执行多个命令或整个 shell 脚本；但这可以说是一种滥用，并且不能期望在所有服务器上都有效。特别是，众所周知，它 *不能*与某些“嵌入式”服务器一起使用，例如 Cisco 路由器。
> 
> 此选项在文件传输工具 PSCP 和 PSFTP 中不可用。

# asp.net-mvc - 未找到视图“主页”或其主视图，或者没有视图引擎支持搜索到的位置。搜索了以下位置：“零星错误”

> ID：12736684
> 
> 赞同：2
> 
> 时间：2012-10-04T22:01:59.657
> 
> 标签：asp.net-mvc, view, asp.net-mvc-routing, viewengine

尝试返回视图时，我在使用 MVC 4 应用程序时遇到零星错误。

在这种特殊情况下，我将返回一个视图`return View("Home", model);`，这就是我得到消息的地方。当您不断测试和调试时，它似乎也偶尔发生，我认为 View Engine 变得疯狂。比如在这个之前，我在执行一个简单的视图时说它一直在那里找不到它。在清除缓存、重新启动等并执行相同的确切逻辑之后，它起作用了。

所以，我不知道如何用视图引擎解决这个问题。在我回到视图之前，我可以向你保证，我的模型中有记录。我无法通过我的电脑在此表单上附加屏幕打印 --- 没有选择。

所以，可怕的问题是：我如何解决这个问题，它不会像这样偶尔发生？？？这是一个严重的问题，希望能解决它....

我查看了 Scott Hanselmans 用于预编译视图等的 nuget 包，但似乎过于复杂和额外的工作。我想知道是否还有其他我可以做的事情。

任何帮助将非常感激....

这是我的 Globla.asax 文件：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

如果有人可以回答，我将不胜感激，因为这将使我们正在开发的 MVC 应用程序停止运行！

我尝试`.DataTokens.Add("area", "YOURAREANAME");`在 的末尾添加`MapRoute`，但我不知道用什么来代替字符串。

另外，我不知道为什么需要这样做（如果它会解决它）并且需要某人的解释......

为想要检查控制器代码的另一个人添加了代码。

```
[HttpPost]
        public ActionResult Refresh(ViewModelTemplate_Guarantors model)
        {
            try
            {
                model.Error = string.Empty;

                bool dbHasRows = db.ChkLoanFields(Convert.ToInt32(model.LoanId));

                if (!dbHasRows)
                {
                    ViewBag.ShowTemps = false;
                    model.Error = "Details not available for this LoanId.";
                    return View("Home", model);
                }
                else
                {
                    int TemplateCnt = 0;
                    int GuarantorCnt = 0;
                    ViewBag.ShowTemps = true;

                    ViewModelTemplate_Guarantors tg = db.SelectViewModelTemplate_Guarantors(Convert.ToInt32(model.LoanId), "1", model.SelectedDeptText, out TemplateCnt, out GuarantorCnt);

                    if (TemplateCnt > 0)
                        model.Templates = tg.Templates;
                    else 
                       model.ErrorT = "Templates not available for this LoanType.";

                    if (GuarantorCnt > 0)
                        model.Guarantors = tg.Guarantors;
                    else
                        model.ErrorG = "Guarantors not available for this LoanId.";

                    return View("Home", model);
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

当我的目录结构清晰时，我不明白为什么路由引擎会尝试转到以下内容：Views/Home/Index.cshtml

给出的错误如下，甚至没有寻找“索引”页面。

```
~/Views/Home/Home.aspx
~/Views/Home/Home.ascx
~/Views/Shared/Home.aspx
~/Views/Shared/Home.ascx
~/Views/Home/Home.cshtml
~/Views/Home/Home.vbhtml
~/Views/Shared/Home.cshtml
~/Views/Shared/Home.vbhtml 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:44:03.043

替换这个：

```
return View("Home", model); 
```

有了这个：

```
return View("Index", model); 
```

完整代码：

```
public ActionResult Refresh(ViewModelTemplate_Guarantors model)
{
    try
    {
        model.Error = string.Empty;

        bool dbHasRows = db.ChkLoanFields(Convert.ToInt32(model.LoanId));

        if (!dbHasRows)
        {
            ViewBag.ShowTemps = false;
            model.Error = "Details not available for this LoanId.";
            return View("Home", model);
        }
        else
        {
            int TemplateCnt = 0;
            int GuarantorCnt = 0;
            ViewBag.ShowTemps = true;

            ViewModelTemplate_Guarantors tg = db.SelectViewModelTemplate_Guarantors(Convert.ToInt32(model.LoanId), "1", model.SelectedDeptText, out TemplateCnt, out GuarantorCnt);

            if (TemplateCnt > 0)
                model.Templates = tg.Templates;
            else
                model.ErrorT = "Templates not available for this LoanType.";

            if (GuarantorCnt > 0)
                model.Guarantors = tg.Guarantors;
            else
                model.ErrorG = "Guarantors not available for this LoanId.";

            return View("Index", model);
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

# javascript - 是否可以为 www.tidetimes.org 上其他地方托管的 javascript 设置样式

> ID：12736685
> 
> 赞同：0
> 
> 时间：2012-10-04T22:02:04.470
> 
> 标签：javascript, styling, hosted

我需要在我的网站上显示潮汐时间，但是在英国以任何体面的形式提供潮汐时间的唯一服务是 www.tidetimes.org。

他们提供了一个运行非常标准的 Javascript（托管在他们的网站上）的小部件，可以使用 document.write 在您自己的网站上生成潮汐时间，但我需要更改样式。我将如何实现这一目标？

这是实际小部件脚本的链接，我正在尝试为 Bovisand Pier 设置它：

[http://www.tidetimes.org.uk/widgets](http://www.tidetimes.org.uk/widgets)

以及实际的 javascript 文件： [http ://www.tidetimes.org.uk/bovisand-pier-tide-times.js](http://www.tidetimes.org.uk/bovisand-pier-tide-times.js)

我在本地下载、编辑和托管了该文件，但我认为tidetimes.org 每天都会为新时代编辑 js 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:18:32.743

[使用Google Feed API](https://developers.google.com/feed/)之类的东西来使用他们的[RSS 提要](http://www.tidetimes.org.uk/bovisand-pier-tide-times.rss)( [http://www.tidetimes.org.uk/bovisand-pier-tide-times.rss](http://www.tidetimes.org.uk/bovisand-pier-tide-times.rss) ) 。这将是一个更易于维护的长期解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:06:49.790

您必须手动循环并清除样式。在 jquery 中：

```
$('#containerForWidget tr, #containerForWidget td').attr('style', ''); 
```

这将获取容器中的所有元素`tr`并`td`删除内联样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:21:17.547

创建一个简单的 javascript 函数（旧样式但可以工作），如下所示：

```
 function changeStyle(){
    var divElements = document.getElementsByTagName("div");
    for (var i = 0; i < divElements.length; i++) {
        var divElement = divElements[0];
        //change the style
        divElement.setAttribute("style", "color: red;");
    }
 } 
```

在 HTML 页面 `onload`事件上调用此函数。

或者，将此代码（匿名块）添加到潮 javascript 文件链接之后的部分或页面下方。

```
 <script language="javascript">
    var divElements = document.getElementsByTagName("div");
    for (var i = 0; i < divElements.length; i++) {
        var divElement = divElements[0];
        //change the style
        divElement.setAttribute("style", "color: red;");
    }
  </script> 
```

# qt - PyQt/PySide QSpinBox 闪烁问题

> ID：12736688
> 
> 赞同：1
> 
> 时间：2012-10-04T22:02:15.937
> 
> 标签：qt, pyqt, pyside, qgraphicsview, qspinbox

我使用 QGraphicsProxyWidget 将 QSpinBox 添加到 QGraphicsScene。每次我将鼠标悬停在 QSpinBox 上时，它都会闪烁，并在 spinbox 控件上覆盖一条黑色带。我附上了截图和下面的代码。难道我做错了什么？有没有办法避免这种情况？Pyside 1.1.2、Python 2.7、Windows7。

![QSpinBox在悬停时闪烁](../Images/53d46160a013db2a4554240012cb7a7a.png)

```
class testWidget(QGraphicsView):
    def __init__(self):
        QGraphicsView.__init__(self)

        floorSpinBox = QSpinBox()
        floorSpinBox.setGeometry(0,0,50,25)

        proxyWidget = QGraphicsProxyWidget() 
        proxyWidget.setWidget(floorSpinBox)

        scene = QGraphicsScene(self)
        scene.addItem(proxyWidget)
        self.setScene(scene)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    widget = testWidget()
    widget.show()
    app.exec_() 
```

## 编辑

显然这里有一个错误报告：[Bugreport](https://bugreports.qt-project.org/browse/QTBUG-18167)。我最终不得不将其添加`QSpinBox`到常规`QWidget`而不是下`QGraphicsView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:15:12.257

为什么你把纺纱箱放在一个`QGraphicsScene`？这似乎很奇怪。如果您对此没有什么神秘的原因，而只是想要一个功能性的、非闪烁的 UI 元素，请尝试将您的 testWidget 设为 a`QDialog`而不是 a `QGraphicsView`。

```
from PyQt4.QtGui import QDialog, QSpinBox,QApplication
import sys

class testWidget(QDialog):
    def __init__(self):
        QDialog.__init__(self)
        self.setGeometry(200,200,200,100)

        floorSpinBox = QSpinBox(self)
        floorSpinBox.setGeometry(75,40,50,25)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    widget = testWidget()
    widget.show()
    app.exec_() 
```

# c++ - glBindBuffer 崩溃 - 带有 glew 的 VBO 实现

> ID：12736691
> 
> 赞同：1
> 
> 时间：2012-10-04T22:02:40.197
> 
> 标签：c++, opengl, vbo

我一直在尝试在我的计算机上实现 VBO，但遇到了分段错误：

```
Unhandled exception at 0x00000000 in attocube.exe: 0xC0000005: Access violation 
```

错误出现在我调用的`glBindBuffer(GL_ARRAY_BUFFER, ID);`行`void init()`。我使用了以下问题的代码：[How to get VBO working](https://stackoverflow.com/questions/3121472/how-to-get-vbo-working)

```
#include <windows.h>
#include <iostream>
#include <GL/glew.h>
#include <GL/freeglut.h>

#pragma comment(lib,"glew32.lib")

GLuint ID;

void init(){
    glewInit();
    glClearColor(1.0f, 1.0f, 1.0f, 0.0f);
    glShadeModel(GL_FLAT);
    glEnableClientState(GL_VERTEX_ARRAY);
    float data[][2] = {{50,50},{100,50},{75,100}};
    glGenBuffers(1,&ID);
    glBindBuffer(GL_ARRAY_BUFFER, ID);
    glBufferData(GL_ARRAY_BUFFER, sizeof(data), data, GL_STATIC_DRAW);
}

void reshape(int w, int h){
    glViewport(0,0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0f, (GLdouble) w, 0.0f, (GLdouble) h);
}

void display(){
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(0.0f,0.0f,0.0f);
    glBindBuffer(GL_ARRAY_BUFFER, ID);
    glVertexPointer(2, GL_FLOAT, 2*sizeof(float), 0);
    glDrawArrays(GL_TRIANGLES,0,3);
    glFlush();  
}

int main(int argc, char **argv){
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500,500);
    glutInitWindowPosition(300,300);
    glutCreateWindow(argv[0]);
    init();
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutMainLoop();
    return 0;
} 
```

我的配置如下：Windows 7 / Geforce GTX 570 / glew 1.9.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:14:02.983

您的代码缺少对所需 OpenGL 版本可用性的任何检查（或者在您使用扩展的情况下，如果存在扩展）。您必须始终检查请求的功能是否实际存在。

[请参阅http://glew.sourceforge.net/basic.html](http://glew.sourceforge.net/basic.html)的第 2 段

现在顶点缓冲区对象是一个非常普遍的功能，它们不太可能不可用。但是崩溃表明这就是问题所在。因此，请确保您正确安装了正确的驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:35:21.457

我正在使用远程桌面连接的工作站上工作。我刚刚尝试直接在机器上运行代码并且它可以工作。VBO 不适用于 RDC。我觉得自己真的很愚蠢。非常感谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:33:29.910

我在使用 GL < 4.0 时遇到了同样的问题。在解决它`glewExperimental = GL_TRUE;`之前设置。`glewInit();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T12:26:58.510

无论如何，除了远程桌面问题，使用 GLEW 检查 VBO 的代码是这样的：

```
bool hasVBO = GLEW_ARB_vertex_buffer_object == TRUE;
bool hasVAO = GLEW_ARB_vertex_array_object == TRUE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T03:34:27.193

对于那些仍然遇到这个问题的人，如果你`glBindBuffer`从另一个不是渲染线程的线程调用你的程序将会崩溃。无论如何，至少在使用 Allegro 5 时。我通过将我的 VBO 代码移动到主线程来解决这个问题，并且崩溃停止了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-28T22:49:37.523

我让远程桌面在两台运行 OpenGL 4.3 的 Win7 PC 之间工作：

在批处理文件中，输入：

```
tscon 1 /dest:console /PASSWORD:yourPassword
cd C:\your\Exe\Folder
start yourProgram.exe
C:\Windows\System32\rundll32.exe user32.dll,LockWorkStation 
```

以管理员身份运行它。它将关闭会话，打开控制台（您的 PC 现在已登录，任何人都可以上前使用），启动程序并锁定屏幕。

然后您将使用远程桌面重新连接；并且您的程序应该正在运行，使用服务器的图形硬件加速。

这假设您的远程会话是 ID 1。要检查，运行命令窗口“查询会话”，并查看以“>”开头的行。

# php - 如何在soapServer 响应中返回自定义XML 响应？

> ID：12736697
> 
> 赞同：7
> 
> 时间：2012-10-04T22:03:03.277
> 
> 标签：php, soap, soapserver

我正在设置一个接受 XML 输入并且必须返回自定义 XML 输出的 SOAP Web 服务。所有这些都在 WSDL 中定义。我为此应用了soapServer（直到有人说它存在阻止我实现目标的错误:-)）。

我还不能返回自定义 XML：我得到了一些似乎基于 WSDL 的结果，其标准根元素名称等于输入 XML 加“响应”。实际上，这也让我感到惊讶，所以作为一个附带问题，我想知道为什么会这样以及它是否会受到影响。当然，在创建响应时以某种方式使用 WSDL 定义是一件好事，但正如我所说，我不知道如何在响应中获取自定义 XML。

我做到了这一点：

WSDL

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions
    xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://pse/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    name="PSE"
    targetNamespace="http://pse/">
    <types>
        <xs:schema>
            <xs:import namespace="http://pse/" schemaLocation="PSE.xsd"/>
        </xs:schema>
    </types>
    <message name="MI102Req">
        <part name="cdhead" type="tns:cdhead_T"/>
        <part name="instr" type="tns:instr_T"/>
    </message>
    <message name="Res">
        <part name="cdhead" type="tns:cdhead_T"/>
    </message>
    <portType name="MIPortType">
        <operation name="mi102">
            <input message="tns:MI102Req"/>
            <output message="tns:Res"/>
        </operation>
    </portType>
    <binding name="MIBinding" type="tns:MIPortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="mi102">
            <soap:operation soapAction="http://www.testURL/test_soap.php#mi102"/>
            <input>
                <soap:body use="literal" namespace="http://pse/"/>
            </input>
            <output>
                <soap:body use="literal" namespace="http://pse/"/>
            </output>
        </operation>
    </binding>
    <service name="PSE">
        <port name="MIPortType" binding="tns:MIBinding">
            <soap:address location="http://www.testURL/test_soap.php"/>
        </port>
    </service>
</definitions> 
```

输入 XML

```
<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
    <Body>
        <mi102 xmlns="http://pse">
            <cdhead version="13"/>
            <instr/>
        </mi102>
    </Body>
</Envelope> 
```

当前的PHP

```
<?php
    class PSE {
        function mi102 ($stdClassInput) {
            $inp = file_get_contents ('php://input');
            $xml = simplexml_load_string ($inp); // Envelope
            $ch = $xml -> children ();
            $elt1 = $ch [0]; // Body
            $ch = $elt1 -> children ();
            $elt2 = $ch [0]; //mi102

            $xslt = new XSLTProcessor();
            $xslt -> registerPHPFunctions();
            $xslt -> importStylesheet ( DOMDocument::load ('test.xslt') );
            $dom = $xslt -> transformToDoc (DOMDocument::loadXML ($elt2 -> asXML()));

            $result = new SoapVar ($dom -> saveXML(), XSD_ANYXML);  
            return ($result);
        }
    }

    ini_set( "soap.wsdl_cache_enabled", "0");
    $server = new SoapServer ("test.wsdl");
    $server -> setClass ('PSE');
    $server -> setObject (new PSE());
    $server -> handle();
?> 
```

上面使用的 XSLT 只是更改属性的一种方式——临时将根名称更改为服务器始终返回的名称（以防万一:-)）

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pse="http://pse">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="pse:mi102">
        <mi102Response>
            <xsl:apply-templates/>
        </mi102Response>
    </xsl:template>

    <xsl:template match="pse:cdhead">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:copy/>
    </xsl:template>

    <xsl:template match="@version">
        <xsl:attribute name="version">14</xsl:attribute>
    </xsl:template>

    <xsl:template match="*"/>

</xsl:stylesheet> 
```

我希望返回 XML 类似于

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://pse/">
    <SOAP-ENV:Body>
        <ns1:mi102Response>
            <cdhead version="14"/>
        </ns1:mi102Response>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

但相反它是

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://pse/">
    <SOAP-ENV:Body>
        <ns1:mi102Response/>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在上面的 php 中调试 $dom 内容准确地显示了我尝试返回的 XML（当然，包装在 SOAP Envelope/Body 中，就像输入的一样）：

```
<?xml version="1.0" encoding="UTF-8"?>
<mi102Response xmlns:pse="http://pse">
    <cdhead xmlns="http://pse" version="14"/>
</mi102Response> 
```

我哪里错了？如何将自定义 XML 放入返回的 http 响应内容中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T11:14:42.280

呸！

这花了我几次重试和谷歌搜索，直到我发现出了什么问题。
我认为它可以归类为`SoapVar`.

我发现虽然 SoapVar 完全能够解析 XML 字符串，但如果字符串包含像`<?xml version="1.0" encoding="UTF-8"?>`. 因此，当您有 a`DOMDocument`或 a时`SimpleXMLElement`，您首先必须在 SoapVar 解析字符串之前去掉声明。

这`DOMDocument`可以通过应用`saveXML`与从 dom 本身构造的变量相等的参数来完成`DOMNode`，选择任何节点，但通常这当然是根节点。

在我的服务器 php 中，我添加了以下内容：

```
$nodes = $dom -> getElementsByTagName ('cdhead');
$node = $nodes -> item(0);

$result = new SoapVar ($dom -> saveXML($node), XSD_ANYXML); 
```

现在我的结果还可以：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://pse/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
    <ns1:mi102Response>
        <cdhead version="14"/>
    </ns1:mi102Response>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

至于返回的 XML 的根名称 - 我相信我会找到一种方法将其更改为我想要的任何名称（而不是由 SoapVar 生成的标准 mi102Response）！

# java - 如何使用 FFMPEG 对文件进行转码并在 Java servlet 的响应中流式传输输出文件？

> ID：12736698
> 
> 赞同：3
> 
> 时间：2012-10-04T22:03:18.617
> 
> 标签：java, servlets, ffmpeg, mp3, transcode

基本上，这就是我想要做的： 1\. 用户将 URL 作为 GET 参数传递给我的 servlet。2\. Servlet 使用 ProcessBuilder 将该 URL 中包含的媒体转换为有效的媒体格式（即：MP3）。3\. servlet 将经过 FFMPEG 转码的输出文件流式传输回浏览器。

1 和 2 工作正常，但 3 我有问题。我能做的最好的事情是为正在转码的输出文件创建一个 FileInputStream 并将其作为响应发送，但它不起作用。我的猜测是，这是因为在我尝试流式传输文件时正在写入文件。

无论如何要拦截FFMPEG中的输出文件参数并将其读入InputStream？在我看来，获取输入文件 A，将其转码为输出文件 B，然后将输出文件 B 流式传输回客户端，这似乎并不难。

```
ProcessBuilder pb = new ProcessBuilder("ffmpeg.exe", "-i", url, "file.mp3");
    Process p = pb.start();

    final InputStream inStream = p.getErrorStream();

    new Thread(new Runnable() {

    public void run() {
            InputStreamReader reader = new InputStreamReader(inStream);
            Scanner scan = new Scanner(reader);
            while (scan.hasNextLine()) {
                System.out.println(scan.nextLine());
            }
        }
    }).start();

    ServletOutputStream stream = null;
    BufferedInputStream buf = null;
    try {

        stream = response.getOutputStream();
        File mp3 = new File(file.mp3");

        //set response headers
        response.setContentType("audio/mpeg");

        response.addHeader("Content-Disposition", "attachment; filename=file.mp3");

        response.setContentLength(-1);

        //response.setContentLength((int) mp3.length());

        FileInputStream input = new FileInputStream(mp3);
        buf = new BufferedInputStream(input);
        int readBytes = 0;
        //read from the file; write to the ServletOutputStream
        while ((readBytes = buf.read()) != -1) {
            stream.write(readBytes);
        }
    } catch (IOException ioe) {
        throw new ServletException(ioe.getMessage());
    } finally {
        if (stream != null) {
            stream.close();
        }
        if (buf != null) {
            buf.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:00:13.377

FFmpeg 不必写入文件。它可以写入标准输出：

```
ffmpeg -i $input -f mp3 - 
```

`-`表示标准输出。由于没有文件名，因此您需要使用`-f`.

如果你这样调用它，你可以直接从`Process`'s读取 mp3 流`InputStream`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:02:03.140

我想到了。

诀窍不是在文件系统上创建文件并尝试将其流式传输回客户端，而是将 ffmpeg 输出通过管道传输到 Java 中的 InputStream 和 f-in 瞧！

# c# - 如何将字符串“增长”到想要的长度

> ID：12736706
> 
> 赞同：1
> 
> 时间：2012-10-04T22:04:28.450
> 
> 标签：c#

我正在尝试将字符串“增长”到所需的长度（即“ABCDE”，所需的长度为 7，填充变为“--ABCDE”、“-A-BCDE”、“-AB-CDE”...... ..，“ABCDE--”）。

当我尝试使用以下代码将“ABCDEFGH”填充到长度 16 时，代码将永远运行。

```
/// <summary>
    /// Pad a str to desired length
    /// </summary>
    /// <param name="s"></param>
    /// <param name="length"></param>
    /// <param name="pad"></param>
    /// <param name="Padded"></param>
    public static void PadToLength(string s, int length, char pad, ref List<string> Padded)
    {
        if (s.Length == length)
        {
            Padded.Add(s);
            return;
        }
        else if (s.Length > length)
        {
            return;
        }
        else
        {
            List<int> pos = GetExceptPos(s, pad.ToString());
            pos.Sort();

            int count = -1;
            foreach (int p in pos)
            {
                count++;

                // Pad left 
                string leftPadStr = s.Substring(0, p) + pad + s.Substring(p);
                PadToLength(leftPadStr, length, pad, ref Padded);

                // Pad right at the last pos
                if (count == pos.Count - 1)
                {
                    string rightPadStr = s + pad;
                    PadToLength(rightPadStr, length, pad, ref Padded);
                }
            }
        }
    }

        /// <summary>
    /// Find indexes for elements different from target str
    /// </summary>
    /// <param name="str"></param>
    /// <param name="excludeStr"></param>
    /// <returns></returns>
    private static List<int> GetExceptPos(string str, string excludeStr)
    {
        List<int> allIndexes = new List<int>();
        for (int i = 0; i < str.Length; i++)
        {
            allIndexes.Add(i);
        }

        return allIndexes.Except(str.IndexesOf(excludeStr)).ToList();
    } 
```

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:10:56.680

你不只是想做：`yourstring. PadLeft(8, '-')`或`PadRight`？

[http://msdn.microsoft.com/en-us/library/system.string.padleft(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.string.padleft(v=vs.71).aspx)

循环不是必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:24:40.000

我在 Windows 应用程序中为您编写了它。
我已经发表了评论，所以它会很清楚。
如果没有，那就问我；）

```
private void button1_Click(object sender, EventArgs e)
{
    //Starting Values
    var paddingLength = 7;
    var paddingCharacter = '-';
    var value = "ABCDE";

    //Create starting string value
    var startValue = value.PadLeft(paddingLength, paddingCharacter);

    //Create Char Array of string
    var charArray = startValue.ToCharArray();

    //New List
    var values = new List<String>();

    //Shifter and StartingShifter
    Int32 shifter;
    Int32 startingShifter;
    shifter = startingShifter = (paddingLength - value.Length) - 1;

    //Max Length of the Char array
    var maxLength = charArray.Length-1;

    //Total loops the for loop need to do
    var totalLoops = value.Length * (paddingLength - value.Length)-1;

    //Loop
    for (int i = 0; i <= totalLoops; i++)
    {
        //Swap the Characters
        SwapChar(charArray, shifter, shifter + 1);

        //Add value into list
        values.Add(new String(charArray));

        //Go on shifting or go to next character
        if (shifter + 1 == maxLength)
        {
            //Change the Max
            maxLength--;

            //Next -
            shifter = startingShifter = startingShifter - 1;

            ////FailSafe
            //if (shifter < 0)
            //{
            //    break;
            //}
        }
        else
        {
            //Next Array Value
            shifter++;
        }
    }
    //Set value in textbox
    textBox1.Text = String.Join(Environment.NewLine, values.ToArray());
}

private static void SwapChar(Char[] array, int position1, int position2)
{
    //
    // Swaps elements in an array. Doesn't need to return a reference.
    //
    Char temp = array[position1]; // Copy the first position's element
    array[position1] = array[position2]; // Assign to the second element
    array[position2] = temp; // Assign to the first element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:37:54.540

要完成@VRC 上面所说的，请使用以下代码：

```
 static void Main(string[] args)
    {
        var z = GetPermutations("ABCDEFGH", '-', 16);

        foreach (string s in z)
            Console.WriteLine(s);

        Console.ReadKey();
    }

    private static List<string> GetPermutations(string originalString, char padChar, int length)
    {
        if (length <= originalString.Length)
            return null;

        var list = new List<string>();
        int originalLength = originalString.Length;
        int ndx = 0;
        string beginString = originalString.PadLeft(length, padChar);
        string endString = originalString.PadRight(length, padChar);
        int lenDifference = endString.Length - originalString.Length;

        list.Add(beginString);
        while (lenDifference > 0)
        {
            while (ndx < originalLength)
            {
                beginString = SwapCharacters(beginString, lenDifference + ndx - 1, lenDifference + ndx);
                list.Add(beginString);
                ndx++;
            }

            ndx = 0;
            lenDifference--;
        }

        return list;
    }

    private static string SwapCharacters(string value, int position1, int position2)
    {
        char[] array = value.ToCharArray();
        char temp = array[position1]; 
        array[position1] = array[position2];
        array[position2] = temp; 
        return new string(array);
    } 
```

要使用代码，只需调用`GetPermutations()`函数。将原始字符串、要“填充”的字符和总长度传递给它。它将返回一个`List<string>`. 您可以遍历列表以获取所有字符串。

# ios - iOS 应用内购买：沙盒无效的产品 ID

> ID：12736712
> 
> 赞同：10
> 
> 时间：2012-10-04T22:05:13.170
> 
> 标签：ios, in-app-purchase, ios6, storekit

在我解决问题之前稍微奇怪的设置的背景：为客户开发一个应用程序，我们使用的 iTunes 开发人员帐户与最终将发布的用于开发和临时构建应用程序的帐户不同具有游戏中心和 IAP 集成。显然，我们最终将不得不在最终发布帐户上复制我们的设置，但这个问题似乎无关紧要。

问题是尝试在沙盒中测试应用内购买。我们在临时账户中没有任何税务/银行信息，它不是以我的名义设置的，所以我不能只添加我的。现在，每次我们发送一个带有产品标识符的 SKProductsRequest 时，我在临时应用程序帐户的 iTunes Connect 部分中添加的产品，它都会作为无效的产品标识符在响应中返回。

这个请求 where`identifiers`是一个带有我试图获取的字符串产品标识符的数组：

```
_productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithArray:identifiers]];
_productsRequest.delegate = self; 
```

而这个委托方法：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
   /*Other code for handling valid responses*/ 

    for (NSString *invalidProductId in response.invalidProductIdentifiers) {
        DLog(@"Invalid product id: %@" , invalidProductId);
    }
} 
```

返回标识符的此日志：

```
 -[InAppPurchaseManager productsRequest:didReceiveResponse:] Invalid product id: [Product ID That matches the one in ITC exactly] 
```

我知道 ITC 正在临时帐户中工作，因为我们所有的 GameCenter 沙盒集成都可以正常工作。

其他需要注意的事项：

*   在模拟器和多个设备上的结果相同。
*   退出 sim 卡和所有设备上的普通 iTunes/App Store 帐户。
*   尝试等待 24 小时，然后再试一次。
*   尝试添加不同的产品并尝试其标识符（尽管我没有在这个上等待 24 小时）。
*   看看这个：[解决应用内购买的无效产品 ID 问题？](https://stackoverflow.com/questions/7915327/resolving-invalid-product-id-issue-with-in-app-purchases)不幸的是，没有看到任何非常有用的东西。

在这一点上，我难住了。除了让设置这个临时账户的人添加他们的税务/银行信息之外，我还能做些什么来从 SKProductsRequest 中真正取回有效的产品吗？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-10T21:06:41.007

最后不得不把所有东西都转移到最终账户上，其中确实有银行和税务信息。一旦我在另一个帐户的应用程序中设置了具有相同名称的 IAP，返回无效产品 ID 的完全相同的代码就完全没问题了。

所以是的，您甚至需要银行和税务信息才能在沙盒中进行测试。嘘-瓮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-22T13:56:28.520

只是想确认 DesignatedNerd 所说的，关于必须与 Apple 签订付费应用协议才能进行测试。我昨天有过，我们使用我们的帐户在我们为客户做的应用程序上测试应用程序产品。经过大量的网络搜索和其他尝试，我碰巧注意到说我们没有达成协议的文字。我们在 itunesconnect 中输入了我们所有的银行详细信息，过了一会儿，消息消失了，我的应用内测试开始工作。

# scala - Play 2.0 在 Build.scala 中定义多个 templatesImport 或 routesImport

> ID：12736714
> 
> 赞同：0
> 
> 时间：2012-10-04T22:05:22.213
> 
> 标签：scala, playframework, playframework-2.0

我搜索了整个文档和互联网，以弄清楚如何在 Build.scala for Play 2.0.3 中向 templatesImport 或 routesImport 变量添加多个值。我似乎找不到任何东西，也找不到正确的 scala 语法。我被困在：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    templatesImport += "poc.model._"
    templatesImport += "views.tags._"
) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T05:00:37.497

在 2.1 快照上，但假设它是相同的：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    templatesImport ++= Seq("poc.model._", "views.tags._")
) 
```

对于子项目构建，您可能有一个基本模型 PlayProject 用于普通用户、角色、密码重置等。CRUD 操作，以及另一个 PlayProject 用于实际客户的业务模型，尝试时自然会出现冲突：

```
templatesImport ++= Seq("com.foo.model", "com.bar.model") 
```

所以导入整个命名空间`Seq("com.foo", "com.bar")`似乎是解决相同命名包的唯一方法（重命名包或输入整个包名并且根本不使用`templatesImport`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T07:07:21.523

我想你忘记了一个逗号。

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    templatesImport += "poc.model._", //new comma, no semicolon inference in parentheses like ()
    templatesImport += "views.tags._"
) 
```

# android - 谷歌 Nexus 7 显示它没有摄像头

> ID：12736715
> 
> 赞同：4
> 
> 时间：2012-10-04T22:05:22.393
> 
> 标签：android, android-camera, tablet

当我的应用在 Google Nexus 7 平板电脑上运行时，此标准 Android 测试返回 false 以查看设备是否配备了摄像头。

```
 PackageManager pm = this.getPackageManager();
    if(!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        // disable camera button
    } 
```

现在我意识到 Nexus 7 没有内置相机应用程序，但是当我尝试启动相机活动时，我使用以下内容（让用户可以选择其他应用程序）。

```
 File fTempCameraFullDirPath = new File(msTempCameraFullDirPath);
    Uri outputFileUri = Uri.fromFile( fTempCameraFullDirPath );
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    cameraIntent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );
    startActivityForResult(Intent.createChooser(cameraIntent, getString(R.string.select_camera_app)), REQUEST_CODE_CAMERA); 
```

现在显然我没有得到这个代码，因为相机测试失败并且我禁用了按钮，但似乎只要我在我的 Nexus 7 桌子上安装了相机应用程序，我就应该能够拍照。

有谁知道我可以用来在此平板电脑（或类似设备）上启用此功能的替代测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T22:10:53.163

你可以检查一下[`FEATURE_CAMERA_FRONT`](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_FRONT)，因为 Nexus 7 只有一个前置摄像头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T22:11:03.030

尝试检查`PackageManager.FEATURE_CAMERA_FRONT`as 和`FEATURE_CAMERA`，因为 Nexus 7 只有前置摄像头，而 Android 摄像头选择算法默认为后置摄像头。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-08T09:19:45.227

作为答案的更新：

从**API 级别 17**开始，您还可以检查[`PackageManager.FEATURE_CAMERA_ANY`](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_ANY)哪个指示设备是否有任何摄像头，无论其位置如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-07T09:30:21.170

查看[文档](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_CAMERA)，它说 FEATURE_CAMERA 与背对屏幕的相机有关，它本质上是后置相机。所以理所当然地它应该返回假。

# asp.net - 从网站项目写入事件日志

> ID：12736717
> 
> 赞同：1
> 
> 时间：2012-10-04T22:05:25.793
> 
> 标签：asp.net

我正在尝试将网站项目中的错误记录到 Windows 事件查看器，但没有运气。

我尝试在网站中添加另一个项目，其中包含写入事件日志并在网站项目中引用它的功能。如果我在页面 cs 文件中点击 using 关键字，则不会显示其他项目

这是正确的方法吗..？

如果是这样，在后面的 aspx 页面代码中我应该使用 System.configuration 并且每次我想写入事件查看器时，我必须调用我引用的类中的方法来处理它？

我想要这样的东西：

```
try{
..
}
catch(Exception ex){
   writeToLogFunction(exception source, exception name, exception  description);
} 
```

这是正确的方法吗？我以前从未处理过它，并感谢任何走过\示例..

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:16:15.970

那里有一些开源/免费的日志库。我用过这些，它们做得很好：

[Log4Net](http://logging.apache.org/log4net/)

[艾尔玛](http://code.google.com/p/elmah/)

该站点列出了很多日志库以及一些讨论如何处理日志的有用链接（在页面底部）

[.NET 日志工具和库](http://www.dotnetlogging.com/)

# c# - 秒表计时不同的原因是什么？

> ID：12736719
> 
> 赞同：1
> 
> 时间：2012-10-04T22:05:31.337
> 
> 标签：c#, asp.net, iis-7

我正在使用秒表启动和停止来找出 Web 服务的处理时间，但是当我刷新页面以便使用相同的参数进行另一个测试时，除了第二个和所有其他测试之外的所有数据带回不同的结果。但是当我重新启动 IIS 服务器时，它再次显示初始结果。

所以我的问题是为什么我第一次及时收到不同的结果？

顺便说一句，我用 C# 编写了 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:22:07.337

要了解为什么第一次会慢得多，请考虑第一次必须发生的事情：

1.  程序集必须从磁盘加载。
2.  代码将被 jitted，这意味着它必须从 IL 转换为机器码。
3.  必须解析页面 (.cshtml/.aspx)。解析后，它们的编译表示将存储在内存中，并在后续请求时立即可用。

一般来说，在您第二次加载页面时，这些都不会发生。第一次发生然后被缓存的可能还有无数其他事情。这就是为什么后续刷新通常会快得多的原因。

# c# - 如何使用 ASP .NET 创建对话框消息框？

> ID：12736720
> 
> 赞同：3
> 
> 时间：2012-10-04T22:05:40.927
> 
> 标签：c#, asp.net, dialog

在 WinForms 中，我可以这样做：

```
var msg = MessageBox.Show("Are you sure?", "WARNING!", MessageBoxButtons.YesNo, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button2);

if (msg == DialogResult.Yes)
{
    //do something
} 
```

如何在 ASP .NET/C# 中模仿上述内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:11:12.563

简短的回答是你不能。原因是你在服务器上执行的代码并没有直接映射到客户端。因此，您无法创建可在服务器上使用的交互式消息框来获取用户的响应。

您可以做的是使用客户端 jquery，然后根据他们的响应发出新请求。但是，这与在 WindowsForms 中使用 MessageBox 不同，因为它要求您让方法完全完成，然后根据全新的请求采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:07:09.540

您始终可以使用[JQuery 模态对话框](http://jqueryui.com/demos/dialog/)：

对话框定义：

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable">
   <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
      <span id="ui-dialog-title-dialog" class="ui-dialog-title">Dialog title</span>
      <a class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
   </div>
   <div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
      <p>Dialog content goes here.</p>
   </div>
</div> 
```

对话框打开（只是一个例子）：

```
$(foo).dialog({ autoOpen: false }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:08:53.267

您无法从服务器端显示对话框。您可以使用 JavaScript 执行此操作。如果你想要它的样式，我推荐使用[jQuery 的对话框](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T23:30:02.277

如果您使用的是 asp:LinkBut​​ton

```
<asp:LinkButton id="btnSubmit" runat="server" OnClick="btnSubmit_Click" /> 
```

在后面的代码中：

```
public void Page_Load(object sender, EventArgs e)
{
    this.btnSubmit.Attributes.Add("onclick", "javascript: return confirm('Are you sure?');");
}

public void btnSubmit_Click(object sender, EventArgs e)
{
    //Run code. User already confirmed to get here.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T22:17:50.357

你可以使用[这个](http://needim.github.com/noty/)jquery插件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T22:14:19.157

您可以使用 ASP.NET AJAX 来实现它

[http://www.asp.net/ajaxlibrary/act_ConfirmButton.ashx](http://www.asp.net/ajaxlibrary/act_ConfirmButton.ashx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-11T23:27:43.763

另一个解决方案是使用 Bootstraps 版本...我发现它很容易实现并且喜欢添加的效果。

我有一个链接按钮

```
 <asp:LinkButton ID="btnDelete"
          runat="server"
          CssClass="btn btn-lg btn-primary"
          Visible="true"
          ToolTip="Delete Task"
          data-toggle="modal"
          data-target="#DeleteModal">
          <span class="glyphicon glyphicon-trash"></span>
    </asp:LinkButton> 
```

和删除模态 div

```
<!-- Delete Modal Begin-->
<div class="modal fade" id="DeleteModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Delete Task</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete task?</p>
            </div>
            <div class="modal-footer">
                <asp:Button ID="Button1" runat="server"
                    OnClick="btnDelete_Click"
                    CssClass="btn btn-primary"
                    Text="Delete" />
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Delete Modal End --> 
```

[引导模式示例](https://www.w3schools.com/bootstrap/bootstrap_modal.asp)

[引导模态参考](https://www.w3schools.com/bootstrap/bootstrap_ref_js_modal.asp)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-08T21:28:33.263

这是如何显示对话消息的基本示例：

```
Page.RegisterStartupScript("UserMsg", "<script>alert('this is my message :) !');</script>"); 
```

# javascript - 如何使用 child_process.spawn 暂停媒体播放器？

> ID：12736723
> 
> 赞同：1
> 
> 时间：2012-10-04T22:05:52.040
> 
> 标签：javascript, node.js, stdin

我正在尝试使用 child_process.spawn 通过 node.js 程序控制[mplayer](http://www.mplayerhq.hu/DOCS/man/en/mplayer.1.html) [。](http://www.mplayerhq.hu/)

暂停后，我无法恢复播放。出于某种原因，`exit`即使 mplayer 尚未完成播放，也会发送一个事件。

我究竟做错了什么？

以下代码工作正常（我可以听到音乐播放），直到第二个暂停命令。

```
var spawn = require( 'child_process' ).spawn;
var mplayer;
var file = '/Users/snorpey/Music/Blink-182/Untitled/01 Feeling This.m4a';

mplayer = spawn( 'mplayer', [ file ] );
mplayer.on( 'exit', function(){ console.log( 'EXIT.' ); } );

setTimeout( pause, 5000 );
setTimeout( pause, 9000 );

function pause()
{
    console.log( 'PAUSE', mplayer.stdin );
    mplayer.stdin.write( 'p\n' );
} 
```

mplayer.stdin 的第一个输出如下所示：

```
{ _handle: 
   { writeQueueSize: 0,
     owner: [Circular],
     onread: [Function: onread] },
  _pendingWriteReqs: 0,
  _flags: 0,
  _connectQueueSize: 0,
  destroyed: false,
  errorEmitted: false,
  bytesRead: 0,
  _bytesDispatched: 0,
  allowHalfOpen: undefined,
  writable: true,
  readable: false } 
```

第二个是这样的：

```
{ _handle: null,
  _pendingWriteReqs: 0,
  _flags: 0,
  _connectQueueSize: 0,
  destroyed: true,
  errorEmitted: false,
  bytesRead: 0,
  _bytesDispatched: 2,
  allowHalfOpen: undefined,
  writable: false,
  readable: false,
  _connecting: false,
  _connectQueue: null,
  _idleNext: null,
  _idlePrev: null,
  _idleTimeout: -1 } 
```

我收到以下错误：

```
events.js:66
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: This socket is closed.
    at Socket._write (net.js:517:19)
    at Socket.write (net.js:509:15)
    at Object.pause [as _onTimeout] (/Users/snorpey/Sites/Development/mplayer/pause.js:14:16)
    at Timer.list.ontimeout (timers.js:101:19) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:54:01.490

在不尝试测试或调试的情况下，我会想到一些想法：

使用 mplayer 的从属模式。你可以通过`-slave`在启动时给它标志来做到这一点。有关更多信息，请参见[http://www.mplayerhq.hu/DOCS/tech/slave.txt](http://www.mplayerhq.hu/DOCS/tech/slave.txt)。

设置代码来显示 mplayers 想要告诉你的内容。可能比观察套接字状态更有意义。

```
var spawn = require( 'child_process' ).spawn;
var mplayer;
var file = '/Users/snorpey/Music/Blink-182/Untitled/01 Feeling This.m4a';

mplayer = spawn( 'mplayer', [ '-slave', file ] );
mplayer.on( 'exit', function () { console.log( 'EXIT.' ); } );

// obviously you'll want something smarter than just logging...
mplayer.stdout.on('data', function (data) { console.log('mplayer stdout: ' + data); });
mplayer.stderr.on('data', function (data) { console.log('mplayer stderr: ' + data); });

setTimeout( pause, 5000 );
setTimeout( pause, 9000 );

function pause() {
    console.log( 'PAUSE' );
    mplayer.stdin.write( 'pausing\n' );
} 
```

# teamcity - 使用 TeamCity 在 Vault 中标记构建

> ID：12736725
> 
> 赞同：1
> 
> 时间：2012-10-04T22:05:59.497
> 
> 标签：teamcity, sourcegear-vault

我的 VCS 是 Vault，我将 TeamCity 用于我的 CI。我想让 TC 在成功构建后将项目标记在保险库中，但文档对如何执行此操作不是很清楚。

实际的 TC 文档甚至没有将它列为受标签功能支持，但插件的开发页面说它支持它。我担心的是，如果我打开标签，它将标记整个存储库，而不仅仅是签出规则中指定的单个项目。

这个事情谁有经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:50:17.140

**TeamCity**（7.1 及更早版本）不支持 Vault 标签，根据：[http](http://confluence.jetbrains.net/display/TCD7/VCS+Labeling) ://confluence.jetbrains.net/display/TCD7/VCS+Labeling 。

我想要相同的功能，请参阅[http://youtrack.jetbrains.com/issue/TW-11066](http://youtrack.jetbrains.com/issue/TW-11066)

...

显然 Vault 标签是受支持的，但没有记录，请参阅 TW-11066 的结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:51:35.193

如果您在应用标签时使用 Vault 插件，则它只会应用于您的结帐规则中设置的内容。

# backbone.js - 用 jasmine 测试主干视图

> ID：12736727
> 
> 赞同：1
> 
> 时间：2012-10-04T22:06:21.553
> 
> 标签：backbone.js, ruby-on-rails-3.1, jasmine, jasmine-jquery

我正在尝试用茉莉花测试我的主干观点。我使用下划线库为主干视图生成模板。

出于测试目的，我使用 jasmine jasmine-jquery

由于视图已嵌入 ruby​​，因此我无法在 jasmine 测试中加载固定装置。这是我的代码

主干视图

```
AlbumView = Backbone.View.extend({
    template: _.template($('#album-template').html()),
    render: function() {
        $('#albums').append(this.template(this.model.attributes));
    }
}); 
```

此视图使用以下模板

专辑模板album_template.html.erb

```
<script type="text/html" id="album-template">
  <a href="<%%= url %>" class="album <%%= is_owner %>">
        <%% if (viewable) { %>
            <span class="album-cover">
                <span class="photo" style="background-image:url('<%%= small_thumbnail_url %>'); width: 160px; height: 160px;">
                    <span class="glossy-overlay"></span>
                </span>
            </span>
            <%% } %>
            <h3><%%= name %></h3>
            <p>
                <%%= number_of_photos %>
            </p>
    </a>
</script> 
```

骨干模型

```
var Album = Backbone.Model.extend({
    initialize: function() {
        this.view = new AlbumView({model: this});
    },
    render: function() {
        this.view.render();
    }
}); 
```

茉莉花测试-album_spec.js

```
describe('Album view', function(){

    beforeEach(function() {

        var album = new Album({
            "name": "Photo Stream",
             "url": "/albums/1",
            "id": "2",
            "number_of_photos": "172 Photos",
            "small_thumbnail_url": "/assets/sections/albums/covers/auto.png",
            "viewable": true,
            "is_owner": "owner"
        });

        loadFixtures('albums_fixture.html');

        this.view = new AlbumView();
        this.view.model = album;
        // loadFixtures('albums_fixture.html');

    });

    describe("Rendering", function() {

        it ("produces the correct HTML", function() {

            this.view.render();

            expect($("#albums")).toExist();
            expect(this.view.template).toBeDefined();

        });

    });

}); 
```

此规范加载以下夹具 - album_fixture.html

```
<div id="albums"> </div>

<script type="text/html" id="album-template">
  <a href="<%%= url %>" class="album <%%= is_owner %>">
        <%% if (viewable) { %>
            <span class="album-cover">
                <span class="photo" style="background-image:url('<%%= small_thumbnail_url %>'); width: 160px; height: 160px;">
                    <span class="glossy-overlay"></span>
                </span>
            </span>
            <%% } %>
            <h3><%%= name %></h3>
            <p>
                <%%= number_of_photos %>
            </p>
    </a>
</script> 
```

这个测试失败了

期望（this.view.template）.toBeDefined（）；

当此测试通过时，夹具正在加载 expect($("#albums")).toExist();

我的问题是如何加载具有嵌入式 ruby​​ 视图的固定装置？我能够成功测试模型和集合，但在测试视图时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T22:25:16.607

这一行：

```
template: _.template($('#album-template').html()) 
```

in your`AlbumView`将在该脚本文件加载到页面中时执行。由于在规范开始执行之前，fixture 不会被添加到页面中，因此`album-template`script 标签还没有被添加到 DOM 中。

如果您将`template`属性重写为返回调用结果的方法，`_.template`那么在您实际尝试调用模板之前，它不会查找脚本标记。这可能看起来像：

```
AlbumView = Backbone.View.extend({
    template: function() {
        return _.template($('#album-template').html());
    },
    render: function() {
        $('#albums').append(this.template()(this.model.attributes));
    }
}); 
```

诚然，这有点恶心。另一种选择是将下划线模板设置为资产管道提供的资产，并在加载视图之前让 jasmine-gem 将其包含到页面中。

# git - `git remote prune` 和 `git branch -d -r` 之间的区别

> ID：12736728
> 
> 赞同：1
> 
> 时间：2012-10-04T22:06:22.047
> 
> 标签：git, version-control

据我了解，这两个命令可以删除远程跟踪分支。它们之间有什么区别吗？

*   `git remote prune <branch_name>`
*   `git branch -d -r <branch_name>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:46:09.193

是的。但是您可以向自己证明：复制您的 git 存储库并在每个副本中运行每个命令。然后对这些存储库中的两个 .git 文件夹进行比较。

您的 prune 命令需要远程名称，而不是分支名称。这将删除所有不在指定远程的远程跟踪分支。您的 branch -d -r 参数应该是`<remote>/<branch_name>`.

# ruby-on-rails - 为什么闪存在新请求上持续存在？

> ID：12736733
> 
> 赞同：0
> 
> 时间：2012-10-04T22:06:43.710
> 
> 标签：ruby-on-rails, ruby, flash

我的控制器中有以下代码：

```
 def show
    @activity = current_user.activities.find(params[:id])
    if graph.good_data?(params)
      graph.time_frame(params)
    else
      flash[:error] = "Please enter valid data."
      graph.default
    end
  end 
```

当我输入无效数据时`flash[:error]`，会收到一条消息，并相应地显示所有内容。如果我在输入无效数据后输入有效数据，则操作按预期执行。`graph.time_frame(params)`它的工作。但是，该`flash[:error]`消息在下一个请求中仍然存在。如果我再次输入有效数据，`flash[:error]`消息就会消失。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:09:32.890

使用`flash.now[:error]`，它专门针对这种情况。

# jquery - 删除 div 并在另一个 div 之后追加

> ID：12736736
> 
> 赞同：0
> 
> 时间：2012-10-04T22:06:52.867
> 
> 标签：jquery, append, removeclass

我想重新排列我的 div 的顺序。

这是我的结构：

```
 <div class="span8 inner-left" style="clear:both;">
    <div class="span3" style="text-align:right;"></div>
  </div>
  <div id="moreread" class="span4 inner-left"></div> 
```

这就是我希望我的结果是：

```
 <div class="span8 inner-left" style="clear:both;">
     <div class="span3" style="text-align:right;"></div>
     <div id="moreread" class="span4 inner-left"></div>
  </div> 
```

这不起作用：

```
$(this).find('#moreread').after(".span3"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T22:10:13.250

您可以使用`appendTo`方法：

```
$('#moreread').appendTo('.span8'); 
```

请注意，您的标记无效，您应该关闭您的 div 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:12:01.937

你想`.insertAfter('.span3')`要么`.appendTo('.span8')`

前者总是把它直接放在 之后`.span3`，而后者总是让它成为最后一个孩子`.span8`——在这种情况下，两者是等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:12:52.740

HTML：

```
<div class="span8 inner-left" style="clear:both;">
    A
    <div class="span3" style="text-align:right;">B</div>
</div>
<div id="moreread" class="span4 inner-left">C</div> 
```

jQuery：

```
$('#moreread').insertAfter('.span3'); 
```

小提琴：http: [//jsfiddle.net/gromer/WD976/1/](http://jsfiddle.net/gromer/WD976/1/)

# linux - 搜索不适合特定给定字符集的字符

> ID：12736741
> 
> 赞同：1
> 
> 时间：2012-10-04T22:07:14.083
> 
> 标签：linux, ubuntu, grep

我想知道如何 grep 所有不适合你想要给它的字符集的字符。

例如，假设我有一个包含以下文本的文件

```
XXXXX0000000HelloXXXXXX
MyXXXName0000Is00000000
XXXXXJamesXXX0X0X0X0XXX 
```

我希望它以其他方式打印出“HelloMyNameIsJames”或那些字符（如果它以每行一个字符的形式出现，我会很好）。

任何帮助将不胜感激！Raymosrunerx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:08:43.460

```
tr -d X0 < input 
```

输出：

```
Hello
MyNameIs
James 
```

要删除行尾：

```
tr -d 'X0\n' < input 
```

输出

```
HelloMyNameIsJames 
```

（没有尾随行结束）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:10:28.467

另一种解决方案，每行一个字符，使用`grep`（如果您`grep`支持`-o`）：

```
grep -o '[^X0]' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:17:27.423

如果这些行包含在文件 testdata 中，则以下命令将分别打印一行，如下所示：

```
sed -e 's/[0X]//g' testdata | xargs
Hello MyNameIs James 
```

希望这能满足您的需求！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T22:53:01.047

如果您希望每行一个单词，这是一种使用方法`GNU grep`：

```
grep -oP '(?<=[0X]|\b)[^0X]+(?=[0X]|\b)' file.txt 
```

结果：

```
Hello
My
Name
Is
James 
```

你可以`sed`用来整理你的输出：

```
< file.txt grep -oP '(?<=[0X]|\b)[^0X]+(?=[0X]|\b)' | sed ':loop; N; $!b loop; s/\n/ /g' 
```

结果：

```
Hello My Name Is James 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T22:09:26.207

尝试：

```
sed -e 's/[X0]//g' input 
```

`grep`不会为你删除东西。

# objective-c - 在这种情况下我应该如何使用 getter 方法？

> ID：12736742
> 
> 赞同：-1
> 
> 时间：2012-10-04T22:07:27.353
> 
> 标签：objective-c, arrays, comparison, getter

我有一个包含两个类的程序（充当游戏）。第一个类生成一个字符数组，第二个类让用户尝试用他们自己的字符数组猜测该数组中的内容。当两个类连接时，第一类中必须有一个 getter 方法，以便将计算机生成的数组中的值与第二类中玩家制作的数组进行比较。这是空的 getter 方法：

```
- (char) getElementAtIndex:(NSInteger)i
{
} 
```

我需要 getter 方法在我的位置返回字母，以便在另一个类中它可以用于与 if 语句中的比较，例如

```
if([_playerguess objectAtIndex:i]==[self.colorarray getElementAtIndex: i] ) 
```

我该怎么做呢？我知道我必须返回一些东西，但到目前为止我尝试过的代码让我失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:05:53.173

没有足够的信息来完全理解这个问题，但如果我假设 colorarray 有一个属性

```
@property (strong,nonatomic) char[] compData;
- (char) getElementAtIndex:(NSInteger)i; 
```

那我会认为

```
- (char) getElementAtIndex:(NSInteger)i{
    return self.compData[i];
} 
```

会成功的。

# python - Python：简化继承方法

> ID：12736743
> 
> 赞同：0
> 
> 时间：2012-10-04T22:07:32.583
> 
> 标签：python, class, inheritance, subclass, factory

我有这样的代码：

```
class Base:
  def do( self ):
    self._member1 = 0
    self._member2 = 1

class Derived1(Base):
  def do(self):
    Base.do(self)
    self._member3 = 0
    self._member4 = 1

class Derived2(Base):
  def do(self):
    Base.do(self)
    self._member3 = 2
    self._member4 = 3

class Derived3(Base):
  def do(self):
    Base.do(self)
    self._member3 = 9
    self._member4 = 3 
```

等等这是我所做的：

```
class Base(object):
  '''Base class.'''
  def do(self):
    self._member1 = 0
    self._member2 = 1

class Derived1(Base): pass
class Derived2(Base): pass
class Derived3(Base): pass
class Derived4(Base): pass

class DerivedFactory(object):
  '''Factory to create derived classes.'''
  members = \
  {
    1: (Derived1, 0, 1),
    2: (Derived2, 4, 5),
    3: (Derived3, 6, 7),
    4: (Derived4, 8, 9),
  }

  def do(self, key=1):
    derived = self.members[key][0]()
    derived.do() # Perform method from Base
    derived._member3 = self.members[key][1]
    derived._member4 = self.members[key][2]
    print(derived)
    print('\t%s' % derived.__dict__)

if __name__ == '__main__':
  factory = DerivedFactory()
  for key in range(1, 5):
    derived = factory.do(key) 
```

然而，它并不像你看到的那样完美。我需要声明 Derived1、Derived2 等。而且它似乎过于复杂。您对如何改进此代码有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:21:42.423

据我所知，您只是对减少重复代码感兴趣，这是一个与您的顶级代码等效的选项：

```
class Base:
    def do( self ):
        self._member1 = 0
        self._member2 = 1

def make_do(a, b):
    def do(self):
        Base.do(self)
        self._member3 = a
        self._member4 = b
    return do

class Derived1(Base):
    do = make_do(0, 1)

class Derived2(Base):
    do = make_do(2, 3)

class Derived3(Base):
    do = make_do(9, 3) 
```

Oren 在评论中建议的较短版本（请注意，要使其正常工作，`Base`需要是新样式的类）：

```
class Base(object):
    def do( self ):
        self._member1 = 0
        self._member2 = 1

def make_do(a, b):
    def do(self):
        Base.do(self)
        self._member3 = a
        self._member4 = b
    return do

def make_derived(name, a, b):
    return type(name, (Base,), {'do': make_do(a,b)})

Derived1 = make_derived('Derived1', 0, 1)
Derived2 = make_derived('Derived2', 2, 3)
Derived3 = make_derived('Derived3', 9, 3) 
```

这是一个装饰器版本，因为它在评论中被要求：

```
class Base(object):
    def do( self ):
        self._member1 = 0
        self._member2 = 1

def add_do(a, b):
    def do(self):
        Base.do(self)
        self._member3 = a
        self._member4 = b
    def deco(cls):
        return type(cls.__name__, (Base,), {'do': do})
    return deco

@add_do(0, 1)
class Derived1(Base): pass

@add_do(2, 3)
class Derived2(Base): pass

@add_do(9, 3)
class Derived3(Base): pass 
```

另一个装饰器版本，它覆盖子类`do`而不是创建新类型（它还允许您使用旧式类）：

```
class Base:
    def do( self ):
        self._member1 = 0
        self._member2 = 1

def add_do(a, b):
    def deco(cls):
        original_do = cls.do
        def do(self):
            original_do(self)
            self._member3 = a
            self._member4 = b
        cls.do = do
        return cls
    return deco

@add_do(0, 1)
class Derived1(Base): pass

@add_do(2, 3)
class Derived2(Base): pass

@add_do(9, 3)
class Derived3(Base): pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:31:10.877

如果您只是将类用作数据容器，并使用对数据进行操作的方法，那么使用不同的模式可能会更好：

```
from collections import namedtuple

Base = namedtuple("Base", ["member1", "member2"])
Derived = namedtuple("Derived", Base._fields + ("member3", "member4"))

def do(base_or_derived):

    print "Member1:", base_or_derived.member1
    print "Member2:", base_or_derived.member2

    if not isinstance(base_or_derived, Base):
        print "Member3:", base_or_derived.member3
        print "Member4:", base_or_derived.member4

if __name__ == "__main__":
    base = Base(0, 1)
    derived1 = Derived(0, 1, 0, 1)
    derived2 = Derived(0, 1, 2, 3)
    derived3 = Derived(0, 1, 9, 3)

    for item in [base, derived1, derived2, derived3]:
        do(item) 
```

# sql - 在 Excel 中从 SQL 绘制 Perfmon 数据

> ID：12736748
> 
> 赞同：0
> 
> 时间：2012-10-04T22:07:53.233
> 
> 标签：sql, sql-server, excel

我正在将我们的一些邮箱服务器的性能数据从 perfmon 捕获到 SQL 中。一切都很好。我可以查询数据等。

SQL 表架构是这样的：

```
CREATE TABLE [dbo].[Perfmon_MBX]
(
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Server] [varchar](50) NULL,
    [ObjectName] [varchar](100) NULL,
    [CounterName] [varchar](100) NULL,
    [InstanceName] [varchar](100) NULL,
    [Value] [decimal](18, 3) NULL,
    [DateTime] [datetime] NULL
) 
```

这是我正在运行以提取数据的典型查询：

```
SELECT
Server,
ObjectName,
CounterName,
InstanceName,
Value,
DateTime
FROM Perfmon_MBX
WHERE ObjectName = 'logicaldisk'
AND CounterName = 'avg. disk sec/read'
AND InstanceName LIKE 'd:\databasefolder\dag1%'
AND Server = 'mailboxserver.domain.com'
AND DateTime > '2012-10-04 09:00:00'
AND DateTime < '2012-10-04 09:20:00'
ORDER BY InstanceName, DateTime 
```

数据就像我在这里上传的这个 .csv 文件一样：

[http://ge.tt/1M7utuO/v/0?c](http://ge.tt/1M7utuO/v/0?c)

我遇到的问题是每个数据库（在 InstanceName 列中）需要在图表上有不同的系列或线条。

如果不手动添加所有 10 系列，我看不到一种简单的方法，这有点浪费时间，与现实相比，这个例子是一个缩减/简单的例子。

谁能帮助我使用 Excel 更轻松地绘制这些数据？

我是否需要以某种方式调整我的 SQL 查询，或者在 Excel 中是否有一个简单的方法可以做到这一点，而我完全错过了？

如果您需要更多信息，请询问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:16:08.243

最后，我使用 Excel 中的数据透视表完成了此操作，以防其他人想知道如何执行此操作！

# ruby - 为事实木偶定制事实

> ID：12736749
> 
> 赞同：3
> 
> 时间：2012-10-04T22:08:02.677
> 
> 标签：ruby, puppet, facter

尝试编写自定义因子模块：

```
Facter.add("something_status") do
  setcode do
    $string_to_parse = Facter::Util::Resolution.exec('somecommand --print ')
    ... do something to string
    return something-new
  end
end 
```

对 ruby​​ 来说非常新……用什么做这件事的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T00:16:14.470

你离这样做不远了。你不需要在变量名之前使用 $ 并且你不应该以 return 结尾。范围内的最新 var 将由 Facter 检索。

下面是一个示例代码，它分析 uname 输出并返回一个带有关于内核版本和 ipv6 支持的字符串的事实。

这只是一个例子，但它有效，只是尝试过。

```
Facter.add("customer") do
  setcode do
    kernel_release = Facter::Util::Resolution.exec('/bin/uname -r')
    # Get version
    if kernel_release =~ /^3.2/
      answer = "Latest Kernel"  
    elsif kernel_release =~ /^3.0/
      answer = "3.0 Kernel"
    elsif kernel_release =~ /^2.6/
      answer = "Decent Kernel"
    else 
      answer = "Unknown Kernel"
    end
    if answer =~ /ipv6/       
      answer += " with IPV6 Support"
    else 
      answer += " without IPV6 Support"
    end
  end
end 
```

祝你好运！

一些对您有用的链接：[Ruby Wikibooks Control Structures](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Control_Structures)，[更多 ruby​​ 信息](http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/syntax.html)

# directx - 编写非常简单的 HLSL 像素着色器时出错

> ID：12736750
> 
> 赞同：0
> 
> 时间：2012-10-04T22:08:05.750
> 
> 标签：directx, shader, hlsl, slimdx, pixel-shader

我正在编写我的 SlimDX 应用程序来测试人类视觉系统的颜色对比敏感度阈值。受试者被呈现一个与背景对比度低的大字母，并要求识别该字母。但是，我需要能够显示更多颜色，然后可以使用简单的每通道 8 位颜色深度。（即 RGB 值 0-255）。我计划实现这一点的方法是通过一个简单的“抖动”算法实现为 HLSL 像素着色器。基本上，如果请求 slimDX 将文本渲染到颜色为 Color4( 0.55f, 0.55f, 0.55f ) 的表面，该颜色对应于 ( 140.25 , 140.25 , 140.25 ) 的 rgb 值，我希望每个像素的每个颜色通道都有有 25% 的机会设置为 141，有 75% 的机会设置为 140。
但是，在尝试使用 fxc 进行编译时，我的原型着色器代码出现错误。我在编译时得到一个非法字符代码，我不知道为什么。另外，如果您是 HLSL 专家，请查看我的代码并发表任何让您印象深刻的评论。注意我从这个问题的答案中得到了 HLSL 随机函数。 [我可以在像素着色器中生成一个随机数吗？](https://stackoverflow.com/questions/5149544/can-i-generate-a-random-number-inside-a-pixel-shader)

下面是我的着色器代码。如果我的第一个 HLSL 代码有很多错误，请原谅我：

```
float4 DitherByChance(float2 coords : TEXCOORD0) : COLOR0
{
    float4 newColor;    // The pixel color to return
    float4 oldColor = tex2D(s0, coords);

    // Note I know that as the code stands now rCutOff = gCutOff = bCutOff I will sort a fix for this out later
    float rCutOff = random(coords);     // A random float that determines if the red channel will be rounded up or down
    float gCutOff = random(coords);     // A random float that determines if the green channel will be rounded up or down
    float bCutOff = random(coords);     // A random float that determines if the blue channel will be rounded up or down

    float rPercentChance = frac(oldColor.r * 255);  //Chance to round red channel up
    float gPercentChance = frac(oldColor.g * 255);  //Chance to round green channel up
    float bPercentChance = frac(oldColor.b * 255);  //Chance to round blue channel up

    //In the code below (1/255) is the floating point represntaion of an incress of one on the 0-255 RGB scale

    if (rCutOff <= rPercentChance) newColor.r = oldColor.r + ((1 - rPercentChance) / 255);  //Bump up one r value
    else newColor.r = oldColor.r - rPercentChance * (1 / 255);                  //Bump down to ensure r is not rounded up

    if (gCutOff <= gPercentChance) newColor.g = oldColor.g + ((1 - gPercentChance) / 255);  //Bump up one g value
    else newColor.b = oldColor.b - bPercentChance * (1 / 255);                  //Bump down to ensure g is not rounded up

    if (bCutOff <= bPercentChance) newColor.b = oldColor.b + ((1 - bPercentChance) / 255);  //Bump up one b value
    else newColor.b = oldColor.b - bPercentChance * (1 / 255);                  //Bump down to ensure b is not rounded up

    return newColor;
}

// Input: It uses texture coords as the random number seed.
// Output: Random number: [0,1), that is between 0.0 and 0.999999... inclusive.
// Author: Michael Pohoreski
// Copyright: Copyleft 2012 :-)
float random( vec2 p )
{
  // We need irrationals for pseudo randomness.
  // Most (all?) known transcendental numbers will (generally) work.
  const vec2 r = vec2(
    23.1406926327792690,  // e^pi (Gelfond's constant)
     2.6651441426902251); // 2^sqrt(2) (Gelfond–Schneider constant)
  return fract( cos( mod( 123456789., 1e-7 + 256\. * dot(p,r) ) ) );  
} 
```

**编辑：** 在下面的答案的帮助下，我离解决方案有点近了，但仍然遇到一些问题。我接受了 catflier 的评论，即我借用的随机函数是用 GLSL 而不是 HLSL 编写的。我不得不将 vec2 更改为 float2 并将随机函数放在顶部。除此之外，我还必须编写一个 mod 函数，因为 GLSL mod() != HLSL fmod。并且 GLSL fract() 已更改为 HLSL frac()。我还有一个问题，我的文本文件是用 UTF-8 编码的，我猜这会导致 fxc 出现一些问题。重新编码为 ANSI 后，我能够得到一些更好的错误消息。但是，我仍然遇到一些问题。

我尝试使用`fxc /Zi /E DitherByChance DitherByChance.fx`以及编译，`fxc /Zi /E DitherByChance /LD DitherByChance.fx`因为我的目标是DX9，但我两次都出现以下错误：

`undeclared indentifier 's0' error`从这条线`float4 oldColor = tex2D(s0, coords);`

我不确定这个 s0 参数到底是什么，我刚刚在另一个着色器示例中看到了它。我看到另一个例子，有人声明了一个 Global sampler2D 变量并使用它而不是 s0 所以我尝试了这个：

```
sampler2D Tex0;
...
.... 
.....
float4 oldColor = tex2D(Tex0, coords); 
```

但是现在当我运行时`fxc /Zi /E DitherByChance /LD DitherByChance.fx`出现以下错误：

`vs_2_0 target does not support texture lookup`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:59:47.663

首先，您需要在随机函数中将 vec2 替换为 float2，因为 vec2 是 glsl 语法。

然后你的随机函数应该放在你的 PixelShader (c-style) 之上。

您的着色器现在应该可以编译，如果没有，请发布错误消息。

从最新位编辑：

```
sampler2D Tex0; 
```

是一个采样器单元，你需要将它绑定到你的纹理，因为采样器会告诉如何过滤它（线性/点），并解决它（包裹/夹......）

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb509644(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509644(v=vs.85).aspx)

由于您编译像素着色器，因此您需要使用 fxc /T ps_3_0，因为您编译为像素着色器，而不是顶点着色器。

# google-app-engine - 是否可以直接从 Apps 脚本访问 Secure Data Connector

> ID：12736765
> 
> 赞同：1
> 
> 时间：2012-10-04T22:09:44.843
> 
> 标签：google-app-engine, google-apps-script, google-apps

是否可以或是否可以直接从 Apps 脚本访问安全数据连接器协议，而不必首先绘制到 Google 电子表格或搭载 App Engine 应用程序设置来传输私人数据？

我想使用 Apps 脚本来帮助将各种“仪表板”驱动到我们的私人服务器。

我已经使用电子表格方法成功连接到 SDC，并且鉴于它有效，我确信我可以设置一个 App Engine 应用程序来做同样的事情。如果有一个可供 Apps Script 使用的 SDC 服务会更好。

'#google-secure-data-connector

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:29:24.933

如果您使用 Apps 脚本来访问在您公司的 Intranet 中找到的数据，您可以使用以下标志：`{useIntranet:true}`

```
<? var response = UrlFetchApp.fetch(url , {useIntranet:true}); ?> 
```

这是一个使用 UrlFetchApp 的示例，标志非常简单。我不确定您的用例是什么，但这将允许您访问网络上托管的数据。

# c++ - 连接网格的数据结构？

> ID：12736766
> 
> 赞同：0
> 
> 时间：2012-10-04T22:09:46.930
> 
> 标签：c++, data-structures

假设我有一个 9 点的网格：

```
1       2     3

4       5     6

7        8    9 
```

每个点/节点都可以连接到其他节点以形成段：

```
1       2     3
|
|
4       5     6
|       |
|       |
|       |
7-------8-----9 
```

在此图中，1 连接到 4，4 连接到 1 和 7，7 连接到 4 8，8 连接到 5 和 9，5 连接到 8，9 连接到 8。

如果我只是这样渲染：

```
for each node n1
for each node n2 in n1
create segment from n1 to n2. 
```

这会产生很多重复的段。

有没有办法让我只创建必要数量的段？

我的目标是能够说，断开 1 和 4 之间的链接，将 1 和 5 连接在一起并重新生成网格。

我正在尝试生成一个简单的城市。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:13:39.870

您的 ASCII 图形中所示的结构称为[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)。特别是，您正在尝试生成[平面图](http://en.wikipedia.org/wiki/Planar_graph)。有几种常见的方法可以在计算机程序中表示[图形数据结构。](http://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29)

这些 Wikipedia 链接非常注重数学理论，但我希望它们对您有所帮助。

# sql-server-2008 - SQL Server 查询的限制（用于分页）

> ID：12736770
> 
> 赞同：0
> 
> 时间：2012-10-04T22:10:02.087
> 
> 标签：sql-server-2008, pagination, limit

我有一个大型查询，可以根据搜索拉回联系人。这是查询的简化示例。（表和字段名称已更改以保护无辜。）

```
SELECT DISTINCT TOP 20 DB1.FieldID, DB1.Field1, DB.Field2, DB.Field3,
DB2.Field88, DB3.Field77
FROM tblLamp DB1
LEFT JOIN tblSand DB2 ON DB2.FieldID = DB1.FieldID
LEFT JOIN tblLime DB3 ON DB3.FieldID = DB1.FieldID
WHERE (Field1 LIKE 'hotwet%' ESCAPE '!' OR Field2 LIKE 'maarten%' ESCAPE '!')
AND DB2.Field99 != '1111-2222-3333-4444'
AND (DB1.CreatorID IN (...) OR DB1.OwnerID IN (...) OR DB1.FieldID IN (...))
ORDER BY DB1.Field1 ASC, DB1.Field2 ASC 
```

我在网上找到了很多使用 ROW_NUMBER() 的示例，但我无法让它与这个查询一起工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:33:00.827

您可以使用这个小示例作为指导：

```
declare @test table(id int, name varchar(255));
insert into @test
  select 1, 'one' union
  select 2, 'two' union
  select 3, 'three' union
  select 4, 'four' union
  select 5, 'five' union
  select 6, 'six';

select
  *
from
(
  -- select the columns you need and include row number to enable limit 
  select
    name,
    row_number() over(order by id) as rownumber
  from
    @test
) v1
where
  rownumber between 2 and 4 
```

# c - C 结构被双重包含

> ID：12736773
> 
> 赞同：0
> 
> 时间：2012-10-04T22:10:09.333
> 
> 标签：c, compiler-errors, header-files

我想不通这个...

我有 object.h 看起来像这样

```
struct basicObject {
       int x, y;
}

void objectSet (int x, int y); 
```

现在我需要在我的主文件中包含 object.h，但我还需要在另一个名为 svg.c 的文件中包含 objectSet 函数和结构

svg.h 看起来像

```
#define OUTPUT_FILE "output.svg"
#include "object.h"

void saveSVG (basicObject item); 
```

但我的主文件还包括 svg.h！所以我得到了 struct basicObject 的“重新定义错误”。这显然与 object.h 被包含两次有关。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:11:58.833

如果你打算多次引用同一个头文件，你应该使用[包含保护，但你只需要在第一次包含它。](http://en.wikipedia.org/wiki/Include_guard)`#include`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:12:11.330

有两个主要选项。在你的头文件中，做

```
#pragma once 
```

或将整个头文件包装在：

```
#ifndef MY_SVG_H
#define MY_SVG_H

... your code ...

#endif 
```

进一步阅读：

*   [维基百科：编译指示一次](http://en.wikipedia.org/wiki/Pragma_once)
*   [维基百科：包括警卫](http://en.wikipedia.org/wiki/Include_guard)

# c# - RxUI - 如何在 WPF 的数据输入表单中使用 ReactiveValidatedObject

> ID：12736777
> 
> 赞同：0
> 
> 时间：2012-10-04T22:10:26.167
> 
> 标签：c#, wpf, validation, reactiveui

我是 RxUI 的新手，来自 Jounce，试图以最好的方式进行现场验证。似乎无法找到有关在 RxUI 中进行验证的最佳方式的文档。

您有一些从 ReactiveValidatedObject 派生的视图模型。

它具有以下属性：

```
 [Required]
    [StringLength(9,MinimumLength=9)]
    public string CUSIP
    {
        get { return _CUSIP; }
        set { this.RaiseAndSetIfChanged(x => x.CUSIP, value); }
    } 
```

当我运行保存命令时，如何确保验证错误显示在我的 UI 中出现错误的控件上？

```
 this.SaveCommand = new ReactiveCommand();
        this.SaveCommand.Subscribe(_ =>
            {
            }); 
```

...我习惯于 Jounce 和做类似的事情：

```
 private string _oldPassword;
    public string OldPassword
    {
        get { return _oldPassword; }
        set { _oldPassword = value;
        ValidateOldPassword();
        RaisePropertyChanged(() => OldPassword);
            }
    }

    private void ValidateOldPassword()
    {
        ClearErrors(() => OldPassword);
        if (string.IsNullOrEmpty(OldPassword))
            SetError(() => OldPassword, "Old Password is required.");
        if (OldPassword != UserContext.Password)
            SetError(() => OldPassword, "Old Password is incorrect.");
    } 
```

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:58:18.537

因此，在这种情况下，执行此操作的“正确方法”是 via `UserError`：

```
var disp = UserError.RegisterHandler(error => {
     // TODO: Make this better :) 
     MessageBox.Show(error.ErrorMessage);
     return null;
});

// Unregister the error handler for the Window once it closes
this.OnClose += (o,e) => disp.Dispose();

this.SaveCommand
    .Where(_ => IsObjectValid())
    .Subscribe(_ -> SaveTheObject());

this.SaveCommand
    .Where(_ => !IsObjectValid())
    .Subscribe(_ -> UserError.Throw("The form is invalid")); 
```

# javascript - 有什么优雅的方法可以阻止用户创建本地副本？

> ID：12736791
> 
> 赞同：0
> 
> 时间：2012-10-04T22:11:19.193
> 
> 标签：javascript

我即将发布一个单页应用程序（html + css + js）。

该应用程序没有外部依赖，这意味着用户可以下载所有文件并将它们安装在单独的位置。根据过去的经验，这是一个糟糕的情况，至少有两个原因：

*   用户不会收到推送到主要位置的更新
*   他们倾向于调整他们的本地副本，我最终不得不支持原始代码的多种变体

有没有一种优雅的方法来防止这种情况？我正在考虑一些强有力的方法，比如在代码中隐藏日期检查，但我不想走得太远而影响业务......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:32:56.493

首先，您应该拒绝支持最终用户已经调整过的代码。真的。

其次，如果人们正在下载您的应用程序以离线使用，那么也许您应该通过向您的应用程序添加离线模式来接受这一点。这将阻止人们手动下载文件（因为它在未连接时仍然有效）并且他们仍然会在可用时获得更新。查看[HTML5 的各种离线功能，包括缓存清单](http://diveintohtml5.info/offline.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:11:31.220

两种选择：

1.  将页面放在服务器上某个不起眼的文件夹路径下。然后添加检查以查看文件夹路径是否存在于`location.href`. 如果用户将您的文件保存在本地，他们可能不会复制所有文件夹，只会保持文件名不变。

    例如，`http://www.pathtosharepoint.com/stackoverflow/index.htm`

    ```
    <script>
    if(!/stackoverflow/.test(location.href))location="about:blank";
    </script> 
    ```

2.  设置一个cookie。如果页面保存在本地，cookie 将不可读。

    `if(!/stackoverflow/.test(document.cookie))location="about:blank";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:19:34.087

没有。你只需要说服人们这是一件坏事。不要为外部托管的应用程序提供支持，但除此之外，您无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T23:57:16.783

我看到了这个，觉得很有趣：

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

查看“高级”单选按钮....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T22:30:18.290

简而言之：**不，你不能**

但是如果你混淆和缩小你的代码，并通过你的应用程序进行一些反复制检查，这会使非法复制者的工作更加困难，因为他们必须知道一些 JS 才能解锁你的应用程序。但我必须重复一遍：基于客户端的防复制应用程序（并且可能永远是）只是一个梦想。

# jquery - 如何打开和关闭rich:popupPanel 来自同一链接

> ID：12736793
> 
> 赞同：1
> 
> 时间：2012-10-04T22:11:25.440
> 
> 标签：jquery, jsf, jsf-2, richfaces

我从展示中遵循此示例：[http](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=login&skin=blueSky) : //showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=login&skin=blueSky 它显示了我如何单击链接以打开 popupPanel 并附加该面板到该链接的相同位置。但我希望如果我再次单击，它将关闭面板。有人知道如何实现吗？这是我的代码

```
 <h:outputLink value="#" id="sb-dd-ol" >
        <rich:componentControl event="click" operation="show" target="sb-dd-pp">
            <a4j:param noEscape="true" value="event"/>
            <rich:hashParam>
                <a4j:param noEscape="true" name="top"
                           value="jQuery(#{rich:element('sb-dd-ol')}.parentNode).offset().top + 
                                  jQuery(#{rich:element('sb-dd-ol')}.parentNode).height()" />
                <a4j:param noEscape="true" name="left" 
                           value="jQuery(#{rich:element('sb-dd-ol')}.parentNode).offset().left" />
            </rich:hashParam>
        </rich:componentControl>
        Test
    </h:outputLink>
    <rich:popupPanel id="sb-dd-pp" autosized="true" modal="false" 
                     moveable="false" resizeable="false" followByScroll="false">
        This is a test
    </rich:popupPanel> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:54:05.857

您可以扩展 PopupPanel 原型，如下所示：

```
jQuery.extend(RichFaces.ui.PopupPanel.prototype, {
    toggle: function(event, opts) {
        if (this.shown) {
            this.hide(event, opts);
        } else {
            this.show(event, opts);
        }
    }
} 
```

之后，您可以`operation="toggle"`在 componentControl 中使用（替代方法是`onclick="#{rich:component('sb-dd-pp')}.toggle();"`在链接上添加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:53:00.470

不太了解richfaces 4，但是modalpanel渲染了div，它的可见性可以用简单的js来控制：

```
var isShown = false;
function onlinkclick() {
  if(isShown) {
      hideElement();
  } else {
      showElement();
  }
  isShown = !isShown;
} 
```

# php - 我正在尝试在线显示用户列表

> ID：12736795
> 
> 赞同：0
> 
> 时间：2012-10-04T22:11:47.117
> 
> 标签：php, mysql, sql

我正在尝试在线显示用户列表。而且我有一个 sql，但在我的页面上它说“***您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以便在第 8 行的 '' 附近使用正确的语法***”，我想知道怎么做我显示没有任何错误的用户列表。

```
<?php $sql = "SELECT
        user_id,
        user_name,          
        online
    FROM
        users
    WHERE
        user_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);

if(!$result)
{
echo 'There are currently no user online.' . mysql_error();
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'There are currently no user online.';
}
else
{
    //display category data
    while($row = mysql_fetch_assoc($result))
    { $D= $row['online']; 
    if( ($D) !=1)
    {
    echo 'There are currently no user online.';
}
else
{ 
         echo'<a href="/index.php?area=profile&userid=' .   $posts_row['user_id'] . '" class="topicuser_member"><span ' . $posts_row['user_class'] .  '>' . $posts_row['user_name'] . '</span></a>,';}}}}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:17:00.970

您需要在 where 子句中为字符串加上引号：

```
$sql = "SELECT
    user_id,
    user_name,
    online
FROM
    users
WHERE
    user_id = '" . mysql_real_escape_string($_GET['id']) . "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:21:17.853

变量“id”是否已定义？另外，如果您尝试获取在线用户列表，则您的 sql 查询错误，应该是

```
$sql = "SELECT
    user_id,
    user_name,          
    online
FROM
    users
WHERE
    //here you should have the online column       
    online = online" or whatever the online value you have set 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:22:55.573

A) 手动字符串转义是一个坏主意，如果您忘记这样做，就会让您对 SQL 注入持开放态度。删除 mysql_real_escape_string() 并考虑将[PDO](http://www.php.net/manual/en/book.pdo.php)与绑定变量一起使用，这样您就不必再担心它了。

B) 您正在尝试查询单个用户 ID 的详细信息。这只会告诉您单个用户是否在线。不是很有用。如果您要获取所有在线用户的列表，您可能只想删除 WHERE 子句。

C) 如果您有任何有意义的用户数量，所有在线用户的列表可能会迅速失控。我强烈建议退回到用户的直接计数（如果有人真的想要那么多信息，可能会有一个包含所有在线用户的页面）。

# c# - 有没有办法静默安装 vb6 或 .NET（最好是 C#）应用程序？

> ID：12736800
> 
> 赞同：1
> 
> 时间：2012-10-04T22:12:02.053
> 
> 标签：c#, .net, vb6

我尝试使用命令行 setup.exe /s 静默安装 vb6 应用程序的 setup.exe，但这仍然显示 gui。我不想要 gui 显示我想要它完全沉默。如果有一种简单的方法可以在 vb6 和 .NET 应用程序中执行此操作会很有帮助（但请记住，它不应该显示任何 gui）。虽然 google-ing 我发现某处说我应该自己创建一个安装程序。因此，如果没有其他方法，请让我知道您是否有正确的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:20:38.817

**在 VB 中，使用打包和部署向导**创建的应用程序设置在静默模式下使用命令行开关**-sc:\mydir\myapp.log 运行**，其中 c:\mydir\myapp.log 是所需的日志文件。[在此处](http://support.microsoft.com/kb/182470)查看完整的选项列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:20:39.373

您可以使用[WiX](http://wix.sourceforge.net/)生成 MSI 文件，然后使用 /qn 开关运行[msiexec 。](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/msiexec.mspx?mfr=true)

它也适用于 .NET 应用程序。事实上，它几乎可以与你扔给它的任何东西一起工作。

# continuous-integration - tfs2010 获取在自定义活动中开始购买的用户

> ID：12736801
> 
> 赞同：0
> 
> 时间：2012-10-04T22:12:03.310
> 
> 标签：continuous-integration

我需要为日志编写一个自定义活动。是否可以让在我的活动中排队构建的用户？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:16:23.450

您可以在工作流程过程中使用变量的[`IBuildDetail.RequestedFor`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.client.ibuilddetail.requestedfor.aspx)属性。`BuildDetail`

# scala - 在基类中定义的 scalaz 零

> ID：12736803
> 
> 赞同：0
> 
> 时间：2012-10-04T22:12:07.273
> 
> 标签：scala, types, scalaz

我刚刚开始使用 Scalaz。我正在尝试在其超类中为我的类型定义一个零。

```
class Base { 
  implicit def BaseZ: Zero[this.type] = zero(classOf[this.type].newInstance() )
}

class Child extends Base

~Option(null:Child) //trying to make this produce: new Child 
```

我收到两个错误：

1）按原样，这会产生`"error: class type required but Base.this.type found"`

2）如果我将 this.type 的第二次出现更改为 Base （这没用），我得到

> 类型不匹配;
> 发现：
> 需要基础：Base.this.type

谁能帮我理解 this.type 出了什么问题？我真的不想将类型参数传递或覆盖到 Base。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:14:00.270

`this.type`和这个类的类型不一样。`this.type`是这个特定实例的单例类型。换句话说，以下内容将不起作用：

```
scala> class X { def x:this.type=new X }
<console>:7: error: type mismatch;
 found   : X
 required: X.this.type
       class X { def x:this.type=new X } 
```

另一方面，这将：

```
scala> class X { def x:this.type=this }
defined class X 
```

从零开始，我会创建一个伴随对象并将每个零放入其中。

# java - Java JSpinner 时间到 MySQL 数据库

> ID：12736809
> 
> 赞同：0
> 
> 时间：2012-10-04T22:12:28.600
> 
> 标签：java, mysql, swing, time

我正在开发一个程序，提示用户选择他/她在酒店住宿的时间，我正在使用 JSpinner 来执行此操作。但我不知道如何从 JSpinner 中提取时间并将其以时间格式插入 MySQL 数据库。请帮助并给我一些例子。对不起菜鸟问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:30:36.193

*   从微调器 ( `JSpinner#getValue`) 中检索数据并将其转换为时间对象。转换将取决于您的微调器模型中存储的数据。这`SpinnerDataModel`可能是一个有趣的模型来支持你的微调器，
*   在后台线程上将查询发送到您的数据库，例如通过创建一个`Runnable`并使用一个新`Thread`的来执行它。

示例可以在[`JSpinner`教程](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)中找到。例如（从该教程复制粘贴）如果您使用`SpinnerDateModel`，您可以使用

```
SpinnerDateModel dateModel = ...;
...
setSeasonalColor(dateModel.getDate()); 
```

它允许您`Date`直接从模型中检索对象，而无需转换。

此外，[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)解释了为什么应该在后台线程上更新数据库。它还包含有关如何在 EDT 的后台线程上执行某些操作的代码片段。但是，如果您只需要更新 db，并且 UI 中的任何内容都不需要更新，则无需选择`SwingWorker`该示例代码中使用的类。`Thread`在这种情况下，您可以像我上面所说的那样简单地开始一个新的。网上充满了如何实现这一目标的示例。

# javascript - jQuery ComboBox：无论我尝试什么，我都无法将值返回到我的选择框（无法以编程方式选择所需的选项）

> ID：12736810
> 
> 赞同：0
> 
> 时间：2012-10-04T22:12:29.503
> 
> 标签：javascript, jquery, select, jquery-selectors, combobox

我真的努力在这里和谷歌上寻找可能的答案。我确实找到了一些答案，但是当我将它们应用于我的代码和我的情况时，它就不起作用了。

我试过：

```
$("select#city option['City, ST']").attr('selected', 'selected'); 
```

我也试过：

```
$("select#city").val('City, ST'); 
```

正如某处建议的那样。

我尝试将此代码放入 document.ready 函数 - 无济于事。然后我尝试将它放在顶部（虽然不是在头部），但没有 document.ready 但仍然相同。

此功能失败的原因可能是什么？它被称为重要的时刻（我的意思是，如果我的带有值的选择框首先呈现然后调用函数，这有关系吗？或者它可能是别的什么？

HTML 代码：

```
<div class="ui-widget">
            <h3>Location</h3>
            <form id="chooseCity" class="" action="" method="post">
                <select id="city" name="city">

                    <option value="Select Town">Select Town</option>
                    <option value='Acworth, NH'>Acworth, NH</option>
                    <option value='Alstead, NH'>Alstead, NH</option>
                    <option value='Alton, NH'>Alton, NH</option>
                    <option value='Alton Bay, NH'>Alton Bay, NH</option>
                    <option value='Amherst, NH'>Amherst, NH</option>
                    <option value='Andover, NH'>Andover, NH</option>
                    <option value='Antrim, NH'>Antrim, NH</option>
                    <option value='Concord, NH'>Concord, NH</option>
                </select>
            </form>
        </div> 
```

这个循环会是罪魁祸首吗？也许它以某种方式干扰：

```
 <option value="Select Town">Select Town</option>
                    <?php foreach($arr as $city):
                        echo "<option value='{$city}'";
                        echo ($_POST['city-hp'] == $city) ? 'selected' : '';
                        echo ">".$city."</option>".PHP_EOL;
                    endforeach; ?> 
```

重要编辑：

我发现这段代码：

```
$(function() {
    $( "#city" ).combobox();
    $( "#toggle" ).click(function() {
        $( "#city" ).toggle();
    });
}); 
```

正在阻止我的组合框以编程方式选择所需的值。但是这段代码对于选择框的样式至关重要。我已经从 jQuery UI 网站下载了示例并将其集成到我的网站中。

如何修改上述代码以保留其外观，同时允许所需的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:21:53.610

您可以尝试以编程方式选择一个选项

**HTML**

```
<select id="city">
    <option value=1>CityOne</option>
    <option value=2>CityTwo</option>
</select> 
```

**JS**

```
$('#city').val(2); // will select the item which has value=2 
```

或者

```
$('#city').prop("selectedIndex",1); // will select second item/index, first is 0 
```

[**演示**](http://jsbin.com/aveyaf/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:19:58.597

试试这个

```
 $('select#city').find('option[value*="City"][value*="ST"]').attr('selected', 'selected'); 
```

或者

```
$("select#city option[value='City, ST']").attr('selected', 'selected'); 
```

[检查演示](http://jsfiddle.net/sushanth009/hYYDP/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:13:36.167

您的 jQuery[工作](http://jsfiddle.net/PMvfz/)- 其他东西正在干扰。

我建议浏览您可能已经安装的其他插件，看看它们是否覆盖了选定的索引，可能只是`<option>`选择中的第一个。
或者，如果您想详细说明您正在使用哪些技术，有人可能会进一步帮助您。

**编辑：**

请参阅[此相关问题](https://stackoverflow.com/questions/2749721/how-do-set-a-default-value-with-jquery-autocomplete-combobox)的答案 - 看起来您必须编辑插件的源代码。

在组合框插件中找到这一行：

```
.addClass("ui-widget ui-widget-content ui-corner-left"); 
```

并在其后立即添加此行：

```
input.val( $(select).find("option:selected").text()); 
```

[来源](https://stackoverflow.com/a/3462137/1684247)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-04T12:47:20.563

我难住了这个错误，无论我编写什么代码都无法修复它（可能需要 3 个小时）。最后幸运的是，我浏览了[http://www.onemoretake.com/2011/04/17/a-better-jquery-ui-combo-box/](http://www.onemoretake.com/2011/04/17/a-better-jquery-ui-combo-box/)网页（感谢@Dan 解决了我的头痛问题）并看到了真正的缺失部分不在“OnLoad”上，在 ui 定义函数本身上。官方 Jquery Ui 网页上的标准定义功能不包含以编程方式选择选项。

这是应该添加到定义函数中的函数：

```
//allows programmatic selection of combo using the option value
        setValue: function (value) {
            var $input = this.input;
            $("option", this.element).each(function () {
                if ($(this).val() == value) {
                    this.selected = true;
                    $input.val(this.text);
                    return false;
                }
            });
        } 
```

我还制作了另一个功能来通过选项文本而不是选项值更改选择

```
//allows programmatic selection of combo using the option text
            setValueText: function (valueText) {
                var $input = this.input;
                var selectedText;                   
                $("option", this.element).each(function () {
                    if ($(this).text() == valueText) {
                        this.selected = true;
                        $input.val(this.text);                                                    
                        return false;
                    }
                });                        
            } 
```

您可以在 OnLoad 或其他函数上使用这些函数：

```
$("#yourComboBoxID").combobox("setValue", "Your Option Value"); 
```

或者

```
$("#yourComboBoxID").combobox("setValueText", "Your Option Text"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-02-10T15:51:32.310

测试是javascript对象。

test.controlid 是小部件实例的 id。

test.value 是您要选择的字符串。

你不需要测试对象，你可以直接使用 id 和 value。

* * *

```
$("#" + test.controlid).parent().find("span").children("input").val(test.value);

var newObject = new Object();

newObject.item = new Object();

newObject.item.option = $('#' + test.controlid +' > option[value="' + test.value + '"]')[0];

$("#" + test.controlid).parent().find("span").children("input").trigger("autocompleteselect", newObject); 
```

* * *

# hibernate - 为什么覆盖会更改列名

> ID：12736811
> 
> 赞同：4
> 
> 时间：2012-10-04T22:12:46.183
> 
> 标签：hibernate, audit, hibernate-envers

我使用的是 rev 监听器的默认实现，正如预期的那样，我的 REVINFO 表中的列是：revtstmp 和 rev。

但是，当我覆盖默认值时 - 我所做的只是：

```
... MyRevisionEntity extends DefaultRevisionEntity 
```

这些列名已更改为“timestamp”和“id”。

有谁知道为什么？

使用环境 4.1.5_Final...

** 编辑 ** 由于没有人回答，我正在添加更多信息。

Adam Warski 创作的“DefaultRevisionEntity”类只定义了两个成员：private int id；

和私有长时间戳；

因此，我知道当我扩展该类时，这些将是我应该期望的列名。然而，“令人困惑”的问题是：为什么当我没有扩展默认值时，列是不同的（分别是 rev 和 revtstmp）以及文档所说的内容？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T01:17:43.617

简短的回答是因为当你不扩展时，Envers 使用默认配置，这些列名是硬编码的，例如它们不是来自实体类的元数据。扩展 时`DefaultRevisionEntity`，Envers 默认使用标准的 ORM 命名策略。

更从技术上讲，`RevisionInfoConfiguration`是罪魁祸首。

作为 Envers 的引导程序的一部分，该类的`#configure()`方法被调用，它在定义的实体中搜索自定义修订实体实现。如果检测到实现，Envers 基本上会像任何其他实体一样映射该类。

但是，如果没有检测到自定义实现，`generateDefaultRevisionInfoXmlMapping`则会调用它来自动构建适当的 XML 结构，该结构使用硬编码的列名来表示`@RevisionNumber`和`@RevisionTimestamp`注释字段；因此，您会得到名为`REV`and的列`REVTSTMP`。

我已经注册了一个 JIRA 问题[HHH-11325](https://hibernate.atlassian.net/browse/HHH-11325)来解决改进问题。

# silverlight - 同时滚动两个不同的滚动查看器

> ID：12736813
> 
> 赞同：1
> 
> 时间：2012-10-04T22:13:12.860
> 
> 标签：silverlight, windows-phone-7, scrollviewer

我的应用程序中有两个滚动查看器，当第一个滚动查看器垂直滚动时，我希望第二个滚动查看器水平滚动（同时）。

是否有任何方法可以帮助我做到这一点，以及如何在第一个滚动查看器滚动时确定第二个滚动查看器的特定位置？

# eclipse - Python3 PyQt4 创建一个简单的 QCheckBox 并更改一个布尔变量

> ID：12736825
> 
> 赞同：2
> 
> 时间：2012-10-04T22:14:11.623
> 
> 标签：eclipse, python-3.x, pyqt4, windows-7-x64, qcheckbox

所以我一直在尝试使用 Python 3.3 和 PyQt4 编写一个 GUI。我已经完成了一些教程，但我仍然无法弄清楚如何在全局变量中检查和取消选中触发器更改。我无法让它触发任何事情，因为所有教程都使用了对我不起作用的方法。

程序太大了，无法整体复制到这里，所以我把程序的基本结构放在了复选框周围

```
import sys
from PyQt4 import QtGui, QtCore

ILCheck = False

class SelectionWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(SelectionWindow, self).__init__(parent)

        ILCheckbox = QtGui.QCheckBox(self)
        ILCheckbox.setCheckState(QtCore.Qt.Unchecked)

        MainLayout = QtGui.QGridLayout()
        MainLayout.addWidget(ILCheckbox, 0, 0, 1, 1)
        self.setLayout(MainLayout) 
```

这就是我卡住的地方。我想要做的是，如果 ILCheckbox 被选中，则将 ILCheck 的状态更改为 True，并在其未选中时将其更改回 False。几乎一整天都在做这件事，没有一个教程有太大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:24:43.870

`stateChanged`复选框在其状态更改时发出一个事件（真的！）。将其连接到事件处理程序：

```
import sys

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class SelectionWindow(QMainWindow):
    def __init__(self, parent=None):
        super().__init__(parent)

        self.ILCheck = False

        ILCheckbox = QCheckBox(self)
        ILCheckbox.setCheckState(Qt.Unchecked)

        ILCheckbox.stateChanged.connect(self.ILCheckbox_changed)

        MainLayout = QGridLayout()
        MainLayout.addWidget(ILCheckbox, 0, 0, 1, 1)

        self.setLayout(MainLayout)

    def ILCheckbox_changed(self, state):
        self.ILCheck = (state == Qt.Checked)

        print(self.ILCheck)

if __name__ == '__main__':
  app = QApplication(sys.argv)
  window = SelectionWindow()

  window.show()
  sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:48:12.640

尽量避免使用全局变量。

相反，使复选框成为窗口的属性并直接测试其状态：

```
class SelectionWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(SelectionWindow, self).__init__(parent)
        self.ILCheckbox = QtGui.QCheckBox(self)
        self.ILCheckbox.setChecked(QtCore.Qt.Unchecked)
        MainLayout = QtGui.QGridLayout()
        MainLayout.addWidget(self.ILCheckbox, 0, 0, 1, 1)
        self.setLayout(MainLayout)
...

window = SelectionWindow()
print window.ILCheckbox.isChecked() 
```

# scala - 如何访问目录中的文件名

> ID：12736828
> 
> 赞同：0
> 
> 时间：2012-10-04T22:14:37.487
> 
> 标签：scala

如何访问以下 scala 代码中的文件名：

```
object FileMatcher {

  private def filesHere = (new java.io.File("c:\\")).listFiles

  def filesEnding(query: String) = 
    for (file <- filesHere; if file.getName.endsWith(query))
      yield file.getName

  def main(args: Array[String]) {
      println(filesEnding(".js"))  
    }

} 
```

我有一个 .js 文件，输出为：[Ljava.io.File;@df8f5e

我尝试将 'yield file' 更改为 'yield file.getName' 但结果相同。

我假设 println(filesEnding(".js")) 调用 def 'filesEnding' 产生的任何 toString 方法，这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:50:13.967

`filesEnding`产生一个`Array[String]`（当你使用`yield file.getName`和`Array[File]`当你使用时`yield file`）`toString`Array 的方法，是默认`toString`实现。这是打印的哈希码......这正是你得到的。您可能的意思是`println(filesEnding(".js").mkString("\t","\n\t","\n"))`哪个应该很好地打印您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:03:56.237

File 上还有另一种方法可以减少您的工作，称为 list，它列出名称而不是 Files。根据您希望如何处理未找到搜索文件的情况，您可以处理抛出的异常或直接接收您想要的一个文件名：

```
val jsFile = new File("C:\\").list.find(_ endsWith ".js").head 
```

或生成一个选项并通过以下方式避免异常：

```
val jsFileOpt = new File("C:\\").list.find(_ endsWith ".js").headOption 
```

但是，如果您将非目录路径传递给 File 构造函数，这仍然会失败并出现异常。为了防止这种情况，将可能为空的列表包装在选项中。返回目录的内容后，您将获得 Option[Array[String]] 否则为 None。Find 将返回 Option[Option[String]]，因此使用 flatMap 将此结果展平为 Option[String]。

```
val jsFileOpt = Option(new File("C:\\").list).flatMap(_.find(_ endsWith ".js")) 
```

直接处理结果，忽略错误，使用上面的提取代码和map操作

```
Option(new File("C:\\").list).flatMap(_.find(_ endsWith ".js")) map {n =>
  // whatever you want to do with the file name.
} 
```

调整您自己的代码不变，只提取返回数组中的第一个元素

```
filesEnding(".js").head 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:05:56.490

在一个班轮中：

```
(new java.io.File("c:\\")).listFiles filter { _.getName.endsWith(query) } map { _.getName } foreach println 
```

自然地，`query`用你想要的任何东西替换，或者把该行放在一个名为 query 的参数的 def 中。

# sql - 3个表上的Oracle外连接

> ID：12736829
> 
> 赞同：2
> 
> 时间：2012-10-04T22:14:42.603
> 
> 标签：sql, oracle11g, outer-join

如果我有两个表（A 和 B）在 col 'id' 上连接，并且我想从 A 获取所有记录，而不管 B 中的相应记录，我知道我可以这样做：

```
select * from A left outer join B on A.id = B.id; 
```

现在我有 3 个表 A、B、C A 与 B 连接，B 与 C 连接。我想要 A 中的所有记录，无论 B 或 C 中是否有记录。所以我应该写 `select * from A left outer join B on A.id = B.id and`（..now what我在这里写吗）即使使用旧语法，我也被卡住了：（ `select * from A,B,C where A.id = B.id(+) and B.id1 = C.id1(+)`这似乎不正确）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T22:16:48.733

```
select * 
from A 
   left outer join B on A.id = B.id
   left outer join C on C.id = B.id 
```

# advanceddatagrid - 为什么 AdvancedDataGrid 宽度大于父容器？

> ID：12736836
> 
> 赞同：0
> 
> 时间：2012-10-04T22:15:12.660
> 
> 标签：advanceddatagrid

这是我的控件的层次结构：

```
<Canvas  width="100%" height="100%">
  <ViewStack  width="100%" height="100%">
     <box id="box1" width="100%" height="100%">
       <AdvancedDataGrid width="100%" height="100%"/>
     </box>
     <box id="box2" width="100%" height="100%">
       <SomeOtherControl width="100%" height="100%"/>
     </box>
</ViewStack>
</Canvas> 
```

我的 ADG 大约有 30 - 40 列，我看到两个水平滚动条，1 个来自 ADG，这没关系，但另一个来自父容器，所以似乎 ADG 的宽度分配得比父容器多。

我无法将 ADG 的宽度设置为显式值，因为它会导致缩放问题。

请建议/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:25:50.913

这是 ADG 的另一个“怪癖”。过去对我们有用的一件事是设置 `<AdvancedDataGrid width="{parentContainer.width}" height="100%"/>`

# ios - 现在随着 iOS 6 的到来，苹果还允许旧的 facebook SDK 吗？

> ID：12736838
> 
> 赞同：0
> 
> 时间：2012-10-04T22:15:23.087
> 
> 标签：ios, facebook

例如 sdk 3.0 版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:09:02.413

1.  我知道应用商店指南中没有“开发人员不得使用任何‘旧’框架”的限制。
2.  “优化”是什么意思？
3.  你为什么要这样做？没有充分的理由。

如果您正在寻找的功能可以通过 iOS 6 对 Facebook 共享的内置支持获得，并且您不需要针对 iOS5，请使用内置的东西。否则，继续使用 Facebook SDK，没有理由不使用。

# java - 使用 JDBC 在 .NET/IKVM 中连接到 SQL Server

> ID：12736839
> 
> 赞同：0
> 
> 时间：2012-10-04T22:15:23.463
> 
> 标签：java, .net, sql, jdbc, ikvm

我编写了一个 Java 包，它使用 JDBC 和集成安全性连接到 SQL Server 数据库。这个包按照我的 Java IDE 的预期运行。现在我正在尝试使用 IKVM 从一个单独的 .NET 应用程序访问这个包中的一些类。

但是，现在我在 .NET 应用程序中收到 ExceptionInInitializerError，堆栈跟踪显示此错误发生在数据库连接初始化期间。

我为 .NET 应用程序创建了一个 app.config 文件，以使用以下方法将 JDBC 驱动程序添加到 Java 库路径：

```
<add key="ikvm:java.library.path" value="C:\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x64"/> 
```

我尝试将 \x64 更改为 \x86（使用 32 位身份验证 dll 而不是 64 位），我收到了完全相同的错误，我认为这很奇怪。然后我从 app.config 中删除了这一行，并收到“无法加载 sqljdbc_auth.dll”警告，并显示“此驱动程序未配置为集成身份验证”。SQLServer 异常。

我将数据库连接代码迁移到 VB.NET/IKVM 中，并使用以下四行重新创建了原始错误：

```
Dim connectionUrl As String = "jdbc:sqlserver://db\instance;integratedsecurity=true"
Dim driver As String = "com.microsoft.sqlserver.jdbc.SQLServerDriver"     
java.sql.DriverManager.registerDriver(New com.microsoft.sqlserver.jdbc.SQLServerDriver())
Dim dbConn As java.sql.Connection = java.sql.DriverManager.getConnection(connectionUrl) 
```

所以，我很确定，如果我能让这四行工作，我的问题应该得到解决。有人有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:34:06.053

跟踪正在发生的事情的方法是使用 Java Throwable.printStackTrace() 方法打印异常（到控制台）。这样你就得到了根本原因。

```
Try
   ...
Catch x as java.lang.ExceptionInInitializerError
   x.printStackTrace()
End Try 
```

我的猜测是 tThis 将表明问题在于您忘记将 ikvm-native-win32-x86.dll（或 ikvm-native-win32-x64.dll）复制到您的应用程序目录。

# android - XML 文件未重新加载 onResume。

> ID：12736840
> 
> 赞同：0
> 
> 时间：2012-10-04T22:15:32.217
> 
> 标签：android, actionscript-3

在我的应用程序上有一个按钮，它加载位于服务器上的 XML 文件。XML 文件包含 31 条信息，每天交付一条，基于天数。用户触摸一个按钮来重新加载信息，因此它每天都在变化。

这就是我坚持的事情。当应用程序从后台恢复并且我触摸按钮时，它不会提取新一天的信息；它继续显示昨天的信息。如果我强制应用程序退出（在手机上）然后重新启动，它将正确加载新一天的信息。

我的问题 - 我如何强制它在每次按钮触摸时重新加载？

感谢你的协助。这是我的 ActionScript 3 代码。

**2012 年 10 月 12 日更新**：我已经在几个 24 小时内对此进行了测试，发现它在 Flash 5.5 模拟器中每天都不能正确更新。所以问题可能不在于手机。我将对代码做更多的工作并报告回来，希望有一些改进。

```
// Main 'Today!' button function
var myDateDay:Date = new Date();
var dayNumber:int = myDateDay.day;  

myButton.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);
function fl_MouseClickHandler(event:MouseEvent):void {

// Opens previously saved text file to read XML URL
var file:File = File.applicationStorageDirectory;
file = file.resolvePath("qstURL.txt");
var fileStream:FileStream = new FileStream();
fileStream.open(file, FileMode.READ);
var QSTURL:String = fileStream.readUTFBytes(fileStream.bytesAvailable);
trace("QST URL:" + " " + QSTURL);
fileStream.close();

// Load, process main XML file
var qst:XML;
var qstLoader:URLLoader = new URLLoader();
qstLoader.load(new URLRequest(QSTURL));
qstLoader.addEventListener(Event.COMPLETE, processQST);

function processQST(e:Event):void {
    qst = new XML(e.target.data);
    isProcessed();
}

//Wait until the XML is finished being processed
function isProcessed():void{
    trace("QST is processed and ready for use");

    //Clear welcome message before adding new content
    if(contains(textWelcomeMessage)){
        removeChild(textWelcomeMessage);
        removeChild(imageNoAudio);
        removeChild(textProductKeyMessage);
        trace("Welcome items removed");
    }
    else{
        trace("textWelcomeMessage not onStage");
    }

//Text Section
    // Text field formating 
    var myTextFormat1:TextFormat = new TextFormat();
    myTextFormat1.align = TextFormatAlign.LEFT; 
    myTextFormat1.size = 20; 
    myTextFormat1.font = "Verdana"; 
    myTextFormat1.color = "0x333333";
    myTextFormat1.bold = true;

    var myTextFormat2:TextFormat = new TextFormat();
    myTextFormat2.align = TextFormatAlign.LEFT; 
    myTextFormat2.size = 30; 
    myTextFormat2.font = "Verdana"; 
    myTextFormat2.color = "0x333333";

    // Text field to display title
    var title:XMLList = qst.title;
    var myText1:TextField = new TextField();
    myText1.text = title;
    myText1.autoSize = TextFieldAutoSize.NONE;
    myText1.border = false;
    myText1.width = 315;
    myText1.multiline = false;
    myText1.wordWrap = false;
    myText1.y = 125;
    myText1.x = 5; 
    myText1.setTextFormat(myTextFormat1); 

    // Text field to display question of the day
    var question:XMLList = qst.question.(@day == dayNumber).text;
    var myText2:TextField = new TextField();
    myText2.text = question;
    myText2.autoSize = TextFieldAutoSize.CENTER;
    myText2.border = false;
    myText2.width = stage.stageWidth - 60;
    myText2.multiline = true;
    myText2.wordWrap = true;
    myText2.y = 180;
    myText2.x = 30; 
    myText2.setTextFormat(myTextFormat2); 

    // Text field to display clearing statement
    var cs:XMLList = qst.clearingStatement;
    var myText3:TextField = new TextField();
    myText3.text = cs;
    myText3.autoSize = TextFieldAutoSize.CENTER;
    myText3.border = false;
    myText3.width = stage.stageWidth - 60;
    myText3.multiline = true;
    myText3.wordWrap = true;
    myText3.y = myText2.y + myText2.height + 10;
    myText3.x = 30; 
    myText3.setTextFormat(myTextFormat2); 

    //Remove existing text field to stop overlaying when button touched repeatdly
    while (numChildren > 3) removeChildAt(3);
    /Add text to stage
    addChild(myText1);
    addChild(myText2);
    addChild(myText3);

other code ....

    }//Close function "isProcessed" - load & process main XML file
} //Close function fl_MouseClickHandler - 'Today!' button 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:49:35.983

I think your xml file is being cached by the OS.

If that is the case, try appending a random string at the end of your URL. Something like :

```
url + "?v=" + Math.ceil(Math.random()*10000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:29:54.087

我终于发现了这一点，发现一个保存日期的变量超出了主按钮的范围。因此，当单击按钮时，要重新加载所有内容，它不会重新加载日期并更新此变量。结果，天数没有更新，*这*是用来检索每天信息的。

它怎么比这更好？

# c++ - 将 time_t 转换为 int64_t

> ID：12736842
> 
> 赞同：1
> 
> 时间：2012-10-04T22:15:40.403
> 
> 标签：c++

我正在尝试通过执行以下操作将 time_t 转换为 in64_t。

```
time_t t = 1349388030; 
```

我有一个 API。

```
SomeObj.setValue(const int64_t)            // Sets the value of SomeObj to the passed argument
SomeObj.getValue(int64_t & value) const    // Returns the value 
```

然后我执行以下操作。

```
SomeObj.setValue(t)
int64_t tt;
SomeObj.getValue(tt)
assert (tt == t)                           // Fails where tt = 109726776 
```

任何人都可以帮助正确的铸造程序吗？

编辑：

这是我使用 set_value 的方式在我的代码中的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:31:02.310

在 3 种情况下，您必须担心从一种整数类型转换为另一种：

1.  你从一个大整数转换为一个小整数。我有理由相信，`sizeof(int64_t) >= sizeof(time_t)`所以这不应该是一个问题。
2.  您将无符号类型转换为有符号类型，并且值超出了有符号类型的范围。再次不太可能，因为 1349388030 小于 2^31。
3.  您将有符号类型转换为无符号类型，并且值为负。不适用于这里。

我不认为问题出在你的选角上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:13:04.673

我从您所说的假设 SomeObj 并不真正关心时间，它只是您需要存储时间的一些存储容器。我还假设在您的用例中，无论您存储什么格式您的时间不需要是可移植的，并且存储的时间将始终在生成它们的同一系统上使用。如果这些假设中的任何一个不正确，那么强制转换不是您的问题的合适解决方案（我在下面讨论更合适的解决方案，参考关于 的讨论`localtime()`）。

将`time_t`值存储在`int64_t`变量，当然 sizeof(time_t) 必须小于或等于 sizeof(int64_t)，因此您的代码需要对此进行断言检查。现在您不能只将 time_t 分配给 int64_t （这在大多数但不是所有系统上都可以正常工作），因为如果 time_t 是浮点类型，您可能会在转换时失去精度，并且在转换时回到 time_t 它可能不是相同的值（尽管它可能“接近”正确的值）。关键是，对于可移植代码，您不能对 time_t 值的格式做出任何假设。让我在这里重申一下，即使下面的代码是可移植的，该解决方案也不会生成本身可移植的时间值；即，如果您在一个系统上生成 time_t 值并且您的 SomeObj 将该值传输到另一个“系统” （即使在同一处理器上但由不同的编译器编译）为了在另一个系统上进行解释，另一个系统可能会也可能不会以相同的方式解释该值。为此，您需要将 time_t 转换为离散数字，也许通过`localtime()`或者`localtime_r()`，*将该*结构传输到其他系统，并通过 将其转换*为该*系统的 time_t 格式`mktime()`。

在任何情况下，要以与解释无关的方式将 time_t 值填充到 uint64_t 中，您需要从 time_t 值的位置读取位作为 uint64_t。如果 time_t 没有 uint64_t 宽，您将读取额外的位，但这没关系；这些位是“不关心”位。然后要从 uint64_t 中读取 time_t 值，您需要从 uint64_t 的位置读取位作为 time_t。换句话说，您获取源变量的地址，将其转换为目标类型的指针，然后取消引用它。如果类型的大小不匹配，您要么将额外的垃圾位读入目标变量，否则您将丢失可能是垃圾位的位。这是您在代码中执行此操作的方法...

```
#include <time.h>
#include <assert.h>

struct SomeClass
{
    int64_t i64;
    void setValue(const int64_t v) { i64 = v; }
    void getValue(int64_t& v) const { v = i64; }
};

#if 0 // Set to 1 for C style casting, or 0 for C++ style casting.

    int main()
    {
        assert (sizeof(int64_t) >= sizeof(time_t));
        // ...fundamental, otherwise nothing else has any hope of working

        SomeClass SomeObj;

        time_t t = 1349388030;
        int64_t i = *((int64_t*)&t);
        SomeObj.setValue(i);

        int64_t ii;
        time_t tt;
        SomeObj.getValue(ii);
        tt = *((time_t*)&ii);

        assert (tt == t);
    }

#else

    int main()
    {
        assert (sizeof(int64_t) >= sizeof(time_t));
        // ...fundamental, otherwise nothing else has any hope of working

        SomeClass SomeObj;

        time_t t = 1349388030;
        int64_t i = *reinterpret_cast<int64_t*>(&t);
        SomeObj.setValue(i);

        int64_t ii;
        time_t tt;
        SomeObj.getValue(ii);
        tt = *reinterpret_cast<time_t*>(&ii);

        assert (tt == t);
    }

#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:21:41.347

我看不出你的代码有问题。在某些平台`time_t`上已经是`int64_t`. 我认为你的问题在其他地方。里面是什么`SomeObj`？

# android - 在 Android 上以几个短时间间隔收听 GPS 更新时，GPS 是否使用以前的数据？

> ID：12736843
> 
> 赞同：1
> 
> 时间：2012-10-04T22:15:51.420
> 
> 标签：android, gps, location

想象一个应用程序在 30 秒（或更短的时间 - 如果它得到第一次修复）的短时间内侦听 GPS 更新。听之间有一段时间，比如说10-20秒。问题是 - 如果 GPS 在前 30 秒内没有找到修复，它是否会在第二个间隔“从头开始”再次收听时，或者它是否可以以某种方式使用在第一个间隔期间接收到的数据以便可以获得修复更容易/更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:38:55.833

有两个项目会影响您获得修复的能力，这可能取决于之前的 GPS 执行：

1) GPS 辅助信息

2) GPS 引擎为视野中的 GPS 卫星维护的跟踪信息

对于＃1：

对于您通过 LocationListener 在 Android 应用程序中获取的 GPS 位置数据，大多数 Android 手机使用由 Qualcomm 创建的名为 gpsOneXTRA 的东西：

[http://news.thomasnet.com/companystory/QUALCOMM-Introduces-gpsOneXTRA-Assistance-to-Expand-Capabilities-of-Standalone-GPS-508624](http://news.thomasnet.com/companystory/QUALCOMM-Introduces-gpsOneXTRA-Assistance-to-Expand-Capabilities-of-Standalone-GPS-508624)

这被认为是一种“辅助 GPS”解决方案，但它通过 IP 连接从服务器（通常在蜂窝网络之外）检索辅助信息。

gpsOneXTRA 辅助数据最长可保存 7 天，尽管有些设备会更频繁地刷新此数据（例如，美国 Sprint Android 设备大约每 48 小时刷新一次），因为 GPS 质量会随着辅助数据的使用时间而下降。

因此，假设它有一段时间没有检索到辅助数据，那么在前 30 秒内最多会检索一次辅助数据。在接下来的 30 秒内，将不会再次检索此辅助数据。

更多关于 gpsOneXTRA 在 2010 Sprint 应用程序开发者大会上的信息，在幻灯片 12 上大约 19:35 分钟：http: [//developer.sprint.com/site/global/events/pastevents/2010devcon/videos/sprint_enabling_location_services.jsp](http://developer.sprint.com/site/global/events/pastevents/2010devcon/videos/sprint_enabling_location_services.jsp)

对于#2：

手机 OEM 实施的内部 GPS 引擎跟踪视野中的卫星，这在一定程度上取决于过去的 GPS 观测结果，具体取决于设备的 GPS 灵敏度。因此，GPS 侦听会话之间 10-20 秒延迟的影响将取决于设备的 GPS 灵敏度。

大多数“高灵敏度” GPS 芯片组能够在几秒钟或更短的时间内从冷启动（即没有先前的 GPS 观测）快速获取 GPS 定位，具体取决于室内障碍物，因此 10-20 秒的停机时间确实是不会影响您获得修复的能力。一个例子是 SiRF Star IV：

[http://www.sirf.com/products/25/sirfstariv-gsd4t](http://www.sirf.com/products/25/sirfstariv-gsd4t)

...可以获取高达 -160dBm 的 GPS 定位。请注意，跟踪引擎的灵敏度高达 -163dBm，因此一旦需要进行初始修复，即使信号恶化，它也可以继续跟踪。

这通常足以在户外立即获得 GPS 定位，并在天空中清晰可见，并且足以在几秒钟内在没有重物障碍物（例如砖、金属或混凝土）的情况下在室内获得定位。除非手机的 GPS 天线很糟糕，或者 GPS OEM 软件真的搞砸了（这是可能的），否则在具有高灵敏度 GPS 芯片组的现代 Android 手机中，10-20 秒的延迟应该不会对您获取的能力产生巨大影响一个修复。

Mike Lockwood 的 GPSTest 应用程序非常适合查看您的手机当前可以看到哪些卫星，并且您可以在该应用程序中启动和停止 GPS 观测，因此您可以看到延迟对手机跟踪 GPS 卫星的能力有何影响：

[https://play.google.com/store/apps/details?id=com.android.gpstest](https://play.google.com/store/apps/details?id=com.android.gpstest)

旁白：

Luis 提到的行为实际上是许多 Jelly Bean 4.1 之前的 Android 设备上普遍存在的错误。一些设备连续进行 11 次修复然后休息，其他设备将每秒连续采样，无论将什么 minTime 参数传递给 LocationManager 的 Location Listener。

与 Android 团队有关此问题的完整讨论如下：

[https://android-review.googlesource.com/#/c/34230/](https://android-review.googlesource.com/#/c/34230/)

在 Android 4.1 JellyBean 中添加了一个新的 CTSVerifier 测试，应该可以防止在 JellyBean 及更高版本上发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:24:50.943

我对一些设备的经验是，当您到达新位置时，您将收到 11 次 onLocationChange() 调用，每秒一次。

如果您将更新之间的时间设置为小于该值（11 秒），则 GPS 将每秒连续调用 onLocationChange() 更新位置，而不会中断。

如果您将更新之间的时间设置为大于该值（几分钟），它将保持调用 11 次 onLocationChange() 然后停止几秒钟，并在该时间后重新启动 11 次调用 onLocationChange() . 不会再调用onFirstFix()，获取卫星信号没有延时。

我从未尝试将更新之间的时间设置为以小时为单位的值，所以对此我不知道。

祝你好运。

# node.js - node.js 用惰性解析 csv 文件

> ID：12736844
> 
> 赞同：1
> 
> 时间：2012-10-04T22:15:52.937
> 
> 标签：node.js, csv, lazy-evaluation

我有以下 node.js 代码：

```
new lazy(fs.createReadStream('file.csv'))
  .lines
  .forEach(function(line){
    console.log(line.toString());
  }); 
```

但是，我只能通过这种方式获得最后一行数据。csv文件的内容如下：

> 123，破碎
> 12345，被盗
> 1234567，丢失

我在这里做错了什么？

我也有同一个文件的代码：

```
fs.readFile(req.files.file.path, 'utf8', function (err, data) {
  if (err) throw err;
  var lines = data.split(/\r?\n/);
  console.log(lines);
}); 
```

它返回以下数组：

```
[ '123,broken\r12345,stolen\r1234567,lost' ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T14:54:12.207

`\r\n`, `\n`, 和`\r`都是有效的行尾，所以你需要准备好拆分它们。

在进行拆分之前将它们全部转换为一个共同的值。就像是：

```
var lines = data.replace(/\r\n?/g, "\n").split("\n"); 
```

# magento - Magento 顶部和侧面导航

> ID：12736846
> 
> 赞同：1
> 
> 时间：2012-10-04T22:16:21.933
> 
> 标签：magento, content-management-system, navigation

在顶部导航栏中，我想要主页、联系我们、保修等。

在侧面导航栏中，我只想要我的产品类别和子类别。

Magento 对我放入 CMS 静态块或 Admin-> Product Categories 的任何内容都有默认设置，它会自动进入侧面和顶部导航。

我的问题是如何让顶部导航只读取我的 CMS 静态块和我的侧边导航只包含我的产品和产品类别（也就是我放入 Admin->Product Categories 的内容）

# android - 在应用程序的整个生命周期内启动时运行的 Android 线程

> ID：12736847
> 
> 赞同：1
> 
> 时间：2012-10-04T22:16:22.557
> 
> 标签：android

我正在用一个角色制作一个 RPG 风格的游戏，我希望角色当前的健康状况经常增加，直到其完全健康。

我搜索了许多文章和帖子，但似乎找不到任何东西可以做到这一点。我的想法是在扩展 Application 的全局 var 类中创建一个线程或处理程序。

我在用

```
 @Override
 public void onCreate()
 {
    super.onCreate();
    thread = new Thread() {
        public void run() {
            // do something here
            System.out.println("GlobalVars - Sleeping");
            handler.postDelayed(this, 10000);
        }
    };
    thread.start();
} 
```

我将在哪里进行函数调用，而不只是打印。这是实现这一目标的好方法吗？我可以为此线程实现 onPause 和 onResume 以防应用程序被电话打断或按下主页按钮吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T09:41:14.287

您不需要（或想要）另一个线程。而是从时间计算健康。

```
long health = 1; // about to die
long healthAsOf = System.currentTimeMillis(); // when was health last calculated
long maxHealth = 100; // can't be more healthy than 100
long millisPerHealth = 60*1000; // every minute become 1 more healthy

public synchronized long getHealth() {

    long now = System.currentTimeMillis();
    long delta = now-healthAsOf;
    if( delta < millisPerHealth ) return health;
    long healthGain = delta/millsPerHealth;
    healthAsOf += millsPerHealth * healthGain;
    health = Math.min( maxHealth, health+healthGain );
    return health;

}

public synchronized void adjustForPause( long pauseMillis ) {

    healthAsOf += pauseMillis;

} 
```

PS：您可能只想在每帧开始时抓取一次时间，以便该帧不会在稍微不同的时间发生事情。

# node.js - 当值为对象时不调用猫鼬虚拟集函数

> ID：12736854
> 
> 赞同：6
> 
> 时间：2012-10-04T22:16:58.143
> 
> 标签：node.js, mongoose

我有一个混合类型的虚拟猫鼬模式。例如：

```
var mongoose = require('mongoose') // version 3.3.1

var FooSchema = new mongoose.Schema( { x: Number } );

FooSchema.virtual('v').set( function(value){ 
  console.log("SETTING", value); 
});

var Foo = mongoose.model('Foo', FooSchema);

new Foo( { v:1 } );
new Foo( { v:[] } );
new Foo( { v:{} } ); 
```

当我运行此代码时，我得到：

```
SETTING 1
SETTING [] 
```

您会注意到它从不显示“SETTING {}”，为什么这不起作用？

[参考 Github 上的 issue](https://github.com/LearnBoost/mongoose/issues/1154)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:02:00.517

这是 Mongoose 中的一个未解决问题，已在[Aaron Heckmann](https://github.com/aheckmann)[最近的提交中](https://github.com/LearnBoost/mongoose/commit/26f2534166f6a80b1f185cdaaadc9ed7fc0b01d0)得到修复。

# haskell - Haskell：MonadState 的 put 是如何工作的？

> ID：12736860
> 
> 赞同：2
> 
> 时间：2012-10-04T22:17:30.187
> 
> 标签：haskell, monads, state-monad

[http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/src/Control-Monad-State-Lazy.html](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/src/Control-Monad-State-Lazy.html)

```
instance (Monad m) => MonadState s (StateT s m) where
    get   = StateT $ \s -> return (s, s)
    put s = StateT $ \_ -> return ((), s) 
```

() 在 put 的定义中做了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T22:20:54.990

() 是动作的返回值。由于`put`用于其副作用（更改状态），因此它不会返回任何有用的东西。

# r - 使用 SublimeREPL 在远程 ssh 桌面上运行 R 控制台

> ID：12736865
> 
> 赞同：4
> 
> 时间：2012-10-04T22:18:07.357
> 
> 标签：r, sublimetext2

我喜欢 Sublime Text 2，也喜欢 SublimeREPL 在其中运行控制台的能力。

我想知道是否可以通过 ssh 在远程桌面上运行该控制台。

我尝试修改 sublimeREPL 包设置以指向外部机器： `//"default_extend_env":{"PATH":"{PATH};username@remotemachine:R"}`

不幸的是，这没有用。当我运行 sublimeREPL 时，它只是回到了 R 的本地副本。（我正在运行 Mac OS X）

有什么方法可以在远程机器上运行 SublimeREPL 的控制台？理想情况下，图形输出会被 X 转发回本地机器，但这并不是完全必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:13:40.880

这么晚才回复很抱歉：

在此文件中： [https](https://github.com/wuub/SublimeREPL/blob/master/config/R/Main.sublime-menu) ://github.com/wuub/SublimeREPL/blob/master/config/R/Main.sublime-menu尝试将第 21 行更改为

```
 "osx": ["ssh", "yourlogin@yourserver", "R", "--interactive", "--no-readline"], 
```

这是一个黑客，但不知何故对我有用:)

还：

```
 "osx": ["ssh", "-Y",  "yourlogin@yourserver", "R", "--interactive", "--no-readline"],[/code] 
```

可能会或可能不会转发图形输出。试试看。

# objective-c - UIScrollView 不会滚动

> ID：12736866
> 
> 赞同：0
> 
> 时间：2012-10-04T22:18:08.483
> 
> 标签：objective-c, ios, uikit

我有一个 UIScrollView 设置如下：

```
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView; 
```

在 IB 中创建了一个滚动视图并将其连接到顶部的属性。宽度和高度在 IB 中设置（设置为 W:756 H:468 创建滚动视图内容大小并设置滚动启用

```
self.scrollView.contentSize = CGSizeMake(1000, 1000);
self.scrollView.scrollEnabled = YES; 
```

另外，我在视图控制器是另一个视图的子视图的视图中设置它。此视图是使用 NIB 设置的，我添加此子视图的视图位于故事板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:28:12.840

你设置了scrollView的框架吗？

```
self.scrollView.frame = CGRectMake(0, 0, 320.0f, 480.0f);
sefl.scrollView.contentSize =CGSizeMake(1000.0F, 1000.0F); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:55:45.490

我错误地点击了文件检查器中的“使用自动布局”，这导致我的滚动视图即使具有更大的内容大小也无法滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T02:38:52.613

请检查您的滚动视图内容是否长于高度或宽度大小。否则看不到滚动效果！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T00:26:25.717

我有一个类似的问题。我没有将所有内容放在 UIScrollView 中，而是为此创建了一个单独的视图，并将该单独的视图添加到 UIScrollView。

```
@property(nonatomic, retain)IBOutlet UIScrollView *scrollView;
@property(nonatomic, retain)IBOutlet UIView *contentView; 
```

然后在我的viewDidLoad中，我有类似的东西：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    [scrollView addSubview:contentView];
    scrollView.contentSize = contentView.bounds.size;
} 
```

# emacs - 无法在 Emacs org-mode 中的 2 级轮廓上使用粗体

> ID：12736868
> 
> 赞同：1
> 
> 时间：2012-10-04T22:18:22.660
> 
> 标签：emacs, org-mode, emacs-faces

我无法在 org-mode 中使用粗体格式来处理 2 级大纲。例如以下

```
* First level
* First *level*
** Second level
** Second *level* 
```

产生：

*   第一级
*   第一**级**
    *   第二级
    *   第二`*level*`

（即最后一项不以粗体呈现，而 Emacs 只呈现`*`字符）

这是预期的行为吗？如何在除顶部轮廓之外的轮廓中使用粗体？

# php - 有人可以将 IP 地址欺骗到任何号码吗？

> ID：12736872
> 
> 赞同：29
> 
> 时间：2012-10-04T22:18:32.497
> 
> 标签：php, ip-address

IP 地址可帮助 Facebook 和 Google 确定尝试访问您帐户的人是否确实是您。我已经看到代理能够“欺骗”IP 地址，但这不会将其更改为正确的 IP 地址以访问该帐户。如果有人知道我的 IP 地址和我的一个帐户的密码，那么有人可以欺骗他们的 IP 地址来匹配我的吗？像这样的 IP 地址安全性真的安全吗？将它合并到我的 php 脚本中会更好吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-04T22:22:41.423

您不能真正有效地欺骗 IP，因为如果您这样做，http 响应将转到该 IP 而不是您的 IP。因此，这可能不是您时间的最佳利用方式。（它们可能是假的，但它们无法接收到预期的数据。）

通过“接收预期的数据”，我的意思是如果 127.0.9.63 的某人尝试向 Google 发送登录请求，并将其 IP 欺骗为 123.53.53.234，那么 Google 会将响应发送到 123.53.53.234，而不是 127.0。 9.63。这意味着 127.0.9.63 的潜在黑客实际上从未收到与您的帐户有关的任何数据。

这是一种风险（但可能对您而言不是）——这是一种行之有效的 DDoS（分布式拒绝服务）攻击方式。如果您好奇，可以看看[这篇文章。](https://web.archive.org/web/20150427221039/http://www.watchguard.com/infocenter/editorial/41649.asp)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T22:24:06.420

首先要知道的是，*如果*有人知道您的 IP 并试图欺骗它，他们将无法收到任何响应，因为响应将发送到您的 IP。因此，通常无法使用欺骗性 IP 登录网站。

另外值得一提的是，现在任何 ISP 都能够通过过滤来自其网络的请求（这些请求来自不属于其网络的 IP 地址）来防止 IP 欺骗。

spoofer[项目](http://spoofer.csail.mit.edu/summary.php)有很多关于这个主题的有用信息，包括你可以和不能欺骗的 ISP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:23:50.817

IP安全根本不安全。任何人都非常容易找到您的 IP，然后将其伪装成您。根据 IP 检查一个人是否是正确的人并不是一种强有力的安全形式，但它确实有一点帮助。我建议在有问题的客户端计算机上使用 cookie，以便在该计算机上存储一个唯一密钥，该密钥必须与存储在服务器数据库中的密钥匹配。那会安全得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:21:28.890

IP 地址可以完全伪造，但无法接收任何响应数据包。因此，如果他们知道您的 IP 地址，他们就无法使用它来假装是您。但是，我认为您误认为 Google 和 Facebook 使用特定的 IP 地址来确定您是谁。他们可能会使用地理位置来猜测合理性，但他们通常会在您回来时使用 cookie 来识别您的机器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T22:23:05.657

跨不同路由器和跨 IPS 的 IP 欺骗是不可能的。

您可以非常轻松地在 WLAN 中进行 IP 欺骗，尤其是在您进行 MITM 攻击并使用诸如 ettercap 过滤器之类的工具时更容易。但是要离开 WLAN 吗？没有。路由器知道每个区域内的 IP 地址，如果某个区域内无效的 IP 声称来自该区域，它将终止数据包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T22:23:26.337

是的，IP 地址可以被伪造，您无法从使用伪造的 IP 发出的请求中接收到任何数据。我不会说这种方法“那么安全”，但这只是降低问题可能性的另一层安全措施。层数越多，黑客要处理的工作就越多。没有什么是 100% 安全的。

# java - Java访问网桥损坏的dll

> ID：12736874
> 
> 赞同：0
> 
> 时间：2012-10-04T22:18:53.473
> 
> 标签：java, c++, java-access-bridge

在我发现自 Java SE 7 以来 JAB 已包含在 JDK 中后，我终于包含了头文件和库，编译并得到了这个奇怪的错误：

> C:\Program Files (x86)\Java\jre7\bin\JavaAccessBridge-32.dll : 致命错误 LNK1107: Ungültige oder beschädigte Datei: Lesen bei 0x2B8 nicht möglich。

这意味着该库无效或损坏。有人知道这个设置有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:23:47.560

您需要将导入库（可能名为 JavaAccessBridge-32.lib）提供给链接器，而不是 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:03:43.777

好的，问题是 JavaAccessBridge-32.dll 并不是要静态加载的。它是一个纯 dll，必须以编程方式加载。

# php - php 标头位置 - 法语字符

> ID：12736876
> 
> 赞同：0
> 
> 时间：2012-10-04T22:18:58.500
> 
> 标签：php, character-encoding, header, location, special-characters

当 $urlGoBack 变量包含像“é”这样的法语重音字符时，即使我之前使用 mb_convert_encoding() 函数确保它按照应有的方式传递给标题，以下内容也无法正常工作。

```
header("Location: " . $urlGoBack); 
```

我被带到的 URL 已将“é”更改为 %E9，我猜这是它的 URL 等效项。

HTML 字符集是 iso-8859-1，而 mb_detect_encoding($urlGoBack) 返回 UTF-8。

另一方面，如果我尝试将其转换为

```
$urlGoBack = iconv('UTF-8', 'ISO-8859-1//TRANSLIT', $urlGoBack); 
```

或者

```
$urlGoBack = mb_convert_encoding($urlGoBack, "ISO-8859-1", "UTF-8"); 
```

然后`mb_detect_encoding($urlGoBack)`返回 ASCII 并且 "é" 消失了，并且 URL 出错了。令人惊讶的是，当我尝试看似微不足道时，结果完全相同

```
$urlGoBack = mb_convert_encoding($urlGoBack , "UTF-8", "UTF-8"); 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:01:52.347

我认为您需要像这样编码网址

header("位置：" .urldecode($urlGoBack));

[参考 php.net](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:04:59.443

您需要使用 urlencode($urlGoBack)，如下所示：

```
header("Location: " . urlencode($urlGoBack)); 
```

# java - 将文件添加到 JList 后清除 JFileChooser 选择

> ID：12736880
> 
> 赞同：9
> 
> 时间：2012-10-04T22:19:35.427
> 
> 标签：java, jfilechooser

对于用于将 PDF 与 Apache PDFBox 合并的简单 Swing 应用程序，我使用 a`JFileChooser`选择一个或多个 PDF 文件并将其添加到`JList`. 到目前为止没有问题。

困扰我的是，当我单击按钮再次添加另一个文件/文件时，先前的选择仍然存在于 JFileChooser 中，我不希望这样，选择最初应该是空的。

我试过这个，但它既不工作也不抛出异常：

```
 pdfFileChooser.setSelectedFile(null); 
```

以下是相关代码：

```
 pdfFileChooser.setAcceptAllFileFilterUsed(false);
    pdfFileChooser.setMultiSelectionEnabled(true);
    pdfFileChooser.setFileFilter(new FileFilter() {

       @Override
       public boolean accept(File arg0) {
          return arg0.getName().endsWith(".pdf");
       }
       @Override
       public String getDescription() {
          return "*.pdf";
       }
    } );

    JButton btnAddFile = new JButton("Add file");
    btnAddFile.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent arg0) {
          if(pdfFileChooser.showOpenDialog(frame) == JFileChooser.APPROVE_OPTION) {
             addFileToList(pdfFileChooser.getSelectedFiles());
             pdfFileChooser.setSelectedFile(null);
          }
       }
    });

    private void addFileToList(File[] filesToAdd) {
       if((filesToAdd != null) && (filesToAdd.length > 0)) {
          DefaultListModel model = (DefaultListModel)listFiles.getModel();
          for(File file : filesToAdd) {
             if(!model.contains(file)) {
                model.addElement(file);                 
             }
          }
       }
    } 
```

如何从 JFileChooser 中删除选择，以便最初选择没有文件/文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T22:45:41.250

恕我直言，这是~~一个错误~~。

（正如善意指出的那样，“bug”可能是一个强词，因为 API 没有说明如果将 null 传递给该`selectedFile`方法会发生什么。相反，建议它是一个缺失的特性可能更合理）

尝试这样的事情......

```
JFileChooser fc = new JFileChooser();
fc.showOpenDialog(null);
File selected = fc.getSelectedFile();
System.out.println("You selected " + selected);

File currentDirectory = fc.getCurrentDirectory();
// Hack alert
fc.setSelectedFile(new File(""));
fc.setCurrentDirectory(currentDirectory);

fc.showOpenDialog(null);
selected = fc.getSelectedFile();

System.out.println("You selected " + selected); 
```

基本上，所选文件的更改似乎依赖于 UI，并且依赖于`SELECTED_FILE_CHANGED_PROPERTY`属性更改事件。似乎发生的情况是，`null`在更改（特别是）选定的文件文本字段时，它忽略了引用。

我使用 Metal 和 Windows 外观对此进行了测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:11:06.770

这有效：

```
 fileChooser.setSelectedFile(new File(""));
 fileChooser.setSelectedFiles(new File[]{new File("")}); 
```

但是如果您想要一个更快的替代方案，以防您选择了超过 10K 的文件（之前的代码会花费很多时间）。

```
 fileChooser.setSelectedFile(new File(""));
 ((FilePane) fileChooser.getComponents()[2]).clearSelection(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T20:40:17.680

我只需创建一个新的 JFileChooser 实例并将最后使用的目录传递给它。上次使用的目录默认为主目录，当您选择一个有效文件时，您存储该文件的目录并在下次打开新的 JFileChooser 时使用它。

# java - 相机 API：跨设备问题

> ID：12736881
> 
> 赞同：14
> 
> 时间：2012-10-04T22:19:36.167
> 
> 标签：java, android, camera

我正在开发一个相机应用程序，基本上作为消息传递应用程序的一部分来附加图像等。该应用程序需要适用于 >= SDK 2.2 并且：

我**不能**尽可能多地使用默认的 Android 相机，因为：

1.  该应用程序的性质决定了永远不应将图像保存到磁盘，并且一些 OEM（三星）喜欢在不给您选择的情况下这样做。

2.  我不能调用任何其他相机应用程序可以拦截的意图，因为那个应用程序可以保存图像。

我目前的问题是处理Android相机显然讨厌纵向的事实。具体来说，经过一番挖掘后，我正在监视显示，并在旋转时调用`setDisplayOrientation(90)`. 这可行，但表面视图尺寸也需要更改，并且必须在支持的尺寸内完成，否则参数设置会使应用程序崩溃。

我正在使用我在[此处](https://stackoverflow.com/questions/5540981/picture-distorted-with-camera-and-getoptimalpreviewsize)找到的另一个 SO 片段（`getBestPreviewSize()`方法）来执行此操作，但它有一个明显的问题，我不敢相信我还没有发现其他人有。

生命周期的一部分`takePicture`涉及调用`PostView`图片回调。这是显示`SurfaceView`将通过 byteArray 返回到 raw 和/或 jpeg 回调的当前暂停图像的静止图像的内容。我的问题是，这张图片在少数看似随机的测试设备上仍然存在偏差！所以行为是用户以完美的 4:3 纵横比看到动态相机图像，直到他们拍摄照片并且呈现给他们的图像被压扁。请注意，字节数组本身是正确的，当我`Bitmap`在消息传递端点构造它时，它显示得很好，但这仍然是一个问题。

在这一点上，我看不到如何更改静止图像显示。谁能帮我这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:01:40.653

Android相机系统一团糟。并且被焊接到主板上，相机芯片不会喜欢肖像应用程序 - 所有回调都会在相机方向溢出数据（你收到的缓冲区实际上是与本机相机应用程序共享的内存片） - 如果你想在你的应用程序运行时显示它在肖像模式下，您必须将这些数据翻转过来`xy`。

我不会在相机使用的表面视图上显示图像，而是用透明覆盖它`ImageView`并在那里绘制我的位图。

您可能（希望）在[javaocr 项目](http://sourceforge.net/projects/javaocr/)中找到一些灵感，其中 android 守护进程以纵向模式工作并在实时预览中绘制位图。（请从 结帐`git`，因为它现在正在发布，我正在努力使用 git 和 maven，请参阅 demos 目录）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T04:53:58.937

我怀疑你的问题在几个不同的层面。

**传感器安装**

首先，摄像头传感器安装在每个设备上的方式都不同。谷歌有样板代码用于获取该方向并设置正确的旋转值以在[此处](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)进行更正，这对 API 8 来说很好。

**AR校正**

第二个问题显然是预览帧与屏幕的纵横比不同。你可以使用[这篇](https://stackoverflow.com/questions/4835060/android-mediaplayer-how-to-use-surfaceview-or-mediaplayer-to-play-video-in-cor/6283676#6283676)文章来解决这个问题。surfaceview 尺寸与最佳预览尺寸无关，这些值不必匹配 - 事实上，你的 AR 搞砸了证明它们不匹配。

**预览帧大小！= 图片大小**

最后，当您使用 takePicture 拍照时，图片的大小完全独立于预览帧的大小。使用以下查询和设置预览帧大小： [setPreviewSize()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewSize%28int,%20int%29) / [getSupportedPreviewSizes()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)

使用以下查询和设置图片大小（来自 takePicture()）： [getSupportedPictureSizes()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes%28%29) / [setPictureSize()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPictureSize%28int,%20int%29)

您可能会幸运地使用某些设备，图片和预览帧的默认设置将是相同的。并非所有设备都如此。

最后，如果要显示拍摄的图片，如果它与 SurfaceView 的大小不同，则可能还需要对其进行 AR 校正。或者，您可以将其绘制到 ImageView 并使用[ScaleType.CENTER_INSIDE](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)来保持纵横比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:17:24.700

查看有关如何将 QR 扫描仪切换为纵向的帖子：[http](http://code.google.com/p/zxing/issues/detail?id=178) ://code.google.com/p/zxing/issues/detail?id=178 。我不知道这是否与您将图片交换为肖像有关，但也许它提供了一些指导。评论#11 似乎是最有帮助的。（我不赞成从 Sean Owen 那里窃取 QR 应用程序代码）。

# c# - 我可以通过代码而不是属性指定 XMLRoot 吗？

> ID：12736882
> 
> 赞同：6
> 
> 时间：2012-10-04T22:19:44.323
> 
> 标签：c#, xml-serialization

有没有办法在运行时设置对象或类的 xmlroot？

```
[XmlRoot("data")]
public class MyRoot {
    [XmlElement("bar")]
    public List<RemoteHost> Hosts {get;set;}
} 
```

在这种情况下，我没有修改类 MyRoot 的选项；因此，我想指定在使用 XmlSerializer 将对象序列化为 XML 之前，我希望将根名称称为“数据”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T22:30:04.693

是的！简单地：

```
var serializer = new XmlSerializer(typeof(MyRoot),
    new XmlRootAttribute("data")); 
```

或更完整地，请参阅`XmlAttributeOverrides`。但是，对于其中任何一个，您都**必须**缓存和重用序列化程序实例，否则您将泄漏程序集。

# python - heroku syncdb 用于具有多个应用程序的现有 Django 项目

> ID：12736886
> 
> 赞同：1
> 
> 时间：2012-10-04T22:20:28.650
> 
> 标签：python, django, heroku

我正在将一个现有的 Django 项目（带有多个应用程序）部署到 Heroku。我已按照 Heroku[文档](https://devcenter.heroku.com/articles/django)中的步骤进行操作。当我运行时，`heroku run python manage.py syncdb`我收到以下错误：

```
Running `python manage.py syncdb` attached to terminal... failed
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app APP. 
```

我尝试了这些建议，但问题仍然存在。另外，我想知道是否有一种方法可以为我现有的所有应用程序自动创建数据库表，而无需指定每个应用程序。

我也在使用 South，但我仍然不确定如何正确地将迁移转移到 Heroku。也许这是问题的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:30:59.660

```
git remote add heroku git@heroku.com:{YOUR_APP_NAME}.git
git config heroku.remote heroku 
```

这里`app`提到的不是您的 django 应用程序，而是您的项目名称。

# java - 如何在 Java 中交换 arrayMap 值和键

> ID：12736887
> 
> 赞同：2
> 
> 时间：2012-10-04T22:20:34.750
> 
> 标签：java, map, key-value

我在反转给定的地图并将其反转的键和值存储到另一个地图中时遇到了一些麻烦。我有一个方法原型如下：

```
public static Map<String, Set<String>> reverse (Map <String, Set<String>> graph); 
```

因此，如果我有有向图的示例键，例如：

```
{c -> arraySet{f, e}}
{b -> d}
{a -> arraySet{c, b}} 
{d -> g}
{e -> d}
{f -> arraySet{g, d}} 
```

我需要有效地反转这个图，以便我有 d -> b 而不是 b -> d。

我认为这对我来说就是交换原始图中的值和键并将它们添加到 reverseMap 中。我想我可以遍历图中给定键的每组值，然后将它们存储在列表中。

不幸的是，我在实施和思考时遇到了麻烦。我真的很感激朝着正确的方向轻推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:48:34.073

[这是使用Guava](https://code.google.com/p/guava-libraries/) Multimaps的实际、有效、最新的代码：

```
SetMultimap<Integer, Integer> graph = HashMultimap.create();
graph.put(1, 2); // add an edge from 1 to 2
SetMultimap<Integer, Integer> inverse = Multimaps.invertFrom(
  graph, HashMultimap.<Integer, Integer> create()); 
```

（披露：我为 Guava 做出了贡献。）

但是，如果您不能使用第三方库，请执行以下操作...

```
Map<Integer, Set<Integer>> g;
Map<Integer, Set<Integer>> gInverse = new HashMap<Integer, Set<Integer>>();
for (Map.Entry<Integer, Set<Integer>> gAdj : g.entrySet()) {
  Integer v = gAdj.getKey();
  for (Integer w : gAdj.getValue()) {
    Set<Integer> wInverseAdj = gInverse.get(w);
    if (wInverseAdj == null) {
      gInverse.put(w, wInverseAdj = new HashSet<Integer>());
    }
    wInverseAdj.add(v);
  }
} 
```

或者，如果您可以使用 Java 8，请使用此...

```
map.entrySet().stream()
   .flatMap(entryKToVs -> entryKToVs.getValue().stream()
       .map(v -> new AbstractMap.SimpleEntry<>(entryKToVs.getKey(), str)))
   .collect(groupingBy(Map.Entry::getValue, mapping(Map.Entry::getKey, toList()))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:32:06.757

伪代码，但接近真实。只需使用[Multimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html)。

```
Multimap<String, String> ret = Multimaps.newSetMultimap();
for (Entry<String, Set<String>> entry : graph) {
  for(String neighbor : entry.getValue()) {
    ret.addTo(neighbor, entry.getKey());
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T22:31:13.497

您将需要遍历地图中的条目，然后，由于这些值存储在一个集合中，您将需要遍历该集合。您将需要检查每个键的结果映射，并在键尚不存在时创建一个新集。

```
public static Map<String, Set<String>> reverse (Map <String, Set<String>> graph) {
    Map<String, Set<String>> result = new HashMap<String, Set<String>>();
    for (Map.Entry<String, Set<String>> graphEntry: graph.entrySet()) {
        for (String graphValue: graphEntry.getValue()) {
            Set<String> set = result.get(graphValue);
            if (set == null) {
                set = new HashSet<String>();
                result.put(graphValue, set);
            }
            set.add(graphEntry.getKey());
        }
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:25:56.433

我首先建议编写一个`Graph`抽象出底层`Map`数据结构的类。当然，这只是将实现推送到`Graph`接口，而不是直接与接口打交道`Map`。

所以现在，坚持你的地图：

```
Map<String, Set<String>> graph;
Map<String, Set<String>> reverse; 
```

我建议使用[Map.entrySet()](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29)从您的`graph`. 然后对于每个[Map.Entry](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)，检索每个的键和值。接下来，对于 value 中的每个“顶点” `Set`，将 key 插入`Set`与顶点关联的 key 中。

如果我将其格式化为类似于 Java 代码而不是英文句子，这可能会更清楚。我希望你能得到基本的想法。当然，如果它适合您的项目限制，则最好使用预制和预先测试的解决方案。

# javascript - 将 localStorage 设置为变量 | 发生什么了？

> ID：12736889
> 
> 赞同：0
> 
> 时间：2012-10-04T22:20:38.743
> 
> 标签：javascript

在下面的片段中。

是否所有本地存储都从磁盘拉到变量缓存中？

```
(function(){
    var publik = {}, 
        cache = localStorage;

    publik.get = function(){};  // getter
    publik.set = function(){};  // setter
    return publik;
})() 
```

是/否以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:25:48.147

您在变量中存储的是指向 localStorage 对象的指针，该对象不“包含”磁盘数据，它会在您请求时提供给您。

所以不，它不会将磁盘数据拉入内存

更新：

如果要缓存本地存储，可以对其进行交互并逐个请求每个键

```
for (var key in localStorage)
    cache[key] = localStorage[key]; 
```

在这里，您询问每个密钥的本地存储并读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:26:21.833

不。

cache 现在引用 localStorage 对象。这个对象也引用了它的属性。您不是在对对象进行“克隆”，而只是告诉缓存引用它。

# c# - 在 Linux 中从 C# Mono 应用程序中运行命令

> ID：12736891
> 
> 赞同：1
> 
> 时间：2012-10-04T22:20:39.213
> 
> 标签：c#, linux, mono, console, terminal

我想知道在 Ubuntu 中运行的 Mono C# 应用程序是否可以以某种方式运行终端命令。例如，用户是否可以给程序他或她的密码，然后让应用程序运行

```
sudo apt-get install application-name

(console requests password)

password

(console requests confirmation)

y 
```

优选地，这将在不实际打开对用户可见的终端的情况下完成，以便应用程序可以提供必要的反馈并在尽可能少的用户交互的情况下干净地管理整个操作。

有没有办法做到这一点？如果是这样，怎么做？让我知道是否需要澄清。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:16:45.490

应该可以，您只需将密码重定向到**Process**类的[StandardInput](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardinput.aspx)流。

# php - PHP：使用自定义函数使用原生编写更少的代码：会更快吗？

> ID：12736893
> 
> 赞同：0
> 
> 时间：2012-10-04T22:20:58.187
> 
> 标签：php, native-code

说我有一些我经常使用的东西。例如，当我使用大约 90% 的时间

```
explode ($delimiter, $string); 
```

通常你会这样使用它：

```
$string = "blah/blah/blah";
$e = explode("/", $string); 
```

如果我编写自定义函数，PHP 会更快吗？

```
#reusable 
function c4($str) {
    return explode("/", $str); 
} 
$e = c4("blah/blah/blah/"); 
```

或者当写成匿名函数时？

```
#reusable
$c4 = function($str) {
    return explode("/", $str);
};
$e = $c4("blah/blah/blah"); 
```

我不知道该怎么说，但也许这是一个正确的问题：PHP 是否“缓存”用户函数以备将来使用（解析时）？如果是这样，使用本机函数和重用相同自定义函数的断点是什么，在使用相同参数时变得更高效。可能是因为可解析代码的数量较少？

只需阅读 StackOverflow 的建议：

```
"We prefer questions that can be answered, not just discussed." 
```

所以我真的希望这不会以讨论结束。非常好奇地等待您的回复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T22:23:03.950

不，它会更慢，因为现在它也需要进行函数调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T22:25:51.807

我认为你应该自己看看，你会使用`x2`正常的系统资源

```
$string = "blah/blah/blah";
$max = 1000;

echo "<pre>";
$start = microtime(true);
for($i = 0; $i < $max; $i ++) {
    $e = explode("/", $string);
}
echo microtime(true) - $start, PHP_EOL;

$start = microtime(true);
function c4($str) {
    return explode("/", $str);
}
for($i = 0; $i < $max; $i ++) {
    $e = c4("/", $string);
}
echo microtime(true) - $start, PHP_EOL;

$start = microtime(true);
$c4 = function ($str) {
    return explode("/", $str);
};
for($i = 0; $i < $max; $i ++) {
    $c4($string);
}
echo microtime(true) - $start, PHP_EOL; 
```

输出

```
0.019805192947388
0.040219068527222
0.040642023086548 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T22:28:24.870

我知道这不完全是你问的，但这里还有一些其他的事情需要考虑。

1.  它会让您*和您的团队*更快或更慢地编写代码吗？

2.  当您需要在两年后返回并进行更改时，它会提高还是降低代码的可读性。或者当下一个程序员继承它？

3.  它有助于您坚持 DRY 原则吗？

我会说在这种特定情况下，您最好使用爆炸或拆分。人们已经知道它的含义，因此代码是可读的。两年后，您将不会记得 c4 是什么（尽管如果您将函数命名为类似`split_on_slashes`的名称可能会改进您的代码）。

鉴于您的函数本质上是复制一行代码，我不认为它真的有助于保持 DRY。基本上你省去了打字的麻烦`"/",`

但是，如果您经常重复的只是一小段两三行代码，那么这种方法可能会加快您的编码速度，减少出错的机会，并帮助您保持 DRY。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T22:23:12.953

不，它永远不会更快，因为最终您将依赖相同的内置函数。

实际上，每次调用都会消耗更多的时间来预处理文件、更多的内存和更多的 CPU 时间，更不用说命名常用函数时会产生的混乱`c4`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T22:23:35.237

不，PHP 不会比直接调用内置函数更快地执行您的包装版本。它总是一个额外的函数调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T22:24:28.383

不管“缓存”现在必须执行两个功能。所以它肯定会增加一些东西。

# asp.net - 防止负载均衡器在长时间运行期间超时

> ID：12736906
> 
> 赞同：6
> 
> 时间：2012-10-04T22:21:56.477
> 
> 标签：asp.net, asp.net-mvc, load-balancing

我正在使用 ASP.NET MVC 4 来接受最大 30 mb 的视频上传。将视频上传到站点后，然后使用 HttpWebRequest 将视频发布到第 3 方 Web 服务。在我的网站可以向浏览器返回响应之前，必须完成向 3rd 方服务的上传并返回响应。在 Rackspace 云站点上，负载均衡器有 30 秒的超时。如果在 30 秒内没有通过负载均衡器从我的站点返回任何响应，则负载均衡器会向浏览器返回超时错误并终止请求。

因此，我被告知需要发生的是，我的站点需要通过在我的站点将视频发送到第 3 方系统时将数据发送回浏览器来保持连接，以便负载均衡器不会超时。你将如何完成这项任务？

我正在寻找 2 件事 - 上传时我将什么作为数据发送回浏览器？我的实际响应是 JSON，所以如果我能在最后保留我的常规 JSON 响应，那将是理想的。

最后，如何在发送保活数据的同时执行我的 HttpWebRequest 上传到第 3 方？

-

作为参考，这是来自 rackspace 云的负载均衡器连接超时文档：[http ://www.rackspace.com/knowledge_center/article/connection-timed-out-error-message-1](http://www.rackspace.com/knowledge_center/article/connection-timed-out-error-message-1)

他们没有为这个问题提供任何具体的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:07:46.443

这是我解决问题的方法。此解决方案应适用于使用具有不合理超时的负载平衡器的任何 .net 托管。Rackspace 云站点的负载均衡器有 30 秒的超时。Amazon 和 Azure 的超时时间更长，但如果您碰巧有一个长时间运行的操作，这仍然可能是一个有用的解决方案。

在 asp.net mvc 4 中，您可以将控制器更改为从 AsyncController 继承。这允许您分离异步任务，然后等待它们完成。此解决方案创建一个“保持活动状态”任务，该任务每 10 秒通过 asp.net 响应发回数据，以便负载均衡器检测到活动并且不会超时。该任务一直运行，直到它看到uploadFinished 变量设置为true。

另一个任务执行长时间运行的上传，或者在 asp.net mvc 控制器结束它正在处理的 Web 请求之前需要完成的任何任务。长时间运行的操作完成后，它将uploadFinished 变量设置为true。

最后，我围绕实际的 json 响应手动构建了一个容器 json 对象，这样我就可以让“保持活动”数据成为发送回浏览器的有效 json 的一部分。一个有点丑陋的黑客，但它有效！

```
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Web;
using System.Web.Mvc;
using System.Web.Script.Serialization;

namespace MvcApplication4.Controllers
{
    public class ExampleController : AsyncController
    {

        [HttpPost]
        public string Upload(UploadModel model, HttpPostedFileBase videoFile)
        {
            // when using jquery ajax form for upload
            // IE requires text/plain content type
            // otherwise it will try to open the response as a file
            // instead of pass the response back to your javascript
            if (Request.AcceptTypes.Contains("application/json"))
            {
                Response.ContentType = "application/json";
            }
            else
            {
                Response.ContentType = "text/plain";
            }

            // start json object
            Response.Write("{\"keepalive\":\"");
            Response.Flush();

            Task[] tasks = new Task[2];
            tasks[0] = Task.Factory.StartNew(() => DoKeepAlive());
            tasks[1] = Task.Factory.StartNew(() => DoUpload(model, videoFile));
            Task.WaitAll(tasks);

            // end keepalive json property
            Response.Write("\",\"data\":");

            // insert actual response data
            JavaScriptSerializer json = new JavaScriptSerializer();
            Response.Write(json.Serialize(uploadResponse));

            // end json object
            Response.Write("}");

            return "";
        }

        public bool uploadFinished = false;
        public UploadResponseModel uploadResponse = null;

        public void DoUpload(UploadModel model, HttpPostedFileBase videoFile)
        {
            // do upload to 3rd party
            MyServiceClient c = new MyServiceClient();
            uploadResponse = c.UploadVideo(model, videoFile);
            uploadFinished = true;
        }

        public void DoKeepAlive()
        {
            // send . every 10 seconds
            while (!uploadFinished)
            {
                Response.Write(".");
                Response.Flush();
                Thread.Sleep(10000);
            }
        }
    }
} 
```

此解决方案依赖于 .Net 4 来执行异步操作。如果您有 .Net 4.5，则有更新的方法可以在不依赖 AsyncController 类的 mvc 控制器中执行异步操作。

该站点很有帮助，并解释了如何在各种版本的 .Net 框架中在 asp.net mvc 中执行异步操作：

[http://dotnet.dzone.com/news/net-zone-evolution](http://dotnet.dzone.com/news/net-zone-evolution)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:49:47.727

太糟糕了，您无法为您的站点调整负载均衡器配置。

我想你想做一个 javascript keep-alive。

例如：

```
(function poll(){
$.ajax({ url: "server", success: function(data){
    //Update your dashboard gauge
    salesGauge.setValue(data.value);

}, dataType: "json", complete: poll, timeout: 30000 });
})(); 
```

参考：

[相关问题](https://stackoverflow.com/questions/809434/keeping-a-jquery-getjson-connection-open-and-waiting-while-in-body-of-a-page)

[jQuery 示例](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

# java - 安卓：我做错了什么？简单的 wake_lock 代码在启动时崩溃

> ID：12736909
> 
> 赞同：0
> 
> 时间：2012-10-04T22:22:18.800
> 
> 标签：java, android, wakelock, android-wake-lock, android-permissions

我想做的就是用一个按钮启动wake_lock，然后用另一个按钮结束它。它可以在我正在创建的更大的应用程序中使用，但这是我一直遇到问题的部分。我查看了这个网站和其他网站，发现所有代码都完全相同，但它对我不起作用 -**我做错了什么？**

**我的 Java 代码：**

```
package com.example.tester_app;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.PowerManager;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class TestMain extends Activity {

PowerManager.WakeLock wl;
Button bstart, bstop;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView (R.layout.main);

    //Views from xml
    bstart = (Button) findViewById (R.id.bStart);
    bstop = (Button) findViewById (R.id.bStop);

    //power manager for wake lock..
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Tag");

    bstart.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Toast.makeText(TestMain.this, "started", Toast.LENGTH_SHORT).show();
            wl.acquire(); //keeps cpu from sleeping
        }
    });

    bstop.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(TestMain.this, "stopped", Toast.LENGTH_SHORT).show();
            wl.release();
        }
    }); 
}
} 
```

**我的 XML 代码：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_layout_id"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical" >

<Button
    android:id="@+id/bStart"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Start" />

<Button
    android:id="@+id/bStop"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="12dp"
    android:text="Stop" />

</LinearLayout> 
```

**我的清单代码：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.tester_app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.WAKE_LOCK" ></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:34:08.847

看起来您的 Activity 类的名称与您在清单中给出的名称不同（TestMain 与 Main）。确保它们都相同。

# oracle - 试图从 Oracle 函数中获取表。改为获取不一致的数据类型

> ID：12736912
> 
> 赞同：0
> 
> 时间：2012-10-04T22:22:43.017
> 
> 标签：oracle, plsql, stored-functions, ora-00932

我正在尝试从 Oracle 中的存储函数返回查询。这个简单的尝试失败了：

```
CREATE OR REPLACE TYPE GetObjectsForFolderObjectType IS OBJECT (
       FOLDER_ID NUMBER(9), OBJECT_ID NUMBER(9)
);

CREATE OR REPLACE TYPE GetObjectsForFolderTableType IS
       TABLE OF GetObjectsForFolderObjectType;

CREATE OR REPLACE FUNCTION GetObjectsForFolder
       (FOLDER_ID INTEGER, FOLDER_DATA_TABLE VARCHAR2)
RETURN GetObjectsForFolderTableType IS 
       THE_RESULT GetObjectsForFolderTableType := GetObjectsForFolderTableType ( );
BEGIN 
       EXECUTE IMMEDIATE 'SELECT * FROM '||FOLDER_DATA_TABLE BULK COLLECT INTO THE_RESULT;
       RETURN THE_RESULT;
END; 

SELECT * FROM TABLE(GetObjectsForFolder(1, 'MY_TABLE_NAME')); 
```

上面的结果是

```
ORA-00932: inconsistent datatypes: expected - got -
ORA-06512: at "USERNAME.GETOBJECTSFORFOLDER", line 6
00932\. 00000 -  "inconsistent datatypes: expected %s got %s"
*Cause:    
*Action: 
```

注意：虽然我在示例中掩盖了一些内容，但 ORA-00932 行确实显示“预期 - 得到 -”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:02:47.650

在您的动态 PL/SQL 语句中，您不能将表列直接批量收集到您的对象表中。相反，您必须先将列选择到对象中，然后将对象批量收集到表类型中：

```
 CREATE OR REPLACE TYPE GetObjectsForFolderObjectType IS OBJECT (
           FOLDER_ID NUMBER(9), OBJECT_ID NUMBER(9)
    );

    CREATE OR REPLACE TYPE GetObjectsForFolderTableType IS
           TABLE OF GetObjectsForFolderObjectType;

    CREATE OR REPLACE FUNCTION GetObjectsForFolder
           (FOLDER_ID INTEGER, FOLDER_DATA_TABLE VARCHAR2)
    RETURN GetObjectsForFolderTableType IS 
           THE_RESULT GetObjectsForFolderTableType := GetObjectsForFolderTableType ( );
    BEGIN 
           EXECUTE IMMEDIATE 'SELECT GetObjectsForFolderObjectType(folder_id, object_id) FROM '||FOLDER_DATA_TABLE BULK COLLECT INTO THE_RESULT;
           RETURN THE_RESULT;
    END; 
```

# eclipse - NoClassDefFounError:AndroidWebDriver。eclipse 项目中的一切似乎都很好。我怎样才能摆脱这个错误？

> ID：12736917
> 
> 赞同：0
> 
> 时间：2012-10-04T22:23:06.557
> 
> 标签：eclipse, selenium, webdriver

1.  我正在尝试按照 [http://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)上的说明执行 AndroidWebDriver。

2.  我在 Eclipse 中导入了这些项目并确保没有错误；但是，在执行脚本（SimpleGoogleTest）时，我得到了上述错误。

3.  我附上这个问题的截图。![在此处输入图像描述](../Images/5ac4211c65cd36d630a4a044b9c914bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:52:00.577

我认为您只是创建了 .apk 文件。您需要在创建的 apk 文件的导出路径中包含 server-standalone.jar

# php - Echo html 包含 php 函数

> ID：12736929
> 
> 赞同：0
> 
> 时间：2012-10-04T22:24:33.590
> 
> 标签：php, echo

当它包含php函数时，有人可以解释一下回显html吗？我试图回应以下内容，但找不到有用的参考。

```
<a href="<?php comments_link(); ?>"><?php comments_number('<span class="nocomments">comments</span>', '<span class="onecomment">1 comment</span>', '<span class="morecomments">% comments</span>'); ?></a> 
```

感谢您的帮助！

更新了下面的代码，我希望我能说清楚。如果评论未打开/已关闭，我试图将 else 条件作为文本回显。

```
<?php
if ( comments_open() ) :
echo '<p>';
comments_popup_link( '<span class="one-comment">leave a comment</span>', '<span class="one-comment">1 comment</span>', '<span class="more-comments">% comments</span>', '');
echo '</p>';
else 
echo 
```

以下：

```
<a href="<?php comments_link(); ?>"><?php comments_number('<span   class="zerocomments">comments</span>', '<span class="onecomment">1 comment</span>',    '<span class="morecomments">% comments</span>'); ?></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:32:41.523

```
<?php
if (comments_open()) {
    echo '<p>';
    comments_popup_link( '<span class="one-comment">leave a comment</span>', '<span    class="one-    comment">1 comment</span>', '<span class="more-comments">% comments</span>', '');
    echo '</p>';
} else {
?>
    <a href="<?php echo comments_link(); ?>"><?php echo comments_number('<span   class="zerocomments">kommentarer</span>', '<span class="onecomment">1 kommentar</span>',    '<span class="morecomments">% kommentarer</span>'); ?></a>
<?php
}
?> 
```

当 HTML 包含 PHP 函数时，回显 HTML 的最佳方法是退出 PHP，如上所示。

我不确定您到底要做什么，但其余的取决于您。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:28:35.027

像这样尝试：

```
<a href="<?php echo comments_link(); ?>"><?php echo comments_number('<span class="nocomments">comments</span>',     '<span class="onecomment">1 comment</span>', '<span class="morecomments">% comments</span>'); ?></a> 
```

看起来您只需要显式调用 echo 函数。

# java - 将新套接字放入码头上的信任库后重新启动 sslsocketconnector

> ID：12736931
> 
> 赞同：1
> 
> 时间：2012-10-04T22:24:41.853
> 
> 标签：java, ssl, jetty, jmx

我有一个码头网络服务器。我正在尝试将证书注册到信任库中。

证书已正确注册，但是当客户端尝试使用已注册的证书进行身份验证时，在信任库中找不到证书。

但是证书在信任库中，但还没有被码头加载。

同样的问题发生在 tomcat 中，但是当我使用 jmx 重新启动 CONNectorMBean 时，它开始工作。

现在在码头中，当我使用 JMX 重新启动 sslsocketconnector 时，它会重新启动但连接中断，因此我无法重新加载证书，然后在从信任库加载证书后将消息发送回客户端。

我正在尝试使用以下代码重新启动 sslsocketconnector

```
 try{
           MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
            Set names = mBeanServer.queryNames(new ObjectName("*:*"), null);

             Iterator it=names.iterator();
             while( it.hasNext()) {
                ObjectName oname= (ObjectName)it.next();

                MBeanInfo minfo = mBeanServer.getMBeanInfo(oname);

                if (minfo.getClassName().equals("org.mortbay.jetty.security.SslSocketConnector")) {
                    System.out.println("found ssl socket connector... will try to restart it");

                         System.out.println("Restarting SSL Connector on port ");
                         Object params[] = {};
                         String signature[] = {};
                         ;
                         /**
                          * Stop and restart the connector to get it to re-read the certificate trustfile
                          */
                         mBeanServer.invoke(oname, "stop", params, signature);
                         mBeanServer.invoke(oname, "start", params, signature);

                      }
                   }
                }
        catch (Exception e) {
             System.out.println("Did not restart SSL Connector: " + e);
             e.printStackTrace();
             throw e;
          } 
```

谁能告诉我在不重新启动服务器和破坏现有套接字的情况下在信任库中重新加载证书的好方法？

谢谢

# php - 如何在使用 Symfony2 保存之前设置或更改实体值

> ID：12736936
> 
> 赞同：3
> 
> 时间：2012-10-04T22:25:02.640
> 
> 标签：php, symfony, doctrine-orm, entity

如果它是例如NULL，我想更改实体值。不幸的是，我的代码导致异常 - 尽管在数据库中创建了“翻译”记录并且 id 由 getId 方法正确返回，但似乎没有设置 id。

这是很简单的代码，为什么它不起作用？

```
public function createAction(Request $request)
{
    $entity  = new Word();
    $form = $this->createForm(new WordType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {

        $em = $this->getDoctrine()->getManager();

        //works fine - database record is created
        if($entity->getIdTranslation() == NULL){
            $translation = new Translation();
            $em->persist($translation);
            $em->flush();
            $entity->setIdTranslation($translation->getId());
        }

        $em->persist($entity);
        //throws exception - Integrity constraint violation: 1048 Column 'id_translation' cannot be null  
        $em->flush();

        return $this->redirect($this->generateUrl('admin_word_show', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

编辑：添加了我的模型和映射信息的一部分：

![overwiev 模型的一部分](../Images/b28f26f7f49e4ea8c08834b0b2a44886.png)

相关词映射：

```
 /**
 * @var integer $id_language
 *
 * @ORM\Column(name="id_language", type="integer")
 */
private $id_language;
/**
 *@ORM\ManyToOne(targetEntity="Language", inversedBy="words")
 *@ORM\JoinColumn (name="id_language", referencedColumnName="id")
 */
protected $language;

/**
 *
 * @ORM\ManyToOne(targetEntity="Translation", inversedBy="words")
 * @ORM\JoinColumn(name="id_translation", referencedColumnName="id")
 */
protected $translation; 
```

和翻译：

```
class Translation
 {

public function __construct() {
    $this->words = new ArrayCollection();
}
/**
 * @ORM\PrePersist()
 */
public function prePersist() {
    $this->created_date = new \DateTime();
}
 /**
 *
 * @ORM\OneToMany(targetEntity="Word" ,mappedBy="translation")
 */
protected $words; 
```

另请注意：我使用数据库建模软件（工作台）而不是 Symfony 控制台工具创建了我的数据库模型，现在我正在尝试设置实体以反映数据库模型。我不确定它的方法是否正确——也许我的模型太复杂而无法与 Doctrine 一起正常工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-24T12:52:32.857

**生命周期回调**

**有时，您需要在插入、更新或删除实体**之前或之后执行操作。这些类型的操作称为“**生命周期**”回调，因为它们是您需要在实体生命周期的不同阶段（例如，插入、更新、删除实体等）执行的回调方法。

生命周期回调*应该是与内部转换实体中的数据有关的简单方法*（例如设置创建/更新字段，生成 slug 值）

如果你需要做一些更重的工作——比如执行日志记录或发送电子邮件——你应该注册一个外部**类作为事件监听**器或订阅者，并让它访问你需要的任何资源。有关详细信息，请参阅如何注册[事件侦听器和订阅者。](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:39:14.303

一个更好的地方是`Word`类的构造函数：

```
class Word
{
    /**
     * @OneToOne(targetEntity="Translation", cascade={"persist"})
     */
    private $translation;

    public function __construct()
    {
        $this->translation = new Translation;
    }
} 
```

顺便说一句，您不需要手动保存翻译 ID，因为它是由 Doctrine 处理的。

```
$word = new Word;

$em->persist($word);
$em->flush();

$translation = $word->getTranslation();
$translationId = $translation->getId(); 
```

# jquery - IE 不加载 ajax 请求

> ID：12736938
> 
> 赞同：0
> 
> 时间：2012-10-04T22:25:22.977
> 
> 标签：jquery, ajax, internet-explorer

我有一个脚本，通过 ajax 加载数据，拆分它，反转它并在页面上显示它。像往常一样，除了可怕的 IE 之外，它在所有浏览器上都运行良好。它在 IE 中不会引发任何错误，只是不会加载。我正在使用 Twitter Bootstrap，jQuery v1.7.1。如果可以的话请帮忙。干杯

```
$.ajax({
      url: "insert_URL_here",
      success: function(data){

        var number_box = $('.number_box');
        var number_list = data.split("");

        number_list.reverse();

        for(var i=0; i < number_box.length; i++)
        {

          if(number_list.length > i)
          {
              $(".unit_"+i).html(number_list[i]);
          }
          else
          {
              $(".unit_"+i).html("0");
          }
        }
      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:27:38.240

尝试将 dataType 属性设置为 json ..

如果您希望您的请求数据是 json 格式..

```
dataType : 'json'  and also the data 

$.ajax({
      url: 'insert_URL_here',
      data : '{}',
      dataType : 'text',  // OR  dataType : 'html',
      success : 
```

# c# - 仅在特定 GridViewColumn 中右键单击时显示上下文菜单

> ID：12736939
> 
> 赞同：2
> 
> 时间：2012-10-04T22:25:25.470
> 
> 标签：c#, wpf, xaml, gridview, contextmenu

我有一个多列的 GridView。我只想在右键单击特定菜单中的项目时显示 ContextMenu。这是我到目前为止所拥有的：

```
<GridView>
    <GridViewColumn>
        <!-- Show context menu for this column --> 
        <GridViewColumn.CellTemplate>
            <DataTemplate>
                ...
            </DataTemplate>
        </GridViewColumn.CellTemplate>
    </GridViewColumn>

    <GridViewColumn>
        <!-- Do not show context menu for this column -->
        <GridViewColumn.CellTemplate>
            <DataTemplate>
                ...
            </DataTemplate>
        </GridViewColumn.CellTemplate>
    </GridViewColumn>
</GridView> 
```

我尝试`GridViewColumn.ContextMenu`在标签之间添加一个，`<GridViewColumn></GridViewColumn>`但似乎不存在。我也尝试将它添加到内部`GridViewColumn.CellTemplate`并且`DataTemplate`没有任何运气。

关于如何`ContextMenu`为特定列提供任何建议？c

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:43:28.067

您应该将其添加到的第一个子项中`DataTemplate`（即，它必须是 a 的子项`FrameworkElement`）。

```
<GridViewColumn>
    <!-- Show context menu for this column --> 
    <GridViewColumn.CellTemplate>    
        <DataTemplate>
            <Grid>
                <ContextMenuService.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Menu Item" />
                    </ContextMenu>
                </ContextMenuService.ContextMenu>
            </Grid>
        </DataTemplate>
    </GridViewColumn.CellTemplate>    
</GridViewColumn> 
```

# arrays - 在java中创建一个包含多个数组的文件

> ID：12736940
> 
> 赞同：0
> 
> 时间：2012-10-04T22:25:27.833
> 
> 标签：arrays, file, stream, size, createfile

给定一个字节数组，我可以使用代码从中创建一个文件

```
Files.write(String path, byte[] byteArray) 
```

问题是，因为我必须使用非常大的数组大小，而且我不能制作一个长大小的数组

```
long n = 100000000;
byte byteArray = new byte[n]; //ERROR! Required int, found long 
```

我所做的是我有几个字节数组。例如，因为我不能有一个 4gb 的数组，所以我制作了 20 个 200mb 的字节数组。这 20 个数组代表一个文件的信息。现在，我怎样才能从这个字节数组创建一个文件？我知道的唯一方法是使用 Files.write，但这仅适用于 1 个数组。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:30:46.523

你可以使用：

```
Files.write(path, bytes, StandardOpenOption.APPEND); 
```

在第一个电话之后。

更好的方法（不需要重新打开文件 20 次）是使用[FileOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html)，例如：

```
FileOutputStream fos = new FileOutputStream(path);
for(int i = 0; i < byteArrays.length; ++i)
{
    fos.write(byteArrays[i]);
} 
```

# php - 错误 1064 - MySQL

> ID：12736942
> 
> 赞同：0
> 
> 时间：2012-10-04T22:25:31.267
> 
> 标签：php, mysql

出于某种原因，我收到以下 MySQL 错误，但我似乎无法确定我出错的地方。请您告诉我错误的位置以及如何解决它？

> # 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法使用
> 
> 靠近 '"4ed2a19702d5feaa1eea283f", 'Pizza Hut', 'Pizza Place', 51.604771458125, -0.1884' 在第 1 行

询问：

```
INSERT INTO `venues` (`fq_id`, `title`, `category`, `latitude`, `longitude`, `location`) ('4ed2a19702d5feaa1eea283f', 'Pizza Hut', 'Pizza Place', 51.604771458125, -0.18844127655029, '{\"address\":\"128 Ballards Lane\",\"lat\":51.604771458125,\"lng\":-0.18844127655029,\"postalCode\":\"N3 2PA\",\"city\":\"London\",\"country\":\"United Kingdom\",\"cc\":\"GB\",\"distance\":0}') 
```

表结构：

```
CREATE TABLE `venues` (
  `fq_id` varchar(255) NOT NULL,
  `title` varchar(255) NOT NULL,
  `location` text NOT NULL,
  `category` varchar(50) NOT NULL,
  `latitude` float(10,6) NOT NULL,
  `longitude` float(10,6) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`fq_id`),
  KEY `category` (`category`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:26:53.050

您错过了`VALUES`关键字：

```
INSERT INTO `venues` (`fq_id`, `title`, `category`, `latitude`, `longitude`, `location`)
VALUES
(...) 
```

# django - Django：在 list_display 中显示 ManyToManyField 和泛型关系

> ID：12736946
> 
> 赞同：1
> 
> 时间：2012-10-04T22:25:49.533
> 
> 标签：django, admin, django-orm

我正在尝试使用 list_display 访问管理员中的字段。根据文档：（[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)），不支持ManyToManyFields。我通过创建这样的自定义方法解决了这个问题：

```
#models.py
class Gig
    musician = models.ManyToManyField(Musician)
    note = models.CharField(max_length=20)

    def __unicode__(self):
        return u'%s' % (self.note)

    def gig_musicians(self):
        return self.musician.all()

#admin.py
class GigAdmin
    list_display = ('note', 'gig_musicians') 
```

这给了我正在寻找的结果，但它非常难看（这也适用于通用关系）。结果如下所示：

```
 [<Musician: Richard Bona>, <Musician: Bobby Mcerrin>] 
```

我认为这是因为我如何构建方法。您对如何使它更优雅（即只是名称）有什么建议吗？

我尝试了其他解决方案，例如 [django display content of a manytomanyfield](https://stackoverflow.com/questions/4564086/django-display-content-of-a-manytomanyfield)，但我无法让它为我工作（它只是显示无）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:28:42.417

您的当前`gig_musicians`返回 a `QuerySet`，而不是字符串。

试试这个`gig_musicians`功能：

```
def gig_musicians(self):
   return ', '.join([obj.name for obj in self.musician.all()]) 
```

# email - Exacttarget ampscript 显示/隐藏移动电子邮件内容

> ID：12736949
> 
> 赞同：1
> 
> 时间：2012-10-04T22:26:01.017
> 
> 标签：email, exacttarget, ampscript

我正在尝试根据用户代理/屏幕大小显示电子邮件内容，以便我可以在手机上显示图像，即如果此电子邮件在桌面上打开 - 不要显示此内容，如果相同的电子邮件是在手机上打开 - 显示此内容。

有谁知道这是否可以通过精确的目标 ampscript 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T13:08:39.467

简短的回答是否定的。

在发送电子邮件之前读取 AMP 脚本。由于这是在电子邮件到达电子邮件客户端之前很久，因此不可能包括基于客户端/屏幕变量的任何显示差异。“ExactTarget 应用程序在电子邮件发送结束时处理所有 AMPscript 调用”（[AMP Script Process](http://help.exacttarget.com/en/documentation/exacttarget/content/ampscript/how_ampscript_update_insert_and_delete_calls_are_processed_during_sends/)）

我的建议是研究响应式电子邮件的媒体查询（更复杂，并且由于电子邮件客户端呈现和阅读方式不同而有许多怪癖）以及移动设备的可扩展电子邮件设计（推荐给具有初级到中级 html/css 能力的人）。（[石蕊 - 响应式和可扩展之间的区别](https://litmus.com/blog/responsive-scalable-email-design-whats-the-difference)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:32:37.217

使用简单的媒体查询当然可以隐藏或显示电子邮件中的内容。不需要 AMPScript。并非所有电子邮件平台都支持它。

[以下](http://briangraves.github.com/ResponsiveEmailPatterns/)是[DEG](http://www.degdigital.com)的 Brian Graves 开发的一些非常好的响应式电子邮件模板。我已经在 ExactTarget 中实现了其中几个模板的变体。

编辑：这是一个基于浏览器宽度丢弃 Nav 元素的示例。它改编自我上面提到的 GitHub 页面上的第一个模板：

```
<style type="text/css" media="screen">
@media only screen and (max-width: 400px) {
    td[class="nav3"] { display: none; }
    td[class="nav4"] { display: none; }
    td[class="nav5"] { display: none; }
    td[class="nav6"] { display: none; }
}
</style>
...
<body style="background: #fff;font-family:Arial, Helvetica, sans-serif; font-size:12px;">
  <table cellpadding="0" cellspacing="0" width="100%">
      <tr>
          <td align="center" style="padding: 15px 10px; font-size: 12px;">
              <a href="#" style="text-decoration: none;">Navigation 1</a>
          </td>
          <td align="center" style="padding: 15px 10px; font-size: 12px;">
            <a href="#" style="text-decoration: none;">Navigation 2</a>
          </td>
          <td class="nav3" align="center" style="padding: 15px 10px; font-size: 12px;">
            <a href="#" style="text-decoration: none;">Navigation 3</a>
          </td>
          <td class="nav4" align="center" style="padding: 15px 10px; font-size: 12px;">
            <a href="#" style="text-decoration: none;">Navigation 4</a>
          </td>
          <td class="nav5" align="center" style="padding: 15px 10px; font-size: 12px;">
            <a href="#" style="text-decoration: none;">Navigation 5</a>
          </td>
          <td class="nav6" align="center" style="padding: 15px 10px; font-size: 12px;">
            <a href="#" style="text-decoration: none;">Navigation 6</a>
          </td>
      </tr>
  </table>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:47:47.200

无法使用 ampscript 进行检测。最接近这一点的是使用响应式电子邮件设计技术。看看这个链接：

[http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/)

# java - JSP/Java 页面编码和数据库整理问题

> ID：12736951
> 
> 赞同：2
> 
> 时间：2012-10-04T22:26:27.680
> 
> 标签：java, jsp, sql-server-2012

我有一个带有文本输入字段的网页。如果用户从 Microsoft 产品（Word、Outlook）粘贴文本，则在写入我的数据库表时，长破折号（m 破折号？）和撇号（或单引号）将被转换为问号 (?)。如果他们只是直接从键盘输入文本就可以了。如何防止或纠正此问题？

我的 JSP 页面在起始标记上方有这个：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%> 
```

我的 Microsoft SQL 2012 Server 默认排序规则设置为：

```
SQL_Latin1_General_CP1_CI_AS 
```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:36:44.227

这应该带你到正确的方向

[http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

或者

[http://www.tek-tips.com/viewthread.cfm?qid=268377](http://www.tek-tips.com/viewthread.cfm?qid=268377)

# php - SimpleXML $xml->{$a} 不起作用

> ID：12736955
> 
> 赞同：1
> 
> 时间：2012-10-04T22:26:57.787
> 
> 标签：php

我的代码

```
<?php
        $a = 'node'
        $xml = simplexml_load_file('config.xml');
        echo $xml->node //work fine
        echo $xml->{$a};  //also work fine
        ?>

<?php
        $a = 'node[0]'
        $xml = simplexml_load_file('config.xml');
        echo $xml->node[0] //work fine
        echo $xml->{$a};  //DOESNT WORK!
        ?> 
```

为什么变量中的节点 [0] 不起作用？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:30:42.840

`node`是您要访问的属性的实际属性名称。当您使用`node[0]`instead of 时`node`，它会查找被调用的属性，`node[0]`而不是访问数组的第 0 个索引`$xml->node`。基本上，它看起来`node[0]`好像您键入`$xml->{"node[0]"}`而不是`node`（这是您期望做的），但它找不到它。所以你想尝试这样的事情：

```
echo $xml->{$a}[0]; 
```

# c# - 如何在winforms中使用EF进行双向数据绑定？

> ID：12736958
> 
> 赞同：5
> 
> 时间：2012-10-04T22:27:14.343
> 
> 标签：c#, winforms, entity-framework, entity-framework-5

我对编码很陌生。现在我要告诉你我现在的情况和我想去的地方。希望你会有所帮助。

我使用的是 EF5.0 数据库优先方法，我希望能够使用网格视图来列出和更新数据库值。

目前我正在像这样绑定我的数据：

```
 pehlivan_kabametrajEntities ctx = new pehlivan_kabametrajEntities();
        var result = from k in ctx.Kolons
                     select k;
        dataGridView1.DataSource = result.ToList(); 
```

这段代码完美地列出了我的数据。但是，它是错误的或不足以满足我的需求。因为我希望能够直接在 gridview 上编辑我的数据。请告诉我出了什么问题，我该怎么办。至少一些可以到达我想要的目的地的文档的链接会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T07:03:00.487

如果绑定到查询结果，则仅使用单向数据绑定。您需要`IBindingList`获得两种方式的数据绑定。试试这个：

```
 ctx.Kolons.Load();
 dataGridView1.DataSource = ctx.Kolons.Local.ToBindingList(); 
```

如果它不起作用，请尝试使用`BindingSource`：

```
 ctx.Kolons.Load();
 gridBindingSource.DataSource = ctx.Kolons.Local.ToBindingList();
 dataGridView1.DataSource = gridSource; 
```

# visual-studio-lightswitch - 从VB Lightswitch中的计算字段中删除小数位

> ID：12736960
> 
> 赞同：1
> 
> 时间：2012-10-04T22:27:41.787
> 
> 标签：visual-studio-lightswitch

我有下表；

```
ID   Integer
CTN length   Decimal

CTN width    Decimal

CTN height   Decimal

Room width   Decimal

Room Length  Decimal

Room Height  Decimal

CTNs Width   Decimal    Computed field = Room Width / CTN width 
```

例如计算域的结果是`12.80`

我想从结果中删除小数位，所以结果将只有 12 没有任何分数

有人知道如何在VB灯开关中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:49:00.763

如果您希望该值保持小数，小数点后没有小数，您可以使用：

```
Int(Computed field = Room Width / CTN width) 
```

如果您还希望将值转换为整数：

```
Cint(Int(Computed field = Room Width / CTN width)) 
```

这些链接提供了更多详细信息：

[Conversion.Int 方法](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.conversion.int%28v=vs.100%29.aspx)

[类型转换函数 (Visual Basic)](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VB.CINT%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22SILVERLIGHT,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true)

# ios6 - UIView 无法正确自动调整 iPhone 3.5 英寸与 4 英寸屏幕

> ID：12736977
> 
> 赞同：3
> 
> 时间：2012-10-04T22:29:14.610
> 
> 标签：ios6

我有一个 UINavigationController，它的顶部 UIViewController 是一个 UIViewController，上面有一个 UITabBar。（它不是 UITabBarController b/c 我被告知 Apple 不希望您在 UINavigationController 上推送 UITabBarController）。

UITabBar 控制 3 个 UIViewController。当我在模拟器中运行它时，3 个 UIViewControllers 适用于 3.5 英寸屏幕或 4 英寸屏幕，具体取决于我在 Interface Builder 中使用模拟指标的方式。但我无法在 3.5 英寸和 4 英寸屏幕上自动调整大小。似乎要么是要么。

这应该很简单，因为它只是 UIAutosizeRemaskFlexibileWidth 和 Height。我已经在代码中尝试过，也通过使用 Interface builder 进行了尝试，并且由 UITabBar 控制的 3 个 UIViewControllers 永远不适合屏幕尺寸。我应该不必为不同的 iphone 屏幕尺寸编写分支代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:33:01.593

在 iOS 6 中，支柱和弹簧已被称为 Autolayout 的东西所取代。

我建议你看看这个链接：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

# css - CSS 选择器未正确应用

> ID：12736986
> 
> 赞同：0
> 
> 时间：2012-10-04T22:29:55.087
> 
> 标签：css, css-selectors

我在我编写的一些 CSS/HTML 代码中看到了一个奇怪的结果。我的 CSS 中有两个不同的类；我们称它们为 A 类和 B 类。A 类将表格定义为没有边框：

```
div.classA table, th, td { borders:none } 
```

B 类将表格定义为具有折叠的灰色边框：

```
div.classB table, th, td  { border:1px solid grey } 
```

我的 HTML 然后有

```
<div class="classB">
  <table>
    <thead>
      <th>Text</th><th>More text</th>
     </thead>
  </table>
</div> 
```

表头（因为 classB 应该有边框）没有边框。当我使用 Firefox 检查页面时，它显示 classA 已覆盖 classB 的设置，即使该表位于 classA div 元素中。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:31:53.370

您的选择器不太正确。我想你想要这个：

```
div.classA table, div.classA th, div.classA td { border: 0; }

div.classB table, div.classB th, div.classB td  { border: 1px solid grey; } 
```

（您需要在每个标签之前添加 div.classname。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:38:22.867

在您的表`thead`中没有`td`，而是`th`将样式仅应用于`th`您可以使用的

```
div.classA table thead th { border:none }
div.classB table thead th { border:1px solid grey } 
```

[**演示**](http://jsbin.com/elomen/7/edit)。

**更新：**对于完整表中的边框（classB），您可以试试这个

```
div.classB table{
    border-collapse:collapse;
}
div.classB table th, div.classB table td { 
    border:1px solid grey;
} 
```

[**演示**](http://jsbin.com/elomen/5/edit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:54:20.013

您有几个问题需要解决：

# 1

您没有正确使用 HTML 标签：

```
<div class="classB">
  <table>
    <thead>
      <th>Text</th><th>More text</th>
     </thead>
  </table>
</div> 
```

应该：

```
<div class="classB">
  <table>
    <thead>
      <tr><th>Text</th><th>More text</th></tr>
     </thead>
  </table>
</div> 
```

* * *

# 2

您用“边框”输入错误的“边框”：

```
 div.classA table, th, td { borders:none } 
```

应该：

```
 div.classA table, th, td { border:none } 
```

* * *

# 3

边框设置为`td`元素，并且您的类都独立地定位该元素，因为您使用逗号来拆分声明。
此外，需要调整范围：

```
 div.classA table, th, td { border:none }
    div.classB table, th, td { border:1px solid grey } 
```

应该：

```
 div.classA table th, div.classA table td { border:none }
    div.classB table th, div.classB table td { border:1px solid grey } 
```

* * *

## 为了让它正常工作，你应该使用：

请参阅这个[工作小提琴示例](http://jsfiddle.net/zuul/TbnYE/)！

**HTML**

```
<div class="classA">
  <table>
    <thead>
      <tr><th>Text</th><th>More text</th></tr>
    </thead>
  </table>
</div>
<br>
<br>
<div class="classB">
  <table>
    <thead>
      <tr><th>Text</th><th>More text</th></tr>
    </thead>
  </table>
</div> 
```

**CSS**

```
div.classA table th, div.classA table td { border:none }
div.classB table th, div.classB table td { border:1px solid grey } 
```

# mysql - 如何获取 SELECTed 输出并将其写入 MySQL 中的新表？

> ID：12736988
> 
> 赞同：0
> 
> 时间：2012-10-04T22:30:03.937
> 
> 标签：mysql, sql, sql-insert, select-insert

> **可能重复：**
> [从表中插入数据](https://stackoverflow.com/questions/2803839/insert-data-from-to-a-table)

从主税表中，我希望能够进行计算并将输出写入新表。

```
select zipcode, sum(A00100)/sum(N1) as 'avg_agi' from taxbyzip2008 group by zipcode; 
```

名为 avgagi 的新表将有两个字段（列），邮政编码和 avg_agi。

我知道如何创建一个新表，但我不知道如何从上述选择中获取输出并将其写入新表 avgagi 并使用 zipcode 和 avg_agi 填充它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:33:26.130

```
insert into avgagi (zipcode, avg_agi)
select zipcode, sum(A00100)/sum(N1) as 'avg_agi' from taxbyzip2008 group by zipcode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:32:32.263

做你的创建表，然后

```
insert into avgagi
select zipcode, sum(A00100)/sum(N1) as 'avg_agi' from taxbyzip2008 group by zipcode; 
```

# .htaccess - .htaccess 更改根文件夹并隐藏 .html/.php 扩展名

> ID：12736989
> 
> 赞同：0
> 
> 时间：2012-10-04T22:30:16.003
> 
> 标签：.htaccess, mod-rewrite, hide, root

我已经使用 .htaccess 更改了根文件夹，但我还需要隐藏 .html/.php 扩展名，这是我遇到问题的地方。我找到了隐藏扩展的替代方法，但它并不像我想象的那么简单。这是我到目前为止所做的>>>

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?cornellbond.co.uk$

RewriteCond %{REQUEST_URI} !^/liveSite/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /liveSite/$1
RewriteCond %{HTTP_HOST} ^(www.)?cornellbond.co.uk$
RewriteRule ^(/)?$ liveSite/index.html [L] 
```

这可行，但是当我向其中添加以下代码时，一切都停止了。

然后我想隐藏我在这里 SOF 上找到此代码的 .html/.php 扩展名，因此将两者结合起来，我得到的只是错误。

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f       # if the requested URL is not a file that exists
RewriteCond %{REQUEST_FILENAME} !-d       # and it isn't a directory that exists either
RewriteCond %{REQUEST_FILENAME}\.html -f  # but when you put ".html" on the end it is a file that exists
RewriteRule ^(.+)$ $1\.html [QSA]         # then serve that file

</IfModule> 
```

所以我的代码看起来像这样 >>>

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?cornellbond.co.uk$

RewriteCond %{REQUEST_URI} !^/liveSite/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /liveSite/$1
RewriteCond %{HTTP_HOST} ^(www.)?cornellbond.co.uk$
RewriteRule ^(/)?$ liveSite/index.html [L]

<IfModule mod_rewrite.c>

RewriteCond %{REQUEST_FILENAME} !-f      
RewriteCond %{REQUEST_FILENAME} !-d      
RewriteCond %{REQUEST_FILENAME}\.html -f  
RewriteRule ^(.+)$ $1\.html [QSA]         

</IfModule> 
```

如果我能解决这个问题，我将不胜感激。我是不是对我说这一切都是新的，我还在学习 =P 再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:21:16.083

如果您只想隐藏扩展名，请查看此

```
RewriteRule ^(.*)\.(php|html)$ /$1 [L,R] 
```

# c++ - 如何在 C++ 中使用颜色图（调色板）保存 tif

> ID：12736991
> 
> 赞同：0
> 
> 时间：2012-10-04T22:30:20.173
> 
> 标签：c++, libtiff

我徒劳地尝试使用 OpenCV 将带有颜色图的 indexed8bpp 图像保存为 tif 文件。对于这个项目，GDI+ 不是一个选项。我已经下载了 libtiff 库，但对我来说似乎太大了。

还有别的事吗？我不像听起来那么挑剔。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:36:00.210

libtiff 太大了，但是 OpenCV 不是？？我原以为 OpenCV 更大。

我当然会使用 libtiff，我建议你再给它一次机会。它确实是编写 TIFF 文件的权限。

此外，您只会链接到其中的一小部分，因此它的大小不会使您的应用程序膨胀。我不确定这是否是您所说的太大...也许您的意思是您不想将所有这些源代码放入项目的版本控制中，并且您也不想规定依赖于一个外部库。

如果您缺乏挑剔延伸到可能不使用 TIFF，那么您总是可以使用 BMP。编写索引 BMP 文件非常容易 =)