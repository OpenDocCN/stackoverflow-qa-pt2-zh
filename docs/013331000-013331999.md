# StackOverflow 问答 13331000-13331999

# struct - Lisp 中的嵌套结构

> ID：13331001
> 
> 赞同：3
> 
> 时间：2012-11-11T12:12:45.927
> 
> 标签：struct, lisp, nested, common-lisp, field

我从 Lisp 开始，我需要知道是否可以使用嵌套结构。这是我的尝试：

```
(defstruct casilla i j)
(defstruct tablero caballo reina t1 t2)

(defparameter *estado-inicial*
  (make-tablero :caballo (make-casilla :i 1 :j 1)
                :reina   (make-casilla :i 5 :j 4)
                :t1      (make-casilla :i 3 :j 5)
                :t2      (make-casilla :i 4 :j 5))) 
```

如果我必须访问该字段`i`：

```
(defun es-estado-final (estado)
  (and (= (caballo-casilla-i estado) 3)
       (= (caballo-casilla-j estado) 1))) 
```

那正确吗？似乎不是因为`caballo-casilla-i`未定义。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T12:21:40.043

对于自动为您创建的 Lisp 环境的结构，访问器`tablero-caballo`和`casilla-i`. 要组合它们，您需要使用`(casilla-i (tablero-caballo estado))`. 显然，您可以推出自己的访问器功能：

```
(defun caballo-casilla-i (estado)
  (casilla-i (tablero-caballo estado))) 
```

您也可以`(declaim (inline caballo-casilla-i))`不浪费额外的函数调用。

# java - 在文本文件中查找单词并计算特定单词

> ID：13331003
> 
> 赞同：0
> 
> 时间：2012-11-11T12:13:04.663
> 
> 标签：java, file, search, text, find

现在我将尝试解释我需要做什么。我有 file.txt 文件，它看起来像：

```
John //first line - name
One
Three
Four

Peter //first line - name
Two
Three

Elisa //first line - name
One
Three

Albert //first line - name
One
Three
Four

Nicole //first line - name
Two
Four 
```

所以我有程序的代码：

```
 public class Testing {

        public static void main(String args[]) throws Exception {
            Scanner input = new Scanner(System.in);
            System.out.println("Select word from list:");
            System.out.println();

            try {
                FileReader fr = new FileReader("src/lt/kvk/i3_2/test/List.txt"); // this is list of words, everything all right here
                BufferedReader br = new BufferedReader(fr);
                String s;
                while((s = br.readLine()) != null) {
                    System.out.println(s);
                }
                fr.close();
                String stilius = input.nextLine();   // eneter word which I want to count in File.txt
                BufferedReader bf = new BufferedReader(new FileReader("src/lt/kvk/i3_2/test/File.txt")); // from this file I need to count word which I entered before

                int counter = 0;                
                String line;

                System.out.println("Looking for information");
                while (( line = bf.readLine()) != null){
                    int indexfound = line.indexOf(stilius);
                    if (indexfound > -1) {
                         counter++;
                    }

                }
                if (counter > 0) {
                    System.out.println("Word are repeated "+ counter + "times");}
                    else {
                    System.out.println("Error...");
                }
                bf.close(); 

            }
            catch (IOException e) {
                System.out.println("Error:" + e.toString());
                }
            }
        } 
```

该程序计算 file.txt 中的特定单词（通过键盘输入）。

我需要制作这个程序：例如：如果我输入单词：`One`它必须显示：

```
Word One repeated 3 times by John, Elisa, Albert 
```

所有我需要通过谁重复这个词来选择。但我真的不知道如何制作它，也许是 LinkedList 或者我不知道，有人可以帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:19:52.353

您可以`List<String>`在重复单词的地方保留一个，并动态添加元素。

要向其中添加元素，您可以使用额外的变量`lastName`（类型`String`），并在您的 while 循环中，执行以下操作：

```
if (line.trim().length() == 0) lastName = null; 
else if (lastName == null) lastName = line; 
```

第一行如果用于“重置”`lastName`变量，则在更改名称后（假设每个名称的所有单词后都有一个空行）
第二行是在空行后将其设置回新名称。

此外，当您增加`counter`时：

```
myList.add(lastName) 
```

所以循环将是这样的：

```
List<String> resultList = new ArrayList<String>();
String lastName = null;
while (( line = bf.readLine()) != null){
   if (line.trim().length() == 0) lastName = null;
   else if (lastName == null) lastName = line;
   int indexfound = line.indexOf(stilius);
   if (indexfound > -1) {
      counter++;
      resultList.add(lastName);
   }
//do something with resultList, which contains the names
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:25:59.397

我建议你使用`Map<String, Set<String>>`where key 是一个单词， value 是“输入”这个单词的人名列表。

所以，这里是你如何定义你的收藏：

`Map<String, Set<String>>`word2people = HashMap>();`

以下是您可以在那里添加单词的方法：

```
String name = ...
String word = ...
Set<String> people = word2people.get(word);
if (people == null) {
    people = new HashSet<String>();
    word2people.put(people);
}
people.add(name); 
```

以下是检索值的方法：

`word2people.get(word)`

# php - 有些文件是使用输入文件标签上传的，有些不是

> ID：13331004
> 
> 赞同：1
> 
> 时间：2012-11-11T12:13:20.047
> 
> 标签：php, html

我无法使用 html 控件上传文件。

假设我有两个图像文件 image1.jpg 和 image2.jpg

image1 被上传 image2 没有

image1 一切正常，为 image2 调用相同的代码，但未上传 image2。它没有给出任何错误。

没有文件大小和/或扩展名等上传限制。我还更改了 php.ini，更改了 maxpostsize、uploadsize 和内存限制。请帮忙，我已经搜索了三天，但没有得到答复。

```
if(isset($_POST['submitBtn']))
{
$title=$_POST['titleTxt'];
mysql_query("INSERT into tblsliderphotos (title) values('$title')") or 
die(mysql_error());

    if($_FILES['file']['name']!="")
    {
    //echo $_FILES['file']['name'];
    $tblData=mysql_query("Select MAX(photoid) as id from tblsliderphotos");
    $row=mysql_fetch_array($tblData);

    $id=$row['id'];

    $path="photos/SliderPhotos/". $id.".".$image_ext;
    echo $path;
    move_uploaded_file($_FILES["file"]["tmp_name"],"../../".$path);
    mysql_query("Update tblsliderphotos SET path='".$path."' where 
photoid=".$id);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:49:19.180

我认为问题不在于 php env。但与您的上传文件处理。

假设您的 html 代码如下所示

```
<form action="someaction" method="post" enctype="multipart/form-data">
<input type="text" name="title" />
<input type="file" name="file" />
<input type="file" name="file2" />
<input type="submit" name="submitBtn" value="Submit">
</form> 
```

现在，您必须注意有两个类型为“file”的输入，第一个具有名称值“file”，第二个具有名称值“file2”。

当您想同时处理这两种情况时，您必须单独处理每个文件。如下：

```
$_FILES['file'] // this will give you information about the first input "file"

$_FILES['file2'] // this will give you information about the second input "file2" 
```

现在，当您要上传两个文件时，您必须为每个文件都执行此操作。如下：

```
 // handling first file
if($_FILES['file']){
   echo $_FILES['file']['name'];
   move_uploaded_file($_FILES["file"]["tmp_name"],"../../".$path);
}

// handling second file
if($_FILES['file2']){
   echo $_FILES['file2']['name'];
   move_uploaded_file($_FILES["file2"]["tmp_name"],"../../".$path);
} 
```

这会将两个文件上传到您的 $path

但是，您可以通过循环 $_FILES 变量来做同样的事情，如下所示：

```
 foreach($_FILES as $key => $value){
     echo $key."\r\n";
     echo $value['name'];
     move_uploaded_file($value["tmp_name"],"../../".$path);
 } 
```

我希望这有帮助

# ruby - Padrino 控制器抽象

> ID：13331006
> 
> 赞同：4
> 
> 时间：2012-11-11T12:13:48.093
> 
> 标签：ruby, padrino

我一直在我的一个项目中尝试 Padrino 框架，但有一件事让我非常恼火。例如，我想使用 OmniAuth 实现一个用户注册过程，并希望将我的请求处理程序（控制器的操作）分解为单独的方法，如下所示：

```
获取 ":provider/callback" 做
  @user = find_the_user_by_oauth（请求）
  create_user 除非@user
  store_user_in_session
结尾

def find_the_user_by_oauth（请求）
  #...
结尾

def store_user_in_session
  会话[:user_id] = @user.id
结尾

```

我知道将逻辑推送到模型层会更好，但我的问题是，我如何将控制器逻辑分解为分离的方法并在它们之间共享信息（例如使用实例变量）。在 Rails 中，我在控制器的私有范围内创建了这些方法，但在这里我应该扩展 Application 类，因为它会为前面的代码抛出未定义的方法异常。我尝试了 Helpers，但 helpers 不知道实例变量，所以你应该每次都传递变量。

在Padrino中使我的控制器动作干净的好方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T10:08:59.033

要在 Padrino 控制器中定义方法，您可以使用**define_method**而不是**def**。

对于您的示例，请执行以下操作：

```
Admin.controllers :dummy do

  define_method :find_the_user_by_oauth do |request|
    request.params["username"]
    # ...
  end

  define_method :store_user_in_session do
    session[:user_id] = @user
  end

  get :test do
    @user = find_the_user_by_oauth(request)
    create_user unless @user
    store_user_in_session()
    session.inspect
  end

end 
```

Padrino 使用 instance_eval 运行发送到 Admin.controllers 的块。请参阅此答案以了解define_method 和 def 之间的差异[https://stackoverflow.com/a/3171649](https://stackoverflow.com/a/3171649)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-11T12:39:13.293

可能是题外话，但您会考虑改用[Espresso 框架](http://e.github.com/)。

那么你就可以像这样简单地解决你的问题：

```
class App < E

  def index provider, action = 'callback'
    @user = find_the_user_by_oauth
    create_user unless @user
    store_user_in_session
  end

  private

  def find_the_user_by_oauth
    # provider, action are accessed via `action_params`
    # action_params[:provider]
    # action_params[:action]
  end

  def store_user_in_session
    session[:user_id] = @user.id
  end

end 
```

# jquery - 无法识别数据类型

> ID：13331008
> 
> 赞同：0
> 
> 时间：2012-11-11T12:14:01.010
> 
> 标签：jquery

对不起，如果这不是正确的问题，但我问这个是因为我被卡住了。**我将为这个问题添加 jquery 标记，因为我使用 javascript 和 jquery 来读取以下数据。我为此道歉。**

我正在使用 jquery`$.get(link, function (data) {console.log(data)});`方法从远程服务器读取数据。但我得到了一种奇怪的数据，既不是`json`也不是`xml`。以下是我得到的输出类型

```
Time|Line|Destination|Line code
1408|14|Pajamäki|1014 1 
1422|39|Martinlaakso|1039 1 
1428|14|Pajamäki|1014 1 
1442|39|Martinlaakso|1039 1 
1448|14|Pajamäki|1014 1 
1502|39|Martinlaakso|1039 1 
1508|14|Pajamäki|1014 1 
1513|290|Veikkola|7290 1 
1522|39|Martinlaakso|1039 1 
1528|14|Pajamäki|1014 1 
1542|39|Martinlaakso|1039 1 
1548|14|Pajamäki|1014 1 
1602|39|Martinlaakso|1039 1 
1608|14|Pajamäki|1014 1 
1622|39|Martinlaakso|1039 1 
1628|14|Pajamäki|1014 1 
1642|39|Martinlaakso|1039 1 
1648|14|Pajamäki|1014 1 
1702|39|Martinlaakso|1039 1 
1708|14|Pajamäki|1014 1 
1722|39|Martinlaakso|1039 1 
1728|14|Pajamäki|1014 1 
1742|39|Martinlaakso|1039 1 
1748|14|Pajamäki|1014 1 
1802|39|Martinlaakso|1039 1 
```

现在请告诉我这是什么类型的数据，我怎样才能让它以我想要的方式显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:28:01.290

您必须根据[this](https://stackoverflow.com/questions/13331008/having-issue-to-recognize-the-type-of-data#comment18188815_13331008)解析数据。因此，您可以使用多种方式：

1-在 jQuery 中使用 for 循环并解析数据并将其插入 DOM。（不是好方法）

2-使用模板引擎，[JsRender](https://github.com/BorisMoore/jsrender)。（这是最好的方法）

**更新**

解析数据：

```
var allTextLines = data.split(/\r\n|\n/);
for(var i=0;i<allTextLines.length;i++){
    var entries = allTextLines[i].split('|');
    // ..
} 
```

# regex - 如何搜索由空格分隔的特定单词索引？在 Perl 正则表达式中

> ID：13331009
> 
> 赞同：1
> 
> 时间：2012-11-11T12:14:01.323
> 
> 标签：regex, perl, field, extraction

我有一个日志文件

field1 field2 field3 field4withvariablelength ... field5with...

有没有办法使用 perl 正则表达式提取例如字段 5，比如

“用空格分隔”和“给我索引 5”？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T12:21:10.840

当然，您可以使用[split](http://perldoc.perl.org/functions/split.html)按空格分隔：

```
my (@fields) = split /\s+/;
print $fields[4]; 
```

这是一个完整的测试脚本：

```
#!/usr/bin/perl -w
use strict;

while (<DATA>) {
    my (@fields) = split /\s+/;
    print $fields[4];
}    

__DATA__
field1 field2 field3 field4withvariablelength... field5with... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:28:48.477

或者像这样：

```
my $str = "field1 field2 field3 field4withvariablelength ... field5with...";
$str =~ m/field5(.*)$/i;
print $1; # type with... 
```

如果你必须去其他领域：

```
$str =~ m/\s+field4(.*)\s+/i;
print $1; # type withvariable... 
```

# jquery - 得到第n个：child jquery

> ID：13331010
> 
> 赞同：1
> 
> 时间：2012-11-11T12:14:08.967
> 
> 标签：jquery

我有这个 html 块

```
 <div id="pane" class="MosadBoxRight scroll_pane" style="overflow: hidden; height: 590px; width: 250px; padding: 0px 41px 0px 0px;">
                <div class="MosadBoxRightKoteretpopUp">text</div>
                <div class="area" id="area1">
<a iframe="/4746929" style="cursor:pointer" class="alink" id="aLink">example1
 </a></div>
                <div class="area" id="area2">
<a  iframe="4746929" style="cursor:pointer" class="alink" id="aLink">example1 
</a></div>
                <div class="area" id="area3">
<a  iframe="/474692946" style="cursor:pointer" class="alink" id="aLink">example1
</a></div>

        </div> 
```

我也有这个javascript函数

```
 function nextchapter() {
     loc=loc+1;
     var contextCmsPage = $("#pane .alink:nth-child(0)").attr("iframe");

     } 
```

和一个调用这个函数的按钮

```
<input type="button" id="btnc" onclick="nextchapter()" value="check" /> 
```

我正在尝试让`alink`父亲 Div 中的第 n 个孩子`pane`

我变得不确定 `$("#pane .alink:nth-child(0)").attr("iframe");`

我也试过

```
$("#pane").find(".alink:nth-child(0)").attr("iframe"); 
```

结果相同

可能是什么问题？

谢谢

巴罗兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:17:07.197

您不需要第 n 个孩子，而是需要 class 的第 n 个元素`alink`。

用这个 ：

```
var link = $("#pane .alink").eq(0); 
```

# java - PKIX 路径构建失败 sun.security.provider.certpath.SunCertPathBuilderException

> ID：13331013
> 
> 赞同：0
> 
> 时间：2012-11-11T12:14:48.530
> 
> 标签：java, exception, validation

今天突然间我在尝试调用 api 时遇到了这个问题。这个问题直到昨晚才存在，现在它正在杀死我的应用程序

> > SearchRadiusAction - url：[https](https://connection.api.isp.mynetwork.be/getAccount2.cgi) ://connection.api.isp.mynetwork.be/getAccount2.cgi sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到有效的证书路径到请求的目标

昨晚它投入生产，现在它在之前运行良好的地方无法正常工作。

如果可能的话，我想知道如何在不更改代码的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:42:00.267

我找到了解决方案。

我刚刚从对面服务器下载了证书文件并将它们安装在我的应用程序服务器中。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-07T14:14:58.497

我也遇到过这个问题，导入邮件服务器和CA的证书后，问题依旧。

作为一般规则，通过添加选项启用 SSL 调试

```
-Djavax.net.debug=ssl 
```

这显示了加载的实际密钥库和证书。

在我的特定情况下，原因非常令人惊讶：Avast 防病毒在我的应用程序服务器（WildFly）和远程 TLS 连接之间做中间人：O

以下是日志：

```
15:49:57,112 INFO  [stdout] (default task-56) chain [0] = [
15:49:57,112 INFO  [stdout] (default task-56) [
15:49:57,113 INFO  [stdout] (default task-56)   Version: V3
15:49:57,113 INFO  [stdout] (default task-56)   Subject: CN=mail.irisel.com, O=Irisel Consulting SL, L=Tres Cantos, ST=Madrid, C=ES
15:49:57,114 INFO  [stdout] (default task-56)   Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5
15:49:57,114 INFO  [stdout] (default task-56) 
15:49:57,115 INFO  [stdout] (default task-56)   Key:  Sun RSA public key, 1024 bits
15:49:57,116 INFO  [stdout] (default task-56)   modulus: 138674107939081515882972971404534700919819495458616389928335346488718131998599706435849369388241463110190321699739219608756226058473158126297068838696077495178250043211055383692800846587509903813185937024462913474510326460163355093830472808797012578670617819870186505308700964920784184093349004872582841740643
15:49:57,116 INFO  [stdout] (default task-56)   public exponent: 65537
15:49:57,117 INFO  [stdout] (default task-56)   Validity: [From: Thu Oct 01 11:52:40 CEST 2015,
15:49:57,117 INFO  [stdout] (default task-56)                To: Tue Oct 09 11:52:40 CEST 2040]
15:49:57,118 INFO  [stdout] (default task-56)   Issuer: CN=Avast Web/Mail Shield Root, O=Avast Web/Mail Shield, OU=generated by Avast Antivirus for SSL/TLS scanning
15:49:57,118 INFO  [stdout] (default task-56)   SerialNumber: [    456c195d c1429a4b a1b6da53 c03eb04b] 
```

通常我认为防病毒软件产生的问题比它们解决的问题多……

# java - Andengine 数组的 Sprites 错误

> ID：13331016
> 
> 赞同：1
> 
> 时间：2012-11-11T12:15:19.603
> 
> 标签：java, android, andengine, android-2.3-gingerbread

我是 android 游戏开发的新手，我正在使用 AndEngine GLES 2 Java。我收到一个错误，这与我的数组（face1）具有非法索引有关。我无法解决问题，所以我需要一些帮助。代码：

```
@Override
public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));
    final float centerX1 = 400;
    final float centerY1 = 50;
    final Sprite[] face1 = new Sprite[i];
    face1[i] =  new Sprite(centerX1, centerY1, this.m2FaceTextureRegion, this.getVertexBufferObjectManager());
    final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
    final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;
    final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion, this.getVertexBufferObjectManager()) {
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

            if(!face1[i].collidesWith(this))
            {
                x+=1; 
            this.setPosition(x, 50 );
            }
            else
            {
                x=60;
                this.setPosition(x, 50 );
            }
            return true;
        }
    };

    scene.attachChild(face);
    scene.registerTouchArea(face);
    scene.setTouchAreaBindingOnActionDownEnabled(true);
    face.setScale(4);
    scene.attachChild(face1[i]);
    face1[i].setScale(2);

    return scene;
} 
```

错误：

```
11-11 12:12:42.690: E/AndEngine(13291): java.lang.ArrayIndexOutOfBoundsException 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:46:52.930

从日志看来，异常在`com.example.sheeprun1.BaseActivity.onCreateScene(BaseActivity.java:89)`. 你能检查一下这一行的代码以及那里正在执行什么数组操作......

EDIT1：`final Sprite[] face1 = new Sprite[i];`此时创建数组时， 的值`i`不应为零。

当您访问数组中的值时，请始终检查索引是否小于数组的大小/长度

```
if(face!=null && i<face.length){
face1[i] = new Sprite(centerX1, centerY1, this.m2FaceTextureRegion, this.getVertexBufferObjectManager());
} 
```

# c# - EF 将两个表连接成一个模型

> ID：13331017
> 
> 赞同：0
> 
> 时间：2012-11-11T12:15:25.560
> 
> 标签：c#, asp.net, .net, entity-framework

首先使用 EF Db，我有两个表：

`Table1: AppId, AppName, AppGuid [PK]`

`Table2: AppGuid [FK], Description, Url`

EF 可以从两者中创建一个实体吗？

意义：

`App: AppId, AppName, AppGuid, Description, Url`

**更新**

谢谢。我提出了看法。将其映射到 EF。现在我收到以下错误：`Error 2 Error 111: Properties referred by the Principal Role App must be exactly identical to the key of the EntityType MaMDBModel.App referred to by the Principal Role in the relationship constraint for Relationship MaMDBModel.FK_AppsData_App. Make sure all the key properties are specified in the Principal Role. D:\MaM\Dev\MamAdmin_1.0\MaMDBEntityFramework\MaMModel.edmx 768 11 MaMDBEntityFramework`

这是我的 edmx：

[http://ge.tt/3rRWTOR/v/0?c](http://ge.tt/3rRWTOR/v/0?c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:20:55.660

您可以在这两个表之间使用***JOIN***创建一个***VIEW 。***在此之后，您可以使用 EF 中的视图。

 *在 SQL 中执行此操作

```
CREATE VIEW [ViewName] AS
SELECT *
FROM Table1 JOIN Table2 ON Table1.AppGuid = Table2.AppGuid 
```

并在您的实体框架模型中导入***ViewName***（就像您对普通 SQL 表所做的那样）并使用它来查询您需要的任何内容

编辑：查看此链接以获取更多信息[http://www.mssqltips.com/sqlservertip/1990/how-to-use-sql-server-views-with-the-entity-framework/](http://www.mssqltips.com/sqlservertip/1990/how-to-use-sql-server-views-with-the-entity-framework/)*

# java - onSearchRequested() 的目的是什么？

> ID：13331025
> 
> 赞同：1
> 
> 时间：2012-11-11T12:16:01.927
> 
> 标签：java, android, documentation

onSearchRequested() 的目的是什么？我指的是这里：http: [//developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)

声明如下：“您可以覆盖此函数以强制全局搜索，例如响应专用搜索键，或**完全阻止搜索**（通过简单地返回 false）。” 具体来说，粗体字是什么意思？这不意味着我们可以禁用这个按钮吗？我刚刚在：[Android - 如何禁用搜索按钮，如何实现 onSearchRequested()？](https://stackoverflow.com/questions/13162436/android-how-to-disable-search-button-how-to-implement-onsearchrequested/13309907#comment18179459_13309907)

如您所见，菲尔建议我必须走另一条路。我的问题是：可以***使用***此功能完全禁用搜索按钮吗？是否可以仅使用此功能而无需从对话框构建器中禁用此按钮？谷歌上面引用的声明是什么意思？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:38:49.270

您应该能够使用它禁用搜索按钮，我认为谷歌的意思是您可以阻止某人尝试从您的应用程序中搜索（IE跳过进度对话框），但由于大多数安卓手机不再带有搜索按钮，它不是一个非常常用的功能。

是的，您应该能够在不通过对话框生成器的情况下即时禁用它。

迅速

# c++ - osx 上的 Qt::WA_DeleteOnClose - 诺基亚教程

> ID：13331028
> 
> 赞同：0
> 
> 时间：2012-11-11T12:16:21.863
> 
> 标签：c++, qt

我正在学习我在 uni 的 QT 模块的文字处理器教程。

它要求我设置这个属性：

MainWindow::setAttribute(Qt::WA_DeleteOnClose);

当我运行应用程序时出现问题，它会导致错误提示应用程序已意外关闭。

它还要求我进行 actionExit 操作并添加到文件工具栏，但没有显示，我猜这是因为我在 OSx 上编写它并且退出/退出是用 cmd 照顾你的+Q 快捷键。

我想知道是否有人可以为我阐明这个问题，以便我知道以供将来参考。如果需要，我可以发布教程 + 源代码。

谢谢

编辑：来自调试器的回溯（希望这是正确的）

```
 0   __pthread_kill      0   0x7fff8eaff212  
1   pthread_kill        0   0x7fff86f7eaf4  
2   abort       0   0x7fff86fc2dce  
3   free        0   0x7fff86f96959  
4   MainWindow::~MainWindow mainwindow.cpp  22  0x100002cff 
5   QObject::event      0   0x100e48906 
6   QWidget::event      0   0x1000ecd5e 
7   QMainWindow::event      0   0x10049cadb 
8   QApplicationPrivate::notify_helper      0   0x10009593d 
9   QApplication::notify        0   0x10009bdc4 
10  QCoreApplication::notifyInternal        0   0x100e3417c 
11  QCoreApplicationPrivate::sendPostedEvents       0   0x100e355a0 
12  __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__      0   0x7fff90925101  
13  __CFRunLoopDoSources0       0   0x7fff90924a25  
14  __CFRunLoopRun      0   0x7fff90947dc5  
15  CFRunLoopRunSpecific        0   0x7fff909476b2  
16  RunCurrentEventLoopInMode       0   0x7fff8d0f60a4  
17  ReceiveNextEventCommon      0   0x7fff8d0f5d84  
18  BlockUntilNextEventMatchingListInMode       0   0x7fff8d0f5cd3  
19  _DPSNextEvent       0   0x7fff91a00613  
20  -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]        0   0x7fff919ffed2  
... <More> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:15:54.620

Is your MainWindow object declared on the stack, by any chance? If so, then DeleteOnClose is not a good idea, simply because deleting an object that is on the stack is an error.

# java - 我应该在负载测试我的网站时忽略 Java Script 吗？

> ID：13331032
> 
> 赞同：2
> 
> 时间：2012-11-11T12:16:45.140
> 
> 标签：java, javascript, jsp, load-testing, stress-testing

我们正在开发一个 Web 应用程序，它必须能够承受明显的负载量。我在 HP (Proliant DL 380) 服务器（两个 3.6GHz Xeon cpus、16 GB 内存……）上运行我的测试。我正在使用 Apache JMeter 和 pylot 来运行负载测试（它们有点显示类似的结果）。

在一种情况下，我将负载测试程序配置为尽可能多地使用一个线程来访问我的索引页面。索引页面大约 60KB，包含大约 10 个 ajax 调用、大量 JavaScript 和 jQuery 代码、所需的 CSS 等。我得到的结果是，嗯，令人失望。

完整的 index.jsp 页面：

*   吞吐量（请求/秒）：3.567
*   响应时间（秒）：0.278

所以我删除了每个 ajax 调用，摆脱了图表和 CSS（但不是 JS）

*   吞吐量（请求/秒）：6.082
*   响应时间（秒）：0.161

还是很低！所以我建立了一个 HTML 格式的静态索引页面，其中包含所有相同大小的数据（没有任何服务器端和客户端计算）

*   吞吐量（请求/秒）：20.787
*   响应时间（秒）：0.046

哇，这是一个突破！现在我在 index.html 页面中添加了一些 JavaScript 代码

*   吞吐量（请求/秒）：9.617
*   响应时间（秒）：0.103

嗯，我想瓶颈已经找到了，Java Script 代码。我需要找出“服务器”可以处理多少请求/秒，并且由于 java 脚本是在客户端运行的，我认为我不应该将它包含在这个测试中。那么负载测试工具应该处理JS代码吗？（他们似乎正在这样做）

另一个关键问题是，根据硬件、内容大小和上述配置，这样的吞吐量是否合理？我不应该期待更多吗？我的期望是 500 请求/秒！是添加硬件的唯一解决方案吗？！

顺便说一句，webapp 是使用 Java+Struts2+JSP+Hibernate+MySQL 构建的。它还使用 haproxy 分布在多个服务器上。但是上述测试是在单个服务器上运行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:22:09.217

如果您正在寻找的是服务器可以多快地提供内容的原始数字，那么我会说是的，忽略 java 脚本并专注于传输页面的所有各个位（HTML 、图像、脚本文件、CSS 等）。

但是，如果您正在尝试测试用户体验，那么 JS 就是其中的一部分，因此您需要考虑到这一点。根据您的描述，您并不担心用户体验，而是担心加载到服务器。

您可能需要考虑设置 JMeter 以直接调用您的页面片段，如上面第一句所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:27:25.223

您的 JavaScript（CSS、图像）是直接嵌入页面还是从脚本标签加载的？后一种情况将迫使浏览器从服务器下载文件，立即将您的分页速度减半。这就是您应该从不同的服务器（例如 Google）加载 jquery 的原因之一 - 这将对用户感知的影响较小页面加载时间（要进行一次额外的 DNS 查询），但确实减轻了服务器的负载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:28:00.117

> 另一个关键问题是，根据硬件、内容大小和上述配置，这样的吞吐量是否合理？我不应该期待更多吗？我的期望是 500 请求/秒！是添加硬件的唯一解决方案吗？！

编写应用程序以使页面可缓存，然后在应用程序前面放置一个 http 代理通常是一个好策略。

# iphone - 让 DatePicker 自动转到 NSUserDefault 保存的变量

> ID：13331036
> 
> 赞同：-1
> 
> 时间：2012-11-11T12:17:07.020
> 
> 标签：iphone, ios, datepicker

让`DatePicker`自动转到`NSUserDefault`保存的变量..有什么想法吗？

我可以选择日期和时间。我可以保存它，我可以退出应用程序然后返回，它会将数据正确读取回标签。然后当我转到它时，`DatePicker`它默认为今天的日期和时间并自动替换标签和字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:03:04.027

创建您的创建后`UIDatePicker`，您可以设置`date`属性。

```
// We assume you have a UIDatePicker object called 'datePicker' 
// and saved the date to the NSUserDefaults with the key 'pickedDate'.

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSDate *pickedDate = [prefs getObjectForKey:@"pickedDate"];
[datepicker setDate:pickedDate animated:NO]; 
```

然后，像往常一样显示日期选择器。

# ios - 如何使用 UIGestureRecognizer 检测两次连续滑动

> ID：13331038
> 
> 赞同：1
> 
> 时间：2012-11-11T12:17:35.620
> 
> 标签：ios

我正在为 iOS 开发一个手势驱动的媒体播放器应用程序，我正在尝试实现通常的 mp3reader 行为，如果你按下“后退”按钮一次，将从头开始重播当前正在播放的项目，但如果你按下“后退”按钮连续两次将跳到上一首歌曲。

我在我的 UIView 中添加了一个 UISwipeGestureRecognizer 并设法使“重播”功能与单次滑动一起工作。但我不知道如何检测两次连续的滑动！你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:24:44.260

您可以考虑通过单指滑动与双指滑动来实现该功能。在这种情况下，`UISwipeGestureRecognizer`将提供一个`numberOfTouchesRequired`属性来管理它。

否则，您将需要执行以下操作：

1.  在您的控制器上添加一个滑动计数器；

2.  当检测到第一次滑动时，您增加计数器并启动`NSTimer`;

3.  当计时器触发时，如果滑动计数器为 1，则您知道检测到单次滑动；

    3b。当计时器触发时，您禁用计时器；

4.  当检测到新的滑动时，如果滑动计数器为 1（并且您应该将其增加到 2），那么您处理双滑动操作；然后你重置计数器。

我真的认为单指/双指滑动是要走的路。

# html - 适合整个 div 中的图片

> ID：13331043
> 
> 赞同：1
> 
> 时间：2012-11-11T12:17:55.837
> 
> 标签：html, css

当我使用 css 创建一个 div 时，如何使图片适合整个 div，图片不会完全适合其中。它会缩小。图片目前的样子 [http://img90.imageshack.us/img90/510/pictureframe.png](http://img90.imageshack.us/img90/510/pictureframe.png)

CSS部分

```
#avatar{
padding:35px;
height:70px;
width:50px;
margin: 0px 0 0 0px;
background-color:red;
} 
```

html部分

```
<div id="avatar">
<img src="/Avatar.png" style="width: 100%;" style="height: 100%;" alt="">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T12:20:40.283

您正在使用 2 个样式属性，因此后 1 个将接管前 1 个，因此它仅将高度而不是宽度设置为 100%

```
<img src="/Avatar.png" style="width: 100%; height: 100%;" alt=""> 
```

刚刚注意到您的 CSS，您正在使用**填充**，以便使红色背景在您的图像周围可见

[**演示**](http://jsfiddle.net/gcKGq/)

# webserver - 如何将文件从网络服务器下载到您的计算机？

> ID：13331044
> 
> 赞同：3
> 
> 时间：2012-11-11T12:18:02.873
> 
> 标签：webserver, freebsd, netcat

我重新连接到 Freebsd 服务器 [netcat] 并且 /tmp 上有一个文件，我想下载它，但无法用我的浏览器浏览它所以有什么方法可以下载它？因为我无权访问其他文件夹。只需 /tmp

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-13T22:02:23.390

您可以使用[fetch(1)](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwjq5IfTvNTSAhXIG5AKHVidAywQFggbMAA&url=https%3A%2F%2Fwww.freebsd.org%2Fcgi%2Fman.cgi%3Ffetch(1)&usg=AFQjCNFPxUWTESlYb7mf3QbPX2FjaxiOgQ&sig2=i9aHWqtLBTpB7pdG7ajBiQ)

```
eg. fetch https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js 
```

或下载 wget

```
pkg install wget 
```

并使用 wget

```
eg. wget https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:08:16.000

如果您在服务器上有一个帐户并且 ssh 守护程序正在运行，您可以使用*scp*。从终端仿真器（例如*xterm*）您可以执行`% scp freebsd.server.org:/tmp/file .`. 当然，用正确的主机名替换*freebsd.server.org 。*如果您在 Windows 上，还可以使用*Winscp*等图形程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:42:12.433

如果您在服务器上安装了 SSH，则可以使用任何 SSH 客户端。对于 Windows，WinSCP 是一个不错的选择，但如果您使用 Gnome 运行 *nix OS，Nautilus 可以在本地执行相同的操作。

# javascript - D3和弦图有准确的位置

> ID：13331048
> 
> 赞同：4
> 
> 时间：2012-11-11T12:19:03.267
> 
> 标签：javascript, d3.js, data-visualization, circos, chord-diagram

我想[在 D3 中创建和弦图](http://mbostock.github.com/d3/ex/chord.html)，但要指定区间与确切位置的关系，如下面的[Circos](http://circos.ca)示例：![Sibelia 比较基因组学示例](../Images/0d7b2ed80791155b6ffb1e9cbc1702dc.png)。

有没有办法在 D3 中做到这一点？

如果没有，有没有办法在任何其他 javscript 数据可视化库中做到这一点？

# delphi - Delphi套接字错误

> ID：13331049
> 
> 赞同：1
> 
> 时间：2012-11-11T12:19:05.433
> 
> 标签：delphi, chat, serversocket, tclientsocket

试图了解如何使用`ServerSocket`和`ClientSocket`在 Delphi 中。我做了一个简单的聊天程序，但是在客户端发送第一条消息后出现此错误（它发生在发送过程中 - 就在服务器收到消息之后）

```
Windows socket error: Запрос на отправку или получение данных (when sending ona datagram socket using a sendto call)no adress was supplied (10057), on API 'getpeername' 
```

继承人服务器代码

```
unit Servert;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ScktComp;

type
  TForm1 = class(TForm)
    ServerSocket: TServerSocket;
    PortLabel: TLabel;
    Port: TEdit;
    Protocol: TGroupBox;
    mmoServer: TMemo;
    btnStart: TButton;
    btnStop: TButton;
    btnClear: TButton;
    btnEnd: TButton;
    btnSend: TButton;
    edtMsg: TEdit;
    lblUser: TLabel;
    procedure btnStartClick(Sender: TObject);
    procedure btnStopClick(Sender: TObject);
    procedure btnClearClick(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure btnEndClick(Sender: TObject);
    procedure ServerSocketClientConnect(Sender: TObject;
      Socket: TCustomWinSocket);
    procedure ServerSocketClientDisconnect(Sender: TObject;
      Socket: TCustomWinSocket);
    procedure ServerSocketClientError(Sender: TObject;
      Socket: TCustomWinSocket; ErrorEvent: TErrorEvent;
      var ErrorCode: Integer);
    procedure ServerSocketClientRead(Sender: TObject;
      Socket: TCustomWinSocket);
    procedure btnSendClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  Usercount: Integer;

implementation

{$R *.dfm}

procedure TForm1.btnStartClick(Sender: TObject);
begin
  ServerSocket.Port:=StrToInt(Port.Text);
  ServerSocket.Active:=True;

  btnStart.Enabled:=False;
  btnStop.Enabled:=True;

  mmoServer.Lines.Add('Status: started');
end;

procedure TForm1.btnStopClick(Sender: TObject);
begin
ServerSocket.Port:=StrToInt(Port.Text);
  ServerSocket.Active:=False;

  btnStart.Enabled:=True;
  btnStop.Enabled:=False;

  mmoServer.Lines.Add('Status: stopped');
end;

procedure TForm1.btnClearClick(Sender: TObject);
begin
  mmoServer.Lines.Clear;
  mmoServer.Lines.Add('Server 1.0');
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  ServerSocket.Active:=False;
end;

procedure TForm1.btnEndClick(Sender: TObject);
begin
  ServerSocket.Active:=False;
  Application.Terminate;
end;

procedure TForm1.ServerSocketClientConnect(Sender: TObject;
  Socket: TCustomWinSocket);
begin
  mmoServer.Lines.Add('Status: Client ' + Socket.RemoteAddress + ' connected');
  Inc(Usercount);
  lblUser.Caption:= 'User:' + IntToStr(Usercount);
end;

procedure TForm1.ServerSocketClientDisconnect(Sender: TObject;
  Socket: TCustomWinSocket);
begin
  mmoServer.Lines.Add('Status: Client ' + Socket.RemoteAddress + ' disconnected');
  Dec(Usercount);
  lblUser.Caption:= 'User:' + IntToStr(Usercount);
end;

procedure TForm1.ServerSocketClientError(Sender: TObject;
  Socket: TCustomWinSocket; ErrorEvent: TErrorEvent;
  var ErrorCode: Integer);
begin
  mmoServer.Lines.Add('Status: Client ' + Socket.RemoteAddress + ' error:' + IntToStr(ErrorCode));
  Dec(Usercount);
  lblUser.Caption:= 'User:' + IntToStr(Usercount);
end;

procedure TForm1.ServerSocketClientRead(Sender: TObject;
  Socket: TCustomWinSocket);
var i:Integer; strRec:AnsiString;
begin
  strRec:=Socket.RemoteAddress + ': ' + Socket.ReceiveText;
  mmoServer.Lines.Add(strRec);

  for i:=0 to ServerSocket.Socket.ActiveConnections - 1 do  begin
    ServerSocket.Socket.Connections[i].SendText(strRec);
  end;

end;

procedure TForm1.btnSendClick(Sender: TObject);
var i:Integer;
begin
  for i:=0 to ServerSocket.Socket.ActiveConnections - 1 do
  begin
    ServerSocket.Socket.Connections[i].SendText('Ololo' + edtMsg.Text);
    mmoServer.Lines.Add('Ololo' + edtMsg.Text);
  end;
end;

end. 
```

这是客户端代码

```
unit Client;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ScktComp, StdCtrls;

type
  TForm1 = class(TForm)
    lblHost: TLabel;
    edtHost: TEdit;
    lblPort: TLabel;
    edtPort: TEdit;
    btnConnect: TButton;
    btnDisconnect: TButton;
    grp1: TGroupBox;
    mmoClient: TMemo;
    grpSend: TGroupBox;
    mmoSend: TMemo;
    btnSend: TButton;
    ClientSocket: TClientSocket;
    procedure ClientSocketConnect(Sender: TObject;
      Socket: TCustomWinSocket);
    procedure btnDisconnectClick(Sender: TObject);
    procedure btnConnectClick(Sender: TObject);
    procedure ClientSocketDisconnect(Sender: TObject;
      Socket: TCustomWinSocket);
    procedure ClientSocketRead(Sender: TObject; Socket: TCustomWinSocket);
    procedure btnSendClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.ClientSocketConnect(Sender: TObject;
  Socket: TCustomWinSocket);
begin
  mmoClient.Lines.Add('Status: connected ' + Socket.RemoteAddress);
end;

procedure TForm1.btnDisconnectClick(Sender: TObject);
begin
  ClientSocket.Host:=edtHost.Text;
  ClientSocket.Port:=StrToInt(edtPort.Text);
  ClientSocket.Active:=False;

  btnConnect.Enabled:=True;
  btnDisconnect.Enabled:=False;
end;

procedure TForm1.btnConnectClick(Sender: TObject);
begin
ClientSocket.Host:=edtHost.Text;
  ClientSocket.Port:=StrToInt(edtPort.Text);
  ClientSocket.Active:=True;

  btnConnect.Enabled:=False;
  btnDisconnect.Enabled:=True;
end;

procedure TForm1.ClientSocketDisconnect(Sender: TObject;
  Socket: TCustomWinSocket);
begin
     mmoClient.Lines.Add('Status: disconnected ' + Socket.RemoteAddress)
end;

procedure TForm1.ClientSocketRead(Sender: TObject;
  Socket: TCustomWinSocket);
begin
  mmoClient.Lines.Add(Socket.ReceiveText);
end;

procedure TForm1.btnSendClick(Sender: TObject);
begin
  ClientSocket.Socket.SendText(mmoSend.Text);
end;

end 
```

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:05:13.540

如果我发布这么晚，我真的很抱歉，但我解决了这个问题，你可能看不到它。

在服务器端，确保按索引发送到套接字，例如：

```
ServerSocket1.Socket.Connections[SocketIndex].SendText(); 
```

不要忘记**.Connections**属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:09:01.663

错误代码 10057 是`WSAENOTCONN`，并且`getpeername()`是`Socket.RemoteAddress`属性 getter 在内部使用的 API 函数。这意味着您试图读取不再连接到服务器`RemoteAddress`的 a 的属性。`Socket`

# c - 除以 1/n 总是返回 0.0

> ID：13331054
> 
> 赞同：6
> 
> 时间：2012-11-11T12:19:29.630
> 
> 标签：c, floating-point, integer, floating-point-conversion

我正在尝试计算`p1=(1/1)*(1/2)*...*(1/n)`，但出了点问题，这`printf`给了我`0.000...0`

```
#include <stdio.h>

int main(void) {

    int i,num;
    float p3;

    do {
        printf ("give number N>3 : \n" );
        scanf( "%d", &num );
    } while( num <= 3 );

    i = 1;
    p3 = 1;  

    do {
        p3=p3*(1/i);
        printf( "%f\n",p3 );
    } while ( i <= num );

    printf("\nP3=%f",p3);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T12:21:05.960

```
(1/i) 
```

`i`是`int`，所以这是整数除法，如果 是 0 `i > 1`。用于`1.0/i`获得浮点除法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T12:21:14.957

`1`是整数，`i`是整数。所以`1/i`将是一个整数，*即*结果将被截断。要执行浮点除法，操作数之一应为 type `float`（或者更好的 type `double`）：

```
p3 *= 1\. / i; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-22T14:22:35.250

我遇到过同样的问题。基本情况：

*   当你想从两个整数中得到浮点输出时，你需要将一个转换为浮点数

    `int c = 15; int b = 8; printf("result is float %f\n", c / (float) b); // result is float 1.875000 printf("result is float %f\n", (float) c / b); // result is float 1.875000`

# oracle - 查询过于复杂，无法进行简单连接

> ID：13331055
> 
> 赞同：2
> 
> 时间：2012-11-11T12:19:44.637
> 
> 标签：oracle, materialized-views

> **可能重复：**
> [Oracle - 如何使用 FAST REFRESH 和 JOINS 创建物化视图](https://stackoverflow.com/questions/7505020/oracle-how-to-create-a-materialized-view-with-fast-refresh-and-joins)

我有一个 mv UTIL_MONTH 和表 MET_MONTH 两个表每个月都有 100 万行。我正进入（状态

> ORA-12015: 无法从复杂查询创建快速刷新实体化视图。

这是UTIL_MONTH（物化视图）的结构

```
year 
month 
customer_id 
att1
att2
att3 
```

和 MET_MONTH（表）

```
year 
month
customer_id
amt_12wk
amt_24wk 
amt_36wk 
```

这是创建具有快速刷新的物化视图的代码。

```
create materialized view monthly_mv
parallel 
build immediate
refresh fast on demand 
enable query rewrite
select  
    t.year, 
    t.month, 
    t.customer_id, 
    t.att1, 
    t.att2, 
    t.att3, 
    u.amt_12wk,
    u.amt_24wk,
    u.amt_36wk,
 from util_month t  
 join met_month u 
   on (t.customer_id = u.customer_id  
  and t.month = u.month 
  and t.year=u.year) 
```

这是非常简单的加入，我不想完全刷新。有什么解决方法吗？

# java - Swing：调整图标大小以适应 JLabel 中指定字体的文本

> ID：13331057
> 
> 赞同：1
> 
> 时间：2012-11-11T12:19:54.277
> 
> 标签：java, swing, icons, jlabel

我正在尝试创建两个 JLabels - 一个用于图标（*UIManager.getIcon("OptionPane.informationIcon")* - Java 的标准图标之一）和一个用于文本。当然，我知道有一个 JLabel 的构造函数可以从图标和文本制作一个标签，但我需要两个标签，因为其中一个标签应该在鼠标移动时突出显示，我省略了这部分代码。

问题是我不知道如何更改图标大小。至少我想手动设置图标的高度，但如果它的高度自动计算以适应具有指定字体的文本会更好。我花了几个小时试图在网络上查找信息，但找不到任何相关信息。我尝试实现 Icon 类并覆盖 getIconHeight() 和 getIconWidth() 方法，但我不知道接下来如何处理我的 Icon 对象，因为 Icon 是一个接口，所以它没有构造函数。

这是我的简化代码：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

import net.miginfocom.swing.MigLayout;

public class AppView
{
    private final JFrame main_frame;

    public AppView()
    {
        main_frame = new JFrame();
        main_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        main_frame.setTitle("Example");

        JPanel main_panel = new JPanel() {
            private static final long serialVersionUID = 1L;

            public Dimension getPreferredSize()
            {
                return new Dimension(200,  200);
            }
        };

        main_frame.getContentPane().add(main_panel, BorderLayout.CENTER);
        main_panel.setLayout(new MigLayout());

        JLabel label_icon = new JLabel(UIManager.getIcon("OptionPane.informationIcon"));
        JLabel label_text = new JLabel("Text goes here");
        label_text.setFont(new Font("sans-serif", Font.PLAIN, 12));
        main_panel.add(label_icon);
        main_panel.add(label_text);

        main_frame.pack();
        main_frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run() 
            {
                new AppView();
            }
        });
    }
} 
```

这是结果，如您所见，Icon 高于 text：

![在此处输入图像描述](../Images/8fec1e466830c8fb22a7d1012f45f6cc.png)

提前致谢！

# linux - 使用 Fabric 重命名远程服务器上的目录

> ID：13331059
> 
> 赞同：0
> 
> 时间：2012-11-11T12:20:02.700
> 
> 标签：linux, bash, shell, command-line

我对 renamig 目录有以下问题，使用：

```
$> mv /homex/p4blo/testWebDir/app1 /homex/p4blo/testWebDir/app1_backup 
```

我想在同一路径中将 app1 目录重命名为 app1_backup（仅重命名）。如果没有 app1_backup 文件夹，没关系，但如果有，app1 将位于 app1_backup/app1 中。

我该怎么做。如果开头有 app1_backup 目录，则应将其删除并替换为新的 app1_backup 文件夹（从 app1 重命名的文件夹）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:15:43.260

默认情况下，您传递给的命令`fabric.run`通过 shell 进程（例如）执行。`/bin/bash -l -c "<command>"`随意在其中使用任何类型的 shell 脚本：

```
run(''' srcdir=/homex/p4blo/testWebDir/app1
        [[ -e ${srcdir}_backup ]] && rm -rfv ${srcdir}_backup 
        [[ -e ${srcdir} ]] && mv -v ${srcdir} ${srcdir}_backup ''') 
```

# java - 调用 Web 服务的 beanshell 脚本

> ID：13331060
> 
> 赞同：0
> 
> 时间：2012-11-11T12:20:08.287
> 
> 标签：java, javascript, beanshell

我是 Beanshell 脚本的新手，我想调用一个重新运行`JSON`表示图像的 Web 服务，我目前正在使用以下 javaScript 进行调用：-

```
<script type="text/javascript">
$(function() {
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "gulmarg",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 5 ) return false;
    });
  });
})
</script>
<div id="images"></div> 
```

但是我需要将上面的 JavaScript 转换成 BeanShell 脚本吗？谁能帮助我解决这个问题？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:52:39.517

您可以按如下方式进行连接：

```
 import java.io.BufferedInputStream;
 in = new BufferedInputStream(new URL(FLICKER_URL).openStream());
 // ... 
```

不建议滚动您自己的 JSON 解析器；BeanShell 源自 Java，因此您可以使用任何公共域库来处理 JSON。看到这个问题：[https ://stackoverflow.com/questions/338586/a-better-java-json-library](https://stackoverflow.com/questions/338586/a-better-java-json-library)

# asp.net-mvc-3 - 向 RESX 文件添加级别

> ID：13331063
> 
> 赞同：0
> 
> 时间：2012-11-11T12:20:22.263
> 
> 标签：asp.net-mvc-3, resources

目前我正在使用资源文件以标准键/值方式本地化 MVC4 项目。我现在正在研究基于它们所属的控制器/动作来分离一些键的最佳解决方案。创建诸如 Home.Index.Title 之类的键总是有原始解决方案，但这只是解决方法。有没有办法使用 resx 文件，可以使用父/子节点设计它们，其中最高节点是控制器，然后是操作，最后是字段，以便 LINQ 可以查询它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:40:46.913

Resx 文件始终具有简单的键/值结构。如果目标是组织资源并使它们易于查找以进行维护，我可以建议其他几种方法。

如果有问题的资源用于视图中，您可以在视图文件夹内的 App_LocalResources 文件夹中为每个视图创建一个资源文件，并以这种方式组织它们，间接链接到特定的控制器和操作。

如果资源用于控制器本身，您可以在（比如说）代表控制器的 ~/Resources 文件夹中创建一组文件夹，并在每个文件夹中为每个操作创建一个资源文件。这样，资源命名空间将指示消耗资源的控制器/操作。

# android - 摩托罗拉 ICS 低功耗蓝牙 API 中的断开回调

> ID：13331065
> 
> 赞同：0
> 
> 时间：2012-11-11T12:20:30.123
> 
> 标签：android, motorola, bluetooth-lowenergy

我正在使用摩托罗拉的“蓝牙低功耗 ICS_R2 API”。到目前为止，我能够连接到 TI 2540 密钥卡并写入特性。我还需要一个回调或意图，当钥匙扣超出范围时触发。我当前的解决方案是定期启动特征发现的看门狗。如果特征发现失败，则看门狗认为密钥卡丢失。但是，我认为这会太快地耗尽密钥卡的电池。有人知道更好的解决方案吗？

更新

com.motorola.bluetoothle.BluetoothGatt 中的操作看起来很有趣。但是，我猜这些只是旧摩托罗拉 BLE API 的遗物。

似乎 BluetoothDevice.ACTION_ACL_DISCONNECTED 也适用于低能耗设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:43:47.580

为动作注册一个 BroadcastReceiver 是可行的`BluetoothDevice.ACTION_ACL_DISCONNECTED`。

# email - 我应该在生产中使用“smtp.gmail.com”吗？

> ID：13331072
> 
> 赞同：0
> 
> 时间：2012-11-11T12:21:00.110
> 
> 标签：email, smtp

我正在编写一个需要偶尔发送邮件的 Django 应用程序。目前绝对每天不超过 1000 封邮件。我想知道是否可以在我的域中打开一个新的电子邮件地址并通过 Google 的 smtp 服务器在“smtp.gmail.com”甚至在我的生产站点中发送我的邮件，或者我应该设置和配置一个本地中继？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:37:36.603

我选择安装postfix。我想强调 arkascha 的评论，即使用 smtp.gmail.com 只会让您将电子邮件中继到对我不起作用的 gmail 帐户。

我想答案是响亮的“不”。

# c# - 尝试构建动态 lambda 表达式以根据属性进行选择

> ID：13331083
> 
> 赞同：1
> 
> 时间：2012-11-11T12:21:59.327
> 
> 标签：c#, linq, dynamic, lambda, expression

尝试构建动态 Lambda 表达式以根据用户提供的属性名称进行选择，但收到错误“为 lambda 声明提供的参数数量不正确”。我试图做到这一点：`() => myObj.propName`

这是我的代码的最新版本：

```
 var parameter = Expression.Parameter(typeof(myObjType), propName);
    MemberExpression exp = Expression.PropertyOrField(parameter, propName);
    var func = Expression.Lambda<Func<string>>(exp, parameter).Compile(); 
```

错误发生在最后一行。我在 SO 和其他地方看到了一些类似的事情，这些事情让我走到了这一步，但无法弄清楚我做错了什么。目前，我尝试使用的所有属性都是字符串。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:01:48.663

要使用动态表达式（作为字符串）进行查询，您可以使用Microsoft 的 Scott Gu 的[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

检查[此](https://stackoverflow.com/a/14067998/649524)答案以获取详细信息。

[Dynamic Linq 库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)将看起来复杂的 Expression.* 调用抽象为简单的 Linq 语法，该语法接受 Property Name 为`string`.

# matlab - 在matlab中查找最小元素的索引

> ID：13331088
> 
> 赞同：5
> 
> 时间：2012-11-11T12:22:36.313
> 
> 标签：matlab

这里我有两个矩阵，一个表示成本，另一个决定何时进行比较。

```
cost =      [0.2 0.0 0.3; 0.4 0 0; 0.5 0 0];
available = [1   1   0  ; 1   0 0; 0   0 0];
available = logical(available); 
```

我想获取成本矩阵中最小可用元素的索引，在这种情况下将比较`0.2`，`0.0`并`0.4`返回 的索引`0.0`，即成本矩阵中的`(1, 2)`或`4`。

我试过

```
mul = cost .* available;     % Zero if not available, but I can't know if it is zero because cost is zero
mul(~mul) = nan;             % Set zero to be NaN
[minVal, minId] = min(mul) 
```

这将有助于获得最小的非零成本，但如果存在可用的零元素，那将是错误的。

那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:28:53.473

这里有两种可能的解决方案。两者本质上都涉及将所有非可用成本转换为`Inf`.

```
%#Set up an example
Cost =      [0.2 0 0.3; 0.4 0 0; 0.5 0 0];
Available = [1   1   0; 1   0 0; 0   0 0];

%#Transform non-available costs to Inf
Cost(Available == 0) = Inf;

%#Obtain indices using find
[r, c] = find(Cost == min(min(Cost)))

%#Obtain linear indices and convert using ind2sub
[~, I1] = min(Cost(:));
[r2, c2] = ind2sub(size(Cost), I1); 
```

两种解决方案都只会在没有唯一最小值的情况下返回第一个最小值。此外，在所有可用成本都为反常情况下，该方法将失败`Inf`（但我想如果您的所有成本都是无限的，那么您会遇到更大的问题......）。

我已经做了一些速度测试，第二种方法肯定更快，无论是什么尺寸`Cost`，所以应该严格首选。此外，如果您只想要线性索引而不是下标索引，那么您当然可以放弃对`ind2sub`. 但是，这并没有给您带来巨大的效率节省，因此如果您更喜欢下标索引，那么您应该使用它们。

# jquery - jQuery-ui 可调整大小：调整大小不适用于动态创建的 SVG 元素

> ID：13331091
> 
> 赞同：2
> 
> 时间：2012-11-11T12:24:10.377
> 
> 标签：jquery, jquery-ui, svg

我`<rect>`在 a中有一个 SVG `<div>`，想拖动它并调整它的大小。当我像这样在 HTML 中静态创建元素时：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/start/jquery-ui.css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {  

        $('div').draggable({
            handle: 'rect'
        }).resizable({
            aspectRatio: 1.0
        });
    });
</script>
</head>
<body>    
    <div style="width:400px; height:400px; border:solid thin #888; padding:10px; border-radius:4px; background-color:#ccc;">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 400 400">
            <rect x="0" y="0" width="200" height="200" style="fill:#FF0000" />
        </svg>
    </div>
</body> 
```

一切正常。与`<rect>`一起拖动和调整大小`<div>`，但是当我像这样动态生成元素时：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/start/jquery-ui.css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $('body').append('<div style="width:400px; height:400px; border:solid thin #888; padding:10px; border-radius:4px; background-color:#ccc;">');

        var svg = document.createElementNS('http://www.w3.org/2000/svg', "svg");
        svg.setAttributeNS(null, "viewbox", "0 0 400 400");
        $('div').append(svg);

        var square = document.createElementNS('http://www.w3.org/2000/svg', "rect");
        square.setAttributeNS(null, "width", "200");
        square.setAttributeNS(null, "height", "200");
        square.setAttributeNS(null, "x", "0");
        square.setAttributeNS(null, "y", "0");
        square.setAttributeNS(null, "style", "fill:#FF0000");
        $('svg').append(square);

        $('div').draggable({
            handle: 'rect'
        }).resizable({
            aspectRatio: 1.0
        });
    });
</script>
</head>
<body>    
</body>
</html> 
```

只有拖动继续适用于`<div>`和`<rect>`。调整大小仅适用于`<div>`，`<rect>`根本不会改变大小。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:50:50.000

SVG 在静态情况下区分大小写，您使用正确的“viewBox”大小写。在动态情况下，您不会。

```
 svg.setAttributeNS(null, "viewbox", "0 0 400 400"); 
```

应该

```
 svg.setAttributeNS(null, "viewBox", "0 0 400 400"); 
```

# ios - facebook sdk 3.0 会支持 iOS 4 吗？

> ID：13331093
> 
> 赞同：2
> 
> 时间：2012-11-11T12:24:42.333
> 
> 标签：ios, facebook, sdk

我的应用程序是为 iOS 4.3 到 6 开发的，它使用 facebook sdk 3.1。但现在我需要使用 xcode 4.2 准备构建，以使应用程序在具有 iOS 4.0 的设备上运行。facebook sdk 3.0 会支持 iOS 4 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:19:32.200

它支持 4.3 及更高版本。请参阅[https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/，Facebook](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/)登录中的部分。

# java - 用java和php插入mysql：没有错误但没有插入

> ID：13331095
> 
> 赞同：0
> 
> 时间：2012-11-11T12:24:50.617
> 
> 标签：java, php, android, mysql, insert

我有一个调用远程 php 将数据插入 mysql 表的 Android java 方法。

这是**java代码**客户端：

```
public static void insert(String email1, String email2) {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("email1", email1));
    nameValuePairs.add(new BasicNameValuePair("email2", email2));

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("myserver:8080/insert.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    //How to catch and print php echo() here??
} 
```

这是**insert.php**服务器端（*重新编辑*）：

```
<?php   
    $mysqli_connection = new mysqli("localhost:3306", "root", "password", "mydb");
    if ($mysqli_connection->connect_errno) {
        echo ("Connection Failure");
        exit();
    }

    $stmt = $mysqli->stmt_init();
    if ($stmt->prepare("INSERT INTO `mytable` (`email1`, `email2`) VALUES (?,?)")) {
        echo 'Success';
        $stmt->bind_param("ss", $_GET['email1'], $_GET['email2']);
        $stmt->execute();
        $stmt->close();
    } else {
        echo 'Error Inserting Content';
    }

    $mysqli->close();   
?> 
```

当我调用我的 java insert() 方法时，**没有返回异常，但没有插入，**并且 mytable 为空。

*   1）怎么了？
*   2) 如何查看发生了哪个错误？如何查看 php 端执行的“日志”？

非常感谢。凝胶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:25:52.607

`backtick`对列名和/或 tableNames使用而不是单引号

```
INSERT INTO mytable(`email1`,`email2`) VALUES('$email1','$email2') 
```

你什么时候用反引号？

*   当列名或表名是[MySQL 中的保留关键字时](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)
*   当它包含空间时，

例如，

```
CREATE TABLE `hello word`(`Record ID` INT,....) 
```

并且您的查询很容易受到攻击`SQL Injection`，请花点时间阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:34:31.310

查看您的`HttpResponse/HttpEntity`. 在那里您应该看到“成功”或“插入内容错误”。您还可以在响应中添加具体`errno`和`error`字符串，看看到底出了什么问题。

您还可以在请求中混合使用 HTTP POST 和 HTTP GET。在客户端，您使用 HttpPost 对象，而在服务器端，您希望设置 _GET 变量。*您必须在双方都*使用 GET 或 POST 。否则客户端和服务器将无法相互理解。

使用[HttpEntity.getContent()](http://developer.android.com/reference/org/apache/http/HttpEntity.html#getContent%28%29)您可以从`InputStream`. 另一种方法是使用[EntityUtils.toString()](http://developer.android.com/reference/org/apache/http/util/EntityUtils.html#toString%28org.apache.http.HttpEntity%29)来获取响应内容的字符串表示形式。

# expressionengine - 记住的多个列表选择

> ID：13331100
> 
> 赞同：0
> 
> 时间：2012-11-11T12:25:28.383
> 
> 标签：expressionengine

有谁知道允许 CP 中的用户添加到列表（类似于 P&T 列表）的附加组件，但该列表的条目在所有条目中都是持久的？

即我有以下尺寸的列表：

8 10 12 14

如果客户添加大小“16” - 它不仅允许他们添加它，而且所有未来的条目也有该选项（旧条目也有它但未选择）。

我可以发誓我过去曾见过这样的东西，但我再也找不到了。

谢谢，

卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:29:19.390

卡尔，

我们有一个内部字段类型插件，我认为它可以满足您的要求。

字段的每个实例都包含一个列表，该列表可以与字段类型定义一起最初创建。然后可以从每个频道条目中选择这些选项，或者可以添加新项目。然后，这些新项目将出现在列表中以供将来输入。

A）这有什么意义吗（描述起来很棘手）？B) 你想让我给你发一份电子邮件吗？

干杯，史蒂夫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:40:29.520

您可能已经考虑过了，但是低变量 ftw 呢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:28:55.867

如果您引用的“选项”是“选项”通道中的条目并且您的字段组中的字段与该通道有关系，这也是可能的。虽然这可能比您要寻找的要重一些，但它是原生的。

# ios - 如何将数组添加到 TableViewController？

> ID：13331111
> 
> 赞同：0
> 
> 时间：2012-11-11T12:27:06.707
> 
> 标签：ios, cocoa-touch, nsarray, tableview

当我在网上冲浪时，我发现了很多如何在 TableViewController 中加载数组的示例，但没有一个对我有帮助！

你不能帮我找出我的代码有什么问题吗？

先感谢您！！！

```
#import "Images.h"
#import "AFNetworking.h"
#import "HTMLparser.h"

@interface Images ()

@end

@implementation Images

@synthesize data;

@synthesize textFromVC1;
@synthesize tableView;

@synthesize so2;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.delegate = self;
    self.tableView.dataSource = self;

    self.data = [[NSMutableArray alloc]init];

    NSError *error = nil;

    NSString *so = [@"http://" stringByAppendingString: self.textFromVC1];

    NSURL *url = [[NSURL alloc]initWithString:so];

    NSString *str=[[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    HTMLParser *parser = [[HTMLParser alloc] initWithString:str error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
        [parser release];
        parser = nil;
        return;
    }

    HTMLNode * body = [parser body];

    NSArray *inputs = [body findChildTags:@"img"];

    for (HTMLNode *input in inputs) {

        NSString *links = [input getAttributeNamed:@"src"];

        NSString *so1 = [so stringByAppendingString: @"/"];

        so2 = [so1 stringByAppendingString: links];

        [self.data addObject:so2];

            NSLog(@"%@", data);

        NSURLRequest *request = [[NSURLRequest alloc]initWithURL:url];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
            {

       } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)

      {

          }];

        [operation start];

    }

   [self.tableView reloadData];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [self setTableView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
        return self.data.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"LinkID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
    }

 cell.textLabel.text = [self.data objectAtIndex:indexPath.row];

     [self.tableView reloadData];

    return cell;

}
/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
}

- (void)dealloc {
    [tableView release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:52:26.233

假设您的`data`数组构建正确，那么您的错误就是您的`numberOfSections`方法。目前，它返回`0`，它告诉`UITableView`当前没有要显示的部分……永远。

您可以在`return 1;`那里或完全删除整个方法。您从 继承的默认实现`UITableViewController`也默认返回`1`。

我的建议是删除该方法，因为这样可以使您自己的代码更干净。您总是可以在稍后阶段实现它，当您可能真正需要它时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:46:18.937

好吧 1) numberOfSections 是 0。看到的东西应该是一个 IIRC 认为就是这样，但没有仔细检查

# mysql - 来自字段末尾的部分 MySQL 索引

> ID：13331112
> 
> 赞同：2
> 
> 时间：2012-11-11T12:27:09.127
> 
> 标签：mysql, performance, indexing, field, partial

部分索引有助于拥有更小的索引，并使 INSERT 更快。

例如

```
 CREATE TABLE wine (
    name VARCHAR(100),
    ...
    INDEX (name(8))); 
```

虽然名字有点像

```
  木桐酒庄
  木桐嘉棣酒庄
  柏图斯城堡
  拉菲城堡
  拉弗勒城堡
  ...
```

在这个（示例）列表中，`Chateau`一直出现，MySQL 根据前 8 个字符创建一个索引......这意味着索引中只有一个条目（并且搜索`Chateau Petrus`将按顺序完成 all `Chateau`）。
（在这种情况下，将`Chateau`两个字段中的第一个单词 ( ) 和名称的其余部分分开是有意义的，但这不是重点）。

有没有办法让 MySQL 根据字段的*结尾*创建部分索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:56:29.600

实际上我在此期间找到了一种方法 - 有点编程：

只为`name`领域

*   所有`name`条目都*反向*存储在数据库中
*   所有`name`搜索都是*反向的*
*   `name`在发送到客户端（用户代理）之前将行中的内容*反转*

例如在 PHP

*   `...query('INSERT ... name="' . strrev($name) . '"...`
*   `...query('SELECT * FROM wine WHERE name="' . strrev($name) . '"');`
*   例如搜索`%MOUTON%`将实际搜索`%NOTUOM%`

有一点`reverse`开销，但与可能的数据库增益相比可以忽略不计。

问题是专门要求一个纯 MySQL 解决方案，但如果没有，这是任何语言的可行解决方法。如果没有更好的，我会在几天内接受这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:44:42.867

除了上面提到的解决方案之外，MySQL 中唯一的解决方案是显式存储要索引的值。（例如`name`没有`Chateau`）

# scanf - Scanf 漏线

> ID：13331120
> 
> 赞同：3
> 
> 时间：2012-11-11T12:28:36.437
> 
> 标签：scanf

我写了一个测试程序，它应该接受一个 3x3 的字符矩阵并输出输入的矩阵。但是，我必须输入 4 行才能让程序生成相应的矩阵。我已经查找了有关 scanf 功能的问题，但我尝试过的解决方案似乎都不起作用......你能帮我解决这个问题吗？

我的代码：

```
#include <stdio.h>
#include <stdlib.h> 

 int main(void) {

     char a[3][3];
     int i,j;

     for(i=0;i<3;++i)
     {
        for(j=0;j<3;++j)
        {
            scanf("%c",&a[i][j]);
        }
        scanf("\n");
     }

     for(i=0;i<3;++i)
     {
        for(j=0;j<3;++j)
        {
            printf("%c",a[i][j]);
        }
        printf("\n");
     }

     system("PAUSE");

     return(0); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:24:42.687

尝试在您的 scanf 中添加一个空格，就在“

```
scanf(" %c",&a[i][j]); 
```

我在二维矩阵中遇到了同样的问题，它对我有用。我不知道为什么！我只是在笔记本电脑前花了 1 个小时尝试不同的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:46:23.180

`scanf("%c",...)`获取空格和`\n`. 您可以通过多种方式解决它：

如果你读起来像`a b c`

```
for(i=0;i<3;++i)
    {
        for(j=0;j<3;++j)
        {
            scanf("%c",&a[i][j]);
            cin.get(); //Get the spaces after each character and the \n at the end of each line
        }
    } 
```

或者您可以简单地使用`cin`（使用 scanf 读取字符/字符串输入总是一个问题）

```
 for(i=0;i<3;++i)
    {
        for(j=0;j<3;++j)
        {
            cin >> a[i][j];
        }
    } 
```

如果您正在阅读`abc`，则只需将您的替换`scanf("\n")`为`cin.get()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:15:44.210

@João Menighin 的回答肯定有效。如果您想避免使用 c++，这将起作用：

```
for(i=0;i<3;++i)
{
   for(j=0;j<3;++j)
   {
       scanf(" %c",&a[i][j]);
   }
} 
```

尽管它会忽略所有空格：两者都`abc`将`a b c`被解释为等效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T22:46:33.623

试过你的，它工作。虽然，我确实对每条评论进行了一些更改：

```
#include <stdio.h>  // added, but that shouldn't matter
main()
{
     char a[3][3];
     int i,j;

     for(i=0;i<3;++i)
     {
        for(j=0;j<3;++j)
        {
            scanf("%c",&a[i][j]);
        }
        //scanf("\n"); // not necessary, see below
     }

     for(i=0;i<3;++i)
     {
        for(j=0;j<3;++j)
        {
            printf(" %c",a[i][j]);
        }
        printf("\n");
     }

     return(0);

} 
```

在 Eclipse/Microsoft C 编译器上编译并运行此代码并输入一系列字符，然后按 enter。

```
abcdefghi
 a b c
 d e f
 g h i 
```

混淆点可能是`scanf`从控制台缓冲区中提取数据。通常，（尽管您可以解决此问题）当您按 Enter 时，缓冲区会返回到您的程序。此外， 的格式说明符`%c`也接受空格。因此，我尝试使用以下输入和输出进行第二次运行。

```
a b c d e 
 a   b
   c  
 d   e 
```

您可以分辨出空格以及字母已被读取和存储。

希望这可以帮助。

# c++ - 链表类

> ID：13331123
> 
> 赞同：0
> 
> 时间：2012-11-11T12:28:48.467
> 
> 标签：c++, linked-list

好的，我知道这是一个非常简单的问题，但由于某种原因，我无法让链接列表工作。可能只是因为我真的很累，因为我以前做过一百万次。将我的程序简化为最简单的实现，但仍然无法正常工作。

非常基本的实现，只需制作一个整数 LL，这是我之前做过一百万次的事情，但无论出于何种原因，它永远不会超过头脑。

**主文件**

```
#include <iostream>
#include "ll.h"
using namespace std;

int main()
{
    int x;
    list ll;
    int i =0;

    while(i == 0)
    {
    cout << "Enter a value to add to the LL ";
    cin >> x;

    ll.add(x);
    ll.display();
    }

return 0;
} 
```

**ll.h**

```
struct node
{
    int val;
    node * next;
};

class list
{
    public:
    list();

    void add(int);
    void display();
    node * head;
}; 
```

**ll.cpp**

```
#include <iostream>
#include "ll.h"
using namespace std;

list::list()
{
    head = NULL;
}

void list::add(int x)
{
    if(!head)
    {
        cout << "First  " << endl;
        head = new node;
        head->val = x;
        head->next = NULL;
    }
    else
    {
        node * current = head;
        while (current)
            current = current->next;

        current = new node;
        current->val = x;
        current->next = NULL;

    }
}

void list::display()
{
    node * current = head;

    while(current)
    {
        cout << current->val << endl;
        current = current->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:32:15.973

看来您想追加到列表中。在这种情况下，您的循环条件不应该是

```
while (current) 
```

但

```
while (current->next) 
```

确保最初是非 NULL （您可以通过检查 `head 来执行此操作）。

实际上，设置新节点的逻辑也不太对。您可能希望第二个分支`add()`看起来像这样：

```
while (current->next) {
    current = current->next;
}
current->next = new node(x); 
```

...具有合适的构造函数`node`：

```
node::node(int x): val(x), next() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:36:29.850

除了 Dietmar 的回答之外，您还有一个不正确的 while 循环：

```
while ( i == 0 ) {
     ...
} 
```

在 for 循环的主体中，`i`永远不会改变，导致它无限循环。我不完全确定你想用什么`i`。

# python - 在matplotlib的表面上叠加一条线

> ID：13331126
> 
> 赞同：2
> 
> 时间：2012-11-11T12:28:53.413
> 
> 标签：python, matplotlib

我一直试图在表面上叠加一条线，但我有一个小问题。有一些视点看不到这条线。例如，尝试绘制由以下代码生成的表面：

```
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import axes3d, Axes3D
import pylab as p
import matplotlib.ticker as ticker 
from matplotlib.colors import LightSource

vima=0.2

def fun(x, y):
  return x**3 + y

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(0.1, 50, vima)
Y = np.arange(0.1, 10.2, vima)
X, Y = np.meshgrid(X, Y)

Z=fun(X,Y)

surf = ax.plot_surface(X, Y, Z,rstride=25, cstride=75, alpha=1, color='0.8',  linewidth=0.2, shade=True)

Y=(10.0-0.2*X)/0.9798
Z=Z*0
ax.plot_surface(X,Y,Z)
ax.grid(on=True)
ax.view_init(elev=34,azim=-106)

Z=fun(X,Y)
ax.plot_surface(X,Y,Z)#, linewidth=1)

ax.w_xaxis.set_major_locator(ticker.NullLocator()) 
ax.w_yaxis.set_major_locator(ticker.NullLocator()) 
ax.w_zaxis.set_major_locator(ticker.NullLocator()) 

ax.set_xlabel('$x$')

ax.set_ylabel('$y$')
ax.set_zlabel('$z$')

fig.suptitle('b', fontsize=14)

plt.show() 
```

我假设最初你可以看到表面，xy 平面上的一条线和一条叠加在表面上的线。但是如果你旋转这个图，你会发现有些视点叠加的线是不可见的。

有没有办法克服这个小错误？

先感谢您

# php - XML 标记名称不匹配

> ID：13331128
> 
> 赞同：-1
> 
> 时间：2012-11-11T12:29:21.630
> 
> 标签：php, javascript

我正在通过 iframe 上传文件。我正在将我上传的文件发送到一个 php 页面，该页面返回一个数字以显示一条消息或一个 html 块，我想用它来替换我的父页面上列出该用户的所有上传文件的表格。在我的 php 处理页面上，我有：

上传进程.php

```
<script language="javascript" type="text/javascript"> 
window.top.window.stopUpload(<?php echo $result;?>);
</script> 
```

$result 正在返回：

```
<tr><td><input name='checkbox[]' type='checkbox' id='checkbox[]' value='43'></td><td><a href='../php/viewimages.php?id=13')'>New One</a></td><td>Clincal Literature</td><td>2012-11-11</td></tr> 
```

Firebug 正在抛出：SyntaxError: XML tag name mismatch (expected input) and has a arrow point to the `</td>`after value=43

当我收到此错误时，在主页上运行的功能是：

```
<script type="text/javascript">
    function startUpload() {
        document.getElementById('f1_upload_process').style.visibility = 'visible';
        return true;
    }

    function stopUpload(success) {
        var result = '';
        if (success == 0) {
            document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">There was an error during file upload!<\/div><br/>';
        } else if (success == 2) {
            document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">ERROR! Please upload a document with the following file types....<br/><br/>txt, doc, xls, rtf, ppt, pdf, jpg, jpeg, gif, png, xlsx, docx, png, pps, ppsx, ppt<\/div><br/>';
        } else {
            window.top.document.getElementById('attachment_table').innerHTML = result;
            document.getElementById('result').innerHTML = '<div class="msg-status" style="width:492px;">The file was uploaded successfully!<\/div><br/>';
        }
        document.getElementById('f1_upload_process').style.visibility = 'hidden';
        return true;
    }
</script> 
```

有人可以指出我做错的方向吗？我是一个自学成才的菜鸟，我通常使用 jquery/ajax 来解决这个问题，但是因为我正在处理文件，所以我不得不在这个问题上使用 iframe。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:51:50.797

你`upload_process.php`似乎有一些逃避问题。根据您的问题，将返回以下内容（也请使用 Firebug 进行检查）：

```
<script language="javascript" type="text/javascript"> 
window.top.window.stopUpload(<tr><td><input name='checkbox[]' type='checkbox' id='checkbox[]' value='43'></td><td><a href='../php/viewimages.php?id=13')'>New One</a></td><td>Clincal Literature</td><td>2012-11-11</td></tr>);
</script> 
```

它似乎是 XML 解析的（或者至少是通过引发 XML 相关错误的东西），并表示该`<input>`标记没有正确关闭，但紧随其后的是`</td>`. 您应该始终在 cdata 部分中输出脚本内容，将它们包含在注释中或转义标签和引号。

此外，检查您的答案的内容类型标题和 HTML 文档类型等，它们可能不正确。它不仅包含`<script>`标签，是吗？

接下来，您传递给 JS 函数的参数`stopUpload`应该是一个字符串。那里的纯 HTML 字符串使脚本无效。将其括在引号中，并转义其中的任何引号（没关系，您现在只使用撇号）。

# wpf - 为什么我的树视图中的箭头变成了奇怪的方块

> ID：13331133
> 
> 赞同：0
> 
> 时间：2012-11-11T12:29:53.710
> 
> 标签：wpf, xaml, wpf-controls

我有一个具有树视图的用户控件。此用户控件继承自基本用户控件。在更改基本控制图形之前，我能够很好地看到树视图中的箭头。从那时起，我开始在树视图中看到奇怪的正方形而不是常规箭头。这种行为有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:43:08.393

此行为受到 app.xaml 中定义的样式的影响。样式的目标类型是 Border。可能树视图中箭头的类型是某个边框，而应用程序 xaml 中的公共边框类型导致这些箭头被更改。

# shell - 参数输入有效，但管道无效

> ID：13331137
> 
> 赞同：0
> 
> 时间：2012-11-11T12:30:15.157
> 
> 标签：shell

我试图创建一个 shell 脚本，对给定的数字求和。如果没有给定参数，则它会尝试读取管道输出，但出现错误。

```
#!/bin/sh

sum=0

if [ $# -eq 0 ]
then
  while read data
  do
    sum=`expr $sum + $data`
  done
else
  for ((  i = 1 ;  i <= $#;  i++  ))
  do
    sum=`expr $sum + ${!i}`
  done
fi

echo $sum 
```

这有效：`sum 10 12 13` 但是这个无效：`echo 10 12 13| sum`

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:50:15.423

给你（假设`bash`，不是`sh`）：

```
#!/bin/bash

sum=0

if (( $# == 0 )); then
  # Read line by line
  # But each line might consist of separate numbers to be added
  # So read each line as an array!
  while read -a data; do
    # Now data is an array... but if empty, continue
    (( ${#data[@]} )) || continue
    # Convert this array into a string s, with elements separated by a +
    printf -v s "%s+" ${data[@]}
    # Append 0 to s (observe that s ended with a +)
    s="${s}0"
    # Add these numbers to sum
    (( sum += s ))
  done
else
    # If elements come from argument line, do the same!
    printf -v s "%s+" $@
    # Append 0 to s (observe that s ended with a +)
    s="${s}0"
    # Add these numbers to obtain sum
    (( sum = s ))
fi

echo $sum 
```

您可以这样调用它：

```
$ echo 10 12 13 | ./sum
35
$ ./sum 10 12 13
35
$ # With several lines and possibly empty lines:
$ { echo 10 12 13; echo; echo 42 22; } | ./sum
99 
```

希望这可以帮助！

**编辑。**您可能也有兴趣了解有关`IFS`. 我注意到人们往往会混淆`@`并`*`在`bash`. 如果你不知道我在说什么，那么你应该使用`@`代替`*`，也用于数组下标！在`bash`手册中，您会发现当双引号时，`$*`（或`${array[*]}`）扩展为数组的所有元素，**由`IFS`**. 这在我们的例子中很有用：

```
#!/bin/bash

sum=0

if (( $# == 0 )); then
  # Read line by line
  # But each line might consist of separate numbers to be added
  # So read each line as an array!
  while read -a data; do
    # Now data is an array... but if empty, continue
    (( ${#data[@]} )) || continue
    # Setting IFS=+ (just for the sum) will yield exactly what I want!
    IFS=+ sum=$(( sum + ${data[*]} ))
  done
else
    # If elements come from argument line, do the same!
    # Setting IFS=+ (just for the sum) will yield exactly what I want!
    IFS=+ sum=$(( $* ))
fi

echo $sum 
```

Gniourf 现在退出教师模式。`:-)`

# c - 在 C 中实现流水线。最好的方法是什么？

> ID：13331139
> 
> 赞同：3
> 
> 时间：2012-11-11T12:31:00.410
> 
> 标签：c, linux, pipe, pipeline, mkfifo

我想不出任何在c中实现流水线的方法，它实际上会起作用。这就是我决定在这里写的原因。我不得不说，我了解 pipe/fork/mkfifo 是如何工作的。我见过很多实现 2-3 管道的例子。这简单。我的问题开始了，当我必须实现 shell 时，管道数是未知的。

我现在所拥有的：例如。

```
ls -al | tr a-z A-Z | tr A-Z a-z | tr a-z A-Z 
```

我把这条线变成了这样的东西：

```
array[0] = {"ls", "-al", NULL"}
array[1] = {"tr", "a-z", "A-Z", NULL"}
array[2] = {"tr", "A-Z", "a-z", NULL"}
array[3] = {"tr", "a-z", "A-Z", NULL"} 
```

所以我可以使用

```
execvp(array[0],array) 
```

稍后的。

直到现在，我相信一切都好。当我尝试将这些功能的输入/输出重定向到彼此时，问题就开始了。

我是这样做的：

```
 mkfifo("queue", 0777);

    for (i = 0; i<= pipelines_count; i++) // eg. if there's 3 pipelines, there's 4 functions to execvp
    {
    int b = fork();             
    if (b == 0) // child
        {           
        int c = fork();

        if (c == 0) 
        // baby (younger than child) 
        // I use c process, to unblock desc_read and desc_writ for b process only
        // nothing executes in here
            {       
            if (i == 0) // 1st pipeline
                {
                int desc_read = open("queue", O_RDONLY);
                // dup2 here, so after closing there's still something that can read from 
                // from desc_read
                dup2(desc_read, 0); 
                close(desc_read);           
                }

            if (i == pipelines_count) // last pipeline
                {
                int desc_write = open("queue", O_WRONLY);
                dup2(desc_write, 0);
                close(desc_write);                              
                }

            if (i > 0 && i < pipelines_count) // pipeline somewhere inside
                {
                int desc_read = open("queue", O_RDONLY);
                int desc_write = open("queue", O_WRONLY);
                dup2(desc_write, 1);
                dup2(desc_read, 0);
                close(desc_write);
                close(desc_read);
                }               
            exit(0); // closing every connection between process c and pipeline             
            }
        else
        // b process here
        // in b process, i execvp commands
        {                       
        if (i == 0) // 1st pipeline (changing stdout only)
            {   
            int desc_write = open("queue", O_WRONLY);               
            dup2(desc_write, 1); // changing stdout -> pdesc[1]
            close(desc_write);                  
            }

        if (i == pipelines_count) // last pipeline (changing stdin only)
            {   
            int desc_read = open("queue", O_RDONLY);                                    
            dup2(desc_read, 0); // changing stdin -> pdesc[0]   
            close(desc_read);           
            }

        if (i > 0 && i < pipelines_count) // pipeline somewhere inside
            {               
            int desc_write = open("queue", O_WRONLY);       
            dup2(desc_write, 1); // changing stdout -> pdesc[1]
            int desc_read = open("queue", O_RDONLY);                            
            dup2(desc_read, 0); // changing stdin -> pdesc[0]
            close(desc_write);
            close(desc_read);                               
            }

        wait(NULL); // it wait's until, process c is death                      
        execvp(array[0],array);         
        }
        }
    else // parent (waits for 1 sub command to be finished)
        {       
        wait(NULL);
        }       
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:29:42.310

Patryk，您为什么要使用 fifo，而且管道的每个阶段都使用相同的 fifo？

在我看来，每个阶段之间都需要一个管道。所以流程会是这样的：

```
Shell             ls               tr                tr
-----             ----             ----              ----
pipe(fds);
fork();  
close(fds[0]);    close(fds[1]);
                  dup2(fds[0],0); 
                  pipe(fds);
                  fork();         
                  close(fds[0]);   close(fds[1]);  
                  dup2(fds[1],1);  dup2(fds[0],0);
                  exex(...);       pipe(fds);
                                   fork();     
                                   close(fds[0]);     etc
                                   dup2(fds[1],1);
                                   exex(...); 
```

在每个分叉 shell（close、dup2、pipe 等）中运行的序列看起来像一个函数（获取所需进程的名称和参数）。请注意，`exec`在每个调用之前，shell 的一个分叉副本都在运行。

编辑：

帕特里克：

```
Also, is my thinking correct? Shall it work like that? (pseudocode): 
start_fork(ls) -> end_fork(ls) -> start_fork(tr) -> end_fork(tr) -> 
start_fork(tr) -> end_fork(tr) 
```

我不确定你所说的 start_fork 和 end_fork 是什么意思。您是否暗示在开始`ls`之前运行完成`tr`？这并不是上图的真正含义。您的 shell 在开始之前不会等待`ls`完成`tr`。它按顺序启动管道中的所有进程，为每个进程设置`stdin`和`stdout`，以便将进程链接在一起，`stdout`of `ls`to `stdin`of `tr`; `stdout`的`tr`下`stdin`一个`tr`。这就是 dup2 调用正在做的事情。

进程运行的顺序由操作系统（调度程序）决定，但很明显，如果`tr`运行并从空读取，`stdin`它必须等待（阻塞）直到前一个进程向管道写入一些内容。很有可能在从它的读取`ls`之前运行到完成，但同样有可能它不会。例如，如果链中的第一个命令是连续运行并在此过程中产生输出的东西，那么管道中的第二个命令将不时被安排来处理第一个命令沿管道发送的任何内容。`tr``stdin`

希望能澄清一点:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:29:55.437

可能值得使用[libpipeline](http://libpipeline.nongnu.org/)。它负责您的所有工作，您甚至可以在管道中包含功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:50:07.047

问题是你试图一次做所有事情。而是把它分成更小的步骤。

1）解析您的输入以`ls -al |`摆脱它。1a）从这里你知道你需要创建一个管道，将它移动到标准输出，然后开始`ls -al`。然后将管道移动到标准输入。当然还有更多，但你不必担心代码中的它。

2) 解析下一段得到`tr a-z A-Z |`. 只要您的 next-to-spawn 命令的输出通过管道传送到某处，就返回步骤 1a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-07T00:17:03.007

> 在 C 中实现流水线。最好的方法是什么？

这个问题有点老了，但这是一个从未提供过的答案。使用[libpipeline](http://libpipeline.nongnu.org/)。libpipeline 是一个管道操作库。用例是`man`页面维护人员之一，他们必须经常使用如下命令（并解决相关的操作系统错误）：

```
zsoelim < input-file | tbl | nroff -mandoc -Tutf8 
```

这是 libpipeline 的方式：

```
pipeline *p;
int status;

p = pipeline_new ();
pipeline_want_infile (p, "input-file");
pipeline_command_args (p, "zsoelim", NULL);
pipeline_command_args (p, "tbl", NULL);
pipeline_command_args (p, "nroff", "-mandoc", "-Tutf8", NULL);
status = pipeline_run (p); 
```

libpipeline[主页](http://libpipeline.nongnu.org/)有更多示例。该库还包含在许多发行版中，包括 Arch、Debian、Fedora、[Scratch 的 Linux](http://www.linuxfromscratch.org/lfs/view/8.4/chapter03/packages.html)和 Ubuntu。

# c# - 使用 Linq 查询 XML 文档并将结果添加到列表视图中

> ID：13331142
> 
> 赞同：0
> 
> 时间：2012-11-11T12:31:20.830
> 
> 标签：c#, xml, winforms, linq, linq-to-xml

我有以下代码，现在我在控制台窗口中获取查询输出没有任何问题，但我想将它放在 Listview 中。我不知道该怎么做.. :)

这是我的 XML 数据：

```
<?xml version="1.0" encoding="utf-8" ?>
<Student>
 <Person name="John" city="Auckland" country="NZ" />
 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971035565221298</Date>
 </Person>
 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971036040828501</Date>
 </Person>
</Student> 
```

以下是我的代码：

```
List<string> list1=new List<string>();

private void button1_Click(object sender, EventArgs e)
{
    string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    XDocument xDoc = XDocument.Load(path + "\\Student Data\\data.xml");

    //IEnumerable<XElement> rows = from row in xDoc.Descendants("Person")
    //                             where (string)row.Attribute("Course") == "BICT"
    //                             select row;
    string i = textBox1.Text;

    IEnumerable<XElement> rows = 
        xDoc.Descendants()
            .Where(d => d.Name == "Person" && 
                        d.Descendants().Any(e => e.Name == "ID" &&
                                                 e.Value == i)
            );

    foreach (XElement xEle in rows)
    {
        IEnumerable<XAttribute> attlist = 
            from att in xEle.DescendantsAndSelf().Attributes() 
            select att;

        foreach (XAttribute xatt in attlist)
        {
            string n = xatt.ToString();
            //Console.WriteLine(xatt);
            list1.Add(n);
        }
        foreach (XElement elemnt in xEle.Descendants())
        {
            Console.WriteLine(elemnt.Value);
            list1.Add(elemnt.Value);
        }
        //Console.WriteLine("-------------------------------------------");

    }
    //Console.ReadLine();
    listView1.Items.Add(); // I am not sure.... 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:49:49.647

MSDN 中介绍了在运行时向 ListView 添加项目：http: [//msdn.microsoft.com/en-us/library/aa983548 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa983548(v=vs.71).aspx)

```
// Adds a new item with ImageIndex 3
listView1.Items.Add("List item text", 3); 
```

如果您没有任何图像，只需将索引设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:50:22.027

创建`ListViewItems`以将结果添加到`ListView`. `ListViewItem`接受字符串数组。第一个是项目的文本。其他是子项（在详细视图模式下可见）

```
var items = from p in xdoc.Descendants("Person")
            select new ListViewItem(
                new string[] {
                    (string)p.Attribute("name"),
                    (string)p.Element("Course"),
                    (string)p.Element("Level")     
                }
                );

foreach(var item in items)
     listView.Items.Add(item); 
```

# css - Css 文件没有像其他文件一样更新

> ID：13331146
> 
> 赞同：3
> 
> 时间：2012-11-11T12:31:37.947
> 
> 标签：css, hosting, web-hosting, remote-server

我目前在 justhost 上托管我的网站（就像一个测试服务器），当我通过 aptana 将我的工作保存在我的本地计算机上时，文件会自动上传到托管服务器，它们看起来很好。但是，这只适用于我的实际文件，如 .php 和 .html

它们不适用于我的 .css 文件，所以如果我保存它们并上传它们，更改不会生效，直到第二天，或者如果我打开和关闭计算机并放置几个小时，我不知道为什么它们没有像其他字段一样立即生效。

我已经尝试删除我的缓存并将 ?ver=1.0 添加到文件名的末尾，但仍然没有运气。

另外，我直接检查了主机，并且 css 文件已更新到正确的版本，但只是没有显示在浏览器中。

任何关于可能出错的想法，如果我能让它们像其他文件一样更新，那会让生活变得更轻松。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:00:38.667

我不确定是什么原因造成的，但如果我是正确的 - 文件确实上传了，这不是不上传的情况。这是其中之一

*   缓存正在持有它（虽然已经清除了它？）
*   该文件正在执行一些奇怪的跨服务器传输，这取决于您使用哪种托管方式，但可能是该文件在某处被搁置
*   尝试清除 DNS 缓存 Start > type CMD > 在对话框类型中：

    ipconfig /flushdns

*   这可能会强制计算机重新加载文件。

至于一个持续的解决方案，以防止它在未来我出去......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-07T05:11:05.533

I know it has been a while, but as others may find this question the way I did, the solution for me was to enable Cloudflare Developer Mode. Cloudflare was keeping the css files in cache and it drove me crazy to find the solution in another forum. I hope your case may be the same as mine as thus you can solve it as well.

# sql - Left join 与 3 个表 where 子句语法不正确

> ID：13331147
> 
> 赞同：0
> 
> 时间：2012-11-11T12:31:49.380
> 
> 标签：sql, sql-server-2008

我正在尝试使用`WHERE`子句跨 3 个表创建 JOIN，但出现错误：

> *'=' 附近的语法不正确。*

我不知道我做错了什么？

这是我的声明：

```
select 
    TBL_CS_PROJECT.NAME ,
    TBL_CS_LINKS.LINK_URL , 
    TBL_CS_CLICKS.CLICK_COUNT 
from 
    TBL_CS_PROJECT 
left join 
    TBL_CS_LINKS on TBL_CS_PROJECT.PROJECT_ID = TBL_CS_LINKS.PROJECT_ID 
right join 
    TBL_CS_CLICKS on TBL_CS_LINKS.LINK_ID = TBL_CS_CLICKS.LINK_ID 
WHERE =  (CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0) 
    OR  (CHARINDEX('t', TBL_CS_PROJECT.NAME) > 0) 
order by   
    TBL_CS_PROJECT.NAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:33:37.207

`=`在`WHERE`子句中删除

```
...
WHERE (CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0)  OR ... 
```

根据文档：[CHARINDEX ^(MSDN Doc)](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

`CHARINDEX`- 在一个表达式中搜索另一个表达式，如果找到则返回它的起始位置。

这已经是一个布尔表达式：

```
(CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0) 
```

所以你的`WHERE`条款不需要`=`签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:33:08.953

您在`WHERE`子句之后缺少表达式，以将其与运算符工作方式的表达式进行`(CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0)`比较`=`：

```
....
WHERE =  (CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0) 
OR  (CHARINDEX('t', TBL_CS_PROJECT.NAME) > 0) order by   TBL_CS_PROJECT.NAME 
```

删除`=`运算符：

```
 ...
   WHERE CHARINDEX('t', TBL_CS_LINKS.LINK_URL) > 0
     OR  CHARINDEX('t', TBL_CS_PROJECT.NAME) > 0
   order by   TBL_CS_PROJECT.NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:35:10.093

`WHERE =`是你的问题。只需将其更改为`WHERE`

# android - Android - 加载后在 Webview 内搜索文本

> ID：13331148
> 
> 赞同：1
> 
> 时间：2012-11-11T12:31:50.727
> 
> 标签：android, android-webview

我一直在搜索，但找不到适用于我的代码，我发现了一些类似的问题，但其他问题不适用于我的“加载后”代码。

我需要的是搜索文本，如果存在则正常显示页面（什么也不做，我的意思是，让我们继续），如果不存在，则使用以下代码在同一 webview 上显示 html 消息：

```
String MsgError = "<html><body><h1 style='color:#FF0000'>Error</h1><br /><a style='color:#000000'>An error occurred while page is loading, please try again later.</a></body></html>";
mWebView.loadData(MsgError, "text/html", "UTF-8"); 
```

我必须找到这样的文本：

```
Text 
```

这是我的“加载后”代码：

```
@Override
public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    view.clearCache(true);
} 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:04:00.283

也许看[这里](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)可能会很有趣，有人解释了如何从 web 视图中将 HTML 提取为字符串。您可以对该字符串执行[String.matches()](http://www.tutorialspoint.com/java/java_string_matches.htm)。根据您获得的结果，您可以让 WebView 存在，也可以将其重定向到您自己的自定义错误页面。

# actionscript-3 - Flash - 使用多个事件处理程序？

> ID：13331149
> 
> 赞同：0
> 
> 时间：2012-11-11T12:32:06.723
> 
> 标签：actionscript-3, events, actionscript, event-handling, addchild

所以我正在开发一个使用多个 .as 文件的游戏 - 我正在尝试对游戏进行编程，但是当它到达 theGame.as 中的第 21 行时，它会不断出现以下错误 - 错误是......

`TypeError: Error #2007: Parameter child must be non-null. at flash.display::DisplayObjectContainer/addChild() at theGame()[M:\Users\----\Documents\Programming For Fun\Flash\Tutorial - Menu System\theGame.as:21] at main/changeState()[M:\Users\----\Documents\Programming For Fun\Flash\Tutorial - Menu System\main.as:23] at mainMenu/brnP_Button()[M:\Users\----\Documents\Programming For Fun\Flash\Tutorial - Menu System\mainMenu.as:40] Cannot display source code at this location.`

我正在使用以下 .as 文件。

主文件

```
//main.as
package
{
import flash.display.*;
import flash.system.fscommand;

public class main extends MovieClip
{
    public function main()
    {
        changeState(null, "menu");
    }
    public function changeState (currentState, nextState)
    {
        if (currentState != null)
        {
            removeChild(currentState);
        }
        switch(nextState)
        {
            case "menu": var mm:mainMenu = new mainMenu(changeState); 
                         addChild(mm);
            break;
            case "game": var g:theGame = new theGame(changeState);
                         addChild(g);
            break;
            case "exit": fscommand("quit");
            break;
        }
    }

}

} 
```

主菜单.as `

```
//mainMenu.as
package
{
import flash.display.*;
import flash.events.*;

public class mainMenu extends MovieClip
{
    var theCallBackFunction:Function;

    private var ballX:Number = 10; // Declaring a variable known as ballX
    private var ballY:Number = 0; // Declaring a variable knwon as ballY
    private const GRAVITY:Number = 2; // Declaring a const variable known as gravity
    public const ROTATION:Number = 1;
    public const BOUNCE:Number = 0.9;
    var gameBall:Ball = new Ball();

    public function mainMenu(callBack)
    {
        addEventListener(Event.ENTER_FRAME, menuFrameHandler);
        addChild(gameBall);

        var btnPlay:mmPlay = new mmPlay();
        btnPlay.addEventListener(MouseEvent.MOUSE_DOWN, brnP_Button);
        btnPlay.x = width/2;
        btnPlay.y = height/2 - btnPlay.height/2;
        addChild(btnPlay);

        var btnExit:mmExit = new mmExit();
        btnExit.addEventListener(MouseEvent.MOUSE_DOWN, brnE_Button);
        btnExit.x = width/2;
        btnExit.y = height/2 - btnExit.height/2;
        btnExit.y += btnExit.height + 4;
        addChild(btnExit);

        theCallBackFunction = callBack;
    }
    public function brnP_Button(e:MouseEvent)
    {
        removeEventListener(Event.ENTER_FRAME, menuFrameHandler);
        theCallBackFunction(this, "game");
        return;
    }

    public function brnE_Button(e:MouseEvent)
    {
        theCallBackFunction(this, "exit");
        return;
    }

    private function menuFrameHandler (e:Event):void
    {
        // Gravitate the Ball
        ballY += GRAVITY; // The ball is effected by gravity each frame

        // Move The Ball
        gameBall.x += ballX;
        gameBall.y += ballY;
        gameBall.rotation += ROTATION * ballX;
        checkBoundaryCollision();
    }

    private function checkBoundaryCollision():void
    {
        var left:Number;
        var right:Number;
        var bottom:Number;

        left = gameBall.x - (gameBall.width / 2);
        right = gameBall.x + (gameBall.width / 2);
        bottom = gameBall.y;

        if (left < 0 && ballX < 0)
        {
            gameBall.x = (gameBall.width / 2)
            ballX  *= -1;
        }
        else if (right > stage.stageWidth && ballX > 0)
        {
            gameBall.x = stage.stageWidth - (gameBall.width / 2)
            ballX  *= -1;
        }

        else if (bottom > stage.stageHeight && ballY > 0)
        {
            gameBall.y = stage.stageHeight - (gameBall.height/2)
            ballY *= -BOUNCE;
        }
    }
}

} 
```

游戏.as

```
//theGame.as
package
{
import flash.display.MovieClip
import flash.text.TextField
import flash.events.Event
import flash.events.MouseEvent

public class theGame extends MovieClip
{
    public const GRAVITY:Number = 2; // Declaring a const variable known as gravity
    public const BOUNCE:Number = 0.8;
    public const HIT:Number = 15;
    public const ROTATION:Number = 1;
    public var gameBall:Ball;

    private var ballX:Number; // Declaring a variable known as ballX
    private var ballY:Number; // Declaring a variable knwon as ballY

    public function theGame(callBack): void
    {
        addChild(gameBall);
        ballX = Math.random(); // Initalising ballX
        ballY = Math.random(); // Initalising ballY

        gameBall.buttonMode = true;

        addEventListener(Event.ENTER_FRAME, gameFrameHandler);
        addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
    }

    private function gameFrameHandler (e:Event):void
    {
        // Gravitate the Ball
        ballY += GRAVITY; // The ball is effected by gravity each frame

        // Move The Ball
        gameBall.x += ballX;
        gameBall.y += ballY;
        gameBall.rotation += ROTATION * ballX;

        // Check Stage Boundaries For Collisions
        checkBoundaryCollision();
    }

    private function mouseDownHandler (e:MouseEvent):void
    {
        // Hit the ball if it has been clicked
        if (e.target == gameBall)
        {
            hit(e.target.mouseX, e.target.mouseY);
        }
    }

    private function checkBoundaryCollision():void
    {
        var left:Number;
        var right:Number;
        var bottom:Number;
        var top:Number;

        left = gameBall.x - (gameBall.width / 2);
        right = gameBall.x + (gameBall.width / 2);
        bottom = gameBall.y + (gameBall.height / 2);
        top = gameBall.y - (gameBall.height / 2);

        if (left < 0 && ballX < 0)
        {
            gameBall.x = (gameBall.width / 2)
            ballX  *= -1;
        }
        else if (right > stage.stageWidth && ballX > 0)
        {
            gameBall.x = stage.stageWidth - (gameBall.width / 2)
            ballX  *= -1;
        }

        if (top < 42.70 && ballY < 0)
        {
            gameBall.y = 42.70 + (gameBall.height / 2)
            ballY  *= -1;
        }
        else if (bottom > stage.stageHeight && ballY >= 0)
        {
            gameBall.y = stage.stageHeight - (gameBall.height/2)
            ballY *= -BOUNCE;
            ballX *= BOUNCE;
        }
    }

    private function hit(hitX:Number, hitY:Number):void
    {
        // Adjust vertical velocity
        if (ballY > 0)
        {
            ballY *= -BOUNCE / 2;
        }

        ballY -= HIT;

        //adjust horizontal veloity
        if (ballX * hitX > 0)
        {
            ballX *= -BOUNCE;
        }

        ballX -= (hitX / gameBall.width * HIT);
    }
}
} 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:44:51.407

`gameBall`你的类中没有 theGame的实例。

尝试添加

```
 gameBall = new Ball(); 
```

前

```
 addChild(gameBall); 
```

# php - php 图像拇指生成器在此图像上给出错误

> ID：13331150
> 
> 赞同：1
> 
> 时间：2012-11-11T12:32:09.727
> 
> 标签：php, image, thumbnails, phpthumb

我正在使用以下函数来创建图像缩略图，但由于某种原因它不适用于以下图像：http: [//images.fanpop.com/images/image_uploads/zebra-zebras-52796_800_600.jpg](http://images.fanpop.com/images/image_uploads/zebra-zebras-52796_800_600.jpg)

谁能弄清楚为什么？

这是功能：

```
function make_thumb($img_name,$filename,$new_w,$new_h)
  {

        //get image extension.
        $ext=getExtension($img_name);
        //create new image using the appropriate function from gd library
        if(!strcmp("jpg",$ext) || !strcmp("jpeg",$ext) || !strcmp("JPEG",$ext) || !strcmp("JPG",$ext))
        $src_img=imagecreatefromjpeg($img_name);

        if(!strcmp("gif",$ext) || !strcmp("GIF",$ext))
        $src_img=imagecreatefromgif($img_name);

        if(!strcmp("png",$ext) || !strcmp("PNG",$ext))
        $src_img=imagecreatefrompng($img_name);

        //gets the dimmensions of the image
         $old_x=imageSX($src_img);
         $old_y=imageSY($src_img);

        //  calculate dimensions for the thumbnail

        $ratio1=@$old_x/$new_w;
        $ratio2=@$old_y/$new_h;

        if($ratio1>$ratio2) {
        $thumb_w=$new_w;
        $thumb_h=$old_y/$ratio1;
        }
        else {
        $thumb_h=$new_h;
        $thumb_w=$old_x/$ratio2;
        }
        /****  start  Customization  *********************/
        if($new_w > $old_x && $new_h > $old_y)
        {
          $thumb_w=$old_x;
          $thumb_h=$old_y;
        } 
        /****  end  Customization  *********************/

        // create new image with the new dimensions
        $dst_img=ImageCreateTrueColor($thumb_w,$thumb_h);

        // resize 
        imagecopyresampled($dst_img,$src_img,0,0,0,0,$thumb_w,$thumb_h,$old_x,$old_y);

        // output the created image to the file. Now we will have the thumbnail in the file named by $filename
        if(!strcmp("png",$ext))
        imagepng($dst_img,$filename);
        elseif(!strcmp("gif",$ext))
        imagegif($dst_img,$filename);
        elseif(!strcmp("GIF",$ext))
        imagegif($dst_img,$filename);
        elseif(!strcmp("PNG",$ext))
        imagegif($dst_img,$filename);
        else
        imagejpeg($dst_img,$filename);

        //destroys source and destination images.
        imagedestroy($dst_img);
        imagedestroy($src_img);
  } 
```

# django - 我应该在 Django 中使用博客应用程序吗？

> ID：13331153
> 
> 赞同：2
> 
> 时间：2012-11-11T12:32:36.413
> 
> 标签：django, django-admin, django-apps

我想创建自己的管理面板，每个用户都可以拥有自己的博客。我正在使用一个名为“Zinnia”的博客应用程序，我喜欢它。Zinnia 有一些可视化编辑器（WYMEditor、Tinymce），还有我想在我的管理面板中使用的标签系统等。

我想知道是否应该创建自己的管理面板或博客应用程序并以编程方式集成可视化编辑器。什么会更好？

感谢您的回答。

**编辑：**我真正的问题是：什么更好？

*   创建我的管理员和我的博客应用程序
*   创建集成 Zinnia 或其他博客应用程序的管理员
*   使用 django 管理面板（但我想自定义完整的管理面板，所以我想这不是一个好选择）

请记住，用户（不仅是管理员）可以在他们的博客上发帖。（这就是我不想使用 Django 管理员的原因）

**编辑 2：** **正是我想要的：**我想通过我的自定义管理面板使用 Zinnia（或其他博客应用程序）的所有功能（例如标记、WYMEditor [我知道我可以实现这个程序化]等）按钮，我的布局，我的 CSS，我的一切！

感谢所有答案，这对我很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T12:36:01.863

这是一个创建 django 博客应用程序的简单教程：

[http://lightbird.net/dbe/blog.html](http://lightbird.net/dbe/blog.html)

如果你还在学习 django，我推荐它来创建你自己的博客！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T12:47:04.807

创建一个好的 Django 博客应用程序很简单，但是很乏味，如果您开始实现其他功能，例如多语言支持、链接回处理、搜索、站点地图生成等，这很容易变得笨拙。

我绝对不建议你从头开始。如果您对 Zinnia 的全部可能性或初始功能集不完全满意，您可以查看[Django Packages](http://www.djangopackages.com/grids/g/blogs/)上的所有 Django 博客应用程序。

# asp.net - ASP.Net 下拉菜单总是在按钮单击事件上返回第一个值

> ID：13331160
> 
> 赞同：4
> 
> 时间：2012-11-11T12:33:27.100
> 
> 标签：asp.net, c#-4.0, webforms

我试图从一个简单的 asp.net 表单中保存价值。

我在页面上几乎没有控件，例如下拉和文本框

我使用 Language & trigger post-bask 填充页面加载的第一个下拉列表，以填充第二个下拉列表`ddCategoryType`，它根据所选语言填充正确的值，但问题是当我尝试获取按钮上的值时ddCategoryType.SelectedItem.Value 的单击事件值由于某种原因总是返回 0，我现在无法弄清楚

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ddSelectLanguage.Items.Clear();
        ddSelectLanguage.DataSource = DataProvider.GetLanguages();
        ddSelectLanguage.DataBind();
        ddSelectLanguage.Items.Insert(0, new ListItem("Select Language", "0"));
    }
    else
    {
        ddCategoryType.Items.Clear();
        String strSql = "SELECT TypeName, TypeID FROM  CategoryType WHERE LangID =" + ddSelectLanguage.SelectedItem.Value.ToString();
        DataSet ds = new DataSet();
        ds = DataProvider.Connect_Select(strSql);
        ddCategoryType.DataSource = ds;
        ddCategoryType.DataBind();
        ddCategoryType.Items.Insert(0, new ListItem("Select Type", "0"));
    }
}

protected void btnSaveCategory_Click(object sender, EventArgs e)
{
    objArtCat.LanguageID = int.Parse(ddSelectLanguage.SelectedItem.Value.ToString());
    objArtCat.CategoryName = txtCategoryName.Text;
    objArtCat.CategoryType = int.Parse(ddCategoryType.SelectedItem.Value.ToString());
    objArtCat.CategoryActive = bool.Parse(ddCategoryActive.SelectedItem.Value.ToString());
    try
    {
        //bool result;
        //result = objBLAddArticleCategory.CreateNewArticleCategory(objArtCat);
        //if (result == true)
        //{
        //    Response.Redirect("PageMessage.aspx?msg='Category has been Create Successfully'", true);
        //}
        //else
        //{
        //}
    }
    catch (Exception)
    { }
} 
```

示例 .ASPX 代码

```
 <div  class="row"></div>
              <div class="row">
            <asp:Label ID="lblSelectLang" CssClass="txtLabel"  Text="Select Language  :" runat="server" ></asp:Label>
            <asp:DropDownList ID="ddSelectLanguage" runat="server" CssClass="ddGeneral" 
                      DataTextField="LangName" DataValueField="LangID" CausesValidation="True" 
                      AutoPostBack="True"  >
            </asp:DropDownList>
         <asp:RequiredFieldValidator ID="rfvddLanguage" runat="server" ErrorMessage="Please Select Language"  ControlToValidate="ddSelectLanguage" 
         InitialValue="Select Language" ValidationGroup="atpAddNewArticle" ></asp:RequiredFieldValidator>
       </div>

       <div class="row">
            <asp:Label ID="lblCategoryName" CssClass="txtLabel" runat="server" Text="Category Name :"></asp:Label>
            <asp:TextBox ID="txtCategoryName" runat="server" CssClass="txtbox300"></asp:TextBox>
            <asp:RequiredFieldValidator ID="RFVtxtAuthorName" runat="server" ErrorMessage="*" 
                ControlToValidate="txtCategoryName" ValidationGroup="atpAddNewArticle"  CssClass="validation"></asp:RequiredFieldValidator>
       </div>

       <div class="row">
            <asp:Label ID="lblCategoryType" CssClass="txtLabel" runat="server" Text="Category Type :"></asp:Label>
            <asp:DropDownList ID="ddCategoryType" runat="server" CssClass="ddGeneral"   DataTextField="TypeName" DataValueField="TypeID" >
            </asp:DropDownList>
       </div>

       <div class="row">
            <asp:Label ID="lblCategoryActive" CssClass="txtLabel" runat="server" Text="Category Active :"></asp:Label>
            <asp:DropDownList ID="ddCategoryActive" runat="server" CssClass="ddGeneral"  >
                <asp:ListItem Value="False" Selected="True">NO</asp:ListItem>
                <asp:ListItem Value="True">YES</asp:ListItem>
            </asp:DropDownList>
       </div>

       <div class="rowButton">
            </br>
            <asp:Button ID="btnUpdateArticle" runat="server" Text="Save Category" CssClass="btn"  ValidationGroup="atpAddNewArticle" onclick="btnSaveCategory_Click" />                <input id="Reset" type="reset" class="btn" value="Reset" />
       </div> 
```

回发后 ddCategoryType 的输出

```
<div class="row">
                <span class="txtLabel" id="MainContent_lblCategoryType">Category Type :</span>
                <select class="ddGeneral" id="MainContent_ddCategoryType" name="ctl00$MainContent$ddCategoryType">
    <option value="0" selected="selected">Select Type</option>
    <option value="1">Article</option>
    <option value="2">News</option>
    <option value="3">Sports</option>
    <option value="4">People</option>
    <option value="5">Message</option>

</select>
           </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T12:36:12.660

在您`Page_Load`中，您正在清除 的内容，`ddCategoryType`因此将`SelectedIndex`其重置为 0。

请记住，始终调用 Page_Load，并且它发生在 Button_Click 事件之前。

有几种方法可以处理这个问题，例如：不要执行 Page_Load 的*else*子句中的所有代码，如果`SelectedIndex >= 0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T15:39:53.193

由于您要基于从 ddSelectLanguage 中选择的值填充 ddCategoryType，因此基于该交互而不是在 Page_Load 中填充 DDL。

```
protected void Page_Load(object sender, EventArgs e)
{
    ddSelectLanguage.SelectedIndexChanged += new
        EventHandler(ddSelectLanguage_SelectedIndexChanged);
    if (!IsPostBack)
    {
        ddSelectLanguage.Items.Clear();
        ddSelectLanguage.DataSource = DataProvider.GetLanguages();
        ddSelectLanguage.DataBind();
        ddSelectLanguage.Items.Insert(0, new ListItem("Select Language", "0"));
    }
} 
```

然后

```
 void ddSelectLanguage_SelectedIndexChanged(object sender, EventArgs e)
 {
        ddCategoryType.Items.Clear();
        String strSql = "SELECT TypeName, TypeID FROM  CategoryType WHERE LangID =" + ddSelectLanguage.SelectedItem.Value.ToString();
        DataSet ds = new DataSet();
        ds = DataProvider.Connect_Select(strSql);
        ddCategoryType.DataSource = ds;
        ddCategoryType.DataBind();
        ddCategoryType.Items.Insert(0, new ListItem("Select Type", "0"));
 } 
```

另外，让您的查询带参数。

# css - 向上箭头和向下箭头的位置最初在 Sprite 图像内的单个 gif 中

> ID：13331162
> 
> 赞同：1
> 
> 时间：2012-11-11T12:34:04.400
> 
> 标签：css, css-sprites

我用 sprite-css 图像替换了[Polyglot](http://www.ixtendo.com/demo/polyglot-language-switcher-jquery-plugin-2.0/index.html)下拉箭头。我可以显示向上箭头但不能悬停向下箭头图像（左下角），因为它是单个 gif 图像： [http ://www.bestjob.my/mod/LanguageSwitcher/images/arrow-down.gif](http://www.bestjob.my/mod/LanguageSwitcher/images/arrow-down.gif)

```
#polyglotLanguageSwitcher a.current:link span.trigger, #polyglotLanguageSwitcher a.current:visited span.trigger {
background: url(http://www.bestjob.my/mod/CSS/sprites/spriteme2b.png) no-repeat;background-position: 0px -37px; 
}

#polyglotLanguageSwitcher a.current:hover span.trigger, #polyglotLanguageSwitcher a.current:active span.trigger, #polyglotLanguageSwitcher a.active span.trigger {
background-position: left bottom !important;
} 
```

有什么建议吗？我是否需要将向上箭头和向下悬停箭头切割成 2 个 png，然后放入精灵图像中以获得不同的背景位置？

# visual-c++ - 将第 i 帧的 blob 关联到第 i+1 帧？

> ID：13331163
> 
> 赞同：1
> 
> 时间：2012-11-11T12:34:18.770
> 
> 标签：visual-c++, image-processing, opencv, computer-vision

我有一项棘手的任务是将第 i 帧中的 blob 与第 i+1 帧中的 blob 相关联。我还没有找到足够的文章/例子来处理这个问题，或者那些我能很好理解的文章/例子。我要做的就是将第 i 帧中的 blob 与第 i+1 帧中的 blob 关联起来。目标不是在下一帧中再次检测到相同的 blob（或忽略旧的 blob）。

欢迎发表文章/示例。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:24:59.420

如果 blob 逐帧更改其大小，则必须使用 blob 的比例不变描述符来比较两个 blob。cv::HuMomments 就是这样的描述符。您还可以使用函数 cv::matchShapes 直接比较您在后续图像中检测到的轮廓。

如果 blob 从帧到帧的移动非常小，则可以保存第一帧中 blob 的中心位置，并通过获取最接近这些中心的 blob 来识别第二帧中的相应 blob。（正如pppoe先生之前提到的）

另一种可能性是在每个斑点的轮廓内（如果它们有一些纹理）和边界上对点进行采样，并使用 Lucas Kanade Tracking (cv::calcOpticalFlowPyrLK)。中值光流可以告诉您斑点移动的位置。

您还可以单独为每个 blob 运行 Lucas Kanade Tracking。将 设置为`prevPts`blob 的中心，并且`winSize`应该与 blob 的大小完全匹配。

OpenCV 中的 Lucas Kanade Tracking 算法只能跟踪小的平移位移。如果您也有较大的旋转，您将需要一个模板跟踪算法来优化旋转。在这里你可以找到一个很好的[教程](http://www.codeproject.com/Articles/24809/Image-Alignment-Algorithms)，[这里](http://www.robots.ox.ac.uk/~cmei/SingleViewpointTracking.html)是关于这个的更高级的研究。

为了给你更多的想法，我们需要更多关于斑点的样子、它们如何移动、它们有多大等信息。发布一些图片！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:38:56.397

我认为这是一个“多对象跟踪”问题。如果你的 blob 彼此相同，这可能很难，否则你可以首先定义两个 blob 之间的距离（这取决于你如何在数学上表示 blob），给定帧 i 中的 blob X，在帧中找到它i+1 就像在第 i+1 帧中寻找与 X 最相似的 blob。

理想情况下，blob 不会在两帧之间移动太多。因此，为了挽救您的生命，您可以将 X 放入帧 i+1 中与它在第 i 帧中的相同位置，并在第 i+1 帧中寻找它周围最相似的那个。

希望这些帮助。

# vb.net - 无法创建字段 salesreport 的子列表

> ID：13331167
> 
> 赞同：0
> 
> 时间：2012-11-11T12:34:35.007
> 
> 标签：vb.net

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdOk.Click
    Dim scan As String = "select ProductCode from products where ProductCode = '" & TextBox1.Text & "';"
    connection.Open()
    Dim cmd = New MySqlCommand(scan, connection)
    Dim dr As MySqlDataReader = cmd.ExecuteReader
    If dr.Read = True Then
        MsgBox("Match found")
        connection.Close()
        Dim insert As String = "insert into salesreport (ProductName,ProductPrice) select products.ProductName,products.ProductPrice from products where products.ProductCode = '" & TextBox1.Text & "';"
        connection.Open()
        da = New MySqlDataAdapter(insert, connection)
        da.Fill(ds, "salesreport")
        DataGridView1.DataSource = ds
        DataGridView1.DataMember = "salesreport"
        connection.Close()
    Else
        connection.Close()
        MsgBox("No match found")
        TextBox1.Text = ""
        TextBox1.Select()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:16:35.033

**INSERT**语句不返回记录。
在这种情况下，使用 DataAdapter 插入记录是没有意义的。

使用 MySqlCommand.ExecuteNonQuery 方法插入您的记录，然后使用 MySqlDataAdapter 读取添加的行

此外，不要连接**由您的用户键入的**文本来构建和使用数据库引擎的 sql 文本。您的代码可以很容易地用于创建[Sql Injection Attacks](https://stackoverflow.com/questions/13331167/child-list-for-field-salesreport-cannot-be-created)。

```
 Dim scan As String = "select ProductCode from products " + 
                         "where ProductCode = ?prodCode"
    connection.Open()
    Dim cmd = New MySqlCommand(scan, connection)
    cmd.Parameters.AddWithValue("?prodCode", TextBox1.Text)
    ..........

    Dim insert As String = "insert into salesreport (ProductName,ProductPrice) " + 
                "select products.ProductName,products.ProductPrice from products " +
                "where products.ProductCode = ?prodCode"

    cmd = new MySqlCommand(insert, connection)
    cmd.Parameters.AddWithValue("?prodCode", TextBox1.Text)
    cmd.ExecuteNonQuery() 

    da = New MySqlDataAdapter(scan, connection)
    da.SelectCommand.Parameters.AddWithValue("?prodCode", TextBox1.Text)
    da.Fill(ds, "salesreport")

    DataGridView1.DataSource = ds
    DataGridView1.DataMember = "salesreport" 
```

# c# - 在 Live 或 Local 提供程序上访问 .NET 成员资格

> ID：13331168
> 
> 赞同：0
> 
> 时间：2012-11-11T12:34:39.030
> 
> 标签：c#, asp.net, asp.net-membership, membership-provider

在我的 web.config 文件中，我有两个 SQL Server 连接字符串，一个用于本地，一个用于实时：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="LocalSqlServer" connectionString="[removed]" providerName="System.Data.SqlClient"/>
    <add name="LiveSqlServer" connectionString="[removed]" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

然后我有一个“utils”单例类，它基本上根据我是在“localhost”还是在我的实时服务器上运行站点来设置连接字符串：

```
if (Environment.MachineName.ToUpper() == MyOwnConfig.GetAppSettingsValue(ConfigKeys.localhost).ToUpper()) {
    this.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["LocalSqlServer"].ToString();
    //MembershipProvider provider = Membership.Providers["LocalAspNetMemberSqlProvider"];
    //RoleProvider role = Roles.Providers["LocalAspNetMemberSqlProvider"];
}
else {
    this.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["LiveSqlServer"].ToString();
    //MembershipProvider provider = Membership.Providers["LiveAspNetMemberSqlProvider"];
    //RoleProvider role = Roles.Providers["LiveAspNetMemberSqlProvider"];
} 
```

然后我的 Database 类只使用我的 utils 类的 connectionString 属性。所有这一切都很好，因此当我将站点放置在本地时，我可以简单地将其上传到现场，而无需更改配置文件中的连接字符串等，并且它开始使用我的实时数据库。

现在，我目前正在我的网站中实现“会员资格”，并且对于使用一些 webmethods 的 ajax，我将 providerUserKey 存储在当前登录用户的文本字段中。然后，我的 Web 方法会检查此密钥是否已通过身份验证。例如

```
ajaxCreds.ajaxID1 = ((MembershipUser)Membership.GetUser()).ProviderUserKey.ToString(); 
```

问题：我的问题是我如何知道这个成员是来自 LIVE 数据库还是我的 LOCAL 数据库。正如您从网络配置中看到的那样，我已在成员资格/提供者行中添加（已注释掉），但我不知道如何将它们与上述成员资格.getUser() 命令一起使用。

替代方案...这是一个好方法吗？或者当我上传到现场时编辑 web.config 文件是否更简单？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:22:46.810

大多数人不这样做，尽管我为你弄清楚这一切而鼓掌。通常，人们使用部署管理器或其他构建系统在服务器上与本地具有不同的 web.config 值。

以下是有关更改部署的链接：[如何在我的连接字符串上使用 Web.Config 转换？](https://stackoverflow.com/questions/8366091/how-do-i-use-web-config-transform-on-my-connection-strings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:43:22.410

我建议你阅读这篇文章：

[http://blogs.msdn.com/b/schlepticons/archive/2010/07/22/modifying-asp-net-providers-at-runtime.aspx](http://blogs.msdn.com/b/schlepticons/archive/2010/07/22/modifying-asp-net-providers-at-runtime.aspx)

它会告诉你，其他人也在尝试做类似的事情。这就是成功的方法。解决方案（如果调整）可能与您的需求相似。

*   将所有提供程序放入您的 web.config
*   在 App_Start 上调整默认设置（基于环境）
*   `Membership`API 将根据您的需要提供 Provider Key
*   无需按名称搜索提供者

*注意：您必须调整`void Application_Start(object sender, EventArgs e)`实现，但想法就在那里*

*注意2：您尝试做的绝对**不是**例外。基于环境的配置非常聪明！必须实现的是标准 API 使用，例如通过 Manager 模式调用*

*   System.Web.Security.Membership
*   System.Web.Security.Roles

*而不是按名称调用提供者。*

# character - 如何在不等待按 ENTER 的情况下从标准输入读取一个字符？

> ID：13331169
> 
> 赞同：1
> 
> 时间：2012-11-11T12:34:38.253
> 
> 标签：character, stdin, smalltalk, enter

我的 VisualWorks 应用程序有 CLI 实现。有“IOAccessor defaultClass stdin”，我想在不等待用户输入的情况下读取一个字符。有可能的？

在 C 语言中有类似 getCh 的函数...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:32:53.867

这不是语言的问题：C 语言的 getchar() 也必须等待。这是底层操作系统的 tty 代码的问题。在 UNIX（例如 Linux）上，您必须使用 stty（旧式）或 ioctl 调用将 tty-characteristics 更改为无缓冲。在其他操作系统下，类似的系统调用会做类似的事情。

# azure - 通过 Azure 服务总线进行身份验证的 WCF 数据服务

> ID：13331172
> 
> 赞同：1
> 
> 时间：2012-11-11T12:35:25.190
> 
> 标签：azure, wcf-data-services, azureservicebus

我坚持这一点。我有一个 WCF 数据服务，它成功地在 Azure 服务总线中创建了一个 HTTPS 终结点。

我最初将服务设置为测试使用`<security relayClientAuthenticationType="None" />`，并且我能够在客户端中很好地使用该服务。

但是，通过此服务的数据将是敏感的，因此为了将其锁定，我切换到`<security relayClientAuthenticationType="RelayAccessToken" />`服务的 Web.Config 文件中。

我正在使用以下代码来获取我的令牌：

```
static string GetToken(string serviceNamespace, string issuerName, string issuerPassword)
    {
        if (_token == null)
        {
            string acsEndpoint = "https://" + serviceNamespace + "-sb.accesscontrol.windows.net/WRAPv0.9";
            string relyingPartyAddress = "http://" + serviceNamespace + ".servicebus.windows.net";

            NameValueCollection postData = new NameValueCollection
            {
                { "wrap_scope", relyingPartyAddress },
                { "wrap_name", issuerName },
                { "wrap_password", issuerPassword },
            };

            WebClient webClient = new WebClient();
            byte[] responseBuffer = webClient.UploadValues(acsEndpoint, "POST", postData);
            string response = Encoding.UTF8.GetString(responseBuffer);
            response = Uri.UnescapeDataString(response);

            string[] tokenVariables = response.Split('&');

            int tokenIndex = Array.FindIndex(tokenVariables, s => s.StartsWith("HMACSHA256"));

            string[] tokenVariable = tokenVariables[tokenIndex].Split('=');

            _token = HttpUtility.UrlDecode(tokenVariable[1]);
        }

        return _token;
    }
static string _token = null; 
```

然后我使用`context.SendingRequest += new EventHandler<SendingRequestEventArgs>(OnSendingRequest);`和以下内容将我的令牌添加到我的 REST 请求的标头中：

```
static void OnSendingRequest(object sender, SendingRequestEventArgs e)
    {
        e.RequestHeaders.Add(
            "Authorization",
            string.Format("WRAP access_token=\"{0}\"", GetToken("MyNamespace", "owner", "MySecret") )
            );
    } 
```

然后我的请求采用以下形式（在添加安全性之前效果很好）

```
try
        {
            var results = (from b in context.Banks where b.Bank1 != "Bank1" select b).Take(200).ToList();
            ViewBag.Results = results;
        }
        catch (DataServiceQueryException ex)
        {
            ViewBag.Message = "Authentication failed. A new token will be requested.";
            var code = ex.Response.StatusCode;
            if (code == 401)
                _token = null;
        } 
```

在我开发代码以获取和附加令牌时，我遇到了很多令牌错误，所以我相信我现在已经成功获取令牌，但现在我收到以下错误：

> `500`TrackingId：38940805-f9b3-4444-a8e3-2a00b2309cf6_G0，时间戳：11/11/2012 11:48:33 AM 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Data.Services.Client.DataServiceClientException：`500`TrackingId：38940805-f9b3-4444-a8e3-2a00b2309cf6_G0，时间戳：11/11/2012 11:48:33 AM 源错误：第 31 行：context.SendingRequest += new EventHandler(OnSendingRequest); 第 32 行： 第 33 行： var results = (from b in context.Banks where b.Bank1 != "Bank1" select b).Take(200).ToList(); 第 34 行：第 35 行：尝试源文件：c:\Users\v-tadam.REDMOND\Documents\Visual Studio 2012\Projects\CFARPOC\CFARPOCClient\Controllers\HomeController.cs 行：33 堆栈跟踪：[DataServiceClientException：`500`TrackingId：38940805-f9b3-4444-a8e3-2a00b2309cf6_G0，时间戳：11/11/2012 11:48:33 AM] System.Data.Services.Client.QueryResult.Execute() +414618 System.Data.Services.Client.DataServiceRequest .Execute(DataServiceContext context, QueryComponents queryComponents) +131 [DataServiceQueryException: An error occurred while processing this request.] System.Data.Services.Client.DataServiceRequest.Execute(DataServiceContext context, QueryComponents queryComponents) +432 System.Data.Services.Client .DataServiceQuery`1.Execute() +77 System.Data.Services.Client.DataServiceQuery`1.GetEnumerator() +13 System.Collections.Generic.List`1..ctor(IEnumerable`1 集合) +369 System.Linq .Enumerable.ToList(IEnumerable`1 source) +58 CFARPOCClient.Controllers.HomeController.Banks() 在 c:\Users\v-tadam。REDMOND\Documents\Visual Studio 2012\Projects\CFARPOC\CFARPOCClient\Controllers\HomeController.cs:33 lambda_method(Closure, ControllerBase, Object[]) +101 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase 控制器, Object[] 参数) +14 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 参数) +211 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 参数) +27 System.Web. Mvc.Async.c__DisplayClass42.b__41() +28 System.Web.Mvc.Async.c__DisplayClass8`1.b__7(IAsyncResult _) +10 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57 System.Web .Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +48 System.Web.Mvc.Async。c__DisplayClass39.b__33() +57 System.Web.Mvc.Async.c__DisplayClass4f.b__49() +223 System.Web.Mvc.Async.c__DisplayClass37.b__36(IAsyncResult asyncResult) +10 System.Web.Mvc.Async.WrappedAsyncResult`1 .End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +48 System.Web.Mvc.Async.c__DisplayClass2a.b__20() +24 System.Web.Mvc.Async.c__DisplayClass25.b__22( IAsyncResult asyncResult) +102 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43 System.Web.Mvc.c__DisplayClass1d.b__18(IAsyncResult asyncResult) +14 System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.Controller。EndExecuteCore(IAsyncResult asyncResult) +57 System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.Controller.EndExecute (IAsyncResult asyncResult) +47 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10 System.Web.Mvc.c__DisplayClass8.b__3(IAsyncResult asyncResult) +25 System.Web。 Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47 System.Web.Mvc .MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

这个错误没有帮助我找到问题。我究竟做错了什么？在实施安全性之前使用该服务完美无缺，并且我已经完成了所有研究，以了解如何获取令牌并将其附加到我的请求中。我做错了什么会跳出来吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:20:02.713

我发现了我的错误。我对令牌的构成存在根本性的误解。出于某种原因，我想到它是“HMACSHA256”后面的文本，而实际上令牌是“wrap_access_token =”后面的响应中的所有内容（现在看起来很明显......）

无论如何，如果其他人遇到此问题，则会抛出 500 错误代码，因为令牌被正确检索但错误的令牌被添加到请求标头中。我通过附加“GARBAGETOKEN”并观察相同的行为对此进行了测试。

以下是一个有效的 GetToken 方法：

```
static string GetToken(string serviceNamespace, string issuerName, string issuerPassword)
    {
        if (_token == null)
        {
            string acsEndpoint = "https://" + serviceNamespace + "-sb.accesscontrol.windows.net/WRAPv0.9";
            string relyingPartyAddress = "http://" + serviceNamespace + ".servicebus.windows.net";

            NameValueCollection postData = new NameValueCollection
            {
                { "wrap_scope", relyingPartyAddress },
                { "wrap_name", issuerName },
                { "wrap_password", issuerPassword },
            };

            WebClient webClient = new WebClient();
            byte[] responseBuffer = webClient.UploadValues(acsEndpoint, "POST", postData);
            string response = Encoding.UTF8.GetString(responseBuffer);

            string token = response.Split('&')
                .Single(value => value.StartsWith("wrap_access_token=") )
                .Split('=')[1];

            _token = HttpUtility.UrlDecode(token);
        }

        return _token;
    }
    static string _token = null; 
```

希望我的愚蠢能帮助别人:)

# xcode - 将 ScrollView 放在前面

> ID：13331178
> 
> 赞同：0
> 
> 时间：2012-11-11T12:36:46.560
> 
> 标签：xcode, uiscrollview, uiimageview

我有一个视图，在这个视图内，我在右侧有一些按钮和一个 ScrollView。

当您按下其中一个按钮时，会出现滚动视图并显示更多按钮。现在，当您在主视图中按下滚动视图的其中一个按钮时，会放置一个图像，并且滚动视图会通过右侧进行动画处理。

当我按下下一个按钮时，滚动视图位于图像下方而不是图像上方:(

我试图在滚动视图中放置一些代码以将其放在前面

```
[waende bringSubviewToFront:waende]; 
```

或者

```
[waende bringSubviewToFront:button]; 
```

但仍然不起作用
在 IB 中，ScrollView 位于前台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:42:08.963

解决方案代码为：

```
[self.view bringSubviewToFront:waende]; 
```

# android - Android空指针异常和数据库更新

> ID：13331179
> 
> 赞同：0
> 
> 时间：2012-11-11T12:36:57.903
> 
> 标签：android, android-layout

我不断收到此错误 java.null.pointer 异常当我尝试运行此代码时，请帮助我如何解决此问题并更新我的数据库值。这是我的代码主要活动类

```
package dom.example.database_exp;

import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

  MainActivity obj = new MainActivity();

    SQLiteDatabase db =openOrCreateDatabase("Test", MODE_PRIVATE, null);
    obj.Update(1, "Raza", "17", "Nohting"); 
  Cursor c = db.rawQuery("SELECT FirstName FROM test WHERE ID = 1 ",null);
  c.moveToFirst();
  EditText dis=(EditText)findViewById(R.id.editText1);
  String  result =  c.getString(c.getColumnIndex("FirstName")); 

   dis.setText("You have found "+result);

   db.close();

    /**    EditText dis=(EditText)findViewById(R.id.editText1);
       //Creating and opening the  database
     SQLiteDatabase db=openOrCreateDatabase("RamDB", MODE_PRIVATE,null);
     //Creating table with 3 columns
     db.execSQL("CREATE TABLE IF NOT EXISTS Test(ID INTEGER PK NOT NULL FirstName      VARCHAR,LastName VARCHAR,Age INT(3));");
                 **/

  }

 public int Update (int sid, String name, String age, String course)
  {
    String FirstName = "FirstName";
    String LastName = "LastName";
    String test = "test";
    String ID = "ID";
    // String _id = "1" ;
    SQLiteDatabase db =openOrCreateDatabase("Test", MODE_PRIVATE, null);
    ContentValues pau = new ContentValues();
    pau.put(FirstName, name);

   return db.update(test, pau,ID + "=" + sid, null);

   }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
     return true;
   }
   } 
```

我的xml文件

```
 <EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="51dp"
    android:layout_marginTop="89dp"
    android:ems="10"
    android:inputType="text" >

    <requestFocus />
     </EditText>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:42:27.400

我们需要堆栈跟踪来检查错误在哪里。尽管`MainActivity obj = new MainActivity();`OnCreate 方法中的构造函数调用看起来很奇怪。据我所知，您不需要调用 Activity 的构造函数

你可以参考你的活动电话`this`

尝试删除，`MainActivity obj = new MainActivity();`也不`this.Update(1, "Raza", "17", "Nohting");`需要运行 openOrCreateDatabase 两次，您在 OnCreate 和方法上运行它。

无论如何，请检查您的跟踪 `adb logcat`以更好地了解代码失败的地方。

# android - HSV 在 android 上着色

> ID：13331188
> 
> 赞同：1
> 
> 时间：2012-11-11T12:38:23.047
> 
> 标签：android, hsv

我有一个例外是通过函数 HSVToColor 更改视图颜色，这是代码。我认为问题在于 和`Hue`的`Saturation`值`Value`。

```
 Tab_COLOR[0] =300; //pHue [0 .. 360)
    Tab_COLOR[1] =0.0f;//pSaturation [0...1]
    Tab_COLOR[2] =0.0f; //pValue [0...1]
    int couleur=Color.HSVToColor(Tab_COLOR);
    view1.setBackgroundColor(couleur); 
```

# java - Instanceof 和 Casting、多态

> ID：13331191
> 
> 赞同：1
> 
> 时间：2012-11-11T12:39:10.113
> 
> 标签：java, casting, instanceof

基于我的一个较旧的问题[Link](https://stackoverflow.com/questions/13324866/returning-a-value-string-to-a-jtextfield-indexoutofboundsexception)我正在努力了解有关 Casting 和 Instanceof 的更多信息。这是基于 HeadFirst 书中描述的场景

所以基本上我现在有了一个继承自我的 Vehicle 类的新类（Hybrid），我想做的是投射一个 Hybrid 对象来显示混合体所带来的额外信息。它符合但并没有真正让我知道是什么导致了错误，除非它只是在我标记的行上结束。

```
public class ShowroomDriver {
    public static void main(String[] args) {
    Showroom cars = new Showroom("Cars");
    Hybrid hybrid1 = new Hybrid("Toyota Prius", "Focus", "John Smith", "TOTAP453453987346283",
            getCalendar(2,3,1998), getCalendar(24,2,2012),
            "Right Hand",//Hybrid Only Info Edit: Forgot to commentout 
            true,
            'C',
            650, 82.0); //Cost & (Hybrid MPG)

    cars.addVechicle(hybrid1);
    cars.getVechicles(); 
```

混合班

```
import java.util.Calendar;

public class Hybrid extends Vehicle{
    private double consumption;
    private String drive;

    public Hybrid(String Manufacture, String Model, String CustomerName, String Vin, 
            Calendar DateManufactured, Calendar Datesold, String Drive,
            boolean HasbeenSold,
            char TaxBand,
            double Cost, double Consumption){

        super(Manufacture, Model, CustomerName, Vin, DateManufactured, Datesold,
                HasbeenSold,
                TaxBand,
                Cost);
        this.consumption = Consumption;
        this.drive = Drive;
    }

    public Double getConsumption() { return this.consumption; }
    public String getDrive() { return this.drive; }
} 
```

新车辆方法

```
public void displayDetails(){
    for(int i = 0; i <cars.theVehicles.size(); i++){
        if(this.cars.theVehicles.get(i) instanceof Hybrid){//Error here
            Hybrid thehybrids = (Hybrid)this.cars.theVehicles.get(i);
            System.out.println("Consumption: " + thehybrids.getConsumption()+ "\n" +
                    "Drive: " + thehybrids.getDrive());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T12:43:06.937

你需要投吗？您已经重写了 displayDetails() 方法来显示混合特定的信息。因此，您应该能够调用它，运行时将确定要调用的正确方法。

# jquery - 同一页面上的多个版本的 JQuery

> ID：13331193
> 
> 赞同：7
> 
> 时间：2012-11-11T12:39:25.257
> 
> 标签：jquery

是否可以处理在同一页面中加载的 2 个版本的 jQuery 之间的冲突？假设这些代码行：

```
<script type="text/javascript" src="jquery-1.1.3.js"></script>
<script type="text/javascript" src="jquery-1.4.2.js"></script>

<script type="text/javascript" src="thisFileUsesFirstJquery.js"></script>
<script type="text/javascript" src="thisFileUsesSecondJquery.js"></script> 
```

我不使用内联 java 脚本代码。在我的情况下，我的 java 脚本代码发生在外部文件上。我的问题是：我应该如何使用 noConflict() 方法来防止它们之间发生冲突。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-11T12:42:44.880

是的，你可以这样做：

```
 <script type="text/javascript" src="jquery-1.1.3.js"></script>
  <script> $113 = jQuery.noConflict();</script>
  <script type="text/javascript" src="jquery-1.4.2.js"></script> 
```

然后在您的代码中使用 $113 或 $

# c++ - OpenGL /GLUT 在 mainEventLoop() 之后创建窗口

> ID：13331196
> 
> 赞同：1
> 
> 时间：2012-11-11T12:40:00.067
> 
> 标签：c++, opengl, glut, freeglut, glutcreatewindow

我正在使用 OpenGL/GLUT 开发游戏，我需要打开一个新窗口来显示游戏获胜时的分数。

为了做到这一点，我将`glutCreateWindow()`在调用后调用并注册回调`mainEventLoop()`。

这有问题吗？我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:18:12.717

> 这有问题吗？

是的。

为什么不简单地将结果绘制在与游戏相同的窗口中？

你为什么首先使用 GLUT？这不是一个很好的游戏框架。最好使用 GLFW 或 SDL。

> 我应该怎么做？

通过向您的引擎添加一个小型 GUI 系统，您可以使用统计数据（如 HUD）和分数屏幕覆盖屏幕。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-11T13:30:34.013

您将需要两个显示回调函数，`display( )`并`display2( )`为每个窗口加上`window = glutCreateWindow("Window 1");`和`window2 = glutCreateWindow("Window 2");`。

代码示例：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glut.h>

int window2 = 0, window = 0, width = 400, height = 400;

void display(void)
{
    glClearColor(0.0, 1.0, 1.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    printf("display1\n");
    glFlush();
}

void display2(void)
{
    glClearColor(1.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    printf("display2\n");
    glFlush();
}

void reshape (int w, int h)
{
    glViewport(0,0,(GLsizei)w,(GLsizei)h);
    glutPostRedisplay();
}

int main(int argc, char **argv)
{
    // Initialization stuff
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB);
    glutInitWindowSize(width, height);

    // Create  window main
    window = glutCreateWindow("Window 1");
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutInitWindowPosition(100,100);

    // Create second window
    window2 = glutCreateWindow("Window 2");
    glutDisplayFunc(display2);
    glutReshapeFunc(reshape);

    // Enter Glut Main Loop and wait for events
    glutMainLoop();
return 0;
} 
```

# php - PHP判断数组是否存在于数组中的方法

> ID：13331198
> 
> 赞同：3
> 
> 时间：2012-11-11T12:40:03.980
> 
> 标签：php, arrays, multidimensional-array

是否有一个 php 数组方法可以告诉我一个数组是否有数组作为它的值而不做一个 foreach 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:43:09.900

print_r(array_filter($array, "is_array"));

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T12:44:02.687

您可以使用`array_filter`

```
$array = array(1,array(),2);
                     ^--------------- array in array

if(array_filter($array,"is_array"))
{
    // I found some arrays
} 
```

# javascript - JavaScript 脚本报价系统

> ID：13331199
> 
> 赞同：1
> 
> 时间：2012-11-11T12:40:09.827
> 
> 标签：javascript, html, forms

**大家好，**

今天我正在开发一个 JavaScript 报价系统，

**JS如下**

```
 <script type="text/javascript">
 <!-- Hide this code from non-JavaScript browsers
 function TotalIt() {
 CostPerStairs=25;
 CostPerHall=50;
 CostPerSingle=35;
 CostPerDouble=50;

 f1=document.forms[0]; // abbreviation

 RI=f1.SelR.selectedIndex;
 RV=RI*CostPerStairs;
 HI=f1.SelH.selectedIndex;
 HV=HI*CostPerHall;
 SI=f1.SelS.selectedIndex;
 SV=SI*CostPerSingle;
 CI=f1.SelC.selectedIndex;
 CV=CI*CostPerDouble;
 TV=RV*1+HV*1+SV*1+CV*1;

 RV=Math.round(RV*100)/100;
 HV=Math.round(RV*100)/100;
 SV=Math.round(SV*100)/100;
 CV=Math.round(CV*100)/100;
 TV=Math.round(TV*100)/100;

 f1.TotR.value=RV;
 f1.TotR.value=HV;
 f1.TotS.value=SV;
 f1.TotC.value=CV;
 f1.Total.value=TV;

 return true;
 }
 // End hiding -->
 </script> 
```

**HTML 方面在这里**   清洁楼梯的房间类型数量 - 0 - 1 2 3 4
大厅 - 0 - 1 2 3 4
单人卧室 - 0 - 1 2 3 主卧室 - 0 - 1 2 3 4 5

总计

**所以 - 我听到你说 - 问题是什么？**

本质上，我想添加的是一个 poscode 下拉框，它启动总价格**TV=RV*1+HV*1+SV*1+CV*1 的最小值；**

The idea is that when a postcode is selected, the value of TV (total) must be a minimum price or above

我为此输入的 HTML 如下；

```
<tr>
  <td>Select a Postcode</td>
  <td align="center"><select name="SelP">
    <option>- 0 -</option>
    <option>LS1</option>
    <option>LS2</option>
    <option>LS3</option>
    <option>LS4</option>
  </select>
    <input type="hidden" name="TotR" onFocus="this.blur();" />
    <br></td>
</tr> 
```

但是我不知道如何将它放入 Java，我尝试了几种方法（基本上是反复试验），我认为我可以通过使用一些 if 和 where 子句来使用 PHP 来做到这一点，但是我已经被难住了此处为 JavaScript。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:45:05.227

你想要`Math.max(x, y)`。它接受两个值并返回两者中的最大值，从而设置最小值。

```
var myMinimumValue = f1.SelP.selectedIndex;

// Sets TV to a minimum of selected index of SelP
TV = Math.max(myMinimumValue, TV); 
```

如果`SelP`包含具有特定值的选项（我猜这是您真正想要的），如下所示：

```
 <select name="SelP">
    <option value="0">- 0 -</option>
    <option value="200">LS1</option>
    <option value="400">LS2</option>
    <option value="1000">LS3</option>
    <option value="2000">LS4</option>
  </select> 
```

然后你想要类似的东西：

```
var myMinimumValue = f1.SelP[f1.SelP.selectedIndex].value;

// Sets TV to a minimum of the selected value of SelP
TV = Math.max(myMinimumValue, TV); 
```

# perl - 在 perl 中查找子字符串

> ID：13331203
> 
> 赞同：0
> 
> 时间：2012-11-11T12:41:04.040
> 
> 标签：perl, xml-parsing

我想检查字符串是否存在于 xml 标签中

和 xml 标签采用以下格式。

```
<admin var="s_admin">xyz</admin> 
```

我试过了

```
index($xmlString,$str) != -1 
```

但这对我不起作用。这是我的代码：

```
my $hostname = hostname;
my $wlsadmin = grep s_wls_admin_host $ENV{CONTEXT_FILE};
$wlsadmin=~s/^\s+|\s+$//g;
if(index($wlsadmin,$hostname) != -1) {
    print("True");
}
print($hostname);
print($wlsadmin); 
```

这是 print 语句的值：

```
 rws3510357 <wls_admin_host oa_var="s_wls_admin_host">rws3510357</wls_admin_host> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:23:55.797

正如其他人评论的那样，我不确定您出了什么问题，但这里有一个使用基于 DOM 的 XML 解析器来查找标记并提取其内容的示例。从那里很容易将这些内容与一些字符串进行比较，就像您使用`index`.

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::DOM;
my $dom = Mojo::DOM->new(<<'END');
<wls_admin_host oa_var="s_wls_admin_host">rws3510357</wls_admin_host>
END

my $hostname = 'rws3510357';

my $wlsadmin = $dom->at('wls_admin_host')->text;

if (index($wlsadmin, $hostname) != -1 ) {
  print "True\n";
} 
```

# android - Android FacebookSDK 给了我“Facebook 登录配置错误”

> ID：13331206
> 
> 赞同：0
> 
> 时间：2012-11-11T12:41:27.777
> 
> 标签：android, facebook-android-sdk

我搜索了有关“Facebook 登录配置错误”错误消息的信息，但没有找到有效的解决方案。我已将 Util.ENABLE_LOG 设置为 true，但我的日志中根本没有收到错误消息，因此我无法弄清楚是什么原因造成的。

我在 Mac 上使用 Eclipse 进行开发。

我已经使用 keygen 工具生成了一个哈希。

似乎 Eclipse 正在寻找正确位置的 debug.keystore。

我只是调用`facebookSDK.authorize(activity, this);`where 活动是我的主要活动，它持有一个 SurfaceView，它在画布上绘制我的 UI（它是一个类似游戏的应用程序），这会很好地打开 FacebookSDK 登录 UI，我可以登录，但它会给我这个“错误配置”错误消息（但日志中没有任何内容）。

回调方法“onComplete、onFacebookError、onError、onCancel”永远不会被调用。

所以，我卡在这里！关于我可以做些什么来找出问题的真正原因有什么想法吗？

谢谢索伦_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:34:41.707

还要确保使用此代码而不是命令来获得正确的哈希值，因为它为 pc、mac 和 linux 提供了不同的哈希值：

```
PackageInfo info;
try {
info = getPackageManager().getPackageInfo("com.myname.lolo", PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures) {
           MessageDigest md;
md = MessageDigest.getInstance("SHA");
md.update(signature.toByteArray());
           //String something = new String(Base64.encode(md.digest(), 0));
            * String something = new String(Base64.encodeBytes(md.digest()));
           Log.e("hash key", something);
} 
}
catch (NameNotFoundException e1) {
Log.e("name not found", e1.toString());
}

catch (NoSuchAlgorithmException e) {
Log.e("no such an algorithm", e.toString());
}
catch (Exception e){
Log.e("exception", e.toString());
} 
```

然后你可以删除这个代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:56:34.217

啊，现在我知道问题出在哪里了！当您生成哈希时，您必须使用“android”作为密码，我没有抓住那个。

# list - 在lisp中获取未列出缺点的值

> ID：13331207
> 
> 赞同：0
> 
> 时间：2012-11-11T12:41:41.023
> 
> 标签：list, lisp, scheme, cons

我在 scheme(lisp) 中创建了一个函数，在该函数中我需要用它反转一个列表，如下所示：

```
(cons list (cdr (reverse list))) 
```

考虑我有这个列表'（0 1 2），所需的输出将是：

```
(0 1 2 1 0) 
```

但我得到：

```
((0 1 2) 1 0) 
```

是否有任何函数返回列表的值，而不是列表本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:24:52.837

你应该阅读`cons`：[http ://en.wikipedia.org/wiki/Cons](http://en.wikipedia.org/wiki/Cons)

`cons`将一个元素与另一个元素配对。如果将元素与列表配对，则将此元素添加到列表的开头。在您的情况下，您与反向列表配对的元素本身就是一个列表。请参阅 wiki 页面上的示例。

您想要的是`append`，因为您想将这两个列表连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:01:56.007

像这样附加它：

```
(define (mirror ls)
    (if (null? (cdr ls))
        ls
        (let ((x (car ls)))
            (append 
                (list x)
                (mirror (cdr ls))
                (list x))))) 
```

希望能帮助到你 ：）

# c# - 中止内部创建新线程的任务会导致 UnhandledException

> ID：13331209
> 
> 赞同：1
> 
> 时间：2012-11-11T12:41:59.340
> 
> 标签：c#, multithreading, task-parallel-library, task

我正在尝试中止内部创建线程的任务。问题是内部线程正在尝试访问已释放的资源（因为父任务已被取消），这会导致未处理的异常。

创建线程的代码是一个“黑匣子”，一个外部 DLL，所以我不能给它传递一个 CancellationToken 左右。

我该怎么做才能使任务中止其内部线程？或者这种情况的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:12:46.037

如果你不能自己管理线程，那么你能做的最好的就是处理异常。对黑盒调用进行 try catch 并在您自己的代码中做出适当的响应。

如果可以的话，我会向黑匣子的提供者抱怨。他们应该为您提供适当的 API 以使用他们的工具。

# objective-c - NSNumberformatter 准科学记数法

> ID：13331212
> 
> 赞同：0
> 
> 时间：2012-11-11T12:42:33.923
> 
> 标签：objective-c, cocoa, nsnumberformatter

我需要 NSNumberFormatter 有条件地将非常大或非常小的数字显示为科学记数法。但如果数字可以不显示，我只需要十进制。6.62e-34 可以，但 4,2E1 不行。

在系统的其他地方，我使用以下方法解决了这个问题：

```
- (NSString *) formatNumber: (double) d {
    BOOL sci=NO;
    double dd = d;
    if (dd<0.0) dd=(-d); 
    if ((dd>0.0) && (dd<1e-3)) sci=YES;
    if (dd>1e+8) sci=YES;
    if (sci) [nf setNumberStyle:NSNumberFormatterScientificStyle];
    else [nf setNumberStyle:NSNumberFormatterDecimalStyle]; 
    return  [nf stringFromNumber:[NSNumber numberWithDouble:d]];
} 
```

但是在这个特定的地方，整个事情都是在接口构建器中设置的，绑定到托管对象模型并使用数组控制器对象。在tableview中colum的第一个文本单元格中，我拖入了numberformatter。我不知道是否可以定义一些要调用的自定义方法来进行格式化，而不是使用这个 NumberFormatter。如果我把它拿走，我在运行它时会出错。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:37:58.777

您要做的是编写 NSValueTransformer 的子类。然后，您可以在绑定检查器中提供 IB 中该转换器类的名称。这是一个例子：

```
@implementation RDTransformer

- (id)init {
    if (self = [super init]) {
        self.formatter = [[NSNumberFormatter alloc] init];
        [self.formatter setNumberStyle:NSNumberFormatterScientificStyle];
        [self.formatter setMaximumFractionDigits:3];
    }
    return self;
}

+(Class)transformedValueClass {
    return [NSString class];
}

+(BOOL)allowsReverseTransformation {
    return NO;
}

-(id)transformedValue:(NSNumber *)value {
    if ([value compare:@1000] == NSOrderedAscending) {
        return value.stringValue;
    }else{
        return [self.formatter stringFromNumber:value];
    }

} 
```

在 IB 中，列（在单列表中）的值绑定到 Array Controller.arrangedObjects，值转换器为 RDTransformer。我没有任何格式化程序连接到表格单元格。

# android - 动态添加的 imageviews 点击了哪一个？

> ID：13331215
> 
> 赞同：0
> 
> 时间：2012-11-11T12:42:57.657
> 
> 标签：android, android-layout

我有一个线性布局，每次用户用相机拍照时，我都会用图像视图填充。所以这些图像视图是动态添加的。

对于这些图像视图中的每一个，我附加了一个 OnClick 事件以打开图片并将其显示在另一个活动的另一个图像视图中。

每个图像视图都有一个标签，其中包含一个带有位图信息的数组列表项。

OnClick 事件：

```
ImageView iv = new ImageView(this);
LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,     LinearLayout.LayoutParams.WRAP_CONTENT);
iv.setLayoutParams(params);
iv.setImageBitmap(mBitmap);
iv.setTag(pli);
iv.setPadding(5, 5, 5, 5);
lvp.setOnClickListener(new OnClickListener() {

public void onClick(View arg0) {
    PhotoList pli = (PhotoList) arg0.getTag();
    Intent i = new Intent(getBaseContext(), PhotoActivity.class);
    i.putExtra("photo", pli.Photo);
        i.putExtra("PhotoId", pli.id);
    startActivity(i);
}
});

lvp.addView(iv); 
```

显然 arg0.getTag() 行不工作。变量 arg0 属于线性布局，但我需要点击 imageview。

如何检测线性布局中的哪个图像视图被点击？

rg，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:03:58.040

您已将 设置`OnClickListener`为父`LinearLayout`级而不是`ImageView`.

而不是这个：

```
lvp.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        ...
    }
}); 
```

用这个：

```
iv.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        ...
    }
}); 
```

# php - 如何只测试一个输入

> ID：13331221
> 
> 赞同：-1
> 
> 时间：2012-11-11T12:43:25.453
> 
> 标签：php, mysql, file-upload

这是我检查上传文件的 php 代码：

```
<?php
include("includes/db.php");
include("includes/header.php");

//=========================
//Check file upload
if (!empty($_FILES["file"])) {
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg")) && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["size"] > 524288000) {
            $mtype="error";
            $alertc="Image is too large<br/>\n";
            $labelc="labeler";
            $inputc="er";
        }
        else {
            $imgname = $arrusrselect[id].md5($arrusrselect[id]).$arrusrselect[id].".jpg";
            move_uploaded_file($_FILES["file"]["tmp_name"], "images/user/profile/" . $imgname);
            setcookie("success", "Profile picture updated<br/>");
            $labelc="label";
            $inputc="input";
            $upusers=$mysqli->query("UPDATE `users` SET `img`='$imgname' WHERE `id`='$arrusrselect[id]'");
            $upimg=$mysqli->query("UPDATE `profile_img` SET `visibility`='$_POST[img_pub]' WHERE `id`='$arrusrselect[id]'");
            header('Location: '.$_SERVER['REQUEST_URI']);
        }
    }
    else {
        $mtype="error";
        $alertc="Invalid file. Only image files are allowed<br/>\n";
        $labelc="labeler";
        $inputc="er";
    }
}
else {
    $inputc="input";
    $labelc="label";
if (isset($_POST['img_pub'])) {
    setcookie("success", "Profile picture visibility updated<br/>");
    $upimg=$mysqli->query("UPDATE `profile_img` SET `img`='$imgname', `visibility`='$_POST[img_pub]' WHERE `id`='$arrusrselect[id]'");
    header('Location: '.$_SERVER['REQUEST_URI']);
}
}
//check image visibility

//image check complete

//checking complete

$prof_img=$mysqli->query("SELECT `visibility` FROM `profile_img` WHERE `id`='$arrusrselect[id]'");
$prof_img_slct = mysqli_fetch_array($prof_img);
if (($prof_img_slct[visibility]) == "Public") {
    $imgchecka = "checked='checked'";
}
elseif (($prof_img_slct[visibility]) == "UsersOnly") {
    $imgcheckb = "checked='checked'";
}
else {
    $imgcheckc = "checked='checked'";
}

    if (isset($_COOKIE['success'])) {
        echo "<div id=\"msg\" class=\"success hide\">$_COOKIE[success]</div>\n";
        setcookie("success", "", time()-3600);
    }
    elseif (isset($mtype)) {
        echo "<div id=\"msg\" class=\"".$mtype."\">".$alerta.$alertb.$alertc.$alertd.$alerte."</div>\n";
    }

    echo "<form action='test.php' method='post' enctype='multipart/form-data'>\n";
    echo "<table class='login'>\n";
    echo "<tr><td class='$labelc'>New Profile Picture:</td><td class='input'><input type='file' name='file' class='$inputc' id='file' /></td><td class='input'> <input type='radio' name='img_pub' value='Public' $imgchecka /> </td><td class='input'> <input type='radio' name='img_pub' value='UsersOnly' $imgcheckb /> </td><td class='input'> <input type='radio' name='img_pub' value='Hide' $imgcheckc/> </td></tr>\n";
    echo "<tr><td class='label'></td><td class='input'><p class='flag'> Max. size is 500kB. Allowed file types .jpg, .png &amp; .gif </p></td></tr>\n";
    echo "<tr><td></td><td><input type='submit' value='Update' /></td></tr>\n";
    echo "</table></form>\n";

include("includes/footer.php");
?> 
```

我想要的是改变用户图像的可见性，即使用户没有选择要上传的文件。当没有选择文件时，警报会正确显示。但是当我给出一个错误的文件时，（即一个 .txt 文件例如页面仍然显示`"Profile picture visibility updated"`而不是预期的结果`"Invalid file. Only image files are allowed"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:30:08.453

我刚刚测试了您的代码，它很乱，我不相信它会真正起作用，但是由于以下原因，您没有收到错误消息：

当文件更新时，您使用`setcookie(..)`我不认为是实现打印“成功消息”的正确方法，然后您为用户重新加载页面，以便在`if $_FILES and if $_POST`检查后直接加载。

然后你检查这个cookie是否存在你打印它的值然后你尝试取消设置这个cookie，此时你的代码失败了，因为你不能发送标题（setcookie，header（），session（））如果任何东西打印在这页纸。

现在如果你修复了它也不起作用，因为你`$_FILES and $_POST`在同一个请求中提交图像文件和图像隐私，所以如果`$_FILES`失败，`$_POST`请求将成功，它将重新加载页面，错误变量将丢失。

我不知道为什么要`header("location:...")`在上传成功时使用该功能，如果用户重新加载页面，您不希望用户重新提交数据？如果用于设置带有成功消息的 cookie 并显示它们，这不是问题，甚至不是安全问题，有更好的方法。

我很快调整了你的代码，测试它是否适合你，**注意**这不是正确的最好方法，我只为你提供这个，所以你可以学习在 PHP 中处理表单的基本结构，所以你可以（必须) 在函数和类中使用它们

```
<?php   
    /*  ADD THE PRIVACY TYPES INTO AN ARRAY,
        THE USER CAN CHANGE THE VALUE INTO
        SOMETHIING IS NOT IN YOUR CODE
        AND SEND IT TO DATABASE
    */
    $pubTypes = array(
        "Public" => 1,
        "UsersOnly" => 1,
        "Hide" => 1
    );
    #check if the submit button is clicked;
    if($_POST['Update']){
    #This (if) will check and update both file and privacy radio on each submit
        #the file validation and upload.
        #check if the file is not empty;
        if(!empty($_FILES["file"])) {
            $allowedExts = array("jpg", "jpeg", "gif", "png");
            $extension = end(explode(".", $_FILES["file"]["name"]));
            if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg")) && in_array($extension, $allowedExts)) {
            #file type is allowed, continue and check size;
                if ($_FILES["file"]["size"] > 524288000) {
                    /*
                    $mtype="error";
                    $alertc="Image is too large<br/>\n";
                    $labelc="labeler";
                    $inputc="er";
                    */  
                    #set upload error/success to an array
                    $fileup = array(
                       "error" => 1,
                       "msg" => "Image is too large"
                    );
                }
                else {
                    #file size allowed upload the image and insert the values in the db
                    $imgname = md5(time() - rand(0,999))."-".$arrusrselect["id"].".".$extension;

                    #upload image and detect any error
                    if(move_uploaded_file($_FILES["file"]["tmp_name"], "images/user/profile/" . $imgname)){
                        #image uploaded successfuly
                        #update the data base
                        if($upusers=$mysqli->query("UPDATE `users` SET `img`='{$imgname}' WHERE `id`='{$arrusrselect['id']}'")){
                            $fileup = array(
                               "success" => 1,
                               "msg" => "Profile picture updated."
                            );                         
                        }else{
                             $fileup = array(
                               "error" => 1,
                               "msg" => "Error updating the new picture value in the database."
                             );
                             #AT THIS POINT, you better delete the new image from server.
                             #@unlink("images/user/profile/" . $imgname);
                        }                       
                    }else{
                        #image upload ERROR
                        $fileup = array(
                           "error" => 1,
                           "msg" => "Error moving the file to the server."
                        );                        
                    }#endelse
                }#end if file size allowed
            }#end if if file type allowed
            else{
            #file type is not allowed
                $fileup = array(
                    "error" => 1,
                    "msg" => "Invalid file. Only image files are allowed"
                );  
            }
        }else{ #file IS EMPTY    
            /*NO need to print erros, because a user may
            only update his profile privacy only without
            submitting a new image*/
        }

        /* CHECK PROFILE PRIVACY UPDATE */
        if(!empty($pubTypes[$_POST['img_pub']])){
            #check if img_pub selected and its in a valid type, update the database.
            #you have to check the $imgname, because the upload may have returned errors.
            if($imgname){
                $sql = "UPDATE `profile_img` SET `img`='{$imgname}', `visibility`='{$_POST['img_pub']}' WHERE `id`='{$arrusrselect[id]}'";
            }else{
                $sql = "UPDATE `profile_img` SET `visibility`='{$_POST['img_pub']}' WHERE `id`='{$arrusrselect[id]}'";
            }
            #send the update query
            if($upimg=$mysqli->query($sql)){
                $pubup = array(
                   "success" => 1,
                   "msg" => "Profile picture visibility updated"
                );                             
            }else{
                $pubup = array(
                   "error" => 1,
                   "msg" => "Error updating picture visibility."
                ); 
            }

        }else{
            #invalid type, do nothing or you can reset the option to the default
            $pubup = array(
               "error" => 1,
               "msg" => "Invalid visibility type."
            ); 
        }
    }#end of $_POST['Update'];
    #END OF CHECKING IF THE FORM WAS POST;

    //get user's image and visibilty settings.
    $prof_img=$mysqli->query("SELECT * FROM `profile_img` WHERE `id`='{$arrusrselect['id']}'");
    $prof_img_data = mysqli_fetch_array($prof_img);
    $vis = $prof_img_data['visibility'];
    if($pubTypes[$vis]) {$pubTypes[$vis] = 'checked';}
    #you can use the image in html
    $imgname = $prof_img_data['visibility'];

    # PRINT UPLOAD AND UPDATE RESULT IF ERROR OR SUCCESS
    #check file upload result, class will be class="file-error" OR class="file-success"
    if(is_array($fileup)){
        echo "<p class='file-{$fileup['result']}'>Image upload: {$fileup['msg']}</p>";
    }
    #check profile visibility result, class will be class="pub-error" OR class="pub-success"
    if(is_array($pubup)){
        echo "<p class='pub-{$pubup['result']}'>Visibility update: {$pubup['msg']}</p>";
    }        
?>
<form action='<?= $_SERVER['PHP_SELF']; ?>' method='post' enctype='multipart/form-data'>
<table class='login'>
<tr>
<td class='<?php $fileup['error'] ? print("errorClass") : '';?>'>New Profile Picture:</td>
<td class='input'><input type='file' name='file' class='<?php $fileup['error'] ? print("er") : print("inputc");?>' id='file' /></td>
<?php foreach($pubTypes as $key=>$value){ 
echo "<td class='input'><input type='radio' name='img_pub' value='$key' value=".($value != 1 ? 'checked' :'')." /></td>";
}?>
</tr>
<tr>
<td class='label'></td>
<td class='input'><p class='flag'> Max. size is 500kB. Allowed file types .jpg, .png &amp; .gif </p></td>
</tr>

<tr><td></td><td><input type='submit' name='Update' value='Update' /></td></tr>
</table></form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:12:58.863

你可以试试下面的代码：

```
$error = 1; // this flag will decide any error happens or not
if (!empty($_FILES["file"])) {
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg")) && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["size"] > 524288000) {
            $error = 0; // this error so make it 0
            $alertc="Image is too large<br/>\n";
        }
        else {
            $imgname = $arrusrselect[id].md5($arrusrselect[id]).$arrusrselect[id].".jpg";
            move_uploaded_file($_FILES["file"]["tmp_name"], "../images/user/profile/" . $imgname);
            $upusers=$mysqli->query("UPDATE `users` SET `img`='$imgname' WHERE `id`='$arrusrselect[id]'");
        }
    }
    else {
        $alertc="Invalid file. Only image files are allowed";
        $error = 0; // this error so make it 0 
    }
}
else {

}
//check image visibility

//If all well then, $error will be 1 otherwise 0 so in case of error like invalid file or file too large, following code doesn't execute.

if (isset($_POST[img_pub]) && $error) {
    $alertc="Profile picture visibility updated";
    $upimgvis=$mysqli->query("UPDATE `profile_img` SET `visibility`='$_POST[img_pub]' WHERE `id`='$arrusrselect[id]'");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:13:25.283

`$alertc`您可以在进行可见性更新之前检查是否未设置。您还以不推荐的方式访问数组值`$_POST[key]`应该是在定义字符串时使用双引号时`$_POST['key']`可以将 var括起来。`{$_POST['key']}``"`

```
<?php 
if (!empty($_FILES['file'])) {
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg")) && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["size"] > 524288000) {
            $alertc="Image is too large<br/>\n";
        }
        else {
            $imgname = $arrusrselect['id'].md5($arrusrselect['id']).$arrusrselect['id'].".jpg";
            move_uploaded_file($_FILES["file"]["tmp_name"], "../images/user/profile/" . $imgname);
            $upusers = $mysqli->query("UPDATE `users` SET `img`='$imgname' WHERE `id`='{$arrusrselect['id']}'");
        }
    }
    else {
        $alertc="Invalid file. Only image files are allowed";
    }
}

//check image visibility
if (isset($_POST['img_pub']) && !isset($alertc)) {
    $alertc="Profile picture visibility updated";
    $upimgvis=$mysqli->query("UPDATE `profile_img` SET `visibility`='{$_POST['img_pub']}' WHERE `id`='{$arrusrselect['id']}'");
}
//image check complete
?> 
```

# python - YAML 不调用构造函数

> ID：13331222
> 
> 赞同：4
> 
> 时间：2012-11-11T12:43:38.980
> 
> 标签：python, python-3.x, yaml

我尝试按照[此处](http://pyyaml.org/wiki/PyYAMLDocumentation#Constructorsrepresentersresolvers)的说明进行操作，这使我得到了以下代码：

```
import yaml
class Step(yaml.YAMLObject):

    yaml_tag = "!step"

    def __init__(self, *args, **kwargs):
        raise Exception("Intentionally.")

yaml.load("""
--- !step
    foo: bar
    ham: 42
""") 
```

预期的行为：我得到一个例外。但我观察到的是，我的 YAML 标记会生成一个`Step`实例，并且我可以使用它、访问方法、属性（如`foo`上面的代码）等等。阅读文档，我找不到我的错误，因为它建议使用所有键值对作为关键字参数调用构造函数。

基本上文档中的示例有效，但不是因为构造函数的实现，而是因为键值对（的属性`Monster`）用于填充对象的字典。

这里有人知道吗？

我正在使用 python3，但在 python2 中进行了快速评估并观察到了相同的结果。

*编辑*

我想做的是：留在链接的示例（文档）中，如果`Monster`s`name`以 a 开头，则将 .`B`的值加倍`ac`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T13:49:29.380

从文档中：

> yaml.YAMLObject 使用元类魔法来注册一个构造函数，它将 YAML 节点转换为一个类实例，以及一个表示器，它将一个类实例序列化为一个 YAML 节点。

`constructor`在内部，由注册的默认值`yaml.YAMLObject`将调用`YourClass.__new__`然后使用`instance.__dict__`. 有关更多详细信息，请参阅[此方法](http://pyyaml.org/browser/pyyaml/trunk/lib/yaml/constructor.py#L401)。

根据您想要做什么，您可以放入一些逻辑`Step.__new__`（但您不会获得任何字段`**kwargs`，或者[注册自定义构造函数](http://pyyaml.org/wiki/PyYAMLDocumentation#Constructorsrepresentersresolvers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:22:05.023

我认为我有一个根本性的误解。我不知道这个假设是否成立，但我认为

```
load, dump = yaml.load, yaml.dump
foo = "any valid yaml string"

load(foo) == load(dump(load(foo))) # should be true 
```

如果我现在按照我在问题中的建议进行操作，在加载时真正更改属性，会改变这个“等式”并导致我很可能不想要的行为。

# android - Android APP 数据库连接

> ID：13331223
> 
> 赞同：0
> 
> 时间：2012-11-11T12:43:52.513
> 
> 标签：android, database

我想用“openOrCreateDatabase”创建一个 SQLLite 数据库。问题是，我在创建新表时出错。

```
11-11 12:36:39.865: E/AndroidRuntime(1520): java.lang.IllegalStateException: 
database not open 
```

这是我的代码：

`public class MainActivity extends Activity {`

 ````
EditText playerName;
Button submitPlayer;
SQLiteDatabase myDB = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    playerName = (EditText)findViewById(R.id.playerName);
    submitPlayer = (Button)findViewById(R.id.submitPlayer);

        myDB = SQLiteDatabase.openOrCreateDatabase("/data/data/com.my.appname/mydb.db",null);           
  try{          

        myDB.execSQL("CREATE TABLE IF NOT EXISTS player (playername VARCHAR)");         
        myDB.execSQL("INSERT INTO player VALUES('test')"); 
```` 

`... ..`

我在清单中添加了 2 行：

<权限组android:name="android.permission-group.STORAGE">

< 使用权限 android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

怎么了 ？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:49:06.607

您不应该像这样访问您的数据库。而且您不需要/data/data 的存储权限，这是用于 sdcard 的。你应该做的是使用 SQLiteOpenHelper 来管理你的数据库。这是一个让您入门的[教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# android - 为什么 DataOutputStream 会丢失一个字符？

> ID：13331228
> 
> 赞同：2
> 
> 时间：2012-11-11T12:45:00.827
> 
> 标签：android, sockets, dataoutputstream

我有一个简单的连接活动：

```
package com.example.conn08;

import ...;

public class MainActivity extends Activity
{
    public static Socket clientSocket;
    public static DataOutputStream outToServer;
    public static PrintWriter outTest;
    public static BufferedReader inToServer; 
```

使用 PrintWriter outTest 我测试服务器的可用性：如果用户没有 Internet，或者服务器不工作，我使用 Boolean shouldContinue 暂停 Thread。

```
 private Thread mThread;
    private final Object lock = new Object();
    private Boolean shouldContinue = true;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mThread = new Thread(new Runnable() 
        {
            public void run() 
            {
                while (true) 
                {
                    synchronized(lock)
                    {
                        try 
                        {
                            lock.wait(); // lock the Thread
                        } 
                        catch (InterruptedException e) 
                        {
                            e.printStackTrace();
                        }
                    }
                    while (shouldContinue) 
                    {
                        try 
                        {
                            final String data = inToServer.readLine();
                            if (data != null)
                            {
                                Log.v("data", data);
                                runOnUiThread(new Runnable()
                                {
                                    @Override
                                    public void run()
                                    {
                                        String put[] = data.split("#");
                                        //Data parsing
                                    }
                                });
                            }
                        } 
                        catch (IOException e)
                        {
                            e.printStackTrace();
                        } 
```

检查服务器的可用性：

```
 try {
                            if(clientSocket.getInputStream().read() == -1)
                            {
                                Log.v("Connection: ", "lost");
                            }
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        });
        mThread.start(); 

        Connect();
    }
    public void Connect()
    {
        shouldContinue = true;
        try
        {
            clientSocket = new Socket();
            clientSocket.connect(new InetSocketAddress("localhost", 15780), 30000);

            outToServer = new DataOutputStream(clientSocket.getOutputStream());
            inToServer = new BufferedReader(
            new InputStreamReader(clientSocket.getInputStream()));
            outTest = new PrintWriter(new BufferedWriter(
            new OutputStreamWriter(clientSocket.getOutputStream())), true);

            synchronized(lock) 
            {
                lock.notify();
            }

            sendUTF("3#kokoko"); //send the message!
        } 
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    public static void sendUTF(String str)
    {
        try
        {
            byte[] buf = str.getBytes("UTF-8");
            outToServer.write(buf, 0, buf.length);
            outToServer.writeBytes("\n");
            outToServer.flush();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
            outServ.setText("Нет соединения!");
        }
    }
} 
```

问题在于，当我**不**使用

```
if(clientSocket.getInputStream().read() == -1) 
```

并将数据发送到服务器，如下所示：

```
sendUTF("3#kokoko"); 
```

一切都很好，但如果我使用它，在服务器上我会看到这样的消息“#kokoko” - 我丢失了消息的第一个字符并且我的套接字被压碎了！请帮帮我

# css - 带有 float:left 的无序列表项不能正确浮动

> ID：13331231
> 
> 赞同：2
> 
> 时间：2012-11-11T12:45:39.517
> 
> 标签：css, html-lists

真诚感谢任何帮助。由于某种原因，在我的无序列表中，最后两个项目没有按预期浮动。你可以在`zenmonyDOTcom/immune-support-c30/` 下面看到它的布局：

```
ul.categories-list {
    width: 620px;
    padding: 30px 0 10px 60px;
    float: left;
    min-height:425px;
    background: url(/images/categories_bkgrnd_main.png) no-repeat;
    list-style:none;
    text-align: center;
}

.categories-list li {
    position:relative;
    margin:5px;
    float:left;
    display: block;
    } 
```

是因为物品没有正确清理吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T12:54:37.050

删除`float: left;`并`ul.categories-list`修改填充为`30px 0 10px 0`

并添加`display: inline-block;`和`.categories-list li`删除`float: left;`

```
.categories-list li {
    position:relative;
    margin:5px;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T12:59:51.750

您的高度不一致，其中一张图像是 195px 高，而其余的似乎是 194px，如果您使它们都相同，则应该全部设置好！

# php - PHP 有趣的类实例的创建

> ID：13331232
> 
> 赞同：1
> 
> 时间：2012-11-11T12:45:54.973
> 
> 标签：php, syntax

我在 PHP 中读过这个有趣的语法：

```
$value = (new MyClass)->attribute1; 
```

1.  可以使用吗？在我分析过的任何代码中，我从未见过这样的事情。有什么优点和缺点吗？
2.  为什么我不能使用这种语法设置属性？像这样的结构：

    (new MyClass)->attribute1 = 'value1';

在 '=' 符号处抛出错误，无论该属性是否已经存在于类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:00:01.290

1.  好吧，我看不出使用它的意义，因为你失去了对对象的引用，你不能再使用它了，它打破了 OO 概念。

2.  我认为 (new MyClass)->attribute1 是先解决的，所以和写 42 = 12 之类的东西是一样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:31:19.290

`MyClass`如果该类支持所有现有实例的内部静态列表（或哈希图），这可能是有道理的。通过这种方式，您可以创建新对象并在列表中获取其唯一 ID 或索引以供将来参考（例如，通过 cookie 将其发送到客户端）。

至于分配，您将针对这种情况发布确切的错误消息。我可以猜到，错误是关于将某些东西分配给即将被销毁的临时值。

# c#-4.0 - 显示字体文件中的字形

> ID：13331233
> 
> 赞同：2
> 
> 时间：2012-11-11T12:45:57.977
> 
> 标签：c#-4.0, fonts, glyph

在一个 Windows 应用程序（.Net 4.0）上工作，它将接受字体文件名作为输入，并将返回字体中每个字形的图像。尝试了所有可能的 Google 东西，但没有得到所有 glyph 的图像。如果得到的图像也有一些错误的输出。请建议我这样做的方法...目前有以下工作...

```
private void generateBitmaps(string strFontpath)
        {
            ////Generate font object
            GlyphTypeface font = new GlyphTypeface(new Uri(strFontpath));
            int fontSize = 22;
            int intGlyphcount = 0;
            //Collect geometry of all glyphs
            var Glyphs = from glyphIndex in font.CharacterToGlyphMap.Values
                         select font.GetGlyphOutline(glyphIndex, fontSize, 1d);
            // now create the visual we'll draw them to
            DrawingVisual viz = new DrawingVisual();
            System.Drawing.Size cellSize = new System.Drawing.Size(fontSize, Convert.ToInt32(fontSize * font.Height));
            int bitWidth = (int)Math.Ceiling(Convert.ToDecimal(cellSize.Width*10));
            int bitHeight = (int)Math.Ceiling(Convert.ToDecimal(cellSize.Height * 10));

            //using (DrawingContext dc = viz.RenderOpen())
            {
                foreach (var g in Glyphs)
                {
                    if (intGlyphcount > font.GlyphCount)
                        break;
                    //if (g.IsEmpty())
                    //    continue; // don't draw the blank ones
                    DrawingContext dc = viz.RenderOpen();                   
                    dc.PushTransform(new TranslateTransform());
                    System.Windows.Media.Pen glyphPen = new System.Windows.Media.Pen(System.Windows.Media.Brushes.Black, 1);
                    dc.DrawGeometry(System.Windows.Media.Brushes.Red, glyphPen, g);
                    //GeometryDrawing glyphDrawing = new GeometryDrawing(System.Windows.Media.Brushes.White, glyphPen, g);
                    //DrawingImage geometryImage = new DrawingImage(glyphDrawing);
                    //dc.DrawImage(geometryImage, new Rect(0, 0, 150, 150));
                    dc.Close();
                    //geometryImage.Freeze();
                    //dc.Pop(); // get rid of the transform
                    RenderTargetBitmap bmp = new RenderTargetBitmap(
                                                            200, 200,
                                                            96, 96,
                                                            PixelFormats.Pbgra32);
                    bmp.Render(viz);
                    PngBitmapEncoder encoder = new PngBitmapEncoder();
                    encoder.Frames.Add(BitmapFrame.Create(bmp));
                    using (FileStream file = new FileStream(@"GlyphList\Glyph" + intGlyphcount++ + ".png", FileMode.Create))
                        encoder.Save(file);

                    //dc.Pop();
                }

            }
            MessageBox.Show("Done");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T04:37:41.443

如果您将字体中的字形用作图像，请使用外部 dll 此 dll 在 url
[http://www.gnostice.com/XtremeFontEngine_dot_NET.asp中可用](http://www.gnostice.com/XtremeFontEngine_dot_NET.asp)

# html - 谷歌浏览器缺少右双边框

> ID：13331237
> 
> 赞同：3
> 
> 时间：2012-11-11T12:46:44.910
> 
> 标签：html, css, google-chrome

我有一些（我认为相当简单，香草）HTML + CSS 像这样（省略不相关的部分）：

CSS：

```
.firstcol {border-bottom: solid 1px #666666; border-right: solid 1px #666666;}
.secondcol {border-bottom: solid 1px #666666;} 
```

HTML：

```
<table style="BORDER: #666666 2px solid; border-collapse: collapse;"> 
```

（所有`<td>`s 都是*firstcol*或*secondcol*类）

最终效果是一个带有双外边框和单内边框的表格。它在 IE 和 Firefox 上运行良好，但在 Chrome 中，表格的右侧双边框缺失。只有右侧。它得到顶部、底部和左侧。

这是不健全的代码，还是只是一个不起眼的 Chrome 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T10:49:40.040

重新编码并....添加了一种解决方法，只需在最后一列的右侧强制使用 2px 边框：

```
td:last-of-type
{
    border-right-width:2px;
} 
```

[**演示**](http://jsfiddle.net/ERV5q/19/)

我承认这是一个非常奇怪的 Chrome 错误。

# sqlite - 在 SQLite 上使用 MicroLite

> ID：13331241
> 
> 赞同：3
> 
> 时间：2012-11-11T12:47:31.530
> 
> 标签：sqlite

我设置了一个与现有 SQL 服务器数据库具有相同架构的 SQLite 数据库，并注意到以下内容......

1.  SQLite 字段名称（可能还有其他所有内容）区分大小写。
2.  MicroLite 的 SqlBuilder 似乎插入了前缀“dbo”。在表名之前，SQLite 不喜欢...

此查询有效...

```
query = new SqlQuery("SELECT [ClubID], [Name] FROM [Clubs] WHERE [ClubID] = @p0", 3);

clubs = session.Fetch<MicroLiteClub>(query); 
```

这个不...

```
query = SqlBuilder.Select("*")
                  .From(typeof(MicroLiteClub))
                  .Where("ClubID = @p0", 3)
                  .OrWhere("ClubID = @p1", 22)
                  .OrderByDescending("Name")
                  .ToSqlQuery();

clubs = session.Fetch<MicroLiteClub>(query); 
```

MicroLite 记录：“没有这样的表：dbo.Clubs”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:59:44.117

发生这种情况是因为 SQLite 不支持 MS SQL Server 那样的表模式。

在手工查询中，您没有为表指定架构，`FROM [Clubs]`但是在映射属性中，您将指定`dbo`为如下架构：

```
[Table(schema: "dbo", name: "Clubs")] 
```

`SqlBuilder`不知道正在使用什么 SQL 方言，因此如果表映射上存在 schame，它将被使用。这意味着它将生成`FROM [dbo].[Clubs]`. 要纠正这个问题，只需`TableAttribute`从 MicroLite 2.1 开始删除 as 上的模式值是可选的。

附带说明一下，MicroLite 2.1`In`在 SqlBuilder fluent API 中引入了对 的支持，因此您可以更改：

```
.Where("ClubID = @p0", 3)
.OrWhere("ClubID = @p1", 22) 
```

到

```
.Where("ClubID").In(3, 22) 
```

# android - Android活动——远程服务辅助双向连接

> ID：13331242
> 
> 赞同：10
> 
> 时间：2012-11-11T12:47:56.857
> 
> 标签：android

我有两个问题：

1.  我知道对于连接*活动*和*远程服务*，我必须使用*AIDL*。我试过这个，它的工作，但我只能找到一种方式连接示例。简而言之 - 从服务中读取一些东西（通过活动）。但我需要*解决将一些数据发送到活动*（通过或从服务）。这非常重要，因为服务必须在某些事件发生后立即向活动发送一些信息（从网络获取数据）。
2.  是否可以从远程服务再次关闭应用程序（活动）？

任何建议将不胜感激。

问候

阿尔蒂克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T13:15:55.250

> 这非常重要，因为服务必须在某些事件发生后立即向活动发送一些信息（从网络获取数据）。

您可以使用 AIDL 进行双向通信。您不仅需要公开服务接口，还需要通过 AIDL 公开回调接口，客户端具有`.Stub`回调的 ，并在参数中将其实例提供给服务接口上的方法。这有点复杂——这是[我书中](http://commonsware.com/Android)的一对示例应用程序，它们演示了该技术：

*   [服务](https://github.com/commonsguy/cw-omnibus/tree/master/AdvServices/RemoteServiceEx)
*   [客户](https://github.com/commonsguy/cw-omnibus/tree/master/AdvServices/RemoteClientEx)

> 是否可以从远程服务再次关闭应用程序（活动）？

您的服务可以调用`startActivity()`，但通常这是一个坏主意。当您的活动突然出现在前台时，用户可能正在做其他事情。有时，用户可能会认为您的活动更重要，但并非总是如此。考虑改用 a `Notification`，让用户知道您的应用中有一些东西需要用户注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:51:31.677

First, create a private resultreceiver variable in your service. Then create a method to set this resultreceiver via a connected activity. Then use AIDL to pass on a resultreceiver to the running service from the activity via the method you just made. Then in the service use resultreceiver.send if the resultreceiver is not null.

A few examples to get you started [http://lalit3686.blogspot.com/2012/06/how-to-update-activity-from-service.html?m=1](http://lalit3686.blogspot.com/2012/06/how-to-update-activity-from-service.html?m=1)

[http://chrisrisner.com/31-Days-of-Android--Day-28](http://chrisrisner.com/31-Days-of-Android--Day-28)–Intents-Part-3--Service-Intents

# .htaccess - 奇怪的htaccess查询参数

> ID：13331243
> 
> 赞同：0
> 
> 时间：2012-11-11T12:47:58.707
> 
> 标签：.htaccess, mod-rewrite, redirect

我在这个网站上搜索了一些，但找不到我的问题的正确答案。

我正在尝试强制 www 重定向并在每个 url 上强制使用 endlash。

我的 htaccess 中有以下几行：

```
# enable rewriting
RewriteEngine on

# if not a file or folder, use index.php
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L]

# force www
RewriteCond %{HTTP_HOST} !^www
RewriteRule .? http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# force endslash
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule (.*) %{REQUEST_URI}/ [L,R=301] 
```

我的 www 重定向工作正常，它会像：

```
http://example.com 

to 

http://www.example.com 
```

但现在奇怪的是，我的结尾斜线添加了我不想要的 url 参数。

所以这会像：

```
http://www.example.com/path/without/endlash 

to 

http://www.example.com/index.php/?url=path/without/endslash 
```

为什么在这种情况下使用我定义的 url 参数，我该如何防止这种情况。

提前致谢

* * *

编辑：

感谢 icrew

仅在 endlash 条目之前添加 no-file/no-dir ，否则它将重定向我的资产。

最终代码：

```
RewriteCond %{HTTP_HOST} !^www
RewriteRule .? http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_URI} !(.*)/$
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule (.*) %{REQUEST_URI}/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:55:01.543

.htaccess 的这一部分

```
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L] 
```

负责`http://www.example.com/index.php/?url=path/without/endslash`重定向。因此，基本上，如果您不希望查询字符串中的 url 参数删除这三行。

编辑：我知道你想要什么。波纹管是正确的代码

```
# enable rewriting
RewriteEngine on

# force www
RewriteCond %{HTTP_HOST} !^www
RewriteRule .? http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# force endslash
RewriteCond %{REQUEST_URI} !(.*)/$
#next row prevent redirection if final rewriting is done
RewriteCond %{REQUEST_URI} !=/index.php 
RewriteRule (.*) %{REQUEST_URI}/ [L,R=301]

# if not a file or folder, use index.php
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
#QSA because I suppose you dont want to discard the existing query string. Remove QSA if you want to discard
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# php - 在 MVC 中处理 404 错误的最佳方法是什么？

> ID：13331253
> 
> 赞同：1
> 
> 时间：2012-11-11T12:49:56.803
> 
> 标签：php, oop, model-view-controller, error-handling, dispatcher

所以我编写了我的 PHP MVC 框架，并有 Dispatcher 类可以实例化适当的 Controller 类并调用定义的方法传递参数。

现在在 Dispatcher 中检查此 Controller 是否存在以及方法是否存在，如果控制器或方法不存在我该怎么办？

目前我只返回打印 404 - Page not found 的 HTTP 对象。但是我无法从应用程序内部自定义此消息，我想为用户提供一种无需编辑调度程序即可自定义 404 消息的方法。

总是让错误控制器在出现错误时被实例化，并且会加载让我们说 Error404.html 视图文件的好方法是什么？因此，用户将能够自定义此视图文件以适合他们的应用程序设计。

有没有其他方法可以实现这一目标？什么是从调度程序返回错误的最佳方式，并让正在使用该 MVC 的“用户”或开发人员轻松自定义 404 和其他消息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:05:54.537

因为我不知道你的 API，所以我猜。让我们假设您的应用程序中有一个引导阶段，当调度程序被实际使用时。就像是：

`$dispatcher->dispatch( $request );`

然后为了处理请求，尝试访问这些控制器中不存在的控制器或方法，您可以执行以下操作：

```
try
{
    $dispatcher->dispatch( $request );
}
catch ( ClassNotFoundException $e )
{
    $dispatcher->dispatch( new Request('/error/404/controller'));
}
catch ( MethodNotFoundException $e )
{
    $dispatcher->dispatch( new Request('/error/404/method'));
} 
```

可以由您的`ClassNotFoundException`类加载器抛出，而调度程序本身将始终负责抛出`MethodNotFoundException`.

[`method_exists()`](http://php.net/manual/en/function.method-exists.php)您可以在调度程序中执行控制器之前检查控制器是否具有特定方法，使用, 。

> [**PS**在我的拙见中，*Dispatcher*概念更适合事件驱动的架构，而不是 Web 应用程序中受 MVC 启发的模式。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:53:56.967

我建议你有一个错误控制器，它将错误代码（数字或字符串）作为参数。这使您可以优雅地处理各种错误，并能够在必要时提供堆栈跟踪。您甚至可以将这项工作用于 500 个错误。

我的回答是假设控制器可以返回各种动作，并且每个动作都可以有自己的模板。

Symfony 似乎也以类似的方式处理错误。他们对每个错误都有一个单独的模块和操作。

```
sfContext::getInstance()->getController()->forward(sfConfig::get('sf_error_404_m‌​odule'), sfConfig::get('sf_error_404_action')); 
```

# javascript - 在javascript中获取点击来源？

> ID：13331258
> 
> 赞同：1
> 
> 时间：2012-11-11T12:50:16.330
> 
> 标签：javascript, click

我正在设计一个使用非常基本的 javascript 的网页。这是代码：

html:

```
<!DOCTYPE html>
<html>
<body>

<img id="apple" onclick="display()" src="images/apple.jpg" width="150" height="150">

<img id="pineapple" onclick="display()" src="images/pineapple.jpg" width="130" height="210">

<br><br>

<div id="description" style="width:300px;height:100px;border-top: 1px solid #000; border-bottom: 4px solid #000; border-left: 2px solid #000; 

border-right: 4px solid #000;padding: 5px;"></div>

<br>

<button type="button" onclick="reset()">Reset</button>

<script type="text/javascript" src="obst.js"></script>

</body>
</html> 
```

这是javascript：

```
function display()
{
document.getElementById("description").innerHTML="der Apfel - Apple<br>die Äpfel - Apples<br><br>Ein Apfel am 

Tag hält den Arzt weg<br>- An apple a day keeps the doctor away";
}

function reset()
{
document.getElementById("description").innerHTML="";
} 
```

单击苹果的图像会在描述框中显示文本。单击菠萝的图像会在同一位置显示一些其他文本。

与其使用 apple()、pineapple() 等不同的函数来插入文本，我认为每当单击某些内容时调用显示函数会更容易，并且在显示函数中，如果脚本可以识别单击的来源（即单击哪个图像），它可以相应地插入文本。

我该如何确定点击来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:01:31.933

您可以使用 this.id：

```
<img id="apple" onclick="display(this.id)" src="images/apple.jpg" width="150" height="150">

<img id="pineapple" onclick="display(this.id)" src="images/pineapple.jpg" width="130" height="210"> 
```

然后抓住 id：

```
function display(clicked_id)
{
 alert(clicked_id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:58:15.383

简单易行的解决方案：将参数传递给`display`函数：

```
<img id="apple" onclick="display('apple');" …&gt;
<img id="pineapple" onclick="display('pineapple');" …&gt; 
```

* * *

更好的解决方案：使用纯 javascript（HTML 标记中没有 JS）[传统](http://quirksmode.org/js/events_tradmod.html)甚至[高级](http://quirksmode.org/js/events_advanced.html)事件处理模型。侦听器（可能附加到多个元素）将获得一个事件对象，您可以从中确定单击了哪个元素。例子：

```
function clickHandler(eventObj) {
    var elem = eventObj.target;
    if (elem.nodeName.toLowerCase() == 'img' && elem.id)
        display(elem.id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:01:15.783

可能是最简单的方法：

```
var code, node = document.getElementById('description');

code = {
    apple    : "Apple",
    pineapple: "Pineapple"
};

function display( src ) {

    node.innerHTML = node.innerHTML ? "" : code[ src.id ] ;

}​

for ( var i in code ) {

    document.getElementById( i ).onclick = function() { display( this ) };

} 
```

**[jsFiddle 上的演示](http://jsfiddle.net/wuN6w/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T12:56:43.103

您将传递`this`给 display() 处理程序，然后您可以访问接收到点击的 DOM 元素的属性。这是小提琴：http: [//jsfiddle.net/dandv/BaNdS/](http://jsfiddle.net/dandv/BaNdS/)。本质上，

```
<img id="apple" onclick="display(this)" ... >

<img id="pineapple" onclick="display(this)" ... >

<script type="text/javascript">
    function display(self) {
        alert(self.id);
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T12:56:50.010

有一个更简单的方法。使用变量：

```
 function selectFruit(fruit){
     if(fruit == 'apple'){
       .....
     }else if(fruit == 'pinapple'){
       .....
     }
     ...
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T13:05:43.490

我会朝着不同的方向前进：

1.  对于每个可能的“术语”，都隐藏了具有所需内容的文本块。
2.  在每个图像标记中添加其适当占位符的 ID 作为`rel`属性。
3.  让 JavaScript 在页面加载时运行，自动分配点击事件。

示例 HTML 将是：

```
<img id="apple" src="images/apple.jpg" rel="desc_Apple" width="150" height="150" />

<img id="pineapple" src="images/pineapple.jpg" rel="desc_Pineapple" width="130" height="210" />

<div class="item_placeholder" id="desc_Apple">
der Apfel - Apple<br>die Äpfel - Apples<br><br>Ein Apfel am 
Tag hält den Arzt weg<br>- An apple a day keeps the doctor away
</div>
<div class="item_placeholder" id="desc_Pineapple">
der Apfel - Pineapple<br>die Äpfel - Pineapples<br><br>Ein Apfel am 
Tag hält den Arzt weg<br>- An Pineapple a day keeps the doctor away
</div> 
```

不要忘记 CSS 来隐藏它们：

```
.item_placeholder { display: none; } 
```

最后是绑定它们的魔法：

```
window.onload = function() {
    for (var i = 0; i < document.images.length; i++) {
        var image = document.images[i];
        var rel = image.getAttribute("rel");
        if (rel && rel.length > 0) {
            image.onclick = ItemImageClick;
        }
    }
};

function ItemImageClick() {
    var rel = this.getAttribute("rel");
    var placeholder = document.getElementById(rel);
    if (placeholder) {
        document.getElementById("description").innerHTML = placeholder.innerHTML;
    } else {
        alert("DEBUG - element not found " + rel);
    }
} 
```

[现场测试用例](http://jsfiddle.net/gF77G/)。

# php - 使用 mysql 和 codeigniter 从数据库中获取信息

> ID：13331261
> 
> 赞同：1
> 
> 时间：2012-11-11T12:50:24.433
> 
> 标签：php, mysql, database, codeigniter

我上一个问题的更新..

这是我在模型中的代码。

```
function member_here()
{
$this->db->select('');
$this->db->from('membership');
$this->db->where('username',$this->input->post('username'));

$q=$this->db->get();

if($q->num_rows() > 0) {
$data = array('first_name');
foreach($q->result() as $row) {
    $data=$row;
}
return $data;
}
} 
```

这是我在视图表单中的代码：

```
<?php

$CI =& get_instance();
$CI->load->model('membership_model');
$result = $CI->membership_model->member_here();
print_r($result);
?> 
```

现在。我有个问题。

输出是这样的：

```
stdClass Object ( [id] => 10 [first_name] => Marishka [last_name] => Villamin [username] => marishkapv [password] => 01aef487205966f24dd694ca4153ccbb [email_address] => marishkapv@gmail.com ) 
```

我不需要那个输出。相反，我希望我的输出是**Marishka**，这是 first_name 字段的值。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:52:18.940

```
echo $result->first_name; 
```

你只需要回显出你想要的对象的一部分，而不是整个对象。并且作为记录，您不应该从视图中的模型获取任何数据，这一切都应该在控制器中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:32:30.343

我想你的问题已经解决了，但是下一次，你可以指定你希望从数据库中获取的特定列。

```
function member_here()
{
    //This is where your specify the column
    $this->db->select('first_name');
    $this->db->from('membership');
    $this->db->where('username',$this->input->post('username'));

    $q=$this->db->get();

    if($q->num_rows() > 0) {
        $data = array('first_name');
        foreach($q->result() as $row) {
            $data=$row;
        }
        return $data;
    }
} 
```

像这样。。

我希望这可以帮到你

# linux - 打开子进程python时出错

> ID：13331269
> 
> 赞同：0
> 
> 时间：2012-11-11T12:51:52.343
> 
> 标签：linux, python-2.7

尝试打开 txt 时出现此错误。文件。请告诉如何解决它。

```
code: subprocess.Popen("/home/yash/Documents/ct.txt")
      time.sleep(1)
error: 
     Traceback (most recent call last):
     File "/home/yash/Documents/final_downloader22.py", line 5, in <module>
     subprocess.Popen("/home/yash/Documents/ct.txt")
     File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
     errread, errwrite)
     File "/usr/lib/python2.7/subprocess.py", line 1259, in _execute_child
     raise child_exception
     OSError: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:02:02.187

文本文件通常不可执行。这里的“开放”是什么意思？

1.  这可能意味着“打开它以便我可以在程序中使用它”。

    这适用于`file_object = open('/home/yash/Documents/ct.txt', 'r')`然后使用 that `file_object`。

2.  这也可能意味着“让文件类型的关联应用程序打开文件以便用户可以编辑它”。

    在这种情况下，您必须找出关联的应用程序是什么。如何执行此操作取决于您使用的操作系统以及窗口管理器/桌面环境。不能用几句话来回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:56:08.737

您可以使用[`webbrowser`模块](http://docs.python.org/2/library/webbrowser.html)在脚本中以可移植方式打开文本文件进行编辑：

```
import webbrowser

webbrowser.open("/home/yash/Documents/ct.txt") 
```

从命令行：

```
$ python -mwebbrowser "/home/yash/Documents/ct.txt" 
```

另请参阅[“添加 shutil.open”Python 问题](http://bugs.python.org/issue3177)的补丁。

# c# - 以最佳方式捕获站点上的所有异常

> ID：13331270
> 
> 赞同：3
> 
> 时间：2012-11-11T12:52:06.087
> 
> 标签：c#, asp.net, error-handling

我试图找出一种方法来捕获站点上的所有异常并存储它们，问题是我不想去尝试捕获所有内容。

我已经找到了自定义错误页面的解决方法，我正在这样做，但我想作为管理员知道用户何时遇到错误，以及什么错误。而且我知道必须有一种方法可以全局获取所有异常并存储它们。

几天来，我一直在寻找解决方案，或者至少是一些正确的方法，但我发现的只是笨拙的方法。

所以我的问题是。有这样的一站式商店吗？我可以捕获异常并在一个地方执行存储过程，而无需在我的解决方案中的每个类中添加一些东西吗？在那种情况下，我在哪里运行我的存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:26:21.770

将 Global.asax 文件添加到您的 asp.net 项目并处理应用程序错误：

```
 void Application_Error(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();
        string errorMessage = "Application Exception: " + ex.Message;
        if (ex.InnerException != null)
        {
            errorMessage += Environment.NewLine + "Inner Exception: " + ex.InnerException.Message;
        }
        if (Context != null && Context.Request != null)
        {
            errorMessage += Environment.NewLine + "Absolute Url: " + Context.Request.Url.AbsolutePath;
        }
        Services.LoggerManager.Log(
           Services.LoggerManager.eLogContext.Application,
           Services.LoggerManager.eLogType.Error,
           Context, errorMessage);
    } 
```

这是 LoggerManager 部分：

```
public static class LoggerManager
{

    public enum eLogType
    {
        Information = 0,
        Warning = 1,
        Error = 2
    }

    public enum eLogContext
    {
        Application = 0,
        Session = 1
    }

    /// <summary>
    ///  Method for logging custom message
    /// </summary>
    /// <param name="logContext"></param>
    /// <param name="logType"></param>
    /// <param name="context"></param>
    /// <param name="message"></param>
    public static void Log(eLogContext logContext, eLogType logType, HttpContext context, string message)
    {
        switch (logContext)
        {
            case eLogContext.Application:
                //TODO: log application type event...
                break;
            case eLogContext.Session:
                //TODO: log session type event...
                break;
            default:
                throw new NotImplementedException("eLogContext '" + logContext.ToString() + "' is not implemented!");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:55:58.460

在 Global.asax 中，使用此事件

```
void Application_Error(object sender, EventArgs e) 
```

这是一个包含更多详细信息的链接[http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:17:17.820

我建议看看 ELMAH [http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)

它非常受欢迎，也可以从 nuget 获得。它旨在非常轻松地捕获和管理所有错误。如果您不想自己管理错误，我强烈推荐它。

# java - 如何获取排序数据使用namequery

> ID：13331274
> 
> 赞同：1
> 
> 时间：2012-11-11T12:52:36.717
> 
> 标签：java, mysql, hibernate

为了使用hibernate从db中获取排序值，我使用这个NamedQuery：

```
@NamedQuery(
    name = "searchnearestdesc",
    query = "select t FROM Result t WHERE t.indec=:e"
        + "t.var<=:f ORDER BY var DESC"
    ) 
```

但是，我得到了异常，我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:02:53.647

您的子句之间需要一个 AND，连接字符串时也不要忘记尾随空格；）

```
@NamedQuery(
name = "searchnearestdesc",
query = "select t FROM Result t WHERE t.indec=:e AND "
    + "t.var<=:f ORDER BY var DESC"
) 
```

# javascript - Javascript - 在服务器上测试浏览器代码

> ID：13331275
> 
> 赞同：0
> 
> 时间：2012-11-11T12:52:37.320
> 
> 标签：javascript, node.js, testing

我们有一个 node.js 应用程序，可以在合作伙伴网站上显示内容。我们的合作伙伴在他们的 HTML 模板中包含一些 javascript 代码，指向我们的服务器，然后我们使用加载我们代码的页面的 URL 来确定要显示的内容。作为第三方脚本，我们主要依靠 document.referrer 来获取包含页面的 URL，但有时我们被包含在 iframe 中，这使事情变得复杂。我们希望通过编写一个全面的测试套件来使这段代码更加健壮。

有没有一种好方法可以在服务器上测试这种类型的功能？我们需要模拟一个支持 javascript 的浏览器，它需要像普通浏览器一样报告引荐来源网址。我们还需要能够通过模拟域名、端口等来测试服务器上的跨域问题。

为此最好使用 node.js，但这不是必需的。

# codeigniter - 如何在插入数据库之前验证重复条目 - Codeigniter

> ID：13331276
> 
> 赞同：0
> 
> 时间：2012-11-11T12:52:43.783
> 
> 标签：codeigniter

我开发了简单的应用程序，我从数据库中动态生成了网格中的复选框，但我的问题是当用户从网格中选择复选框和其他必填字段并按下提交按钮时，它会添加重复值，所以我想知道如何检查将数据提交到数据库时，复选框值和具有数据库值的其他字段值。

以下代码我用来生成所有选定的项目，然后也保存 db

```
 foreach ($this->addattendee->results as $key=>$value)
{
//print_r($value);
$id = $this->Attendee_model->save($value);
} 
```

我正在使用codeigniter ....任何人都可以用示例代码给出这个想法吗？

```
 {
    $person = $this->Person_model->get_by_id($id)->row();
    $this->form_data->id = $person->tab_classid;
    $this->form_data->classtitle = $person->tab_classtitle;
    $this->form_data->classdate = $person->tab_classtime;
    $this->form_data->createddate = $person->tab_crtdate;
    $this->form_data->peremail = $person->tab_pemail;
    $this->form_data->duration = $person->tab_classduration;

    //Show User Grid - Attendee>>>>>>>>>>>>>>>>>>>>>>>>
    $uri_segment = 0;
    $offset = $this->uri->segment($uri_segment);
    $users = $this->User_model->get_paged_list($this->limit, $offset)->result();
    // generate pagination
    $this->load->library('pagination');
    $config['base_url'] = site_url('person/index/');
    $config['total_rows'] = $this->User_model->count_all();
    $config['per_page'] = $this->limit;
    $config['uri_segment'] = $uri_segment;
    $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();
    // generate table data
    $this->load->library('table');
    $this->table->set_empty("&nbsp;");
    $this->table->set_heading('Check', 'User Id','User Name', 'Email', 'Language');
    $i = 0 + $offset;
    foreach ($users as $user)
    {
        $checkarray=array('name'=>'chkclsid[]','id'=>'chkclsid','value'=>$user->user_id);
        $this->table->add_row(form_checkbox($checkarray), $user->user_id, $user->user_name, $user->user_email,$user->user_language
        /*,anchor('person/view/'.$user->user_id,'view',array('class'=>'view')).' '.
        anchor('person/update/'.$user->user_id,'update',array('class'=>'update')).' '.
        anchor('person/showattendee/'.$user->user_id,'Attendee',array('class'=>'attendee')).' '.
        anchor('person/delete/'.$user->user_id,'delete',array('class'=>'delete','onclick'=>"return confirm('Are you sure want to delete this person?')"))*/ );
    }
    $data['table'] = $this->table->generate(); 
```

//结束网格代码

```
 // load view
    // set common properties
    $data['title'] = 'Assign Attendees';
    $msg = '';
    $data['message'] = $msg;
    $data['action'] = site_url('person/CreateAttendees');
    //$data['value'] = "sssssssssssssssssss";
    $session_data = $this->session->userdata('logged_in');
    $data['username'] = "<p>Welcome:"." ".$session_data['username']. " | " . anchor('home/logout', 'Logout')." | ". "Userid :"." ".$session_data['id']; "</p>";
    $data['link_back'] = anchor('person/index/','Back to list of Classes',array('class'=>'back'));
    $this->load->view('common/header',$data);
    $this->load->view('adminmenu');
    $this->load->view('addattendee_v', $data);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T09:57:11.620

也许我和你有同样的麻烦。这就是我所做的。

```
<?php
public function set_news(){
        $this->load->helper('url');

        $slug = url_title($this->input->post('title'), 'dash', TRUE);

        $query = $this->db->query("select slug from news where slug like '%$slug%'");
        if($query->num_rows()>=1){
            $jum = $query->num_rows() + 1;
            $slug = $slug.'-'.$jum;
        }

        $data = array(
            'title' => $this->input->post('title'),
            'slug' => $slug,
            'text' => $this->input->post('text')
        );

        return $this->db->insert('news', $data);        
    }
?> 
```

然后它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:47:11.263

代码非常混乱，但我认为我在我的应用程序中解决了一个类似的问题，我不确定它是否是最好的方法，但它可以工作。

```
function save_vote($vote,$show_id, $stats){
    // Check if new vote
    $this->db->from('show_ratings')
            ->where('user_id', $user_id)
            ->where('show_id', $show_id);
    $rs = $this->db->get();
    $user_vote = $rs->row_array();
            // Here we are check if that entry exists
    if ($rs->num_rows() == '0' ){
        // Its a new vote so insert data

        $this->db->insert('show_ratings', $rate);

    }else{
        // Its a not new vote, so we update the DB. I also added a UNIQUE KEY to my database for the user_id and show_id fields in the show_ratings table. So There is that extra protection.
        $this->db->query('INSERT INTO `show_ratings`  (`user_id`,`show_id`,`score`) VALUES (?,?,?) ON DUPLICATE KEY UPDATE `score`=?;', array($user_id, $show_id, $vote, $vote));
        return $update;
    }
} 
```

我希望这个代码片段能让你知道该怎么做。

# javascript - 发生错误时自动重新加载图像的图像加载事件

> ID：13331284
> 
> 赞同：1
> 
> 时间：2012-11-11T12:54:31.560
> 
> 标签：javascript, jquery, load

如果出现错误，如何使用自动图像重新加载来构建`<img>`加载事件？

图像是通过以下方式创建的：

```
 var Img = $(document.createElement('img'));
 Img.on('load',function(){
  // Some code, this handler must be saved
 });
 Img.attr('src',path);
 Img.appendTo(... 
```

它使用的地方：http: [//vseslava.ru](http://vseslava.ru)，索引上的大圆圈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:59:22.107

您可以从此代码中使用：

```
$('#image1')
    .load(function(){
        $('#result1').text('Image is loaded!'); 
    })
    .error(function(){
        $('#result1').text('Image is not loaded!');
            // in this case you must reload image with jQuery
    }); 
```

这很简单，因为你有图像 url，你可以重新加载它并在图像中替换它。

**更新**

```
$("img").load(function(){
        $('#result1').text('Image is loaded!\n');
    })
    .error(function(){
        $('#result1').text('Image is not loaded!\n');
        // in this case you must reload image with jQuery
        var imgSrc = $(this).attr('src');
        $(this).attr('src',imgSrc);
}); 
```

[试用演示](http://jsfiddle.net/dKnJP/6/)

# heroku - Atlassian Bamboo 部署后的 Heroku 错误

> ID：13331290
> 
> 赞同：0
> 
> 时间：2012-11-11T12:55:06.640
> 
> 标签：heroku, bamboo

我正在使用 Atlassian Bamboo Heroku 插件来构建我的 Java Web 应用程序并将其部署到 Heroku。构建成功执行，然后将 war 文件上传到现在应该可用的 Heroku，但是，我得到了标准的 Heroku 应用程序错误页面，并且可以在我的 Heroku 日志中看到以下内容：

```
 2012-11-11T12:41:12+00:00 app[web.1]: INFO: Initializing Spring root WebApplicationContext
2012-11-11T12:41:17+00:00 app[web.1]:   at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
2012-11-11T12:41:17+00:00 app[web.1]:   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
2012-11-11T12:41:17+00:00 app[web.1]:   at java.util.concurrent.FutureTask.run(FutureTask.java:166)
2012-11-11T12:41:17+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
2012-11-11T12:41:17+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
2012-11-11T12:41:17+00:00 app[web.1]:   at java.lang.Thread.run(Thread.java:636)
2012-11-11T12:41:17+00:00 app[web.1]: Nov 11, 2012 12:41:17 PM org.apache.catalina.core.StandardContext startInternal
2012-11-11T12:41:17+00:00 app[web.1]: SEVERE: Error listenerStart
2012-11-11T12:41:17+00:00 app[web.1]: Nov 11, 2012 12:41:17 PM org.apache.catalina.core.StandardContext listenerStart
2012-11-11T12:41:17+00:00 app[web.1]: SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.util.Log4jConfigListener
2012-11-11T12:41:17+00:00 app[web.1]: java.lang.IllegalStateException: Cannot set web app root system property when WAR file is not expanded
2012-11-11T12:41:17+00:00 app[web.1]:   at org.springframework.web.util.WebUtils.setWebAppRootSystemProperty(WebUtils.java:137)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.springframework.web.util.Log4jWebConfigurer.initLogging(Log4jWebConfigurer.java:117)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.springframework.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:45)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
2012-11-11T12:41:17+00:00 app[web.1]:   at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
2012-11-11T12:41:19+00:00 app[web.1]: Nov 11, 2012 12:41:19 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
2012-11-11T12:41:19+00:00 app[web.1]: INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [2,144] milliseconds.
2012-11-11T12:41:19+00:00 app[web.1]: Nov 11, 2012 12:41:19 PM org.apache.catalina.core.StandardContext startInternal
2012-11-11T12:41:19+00:00 app[web.1]: SEVERE: Context [/] startup failed due to previous errors
2012-11-11T12:41:19+00:00 app[web.1]: SEVERE: Context [/] failed in [org.apache.catalina.core.StandardContext] lifecycle. Allowing Tomcat to shutdown.
2012-11-11T12:41:19+00:00 app[web.1]: Nov 11, 2012 12:41:19 PM org.apache.catalina.core.ApplicationContext log
2012-11-11T12:41:19+00:00 app[web.1]: INFO: Shutting down log4j
2012-11-11T12:41:19+00:00 app[web.1]: INFO: Closing Spring root WebApplicationContext 
```

如果我从我的控制台安装应用程序战争（使用 git push heroku master），它似乎一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:16:56.200

看起来如果我想使用 Log4jConfigListener，它只适用于扩展的 WAR。Bamboo Heroku 插件必须将其部署为未扩展，这导致了我的问题。我将删除 Log4jConfigListener，并以另一种方式重新配置日志记录。

从 Spring 日志（[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/Log4jConfigListener.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/Log4jConfigListener.html)）：

> 用于 Web 环境中自定义 log4j 初始化的引导侦听器。委托给 Log4jWebConfigurer（有关配置详细信息，请参阅其 javadoc）。警告：假设一个扩展的 WAR 文件，用于加载配置文件和写入日志文件。如果您想保持 WAR 未扩展或不需要 WAR 目录中特定于应用程序的日志文件，请不要在应用程序中使用 log4j 设置（因此，不要使用 Log4jConfigListener 或 Log4jConfigServlet）。相反，使用全局的、VM 范围的 log4j 设置（例如，在 JBoss 中）或 JDK 1.4 的 java.util.logging（也是全局的）。

# uitableview - 带有故事板的自定义静态 TableView - 单元格背景

> ID：13331291
> 
> 赞同：1
> 
> 时间：2012-11-11T12:55:14.690
> 
> 标签：uitableview, storyboard, customization

我正在使用故事板来制作静态表格视图。一切正常！

现在我想自定义表格视图单元格。

所以我添加了一个 tableViewController 并将其连接到情节提要视图。这是我用来自定义的代码：

```
-- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...

    UIColor *color = [[UIColor alloc] initWithRed:0.0 green:0.0 blue:0.0 alpha:0.0];

    cell.detailTextLabel.backgroundColor = color;

    cell.textLabel.backgroundColor = color;

    cell.backgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbackground.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];
    cell.selectedBackgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbackground_down.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

    return cell;
} 
```

但是如果我现在运行应用程序，表格视图是空的，并且没有自定义背景......

有人可以帮助我吗？:=)

劳伦兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:35:39.500

有两种方法可以为您的`tableview:static`单元格和动态原型设置单元格。实际上，对于静态单元格模式，您可以直接在 IB 中设置单元格的背景颜色。

如果您想使用`cellForRowAtIndexPath`方法来自定义您的单元格，您应该实现所有非可选方法，例如：`numberOfRowsInSection` `cellForRowAtIndexPath`

# grails - Grails表单提交导致404

> ID：13331292
> 
> 赞同：5
> 
> 时间：2012-11-11T12:55:17.033
> 
> 标签：grails

我创建了一个非常简单的表单来注册用户

```
<g:form name="signupForm" url="[controller:'users', action:'signup']">
  <g:textField name="username" placeholder="Username" />
  <g:passwordField name="password" placeholder="Password" />
  <g:textField name="email" placeholder="Email" />
  <g:actionSubmit class="right" value="Signup" action="update" />
</g:form> 
```

当我单击提交按钮时，我收到一个 404 错误`The requested resource is not available.`但是，如果我手动导航到完全相同的 URL（或者甚至只是选择 404 错误页面上的地址栏并按 Enter 键），那么它就可以工作了！

我的控制器看起来像这样，非常简单。

```
class UsersController {
    def signup() {
        render "Hello World"
    }
} 
```

抱歉，如果这是一个菜鸟问题，但我已经查看了 Grails 文档，但无法弄清楚为什么会发生这种情况。非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:39:20.403

g:actionSubmit 的参数 action="update" 会将其推送到不存在的 UsersController def 更新，因此它会抛出 404。

您可以删除 action="update" 或将该操作添加到控制器。

[http://grails.org/doc/latest/ref/Tags/actionSubmit.html](http://grails.org/doc/latest/ref/Tags/actionSubmit.html)

您还可以使用 ag:submitButton 代替。

[http://grails.org/doc/latest/ref/Tags/submitButton.html](http://grails.org/doc/latest/ref/Tags/submitButton.html)

# scala - awaitAll 在我的测试中不起作用

> ID：13331294
> 
> 赞同：0
> 
> 时间：2012-11-11T12:55:40.203
> 
> 标签：scala, actor, future

当我创建一个*临时的未来*并称之为它时，它工作正常。

```
scala> val f = 未来 {Thread.sleep(1000 * 60 * 1); println("你好"); 20}
f: scala.actors.Future[Int] =

scala> f()
你好
res39: 整数 = 20

```

当我创建相同的*未来*并调用`awaitAll`它时，它不起作用。就好像未来没有解决一样的`awaitAll`回报。`None`

```
scala> val f = 未来 {Thread.sleep(1000 * 60 * 1); println("你好"); 20}
f: scala.actors.Future[Int] =

scala> awaitAll(1000 * 60 * 2, f)
你好
res40: List[Option[Any]] = List(None)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:22:57.890

更喜欢被弃用`future`的。`Future`

怎么样：“更喜欢`Future`未来的未来`scala.concurrent`而`Future`不是过去的过去`scala.actors`，这已被弃用。”

像往常一样，Heather Miller 说得最好；见评论。

```
object Test extends App {
  import scala.concurrent._
  import Await._
  import Future._
  import duration._
  import ExecutionContext.Implicits.global

  val data = List(1,2,3)
  result(traverse(data)(i => future{10 * i}), Duration("10 sec")) foreach println
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:55:24.903

我希望能帮助你。

```
import scala.actors._

object StackOverFlow13331294 extends App {
    Futures awaitAll (1000 * 60 * 1,
            Seq(new StackOverFlow13331294 !! "execute"): _*) foreach println
}

class StackOverFlow13331294 extends Actor {
    start
    override def act = react {
        case "execute" =>
            // Thread sleep 1000 * 60 * 1 ?
            println("Hi")
            reply("20")
    }
} 
```

# azure - 序列化对象 Azure 移动服务

> ID：13331295
> 
> 赞同：4
> 
> 时间：2012-11-11T12:55:43.823
> 
> 标签：azure, azure-mobile-services

我正在尝试将对象序列化到 Azure 移动服务。

该对象包含第二个对象的数组，该对象也应该被序列化。

```
[DataContract()]
class ObjectA
{
    [DataMember(Name= "id")]
    public int Id { get; set; }

    [DataMember(Name = "info")]
    public string info{ get; set; }

    [DataMember(Name = "collectionOfB")]
    public ObjectB[] myArrayOfB{ get; set; }
}

[DataContract()]
class ObjectB
{
    [DataMember(Name= "id")]
    public int Id { get; set; }

    [DataMember(Name = "info")]
    public string info{ get; set; }
} 
```

我已经正确加载了两个表，并且可以在每个表中插入一个单独的项目。

但是，当我在表上为 objectA 调用 InsertAsync 方法时，我收到一个错误

```
Cannot serialize member 'myArrayOfB' of type 'namespace.ObjectB[]' declared on type 'ObjectA' 
```

关于我需要做些什么来解决这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:55:38.627

移动服务不支持数组的序列化。这里有两个很好的帖子，展示了您如何支持这一点：

*   [http://blogs.msdn.com/b/carlosfigueira/archive/2012/08/30/supporting-arbitrary-types-in-azure-mobile-services-managed-client-simple-types.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/08/30/supporting-arbitrary-types-in-azure-mobile-services-managed-client-simple-types.aspx)

*   [http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-implementing-1-n-table-relationships.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-implementing-1-n-table-relationships.aspx)

# function - MATLAB 是否支持前向声明？

> ID：13331299
> 
> 赞同：11
> 
> 时间：2012-11-11T12:56:03.267
> 
> 标签：function, matlab, forward-declaration

是否可以在 m 文件中使用一个函数，该函数在同一文件的后面部分实现：与其他编程语言（如 C）的风格相似？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T13:11:11.620

当然。

在这样的 m 文件中，局部函数将在主函数之后声明。例如：

```
function y = main_func(x)
% # This is the main function
y = helper_func1(x) .* helper_func2(x);  % # Just an example

function h1 = helper_func1(x)
% # This is a helper function #1
h1 = x + 2;                              % # Just an example

function h2 = helper_func2(x)
% # This is a helper function #2
h2 = x * 2;                              % # Just an example 
```

在这个例子`main_func`中可以调用`helper_func1`并且`helper_func2`没有任何问题。您可以测试运行它并亲自查看：

```
 >> main_func(8)

   ans =        
       160 
```

不需要任何前向声明。

顺便说一句，MATLAB自带的很多m文件都是这样实现的。例如，[`corrcoef`](http://www.mathworks.com/help/matlab/ref/corrcoef.html). 使用`type corrcoef`，您可以看到。

注意：在提示符或脚本中不允许本地函数定义，因此您必须在 m 文件中声明“主”函数。作为练习，将我的示例复制粘贴到一个新的 m 文件中，删除`main_func`（仅第一行）的声明，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:00:36.543

您可以使用相同的 m 文件使用静态类来实现许多功能：

[MATLAB 的一个函数 = 一个文件的最初原因是什么，为什么仍然如此？](https://stackoverflow.com/questions/12414041/what-was-the-original-reason-for-matlabs-one-function-one-file-and-why-is-it/12414225#12414225)

# c# - C#中的CMap有4个参数

> ID：13331303
> 
> 赞同：1
> 
> 时间：2012-11-11T12:56:27.597
> 
> 标签：c#, mfc

我在 c# 中移植了一个 c++ MFC 类，但我遇到了问题。

c++ 类有一个

```
CMap<int,int,CString,CString>MapIndexNote; 
```

如何在 c# 中创建等效项？我已经阅读过有关字典和 Hastables 的信息，但我对 4 个参数有困难。

非常感谢，

尼克修斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:16:45.097

等效的是`Dictionary<int, string>`。

查看[CMap 的定义](http://msdn.microsoft.com/en-us/library/s897094z(v=vs.80).aspx)可以看到，第 2 和第 4 类型的存在只是为了让您指定第 1 和第 3 类型是通过引用传递还是通过值传递。

C# 将半自动地做正确的事情：因为包括所有值类型在内的所有值类型`int`都是按值传递的，而包括引用类型在内`string`的引用类型作为（引用计数的）引用传递（但是请注意，[“引用”在 C# 中并不意味着同样的事情就像在 C++ 中一样](https://stackoverflow.com/q/1096449/49942)）。

# ruby-on-rails - Rails friendly_id 页面仍然可以通过记录 id 获得

> ID：13331305
> 
> 赞同：3
> 
> 时间：2012-11-11T12:56:30.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, friendly-id

我在我的 rails 应用程序中使用 friendly_id gem 来创建漂亮干净的 url。效果很好，但是该页面也可以通过 te 记录 id 获得。

例子：

我有一个“名字”作为蛞蝓的记录。该记录有 1 个 ID。

因此该页面可以从 2 个 url 获得：

domain.com/name

和

domain.com/1

我只想使用 domain.com/name，所以我不希望可以从 domain.com/1 访问该页面。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T13:33:44.760

来自作者本人*（谷歌是你的朋友；这是搜索时的最高结果`friendly_id disable find id`）*：[https ://github.com/norman/friendly_id/issues/146](https://github.com/norman/friendly_id/issues/146)

> 什么版本的FriendlyId？
> 
> 对于 4.x，只需使用 find_by_slug 而不是 find。
> 
> 在 3.x 中，您可以使用 find_by_cached_slug，或检查找到的结果的friendly_id_status，如果使用非友好 ID 找到记录，则会引发错误。

无论哪种方式，您都需要将出现的 替换`find`为上述替代方法之一，以告诉您的应用程序忽略该`:id`列。

# c - 在 flex 中创建简单的规则

> ID：13331306
> 
> 赞同：0
> 
> 时间：2012-11-11T12:56:31.603
> 
> 标签：c, flex-lexer, lexical-analysis, lexical

我需要在我的 lex 文件中制定一个规则，该规则将识别换行符的开始和我这样做的一系列空格，`^( )*`但编译器说这是错误的，定义它的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:04:48.707

尝试这样的事情：

```
^[\n\t ]+ 
```

# java - 试图用java和clojure在eclipse中创建maven动态web项目

> ID：13331309
> 
> 赞同：0
> 
> 时间：2012-11-11T12:56:36.637
> 
> 标签：java, eclipse, maven, clojure

我在 Eclipse 中创建了 maven-archetype-webapp 项目。我想在 Java 中使用 Clojure 代码。所以，有我的 core.clj 文件：

```
(ns coq.core
 (:gen-class
   :name coq.core
    :methods [#^{:static true} [foo [int] void]]))

(defn -foo [i] (println "Hello from Clojure. My input was " i))

(defn -main [] (println "Hello from Clojure -main." )) 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>gleboGroup</groupId>
<artifactId>javaandclojure</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>javaandclojure Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.1-b02</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.clojure</groupId>
        <artifactId>clojure</artifactId>
        <version>1.3.0</version>
    </dependency>
</dependencies>
<build>
    <finalName>javaandclojure</finalName>
    <plugins>
        <plugin>
            <groupId>com.theoryinpractise</groupId>
            <artifactId>clojure-maven-plugin</artifactId>
            <version>1.3.10</version>
            <configuration>
                <sourceDirectories>
                    <sourceDirectory>src/main/clojure</sourceDirectory>
                </sourceDirectories>
                <testSourceDirectories>
                    <testSourceDirectory>src/test/clojure</testSourceDirectory>
                </testSourceDirectories>
            </configuration>
            <executions>
                <execution>
                    <id>compile</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
                <execution>
                    <id>test</id>
                    <phase>test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <executions>
                <execution>
                    <id>default-compile</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
                <execution>
                    <id>default-testCompile</id>
                    <phase>test-compile</phase>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

我的单个 servlet 在 core.foo(123) 上有错误：

```
package com.javaandclojure;

import java.io.IOException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.ServletException;
import javax.servlet.http.*;

import coq.*;

@WebServlet({ "/*"})
public class Main extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        System.out.println("inside get!");
        core.foo(123);// core cannot be resolved
        request.setAttribute("number", 42);
        request.getRequestDispatcher("/index.jsp").forward(request, response);
    }
} 
```

日食的一些截图：

![在此处输入图像描述](../Images/d7feb7fee6385f34f5c028fb7ce5b9b1.png)

构建路径：

![在此处输入图像描述](../Images/60f29fe1df35e90361f348f12b3a5a35.png)

Maven Build with targets:" clean package" 给它：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building javaandclojure Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ javaandclojure ---
[INFO] Deleting D:\porn\indigo\javaandclojure\target
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ javaandclojure ---
[WARNING] Using platform encoding (Cp1251 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ javaandclojure ---
[WARNING] File encoding has not been set, using platform encoding Cp1251, i.e. build is platform dependent!
[INFO] Compiling 1 source file to D:\porn\indigo\javaandclojure\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] \porn\indigo\javaandclojure\src\main\java\com\javaandclojure\Main.java:[10,10] error: package coq does not exist
[ERROR] \porn\indigo\javaandclojure\src\main\java\com\javaandclojure\Main.java:[17,2] error: cannot find symbol
[INFO] 2 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.042s
[INFO] Finished at: Sun Nov 11 16:28:25 EET 2012
[INFO] Final Memory: 8M/20M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project javaandclojure: Compilation failure: Compilation failure:
[ERROR] \porn\indigo\javaandclojure\src\main\java\com\javaandclojure\Main.java:[10,10] error: package coq does not exist
[ERROR] \porn\indigo\javaandclojure\src\main\java\com\javaandclojure\Main.java:[17,2] error: cannot find symbol
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

也许我应该使用另一个 Maven 原型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:01:06.083

这是因为 Java 编译器在 clojure 编译器之前运行。

如果你强制 Java 编译在`clojure-maven-plugin`它工作之后发生。**在后面**添加这些行`clojure-maven-plugin`：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <executions>
        <execution>
            <id>default-compile</id>
            <phase>none</phase>
        </execution>
        <execution>
            <id>default-testCompile</id>
            <phase>none</phase>
        </execution>
        <execution>
            <id>java-compile</id>
            <phase>compile</phase>
            <goals>
                <goal>compile</goal>
            </goals>
        </execution>
        <execution>
            <id>java-testCompile</id>
            <phase>test-compile</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:15:02.430

我建议您创建一个包含 2 个模块的项目，以便清楚什么取决于什么。如果您的 Java 代码必须依赖于 Clojure 代码，那么 java 模块（war？）应该依赖于 clojure 模块。

# php - 使用 PHP 进行基本导航

> ID：13331312
> 
> 赞同：0
> 
> 时间：2012-11-11T12:57:18.207
> 
> 标签：php, string, function, navigation, indexing

我们有一个使用 HTML/PHP 的学校项目，我们需要创建一个网页。问题是只能有一个索引（或主页），其余的是其他 .html 文档中的一小部分代码。

我需要找到一种方法来创建一个函数（我认为......）所以当我点击其中一个链接时，这将改变 <body id>、<title>，并将在 < div>（代码的一小部分）。

恢复：有5个分类，点击后，每一个都要改变<body id>属性，<title>，在<div>中加载不同的.html页面。很抱歉，如果你们中的一些人觉得这令人讨厌，但我真的需要一些帮助。

到目前为止，这就是我所拥有的：

```
<?php
    $id0="" . $id1;     //default
    $id1="home";
    $id2="iso";
    $id3="lm";
    $id4="par";
    $id5="itasir";
    $id6="fh";
?>

<body id="<?php echo $id0; ?>"> 
```

其中 $id1-6 应该是类别，id0 是计数器或应该加载的页面的指针。前任。当我单击“Par”链接时， $id0 将更改为 "" 。$id4; 并且身体现在会加载包含 id4 的 id0 ......我想......应该是这样。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:21:58.943

有几件事要读——学习很棒，但当然只是得到代码很糟糕。

```
<?php
    $id0="" . $id1;     //default
    $id1="home";
    $id2="iso";
    $id3="lm";
    $id4="par";
    $id5="itasir";
    $id6="fh";
?> 
```

会更有意义：

```
<?php
    $id = array();
    $id[0]="" . $id[1];
    $id[1]="home";
    $id[2]="iso";
    $id[3]="lm";
    $id[4]="par";
    $id[5]="itasir";
    $id[6]="fh";
?> 
```

这样您就可以轻松地使用数字来获得所需的数字。

您可能会在 URL 中使用变量，使用`$_GET`.

如果 URL 是`http://www.example.com/index.php?page=1`，则`$_GET['page']`等于`1`。

这使您可以编写一些基于 URL 执行不同操作的 PHP。

然后，您可能会使用`file_get_contents`(http://php.net/manual/en/function.file-get-contents.php) 加载正确文件的内容。

简单的！

# python - Sublime Text2、python 模块和 AquaTerm

> ID：13331313
> 
> 赞同：0
> 
> 时间：2012-11-11T12:57:28.347
> 
> 标签：python, module, sublimetext2

我正在使用 Sublime Text2 在 Python 中编写一些脚本，最后我想用 Gnuplot 绘制一些值。在努力让 ST2 找到 Gnuplot 模块（解决方案：[https](https://stackoverflow.com/a/9919953/315168) ://stackoverflow.com/a/9919953/315168 ）后，我在构建时收到此错误消息：

```
gnuplot> set terminal aqua
                  ^
     line 0: unknown or ambiguous terminal type; type just 'set terminal' for a list 
```

我*安装*了 AquaTerm，但与 Gnuplot 模块一样，ST2 似乎无法与我的大部分系统进行通信。与 Gnuplot 一样，AquaTerm 是使用 Macports 安装的，并且在终端上运行顺畅。

有没有办法让 ST2 主要检查系统，然后在构建时它自己的包？还是我在这里错过了 ST2 的一些东西？我的 python.sublime-build 文件如下所示：

```
{
"path": "/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",
"env": {"PYTHONPATH":"/usr/local/lib/:/usr/local/bin/python2.7"},
"cmd": ["python2.7", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python"
} 
```

# winapi - 错误 D8016：“/ZI”和“/clr”命令行选项不兼容

> ID：13331318
> 
> 赞同：22
> 
> 时间：2012-11-11T12:59:14.267
> 
> 标签：winapi, visual-c++, opencv

我的程序中出现以下错误：

```
 error D8016: '/ZI' and '/clr' command-line options are incompatible 
```

当我输入以下行并在 configuration->General 中启用 common runtime 时会发生这种情况（如果我不启用它，那么使用 system 和 System::Drawing 时会出现错误）

```
#using <system.drawing.dll>
using namespace System;
using namespace System::Drawing; 
```

实际上，我将在我的代码中使用一些需要上述 dll 的 windows 库。

如何解决这个问题？

```
#include "opencv2/highgui/highgui.hpp"
#include <opencv2/imgproc/imgproc_c.h>
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <ctype.h>
#using <system.drawing.dll>
using namespace System;
using namespace System::Drawing;
using namespace std;

int main( int argc, char** argv )
{
IplImage *source = cvLoadImage( "Image.bmp");
// Here we retrieve a percentage value to a integer
int percent =20;
// declare a destination IplImage object with correct size, depth and channels
  IplImage *destination = cvCreateImage
( cvSize((int)((source->width*percent)/100) , (int)((source->height*percent)/100) ),
                                 source->depth, source->nChannels );
//use cvResize to resize source to a destination image
cvResize(source, destination);
// save image with a name supplied with a second argument
   cvShowImage("new:",destination);
  cvWaitKey(0);
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-07-24T03:05:04.023

在视觉工作室中关闭`/ZI`：

1.  打开项目的属性页对话框。
2.  单击 C/C++ 文件夹。
3.  单击常规属性页。
4.  修改调试信息格式属性 - 将其设置为“无”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-10T08:16:00.483

除了 PGP 的答案建议之外，还考虑更改`C/C++ -> Optimization -> Optimization`为*Disabled (/Od)*。

将其设置为*最大优化（优先速度）（/O2）*可能会在编译调试时给您带来问题。

-O2 这是一定程度的编译时优化。谷歌关于它的作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-01T18:39:47.040

在 VS2017 中：

*   \ZI 由 C/C++>General>Debug Information Format = Program Database for Edit and Continue 设置
*   \GL 由 C/C++>Optimization>Whole Program Optimization = Yes 设置

我复制了一个我想用作调试配置的配置并遇到了这个问题。

# algorithm - 多重嵌套循环索引

> ID：13331321
> 
> 赞同：1
> 
> 时间：2012-11-11T12:59:34.133
> 
> 标签：algorithm, math

我有多个（N）嵌套循环，如下所示：

```
int k = 0;
for (int i1 = 0; i1 < n; i1++)
{
  for (int i2 = 0; i2 <= i1; i2++)
  {
    for (int i3 = 0; i3 <= i2; i3++)
    {
       ...
            for (int iN = 0; iN <= i{N-1}; iN++)
            { 
              k++;
              //k = f(i1, ... , iN);
            }
    } 
  } 
} 
```

我需要一个公式来进入`k`基于`i1`, ... ,的循环`iN`。

对于`N=1`：`k=f(i1)=i1`

对于`N=2`：`k=f(i1,i2)=i1*(i1+1)/2+i2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:28:38.197

一般来说，你有一个嵌套的 sum ：

```
sum(sum(sum(1,i3=0..i2),i2=0..i1),i1=0..n-1) 
```

您可以使用[这些基本的求和公式](http://www.math.com/tables/expansion/power.htm)从内到外进行简化。最终结果将仅取决于 izomorphius 评论的 N，因为 N 是 i1 的上限，即 i2 的上限，...

**编辑：**好的，通过您的编辑，我现在看到您有不同的问题。现在它有点复杂，但仍然没有问题。

我们需要为此拆分一些东西。我将计算值 k= f(4,3,1)。在那个时间点，我们将执行 4 次完整的 i1 循环（i1=0,1,2,3）并且正在执行第五次。i1(=k_i1) 的 4 个完整循环后的 k 值（就在我们开始第五次之前）可以使用此函数计算（与以前相同）。

```
k_i1=sum(sum(sum(1,i3=0..i2),i2=0..l),l=0..i1-1) = f1(i1); 
```

现在我们开始第 5 个循环并对 i2 循环执行相同的操作。那时，我们将完成 3 个完整的 i2 循环，因此我们得到

```
k_i2=sum(sum(1,i3=0..l),l=0..i2-1)=f2(i2); 
```

这适用于所有循环。要获得最终值，您必须添加每个 fi 函数。k 看起来像

```
k=k_i1+k_i2+... 
```

我的解释中可能存在一些小 (+-1) 错误，但基本思想是使用公式来计算完整循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:44:29.640

我想我们可以把这个问题看作是**与重复**问题的组合。答案是 C(n+N-1,N)。您可以查看维基百科的[组合部分](http://en.wikipedia.org/wiki/Combination)以获取更多详细信息。希望能帮助到你！

# random - 生成包含随机元素的表格

> ID：13331329
> 
> 赞同：-1
> 
> 时间：2012-11-11T13:00:24.240
> 
> 标签：random, ada, tabular

我是 Ada 编程的新手。我正在尝试生成一个 80 列和 40 行的表，每个案例都随机填充 M 或 V。任何有关如何创建此类表的帮助将不胜感激！

这是我目前在 .ads 中的表格：

```
 package Life is
type Grid is (mort, vivant);
     type TableauCell is array ( 0..80, 0..40 ) of Grid;
procedure Grid_Random_Fill(A : in out Grid);
end Life; 
```

和随机化：

```
 with Ada.Text_IO, Ada.Integer_Text_IO, Ada.Numerics.Discrete_Random ;
use Ada.Text_IO, Ada.Integer_Text_IO;

package body Life is

procedure Grid_Random_Fill is
         type  Life is (V, M);

   package Random_Life is new Ada.Numerics.Discrete_Random (Life) ;
   use Random_Life ;
   G : Generator ;
 begin
   Reset (G) ; -- intialise the generator
   loop
 Case Random(G) is
 when V => 
      put("V"); -- put V in table
 when M =>
    put("M"); -- put M in table
   end case;  
    end loop ;
end Grid_Random_Fill;
       end life; 
```

不幸的是，我无法编译它——而且我看不到如何自动将 M 和 V 生成到我的表中。我不确定我是否清楚，我对编码很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:10:42.827

这听起来有点像家庭作业，所以这将保持一些抽象。

声明一个二元素类型来表示 M 和 V。

声明该类型的 80x40 数组。

使用该类型实例化[Ada.Numerics.Discrete_Random 。](http://www.ada-auth.org/standards/12rm/html/RM-A-5-2.html#I6105)

遍历数组边界，通过调用随机数包的 Random() 函数来设置每个数组元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:54:00.040

既然这有功课的感觉，那么一个过于复杂、过于笼统的例子呢？一切正常，除了随机化，这是留给读者的练习。

`Test_Table.adb`

```
With
Tabling,
Ada.Streams.Stream_IO,
Ada.Text_IO.Text_Streams;

Use
Ada.Text_IO;

Procedure Test_Table is
    -- Here we declare a stream and associate it with the standard-output, 
    -- this can easily be altered to any file. Yay streams!
    Output : Access Ada.Streams.Root_Stream_Type:= 
        Ada.Text_IO.Text_Streams.Stream( Standard_Output );

    Package test is new Tabling( Rows => 40, Cols => 80 );

    temp : test.Table;

Begin
    -- A single line to write the table.
    Test.Table'Write( Output, temp );
    New_Line;
End Test_Tables; 
```

现在是不是很好很简单？好吧，这里是过于复杂和过于笼统的部分：规范和实现！

`Tabling.ads`

```
Pragma Ada_2012;
With Ada.Streams;
Generic
 Rows : Positive := 3;
 Cols : Positive := 4;
Package Tabling is 
-- Tables with rows or columns exceeding 200 are absurd, so we disallow them.
Maximum : constant:= 200;
Pragma Assert (Rows <= Maximum and Cols <= Maximum);

-- Table is a private entity.
Type Table is private;

-- Forward declaring the rows and columns here.
Type Col is private;
Type Row is private;
Private
Use Ada.Streams;

-- We are defining a type with elements of 'V' or 'M'.
Type Element_Type is ( 'M', 'V' );
-- We are declaring a stream writing function.
Procedure Write(
    Stream  : access Root_Stream_Type'Class;
        Item    : in Element_Type);
-- We are overriding the default write function with the one we defined.
For Element_Type'Write use Write;

-- Because we don't want an allocation wrror we restrict index-ranges to
-- a more reasonable value.
SubType Short_Positive is Positive Range Positive'First..Maximum;

-- We create subtypes representing the ranges that Rows or Columns take.
subtype column_index is Short_Positive Range Positive'First..Cols;
subtype row_index    is Short_Positive Range Positive'First..Rows;

-- Here we define stream-writing functions for rows and columns.
Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Col);
Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Row);
-- Here we override the stream-writing methods for rows and columns.
For Col'Write Use Write;
For Row'Write Use Write;

-- Here we finally define Rows and Columns.
Type Col is Array(column_index)of Element_Type;
Type Row is Array( row_index ) of Col;

-- THIS IS A STUB, SUBSTITUTED FOR YOUR CALL TO RANDOM.
Function RANDOM_CALL Return Element_Type is ( 'M' );

-- Finally we define the stream-writing for a table...
Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Table);

-- and define what a table is...
Type Table is record
Data : Row:= ( others => (others => RANDOM_CALL) );
end record;
-- finishing off by assigning our write function to the type.
For Table'Write Use Write;  

End Tabling; 
```

`Tabling.adb`

```
package body Tabling is
-- Quick definition of the new-line, windows-style.
New_Line : Constant String:= ASCII.CR & ASCII.LF;

-- Implementations of our stream writing functions.
Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Element_Type) is
-- Convert takes the element-type and transforms it into a character.
Function Convert (Input : Element_Type:= Item) Return Character is
begin
    -- A simple mapping using case, it also has the advantage of raising
    -- a compiler error should the valuse "Element_Type" can take change.
    case Input is
    when 'M' => return 'm';
    when 'V' => return 'v';
    end case;
end Convert;
begin
Character'Write( Stream, Convert );
end Write;

Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Col) is
begin
-- Using the new-style for-loop, we iterate over the given columns,
-- taking care to wrap the elements in the table's cell-definition tag.
for Element of Item loop
    String'Write( Stream, ASCII.HT & "<td>" );
    Element_Type'Write( Stream, Element );
    String'Write( Stream, "</td>" & New_Line );
end loop;
end Write;

Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Row) is
begin
-- Using the new-style loop, we iterate through the row, wrapping each
-- in the table-row tag, <tr>.
for Element of Item loop
    String'Write( Stream, "<tr>" & New_Line);
    col'Write( Stream, Element );
    String'Write( Stream, "</tr>" & New_Line);
end loop;
end Write;

Procedure Write(
    Stream  : access Root_Stream_Type'Class;
    Item    : in Table) is
begin
-- Start the table.
String'Write(Stream, "<Table>" & New_Line);
-- Write out the rows.
Row'Write   (Stream, Item.Data );
-- End the table.
String'Write(Stream, "</Table>");
end Write;

End Tabling; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:51:44.593

Grid_Random_Fill 的过程主体需要与规范一致，即：

```
procedure Grid_Random_Fill(A : in out Grid); 
```

正文不包括参数 A。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T14:07:04.220

简单的答案：

```
with Ada.Numerics.Discrete_Random;
with Ada.Text_Io;

procedure Main is

   type Cell_T is (M,V);
   type Rows_T is new Integer Range 1 .. 40;
   type Cols_T is new Integer Range 1 .. 80;
   type Grid_T is array (Rows_T,Cols_T) of Cell_T;
   package Rand is new Ada.Numerics.Discrete_Random (Cell_T);

   G : Rand.Generator;
   Grid : constant Grid_T := (others => (others => Rand.Random(G)));

begin

   for R in Rows_T'range loop
      for C in Cols_T'range loop
         Ada.Text_Io.Put (Cell_T'Image (Grid (R,C)));
      end loop;
      Ada.Text_Io.New_Line;
   end loop;

end Main; 
```

输出 ：

```
$ ./main
VMMVVMMMVMMMVVVMMMVVVMMVVVMVVVVMMMMVMMMMVVMVMVVMMVMMMVVMMMMVMMVMMVMMMMVMMVVMVVMM
VVVMVVVVMMMMMMVVMVMMVMMMVMMMVVMVVVVVMVVVMVMVVVMVMVVVMVMMMVMVVVMVMMVVVMVVMVVVVVMM
VVMVVVVVVVMVVVVMVVVMVVMMVMVVVMVMMMVMMMVVVMMMVVVMMMMMVVVVMVMVVVVVVVMMVVMVMVMMVVVM
VMMVVMVMVVMVMVVMMVMMVMVVMVMVMMVVMMVVMMVMVVVVVVMVMVMMMMMMVMVVVMMVMMMMVMVVVVMVMVVM
VVVVMMMMMVVMMMMVVMMMVMMMVVMVVVMMMMMMVMVMMVMMVVVMMVMMMMVVMVMVMMMMVMMMVMVVVVMMMVMM
VMMVVMMMMMVVMMMVVVVMMVMMVVVVVVVVVVMVMVMVVVVVVVVMVMVMVVMVMMMMMVMMVVVVVVVVMVVVVVVV
VVMMMMVVVMMVMVMVMVVMMMMMVMVVVVMMVVMVVVMMMMMMMMMMMMMVMMVVMVVMVMMVMMMVVVMMMVVVMVVV
MVMVMMVMVVVMVVVVVVVMMMMVVVMMVVVMVMMVVMVVVMVMVMMMMVVVVMVVMMVMVMVVVMVMMVMMMVVMVVVV
MMVMMVMMMVVVVMVVVVVVVMVVVVMMMVMMMVMVMMMVMVVVMVMMVMVMVMVVMMMVVVVVMVVMVMVMVVMMMVVV
VVMMMMMMMVMVVMVMVVVMVVMVMMMMMVVVVVVVMVMMVVMMMMVVVMVVMVVMVVVVMMVVVVMMMMVMMVMMMMMM
VVVMMMMVMMVVVVVMVVMVVMVMMMMMMVMMMMVVMVVVMVMVVMMVVMMMVVMMMVMVVVVVMMVVVMVVVMMVVMMM
VMVVMMVMVVVMMMVVVVMMMMVVVMVVVVMMMVMVVVVMMMVVVMVVMMVVVMVMMMVMMVVVMVMMMMMMVMVVVMVV
VMVMMMVMMMVMMMMMMVMMMVVMMMMVMMMVVMMVMMMVVMVVVMMMMVMVMVMVVMMVMMMVVMVVMVMMMMVMVMMM
VMVVVMMMMMVMMMMVVVVMMMVVMMVVMVVMVMVVMVVVVMVMMVMMVMMVMVVMVVVVVVMMMMVMVMMMVVVMMVVV
VVMVVMVMVVVMMMMMVVVMVMVVMVMVMMVVVMVVMMVMMVMMVVMVMMMMVMVVMMMVVMVMMMMMMMMVMVMMVVVM
MVVVVVMMVVMMMVMVMVMVMVVMMMVVMMVMVMVVVMVVVVVMMMMVVVMVVMVVMVVVVVVVVMMVMMVVVVVVVVMV
MVMMMMVMMVVVVVMMMVMVVVMVVMVVMVVVVMVVVMVVMVVMMVVVMVMVVMMMVVMMMMVVMMMVMVMMMMVMMMVV
MVVMVMVVMMVMVMMVMVVVMVVVVVVVVVVVVMVMMVVMMVMMMVVVMMVMMMMVVMVMVMVMVMVVVMMMMVMVVVMM
MMVVVVVMVVMVMMVMMVVVVVMVMMMMMVVVVMVMVMMVVVMMMVMVVVMVMMMMVVMMVMVMVVVVMMMVMMMMVVMV
MMMVVMMMVMVVVVVMVMVMMVVVMVVMMVMVVMVVMVMMVMVVVVVVVMMMVVVMVVVVMVVVVVVMMMVVMMMMMMMV
VVMMVMMVMMMMVMVVVMMMMVVMVMVVMVVVMMMVMVMMMMMVMMVVMMMMVMVVMMMVMVMMMMVMMMMVVVMMMVMM
VMVVVMMVVVVVVMVMMMVVVMVMMVVMVVMVVVVVVVVMMMMMVVVMMMMVMVVVMVMVMMVVVMMVMMVMVMMVVVVV
MMVMMMVMVMVMMVVMMMMVMMVMVMMVVMMMVVVMVVVVVVVVMMMVMVVVMMMVMMVMMVMVMVMMMVVMMMMMVMMM
MMVVMMMMMVVMMMMVMVVMVVMVVVVVMVVVMVMMVMMVVMMMVVVMVVVVMVVMMVVMVVMMMVMVMVMVMVMMMMVM
MVMVVVVMMMVVMVVMMVMVVMVMVVVMMVMVMMMVMVMMMMMVMVMVVMMVMMMVMVMVVMMVMMMVVMVVVVVMVMVV
VMVVMMMVMVMMMMMMMMVVVMVMVVVVMVVVVVMVMVVMVMVVVVVMMVVVVVVMMMMMVVMVMVVVVMVMMMMVVVVM
MVMVMVMMMMVMMVVVMMMMMVMMVVMMMMVVVVVVVMMVVVVMMMMMVVMMVVMVVVVVMMMVVVVMVMVVVMMVMMVM
VVVVVMMMMVVMMMMVVMVVVMMVMMVMVVVVVMVVVVVMVMVVMMVVVMVVMMMVMVVVVMMMVVVMVVMVMVMMMMVV
MVVVMVMVMVMMMMMVMVMMVMMVVMVVVVMMVMVVMVVVMVMVMVMMVVVVMMVVMMMVVVMMMMMVVMMMMMVMVVVV
MVMVMMMVVVMVVVVVVMMVMVVVMMVMVMMVMMVMVVVMMMMVMMVMMVMMMMMMVMVVVMVMMVMVMMMVVMMMMVMV
VVMVVMVVMVMVMMMMVMVVVMMMMMVMMMMMMMVVVVVMMMVVVMVMMMMVVVMVMVMVVMMMVMMMMVMMMVMMMVMV
MMMMVMMVVVVMVVMMVMVVMVVVMVMMVVVMVVVMMVVVVVMMMVMVVVMMMMVVMVMMVMVMVMVMMMVMMVVVMMMM
VMMMMVVMMVMVMVVVVVMVVVMVMMMVVMMMVVMVVVMMMMVVVVMVMMVVMMVVVVMMMVMVMVVMVMMVMVMMMMMV
MMMMVMMMMMVMMVMMMVMVVMMVVVMVMMVVMVMVVMVVMMMMMVMVVVMVVMMVVVVMMMMMMMMVMVVVMVVMVMVV
VMMVMMMMMVMVMMMVVVVVMVMVMVMMVMVMVVVVVVVMMMMVVMMVVVMVVVMMMVVVMMVMMVVVMVVVMVMMMVMM
VMVMMVVVMVMMMMVVVMMVMMMVVVVMVMVVVMMVMMVMMVVVMMMMMVVVMVMMMMVVMVVVMVVMMMVMMMVMVVVM
VVVMMMVVMMMMMVMVVVMVVMVVVVVVMMMVVMVVMVVMVMVMVVVMVMMMMVMMMMMVMMMMVVMVVVVVVMVMMVMV
VVVVMVVVMVMMMMMMVVMVVVVVVMMMMMMVVMMMMVMMVMMVMMMVMVVMMMMMVMMMMMMMMVVVMMMMVVMVMVVM
MMVVVMVMVVMVVMVVVMMVVMVMVMMVMMMVMVMMMMMVVVMMMMVMMVMVVVVMVMMMMVVVMMMVVVMMMVMMMMMM
VMMVMMMVMVVMMVVVVMMVMMVVMVMVMMVMMMVMMVVMVVVVMVMVVVVMMMMMMMVVVMVMVMMVVVVMVMVMMMVV 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T14:13:25.967

该解决方案将涉及两个嵌套循环，在您声明的数组中的二维范围内。

# jquery - 如果表单已实时提交，则 JQuery 仅刷新

> ID：13331331
> 
> 赞同：1
> 
> 时间：2012-11-11T13:00:51.230
> 
> 标签：jquery, forms, real-time, reload, submission

所以我有一个页面，它使用一些 JQuery 每 15 秒重新加载一个 php 文件，没什么特别的。php 文件只是回显文本文件的最后 3 行。

这是JQuery：

```
$(document).ready(function() {
    $("#realtime").load("realtime.php");

    var refreshId = setInterval(function() {
        $("#realtime").load('realtime.php');
    }, 15000);
    $.ajaxSetup({ cache: false });
}); 
```

让我们举一个清晰的例子，PHP文件是：

```
echo "<li class='alternate'>query 1</li>";
echo "<li class='alternate'>query 2</li>";
echo "<li class='alternate'>query 3</li>"; 
```

我想实现两件事，首先我只想在实时提交表单时更新 PHP 文件，所以它不仅仅是每 15 秒更新一次，我猜这将涉及某种缓存存储或什么？

其次，您可能已经注意到 li 类被命名为备用，因为颜色交替，我如何能够将其从奇数更改为偶数，当最近提交表单时。到目前为止的jQuery是：

```
$(document).ready(function(){
    $('#myList li:nth-child(odd)').addClass('alternate');
}); 
```

我有大部分的碎片，但把它们放在一起让我很困惑，虽然看起来很简单，有人能帮忙吗？谢谢。

# magento - Magento indexer SQL错误和类别页面显示错误的产品

> ID：13331332
> 
> 赞同：1
> 
> 时间：2012-11-11T13:00:56.577
> 
> 标签：magento, innodb, magento-1.7

我的 Magento 安装目前给我在分类产品的重新索引、搜索结果和分类显示方面带来了一些麻烦。

当我尝试重新索引所有内容时，类别产品索引过程给了我这个错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`database`.`catalog_category_product_index`, CONSTRAINT `FK_CAT_CTGR_PRD_IDX_CTGR_ID_CAT_CTGR_ENTT_ENTT_ID` FOREIGN KEY (`category_id`) REFERENCES `catalog_category_entity` (`entity_id`) O)" 
```

搜索还为我提供了与搜索词无关的产品（例如：当我搜索黑莓手机时，三星手机与黑莓手机一起出现）并且类别页面出现相同错误（当我从类别 ID "167" 类别 "167" 中的产品与类别 ID "193" 中的产品一起出现）。

有人知道 SQL 错误是否与类别页面的错误有关，是否有修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:41:55.587

似乎有些无效数据问题。您可以执行以下操作。

*   备份和截断“catalog_category_product_index_*”表
*   尝试再次运行重新索引过程。

希望能帮助到你..

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:08:15.760

您是否尝试过 Magento 数据库修复工具？ [http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

# haskell - 作为 Haskell Monad 的 Turtle Graphics

> ID：13331336
> 
> 赞同：7
> 
> 时间：2012-11-11T13:01:22.227
> 
> 标签：haskell, monads, turtle-graphics

我正在尝试在 Haskell中实现[海龟图形。](https://en.wikipedia.org/wiki/Turtle_graphics)目标是能够编写这样的函数：

```
draw_something = do
    forward 100
    right 90
    forward 100
    ... 
```

然后让它产生一个点列表（可能带有其他属性）：

```
> draw_something (0,0) 0        -- start at (0,0) facing east (0 degrees)
[(0,0), (0,100), (-100,100), ...] 
```

我所有这些都以“正常”的方式工作，但我未能将其实现为 Haskell Monad 并使用 do-notation。基本代码：

```
data State a = State (a, a) a -- (x,y), angle
    deriving (Show, Eq)

initstate :: State Float
initstate = State (0.0,0.0) 0.0

-- constrain angles to 0 to 2*pi
fmod :: Float -> Float
fmod a 
    | a >= 2*pi = fmod (a-2*pi)
    | a <  0    = fmod (a+2*pi)
    | otherwise = a

forward :: Float -> State Float -> [State Float]
forward d (State (x,y) angle) = [State (x + d * (sin angle), y + d * (cos angle)) angle]

right :: Float -> State Float -> [State Float]
right d (State pos angle) = [State pos (fmod (angle+d))]

bind :: [State a] -> (State a -> [State a]) -> [State a]
bind xs f = xs ++ (f (head $ reverse xs))

ret :: State a -> [State a]
ret x = [x] 
```

有了这个我现在可以写

```
> [initstate] `bind` (forward 100) `bind` (right (pi/2)) `bind` (forward 100)
[State (0.0,0.0) 0.0,State (0.0,100.0) 0.0,State (0.0,100.0) 1.5707964,State (100.0,99.99999) 1.5707964] 
```

并得到预期的结果。但是我不能将此作为`Monad`.

```
instance Monad [State] where
    ... 
```

结果是

```
`State' is not applied to enough type arguments
Expected kind `*', but `State' has kind `* -> *'
In the instance declaration for `Monad [State]' 
```

如果我将列表包装在一个新对象中

```
data StateList a = StateList [State a]

instance Monad StateList where
    return x = StateList [x] 
```

我明白了

```
 Couldn't match type `a' with `State a'
      `a' is a rigid type variable bound by
        the type signature for return :: a -> StateList a 
          at logo.hs:38:9
    In the expression: x        
    In the first argument of `StateList', namely `[x]'
    In the expression: StateList [x] 
```

我尝试了各种其他版本，但我从来没有让它像我想的那样运行。我究竟做错了什么？我怎么理解不正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:58:52.503

您正在设计的 monad 需要有两个类型参数。一个用于保存的轨迹（将针对特定`do`序列固定），另一个用于计算结果。

您还需要考虑如何组合两个turtle-monadic 值，以便绑定操作具有关联性。例如，

```
right 90 >> (right 90 >> forward 100) 
```

必须等于

```
(right 90 >> right 90) >> forward 100 
```

（当然对于`>>=`等类似）。这意味着如果你用点列表来表示海龟的历史，绑定操作很可能不能将点列表附加在一起；`forward 100`单独会导致类似`[(0,0),(100,0)]`的结果，但是当它带有旋转之前，保存的点也需要旋转。

* * *

我想说最简单的方法是使用`Writer`单子。但我不会保存点，我只会保存海龟执行的动作（这样我们在组合值时不需要旋转点）。就像是

```
data Action = Rotate Double | Forward Double

type TurtleMonad a = Writer [Action] a 
```

（这也意味着我们不需要跟踪当前方向，它包含在动作中。）然后您的每个函数只需将其参数写入`Writer`. 最后，您可以从中提取最终列表并制作一个简单的函数，将所有动作转换为点列表：

```
track :: [Action] -> [(Double,Double)] 
```

**更新：**从[Data.Sequence](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Sequence.html)使用`[Action]`它会更好，而不是使用它。它也是一个[幺半群](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-Monoid.html#t%3aMonoid)，[连接两个序列](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Sequence.html#v%3a-62--60-)非常快，它的摊销复杂度是*O(log(min(n1,n2)))*，与*O(n1)* of相比。所以改进的类型将是`Seq`**`(++)`**

 **```
type TurtleMonad a = Writer (Seq Action) a 
```**

# android-fragments - onPrepareOptionsMenu 中的 getSherlockActivity 返回 null

> ID：13331340
> 
> 赞同：0
> 
> 时间：2012-11-11T13:01:43.337
> 
> 标签：android-fragments, android-activity, actionbarsherlock

我正在使用 ActionBar Sherlock 4.2。当用户旋转设备时，我的 onPrepareOptionsMenu 方法中出现空引用。当从横向模式下的双片段布局切换回纵向模式时会发生这种情况，该模式仅显示“主”片段而没有细节片段。但是我的细节片段仍然被调用。首先，我在 menu.xml 中做错了什么，但事实并非如此。Activity 返回为空。任何人都有提示那里可能有什么问题？

奇怪的是代码通过了 isDetached() 检查。

任何提示表示赞赏，风筝冲浪者

```
/*
 * (non-Javadoc)
 * 
 * @see android.support.v4.app.Fragment#onPrepareOptionsMenu(android.support. v4.view.Menu)
 */
@Override
public void onPrepareOptionsMenu(final Menu menu)
{
    if (getListAdapter() == null || getListAdapter().isEmpty() && isDetached())
    {
        return;
    }

    final MenuItem item = menu.findItem(R.id.forecast_options_navigate_to_spot);
    Log.d(LOG_TAG, "Menu item size:" + menu.size());
    Log.d(LOG_TAG, "Activity:" + getSherlockActivity()); 
```

输出：

```
11-11 13:07:46.862: D/MyFragment(27997): Menu item size:8
11-11 13:07:46.862: D/MyFragment(27997): Activity:null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:21:30.213

所以，我发现了问题所在。在我的 PagerAdapter 中，我做了一些愚蠢的事情。

在我的

```
public void onTabUnselected(final Tab tab, final FragmentTransaction nullTransaction) 
```

我调用了 getItem()，它创建了另一个 Fragment，它当然在这个方法中被分离了。这会导致 Activity 在 onPrepareOptionsMenu 中为空。

# ruby-on-rails - RoR - 第一个应用程序项目，路由到主视图而不是 /blog_entries

> ID：13331343
> 
> 赞同：3
> 
> 时间：2012-11-11T13:02:14.033
> 
> 标签：ruby-on-rails, ruby, routing, routes

在命令行中创建数据库并迁移后，我无法让 rails 正确路由到“http://localhost:3000/blog_entries”——它只是显示默认视图，与“http://localhost”相同:3000”。如果我将 blog_entries index.html.erb 中生成的代码轨添加到 application.html.erb 视图中，它会显示预期的结果。

rake routes 给了我以下信息：

```
 blog_entries GET    /blog_entries(.:format)          blog_entries#index
                POST   /blog_entries(.:format)          blog_entries#create
 new_blog_entry GET    /blog_entries/new(.:format)      blog_entries#new
edit_blog_entry GET    /blog_entries/:id/edit(.:format) blog_entries#edit
     blog_entry GET    /blog_entries/:id(.:format)      blog_entries#show
                PUT    /blog_entries/:id(.:format)      blog_entries#update
                DELETE /blog_entries/:id(.:format)      blog_entries#destroy
           root        /                                home#index 
```

我的 routes.rb 包含以下内容（atm...已经搜索了几个小时的解决方案，我尝试过的一切都失败了）：

```
RubydRailed::Application.routes.draw do

  resources :blog_entries do
    get "blog_entries"
  end 
```

结尾

我对 Rails 很陌生，真的很难理解为什么 Rails 会为 URL“http://localhost:3000/blog_entries”路由到 application.html.erb。我已经查看了文档，搜索了 google 和 stakoverflow 几个小时，但我自己无法弄清楚。非常感谢您的帮助——我相信答案很简单，但我就是不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:06:56.630

`application`是你的布局。其中有`<%= yield %>`，这`yield`是渲染当前控制器/动作的视图。换句话说，您的布局 ( `application.html.erb`) 呈现每个请求以及在其中呈现的请求的特定视图。%br

`index.html`也从`public/`目录中删除。

# youtube-api - youtube api - 显示来自特定频道的观看次数最多

> ID：13331344
> 
> 赞同：0
> 
> 时间：2012-11-11T13:02:21.697
> 
> 标签：youtube-api

我对 Youtube Api 有疑问，我正在使用 jimdoescode [https://github.com/jimdoescode/CodeIgniter-YouTube-API-Library](https://github.com/jimdoescode/CodeIgniter-YouTube-API-Library)提供的 CodeIgniter YouTube API 库。想象一下，您有 2 个通道，通道 x 和 y。我需要运行一个 php 代码，该代码仅以（ASC 或 DESC）顺序向我显示每周从这两个频道中观看次数最多的视频。

** 频道不是你的 - 它属于任何用户

**前任 ：**

频道 x 有：

*   video1 - 3 位观看者
*   video2 - 1 位观察者
*   video3 - 6 位观察者

频道 y 有：

*   video4 - 9 位观众
*   video5 - 3 位观察者
*   video6 - 2 位观察者

php代码应产生以下结果

*   视频4
*   视频3
*   视频1
*   视频5
*   视频6
*   视频2

我在 Youtube api ，开发者指南上搜索过，你能帮我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:02:28.507

我不相信您可以从 youtube API 一次从两个频道中提取提要。

您必须提取两个提要并在 PHP 中合并数据，然后进行排序。

正如您所说，您正在使用 CI Youtube API 库，您需要将参数 orderby 的值添加到您用于提取提要的函数中。

例如，如果你使用 getUserUploads() 你会想要这样的：

```
$resultX = $this->youtube->getUserUploads('channelX',array('orderby'=>'viewCount'));    
$resultY = $this->youtube->getUserUploads('channelY',array('orderby'=>'viewCount')); 
```

如何解析 XML 响应结果并将它们转换为数组进行排序，我将留给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:32:53.057

[http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?orderby=viewCount&max-results=5](http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?orderby=viewCount&max-results=5)

将 USERNAME 替换为您要检查的用户的用户名。

将 5 替换为您要排序的视频（显示）。

# mysql - 使用新生成的密码更新表中的列

> ID：13331345
> 
> 赞同：0
> 
> 时间：2012-11-11T13:02:47.213
> 
> 标签：mysql

所以我有生成我想要的密码类型的代码

```
SELECT SUBSTRING(MD5(RAND()) FROM 1 FOR 6) AS Paswoord 
```

我如何使这项工作同时适用于我已经拥有的所有 60 行。我认为这可能与 Inner Join 等有关。我尝试了一些东西，但都失败了。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:04:20.497

```
UPDATE USER SET 
PASSWORD = SUBSTRING(MD5(RAND(ID)) FROM 1 FOR 6)
WHERE PASSWORD IS NULL -- or whatever consition matches rows you want to update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:04:05.603

```
UPDATE tableName
SET columnName = SUBSTRING(MD5(RAND()),1,6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:09:33.187

请试试这个：**抱歉打错了**- 无论如何，以上两个答案都可以帮助你:)

```
UPDATE maintable
    SET maintable.column = (SELECT SUBSTRING(MD5(RAND()) FROM 1 FOR 6)) 
```

# php - 将数组合并到内容中

> ID：13331352
> 
> 赞同：-1
> 
> 时间：2012-11-11T13:04:13.137
> 
> 标签：php, arrays

我需要创建一个函数，将数组合并到我创建的模板中，请参见下文：

我的数组：

```
 $view_array = array();
  $view_array['start.form'] = '<form method="POST" >';
  $view_array['end.form'] = '</form>';
  $view_array['name.input'] = '<label>Name : </label><input type="text" name="frm_name" />';
  $view_array['name.input'] = '<label>E-mail: </label><input type="text" name="frm_email" />';
  $view_array['submit.form'] = '<input type="submit" value="Submit" />'; 
```

我的模板：

```
$content = "
    ~error.messages~

    ~start.form~

    ~name.input~

    ~email.input~

    ~submit.from~

    ~end.form~"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:16:36.657

```
foreach($view_array AS $key=>$value)
{
$content = str_replace('~'.$key.'~',$value,$content);
}

echo $content; 
```

# mysql - 如何优化这个嵌套的 SQL 查询

> ID：13331355
> 
> 赞同：0
> 
> 时间：2012-11-11T13:04:22.543
> 
> 标签：mysql, query-optimization, sql-optimization

这是数据库架构：

[编辑]

我将描述我对下面的查询所做的事情：

**最内层查询**：选择所有`saleId`满足`WHERE`条件的s

**中间查询**：选择所有`productId`属于`saleId`

**最外层查询**：`SUM`并`products.cost`选择`vendors.name`。

这是我想出的 SQL 查询：

```
SELECT vendors.name AS Company
, SUM(products.cost) AS Revenue
FROM
    products
    INNER JOIN sold_products
        ON (products.productId = sold_products.productId)
    INNER JOIN vendors
    ON (products.vendorId = vendors.vendorId)
            WHERE sold_products.productId IN (
                    SELECT sold_products.productId
                    FROM
                        sold_products
                    WHERE sold_products.saleId IN (
                            SELECT sales.saleId     
                            FROM
                                markets
                                INNER JOIN vendors
                                ON (markets.vendorId = vendors.vendorId)
                                INNER JOIN sales_campaign
                                ON (sales_campaign.marketId = markets.marketId)
                                INNER JOIN packet_headers
                                ON (sales_campaign.packetHeaderId = packet_headers.packetHeaderId)
                                INNER JOIN packet_details
                                ON (packet_details.packetHeaderId = packet_headers.packetHeaderId)
                                INNER JOIN sales
                                ON (sales.packetDetailsId = packet_details.packetDetailsId)
                            WHERE vendors.customerId=60
                            )
                    )
GROUP BY Company
ORDER BY Revenue DESC; 
```

对优化有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:16:04.940

由于您只是使用内部连接，因此您通常将查询简化为如下所示：

```
SELECT  ve.name     AS Company
,       SUM(pr.cost) AS Revenue
FROM    products        pr
,       sold_products   sp
,       vendors         ve
,       markets         ma
,       sales_campaign  sc
,       packet_headers  ph
,       packet_details  pd
,       sales           sa
Where pr.productId = sp.productId
And   pr.vendorId  = ve.vendorId
And   ve.vendorId  = ma.vendorId
And   sc.marketId = ma.marketId
And   sc.packetHeaderId = ph.packetHeaderId
And   pd.packetHeaderId = ph.packetHeaderId)
And   sa.packetDetailsId = pd.packetDetailsId
And   ve.customerId = 60
GROUP BY ve.Company
ORDER BY pr.Revenue DESC; 
```

请尝试这是否有效，如果它更快，请告诉我。

# string - 如何将字符串从“lastName，firstName”切换为“firstName LastName”？

> ID：13331358
> 
> 赞同：7
> 
> 时间：2012-11-11T13:04:41.670
> 
> 标签：string, excel, formatting

我有一列名字写成：

“姓，名”

我想要另一个列，此名称列表写为：

“名字姓氏”

那么，如何将字符串从 "lastName, firstName" 切换为 "firstName LastName" ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T13:19:03.413

如果名字在 A2 中，请尝试在 B2 中复制此公式

`=MID(A2&" "&A2,FIND(" ",A2)+1,LEN(A2)-1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T08:03:08.293

在单元格中输入数据，例如

```
Brown, John
Green, Bob
Smith, Will 
```

（请注意，在这种情况下，逗号是系统将用于分隔条目的分隔符）突出显示这些单元格。
单击“数据”选项卡，单击“文本到列”。
选择提供的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T13:28:29.250

为我工作 =RIGHT(C3,LEN(C3)-LEN(LEFT(C3,FIND(",",C3)-1))-1) & " " & LEFT(C3,FIND(",",C3 )-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-08T18:32:16.457

如果单个单元格 (A2) 不包含诸如“名字姓氏”之类的错误，巴里的回答是正确的——这通常是这种情况。

因此，要处理“Last，First”或“First Last”的单元格数据，我们需要比较单元格并采取适当的措施。*另请注意，在我的示例中，我将名字移到了它自己的列中，将姓氏移到了它自己的列中。您当然可以将它们合并到一个列中。*

首先，让我们分解我们需要的东西。当单元格内容中有“，”时，这将返回名字：（*假设您要拆分的字段在A2中，根据需要调整）*

```
=MID(A2;FIND(",";A2)+2;99) 
```

如果没有，这将返回名字：

```
=MID(A2;1;FIND(" ";A2)) 
```

对于有逗号时的姓氏：

```
=MID(A2;1;FIND(",";A2)-1) 
```

没有姓氏：

```
=MID(A2;FIND(" ";A2)+1;99) 
```

因此，我们需要测试字符串中是否有“，”，如果没有则处理错误情况（FIND 在未找到时返回#value，ISERROR() 可以测试）。可选地（和我的方法）是检查 FIND 的返回是否产生了一个数字（错误不会）。在这种情况下，“找不到它的错误条件”将产生一个非数字 #Value。

```
=IF( ISNUMBER( FIND(",";A2)); MID(A2;FIND(",";A2)+2;99); MID(A2;1;FIND(" ";A2))) 
```

对姓氏执行相同的操作如下所示：

```
=IF( ISNUMBER( FIND(","; A2)); MID(A2;1;FIND(",";A2)-1); MID(A2;FIND(" ";A2)+1;99)) 
```

请注意，我的解决方案是使用我的电子表格应用程序 OpenOffice。我认为 Excel 有不同的查找方法（搜索？） - 所以根据需要进行调整。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-09T03:27:21.867

上面的[答案](https://stackoverflow.com/questions/13331358/how-can-i-switch-a-string-from-lastname-firstname-to-firstname-lastname#13331465)是不正确的。事实上，对于我自己的名字，Jay Jacob Wind，这个公式是错误的。正确的公式是：

假设 Last, First 在 A 列中，用一个逗号和一个空格键分隔

对于名字：

```
=mid(A2,find(",",A2)+2,99) 
```

对于姓氏：

```
=mid(A2,1,find(",",A2)-1) 
```

放在一起，假设 B 列是名字，C 列是姓氏 =B2&" "&C2

或简单地（但更复杂）

```
=mid(A2,find(",",A2)+2,99)&" "&mid(A2,1,find(",",A2)-1) 
```

但我喜欢将它们分成两列，然后将它们连接起来

# javascript - 调用 htmlfile 窗口的原始 setTimeout 时出现“权限被拒绝”

> ID：13331362
> 
> 赞同：2
> 
> 时间：2012-11-11T13:05:26.130
> 
> 标签：javascript, mshtml, wsh

我正在尝试覆盖 MSHTML 实例上的计时器方法（`setTimeout`、和） `clearTimeout`，因此我可以跟踪已添加到/的函数并阻止脚本退出，直到这些函数被调用或删除。`setInterval``clearInterval``setTimeout``setInterval`

在包装器函数中调用原始文件时，出现**Permission denied**错误： `setTimeout``setTimeout`

```
var window = new ActiveXObject('htmlfile').parentWindow.window;
var _setTimeout = window.setTimeout;

var timeouts = {};
setTimeout = function (code, ms, lang) {
    //script fails here - Permission denied
    var id = _setTimeout(code, ms, lang || 'javascript');
    timeouts[id] = true;
    return id;
};
setTimeout(function () {
    window.alert('Timed function');
}, 1000);

var testTimeouts = function () {
    var i;
    for (i in timeouts) {
        if (timeouts[i]) {return false;}
    }
};
while (!testTimeouts()) {
    WScript.Sleep(100);
}
window.alert('At end of script'); 
```

`setTimeout`我可以在它被覆盖之前 将代码传递给原始代码：

```
window.setTimeout(function () {
    window.alert('Timed function');
}, 1000);
WScript.Sleep(2500);
window.alert('At end of script'); 
```

保留原始上下文（如似乎已经消失的答案中所建议的那样）不起作用：

```
window._setTimeout = window.setTimeout;

var timeouts = {};
window.setTimeout = function (code, ms, lang) {
    var id = window._setTimeout(code, ms, lang || 'javascript');
    timeouts[id] = true;
    return id;
};
window.setTimeout(function () {
    window.alert('Timed function');
}, 1000); 
```

它在调用`window._setTimeout`with时失败`Object doesn't support this property or method`。

我应该注意我正在运行 IE8、WinXP SP3、JScript 5.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T04:15:26.720

你为什么不`setTimeout`从你存储的窗口调用？

```
var setTimeout;
var timeouts = {};
(function() {
    var window = new ActiveXObject('htmlfile').parentWindow;
    setTimeout = function(code, delay, lang){
        var id = window.setTimeout(code, delay, lang || 'javascript');
        timeouts[id] = true;
        return id;
    };
})(); 
```

# objective-c - 如何创建类似于 Interface Builder 中的连接的动画（蓝色细线）？石英二维？

> ID：13331365
> 
> 赞同：0
> 
> 时间：2012-11-11T13:05:57.740
> 
> 标签：objective-c, cocoa, core-animation, quartz-2d

从未使用过图形框架。假设我可以对“按下”按钮（图片）进行事件处理并将其链接到其他一些目标元素，此时将引入鼠标。但是在按下鼠标按钮并在所有表单上可见之前存在的动画如何？起点是什么？有哪些框架、类和方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:05:58.817

我建议在窗口层的顶部添加一个 CAShapeLayer，并将其设置为描边一条细蓝线。然后你可以安装一个只有一行的 CGPath，并在用户用鼠标拖动时更改路径。您可以使用持续时间很短的动画，也可以使用 CATransaction 来更改没有动画的路径，以便尽可能快地更新。

# php - 参数列表后缺少 )

> ID：13331367
> 
> 赞同：0
> 
> 时间：2012-11-11T13:06:08.903
> 
> 标签：php, javascript

我将展示代码的主要部分，因为其中大部分是无关紧要的：

```
 $url = $row['url'];
    echo "<div id='anything'><img id='$url' src='$cover' alt='$title' onclick='myFunction($url)'>"; 
```

和javascript函数：

```
 function myFunction(something) { 
 alert (something);
 } 
```

我在萤火虫中收到以下错误：

```
missing ) after argument list
[Break On This Error]   
    myFunction(http://anything.com/anything...
-------------------^ 
```

我对 javascript 比较陌生，但我可以说它显然不允许来自 url 的“：”。但是，我无法更改或更改 id，因为我需要提醒 Image 的确切 id。

我在没有 php 的情况下以不同的格式完成了这项工作，所以我认为问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T13:10:54.993

URL 必须是字符串，但您只是输出字符串的内容。

您*可以*按照其他地方的建议在它周围加上引号，但这充其量是一个不完整的解决方案。

幸运的是，PHP 为您提供了更好的答案：[`json_encode`](http://php.net/manual/en/function.json-encode.php)结合（在您的情况下）与[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php). 这是一个（除其他外）将为您正确包装字符串的函数，以便您可以在 JavaScript 代码中使用它。所以：

```
$escapedUrl = htmlspecialchars(json_encode($url)); 
```

然后

```
...onclick='myFunction($escapedUrl)'... 
```

`json_encode`用于将文本编码为 JSON，但由于 JSON 是 JavaScript 文字符号的子集，并且`json_encode`非常高兴地返回一个有效的、正确转义的 JavaScript 字符串......

您也需要，`htmlspecialchars`因为您随后将生成的 JavaScript 代码输出到`onclick`属性中，并且 HTML 文本中所有 HTML 属性的内容（即使是其中包含代码的）必须正确编码，因此（例如）`&`必须是`&amp;`等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T13:08:13.813

做这个：

```
$escapedString = json_encode($url);
echo "<div id='anything'><img id='$url' src='$cover' alt='$title' onclick='myFunction($escapedString)'>"; 
```

TJ Crowder 是对的，您可以查看以下内容以获取更多信息：

[在 JSON 响应中转义文本的正确方法是什么？](https://stackoverflow.com/questions/253031/what-is-the-correct-way-to-escape-text-in-json-responses)

为什么我的第一个解决方案不正确（即使它似乎适用于 1 个案例）？

阅读： http: [//kunststube.net/escapism/](http://kunststube.net/escapism/)

 ~~~~```
echo "<div id='anything'><img id='$url' src='$cover' alt='$title' onclick='myFunction(\"$url\")'>"; 
```~~ 

您基本上需要在传递给 myFunction 调用的值周围打印双引号：

```
onclick='myFunction(\"$url\")' 
```

 ~~* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T13:08:50.570

这是因为你正在做这样的事情：

```
myFunction(http://anything.com) 
```

如果是字符串参数，函数参数需要用引号或双引号括起来：

```
myFunction("http://anything.com") 
```

所以你的回声应该是这样的：

```
"<div id='anything'><img id='$url' src='$cover' alt='$title' onclick='myFunction(\"$url\")'>" 
```

此外，您应该考虑到`$url`不必包含有效字符，因此您应该添加一些编码/转义（考虑 XSS）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T13:09:01.097

您必须使用以下`encodeURI(uri)`功能：

```
"<div id='anything'><img id='$url' src='$cover' alt='$title' onclick='myFunction(encodeURI(\'$url\'))'>"; 
```~~~~

# python - 正在同步数据，想跟踪发生了什么变化

> ID：13331381
> 
> 赞同：0
> 
> 时间：2012-11-11T13:08:47.247
> 
> 标签：python, orm, sqlalchemy

我每分钟都有一个程序从数据库（MySQL）查询数据。

```
while 1:
    self.alerteng.updateAndAnalyze()
    time.sleep(60) 
```

但数据不会经常变化；可能一个小时或一天一次。（由另一个 C++ 程序更改）

我认为最好的方法是在发生更改时跟踪更改，然后查询并更新我的数据。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:34:24.693

这取决于你在做什么，但 SQLAlchemy 的事件功能可能会帮助你。

它允许您在数据库中发生任何事情时运行代码，即在您插入新行或设置列值之后。我在 Flask 应用程序中使用它来启动通知或其他异步进程。

[http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#mapper-events](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#mapper-events)

这是来自 Flask 应用程序的玩具代码，每当在数据库中创建新的 YourModel 模型时，它将运行 kick_off_analysis() 函数。

```
from sqlalchemy import event

@event.listens_for(YourModel, "after_insert")
def kick_off_analysis(mapper, connection, your_model):
  # do stuff here 
```

希望能帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:28:53.867

I don't know how expensive `updateAndAnalyze()` is, but I'm pretty sure it's like most SQL commands: not something you really want to poll.

You have a textbook case for the [Observer Pattern](http://en.wikipedia.org/wiki/Observer_pattern). You want MySQL to call something somehow in your code whenever it gets updated. I'm not positive of the *exact* mechanism to do this, but there should be way to set a trigger on your relevant tables where it can notify your code that the underlying table has been updated. Then, instead of polling, you basically get "interrupted" with knowledge that you need to do something. It will also eliminate that up-to-a-minute lag you're introducing, which will make whatever you're doing feel more snappy.

# android - DialogFragment 不显示

> ID：13331388
> 
> 赞同：2
> 
> 时间：2012-11-11T13:09:42.997
> 
> 标签：android, dialog

最后，我发现了问题所在...

如果你有这样的功能：

```
public void test()
{
    DialogFragment dlg = new LoginDialog();
    dlg.show(getSupportFragmentManager(), "login");
} 
```

该对话框只会在 test() 完成时出现，我不确定这是否是 Android 对话框工作的唯一方式，但我肯定会阅读更多关于这...

* * *

**原始问题：**

我是android世界的新手，有人可以解释一下吗？

dlg.show() 无异常执行，但什么也没发生，我该怎么做才能知道出了什么问题？该项目使用 Android 2.2 的 API。

```
public class MainActivity extends FragmentActivity
{
    ...
    DialogFragment dlg = new LoginDialog();
    dlg.show(getSupportFragmentManager(), "login");
} 
```

对话框布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<EditText
    android:id="@+id/username"
    android:inputType="textEmailAddress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="4dp"
    android:hint="username" />
<EditText
    android:id="@+id/password"
    android:inputType="textPassword"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="4dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="16dp"
    android:hint="password"/>
</LinearLayout> 
```

对话类：

```
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;

public class LoginDialog extends DialogFragment
{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.login_dialog, null))
        // Add action buttons
               .setPositiveButton("Sign In", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // sign in the user ...
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        // do something
                   }
               });
        return builder.create();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:47:45.440

尝试使用 newInstance() 创建您的片段

```
public class LoginDialog extends DialogFragment
{
    static LoginDialog newInstance(String title) {
        LoginDialog f = new LoginDialog();
        Bundle args = new Bundle();
        args.putString("title", title);
        f.setArguments(args);
        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        .
        .
        .
    }
} 
```

然后在你的 MainActivity

```
public class MainActivity extends Activity // notice that in my case I extend Activity instead of FragmentActivity
{
    @Override
    public void onCreate(Bundle savedInsatnceState) {
        super.onCreate(savedInsatnceState);
        setContentView(R.layout.main);
        LoginDialog dialogFragment = LoginDialog.newInstance("My Dialog");
        dialogFragment.show(getSupportFragmentManager(), "login");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:13:13.240

也许如果您使用 fragmentransaction 代替：

```
public class MainActivity extends FragmentActivity
{
    ...
    DialogFragment dlg = new LoginDialog();
    dlg.show(getSupportFragmentManager().beginTransaction(), "login");
} 
```

**编辑：**

我鼓励你去看看[DialogFragments](http://developer.android.com/reference/android/app/DialogFragment.html)上的谷歌指南。您对 alertbuilder 的自定义视图所做的操作可能会导致它不显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T10:05:56.043

我想你忘了设置你的风格**DialogFragment**

尝试其中一种风格：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments().getInt("num");

        // Pick a style based on the num.
        int style = DialogFragment.STYLE_NORMAL, theme = 0;
        switch ((mNum-1)%6) {
            case 1: style = DialogFragment.STYLE_NO_TITLE; break;
            case 2: style = DialogFragment.STYLE_NO_FRAME; break;
            case 3: style = DialogFragment.STYLE_NO_INPUT; break;
            case 4: style = DialogFragment.STYLE_NORMAL; break;
            case 5: style = DialogFragment.STYLE_NORMAL; break;
            case 6: style = DialogFragment.STYLE_NO_TITLE; break;
            case 7: style = DialogFragment.STYLE_NO_FRAME; break;
            case 8: style = DialogFragment.STYLE_NORMAL; break;
        }
        switch ((mNum-1)%6) {
            case 4: theme = android.R.style.Theme_Holo; break;
            case 5: theme = android.R.style.Theme_Holo_Light_Dialog; break;
            case 6: theme = android.R.style.Theme_Holo_Light; break;
            case 7: theme = android.R.style.Theme_Holo_Light_Panel; break;
            case 8: theme = android.R.style.Theme_Holo_Light; break;
        }
        setStyle(style, theme);
    } 
```

阅读更多： [https ://developer.android.com/reference/android/app/DialogFragment.html](https://developer.android.com/reference/android/app/DialogFragment.html)

您还可以为**DialogFragment设置自定义样式**

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setStyle(DialogFragment.STYLE_NORMAL, R.style.MY_DIALOG);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T03:12:51.223

我的错，我在问题的顶部添加了有关导致问题的原因的信息。

编辑（@MarcinS 的评论）：

```
public void test()
{
    DialogFragment dlg = new LoginDialog();
    dlg.show(getSupportFragmentManager(), "login");
    doThis();
    doThat();
} 
```

该对话框不会在 dlg.show() 之后立即出现，而是在 doThat() 完成后出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-29T07:09:04.433

我有同样的问题，在 onResume 之后没有出现对话框。（我有一个对话框通知用户他已暂停游戏并询问他是否想继续）。我只是把它提早了，我认为原因是我在 onPostResume() 中的 dialog.show() 之后加载的一个片段。我通过检测 dialog.show 是否在队列中来解决它，并且在我的片段加载后只是等到 onPostResume 才显示它。

这是显示对话框的功能：

`@Override public void onShowUserDialog(String title, String message, int type) { FragmentTransaction fm = getSupportFragmentManager().beginTransaction(); Fragment prev = getSupportFragmentManager(). findFragmentByTag(PublicVar.DIALOG_USER); if (prev != null) { fm.remove(prev); fm.commit(); } if (hasPostResumed) { DialogFragment userDialog = UserDialog. newInstance(title, message, type); userDialog.show(getSupportFragmentManager().beginTransaction(), PublicVar.DIALOG_USER); dialogTitle = ""; dialogMessage = ""; dialogType = 0; } else { //saved for later dialogTitle = title; dialogMessage = message; dialogType = type; } }`

hasPostResumed、dialogTitle、dialogMessage 和 dialogType 在活动中声明。

这是活动恢复时的最终调用：

```
protected void onPostResume() {
    super.onPostResume();
    hasPostResumed = true;

    ...function for loading my fragments...

    if (dialogType != 0) {
        onShowUserDialog(dialogTitle, dialogMessage, dialogType);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-28T11:34:30.157

`FragmentTransaction.commit()`（它在你显示时被调用`DialogFragment`）不会立即提交，而是在主线程准备好时。由于您希望立即完成，因此必须`getSupportFragmentManager().executePendingTransactions()`在显示对话框后添加。

来源：[FragmentTransaction.commit()](http://developer.android.com/reference/android/app/FragmentTransaction.html#commit())，[FragmentManager.executePendingTransactions()](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)。

# php - 哪个更好......mysql或mysqli或PDO？

> ID：13331389
> 
> 赞同：-6
> 
> 时间：2012-11-11T13:09:56.577
> 
> 标签：php, mysql

我刚刚开始 PHP 和 mysql 。我已经通过 Mysql 和 Mysqli 的不同功能来了。我也听说过 PDO 。现在我想知道哪个会比其他的更好，为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:11:46.287

这个网站不是真正的“什么是最好的”类型的问题。

简而言之，不要使用 mysql（很明显，PHP 文档的每一页都有警告！）。最近版本的 PHP 不再启用它，请参阅此处了解更多信息：[http ://us1.php.net/manual/en/mysql.installation.php](http://us1.php.net/manual/en/mysql.installation.php)

一定要使用 mysqli 或 PDO，这取决于你喜欢哪个。PDO 让您不仅可以使用 mysql，还可以创建一个标准接口来切换不同的数据库驱动程序。由于它的灵活性，它被许多人认为是“最好的”，但如果没有最好的条件，这当然是一个毫无意义的陈述！

评估您的需求并从那里比较两者。

# mysql - MYSQL/PHP JOIN 和排除条件

> ID：13331391
> 
> 赞同：0
> 
> 时间：2012-11-11T13:10:26.547
> 
> 标签：mysql, subquery

我有表标签和项目以及将标签与项目匹配的第三个表 tagitem。用户可以转到填充有标签列表的项目页面。单击标记后，将在 tagitem 表中插入一行，标记该项目。

为了防止用户两次将相同的标签应用于一个项目，我希望出现的标签列表排除任何已应用于该项目的标签。所以我认为提取标签的查询应该有一个条件，排除已经分配给给定项目的标签。但是，我在这样做时遇到了麻烦。

表格是：

标签

```
id|tag 
```

项目

```
id|item 
```

标记项目

```
id|tagid|itemid 
```

提取所有标签的查询将是：

```
"SELECT * FROM tags" 
```

由于包含与项目匹配的标签信息的表是 tagitem，因此我加入了它们。我需要弄清楚如何包含下面括号中粗略描述的条件，该条件不包括在相关项目的 tagitem 表中具有条目的任何标签。

```
SELECT t.*,ti.*
FROM `tags` t
LEFT JOIN `tagitem` ti
on t.id = ti.tagid
WHERE
ti.tagid NOT IN (SELECT * FROM tagitem WHERE itemid = '22')
GROUP BY t.id 
```

这是我所得到的。（现在我遇到了一些奇怪的操作数错误。）将不胜感激有关正确方法的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:12:48.907

一种方法是更改​​表格并在表格上添加*CONSTRAINT*以使每个项目具有唯一标签，

```
ALTER TABLE tagitem ADD UNIQUE ti_idx (tagid,itemid) 
```

但是，如果您只在查询中执行此操作，请在下面尝试此操作

```
SELECT  a.*
FROM    tags a
        LEFT JOIN 
        (
            SELECT tagid 
            FROM tagitem 
            WHERE itemid = '22'
        ) b ON a.id = b.tagid
WHERE   b.tagid IS NULL 
```

从上面的查询中，当使用`NOT IN`（*或`IN`*）时，子查询应该只返回一列，

```
....
WHERE ti.tagid NOT IN (SELECT tagid FROM tagitem WHERE itemid = '22') 
```

# java - swing自定义布局 - 组件包装和高度计算

> ID：13331393
> 
> 赞同：1
> 
> 时间：2012-11-11T13:10:35.717
> 
> 标签：java, swing, layout

我正在尝试创建自定义布局，它允许我以百分比指定组件的宽度，并根据该百分比宽度指定组件的布局。以下是我最终得到的实现。

我遇到的问题是，最里面的面板之一的计算宽度不足以将其所有组件放在一行中，下面的实现将它们包装到下一行，但是父级的高度 [所有容器中的层次结构] 固定为一些像素 [在我的情况下，我使用 40 像素]，并且它不允许显示包装的组件。

你能建议一个解决它的方法吗...

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.LayoutManager2;
import java.awt.Rectangle;
import java.util.LinkedHashMap;
import java.util.Map.Entry;

import javax.swing.BoxLayout;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

/**
 * @author Rakesh.A
 *
 */
public class Example extends JPanel {

public Example() {
    setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
    for (int i = 0; i < 1; i++) {
        JPanel row = new JPanel();
        row.setLayout(new PercentageWidthLayout(5, 5));

        JPanel column1 = new JPanel();
        column1.setOpaque(true);
        column1.setBackground(Color.white);

        JPanel column2 = createColumn2();

        row.add(column1, new MyConstraints(15, false)); // uses 15% of the available size
        row.add(column2, new MyConstraints(50, false, true, true)); // uses 50% of the available size and wraps its contents
        row.add(new JPanel(), new MyConstraints(25, false)); // uses 25% of the available size
        add(row);
    }
}

private JPanel createColumn2() {
    JPanel column = new JPanel();
    column.setOpaque(true);
    column.setBackground(Color.green);

    column.setLayout(new PercentageWidthLayout(3, 3, 35));
    // total percentage is 100% for all the below components
    column.add(new MyComponent(30, 28), new MyConstraints(20, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(10, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(20, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(20, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(10, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(10, true, false, true));
    column.add(new MyComponent(30, 28), new MyConstraints(10, true, false, true));
    return column;
}

public static void main(final String[] args) {
    JDialog dialog = new JDialog();
    dialog.setSize(500, 150);
    Example content = new Example();
    JScrollPane scrl = new JScrollPane(content, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    dialog.getContentPane().add(scrl);
    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    dialog.setVisible(true);
}

public static class MyComponent extends JPanel {
    private Dimension minSize;
    public MyComponent(final int minWidth, final int minHeight) {
        minSize = new Dimension(minWidth, minHeight);

        setOpaque(true);
        setBackground(Color.yellow);

        add(new JLabel("Block"));
    }

    @Override
    public Dimension getPreferredSize() {
        return minSize;
    }

    @Override
    public Dimension getMaximumSize() {
        return minSize;
    }
    @Override
    public Dimension getMinimumSize() {
        return minSize;
    }
}

public static class PercentageWidthLayout implements LayoutManager2 {
    private LinkedHashMap<Component, MyConstraints> components;

    private final int leftMargin;
    private final int topMargin;
    private final int rowHeight;

    // default size of the block
    public static final Dimension minimumSize = new Dimension(10, 40);
    public static final Dimension preferredSize = new Dimension(100, 40);

    // default left margin between components
    public static final int defaultLeftMargin = 5;
    // default bottom margin between components
    public static final int defaultTopMargin = 5;
    // default row height
    public static final int defaultRowHeight = 0;

    public PercentageWidthLayout() {
        this(defaultLeftMargin, defaultTopMargin);
    }

    public PercentageWidthLayout(final int leftMargin, final int topMargin) {
        this(leftMargin, topMargin, defaultRowHeight);
    }

    public PercentageWidthLayout(final int leftMargin, final int topMargin, final int rowHeight) {
        this.leftMargin = leftMargin;
        this.topMargin = topMargin;
        this.rowHeight = rowHeight;

        components = new LinkedHashMap<Component, MyConstraints>();
    }

    @Override
    public Dimension preferredLayoutSize(final Container parent) {
        int maxX = 0;
        int maxY = 0;
        for (Entry<Component, MyConstraints> compEntry : components.entrySet()) {
            Rectangle bounds = compEntry.getKey().getBounds();
            maxX = Math.max(maxX, (int) bounds.getMaxX());
            maxY = Math.max(maxY, (int) bounds.getMaxY());
        }
        if (maxX == 0 || maxY == 0) {
            return preferredSize;
        }
        return new Dimension(maxX, maxY);
    }

    @Override
    public Dimension minimumLayoutSize(final Container parent) {
        return minimumSize;
    }

    @Override
    public Dimension maximumLayoutSize(final Container target) {
        return new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE);
    }

    @Override
    public void layoutContainer(final Container parent) {
        synchronized (parent.getTreeLock()) {
            // validate total percentage
            validatePercentages();
            // calculate available width & height for the components
            Insets insets = parent.getInsets();
            // available width after removing border space
            int maxClientWidth = parent.getWidth() - insets.left - insets.right;
            // calculated available width for the components
            int clientWidth = maxClientWidth - (parent.getComponents().length * leftMargin);
            // calculated available height for the components
            int clientHeight = ((rowHeight > 0) ? rowHeight : preferredSize.height) - insets.top - insets.bottom - topMargin * 2;

            // layout the components
            int x = insets.left + leftMargin;
            int y = insets.top + topMargin;

            if (clientWidth > 0 && clientHeight > 0) {
                for (Component component : parent.getComponents()) {
                    // get the constraints to be applied
                    MyConstraints constraints = components.get(component);
                    // calculate component width according to the given percentage
                    int componentWidth = clientWidth * constraints.percentage / 100;

                    // calculate the preferred size of the component
                    int prefW = component.getPreferredSize().width;
                    if (constraints.usePreferredSize && componentWidth < prefW) {
                        // configured to use preferred size if calculated size is less than the
                        // preferred size
                        componentWidth = prefW;
                    }

                    // calculate the minimum size of the component
                    int minW = component.getMinimumSize().width;
                    if (constraints.useMinWidth && componentWidth < minW) {
                        // configured to use minimum width if calculated size is less than the
                        // minimum size
                        componentWidth = minW;
                    }
                    // check and wrap component to next row if needed
                    if (constraints.wrapComponents && x + componentWidth > parent.getWidth()) {
                        x = insets.left + leftMargin;
                        y += clientHeight + insets.top;
                        // update height of the parent component if it doesn fit
                        // if (parent.getHeight() < y + clientHeight) {
                        // parent.setSize(parent.getWidth(), parent.getHeight() + rowHeight);
                        // }
                    }
                    component.setBounds(x, y, componentWidth, clientHeight);
                    // update x coordinate
                    x += componentWidth + leftMargin;
                }
            }
        }
    }

    @Override
    public void addLayoutComponent(final String name, final Component comp) {
    }

    @Override
    public void removeLayoutComponent(final Component comp) {
        components.remove(comp); // remove component from map
    }

    @Override
    public void addLayoutComponent(final Component comp, final Object constraints) {
        if (constraints == null || !(constraints instanceof MyConstraints)) {
            throw new IllegalArgumentException("Invalid constraints object! - " + constraints);
        }
        MyConstraints myConstraints = (MyConstraints) constraints;
        if (myConstraints.percentage > 100) {
            throw new IllegalArgumentException("Invalid percentage value [" + myConstraints.percentage + "]!");
        }
        components.put(comp, myConstraints);
    }

    @Override
    public float getLayoutAlignmentX(final Container target) {
        return 0;
    }

    @Override
    public float getLayoutAlignmentY(final Container target) {
        return 0;
    }

    @Override
    public void invalidateLayout(final Container target) {
    }

    public int getLeftMargin() {
        return leftMargin;
    }

    public int getTopMargin() {
        return topMargin;
    }

    public int getRowHeight() {
        return rowHeight;
    }

    public static Integer calculatePercentage(final float value, final int total) {
        return new Integer((int) (value / total * 100));
    }

    private void validatePercentages() {
        int total = 0;
        for (Entry<Component, MyConstraints> compEntry : components.entrySet()) {
            total += compEntry.getValue().percentage;
        }
        if (total > 100) {
            throw new IllegalArgumentException("Total percentage [" + total + "] of the components in the layout is more than 100!");
        }
    }

}

/**
 * @author Rakesh.A
 *
 */
public static class MyConstraints {
    public final int percentage;
    public final boolean usePreferredSize, useMinWidth, wrapComponents;

    public MyConstraints(final int percentage, final boolean usePreferredSize) {
        this(percentage, usePreferredSize, false);
    }

    public MyConstraints(final int percentage, final boolean usePreferredSize, final boolean useMinWidth) {
        this(percentage, usePreferredSize, useMinWidth, false);
    }

    public MyConstraints(final int percentage, final boolean usePreferredSize, final boolean useMinWidth, final boolean wrapComponents) {
        this.percentage = percentage;
        this.usePreferredSize = usePreferredSize;
        this.useMinWidth = useMinWidth;
        this.wrapComponents = wrapComponents;
    }
}
} 
```

添加到此，根面板被添加到 JScrollPane 并且它也需要更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:57:54.883

Thank you all for your inputs. I opted a workaround for this problem, instead of wrapping the components, I added a horizontal scroll bar :)

# html - 没有 div 的内容居中

> ID：13331402
> 
> 赞同：0
> 
> 时间：2012-11-11T13:12:03.260
> 
> 标签：html, css

我最近遇到了这篇[“文章”](http://camendesign.com/code/developpeurs_sans_frontieres)，它解释了如何仅使用 html 和 body 标签来居中内容。但是我想不通的是如何制作一个全宽的页眉和页脚，同时仍然使用这种方法使我的内容居中。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:26:24.573

我不认为你可以，如果你将`body`标签用作 a `div`，那么它里面的任何其他`div`s 将只有`body`标签的宽度。所以

```
body {
    width: 200px; 
    margin: 20px auto; 
    padding: 20px;
    border: 1px solid black;
} 
```

将使任何`div`s 的最大宽度为 200px。

看到[这个](http://jsfiddle.net/4wkf4/)jsfiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:24:47.753

本文解释说，您可以将内容居中， `margin: 20px auto;` 您需要为页脚和页眉提供相同的 CSS。至少，如果您使用 div 块，它会更容易、更易读和更有条理。也就是说，div 块的用途是……构建您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:37:11.993

**编辑：**我误读了这个问题并将我的答案改写为：

有两种方法可以实现您想要的。首先是绝对定位元素，使其脱离流程并允许您扩展主体外部的宽度，但这会使某些元素复杂化。二是使用负边距。我被拉走了，但如果没有其他人这样做，我稍后会尝试举一个例子。

编辑：很快就把这个拍了。

```
<!doctype html>
<style>
        body{width:980px;margin:0}
        p{position:absolute;width:100%;background:#ccc;}
</style>
<p>One</p> 
```

# java - 使用java套接字将文本文件从客户端发送到服务器

> ID：13331406
> 
> 赞同：1
> 
> 时间：2012-11-11T13:12:42.390
> 
> 标签：java, file, sockets, client-server

这是一个任务。

我正在寻找一些关于我在哪里出错的建议。我的目标是从文件中读取文本，将其发送到服务器并将该文本写入新文件。

问题是我不确定该怎么做，我看过很多例子，但都没有太大帮助。

按原样解释程序。将要求用户输入与该代码的 if 语句相关的代码。我要关注的是代码 200，它是将文件上传到服务器代码。

当我运行代码时，我在下面收到此错误。有人可以向我解释我哪里出错了，我会很感激。

```
 Connection request made
Enter Code: 100 = Login, 200 = Upload, 400 = Logout:
200
java.net.SocketException: Connection reset
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
        at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
        at sun.nio.cs.StreamDecoder.read(Unknown Source)
        at java.io.InputStreamReader.read(Unknown Source)
        at java.io.BufferedReader.fill(Unknown Source)
        at java.io.BufferedReader.readLine(Unknown Source)
        at java.io.BufferedReader.readLine(Unknown Source)
        at MyStreamSocket.receiveMessage(MyStreamSocket.java:50)
        at EchoClientHelper2.getEcho(EchoClientHelper2.java:34)
        at EchoClient2.main(EchoClient2.java:99) 
```

而服务器上的这个错误：

```
 Waiting for a connection.
connection accepted
message received: 200
java.net.SocketException: Socket is not connected
        at java.net.Socket.getInputStream(Unknown Source)
        at EchoServer2.main(EchoServer2.java:71) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:52:40.097

您的`MyStreamSocket`类不需要扩展 Socket。神秘的错误信息是因为 MyStreamSocket 所代表的 Socket 从来没有连接到任何东西。其`socket`成员引用的 Socket 是已连接的。因此，当您从 MyStreamSocket 获取输入流时，它确实没有连接。这会导致错误，这意味着客户端关闭。这会导致套接字关闭，服务器会及时报告

使用 BufferedReader 会给你带来麻烦。它总是尽可能多地读取到它的缓冲区中，因此在文件传输开始时，它将读取“200”消息，然后将被发送的文件的前几 Kb 将被解析为字符数据。结果将是一大堆错误。

我建议您现在摆脱 BufferedReader 并改用 DataInputStream 和 DataOutputStream 。您可以使用 writeUTF 和 readUTF 方法发送您的文本命令。要发送文件，我建议使用简单的块编码。

如果我给你代码，这可能是最简单的。

首先是您的客户类。

```
import java.io.*;
import java.net.InetAddress;

public class EchoClient2 {

    public static void main(String[] args) {
        InputStreamReader is = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(is);

        File file = new File("C:\\MyFile.txt");

        try {
            System.out.println("Welcome to the Echo client.\n"
                    + "What is the name of the server host?");
            String hostName = br.readLine();
            if( hostName.length() == 0 ) // if user did not enter a name
                hostName = "localhost"; // use the default host name
            System.out.println("What is the port number of the server host?");
            String portNum = br.readLine();
            if( portNum.length() == 0 ) portNum = "7"; // default port number
            MyStreamSocket socket = new MyStreamSocket(
                    InetAddress.getByName(hostName), Integer.parseInt(portNum));
            boolean done = false;
            String echo;
            while( !done ) {

                System.out.println("Enter Code: 100 = Login, 200 = Upload, 400 = Logout: ");
                String message = br.readLine();
                boolean messageOK = false;

                if( message.equals("100") ) {
                    messageOK = true;
                    System.out.println("Enter T-Number: (Use Uppercase 'T')");
                    String login = br.readLine();
                    if( login.charAt(0) == 'T' ) {
                        System.out.println("Login Worked fantastically");
                    } else {
                        System.out.println("Login Failed");
                    }
                    socket.sendMessage("100");
                }

                if( message.equals("200") ) {
                    messageOK = true;
                    socket.sendMessage("200");
                    socket.sendFile(file);
                }
                if( (message.trim()).equals("400") ) {
                    messageOK = true;
                    System.out.println("Logged Out");
                    done = true;
                    socket.sendMessage("400");
                    socket.close();
                    break;
                }

                if( ! messageOK ) {
                    System.out.println("Invalid input");
                    continue;
                }

                // get reply from server
                echo = socket.receiveMessage();
                System.out.println(echo);
            } // end while
        } // end try
        catch (Exception ex) {
            ex.printStackTrace();
        } // end catch
    } // end main
} // end class 
```

然后你的服务器类：

```
import java.io.*;
import java.net.*;

public class EchoServer2 {
    static final String loginMessage = "Logged In";

    static final String logoutMessage = "Logged Out";

    public static void main(String[] args) {
        int serverPort = 7; // default port
        String message;

        if( args.length == 1 ) serverPort = Integer.parseInt(args[0]);
        try {
            // instantiates a stream socket for accepting
            // connections
            ServerSocket myConnectionSocket = new ServerSocket(serverPort);
            /**/System.out.println("Daytime server ready.");
            while( true ) { // forever loop
                // wait to accept a connection
                /**/System.out.println("Waiting for a connection.");
                MyStreamSocket myDataSocket = new MyStreamSocket(
                        myConnectionSocket.accept());
                /**/System.out.println("connection accepted");
                boolean done = false;
                while( !done ) {
                    message = myDataSocket.receiveMessage();

                    /**/System.out.println("message received: " + message);

                    if( (message.trim()).equals("400") ) {
                        // Session over; close the data socket.
                        myDataSocket.sendMessage(logoutMessage);
                        myDataSocket.close();
                        done = true;
                    } // end if

                    if( (message.trim()).equals("100") ) {
                        // Login
                        /**/myDataSocket.sendMessage(loginMessage);
                    } // end if

                    if( (message.trim()).equals("200") ) {

                        File outFile = new File("C:\\OutFileServer.txt");
                        myDataSocket.receiveFile(outFile);
                        myDataSocket.sendMessage("File received "+outFile.length()+" bytes");
                    }

                } // end while !done
            } // end while forever
        } // end try
        catch (Exception ex) {
            ex.printStackTrace();
        }
    } // end main
} // end class 
```

然后是 StreamSocket 类：

```
public class MyStreamSocket {
    private Socket socket;

    private DataInputStream input;

    private DataOutputStream output;

    MyStreamSocket(InetAddress acceptorHost, int acceptorPort)
            throws SocketException, IOException {
        socket = new Socket(acceptorHost, acceptorPort);
        setStreams();
    }

    MyStreamSocket(Socket socket) throws IOException {
        this.socket = socket;
        setStreams();
    }

    private void setStreams() throws IOException {
        // get an input stream for reading from the data socket
        input = new DataInputStream(socket.getInputStream());
        output = new DataOutputStream(socket.getOutputStream());
    }

    public void sendMessage(String message) throws IOException {
        output.writeUTF(message);
        output.flush();
    } // end sendMessage

    public String receiveMessage() throws IOException {
        String message = input.readUTF();
        return message;
    } // end receiveMessage

    public void close() throws IOException {
        socket.close();
    }

    public void sendFile(File file) throws IOException {
        FileInputStream fileIn = new FileInputStream(file);
        byte[] buf = new byte[Short.MAX_VALUE];
        int bytesRead;        
        while( (bytesRead = fileIn.read(buf)) != -1 ) {
            output.writeShort(bytesRead);
            output.write(buf,0,bytesRead);
        }
        output.writeShort(-1);
        fileIn.close();
    }

    public void receiveFile(File file) throws IOException {
        FileOutputStream fileOut = new FileOutputStream(file);
        byte[] buf = new byte[Short.MAX_VALUE];
        int bytesSent;        
        while( (bytesSent = input.readShort()) != -1 ) {
            input.readFully(buf,0,bytesSent);
            fileOut.write(buf,0,bytesSent);
        }
        fileOut.close();
    }    
} // end class 
```

抛弃“助手”类。它没有帮助你。

# linux - $ * * * * * echo "hi" => blado.kdb: 找不到命令

> ID：13331408
> 
> 赞同：1
> 
> 时间：2012-11-11T13:12:47.157
> 
> 标签：linux, cron, cron-task

我正在尝试设置一个 cron 作业，即每分钟回显“hi”。

当我这样做时，`* * * * * echo "hi"`我得到`blado.kdb: command not found`. 有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:46:00.283

1.  `crontab -e`在你的 shell 中运行。这将打开一个文本编辑器
2.  然后才输入`* * * * * echo "hi"`。保存文本编辑器刚刚为您打开的文件

您的 Cron 任务现已设置

PS：`echo "hi"`会在空白处打印“hi”，如果你想看到一些结果，设置一个任务如`* * * * * touch /tmp/foo`，你会看到每分钟更新一次修改日期（`ls -l /tmp/foo`）

# asp.net-mvc - 将使用 AntiForgeryToken 足以覆盖 POST 操作方法中的授权规则

> ID：13331410
> 
> 赞同：1
> 
> 时间：2012-11-11T13:12:56.383
> 
> 标签：asp.net-mvc, asp.net-mvc-3

将使用 AntiForgeryToken 涵盖 POST 操作方法中的授权规则我有以下 Create.cshtml 视图用于创建新订单：-

```
@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <fieldset>
        <legend>Create New Order</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.OrderName)
                @Html.TextBoxFor(m => m.OrderName)
            </li>
            <li>
                @Html.LabelFor(m => m.OrderType)
                @Html.TextBoxFor (m => m. OrderType)
            </li>
            <li>
                @Html.LabelFor(m => m.OrderDate)
                @Html.TextBoxFor(m => m. OrderDate)
            </li>
        </ol>
        <input type="submit" value="Create" />
    </fieldset>
} 
```

调用以下 GET 操作方法时将呈现上述视图：-

```
[Authorize (Roles="customerservice")]
        public ActionResult Create()
        {
            return View("Create");
        } 
```

POST 操作方法是：-

```
 //
        // POST: /Create

        [HttpPost]

        [ValidateAntiForgeryToken]
[Authorize (Roles="customerservice")]
        public ActionResult Create(Order r)
        {

            // Code goes here
            return View(model);
        } 
```

现在我的问题如下： -

1.  因为我在我看来使用的是 Antiforgery 令牌，所以我将保证对“POST：/ Create”的任何有效调用都已完成；从应用程序本身 + 当用户在 Create 视图内时，这意味着用户在 customerservice 角色下。

2.  那么这是否意味着如果我从 POST Create 操作方法中删除授权属性，那么我仍然安全吗？因为如果应用程序收到“POST：Create”请求，那么这意味着用户已经获得“Get：/Create”操作方法的授权，并且该请求是从 Create 视图发送的？关于上述问题的任何评论。最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:18:00.993

`AntiForgeryToken`由三个项目组成：

*   动作属性
*   视图中的辅助方法
*   曲奇饼

`AntiForgeryToken`每个请求都不是唯一的，因此如果未登录用户，则存在潜在风险。

# java - 无法连接到 sql server 2008 实例

> ID：13331415
> 
> 赞同：0
> 
> 时间：2012-11-11T13:13:20.640
> 
> 标签：java, database, sql-server-2008, hibernate, jdbc

我已经通过 SQL Server 2008 R2 安装设置了实例 SQLEXPRESS，添加了一个具有所有服务器角色的安全登录，一个称为“sqluser”。

每当我尝试连接连接时都会遇到异常。连接字符串是从以下内容构建的：

```
<db.driverClassName>com.microsoft.sqlserver.jdbc.SQLServerDriver</db.driverClassName>
<database.username>sqluser</database.username>
<database.password>qwerty</database.password>
<database.schemaname>dbo</database.schemaname>
<database.url>jdbc:sqlserver://localhost\SQLEXPRESS</database.url> 
```

但是连接面临这个堆栈跟踪根本原因：

```
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The connection to the host localhost, named instance sqlexpress failed. Error: "java.net.SocketTimeoutException: Receive timed out". Verify the server and instance names and check that no firewall is blocking UDP traffic to port 1434\.  For SQL Server 2005 or later, verify that the SQL Server Browser Service is running on the host.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.getInstancePort(SQLServerConnection.java:3589)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.primaryPermissionCheck(SQLServerConnection.java:1225)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:972)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
    ... 71 more 
```

服务器身份验证为 SQL Server 和 Windows 身份验证模式。但是，当我指定 -S 属性时，登录失败。

没有启用防火墙，SQL 服务器甚至接受来自远程主机的连接。

```
C:\Users\user>sqlcmd -U sqluser -P qwerty -Q "Select * FROM testdb.dbo.testtable" 
```

输出：

```
integer
-------
      1
      2
      3
      4

(4 rows affected) 
```

但是，当指定“本地主机”时，查询失败......问题是为什么？

```
C:\Users\user>sqlcmd -S localhost/sqlexpress -U cpt -P 1234 -Q "Select * FROM cpt.dbo.testme" 
```

输出：

```
HResult 0x43, Level 16, State 1
Named Pipes Provider: Could not open a connection to SQL Server [67].
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : A network-related or in    stance-specific error .....
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : Login timeout expired. 
```

如果有人想知道，用 '%COMPUTERNAME' 更改 'localhost' 是相同的结果。服务器作为 LocalSystem 实例运行。

*编辑* 给喇嘛分配答案，虽然它主要是提示:)这是我对这个问题的解决方案：

1) 检查 tcp ip 所有侦听器端口是否设置为 1434 2) 检查连接字符串是否正确设置 (database.url) 3) 检查登录是否有足够的访问权限（与此特定堆栈跟踪无关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:44:43.590

我们是否相当确定这里唯一的问题只是“本地主机”？

只是为了规则输入或输出，您可以尝试使用斜线以正确的方式使用 sqlcmd 并正确登录（如您的帖子前面所述），看看它是否有效：

```
sqlcmd -S localhost\sqlexpress -U sqluser -P qwerty -Q "Select * FROM cpt.dbo.testme" 
```

您提到它接受来自远程主机的命令，但您的示例命令行未指定要连接的服务器，因此这不可能从远程主机运行。

jdbc 代码是否与 SQL Server 在同一台机器上运行？这将告诉我们是否可以从分析中排除防火墙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T08:17:46.570

我已经解决了这个问题，不记得是 HOST / INSTANCE 或 tcp/ip 之间的**/**没有监听。这些是我用于创建登录、数据库和正确设置 SQL 服务的脚本命令：

将设置混合身份验证并打开 tcpport 1433 的批处理作业：

```
echo off
rem is sql server installed at this build number?
reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS" >nul
if %errorlevel% EQU 0 (
echo SET : SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp\Enabled : True
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\"&_
 "MSSQL10_50.SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp" /v Enabled /t REG_DWORD /d 0x1 /f
echo SET : SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp\ListenOnAllIPs : True
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\"&_
  "MSSQL10_50.SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp" /v ListenOnAllIPs /t REG_DWORD /d 0x1 /f
echo SET : SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp\IPAll\TcpPort : 1433
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\"&_
  "MSSQL10_50.SQLEXPRESS\MSSQLServer\SuperSocketNetLib\Tcp\IPAll" /v TcpPort /d 1433 /f
reg add "HKEY_LOCAL_MACHINE\Software\Microsoft\MSSQLServer" /t REG_DWORD /v LoginMode /d 2 /f
) 
```

将创建登录并设置混合身份验证的 SQL 脚本

```
CREATE DATABASE dbnamehere;
GO
USE [master]
GO
CREATE LOGIN [usernamehere] WITH PASSWORD=N'1234', DEFAULT_DATABASE=[dbnamehere], CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'bulkadmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'dbcreator'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'diskadmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'processadmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'securityadmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'serveradmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'setupadmin'
GO
EXEC master..sp_addsrvrolemember @loginame = N'usernamehere', @rolename = N'sysadmin'
GO
EXEC xp_instance_regwrite N'HKEY_LOCAL_MACHINE', N'Software\Microsoft\MSSQLServer\MSSQLServer', N'LoginMode', REG_DWORD, 2
GO 
```

最后，断言正确的服务在机器重启时运行

```
@echo off
sc config "MSSQL$SQLEXPRESS"  start= auto
sc failure "MSSQL$SQLEXPRESS"  actions= restart/180000/restart/180000/""/180000 reset= 86400
sc config "SQLBrowser"  start= auto
sc failure "SQLBrowser"  actions= restart/180000/restart/180000/""/180000 reset= 86400
net stop MSSQL$SQLEXPRESS
net start MSSQL$SQLEXPRESS
sc config "SQLBrowser"  depend= "MSSQL$SQLEXPRESS"
net stop SQLBrowser
net start SQLBrowser 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T13:24:14.203

尝试：

```
C:\Users\user>sqlcmd -S 192.168.01\sqlexpress
    -U cpt -P 1234 -Q "Select * FROM cpt.dbo.testme" 
```

检查：如果 SuperSocket 在 localhost 上运行，请检查 SQL-Server-Log。如果没有，开始配置。

# html - 从谷歌搜索表单中收集查询

> ID：13331418
> 
> 赞同：0
> 
> 时间：2012-11-11T13:13:38.757
> 
> 标签：html, forms, search

我有以下表格：

```
<form id="search_form" method="get" action="http://www.google.com/search" onsubmit="runsearch(this);return false;" target='search'> 
```

如何将输入到表单中的搜索查询收集到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:40:17.280

在不了解您的服务器设置的情况下，这是尽可能具体的。适当地，谷歌将帮助您弄清楚如何执行以下操作：

1.  做一个数据库。询问您的托管服务提供商提供的数据库类型以及您的服务器上有什么，并为该数据库的用户设置用户名/密码。最常见的是通过控制面板或 phpMyAdmin 访问 MySQL
2.  通过 Web GUI（可能）或使用 SQL 脚本使您的表称为“搜索”
3.  为该表定义数据结构，通常是创建日期、ID 和内容
4.  让 runsearch() 中的 javascript 也向后端提交查询字符​​串或 json 数据
5.  让后端连接到您的数据库并插入包含搜索数据的行

# python - 将相同的字符串添加到列表中的所有项目

> ID：13331419
> 
> 赞同：20
> 
> 时间：2012-11-11T13:13:41.093
> 
> 标签：python

已通过 Stack Exchange 进行了一些搜索，回答了问题，但无法找到我要查找的内容。

给定以下列表：

```
a = [1, 2, 3, 4] 
```

我将如何创建：

```
a = ['hello1', 'hello2', 'hello3', 'hello4'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-11T13:14:44.317

使用[列表理解](http://docs.python.org/3/reference/expressions.html#list-displays)：

```
[f'hello{i}' for i in a] 
```

列表推导式允许您将表达式应用于序列中的每个元素。这里的表达式是一个[格式化的字符串文字](https://docs.python.org/3/tutorial/inputoutput.html#fancier-output-formatting)，并入以 .`i`开头的字符串`hello`。

演示：

```
>>> a = [1,2,3,4]
>>> [f'hello{i}' for i in a]
['hello1', 'hello2', 'hello3', 'hello4'] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-11T13:20:15.247

另一种选择是使用[内置的地图功能](http://docs.python.org/2/library/functions.html#map)：

```
a = range(10)
map(lambda x: 'hello%i' % x, a) 
```

根据 WolframH 评论编辑：

```
map('hello{0}'.format, a) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:14:40.307

使用[列表理解](http://docs.python.org/2/reference/expressions.html#list-displays)：

```
In [1]: a = [1,2,3,4]

In [2]: ["hello" + str(x) for x in a]
Out[2]: ['hello1', 'hello2', 'hello3', 'hello4'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-07T09:48:07.753

你也可以使用`%`而不是`format()`

```
>>> a = [1, 2, 3, 4]
>>> ['hello%s' % i for i in a]
['hello1', 'hello2', 'hello3', 'hello4'] 
```

# php - Android WebView 嵌入式（flash）视频播放器

> ID：13331420
> 
> 赞同：0
> 
> 时间：2012-11-11T13:13:55.293
> 
> 标签：php, android, html, flash, webview

**情况**

在我的应用程序中，我有一个`WebView`从 url 将其数据加载到 IFrame 中的方法。

代码片段：

```
String url = www.myexampleurl.com/video1.html;
String data = "<IFRAME SRC=" + url + " FRAMEBORDER=0 ... />";
WebView.loadData(data, MIME_TYPE, ENCODING); 
```

该网站本身将他的视频加载到 Flash 播放器中，我只是将其显示在`WebView`. 这很完美，但有一个讨厌的旁注...... Android 已停止支持 Flash，这意味着将来我的应用程序将不再默认运行。-不能接受的！-

**我已经尝试过的**

*更换flashplayer的解决方法*

我获取了提供给 flashplayer 的视频的 url，并将其直接加载到一个`VideoView`或`WebView`HTML5 中。这些工作解决方案有效！完美的！但又是一个讨厌的旁注。

网址（例如 www.myexampleurl.com/video1/video.mp4）通常由网站创建（我认为是针对每个会话）。这意味着我没有一致的视频路径来加载我的`View`. 我第一种使用 flashplayer 的方法的优点是`Webview`flashplayer 可以完成所有工作。

*获取正确视频网址的解决方案*

还没有严重的问题，因为我也可以解决这个问题。我可以做一些 PHP/DOM 脚本，它会从网站上抓取视频 URL 并将其返回给我的应用程序。这样我总是有通用 url，我的视频可以加载到我的`View`. 再次有效！再一次..有一个旁注..

我不能直接访问我有 flashplayer 的网站。流程可以如下：

1.  输入 www.myexampleurl.com/video1.html
2.  获取消息：等待 5 秒
3.  点击继续
4.  视频开始在 flashplayer 内播放。

问题是我只有在第 3 步之后才能获得我的视频网址。

**问题**

有没有办法解决我的get-the-generic-url问题？还是播放视频的更好方法？

-- 在 Android 中继续支持 Flash 是不好的、非常不好的还是非常不好的做法？我也可以只提供 flashplayer .apk 并让用户安装它..

谢谢，希望有人可以帮助我:)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:18:07.223

不要吸毒。不要闪现。

在您可以控制的服务器上获取文件，以便您可以提供正确的路径。如果这不是一个选项，您将拥有一个应用程序，该应用程序可以在网站所有者决定更改路径的任何时候停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:54:39.433

解析 www.myexampleurl.com/video1.html 是获取所需网址的唯一方法吗？也许你可以在客户端而不是在你的服务器中做 PHP/dom 的东西：使用一个不可见`WebView`的来加载 www.myexampleurl.com/video1.html 并尝试从中获取 url。 `WebViewClient::onLoadResource(WebView view, String url)`可能会有所帮助（我不确定）。这个任务必须通过黑客来完成`WebView`，问题是它会有多复杂。

# javascript - 以可扩展的方式切换 JavaScript webapp 中的 i18n 字段

> ID：13331421
> 
> 赞同：0
> 
> 时间：2012-11-11T13:14:05.253
> 
> 标签：javascript, user-interface, scalable

我正在编写一个 100% JavaScript webapp 来管理产品目录。除其他外，我正在使用 Backbone & Mustache。

每个产品都有一个名称，需要翻译。因此，对于每个产品，我添加的`<input>`元素与要翻译的语言一样多，如下所示：

```
<input type="text" name="name_fr" value="Bonjour" class="i18n lang_fr">
<input type="text" name="name_en" value="Hello" class="i18n lang_en">
<input type="text" name="name_es" value="Hola" class="i18n lang_es"> 
```

`<input>`我根据当前选择的依赖 CSS 类的语言、第一次渲染以及用户更改语言时显示/隐藏元素：

```
变量 $html = ...; // 渲染 Mustache 模板

var cssClass = 'lang_' + currentLanguageId;

$html.find('.i18n.' + cssClass).show();
$html.find('.i18n:not(.' + cssClass + ')').hide();

```

这种方法可能有点幼稚，但它很简单，因为每个输入字段的属性中都包含保存数据所需的所有信息。`blur`当用户离开现场时，我正在监听事件以保存数据。

问题是当元素数量增加时语言切换很**慢。**

我在使用好的技术吗？我不认为在语言更改时重新渲染产品项目是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:20:10.787

您不能使用 css 而不是 javascript 来切换显示/隐藏吗？

例如：

```
.lang_fr,.lang_en,.lang_es {display:none}
.fr .lang_fr {display:inline}
.en .lang_en {display:inline}
.es .lang_es {display:inline}

...

<div class="fr">
  <input type="text" name="name_fr" value="Bonjour" class="i18n lang_fr">
  <input type="text" name="name_en" value="Hello" class="i18n lang_en">
  <input type="text" name="name_es" value="Hola" class="i18n lang_es">
</div> 
```

然后只需切换`fr`外部 div 的类。

# java - 从地图中获取具有未知通用参数的对象 >

> ID：13331426
> 
> 赞同：0
> 
> 时间：2012-11-11T13:14:47.793
> 
> 标签：java, generics

我有

```
public class Entity 
```

在哪个工作班上：

```
public class Table<Target extends Entity>
{
    public boolean save (Target target)
    public Target load (int id)
} 
```

直到我将 Table 类的这个对象放在数据库类 Map 中，一切都很好，但是：

```
public class Database
{
    public String name;
    public Map<String, Table<? extends Entity>> tables = new HashMap <String, Table<? extends Entity>> ();
    public Context context;
    public int version;
    public Database (Context context, int version)
    {
        this.context = context;
        this.version = version;
    }
    public void add (Table<? extends Entity> table)
    {
        tables.put(table.name, table);
    }
    public Table <? extends Entity> table (String name)
    {
        return (Table<? extends Entity>) tables.get(name);
    }

} 
```

假设我们有：

```
 public class Apple extends Entity 
```

我希望这段代码能够工作：

```
 //init      
    database = new Database(getBaseContext(), 4);
    new Table<Apple> (database, Apple.class);

    //this is where solution need occurs !
    database.table("apples").save (new Apple("green apple")); 
```

**类型 Table(capture#1-of ? extends Entity) 中的方法 save(capture#1-of ? extends Entity) 不适用于参数（注）**

如何使 map.get 方法起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:25:44.053

为了使这更方便，您可以做的一件事是按目标类映射表：

```
Map<Class<? extends Entity>, Table<? extends Entity>> tables;

public void <T extends Entity> addTable(Class<T> cls, Table<T> table) {
    tables.put(cls, table);
    // alternately make it possible to get the target class from the table
}

@SuppressWarnings("unchecked")
public <T extends Entity> Table<T> getTable(Class<T> cls) {
    return (Table<T>) tables.get(cls);
} 
```

正如注释所暗示的那样，这根本不是类型安全的——你需要确保你永远不会不匹配`tables`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:46:01.713

感谢用户millimoose，我修改了数据库类：

```
public class Database
{
    public String name;
    public Map<Class<? extends Entity>, Table<? extends Entity>> tables = new HashMap <Class<? extends Entity>, Table<? extends Entity>> ();
    public Context context;
    public int version;
    public Database (Context context, String name, int version)
    {
        this.name = name;
        this.context = context;
        this.version = version;
    }

    public <Target extends Entity> void add (Class<Target> target, Table<Target> table) 
    {
        tables.put(target, table);
    }   

    @SuppressWarnings("unchecked")
    public <Target extends Entity> Table<Target> table (Class<Target> target) 
    {
        return (Table<Target>) tables.get (target);
    }   
} 
```

之后就可以像这样使用它：

```
 database = new Database(getBaseContext(),"notes", 1);
    database.add (Note.class, new Table<Note> (database, Note.class));

    database.table(Note.class).save (new Note("first note"));
    database.table(Note.class).save (new Note("second note"));
    database.table(Note.class).save (new Note("best note"));

    items.addAll(database.table(Note.class).load()); 
```

似乎我还没有足够的技能知道它为什么起作用，但是在映射键中添加 (Class(? extends Entity) 解决了问题。

# linux - 如何打印 bash 的真实执行路径，即 type -f 类似于 type -a 之类的东西？

> ID：13331429
> 
> 赞同：1
> 
> 时间：2012-11-11T13:15:04.467
> 
> 标签：linux, bash, shell

我想用类似于(all)`type`的选项(follow) 来调用。`-f``-a`

以下是我的问题：

1.  是否有内置的 Bash 来打印如何`bash`执行命令？
2.  是否有 Linux 实用程序可以打印任何 shell 如何执行命令？
3.  我正在使用的以下 shell 函数可以简化吗？

给定以下定义并`/usr/local/bin/ls`链接到`/usr/bin/ls`：

```
alias ls="\ls -h --color=auto"
alias lsa="ls -A"
alias lsh="lsa -I'*'" 
```

`rcommand lsh`印刷：

```
alias lsh='lsa -I'\''*'\'''
alias lsa='ls -A'
alias ls='\ls -h --color=auto'
link /usr/local/bin/ls
file /usr/bin/ls 
```

这是我在 .bashrc 文件中定义的 shell 函数：

```
function rcommand {
  declare -r a="${1#\\}"
  declare -r b="$(type -t "$a")"
  if [[ "$b" == alias && "$a" == "$1" ]]; then
    declare -r c="$(command -v "$a")"
    echo "$c"
    declare -r d="$(echo "$c" | sed "s/^.*='\\\\\\?\(\w\+\).*$/\1/")"
    if [[ "$d" == "$a" ]]; then
      rcommand  "\\$d"
    else
      rcommand  "$d"
    fi
  elif [[ "$b" == builtin || "$b" == function || "$b" == keyword ]]; then
    echo "$b $a"
  else
    declare -r c="$(declare -F "$a")"
    if [[ "$c" == "$a" ]]; then
      echo "function $a"
    else
      declare -r d="$(type -P "$a")"
      if [[ -h "$d" ]]; then
        echo "link $d"
        rcommand "$(readlink "$d")"
      elif [[ -e "$d" ]]; then
        echo "file $d"
      fi
    fi
  fi
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:05:44.830

您的意思是在和/或`set -x`中*跟踪*命令吗？`bash``sh`

无论如何，您的脚本看起来很漂亮。我的版本有一些替代品......

```
function rcommand() {
  local b="$(type -t "$1")"
  case $b in
    alias )
          local c="$(command -v "$1")"
          echo $c
          local d=$(sed "s/^.*='\?\([^ ]\+\) .*$/\1/" <<<$c)
          if [[ "$d" == "$1" ]]; then
              rcommand  "\\$d"
          else
              rcommand  "$d"
          fi
          ;;
      builtin | function | keyword )
          echo "$b $1"
          ;;
      * )
          local a="${1#\\}"
          local c="$(declare -F "$a")"
          if [[ "$c" == "$a" ]]; then
              echo "function $a"
          else
              local d="$(type -P "$a")"
              if [ -h "$d" ]; then
                  echo "link $d"
                  rcommand "$(readlink "$d")"
              elif [ -e "$d" ]; then
                  echo "file $d"
              fi
          fi
  esac
} 
```

# html - ios中的html渲染

> ID：13331433
> 
> 赞同：1
> 
> 时间：2012-11-11T13:15:42.547
> 
> 标签：html, ios

为了在我的 ios 应用程序的描述部分呈现 html 标签。我正在使用“核心文本扩展”通常它工作 100%。但有时它不起作用。它显示一个空白部分。前任 - ：

> COMITE DE SELECTION « ARTWIGO »
> 
> 评论ÇA MARCHE ?
>  
> 
> But et objectifs du comité de sélection
> 
> Le but de notre comité de sélection est d'opérer un choix, réfléchi et cohérent, des artistes présentés par ARTWIGO ; ceci, afin de préserver la qualité et le niveau nécessaires au succès de l'application et donc, de garantir la Promotion des Artistes。
> Cette sélection tient compte de critères spécifiques à chaque type d'expression artiques。
> Le comité est composé de spécialistes, indépendants, reconnus dans chaque domaine proposé par « Artwigo » et venant d'univers différents ;
> 
> Le comité de sélection est constitué de 11 membres répartis de la manière suivante :
> - 3 名成员 « 基金会» composant le Bureau
> - 6 名成员组成 lecomitéconsultatif。
> Christine Jamart, rédactrice en chef de l'Art Même。Bruxelles
> Carine Fol，Directrice Artistique de La Centrale Electrique。布鲁塞尔
> Joël Benzakin，贝拉版。Bruxelles
> Jean-Louis Godefroid，Directeur Espace Contretype。Bruxelles
> André Goldberg，resonable Secteur Arts Plastiques au Centre Culturel Jacques Franck。Bruxelles
> Emmanuel d'Autreppe，responsable de l'Annexe des Brasseurs（当代艺术）。Liège
> 
> La composition du Bureau du Comité est la suivante :
> Le Directeur du Comité : Jean-François Picaud Laethier de Morfouace 总秘书                             
> : Carole de Vleeschouwer     
> le Rapporteur : Joël Van Audenhaege
> 
> Le comité de sélection se prononce à la majorité des voix。
> 
> Confidentialité   
> 
> Le résultat des votes et leurs motivations ne sont pasfournis aux candidats。
> Les candidats sont juste informés, par email, de l'acceptation ou du rejet de leur candidature par la Secrétaire générale。
> 参考 jfplm08-10-2012

我使用以下代码结构渲染它

> htmlText = [htmlText stringByReplacingOccurrencesOfString:@"''" withString:@"'"]; NSData *data = [htmlText dataUsingEncoding:NSUTF8StringEncoding]; NSAttributedString *string = [[NSAttributedString alloc] initWithHTML:data options:nil documentAttributes:NULL];

```
[DTAttributedTextContentView setLayerClass:[CATiledLayer class]];
DTAttributedTextView  *_textView = [[DTAttributedTextView alloc] initWithFrame:frame];
_textView.textDelegate = self;
_textView.attributedString = string;
[self.view addSubview:_textView]; 
```

我不知道原因，但它没有正确呈现这个问题是否有任何解决方案谢谢

# c - 在 char 指针中搜索 '\n 使用 c

> ID：13331435
> 
> 赞同：1
> 
> 时间：2012-11-11T13:15:49.253
> 
> 标签：c, gcc

我正在尝试循环一个 char*str 使用它来找出有多少行：

```
char *str = "test1\ntest2\ntest3";

int lines = 0;

for(int i = 0 ; i < ?? ; i ++ )
{
    if(str[i] == '\n') {
        lines++;
    }
} 
```

我不知道该放什么？？？，问题是：

1.我的意思是我需要使用 strlen(str) + 1 吗？

2.当str为“test1\ntest2\ntest3\n”时，代码是否仍然计算正确的行？

顺便说一下，我正在使用 gcc，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T13:18:27.443

每个文字字符串`\0`都以空字符结尾。它描述了字符串的结尾

所以，你可以这样做

```
for(int i = 0 ; str[i]!='\0' ; i ++ ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T13:25:56.440

扩展已经存在的好答案：循环遍历 C 字符串的惯用方式是

```
const char *s = "abc\ndef\nghi\n";
int lines = 0;
int nonempty = 0;
while (*s) {
    nonempty = 1;
    if (*s++ == '\n') lines++;
} 
```

如果您不想将最后一个空行计为单独的行，则添加

```
if (nonempty && s[-1] == '\n' && lines > 0) lines--; 
```

`while`循环之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:23:40.580

无论最后一个字符是否为换行符，以下内容都将提供相同的结果。

```
char *abc = "test1\ntest2\ntest3";

int lines = 0;

{
    bool lastWasNewline = true;
    char * p = abc;
    for (; *p; ++p) {
        if (lastWasNewline) ++lines;
        lastWasNewline = *p == '\n';
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T13:19:17.717

获取字符串的长度并遍历所有字符。

```
const unsigned long length=strlen(str);
for(int i = 0 ; i < length ; i ++ )
{
     if(str[i] == '\n') {
       lines++;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T13:17:19.413

代替`??`put`strlen(abc)`并确保`#include <string.h>`

为了更好的效率做

`int length= strlen(abc);`

然后使用`i < length`

或使用`str[i]!= '\0'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T13:19:23.133

> 1.我的意思是我需要使用 strlen(str) + 1 吗？

不，只使用`str[i]`for `i < ??`，这会测试是否是`0`终止字符串的字符

> 2.当abc为“test1\ntest2\ntest3\n”时，代码是否仍然计算正确的行？

不，您的代码假定输入被分成每个缓冲区一个输入行`line[j]`。

# php - 在 PDO 中使用 where 选择使用 php mysql

> ID：13331441
> 
> 赞同：0
> 
> 时间：2012-11-11T13:16:44.497
> 
> 标签：php, mysql, pdo

我正在尝试在 php 和 mysql 中编写一个函数来使用 PDO 从 PHP 和 mysql 中选择值

```
function getRec($id=0)
{
    ($id==0?$addQuery="":$addQuery=" where id =".$id);
    $statement = $dbh->prepare("select * from TCMS :name order by id");
    $statement->execute(array(':name' => $addQuery));
    $row = $statement->fetchAll(); 
    return $row ;
} 
```

我有错误

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 /Applications/XAMPP/xamppfiles/htdoc 中的 '' where id =2' order by id' at line 1' 附近使用正确的语法

实际上我正在尝试什么

如果传递了 ID 的值 (2)，则语句将是

```
select * from TCMS where id=2 order by id 
```

如果 ID=0 则选择语句将是

```
select * from TCMS order by id 
```

我是 PDO 的新手，不确定确切的语法。

这该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:23:58.817

改为这样做：

```
function getRec($id=0)
{
    //($id==0?$addQuery="":$addQuery=" where id =".$id);
    if ($id == 0)
    {
        $statement = $dbh->prepare("select * from TCMS order by id");
        $statement->execute();
    }
    else
    {
        // Notice the SQL string has changed. Placeholder :name now properly takes the place of a SQL value.
        $statement = $dbh->prepare("select * from TCMS where id = :name order by id");
        $statement->execute(array(':name' => $id));
    }

    $row = $statement->fetchAll(); 
    return $row ;
} 
```

你做错了什么是你试图用占位符绑定和执行 SQL 作为任意字符串值，这不是占位符的用途。

占位符将设置在值的位置（不是表名或其他任何内容），以便在执行期间传入的值将由 PDO 在内部正确处理以进行正确的转义。

我编写的函数应该有助于创建有效的 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T13:24:19.423

如果需要动态添加`WHERE`子句，先构造SQL字符串， 再构造`prepare()`它。如果满足添加参数的条件，则必须*有条件*地将适当的占位符/值对添加到传入的数组中`execute()`。

您不能将占位符绑定为任意 SQL 字符串。

```
// Array to pass into execute()
$values = array();

// Start your SQL...
$sql = "SELECT * FROM TCMS";
// Add the WHERE clause if $id is not zero
if ($id !== 0) {
   $sql .= " WHERE id=:name ";
   // And add the placeholder into the array
   $values[':name'] = $id);
} 
// add the ORDER BY clause
$sql .= " ORDER BY id";

// Prepare the statement
$statement = $dbh->prepare($sql);

$statement->execute($values);
// fetch, etc... 
```

# cocos2d-iphone - Cocos2d 重启当前场景

> ID：13331443
> 
> 赞同：2
> 
> 时间：2012-11-11T13:16:50.113
> 
> 标签：cocos2d-iphone

我在游戏中添加了一个关卡结束层，每个关卡都有自己的场景。我希望能够重新启动当前场景。显然场景会改变，但图层将保持不变。这是怎么做的。我试过了-

```
 CCScene *currentScene = [[CCDirector sharedDirector]runningScene];
    [[CCDirector sharedDirector]replaceScene:currentScene]; 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:39:47.533

这不起作用，因为您不能用自身替换相同的场景对象：

```
CCScene *currentScene = [[CCDirector sharedDirector]runningScene];
[[CCDirector sharedDirector]replaceScene:currentScene]; 
```

相反，您必须创建场景的新实例，如下所示：

```
[[CCDirector sharedDirector] replaceScene:[YourSceneClass scene]]; 
```

如果您不知道当前的场景类是什么，那么这应该可以工作：

```
CCScene *currentScene = [CCDirector sharedDirector].runningScene;
CCScene *newScene = [[[currentScene class] alloc] init];
[[CCDirector sharedDirector] replaceScene:newScene]; 
```

假设您现在像每个人一样使用 ARC。否则添加自动释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:51:17.037

我遇到了同样的问题。我试过这个

```
CCScene *currentScene = [CCDirector sharedDirector].runningScene;
CCScene *newScene = [[[currentScene class] alloc] init];
[[CCDirector sharedDirector] replaceScene:newScene]; 
```

它给了我一个空白屏幕。

问题是这条线

```
CCScene *newScene = [[[currentScene class] alloc] init]; 
```

[currentScene 类] 实际上返回 CCScene..

因此

```
[CCScene alloc] init] gives us a blank screen. 
```

我解决这个问题的方法是为我的每个场景类设置标签。

例如：

```
+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];
    scene.tag = 1;

// 'layer' is an autorelease object.
GameOneLayer * layer = [[[GameOneLayer alloc] init];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
} 
```

希望这可以帮助。

# scala - 使用地图元素作为方法参数

> ID：13331444
> 
> 赞同：3
> 
> 时间：2012-11-11T13:16:55.293
> 
> 标签：scala

我已经坚持了一段时间了：我有这个方法

```
Method(a: (A,B)*): Unit 
```

我有一个 Map[A,B] 类型的地图，有没有办法转换这个地图，以便我可以直接将它用作参数？就像是：

```
Method(map.convert) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T13:29:39.647

`Map`您可以使用a 从 a 构建一系列对`.toSeq`。

您还可以通过使用`Seq[T]`“强制转换”来将类型序列作为可变参数传递`: _*`。

链接转换以实现您想要的：

```
scala> val m = Map('a' -> 1, 'b' -> 2, 'z' -> 26)
m: scala.collection.immutable.Map[Char,Int] = Map(a -> 1, b -> 2, z -> 26)

scala> def foo[A,B](pairs : (A,B)*) = pairs.foreach(println)
foo: [A, B](pairs: (A, B)*)Unit

scala> foo(m.toSeq : _*)
(a,1)
(b,2)
(z,26) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:33:29.993

我不确定，但您可以尝试将 map 转换为元组数组，然后将其转换为 vararg 类型，如下所示：

```
Method(map.toArray: _*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:36:18.327

只需使用“.toSeq”将映射转换为对序列，并将其传递给后缀为“:_*”的 var-args 方法（这是 Scala 语法，允许将序列作为参数传递给 var-args 方法）。

例子：

```
def m(a: (String, Int)*) { for ((k, v) <- a) println(k+"->"+v) }
val x= Map("a" -> 1, "b" -> 2)
m(x.toSeq:_*) 
```

在回复中：

```
scala>   def m(a: (String, Int)*) { for ((k, v) <- a) println(k+"->"+v) }
m: (a: (String, Int)*)Unit

scala>   val x= Map("a" -> 1, "b" -> 2)
x: scala.collection.immutable.Map[java.lang.String,Int] = Map(a -> 1, b -> 2)

scala>   m(x.toSeq:_*)
a->1
b->2 
```

# jquery - jQuery 滑块显示为 [object object] 并且不对齐

> ID：13331446
> 
> 赞同：-1
> 
> 时间：2012-11-11T13:17:04.980
> 
> 标签：jquery, html, css

我在设置 jQuery 滑块并确保它与我的其他元素很好地对齐时遇到问题（当涉及到垂直和水平的间距/定位以保持一致性时）。此外，它现在只是显示为 [object object]。关于如何解决这个问题的任何想法？到目前为止，这是我的代码：http: [//jsfiddle.net/dhExk/1/](http://jsfiddle.net/dhExk/1/)

**HTML**

```
<div style="padding-top: 10px; text-align: center; font-size: 12px;">
      <div align="left" style="padding-bottom: 20px">
         <div style="padding-bottom: 10px">
        <div style="padding-bottom: 10px; font-size: 16px">Search By:</div>
            <div style="padding-bottom: 10px;">
          <div class="modal_field2">Park:</div>
          <select>
            <option selected="selected">Any</option>
              </select>
        </div>
        <div class="modal_field2">Building:</div>
          <select>
            <option selected="selected">Any</option>
                </select>
        </div>
        <div class="modal_field2">Room Type:</div>
          <select>
            <option selected="selected">Any</option>
          </select>
     </div>
      <div class="modal_field2" style="text-align: left">No of Students:</div>
      <div style="display: inline-block; padding-bottom: 20px; float: right">
        <input type="text" id="amount" style="border: 0; color: #000; background-color: #fff; font-size: 12px;" disabled="disabled"/>
</div>
       </div>​ 
```

**CSS**

```
.modal_field2 {
    width: 100px;
    float: left;
    padding-top: 3px;
}​ 
```

**JS**

```
$(function() {
    $("#slider").slider({
        value: 50,
        min: 20,
        max: 400,
        step: 10,
        slide: function(event, ui) {
            $("#amount").val("" + ui.value);
        }
    });
    $("#amount").val("" + $("#slider").slider("value"));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:23:45.077

`$("#slider")`是一个选择器，用于选择具有 id 的元素`slider`。你没有 ID 的元素`slider`，所以没有滑块，滑块值将是一个对象，因为有一个明显的错误，没有滑块？

[**小提琴**](http://jsfiddle.net/dhExk/2/)

# c++ - C++中的静态函数调用非静态函数

> ID：13331447
> 
> 赞同：11
> 
> 时间：2012-11-11T13:17:17.110
> 
> 标签：c++, static

我有一个像::

```
Class Test
{
  public:
  void Check(){//dosomething};
  static void call(){//I want to call check()};
}; 
```

因为call()是静态成员，所以不能调用非静态函数，所以我觉得call()中使用Check()就是创建Test指针，然后指向Check()，但我认为是不好，有没有更好的方法来做到这一点？我可以重写静态函数中的所有东西，所以我不需要再次调用 Check()，但我想要的是重用 Check() 中的代码并避免重复代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T13:23:03.140

由于您需要一个实例，您要么必须创建一个实例，使用静态实例，要么将其传递给`call()`：

```
Class Test
{
  private:
  static Test instance;

  public:
  void Check(){//dosomething};
  // use one of the following:
  static void call(Test& t){ t.check(); };
  static void call(){ Test t; t.check(); };
  static void call(){ instance.check(); };
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T13:22:15.203

这听起来像是在进行一些糟糕的设计。

无论如何，您可以做的是在调用中创建一个 Test 实例，然后在该实例上调用 Check。那么 call 的实现将是这样的：

```
void call(){
  Test test;
  test.Check();
} 
```

但是，请注意，如果 Check 对 Test 的成员做某事，它当然只会应用于创建的 Test 对象。我会重新考虑您是否真的希望 call 是静态的，或者 Check 不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:24:44.857

对此没有简单的答案。您可以做很多事情，但正确的事情取决于您的代码的含义。这是一个*设计*问题，而不是编程问题。

您已经提出了可以做的各种编程技巧，例如创建`Test`指针（实际上您不需要`Test`指针，只需要一个`Test`对象）。我可以建议更多技巧，例如您可以重写`call()`以使其不是静态的，或者（几乎相同的东西）您可以将`Test`指针作为参数传递`call()`并使用它，或者您可以创建一个全局`Test`对象并使用它。这些都没有触及问题的核心。要回答您的问题，您必须问自己一些问题，例如，我为什么`call()`首先制作静态函数，为什么静态函数需要调用非静态函数。

如果您可以解释这一点，那么提供更具体的建议会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T13:27:19.807

非静态成员函数和静态成员函数之间的关键区别在于后者没有任何对象。但是，它仍然具有与所有其他成员相同的访问权限。

但是，当您想从静态成员调用非静态成员函数时，您仍然需要提出一个对象。通常，静态成员函数会在某些上下文中传递以获取对象。从您的问题的声音来看，静态和非静态函数似乎是为了做不需要和反对的类似事情。在这种情况下，最好将不依赖于任何对象的公共部分分解到另一个函数中，然后从`call()`and调用该函数`Check()`：

```
void Test::call() {
    common();
    // ... other code
}
void Test::Check() {
    common();
    // ... other code, possibly depending on "this"
}
void Test::common() {
    // logic shared by both call() and Check() but not depending on "this"
} 
```

如果公共代码需要一个对象，除了在静态成员函数中提供一个对象之外别无他法。

# jquery - 允许鼠标悬停工具提示

> ID：13331452
> 
> 赞同：0
> 
> 时间：2012-11-11T13:17:51.973
> 
> 标签：jquery, css

当鼠标悬停在菜单按钮上时，我创建了一个工具提示 div，当鼠标悬停在按钮上时工具提示出现，鼠标悬停时消失，但我希望能够滚动到子菜单（#submenu.Solutions 在这个案例），我不知道该怎么做，我尝试设置一个超时和一个变量来查看子菜单上是否有鼠标悬停，但它只是被窃听了。

我最近添加了 mousemove 以查看是否可以对宽度和高度做一些事情，但我有点难过。所以我把它留在那里给你看。

```
$('#btnSolutions').mouseover(function() {
    $('#btnSolutions').css("background", "#0f4759");
    $('#submenu.Solutions').css("display", "block");
    var p = $(this);
    var offset = p.offset();
    $("#submenu.Solutions").offset({ top: offset.top + 37, left: offset.left})
}).mousemove(function(e){
    var p = $(this);
    var offset = p.offset();
    $('#submenu.Solutions').height();
    $('#submenu.Solutions').width();
}).mouseout(function() {
    $("#btnSolutions").css("background", "none");   
    $('#submenu.Solutions').css("display", "none");
}); 
//  
$('#submenu.Solutions').mouseover(function() {

}).mouseout(function() {
    $("#btnSolutions").css("background", "none");   
    $('#submenu.Solutions').css("display", "none");
}); 
```

谢谢你。

编辑：JS FIDDLE [http://jsfiddle.net/Lp5Tt/](http://jsfiddle.net/Lp5Tt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:02:36.370

您可以轻松地使用 CSS 在鼠标悬停时扩展子菜单，方法是将子菜单移动`<ul>`到`<li>`父菜单条目的 中，并将子菜单`display: block;`设置为`li:hover`. 看[这个小提琴](http://jsfiddle.net/Uus9N/)（我没有完成子菜单的样式，但你应该明白了）。

**这种方法的问题**：你不能用 CSS 轻松地制作动画。但是您仍然可以尝试对元素的`mouseover`事件进行动画处理。`<li>`

**优点**：显示内容不需要javascript。此外，这应该适用于所有现代浏览器（也许不是 IE 5.5，但这不是一个“真正的”浏览器：D）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:26:19.907

我不确定您到底想要完成什么，但是，对于初学者来说，您可以通过使用 css 而不是 javascript 来减少、简化和优化代码来实现大部分功能。

例子：

```
$('#btnSolutions').mouseover(function() {
    $('#btnSolutions').css("background", "#0f4759");

}.mouseout(function() {
$("#btnSolutions").css("background", "none");

could be replaced with

 #btnSolutions:hover {
    background: #0f4759;
 } 
```

您可以让子菜单成为按钮的子元素，这样，css 可用于在 :hover 按钮上隐藏/显示子菜单

# php - 将类别树生成为 HTML 无序列表

> ID：13331455
> 
> 赞同：1
> 
> 时间：2012-11-11T13:18:01.110
> 
> 标签：php, mysql, tree

我很难掌握创建类别树的概念。这是标准：

*   创建一个无限深度的父/子 HTML 无序列表
*   删除所有 status = 0 的项目和任何孩子
*   创建 URL，例如 /clothes/jeans
*   可选：生成面包屑

我能找到的最接近的解决方案让我更加困惑，因为我无法让它们工作：

*   [将一系列父子关系转化为层次树？](https://stackoverflow.com/questions/2915748/how-can-i-convert-a-series-of-parent-child)
*   [创建递归类别树函数](https://stackoverflow.com/questions/12285694/creating-a-recursive-category-tree-function)

**这是我的数组：**

```
Array
(
    [0] => Array
        (
            [id] => 1
            [parent] => 0
            [status] => 2
            [slug] => clothes
            [title] => Clothes
        )
    [1] => Array
        (
            [id] => 2
            [parent] => 1
            [status] => 2
            [slug] => jeans
            [title] => Jeans
        )
    [2] => Array
        (
            [id] => 3
            [parent] => 1
            [status] => 2
            [slug] => dresses
            [title] => Dresses
        )
    [3] => Array
        (
            [id] => 4
            [parent] => 0
            [status] => 2
            [slug] => accessories
            [title] => Accessories
        )
    [4] => Array
        (
            [id] => 5
            [parent] => 4
            [status] => 2
            [slug] => bags
            [title] => Bags
        )
    [5] => Array
        (
            [id] => 6
            [parent] => 4
            [status] => 2
            [slug] => watches
            [title] => Watches
        )
    [6] => Array
        (
            [id] => 7
            [parent] => 6
            [status] => 2
            [slug] => rolex
            [title] => Rolex
        )
) 
```

**这是我想要的无序列表：**

```
<ul>
    <li><a href="/clothes">Clothes</a>
        <ul>
            <li>
                <a href="/clothes/jeans">Clothes</a>
            </li>
            <li>
                <a href="/clothes/dresses">Clothes</a>
            </li>
        </ul>
    </li>
    <li><a href="/accessories">Accessories</a>
        <ul>
            <li>
                <a href="/accessories/bags">Bags</a>
            </li>
            <li>
                <a href="/accessories/watches">Watches</a>
                <ul>
                    <li>
                        <a href="/accessories/watches/rolex">Rolex</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:50:57.007

也许是这样的递归函数：

```
function filter_by_parent($parent_id,$ar){
    $retval=array();
    foreach($ar as $a){
        if($a['status']==0)
            continue;
        if($a['parent']==$parent_id)
            $retval[]=$a;
    }
    return $retval;
}

function print_list($parent, $level,$ar,$url_prefix) { 
    $children = filter_by_parent($parent,$ar);
    if(empty($children))
        return;

    echo "<ul>"; 
    foreach($children as $child){ 
        // indent and display the title of this child <br>  
        echo "<li>".$child['title']. "( {$url_prefix}{$child['slug']} )";

        print_list($child['id'], $level+1,$ar,$url_prefix.$child['slug'].'/'); 
        echo  "</li>";
    } 
    echo "</ul>";
}
print_list(0,0,$test,'/'); 
```

根据您的输入，结果将是：

*   衣服( /clothes )
*   -牛仔裤（/衣服/牛仔裤）
*   -连衣裙（/衣服/连衣裙）
*   配件( /accessories )
*   -包（/附件/包）
*   -手表（/附件/手表）

（这是一个改编版本：[Storing Hierarchical Data in a Database](http://www.sitepoint.com/hierarchical-data-database/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:17:18.550

好的，我用递归函数为你找到了解决方案。如果你赶时间，你可以在[这里](https://gist.github.com/4056664)找到完整的代码。

这篇文章的其余部分只是解释它是如何工作的。

这是你的数组：

```
$arr = array
(
   0=> array
    (
         'id'  => 1,
         'parent'  => 0,
         'status'  => 2,
         'slug'  => 'clothes',
         'title'  => 'Clothes'
    ),
   1 =>array
    (
         'id'  => 2,
         'parent'  => 1,
         'status'  => 2,
         'slug'  => 'jeans',
         'title'  => 'Jeans'
    ),
   2=> array
    (
         'id'  => 3,
         'parent'  => 1,
         'status'  => 2,
         'slug'  => 'dresses',
         'title'  => 'Dresses'
    ),
    3=> array
    (
         'id'  => 4,
         'parent'  => 0,
         'status'  => 2,
         'slug'  => 'accessories',
         'title'  => 'Accessories'
    ),
    4 => array
    (
         'id'  => 5,
         'parent'  => 4,
         'status'  => 2,
         'slug'  => 'bags',
         'title'  => 'Bags'
    ),
    5 => array
    (
         'id'  => 6,
         'parent'  => 4,
         'status'  => 2,
         'slug'  => 'watches',
         'title'  => 'Watches'
    ),

    6 => array
    (
         'id'  => 7,
         'parent'  => 6,
         'status'  => 2,
         'slug'  => 'rolex',
         'title'  => 'Rolex'
    ) 

) ; 
```

***下次在问题中包含数组时，请确保它已准备好在 php 脚本中使用，以便人们可以直接使用它。***

现在，首先我通过数组并在父母和孩子之间建立了联系。我所做的是，如果具有 id 的元素`1`有任何子元素，它的所有子元素都将进入数组的索引 1。这是对我有用的部分。

```
$tree = array ();
foreach ($arr as $val) {
    $tree [ $val['parent'] ] [] = $val;

} 
```

很简单吧？？？:)

这是它在此处理后从您的数组生成的数组：

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    array(5) {
      ["id"]=>
      int(1)
      ["parent"]=>
      int(0)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(7) "clothes"
      ["title"]=>
      string(7) "Clothes"
    }
    [1]=>
    array(5) {
      ["id"]=>
      int(4)
      ["parent"]=>
      int(0)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(11) "accessories"
      ["title"]=>
      string(11) "Accessories"
    }
  }
  [1]=>
  array(2) {
    [0]=>
    array(5) {
      ["id"]=>
      int(2)
      ["parent"]=>
      int(1)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(5) "jeans"
      ["title"]=>
      string(5) "Jeans"
    }
    [1]=>
    array(5) {
      ["id"]=>
      int(3)
      ["parent"]=>
      int(1)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(7) "dresses"
      ["title"]=>
      string(7) "Dresses"
    }
  }
  [4]=>
  array(2) {
    [0]=>
    array(5) {
      ["id"]=>
      int(5)
      ["parent"]=>
      int(4)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(4) "bags"
      ["title"]=>
      string(4) "Bags"
    }
    [1]=>
    array(5) {
      ["id"]=>
      int(6)
      ["parent"]=>
      int(4)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(7) "watches"
      ["title"]=>
      string(7) "Watches"
    }
  }
  [6]=>
  array(1) {
    [0]=>
    array(5) {
      ["id"]=>
      int(7)
      ["parent"]=>
      int(6)
      ["status"]=>
      int(2)
      ["slug"]=>
      string(5) "rolex"
      ["title"]=>
      string(5) "Rolex"
    }
  }
} 
```

现在，主要部分进入场景。由于任何孩子也可以是某些孩子的父母，因此最简单的解决方案是递归。这是递归部分。

```
function traverser ($array ,$arr)  {

        if (! $arr)
            return;

    echo "<ul>" . "</br>";

    foreach ($arr as $var ) {
        echo "<li>" . "</br>";
        echo '<a href="/'.$var['slug'].'">'.$var['title'].'</a>';
        if (isset ($array [$var['id'] ]))
            traverser ($array , $array [$var['id'] ] ) ;

        echo "</li>";
    }

    echo "</ul>"; 
```

[你可以在这里](https://gist.github.com/4056664)找到完整的代码。

希望有帮助。快乐编码。

# facebook-graph-api - 我们可以创建和导出我们的 facebook 朋友网络的地图吗？

> ID：13331457
> 
> 赞同：-1
> 
> 时间：2012-11-11T13:18:07.583
> 
> 标签：facebook-graph-api, networking, hyperlink, cartography

我对 Facebook 的功能有疑问。它是否可以访问朋友之间的联系？

例如，我有一个专业帐户，其中有 100 个朋友，我想导出一张地图，我将在其中看到彼此之间的联系，就像我在中间的轮子一样。

朋友 A，知道 B，E，R。朋友 B，知道 A，E，V，W，Y 朋友 C，知道 V & Y 等等。

每封信都在我的 100 个朋友中。

在此过程中，我将很快了解我网络中的某些人是否认识其他人，并且我们可以创造商机。

如果您知道另一个可以与我所有的朋友一起创建大型全球地图的系统，请告诉我。我会有很多数据，但我可以清理它。多总比少好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:31:37.567

您可以从 facebook 提供的 Open Graph API 中获取此数据和大量其他类似数据。

[http://developers.facebook.com/docs/opengraph/](http://developers.facebook.com/docs/opengraph/)

绘图和数据绘图将由您决定。但请记住，我认为您的 API 密钥将有一个速率限制，因此您必须聪明地挖掘这么多数据。

# .net - 没有公司名称无法注册 vb.net express 2012

> ID：13331459
> 
> 赞同：2
> 
> 时间：2012-11-11T13:18:13.077
> 
> 标签：.net, vb.net

几周前我下载了 vb.net 2012 express，但注册表已用完。我尝试在线填写表格以获取注册表项，但它需要公司信息。我不是公司的一员。我如何注册？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:22:16.000

只需使用“家庭”或“家庭用户”作为您的公司名称。请参阅[http://social.msdn.microsoft.com/Forums/eu/Vsexpressinstall/thread/9fcfc48e-89e5-4819-acf5-158fa1889a71](http://social.msdn.microsoft.com/Forums/eu/Vsexpressinstall/thread/9fcfc48e-89e5-4819-acf5-158fa1889a71)

# java - 如何创建 2 个或多个相互交互的类？

> ID：13331461
> 
> 赞同：-2
> 
> 时间：2012-11-11T13:18:26.197
> 
> 标签：java, static-methods

如何创建两个或多个相互交互的类？例如，第一类中的一个方法将是`static`，例如产生一个*斐波那契*数，而第二类中的另一个方法将对由第一类中的方法创建的*斐波那契*数做一些事情，以及如何扩展我的上课？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:47:22.273

由于您似乎开始使用 java 编码，我想说[这篇](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)关于[修饰符](http://www.tutorialspoint.com/java/java_modifier_types.htm)的 oracle 文章是了解类如何与另一个类交互的良好开端。

所以回答你的问题：

> 那么我如何制作 2 个或更多相互交互的类？

一个类与另一类交互有多种方式。请注意，我选择了对您的特定示例更有用的那些。其中最常见的是

*   类 Bar 的实例从类 Foo 的另一个实例调用方法，如下例所示：

    ```
    Foo foo = new Foo()
    Bar bar = new Bar();

    bar.setSomeFieldValue(foo.getSomeOtherFieldValue()); 
    ```

*   Class Foo 扩展 Class Bar 并调用在它的超类上定义的构造：**这试图回答您的问题：您如何扩展 Class**

    ```
    Class Foo extends Bar
    {
        public Foo()
        {
            super(); //Calling the Bar Class construct
        }
    } 
    ```

*   Class Foo 期望 Class Bar 的实例作为方法的参数：

    ```
    import dir.barpackage.Bar;

    Class Foo
    {
        private int x;

        public Foo()
        {
            //Construct an Instance of the Foo object
        }

        public void doSomethingWithBar(Bar bar)
        {
            Foo.x = bar.getSomeBarPropertyValue();
        }
    } 
    ```

进一步讨论您的问题：

> 例如，第一个类中的一个方法将是静态的，例如生成一个斐波那契数，而第二个类中的另一个方法将对由第一个类中的方法创建的斐波那契数做一些事情

以下示例是执行此操作的**一种**方法：

*第一类.java*

```
Class FirstClass
{
    private static int fibonnacciNumber; // This field is private to this class and thus can be only accessed by this class

    public static int getFibonnaciNumber() // A public method can be accessed any place other than your class
    {
        return FirstClass.fibonnacciNumber;
    }
} 
```

*第二类.java*

```
Class SecondClass
{
    public void doSomethingWithFibonnacciNumber(int fibonnacciNumber)
    {
        //Will do something with your fibonnacci number;
    }
} 
```

*使用示例*

```
SecondClass second = new SecondClass();
second.doSomethingWithFibonnacciNumber(FirstClass.getFibonnacciNumber()); 
```

我希望它有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:24:00.440

您不必“扩展”课程。只需从类 2 的方法中调用类 1 中的（公共）静态方法。就这样。

# ruby-on-rails - 将 Rails 应用程序转换为引擎：使用命名空间调用关联

> ID：13331472
> 
> 赞同：1
> 
> 时间：2012-11-11T13:19:39.360
> 
> 标签：ruby-on-rails, associations

我正在尝试将[https://github.com/ari/jobsworth](https://github.com/ari/jobsworth)转换为引擎（我现在正在调用`scheduler`它）。`User`要做的一件事是在引擎中的主应用程序和模型之间建立关联。

我`acts_as_scheduler_user`在[这个答案](https://stackoverflow.com/questions/6845747/how-to-call-a-parent-apps-helper-method-from-a-rails-3-1-engine)中使用的是：

```
require "scheduler/engine"

module Scheduler    

module ActsAsSchedulerUser

   module ClassMethods

       def acts_as_scheduler_user(options = {})   
           has_many    :widgets
       end
#etc 
```

新生引擎连接到我的主应用程序，当我调用`User.reflect_on_all_associations(:has_many)`引擎代码或主应用程序代码时，我成功获得

```
#<ActiveRecord::Reflection::AssociationReflection:0x000001069e45b0 @macro=:has_many, @name=:widgets, @options={:order=>"widgets.column, widgets.position", :dependent=>:destroy, :extend=>[]}, @active_record=User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, confirmation_token: string, confirmed_at: datetime, confirmation_sent_at: datetime, created_at: datetime, updated_at: datetime, first_name: string, last_name: string, client_id: integer, invitation_token: string, invitation_sent_at: datetime, invitation_accepted_at: datetime, invitation_limit: integer, invited_by_id: integer, invited_by_type: string, client_name_requested: string, mode: string, forem_admin: boolean, forem_state: string, forem_auto_subscribe: boolean), @plural_name="widgets", @collection=true> 
```

并且`current_user`在引擎应用程序中工作正常 - 返回主应用程序的 current_user。

但是，当我调用`current_user.widgets`引擎的应用程序时，我得到了错误`uninitialized constant User::Widget`。

有什么想法吗？

++++++++++

编辑：啊，当我`Widget.all`在控制台中执行时，我得到了`NameError: uninitialized constant Widget`，但是当我这样做时，`Scheduler::Widget.all`我得到了正确的响应。所以我现在的问题是如何`current_user.widgets`在使用命名空间时调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:18:34.800

我可能错过了这一点（对引擎没有太多经验），但也许只是将`has_many`类方法传递给实际类以包含命名空间。

```
def acts_as_scheduler_user(options = {})   
  has_many :widgets, :class_name => Scheduler::Widget
end 
```

# jquery-masonry - 无限滚动在第 2 页之后使用相同的内容（使用 Couchbase 作为数据库）

> ID：13331475
> 
> 赞同：1
> 
> 时间：2012-11-11T13:20:25.520
> 
> 标签：jquery-masonry, infinite-scroll, couchbase

我使用mansonry和 couchbase 作为数据库[的无限滚动。](http://masonry.desandro.com/demos/infinite-scroll.html)我的问题是 tt 在第 2 页之后加载相同的内容：这是代码示例：

第 1 页：

```
<div id="container">
   <div class="box">Page 1 Box 1</div>
   <div class="box">Page 1 Box 2</div>
   <div class="box">Page 1 Box 3</div>
</div>
<nav id="page-nav">
    <a href="link_to_page_2">Next/a>
</nav> 
```

第2页：

```
<div id="container">
   <div class="box">Page 2 Box 4</div>
   <div class="box">Page 2 Box 5</div>
   <div class="box">Page 2 Box 6</div>
</div>
<nav id="page-nav">
    <a href="link_to_page_3">Next/a>
</nav> 
```

第 3 页：

```
<div id="container">
   <div class="box">Page 3 Box 7</div>
   <div class="box">Page 3 Box 8</div>
   <div class="box">Page 3 Box 9</div>
</div>
<nav id="page-nav">
    <a href="link_to_page_4">Next/a>
</nav> 
```

Javascript：

```
var $container = $('#container');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.box',
    columnWidth: 100
  });
});

$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.box',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true );
    });
  }); 
```

当我加载它显示的页面时

第 1 页 方框 1

第 1 页 框 2

第 1 页 框 3

->滚动

第 2 页 方框 4

第 2 页 方框 5

第 2 页 方框 6

->滚动

第 2 页 方框 7

第 2 页框 8

第 2 页 方框 9

..

我的第一个想法是，第 2 页上的下一个链接再次指向第 2 页。但是当我禁用 inifinit-scroll 时，我可以使用下一个链接轻松单击 von Page 1 到 Page 2 到 Page 3 等等。

我在后台使用 Couchbase，下一个链接是这样的（[pagination w couchbase](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-querying-pagination.html)）：

```
?startkey="Box3-key"&startkey_docid=Box3&skip=1&limit=3
?startkey="Box6-key"&startkey_docid=Box6&skip=1&limit=3
?startkey="Box9-key"&startkey_docid=Box9&skip=1&limit=3 
```

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T11:51:44.870

我花了一段时间才弄清楚这个问题，所以我发布了我的解决方案。

它使用第一页的链接并假设其中有某种“page=1”的评论是正确的。它将第二页的“1”替换为 2，第三页替换为 3，依此类推。

对于其他页面，它只会将元素插入到与“itemSelector”匹配的页面中。因此，例如，当无限滚动加载页面时，“容器” div 和 nav 元素将被完全丢弃。如果我们试图提供下一个导航元素，这是个坏消息。

在无限滚动中，您可以为“路径”设置一个选项，该选项需要一个函数（pageNumber）。如果未设置此选项，则当它尝试查找下一个路径时，它将使用上述逻辑（将“1”替换为当前页面）。然而，如果你设置了这个选项，你可以使用这个函数来生成你想要的任何路径。

这大致是我所做的：

第 1 页：

```
<div id="container">
   <div class="box">Page 1 Box 1</div>
   <div class="box">Page 1 Box 2</div>
   <div class="box">Page 1 Box 3</div>
</div>
<nav id="page-nav">
    <a href="link_to_page_2"></a>
</nav> 
```

第2页：

```
<div id="container">
   <div class="box">Page 2 Box 4</div>
   <div class="box">Page 2 Box 5</div>
   <div class="box">Page 2 Box 6</div>
</div>
<nav class="box">
    <a href="link_to_page_3"></a>
</nav> 
```

第 3 页：

```
<div id="container">
   <div class="box">Page 3 Box 7</div>
   <div class="box">Page 3 Box 8</div>
   <div class="box">Page 3 Box 9</div>
</div>
<nav class="box">
    <a href="link_to_page_4"></a>
</nav> 
```

Javascript：

```
var $container = $('#container');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.box',
    columnWidth: 100
  });
});

$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.box',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
  },
  path: function(pageNumber) {
      // try to get path from most recent page
      var query = $('nav.box a:last');
      if (query.length > 0) {
          return query.attr('href');
      } else {
          // if none exist, use path from first page
          return $('#page-nav a:last').attr('href');
      }
  }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true );
    });
  }
); 
```

# asp.net-mvc-4 - .NET 4.5 的自定义验证属性

> ID：13331477
> 
> 赞同：0
> 
> 时间：2012-11-11T13:21:46.563
> 
> 标签：asp.net-mvc-4, data-annotations

我使用 .Net 4.5 平台。与 2012 年相比。

我正在开发一个 ASP.NET MVC 4 项目。

我找不到任何关于创建自定义验证属性（服务器端和客户端）的文章/堆栈溢出问题。

我使用了包含 ModelClientValidationRule 的通用代码。但我认为这个类不包含在.Net 4.5中。

需要帮助，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:41:17.400

我的错..

我添加了对 System.Web.Webpages 的引用。解决了这个问题。

# java - 匹配 Java SHA2 输出与 MySQL SHA2 输出

> ID：13331478
> 
> 赞同：1
> 
> 时间：2012-11-11T13:21:55.657
> 
> 标签：java, hash, sha256, sha2

当我通过以下代码重现 SHA2 哈希时：

```
MessageDigest digest = MessageDigest.getInstance("SHA-256");
digest.digest("A".getBytes("UTF-8")); 
```

它给了我一个字节数组，即：85,-102,-22,-48,-126,100,-43,121,93,57,9,113,-116,-35,5,-85,-44,-107,114, -24,79,-27,85,-112,-18,-13,26,-120,-96,-113,-33,-3

但是当我通过 MySQL 重现相同的哈希时，它给了我一个字符串：5cfe2cddbb9940fb4d8505e25ea77e763a0077693dbb01b1a6aa94f2

如何转换 Java 的结果，以便将其与 MySQL 的结果进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:08:11.600

首先检查您的数据库结果，看起来您的初始哈希实际上是 SHA-224 而不是 SHA-256：

```
mysql> SELECT SHA2("A", 224);
+----------------------------------------------------------+
| SHA2("A", 224)                                           |
+----------------------------------------------------------+
| 5cfe2cddbb9940fb4d8505e25ea77e763a0077693dbb01b1a6aa94f2 |
+----------------------------------------------------------+
1 row in set (0.00 sec) 
```

代替：

```
mysql> SELECT SHA2("A", 256);
+------------------------------------------------------------------+
| SHA2("A", 256)                                                   |
+------------------------------------------------------------------+
| 559aead08264d5795d3909718cdd05abd49572e84fe55590eef31a88a08fdffd |
+------------------------------------------------------------------+
1 row in set (0.06 sec) 
```

从那里你走在正确的轨道上，你只需要将 byte[] 输出转换为十六进制字符串。

```
import java.security.MessageDigest;

public class TestSHA256 {

    public static void main(String[] args) {
        try {
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            byte[] hash = digest.digest("A".getBytes("UTF-8"));

            StringBuilder hexString = new StringBuilder();
            for (int i: hash) {
                hexString.append(Integer.toHexString(0XFF & i));
            }
            System.out.println(hexString);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

输出：

```
559aead08264d5795d399718cdd5abd49572e84fe55590eef31a88a08fdffd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-05T13:56:21.243

`Integer.toHexString(0XFF & i)`必须替换为`String.format("%02x", 0XFF & i)`，否则只会产生 1 个字符的输出，而需要 2 个字符。

# java - 在生产版本中删除代码的最佳方法是什么？

> ID：13331479
> 
> 赞同：0
> 
> 时间：2012-11-11T13:21:57.090
> 
> 标签：java, eclipse, gwt, servlets

我只需要在托管模式下执行一些（服务器端）代码。完美的解决方案是甚至不将代码编译到生产版本中。完成此任务的最佳方法是什么（使用 GWT 2.5 和 eclipse）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:45:18.460

您如何为生产构建代码，您是否能够将该代码分离到一个或多个类中？如果答案是“Maven”和“是”，我会考虑在 gwt 编译和打包时使用 Maven 配置文件和适当的排除项。

还有[`GWT.isScript()`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/core/client/GWT.html#isScript%28%29)which`true`在托管模式下返回，否则返回 false。然后至少您的代码不会在生产构建中执行。

干杯，

# javascript - Requirejs shim：想要将主干插件直接注册到核心主干中

> ID：13331484
> 
> 赞同：3
> 
> 时间：2012-11-11T13:22:19.430
> 
> 标签：javascript, backbone.js, module, requirejs, shim

我有两个小的 Backbone 插件，如下所示：

```
(function($, _, Backbone) {

var ListView = Backbone.View.extend({
// blablabla
});

Backbone.ListView = ListView;

})($, _, Backbone); 
```

和

```
(function($, _, Backbone) {

var Repository = Backbone.Model.extend({
// blablabla
});

Backbone.Repository = Repository;

})($, _, Backbone); 
```

我现在已经设置了 require.config：

```
require.config({

    baseUrl: "javascripts",

    shim: {
        "jquery": {
            exports: "$"
        },
        "underscore": {
            exports: "_"
        },
        "backbone": {
            deps: ['jquery', 'underscore'],
            exports: "Backbone"
        },
        "ListView": {
            deps: ['jquery', 'underscore', 'backbone'],
            exports: "Backbone.ListView"
        },
        "Repository": {
            deps: ['jquery', 'underscore', 'backbone'],
            exports: "Backbone.Repository"
        }        

    },

    paths: {
        "jquery": "Vendors/jquery",
        "underscore": "Vendors/underscore",
        "backbone": "Vendors/backbone",
        "ListView": "Extensions/ListView",
        "Repository": "Extensions/Repository"
    }

}); 
```

现在我们来解决问题。如果我想同时使用这两个插件，这就是我目前必须处理模块依赖项的方式：

```
require(['jquery', 'underscore', 'ListView', 'Repository'], function($, _, Backbone1, Backbone2) {

    // this is backbone + list view
    console.log(Backbone1);
    // this is backbone + repository
    console.log(Backbone2);       

}); 
```

但我想让插件已经注册到主干：

```
require(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {

    // this now is backbone + listView + repository
    console.log(Backbone);

}); 
```

我该怎么做呢？我必须改变什么？

最好的问候，博多

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:16:31.383

我建议首先为它们创建模块`ListView`并将`Repository`它们（希望`Backbone`也是）保持在全局命名空间之外，如下所示：

list_view.js

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
  Backbone.ListView = Backbone.View.extend({
    ... ListView code here ...
  }
  return Backbone.ListView
}); 
```

存储库.js

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
  Backbone.Repository = Backbone.View.extend({
    ... Repository code here ...
  }
  return Backbone.Repository
}); 
```

然后，您可以使用 require.js 的[`map`](http://requirejs.org/docs/api.html#config-map)配置将依赖项映射到包含两个模块的适配器，然后撤消`list_view`和`repository`模块本身的映射以避免循环依赖：

```
requirejs.config({
  map: {
    '*': {
      'backbone': 'backbone-adapter'
    },
    'list_view': {
      'backbone': 'backbone'
    },
    'repository': {
      'backbone': 'backbone'
    },
}); 
```

然后创建一个文件`backbone-adapter.js`以将插件与 Backbone 本身捆绑在一起：

骨干适配器.js

```
define(['backbone', 'list_view', 'repository'], function (Backbone) {
  return Backbone;
}); 
```

然后在您的模块中，当您将其包含`'backbone'`为依赖项时，requirejs 会将其映射到`backbone-adapter`，这反过来将包含您的插件，以便它们可以作为`Backbone.ListView`和使用`Backbone.Repository`。

我实际上并没有测试过上面的代码，但我使用了类似的策略将供应商模块与我自己的插件捆绑在一起，它对我来说效果很好。（这个想法来自[这个讨论](https://groups.google.com/forum/#!msg/requirejs/Z_-_l4jwJ_4/1q5YiYc9VsIJ)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:56:42.300

我不会做那样的事情，你正在创建一个包含所有模块的全局对象，这不是 require.js 的用途。

您应该明确定义您的依赖项。如果需要`ListView`，则将其添加到 require 调用中，如果需要`Repository`将其添加到 require 调用中，...

* * *

如果您仍然想这样做，您可以定义自己的 Backbone 模块：

```
# backbone.js

define(['vendor/backbone', 'ListView', 'Repository'],
  function(Backbone, ListView, Repository) {

    Backbone.ListView = ListView
    Backbone.Repository = Repository

    return Backbone
}); 
```

然后你的垫片配置：

```
paths: {
    ...
    "backbone": "backbone",
    ...
} 
```

（再一次，你真的不应该这样做！！）

# sql - 从外部表中获取前 1 行

> ID：13331485
> 
> 赞同：0
> 
> 时间：2012-11-11T13:22:24.137
> 
> 标签：sql, sql-server

我只想从外部表中获取第一行。

我正在尝试执行类似于以下代码的操作，但出现错误。我无法获得 @rID =PartRequest.Id 。

```
 declare @rID int
 SELECT     
   @rID =PartRequest.Id
   , Products.Name AS ProductName
   , PartRequestPhotos.Id AS PartRequestPhotosId
   , PartRequest.IsInsuranceClaimed
 FROM PartRequest 
 INNER JOIN PartRequestStatus ON PartRequest.PartRequestStatusId = PartRequestStatus.Id 
 INNER JOIN UsersInfo ON PartRequest.UserId = UsersInfo.aspnet_UserId 
 INNER JOIN Products ON PartRequest.ProductId = Products.Id 
 LEFT OUTER JOIN PartRequestPhotos ON PartRequest.Id = 
      (select top 1 Id from  PartRequestPhotos where  PartRequestId =  @rID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:28:12.300

> 我只想从外部表中获取第一行。

将其包含在子查询中，而不是`JOIN`像这样在条件中进行比较

```
...
LEFT OUTER JOIN
(
   select top 1 Id from  PartRequestPhotos where  PartRequestId =  @rID
)   PartRequestPhotos ON PartRequest.Id = PartRequestPhotos.Id
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:16:51.293

您无法获取@rID，因为在呈现数据之前执行了左连接，为了做到这一点，您需要将查询更改为以下内容：

只分配一个变量是不正确的，您要么将所有列分配给变量，要么不分配。

您需要使用外部应用，以便能够为左侧表的每一行调用子查询。

您需要指定 desc 或 asc，如果您输入 asc，它将为您获取第一个 id，desc 它将返回最新的。

```
 SELECT     
             PartRequest.Id
           , Products.Name AS ProductName
           , PartRequestPhotos.Id AS PartRequestPhotosId
           , PartRequest.IsInsuranceClaimed
         FROM PartRequest 
         INNER JOIN PartRequestStatus ON PartRequest.PartRequestStatusId = PartRequestStatus.Id 
         INNER JOIN UsersInfo ON PartRequest.UserId = UsersInfo.aspnet_UserId 
         INNER JOIN Products ON PartRequest.ProductId = Products.Id 
         OUTER APPLY
            (
              SELECT TOP 1 
                 Id
              FROM 
                 PartRequestPhotos
              WHERE 
                 PartRequestPhotos.PartRequestId = PartRequest.Id
              ORDER BY
                Id ASC
            ) PartRequestPhotos 
```

# c++ - 如何在 udp 连接中绕过 NAT/防火墙

> ID：13331489
> 
> 赞同：3
> 
> 时间：2012-11-11T13:22:52.627
> 
> 标签：c++, networking, udp, nat

我正在编写语音聊天应用程序，但问题是客户端使用路由器防火墙阻止连接时

我用 tcp 连接解决了这个问题，但是用 udp 连接我不知道如何解决这个问题

我通过这一步尝试 udp 漏洞

1.  客户端 A 发送到（服务器）ip 和用户名
2.  客户端 B 发送到（服务器）IP 和用户名
3.  （服务器）发送到客户端 B 客户端 A 信息 — 开始语音聊天
4.  （服务器）向客户端 A 客户端 B 发送信息 — 开始语音聊天

但是这项工作一次很多次都不起作用，我不知道为什么。任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:43:43.843

NAT 穿透需要外部“匹配”服务器，并且可以在所有但非对称路由器和防火墙上使用。简单地说，这些“对称”路由器会在您每次更改目标的 IP 或端口时更改数据的出站/入站端口，从而有效地消除服务器试图进行的“匹配”。

还有其他“狡猾”的打孔方法，但它们缺乏连贯性。

我建议您阅读有关 NAT 类型（不对称、对称、全锥、受限锥、端口受限锥）的差异。还要确保您阅读了 STUN，它可以让您识别客户端运行的 NAT 类型。最后，您应该阅读有关 UPnP 的信息，这是大多数路由器都具有的功能，它允许程序自行注册和打开端口，而无需用户通过路由器界面手动执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T06:22:40.897

您正在尝试的是 UDP 打孔。但是很少有具有对称 NAT 的路由器，打孔非常困难且不一致（如果可能的话）。在维基百科上阅读不同的 NAT，您将获得更多见解。

# asp.net - ASP.Net MVC 中的验证策略

> ID：13331492
> 
> 赞同：1
> 
> 时间：2012-11-11T13:23:08.663
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我花了一些时间研究在我的 ASP.Net MVC 站点中实施验证的策略。冒着过度设计的风险，我正在尝试开发一个松散的实现，可以为我的任何项目一致地推出。鉴于所有活动部件，我想我会问 SO 的人，看看他们是否有任何改进意见或想法。代码显然是人为的，我只是想说明一切是如何联系在一起的。

感兴趣的运动部分：

*   用于数据访问的 EF 存储库层
*   用于输入验证的模型数据注释
*   业务规则验证的服务层
*   DI的统一

鉴于我想在单个控制器操作期间使用相同的 EF 上下文，我使用工作单元模式将相同的 DataContect 注入控制器内的多个服务中：

```
public class OrderController : Controller
{
    private IUnitOfWork _unitOfWork;
    private IOrderService _recipeService;
    private IInventoryService _inventoryService;

    public OrderController(IUnitOfWork unitOfWork, IOrderService orderService, IInventoryService inventoryService)
    {
        _unitOfWork = unitOfWork;
        _orderService = orderService;
        _inventoryService = inventoryService
        //Use property injection to apply the Unit of Work context and validation state to our services
        _orderService.Context = _unitOfWork;
        _orderService.ValidationState = new ModelStateWrapper(this.ModelState);
        _inventoryService.Context = _unitOfWork;
        _inventoryService.ValidationState = new ModelStateWrapper(this.ModelState);
    } 
```

继续使用一些人为的代码，假设在我的 Create 操作中，我想为产品创建一个订单，并从库存中删除该产品：

```
public ActionResult Create(CreateEditOrderViewModel model)
    {
        try
        {

            Product product = Mapper.Map<ProductDTO, Product>(model.ProductDTO);

            if(_orderService.Insert(product) && 
               _inventoryService.Remove(product) &&
                ModelState.IsValid)
            {   
                _unitOfWork.Save();
                return RedirectToAction("Index");
            }
        }
        catch (DataException exc)
        {
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes, please check the log for errors.");
        }
        return View(model);
    } 
```

在我的服务中，我根据[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs)进行一些业务规则验证：

```
public class OrderService : IOrderService
{

    public bool Insert(Recipe orderToCreate)
    {
        // Validation logic
        if (!ValidateOrder(orderToCreate))
            return false;

        // Database logic
        try
        {
            _context.OrderRepository.Insert(orderToCreate);
        }
        catch
        {
            return false;
        }
        return true;
    }

    protected bool ValidateOrder(Order orderToValidate)
    {
        Product p = orderToValidate.Product;
        //Ensure inventory has product before creating order
        if (_context.InventoryRepository.HasProduct(p)
            _validationState.AddError("Product", "That product cannot be added to the order as we don't have it in stock");

        return _validationState.IsValid;
    }

    public IUnitOfWork Context
    {
        get
        {
            return _context;
        }
        set
        {
            _context = value;
        }
    }

    public IValidationDictionary ValidationState
    {
        get
        {
            return _validationState;
        }
        set
        {
            _validationState = value;
        }
    }
} 
```

一个简单的订单模型如下所示：

```
public class Order: IModel
{
    [Key]
    public int ID { get; set; }
    [Required(ErrorMessage="A buyer is required.")]
    public string Buyer { get; set; }
    public virtual ICollection<Product> Products{ get; set; }
} 
```

因此，就目前而言，数据注释的验证发生在模型绑定期间，而业务规则验证发生在调用服务的 CRUD 方法时。这些服务使用包含对存储库的引用的相同工作单元对象，因此所有服务 CRUD 方法都在相同的 EF 上下文中执行，这为我提供了事务和并发等好处。

在我的控制器中，我在我的 Create 操作中调用多个服务。是否最好改为对 OrderService 进行一次调用，然后再调用 InventoryService 本身？

鉴于我需要为每个服务提供相同的 UoA 对象，有没有办法通过 Unity 将工作单元对象附加到服务中？我想不出一种方法，它不会最终为每个服务提供不同的实例。

如果有人有任何想法或建议，我很想听听他们的意见！

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:16:19.987

> 在我的控制器中，我在我的 Create 操作中调用多个服务。是否最好改为对 OrderService 进行一次调用，然后再调用 InventoryService 本身？

是的。最好将*业务事务*封装在服务方法中。这将使以后更容易重用其他地方的逻辑。

> 鉴于我需要为每个服务提供相同的 UoA 对象，有没有办法通过 Unity 将工作单元对象附加到服务中？

使用 Unity 的生命周期管理器，每个请求使用一个上下文，例如[PerHttpRequestLifetime](https://stackoverflow.com/a/5191797/441292)并让 Unity 将上下文/UoW 注入到服务中，而不是在控制器的构造函数中手动设置它。

# gwt - 是否可以为每个名册项目设置头像？

> ID：13331504
> 
> 赞同：0
> 
> 时间：2012-11-11T13:24:49.593
> 
> 标签：gwt, ejabberd

我使用[EmiteGWT](https://github.com/EmiteGWT/emite)作为客户端，但它的模型上没有任何方法可以`RosterItem`获取头像，所以问题是：是否可以为每个名册项目 ejabberd 服务器端添加标题图像？

# ruby-on-rails - 在 Rails 中过滤 ActiverRecord 集合

> ID：13331506
> 
> 赞同：0
> 
> 时间：2012-11-11T13:24:50.983
> 
> 标签：ruby-on-rails, ruby

我有一个`Notification`模型，其中许多列是“未读”。

我需要使用一种简单的方法在@notification 集合中查找“未读”值为假的记录。这样：

```
@notifications= Notification.all
@notifications.unread --> returns a subset of @notifications which are unread
@notifications.unread.count --> returns number of unread notifications 
```

如何制作这种“未读”方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:27:24.180

一种方法是`scope`通过将以下内容添加到您的`Notification`类来创建一个。

```
scope :unread, where(unread: true) 
```

**[在此处](http://guides.rubyonrails.org/active_record_querying.html#scopes)**了解范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T13:53:28.937

为此，您可以编写**类方法**或**范围**，

```
class Notification
  def self.unread
    where(:unread => true) # depends on your data type
  end
end 
```

或者

```
class Notification
 scope :unread, where(:unread => true) # depends on your data type
end 
```

只需调用**Notification**类上的方法

```
Notification.unread # => returns unread notifications
Notification.unread.count # => returns number of unread notifications 
```

# couchdb - CouchDB 自动生成的字段

> ID：13331508
> 
> 赞同：1
> 
> 时间：2012-11-11T13:24:56.807
> 
> 标签：couchdb

我的文档中有`ctime`和`mtime`（创建/修改时间）字段。

我怎样才能让 couchDB 为我处理这些？例如：

```
// Create a dog
curl -X POST http://localhost:5984/dogs -d '{"name": "Bill"}'
{"ok":true,"id":"75efaeb93aa2ed75ffa0abf9f5006d40","rev":"1-49ce25e3db701c8cb613c1fd18d99619"} 
```

->`ctime`并且`mtime`应该是自动生成的

```
// Update a dog
curl -X PUT http://localhost:5984/dogs/75efaeb93aa2ed75ffa0abf9f5006d40?rev=1-49ce25e3db701c8cb613c1fd18d99619 -d '{"name": "BILL"}' 
```

->`mtime`应该自动更新

* * *

我一直在跳`validate_doc_update`来处理这个问题，比如：

```
function (newDoc, oldDoc, userCtx) {
  //
  // sanity checks
  //

  if (oldDoc && newDoc.ctime) throw {"forbidden": "ctime cannot be changed!"}

  ...

  //
  // Auto-generate fields
  //

  var now = new Date().toISOString();

  // mtime
  newDoc.mtime = now;

  // ctime
  if (!oldDoc) newDoc.ctime = now;
} 
```

但没有运气：看起来改变`newDoc`没有效果（通过副本？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:22:52.793

不，您不能在`validate_doc_update`函数内修改文档内容。如果您使用[Document API](http://wiki.apache.org/couchdb/HTTP_Document_API)或通过充当服务器端处理程序的[更新处理程序，则需要在客户端设置此值。](http://wiki.apache.org/couchdb/Document_Update_Handlers)在`validate_doc_update`函数中，您只能验证此值并接受/拒绝文档的新版本。

由于时间戳不容易控制，并且客户端可能很容易通过“不正确”（非实际）值传递您的更新处理程序，我看到的唯一解决方案是`mtime`在当前时间戳的特定范围内进行验证（+/- 2-3 秒是可以的范围）并要求`ctime`初始文档版本的字段。

但是这个验证是错误的，因为你会破坏复制：复制的文档将具有过去`ctime`的`mtime`字段和验证功能在这种情况下会拒绝它。

# java - 如何在一个命令中处理不同的语句？

> ID：13331509
> 
> 赞同：2
> 
> 时间：2012-11-11T13:25:03.203
> 
> 标签：java, antlr, antlr3

如何在没有多个繁琐的分配的情况下编写以下代码？

```
statement returns [Leaf node]
    :  assignment     {node = $assignment.node;}
    |  write          {node = $write.node;}
    |  writeln        {node = $writeln.node;}
    |  readBool       {node = $readBool.node;}
    |  readInt        {node = $readInt.node;}
    ; 
```

像下面这样的东西就足够了。

```
statement returns [Leaf node]
    :  a=(assignment | write | writeln | ...) { //all statements returns `Leaf`
        node = $a.node; //but 'a' is just a `Tokien`, so we get compile error.
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:56:39.610

不，这是不可能的：

```
statement returns [Leaf node]
    :  a=(assignment | write | writeln | ...) { //all statements returns `Leaf`
        node = $a.node; //but 'a' is just a `Tokien`, so we get compile error.
    }; 
```

因为括号可能匹配多个规则：

```
a=(a b | c d e | ...) 
```

或者解析器和词法分析器规则可以混合使用：

```
a=(A b | C | d | ...) 
```

你*可以*做这样的事情：

```
statement returns [Leaf node]
    :  (a=assignment | a=write | a=writeln | ...) 
       {
         $node = $a.node;
       }; 
```

但就个人而言，我更喜欢您首先发布的内容：

```
statement returns [Leaf node]
    :  assignment     {node = $assignment.node;}
    |  write          {node = $write.node;}
    |  writeln        {node = $writeln.node;}
    |  readBool       {node = $readBool.node;}
    |  readInt        {node = $readInt.node;}
    ; 
```

恕我直言，更具可读性。

# ios - 加载委托时警告窗口层次结构

> ID：13331510
> 
> 赞同：7
> 
> 时间：2012-11-11T13:25:23.997
> 
> 标签：ios, xcode, delegates, warnings, hierarchy

今天我更新了我的 Xcode 并开始为新的 iPhone 5 屏幕更新我的应用程序。

我突然注意到，每次我从屏幕 A 转到屏幕 BI 时都会收到以下警告：

> 警告：尝试呈现不在窗口层次结构中的视图！

```
// This delegate method prepares the segue from Screen A (DilemmaViewController) to Screen B (OptionsViewController)
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Executes the following "if" statement if the user wants to add new options
    if ([segue.identifier isEqualToString:@"AddOptions"]) 
    {
        UINavigationController *navigationController = segue.destinationViewController;
        OptionsViewController *controller = (OptionsViewController *)navigationController.topViewController;
        controller.delegate = self;

        // If the user has already put some inputs on the form we send them through the segue
        if ([edit count] > 0){            
            controller.edit = edit;
        }            
    }
} 
```

自从我的应用程序的第一个版本以来，我还没有碰过这个，所以我不确定这里会发生什么。

我环顾了网络，有些人谈论将代码从 viewDidLoad 移动到 viewAppear，但我认为这不适用于这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:39:02.103

好吧，我想通了。

我的问题是，在某些时候我犯了将 Touch Up Inside 事件连接到原始（正确）segue 事件之上的错误：

![在此处输入图像描述](../Images/dcc16e57aedd5f110e8bf236c5ffa3fe.png)

现在我修复了它：

![在此处输入图像描述](../Images/8fdd1f0bfd9a320860df01f92852d426.png)

它再次正常工作。

# php - 从字符串生成数组

> ID：13331513
> 
> 赞同：0
> 
> 时间：2012-11-11T13:25:56.737
> 
> 标签：php, arrays

我有一个这样的字符串：

```
$str = '35-3|24-6|72-1|16-5'; 
```

我想生成一个数组：

```
$arr = array (

    35 => 3,
    24 => 6,
    72 => 1,
    16 => 5

); 
```

最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T13:29:01.620

您可以尝试如下

```
$str = '35-3|24-6|72-1|16-5';

$data = explode("|",$str);
$arr = array();
foreach($data as $value){
  $part = explode('-',$value);
  $arr[$part[0]]=$part[1];
}

var_dump($arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T13:32:52.057

尝试

```
if (preg_match_all('/(\d+)\-(\d*)/', $str, $matches)) {
  $arr = array_combine($matches[1], $matches[2]);
} 
```

# extjs4 - Ext JS 4.1 - 如何动态渲染图像？

> ID：13331514
> 
> 赞同：1
> 
> 时间：2012-11-11T13:26:06.933
> 
> 标签：extjs4, extjs, extjs4.1, extjs-mvc

在某些事件之后，我需要重新渲染图像（**Ext.Image ）。**我找到`doComponentLayout`了功能，但不幸的是它对我不起作用。

如何重新渲染作为表单项的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:33:54.323

有一种常见的技术可以`?`在图像的 src 和 src 处添加随机字符串。服务器忽略这部分 src 但浏览器认为您正在设置新的 src。

```
var originalSrc = 'http://example.com/someimg.png';
var antiCachePart = (new Date()).getTime();
var newSrc = originalSrc + '?dc=' + antiCachePart;
// now newSrc is equal to something like "http://example.com/someimg.png?dc=1352748617627"
img.setSrc(newSrc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:45:19.133

在 Ext.Img 的文档中说：

```
var changingImage = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/img/20110215-feat-html5.png',
    renderTo: Ext.getBody()
});

// change the src of the image programmatically
changingImage.setSrc('http://www.sencha.com/img/20110215-feat-perf.png'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:43:37.397

我以前从未使用过 Ext.Image，但一般来说，当我们需要重新渲染图像时，我们会做以下两件事之一：销毁并重新创建组件，或者将图像放入 DataView 或其他模板驱动的组件中并重新渲染模板。

`doComponentLayout`我相信只应用大小，它不会重新生成组件。如果您不能将图像放入 XTemplate 驱动的组件中，那么销毁并重新创建该组件可能是最好的选择。

# python - 如何将单个项目添加到 Pandas 系列

> ID：13331518
> 
> 赞同：87
> 
> 时间：2012-11-11T13:26:27.600
> 
> 标签：python, pandas

如何将单个项目添加到序列化的熊猫系列中。我知道这不是最有效的记忆方式，但我仍然需要这样做。

伴随着一些东西：

```
>> x = Series()
>> N = 4
>> for i in xrange(N):
>>     x.some_appending_function(i**2)    
>> print x

0 | 0
1 | 1
2 | 4
3 | 9 
```

另外，如何将单行添加到 pandas DataFrame？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-11T15:42:23.360

如何添加单个项目。这不是很有效，但遵循您的要求：

```
x = p.Series()
N = 4
for i in xrange(N):
   x = x.set_value(i, i**2) 
```

产生 x：

```
0    0
1    1
2    4
3    9 
```

显然，有更好的方法可以一次性生成这个系列。

对于您的第二个问题，请检查 SO 问题的答案和参考，[在 pandas.DataFrame 中添加一行](https://stackoverflow.com/questions/10715965/add-one-row-in-a-pandas-dataframe)。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-06-23T13:16:57.263

*TLDR：不要将项目一个一个地附加到一个系列中，最好使用有序集合进行扩展*

我认为目前形式的问题有点棘手。接受的答案确实回答了这个问题。但是我使用熊猫的次数越多，我就越明白将项目逐个附加到系列是一个坏主意。我将尝试为熊猫初学者解释为什么。

您可能认为将数据附加到给定的系列可能允许您重用一些资源，但实际上系列只是一个容器，用于存储索引和值数组之间的关系。每个都是引擎盖下的 numpy.array，并且索引是不可变的。当您向 Series 添加索引中缺少标签的项目时，将创建一个大小为 n+1 的新索引，并创建一个相同大小的新值值数组。这意味着，当您一个接一个地追加项目时，您会在每一步中再创建两个 n+1 大小的数组。

顺便说一句，您不能按位置附加新项目（您将获得 IndexError），并且索引中的标签不必是唯一的，即当您使用标签分配值时，您将值分配给所有带有标签的现有项目，并且在这种情况下不附加新行。这可能会导致细微的错误。

这个故事的寓意是你不应该一个一个地附加数据，你应该更好地扩展一个有序的集合。问题是您不能就地扩展系列。这就是为什么最好组织您的代码，这样您就不需要通过引用来更新 Series 的特定实例。

如果您自己创建标签并且它们正在增加，最简单的方法是将新项目添加到字典中，然后从字典中创建一个新系列（它对键进行排序）并将系列附加到旧系列。如果键没有增加，那么您将需要为新标签和新值创建两个单独的列表。

下面是一些代码示例：

```
In [1]: import pandas as pd
In [2]: import numpy as np

In [3]: s = pd.Series(np.arange(4)**2, index=np.arange(4))

In [4]: s
Out[4]:
0    0
1    1
2    4
3    9
dtype: int64

In [6]: id(s.index), id(s.values)
Out[6]: (4470549648, 4470593296) 
```

当我们更新现有项目时，索引和值数组保持不变（如果您不更改值的类型）

```
In [7]: s[2] = 14  

In [8]: id(s.index), id(s.values)
Out[8]: (4470549648, 4470593296) 
```

但是当您添加一个新项目时，会生成一个新索引和一个新值数组：

```
In [9]: s[4] = 16

In [10]: s
Out[10]:
0     0
1     1
2    14
3     9
4    16
dtype: int64

In [11]: id(s.index), id(s.values)
Out[11]: (4470548560, 4470595056) 
```

也就是说，如果您要附加几个项目，将它们收集到字典中，创建一个系列，将其附加到旧的并保存结果：

```
In [13]: new_items = {item: item**2 for item in range(5, 7)}

In [14]: s2 = pd.Series(new_items)

In [15]: s2  # keys are guaranteed to be sorted!
Out[15]:
5    25
6    36
dtype: int64

In [16]: s = s.append(s2); s
Out[16]:
0     0
1     1
2    14
3     9
4    16
5    25
6    36
dtype: int64 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-04-01T19:10:44.570

如果你有一个索引和值。然后你可以添加到系列：

```
obj = Series([4,7,-5,3])
obj.index=['a', 'b', 'c', 'd']

obj['e'] = 181 
```

这将为系列添加一个新值（在系列结束时）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-19T15:03:18.223

您可以使用 append 函数向其中添加另一个元素。只是，在追加之前制作一系列新元素：

```
test = test.append(pd.Series(200, index=[101])) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-04-16T10:06:05.240

至于@joaqin 的[解决方案](https://stackoverflow.com/a/13332682/7122272)已被弃用，因为`set_value`方法将在未来的熊猫版本中删除，我会提到另一个选项，即使用`.at[]`访问器将单个项目添加到熊猫系列。

```
>>> import pandas as pd
>>> x = pd.Series()
>>> N = 4
>>> for i in range(N):
...     x.at[i] = i**2 
```

它产生相同的输出。

```
>>> print(x)
0    0
1    1
2    4
3    9 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-07T04:19:32.233

添加到 joquin 的答案中，以下形式可能更简洁（至少更易于阅读）：

```
x = p.Series()
N = 4
for i in xrange(N):
   x[i] = i**2 
```

这将产生相同的输出

另外，不那么正统，但如果您只想在末尾添加一个元素：

```
x=p.Series()
value_to_append=5
x[len(x)]=value_to_append 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-27T10:34:06.947

```
import pandas as pd
import numpy as np

ser1 = pd.Series(np.linspace(1, 10, 2))
element = np.nan
ser1 = ser1.append(pd.Series(element)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-19T09:56:27.530

这是在一行中附加多个项目而不更改系列名称的另一种想法。但是，这可能不如其他答案有效。

```
>>> df = pd.Series(np.random.random(5), name='random')
>>> df

0    0.363885
1    0.402623
2    0.450449
3    0.172917
4    0.983481
Name: random, dtype: float64

>>> df.to_frame().T.assign(a=3, b=2, c=5).squeeze()

0    0.363885
1    0.402623
2    0.450449
3    0.172917
4    0.983481
a    3.000000
b    2.000000
c    5.000000
Name: random, dtype: float64 
```

# java - 为什么JDK中存在Void包装类？

> ID：13331520
> 
> 赞同：18
> 
> 时间：2012-11-11T13:26:43.667
> 
> 标签：java, void

> **可能重复：**
> [Java Void 引用类型的用途？](https://stackoverflow.com/questions/643906/uses-for-the-java-void-reference-type)

`Void`类在现实世界问题中的真正用途是什么？我们可以在什么场景下使用这个类？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T13:33:07.087

`ExecutorService`如果您有一个需要您提供对象的对象（如 an ） `Callable<T>`，您可以传递它 a`Callable<Void>`以指示您的 Callable 不返回任何内容。`Callable<T>`必须在某些类型上进行参数化，因此`Void`提供以指示缺少类型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-11T13:33:28.343

**-**与其他包装器`Void`类不同，它**本身不**存储类型值，`void`因此**本质上不是包装器**。

**-**`Void`根据**javadoc**的类之所以存在，是因为有时我们可能需要将 void 关键字表示为一个对象。

**-**但与此同时，我们**不能**使用 new 运算符创建 Void 类的实例。这是因为 Void 中的构造函数已被**声明为私有**。此外，Void 类是最终类，这意味着我们无法继承该类。

**-**`Void`所以类存在的唯一目的是**反射**，我们可以在其中获得**方法的返回类型为 void。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-11T13:30:08.837

`Void`类用于Java反射。
见[方法#getReturnType](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getReturnType%28%29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-11T13:35:40.990

正如 Luke Woodward 所指出的，java 反射 API 使用 Void.TYPE 来表示返回 void 的方法的返回类型。（返回 Void.class 我之前认为会导致返回声明 java.lang.Void 返回类型的方法产生歧义）。

```
 void test(){...};

 Method handleForTest = ...;
 assert(handleForTest.getReturnType() == Void.TYPE); 
```

Post java 1.5 Void 可以在泛型类中使用以指示它们不返回值 - 实现仍然必须返回 null，但可以忽略它，因为这是 Void 类型的唯一有效值。

```
interface<T> Example{
      //Implementations may do something and return a result
      T doSomeThing();
}

class ExampleVoid implements Example<Void>{
      //does something without returning a result
      Void doSomething(){return null;}
} 
```

此外，java 允许在覆盖方法时给出更具体的返回类型，这与上面的泛型示例基本相同，只是为了表明如果原始返回类型是 Object，它可以在没有泛型的情况下工作。（它仅限于 Object，因为 Void 遵循与所有其他 java 类型相同的规则，遗憾的是没有办法为此使用无名 null 类型）

```
interface Example{
      //Implementations may do something and return a result
      Object doSomeThing();
}

class ExampleVoid implements Example{
      //does something without returning a result
      Void doSomething(){return null;}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-11T19:15:47.690

# 原因

引入该[`Void`](http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html)类型是为了允许与外部系统（JNI、来自小程序的 JavaScript 调用等）进行回调和接口，并且自 Java 1.1 以来一直存在，用于接口类型未知的情况或由其他接口强制执行（因此您不能使用[`void`关键字](https://stackoverflow.com/questions/4681568/in-java-can-void-be-considered-a-primitive-type)）。Java 已经被设计为——除了原语和空引用——作为一种“一切都是对象”的语言，需要一个虚拟包装器/占位符来指示预期类型的​​缺失。

# 定义

由JLS（第[8.4.5节）的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-8.4.5)[方法返回类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-8.4.5)部分定义的方法需要在返回类型处正式声明：

> 方法声明的结果要么声明方法返回的值的类型（返回类型），要么使用关键字`void`表示方法不返回值。

如 JLS 部分中提到的[类文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)（[§15.8.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)）：

> `void.class`（[§8.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-8.4.5)）的类型是`Class<Void>`

# 一般使用

随着 Java 5 中泛型的引入，它的使用变得更加突出，因为它允许这些接口的定义使用泛型，并允许对这些接口和回调的使用进行类型检查。以前，有时需要由实现者知道没有传递对象或没有返回对象，例如，在使用 的特权执行块的情况下，[`AccessController`](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)Applet 中经常使用它来定义安全代码路径：

```
 somemethod() {
     // ...normal code here...
     AccessController.doPrivileged(new PrivilegedAction<Void>() {
         public Void run() {
             // privileged code goes here, for example:
             System.loadLibrary("awt");
             return null; // nothing to return
         }
     });
     // ...normal code here...
 } 
```

请注意与同一代码的 Java [1.4 版本](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/AccessController.html)的区别，调用者不清楚（并且类型安全）没有返回任何内容：

```
 somemethod() {
        // ...normal code here...
        AccessController.doPrivileged(new PrivilegedAction() {
            public Object run() {
                // privileged code goes here, for example:
                System.loadLibrary("awt");
                return null; // nothing to return
            }
        });
       // ...normal code here...
  } 
```

# 进一步阅读和类似问题

*   [可以`void`被认为是原始的](https://stackoverflow.com/questions/4681568/in-java-can-void-be-considered-a-primitive-type)
*   [Java 泛型和空类型](https://stackoverflow.com/questions/5568409/java-generics-void-void-types)
*   [Java Void 引用类型的用途](https://stackoverflow.com/questions/643906/uses-for-the-java-void-reference-type)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-11T13:53:51.777

[`JLS#14.8\. Expression Statements`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.8)

> 与 C 和 C++ 不同，Java 编程语言只允许将某些形式的表达式用作表达式语句。请注意，Java 编程语言不允许“强制转换为 void”—— **void 不是一种类型**——因此编写表达式语句的传统 C 技巧，例如：

```
(void)... ;  // incorrect! 
```

> 不起作用。另一方面，Java 编程语言允许在表达式语句中使用所有最有用的表达式，并且不需要将方法调用用作表达式语句来调用 void 方法，因此几乎不需要这样的技巧。如果需要技巧，可以使用赋值语句（第 15.26 节）或局部变量声明语句（第 14.4 节）来代替。

[`JLS#15.8.2\. Class Literals`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)

> void.class (§8.4.5) 的类型是`Class<Void>`.

[`JLS#8.4.5\. Method Return Type`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)

> 方法声明的结果要么声明方法返回的值的类型（返回类型），要么使用关键字 void 表示方法不返回值。

[`Java doc Void`](http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html)

> Void 类是一个不可实例化的占位符类，用于保存对表示 Java 关键字 void 的 Class 对象的引用。

当您想要检查方法的返回类型时，它用于反射目的

```
if (getClass().getMethod("someMethod").getReturnType() == Void.TYPE) 
```

同样适用于通用方法。

```
 final Callable<Void> callable = new Callable<Void>() {
        public Void call() {
             return null;
        }
    }; 
```

# c# - 如何处理用户控制按钮单击事件到父窗体

> ID：13331525
> 
> 赞同：0
> 
> 时间：2012-11-11T13:27:40.430
> 
> 标签：c#, winforms

我在 FormStart 上有用户控件 NumericKeyPad，我需要，当我单击 Formstart textBoxEmployee# 上的按钮，例如 button3（标签值：3）时，它会写入 3，依此类推...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:31:59.750

在 中创建一个自定义事件`UserControl`，处理按钮单击并从那里引发它。然后，从父表单中，处理您的自定义事件`UserControl`。为了说明，这是一个代码示例（VB.NET - 我不太擅长 C#）：

```
Public Class UserControl1
  Public Event ButtonClicked(tag As Object)
  Private Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click, Button2.Click, Button3.Click
    RaiseEvent ButtonClicked(CType(sender, Button).Tag)
  End Sub
End Class

Public Class Form1
  Private Sub UserControl11_ButtonClicked(tag As Object) Handles UserControl11.ButtonClicked
    TextBox1.Text = tag
  End Sub
End Class 
```

# c# - Principal Role App 引用的属性必须与 EntityType 的 key 完全相同

> ID：13331531
> 
> 赞同：11
> 
> 时间：2012-11-11T13:28:41.823
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

我首先使用 EF DB。

我提出了看法。

将其映射到 EF。

现在我收到以下错误：

> 错误 2 错误 111：Principal Role App 引用的属性必须与关系 MaMDBModel.FK_AppsData_App 的关系约束中的 Principal Role 引用的 EntityType MaMDBModel.App 的 key 完全相同。确保在 Principal Role 中指定了所有关键属性。D:\MaM\Dev\MamAdmin_1.0\MaMDBEntityFramework\MaMModel.edmx 768 11 MaMDBEntityFramework

这是我的 edmx：

[http://ge.tt/3rRWTOR/v/0?c](http://ge.tt/3rRWTOR/v/0?c)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:32:17.533

您的 edmx 文件中有一条错误消息作为注释：

```
<!--Errors Found During Generation:
warning 6002: The table/view 'MamDB.dbo.VW_APPSDATA' does not have a primary key
defined. The key has been inferred and the definition was created as a read-only
table/view.
--> 
```

EF 推断的密钥可能是错误的。根据消息，您应该在数据库中为您的视图定义一个主键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-05T02:54:09.443

一个相当老的问题，但今天仍然相关，所以我想我会分享我的 2 美分。如果事实证明重新映射两个表之间的关系比它的价值更麻烦（就像我的情况），您可以尝试从 EDMX 中删除问题表，保存，然后再次将它们重新添加到 EDMX。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-19T12:58:25.667

刚刚在一个巨大的项目中遇到了同样的错误，基本上 .edmx 文件的图表视图太大了，你甚至没有搜索几天就找不到相关的表。

这是我可以解决的方法：

*   打开 .edmx 文件
*   打开模型浏览器（CTRL+1 / VIEW > 其他窗口 > 实体数据模型浏览器）
*   从Entity Types中的错误信息（即VW_APPSDATA）中查找表
*   （也许右键单击，显示在图表中）
*   将实体类型列定义与您的数据库定义进行比较

就我而言，我添加了一个列，EF 认为该列是 PK，但事实并非如此。所以我必须设置列属性`Entity Key = False`，这为我解决了。

# c++ - 2个旋转物体opengl

> ID：13331533
> 
> 赞同：1
> 
> 时间：2012-11-11T13:29:16.190
> 
> 标签：c++, opengl

我有一个旋转大约 0,0,0 的旋转物体。我现在想要另一个对象围绕另一个对象旋转。这有点像地球绕着太阳转，然后月亮绕着地球转。我不知道该怎么做。

```
void earth(){
glPushMatrix();
    glRotatef(anglee, 1.0f, 0.0f, 0.0f);
    glTranslatef(0.0,20,0);
    glutSolidSphere(0.8,50,50);
glPopMatrix();

glPushMatrix();
    glRotatef(anglee, 0.0f, 0.0f, 0.0f);
    glTranslatef(0.0,20.0,8);
    glutSolidSphere(0.4,50,50);
glPopMatrix();
anglee+=4.0f;
} 
```

我的第一次旋转是正确的，但我不确定如何进行第二次旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:10:21.527

这是一个提示.. 在您的显示回调函数中执行此操作：

```
void display()
{
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    gluLookAt(10,10,10, 0,0,0, 0,1,0);

    /* current position is by default the origin */

    //draw sun
    glutSolidSphere(1,100,100);

    //draw planet
    glRotated(angle1,0,1,0);        //rotates position by angle1
    glTranslated(0,0,5);            //translates position by sun-planet distance
    glutSolidSphere(0.7,100,100);   //draw planet at this new position

    //draw moon
    glRotated(angle2,0,1,0);        //rotates position by angle1+angle2
    glTranslated(0,0,2);            //translates position by planet-moon distance
    glutSolidSphere(0.3,100,100);   //draw moon at this new position

    glutSwapBuffers();

    angle1 += 0.2;
    angle2 += 0.2;
    if(angle1 > 360) angle1 = 0;
    if(angle2 > 360) angle2 = 0;
} 
```

尝试评论绘制行星和月球部分的一些线条并查看差异，这将有助于您理解它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T04:17:52.500

您在**第二次**轮换中遇到的问题：

```
glRotatef(anglee, 0.0f, 0.0f, 0.0f); 
```

是你没有指定 NoRotation Axis ！

尝试：

```
glRotatef(anglee, 0.0f, 1.0f, 0.0f); 
```

绕**Y 轴**旋转！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:46:25.067

这是一些伪代码：

声明时间浮动。

在更新/绘制循环中将其增加一个小值，例如 .01

对变换 X 值执行 Math.cos(time) *（您想要的半径），对变换 Y 值执行 Math.sin(time) *（您想要的半径）。这将导致基于零附近的时间进展率的轨道运行。

如果您需要将其偏移到“中心对象”的位置，则只需将第一个对象的平移添加到每个平移轴即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T14:11:52.577

你实际上在做的是在空间中改变这两个球体。您需要做的是相对于地球的位置进行月球的定位-> 不要在绘制地球和月球之间执行 glPopMatrix() 。通过这样做，您有点重置 opengl 转换矩阵。

我会尝试如下：

1.  在 0/0/0 处画月亮
2.  将月球变换到 0/0/0 附近的轨道
3.  在 0/0/0 处绘制地球
4.  将地球转为绕太阳运行的轨道

所以一切都可以在 GPU 上完成......

PS：我没有试过你的代码。因此，可能必须对代码进行一些进一步的更改才能按预期工作......

# apache - htaccess 缺少 www

> ID：13331534
> 
> 赞同：4
> 
> 时间：2012-11-11T13:29:27.803
> 
> 标签：apache, mod-rewrite

这是我的 .htaccess

```
AddDefaultCharset UTF-8

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /xcrud
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

`www`除非用户跳过url 的一部分，否则一切都很好。有没有一种简单的方法来改变它以避免310循环错误？一个完整的例子`.htaccess`会很好，而不是 1 班轮。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:11:11.747

这解决了它。我无法让任何 301 语句起作用，但确实如此。

```
AddDefaultCharset UTF-8
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /demo2
        RewriteCond %{HTTP_HOST} ^mathpdq\.com
        RewriteRule ^(.*)$ http://www.mathpdq.com/demo2/$1 [R=permanent,L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

# css - 输入字段上不需要的内框阴影

> ID：13331539
> 
> 赞同：5
> 
> 时间：2012-11-11T13:30:00.113
> 
> 标签：css

我想将两个 90 度角的盒子阴影应用到我的`input`领域，所以我希望阴影只在顶部和底部边界，而不是在左右边界。相反，左侧有一个我无法摆脱的深色嵌入阴影（请参阅[Fiddle](http://jsfiddle.net/T9jma/)）。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T13:33:15.120

你不想要是什么意思？你正在使用`inset`，所以如果你想要输入字段之外的顶部和左侧阴影，请改为这样做

[**演示**](http://jsfiddle.net/T9jma/2/)

CSS

```
input{
    margin: 20px;
    width: 150px;
    height: 30px;
    border-radius: 10px;
    -moz-box-shadow: -5px -5px 5px #888;
    -webkit-box-shadow: -5px -5px 5px #888;
    box-shadow: -5px -5px 5px #888;
    outline: none;
    border: 1px solid #dddddd;
} 
```

如果你只想给`inset`顶部和底部做这样

[**插图顶部底部演示**](http://jsfiddle.net/T9jma/4/)

CSS

```
input{
    margin: 20px;
    width: 150px;
    height: 30px;
    border-radius: 10px;
    box-shadow: inset 0px 11px 8px -10px #888, inset 0px -11px 8px -10px #888;
    outline: none;
    border: 1px solid #dddddd;
} 
```

注意：我添加了边框，您可以删除

# twig - 如果元素不存在，则 Twig 错误

> ID：13331540
> 
> 赞同：1
> 
> 时间：2012-11-11T13:30:02.787
> 
> 标签：twig, silex

我正在将 Silex 与 Twig 一起使用，并且正在尝试查找密钥的出现。

由于密钥并不总是存在，因此方法 1 将失败并出现异常。另一方面，方法 2 可以正常工作，但是我想避免额外*的 for*和*if*条件。

这可以做到吗？

**方法一：**

```
{% if app.session.get('shop').modules.promotion %}
    exists
{% endif %} 
```

**方法二：**

```
{% if app.session.get('shop').modules is not empty %}
    {% for id, config in app.session.get('shop').modules %}
        {% if id == 'promotion' %}
            exists
        {% endif %}
    {% endfor %}
{% endif %} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:56:18.747

您可以使用`is defined`.

```
{% if app.session.get('shop').modules.promotion is defined %}
    exists
{% endif %} 
```

更多信息`defined`可以在这里找到：
[Twig：定义的文档](http://twig.sensiolabs.org/doc/tests/defined.html)

# jquery - 将 jQuery 自动完成项呈现为内联块

> ID：13331544
> 
> 赞同：1
> 
> 时间：2012-11-11T13:30:41.767
> 
> 标签：jquery, css, jquery-ui, autocomplete, jquery-ui-autocomplete

我想使用 jQuery 自动完成显示一组功能性结果（例如，能够使用箭头键进行选择），但我希望它们显示为`inline-block`.

这是我的代码。

```
$( "#people_q" ).autocomplete({
        minLength: 0,
        source: projects,
        focus: function( event, ui ) {
            $( "#people_q" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) {
            $( "#people_q" ).val( ui.item.label );
            $( "#people_q-id" ).val( ui.item.value );
            $( "#people_q-description" ).html( ui.item.desc );
            $( "#people_q-icon" ).attr( "src", "images/" + ui.item.icon );

            return false;
        }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
    };
}); 
```

这是我尝试过的样式。

```
<style>
    .ui-autocomplete {
    width:600px !important;
}

    .ui-menu-item {
        width:200px !important;
        display:inline !important;  
        }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:29:36.600

宽度在自动完成脚本中内联设置，`UL`高于您的 css 规则。你可以像这样超车：

```
$(selector).data("autocomplete")._resizeMenu=function() {
      /* do nothing and will be width of page*/
       $.noop();
      /* OR set width */
     var ul = this.menu.element;
      $(ul).width(600);
}; 
```

演示：http: [//jsfiddle.net/M92kX/2/](http://jsfiddle.net/M92kX/2/)

# jquery - Jquery attr 返回 0 而不是 value

> ID：13331546
> 
> 赞同：4
> 
> 时间：2012-11-11T13:31:03.763
> 
> 标签：jquery

所以我有一个非常简单的html：

```
​&lt;ul>
    <li value="test">test</li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​ 
```

而这个 jquery 脚本

```
alert($("li").attr("value")); 
```

它应该返回`test`，但它返回 0，为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:32:35.263

如果要返回 li 标签内的文本，则：

```
alert($("li").text());​ 
```

不能使用 'value' 属性（li 标签中的 'value' 属性只能是数字）。将其重命名为数据值：

```
alert($("li").attr("data-value"));​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:32:30.550

基本上，您的选择器正在捕获`li`您拥有的每个元素。您可能希望使您的选择器更具体。首先`<li>`你可以使用 -

```
$('li:first').attr('value'); 
```

使用`id`属性也很好。

这里要注意的另一件事是，您正在尝试提取名为 value 的属性的值，而不是元素中的实际文本内容。如果您想要属性值，那么您就在正确的轨道上。如果您想要内容，您可能想尝试使用`text()`或`html()`。

如果要处理多个元素，则可能需要考虑使用`$.each`函数。

```
var liValues = [];
$.each('li',function(index,value){
  liValues.push(value.attr('value'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:38:30.520

似乎这不起作用，因为它根本不是元素`value`的有效属性。`li`正如您在[此示例](http://jsfiddle.net/SvA8k/1/)中看到的那样，更改属性的名称以`rel`使您的代码正常工作（尽管我认为这也不`rel`是有效的......奇怪）。

您可能需要考虑将这些数据存储在不同的位置。也许使用`data-*`属性。

```
​&lt;ul>
    <li data-value="test">test</li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​

alert($("li").data("value")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-27T11:28:45.027

如果要获取值，`value`则标签中的属性`li`只能是数字。否则，您将始终得到 0。
您可以使用 index 来代替 value。如下所示：

```
.attr("value", function (currentValue, index) { return index } ) 
```

在哪里

*   `currentValue`是当前元素的值。
*   `index`是当前元素的数组索引。

# mysql - 无法使用 java servlet 的 jdbc 驱动程序使用 apache server v7.0 连接 mysql 5.5 甚至 5.1.22

> ID：13331551
> 
> 赞同：1
> 
> 时间：2012-11-11T13:31:40.990
> 
> 标签：mysql, apache, jdbc

我正在尝试为 mysql 使用 jdbc 驱动程序。但是找不到驱动程序并在eclipse中给出以下错误。（我在本地主机上使用Tomcat v7.0）

```
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3307/mydata[Ljava.lang.StackTraceElement;@50aaaf66
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at AddStudent.doPost(AddStudent.java:52)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我搜索了周围的文档并得到了这个..

> 一般来说，请按照您的 Tomcat 版本随附的安装说明进行操作，因为您在 Tomcat 中配置数据源的方式会不时发生变化，如果您在 XML 文件中使用错误的语法，您很可能会遇到异常类似于以下内容：
> 
> **错误：java.sql.SQLException：无法加载 JDBC 驱动程序类 'null' SQL 状态：null**
> 
> 请注意，在 JDBC 4.0 中自动加载具有 META-INF/service/java.sql.Driverclass 的驱动程序会导致在 Windows 上的 Tomcat 中不正确地取消部署 Connector/J 驱动程序。即，Connector/J jar 保持锁定状态。这是一个与驱动程序无关的初始化问题。如果可行，可能的解决方法如下：使用**“antiResourceLocking=true”**作为 Tomcat 上下文属性，或**删除 META-INF/目录。**

文档建议不要使用**antiResourceLocking**。我无法理解另一个..是否有任何其他方法可以解决此问题或向我推荐上述任何过程。由于我是网络新手，请您详细说明您的建议。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:19:05.817

您是否使用以下内容初始化/加载了驱动程序：

```
Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

在调用 DriveManager.getConnection(...) 之前

# javascript - Javascript 路径问题 asp.net mvc

> ID：13331552
> 
> 赞同：0
> 
> 时间：2012-11-11T13:31:45.070
> 
> 标签：javascript, jquery, asp.net-mvc

我正在 asp.net mvc 中创建一个应用程序。我知道我可以使用

```
 @Url.Content("~/Scripts/jquery-1.5.1.min.js") 
```

在将 javascript 添加到我的剃须刀文件时让我的路径正确。但我在另一个 javascipt 文件中有 javascript 引用，如下所示

```
$.include('Scripts/jquery.cycle.all.min.js')
$.include('Scripts/jquery.cookie.js') 
```

现在当我访问我的默认 url 时，我的 jquery 工作正常。但是当我使用任何 Controller.MEthod url 时，我得到 jquery 错误。

我很确定这是一些路径问题。当我使用任何控制器/方法 url 时，我的应用程序没有正确获取包含在另一个 JS 文件路径中的 JS。

请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:40:46.857

可能是因为

```
$.include('Scripts/jquery.cookie.js') 
```

是相对路径（相对于您当前所在的控制器），而

```
@Url.Content("~/Scripts/jquery-1.5.1.min.js") 
```

是绝对路径。

尝试在“网络”选项卡中查看 Firebug，以查看您的应用程序试图找到您丢失的脚本的确切***位置***

**编辑：如果在 /home/whatever (controller/action) 中，您的应用程序将在其中查找****jquery.cookie.js**， 我不会感到惊讶

```
/home/whatever/scripts/jquery.cookie.js 
```

**编辑#2** 尝试在你的 js 文件中指定一个绝对路径。像这样的东西

```
$.include('../scripts/jquery.cookie.js') 
```

用户“../”导航到应用程序的根目录。假设***jquery.cookie.js***位于***cnd/scripts/***您应该执行类似的操作

```
$.include('../../scripts/jquery.cookie.js') 
```

# extjs - ext js 过滤后更新图表饼图

> ID：13331559
> 
> 赞同：4
> 
> 时间：2012-11-11T13:32:36.100
> 
> 标签：extjs, filter, pie-chart

我在过滤图表字段时遇到问题。
我有一个包含一些字段的图表饼图。
用户可以过滤图表饼图并选择他想要查看的字段。
问题是，如果饼图有 8 个字段，而用户只选择了 6 个字段，则过滤器只过滤数据，但不过滤字段。

例如，如果我有字段

```
{name:'Asia','data1':9, sex:'Male'},
{name:'Africa','data1':2, sex:'Male'},
{name:'Europe','data1':5, sex:'Female'},
{name:'USA','data1':3, sex:'Male'}, 
```

我想过滤亚洲、非洲和欧洲，我仍然可以看到美国名称字段（没有数据）。

编码：

```
storeIng.filterBy(function(record,id){ 
    var fieldName = record.get('name')
    for(var i = 0; i < fields.length; i++) {
        if (fields[i] === fieldName) 
            return true;
    }
    return false;
}); 
```

[在http://i45.tinypic.com/1z1zofq.jpg](http://i45.tinypic.com/1eq74i.jpg) 之后 ，我也在[http://i45.tinypic.com/1eq74i.jpg](http://i45.tinypic.com/1z1zofq.jpg)之前添加了屏幕截图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:41:23.983

由于您没有提供太多代码，请尝试此代码以供参考，看看哪里有错误。您编写的 filterBy 函数似乎没问题。如果他们在过滤商店数据时遇到问题，这也可以帮助其他人阅读本文。

```
 Ext.onReady(function(){

var data=[
            {name:'Asia','data1':9, sex:'Male'},
            {name:'Africa','data1':2, sex:'Male'},
            {name:'Europe','data1':5, sex:'Female'},
            {name:'USA','data1':3, sex:'Male'}
        ]

var store = Ext.create('Ext.data.JsonStore', {
fields: ['name', 'data1','sex'],
data:data
              });

              store.filterBy(function(record,id){
if(record.get('name')==="Asia")
    return true;
             })

    Ext.create('Ext.chart.Chart', {
renderTo: Ext.getBody(),
width: 500,
height: 350,
animate: true,
store: store,
theme: 'Base:gradients',
series: [{
    type: 'pie',
    angleField: 'data1',
    showInLegend: true,

    highlight: {
        segment: {
            margin: 20
        }
    },
    label: {
        field: 'name',
        display: 'rotate',
        contrast: true,
        font: '18px Arial'
    }
}]
         });

     }); 
```

# php - 在 Facebook 应用程序查询中添加用户数据未运行

> ID：13331562
> 
> 赞同：0
> 
> 时间：2012-11-11T13:32:54.680
> 
> 标签：php, mysql, facebook

我在 facebook 上运行一个应用程序，但是从表中获取数据似乎有问题，表中有数据添加到索引页面中，我需要在其他地方访问它，问题是，查询没有'不起作用，在这里，我正在打开表格以查看用户是否存在，如果用户不存在，那么我稍后会添加它们：

```
$fb_id=$userdata['id'];
        $querya="SELECT * FROM user_info WHERE user_info.fb_id='$fb_id'";
        $result1=mysql_query($querya);

            if(mysql_num_rows($result1)==0){

                         //add user to table, as they don't exist
                           } 
```

以上可能是什么问题？userdata['id'] 确实有数据，我将其打印出来并显示了用户的 facebook id，那么为什么没有发生任何事情呢？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:44:41.870

我的猜测是您使用的是 INT 列，而不是 BIGINT 或 VARCHAR。Facebook ID 太长，无法放入传统的 32 位 INT 列。如果您将表结构更改为使用 BIGINT 或 VARCHAR（如果您要进行这样的查找，请确保为该列编制索引），您应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:35:05.020

错误是查询语法，在单引号内使用 vars 将变量作为字符串而不是变量返回查询应该是：

```
 $querya="SELECT * FROM user_info WHERE user_info.fb_id='".$fb_id."'"; 
```

# groovy - 创建一个 URL 友好的字符串

> ID：13331563
> 
> 赞同：1
> 
> 时间：2012-11-11T13:32:58.717
> 
> 标签：groovy

我有一个字符串，我想让 url 友好。字符串可能如下所示：`A string with $trange characters!".`然后我想转义所有错误的 url 字符并最终得到`a-string-with-trange-characters`

在 Groovy 中完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:48:21.487

这行得通吗？

```
string.replaceAll( /[^0-9a-zA-Z ]/, '' ).tr( ' ', '-' ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T14:10:59.337

在许多情况下，您可能希望不完全去除非字母数字字符，而是首先分解它们：

```
import java.text.Normalizer

println Normalizer.normalize("String with \$strang\u00E9 chars", Normalizer.Form.NFD)
    .replaceAll(/[^A-z0-9 ]/, "")
    .replaceAll(/ +/, "-") 
```

在上面，`\u00E9`是'é'。分解将其变成字符'e'和组合标记'''。因此，当您应用转换时，结果是“奇怪-”而不是“奇怪-”。

请注意，这并不是获取给定字符串的 ASCII 友好版本的全部内容......例如，它不会将“ [ß](http://www.fileformat.info/info/unicode/char/00df/index.htm) ”转换为“ss”。我不知道在 Java/Groovy 中执行此操作的最佳方法（在初始字符串上使用 toUpperCase().toLowerCase() 似乎有点“hacky”）。

# iphone - 如何检查 ScrollView 是否有页脚

> ID：13331566
> 
> 赞同：0
> 
> 时间：2012-11-11T13:33:08.427
> 
> 标签：iphone, objective-c, ios

我想在我的应用程序中使用[EGORefreshTableHeaderView](https://github.com/enormego/EGOTableViewPullRefresh/blob/master/EGOTableViewPullRefresh/Classes/View/EGORefreshTableHeaderView.m)。

我的应用程序中有不同的 UITableViews。在其中一个中，我有一个 UIView 作为页脚，而在另一个中没有。在 EGORefreshTableHeaderView 中检查此代码：

```
- (void)egoRefreshScrollViewDidScroll:(UIScrollView *)scrollView {
    if (_state == EGOOPullRefreshLoading) {
        CGFloat offset = MAX(scrollView.contentOffset.y * -1, 0);
        offset = MIN(offset, 60);
        scrollView.contentInset = UIEdgeInsetsMake(offset, 0.0f, 0.0f, 0.0f);
     } 
```

如您所见， contentInset.bottom 是`0.0f`. 结果是带有页脚的 TableView 我有问题。如何检查是否`scrollView`有页脚？

那我可以说：

```
if(ScrollView has footer)
      bottom = 50;
else
     bottom = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:46:06.190

这是我到目前为止找到的解决方案：

```
CGFloat bottom = 0.0f;
if([scrollView isKindOfClass:[UITableView class]]) {
    if(((UITableView *)scrollView).tableFooterView)
        bottom = 50.0f;
}
[scrollView setContentInset:UIEdgeInsetsMake(0.0f, 0.0f, bottom, 0.0f)]; 
```

# javascript - jqGrid级联下拉更改事件不会触发

> ID：13331569
> 
> 赞同：1
> 
> 时间：2012-11-11T13:33:16.633
> 
> 标签：javascript, jquery, jqgrid, jquery-events, jqgrid-asp.net

在 Oleg 和许多网站的帮助下，我一直致力于让级联数据绑定下拉菜单在 jqGrid 中运行

我有三个下拉菜单：客户>项目>任务。更改客户应使用该客户项目重新加载项目。更改项目应使用该项目任务重新加载任务。

实际上，我已经通过在 Customer 中创建一个更改事件处理程序来让 Project 重新加载该客户任务，该事件处理程序反过来调用`getJson`URL，然后用新选项替换 Project 下拉列表的内容。它工作得很好。

然后，我将相同的逻辑应用于 Project 下拉菜单，但 Project 事件似乎*没有*触发。在更改项目下拉列表时，我观察到以下内容：

1.  任务下拉列表没有改变
2.  任务 Json 控制器事件未被调用（它意味着`getJSON`在项目更改事件中被调用）
3.  在 Firebug 中，在网络监视器中，不会出现对 Task Json 控制器事件的​​调用和响应。
4.  在 Firebug 中，它没有命中我在项目更改事件处理程序中设置的断点

然而，客户事件处理程序完美地工作，并在我更改客户时按预期执行上述所有 4 点。

我相当确定它不会针对项目下拉菜单触发更改事件。

如果我运行网页并编辑和更改项目下拉值作为我的第一个操作，它不会触发项目事件处理程序，所以我不认为这是重置项目事件处理程序的客户事件。

那么，有谁知道为什么我的客户更改事件*被*调用但我的项目一不是？

有没有办法可以检查 DOM 或其他东西，看看我的事件是否已在运行时附加？这就是它的工作方式吗？

我正在使用 jqGrid 4.4.1

我的 jqGrid 是这样设置的：

*   使用内联编辑
*   单击以选择 dblclick 以编辑
*   日期选择器附加到日期列
*   编辑后，我从隐藏字段中获取了 select db 键值，但我希望我可以删除它。
*   我有三个相邻的选择

这是我的 jqGrid 定义

```
$(document).ready(
    function () {
        // This is executed as soon as the DOM is loaded and before the page contents are loaded
        var lastsel;
        // $ is short for JQuery which is in turn a super overloaded function that does lots of things.
        // # means select an element by its ID name, i.e. below we have <table id="ts"
        // .jqGrid means attach a jqGrid 'thing' to all elements that have ts as their element name (there's only one)
        // jqGrid is a thing defined in the jqGrid javascript file
        $("#ts").jqGrid({
            //=============
            // Grid Setup
            url: 'Timesheet/GridData/',
            datatype: 'json',
            mtype: 'GET',
            pager: $('#pager'),
            rowNum: 30,
            rowList: [10, 20, 30, 40, 80],
            viewrecords: true,
            caption: 'Timesheet',
            height: 450,
            // Column definition
            colNames: ['hCustomer_ID', 'hProject_ID', 'hTask_ID', 'Date', 'Customer', 'Project', 'Task', 'Description', 'Hours', '$'],
            colModel: [
              { name: 'hCustomer_ID', index: 'hCustomer_ID', editable: false, hidden: true },
              { name: 'hProject_ID', index: 'hProject_ID', editable: false, hidden: true },
              { name: 'hTask_ID', index: 'hTask_ID', editable: false, hidden: true },
              { name: 'tsdate', index: 'tsdate', width: 80, editable: true, datefmt: 'yyyy-mm-dd' },
            // Defintion for customer column
              {name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: "select",
              editoptions: {
                  // Default URL used to populate drop down when the column goes into edit mode  
                  dataUrl: 'Timesheet/CustomerList',
                  dataEvents: [
                      {
                          // this is the change handler. This is called when the customer is changed
                          type: 'change',
                          fn: function (e) {
                              // get a reference to the project and task drop downs on this same row
                              var eProject = '#' + $(this).attr("id").replace("_Customer", "_Project");
                              var eTask = '#' + $(this).attr("id").replace("_Customer", "_Task");
                              // Call getJSON to get data from a URL and process it with a callback function
                              $.getJSON(
                              // the URL to call
                                'Timesheet/ProjectListJSON',
                              // the parameter(s) to pass to the URL
                                {Customer_ID: this.value },
                              // The callback function. The results of the JSON call are passed into jData
                                function (jData) {
                                    var selectHtml = ""
                                    // Repopulate the project drop down with the results of the JSON call
                                    $.each(
                                        jData,
                                        function (jdIndex, jdData) {
                                            selectHtml = selectHtml + "<option value='" + jdData.Value + "'>" + jdData.Text + "</option>";
                                        });
                                    // dont use innerHTML as it is not supported properly by IE
                                    // insted use jQuery html to change the select list options
                                    $(eProject).html(selectHtml);
                                    // blank out tasks
                                    $(eTask).html("");
                                } // END getJSON callback function definition
                              ); // END getJSON function call
                          } // END change event definition
                      }] // END dataEvents definition
              } // END editoptions list
          }, // END Customer jqGrid field definition
            // Definition for Project drop down
          {name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: "select",
          editoptions: {
              dataUrl: 'Timesheet/ProjectList',
              dataEvents: [
                      {
                          type: 'change',
                          fn: function (e) {
                              var eTask = '#' + $(this).attr("id").replace("_Project", "_Task");
                              $.getJSON(
                                'Timesheet/TaskListJSON',
                                { CustomerProject_ID: this.value },
                                function (jData) {
                                    var selectHtml = "";
                                    $.each(
                                        jData,
                                        function (jdIndex, jdData) {
                                            selectHtml = selectHtml + "<option value='" + jdData.Value + "'>" + jdData.Text + "</option>";
                                        });
                                        $(eTask).html(selectHtml);
                                } // END getJSON callback function definition
                              ); // END getJSON function call
                          } // END change event handler definition
                      }] // END dataevents definition
          } // END editoptions list
      }, // END Project jqGrid field definition
              {name: 'Task', index: 'Task', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/TaskList'} },
              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },
              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },
              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: "0:1" }, formatter: "checkbox", formatoptions: { disabled: false }, editable: true }
            ],
            //=============
            // Grid Events
            // when selecting, undo anything else
            onSelectRow: function (rowid, iRow, iCol, e) {
                if (rowid && rowid !== lastsel) {
                    // $(this).jqGrid('restoreRow', lastsel);
                    lastsel = rowid;
                }
            },
            // double click to edit
            ondblClickRow: function (rowid, iRow, iCol, e) {
                // browser independent stuff
                if (!e) e = window.event;
                var element = e.target || e.srcElement

                // When editing, change the drop down datasources to filter on the current parent
                $(this).jqGrid('setColProp', 'Project', { editoptions: { dataUrl: 'Timesheet/ProjectList?Customer_ID=' + $(this).jqGrid('getCell', rowid, 'hCustomer_ID')} });
                $(this).jqGrid('setColProp', 'Task', { editoptions: { dataUrl: 'Timesheet/TaskList?CustomerProject_ID=' + $(this).jqGrid('getCell', rowid, 'hProject_ID')} });

                // Go into edit mode (automatically moves focus to first field)
                // Use setTimout to apply the focus and datepicker after the first field gets the focus
                $(this).jqGrid(
                    'editRow',
                    rowid,
                    {
                        keys: true,
                        oneditfunc: function (rowId) {
                            setTimeout(function () {
                                $("input, select", element).focus();
                                $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
                            }, 50);
                        }
                    }
                );

            },  // end ondblClickRow event handler
            postData:
                {
                    startDate: function () { return $('#startDate').val(); }
                }
        }); // END jQuery("#ts").jqGrid

        $("#ts").jqGrid('navGrid', '#pager', { view: false, edit: false, add: false, del: false, search: false });
        $("#ts").jqGrid('inlineNav', "#pager");

    });                                       // END jQuery(document).ready(function () { 
```

**固定代码在这里**

我将更改事件处理程序定义从列定义中移到了 dblclick 事件处理程序中。它仍然不完美。我确信每次附加事件处理程序都会产生一些开销，并且当客户更改时，它会更新并选择第一个项目但清除任务。

```
$(document).ready(
    function () {
        // This is executed as soon as the DOM is loaded and before the page contents are loaded
        var lastsel;
        // $ is short for JQuery which is in turn a super overloaded function that does lots of things.
        // # means select an element by its ID name, i.e. below we have <table id="ts"
        // .jqGrid means attach a jqGrid 'thing' to all elements that have ts as their element name (there's only one)
        // jqGrid is a thing defined in the jqGrid javascript file
        $("#ts").jqGrid({
            //=============
            // Grid Setup
            url: 'Timesheet/GridData/',
            datatype: 'json',
            mtype: 'GET',
            pager: $('#pager'),
            rowNum: 30,
            rowList: [10, 20, 30, 40, 80],
            viewrecords: true,
            caption: 'Timesheet',
            height: 450,
            // Column definition
            colNames: ['hCustomer_ID', 'hProject_ID', 'hTask_ID', 'Date', 'Customer', 'Project', 'Task', 'Description', 'Hours', '$'],
            colModel: [
              { name: 'hCustomer_ID', index: 'hCustomer_ID', editable: false, hidden: true },
              { name: 'hProject_ID', index: 'hProject_ID', editable: false, hidden: true },
              { name: 'hTask_ID', index: 'hTask_ID', editable: false, hidden: true },
              { name: 'tsdate', index: 'tsdate', width: 80, editable: true, datefmt: 'yyyy-mm-dd' },
            // Defintion for customer column
              {name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: "select",
              editoptions: {
                  // Default URL used to populate drop down when the column goes into edit mode  
                  dataUrl: 'Timesheet/CustomerList',
                  dataEvents: [
                      {
                          // this is the change handler. This is called when the customer is changed
                          type: 'change',
                          fn: function (e) {
                              // get a reference to the project and task drop downs on this same row
                              var eProject = '#' + $(this).attr("id").replace("_Customer", "_Project");
                              var eTask = '#' + $(this).attr("id").replace("_Customer", "_Task");
                              // Call getJSON to get data from a URL and process it with a callback function
                              $.getJSON(
                              // the URL to call
                                'Timesheet/ProjectListJSON',
                              // the parameter(s) to pass to the URL
                                {Customer_ID: this.value },
                              // The callback function. The results of the JSON call are passed into jData
                                function (jData) {
                                    var selectHtml = ""
                                    // Repopulate the project drop down with the results of the JSON call
                                    $.each(
                                        jData,
                                        function (jdIndex, jdData) {
                                            selectHtml = selectHtml + "<option value='" + jdData.Value + "'>" + jdData.Text + "</option>";
                                        });
                                    // dont use innerHTML as it is not supported properly by IE
                                    // insted use jQuery html to change the select list options
                                    $(eProject).html(selectHtml);
                                    // clear task list
                                    $(eTask).html(""); 
                                } // END getJSON callback function definition
                              ); // END getJSON function call
                          } // END change event definition
                      }] // END dataEvents definition
              } // END editoptions list
          }, // END Customer jqGrid field definition
            // Definition for Project drop down
              {name: 'Project', index: 'Project', width: 250, align: 'left', editable: true,
              edittype: "select", editoptions: { dataUrl: 'Timesheet/ProjectList'}
          }, // END Project jqGrid field definition
              {name: 'Task', index: 'Task', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/TaskList'} },
              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },
              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },
              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: "0:1" }, formatter: "checkbox", formatoptions: { disabled: false }, editable: true }
            ],
            //=============
            // Grid Events
            // when selecting, undo anything else
            onSelectRow: function (rowid, iRow, iCol, e) {
                if (rowid && rowid !== lastsel) {
                    // $(this).jqGrid('restoreRow', lastsel);
                    lastsel = rowid;
                }
            },
            // double click to edit
            ondblClickRow: function (rowid, iRow, iCol, e) {
                // browser independent stuff
                if (!e) e = window.event;
                var element = e.target || e.srcElement

                // When editing, change the drop down datasources to filter on the current parent
                // By default tasks are limited to the current project
                $(this).jqGrid('setColProp', 'Task', { editoptions: { dataUrl: 'Timesheet/TaskList?CustomerProject_ID=' + $(this).jqGrid('getCell', rowid, 'hProject_ID')} });

                // By default projects are limited to the current Customer (dataUrl)
                // Also attach event handler to autopopulate tasks (dataEvents)
                $(this).jqGrid('setColProp', 'Project', {
                    //                    editoptions: { dataUrl: 'Timesheet/ProjectList?Customer_ID=' + $(this).jqGrid('getCell', rowid, 'hCustomer_ID')} });
                    editoptions: {
                        dataUrl: 'Timesheet/ProjectList?Customer_ID=' + $(this).jqGrid('getCell', rowid, 'hCustomer_ID'),
                        dataEvents: [
                              {
                                  type: 'change',
                                  fn: function (e) {
                                      var eTask = '#' + $(this).attr("id").replace("_Project", "_Task");
                                      $.getJSON(
                                        'Timesheet/TaskListJSON',
                                        { CustomerProject_ID: this.value },
                                        function (jData) {
                                            var selectHtml = "";
                                            $.each(
                                                jData,
                                                function (jdIndex, jdData) {
                                                    selectHtml = selectHtml + "<option value='" + jdData.Value + "'>" + jdData.Text + "</option>";
                                                });
                                            $(eTask).html(selectHtml);
                                        } // END getJSON callback function definition
                                      ); // END getJSON function call
                                  } // END change event handler definition
                              }] // END dataevents definition
                    } // END editoptions list
                } // END data to be applied to setColProp
                ); // END jqGrid setColProp

                // Go into edit mode (automatically moves focus to first field)
                // Use setTimout to apply the focus and datepicker after the first field gets the focus
                $(this).jqGrid(
                    'editRow',
                    rowid,
                    {
                        keys: true,
                        oneditfunc: function (rowId) {
                            setTimeout(function () {
                                $("input, select", element).focus();
                                $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
                            }, 50);
                        }
                    }
                );

            },  // end ondblClickRow event handler
            postData:
                {
                    startDate: function () { return $('#startDate').val(); }
                }
        }); // END jQuery("#ts").jqGrid

        $("#ts").jqGrid('navGrid', '#pager', { view: false, edit: false, add: false, del: false, search: false });
        $("#ts").jqGrid('inlineNav', "#pager");

    });                                         // END jQuery(document).ready(function () { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:14:47.673

我想您遇到问题的原因是使用`jQuery.empty`（见行`eTask.empty();`和`eProject.empty();`）。如果您检查[jQuery.empty](http://api.jquery.com/empty/)的描述，您会发现以下内容：

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。
> 
> 如果您想在不破坏其数据或事件处理程序的情况下删除元素（以便以后可以重新添加它们），请改用 .detach() 。

在我看来，在您的情况下，可以只构造作为所有`<option>`元素串联的字符串。然后，您可以使用`jQuery.html`将所有旧选项替换为新选项。您不仅可以解决您的主要问题，而且还具有一些性能优势。您应该了解的问题是，如果您更改页面上的某些元素，Web 浏览器必须重新计算页面上**所有现有元素的**位置或样式。因此，如果您`jQuery.append`在循环中调用，那么每个调用将至少跟随到[reflow](https://developers.google.com/speed/articles/reflow)，这是扩展的。所以你应该更好地编写你的程序，这样页面上的更改次数就会减少。如果您首先`innerHTML`将`<select>`元素构造为 HTML 字符串并使用一次*调用*`jQuery.html`（或仅设置`innerHTML`DOM 元素的属性）您将获得性能提升。

我在您的程序中看到的另一个问题是初始化“项目”和“任务”中的选择。如果用户开始编辑该行，则选择元素将被填充`dataUrl: 'Timesheet/TaskList'`和`dataUrl: 'Timesheet/ProjectList'`。因此，您将拥有**所有**项目和任务，而不仅仅是`'Customer'`基于`'Customer'`和`'Project'`值的项目和任务。我认为您必须*在开始编辑之前设置与**行相关的初始值`dataUrl`*。例如，在表单编辑的情况下，您可以在`onInitializeForm`回调中执行此操作。如果您使用内联编辑，您应该*在*调用`editRow`.

我建议您仔细检查[答案](https://stackoverflow.com/a/4480184/315935)中[的演示](http://www.ok-soft-gmbh.com/jqGrid/EditWithDependendSelects2_.htm)代码。它不使用，但会多次更改属性。在您的情况下，更改属性将对应于.`dataUrl``value``value``dataUrl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:30:50.117

好的，问题是在 ondblClickRow 事件处理程序中我设置了 editoptions / dataUrl 属性。由于此时我还没有指定 editoptions / dataEvents 属性，因此它基本上是什么都没有覆盖静态事件处理程序。

在 ondblClickRow 事件处理程序中，我只覆盖了 Project 和 Tasks 下拉列表，这解释了为什么要删除 Project 处理程序而不是 Customer 处理程序。

向 Oleg 道歉：我一开始没有发布完整的代码，所以我没有包含双击事件。

无论如何，奥列格如果你能建议我如何保存事件处理程序，我可以给你答案。否则，即使您的帮助非常宝贵，我也会将此作为答案。我猜我可能需要将事件处理程序定义向下移动到 dblclick 事件处理程序而不是列定义中？

# c++ - 强制父进程收割子进程

> ID：13331570
> 
> 赞同：2
> 
> 时间：2012-11-11T13:33:24.677
> 
> 标签：c++, linux, zombie-process

我一直在拼命地试图杀死父进程的子进程。

我试过了： 1\. kill -15 pid

1.  kill -shotgun pid

2.  杀死 -9 pid

当 ps -A 在linux中时，他们都解决了将子进程写为：“defunct”（僵尸）。

如何终止进程并强制将其从进程表中清除。我必须清理它，因为它在进程表中缺少记录是我在代码中验证进程已死的方式。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:40:52.340

如果要收集子进程，则必须使用`waitpid`. 从手册页：

> 终止但没有等待的孩子成为“僵尸”。内核维护有关僵尸进程的最小信息集（PID、终止状态、资源使用信息），以便允许父进程稍后执行等待以获取有关子进程的信息。只要僵尸没有通过等待从系统中移除，它就会消耗内核进程表中的一个槽，如果这个表被填满，就不能再创建更多的进程。

用法有点像：

```
#include <sys/types.h>
#include <sys/wait.h>

...
waitpid(child_pid, 0, 0); 
```

如果您想立即返回，即使孩子尚未退出：

```
waitpid(child_pid, 0, WNOHANG); 
```

如果您只想收集所有僵尸孩子，而不查找有关特定孩子的信息，您可以：

```
waitpid(-1, 0, WNOHANG); 
```

您可以在循环中执行此操作，直到`waitpid`返回负数（即错误）并且 errno 指示 ECHILD。

顺便说一句，这还允许您实际找出进程的状态，请阅读手册页以获取更多信息。

# node.js - Node.js - 在服务器上打印（是的，在 Win7 64 位上使用硬件打印机）

> ID：13331571
> 
> 赞同：2
> 
> 时间：2012-11-11T13:33:25.037
> 
> 标签：node.js

我已经使用 node.js 编写了一个软件，现在我需要使用 USB 打印机的可能性。就像通过客户端告诉通过 USB 连接到 node.js-server 的打印机上打印一些东西一样。我还想知道我是否可以通过 node.js，shellexecute 样式执行 exe。我已经搜索到足以证明这个问题的合理性。

我很感激任何提示。

我找到了一个解决方案......不完全是我想要的，但这里有一个例子：

```
var exec = require('child_process').exec;
var Data = '';
for (var i=0; i<10; i++){Data+=i+' '}
exec('printit.bat '+Data,
    function (error, stdout, stderr) {
        console.log('stdout: ' + stdout);
        console.log('stderr: ' + stderr);
        if (error !== null) {
            console.log('exec error: ' + error);
        }
    }); 
```

我在 server.js 文件的根目录中使用给定的参数执行一个 bat 文件（这里只是从 0 到 9 的计数，因此 bat 文件有 10 个参数）所以我可以简单地在那里处理它甚至使用可执行文件。

windows中有一个命令，叫做print。通过使用此命令，例如 print /d:\networkprinterpath\printer1 c:\filetoprint.txt 在我的例子中，我使用一个特殊的打印机来打印收据 - 热敏打印机。这些打印机具有裁切纸张的功能。要将此功能添加到打印中，您必须将特殊的十六进制代码添加到文件的末尾。例如，我的打印机是 Epson TM-88 IV，到文件末尾，我成功使用了十六进制代码 1D 56 42 FF。这应该适用于曾经的 TM-88 打印机。

# jquery - 裁剪图像无论文件扩展名是什么

> ID：13331574
> 
> 赞同：0
> 
> 时间：2012-11-11T13:33:34.057
> 
> 标签：jquery

HTML 标记：

```
<div class="postbody">
<a href="#"><img src="http://1stimg.jpg?width=300"></a>
</div>
<div class="postbody">
<a href="#"><img src="http://2ndimg.jpeg?width=300"></a>
</div>
<div class="postbody">
<a href="#"><img src="http://3rdimg.png?width=300"></a>
</div>
<div class="postbody">
<a href="#"><img src="http://4thimg.gif?width=300"></a>
</div> 
```

我正在使用下面的代码来裁剪上面的图像，但它仅适用于第一张图像：

```
<script type="text/javascript">
$("div.postbody img").each(function() {
    var iu = this.src;
    iu = iu.substr(0, iu.indexOf('jpg')) + 'jpg?width=150&height=150&crop=1%3A1';
    this.src = iu;
});
</script> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:38:39.610

您正在替换所有源属性，无论它是否与扩展名匹配。

在进行替换之前检查正确的扩展名：

```
$(function() {
    $("div.postbody img").each(function() {
        var iu = this.src;
        if (iu.indexOf('jpg')!=-1) {
            iu = iu.substr(0, iu.indexOf('jpg')) + 'jpg?width=150&height=150&crop=1%3A1';
            this.src = iu;
        }
        else if (iu.indexOf('jpeg')!=-1) {
            iu = iu.substr(0, iu.indexOf('jpeg')) + 'jpeg?width=150&height=150&crop=1%3A1';
            this.src = iu;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:37:55.170

更好地使用`indexOf('.')`而不是`indexOf('jpg')`为了任何值得的东西。为什么您只想将其修复为“jpg”？你为什么不要求一个更小的图像呢？

# pthreads - 在不锁定互斥体的情况下调用 pthread_cond_wait

> ID：13331578
> 
> 赞同：0
> 
> 时间：2012-11-11T13:34:18.777
> 
> 标签：pthreads, mutex, conditional-statements, wait

```
#include<pthread.h>
#include<stdio.h>
#include <errno.h>
pthread_cond_t done;
pthread_mutex_t mutex;
void*cond_wait(void*p){
while(1){
printf("%dwait\n",(int)p);
pthread_cond_wait(&done,&mutex);
printf("%dwakeup\n",(int)p);
}

}
int main(){
int status;
int i=1;
pthread_t p;
status=pthread_mutex_init(&mutex,NULL);
pthread_mutex_lock(&mutex);
pthread_cond_init(&done,NULL);
pthread_create(&p,NULL,cond_wait,(void*)1);
while(1){
sleep(1);
pthread_cond_signal(&done);
}
} 
```

线程刚刚醒来，并没有被互斥锁阻塞，因为它不调用调用 pthread_cond_wait 而不锁定互斥锁。对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:14:07.143

如果您`pthread_cond_wait()`在调用线程尚未锁定互斥锁的情况下调用，则程序具有未定义的行为。任何事情都可能发生，包括崩溃。

# scala - 试试不是一个完整的表达？

> ID：13331579
> 
> 赞同：2
> 
> 时间：2012-11-11T13:34:39.257
> 
> 标签：scala, try-catch, expression

Try/catch 可以像表达式一样使用，所以：

```
 scala> try { 3 } catch {case _ => 0}
 res52: Int = 3 
```

还：

```
scala> try { 3 } catch {case _ => 0} finally try {println("side effect")} catch { case _ => println("catching side effect") } 
side effect
res50: Int = 3 
```

那为什么不呢：

```
 scala> try { 3 } catch {case _ => 0} + 4
 <console>:1: error: ';' expected but identifier found.
   try { 3 } catch {case _ => 0} + 4 
```

或者为什么不：

```
scala> try { 3 } catch {case _ => 0} match {case 3 => "hi"}
<console>:1: error: ';' expected but 'match' found.
   try { 3 } catch {case _ => 0} match {case 3 => "hi"} 
```

我的目标是这样的函数定义：

```
def transact[T](code : Unit => T):T = 
   try {startTransaction; Right(code)} 
     catch {case t:Throwable => Left(t)} 
   finally try {endTransaction} 
     catch { case e:... if ... => throw e}  
 match  {
   case Right(e) => e
   case Left....
 } 
```

当然，我可以将 try/catch 存储在 val 中并匹配 val：

```
 def transact[T](code : Unit => T):T = 
 {
   val transa = try {startTransaction; Right(code)} 
     catch {case t:Throwable => Left(t)} 
   finally try {endTransaction} 
     catch { case e:... if ... => throw e}  
transa match { 
 case ...
}
} 
```

但它不再是一个单一的表达式，我需要在另一个 {} 中包装 - 如果我错了，请纠正我 - 意味着另一层函数对象包装也就是间接，在性能关键的地方。

那么，有没有办法将 try 用作完整表达式并避免这种间接性？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T13:40:43.993

这是一个 scala 语法问题——只需添加括号将 try/catch 块转换为 SimpleExpr，这样您就可以继续对其进行操作：

```
scala> (try { 3 } catch {case _ => 0}) + 4
res1: Int = 7

scala> (try { 3 } catch {case _ => 0}) match {case 3 => "hi"}
res2: java.lang.String = hi 
```

像往常一样，大括号和圆括号（大部分）是可以互换的——你的目标代码使用大括号会更好看（imo）。

不知道间接 - 你需要查看编译的字节码 - 但我怀疑它会有所作为。

有关语法问题的完整解释（这并不是我最初认为的运算符优先级问题），请参阅：[https ://stackoverflow.com/a/7530565/178551](https://stackoverflow.com/a/7530565/178551)

# python - 从龙卷风开始

> ID：13331580
> 
> 赞同：0
> 
> 时间：2012-11-11T13:34:46.417
> 
> 标签：python, tornado

我安装 Tornado 2.4，如何运行应用程序？我需要安装ngnix吗？在文档中不要写关于正在运行的应用程序！

我用的是ubuntu，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:15:17.567

创建一个python文件server.py

```
import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web

from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)

class MainHandler(tornado.web.RequestHandler):
   def get(self):
        self.write("Hello, world")

def main():
    tornado.options.parse_command_line()
    application = tornado.web.Application([
        (r"/", MainHandler),
    ])
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

现在你可以用 python 启动它了！

```
python server.py 
```

打开浏览器 --> `http://127.0.0.1:8888`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:54:54.170

Tornado 不是您可以运行的应用程序。它是一个用于 Web 服务的库。您需要安装可以运行/服务 Python 的服务器。然后你可以安装模块 Tornado。您是否阅读了安装说明？

[http://pypi.python.org/pypi/tornado](http://pypi.python.org/pypi/tornado)

“在 Python 2.6 和 2.7 上，也可以简单地将 tornado 目录添加到 PYTHONPATH 中，而不是使用 setup.py 构建，因为标准库包含 epoll 支持。”

您所需要的只是支持 CGI 并安装了 python 的服务器配置。像 Apache 或 nginx。所以，是的（有点） [http://docs.python.org/2/howto/webservers.html](http://docs.python.org/2/howto/webservers.html)文档的第一页说它不依赖于任何超大的python——除了一个正常运行的HTTP服务器，因为这就是您访问脚本的方式。

# javascript - 一种优化请求数量、缓存使用和脚本加载的机制

> ID：13331581
> 
> 赞同：1
> 
> 时间：2012-11-11T13:34:49.640
> 
> 标签：javascript, html, http

问题：

*   由于延迟和浏览器对同时请求数量的限制，最好尽可能减少请求。
*   最好将用于仅加载所需的 js 库从服务器或缓存中分离出来。
*   这 2 条规则通常是不兼容的。

所以，我想合并一个页面所需的所有js文件，然后拆分每个文件并将每个文件放在缓存中。所以，当我需要一个已经需要的 js 文件时，它已经在缓存中，我将只加载这个。这可以通过文件系统 api 实现，但理想的情况是通过服务器上的原始 url 引用缓存中的文件。我想知道是否存在通过客户端上的 url 引用数据的机制。

# node.js - Vagrant、Puppet 和 nodejs 模块：在安装 npm 模块时抛出错误

> ID：13331582
> 
> 赞同：6
> 
> 时间：2012-11-11T13:34:53.223
> 
> 标签：node.js, npm, puppet, vagrant

我有以下清单：

```
include nodejs

package { 'serve':
  ensure => latest,
  provider => 'npm',
} 
```

我正在使用 puppetlab node.js 模块：

[http://forge.puppetlabs.com/puppetlabs/nodejs](http://forge.puppetlabs.com/puppetlabs/nodejs)

流浪文件：

```
Vagrant::Config.run do |config|
  config.vm.box = "precise64"
  config.vm.box_url = "http://files.vagrantup.com/precise64.box"

  config.vm.provision :puppet do |puppet|
    puppet.manifests_path = '~/work/environments/default/'
    puppet.manifest_file = 'site.pp'
    puppet.module_path = '~/work/environments/default/modules'
  end

end 
```

当我运行`vagrant up`时，我收到以下错误：

```
[default] Running provisioner: Vagrant::Provisioners::Puppet...
[default] Running Puppet with /tmp/vagrant-puppet/manifests/site.pp...
stdin: is not a tty
err: /Stage[main]//Package[serve]/ensure: change from absent to latest failed: Could not update: Got nil value for ensure at /tmp/vagrant-puppet/manifests/site.pp:6
notice: /Stage[main]/Nodejs/Package[nodejs]/ensure: ensure changed 'purged' to 'present'
notice: /Stage[main]/Nodejs/Package[npm]/ensure: ensure changed 'purged' to 'present'
notice: Finished catalog run in 14.89 seconds 
```

起初我以为它可能是在安装 npm 之前尝试安装“服务”模块，所以我尝试`require => Package[npm]`了，但结果相同。

那么有人能解释一下为什么它没有安装“服务”模块吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-14T21:14:09.937

我也遇到了这个问题——在我看来 puppetlabs-nodejs 模块实际上并不接受`ensure => latest`，这与文档相反。当我更改为 时，我的问题得到了解决`ensure => present`，并且代码看起来也支持特定版本`ensure => 1.12.4`，例如。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-11T14:53:42.727

它似乎正在订购 - 提供者需要`npm`您还没有的命令。

尝试将您的清单更改为：

```
class { 'nodejs': } -> package { 'serve': ensure => present, provider => 'npm', } 
```

或者，可能：

```
include nodejs

package { 'serve':
  ensure => present,
  provider => 'npm',
  require => Package['npm'],
} 
```

# python - Google App Engine 中的 Python 代码更改未显示任何效果

> ID：13331583
> 
> 赞同：0
> 
> 时间：2012-11-11T13:35:01.043
> 
> 标签：python, google-app-engine

我在 GAE（在我的本地主机中）上的 python 应用程序中收到错误消息：

`variable xyz in line 23 expects string.... bool given`---***假设***

现在，为了修复该错误，我删除了整个错误`line 23`，因此，`xyz`我的脚本中不再调用任何变量。（我使用 ctrl+F 查找`xyz`，并确保`xyz`我的脚本中没有）。

然后我在浏览器上点击刷新，即使这样我再次得到完全相同的错误。

`variable xyz in line 23 expects string.... bool given`--- 这意味着我的编辑器中的代码更改在 GAE 运行时没有任何影响，我想。

我刷新了几次页面......我给了chrome浏览器一些时间......我再次刷新了页面......没有运气。然后我注意到代码更改**只有**在我停止并从 GAE 启动器重新运行 python 应用程序时才会生效。

现在，每次我更新代码时都必须这样做是一种痛苦。我该如何解决这个字面上的混乱？几天前，GAE 刚刚在我的 Mac OS X 10.7.5 上进行了更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:53:03.503

如果您在 1.7.3 而不是 1.7.2 中看到这一点，您可能会遇到[http://code.google.com/p/googleappengine/issues/detail?id=8383](http://code.google.com/p/googleappengine/issues/detail?id=8383)

上面链接中给出的建议解决方案（虽然不是修复，我猜）是在`$(GAE_SDK_ROOT)/google/appengine/tools/dev_appserver.py`. 打开文件，找到`def AreModuleFilesModified(self)`. 然后在该过程定义中，将此行`self._dirty = True`作为第一行放在文档字符串之后和 for 循环开始之前。

`dev_appserver.py`注意GAE中有2个文件

1.  $(GAE_SDK_ROOT)/dev_appserver.py
2.  $(GAE_SDK_ROOT)/google/appengine/tools/dev_appserver.py

我们要编辑文件号。2 而不是文件号。1

# c++ - Boost::type_traits 基本类型和指针

> ID：13331585
> 
> 赞同：2
> 
> 时间：2012-11-11T13:35:25.217
> 
> 标签：c++, pointers, types

我不能让它工作。我希望它检查基本类型，但也检查基本类型的指针：

```
template<typename T> struct non_void_fundamental : 
            boost::integral_constant<bool, 
                (boost::is_fundamental<T>::value && !boost::is_same<T, void>::value)
                || (boost::is_fundamental<*T>::value && !boost::is_same<*T, void>::value)
        >
        { }; 
```

也许有人可以帮助我指出正确的方向。

编辑：尤其是第 4 行没有做我想要的，其余的都很好。

编辑2：关键是它在以下示例中生成以下输出：

```
int* p = new int(23);
cout << non_void_fundamental<double>::value << endl // true
cout << non_void_fundamental<some_class>::value << endl // false
cout << non_void_fundamental<p>::value << endl // true 
```

编辑3：感谢Kerrek SB，我知道了，但它会产生一些错误。

```
template<typename T> struct non_void_fundamental : 
            boost::integral_constant<bool, 
                (boost::is_fundamental<T>::value && !boost::is_same<T, void>::value)
                || (boost::is_pointer<T>::value &&     boost::is_fundamental<boost::remove_pointer<T>::type>::value && !boost::is_same<boost::remove_pointer<T>::type, void>::value)
            >
        { }; 
```

错误：

```
FILE:99:61: error: type/value mismatch at argument 1 in temp
late parameter list for 'template<class T> struct boost::is_fundamental'
FILE:99:61: error:   expected a type, got 'boost::remove_poi
nter<T>::type'
FILE:99:125: error: type/value mismatch at argument 1 in tem
plate parameter list for 'template<class T, class U> struct boost::is_same'
FILE:99:125: error:   expected a type, got 'boost::remove_po
inter<T>::type' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:42:34.077

你完全搞错了。让我们只关注“`T`是指向基本类型的指针”：即：

*   `T`是一个指针，并且

*   [`std::remove_pointer<T>::type`](http://en.cppreference.com/w/cpp/types/remove_pointer)是根本的。

现在把这些放在一起。在伪代码中：

```
value = (is_fundamental<T>::value && !is_void<T>::value) ||
        (is_pointer<T>::value && is_fundamental<remove_pointer<T>::type>::value) 
```

在实际代码中，Boost 版本：

```
#include <boost/type_traits.hpp>

template <typename T>
struct my_fundamental
{
    static bool const value =
      (boost::is_fundamental<T>::value && ! boost::is_void<T>::value) ||
      (boost::is_pointer<T>::value &&
       boost::is_fundamental<typename boost::remove_pointer<T>::type>::value);
}; 
```

在 C++11 中，将 include 更改为`<type_traits>`和。`boost::``std::`

# python - pinax(0.9a2)中如何链接到自建站点？

> ID：13331589
> 
> 赞同：-1
> 
> 时间：2012-11-11T13:35:39.147
> 
> 标签：python, django, navigation, pinax

我必须在我的导航栏中实现两个链接！但是我想将自己编写的项目添加到站点！第一步是链接到网站。

怎么做？

我很感谢你的回答！！！

**更新**

我尝试将路径简单地写入 ref 链接，但我得到：

**找不到页面 (404)**

我的文件夹在我的模板目录中：

```
 <li id="tab_first">
                <a href="functionality/function.html">First Usecase</a>
            </li> 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:43:54.417

```
<a href='/'>This</a> 
```

# list - D 自定义列表清除、垃圾收集器

> ID：13331593
> 
> 赞同：3
> 
> 时间：2012-11-11T13:36:18.857
> 
> 标签：list, class, reference, d

假设我有一个双向链表。我想从中删除一个序列，如下所示：

```
begin - element - element x element - element - element x element - end
                        \_________________________________/
-: reference
x: removed reference 
```

我想知道我是否也应该删除要删除的元素之间的引用，或者垃圾收集器是否以更好的方式处理它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:42:49.987

您不需要删除这些引用。垃圾收集器可以轻松确定您要删除的三个元素不再可访问，因此无需扫描它们以查找可能的指针。换句话说，这样做没有性能提升。

要了解为什么会这样，请考虑这篇博文中介绍的第一个算法：http: [//xtzgzorex.wordpress.com/2012/10/11/demystifying-garbage-collectors/](http://xtzgzorex.wordpress.com/2012/10/11/demystifying-garbage-collectors/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T15:15:00.100

标准的垃圾收集器使用可以处理循环引用的[标记和清除](http://en.wikipedia.org/wiki/Mark_and_sweep#Mark_and_sweep)算法，因此不需要将它们清空（只有从可达内存到不可达内存的引用应该清空）

# python - 从代码安装包

> ID：13331594
> 
> 赞同：2
> 
> 时间：2012-11-11T13:36:23.363
> 
> 标签：python, packages, pip

我想在我的应用程序中编写一些功能，从 pypi 安装 python 包。例如，在我的代码中，我希望看到：

```
import pip
pip.install('some_pgk') 
```

在不使用子流程等的情况下，最好的方法是什么？

# function - 如何在Scala中编写模拟while循环的函数

> ID：13331600
> 
> 赞同：15
> 
> 时间：2012-11-11T13:37:22.693
> 
> 标签：function, scala, while-loop

如何编写模拟while循环的函数？它需要 2 个参数：条件和表达式来执行。

我尝试了以下方法：

```
val whileLoop: (Boolean,Any)=>Unit = (condition:Boolean, expression:Any) => {
 expression
 if(condition) whileLoop(condition,expression)
 () } 
```

但它似乎不起作用，例如我有数组：

```
val arr = Array[Int](-2,5,-5,9,-3,10,3,4,1,2,0,-20) 
```

我也有变量*i*：

```
var i = 0 
```

我想打印 arr 的所有元素。我可以使用以下代码做到这一点：

```
while(i<arr.length) { println(tab(i)); i+=1 } 
```

我想用我的**whileLoop**函数做同样的事情。但我不能编写引用变量并修改它的函数。我可以使用只有一个元素的数组来传递它，例如

```
val nr = Array(0) 
```

和功能：

```
val printArray: Array[Int]=>Unit = (n:Array[Int]) => {
 println(arr(n(0)))
 n(0)+=1
 ()
} 
```

然后在我的**whileLoop**中使用：

```
whileLoop(nr(0)<arr.length, printArray) 
```

使用上述代码后，我得到**StackOverflowError**并且 nr(0) 等于零。还有以下功能：

```
val printArray: Array[Int]=>Unit = (n:Array[Int]) => {
 println(arr(nr(0)))
 nr(0)+=1
 ()
} 
```

给出相同的结果。

我如何编写正确的函数**whileLoop**并使用它来打印所有**arr**元素？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-11T13:45:14.303

您的实现的主要问题是条件和表达式只评估一次，当您第一次调用`whileLoop`. 在递归调用中，您只需传递一个值，而不是表达式。

您可以使用按名称参数解决此问题：

```
def whileLoop(cond : =>Boolean, block : =>Unit) : Unit =
  if(cond) {
    block
    whileLoop(cond, block)
  } 
```

举个例子：

```
scala> val a = Array(1, 2, 3)
scala> var i = 0
scala> whileLoop(i < a.length, { println(i); i += 1 })
1
2
3 
```

注意变量`a`和`i`被正确引用。在内部，Scala 编译器为条件和表达式（块）构建了一个*函数*，这些函数维护对其环境的引用。

另请注意，为了获得更多的语法糖真棒，您可以定义`whileLoop`为 currified 函数：

```
def whileLoop(cond : =>Boolean)(block : =>Unit) : Unit =
  if(cond) {
    block
    whileLoop(cond)(block)
  } 
```

这允许您像实际的 while 循环一样调用它：

```
whileLoop(i < a.length) {
  println(a(i))
  i += 1
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:02:50.813

这就是我想出的：首先，你的函数需要这 4 个参数：

```
- array which is yet to be processed
- predicate that tells the function when to stop
- function that takes the array to be processed and current state and produces a new state
- and state that is being propagated through the recurion: 
```

我认为代码很容易解释：

```
def whileFunc[A,B](over: Array[A], predicate: Array[A] => Boolean, apply: (Array[A],B) => B, state: B):B = {
   val doIterate = predicate(over)
   if(doIterate) whileFunc(over.tail, predicate, apply, apply(over,state)) else state
} 
```

这可以做得更好，但我尽量保持简单。要计算数组中的所有元素，您可以这样称呼它：

```
scala>     whileFunc(Array(1,2,3), (a:Array[Int]) => !a.isEmpty,(a:Array[Int],s: Int) => s + a.head, 0)
res5: Int = 6 
```

打印每个元素：

```
whileFunc[Int, Unit](Array(1,2,3), (a:Array[Int]) => !a.isEmpty,(a:Array[Int],s: Unit) => print(a.head), Unit)
123 
```

顺便说一句，如果你对这类东西感兴趣，我建议你购买 Scala 中的函数式编程，有两章可以让你实现这样的函数。其乐无穷。

# c# - 在 WinRt 中向 MVC Web API 发出发布请求？

> ID：13331601
> 
> 赞同：1
> 
> 时间：2012-11-11T13:37:27.657
> 
> 标签：c#, windows-runtime

我一直在尝试向我的 WebApi 发出发布请求。我应该将它作为 Json 发送，然后 MVC api 会将其转换为应该接受的 c# 对象。

我在 C# 中使用此代码将数据发布为 JSON：

```
 HttpClient httpClient = new HttpClient();
 string postData = JsonConvert.SerializeObject(dbsub);
 StringContent c = new StringContent(postData, Encoding.UTF8, "application/x-www-form-urlencoded");
 httpClient.MaxResponseContentBufferSize = 100000;
 var result = await httpClient.PostAsync("http://127.0.0.1/api/Submissions", c); 
```

问题在于服务器中的对象属性返回 null。但我没有收到任何错误...

关于如何解决此问题的任何想法，或者是否有另一种方法将 c# 对象作为 JSON 发布为 MVC Web Api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:39:04.787

你对你发布的数据撒谎。

如果将数据序列化为 JSON，则需要发送正确`Content-Type`的`application/json`.

# rewrite - Symfony - 不工作重写

> ID：13331604
> 
> 赞同：1
> 
> 时间：2012-11-11T13:37:36.050
> 
> 标签：rewrite, symfony-1.4

重写不起作用。

*   `site/index.php/page`作品;
*   `site/page`- 不工作；

我使用 symfony 1.4。

`.htaccess`标准：

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
 RewriteEngine On

 # uncomment the following line, if you are having trouble
 # getting no_script_name to work
 #RewriteBase /

 # we skip all files with .something
 #RewriteCond %{REQUEST_URI} \..+$
 #RewriteCond %{REQUEST_URI} !\.html$
 #RewriteRule .* - [L]

 # we check if the .html version is here (caching)
 RewriteRule ^$ index.html [QSA]
 RewriteRule ^([^.]+)$ $1.html [QSA]
 RewriteCond %{REQUEST_FILENAME} !-f

 # no, so we redirect to our front web controller
 RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T14:29:53.967

您必须启用`mod_rewrite`using `sudo a2enmod rewrite`，然后重新启动服务器。

# java - 从小字符打印大字符

> ID：13331605
> 
> 赞同：5
> 
> 时间：2012-11-11T13:37:50.777
> 
> 标签：java

我正在尝试获取一个程序来打印带有 x 的“X”。IE：

```
xxx      xxx
 xxx    xxx
  xxx  xxx
   xxxxxx
  xxx  xxx
 xxx    xxx
xxx      xxx 
```

这是我到目前为止所做的：

```
import java.util.Scanner;
public class CustomXfactor {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        boolean quit = false;
        int i=0, a=0, c=0;

        System.out.printf("length must be between 16 and 120\n");

        //Ask for desired length
        System.out.printf("Please enter the length (0  to exit):\n");
        int length = in.nextInt();
        int spaces = (length-length+1), //Calculate spaces before the first leg
                innerSpaces = (length-6); //Calculate the inner spaces -6
                                         //because there is 6 Xs which are 
                                         //the form the legs

        while(!quit){
            //Print first half of the X
            for (i=0;i<(length/2);i++){

                //First XXX leg
                System.out.printf("XXX");

                //Space between the legs
                for (a=length-6;a<innerSpaces;a++){
                    System.out.printf(" ");
                }
                //Second XXX leg
                System.out.printf("XXX\n");

                //SPACES 
                for (c=0;c<(spaces);c++){
                System.out.printf(" ");
                }
                spaces++;
                innerSpaces--;
            }
            quit = true; //Change boolean to break while loop
        }//END of while loop
    }//END of method main
}//END end of class CustomXfactor 
```

我的数学问题在第 26 行。我没有让循环打印 X 的腿之间的正确空间，然后在它循环时拿走一个。

正如你所看到的，这只是 X 的一半，但是一旦我得到了这一面，我可以将其反转以生成其余部分。

我会很感激对我的数学有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:31:13.387

**分而治之的**方法将使您的工作*更容易理解*和*解决。* 想想处理每行尾随空格以及**“XXX”**单元字符串之间的空格的打印问题的方法。我不想完全解决您的问题，但我认为您应该查看此代码以了解您缺少什么。使用此代码，您可以在 String 数组中获得所需输出的一半。按顺序遍历它然后以相反的顺序遍历它会给你正确的输出。

```
public static void main(String[] args) {
    String unit = "XXX"; // Unit String.
    int width = 21; // You can get this input from user.
    int betweenSpaces = width - 2 * unit.length(), trailingSpaces = 0;

    String[] lines = new String[(width - 2 * unit.length()) / 2 + 1];

    for (int i = 0; i < lines.length; i++) {
        lines[i] = "";
        lines[i] = helper(trailingSpaces, lines[i], unit)
                 + helper(betweenSpaces, lines[i], unit);

        betweenSpaces -= 2; // Decrement space count by 2.
        trailingSpaces += 1; // Increment trailing space count by 1.
    }

    // Printing lines array.
    for (String str : lines)
        System.out.println(str);
    for (int i = lines.length - 2; i >= 0; i--)
        System.out.println(lines[i]);
}

public static String helper(int count, String ref, String unit) {
    for (int j = 0; j < count; j++)
        ref += " ";
    return ref += unit; // 2nd unit string appended.
} 
```

**输出：**

```
XXX               XXX
 XXX             XXX
  XXX           XXX
   XXX         XXX
    XXX       XXX
     XXX     XXX
      XXX   XXX
       XXX XXX
      XXX   XXX
     XXX     XXX
    XXX       XXX
   XXX         XXX
  XXX           XXX
 XXX             XXX
XXX               XXX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:54:37.173

我换了这个

```
//Space between the legs
for (a=length-6;a<innerSpaces;a++){
     System.out.printf(" ");
} 
```

和

```
//Space between the legs
for (a=length-6;a<innerSpaces;a++){
     System.out.printf("o");
} 
```

并且没有`o`打印...

你初始化`int innerSpaces = (length-6);`，所以内部空间`(length-6);`在你初始化的循环中，`a=length-6`这与 if 完全相同，`innerSpaces`但只进入循环`a < innerSpaces`。这就是为什么这个循环永远无法执行的原因。

# c# - 可以进行现场调试吗？（尤其是 UI 操作）

> ID：13331609
> 
> 赞同：1
> 
> 时间：2012-11-11T13:38:00.007
> 
> 标签：c#, xaml, user-interface, windows-runtime

我想知道是否有办法在运行时实时操作应用程序的 UI？我不是设计师，有时在匹配颜色等方面会遇到很多问题。

下一个问题是，每当我想更改控件的颜色时，我必须退出应用程序然后转到 VS2012，应用我的更改，再次构建并执行它以查看简单的更改。我知道我看到了设计师的任何变化，但我必须看到生成的屏幕才能对整体印象有所了解。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:47:40.027

在设置 Debug 标志时添加一个秘密按键，这会引发一个表单并允许您选择控件并为它们公开一个属性表。做一些工作才能做到正确，即使使用反射也是好的代码棒。使用故事板类型的应用程序进行设计可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:38:29.883

与 WPF 中可以动态调整的样式不同（这使得这种类型的运行时调整变得简单），Windows 应用商店应用程序没有那么优雅的解决方案。理想情况下，您应该在 XAML 文件中定义所有 UI 和颜色等，并且不能通过其他方式设置（因为它成为一个长期维护问题）。

我建议只添加足够的测试数据和配置，以便您可以在设计时看到页面的外观（包括颜色等）。Blend 和 Visual Studio 现在非常擅长显示应用程序元素的非常合理的接近最终渲染。做起来一般不会太难。

我过去做过的一件事是制作一个页面/表单，其中包含大型滚动查看器中的所有样式和控件。然后，我们对其进行设置，使其可配置为首先运行。调整/构建周期非常快，结果仍然非常易于管理。

# c++ - 从套接字获取地址族。Linux

> ID：13331610
> 
> 赞同：4
> 
> 时间：2012-11-11T13:38:09.940
> 
> 标签：c++, c, linux, network-programming

我想为 Linux Socket API 编写一个 C++ 包装器。在 socket() ctor 中，请求地址族 (AF)。我不想再次在 connect() 签名中要求 AF，因为它已经在套接字的构造函数中给出。那么如何从现有套接字中获取 AF 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T13:42:38.180

该死。找了半个小时左右。现在发布这个问题后，我立即找到了答案。

带有选项 SO_DOMAIN 的[getsockopt([...]) （请参阅](http://www.kernel.org/doc/man-pages/online/pages/man2/getsockopt.2.html)[套接字选项](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T22:45:10.757

POSIX 标准的 getsockname 将有助于：

```
int getsockname(int socket, struct sockaddr *restrict address,
       socklen_t *restrict address_len); 
```

它将填写给定的 struct sockaddr （成功后）：

```
struct sockaddr {
    unsigned short    sa_family;  // <- that's what you looking for
    char              sa_data[14];  
} 
```

# string - 在 Google 中获取字符串并搜索 - Windows 8

> ID：13331612
> 
> 赞同：0
> 
> 时间：2012-11-11T13:38:34.293
> 
> 标签：string, windows-8, google-search

我正在开发适用于 Windows 8 的厨房食谱应用程序。我有一个带有一些成分的复选框。选择成分后，用户按下按钮。目标是展示包含这些成分的食谱。我的想法是将复选框的所有值放在一个字符串上，然后通过 Google 搜索并访问结果中给出的链接之一。那可能吗 ？如果是这样，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:56:54.400

您应该使用自定义搜索 API 可以在此处找到文档： [https ://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

简单地做一些 REST 魔术

NuGet 包“RestSharp”对此很有帮助

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:52:35.133

我不完全理解你的问题，但我希望这会有所帮助：

```
https://www.google.nl/search?q=TEXT%20HERE 
```

这将在这里谷歌文本

[https://www.google.nl/search?q=monkey](https://www.google.nl/search?q=monkey)

这将谷歌猴子

# css - Internet Explorer 8 忽略后续的链接样式表

> ID：13331616
> 
> 赞同：0
> 
> 时间：2012-11-11T13:38:46.607
> 
> 标签：css, internet-explorer-8, internet-explorer-7, comments, conditional

我正在使用条件注释为 IE 应用不同的样式表。这似乎适用于 IE7，但无论我尝试什么，我都无法让 IE8 一次加载多个样式表。两个样式表都在 Page -> Style 菜单中显示为选项，我可以在它们之间切换，但 IE8 不会同时应用它们。

示例：[http](http://www.davidapfel.com/booknow.html) ://www.davidapfel.com/booknow.html 。出于测试目的，我在 IE 中应用了粉红色背景。IE7 按我的意图显示页面，但 IE8 完全忽略了 iefix.css 和 iefix2.css 样式表。（我尝试删除条件注释，但没有任何区别）。

提前感谢任何线索

**编辑：**刚刚发现 IE9 也存在同样的问题——它也忽略了额外的样式表。

# windows-8 - 在 Windows8 商店应用程序中的何处注册类型 (IoC)？

> ID：13331618
> 
> 赞同：5
> 
> 时间：2012-11-11T13:38:47.643
> 
> 标签：windows-8, inversion-of-control, unity-container

在 Windows 8 应用程序上为我的 IoC 使用 Unity。

我想知道注册类型的最佳位置在哪里？

我目前正在考虑在 App.xaml.cs 中执行此操作并覆盖 OnLaunch 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:39:41.727

我认为你的方法很标准。

有点不相关，但 Unity 有一个用于 Prism WPF 应用程序的引导程序。我想知道是否有适用于统一 Windows 8 应用程序的等效项：

[http://msdn.microsoft.com/en-us/library/gg430868%28v=pandp.40%29.aspx](http://msdn.microsoft.com/en-us/library/gg430868%28v=pandp.40%29.aspx)

无论如何，我会遵循这种模式只是为了从 App.xaml.cs 文件中删除一些代码。

# sql - SQL查询获取sql年份版本

> ID：13331621
> 
> 赞同：3
> 
> 时间：2012-11-11T13:39:22.940
> 
> 标签：sql, sql-server, version

我正在使用 SQL Server，我需要一个返回版本年份的 SQL 查询。

我熟悉以下方法：

```
select @@version

select SERVERPROPERTY('productversion') 
```

但我需要一个将返回的查询，例如：

```
2008 
```

或者

```
2005 
```

我提到的第一个查询需要脏解析，第二个返回一些产品编号。

有谁知道这样的查询？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T15:14:19.230

试试这个 - 它只检查版本号的前两个字符并返回 SQL Server 版本的相应“年份”。

```
SELECT
    'SQL Server Year ' + 
    CASE SUBSTRING(CONVERT(VARCHAR(50), SERVERPROPERTY('productversion')), 1, 2)
          WHEN '8.' THEN '2000'
          WHEN '9.' THEN '2005'
          WHEN '10' THEN '2008'
          WHEN '11' THEN '2012'
          WHEN '12' THEN '2014'
          WHEN '13' THEN '2016'
          WHEN '14' THEN '2017'
          WHEN '15' THEN '2019'
    END 
```

当然，你可以把它打包成一个用户定义的函数，让它“更漂亮”

资料来源：[MSDN](https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-database-transact-sql-compatibility-level?view=sql-server-ver15)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:05:59.167

由于属性的第一个数字[`SERVERPROPERTY('productversion')`](http://msdn.microsoft.com/en-us/library/ms174396.aspx) 是主要版本号：

> ***major.minor.build.revision***

然后您可以创建一个临时表，其中包含每个版本的主要版本号及其年份。然后您将得到以下查询：

```
 DECLARE @productversion VARCHAR(100);
 SELECT @productversion = CAST(SERVERPROPERTY('productversion') AS VARCHAR(100));
SELECT years.year, years.name
FROM 
(
  VALUES(9, '2005', 'SQL Server 2005'), 
        (10, '2008', 'SQL Server 2008 OR SQL Server 2008 R2'),
        ... 
) AS years(majornumber, [year], name)
WHERE years.majornumber = LEFT(@productversion, 
                               CHARINDEX('.', @productversion , 1) - 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T12:19:15.203

```
SELECT 'SQL Server ' + 
    CASE CAST(SERVERPROPERTY('productversion') AS CHAR(2))
          WHEN '8.' THEN '2000'
          WHEN '9.' THEN '2005'
          WHEN '10' THEN '2008/2008R2'
          WHEN '11' THEN '2012'
          WHEN '12' THEN '2014'
          WHEN '13' THEN '2016'
    END 
```

输出 -

```
----------------------
SQL Server 2016 
```

# arrays - 随机化一个数组

> ID：13331622
> 
> 赞同：2
> 
> 时间：2012-11-11T13:39:31.463
> 
> 标签：arrays, vb.net

我希望实现 Dr.DEKnuth 的减法随机数生成算法。我希望实现一个 ATM 面板，当用户登录时，按钮将被打乱。每个按钮都会改变它的位置。

这是我的代码：

```
Public Sub addbutton()
        Dim n As Integer = 0

        For i As Integer = 0 To 10
            ' Initialize one variable
            btnArray(i) = New System.Windows.Forms.Button
        Next i

        While (n < 10)
            With (btnArray(n))
                .Tag = n + 1 ' Tag of button
                .Width = 40 ' Width of button
                .Height = 40
                FlowLayoutPanel1.Controls.Add(btnArray(n))
                .Text = Chr(n + 48)
                AddHandler .Click, AddressOf Me.ClickButton
                n += 1
            End With
        End While
    End Sub 
```

然后，为了向按钮文本发送信息，我使用了：

```
 Dim btn As Button = sender
        TextBox1.Text += btn.Text 
```

现在的主要任务是改组`btnArray()`with`Random()`函数。但我没有做到这一点。我设法获得了一些用于改组数组的代码，如下所示：

```
Imports System.Security.Cryptography

Public Class ArrayUtilities
    Private Random As RNGCryptoServiceProvider = New RNGCryptoServiceProvider
    Private Bytes(4) As Byte

    Public Function ShuffleArray(ByVal argArr As Array) As Array
        Dim FirstArray As New ArrayList(argArr)
        Dim SecoundArray As Array = Array.CreateInstance(GetType(Object), FirstArray.Count)
        Dim intIndex As Integer
        For i As Integer = 0 To FirstArray.Count - 1
            intIndex = RandomNumber(FirstArray.Count)
            SecoundArray(i) = FirstArray(intIndex)
            FirstArray.RemoveAt(intIndex)
        Next
        FirstArray = Nothing
        Return SecoundArray
    End Function

    Private Function RandomNumber(ByVal argMax As Integer) As Integer
        If argMax <= 0 Then Throw New Exception
        Random.GetBytes(Bytes)
        Dim intValue As Integer = (BitConverter.ToInt32(Bytes, 0)) Mod argMax
        If intValue < 0 Then intValue = -intValue
        Return intValue
    End Function
End Class

Module Module1
    Sub Main()
        Dim AU As ArrayUtilities

        AU = New ArrayUtilities

        Dim GivenArray As Integer() = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
        Dim NewArray As Array = AU.ShuffleArray(GivenArray)
        Dim i As Integer
        Dim stb As New System.Text.StringBuilder
        stb.Append("GivenArray = {0,1,2,3,4,5,6,7,8,9}")
        stb.Append(vbCrLf)
        stb.Append("NewArray = {")
        For i = 0 To NewArray.Length - 2
            stb.Append(NewArray(i).ToString)
            stb.Append(", ")
        Next
        stb.Append(NewArray(NewArray.Length - 1).ToString)
        stb.Append("}")
        Console.Write(stb.ToString)
        Console.Read()
    End Sub
End Module 
```

## 然而，当我们调试这段代码时，我们得到了数组的 RANDOMNESS。同样，我希望表单上的按钮具有随机性。

谢谢你，先生。先生，我尝试了您建议的代码。我错过了增量字符“n”。可调试代码是 flowlayoutpannel.controls.add(out(n))。但它没有像我想要的那样工作，上面的代码只是为了展示我想要的方式 2 随机播放按钮。有没有更简单的方法来创建一个按钮数组并使用 RANDOM() 将它们随机化并添加到表单中。我的朋友说你太愚蠢了，你从过去的 20 到 25 天都在研究这个话题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:12:19.640

有相当多的“洗牌”算法（例如搜索 Fisher-Yates），它们通常不难实现。最简单（恕我直言）的方式是使用 LINQ：

```
Dim r As New Random
Dim out = (From b In btnArray Order By r.Next Select b).ToArray 
```

也许这个问题并不清楚：你想洗牌按钮的位置还是你想洗牌数组的内容（按钮）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:46:07.783

要在面板中随机设置按钮的位置，而不是在循环中使用从 0 到 9 的 n，可以使用从 0 到 9 的随机值。确保不要使用相同的值两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:06:06.337

您不需要为此使用加密安全的随机数生成器，也不需要单独的类。

```
Private Shared rng As New Random()

Private Shared Function ShuffleArray(Of T)(arr() As T) As T()
    Dim left = Enumerable.Range(0, arr.Length).ToList()
    Dim result(arr.Length - 1) As T

    For i = 0 To arr.Length - 1
        Dim nextIndex = rng.Next(left.Count)
        result(i) = arr(left(nextIndex))
        left.RemoveAt(nextIndex)
    Next

    Return result
End Function 
```

# macos - 将列表中的元素添加到另一个列表中（如果它们尚未包含）

> ID：13331633
> 
> 赞同：0
> 
> 时间：2012-11-11T13:40:56.890
> 
> 标签：macos, list, applescript

我有 2 个列表，我需要将第一个列表中包含的元素添加到第二个列表中。如果第二个列表包含第一个列表的某些元素，则不应将这些元素添加到第二个列表中（以避免重复）。

目前我正在使用：

```
set ListB to ListB & ListA 
```

但显然这些没有考虑到重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:52:53.953

当列表仅包含字符串且不包含换行符时，如 adayzdone 示例代码中所示，当两个列表都包含数千个项目时，您可以使用更快的方法。

```
--NOTE: Only works with lists containing strings and not containing linefeeds. 
set listA to {"A1", "A2", "A3"}
set listB to {"B1", "B2", "A3"}

set AppleScript's text item delimiters to linefeed
set newList to every paragraph of (do shell script "sort -fu <<< " & quoted form of ((listA as string) & linefeed & listB as string))
set AppleScript's text item delimiters to ""

return newList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:25:27.000

尝试：

```
set listA to {"A1", "A2", "A3"}
set listB to {"B1", "B2", "A3"}

repeat with anItem in listB
    if anItem is not in listA then
        set end of listA to contents of anItem
    end if
end repeat

return listA 
```

# javascript - 使用 WinJS.xhr 时如何缓存 JSONP 响应？

> ID：13331634
> 
> 赞同：2
> 
> 时间：2012-11-11T13:41:01.977
> 
> 标签：javascript, windows-8, winjs

使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)函数，可以利用其&属性来[缓存 JSONP 响应。](https://stackoverflow.com/questions/892671/how-can-i-guarantee-that-an-ajax-response-will-be-cached)`cache``isModified`

该`WinJS.xhr`函数似乎没有任何直接属性。我看到很多问题都在询问禁用缓存的方法。我需要一种**始终缓存**JSONP 响应的方法。

我已经尝试过这样的事情，但它不起作用 -

```
WinJS.xhr({ 
    url: URL_that_returns_JSONP_response,
    headers: {
        "Cache-control": "Public"
    } })
    .done(
... 
```

当我用 Fiddler 检查 HTTP 响应状态时，我看到状态码仍然是 200 并且响应没有被缓存。如何在使用 WinJS.xhr 时启用 JSONP 响应的缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:23:48.467

因为 JSONP 请求通过创建一个将其 src 属性设置为请求 URL 的 <script> 元素来工作。您不能向 <script> 元素发送的 HTTP 请求添加自定义标头。

# ajax - ipinfodb 出错

> ID：13331637
> 
> 赞同：0
> 
> 时间：2012-11-11T13:41:32.197
> 
> 标签：ajax, jquery, geolocation

我正在尝试使用 ipinfodb 在 gmap 上标记用户位置。我的jQuery代码是

```
$.ajax({
    type:"GET",
    url:"http://api.ipinfodb.com/v3/ip-city/?key=<my api key>&ip=74.125.45.100",
    crossDomain: true,
    dataType: 'jsonp',
    }

); 
```

但我在 chrome 上收到以下错误

->资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://api.ipinfodb.com/v3/ip-city/?key=141cb28778f3fe2d8e55fdd8e4511ad1777…25.45.100&callback=33174479_1352640806111&_=3.562 ->Uncaught SyntaxError: Unexpected number

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:31:21.713

```
 var YOUR_KEY = theKey;//"123"
    var theURL = "http://api.ipinfodb.com/v3/ip-city/?key=" + YOUR_KEY + "&format=json&callback=?";

    $.ajax({
        type: "POST",
        url: theURL,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        method: 'GET',

        success: function (data) {
            alert('worked');
        },

        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert('failed');
        }
    });//$.ajax({ 
```

# c++ - 使用类方法的模板

> ID：13331638
> 
> 赞同：0
> 
> 时间：2012-11-11T13:41:37.413
> 
> 标签：c++, templates

我有模板方法，我希望模板方法使用类中的特定方法来执行操作。是否可以 ？

```
template<typename T>
int minus(T t1,T t2){
return t1-t2;
} 
```

在我的苹果对象类中，我有一个名为 getPrice() 的方法，我如何将两者结合起来。

它是否正确 ？

```
template<typename T>
int minus(T t1,T t2){
return t1.getPrice()-t2.getPrice();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T13:43:41.677

为此，您可能需要为您的类型提供一个普通函数：

```
template <class T>
int minus(T t1, T t2) {
    return t1 - t2;
}

int minus(const apple& t1, const apple& t2) {
    return t1.getPrice() - t2.getPrice();
} 
```

# c# - 嵌入式数据库服务器引擎

> ID：13331639
> 
> 赞同：0
> 
> 时间：2012-11-11T13:41:41.603
> 
> 标签：c#, visual-studio-2010, entity-framework, .net-4.0, embedded-database

我正在寻找可以使我的应用程序（.Net 4.0）无需服务器即可访问本地托管数据库的东西。

如果此解决方案支持实体框架，那将是最好的。

我已经尝试过 Firebird + DDEX，但是在尝试将其设置为 VS 2010 (Pro) 的提供程序无数小时后，我担心这个解决方案需要进入“不实用”的垃圾箱。

还有什么提议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:48:49.977

我建议使用 SQL Compact Edition 4.0： http: [//www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:45:24.147

我建议使用 ravendb：

[http://msdn.microsoft.com/en-us/magazine/hh547101.aspx](http://msdn.microsoft.com/en-us/magazine/hh547101.aspx)

或者你可以使用 Sqlite：

[http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)

# python - 使用 Python 请求库上传大型 XML 文件

> ID：13331640
> 
> 赞同：5
> 
> 时间：2012-11-11T13:42:03.227
> 
> 标签：python, xml, python-requests

我正在尝试用 Python 和 requests 库替换 curl。使用 curl，我可以使用 curl -T 选项将单个 XML 文件上传到 REST 服务器。我一直无法对请求库做同样的事情。

一个基本的场景有效：

```
payload = '<person test="10"><first>Carl</first><last>Sagan</last></person>'
headers = {'content-type': 'application/xml'}
r = requests.put(url, data=payload, headers=headers, auth=HTTPDigestAuth("*", "*")) 
```

当我通过打开 XML 文件将有效负载更改为更大的字符串时，.put 方法会挂起（我使用编解码器库来获取正确的 unicode 字符串）。例如，对于 66KB 的文件：

```
xmlfile = codecs.open('trb-1996-219.xml', 'r', 'utf-8')
headers = {'content-type': 'application/xml'}
content = xmlfile.read()
r = requests.put(url, data=content, headers=headers, auth=HTTPDigestAuth("*", "*")) 
```

我一直在研究使用多部分选项（文件），但服务器似乎不喜欢这样。

所以我想知道是否有一种方法可以在 Python 请求库中模拟 curl -T 行为。

更新 1：程序在 textmate 中挂起，但在命令行上引发 UnicodeEncodeError 错误。看来这一定是问题所在。所以问题是：有没有办法使用请求库将 unicode 字符串发送到服务器？

更新 2：感谢 Martijn Pieters 的评论，UnicodeEncodeError 消失了，但出现了一个新问题。对于文字 (ASCII) XML 字符串，日志记录显示以下行：

```
2012-11-11 15:55:05,154 INFO Starting new HTTP connection (1): my.ip.address
2012-11-11 15:55:05,294 DEBUG "PUT /v1/documents?uri=/example/test.xml HTTP/1.1" 401 211
2012-11-11 15:55:05,430 DEBUG "PUT /v1/documents?uri=/example/test.xml HTTP/1.1" 201 0 
```

似乎服务器总是退回第一次身份验证尝试（？），但随后接受第二次。

将文件对象 (open('trb-1996-219.xml', 'rb')) 传递给数据后，日志文件显示：

```
2012-11-11 15:50:54,309 INFO Starting new HTTP connection (1): my.ip.address
2012-11-11 15:50:55,105 DEBUG "PUT /v1/documents?uri=/example/test.xml HTTP/1.1" 401 211
2012-11-11 15:51:25,603 WARNING Retrying (0 attempts remain) after connection broken by 'BadStatusLine("''",)': /v1/documents?uri=/example/test.xml 
```

因此，第一次尝试像以前一样被阻止，但没有进行第二次尝试。

根据 Martijn Pieters（下）的说法，第二个问题可以用有故障的服务器（空行）来解释。我会调查这个，但如果有人有解决方法（除了使用 curl）我不介意听到它。

我仍然对请求库对于小字符串和文件对象的行为如此不同感到惊讶。文件对象在到达服务器之前不是序列化了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:01:11.637

要 PUT 大文件，请不要将它们读入内存。只需将文件作为`data`关键字传递：

```
xmlfile = open('trb-1996-219.xml', 'rb')
headers = {'content-type': 'application/xml'}
r = requests.put(url, data=xmlfile, headers=headers, auth=HTTPDigestAuth("*", "*")) 
```

此外，您以 unicode 格式打开文件（从 UTF-8 解码）。当您将其发送到远程服务器时，您需要原始字节，而不是 unicode 值，并且您应该将文件作为二进制文件打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T08:14:11.607

摘要式身份验证始终要求您向服务器发出至少两个请求。第一个请求不包含任何身份验证数据。第一个请求将失败，并返回 401“需要授权”响应代码和用于散列密码等的摘要质询（称为 nounce）（确切的细节在这里无关紧要）。这用于向服务器发出第二个请求，其中包含您的凭据与质询进行哈希处理。

问题在于这两个步骤的身份验证：您的大文件已经与第一个未经授权的请求一起发送（发送无效），但在第二个请求中，文件对象已经在 EOF 位置。由于文件大小也在第二个请求的 Content-length 标头中发送，这会导致服务器等待永远不会发送的文件。

您可以使用 requests Session 解决它，并首先发出一个简单的身份验证请求（例如 GET 请求）。然后使用与第一个请求相同的摘要质询发出包含实际有效负载的第二个 PUT 请求。

```
sess = requests.Session()
sess.auth = HTTPDigestAuth("*", "*")
sess.get(url)
headers = {'content-type': 'application/xml'}
with codecs.open('trb-1996-219.xml', 'r', 'utf-8') as xmlfile:
    sess.put(url, data=xmlfile, headers=headers) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-24T11:09:08.403

我在 python 中使用请求使用命令上传 XML 文件。首先打开文件使用 open() `file = open("PIR.xsd")` `fragment = file.read()` `file.close()` 将 XML 文件的数据复制到请求的有效负载中并发布 `payload = {'key':'PFAkrzjmuZR957','xmlFragment':fragment}` `r = requests.post(URL,data=payload)` 以检查 html 验证码 `print (r.text)`

# asp.net-mvc - ModelClientValidationRule 类用法

> ID：13331659
> 
> 赞同：2
> 
> 时间：2012-11-11T13:43:28.940
> 
> 标签：asp.net-mvc, validation

当我将鼠标悬停在`ModelClientValidationRule`类 Visual Studio 信息框中时说：

**“此类型/成员支持 .NET Framework 基础结构，不打算直接从您的代码中使用。”**

但是，在几乎所有自定义验证示例中`ModelClientValidationRule`都使用了。

我做错什么了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:14:04.150

> 我做错什么了吗？

不，你没有做错任何事。您可以直接使用该类，即使将其子类化并让您的`IClientValidatable`实现返回您的特定自定义客户端验证规则会更合适。例如，有`ModelClientValidationRequiredRule`专门定义来处理`"required"`客户端验证规则的。实现非常简单：

```
public class ModelClientValidationRequiredRule : ModelClientValidationRule
{
    public ModelClientValidationRequiredRule(string errorMessage)
    {
        base.ErrorMessage = errorMessage;
        base.ValidationType = "required";
    }
} 
```

在您的自定义实现中，您当然可以包含一些其他信息。

# java - 更改为无效或保留返回值

> ID：13331661
> 
> 赞同：1
> 
> 时间：2012-11-11T13:43:44.883
> 
> 标签：java, refactoring, void, return-type

我正在重构/审查 Java 应用程序

当我这样做时，我表明某些方法具有返回值，例如`Object`、`String`、`Boolean`等，但在任何地方都没有使用返回值。只做了方法调用。

所以，我只是徘徊保持它们原样会导致应用程序的性能问题。

我应该将它们更改为无效还是保持原样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:47:36.813

*   更何况是一个性能打击，它是一种**不恰当的方法构造**。

*   如果方法的返回值在程序中**没有**用，那么就没有理由返回它，所以方法的返回类型应该是`void`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T13:49:13.313

我认为保持返回类型不变会降低性能。

话虽如此，我认为您仍然应该删除它们。原因是它们本质上是死代码。在这些围绕返回类型的方法中可能潜伏着未知的错误——未知，因为它们没有被使用。如果有人决定有一天使用它们，这是一种潜在的危险。

此外，如果保留它们，维护负担会增加：每次有人接触其中一种方法时，她都必须（不必要地）考虑返回类型。

这基本上归结为 YAGNI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:52:22.777

在我看来，要么 API 使用不正确，要么设计不正确。

如果 API 设计正确，那么为什么 API 用户不使用方法返回类型？在这种情况下，用户一定是错误的。

另一方面，如果 API 设计不正确，那么在当前状态下使用它有什么意义？如果返回的信息是多余的，则修复 API 并使方法无效。

我认为与良好的 API 设计相比，性能方面的考虑并不重要。性能总是可以在以后改进，但 API 的更改非常困难且成本高昂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T14:02:18.603

如果未使用中的值，则不应返回值。改为使用`void`。有时我会看到一些未使用的*getter*，但实际上它们已被 Web 框架使用。很难确定该方法是否未被使用。即使它被使用但返回值被忽略。不忽略返回值是没有限制的。

# ssl - Opencart链接不是https？

> ID：13331662
> 
> 赞同：0
> 
> 时间：2012-11-11T13:43:48.267
> 
> 标签：ssl, https, hyperlink, opencart

我已经购买了 ssl 证书，我在设置中启用了 SSL 设置，并且我将两个配置文件都更改为转到 https，但是当我访问[http://bit.ly/TCkEBv](http://bit.ly/TCkEBv)时，第一页是 https，其余的不是。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T23:42:45.467

我意识到这是一个旧线程，但考虑到最近 google SSL-everywhere 索引更改，我认为它是相关的。以下示例将使 OC 在所有链接中使用 https。您必须更改 system/library/url.php 中的 3 个字符。他们在论坛上删除了这个是可以理解的，但我们已经在混合 SSL 多存储上运行了一周的生产流量，没有任何问题。

警告：您的 mod 可能会有所不同 - 在启用此功能后在测试中运行它们...尤其是任何重定向管理器。这是 1.5.6 的调整：

打开 store/system/library/url.php 并`$url = $this->url;`在第 18 行附近的某处找到一个 IF 语句。将其更改为`$url = $this->ssl;`然后就可以了。

PS：还有一种未经测试的方法可以将 https-preferred 作为标头发送，`$response->addHeader('Strict-Transport-Security: max-age=31536000');`但我不确定将它放在 index.php 之外的最佳位置。此外，虽然它在测试中有效，但不确定所有服务器的影响。标头控制器似乎合乎逻辑，但并非所有 OC 区域都使用标头控制器 :)。为此尝试最佳放置....即使它看起来有效，也不要在 $url 复制器中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:05:11.813

根据论坛帖子，这实际上并不是购物车设置方式的错误 - 也就是说，大多数页面没有设置为 HTTPS，一旦您单击非 HTTPS 链接就会恢复为 HTTP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-04T21:52:45.293

假设您有一个名为 example.org 的域，而不是更改代码，在 Apache 中，您可以这样做......

除了您的 Domain-SSL.conf 之外，您还可以将该配置复制到 Domain.conf 并对其进行编辑以使用端口 80 而不是 443

然后，将此行添加到顶部的服务器定义中，就在 DirectoryIndex... 之前

```
Redirect / https://example.org 
```

这将简单地将每个请求重定向回 SSL 配置，在每个链接前添加 https://。OC 不需要更改代码。

这已经在我繁忙的生产服务器上运行了几年，没有出现任何问题。

# python - 用于查询的数据存储

> ID：13331665
> 
> 赞同：0
> 
> 时间：2012-11-11T13:44:11.687
> 
> 标签：python, language-agnostic

我正在尝试解析 RSS 提要以查找对国家/地区的引用。目前我正在使用 Python，但我认为这个问题与语言无关（理论上）。

假设我有三个列表（所有相关）

*   国家 - 名词（即英格兰、挪威、法国）
*   国家 - 形容词（即英语、挪威语、法语）
*   城市（即伦敦、纽卡斯尔、伯明翰）

我的目标是首先解析这些字符串的提要。

因此，例如，如果找到“London”，则国家将是“England”，如果找到“Norwegian”，则将是“Norway”等。

处理这些数据的最佳方法是什么？会是 jason 并全力以赴创建嵌套字典吗？套？或某种类型的数据库？

目前，这只打算在本地机器上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:04:40.810

这是一个非常值得商榷的问题。可以有多种解决方案。如果我是你，我会在 Mongodb 中创建一个小型数据库，其中包含三个这样的表

1.  国家：列：id、name
2.  Country-adj：列：id、name、country_id
3.  城市：列：id、name、country_id

那么简单的查询会给出你想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:21:34.507

我建议将 3 个数据列表合并到一个字典中，将名称映射到国家名称，例如，它映射 `"England" -> "England"`, `"English" -> "England"`, `"London" -> "England"`。它可以很容易地存储在数据库或文件中并被检索。

然后我会在字典中搜索键，并用字典中的值标记项目。

# php - 如何将 PHPagination 集成到我的网站中？

> ID：13331666
> 
> 赞同：1
> 
> 时间：2012-11-11T13:44:23.797
> 
> 标签：php, html

我从官方网站上得到了PHPagination脚本，但我不知道如何集成它。

我试图从该网站复制 demo.php 文件的源代码，可以通过单击“交互式演示”找到该文件：http: [//phpfiddle.org/main/code/msb-v13](http://phpfiddle.org/main/code/msb-v13) ，然后添加来自“获取代码”，如下： http: [//phpfiddle.org/main/code/jau-435](http://phpfiddle.org/main/code/jau-435)

但是当我将 php 代码粘贴到本地计算机上的 demo.php 页面时，PHP 脚本以纯文本形式显示。

我试图将 PHP 代码放在代码的开头，最后，以下选项均无效。

我是PHP新手，以前只知道HTML和CSS，不知道如何集成这些代码，我需要尽快，没有时间学习PHP。

非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:50:44.557

`<?php`始终在和标记之间运行 PHP 代码`?>`。否则它不被算作 PHP 并且不会渲染。您可能需要一台服务器才能正常工作，在这种情况下，我推荐 WAMP（适用于 Windows）、LAMP（适用于 Linux）和 MAMP（适用于 OS X）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:50:03.560

[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

PHP 不会像 HTML 那样在本地运行，至少您将不得不安装 XAMPP 之类的东西并学习如何使用它来设置本地服务器。要么这样做，要么在您的实时服务器上进行测试。

# javascript - 仅使用 javascript 将图像添加到幻灯片

> ID：13331667
> 
> 赞同：0
> 
> 时间：2012-11-11T13:45:00.613
> 
> 标签：javascript, html, image

我正在创建的网站上有一个幻灯片，我想知道如何单击单独的图像并仅使用简单的 javascript 将其动态添加到幻灯片中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:57:22.453

使用 jQuery 之类的 JavaScript 框架（你真的应该这样做，即使是小功能，因为它确保你的代码是跨浏览器兼容的）：

```
$("img.addtoslide").click(function() {
  $(this).clone().appendTo("#slideshow");
}); 
```

上面的代码（基于 jQuery 语法）将适用于您添加到文档中的所有图像，而无需为每个图像编写新代码。

我真的建议您使用某种框架来操作 HTML DOM。尝试自己创建跨浏览器安全性是一件非常麻烦的事情。

如果您担心大小，那么有一堆微型 JS 框架使用类似于 jQuery 的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:51:04.183

像这样的东西

```
$(".separateImage").click(function(){

   $("#slider").append("<img src='1.jpg'/>");

}); 
```

# c# - 转推 oauth c#

> ID：13331668
> 
> 赞同：1
> 
> 时间：2012-11-11T13:45:10.893
> 
> 标签：c#, api, oauth, twitter

我尝试使用[twitter api 转推状态](https://dev.twitter.com/docs/api/1.1/post/statuses/retweet/%3aid)，并使用以下代码发送发布请求

```
 webRequest = WebRequest.Create("https://api.twitter.com/1.1/statuses/retweet/241259202004267009.json") as HttpWebRequest;
               webRequest.ServicePoint.Expect100Continue = false;
               webRequest.Method = "POST";
               webRequest.ContentType = "application/x-www-form-urlencoded"; 

webRequest.Headers.Add("Authorization: OAuth oauth_consumer_key=\"xxxxx\", oauth_nonce=\"xxx\", oauth_signature=\"xxxx\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1352642106\", oauth_token=\"xxxx\", oauth_version=\"1.0\"");

  requestWriter = new StreamWriter(webRequest.GetRequestStream());
  requestWriter.Write(string.Empty);
  requestWriter.Close(); 
```

用户在上一步中通过我的 twitter 应用程序进行了身份验证，但上面的代码什么也不做，甚至没有返回任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:46:52.473

您需要致电`webRequest.GetResponse()`以实际发送请求。

# mysql - “无法建立数据库连接。检查连接字符串、用户名和密码”背后的根错误是什么。

> ID：13331675
> 
> 赞同：5
> 
> 时间：2012-11-11T13:45:45.393
> 
> 标签：mysql, jdbc, google-apps-script

通过google和stackoverflow，我发现了一些关于“无法建立数据库连接。检查连接字符串、用户名和密码”的问题。但是，我找不到任何发现潜在错误的人。

我正在尝试使用数据库连接编写我的第一个谷歌脚本；我有一个 mysql 和 oracle jdbc getConnection，它们都产生了这个错误。我已经检查，双重和三重检查连接信息无济于事。我知道数据库是可以访问的（可以通过其他客户端从几台不同的机器上进入，比如 linux 机器上的 php，在家和工作中各种 Windows PC 上的 sql developer）。我如何确定真正的错误是什么？呈现给我的错误太笼统和抽象。

环境：在谷歌电子表格中使用脚本（因此继承谷歌建立的任何环境）。我正在尝试使用 Google API jdbc，但对环境变量一无所知。

使用以下语法：

```
var url = "jdbc:mysql://mysql.cb-pta.com:3306/u4lottery";
var conn = Jdbc.getConnection(url, user, password); 
```

再次验证用户名和密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:25:08.183

有一个已知错误会导致使用主机名的 jdbc 连接出现问题。尝试改用 IP 地址。

奇怪，但真实..这个错误我失去了将近 2 天....

[这是错误报告的链接....](http://code.google.com/p/google-apps-script-issues/issues/detail?can=2&start=0&num=100&q=&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&groupby=&sort=&id=1856)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-15T20:44:04.350

只是为了其他人找到这个旧线程。我在使用 Apps 脚本连接到 Google CloudSQL 实例时也遇到了麻烦，不得不从以下位置进行更改：

```
Jdbc.getCloudSqlConnection('jdbc:google:rdbms://<IP>/<DB_NAME>', '<USER>', 'PASSWORD'); 
```

到标准 JDBC MySQL（有效）：

```
Jdbc.getConnection('jdbc:mysql:// ...same as above... 
```

此外，请注意不要在 DB_NAME 后面包含“/” - 这也会导致用户/密码错误消息失败！

要检查的另一件事是您是否有适当的防火墙设置 - 允许从您来自的源 IP 进行访问*（如果是 Apps 脚本，这可能是 Google 的服务器 - 而不是您的客户端浏览器的 IP）*。您可能必须向所有人开放它（0.0.0.0/0）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-07T10:08:24.820

这可能与您的数据库位于防火墙后面有关。根据[Google 文档](https://support.google.com/datastudio/answer/7088031)（在这种情况下是 Google Data Studio，但通常适用）：“如果您的数据库位于防火墙后面，您将需要开放对以下所有 IP 地址的访问。Data Studio 使用这些地址进行连接并查询您的 MySql 数据库。”

此处的 IP 地址以及其他地方： https: [//support.google.com/datastudio/answer/7088031](https://support.google.com/datastudio/answer/7088031)

# javascript - 将 js 函数添加到 iframe - dojo

> ID：13331680
> 
> 赞同：0
> 
> 时间：2012-11-11T13:46:10.860
> 
> 标签：javascript, iframe, dojo

我们创建一个 iFrame 像

```
var iframe = dojo.io.iframe.create(generatedRequestId); 
```

我们想插入一个额外的 javascript 函数，比如

函数 printThis() { window.print(); }

在 iFrame 中，以便在父窗口中我们可以从一些代码中调用 printThis() 函数，例如

```
_setPrintExportCookieInterval: function(/**String*/requestId, /**function*/closePopup, /**String*/exportTypeId) {
    //have the interval autoexpire after some amount of seconds
    var count = 0;
    var intervalMs = 2000;

    var intervalId = self.setInterval(function() {
        var reportCookie = dojo.cookie(requestId);
        if(reportCookie || count > 300000) { //5 mins
            //if there's a status failure, don't close the window
            if(reportCookie == "success") {
                //console.debug(exportTypeId);
                if(exportTypeId == PRINT) {
                    var iframe = dojo.byId(requestId);
                    iframe.printThis();
                }
                closePopup();
            } else {
                console.debug("print/export request returned with nonstandard status " + reportCookie);
            }
            window.clearInterval(intervalId);
            //delete the cookie
            dojo.cookie(requestId, null, {path: "/", expires: -1});
            //destroy the iframe
            //dojo.destroy(dojo.byId(requestId));
        };
        count+=intervalMs;
    }, intervalMs);

    return intervalId;
}, 
```

-这可能吗？我知道 dojo.io.iframe.create(generatedRequestId) 需要第二个参数，它将是 onLoad 执行的代码 - 但不一定是可以在 iframe 加载后调用的函数？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:07:07.793

当您在浏览器 JavaScript 中声明“全局”变量或函数时，该变量可用作`window`对象的属性。`window`如果 iframe 来自同一来源，则您可以通过 iframe 的 contentWindow 属性访问其对象。

```
iframe.contentWindow.printThis(); 
```

# opengl - OpenGL 视口变换

> ID：13331681
> 
> 赞同：1
> 
> 时间：2012-11-11T13:46:19.643
> 
> 标签：opengl

我想知道OpenGL如何处理视口转换到窗口。

据我了解，视口转换是通过将视口转换应用于该场景来将场景拉伸到 OpenGL 窗口上。

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-01T19:15:11.303

在*裁剪*和*透视分割*之后，所有剩余的（可见的）顶点坐标 x,y,z 都在 -1 和 +1 之间——这些被称为*标准化设备坐标*。这些通过适当的比例和移位映射到*设备坐标*——即*视口变换*。

例如，如果视口大小为 1024x768，具有 16 位深度缓冲区且原点为 (0,0)，则点将缩放 (512,384,2^14) 并移动 (512,384,2^14)为设备产生适当的像素和深度值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T14:29:08.760

[http://www.songho.ca/opengl/gl_transform.html](http://www.songho.ca/opengl/gl_transform.html)：

> 窗口坐标（屏幕坐标）
> 
> 它是通过将标准化设备坐标 (NDC) 应用于视口变换来产生的。NDC 被缩放和平移以适应渲染屏幕。窗口坐标最终被传递到 OpenGL 流水线的分级过程，成为一个片段。glViewport() 命令用于定义最终图像映射的渲染区域的矩形。并且，glDepthRange() 用于确定窗口坐标的 z 值。使用上述 2 个函数的给定参数计算窗口坐标；

按照链接查看数学详细信息。

# python - 如何将命令行的输出转换为脚本中的条件？

> ID：13331684
> 
> 赞同：0
> 
> 时间：2012-11-11T13:46:35.540
> 
> 标签：python, linux

我试过这个：

```
import os

if os.system('somecommand') == 'output from command':

    do_something()
```

但它没有奏效。我该怎么做？我应该使用什么库？

当我使用下面的子流程解决方案时，我收到此错误代码：

```
Traceback (most recent call last):
  File "", line 1, in 
  File "/usr/lib/python2.7/subprocess.py", line 537, in check_output
    process = Popen(stdout=PIPE, *popenargs, **kwargs)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1259, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:51:25.493

的返回值`os.system()`是进程的退出代码，而不是它输出到标准输入的任何内容。您想改用该[`subprocess`模块](http://docs.python.org/2/library/subprocess.html)：

```
import subprocess

if subprocess.check_output('somecommand') == 'output from command': 
```

# javascript - 如何在 JavaScript 中编写“for-in”？

> ID：13331687
> 
> 赞同：3
> 
> 时间：2012-11-11T13:47:04.463
> 
> 标签：javascript

> **可能重复：**
> [基本阵列构造的功能方法](https://stackoverflow.com/questions/11808758/functional-approach-to-basic-array-construction)

我是 js 新手。我只想知道哪种方法是正确的。下面我发布了我的代码。

```
var doubles = (i*20 for (i in it));
var doubles ={i*20 for (i in it)}; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:52:01.577

遍历数组时应该使用普通*的 for循环。**for...in*用于迭代对象属性。

所以，正确的做法是：

```
for (var i = 0; i < array.length; ++i) {
    // do something
} 
```

迭代对象属性：

```
for (var prop in obj) {
     // do something with prop
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T13:52:46.427

假设`it`是一个数组，您可以使用[`.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var doubles = it.map(function(i){ return i*20; }); 
```

此外，您可能想看看[如何在 JavaScript 中编写列表/数组推导式](https://stackoverflow.com/q/11808758/1048572)

* * *

假设您想使用 Mozilla 的[Generator 表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Iterators_and_Generators#Generator_expressions)（其中`it`是现有的`Iterator`），您需要使用方括号：

```
var twentyfolds = [i*20 for (i in it)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:49:27.193

为了将来参考，ECMAScript 6（又名 Harmony）很可能会引入[一种新的、健全的迭代对象（包括数组）的方法](http://wiki.ecmascript.org/doku.php?id=harmony%3aiterators)：

```
for(var x of array) {
    // do something with x
} 
```

它还将向核心语言引入[数组理解](http://wiki.ecmascript.org/doku.php?id=harmony%3aarray_comprehensions)和[生成器表达式：](http://wiki.ecmascript.org/doku.php?id=harmony%3aarray_comprehensions)

```
var arr = [1, 2, 3];
console.log([i*20 for (i of arr)]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T13:54:54.203

这两个选项都是语法错误。如果 'it' 是一个列表，那么您可以使用 for 循环或 forEach 方法遍历它。但是，在您的情况下，您似乎真的在寻找 map 方法。

```
var doubles = it.map(function (i) { return i * 20; }); 
```

# c# - 懵了，这是poco吗？

> ID：13331695
> 
> 赞同：3
> 
> 时间：2012-11-11T13:47:58.590
> 
> 标签：c#, poco

假设我要实现以下接口：

```
public interface ICar
{
   bool IsMoving();
   bool IsRegistered();
   int CurrentSpeed {get; set;}
} 

   public class Car : ICar
   {
       public int CurrentSpeed {get; set;}        
       public bool IsMoving()
       {
         // some logic here
       }
   } 
```

这个 IsMoving() 方法会破坏 poco 定义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:56:59.050

POCO 是框架设计的一个特征，这意味着使用框架的（某些）代码不必适应它。最值得注意的是，在 ORM 框架中，这意味着实体类不必，比如说，实现`IEntity`允许被持久化在数据库中。

这意味着**在您自己的代码**中，您不需要关心什么是“POCO”，什么不是“POCO”。但是，如果您需要**其他人**使用您的代码来实现`ICar`，那么您就不允许他们使用 POCO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:02:23.427

检查此链接 DTO ver POCO

[POCO 与 DTO](https://stackoverflow.com/questions/725348/poco-vs-dto)

引用（但请阅读链接并点击那里的其他链接）

> ...POCO 遵循 OOP 的规则。它应该（但不是必须）具有状态和行为。POCO 来自 POJO，由 Martin Fowler 创造...

换句话说，如果 POCO 有行为，那是绝对可以的。`The requirement`因为 POCO**不知道持久性**

# python - 如何将函数应用于两列 Pandas 数据框

> ID：13331698
> 
> 赞同：576
> 
> 时间：2012-11-11T13:48:53.300
> 
> 标签：python, pandas, dataframe

假设我有一个`df`包含`'ID', 'col_1', 'col_2'`. 我定义了一个函数：

`f = lambda x, y : my_function_expression`.

现在我想将`f`to`df`的两列`'col_1', 'col_2'`应用于按元素计算一个新列`'col_3'`，有点像：

```
df['col_3'] = df[['col_1','col_2']].apply(f)  
# Pandas gives : TypeError: ('<lambda>() takes exactly 2 arguments (1 given)' 
```

怎么做 ？

**********添加详细示例如下***************

 *****```
import pandas as pd

df = pd.DataFrame({'ID':['1','2','3'], 'col_1': [0,2,3], 'col_2':[1,4,5]})
mylist = ['a','b','c','d','e','f']

def get_sublist(sta,end):
    return mylist[sta:end+1]

#df['col_3'] = df[['col_1','col_2']].apply(get_sublist,axis=1)
# expect above to output df as below 

  ID  col_1  col_2            col_3
0  1      0      1       ['a', 'b']
1  2      2      4  ['c', 'd', 'e']
2  3      3      5  ['d', 'e', 'f'] 
```

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2012-11-12T01:39:09.783

这是一个在数据帧上使用的示例`apply`，我用`axis = 1`.

请注意，不同之处在于，不是尝试将两个值传递给函数`f`，而是重写函数以接受 pandas Series 对象，然后索引 Series 以获取所需的值。

```
In [49]: df
Out[49]: 
          0         1
0  1.000000  0.000000
1 -0.494375  0.570994
2  1.000000  0.000000
3  1.876360 -0.229738
4  1.000000  0.000000

In [50]: def f(x):    
   ....:  return x[0] + x[1]  
   ....:  

In [51]: df.apply(f, axis=1) #passes a Series object, row-wise
Out[51]: 
0    1.000000
1    0.076619
2    1.000000
3    1.646622
4    1.000000 
```

根据您的用例，有时创建一个 pandas`group`对象，然后`apply`在组上使用会很有帮助。

* * *

## 回答 #2

> 赞同：431
> 
> 时间：2018-10-17T12:22:47.120

在 Pandas 中有一种干净的、单行的方式来执行此操作：

```
df['col_3'] = df.apply(lambda x: f(x.col_1, x.col_2), axis=1) 
```

这允许`f`成为具有多个输入值的用户定义函数，并使用（安全）列名而不是（不安全）数字索引来访问列。

数据示例（基于原始问题）：

```
import pandas as pd

df = pd.DataFrame({'ID':['1', '2', '3'], 'col_1': [0, 2, 3], 'col_2':[1, 4, 5]})
mylist = ['a', 'b', 'c', 'd', 'e', 'f']

def get_sublist(sta,end):
    return mylist[sta:end+1]

df['col_3'] = df.apply(lambda x: get_sublist(x.col_1, x.col_2), axis=1) 
```

输出`print(df)`：

```
 ID  col_1  col_2      col_3
0  1      0      1     [a, b]
1  2      2      4  [c, d, e]
2  3      3      5  [d, e, f] 
```

如果您的列名包含空格或与现有数据框属性共享名称，则可以使用方括号进行索引：

```
df['col_3'] = df.apply(lambda x: f(x['col 1'], x['col 2']), axis=1) 
```

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2016-08-31T21:39:46.173

一个简单的解决方案是：

```
df['col_3'] = df[['col_1','col_2']].apply(lambda x: f(*x), axis=1) 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2015-04-24T02:33:45.843

一个有趣的问题！我的回答如下：

```
import pandas as pd

def sublst(row):
    return lst[row['J1']:row['J2']]

df = pd.DataFrame({'ID':['1','2','3'], 'J1': [0,2,3], 'J2':[1,4,5]})
print df
lst = ['a','b','c','d','e','f']

df['J3'] = df.apply(sublst,axis=1)
print df 
```

输出：

```
 ID  J1  J2
0  1   0   1
1  2   2   4
2  3   3   5
  ID  J1  J2      J3
0  1   0   1     [a]
1  2   2   4  [c, d]
2  3   3   5  [d, e] 
```

我将列名更改为 ID,J1,J2,J3 以确保 ID < J1 < J2 < J3，因此列以正确的顺序显示。

一个更简短的版本：

```
import pandas as pd

df = pd.DataFrame({'ID':['1','2','3'], 'J1': [0,2,3], 'J2':[1,4,5]})
print df
lst = ['a','b','c','d','e','f']

df['J3'] = df.apply(lambda row:lst[row['J1']:row['J2']],axis=1)
print df 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-03-05T15:20:26.063

您正在寻找的方法是 Series.combine。但是，似乎必须注意数据类型。在您的示例中，您会（就像我在测试答案时所做的那样）天真地打电话

```
df['col_3'] = df.col_1.combine(df.col_2, func=get_sublist) 
```

但是，这会引发错误：

```
ValueError: setting an array element with a sequence. 
```

我最好的猜测是，它似乎期望结果与调用该方法的系列的类型相同（此处为 df.col_1）。但是，以下工作：

```
df['col_3'] = df.col_1.astype(object).combine(df.col_2, func=get_sublist)

df

   ID   col_1   col_2   col_3
0   1   0   1   [a, b]
1   2   2   4   [c, d, e]
2   3   3   5   [d, e, f] 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-10-25T02:54:32.390

从中返回列表`apply`是一项危险的操作，因为结果对象不能保证是 Series 或 DataFrame。在某些情况下可能会引发异常。让我们来看一个简单的例子：

```
df = pd.DataFrame(data=np.random.randint(0, 5, (5,3)),
                  columns=['a', 'b', 'c'])
df
   a  b  c
0  4  0  0
1  2  0  1
2  2  2  2
3  1  2  2
4  3  0  0 
```

从以下位置返回列表有三种可能的结果`apply`

**1)**如果返回列表的长度不等于列数，则返回列表系列。

```
df.apply(lambda x: list(range(2)), axis=1)  # returns a Series
0    [0, 1]
1    [0, 1]
2    [0, 1]
3    [0, 1]
4    [0, 1]
dtype: object 
```

**2）**当返回列表的长度等于列数时，返回一个DataFrame，每列获取列表中对应的值。

```
df.apply(lambda x: list(range(3)), axis=1) # returns a DataFrame
   a  b  c
0  0  1  2
1  0  1  2
2  0  1  2
3  0  1  2
4  0  1  2 
```

**3)**如果返回列表的长度等于第一行的列数，但至少有一行列表的元素数与列数不同，则会引发 ValueError。

```
i = 0
def f(x):
    global i
    if i == 0:
        i += 1
        return list(range(3))
    return list(range(4))

df.apply(f, axis=1) 
ValueError: Shape of passed values is (5, 4), indices imply (5, 3) 
```

### 不申请就回答问题

与axis = 1一起使用`apply`非常慢。使用基本的迭代方法可以获得更好的性能（尤其是在较大的数据集上）。

**创建更大的数据框**

```
df1 = df.sample(100000, replace=True).reset_index(drop=True) 
```

### 计时

```
# apply is slow with axis=1
%timeit df1.apply(lambda x: mylist[x['col_1']: x['col_2']+1], axis=1)
2.59 s ± 76.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

# zip - similar to @Thomas
%timeit [mylist[v1:v2+1] for v1, v2 in zip(df1.col_1, df1.col_2)]  
29.5 ms ± 534 µs per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

@托马斯回答

```
%timeit list(map(get_sublist, df1['col_1'],df1['col_2']))
34 ms ± 459 µs per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2016-04-08T00:59:44.090

我将为 np.vectorize 投票。它允许您只拍摄 x 列而不处理函数中的数据帧，因此对于您无法控制的函数或执行诸如将 2 列和一个常量发送到函数（即 col_1、col_2、 '富'）。

```
import numpy as np
import pandas as pd

df = pd.DataFrame({'ID':['1','2','3'], 'col_1': [0,2,3], 'col_2':[1,4,5]})
mylist = ['a','b','c','d','e','f']

def get_sublist(sta,end):
    return mylist[sta:end+1]

#df['col_3'] = df[['col_1','col_2']].apply(get_sublist,axis=1)
# expect above to output df as below 

df.loc[:,'col_3'] = np.vectorize(get_sublist, otypes=["O"]) (df['col_1'], df['col_2'])

df

ID  col_1   col_2   col_3
0   1   0   1   [a, b]
1   2   2   4   [c, d, e]
2   3   3   5   [d, e, f] 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2013-05-30T00:53:50.313

您编写 f 的方式需要两个输入。如果您查看错误消息，它会说您没有为 f 提供两个输入，只有一个。错误信息是正确的。
不匹配是因为 df[['col1','col2']] 返回具有两列的单个数据帧，而不是两个单独的列。

您需要更改 f 以便它接受单个输入，将上述数据框保留为输入，然后将其分解为函数体内的 x, *y*。然后做任何你需要的事情并返回一个值。

您需要此函数签名，因为语法是 .apply(f) 所以 f 需要采用单个事物 = 数据帧，而不是您当前 f 期望的两个事物。

由于您尚未提供 f 的主体，因此我无法提供更多详细信息-但这应该提供出路，而无需从根本上更改您的代码或使用其他一些方法，而不是应用

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2016-08-11T00:57:42.823

我确信这不如使用 Pandas 或 Numpy 操作的解决方案快，但如果你不想重写你的函数，你可以使用 map. 使用原始示例数据 -

```
import pandas as pd

df = pd.DataFrame({'ID':['1','2','3'], 'col_1': [0,2,3], 'col_2':[1,4,5]})
mylist = ['a','b','c','d','e','f']

def get_sublist(sta,end):
    return mylist[sta:end+1]

df['col_3'] = list(map(get_sublist,df['col_1'],df['col_2']))
#In Python 2 don't convert above to list 
```

我们可以通过这种方式将任意数量的参数传递给函数。输出是我们想要的

```
ID  col_1  col_2      col_3
0  1      0      1     [a, b]
1  2      2      4  [c, d, e]
2  3      3      5  [d, e, f] 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-11-30T12:15:01.073

另一种选择是[`df.itertuples()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.itertuples.html)（通常更快，并且[`df.iterrows()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iterrows.html)由[文档](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows)和[用户测试](https://google.com/search?q=pandas%20iterrow%20vs%20itertuples)推荐）：

```
import pandas as pd

df = pd.DataFrame([range(4) for _ in range(4)], columns=list("abcd"))

df
    a   b   c   d
0   0   1   2   3
1   0   1   2   3
2   0   1   2   3
3   0   1   2   3

df["e"] = [sum(row) for row in df[["b", "d"]].itertuples(index=False)]

df
    a   b   c   d   e
0   0   1   2   3   4
1   0   1   2   3   4
2   0   1   2   3   4
3   0   1   2   3   4 
```

由于`itertuples`返回一个`Iterable`of [`namedtuple`](https://docs.python.org/3/library/collections.html#collections.namedtuple)s，您可以通过列名（也称为点表示法）和索引作为属性访问元组元素：

```
b, d = row
b = row.b
d = row[1] 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-04-25T16:27:09.390

我想您不想更改`get_sublist`功能，只想使用 DataFrame 的`apply`方法来完成这项工作。为了得到你想要的结果，我写了两个帮助函数：`get_sublist_list`和`unlist`. 正如函数名所暗示的那样，首先获取子列表的列表，然后从该列表中提取该子列表。最后，我们需要调用`apply`函数来将这两个函数应用到`df[['col_1','col_2']]`DataFrame 中。

```
import pandas as pd

df = pd.DataFrame({'ID':['1','2','3'], 'col_1': [0,2,3], 'col_2':[1,4,5]})
mylist = ['a','b','c','d','e','f']

def get_sublist(sta,end):
    return mylist[sta:end+1]

def get_sublist_list(cols):
    return [get_sublist(cols[0],cols[1])]

def unlist(list_of_lists):
    return list_of_lists[0]

df['col_3'] = df[['col_1','col_2']].apply(get_sublist_list,axis=1).apply(unlist)

df 
```

如果您不使用`[]`来包围该`get_sublist`函数，那么该`get_sublist_list`函数将返回一个普通列表，它会 raise `ValueError: could not broadcast input array from shape (3) into shape (2)`，正如@Ted Petrou 所提到的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-05-25T09:36:36.120

我对您的问题的示例：

```
def get_sublist(row, col1, col2):
    return mylist[row[col1]:row[col2]+1]
df.apply(get_sublist, axis=1, col1='col_1', col2='col_2') 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-08-30T04:33:18.750

如果您有一个庞大的数据集，那么您可以使用更简单但更快（执行时间）的方式来使用 swifter：

```
import pandas as pd
import swifter

def fnc(m,x,c):
    return m*x+c

df = pd.DataFrame({"m": [1,2,3,4,5,6], "c": [1,1,1,1,1,1], "x":[5,3,6,2,6,1]})
df["y"] = df.swifter.apply(lambda x: fnc(x.m, x.x, x.c), axis=1) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-01-28T19:33:44.890

这是一个更快的解决方案：

```
def func_1(a,b):
    return a + b

df["C"] = func_1(df["A"].to_numpy(),df["B"].to_numpy()) 
```

这比 @Aman 快 380 倍，比`df.apply(f, axis=1)`@ajrwhite 快 310 倍`df['col_3'] = df.apply(lambda x: f(x.col_1, x.col_2), axis=1)`。

我也添加了一些基准：

结果：

```
 FUNCTIONS   TIMINGS   GAIN
apply lambda    0.7     x 1
apply           0.56    x 1.25
map             0.3     x 2.3
np.vectorize    0.01    x 70
f3 on Series    0.0026  x 270
f3 on np arrays 0.0018  x 380
f3 numba        0.0018  x 380 
```

简而言之：

使用 apply 很慢。我们可以非常简单地加快速度，只需使用一个可以直接在 Pandas Series 上运行的函数（或者在 numpy 数组上更好）。因为我们将在 Pandas Series 或 numpy 数组上进行操作，所以我们将能够对操作进行矢量化。该函数将返回一个 Pandas Series 或 numpy 数组，我们将其分配为新列。

这是基准代码：

```
import timeit

timeit_setup = """
import pandas as pd
import numpy as np
import numba

np.random.seed(0)

# Create a DataFrame of 10000 rows with 2 columns "A" and "B" 
# containing integers between 0 and 100
df = pd.DataFrame(np.random.randint(0,10,size=(10000, 2)), columns=["A", "B"])

def f1(a,b):
    # Here a and b are the values of column A and B for a specific row: integers
    return a + b

def f2(x):
    # Here, x is pandas Series, and corresponds to a specific row of the DataFrame
    # 0 and 1 are the indexes of columns A and B
    return x[0] + x[1]  

def f3(a,b):
    # Same as f1 but we will pass parameters that will allow vectorization
    # Here, A and B will be Pandas Series or numpy arrays
    # with df["C"] = f3(df["A"],df["B"]): Pandas Series
    # with df["C"] = f3(df["A"].to_numpy(),df["B"].to_numpy()): numpy arrays
    return a + b

@numba.njit('int64[:](int64[:], int64[:])')
def f3_numba_vectorize(a,b):
    # Here a and b are 2 numpy arrays with dtype int64
    # This function must return a numpy array whith dtype int64
    return a + b

"""

test_functions = [
'df["C"] = df.apply(lambda row: f1(row["A"], row["B"]), axis=1)',
'df["C"] = df.apply(f2, axis=1)',
'df["C"] = list(map(f3,df["A"],df["B"]))',
'df["C"] = np.vectorize(f3) (df["A"].to_numpy(),df["B"].to_numpy())',
'df["C"] = f3(df["A"],df["B"])',
'df["C"] = f3(df["A"].to_numpy(),df["B"].to_numpy())',
'df["C"] = f3_numba_vectorize(df["A"].to_numpy(),df["B"].to_numpy())'
]

for test_function in test_functions:
    print(min(timeit.repeat(setup=timeit_setup, stmt=test_function, repeat=7, number=10))) 
```

**输出：**

```
0.7
0.56
0.3
0.01
0.0026
0.0018
0.0018 
```

最后一点：也可以使用 Cython 和其他 numba 技巧来优化事情。*****

# c# - 替换 C# 中的方括号

> ID：13331702
> 
> 赞同：-8
> 
> 时间：2012-11-11T13:49:38.117
> 
> 标签：c#, .net, string, replace, escaping

有一个字符串是 HTML 页面的 innerHTML。其中，有一些内容......我需要逐个替换......我已经用以下公式替换了一些内容。

```
string formatted = str.replace("*", "") 
```

这会将该 HTML 页面中的所有 * 替换为空白。但我也需要将以下内容替换为空白。

[问题 /]

[-选择- /]

[ ]

[上传]

[问题 /]

所以我使用了如下代码：

```
str.replace("[Issue \/]", "")
str.replace("[-Select- \/]", "")
str.replace("[    ]", "")
str.replace("[Upload]", "")
str.replace("[Issue \/]", "") 
```

但我看不到任何替换上述字符串的 HTML 内容中的内容。

HTML中有一个图像按钮。我也需要更换那个图像按钮。

图片按钮的 HTML 代码如下：

```
<asp:ImageButton ID="btnAddHotel" runat="server" ImageUrl="/Style Library/images/icon-add.gif" OnClick="btnAddHotel_Click" OnClientClick="return HideAllTicketValidations();" /> 
```

如何替换所有这些字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:52:42.880

str.Replace 不会就地进行更改。相反，它返回一个新字符串。

尝试使用：

```
var newstr = str.Replace(...) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-11T14:09:29.670

您需要禁用特殊字符（括号），如下所示：

```
str = "Example [Issue]" 
str.replace("\[Issue\]", "")   //str == "Example " 
```

# python - 将字符串分成给定大小的组

> ID：13331705
> 
> 赞同：1
> 
> 时间：2012-11-11T13:50:10.897
> 
> 标签：python, string, performance, datetime, split

我的情况是我有一个带时间戳的项目列表，但实际的时间都被挤在一起了。像这样：

```
time = "165420" # 16:54:20 (or, 4:54 PM and 20 seconds.) 
```

我想要一个脚本来遍历这些行并能够将时间戳转换为日期时间。我有年月日已经没问题了。但就当时的情况而言，我迫切希望找到一个优雅而简单的解决方案。我决定首先暴力破解它以继续我的代码，并最终得到：

```
import datetime

dt_timestamp = extract_dt("2012-11-09-165420") # example

def extract_dt(timestamp):
    ds = timestamp.split('-') #split into groups (0,1,2 are the date, 3 is the time.
    d = [int(i) for i in ds[:3]] + [int(ds[3][0:2]), int(ds[3][2:4]), int(ds[3][4:6])]
    return datetime.datetime(*d) 
```

在尝试解决我的情况时，我看到这个问题有很多变化，有很多答案。

我找到[了这个解决方案](http://bytes.com/topic/python/answers/157385-splitting-string-into-groups-three-characters)：

```
def nsplit(s, n):
    return [s[k:k+n] for k in xrange(0, len(s), n)] 
```

这对我很有效：

```
>>> s = "165420"
>>> n = 2
>>> [s[k:k+n] for k in xrange(0, len(s), n)]
['16', '54', '20'] 
```

但我很确定必须有一种更好、更优雅的方式将字符串分成大小相等的组，正如我提供的[链接](http://bytes.com/topic/python/answers/157385-splitting-string-into-groups-three-characters)中提到的那样（但由于链接海报有错字而已修复）：

> TheFunction("Hello World",3)
> 
> 回报：
> 
> ['你好世界']

如果可能的话，我希望它不是一个函数，我想要一种内联的方法。它应该尽可能高效。我总是可以从我找到的函数中提取列表理解，但我觉得它效率不高，而且看起来不太对劲。

答案可能很简单，我只是不知道。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:09:54.563

我不知道比您在问题中提到的更优雅的分块字符串解决方案，但[`datetime.datetime.strptime()`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)可以解决您的实际问题：

```
>>> from datetime import datetime
>>> datetime.strptime("2012-11-09-165420", "%Y-%m-%d-%H%M%S")
datetime.datetime(2012, 11, 9, 16, 54, 20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T19:07:45.117

你可以用[`textwrap.wrap()`](http://docs.python.org/2/library/textwrap.html#textwrap.wrap)这个：

```
>>> import textwrap
>>> s = "165420"
>>> n = 2
>>> textwrap.wrap(s, n)
['16', '54', '20'] 
```

# android - 根据主题加载不同的图标集

> ID：13331713
> 
> 赞同：1
> 
> 时间：2012-11-11T13:51:08.673
> 
> 标签：android, layout, icons

我打算使用 Holo 和 Holo 光主题编写应用程序，我想知道是否有办法直接从资源文件夹中选择可绘制对象？

例如，如果加载的主题是 Holo，应用程序是否可以选择标准资源（可绘制）并选择轻型版本（例如 drawable-light）而无需以编程方式执行？

# java - 在 play 2.0.3 中，我有“组”图像，我想在启动服务器时对其进行分类并放入数据库

> ID：13331717
> 
> 赞同：0
> 
> 时间：2012-11-11T13:51:34.727
> 
> 标签：java, database, webserver, playframework-2.0

我作为金匠的工作需要一个网站，因为我有“一些”编程经验，我想我会自己做，它只是一个显示我的工作图像和基本联系信息的网站。

我想做的基本上是这样的：

我将我的珠宝图像/渲染图放在这样的文件夹结构中

```
- public
- - images
- - - creations
- - - - JewelSet1
- - - - - Jewel1
- - - - - - img1
- - - - - - img2
- - - - - - img3
- - - - - Jewel2
- - - - JewelSet2
- - - - - Jewel3
- - javascripts
- - stylesheets 
```

而`public static Result index()`第一次调用该方法时，它应该在public/images/creations中搜索并将文件夹分类为我制作的三个对象，即：CreationSet、Image和Creation，它们基本上是：

```
package models;

import java.awt.image.BufferedImage;
import play.db.ebean.Model;
import play.data.validation.Constraints;
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Image extends Model{
    @Id
    public String id;

    @Constraints.Required
    public BufferedImage img = null;

    @Constraints.Required
    public String desc;
} 
```

* * *

```
@Entity
public class Creation extends Model {
    @Id
    public String id;

    @Constraints.Required
    public String name;

    @Constraints.Required
    public String desc;

    public List<Image> images = new ArrayList<Image>();

    public void addImage(int priority, Image img){
        images.add(priority, img);
    }
} 
```

* * *

```
@Entity
public class CreationSet extends Model {
    @Id
    public String id;

    @Constraints.Required
    public String name;

    @Constraints.Required
    public String desc;

    public List<Creation> creations = new ArrayList<Creation>();

    public void addCreations(int priority, Creation creation){
        creations.add(priority, creation);
    }
} 
```

然后通过`CreationSet`s 的列表并在 html-templates 中生成正确的 HTML

这是正确的方法吗？或者我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:14:16.930

顺便说一句，这可能应该在[Global](http://www.playframework.org/documentation/2.0/ScalaGlobal)对象中。不在某些索引页面上。

您可以覆盖启动应用程序时将调用的 start 方法。Play 文件夹示例中的所有夹具数据都在 Global 对象中完成。

否则我会这样做的。本地资产的最大问题是您依赖于现有的文件系统、相对/绝对路径，您最终可能会在本地/生产等之间搞砸。

真正的无状态系统是设置一个外部文件系统来管理资产。以亚马逊 S3 为例。这样，如果您部署 Play 应用程序的新实例，您的静态资源仍将保持一致。

**编辑 1：**最后一点，如果通过*生成正确的 html*您的意思是生成将被编译的 Java/Scala 代码，请不要。编译时间很长，而且你会把它弄得一团糟。除了您之外，没有人能够理解您的代码。

**编辑2：**最后一点（承诺）：作为金匠，您必须意识到工具有不同的目标，即使您有锤子，也无法解决所有问题。让我说，作为一名程序员，Play 确实是一个非常漂亮的工具，有很多优点，但它可能不是你情况下最合适的*锤子*。

# php - 如何在 div 中选中单选框动态检查

> ID：13331719
> 
> 赞同：2
> 
> 时间：2012-11-11T13:51:46.113
> 
> 标签：php, jquery, radio

我需要一个动态函数来检查 a 是否`radio box`被选中`div`。

实际上，我希望每次用户在不选择 的情况`radio button`下按下下一步按钮时都显示一条错误消息。

我正在处理这个[页面](http://www.gomlekevi.com/indexDESIGN.php)。**ILERI**表示 **NEXT**。_

这些是div。上面引用的页面上有 9 个 div。

```
<div id="div2" class="targetDiv">
    <a id="back"  class="ileri-geri" target="1"  >GERİ</a> <h1>Cep Çesitleri</h1>
    <a  class="ileri-geri" target="3">İLERİ</a>
    <div class="urunler">
        <ul class="urun">
            <li><img src="imagesBOX/items/cepsayisi/0.jpg"></li>
            <li><p>Cepsiz</p><input type="radio" name="cep_cesitleri" value="0" /></li>
            <li></li>
        </ul>

        <ul class="urun">
            <li><img src="imagesBOX/items/cepsayisi/1.jpg"></li>
            <li><p>Tek Cepli</p><input type="radio" name="cep_cesitleri" value="1" /></li>
            <li></li>
         </ul>

        <ul class="urun">
            <li><img src="imagesBOX/items/cepsayisi/2.jpg"></li>
            <li><p>Çift Cepli</p><input type="radio" name="cep_cesitleri" value="2" /></li>
            <li></li>
        </ul>

        <h1>Cep Sayisi</h1><br/>

        <?php foreach($Secondresult As $jcRow):  ?>
                <ul class="urun">
                <li><img src="imagesBOX/items/cep_cesitleri/<?php echo $jcRow->image ?>" /></li>
                <li><p><?php echo $jcRow->title ?></p><input type="radio" name="cep_cesitleri" value="<?php echo $jcRow->id ?>" /></li>
                <li></li>
                </ul>
          <?php endforeach; ?>

        </div>

    </div>
   <!----2nd page---> 
```

这是隐藏所有 div 并仅基于 tag 的 target 属性显示 div 的 javascript。

```
<script type="text/javascript">
    $(document).ready(function(){                          
        $('.targetDiv').hide();
        $('#divfirst').show();
        $(".ileri-geri").click(function(event){
            $('.targetDiv').hide();
            $('#div'+$(this).attr('target')).fadeIn('slow');
            //alert("Redirecting you to jQuery.com!");
        });
</script> 
```

现在我想要这样，如果用户单击`ILERI`按钮而不选择单选选项，则会出现错误消息，但该函数应动态显示它处理此页面上的所有 9 个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:04:40.143

```
$(".ileri-geri").click(function(event){
    //you have to detect the visable .targetDiv first
    if($('.targetDiv:visible input:checked').length() > 0) {
        $('.targetDiv').hide();
        $('#div'+$(this).attr('target')).fadeIn('slow');
    }else{
        alert("Error");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:57:21.993

您可以检查是否至少检查了一项：

```
$(".urun input:checked").length() > 0 
```

# sorting - 如何在hadoop的洗牌/排序阶段进行数字排序？

> ID：13331722
> 
> 赞同：16
> 
> 时间：2012-11-11T13:52:07.880
> 
> 标签：sorting, hadoop

数据看起来像这样，第一个字段是一个数字，

```
3 ...
1 ...
2 ...
11 ... 
```

我想根据第一个字段按数字而不是按字母对这些行进行排序，这意味着排序后应该是这样的，

```
1 ...
2 ...
3 ...
11 ... 
```

但是hadoop一直给我这个，

```
1 ...
11 ...
2 ...
3 ... 
```

如何纠正它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T11:32:27.743

假设您使用的是**Hadoop Streaming**，您需要使用**KeyFieldBasedComparator**类。

1.  -D mapred.output.key.comparator.class=org.apache.hadoop.mapred.lib.KeyFieldBasedComparator 应该添加到流命令

2.  您需要使用 mapred.text.key.comparator.options 提供所需的排序类型。一些有用的是 -n ：数字排序， -r ：反向排序

**示例**：

使用以下代码创建身份映射器和化简器

这是**mapper.py**和**reducer.py**

```
#!/usr/bin/env python
import sys
for line in sys.stdin:    
    print "%s" % (line.strip()) 
```

这是**input.txt**

```
1
11
2
20
7
3
40 
```

这是**流式传输**命令

```
$HADOOP_HOME/bin/hadoop  jar $HADOOP_HOME/hadoop-streaming.jar 
-D mapred.output.key.comparator.class=org.apache.hadoop.mapred.lib.KeyFieldBasedComparator 
-D  mapred.text.key.comparator.options=-n 
-input /user/input.txt 
-output /user/output.txt 
-file ~/mapper.py 
-mapper ~/mapper.py 
-file ~/reducer.py 
-reducer ~/reducer.py 
```

您将获得所需的输出

```
1   
2   
3   
7   
11  
20  
40 
```

**注意**：

1.  我使用了简单的一键输入。但是，如果您有多个键和/或分区，则必须根据需要编辑 mapred.text.key.comparator.options。由于我不知道您的用例，因此我的示例仅限于此

2.  需要身份映射器，因为您需要至少一个映射器才能运行 MR 作业。

3.  需要身份归约器，因为如果它是纯映射作业，则 shuffle/sort 阶段将不起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T16:47:41.450

Hadoop 的默认比较器会根据您使用的`Writable`类型（更准确地说`WritableComparable`）比较您的键。如果您正在处理，`IntWritable`那么`LongWritable`它将按*数字*对它们进行排序。

我假设您`Text`在示例中使用，因此您最终将拥有*自然排序顺序*。

但是，在特殊情况下，您也可以编写自己的比较器。
例如：*仅用于测试目的*，这里有一个快速示例如何更改 Text 键的排序顺序：这会将它们视为整数并产生数字排序顺序：

```
public class MyComparator extends WritableComparator {

        public MyComparator() {
            super(Text.class);
        }

        @Override
        public int compare(byte[] b1, int s1, int l1, byte[] b2, int s2, int l2) {

            try {

                String v1 = Text.decode(b1, s1, l1);
                String v2 = Text.decode(b2, s2, l2);

                int v1Int = Integer.valueOf(v1.trim());
                int v2Int = Integer.valueOf(v2.trim());

                return (v1Int < v2Int) ? -1 : ((v1Int > v2Int) ? 1 : 0);

            }
            catch (IOException e) {
                throw new IllegalArgumentException(e);
            }
        }
    } 
```

在 jobrunner 类集中：

```
Job job = new Job();
...
job.setSortComparatorClass(MyComparator.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-15T12:05:22.493

对于使用顺序 Hadoop 进行流式传输（可能使用`-jobconf`而不是`-D`用于配置），您可以按键排序：

```
-jobconf stream.num.map.output.key.fields=2\
-jobconf mapreduce.partition.keycomparator.options="-k2,2nr"\
-jobconf mapred.output.key.comparator.class=org.apache.hadoop.mapred.lib.KeyFieldBasedComparator 
```

由`stream.num.map.output.key.fields`, 第 1 和第 2 列是`key 1`和`key 2`。

`mapreduce.partition.keycomparator.options="-k2,2nr"`表示使用第 2 个键（从第 2 个键到第 2 个键）作为数值以相反的顺序排序。

它很像 Linux`sort`命令！

# c++ - 这段代码有什么未优化的地方？

> ID：13331730
> 
> 赞同：1
> 
> 时间：2012-11-11T13:52:51.543
> 
> 标签：c++, optimization

我在 interviewstreet 上写了一个问题的解决方案，这里是问题描述：

[https://www.interviewstreet.com/challenges/dashboard/#problem/4e91289c38bfd](https://www.interviewstreet.com/challenges/dashboard/#problem/4e91289c38bfd)

这是他们给出的解决方案：

[https://gist.github.com/1285119](https://gist.github.com/1285119)

这是我编写的解决方案：

```
#include<iostream>
#include <string.h>
using namespace std;
#define LOOKUPTABLESIZE 10000000
int popCount[2*LOOKUPTABLESIZE];
int main()
{
int numberOfTests = 0;
cin >> numberOfTests;

for(int test = 0;test<numberOfTests;test++)
{
    int startingNumber = 0;
    int endingNumber = 0;
    cin >> startingNumber >> endingNumber;

    int numberOf1s = 0;

    for(int number=startingNumber;number<=endingNumber;number++)
    {
        if(number >-LOOKUPTABLESIZE && number < LOOKUPTABLESIZE)
        {
            if(popCount[number+LOOKUPTABLESIZE] != 0)
            {
                numberOf1s += popCount[number+LOOKUPTABLESIZE];
            }
            else
            {
                popCount[number+LOOKUPTABLESIZE] =__builtin_popcount (number);
                numberOf1s += popCount[number+LOOKUPTABLESIZE];
            }
        }
        else
        {
        numberOf1s += __builtin_popcount (number);
        }
    }
    cout << numberOf1s << endl;

}

} 
```

你能指出我的代码有什么问题吗？它只能通过 3/10 的测试。时间限制为 3 秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T13:58:27.810

> 这段代码有什么未优化的地方？

算法。你在循环

```
for(int number=startingNumber;number<=endingNumber;number++) 
```

计算或查找每个中的 1 位的数量。这可能需要一段时间。

一个好的算法使用一点数学来及时计算所有数字`0 <= k < n`中的 1 位的数量。`O(log n)`

[这](https://stackoverflow.com/a/11892418/1011995)是一个在十进制扩展中计数 0 的实现，使其计数为 1 位的修改应该不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:15:35.410

在看这样一个问题时，你需要把它分解成简单的部分。

例如，假设您知道所有数字中有多少个 1 `[0, N]`（我们称之为`ones(N)`），那么我们有：

```
size_t ones(size_t N) { /* magic ! */ }

size_t count(size_t A, size_t B) {
    return ones(B) - (A ? ones(A - 1) : 0);
} 
```

这种方法的优点`one`是可能更容易编程`count`，例如使用递归。因此，第一次天真的尝试是：

```
// Naive
size_t naive_ones(size_t N) {
    if (N == 0) { return 0; }
    return __builtin_popcount(N) + naive_ones(N-1);
} 
```

但这可能太慢了。即使只是计算我们的价值，`count(B, A)`我们也会计算`naive_ones(A-1)`两次！

幸运的是，这里总是有 memoization 的辅助，并且转换非常简单：

```
size_t memo_ones(size_t N) {
    static std::deque<size_t> Memo(1, 0);
    for (size_t i = Memo.size(); i <= N; ++i) {
        Memo.push_back(Memo[i-1] + __builtin_popcnt(i));
    }
    return Memo[N];
} 
```

这可能会有所帮助，但是在内存方面的成本可能会......严重。啊。想象一下，为了计算，`ones(1,000,000)`我们将在 64 位计算机上占用 8MB 内存！更稀疏的记忆可能会有所帮助（例如，每 8 次或 16 次才记忆一次）：

```
// count number of ones in (A, B]
static unoptimized_count(size_t A, size_t B) {
    size_t result = 0;
    for (size_t i = A + 1; i <= B; ++i) {
        result += __builtin_popcount(i);
    }
    return result;
}

// something like this... be wary it's not tested.
size_t memo16_ones(size_t N) {
    static std::vector<size_t> Memo(1, 0);
    size_t const n16 = N  - (N % 16);
    for (size_t i = Memo.size(); i*16 <= n16; ++i) {
        Memo.push_back(Memo[i-1] + unoptimized_count(16*(i-1), 16*i);
    }
    return Memo[n16/16] + unoptimized_count(n16, N);
} 
```

然而，虽然它确实降低了内存成本，但它并没有解决主要的速度问题：我们必须至少使用`__builtin_popcount`B 次！对于较大的 B 值，这是一个杀手。

* * *

上述解决方案是*机械*的，它们不需要一分思考。事实证明，面试与其说是写代码，不如说是思考。

我们能比愚蠢地枚举所有整数更有效地解决这个问题`B`吗？

让我们看看我们的大脑（非常神奇的模式机器）在考虑前几个条目时会选择什么：

```
N    bin  1s   ones(N)
0    0000 0    0
1    0001 1    1
2    0010 1    2
3    0011 2    4
4    0100 1    5
5    0101 2    7
6    0110 2    9
7    0111 3    12
8    1000 1    13
9    1001 2    15
10   1010 2    17
11   1011 3    20
12   1100 2    22
13   1101 3    25
14   1110 3    28
15   1111 3    32 
```

注意一个模式？我愿意 ;) 8-15 的范围与 0-7 完全一样，但每行多了一个 1 => 它就像一个**换位**。这也很合乎逻辑，不是吗？

因此`ones(15) - ones(7) = 8 + ones(7)`，`ones(7) - ones(3) = 4 + ones(3)`和`ones(1) - ones(0) = 1 + ones(0)`。

好吧，让我们把它变成一个公式：

*   提醒：（`ones(N) = popcount(N) + ones(N-1)`几乎）根据定义
*   我们现在知道`ones(2**n - 1) - ones(2**(n-1) - 1) = 2**(n-1) + ones(2**(n-1) - 1)`

让我们做一个isolate `ones(2**n)`，它更容易处理，注意`popcount(2**n) = 1`：

*   重组：`ones(2**n - 1) = 2**(n-1) + 2*ones(2**(n-1) - 1)`
*   使用定义：`ones(2**n) - 1 = 2**(n-1) + 2*ones(2**(n-1)) - 2`
*   简化：`ones(2**n) = 2**(n-1) - 1 + 2*ones(2**(n-1))`，与`ones(1) = 1`。

快速健全性检查：

```
1  = 2**0 => 1  (bottom)
2  = 2**1 => 2  = 2**0 - 1 + 2 * ones(1)
4  = 2**2 => 5  = 2**1 - 1 + 2 * ones(2)
8  = 2**3 => 13 = 2**2 - 1 + 2 * ones(4)
16 = 2**4 => 33 = 2**3 - 1 + 2 * ones(8) 
```

看起来它有效！

* * *

不过，我们还没有完成。`A`并且`B`可能不一定是 2 的幂，如果我们必须一直数`2**n`到`2**n + 2**(n-1)`，那仍然是 O(N)！

另一方面，如果我们设法以 2 为基数表示一个数字，那么我们应该能够利用我们新获得的公式。主要优点是表示中只有 log2(N) 位。

让我们举一个例子来了解它是如何工作的：`13 = 8 + 4 + 1`

```
1  -> 0001
4  -> 0100
8  -> 1000
13 -> 1101 
```

...但是，计数不仅仅是总和：

```
ones(13) != ones(8) + ones(4) + ones(1) 
```

让我们用“换位”策略来表达它：

```
ones(13) - ones(8) = ones(5) + (13 - 8)

ones(5) - ones(4) = ones(1) + (5 - 4) 
```

好的，用一点递归很容易做到。

```
#include <cmath>
#include <iostream>

static double const Log2 = log(2);

// store ones(2**n) at P2Count[n]
static size_t P2Count[64] = {};

// Unfortunately, the conversion to double might lose some precision
// static size_t log2(size_t n) { return log(double(n - 1))/Log2 + 1; }

// __builtin_clz* returns the number of leading 0s
static size_t log2(size_t n) {
    if (n == 0) { return 0; }
    return sizeof(n) - __builtin_clzl(n) - 1;
}

static size_t ones(size_t n) {
    if (n == 0) { return 0; }
    if (n == 1) { return 1; }

    size_t const lg2 = log2(n);
    size_t const np2 = 1ul << lg2; // "next" power of 2

    if (np2 == n) { return P2Count[lg2]; }

    size_t const pp2 = np2 / 2; // "previous" power of 2

    return ones(pp2) + ones(n - pp2) + (n - pp2);
} // ones

// reminder: ones(2**n) = 2**(n-1) - 1 + 2*ones(2**(n-1))
void initP2Count() {
    P2Count[0] = 1;

    for (size_t i = 1; i != 64; ++i) {
        P2Count[i] = (1ul << (i-1)) - 1 + 2 * P2Count[i-1];
    }
} // initP2Count

size_t count(size_t const A, size_t const B) {
    if (A == 0) { return ones(B); }

    return ones(B) - ones(A - 1);
} // count 
```

和一个[演示](http://liveworkspace.org/code/e6265312efd2536d2724073cf2a062f9)：

```
int main() {
    // Init table
    initP2Count();
    std::cout << "0: " << P2Count[0] << ", 1: " << P2Count[1] << ", 2: " << P2Count[2] << ", 3: " << P2Count[3] << "\n";

    for (size_t i = 0; i != 16; ++i) {
        std::cout << i << ": " << ones(i) << "\n";
    }

    std::cout << "count(7, 14): " << count(7, 14) << "\n";
} 
```

胜利！

注意：正如 Daniel Fisher 所指出的，这无法解释负数（但假设两个补码可以从它们的正数中推断出来）。

# java - 如何通过 JAVA 中的套接字发送 File[] 类型的变量

> ID：13331731
> 
> 赞同：1
> 
> 时间：2012-11-11T13:53:01.087
> 
> 标签：java, file, sockets

我已经实现了一个 Java 客户端服务器应用程序。

服务器有一个存储在文件夹中的文件列表，如下所示：

```
File[] list=folder.listFiles(); 
```

我想通过套接字将此变量列表发送到客户端。如何在 JAVA 中执行此操作

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:56:50.093

嗯，基本上你不能。您应该将套接字视为传输字节流。文件对象包含本地机器状态，如文件指针。如果你想做类似的事情，你应该为每个 File 的基础文件存储路径名之类的东西，然后在另一端创建 File 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:03:57.927

**发送 File[] 中的每个文件我循环遍历它们并按照以下简单步骤操作：**

**-**在服务器端打开`ServerSocket`。

**-**`Socket`在客户端创建。使用 连接到服务器`bind`。

**-**`getOutputStream`在 Socket 上使用方法获取输出流。

**- 将您的文件写入输出流**。// 最重要的部分（使用`FileInputStream`, `BufferedInputStream`）

**-**关闭插座。

# android - 连接恢复时的 iOS 通知

> ID：13331732
> 
> 赞同：0
> 
> 时间：2012-11-11T13:53:06.647
> 
> 标签：android, ios, xmpp, push-notification, messaging

我正在为信使应用程序开发消息队列。在 Android 上，如果连接丢失，消息会保存在队列中，一旦 3G 或 wifi 恢复，消息就会退出队列。这是可能的，因为我正在收听广播接收器，它会在连接恢复时提醒我。

iOS上有类似的东西吗？iOS上有什么解决方法可以实现这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:10:00.727

[您可以通过Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类确定 Internet 连接的恢复。一旦 Reachability 告诉您您再次有 Internet 连接，您就可以尝试重新发送。

# vb.net - Visual Studio 添加参考 - UAC 路径

> ID：13331735
> 
> 赞同：-2
> 
> 时间：2012-11-11T13:53:25.500
> 
> 标签：vb.net, visual-studio-2008

我已阅读以下网页： http: [//msdn.microsoft.com/en-us/library/ee817675.aspx](http://msdn.microsoft.com/en-us/library/ee817675.aspx)，我对以下部分感兴趣：“仅在必要时使用文件引用”

该部分似乎建议您可以在服务器上添加对 DLL 的引用。我的开发 PC 上有 Oracle.DataAccess 版本 11，实时服务器上有版本 10。部署应用程序很痛苦。

网页说项目文件应该包含一个“参考”节点，但是当我右键单击一个项目文件并使用 TextPad 打开时，只有一个 ItemGroup (http://msdn.microsoft.com/en-us/库/646dk05y%28v=vs.90%29.aspx) 节点。因此我有两个问题：

```
1) Where can I find the References node as stated on the webpage?
2) Is it possible to reference an assembly using the UAC path instead of a local path? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:19:44.420

引用的项目从 MSBuild 2.0 开始放在 ItemGroup 中，第一个链接从 Visual Studion .NET 到 .NET 1.0/1.1 已经过时。

```
<ItemGroup>
    <!-- ... -->
    <Reference Include="System" />
    <Reference Include="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
        <Private>True</Private>
        <HintPath>..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll</HintPath>
    </Reference>
    <!-- ... -->
</ItemGroup> 
```

对于第二个问题，如果您的意思是 UNC 路径，我认为是的。

# bison - 这个简单的 Lex 示例有什么问题？

> ID：13331737
> 
> 赞同：1
> 
> 时间：2012-11-11T13:53:46.563
> 
> 标签：bison, lex

Heloo EveryBody，我有一个 lex 语言的简单代码，我尝试通过“bison -d hello.l”运行它，但出现错误！我收到以下错误。

有人可以让我知道我错了吗？

```
bison -d hello.l

hello.l:4.1-5: syntax error, unexpected identifier 
```

代码：

```
%{
#include <math.h>
%}
DIGIT    [0-9]
ID       [a-z][a-z0-9]*

%%

     {DIGIT}+    {
                 printf( "An integer: %s (%d)\n", yytext,
                         atoi( yytext ) );
                 }

     {DIGIT}+"."{DIGIT}*        {
                 printf( "A float: %s (%g)\n", yytext,
                         atof( yytext ) );
                 }

     if|then|begin|end|procedure|function        {
                 printf( "A keyword: %s\n", yytext );
                 }

     {ID}        printf( "An identifier: %s\n", yytext );

     "+"|"-"|"*"|"/"   printf( "An operator: %s\n", yytext );

     "{"[\^{}}\n]*"}"     /* eat up one-line comments */

     [ \t\n]+          /* eat up whitespace */

     .           printf( "Unrecognized character: %s\n", yytext );

     %%

     int main( int argc, char **argv )
         {
         ++argv, --argc;  /* skip over program name */
         if ( argc > 0 )
                 yyin = fopen( argv[0], "r" );
         else
                 yyin = stdin;

         yylex();
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:01:35.870

您正在尝试使用 bison 编译 (f)lex 输入文件。使用 yylex 或 flex。

编辑：好的，进一步的问题（我试图编译你的代码）：

1.  规则必须从行首开始，前面没有空格（删除第 9、14 行等开头的空格）。

2.  `%option noyywrap`在文件开头添加。

3.  用 . 编译文件`flex filename.l`。

4.  然后编译生成的 .c 文件。您不需要额外的标题。

# php - 相对路径和'fopen'

> ID：13331740
> 
> 赞同：0
> 
> 时间：2012-11-11T13:54:18.220
> 
> 标签：php

我正在编写一个简单的输出缓冲缓存引擎。

以下是让我陷入困境的代码摘录：

```
//...

function cache_page($content) {
    $handle = fopen('./folder/cache_file','w');
    //...
}

//...

ob_start('cache_page'); 
```

奇怪的是，当我使用像 './folder/cache_file' 这样的相对路径时，fopen 失败，返回 false。当使用像“C:/foilder/cache_file”这样的完整路径或文件名“cache_file”时，一切都很好。

这个问题似乎与`ob_start`处理函数调用（在这种情况下为 cache_page）有关。当然，当我放在`$handle = fopen('./folder/cache_file','w')`其他地方时，例如，就在 , 之后`ob_start`，`fopen`使用上面的相对路径成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:01:17.467

这取决于“应用程序路径”。您的脚本在哪个文件夹中执行， 的值是`ROOT_PATH`多少？

你试过`fopen('folder/cache_file','w');`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:03:13.297

所以当你使用`C:/folder/cache_file`or时它会起作用`cache_file`？这意味着您正在执行脚本`C:/folder/`。`./folder/cache_file`在 in 时使用相对路径`C:/folder/`意味着完整路径是`C:/folder/folder/cache_file`.

*相对*意味着相对于*当前工作目录*。

# android - 缩放 ImageView 以及 Image

> ID：13331742
> 
> 赞同：0
> 
> 时间：2012-11-11T13:54:19.647
> 
> 标签：android, imageview, scale, pinchzoom

目前，我有一个 XML 文件，其中包含许多可以使用导航按钮滚动的图像视图。这些图像视图可以旋转、滚动和移动，但是当它们出现时，它们会离开图像视图的边界，因此您无法看到它们的一部分或全部。

有什么方法可以以与缩放图像相同的速度以编程方式调整图像视图的大小？

或者，有没有一种方法可以将图像绘制到画布上，并且每个图像都可以单独缩放？

# javascript - OnMouseOver 基本事件不起作用

> ID：13331747
> 
> 赞同：0
> 
> 时间：2012-11-11T13:54:48.313
> 
> 标签：javascript

我正在尝试仅使用 JavaScript 创建“悬停”效果。我知道这可以通过 css 完成，但我是 javascript 新手，我正在尝试使用 onmouseover 事件进行练习。我的大部分代码都在下面工作，除了 onmouseover 事件。我要做的是在悬停时更改具有“条纹”类的表中每一行的背景颜色。然后将它改回原来的背景颜色onmouseout。

```
 //Code below not working 
                    rows[i].onmouseover.style.backgroundColor = 'green'; 
```

我也试过：

```
rows[i].onmouseover.className+='addBg'; 
```

这没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:56:00.893

改变

```
rows[i].onmouseover.style.backgroundColor = 'green'; 
```

到

```
rows[i].onmouseover = function() {
    this.style.backgroundColor = 'green';
} 
```

# java - 除了setvisible之外如何关闭jframe

> ID：13331750
> 
> 赞同：0
> 
> 时间：2012-11-11T13:55:14.763
> 
> 标签：java, user-interface, jframe

我想使用命令 new form2().show, this.setVisible(false) 从 form1 调用 form2。我想问如何在不使用 setvisible() 的情况下关闭 form1。因为 setVisible 只是隐藏它而没有关闭程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:57:45.557

**-**`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE)`当您使form2可见时，您可以使用方法关闭form1。

# java - 在 linux 机器上更新 JDK

> ID：13331752
> 
> 赞同：0
> 
> 时间：2012-11-11T13:55:41.797
> 
> 标签：java, linux, ubuntu, openjdk, xubuntu

我确定这只是我缺乏 linux 经验，但我似乎无法弄清楚。我正在使用 XUbuntu，我安装了 JDK6，全屏问题真的开始困扰我，所以我想升级到版本 7。我试过在软件中心安装它，我试过 'sudo su apt-get install openjdk（无论软件包名称的其余部分是什么），我尝试过使用软件包管理器，我什至卸载了第 6 版，然后安装了它，还有一些我最终仍然使用第 6 版。对不起，我知道我可能遗漏了一些完全明显的东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:02:05.807

当您的机器中有多个 java 版本时，您可以使用以下命令来更改您需要的版本。

```
/usr/sbin/alternatives --config java 
```

这将要求您选择一个数字，并且数字包含属于它的版本。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:02:06.447

试试这些命令：

```
$ java -version
$ which java 
```

您会发现您当前使用的是哪个版本的 JDK。也就是说，安装新版本的 JDK 并确保它首先出现在您的 PATH 环境变量中，即像这样更新 PATH：

```
export PATH=</path/to/new/jdk>:<current PATH> 
```

要使其永久化，请更新 .bash_profile 或 .profile 文件。再次运行上面提到的语句现在应该会为您提供新版本的 JDK。

# java - 更换 JLabel 的 ImageIcon

> ID：13331753
> 
> 赞同：0
> 
> 时间：2012-11-11T13:55:49.400
> 
> 标签：java, swing

我正在尝试在摇摆中实现播放/暂停按钮。我像这样启动 JLabel：

```
PlayLabel = new JLabel(new ImageIcon(playPNG));
PlayLabel.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent arg0) {
                PlayLabel.setIcon(new ImageIcon(pausePNG));
            }
        }); 
```

所以这很好用。单击`PlayLabel`imageSource 后会更改。但在我的暂停方法中，这不起作用：

```
private void doPause()
    {
        System.out.println("PAUSED");
        player.pauseCurrentTrack();
        PlayLabel.setIcon(new ImageIcon(playPNG));
    } 
```

此 JLabel 不会将其 ImageIcon 转回`playPNG`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:20:10.363

[`JToggleButton`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)在这种情况下可能更合适。该`setIcon()`方法应该按照您的建议工作。作为参考，此[示例](https://stackoverflow.com/a/12228640/230513)`List<JToggleButton>`从不断变化的 中更新 a 中的每个按钮`List<Icon>`。它可能会提供一些见解或形成您[sscce](http://sscce.org/)的基础。

![图片](../Images/d5b31743d3c340437df9eb70123bfafd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:34:12.690

以下示例向您展示了您想要执行的操作，但使用的是文本而不是图标。该程序切换图像、文本或您显示的任何内容。

如果您使用 JLabel 的原因是因为您想要一个平面按钮，您可以添加代码：

```
 private void makeButtonFlat(final JButton makeMeAFlatButton) {
        makeMeAFlatButton.setOpaque(false);
        makeMeAFlatButton.setFocusPainted(false);
        makeMeAFlatButton.setBorderPainted(false);
        makeMeAFlatButton.setContentAreaFilled(false);
        makeMeAFlatButton.setBorder(BorderFactory.createEmptyBorder());
    } 
```

并从

```
 public void makeLayout() {
        makeButtonFlat(playButton);
        add(playButton);
    } 
```

然后它将看起来像一个 JLabel，但充当一个按钮，这更合乎逻辑。

![运行程序](../Images/5074792213b86901b139c2fe0f1610bc.png)

代码片段：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Playful {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Playful");
                JPanel playPanel = new PlayPanel();
                frame.getContentPane().add(playPanel, BorderLayout.CENTER);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(400, 250));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    static class PlayPanel extends JPanel {

        enum State {
            PLAY,
            PAUSE;

            public State toggle() {
                switch (this) {
                    case PLAY:
                        return PAUSE;
                    case PAUSE:
                        return PLAY;
                    default:
                        throw new IllegalStateException("Unknown state " + this);
                }
            }
        }

        private State state;
        private JButton playButton;
        private ActionListener playActionListener;

        PlayPanel() {
            createComponents();
            createHandlers();
            registerHandlers();
            makeLayout();
            initComponent();
        }

        public void createComponents() {
            playButton = new JButton();
        }

        public void createHandlers() {
            playActionListener = new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            toggleState();
                        }
                    });
                }
            };
        }

        public void registerHandlers() {
            playButton.addActionListener(playActionListener);
        }

        public void makeLayout() {
            add(playButton);
        }

        public void initComponent() {
            state = State.PAUSE;
            updatePlayButton();
        }

        private void toggleState() {
            state = state.toggle();
            updatePlayButton();
        }

        private void updatePlayButton() {
            playButton.setText(state.name());
        }
    }
} 
```

# sharepoint - Sharepoint 2010 编程，如何开始（许可）

> ID：13331755
> 
> 赞同：0
> 
> 时间：2012-11-11T13:56:02.547
> 
> 标签：sharepoint, sharepoint-2010

我有一个问题：我想开始编程，`Sharepoint`我想我可以在 Sharepoint 2010 Foundation、Sharepoint 2010 Client... 等下载一些指针，这样我就可以学习为`Sharepoint`.

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-26T16:12:07.253

如果你想安装 Sharepoint 2010 Foundation，你应该阅读这篇文章：

[https://msdn.microsoft.com/en-us/library/office/ee554869(v=office.14).aspx](https://msdn.microsoft.com/en-us/library/office/ee554869(v=office.14).aspx)

它对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T11:29:37.243

首先，我建议您在 O365 上创建自己的 SharePoint 试用站点，这样您就不必在 Premises 上安装。然后，制作可以快速学习的视频教程。适应后，您可以安装 SharePoint on Premises。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:37:25.967

目前，您可能更适合使用 SharePoint 2013，但这并不重要。

从 WPI（Web 平台安装程序）安装 SharePoint 2010 Foundation 或 2013 Foundation。如果您还没有 Visual Studio，也可以从 WPI 安装它。

使用服务器操作系统，可以在 Windows 7 中运行 SharePoint，但我不建议初学者使用它。在这种情况下，您必须拥有 64 位企业版或 win 7 终极版。如果您坚持使用win7，这里是有关如何执行此操作的官方文档。[http://msdn.microsoft.com/library/sharepoint/ee554869(v=office.14](http://msdn.microsoft.com/library/sharepoint/ee554869(v=office.14) )

当谈到如何开始进行 SharePoint 开发时，Youtube 是您的朋友。浏览、查看、阅读。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T05:10:35.203

如果您想安装 SharePoint 2010，请先将其安装在您的虚拟机中，我建议您使用“真实世界 SharePoint 2010：22 位 MVP 不可或缺的经验”一书的第一章。它包含有关如何安装 SharePoint 2010 的信息。

微软免费提供 Windows Server、SharePoint Server、Sql Server 等所有相关软件，试用期为 180 天。您唯一需要投资的就是购买好的硬件。您可以从这里下载 sp2010 的评估版：http: [//www.microsoft.com/en-us/evalcenter/evaluate-sharepoint-server-2010](http://www.microsoft.com/en-us/evalcenter/evaluate-sharepoint-server-2010)

要创建虚拟机，您可能需要下载 VMware Player，它是 VMware, Inc. 免费提供的虚拟化软件包。

如果您不想花时间安装 SharePoint，您可以使用 cloudshare 或微软自己的 windows azure 之类的东西。

YouTube 上有大量关于 SharePoint 的视频，可帮助您了解 SharePoint 2010 的基础知识并开始在 SharePoint 2010 上进行编程。

问候，
海伦·贡迪亚

# jakarta-ee - 为什么更喜欢 JNDI 查找而不是有状态会话 bean 的 EJB 注入？

> ID：13331756
> 
> 赞同：4
> 
> 时间：2012-11-11T13:56:04.317
> 
> 标签：jakarta-ee, ejb-3.0, jndi, stateful-session-bean

我对 Java EE 很陌生，我不明白为什么我应该更喜欢 JNDI 查找而不是有状态会话 bean 的注入？（这就是我在关于它的课程幻灯片上读到的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T14:32:40.137

通常，当您处于不支持注入的上下文中时，会进行 JNDI 查找。

如果您处于这种情况，仍然有几个原因。一种是当您要注入的 bean 将被序列化时，并且在反序列化后不知道如何再次重新注入（在客户端上使用状态时，JSF 本机托管 bean 会发生这种情况）。

这最后一个原因可能就是老师心目中的原因。有状态会话 bean 可以被钝化（之后它们将被序列化），并且在某些情况下您可能不希望注入的资源也被序列化。在这种情况下，您不会将资源存储在实例变量中，而是会在每次需要时从 JNDI 请求一个新的。

另一个原因是，使用 JNDI，您可以以编程方式决定检索哪个 bean，但这并不特定于有状态会话 bean，并且适用于任何地方的所有类型的注入。

请注意，以上主要是关于注入 INTO 有状态会话 bean。正如上面的 Miljen 正确指出的那样，还有将有状态会话 bean 注入某物的问题。如果您没有为 SFSB 分配范围（通过 CDI 的 @SessionScope、@RequestScope 等），那么注入 Servlet 或其他共享资源（如应用程序范围的托管 bean）将向所有用户公开相同的 SFSB，这是您最可能不想要的。

如果您不能使用 CDI（例如，您可能只是不知道它存在），那么通过 JNDI 获得 SFSB 是一种解决方法。如果您想让状态保持比单个方法调用更长的时间，那么您将不得不将它存储在某个地方，例如在 HTTP 会话中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T14:35:53.467

假设您正试图在例如servlet 中获取SFSB 的引用。你有什么选择？

a) 使用@EJB 注解注入 EJB

b) JNDI 查找

选项 a) 将为您提供相同的引用，该引用将在特定 servlet 的所有调用中共享。可能或绝对不是您想要的行为。选项 b) 是您的选择，因为您可以获得**每个请求的**新 SFSB 参考，并仅保留它直到您完成调用。

# ios - 如何在导航栏中为子视图设置动画？

> ID：13331758
> 
> 赞同：0
> 
> 时间：2012-11-11T13:56:18.017
> 
> 标签：ios, uinavigationcontroller

我的导航栏中有一个子视图。我尝试通过这种方式添加它：

```
 UIView *customView =
  [[UIView alloc] initWithFrame:
                  CGRectMake(0, 0, image.size.width + label.frame.size.width, 44)];
  UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
  [customView addSubview:imageView];
  [customView addSubview:label];
  [self.navigationController.navigationBar addSubview:customView]; 
```

但是，当我尝试推动导航栏时，customView 停留在原地，而不是跟随滑动导航栏动画。如何实现动画子视图？甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:07:07.903

当你使用

```
 [self.navigationController.navigationBar addSubview:customView]; 
```

这意味着您创建的导航栏位于 App 委托中，并且对于您项目中的所有 viewController 都是通用的，这就是为什么一旦您在其上添加视图，您就会在您拥有的每个视图上看到它。删除您的子视图

```
-(void)viewWillDisappear:(BOOL)animated{
[Your subview remove fromSuperView]; 
[super viewWillDisappear:YES];
} 
```

并将该子视图添加到

```
-(void)viewWillAppear:(BOOL)animated{
[self.navigationController.navigationBar addSubview:Your subview];

 [super viewWillAppear:YES];

} 
```

这将仅在该特定视图中添加子视图，并在弹出或推送该视图后立即将其删除。给出的代码与语法不正确，请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:34:02.557

您不应该以必须在**左侧、右侧或标题视图**
中指定视图位置的方式添加子视图

 **> self.navigationItem.titleView = YOURVIEW;

或以这种方式选择另一个位置左侧或右侧项目，如果您想将其删除，标题视图将添加到当前视图中，只需在您想要的位置将其设置为 nil 并再次重新加载子视图，

> self.navigationItem.titleView = nil;**

# jquery - 如何从markerclustererplus获取点击事件

> ID：13331760
> 
> 赞同：1
> 
> 时间：2012-11-11T13:56:34.837
> 
> 标签：jquery, user-interface, maps, markerclusterer

我在我的 jquery 脚本中实现了 markerclustererplus，如下所示：

```
$('#map_canvas').gmap({'streetViewControl':false,'mapTypeId': 'terrain'}).bind('init', function(evt, map) { 
    var mcOptions = {gridSize: 30, maxZoom: 15, ignoreHidden:true};
    $('#map_canvas').gmap('set', 'MarkerClusterer', new MarkerClusterer(map, $('#map_canvas').gmap('get', 'markers'),mcOptions));
}); 
}); 
```

到目前为止一切都很好。问题是：如果用户点击集群，我如何捕捉点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:54:13.063

除了其他两个 Cluster类`'click'`事件`'mouseover'`和`'mouseout'`. `markerclusterer.js`最新版本 2.0.15的文件中有一个错误。要让它触发`'click'`事件，请更改`markerclusterer.js`如下：

找到这一行：

```
google.maps.event.addDomListener(this.div_, "click", function (e) { 
```

在它下面改变这个：

```
var mc = cClusterIcon.cluster_.getMarkerClusterer();

google.maps.event.trigger(mc, "click", cClusterIcon.cluster_);
google.maps.event.trigger(mc, "clusterclick", cClusterIcon.cluster_); // deprecated name 
```

对此：

```
var c = cClusterIcon.cluster_;
var mc = c.getMarkerClusterer();

google.maps.event.trigger(c, "click", cClusterIcon.cluster_);
google.maps.event.trigger(c, "clusterclick", cClusterIcon.cluster_); // deprecated name 
```

而已！

不要忘记更改两个markerclusterplus 脚本（`markerclusterer.js`和`markerclusterer_packed.js`）。进行编辑后，您可以使用[UglifyJS](http://marijnhaverbeke.nl//uglifyjs)`_packed.js`重新创建版本，方法是剪切 n' 并将其粘贴到此站点中。我已经使用过它并且效果很好（原始的 30.6%）。

有关如何修复该脚本中的`'mouseover'`和`'mouseout'`事件的详细信息，请参阅我的其他[SO 帖子](https://stackoverflow.com/questions/14589958/how-come-the-mouseover-and-mouseout-events-for-markerclustererplus-js-are-not-fi)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T22:05:22.830

我用 jquery-ui-gmap 找到了这个解决方案。

```
var clusterer_ = $('#map_canvas').gmap('get', 'MarkerClusterer');

google.maps.event.addListener(clusterer_, 'clusterclick', function (cluster) {
   alert("cluster click event");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-02T02:56:22.637

使用 MarkerClustererPlus，只需将事件侦听器附加到 google maps`addListener`方法：

```
var markerCluster = new MarkerClusterer(map, markers, {options});

google.maps.event.addListener(markerCluster, "click", function (c) {
    console.log('Cluster Object:' + c)
}); 
```

# php - 在 PHP 循环中运行 jQuery AJAX 从 PHP 脚本中获取 HTML

> ID：13331765
> 
> 赞同：0
> 
> 时间：2012-11-11T13:56:58.827
> 
> 标签：php, ajax, jquery

我不得不再次问这个，对不起。所以我正在运行这个 jQuery 来滑动切换我的 PHP 循环输出中的跨度。我有一些 PHP 会生成一些对数据库的调用，以获取每个项目的更详细信息。

我知道到目前为止我已经得到了它对 PHP 脚本的调用。我可以看到返回的数据包带有从 PHP 文件回显的 HTML。但我很难让 jQuery 将返回的数据插入到指定的范围中。

这是循环项目的简化版本：

```
<span class="searchitem">

 <span style="visibility:hidden;" class="name">some name</span>

 <span class="btn">Details</span>

 <span class="itemdetails" style="display: none;">
   //hidden area to populate with returned ajax html from php script 
 </span>

</span>

<span class="searchitem">

 <span style="visibility:hidden;" class="name">another name</span>

 <span class="btn">Details</span>

 <span class="itemdetails">
   <div>
     <p>
     this is the area i need the html to populate
     </p>
   </div>
</span>

</span>................. 
```

这是我正在尝试运行的 jQuery。我知道一切都会成功。我无法从那里获取数据。

```
<script type="text/javascript">   
      var ajax_load = "<img src='images/loading.gif' style='width:50px;' alt='loading...' />"; 
      var loadUrl = "ajax/item_details.php";
      $(document).ready(function ()
              {
                    $('.searchitem').each(function () {

                    var itemname = $(this).find('.name').text();
                    var ename = encodeURI(itemname);
                    var requestUrl = loadUrl + ename;
                        $(this).find('.itemdetails').hide();
                        $(this).find('.btn').click(function ()
                        {
                            var returned = "";
                                $.ajax({
                                type: "GET",
                                url: loadUrl,
                                data: "name=" + ename,
                                dataType: "text",
                                error: function () { alert("error") },
                                success: function (data) { $(".ptavail").append(data); alert("successful") }
                                }); 
                    $(this).parent().find('.ptavail').html(ajax_load).slideToggle(1500).html(returned);
                        });
                    });
              });
</script> 
```

正如您从代码中看到的那样，我试图让点击功能设置一切关闭。我知道 PHP 文件正在接收调用并返回数据，但我一直试图让 jQuery 用返回的数据填充 .itemdetails。

这有什么问题？我是否需要将 AJAX 放入一个单独的函数中以使其行为符合我的需要，或者我是否需要使其同步才能工作？我试图基本上替换 .itemdetails spans 之间的所有内容，首先是一个加载符号，然后是用 AJAX 返回的数据......因为现在我收到错误警报，所以 ajax 调用有问题我知道它确实请求正确，PHP 返回结果，但让 AJAX 读取它们被证明是有问题的。

我可以看到标题中的内容类型是文本，那么如何让 AJAX 正确调用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:02:22.680

放`$(this).parent().find('.itemdetails').html(ajax_load).slideToggle(1500).html(data);`

在 Ajax 请求的“成功”部分内。

```
success: function(data) {
  $(this).parent().find('.itemdetails').html(ajax_load).slideToggle(1500).html(data);
} 
```

成功功能是说“当 Ajax 工作时，执行此操作”

# arm - 如何重置ARM Cortex A9的其他内核？

> ID：13331766
> 
> 赞同：0
> 
> 时间：2012-11-11T13:57:10.920
> 
> 标签：arm, boot, zynq

我想在主 CPU 中重置**Cortex A9 CPU**的其他内核，但我找不到如何重置它的说明。

我使用的是*Xilinx Device Zynq*，板子是*ZedBoard*。
我想在它上面运行一个多核实时操作系统，但我不能对其进行软件重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:37:38.927

Zynq [Datasheet](http://www.xilinx.com/support/documentation/data_sheets/ds190-Zynq-7000-Overview.pdf)说它有 Cortex-A9 MPCore。[MPCore TRM](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0407i/DDI0407I_cortex_a9_mpcore_r4p1_trm.pdf)有一些部分，例如 5.2.4。个别处理器软件复位，但文本仅给出硬件复位序列。

ARM 似乎不鼓励您要求的软件重置。但您也可以检查[Cortex-A9 TRM](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0388i/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:00:06.993

我不知道所有的 arm 内核，但我认为复位在内核的边缘，所以你需要询问你的 fpga 设计师或 xilinx 等。它可能是也可能不是寄存器，具体取决于实现。

# c++ - QDirIterator 迭代顺序

> ID：13331768
> 
> 赞同：3
> 
> 时间：2012-11-11T13:57:27.037
> 
> 标签：c++, qt, directory, iteration

我的应用程序正在使用 QDirIterator 遍历文件夹中的 .jpg 图像。它们被命名为page0、page1、page2 ... page10、page 11 ...等等。

问题是它正在以 page0、page1、page10、page11 等顺序搜索文件。我怎样才能改变这个？是否有正确排序文件的选项？

这是我的代码的一小部分：

```
QDirIterator it(directory, QDirIterator::Subdirectories);        
while (it.hasNext()) {

        qDebug() << it.filePath();

        if (it.filePath().contains(".jpg"))
        {
            string ImagePath = it.filePath().toStdString();

            Mat img= cv::imread(ImagePath,3);

            vectorMatchQuality.push_back(BestMatch(img, templ));

            vectPath.push_back(ImagePath);

        }

        it.next();
} 
```

我是 C++ 和 Qt 的新手。任何帮助，提示或答案表示赞赏:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T14:12:39.463

> ### [QDirIterator 类参考](http://doc.qt.io/qt-5/qdiriterator.html)
> 
> 不像`QDir::entryList()`,`QDirIterator`不支持排序。

您不能更改 QDirIterator 中元素的顺序。但`QDir::entryList()`也无济于事，因为它[仅支持一组特定的 sort oders](http://doc.qt.io/qt-5/qdir.html#SortFlag-enum)。

重命名文件要好得多。这样想：

```
图片0
图片1
图片2
图3
   ...
图 9
图片10
```

通常的字符串排序算法在两个字符串之间进行词法比较，其工作方式类似于

1.  取下一个符号
2.  如果没有下一个符号转到 5
3.  如果符号不同，那么
    *   如果第一个符号小于第二个返回 FIRST_LESS
    *   否则返回 FIRST_MORE
4.  如果它们没有区别转到 1
5.  如果第一个字符串仍然有符号返回 FIRST_MORE
6.  如果第二个字符串仍然有符号返回 FIRST_LESS
7.  返回相同

这就是为什么您将首先获得所有以零开头的文件，然后是所有以 1 开头的文件，依此类推：

```
图片0
图片1
图片10；因为 1 < 2
图片11；因为 1 < 2
图片12；因为 1 < 2
 ...
图片2
图片20；因为 2 < 3
图片21；因为 2 < 3
图片22；因为 2 < 3
 ...

```

解决此问题的最简单方法是更改​​文件名。否则，您必须编写自己的文件名解析器，它获取文件名，将其拆分为名称 + 编号并根据编号进行排序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-05T13:35:47.650

我知道这是一个老问题，但 Qt 5.13 的更新答案可能是将[QDir::SortFlag](https://doc.qt.io/qt-5/qdir.html#SortFlag-enum)与您的[QDir](https://doc.qt.io/qt-5/qdir.html)对象一起使用

示例用法是：

```
QDir dir(pathToDirectory);
dir.setSorting(QDir::SortFlag::DirsFirst | QDir::SortFlag::Name); 
```

这首先对目录进行排序，然后按名称对所有目录/文件进行排序；

希望能帮助到你。

# objective-c - 滚动表格时向核心数据发出获取请求

> ID：13331770
> 
> 赞同：0
> 
> 时间：2012-11-11T13:57:34.003
> 
> 标签：objective-c, ios, xcode, cocoa-touch, core-data

这是我在 cellForRowAtIndexPath 中调用的内容：

```
 NSManagedObjectContext *context = [[AppDelegate sharedAppDelegate] managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Favorites" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];

    NSPredicate *requestPredicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"(link like '%@')",articleLink]];
    [fetchRequest setPredicate:requestPredicate];

    [fetchRequest setFetchBatchSize:1];
    NSError *error = nil;
    NSUInteger count = [context countForFetchRequest:fetchRequest error:&error];
    NSLog(@"Count - %d", count);
    if (count == 0)
        return NO;
    else
        return YES; 
```

基本上它会检查我的模型中是否存在某个项目。非常有用，但我认为在这么短的时间内发出如此多的获取请求有什么问题吗？

电池管理有任何问题，每次调用时都会从磁盘读取吗？

有更好的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:27:32.657

您不想在滚动时进行提取。它会破坏你的滚动性能。

从您提到的代码中，您正在尝试根据是否已存储链接对单元格执行某些操作。

我可能会在加载视图控制器并将其存储在内存中时预先执行该操作，然后在滚动时检查该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:15:44.967

你正在做的事情有几个问题。首先，获取非常慢，因为它确实会从磁盘上的持久存储中读取。您的获取只会变得越慢，您的数据库越大，您的查询（您的 NSPredicate）就越复杂。

其次，您无法控制 cellForRowAtIndexPath 被调用的次数，您只能假设它在每个单元格可见时被调用一次，但它也可能在其他情况下被调用。您也无法控制用户如何使用您的 ScrollView，他可能会疯狂地滚动。该方法中的所有内容都必须尽可能高效并且不能减慢您的主线程，否则您的 ScrollView 将不断冻结，这对用户来说看起来很糟糕。

第三，您不断地分配和初始化新对象，在本例中是 NSFetchRequests，这很昂贵。缓存将极大地提高您的性能，如果可能，您应该始终尽量避免分配新对象。尽管这已经是一个不好的例子，但 fetchRequest 可以很容易地存储为全局变量，并在每次获取之前更改其谓词。

从代码中我可以看出，您似乎有一个名为 Favorite 的实体，其中包含一个链接、一个显示链接的 TableView，并且您希望根据该链接是否为收藏来更改有关您的单元格的某些内容。

您应该做的是在首次加载 ViewController 时获取所有收藏夹，将它们的所有链接存储在一个数组中，然后在 cellForRowAtIndexPath 中检查 articleLink 是否存在于该数组中。这样，您只有在用户滚动浏览您的 ScrollView 时才从内存中读取，并且您的性能将是最佳的。

# c# - 使用我的 c# 应用程序打开特定文件 - 比如使用 Word 打开 .doc 文件

> ID：13331771
> 
> 赞同：1
> 
> 时间：2012-11-11T13:57:36.090
> 
> 标签：c#, visual-studio-2010, file

您可以将*Windows*设置为使用 Word 或其他应用程序打开 .doc 文件。我如何创建这样的 ac# 应用程序，它可以处理，例如，如果我用该应用程序打开一个*.txt*文件？所以计划是：有一个*information.kkk*文件，它是一个文本文件，里面有一个数字。如果文件被它打开，我希望我的 c# 应用程序 ( *Visual Studio 2010 ) 接收该数字。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:19:28.840

在控制台应用程序中，在 Main 函数中使用 args 参数。第一个参数是打开文件的路径。

例如：

```
class Program
{
    static void Main(string[] args)
    {
        var filePath = args[0];

        //...
    }
} 
```

在 WPF 应用程序中使用 Application_Startup 事件：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    var filePath = e.Args[0];
    //...
} 
```

或使用环境类 - 在您的 .net 应用程序中的任何位置：

```
string[] args = Environment.GetCommandLineArgs();
string filePath = args[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:05:39.433

如果您使用应用程序（*exe 文件）打开**ddd.txt*，则*string[] Args*将包含两项：程序本身的路径和*ddd.txt*路径。以下示例代码向您展示了如何将*ddd.txt*文件放入*Form1*上的*textBox*中。非常感谢大家的帮助。

 ***```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public static class Environment
        {
        }
        public Form1()
        {
            InitializeComponent();
        }

    private void Form1_Load(object sender, EventArgs e)
    {
        string[] args = System.Environment.GetCommandLineArgs();
        string filePath = args[0];
        for (int i = 0; i <= args.Length - 1; i++)
        {
            if (args[i].EndsWith(".exe") == false)
            {
                textBox1.Text = System.IO.File.ReadAllText(args[i],
                Encoding.Default);
            }
        }
    }
    private void Application_Startup(object sender, StartupEventArgs e)
    {
        string[] args = System.Environment.GetCommandLineArgs();
        string filePath = args[0];
    }

}
public sealed class StartupEventArgs : EventArgs
{

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:03:57.477

```
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();            

// Set filter for file extension and default file extension 

dlg.DefaultExt = ".kkk"; 

dlg.Filter = "KKK documents (.kkk)|*.kkk"; 
```***

# google-maps-api-3 - 将图像动态添加到信息窗口

> ID：13331774
> 
> 赞同：1
> 
> 时间：2012-11-11T13:58:12.527
> 
> 标签：google-maps-api-3, infowindow

我想知道是否有人可以帮助我。

我正在使用下面的代码将图像加载到 HTML 页面上，该页面与当前的“位置”和“用户”ID 相关。

```
<div id="galleria">
                  <?php
                    $dirlist = getFileList($galleryPath, true);
                    $x = 0;
                    foreach($dirlist as $file) { 
                        if((preg_match("/\.jpg$/", $file['name'])) or (preg_match("/\.jpeg$/", $file['name'])) or (preg_match("/\.png$/", $file['name'])) or (preg_match("/\.bmp$/", $file['name'])) or (preg_match("/\.gif$/", $file['name']))) { 
                            echo "<img src='{$file['name']}' />"; 
                            $x = 1;
                        }
                    }
                    if ($x == 0) {
                        echo "<img src='images/noimage.jpg' />";
                    }
                    ?>
                </div> 
```

这很好用，但我在这两个方面遇到了困难。我试图只显示第一张图像并将该图像放在“信息窗口”而不是主页上。但我必须绝对诚实地说我什至不知道从哪里开始。我花了几天时间才达到这一点。

下面的代码是从创建标记和信息窗口的脚本中**提取的。**

```
downloadUrl("loadlocationfinds.php?locationid=<?php echo $lid?>", function(data) { 
            var xml = data.responseXML; 
            var markers = xml.documentElement.getElementsByTagName("marker"); 
            var bounds = new google.maps.LatLngBounds(); 
            for (var i = 0; i < markers.length; i++) { 
            var findid = markers[i].getAttribute("findid"); 
            var locationid = markers[i].getAttribute("locationid"); 
            var findosgb36lat = markers[i].getAttribute("findosgb36lat");
            var findosgb36lon = markers[i].getAttribute("findosgb36lon");
            var findcategory = markers[i].getAttribute("findcategory"); 
            var point = new google.maps.LatLng( 
            parseFloat(markers[i].getAttribute("findosgb36lat")), 
            parseFloat(markers[i].getAttribute("findosgb36lon")));
            var html = "<span class='h3 orange'><strong>" + 'Item Found: ' + "</strong></span><br>" + finddescription + "<br>"; 
            var icon = customIcons[findcategory] || {}; 
            var marker = new google.maps.Marker({ 
            map: map, 
            position: point, 
            title: 'Click to view details', 
            icon: icon.icon, 
            shadow: icon.shadow,
            formfindosgb36lat: findosgb36lat,
            formfindosgb36lon: findosgb36lon,
            formfindcategory: findcategory,
            }); 
            bounds.extend(point); 
            map.fitBounds(bounds); 
            bindInfoWindow(marker, map, infoWindow, html);
            google.maps.event.addListener(marker, "click", function() {
            document.getElementById('findosgb36lat').value = this.formfindosgb36lat; 
            document.getElementById('findosgb36lon').value = this.formfindosgb36lon; 
            document.getElementById('findcategory').value = this.formfindcategory; 
            }); 
            } 
            }); 
            } 

            function bindInfoWindow(marker, map, infoWindow, html) {     
            google.maps.event.addListener(marker, 'click', function() {         
            infoWindow.setContent(html);         
            infoWindow.open(map, marker, html);     
            }); 
            } 
```

我只是想知道是否有人可以看看这个并提供一些帮助，以便我只能显示“Infowindwow”中的第一张图片。

非常感谢和最亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:33:19.247

图像被添加到信息窗口的 html 中

IE

```
........................
var html = "<span class='h3 orange'><strong>" + 'Item Found: ' + "</strong></span><br>" +     finddescription + "<br>"; 
html+= "<img src=\"image.jpg\" alt=\"My Image\" height=\"Ypx\" width=\"Xpx\"><br>";
........................ 
```

其中**X**和**Y**是整数

![地图](../Images/7dbc78106a0aaa6d14dc2ae8b782a663.png)

# c - C++ 中的简单回显服务器和 UNIX 中的 C

> ID：13331776
> 
> 赞同：0
> 
> 时间：2012-11-11T13:58:34.380
> 
> 标签：c, unix, client, echo, echo-server

我编写了一个服务器，它从客户端获取消息并用它的字典（我的文件中有字典）中的单词来响应它们。例如：

```
Client wrote: cat
Server got: cat, Server wrote: miauuu! (and client can see the massege 
from server in his window) 
```

我的 dict.txt 文件如下所示：

```
cat
miauuu!
dog
raw,raw!
etc... 
```

我的代码有问题，因为我的服务器从客户端获取消息，但仍然无法向客户端发送消息...（在我的客户端窗口中，我看不到来自服务器的消息）。作为客户端，我使用 telnet。有任何想法吗？

我的意思是，我运行我的服务器：./server 9999 和 telnet：telnet 127.0.0.1 9999 并且可以向服务器发送消息（并且服务器可以看到它们）但是在 telnet 端我看不到来自服务器的任何消息（服务器似乎也发送一个空字符串（或者什么都没有，我真的不知道））

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <netdb.h>
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <map>
#include <string>
#include <iostream>
#include <fstream>
using namespace std;

map <string, string> dict;

void* clients_service(void * arg)
{
    int client_fd = *((int*)&arg), buffsize = 1024, bytes_num = 0;
    char buffer[1024];
    char word[1024];

    while(1)
        {
            if ((bytes_num = read(client_fd, buffer, buffsize)) == -1)
            {
                perror("read error");
                exit(1);
            }
            else if (bytes_num == 0)
            {
                fprintf(stdout, "connection closed.\n");
                break;
            }

            buffer[bytes_num] = '\0';
            fprintf(stdout, "Got: %s", buffer);
            string from_client(buffer);
            string to_client = dict[from_client];

            char buff[1024];

            strncpy(buff, to_client.c_str(), strlen(buff));
            buff[strlen(buff) - 1] = '\0';

            if ((write(client_fd, buff, strlen(buff))) == -1)
            {
                fprintf(stderr, "write error\n");
                close(client_fd);
                break;
            }

            fprintf(stdout, "I wrote: %s", buff);

        }
        close(client_fd);
}

void loadDictionary(map <string, string> &dict)
{
    dict.clear();
    ifstream file("dict.txt");
    string s1, s2;

    if(file.is_open())
    {
        while(file.good())
        {
            getline(file, s1);
            getline(file, s2);
            dict.insert(pair<string, string>(s1, s2));
        }
    }

    file.close();
}

int main(int argc, char **argv)
{
    int server_soc_fd, port, buffsize = 1024;
    char buffer[buffsize];
    struct sockaddr_in addr;
    socklen_t addrlen = sizeof(addr);
    loadDictionary(dict);

    if (argc < 2)
    {
        fprintf(stderr, "Use : ./server {port number}\n");
        exit(1);
    }

    port = atoi(argv[1]);
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;
    server_soc_fd = socket(AF_INET, SOCK_STREAM, 0);

    if(server_soc_fd < 0)
    {
        perror("socket");
        exit(1);
    }

    if(bind(server_soc_fd,(struct sockaddr *)&addr, addrlen) < 0)
    {
        perror("bind");
        exit(1);
    }

    if(listen(server_soc_fd, 10) < 0)
    {
        perror("listen");
        exit(1);
    }

    fprintf(stdout, "\nWorking...\n\n");

    while(true)
    {
        int client_soc_fd = accept(server_soc_fd, NULL, NULL);
        pthread_t thread;
        pthread_create(&thread, NULL, clients_service, (void*)client_soc_fd);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:12:40.543

这个：

```
char buff[1024];

strncpy(buff, to_client.c_str(), strlen(buff));
buff[strlen(buff) - 1] = '\0'; 
```

不会填`buff`。

```
char *strncpy(char *dest, const char *src, size_t n); 
```

`n`将字节从复制`src`到`dest`。

所以你最好这样做：

```
const char * cstr = to_client.c_str();
size_t len = strlen(cstr);
strncpy(buff, cstr, max(len, sizeof(buff)-1));
buff[len] = 0; 
```

甚至更好的做法：

```
const char * cstr = to_client.c_str();
size_t len = strlen(cstr);
if (!len)
  continue;

if ((write(client_fd, cstr, len) == -1)
{
  ... 
```

此外，您不应依赖`write()`一次写入所有数据。

所以你可以扩展它，像这样：

```
...
const char * cstr = to_client.c_str();
size_t len = strlen(cstr);

size_t lenWrittenTotal = 0;
while (lenWrittenTotal < len);
{
  ssize_t lenWritten = write(client_fd, cstr + lenWrittenTotal , len - lenWrittenTotal);

  if (lenWritten < 0)
  {
    perror("write");
    break;
  } 
  else if (lenWritten > 0)
  {
    lenWrittenTotal += lenWritten;
  }
  else
  {
    ... 
    break;
  }
};
... 
```

# c - 在 c 中实现流水线。最好的方法是什么？（在linux中自己的shell）

> ID：13331777
> 
> 赞同：2
> 
> 时间：2012-11-11T13:58:42.400
> 
> 标签：c, linux, pipeline

> **可能的重复：**
> [在 c 中实现流水线。最好的方法是什么？（自己的linux shell）](https://stackoverflow.com/questions/13331139/implementing-pipelining-in-c-what-would-be-the-best-way-to-do-that-own-linux)

我想不出任何在c中实现流水线的方法，它实际上会起作用。这就是我决定在这里写的原因。我不得不说，我了解 pipe/fork/mkfifo 是如何工作的。我见过很多实现 2-3 管道的例子。这很简单。我的问题开始了，当我必须实现 shell 时，管道数是未知的。

我现在所拥有的：例如。

```
ls -al | tr a-z A-Z | tr A-Z a-z | tr a-z A-Z 
```

我把这条线变成了这样的东西：

```
array[0] = {"ls", "-al", NULL"}
array[1] = {"tr", "a-z", "A-Z", NULL"}
array[2] = {"tr", "A-Z", "a-z", NULL"}
array[3] = {"tr", "a-z", "A-Z", NULL"} 
```

所以我可以使用

```
execvp(array[0],array) 
```

稍后的。

直到现在，我相信一切都好。当我尝试将这些功能的输入/输出重定向到彼此时，问题就开始了。

我的执行命令部分是这样工作的：

```
-change stdin to pipes_in
-change stdout to pipes_out
-exec(array[i], array) 
```

由于某种原因，它不起作用。我是这样做的：

```
 mkfifo("queue", 0777);

    for (i = 0; i<= pipelines_count; i++) // eg. if there's 3 pipelines, there's 4 functions to execvp
    {
    int b = fork();             
    if (b == 0) // child
        {           
        int c = fork();

        if (c == 0) 
        // baby (younger than child) 
        // I use c process, to unblock desc_read and desc_writ for b process only
        // nothing executes in here
            {       
            if (i == 0) // 1st pipeline
                {
                int desc_read = open("queue", O_RDONLY);
                // dup2 here, so after closing there's still something that can read from 
                // from desc_read
                dup2(desc_read, 0); 
                close(desc_read);           
                }

            if (i == pipelines_count) // last pipeline
                {
                int desc_write = open("queue", O_WRONLY);
                dup2(desc_write, 0);
                close(desc_write);                              
                }

            if (i > 0 && i < pipelines_count) // pipeline somewhere inside
                {
                int desc_read = open("queue", O_RDONLY);
                int desc_write = open("queue", O_WRONLY);
                dup2(desc_write, 1);
                dup2(desc_read, 0);
                close(desc_write);
                close(desc_read);
                }               
            exit(0); // closing every connection between process c and pipeline             
            }
        else
        // b process here
        // in b process, i execvp commands
        {                       
        if (i == 0) // 1st pipeline (changing stdout only)
            {   
            int desc_write = open("queue", O_WRONLY);               
            dup2(desc_write, 1); // changing stdout -> pdesc[1]
            close(desc_write);                  
            }

        if (i == pipelines_count) // last pipeline (changing stdin only)
            {   
            int desc_read = open("queue", O_RDONLY);                                    
            dup2(desc_read, 0); // changing stdin -> pdesc[0]   
            close(desc_read);           
            }

        if (i > 0 && i < pipelines_count) // pipeline somewhere inside
            {               
            int desc_write = open("queue", O_WRONLY);       
            dup2(desc_write, 1); // changing stdout -> pdesc[1]
            int desc_read = open("queue", O_RDONLY);                            
            dup2(desc_read, 0); // changing stdin -> pdesc[0]
            close(desc_write);
            close(desc_read);                               
            }

        wait(NULL); // it wait's until, process c is death                      
        execvp(array[0],array);         
        }
        }
    else // parent (waits for 1 sub command to be finished)
        {       
        wait(NULL);
        }       
    } 
```

谢谢。

# php - 用具有相同键的不同数组值替换内部数组值的PHP数组方法

> ID：13331778
> 
> 赞同：0
> 
> 时间：2012-11-11T13:58:55.310
> 
> 标签：php, arrays, multidimensional-array

我试图理解 PHP 数组方法，所以我更喜欢使用数组方法来解决这个问题。

这是我的数据：

```
$dataA =>
    array
      0 => 
        array
          'type' => string 'name' (length=4)
          'key' => string 'keywords' (length=8)
          'content' => string 'keywordA' (length=14)

$dataB =>
    array
      1 => 
        array
          'type' => string 'name' (length=4)
          'key' => string 'keywords' (length=8)
          'content' => string 'keywordB' (length=14) 
```

我想做的是合并两个数组，最后的`content`键是：

```
$finalData =>
    array
      0 => 
        array
          'type' => string 'name' (length=4)
          'key' => string 'keywords' (length=8)
          'content' => string 'keywordB' (length=14)
                               ^-- notice here that the content has changed based on the fact that 'key' for both is 'keywords' 
```

如您所见，最终的内容值来自$dataB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:02:39.427

制作 的副本`$dataB`，然后循环播放`$dataA`。如果在`$dataA`中找不到 的值`$dataB`，请将其添加到您的副本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:12:49.760

~~递归替换做你想要的~~

 ~~```
$finalData = array_replace_recursive($dataA, $dataB); 
```~~ 

对于这个特定的例子，加号运算符也会做你想做的事：

```
$finalData = $dataB + $dataA; 
```

~~但是您必须以不同的顺序指定参数。~~

没有这样的内置功能。您只需要一些东西来替换一个特定的键，只有当其他键相等时，它在第二个数组中才等效，此外在零索引的数组中有关联数组，您只需要在第二级比较项目。如果你描述后看它，你可能会注意到它不是每个人都需要的通用功能，因此它不包含在标准功能集中。

假设`key`每个数组的值是唯一的，这里是没有可见循环的解决方案：

```
$getKey = function($item){ return $item['key']; };
$keysA = array_map($getKey, $dataA);
$keysB = array_map($getKey, $dataB);
$finalData = array_values(array_replace_recursive(
    array_combine($keysA, $dataA), 
    array_combine($keysB, $dataB) 
)); 
```

# csv - 在斯坦福主题建模工具箱中读取 CSV 错误

> ID：13331780
> 
> 赞同：0
> 
> 时间：2012-11-11T13:59:05.177
> 
> 标签：csv, nlp, stanford-nlp, topic-modeling

我正在尝试使用斯坦福主题建模工具箱 (TMT) 来尝试主题建模 [0]。我是 Scala 初学者。但是，我似乎无法通过读取 CSV 文件来准备我的数据集。这是我的代码

```
import scalanlp.io._;

val source = CSVFile("pubmed-oa-subset.csv") ~> IDColumn(1);

println(source.data.size); 
```

这会引发以下错误

```
Stanford TMT\example-0-test.scala:6: error: not found: value IDColumn
val source = CSVFile("pubmed-oa-subset.csv") ~> IDColumn(1); 
```

同样，我在其他数据预处理功能（如 Tokenizer）上也遇到错误。这是代码

```
// Stanford TMT Example 0 - Basic data loading
// http://nlp.stanford.edu/software/tmt/0.4/

import scalanlp.io._;
val source = CSVFile("pubmed-oa-subset.csv") ;
println(source.data.size);

val tokenizer = {
  SimpleEnglishTokenizer()
 } 
```

这是上述代码收到的错误。

```
error: not found: value SimpleEnglishTokenizer
  SimpleEnglishTokenizer() 
```

我正在使用与 TMT 主页 [1] 上相同的 CSV 文件。此外，脚本和数据位于同一文件夹中。

问题是什么？我无法从 TMT 主页运行完全相同的测试示例。

[0] [http://nlp.stanford.edu/software/tmt/tmt-0.4/](http://nlp.stanford.edu/software/tmt/tmt-0.4/)

[1] [http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/pubmed-oa-subset.csv](http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/pubmed-oa-subset.csv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:12:13.527

我在运行演示时遇到了一个问题，但它与你的不同。我的问题是由 CSV 文件中的混乱字符引起的（[http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/pubmed -oa-subset.csv](http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/pubmed-oa-subset.csv)）。我在编辑器中以 UTF-8 格式打开 CSV 文件，并替换不可读的字符（它们表示为相同的符号），它运行正常。

您的问题似乎是缺少类文件或 CSV 文件格式错误。我不确定。但您可以尝试我的解决方案，我认为混乱的字符是从主页下载的 csv 文件中的常见问题。或者您可以检查可执行 jar 文件或 csv 文件的完整性。

如果上述解决方案不起作用。您可以在 stanford java nlp 邮件列表中询问。 [https://mailman.stanford.edu/mailman/listinfo/java-nlp-user](https://mailman.stanford.edu/mailman/listinfo/java-nlp-user)

# iphone - Xcode - 选择依赖的 TableView 列表

> ID：13331783
> 
> 赞同：1
> 
> 时间：2012-11-11T14:00:32.007
> 
> 标签：iphone, objective-c, ios, xcode

我想创建一个选择依赖项列表，但我不知道在我的应用程序中最好的方法是什么。

[选择依赖列表示例](http://farm9.staticflickr.com/8488/8175125633_fc4de9520b_z.jpg)

根据第一个列表中的用户选择，他们将获得另一个带有附加选项的列表。其他列表将包含不同的数据。在从列表选项中进行所有选择后，用户将看到最终表格视图，其中包含他们在此过程中选择的所有项目。

我正在考虑创建一个包含所有列表选项的 TableView。从 TableView 中仅选择一个项目会将用户移动到另一个 TableView，而另一个列表取决于他之前的选择。

不幸的是，通过这种方式，我最终会在我的故事板上拥有 13 个不同的 TableView 控制器，而且感觉不太对劲。

我确信必须有另一种更有效的方法来做到这一点，但我只是不知道如何。

请指教，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:23:43.800

`UITableViewDataSource`救援协议。它旨在解决这个确切的问题。你会写一个`UITableViewController`，然后`UITableViewDataSource`为每个列表换一个不同的。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

通常，与网络上的大多数示例一样， 的`datasource`属性`UITableViewController`设置为`self`。`UITableViewController`但这就是它存在的原因，因此当您只修改为表生成数据的方式时，您不必到处复制/粘贴代码。

根据您的数据集的“不同”程度，您甚至可能不需要单独`UITableViewDataSource`的`UITableViewDataSource`.

在高层次上，您的设计可能如下所示：

*   BookStoreTableViewController
*   BookListTableViewDataSource
*   作者列表表视图数据源
*   PublisherListTableViewDataSource
*   等等

这是显示不同列表的示例方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    BookStoreTableViewController *controller = [[BookStoreTableViewController alloc] initWithNibName:@"BookStoreTableViewController" bundle:nil];

    //This is where you'd need to put some logic to determine which datasource to use

    BookListTableViewDataSource *datasource = [[BookListTableViewDataSource alloc] init];
    datasource.listOfBooks = [bookstoreDictionary objectForKey:@"bookList"];
    controller.datasource = datasource;
    [datasource release];
    [self.navigationController pushViewController:controller animated:YES];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    [controller release];
} 
```

# c# - 如何连接两个不同的列表 两者都有相同的基类？

> ID：13331786
> 
> 赞同：4
> 
> 时间：2012-11-11T14:01:03.480
> 
> 标签：c#, generics, collections

我有一个`ItemChange<T>`看起来像这样的类：

```
public class ItemChange<T> where T : MyBase
{
    public DateTime When { get; set; }
    public string Who { get; set; }
    public T NewState;
    public T OldState;
} 
```

如您所见，它存储了一个对象的两个副本（`NewState`和`OldState`）。我用它来比较字段变化。

我现在正试图让它工作，我得到一个跨多个对象的更改列表，然后将几种不同类型的 T 列表连接到一个这样的数组中（注意：两者`Object1`和`Object2`派生自`MyBase`：

```
public IEnumerable<ItemChange<T>> GetChangeHistory<T>(int numberOfChanges) where T : MyBase
{
    IEnumerable<ItemChange<Object1>> obj1Changes= GetChanges<Object1>();
    IEnumerable<ItemChange<Object2>> obj1Changes= GetChanges<Object2>();
    return obj1Changes.Concat(obj2Changes).OrderByDescending(r => r.When).Take(numberofChanges);
} 
```

如您所见，我需要连接多种类型的更改，但随后我想获取最新的更改数量（由 定义`numberOfChanges`）

任何关于如何让下面的工作作为 Concat 行的建议都会给我一个编译器错误（我假设我必须以某种特殊的方式进行转换才能使其工作）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:51:46.460

我建议将基类添加到`ItemChange<T>`被调用的`ItemChange`. `ItemChange`可以声明When属性。然后很容易将列表内容转换`ItemChange`为 concat 和 order by 的基础。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace brosell
{

public class MyBase
{

}

public class ItemChange
{
    public DateTime When { get; set; }

}

public class ItemChange<T>: ItemChange where T : MyBase
{
    public string Who { get; set; }
    public T NewState;
    public T OldState;
}

public class Sub1: MyBase
{

}

public class Sub2: MyBase
{

}

   public class HelloWorld
   {
    public static void Main(string[] args)
    {
        List<ItemChange<Sub1>> listOfSub1 = new List<ItemChange<Sub1>>();
        List<ItemChange<Sub2>> listOfSub2 = new List<ItemChange<Sub2>>();

        var concated = listOfSub1.Cast<ItemChange>().Concat(listOfSub2.Cast<ItemChange>());

        var filtered = concated.OrderByDescending(ic => ic.When).Take(10);  

        Console.WriteLine("{0}", filtered.Count());
        }
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:39:27.377

您尝试做的事情是不安全的，因为 an`ItemChange<Object1>`和 an之间没有转换`ItemChange<Object2>`，当然也没有转换为任意`ItemChange<T>`的 。您可以尝试做的最好的事情是`ItemChange<MyBase>`，但类在 C# 中不是协变的，因此这是无效的：

```
ItemChange<MyBase> change = new ItemChange<Object1>(); 
```

因此，您不能将 an`IEnumerable<ItemChange<Object1>>`转换为`IEnumerable<ItemChange<Object2>>`。

但是，如果你为你的`ItemChange<T>`类创建一个接口，那么你可以安全地做到这一点：

```
public interface IItemChange<out T> where T : MyBase
{
    DateTime When { get; set; }
    string Who { get; set; }
    T NewState { get; }
    T OldState { get; }
}

public class ItemChange<T> : IItemChange<T> where T : MyBase
{
    public DateTime When { get; set; }
    public string Who { get; set; }
    public T NewState { get; set; }
    public T OldState { get; set; }
} 
```

然后，您可以将您的`GetChanges`和`GetChangeHistory`方法更改为：

```
private static IEnumerable<IItemChange<T>> GetChanges<T>() where T : MyBase { ... }

public static IEnumerable<IItemChange<MyBase>> GetChangeHistory(int numberOfChanges)
{
    IEnumerable<IItemChange<MyBase>> obj1Changes = GetChanges<Object1>();
    IEnumerable<IItemChange<MyBase>> obj2Changes = GetChanges<Object2>();
    return obj1Changes.Concat(obj2Changes).OrderByDescending(r => r.When).Take(numberOfChanges);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:16:18.293

这个怎么样？我不确定，因为我现在无法测试它。

```
public IEnumerable<ItemChange<T>> GetChangeHistory<T>(int numberOfChanges) where T : MyBase
{
    IEnumerable<ItemChange<MyBase>> obj1Changes = GetChanges<Object1>().Select(i => new ItemChange<MyBase>(){ When = i.When, Who = i.Who, NewState = i.NewState, OldState = i.OldState });
    IEnumerable<ItemChange<MyBase>> obj1Changes = GetChanges<Object2>().Select(i => new ItemChange<MyBase>(){ When = i.When, Who = i.Who, NewState = i.NewState, OldState = i.OldState });
    return obj1Changes.Concat(obj2Changes).OrderByDescending(r => r.When).Take(numberofChanges);
} 
```

它创建`ItemChange<MyBase>`from`ItemChange<Object1>`或的新实例`ItemChange<Object2>`。

根据您的使用情况，您可能希望添加`.ToList()`到 Linq 的末尾以提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T17:55:46.063

如果您定义了一个接口，该接口`IReadableItemChange<out T>`暴露了类型的只读属性`T`而不是该类型的字段，并且如果`ItemChange<T>`实现`IReadableItemChange<T>`了 ，那么`ItemChange<Derived1>`和`ItemChange<Derived2>`都会实现`IReadableItemChange<MyBase>`（顺便说一下，`IReadableItemChange<baseType>`对于任何`baseType`这样的`Derived1:baseType`和`Derived2:baseType`）。`ItemChange<T>`拥有一个接受`IReadableItemChange<T>`并从中复制数据的构造函数也可能会有所帮助。

# jquery - 使用 jquery 对数组中的项目使用 .toString() 时遇到问题

> ID：13331790
> 
> 赞同：0
> 
> 时间：2012-11-11T14:01:12.987
> 
> 标签：jquery, object-to-string

我遇到的问题是在使用 .toString() 时它不起作用，但是如果我用 jQuery ($) 包装该值，那么我会得到一个 jquery 对象。如果有一个解决方案可以同时使用 object.toString() 或获取 jQuery 对象中的值，那就太好了。

```
rows.each(function () {
    var val = $(this).attr('id');
    if ($.inArray(val, levels) == -1) {
        levels.unshift(val);
    }
});

$(levels).each(function (i, value) {

    for (var x = 0; x < 3; x++) {

        var tmp = value.toString();

        if (x == 1) {
            console.log("level 2: " + tmp.substring(0, tmp.lastIndexOf('-')));
        }
        else if (x == 2) {
            console.log("level 1: " + tmp.substring(0, tmp.indexOf('-')));
        }
        else {
            console.log("level 3: " + tmp.toString());
        }

        console.log(tmp);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:06:45.277

解决方案是使用`this`而不是`value`！

# php - 使用 youtube api 查找观看次数最少的视频？

> ID：13331795
> 
> 赞同：3
> 
> 时间：2012-11-11T14:01:42.477
> 
> 标签：php, youtube-api

我想知道是否有任何方法可以搜索只有 x 次或更多观看次数的视频。

我知道我可以返回与我的查询匹配的所有结果，并简单地过滤那些没有足够的结果，但这似乎是一种浪费。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-11T14:12:14.800

[https://developers.google.com/youtube/2.0/developers_guide_protocol](https://developers.google.com/youtube/2.0/developers_guide_protocol)

它可以通过确保它们与特定条件匹配来过滤结果集中的条目。例如，您可以使用此参数指定 API 应仅返回观看次数超过 20 次的视频条目，其中每个条目的观看次数在提要中的 XML 元素中标识。在这种情况下，该参数不一定会影响 API 为条目返回的数据字段数，但它会影响实际返回的条目数。

```
 GET https://gdata.youtube.com/feeds/api/videos?q=surfing&max-results=10 \
       &fields=entry[yt:statistics/@viewCount > 1000000] 
```

# jquery - jQuery：选择表格区域

> ID：13331808
> 
> 赞同：0
> 
> 时间：2012-11-11T14:03:02.703
> 
> 标签：jquery, select, html-table

我有一个场景，我想一次`td`从列表中选择一个 2 的区域

我有一张这样的桌子：

```
<tr>
    <td>R1:C1</td>
    <td>R1:C2</td>
</tr>
<tr>
    <td>R2:C1</td>
    <td>R2:C2</td>
</tr>
<tr>
    <td>R3:C1</td>
    <td>R3:C2</td>
</tr>
<tr>
    <td>R4:C1</td>
    <td>R4:C2</td>
</tr> 
```

例如，我想选择单元格`R1:C1`以及`R2:C1`是否将鼠标悬停在这两个之一上，以及当我悬停在其上时`R3:C1`，`R4:C1`它会选择单元格`R3:C1`和`R4:C1`.

所以基本上，它会威胁到一个有 4 行和 2 列的表，就像一个只有 2 行和 2 列的表

编辑：我想像一个一样连续威胁一组 x 单元格，以便我可以在其上应用事件侦听器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:34:32.930

例如，您可以使用类来选择正确的单元格

```
<tr>
<td class="group1">R1:C1</td>
<td>R1:C2</td>
</tr>
<tr>
<td class="group1">R2:C1</td>
<td>R2:C2</td>
</tr>
<tr>
<td class="group2">R3:C1</td>
<td>R3:C2</td>
</tr>
<tr>
<td class="group2">R4:C1</td>
<td>R4:C2</td>
</tr> 
```

和 jQuery 在悬停时更改背景

```
$('.group1').hover(
    function(){$('.group1').css('background-color','black');}, 
    function(){$('.group1').css('background-color','white');});
$('.group2').hover(
    function(){$('.group2').css('background-color','black');}, 
    function(){$('.group2').css('background-color','white');}); 
```

希望能帮助到你

# php - PHPflock() 非阻塞仍然阻塞为什么？

> ID：13331809
> 
> 赞同：3
> 
> 时间：2012-11-11T14:03:04.393
> 
> 标签：php, flock

我正在使用flock（）函数通过获取临时文件的锁定来检查脚本的另一个实例是否已经在运行，因此下一个实例应该检查文件是否未锁定，否则它会停止

```
<?php    
$fp = fopen("/var/tmp/your.lock", "w");
if (!flock($fp, LOCK_EX|LOCK_NB)) { // try to get exclusive lock, non-blocking
    die("Another instance is running");
} 

//my script 
sleep(10);
echo 'completed successfully'; 
```

当从不同的浏览器同时调用文件两次时，脚本可以正常工作，而如果我从同一个浏览器同时打开两个实例，它会等待，即第一个调用获取锁定，第二个调用等待锁定而不关闭

我知道可能有其他方法可以检查文件实例是否已经在工作，但他们中的大多数人会做某事然后撤消它，在我的用例中，脚本可能随时结束，因为它可能需要很长时间或超过内存限制或出于任何原因

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:30:26.477

问题是：

从浏览器使用相同的 url 调用相同的脚本两次将通过相同的进程和flock() 函数在进程层上非阻塞工作，导致第二个脚本等待

例如，调用 example.com/test.php 两次将导致两个请求在同一个进程上工作，而附加任何随机变量将为每个单个请求创建单独的进程，例如

```
example.com/test.php?rand=1
example.com/test.php?rand=2 
```

效果很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T14:06:19.893

从命令行运行相同的脚本两次。我愿意打赌它工作得很好。

您的浏览器可能会通过一次只允许一个连接到任何给定主机来限制与服务器的连接。您在不同浏览器中得到不同结果的事实表明这不是 PHP 问题，因为无论浏览器请求页面如何，PHP 都会执行相同的操作。

# vb6 - InvokeMember 单击 VB6 时出现运行时错误 438

> ID：13331811
> 
> 赞同：3
> 
> 时间：2012-11-11T14:03:10.937
> 
> 标签：vb6, error-handling, runtime, runtime-error

在 VB6 中，我无法单击`skip_ad_button`. 我收到运行时错误：

> 运行时错误 438：对象不支持此属性错误

有什么替代方法

```
WebBrowser1.Document.GetElementById("skip_ad_button").InvokeMember ("Click") 
```

在VB6中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:26:07.723

运行时错误告诉您您正在使用的对象之一没有您正在调用的方法。可能性是：

1.  WebBrowser1 没有 Document 属性
2.  文档没有 GetElementById 属性
3.  GetElementById("skip_ad_button") 返回的对象没有 InvokeMember 属性

如果不知道您确切的对象结构，就很难给出明确正确的答案。阅读[此页面](http://msdn.microsoft.com/en-us/library/aa752085%28v=vs.85%29.aspx)可能会给您一个起点，但您需要做一些研究。

# file - Automator：接受文件和压缩文件夹。警告尺寸

> ID：13331821
> 
> 赞同：0
> 
> 时间：2012-11-11T14:04:58.380
> 
> 标签：file, zip, detection, directory, automator

我的目标是编写一个用户友好的自动化服务，以通过电子邮件发送选定的文件和文件夹。

为了用户友好，我需要：

1.  检测输入类型。如果是文件，我会进行下一步。如果它是一个文件夹，我首先使用名称 folder_name.zip 对其进行压缩。

2.  现在，我只处理文件（文件夹的选定或压缩版本）。如果总大小小于一个常数（比如说 20MB），我会将全部内容添加到电子邮件中。如果没有，我会询问用户他/她是否真的想继续并根据他/她的回答采取行动。

3.  清理：删除任何创建的 zip 文件。

我被困在这个工作流程的几乎所有级别（检测输入中各个项目的类型。根据结果有条件地采取行动。总结所有项目的大小，有条件地对结果采取行动）。

我也可以有两个单独的操作，一个用于文件，一个用于文件夹，但我找不到“仅文件”输入类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:22:15.903

唔。

我为您创建了一个[服务工作流程](http://www.markosx.com/thecocoaquest/?attachment_id=393)。它是概念的证明。将文件添加到电子邮件的最后阶段由您完成。您还应该注意，没有检查应用程序/捆绑包的包。在 Mac 上将被视为文件，但在其他地方则被视为文件夹。

服务工作流程中发生了很多事情。（要**测试**Automator 中的工作流程，请添加一个“获取选定的查找器项目”作为第一个操作。但作为服务运行时它运行得更快）

但基本情况是：

服务接收选择：“finder”中的文件或文件夹

1、**运行苹果脚本。**

它获取选定的项目并将它们传递到一个检查大小的applescript，然后如果所有项目都大于20M，则显示一个对话框。（注意 du 命令似乎舍入了一些内容）。如果用户点击确定，那么我们继续。如果取消，工作流程将停止。如果小于 20M，则不会显示任何对话。它会继续前进。

2、**变量的设定值**

将完整列表存储在**存储**变量中并将其传递给下一个操作。

3、**过滤查找器项目**

'kind' 的过滤器是 'folder' 将结果传递给下一个操作。

4、创建存档。

我已将其保存在桌面上。但我建议您对用户临时文件夹执行此操作。

将结果传递给下一个动作。（ zip 文件的路径，如果有的话。）

5、**变量设定值**

将 zip 文件的路径存储在**存档**变量中（如果已创建） ***不要将其传递给下一个操作。***

6、**获取变量的值**

（不获取最后操作的结果。）获取**存储** 变量值。将结果传递给下一个动作。

7、**过滤查找器项目**

'kind' 的过滤器**不是**'folder' 将结果传递给下一个操作。

8、**变量设定值**

将**文件**列表存储在**files**变量中。……

从这里开始你有两个变量。 **文件** 和**存档**

您可以使用它们将他们引用的文件和压缩文件发送给您的电子邮件..

请记住，这只是一个概念证明。

干杯

# css - CSS 水平浮动宽度和超出其父宽度的链接

> ID：13331823
> 
> 赞同：0
> 
> 时间：2012-11-11T14:05:17.797
> 
> 标签：css, css-float

我正在尝试做一个可以与大多数 CMS 无缝集成的页脚，因此它使用列表项和其中的嵌套列表，菜单样式。我收到的设计具有带有连续灰色背景的顶级列表，而嵌套列表项仅位于它们下方，没有背景。

经过大量摆弄浮动和清除设置后，我设法想出了这个（现场演示：http: [//jsfiddle.net/mQqWX/](http://jsfiddle.net/mQqWX/)）。

这非常接近我的需要。问题在于，为了获得连续的顶部（较暗）灰色背景，我必须使链接具有 100% 的宽度。这导致锚的宽度超出了`li`承载它们的项目，当我`overflow: auto`对`li`项目进行操作时，我只是得到滚动条而不是扩展到锚的宽度。

这导致了最右边的问题，列表中的最后一项（事件）的圆形背景超出了包含边界`div`并`ul`进入“关于我们”链接（不应该有背景）。再次尝试`overflow: auto`只会给我滚动条。我在这两个元素上也都有 clearfix（带有 :after）。

我怎样才能使链接的宽度恰好是它们包含的宽度，`<li>`这样我就不会在我得到的右边出现溢出`width: 100%`？

如何制作包装器`<div>`并`<ul>`横向扩展以包含宽度，而不会出现那些讨厌的滚动条？

谢谢！

PS 这是我[之前的问题](https://stackoverflow.com/questions/13326663/css-nested-lists-width-and-height)的延续，经过大量试验和错误后取得了一些进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:09:00.070

给`box-sizing: border-box`的`a`。这样就解决了。但它在较旧的 IE 中不起作用。要使其工作，您可以`span`在`a`标签内添加一个。标签将`a`设置 100% 的宽度`span`，带有, 的`display: block`, 将有填充。

问题来自填充被添加到`width`. `width: 100%;`+`padding: 20px;`使得`width`实际上等于`100% + 20px + 20px`。这比你想要的要多。

`box-sizing: border-box;`告诉浏览器`width`始终保持 100% - 填充 + 边框 + 宽度 = 100% - 这就是我这些天使用的 - 我通过通用`*`选择器将它添加到所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:11:04.637

请记住：填充 + 宽度 = 真实显示宽度

因此，如果您设置 width:100% 和 padding-left:10px 假设父级具有 500px 的真实显示宽度将为 510px，这将启用滚动条，它的错误引导但它的 css

# haskell - 绑定/赋值运算符适用于返回 String 的函数，但不适用于返回 Int 的函数

> ID：13331825
> 
> 赞同：1
> 
> 时间：2012-11-11T14:05:42.167
> 
> 标签：haskell, ghc, ghci

为什么 Prog A 编译并运行良好，而 Prog B 编译失败？谢谢

**前卫A**

```
func :: String -> String
func a = a

mydofn a = do 
  x <- func a
  return x

main = print "Finished" 
```

**编B**

```
func :: Int -> Int
func a = a

mydofn a = do 
  x <- func a
  return x

main = print "Finished" 
```

**程序 B 编译错误：**

```
Couldn't match expected type `m0 t0' with actual type `Int'
In the return type of a call of `func'
In a stmt of a 'do' block: x <- func a
In the expression:
  do { x <- func a;
       return x } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:20:38.943

使用 do-notation，此代码：

```
mydofn a = do 
  x <- func a
  return x 
```

只是语法糖

```
mydofn a = func a >>= (\x -> return x) 
```

现在，`>>=`有 type `Monad m => m a -> (a -> m b) -> m b`，但在你的第二个例子中，应用程序`func a`有 type `Int`，它不能被统一`Monad m => m a`（因为`Int`它自己而不是 some ），这就是类型检查器告诉你的`m`（“不能匹配”）。但为什么这在第一种情况下有效？`m a``Int`

Haskell 中的字符串只是字符列表（`[Char]`）。[标准库](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#Monad)中有[一个如下所示的`Monad`实例`[a]`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#Monad)：

```
instance  Monad []  where
    m >>= k             = foldr ((++) . k) [] m
    return x            = [x] 
```

因此与(with and )`[Char]`统一，您的第一个示例变为`Monad m => m a``m = []``a = Char`

```
mydofn a = foldr ((++) . (\x -> [x])) [] (func a) 
```

或等效地

```
mydofn a = concat . map (\x -> [x]) $ func a 
```

这只是将字符串的每个字符映射到一个单例字符串（`"abc"`被映射到`["a", "b", "c"]`），然后将所有结果字符串连接在一起（`["a", "b", "c"]`变成`"abc"`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T14:15:44.560

在 prog A 中，您使用的是 list monad，因为`String = [Char]`. 没有 Int 单子！在编 A 中，

```
mydofn a = do 
  x <- func a
  return x 
```

相当于

```
mydofn a = [x | x <- func a] 
```

所以它实际上只是遍历列表的元素，没有改变任何东西。

在 prog A, `m0 t0`matches 中`[] Char`，您不能这样写`Int`，`m0 t0`这就是您在 prog B 中遇到错误的原因。

* * *

`mydofn`相当于_

```
mydofn a = do 
  func a 
```

which 等价于`mydofn a = func a`which 表示与 相同`mydofn a = a`。

为了澄清问题，我认为这是一个精简的例子。你还想做什么`mydofn`？

也许你的意思是

```
mydofn a = do 
  x <- return (func a)
  return x 
```

这将让它与 Int 一起工作，但我仍然不确定你的目的是什么。

# c# - 如何在 Azure 上创建计划任务

> ID：13331827
> 
> 赞同：0
> 
> 时间：2012-11-11T14:05:44.430
> 
> 标签：c#, azure

> **可能重复：**
> [推荐一个 C# 任务调度库](https://stackoverflow.com/questions/507247/recommend-a-c-sharp-task-scheduling-library)
> [Azure Task Scheduler](https://stackoverflow.com/questions/571439/azure-task-scheduler)

我想知道有没有一种方法可以创建计划任务。就像每天下午 6 点说的那样，我想检查数据库中的新条目并发送电子邮件通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:04:30.037

这是上周在 BUILD 2012 大会上展示的“最佳实践”方法： [http ://technet.microsoft.com/en-us/library/cc725745.aspx](http://technet.microsoft.com/en-us/library/cc725745.aspx)

有一些云服务/IaaS 视频讨论了这一点。

# mysql - 如果所有数据都相同，如何显示一次行

> ID：13331832
> 
> 赞同：0
> 
> 时间：2012-11-11T14:05:59.547
> 
> 标签：mysql, sql

我在下面有一个查询：

```
$questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, r.ReplyType, 
q.QuestionMarks, q.SessionId
FROM Answer an 
INNER JOIN Question q ON q.QuestionId = an.QuestionId and an.SessionId = q.SessionId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
GROUP BY an.SessionId, an.QuestionId
ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
"; 
```

现在下面是每个数据库表的样子：

会话表：

```
SessionId  SessionName
1          AAA
2          AAB
3          AAC 
```

问题表：

```
SessionId  QuestionId QuestionContent              ReplyId OptionId
1          1          Here is a single answer      2       1
2          3          Here is a single answer      2       1
3          3          Here is a single answer      2       1 
```

答案表：

```
AnswerId  SessionId QuestionId Answer
1         1         1          True
2         2         3          True
3         3         3          True 
```

回复表：

```
ReplyId  ReplyType
1        Single
2        Multiple 
```

选项表：

```
OptionId  OptionType
1         True or False 
```

现在我遇到的问题是，在数据库中，我有三个完全相同的问题，并且具有相同的答案、相同的分数、相同的选项类型等，都一样，这很好。但是在查询中我想要做的是，如果有多行的列都匹配，那么只显示一次。所以目前它在下面显示为查询输出：

```
Here is a single answer     True or False   1   True    Multiple    5   
Here is a single answer     True or False   1   True    Multiple    5   
Here is a single answer     True or False   1   True    Multiple    5 
```

但由于问题的所有细节都是相同的，它应该只显示一次，如下所示：

```
Here is a single answer     True or False   1   True    Multiple    5 
```

如果有多行数据完全相同，如何让查询显示该行一次？

**更新：**

```
 $questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, Answer, r.ReplyType, 
q.QuestionMarks
 FROM
(
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, r.ReplyType, 
q.QuestionMarks, q.SessionId
FROM Answer an 
INNER JOIN Question q ON q.QuestionId = an.QuestionId and an.SessionId = q.SessionId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
GROUP BY an.SessionId, an.QuestionId
)
AS tmpresult
ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:13:18.930

这可能是个疯狂的想法，但仍然值得一试，从主查询中创建一个子查询，然后使用 DISTINCT 从中进行另一个选择：

```
 SELECT DISTINCT {yourcolumns}
 FROM
 (
        your current code
 ) as tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:16:51.260

扩展您的`GROUP BY`子句以添加您想要将其视为行的列作为重复的内容，如下所示

```
GROUP BY an.SessionId, an.QuestionId, QuestionContent,  
         OptionType, q.NoofAnswers, Answer, q.QuestionMarks 
```

# javascript - Meteor.userId 是可变的

> ID：13331836
> 
> 赞同：22
> 
> 时间：2012-11-11T14:06:50.810
> 
> 标签：javascript, security, meteor

在玩 Meteor 时，我发现即使删除了不安全的包，客户端也可以更改 Meteor.userId 函数。例如，

```
Meteor.userId=function() {return "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"} 
```

可以使用`Meteor.default_connection.userId()`（重定向功能）来完成。我如何确保这一点？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-11T20:12:10.747

这是一个很好的问题，因为它展示了 Meteor 安全模型的工作原理。

这里没有安全问题，因为 Meteor*从不*信任客户端代码。

在 Meteor 中，只有服务器决定每个客户端可以访问哪些数据（请参阅[Meteor.publish](http://docs.meteor.com/#meteor_publish)）以及允许每个客户端更改哪些数据（请参阅[Meteor.allow](http://docs.meteor.com/#allow)）。当客户端向服务器进行身份验证时，服务器会存储用户的 ID。在该客户端注销之前，它会将该 ID 提供给您`Meteor.publish`并`Meteor.allow`在服务器上以`userId`.

Meteor 还会将用户 ID 发送到客户端，因为您当然想根据登录者更改客户端的行为方式和屏幕上的内容。正如您所说，我们无法阻止流氓客户端任意更改它的任何 JavaScript 代码都可以更改它认为的用户 ID！但是这样做并没有给客户端任何新的权限，因为仍然只有服务器代码做出安全决策。

您可以使用安全方应用程序进行尝试：

1.  制作派对应用程序`$ meteor create --example parties`
2.  创建一个用户帐户并双击地图以创建一个派对。选中该框以使其成为私人聚会。
3.  打开 JavaScript 控制台并键入`Meteor.userId()`以获取您的用户 ID。
4.  登出。该聚会将从屏幕上消失，因为服务器不会将其发布给任何其他用户。
5.  现在，进入控制台并`Meteor.userId()`使用返回所需 ID 的新函数进行覆盖。

所以现在你已经假装客户端认为它是你的用户。但是服务器知道得更好。屏幕上仍然没有派对，您无法更新派对收藏以更改该派对信息。

事实上，将客户端用户 ID 设置为您想要的任何内容都是完全安全的！您可以直接进入帐户系统并致电`Meteor.default_connection.setUserId("aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee");`。试一试，你会看到右上角的登录按钮变成了动画。那是因为客户端正在调用`Meteor.user()`以显示您刚刚设置的登录用户的电子邮件地址。但是因为您还没有以该用户身份登录到服务器，所以它不会发布有关该用户的任何信息，您只会得到 spinny。

**这是一个非常强大的安全模型。** 您不必担心任何客户端代码，即使在大多数应用程序中大部分代码都存在于此！只要您编写安全的服务器方法、发布函数和允许/拒绝规则，无论客户端尝试做什么，您都会完全被锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-14T22:39:45.940

`Meteor.userId`我刚刚使用两个浏览器测试了 Meteor，并在每个浏览器之间复制了本地存储`Meteor.loginToken`，他们都以同一个人的身份登录了我。当我退出其中一个时，我仍然可以在另一个中发布。

我认为这并不像人们所说的那样安全。

如果我可以复制这些值并且仍然被视为同一用户，即使我使用不同的浏览器，那么它根本不安全。

* * *

更新

经过反思...

我想可以在用户登录时记录用户的[IP 地址。](http://en.wikipedia.org/wiki/IP_address)然后，如果用户尝试访问并且 IP 地址不同，您可以要求他们再次登录。

# java - 不使用子类对象调用抽象超类的方法

> ID：13331837
> 
> 赞同：-2
> 
> 时间：2012-11-11T14:07:04.833
> 
> 标签：java, overloading

假设有一个抽象超类只有一个具有默认实现的方法。现在，子类正在扩展超类，它覆盖了超类的方法。

如何在不使用子类对象的情况下调用超类的方法？

```
public abstract class SuperClass
{
    public void test()
    {
      System.out.println("SuperClass test method called");
    }
}

public class SubClass extends SuperClass
{
    public void test()
    {
      System.out.println("SubClass test method called");
    }
}

public class CallAbstract
{
     public static void main(String[] args)
     {
        //How to Call abtract SuperClass test method without using sub class object?
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:12:04.583

使用另一个匿名类，您可以这样做：

```
public class CallAbstract
{
   public static void main(String[] args)
   {
      (new BaseClass(){ }).test();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:10:40.257

您需要另一个不覆盖该方法的**子类。**`test()`

```
public class OtherSubClass extends BaseClass {

} 
```

在你的`main`方法中：

```
OtherSubClass osc = new OtherSubClass();
osc.test(); 
```

或者像 Edwin Dalorzo 建议的那样使用匿名类。

# github - 如何预览 RDoc 文件？

> ID：13331839
> 
> 赞同：8
> 
> 时间：2012-11-11T14:07:14.080
> 
> 标签：github, rdoc

想在提交之前查看 RDoc README 文件在 Github 上的外观。如何在单个文件上运行 RDoc 并在浏览器中预览结果？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-11T15:01:34.293

Ruby 作为内置`rdoc`cli 将从`*.rdoc`文件生成 html 页面：

```
rdoc README.rdoc -o ./tmp/doc 
```

尝试`rdoc --help`了解更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-07T08:03:25.160

作为替代方案，您可以使用此[网站](http://markup.herokuapp.com/sample)预览 Markdown、RDoc、Textile ....

# codeigniter - base_url codeigniter 解决方案

> ID：13331840
> 
> 赞同：1
> 
> 时间：2012-11-11T14:07:21.740
> 
> 标签：codeigniter, web, base-url

我在代码点火器中使用基本 url，如下所示：

```
<a href="<?=base_url()?>../../includes/images/logo_fosss.png"> 
```

上面的代码运行正常。

但有时这段代码会报错，必须像这样更改代码：

```
<a href="<?=base_url()?>../../../includes/images/logo_fosss.png"> 
```

我在根目录中放置了一个“包含”文件夹（与应用程序和系统相同的位置级别）。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:51:04.070

**base_url()**应该用于*绝对*URL。

如果包含**../**，则说明 URL 是*相对*的。

我认为你的代码应该是这样的：

```
<a href="<?=base_url()?>includes/images/logo_fosss.png"> 
```

或像这样：

```
<a href="<?=base_url()?>/includes/images/logo_fosss.png"> 
```

确保您的**包含**文件夹位于 Codeigniter 安装的根文件夹中。

有关更多信息，请查看这篇文章：

[http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3)

# sql - 无法理解和解释 SQL 查询的结果

> ID：13331842
> 
> 赞同：0
> 
> 时间：2012-11-11T14:07:54.040
> 
> 标签：sql, database

考虑以下关系 A、B、C。有人能说出以下查询的输出吗？在AUB之后我无法解释它。请解释。

![在此处输入图像描述](../Images/1df40e17416ed54a9cbd6eb6ab9a088f.png)

**表 A**

```
Id   Name    Age
----------------
12   Arun    60
15   Shreya  24
99   Rohit   11 
```

**表 B**

```
Id   Name   Age
----------------
15   Shreya  24
25   Hari    40
98   Rohit   20
99   Rohit   11 
```

**表 C**

```
Id   Phone  Area
-----------------
10   2200   02  
99   2100   01 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:01:38.527

```
(A UNION B) JOIN C WHERE A.Id > 40 OR C.Id < 15 
```

对不起，我现在不能给你结果，因为我是从我的桌子上写的，我没有时间。我认为这将有助于您更好地理解它：[Relational Algebra and SQL](http://www.cs.sunysb.edu/~kifer/Courses/cse532/slides/ch5.pdf)

# c - 在嵌入式系统中永久分配内存

> ID：13331843
> 
> 赞同：0
> 
> 时间：2012-11-11T14:07:59.407
> 
> 标签：c, memory, embedded, busybox

我的要求很简单。我在嵌入式平台上运行 ubuntu。我想在内存中分配一些永久位置（我知道 DRAM 的起始地址）。我想要的只是操作系统不应该触及内存，我可以在该内存上执行自定义操作（例如收集一些统计数据并写入该位置）。

要求是：

1.  在内存中分配一些位置（操作系统分配了内存并将地址返回给我，这对我来说很好）。
2.  在操作系统运行之前，该位置应该存在。
3.  尺寸是一个参数。
4.  我想使用busybox devmem 类型的命令来读写这个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:52:41.270

您可以使用 bigphysarea 在启动时分配一些内存。大小可以在 linux 内核参数中提供，您只需附加如下内容：

```
bigphysarea=2 
```

其中 2 表示 2 页 (2*4K)

这将允许您分配一个连续的内存供您的驱动程序使用。

我不确定你想做什么，但请注意这种分配只能从内核模式访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:08:19.693

您可以将一些内存挂载到文件系统，例如[tmpfs](https://en.wikipedia.org/wiki/Tmpfs)，然后只操作分区上的文件。

例如，[http://www.cyberciti.biz/faq/howto-create-linux-ram-disk-filesystem/](http://www.cyberciti.biz/faq/howto-create-linux-ram-disk-filesystem/)

# iphone - 背景图像在 iPhone4 上无法正确呈现

> ID：13331846
> 
> 赞同：1
> 
> 时间：2012-11-11T14:08:12.930
> 
> 标签：iphone, ios, cocoa-touch, graphics

我有一个由我的设计师在 Photoshop 中创建的背景图像。我将它转换为 png-24，并有两个文件，一个用于 640 x 920 的视网膜显示，一个用于 320 x 460 的正常显示（我用@2x 正确命名）。

当我在 iPhone 4 上实现它时，它不能正确渲染（颜色要深得多），但是，当我把它放在 iPhone5 上时它工作正常。文件大小为 608 KB。任何人都知道可能出了什么问题以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:06:02.373

I wouldn't say that the size is a problem. Beeing a background image means it doesn't change over the life time of the app. Regarding the file size - you could play with the "Save for Web" option in Photoshop and watch for artifacts while you change the format/quality. PNG is great for images with transparency and according to Apple it is the optimal image format for the iPhone.

The color inconsistency between devices might be due to differences in display quality. You could try to fix it programmatically, but make sure to test it on a few devices. As for a easy workaround, in interface builder add a new view over you background image and set the transparency and color to your liking. Then set the view to hidden. Then, depending on the device (iPhone5, iPhone4) set your color view to visible [view setHidden:NO];

However I can't imagine that iPhone displays differ that much, so be careful if you really want to fix it programmatically.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T16:53:05.823

我真的尝试了很多来解决这个问题，并在上​​面使用了 DTS 票证。最后，这是因为 iPhone5 显示颜色更好，我无法修复它。

# sql - QSqlQuery 失败

> ID：13331848
> 
> 赞同：0
> 
> 时间：2012-11-11T14:08:25.380
> 
> 标签：sql, qt

```
 bool isOpen = database.open();
  QSqlQuery query(database);
  qDebug("is the database open %d",isOpen);

  bool result = query.exec("SELECT * FROM scales"); 
```

数据库是一个全局变量，它以另一种方法启动：

```
database = QSqlDatabase::addDatabase("QSQLITE", "first");
database.setDatabaseName("database.db");
bool result = database.open(); 
```

在这两种情况下，数据库都在打开（返回 true），但是当我运行查询时，它返回 false。我在终端中运行了相同的 SQL，它可以工作，所以 SQL 应该没有任何问题。那么为什么查询没有执行呢？

打印 lastError 后我得到 QSqlError(1, "Unable to execute statement", "no such table: scales")

这让我感到困惑，因为当我用命令行检查数据库时，它确实存在并且拼写正确。我唯一能想到的是它正在连接到不同的数据库文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:13:25.070

问题已解决：我将项目和调试文件夹移动到不同的路径，并且没有将 IDE 指向新文件夹，因此它一直引用旧的调试文件夹。一旦我将它指向正确的路径，它就可以正常工作。只有当我说查看@redmode 建议的路径时，我才发现错误。干杯所有GC

# playframework - 如何部署基于 Play Framework 的应用程序

> ID：13331851
> 
> 赞同：5
> 
> 时间：2012-11-11T14:08:40.537
> 
> 标签：playframework, playframework-2.0

我是 Play Framework (2.0.4) 的新手。我开发了一个小应用程序并在内置的播放框架 Web 服务器上本地运行它。现在我想将它部署在远程服务器（APPFOG.COM 或任何其他 Web 服务器）上。有人可以指导我如何远程部署它。

是否必须创建war文件，如果是，请指导我如何创建它并将其部署在远程服务器上。

如果有其他方法，请在这方面指导我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:14:50.387

最好看的地方是 Github 上的 Play 文档：[https ://github.com/playframework/Play20/wiki/Production](https://github.com/playframework/Play20/wiki/Production)

在本文档中，您将找到几种在多个提供商上部署应用程序的方法：

*   [独立](http://www.playframework.com/documentation/2.1.1/Production)
*   [Heroku](http://www.playframework.com/documentation/2.1.1/ProductionHeroku)
*   [云铸造](http://www.playframework.com/documentation/2.1.1/Deploying-CloudFoundry)
*   [云蜂](http://www.playframework.com/documentation/2.1.1/Deploying-to-CloudBees)

但是，如果您想在 servlet 容器中部署 Play2 应用程序（即作为战争），请查看[play2-war-plugin](https://github.com/dlecan/play2-war-plugin)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-09T04:38:30.007

您无需在应用服务器（如 tomcat）或使用 WAR 文件格式部署您的 play 应用程序。Play 已经自带了自己的捆绑服务器。

对于 Play 2.6 版：“Play 现在使用[Akka-HTTP](https://doc.akka.io/docs/akka-http/current/)服务器引擎作为默认后端。”

过去的版本默认使用[Netty 。](https://netty.io/)它仍然受支持，但必须显式配置。

要部署您的应用程序，您需要创建一个分发包以在您的项目主文件夹上运行：

`sbt dist`

创建二进制分发：“这会生成一个 ZIP 文件，其中包含在应用程序的目标/通用文件夹中运行应用程序所需的所有 JAR 文件。

要运行应用程序，请在目标服务器上解压缩文件，然后运行 ​​bin 目录中的脚本。脚本的名称是您的应用程序名称，它有两个版本，一个 bash shell 脚本和一个 windows .bat 脚本。”

这些是部署应用程序的步骤：

1.  创建分发包`sbt dist`
2.  生成您的应用程序秘密运行：`playGenerateSecret`
3.  在您的服务器中复制并解压缩包并运行应用程序的二进制启动脚本并将密钥作为参数传递：

`unzip my-first-app-1.0.zip`

`my-first-app-1.0/bin/my-first-app -Dplay.http.secret.key=abcdefghijk`

[在此处](https://www.playframework.com/documentation/2.6.x/Deploying)查看有关部署说明的更多详细信息。

您可能还想使用[SBT Native Packager](https://www.scala-sbt.org/sbt-native-packager/)研究其他部署格式，因为它为各种格式提供工件生成功能，包括：

*   OS X 磁盘映像
*   微软安装程序 (MSI)
*   RPM
*   Debian 软件包
*   RPM/Debian 软件包中的 System V / init.d 和 Upstart 服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T09:27:22.717

看看这个，如果您希望自动化您的 Play 应用部署，可能会有所帮助

[http://community.opscode.com/cookbooks/deploy-play](http://community.opscode.com/cookbooks/deploy-play)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-15T07:23:49.273

最近写了一篇文章，展示了使用 supervisor 和 monit 部署完整证明的可自重加载播放应用程序的步骤。

我写这篇文章是因为 play 部署文档在撰写本文时没有解决问题的方法，例如由于 tun 时间异常导致的失败或由于内存泄漏导致的应用程序挂起。Monit 是监控后台运行的进程的绝佳工具。 [http://www.ravinderpayal.com/Deploying-Play-Scala-application-into-production-by-Ravinder-Payal/](http://www.ravinderpayal.com/Deploying-Play-Scala-application-into-production-by-Ravinder-Payal/)

# c# - MVC 选择性模型验证

> ID：13331855
> 
> 赞同：1
> 
> 时间：2012-11-11T14:09:23.223
> 
> 标签：c#, asp.net-mvc, unobtrusive-validation, model-validation

在我的模型中，我有一个 HomeAddress 和 BillingAddress 类型为 location 的人：

```
class Person {
public Location HomeAddress { get; set; }
public Location BillingAddress { get; set; }
... other properties
}

class Location {
[Required]
public string ZipCode { get; set; }
... other properties
} 
```

我正在寻找一种优雅的方法来仅在必需的属性 HomeAddress 上验证“必需的”属性。我使用的是普通的 componentmodel 属性并内置了 MVC 的模型验证。所以我正在寻找的是一个属性，它将检查位置是否在 Person.HomeAddress 或 .BillingAddress 中，并且仅在第一种情况下验证。或者我应该改变我的设计并使绑定地址为 NULL，以防输入的信息不足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:22:32.830

一种选择是您可以在您的 Person 类中实现 IValidatableObject 。这将定义一个 MVC 将自动调用的 Validate 方法。然后，您可以以编程方式围绕所需的位置条目添加逻辑，并验证那里的字段.....

# c++ - C++/Linux：如何编写使用套接字的线程安全库？

> ID：13331858
> 
> 赞同：2
> 
> 时间：2012-11-11T14:09:49.537
> 
> 标签：c++, linux, multithreading, thread-safety, fork

我想在 Linux 下用 C++ 编写一个库，以帮助应用程序使用某种协议（实际上是 FastCGI）。该库将侦听套接字（TCP 或 Unix），接收请求，将它们转发给用户代码，并发送由所述用户代码生成的响应。

套接字上将有许多连接，每个连接将携带许多请求（可能同时 - 存在交错机制）。用户代码（使用库）很可能是多线程的，以便并行处理多个请求。

我希望我的库是健壮的，并且对用户代码做出尽可能少的假设/要求，包括使用的多线程类型。据我了解，`clone()`Linux 中的函数可以以几十种不同的方式分叉一个进程——有或没有共享内存、共享文件句柄等。如何实现多线程的决定应该留给用户。

这让我很困惑，因为库代码会突然发现自己`fork()`被编辑了，并且代码的多个副本可能会突然从同一个套接字读取并处理同一个请求。更糟糕的是——父进程可能会终止，只留下子进程，这反过来又会产生更多的子进程，甚至可能在不同的进程命名空间中——这是一团糟。

有哪些 Linux 工具可以帮助协调需要访问相同外部资源（套接字）的相同代码的所有副本？实现这种线程安全库的标准方法是什么？我必须自己选择一个线程模型并将其强加给我的图书馆的消费者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:41:24.357

不要直接使用`clone`（保留`clone`给线程库的*实现*`pthread`者，如）。不要使用很多`fork`-s （可能没有）。去使用`pthread`-s。

您可以查看[libonion](http://www.coralbits.com/libonion/)库的设计。它很小，实现了 HTTP 服务器协议，因此与您的目标非常相似。

^(`libonion`为用户提供各种模式来为请求创建或不创建线程。)

您可以使用类似于`libonion`-s 的选项来为每个 FastCGI 请求创建或不创建新线程。

您可能想要使用一些事件循环库，如[libevent](http://libevent.org/)或[libev](http://software.schmorp.de/pkg/libev.html)（围绕[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html) -ing 循环）。

在开始编码之前阅读好书，特别是[Advanced Linux Programming](http://advancedlinuxprogramming.com/)和一些关于[*Pthread*](https://computing.llnl.gov/tutorials/pthreads/) [-s](https://computing.llnl.gov/tutorials/pthreads/)[的教程。](https://computing.llnl.gov/tutorials/pthreads/)

 *此外，研究几个与您的目标相似的*免费软件库的源代码。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T15:01:50.253

冒着看似偏离正题的风险，我建议在**每个处理器的单个线程**上实现 fastcgi 。

原因：

1.  更健壮。
2.  避免与多线程相关的上下文切换开销，并保护您免受并发死锁等问题的影响。
3.  避免进程 fork() 成本（尽管加起来很轻）并保护您免于处理潜在的子僵尸进程以及其他令人头疼的问题。

这将使您可以选择使用以下方式实现 fastcgi 接口：

1.  **非阻塞同步 I/O**（[Reactor](http://en.wikipedia.org/wiki/Reactor_pattern)设计模式）：阻塞直到有读或写请求进来，将请求传递给适当的处理程序，然后阻塞直到下一个请求进来。
2.  **异步 I/O**（[Proactor](http://en.wikipedia.org/wiki/Proactor_pattern)设计模式）：将读写请求传递给 O/S 支持 I/O 完成事件的操作系统。在 Windows 上是[IO 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx) ，在 Linux 上是[epoll()](http://en.wikipedia.org/wiki/Epoll)之类的。*

# python - 错误：“未定义的变量：抽象”

> ID：13331859
> 
> 赞同：0
> 
> 时间：2012-11-11T14:10:21.177
> 
> 标签：python, pydev, abstract

我正在为在线课程扩展一些代码。有一堆抽象方法定义如下：

```
def aMethod(self):
    abstract 
```

代码执行正确，但 PyDev 报告以下错误：

`Undefined variable: abstract`

每次遇到抽象词时都会这样做。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:10:21.177

我认为这里发生的事情是原始开发人员通过尝试引用名为 的未定义符号将抽象方法硬塞到语言中`abstract`，如果调用该符号而不被覆盖，将导致运行时错误。

# ios - Facebook好友列表全选UIButton

> ID：13331861
> 
> 赞同：0
> 
> 时间：2012-11-11T14:10:23.603
> 
> 标签：ios, xcode, facebook

我在我的应用程序中集成了发送请求功能，它为您提供了可供选择的朋友列表。如何添加一个全选按钮来选择所有用户朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:28:49.240

您必须构建自己的朋友选择器版本才能自定义 UI。这意味着重新创建 UI，调用 API 来获取朋友列表和发送邀请。

# java - 如何在类中定义 java 方法？

> ID：13331862
> 
> 赞同：2
> 
> 时间：2012-11-11T14:10:25.540
> 
> 标签：java, class, methods

我真的希望有人能帮助我，因为我已经坐了几个小时看着这个问题，我认为这只是一个缺失的细节......但不确定。

我已经定义了一个三角形类，它应该采用 3 (x,y) 坐标，并从中计算边长、角和面积。该类如下所示：

```
 public class Triangle {
        private double x1, x2, x3, y1, y2, y3;
        double sideA, sideB, sideC;
        private double angleA, angleB, angleC;

        public Triangle(double x1, double y1, double x2, 
            double y2, double x3, double y3) {
        }

        public double getSideA() {
            return (Math.sqrt(Math.pow((x3-x2),2)+Math.pow((y3-y2),2)));
        }
    } 
```

现在我想在我的 Interaction 类中调用我的 getSideA 方法。我已经定义了我的坐标变量，它们从扫描方法中获取它们的值。我还定义了一个变量 sideA，我想从我的 getSideA 方法中获取值。这就是我的做法：

```
Triangle userTriangle = new Triangle(x1, x2, x3, y1, y2, y3);   

 userTriangle.getSideA = sideA; 
```

当我尝试编译 Interaction 类时，我收到以下错误代码：

```
Interaction.java:79: cannot find symbol
symbol  : variable getSideA
location: class Triangle
     userTriangle.getSideA = sideA;
                 ^ 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T14:13:23.457

分配和函数调用执行**不正确**。

```
sideA =  userTriangle.getSideA();
                               ^parens necessary when calling function

    <---------- (value assigned from right to left) 
```

**赋值从右到左进行。**

* * *

此外，您的班级中的私有变量**没有被设置**。你不会得到预期的结果。**在**构造函数中设置实例变量，使用

```
this.<pvt_var> = value_passed_to_constructor; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:13:57.487

鉴于 , `x1`, `x2`, `x3`,`y1`和`y2`是`y3`变量并且已经被赋值，你应该这样做：

```
Triangle userTriangle = new Triangle(x1, x2, x3, y1, y2, y3); 
double sideA = userTriangle.getSideA(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T14:14:30.213

在你的代码中，`getSideA`是一个函数，所以你不能只调用`userTriangle.getSideA`，你需要调用`userTriangle.getSideA()`

要么你想得到`sideA`，在这种情况下你应该写

```
sideA = userTriangle.getSideA() 
```

要么你想设置你的三角形`sideA`，在这种情况下你应该写一个`setSideA()`方法并像这样调用它：

```
userTriangle.setSideA(sideA) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T14:12:42.103

首先，编译错误，因为应该是

```
double sideA = userTriangle.getSideA(); 
```

你的构造函数也有问题。它应该是这样的

```
public Triangle(double x1, double y1, double x2, double y2, double x3, double y3)
    {
       this.x1 = x1;
       this.y1 = y1;
       this.x2 = x2;
       this.y2 = y2;
       this.x3 = x3;
       this.y3 = y3;

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T14:12:55.533

您必须在构造函数中设置 x1、x2、x3、y1、y2、y3。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-11T14:13:10.027

```
userTriangle.getSideA = sideA; 
```

应该

```
sideA = userTriangle.getSideA(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-11T14:13:29.870

`userTriangle.getSideA = sideA;`是不正确的

尝试这个：

```
double sideA= userTriangle.getSideA(); 
```

构造函数应该是：

```
public Triangle(double x1, double y1, double x2, double y2, double x3, double y3)
    {
       this.x1 = x1;
       this.y1 = y1;
       this.x2 = x2;
       this.y2 = y2;
       this.x3 = x3;
       this.y3 = y3;

    } 
```

# javascript - 按钮未点击或闪烁

> ID：13331865
> 
> 赞同：0
> 
> 时间：2012-11-11T14:10:45.957
> 
> 标签：javascript, mobile, button, titanium, event-listener

我正在制作钛中按钮的事件侦听器。当我调试代码时，它不会进入我在侦听器中实现的函数体。这是代码。

```
Titanium.UI.setBackgroundColor('#000');

var win = Ti.UI.createWindow({
     backgroundColor:'#ccc',
     title:'Android Cloud Push Notification'
});

var btnSearchcompany = Titanium.UI.createButton({
     backgroundImage : 'images/search.png',
     top : '32%',
     width : '15%',
     height : '5%',
     right : '12%',
     borderRadius : 3
});

win.add(btnSearchcompany);

function searchcompanyyql(){
     alert("wahhab");       
}

btnSearchcompany.addEventListener('click', function(e) {
     searchcompanyyql();
});

win.open(); 
```

# java - 启动服务器时出现opencyc 2.0错误

> ID：13331870
> 
> 赞同：0
> 
> 时间：2012-11-11T14:11:39.170
> 
> 标签：java, jvm

我最近下载了 opencyc 2.0 。我尝试通过 ./run-cyc.sh 启动服务器，但出现以下错误

```
Java HotSpot(TM) Server VM warning: ignoring option MaxPermSize=128m; support was removed in 8.0
Unrecognized VM option 'UseSpinning'
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Cyc server has shut down at Sun Nov 11 19:36:50 IST 2012 
```

有谁知道这个错误是怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:37:49.627

我会仔细检查您正在使用的一百万个不同版本的 Java 中的哪一个。OpenCyc 2.0 于 2009 年发布，所以我猜它与您安装的最新版本不兼容。

您有什么理由不尝试[上个月](https://sourceforge.net/projects/opencyc/files/OpenCyc%204.0/)刚刚发布的 OpenCyc 4.0吗？我还没有尝试过，但总的来说，最新代码的问题会更少。

# java - 如何在 .drl 文件中实例化对象

> ID：13331871
> 
> 赞同：1
> 
> 时间：2012-11-11T14:11:42.410
> 
> 标签：java, instantiation, drools

我对这个流口水的员工完全陌生。因此，我在这里遇到了一些麻烦。

```
rule "Raise the alarm when we have one or more fires"
    when
exists Fire()
then 
    insert( new Alarm() );  
end 
```

当我有这段代码时，它工作正常。但我想改变一下：

```
rule "Raise the alarm when we have one or more fires"
    when
exists Fire()
then 
    $alarm = new Alarm();
    $alarm.RingBell();
    insert( $alarm );  
end 
```

可能你明白我在这里想要做什么。我想实例化 Alarm 类并触发它的 RingBell 方法。但它给了我这个错误

```
Rule Compilation error : [Rule name='Raise the alarm when we have one or more fires']
    com/sample/Rule_Raise_the_alarm_when_we_have_one_or_more_fires_cd7449c70a6a48c78f4e291495d23b05.java (8:436) : alarm cannot be resolved

java.lang.IllegalArgumentException: Could not parse knowledge.
    at com.sample.DroolsTest.readKnowledgeBase(DroolsTest.java:117)
    at com.sample.DroolsTest.main(DroolsTest.java:28) 
```

如果你们在这里帮助我，我将不胜感激:)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:14:04.710

错误是因为从未声明 $alarm 变量。尝试执行以下操作：

```
rule "Raise the alarm when we have one or more fires"
    when
exists Fire()
then 
    Alarm $alarm = new Alarm();
    $alarm.RingBell();
    insert( $alarm );  
end 
```

重要的一行是：***Alarm*** *$alarm = new Alarm();*

# dropbox - 用于访问和同步离线内容的 Dropbox 或 Drive

> ID：13331876
> 
> 赞同：1
> 
> 时间：2012-11-11T14:12:13.293
> 
> 标签：dropbox, google-drive-api

我在一个我认为很简单的用例上遇到了一些问题。我们有一组要存储在云中的文档。它们应该同步和更新，以便在现场的 Android 平板电脑中使用。

所以我现在正在 Nexus 平板电脑上测试 Dropbox 和 Drive，我看到以下问题/问题：

1.  对于他们俩来说，我似乎无法选择要同步的文件夹。我必须为每个文件设置启动首选项或脱机内容标志。这是相当多的工作，而且如果我们要添加一个新文档，我们将不得不在所有设备上手动标记它。这看起来非常麻烦。如果我可以将一个文件夹设置为支持脱机，这不会有问题，因为在覆盖时会自动包含新文件？我在这里遗漏了什么吗，离线文件夹似乎是一个非常基本的场景？

2.  可以说我坚持为每个文件手动离线选择或设法解决离线文件夹。下一个问题是。如果我处于离线状态并想要访问共享文档的链接，我在另一个应用程序或文档中有指向我的 pdf 的链接，并且该文档在我的设备中以离线模式存在，但我没有覆盖范围。链接是否仍然有效，或者链接是否需要互联网访问才能正常工作，我必须浏览到 Dropbox 或 Drive Applications 才能手动查找文档。

提前感谢您的任何建议

# javascript - 正则表达式无法测试手机号码

> ID：13331879
> 
> 赞同：0
> 
> 时间：2012-11-11T14:12:32.853
> 
> 标签：javascript, regex

我想制作一个测试手机号码的正则表达式（10位，起始位可以是7,8或9）

我解决了这个 -> /^(7|8|9)[\d]{9,9}$/

我的代码是

```
function testPhone()
    {
       var pattern = /^(7|8|9)[\d]{9,9}$/;
        var phoneNo = document.getElementById('phoneNo');

            if (!pattern.test(phoneNo))
            {
                alert("It is not valid mobile number!");
            }

    }

 <input type="text" name="phoneNo"  maxlength="10"  size="10"  >
 <input type="submit" value="Search" onclick="testPhone()"> 
```

不知何故，它总是显示警报消息。我还在这里 (http://www.regextester.com/) 测试了我的正则表达式。它在这里工作。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:15:05.563

它是

```
var phoneNo = document.getElementById('phoneNo').value; 
```

注意`.value`.

哦，你的输入没有`id`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T14:17:45.710

你忘了`.value`，

```
var phoneNo = document.getElementById('phoneNo').value; 
```

试试这个模式，

```
^[7-9](\d){9}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:15:44.550

它应该是

```
var phoneNo = document.getElementById('phoneNo').value;
                                                   ^ 
```

和正则表达式应该是

```
/^(7|8|9)\d{9}$/ 
```

不需要 `{9,9}`和`[\d]`

# android - 根据第一个活动中的选择，第二个活动应该具有不同内容的 ImageView 和 TextView

> ID：13331883
> 
> 赞同：2
> 
> 时间：2012-11-11T14:12:42.273
> 
> 标签：android

我正在开发一个有一些肌肉锻炼的应用程序。

我希望在单击活动 1 中的每个项目时将我带到具有不同 ImageView 和 TextView 的活动 2。这可能吗 ？？

[![图片](../Images/ccb050e74dee95770505e87960626c9b.png)](https://i.stack.imgur.com/27lkA.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:57:32.603

是的，这是可能的。您必须为其他活动使用 Intent（包含有关练习的一些数据）。

在 onClick 项目上，您创建此意图并通过 startActivity(intent) 启动 Activity。在活动 2 中，您读出传入的 Intent 额外数据并相应地调整 TextView/ImageView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:00:33.910

**-**在您的**第一个活动**中创建`ListView`以显示您的项目。

**-**在`onItemClickListener()`ListView 的方法上，使用`Intent`进入**第二个 Activity。**

**-**如果需要将值传递给第二个活动，请使用**Intent**的`putExtra()`方法**放置值**，并在**第二个活动**中使用方法**获取它们。**********`getExtras()`********

 ********活动一：**

```
lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                i = new Intent(Activity1.this,Activity2.class);

                i.putExtra("value1","hello");
                i.putExtra("value2","hi");

                startActivity(i);

        }); 
```

**活动二：**

```
Intent i = getIntent();
String index = intent.getExtras().getString("value1");
String value = intent.getExtras().getString("value2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:05:34.893

正如评论员所说“这是可能的”。可以通过 Intent 用于启动活动。使用[Intent.putExtra(key,value)](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20double%5B%5D%29)变体。这些额外内容将作为[Bundle](http://developer.android.com/reference/android/os/Bundle.html)对象传递给活动。在那里你可能会得到你的临时演员。例如，您可以附加；

```
Intent intent = new Intent(HostActivity.this, SuccessorClass.class);

intent.putExtra("Extra key", extraData);

startActivity(intent); 
```

您可以使用以下方法获取附加数据；

```
protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     Object extraData = savedInstanceState.get("Extra key");
 } 
```

请务必检查 put 和 get 方法的变体，因为它们支持大多数通用类型。干杯!******

# actionscript-3 - 选择 actionscript 3 类的元素

> ID：13331893
> 
> 赞同：0
> 
> 时间：2012-11-11T14:13:42.520
> 
> 标签：actionscript-3, flash, class

我正在 as3 中构建音频定序器。我有一个 Track 类，其中包含一个播放按钮来播放一次声音、一个音量滑块和 16 个复选框来打开/关闭 16 个步骤中的每一个。舞台上有 8 个 Track 实例。我想知道的是如何唯一识别正在单击的按钮/滑块/复选框？我在哪里加载每个声音？boleow 是我的 Track 课程

```
package 
    {
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.media.Sound;
import flash.media.SoundChannel;
import flash.net.URLRequest;
public class Track extends MovieClip
{
    private var soundName:Sound;
    private var theChannel:SoundChannel;
    private var songName:String;
    public function Track()
    {
        // constructor code
        trace("track created");
        singlePlay.addEventListener(flash.events.MouseEvent.CLICK, handlePlayClick);
    }
    private function handlePlayClick(e:Event):void
    {
        trace("Play clicked");
        this.play();
    }       
    public function setSoundName(theName:String):void
    {
        this.songName = theName;
        soundName = new Sound();
        var req:URLRequest = new URLRequest(this.songName);
        soundName.addEventListener(Event.COMPLETE, playSound);
        soundName.load(req);
    }
    public function playSound()
    {
        theChannel = soundName.play();
    }
    public function stopSound():void
    {
        theChannel.stop();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:37:27.700

如果您有一个能够加载不同音频文件（曲目）和 UI 的中央音频播放器会更好，这将触发对该类的操作，而不是构建将处理播放音频的视觉元素。您必须首先学习 OOP 原则才能正确地做到这一点（正确的意思是：灵活、可重用和易于维护/扩展）：

图书：

*   基本 ActionScript 3.0 - Moock
*   面向对象的 ActionScript 3.0 - Elst、Jacobs、Yard

要直接回答您的问题，每个 DispalyObject 都有一个 name 属性，您可以使用它来识别已单击的内容 - 不理想。

最好的祝福

# python - str 列表列表

> ID：13331895
> 
> 赞同：1
> 
> 时间：2012-11-11T14:13:54.350
> 
> 标签：python, string

我正在尝试编写一个函数，该函数将在 shell 中打开一个 .txt 文件作为 str 列表的列表。

该文件类似于：

```
TYUIO
GHJKL
BNMCV
ASDFG
XCVBN 
```

我需要我的函数返回：

```
[['T', 'Y', 'U', 'I', 'O'], ['G', 'H', 'J', 'K', 'L'], ...] 
```

等等。

我写的函数几乎产生了这个。它返回：

```
[['TYUIO'], ['GHJKL'], ...] 
```

等等。我需要更改/添加到此函数以使其返回正确的嵌套列表？

这是我的功能：

```
board_list = []
for line in board_file:
    items = line.rstrip('\n').split('\t')
    items = [item.strip() for item in items]
    board_list.append(items)

return board_list 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:16:46.457

尝试使用`list()`和`extend()`。

```
items = [list(item.strip()) for item in items]
board_list.extend(items) 
```

您也可以在一行中执行此操作，假设每行包含一个单词。我不确定你为什么要分手，`\t`所以这可能对你不起作用。

```
with open("data.txt") as board_file:
    board_list = [list(line) for line in board_file.read().split('\n') if line] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:56:03.343

如果打开文本文件的结果是一个行列表，我将把这个列表称为**listoflines**，所以我们可以定义这个函数：

```
def listof(listoflines):
    board_list = []
    board = []
    for element in listoflines:
       board_list.append((element.strip('\n')).split())
    for member in board_list:
       for i in range(len(member)):
          board.append(list(member[i]))

    return board 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:23:15.783

请注意，您只是忘记将字符串转换为值列表，为此您可以使用[内置的 map 函数](http://docs.python.org/2/library/functions.html#map)：

```
items = map(list, items) 
```

# javascript - 在自动标记居中后启用谷歌地图集成中的平移

> ID：13331898
> 
> 赞同：0
> 
> 时间：2012-11-11T14:14:08.147
> 
> 标签：javascript, google-maps

我已经建立了一个谷歌地图集成，其中包含我自己的自定义地图和由后端在页面加载时动态放置的标记。

问题是我的代码将地图集中在标记上，如果您尝试将地图平移到任何位置，它会反复将地图重新​​定位到居中的标记（您可以放大/缩小但不能平移）。

地图居中处理如下：

```
google.maps.event.addListener(map,'idle',function (map) {
    var coords = genCoords(map,"40.014","80.52");

    clueLocation = new google.maps.Marker({
        map:map,
        position: new google.maps.LatLng(coords.lat(),coords.lng()),
        center: new google.maps.LatLng(coords.lat(),coords.lng()),
        title: 'Ramara du Croissant'
    });
    map.setCenter( new google.maps.LatLng(coords.lat(),coords.lng()) );
}.bind(null,map)); 
```

而且我还提供了一个可以体验行为的[实时版本](http://beta.rstt.net/clue/Arr-So-I-am-a-crust-and/)

如果它确实有所作为，有问题的代码将始终只显示一个标记，到目前为止我发现的是边界解决方案，当您需要将地图置于一组标记中时，这不是我的方法我要去这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:28:16.687

如果您只希望地图以标记为中心一次，请使用[google.maps.event.addListenerOnce](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)，而不是 google.maps.event.addListener

您可能希望为此目的使用空闲事件重新评估，但如果您只想显示一个标记，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:08:22.553

> 问题是我的代码将地图集中在标记上，如果您尝试将地图平移到任何位置，它会反复将地图重新​​定位到居中的标记（您可以放大/缩小但不能平移）。

嗯，当然。您正在收听该`idle`事件，这就是您平移地图后发生的情况。

![闲](../Images/1bb45ef7c5a54839658e9b97b1a6ed76.png)

`idle`只要地图在滚动或缩放更改后完成重绘，就会触发该事件。

# drag-and-drop - 使用 ExtJS 的 'gridviewdragdrop' 插件：如何禁用将子节点拖出 parentNode？

> ID：13331899
> 
> 赞同：1
> 
> 时间：2012-11-11T14:14:20.407
> 
> 标签：drag-and-drop, grid, extjs4

使用 ExtJS 的 gridviewdragdrop 插件，如何禁用将子节点拖出父节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:07:19.253

在 'beforedrop' 事件上检查父级是否更改，因此取消编辑

```
beforedrop: function(node, data, overModel, dropPosition,  dropFunction,  eOpts ){
            if(data.records[0].isLeaf()){//
if(data.records[0].parentNode.data.id!=overModel.parentNode.data.id) 
             return false;
 } 
```

# java - 如果只有完全限定名称，如何获取 java 类的二进制名称？

> ID：13331902
> 
> 赞同：15
> 
> 时间：2012-11-11T14:14:37.367
> 
> 标签：java, reflection, jvm

反射类和方法以及类加载器等需要使用所谓的“二进制”类名称。

问题是，如果只有完全限定名称，即在源代码中使用的名称，如何获得二进制名称。

例如：

```
package frege;
public static class RT {
    ....
    public static class X { .... }
} 
```

类的完全限定名称是`frege.RT.X`. 然而，要获取类对象，需要编写：

```
Class.forName("frege.RT$X") 
```

并不是

```
Class.forName("frege.RT.X")    // fails with ClassNotFoundException 
```

因为`X`恰好是 的内部类`frege.RT`。

一个可能但笨拙的解决方案是从后退替换，一个接一个，直到`.`不再抛出或没有更多替换。`$``Class.forName()``ClassNotFoundException``.`

有没有更好/众所周知/标准的解决方案？我查看了 API 文档`Class`，`CLassLoader`但`java.lang.reflect`没有找到任何可用的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T12:14:08.353

现在听起来您想从规范名称中获取完全限定名称 (FQN)。由于这与使用简单名称不同，我将添加第二个答案。

如果会导致规范名称冲突，Sun javac 命令将不会编译类。但是，通过单独编译，您仍然可以获得具有相同规范名称的两个不同类。

一个例子：

文件 src1\com\stack\Test.java

```
package com.stack;

public class Test {
    public static class Example {
        public static class Cow {
            public static class Hoof {
            }
        }
    }

    public static void main(String[] args) throws Exception {
        Class<?> cl1 = Class.forName("com.stack.Test$Example$Cow$Hoof");
        Class<?> cl2 = Class.forName("com.stack.Test.Example.Cow.Hoof");
        System.out.println(cl1.getName());
        System.out.println(cl1.getSimpleName());
        System.out.println(cl1.getCanonicalName());
        System.out.println();
        System.out.println(cl2.getName());
        System.out.println(cl2.getSimpleName());
        System.out.println(cl2.getCanonicalName());
    }
} 
```

文件 src2\com\stack\Test\Example\Cow\Hoof.java

```
package com.stack.Test.Example.Cow;

public class Hoof { } 
```

然后编译并执行：

```
set CLASSPATH=
mkdir bin1 bin2
javac -d bin1 -sourcepath src1 src1\com\stack\Test.java
javac -d bin2 -sourcepath src2 src2\com\stack\Test\Example\Cow\Hoof.java

set CLASSPATH=bin1;bin2
java com.stack.Test 
```

产生输出：

```
com.stack.Test$Example$Cow$Hoof
Hoof
com.stack.Test.Example.Cow.Hoof

com.stack.Test.Example.Cow.Hoof
Hoof
com.stack.Test.Example.Cow.Hoof 
```

因此，两个类具有相同的规范名称但不同的 FQN。即使两个类具有相同的 FQN 和相同的规范名称，如果它们通过不同的类加载器加载，它们仍然可能不同。

为了解决您的问题，我看到了您可以采取的几种前进方式。

首先，您可以指定您匹配具有最少嵌套量的类，因此 FQN 中的“$”数量最少。**更新**事实证明，Sun javac 与此完全相反，并且匹配嵌套最多的类。

其次，您可以测试所有可能的 FQN，如果有多个则抛出异常。

第三，接受唯一的唯一映射是与 FQN，然后仅在指定的类加载器中，并适当地重新处理您的应用程序。我发现使用线程上下文类加载器作为默认类加载器很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:14:52.303

一个简单的名称会省略很多信息，并且可能有许多具有相同简单名称的类。这可能使这成为不可能。例如：

```
package stack;

/**
 * 
 * @author Simon Greatrix
 */
public class TestLocal {

    public Object getObject1() {
        class Thing {
            public String toString() { 
                return "I am a Thing";
            }
        }
        return new Thing();
    }

    public Object getObject2() {
        class Thing {
            public String toString() { 
                return "I am another Thing";
            }
        }
        return new Thing();
    }

    public Object getObject3() {
        class Thing {
            public String toString() { 
                return "I am a rather different Thing";
            }
        }
        return new Thing();
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        TestLocal test = new TestLocal();
        Object[] objects = new Object[] {
                test.getObject1(),                
                test.getObject2(),                
                test.getObject3()                
        };

        for(Object o : objects) {
            System.out.println("Object      : "+o);
            System.out.println("Simple Name : "+o.getClass().getSimpleName());
            System.out.println("Name        : "+o.getClass().getName());
        }
    }
} 
```

这将产生输出：

```
Object      : I am a Thing
Simple Name : Thing
Name        : stack.TestLocal$1Thing
Object      : I am another Thing
Simple Name : Thing
Name        : stack.TestLocal$2Thing
Object      : I am a rather different Thing
Simple Name : Thing
Name        : stack.TestLocal$3Thing 
```

如您所见，所有三个本地类都具有相同的简单名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-03T23:23:45.627

我认为规范名称指定唯一类是安全的选择。如上所述，javac 不允许您从单个编译单元创建具有相同规范名称的两个类。如果您有 2 个编译，那么您可能会在加载哪个类时遇到麻烦，但那时我会更担心库的包名与您的包名冲突，除了恶意之外，其他人都可以避免这种情况。

出于这个原因，我认为假设您不会遇到这种情况是一个安全的选择。沿着这些思路，对于那些感兴趣的人，我实现了 OP 的建议（将 s 翻转`$`为s），并在它没有找到任何具有该规范名称的类的情况下`.`简单地抛出一个，或者如果它找到两个或更多`ClassNotFoundException`有这个名字。

```
 /**
 * Returns the single class at the specified canonical name, or throws a {@link java.lang.ClassNotFoundException}.
 *
 * <p>Read about the issues of fully-qualified class paths vs the canonical name string
 * <a href="http://stackoverflow.com/questions/13331902/how-to-get-the-binary-name-of-a-java-class-if-one-has-only-the-fully-qualified">discussed here</a>.
 */
public static <TStaticallyNeeded> Class<TStaticallyNeeded> classForCanonicalName(String canonicalName)
        throws ClassNotFoundException {

    if (canonicalName == null) { throw new IllegalArgumentException("canonicalName"); }

    int lastDotIndex = canonicalName.length();
    boolean hasMoreDots = true;

    String attemptedClassName = canonicalName;

    Set<Class> resolvedClasses = new HashSet<>();

    while (hasMoreDots) try {
        Class resolvedClass = Class.forName(attemptedClassName);
        resolvedClasses.add(resolvedClass);
    }
    catch (ClassNotFoundException e) {
        continue;
    }
    finally {
        if(hasMoreDots){
            lastDotIndex = attemptedClassName.lastIndexOf('.');
            attemptedClassName = new StringBuilder(attemptedClassName)
                    .replace(lastDotIndex, lastDotIndex + 1, "$")
                    .toString();
            hasMoreDots = attemptedClassName.contains(".");
        }
    }

    if (resolvedClasses.isEmpty()) {
        throw new ClassNotFoundException(canonicalName);
    }

    if (resolvedClasses.size() >= 2) {
        StringBuilder builder = new StringBuilder();
        for (Class clazz : resolvedClasses) {
            builder.append("'").append(clazz.getName()).append("'");
            builder.append(" in ");
            builder.append("'").append(
                    clazz.getProtectionDomain().getCodeSource() != null
                            ? clazz.getProtectionDomain().getCodeSource().getLocation()
                            : "<unknown code source>"
            ).append("'");
            builder.append(System.lineSeparator());
        }

        builder.replace(builder.length() - System.lineSeparator().length(), builder.length(), "");

        throw new ClassNotFoundException(
                "found multiple classes with the same canonical names:" + System.lineSeparator() +
                        builder.toString()
        );
    }

    return resolvedClasses.iterator().next();
} 
```

“预期的”流程是命中该`catch(NoClass) continue`代码仍然让我非常恼火，但如果你曾经告诉 eclipse 或 intelliJ 自动中断抛出的任何异常，你就会知道这种行为是正常的。

# ruby-on-rails - “taken”是红宝石中的关键字吗？

> ID：13331903
> 
> 赞同：2
> 
> 时间：2012-11-11T14:14:42.220
> 
> 标签：ruby-on-rails, ruby, lambda, named-scope

直奔问题。我有一个这样的查询：

```
@issue_books = current_user.issue_books
@already_issues =  @issue_books.taken(params[:id]) 
```

其中`taken`named_scope定义如下：

```
scope :taken, lambda { |book_id| where(returned: false).where(book_id: book_id)  } 
```

现在每次我运行这个查询：

```
@issue_books.taken(params[:id]) 
```

我得到一个`ArgumentError: wrong number of arguments (1 for 0)`错误。

如果我重命名`taken`为其他类似的名称`taken_books`，一切似乎都可以正常工作。

所以我的问题是：`taken`红宝石中的关键字是什么？如果没有，任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:26:03.180

它不是 ruby​​ 关键字，但它似乎是在作用域上定义的方法。

试试这个：

```
@issue_books.method(:taken).owner
#=> ActiveRecord::Delegation
@issue_books.method(:taken).source_location
#=> (...)/gems/activerecord-3.2.6/lib/active_record/relation/delegation.rb 
```

因此，`taken`您定义的范围可能被`ActiveRecord::Delegate`.

**更新**：我做了一些挖掘，`taken`似乎被定义为`limit`in的别名`Arel::SelectorManager`，是`ActiveRecord`.

# android - Android中的Sqlite datediff替代品与订购

> ID：13331905
> 
> 赞同：2
> 
> 时间：2012-11-11T14:14:52.850
> 
> 标签：android, sqlite, date, iso

我是 Sqlite 的初学者，正在努力整理我需要的查询。:-( 任何人都可以帮助我吗？

我有一个给定的日期。在我下面的示例中，此变量称为“ **givenDate** ”，并且是 java 类型**Date**，因此格式为**yyyy-MM-dd**。

我还有一个名为**“main”**的数据库表，其中包含一个**“ID”**和**“Date”**列。日期列条目采用 ISO 标准字符串格式。所以条目看起来像这样：

```
ID   Date
001  1949-08-13 06:29:21.000
002  1943-08-13 10:13:45.000
003  1948-08-13 09:12:32.100
004  etc. 
```

在将日期列与给定日期“givenDate”进行比较时，我需要从表“main”中获取最近的 10 个日期的列表。

所以我需要：

1.  将日期列中的每个日期与我给定的日期“givenDate”进行比较
2.  找出它们之间的绝对差异
3.  按从小到大的差异排序
4.  返回每个最小的 10 个结果的 ID 和日期

因此，如果 givenDate 是 1948-09-13 那么结果将是：

```
003  1948-08-13 09:12:32.100
001  1949-08-13 06:29:21.000
002  1943-08-13 10:13:45.000
etc 
```

DateDiff 在 Android 中不起作用，因为数据库是 Sqlite 数据库。

我试过做这样的事情：

```
String query = 
"SELECT ID, Date" +
"FROM main" +
"WHERE Date IS NOT NULL" +
"ORDER BY ABS(date("+givenDate+") - Date) ASC" +
"LIMIT 10"; 
```

这似乎不起作用。我只是得到与 givenDate 中的年份相同且按升序排列的日期列表。日期差异似乎并没有实际计算日期差异并给出最接近的 10。

我浏览了许多帖子，但找不到任何特定的东西来做我需要的事情。

任何帮助将不胜感激。

谢谢，西米:-)

* * *

答案是：

```
Format sqliteDateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS"); 

String query2 = 
"SELECT _id, Date " + 
"FROM main " + 
"WHERE Date IS NOT NULL " + 
"ORDER BY ABS(JULIANDAY('" + sqliteDateFormatter.format(aDate) + "') - " + "JULIANDAY(Date)) " + 
"LIMIT 10"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:26:25.300

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)，仅将 a 转换`Date`为字符串将导致 SQLite 无法理解的格式；您必须[明确使用正确的格式](https://stackoverflow.com/questions/5683728/convert-java-util-date-to-string)。

此外，这些日期值只是字符串，因此不能简单地减去它们。您必须先将它们转换为[某种数字日期格式](http://www.sqlite.org/lang_datefunc.html)。

```
Format sqliteDateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String query = ... +
    "ORDER BY ABS(JULIANDAY('" + sqliteDateFormatter.format(date) + "') - " +
                 "JULIANDAY(Date))" +
    ... 
```

# android - 无法让我的数组加载到列表视图中，我不知道为什么

> ID：13331906
> 
> 赞同：0
> 
> 时间：2012-11-11T14:14:56.997
> 
> 标签：android, arrays, android-listview

我正在尝试将数据从 csv 文件中提取到一个数组中，然后在列表视图中显示该数组。我快到了（经过大量搜索/谷歌时间......Java / android新手），但无法弄清楚我做错了什么。

我有一个正在加载的文本文件，然后我将内容提取到一个名为 splitdata 的字符串数组中。我希望 splitdata 数组显示在列表视图中。

我的代码是：

```
 try {
    File myFile = new File("/sdcard/file.txt");
    FileInputStream fIn = new FileInputStream(myFile);
    BufferedReader myReader = new BufferedReader(
            new InputStreamReader(fIn));
    String aDataRow = "";
    String aBuffer = "";
    while ((aDataRow = myReader.readLine()) != null) {
        aBuffer += aDataRow + "\n";
    }

    //      String loadeddata = aBuffer;
    String[] splitdata = aBuffer.split(",");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.grid_item, splitdata);

    adapter.clear();
    adapter.addAll(splitdata);
    lvlogbook.setAdapter(adapter);
            myReader.close(); 
```

当我加载活动时，我只会显示空白列表视图。请得到很好的帮助（我已经在文本视图中测试了数组，并且我想要的数据被分离出来，我认为问题在于我如何尝试用我的数据填充适配器）。

感谢您的任何帮助。

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:21:32.923

这是我正在调用的 grid_item.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

      <TextView android:id="@+id/item1"
            android:text="row_id"
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:width="300dip"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
        />
        <TextView android:id="@+id/item2"
            android:text="col_1"
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:width="180dip"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
        />
        <TextView android:id="@+id/item3"
            android:text="col_2"
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:width="180dip"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
        />
        <TextView android:id="@+id/item4"
            android:text="col_3"
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:width="100dip"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
        />

</LinearLayout> 
```

当我使用列表视图加载活动时，我得到的只是我必须捕获异常的吐司弹出窗口。我很困惑为什么我的列表视图不起作用。我错过了什么？如果我在适配器上注释掉适配器 clear 和适配器 addAll ，那么活动只会在启动时崩溃（意外停止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:58:32.340

很可能您没有具有 ArrayAdapter 默认期望的特定 id 的 TextView。

尝试默认布局：

```
new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, splitdata); 
```

或尝试提供您的 TextView 的实际 ID 的另一个构造函数，例如

```
new ArrayAdapter<String>(this, R.layout.grid_item, R.id.YOURTEXTVIEWID, splitdata); 
```

# tablesorter - 访问特定单元格并检索其内容

> ID：13331909
> 
> 赞同：0
> 
> 时间：2012-11-11T14:15:19.340
> 
> 标签：tablesorter

如何检索 TableSorter 对象中特定单元格的内容？假设我要检索单元格 [3,4] 的内容，即第三行第四列的​​内容。我确信有一个简单的方法可以做到这一点......

谢谢 ！

FG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:18:44.593

根据[文档](http://tablesorter.com/docs/)TableSorter 在标准表上工作

假设这是你的桌子

```
<table id='myTable'>
  <tr>
    <td>Row 0 / Cell 0</td>
    <td>Row 0 / Cell 1</td>
  </tr>
  <tr>
    <td>Row 1 / Cell 0</td>
    <td>Row 1 / Cell 1</td>
  </tr>
</table> 
```

因此，您应该能够通过获取对表格的引用来获取特定的单元格

```
var myTable = document.getElementById('myTable'); 
```

然后通过调用访问特定单元格

```
var cell = myTable.rows[1].cells[0] 
```

单元格的内容应该可以使用

```
cell.firstChild.nodeValue; // returns "Row 1 / Cell 0" 
```

# sql-server-2005 - 为什么我得到以下 SQL 查询的重复记录

> ID：13331914
> 
> 赞同：0
> 
> 时间：2012-11-11T14:15:59.897
> 
> 标签：sql-server-2005

我有以下查询：

```
SELECT 
    l.ModelTypeIndexNumber AS [Model Index Number],
    l.TestGroupname AS [Test Group],
    lf.CE_Fuel AS [Fuel],
    CASE 
        WHEN lf.Electricity = '' THEN '(missing)' \
        ELSE  lf.Electricity 
    END AS [Electric Motor Energy Source],
    tg.TG_Fuel + ', EL' AS [TG Fuel Sources],
    CASE 
        WHEN l.LabelCalculationApproachIdentifier ='PHEV' THEN  'PHEV'
        ELSE '(Not PHEV)' 
    END AS [Label Calculation Approach] 
FROM Relational.Label l 
INNER JOIN (
    SELECT 
        lbl.SubmissionId, 
        lbl.ModelTypeIndexNumber, 
        COUNT(*) AS lblFuelCount, 
        MAX(CASE 
                WHEN fu.FuelUsageIdentifier <>'EL' THEN fu.FuelUsageIdentifier 
                ELSE NULL 
            END) AS CE_Fuel, 
        MAX(CASE 
                WHEN fu.FuelUsageIdentifier ='EL' THEN fu.FuelUsageIdentifier 
                ELSE '' 
            END) AS Electricity 
    FROM Relational.Label lbl 
    INNER JOIN Relational.FuelUsage fu 
        ON lbl.LabelId=fu.LabelId 
    WHERE lbl.SubmissionId=@SubmissionId 
    GROUP BY lbl.SubmissionId, lbl.ModelTypeIndexNumber 
    ) AS lf 
    ON l.SubmissionId=lf.SubmissionId 
INNER JOIN (
    SELECT 
        rtg.SubmissionId, 
        rtg.TestGroupName, 
        MAX(CASE 
            WHEN ds.FuelId <> 'EL' THEN ds.FuelId 
            ELSE NULL 
        END) AS TG_Fuel 
    FROM Relational.DriveSource ds 
    INNER JOIN Relational.TestGroup rtg 
        ON ds.TestGroupId=rtg.TestGroupId 
    WHERE rtg.SubmissionId=@SubmissionId 
    GROUP BY rtg.SubmissionId, rtg.TestGroupName 
    HAVING COUNT(*)>1 AND MAX(CASE WHEN ds.FuelId ='EL' THEN 1 ELSE 0 END) = 1
    ) AS tg 
    ON lf.SubmissionId=tg.SubmissionId 
    AND l.TestGroupName = tg.TestGroupName 
WHERE (lf.Electricity = '' AND l.LabelCalculationApproachIdentifier = 'PHEV') 
```

它正在生成以下输出：

```
Model Index Number    Test Group    Fuel    TG Fuel Source(s)    Label Calculation Approach   
19                    ABC.1987      GP      DX, EL               PHEV
19                    XYZ.1989      DM      DS, EL               PHEV
20                    ABC.1987      GP      DX. EL               PHEV
20                    XYZ.1989      DM      DS, EL               PHEV 
```

但我期待以下结果：

```
Model Index Number    Test Group    Fuel    TG Fuel Source(s)    Label Calculation Approach
19                    ABC.1987      GP      DX, EL               PHEV
20                    XYZ.1989      DM      DS, EL               PHEV 
```

我不想重复。也许加入问题。我尝试过 DISTINCT。我在查询中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:48:38.653

> 为什么我收到重复记录？

这个问题的答案很大程度上取决于源表中的数据。

* * *

这只是一个猜测（因为我没有你的真实表和数据，我无法运行查询）：

我认为您也需要`GROUP BY`在查询结束时声明。您的查询可能如下所示：

```
SELECT 
    l.ModelTypeIndexNumber AS [Model Index Number],
    l.TestGroupname AS [Test Group],
    MAX(lf.CE_Fuel AS [Fuel]),
    MAX(CASE 
        WHEN lf.Electricity = '' THEN '(missing)' \
        ELSE  lf.Electricity 
    END) AS [Electric Motor Energy Source],
    MAX(tg.TG_Fuel + ', EL') AS [TG Fuel Sources],
    MAX(CASE 
        WHEN l.LabelCalculationApproachIdentifier ='PHEV' THEN  'PHEV'
        ELSE '(Not PHEV)' 
    END) AS [Label Calculation Approach] 
FROM Relational.Label l 
INNER JOIN (
    SELECT 
        lbl.SubmissionId, 
        lbl.ModelTypeIndexNumber, 
        COUNT(*) AS lblFuelCount, 
        MAX(CASE 
                WHEN fu.FuelUsageIdentifier <>'EL' THEN fu.FuelUsageIdentifier 
                ELSE NULL 
            END) AS CE_Fuel, 
        MAX(CASE 
                WHEN fu.FuelUsageIdentifier ='EL' THEN fu.FuelUsageIdentifier 
                ELSE '' 
            END) AS Electricity 
    FROM Relational.Label lbl 
    INNER JOIN Relational.FuelUsage fu 
        ON lbl.LabelId=fu.LabelId 
    WHERE lbl.SubmissionId=@SubmissionId 
    GROUP BY lbl.SubmissionId, lbl.ModelTypeIndexNumber 
    ) AS lf 
    ON l.SubmissionId=lf.SubmissionId 
INNER JOIN (
    SELECT 
        rtg.SubmissionId, 
        rtg.TestGroupName, 
        MAX(CASE 
            WHEN ds.FuelId <> 'EL' THEN ds.FuelId 
            ELSE NULL 
        END) AS TG_Fuel 
    FROM Relational.DriveSource ds 
    INNER JOIN Relational.TestGroup rtg 
        ON ds.TestGroupId=rtg.TestGroupId 
    WHERE rtg.SubmissionId=@SubmissionId 
    GROUP BY rtg.SubmissionId, rtg.TestGroupName 
    HAVING COUNT(*)>1 AND MAX(CASE WHEN ds.FuelId ='EL' THEN 1 ELSE 0 END) = 1
    ) AS tg 
    ON lf.SubmissionId=tg.SubmissionId 
    AND l.TestGroupName = tg.TestGroupName 
WHERE (lf.Electricity = '' AND l.LabelCalculationApproachIdentifier = 'PHEV') 
GROUP BY     
    l.ModelTypeIndexNumber,
    l.TestGroupname 
```

# android - 使用 Sherlock 操作栏，但默认操作栏仍然存在

> ID：13331919
> 
> 赞同：0
> 
> 时间：2012-11-11T14:16:31.007
> 
> 标签：android, android-actionbar, actionbarsherlock

我已经成功安装了 Sherlock 的操作栏，并且我添加的 2 个项目放置得很好！但似乎 Sherlock 并没有替换默认的 android 操作栏，而且我总是在左侧得到一个 android 图像：/ 我怎样才能删除它？还是换掉？我想把我的应用程序的名字放在左边——有一些动作——但如果 Sherlock 不能很好地工作，我不能也不知道怎么做。请帮忙！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:21:27.960

以下是如何设置图标和标题，并监听项目点击：

```
// in onResume
ActionBar bar = getSupportActionBar();

bar.setTitle( "My App Name" );

bar.setHomeButtonEnabled( true );

bar.setIcon( R.drawable.your_icon );

// later
@Override
public boolean onMenuItemSelected( int featureId, MenuItem item )
{
  if( android.R.id.home == item.getItemId() )
  {
    // do your stuff here

    return true;
  }

  return super.onMenuItemSelected( featureId, item );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:22:26.257

您可以使用 更改图标，`actionbar.setIcon()`也可以使用 将其完全删除`actionbar.setDisplayShowHomeEnabled(false)`。

Actionbarsherlock 只是一个包装器。在原生Actionbar 可用的Android 版本上，您将看到原生Actionbar，在较低的Android 版本上，您将看到ABS 提供的actionbar。

# android - 如何在 android 中使用自定义相机类编写 Exif 数据？

> ID：13331920
> 
> 赞同：8
> 
> 时间：2012-11-11T14:16:35.030
> 
> 标签：android, android-camera

我有一个自定义相机应用程序，用于拍照并将它们裁剪为正方形，现在我想知道如何为最终输出图像（特别是方向）编写 Exif 数据

以下是我的代码的重要部分：

```
captureButton = (Button) findViewById(R.id.button_capture);
    captureButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Take a picture
            mCamera.takePicture(null, null, mPicture);                                
        }
    }); 
```

这是回调函数：

```
PictureCallback mPicture = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            File pictureFile = getOutputMediaFile();
            if (pictureFile == null) {
                return;
            }
            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {

            } catch (IOException e) {
            }
        }
    }; 
```

**更新：** 我在 onPictureTaken 方法中添加了以下内容，但没有任何改变：

```
ExifInterface exif;
                exif = new ExifInterface(pictureFile.getAbsolutePath());
// Notice getOrientation method gets an Integer with the angle : 0 , 90 , 180 , 270 ..etc
                exif.setAttribute(ExifInterface.TAG_ORIENTATION, String.valueOf(getOrientation()) );
                exif.saveAttributes(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T07:32:16.590

我知道这是旧的，但我有类似的问题，所以我想我会先填写这个。如果我理解正确，您正在尝试将角度存储在 .TAG_ORIENTATION exif 属性中。这是不正确的，调整您的“getOrientation”方法，为您提供以下特定于[ExifInterface 类的方向常量之一。](http://developer.android.com/reference/android/media/ExifInterface.html#ORIENTATION_NORMAL)

通过放置特定角度，图像查看器将错误地读取 exif 数据，以及我如何阅读您正在做的问题。

> int ORIENTATION_FLIP_HORIZONTAL int ORIENTATION_FLIP_VERTICAL
> int ORIENTATION_NORMAL int ORIENTATION_ROTATE_180
> int ORIENTATION_ROTATE_270 int ORIENTATION_ROTATE_90
> int ORIENTATION_TRANSPOSE int ORIENTATION_TRANSVERSE
> int ORIENTATION_UNDEFINED

# php - HTML - 表格内容对齐

> ID：13331921
> 
> 赞同：0
> 
> 时间：2012-11-11T14:16:42.540
> 
> 标签：php, html, css

我正在开发一个基于网络的游戏。我进行了导航，但文本未正确对齐。

**HTML**

```
 <table width="123" height="253" border="0" align="right" cellpadding="0" cellspacing="2" class="table">   <tr>
 <td height="23" class="header">Main Game</td>   </tr>   <tr>
 <td height="65" valign="top" class="cell" align="center">  <a href="home.php">Homepage</a>     <a href="staff.php">Staff Page</a>
 </td>   </tr>   <tr>
 <td height="23" class="header">Social</td>   </tr>   <tr>
 <td height="65" valign="top" class="cell"><a href="forum.php">Discussions</a></td>   </tr>   <tr>
 <td height="23" class="header">LogOut</td>   </tr> </table> 
```

**CSS**

```
 .table { 
   border:#000000 1px solid; background-color:#363636; 
 }

 .cell { 
   color:#FFFFFF; padding:3px; background-color:#1C1C1C; align:center; 
 }

 .header { 
   padding:0px; padding-left:2px; color:#FFFFFF;
   background:#3A0D07; font-family:verdana; font-size:10px;
   line-height:18px; text-align:left; border-bottom:2px solid;
   border-color:#000000; align:center;
 } 
```

**输出**

![在此处输入图像描述](../Images/633e48fd5616b54d48509f8bf597654c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:20:59.037

您应该使用列表项而不是表格，因为它们在每个浏览器中呈现相同。此外，您可以更好地控制是否。

**HTML**

```
<ul class="nav">
 <li>Home</li>
 <li>Stuff</li>
 <li>About</li>
</ul> 
```

**CSS**

```
ul {
 list-style-type: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:23:28.037

`inline-block`对于您的代码，默认情况下会显示锚标记

您的代码的快速修复是更改`a`标签的显示，将以下内容添加到您的 css：

```
.table .a{
   display:block;
} 
```

# android - 使用 Adob e Air 进行 Android 2.2 开发

> ID：13331925
> 
> 赞同：0
> 
> 时间：2012-11-11T14:16:56.183
> 
> 标签：android, air, flashdevelop

我目前正在尝试使用 Adob​​e AIR 在 FlashDevelop 中开发适用于 Android 平台的应用程序，并且我希望最低目标操作系统为 Android 2.2。
我在 Android 4.0 上运行该应用程序没有问题，但是当我尝试在 Android 2.2 或 2.3 上调试该应用程序时，应用程序崩溃了。

我是否需要使用较早的 AIR 版本（我目前使用的是 AIR 3.4）来编译我的应用程序才能在较早的 Android 版本上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:19:29.033

不，没必要，我们为android开发了一个类似的配置应用程序，它适用于2.3以上的病房，但对于2.2或更早版本，请查看[技术规范](http://www.adobe.com/products/air/tech-specs.html)

# java - build-impl.xml:1025：该模块尚未部署。（便门）

> ID：13331926
> 
> 赞同：2
> 
> 时间：2012-11-11T14:16:57.890
> 
> 标签：java, netbeans, web

我一直在使用*Netbeans 7.2上的**wicket*框架开发Java Web 应用程序，突然间我遇到了这个问题。我尝试清理然后重新启动IDE，我应该说我对此知之甚少。有人可以告诉我为什么它会出错以及我该如何解决？*`build-impl.xml`*

 *第 1024、1025 和 1026 行是：

```
<target if="netbeans.home" name="-run-deploy-nb">
   <nbdeploy clientUrlPart="${client.urlPart}" debugmode="false" forceRedeploy="${forceRedeploy}"/>
</target> 
```

错误消息说：

```
nbproject/build-impl.xml:1025: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 4 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:18:04.867

我自己想出了一个解决方案，我克隆了项目并将项目的目录名称改回原来的，这对我来说很好。但它似乎有一个更好更合适的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T16:43:55.090

/* 首先重启你的 GLASSFISH 服务器 */

1-将 DBMS(ex:oracle,MySQL,MsSQL..) jdbc 连接器 jar 添加到域“glassfish 目录/域/{yourDomain}/lib”

2-在 glassfish 服务器“JDBC-->ConnectionPool”中添加连接池

3-添加您的 JNDI“JDBC-->jdbc 资源”

4-测试连接

5-添加附加属性

如果您的数据库帐户没有密码，您可以轻松

6- glassfish/config/domain.xml 在您的 jdbc-connection-pool 中将密码值更改为“”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-13T07:06:41.523

可能为时已晚，但响应对其他人有用：有时，当您在创建项目时未指定服务器或 servlet 容器时，NetBeans 无法创建 context.xml 文件。

```
In your project under Web Pages, create a folder called META-INF. 
```

通过在网页上单击鼠标右键执行此操作，然后选择：

新建->其他->其他->文件夹

将文件夹命名为 META-INF。大小写很重要，即使在 Windows 上也是如此。

```
Create a file called context.xml in the META-INF folder. 
```

通过鼠标右键单击新的 META-INF 文件夹来执行此操作，然后选择：

新建->其他->XML->XML文档

将其命名为 context（NetBeans 添加 .xml） 选择 Well-formed Document 按 Finish

```
Edit the new document (context.xml), and add the following:

<?xml version="1.0" encoding="UTF-8"?> 
<Context antiJARLocking="true" path="/app-name"/> 
```

将 app-name 替换为您的应用程序的名称。

现在您的就地部署应该可以工作了。如果没有，请确保每个人都可以读取该文件。

context.xml 文件特定于 Tomcat。有关该文件的更多信息，请参阅 tomcat.apache.org 上的 Tomcat 文档。*

# c - 在 c 中编译 ImageMagick 核心

> ID：13331928
> 
> 赞同：0
> 
> 时间：2012-11-11T14:17:06.740
> 
> 标签：c, imagemagick

我正在尝试编译简单的 imageMagick (MagickCore)。我正在使用C接口。我要编译的代码是该站点[MagickCore API](http://www.imagemagick.org/ImageMagick-7.0.0/script/magick-core.php)的第一个示例！

[库](http://www.imagemagick.org/script/download.php)的配置和安装非常完美。“make check”命令结果全部检查为“PASS”。

我还可以在命令行上运行操作，例如：

```
 convert logo: test.gif 
```

现在，我想使用 C 编程 API。[我只是从MagickCore API](http://www.imagemagick.org/ImageMagick-7.0.0/script/magick-core.php)上提供的示例开始！

我尝试使用以下命令对其进行编译：（它本身与源代码在同一站点上提供）：

```
 cc -o test `pkg-config --cflags --libs MagickCore` test.c 
```

但它会导致以下错误（我试着环顾四周，这需要我的时间）。

```
 fatal error: MagickCore/MagickCore.h: No such file or directory 
```

请问有什么建议吗？

请注意，我还设置了 PKG_CONFIG_PATH 环境变量，因此 ImageMagick 现在位于我的默认系统路径中：**export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:09:45.587

尝试使用编译器参数`-I path_to_headers`，指定 Magick 标头（或其他东西）的路径。

# lex - .... 未声明（在此函数中首次使用）？

> ID：13331929
> 
> 赞同：3
> 
> 时间：2012-11-11T14:17:40.400
> 
> 标签：lex, flex-lexer

我有一个 lex 语言的简单代码，我用 Flex 生成 lex.yy.c。当我想将 lex.yy.c 编译为 .exe 文件时，我收到一些错误，例如“未声明（在此函数中首次使用）”！当我在网上搜索时，我知道我需要一个 Const.h 文件，所以我想生成那个文件。我怎么能这样做？

一些错误：

35 C:\Users\Majid\Desktop\win\lex.l `STRING' undeclared (first use in this function) 38 C:\Users\Majid\Desktop\win\lex.l`LC' 未声明（首次在此函数中使用） 39 C:\Users\Majid\Desktop\win\lex.l `LP' 未声明（首次在此函数中使用) ....

代码的开头是：

```
%{int stk[20],stk1[20];
int lbl=0,wlbl=0;
int lineno=0;
int pcount=1;
int lcount=0,wlcount=0;
int token=100;
int dtype=0;
int count=0;
int fexe=0;
char c,str[20],str1[10],idename[10];
char a[100];
void eatcom();
void eatWS();
int set(int);
void check(char);
void checkop();
int chfunction(char *);%}

 Digit  [0-9]
 Letter [a-zA-Z]
ID     {letter}({letter}|{digit})*
NUM    {digit}+
 Delim  [ \t]
 A     [A-Za-z]]
%%

 "/*"               eatcom();
 "//"(.)*
 \"(\\.|[^\"])*\"       return (STRING);
 \"(\\.|[^\"])*\n       printf("Adding missing \" to sting constant");

 "{"                {a[count++]='{';fexe=0;eatWS();return LC;}
 "("                {a[count++]='(';eatWS();return LP;}
 "["                {a[count++]='[';eatWS();return LB;}
 "}"                {check('{');eatWS();
                if(cflag)
                {
                    //stk[lbl++]=lcount++;
                    fprintf(fc,"lbl%d:\n",stk[--lbl]);
                    //stk[lbl++]=lcount++;
                    printf("%d\n",stk[lbl]);
                    cflag=0;
                }
                return RC;
            }
    "]"             {check('[');eatWS();return RB;}
    ")"             {check('(');eatWS();return RP;}
    "++" | "--"         return INCOP;
    [~!]                return UNOP;
     "*"                {eatWS();return STAR;}
    [/%]            {eatWS();return DIVOP;}
    "+"             {eatWS();return PLUS;}
     "-"                {eatWS();return MINUS;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:08:09.317

您需要一个包含定义的**.h**文件。您可以手动编写，但通常此文件由 Bison 生成。Flex 和 Bison 这两个工具经常一起使用。

Bison 是一个解析器生成器。它的输入是一个文件，您在其中编写了一个描述语言语法的语法，Bison 生成一个解析器。解析器（或“语法分析器”）是编译器（或类似工具）的一部分，它根据语言的语法分析输入。例如，解析器知道**if**语句可以但不一定有**else**部分。

Flex 是一个扫描器生成器，它从一个带有正则表达式的文件创建一个扫描器。扫描器（或“词法分析器”）是编译器（或类似工具）的一部分，用于分析输入并将其划分为“令牌”。标记可以是关键字（例如**if**）、运算符（例如**+**）、整数常量等。例如，扫描仪知道整数常量被写为一个或多个数字的序列。

扫描器在找到令牌时向解析器报告。例如，如果输入以**123**开头，扫描器可能会识别出这是一个整数常量，并将其报告给解析器。在 Flex 和 Bison 的情况下，它通过返回整数常量的令牌代码来做到这一点，它可能（仅作为示例）是**17**。但是由于扫描器和解析器必须就这些令牌代码达成一致，它们需要共同的定义。Bison 将生成令牌代码，如果给定标志**-d**，它将在 .h 文件中输出它们。

Thomas Niemann 的[Lex & Yacc 精简指南](http://www.epaperpress.com/lexandyacc/)很好地介绍了如何使用 Flex 和 Bison。（Lex 和 Yacc 是旧的原始工具，而 Flex 和 Bison 是相同工具的新免费版本。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T15:58:31.487

对于 yacc 和 lex 部分，当我使用 yacc -d xyz.y 命令时，这个错误消失了，其中 d 是标志，xyz 是我的 yacc 文件的文件。

# objective-c - ios pList 安全性

> ID：13331932
> 
> 赞同：0
> 
> 时间：2012-11-11T14:18:00.113
> 
> 标签：objective-c, ios, plist

我刚刚开始将游戏中的数据保存到 .plist 中，但我不太清楚它的安全性。

我将把玩家的整个游戏状态（包括瓷砖地图数据）保存在一个 plist 中。据我了解，您不能修改捆绑包中的 plist，但是我看到的所有示例代码都会创建一个存储在文档中的新动态 plist？玩家可以通过手机轻松更改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:19:56.890

> 玩家可以通过手机轻松更改吗？

仅当他们可以访问它时-先决条件是手机越狱。但在这种情况下，是的，他们可以轻松修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:28:00.840

即使没有越狱，plist 文件也可以轻松修改 -

1.  iExplorer 允许通过 USB 连接浏览 iPhone 应用程序文件夹。在这种情况下，可以将 plist 文件从 iPhone 复制到计算机，修改并加载到 iPhone 中。
2.  Plist 文件未加密地存储在备份中。因此可以在备份中修改文件并恢复到 iPhone 中。

使用钥匙串以获得更好的安全性。为了使其更安全，请使用自定义加密并在将游戏状态存储在设备上之前对其进行加密。

# java - 我想在关机后重用套接字（java）

> ID：13331936
> 
> 赞同：2
> 
> 时间：2012-11-11T14:18:41.323
> 
> 标签：java, sockets

声明的变量

```
protected Socket fileSocket;
protected OutputStream os;
fileSocket = new Socket(host, port + 1);
os = fileSocket.getOutputStream(); 
```

并在下一个代码中使用

```
File file;
FileInputStream fis;            
int readBytes;
try
{
    if(fileSocket.isOutputShutdown())
    {
        fileSocket.setKeepAlive(true);//this line
    }
    sendToServer(message);              
    bufFileName = message.toCharArray();
    fileName = new String(bufFileName, 6, bufFileName.length - 6);              
    file = new File(fileName);
    fis = new FileInputStream(file);
    while ((readBytes = fis.read()) != -1)
    {
        os.write(readBytes);
        os.flush();
    }
    fileSocket.shutdownOutput();
    fis.close();
    clientUI.display("Trans complete"); 
```

我发送一个文件并关闭 fileSocket。
我想重用filesocket，但找不到合适的方法。应该采取什么方法或操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:22:01.177

只需实例化一个新套接字。您不能使用已经关闭的套接字。那想尝试对您已经关闭的文件流进行文件操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:37:22.627

setKeepAlive() 不会按照你的想法做。一旦你关闭了套接字上的输出，你就不能再在套接字上进行任何输出了。一旦你关闭它，你就不能再使用它了。

# mysql - 致命错误：创建模块后在 drupal 6 中调用未定义函数错误

> ID：13331939
> 
> 赞同：3
> 
> 时间：2012-11-11T14:18:44.673
> 
> 标签：mysql, drupal-6

![在此处输入图像描述](../Images/250f2a82b62a7e291205e491fa2eabf1.png)我在 Drupal 6 网站上工作，虽然我是 Drupal 和 php 的新手。我正在根据现有模块的代码创建一个模块，我收到“致命错误：调用 ..../modules/cck/content.module(1694) 中的未定义函数 ...return_zip_codes() : eval ()'d 代码在第 2 行”错误。发生此错误时，我无法通过 Web 界面访问 drupal 站点。我已经删除了有问题的模块并尝试![在此处输入图像描述](../Images/5b61bada4f9a569159f2783d25b3aca2.png)使用 Drush 清除所有 cac hes 并运行 cron 并使用 mysql 命令行清除缓存表，但错误仍然存​​在。由于错误，运行 drush cron 和 drush cc all 也“中止”。当我用谷歌搜索错误时，我没有得到太多。我附上了我得到的原始错误的屏幕截图。

我在堆栈跟踪上注释掉了一行，并设法恢复了站点，但是当我单击链接注册新成员时出现另一个错误。还注释掉该行导致某些表单与登录页面的某些元素一起显示不正确。

我附上了我得到的错误的打印屏幕以及我编辑的一些代码。如果您需要我提供更多信息和代码，请告诉我。

谢谢

我在第 1694 行的 content.module 文件中注释掉的代码行

```
enter code here

  $allowed_values[$cid] = array();
if (isset($field['allowed_values_php'])) {
ob_start();
//    $result = eval($field['allowed_values_php']);
if (is_array($result)) {
  if ($flatten) {
    $result = content_array_flatten($result);
  }
  $allowed_values[$cid] = $result;
}
ob_end_clean();
} 
```

我创建的模块中导致错误的代码：

```
enter code here

    'widget_active' => '1',
'type' => 'text',
'required' => '1',
'multiple' => '0',
'module' => 'text',
'active' => '1',
'text_processing' => 0,
'max_length' => '',
'allowed_values' => '',
'allowed_values_php' => 'module_load_include(\'inc\', \'online_![enter image      description here][3]mem_apps\', \'/includes/online_mem_apps.zip_codes\');
return online_mem_apps_return_zip_codes(TRUE);',
'field_permissions' => array(
  'create' => 0,
  'edit' => 0,
  'edit own' => 0,
  'view' => 0,
  'view own' => 0,
), 
```

# python - 使用 python Popen 读取最后一行

> ID：13331940
> 
> 赞同：3
> 
> 时间：2012-11-11T14:18:47.973
> 
> 标签：python, stream, subprocess, pipe

我有一个简单的python程序：

测试.py：

```
import time
for i in range(100000):
    print i
    time.sleep(0.5) 
```

我想使用另一个执行上述程序的程序，以便在上述程序计数时读取最后一行输出。

```
import subprocess

process = subprocess.Popen("test",stdout=PIPE)
sleep(20) # sleeps an arbitrary time
print stdout.readlines()[-1] 
```

问题是`process.stdout.readlines()`等到 test.py 完成执行。有没有办法在程序执行时读取输出中写入的最后一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:30:39.813

您可以使用`collections.deque`仅保存最后指定的行数：

```
#!/usr/bin/env python
import collections
import subprocess
import time
import threading

def read_output(process, append):
    for line in iter(process.stdout.readline, ""):
        append(line)

def main():
    process = subprocess.Popen(["program"], stdout=subprocess.PIPE)
    # save last `number_of_lines` lines of the process output
    number_of_lines = 1
    q = collections.deque(maxlen=number_of_lines)
    t = threading.Thread(target=read_output, args=(process, q.append))
    t.daemon = True
    t.start()
    #
    time.sleep(20)

    # print saved lines
    print ''.join(q),
    # process is still running
    # uncomment if you don't want to wait for the process to complete
    ##process.terminate() # if it doesn't terminate; use process.kill()
    process.wait()

if __name__=="__main__":
    main() 
```

查看[仅打印输出部分的其他类似尾巴的解决方案](https://stackoverflow.com/a/4418891/4279)

如果您的子程序在非交互式运行时对其标准输出使用块缓冲（而不是行缓冲），[请参见此处。](https://stackoverflow.com/a/12471855/4279)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:02:14.763

用[sh.py](http://amoffat.github.com/sh/)相当简单：

```
import sh

def process_line(line):
    print line

process = sh.python("test.py", _out=process_line)
process.wait() 
```

# php - 在这个 php 脚本中会发生太多的连接吗？(mysql_select_db)

> ID：13331942
> 
> 赞同：1
> 
> 时间：2012-11-11T14:19:14.607
> 
> 标签：php, mysql

下面的脚本用于更新 100 个数据库的模式。

我正在调用 mysql_connect，mysql_select_db 是否会导致建立另一个连接，或者我可以吗？（我运行这个脚本来更新 100 个左右数据库的架构）

```
$conn = mysql_connect("localhost", "root", "PASSWORD");
$show_db_query = mysql_query('SHOW databases');
$databases = array();
while ($row = mysql_fetch_assoc($show_db_query)) 
{ 
    if (!in_array($row['Database'], $exclude_dbs))
    {
        $databases[] = $row['Database'];
    }
}

foreach($databases as $database)
{
    mysql_select_db($database, $conn);
    echo "Running queries on $database\n***********************************\n";
    foreach($sql_queries as $query)
    {
        if (!empty($query))
        {
            echo "$query;";
            if (!mysql_query($query))
            {
                echo "\n\nERROR: ".mysql_error()."\n\n";
            }
        }
    }
    echo "\n\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:24:21.760

只要`mysql_select_db`找到最后一个连接或与调用语句一起提供连接标识符，它就不会创建新连接。

由于您正在传递连接标识符，因此它不会创建与 mysql 的新连接。在这种多连接的情况下，您可以安全使用，但请注意`mysql`不再维护扩展，您可以尝试`mysqli`或`PDO`.

# mysql - 不使用 MySQL 返回所有必需的行

> ID：13331943
> 
> 赞同：0
> 
> 时间：2012-11-11T14:19:17.497
> 
> 标签：mysql, spring

所以这是我的问题：

我有 3 张桌子：

*   `ROLE`: RID , 姓名
*   `CLIENT`: CID, 姓名
*   `USER`：UID、RID、CID、用户名、密码

下面是我写的SQL语句：

```
SELECT USER.UID,USERNAME,PASSWORD,ROLE.NAME, ROLE.RID 
FROM USER 
INNER JOIN ROLE ON USER.RID=ROLE.RID 
WHERE CID=1; 
```

当实际应该有 2 行时，上面的语句只返回 1 行。

我不明白什么不起作用。

当我执行以下操作时，我得到了 2 行：SELECT * FROM USER WHERE CID =1;

请注意，我正在使用 spring 框架并且还实现了 RowMapper。下面是我的实际代码，其中包含根据 dbase 的字段名称。

```
public List<User> viewUserClient(int client_id) {
    String sql =
            "SELECT USER.ID,USERNAME,PASSWORD,ACTIVE,ROLE.NAME, ROLE.ID FROM USER INNER JOIN ROLE ON USER.ROLE_ID=ROLE.ID WHERE CLIENT_ID=?";
    List<User> users = this.getJdbcTemplate().query(sql, new Object[] { client_id }, new UserClientRowMapper());
    return users;
}

private static final class UserClientRowMapper implements RowMapper<User> {
    public User mapRow(ResultSet rs, int rowNum) throws SQLException {
        User user = new User();
        Client client = new Client();
        Role role = new Role();

        user.setID(rs.getInt("ID"));
        user.setUSERNAME(rs.getString("USERNAME"));
        user.setPASSWORD(rs.getString("PASSWORD"));
        user.setACTIVE(rs.getBoolean("ACTIVE"));

        role.setNAME(rs.getString("NAME"));
        role.setID(rs.getInt("ROLE.ID"));

        client.setId(rs.getInt("id"));
        client.setName(rs.getString("name"));

        user.setRole(role);
        user.setClient(client);
        return user;
    }

} 
```

**在此先感谢您的帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:25:14.577

当两个表中至少有一个匹配项时，INNER JOIN 关键字返回行。如果“USER”中有行与“ROLE”不匹配，则不会列出这些行；在您的普通选择查询返回的两个用户中，可能一个有一个空 RID 列值，或者一个不在 ROLE 表中的值。

使用左连接。

# php - 查询中的锂框架多个“或”语句（使用 mongoDB）

> ID：13331944
> 
> 赞同：1
> 
> 时间：2012-11-11T14:19:20.553
> 
> 标签：php, mongodb, lithium

我最近开始使用锂框架+ mongoDB。我想做一个包含多个 or 语句的非常简单的查询。我在数据库中有带有 publish_up 和 publish_down 字段的文章。我只想获取 pulbis_down 字段高于现在或 null 且 publish_up 字段低于现在或 null 的记录/文档。

```
$items = $article::find('all', array(
    'conditions' => array(
        '$or' => array(
            '$gt' => array('publish_down', $mongoDateNow),
            'publish_down' => $mongDateNull
        ),
        '$or' => array(
            '$lt' => array('publish_up', $mongoDateNow),
            'publish_up' => $mongDateNull
        ),
    )
)); 
```

当然这个片段是错误的，因此第二个 or 语句会覆盖第一个（因为相同的数组键）。我试图将它们包装到一个单独的数组中，但给出了错误。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:27:52.917

此查询将获取具有 (publish_down > now **OR** publish_down = null) **AND** (publish_up < now **OR** publish_up = null) 的文章

```
 $items = Articles::find('all', array(
        'conditions' => array(
            '$or' => array(
                array('publish_down' => array('$gt' => $mongoDateNow)),
                array('publish_down' => null)
            ),
            '$or' => array(
                array('publish_up' => array('$lt' => $mongoDateNow)),
                array('publish_up' => null)
            ),
        )
    )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T03:43:58.220

我认为正确的答案是：

```
'$and' => array(
    array(
        '$or'=>array(
            array('publish_up' => null),
            array('publish_up' => array('$lt' => $mongoDateNow))
        )
    ),
    array(
        '$or'=>array(
            array('publish_down' => null), 
            array('publish_down' => array('$gt' => $mongoDateNow))
        )
    )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:32:14.180

我不了解锂，但在 PHP 中，您可以使用多个 $OR，如下所示

```
$items = $article::find('all', array(
    'conditions' => array(
        '$or' => array(
        array(
            '$gt' => array('publish_down', $mongoDateNow),
            'publish_down' => $mongDateNull
        ),
        array(
            '$lt' => array('publish_up', $mongoDateNow),
            'publish_up' => $mongDateNull
        )
        ),
    )
)); 
```

# javascript - Chrome扩展脚本注入到每个打开的标签

> ID：13331945
> 
> 赞同：0
> 
> 时间：2012-11-11T14:19:31.623
> 
> 标签：javascript, google-chrome-extension, code-injection

我尝试根据示例构建简单的扩展： [从这里](https://stackoverflow.com/questions/9263671/google-chome-application-shortcut-how-to-auto-load-javascript/9310273#9310273)和[这里](https://stackoverflow.com/questions/9602022/chrome-extension-retrieving-gmails-original-message/9636008#9636008)
，我一定是在这里做错了什么。
我想要的只是在每个加载页面上开始（甚至在加载之前更好）它会弹出你好警报

清单.json

```
{
   "background": {
      "page": "background.html"
   },
   "content_scripts": [
    {
      "matches": ["http://*/*","https://*/*"],       
      "js": ["jquery-1.8.2.min.js","contentscript.js"],
      "run_at": "document_end"
    }
   ],
   "web_accessible_resources": [
    "script_inpage.js"
   ],
   "browser_action": {

      "default_popup": "popup.html",
      "default_title": "Test 123"
   },
   "content_security_policy": "script-src 'self'; media-src *; object-src 'self'",
   "description": "Simple Test 123.",

   "manifest_version": 2,
   "minimum_chrome_version": "18",
   "name": "Test 123",
   "permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "tabs",
   ],

   "version": "2.6"
} 
```

background.html 现在是空的

内容脚本.js：

```
var s = document.createElement('script');
s.src = chrome.extension.getURL('script_inpage.js');
(document.head||document.documentElement).appendChild(s);
s.onload = function() {
    s.parentNode.removeChild(s);
}; 
```

script_inpage.js：

```
alert("this is script"); 
```

即使我触发开发者控制台窗口也没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:29:00.067

您的清单文件无效，该`"permissions"`部分的最后一个条目后有一个多余的逗号：

```
"permissions": [ 
    "unlimitedStorage",
    "http://*/",
    "tabs", // <-- Remove that comma
], 
```

如果您希望脚本尽早运行，请使用`"run_at": "document_start"`而不是`"document_end"`. 然后，您的脚本将在之前运行`<head>`甚至`<body>`存在。

# java - 字符串是第二个子串吗？

> ID：13331955
> 
> 赞同：1
> 
> 时间：2012-11-11T14:21:09.217
> 
> 标签：java, string, class, substring

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我可能在某个地方犯了一个逻辑错误，但我不知道在哪里。即使条件似乎为 TRUE，输出也始终为 FALSE

```
public class Test {
  public static void main(String[] args) {

    String str1 ="Hello world";
    String str2 ="Hello world";

    if (checkSubstring(str1,str2)){
         System.out.println("Cool");
    }
    else 
         System.out.println("Not cool");
 }

 static boolean checkSubstring(String str1, String str2) {

    String s1 = str1;
    String s2 = str2;
    if (s1.substring(4)== s2.substring(4)){
      return true;  
    }
    else
    return false;
 }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:22:21.897

您应该始终使用`equals`方法来测试`string`.

`==`运算符检查两个`reference`是指向同一个对象还是不同的对象。因为`s1.substring()`and`s2.substring()`会生成两个不同的字符串对象，所以比较它们`reference`会给你`false`布尔值。

因此，在`checkSubstring`方法中，您应该像这样比较您的子字符串：-

```
if (s1.substring(4).equals(s2.substring(4))) {
    return true;
} else {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:23:06.187

`s1.substring(4)== s2.substring(4)`

在上面把它改成`s1.substring(4).equals( s2.substring(4))`

**-** `Objects`在 Java 中使用`equals()`方法进行比较。

**-**作为Java`String`中的**Object**，它必须以相同的方式处理。

**-**此外，如果您尝试比较 2 个字符串而不考虑它们的大小写，请使用`equalsIgnoreCase()`.

**-** "==" 用于比较**原始类型**，并检查 2`Object Reference Variables`是否**指向堆上的同一个对象。**

**例如：**

```
Dog d1 = new Dog();
Dog d2 = d1;

if (d1 == d2){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:23:29.907

你需要equals函数

```
static boolean checkSubstring(String str1, String str2) {

    String s1 = str1;
    String s2 = str2;
    if (s1.substring(4).equals(s2.substring(4))){
    return true;    
    }
    else
    return false;
} 
```

# jquery - jQuery自动完成建议结果中的链接？

> ID：13331958
> 
> 赞同：0
> 
> 时间：2012-11-11T14:21:34.743
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我想修改列表项的结果，以便可以选择或单击建议，但还要在文本后面的结果中包含“查找更多类似内容”链接。

目前，由自动完成生成的 html 将结果呈现为锚点，并且在语义上将 an 放入 an`a href`内部`a href`似乎是不可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:26:44.063

通过使用[twitter bootstrap](http://twitter.github.com/bootstrap/javascript.html#typeahead)使用 typeahead javascript

```
<input id="myinput" type="text" data-provide="typeahead"> 
```

并通过添加用jquery填充整个

```
$('#myinput').attr('data-items', '3');
$('#myinput').attr('data-source='["One", "Two", "Three"]'); 
```

# c++ - 链接器找不到库

> ID：13331959
> 
> 赞同：-5
> 
> 时间：2012-11-11T14:21:40.737
> 
> 标签：c++, linker, linker-errors

```
#include <wininet.h>
int main()
{

    auto res = InternetAttemptConnect(0);
    return 0;
} 
```

**我得到的错误（我使用 code::blocks）：**
未定义的引用 `InternetAttemptConnect@4'|

任何人都知道我需要在链接器设置中指定哪个库（哪个文件）才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:41:58.123

> 关键是我无法提供 .dll 文件的路径。

在运行时，您的程序将使用 DLL，但在构建时，您必须链接到与 DLL 关联的 LIB。

LIB 将位于您的编译器/SDK 目录中（包含您的 LIB 文件的目录的路径是链接器选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:02:53.280

链接`Wininet.lib`。

[使用带有 Code::Blocks 的库](http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/)

*PS你可以用谷歌来找出那些东西。很容易找到。*

# url - 根据 URL 评估 jsf bean 属性

> ID：13331960
> 
> 赞同：1
> 
> 时间：2012-11-11T14:21:41.250
> 
> 标签：url, jsf, jakarta-ee, jsf-2

有没有办法根据请求 URL 显示特定的 JSF 页面？

假设我有一个 JSF 页面“ `details.xhtml`”。托管 bean " `detailsBean`" 有一个对象列表，其中每个对象都有自己的 ID。现在，如果用户请求页面“ `../details.xhtml?id=1`”，则应在列表中查询 ID 为 1 的对象，并显示该对象的结果详细信息页面。

我已经写了一个转换器实现类，它可以从对象转换为ID，反之亦然，但我不知道如何正确使用它。我是否必须通过 JAX-RS 规范才能工作，还是有更简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:47:56.110

在 JSF 中，您可以通过使用所谓的视图参数来做到这一点。`metadata`您在Facelet 的部分中声明这些：

```
<f:metadata>         
    <f:viewParam name="id" value="#{yourBean.yourObject}" label="id" 
        converter="yourObjectConverter" 
    />
</f:metadata> 
```

这将从`id`请求 URL 中获取 URL 参数。例如，如果您请求与 一起出现的页面`localhost:8080/mypage.jsf?id=1`，那么`1`将被交给`yourObjectConverter`并且该转换器返回的任何内容都将设置在 中`yourBean.yourObject`。

因此，您的支持 bean 将获得转换后的对象。无需使用相同的查询代码一遍又一遍地污染您的支持 bean。

```
@ManagedBean
public class YourBean {

    private SomeObject someObject;

    public void setYourObject(SomeObject someObject) {
        this.someObject = someObject;
    }
} 
```

如果您的支持 bean 是视图范围的，您可能希望使用[OmniFaces](http://showcase.omnifaces.org/components/viewParam)变体`viewParam`，否则它将在每次回发后进行不必要的转换（如果您的转换器执行数据库查询，您肯定不希望这样做）。

完整的工作示例：

*   [http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/user_edit.xhtml](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/user_edit.xhtml)
*   [http://code.google.com/p/javaee6-crud-example/source/browse/src/backing/UserEdit.java](http://code.google.com/p/javaee6-crud-example/source/browse/src/backing/UserEdit.java)

进一步阅读：

*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.nl/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)
*   [无状态与有状态 JSF 视图参数](http://jdevelopment.nl/stateless-stateful-jsf-view-parameters)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T15:28:52.810

You can achieve this with plain JSF with the following steps

1.  Capture the ID in the request to determine what object is being queried for in your `DetailsBean` from the request parameter. There are many ways to achieve this, one of which is adding the following annotation to your managed bean (this is currently only permitted for a `@RequestScoped` bean, see why [here](https://stackoverflow.com/a/4889226/1530938)).

    ```
     @ManagedProperty(value="#{param.id}")
       int requiredObjectId; 
    ```

    The annotation above will capture the `id` parameter from the request and assign it to the `requiredObjectId` variable.

2.  Using the captured Id, setup your object in your bean in a `@PostConstruct` method

    ```
     @PostConstruct
       public void queryForObject(){

       //use the requiredObjectId variable to query and setup the object in the backing bean

       } 
    ```

    The object retrieved should be assigned as an instance variable of your managed bean

3.  In your view, you could then reference the queried object that has been setup in the backing bean

    ```
     <h:panelGrid columns="2">
         <h:outputText value="Title"/>
         <h:outputText value="#{detailsBean.selectedObject.title}"/>
      </h:panelGrid> 
    ```

If your bean is in a scope broader than the request scope, you'll need a combination of constructs to cleanly pull that request parameter before view rendering.

1.  Capture the request parameter *within* the JSF view itself using

    ```
    <f:metadata>
     <f:viewParam name="id" value="#{detailsBean.requiredObjectId}" required="true" requiredMessage="You must provide an Object Id"/>         
    </f:metadata>

        **OR** 
    ```

2.  Due to the nature of JSF Lifecycle processing, doing the above alone may not make the value available for your use in time for object setup. You could use the following instead.

    ```
     <f:metadata>
        <f:event type="preRenderView" listener="#{detailsBean.setObjectId}" />         
    </f:metadata> 
    ```

    What we've done here is specify a method (that captures the `id`) in the backing bean that must be executed before the view is rendered, ensuring that the `id` parameter is available as at the time you need it. Proceed with step 3, only if you're using `<f:event/>` above.

3.  In the backing bean, you now define the `setObjectId` method

    ```
     public void setObjectId(){

      Map<String,String> requestParams =      FacesContext.getExternalContext().getRequestParameterMap();
      requiredObjectId =  Integer.parseInt(requestParams.get("id"));

      } 
    ```

Note that the above option is generally a work around/hack and not a clean solution as such

# java-7 - 当注册目录位于网络驱动器上时，Java 7 WatchService 不会生成事件

> ID：13331961
> 
> 赞同：5
> 
> 时间：2012-11-11T14:21:42.170
> 
> 标签：java-7, network-drive, watchservice

我知道这是在一年前在其他地方被问到的，但我正在寻找任何更新。

我在 Java 7 中有一个程序，它使用 WatchService 来监视一个目录以查找在那里创建的新文件。如果我在本地机器上注册一个目录（例如 c:\NewFiles），那么一切都很好。但是，当我尝试让它收听网络驱动器上的文件夹时，它会编译并运行，但会立即退出，因为它似乎没有收到任何事件的通知......这只是我的代码片段......

```
 private final WatchService watcher;
 private final Map<WatchKey, Path> keys;
        this.watcher = FileSystems.getDefault().newWatchService();
        this.keys = new HashMap<>(); 
```

我注册目录...

```
String srcDirPath = "G:\\NewFiles";
Path dir = Paths.get(srcDirPath);
    WatchKey key = dir.register(watcher, ENTRY_CREATE, ENTRY_DELETE, ENTRY_MODIFY);
    keys.put(key, dir); 
```

然后在检查事件的循环结束时......

```
 if (keys.isEmpty()) {
                System.out.println("Drive is inaccessible");
                break;
            } 
```

在这里，我总是收到“驱动器无法访问”警告。我尝试将我的 Java 文件复制到这个网络目录并从那里运行它们，但我遇到了同样的问题。

是否可以从本地机器上运行这样的 Watchservice 来监听网络驱动器上目录的更改？我在这里遇到权限或防火墙问题吗？我使用的是 Windows 7，并且很可能网络驱动器也在 Windows 7 机器上。

# database - B+ 树索引大小给定数据大小

> ID：13331963
> 
> 赞同：1
> 
> 时间：2012-11-11T14:21:54.213
> 
> 标签：database, indexing

如果我在具有 2KB 页面并使用 64 位指针的数据库中为键表 (a,b,c) 创建 B+-tree 索引，其中 a、b 和 c 的大小均为 4 个字节，并且每个的总大小记录为 88 字节。

如果表有 36,279 行，则索引深度的可能值范围是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:06:10.010

对于最小容量：

2 * 天花板[n/2]^(d-2) * 天花板[(n-1)/2] = 36279

解决 d 给你 3.5，所以深度是 4。

对于最大容量：

n^(d-1) * (n-1) = 36279

解决 d 给你 2.3 所以深度是 3。

因此答案是 3-4。

哦，n 是 102。

# haskell - 模板 Haskell 可以生成多参数类型类实例吗？

> ID：13331965
> 
> 赞同：6
> 
> 时间：2012-11-11T14:22:03.013
> 
> 标签：haskell, template-haskell

的最新（2.8.0.0）定义`Dec`具有以下实例构造函数：

```
InstanceD Cxt Type [Dec] 
```

似乎只能实例化一种类型。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T15:09:05.563

是的，支持多参数类型类。

有点令人困惑的是，**该`Type`参数指的是整个实例 head**，尽管它不是真正的类型，但它在语法上看起来很像一个类型，该类型`Type`被重用于此目的。

因此，如果要生成多参数`instance Foo Int Bool`，则需要使用“类型” `Foo Int Bool`，例如这样构造：

```
(ConT (mkName "Foo") `AppT` ConT (mkName "Int")) `AppT` ConT (mkName "Bool") 
```

这是一个完整的例子：

```
{-# LANGUAGE MultiParamTypeClasses, TemplateHaskell #-}

import Language.Haskell.TH

class Foo a b where
  foo :: (a, b)

$(return [InstanceD [] (((ConT (mkName "Foo")) `AppT` ConT (mkName "Int")) `AppT` ConT (mkName "Bool"))
   [ValD (VarP (mkName "foo")) 
         (NormalB (TupE [LitE (IntegerL 42), ConE (mkName "False")])) []]])

main = print (foo :: (Int, Bool)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T16:16:34.180

回答这个问题和类似问题的一个简单方法是使用`runQ`拼接定义。例如在 ghci 中：

```
$ ghci
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Prelude> :set -XTemplateHaskell
Prelude> :set -XMultiParamTypeClasses 
Prelude> import Language.Haskell.TH
Prelude Language.Haskell.TH> class Class a b where
Prelude Language.Haskell.TH> runQ [d| instance Class Int Bool where |]
[InstanceD [] (AppT (AppT (ConT :Interactive.Class) (ConT GHC.Types.Int)) (ConT GHC.Types.Bool)) []] 
```

这显示了所需的确切形式，替换`Class`为您正在使用的任何类。

# php - php数组内爆

> ID：13331970
> 
> 赞同：1
> 
> 时间：2012-11-11T14:22:23.357
> 
> 标签：php, arrays, implode

我有这个数组：

```
array (size=5)
  35 => string '3' (length=1)
  24 => string '6' (length=1)
  72 => string '1' (length=1)
  16 => string '5' (length=1)
  81 => string '2' (length=1) 
```

我想内爆 id 以获得：

```
$str = '35-3|24-6|72-1|16-5|81-2'; 
```

如何以简单的方式获得它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T14:28:25.060

一种可能性是这样的

```
function mapKeyVal($k, $v) {
    return $k . '-' . $v;
}

echo implode('|', array_map('mapKeyVal', 
                            array_keys($arry), 
                            array_values($arry)
                           )
      ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T14:25:39.293

您~~不能~~使用 implode 来做到这一点，请参阅下面的@havelock 答案，但是使用循环或其他形式的迭代会更容易。

```
$str = "";

foreach ($array as $key => $value) {

    $str .= $key . "-" . $value . "|";

}

$str = substr(0, strlen($str)-1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T14:26:29.257

我没有测试过这个，但它应该很简单......

```
foreach($array as $key=>$item){
    $new_arr[] = $key."-".$item;
}

$str = implode('|', $new_arr); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T14:41:07.297

## 解决方案

您可以通过加入字符串来干净地完成它，同时使用例如。自定义关联映射函数，如下所示：

```
function array_map_associative($callback, $array){
    $result = array();
    foreach ($array as $key => $value){
        $result[] = call_user_func($callback, $key, $value);
    }
    return $result;
} 
```

## 完整示例和测试

使用它的完整解决方案可能如下所示：

```
<?php

function array_map_associative($callback, $array){
    $result = array();
    foreach ($array as $key => $value){
        $result[] = call_user_func($callback, $key, $value);
    }
    return $result;
}

function callback($key, $value){
    return $key . '-' . $value;
}

$data = array(
    35 => '3',
    24 => '6',
    72 => '1',
    16 => '5',
    81 => '2',
);

$result = implode('|', array_map_associative('callback', $data));

var_dump($result); 
```

结果是：

```
string(24) "35-3|24-6|72-1|16-5|81-2" 
```

这符合您的预期。

证明在这里：http: [//ideone.com/HPsVO6](http://ideone.com/HPsVO6)

# django - Sentry 如何汇总错误？

> ID：13331973
> 
> 赞同：26
> 
> 时间：2012-11-11T14:22:30.477
> 
> 标签：django, sentry

我正在使用 Sentry（在 django 项目中），我想知道如何正确聚合错误。我将某些用户操作记录为错误，因此没有底层系统异常，并且正在使用该`culprit`属性设置一个友好的错误名称。该消息是模板化的，并且包含一条公共消息（“用户 'x' 无法执行操作，因为 'y'”），但绝不完全相同（不同的用户，不同的条件）。

Sentry 显然在后台使用了一组属性来确定是否将错误聚合为相同的异常，但是尽管查看了代码，但我无法弄清楚如何。

任何人都可以缩短我必须深入研究代码并告诉我需要设置哪些属性才能按照我的意愿管理聚合的捷径吗？

[更新 1：事件分组]

此行出现在 sentry.models.Group 中：

```
class Group(MessageBase):
    """
    Aggregated message which summarizes a set of Events.
    """
    ...

    class Meta:
        unique_together = (('project', 'logger', 'culprit', 'checksum'),)
    ... 
```

这是有道理的——我目前正在设置的项目、记录器和罪魁祸首——问题是`checksum`。我将进一步调查，但是“校验和”表明二进制等价，这永远不会起作用 - 必须可以对具有不同属性的相同异常的实例进行分组？

[更新 2：事件校验和]

事件校验和来自`sentry.manager.get_checksum_from_event`方法：

```
def get_checksum_from_event(event):
    for interface in event.interfaces.itervalues():
        result = interface.get_hash()
        if result:
            hash = hashlib.md5()
            for r in result:
                hash.update(to_string(r))
            return hash.hexdigest()
    return hashlib.md5(to_string(event.message)).hexdigest() 
```

下一站——活动`interfaces`从何而来？

[更新 3：事件接口]

我已经弄清楚[接口](http://sentry.readthedocs.org/en/latest/developer/interfaces/index.html)是指描述传递给哨兵事件的数据的标准机制，并且我正在使用标准`sentry.interfaces.Message`和`sentry.interfaces.User`接口。

根据异常实例，这两者都将包含不同的数据——因此校验和永远不会匹配。有什么方法可以将这些从校验和计算中排除？（或者至少是`User`接口值，因为它必须不同——`Message`我可以标准化的接口值。）

[更新4：解决方案]

下面分别介绍和接口的两个`get_hash`函数：`Message``User`

```
# sentry.interfaces.Message
def get_hash(self):
    return [self.message]

# sentry.interfaces.User
def get_hash(self):
    return [] 
```

看看这两个，只有`Message.get_hash`接口会返回一个由`get_checksum_for_event`方法获取的值，因此这是将返回的值（散列等）。这样做的最终效果是校验和在消息上进行评估单独 - 这在理论上意味着我可以标准化消息并保持用户定义的唯一性。

我已经在这里回答了我自己的问题，但希望我的调查对遇到同样问题的其他人有用。（顺便说一句，我还提交了针对 Sentry 文档的拉取请求作为其中的一部分 ;-)）

*（注意任何使用/扩展 Sentry 和自定义接口的人 - 如果你想避免你的接口被用于对异常进行分组，请返回一个空列表。）*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-11T15:29:57.660

请参阅我在问题本身中的最终更新。事件聚合在“项目”、“记录器”、“罪魁祸首”和“校验和”属性的组合上。其中前三个相对容易控制——第四个，“校验和”是作为事件一部分发送的数据类型的函数。

Sentry 使用“接口”的概念来控制传入数据的结构，每个接口都带有一个实现`get_hash`，用于为传入的数据返回一个哈希值。Sentry 带有许多标准接口（' Message'、'User'、'HTTP'、'Stacktrace'、'Query'、'Exception'），这些都有自己的`get_hash`. 默认值（继承自 Interface 基类）是一个空列表，不会影响校验和。

在没有任何有效接口的情况下，事件消息本身被散列并作为校验和返回，这意味着消息需要是唯一的才能对事件进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T15:50:25.600

我遇到了异常的常见问题。目前我们的系统只捕获异常，我很困惑为什么其中一些合并到一个错误中，而另一些则没有。根据您上面的信息，我提取了“get_hash”方法并试图找到“引发”我的错误的差异。我发现分组错误都来自一个自写的异常类型，它有一个空的 Exception.message 值。

get_hash 输出：

```
[<class 'StorageException'>, StorageException()] 
```

并且多个错误来自具有填充消息值的异常类（jinja模板引擎）

```
[<class 'jinja2.exceptions.UndefinedError'>, UndefinedError('dict object has no attribute LISTza_*XYZ*',)] 
```

不同的异常消息触发不同的报告，在我的情况下，合并是由于缺少 Exception.message 值引起的。

执行：

```
class StorageException(Exception):

def __init__(self, value):
    Exception.__init__(self)
    self.value = value 
```

# cloud-foundry - 微云无法访问目标

> ID：13331983
> 
> 赞同：0
> 
> 时间：2012-11-11T14:23:35.890
> 
> 标签：cloud-foundry

我是 Cloud Foundary 的新手，正在尝试设置一个本地 Micro Cloud 来进行一些开发。我在 OS X 10.8.2 下有 VM Fusion 5，Micro Cloud 版本报告 v116-20121101.000204。

对于设置，我使用内部 LAN 的 IP 进行了静态 IP，但没有任何工作（无法同步 DNS）。我最终将虚拟机网络适配器更改为桥接网络 - 自动检测，这似乎解决了问题。我可以从主机操作系统上的终端（或我的局域网上的任何其他设备）ping 微云的静态 IP 设置。

问题是 vmc 和 Eclipse Cloud Foundary 似乎都无法访问我的云域。这是我使用“vmc target”在命令行上遇到的错误：

```
vmc target api.xxx.cloudfoundary.me
Host is not available or is not valid: 'http://api.xxx.cloudfoundary.me'
Would you like see the response? [yN]: y
Cannot access target (getaddrinfo: nodename nor servname provided, or not known) 
```

由于我是整个过程的新手，我真的不知道其中的任何一个尝试做什么，所以我什至不知道从哪里开始寻找。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:43:15.537

当你执行这些命令时会发生什么？您的 VM 报告的 IP 是什么，是通过 nslookup 解析的 IP？您可能需要使用 VM 控制台上的选项 5 来重新配置网络。

```
jbayer-mbpro:foo jbayer$ vmc micro status
Micro Cloud Foundry VM currently in online mode
VMX Path: /Users/jbayer/dev/micro/micro.vmx
Domain: jbayermicro.cloudfoundry.me
IP Address: 192.168.129.145

jbayer-mbpro:foo jbayer$ vmc target api.jbayermicro.cloudfoundry.me
Successfully targeted to [http://api.jbayermicro.cloudfoundry.me]

jbayer-mbpro:foo jbayer$ vmc register jbayer@blah.com
Password: ********
Verify Password: ********
Creating New User: OK
Attempting login to [http://api.jbayermicro.cloudfoundry.me]
Successfully logged into [http://api.jbayermicro.cloudfoundry.me]

jbayer-mbpro:foo jbayer$ vmc info

VMware's Cloud Application Platform
For support visit http://support.cloudfoundry.com

Target:   http://api.jbayermicro.cloudfoundry.me (v0.999)
Client:   v0.3.23

User:     jbayer@blah.com
Usage:    Memory   (0B of 2.0G total)
          Services (0 of 16 total)
          Apps     (0 of 16 total) 
```

# linq - 如何将自定义比较器与 Linq Distinct 方法一起使用？

> ID：13331985
> 
> 赞同：14
> 
> 时间：2012-11-11T14:23:45.647
> 
> 标签：linq, distinct, icomparer

我在读一本关于 Linq 的书，看到 Distinct 方法有一个需要比较器的重载。这将是一个很好的解决方案，我想从集合中获取不同的实体，但希望在实体 ID 上进行比较，即使其他属性不同。

根据这本书，如果我有一个 Gribulator 实体，我应该能够创建一个像这样的比较器......

```
private class GribulatorComparer : IComparer<Gribulator> {
  public int Compare(Gribulator g1, Gribulator g2) {
    return g1.ID.CompareTo(g2.ID);
  }
} 
```

...然后像这样使用它...

```
List<Gribulator> distinctGribulators
  = myGribulators.Distinct(new GribulatorComparer()).ToList(); 
```

但是，这会产生以下编译器错误...

“System.Collections.Generic.List”不包含“Distinct”的定义和最佳扩展方法重载“System.Linq.Enumerable.Distinct(System.Collections.Generic.IEnumerable, System.Collections.Generic.IEqualityComparer)”有一些无效的论点

参数 2：无法从 'LinqPlayground.Program.GribulatorComparer' 转换为 'System.Collections.Generic.IEqualityComparer'

我搜索了一下，看到了很多使用这样的代码的例子，但没有关于编译器错误的抱怨。

我究竟做错了什么？另外，这是最好的方法吗？我想要一个一次性的解决方案，所以不想开始更改实体本身的代码。我希望实体保持正常，但就在这个地方，仅按 ID 进行比较。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T14:31:27.597

您将比较器实现为`IComparer<T>`，LINQ 方法重载需要实现`IEqualityComparer`：

```
private class GribulatorComparer : IEqualityComparer<Gribulator> {
  public bool Equals(Gribulator g1, Gribulator g2) {
    return g1.ID == g2.ID;
  }
} 
```

编辑：

为了澄清起见，该`IComparer`接口可用于排序，因为这基本上是该`Compare()`方法的作用。

像这样：

```
items.OrderBy(x => new ItemComparer());

private class ItemComparer : IComparer<Item>
{
    public int Compare(Item x, Item y)
    {
        return x.Id.CompareTo(y.Id)
    }
} 
```

这将使用该比较器对您的集合进行排序，但是 LINQ 为简单字段（如 int Id）提供了一种方法。

```
items.OrderBy(x => x.Id); 
```

# objective-c - UIScrollView 在对象按下时反弹

> ID：13331986
> 
> 赞同：1
> 
> 时间：2012-11-11T14:23:48.083
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个 UIScrollView，里面有一堆按钮和开关。当按下这些项目中的任何一个时，滚动视图会反弹到屏幕顶部。在调试此问题时，我将滚动视图的内容大小增加到比我需要的空间大得多，并且问题没有发生。我还应该提到，在这个视图控制器内的对象层次结构中，我没有 UIView，这可能会导致我的问题。我尝试添加一个，但它似乎破坏了很多 UIScrollView 功能。有没有人知道为什么会发生这种情况，或者在使用 UIScrollView 时应该采用什么层次结构。

谢谢。

# haskell - 在管道内使用持久化

> ID：13331988
> 
> 赞同：11
> 
> 时间：2012-11-11T14:23:53.810
> 
> 标签：haskell, persistent, yesod, conduit

首先，我想要完成的任务的简化版本：我有几个大文件（总计 30GB），我想要修剪重复条目。为此，我建立了一个数据哈希数据库，并逐个打开文件，对每个项目进行哈希处理，并将其记录在数据库和输出文件中，前提是其哈希尚未在数据库中。

我知道如何使用迭代器、枚举器来做到这一点，并且我想尝试使用管道。我也知道如何使用管道，但现在我想使用管道和持久性。我遇到了类型问题，可能还有`ResourceT`.

这里有一些伪代码来说明这个问题：

```
withSqlConn "foo.db" $ runSqlConn $ runResourceT $ 
     sourceFile "in" $= parseBytes $= dbAction $= serialize $$ sinkFile "out" 
```

问题出在`dbAction`功能上。我想访问这里的数据库，自然而然。由于它所做的动作基本上只是一个过滤器，我首先想到的是这样写：

```
dbAction = CL.mapMaybeM p
     where p :: (MonadIO m, MonadBaseControl IO (SqlPersist m)) => DataType -> m (Maybe DataType)
           p = lift $ putStrLn "foo" -- fine
           insert $ undefined -- type error!
           return undefined 
```

我得到的具体错误是：

```
Could not deduce (m ~ b0 m0)
from the context (MonadIO m, MonadBaseControl IO (SqlPersist m))
  bound by the type signature for
             p :: (MonadIO m, MonadBaseControl IO (SqlPersist m)) =>
                           DataType -> m (Maybe DataType)
  at tools/clean-wac.hs:(33,1)-(34,34)
  `m' is a rigid type variable bound by
      the type signature for
        p :: (MonadIO m, MonadBaseControl IO (SqlPersist m)) =>
                      DataType -> m (Maybe (DataType))
      at tools/clean-wac.hs:33:1
Expected type: m (Key b0 val0)
  Actual type: b0 m0 (Key b0 val0) 
```

请注意，这可能是由于我在设计类型签名时做出的错误假设。如果我注释掉类型签名并删除该`lift`语句，则错误消息将变为：

```
No instance for (PersistStore ResourceT (SqlPersist IO))
  arising from a use of `p'
Possible fix:
  add an instance declaration for
  (PersistStore ResourceT (SqlPersist IO))
In the first argument of `CL.mapMaybeM', namely `p' 
```

所以这意味着我们根本无法`PersistStore`通过`ResourceT`?

如果不使用，我也无法编写自己的导管`CL.mapMaybeM`：

```
dbAction = filterP
filterP :: (MonadIO m, MonadBaseControl IO (SqlPersist m)) => Conduit DataType m DataType
filterP = loop
    where loop = awaitE >>= either return go
          go s = do lift $ insert $ undefined -- again, type error
                    loop 
```

这导致了另一个我不完全理解的类型错误。

```
Could not deduce (m ~ b0 m0)
from the context (MonadIO m, MonadBaseControl IO (SqlPersist m))
  bound by the type signature for
             filterP :: (MonadIO m,
                                 MonadBaseControl IO (SqlPersist m)) =>
                                Conduit DataType m DataType
     `m' is a rigid type variable bound by
      the type signature for
        filterP :: (MonadIO m,
                            MonadBaseControl IO (SqlPersist m)) =>
                           Conduit DataType m DataType
Expected type: Conduit DataType m DataType
  Actual type: Pipe
                 DataType DataType DataType () (b0 m0) ()
In the expression: loop
In an equation for `filterP' 
```

所以，我的问题是：是否可以像我打算在管道内一样使用持久性？如果，如何？我知道，因为我可以`liftIO`在管道内使用，所以我可以去使用，比如说`HDBC`，但我想明确地使用 persistent 以了解它是如何工作的，并且因为我喜欢它的 db-backend 不可知论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-02T07:37:38.540

下面的代码对我来说编译得很好。框架是否有可能在此期间继续发展，而现在一切正常？

但是请注意，随着世界发生了一些变化，或者我没有您的所有代码，我必须进行以下更改。我在 GHC 7.6.3 中使用了管道 1.0.9.3 和持久性 1.3.0。

*   省略`parseBytes`，`serialise`因为我没有你的定义，`DataType = ByteString`而是定义了。

*   为值引入了`Proxy`参数和显式类型签名，`undefined`以避免类型族注入问题。这些可能不会出现在您的实际代码中，因为它将具有具体或外部确定的`val`.

*   已使用`await`而不是`awaitE`仅用`()`作替换`Left`案例的类型，`awaitE`已停用。

*   将一个虚拟`Connection`创建函数传递给`withSqlConn`- 也许我应该使用一些 Sqlite 特定函数？

这是代码：

```
{-# LANGUAGE FlexibleContexts, NoMonomorphismRestriction,
             TypeFamilies, ScopedTypeVariables #-}

module So133331988 where

import Control.Monad.Trans
import Database.Persist.Sql
import Data.ByteString
import Data.Conduit
import Data.Conduit.Binary
import Data.Proxy

test proxy =
    withSqlConn (return (undefined "foo.db")) $ runSqlConn $ runResourceT $ 
         sourceFile "in" $= dbAction proxy $$ sinkFile "out"

dbAction = filterP

type DataType = ByteString

filterP
    :: forall m val
     . ( MonadIO m, MonadBaseControl IO (SqlPersist m)
       , PersistStore m, PersistEntity val
       , PersistEntityBackend val ~ PersistMonadBackend m)
    => Proxy val
    -> Conduit DataType m DataType
filterP Proxy = loop
    where loop = await >>= maybe (return ()) go
          go s = do lift $ insert (undefined :: val)
                    loop 
```

# java - 如何使用 JavaMail 处理多部分/替代邮件？

> ID：13331989
> 
> 赞同：13
> 
> 时间：2012-11-11T14:24:00.933
> 
> 标签：java, email, jakarta-mail, attachment, multipart

我编写了一个应用程序，它从收件箱中获取所有电子邮件，过滤包含特定字符串的电子邮件，然后将这些电子邮件放入 ArrayList 中。

将电子邮件放入列表后，我正在对所述电子邮件的主题和内容做一些事情。这适用于没有附件的电子邮件。但是当我开始使用带有附件的电子邮件时，一切都不再按预期工作了。

这是我的代码：

```
public void getInhoud(Message msg) throws IOException {
    try {
        cont = msg.getContent();
    } catch (MessagingException ex) {
        Logger.getLogger(ReadMailNew.class.getName()).log(Level.SEVERE, null, ex);
    }
    if (cont instanceof String) {
        String body = (String) cont;

    } else if (cont instanceof Multipart) {
        try {
            Multipart mp = (Multipart) msg.getContent();
            int mp_count = mp.getCount();
            for (int b = 0; b < 1; b++) {
                    dumpPart(mp.getBodyPart(b));
            }
        } catch (Exception ex) {
            System.out.println("Exception arise at get Content");
            ex.printStackTrace();
        }
    }
}

public void dumpPart(Part p) throws Exception {
    email = null;
    String contentType = p.getContentType();
    System.out.println("dumpPart" + contentType);
    InputStream is = p.getInputStream();
    if (!(is instanceof BufferedInputStream)) {
        is = new BufferedInputStream(is);
    }
    int c;
    final StringWriter sw = new StringWriter();
    while ((c = is.read()) != -1) {
        sw.write(c);
    }

    if (!sw.toString().contains("<div>")) {
        mpMessage = sw.toString();
        getReferentie(mpMessage);
    }
} 
```

电子邮件中的内容存储在字符串中。

当我尝试阅读没有附件的邮件时，此代码工作正常。但是，如果我使用带有附件的电子邮件，则字符串还包含 HTML 代码甚至附件编码。最终我想存储电子邮件的附件和内容，但我的首要任务是只获取没有任何 HTML 或附件编码的文本。

现在我尝试了一种不同的方法来处理不同的部分：

```
public void getInhoud(Message msg) throws IOException {
    try {
        Object contt = msg.getContent();

        if (contt instanceof Multipart) {
            System.out.println("Met attachment");
            handleMultipart((Multipart) contt);
        } else {
            handlePart(msg);
            System.out.println("Zonder attachment");

        }
    } catch (MessagingException ex) {
        ex.printStackTrace();
    }
}

public static void handleMultipart(Multipart multipart)
        throws MessagingException, IOException {
    for (int i = 0, n = multipart.getCount(); i < n; i++) {
        handlePart(multipart.getBodyPart(i));
        System.out.println("Count "+n);
    }
}

 public static void handlePart(Part part)
        throws MessagingException, IOException {

    String disposition = part.getDisposition();
    String contentType = part.getContentType();
    if (disposition == null) { // When just body
        System.out.println("Null: " + contentType);
        // Check if plain
        if ((contentType.length() >= 10)
                && (contentType.toLowerCase().substring(
                0, 10).equals("text/plain"))) {
            part.writeTo(System.out);
        } else if ((contentType.length() >= 9)
                && (contentType.toLowerCase().substring(
                0, 9).equals("text/html"))) {
            part.writeTo(System.out);
        } else if ((contentType.length() >= 9)
                && (contentType.toLowerCase().substring(
                0, 9).equals("text/html"))) {
            System.out.println("Ook html gevonden");
            part.writeTo(System.out);
        }else{
            System.out.println("Other body: " + contentType);
            part.writeTo(System.out);
        }
    } else if (disposition.equalsIgnoreCase(Part.ATTACHMENT)) {
        System.out.println("Attachment: " + part.getFileName()
                + " : " + contentType);
    } else if (disposition.equalsIgnoreCase(Part.INLINE)) {
        System.out.println("Inline: "
                + part.getFileName()
                + " : " + contentType);
    } else {
        System.out.println("Other: " + disposition);
    }
} 
```

这是从`System.out.printlns`

```
Null: multipart/alternative; boundary=047d7b6220720b499504ce3786d7
Other body: multipart/alternative; boundary=047d7b6220720b499504ce3786d7
Content-Type: multipart/alternative; boundary="047d7b6220720b499504ce3786d7"

--047d7b6220720b499504ce3786d7
Content-Type: text/plain; charset="ISO-8859-1"

'Text of the message here in normal text'

--047d7b6220720b499504ce3786d7
Content-Type: text/html; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

'HTML code of the message' 
```

这种方法返回电子邮件的正常文本，但也返回邮件的 HTML 编码。我真的不明白为什么会发生这种情况，我用谷歌搜索了它，但似乎没有其他人有这个问题。

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-05T04:51:11.867

我发现使用 JavaMail 库阅读电子邮件比预期的要困难得多。我不责怪 JavaMail API，而是责怪我对[RFC-5322](https://www.rfc-editor.org/rfc/rfc5322)的理解不佳——互联网电子邮件的官方定义。

作为一个思想实验：考虑一封电子邮件在现实世界中会变得多么复杂。可以在消息中“无限”地嵌入消息。每条消息本身可能有多个附件（二进制或人类可读的文本）。现在想象一下这个结构在解析后在 JavaMail API 中变得多么复杂。

使用 JavaMail 遍历电子邮件时可能会有所帮助的一些提示：

*   `Message`并且`BodyPart`都实现了`Part`.
*   `MimeMessage`并且`MimeBodyPart`都实现了`MimePart`.
*   在可能的情况下，将所有内容视为`Part`or `MimePart`。这将允许更容易地构建通用遍历方法。

这些`Part`方法将有助于遍历：

*   `String getContentType()`: 以 MIME 类型开头。您可能很想将其视为 MIME 类型（带有一些 hacking/cutting/matching），但不要这样做。最好只在调试器内部使用此方法进行检查。
    *   奇怪的是，不能直接提取 MIME 类型。而是使用`boolean isMimeType(String)`匹配。仔细阅读文档以了解强大的通配符，例如`"multipart/*"`.
*   `Object getContent()`: 可能是`instanceof`:
    *   `Multipart``Part`-- 更多的 容器
        *   转换为，然后使用and`Multipart`迭代为从零开始的索引`int getCount()``BodyPart getBodyPart(int)`
            *   注意：`BodyPart`实现`Part`
        *   根据我的经验，Microsoft Exchange 服务器会定期提供正文文本的两个副本：纯文本和 HTML。
            *   要匹配纯文本，请尝试：`Part.isMimeType("text/plain")`
            *   要匹配 HTML，请尝试：`Part.isMimeType("text/html")`
    *   `Message`(implements `Part`) -- 嵌入或附加的电子邮件
    *   `String`（只是正文——纯文本或 HTML）
        *   请参阅上面有关 Microsoft Exchange 服务器的说明。
    *   `InputStream`（可能是 BASE64 编码的附件）
*   `String getDisposition()`: 值可能是`null`
    *   如果`Part.ATTACHMENT.equalsIgnoreCase(getDisposition())`，则调用`getInputStream()`以获取附件的原始字节。

最后，我发现[官方 Javadocs](https://javamail.java.net/nonav/docs/api/)排除了`com.sun.mail`包中的所有内容（可能还有更多）。如果你需要这些，直接阅读代码，或者通过[下载源码](https://java.net/projects/javamail/downloads/directory/source)`mvn javadoc:javadoc`并在项目的`mail`项目模块中运行生成未经过滤的Javadocs。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-11T19:17:24.683

您找到这些 JavaMail FAQ 条目了吗？

*   [如何阅读带有附件的邮件并保存附件？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#readattach)
*   [如何判断邮件是否有附件？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#hasattach)
*   [如何在包含附件的邮件中找到主要邮件正文？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T15:29:02.893

遵循 Kevin 的有用建议，根据规范名称（或简单名称）分析您的电子邮件内容 Java 对象类型也会很有帮助。例如，查看我现在收到的一个收件箱，在 486 条消息中，399 条是字符串，87 条是 MimeMultipart。这表明 - 对于**我的**典型电子邮件 - 使用**instanceof**首先剥离字符串的策略是最好的。

在字符串中，394 个是 text/plain，5 个是 text/html。对于大多数人来说，情况并非如此。它反映了我在这个特定收件箱中的电子邮件提要。

但是等等 - 还有更多！！！:-) HTML 仍然潜入其中：在 87 个 Multipart 中，70 个是 multipart/alternative。不能保证，但大多数（如果不是全部）都是 TEXT + HTML。

在其他 17 个 multipart 中，顺便提一下，15 个是 multipart/mixed，2 个是 multipart/signed。

我使用这个收件箱（和另一个）的用例主要是汇总和分析已知的邮件列表内容。我不能忽略任何消息，但这种分析有助于我提高处理效率。

# cuda - CUDA 默认流与创建的流的并发

> ID：13331995
> 
> 赞同：2
> 
> 时间：2012-11-11T14:25:05.687
> 
> 标签：cuda, parallel-processing

我以这种方式创建了流：

```
cudaStream_t stream0;
cudaStream_t stream1;
cudaStreamCreate( &stream0);
cudaStreamCreate( &stream1); 
```

我运行内核函数，如

```
singlecore<<<1,1>>>(devL2,1000);
singlecore<<<1,1,0,stream0>>>(devL2,1000); 
```

这两个内核当前没有执行。但是如果我将第一个内核执行`stream1`为：

```
singlecore<<<1,1,0,stream1>>>(devL2,1000);
singlecore<<<1,1,0,stream0>>>(devL2,1000); 
```

他们将在当前执行。

我想知道默认流中的内核函数当前是否无法执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T14:44:17.867

是的，对默认流发出的 cuda 命令有限制。参考关于[隐式同步](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#implicit-synchronization)的 C 编程指南部分：

“如果主机线程在它们之间发出以下任何一种操作，则来自不同流的两个命令不能同时运行：... •任何 CUDA 命令到默认流，”

因此，作为一般经验法则，对于重叠的复制和计算操作，将所有此类操作编程在一组非默认流中是最简单的。有一点漏洞（您已经发现），可能会与默认流（和其他流）中发出的命令重叠，但也需要仔细了解默认流和其他流之间的限制仔细注意您发出命令的顺序。C 编程指南中解释了一个[很好的示例。](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#creation-and-destruction-streams)通读“重叠行为”部分。

在您的第一个示例中，发布到默认流的内核会阻止执行发布到另一个流的内核。在您的第二个示例中，您可以具有并发性，因为发布给非默认流的内核不会阻止发布给默认流的内核的执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-15T08:25:34.133

我想根据新发行的 CUDA 7.0 更新 Robert Crovella 的答案，截至 2015 年 3 月，该版本位于候选发布版本中。

在 CUDA 7.0 中，*默认流是常规流*，因为默认流中的*命令可以与非默认流中的命令同时运行*。可以在以下位置找到有关此新功能的更详细说明

[CUDA 7 Streams 简化并发](http://devblogs.nvidia.com/parallelforall/gpu-pro-tip-cuda-7-streams-simplify-concurrency/#more-4286)

可以通过附加`--default stream per-thread`编译选项简单地启用此功能。

在上面链接的页面中，可以找到 Mark Harris 制定的示例。在这里，我想恢复我在[Fermi architecture 的 False dependency issue 上](https://stackoverflow.com/questions/24754878/false-dependency-issue-for-the-fermi-architecture)发布的示例。特别是，在下面的新示例中，虽然我正在创建`3`流，但我不再使用第一个流并采用默认流代替它。

这是在*没有*`--default stream per-thread`编译选项的情况下生成的时间线：

![在此处输入图像描述](../Images/ce58f7480a11a9d8973047ab5963b347.png)

如您所见，默认流中的执行不利用并发性。

另一方面，这是*使用*`--default stream per-thread`编译选项生成的时间线：

![在此处输入图像描述](../Images/3f62a2abdb44e85c6eb96c1c48e7c179.png)

如您现在所见，默认流执行与其他两个流执行重叠。

```
#include <iostream>

#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>

#include "Utilities.cuh"

using namespace std;

#define NUM_THREADS 32
#define NUM_BLOCKS 16
#define NUM_STREAMS 3

__global__ void kernel(const int *in, int *out, int N)
{
    int start = blockIdx.x * blockDim.x + threadIdx.x;
    int end =  N;
    for (int i = start; i < end; i += blockDim.x * gridDim.x)
    {
        out[i] = in[i] * in[i];
    }
}

int main()
{
    const int N = 6000000;

    // --- Host side input data allocation and initialization. Registering host memory as page-locked (required for asynch cudaMemcpyAsync).
    int *h_in = new int[N]; for(int i = 0; i < N; i++) h_in[i] = 5;
    gpuErrchk(cudaHostRegister(h_in, N * sizeof(int), cudaHostRegisterPortable));

    // --- Host side input data allocation and initialization. Registering host memory as page-locked (required for asynch cudaMemcpyAsync).
    int *h_out = new int[N]; for(int i = 0; i < N; i++) h_out[i] = 0;
    gpuErrchk(cudaHostRegister(h_out, N * sizeof(int), cudaHostRegisterPortable));

    // --- Host side check results vector allocation and initialization
    int *h_checkResults = new int[N]; for(int i = 0; i < N; i++) h_checkResults[i] = h_in[i] * h_in[i];

    // --- Device side input data allocation.
    int *d_in = 0;              gpuErrchk(cudaMalloc((void **)&d_in, N * sizeof(int)));

    // --- Device side output data allocation. 
    int *d_out = 0;             gpuErrchk( cudaMalloc((void **)&d_out, N * sizeof(int)));

    int streamSize = N / NUM_STREAMS;
    size_t streamMemSize = N * sizeof(int) / NUM_STREAMS;

    // --- Set kernel launch configuration
    dim3 nThreads       = dim3(NUM_THREADS,1,1);
    dim3 nBlocks        = dim3(NUM_BLOCKS, 1,1);
    dim3 subKernelBlock = dim3((int)ceil((float)nBlocks.x / 2));

    // --- Create CUDA streams
    cudaStream_t streams[NUM_STREAMS];
    for(int i = 0; i < NUM_STREAMS; i++)
        gpuErrchk(cudaStreamCreate(&streams[i]));

    /**************************/
    /* BREADTH-FIRST APPROACH */
    /**************************/

    int offset = 0;
    cudaMemcpyAsync(&d_in[offset], &h_in[offset], streamMemSize, cudaMemcpyHostToDevice,     0);
    for(int i = 1; i < NUM_STREAMS; i++) {
        int offset = i * streamSize;
        cudaMemcpyAsync(&d_in[offset], &h_in[offset], streamMemSize, cudaMemcpyHostToDevice,     streams[i]);
    }

    kernel<<<subKernelBlock, nThreads>>>(&d_in[offset], &d_out[offset],   streamSize/2);
    kernel<<<subKernelBlock, nThreads>>>(&d_in[offset + streamSize/2],    &d_out[offset +  streamSize/2], streamSize/2);

    for(int i = 1; i < NUM_STREAMS; i++)
    {
        int offset = i * streamSize;
        kernel<<<subKernelBlock, nThreads, 0, streams[i]>>>(&d_in[offset], &d_out[offset],   streamSize/2);
        kernel<<<subKernelBlock, nThreads, 0, streams[i]>>>(&d_in[offset + streamSize/2],    &d_out[offset +  streamSize/2], streamSize/2);
    }

    for(int i = 1; i < NUM_STREAMS; i++) {
        int offset = i * streamSize;
        cudaMemcpyAsync(&h_out[offset], &d_out[offset], streamMemSize, cudaMemcpyDeviceToHost,   streams[i]);
    }

    cudaMemcpyAsync(&h_out[offset], &d_out[offset], streamMemSize, cudaMemcpyDeviceToHost,   0);
    for(int i = 1; i < NUM_STREAMS; i++) {
        int offset = i * streamSize;
        cudaMemcpyAsync(&h_out[offset], &d_out[offset], streamMemSize, cudaMemcpyDeviceToHost,   0);
    }

    for(int i = 0; i < NUM_STREAMS; i++)
        gpuErrchk(cudaStreamSynchronize(streams[i]));

    gpuErrchk(cudaDeviceSynchronize());

    // --- Release resources
    gpuErrchk(cudaHostUnregister(h_in));
    gpuErrchk(cudaHostUnregister(h_out));
    gpuErrchk(cudaFree(d_in));
    gpuErrchk(cudaFree(d_out));

    for(int i = 0; i < NUM_STREAMS; i++)
        gpuErrchk(cudaStreamDestroy(streams[i]));

    cudaDeviceReset();  

    // --- GPU output check
    int sum = 0;
    for(int i = 0; i < N; i++)      
        sum += h_checkResults[i] - h_out[i];

    cout << "Error between CPU and GPU: " << sum << endl;

    delete[] h_in;
    delete[] h_out;
    delete[] h_checkResults;

    return 0;
} 
```

# javascript - 应用于所有字段时，Google 图表文字字符串工具提示错误

> ID：13331997
> 
> 赞同：0
> 
> 时间：2012-11-11T14:25:17.610
> 
> 标签：javascript, google-visualization, pie-chart

这很简单。[这是基于谷歌图表操场](http://code.google.com/apis/ajax/playground/?type=visualization#pie_chart)上的饼图示例

谁能告诉我为什么会这样：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', 4],
    ['Eat', {'v':0.,'f':'text 2'}],
    ['Commute', {'v':2,'f':'text 3'}],
    ['Watch TV', {'v':2,'f':'text 4'}],
    ['Sleep', {'v':0.,'f':'text 5'}]
  ]);

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('visualization')).
      draw(data, {title:"So, how was your day?"});
} 
```

但这没有（为“工作”行添加了一个文字字符串）：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', {'v':4,'f':'text 1'}],
    ['Eat', {'v':0.,'f':'text 2'}],
    ['Commute', {'v':2,'f':'text 3'}],
    ['Watch TV', {'v':2,'f':'text 4'}],
    ['Sleep', {'v':0.,'f':'text 5'}]
  ]);

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('visualization')).
      draw(data, {title:"So, how was your day?"});
} 
```

这在操场上不起作用，在我的网站上也不起作用，但在我的网站上完成后，我将收到以下 firebug javascript 错误：

> 错误：0,1 中的值无效（https://www.google.com/uds/api/visualization/1.0/351cbc565e06280bb093b00ce39323d9/format+en_GB,default,corechart.I.js）

在此先感谢，我可能遗漏了一些非常明显的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:10:08.073

我已经解决了这个问题，我从另一个论坛得到了以下回复并使用了解决方法：

> 那是因为 arrayToDataTable 方法不支持使用 {v: value, f: "formatted value"} 对象。我推断该方法从第一行数据派生列类型，并且不是为了处理对象条目而编写的。后续行可能通过 addRows 方法（或类似方法）添加，因此对象条目在那里工作。如果您想像这样输入数据，则必须显式定义 DataTable 列，然后使用 addRows 方法。

解决方法是创建一个虚假条目并将值设置为 0，如下所示：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Bogus',0],
    ['Work', {'v':4,'f':'text 1'}],
    ['Eat', {'v':0.,'f':'text 2'}],
    ['Commute', {'v':2,'f':'text 3'}],
    ['Watch TV', {'v':2,'f':'text 4'}],
    ['Sleep', {'v':0.,'f':'text 5'}]
  ]);

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('visualization')).
      draw(data, {title:"So, how was your day?"});
} 
```