# StackOverflow 问答 15200000-15200999

# iphone - 在选择时更改 UITableViewCell 布局

> ID：15200000
> 
> 赞同：0
> 
> 时间：2013-03-04T11:01:14.027
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个`tableview`单元格使用`right detail layout`. 我现在要做的是当用户选择一个单元格时。我应该向该单元格添加图像吗？

有什么建议我应该如何实施？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:03:16.673

您可以这样做，`-tableView:didSelectForRowAtIndexPath:`即当用户选择您可以创建图像视图并添加它时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:20:59.053

您没有提供任何有关您的图像保留位置的详细信息。

如果您的图像位于**缓存目录**中，那么您应该`-didSelectRowAtIndexPath`这样写...

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
UIImage *image = [[UIImage alloc] initWithContentsOfFile:[[paths lastObject] stringByAppendingPathComponent:[NSString stringWithFormat:@"Image-%d.png",indexPath.row]]];
yourImageView = [[UIImageView alloc] initWithImage:image];
[cell addSubView;yourImageView]; 
```

如果您从**服务器**下载图像，那么您的代码应如下所示：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://yourURL.com"]]]; 
UIImage *image = [[UIImage alloc] initWithData:data];
yourImageView = [[UIImageView alloc] initWithImage:image];
[cell addSubView;yourImageView]; 
```

祝你好运 ...！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:44:49.103

您可以创建 UITableViewCell 的子类。然后实现方法-touchBegin，做你需要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:33:00.920

尝试实现这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.imageView.image = [UIImage imageNamed:@"imageName"];
} 
```

# ms-access - 是否可以将子例程的名称传递给 VBA 中的字符串？

> ID：15200001
> 
> 赞同：2
> 
> 时间：2013-03-04T11:01:22.637
> 
> 标签：ms-access, ms-access-2007, vba, error-reporting

我正在使用大量 VBA 构建 Access 中的数据库。

如果我可以将活动子程序的名称传递给字符串，这将有助于错误报告。这在VBA中可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:23:40.860

是的......手动:-)

```
sActiveRoutine = "MySubName" 
```

如果您使用像 MZ Tools 这样的产品，您可以通过定义自定义标题来简化此操作。
VBA 没有办法返回当前 proc 的名称。

# javascript - 我可以在将我的脚本从 javascript 提升到 jquery 时使用 confirm() 吗？

> ID：15200003
> 
> 赞同：-4
> 
> 时间：2013-03-04T11:01:29.730
> 
> 标签：javascript, jquery, confirm

我可以在将我的脚本从 javascript 提升到 jquery 时使用 confirm() 吗？我曾尝试在 jQuery 中使用对话框，但我需要以与确认（）（java 脚本）相同的样式获取警报框。有没有办法得到它，或者我可以在 Jquery 中使用 confirm() ？？？？

提前致谢..，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:02:49.410

## jQuery 是一个 JavaScript 库。

*它**不是**一种不同的编程语言。*使用 jQuery 时，您可以轻松使用`confirm`或任何其他原生 JavaScript 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:02:54.520

jQuery 只是一个用 JavaScript 编写和使用的实用函数库。没有理由不能`confirm`在代码中使用，无论您是否使用 jQuery。

`confirm`提供糟糕的用户体验，无法设置样式，并提供零验证功能，但 jQuery 并没有阻止您使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:03:13.633

是的，您可以在 JQuery 中使用确认。JQuery 是建立在 JavaScript 之上的，它不是 JavaScript 的替代品。所有 JavaScript 函数都在 JQuery 中工作。

# c++ - Objective-C++ 错误中的二维数组声明

> ID：15200004
> 
> 赞同：2
> 
> 时间：2013-03-04T11:01:33.143
> 
> 标签：c++, ios, objective-c

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我想`int [][]`在 Objective-C++ 中创建一个，但我不知道该怎么做：

这是一块`MyClass.mm`：

```
static const int MAX_NUM_DETECTIONS = 10;
static const int PATCH_SIZE = 100;

@interface MyClass ()
{
    int[MAX_NUM_DETECTIONS][PATCH_SIZE*PATCH_SIZE] _results;
}

@end 
```

那行代码会产生这两个错误：

预期的成员名称或“;” 在声明说明符之后。
预期的 ';' 在声明列表的末尾

`_`我在字符下得到错误。

**如何声明和初始化该二维数组？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:04:33.160

您需要将`[][]`括号放在变量名之后：

例如：

```
int multiArr[3][4]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T11:04:27.930

你需要

```
int _results[MAX_NUM_DETECTIONS][PATCH_SIZE*PATCH_SIZE] ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:07:54.113

声明二维数组的正确方法是在变量名后面放两个方括号`[][]`，所以在你的情况下

```
int  _results[MAX_NUM_DETECTIONS][PATCH_SIZE*PATCH_SIZE]; 
```

# ormlite-servicestack - 无法加载类型“ServiceStack.Common.Extensions.ReflectionExtensions”

> ID：15200005
> 
> 赞同：1
> 
> 时间：2013-03-04T11:01:39.060
> 
> 标签：ormlite-servicestack

## 我的问题

我遇到一个异常，它的消息如下。

```
Could not load type 'ServiceStack.Common.Extensions.ReflectionExtensions' from assembly 'ServiceStack.Common, Version=3.9.38.0, Culture=neutral, PublicKeyToken=null'. 
```

我的 IDE 是`Visual studio 2012`, Ormlite.Sqlite.32bit 版本是`3.9.38`. 我从`nuget`今天开始得到它。`Ormlite.Sqlite`我尝试了by的 anyversion `nuget`，包括 32 位和 64 位版本。

我的模型如下

```
[Alias("ttconfig")]
public class Config : IHasId<int>
{
    [AutoIncrement]
    public int Id { get; set; }

    [StringLength(128)]
    public string Key { get; set; }
    public string Value { get; set; }
} 
```

而且，我在创建表时遇到了异常。

```
OrmLiteConnectionFactory fac = new OrmLiteConnectionFactory("Data Source=ttdb.sqlite;", SqliteDialect.Provider);
using (var db = fac.CreateDbConnection())
{
     //! When call CreateTables(), it throw exception.
     db.CreateTables(false, typeof(Config));
} 
```

## StackTrace 的异常。

StackTrace 内容如下

在 ServiceStack.OrmLite.OrmLiteConfigExtensions.GetModelDefinition(Type modelType) 在 ServiceStack.OrmLite.OrmLiteWriteExtensions.CreateTable(IDbCommand dbCmd, Boolean overwrite, Type modelType) 在 C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteExtensions.cs: C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteExtensions.cs 中 ServiceStack.OrmLite.OrmLiteWriteExtensions.CreateTables(IDbCommand dbCmd, Boolean overwrite, Type[] tableTypes) 的第 65 行：ServiceStack.OrmLite.OrmLiteWriteConnectionExtensions 的第 42 行.<>c_ *DisplayClass1.b*_0(IDbCommand dbCmd) 在 C:\src\ServiceStack.OrmLite\src\ServiceStack.OrmLite\OrmLiteWriteConnectionExtensions.cs: 第 17 行 ServiceStack.OrmLite.ReadConnectionExtensions.Exec(IDbConnection dbConn, Action`1 filter) 在 C:\src\ ServiceStack.OrmLite\src\ServiceStack.OrmLite\Expressions\ReadConnectionExtensions.cs：第 55 行 ServiceStack.OrmLite.OrmLiteWriteConnectionExtensions.CreateTables(IDbConnection dbConn, Boolean overwrite, Type[] tableTypes) 在 C:\src\ServiceStack.OrmLite\src\ ServiceStack.OrmLite\OrmLiteWriteConnectionExtensions.cs：第 17 行 TTSampleDataGenerator.Models.TTDbContext.CheckTables() in ....

## 更新

当我更新到 v3.9.39 时，它仍然崩溃。但是我删除并重新安装了 v3.9.39 版本，问题得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:10:33.530

同样在这里..

最后一次提交/合并（[https://github.com/ServiceStack/ServiceStack.OrmLite/commit/37e28a0e4e464632870092a065b058ca0caf0d07](https://github.com/ServiceStack/ServiceStack.OrmLite/commit/37e28a0e4e464632870092a065b058ca0caf0d07)）是关于**“用'ServiceStack.Common'替换对'ServiceStack.Common.Extensions'命名空间（现在已过时）的引用命名空间。”**

之前的提交是关于将版本更新到 v3.9.38（最后一个 nuget 版本 = v3.9.39 ？）

所以我不知道在提交之前是否已经上传了最后一个 nuget 包（你会看到日期，但看不到 tme ;)），但我刚刚从最新的来源编译了 Ormlite，并且运行良好..

# visual-studio-2012 - Lightswitch“对象引用未设置为对象的实例”错误

> ID：15200008
> 
> 赞同：0
> 
> 时间：2013-03-04T11:01:46.303
> 
> 标签：visual-studio-2012, visual-studio-lightswitch

当我尝试保存在我的灯开关应用程序中时，我收到以下错误。 **“你调用的对象是空的”**

我已将应用程序发布到另一台计算机。

但是当我将它发布到开发它的同一台计算机上时，它可以完美运行。我想我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:06:09.383

该错误意味着您正在尝试使用当时未定义或未初始化的东西。

如果它在您的开发机器上工作，但在部署的机器上不工作；那么很有可能你在部署中做错了什么。

尝试调试并了解配置之间的区别。如果您无法在已部署的计算机上进行调试，最好在某处写一个日志并了解哪个变量给您错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T22:13:40.240

我得到了同样的错误，显然是不同的原因，但这篇文章讨论了这个问题和解决方案。

[网络部署困境](http://social.msdn.microsoft.com/Forums/vstudio/en-US/597cc051-1e26-4601-bd77-8dd39b091721/web-deployment-woes?prof=required)

# c# - 计算 NaiveBayes

> ID：15200018
> 
> 赞同：0
> 
> 时间：2013-03-04T11:02:06.547
> 
> 标签：c#, classification

我刚刚选择了具有以下属性的数据集。

*   邮政编码 (1000, 4000) 只有我选择的 2 个邮政编码。
*   城市（悉尼、布里斯班）只有我选择的 2 个城市。
*   奥图斯
*   澳洲电讯

只是为了代表一个地区有多少人在使用 optus 网络，有多少人在使用 Telstra 网络。

我有 100 条记录，我计算了平均值，标准。德夫和伯爵。

现在，除了均值和标准偏差之外，我还应该为 NavieBayes 找到什么？如果可能的话，任何人都可以提供一个示例公式。我正在研究 C#。

而且，需要计算精度吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-26T16:11:55.990

朴素贝叶斯对于使用独立参数 zip、city 等预测两个网络（0,1）的输出很有用。

所以你使用“NaiveBayes Bernauli 公式”来调制和预测任何情况。我建议您阅读 RCRAN Logistic 回归公式-

[https://cran.r-project.org/web/packages/HSAUR/.../Ch_logistic_regression_glm.pdf](https://cran.r-project.org/web/packages/HSAUR/.../Ch_logistic_regression_glm.pdf)

内存

# .net - 使 .NET 引用配置依赖

> ID：15200022
> 
> 赞同：4
> 
> 时间：2013-03-04T11:02:20.173
> 
> 标签：.net, visual-studio

我的应用程序有几种配置来进行调试/发布构建以及 32 位和 64 位构建。现在，对于 32 位和 64 位构建，我需要引用不同的 dll（即那些使用 x86 构建的和那些使用 x64 构建的），但这些引用对于我的项目来说似乎是全局的，并且不依赖于配置。现在，当我从 32 位切换到 64 位构建（反之亦然）时，我总是必须交换引用。为不同配置实现不同引用的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:11:42.130

这可以通过对项目文件进行一点手动操作来完成。

首先，您需要右键单击项目，然后单击*Unload Project*。然后再次右键单击它并选择*Edit [project name]*。

当它在编辑器中加载时，您将看到各种参考条目：

```
<ItemGroup>
    <Reference Include="System.Xml" />
    <Reference Include="WindowsBase">
        <RequiredTargetFramework>3.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="PresentationCore">
        <RequiredTargetFramework>3.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="PresentationFramework">
        <RequiredTargetFramework>3.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="Microsoft.Practices.ServiceLocation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
        <SpecificVersion>False</SpecificVersion>
        <HintPath>..\Common\Lib\3rdParty\Prism\4.0\Desktop\Microsoft.Practices.ServiceLocation.dll</HintPath>
    </Reference>
</ItemGroup> 
```

请注意，这些都在一个`ItemGroup`节点内。您现在可以执行一些魔术...向您的 ItemGroup 添加一个表达式，以便仅在构建配置为一定位数时使用它：

```
<ItemGroup Condition="'$(Configuration)|$(Platform)' == 'Release|x86'">
    <!-- these are the references used when there is a Release x86 build -->
    <Reference Include="System.Xml" />
</ItemGroup> 
```

请注意，无法通过 UI 执行此操作，因此您必须手动管理这些参考列表（例如，如果您需要添加另一个参考）。

另请注意，这不是黑客......它只是利用[MSBuild 的一个功能](http://msdn.microsoft.com/en-us/library/7szfhaft%28v=vs.100%29.aspx)（VS 使用它来构建您的项目）。您可以使用任何您喜欢的表达式来拥有任意数量的这些`ItemGroup`列表 - 如果它没有表达式，那么它将始终包含在构建中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:05:58.603

您可以使 csproj 的任何部分以配置和/或平台为条件，因此您可以将引用放在单独的部分中。请注意，我认为即使没有更改，每次都会强制重建，因为 VS 无法确定是否需要重建。可能不是问题，但它会增加编译时间。

例如

```
<ItemGroup Condition=" '$(Platform)' == 'x86' " >
    <Reference ...86bit DLL... >
</ItemGroup>
<ItemGroup Condition=" '$(Platform)' == 'x64' " >
    <Reference ...64bit DLL... >
</ItemGroup> 
```

我认为如果签名中没有任何内容在它们之间发生任何变化，但我不记得了，我认为您也可以将参考的提示路径设为有条件的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:14:56.387

考虑使用运行时程序集绑定

[http://msdn.microsoft.com/en-us/library/twy1dw1e.aspx](http://msdn.microsoft.com/en-us/library/twy1dw1e.aspx)

这将用基于设置的绑定中定义的程序集替换您的程序集。

# android - 广播接收器作为内部类

> ID：15200026
> 
> 赞同：0
> 
> 时间：2013-03-04T11:02:38.407
> 
> 标签：android, inner-classes, receiver

这是参考这个[链接](https://stackoverflow.com/questions/4391974/is-it-possible-to-define-a-broadcast-receiver-as-an-inner-class-in-manifest-file)

运行代码时出现非法访问异常。我已经尝试了上面链接中给出的清单的所有可能性。

我的 logcat 错误如下：

```
 03-04 16:42:48.105: E/AndroidRuntime(808): FATAL EXCEPTION: main
03-04 16:42:48.105: E/AndroidRuntime(808): java.lang.RuntimeException: Unable to start receiver com.example.testapp.MainActivity$SmsReceiver: android.content.res.Resources$NotFoundException: String resource ID #0x0
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.app.ActivityThread.access$2400(ActivityThread.java:117)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.os.Looper.loop(Looper.java:123)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-04 16:42:48.105: E/AndroidRuntime(808):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 16:42:48.105: E/AndroidRuntime(808):  at java.lang.reflect.Method.invoke(Method.java:507)
03-04 16:42:48.105: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-04 16:42:48.105: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-04 16:42:48.105: E/AndroidRuntime(808):  at dalvik.system.NativeStart.main(Native Method)
03-04 16:42:48.105: E/AndroidRuntime(808): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x0
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.content.res.Resources.getText(Resources.java:201)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.widget.Toast.makeText(Toast.java:258)
03-04 16:42:48.105: E/AndroidRuntime(808):  at com.example.testapp.MainActivity$SmsReceiver.onReceive(MainActivity.java:39)
03-04 16:42:48.105: E/AndroidRuntime(808):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
03-04 16:42:48.105: E/AndroidRuntime(808):  ... 10 more 
```

我的代码：

```
 public class MainActivity extends Activity {   

      public static class SmsReceiver extends BroadcastReceiver{

        int i;
        String body ;
        String number ;
        String no = "15555215554";

                @Override
                public void onReceive(Context context, Intent intent) {
                    // TODO Auto-generated method stub
                    Bundle bundle = intent.getExtras();
                    SmsMessage[] msgs = null;
                    String str = "";
                    if (bundle != null)
                    {
                        // Retrieve the SMS.
                        Object[] pdus = (Object[]) bundle.get("pdus");
                        msgs = new SmsMessage[pdus.length];
                        for (i=0; i<msgs.length; i++)
                        {
                            Toast.makeText(context, +i, Toast.LENGTH_SHORT).show();
                            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);

                            if(msgs[i].getOriginatingAddress().equals(no))
                            {
                                body = msgs[i].getMessageBody();
                                number = msgs[i].getOriginatingAddress();
                            str += "SMS from " + msgs[i].getOriginatingAddress();
                            str += " :";
                            str += msgs[i].getMessageBody().toString();
                            str += "\n";
                            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

                            }
                        }                     

                }

    }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:20:49.240

忽略这类问题。请不要将 Receiver 类用作内部类。使其成为单独的类并在清单中注册。并使用适当的意图过滤器将服务于您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:28:09.947

根据您更新的问题，问题是您使用了错误的`Toast.makeText()`方法。

您想按如下方式使用[它：](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20java.lang.CharSequence,%20int%29)

```
Toast.makeText(context, msgs[i], Toast.LENGTH_SHORT).show(); 
```

`makeText()`Nyou 使用的版本需要一个字符串资源 ID。

# sql - 构造查询以返回子查询结果

> ID：15200029
> 
> 赞同：0
> 
> 时间：2013-03-04T11:02:46.047
> 
> 标签：sql, sql-server

```
SELECT TOP 1 dbo.tbl_Lifting_Gear.e_id, dbo.tbl_Lifitng_Details.det_con, dbo.tbl_contracts.clientID, dbo.tbl_contracts.contractNumber, dbo.tbl_contracts.fin_approved, 
                         dbo.tbl_work_locations.work_location, dbo.tbl_contracts.wLocationID
    FROM                 dbo.tbl_Lifitng_Details RIGHT OUTER JOIN
                         dbo.tbl_Lifting_Gear INNER JOIN
                         dbo.tbl_work_locations INNER JOIN
                         dbo.tbl_contracts ON dbo.tbl_work_locations.work_id = dbo.tbl_contracts.wLocationID ON dbo.tbl_Lifting_Gear.con_id = dbo.tbl_contracts.conNo AND 
                         dbo.tbl_Lifting_Gear.lifting_loc = dbo.tbl_contracts.conLoc ON dbo.tbl_Lifitng_Details.det_con = dbo.tbl_Lifting_Gear.con_id AND 
                         dbo.tbl_Lifitng_Details.det_loc = dbo.tbl_Lifting_Gear.lifting_loc
    WHERE tbl_lifting_gear.con_id = @con AND tbl_lifting_gear.lifting_loc = @loc

        (
        SELECT TOP 1 e_id AS defects
        FROM tbl_Lifting_Gear
        WHERE tbl_Lifting_Gear.con_id = @con AND tbl_Lifting_Gear.e_defects = 'Y' AND lifting_loc = @loc) 

       (
       SELECT TOP 1 e_id AS addInfo
       FROM tbl_Lifting_Gear
       WHERE tbl_Lifting_Gear.con_id = @con  AND tbl_Lifting_Gear.e_add = 'Y' AND lifting_loc = @loc) 

       (
       SELECT TOP 1 e_id AS mark
       FROM tbl_Lifting_Gear
       WHERE tbl_Lifting_Gear.con_id = @con AND lifting_loc = @loc  AND tbl_Lifting_Gear.inspected = 'N') 

       (
       SELECT TOP 1 e_id AS thorough
       FROM tbl_Lifting_Gear
       WHERE lifting_through IS NOT NULL AND lifting_through <> 0 AND con_id = @con AND lifting_loc = @loc) 
```

如何构建此查询，以便子查询的结果作为主查询的一部分返回？（作为缺陷，添加信息，标记和彻底）。认为我将 AS 语句放在错误的位置，但是当我尝试将它们放在每个子查询的 () 之外时，它会返回一个语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:13:59.563

只需将子查询添加到您的选择列表中：

```
SELECT TOP 1 dbo.tbl_Lifting_Gear.e_id, dbo.tbl_Lifitng_Details.det_con, dbo.tbl_contracts.clientID, dbo.tbl_contracts.contractNumber, dbo.tbl_contracts.fin_approved, 
                         dbo.tbl_work_locations.work_location, dbo.tbl_contracts.wLocationID,
                         (
        SELECT TOP 1 e_id AS defects
        FROM tbl_Lifting_Gear
        WHERE tbl_Lifting_Gear.con_id = @con AND tbl_Lifting_Gear.e_defects = 'Y' AND lifting_loc = @loc),
        (
       SELECT TOP 1 e_id AS addInfo
       FROM tbl_Lifting_Gear
       WHERE tbl_Lifting_Gear.con_id = @con  AND tbl_Lifting_Gear.e_add = 'Y' AND lifting_loc = @loc),
       (
       SELECT TOP 1 e_id AS mark
       FROM tbl_Lifting_Gear
       WHERE tbl_Lifting_Gear.con_id = @con AND lifting_loc = @loc  AND tbl_Lifting_Gear.inspected = 'N'),
       (
       SELECT TOP 1 e_id AS thorough
       FROM tbl_Lifting_Gear
       WHERE lifting_through IS NOT NULL AND lifting_through <> 0 AND con_id = @con AND lifting_loc = @loc) 
    FROM                 dbo.tbl_Lifitng_Details RIGHT OUTER JOIN
                         dbo.tbl_Lifting_Gear INNER JOIN
                         dbo.tbl_work_locations INNER JOIN
                         dbo.tbl_contracts ON dbo.tbl_work_locations.work_id = dbo.tbl_contracts.wLocationID ON dbo.tbl_Lifting_Gear.con_id = dbo.tbl_contracts.conNo AND 
                         dbo.tbl_Lifting_Gear.lifting_loc = dbo.tbl_contracts.conLoc ON dbo.tbl_Lifitng_Details.det_con = dbo.tbl_Lifting_Gear.con_id AND 
                         dbo.tbl_Lifitng_Details.det_loc = dbo.tbl_Lifting_Gear.lifting_loc
    WHERE tbl_lifting_gear.con_id = @con AND tbl_lifting_gear.lifting_loc = @loc 
```

# asp.net-mvc - 包管理器控制台中与实体框架相关的项目启动错误

> ID：15200035
> 
> 赞同：5
> 
> 时间：2013-03-04T11:03:10.557
> 
> 标签：asp.net-mvc, visual-studio, entity-framework, powershell, nuget

在过去的几天里，这个错误让我感到困惑，在 Google 上几乎找不到关于此的信息。这开始于前几天我被分配了一台新笔记本电脑，我基本上是在全新安装的带有 VS2012 Update 1 的 Windows 7 x64 上运行它。

每当我使用 Entity Framework 5 或 6-alpha 启动项目时，此异常都会被抛出到包管理器控制台：

```
New-Object : Cannot find an overload for "Version" and the argument count: "2".
At <project path>\packages\EntityFramework.5.0.0\tools\in
it.ps1:5 char:46
+ if ($PSVersionTable.PSVersion -ge (New-Object <<<<  Version @( 3, 0 )))
    + CategoryInfo          : InvalidOperation: (:) [New-Object], MethodException
    + FullyQualifiedErrorId : ConstructorInvokedThrowException,Microsoft.PowerShell.Commands.NewObjectCommand

Test-ModuleManifest : Invalid Module Manifest path '<project path>
\packages\EntityFramework.5.0.0\tools\'. The path argument must resolve to a single file in the file system with a '
.psd1' extension. Please fix the path specification and try again.
At <project path>\packages\EntityFramework.5.0.0\tools\in
it.ps1:14 char:34
+ $thisModule = Test-ModuleManifest <<<<  (Join-Path $toolsPath $thisModuleManifest)
    + CategoryInfo          : InvalidArgument: (C:\Users\stephe...rk.5.0.0\tools\:String) [Test-ModuleManifest], InvalidOper 
   ationException
    + FullyQualifiedErrorId : Modules_InvalidModuleManifestPath,Microsoft.PowerShell.Commands.TestModuleManifestCommand

Import-Module : Cannot bind argument to parameter 'Name' because it is null.
At <project path>\packages\EntityFramework.5.0.0\tools\in
it.ps1:31 char:18
+     Import-Module <<<<  $thisModule
    + CategoryInfo          : InvalidData: (:) [Import-Module], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.ImportModuleComma 
   nd 
```

我可以通过手动编辑包脚本来消除这个错误，但感觉这是错误的方法。也有多个以这种方式检查 Powershell 版本的实例，所以我怀疑这是我的计算机配置有问题。

这影响了我针对 .NET 4.5 的多个 ASP.NET MVC 4 项目。由于此错误，我无法运行任何实体框架命令，例如 Enable-Migrations 或 Update-Database。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:36:43.310

我终于让它工作了，就像升级到 PowerShell 3.0 一样简单。这有点使版本检测毫无意义，但是嘿，至少它有效。

# android - PhoneGap Android 缓存应用

> ID：15200040
> 
> 赞同：3
> 
> 时间：2013-03-04T11:03:24.300
> 
> 标签：android, jquery, caching, cordova

我正在使用 PhoneGap/Cordova 2.5.0 开发应用程序，并且正在使用 jQuery 1.8.2 进行 AJAX 调用以从外部服务器检索数据。我正在做很多请求，我可以看到我的应用程序缓存在增长，这不是很酷......

我已经测试了很多东西，比如：

```
$.ajaxSetup({ 
    cache: false,
    headers: { 
        "Cache-Control": "no-cache"
    }
}); 
```

或 / 与

```
var ajaxRequests = {}; // Limit one AJAX call for each "data_id" to prevent numbers calls
if (vrbd.ajaxRequests[data_id] === undefined) {
    ajaxRequests[data_id] = $.ajax({
        type:       'GET',
        dataType:   'xml' + data_id,
        url:        url,
        data:       {
            _: new Date().getTime() + Math.random()
        },
        async:      true,
        timeout:    (data_count >= 2 ? data_count * 800 : 2000),
        cache:      false,
        headers: { 
            "Cache-Control": "no-cache"
        }
    })
    .done(function(data, textStatus, jqXHR) { ... })
    .fail(function(jqXHR, textStatus, errorThrown) { ... })
    .always(function(jqXHR, textStatus) { delete ajaxRequests[data_id]; });
} 
```

如果我让我的应用程序在几个小时内运行，我可以在 Settings > Apps > MyApp > Cache（AVD 和真实设备）中看到我的缓存从大约 160kb 增长到大约 30Mb。

那么，我对设置中的缓存一无所知，还是我忘记了什么？

如果您需要其他信息，请告诉我，对不起我的英语，并提前感谢您的帮助。

最好的问候亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T13:33:44.707

清除缓存：

```
// clear cache
super.clearCache();
super.loadUrl("file:///android_asset/www/index.html"); 
```

来源： [使用 PhoneGap 和 Android 添加启动画面并清除缓存](https://coderwall.com/p/aj79eg)

# java - 使用@Loggable jcabi 注释进行日志记录会修剪日志

> ID：15200043
> 
> 赞同：5
> 
> 时间：2013-03-04T11:03:35.510
> 
> 标签：java, log4j, jcabi

我正在注释我的函数@Loggable jcabi 注释。它记录的语句不完整，它会修剪该行并仅打印 .. 用于截断的数据。我希望打印整行。这可以用这个注释来完成吗？

```
@Loggable(Loggable.DEBUG)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

产生以下日志

```
[DEBUG] #load('http://www.google.com'): returned "<html ..." in 23ms 
```

Log4j.properties

```
# Root logger option
log4j.rootLogger=INFO, file, CONSOLE

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=swami-plugin.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=com.jcabi.log.MulticolorLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[%color{%-5p}] %c: %m%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:03:00.020

这是设计使然。annotation 使用最多 100 个字符[`@Loggable`](http://www.jcabi.com/jcabi-aspects/annotation-loggable.html)的方法输出方法参数和结果对象。`toString()`主要是为了保持日志行足够短以适应 syslog 和类似系统。

也许添加一个可选参数来禁用该修剪功能会很好：

```
@Loggable(trim = false)
public String load(URL url) { 
```

我建议[在 github](https://github.com/yegor256/jcabi)提交请求。

# python - 如何获取函数的参数类型和返回类型？

> ID：15200048
> 
> 赞同：9
> 
> 时间：2013-03-04T11:03:53.493
> 
> 标签：python, types, genetic-programming

我正在尝试在 python 中实现强类型遗传编程。

有类似这些样本的东西吗？

```
def funcA(a,b):
  return a + b
return_type(funcA)

output: <class 'Integer'> 
```

和

```
def funcA(a,b):
  return a + b
parameter_type(funcA)

output: [<class 'Integer'>,<class 'Integer'>] 
```

更新：

我正在尝试生成python的表达式并避免无法像这样评估某些内容：

```
funcA(20, funcA(True, "text")) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-05-04T18:35:17.567

在 Python 这种动态类型语言中，函数参数的类型信息是在运行时需要的。在 3.3 及更高版本中，您可以通过以下方式获取函数的类型：

```
from inspect import signature
def foo(a, *, b:int, **kwargs):
...     pass

sig = signature(foo)

str(sig)
'(a, *, b:int, **kwargs)'

str(sig.parameters['b'])
'b:int'

sig.parameters['b'].annotation
<class 'int'> 
```

见[https://docs.python.org/3/library/inspect.html#introspecting-callables-with-the-signature-object](https://docs.python.org/3/library/inspect.html#introspecting-callables-with-the-signature-object)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T11:08:14.103

Python 3 引入了函数注解。他们自己什么都不做，但您可以编写自己的强制执行：

```
def strict(fun):
    # inspect annotations and check types on call

@strict
def funcA(a: int, b: int) -> int:
    return a + b 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-05-03T12:33:50.713

您可以使用注释进行检查：

```
>>> def func(a: str) -> int:
       # code
>>> func.__annotations__["return"]
<class 'int'> 
```

与参数相同：

```
>>> func.__annotations__["a"]
<class 'str'> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-04T11:14:43.710

`return`在 Python 中，在执行调用和执行语句之前，返回类型是未知的。在不同的情况下甚至可能会有所不同，因此简短的回答是“不可能”。

如果您需要知道某个函数的返回类型，您仍然可以将其包装到一些类型检查代码中，这些代码也可能会暴露返回类型。但是，那将是相当不合情理的：

```
def declare_return_type(t):
    def decorator(f):
        def wrapper(*a, **kw):
            res = f(*a, **kw)
            assert isinstance(res, t)
            return res
        wrapper.return_type = t
        return wrapper
    return decorator

@declare_return_type(int)
def f(a, b):
    return a + b

print f.return_type

print f(1, 2) # ok
f('a', 'b') # Assertion error 
```

**UPD：**您可以对参数类型执行相同的操作并检查它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T11:06:56.960

最好的方法是使用文档字符串来存储函数的这些信息和

```
In [49]: def funcA(a,b):
   ....:     ''' returns an int '''
   ....:     return int(a+b)
   ....:

In [50]: funcA.__doc__
Out[50]: ' returns an int ' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T11:06:11.383

没有机会。由于python 使用duck 类型，您可以将不同类型的参数，例如int 和int、str 和str 等传递给funcA。没有看到实际参数就没有机会知道返回类型和参数类型是什么

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T11:08:49.867

仅仅从给定的函数中不可能知道它应该只对整数有效。如果您使用整数参数调用它：

```
funcA(1, 2) 
```

你得到`3`一个整数，但是这个呢：

```
funcA("Test", "Test") 
```

你得到`"TestTest"`一个字符串！这在技术上是可行的，但是否应该以这种方式使用它是您提供的代码中不存在的信息。

在更现代的 Python 中，注释提供了显式声明此类信息的可能性，或者您可能尝试从现有用法或函数代码中推断出它，但这些选项中的哪一个（如果有）对您的使用有意义案例将在很大程度上取决于您想要做什么的细节。

# c# - 如何调用函数

> ID：15200054
> 
> 赞同：0
> 
> 时间：2013-03-04T11:04:02.333
> 
> 标签：c#

我做了一个函数，如果它们站在我的列表中，它可以替换字符的位置

代码：

```
 public string NoSimilarChar(string password)
        {
            var listOfSimilarCharacters = new Dictionary<string, string>();
                listOfSimilarCharacters.Add("l", "i");
                listOfSimilarCharacters.Add("1", "i");
                listOfSimilarCharacters.Add("O", "0");

            // Iterate through each character
            for (int i = 0; i < password.Length; i++)
            {
                var currentCharacter = password[i].ToString();

                // check if the current char exists in either the key or the value of the list of similar characters
                if (listOfSimilarCharacters.Keys.Contains(currentCharacter) || listOfSimilarCharacters.Values.Contains(currentCharacter)) 
                {
                    currentCharacter = currentCharacter.Remove(currentCharacter.Length - 1, 1) + ",";

                }

            }

             return password;
        } 
```

现在我想知道如何在删除字符时加载函数 NoSimilarChar

我想是这样的：

```
 if (listOfSimilarCharacters.Keys.Contains(currentCharacter) || listOfSimilarCharacters.Values.Contains(currentCharacter)) 
                {
                    currentCharacter = currentCharacter.Remove(currentCharacter.Length - 1, 1) + ",";
NoSimilarChar(password);
                } 
```

但我认为这不好，因为他会一直处于循环状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:24:28.950

试试这个更简单的

```
 var charsThatCannotbeinUserPwd = new[] {'1', 'l', 'O', '0', 'i'};

        // Iterate through each character
        var builder = new StringBuilder();
        for (int i = 0; i < password.Length; i++)
        {
            var currentCharacter = password[i];

            if (!charsThatCannotbeinUserPwd.Any(x => x.Equals(currentCharacter)))
                builder.Append(currentCharacter);

        }

        return builder.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:18:52.387

```
 ///for replacing
 foreach (KeyValuePair<string, string> item in listOfSimilarCharacters)
 {
    password = password.Replace(item.Key, item.Value);
 }

 ///for removing
  foreach (KeyValuePair<string, string> item in listOfSimilarCharacters)
  {
    if (password.IndexOf(item.Key) >= 0)
         password = password.Remove(password.IndexOf(item.Key), 1);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:34:44.883

看起来您想从密码中删除一组字符。如果是这种情况，那么您不需要使用`Dictionary`. 如果您想用另一个字符替换一个字符， A`Dictionary`会更有意义。此外，您不需要在这里使用递归。我相信您只需要一个要删除的字符数组和一个简单的循环即可删除它们。

```
public string NoSimilarChar(string password)
{
    string[] charsToRemove = new  string[] { "l", "i", "1", "0", "O" }
    foreach (string charToRemove in charsToRemove)
    {
        password = password.Replace(charToRemove, "");
    }
    return password;
} 
```

仅供参考：我已将字符数组定义为字符串，因为您希望将字符替换为空字符串并且没有空字符。

# javascript - 有什么方法可以控制谷歌地图更新您的位置的频率吗？

> ID：15200055
> 
> 赞同：0
> 
> 时间：2013-03-04T11:04:05.643
> 
> 标签：javascript, google-maps, idle-timer

我正在为手机应用程序开发一个版本的谷歌地图，并试图弄清楚如何让用户手动更新他们的位置而不是自动更新（主要是为了节省电池）。我搜索了新的 google api v3 开发人员页面，但似乎找不到任何东西。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:52:05.750

Google 对您的位置一无所知。他们没有任何吸引力。任何位置都是通过来自设备/浏览器的推送给出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-29T02:49:00.063

谷歌有几种方法知道你的位置。

有 HTML5 位置，这是最准确的。这通常是获取位置的首选方式。

但是，众所周知，并不是每个人都想这样做。Google 仍然希望为这些用户提供良好的用户体验。

所以第二种获取位置的方法，IP位置。IP 位置在大约 85% 的情况下是正确的，具体取决于您使用的数据库。有些更准确。但它通常在用户位置的大约 25-50 英里范围内，而 html5 位置在您所在位置的几英里范围内。我个人将我的位置拉到离我所在的地方只有几英尺的范围内。

至于更新，我想谷歌可能会每月更新一次并将位置缓存在他们的系统中。虽然位置是他们广告中的一个重要变量，但谷歌还必须快速高效，所以这是一个很好的折衷方案。除非您使用地图功能，否则每个区域都已缓存命中，因此他们可以获取您的位置，然后通过其数千个缓存服务器通过 AJAX 为您提供内容。

# c# - 通过 Moq 设置匹配参考类型参数

> ID：15200057
> 
> 赞同：1
> 
> 时间：2013-03-04T11:04:13.257
> 
> 标签：c#, .net, unit-testing, vs-unit-testing-framework, moq-3

[我遇到了与此处](https://stackoverflow.com/questions/4432682/problem-with-matching-setup-in-moq)或[此处](https://stackoverflow.com/questions/11790129/testing-specific-method-calls-with-parameters-using-moq)提出的问题类似的问题，但解决方案似乎不适用于我的情况。

考虑以下类：

```
public interface IProductsWebService
{
    ICObjectLang[] GetClassLevel(getClassLevelLang criteria);
}

// the rest of this class was automaticaly generated as web service reference
public partial class getClassLevelLang : IEquatable<getClassLevelLang>
{
    public override bool Equals(object obj)
    {
        var other = obj as getClassLevelLang;

        return Equals(other);
    }

    public bool Equals(getClassLevelLang other)
    {
        if (this == other)
        {
            return true;
        }

        if (other == null)
        {
            return false;
        }

        return CID == other.CID &&
               accessCode == other.accessCode &&
               classCode == other.classCode &&
               depth == other.depth &&
               language == other.language &&
               partyCode == other.partyCode &&
               refId == other.refId;
    }

    public override int GetHashCode()
    {
        var hash = 531;

        hash += CID != null ? CID.GetHashCode() : 1;
        hash += accessCode != null ? accessCode.GetHashCode() : 1;
        hash += classCode != null ? classCode.GetHashCode() : 1;
        hash += depth != null ? depth.GetHashCode() : 1;
        hash += language != null ? language.GetHashCode() : 1;
        hash += partyCode != null ? partyCode.GetHashCode() : 1;
        hash += refId != null ? refId.GetHashCode() : 1;

        return hash;
    }

    public override string ToString()
    {
        var str = new StringBuilder();

        str.AppendFormat("CID: {0}, ", CID);
        str.AppendFormat("accessCode: {0}, ", accessCode);
        str.AppendFormat("classCode: {0}, ", classCode);
        str.AppendFormat("depth: {0}, ", depth);
        str.AppendFormat("language: {0}, ", language);
        str.AppendFormat("partyCode: {0}, ", partyCode);
        str.AppendFormat("refId: {0}", refId);

        return str.ToString();
    }
} 
```

以下代码用于测试（`calls`列表仅用于调试）：

```
private Mock<IProductsWebService> productsService;
private IProductsImportProcess target;

private List<getClassLevelLang> calls = new List<getClassLevelLang>();

[TestMethod]
public void RecursiveDownloadTest()
{
        //other mocks (configuration, log, categoryService and configurationService) set here

        target = new ProductsImportProcess(
            configuration.Object, log.Object, categoryService.Object,
            productsService.Object, configurationService.Object);

        productsService = new Mock<IProductsWebService>(MockBehavior.Strict);

        var root1 = new Category
        {
            CategoryID = "root1",
            SubCategories = new List<Category>
                                                {
                                                    new Category
                                                        {
                                                            CategoryID = "cat1.1",
                                                            SubCategories = new List<Category>
                                                                                {
                                                                                    new Category
                                                                                        {CategoryID = "cat1.1.1"}
                                                                                }
                                                        },
                                                    new Category
                                                        {
                                                            CategoryID = "cat1.2"
                                                        }
                                                }
        };
        var root2 = new Category { CategoryID = "root2" };

        setupProductsServiceCall("tree1", root1, true);
        setupProductsServiceCall("tree1", root1.SubCategories.First().SubCategories.First());
        setupProductsServiceCall("tree2", root2, true);

        target.Execute();

        productsService.VerifyAll();
    }

    private void setupProductsServiceCall(string treeCode, Category category, bool isRoot = false)
    {
        var config = configuration.Object;

        var criteria = new getClassLevelLang
                           {
                               CID = isRoot ? null : category.CategoryID,
                               language = "all",
                               partyCode = "something",
                               depth = "1",
                               classCode = treeCode,
                               accessCode = "xyz"
                           };
        var productsNode = TestUtils.CreateAbbProductsNode(category);

        productsService.Setup(mock => mock.GetClassLevel(It.Is<getClassLevelLang>(c => c.Equals(criteria)))).
            Callback<getClassLevelLang>(c => calls.Add(c)).        //added for debuging purposes only
            Returns(productsNode.objectAttributes).
            Verifiable();
} 
```

上述测试失败，但有以下异常：

```
Test method ProductsImport.Console.Test.ProductsImportProcessUnitTest.RecursiveDownloadTest threw exception: 
Moq.MockVerificationException: The following setups were not matched:
    IProductsWebService mock => mock.GetClassLevel(It.Is<getClassLevelLang>(c => c.Equals(CID: , accessCode: xyz, classCode: tree1, depth: 1, language: all, partyCode: something, refId: )))
    IProductsWebService mock => mock.GetClassLevel(It.Is<getClassLevelLang>(c => c.Equals(CID: cat1.1.1, accessCode: xyz, classCode: tree1, depth: 1, language: all, partyCode: something, refId: )))
    IProductsWebService mock => mock.GetClassLevel(It.Is<getClassLevelLang>(c => c.Equals(CID: , accessCode: xyz, classCode: tree2, depth: 1, language: all, partyCode: something, refId: )))
Result StackTrace:    
    at Moq.Mock.VerifyAll() 
```

我确定 ProductsWebService.GetClassLevel 被调用而`getClassLevelLang.Equals`没有被调用（用调试器检查）。更奇怪的是，我`calls`在调用`VerifyAll()`list 之前检查了它的实际值，它是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:03:49.000

你的`productsService`模拟没有被注入你的`ProductsImportProcess`所以不能拦截在实际的`IProductsWebService`. 如何`IProductsWebService`在代码中实例化对象？

# c# - 转换 varchar 值时转换失败

> ID：15200060
> 
> 赞同：1
> 
> 时间：2013-03-04T11:04:22.873
> 
> 标签：c#, sql, parameters, error-handling, type-conversion

当我尝试运行它时，它给了我以下错误消息：

> 将 varchar 值“category_id”转换为数据类型 int 时转换失败。

这是我的 SQL 和参数代码，我认为它应该可以工作，但事实并非如此。

```
mycmd.CommandText="SELECT * FROM categories WHERE @db_property = @property_id"; 

// This contains a string "category_id", which is correct.
mycmd.Parameters.Add("@db_property", SqlDbType.VarChar).Value=db_property_field; 

// This contains an Int, referring to the category_id in database. As of now, this is 1
mycmd.Parameters.Add("@property_id", SqlDbType.Int).Value=property_id; 
```

在我浏览完这段代码之后，我通过阅读器运行它，这就是我得到上面错误消息的地方。一直问老师，还有我班的优秀学生，没有人能找到线索，问题出在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:10:44.007

您不应将字段名称添加为参数。尝试更改您的脚本以包含实际的字段 ID：

```
mycmd.CommandText = "SELECT * FROM categories WHERE category_id = @property_id";
mycmd.Parameters.Add("@property_id", SqlDbType.Int).Value = property_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:09:57.230

我不确定您的结构，但请尝试以下操作：

```
mycmd.CommandText = "SELECT * FROM categories WHERE Cast(@db_property as Int) = @property_id"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:12:24.627

您的查询与您传入的两个变量匹配，因此它将返回所有数据或不返回！最重要的是，您将 char 变量与 int 匹配。SQL 将尝试将 char 变量转换为 int。

```
@db_property = @property_id 
```

你的查询应该是这样的吗？

```
SELECT * FROM categories WHERE db_property = @db_property AND property_id = @property_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:12:56.733

如果您查看您的陈述，您正在比较两个参数。WHERE 子句不在表列（“类别”）上，并且您传递的两个参数是不同的数据类型。VarChar 和 Int。当执行该命令时，SQL 引擎会尝试比较不同数据类型的两个变量。

如果您直接针对 SQL 运行以下 SQL 语句，您将收到相同的错误。

```
DECLARE @Var1 VARCHAR(100)
DECLARE @Var2 INT

SELECT @Var1 = 'Test', @Var2 = 1

SELECT * FROM dbo.categories  WHERE @Var1 = @Var2 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-05T07:43:35.800

您可以从以下地址获得解决方案：

[http://net-informations.com/csprj/data-providers/cs-procedure-parameter.htm](http://net-informations.com/csprj/data-providers/cs-procedure-parameter.htm)

为了您的信息，我只是重塑代码并根据我的需要使用它。

存储过程代码如下：

```
Create PROCEDURE [dbo].[PmSPValidate]
@a varchar(10)

AS
BEGIN
(SELECT AcctDsc,AcctAge 
FROM dbo.tblCoa 
WHERE AcctNo >= @a)

END

Code of C# :

 private void btnThirdTrial_Click(object sender, EventArgs e)
        {
            string connetionString = null;
            SqlConnection connection;
            SqlDataAdapter adapter;
            SqlCommand command = new SqlCommand();
            SqlParameter param;
            DataSet ds = new DataSet();

            int i = 0;

            connetionString = "Data Source=FIN03;Initial Catalog=CmsTest;Integrated Security=True";

            connection = new SqlConnection(connetionString);

            connection.Open();
            command.Connection = connection;
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "dbo.PmSPValidate";

            param = new SqlParameter("@a",Account.Text.ToString ());
            param.Direction = ParameterDirection.Input;
            param.DbType = DbType.String;
            command.Parameters.Add(param);

            adapter = new SqlDataAdapter(command);
            adapter.Fill(ds);

            for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                MessageBox.Show(" Name " + ds.Tables[0].Rows[i][0].ToString() + "  Age " + ds.Tables[0].Rows[i][1].ToString());

            }

            connection.Close();

        } 
```

# solr - 使用 Camel 的 Solr 删除操作

> ID：15200062
> 
> 赞同：0
> 
> 时间：2013-03-04T11:04:25.113
> 
> 标签：solr, apache-camel

我有一个用例，我想使用 Camel 删除 solr 文档（按 id）。

我搜索了文档，但对删除操作的示例没有任何处理。

如果我必须使用 DELETE_BY_ID，我不清楚在哪里设置文档 ID 的值。它是在消息正文还是标题中？欣赏一个小例子。

另外，有没有办法批量删除。因为我有多个文档要从 solr 中删除。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:23:34.000

当 Camel 文档不够用时，一个好主意是查看相关 Camel 组件的单元测试。

从源代码中查看这个删除测试：[https ://svn.apache.org/repos/asf/camel/trunk/components/camel-solr/src/test/java/org/apache/camel/component/solr/SolrDeleteTest .java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-solr/src/test/java/org/apache/camel/component/solr/SolrDeleteTest.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:25:39.610

对于批量删除，您可以使用 DELETE_BY_QUERY 或使用列表/拆分器多次调用 DELETE_BY_ID，然后在最后提交，等等......类似这样

```
template.sendBody("direct:deleteListThenCommit", Arrays.asList("id1", "id2"));
...
from("direct:deleteListThenCommit")
    .split(body())
        .setHeader(SolrConstants.OPERATION, constant(SolrConstants.OPERATION_DELETE_BY_ID))
        .to(SOLR_ROUTE_URI)
    .end()
    .setHeader(SolrConstants.OPERATION, constant(SolrConstants.OPERATION_COMMIT))
    .to(SOLR_ROUTE_URI); 
```

# database - 如何制作一个可以打开图像文件并将其保存到数据库并调整大小的java接口？

> ID：15200068
> 
> 赞同：0
> 
> 时间：2013-03-04T11:04:35.607
> 
> 标签：database, image, jdbc, db2, save

假设我有这样的代码：

```
 import java.awt.*;
    import java.awt.event.*;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.SQLException;
    import javax.swing.*;

    public class InsertImg2Dbase extends JFrame implements ActionListener{

        JButton open = new JButton("Open image to save...");
        private Connection con;

        public void getConnection(){
            try{
                if(con==null){
                    Class.forName("com.ibm.db2.jcc.DB2Driver").newInstance();
                    con=DriverManager.getConnection("jdbc:db2://localhost:50001/sample","username","password");
                }
            }catch (SQLException e){
                JOptionPane.showMessageDialog(null, e.getMessage());
            }catch (Exception e){
                JOptionPane.showMessageDialog(null, e);
            }
        }

        public void actionPerformed(ActionEvent e){
            Object source = e.getSource();
            if(source==open){
              // this is where the event when opening the file to be saved will be coded  
            }
        }

        public InsertImg2Dbase(){
            ActionListener al = new InsertImg2Dbase();
            open.setBounds(20, 20, 175, 25);
            open.addActionListener(al);
            add(open);
        }

        public void properties(){
            setLayout(null);
            setTitle("Open Image To Save");
            setResizable(false);
            setSize(220,90);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLocationRelativeTo(null);   
            setVisible(true);
        }

        public static void main(String[] args){
            InsertImg2Dbase ins = new InsertImg2Dbase();
            ins.properties();
        }    
    } 
```

我应该在代码中添加什么，以便 JButton 将打开一个资源管理器以打开一个图像文件（例如 jpeg、png、gif、bmp），该文件将作为 blob 保存到我的数据库（比如我的表名是：“images”）文件。我可以添加一个函数来调整我的图像大小，比如说在保存到我的数据库之前的尺寸为 300x650？

我欢迎任何帮助，我仍在学习过程中，如果您能指导我，我将不胜感激。欢迎任何帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:44:47.487

您可以在 DB2 中加入一个外部工具，以扩展基本功能并添加对特定事物的支持，例如您的案例图像。为此，您需要 ImageMagik，然后创建一些外部存储过程，就是这样。

DeveloperWorks 中有一个非常好的教程：http: [//www.ibm.com/developerworks/data/library/techarticle/dm-0504stolze/](http://www.ibm.com/developerworks/data/library/techarticle/dm-0504stolze/)

完成此操作后，您可以调用 db2 过程，在检索到应用程序之前操作存储的图像。

# ibaction - 无法识别的选择器发送到 Paul Hegarty 的 CS193P 的实例

> ID：15200073
> 
> 赞同：0
> 
> 时间：2013-03-04T11:04:59.520
> 
> 标签：ibaction, cs193p, uncaught-exception, uistepper

我正在关注 Paul Hegarty 的 CS193P 课程视频（第 4 讲 @ 1:05:40 标记）并遇到了问题。请帮助调试此“无法识别的选择器发送到实例”错误。该视图具有三个对象 - 参见图片（[https://docs.google.com/file/d/0B453_F6cDmYzMG1OQW93WVptYUU/edit?usp=sharing](https://docs.google.com/file/d/0B453_F6cDmYzMG1OQW93WVptYUU/edit?usp=sharing)）

编码

```
 //  AttributeViewController.m
    //  Attribute

    #import "AttributeViewController.h"

    @interface AttributeViewController ()
    @property (weak, nonatomic) IBOutlet UILabel *label;                  // collection of words
    @property (weak, nonatomic) IBOutlet UIStepper *selectedWordStepper;  // stepper
    @property (weak, nonatomic) IBOutlet UILabel *selectedWordLabel;      // selected word from label

    @end

    @implementation AttributeViewController

    - (NSArray *)wordList
    {
        NSArray *wordList = [[self.label.attributedText string] componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if ([wordList count]) {
            return wordList;
        } else {
            return @[@""];
        }
    }

    - (NSString *)selectedWord
    {
        return [self wordList][(int)self.selectedWordStepper.value];
    }

    - (IBAction)updateSelectedWord {
        self.selectedWordStepper.maximumValue = [[self wordList] count]-1;
        self.selectedWordLabel.text = [self selectedWord];
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        [self updateSelectedWord];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    @end 
```

错误

```
2013-03-03 18:03:28.948 Attribute[74205:c07] -[AttributeViewController updateSelectedWord:]: unrecognized selector sent to instance 0x71b93a0
2013-03-03 18:03:28.952 Attribute[74205:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AttributeViewController updateSelectedWord:]: unrecognized selector sent to instance 0x71b93a0'
*** First throw call stack:
(0x1c91012 0x10cee7e 0x1d1c4bd 0x1c80bbc 0x1c8094e 0x10e2705 0x162c0 0x16258 0xd7021 0xd757f 0xd7056 0x42b195 0x42ae91 0xd6696 0x45cef 0x45f02 0x23d4a 0x15698 0x1becdf9 0x1c14f3f 0x1c1496f 0x1c37734 0x1c36f44 0x1c36e1b 0x1beb7e3 0x1beb668 0x12ffc 0x25cd 0x24f5)
libc++abi.dylib: terminate called throwing an exception
(lldb) gdb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:54:34.653

我以前真的没有见过直接调用 IBAction 方法。IBAction 方法连接到视图中的操作（按钮等），并在单击这些按钮等时触发。

如果 updateSelectedWord 是内部方法，只需将 IBAction 替换为 void：

```
(void)updateSelectedWord 
```

希望这可以帮助。

# objective-c - 如何找出 keyCode 对应于实际字符还是功能键？

> ID：15200074
> 
> 赞同：1
> 
> 时间：2013-03-04T11:05:00.193
> 
> 标签：objective-c, cocoa, keycode, nsevent

下面是我的代码。但是我怎么知道这个字符是否来自字母表？（任何字母，不仅仅是 az）

```
- (void)keyDown:(NSEvent *)theEvent
{
    NSString * const character = [theEvent charactersIgnoringModifiers];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:24:48.040

您可以使用`NSCharacterSet`：

```
- (void)keyDown:(NSEvent *)theEvent
{
    NSString * const character = [theEvent charactersIgnoringModifiers];
    if ([character length] > 0)
    {
        unichar c = [character characterAtIndex:0];
        NSCharacterSet *letters = [NSCharacterSet letterCharacterSet];
        if ([letters characterIsMember:c])
        {
            NSLog(@"that's a letter!");
        }
    }
} 
```

如果您经常调用此代码，则可能需要将其存储`letters`为实例变量。

# php - 从 PHP 中的目录数组树获取目录路径

> ID：15200077
> 
> 赞同：0
> 
> 时间：2013-03-04T11:05:03.757
> 
> 标签：php, arrays, multidimensional-array, path, directory

我有这个任务的麻烦。我是 PHP 新手。我想我必须使用递归函数，但我不明白它是如何使用的

我有一个这样的数组：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [parent_id] => 0
            [name] => New Folder
        )
    [1] => Array (
            [id] => 2
            [parent_id] => 1
            [name] => New Folder2
        )
    [2] => Array
        (
            [id] => 3
            [parent_id] => 2
            [name] => New Folder3
        )
    ......
    [5] => Array
        (
            [id] => 6
            [parent_id] => 0
            [name] => New Folder6
        )
    [6] => Array (
            [id] => 7
            [parent_id] => 6
            [name] => New Folder7
        )
    [7] => Array
        (
            [id] => 8
            [parent_id] => 6
            [name] => New Folder8
        )
) 
```

我需要像这样构建目录的路径：

```
/New Folder
/New Folder/New Folder2
/New Folder/New Folder2/New Folder3
...
/New Folder6
/New Folder6/New Folder7
/New Folder6/New Folder8 
```

你能帮我完成这个任务吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:59:42.510

```
$txtTree[0]="/";

foreach($treeArray as $branch){

    if(isset($txtTree[$branch['parent_id']])) {
        $txtTree[$branch['id']] = $txtTree[$branch['parent_id']] . $branch['name']. "/";
    }
} 

print_r($txtTree);

Array
(
    [0] => /
    [1] => /New Folder/
    [2] => /New Folder/New Folder2/
    [3] => /New Folder/New Folder2/New Folder3/
    [6] => /New Folder6/
    [7] => /New Folder6/New Folder7/
    [8] => /New Folder6/New Folder8/
) 
```

# php - 菜单项的高度不同

> ID：15200080
> 
> 赞同：0
> 
> 时间：2013-03-04T11:05:13.253
> 
> 标签：php, css, wordpress, offset

我在我的网站上使用 wordpress，marlesandmore.com，并且有一个我目前正在调整的主题。该网站使用内置于 wordpress 的菜单功能，项目使用 cufon 和 css。

问题如下： - 最后两个项目有一个偏移量......？- 这仅在 chrome 和 IE 中可见。

使用的php：

```
<div id="menu">
            <?php $menuClass = 'nav superfish clearfix';
            $menuID = 'secondary-menu';
            $secondaryNav = '';
            if (function_exists('wp_nav_menu')) {
                $secondaryNav = wp_nav_menu( array( 'theme_location' => 'secondary-menu', 'container' => '', 'fallback_cb' => '', 'menu_class' => $menuClass, 'menu_id' => $menuID, 'echo' => false, 'walker' => new description_walker() ) ); 
            };
            if ($secondaryNav == '') { ?>
                <ul id="<?php echo $menuID; ?>" class="<?php echo $menuClass; ?>">
                    <?php if (get_option('estore_swap_navbar') == 'false') { ?>
                        <?php show_categories_menu($menuClass,false); ?>
                    <?php } else { ?>
                        <?php if (get_option('estore_home_link') == 'on') { ?>
                            <li <?php if (is_home()) echo('class="current_page_item"') ?>><a href="<?php bloginfo('url'); ?>"><?php esc_html_e('Home','eStore') ?></a></li>
                        <?php }; ?>

                        <?php show_page_menu($menuClass,false,false); ?>
                    <?php } ?>
                </ul> <!-- end ul#nav -->
            <?php }
            else echo($secondaryNav); ?>
</div> <!-- #menu --> 
```

CSS：

```
ul#secondary-menu { padding: 24px 0px 0px 23px; margin-top:24px; }
ul#secondary-menu li { padding-right: 20px; }
ul#secondary-menu li.current_page_item > a > strong, ul#secondary-menu li.current-menu-item > a > strong { color:#ede7c2; }
ul#secondary-menu li a strong { color:#000000;  text-transform: lowercase; font-size:16px; font-weight:normal; text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3); margin-bottom:-3px; }
ul#secondary-menu li a span { color: #828282; font-family: arsmaquettepro,Helvetica, sans-serif; /*text-shadow: 1px 1px 1px #2d2d2d;*/ } 
ul#secondary-menu li a:hover { text-decoration: none; }
ul#secondary-menu li a:hover strong { color: #ede7c2; }
ul#secondary-menu li a:hover span, ul#secondary-menu li > a > span { color: #7b786a; } 
```

前 4 项和后 2 项之间应该没有区别。

知道是什么导致了偏移吗？

[Marblesandmore.com](http://Marblesandmore.com)

编辑：下面的答案似乎是正确的，所以解决方案必须在子菜单的 css 中：

```
ul#secondary-menu ul { width: 178px; background: url(images/secondary-dropdown.png) repeat-y; padding: 3px 0px 15px; box-shadow: 3px 6px 7px 1px rgba(0, 0, 0, 0.5); -moz-box-shadow:3px 6px 7px 1px rgba(0, 0, 0, 0.5); -webkit-box-shadow: 3px 6px 7px 1px rgba(0, 0, 0, 0.5); border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-top-left-radius: 0px; -moz-border-radius-topleft: 0px; -webkit-border-top-left-radius: 0px; border-top-right-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; border: 1px solid #ffffff; border-top: none; }
ul#secondary-menu li:hover ul, ul#secondary-menu li.sfHover ul { left:0px; top:43px; }
ul#secondary-menu li:hover ul ul, ul#secondary-menu li.sfHover ul ul { left:173px; top:-3px; border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; border: 1px solid #232323; }                          
ul#secondary-menu ul li { background: url(images/secondary-dropdown-bottom.png) repeat-x bottom left; padding: 0px 0px 2px 2px; }
ul#secondary-menu ul li a { display: block; padding: 9px 3px 9px 28px; width: 145px; /*font-weight: bold; */font-size:14px; color: #000000; font-family: arsmaquettepro, Helvetica, Arial, sans-serif; /*text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3); background: url(images/secondary-dropdown-bullet.png) no-repeat 15px 17px;*/ }
ul#secondary-menu ul li a:hover { background-color: #383838; color: #ede7c2; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:54:32.037

@Bart van Sleeuwen 请从 style.css 中删除此类

```
ul#secondary-menu li#menu-item-3604 strong { color:#666666; }
ul#secondary-menu li#menu-item-3606 strong { color:#666666; } 
```

并在 html 中找到 li 类

```
<li id="menu-item-3604" class="menu-item menu-item-type-post_type menu-item-object-page"> 
```

改成这样

```
<li id="menu-item-3604" class="menu-item menu-item-type-custom menu-item-object-custom"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:41:20.103

我认为您的问题可能是由以下原因引起的：

```
margin-bottom:-3px; 
```

在

```
ul#secondary-menu li a strong 
```

选择器。

我看不到你的页面，所以我不确定那个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:30:17.807

最后 2 个对象的高度只有 16 像素，而其他菜单对象的高度为 18 像素。

编辑：对不起，我刚刚意识到这个答案有多糟糕，但没有告诉你问题出在哪里..会尝试检查它。

我认为这与最后两个菜单项没有子菜单这一事实有关，不知何故，子菜单的那些 ul 标签似乎将 2px 添加到高度。

好的，这不是一个“好”的解决方案，说实话相当难看，但我认为它有效。您可以通过使用它们的 id 并在顶部添加边距来定位菜单中的最后 2 个项目。

```
#menu-item-3606, #menu-item-3604 {
margin-top: 2px;
} 
```

请记住，如果您以任何方式更改这些菜单项，它们将具有新的标识符，因此您需要更改 css 中的 id。正如我所说，这不是一个好的解决方案，但它有效。

如果您出于某种原因在这两个菜单项中添加了子菜单，也会出现问题。

# jsp - 单击超链接时的 2 个动作

> ID：15200085
> 
> 赞同：0
> 
> 时间：2013-03-04T11:05:42.880
> 
> 标签：jsp, hyperlink

我有一个名为“LogOut”的超链接。单击链接后，使用“确认”从用户那里获得确认并重定向到 logout.jsp。

确认为是后，是否可以在提交表单之前调用函数？

代码片段：

```
<P align=right> 
    <a href='logout.jsp' 
       onclick="return confirm('Do you really want to logout now?')">LogOut</a>
</P> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:18:34.070

*最简单的方法是将您想要执行的所有*操作包装到一个函数中，然后调用它。

```
<head>
    <script>
        function Logout()
        {
            if (confirm('Do you really want to logout now?'))
            {
                return SomeOtherFunction();
            }
            else 
            {
                return false;
            }
        }

        function SomeOtherFunction()
        {
            return true;
        } 
    </script>  
</head>
<body>
    <P align=right> 
        <a href='logout.jsp' 
           onclick="return Logout()">LogOut</a>
    </P>
</body> 
```

# ruby-on-rails - Ajax 更新不适用于 Rails

> ID：15200089
> 
> 赞同：0
> 
> 时间：2013-03-04T11:05:48.133
> 
> 标签：ruby-on-rails, ajax

我有一个 _follow_form 部分：

```
 <% unless current_user == @player %>
  <div id="follow_form">
      <% if current_user.following?(@player) %>
        <%= render 'unfollow' %>
      <% else %>
        <%= render 'follow' %>
      <% end %>
  </div>
<% end %> 
```

我的 _follow 部分看起来像这样：

```
<%= form_for current_user.relationships.build(:followed_id => @player.id),
             :remote => true do |f| %>
  <div><%= f.hidden_field :followed_id %></div>
  <div class="actions"><%= f.submit "Follow" %></div>
<% end %> 
```

我的 create.js.erb 文件：

```
$("#follow_form").update("<%= escape_javascript(render('players/follow')) %>") 
```

但是，当我创建关系时，什么也没有发生。我的意思是创建了关系，但部分没有更新。当我尝试：

```
$("#follow_form").append("foobar"); 
```

有用。

我如何更新 #follow_form ？谢谢你的帮助。

PS：我在发布之前搜索了解决方案，但我尝试的一切都失败了。

更新

和 ：

`$("#follow_form").html("<%= escape_javascript(render('players/unfollow')).html_safe %>")`

什么也没有发生，部分没有被替换，但发生了错误：

```
NoMethodError in Relationships#create

Showing C:/Ruby/ostriker/app/views/players/_unfollow.html.erb where line #1 raised:

undefined method `model_name' for NilClass:Class 
```

我的 _unfollow 部分：

```
<%= form_for current_user.relationships.find_by_followed_id(@player),
         :html => { :method => :delete },
         :remote => true do |f| %>
 <div class="actions"><%= f.submit "Unfollow" %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:09:26.573

```
$("#follow_form").html("<%= escape_javascript(render('players/follow')).html_safe %>") 
```

# java - 为什么你可以在 Java 中抛出任何东西？

> ID：15200090
> 
> 赞同：9
> 
> 时间：2013-03-04T11:05:51.050
> 
> 标签：java, jvm, jvm-hotspot

**在 Java中*理论上*你只能抛出`Throwables`.**

这是语言允许的，并在类加载期间进行检查。但是如果你禁用类检查

```
java -Xverify:none -cp . BadClassThatCompiles 
```

然后你可以运行一个抛出**任何**类（不是派生自`Throwable`）的类（[示例](https://stackoverflow.com/a/13883510/2130772)）

**为什么？**

为什么要这样设计......意味着一个允许抛出对象的虚拟机和一个必须过滤掉*错误*代码的验证器。好像某些代码*可能是错误*的。不是代码，是设计！

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:19:34.133

> 为什么要这样设计......意味着一个允许抛出对象的虚拟机和一个必须过滤掉错误代码的验证器。好像某些代码可能是错误的。不是代码，是设计！
> 
> 为什么？

仅仅是因为该设计几乎可以从所有角度进行工作。

那么替代方案是什么？

我想你必须有一种特殊的“东西”，它们不是为被抛出而设计的类的实例。

这将需要：

*   定义这些异常非对象的新语法
*   一套全新的打字规则来处理这些非对象（例如它们不能是赋值兼容的对象......）
*   等等。

归根结底，Java 语言会更复杂，程序员也更难使用。为了什么目的？稍微简化验证者的任务？

对不起，但如果你把它归结为合乎逻辑的结论，这个想法是行不通的。

* * *

坦率地说，*谁在乎*你是否可以通过禁用验证器来破坏 JVM。这就像抱怨如果你玩上膛的手枪，你可以射击自己。

# sfx - 7-Zip 文件夹中不存在 7zS.sfx

> ID：15200091
> 
> 赞同：6
> 
> 时间：2013-03-04T11:05:52.180
> 
> 标签：sfx

我想使用 sfx 模块来创建安装程序的 .exe 文件

在线阅读时，我发现我们需要这个特定文件：7zS.sfx 根据[此处的说明](http://www.javalobby.org/articles/izpack/#sfx)

此特定文件应位于 7-Zip 文件夹（程序文件或已安装的位置）中。问题是我找不到这个文件。我尝试再次下载 7-zip。还是看不到这个文件。

我需要为此文件下载任何额外的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:44:16.937

好吧，在阅读了有关可用的 sfx 模块类型的更多信息之后......正如这个[SO-Link所指定的......我从](https://stackoverflow.com/questions/8087595/what-is-the-difference-between-7zips-7z-sfx-and-7zsd-sfx)[这里](http://code.google.com/p/7-zip/downloads/detail?name=7z-extra-920.7z) 下载了 7z_extra 模块

安装程序现在工作正常:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T09:39:57.543

您可以在[LZMA SDK](https://www.7-zip.org/sdk.html)`7zS2.sfx` `7zSD.sfx`的 LZMA 包（bin 文件夹）中找到文件，例如[lzma1604](https://www.7-zip.org/a/lzma1900.7z)。

作为进一步的**注意事项**：

`7zS2.sfx`找到`setup.exe`包中的第一个 exe 文件并运行它。

`7zSD.sfx``config.txt`如此处所述[的](http://richardbalsley.com/how-to-create-a-silent-self-extracting-installer-for-use-with-windows-configuration-designer)用途

# javascript - D3 饼图的数据结构

> ID：15200095
> 
> 赞同：0
> 
> 时间：2013-03-04T11:06:10.637
> 
> 标签：javascript, json, d3.js, pie-chart

我目前正在 D3 数据可视化方面迈出第一步。到目前为止，D3 教程对我帮助很大。饼图教程[http://bl.ocks.org/mbostock/3887235](http://bl.ocks.org/mbostock/3887235)虽然没有进一步解释饼图的必要数据结构。

我的数据比示例的标签/值结构更复杂。我有存储在 JSON 中的特定商品的年度总进口数据和进口数据：

```
var data = [{"year":"2001","total_import":"100000","import_specific_good":"25000"},{"year":"2002",...}]; 
```

如果我正确理解本教程，pie() 会遍历每个 DIFFERENT 对象的 SAME 条目。

如果我需要相同对象的特定不同值怎么办？

我对将所有年度总进口量显示为部分的饼图不感兴趣，而是将特定商品的年度进口量作为年度总进口量的一部分。我的值是 1\. (total_import - import_specific_good) 和 2\. import_specific_good。

我提出的数据结构是否适合我想要做的事情？还是我必须重组所有内容，以便将每年的值存储在单独的变量中？

```
var data_2001 = [{"label":"Total Import","value":"100000"},{"label":"Import of Specific Good","value":"25000"}];

var data_2002 = [{"label": ...}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:18:38.870

您不必使用特定的数据结构——您可以（并且无论如何都需要）修改示例，以便您可以使用任何您喜欢的东西！所以你可以很好地使用你的第一个 JSON。由于您只有 2 个值要显示，因此您可以简单地构建要`.data()`即时传递的结构。

```
// for pie chart
...data([json[index].total_import - json[index].import_specific_good,
         json[index].import_specific_good])...
...
// similarly for the labels 
```

不过，我建议将数字作为数字（例如不带引号）存储在您的 JSON 中——否则您必须将它们转换为 Javascript 中的数字。

# java - 通过net.sf.json序列化为json时如何添加类名

> ID：15200097
> 
> 赞同：3
> 
> 时间：2013-03-04T11:06:13.753
> 
> 标签：java, json-lib

我计划为 iOS 应用程序提供一个接口，开发人员要求添加一个额外的字段调用`class`，其中包含我在服务器上使用的 pojo 的名称，以便他可以轻松地转换为客户端上的类。问题是当 json lib 处理值时我必须这样做。我认为`registerJsonValueProcessor`可以做到这一点。然后我得到了类名，`obj.getClass().getName()`但我仍然不知道如何将它附加到 json-lib。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T11:59:23.960

如果您使用 jackson 进行 json 的序列化/反序列化，请在您的类上应用注释 JsonTypeInfo。它可以帮助你
*@JsonTypeInfo(use=Id.CLASS, include=As.PROPERTY, property="class")*

# jetty - Jetty Server - 如何从 JMX 中查找有关正在使用的 http 连接器的信息

> ID：15200099
> 
> 赞同：0
> 
> 时间：2013-03-04T11:06:17.743
> 
> 标签：jetty, jmx

我正在使用 Jetty 服务器 (7.6.8)，我希望能够从 JVM 中的 JMX 查看 Jetty 服务器中可用的 http 连接器。所以我可以弄清楚我们的 http 端口号是什么，以及 https 等。

我查看了 Jetty 服务器在使用 JMX 启动它时公开的所有 JMX MBean：

```
java -Dcom.sun.management.jmxremote -jar start.jar  etc/jetty-jmx.xml 
```

但我找不到有关 http 端口的任何信息。我知道 8080 正在使用，因为那是默认端口以及正在记录的内容

```
2013-03-04 11:55:54.260:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

如果我查看服务器 MBean：org.eclipse.jetty.server:type=server,id=0 然后我可以将连接器视为 JMX 属性，但其值始终为空。

有人知道如何使用 Jetty 从 JMX 获取连接器详细信息吗？

我还查看了 Jetty 8.1.9.v20130131，我也找不到这些信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:01:12.480

这是码头 7.6.9 的说明

1.  配置`start.ini`

    1.  确保您已`jmx`排队`OPTIONS`。
    2.  确保您在该行*之前*`etc/jetty-jmx.xml`存在并指定*`etc/jetty.xml`*
    **   添加`-Dcom.sun.management.jmxremote`到文件顶部*
**   启动码头

    `$ java -jar start.jar`

    *   跑`jconsole`*   在 jconsole 中，连接到`start.jar`*   打开 MBean 选项卡*   导航到`org.eclipse.jetty.server`> `server`> `0`> `Attributes`>`connectors`

    你会看到连接器值可能会有这样的东西......

    `org.eclipse.jetty.server.nio:type=selectchannelconnector,id=0`

    这是`ObjectName`对 JMX 树的另一部分的引用。

    *   现在导航到`org.eclipse.jetty.server.nio`> `selectchannelconnector`> `0`>中的特定连接器`Attributes`以查看详细信息*

# linux - 我如何使用实时补丁来衡量由于 Linux 上的任务迁移/负载平衡而导致的开销？

> ID：15200102
> 
> 赞同：1
> 
> 时间：2013-03-04T11:06:22.693
> 
> 标签：linux, linux-kernel, real-time

我正在尝试测量由于任务迁移造成的开销。通过开销，我想测量此类活动所涉及的延迟。我知道每个内核都有单独的运行队列可用，内核会定期检查运行队列以检查是否存在不平衡并唤醒执行迁移的内核线程（可能具有更高的优先级）。

任何人都可以为我提供指向内核源代码的指针，我可以在其中插入时间戳来测量这个值吗？

是否有任何其他性能指标我可能会调查以获得这样的开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:26:38.417

我记得之前有一个帖子讨论过这个主题，并且有人还发布了一些关于如何获取系统开销的代码。

我看到您想添加一些代码来插入时间戳，您认为这是否可行，因为任务计划如此频繁。我认为您可以关注之前发布的主题。

我曾经从帖子中保存了源代码，感谢作者！

```
double getCurrentValue() {
    double percent;
    FILE* file;
    unsigned long long totalUser, totalUserLow, totalSys, totalIdle, total;

    file = fopen("/proc/stat", "r");
    fscanf(file, "cpu %Ld %Ld %Ld %Ld", &totalUser, &totalUserLow,
        &totalSys, &totalIdle);
    fclose(file);

    if (totalUser < lastTotalUser || totalUserLow < lastTotalUserLow ||
        totalSys < lastTotalSys || totalIdle < lastTotalIdle) {
        //Overflow detection. Just skip this value.
        percent = -1.0;
    }
    else {
        total = (totalUser - lastTotalUser) + (totalUserLow - lastTotalUserLow) +
            (totalSys - lastTotalSys);
        percent = total;
        total += (totalIdle - lastTotalIdle);
        percent /= total;
        percent *= 100;
    }

    lastTotalUser = totalUser;
    lastTotalUserLow = totalUserLow;
    lastTotalSys = totalSys;
    lastTotalIdle = totalIdle;

    return percent;
} 
```

# iphone - 正则表达式检测 JSON 字符串中的模式

> ID：15200105
> 
> 赞同：1
> 
> 时间：2013-03-04T11:06:36.093
> 
> 标签：iphone, objective-c, regex

我有一个这样的字符串

```
"Settings" : { "UserId" : 3, "UserToken" : "4578965235874158", "SecurityCode" : "111", "Password" : "12345", "UserPhone" : "555-555-1531", "drop" : -1, "UserLastName" : "Smith" } 
```

我需要一个正则表达式模式来找到`"UserToken"`（在这个例子中`4578965235874158`）的值

对不起，如果这是一个“给我代码”的问题，但我从来没有使用过正则表达式，我没有太多时间学习和尝试自己做。

感谢帮助。

**附加说明：** 我将在 Objective-C 中将它用于 iPhone 应用程序。我不知道这是否会影响任何事情，但以防万一。

**EDIT** ' 模式是：key 后面总是`"UserToken"`跟一个空格，然后是一个空格，然后是`:`double Quotes 中的值`"`。我想得到这个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:15:16.440

由于它是 json 格式，因此您实际上并不需要使用正则表达式对其进行解析，但如果需要，这可以是一个解决方案：

```
(?<="UserToken"\s:\s")\d+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:17:18.963

我会转换它并访问我需要的所有信息，例如：

```
NSString *str = @"\"Settings\" : { \"UserId\" : 3, \"UserToken\" : \"4578965235874158\", \"SecurityCode\" : \"111\", \"Password\" : \"12345\", \"UserPhone\" : \"555-555-1531\", \"drop\" : -1, \"UserLastName\" : \"Smith\" }";

//NSDictionary *jsonDict = [str JSONValue];

NSError *error;
NSData *jsonData = [str dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *results = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error]; 
```

比所有信息都存储在结果 NSDictionary 上，只需要执行以下操作：`[results valueForKey:(NSString *)]`或`[results objectForKey::(NSString *)]`

# javascript - Html5 LocalStorage 和 window.open

> ID：15200106
> 
> 赞同：1
> 
> 时间：2013-03-04T11:06:43.750
> 
> 标签：javascript, html, local-storage, window.open

所以我有这个页面，其中包含一个打开弹出窗口的按钮：

```
<a onClick="javascript:window.open('{{ path('ChoixSecteur')}}','Choix Secteurs','scroll=yes, location=no, menubar=no, status=no, width=400,height=500')" href="" title="" class="sideB bLightBlue">Ajouter Secteurs</a> 
```

在打开的页面中，我有一个包含检查树的表单：

```
 <form action="javascript:RecupererSecteurs()" >
    <h1>Secteurs</h1>
    <div id="tree_div" >
        <ul class="tree" id="tree_ul">
           //Check tree Dynamically generated
        </ul>
    </div>
    <button type="submit" class="btn btn-info">Valider</button>
    </form> 
```

至于功能`RecupererSecteurs()`，它是这样的：

```
function RecupererSecteurs()
{
    i=0;
    localStorage.clear();
    $('ul.tree').find('div.checked').each(function(){
        i++;
        li=$(this).parent('li');
        localStorage.setItem(i,li.find('input:first').val());
    });
   // window.close();
   localStorage.setItem('number',i);
} 
```

现在，当我提交表单时，本地存储正是我想要的。我关闭弹出窗口并寻找主页的本地存储，但发现它是空的。虽然这两个页面来自同一个域。

主页的网址：`http://192.168.0.215/Asicx_Merch/web/CreateUserCom/vide/vide/vide`

弹窗网址：

```
http://192.168.0.215/Asicx_Merch/web/ChoixSecteur 
```

有什么我想念的吗？！提前致谢。PS：我正在使用 symfony2。

# java - 如何在 Windows 中中断/停止 java ping 命令？

> ID：15200108
> 
> 赞同：0
> 
> 时间：2013-03-04T11:06:46.947
> 
> 标签：java, runtime, interrupt

我得到了一个稍作修改的示例 ping 程序......

```
 String ip = "192.168.1.1 -t";
    String pingResult = "";      
    String pingCmd = "ping " + ip;

    try{

        Runtime r = Runtime.getRuntime();
        Process p = r.exec(pingCmd);

        Pattern pattern = Pattern.compile("time=(\\d+)ms");
        Matcher m = null;
        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            m = pattern.matcher(inputLine);
            if (m.find()) {
                System.out.println(m.group(1));
            }
        }
        in.close();

    }
    catch (IOException e) {
        System.out.println(e);
    } 
```

我将实现一个包含开始和退出按钮的 GUI，开始按钮可以工作，但退出按钮不会。当我单击退出按钮时，程序不显示 rtt 时间输出。但是程序实际上并没有退出/停止。我如何完全关闭它，我要添加类似`Runtime.getRuntime().addShutdownHook`.

需要一些提示和指南，在此先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:11:17.420

您可以使用 ping 的`-n`参数并在 n 次 ping 后重新启动，或者在用户需要停止时停止。

`Process`还有一个OutputStream。当您想停止 ping 时，您可以尝试发送 Ctrl-C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:44:11.727

```
boolean isStoped=false;

while ((inputLine = in.readLine()) != null && (!isStoped)) {
            m = pattern.matcher(inputLine);
            if (m.find()) {
                System.out.println(m.group(1));
            }
        } 
```

当您单击退出按钮时拨打`isStoped=true`和拨打电话。`p.destroy()`希望这会帮助你。

# c# - 将数组数据从 excel VBA 发送到 WCF

> ID：15200110
> 
> 赞同：3
> 
> 时间：2013-03-04T11:06:50.743
> 
> 标签：c#, .net, arrays, wcf, vba

我的问题是，我想将一组字符串从 VBA 发送到 WCF。

c#代码是：

```
[OperationContract]    
void SetSomeObjects(string[] data); 
```

这是VBA部分

```
Dim data(2) As String
data(0) = "abc"
data(1) = "def"

Dim service2 As Object
Set service2 = GetObject(ServiceBindingInformation)
service2.SetSomeObjects data 
```

最后一行抛出 VBA

```
"Type Mismatch Error" 
```

我不知道为什么会这样。请提出一种将数组数据从 VBA 发送到 WCF 服务的方法如果我使用对象作为参数类型，它会给出错误，如所附屏幕截图所示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:30:34.430

我认为问题出在 C# 代码中。

曾经我想基于 Linq (C#) 对数组 (VBA) 进行排序。数组以将参数传递给函数/方法的方式传递给 UDF：

```
Dim UDF_Array As UDFArrayLinqTest.ArrayLinq
Set UDF_Array = New UDFArrayLinqTest.ArrayLinq

TBL = Array(...)
Range(...) = UDF_Array.ArraySorted(TBL) 
```

C#中的简单UDF如下：

```
public double[] ArraySorted(object tbl)
    {
        object[] obj = (object[])tbl;
        var filtr = from i in obj
                    orderby Convert.ToDouble(i)
                    select Convert.ToDouble(i);

        double[] result = (double[])filtr.ToArray();
        return result;
    } 
```

我认为这不是最好的主意，但是在完成上述对我来说已经足够好的之后，我停止了寻找更好的方法。

# email - 我想要 Grails 上的服务自动发送电子邮件？

> ID：15200113
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:06:58.547
> 
> 标签：email, grails, service, automation

我希望在启动服务器时自动启动服务。我希望这项服务在周一、周三和周五早上 8 点向数据库中的所有客户发送电子邮件。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T11:25:50.497

如果您付出了一些努力，那就太好了，但是，本着帮助的精神，这是您解决此问题的方法：

1.  安装 Grails[邮件插件](http://grails.org/plugin/mail)并尝试使用它发送一封电子邮件。文档非常简单。
2.  然后创建一个服务，该服务具有获取数据库中客户列表的方法，例如 Customer.list() 并遍历每条记录并发送电子邮件。
3.  然后安装[石英插件](http://grails.org/plugin/quartz)
4.  然后创建一个调用此服务方法的 Grails Job。
5.  然后在 Bootstrap.groovy 中初始化你的工作（更多关于 cron 表达式[在这里](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)）：

    NotificationSenderJob.schedule('0 0 8 ? * MON-FRI', null)

你应该准备好了。

# javascript - 可点击表格单元格内的按钮

> ID：15200120
> 
> 赞同：5
> 
> 时间：2013-03-04T11:07:16.997
> 
> 标签：javascript, jquery, html

我有一个可单击的表格单元格，并在单击时触发 jQuery 事件。在该单元格中，我还有一个按钮，单击该按钮时会产生另一个 jQuery 事件。问题是，当单击按钮时，单元格和按钮事件都会被触发。

例如：

```
<script>
    $(document).ready(function () {
        $('#cell').click(function () {
            alert('cell clicked');
        });        
        $('#button').click(function () {
            alert('button clicked');
        });
    });
</script>

<table>
    <tr>
        <td id="cell">
            <button id="button">go</button>
        </td>
    </tr>
</table> 
```

如何防止单击按钮时触发单元格单击事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:09:06.110

您可以使用`stopPropagation()`which 允许您停止将事件冒泡到父 dom。

**例子**

```
$('#button').click(function (e) {
    e.stopPropagation();
    alert('button clicked');
}); 
```

将`table`宽度设置为`100%`并测试它。

**测试代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $('#cell').click(function () {
            alert('cell clicked');
        });        
        $('#button').click(function (e) {
            e.stopPropagation();
            alert('button clicked');
        });
    });

</script>
<table width="100%">
    <tr>
        <td id="cell">
            <button id="button">go</button>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:09:48.857

停止`event propagation`被称为`event bubbling to the parent`：

```
$('#button').click(function (e) {
        e.stopPropagation();
        alert('button clicked');
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T11:10:14.470

你需要使用

```
stopPropagation 
```

这个例子应该解决它：

```
$(document).ready(function () {
    $('#cell').click(function () {
        alert('cell clicked');
    });        
    $('#button').click(function (e) {
        e.stopPropagation();
        alert('button clicked');
    });
}); 
```

那应该解决它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T11:11:25.953

```
$(document).ready(function(){
   $('#cell').click(function(event){
     if($(event.target).is('#button')){
         event.stopPropagation();
      }    
   });    
}); 
```

# android - 自定义 ImageView 在 Nexus 7 上自动调整大小

> ID：15200124
> 
> 赞同：5
> 
> 时间：2013-03-04T11:07:46.123
> 
> 标签：android, android-imageview

我有一个覆盖整个屏幕的自定义 ImageView。图像来自可绘制文件夹之一，drawable-hdpi、drawable-xhdpi、drawable-sw600dp 等，每个密度桶都有单独的图像。

到目前为止，该应用程序在 xhdpi 和 hdpi 设备上运行良好，当我在 Nexus 7 上测试它时会出现问题。存储在 sw600dp 文件夹中的图像大小为 1600x1600，应该足以直接在屏幕上绘制（无需缩放)，但是当我运行该应用程序时，屏幕变成完全空白，并且我收到以下警告：

> 03-04 16:25:46.338: W/OpenGLRenderer(25457): 位图太大而无法上传到纹理中 (2130x2130, max=2048x2048)

由于某种原因，1600x1600 位图被缩放到 2130x2130，尽管我没有在任何地方手动缩放它（没有应用矩阵后缩放或 scaleX/scaleY）

关于为什么会发生这种情况的任何想法？请提供解决方案并解释为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:56:19.537

由于 Nexus 7 是 tvdpi，它会将每个图像缩放到原始值的 1.33。所以 1600 变成 (1600*1.33)= ~2130。它不会从 sw600dp 文件夹中显示它。

更多信息：- [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

您可以使用与其他 7 英寸平板电脑相同的图像（即分辨率 1024*600 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:37:01.230

我想分享一些有关您遇到的错误的信息..

**根据[Romain Guy](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/I1LHdmUbb5k)** **（Android 框架工程师）**的说法：

> ***使用硬件加速时，纹理的大小是有限制的。渲染位图时，必须先将其上传到 OpenGL 纹理。您的位图恰好大于 Xoom 上的最大纹理尺寸 (2048x2048)。您需要使用较小的位图或将其拆分为多个位图。***

其他 SO 链接可能对您有帮助：**[点击这里 1](https://stackoverflow.com/questions/12108841/how-to-catch-error-bitmap-too-large-to-be-uploaded-into-a-texture)**，[**点击这里 2**](https://stackoverflow.com/questions/13180382/bitmap-too-large-to-be-uploaded-into-a-texture)

吉特：**[点击这里](https://github.com/nostra13/Android-Universal-Image-Loader/issues/98)**

更新：这个答案只说明为什么会发生错误（因为纹理大小限制）对不起，它不是为什么 1600x1600 位图缩放到 2130x2130 的完整答案！

# matlab - 读取不同类型的图像文件

> ID：15200135
> 
> 赞同：0
> 
> 时间：2013-03-04T11:08:18.837
> 
> 标签：matlab

我知道如何从相同类型的文件夹中读取所有图像文件，例如`TIFF`. 我的问题：有没有办法读取文件夹中的各种图像文件？图像可以是`TIFF`, `BMP`, `JPEG`. 也可能发生在给定点仅存`JPEGs`在于文件夹中，或者可能所有三种类型都存在。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:12:17.447

该函数`imread`可以读取大多数现有的标准图像类型。
所以，你能做的是

```
cd( folder );
fls = dir( '*' ); % list ALL files
ii = 1;
imgs = {};
for fi=1:numel(fls)
    if fls(fi).isdir, continue; end; % skip sub directories
    try
       tmp = imread( fls(fi).name );
       imgs{ii} = tmp; % got an image
       ii = ii+1; 
    catch em
       % not an image - ignore
    end
 end 
```

# android - 无法关闭android中的警报对话框

> ID：15200136
> 
> 赞同：2
> 
> 时间：2013-03-04T11:08:23.143
> 
> 标签：android, android-alertdialog, android-custom-view

我在关闭自定义的警报对话框时遇到问题。那就是它有一个包含两个按钮的自定义视图，一个用于数据库操作，另一个用于加载另一个活动。我想在执行数据库操作后关闭对话框。但是现在我不能声明任何命令，或者`dialog.dismiss()`请有人帮我解决这个问题。`cancel()``finish()`

**我的课**

```
 @Override
   protected boolean onTap(int index) {
     OverlayItem item = mapOverlays.get(index);
     final String  title= item.getTitle();
     final String snippet= item.getSnippet();
     AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
     if(title.equalsIgnoreCase("Your Location")){
     dialog.setTitle(item.getTitle());
     dialog.setMessage(item.getSnippet());
     dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
     }
     else if(title.equalsIgnoreCase("")){
     LinearLayout layout = new LinearLayout(context);
     layout.setOrientation(LinearLayout.VERTICAL);

     final Button park_button = new Button(context);
     park_button.setHint("Park here");
   //  park_button.setBackgroundResource();
     layout.addView(park_button);
     park_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("parkbutton:Clicked");
            // Delete DB Values
            int count = db.getDatasCount();
            for(int i = 0;i<count;i++){
                db.deleteValues(i);
            }
            //latitude & longtitude (string)
               String latitude = String.valueOf(lat);
               String longtitude = String.valueOf(lon);
               Log.d("Insert: ", "Inserting ..");
               db.addData(new Datas(latitude, longtitude));
              // Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();

            // Reading DB Data
               Log.d("Reading: ", "Reading all Values...");
               List<Datas> datas = db.getAllDatas();       

               for (Datas dat : datas) {
                   String log = "Id: "+dat.getID()+" ,Latitude: " + dat.getlat() + " ,Longtitude: " + dat.getlon();
                       // Writing DB data to log
               Log.d("DB Data: ", log);
           }
            Intent f = new Intent(context,MainTabActivity.class);
            context.startActivity(f);
        }
    });

     final Button know_more_button = new Button(context);
     know_more_button.setHint("Know more");
     //  park_button.setBackgroundResource();
     layout.addView(know_more_button);
     know_more_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            SharedPreferences prefs = context.getSharedPreferences("myprefs", 0);
            SharedPreferences.Editor editor =prefs.edit();
            editor.putString("KEY_REFERENCE", snippet);
            editor.commit();                

            Intent intent = new Intent(context, SinglePlaceActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent);
        }
    });

     dialog.setView(layout);
     dialog.setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });
     }
     dialog.show();
     return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
   }

   public void populateNow(){
       this.populate();
   }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T18:07:52.530

首先，为了解释如何获得您想要的行为，我需要您将当前名为**dialog**的 AlertDialog.Builder 实例重命名为**builder**。它没有准确命名，将帮助您了解我解决问题的方法。所以这一行：

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this.context); 
```

会变成：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this.context); 
```

从那里，您需要：

1.  创建对调用 show() 时返回给您的 AlertDialog 实例的**最终引用 - 并将***其称为* **dialog**。
2.  接下来，将您设置的按钮单击侦听器移到您在构建器上调用 show() 的位置下方。
3.  最后，引用我让你创建的**对话框**变量，然后调用dismiss()。

请参见下面的代码：

```
// ... original code here (right before the end of your onTap main method)
final AlertDialog dialog = builder.show(); // this line used to be "dialog.show();"
know_more_button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // ... original code here
        dialog.dismiss();
    }
});
// ... for the other button, do the same
return true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:04:16.853

如果可以接受，请尝试扩展 DialogFragment（您需要从 FragmentActivity 扩展您的活动）。

```
public static class Dialog extends DialogFragment {

    @Override
    public android.app.Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder b = new AlertDialog.Builder(getActivity());

        Button btn = new Button(getActivity());
        btn.setText("dismiss");

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                dismiss();
            }
        });

        b.setView(btn);
        b.setPositiveButton("OK", null);
        return b.create();
    }
} 
```

您可以通过这种方式显示对话框（使用 android.support.v4）：

```
new Dialog().show(getSupportFragmentManager(), "dialog"); 
```

您还需要在对话和活动之间建立[通信。](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:13:08.390

做这个

`final AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);`

不是 `AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);`

# database - 如何在magento的产品详细信息页面中从产品名称中删除字数限制

> ID：15200137
> 
> 赞同：0
> 
> 时间：2013-03-04T11:08:27.617
> 
> 标签：database, magento

我想在 magento 的产品详细信息页面中从产品名称中删除字数限制。

```
for example in database product name is abcdefghijklmnopqrstuvwxyz, but on detail page the name is abcdeffg....

bt i want to show full name as it is. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:17:14.840

基本上这是 catalog/product/view.phtml 中用于显示产品名称的代码

```
 <?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?> 
```

如果您修剪了产品名称

那么你只需使用它而不需要帮助

```
 <?php echo $_product->getName() ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:45:25.983

几乎与[Magento 相同：问题停止限制产品名称](https://stackoverflow.com/questions/15200778)它可能是 CSS 属性`text-overflow:ellipsis`。`styles.css`目前在我的商店中有 3 个不同的默认模板文件。在另一个答案中，我展示了如何使用`find`命令查找文件。

# css - TabPanel中的gwt ScrollPanel：没有垂直滚动条

> ID：15200138
> 
> 赞同：3
> 
> 时间：2013-03-04T11:08:29.933
> 
> 标签：css, gwt, scroll, uibinder

**编辑**

我通过调整 中的组件大小修复了空白行为`VerticalPanel`，这似乎对控制台错过的面板尺寸产生了影响。我不太明白怎么做。

但是，我仍然坚持没有显示垂直滚动条的面板。

在 GWT 项目中，我具有以下结构：

**页**

```
DockLayoutPanel
    North (header)
    Center (body)
    South (footer)
/DockLayoutPanel 
```

**身体**

```
SplitLayoutPanel$1
    West
        SplitLayoutPanel$2
             North
             Center
                 TabPanel
                     ScrollPanel
                         VerticalPanel
                             -Several widgets-
                         /VerticalPanel
                     /ScrollPanel
                 /TabPanel
             /Center
        /SplitLayoutPanel$2
    /West
    Center
/SplitLayoutPanel$1 
```

我的问题在于`ScrollPanel`in `TabPanel`，它本身包含一个`VerticalPanel`包含多个小部件的。对于. `Tab`_`TabPanel`

我的问题是，虽然`SplitLayoutPanel$2`' 中心的所有容器的宽度都有 100% 的宽度，但 ' 中`ScrollPanel`包含一个水平滚动条，旁边有相当大的白色区域`VerticalPanel`，而它们的绝对度量大小相同。

**说明情况**

[![TabPanel 概览](../Images/13b8fed5e70576d4db0da472cbdfa85b.png)](https://i.stack.imgur.com/A8Pjg.png)

这是`TabPanel`、`ScrollPanel`和`VerticalPanel`。注意水平滚动条是如何存在的，而`TabPanel`,`ScrollPanel`和`VerticalPanel`具有相同的宽度。向右滚动会产生一个白色区域。

![滚动和垂直面板详细信息](../Images/5ebb5d60c387c083f83b916c222ae669.png)

`ScrollPanel`和所有运动的`VerticalPanel`绝对宽度为 598 像素。的 West 组件的`DockLayoutPanel`大小为 600，因此匹配。还要注意调出开发者控制台是如何使滚动条消失的。事实上，整个面板已经消失在它的身后，也没有弹出垂直滚动条。

![滚动](../Images/95b74d907ff2f9f7fa55cc70e8cbd4b0.png)

向右滚动条时，`VerticalPanel`将部分放置在屏幕外，并`ScrollPanel`显示此空白。显然，我不希望空白在那里，所以根本不需要滚动条。这种情况下的所有面板仍然具有相同的宽度：598px。使用右边的边框调整 . 的大小会`SplitLayoutPanel`增加这些值（显然），但面板仍然共享相同的宽度，并且空白保持相同的大小，而我希望它也会变得更宽。

第二个选项卡包含大量文本，这些文本继续离开屏幕，但没有出现滚动条。

**问题结论**

*   没有垂直滚动条
*   带有一些神奇召唤空白的水平滚动条
*   组件声称具有相同的宽度

任何帮助是极大的赞赏。

**编辑**

尝试将`VerticalPanel`宽度调整为 90% 或 80%。空白似乎不受影响，它表明 100% 确实覆盖了可见宽度，而不是更多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:57:19.453

`TabPanel`（至少来自 GWT 的那个）从内到外调整大小：它的大小取决于所选选项卡的大小。所以你`ScrollPanel`永远不会有一个垂直滚动条，除非你明确地给它一个大小，并且你的内容实际上溢出了你放入的*层*。`SplitLayoutPanel``TabPanel`

`TabLayoutPanel`另一方面，布局面板（例如 ）从外向内调整大小：`SplitLayoutPanel`将`TabLayoutPanel`在其中心区域设置 的大小，而`TabLayoutPanel`将依次设置 ​​的大小`ScrollPanel`，因此如果`ScrollPanel`溢出的内容，垂直出现滚动条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:01:36.863

**第一点：**不要混搭布局面板和非布局面板。

**第二点：**如果您想要正确调整大小和滚动条，请始终尝试以百分比形式提及宽度和高度。

我看到你提到了 width to be `100%`。但是`height`呢？

我给你的建议是，

更改`TabPanel`为`TabLayoutPanel`

将整个层次结构中的所有面板高度设置为`100%`

# ruby-on-rails - 在其他 html.erb 中渲染 html.erb（不是部分）

> ID：15200144
> 
> 赞同：0
> 
> 时间：2013-03-04T11:09:18.597
> 
> 标签：ruby-on-rails, zurb-foundation

我对 Rails 很陌生，正在尝试使用 Foundation 框架制作应用程序。问题在于模式窗口。

我`index.html.erb`在文件夹中有一个文件`views/users`，由脚手架生成。同一文件夹中还有一个`new.html.erb`文件。

我想`../users/new`在索引页面的模式窗口中打开链接。

[我在Reveal (Foundation Documentation)](http://foundation.zurb.com/docs/components/reveal.html)中使用了示例，将`new.html.erb`文件内容放入：

```
<div id="myModal" class="reveal-modal">
.
.
</div> 
```

此外，添加到新用户链接“href”属性。

```
<%= link_to 'New User', new_user_path, 'data-reveal-id' => 'myModal' %> 
```

[如此处](https://stackoverflow.com/questions/8729223/how-to-pass-an-object-to-a-reveal-modal-pop-up-window)所述。

现在我需要渲染`new.html.erb`，`index.html.erb`因为我需要在 /body 标记之前使用此代码，如 Foundation Docs 中所述。

我试图将其渲染为部分，但它不起作用。

有没有办法做到这一点，而不是 double `new.html.erb`as`_new.html.erb`并将其作为部分插入`index.html.erb`？

我不认为，RoR 的所有内容都是“少写代码！” 东西，没有代码复制就没有办法做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:46:57.083

您不能按原样使用新操作，尽管您可以将您的表单放在一个部分中，使用新的和您的操作以在模态中生成表单。

在页面加载时，您可以使用 _form partial。

如果需要，您可以使用 ajax 为模型生成表单，这可以用于编辑以及新建。

Step1 :link_to "你的操作路径", remote: true, id: "abc"

第 2 步：您的操作路径应该使用渲染到字符串返回表单的 html

Step3：现在使用 $("#abc") 的 jquery ajax 成功将模型内部内容替换为表单。

并对 ajax 和回发使用 create 操作。

代码是干燥的。

如果您需要代码，请告诉我。

谢谢

# iphone - 不在 AppDelegate 创建 TabBarController

> ID：15200150
> 
> 赞同：0
> 
> 时间：2013-03-04T11:09:36.403
> 
> 标签：iphone, ios, objective-c

这是 RegisterViewController.m 部分

```
 if ([message isEqualToString:@"registerOK"]){

        self.findViewController = [[FindViewController alloc] initWithNibName:nil bundle:NULL];
        self.friendViewController = [[FriendViewController alloc] initWithNibName:nil bundle:NULL];
        self.goViewController = [[GoViewController alloc] initWithNibName:nil bundle:NULL];
        self.settingViewController = [[SettingViewController alloc] initWithNibName:nil bundle:NULL];

        self.findNavigationController = [[UINavigationController alloc] initWithRootViewController:self.findViewController];
        self.friendNavigationController = [[UINavigationController alloc] initWithRootViewController:self.friendViewController];
        self.goNavigationController = [[UINavigationController alloc] initWithRootViewController:self.goViewController];
        self.settingNavigationController = [[UINavigationController alloc] initWithRootViewController:self.settingViewController];
        //[self.findNavigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav-bar-background-light.png"] forBarMetrics:UIBarMetricsDefault];

        [self.findNavigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav-bar-background-light.png"] forBarMetrics:UIBarMetricsDefault];
        [self.friendNavigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav-bar-background-light.png"] forBarMetrics:UIBarMetricsDefault];
        [self.goNavigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav-bar-background-light.png"] forBarMetrics:UIBarMetricsDefault];
        [self.settingNavigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav-bar-background-light.png"] forBarMetrics:UIBarMetricsDefault];

        NSArray *allViewController = [[NSArray alloc] initWithObjects:self.findNavigationController,self.friendNavigationController,self.goNavigationController,self.settingNavigationController, nil];
        self.tabBarController = [[UITabBarController alloc] init];
        [self.tabBarController setViewControllers:allViewController];
        UIWindow *window = [UIApplication sharedApplication].keyWindow;
        [self.view addSubview:self.tabBarController.view];
        [window setRootViewController:self];
    } 
```

我想创建一个`TabBarController`in `RegisterViewController`。我该怎么做？在`AppDelegate.m`我有一个 if ：如果已经**登录**然后创建`TabBarController`，如果没有去`RegisterViewController`，那么如果**注册**完成我想创建`TabBarController`。这个怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:57:05.077

在 AppDelegate 中创建公共方法并像往常一样创建标签栏。并在需要的地方调用此方法：

```
[(ASAppDelegate *)[[UIApplication sharedApplication] delegate]yourMethod] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:33:49.350

`tabBarController.view`您可以只显示您的登录名并在by`[self.tabBarController presentViewController:]`或诸如此类的顶部注册视图。

# django - 如何获得间接分配的对象？

> ID：15200153
> 
> 赞同：0
> 
> 时间：2013-03-04T11:09:39.833
> 
> 标签：django, django-models

我有模型：

```
class Model_1(models.Model):
    ...

class Model_2(models.Model):
    m1 = models.ManyToManyField(Model_1,...
    ...

class Model_3(models.Model):
    m2 = models.ManyToManyField(Model_2,...
    ... 
```

我有model_3对象的pk。如何获取间接分配给model_3的所有model_1对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:28:39.253

如果我没记错的话，这应该可以满足您的需求。

```
model_1_objs = Model_3.objects.get(pk=the_pk).m2_set.only('m1') 
```

# c# - TemplateField 中的 Gridview 按钮仅在第二次单击时触发

> ID：15200157
> 
> 赞同：1
> 
> 时间：2013-03-04T11:09:45.763
> 
> 标签：c#, asp.net, gridview, templatefield

在询问之前我已经进行了一些搜索，虽然[这篇文章](https://stackoverflow.com/questions/2186191/why-wont-my-linkbutton-inside-a-gridview-raise-its-onclick-event)很接近，但它不适用于我的场景。

我发现我的模板字段中的“删除”按钮似乎触发了，但点击事件没有触发。然而，当您第二次单击该按钮时，它会按预期工作。

所以，分解代码，我将我的数据绑定到一个`GridView`，使用一个 `SqlDataSource.

我的页面加载事件开始如下：

```
if (!Page.IsPostBack)  
{  
    externalUserDataSource.ConnectionString = "some connection string";  
} 
```

我的数据源如下：

```
<asp:SqlDataSource ID="externalUserDataSource" runat="server" 
    ConflictDetection="CompareAllValues" SelectCommand="uspGetExternalUsersByTeam"
SelectCommandType="StoredProcedure" ProviderName="System.Data.SqlClient">
<SelectParameters>
    <asp:SessionParameter Name="TeamID" SessionField="TeamID" Type="Int32" />
</SelectParameters>
</asp:SqlDataSource> 
```

这是我的`GridView`标记：

```
<asp:GridView ID="gridView" runat="server" AutoGenerateColumns="False" 
    BackColor="White" BorderColor="#3366CC" BorderStyle="None" BorderWidth="1px" 
    CellPadding="4" DataKeyNames="LoginID" DataSourceID="externalUserDataSource" 
    EnableModelValidation="True" OnRowDataBound="GridViewRowDataBound" TabIndex="3">
        <HeaderStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
        <FooterStyle BackColor="#99CCCC" ForeColor="#003399" />
        <PagerStyle BackColor="#99CCCC" ForeColor="#003399" HorizontalAlign="Left" />
        <RowStyle BackColor="LightGoldenrodYellow" />
        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        <Columns>
            <asp:BoundField DataField="RowID" HeaderText="Row ID" ReadOnly="True" 
                SortExpression="RowID" Visible="False" />
            <asp:BoundField DataField="LoginID" HeaderText="Login ID" ReadOnly="True" 
                SortExpression="LoginID" Visible="False" />
            <asp:BoundField DataField="EmailAddress" HeaderText="Email Address" 
                ItemStyle-VerticalAlign="Bottom" ReadOnly="True" SortExpression="AssociateName"/>
            <asp:BoundField DataField="TeamID" HeaderText="Team ID" ReadOnly="True" 
                SortExpression="TeamID" Visible="False" />
            <asp:CheckBoxField DataField="HasFIAccess" 
                 HeaderText="Has Access to&lt;br /&gt;Funding&lt;br/&gt;Illustrator" 
                 ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Bottom" 
                 ReadOnly="True"/>
            <asp:CheckBoxField DataField="HasALTAccess" 
                 HeaderText="Has Access to&lt;br /&gt;Asset Liability&lt;br/&gt;Tracker" 
                 ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Bottom"
                 ReadOnly="True"/>
            <asp:CheckBoxField DataField="HasFIAAccess" 
                 HeaderText="Has Access to&lt;br /&gt;Funding&lt;br/&gt;Illustrator App" 
                 ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Bottom"
                 ReadOnly="True"/>                    
            <asp:TemplateField>
            <ItemTemplate>
                <asp:Button runat="server" CssClass="additionsRow" ID="btnDeleteExternalUser" OnClick="DeleteExtUserButtonClick" 
                    CausesValidation="False" Text="Delete" 
                    CommandArgument='<%#Eval("TeamID") + "," + Eval("LoginID") + "," + Eval("EmailAddress") + "," + Eval("HasALTAccess")%>'/>                            
            </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

因此，您可以看到我在事件中使用的按钮中传递了一些信息，以确保删除正确的数据（这就是我不能使用 的原因`ButtonField`，如上面链接中所建议的那样）。

谜题的最后一部分是`GridView`的数据绑定事件：

```
 protected void GridViewRowDataBound(object sender, 
                                        GridViewRowEventArgs e)
    {
        // if rowtype is not data row...
        if (e.Row.RowType != DataControlRowType.DataRow)
        {
            // exit with no further processing...
            return;
        }

        // get the ID for the selected record...
        var selectedId = DataBinder.Eval(e.Row.DataItem, "RowID").ToString();

        // create unique row ID...
        e.Row.ID = string.Format("ExtUserRow{0}", selectedId);

        // find the button delete for the selected row...
        var deleteButton = (Button)e.Row.FindControl("btnDeleteExtUser");

        // get the email address for the selected record...
        var selectedUser = DataBinder.Eval(e.Row.DataItem, "EmailAddress").ToString();

        // define the message text...
        var messageText = string.Format("OK to delete {0}?",
                                        selectedUser.Replace("'", "\\'")); 

        // add attribute to row delete action...
        this.AddConfirmMessage(deleteButton, messageText);
    } 
```

只需将onclick`AddConfirmMessage`属性分配给控件以确保用户必须确认删除。

现在，在每种情况下，都会弹出消息' *OK to delete abc@xyz.com?* '，但如前所述，分配给“删除”按钮的事件在第二次单击该按钮之前不会触发。

奇怪的是，我从另一个页面获取了这段代码并进行了相应的修改，尽管那里没有这个问题：

```
 protected void DeleteExtUserButtonClick(object sender, 
                                            EventArgs e)
    {
        // get the buton which was clicked...
        var button = (Button)sender;

        // break the delimited array up...
        string[] argumentArray = button.CommandArgument.Split(',');

        // store the items from the array...
        string teamId = argumentArray[0];
        string loginId = argumentArray[1];
        string emailAddress = argumentArray[2];
        string hasAltAccess = argumentArray[3];

        using (var conn = new SqlConnection(Utils.GetConnectionString()))
        {
            // create database command...
            using (var cmd = new SqlCommand())
            {
                // set the command type...
                cmd.CommandType = CommandType.StoredProcedure;

                // set the name of the stored procedure to call...
                cmd.CommandText = "uspDeleteExternalUser";

                // create and add parameter to the collection...
                cmd.Parameters.Add(new SqlParameter("@TeamId", SqlDbType.Int));

                // assign the search value to the parameter...
                cmd.Parameters["@TeamId"].Value = teamId;

                // create and add parameter to the collection...
                cmd.Parameters.Add(new SqlParameter("@LoginId", SqlDbType.VarChar, 50));

                // assign the search value to the parameter...
                cmd.Parameters["@LoginId"].Value = loginId;

                // set the command connection...
                cmd.Connection = conn;

                // open the connection...
                conn.Open();

                // perform deletion of user...
                cmd.ExecuteNonQuery();
            }
        }

        // bind control to refresh content...
        ExtUsersGrid.DataBind();
    } 
```

我错过了什么明显的东西吗？如果有更好的方法可以做到这一点，我很乐意进行修改。

**编辑1**：根据下面的讨论，我修改了以下内容：

*   删除了; 的`Onclick`事件属性`ButtonItem`
*   按照下面的建议设置`CommandName`and `CommandArgument`，并更新`DataKeyNames`以使用 RowID，这是数据中的唯一 ID；
*   为; 分配了一个`RowCommand`事件`GridView`
*   将删除代码分配给`RowCommand`事件。

在这些更改之后，它仍然会在第二次单击时触发行事件代码。

**编辑2**：仅供参考-我现在已经删除了`SqlDataSource`相关的代码/引用，并创建了一个填充数据集的过程，该过程被调用`Page_Load`（在`!Page.IsPostBack`括号内）。我开始在下面进行更改以使用该`RowCommand`事件，但它们仍然导致相同的问题（即该按钮只会在第二次单击时触发）。由于使用`RowCommand`意味着将`BoundField`s 转换为`ItemTemplate`s，因此我恢复到按钮单击事件，因为毫无意义地进行所有这些更改似乎毫无意义。如果其他人可以帮助我理解为什么它只在第二次点击时触发，将不胜感激您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:00:48.323

OK, frustratingly this was due to some code that for reasons still unknown, works elsewhere.
In the DataBound event, there was two lines of code:

```
 // get the associate name for the selected record...
        var selectedId = DataBinder.Eval(e.Row.DataItem, "RowID").ToString();
        // create unique row ID...
        e.Row.ID = string.Format("ExtUserRow{0}", selectedId); 
```

The process of applying an ID to the rows programatically seems to break the connection between the data and the events.
By removing these two lines of code, it works as expected.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T11:30:39.677

相反，你可以做这样的事情。

像这样添加一个`CommandName`属性`GridView`。还要注意`CommandArgument`属性的变化：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button runat="server" CssClass="additionsRow" ID="btnDeleteExtUser"  
                    CausesValidation="False" Text="Delete" 
                    CommandName="OnDelete"  
                    CommandArgument='<%# Container.DisplayIndex %>" '                              
</ItemTemplate>
</asp:TemplateField> 
```

后面的代码看起来像这样。请注意，我正在`RowCommand`使用`Gridview`.

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName == "OnDelete")
    {
        int rowIndex = Convert.ToInt32(e.CommandArgument);
        // now you got the rowindex, write your deleting logic here.
        int ID = Convert.ToInt32(myGrid.DataKeys[rowIndex]["ID"].Value);
        // id will return you the id of the row you want to delete 
        TextBox tb = (TextBox)GridView1.Rows[rowIndex].FindControl("textboxid");
        string text = tb.Text;
        // This way you can find and fetch the properties of controls inside a `GridView`. Just that it should be within `ItemTemplate`.
    }
} 
```

注意：`DataKeyNames="ID"`在你的`GridView`. “ID”是表的主键列。

您是否绑定了`GridView`页面加载？如果是这样，则将其移动到`!IsPostBack`块，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        GridView1.DataSource = yourDataSource;
        GridView1.DataBind();           
    } 
} 
```

# c++ - 是否可以在 OpenCL 中并行运行总和计算？

> ID：15200159
> 
> 赞同：6
> 
> 时间：2013-03-04T11:09:50.977
> 
> 标签：c++, c, parallel-processing, opencl

我是 OpenCL 的新手。但是，我了解 C/C++ 基础知识和 OOP。我的问题如下：是否可以并行运行求和计算任务？理论上可行吗？下面我将描述我尝试做的事情：

例如，任务是：

```
double* values = new double[1000]; //let's pretend it has some random values inside
double sum = 0.0;

for(int i = 0; i < 1000; i++) {
    sum += values[i];
} 
```

我在 OpenCL 内核中尝试做的事情（我觉得这是错误的，因为它可能同时从不同的线程/任务访问相同的“sum”变量）：

```
__kernel void calculate2dim(__global float* vectors1dim,
                            __global float output,
                            const unsigned int count) {
    int i = get_global_id(0);
    output += vectors1dim[i];
} 
```

这段代码是错误的。如果有人回答我是否理论上可以并行运行这些任务，如果可以的话，我将非常感激 - 如何！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:15:07.813

如果您想以并行方式对数组的值求和，则应确保*减少争用*并确保线程之间没有数据依赖关系。

数据依赖性将导致线程必须相互等待，从而产生争用，这是您想要避免的以获得真正的并行化。

您可以这样做的一种方法是将您的数组拆分为 N 个数组，每个数组都包含原始数组的一些子部分，然后使用每个不同的数组调用您的 OpenCL 内核函数。

最后，当所有内核都完成了艰苦的工作时，您可以将每个数组的结果汇总为一个。这个操作可以很容易地由 CPU 完成。

关键是在每个内核中完成的计算之间没有任何依赖关系，因此您必须拆分数据并相应地进行处理。

我不知道您的数据是否与您的问题有任何实际依赖关系，但这是您自己弄清楚的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T16:16:50.110

我提供的供参考的代码应该可以完成这项工作。

例如，您有**N**个元素，并且您的工作组的大小是**WS = 64**。我假设**N**是**2*WS**的倍数（这很重要，一个工作组计算 2*WS 元素的总和）。然后你需要运行内核指定：

```
globalSizeX = 2*WS*(N/(2*WS)); 
```

结果**sum**数组将具有**2*WS**元素的部分和。（例如**sum[1]** - 将包含索引从**2*WS**到**4*WS-1**的元素的总和）。

如果您的 globalSizeX 为**2*WS**或更少（这意味着您只有一个工作组），那么您就完成了。只需使用**sum[0]**作为结果。如果不是 - 您需要重复过程，这次使用**sum**数组作为输入数组并输出到其他数组（创建 2 个数组并在它们之间进行乒乓球）。依此类推，直到您只有一个工作组。

还可以搜索 Hilli Steele / Blelloch 并行算法。 [这篇](http://cva.stanford.edu/classes/cs99s/papers/hillis-steele-data-parallel-algorithms.pdf)文章也可能有用

这是实际示例：

```
__kernel void par_sum(__global unsigned int* input, __global unsigned int* sum)
{
    int li = get_local_id(0);
    int groupId = get_group_id(0);

    __local int our_h[2 * get_group_size(0)];
    our_h[2*li + 0] = hist[2*get_group_size(0)*blockId + 2*li + 0];
    our_h[2*li + 1] = hist[2*get_group_size(0)*blockId + 2*li + 1];

    // sweep up
    int width = 2;
    int num_el = 2*get_group_size(0)/width;
    int wby2 = width>>1;

    for(int i = 2*BLK_SIZ>>1; i>0; i>>=1)
    {

        barrier(CLK_LOCL_MEM_FENCE);

        if(li < num_el)
        {
            int idx = width*(li+1) - 1;
            our_h[idx] = our_h[idx] + our_h[(idx - wby2)];
        }

        width<<=1;
        wby2 = width>>1;
        num_el>>=1;
    }

        barrier(CLK_LOCL_MEM_FENCE);

    // down-sweep
    if(0 == li)
        sum[groupId] = our_h[2*get_group_size(0)-1]; // save sum
} 
```

# php - 如果多维数组中的值未设置整个包含的数组

> ID：15200160
> 
> 赞同：2
> 
> 时间：2013-03-04T11:09:51.537
> 
> 标签：php, search, multidimensional-array, unset, array-multisort

我有一个将项目添加到数据库的脚本。

目前我有一个这样创建的数组：

```
foreach(blah as $album){

$add[] = array('album' => $album['name'],
               'test' => $album['test']
            );

} // end foreach 
```

专辑名称并不总是唯一的，`$album['test']`可以是随机文本（稍后使用），也可以是“FALSE”（当我说假时，我的意思是“假”这个词，用文本字母拼写）

我需要一个函数来以某种方式搜索数组，并比较名称和测试值......每个专辑名称可能有几个条目，有几个不同的随机文本值，一个说 FALSE。如果有一个数组条目的测试值设置为 FALSE，那么它将删除所有其他包含的具有相同专辑名称的数组...

所以这：

```
array(array('album' => 'album_name1', 'test' => 'xqus8n4n'),
      array('album' => 'album_name1', 'test' => 'FALSE'),
      array('album' => 'album_name1', 'test' => 'jdh4dhdk'),
      array('album' => 'album_name2', 'test' => 'hdis8ebk'),
      array('album' => 'album_name2', 'test' => 'hisb8bs7'),
      array('album' => 'album_name2', 'test' => 'FALSE'),
      array('album' => 'album_name3', 'test' => 'yek98abk'),
      array('album' => 'album_name3', 'test' => '8iksh2q7')
     ); 
```

变成这样：

```
array(array('album' => 'album_name1', 'test' => 'FALSE'),
      array('album' => 'album_name2', 'test' => 'FALSE'),
      array('album' => 'album_name3', 'test' => 'yek98abk'),
      array('album' => 'album_name3', 'test' => '8iksh2q7')
     ); 
```

我希望这是有道理的，因为除非你知道我的整个脚本结构，否则它看起来有点令人困惑，这就是我提供这么多信息的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:30:46.710

```
$multiarray = array(
      array('album' => 'album_name1', 'test' => 'xqus8n4n'),
      array('album' => 'album_name1', 'test' => 'FALSE'),
      array('album' => 'album_name1', 'test' => 'jdh4dhdk'),
      array('album' => 'album_name2', 'test' => 'hdis8ebk'),
      array('album' => 'album_name2', 'test' => 'hisb8bs7'),
      array('album' => 'album_name2', 'test' => 'FALSE'),
      array('album' => 'album_name3', 'test' => 'yek98abk'),
      array('album' => 'album_name3', 'test' => '8iksh2q7')
     );

$keysToRemove = array( );

// Go and find all the FALSE values and which albums they belong to
foreach ( $multiarray as $album ) {
  if ( in_array( 'FALSE', $album ) ) {
    $keysToRemove[] = $album['album'];
  }
}

// Remove all instances of the albums that had FALSE values
// except the ones that had the word FALSE (we keep those :p )
for( $i = 0; $i < count($multiarray); $i++ ) {
    if ( ( in_array( $multiarray[$i]['album'], $keysToRemove ) ) && ( $multiarray[$i]['test'] != 'FALSE' ) ){
        unset( $multiarray[$i] );
    }
}

// reset keys so that they are numerical again.
$multiarray = array_values(array_filter($multiarray)); 

print_r( $multiarray ); 
```

给出以下结果：

```
Array ( 
  [0] => Array ( [album] => album_name1 [test] => FALSE ) 
  [1] => Array ( [album] => album_name2 [test] => FALSE ) 
  [2] => Array ( [album] => album_name3 [test] => yek98abk ) 
  [3] => Array ( [album] => album_name3 [test] => 8iksh2q7 ) 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:22:12.850

使用 php 函数 array_key_exists()

```
foreach($album as $alb){

 if (array_key_exists('FALSE', $alb)) {

  // Remove other array keys or save into new array
 }

} // end foreach 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:25:48.617

这给出了你想要的输出

```
 function array_searches($item,$key,$keys,$value){
    if($key[$keys]==$value){
    return true;
    }
    return false;
    }
    $array= array(
          array('album' => 'album_name1', 'test' => 'xqus8n4n'),
          array('album' => 'album_name1', 'test' => 'FALSE'),
          array('album' => 'album_name1', 'test' => 'jdh4dhdk'),
          array('album' => 'album_name2', 'test' => 'hdis8ebk'),
          array('album' => 'album_name2', 'test' => 'hisb8bs7'),
          array('album' => 'album_name2', 'test' => 'FALSE'),
          array('album' => 'album_name3', 'test' => 'FALdsfSE'),
        array('album' => 'album_name3', 'test' => 'FALsdfSE'),
    );

    $i=0;

function custom_op($array){
$new_array=array();
foreach ($array as $key=>$value){
if(array_custom_search($key,$value,'test','FALSE')){
$new_array[]=$value;
foreach($array as $key1=>$value1){
if(array_search($key1,$value1,'album',$value['album'])){
unset($array[$key1]);//unset the array value where 'test' is false 
}
}
}
}

foreach ($new_array as $key=> $value){
$array[]=$value;
}
echo "<pre>asdf";
print_r($array);
} 
```

# ruby - 如何在 Ruby 2.0 中使用调试器？

> ID：15200165
> 
> 赞同：31
> 
> 时间：2013-03-04T11:10:10.040
> 
> 标签：ruby, debugging, ruby-2.0

我知道调试器 gem 不是也永远不会与 ruby​​ 2.0 兼容，因为“[正式支持 ruby​​ 2.X](https://github.com/cldwalker/debugger/issues/47#issuecomment-44027702) ”。

在 Ruby 2.0 的更新日志中是：

> 调试支持
> 
> DTrace 支持，可在
> 
> 生产 TracePoint，这是一个改进的跟踪 API

是否有开箱即用的东西可以用 Ruby 2.0 进行调试？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-25T22:19:58.360

可以使用调试器 gem，但它仍然存在问题。

安装为 Ruby 2.0 调试而编写的[byebug 。](https://github.com/deivid-rodriguez/byebug)

对于断点，`byebug`请在代码中使用命令而不是`debugger`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T11:06:33.740

调试器 gem 的 1.4.0 版现在可以正常安装。仍然存在一些问题，但这应该很快得到解决。

调试器 gem 不能很好地与 Ruby 2 配合使用。相反，安装与 Ruby 2 完全兼容的 Byebug gem。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T21:02:09.407

使用[撬](http://pryrepl.org)：

```
gem install pry  
gem install pry-debugger 
```

请参阅“[使用 Pry 调试 Ruby](http://knomedia.github.io/blog/2013/01/21/debugging-ruby-with-pry/) ”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-25T00:39:01.537

## debug.rb（又名 binding.break）

考虑使用名为[debug.rb](https://github.com/ruby/debug)的新 Ruby 调试工具。

它支持语法高亮和更多开箱即用的功能。

另外，值得一提的是，它是由 Ruby 核心团队开发的。

只需放置`binding.break`在您的代码库中的任何位置。

这是一个例子：

[![binding.break 示例](../Images/6c581e54a9b7ac5d415f99068c6cd1fd.png)](https://i.stack.imgur.com/xo9ZQ.jpg)

此外，它是[从版本 7 开始的默认 Rails 调试器](https://github.com/rails/rails/pull/43187)。

**笔记：**

*   不要忘记`require 'debug'`
*   `q # quit command`

**资料来源：**

*   [调试.rb](https://github.com/ruby/debug)
*   [使用 binding.break 修改源代码（类似于 binding.pry 或 binding.irb）](https://github.com/ruby/debug#modify-source-code-with-bindingbreak-similar-to-bindingpry-or-bindingirb)
*   [Rails 7 用 ruby​​/debug 替换了 byebug](https://blog.saeloun.com/2021/09/29/rails-7-ruby-debug-replaces-byebug.html)
*   [依赖 ruby​​/debug，替换 Byebug](https://github.com/rails/rails/pull/43187)

# calendar - 评估谷歌日历“快速添加”字符串而不是创建事件

> ID：15200168
> 
> 赞同：1
> 
> 时间：2013-03-04T11:10:33.780
> 
> 标签：calendar, google-calendar-api

Google 日历支持[“快速添加](http://support.google.com/calendar/bin/answer.py?hl=en&answer=36604)”字符串，例如添加“明天 15:00 在房间 2 与彼得会面”。

有谁知道在没有日历条目之前评估字符串的方法？类似于以下示例的内容：

```
REQUEST:
    action: "just_parse_don't_insert"
    text: "Lunch tomorrow 15:00 in room 2" 
RESPONSE:
    text: "Lunch"
    date: "05-03-2013"
    location: "room 2" 
```

我可以理解为什么 Google 不提供此功能，因此，或者，我正在寻找提供类似功能的服务/脚本（最好是 JS）。

# java - 将双精度值传递给二维数组

> ID：15200174
> 
> 赞同：0
> 
> 时间：2013-03-04T11:10:49.247
> 
> 标签：java, arrays, double, 2d

我正在尝试通过将特定的双精度值传递给它来在 java 中初始化我的二维数组，但我返回了一个错误“']' expected”。

```
double[][] EnglishToFrenchProb = new double[2][3];
    double[0][0] = 0.0; //unused
    double[0][1] = 0.08;
    double[0][2] = 0.06;

    double[1][0] = 0; //unused
    double[1][1] = 0.08;
    double[1][2] = 0.06; 
```

我做错了什么，我意识到有一种更简单的方法可以将值传递到二维数组中，但这是我能想到的唯一方法，我可以通过它们自己的值轻松索引它们（我需要这样做）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:14:19.187

要设置一些值，您必须使用变量的名称：

```
EnglishToFrenchProb[0][0] = 0.00; 
```

您还可以使用以下语法：

```
double[][] EnglishToFrenchProb = {{0.00, 0.08, 0.06}, {0.00, 0.08, 0.06}}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:12:38.980

您需要引用变量名：

```
double[][] EnglishToFrenchProb = new double[2][3];
EnglishToFrenchProb[0][0] = 0.0; //and so forth 
```

# android - 为推送通知注册的客户端安卓设备

> ID：15200175
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:10:50.807
> 
> 标签：android, push-notification

如何在没有连接到机器的情况下注册客户端的 android 设备以进行推送通知。

我知道如何在将设备连接到机器时注册设备以进行推送通知。

但是我们如何在不与机器物理连接的情况下通过 GCM 为客户端生成设备注册 ID

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:23:14.673

> 如何在没有连接到机器的情况下注册客户端的 android 设备以进行推送通知。

您必须注册您的注册。为您的应用启用 GCM 推送通知服务的设备 ID。要注册它，您必须从您的设备调用 WS 才能将其注册到您的服务器。

> 但是我们如何在不与机器物理连接的情况下通过 GCM 为客户端生成设备注册 ID

AFAIK 这是不可能的。由于您的注册 ID 将在各种场景（手机重启等）中发生更改，因此您必须将您的注册 ID 更新到您的服务器。为此，您需要将手机连接到服务器。

# regex - 每 2 个字节插入分号

> ID：15200176
> 
> 赞同：0
> 
> 时间：2013-03-04T11:10:51.210
> 
> 标签：regex, bash, sed, awk

我有如下输出：

```
FA-7E 0 500009730007C118
FA-8E 0 500009730007C11C
FA-7F 0 500009730007C158
FA-10F 0 500009730007C164 
```

我想把它翻译成：

```
FA-7E 0 50:00:09:73:00:07:C1:18
FA-8E 0 50:00:09:73:00:07:C1:1C
FA-7F 0 50:00:09:73:00:07:C1:58
FA-10F 0 50:00:09:73:00:07:C1:64 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:15:37.093

```
$ awk '{gsub(/../,"&:",$NF);sub(/:$/,"")}1' file
FA-7E 0 50:00:09:73:00:07:C1:18
FA-8E 0 50:00:09:73:00:07:C1:1C
FA-7F 0 50:00:09:73:00:07:C1:58 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:19:25.787

sed解决方案：

```
sed -e 's/\([0-9A-F]\{2\}\)/\1:/g' -e 's/:\([- ]\|$\)/\1/g' 
```

第一个替换添加 : 在每对十六进制数字之后，第二个替换从第一列和行尾删除多余的冒号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:53:22.510

perl 变体：

```
perl -pe 's/\w\w(?=\w+$)/$&:/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:36:53.517

不是最好的，但有效：

```
perl -lane 'push @a,$F[2]=~/../g;$F[2]=join ":",@a;undef @a;print "@F"' your_file 
```

# java - 如何在java中制作和更新方法？

> ID：15200178
> 
> 赞同：1
> 
> 时间：2013-03-04T11:11:08.147
> 
> 标签：java

我需要能够在这部分代码中非常简单地更新数量：

```
import java.util.HashMap;
import java.util.Map;

public class StockData {

private static class Item {
    Item(String n, double p, int q) {
        name = n;
        price = p;
        quantity = q;
    }

    // get methods
    public String getName() { return name; }
    public double getPrice() { return price; }
    public int getQuantity() { return quantity; }

    // instance variables 
    private String name;
    private double price;
    private int quantity;
}

// with a Map you use put to insert a key, value pair 
// and get(key) to retrieve the value associated with a key
// You don't need to understand how this works!
private static Map<String, Item> stock = new HashMap<String, Item>();

static {
    // if you want to have extra stock items, put them in here
    // use the same style - keys should be Strings
    stock.put("00", new Item("Bath towel", 5.50, 10));
    stock.put("11", new Item("Plebney light", 20.00, 5));
    stock.put("22", new Item("Gorilla suit", 30.00, 7));
    stock.put("33", new Item("Whizz games console", 50.00, 8));
    stock.put("44", new Item("Oven", 200.00, 4));
}

public static String getName(String key) {
    Item item = stock.get(key);
    if (item == null) return null; // null means no such item
    else return item.getName();
}

public static double getPrice(String key) {
    Item item = stock.get(key);
    if (item == null) return -1.0; // negative price means no such item
    else return item.getPrice();
}

public static int getQuantity(String key) {
    Item item = stock.get(key);
    if (item == null) return -1; // negative quantity means no such item
    else return item.getQuantity();
}

// update stock levels
// extra is +ve if adding stock
// extra is -ve if selling stock
public static void update(String key, int extra) {
    Item item = stock.get(key);
    if (item != null) item.quantity += extra;
}

} 
```

我已经为更新页面构建了 GUI，只需要添加方法吗？

对不起这个琐碎的问题，但你必须从某个地方开始。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:18:36.227

我不知道我是否真的遇到了您的问题，但这是我增加您商品数量的建议。

只需添加一个这样的公共方法：

```
public void addQuantity(int q) { quantity += q } 
```

我希望你是这个意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:14:51.167

添加这个方法：

> 公共无效 setQuantity(int q) { 数量 = q }

您可能想从[http://docs.oracle.com/javase/tutorial/开始阅读](http://docs.oracle.com/javase/tutorial/)

# import - 在 DB2 中使用 IMPORT 而不是 LOAD

> ID：15200180
> 
> 赞同：1
> 
> 时间：2013-03-04T11:11:12.537
> 
> 标签：import, load, db2

我想准备一个加载实用程序来将数据加载到 DB2 表中。该表具有包含 GENERATEDALWAYS 功能集的列。

因此，我无法从表中加载未加载的详细信息。

是否可以对设置了 GENERATEDALWAYS 列的表使用导入？

我做的步骤：

```
1\. db2 "export to tbl.txt of del modified by coldel| select * from <schema.table> where col=value"
2\. db2 "delete from <schema.table> where col=value"
3\. db2 "import from tbl.txt of del modified by coldel| allow write access warningcount1 insert into <schema.table>" 
```

具有“GENERATEDALWAYS”的列在导入后具有新值。是否可以使用导入来填充 GENERATEDALWAYS 列以获得旧值？

感谢您的帮助。

谢谢， 马修 Liju

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:57:51.123

也许您可以从列中删除“生成”并在再次使用适当的值导入后添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:49:08.800

你问的是不可能的。`IMPORT`您不能覆盖具有`GENERATED ALWAYS`. 正如@Peter Miehle 建议的那样，您可以更改表格以指定该列是`GENERATED BY DEFAULT`，但这可能会破坏其他应用程序。

您的问题标题暗示您不想使用该`LOAD`实用程序（但您在实际问题中没有提及任何有关它的内容）。但是，`LOAD`将数据写入表并维护文件中存在的生成列的值的唯一方法是：

```
db2 "load from tbl.txt of del modified by generatedoverride insert into schema.table" 
```

如果您这样做，请注意：

*   DB2 不检查是否与表中的现有行发生冲突。您需要在相关列上定义唯一索引来解决此问题；这将导致 DB2 删除您刚刚在加载`DELETE`阶段加载的行。

*   如果您生成的列正在使用`IDENTITY`，请确保更改该列以确保将来生成的值不会与您刚刚插入表中的行发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:58:35.190

@Ian Bjorhovde 为您提供了选择。

IMPORT 实际上在后台执行 INSERT - 即，它首先准备一个带有参数标记的 INSERT 语句，并将输入文件中的值用于这些标记。

在您的 SQL 快照中，您将看到使用的 INSERT 语句。

在 INSERT 语句中不可能的任何事情都不能使用 IMPORT （有点 .. ）

# powershell - 在任务调度程序 windows 2008 服务器中调度 powershell 脚本的问题

> ID：15200183
> 
> 赞同：2
> 
> 时间：2013-03-04T11:11:19.777
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-1.0

我正在尝试在任务计划程序上运行 powershell 脚本，但无法理解适合我的脚本的日志记录命令。我想让它按计划运行。

该脚本将删除早于 x 天的文件和文件夹，并创建一个输出日志。

```
function Out-Log {
    param (
    [Parameter(Mandatory=$true,ValueFromPipeline=$true)]
    [string]$message,
    [switch]$Error
    )
    $logPath = $env:TEMP + "\Filedeletion.log"
    $message | Out-File -FilePath $logPath -Append
    }
trap 
{
    "error:" | Out-Log 
    $_.exception.message | Out-Log
    break
}
$Error.Clear()
try 
{
    "Starting" | Out-Log
    $DateToDelete = 1
    $dateLimit = (Get-Date).AddDays(-$DateToDelete)
    $StartFolder = "c:\TEST1"
    Get-ChildItem -Recurse -Force -Path $StartFolder | 
        foreach { 
            $currentItemIsFolder = $_.PsIsContainer;
            $curentItemIsOld = $_.LastWriteTime -lt $dateLimit
            if ($curentItemIsOld -and (-not $currentItemIsFolder))
            {
                "Removing '$($_.fullname)'." | Out-Log

                 Remove-Item -Path ($_.fullname) -Force -WhatIf

            }
        }

}
finally 
{
    if ($Error)
    {
        "`$error stack:" | Out-Log
          $error | foreach {$_.exception.ToString() |  Out-Log}
    }
    "Stopping" | Out-Log
} 
```

我试图使用

`Powershell -file "c:\Powershell\Filedeletion_logs_test.ps1"`

通过批处理运行powershell。

我试图检查 Powershell/? 中的命令 但没有找到适用于我的脚本的任何合适的日志记录命令。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:20:37.470

您不需要在任务计划中运行 powershell 的单独批处理文件。您所需要的只是这个不错的教程。它是一步一步详细的，但很容易设置。 [http://community.spiceworks.com/how_to/show/17736-run-powershell-scripts-from-task-scheduler](http://community.spiceworks.com/how_to/show/17736-run-powershell-scripts-from-task-scheduler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T22:48:36.333

你不能用SCHTASKS做同样的事情吗？

[http://ss64.com/nt/schtasks.html](http://ss64.com/nt/schtasks.html)

您应该能够通过 TYPE 命令传送服务器列表并将任务添加到服务器集。

例如：

[http://www.robvanderwoude.com/ntadmincommands.php](http://www.robvanderwoude.com/ntadmincommands.php)

```
FOR /F %%A IN (servers.txt) DO (
SCHTASKS /CREATE /S %%A /U "system" /P "" /TN "Powershell Task" /TR "Powershell -file \"c:\my folder\script.ps1\"" 
) 
```

# node.js - 为什么尝试使用 nmp 安装 socket.io 时出现错误

> ID：15200184
> 
> 赞同：5
> 
> 时间：2013-03-04T11:11:19.947
> 
> 标签：node.js, npm

为什么在尝试安装 socket.io 时出现此错误。我正在使用最新版本的 NodeJS 并设置了路径变量。我在 cmd 中使用具有管理员权限的 Windows 7。

```
> ws@0.4.25 install C:\Users\Dusan\node_modules\socket.io\node_modules\socket.io
-client\node_modules\ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

CreateProcessW: The system cannot find the file specified.
npm ERR! error rolling back Error: ENOTEMPTY, rmdir 'C:\Users\Dusan\node_modules
\socket.io\node_modules\socket.io-client\node_modules\active-x-obfuscator\node_m
odules\zeparser'
npm ERR! error rolling back  socket.io-client@0.9.11 { [Error: ENOTEMPTY, rmdir
'C:\Users\Dusan\node_modules\socket.io\node_modules\socket.io-client\node_module
s\active-x-obfuscator\node_modules\zeparser']
npm ERR! error rolling back   errno: 53,
npm ERR! error rolling back   code: 'ENOTEMPTY',
npm ERR! error rolling back   path: 'C:\\Users\\Dusan\\node_modules\\socket.io\\
node_modules\\socket.io-client\\node_modules\\active-x-obfuscator\\node_modules\
\zeparser' }
npm ERR! error rolling back Error: EPERM, rmdir 'C:\Users\Dusan\node_modules\soc
ket.io\node_modules\socket.io-client\node_modules\active-x-obfuscator\node_modul
es\zeparser\benchmark.html'
npm ERR! error rolling back  socket.io@0.9.13 { [Error: EPERM, rmdir 'C:\Users\D
usan\node_modules\socket.io\node_modules\socket.io-client\node_modules\active-x-
obfuscator\node_modules\zeparser\benchmark.html']
npm ERR! error rolling back   errno: 50,
npm ERR! error rolling back   code: 'EPERM',
npm ERR! error rolling back   path: 'C:\\Users\\Dusan\\node_modules\\socket.io\\
node_modules\\socket.io-client\\node_modules\\active-x-obfuscator\\node_modules\
\zeparser\\benchmark.html' }
npm ERR! ws@0.4.25 install: `(node-gyp rebuild 2> builderror.log) || (exit 0)`
npm ERR! `cmd "/c" "(node-gyp rebuild 2> builderror.log) || (exit 0)"` failed wi
th 127
npm ERR!
npm ERR! Failed at the ws@0.4.25 install script.
npm ERR! This is most likely a problem with the ws package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     (node-gyp rebuild 2> builderror.log) || (exit 0)
npm ERR! You can get their info via:
npm ERR!     npm owner ls ws
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program File
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd C:\Users\Dusan
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! code ELIFECYCLE
npm ERR! Error: ENOENT, lstat 'C:\Users\Dusan\node_modules\socket.io\node_module
s\socket.io-client\node_modules\active-x-obfuscator\node_modules\zeparser\benchm
ark.html'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program File
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd C:\Users\Dusan
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! path C:\Users\Dusan\node_modules\socket.io\node_modules\socket.io-clien
t\node_modules\active-x-obfuscator\node_modules\zeparser\benchmark.html
npm ERR! fstream_path C:\Users\Dusan\node_modules\socket.io\node_modules\socket.
io-client\node_modules\active-x-obfuscator\node_modules\zeparser\benchmark.html
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! fstream_stack C:\Program Files (x86)\nodejs\node_modules\npm\node_modul
es\fstream\lib\writer.js:284:26
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\Dusan\npm-debug.log
npm ERR! not ok code 0 
```

我不知道发布这个问题的其他方式。请编辑这个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T12:11:53.013

尝试添加`c:\windows\system32`到您的`PATH`. 由于您使用 cmd 作为管理员，因此目录会有所不同。

[请参阅此处](https://github.com/joyent/node/issues/4222)报告的 socket.io 问题。[SO](https://stackoverflow.com/questions/14100027/cant-install-js-bson)上 Windows 上的另一个类似问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-28T10:52:12.527

对于所有在具有共享文件夹的 VM 上苦苦挣扎的人。我没有遵循这些建议，但一段时间后我尝试将其安装到另一个不是共享文件夹的位置，并且一切正常。或者，您可以尝试将其从托管 VM 的主机安装到该文件夹​​。希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-18T20:39:02.827

我在 Mac 上遇到了类似的问题。解决我的问题的是安装稍旧版本的 Socket.io。

我做了：

```
npm install socket.io@"~0.8.1" 
```

它将安装 0.8.0 到 0.8.9 之间的最新版本，但不会安装 0.9.0 或更高版本。

```
Socket.io then installed perfectly. 
```

我也安装了

```
sudo npm install -g node-gyp 
```

但它本身并没有解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:24:08.160

我不需要安装 node-gyp，但似乎你需要。先运行这个，

```
$ npm install -g node-gyp 
```

然后再试一次。如果失败，请重新启动计算机一次以进行 PATH 传播。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-01T01:28:54.360

要使用最新版本的 socket.io ...首先确保您拥有运行所需的所有软件`node-gyp`：

*   [https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)

您可以`gyp`通过环境变量配置所使用的 Visual Studio 版本，这样您就可以避免设置`--msvs_version=2012`属性。

例子：

*   `GYP_MSVS_VERSION=2012`为 Visual Studio 2012设置
*   设置`GYP_MSVS_VERSION=2013e`（“e”代表“特快版”）

有关完整列表，请参阅 - [https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294](https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294)

这对于 NodeJS 的 Windows 用户来说仍然很痛苦，因为它假定您安装了 Python 和 Visual Studio 的副本，而许多最终用户永远不会拥有这个。因此，我正在游说 Joyent 鼓励他们将 Web 套接字作为 CORE 节点的一部分，并可能将 GNU gcc 编译器作为 NodeJS 安装的一部分，这样我们就可以永久解决这个问题。

欢迎在以下位置添加您的投票：

*   [https://github.com/joyent/node/issues/8005#issuecomment-50545326](https://github.com/joyent/node/issues/8005#issuecomment-50545326)

# javascript - 有没有办法为每个 AJAX 页面加载初始化 JS SDK？

> ID：15200186
> 
> 赞同：1
> 
> 时间：2013-03-04T11:11:35.460
> 
> 标签：javascript, jquery, ajax, facebook, facebook-javascript-sdk

与此问题类似：[FB.api only loading on first AJAX call to page](http://facebook.stackoverflow.com/questions/11184031/fb-api-only-loads-on-first-ajax-call-to-page)

由于我网站的结构，页面是通过 AJAX 加载的。一切正常，除了第二次加载带有该`window.fbAsyncInit`功能的页面时，它不起作用。控制台上没有显示任何错误，所有显示的是我的`auth-loggedout`div 内容，其中包含 facebook 登录按钮，但单击它没有响应。

我确定我已经登录，因为在上一页加载时我只是使用 api 发布到我的墙上。

有没有办法改变初始化，使其在每次页面加载时都有效？

```
// Init the SDK upon load
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '<?php echo $appID; ?>', // App ID
      channelUrl : '//domain.co.uk/myoe/channel.html', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function(response) {
        // lots of code
    }; 

  // Load the SDK Asynchronously
   (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "https://connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:16:54.243

好的，最终设法解决了它：

```
if (typeof FB !== 'undefined') {
    // your code from  window.fbAsyncInit = function() {
    // but WITHOUT FB.init({...});
} 
```

因此，如果您将通用代码放在一个函数中，则可以从两者中调用该函数，这样您就不会重复自己。

一个非常令人沮丧的问题的非常直接的答案。

# android - Paint Xfermode 在 android 2.2 上绘制黑线

> ID：15200187
> 
> 赞同：1
> 
> 时间：2013-03-04T11:11:36.297
> 
> 标签：android, android-view

我正在尝试擦除图像的某些部分，所以我正在创建一个自定义`ImageView`，所以为了擦除，我使用以下油漆进行绘制

```
 mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.TRANSPARENT);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(30);
    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

我正在设置`XferMode`清除`PorterDuff.Mode.CLEAR`在 android 4.1 上运行良好的图像，但是当我在 android 2.3 上测试它时，它会绘制一条黑线而不是背景颜色，并且我还禁用了硬件加速，

有人可以解释一下为什么这不适用于 android 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:49:42.980

我有类似的问题，我在调用 super.onDraw(canvas) 之前使用 Canvas.clipRect 修复了它。

这个问题帮助了我：[Clip round from image using xfermode in android](https://stackoverflow.com/questions/15200931/clip-round-from-image-using-xfermode-in-android)

# javascript - OnClick JS If 语句

> ID：15200188
> 
> 赞同：0
> 
> 时间：2013-03-04T11:11:38.390
> 
> 标签：javascript, html, css, if-statement

我正在寻找具有 100 个 if 语句的东西，我确信这不是最好的方法，但这是我知道如何去做的方式，我相信它会起作用。我希望用户在单击一个图像时看到两个图像，然后将他们带到另一组图像等。

我不是 100% 确定如何使用鼠标单击来做到这一点，会不会是这样的事情

```
 if($('IMAGE ID').click())
     {
        page2a.html
     }
     else
     {
        page2b.html
     } 
```

谢谢！

所以我想要一些关于如何使用图像和鼠标点击来创建 if 语句的指导。例如，我知道如何使用数学结果制作一个；

如果 (5 > 10) 等等。

但是我从来没有使用过媒体和图像，然后我如何将它们添加到我在上面发布的尝试的 if 语句中，这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:18:08.133

您可以将图像标签嵌入锚标签本身以解决此问题。

```
<a href="page2a.html"><img/><a>
<a href="page2b.html"><img/></a> 
```

如果您想使用查询使用动态加载页面，例如：编辑：您可以将 IMAGE_ID 设置为与 page2a 或 page2b 相同

```
$('img').click(function() {
   var id= $(this).attr('id');
   window.location = id+'.html';
}) 
```

# asp.net - 按钮和文本框未内联

> ID：15200192
> 
> 赞同：0
> 
> 时间：2013-03-04T11:11:50.603
> 
> 标签：asp.net, css

我有以下代码

```
 <div class="well sidebar-nav">
        <ul class="nav nav-list">
            <li class="nav-header-myLeagues">Create A New League</li>
            <li class="divider"></li>
            <li class="li-myLeagues">
                <asp:Label ID="LeagueNameLabel" runat="server">League Name:</asp:Label></li>
            <li class="li-myLeagues">
                <asp:TextBox ID="LeagueNameTextBox" runat="server"></asp:TextBox>
                <asp:Button ID="SubmitNewLeagueButton" CssClass="btn btn-primary" runat="server" CommandName="SubmitNewLeague" Text="Submit" />
            </li>
        </ul>
    </div> 
```

由于某种原因，按钮与文本框不完全一致，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:27:34.863

尝试将您的**CSS**如下所示

```
.li-myLeagues li
{
     display: inline;
      list-style-type: none;
     padding-right: 20px;
     float: left;
} 
```

这将是有用的......

看[这里是我为你做的一样的东西..](http://jsbin.com/imozon/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:30:05.933

将文本框和按钮包装进去`<div></div>`，并将 css float:left 设置为 div

```
<li class="li-myLeagues">
    <div style="float:left">
        <asp:TextBox ID="LeagueNameTextBox" runat="server"></asp:TextBox></div>
    <div style="float:left;margin-left:10px;">
            <asp:Button ID="SubmitNewLeagueButton" CssClass="btn btn-primary" runat="server" CommandName="SubmitNewLeague" Text="Submit" />
</div>        
</li> 
```

将css添加到类`.li-myLeagues`

```
.li-myLeagues
{
display:inline-block;
float:left;
} 
```

# regex - 使用分隔符提取值的正则表达式

> ID：15200194
> 
> 赞同：1
> 
> 时间：2013-03-04T11:11:57.607
> 
> 标签：regex, jmeter

我想从包含分隔符 $ 的字符串中提取值并将它们存储在三个变量中。我需要这个来传递我的 Jmeter 脚本中的变量值。

输入：

> “蓝天航空公司$630$270$12:23”

这里的分隔符是 $，所以我需要将以下值存储在单独的变量中：

> 蓝天航空, 630, 270, 12:23

所需输出：

> var1 = 蓝天航空公司，var2 = 630，var3 = 270，var4=12:23

请帮忙。我正在尝试各种组合，但它不起作用。我只需要可以在 JMETER 中使用的正则表达式，它可以执行上述操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T13:48:00.017

我们必须以下列格式设置正则表达式值

```
Blue Skies Airlines\$([0-9]+)\$([0-9]+)\$(.+) 
```

并在 Jmeter 中获取如下值

```
$1$ as 630
$2$ as 270
$3$ as 12:37 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:54:46.140

您可以使用 JSR223 PostProcessor（任何其他后处理器，如 Beanshell 也可以）。添加一个 JSR223 后处理器，选择语言为`javascript`. 将要拆分的字符串保存在变量中，并在后处理器中添加以下代码：

```
var str=vars.get("stringtosplit").toString();
var strArray = str.split("$");
vars.put("userResponse",strArray); 
```

这`stringtosplit`是包含要拆分的字符串的变量。该函数将生成的字符串数组保存在变量中`userResponse`。

# android - 如何在 Android 中从 web url 设置图像按钮资源？

> ID：15200202
> 
> 赞同：0
> 
> 时间：2013-03-04T11:12:12.990
> 
> 标签：android, imagebutton

我有一个图像按钮，想从互联网 URL 设置背景图像。我不想将背景图片保存到 SD 卡中，而是我的图像按钮的图像需要是 URL。我怎么能在Android中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:17:36.407

从未尝试过，但希望这对你有用

```
private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, saveFilename);
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

和图像视图

```
ImageView IV= (ImageView)findViewById(R.id.imageId);      
Drawable drw = ImageOperations(this,url,filename)
IV.setBackgroundDrawable(drw) 
```

获取网址

```
 public Object fetch(String address) throws MalformedURLException,IOException {

    URL url = new URL(address);
    Object content = url.getContent();
    return content;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:19:10.453

尝试这个

```
 Bitmap bitmap;
class loadImage extends AsyncTask<Void , Void, Void>{
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }
    @Override
    protected Void doInBackground(Void... params) {
        URL url = new URL(stringURL);
        URI uri = new URI(url.getProtocol(), url.getHost(),
                url.getPath(), url.getQuery(), null);
        HttpURLConnection connection = (HttpURLConnection) uri
                .toURL().openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        int len = 0;
        while ((len = input.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }
        byte[] img = byteBuffer.toByteArray();
        byteBuffer.flush();
        byteBuffer.close();
        input.close();
        bitmap = BitmapFactory.decodeByteArray(img, 0, img.length);
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        ImageButton image_btn = (ImageButton)findViewById(R.id.your_image_button_id);
        image_btn.setImageBitmap(bitmap);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:19:35.827

首先，您必须将图像下载为 Drawable： [Android Drawable Images from URL](https://stackoverflow.com/questions/3375166/android-drawable-images-from-url)

然后将其设置为背景可绘制

```
button.setBackgroundDrawable(drawable) 
```

# magento - Magento - 扩展社区模块

> ID：15200203
> 
> 赞同：0
> 
> 时间：2013-03-04T11:12:15.063
> 
> 标签：magento

我想扩展一个社区模块的 Mindstretch_BetterAddress_Model_Sales 类，它将 Mage_Sales_Model_Quote_Address 扩展为 My_Sales_Model_Quote_Address 下面是我的 xml

```
<config>
  <modules>
    <My_Sales>
      <version>0.1.0</version>
    </My_Sales>
  </modules>

  <global>
    <models>
      <betteraddress>
          <rewrite>
              <sales>My_Sales_Model_Quote_Address</sales>
          </rewrite>
      </betteraddress>
    </models>
  </global>
</config> 
```

我的模块配置：

```
<?xml version="1.0"?>
<config>
  <modules>
    <My_Sales>
      <active>true</active>
      <codePool>local</codePool>
  <depends>
   <Mage_Sales/>
   <Mindstretch_BetterAddress/>
  </depends>
    </My_Sales>
  </modules>
</config> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:33:28.687

```
 <models> 
     <sales> 
         <rewrite> 
              <quote_address>My_Sales_Model_Quote_Address</quote_address> 
         </rewrite> 
     </sales> 
 </models> 
```

因为您最初重写的是这个模型，所以该`depends`指令将使您的文件在 Mindstretch_BetterAddress 文件之前首先工作。

# dart - ObjectStore put 语法

> ID：15200208
> 
> 赞同：1
> 
> 时间：2013-03-04T11:12:38.943
> 
> 标签：dart, dart-html

我在使用 idb.ObjectStore.put 的新语法 (r18915) 时遇到问题。有人可以帮忙吗？示例如下，导致错误如下：

```
AsyncError: ‘Error:DataError: DOM IDBDatabase Exception 0’
Stack trace: #0 ObjectStore._put_2(file:///E:/b/build/slave/dartium-win-full-trunk/build/src/build/Release/obj/
global_intermediate/webkit/bindings/dart/indexed_db/ObjectStore.dart:141:3) #1
  ObjectStore.$dom_put(file:///E:/b/build/slave/dartium-win-full-trunc/build/src/build/Release/obj/
global_intermediate/webkit/bindings/dart/indexed_db/ObjectStore.dart:137:18) #2
  ObjectStore.put(file:///E:/b/build/slave/dartium-win-full-trunc/build/src/build/Release/obj/
global_intermediate/webkit/bindings/dart/indexed_db/ObjectStore.dart:9:27) 
```

我正在使用的代码正在运行，但已针对新版本进行了修改，如下所示：

```
Future fDbAddOrUpdateClient(String sKey1, ClassClientData clClientData) { 
  idb.Transaction oDbTxn         = ogDb1.transaction(sgStoreClient, 'readwrite');
  idb.ObjectStore oDbStoreClient = oDbTxn.objectStore(sgStoreClient);

  Completer completer = new Completer();
  var oDbReqPut = oDbStoreClient.put(
        {'sKey': sKey1,
         'sNameTitle'  : clClientData.sNameTitle, 
         'sNameFamily' : clClientData.sNameFamily,
         'sNameGiven1' : clClientData.sNameGiven1,
         'sNameGiven2' : clClientData.sNameGiven2
         })
         .then((val){
           completer.complete(val);
           return;
         })
         .catchError((e){
           window.alert("${e}");
           return;
         });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:59:03.343

谢谢您的帮助。主要问题似乎是数据库未打开或未创建对象存储等相关内容，但未显示错误。

希望以下是更好的代码（r19425）：

```
 Future future = fDbAddOrUpdateClient(sKey, clClientData)
   .catchError((oError) => window.alert("${oError}"));
}

Future fDbAddOrUpdateClient(String sKey1, ClassClientData clClientData) { 
  idb.Transaction oDbTxn         = ogDb1.transaction(sgStoreClient, 'readwrite');
  idb.ObjectStore oDbStoreClient = oDbTxn.objectStore(sgStoreClient);

  return oDbStoreClient.put(fMapClient(sKey1, clClientData));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:49:33.273

除了您指定函数返回但从不返回的未来之外，只有一个完整的值（如其他评论中所述），未来的语法看起来是正确的。错误本身实际上表明传递给您的 objectstore.put 命令的数据是无效的。

请参阅[IndexedDB 异常](http://www.w3.org/TR/IndexedDB/#exceptions)。您可能需要验证正在传递到地图的数据。

# android - 如何在android中以椭圆形或面罩形状裁剪图像？

> ID：15200214
> 
> 赞同：3
> 
> 时间：2013-03-04T11:12:59.340
> 
> 标签：android, camera

我正在做相机应用程序。我有捕捉和裁剪方形图像。但我需要椭圆形或人脸形。它是怎么来的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-17T07:00:24.707

我使用了以下方法并将捕获的位图图像传递给此方法。它会起作用。

```
public Bitmap getRoundedShape(Bitmap scaleBitmapImage) {
        int targetWidth = 125;
        int targetHeight = 125;

        Bitmap targetBitmap = Bitmap.createBitmap(targetWidth,
                targetHeight, Bitmap.Config.ARGB_8888);

        Canvas canvas = new Canvas(targetBitmap);
        Path path = new Path();
        path.addCircle(
                ((float) targetWidth - 1) / 2,
                ((float) targetHeight - 1) / 2,
                (Math.min(((float) targetWidth), ((float) targetHeight)) / 2),
                Path.Direction.CCW);

        canvas.clipPath(path);
        Bitmap sourceBitmap = scaleBitmapImage;
        canvas.drawBitmap(
                sourceBitmap,
                new Rect(0, 0, sourceBitmap.getWidth(), sourceBitmap
                        .getHeight()), new Rect(0, 0, targetWidth,
                        targetHeight), p);
        return targetBitmap;
    } 
```

输出如下： - ![图片](../Images/3dd79e3cee549382cb7d528e991be48c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T11:23:17.637

我在我的一个项目中使用了以下内容。可能这对你有帮助。

```
public  Drawable getRoundedCornerImage(Drawable bitmapDrawable) {
        Bitmap bitmap = ((BitmapDrawable)bitmapDrawable).getBitmap();
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
                bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = 10;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);
        Drawable image = new BitmapDrawable(output);
        return image;

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T11:22:43.533

探索[com.android.camera.CropImage.java 来源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/1.5_r4/com/android/camera/CropImage.java)。它可以裁剪圆形图像。

```
 // if we're circle cropping we'll want alpha which is the third param here
    464    mCroppedImage = Bitmap.createBitmap(width, height,
    465                    mCircleCrop ?
    466                            Bitmap.Config.ARGB_8888 :
    467                            Bitmap.Config.RGB_565);
    468    Canvas c1 = new Canvas(mCroppedImage);
    469    c1.drawBitmap(mBitmap, r, new Rect(0, 0, width, height), null);
    470
    471    if (mCircleCrop) {
    472        // OK, so what's all this about?
    473        // Bitmaps are inherently rectangular but we want to return something
    474        // that's basically a circle.  So we fill in the area around the circle
    475        // with alpha.  Note the all important PortDuff.Mode.CLEAR.
    476        Canvas c = new Canvas (mCroppedImage);
    477        android.graphics.Path p = new android.graphics.Path();
    478        p.addCircle(width/2F, height/2F, width/2F, android.graphics.Path.Direction.CW);
    479        c.clipPath(p, Region.Op.DIFFERENCE);
    480
    481        fillCanvas(width, height, c);
    482    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-27T07:25:48.677

@vokilam 你是对的；我刚刚探索了代码并找到了一种解决方法......

只需将此行包含在主要活动中
`intent.putExtra(CropImage.CIRCLE_CROP, "circleCrop");`

但是你只会得到圆形，而不是椭圆形；所以@amarnathreddy 你不能用这个剪出完美的人脸；而是选择[OpenCv 的 Grabcut](https://stackoverflow.com/questions/19173187/how-do-you-cut-a-face-out-of-an-image)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T11:17:42.260

尝试用这个...裁剪人脸形状

```
Uri ImageCaptureUri = Uri.fromFile(new File("filepath"); 
Intent intent = new Intent("com.android.camera.action.CROP"); 
intent.setType("image/*"); 
intent.setData(ImageCaptureUri); 
intent.putExtra("outputX", 200); 
intent.putExtra("outputY", 200); 
intent.putExtra("aspectX", 1); 
intent.putExtra("aspectY", 1); 
intent.putExtra("scale", true); 
intent.putExtra("return-data", true); 
startActivityForResult(intent, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-01T10:34:10.790

对于椭圆形，请尝试此 android 功能或**[在此处下载演示](http://whats-online.info/science-and-tutorials/102/Android-tutorial-how-to-draw-an-oval-drawable-on-canvas-programmatically/)**

[![在此处输入图像描述](../Images/d08c4e655ee3280b135d33e1642047b9.png)](https://i.stack.imgur.com/oFzS0.jpg)

```
public static Bitmap getOvalCroppedBitmap(Bitmap bitmap, int radius) {
        Bitmap finalBitmap;
        if (bitmap.getWidth() != radius || bitmap.getHeight() != radius)
            finalBitmap = Bitmap.createScaledBitmap(bitmap, radius, radius,
                    false);
        else
            finalBitmap = bitmap;
        Bitmap output = Bitmap.createBitmap(finalBitmap.getWidth(),
                finalBitmap.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, finalBitmap.getWidth(),
                finalBitmap.getHeight());

        paint.setAntiAlias(true);
        paint.setFilterBitmap(true);
        paint.setDither(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(Color.parseColor("#BAB399"));
        RectF oval = new RectF(0, 0, 130, 150);
        canvas.drawOval(oval, paint);
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(finalBitmap, rect, oval, paint);

        return output;
    } 
```

上面的函数以编程方式在 android 中创建了一个统一的椭圆形。调用您的函数 onCreate 函数并传递图像以将椭圆形裁剪为位图图像

**[阅读更多](http://whats-online.info/science-and-tutorials/102/Android-tutorial-how-to-draw-an-oval-drawable-on-canvas-programmatically/)**

# c# - 如何根据 MVC 网站的子域更改 EF 连接字符串？

> ID：15200220
> 
> 赞同：8
> 
> 时间：2013-03-04T11:13:13.730
> 
> 标签：c#, asp.net-mvc, entity-framework, iis-7, sql-server-2012

我有一个在 IIS7 下运行的 EF5 ASP.NET MVC 3 (Razor) 网站。现在我希望能够根据 URL 的子域更改 MSSQL 数据库的连接字符串，例如`foo.mydomain.com`应该连接到我的“Foo”数据库，并`bar.mydomain.com`应该连接到“Bar”数据库。

显然，DNS 记录的设置是为了让它们都指向同一个网站。

实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:30:00.333

你为什么不开始把你自己的`SqlConnection`传给你的`YourDbContext`？

```
var partialConString = ConfigurationManager.ConnectionStrings["DBConnectionStringName"].ConnectionString;
var connection = new SqlConnection("Initial Catalog=" + Request.Url.Host + ";" + partialConString);
var context = new MyDbContext(connection, true); 
```

您还可以在 DBContext 中更改数据库：

```
context.Database.Connection.ChangeDatabase("newDbname"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:35:49.673

这不是很容易...您应该更改对象上下文的构造函数以动态更改连接字符串。使用 . 获取子域名`System.Web.HttpContext.Current.Request.Url.Host`。然后用它来计算正确的连接字符串。

您应该在设计器生成的代码中执行此操作。当然，这不是一个好地方.. 使用 T4 模板使其工作。打开您的模型并右键单击空白设计器表面，然后选择“添加代码生成项”-> Ado.net 实体对象生成。这将创建一个 .tt 文件。打开它并查找构造函数语法。在那里添加你的逻辑。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:59:22.863

我提出了我认为比迄今为止提出的所有解决方案更好的解决方案。我正在使用 default `EntityModelCodeGenerator`，所以也许还有其他更好的其他模板解决方案 - 但这对我有用：

1.  创建部分类的另一半`MyEntities`。
2.  Override `OnContextCreated()`，从类构造函数中调用。
3.  使用正则表达式更改存储连接字符串。

结果如下：

```
partial void OnContextCreated()
{
  // change connection string, depending on subdomain
  if (HttpContext.Current == null) return;
  var host = HttpContext.Current.Request.Url.Host;
  var subdomain = host.Split('.')[0];
  switch (subdomain)
  {
    case "foo":
      ChangeDB("Foo");
      break;
    case "bar":
      ChangeDB("Bar");
      break;
  }
}

private void ChangeDB(string dbName)
{
  var ec = Connection as EntityConnection;
  if (ec == null) return;
  var match = Regex.Match(ec.StoreConnection.ConnectionString, @"Initial Catalog\s*=.*?;", RegexOptions.IgnoreCase);
  if (!match.Success) return;
  var newDbString = "initial catalog={0};".Fmt(dbName);
  ec.StoreConnection.ConnectionString = ec.StoreConnection.ConnectionString.Replace(match.Value, newDbString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:18:23.737

在 web.config 中使用不同的连接字符串。如果您可以进行有条件的 XSL 转换，可能会进行一些研究，这样，当您在特定配置上发布时，web.Release.config 会将您的 Web.Config 更改为您需要的样子。

或者，使用`|DataDirectory|`字符串替换 - [http://msdn.microsoft.com/en-us/library/cc716756.aspx](http://msdn.microsoft.com/en-us/library/cc716756.aspx)

更多关于 DataDirectory 字符串替换的信息： [http ://forums.asp.net/t/1835930.aspx/1?Problem+With+Database+Connection](http://forums.asp.net/t/1835930.aspx/1?Problem+With+Database+Connection)

我想，如果您想按书行事，请为每个单独的版本创建构建配置，并将连接字符串放在相应的 web..config 中，当您发布时，XSL 转换会将连接字符串放在生成的 web 中.config 和瞧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T11:18:30.340

我最近通过添加一些自定义配置做了类似的事情，它使用主机头来确定必须使用的连接字符串名称。

EF5 有一个构造函数，可以处理这个名字

```
var context = new MyDbContex("name=<DBConnectionStringName>"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-06T16:13:47.650

我只是为一个项目做的

```
public partial class admpDBcontext : DbContext
{

    public static string name
    {
        get
        {
            if (System.Web.HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority).ToString() == "http://fcoutl.vogmtl.com")
            {
               return "name=admpDBcontext";
            }
            else { return "name=admpNyDBcontext"; }
        }

    }

    public admpDBcontext()
        : base(name)
    {

    }
} 
```

在 web.config 中，我添加了 connectionString。

# c# - 如何将 Excel 工作表中的单选按钮值读取到对象数组

> ID：15200221
> 
> 赞同：3
> 
> 时间：2013-03-04T11:13:16.477
> 
> 标签：c#, excel-2010

我必须从 Excel 表中读取数据并将其上传到数据库。除了单选按钮字段外，一切正常。在一些 excel 表中，我有单选按钮。如果单击值为 yes 的单选按钮，我想读取对象数组的 yes 。

这是将 excel 值读取到对象数组的代码：

```
Range Rrow = ws.UsedRange.Cells.Rows;
object[,] myvalues = null;            
myvalues = (Rrow.Cells.Rows.Value); 
```

其中 ws 是工作表的名称。

我在单选按钮的位置得到了空值。

我已使用以下代码将值映射到数据库中

```
 objInv.FIName = dtExcel.Tables[1].Rows[39][0].ToString(); 
```

请帮助我从 excel 表中的单选按钮读取值到对象数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T17:59:01.883

由于我还没有 50 个代表并且不能要求澄清，我希望这会对你有所帮助。

首先，如果您正在使用表单控件，请将单选按钮链接到单元格并读取单元格值（单元格值将是 0 表示没有选择链接到它的单选按钮，1 表示第一个，2 表示第二个，等等。 ）。然后就是浏览链接单元格列表的问题。

其次，如果您使用 ActiveX 控件，则每个 ActiveX 控件都有唯一的名称。要查看 ActiveX 控件的属性，请右键单击相关控件并选择“属性”选项。要检查是否选择了 ActiveX 单选按钮控件，请参阅 Sheet1.OptionButton1.Value 其中 Sheet1 是具有控件的工作表，而 OptionButton1 是控件的名称。值为 False（未选中）或 True（选中）。

根据您需要读取的单选按钮的数量和单选按钮的类型（表单与 ActiveX）将确定将值移动到数据库中的最佳方式。

# php - 使用 PHP 会话安全注销

> ID：15200222
> 
> 赞同：0
> 
> 时间：2013-03-04T11:13:17.540
> 
> 标签：php, security, session

我有一个基于 PHP 会话的登录系统。当用户单击注销链接时，脚本调用`session_destroy()`函数并且用户注销（服务器上带有用户数据的会话文件被删除）。当用户刚刚关闭浏览器时，他也会注销（cookie 在关闭时过期），但包含用户数据的会话文件仍保留在服务器上。

那么从安全的角度来看有没有漏洞呢？如果是这样，我必须做些什么来防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:45:49.307

我认为您可以使用[session.gc 属性](http://ca.php.net/manual/en/session.configuration.php#ini.session.gc-probability)来删除旧的会话文件。

# iphone - 如何在电话中处理 UI 对齐？

> ID：15200223
> 
> 赞同：1
> 
> 时间：2013-03-04T11:13:20.593
> 
> 标签：iphone, ios5, user-interface, storyboard, alignment

我正在为 iOS 5 或更高版本开发 iPhone 应用程序，并利用故事板进行 UI 设计。我的问题是，当我打电话时，我的 UI 会错位，因为我的上状态栏占用了 20 到 30 像素的屏幕空间。

[![在此处输入图像描述](../Images/bbca899ffb559456c469a3c58b52b563.png)](https://i.stack.imgur.com/kVx0O.jpg)

> 打电话时如何处理我的用户界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:34:17.550

我终于得到了我的问题的答案。以下是我在项目中所做的更改，一切都开始正常工作。

1.  对我的 UI 中需要的所有东西进行切片图像。（最初我是用普通图像来节省切片时间）
2.  使您具有 autoResizingMask 属性。它帮助我节省了很多时间。只需确保顶部、左侧和右侧只有 3 个箭头处于 ON 状态，您的工作就结束了。

为了使每个人的搜索变得容易，我将添加以下 Stackoverflow 链接以节省您的时间

3.  [如何在通话期间将视图定位在绿条下方？](https://stackoverflow.com/questions/3303997/how-to-position-view-below-green-bar-during-phone-call)

4.  [调整通话状态栏的大小？](https://stackoverflow.com/questions/1114557/resize-for-in-call-status-bar)

5.  [如何检测双高状态栏？](https://stackoverflow.com/questions/3420410/how-do-i-detect-a-double-height-status-bar)

6.  [如何在“基于视图的应用程序”中删除状态栏 - iOS](https://stackoverflow.com/questions/6485703/how-to-remove-status-bar-in-view-based-application-ios)

7.  [如何在 Iphone 应用程序中隐藏状态栏](https://stackoverflow.com/questions/4264072/how-to-hide-status-bar-in-iphone-application)

8.  [通话状态栏如何影响 UIViewController 的视图大小？（以及如何正确处理）](https://stackoverflow.com/questions/5486491/how-in-call-status-bar-impacts-uiviewcontrollers-view-size-and-how-to-handle)

9.  [iPhone 在通话状态栏中编程](https://stackoverflow.com/questions/4987605/iphone-programming-in-call-status-bar)

10.  [显示/隐藏 iPhone 状态栏后调整内容大小](https://stackoverflow.com/questions/8067551/resize-content-after-iphone-status-bar-is-shown-hidden)

11.  [如何以编程方式获取 iOS 状态栏高度](https://stackoverflow.com/questions/12991935/how-to-programmatically-get-ios-status-bar-height)

12.  [通话状态栏对我的 CGAffineTransform 视图有何影响？](https://stackoverflow.com/questions/14864845/how-is-the-in-call-status-bar-impacting-my-cgaffinetransformd-view)

13.  [通话状态栏更改时查看调整大小](https://stackoverflow.com/questions/14144642/view-resize-when-in-call-status-bar-changes)

感谢所有回答上述所有问题的人。解决了我的大问题。

# java - SWT x64 与 xulrunner 3.6.28 x86

> ID：15200224
> 
> 赞同：6
> 
> 时间：2013-03-04T11:13:26.433
> 
> 标签：java, browser, 64-bit, swt, xulrunner

有没有办法用 swt x64 运行 xulrunner 3.6.28（x86 没有其他）？

我不能使用较新的 xulrunner 10.4esr 因为我有一些问题。旧的运行起来像一个魅力，但它没有 x64。

如果我尝试加载 3.6.28，我会收到一些奇怪的错误：

```
org.eclipse.swt.SWTError: XPCOM error 0x80004005
    at org.eclipse.swt.browser.Mozilla.error(Unknown Source)
    at org.eclipse.swt.browser.Mozilla.initXULRunner(Unknown Source)
    at org.eclipse.swt.browser.Mozilla.create(Unknown Source)
    at org.eclipse.swt.browser.Browser.<init>(Unknown Source)
    at GUI.TFSBrowser$1.run(TFSBrowser.java:54) 
```

有什么建议么？

亲切的问候大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-07T03:31:02.180

我意识到这个问题很老，但希望这会帮助其他偶然发现它的人。

使用 64 位 4.3 SWT，我能够通过使用 XULRunner 版本 1.9.2.25 运行时修复此异常。这可能不是您正在（或曾经）寻找的确切解决方案，因为您似乎使用的是更高版本的 XULRunner，但是共同点似乎是正在使用的 64 位库。

最初我从这里找到了下载：[https ://osdn.net/projects/sfnet_runawfe/downloads/SRC%20and%20BIN%20files/extras/xulrunner-1.9.2.25-win64.zip/](https://osdn.net/projects/sfnet_runawfe/downloads/SRC%20and%20BIN%20files/extras/xulrunner-1.9.2.25-win64.zip/)

但是，我也将其重新托管为[`xulrunner-1.9.2.25.en-US.win64.zip`](http://repo.thedesertmonk.com/artifactory/generic/org/mozilla/xulrunner/1.9.2.25/runtimes/xulrunner-1.9.2.25.en-US.win64.zip).

我的答案中发布了完整的解释：[https ://stackoverflow.com/a/44848877/3300205](https://stackoverflow.com/a/44848877/3300205)

相关文章：[在 Windows 64 位和 SWT 4.3 上创建 SWT.MOZILLA 浏览器](https://stackoverflow.com/questions/21378295/creating-a-swt-mozilla-browser-on-windows-64-bit-and-swt-4-3/44962070#44962070)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T13:41:57.750

尝试使用 swtx86.jar 编译您的项目 SWT，并在安装中嵌入一个 JRE 32 位，它适用于 64 位和 32 位拱门。

# javascript - 无法使用 jquery 拖动元素

> ID：15200226
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:13:33.147
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

这是我的 angularjs 指令代码

```
 angular.module('test', []).directive('hello', function() {
    return {
        restrict : 'E',
        template : '<div style="position: relative"><img id="mr" class="drag-image" src="http://www.vancouverconventioncentre.com/wp-content/themes/mobile_pack_base/img/about-us-icon.png" style="position: absolute;" /></div>',
        replace: true,
        link : function(scope, element, attrs) {
            jQuery("#mr").on("keydown", function (){
                 $("#mr").draggable();
            });
        }
    };
}) 
```

这是html代码

```
 <div ng-app="test">
<hello>
    <img id="marker" src="http://maps.google.com/mapfiles/ms/micons/blue.png" style="position: absolute;" />
</hello>
</div> 
```

我想要做的是使用角度 js 指令拖动图像（jqueryui.com/draggable）。但它不起作用。这是一个[jsfiddle](http://jsfiddle.net/7fMCF/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:49:16.503

看一下

[https://github.com/ganarajpr/Angular-UI-Components/blob/master/js/directives.js#L28](https://github.com/ganarajpr/Angular-UI-Components/blob/master/js/directives.js#L28)

这本质上是

```
myApp.directive('drag',function() {
        return function(scope, elm, attrs) {
            elm.draggable({ containment: attrs.drag});
            elm.css({zIndex:2000});
        };
    }); 
```

现在您可以在任何元素上使用属性级别指令，它会变得可拖动。

例如 ：

```
<div drag="parent"></div> 
```

看到您的小提琴，您似乎没有包含 JQuery UI，这可能是您的代码无法正常工作的原因之一。请在尝试之前包含 Jquery、JQuery UI 和 Angular 库。

[http://jsfiddle.net/7fMCF/5/](http://jsfiddle.net/7fMCF/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:28:17.557

包括 jQuery 和 jQuery UI，通过添加这个函数，你应该能够拖动你的图像：

```
$(function() {
    $( "#marker" ).draggable();
}); 
```

如果您希望图像只能在特定区域中拖动，请查看那里的 API 参考 -> [http://api.jqueryui.com/draggable/](http://api.jqueryui.com/draggable/)

您可以使父 ( div ? ) 元素成为边界框。

希望这就是你要找的。

# jsf - 无法获取 Jsf 标签 outputText 出现

> ID：15200229
> 
> 赞同：0
> 
> 时间：2013-03-04T11:13:48.520
> 
> 标签：jsf, jakarta-ee, jboss, javabeans

我是 JSF 和 EJB 应用程序的新手，因此即使在简单的 JavaEE 应用程序中我也会遇到问题。我正在使用 JBoss 在 eclipse 中创建一个简单的 JavaEE 应用程序，目标只是尝试 JSF 的一些标签并将它们绑定到 Java Bean。我无法找出为什么以下 JSf 代码没有在输出页面上显示任何内容：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">

    <f:loadBundle basename="resources" var="msg" />
    <head>
    <title><ui:insert name="pageTitle">Page Title</ui:insert></title>
    <style type="text/css">

    </style>
    </head>

<body bgcolor="#ffffff">
<h:body>
<h:outputText value="#{hello.world}" />
<h:outputText value="TTT" />
</h:body>   
</body>

</html> 
```

不仅值 hello.world 来自 Bean，而且没有出现简单的文本“TTT”。Bean的代码是：

```
@ManagedBean
public class Hello  {

final String world = "World";

/**
 * Default constructor. 
 */
public Hello() {
}

public String getWorld(){
    return "Hello" + world;
}

} 
```

facelets-config.xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.1" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xi="http://www.w3.org/2001/XInclude"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"          xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee   /web-facesconfig_2_1.xsd">
 <managed-bean>
  <managed-bean-name>hello</managed-bean-name>
  <managed-bean-class>com.al.jsftest.Hello</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
 </managed-bean>

</faces-config> 
```

当我尝试使用纯文本标记时，它会出现在屏幕上，但它不能再次使用#{hello.world}，即绑定到 Bean 失败。一旦我有提示如何让 JSF 标记成功输出，我会很感激提示我应该注意什么，以便让 Bean 绑定到 JSF？

**更新：**[类似问题](https://stackoverflow.com/questions/2207616/jsf-tags-not-being-rendered-as-html?rq=1) 似乎是同样的问题，但我的应用程序是在带有 JBoss 的 Eclipse 中，而不是在带有 GlassFish 的 Netbeans 中。因此，我添加了我的 web.xml 文件，可能需要对其进行修改，但我仍然无法弄清楚。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee /web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
 <display-name>JsfTest</display-name>
  <welcome-file-list>
   <welcome-file>index.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
   <servlet-name>Faces Servlet</servlet-name>
   <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
  </servlet>
 <servlet-mapping>
   <servlet-name>Faces Servlet</servlet-name>
   <url-pattern>/faces/*</url-pattern>
 </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:40:54.127

您必须告诉服务器您的页面应该由您的`web.xml`-file 中定义的 JSF-Servlet 加载。
如果我理解您的示例正确，您有一个名为的欢迎文件`index.xhtml`，应该通过调用您的网站将其呈现给 JSF 的用户。

有一个问题：除非您*“让它们通过”*您定义的 JSF-Servlet
，否则 JSF 不会呈现您的所有页面。

 *您的 servlet 定义应如下所示：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern> /* !important */
</servlet-mapping> 
```

因此，您有两种（当然还有更多：））方法来告诉服务器使用 JSF-Servlet 加载您的页面：

1.  告诉您的欢迎文件使用 JSF-Servlet 加载

    ```
    <welcome-file-list>
      <welcome-file>faces/index.xhtml</welcome-file> /* note the /faces/ prefix */
    </welcome-file-list> 
    ```

2.  扩展你的`<url-pattern>`内心`servlet-mapping`

    ```
    <servlet-mapping>  
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
        <url-pattern>*.xhtml</url-pattern>  /*tell JSF to render all pages with xhtml-extension*/
    </servlet-mapping> 
    ```

Netbeans+Glassfish 和 JBoss+eclipse 之间应该没有任何区别，但是您应该检查 JSF 库是否由服务器加载。

**最后一点：**
您正在通过 配置您的 Bean `faces-config.xml`，这将完成这项工作，但是从 JSF 2.x 开始，您可以通过*annotations*在您的类中执行相同的操作，例如

```
@ManagedBean
@SessionScoped  
public class TestBean {
  // your stuff here
} 
```

对我来说，这更容易且更具可读性。

希望这有帮助，玩得开心！

**编辑：**
在您发表评论后，我测试了您的设置：没有错！
起初我遇到了一个错误，因为`<f:loadBundle basename="resources" var="msg" />`在我的设置中没有定义，但是在删除这一行之后一切正常。

尽管如此，我在我的第一个列表项中犯了一个小错字，所以请再次检查。
您的 xhtml-skeleton 对我来说看起来不错，并且在我的测试中有效，所以也不应该有任何问题。

请检查以下内容：

1.  JSF 库是由服务器还是由您的应用程序加载的
2.  `web.xml`您的-file中是否有更多 Servlet 定义
3.  详细的错误信息是什么

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:18:00.000

我创建了一个新的动态 Web 项目，这次我添加了 index.xhtml 文件，使用“Blank Facelet Page”作为模板而不是“Common Facelet Page”。我将 web.xml 文件中的 url 模式更改为 *.xhtml，它最终可以通过浏览器上的完整路径名 (\index.xhtml) 工作，也可以不工作。按照与“Common Facelet Page”相同的过程，我没能成功。奇怪的。

我还注意到，在选择“Common Facelet Page”并单击下一步后，会出现一个库列表，用户可以选择检查其中的一些。我没有检查任何东西，也许我应该检查。*

# android - Android SIP 库 VS pjsip：哪一个？

> ID：15200231
> 
> 赞同：1
> 
> 时间：2013-03-04T11:13:51.930
> 
> 标签：android, sip, pjsip

我打算为Android（可能还有其他系统，但让我们先制作Android）编写一个SIP客户端，我想知道哪个库最适合使用：我们在android sdk或pjsip上得到的那个？为什么？

有人对 pjsip 有什么反馈吗？

感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:36:22.790

在我看来，PJSIP 是最好的。它是免费和开源的多媒体通信库。它被设计成占用空间非常小、性能高且非常灵活。

# php - 更新/返回杂货清单时没有成功消息

> ID：15200234
> 
> 赞同：1
> 
> 时间：2013-03-04T11:14:03.150
> 
> 标签：php, codeigniter, grocery-crud

我正在将 Codeigniter 和 Grocery Crud 用于一个项目 Crud 工作正常，但问题是当我添加文本编辑器时，我没有收到成功消息.. 当我添加这一行时

```
 $crud->change_field_type('description', 'text'); 
```

添加和更新不会显示成功消息，但如果我删除它并使用简单的输入框，那么我会成功收到消息。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:19:02.667

我做了你的例子：

控制器：

```
$crud = new grocery_CRUD();

            //$crud->set_theme('datatables');
            $crud->set_table('text');
            $crud->required_fields('description');
            $crud->columns('description');
            $crud->fields('description');
            $crud->display_as('id','No')
                ->display_as('description','Description');

            $output = $crud->render();

            $this->_example_output($output); 
```

**不要忘记在 DB 中设置描述“文本”的数据类型。**

有用！

# git - 我如何只将一个我的所有私有 git 存储库共享给 50 或 60 个客户。有什么办法可以在不公开我的存储库的情况下做到这一点

> ID：15200235
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:14:03.800
> 
> 标签：git, version-control, github, github-for-windows

我怎样才能只将我的所有私有 git 存储库中的一个共享给 50 或 60 个客户。有什么办法可以在不公开我的存储库的情况下做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:18:36.897

1.  通过 HTTP 服务您的 Git 存储库。使用 SSL + HTTP 身份验证。这是在 Web 服务器级别（[Apache](http://httpd.apache.org/docs/2.2/howto/auth.html) / [Nginx](http://wiki.nginx.org/HttpAuthBasicModule) / 等）配置的

2.  通过 SSH 为您的 Git 存储库提供服务。

3.  设置[Gitolite](https://github.com/sitaramc/gitolite)。

4.  支付[GitHub](https://github.com/plans)以获取私人仓库。

# android - 尝试将 android 项目导出到 apk 时出错

> ID：15200238
> 
> 赞同：0
> 
> 时间：2013-03-04T11:14:14.863
> 
> 标签：android, package, apk, signed

我无法解决这个问题，我在这里寻求帮助。当我尝试在 Eclipse 中将我的 android 项目导出到 apk 时（任何方式 - 通过导出已签名或未签名的应用程序项目）我收到一个错误 -

```
"Failed to export application Command-line Error -1073741816 ". 
```

我有谷歌提供的所有工具（SDK、ADT 等来自这个包 - [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)）。我在这里读到这是一个 java 7 问题 - 所以，我将它重新安装到 java 6，更改了 eclipse 首选项中的设置，但这没有帮助。另一个步骤是从 eclipse 网站安装 eclipse，并从 google 和 ADT 分别安装 SDK。没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T11:29:57.833

在 Eclipse 中，转到 Project -> Build Automatically 并取消选中它。然后，尝试使用 Android 工具再次导出。

# sql-server - 500 个 http 会话导致数据库连接利用率低

> ID：15200241
> 
> 赞同：0
> 
> 时间：2013-03-04T11:14:19.000
> 
> 标签：sql-server, performance, tomcat6, alfresco, java-6

我们有一个在 Tomcat6 上运行的 Alfresco 服务器，查看 manager/html 页面告诉我们有大约。在正常工作日期间有 500 个活动的 http 会话。

这种负载仅使用8 个打开的 jdbc 连接**之一是否正常/预期？**我希望数据库上有更多的负载，因为所有节点元数据都不能已经在 ehcache 中。

我的假设是大约 30 个数据库连接上有负载。

我完全错了吗？

```
Alfresco 4.0.2.9, Tomcat6, Java6, Window Server 2008R2, MSSQL

#alfresco-global.properties
db.pool.initial=30
db.pool.max=300
db.pool.idle=-1
hibernate.jdbc.fetch_size=150 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:42:10.043

对于 HTTP，500 个同时连接并没有那么多。请记住，HTTP 1.1 在当前请求或请求之后保持连接打开，以使后续请求更快，因此这些不一定做任何事情。

而不是同时连接，您应该考虑有多少同时***请求***- 服务器同时处理两个请求。只有这样才有理由使用多个数据库连接。

# extjs - 组合框数据未在 ie 中显示

> ID：15200243
> 
> 赞同：0
> 
> 时间：2013-03-04T11:14:22.990
> 
> 标签：extjs

```
 xtype:          'combo',
 mode:           'local',
 value:          '1',
 allowBlank:      false,
 triggerAction:  'all',
 forceSelection: true,
 editable:       false,
 fieldLabel:     'Is This Your Territory?',
 name:           'is_territory',
 hiddenName:     'is_territory',
 displayField:   'name',
 valueField:     'id',
 width: 230,
 store:          yesnoStore, 
```

这是我的代码。为什么这没有显示在 ie 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T18:44:17.327

即使语法正确，这也不起作用。ExtJS 3.3.1（已确认）及以下（假设）在 IE9 中存在错误。IE 在页面加载时将组合框的高度设置为 0。

我尝试了以下更改但没有成功：

*   在配置中将高度设置为固定大小
*   为组合框列表的类创建自定义 CSS 并设置高度
*   为代表列表的 HTML 元素的 ID 创建自定义 CSS 并设置高度

到目前为止我发现的唯一解决方案：

升级到 ExtJS 3.4.0 或更高版本。这将修复此错误以及与 IE9 相关的许多其他错误。

如果您转到 sencha 示例并查看带有 IE9 的 3.3.1 组合框示例，它将无法正常工作。如果您检查 3.4.0 中的组合框示例，它适用于 IE9。

不幸的是，对我来说这不是一个选项，所以我将继续寻找另一个不涉及升级的解决方案。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:37:59.013

如果您粘贴了完整的配置，错误可能来自额外的逗号：

```
{
    xtype: 'combo',
    mode: 'local',
    value: '1',
    allowBlank: false,
    triggerAction: 'all',
    forceSelection: true,
    editable: false,
    fieldLabel: 'Is This Your Territory?',
    name: 'is_territory',
    hiddenName: 'is_territory',
    displayField: 'name',
    valueField: 'id',
    width: 230,
    store: yesnoStore, // < remove this comma
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:38:23.617

我检查了你的代码，它在 IE 上运行。你在定义你的`yesnoStore`商店吗？或者，也许它只是代码末尾的额外逗号：`yesnoStore,`，删除它。

在您的脚本中包含一个商店，并且该组合可以正常工作：

```
var yesnoStore = new Ext.data.ArrayStore({
    fields: ['id', 'name'],
    data : [['0','option_1'],['1','option_2'],['2','option_3'],['3','option_4']]
}); 
```

此示例在 IE 上运行，可能问题出在您的商店中。

```
{
        xtype: 'combo', 
        mode: 'local',
        value:'1',
        allowBlank: false, 
        triggerAction: 'all', 
        forceSelection: true, 
        editable: false, 
        fieldLabel: 'Is This Your Territory?', 
        name: 'is_territory', 
        hiddenName: 'is_territory', 
        displayField: 'name', 
        valueField: 'id', 
        width: 230, 
        store: yesnoStore
    } 
```

# forms - Symfony2 带有复选框的表单集合

> ID：15200259
> 
> 赞同：6
> 
> 时间：2013-03-04T11:15:29.850
> 
> 标签：forms, symfony, silex

我正在用 Symfony2 构建一个表单，需要对一些复选框进行分组。我根本无法弄清楚如何将选择/标签传递给 BonusGroup 中的复选框。

**形式：**

```
$builder->add('groups', 'collection', array(
     'type' => new BonusGroup(),
     'allow_add' => false,
     'allow_delete' => false,
     'by_reference' => false
)); 
```

**奖金组（）：**

```
$builder->add('bonus', 'choice', array(
      'choices'  => $options['bonus'],
      'multiple' => true,
      'expanded' => true
)); 
```

**视图.twig：**

```
{% for group in form.groups %}
     {{ form_label(group) }}
     {% for final in group.bonus %}
          {{ form_widget(final) }}
     {% endfor %}
{% endfor %} 
```

**将数据传递给表单：**

```
$data = array(
    'groups' =>
        array ('Group 1 label' => array())
);

$form = $app['form.factory']->createBuilder(new Form(), $data))->getForm(); 
```

有小费吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:48:18.097

首先，将**form_widget**更改为**form_row**，但它还不能工作，因为集合类型需要一段 JavaScript 才能工作。

请参阅此处的示例：http: [//symfony.com/doc/2.1/reference/forms/types/collection.html](http://symfony.com/doc/2.1/reference/forms/types/collection.html)

# xaml - 在 XAML Windows 8 中更改按钮的禁用颜色

> ID：15200264
> 
> 赞同：0
> 
> 时间：2013-03-04T11:15:42.283
> 
> 标签：xaml, windows-8, .net-4.5

我希望能够在 XAML 中禁用按钮时更改它的背景颜色，但我不知道要覆盖什么。

有人知道我需要做什么吗？

我正在使用 XAML 和 C# 4.5 创建一个 Windows 8 商店应用程序。

我当前的按钮样式如下：

```
 <Style x:Key="MySaveButtonStyle"
               TargetType="ButtonBase">
            <Setter Property="FontFamily"
                    Value="Segoe UI Symbol" />
            <Setter Property="FontSize"
                    Value="36" />
            <Setter Property="Content"
                    Value="&#xE105;" />
            <Setter Property="Height"
                    Value="70" />
            <Setter Property="Width"
                    Value="80" />
            <Setter Property="BorderBrush"
                    Value="White" />
            <Setter Property="Foreground"
                    Value="{StaticResource ButtonForegroudBrush}" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="Background"
                    Value="White" />
        </Style> 
```

谢谢是提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:30:50.850

您必须覆盖按钮的默认 ControlTemplate。

为此：右键单击设计器视图中的按钮 - 编辑模板 - 编辑副本

然后 Visual Studio 会为您创建默认模板。

在模板代码中有一个带有组和状态的 VisualStateManager 部分。

其中之一是

```
 <VisualState x:Name="Disabled">
//Change to your demands 
</VisualState> 
```

在这里，您可以将其更改为禁用控件时想要执行的任何操作。

# javascript - 我可以使用 HTTP 范围标头“故意”加载部分文件吗？

> ID：15200266
> 
> 赞同：16
> 
> 时间：2013-03-04T11:15:59.150
> 
> 标签：javascript, http, http-headers, range, filtering

我正在使用 HTTP 范围标头（[specs](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16)）。

据我了解，我可以设置文件的字节范围ala

```
0-199/2000
200-499/2000
500-799/2000
etc 
```

**问题：**
假设我只想访问文件的某些范围，是否可以指定这些范围，然后使用我收到的“不完整”数据？我正在玩过滤一个大的日志文件，所以我很好奇这样的事情是否可行。

感谢您的投入！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-06T10:41:54.037

你是对的，你在评论中发布的链接可能是最好的方法。因为你的问题听起来很有趣，所以我试了一下。你可能做到了，但这里有一个片段（对于其他可能会出现的片段）

```
var xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","data.dat",false);
xmlhttp.setRequestHeader("Range", "bytes=100-200");
xmlhttp.send();
console.info(xmlhttp); //--> returns only the partial content
// Tested on Win7 with chrome 46+ 
```

# security - 将堆栈保护删除标志添加到 apache 编译脚本

> ID：15200268
> 
> 赞同：1
> 
> 时间：2013-03-04T11:16:04.550
> 
> 标签：security, compilation, makefile

出于学习目的，我想在旧的 1.3.x 版本的 apache 网络服务器上测试一些缓冲区溢出漏洞。无论如何，我有堆栈保护，所以它不起作用，或者至少我认为它不是因为这个原因。为了禁用保护，我必须使用这些标志进行编译：

```
-fno-stack-protector -z execstack 
```

但我不知道如何将它们添加到 apache 编译过程中。我从来没有做过这样的事情！你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:30:58.413

尝试：

```
CFLAGS="-fno-stack-protector" LDFLAGS="-z execstack" ./configure [...] 
```

`CFLAGS`是给编译器的，`execstack`是一个链接器选项，所以它应该放在`LDFLAGS`. 或者，如果支持，您可以让编译器传递链接器选项 -with `-Wl`，因此：

```
CFLAGS="-fno-stack-protector -Wl,-z,execstack" ./configure [...] 
```

有关更多详细信息，请参阅`INSTALL`Apache 源存档中的文件。

检查或比较生成的顶级 很有用，您应该在和`Makefile`中的一个或两个中看到您的参数。`EXTRA_CFLAGS``EXTRA_LDFLAGS`

鉴于您的任务，如果您正在运行具有定期[预链接](http://en.wikipedia.org/wiki/Prelinking)和[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)任务的 Linux 发行版，您应该检查是否将 Apache 安装到未处理的路径*，*否则当您的 Apache二进制“固定”了一晚......

检查是否`prelink`安装了

```
 dpkg -l prelink      # Ubuntu/Debian derived
 rpm -qv prelink      # CentOS/Red Hat derived 
```

并检查配置（通常）`/etc/prelink.conf`和以下之一：`/etc/defaults/prelink`或`/etc/sysconfig/prelink`。

在 Ubuntu（但*不在*CentOS/RH 上）上，`/usr/local/`（`bin`, `sbin`, `lib`）下*的*目录包含用于处理。如果您将 Apache 安装为默认值，`/usr/local/apache`那么它应该保持不变，或者如果您想要彻底，您可以添加一个目录黑名单 ( `-b`) 行`/etc/prelink.conf`

# javascript - 在Firefox中，徽章颜色不会改变，使用crossrider API（setBadgeText）？

> ID：15200269
> 
> 赞同：0
> 
> 时间：2013-03-04T11:16:05.753
> 
> 标签：javascript, firefox, colors, badge, crossrider

我正在使用 crossrider，我想更改浏览器按钮的徽章颜色

这是代码（在 background.js 中）

```
appAPI.ready(function() {
    appAPI.browserAction.setBadgeText('0', [255, 127, 127, 125]); // GREY Color
}); 
```

该代码在 Chrome 中运行良好。但在 Firefox 中，我无法将徽章颜色更改为“红色”以外的任何颜色！尽管后台代码中的数组值发生了任何变化，但它始终是红色的！

如何改变它的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:17:06.410

您是否尝试过按照文档中的说明**首先**使用*[setResourceIcon设置图标？](http://docs.crossrider.com/#!/api/appAPI.browserAction-method-setResourceIcon)*（有关详细信息，请参阅[appAPI.browserAction](http://docs.crossrider.com/#!/api/appAPI.browserAction)）

我使用了以下代码，它按预期工作：

```
appAPI.ready(function() {
    // Make sure you have an image in the resources folder
    appAPI.browserAction.setResourceIcon('images/icon.png');
    appAPI.browserAction.setBadgeText('Icon');
    appAPI.browserAction.setBadgeBackgroundColor([0,0,255,100]);
}); 
```

# highcharts - 使用相同的 xAxis 高图显示具有不同开始间隔的两个不同系列

> ID：15200270
> 
> 赞同：0
> 
> 时间：2013-03-04T11:16:07.900
> 
> 标签：highcharts

[http://jsbin.com/enotab/39/edit](http://jsbin.com/enotab/39/edit)我想在同一个 XAxis 上显示来自 2 个不同年份的数据，而不使用 2 个 x 轴。在这种情况下，我得到以下结果

我想有一个 2 系列的叠加图，其中 2012 系列变成了阴影图。这怎么可能？这是我的静态代码：

```
var mychart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        zoomType: 'x'
    },
    title: {
        text: 'Chart Title'
    },
    xAxis: [{
        type: 'datetime',
        minRange: 31 * 24 * 3600000,
        labels: {
            formatter: function () {
                return Highcharts.dateFormat('%e %b %y', this.value);
            }
        }
    }],

yAxis: {
    title: {
        text: 'Current Values'
    },
    gridLineColor: 'transparent',
    plotLines: [{
        value: 0,
        color: 'green',
        dashStyle: 'longdashdot',
        width: 1
    }, {
        value: 30,
        color: 'orange',
        dashStyle: 'longdashdot',
        width: 1
    }, {
        value: 60,
        color: 'red',
        dashStyle: 'longdashdot',
        width: 1
    }, {
        value: 80,
        color: 'black',
        dashStyle: 'longdashdot',
        width: 1
    }]
},

tooltip: {
    crosshairs: true,
    shared: true
},

plotOptions: {
    series: {
        fillColor: {
            linearGradient: {
                x1: 0,
                y1: 0,
                x2: 0,
                y2: 1
            },
            stops: [
                [0, Highcharts.getOptions().colors[0]],
                [1, 'rgba(0,0,0,0.1)']
            ]
        },
        lineWidth: 1,
        shadow: false,
        marker: {
            enabled: false,
            states: {
                hover: {
                    enabled: true,
                    radius: 5,
                    fillColor: 'red'
                }
            }
        },
        states: {
            hover: {
                lineWidth: 1
            }
        },
        threshold: null
    } //area
}, //plotoptions

series: [{
    type: 'area',
    //color:'#89a54e',
    color: '#4572a7',
    lineWidth: 0.1,
    name: '2012',
 //   xAxis: 0,
    zIndex: -1,
    pointInterval: 24 * 3600 * 1000,
    pointStart: Date.UTC(2013, 0, 1),
    data: [
        [Date.UTC(2013, 0, 1), 3],
        [Date.UTC(2013, 0, 2), 12],
        [Date.UTC(2013, 0, 3), 30],
        [Date.UTC(2013, 0, 4), 22],
        [Date.UTC(2013, 0, 5), 12],
        [Date.UTC(2013, 0, 8), 13],
        [Date.UTC(2013, 0, 9), 12],
        [Date.UTC(2013, 0, 11), 13],
        [Date.UTC(2013, 0, 12), 22],
        [Date.UTC(2013, 0, 15), 1],
        [Date.UTC(2013, 0, 16), 25],
        [Date.UTC(2013, 0, 18), 43],
        [Date.UTC(2013, 0, 19), 26],
        [Date.UTC(2013, 0, 20), 23],
        [Date.UTC(2013, 0, 21), 12],
        [Date.UTC(2013, 0, 22), 13],
        [Date.UTC(2013, 0, 23), 22],
        [Date.UTC(2013, 0, 24), 1],
        [Date.UTC(2013, 0, 25), 25],
        [Date.UTC(2013, 0, 26), 43],
        [Date.UTC(2013, 0, 27), 26],
        [Date.UTC(2013, 0, 28), 23],

        [Date.UTC(2013, 0, 29), 12],
        [Date.UTC(2013, 0, 30), 13],
        [Date.UTC(2013, 0, 31), 22],
        [Date.UTC(2013, 1, 1), 1],
        [Date.UTC(2013, 1, 2), -5],
        [Date.UTC(2013, 1, 3), 43],
        [Date.UTC(2013, 1, 4), 26],
        [Date.UTC(2013, 1, 5), 23],
        [Date.UTC(2013, 1, 6), 25],
        [Date.UTC(2013, 1, 7), 43],
        [Date.UTC(2013, 1, 8), 26],
        [Date.UTC(2013, 1, 9), 23],
        [Date.UTC(2013, 1, 10), 35],
        [Date.UTC(2013, 1, 11), 38],
        [Date.UTC(2013, 1, 14), 36],
        [Date.UTC(2013, 1, 15), 3],
        [Date.UTC(2013, 1, 16), 55],
        [Date.UTC(2013, 1, 17), 43],
        [Date.UTC(2013, 1, 18), 22],
        [Date.UTC(2013, 1, 19), -3]
    ]

}, {
    type: 'line',
    name: '2013',
    color: '#89a54e',
    lineWidth: 3,
    zIndex: 3,
    //  xAxis:1,
    pointInterval: 24 * 3600 * 1000,
    pointStart: Date.UTC(2012, 0, 1),
    data: [
        [Date.UTC(2012, 0, 1), 13],
        [Date.UTC(2012, 0, 2), 52],
        [Date.UTC(2012, 0, 3), 3],
        [Date.UTC(2012, 0, 4), 12],
        [Date.UTC(2012, 0, 5), 2],
        [Date.UTC(2012, 0, 6), 35],
        [Date.UTC(2012, 0, 7), 12],
        [Date.UTC(2012, 0, 8), 35],
        [Date.UTC(2012, 0, 9), 22],
        [Date.UTC(2012, 0, 11), 3],
        [Date.UTC(2012, 0, 12), 32],
        [Date.UTC(2012, 0, 15), 41],
        [Date.UTC(2012, 0, 16), 45],
        [Date.UTC(2012, 0, 18), 63],
        [Date.UTC(2012, 0, 19), 16],
        [Date.UTC(2012, 0, 20), 83],
        [Date.UTC(2012, 0, 21), 1],
        [Date.UTC(2012, 0, 22), 75],
        [Date.UTC(2012, 0, 23), 52],
        [Date.UTC(2012, 0, 24), 1],
        [Date.UTC(2012, 0, 25), 65],
        [Date.UTC(2012, 0, 26), 13],
        [Date.UTC(2012, 0, 27), 76],
        [Date.UTC(2012, 0, 28), 56],

        [Date.UTC(2012, 0, 29), 12],
        [Date.UTC(2012, 0, 30), 13],
        [Date.UTC(2012, 0, 31), 22],
        [Date.UTC(2012, 1, 1), 1],
        [Date.UTC(2012, 1, 2), 25],
        [Date.UTC(2012, 1, 3), 43],
        [Date.UTC(2012, 1, 4), 26],
        [Date.UTC(2012, 1, 5), 23],
        [Date.UTC(2012, 1, 6), 25],
        [Date.UTC(2012, 1, 7), 43],
        [Date.UTC(2012, 1, 8), 26],
        [Date.UTC(2012, 1, 9), 23],
        [Date.UTC(2012, 1, 10), 35],
        [Date.UTC(2012, 1, 11), 48],
        [Date.UTC(2012, 1, 14), 86],
        [Date.UTC(2012, 1, 15), 73],
        [Date.UTC(2012, 1, 16), 55],
        [Date.UTC(2012, 1, 17), 43],
        [Date.UTC(2012, 1, 18), 22],
        [Date.UTC(2012, 1, 19), -3]
    ]
}]
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:43:22.997

这取决于您希望在 x 轴上显示的内容。如果您只想保留第一个轴标签，则只需从第二个 x 轴上删除标签并将其偏移到第一个轴上：

```
xAxis:[ {type: 'datetime', minRange:31*24 *3600000 , offset:10,
         labels: {formatter: function() {return Highcharts.dateFormat('%e %b', this.value);
        }
    } },
    {type: 'datetime', minRange:31*24 *3600000 , offset:10,
       labels: {enabled:false}
    }], 
```

# android - 使用资源文件夹图像导出 Android 库项目

> ID：15200278
> 
> 赞同：1
> 
> 时间：2013-03-04T11:17:03.357
> 
> 标签：android, resources, executable-jar

我是安卓新手。我正在使用可重用代码，因此我将其转换为 JAR 文件。我正在使用 JAR 源 res 文件夹中的图像。我已经通过库源中的“ **R.drawable.imagename ”访问了这些图像。**当我将库源转换为 JAR 时，我已经导出了这些 res 文件夹。如果我在另一个**android 应用程序中使用 JAR，那将会崩溃**。我按照下面的链接将库源转换为 JAR。

“ [http://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/jarInEclipse.htm](http://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/jarInEclipse.htm) ”。

我在哪里做错了。？有没有其他**程序可以将android库项目转换为带有资源的JAR**。？或者**访问android库源中的res文件夹图像**有什么问题吗？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:21:28.837

**更新：**

新的基于 Gradle 的构建系统支持[“aar”文件](http://tools.android.com/tech-docs/new-build-system/aar-format)，除了已编译的代码，还可以包含资源等。

**老的：**

android 构建工具不支持库项目中的资源打包。您必须与文件一起提供一个单独`zip`的 for文件夹。`res``jar`

代码进入`jar`（用于库）或`dex`（用于应用程序）。资源单独捆绑到`apk`文件中。因此，SDK 资源打包工具仅在您导出`apk`文件时工作。

是的，一个`jar`文件可以包含资源，但是，依赖的 android 项目不会在`jar`文件中查找资源。

# ember.js - 用于显示/编辑和创建的相同 Ember.JS 模板

> ID：15200281
> 
> 赞同：4
> 
> 时间：2013-03-04T11:17:11.400
> 
> 标签：ember.js, ember-router

我正在使用 Ember.JS 编写一个 CRUD 应用程序：

*   显示“动作”列表；
*   用户可以点击一个动作来显示它，或者点击一个按钮来创建一个新的动作。

我想使用相同的模板来显示/编辑现有模型对象并创建一个新对象。

这是我使用的路由器代码。

```
App = Ember.Application.create();

App.Router.map(function() {
    this.resource('actions', {path: "/actions"}, function() {
        this.resource('action', {path: '/:action_id'});
        this.route('new', {path: "/new"});
    });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('actions');
    }   
});

App.ActionsIndexRoute = Ember.Route.extend({
    model: function () {
        return App.Action.find();
    }
});

App.ActionRoute = Ember.Route.extend({
    events: {
        submitSave: function () {
            this.get("store").commit();
        }
    }
});

App.ActionsNewRoute = Ember.Route.extend({
    renderTemplate: function () {
        this.render('action');
    },

    model: function() {
        var action = this.get('store').createRecord(App.Action);       
        return action;
     },

    events: {
        submitSave: function () {
            this.get("store").commit();
        }
    }
}); 
```

问题是当我第一次显示一个动作，然后回来创建一个新的时，看起来模板没有使用新创建的记录，而是使用之前显示的记录。

我的解释是控制器和模板不同步。你会怎么做？也许有更简单的方法来实现这一点？

这是一个带有代码的 JSBin：http: [//jsbin.com/owiwak/10/edit](http://jsbin.com/owiwak/10/edit)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:20:09.397

通过说`this.render('action')`，您不仅告诉它使用`action`模板，而且还告诉它`ActionController`，实际上您想要`action`模板，但使用`ActionNewController`.

您需要覆盖它：

```
this.render('action', {
  controller: 'actions.new'
}); 
```

[更新了 JS Bin](http://jsbin.com/owiwak/14/edit)。

# php - 执行以下查询时出错

> ID：15200282
> 
> 赞同：2
> 
> 时间：2013-03-04T11:17:12.063
> 
> 标签：php, mysql

我正在尝试运行此查询。但它显示 1 行或给出超过 1 行的错误查询结果。

```
select * from abc where id=(select nameid from xyz where name like '%abc%') 
```

帮我。我正在执行一个查询，我从表 abc 中获取姓名、父亲姓名和 schoolid。现在我想通过在其中运行另一个查询来从 table2 中获得学校名称，但始终显示 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:18:57.777

试试这个`IN`以获得超过一排

```
 select * from `abc` where id in (select nameid from xyz where name like '%abc%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:19:14.420

使用 IN 获取多于 1 行：

```
select * from abc where id IN (select nameid from xyz where name like '%abc%'); 
```

**编辑：**

```
select a.*, x.school_name from abc a left join xyz x on a.id = x.nameid where name like '%abc%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:18:57.213

使用`IN`mysql 子句。

```
SELECT * FROM abc WHERE id IN (SELECT nameid FROM xyz WHERE name LIKE '%abc%') 
```

因为 where 条件只检查一个值，但您将它与子查询返回的数据数组进行比较。

你所做的是

```
if($value = array(1,2,3)) 
```

这将始终返回 false，因此您需要使用能够查看数组并给出结果的东西。

换句话说，比较只会在一次值上执行，`one = one`而不是在`one = array('one',two)`

so`IN`子句将在`MySQL`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:19:01.877

这应该是

```
select * from abc where id IN (select nameid from xyz where name like '%abc%') 
```

# android - Android 错误“转换为 Dalvik 格式失败，错误 2”？

> ID：15200286
> 
> 赞同：6
> 
> 时间：2013-03-04T11:17:26.613
> 
> 标签：android, runtime-error

我在我的应用程序中使用了flurry sdk，在添加这个flurry jar 文件之前它工作正常，没有任何错误。在 libs 文件夹中添加 flurry jar 文件后，当我在 Eclipse 中编译应用程序时出现此错误。

```
trouble writing output: Too many methods: 70205; max is 65536\. By package:
  5 android.accessibilityservice
  1 android.animation
  2 android.annotation
315 android.app
136 android.content
 28 android.content.pm
 47 android.content.res
 35 android.database
 14 android.database.sqlite
  8 android.gesture
113 android.graphics
 44 android.graphics.drawable
  1 android.graphics.drawable.shapes
 11 android.location
 27 android.media
 40 android.net
  1 android.net.http
  1 android.net.wifi
 96 android.os

[2013-03-04 16:42:13 - myapp] Conversion to Dalvik format failed with error 2 
```

我知道如何解决`error 1`，但这是我无法解决的新错误。我搜索了很多没有得到任何解决方案。

当我删除这个 jar 文件时，它工作正常。如果它在库中无法运行应用程序。为什么我收到此错误。？这个有什么解决办法。。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T10:42:06.877

由于错误是`trouble writing output: Too many methods: 70205; max is 65536`，因此“解决方案”是将您的方法计数减少约 10%。

这通常是由于 JAR 太多和方法太多而造成的，当然可以想象您自己编写了数以万计的方法。

尝试找到一些您不需要的 JAR 并将其删除。例如，您可以[使用 ProGuard 报告您的应用程序中的死代码](http://proguard.sourceforge.net/index.html#manual/examples.html)——也许该库通常需要某个库的依赖 JAR，但您使用该库的方式并不需要。

ProGuard 本身也可以用来从你的应用程序中删除那些死代码，而不需要所有正常的混淆内容。但是，这不是正常构建过程的一部分，因此您必须为此编写一个 Ant 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T09:38:07.870

我观察到的是，我们不应该将 jars 文件直接放在像这样的文件夹中

```
libs/x.jar 
```

当我为此在文件夹或任何文件夹中创建子文件`libs`夹时，例如

```
libs/temp/x.jar 
```

您可以在该临时文件夹中加载多少个 jar 文件。这样我就能够避免错误。它只是不需要是`libs`文件夹本身。名字可以是任何东西。

仅当 jar 文件数量较多时才需要这样做。否则你可以直接放在`libs`文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T01:55:46.193

我遇到了这个错误，因为我将 Google APIs 包含在我的项目中。

# java - Android警报对话框问题

> ID：15200294
> 
> 赞同：0
> 
> 时间：2013-03-04T11:17:44.453
> 
> 标签：java, android, android-alertdialog

在我的 android 应用程序中，我使用一个警报对话框向用户显示一些信息，如果用户单击该对话框，它应该完成活动。我的代码是

```
offer.this.runOnUiThread(new Runnable() {
@Override
public void run() {
    // TODO Auto-generated method stub
    AlertDialog alert=new AlertDialog.Builder(offer.this).create();
    alert.setTitle("SVSugar Mill");
    alert.setMessage("Offer Number is "+offer_no.getText().toString());
    alert.setButton("Click to Dismiss", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        finish();
        //return;
        }
    });
    alert.show();
    }
}); 
```

它不等待用户响应完成（）。相反，即使用户没有单击警报对话框，它也会被调用。我知道这是异步的，但我需要这样做。（应向用户显示 OfferNO。当用户单击警报对话框时，它应该完成活动）。有没有办法做到这一点？

谁来帮帮我

编辑：

活动将完成，无需等待用户单击警报对话框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:22:13.717

```
public void ShowDialog(final Context context) {
        new AlertDialog.Builder(context)
                .setTitle(android.R.string.dialog_alert_title)  
                .setMessage(UContext.getContext().getString(R.string.network_error))
                .setPositiveButton(android.R.string.ok,
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                this.finish();
                            }
                        }).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T11:21:56.873

问题是您在这里创建了两个 AlertDialog 实例：

```
alertDialog=builder.create();
builder.create().show(); 
```

然后你在实际上没有显示的对话框上调用了dismiss()。这应该可以解决问题：

```
alertDialog=builder.show(); 
```

# iphone - 如何在按钮单击操作上最小化 iPhone 应用程序？

> ID：15200295
> 
> 赞同：-2
> 
> 时间：2013-03-04T11:17:51.793
> 
> 标签：iphone, ios6, minimize

单击按钮时，我希望我的应用程序最小化..

我尝试使用`exit()`，但使用退出时苹果拒绝应用程序。

什么是完美的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:23:28.730

1.  不使用主页按钮是不允许的。
2.  exit() 将终止应用程序。
3.  如果您无论如何实现它，Apple 肯定会拒绝您的应用程序。
4.  或者，将用户带到另一个屏幕。不要最小化应用程序。
5.  以编程方式退出应用程序或将其发送到后台是违反 [iOS 人机界面指南]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:22:57.127

没有用于进入后台的公共 API。

# java - Java regex，删除逗号左边的内容

> ID：15200297
> 
> 赞同：0
> 
> 时间：2013-03-04T11:17:52.910
> 
> 标签：java, regex

我得到了一个字符串，其中有一串数字用“，”分隔，格式如下：

```
1.2223232323232323,74.00 
```

我希望它们变成一个字符串 []，但我只需要逗号右侧的数字。(74.00)。**该列表有大约 10,000 条不同的行，如上面的行。**现在我正在使用 String.split(",") 这给了我：

```
System.out.println(String[1]) =
1.2223232323232323 
74.00 
```

为什么它不分成两个不同的索引？我认为在 split 上应该是这样的：

```
 System.out.println(String[1]) = 1.2223232323232323
 System.out.println(String[2]) = 74.00 
```

但是，在 String[] array = string.split (",") 上生成一个索引，两个值由换行符分隔。

我只需要 74.00 我假设我需要使用 REGEX，这对我来说有点希腊化。有人可以帮我:)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:23:59.910

**如果它在一个文件中：**

```
Scanner sc = new Scanner(new File("..."));
sc.useDelimiter("(\r?\n)?.*?,");
while (sc.hasNext())
  System.out.println(sc.next()); 
```

**如果都是一个巨大的字符串，用换行符分隔：**

```
String oneGiantString = "1.22,74.00\n1.22,74.00\n1.22,74.00";
Scanner sc = new Scanner(oneGiantString);
sc.useDelimiter("(\r?\n)?.*?,");
while (sc.hasNext())
  System.out.println(sc.next()); 
```

**如果每个都只有一个字符串：**

```
String line = "1.2223232323232323,74.00";
System.out.println(line.replaceFirst(".*?,", "")); 
```

**正则表达式解释：**

`(\r?\n)?`表示可选的换行符。
`.`表示通配符。
`.*?`表示 0 个或多个通配符（`*?`与仅`*`表示非贪婪匹配相反，但这对您来说可能意义不大）。
`,`意思是，嗯，...，一个逗号。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

**`split`对于文件或单个字符串：**

```
String line = "1.2223232323232323,74.00";
String value = line.split(",")[1]; 
```

**`split`对于一个巨大的字符串（也需要正则表达式）（但我更喜欢`Scanner`，它不需要所有的内存）：**

```
String line = "1.22,74.00\n1.22,74.00\n1.22,74.00";
String[] array = line.split("(\r?\n)?.*?,");
for (int i = 1; i < array.length; i++) // the first element is empty
   System.out.println(array[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:19:26.357

只需尝试：

```
String[] parts = "1.2223232323232323,74.00".split(",");
String value   = parts[1]; // your 74.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:20:09.147

```
String[] strings = "1.2223232323232323,74.00".split(","); 
```

# matlab - Matlab：如果信号在最后 2 秒内变化 0.1，则计数值

> ID：15200310
> 
> 赞同：0
> 
> 时间：2013-03-04T11:18:40.153
> 
> 标签：matlab

我有一个连续的信号上升和下降。我找到了峰值 - 最大值及其位置。

我现在想知道如何将代码写入 COUNT 以防我的信号以这种规则发生变化：它的幅度超过 0.1 并且峰值出现在增加开始后不到两秒的时间内。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:02:59.973

一个普遍的答案是：遍历峰值向量并检查值向量的适当部分以查找其最小元素：

```
for i = 1:len(peaks)
    peak = peaks(i,:)
    peak_value = peak[1]
    peak_time = peak[2]
    cut_values = values(max(1,(peak_time-2)*f):peak_time*f)
    if min(cut_values) < peak_value - 0.1
            peak_count += 1 % or something 
```

编辑 - 添加说明：

`peaks`是峰值和时间的矩阵 (nx2)

`values`是你的信号向量

`f`是采样频率 (Hz)，被认为是均匀的

再次编辑以适应 2 秒之前的峰值。

Matlab 的 1 索引在这里有点棘手：样本 1 在时间 0，样本 2 在时间`f`。因此，对于从零时间开始的信号，真正正确的做法是：

```
 cut_values = values(max(0,(peak_time-2)*f)+1:peak_time*f+1) 
```

# ios - 在我的 iOS 应用程序中使用条形码扫描仪（如 Grabba）

> ID：15200313
> 
> 赞同：4
> 
> 时间：2013-03-04T11:18:51.813
> 
> 标签：ios, barcode, barcode-scanner

我的目标很简单：从条形码扫描仪读取数据。

我知道有一个使用相机扫描条形码的选项，但根据我的经验，在不太理想的情况下，即光线不好的情况下，结果并不是很准确。因此，我正在探索外部设备是否可以轻松地与 iPhone/iPad 连接，并且可以像外部键盘一样提供条形码数据。

那么，我可以读取使用外部设备扫描的条形码吗？如果是这样，我可以在不编写任何代码的情况下做到这一点，还是我必须在我的应用程序中专门添加某种支持？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T17:14:01.457

# 回答

任何支持 HID 模式的 iOS 兼容蓝牙扫描仪。例如，任何 Socket CHS。连接后，它将完全按照您所说的“就像外部键盘一样”运行。

# HID 与 SDK

**HID：**使用任何扫描仪作为键盘，您只能将扫描的数据输入到开放的输入字段中，用户可以在其中修改扫描的数据，并且后处理和验证的选项有限。

因为扫描仪在 iOS 中显示为键盘，所以 iOS 隐藏了屏幕键盘 - 这是有道理的……如果扫描仪是一个实际的键盘。一些扫描仪（包括 Socket CHS 7Ci 和 7Xi）提供了强制使用键盘的机制（在我们的 CHS 上双击电源按钮）或应用程序可以强制使用键盘（请参阅：[相关](https://stackoverflow.com/questions/7412649/bluetooth-hid-device-ios-textfields)的stackoverflow 问题）

**SDK：**使用 SDK 开发应用程序可提供更强大的设置并处理更复杂的用例：即使输入字段未激活，也可以扫描到应用程序，强制执行特定的扫描顺序（扫描 UPC 后跟 VIN 编号，而不是反之）反之亦然），或解析扫描的数据（将时间戳分解为年、月、日、时间）。

**结论：**就个人而言，我会使用 HID 模式作为一种快速而肮脏的入门方式，但会切换到最终产品的 SDK。显然，这取决于您需要/想要多少控制。

**免责声明**：我为 Socket Mobile 工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:37:05.193

您可以从链接下载演示

[http://www.datecs.bg/en/products/Linea-Pro-iPhone-SDK/8/102](http://www.datecs.bg/en/products/Linea-Pro-iPhone-SDK/8/102)

解压后运行 LineaDemo 即可。它正在使用 Linea Pro Scanner[外部设备] 进行扫描

# c# - GC.GetGeneration 方法给出了意想不到的结果

> ID：15200317
> 
> 赞同：2
> 
> 时间：2013-03-04T11:19:01.473
> 
> 标签：c#, garbage-collection

我有来自 Jeffrey Richter 书中的示例代码，如下所示。

```
Object o = new Object();

Console.WriteLine("Gen " + GC.GetGeneration(o)); // 0\. 
GC.Collect();
Console.WriteLine("Gen " + GC.GetGeneration(o)); // 1\. 
GC.Collect();
Console.WriteLine("Gen " + GC.GetGeneration(o)); // 2 (expected) but it is 0
GC.Collect();
Console.WriteLine("Gen " + GC.GetGeneration(o)); // 2 (expected) but it is 1 
```

谁能解释为什么对 GetGeneration 的第 3 次和第 4 次调用显示的是 0 代和 1 代而不是 2 代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:29:14.697

我找到了答案。我的控制台应用程序的当前 .Net Framework 是 3.5。当我将其更改为 4 个客户配置文件时，我达到了预期的结果。但我还有另一个问题 - .net 3.5 和 4.0 / 4.5 中的垃圾收集有什么区别？

# jquery - 如何创建一个 jQuery 价格滑块

> ID：15200329
> 
> 赞同：2
> 
> 时间：2013-03-04T11:19:28.383
> 
> 标签：jquery, slider, draggable

我一直在尝试寻找教程，但没有运气。我不是要求任何人为我做这项工作，而是更多地看看是否有人知道任何有用的东西。

所以基本上我需要我的滑块有一个最小值为零和一个动态设置的最大值（获取动态值不是问题）。

0 -------o-------------------- 200

所以中间的“o”就是你的可点击滑动元素。我需要它在右侧的框中输出您所在的号码。所以在这个例子中它会输出 100。非常像在视频播放器上设置音量。

基本上这是一个奖励积分系统，所以人们可以滑动他们有多少奖励积分，它会输出这相当于多少磅。

正如我所说，我更多的是寻求帮助来寻找教程，但如果有人能发布一个片段来推动我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T11:09:31.933

```
Try this:

http://jquerymobile.com/demos/1.0a2/#docs/forms/forms-slider.html

<body class=""> 
<link rel="stylesheet" href="jquery.css">

<script src="jquery-1.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<div class="" id="" data-role="page">

<div class="ui-field-contain ui-body ui-br" data-role="fieldcontain">
<input class="" name="slider" id="slider" value="100" min="0" max="10" data-type="range">
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:21:59.350

看看[http://jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

这将为您提供所需值的范围滑块

# android - 电话间隙中的 Gps 精度

> ID：15200335
> 
> 赞同：1
> 
> 时间：2013-03-04T11:19:41.213
> 
> 标签：android, cordova

在android native中，我们可以识别使用获得的gps位置的准确性

```
locationProvider.getAccuracy() 
```

参考：[LocationProvider](http://developer.android.com/reference/android/location/LocationProvider.html#getAccuracy%28%29)

phonegap 中是否有类似的方法来识别`geolocation.watchPosition`和`geolocation.getCurrentPosition`Methodes 获得的 GPS 位置的准确性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:45:37.350

返回的位置对象保持精度：

```
var onSuccess = function(position) {
alert('Latitude: '          + position.coords.latitude          + '\n' +
      'Longitude: '         + position.coords.longitude         + '\n' +
      'Altitude: '          + position.coords.altitude          + '\n' +
      'Accuracy: '          + position.coords.accuracy          + '\n' +
      'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
      'Heading: '           + position.coords.heading           + '\n' +
      'Speed: '             + position.coords.speed             + '\n' +
      'Timestamp: '         + new Date(position.timestamp)      + '\n'); 
```

};

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:44:54.183

您可以使用 watchPosition 代替 getCurrentPosition。然后你的 onSuccess 函数将在每次位置发生变化时触发（当它更准确时）。在此功能中，您可以检查准确性，然后使用 clearWatch 停止 gps 传感器

礼貌（[威林](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/Cg-BidKgbFQ)）

# iphone - 适用于模拟器 6.1，但不适用于 iPhone iOS 6.1

> ID：15200336
> 
> 赞同：0
> 
> 时间：2013-03-04T11:19:41.847
> 
> 标签：iphone

我正在使用 iPhone 6.1 模拟器，它可以工作。但是，当我使用我的 iPhone [iOS 6.1] 时，我收到一个错误“更新时出错。不是错误”。帮助！！！！

```
 NSString *filePath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"myDatabase.sqlite"];

    NSString* str2 = SeqNo1.text;
    sqlite3 *database;
    sqlite3_stmt *updateStmt=NULL;
    if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK)
    {
        NSString* sql= [NSString stringWithFormat:@"UPDATE MyTable Set MyField2 = \"%@\" WHERE MyField1 = \"%@\"", @"Y", str2];
        if(sqlite3_prepare(db, [sql cStringUsingEncoding:NSASCIIStringEncoding], -1, &updateStmt, NULL) != SQLITE_OK)
            NSLog(@"Error while creating update statement. %s", sqlite3_errmsg(database));
    }
    if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK)        
    {
    int step = sqlite3_step(updateStmt);
    if(step != SQLITE_DONE)

        NSLog(@"Error while updating. %s", sqlite3_errmsg(database));  // THIS WHERE THE ERROR IS OCCURRING
    sqlite3_finalize(updateStmt);
    sqlite3_close(database);
    }
    else{
        NSLog(@"Error while Opening Databse. %s", sqlite3_errmsg(database));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:31:51.997

**MainBundle 是只读的**。您不能修改 Bundle 中的文件。

您需要将数据库文件复制到文档目录并需要从那里读取和写入。不是来自捆绑。

# html - 多个光标 - 这可能吗？

> ID：15200337
> 
> 赞同：2
> 
> 时间：2013-03-04T11:19:42.580
> 
> 标签：html, sublimetext2

我有这个结构

```
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div>
<div>test</div> 
```

所需的输出是

```
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<div>5</div>
<div>6</div>
<div>7</div>
<div>8</div>
<div>9</div>
<div>10</div> 
```

是否可以使用多个光标和一些快捷方式？

不要单独覆盖每一行。

谢谢

（使用 Emmet 插件很简单，但只有在准备新结构时，结构已经在上面定义了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:26:02.517

认为这个插件会做你想做的事

[https://bitbucket.org/markstahler/insert-nums](https://bitbucket.org/markstahler/insert-nums)

可通过包控制获得。搜索“插入数字”

我相信另一个插件会做你想做的事。

[https://github.com/duydao/Text-Pastry](https://github.com/duydao/Text-Pastry)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T13:39:14.860

在 Mac 上，您可以 CMD + 单击鼠标指针指向每个位置，您将有多个光标，但随后您一次编辑所有实例 == 相同的数字

# android - Android下Opera中的likebox高度

> ID：15200346
> 
> 赞同：0
> 
> 时间：2013-03-04T11:20:08.920
> 
> 标签：android, facebook, mobile, opera, facebook-likebox

我已经为我们的一个网页构建了 Likebox，它在大多数浏览器中运行良好，除了在 Adroid OS 下的 Opera 移动浏览器中（我没有在 iOS 下检查 Opera）。

likebox 包含流，在 Opera 移动浏览器中它不使用“溢出：隐藏”样式，它的流流过likebox 下的元素。 [http://a5.hu/auto/mercedes-benz-g63-amg-6x6-hatkerek-meghajtassal-video](http://a5.hu/auto/mercedes-benz-g63-amg-6x6-hatkerek-meghajtassal-video)（右面板，第 4-5 个框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T14:05:34.667

此问题已通过更新 Android 上的 Opera 浏览器得到解决。

# vba - 尝试打开工作簿并在该文件中运行宏

> ID：15200349
> 
> 赞同：5
> 
> 时间：2013-03-04T11:20:28.280
> 
> 标签：vba, excel

我有一个工作簿，它打开另一个工作簿（文件名基于单元格值），然后在该文件中运行一个名为 Single_sector 的宏。

它可以很好地打开文件，但不运行宏。有任何想法吗？

```
Sub run_all()
Dim Location

On Error Resume Next

'Location of file to open
 Location = Worksheets("Main").Range("folder_location").Value

'Open F&V File
Application.Workbooks.Open Location & Range("fv_file").Value
'Run Macro
Run ("Single_sector")

End Sub 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T14:06:00.710

将以下代码放在调用另一个工作簿的宏中：

```
Location = Worksheets("Main").Range("folder_location").Value
Set wb = Workbooks.Open(Location & Range("fv_file").Value)
Application.Run "'" & wb.Name & "'!" & strSubToRun, Parameters
Set wb = Nothing 
```

参数是您要传递的参数数组，因此其他工作簿中的子应类似于

```
Public Sub TheSub(ParamArray X())

Dim i As Long

Sheet1.Cells(1, 1).Value = "Parameters passed:"

For i = 0 To UBound(X(0))
    Sheet1.Cells(i + 2, 1).Value = CStr(X(i))
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-27T15:30:21.523

可能不是很优雅，但是：

```
Dim Location As String

Location = "\\location\to\file.xlsm"

Workbooks.Open(Location).RunAutoMacros (xlAutoOpen) 
```

您在其他 excel 文件中有一个 Auto_Open Sub 来处理要在其他电子表格上运行的宏

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T12:03:31.507

![在此处输入图像描述](../Images/e784af1963af47d1d69bc6ac553e772b.png)

请确保您在另一个工作簿中的代码在 Workbook_open 事件中，因此您不需要使用 Run ("Single_sector")。一旦另一个工作簿打开，程序 single_selector 就会触发。

更新的答案

```
Sub run_all()
    Dim Location

    On Error Resume Next

    Dim wkb As Workbook

    'Location of file to open
    Location = Worksheets("Main").Range("folder_location").Value

    'Open F&V File
    Set wkb = Workbooks.Open(Location & Range("fv_file").Value)
    wkb.Sheets(1).Single_sector ' kindly put this proc in another workbook sheet1

End Sub 
```

# javascript - jQuery的TextAreaExpander插件：知道浏览器的错误

> ID：15200352
> 
> 赞同：0
> 
> 时间：2013-03-04T11:20:45.527
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我使用插件在 javascript 或 Query 中编程两年。

现在我用我的插件打开了这个我的项目，用于扩展文本区域。

我在这句话上有这个新错误（用 Firebug 分析）。类型错误：$.browser 未定义

```
var hCheck = !($.browser.msie || $.browser.opera); 
```

为什么？

信息

```
/**
* TextAreaExpander plugin for jQuery
* v1.0
* Expands or contracts a textarea height depending on the
* quatity of content entered by the user in the box.
*
* By Craig Buckler, Optimalworks.net
*
* As featured on SitePoint.com:
* http://www.sitepoint.com/blogs/2009/07/29/build-auto-expanding-textarea-1/
*
* Please use as you wish at your own risk.
*/
/**
* Usage:
*
* From JavaScript, use:
* $(<node>).TextAreaExpander(<minHeight>, <maxHeight>);
* where:
* <node> is the DOM node selector, e.g. "textarea"
* <minHeight> is the minimum textarea height in pixels (optional)
* <maxHeight> is the maximum textarea height in pixels (optional)
*
* Alternatively, in you HTML:
* Assign a class of "expand" to any <textarea> tag.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand"></textarea>
*
* Or assign a class of "expandMIN-MAX" to set the <textarea> minimum and maximum height.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand50-200"></textarea>
* The textarea will use an appropriate height between 50 and 200 pixels.
*/
(function($) {
// jQuery plugin definition
$.fn.TextAreaExpander = function(minHeight=21, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera);
// resize a textarea
function ResizeTextarea(e) {
// event or initialize element?
e = e.target || e;
// find content length and box width
var vlen = e.value.length, ewidth = e.offsetWidth;
if (vlen != e.valLength || ewidth != e.boxWidth) {
if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth)) e.style.height = "0px";
var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax))+2;
e.style.overflow = (e.scrollHeight > h ? "auto" : "hidden");
e.style.height = h + "px";
e.valLength = vlen;
e.boxWidth = ewidth;
}
return true;
};
// initialize
this.each(function() {
// is a textarea?
if (this.nodeName.toLowerCase() != "textarea") return;
// set height restrictions
var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
this.expandMin = minHeight || (p ? parseInt('0'+p[1], 10) : 0);
this.expandMax = maxHeight || (p ? parseInt('0'+p[2], 10) : 99999);
// initial resize
ResizeTextarea(this);
// zero vertical padding and add events
if (!this.Initialized) {
this.Initialized = true;
$(this).css("padding-top", 0).css("padding-bottom", 0);
$(this).bind("keyup", ResizeTextarea).bind("focus", ResizeTextarea);
}
});
return this;
};
})(jQuery);
// initialize all expanding textareas
jQuery(document).ready(function() {
jQuery("textarea[class*=expand]").TextAreaExpander();
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:23:30.797

您使用的是哪个版本的 jQuery？[`jQuery.browser`](http://api.jquery.com/jQuery.browser/)已在 jQuery 1.3 中弃用并在 jQuery 1.9 中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:26:51.760

$.browser 已从 jQuery 1.9 中删除

暂时使用 jQuery migrate 来修复你的代码：

[http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)

然后使用特征检测重构

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:34:17.113

我解决了我的问题，我替换了这段代码：

```
 (function($) {
    // jQuery plugin definition
    $.fn.TextAreaExpander = function(minHeight, maxHeight) {
      minHeight=21;
    var nAgt=navigator.userAgent;
    var verOffset;
    var hCheck = !(jQuery.support.boxModel || (verOffset=nAgt.indexOf("Opera"))!=-1);
        // var hCheck = !($.browser.msie || $.browser.opera);
      // resize a textarea 
```

在（原图书馆）

```
(function($) {
// jQuery plugin definition
$.fn.TextAreaExpander = function(minHeight=21, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera); 
```

这是一个解决方案。

# magento - Magento：获取角色和用户

> ID：15200353
> 
> 赞同：6
> 
> 时间：2013-03-04T11:20:45.823
> 
> 标签：magento, magento-1.7, roles

如何获取所有角色（系统->权限->角色）和具有此角色的用户的集合？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T11:36:15.397

获取所有角色

```
 $roles = Mage::getModel('admin/roles')->getCollection();
       foreach($roles as $role):
          echo '<br/>Role : '.$role->getId()." | ".$role->getRoleName();
       endforeach; 
```

获取角色用户

```
 $roles_users = Mage::getResourceModel('admin/roles_user_collection');
      foreach($roles_users as $roleuser):
       $user = Mage::getModel('admin/user')->load($roleuser->getUserId());
       echo '<br/>User : '.$user->getUsername()." | ".$user->getFirstname();
      endforeach; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T17:17:44.107

您还可以使用此获取所有角色用户 ID

```
$roles = Mage::getModel('admin/roles')->load($roleId)->getRoleUsers(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T15:03:01.380

当我寻找一种方法来选择属于特定用户角色的所有管理员用户时，我遇到了这篇文章。（见[这个答案](https://stackoverflow.com/a/35926429/5409507)和[这个问题](https://magento.stackexchange.com/q/97947/24818)。）这里的问题可以被解读为亚历克斯想要每个角色的管理员用户。由于答案不按管理员角色排序，我想提供以下解决方案：

```
$usersByRole = array();
$adminRoles = Mage::getModel('admin/roles')->getCollection();
foreach($adminRoles as $adminRole) {
    $adminRoleId = $adminRole->getId(); 
    $adminRoleUserCollection = Mage::getModel('admin/role')->getCollection()
        ->addFieldToFilter('parent_id', ['eq'=>$adminRoleId])
        ->join(['user' => 'admin/user'], 'user.user_id=main_table.user_id');
    $usersByRole[$adminRole->getRoleName()] = $adminRoleUserCollection;
} 
```

# solr - Solr中的模糊属性搜索（模糊逻辑搜索）

> ID：15200356
> 
> 赞同：1
> 
> 时间：2013-03-04T11:20:54.230
> 
> 标签：solr, information-retrieval, fuzzy-search, fuzzy-logic

我希望能够提交这样的查询：

```
car AND (color:blue AND price:[* TO 10000] AND model:Toyota) 
```

并检索这样的结果（假设这些是最相关的结果）：

```
{name : "An old car", color: "blue", price: "6000", model : "Toyota"}
{name : "An old car", color: "red", price: "5000", model : "Toyota"}
{name : "Another old car", color: "blue", price: "9000", model : "Volvo"}
{name : "Another old car", color: "white", price: "11000", model : "Toyota"} 
```

换句话说，模糊搜索，但不是在字符串级别，而是在“分面级别”。我希望它能够正常工作，以使符合所有要求的文章始终排在首位，但仍能检索到仅与子集匹配的文章。

Solr 或任何其他搜索框架是否支持此功能？例如，我可以使用查询提升来完成此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:18:40.553

我相信可以通过像这样修改查询来完成（为可读性添加了换行符）；虽然我不确定 boost 语法：

```
(car AND (color:blue^0.9 OR color:[* TO *]^0.1) 
     AND (price:[* TO 10000]^0.9 OR price:[* TO *]^0.1) 
     AND (model:Toyota^0.9 OR model:[* TO *]^0.1)) 
```

### 编辑：

这个解决方案似乎完全符合我在实施中的预期。虽然我添加了首选属性的权重。^1000 似乎给了他们足够的权重来赢得非首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:02:58.393

如果您使用的是 url 查询，例如在管理前端，查询如下所示：

```
q=car&fq=color:blue&fq=price:[* TO 10000]&fq=model:Toyota 
```

或者，对于你的例子来说，它是

```
q=*&fq=name:car&fq=color:blue&fq=price:[* TO 10000]&fq=model:Toyota 
```

现在结果取决于可以在 schema.xml 中配置的配置逻辑运算符，默认运算符是 AND，请参见此处：

[架构文档](http://wiki.apache.org/solr/SchemaXml#Default_query_parser_operator)

对于单个字段，filterquery 就像 java 中的 String.contains() 函数。

# c# - Web 服务错误：命名空间中的 XML 元素“配置文件”...引用方法和类型

> ID：15200361
> 
> 赞同：0
> 
> 时间：2013-03-04T11:21:06.517
> 
> 标签：c#, web-services, soap, wsdl

我有一个使用 svcutils 生成的 Web 服务代理，使用 Web 服务时出现错误

**[命名空间“ http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18](http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18) ”中的 XML 元素“Profile”引用了一个方法和一个类型。使用 WebMethodAttribute 更改方法的消息名称或使用 XmlRootAttribute 更改类型的根元素。"**

在生成代码中有两个“配置文件”出现：

```
 [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]

/*** HERE IT IS ****/

    [System.ServiceModel.MessageContractAttribute(WrapperName="Profile", WrapperNamespace="http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18", IsWrapped=true)]
    public partial class getProfileResponse
    {    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18", Order=0)]
        [System.Xml.Serialization.XmlElementAttribute("ApplicationProfile")]
        public ApplicationProfile[] ApplicationProfile;

        public getProfileResponse()
        {
        }

        public getProfileResponse(ApplicationProfile[] ApplicationProfile)
        {
            this.ApplicationProfile = ApplicationProfile;
        }
    }

.......

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]

/*** HERE IT IS ****/
    [System.ServiceModel.MessageContractAttribute(WrapperName="Profile", WrapperNamespace="http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18", IsWrapped=true)]

    public partial class getMobileProfileResponse
    {  [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18", Order=0)]
        [System.Xml.Serialization.XmlElementAttribute("ApplicationProfile")]
        public ApplicationProfile[] ApplicationProfile;

        public getMobileProfileResponse()
        {
        }

        public getMobileProfileResponse(ApplicationProfile[] ApplicationProfile)
        {
            this.ApplicationProfile = ApplicationProfile;
        }
    } 
```

更改第一个“配置文件”出现的名称空间：“ [http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18](http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18) ”

至

“ [http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18TEST](http://schemas.soa.tretretre.it/Architettura/ProfilingSchema/2012-09-18TEST) ”

解决问题。

我无权访问这些服务，而且我对 Web 服务了解不多。你能解释一下服务器端可能会产生什么样的问题吗？我的意思是什么样的类/对象定义.. 我知道这是某种名称冲突，但我想要一个清晰的例子或解释......

# java - 何时在 Java 中使用单一方法接口

> ID：15200362
> 
> 赞同：24
> 
> 时间：2013-03-04T11:21:21.437
> 
> 标签：java, oop, design-patterns, interface

我在许多库中看到过，`Spring`它们使用了很多接口，其中包含**单个方法**，例如`BeanNameAware`等。

实现者类将使用单一方法实现许多接口。

在什么情况下保留单一方法接口是有意义的？例如，是否这样做是为了避免使单个接口变得笨重`ResultSet`？或者是否有一些设计标准提倡使用这些类型的接口？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T11:43:28.630

在 Java 8 中，保持单一方法接口非常有用，因为单一方法接口将允许使用闭包和“函数指针”。因此，每当您的代码针对单个方法接口编写时，客户端代码可能会提交一个闭包或一个方法（它必须与在单个方法接口中声明的方法具有兼容的签名），而不必创建一个匿名类。相反，如果你用多个方法制作一个接口，客户端代码就不会有这种可能性。它必须始终使用实现接口所有方法的类。

因此，作为一个通用准则，可以说：如果只向客户端代码公开单个方法的类可能对某些客户端有用，那么为该方法使用单个方法接口是一个好主意。一个反例是`Iterator`接口：在这里，只有一个`next()`方法没有`hasNext()`方法是没有用的。由于拥有一个只实现这些方法之一的类是没有用的，因此在这里拆分这个接口不是一个好主意。

例子：

```
interface SingleMethod{ //The single method interface
    void foo(int i);
}

class X implements SingleMethod { //A class implementing it (and probably other ones)
    void foo(int i){...}
}

class Y { //An unrelated class that has methods with matching signature
    void bar(int i){...}
    static void bar2(int i){...}
}

class Framework{ // A framework that uses the interface
    //Takes a single method object and does something with it
    //(probably invoking the method)
    void consume(SingleMethod m){...}
}

class Client{ //Client code that uses the framework
    Framework f = ...;
    X x = new X();
    Y y = new Y();
    f.consume(x); //Fine, also in Java 7

    //Java 8
    //ALL these calls are only possible since SingleMethod has only ONE method!
    f.consume(y::bar); //Simply hand in a method. Object y is bound implicitly
    f.consume(Y::bar2); //Static methods are fine, too
    f.consume(i -> { System.out.println(i); }) //lambda expression. Super concise.

    //This is the only way if the interface has MORE THAN ONE method:
    //Calling Y.bar2 Without that closure stuff (super verbose)
    f.consume(new SingleMethod(){
         @Override void foo(int i){ Y.bar2(i); }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T11:24:36.590

只有一个（或几个）方法的接口是非常有用的[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)的关键，它是“一些提倡使用这些类型接口的设计标准”。

另一个常见的场景是当您需要回调时。Foo 将 Bar 作为异步任务调用，当 Bar 完成某些操作时，使用回调将结果发送回 Foo——它可以是只包含一个方法的接口。（这方面的一个例子是 Android 中的许多监听器，Swing 中的事件监听器......）

此外，如果您有两个彼此紧密耦合的类（我们称它们为 Foo 和 Bar）。Foo 几乎使用了 Bar 的所有方法，但 Bar 只需要 Foo 中的一些方法。Foo 可以实现`FooInterface`，然后将其发送到 Bar。现在耦合更松了，因为 Bar 只知道 FooInterface，而不关心实现类包含的其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:35:58.610

> 在什么情况下保留单一方法接口是有意义的？

在这种情况下，您需要一个只有一种方法的接口。

接口用于封装几个类的共同行为。因此，如果您的代码中有几个地方只需要调用有限的类方法集，那么是时候引入一个接口了。方法的数量取决于您究竟需要调用什么。有时你需要[一种](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)方法，有时[两种](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Delayed.html)或[更多](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)，有时你[根本不需要方法](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)。重要的是您可以将行为与实现分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:47:30.643

`Favor Composition over Inheritance``Head First Design Pattern`本书教程推荐这种方法来动态地向类添加功能。让我们看下面的案例：

```
public interface Quackable {
   public void quack();
} 

public class Quacks implements Quackable {
   public void quack(){
       //quack behavior
   }
}

public class DontQuack implements Quackable {
     public void quack(){
         //dont quack
    }
}

public class QuackableDuck{
    Quackable quack;  //add behavior dynamicall

} 
```

所以 QuackableDuck 类可以动态添加特征。

```
 quack = new Quacks();
   //or 
   quack = new DontQuack(); 
```

因此，类似地，您可以动态地向类添加多个行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-21T06:50:21.953

您创建接口不是根据其中的方法数量，而是定义系统组件所期望的行为，以将单一职责交付给它们的邻居。如果您遵循这个简单的原则/规则，您可能会或可能不会最终获得单一方法接口，具体取决于您定义的职责。我喜欢让测试变得简单，应用程序非常灵活，所以我通常有很多这样的

# ruby-on-rails - Rails 模型中的收集方法出现错误 NoMethodError: undefined method `collect'

> ID：15200363
> 
> 赞同：0
> 
> 时间：2013-03-04T11:21:21.623
> 
> 标签：ruby-on-rails, ruby

我无法将方法应用于模型中的集合。这是我的模型的样子：

```
class MyModel < ActiveRecord::Base
  def self.range(min, max)
    where(id: min..max)
  end

  def self.my_collection_method
    collect{|x| x.id}
  end
end 
```

这有效：

```
MyModel.range(53, 55)
# [#<MyModel id: 53>, #<MyModel id: 54>] 
```

这有效：

```
MyModel.range(53, 55).collect{|x| x.id}
# [53, 54] 
```

但是当我尝试花哨并使用*my_collection_method*而不是*collect*时，我收到了这个错误：

```
MyModel.range(53, 55).my_collection_method
# NoMethodError: undefined method `collect' for #<Class:0x007fcbad3efc30> 
```

我怎样才能让它工作？

感谢您的时间和智慧！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:28:57.807

我不知道您要实现什么，但是当您首先调用 scoped 时应该能够使用它

```
def self.my_collection_method
  scoped.collect {|x| x.id}
end 
```

没有`scoped`，你试图调用`self.collect`which 不是`ActiveRecord`模型的方法。在`scoped`那里意味着你想申请`collect`当前链。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:28:16.613

您`my_collection_method`在模型上定义，而不是在集合上定义 - 它们是单独的类。您通常可以在模型方法中实现您想要做的事情：

```
class MyModel < ActiveRecord::Base
  def self.range(min, max)
    where(id: min..max)
  end

  def self.my_collection_method(min, max)
    range(min, max).collect{|x| x.id}
  end
end 
```

唯一的另一种方法是动态附加一个方法到集合中，但这会非常难看。

# tfs - 某些用户可以看到 TFS 更改，但不是全部

> ID：15200371
> 
> 赞同：1
> 
> 时间：2013-03-04T11:21:40.050
> 
> 标签：tfs

这可能是一些缓存问题，但我不知道如何解决它。我们有 TFS 2010 和一些具有相同权限级别的人看到最近的更改但其他人没有看到的情况（我已经检查了 10 倍的权限，我 100% 确定他们拥有完全相同的权限）。

更具体地说 - 当我（管理员帐户）向其中一个项目添加新迭代时，这种情况发生了好几次。项目内部的一些人可以看到更改，但其他人看不到。

任何想法如何处理这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:24:53.820

我们多次遇到同样的问题，我们总是设法通过删除 TFS 服务器本身上的应用程序缓存来成功解决它。

刚到 TFS 应用程序层上的 TFS 安装文件夹并找到文件夹

C:\Program Files\Microsoft Team Foundation Server 2010\Application Tier\Web Services_tfs_data 。在此文件夹中，您会找到类似于“cde96d50-b143-4a28-b280-1cd24fa95525”的文件夹 - 继续删除该文件夹。这是 TFS 保存其缓存的应用程序数据的地方。

# qt - 在 Qt 中执行 ffmpeg 以裁剪音频

> ID：15200373
> 
> 赞同：1
> 
> 时间：2013-03-04T11:21:50.750
> 
> 标签：qt, audio, ffmpeg

我想创建一个可用于使用 Qt 裁剪音频文件的应用程序。我已经通过命令行成功运行 ffmpeg 来使用以下命令执行此操作：

```
ffmpeg -t 30 -i C:\\test.mp3 -acodec copy C:\\test2.mp3 
```

然后我尝试使用 Qt 执行此操作，下面的代码似乎可以工作，但我找不到输出文件（test2.mp3）。

```
QProcess* process=new QProcess(this);
process->start("FFmpeg-N-49957-g8c95d17\\ffmpeg.exe",QStringList()<<"-t 30 -i C:\\test.mp3 -acodec copy C:\\test2.mp3"); 
```

我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:30:38.023

我认为，您忘记添加“waitForFinished()”行，它只是没有时间完成您的任务

```
QProcess process;
process.start("ffmpeg -t 30 -i C:\\test.mp3 -acodec copy C:\\test2.mp3");
process.waitForFinished();
process.close(); 
```

# javascript - Javascript随机搞砸了？（javascript数学）

> ID：15200379
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:22:10.010
> 
> 标签：javascript, math, decimal

嘿伙计们，我有这段 javascript 用于添加硬币。它可以完美运行，直到您尝试添加某个硬币列表，此时它会出错并给您一个循环小数......列表是：0.20，y，0.50，y，0.10，n。这应该全部加起来 0.80 但返回 0.799999999r

```
var loopcount = 0;
var outnum = 0;
var innum = 0;
var coin = 0;
var total = 0;

while(loopcount < 1){
    coin = prompt("please type the value of a coin", 0);
    var total = total *1 + coin *1 ;
    cont = prompt("do you wish to continue? (type y to continue or n to stop and get the total)")
    if(cont == "y"){
        loopcount = 0;
    }
    else{
        loopcount = 1;
        alert("the total is: " + total);
    }
} 
```

只需一个圆形函数即可轻松修复，但我想知道是否有人可以指出为什么它可能首先会这样做，这将是很棒的。

# android - 服务器注册中的Android Google Cloud消息传递问题？

> ID：15200382
> 
> 赞同：0
> 
> 时间：2013-03-04T11:22:14.177
> 
> 标签：android, google-cloud-messaging

我试图运行 GCM 示例应用程序，但在我的 logcat 中遇到致命异常（我的应用程序被迫关闭）这表明服务器 URL 链接是无效的 URL。如果我运行我的 URL 链接，它会显示“未注册设备”。如果无效的 URL 表示它正确显示错误，但显示“未注册设备”。所以我很困惑。为什么我面临这个问题。

日志猫：

```
03-04 16:28:11.691: E/AndroidRuntime(770): FATAL EXCEPTION: AsyncTask #1
03-04 16:28:11.691: E/AndroidRuntime(770): java.lang.RuntimeException: An error occured while executing doInBackground()
03-04 16:28:11.691: E/AndroidRuntime(770):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-04 16:28:11.691: E/AndroidRuntime(770):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.lang.Thread.run(Thread.java:856)
03-04 16:28:11.691: E/AndroidRuntime(770): Caused by: java.lang.IllegalArgumentException: invalid url: 192.168.1.2:8080/home/register
03-04 16:28:11.691: E/AndroidRuntime(770):  at com.google.android.gcm.demo.app.ServerUtilities.post(ServerUtilities.java:138)
03-04 16:28:11.691: E/AndroidRuntime(770):  at com.google.android.gcm.demo.app.ServerUtilities.register(ServerUtilities.java:66)
03-04 16:28:11.691: E/AndroidRuntime(770):  at com.google.android.gcm.demo.app.DemoActivity$2.doInBackground(DemoActivity.java:88)
03-04 16:28:11.691: E/AndroidRuntime(770):  at com.google.android.gcm.demo.app.DemoActivity$2.doInBackground(DemoActivity.java:1)
03-04 16:28:11.691: E/AndroidRuntime(770):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-04 16:28:11.691: E/AndroidRuntime(770):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-04 16:28:11.691: E/AndroidRuntime(770):  ... 5 more 
```

代码： http: [//paste.org/62112](http://paste.org/62112)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:24:53.693

这是“无效的网址：192.168.1.2:8080/home/register”的原因......看来您还没有将代码上传到网络服务器。您必须上传服务器代码 Live 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:13:15.660

您的设备尚未注册，因为给定的服务器 url 是错误的。请检查并提供有效的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:41:07.763

请记住，这里的方法`ServerUtilities.register(..)`是静态的，并将 RegId 作为参数并将此 Id 注册到服务器。您将不得不在此方法中执行代码，就像我们使用 GET 或 POST 方法将任何字符串发布到我们的服务器一样：

执行代码后，您的方法如下所示：

```
static boolean register(final Context context, final String regId) {

        String URL = CommonUtilities.SERVER_URL+"&device=" + regId;

        Log.v("URL : ", URL);
        JSONObject json = fetchTwitterPublicTimeline(URL);

        try {
            Log.i("Json : ", json.toString());
            String login_msg = json.getString("MESSAGE");
            Log.i("Reply : ", login_msg);
        } catch (Exception e) {

        }
} 
```

# javascript - CompoundJS 和护照支持

> ID：15200383
> 
> 赞同：0
> 
> 时间：2013-03-04T11:22:17.563
> 
> 标签：javascript, node.js, oauth, passport.js, compoundjs

我正面临复合护照的这个问题。我已经按照指南中的步骤进行操作，但是当我尝试访问 /auth/github 时无法正常工作。

有小费吗？

```
GET /auth/github controller: auth action: github
Params: {"controller":"auth","action":"github"}
>>>  perform github
Error: Undefined action auth#github(/auth/github)
at Object.FlowControl.call.context.innerNext (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:67:27)
at Array.FlowControl.call.collection.forEach.queue.push.ctl.context.inAction [as 1] (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:139:28)
at run (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:102:27)
at Array.FlowControl.call.action [as 0] (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:60:13)
at run (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:102:27)
at FlowControl.call.compiledAction.(anonymous function) (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:90:9)
at Controller.call (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:49:16)
at Controller.call (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:93:10)
at Controller.perform (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/node_modules/kontroller/lib/flow-control.js:18:10)
at ControllerBrigde.callControllerAction (/Users/javiermanzanomorilla/Development/workspace/authapp/node_modules/compound/lib/controller-bridge.js:95:9) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:21:53.590

我认为你还没有初始化护照。

如果您使用的是复合护照，则必须通过调用 config/environment 中的 init 函数来对其进行初始化。

```
 var pass_connect=require('compound-passport');
     app.configure(function(){
     ....

   //init the compound passport
    pass_connect.init(compound);

    app.use(app.router);
 }); 
```

如果你想手动初始化它，你必须调用这两个方法：

```
 var passport=require('passport');    
 var Strategy = require('passport-github').Strategy;
    passport.use(new Strategy({
    clientID: conf.github.clientID,
    clientSecret: conf.github.secret,
    callbackURL: conf.baseURL + 'auth/github/callback'
}, exports.callback));

app.get('/auth/github',
    passport.authenticate('github'));
app.get('/auth/github/callback',
    passport.authenticate('github', { failureRedirect: '/' }),
    exports.redirectOnSuccess); 
```

对不起我的英语不好。

# backup - 是否可以使用 rsync 进行备份，遵循根符号链接，但保留其余的符号链接？

> ID：15200384
> 
> 赞同：2
> 
> 时间：2013-03-04T11:22:18.923
> 
> 标签：backup, rsync

我正在使用 rsync 设置备份。我想使用指向它的符号链接指定根源目录，但对于归档树的其余部分，我想保留符号链接。

此外，我想将符号链接名称保留为备份存档中的根。

这种设置的原因（可能非常聪明，也可能不是非常聪明）是源是一个版本化的应用程序，其中版本号会随着时间的推移而增加。我只想备份最新版本，我希望 rsync 从备份存档中删除旧文件。

示例来源：

```
source_symlink -> source-1.2.3
source-1.2.3/
  file1.txt
  dirA/
    fileA.txt
  symlink_fileA -> dirA/fileA.txt 
```

如果我尝试用

```
rsync -av --delete source_symlink destination_dir 
```

我只是在目的地中获得了符号链接的副本；像这样：

```
destination_dir/
  source_symlink -> source-1.2.3 
```

即指向不存在目录的符号链接。

如果我自己解决符号链接，例如这样：

```
rsync -av --delete $(readlink -f source_symlink) destination_dir 
```

我得到以下信息：

```
destination_dir/
  source-1.2.3/
    file1.txt
    dirA/
      fileA.txt
    symlink_fileA -> dirA/fileA.txt 
```

在我将符号链接更改为例如下一个版本之前，这是可以的；例如`source_symlink -> source-2.0.0`。在这种情况下，我最终会在存档中出现重复项：

```
destination_dir/
  source-1.2.3/
  source-2.0.0/ 
```

我想要的是根符号链接被遵循，但其余的符号链接被保留。此外，我想在目标目录中有符号链接名称。像这样：

```
destination_dir/
  source/
    file1.txt
    dirA/
      fileA.txt
    symlink_fileA -> dirA/fileA.txt 
```

这有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T01:39:58.800

You might want to try exploding the -a option and omitting the "l".

So instead of -av you would have -rptgoDv.

From the documentation:

```
-l, --links                 copy symlinks as symlinks 
```

# c# - 如何重构Parallel的使用

> ID：15200392
> 
> 赞同：1
> 
> 时间：2013-03-04T11:22:43.143
> 
> 标签：c#, design-patterns, task-parallel-library

在我们的代码库中，我们有很多其他方法，它们基本上只是管道，看起来像这样：

```
 public void Execute()
    {
        _performanceLogger.Log("Start");

        var chunks = GetChunksToWorkOn();

        Parallel.ForEach(chunks , chunk =>
        {
            using (var container = ObjectFactory.Container.GetNestedContainer())
            {
                using (var unitOfWork = new UnitOfWork())
                {
                    container.GetInstance<Worker>().Execute(chunk);
                    unitOfWork.Commit();
                }
            }
        });

        _performanceLogger.Log("Done");
    } 
```

我正在考虑创建一个模板方法来替换这些调用，如下所示：

```
public interface IProcessInParallel
{
    void Execute<T>(Func<IEnumerable<IEnumerable<object>>> funcToRetrieveChunksOfWorkForEachParallelProcess) where T : IProcessInParallelTask;
}

public interface IProcessInParallelTask
{
    void DoWork(IEnumerable<object> objects);
}

public class ProcessInParallel : IProcessInParallel
{
    private readonly IPerformanceLogger _performanceLogger;

    public ProcessInParallel(IPerformanceLogger performanceLogger)
    {
        _performanceLogger = performanceLogger;
    }

    public void Execute<T>(Func<IEnumerable<IEnumerable<object>>> funcToRetrieveChunksOfWorkForEachParallelProcess) where T : IProcessInParallelTask
    {
        _performanceLogger.Log("Start");

        var chunks = funcToRetrieveChunksOfWorkForEachParallelProcess.Invoke();

        Parallel.ForEach(chunks, chunk =>
        {
            using (var container = ObjectFactory.Container.GetNestedContainer())
            {
                using (var unitOfWork = new UnitOfWork())
                {
                    container.GetInstance<T>().DoWork(chunk);
                    unitOfWork.Commit();
                }
            }
        });

        _performanceLogger.Log("Done");
    }
} 
```

这种方法的唯一问题是它使用了对象......这是丑陋的不安全并导致演员表。

我正在浏览我的模式书，但还没有找到正确的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:06:41.130

您可以为您的*块*对象定义一个接口，并使用它来代替`object`：

```
public interface IChunk
{
    // whatever
}

public interface IProcessInParallel
{
    void Execute<T>(Func<IEnumerable<IEnumerable<IChunk>>> getChunks) where T : IProcessInParallelTask;
} 
```

然后您可以传递任何带有签名的方法，例如：

```
IEnumerable<IEnumerable<RealChunk>> GetRealChunks()
{
    //...
} 
```

哪里`RealChunk`是一个实现`IChunk`. 这是可能的，[这要归功于 C# 4 变体特性](http://msdn.microsoft.com/en-us/library/ee207183.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:19:44.500

你的课是一个好的开始。您可以通过用泛型和委托替换继承来使其更轻量级。

1.  您更改`T`为`TChunk`（更准确的命名）
2.  块工厂应该是类型`Func<TChunk>`
3.  您需要一个代表在块上执行的工作的委托：`Action<IContainer, container>`

```
public void Execute<TChunk>(var _performanceLogger, Func<TChunk> getChunks, Action<IContainer, container> doWork)
    {
        _performanceLogger.Log("Start");

        var chunks = getChunks();

        Parallel.ForEach(chunks, chunk =>
        {
            using (var container = ObjectFactory.Container.GetNestedContainer())
            {
                using (var unitOfWork = new UnitOfWork())
                {
                    doWork(container, chunk);
                    unitOfWork.Commit();
                }
            }
        });

        _performanceLogger.Log("Done");
    }
}

Execute<IEnumerable<object>>(
    logger,
    () => GetChunksToWorkOn(),
    (container, chunk) => container.GetInstance<Worker>().DoWork(chunk)); 
```

对此的变化当然是可能的。请注意，我们不依赖于继承。无论如何，接口在逻辑上只不过是功能包。

通过`container.GetInstance<Worker>()`引入 lambda，我们节省了一个泛型类型参数并使我们的辅助方法更轻量级。这是一个权衡，也可以通过其他方式完成。

# java - REST API 响应

> ID：15200394
> 
> 赞同：0
> 
> 时间：2013-03-04T11:22:51.180
> 
> 标签：java, rest, jaxb, jax-rs

我正在创建宁静的网络服务。我需要将 GET 方法的响应作为站点 ID 为 1 的所有类别的列表。当我运行以下代码时，它不会给出错误

```
@GET
    @Produces("application/json")
    @Path("/bysite/{siteId}")
    public List<Category>getSubCategoryBySite(@PathParam("siteId") String siteId) {
       List<Category> categoryList = categoryFacade.retrieveCategory(Integer.parseInt(siteId));
        ParentCleaner parentCleaner=new ParentCleaner();
        Site site=parentCleaner.getEmptySite();
        for(int i=0;i<categoryList.size();i++)
        {
            site.setSiteId(categoryList.get(i).getSiteId().getSiteId());
            categoryList.get(i).setSiteId(site);            
        }
        return categoryList;
    } 
```

但是当我运行以下代码时

```
 @GET
        @Produces("application/json")
        @Path("/bysite/{siteId}")
        public Response getSubCategoryBySite(@PathParam("siteId") String siteId) {
           List<Category> categoryList = categoryFacade.retrieveCategory(Integer.parseInt(siteId));
            ParentCleaner parentCleaner=new ParentCleaner();
            Site site=parentCleaner.getEmptySite();
            for(int i=0;i<categoryList.size();i++)
            {
                site.setSiteId(categoryList.get(i).getSiteId().getSiteId());
                categoryList.get(i).setSiteId(site);            
            }
            return Response.status(200).type(MediaType.APPLICATION_JSON).entity(categoryList).build();
        } 
```

它给出了以下错误

```
SEVERE: A message body writer for Java class java.util.Vector, and Java type class java.util.Vector, and MIME media type application/json was not found
SEVERE: The registered message body writers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONWithPaddingProvider
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
  com.sun.jersey.moxy.MoxyMessageBodyWorker
  com.sun.jersey.moxy.MoxyListMessageBodyWorker

SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.Vector, and Java type class java.util.Vector, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.Vector, and Java type class java.util.Vector, and MIME media type application/json was not found
    ... 32 more 
```

# java - 在尚未完成复制/上传时读取文件内容

> ID：15200396
> 
> 赞同：3
> 
> 时间：2013-03-04T11:22:53.563
> 
> 标签：java, file, concurrency

每 5 秒（例如），服务器会检查文件是否已添加到特定目录。如果是，它会读取并处理它们。相关文件可能很大（例如 100+ Mo），因此将它们复制/上传到所述目录可能会很长。

如果服务器尝试访问尚未完成复制/上传的文件怎么办？JAVA 如何管理这些并发访问？它是否取决于服务器的操作系统？

* * *

我试了一下，将一个~1300000 行的TXT 文件（即大约200 Mo）从远程服务器复制到我的本地计算机：大约需要5 秒。在此期间，我运行以下 JAVA 类：

```
public static void main(String[] args) throws Exception {

    String local = "C:\\large.txt";

    BufferedReader reader = new BufferedReader(new FileReader(local));
    int lines = 0;
    while (reader.readLine() != null)
        lines++;
    reader.close();

    System.out.println(lines + " lines");

} 
```

我得到以下异常：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:515)
    at java.lang.StringBuffer.append(StringBuffer.java:306)
    at java.io.BufferedReader.readLine(BufferedReader.java:345)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at main.Main.main(Main.java:15) 
```

在文件复制完成后运行该类时，我得到了预期的输出（即`1229761 lines`），因此异常不是由于文件的大小（正如我们首先想到的那样）。JAVA 在后台做什么，引发了这个`OutOfMemoryError`异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:46:58.663

> > JAVA 如何管理这些并发访问？它是否取决于服务器的操作系统？

这取决于特定的操作系统。如果您在单个 JVM [AsynchronousFileChannel（1.7 中的新功能）](http://openjdk.java.net/projects/nio/javadoc/java/nio/channels/AsynchronousFileChannel.html)类中运行副本和服务器，可能会有很大帮助。但是，如果客户端和服务器由不同的 JVM 表示（甚至更多，在不同的机器上启动），这一切都变成了特定于平台的。

来自[AsynchronousFileChannel 的 JavaDoc：](http://openjdk.java.net/projects/nio/javadoc/java/nio/channels/AsynchronousFileChannel.html)

> > 与 FileChannel 一样，此类实例提供的文件视图保证与同一程序中其他实例提供的同一文件的其他视图一致。但是，由于底层操作系统执行的缓存和网络文件系统协议引起的延迟，此类实例提供的视图**可能与其他并发运行的程序看到的视图一致，也可能不一致**。无论这些其他程序是用什么语言编写的，也不管它们是在同一台机器上还是在其他机器上运行，这都是正确的。任何此类不一致的确切性质取决于系统，因此未指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:08:15.940

你为什么使用缓冲阅读器来计算行数？

来自 javadoc：从字符输入流中读取文本，缓冲字符，以便高效读取字符、数组和行。

这意味着它将“缓冲”，即。保存，内存中的整个文件会导致您的堆栈转储。试试 FileReader。

# delphi - Delphi 缺少 Brh_Telapi_Tlb.dcu

> ID：15200398
> 
> 赞同：2
> 
> 时间：2013-03-04T11:22:55.970
> 
> 标签：delphi, delphi-7

编译 Delphi 应用程序时出现错误

**[致命错误] UnitModuleU.pas(9)：找不到文件：'Brh_Telapi_TLB.dcu'**

我检查了我的系统，但找不到任何与之相关的 .dcu 文件或 .pas 文件。有什么解决方案可以纠正此错误。我正在使用 Baraha 软件，因为此错误与该软件有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:37:48.680

brh_Telapi 是 ActiveX 控件的名称。如果您在开发环境中安装了该软件，则通过“导入 activeX 控件”选项导入 Baraha activeX 控件。Brh_Telapi_TLB.pas 将自动生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:52:54.810

`Brh_Telapi_TLB`不是标准的 Delphi 单元之一，因此它必须来自您正在使用的第三方组件。鉴于 start `Brh`，它似乎很可能是其中一个`Baraha`文件。您需要在重新安装软件时找到该文件的副本，或联系软件供应商获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:30:40.683

`UnitModuleU.pas`**文件从已编译的单元文件** 中调用函数`'Brh_Telapi_TLB.dcu'`。没有这个文件就不可能编译那个项目。您应该将此文件放在您的库路径之一。

# spring - 在自定义 LogoutHandler Spring MVC 中拉取 userDetails

> ID：15200402
> 
> 赞同：0
> 
> 时间：2013-03-04T11:23:06.553
> 
> 标签：spring, session, spring-mvc, spring-security, logout

在 MyLogoutHandler 类中，我确实覆盖了 determineTargetUrl() 方法，在这里我正在调用`MyUserDetials userDetails = (MyUserDetials)userContextManager.getUserDetails()`，但 userDetails 为空。

这是配置：

```
<security:logout  
invalidate-session="true"
success-handler-ref="MyLogoutHandler"
logout-url="/auth/logout"/> 
```

我注意到，由于 invalidate-session="true"，它为空？但我喜欢保持这个属性“真实”，我可以有任何其他方式来配置吗？

我的目标是：我需要从 userDetails 中提取一些信息，以便在用户单击注销后进行 Web 服务调用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:07:28.123

我解决了这个问题。我创建了 My Own Handler 并覆盖了：

```
public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {...} 
```

的方法`*SimpleUrlLogoutSuccessHandler*`。现在我可以`*authentication*`根据我的 spring 配置获取对象。

谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:12:14.463

您需要创建自己的[LogoutHandler](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/logout/LogoutHandler.html)，实现

```
 void logout(HttpServletRequest request, HttpServletResponse response, Authentication authentication); 
```

将它的实现添加到`security:logout`标签。从`authentication`参数获取用户详细信息后。

# mongodb - 在 Meteor 中在哪里扩展带有计算字段的集合文档？

> ID：15200403
> 
> 赞同：3
> 
> 时间：2013-03-04T11:23:09.877
> 
> 标签：mongodb, meteor, database

我们有我们需要的关于客户的信息，这些信息是在文档上计算的。例如，数组中的条目数。

更实际的是，我们有一个文档*Workshop*，其中包含一系列*参与者*（用户的 _id）。现在我们想要*Workshop.numberOfParticipants()*。

不需要将整个数组传输给客户端，那么这个值在哪里计算呢？是否可以将此值作为其他数据的字段添加到文档“研讨会”中？

我喜欢绕过 Template.workshop.numberOfParticipants() 的生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:51:25.643

未来的一种选择是 MongoDB 奇怪的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)。针对`aggregate`API 编写的查询可以返回带有计算字段的文档。

Meteor 核心还不支持聚合查询，但它在愿望清单上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:34:14.637

您需要发布一组名为 NumParticipants 的文档，然后添加一个观察者，该观察者在`count`添加文档时更新属性或类似内容（并且在删除文档时同样减少该属性）。

[发布文档中](http://docs.meteor.com/#meteor_publish)描述了如何执行此操作的示例。

# html - 在布局中显示无效的 HTML

> ID：15200404
> 
> 赞同：1
> 
> 时间：2013-03-04T11:23:13.303
> 
> 标签：html, ruby, xml, latexml

不知道如何标记这个问题。我有一个由 LaTeXMLpost 转换的 XHTML 文档数据库；但是，说他们有验证问题是轻描淡写的。我需要在浏览器中显示它们。但是，由于无效标记而导致的标签自动关闭会打乱我的结构。

一个最小的例子：

```
<!doctype html>
<html>
  <head>
    <title>test</title>
  </head>
  <body>
    <div id="content" style="background-color:pink">
      <!-- yield -->

      <section >
        <ul>
          <li>
            <div>
              <p>
                First
                <li>
                  <div>
                    <p>
                      Second
                    </p>
                  </div>
                </li>
              </p>
            </div>
          </li>
        </ul>
      </section>
      <section>
        Next
      </section>

      <!-- end yield -->
    </div><!-- end content -->
  </body>
</html> 
```

[jsfiddle](http://jsfiddle.net/ytFXd/2/)

评论之外的一切都是布局；它里面是加载的文档。如果从表面上看，一切都应该是粉红色的，对吧？

问题是，“Next”在`#content`. 即使它是有效的 XML，它也不符合 HTML/XHTML DTD（或 HTML5 中的任何 DTD 传递），因此它被破坏了。

问题是：*如何保护我的布局免受其中无效标记的影响？*我可以对内容做些什么来使其正常化吗？我在显示之前将其加载到 Nokogiri 中，但无论如何我仍然会陷入这种混乱（因为 XML 没有格式错误，我想，Nokogiri 对此没有做任何事情）。

我不在乎它是否显示得很好，我现在只关心它是否安全地被包含（否则我在操作它、附加事件、样式以及几乎所有其他东西时都会遇到麻烦）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:54:25.490

你可以试试 Nokogiri，它有一些修复无效标记的内置功能。

相关问题：[Repairing invalid HTML with Nokogiri (removing invalid tags)](https://stackoverflow.com/questions/11557510/repairing-invalid-html-with-nokogiri-removing-invalid-tags)

# javascript - 未触发 Dragstart

> ID：15200410
> 
> 赞同：0
> 
> 时间：2013-03-04T11:23:34.417
> 
> 标签：javascript, drag-and-drop

我动态创建了一个附加到我的 DOM 结构的图像：

```
var thumb = document.createElement("img");
            thumb.draggable = "true";
            thumb.alt = label;
            thumb.id = "dhmvseries_" + label;
            thumb.setAttribute("dhmvseriesuuid",label);
            thumb.ondragstart = thumbDragStart;
            thumb.ondragend = thumbDragEnd;
            thumb.onmouseover = displayThumbInfo;
            thumb.onmouseout = hideThumbInfo; 
```

我在这张图片上调用了 4 种方法。方法`onmouseover`和`mouseout`正常“触发”，但两个拖动功能完全没有任何作用。是什么阻碍了他们？请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:06:23.953

内容是在 JQuery UI 对话框中打开的，该对话框的模式选项设置为 true。这导致了拖放问题。固定的

# vim - 使用 vim、sed 或 awk 修改/操作文本（再次）

> ID：15200411
> 
> 赞同：-2
> 
> 时间：2013-03-04T11:23:34.917
> 
> 标签：vim, text, sed, awk

抱歉，关于前一个问题的另一个快速问题 - 我想在峰值数和范围之间添加一个下划线。我从 vim 得到奇怪的结果。

> MACS_peak_1 range=chr1:569425-569625 5'pad=0 3'pad=0 strand=+ repeatMasking=none TTCGCTCTAAGATTAAAAATGCCCTAGCCCACTTCTTACCACAAGGCACA CCTACACCCCTTATCCCTATACTAGTTATTATCGAAACCATCAGCCTACT

至

> MACS_peak_1_range=chr1:569425-569625 5'pad=0 3'pad=0 strand=+ repeatMasking=none TTCGCTCTAAGATTAAAAATGCCCTAGCCCACTTCTTACCACAAGGCACA CCTACACCCCTTATCCCTATACTAGTTATTATCGAAACCATCAGCCTACT

谢谢哈丽特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:27:48.730

```
awk '/MACS_peak/{$1=$1"_"$2;$2="";}1' your_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:30:18.633

在 shell 中试试这个：

```
sed -i s/"MACS_peak_1 range"/"MACS_peak_1_range"/g <filename> 
```

# android - 在逐帧动画在android中停止后隐藏ImageView

> ID：15200413
> 
> 赞同：0
> 
> 时间：2013-03-04T11:23:43.937
> 
> 标签：android, animation, imageview, hide

我只是在图像视图中应用逐帧动画，我只是逐帧使用 2 个图像

main.java

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ImageView iv = (ImageView) findViewById( R.id.imageView1);

    iv.setBackgroundResource(R.anim.animation);
    AnimationDrawable ac= (AnimationDrawable) iv.getBackground();
    ac.start();

    //ac.stop();
if(ac.isRunning()==false){
        iv.setVisibility(View.INVISIBLE);
    }
        } 
```

动画.xml

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/image1" android:duration="1000"/>
<item android:drawable="@drawable/image2" android:duration="1000"/>
 </animation-list> 
```

activity_main.xml（布局）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"

android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" />

   </RelativeLayout> 
```

我也很困惑在哪里停止这个动画，我需要在 2 图像动画后隐藏图像视图并稍后重新启动动画

我正在处理广告图片。所以我需要在短时间内显示图像，然后它会再次重新启动。

如果有人知道这个解决方案。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:32:47.240

ImageView iv = (ImageView) findViewById(R.id.imageView1);

```
iv.setBackgroundResource(R.anim.animation);
AnimationDrawable ac= (AnimationDrawable) iv.getBackground();
ac.start(); 
```

您可以简单地将一张空图片作为动画中的最后一项：

```
 <animation-list xmlns:android="http://schemas.android.com/apk/res/android"
     android:oneshot="true"
 >
 <item android:drawable="@drawable/image1" android:duration="1000"/>
 <item android:drawable="@drawable/image2" android:duration="1000"/>
  <item android:drawable="@drawable/dummy" android:duration="1000"/>

     </animation-list> 
```

并且 oneshot=true。

要重新启动，您可以调用 onClick 方法并再次调用 start，如下所示： Button btn1 = (Button) findViewById(R.id.btn1);

```
 btn1.setOnClickListener(new View.OnClickListener() {
      @Override
        public void onClick(View view) {

            ImageView iv = (ImageView) findViewById( R.id.imageView1);

               iv.setBackgroundResource(R.anim.animation);
               AnimationDrawable ac= (AnimationDrawable) iv.getBackground();
              ac.start();

        } 
```

# java - 为什么 Java 的 BufferedReader 不像 Objective-C 的 NSData 那样工作？

> ID：15200414
> 
> 赞同：1
> 
> 时间：2013-03-04T11:23:48.470
> 
> 标签：java, objective-c, encoding, nsdata, bufferedreader

我正在开发一个在 Android 和 iOS 设备上运行的应用程序。对于这个应用程序，我需要从 URL 获取 XML 流。这个 XML 不是很安全，因为有些行，例如：

> 启示

会变成 ：

> 调节

**当然，**我知道最好的办法是修复 XML 生成器脚本。但我只是作为一家公司的开发人员工作，并无权使用它，所以目前我正在尝试用我拥有的东西做我能做的事情。

现在这里是这个话题的原因。当我将这些数据放入 Objective-C 的 NSData 对象时：

```
NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]]; 
```

然后尝试读取每个字节：

```
NSUInteger len = [data length];
Byte *byteData = (Byte*)malloc(len);
memcpy(byteData, [data bytes], len);
for(int i = 0 ; i < len ; i++)
{
    NSLog(@"%d",byteData[i]);
} 
```

它正确显示char的int值，特殊字符与否。然后我只需要处理`(unichar)byteData[i]`来解决它。

没有 Java 和 Android，我正在尝试做一个基本的 BufferedReader 操作。

```
URL myURL = new URL(url);
BufferedReader in = new BufferedReader(new InputStreamReader(myURL.openStream())); 
```

然后逐个打印每个 char 的 int：

```
int i;
while((i = in.read()) != -1) System.out.print(i); 
```

但是对于 Java，通过这样做，我立即得到了替换字符的 id (65533) 而不是好的，并且无法替换它。

任何想法？谢谢你读我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:32:04.527

```
BufferedReader in = new BufferedReader(
        new InputStreamReader(myURL.openStream(), "UTF-8")); 
```

*   **InputStreams**用于字节、二进制数据。

*   **阅读**器用于字符、字符串、文本。

InputStreamReader 弥合了这个概念上的差异，*说明二进制数据在哪个编码中，*并且有一个用于编码的可选参数。默认编码是当前平台的编码 - 所以不是很便携。

# php - php从mysql数据库进行查询得到错误，如'where子句'中的未知列

> ID：15200419
> 
> 赞同：0
> 
> 时间：2013-03-04T11:24:11.407
> 
> 标签：php, mysql

我在 php 中有这段代码，用于从 mysql 数据库中进行查询

```
if(isset($_SESSION["esb2b_userid"])){
     $check_row = mysql_num_rows(mysql_query("select * from esb2b_basket where es_session='.$site.' and es_uid=".$_SESSION["esb2b_userid"]) or die(mysql_error()));

     echo "Logged in as <b>" . $_SESSION["esb2b_username"] . "</b>" ;
    ?> <?   }else{
    ?>  <? echo "$to" ?> Our Website <? } ?> <? if($_SESSION['esb2b_userid']=='')
            {?> <span id="log-info"><a href="<?=$domain_url?>/signup.html"><? echo "$Join_Free" ?></a><?php }?> |

     <? if($_SESSION['esb2b_userid']=='')
            {?> <a href="<?=$domain_url?>/signin.php?file="><? echo "$Sign_In" ?></a><?php } else { ?><a href="<?=$domain_url?>/logout.php" > <? echo "$Sign_out" ?> </a><?php }?> 
```

但在这里我收到这样的错误

```
Unknown column 'esb2b_userid' in 'where clause' 
```

那么有人可以告诉我为什么我会得到这个结果，我该如何解决这个问题？任何帮助和建议都将是非常可观的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:25:43.170

改变这个

```
mysql_query("select * from esb2b_basket where es_session='.$site.' and es_uid=".$_SESSION["esb2b_userid"]) 
```

至

```
mysql_query("select * from esb2b_basket where es_session='".$site."' and es_uid=".$_SESSION["esb2b_userid"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:28:22.437

`mysql_real_escape_string`你应该通过sql 注入来逃避你的变量试试这个

```
 $check_row = mysql_num_rows(mysql_query("select * from esb2b_basket 
  where es_session= '".mysql_real_escape_string($site)."' 
         and es_uid='".mysql_real_escape_string($_SESSION["esb2b_userid"])."' ") or die(mysql_error())); 
```

并且请不要使用 mysql ，更改为 mysqli 或 PDO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:27:09.043

您查询中的括号有点混乱，请尝试：

```
$check_row = mysql_num_rows(mysql_query("select * from esb2b_basket where es_session='".$site."' and es_uid='".$_SESSION["esb2b_userid"]."') or die(mysql_error())); 
```

# javascript - jQuery Mobile 按钮在按下时不会立即变为“按下”状态

> ID：15200422
> 
> 赞同：0
> 
> 时间：2013-03-04T11:24:15.867
> 
> 标签：javascript, ios, css, jquery-mobile, uiwebview

在一个`UIWebView`包含一个简单的 jQuery Mobile 样式的按钮中，它看起来像：

![在此处输入图像描述](../Images/bffdadad7bd86ada7aab15b721ae513f.png)![在此处输入图像描述](../Images/374d8f797ed6731150e9b3b967618d26.png)

按下它不会立即改变它的外观（变为灰色背景的“按下”状态），只有在 200m~ 之后，按钮外观才会改变（如果按住按钮），因为它应该已经改变了。

我不是指臭名昭著的 UIWebView 延迟“onclick”事件触发，只是按钮的“按下”外观，按下时不会立即显示。

我该如何纠正？

我正在使用 jQuery Mobile v1.3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:41:55.550

以下行起到了作用： `$.mobile.buttonMarkup.hoverDelay = 0;`

引用自 jQuery Mobile 文档页面 - [http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html](http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html)

# vb.net - 与用户界面相比，此错误具有误导性

> ID：15200423
> 
> 赞同：0
> 
> 时间：2013-03-04T11:24:23.033
> 
> 标签：vb.net, visual-studio-2010, sql-server-2008, ado.net

错误：

> 当传递带有修改行的 DataRow 集合时，更新需要有效的 UpdateCommand。

现在这是我设法在网上找到的一个热门问题。有些人有答案，有些人没有。这是我的问题。我所做的只是按照*Microsoft Press 的一本书*中的教程.. 通过 Windows 身份验证连接到 SQL Server 数据库，然后将表中的两个字段作为文本框拉入表单，如屏幕截图所示。它有`add, delete, update`按钮（自动创建）。

![在此处输入图像描述](../Images/3df3915031b555a70845117e9755a64e.png)

然后它生成以下代码，并将错误指向`UPDATE`行。我试图做的，更新`ID = 2 to ID = 3`. 当我尝试 ADO.Net 端组件（连接/显示等）时，表中没有主键。

```
Private Sub Testdbtable1BindingNavigatorSaveItem_Click
                (ByVal sender As System.Object, ByVal e As System.EventArgs) Handles
                                Testdbtable1BindingNavigatorSaveItem.Click
    Me.Validate()
    Me.Testdbtable1BindingSource.EndEdit()
    Me.TableAdapterManager.UpdateAll(Me.TestcmdDBDataSet) //-------<< error
End Sub 
```

**那么在表单中有那个`SAVE`或按钮的真正原因是什么？`UPDATE`为什么它不能保存我的记录更改？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:37:34.860

当表上没有主键时，tableadapter 无法生成更新逻辑。添加一个 PK，然后进入数据集的设计器并重新生成查询。确保这次已经生成了 INSERT 和 UPDATE 查询。

# iphone - 如何交换 NSArray 中的值索引

> ID：15200428
> 
> 赞同：8
> 
> 时间：2013-03-04T11:24:49.123
> 
> 标签：iphone, nsarray

我有`NSArray`。我在那个数组中有一些价值。

```
NSArray *testArray = [NSArray arrayWithObjects:@"Test 1", @"Test 2", @"Test 3", @"Test 4", @"Test 5", nil];
NSLog(@"%@", testArray); 
```

结果如下：

```
(
"Test 1",
"Test 2",
"Test 3",
"Test 4",
"Test 5"
) 
```

现在我想要这样的结果：

```
(
"Test 3",
"Test 5",
"Test 1",
"Test 2",
"Test 4"
) 
```

有没有办法在不重新初始化数组的情况下做到这一点？我可以交换这个数组的值吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-08T11:13:47.840

使用**NSMutableArray**交换两个对象。

```
- exchangeObjectAtIndex:withObjectAtIndex: 
```

这会在给定索引处交换数组中的对象（idx1 和 idx2）

idx1
对象的索引，用于替换索引 idx2 处的对象。

idx2
对象的索引，用于替换索引 idx1 处的对象。

**迅速**

```
func exchangeObjectAtIndex(_ idx1: Int,
         withObjectAtIndex idx2: Int) 
```

**OBJECTIVE-C** 使用 NSMutableArray

```
 - (void)exchangeObjectAtIndex:(NSUInteger)idx1
                withObjectAtIndex:(NSUInteger)idx2 
```

[交换 NSMutableArray 中的元素](https://stackoverflow.com/questions/3836387/swapping-elements-in-an-nsmutablearray)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T11:28:14.000

您的数组必须是一个实例，`NSMutableArray`否则不允许写入方法（`NSArray`只读）

使用以下方法：

```
- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(id)anObject 
```

您将需要一个临时存储来存储替换对象：

```
id tempObj = [testArray objectAtIndex:index];
[testArray replaceObjectAtIndex:index withObject:[testArray objectAtIndex:otherIndex]];
[testArray replaceObjectAtIndex:otherIndex withObject:tempObj]; 
```

# sql - 如何克服（SQL Like 运算符）性能问题？

> ID：15200434
> 
> 赞同：0
> 
> 时间：2013-03-04T11:25:29.523
> 
> 标签：sql, sql-server, sql-server-2008, search, sql-like

我的**`Users`**表包含大约 500,000 行用户数据

用户的全名存储在 4 列中，每列都有类型**`nvarchar(50)`**

我有一个计算列**`UserFullName`**，它等于 4 列的组合

我按名称在表中`Stored Procedure`搜索，如下所示**`Users`****`like operatior`**

```
Select * 
From Users 
Where UserFullName like N'%'+@FullName+'%' 
```

执行此 SP 时出现性能问题 .. 需要很长时间**:(**

***有什么办法可以克服使用 Like 运算符的性能不足的问题吗？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:28:58.537

不是在仍然以这种方式使用 like 运算符的时候。开头的 % 意味着您的搜索需要读取每一行并寻找匹配项。如果您真的需要这种搜索，您应该考虑使用全文索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:18:49.617

如果您使用索引，那会很好。

所以你可以给列一个 id 或其他东西，像这样：

```
Alter tablename add unique index(id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:29:45.747

确保您的计算列已编入索引，这样就不必每次都计算值`SELECT`

此外，根据您的索引，使用`PATINDEX`可能会更快，但实际上您应该为这种事情使用全文索引：http: [//msdn.microsoft.com/en-us/library/ms187317.aspx](http://msdn.microsoft.com/en-us/library/ms187317.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T16:23:53.023

看看那篇文章[http://use-the-index-luke.com/sql/where-clause/searching-for-ranges/like-performance-tuning](http://use-the-index-luke.com/sql/where-clause/searching-for-ranges/like-performance-tuning)。

它很容易地描述了 LIKE 在性能方面的工作原理。

很可能，您正面临这样的问题，因为由于第一个 % 符号，您的整个表都应该被遍历。

您应该尝试创建一个表示 k-mer 的子字符串列表（例如在单独的表中）并在不使用 % 的情况下搜索它们。此外，此类列的索引会有所帮助。请在此处阅读有关 KMer 的更多信息[https://en.m.wikipedia.org/wiki/K-mer](https://en.m.wikipedia.org/wiki/K-mer)。

这不会破坏索引，并且搜索效率更高。

# php - 从 PHP 为 moodle 生成 SCORM

> ID：15200448
> 
> 赞同：1
> 
> 时间：2013-03-04T11:26:13.740
> 
> 标签：php, moodle, scorm

我们有一些说明（文本/图像/视频）和一些基于 PHP 的培训。我们也有一个 Moodle 工作，我们想从这个 php 应用程序生成一些 SCORM。

是否有任何图书馆或指令来实现这一目标？

任何帮助或线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:28:45.577

查看资源[http://www.adlnet.gov](http://www.adlnet.gov)，尤其是本文档：[http ://www.adlnet.gov/resources/SCORM-Users-Guide-for-Programmers?type=technical_documentation](http://www.adlnet.gov/resources/SCORM-Users-Guide-for-Programmers?type=technical_documentation)

它包含有关在 SCORM 包中构建和嵌入资源的信息。

# asp.net-mvc - 是否有一种设计模式可以将多个模型的显示标准化为一个视图？

> ID：15200449
> 
> 赞同：1
> 
> 时间：2013-03-04T11:26:14.397
> 
> 标签：asp.net-mvc, interface, viewmodel

我已经修改了派生类、接口和视图模型，但我无法创建我需要的东西。

假设我们正在使用以下模型构建 CMS：

**文章项目**

*   标题

*   概括

*   内容

**新闻项目**

*   标题

*   发布日期

*   概括

*   内容

**事件项**

*   事件标题

*   开始日期

*   结束日期

*   内容

我正在寻找一种将这些显示标准化为一种格式/视图的方法（例如，我们可以将它们全部显示在同一个 RSS 提要中）。标准化视图可能称为**HTMLItem**并具有 3 个字段：

*   标题

*   概括

*   内容

**ArticleItem**将直接转换为**HTMLItem**，这很简单。

对于**NewsItem**，我想加入 PublishDate 和内容的前 100 个字符来创建**HTMLItem**的 Summary 字段。

对于**EventItem**，我想结合 StartDate 和 EndDate 来创建**HTMLItem**的 Summary 字段。

最终，我正在寻找能够将 3 个模型传递到旨在显示**HTMLItem**的单个视图中的最简单、最有效的方法。到目前为止，我最好的方法是为每个模型创建一个“转换器”类，但我不禁觉得有更好的方法来做到这一点。

任何经验、专业知识和建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:54:11.233

为每个专用类创建一个具有标准化属性和构造函数的 ViewModel：

```
public class HtmlItemViewModel {
    //Properties
    public string Title {get; set;}
    public string Summary {get; set;}
    public string Content {get; set;}

    //Constructor inside HtmlItemViewModel for each one of the specialized classes:
    public HtmlItemViewModel(ArticleItem item)
    {
        this.Title = item.Title;
        this.Summary = item.Summary;
        this.Content = item.Content;
    }

    public HtmlItemViewModel(NewsItem item)
    {
        this.Title = item.Headline;
        this.Summary = String.Format("{0} - {1}", item.PublishDate, item.Summary.Substring(0,1000));
        this.Content = item.Content;
    }

    public HtmlItemViewModel(EventItem item)
    {
        this.Title = item.EventTitle;
        this.Summary = String.Format("{0} - {1}", item.StartDate, item.EndDate);
        this.Content = item.Content;
    }
} 
```

然后，在您用于 RSS 提要的方法上，只需将每个实体传递给每个单独查询的构造函数。像这样：

```
//Example controller
public class RssController : Controller {
    public ActionResult GetRssFeed(){
        //Assuming you have a service for each item type
        var articleList = ArticleService.GetArticles().Select(s => new HtmlItemViewModel(s));
        var newsItemList = NewsItemService.GetNewsItems().Select(s => new HtmlItemViewModel(s));
        var eventItemList = EventItemService.GetEvents().Select(s => new HtmlItemViewModel(s));

        articleList.AddRange(newsItemList);
        articleList.AddRange(eventItemList);

        return articleList;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:35:27.960

您可以在项目中使用[Viewmodel](https://stackoverflow.com/questions/9425982/confused-about-net-mvc-view-models-and-models) Pattern

> 模型和视图模型是不同的。不要将 ViewModel 与 MVVM 模式混淆。
> 
> 使用视图模型可以使模型和视图之间的交互更加简单。有时，将其他模型对象作为成员，模型可能会过于复杂，而这些成员可能会将模型对象作为成员等。
> 
> 通过使用视图模型，您可以很好地简化视图处理的内容。这也将过滤掉智能感知中可以看到的内容，因此如果开发模型的人与开发视图的人不同，那么创建一个简单的视图模型可以让那些只处理 UI 的人更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:17:08.107

最简单且最常见的解决方案是创建一个复合视图模型类。这可以是一个组合类（包含对您的域模型的引用），也可以是一个扁平类，分别引用每个类的属性。

所以你可以这样做：

```
public class HtmlItemViewModel
{
  public ArticleItem ArticleItem {get; set;}
  public NewsItem NewsItem {get; set;}
  public EventItem EventItem {get; set;}
} 
```

或这个：

```
public class HtmlItemViewModel
{
  //Article Item Properties
  public string ArticleTitle {get; set;}
  public string ArticleContent {get; set;}
  public string ArticleSummary {get; set;}
  //News Item Properties
  public string Headline {get; set;}
  public DateTime PublishDate {get; set;}
  public string NewsItemSummary {get; set;}
  public string NewsItemContent {get; set;}
  //Event Item Properties
  public string EventTitle {get; set;}      
  public DateTime StartDate {get; set;}    
  public DateTime EndDate {get; set;}
  public string EventContent {get; set;}
} 
```

然后，无论您选择哪种方式构建视图模型，您都将视图模型属性映射到控制器中的域模型。您可以手动进行此映射

```
HtmlItemViewModel.ArticleTitle = ArticleItem.ArticleTitle;
//and so on... 
```

[或者您可以使用AutoMapper](https://github.com/AutoMapper/AutoMapper)等第三方工具

在大多数情况下，我倾向于使用扁平视图模型，因为它允许我只发送我需要的数据，不多也不少。它还允许我将用于输入验证的数据注释放在视图模型而不是域模型上。

# ocaml - OCaml - 将程序编译为库

> ID：15200450
> 
> 赞同：4
> 
> 时间：2013-03-04T11:26:25.590
> 
> 标签：ocaml

我有一个 OCaml 程序（带有一个 main 方法 - 它生成一个可执行文件），我想将它用作一个库。

我正在像这样编译我`ocamlc -I someDir -g -unsafe lotsOfCmoFiles -o outputFile`的程序：并且程序运行良好。

现在我正在删除使其成为可执行文件的行（类似于`let _ = ...`）并将`-a`参数添加到编译命令：`ocamlc -a -I someDir -g -unsafe lotsOfCmoFiles -o outputFile.cma`

但不知何故，我无法加载生成的 .cma 文件`ocamltop`并`ocamlbrowser`显示一个空列表。当我尝试从以下位置加载时`ocamltop`：

```
# #load "outputFile.cma";;
Error: Reference to undefined global `Xyz' 
```

而且我 100% 确定 xyz.cmo 包含在`lotsOfCmoFiles`.

我在编译时是否给了一些错误的参数？否则，我应该怎么做才能在 ocamltop 中加载我的程序？（我将在另一个程序中使用这个库，我以 ocamltop 输出为例）

任何帮助将不胜感激。

编辑：所以感谢@cago，我终于可以编译和加载它，现在我可以加载我的库，当我不删除主线`let _ = ...`时，它会在我加载`.cma`.

但我仍然无法打开任何模块。奇怪的是，这并没有引发异常

```
open Main 
```

但是当我从模块 Main 调用一个函数时：

```
# someFun;;
Error: Reference to undefined global `Main' 
```

并且`ocamlbrowse`仍然显示一个空列表。现在为什么呢？

EDIT2：我意识到`open Main`不会失败，因为我在同一个文件夹中有一个主模块（即使我没有明确加载它）。如果我将 .cma 文件移动到其他地方并加载它，它可以工作（即 main 函数自动运行），但现在我无法打开任何模块，即使`ocamlobjinfo`显示了模块。

EDIT3：-我没有帮助：

```
$ ocaml
        OCaml version 4.00.1

# #load "lib.cma";;
ok
# open Lib;;
Error: Unbound module Lib
# 
$ ocaml -I libFolder    
        OCaml version 4.00.1

# #load "toylib.cma";;
ok
# open Lib;;
# fun;;
Error: Reference to undefined global `Lib' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T12:26:51.213

`lotsOfCmoFiles`您需要了解模块中的一些 cmo Xyz。您需要注意您的 cmo 文件之间的依赖关系。

例如：

toto.ml:

```
let x = "toto" 
```

标题.ml：

```
let y = Toto.x ^ " titi"

ocamlc -c toto.ml
ocamlc -c titi.ml
ocamlc -a  titi.cmo toto.cmo -o lib.cma (* here is  the probleme *)

# #load "lib.cma"
Error: Reference to undefined global `Toto' 
```

因为titi依赖toto所以需要改变cmos的顺序：

```
ocamlc -a toto.cmo titi.cmo -o lib.cma 

# #load "lib.cma"
# Titi.y;;
 - : string = "toto titi" 
```

编辑：

例如，如果您的 cma 位于子目录中，则在调用`ocaml`时需要指定路径：

```
ocaml -I subdir/ (* subdir which contains lib.cma *)

# #load "lib.cma"
# Toto.x;;
- : string = "toto" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T08:51:36.570

TL;DR：确保你没有任何顶级副作用

我遇到了同样的麻烦。我的项目会构建得很好，大多数模块都可用，但是有一个模块一直在触发`Reference to undefined global`. 但很明显，该模块对系统是可见的：它`utop`与它的所有值一起显示在 的自动完成列表中，我可以引用它并将其导入其他模块。

问题原来是加载该模块时抛出的未捕获异常。异常是由于尝试加载不存在的文件。它不会在复杂化过程中引起问题，但是当模块实际加载时，它会被破坏，并且在我看到它之前，异常就被吞没了。

# java - 在 array-android 应用程序中传递一个数组列表

> ID：15200451
> 
> 赞同：0
> 
> 时间：2013-03-04T11:26:26.183
> 
> 标签：java, android, json, parsing, arrays

我一直在参考这个应用程序来制作画廊模块
[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

但是根据我的应用程序中的要求，图像是动态添加的。因此，我通过 JSON 获取所有图像。来自 JSON 的图像响应将添加到数组列表中。

我应该如何`image_urls.add(folio.getString(i));`在新班级中通过“”：

```
public class Test extends Activity{

    private static String url = "http://www.xyz.com/album_pro/array_to_encode";

     JSONArray folio = null;
     ArrayList<String> urlList = new ArrayList<String>();
     @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
              StrictMode.setThreadPolicy(policy);

            JSONParser jParser = new JSONParser();
            {

            try{

                JSONObject json = jParser.getJSONFromUrl(url);
                Log.v("URL",json.toString());

            JSONObject seo = json.getJSONObject("SEO");
            Log.v("seo",seo.toString());
            JSONArray folio = seo.getJSONArray("Folio");
            ArrayList<String> image_urls = new ArrayList<String>();

            for(int i=0;i< folio.length();i++)
            {

                image_urls.add(folio.getString(i));

            }

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
            }
}

} 
```

`image_urls.add(folio.getString(i));`我应该如何在名为“Images”的非活动类中传递“ ”，即

```
public class Images {
    public final static String[] imageUrls = new String[] {
      **Required the arraylist of "Test" activity**

    };
    public final static String[] imageThumbUrls = new String[] {

         **Required the arraylist of "Test" activity**
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:35:02.797

使`Images`成员成为非最终成员，以便您可以在运行时设置它们。

`image_urls`在将图像 URL 添加到ArrayList的循环之后，设置`Images`类的属性：

```
Images.imageUrls = image_urls.toArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:31:22.767

制作`ArrayList` `public`and`static`并在其他类中使用它`Test.urlList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:32:41.123

简单的方法是使`image_urls`as public 静态。因为它只包含网址，对吗？只有少量数据，并且在 Image 类中使用

```
Test.image_urls.get(integer); 
```

# python - 配置错误 --- gobject ---- python header not found

> ID：15200453
> 
> 赞同：2
> 
> 时间：2013-03-04T11:26:34.140
> 
> 标签：python, gtk, gobject

配置 gobject-introspection 时找不到 Python 头文件。

我已经下载了 tar :-----

```
gobject-introspection-1.34.2 
```

命令 ： - - -

```
gobject-introspection-1.34.2$ LD_LIBRARY_PATH=/usr/local/lib:/usr/lib:$LD_LIBRARY_PATH ./configure --disable-static 
```

错误 ： - -

```
checking for python script directory... ${prefix}/lib/python2.7/dist-packages
checking for python extension module directory... ${exec_prefix}/lib/python2.7/dist-packages
checking for headers required to compile python extensions... not found
  configure: error: Python headers not found 
```

我该如何解决这个错误，请建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:29:10.893

编译器正在寻找 Python 头文件。在 Linux 发行版上，这通常通过安装`python-dev`或类似的包来解决。在幕后，您应该能够通过 gcc 的`-I`选项指定包含目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:30:43.460

也许你必须在 Ubuntu 或 Debian 中为 Python 安装一个开发包，比如“python-dev”？该命令将是

```
aptitude install python-dev 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-05T11:42:30.953

[在这里](https://www.fatalerrors.org/a/configure-configure-error-python-headers-not-found.html)找到解决方案！

> 通常 /usr/bin/python 应该只是 Python3 或 Python2 的符号链接，
> 
> 如果是指向Python3，我们需要去掉链接，然后创建一个指向Python2的符号链接
> 
> `rm /usr/bin/python`
> 
> `ln -s /usr/bin/python2.7 /usr/bin/python`
> 
> 这将为 Python2.7 创建一个符号链接，不需要重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-13T20:08:46.183

在 centos 上，例如在共享目录中拥有独立版本的 python-2.7.12 时，请注意 python-config 实际上被命名为 python2.7-config

python也一样......它可能被称为python2.7

就个人而言，要解决构建 gobject I：

cd 进入 python-2.7.12 的 bin 目录并创建符号链接

ln -s python2.7 python ln -s python2.7-config python-config

希望这可以帮助

# ruby-on-rails - 指定的 DSN 包含 RoR 中的驱动程序和应用程序之间的体系结构不匹配

> ID：15200455
> 
> 赞同：0
> 
> 时间：2013-03-04T11:26:46.460
> 
> 标签：ruby-on-rails, ruby, sql-server, ruby-on-rails-3, ruby-on-rails-3.2

在尝试生成脚手架以测试数据库连接性时，我收到此错误“指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配”。如何在 Windows 平台的 ruby​​ on rails 中纠正此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:29:19.847

您正在尝试将 32 位 ODBC 驱动程序与 64 位应用程序一起使用，反之亦然。应用程序架构必须与 DSN 的架构相匹配。

如果您使用的是 64 位版本的 windows，则默认情况下它使用 64 位版本的 ODBC 管理员。要访问 32 位版本，请使用：

```
c:\windows\sysWOW64\odbcad32.exe 
```

并在此处设置您的 DSN。

# magento - Magento exception.log PDOException 原因和修复？

> ID：15200456
> 
> 赞同：0
> 
> 时间：2013-03-04T11:26:48.930
> 
> 标签：magento

为一家运行基于 Magento（1.7.0.2 版本）网络商店的小公司工作，有一段时间我们在 exception.log 中弹出以下错误：

```
2013-03-04T10:17:24+00:00 ERR (3):
exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1' in *website root*/lib/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 *website root*/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 *website root*/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 *website root*/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 *website root*/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 *website root*/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `catalog...', Array)
#5 *website root*/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `catalog...', Array)
#6 *website root*/lib/Zend/Db/Adapter/Abstract.php(753): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#7 *website root*/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(380): Zend_Db_Adapter_Abstract->fetchRow(Object(Varien_Db_Select))
#8 *website root*/app/code/core/Mage/Core/Model/Abstract.php(225): Mage_Core_Model_Resource_Db_Abstract->load(Object(Aitoc_Aitpermissions_Model_Rewrite_CatalogCategory), Object(Aitoc_Aitpermissions_Model_Rewrite_CatalogCategory), NULL)
#9 *website root*/app/code/core/Mage/Catalog/Block/Product/List.php(80): Mage_Core_Model_Abstract->load(Object(Aitoc_Aitpermissions_Model_Rewrite_CatalogCategory))
#10 *website root*/app/code/core/Mage/Catalog/Block/Product/List.php(141): Mage_Catalog_Block_Product_List->_getProductCollection()
#11*website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(864): Mage_Catalog_Block_Product_List->_beforeToHtml()
#12 *website root*/app/code/core/Mage/Core/Model/Email/Template/Filter.php(191): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->toHtml()
#13 [internal function]: Mage_Core_Model_Email_Template_Filter->blockDirective(Array)
#14 *website root*/lib/Varien/Filter/Template.php(134): call_user_func(Array, Array)
#15 *website root*/app/code/core/Mage/Core/Model/Email/Template/Filter.php(502): Varien_Filter_Template->filter('<h2><a href="ht...')
#16 *website root*/app/code/core/Mage/Cms/Block/Block.php(54): Mage_Core_Model_Email_Template_Filter->filter('<h2><a href="ht...')
#17 *website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(865): Mage_Cms_Block_Block->_toHtml()
#18 *website root*/app/code/core/Mage/Core/Block/Text/List.php(43): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->toHtml()
#19 *website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(865): Mage_Core_Block_Text_List->_toHtml()
#20 *website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(584): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->toHtml()
#21 *website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(528): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->_getChildHtml('content', true)
#22 *website root*/app/design/frontend/default/*store view*/template/page/2columns-left.phtml(70): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->getChildHtml('content')
#23 *website root*/var/ait_rewrite/67b58abff9e6bd7b400bb2fc1903bf2f.php(412): include('*website root*...')
#24 *website root*/var/ait_rewrite/67b58abff9e6bd7b400bb2fc1903bf2f.php(274): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#25 *website root*/var/ait_rewrite/67b58abff9e6bd7b400bb2fc1903bf2f.php(288): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Template->renderView()
#26 *website root*/var/ait_rewrite/6bfe16ca572eea47db567910902c6209.php(865): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Template->_toHtml()
#27 *website root*/app/code/core/Mage/Core/Model/Layout.php(555): Aitoc_Aitsys_Model_Rewriter_Mage_Core_Block_Abstract->toHtml()
#28 *website root*/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#29 *website root*/app/code/core/Mage/Catalog/Helper/Product/View.php(147): Mage_Core_Controller_Varien_Action->renderLayout()
#30 *website root*/app/code/core/Mage/Catalog/controllers/ProductController.php(132): Mage_Catalog_Helper_Product_View->prepareAndRender(14722, Object(Mage_Catalog_ProductController), Object(Varien_Object))
#31 *website root*/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Catalog_ProductController->viewAction()
#32 *website root*/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
#33 *website root*/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#34 *website root*/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#35 *website root*/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#36 *website root*/index.php(85): Mage::run('default', 'store')
#37 {main} 
```

我们一直在寻找类似的问题，但找不到任何与此匹配的已解决问题，我们甚至不确定是什么原因造成的，我们将不胜感激。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:07:31.407

由于与重写大多数常见 magento 块的“AITOC”模块冲突，这是一个问题。只需与他们核实，他们将进一步帮助您。这不是因为 Magento。它主要与基于您的域的 AITOC 许可有关。

# c - 链接到 Eclipse CDT 中的静态库时的重复步骤

> ID：15200459
> 
> 赞同：1
> 
> 时间：2013-03-04T11:27:05.720
> 
> 标签：c, ubuntu, static-libraries, eclipse-cdt, cross-compiling

我在 Ubuntu v12.10 上使用 Eclipse CDT/CodeSourcery Lite 交叉编译我的 C 项目。

在 Eclipse CDT 中，我有这三个 C 项目：

1.  exeTop // 使用 libmiddle.a 中定义的函数的可执行文件
2.  libmiddle.a // 使用 libbottom.a 中定义的函数的静态库
3.  libbottom.a // 不依赖任何其他库的独立静态库

为了构建 libmiddle.a，我必须将 libbottom.a 复制到 libmiddle 的项目文件夹中（请参阅[此处](http://webcourse.cs.technion.ac.il/234122/Spring2012/en/faq_Working%20with%20Eclipse%20CDT.html)的说明），这是有道理的，因为 libmiddle.a 依赖于 libbottom.a。

但是，在构建 exeTop 时，我不仅要链接到 libmiddle.a，还要链接到 libbottom.a（libmiddle.a 已经链接到）。

**Q1。为什么需要从 exeTop 链接到 libbottom.a？**

**Q2。有没有我可以使用的编译器或链接器选项，以便我可以从 exeTop 链接到 libmiddle.a？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:35:51.060

你说“为了构建 libmiddle.a，我必须链接到 libbottom.a，这是有道理的，因为 libmiddle.a 依赖于 libbottom.a。” 我认为根本不是这种情况。事实上，libmiddle.a 不能真正链接到 libbottom.a，因为这不是静态库在 Linux 上的工作方式。静态库只是目标文件的“档案”，并没有使它们依赖于其他静态库的功能。将静态依赖项填充到静态库本身中也不常见。

有关更多详细信息，请参阅[[UNIX]：我是否需要在项目的 makefile 中添加所有库，这些库从库中使用，在我的项目中使用？](https://stackoverflow.com/questions/5664338/unix-do-i-need-to-add-all-libraries-in-my-projects-makefile-that-are-used)

# visual-studio - 在 SQLite 中插入单引号

> ID：15200461
> 
> 赞同：2
> 
> 时间：2013-03-04T11:27:13.660
> 
> 标签：visual-studio, sqlite, insert

我正在尝试将以下文本添加到我的数据库中：`Zeeland '96`

但是单引号给了我错误。

它应该如下所示：

```
INSERT INTO Department (Code, Name, CountryID) VALUES ('ZE', 'Zeeland '96', 1) 
```

如您所见，此时缺少一个引号，我该如何摆脱这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:29:22.620

正如您在[此处](http://www.sqlite.org/lang_expr.html)看到的，您需要通过连续使用两个单引号来转义它。尝试：

```
INSERT INTO Department (Code, Name, CountryID) VALUES ('ZE', 'Zeeland ''96', 1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T11:29:49.227

假设您使用的是 .NET 库，您可以使用 SQLiteParameter 类型来构建 SQL 命令字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T11:32:15.420

```
INSERT INTO Department (Code, Name, CountryID) VALUES ('ZE', 'Zeeland ''96', 1) 
```

# javascript - 点击 Google+1 按钮后显示内容

> ID：15200465
> 
> 赞同：0
> 
> 时间：2013-03-04T11:27:20.173
> 
> 标签：javascript, jquery, google-plus, google-plus-one

我认为对于那些在社交媒体上分享我的内容的人来说一些特殊的内容会很棒，并开始研究这个东西。

我设法让它与 Facebook Likes 和 Twitter Tweets 一起使用，但停留在 Google+1 中。

此处的信息没有太大帮助：http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=1366830](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1366830)

谁能告诉我如何注册 +1 并在 +1 之后立即显示内容（隐藏的 div）？

以下是我正在使用的代码：

HTML

```
<div class="g-plusone" data-size="medium" callback="cpg1callback"></div> 
```

JavaScript

```
function cpg1callback(data){
      if (data.state == 'on') {
        $('.gpsuccessmsg').show("blind", { direction: "vertical" }, 500);
      }
} 
```

我已将该 JS 代码放在一个链接在标题处的 js 文件中，但这不起作用，我还尝试在关闭 body 标记之前放置该 js 代码，但没有成功。这里的任何指导都会非常有帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:55:01.340

您可能需要使用属性`data-callback`而不是`callback`因为您使用的是 div 标签。[有关详细信息，请参阅https://developers.google.com/+/web/+1button/#plusonetag](https://developers.google.com/+/web/+1button/#plusonetag)上的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:48:57.280

花了几个小时后，我终于让它工作了。分享这一点，因为它可能会帮助有人在同一问题上寻找答案。

`callback`在默认 +1 按钮标记的情况下，您需要在属性中包含回调（函数名）才能使回调起作用。例如，+1 按钮代码应为：

```
<g:plusone size="medium" callback="cpg1callback"></g:plusone> 
```

在 HTML5 有效语法的情况下，属性应该是`data-callback`. 例如：

```
<div class="g-plusone" data-size="medium" data-callback="cpg1callback"></div> 
```

我希望这会为您节省一些时间。

# c# - WP7：根据数据库中的数据访问和更改 ListBox DataTemplate 中的控件

> ID：15200466
> 
> 赞同：0
> 
> 时间：2013-03-04T11:27:28.940
> 
> 标签：c#, windows-phone-7, listbox

我知道以前有人问过这个问题，但我有点困惑！到目前为止，我正在使用 MVVM 编写我的应用程序。但现在我需要知道在列表框中的数据模板中访问我的控件的最佳方式是什么。我想通过后面的代码访问它们，并且还能够根据数据库中的其他值更改它们！

这是视图：

```
 <ListBox Margin="0,8,0,0"  toolkit:TiltEffect.IsTiltEnabled="True" x:Name="counterlist" ItemsSource="{Binding Groups}" HorizontalAlignment="Center" Tap="list_OnTap" 
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Background="Orange" Width="125" Height="125" Margin="6">
                        <TextBlock Name="name" Foreground="White" Text="{Binding Name}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap"/>
 <TextBlock Name="items" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox> 
```

此列表框绑定到我的 viewModel 中的 Groups Observable 集合。到目前为止还不错。现在我有一个方法叫做

公共 int ItemsinGroup(int gid)

此方法返回每个组中的项目数，但它不仅基于此数据库，而且还从外部源获取一些信息，因此我不能简单地进行查询以将其添加到可观察集合中。

我只需要将它添加到列表框中的每个项目，以便它显示每个组的关联项目计数。

我希望能够在后面的代码中更改它。我的意思是我想在代码后面以及 XAML 中访问每个数据循环（我们已经通过绑定来做到这一点）。如果我可以这样做，那么将 ItemsinGroup 结果注入列表框循环中的相关项目将很容易。我可以通过将我的方法放在 viewModel 中来做到这一点吗？但是循环中的当前项目呢，我怎样才能找出列表框循环中每个组的当前 ID 是什么？

我需要知道做这些事情的最佳方法是什么，通常每个人在这些情况下都会做什么！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:18:03.660

Your desire to use MVVM and yet update individual items in a collection from code behind seem contradictory.

This simplest solution is probably to get your collection of groups and before you bind them to the UI you loop through them and add the count to the objects in your collection.

Alternatively, if you want to bind the collection as quickly as possible and then update it. You could step through the collection once bound and as long as the objects in your collection implement INotifyPropertyChanged you could update them and have a second TextBlock in the ItemTemplate show this when set.

# java - JavaCC 生成的代码中的 NoClassDefFoundError

> ID：15200471
> 
> 赞同：1
> 
> 时间：2013-03-04T11:27:39.583
> 
> 标签：java, noclassdeffounderror, classnotfoundexception, javacc

作为我学习的一部分，我正在使用 JavaCC Eclipse 插件来创建词法分析和解析器，这是一种编程语言的解析器。解析器成功生成，当我在 Eclipse 中运行生成的 Java 代码时，它运行良好。

但是，为了轻松传递要解析的文本文件，我想从命令行运行程序。当使用`java Adder`Adder*作为*我的主文件的名称时，我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Adder
Caused by: java.lang.ClassNotFoundException: Adder
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

谁能告诉我如何解决这个错误？我已经读到我可能必须修改我的路径，但我不确定要添加到路径中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:19:52.643

在运行时 JVM 无法在类路径中找到该类。请确保在系统类路径中包含 java 类

# windows-ce - 什么是 Windows CE 5.0 Build 1400？

> ID：15200472
> 
> 赞同：0
> 
> 时间：2013-03-04T11:27:43.590
> 
> 标签：windows-ce

我在 Windows Ce 5.0 build 1400 设备上开发了一个 vb.net 应用程序，但它不能在这个设备上工作，它只能在 Windows Ce 5.0 上工作。

什么是“Build 1400”？我怎样才能删除它？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:26:19.590

它只是操作系统生成的内部版本号。你不能“删除”它。

如果您有两台设备，一台可以运行应用程序，一台不能运行，它们都运行相同的操作系统（在本例中为 CE 5.0），那么这很可能是操作系统中的组件问题。它可能是驱动程序差异、P/Invoke 库差异、核心操作系统功能差异，甚至是 OAL 差异。

如果没有您更详细地定义“不起作用”，那就是我能得到的详细信息。您必须使用调试并确定应用程序出现故障的位置，然后确定操作系统中缺少什么导致该故障。

# php - PHP preg_replace_callback 变量优化

> ID：15200475
> 
> 赞同：1
> 
> 时间：2013-03-04T11:27:48.380
> 
> 标签：php, variables, optimization, preg-replace-callback

我一直在搜索有关 preg_replace_callback 的信息并设法让我的东西正常工作，但我想知道这是否可以优化？

我可以在一次预运行中运行这两个吗？

```
 // 1\. replace [date xx] with event date in "xx" dateformat

$output = preg_replace_callback('/\[date (.*?)]/', function($matches) use($eventDate)
          {
              return date($matches[1],$eventDate);
          }, $output);

  // 2\. replace [title], [venue] and [link]

$replacePattern = array( '/\[title\]/',
                         '/\[venue\]/',
                         '/\[link\]/');

$replaceReplacement = array($eventTitle, $eventVenue, $eventLink);

$output = preg_replace($replacePattern, $replaceReplacement, $output); 
```

# azure - CurrentRoleInstance.id 在已部署的应用程序中是永久的吗？

> ID：15200478
> 
> 赞同：0
> 
> 时间：2013-03-04T11:27:56.527
> 
> 标签：azure

我认为我有一个简短而简单的问题..在模拟器中，角色ID在每次运行时都会发生变化。在真正的天蓝色部署中呢？重新启动虚拟机后，角色是否获得相同的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:38:06.117

如果您查看云中已部署实例的 id，您会发现它们总是以这种方式命名：**`[RoleName]_IN_[XXX]`**其中 XXX 是一个数字，具体取决于部署的实例数量。所以要回答你的问题，因为命名实例的模式是相同的，我想说你会得到相同的 id。如果由该实例 id 表示的 VM 相同，这是一个不同的问题。有3个场景需要覆盖：

1.  角色实例被重启：如果你重启一个特定的实例，我猜你会得到相同的实例 ID。
2.  角色实例宕机：虽然我们实际上没有杀死特定实例的选项，因此我们无法真正测试它，但如果特定实例宕机并且 Azure 为该实例建立一个新实例，您将获得相同的实例 ID。
3.  新部署：如果您进行全新部署（假设实例数量相同），您将获得相同的部署 ID，但虚拟机将完全不同。

# c#-3.0 - 如何知道 Tapi32.dll 中的函数是从 c# 代码执行的

> ID：15200479
> 
> 赞同：1
> 
> 时间：2013-03-04T11:28:07.447
> 
> 标签：c#-3.0, telephony, tapi

大家好！！！我是电话应用程序的新手，并尝试使用 Windows Tapi32.dll 和松下 TSP 制作一个非常简单的松下电话应用程序来更改服务等级 (COS)。我已经制作了一个功能，它将改变 PBX 中的服务等级..但是在运行应用程序服务类在 PBX 中没有改变我的代码也没有给我任何类型的错误......下面是我的代码......

```
[DllImport("Tapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
   internal static extern int lineDevSpecific(IntPtr hLine,uint dwAddressID,uint hCall, IntPtr lpParams,uint dwSize);

    [StructLayout(LayoutKind.Sequential)]
    public struct UserRec
    {
        public int dwMode
        {
            get
            {
                return dwMode;
            }
            set
            {
                dwMode = 4;
            }
        }

        public int dwParam1
        {
            get
            {
                return dwParam1;
            }
            set
            {
                dwParam1 = 18;
            }
        }
    }

   public static void Main(string[] args)
    {
        uint add = 0;
        uint call = 0;
        uint size = 0;

        string vline = "125";
        //IntPtr hline = &vline;
        IntPtr hline = Marshal.StringToHGlobalUni(vline);

        var sizeUserRec = Marshal.SizeOf(typeof(UserRec));
        var userRec = Marshal.AllocHGlobal(sizeUserRec);
        lineDevSpecific(hline, add, call, userRec, size);
        var x = (UserRec)Marshal.PtrToStructure(userRec, typeof(UserRec));
        Marshal.FreeHGlobal(userRec);
        Console.WriteLine("Hii");

 } 
```

请帮助我或指导我在写作方向上完成工作。提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:34:28.837

[lineDevSpecific()](http://msdn.microsoft.com/en-us/library/aa918530.aspx)通过其返回值 not 暴露错误条件`SetLastError()`，因此：

*   您可能应该`SetLastError=true`从`[DllImport]`属性中删除，

*   您应该根据文档中列出的错误常量测试函数的返回值：

    ```
    int result = lineDevSpecific(hline, add, call, userRec, size);
    if (result < 0) {
        // Handle error, depending on the value of 'result'.
    } 
    ```

# c++ - initUndistortRectifyMap 返回空地图矩阵（C++）

> ID：15200485
> 
> 赞同：0
> 
> 时间：2013-03-04T11:28:18.613
> 
> 标签：c++, opencv, stereo-3d

我首先使用 opencv 包 (stereo_calib.cpp) 中的示例代码校准了我的相机。现在我想用它来纠正立体匹配的图像。我开始纠正一个图像，但我无法让它工作，因为 initUndistortRectifyMap 返回一个不包含任何内容的地图。我无法找出我做错了什么。

```
Mat ciml, cimr, iml, imr, imlCalibrated, imrCalibrated;
vector<KeyPoint> keyl, keyr, keyInPlane, keyMatched;

//-- Load Images and convert to gray scale
string filenamel = "img/imL2.png";
string filenamer = "img/imR2.png";

ciml = imread(filenamel, 0);
cvtColor(iml, ciml, CV_GRAY2BGR);
cimr = imread(filenamer, 0);
cvtColor(imr, cimr, CV_GRAY2BGR);
Size imageSize = iml.size();

//-- Load calibration matrices
FileStorage fs_in, fs_ex;
fs_in.open( "intrinsics.yml", FileStorage::READ );
fs_ex.open( "extrinsics.yml", FileStorage::READ );
Mat rmap[2][2], cameraMatL, cameraMatR, coeffMatL, coeffMatR, R1, R2, P1, P2;
fs_ex["R1"] >> R1;  fs_ex["R2"] >> R2;
fs_ex["P1"] >> P1;  fs_ex["P2"] >> P2;
fs_in["M1"] >> cameraMatL;  fs_in["M2"] >> cameraMatR;
fs_in["D1"] >> coeffMatL;   fs_in["D2"] >> coeffMatR;
cout << "camera Matrix: " << endl << cameraMatL << endl << endl;

//-- Find remap values
initUndistortRectifyMap(cameraMatL, coeffMatL, R1, P1, imageSize, CV_16SC2, rmap[0][0], rmap[0][1]);
initUndistortRectifyMap(cameraMatR, coeffMatR, R2, P2, imageSize, CV_16SC2, rmap[1][0], rmap[1][1]); 
```

回答：这很简单，因为图像没有加载，图像大小为零，所以地图是一个空矩阵。我会尽快发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:27:16.613

这很简单，因为图像没有加载，图像大小为零，所以地图是空的。

# spring - j_spring_security_check 不可用

> ID：15200486
> 
> 赞同：1
> 
> 时间：2013-03-04T11:28:18.897
> 
> 标签：spring, spring-mvc, spring-security

我将 Spring Security 从 2 升级到 3

以前 Security.xml 有**AuthenticationProcessingFilter**和 **AuthenticationProcessingFilterEntryPoint**

所以我的新 Security.xml 是

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">
<beans:bean id="userAuthenticationService"
    class="com.raykor.core.service.UserAuthenticationService" />

<beans:bean id="shaEncoder"
    class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" />

<global-method-security />

<http auto-config="false" entry-point-ref="authenticationProcessingFilterEntryPoint">

    <intercept-url pattern="/resettingPassword.do**" access="ROLE_ADMIN" />
    <intercept-url pattern="/resetPassword.do**" access="ROLE_ADMIN" />
    <logout logout-success-url="/index.jsp" invalidate-session="true" />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="userAuthenticationService">
        <password-encoder ref="shaEncoder">
            <salt-source user-property="salt" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean id="authenticationFilter"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="filterProcessesUrl" value="/j_spring_security_check" />
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="authenticationFailureHandler"
        ref="failureHandler" />
    <beans:property name="authenticationSuccessHandler"
        ref="successHandler" />
</beans:bean>

<beans:bean id="successHandler"
    class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <beans:property name="alwaysUseDefaultTargetUrl" value="false" />
    <beans:property name="defaultTargetUrl" value="/home.do" />
</beans:bean>

<beans:bean id="failureHandler"
    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <beans:property name="defaultFailureUrl" value="/login.do?error=true" />
</beans:bean>

<beans:bean id="authenticationProcessingFilterEntryPoint"
    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/login.do" />
    <beans:property name="forceHttps" value="false" />
</beans:bean> 
```

`

还在web.xml 中添加了过滤器**springSecurityFilterChain**

在 login.do 上打开登录页面，在提交时提交给**j_spring_security_check**，用户名和密码为**j_username** & **j_password**

那么为什么说 j_spring_security_checknot avaliable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:46:12.140

我错过了添加自定义过滤器参考我更新为

```
<http auto-config="false" entry-point-ref="authenticationProcessingFilterEntryPoint">
    <custom-filter position="FORM_LOGIN_FILTER" ref="authenticationFilter"/>
    <intercept-url pattern="/resettingPassword.do**" access="ROLE_ADMIN" />
    <intercept-url pattern="/resetPassword.do**" access="ROLE_ADMIN" />
    <logout logout-success-url="/index.jsp" invalidate-session="true" />
</http> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:39:42.773

您实例化 a `UsernamePasswordAuthenticationFilter`，但仅通过创建它就不会成为安全过滤器链的一部分。尝试`auto-config="false"`从`http`配置元素中删除 ，并`<form-login>`在其中包含一个元素。我认为您通过 bean 定义完成的所有配置都可以使用更简洁的[命名空间配置](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html#ns-form-and-basic)来完成，这应该是 Spring Security 3 的首选。

# asp.net - 无法在服务器上上传网站

> ID：15200488
> 
> 赞同：0
> 
> 时间：2013-03-04T11:28:23.877
> 
> 标签：asp.net

我正在尝试上传网站。我不知道如何在上传时配置数据库（web.config 文件）。我正在使用 Somee.com ，熟悉 somee.com 或知道如何配置数据库的人请帮助我。

**webconfig 文件代码**

```
<configuration>
<connectionStrings>
<add name="abc" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Jai-Ganesh\Documents\Visual Studio 2010\WebSites\testinmg\App_Data\Database.mdf;Integrated Security=True;User Instance=True"/>
</connectionStrings>
<system.web>
<compilation debug="true" targetFramework="4.0"/>
<customErrors mode="RemoteOnly" ></customErrors>
</system.web>
</configuration> 
```

注意：我不知道服务器中数据源的路径是什么。

页面链接：[ **[http://www.imureditor.somee.com/add_value.aspx](http://www.imureditor.somee.com/add_value.aspx)** ][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:39:11.867

首先，您需要联系您的托管服务提供商以获取连接字符串。他们会给你IP地址（你也可以是主机名），然后你可以配置它。
请参见下面的示例；

```
<add name="connectStringName" connectionString="Data Source=somee.com;User ID=yourusernameforDB;password=yourpasswordforDB;Initial Catalog=yourDBName;" /> 
```

或者在下面举一个真实的例子；

```
<add name="KenSchoolConnectionString" connectionString="Password=1234;Data Source=192.168.1.1;Integrated Security=False;Initial Catalog=KenMISSchoolDB;User ID=sa" /> 
```

或访问[connectionstrings.com](http://www.connectionstrings.com/sql-server-2012#sqlconnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:30:53.490

您的连接字符串引用您的本地 SQL Server 实例并尝试附加本地文件；需要更改此连接字符串以反映服务器上的设置，因此您需要指定`Data Source`,`Catalog`和-将不起作用，并且附加 *.mdf 文件`User ID`可能也不起作用。`Password``Integrated Security``App_Data`

您的服务提供商负责为您提供所需的凭据，我们无法猜测它们。

# user-interface - 带有 RMI 服务器的学生 GUI

> ID：15200489
> 
> 赞同：0
> 
> 时间：2013-03-04T11:28:24.997
> 
> 标签：user-interface, rmi

我有一个程序可以像这样为学生客户端创建一个 RMI 服务器

姓名----地址-----班级组
汤姆-----低街-----网络 2
玛丽----高街----游戏 2
约翰----中街--网络2

我有一个使用 3 标题的 gui，但我想让 gui 在运行时自动更新，而不是通过单击按钮来显示更新的信息，而不是在此之后显示的上面的信息。

它只是我坚持的 GUI 位，我不知道如何在服务器和客户端运行之后然后在 GUI 运行时使用此信息填充 GUI。

到目前为止，我已经尝试过做一些不同的事情，但没有运气。

这是 Gui 代码

```
import java.awt.event.*;

import javax.swing.*;
import java.awt.GridLayout;

public class StudentGui extends JFrame
{
    private JTextField NameLabel= new JTextField("Name");
    private JTextField AddressLabel= new JTextField("Address");
    private JTextField GroupLabel= new JTextField("Group");
    private JTextField FirstName= new JTextField(" ");
    private JTextField SecondName= new JTextField(" ");
    private JTextField ThirdName= new JTextField(" ");
    private JTextField FirstAddress= new JTextField(" ");
    private JTextField SecondAddress= new JTextField(" ");
    private JTextField ThirdAddress= new JTextField(" ");
    private JTextField FirstGroup= new JTextField(" ");
    private JTextField SecondGroup= new JTextField(" ");
    private JTextField ThirdGroup= new JTextField(" ");

    StudentGui(String s){
        super(s);

            getContentPane().setLayout(new GridLayout(4,3));
            getContentPane().add(NameLabel);
            getContentPane().add(AddressLabel);
            getContentPane().add(GroupLabel);
            getContentPane().add(FirstName);
            getContentPane().add(FirstAddress);
            getContentPane().add(FirstGroup);
            getContentPane().add(SecondName);
            getContentPane().add(SecondAddress);
            getContentPane().add(SecondGroup);
            getContentPane().add(ThirdName);
            getContentPane().add(ThirdAddress);
            getContentPane().add(ThirdGroup);

            setSize(350,150);
            setVisible(true);

    }
      public static void main(String[] args){
         new StudentGui("RMI GUI Client");
      }
} 
```

学生客户端代码

```
import java.rmi.*;

public class StudentClient
{
    public static void main(String args[]){
        String url = "rmi:///";

        try{
            StudentInterface aTom=(StudentInterface)Naming.lookup(url+"Tom");
            StudentInterface aMary=(StudentInterface)Naming.lookup(url+"Mary");
            StudentInterface aJohn=(StudentInterface)Naming.lookup(url+"John");

            System.out.println("Name    Address     Class Group");
            System.out.println(aTom.getName()+" "+aTom.getAddress()+"   "+aTom.getGroup());
            System.out.println(aMary.getName()+"    "+aMary.getAddress()+"  "+aMary.getGroup());
            System.out.println(aJohn.getName()+"    "+aJohn.getAddress()+"  "+aJohn.getGroup());

            System.out.println("\n" + "Changed too:" + "\n" );

            aTom.setAddress("Lower Street");
            aMary.setAddress("Higher Street");
            aMary.setGroup("Game 3");
            aJohn.setGroup("Web 3");

            System.out.println("Name    Address     Class Group");
            System.out.println(aTom.getName()+" "+aTom.getAddress()+"   "+aTom.getGroup());
            System.out.println(aMary.getName()+"    "+aMary.getAddress()+"  "+aMary.getGroup());
            System.out.println(aJohn.getName()+"    "+aJohn.getAddress()+"  "+aJohn.getGroup());

        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

如果您需要代码的其余部分，可以提供。我并不是要为我做这件事，也许只是一个关于我将如何用这些信息填充 GUI 的指针。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:13:36.030

以防万一有人做过这样的事情，这就是我最终弄清楚的方式很容易:)

Java 代码：

```
import java.awt.event.*;

import javax.swing.*;
import java.awt.GridLayout;
import java.rmi.Naming;

public class StudentGui extends JFrame
{
    private JTextField NameLabel= new JTextField("Name");
    private JTextField AddressLabel= new JTextField("Address");
    private JTextField GroupLabel= new JTextField("Group");
    private JTextField FirstName= new JTextField("");
    private JTextField SecondName= new JTextField("");
    private JTextField ThirdName= new JTextField("");
    private JTextField FirstAddress= new JTextField("");
    private JTextField SecondAddress= new JTextField("");
    private JTextField ThirdAddress= new JTextField("");
    private JTextField FirstGroup= new JTextField("");
    private JTextField SecondGroup= new JTextField("");
    private JTextField ThirdGroup= new JTextField("");

    String url = "rmi:///";

    StudentGui(String s){
        super(s);

            getContentPane().setLayout(new GridLayout(4,3));
            getContentPane().add(NameLabel);
            getContentPane().add(AddressLabel);
            getContentPane().add(GroupLabel);
            getContentPane().add(FirstName);
            getContentPane().add(FirstAddress);
            getContentPane().add(FirstGroup);
            getContentPane().add(SecondName);
            getContentPane().add(SecondAddress);
            getContentPane().add(SecondGroup);
            getContentPane().add(ThirdName);
            getContentPane().add(ThirdAddress);
            getContentPane().add(ThirdGroup);

            setSize(350,150);
            setVisible(true);    

            try{
                StudentInterface aTom=(StudentInterface)Naming.lookup(url+"Tom");
                FirstName.setText(aTom.getName());
                FirstAddress.setText(aTom.getAddress());
                FirstGroup.setText(aTom.getGroup());
                StudentInterface aMary=(StudentInterface)Naming.lookup(url+"Mary");
                SecondName.setText(aMary.getName());
                SecondAddress.setText(aMary.getAddress());
                SecondGroup.setText(aMary.getGroup());
                StudentInterface aJohn=(StudentInterface)Naming.lookup(url+"John");
                ThirdName.setText(aJohn.getName());
                ThirdAddress.setText(aJohn.getAddress());
                ThirdGroup.setText(aJohn.getGroup());
            }catch(Exception a){
                a.printStackTrace();
            }
    }
      public static void main(String[] args){
         new StudentGui("RMI GUI Client");
      }
} 
```

# c# - 在 Visual Studio 2008 中使用 c#.net 远程连接存储在服务器上的 mysql 数据库

> ID：15200496
> 
> 赞同：-6
> 
> 时间：2013-03-04T11:28:58.757
> 
> 标签：c#, mysql

您好，我想与存储在服务器上的 mysql 数据库进行远程连接，并且我想在控制台上显示该数据库的所有表名，该怎么做？

关于数据库的信息是这样的

```
 server = "50.62.82.40";database = "db_admin"; uid = "db_usr";password = "wowow"; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T12:19:10.547

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql.Data.MySqlClient;
using System.Data.SqlClient;

namespace ConsoleApplication2
{

    class Program
    {
        public static void Main()
        {
            string myConnectionString = "SERVER=50.62.82.40;" +
                            "DATABASE=db_admin;" +
                            "UID=db_usr;" +
                            "PASSWORD=wowow`enter code here`;";

            MySqlConnection connection = new MySqlConnection(myConnectionString);
            MySqlCommand command = connection.CreateCommand();
            command.CommandText = "SHOW TABLES;";
            MySqlDataReader Reader;
            connection.Open();
            Reader = command.ExecuteReader();
            while (Reader.Read())
            {
                string row = "";
                for (int i = 0; i < Reader.FieldCount; i++)
                    row += Reader.GetValue(i).ToString() + ", ";
                Console.WriteLine(row);
            }
            connection.Close();
            Console.ReadLine();
        }
    }
} 
```

# asp.net - 显示视频时进行 ajax 调用以更新视频点击

> ID：15200503
> 
> 赞同：1
> 
> 时间：2013-03-04T11:29:27.987
> 
> 标签：asp.net, jquery, fancybox

我正在处理 asp.net 网页，我正在使用花式框显示你的视频。

到目前为止它工作正常，我还需要对 asp.net 文件进行 ajax 调用，`updateHits.aspx?VideoID=xyzxvtmiw` 以便我可以更新数据库中该视频的点击次数/观看次数（当有人点击缩略图时）。当用户单击 video.aspx 页面上视频的图像缩略图时，我不太确定如何进行此调用。

以下是我的脚本的一部分

```
<script type="text/javascript">
    //Code to Reinitialize Fancybox script when using update panel START
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);
    function InitializeRequest(sender, args) { }
    function EndRequest(sender, args) { InitMyFancyBox(); }
    $(document).ready(function () {
        InitMyFancyBox();
    });

    function InitMyFancyBox() {
        $(document).ready(function () {
            $(".youtube").click(function () {
                // first, get the value from the alt attribute
                var newTitle = $(this).find("img").attr("alt"); // Get alt from image
                $.fancybox({
                    'padding': 0,
                    'autoScale': false,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    //'title': this.title, // we will replace this line
                    'title': newTitle,  //<--- this will do the trick
                    'width': 680,
                    'height': 495,
                    'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                    'type': 'swf',
                    'swf': { 'wmode': 'transparent', 'allowfullscreen': 'true' }
                });
                return false;
            });
        });

    }
</script>

            <asp:Repeater ID="rptvideos" runat="server" >
                <ItemTemplate>
                <div class="single-video-wrapper">
                    <asp:HyperLink ID="hylnkvideo" CssClass="youtube"  NavigateUrl='<%# getVideoURL(Eval("VideoID"), Eval("VideoYoutubeID")) %>' runat="server">
                        <div class="video-image-wrapper">
                            <asp:Image ID="imgvideo" ImageUrl='<%# getVideoImagePath(Eval("VideoYoutubeID"), Eval("VideoYoutubeIcon")) %>'   AlternateText='<%# getVideoTitleDesc(Eval("VideoDate"),Eval("VideoTitle"),Eval("VideoDesc")) %>'  runat="server" CssClass="video-thumbnail" />
                        </div>
                       <div class="video-name">
                            <asp:Label ID="lblvideoName" CssClass="video-name-lbl" runat="server" Text='<%#Eval("VideoTitle") %>'></asp:Label>
                       </div>
                       <div class="video-issue">
                            <asp:Label ID="lblVideoIssue" CssClass="video-issue-lbl" runat="server" Text='<%#getIssuCode(Eval("IssueCode")) %>'></asp:Label>
                       </div>
                    </asp:HyperLink>
                </div>
                </ItemTemplate>
            </asp:Repeater> 
```

根据上面的代码，我正在重新初始化花式框，因为我有 updatePanel。

但我不确定我应该如何进行 ajax 调用， `updateHits.aspx?VideoID=xyzxvtmiw`以便我可以更新数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:38:33.193

您可以将 AJAX 调用添加到点击事件：

```
function InitMyFancyBox() {
    $(document).ready(function () {
        $(".youtube").click(function () {
            // first, get the value from the alt attribute
            var newTitle = $(this).find("img").attr("alt"); // Get alt from image
            $.fancybox({
                //...
            });
            // your Ajax call here
            $.ajax({
                type: "POST",
                url: "updateHits.aspx?VideoID=xyzxvtmiw"
            });
            return false;
         });
    });
} 
```

如果您希望将 ajax 调用与 fancybox init 分开，您可以在页面的其他位置添加另一个点击处理程序：

```
$(".youtube").click(function () {
    // your Ajax call here
    $.ajax({
        type: "POST",
        url: "updateHits.aspx?VideoID=xyzxvtmiw"
    });
} 
```

# c++ - 使用活动评估调用 DeleteInterpProc

> ID：15200511
> 
> 赞同：1
> 
> 时间：2013-03-04T11:29:54.367
> 
> 标签：c++, tcl

我正在编写一个执行 tcl 脚本的程序。当脚本有`exit`命令时，程序会因为这个错误而崩溃

```
DeleteInterpProc called with active evals
Aborted 
```

我正在调用`Tcl_EvalFile(m_interpreter, script.c_str())`where script 是文件名。我也尝试过`Tcl_Eval`使用参数解释器和“源文件名”。结果是一样的。其他 tcl 命令（例如 puts）解释器正常执行。如何解决这个问题？

```
#include <tcl.h>
#include <iostream>

int main() {
    Tcl_Interp *interp = Tcl_CreateInterp(); 

    //Tcl_Preserve(interp);

    Tcl_Eval (interp, "exit");

    //Tcl_Release(interp);

    std::cout << "11111111111" << std::endl;

    return 0;
} 
```

这是简单的情况。不打印“11111111111”。据我了解，调用`Tcl_Eval (interp, "exit");`. `Tcl_Preserve`添加和后的结果是一样的`Tcl_Release`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:42:22.320

问题在于解释器，即 Tcl 代码的执行上下文，正在从自身下面删除它的脚；这让人很困惑！至少你得到了一个干净的恐慌/中止，而不是一个令人作呕的难以重现的崩溃。

最简单的解决方法可能是：

```
Tcl_Preserve(m_interpreter);
// Your code that calls Tcl_EvalFile(m_interpreter, script.c_str())
// and deals with the results.
Tcl_Release(m_interpreter); 
```

请注意，在 之后`Tcl_Release`，`Tcl_Interp`句柄可能指的是已删除的内存。（是的，将`Tcl_Preserve`/包裹`Tcl_Release`在 RAII 中是合理的。）

* * *

如果您希望在脚本执行 之后允许您的代码运行`exit`，您必须采取额外的步骤。特别是，标准的 Tcl`exit`命令并非旨在导致返回到调用上下文：它将*导致*进程调用`_exit(2)`系统调用。要更改其行为，请将其替换：

```
// A callback function that implements the replacement
static int
MyReplacementExit(ClientData unused, Tcl_Interp *interp, int argc, const char *argv[])
{
    // We ought to check the argument count... but why bother?
    Tcl_DeleteInterp(interp);
    return TCL_OK;
}

int main() {
    Tcl_Interp *interp = Tcl_CreateInterp(); 

    // Install that function over the standard [exit]
    Tcl_CreateCommand(interp, "exit", MyReplacementExit, NULL, NULL);

    // Important; need to keep the *handle* live until we're finished
    Tcl_Preserve(interp);

    // Or run whatever code you want here...
    Tcl_Eval(interp, "exit");

    // Important piece of cleanup code
    if (!Tcl_InterpDeleted(interp))
        Tcl_DeleteInterp(interp);
    Tcl_Release(interp);
    // After this point, you *MUST NOT* use interp

    std::cout << "11111111111" << std::endl;
    return 0;
} 
```

在这些场景中进行内存管理的规则[在`Tcl_CreateInterp`](http://www.tcl.tk/man/tcl8.6/TclLib/CrtInterp.htm#M6). （那是 8.6 的手册页，但至少从 Tcl 7.0 开始，相关规则就一直是正确的，这已经是 2 多年前了。）一旦删除了解释器，您就不能再指望执行任何命令或访问其中的任何变量；Tcl 库为您处理状态展开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:38:32.333

`exit`替换（隐藏）命令并创建自己的`exit`命令以优雅地退出程序可能会更好。我不太擅长 C 和 Tcl C Api，但我希望这可以帮助你。

例如 Eggdrop 使用`die`命令优雅地退出。

# c# - 根据下拉列表值从数据库中选择值

> ID：15200515
> 
> 赞同：0
> 
> 时间：2013-03-04T11:30:10.830
> 
> 标签：c#

我有数据库表`leave_rec(name,date1,leave,ltype)`a`Dropdown list`和 a `gridview`。

我想这样做，当我在下拉列表中选择月份（例如 2 月）时，gridview 应该显示 2 月的所有表值`only(e.g.rohan leuva,2/28/2013,full,casual)`，表示月份 = 2（2 月）的记录。

如何克服这个问题？我试过了，但我现在只能显示所有的值`gridview`。任何帮助将不胜感激。

```
SqlConnection conn = new SqlConnection();
conn.ConnectionString=System.Configuration.ConfigurationManager.ConnectionStrings["leave"].ConnectionString;
conn.Open();
SqlCommand cmd = new SqlCommand("select date1,leave,ltype from leave_rec where name='" + DropDownList1.SelectedValue + "'", conn);
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds);
GridView1.DataSource = ds;
GridView1.DataBind(); 
```

上面的代码显示`date1`, `leave`, `ltype`，`dropdownlist1.selectedvalue.`但是现在我想要第二个下拉列表，其中月份将在那里。因此，当我在第二个中选择 2 月时，网格应仅显示 2 月的 dropdownlist1.selectedvalue 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:37:57.983

首先，您的查询需要是这样的：

```
select date1, leave, ltype from leave_rec where MONTH(date1) = 2 // February 
```

然后，将其集成到您的代码中：

```
SqlCommand cmd = new SqlCommand("select date1, leave, ltype from leave_rec where MONTH(date1) = @p1", conn);
cmd.Parameters.Add(new SqlParameter("p1", combo.SelectedKey)); 
```

使用参数而不是字符串连接来避免 SQL 注入，请参见此处的示例：http: [//www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

（当然，为“combo.SelectedKey”使用您自己的控件名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:44:59.203

我认为查询中的问题，而不是 name 你必须写 date1

```
SqlCommand cmd = new SqlCommand("select date1, leave, ltype from leave_rec where MONTH(date1) ='" + DropDownList1.SelectedValue + "'", conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:24:42.810

然后将数据集转换为 DataTable - 通过 dt.Filter=monthName.toString() 对其进行过滤，然后将其绑定到 GridView - dt.DefaultView;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T11:34:47.303

同意@Saurabh，研究使用 Linq 和存储过程来强制使用类型和建模。

# c++ - 比较 typedef 是否为同一类型

> ID：15200516
> 
> 赞同：9
> 
> 时间：2013-03-04T11:30:14.797
> 
> 标签：c++

我正在使用 C++（不是 11）并使用一些对整数数据类型具有不同 typedef 的库。有什么方法可以断言两个 typedef 是相同的类型？我自己想出了以下解决方案..安全吗？谢谢

```
template<typename T>
struct TypeTest
{
    static void Compare(const TypeTest& other) {}
};

typedef unsigned long long UINT64;
typedef unsigned long long UINT_64;
typedef unsigned int UINT_32;

int main()
{
    TypeTest<UINT64>::Compare(TypeTest<UINT64>()); // pass
    TypeTest<UINT64>::Compare(TypeTest<UINT_64>()); // pass
    TypeTest<UINT64>::Compare(TypeTest<UINT_32>()); // fail
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-04T11:39:13.910

在 C++11 中，您可以使用`std::is_same<T,U>::value`.

由于您没有 C++11，因此您可以自己实现此功能：

```
template<typename T, typename U>
struct is_same 
{
    static const bool value = false; 
};

template<typename T>
struct is_same<T,T>  //specialization
{ 
   static const bool value = true; 
}; 
```

完毕！

同样，您可以将`static_assert`¹实现为：

```
template<bool> struct static_assert;
template<> struct static_assert<true> {};  //specialization 
```

现在您可以将它们用作：

```
static_assert<is_same<UINT64,UINT64>::value>(); //pass
static_assert<is_same<UINT64,UINT32>::value>(); //fail 
```

或者您可以将其包装在一个宏中：

```
#define STATIC_ASSERT(x)  { static_assert<x> static_assert_failed; (void) static_assert_failed; } 
```

然后用作：

```
STATIC_ASSERT(is_same<UINT64,UINT64>::value); //pass
STATIC_ASSERT(is_same<UINT64,UINT32>::value); //pass 
```

如果您使用宏，那么如果断言失败，您将在编译器生成的消息中看到以下字符串：

```
static_assert_failed 
```

这很有帮助。使用错误消息中的其他信息，您将能够找出失败的原因。

希望有帮助。

* * *

^(1\. 请注意，在 C++11 中，`static_assert`是操作符（在编译时操作），而不是类模板。在上面的代码中，`static_assert`是一个类模板。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:34:02.330

由于您没有 C++11，请使用 boost。

```
BOOST_STATIC_ASSERT(boost::is_same<T, U>::value); 
```

您可以编写某种断言函数，而不是`BOOST_STATIC_ASSERT`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:37:02.407

std::type_info 可能会对您有所帮助。

# extjs - Extjs err:'0.manager.zseed' 未定义

> ID：15200521
> 
> 赞同：0
> 
> 时间：2013-03-04T11:30:25.340
> 
> 标签：extjs, window

当我关闭 Ext.Window，然后创建一个新的 Ext.Window 时，出现错误：'0.manager.zseed' 未定义。但是，这个问题只出现在 IE 8 中。

代码：

```
var win = new Ext.Window({
                                id: 'winBLNo',
                                title: 'myWindow',
                                width: 360,
                                height: 120,
                                layout: 'fit',
                                items: [formGetBLNoRule],
                                closeAction: 'close',
                                buttonAlign: 'center',
                                buttons: [
                                    {
                                        text: 'OK',
                                        handler: function() {}
                                    },
                                    {
                                        text: 'Exit',
                                        handler: function() {
                                            win.close();
                                        }
                                    }
                                ]
                            });
                            win.show(); 
```

请帮帮我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:28:03.160

Im assuming here that your using Ext JS 4 and that this window is a floating component. If so, your problem lies with the Z-index. Try setting this explicitly and that should solve your problem.

# java - 如何检查布尔变量的空条件

> ID：15200522
> 
> 赞同：2
> 
> 时间：2013-03-04T11:30:27.447
> 
> 标签：java

我有一个如图所示的课程

```
package com;

public class Person {
boolean registered;

public boolean isRegistered() {
    return registered;
}

public void setRegistered(boolean registered) {
    this.registered = registered;
}
} 
```

个人对象的数据将根据 DB 中存在的数据进行设置。问题是，对于较旧的记录，已注册的文件不存在。

所以我如何测试提交的文件是否存在？

包com；

```
public class Test {

    public static void main(String args[]) {
        Person per = new Person();

        if (per.isRegistered()) {

        }
    }

} 
```

我如何检查该 Person 对象的 per.isRegistered() 字段是否存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:32:23.107

你的`Person`类当前定义的方式，你不能，因为`boolean`（原始类型）没有`null`值，只有`true`and `false`。

您*可以*使用`Boolean`（对象等价物），它可以是`null`、`Boolean.TRUE`或`Boolean.FALSE`.

但是您更有可能希望在更深层次上解决这个问题。您说过您的数据库中有数据，但该字段不存在。这些记录是否被视为已注册？你的班级应该反映这个问题的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T11:33:27.430

`boolean`是原始数据类型，不能为空，只能为真或假。但是`Boolean`对象是布尔数据类型的说唱歌手，它可以是 null 和`Boolean.TRUE`and `Boolean.FALSE`;

```
public class Person {
    Boolean registered;
    ...
} 
```

...

```
Person per = new Person();

if (per.isRegistered()!=null ) {
    if(!per.isRegistered()){
         ...
    }else{
         ...
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T11:32:40.367

`boolean` *不能*`null`；_ 您需要使用 (`Boolean)`或构造一个复合类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T11:33:06.773

您可以使用`Boolean`（大写 B）类，它允许`NULL`为此类引用提供值。

或者，您可以使用`enum`具有三个可能值的 a：`NOT_AVAILABLE`、`YES`、`NO`。这具有更清晰的语义，并允许您稍后添加其他可能的值（如果需要）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T11:33:19.850

你需要一个三态布尔值；真，假，不存在。

您可以通过使用 Boolean 类而不是原始 boolean 并使用 null 作为“不存在”指示符来实现这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T11:34:45.480

我真的不明白你在想什么。但是如果你想处理一个布尔值，它的值可以是以下 {true/false/null} 之一，你应该使用`Boolean`一个简单`boolean`包装器的对象，但它可以`null`取值（因为每个 Java 对象都可以设置为空值）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-04T09:38:23.330

你应该使用[可选](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html)

```
if (Optional.ofNullable(per.isRegistered()).orElse(false)) {
  // ...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T11:34:14.320

`boolean registered`作为字段，默认情况下为 false。此外，与类`boolean`无关，`Object`但与原始值无关，所以根本不可能`null`。

只有一个空指针，你可能会在这里它是什么`per`时候`null`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-04T11:34:17.423

使列可为空并使用布尔值而不是布尔值。不过，对于具体问题，我认为您可以假设如果它为 null 则用户未注册。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-04T11:34:39.567

您必须扩展 person 类才能在测试类中使用它。您还必须定义布尔值。

# python - 迭代 mongodb 集合不会返回所有对象

> ID：15200536
> 
> 赞同：2
> 
> 时间：2013-03-04T11:31:06.683
> 
> 标签：python, mongodb

我有一个 cron 作业，它在 mongo 数据库上运行一个非常简单的脚本：

```
import pymongo
db=pymongo.Connection().dbase
ids=[]
for obj in db.coll.find(): ids.append(obj['_id'])
# log len(ids), db.coll.count() 
```

在日志中 db.coll.count() 始终为 651，len(ids) 也大多为 651，但有时它是 5,85,71 或其他低于 651 的随机数。谁能解释为什么会发生这种差异以及如何防止它请？

环境是：具有多个客户端的独立服务器，可以同时更新集合中的对象。

# php - 如何在选择组合框时填充文本框值

> ID：15200537
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:13.917
> 
> 标签：php, javascript, html

我有一个包含一个组合框和三个文本框的表单。这三个文本框用于计算目的。第一个文本框是金额，第二个是收到的，最后一个是只读的，它显示余额，组合具有值 - 完整、部分和无。如果用户选择完整，则收到的文本框应变为只读，并且在金额文本框中输入的金额应出现在收到的文本框中。如果用户选择部分，那么文本框应该可供用户输入金额。如果用户选择无，则余额文本框应填充金额文本框中输入的值。

```
<select id="pay" name="pay" tabindex="12">
    <option value=""></option>                           
    <option value="1">Full</option>                           
    <option value="2">Part</option>
    <option value="3">None</option>                            
</select>
<input type="text" id="amt" name="amt" value="" 
    size ="8" onblur="calculateText()" 
    style="background-color:transparent; color:blue; text-align:right" 
    tabindex="17"/>
<input type="text" id="resc" name="resc" value="" 
    disabled="disabled" size ="8" onblur="calculateText()"  
    tabindex="18"/>
 <input type="text" id="bal" name="bal"  
    readonly="readonly" value="" size ="8" 
    onblur="calculateText()" tabindex="19"/> 
```

添加了 jsFiddle：http: [//jsfiddle.net/MackieeE/fjXzY/1/](http://jsfiddle.net/MackieeE/fjXzY/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:31:08.447

请在您的 jsfiddle 的 javascript 框架中编写以下代码，并检查是否是您想要的..

```
function UpdatePay( n ) {

     if(n.options[n.selectedIndex].value==2){
         document.getElementById('amt').style.display='none';
        document.getElementById('resc').disabled = false;
        }
      if(document.getElementById('pay').value==3){
        document.getElementById('bal').value=document.getElementById('amt').value
        document.getElementById('resc').value=document.getElementById('amt').value
    }
    if(document.getElementById('pay').value==2){
        document.getElementById('bal').value=document.getElementById('resc').value
    }

}       document.getElementById('resc').value=document.getElementById('amt').value
    }
    if(document.getElementById('pay').value==2){
        document.getElementById('bal').value=document.getElementById('resc').value
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:38:52.213

这里有一些东西可以帮助您入门。它或多或少地完成了您所要求的工作，存在一些可用性问题，因为您没有说明在每种情况下要做什么，只是在有限的情况下。我会留给你让它按你的意愿工作。

```
<script>

function calculateText(el) {
  var form = el.form;
  var idx = form.pay.selectedIndex;

  if (idx <= 0) {
    form.reset();
    return;
  }

  if (form.pay.value == 1) {
    form.resc.disabled = true;
    form.resc.value = form.amt.value;
    form.bal.value = 0;

  } else if (form.pay.value == 2) {
    form.resc.disabled = false;
    form.bal.value = form.amt.value - form.resc.value;

  } else if (form.pay.value == 3) {
    form.resc.disabled = true;
    form.resc.value = 0;
    form.bal.value = form.amt.value;
  }
}

</script>

<form>
  <select name="pay" onchange="calculateText(this);">
    <option selected>Please select an option</option>                           
    <option value="1">Full                   
    <option value="2">Part
    <option value="3">None
  </select><br>
  Amount: <input name="amt" onblur="calculateText(this)"><br>
  Received: <input name="resc" disabled onblur="calculateText(this)"><br>
  Balance: <input name="bal" readonly><br>
  <input type="reset">
</form> 
```

# php - 如何更改此脚本以压缩目录数组？

> ID：15200539
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:20.880
> 
> 标签：php, directory, zip, archive

我是 SO 新手，也是 PHP 新手。我在网上找到了一个压缩目录的脚本，我已经对其进行了编辑，以便它将压缩文件发送到浏览器进行下载，然后从服务器中删除该文件。

它工作正常，但是我想压缩多个目录而不是一个。

我需要如何改变我的脚本来完成这个？

```
$date = date('Y-m-d');

$dirToBackup = "content";
$dest = "backups/"; // make sure this directory exists!
$filename = "backup-$date.zip";

$archive = $dest.$filename;

function folderToZip($folder, &$zipFile, $subfolder = null) {
    if ($zipFile == null) {
        // no resource given, exit
        return false;
    }
    // we check if $folder has a slash at its end, if not, we append one
    $folder .= end(str_split($folder)) == "/" ? "" : "/";
    $subfolder .= end(str_split($subfolder)) == "/" ? "" : "/";
    // we start by going through all files in $folder
    $handle = opendir($folder);
    while ($f = readdir($handle)) {
        if ($f != "." && $f != "..") {
            if (is_file($folder . $f)) {
                // if we find a file, store it
                // if we have a subfolder, store it there
                if ($subfolder != null)
                    $zipFile->addFile($folder . $f, $subfolder . $f);
                else
                    $zipFile->addFile($folder . $f);
            } elseif (is_dir($folder . $f)) {
                // if we find a folder, create a folder in the zip 
                $zipFile->addEmptyDir($f);
                // and call the function again
                folderToZip($folder . $f, $zipFile, $f);
            }
        }
    }
}

// create the zip
$z = new ZipArchive();
$z->open($archive, ZIPARCHIVE::CREATE);
folderToZip($dirToBackup, $z);
$z->close();

// download the zip file
$file_name = basename($archive);

header("Content-Type: application/zip");
header("Content-Disposition: attachment; filename=$file_name");
header("Content-Length: " . filesize($archive));

readfile($archive);

// delete the file from the server
unlink($archive);
exit; 
```

谢谢你的帮助！

厄玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:55:50.447

将 $dirToBackup 设置为

```
$dirToBackup = array("restricted","ci"); 
```

接着 ：

```
foreach($dirToBackup as $d){
    folderToZip($d, $z, $d);
} 
```

就这样。问候，

# android - 在android中使用自定义标头

> ID：15200541
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:26.493
> 
> 标签：android

我在 android 中使用自定义标头。问题是当活动加载大约 1 秒时，会显示默认的棕色/黑色标题。我该如何防止这种情况发生？

相关xml：

```
<resources>
    <style name="CustomWindowTitleBackground">
        <item name="android:background">#00693331</item>
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">70dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>

    </style>
</resources> 
```

我正在夸大java中的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:03:18.620

我们通过最初将主题设置为：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

我们为整个应用程序设置它，然后在活动中使用我们的自定义标题栏主题覆盖它。

# xml - 使用 LibXML 修改 xml 文件

> ID：15200542
> 
> 赞同：1
> 
> 时间：2013-03-04T11:31:31.660
> 
> 标签：xml, xml-libxml

我正在尝试修改具有 XML 语法的文件

```
<!DOCTYPE xml>
<lrf instance_prefix="U" pdescription="Type:%20DDR2%20SDRAM;&#xa;Density:%204Gb;&#xa;Data:%20x16;&#xa;Banks:%208;&#xa;Configuration:%2016M%20x%2016%20x%208;&#xa;Voltage:%201.8V;&#xa;Standard:%20JEDEC;&#xa;Pins:%2084;&#xa;Package:%20FBGA;&#xa;Package%20Standard:%20MO-207;%20Package%20Variation:%20DK-z;&#xa;Die:%20Single%20Die(SD)%20Package;&#xa;Target%20Device%20Family:%20Virtex-7;" unit="mm" target_family="V7" jedec_type="ddr2_sdram_mo207_dk_z" y_offset="0" interface_type="NormalInterface" x_offset="0" model_constraint="same_vccaux" pin_size="0.45">
 <group group_number="1" group_name="Address_Control" group_constraint="memory_address" group_color="#9accff">
  <pin pin_number="M8" pin_type="Input" pin_standard="SSTL18_II" pin_x_loc="5.6" signal_name="A&lt;0>" pin_y_loc="2.4" symbol_pin_name="DDR2_SDRAM_A&lt;0>"/>
  <pin pin_number="M3" pin_type="Input" pin_standard="SSTL18_II" pin_x_loc="1.6" signal_name="A&lt;1>" pin_y_loc="2.4" symbol_pin_name="DDR2_SDRAM_A&lt;1>"/>
  .
  .
  .
 </group>
 <group group_number="4" group_name="Power" group_color="#ff0000">
  <pin pin_number="A1" pin_type="Supply" pin_voltage="1.8" pin_x_loc="0" signal_name="VDD" pin_y_loc="11.2" symbol_pin_name="VDD"/>
  <pin pin_number="E1" pin_type="Supply" pin_voltage="1.8" pin_x_loc="0" signal_name="VDD" pin_y_loc="8" symbol_pin_name="VDD"/>
  <pin pin_number="J9" pin_type="Supply" pin_voltage="1.8" pin_x_loc="6.4" signal_name="VDD" pin_y_loc="4.8" symbol_pin_name="VDD"/>
  .
  .
  .
 </group>
.
.
</lrf> 
```

我的任务是查找值为“VDD”的信号名称，如果存在，则删除整个`<pin .... />`节点。如果在上述任务之后组节点中没有可用的元素，则删除该`<group....> </group>`节点。

我已经使用 XML::Simple 尝试过这个任务，但是顺序会随着元素的变化而变化。因此，我正在尝试使用 XML::LibXML 完成任务。任何人都可以对如何使用 LibXML 完成任务有所了解。任何帮助深表感谢。谢谢

# python - 如何在不运行脚本的情况下检查是否安装了 Python 脚本导入的所有模块？

> ID：15200543
> 
> 赞同：1
> 
> 时间：2013-03-04T11:31:35.133
> 
> 标签：python, deployment

我想在实际运行脚本之前检查是否安装了脚本导入的所有模块，因为脚本非常复杂并且通常运行多个小时。此外，它可能会根据传递给它的选项导入不同的模块，因此仅运行一次可能无法检查所有内容。所以，我不想在新系统上运行这个脚本几个小时，只是因为缺少模块而看到它在完成之前失败。

显然，pyflakes 和 pychecker 在这里没有帮助，如果我错了，请纠正我。我可以做这样的事情：

```
$ python -c "$(cat *.py|grep import|sed 's/^\s\+//g'|tr '\n' ';')" 
```

但它不是很健壮，例如，如果“import”这个词出现在一个字符串中，它就会中断。

那么，我怎样才能正确地完成这项任务呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:52:46.640

您可以使用标准库模块查找器中的*ModuleFinder**使用*[文档](http://docs.python.org/2/library/modulefinder.html) 中的示例

 *```
from modulefinder import ModuleFinder
finder = ModuleFinder()
finder.run_script('bacon.py')

print 'Loaded modules:'
for name, mod in finder.modules.iteritems():
    print '%s: ' % name,
    print ','.join(mod.globalnames.keys()[:3])

print '-'*50
print 'Modules not imported:'
print '\n'.join(finder.badmodules.iterkeys()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:41:01.883

您可以编写一个`test.py`仅包含所有可能导入的内容，例如：

```
import these
import are
import some
import modules 
```

运行它，如果有任何问题 python 会让你知道*

# jqgrid - 从后面的代码访问 jq 网格中选定行的单元格

> ID：15200546
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:39.147
> 
> 标签：jqgrid

我在我的 aspx 页面中有一个 JQGrid，当用户单击网格的一行时，我想从后面代码中的选定行中获取网格的所有单元格。这可能不使用 Jquery ..？？

谢谢-Vishu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:46:01.733

您只需将[onSelectRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)回调添加到 jqGrid 定义。每次用户选择一行时都会调用回调。`onSelectRow`回调接收所选行的`id`值作为第一个参数的值。在`onSelectRow`回调内部，您可以使用`$(this).jqGrid("getRowData", id)`它来获取代表所选行的单元格的对象。`name`对象的属性名称与列的属性名称相同`colModel`。

# php - 如果一个元素在同一个数组中出现多次，我如何计算它？

> ID：15200547
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:40.077
> 
> 标签：php, arrays

如果一个元素在同一个数组中出现多次，我如何计算它？

我已经尝试过使用array_count_values，但它不起作用，是因为我的数组中有多个键和值吗？

这是我的数组（restlist）的输出

```
Array ( 
[0] => Array ( [restaurant_id] => 47523 [title] => cafe blabla) 
[1] => Array ( [restaurant_id] => 32144 [title] => test5) 
[2] => Array ( [restaurant_id] => 42154 [title] => blabla2 ) 
[3] => Array ( [restaurant_id] => 32144 [title] => test5) 
[4] => Array ( [restaurant_id] => 42154 [title] => blabla2 ) 
) 
```

我希望它计算相同元素在我的数组中出现的次数，然后将计数值添加到我新创建的“键”中，称为同一数组中的命中。

```
Array ( 
[0] => Array ( [restaurant_id] => 47523 [title] => cafe blabla [hits] => 1) 
[1] => Array ( [restaurant_id] => 32144 [title] => test5 [hits] => 2) 
[2] => Array ( [restaurant_id] => 42154 [title] => blabla2 [hits] => 2) 
) 
```

这就是我尝试做我想做的事情的方式。

```
 foreach ($cooltransactions as $key) 
        {
            $tempArrayOverRestaurants[]= $key['restaurant_id'];
        }

        $wordsRestaruants = array_count_values($tempArrayOverRestaurants);
        arsort($wordsRestaruants);

    foreach ($wordsRestaruants as $key1 => $value1)
         {

                    $temprestaurantswithhits[] = array(
                        'restaurant_id' => $key1,
                        'hits' => $value1);     
        }

foreach ($restlistas $key) 
{
    foreach ($temprestaurantswithhits as $key1) 
    {
        if($key['restaurant_id'] === $key1['restaurant_id'])
        {
                      $nyspisestedsliste[] = array(
                        'restaurant_id' => $key['restaurant_id'], 
                        'title' => $key['title'],
                        'hits' => $key1['hits']);   
        }
    }
} 
```

我知道这可能是做我想做的事的菜鸟方式，但我还是 php 的新手 ..我希望你能提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:35:12.373

只需尝试使用关联数组：

```
$input  = array( /* your input data*/ );
$output = array();

foreach ( $input as $item ) {
  $id = $item['restaurant_id'];

  if ( !isset($output[$id]) ) {
    $output[$id] = $item;
    $output[$id]['hits'] = 1;
  } else {
    $output[$id]['hits']++;
  }
} 
```

如果要重置密钥，请执行以下操作：

```
$outputWithoutKeys = array_values($output); 
```

# php - codeigniter join 2表数据

> ID：15200548
> 
> 赞同：6
> 
> 时间：2013-03-04T11:31:44.683
> 
> 标签：php, codeigniter, join

大家好，我是codeigniter的新手，目前正在项目中的一个小项目上工作，我正在尝试加入两个表并在单个表中显示数据。我查看了codeigniter的用户指南，我不确定这是如何工作的

`$this->db->join();`

什么表应该是第一个，什么 id 键应该是第一个。有人可以详细解释一下吗，如果可以的话，请使用示例。我正在尝试加入凭证表和 tblanswers。Tnx 用于回答。

我试图用这个例子编写一个函数：

```
$this->db->select('*');
$this->db->from('blogs');
$this->db->join('comments', 'comments.id = blogs.id');

$query = $this->db->get(); 
```

**编辑：** 代替在codeigniter中使用join方法是否可以使用一个简单的函数来分别检索两个表数据？我想要的只是将数据库表中的数据回显到要显示的网站页面中的 html 表中是否可以编写两个 get 函数来分别检索两个表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T11:35:00.610

首先是什么表并不重要......简单地说：

```
<?php

$this->db->select('t1.name, t2.something, t3.another')
     ->from('table1 as t1')
     ->where('t1.id', $id)
     ->join('table2 as t2', 't1.id = t2.id', 'LEFT')
     ->join('table3 as t3', 't1.id = t3.id', 'LEFT')
     ->get();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-09T06:37:36.487

下面是它的工作原理：

1.  假设我们有两个表，即*学生，图书馆。*

**注意：但请记住，如果您想使用 where 条件/，则其中一个列应该匹配，这里我们假设两个表都有*std_id*列**

2.  编写选择查询如下，在括号中写下你想要的所有东西

注意：如下图所示，不要给每一个单独加上引号，把它放在一起。

*注意：假设我们想要*名字，phone_no。*来自学生表和*book_name*表单库表。*

```
 $this->db->select('name, phone_number, book_name'); 
```

3.  现在编写 from 查询并编写表名之一（无规则）

    ```
     $this->db->from('student'); 
    ```

4.  现在用连接查询将它与另一个表连接起来

    ```
     $this->db->join('library', 'students.std_id=library_std_id'); 
    ```

5.  现在写出你想要书名表格库表的条件，其中std id = 1（实际上你需要从视图/数据库中获取这个id）

    ```
     $this->db->where('std_id', 1);
      $q= $this->db->get(); 
    ```

就是这样，现在您可以打印并检查结果了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:34:55.790

```
$this->db->join('comments', 'comments.id = blogs.id'); 
```

通过这一行，您可以告诉我：在评论中搜索我所有 id 等于 blogs.id 的评论。

我认为通常是这样的：

```
$this->db->join('comments', 'comments.blogs_id = blogs.id'); 
```

您必须在表中插入一个名为 blogs_id 的字段（int value unisgned），因为博客可以有更多评论。第一个或第二个值的位置不重要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-23T12:14:56.750

嗨，这将适用于在 codeIgnator 中加入两个表。

```
$this->db->select("chat.id,chat.name,chat.email,chat.phone,chat.date,post.post");
      $this->db->from('chat');
      $this->db->join('post', 'chat.id = post.id');
      $query = $this->db->get();

    if($query->num_rows() != 0)
    {
        return $query->result();
    }
    else
    {
        return false;
    } 
```

您可以根据需要更改查询，执行跟踪和错误方法以获得适当的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-04T11:30:56.360

这是我尽可能多地联合多个表格的代码。

我有 3 张桌子`professeurs`和.`publications``support`

```
public function toutesdonnées(){

    $this->db->select("*");
      $this->db->from('publication');
      $this->db->join('support', 'publication.idsup = support.idsup');
      $this->db->join('professeurs', 'publication.emailprof = professeurs.emailprof');
      $query = $this->db->get();

    if($query->num_rows() != 0)
    {
        return $query->result();
    }
    else
    {
        return false;
    } 
```

# mars-simulator - mips 设置变量问题

> ID：15200549
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:46.200
> 
> 标签：mars-simulator

编写一段 MIPS 代码，给定 $s0 和 $s1 中的值，将以下内容放入 $t* 寄存器：

```
$t0 = $s0
$t1 = $s1
$t2 = $t0 + $t1
$t3 = $t1 + $t2
...
$t7 = $t5 + $t6 
```

换句话说，对于从 $t2 到 $t7 的每个寄存器，它存储前两个 $t* 寄存器值的总和。$s0 和 $s1 寄存器包含初始值。不要在代码中设置 $s0 和 $s1 的值。相反，学习如何使用 MARS 手动设置它。将您的代码保存到 sum.s 中。

所以我认为它只是想让我去

```
add $t4, $t2, $t3
add $t5, $t3, $t4 
```

ETC

但是不在我的代码中而是在 MARS 中设置 $s0 和 $s0 的值是什么意思？我意识到 MARS 是一个 IDE，但是如何使用 MARS 设置变量？

还有一个问题，你如何在 MARS 中设置断点？我可以用 gui 版本做到这一点，但他们希望我们使用终端。

# php - 如何通过 Magento CE 1.7 中的自定义模块更改订单状态？

> ID：15200552
> 
> 赞同：0
> 
> 时间：2013-03-04T11:31:56.900
> 
> 标签：php, magento

我想创建一个加载所有订单的 magento 管理模块。当用户选择订单时，它将显示订单状态。用户可以更改该订单状态。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:12:51.977

如果用户是指有权访问后台的人，则可以在 XML 配置文件中添加新状态：[http ://blog.decryptweb.com/order-state-status-magento/](http://blog.decryptweb.com/order-state-status-magento/)

如果您想在前台拥有它，您需要编写新模块，并记住，您还需要检查用户可以从哪个状态更改，他不会将“已完成”更改为其他内容，您将发送产品事实上两次。

**更新：**在企业版中，还有状态和状态表 AFAIK。

# java - Hibernate + MSSQL，无法将值 NULL 插入列

> ID：15200555
> 
> 赞同：0
> 
> 时间：2013-03-04T11:32:09.617
> 
> 标签：java, sql-server, hibernate

拥有 Hibernate 和 MSSQL 环境。我遇到了错误：'无法将值 NULL 插入列'comment_id'，表'CHT.dbo.reporter_comments'；列不允许空值。插入失败。休眠配置：

```
<id unsaved-value = "null" type = "int" name="commentId" column="comment_id">
  <generator class="identity"/>
</id>

    <property name="reporterId" column="REPORTERID" />
    <property name="adminComments" column="COMMENT" />
    <property name="commentDate" column="COMMENT_DATE"/>
    <property name="commentBy" column="COMMENT_BY"/> 
```

'comment_id' 列在 db 中具有 'identity' 属性：如果我使用 db 客户端进行插入：

```
insert into REPORTER_COMMENTS (REPORTERID, COMMENT, COMMENT_DATE, COMMENT_BY) 
values (15119, 'test', '2013-03-04 05:45:25', 'admin'); 
```

它非常适合我。

休眠日志：

> ReporterComments] [插入 REPORTER_COMMENTS (REPORTERID, COMMENT, COMMENT_DATE, COMMENT_BY) 值 (?, ?, ?, ?)] java.sql.SQLException: [BEA][SQLServer JDBC Driver][SQLServer]无法将值 NULL 插入列'comment_id'，表'CHT.dbo.reporter_comments'；列不允许空值。插入失败。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:39:10.957

您的`comment_id`专栏实际上是`IDENTITY`专栏吗？如果不是，那么这就是您的问题，因为 Hibernate`comment_id`在使用标识生成器时不会在插入语句中包含该列，而是依赖于数据库来生成该值。

# client-side - Netbeans 7.3 - 新的 html5 项目 - 在哪里放置 php 和 mvc？

> ID：15200559
> 
> 赞同：3
> 
> 时间：2013-03-04T11:32:27.230
> 
> 标签：client-side, server-side, netbeans-7, restful-architecture

我可能在这里遗漏了一些非常基本的东西。

Netbeans 7.3 刚刚推出，带有这个新的 HTML5 项目功能。

看起来很有趣，但它的设置方式让我提出了一些问题，这些问题动摇了我们自己开发方式的基础。

1) 如果我们在给定的 php 框架上使用 MVC 结构构建，那么我们如何将它们与 HTML5 项目功能联系起来？

2) 就网络开发而言，我考虑到没有服务器端对应物（登录、数据库等），就没有有用的 HTML5 应用程序这样的想法。- 我错了吗 ？

3）到目前为止，我们在服务器端和客户端都在同一个项目上开发，使用 MVC 来订购这些不同的编程方法。但是，这似乎迫使我们将客户端的开发拆分为一个单独的项目，将事物的服务器端拆分为另一个项目。关于这点 3，是否通过这种分离完成了非常大的项目？

任何灯都非常感谢。

# python - 计算函数的逆函数--库

> ID：15200560
> 
> 赞同：10
> 
> 时间：2013-03-04T11:32:27.853
> 
> 标签：python, c, math

是否有任何库可用于反转函数？更具体地说，给定一个函数`y=f(x)`和域，有没有可以输出的库`x=f(y)`？可悲的是，我不能在我的应用程序中使用 matlab/mathematics，寻找 C/Python 库..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-10-30T23:51:40.423

我有点晚了，但是对于这篇文章的未来读者来说，我刚刚发布了一个可以精确执行此操作的 python 包。[https://pypi.python.org/pypi/pynverse](https://pypi.python.org/pypi/pynverse) 在描述中有详细的使用方法和操作方法！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T11:54:03.923

如前所述，并非所有函数都是可逆的。在某些情况下，施加额外的约束会有所帮助：考虑`sin(x)`.

一旦你确定你的函数有一个唯一的逆，求解方程`f(x) = y`。该解决方案为您提供相反的结果，`y(x)`。

在 python 中，从`scipy.optimize`.

# php - 替换字符串开头的每个空格

> ID：15200567
> 
> 赞同：1
> 
> 时间：2013-03-04T11:33:00.053
> 
> 标签：php, preg-replace

使用 php preg_replace。

试过：

```
$test = "      123";
$test = preg_replace("/^\s/","?",$test);
echo '|' . $test; 
```

输出：

> |？123

我需要的：

> |?????????123

还尝试了另一种变体，但它们都只替换了 FIRST 空格或 ALL-IN-ONE ......

* * *

**字符串内部或字符串末尾的空格 - 不应触摸。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:36:58.803

如果没有正则表达式，您可能会更容易做到这一点，利用[`strspn`](http://www.php.net/manual/en/function.strspn.php)：

```
$whitespaceCount = strspn($test, " \t\r\n");
$test = str_repeat("?", $whitespaceCount).substr($test, $whitespaceCount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:37:26.883

```
<?php
$test = "      12 3  s";
$test = preg_replace_callback("/^([\s]*)([^\s]*)/","mycalback",$test);
echo '|' . $test;

function mycalback($matches){
 return str_replace (" ", "?", $matches[1]).$matches[2];
}

?> 
```

输出：

```
|??????12 3 s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:37:52.993

为什么你不试试这个：

```
echo '|' . preg_replace('/\s/','?','    123'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:39:51.027

试试这个：`^`从检查字符串开头的模式中删除，所以会发生什么它只替换开头的空格（只有一个空格）

```
$test = "      123";
$test = preg_replace("/\s/","?",$test);
echo '|' . $test; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T11:39:56.983

```
$test = "      123";
$test = preg_replace("/^[ ]|[ ]/","?",$test);
echo '|' . $test; 
```

# string - 将 cv::mat 转换为 OpenCV 中的字节串

> ID：15200570
> 
> 赞同：4
> 
> 时间：2013-03-04T11:33:09.877
> 
> 标签：string, byte, file-conversion

我需要实现一个函数，该函数需要一个图像并返回一个文件，比如一个包含字节字符串的文本文件。我所做的是：

```
#include <cv.h>
#include <highgui.h>
using namespace cv;

int main( int argc, char** argv )
{
cv::Mat image;
image = cv::imread("imaje.bmp");
if(image.empty())
return 0;

cv::imshow("Image", image);
cv::waitKey();

return 0;
} 
```

现在我需要将 tha cv:Mat 图像转换为字节数组。请指导我如何进行？？？提前致谢 ... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-25T08:41:38.523

我知道，现在回答有点晚了......但它可能对其他人有用。

您可以通过执行 std::string 将 cv::Mat 转换为字符串`my_cv_mat(src.begin<unsigned char>(), src.end<unsigned char>());`

然后你可以使用字符串的 .c_str() 方法得到一个 char* 。由于 char 和 byte 具有相同的大小，我猜您只需要将 char* 转换为 byte*。

# java - Java 错误：无法找到或加载主类 Vehicle

> ID：15200571
> 
> 赞同：0
> 
> 时间：2013-03-04T11:33:18.177
> 
> 标签：java

我在成功编译后尝试加载 Vehicle 类，但出现此错误： `Error: could not find or load main class Vehicle`

我认为我的代码中可能存在错误，如下所示：

```
public class Vehicle
{
    String make;
    String color;
    boolean engineState;

    void startEngine()
    {
       if (engineState == true)
          System.out.println("The engine is already on!");
       else
       {
           engineState = true;
           System.out.println("The engine is now on.");
       }
    }

    void showAttributes()
    {
      System.out.println("This vehicle is a " + color + "
      " + make);
      if (engineState == true)
        System.out.println("The engine is on.");
      else
        System.out.println("The engine is off.");
    }

    public static void main(String args[])
    {
        // Create a new vehicle and set its attributes.
        Vehicle car = new Vehicle();
        car.make = "Rolls Royce";
        car.color = "Midnight blue";
        System.out.println("Calling showAttributes ...");
        car.showAttributes();

        System.out.println("--------");
        System.out.println("Starting the engine ...");
        car.startEngine();
        System.out.println("--------");
        System.out.println("Calling showAttributes ...");
        car.showAttributes();

        // Let’s try to start the engine again.
        System.out.println("--------");
        System.out.println("Starting the engine ...");
        car.startEngine();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:39:26.703

问题不在于您的代码，而在于您如何启动它。

找到你的类文件被编译到的位置，并将这个根添加到你的类路径中。

例如，如果您的类文件被编译为：

```
<project root>/classes 
```

然后您可以按如下方式运行它们：

```
java -cp <project root>/classes Vehicle 
```

查看有关该主题的[Oracle 文档以获取更多详细信息](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:39:43.177

在我的日食中工作正常，结果如下：

```
Calling showAttributes ...
This vehicle is a Midnight blueRolls Royce
The engine is off.
--------
Starting the engine ...
The engine is now on.
--------
Calling showAttributes ...
This vehicle is a Midnight blueRolls Royce
The engine is on.
--------
Starting the engine ...
The engine is already on! 
```

代码有效

# jquery - Slickgrid 列宽应根据最宽的行内容自动调整大小

> ID：15200574
> 
> 赞同：4
> 
> 时间：2013-03-04T11:33:22.217
> 
> 标签：jquery, slickgrid

在 Slickgrid 中，有什么方法可以根据最宽的行内容自动调整列宽？

在示例示例中，我可以看到列字段的硬编码列的值[http://mleibman.github.com/SlickGrid/examples/example2-formatters.html](http://mleibman.github.com/SlickGrid/examples/example2-formatters.html)

```
var columns = [
    {id: "title", name: "Title", field: "title", width: 120, cssClass: "cell-title", formatter: formatter},
    {id: "duration", name: "Duration", field: "duration"},
    {id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar},
    {id: "start", name: "Start", field: "start", minWidth: 60},
    {id: "finish", name: "Finish", field: "finish", minWidth: 60},
    {id: "effort-driven", name: "Effort Driven", sortable: false, width: 80, minWidth: 20, maxWidth: 80, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark}
  ]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:54:21.487

You can use the `forceFitColumns` option, that will resize each columns to fit, though if your width is not wide enough it will try to fit according to your minimal and maximal values of width, so you might want to add a `minWidth` and a `maxWidth` so you have a bit more control.

For example the columns definition might look like this:

```
{id: "duration", name: "Duration", field: "duration", minWidth:50, width:100, maxWidth:120} 
```

and the options definition like this:

```
options = {
        enableCellNavigation: true,
        enableColumnReorder: false,
        multiColumnSort: true,
        asyncEditorLoading: true,
        forceFitColumns: true // this one is important        
    }; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T13:11:30.357

是的，补充一点。它消除了行虚拟化的全部意义。但是，如果您的数据集很小，您可以预先计算它。这是我用来计算某些文本宽度的函数。

```
 String.prototype.textWidth = function(font) {
    var f = font || '12px Helvetica,​Arial,​sans-serif',
      o = $('<div>' + this + '</div>')
            .css({'position': 'absolute', 'float': 'left', 'white-space': 'nowrap', 'visibility': 'hidden', 'font': f})
            .appendTo($('body')),
      w = o.width();

    o.remove();
  return w;
} 
```

我所做的是计算标题的 textWidth() 。“名称”值。所以至少该列是标题文本的宽度。您无需担心虚拟化即可做到这一点。外汇...

```
columns.push({ id: "col1", name: "Column 1", field: "col1", width: "Column 1".textWidth() + <Some padding?>}); 
```

或者，如果您真的想扫描整个数据数组，针对列/字段中的每个数据值调用该函数，然后保持最大值。但这是非常低效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T17:26:13.987

是的，可以做到适合内容，但你必须自己做。`forceFitColumns`听起来很接近，但它会增长到填充视口，而不用考虑单元格内容。

@Tim 的想法是正确的，尽管我不会说它脱离了行虚拟化的点。因为 SlickGrid 让您可以很好地访问视口，所以`grid.getViewport().top // bottom`您可以非常成功地仅计算视口中内容的大小。

我在这里描述了如何回答这个类似的问题：[https ://stackoverflow.com/a/22231459](https://stackoverflow.com/a/22231459)

# android - HtpsURLConnection 无法建立连接

> ID：15200576
> 
> 赞同：0
> 
> 时间：2013-03-04T11:33:25.493
> 
> 标签：android, rest, ssl

我需要使用`SSL`with连接到服务器`REST`。我正在使用`HttpsURLConnection`，但不知何故我什至无法从服务器获取响应代码。url 是正确的，当我尝试获取响应代码时，它只会抛出 nullPointerException。

代码片段：

```
URL url = new URL("https", "xxx.com/yyy/zzz.svc", "myApi/test");

HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
Log.e("Response code", "Response from server: " + conn.getResponseCode()); 
```

我在这里做错了什么？

注意：我必须将远程服务器地址和授权令牌添加到标头，但无论如何它必须返回一些响应代码。对于授权错误，我必须收到错误 400。

编辑： nullPointerException 隐藏在`Malformed URL`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:01:35.163

查看[如何从 URL 解析/读取 JSON 数据。](http://mobile.dzone.com/news/android-tutorial-how-parse)

# android - 在它发生之前捕获方向变化事件

> ID：15200580
> 
> 赞同：0
> 
> 时间：2013-03-04T11:33:31.483
> 
> 标签：android, layout, rotation, orientation

将方向锁定为纵向或横向很简单。

```
<activity android:name=".MyActivity"
           android:screenOrientation="portrait"> 
```

或在屏幕旋转时捕获：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

但是如何在旋转事件发生之前捕获它呢？如果方向发生变化，我想控制布局上发生的情况，覆盖实际旋转屏幕的默认行为。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:47:37.193

在 onPause() 方法中使用这段代码。当 rotatio 改变时，activty 会重新构建它自己，这意味着再次调用 on-Create 并且之前的活动是 finish();

```
 int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE){
        if (display.getRotation() == Surface.ROTATION_0)
        // play with different angles e.g ROTATION_90, ROTATION_180
    } 
```

因此，当旋转发生变化时，将调用以前的活动的 onPause()，在那个阶段你可以决定你想要的新方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T08:27:57.587

1.  `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`通过in强制活动保持在一种模式（例如横向）`onCreate(..)`

2.  附加您自己的方向监听器，

    orientationEventListener = new OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {

    ```
     @Override
            public void onOrientationChanged(int orientation) {
                if (Math.abs(orientation - 90) < 30){
                       // your device orientation has changed, you can update UI                        accordingly, (layout won't rotate).
            }
        };
        orientationEventListener.enable(); 
    ```

请记住，如果您这样做，您将在放弃配置更改时收到“反转”的触摸事件的 x 和 y 轴。此外，如果您有一个导航栏，它将保持在原处并且​​不会旋转！

# wix - 在 Wix 中设置组件的条件

> ID：15200581
> 
> 赞同：3
> 
> 时间：2013-03-04T11:33:38.287
> 
> 标签：wix, installation, windows-installer

在我的 Wix 中，我有很多以这种方式包含的文件：

```
<Component Id="mycomponent" Guid="*" Feature="Core" >
  <Condition>$(var.Include) = 1</Condition>
  <File Id="mycomponent.file" KeyPath="yes" 
        Source="$(var.BinDir)\mycomponent.file" />
</Component> 
```

所以我可以传入不同的 var.Include 值来为不同的环境生成包。

While the resulting packages do seem to work, however I noticed the size of the packages are always quite big even when I set it to not include these components. It looks as if WiX is always including all components in building the msi, and only chose to not install these components when the package was build with var.Include = 0...

Is this a normal behavior?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:41:40.723

条件元素用于确定组件是否被安装，而不是它是否包含在构建中。还要确保不要混淆条件语句和预处理器变量/语句中使用的 Windows Installer 属性。两种不同的野兽。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T12:17:21.990

您可以通过使用一些文件压缩/解压缩软件（例如 7zip）打开您的 MSI 输出文件来确认，然后在打开的 MSI 文件中打开 package.cab 文件。并检查您的 ID 为“mycomponent”的文件是否存在。

我希望它是预期的，因为它依赖于变量，甚至可以从安装命令调用中设置为安装属性。

**更新：**您可以使用预处理器语句修改 WIX，如下所示，因此它可以从生成的 msi 中排除这些可选组件

```
 <?if $(env.MySku) = Enterprise ?>
       <Component Id="mycomponent" Guid="*" Feature="Core">
          <Condition>$(var.Include) = 1</Condition>
          <File Id="mycomponent.file" KeyPath="yes" Source="$(var.BinDir)\mycomponent.file" />      
       </Component>
    <?endif ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T03:15:02.817

正如@RinoTom 和@Christopher 指出的那样，安装时选择（**Condition标签）与构建时选择（** **?if**元标签）非常不同。要在安装时选择，包含的组件*必须*在**.msi**中。这种方法的优点是您可以设置确定其条件的属性，不仅在构建时，而且在安装时也可以通过对话框或**AppSearch**设置。

但是您需要的是多个包构建，每个包都针对一组特定的条件量身定制，在构建时选择。可能对您有用的替代方法是将每个可选组件定义为单独文件中的**片段**。然后对于每个包配置，只编译你想要的片段：

```
del /q *.wixobj
candle main_package.wxs
for %%f in (optional_1.wxs optional_5.wxs optional_27.wxs) do candle %%f
light *.wixobj -out tailored_package_A.msi 
```

由于只有您想要包含的那些片段已编译为**.wixobj**，因此只有它们出现在输出包中。如果您有一些*始终*存在的组件，但只有少数是可选的，则这种扩展效果特别好。

# android - Android app using xamarin supports Jquery?

> ID：15200583
> 
> 赞同：0
> 
> 时间：2013-03-04T11:33:42.093
> 
> 标签：android, jquery, xamarin

Am new to Android application development, We are in process of exploring it. I have a question does Android app supports Jquery ?? We are using Xamarin tool for app development

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:35:09.163

[jQuery Mobile](http://jquerymobile.com/)与 Android 很好地集成。

这里有一些很好的资源给你：

[http://jquerymobile.com/resources/](http://jquerymobile.com/resources/)

[http://mobile.tutsplus.com/tutorials/mobile-web-apps/jquery-mobile-forms/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/jquery-mobile-forms/)

# javascript - 在上传到服务器之前在客户端临时上传图像文件

> ID：15200584
> 
> 赞同：1
> 
> 时间：2013-03-04T11:33:49.623
> 
> 标签：javascript, image, html, local-storage

我正在做一个类似于 Wix 的项目。在这里，用户可以创建新页面，然后向这些页面添加不同的元素。在第一阶段，我们正在研究 4 个元素。

*   文本
*   关联
*   面板
*   图片

如果可用，用户对这些元素所做的所有更改都存储在 HTML5 存储中（否则我们使用 cookie）。这些更改仅在用户单击“保存”按钮后才更新到 db。

现在，我想向用户提供有关它所做更改的查看器的实时更新。因此，当用户提供图像路径（本地目录/Url）时，我想在查看器的`<img>`标签中向他展示该图像。但我还不想将文件上传到服务器。有什么方法可以将文件上传到 HTML5 存储中并使用它来显示图像？我的同事建议我在用户系统上创建一个临时目录并将文件保存在那里。我想避免这种情况，因为如果用户不正确地退出项目，我将无法删除我的临时文件夹。所以任何建议或教程都会很好。

问候： 杰汉则布·马利克

# c++ - MFC MessageMap 和虚函数

> ID：15200590
> 
> 赞同：0
> 
> 时间：2013-03-04T11:34:13.733
> 
> 标签：c++, mfc, virtual-functions

MFC 使用一种有效的方法来处理与虚拟功能有关的空间消耗和复杂性问题。例如，下图演示了如何获取类层次结构中的函数。这种实现方式节省空间，易于理解，而且似乎也很高效。

![MFC 消息映射处理](../Images/2ed1868ac4f8924365282cae0650505c.png)

我的问题是，为什么核心 C++ 不使用相同的方式来降低编译器的复杂性并摆脱 vtables？也许这个实现也有效率问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:43:31.223

C++ 多态性在每个编译器中的实现或多或少都是相同的；每个对象都有一个 vtable（等效于`messageEntries`），它被取消引用以获得实际的函数地址。

C++ 多态性*优于*MFC，因为它不需要宏或任何其他摆弄；唯一的变化是`virtual`关键字，其余代码保持不变。

易用性如何？

```
// Compare
object_ref._messageEntries[WM_PAINT](); // MFC
// vs.
object_ref.paint(); // C++ 
```

关于效率，虚方法增加了另一个指针解引用，理论上可以避免。在编写性能关键代码时，您希望减少执行操作的数量，将运行时多态性全部丢弃。不过，内置语言解决方案肯定不会比 MFC 慢。

MFC 的解决方案专家在调度事件时显示。在这种情况下，具有*可索引*函数数组是一大优势，因为它简化了通过组件传递事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:48:40.627

如果您仔细研究 MFC 类，您会看到许多虚拟方法。您在上图中看到的是在许多 GUI 框架中使用的消息驱动 mechanizm - 即使是在 android 上使用的新框架中也是如此。

消息驱动通信的主要目的是确保所有与 GUI 相关的东西都在 GUI 线程上完成。此外，所有消息都在排队，因此它们按某种顺序进行管理。这实际上与 C++ 的设计或应该如何设计无关。

如果您想查看不使用虚拟方法的框架，请查看 WTL/ATL 和 CRTP：

[http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

# php - 如果用户已登录，则更改导航列表项

> ID：15200593
> 
> 赞同：0
> 
> 时间：2013-03-04T11:34:15.570
> 
> 标签：php, jquery, nav, listitem

我有一个由几个动态创建的列表项组成的导航。“选项卡”或项目之一被标记为“注册”，但是，一旦用户登录（这表明他们已经“注册”），我想将导航项目上的标签更改为“升级” .

是否可以使用 jQuery 更改选定列表项的文本（在本例中为第 4 项） - 如果可能的话，我可以将其包装在 php if 语句中以在用户登录时执行它。

我的问题是，如何使用 jQuery 更改列表项的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:37:32.523

```
$('#yourListItemId').text('Your new text!'); 
```

指定选择器以访问您的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:37:59.980

在 jQuery 中，您可以使用更改列表项的文本

```
$('#element_id').text("new text"); 
```

但是，由于您使用的是 php，因此您已经可以在 php 中找到用户是否已登录，并且可以从 php 中使“注册”列表项根本不显示。在这种情况下不需要使用 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:30:00.573

我完全同意 AmazingDreams，在您的上下文中使用 jQuery 似乎是多余的。恕我直言，您要执行的逻辑应该在服务器端实现，除非您有充分的理由禁止您这样做。这是 PHP 中的一个简单示例，可以满足您的要求：

```
 <?php 
     session_start(); 
     if($_SESSION['loggedIn'] === true): 
 ?>
 <ul>
     <li><a href="#"><?php echo $_SESSION['user']; ?></a></li>
     <li><a href="#">Upgrade</a></li>
     <!-- other options -->
 </ul>
 <?php else: ?>
     <?php //header to login.php ?>
 <?php endif; ?> 
```

# pandas - 使用带整数标签的多索引索引对数据帧进行部分更新

> ID：15200598
> 
> 赞同：2
> 
> 时间：2013-03-04T11:34:38.363
> 
> 标签：pandas, multi-index

我正在使用具有混合索引标签的多索引数据框，即第一级包含字符串标签，第二和第三级是整数标签，第四级标签是日期。数据框如下所示（master_df）

```
 X1   X2  X3
bucket       Start    Stop       Date           
B1             1       1         1/3/2000   2   2   3
                                 1/4/2000   4   3   3
B1             1       2         1/3/2000   4   2   3
                                 1/4/2000   6   2   2 
```

我想取出 sub_df 作为 master_df.ix['B1',1,2,:]，对 sub_df 做一些操作并将其存储回 master_df 的同一位置。我可以使用各种方法取出 sub_df，但是在将其存储回来时，我尝试过的所有选项似乎都不起作用。我想这个问题与拥有“整数”标签有关（在第二和第三拉维尔 - 开始-停止）。我尝试了以下选项/方法但没有任何成功

```
 sub_df = master_df.ix['B1'].ix[1].ix[2]

    #do some operations on sub_df

    master_df.xs('B1').xs(1).xs(2).update(sub_df)

    master_df.ix['B1'].ix[1].ix[2].update(sub_df)

    merge(master_df.ix['B1',1,2,:],sub_df) 
```

以上操作均未反映 master_df 的更改（我也没有收到任何错误消息。）

你能建议正确的方法吗？

更新 ：

sub_df 和 master_df 没有与 sub_df 上的操作相同的索引，仅期望日期索引。sub_df 如下所示。

```
 X1   X2  X3
Date           
1/3/2000   2   2   3
1/4/2000   4   3   3 
```

如果我尝试

```
sub_df = master_df[master_df.index.get_loc(('B1', 1, 2))] 
```

我收到以下错误 -

TypeError：不可散列的类型：'numpy.ndarray'

这里的主要目的是仅对 master_df 的一小块进行操作，并将这些结果存储回 master_df 中的原始位置。我尝试使用更新方法，但是实现此目的的任何其他替代方法都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:09:08.293

这并不能完全解决您的问题，但这可能会提供一些启发

这是一种直接设置值的方法

```
In [75]: df
Out[75]: 
  bucket  start  stop                date  x1  x2  x3
0     B1      1     1 2000-10-03 00:00:00   2   2   3
1     B1      1     1 2000-01-04 00:00:00   4   3   3
2     B1      1     2 2000-01-03 00:00:00   4   2   3
3     B1      1     2 2000-01-04 00:00:00   6   2   2

In [76]: df2 = df.set_index(['bucket','start','stop'])

In [77]: df2
Out[77]: 
                                 date  x1  x2  x3
bucket start stop                                
B1     1     1    2000-10-03 00:00:00   2   2   3
             1    2000-01-04 00:00:00   4   3   3
             2    2000-01-03 00:00:00   4   2   3
             2    2000-01-04 00:00:00   6   2   2

In [78]: df2.ix[('B1',1,2)].ix[:,'x1'] = 5

In [79]: df2
Out[79]: 
                                 date  x1  x2  x3
bucket start stop                                
B1     1     1    2000-10-03 00:00:00   2   2   3
             1    2000-01-04 00:00:00   4   3   3
             2    2000-01-03 00:00:00   5   2   3
             2    2000-01-04 00:00:00   5   2   2 
```

这是另一种方式，您可以选择具有多索引的系列，对其进行修改，然后将其分配回来（仅适用于系列）。

```
In [89]: df2.ix[:,'x1']
Out[89]: 
bucket  start  stop
B1      1      1       2
               1       4
               2       4
               2       6
Name: x1, dtype: int64

In [90]: new_s = df2.ix[:,'x1'].copy()

In [91]: new_s
Out[91]: 
bucket  start  stop
B1      1      1       2
               1       4
               2       4
               2       6
Name: x1, dtype: int64

# can also do a more complicated selctor than the 0th row
In [92]: new_s[0] = 5

In [93]: new_s
Out[93]: 
bucket  start  stop
B1      1      1       5
               1       4
               2       4
               2       6
Name: x1, dtype: int64

In [94]: df2.ix[:,'x1'] = new_s

In [95]: df2
Out[95]: 
                                 date  x1  x2  x3
bucket start stop                                
B1     1     1    2000-10-03 00:00:00   5   2   3
             1    2000-01-04 00:00:00   4   3   3
             2    2000-01-03 00:00:00   4   2   3
             2    2000-01-04 00:00:00   6   2   2 
```

这是您在 0.11 中可以执行的操作

```
# this is sessentially saying give me the first 2 rows (equivalent
# to selecting via complicated tuple)
In [107]: df2.iloc[0:2,:]
Out[107]: 
                                 date  x1  x2  x3
bucket start stop                                
B1     1     1    2000-10-03 00:00:00  10   2   3
             1    2000-01-04 00:00:00   4   3   3

In [108]: df2.iloc[0:2,:].loc[:,'x1']
Out[108]: 
bucket  start  stop
B1      1      1       10
               1        4
Name: x1, dtype: int64

In [109]: df2.iloc[0:2,:].loc[:,'x1'] = 5

In [110]: df2
Out[110]: 
                                 date  x1  x2  x3
bucket start stop                                
B1     1     1    2000-10-03 00:00:00   5   2   3
             1    2000-01-04 00:00:00   5   3   3
             2    2000-01-03 00:00:00   4   2   3
             2    2000-01-04 00:00:00   6   2   2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:26:48.737

`sub_df`具有与 相同的索引很重要`master_df`。

获得正确索引的一种方法是使用`get_loc`：

```
sub_df = df[df.index.get_loc(('B1', 1, 2))]
# operations not changing index
master_df.update(sub_df) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:34:28.497

对于您给出的示例（选择 ('B1', 1, 2, ...)），您可以使用 xs iso ix。与 ix 相比，xs 可以在使用标签时返回数据视图（有关 ix 返回视图/副本的更多详细信息，请参阅[文档](http://pandas.pydata.org/pandas-docs/stable/indexing.html#returning-a-view-versus-a-copy)）。在下面的示例中，sub_df 的列 X1 是变化的，这也会影响 master_df。

```
In [48]: master_df
Out[48]: 
                              X1  X2  X3
bucket Start Stop Date                  
B1     1     1    2000-01-03   2   2   3
                  2000-01-04   4   3   3
             2    2000-01-03   4   2   3
                  2000-01-04   6   2   2

In [49]: sub_df = master_df.xs(['B1', 1, 2], copy=False)

In [50]: sub_df
Out[50]: 
            X1  X2  X3
Date                  
2000-01-03   4   2   3
2000-01-04   6   2   2

In [51]: sub_df.X1 -= 4

In [52]: sub_df
Out[52]: 
            X1  X2  X3
Date                  
2000-01-03   0   2   3
2000-01-04   2   2   2

In [53]: master_df
Out[53]: 
                              X1  X2  X3
bucket Start Stop Date                  
B1     1     1    2000-01-03   2   2   3
                  2000-01-04   4   3   3
             2    2000-01-03   0   2   3
                  2000-01-04   2   2   2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:35:55.967

谢谢大家的帮助。最后，我从 2 级和 3 级的数字索引切换到字符索引，现在一切正常（这也有助于在级别上进行适当的排序，我想这会让事情变得更加明确。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-21T15:14:02.237

在 0.13 中，参数 'drop_level' 已添加到 'xs' 中，这样可以解决您的问题，因为所有索引级别都将出现在 sub_df 中：

sub_df = master_df.xs(['B1', 1, 2], level=['bucket','Start','Stop'], drop_level=False)

现在合并将起作用。

没有尝试过，但它应该可以工作。

参考：[使用熊猫的“大数据”工作流程](https://stackoverflow.com/questions/14262433/large-data-work-flows-using-pandas)

# django - 如何在视图中使用 django 会话框架？

> ID：15200602
> 
> 赞同：0
> 
> 时间：2013-03-04T11:34:42.013
> 
> 标签：django, django-sessions

我一直在阅读 django 会话框架，但并没有真正理解它。我正在创建一个对象，并且想知道如何在视图中使用 django 会话。这就是创建对象的方式。

```
def show_checkout(request):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
            obj = form.save(commit=False)
            obj.created_by = anon_user
            obj.modified_by = anon_user
            obj.save()
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    else:
        form = forms.CheckoutForm
    context = {
        'form':form,
    }
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

任何帮助表示赞赏。初级程序员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:50:52.370

要在会话中保存一个值，您可以按键分配它：

```
request.session[key] = value 
```

要从会话中检索值，您可以通过键读取它：

```
foo = request.session[key] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:51:09.657

如果我正确理解了您的要求，您可能只需要在以下操作后执行此操作`obj.save()`：

```
request.session['obj_id'] = obj.id 
```

在下一个视图中，您可以再次访问该键以获取对象 ID，然后从数据库中检索对象。

# c# - “checked = false”的复选框（事件）方法

> ID：15200618
> 
> 赞同：3
> 
> 时间：2013-03-04T11:35:48.270
> 
> 标签：c#, .net, winforms

**当（Windows 窗体）**复选框未选中（但未选中）时，是否有任何方法或是否可以编写方法来执行一组指令？我将提供我的示例代码来澄清这一点。

**现有示例代码：**

```
private void ChkBox_CheckedChanged(object sender, EventArgs e)
{
    if (ChkBox.Checked == false)
        {
                MessageBox.Show("unchecked");
        }
} 
```

**问：**是否`if condition`可以通过为此编写一个仅在未选中复选框时才执行的方法来避免这种情况。

**插图：** 像这样的东西：

```
private void ChkBox_Unchecked(object sender, EventArgs e)
{
    MessageBox.Show("unchecked");
} 
```

**附加评论：**对于事件“复选框已选中”，我没有任何要执行的操作。所以只是想我是否可以`checkchanged`通过将事件替换`unchecked`为事件类型来避免事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:42:48.540

如果你真的需要那些奇怪的事件，那么通过从 CheckBox 继承来创建自定义复选框。覆盖它的`OnCheckedChanged`事件，并添加您的`Unchecked`事件：

```
public class StrageCheckBox : CheckBox
{
    public event EventHandler Unchecked;

    protected override void OnCheckedChanged(EventArgs e)
    {
        base.OnCheckedChanged(e);

        if (!Checked)
            OnUnchecked(e);
    }

    protected virtual void OnUnchecked(EventArgs e)
    {
        if (Unchecked != null)
            Unchecked(this, e);
    }
} 
```

使用`StrangeCheckBoxes`而不是默认复选框。订阅`Unchecked`事件。瞧，你有那种奇怪的行为。

**备注**实际上，我不建议在所有情况下都使用自定义控件或 if/else。如果您有许多具有这种行为的复选框，那么自定义控件比每个处理程序中的许多重复 if/else 更好。如果您有多个控件或所有复选框的单个处理程序，那么我会使用 if/else 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:40:52.727

你可以继承`CheckBox`和`override OnCheckedChanged`

```
class ExtendedCheckBox : CheckBox
{
    public event EventHandler Unchecked;
    protected override void OnCheckedChanged(EventArgs e)
    {
        base.OnCheckedChanged(e);

        if (Checked == false)
            OnUnchecked(e);            
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:37:28.253

不，唯一暴露的事件是检测状态何时发生变化，然后您必须检查状态以确定它是如何变化的。

如果愿意，您可以创建自己的控件，该控件基本上包装了该控件并公开了此类可区分状态的事件，但这似乎完全没有意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T11:39:19.007

不，对不起。这是您可以触发状态更改的唯一事件。你的代码看起来不错。有什么不喜欢的理由？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T11:39:01.307

据我所知，所有更改都会触发该事件，您可以编写自己的控件来区分所选值并引发单独的事件，但不确定它是否真的值得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T11:40:20.870

我不认为你可以做这样的事情，但是如果你有很多指令要执行，如果复选框未被选中并且你不想将它们封装在一个`if`语句中，你可以`checked`在开始时检查并返回：

```
private void ChkBox_CheckedChanged(object sender, EventArgs e)
{
    if (ChkBox.Checked) return;

    MessageBox.Show("unchecked");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-26T06:09:41.290

这将是一个简单直接的解决方案，尽管最好的建议方法是从 CheckBox 继承并修改事件。但是，一个比较简单的方法如下：

减小`CheckBox`宽度，使`CheckBox Label`不再可见。只有框应该是可见的。然后，在盒子旁边加上另一个标签，该标签应该与盒子互斥。

现在，编辑`CheckBox Clicked`事件。使用某种标志来识别复选框的状态。瞧！

# python - SQLAlchemy 在 postgres 上不等于

> ID：15200625
> 
> 赞同：0
> 
> 时间：2013-03-04T11:35:58.877
> 
> 标签：python, sqlalchemy

我打算在 SQLAlchemy 网站上记录一个问题，但在此之前我只是想检查一下我没有错过任何东西。我在 IRC 上问过，我认为这可能是一个合法的问题。

归结为 != 过滤器没有考虑空/NULL单元格。

例如，让我们说

```
Session.query(Table).\
filter(Table.column != 1).all() 
```

现在我希望这会返回值不等于 1 的所有记录。但是，它实际返回的是包含数据的记录列表，不等于 1。

因此，例如，如果列是 NULL/空值，则此查询不会返回它，而我（和其他人）期望它会返回。

现在显然在创建列时使用 NOT NULL 是最佳实践，但我只是想看看是否有解决此问题的方法，或者是否值得提交错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:58:30.280

好吧，这与 SQLAlchemy 无关，它只是 NULL 的滚动方式。`NULL != 1`既不是真也不是假，它的计算结果为 NULL。因此，WHERE 子句不会为该列返回任何具有 NULL 值的行。

您可以选择以下任何一种：

```
Session.query(Table).filter(or_(
    Table.column == None,
    Table.column != 1,
)) 
```

或类似的东西：

```
Session.query(Table).filter(
    func.coalesce(Table.column, -1) != 1) 
```

将 NULL 值转换为可用于比较的值，`-1 != 1`评估结果为 true。

# java - mysql的JDBC性能对于重复查询很慢

> ID：15200627
> 
> 赞同：4
> 
> 时间：2013-03-04T11:36:06.320
> 
> 标签：java, mysql, jdbc

我有一个程序需要用 Java 编写的大量查询，选择 JDBC 来操作 mysql db。我的代码框架如下：

```
PreparedStatement stmt = conn.preparedStatement(
            "SELECT name FROM users WHERE id = ?" )
Iterator<String, Double> it = map.entrySet().iterator(); 
//map is relativelly large, holding about 100,000 records, 
//each need to query mysql, and do some computing
//I record the time consuming of query & computing
while ( it.hasNext() ) {
    String id = it.next().getKey();
    stmt.setString(1, id);     //set the missing param with id
    long queryStart = System.currentTimeMillis();
    ResultSet rs = st.executeQuery();
    long queryEnd = System.currentTimeMillis();
    while ( rs.next() ) {
        //computing
    }
    rs.close();
    st.clearParameters();
    long computeEnd = System.currentTimeMillis();
    System.out.println(index+" has done...");
    System.out.println("  query time: "+ (queryEnd-queryStart));
    System.out.println("  compute time: "+ (computeEnd-queryEnd));
} 
```

大约 100-200 次循环的性能在一开始就很好。但之后突然下降。

控制台窗口中打印的结果是：

```
1 has done...
  query time:   0
  compute time: 0
2 has done...
  query time:   0
  compute time: 0
3 has done...
  ...
  ...
191 has done...
  query time:   1
  compute time: 0
192 has done...
  query time:   0
  compute time: 1
193 has done...
  query time: 1018
  compute time: 0
194 has done...
  query time: 1142
  compute time: 0
195 has done...
  query time: 1122
  compute time: 0 
```

我的数据库位于本地主机。为什么会发生这种情况，什么会如此显着地影响性能？

我怎样才能提高性能？

顺便说一句：Object Statement, Connection ...是在java.sql中定义的，我没有使用com.mysql.jdbc版本，我不知道有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:27:05.037

一些有助于提高性能的技巧：

1.  您可以尝试在 MYSQL Server 配置中启用查询缓存吗？同样，请参阅：[mysql 中的查询缓存](http://rackerhacker.com/2007/08/08/mysqls-query-cache-explained/)

2.  是否为此表设置了索引？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T14:23:15.457

当您发出查询时，每次它通过网络并由 db 执行并返回给您。为了减少这种往返，您可以使用一堆 id 执行选择查询。

如何编写如下查询

从 id in ( id0 , id1, .... idn ) 的用户中选择名称

编写一个方法来构造“id”子句并将其设置在语句中并执行它。

如果 id 的数量很高，则使用一组 id 批量执行相同的查询。

# php - 如何使用 curl 和 PHP 上传文件

> ID：15200632
> 
> 赞同：87
> 
> 时间：2013-03-04T11:36:25.610
> 
> 标签：php, curl, upload

我想知道如何使用 cURL 或 PHP 中的任何其他内容上传文件。我在谷歌搜索了很多次，但没有结果。

换句话说，用户在表单上看到一个文件上传按钮，表单被发布到我的 php 脚本，然后我的 php 脚本需要重新发布到另一个脚本（例如在另一个服务器上）。

我有这个代码来接收文件并上传它

代码 ：

```
echo"".$_FILES['userfile']."";
$uploaddir = './';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
if ( isset($_FILES["userfile"]) ) {
    echo '<p><font color="#00FF00" size="7">Uploaded</font></p>';
    if (move_uploaded_file
($_FILES["userfile"]["tmp_name"], $uploadfile))
echo $uploadfile;
    else echo '<p><font color="#FF0000" size="7">Failed</font></p>';
} 
```

我希望代码将文件发送到接收器文件。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-03-04T11:46:10.177

利用：

```
if (function_exists('curl_file_create')) { // php 5.5+
  $cFile = curl_file_create($file_name_with_full_path);
} else { // 
  $cFile = '@' . realpath($file_name_with_full_path);
}
$post = array('extra_info' => '123456','file_contents'=> $cFile);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$result=curl_exec ($ch);
curl_close ($ch); 
```

你也可以参考：

[http://blog.derakkilgo.com/2009/06/07/send-a-file-via-post-with-curl-and-php/](http://blog.derakkilgo.com/2009/06/07/send-a-file-via-post-with-curl-and-php/)

**PHP 5.5+ 的重要提示：**

现在我们应该使用[https://wiki.php.net/rfc/curl-file-upload](https://wiki.php.net/rfc/curl-file-upload)但如果您仍想使用这种已弃用的方法，那么您需要设置`curl_setopt($ch, CURLOPT_SAFE_UPLOAD, false);`

# xslt - XPath - 反转选择

> ID：15200633
> 
> 赞同：1
> 
> 时间：2013-03-04T11:36:28.240
> 
> 标签：xslt, xpath

我正在编写一个 xpath，并且我编写了与文档树中的某些节点匹配的 xpath

但我想匹配所有其他元素，所以我想在整个文档的上下文中反转选择

所以假设我们有以下xpath

```
//*[@id='menu']//* 
```

和文件

```
<body>
<div>
  <h1>title</h1>
</div>
<div>
<div id="menu">
  <UL>
    <LI>home</LI>
    <LI>about</LI>
  </UL>
</div>
<div id="sidebar">
  <ul>
    <li>one</li>
    <li>two</li>
  </ul>
</div>
<div>
</body> 
```

所以大写的节点是匹配的，但我想要实现的是标记所有的小写节点。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T11:44:48.897

您的原始 XPath 表达式

```
//*[@id='menu']//* 
```

匹配作为 的后代的所有元素节点（`<div id="menu">`但*不*`div`匹配元素本身）。根据您所说的“逆”的确切含义，您可以尝试类似

```
//*[not(ancestor::*[@id='menu'])] 
```

它匹配所有没有祖先的元素节点 with `id="menu"`，这将包括`div`with`id="menu"`但不包括其子或孙。如果你也想排除`div`，使用`ancestor-or-self::`代替`ancestor::`

* * *

如果您有 XPath 2.0，那么对原始问题的更一般的答案是查看`except`运算符 - 在 XPath 2.0 中，您可以说`X except Y`选择与表达式匹配的所有节点，`X`但也不是`Y`

```
//* except //*[@id='menu']//* 
```

还有(由or`union`匹配的节点) 和(both and ) 运算符。`X``Y``intersect``X``Y`

# java - Java 多客户端聊天应用程序 - 发送消息问题

> ID：15200634
> 
> 赞同：1
> 
> 时间：2013-03-04T11:36:35.260
> 
> 标签：java, arrays, multithreading, sockets

我的问题是，我仍然可以在客户端（客户端到客户端）之间发送消息，但是发送两三次后，消息不再显示给收件人。

所以基本上每当客户端希望向另一个客户端发送消息时，消息首先被发送到服务器。但是正如您从我的编码中注意到的那样，我正在以对象的形式发送服务器数据。例如：

```
send(new ChatMessage(type, sender, content, recipient)); 
```

当您发送消息时，类型为“消息”。当服务器接收到对象时，它会检查接收到的数据及其类型。例如：

```
ChatMessage cm = (ChatMessage) in[client[id].readObject();
if(cm.type.equals("message"){
  send(findUserThread(toWhom), new ChatMessage("message", sender, content, recipient);

} 
```

如果类型是“消息”，那么它将向该特定客户端发送消息。

我在客户端使用 System.out.println() 来查看来自服务器的传入数据。因此，当我尝试发送一些消息时，它工作正常，但在发送一些消息后，我的聊天屏幕上没有显示任何内容。

根据我的逻辑，错误可能是：

1 JList 中的选定索引

2 Client[] 数组或 username[] 数组

3 对象输出流和对象输入流

ServerGUI 类（服务器端）

```
package test2;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import java.net.*;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.*;
import java.util.zip.GZIPOutputStream;
import javax.swing.SwingUtilities;

public class ServerGUI extends JFrame implements ActionListener {

public JList online;
private JTextField ipaddress, textMessage;
private JButton send, start, disconnect;
private JTextArea chatArea;
private JLabel port;
int client[] = new int[100];
private ObjectOutputStream out[] = new ObjectOutputStream[client.length + 1];
private ObjectInputStream in[] = new ObjectInputStream[client.length + 1];
String username[] = new String[client.length + 1];
static String b;
public String nm, usm;
private ServerSocket server;
private Socket connect;
boolean success = true;
int id = 0;
ArrayList<String> UserList = new ArrayList<String>();

public ServerGUI() {
    Container c = getContentPane();
    c.setLayout(new BorderLayout());
    c.setPreferredSize(new Dimension(650, 500));

    JPanel p = new JPanel();
    p.setLayout(new FlowLayout());
    p.setBackground(Color.LIGHT_GRAY);
    p.add(port = new JLabel("Port No"));
    p.add(ipaddress = new JTextField("1500"));
    p.add(start = new JButton("START"));
    p.add(disconnect = new JButton("DISCONNECT"));
    disconnect.setEnabled(false);
    start.setBorderPainted(false);
    start.setBackground(Color.blue);
    start.setForeground(Color.WHITE);
    disconnect.setBorderPainted(false);
    disconnect.setBackground(Color.blue);
    disconnect.setForeground(Color.WHITE);
    ipaddress.setCaretPosition(0);

    JPanel p1 = new JPanel();
    p1.setLayout(new FlowLayout());
    p1.setBackground(Color.LIGHT_GRAY);
    p1.add(chatArea = new JTextArea());

    chatArea.setPreferredSize(new Dimension(300, 350));
    chatArea.setLineWrap(true);
    chatArea.setEditable(false);

    JPanel p2 = new JPanel();
    p2.setLayout(new FlowLayout());
    p2.setBackground(Color.LIGHT_GRAY);
    p2.add(textMessage = new JTextField(20));

    p2.add(send = new JButton("SEND"));
    send.setBackground(Color.blue);
    send.setForeground(Color.WHITE);
    send.setBorderPainted(false);

    start.addActionListener(this);
    send.addActionListener(this);

    c.add(p, BorderLayout.NORTH);
    c.add(p1, BorderLayout.CENTER);
    c.add(p2, BorderLayout.SOUTH);

}
//current time
SimpleDateFormat log = new SimpleDateFormat("HH:mm");
String d = log.format(new Date());

//Start server
public void Start() {

    int portNo = 0;
    try {

        String no = ipaddress.getText();
        portNo = Integer.parseInt(no);
        chatArea.append("Connection to port " + portNo + "...\n");
        server = new ServerSocket(portNo);
        success = true;

    } catch (Exception ex) {
        chatArea.append("Error cannot bind to port \n");
        success = false;
    }

    if (success == true) {
        addClient ob1 = new addClient("RunServer");
        start.setEnabled(false);
        disconnect.setEnabled(true);
    }
}

public class addClient implements Runnable {

    Thread t;

    addClient(String tot) {
        t = new Thread(this, tot);
        t.start();
    }

    public void run() {
        while (true) {
            try {
                try {
                    WaitClient();
                } catch (Exception ex) {
                    break;
                }

                for (int i = 0; i < client.length; i++) {
                    if (client[i] == 0) {
                        client[i] = i + 1;
                        id = i;
                        break;
                    }
                }

                //set stream to send and receive data
                out[client[id]] = new ObjectOutputStream(connect.getOutputStream());
                out[client[id]].flush();
                in[client[id]] = new ObjectInputStream(connect.getInputStream());
                chatArea.append(d + " Client:[" + client[id] + "] : Connected successful \n");
                chatArea.setCaretPosition(chatArea.getText().length());
                //inform user that connection is successfull                    
                ChatMessage cm = (ChatMessage) in[client[id]].readObject(); // read client username
                if(cm.type.equals("login")){
                    chatArea.append("User " +cm.sender + " connected successfully" + "\n" );
                    username[client[id]] = cm.sender;
                    System.out.println(username[0]+ username[1]+ username[2]);
                    send(client[id], new ChatMessage("login", username[client[id]], "user", "SERVER"));
                    sendUserList(cm.sender);
                    Announce("newuser", "SERVER", cm.sender);

                }

                Chat c = new Chat(client[id], "StartChat" + client[id]); // make new thread for every new client 

            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    }

}

public class Chat implements Runnable {

    int id1;
    Chat ob1;
    Thread t;

    Chat(int id1, String info1) {
        this.id1 = id1; // create a thread for client
        t = new Thread(this, info1);
        t.start();
    }

    public void run() {
     boolean running = true;
       while(running){
            try {
                ChatMessage cm = (ChatMessage) in[client[id]].readObject(); // read client username
                if(cm.type.equals("message")){

                         send(findUserThread(cm.recipient), new ChatMessage(cm.type, cm.sender, cm.content, cm.recipient));

                }

            } catch (Exception e) {

            }
       }

    }
}

//wait for connection, then display connection information
private void WaitClient() throws IOException {

    chatArea.append(d + " : Waiting for connection... \n");
    connect = server.accept();

    chatArea.append(d + " : Now connected to " + connect.getInetAddress().getHostName() + "\n");
}

//send message to specific user
public void sendUser(int number, String info) {

    try {
        out[number].writeObject(info);
        out[number].flush();
    } catch (Exception e) {
    }

}

public void sendServer(String por) {
    for (int i = 0; i < client.length; i++) // for loop trying to send message from server to all clients 
    {
        if (client[i] != 0) // this line stop server to send messages to offline clients
        {
            try {
                out[i + 1].writeObject(por);
                out[i + 1].flush();
            } catch (Exception e) {
            }
        }
    }
}

public void Announce(String type, String sender, String content){

    ChatMessage cm = new ChatMessage(type, sender, content, "All");
    for(int i = 0; i < id; i++){
        send(client[i], cm);
    }
}

public void send(int number, ChatMessage cm) {

    try {
        out[number].writeObject(cm);
        out[number].flush();
    } catch (Exception e) {
    }

}

void sendAll(int num, String por) {
    for (int i = 0; i < client.length; i++) // for loop trying to send message from server to all clients 
    {
        if (client[i] != 0) // this line stop server to send messages to offline clients (if "clientNiz[X] = 0" don't try to send him message, because that slot is empty)
        {
            if (num != i + 1) // don't repeat messages (when for ex. client_1 send message to all clients, this line stop server to send same message back to client_1)
            {
                try {
                    out[i + 1].writeObject(por);
                    out[i + 1].flush();
                } catch (Exception e) {
                }
            }
        }
    }
}

public void sendUserList(String toWhom){
    for(int i = 0; i <= id; i++){
        send(findUserThread(toWhom), new ChatMessage("newuser", "SERVER", username[client[i]], toWhom));
    }
}

public int findUserThread(String usr){
    for(int i = 0; i <= id; i++){
        if(username[client[i]].equals(usr)){
            return client[i];
        }

    }
    return -1;
}

  private int findClient(int num){  
    for (int i = 0; i <= id; i++){
        if (client[i] == (num+1)){
                return i;
            }
}
return -1;
}

public void actionPerformed(ActionEvent e) {
    if (e.getSource() == send) {
        //current time

        String s1 = textMessage.getText();
        send(client[id], new ChatMessage("message", "admin", s1, "client"));
        chatArea.append("Administrator: " + s1 + "\n");

    } else if (e.getSource() == start) {
        Start();
    }
    if (e.getSource() == disconnect) {

        try {
            server.close();
        } catch (Exception ex) {
        }

        for (int i = 0; i < client.length; i++) {
            try {
                in[i].close();
                out[i].close();
            } catch (Exception ex) {
            }
        }
        chatArea.append("Server is disconnected\n");
        start.setEnabled(true);
        disconnect.setEnabled(false);
    }
}
} 
```

MainGUI 类（客户端）

```
package test2;

import java.io.*;
import java.net.*;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.io.BufferedOutputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import javax.swing.DefaultListModel;
import javax.swing.JFileChooser;

public class MainGUI extends javax.swing.JFrame {

public MainGUI() {
    initComponents();

}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jButton1 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    start = new javax.swing.JButton();
    jLabel2 = new javax.swing.JLabel();
    textMessage = new javax.swing.JTextField();
    jScrollPane2 = new javax.swing.JScrollPane();
    chatArea = new javax.swing.JTextArea();
    usernm = new javax.swing.JTextField();
    jLabel1 = new javax.swing.JLabel();
    send = new javax.swing.JButton();
    upload = new javax.swing.JButton();
    filename = new javax.swing.JTextField();
    jScrollPane1 = new javax.swing.JScrollPane();
    online = new javax.swing.JList();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("ICARE ");
    setFocusable(false);
    setPreferredSize(new java.awt.Dimension(840, 650));
    setResizable(false);
    getContentPane().setLayout(null);

    jButton1.setText("Video Call");
    getContentPane().add(jButton1);
    jButton1.setBounds(270, 10, 100, 30);

    jButton3.setText("Send");
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });
    getContentPane().add(jButton3);
    jButton3.setBounds(690, 100, 100, 30);

    start.setBackground(new java.awt.Color(51, 51, 255));
    start.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    start.setForeground(new java.awt.Color(255, 255, 255));
    start.setText("Start");
    start.setBorder(null);
    start.setBorderPainted(false);
    start.setRequestFocusEnabled(false);
    start.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            startActionPerformed(evt);
        }
    });
    getContentPane().add(start);
    start.setBounds(630, 50, 90, 40);
    getContentPane().add(jLabel2);
    jLabel2.setBounds(0, 0, 820, 0);
    getContentPane().add(textMessage);
    textMessage.setBounds(270, 450, 420, 70);

    chatArea.setColumns(20);
    chatArea.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
    chatArea.setRows(5);
    jScrollPane2.setViewportView(chatArea);

    getContentPane().add(jScrollPane2);
    jScrollPane2.setBounds(270, 140, 520, 300);
    getContentPane().add(usernm);
    usernm.setBounds(450, 60, 170, 30);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel1.setText("Enter your nickname:");
    getContentPane().add(jLabel1);
    jLabel1.setBounds(270, 60, 150, 30);

    send.setBackground(new java.awt.Color(51, 51, 255));
    send.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    send.setForeground(new java.awt.Color(255, 255, 255));
    send.setText("Send");
    send.setBorder(null);
    send.setBorderPainted(false);
    send.setRequestFocusEnabled(false);
    send.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            sendActionPerformed(evt);
        }
    });
    getContentPane().add(send);
    send.setBounds(700, 470, 90, 40);

    upload.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    upload.setText("+");
    upload.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            uploadActionPerformed(evt);
        }
    });
    getContentPane().add(upload);
    upload.setBounds(633, 100, 50, 30);
    getContentPane().add(filename);
    filename.setBounds(270, 100, 350, 30);

    jScrollPane1.setViewportView(online);

    getContentPane().add(jScrollPane1);
    jScrollPane1.setBounds(30, 20, 220, 500);

    pack();
}// </editor-fold>

private void startActionPerformed(java.awt.event.ActionEvent evt) {                                      
    Start();

}                                     

private void sendActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    String z = textMessage.getText();
    String target = online.getSelectedValue().toString();
    chatArea.append("[ " + usernm.getText() + " ] : " + z + "\n");

    send(new ChatMessage("message", usernm.getText(), z, target));
    textMessage.setText("");         

}                                    

private void uploadActionPerformed(java.awt.event.ActionEvent evt) {                                       
    // TODO add your handling code here:
    //Create a file chooser
//In response to a button click:
JFileChooser fileChooser = new JFileChooser();
    fileChooser.showDialog(this, "Select File");
    file = fileChooser.getSelectedFile();

    if(file != null){
        if(!file.getName().isEmpty()){
            String str;

            if(filename.getText().length() > 30){
                String t = file.getPath();
                str = t.substring(0, 20) + " [...] " + t.substring(t.length() - 20, t.length());
            }
            else{
                str = file.getPath();
            }
            filename.setText(str);
        }
    }
}                                      

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
      long size = file.length();
        if(size < 120 * 1024 * 1024){
            sendUser("download");

        }
        else{
            chatArea.append("File is size too large\n");
        }
}                                        

public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(MainGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(MainGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(MainGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(MainGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new MainGUI().setVisible(true);

        }
    });
}
// Variables declaration - do not modify
public javax.swing.JTextArea chatArea;
private javax.swing.JTextField filename;
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton3;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JScrollPane jScrollPane2;
public javax.swing.JList online;
private javax.swing.JButton send;
private javax.swing.JButton start;
private javax.swing.JTextField textMessage;
private javax.swing.JButton upload;
private javax.swing.JTextField usernm;
// End of variables declaration

private ObjectOutputStream out;
private ObjectInputStream in;
static String b; //variable for message
private Socket join;
boolean success = true;
private String serverIP = "127.0.0.1"; //set IP Address
ArrayList<String> userlist = new ArrayList<String>(); //ArrayList to store online users
//current time
SimpleDateFormat log = new SimpleDateFormat("HH:mm");
String d = log.format(new Date());
public File file;
public DefaultListModel model = new DefaultListModel();

//Start client program
public void Start() {

    try {

        start.setEnabled(false);
        chatArea.append(d + " : Attempting connection... \n");

        join = new Socket(serverIP, 10500);
        chatArea.append(d + " : Connected to - " + join.getInetAddress().getHostName() + "\n");

        success = true;

    } catch (Exception ex) {
        chatArea.append("Error cannot bind to port \n");            
        success = false;
    }

    if (success == true) {

        ClientThread ct = new ClientThread();

    }
}

class ClientThread implements Runnable {

    ClientThread ct;
    Thread t;

    ClientThread() {
        t = new Thread(this, "RunClient");
        t.start();

    }

    public void run() {
        try {
            try {
                out = new ObjectOutputStream(join.getOutputStream());
                out.flush();
                in = new ObjectInputStream(join.getInputStream());

                send(new ChatMessage("login", usernm.getText(), "password", "SERVER"));                
            } catch (Exception e) {   }

            CThread c1 = new CThread();

        } catch (Exception ex) {   }
    }
}

class CThread implements Runnable {

    CThread ob1;
    Thread t;

    CThread() {
        t = new Thread(this, "Message");
        t.start();
    }

    public void run() {
        boolean running = true;
        try {
            while(running){
                try {

                    ChatMessage cm = (ChatMessage) in.readObject();
                    System.out.println("Incoming :" + cm.toString());
                    if(cm.type.equals("login")){
                     chatArea.append(cm.sender + " is online" + "\n");
                    }else if(cm.type.equals("message")){                           
                        if(cm.recipient.equals(usernm.getText())){
                                 chatArea.append("[ "+cm.sender +" ] : " + cm.content + "\n");

                        }
                   }else if(cm.type.equals("newuser")){

                        online.setModel(model);
                        model.addElement(cm.content);
                    }

                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        } catch (Exception ex) {
        }
    }
}

void sendUser(String por) {
    try {
        out.writeObject(por);
        out.flush();
    } catch (Exception e) {
    }
}

void send(ChatMessage cm){
    try {
        out.writeObject(cm);
        out.flush();
    } catch (Exception e) {
    }

}

} 
```

聊天消息类

```
package test2;

import java.io.Serializable;

public class ChatMessage implements Serializable{

private static final long serialVersionUID = 1L;
public String type, sender, content, recipient;

public ChatMessage(String type, String sender, String content, String recipient){
    this.type = type; this.sender = sender; this.content = content; this.recipient = recipient;
}

@Override
public String toString(){
    return "{type='"+type+"', sender='"+sender+"', content='"+content+"', recipient='"+recipient+"'}";
}
} 
```

ServerTest 运行 ServerGUI

公共类 ServerTest { public static void main(String args[]){

```
 ServerGUI m = new ServerGUI();

    m.setTitle("Server");

    m.setVisible(true);

    m.pack();

    //to make to the center of the screen

    m.setLocationRelativeTo(null);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:53:36.717

> 但是发送两三条消息后，我的程序停止发送消息

首先，您应该尝试调试您的应用程序。使用日志，或者`System.out.println`您可以轻松找出它“停止”的位置。消息是否正在发送到服务器？服务器是否将消息发送给客户端？只需几个 . 你就可以回答这些问题`println`。

一旦你知道它在哪里（在你的代码中，哪种方法）失败了，如果你仍然需要帮助，你可以发布一个更具体的问题。

另外，当您遇到问题时，请详细说明问题的真正原因。应用程序会崩溃吗？它会停止向所有人发送消息吗？“我的程序停止发送消息”有点含糊。

**编辑：**好吧，既然我看到了代码，请不要这样做：

```
void send(ChatMessage cm){
    try {
        out.writeObject(cm);
        out.flush();
    } catch (Exception e) {
    }
} 
```

如果抛出异常，您将不会注意到。
您应该添加：

```
e.printStackTrace(); 
```

在**每个** `catch()`块内，以便您可以在控制台中看到错误发生时。

没有人喜欢控制台中的红色消息，但隐藏它们无济于事。总是打印错误，或记录它们，或两者兼而有之:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:23:00.080

*   Java 中的类应该以大写字母开头。例如：`ServerGUI`但不像`addClient`您的代码中看到的那样。
*   类代表对象。或对象的“类”。例如`Car`or`ServerGUI`但不是`addClient`。什么是`new addClient()`? 那真的是一个物体吗？
*   如果可能，变量名称应该具有重要的名称。例如`Car limousine = new Car(4,Color.Black)`而不是`addClient ob1 = new addClient("RunServer")`。是什么`ob1`意思？
*   评论对读者来说是新鲜空气。请使用评论。例如：`//we are going to represent the server as a special user with admin privileges`
*   ir Java 中的方法名称不应以大写开头。这是一个不好的例子：`private void WaitClient() throws IOException`
*   缩进和空行。不知道是部分还是完全是你的错，但是代码缩进不好，块内有空行（不仅仅是一两个，也不是分隔符），并且缺少空格（`if(cm.type.equals("login")){`）
*   *StackOverflow 不是解决您问题的好地方。人们在这里提出具体问题。你的不是一个具体的问题，它更像是一个“我的程序不起作用”的问题。*

总之：您的代码**很难阅读和理解**。看来您是 Java 新手，所以请从简单易行的示例开始，使用 Eclipse 或 Netbeans 等 Java IDE，慢慢来！你不会在一周内学习 Java，请耐心等待。

对不起，如果我太诚实了，但这就是我的想法（这可能是这里没有其他人帮助你的原因之一）。

# multithreading - 是否应该序列化对存储在 hsqldb 数据库中的文件的访问？

> ID：15200635
> 
> 赞同：0
> 
> 时间：2013-03-04T11:36:38.983
> 
> 标签：multithreading, file-io, hsqldb

鉴于：

1.  在 apache commons dbcp 包的帮助下，可以使用池化的连接同时访问 HSQLDB 数据库。
2.  **我将文件存储在嵌入式**hsqldb 数据库中的缓存表中。
3.  众所周知，不应从多个线程访问传统硬盘驱动器（与固态硬盘相反）上的文件，因为我们可能会降低性能而不是提高性能。这是因为使用每个线程上下文切换在文件之间来回移动机械读取头需要时间。

问题：

*   此规则是否适用于在 HSQLDB 数据库中管理的文件？文件大小可能从几 KB 到几 MB 不等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:25:38.643

HSQLDB 在操作过程中访问两个文件进行数据存储。一个文件用于所有 CACHED 表数据，另一个文件用于所有 lob。它在内部管理对这些文件的访问。

使用多线程时，在以下情况下可能会降低访问速度。

1.  对大表同时进行读写访问。
2.  对大于 500KB 的 lob 的同时读写访问。

# php - 教义2：选择错误

> ID：15200638
> 
> 赞同：3
> 
> 时间：2013-03-04T11:36:44.683
> 
> 标签：php, codeigniter, select, doctrine-orm, find

在自定义 entityRepository 类中调用 entityRepository 的 find 方法时出现以下致命错误

致命错误：在 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\OptimisticLockException 中，未捕获的异常“Doctrine\ORM\OptimisticLockException”带有消息“无法在未版本化的实体 Entities\Comment 上获得乐观锁”。 php:62 堆栈跟踪：#0 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\EntityRepository.php(140): Doctrine\ORM\OptimisticLockException::notVersioned('Entities\Commen. ..') #1 C:\Users\user\Desktop\projects\interview\application\models\Repositories\CommentRepository.php(24): Doctrine\ORM\EntityRepository->find('Entities\Commen...', 1) #2 C:\Users\user\Desktop\projects\interview\application\controllers\CommentController.php(65): Repositories\CommentRepository->activateByIds(Array) #3 [内部函数]: CommentController->approveComments() #4 C:\Users\user\Desktop\projects\interview\system\core\CodeIgniter.php(359): call_user_func_array(Array, Array) #5 C:\Users\user\Desktop\projects\interview\ index.php(203): require_once('C:\Users\user\D...') in C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\OptimisticLockException.php 上线62

这是我调用 find 的方法

```
public function activateByIds($arrayOfIds){
        if (count($arrayOfIds)>=1) {
            for ($i=0; $i<count($arrayOfIds); $i++){
                $comment = parent::find('Entities\Comment', $arrayOfIds[$i]);
                $comment->setIsactive(1);
                $this->_em->merge($comment);
                $this->_em->flush();
            }
            return true;
        }
        else return false;
    } 
```

我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:44:33.457

从我读到的你有一个`OptimisticLockException`

如[本文档](http://www.doctrine-project.org/api/orm/2.1/class-Doctrine.ORM.OptimisticLockException.html)中所述：

> 当对通过版本字段使用乐观锁定的对象的版本检查失败时，将引发 OptimisticLockException。

[您可以在此处](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html#optimistic-locking)了解有关乐观锁的更多信息

我的猜测是它们与 $comment 变量有冲突：

1.  第一次初始化 $comment ($i=0) 时，comment#1 被加载
2.  第二次（i = 1，您找到comment#2，但comment 已经是一个实体并且被管理）$comment =... 尝试为comment#1 提供comment#2 的值，甚至是uniq 的id，所以您正在制造冲突。

试试这个：

```
public function activateByIds($arrayOfIds){
        $comments =array();

        if (count($arrayOfIds)>=1) {
            foreach($arrayOfIds as $i=>$id){

                $comments [$i] = $this->getEntityManager()->find('Entities\Comment', $id); //new comment, not the old one!
                $comments [$i]->setIsactive(1);
                $this->_em->merge($comments[$i]);
                $this->_em->flush();

            }
            return true;
        }
        else return false;
      unset ($comments);
    } 
```

这样您就可以确定您不会尝试重复使用以前的评论而不是新的评论。

# iphone - 如何在 ios 中将图像上传到 .ashx url

> ID：15200639
> 
> 赞同：0
> 
> 时间：2013-03-04T11:36:48.237
> 
> 标签：iphone, ios, image, upload

我在 google 和 stackoverflow 上进行了很多搜索，但没有得到任何适合我的令人满意的解决方案。

**我必须在某个以扩展名.ashx**结尾的特定网址上上传图片。我已经看到如何在 php 服务器上上传，但在这里我没有得到任何线索。

请提供一些示例代码来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:00:09.440

根据我的理解，aspx 是页面，.ashx 是代码文件，它以字符串格式响应输出，[.ashx 文件是 Web 处理程序。Web 处理程序文件就像 aspx 文件一样工作](http://www.dotnetspider.com/forum/151908-What-.ashx-page.aspx)......

所以我们认为 .ashx 与 .aspx 相同，那么这段代码应该对你有用（它正在为我运行 .aspx 页面）。这是向 .net 服务器发出请求。

**iOS**

```
 UIImage *img = [UIImage imageNamed:@"test.png"];
    NSData *imageData = UIImageJPEGRepresentation ( img , 90 );

    NSString *urlString =@"www.xyz.com/ImageUpload.aspx?filename=test";

    NSLog(@"IMAGE_UPLOAD_URL -------------> %@",urlString);

    NSMutableURLRequest *request = [[[ NSMutableURLRequest alloc ] init ] autorelease ];
    [request setURL :[ NSURL URLWithString :urlString]];
    [request setHTTPMethod : @"POST" ];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [ NSString stringWithFormat : @"multipart/form-data; boundary=%@" ,boundary];
    [request addValue :contentType forHTTPHeaderField : @"Content-Type" ];
    /*  body of the post */
    NSMutableData *body = [ NSMutableData data ];
    [body appendData :[ NSData dataWithData :imageData]];
    [request setHTTPBody :body];
    NSData *returnData = [ NSURLConnection sendSynchronousRequest :request returningResponse : nil error : nil ];

    NSString *returnString = [[ NSString alloc ] initWithData :returnData encoding : NSUTF8StringEncoding ];
    InfoLog(@"_______  IMAGE_UPLOAD response -------------> .%@.",returnString); 
```

**。网**

为.aspx页面检索这样的图像

```
 if (Request.QueryString["filename"] != null)
    {
        string filename = Request.QueryString["filename"].ToString();
        string saveFilePath = ConfigurationManager.AppSettings["CPSBImageFolder"].ToString();
        //string saveFilePath = Server.MapPath("~/images");
        saveFilePath = saveFilePath + filename;
        Stream objStream = Request.InputStream;
        StreamReader objStreamReader = new StreamReader(objStream);
        Image image = Image.FromStream(objStreamReader.BaseStream, true);
        ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
        EncoderParameters param = new EncoderParameters(1);
        param.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 100L);
        image.Save(saveFilePath, info[1], param);
        Response.Write("true");
    } 
```

不确定，但希望这能给你一个线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:00:34.150

验证您用于上传图片的变量（NSData）不为空并且您的 dot net 服务器正在接收请求。

# java - 在android中获取gzip文件的实际大小

> ID：15200646
> 
> 赞同：1
> 
> 时间：2013-03-04T11:37:14.807
> 
> 标签：java, android, web

我正在使用 GZIPInputStream 下载 pdf 文件我想在 UI 按钮上显示文件的下载进度。但是，我没有得到文件的实际大小，我得到的是压缩大小，因此我无法显示正确的下载进度。此下载进度超过 100，因为实际文件大小大于文件压缩大小。来自服务器的文件的标头内容： - 遵循我从服务器收到的信息，我使用的是提供压缩文件大小的内容长度。

1.Connection 2.Content-Encoding 3.Content-length 4.Content-Type 5.Keep-Alive 6.Server 7.Date

这是我的代码。

```
 long fileLength =  httpResponse.getEntity().getContentLength();//
        GZIPInputStream input = new GZIPInputStream(new BufferedInputStream(httpResponse.getEntity().getContent()));
        FileOutputStream output = new FileOutputStream(destinationFilePath);

        byte data[] = new byte[1024];
        long total = 0;
        float percentage = 0;
        int count;
        currentDownloadingPercentage=0;
        while ((count = input.read(data)) != -1) 
        {
            total += count;
            output.write(data, 0, count);

            // publishing the progress....
            percentage = (float)total/(float)fileLength;
            percentage *= 100;
            if((int)percentage > (int)currentDownloadingPercentage)
            {
                currentDownloadingPercentage = percentage;
                Bundle resultData = new Bundle();
                resultData.putBoolean(DOWNLOAD_FAILED, false);
                resultData.putInt(DOWNLOAD_PROGRESS ,(int)percentage);
                receiver.send(processID, resultData);
                resultData = null;  
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:40:52.323

您需要更改读取流的方式：先读取，然后再膨胀（解压缩）。这是因为直接从 GZIPInputStream 读取会为您提供**未压缩**数据的大小，而您正在寻找**压缩**数据的大小。

# c# - 时间：2018-08-10 标签：c#outlook add-in custom Icons with custom Region Form

> ID：15200648
> 
> 赞同：2
> 
> 时间：2013-03-04T11:37:20.560
> 
> 标签：c#, visual-studio-2010, outlook, vsto, outlook-addin

我正在 Visual Studio 2010 中开发 Outlook 2010 插件。

我创建了一个自定义表单区域，它将实现名为的 messageClass：

> IPM.Note.Archivado

此类将由应用程序使用每晚运行的交换 Web 服务分配给已处理的消息。这是经过测试并且工作正常。当表单区域加载时，我可以恢复：

> message.MessageClass 为“IPM.Note.Archivado”

好的，我现在需要的是，为与该 messageClass 匹配的消息分配不同的收件箱图标，因此我使用了自定义区域表单中的属性面板，并选择了用于读取、转发、默认操作的图标，没有问题。

如果我在清单中选择 FormRegionType 作为**替换**或**Replace-ALL** ，我可以实现这一点，但我需要的是这个表单窗口是**AdJoining。**

当 formRegionType**相邻**时，我无法在收件箱面板中加载分配的图标。

我一直在阅读大量文档，但找不到解决问题的方法。

这是区域定义的形式：

```
 [Microsoft.Office.Tools.Outlook.FormRegionMessageClass(Microsoft.Office.Tools.Outlook.FormRegionMessageClassAttribute.Note)]
        [Microsoft.Office.Tools.Outlook.FormRegionMessageClass("IPM.Note.Archivado")]
        [Microsoft.Office.Tools.Outlook.FormRegionName("hnaOutlookAddin.FormRegionMessageClassArchivado")]
        public partial class FormRegionMessageClassArchivadoFactory
        {
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:12:05.963

对于**自定义 Outlook 图标**- 您必须使用[替换表单区域](https://stackoverflow.com/a/11121393/175679)。如果您需要一个*相邻的表单区域*- 您需要创建另一个类。您可以有多个针对同一消息类的表单区域。我已经为`IPM.Note.XXXX`.

# jasper-reports - 如何在 Ireport 中为所有多选输入控件显示“全部”？

> ID：15200649
> 
> 赞同：0
> 
> 时间：2013-03-04T11:37:21.320
> 
> 标签：jasper-reports, ireport

我有一个报告，其中有三个多选输入控件，我想在报告底部显示所有输入值，为此我添加了具有如下条件的文本字段：-

```
 $P{p_project_location}==null ? "All" : $P{p_project_location}
      $P{p_project_manager}==null ? "All" : $P{p_project_manager}
      $P{p_project_phase}==null ? "All" : $P{p_project_phase} 
```

如果我第一次运行报告而不选择任何参数值，它会为所有三个输入控件显示“全部”，但是一旦我选择了任何输入控件，其他输入控件就不会显示“全部”。

```
 project_location = [India]
      project_manager  = []
      project_phase    = [] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:57:17.807

尝试这个：-

```
 $P{p_project_location}.isEmpty() ? " 'All' ": $P{p_project_location} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:06:10.890

也处理 isEmpty 的可能性：

```
 $P{p_project_location} == null? " 'All' " :
     ($P{p_project_location}.isEmpty() ? " 'All' ":
         $P{p_project_location}
     ) 
```

# php - 努力让我的头脑围绕使用 MySQL 数据创建 PHP 数组

> ID：15200650
> 
> 赞同：0
> 
> 时间：2013-03-04T11:37:21.220
> 
> 标签：php, mysql

这对很多人来说似乎很基本，但我正在努力解决这个问题。

我有一个看起来像这样的 MySQL 表：

```
| email       | name        | mod1 | mod2 | mod3 | mod4 | mod1r | mod2r | mod3r | mod4r |
| jb@test.com | Joe Bloggs  | 401  | 402  | 405  | 410  | yes   | no    | no    | no    |
| ab@test.com | Alex Baines | 401  | 404  | 407  | 409  | no    | yes   | yes   | no    |
| rs@test.com | Rick Summer | 403  | 406  | 408  | 409  | no    | no    | no    | no    | 
```

最后四列与前四列相关（因此 mod1r 对应于 mod1，mod2r 对应于 mod2 等）。

我需要做的是双重的：

*   1：确定哪些记录在最后四列中的一列或多列中有“是”

*   2：识别前面四列中与“是”数据对应的数据。

*   3：在表格中显示结果

所以在上面的例子中，Rick Summer 应该被完全丢弃，因为他没有“是”的数据。Joe Bloggs 应该显示一次，其值为“401”，因为他在“mod1r”列中有一个“是”，而“mod1”中的相应值为“401”。Alex Baines 应该显示两次，一次是“404”，另一次是“407”。

我希望最终输出看起来像这样（在 HTML 表中）：

```
| Name        | Module   |
| Joe Bloggs  |  401     |
| Alex Baines |  404     |
| Alex Baines |  407     | 
```

任何人都可以帮忙吗？我假设我需要使用多维数组来下拉数据，但我正在努力弄清楚如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:53:48.070

试试这个

```
 select name ,mod1 as module from Table1 where mod1r = 'yes'
  union all
   select name ,mod2 from Table1 where mod2r = 'yes'
  union all
   select name ,mod3 from Table1 where mod3r = 'yes'
   union all
   select name ,mod4  from Table1 where mod4r = 'yes' 
```

输出：

```
 NAME         MODULE
 Joe Bloggs     401
 Alex Baines    404
 Alex Baines    407 
```

[**在这里演示**](http://sqlfiddle.com/#!2/a0497/2)

但是要编写整个代码，你应该自己做或者看看这里[使用 PHP 在 HTML 表中显示 MySQL 结果](https://stackoverflow.com/questions/14430174/use-php-to-display-mysql-results-in-html-table) 如何使用 mysqli 构建 html 表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:42:35.733

粗略的实现思路：

```
For all query results as row:
   For all modules as currentModule:
      if (row[currentModule + 'r']):
         outputLine(row['name'], row[currentModule]); 
```

尽管您确实应该考虑从表中删除这些模块列，`user_id`并`module_id`改为创建一个包含列的表。他们你可以做这样的事情，并直接从数据库中得到你的结果：

```
SELECT    u.name, m.module_id module
FROM      users u
JOIN      users2modules m ON u.id = m.user_id
ORDER BY  u.name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:29:57.947

正如其他人所提到的，我肯定会规范化数据库结构，所以你有三个表而不是一个。

用户：

```
user_id  email        name
1        jb@test.com  Joe Bloggs
2        ab@test.com  Alex Baines
3        rs@test.com  Rick Summer 
```

模块：

```
module_id  modules
1          401
2          402
3          403
4          404
5          405
6          406
7          407
8          408
9          409
10         410 
```

用户模块：

```
user_id  module_id
1        1
2        4
2        7 
```

如果您需要添加更多模块，这使得获得您想要的阵列变得更加容易，并且避免了未来的麻烦。然后，以下查询将以您想要的方式返回数据。

```
SELECT u.name, m.module 
FROM users u 
INNER JOIN users_modules um ON u.user_id = um.user_id 
INNER JOIN modules m ON um.module_id = m.module_id 
```

# java - 注释可以完全取代标记接口吗？

> ID：15200651
> 
> 赞同：7
> 
> 时间：2013-03-04T11:37:23.023
> 
> 标签：java, annotations, marker-interfaces

由于标记接口主要用于标记一个类，因此可以通过注释来实现相同的目标。比如`Cloneable`接口可以`@Cloneable`。

那么是否仍然需要标记接口或者可以通过注释来替代？使用其中任何一个有什么优点/缺点吗？我的意思是更喜欢一个而不是另一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:03:38.073

标记接口在用于定义类型时比注释更好。例如，Serializable 可以（并且应该使用）作为必须可序列化的参数的类型。注释不允许这样做：

```
public void writeToFile(Serializable object); 
```

如果标记接口没有定义类型，而只定义元数据，那么注释会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:15:21.227

还要提到的一件事是使用注释的成本。检查对象是否是一个可以使用的接口的实例，`instanceof`这是当今相对低成本的操作。使用注释需要`Java reflection`调用并且成本更高。

# javascript - 获取 div 中的所有元素并使用 tab 键在该 div 中导航这些元素

> ID：15200655
> 
> 赞同：4
> 
> 时间：2013-03-04T11:37:31.470
> 
> 标签：javascript, jquery, html

我需要使用 Tab 键更改 div 中元素的焦点。不应将焦点从 div 中的元素移开。如何才能做到这一点。我正在尝试这种方法：

1) 将 div 内的所有元素放入一个数组

2) 将 keypress 事件绑定到数组中的每个元素并将 nxt 元素传递给它

3）通过将焦点转移到下一个元素的功能处理按键。

**示例代码：**

```
var elements = jQuery('xxx');
elements.each(function (index, element) { 
  element.bind("keypress", { nxt:elements[index+1] }, function(e) {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 9) {
      e.data.nxt[0].focus();
    }
  });
}); 
```

我的疑问是，

1）如何从div中获取所有可以关注tab键的元素。

2）jQuery中是否有任何东西可以一次获得不同类型的元素。（比如，在一个语句中获取输入+选择+a+textarea）

3）如果这种方法不值得，请建议一种。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:56:10.677

看看这个小提琴。它可以帮助您编写 HTML 代码

```
<div id="container">
    <input type="text" id="first"/>
    <input type="text" id="second"/>
    <input type="text" id="third"/>
</div> 
```

JavaScript 代码：

```
var elems = $('div#container input');

 elems.each(function(index,element) {
    console.log(element);
    $(element).keydown(function(e) {
        var code = e.keyCode || e.which;
        console.log(code);
        if(code === 9) {
           $(this).next().focus();
           e.preventDefault();
        }
    })
}) 
```

[http://jsfiddle.net/tmFFk/1/](http://jsfiddle.net/tmFFk/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:48:02.460

你不需要jquery。你可以使用`tabIndex`属性来切换。 [选项卡索引](http://dev.w3.org/html5/spec-author-view/index.html#attributes-1)。

```
<div tabIndex="1">asdasd</div>
<div tabIndex="2">asdasd 2</div>
<div tabIndex="3">asdasd 3</div> 
```

演示：[tabIndex](http://jsfiddle.net/sk9a5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T23:16:31.147

我有类似的问题，并创建了限制 TAB 影响的字段的微型 jQueryUI 插件。你简单地使用它：

```
$(".someGroup").tabGuard(); 
```

这将使选项卡遍历`.someGroup`包装器内的字段。这样，您可以对页面上的各种表单进行分组，如果有意义，焦点将继续迭代 TAB 或 Shift+TAB。在这里找到它：

[http://tomaszegiert.seowebsolutions.com.au/tabguard/index.htm](http://tomaszegiert.seowebsolutions.com.au/tabguard/index.htm)

它用于`:tabbable`获取 TAB 可以关注的所有元素，并随时检查源代码以了解其完成方式。我希望你会发现它很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:57:27.090

如果我没看错，您需要使用 Tab 键在 DIV 之间切换。根据规范，Div 不支持 Tabindex。它仅在 A、AREA、BUTTON、INPUT、OBJECT、SELECT 和 TEXTAREA 上受支持。

至于问题，这是一个非常不寻常但非常有趣的要求。我从未尝试过，但我可以为您的每个查询提供合乎逻辑的建议：

1.  您可以使用 .children() 获取该 div 中的所有子元素。

2.  您可以通过用逗号分隔它们来一次性使用所有选择器，或者您可以为它们提供类。

让我知道它是否有效。

# jquery - 在ajax中选择单选按钮

> ID：15200658
> 
> 赞同：0
> 
> 时间：2013-03-04T11:37:46.970
> 
> 标签：jquery

如何在ajax中自动选择单选按钮？

```
$.ajax({
            url: '/CVEvaluation/GetResultData',
            type: "GET",
            data: { id: evalcriteria },
            success: function (data) {
                // put result of action into element with class "result"
                $("#textfield15").val(data.Column5);
                $("#textfield16").val(data.Column4);
                $("#textfield17").val(data.Column3);
                $("#textfield18").val(data.Column2);
                $("#textfield19").val(data.Column1);
                $("#textfield20").val(data.Total);

            },
            error: function () {
            }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:40:33.227

你需要做类似的事情

```
$('input:radio[value="' + data.x + '"]').prop('checked', true) 
```

# groovy - 许可证-gradle-plugin

> ID：15200659
> 
> 赞同：-2
> 
> 时间：2013-03-04T11:37:50.370
> 
> 标签：groovy, gradle

感谢回复，我正在寻找应用 License-gradle-plugin 来检查源代码中的标头。请给我完整的脚本。

```
buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'nl.javadude.gradle.plugins:license-gradle-plugin:0.5.0'
    }
}

apply plugin: 'license' 
```

我在我的 中使用了此代码`build.gradle`，但它没有更新我所有源文件中的标题`src/main/*.groovy files`。`.groovy`如果不在 groovy 文件中写入标头，我如何编写构建脚本来检查文件中是否存在标头？

谢谢，kothapeta Raju。

* * *

我按照你说的尝试过，但出现以下异常

FAILURE：无法确定要执行的任务。

*   出了什么问题：在根项目“license-gradle-plugin-master”中找不到任务“licenseFormatMain”。

*   尝试：运行 gradle 任务以获取可用任务列表。

构建失败

谢谢，拉朱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:31:08.650

> FAILURE：无法确定要执行的任务。
> 
> 出了什么问题：在根项目“license-gradle-plugin-master”中找不到任务“licenseFormatMain”。
> 
> 尝试：运行 gradle 任务以获取可用任务列表。

如果您不应用 java 插件，就会发生这种情况。在您的构建文件中添加它为我完成了这项工作：

> 应用插件：'java'

**编辑**：我无法通过删除上面的这一行来重现这个问题！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:02:58.407

因此，[阅读说明](https://github.com/hierynomus/license-gradle-plugin)表明您：

把它放在你的`build.gradle`文件中

```
buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'nl.javadude.gradle.plugins:license-gradle-plugin:0.5.0'
    }
}

apply plugin: 'license' 
```

`LICENSE`在项目的根目录中创建一个文件

```
Copyright (C)2013 - Tim Yates

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.

See the License for the specific language governing permissions and
limitations under the License. 
```

然后输入

```
gradle licenseFormatMain 
```

# markdown - 使用 doxygen 1.8.3 引用 markdown 主页内容

> ID：15200675
> 
> 赞同：1
> 
> 时间：2013-03-04T11:38:41.820
> 
> 标签：markdown, doxygen

我正在使用这样的降价主页（`mainpage.md`）

```
The Main Page
=============

qwertz

A Section
---------

asdf 
```

连同`USE_MDFILE_AS_MAINPAGE = mainpage.md`在配置中。

我想从源代码中的文档（自动）链接到“A Section”部分，但我还没有弄清楚如何做到这一点。我假设“A 部分”生成一个可自动链接的目标，但我如何引用它（即使用`\see ?WhatToWriteHere?`）？

另外，尝试这个

```
A Section {#asdfg}
--------- 
```

产生奇怪的警告`found subsection command outside of section context!`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T17:15:59.323

如果您使用`@section section_01 A Section`而不是使用`=====`下划线对主页进行编码，那么您可以使用 doxygen 命令

`@ref section_01 "text for link here"`

从其他地方创建指向它的链接。我正在使用 1.8.5 成功完成此操作。

似乎 Doxygen 处理的 vanilla markdown 标头（使用 # 序列的下划线）不会产生任何 Doxygen 识别为目标的东西 - 无论是用于链接到文档索引还是用于在文档索引中列出（这有点令人沮丧）。

# java - 在 java(w).exe 进程列表中查找 .jar 的名称

> ID：15200676
> 
> 赞同：7
> 
> 时间：2013-03-04T11:38:52.007
> 
> 标签：java, windows, process, jar, cmd

在我的公司环境中，有这个脚本可以在很多计算机上运行，​​我偶尔会要求用户杀死它，因为众所周知它会不时锁定。

我在想办法自己杀死它。我注意到我可以远程列出 using`pslist`然后使用`pskill`.

现在的问题是，当有人运行多个 java 应用程序（例如 Eclipse、此应用程序、另一个 java.exe 应用程序...）时，要在 pslist 中杀死正确的应用程序变得很棘手，看起来像这样：

```
javaw  4214 .. ...
javaw  5000 .. ... 
```

等等。这些是不同的应用程序，但它们都从 javaw.exe 运行。有没有办法找出他们正在运行的 .jar 的名称，所以我可以根据它终止进程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:48:18.320

您可以列出 java 进程

```
jps 
```

或者

```
jps -v 
```

Jps 是 JDK 和 JRE 提供的一个工具，你可以在 JDK_HOME/bin 中找到它。选项 -v 显示附加信息（JVM 启动参数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T03:14:50.463

您可以使用`jps`. 它本身并不能提供太多有用的信息来识别 java 应用程序。你需要一点额外的细节。

您可以使用以下选项`jps`来打印传递给 java 应用程序的完整命令行参数（JVM 参数和主方法参数），

```
jps -lvm 
```

参考：[https ://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html)

# android - 检索 HttpPost 实体时出错

> ID：15200684
> 
> 赞同：0
> 
> 时间：2013-03-04T11:39:16.930
> 
> 标签：android, entity, http-post, httprequest

以下是我发布的代码，然后从 url 获取响应...每当我运行代码时，我都没有在 Bufferedreader 中获得响应...

```
protected Void doInBackground(String... urls) {

    try{

    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost("http://www.indianrail.gov.in/pnr_Enq.html");

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

     response = httpclient.execute(httppost);

    }catch(Exception e){

    Log.e("log_tag", "Error in http connection "+e.toString());

    }

    return null;

    }

protected void onPostExecute(Void unused) {

    Dialog.dismiss();
    HttpEntity httpEntity= response.getEntity();
    Toast.makeText(getApplicationContext(), "resp of :"+response.getEntity().getContentLength(), Toast.LENGTH_SHORT).show();

    try {
        Toast.makeText(getApplicationContext(), "in", Toast.LENGTH_SHORT).show();
        Toast.makeText(getApplicationContext(), ""+response.getEntity().getContentLength(), Toast.LENGTH_SHORT).show();
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        Toast.makeText(getApplicationContext(), "string creating :)",Toast.LENGTH_SHORT).show();
       Toast.makeText(getApplicationContext(), ""+line, Toast.LENGTH_SHORT).show();
    }  catch (Exception e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "error", Toast.LENGTH_SHORT).show();

        e.printStackTrace();
    } 
```

我在 postExecute 方法中的 Bufferedreader 出现错误... LogCat o/p 如下

```
E/ActivityThread(611): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf4cf0 that was originally bound here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:01:41.307

尝试以下操作：

如果您的响应是 json 格式，请以下列方式使用您的代码，然后使用来自实体的“响应” `doInBackground(Void... params)`：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(serviceURL);                                   
request.setHeader("Accept", "application/json");
request.setHeader("Content-type", "application/json");
HttpResponse response = client.execute(request);
HttpEntity entity = response.getEntity(); 
```

用错误回复你得到的结果..

# java - JSON异常错误

> ID：15200689
> 
> 赞同：0
> 
> 时间：2013-03-04T11:39:27.983
> 
> 标签：java, php, android, json, parsing

当我运行我的应用程序时，我在 logcat 上收到以下错误。我有很多错误，在做一些研究后我设法解决了这些错误。但是，这个我无法弄清楚：

```
03-04 02:52:29.475: E/JustDealsUtils(1913): Error parsing to json on getJarrayFromString(); org.json.JSONException: Expected ':' after result at character 8 of {result} 
```

编辑1：

现在的错误是：

```
Error parsing to json on getJarrayFromString(); org.json.JSONException: Value result of type java.lang.String cannot be converted to JSONArray 
```

与此相关的还有 fillproductlist() 的错误

这是我的Java代码：

```
public void onTaskCompleted(String result) {
                        try {  
                            if(result!=""){
                                // the remote php link 
                                // converting the response into json array
                                Log.i(DEBUG, result);
                                jarray = utils.getJarrayFromString(result);

                                // number of rows in total for a query
                                int mysqlSize = (jarray.getJSONObject(0).getInt("numRows"));

                                Log.i(DEBUG, "From " + from + " to " + mysqlSize);

                                // to check if all the rows are parsed from the mysql
                                if(from <= mysqlSize){
                                    int rows;
                                    // to check if there is 0
                                    if(jarray.length()>0){
                                        Log.i(DEBUG, "From " + from + " to " + Math.floor(mysqlSize/nr)*nr);
                                        if(from+5<=Math.floor(mysqlSize/nr)*nr){
                                            rows = jarray.length();
                                        }else{
                                            rows = mysqlSize%nr+1;
                                            Utils.IS_ENDED_PRODUCT_LIST = true;
                                        }
                                        ArrayList<String> list = new ArrayList<String>();
                                        for(int i=1; i<rows; i++){
                                            JSONObject row = jarray.getJSONObject(i);
                                            bid.add(row.getInt("bid"));
                                            bTitle.add(row.getString("bTitle"));
                                            bCode.add(row.getString("bCode"));
                                            bPrice.add(row.getString("bPrice") + "£");
                                            bDescription.add(row.getString("bDescription"));
                                            bModule.add(row.getString("bModule"));
                                            bImage.add(Utils.PATH + row.getString("bImage"));
                                            list.add(row.getString("bImage"));
                                            // to check if an id already exists in the db or to create one if doesn't exist
                                            if(!db.hasIDBooks(row.getInt("bid"))) db.createRowOnBooks(row.getInt("bid"), row.getString("bTitle"), row.getString("bCode"), row.getString("bPrice"), row.getString("bDescription"), row.getString("bModule"), Utils.PATH + row.getString("bImage"), row.getString("bSpecialOffer"), row.getInt("bSpecialDiscount"), row.getString("bDateAdded"));
                                            Log.i(DEBUG, row.getString("bDescription"));
                                        }
                                        new DownloadImages(list, bAdapter).execute();
                                    }
                                }
                                postParameters.removeAll(postParameters);
                            }else{
                                Utils.IS_ENDED_PRODUCT_LIST = true;
                                if(rlLoading.isShown()){
                                    rlLoading.startAnimation(fadeOut());
                                    rlLoading.setVisibility(View.INVISIBLE);
                                }
                            }
                        } catch (Exception e) {  
                            Log.e(DEBUG, "Error at fillProductList(): " + e.toString());  
                        }
                    }
                });
                task.execute();

        }else{
            // if internet connectio is not available
            // then, rows will be fetched from the local sqllite database stored on the android phone
            if(db.size(justdealsDatabase.TABLE_BOOKS) > 0){
                Cursor cursor = db.getBooksRows(justdealsDatabase.TABLE_BOOKS);
                cursor.moveToFirst();
                while(!cursor.isAfterLast()){
                    bid.add(cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_BID)));
                    bTitle.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BTITLE)));
                    bCode.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BCODE)));
                    bPrice.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BPRICE))+ "£");
                    bDescription.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BDESCRIPTION)));
                    bModule.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BMODULE)));
                    bImage.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BIMAGE)));
                    cursor.moveToNext();
                }
                bAdapter.notifyDataSetChanged();
                Utils.IS_ENDED_PRODUCT_LIST = true;
            }
        }
    } 
```

我的 JSON 数组代码（完整编辑 2）：

```
public String getJsonFromUrl(String url){

        // to initialise the objects
        InputStream is = null;
        String result = "";

        //making HTTP POST request
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response = httpClient.execute(httpPost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e(DEBUG, "Error getJsonFromUrl: " + e.toString());
        }

        // Converting to String
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null){
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e(DEBUG, "Error converting the response to string getJsonFromUrl: " + e.toString());
        }

        return result;
    }

    /**
     * To convert the string recieved into json object
     * result refers to the string that will be converted
     * @return will return the json array
     */
    public JSONArray getJarrayFromString(String result){
        // Parsing string to JSON Array
        try{
            jarray = new JSONArray("result");
        }catch(JSONException e){
            Log.e(DEBUG, "Error parsing to json on getJarrayFromString(); " + e.toString());
        }

        return jarray;
    } 
```

还有我的 PHP API（编辑 1）：

```
 <?php
    include("MysqlConnection.php");
    header('Content-Type: application/json');
    $from = $_POST["from"];
    $nr = $_POST["nr"];
    // those variables are for search
    $title = $_POST["title"];
    $code = $_POST["code"];
    $price = $_POST["price"];
    $module = $_POST["module"];
    $order = $_POST["order"];
    $by = $_POST["by"];

    $sql = "SET CHARACTER SET utf8";
    $db->query($sql);

        // if those 2 var are set then we order the query after them
        if(isset($order) && isset($by)){
            $sql .= " ORDER BY `$order` $by LIMIT $from, $nr";
        }else{
            $sql .= "LIMIT $from, $nr";
        }

        $query = $db->query($sql);
        $rows = array();
        $rows[] = array("numRows"=>$db->numRows($query));

        if($db->numRows($query)!=0){
            while($row = mysql_fetch_assoc($query)) {
                $rows[] =  $row;
            }
            echo(json_encode($rows));
        }
    }

    $db->closeConnection();
?> 
```

我已经实现了你们推荐的所有建议，仍然没有让这段代码工作的运气！！！！

我不确定为什么“结果”字符串的值不能转换为 JSONARRAY ？？？？

我已经向您展示了 JSON 数组声明、结果字符串声明以及 PHP（编辑版本见上文）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:41:47.420

你必须使用`echo`不`print_r`

```
echo json_encode($rows); 
```

`print_r`以数组格式给出输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:44:42.750

You have send the result two times you have to send the result only one time with encoded remove the following code and try

```
echo json_encode($rows); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:11:42.173

Maybe you should name your array without "{}" symbols?

```
jarray = new JSONArray("result"); 
```

instead of

```
jarray = new JSONArray("{result}"); 
```

# magento - 根据 magento 中的属性显示产品

> ID：15200692
> 
> 赞同：0
> 
> 时间：2013-03-04T11:39:36.983
> 
> 标签：magento, magento-1.7

我正在使用 magento 中的自定义模块。

我创建了两个新属性（组合框）make 和 location。之后，我使用针对特定产品的自定义代码为这些属性添加值。就像我添加“Sony”一样，位置是“Australia”，针对产品 1（1 是产品的 id）。

现在在管理方面，我想显示这个产品的属性值，比如品牌是索尼，位置是澳大利亚，产品是 1。

我发现了一些表，其中这些值是链接的（catalog_product_entity_int，eav_attribute，eav_attribute_option，eav_attribute_option_value），但我无法查询这些记录。我要显示数据的页面我有属性 id 和属性代码。

谁能知道我怎么能弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:16:03.677

很简单的哥们。

在自定义模块网格的 _prepareCollection() 方法中

加载产品集合并选择这两个属性...如果需要通过这两个属性对其进行过滤，请执行此操作。

# java - 在 Java Hibernate 实体关系中只允许某些子类

> ID：15200698
> 
> 赞同：1
> 
> 时间：2013-03-04T11:39:59.437
> 
> 标签：java, hibernate, design-patterns, subclass

我正在使用 Hibernate 3.2.5 创建一个 Java 应用程序。我在 Netbeans 7.2 中开发，数据库是 MySQL 5.5。其基本理念是美式橄榄球比赛。

我目前的问题在于`Play`类的设计：我想将 a`Play`与 a链接`PlayerAction`，但在任何给定的 上`Play`，只能接受的某些子类`PlayerAction`。有几种类型的约束：

*   需求约束（“这个`Play`子类必须有这个`PlayerAction`”）
*   可能性约束（“这个`Play`子类可以有这个`PlayerAction`”）
*   排除约束（“这个`Play`子类不能同时具有`PlayerAction`A 和 B”）

代码：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Play implements Countable, Serializable, Locatable {
  @OneToMany(cascade=CascadeType.ALL, mappedBy="play")
  private List<PlayerAction> actions;
} 
```

例如，我的班级`PassingPlay`只能允许`PlayerActions`以下类型：

*   `PassAction`
*   `ReceptionAction`
*   `SackAction`
*   `InterceptionAction`
*   `SackAction`排除`ReceptionAction`

`RunningPlay`只能允许`PlayerActions`以下类型：

*   必需的`RunAction`
*   `TackleAction`
*   `FumbleAction`

等等

只要易于维护，理想的解决方案不必易于构建。我目前唯一的想法是给每个子类一个返回 String[][] 的方法，但这太蹩脚、笨重且非 OO——我什至不想开始实现它。

# image - 如何将代码库转换为难以破解的版本？

> ID：15200699
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:40:00.850
> 
> 标签：image, codebase

对于工作面试，我必须交给他们一些我编写的代码，以确定我的面向对象编程技能。

现在我已经在同一家公司工作了大约两年，我们有一个我复制的项目。但由于版权的原因，我不能只将这个项目发送给他们。但我确实想向他们展示它，因为我需要那份工作。

有什么方法（合法的）可以向他们展示这个项目吗？我可以只撕掉我写的几个文件吗？我可以将项目转换为 jpg 什么的吗？是的，他们可以对其进行 OCR，但我认为他们不会这样做。

有人可以帮忙吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:56:50.140

只值我的 2 美分 - 但如果该项目属于您目前工作的公司，那么未经他们的明确许可，我将避免在公司之外使用所有这些代码库。即使你面试的公司无意复制你提供的代码，这仍然会影响他们对你的信任程度。即使在你提供给他们的代码中展示了卓越的编码技能，他们也不太可能如果您觉得在类似情况下您可能会将他们的部分代码库交给另一家公司，请雇用您。

# python - 如何为我在 pty 下运行的进程设置终端前台进程组？

> ID：15200700
> 
> 赞同：6
> 
> 时间：2013-03-04T11:40:02.057
> 
> 标签：python, posix, subprocess, pty, posix-api

我编写了一个简单的包装脚本，用于在命令失败时重复命令[retry.py](https://github.com/stsquad/retry)。但是，当我想查看子命令的输出时，我不得不使用一些 pty 技巧。这对于像 rsync 这样的程序可以正常工作，但是像 scp 这样的其他程序应用额外的测试来显示他们的进度表等东西。

scp 代码有一个广泛的测试：

```
getpgrp() == tcgetpgrp(STDOUT_FILENO); 
```

当我通过包装脚本运行时失败了。正如您在我的简单 tty_test.c 测试用例中看到的那样：

```
./tty_tests
isatty reports 1
pgrps are 13619 and 13619 
```

和：

```
./retry.py -v -- ./tty_tests
command is ['./tty_tests']
isatty reports 1
pgrps are 13614 and -1
child finished: rc = 0
Ran command 1 times 
```

我尝试使用 tcsetpgrp()，它最终作为 pty fd 上的 IOCTL，但这会导致 ptys 出现 -EINVAL。如果可能的话，我宁愿继续使用 Python 子进程机制，或者是否需要手动 fork/execve'ing？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T20:48:01.447

如果您不需要为子流程提供全新的 pty，我相信您可以将您的程序缩减到此：

```
from argparse import ArgumentParser
import os
import signal
import subprocess
import itertools

# your argumentparser stuff goes here

def become_tty_fg():
    os.setpgrp()
    hdlr = signal.signal(signal.SIGTTOU, signal.SIG_IGN)
    tty = os.open('/dev/tty', os.O_RDWR)
    os.tcsetpgrp(tty, os.getpgrp())
    signal.signal(signal.SIGTTOU, hdlr)

if __name__ == "__main__":
    args = parser.parse_args()

    if args.verbose: print "command is %s" % (args.command)
    if args.invert and args.limit==None:
        sys.exit("You must define a limit if you have inverted the return code test")

    for run_count in itertools.count():
        return_code = subprocess.call(args.command, close_fds=True,
                                      preexec_fn=become_tty_fg)
        if args.test == True: break
        if run_count >= args.limit: break
        if args.invert and return_code != 0: break
        elif not args.invert and return_code == 0: break

    print "Ran command %d times" % (run_count) 
```

该`setpgrp()`调用在同一会话中创建一个新进程组，以便新进程将接收来自用户的任何 ctrl-c/ctrl-z/etc，而您的重试脚本不会。然后`tcsetpgrp()`使新进程组成为控制 tty 上的前台。新进程在`SIGTTOU`发生这种情况时得到一个（因为从 开始`setpgrp()`，它一直在后台进程组中），这通常会使进程停止，所以这就是忽略`SIGTTOU`. 我们将`SIGTTOU`处理程序设置回原来的状态，以尽量减少子进程被意外信号表混淆的机会。

由于子进程现在位于 tty 的前台组中，因此它的 tcgetpgrp() 和 getpgrp() 将是相同的，并且 isatty(1) 将为真（假设它从 retry.py 继承的 stdout 实际上是一个 tty）。您不需要代理子进程和 tty 之间的流量，这样您就可以放弃所有的`select`事件处理和 fcntl-nonblocking-setting。

# android - android @Nullable 注解

> ID：15200701
> 
> 赞同：4
> 
> 时间：2013-03-04T11:40:02.477
> 
> 标签：android

我想创建

> android @Nullable 注解

例如，我检查这两个链接

[http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/Nullable.html](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/Nullable.html) [http://code.google.com/p/google-guice/wiki/UseNullable](http://code.google.com/p/google-guice/wiki/UseNullable)

但在 android 中不起作用，因为 RetentionPolicy，ElementType 无效

如何在 android 中创建 @Nullable 注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:50:52.923

在项目库中包含`jsr-305` [`jar`文件。](http://mvnrepository.com/artifact/net.sourceforge.findbugs/jsr305/1.3.2)与字段一起使用`@nullable`，RoboGuice 将停止抱怨空对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T12:55:24.370

# objective-c - 在可可的常量文件变量中设置颜色

> ID：15200702
> 
> 赞同：0
> 
> 时间：2013-03-04T11:40:05.530
> 
> 标签：objective-c, cocoa

这是我在可可中的常量文件。

```
 #ifndef confEx__CHBConstants_h
   #define confEx__CHBConstants_h

   #define invalidUserStatus @"Invalid"
   #define serverProblemStatus @"Server problem"
    #define appleIdRequiredStatus @"check"

  #endif 
```

有没有办法在这个文件本身中为变量设置颜色，例如（serverProblemStatus）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:50:51.197

如果您正在谈论 Xcode 的语法着色：不，无法从代码中更改源代码颜色。

旁注：您的定义是预处理器宏，而不是变量——它们应该是棕色的；）

# dynamics-crm-2011 - 强制执行 Dynamics CRM 重复检测

> ID：15200704
> 
> 赞同：2
> 
> 时间：2013-03-04T11:40:11.507
> 
> 标签：dynamics-crm-2011

如何对新记录强制执行重复检测规则？
目前，用户会收到可能重复的通知，但可以选择忽略警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:16:25.613

CRM 2011 中的重复检测规则实际上并不能阻止创建重复记录，它们只是检测看起来像重复的内容并向用户显示警告（就像您正在经历的那样）

如果您确实想强制不创建重复项，则需要创建自己的插件，并将其注册为要防止重复检测的实体的创建消息。一旦插件触发，它会进行快速查询以查看当前正在创建的实体是否已经存在。

更重要的是，即使有一个功能完美的插件，由于多个服务器/线程，仍然可以创建一个副本，但这需要两个独立的用户几乎同时执行创建，并且取决于您的负载，可能永远不会发生。

# java - 某个日期的假系统时钟

> ID：15200705
> 
> 赞同：1
> 
> 时间：2013-03-04T11:40:13.940
> 
> 标签：java, testing

我需要在测试中的某个日期设置系统时钟。这样，我必须在测试中模拟该日期发生的行为。我发现这篇文章[http://www.javapractices.com/topic/TopicAction.do?Id=234](http://www.javapractices.com/topic/TopicAction.do?Id=234)

但它并没有给你太多提示如何设置假系统时钟，例如 2.5.2013。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:57:15.917

假设您需要为测试操纵时间而不是真正更改系统时钟...考虑使用[Joda-Time](http://joda-time.sourceforge.net)，这具有内置的功能，例如：

```
// always return the same time when querying current time
DateTimeUtils.setCurrentMillisFixed(millis);

// then test 
assert new DateTime().getMillis() == millis;

// reset time
DateTimeUtils.setCurrentMillisSystem() 
```

不过，您必须权衡使用 Joda-Time 和自己实施解决方案之间的权衡！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:50:18.507

一般来说，操纵系统日期时间不是一个好习惯，我仍然记得每次运行单元测试时我的前景如何变得疯狂以及过去的各种提醒如何弹出。

您可以创建一个静态类，该类根据环境返回日期时间，因此在测试环境中。它将允许设置您可以在实际运行时访问的日期时间，它将返回系统日期/时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:50:50.803

> 但它并没有给你太多提示如何设置假系统时钟，例如 2.5.2013。

确实如此。我想您按照这些步骤操作并用接口替换了所有对系统时间的调用（`TimeSource`例如）。如果您需要模拟特定日期，您可以在测试类中使用以下实现：

```
public final class TestTimeSrc implements TimeSource {

  public long currentTimeMillis() {
     Calendar calendar = Calendar.getInstance();
     calendar.set(2013, 4, 2);
     return calendar.getTime().getTime();
  }
} 
```

# c - 任何类型向量的中间

> ID：15200708
> 
> 赞同：1
> 
> 时间：2013-03-04T11:40:19.730
> 
> 标签：c

我有以下数据结构：

```
typedef struct {
      size_t d; /* dimension of elements*/
      TFComp fid; TFComp ord; /* fid and ord are some comparation functions*/
      char *v, *s, *t; /* v points to the starting point of vector; s points to end of usable area of vector; t points to the end of available area */
      } TMultime; 
```

和声明：

```
TMultime *m;

char *p=m->v; /* starting point */
char *q=m->s;  /* end of usable area of vector */ 
```

让我们这么说`m->d = sizeof(int);`

我想找到这个向量的中间；

我试过`*middle = p + (q - p)/2 * m->d;`

它失败了。它给了我一个甚至不在向量中的值；

我需要一些帮助才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:56:11.053

（让我们忽略可能的可移植性问题）

指向数组物理中间的指针是

```
char *m = p + (q-p)/2; 
```

因为 p 和 q 是指向 char 的指针。但请注意：表达式计算 char 数组的中间值！为了获得一个指向m->d大小块中间的指针，表达式为：

```
char *m = p + ((q-p)/(2*m->d))*m->d; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:52:10.397

这：

```
*middle = p + (q - p)/2 * m->d; 
```

取两个 char 指针之间的差，除以 2，然后乘以*实际*类型的大小。

通常，int 至少是 char 大小的 4 倍，因此索引会超出范围。

所以我怀疑你正在调用未定义的行为。

您需要数组/向量中的元素数，而不是字节数。

# eclipse - 了解 Eclipse 中的 git/eGit 推/拉行为

> ID：15200722
> 
> 赞同：3
> 
> 时间：2013-03-04T11:41:00.673
> 
> 标签：eclipse, git, egit

假设存在两个远程存储库的签出。当从第一个本地 repo 提交/推送 eGit，然后从第二个本地 repo 拉取时，eGit 会显示一个对话框，确认正在拉取的提交，但在编辑器中，更改的文件内容不会更新。

我的理解是 git pull 也会进行合并，因此应该更新工作目录中的文件。这是不正确的吗？我需要在 Eclipse eGit 中执行哪些额外步骤才能使文件更新内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:14:24.520

我认为这个问题无效，因为我认为这是由于第二个本地仓库的远程跟踪配置错误。修复后，文件内容会按预期在拉取后更新。感谢大家的意见。

但是，双方的 fetch/push 规范都还可以，远程跟踪不正确，即在 .git/config`[branch "my_branch"]`部分中，我为第二个本地 repo 得到了错误的`merge`规范，所以这就是为什么 pull 没有与我期望的本地分支合并.

* * *

关于问题和修复的更多细节：就像我说的，获取和推送规范是好的，但是当我在第二台机器上设置本地分支和他们的跟踪时，我一定犯了一个错误。在第一台机器的情况下，它是正确的。在`.git/config`我看到

```
[branch "master"]
        remote = origin
        merge = refs/heads/master
[branch "1.3.0"]
        remote = origin
        merge = refs/heads/1.3.0
[branch "1.3.0-devel"]
        remote = origin
        merge = refs/heads/1.3.0-devel 
```

但是，在第二台机器上，我可能错误地输入了创建分支和设置跟踪的命令，因此`git branch -t my_branch_1 origin/my_branch_1`重复了许多分支，所有这些分支我都想跟踪具有相同名称的远程分支，分支名称不匹配所以我结束了有这样的配置

```
[branch "master"]
        remote = origin
        merge = refs/heads/1.3.0-devel
[branch "1.3.0"]
        remote = origin
        merge = refs/heads/master
[branch "1.3.0-devel"]
        remote = origin
        merge = refs/heads/1.3.0 
```

我在问题中提到的事务发生在 1.3.0-devel 分支上：我从第一台机器提交并推送到 origin/1.3.0-devel，但是因为在第二台 1.3.0-devel 没有跟踪 origin/ 1.3.0-devel，pull 没有与当前签出的 1.3.0-devel 本地分支合并。

我通过发出命令`git branch --set-upstream 1.3.0-devel origin/1.3.0-devel`并对所有其他分支重复此操作来解决此问题。（注意，这是针对 git 版本 1.7.x。对于 1.8.x，它是[不同](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch?answertab=active#tab-top)的）

# php - 媒体查询在 php 文件中不起作用

> ID：15200726
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:41:07.717
> 
> 标签：php, css, media-queries

嗨，在我的 php 文件中，媒体查询没有从我的 css 中读取，但是如果我将 php 文件保存为 html 文件，我的媒体查询就可以工作。

我正在使用 php，所以我可以使用包含函数，例如

有没有办法让我的媒体查询仍然在 php 文件中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:50:40.453

你怎么称呼媒体查询CSS？媒体查询独立于页面扩展。我在 php 文件中使用媒体查询没有问题。我在我的 php 文件的头部调用它们：例如：

```
<head>
...
<link rel="stylesheet" type="text/css" href="assets/css/style.css" />
<link rel="stylesheet" type="text/css" href="assets/css/mediaqueries.css" />
</head> 
```

在 style.css 中是一般样式，并且在 mediaqueries.css 文件中，我将我的样式应用于任何决定性的，例如：

```
/* iPads (portrait and landscape) ----------- */
@media only screen
and (min-width : 768px) 
and (max-width : 1024px) {
   /* specific CSS for IPad*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:51:14.190

媒体查询是一项**CSS**功能，不应该在 PHP 文件中，它应该在**外部 CSS 文件**中，并且应该包含在`<link>`标签中。

像：

```
<link href="http://server.info/jquery.socialist.css" rel="stylesheet"/> 
```

如果出于特定原因，您必须使用 PHP 动态生成媒体查询，请继续在`<link>`标签中包含您的 PHP 脚本。

```
<link href="http://server.info/your_css_generated_with_php.php" rel="stylesheet"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:52:11.930

您有一个只查找`320px to 480px`. 但是你给`980px`.container 一个宽度。显然，我觉得它不合适。你可能想重新审视你的风格。

# visual-studio-2010 - 算子性能>>(istream&, double) VC10/VC11

> ID：15200728
> 
> 赞同：0
> 
> 时间：2013-03-04T11:41:19.057
> 
> 标签：visual-studio-2010, performance, visual-studio-2012

从 VC10 切换到 VC11 我观察到在读取带有`double`数字的文件时性能下降了 10 倍：

```
#include <iostream>

int main() {
  double sum = 0, x;
  for(int i=0; i<1000000; i++){
    std::cin >> x;
    sum += x;
  }
  std::cerr << sum << std::endl;
  return 0;
} 
```

我在 Developer Studio 中构建了可执行文件，以便环境最多选择发布模式中的选项。

有人可以证实这一点吗？可能是什么问题呢？可能与`locale`？

提前致谢，

安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T13:36:13.100

*由于某种原因，我之前的答案被删除了（我承认第一句话有点令人困惑，因为当它得到更好的结果时进行了笨拙的编辑）

实际上，对我来说，性能大致相同。

VC11 写/读 1M 双倍 -> 6.600/3.562 秒
VC10 写/读 1M 双倍 -> 6.266/3.606 秒

所以在我的实验中，从 vc11 中的文件中读取双精度值是 aprox。与 vc10 的性能相同。代码示例：

```
int _tmain(int argc, _TCHAR* argv[])
{
  auto x = 0.0;
  auto numberofdoubles = 1000000;
  auto filename = "C:\\double.txt";

  {
  std::ofstream filestr(filename);
  auto starttime = clock();
  for(int i=0; i<numberofdoubles; i++)
    filestr << (double)i << " ";

  auto endtime = clock();
  auto elapsed = (double)(endtime - starttime)/CLOCKS_PER_SEC;
  std::cout << "writing: " << elapsed << std::endl;
  }

  {
  std::ifstream filestr (filename);
  auto starttime = clock();
  for(int i=0; i<numberofdoubles; i++)
    filestr >> x;

  auto endtime = clock();
  auto elapsed = (double)(endtime - starttime)/CLOCKS_PER_SEC;
  std::cout << "reading: " << elapsed << std::endl;
  }

  return 0;
} 
```

# android - 在 Android 应用程序中使用 Joda API

> ID：15200730
> 
> 赞同：0
> 
> 时间：2013-03-04T11:41:24.433
> 
> 标签：android, button, jodatime

我想通过 DateTime 类获取当前日期和时间，我从[http://sourceforge.net/projects/joda-time/files/joda-time/下载了 Joda](http://sourceforge.net/projects/joda-time/files/joda-time/)

我将提取文件夹中的三个 jar 文件添加到我的项目属性的 java 构建路径中。我的代码类似于以下代码：

```
import org.joda.time.DateTime;

public class TappedNFC extends Activity {

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_tapped_nfc);

            Button BeamButton=(Button)findViewById(R.id.BeamButton);
            BeamButton.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                     DateTime dt = new DateTime();
                      int month = dt.getMonthOfYear();

                TextView tx=(TextView)findViewById(R.id.textView1);
                tx.setText(Integer.toString(month));

                }
            });
        } 
```

但logcat得到异常：

```
03-04 14:57:18.309: E/AndroidRuntime(540): FATAL EXCEPTION: main
03-04 14:57:18.309: E/AndroidRuntime(540): java.lang.NoClassDefFoundError: org.joda.time.DateTime
03-04 14:57:18.309: E/AndroidRuntime(540):  at com.example.tappednfc.TappedNFC$1.onClick(TappedNFC.java:28)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.view.View.performClick(View.java:3460)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.view.View$PerformClick.run(View.java:13955)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.os.Handler.handleCallback(Handler.java:605)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:137)
03-04 14:57:18.309: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4340)
03-04 14:57:18.309: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 14:57:18.309: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:511)
03-04 14:57:18.309: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-04 14:57:18.309: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-04 14:57:18.309: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method) 
```

我以前没用过Joda，所以请帮我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:03:52.833

当您说您将它们添加到您的构建路径时，您是否使用了“Properties”>“Java Build Path”>“Add External Jars”的正常（但对于 Android 不正确）路线？在你的 Android 项目中捆绑外部 jar 的正确方法是创建一个“libs”（注意是复数）目录并直接将它们粘贴到该目录下。

然后，项目构建将在“Android Dependencies”下显示您的依赖 jar，它们将正确捆绑到 APK 中。如果您不遵循该路线，则不会添加外部 jar，您将看到您注意到的各种异常。

# linux - 如何停止在 Django 中以守护程序模式运行的服务器？

> ID：15200732
> 
> 赞同：3
> 
> 时间：2013-03-04T11:41:34.873
> 
> 标签：linux, django

我将 Django 开发服务器运行为：

```
nohup.out ./manage.py runserver 
```

如何停止服务器？

尝试使用：

`nohup.out ./manage.py stop runserver`但它不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T12:16:54.507

检查与Django相关的python的进程id

```
ps -ef | grep python

kill -9 Process_id_no. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-24T13:51:26.877

自动使用：

```
ps -ef|awk 'BEGIN{}{if(match($8, /python/))system("kill -9 " $2)}END{}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T13:33:58.287

Nohup.out 是来自 nohup 的日志文件。
你想要的是：`nohup python manage.py runserver`
但是 nohup 引入了它自己的问题，所以我建议你使用 Screen 代替。
要使用 Screen：`screen python manage.py runserver`一旦启动，您就可以使用`<Control - D>`.
然后，如果您需要在某个时候重新连接，您可以使用`screen -x`.

# jquery - jQuery TinySort 无法选择 div 对它们进行排序，或者其他东西阻止了排序

> ID：15200736
> 
> 赞同：0
> 
> 时间：2013-03-04T11:41:45.530
> 
> 标签：jquery, css-selectors, tinysort

我正在尝试让 jQuery 插件[TinySort](http://tinysort.sjeiti.com/)按链接的 href 属性对 div 进行排序。我想要可排序的 div（“box”）在两个单独的 div（“row1”和“row 2”）中均匀划分，这两个 div 在另一个 div（“项目”）中。IE，可排序的 div 从父元素向下三层。

我的功能是一个简单的点击事件来排序：

```
$("#sortname").click(function(){
$(".box").tsort("a",{order:"desc",attr:"href"});
}); 
```

我认为这意味着：

单击#sortname 时，所有.box 将按其中包含的链接的href 属性降序排序。实际上，单击它时没有任何反应。我觉得我在这里遗漏了一些明显的东西。

我也试过

```
$(".box > div").tsort("a",{order:"desc",attr:"href"}); 
```

和

```
$(".box div").tsort("a",{order:"desc",attr:"href"}); 
```

选择 .box 的子项和后代 div，但这些也不起作用。

HTML：

```
<h1 id="sortname">Sort By Name</h1>
<div id="projects">
<div class="row1">   
<div class="box">  
<a href="project1.htm"><img class="project1" src="project1"/></a>   
<div class="caption"><a href="project1.htm">Project 1</a></div>
</div>

<div class="box">  
<a href="project2.htm"><img class="project2" src="project2"/></a>   
<div class="caption"><a href="project2.htm">Project 2</a></div>
</div>

<div class="box">  
<a href="project3.htm"><img class="project3" src="project3"/></a>   
<div class="caption"><a href="project3.htm">Project 3</a></div>
</div>
</div>

<div class="row2">     
<div class="box">  
<a href="project4.htm"><img class="project4" src="project4"/></a>   
<div class="caption"><a href="project4.htm">Project 4</a></div>
</div>

<div class="box">  
<a href="project5.htm"><img class="project5" src="project5"/></a>   
<div class="caption"><a href="project5.htm">Project 5</a></div>
</div>

<div class="box">  
<a href="project6.htm"><img class="project6" src="project6"/></a>   
<div class="caption"><a href="project6.htm">Project 6</a></div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:29:59.853

这不会按照您想要的方式排序，因为您已将 .box 嵌套在不同的父项（.row1 和 .row2）中。排序将起作用，但 .box 节点将始终留在其父节点内。只需省略那些父行，您应该可以通过排序来处理：

```
$('.box').tsort('a',{attr:'href'}); 
```

无论如何，您将不需要 .row 父母。使用一个具有固定宽度的父级并使用 nth-child 设置子级 .box 的边距

# jquery - 模态对话框中的jquery datepicker

> ID：15200740
> 
> 赞同：2
> 
> 时间：2013-03-04T11:42:07.637
> 
> 标签：jquery

有人问过这个问题，但结果不同。人们在使用模式对话框中的日期选择器和显示日期选择器时遇到了麻烦（使用 z-index 属性）。

但是，我只是简单地复制了用于使 datepicker 从脚开始工作的 js，但是在模态弹出窗口的视图中。然后显示日期选择器，但不会用所选日期填充所选输入框。

我在其他任何地方都可以使用的代码如下：

```
$('#datepicker').datepicker({ dateFormat: 'yy-mm-dd' }); 
```

模态对话框类中的输入是 datepicker。

我不确定我真正要求的解决方案是什么。因为该功能在任何地方都有效并且确实出现了（表明jquery正在工作）但只是没有用所选日期填充输入框......有什么想法吗？...........

```
function modalfollow()
{
$('<div>').dialog({
    title:  'Add Follow',
    height: '350', 
    width:  '400',
    open: function ()
            {
            $(this).load('<?=base_url();?>leads/add_follow/<?=$this->uri->segment(3);?>/');
            },         
    modal: true 
    });
// return false so <a> or <button> doesnt fire + reload page
return false;
} 
```

这会加载加载视图的模式框。

在这个级别上，日期选择器不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:19:22.053

我不确定你是如何设置你的代码的，但我在这个小提琴中没有任何努力就可以工作。你有更新面板吗？

**标记**

```
<div id="dialog" title="Basic dialog">
<input type="text" class="datepicker" /></div>
<button id="opener">Show</button> 
```

**Javascript**

```
 $(function () {

   $(".datepicker").datepicker({
    dateFormat: 'yy-mm-dd'
});

$("#dialog").dialog({
    autoOpen: false,
    show: {
        effect: "blind",
        duration: 1000
    },
    hide: {
        effect: "explode",
        duration: 1000
    }
});
$("#opener").click(function () {
    $("#dialog").dialog("open");
 });
 }); 
```

[例子](http://jsfiddle.net/abidmix/dBLn5/1/)

# c# - 如何在 C# 中永久固定变量？

> ID：15200741
> 
> 赞同：1
> 
> 时间：2013-03-04T11:42:20.737
> 
> 标签：c#, .net, winforms

在不安全的环境中，我知道通过使用该`fixed`语句，我可以获得并固定变量的地址，以便我可以安全地使用获取的指针。但是，有什么方法可以安全地将这个指针存储在某个地方？如，使该变量永久固定，直到指针本身被释放。

例如，如果我希望一个指向`integer`//的指针成为我的 unsafe 类的成员，我`float`应该怎么做？`double`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T12:00:35.177

固定内存的更永久解决方案是使用`GCHandle`类，如下所示：

```
var handle = GCHandle.Create(myObject, GCHandleType.Pinned);
IntPtr address = handle.AddrOfPinnedObject();
//... use it
handle.Free(); 
```

这允许您检索固定对象的地址并防止 GC 移动它。但是，一旦完成，您必须保持`GCHandle`生命并释放它。这比使用块更容易跨越许多方法甚至类`fixed()`。

值得注意的是，固定记忆可能会损害你的表现，因为你让`GC`s 更加努力地工作。

如果您需要一块永远不会移动的内存，因为您正在使用它与本机代码等进行交互操作，您可能会考虑使用`Marshal.AllocHGlobal()`and`Marshal.FreeHGlobal()`以便分配不会干扰的不可移动内存`GC`。

# java - 带有 Tomcat 7 和 MySQL 的 jBPM 5.4

> ID：15200743
> 
> 赞同：2
> 
> 时间：2013-03-04T11:42:34.887
> 
> 标签：java, mysql, tomcat7, jbpm

现在，我正在为 jBPM 5.4 使用 JBoss AS 7 服务器和 H2 数据库（默认配置），但我想使用 Tomcat 7 和 MySQL 5+。

我用谷歌搜索了它，但我没有找到像教程这样的逐步解释的任何答案。而且也没有官方文档。

有人知道它的安装和配置吗？或者是否有人知道如何使 Tomcat 成为一个完整的 Java EE 服务器，如 JBoss AS、GlassFish、WebLogic 等？

请给我正确的方向或任何其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:27:01.227

> 或者是否有人知道如何使 Tomcat 成为一个完整的 Java EE 服务器，如 JBoss AS、GlassFish、WebLogic 等？

您可以通过 TomEE 使 Tomcat*几乎*成为一个完整的 Java EE 6 服务器。您需要的位可以在[这里](http://tomee.apache.org/downloads.html)下载。这将使其成为完整的 Web 配置文件，或介于 Web 配置文件和完整配置文件之间的内容。

# javascript - Backbone.js 集合调用 XML 文件使用 this.fetch 错误

> ID：15200745
> 
> 赞同：0
> 
> 时间：2013-03-04T11:42:38.523
> 
> 标签：javascript, jquery, xml, backbone.js, fetch

```
myBook = Backbone.Collection.extend({
    initialize: function(models, geturl) {
        var self = this;
        this.url = geturl;
        this.fetch({
            dataType: "xml",
            async: false,
            success: function(collection, xml) {
                ...
                ...
                ...
            }
        });
    }
}); 
```

我不能让它工作。任何人都请建议我解决这个问题。我真的需要从集合中调用 XML。我尝试使用 $.ajax() 但失败了，所以我尝试使用backbone.js 函数来获取XML，但不幸的是我无法让它工作。

我正在使用：- Backbone.js 0.9.2 & jQuery v1.8.3

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:40:41.683

Backbone 期望服务器响应为 JSON。[`Model.parse`](http://backbonejs.org/#Model-parse)您应该使用解析 XML 并返回纯 Javascript 对象的函数来覆盖。[`jQuery.parseXML`](http://api.jquery.com/jQuery.parseXML/)对于将简单的 XML 映射到对象非常方便。

假设您的 XML 响应如下所示：

```
<root>
  <id>1</id>
  <foo bar="foobar">foo</foo>
</root> 
```

您希望模型属性看起来像：

```
{
  id:1,
  foo:'foo',
  foobar:'foobar'
} 
```

您可以按如下方式解析它：

```
var YourModel = Backbone.Model.extend({
  parse: function(xml) {
    var $xml = $.parseXML(xml);
    return {
      id:      parseInt($xml.find('id').text(), 10),
      foo:     $xml.find('foo').text(),
      foobar:  $xml.find('foo').attr('bar')
    }
  }  
}); 
```

# api - Api URI 设计偏好

> ID：15200746
> 
> 赞同：0
> 
> 时间：2013-03-04T11:42:44.387
> 
> 标签：api, uri, restful-url, api-design

一个快速的 api uri 设计问题。我们拥有属于我们客户的资源。将这些资源输入我们系统的客户可以编辑/查看/删除这些资源。所有客户端都可以搜索资源，但只有在满足某些条件时才授予访问权限（客户端具有 3 级访问权限等）。

选择 1：在 uri 中包含拥有资源的客户端。

```
client/:clientname/widgets 
client/:clientname/widgets/:id 
```

选择 2：放弃整个“client/:clientname”，因为这部分 uri 必须根据访问信息的用户的凭据进行验证和检查。

```
/widgets
/widgets:id 
```

除了小部件之外，我们还有其他资源也属于客户。

哪种方式更受欢迎，为什么？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:39:36.350

选择 1 的唯一优势是它允许您有效地命名小部件/上传它们的用户。与 Github 类似，不同用户如何拥有同名项目。如果 Github 排除用户名，则没有两个用户可以拥有同名的项目。如果小部件都是唯一的，我会选择选项二，您将获得从小部件到创建它的用户的 1:1 映射，因此提供它对于调用它的人来说只是额外的工作。

如果您可以为不同的用户使用相同的小部件名称，请使用包含用户名的方法。不过，您可能不需要在您的网址中实际使用“客户”一词；使用类似 '/:clientname/widget/:widgetid' 的路径。

请注意，这是一个基于意见的问题，因此您可能会得到不同的答案。您必须权衡所提供的信息并最终做出自己的决定。

# c - C 中的函数警告

> ID：15200749
> 
> 赞同：1
> 
> 时间：2013-03-04T11:42:51.693
> 
> 标签：c, function, warnings

大家好，我有三个功能，我收到 4 个警告......！

第一个是这个

```
void evaluatearxikos(void)
{
    int mem;
    int i;
    double x[NVARS+1];

    FILE *controlpointsarxika;

    controlpointsarxika = fopen("controlpointsarxika.txt","r");
    remove("save.txt");

    for(mem = 0; mem < POPSIZE; mem++)
    {
        for(i = 0; i < NVARS; i++)
        {
            x[i+1] = population[mem].gene[i];

        }
        rbsplinearxiki();

        XfoilCall();

        population[mem].fitness = FileRead();
        remove("save.txt");

    }

       fclose(controlpointsarxika);
} 
```

对于这个，编译器警告我变量 x 已设置但未使用...！但实际上我使用的是变量 x...！！！

第二个功能是这个...

```
void elitist(void)
{
    int i;
    double best,worst;
    int best_mem,worst_mem;

    best = population[0].fitness;
    worst = population[0].fitness;

    for(i = 0; i < POPSIZE - 1; i++)
    {
        if(population[i].fitness > population[i+1].fitness)
        {
            if(population[i].fitness >= best)
            {
                best = population[i].fitness;
                best_mem = i;
            }

            if(population[i+1].fitness <= worst)
            {
                worst = population[i+1].fitness;
                worst_mem = i+1;
            }
        }

        else
        {
            if(population[i].fitness <= worst)
            {
                worst = population[i].fitness;
                worst_mem = i;
            }

            if(population[i+1].fitness >= best)
            {
                best = population[i+1].fitness;
                best_mem = i+1;
            }
        }
    }

    if(best >= population[POPSIZE].fitness)
    {
        for(i = 0; i < NVARS; i++)
        {
            population[POPSIZE].gene[i] = population[best_mem].gene[i];

        }

        population[POPSIZE].fitness = population[best_mem].fitness;
    }

    else
    {
        for(i = 0; i < NVARS; i++)
        {
            population[worst_mem].gene[i] = population[POPSIZE].gene[i];

        }

        population[worst_mem].fitness = population[POPSIZE].fitness;
    }
} 
```

对于这个我收到两个警告，变量最坏的_mem和最好的_mem可能在这个函数中未初始化..!! 但是我初始化了他们两个的值..!!

第三个功能是这个......

```
void crossover(void)
{
    int mem,one;
    int first = 0;
    double x;

    for(mem =0; mem < POPSIZE; mem++)
    {
        x = rand()%1000/1000;

        if(x < PXOVER)
        {
            first++;

            if(first%2 == 0)
            {
                random_Xover(one,mem);
            }

            else
            {
                one = mem;
            }
        }
    }
} 
```

为此，我知道变量 one 可以被统一使用..!! 但它已初始化..！

你能告诉我这些功能有什么问题吗......？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:48:28.953

在您的第一个函数中，您设置（分配）x，但您从未读过它，因此您没有使用它……您只是通过写入它来浪费 CPU 周期。（还要注意，因为您`i+1`在写入超出为它分配的空间时对其进行了索引）。

在第二个函数中，您对这些变量的初始化位于条件块中。您可以看到（也许？我没有验证）在所有情况下它们都已初始化，但您的编译器并不那么聪明。

在您的第三个函数中，似乎`one`可以在没有首先初始化的情况下引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:52:58.683

第一：你设置`x`但*不*使用它。它是一个被设置的局部变量，但一旦函数返回它就会被删除。

第二：可能有一些值使得你`best_mem/worst_mem`永远不会在你的 中设置`if/else`，但你稍后会使用它们。如果它们尚未设置，则如果未初始化，它们将包含垃圾。

第三：虽然您尝试在代码中使用未初始化的变量不应该发生，但它看起来仍然很奇怪，编译器没有看到它不会第一次发生。

当您收到编译器警告时，请视为您做错了什么或者*不建议*这样做，并且可以以更好的方式完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:51:33.593

1.  该`x`变量仅用于左侧（即赋值）。您没有在右侧使用该值或将其传递给函数。
2.  `for(i = 0; i < POPSIZE - 1; i++)`在没有给这些变量赋值的情况下，可能会到达循环的结尾。为什么不在声明中设置它们。
3.  未设置`random_Xover(one,mem);`时可以调用 to 。`one`将行更改`int mem,one;`为`int mem,one = <some value>;`

# c# - 创建扩展方法会导致错误

> ID：15200751
> 
> 赞同：0
> 
> 时间：2013-03-04T11:42:58.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

嗨，我正在尝试为 asp.net MVC 项目创建一个 HTML 帮助方法，但我一定做错了，因为当我尝试调用该方法时，我收到此错误：

> 错误 1 ​​'System.Web.Mvc.HtmlHelper' 不包含 'LabelSomething' 的定义和最佳扩展方法重载 'TestProject.Modules.Pager.LabelSomething(System.Web.WebPages.Html.HtmlHelper, string, string)'有一些无效参数 d:\Training\Practis.Internship.Workspace\Alex.Nistor\ADO.NET\TestProject\Views\Home\Index.cshtml 35 6 ADO.NET
> 
> 错误 2 实例参数：无法从 'System.Web.Mvc.HtmlHelper' 转换为 'System.Web.WebPages.Html.HtmlHelper' d:\Training\Practis.Internship.Workspace\Alex.Nistor\ADO.NET\TestProject\视图\主页\Index.cshtml 35 6 ADO.NET

这是我的代码：

```
public static class Pager
{
    public static string LabelSomething(this HtmlHelper helper, string target , string text){
        return string.Format("<label for='{0}'>{1}</label>", target, text);
    }
} 
```

这就是我尝试调用它的方式：

```
 @Html.LabelSomething("fsaf" , "ddada") 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:45:11.360

您没有指定`HtmlHelper`from MVC，而是当前指向将`WebPages.Html`您的扩展方法修改为：

```
public static class Pager
{
    public static string LabelSomething(this System.Web.Mvc.HtmlHelper helper, string target , string text){
        return string.Format("<label for='{0}'>{1}</label>", target, text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:06:29.160

并且您可以将您的帮助程序放在 App_Code 中，但有某些限制会影响某些 MVC 场景（例如：无法访问标准 MVC Html.helpers）

# spring - Spring Batch：如何重新启动并仅重新运行跳过的项目

> ID：15200752
> 
> 赞同：2
> 
> 时间：2013-03-04T11:43:00.177
> 
> 标签：spring, spring-batch

纠正文件中的错误后，我可以重新开始工作并只处理跳过的项目吗？我正在阅读文档，目前没有发现这种可能性。如果作业失败，您可以重新启动作业，但我正在考虑在完成一些跳过的项目后重新启动作业。如果通过配置无法实现这一点，那么我自己实现它的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:27:35.457

在与您类似的情况下，我所做的是将每个跳过的项目记录在文件中。然后我创建了第二个作业来加载文件并处理所有记录的项目。

# sharepoint - 在不丢失基本 EmailRecieved 功能的情况下覆盖 EmailRecieved

> ID：15200754
> 
> 赞同：1
> 
> 时间：2013-03-04T11:43:05.997
> 
> 标签：sharepoint, sharepoint-2010, overriding, event-receiver

我有一个文档库设置来接收电子邮件。进来的电子邮件有一张图片和一个 csv 文件，我用它来进行一些处理。

覆盖电子邮件接收完美，但当然，当我覆盖时，我失去了很好的 SharePoint 功能，该功能将传入的电子邮件保存为设置中的配置。

据我了解，我可以在我的活动中调用 MyBase.EmailRecieved 以使基础功能仍然有效。但是，这不起作用，并且没有保留传入电子邮件的记录。

现在我明确地创建了一个审计跟踪，但我想依赖 SharePoints 的现有功能，因为我相信它会更强大。

MyBase.EmailRecieved 调用我做错了什么？或者，如果这不起作用，我该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:56:16.927

在编写自己的`EmailReceived`事件接收器时，您**将**失去默认功能。

您需要做的是自己实现这个默认功能。让我给你一个简单的例子。以下示例将所有邮件附件保存到列表中（如果它们是`*.csv`文件）。您可以对 emailMessage 执行相同的操作并将其保存到列表中。如您所见，将文件添加`Files.Add`到文档库就像添加文件一样简单。

```
public override void EmailReceived(SPList list, SPEmailMessage emailMessage, string receiverData)
{
    SPFolder folder = list.RootFolder;

    //save attachments to list
    foreach (SPEmailAttachment attachment in emailMessage.Attachments)
    {
        if (attachment.FileName.EndsWith(".csv"))
        {
            var attachmentFileName = attachment.FileName;
            folder.Files.Add(folder.Url + "/" + attachmentFileName, attachment.ContentStream, true);
        }
    }

    list.Update();
} 
```

# caching - 缓存文件文件夹结构的最佳解决方案

> ID：15200758
> 
> 赞同：1
> 
> 时间：2013-03-04T11:43:26.407
> 
> 标签：caching, optimization, filesystems, filetree

我正在定义为文件系统上的**缓存文件**创建最佳文件夹结构的标准。
目的是从文件系统的角度创建性能最高的**文件层次结构。**

缓存的文件主要是 HTML 页面，所以它们是小文件，但据我的搜索结果，文件系统表的索引不是*文件大小，而是目录**中的文件数*。

确定每个目录 200 个文件中的理想数字，我想创建 10 个子目录和 180 个缓存文件，在任何子目录中复制这种模式，但我承认这纯粹是随机尝试，不是由真正了解计算的好方法它。

任何人都可以建议我在此决定中评估哪些特征，或者分享一个在学术层面上谈论**文件系统优化**的权威资源，可能适用于伟大的文件树？

# c - 具有不同参数列表的函数指针分配

> ID：15200762
> 
> 赞同：1
> 
> 时间：2013-03-04T11:43:44.013
> 
> 标签：c, types, function-pointers, keil

考虑这个程序：

```
int func2(char x, char y)
{
    return x+y;
}

int (*fp1)(char);

void main() 
{ 
    fp1 = func2; /* func2 has one more argument than fp1 */
} 
```

最终分配是否符合 C90 标准？

Keil C51 v9.06 在没有警告的情况下接受该程序，而 gcc 则抱怨

> 警告：来自不兼容的指针类型的赋值

我想知道这是否是 Keil 编译器中的错误，或者实际上是一种符合 C90 的处理方式。

更新：根据[C99 上的这个答案](https://stackoverflow.com/a/559671/106280)，相应的演员表是合法的。但是如果你调用函数指针，你会得到未定义的行为。这是否意味着转让也是合法的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:37:18.980

真正的问题是你为什么要这样做？

一旦你调用`fp1`它指向`func2`,`func2`就会返回垃圾，因为参数 2 没有被传递（它将是堆栈上的一些随机值，或者在 CPU 寄存器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:41:46.663

当您使用函数指针 fp1 为函数 func2 构建调用时，堆栈上只会传递一个值，但实际上，函数 2 也会引用堆栈上的第二个值。所以任何一个程序都会给出分段错误并失败。或者如果没有失败，第二个参数将具有垃圾值。

# c# - 我应该访问单元测试的受保护方法吗？

> ID：15200768
> 
> 赞同：3
> 
> 时间：2013-03-04T11:44:11.347
> 
> 标签：c#, unit-testing, visual-studio-2008

关于我之前提出的[这个问题](https://stackoverflow.com/questions/15197141/how-to-properly-test-an-abstract-class)，我再次陷入了单元测试的困境。

我目前的问题与测试`protected`我的抽象`Component`类的方法有关。

我已经成功实现了一个名为 的模拟类，`ConcreteComponent`它很好地继承了抽象类的所有内容。

问题是，我在我的单元测试文件中创建了这个具体的类。测试受保护方法的唯一方法是拥有一个私有访问器。但是，我无法在与单元测试所在的文件相同的文件中创建私有访问器，因此无法访问受保护的方法。

我试图将模拟具体类放在一个单独的文件中，在不同的命名空间下，现在这允许我创建一个私有访问器，单元测试文件现在可以使用它。它工作得很好，但后来我想我需要在单元测试所在的同一个文件中使用这个模拟具体类。

所以现在我有两个问题：

1）这个问题的可能解决方法是什么？

2) 为什么我不能为与单元测试类位于同一文件和命名空间内的模拟类创建私有访问器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:05:30.673

您可以查看[PrivateObject](http://msdn.microsoft.com/en-us/library/ms245564.aspx)类，以便在测试中访问您的类的非公共 API。它在内部使用反射。类的受保护资产仍然是外部客户端的 api，在这种情况下，外部客户端是子类或派生类。所以想要测试这样的 api 是可以理解的。我不建议仅仅为了测试受保护的 api 而污染一个类来公开公共 api。但是，由于在您的情况下，派生类在测试项目中，您实际上可以提供公共 api 以使测试更容易并提高性能（反射会更慢，如果您正在运行测试，则在进行代码更改时持续测试，它可能会使测试运行速度变慢，具体取决于测试的数量等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:51:44.843

受保护的功能之所以存在，是因为您不想将其暴露给您的客户。但是如果它受到保护，那么可以通过一些令人满意的条件通过公共接口访问，如果不是，那么它是一个死代码，所以删除它。

所以黄金法则是

1-不要试图通过使用技术（反射等）来规避测试私有/受保护的方法，尝试通过公共接口对私有/受保护的方法进行单元测试，顺便说一句，为什么您使用 VS 2008 测试以及为什么不使用 NUnit

# python - python字典返回无

> ID：15200769
> 
> 赞同：0
> 
> 时间：2013-03-04T11:44:13.000
> 
> 标签：python, list, dictionary

我有一本这样的字典

```
dict_a = {}
dict_a["key1"] = [["1","2"]] 
```

我想`[["1","2"]]`用一个字符串连接这个字典中的值`3`。所以我做了这样的事情：

```
new_list = list(dict_a["key1"])
dict_a["key1"] = new_list.append("3") 
```

当我用键打印字典时，`key1`它给了我一个`None`而不是 [["1","2"], "3"]

```
print dict_a["key1"] 
```

有人可以解释为什么我得到“无”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:50:51.510

我可以。

基本上有2种方法：

1.  创建并返回新对象的那些。

2.  那些修改对象的操作就地操作。他们没有返回`self`（在某些情况下非常方便），而是`None`按惯例返回。

`list.append()`是后者之一，因此返回`None`。

所以你应该更换

```
dict_a["key1"] = new_list.append("3") 
```

和

```
new_list.append("3")
dict_a["key1"] = new_list 
```

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:55:59.597

append() 方法不返回任何值，因此默认情况下它返回`None`. 如果将其结果分配给变量，它将是`None`. 这就是为什么`None`如果你打印那个值你会得到。

# java - Microsoft Excel 中的派生列

> ID：15200770
> 
> 赞同：0
> 
> 时间：2013-03-04T11:44:13.203
> 
> 标签：java, excel

我正在尝试通过Java以编程方式填充一个excel表，基本上，我希望C列的一个单元格是A列和B列中相应单元格的总和

```
i.e.  Cn = An + Bn (n is the row number). 
```

我当然可以将公式应用于一行，然后将其一直拖到最后一列。但是，我一直在寻找一种方法，可以在不使用需要有人在整个列中复制粘贴公式的手动干预的情况下完成此操作。

# css - 负 z-indexed div 未显示在具有 bg-color 的 div 后面

> ID：15200771
> 
> 赞同：4
> 
> 时间：2013-03-04T11:44:13.433
> 
> 标签：css, z-index, background-color, jquery-knob

我对美妙的 jquery 旋钮进行了扩展，将其转换为度数范围输入。在具有负 z-index 的 div 内的旋钮上放置了一个透明的罗盘 png 图像，因此鼠标单击将与旋钮交互，而不是与 img 交互。

现在，当我将旋钮放在没有背景颜色的 div 中时，指南针 png 会在页面加载时显示。

**但是**，如果包含的 div 具有背景颜色，则 png**仅在**用户开始标记范围后显示（在紫色圆圈上顺时针拖动范围）。

这是问题的演示：http: [//infoxicate.me/testknob.html](http://infoxicate.me/testknob.html)

编辑：演示页面不再演示问题，因为它已解决......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:49:46.117

不要采用负 z-index - 使其成为正数，并且覆盖它的 div 给它一个更大的 z-index。

另一种解决方案，如果您担心指针会影响图像而不是旋钮，您可以尝试`pointer-events:none`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:32:29.167

将以下内容放入您的`canvas`:

```
canvas {
    position: relative;
    z-index: 2;
} 
```

这`div`与图像：

```
div{
    position: absolute;
    z-index: 1;
} 
```

# android - 在jni文件夹android中生成文件的最简单方法

> ID：15200773
> 
> 赞同：3
> 
> 时间：2013-03-04T11:44:20.780
> 
> 标签：android, c++, android-ndk, java-native-interface, javah

我想知道是否有一种方法可以比这样的命令更容易地在 jni 文件夹中生成 .h 文件

```
javah -jni -classpath bin/classes/ -d jni/ com.example.test_ndk.FibLib 
```

我的意思是我想自动化这一步，所以我只需要写

```
public native static long fibNR(long n); 
```

然后eclipse会为我生成jni文件夹中的.h文件

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:06:58.290

**选项1：**

如果它有所作为，则不必包含该`-jni`选项。这是 的默认选项`javah`。

```
javah -classpath bin/classes/ -d jni/ com.example.test_ndk.FibLib 
```

**选项 2：**

另一种选择是自己创建头文件，但这不是一个更容易的选择。您的标头看起来像这样（前面有一个 1 `ndk`，`test_1ndk`因为您`_`在包名称中使用了一个字符。如果我们不放它，调用者将在名为 的文件夹中查找一个名为`ndk`的文件夹`test`，因此，我不推荐使用 test_ndk 作为你的包名。而是使用 testNdk 或带有下划线的东西）：

```
#include <jni.h>
JNIEXPORT jlong JNICALL Java_com_example_test_1ndk_FibLib(JNIEnv*, jclass, jlong);
// use jobject instead of jclass if your method is non-static 
```

一般格式是：

```
JNIEXPORT [returnType] JNICALL Java_[package name with folders separated by _]_[class name]_[method name] (JNIEnv*, jclass, jtype arguments); 
```

# wso2 - SOAPHeader 中缺少 ReplyTo 属性

> ID：15200776
> 
> 赞同：3
> 
> 时间：2013-03-04T11:44:35.557
> 
> 标签：wso2, bpel, asynccallback, ws-addressing

我创建了一个 WS-BPEL 工作流，它将调用异步 Web 服务并等待回调响应。碳应用程序也成功部署到 BPS 中。

**关于我的外部异步 Web 服务的详细信息**
1\. 它需要通过 http 进行基本身份验证。
2\. 它要求肥皂封头在肥皂信封中可用。
3\. 它将处理请求并向它在soap 标头中接收到的**ReplyTo地址发送回调，并使用****MessageID**来关联回调。

我的 BPEL 流程的**deploy.xml**文件如下所示...

```
<?xml version="1.0" encoding="UTF-8"?>  
<deploy xmlns="http://www.apache.org/ode/schemas/dd/2007/03" 
    xmlns:callback.integration.service="http://callback.integration.service/"
    xmlns:epr="http://wso2.org/bps/bpel/endpoint/config" 
    xmlns:sample="http://wso2.org/bps/sample" 
    xmlns:ws.integration.service="http://ws.integration.service/">
   <process name="sample:Test">
      <active>true</active>
      <retired>false</retired>
      <process-events generate="all"/>
      <provide partnerLink="client">
         <service name="sample:Test" port="TestPort"/>
      </provide>
      <provide partnerLink="IntegrationService">
         <service name="callback.integration.service:IntegrationCallback" port="IntegrationResponsePort"/>
      </provide>
      <invoke partnerLink="IntegrationService">
         <service name="ws.integration.service:IntegrationService" port="IntegrationRequestPort">
            <epr:endpoint endpointReference="IntegrationService.epr"/>
         </service>
      </invoke>
   </process>
</deploy> 
```

**IntegrationService.epr**文件如下所示 ...

```
<wsa:EndpointReference
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.w3schools.com uep_schema.xsd"
        xmlns:wsa="http://www.w3.org/2005/08/addressing"
        xmlns:wsdl11="http://schemas.xmlsoap.org/wsdl/">
   <wsa:Address>http://http://server:8080/integration/IntegrationService</wsa:Address>
   <wsa:Metadata>
      <id>SInvokeEPR</id>
      <qos>
         <enableAddressing />
      </qos>
      <transport type="http">
         <authorization-username>username</authorization-username>
         <authorization-password>password</authorization-password>
      </transport>
   </wsa:Metadata>
</wsa:EndpointReference> 
```

现在，当我从 carbon 服务管理控制台测试 bpel 进程时，我确实收到了对我的异步 Web 服务的请求。然而，soap 信封看起来如下，它缺少一个正确的**回复**地址来发送回调。

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
        <wsa:To>http://server:8080/integration/IntegrationService</wsa:To>
        <wsa:ReplyTo>
            <wsa:Address>http://www.w3.org/2005/08/addressing/none</wsa:Address>
        </wsa:ReplyTo>
        <wsa:MessageID>urn:uuid:91ac4ebd-b100-440e-a01d-c4a5c0d8a56f</wsa:MessageID>
        <wsa:Action>http://ws.integration.service/IntegrationRequestPortType/createTask</wsa:Action>
    </soapenv:Header>
    <soapenv:Body>  
       ...
    </soapenv:Body>
</soapenv:Envelope> 
```

现在我需要用回调来回复这个请求。回调肥皂信封将包含此**MessageID**，以便回调与正确的流程实例相关联。

您如何获得附加到肥皂标题的正确**回复地址？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:25:26.053

如果我正确地假设您使用 WSO2 BPS（或带有 Apache ODE 的东西），您可以在分配中使用此副本手动设置标题。( [http://ode.apache.org/extensions/headers-handling.html](http://ode.apache.org/extensions/headers-handling.html) )

```
<bpel:copy>
  <bpel:from>
   <bpel:literal>
     <wsa:ReplyTo xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <Address>http://localhost:9763/services/SIServerCallback</Address>
     </wsa:ReplyTo>
   </bpel:literal>
 </bpel:from>
 <bpel:to variable="ServiceInvokerIARequest" header="ReplyTo">
 </bpel:to>
</bpel:copy> 
```

# php - Magento：问题停止限制产品名称

> ID：15200778
> 
> 赞同：2
> 
> 时间：2013-03-04T11:44:44.327
> 
> 标签：php, magento, zend-framework

我们的网站遇到了一个奇怪的问题，即我们的一些产品名称太长而且前面被截断，这真的很奇怪..

我已签入该`app/code/core/Mage/Eav/Model/Entity/Attribute.php` 文件，但它不包含属性值的限制。任何人都遇到过这样的问题，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:31:14.947

这三个点，又名省略号，来自 CSS `text-overflow:ellipsis`（[参考](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)）。我只知道这一点，因为我`text-overflow:hidden`在主页上使用超长 SKU。我相信这`white-space: nowrap`也必须设置或文本在`<pre>`标签内生效。

但是，是的，非常长的产品标题来自您的产品数据库。

从命令行，在您的 magento 安装的根目录下尝试：
`find . -type f -name "*css" -print0 | xargs -0 grep -in "text-overflow"`

在我的网站上执行此操作得到 24 个答案。23 有省略号作为设置。文件夹里还有很多东西`/js/extjs`，这超出了我的预期。

* * *

**更新：** ravisoni 一直说这是一个“编码问题”，而不是样式/ CSS 问题。@ravisoni，我相信您在没有足够背景的情况下提出了这个问题。

长文本是产品**“名称”**。当我们说“它来自数据库”时，我们是在说有人故意创建这个名字太长。查看您的网站，我看到这些产品出现在 Amazon Import 类别中，因此您用于将项目导入 Magento 的软件故意使名称过长。您需要编辑软件来执行此操作，或者`Admin -> Catalog -> Manage Products`自己手动更改它们。

![管理产品网格](../Images/4767bd6e0597b408c48161def67d0715.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:58:06.487

也许，这是一个 CSS 问题。去

```
皮肤/前端/默认/yourtheme/css/style.css
```

并删除类 .products-grid .product-name a { } 中的溢出并设置所需的高度和宽度。但请确保它不会破坏设计。

# jquery - 尴尬的展示柜在 IE 中只显示一半图像？

> ID：15200783
> 
> 赞同：0
> 
> 时间：2013-03-04T11:44:57.883
> 
> 标签：jquery, slider, slideshow

我正在使用尴尬的展示滑块，当页面加载时它似乎只显示半张图像，然后在几秒钟后继续滑动......有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:08:23.643

找到答案 - 代码上方没有对齐中心！

# jsf - 如何检查渲染属性中的两个条件？

> ID：15200791
> 
> 赞同：2
> 
> 时间：2013-03-04T11:45:27.490
> 
> 标签：jsf, el, multiple-conditions, rendered-attribute

我试过下面的代码

```
 <h:form rendered="{#{cars.enabled} and #{cars.enabledEdit}}"> 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T11:48:04.183

这是一个正确的 EL 表达式

```
<h:form rendered="#{cars.enabled and cars.enabledEdit}"> 
```

不需要（甚至在 #{} 中使用 #{} 也是非法的）

# wpf - WPF 在运行时设置键盘焦点，无需代码

> ID：15200793
> 
> 赞同：0
> 
> 时间：2013-03-04T11:45:35.553
> 
> 标签：wpf, xaml, mvvm

我在该主题上进行了很多搜索，但在没有代码的情况下无法真正找到解决方案。我知道有些人会说为这个视图相关的事情使用代码隐藏是完全可以的，但我还是想避免它。

我有一个用户控件，它显示一个带有单个文本框和一个确定按钮的“对话框”。该对话框是一个简单的用户控件，位于所有其他控件之上。默认情况下，用户控件的可见性设置为折叠。如果用户控件可见，我想将键盘焦点设置为对话框用户控件上的文本框。有没有办法在 xaml 中完全做到这一点？由于在加载控件时我的对话框控件不可见，因此只需设置

`FocusManager.FocusedElement="{Binding ElementName=tbID}"`

不管用。我尝试使用某种可见性触发器：

```
 <TextBox Grid.Column="3"
             Grid.Row="5"
             Name="tbID"
             VerticalAlignment="Center">
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Visibility" Value="Visible">
                        <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=tbID}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox> 
```

但这也不起作用。触发器被触发，但文本框没有获得焦点。我真的很感激对此的任何建议。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:35:23.940

您可以尝试使用附加行为来设置焦点。这是一些示例代码：

```
public static class Focus
{
    public static readonly DependencyProperty ShouldFocusWhenVisibleProperty =
        DependencyProperty.RegisterAttached("ShouldFocusWhenVisible", typeof (bool), typeof (Focus), new PropertyMetadata(default(bool), ShouldFocusWhenVisibleChanged));

    private static void ShouldFocusWhenVisibleChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var uiElement = sender as UIElement;
        if (uiElement == null) return;

        var shouldFocus = GetShouldFocusWhenVisible(uiElement);
        if (shouldFocus)
        {
            UpdateFocus(uiElement);
            uiElement.IsVisibleChanged += UiElementOnIsVisibleChanged;
        }
        else
            uiElement.IsVisibleChanged -= UiElementOnIsVisibleChanged;
    }

    private static void UiElementOnIsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        var uiElement = sender as UIElement;
        if (uiElement == null) return;

        UpdateFocus(uiElement);
    }

    private static void UpdateFocus(UIElement uiElement)
    {
        if (!uiElement.IsVisible) return;

        Keyboard.PrimaryDevice.Focus(uiElement);
    }

    public static void SetShouldFocusWhenVisible(UIElement uiElement, bool value)
    {
        uiElement.SetValue(ShouldFocusWhenVisibleProperty, value);
    }

    public static bool GetShouldFocusWhenVisible(UIElement uiElement)
    {
        return (bool)uiElement.GetValue(ShouldFocusWhenVisibleProperty);
    }
} 
```

然后，将以下代码应用于对话框中的 TextBox `<TextBox local:Focus.ShouldFocusWhenVisible="True" />`：请注意，这`local:`将需要是对上述 Focus 类的命名空间的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:16:04.470

我认为你想绑定到`UserControl` `Visibility`属性而不是`TextBox`

例子

```
<UserControl x:Class="WpfApplication7.IconButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="200" Name="_this">
    <Grid>
        <TextBox Name="tbID" Margin="0,12,0,0" VerticalAlignment="Top">
            <TextBox.Style>
                <Style TargetType="{x:Type TextBox}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=_this, Path=Visibility}" Value="Visible">
                            <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=tbID}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </Grid>
</UserControl> 
```

# iphone - 如何从 UIImage 中获取亮度级别

> ID：15200794
> 
> 赞同：0
> 
> 时间：2013-03-04T11:45:35.883
> 
> 标签：iphone, ios, uiimage, tesseract, brightness

如何从 UIImage 中获取亮度级别。实际上，我正在尝试获取亮度级别，然后将其设置为其他级别（使用 GPUImage 框架），以便我可以将该图像传递给 tessaract OCR SDK。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T12:08:32.353

要修改图像的亮度，您正在寻找的解决方案是在原始图像上应用过滤器。这可以通过使用 CoreImage 框架中提供的过滤器类来实现，更具体地说是 CIFilter。快速浏览一下文档，它非常简单。如果您不使用 CoreImage，网上有几个示例已经编写了过滤器，但是，我认为 CIFilter 类应该足够了。

# jquery - 无法从本地文件夹运行 Jquery

> ID：15200796
> 
> 赞同：-4
> 
> 时间：2013-03-04T11:45:37.583
> 
> 标签：jquery, ftp, directory, local

嗨，我是 Web 开发的新手。我需要使用**JQuery**。即使我成功地尝试了一个 jquery **，但只有在将文件复制到我的在线 ftp 文件夹之后**。我完全无法从我的本地文件夹中运行它。请解释一下，**我怎样才能测试一些新脚本而**无需额外的**将文件复制到 ftp 文件夹**的练习。提前致谢！

我使用的脚本（感染刚刚从[www.w3schools.com](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_lib_google)复制， 但该脚本仅从 ftp 文件夹运行，**我无法从本地文件夹运行它。**您可以看到没有任何本地或固定路径可以从一个地方，但不是来自另一个地方。脚本如下：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $("p").hide();
  });
});
</script>
</head>

<body>
<h2>This is a heading</h2>
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<button>Click me</button>
</body>
</html> 
```

现在是不是可以从我的硬盘驱动器上的文件夹中运行此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:47:35.680

在你的 head 标签中包含：

```
<!-- jQuery -->
<script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

喜欢：

```
<head>
  <!-- jQuery -->
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T11:51:38.820

包括`head`标签

```
<html>
<head>
      <!-- jQuery -->
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T12:00:53.927

你可以这样使用。

```
<head>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">/script>
</head>
<body>
<p></P><input type=button value="Click me" id="btn1"/>

  <script>

  $('#btn1').click(function()
  {
      $('p').html("Hello World!");
  });

  </script>
</body> 
```

# google-maps - 2013年3月8日之后谷歌地图V2 Webservice还能用吗

> ID：15200798
> 
> 赞同：0
> 
> 时间：2013-03-04T11:45:40.940
> 
> 标签：google-maps, google-geocoding-api

我们仍在使用 Google 地图 V2 网络服务，因为我们还没有完成将 V2 网络服务迁移到 V3 的工作。
在 3 月 8 日之后是否仍然可以使用 V2 网络服务，还是在此日期之后将不再工作？

在我们完成向 V3 的迁移之前，是否有可能解决一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:33:55.623

请参阅文档[注意：Google Maps Geocoding API 第 2 版已于 2010 年 3 月 8 日正式弃用。V2 API 将继续工作到 2013 年 3 月 8 日。我们鼓励您将代码迁移到新的 Geocoding API。有关如何迁移到 v3 API 的信息，请参阅升级指南。](https://developers.google.com/maps/documentation/geocoding/v2/index)

它并没有说它会在 2013 年 3 月 8 日停止工作，但它可以，并且不再受支持，因此如果出现问题，他们没有义务修复它。它已被弃用近 3 年，强烈建议您在 3 月 8 日之前迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T23:40:50.550

Google Maps API 第 2 版的折旧期现已[延长至 2013 年 11 月 19 日](https://developers.google.com/maps/documentation/javascript/v2/)。之后，只要是“简单地图”，v2 应用程序就可以继续工作，因为 V3 API 将通过 Google 方面的包装器交付。谷歌没有定义什么是“简单地图”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:55:17.057

注意：Google Maps JavaScript API 第 2 版已于 2010 年 5 月 19 日正式弃用。V2 API 将继续工作至 2013 年 5 月 19 日。

[源代码](https://developers.google.com/maps/documentation/javascript/v2/)

# google-chrome - 在vb“网络浏览器控件”中打开chrome浏览器

> ID：15200807
> 
> 赞同：1
> 
> 时间：2013-03-04T11:46:20.610
> 
> 标签：google-chrome, vb6, webbrowser-control

我是 vb 6.0 的新手。

我必须在 vb 的 Web 浏览器控件中打开 Internet Explorer 以外的任何浏览器（默认打开 IE）

我尝试了很多代码，现在我可以像打开新窗口一样打开浏览器（通过使用 process.start 等）

有没有办法在现有的vb控件中打开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-01T21:30:32.180

Web 浏览器控件是 Internet Explorer。因此，除非 chrome 等人发布他们没有的浏览器的 ActiveX 控件，否则这是不可能的。

有一种解决方法是您启动 chrome，然后将其挂钩 CreateWindowsEx 并将您的应用程序窗口作为所有者。然后将其调整到您可以使用`SetWindowPos`. 这提供了以下功能

*   在 Z 顺序中，拥有的窗口始终位于其所有者之上。

*   当所有者被销毁时，系统会自动销毁拥有的窗口。

*   拥有的窗口在其所有者最小化时被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:31:52.423

```
Private Sub Command1_Click()

  sAppName = "Google Chorme"
  sAppPath = "C:\Users\082043\AppData\Local\Google\Chrome\Application\chrome.exe"

    Shell sAppPath, vbMinimizedFocus

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-21T06:25:02.550

您可以尝试以下代码来调用默认浏览器（适用于 VB 6）。

将它放在最顶部，但在“选项”声明的下方。

```
Private Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long 
```

将其放置在放置“子”的位置这将调用默认浏览器以访问 google.com。

```
Private Sub cmdBUTTON_Click()

ShellExecute 0&, vbNullString, "http://www.google.com", vbNullString, vbNullString, 10

End Sub 
```

[您可以在此处](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)找到有关变量的信息。

# android - 使用 AudioTrack 从 sd 卡播放音频（mp3、ogg）

> ID：15200812
> 
> 赞同：6
> 
> 时间：2013-03-04T11:46:47.473
> 
> 标签：android, audiotrack

我想用 AudioTrack 从 SD 卡播放音频文件。我试过这段代码：

```
int minBufferSize = AudioTrack.getMinBufferSize(8000,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT);
        int bufferSize = 512;
        AudioTrack at = new AudioTrack(AudioManager.STREAM_MUSIC, 8000,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT, minBufferSize,
                AudioTrack.MODE_STREAM);

        int i = 0;
        byte[] s = new byte[bufferSize];

        FileInputStream fin = new FileInputStream(path);
        DataInputStream dis = new DataInputStream(fin);

        at.play();
        while ((i = dis.read(s, 0, bufferSize)) > -1)
        {
            at.write(s, 0, i);

        }
        at.stop();
        at.release();
        dis.close();
        fin.close(); 
```

但它不能正确播放音频文件。它播放的不是原始音频，而是某种噪音。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T12:34:07.397

从以下链接我发现 AudioTrack 只播放 PCM 音频， [http://developer.android.com/guide/topics/media/index.html](http://developer.android.com/guide/topics/media/index.html)

请查看此代码。 [http://mindtherobot.com/blog/624/android-audio-play-an-mp3-file-on-an-audiotrack/](http://mindtherobot.com/blog/624/android-audio-play-an-mp3-file-on-an-audiotrack/) 提供有关如何在 AudioTrack 上播放 MP3 文件的信息。

希望这对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:12:43.927

AudioTrack 类仅支持 PCM 音频数据，这就是您听到噪音的原因。

如果您想播放 .mp3 和 .ogg 等压缩音频文件，请使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)或[SoundPool 。](http://developer.android.com/reference/android/media/SoundPool.html)
或者，您可以在应用程序中解码压缩音频并将生成的 PCM 数据写入 AudioTrack，但这是一项更大的任务。

# ide - 将旧的 IDE 更新为新的 C++ Builder

> ID：15200814
> 
> 赞同：0
> 
> 时间：2013-03-04T11:46:48.733
> 
> 标签：ide, upgrade, c++builder

我目前正在尝试使用“当前”Embarcadero RAD Studio XE2 编译一个旧程序（使用 C++ builder 2 或 3 制作）。

所以，我想知道是否有一种简单的方法可以使用旧代码，因为 Borland 曾经声称与较低版本完全兼容......但是我找不到“项目文件”，只有源代码 (. cpp、.h、.res 等）。
我试图“添加到项目”主 .cpp，但是似乎有一些错误的包含路径......它似乎也使用了 OWL 包并包含其重要的源文件......

我有点困惑我必须先打开哪种类型的主项目，因为您需要先打开一个新项目，然后再将源添加到它。由于正在运行的 .exe 具有 GUI，因此我首先尝试了 Form-Window，但据我所知，使用控制台或服务可能会更好，因为真实的表单是在代码中生成的。

那么，在安装 OWL 并更正包含路径之后，您认为它应该可以正常运行吗？或者还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:51:23.870

如果您的旧项目使用的是 OWL，那么您可能远远超出了受支持的升级路径。话虽如此，有效的 C++ 代码仍然应该可以编译和工作，而且我听说有人将 OWL 与最新版本的 C++Builder 一起使用。（通过[OWLNext](http://sourceforge.net/apps/mediawiki/owlnext/index.php?title=Main_Page)）关于您对使用哪种类型的项目感到困惑，我相信控制台应用程序将是您最好的选择。表单应用程序是完全错误的，它会引入 VCL 并给您带来无穷无尽的问题，试图协调不同的窗口系统。服务应用程序也是完全不同的野兽，并不适用于 GUI 应用程序。控制台应用程序应该可以工作，但您需要更多。OWLNext项目有一个 wiki，应该会有所帮助[。](http://sourceforge.net/apps/mediawiki/owlnext/index.php?title=Main_Page)

# php - javascripts数组

> ID：15200821
> 
> 赞同：1
> 
> 时间：2013-03-04T11:47:10.393
> 
> 标签：php, javascript, arrays

我和我的朋友在网上玩

我们要求对方说（名字，或动物，或无生命）以一个特定的字母开头

所以我正在考虑建立一个页面来帮助我训练这个游戏

这是一个 php 代码，例如：

```
function getNamesByChars($chars,$type='name'){
    $names=array(
    'd'=>'Dan',
    'j'=>'John',
    );
    $animals=array(
    'd'=>'Dog',
    'j'=>'Jar',
    );

    $chars=explode(' ',$chars);    
    foreach($chars as $char){
        //if it a name
        if($type=='name')
        $results.=$names[$char];
        //if it animal
        elseif($type=='animal')
        $results.=$animals[$char];
    }
}
    getNamesByChars('j d','animal');
    //results (Jar dog) 
```

这里的问题是我需要让这个页面尽可能快

PHP 需要加载页面

我认为 javascript 是更快的方法

但我是 javascript 的初学者，所以我无法构建这个函数

在javascript中构建这个函数有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:01:06.290

在这里，但如果你真的想了解 javascript，你应该阅读 tuto....

```
function getNamesByChars(chars,type){
   type = type || 'name';
   var things = { name: {'d': 'dan', 'j': 'john'},
                  animal:  {'d': 'dog', 'j': 'jar'}};
   var results = [];
   var charsarr = chars.split(' ');
   for (var i in charsarr) {
      results.push(things[type][charsarr[i]]);  
   }
   return results;
} 
```

理想情况下，应该检查一个密钥是否不存在，但只有你会使用它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:18:06.550

我在这个问题上完全矫枉过正:) 有趣的问题，希望它能教给你一些东西。

[参见 JSFiddle](http://jsfiddle.net/PswRf/)

**HTML**

```
<div>
    <label for="chars">Chars:</label>
    <input id="chars" type="text" />
</div>
<div>
    <input id="names" type="radio" name="names-radio" checked />
    <label for="names">Names</label>
    <input id="animals" type="radio" name="names-radio" />
    <label for="animals">Animals</label>
</div>
<button id="get-names">Get values!</button>

<div>
    <span>Result</span>
    <div id="result"></div>
</div> 
```

**JavaScript**

```
document.getElementById('get-names').onclick = getNamesClick;

function getNamesClick() {
    var chars = document.getElementById('chars').value;
    var names = document.getElementById('names').checked ? 'names' : 
        document.getElementById('animals').checked ? 'animals' : ''
    var result = getNamesByChars(chars, names);
    alert(result);
    console.log(document.getElementById('result'));
    document.getElementById('result').innerHTML = result;
}

function getNamesByChars(chars, names) {
    var result = '';
    charsArray = chars.split(' ');
    for (var i = 0; i < charsArray.length; i++) {
        var values = data[names][charsArray[i]];
        for (var j = 0; j < values.length; j++) {
            if (result != '')
                result += ' ';
            result += values[j];
        }
    }
    return result;
}

var data = {
    'names': {
        'a': [ 'Andrew', 'Allison' ],
        'b': [ 'Bob', 'Barry' ],
        'c': [ 'Cheryl', 'Carol' ],
        'd': [ 'Daniel', 'Danny' ],
        'e': [ 'Eddie', 'Emma' ],
        'f': [ 'Frank', 'Flo' ],
        'g': [ 'Greg', 'Grant' ],
        'h': [ 'Holly' ],
        'i': [ 'Ian' ],
        'j': [ 'John' ],
        'k': [ 'Kaylie' ],
        'l': [ 'Liam' ],
        'm': [ 'Mary' ],
        'n': [ 'Ned' ],
        'o': [ 'Oliver' ],
        'p': [ 'Peter' ],
        'q': [ 'Quentin' ],
        'r': [ 'Ryan' ],
        's': [ 'Sarah' ],
        't': [ 'Tom' ],
        'u': [ 'Ualani' ],
        'v': [ 'Victor' ],
        'w': [ 'Will' ],
        'x': [ 'Xan' ],
        'y': [ 'Yvette' ],
        'z': [ 'Zoe' ]
    },
    'animals': {
        'd': [ 'Dog', 'Dolphin' ],
        'e': [ 'Elephant' ]
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:00:04.417

这是您在 js 中的 php 函数的覆盖

```
function getNamesByChars( chars,type ){

   type = type || 'name';

   var names = { 'd':'Dan', 'j':'John' },
       animals = { 'd':'Dog', 'j': 'Jar' };
       results = '';

   var chars = chars.split(' ');

   for( var i=0,len = chars.length; i< len ;i++ ){

       if( type == 'name'){

           results += names[ chars[i]];

       } else if( type == 'animal'){

           results += animals[ chars[i]];       

       }

   }

   return results ;

} 
```

并在控制台中打印结果

```
console.log( getNamesByChars('j d','animal') ); 
```

或提醒

```
alert( getNamesByChars('j d','name') ); 
```

# symfony - 如何验证同一实体的两个实例？

> ID：15200822
> 
> 赞同：1
> 
> 时间：2013-03-04T11:47:21.920
> 
> 标签：symfony, symfony-2.2

# 用例

我正在学习 Symfony2 并正在创建一个乒乓球跟踪应用程序来学习该框架。我已按如下方式配置了我的实体。

```
Player 1..n Result n..1 Match 
```

在我的表格上，我想验证比赛的分数是否正确。

# 执行

`Match`有一个 `ArrayCollection()`。`results`

我的`MatchType`和`ResultType`表格包含以下内容。

```
 // Form\MatchType
    $builder->add('matchType', 'entity', array(
            'class' => 'PingPongMatchesBundle:MatchType',
            'property' => 'name',
        )
    )
    ->add('results', 'collection', array(
            'type' => new ResultType(),
            'allow_add' => true,
            'by_reference' => false,
        )
    )
    ->add('notes');

 // Form\ResultType
    $builder->add('player', 'entity', array(
                'class' => 'PingPongPlayerBundle:Player',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('p')
                        ->orderBy('p.firstName', 'ASC');
                },
            ))
            ->add('score'); 
```

# 问题

我需要能够验证分数。但是我不确定如何处理这种类型的验证，因为我需要比较我`Result#score`的两个实例才能知道它们是否有效。

是否有人能够建议我可以使用的方法或方法以便能够`Result#score`在两个不同的实例之间进行比较？例如，我可以`ArrayCollection`在`Match`实体中验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:00:02.560

您可以在 Match 实体上创建自定义验证器约束。 [http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:19:40.693

看看**回调**约束：

[http://symfony.com/doc/2.1/reference/constraints/Callback.html](http://symfony.com/doc/2.1/reference/constraints/Callback.html)

# android - android中Shell命令的代码

> ID：15200823
> 
> 赞同：0
> 
> 时间：2013-03-04T11:47:25.183
> 
> 标签：android

```
 Process sh = Runtime.getRuntime().exec("su", null,null);
  OutputStream  os = sh.getOutputStream();
  os.write(("/system/bin/screencap -p " + "/sdcard/img.png").getBytes("ASCII"));
  os.flush();
  os.close();
  sh.waitFor(); 
```

这是下面截图的shell命令代码，但通过它只给出部分输出，我不知道为什么

```
 (adb shell /system/bin/screencap -p /sdcard/img.png) 
```

# php - 在 URL 包含字符串的特定 div 标签中抓取完整的网站以获取数据

> ID：15200826
> 
> 赞同：0
> 
> 时间：2013-03-04T11:47:30.963
> 
> 标签：php, mysql, csv, screen-scraping

我拥有一个网上商店，我的一个供应商很友好地给了我一个包含产品型号、价格和标题的 CSV 文件，但他们不能给我包括他们的产品描述在内的数据库转储。不过，我可以抓取产品描述 - 问题是如何？

```
All URLs include the model number like "title-of-product-MN-504-1.htm"
The descriptions are inside a <div> tag like "<div id="description"> Bla bla bla <other tag>bla bla </other tag> bla bla </div>" 
```

假设我在 csv 文件或 MySQL 表中拥有所有型号 - 如何将与型号关联的描述保存在 URL 中（如果这更容易，也位于另一个 div 标记中）？

总而言之 - 输入将是来自 csv 或 MySQL 表的型号，输出应该是 MySQL 表（或 csv），其中包含型号和各个页面上 div 标签的描述。我正在考虑以下工具，但我不确定如何将它们连接起来做我想做的事：wget、cURL 和[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:41:06.293

您可以使用此[http://phpcrawl.cuab.de/](http://phpcrawl.cuab.de/)并使用此特定属性：[http://phpcrawl.cuab.de//classreferences/index.html](http://phpcrawl.cuab.de//classreferences/index.html)，然后找到描述：[在 php 中提取 html 标记之间的字符串](https://stackoverflow.com/questions/3493236/extract-string-between-html-tags-in-php)

至于您在抓取页面上找到的 URL 中查找型号的要求，您可以使用以下属性：[http://phpcrawl.cuab.de/classreferences/index.html](http://phpcrawl.cuab.de/classreferences/index.html)

如果您要索引从他们那里获得的 CSV 文件并索引他们的网站；我会做以下

您建立一个列表，列出您需要获取描述的所有型号。

1.  爬上他们的首页以开始这个过程。*收集网址，添加到访问列表*
2.  访问列表中与型号匹配的每个 URL，获取描述，从列表中删除型号。*收集网址，添加到访问列表*
3.  返回第 2 步 - 重复直到您的列表中没有更多型号

至于如何获取带有型号的 URL：http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

像这样，我把实现留给你：

```
foreach($list_of_urls as $url) {
    foreach($list_of_modelnumbers as $model) {
        if(strpos($url, $model)) {
            $list_of_urls_to_crawl[] = $url; 
   /* you can also remove the $model, but I already wrote it in a foreach loop */
            break;
        }
    }
} 
```

然后你可以从爬虫结果中清除`$list_of_urls`并附加新的:)

```
foreach($list_of_urls_to_crawl as $url) {
     //Set $crawler, let him go, get your description etc.

     foreach($crawler->links_found as $url) {
         $list_of_urls[] = $url;
     }
} 
```

并将其放在一个大`while($still_need_descriptions)`循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:33:51.343

或者，如果您不喜欢[http://phpcrawl.cuab.de/](http://phpcrawl.cuab.de/)，您可以使用[PHP-Spider](https://mvdbos.github.io/php-spider/)。

这就像编写基于 CSV 的自定义 URL 发现器然后使用 XPath 查询解析抓取的页面一样简单。请参阅[https://mvdbos.github.io/php-spider/](https://mvdbos.github.io/php-spider/)上的示例。您唯一需要更改的是添加到 Spider 的 Discoverer 类。假设您知道 URL 是如何构建的，它可能如下所示：

```
class CsvModelNumberDiscoverer implements Discoverer
{
    protected $modelNumbersAndTitles = array();

    public function __construct(array $modelNumbersAndTitles)
    {
        $this->modelNumbersAndTitles = $modelNumbersAndTitles;
    }

    public function discover(Spider $spider, Resource $document)
    {
        $urls = array();
        foreach ($this->modelNumbersAndTitles as $number => $title) {
            $urls[] = 'http://example.com/' . $title . '-MN-' . $number . '.htm';
        }
        return $urls;
    }
} 
```

运行蜘蛛的代码如下所示：

```
$spider = new Spider('http://www.example.com');
$spider->addDiscoverer(new CsvModelNumberDiscoverer($modelNumbersAndTitles);
$result = $spider->crawl(); 
```

最后，您可以从结果中得到描述，如下所示：

```
foreach ($result['queued'] as $resource) {
    $modelNo = $resource->getCrawler()->filterXpath("div[@id='modelNo']")->text();
    $description = $resource->getCrawler()->filterXpath("div[@id='description']")->text();
} 
```

如果您不知道 URL 是如何构建的，那么您将蜘蛛整个站点（如 AmazingDreams 的回答）并使用发现器将 URL 与型号列表匹配。不过这需要更多时间。

完全披露：我写了[PHP-Spider](https://mvdbos.github.io/php-spider/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:53:33.297

您可以首先使用获取 html 代码

```
$homepage = file_get_contents('http://www.example.com/title-of-product-MN-504-1.htm'); 
```

然后，您将 html 代码与 php dom 解析器一起使用，以获取您需要的确切元素的值。

# c# - 正则表达式至少找到两个字符之一

> ID：15200835
> 
> 赞同：3
> 
> 时间：2013-03-04T11:48:03.577
> 
> 标签：c#, .net, regex

请耐心等待，我是正则表达式的新手，所以我的语法可能会稍微有些出格。

这是我的表达：

```
"(?:\\s*[\"]?[']?\\s*)" 
```

这相当于：任意数量的空白，然后是双引号的可能性，然后是单引号的可能性，然后是任意数量的空白。

我遇到的问题是，即使没有双引号或单引号，它仍然匹配。

如何使我的表达式必须至少有 1 个双引号或至少 1 个单引号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:55:45.550

这应该做的工作：

```
@"(?:\s*('|\")+\s*)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:54:05.000

试试这个表达式：

```
(?:\\s*[\\"\\']\\s*) 
```

:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:00:36.210

如果您的意思是要找到一个单引号或一个双引号，那么只需将两者都放在一个字符组中，并且不要在其后面加上问号。

`(?:\s*[\"']\s*)`

如果你的意思是你想要 1 个或多个单引号或 1 个或多个双引号

`(?:\s*([\"]+)|([']+)\s*)`

如果你的意思是你想要 1 个或多个单引号或双引号

`(?:\s*[\"']+\s*)`

# android - 在 Listview 适配器中获取子视图

> ID：15200838
> 
> 赞同：3
> 
> 时间：2013-03-04T11:48:10.170
> 
> 标签：android, android-listview

在我的 getView 方法中，我想获得一个特定的子视图。我知道我的适配器通过调用 getCount 来保存几个项目：

```
getCount(); 
```

根据JavaDoc：

```
public abstract int getCount () 
Added in API level 1
How many items are in the data set represented by this Adapter. 
```

现在在我的 getView 方法中：

```
public View getView(final int position, View convertView, ViewGroup parent) {

   View lastAddedItem = parent.getChildAt(getCount()-1);
   if(lastAddedItem == null)  {
     Log.w("ListAdapter", "View is null");
   }

} 
```

此消息总是出现在 中`LogCat`，这意味着我尝试抓取的视图是`Null`。

我也试过这个：

```
View lastAddedItem = parent.getChildAt(parent.getChildCount()-1); 
```

那么如何从我的`ViewGroup`对象中获取特定视图呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:06:42.660

> 我知道我的适配器通过调用 getCount 来保存几个项目：

是的，但是适配器的`getCount()`（返回**Adapter 中**`ListView`的项目）方法与获取 a的子级无关`getChildAt()`（您应该使用`getChildCount()`它，因为这将返回 中的`Views` **当前`ViewGroup`**）。

> lastAddedItem = parent.getChildAt(parent.getChildCount()-1);

这应该返回一个非空视图，即该`getView()`方法返回的最后一个视图。

> 我只想为我的 ViewGroup 中的特定视图设置动画

如果您要在列表行（或该行的一部分）变为可见时对其进行动画处理，则为 注册滚动侦听器`ListView`并在目标视图出现在屏幕上时从那里开始动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:03:38.687

我不知道你是如何实现适配器的其余部分的，但如果你以正确的方式做，我是对的，父级只包含显示在设备屏幕上的视图，每次你下拉或拉起列表，它会修改那些视图的内容，这就是你得到 Null 的原因。

您想要实现的（动画视图）应该在运行时完成，检查当前显示在屏幕上的视图是否应该动画。

希望能帮助到你。

# jquery - 将图像定位在 div 的右上角

> ID：15200849
> 
> 赞同：2
> 
> 时间：2013-03-04T11:48:53.027
> 
> 标签：jquery, html, css

我的问题是如何将图像或跨度放置在 div 的右上角。我在谷歌搜索发现

```
/* div that contains the image or span */
#div{ position:relative;}

/* image or span */
#span{ position:absolute; top:0px; right:0px;} 
```

但这不是我发现的。它不占用任何空间，所有其他事情都会下降或上升。请给我解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:51:33.797

使用`position:relative`和`absolute`

**HTML**

```
<div class="wrap">
    <span>Right aligned</span>
</div> 
```

**CSS**

```
.wrap{
    position:relative;
    width:150px;
    height:150px;
    background:yellow
}
span{
    display:inline-block;
    position:absolute;
    right:0;
    top:0;
    background:red
} 
```

**[演示](http://jsfiddle.net/t7Fby/1/)**

* * *

**方法二**

使用`float:right`代替`position:absolute`

```
.wrap{
    width:150px;
    background:yellow;
    display: inline-block;
}
span{  
    background:red; float:right;
    display: inline-block;
} 
```

**[演示 2](http://jsfiddle.net/t7Fby/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:55:08.973

或者您可以使用浮动来轻松选择它占用它的空间并定位到它的父边框角所以只需添加

```
float:right; 
```

然后清除它旁边的浮动

```
<div style="clear:right"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:08:36.820

您正在使用`#div`and`#span`而不是仅将它们称为`div`and `span`。

**前缀**：_

*   `#`用于提及元素的 ID 名称。

*   `.`用于提及元素的类名。

*   并且没有任何内容用作提及标签名称的前缀。（简单地说，`div`或`span`）

`#`从您的 css 样式属性中删除前缀，您的代码将起作用。

* * *

另一种方法是使用`background-image`并使用[`background-position`](https://developer.mozilla.org/en/docs/CSS/background-position)将图像定位在`div`.

```
div{background-image: url(yourImagePathHere); background-position: top right;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:20:22.710

如果您的第一项`div`是`span`or ，您可以使用它`img`。

**CSS：**

```
.d
{
display:block;
width:200px;
height:200px;
}

.s
{
display:block;
width:100px;;
height:100px;
float:right;
} 
```

**HTML：**

```
<div class="d"><span class="s"></span></div> 
```

# mysql - 使用全文搜索 Mysql 搜索和替换列

> ID：15200850
> 
> 赞同：0
> 
> 时间：2013-03-04T11:48:55.273
> 
> 标签：mysql, full-text-search

有没有一种方法可以使用全文搜索来运行 Mysql 查询，例如搜索列（hayes）并在匹配后用“hayes”替换字符串的其余部分？：

Column1：伦敦，海斯，MD15 736

```
WHERE MATCH (COLUMN1) AGAINST ('hayes' IN BOOLEAN MODE) 
```

第 1 列：海斯

因此，由于第 1 列与“hayes”匹配，它删除了字符串的其余部分。它需要通过全文来完成，例如在大型数据集上花费的时间太长。

并且没有设置关键字的顺序，所以我不能使用`find_in_set`

我还将使用大量关键字来运行它，如下所示：

```
WHERE MATCH (COLUMN1) AGAINST ('hayes' IN BOOLEAN MODE)
OR MATCH (COLUMN1) AGAINST ('+WEST +BROMWICH' IN BOOLEAN MODE)
OR MATCH (COLUMN1) AGAINST ('London' IN BOOLEAN MODE) 
```

因此，如果我在包含以下字符串的 column1 上运行上述查询：

`london, m456, hayes`<<< 它只会匹配 hayes 而不是 london 和 hayes。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:37:37.347

您可以尝试查找至少包含两个单词之一的行。

```
 AGAINST ('+hayes +London' IN BOOLEAN MODE) 
```

如果你想找到包含两个单词的行然后使用这个

```
 AGAINST ('+hayes London' IN BOOLEAN MODE) 
```

编辑：

```
UPDATE table
SET COLUMN1 =
        'HAYES'
 WHERE
  COLUMN1
 LIKE
    '%hayes%'; 
```

如果你有更多这样的关键字使用

```
 UPDATE table
   SET COLUMN1 =if(
    COLUMN1 LIKE '%hayes%', 'HAYAS', if( 
    COLUMN1 LIKE '%derby%' ,'DERBY' , if(
    COLUMN1 LIKE '%wawwaw%' ,'WAWAWA', Column1))) 
```

# r - 如何通过日期/时间值不匹配的公共列合并 r 中的两个数据框

> ID：15200851
> 
> 赞同：2
> 
> 时间：2013-03-04T11:48:57.210
> 
> 标签：r, merge, unique

我希望使用两者中都存在的“日期时间”列合并两个数据集（POSIXct 格式：dd/mm/yyyy hh:mm）。以下是来自两个数据集的示例数据：

```
# Dataset 1 (dts1)

           datetime   count   period   
1  30/03/2011 02:32      27      561
2  30/03/2011 02:42       3      600
3  30/03/2011 02:52       0      574
4  30/03/2011 03:02       1      550
5  30/03/2011 03:12      15      600
6  30/03/2011 03:22       0      597

# Dateset 2 (dts2)

   datetime         dist car   satd      alt
1 30/03/2011 01:59  23.9   1      3     1.76       
2 30/03/2011 02:58  14.7   1      7     6.36       
3 30/03/2011 03:55  10.4   2      9    -0.34      
4 30/03/2011 04:53  35.4   1      3     3.55      
5 30/03/2011 05:52  56.1   1      7    -0.91       
6 30/03/2011 06:48  12.3   1      4     6.58      
7 30/03/2011 07:48  10.7   1      5     4.18 
```

如果这是合并来自两个帧的匹配行的简单情况，则可以使用基本`merge(data1, data2, by="datetime")`或函数。`rbind()`

但是，我的问题更复杂，因为*两个数据集中的时间间隔不相等*。`Dataset 1`包含**精确**的 10 分钟间隔的数据（每行包含关于在指定日期/时间结束的 10 分钟块的信息），同时`dataset 2`包含**大约**1 小时间隔的数据（每行包含来自 1 小时块的信息在指定的日期/时间结束）。

更难的是，两个数据集中行的开始时间之间存在*时间不匹配*`dts1`（即：01/03/2013 10:00:00，`dts2`：01/03/2012 09:58:12）。`dts2`整个数据集的时间间隔也有所不同（1 小时两边的±几分钟）。我想将数据集 1 中的每 10 分钟数据行与数据集 2 中适合的小时块链接（以及 dts2 中的所有关联列值）。将有一些行可以适合 2 个不同的小时块（即 30/03/2011 03:02），但我只需要将这些行链接到一个小时块。

我想结束这样的事情：

```
 datetime_dts1 count period     datetime2_dts2  dist  car satd      alt  
1    30/03/2011 02:32    27    561   30/03/2011 02:58  14.7   1     7     6.36      
2    30/03/2011 02:42     3    600   30/03/2011 02:58  14.7   1     7     6.36
3    30/03/2011 02:52     0    574   30/03/2011 02:58  14.7   1     7     6.36
4    30/03/2011 03:02     1    550   30/03/2011 02:58  14.7   1     7     6.36
5    30/03/2011 03:12    15    600   30/03/2011 03:55  10.4   2     9    -0.34
6    30/03/2011 03:22     0    597   30/03/2011 03:55  10.4   2     9    -0.34 
```

我一直在寻找这个问题的答案，但未能解决它，而且我的 R 能力并不先进。如果有人能给我一个方向或提供解决方案，我将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:26:48.613

在首先将您的日期时间字符串转换为`POSIXt`类之后，对这些时间进行`round`ing 和`trunc`ating 的某种组合应该可以为您提供一些可以用作合并基础的东西。

首先读入您的数据，并创建相应的 POSIXt 日期时间：

```
dts1 <- structure(list(datetime = structure(1:6,
   .Label = c("30/03/2011 02:32", "30/03/2011 02:42",
   "30/03/2011 02:52", "30/03/2011 03:02", "30/03/2011 03:12",
   "30/03/2011 03:22"), class = "factor"), count = c(27L, 3L,
   0L, 1L, 15L, 0L), period = c(561L, 600L, 574L, 550L, 600L,
   597L)), .Names = c("datetime", "count", "period"),
   class = "data.frame", row.names = c(NA, -6L))
dts2 <- structure(list(datetime = structure(1:7,
    .Label = c("30/03/2011 01:59", "30/03/2011 02:58",
    "30/03/2011 03:55", "30/03/2011 04:53", "30/03/2011 05:52",
    "30/03/2011 06:48", "30/03/2011 07:48"), class = "factor"),
    dist = c(23.9, 14.7, 10.4, 35.4, 56.1, 12.3, 10.7), car =
    c(1L, 1L, 2L, 1L, 1L, 1L, 1L), satd = c(3L, 7L, 9L, 3L, 7L,
    4L, 5L), alt = c(1.76, 6.36, -0.34, 3.55, -0.91, 6.58,
    4.18)), .Names = c("datetime", "dist", "car", "satd",
    "alt"), class = "data.frame", row.names = c(NA, -7L))

# create corresponding POSIXlt vector
# (you could update the 'datetime' columns in-place if you prefer)
datetime1 <- strptime(dts1$datetime, format="%d/%m/%Y %H:%M")
datetime2 <- strptime(dts2$datetime, format="%d/%m/%Y %H:%M") 
```

以下代码在所有情况下都基于最近的时间生成一个合并表。在合并中，它只是在每个数据帧前面加上一个带有舍入时间的列，基于该列进行合并（即列号 1），然后使用`-1`索引在最后删除该列：

```
# merge based on nearest hour
merge(
    cbind(round(datetime1, "hours"), dts1),
    cbind(round(datetime2, "hours"), dts2),
    by=1, suffixes=c("_dts1", "_dts2")
)[-1]

     datetime_dts1 count period    datetime_dts2 dist car satd  alt
1 30/03/2011 02:32    27    561 30/03/2011 02:58 14.7   1    7 6.36
2 30/03/2011 02:42     3    600 30/03/2011 02:58 14.7   1    7 6.36
3 30/03/2011 02:52     0    574 30/03/2011 02:58 14.7   1    7 6.36
4 30/03/2011 03:02     1    550 30/03/2011 02:58 14.7   1    7 6.36
5 30/03/2011 03:12    15    600 30/03/2011 02:58 14.7   1    7 6.36
6 30/03/2011 03:22     0    597 30/03/2011 02:58 14.7   1    7 6.36 
```

如上所述，但这次只是按小时截断：

```
merge(
    cbind(trunc(datetime1, "hours"), dts1),
    cbind(trunc(datetime2, "hours"), dts2),
    by=1, suffixes=c("_dts1", "_dts2")
)[-1]

     datetime_dts1 count period    datetime_dts2 dist car satd   alt
1 30/03/2011 02:32    27    561 30/03/2011 02:58 14.7   1    7  6.36
2 30/03/2011 02:42     3    600 30/03/2011 02:58 14.7   1    7  6.36
3 30/03/2011 02:52     0    574 30/03/2011 02:58 14.7   1    7  6.36
4 30/03/2011 03:02     1    550 30/03/2011 03:55 10.4   2    9 -0.34
5 30/03/2011 03:12    15    600 30/03/2011 03:55 10.4   2    9 -0.34
6 30/03/2011 03:22     0    597 30/03/2011 03:55 10.4   2    9 -0.34 
```

如上所述，但对于 dts1 将记录视为属于前一小时，直到该小时后 10 分钟，通过在截断前减去 10*60 秒。这个产生的输出与您指定的相同，但没有更多信息，我不确定它是否是您想要的确切规则。

```
merge(
    cbind(trunc(datetime1 - 10*60, "hours"), dts1),
    cbind(trunc(datetime2, "hours"), dts2),
    by=1, suffixes=c("_dts1", "_dts2")
)[-1]

     datetime_dts1 count period    datetime_dts2 dist car satd   alt
1 30/03/2011 02:32    27    561 30/03/2011 02:58 14.7   1    7  6.36
2 30/03/2011 02:42     3    600 30/03/2011 02:58 14.7   1    7  6.36
3 30/03/2011 02:52     0    574 30/03/2011 02:58 14.7   1    7  6.36
4 30/03/2011 03:02     1    550 30/03/2011 02:58 14.7   1    7  6.36
5 30/03/2011 03:12    15    600 30/03/2011 03:55 10.4   2    9 -0.34
6 30/03/2011 03:22     0    597 30/03/2011 03:55 10.4   2    9 -0.34 
```

您可以根据您的特定规则调整您舍入哪些细节、截断哪些细节以及是否首先减去/添加一些时间。

**编辑：**

不是最优雅的，但这是一种不同的方法，可以适应您在评论中描述的更复杂的条件规则。这在很大程度上依赖于`na.locf`zoo 包，以首先确定每个 dts1 记录之前和之后的 dts2 时间。有了这些，只需应用规则选择所需的 dts2 时间，匹配回原始 dts1 表，然后合并。

```
library(zoo)

# create ordered list of all datetimes, using names to keep
# track of which ones come from each data frame
alldts <- sort(c(
    setNames(datetime1, rep("dts1", length(datetime1))),
    setNames(datetime2, rep("dts2", length(datetime2)))))
is.dts1 <- names(alldts)=="dts1"

# for each dts1 record, get previous closest dts2 time
dts2.prev <- alldts
dts2.prev[is.dts1] <- NA
dts2.prev <- na.locf(dts2.prev, na.rm=FALSE)[is.dts1]

# for each dts1 record, get next closest dts2 time
dts2.next <- alldts
dts2.next[is.dts1] <- NA
dts2.next <- na.locf(dts2.next, na.rm=FALSE, fromLast=TRUE)[is.dts1]

# for each dts1 record, apply rule to choose dts2 time
use.prev <- !is.na(dts2.prev) & (alldts[is.dts1] - dts2.prev < 5)
dts2.to.use <- ifelse(use.prev, as.character(dts2.prev), 
    as.character(dts2.next))

# merge based on chosen dts2 times, prepended as character vector
# for the purpose of merging
merge(
    cbind(.dt=dts2.to.use[match(datetime1, alldts[is.dts1])], dts1),
    cbind(.dt=as.character(datetime2), dts2),
    by=".dt", all.x=TRUE, suffixes=c("_dts1", "_dts2")
)[-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T07:34:25.497

data.table 的选择器似乎非常适合。它非常有效，并且允许合并最接近的值（上或下或两者）。

在此网站上查找：[https](https://www.r-bloggers.com/understanding-data-table-rolling-joins/) ://www.r-bloggers.com/understanding-data-table-rolling-joins/左、右连接等示例

```
website[, join_time:=session_start_time]
paypal[, join_time:=purchase_time]
setkey(website, name, join_time)
setkey(paypal, name, join_time)
website[paypal, roll = T] 
```

关于 DT：[https ://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html)

# java - 在 android 应用程序中读取 mp3 标签

> ID：15200852
> 
> 赞同：1
> 
> 时间：2013-03-04T11:48:59.300
> 
> 标签：java, android, tags, mp3

我将 jid3lib 用于 java。当我在存储在我的计算机中的文件上使用这个库时，它工作得很好，但是当我尝试读取模拟器 sdcard 上文件的 mp3 标签时，我得到了 Exeption。

我使用以下代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    File musicPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);

    File[] songs = musicPath.listFiles();

    for (int i=0; i < songs.length; i++){
        try {
            MP3File song = new MP3File(new File(songs[i].getPath()));
            Log.d("TEST", song.getID3v1Tag().getAlbum() );

        } catch (TagException e) {
            Log.d("TEST", "Tag Exception");
            e.printStackTrace();
        } catch (Exception e) {
            Log.d("TEST", "Exception");             
            e.printStackTrace();
        }

    }
} 
```

我在 sdcard 中放了 2 个 mp3 文件，但日志中仍然出现异常。这里有什么问题？

我在 LogCat 收到以下错误：

```
java.io.FileNotFoundException: /mnt/sdcard/Music/song.mp3: open failed: EACCES (Permission denied) 
```

但是当我在 DDMS 的文件资源管理器中查看时，我可以看到该路径下的文件，即使我使用循环来打印文件名它也会显示正确的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:05:03.743

> EACCES（权限被拒绝）

[`READ_EXTERNAL_STORAGE`](http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE)在清单文件中添加权限。

而且，也许`WRITE_EXTERNAL_STORAGE`还有。

# php - 如何利用“出生日期”栏发送生日祝福

> ID：15200859
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:49:24.117
> 
> 标签：php, sql

我正在编写一个脚本来从数据库中选择所有出生月份和日期在当前月份和日期的人，并通过电子邮件向他们发送生日祝福。我需要的只是 SQL 代码，然后我会从那里获取，然后将它与我的 cron 工作联系起来。

我使用了许多无法运行的代码。我最后使用的代码是：

```
select name_of_staff, 
  email, 
  date_of_birth  
from staff_dossier 
WHERE month(date_of_birth) = month(now()) 
  AND dayofmonth(date_of_birth) = dayofmonth(now()); 
```

//发送邮件代码如下...

我的问题是在必要时仅提取列中的月份和日期部分，`date_of_birth`并使用它来确定生日问候的对象。

有人请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:52:57.947

如果您想获取与当前日期/月份匹配的出生月份和日期的员工列表，您应该能够使用以下函数[`MONTH()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)和[`DAY()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_day)：

```
select name_of_staff, email, date_of_birth  
from staff_dossier 
WHERE month(date_of_birth) = month(now()) 
  AND day(date_of_birth) = day(now()); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/a9f0c/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:04:51.977

使用 date_format()

```
select name_of_staff, 
email, 
date_of_birth  
from staff_dossier
Where
date_format(date_of_birth,'%d %m') = date_format(curdate(),'%d %m'); 
```

# asp.net-mvc-4 - ASP.NET MVC 中的轮询系统

> ID：15200860
> 
> 赞同：0
> 
> 时间：2013-03-04T11:49:27.803
> 
> 标签：asp.net-mvc-4

我想在我的页面部分显示投票，我为此创建了这些 POCO 类：

```
public class Polls
{
    public int Id { get; set; }
    public string Question { get; set; }
    public bool Active { get; set; }
    public IList<PollOptions> PollOptions { get; set; }
}

public class PollOptions
{
    public int Id { get; set; }
    public virtual Polls Polls { get; set; }
    public string Answer { get; set; }
    public int Votes { get; set; }
} 
```

我在 ViewModel 下面使用过：

```
public class PollViewModel
{
    public int Id { get; set; }
    public string Question { get; set; }
    public string Answer { get; set; }
} 
```

然后，我使用上面的 ViewModel 将我的模型传递给我的 View ：

```
public ActionResult Index()
{
    var poll = from p in db.Polls
               join po in db.PollOptions on p.Id equals po.Polls.Id
               where p.Active == true
               select new PollViewModel { 
                   Id=p.Id,
                   Question=p.Question,
                   Answer=po.Answer
    };

    return View(model);
} 
```

在我要显示的视图`Question`和`Answer`民意调查中，我尝试了以下代码：

```
@section Polling{
    @foreach (var item in Model.Polls)
    {
        <input type="radio" /> @item.Answer
    }
} 
```

上面的代码可以正常工作，但我也想显示`Question`，如下所示：

```
@section Polling{
    **@Model.Polls.Question**
    @foreach (var item in Model.Polls)
    {
        <input type="radio" /> @item.Answer
    }
} 
```

我怎样才能做到这一点？

**PS：我的投票表中有一行显示在主页中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:59:29.137

Polls 和 PollsOption 之间存在关系。所以从你的数据库中获取民意调查。并将其传递给查看。此外，您已经有 PollsOptions 连接到他们的民意调查。无需连接两个表。

控制器

```
public ActionResult Index()
{
    // get active Polls
    var poll = from p in db.Poll
               where p.Active == true
               select p;

    // pass it to the view
    return View(poll);
} 
```

看法

```
@model IEnumerable<Polls>

@section Polling{
    @foreach (var question in Model)
    {
        <h2>@question.Question</h2>
        @foreach(var answer in question.PollOptions)
        {
            <input type="radio" /> @answer.Answer
        }
    }
} 
```

# java - Java / Grails：从应用程序发送短信

> ID：15200861
> 
> 赞同：0
> 
> 时间：2013-03-04T11:49:28.927
> 
> 标签：java, grails, sms, grails-plugin

我在 grails 中有一个培训管理系统（grails 版本 2.0.4）

**我的要求**

1.  每当用户注册培训时，他必须在注册时收到关于其手机号码的短信提醒。
2.  仅向印度手机发送短信（因为我们仅在印度提供培训）
3.  一种方式的短信，从应用程序到手机（不需要回复）

Grails 中有什么好的插件可用吗？即使是 java 的方式在 grails 应用程序中也能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:34:24.933

我已将 Twilio 用于合作伙伴的应用程序。这是一项付费服务​​，国际短信到印度的费率在[这里](http://www.twilio.com/sms/pricing/in)。

有一个可用于 twilio 的 Grails 插件，但我选择编写一些自定义代码来发送和接收消息。插件有一些问题，我不记得了。

准系统代码如下所示：

```
def twilioHttpEndpointBean = new HTTPBuilder("https://api.twilio.com/2010-04-01/")
def sid = 'your SID here'
def auth_token = 'the auth token goes here'
twilioHttpEndpointBean.auth.basic(sid,auth_token)
def result = twilioHttpEndpointBean.request(Method.POST) { req -> 
    requestContentType = ContentType.URLENC
    uri.path = "Accounts/${sid}/SMS/Messages.json"
    body = [ To: <destinationPhoneNumber>, From: <mainNumberUsedToRegisterForTheService>, Body: 'your message' ]
    response.success = { resp, data ->
        def test = [status: data.status, sid: data.sid]
        return test
    }
    response.failure = { resp, data ->
        def test = [status: data.status, code: data.message]
        return test
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T14:22:08.007

有一个插件，它提供了一种通过 SMS-Gateway、sipgate.de、sipgate.com 的 XMl-RPC API 发送 SMS 的简单方法

`grails install-plugin sipgate` 使用命令安装它

并在“conf/Config.groovy”中编辑帐户数据占位符

```
grails.plugins.sipgate.username = 'YOUR_USERNAME'
grails.plugins.sipgate.password = 'YOUR_PASSWORD'
//According to E.164, 
```

例如'4922112345678'`grails.plugins.sipgate.phoneNumber = 'YOUR_PHONE'`

然后注入' `sipgateService`'并发送短信

```
def sipgateService
def phoneNumber = '4917712345678' //phoneNumber according to E.164 specification //working alternative: def phoneNumber = '+1-719-555-1234'
def result = sipgateService.sendSMS(phoneNumber, 'This is my Text to send!')
result? println 'Sending Successful': println 'Sending failed' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:09:53.840

I am not sure about `grail` but if you want to give it a try by using java then check this out [smslib.org](http://smslib.org/).

Copied from the site:

```
SMSLib is a programmer library for sending and receiving SMS messages via a GSM modem or mobile phone. 
```

Hope this helps you !!

# ruby-on-rails - 在其模型上调用模型名称

> ID：15200864
> 
> 赞同：0
> 
> 时间：2013-03-04T11:49:43.040
> 
> 标签：ruby-on-rails, model

我有一个从 excel 导入的功能。我把它放在我的模型上：

```
def self.import(file, employee_name)
  spreadsheet = open_spreadsheet(file)
  header = spreadsheet.row(1)
  (2..spreadsheet.last_row).each do |i|
    row = Hash[[header, spreadsheet.row(i)].transpose]
    category = Category.where(:name => row["Category"]).last
    if category.blank?
      category = Category.create(:name => row["Category"], :is_active => 1)
    end
    unit = UnitOfMeasure.where(:name => row["Unit"]).last
    if unit.blank?
      unit = UnitOfMeasure.create(:name => row["Unit"], :is_active => 1)
    end

    chart_of_account_id=0
    stock_output_account=0

    if row["Can Sold"]==1
      income_account=1
    else
      income_account=0
    end

    if row["Can Purchased"]==1
      expense_account=1
    else
      expense_account=0
    end

    product = Product.create(:plu => row["PLU"], :plu_night_disc => row["PLU Night Disc."], :name => row["Item Desc."], :min_stock => ["Min. Stock"], :product_type => row["Product Type"], :notes => ["Notes"], :sales_price => ["Sales Price"], :night_disc_price => ["Night Disc. Price"], :bottom_price => ["Bottom Price"], :category_id => category.id, :unit_of_measure_id => unit.id, :chart_of_account_id => chart_of_account_id, :stock_output_account => stock_output_account, :income_account => income_account, :expense_account => expense_account, :can_be_sold => row["Can Sold"], :can_be_purchased => row["Can Purchased"], :employee_name => employee_name, :is_active => 1)

  end
end 
```

但是当我进行导入时，它不会返回任何错误，但我的创建`Product`只是跳过（查找长代码），当我尝试更改`Product`示例以`Country`对其插入数据库进行精细建模时。我确实对这种行为感到困惑。请任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:05:18.667

您遇到的这种行为可能意味着您的`Product`记录无效，并且插入正在静默失败。尝试改用该`create!`方法：

```
product = Product.create!(...) 
```

如果您的模型无效，此方法将引发错误，并解释原因。您可以使用该信息来调试您的代码。

希望有帮助。

# php - 小胡子 - isset

> ID：15200867
> 
> 赞同：0
> 
> 时间：2013-03-04T11:49:48.560
> 
> 标签：php, mustache

如何检查是否在 mustache 中设置了变量？像：

```
<?php if(isset($foo) && isset($bar)): ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:51:56.560

```
{{#varname}}
  {{varname}}
{{/varname}} 
```

见[http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)，第一个例子

# perl - DBD::Mock 为存储过程指定输出值

> ID：15200873
> 
> 赞同：4
> 
> 时间：2013-03-04T11:50:11.157
> 
> 标签：perl, testing

我正在尝试使用[DBD::Mock](http://search.cpan.org/~dichi/DBD-Mock-1.45/lib/DBD/Mock.pm)来测试使用数据库的代码。到目前为止，普通的 SQL 查询工作得很好，但是我对如何测试调用存储过程的代码有点茫然。使用构造函数的`bound_params`键`DBD::Mock::Session->new`，我可以指定输入参数，但我似乎无法找到一种方法来设置使用绑定的参数的模拟结果`DBI::StatementHandle::bind_param_inout()`。

要为将要测试的代码提供示例，请查看以下内容：

```
use DBI;
my $dbh = DBI->connect('dbi:Mock', '', '', { RaiseError => 1, PrintError => 1 });
my $sth = $dbh->prepare(q{
BEGIN
  some_stored_proc(i_arg1 => :arg1, o_arg2 => :arg2);
END;
});
my ($arg1, $arg2) = ('foo', 'bar');
$sth->bind_param(':arg1', $arg1);
$sth->bind_param_inout(':arg2', \$arg2, 200);
$sth->execute();
print STDERR "OUTPUT VALUE OF arg2 = $arg2\n"; 
```

现在，我想用参数为数据库播种`'frobnication'`，`arg2`这样当上面的代码执行时，`$arg2`变量包含这个字符串，输出是

> arg2 的输出值 = 冷冻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:34:43.157

这就是我最终要做的。本质上，主要工作是覆盖该`DBD::Mock::st::bind_param_inout`方法。

```
use DBI;
use DBD::Mock;
use DBD::Mock::st;
use Carp;

# array of values to be bound on each invocation
my @values = qw/frobnication/;
# dummy variable to trick DBD::Mock into thinking it got the same reference for
# bind_param_inout and bound_params (the former is usually not in the control of
# the testing code, hence this hack).
my $dummy = undef;
# keep reference to the original bind_param_inout method
my $bind_param_inout_orig = \&DBD::Mock::st::bind_param_inout;
# override with our mocked version that assigns a value to the reference.
# notice that it does so at the bind_param_inout call, *NOT* the execute call!
local *DBD::Mock::st::bind_param_inout = sub {
  my ($self, $param_num, $val, $size) = (shift, shift, shift, shift);
  $bind_param_inout_orig->($self, $param_num, \$dummy, $size, @_);
  $$val = shift @values or Carp::confess '@values array exhausted!';
};

# set up the mock session
my $dbh = DBI->connect('dbi:Mock:', '', '',
  { RaiseError => 1, PrintError => 1 });
$dbh->{mock_session} = DBD::Mock::Session->new('foo_session' => (
  {
    statement => qr/BEGIN\n\s*some_stored_proc/,
    results => [],
    bound_params => ['foo', \$dummy]
  }));

# this is the code to be tested

my $sth = $dbh->prepare(q{
BEGIN
  some_stored_proc(i_arg1 => :arg1, o_arg2 => :arg2);
END;
});
my ($arg1, $arg2) = ('foo', 'bar');
$sth->bind_param(':arg1', $arg1);
$sth->bind_param_inout(':arg2', \$arg2, 200);
$sth->execute();
print STDERR "OUTPUT VALUE OF arg2 = $arg2\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:27:58.620

你可以使用 [Sub::Override](http://search.cpan.org/~ovid/Sub-Override-0.09/lib/Sub/Override.pm)来覆盖这个 sub。

您可以像这样修改您的模拟对象并创建一个新的模拟子。

```
$mocked_dbd->mock( 'bind_param_inout',&mocked_bind_param_inout ); 
```

在我看来，这种方法在这里被嘲笑：http: [//cpansearch.perl.org/src/DICHI/DBD-Mock-1.45/lib/DBD/Mock/st.pm](http://cpansearch.perl.org/src/DICHI/DBD-Mock-1.45/lib/DBD/Mock/st.pm)

也许这会起作用：

```
my @rs_foo = (
    [ 'this', 'that' ],
    [ 'this_one', 'that_one' ],
    [ 'this_two', 'that_two' ],
);
# the first one ordered
$dbh->{mock_add_resultset} = [ @rs_foo ];

use Data::Dumper;
my $mocked_records = $sth->{mock_records};
print Dumper($mock_records); 
```

# encryption-symmetric - 单独的数据加密

> ID：15200874
> 
> 赞同：2
> 
> 时间：2013-03-04T11:50:11.597
> 
> 标签：encryption-symmetric

我存储了一些敏感数据。数据被分成几部分，我希望每个部分都有单独的访问权限。假设我有 1000 个文件。我想用相同的对称加密算法加密每个文件。我想当黑客获得 1000 个密码时破解密钥比他只有一个密码更容易，所以我认为我应该为每个文件使用单独的密钥。我的问题如下：

**我应该为每个文件使用单独的密钥吗？**

如果我应该，存储 1000 个密钥会有问题。所以我想拥有一个密钥并使用我自己的算法从密钥中为每个文件计算单独的密钥。这是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:04:57.260

如果您考虑被动对手并使用 CPA 强密码（如 AES），则对所有文件仅使用一个密钥就足够了。假设对手知道你使用的密码，甚至知道明文，他就无法以不可忽略的概率重构密钥。[这](https://math.stackexchange.com/questions/51960/is-it-possible-to-guess-an-aes-key-from-a-series-of-messages-encrypted-with-that)是更详细的答案。

如果您还考虑活跃的对手（可以替换密文），您应该使用 Authenticated Encryption。但据我了解，这不是你的情况。

> 所以我想拥有一个密钥并使用我自己的算法从密钥中为每个文件计算单独的密钥。这是个好主意吗？

一般来说，开发自己的算法或方案是个坏主意。您很容易在算法或实现中犯一些看不见的错误，您的数据将很容易受到攻击。最好使用经过很多人同行评审并被证明是安全的知名算法和实现。

# syntax - 矩阵操作 SciLab

> ID：15200877
> 
> 赞同：0
> 
> 时间：2013-03-04T11:50:17.440
> 
> 标签：syntax, scilab

我听说有一些方法可以在不使用 FOR 循环的情况下更改矩阵值。例如：

```
A = [1 2; 3 4] 
```

假设有一种方法可以使所有值例如小于 4 并将它们更改为其他值，比如说零。像这样的东西：

```
A(...<4...)=0 
```

答案应该是：

```
 ans  =

0\.    0\.  
0\.    4\. 
```

有人知道这个的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:39:26.187

你真的不需要为此使用`find`；您可以简单地使用索引：

```
A(A>=4) = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:07:32.657

你可以做：

A(发现(A<4))=0;

# jquery - 在点击方法中停止数据绑定事件

> ID：15200881
> 
> 赞同：4
> 
> 时间：2013-03-04T11:50:31.010
> 
> 标签：jquery, knockout.js, jquery-validate

我有一个复选框，它会导致对文本框进行验证，并且还会将数据绑定到视图模型。

这是我的[小提琴](http://jsfiddle.net/JanGous/U4eJA/)。

```
<input id="checkbox1" type="checkbox" data-bind="checked: viewitems">Checkbox</input> 
```

当单击事件返回 false 值时，我希望复选框不进行数据绑定。

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:19:04.273

你不能只在你的点击方法中设置你的 observable 的值吗？

```
$('#checkbox1').click(function ()
{
    if (!$('#textbox1').valid())
    {
        viewitems(false)
        alert("Please enter value");
        return;
    }
    else
    {
        viewitems(true)
    }
}); 
```

# android - 安卓主题颜色

> ID：15200884
> 
> 赞同：3
> 
> 时间：2013-03-04T11:50:39.737
> 
> 标签：android, colors, android-theme

我正在尝试制作主题，我问过自己，是否可以为特定的文本视图提供不同的颜色。

示例：在“Theme.One”中，我希望在文本视图“标题”中使用绿色，文本视图“text1”中使用粉红色。

主题.xml

```
 <style name="Theme.One" parent="@android:style/Theme.Light">
        <item name="android:background">@color/Azur</item>
        <item name="android:textColor">@color/Black</item>
        ...
      </style>
      <style name="Theme.Two" parent="@android:style/Theme.Light">
        <item name="android:background">@color/Blue</item>
        <item name="android:textColor">@color/White</item>
        ...
      </style> 
```

接口.xml

```
 <TextView
        android:text="@string/Title"
        android:id="@+id/Title"
        android:textSize="25sp" />
    <TextView
        android:text="@string/text1"
        android:id="@+id/text1"
        android:textSize="20sp" /> 
```

我希望有很好的句子，并提前感谢您的回答，

阿齐扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:57:38.683

你应该有一种粉红色的样式和另一种绿色的样式。例如对于绿色 TextView：

```
 <TextView
    android:text="@string/Title"
    android:id="@+id/Title"
    android:textSize="25sp"
   style="@style/Colorgreen"
 /> 
```

和你的风格

```
 <style name="Colorgreen">
       <item name="android:textColor">#00FF00</item>
        </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:19:29.667

在清单中：

```
 android:theme="@style/myTheme" 
```

在 res/values 文件夹中：

```
<style parent="@android:style/Theme.Dialog" name="myTheme">
    <item name="android:textColor">#00ff00</item>
    <item name="android:dateTextAppearance">?android:attr/textAppearanceSmall</item>
</style> 
```

您可以将颜色更改为不同的颜色并为 textview 应用颜色。

```
 android:textColor="yourcolor" 
```

# android - Android在哪里保存个人数据？

> ID：15200887
> 
> 赞同：3
> 
> 时间：2013-03-04T11:50:46.857
> 
> 标签：android, security

我有一个难题，我需要在我的 Android 设备上保存一些安全数据，这些数据是个人文件柜的登录信息，所以请你给我一个建议，将这些信息保存到简单的 txt 文件中更好的位置（但是安全性呢？ ？）或者Android平台中是否有MySQL DB的模拟（以及我如何访问它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:20:29.320

在 Android 应用程序中存储个人数据的最佳方式是使用私有模式的共享首选项，这样除了您的应用程序之外，没有人可以访问该数据。有关更多详细信息，请参阅此处有关共享首选项的 Android 开发人员提示[。](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:56:58.917

您可以将简单的 txt 文件保存到您的应用程序目录中。一般来说，Android 会为每个应用程序分配一个唯一的 uid。每个应用程序都有自己的应用程序目录，模式为 660。因此其他应用程序无法访问其内容。要编写自己的应用程序目录，可以使用以下代码：

```
String filename = "myfile";
String string = "Your security content";
FileOutputStream outputStream;

try {
  outputStream = openFileOutput(filename, Context.MODE_PRIVATE);
  string = encrypt(string);
  outputStream.write(string.getBytes());
  outputStream.close();
} catch (Exception e) {
  e.printStackTrace();
} 
```

但是，如果目标设备是根设备，其他应用程序可以访问您的文件。因此，更好的方法是加密您的数据，并将其保存到应用程序目录中。

对于数据库方法，它也有同样的问题，您可以定义自己的内容提供程序而不将其导出，但它在有根设备上仍然容易受到攻击。因此，无论您选择什么，写入 txt 文件或将其存储在数据库中，都必须先对其进行加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:53:52.397

AFAIK 你不能在安卓设备上运行 MySQL，但你可以使用[SQLite](http://www.sqlite.org)（[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)）。您甚至可以尝试使用[SQLCipher](http://sqlcipher.net/)将其存储在加密数据库中。尽管有人告诉我从 APK 中提取访问密钥并不难。

存储密码时，请确保对其进行加密（即使您正在加密数据库）。将密码存储为纯文本很少是一个好主意；）

无论您做什么，都不要将其存储在文本文件中！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:56:03.683

您可以将详细信息存储在 android 上的 SQLdb 中，但使用加密保存所有表单详细信息并保留字符串。

您可以在下面的答案中看到有人使用完全相同的技术并使用 phoneId 进行加密的示例（尽管我不确定这到底有多安全）。

[将用户名 + 密码存储在 Android 的本地 SQLite 数据库中是否安全？](https://stackoverflow.com/questions/6205666/is-it-safe-to-store-username-passwords-in-a-local-sqlite-db-in-android)

# php - 条件语句不起作用

> ID：15200895
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:50:56.933
> 
> 标签：php, if-statement, conditional-statements

我正在尝试进行简单的条件检查，例如：

```
$test = 1;
$test_ = $test==-1?"Test--1":$test==1?"Test-1":$test==0?"Test-0":"Test";
echo $test_; 
```

输出是`Test-0`但必须是`Test-1`。

哪个可能是问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:53:41.923

试试这个：为条件加上括号。

```
$test = 1;
$test_ = ($test==-1)?"Test--1":($test==1?"Test-1":($test==0?"Test-0":"Test"));
echo $test_; 
```

输出 ：

```
Test-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:53:16.777

改变这个

```
$test_ = $test==-1?"Test--1":$test==1?"Test-1":$test==0?"Test-0":"Test"; 
```

到

```
$test_ = $test==-1?"Test--1":($test==1?"Test-1":($test==0?"Test-0":"Test")); 
```

工作示例[http://viper-7.com/msuCyk](http://viper-7.com/msuCyk)

```
// output Test-1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:58:22.700

PHP中的三元运算符是从左到右的，因此，它的执行方式如下：

```
$test_ = (( ( $test==-1 ? "Test--1" :$test==1) ? "Test-1":$test==0)?"Test-0":"Test"); 
```

# java - 存根检查的异常：如何处理异常

> ID：15200898
> 
> 赞同：3
> 
> 时间：2013-03-04T11:51:07.203
> 
> 标签：java, junit, junit4, mockito, stub

我正在使用 Junit 4 和 Mockito，我想存根一个方法调用，以便它引发异常：

```
doThrow(MyException.class).when(myObject).foo(); 
```

问题是，MyException 是一个已检查的异常，因此`foo()`在此语句中的调用会导致编译器抱怨我必须处理异常或在我的方法中添加 throws 子句。

所以我想知道处理这种情况的正确方法是什么？到目前为止，我的想法是：

1.  我用错了，有更好的方法来做到这一点。
2.  我只是添加`throws MyException`到测试方法
3.  我将调用提取到另一个方法，该方法只是吞下异常

例如

```
private void givenFooThrowsAnException(MyObject myObject) {
    try {
        doThrow(MyException.class).when(myObject).foo();
    } catch (MyException e) {
        // Required to stub a checked exception
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:35:07.210

虽然存根强制您处理已检查的异常，但它实际上永远不会抛出该异常。最优雅的方法是声明测试方法以抛出该异常。

这种方法只有一个警告。`@Test`如果您的测试实际上通过在注释中声明检查的异常来验证它是否被抛出。

```
@Test(expected=MyException.class)
public void test...() throws MyException {
    //...
} 
```

在这种情况下，如果你的存根搞砸了并且确实抛出了检查的异常，它可能会产生一个可能应该失败的通过测试。

或者，您可以简单地[使用未经检查的异常](http://www.javacodegeeks.com/2012/03/why-should-you-use-unchecked-exceptions.html)。

# sql - 如何在 SQL Server 中选择父行和子行

> ID：15200899
> 
> 赞同：2
> 
> 时间：2013-03-04T11:51:08.120
> 
> 标签：sql, sql-server, select, common-table-expression

我想从下表中选择与 user_id 53（父母和孩子）相关的所有项目。应该是：1、2、4、8、9。

```
my_table
--------------------------------------------
id    parent_id   user_id   sequence   depth
--------------------------------------------
1     null        50        1          1
2     1           52        1.2        2
3     1           52        1.3        2
4     2           53        1.2.4      3
5     2           52        1.2.5      3
6     3           52        1.3.6      3
7     3           51        1.3.7      3
8     4           51        1.2.4.8    4
9     4           51        1.2.4.9    4 
```

使用 CTE，我可以选择所有孩子或父母，但我不能只用一个查询来选择孩子和父母。下面是我用来选择孩子的 cte。

项目和孩子

```
with cte as (
    select t.id, t.parent_id, t.user_id 
    from my_table t 
    where t.user_id=53

    union all

    select t.id, t.parent_id, t.user_id 
    from my_table t
    inner join cte c on (c.parent_id=t.id)
)
select t.* from cte t; 
```

项目和父母

```
with cte as (
    select t.id, t.parent_id, t.user_id 
    from my_table t 
    where t.user_id=53

    union all

    select t.id, t.parent_id, t.user_id 
    from my_table t
    inner join cte c on (c.id=t.parent_id)
)
select t.* from cte t; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:17:43.820

拥有序列非常方便。父母有一个与您正在寻找的初始子集相匹配的序列。对孩子来说也是如此，但反过来。

以下内容接近您想要的：

```
select mt.*
from (select sequence from my_table where USER_ID = 53) theone join
     my_table mt
     on mt.sequence like theone.sequence+ '%' or
        theone.sequence like mt.sequence + '%' 
```

但是，例如，您必须小心`10`匹配`1`。因此，让我们在适当的地方添加一个额外的时间段：

```
select mt.*
from (select sequence from my_table where USER_ID = 53) theone join
     my_table mt
     on mt.sequence like theone.sequence+ '.%' or
        theone.sequence like mt.sequence + '.%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:26:54.840

这里的问题是，你想要一个**递归** `SELECT`的. 不为此类查询创建 DBMS。但这当然是可能的。

```
SELECT t1.* FROM Table1 t1 WHERE user_id = 53

UNION ALL

SELECT t2.* FROM Table1 t1, Table1 t2
WHERE
  (t1.id = t2.parent_id OR t1.parent_id = t2.id) AND t1.user_id = 53 
```

此查询将为您提供每个 1 级亲属。

对于递归 SELECT，请看这里：[SQL 中的递归选择](https://stackoverflow.com/questions/5649446/recursive-select-in-sql)

* * *

此处查询的解决方案：[http ://sqlfiddle.com/#!6/e1542/10/0](http://sqlfiddle.com/#!6/e1542/10/0)

```
with cte as (
    select t.id, t.parent_id, t.user_id 
    from Table1 t 
    where t.user_id=53
),

cte1 as (
    select t.id, t.parent_id, t.user_id 
    from cte t

    union all

    select t.id, t.parent_id, t.user_id 
    from Table1 t
    inner join cte1 c on (c.parent_id=t.id)
),

cte2 as (
    select t.id, t.parent_id, t.user_id 
    from cte t

    union all

    select t.id, t.parent_id, t.user_id 
    from Table1 t
    inner join cte2 c on (c.id=t.parent_id)
)

select t.* from cte1 t

UNION

select t.* from cte2 t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T07:51:34.633

```
declare @Rownumber int;
CREATE TABLE #GetSeqUser (
    RowNumber int,
    UserId int,
)
INSERT INTO #GetSeqUser Select ROW_NUMBER() OVER(ORDER BY EmpId ASC) AS ROWNUMBER, EmpId FROM  dbo.TreeSystem
set @Rownumber = (select ROWNUMBER from #GetSeqUser where UserId = 3 )
set @Rownumber = @Rownumber + 1
select UserId from #GetSeqUser where ROWNUMBER = @Rownumber 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-06T07:47:06.703

```
declare @Rownumber int;
CREATE TABLE #GetSeqUser (
    RowNumber int,
    UserId int,
)
INSERT INTO #GetSeqUser Select ROW_NUMBER() OVER(ORDER BY EmpId ASC) AS ROWNUMBER, EmpId FROM  dbo.TreeSystem
set @Rownumber = (select ROWNUMBER from #GetSeqUser where UserId = 3 )
set @Rownumber = @Rownumber + 1
select UserId from #GetSeqUser where ROWNUMBER = @Rownumber 
```

# php - 每 10 分钟调用一次 php 函数，持续 1 小时

> ID：15200907
> 
> 赞同：0
> 
> 时间：2013-03-04T11:51:23.640
> 
> 标签：php

得到了这个代码，它应该检查 url 是否可用并给我 ping：

```
<?php
function test ($url){
$starttime = microtime(true);
$valid = @fsockopen($url, 80, $errno, $errstr, 30);
$stoptime = microtime(true);
echo (round(($stoptime-$starttime)*1000)).' ms.';

if (!$valid) {
   echo "Status - Failure";
} else {
   echo "Status - Success";
}
}

test('google.com');
?> 
```

我是如何做到的，所以这个函数会被调用，让我们说 10 分钟 1 小时（总共 6 次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:55:47.603

取决于：你想只做一次吗？

然后您可以在循环内调用该函数并`sleep()`在每次执行循环后使用。

你想每天都做吗？还是每周/每月某一天？使用 cron。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:00:12.890

使用简单的 for 循环和[sleep](http://www.php.net/manual/en/function.sleep.php)命令：

```
for ($i = 0; $i < 6; $i++) { // Run the code 6 times
    test($url);
    sleep(10 * 60); // Sleep 10 Minutes
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:03:19.410

如果您使用的是 Unix 服务器或 Windows 任务计划程序，我建议您使用[cron 作业。](http://es.wikipedia.org/wiki/Cron_%28Unix%29)

像这样，您将能够使用编程任务。

在使用的情况下，`cron`您可以像这样轻松地做到这一点：

```
*/10 * * * *  php -f your_relative_or_full_path_URL/params > /dev/null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T19:43:14.370

**每月每天发送电子邮件。我在日常备份邮件中使用它..**

```
<?php 
  ignore_user_abort(true); //if page is closed its make it live
  for($i=0;$i<=30;$i++)
  {
     $to = "someone@exmple.com";
     $subject = "Test mail $i";
     $message = "Hello! This is a simple email message.";
     $from = "from@example.com";
     $headers = "From:" . $from;
     mail($to,$subject,$message,$headers);
     sleep(24*60);//send mail in every 24 hour. 
}

?> 
```

# cakephp - 无法更改 cakephp 中的表单字段名称

> ID：15200908
> 
> 赞同：0
> 
> 时间：2013-03-04T11:51:27.273
> 
> 标签：cakephp

我在 CakePHP 中有这个表格：

```
echo $form->input('name', array('label' => $j['contact_name']));
echo $form->input('email', array('class' => 'disabled', 'label' => $j['contact_mail']));
echo $form->end(__('Submit', true)); 
```

我有两种不同的语言，所以我想将名称更改为名称，但是当我这样做时它不起作用。任何人都可以帮助我如何在 CakePHP 中工作。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:37:35.460

您必须使用 CakePHP 的“本地化”功能

[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

基本上，任何应该用当前语言翻译的字符串，都应该通过该`__()`方法回显，例如`echo __('hello')`

本例中的字符串 'hello' 是要本地化（翻译）的字符串。CakePHP 使用 GNU 语言环境文件来定义您的翻译。在这些文件中是字符串的“对”，称为`msgid`（要翻译的字符串/消息）和`msgstr`（翻译的字符串）。每种语言（'locale'）都有自己的翻译文件，位于：

```
app/Locale/[locale]/LC_MESSAGES/default.po 
```

例如，要进行“荷兰语”翻译（语言环境“nld”），此文件：

```
app/Locale/nld/LC_MESSAGES/default.po 
```

应该创建，包含：

```
msgid  "hello"
msgstr "hallo" 
```

现在，通过将语言环境切换为“nld”（例如在`beforeFilter()`您的 AppController 中；

```
Configure::write('Config.language', 'nld'); 
```

将使用“nld”语言环境和这一行；

```
echo _('hello'); 
```

将输出：

```
hallo 
```

在您的情况下，设置标签将是这样的；

```
echo $this->Form->input('name', array('label' => __('hello'))); 
```

**重要的**

旧版本（CakePHP 2.x 之前）“回显”翻译后的字符串，而不是*返回*翻译后的字符串。要在 CakePHP 1.x 中*返回*翻译后的字符串，您需要传递 'true' 作为第二个参数；`echo __('hello', true);`

.po 文件中的字符串**区分大小写**，例如`Hello !== hello`

语言环境文件用于应用程序中的“短”、固定文本，而不是翻译用户输入的大段文本或“动态”文本。尽管可以*在*这些情况下使用它，但它并不是为此而*设计*的。

CakePHP 2.x 和 1.x 之间还有其他一些变化，所以在所有情况下，通过阅读手册让自己熟悉整个概念。

# birt - 我可以用 BIRT 做这个报告吗

> ID：15200910
> 
> 赞同：0
> 
> 时间：2013-03-04T11:51:29.743
> 
> 标签：birt, crosstab

我是 BIRT 的新手，我尝试从数据库中做一份报告， [这是我的数据库的概述，](http://hpics.li/5bce46f)最后我想为一个人提供这样的东西 ，[这](http://hpics.li/1dd862f)是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:21:27.807

是的，可以在 BIRT 的交叉表中显示数据 - 请参阅[此处](http://www.birt-exchange.org/org/devshare/designing-birt-reports/202-birt-cross-tab-example--basic-/)或[此处](http://www.linuxtopia.org/online_books/eclipse_documentation/eclipse_birt_report_guide/topic/org.eclipse.birt.doc/birt/eclipse_birt_report_crosstab.17.1.html)了解说明和示例。

# java - 使用 JMockit，我如何模拟特定输入参数值的接口方法？

> ID：15200914
> 
> 赞同：3
> 
> 时间：2013-03-04T11:51:41.333
> 
> 标签：java, unit-testing, junit, jmockit

假设我有一个`Foo`带有方法的接口`bar(String s)`。我唯一想嘲笑的是`bar("test");`.

我不能用静态部分模拟来做到这一点，因为我只希望在`bar`传递“测试”参数时模拟该方法。我不能用动态部分模拟来做到这一点，因为这是一个接口，我也不希望模拟实现构造函数。我也不能使用接口模拟`MockUp`，因为我无法注入模拟实例，它是在代码中的某处创建的。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T16:50:49.210

```
final Foo foo = new MockUp<Foo>() {
        @Mock
        public bar(String s)(){
        return "test";
        }
    }.getMockInstance();
foo.bar("") will now retun "test"... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:10:29.187

实际上，对于这种情况，您需要动态模拟实现所需接口的类。`@Capturing`但是JMockit 目前不支持这种组合（ + 动态模拟）。

也就是说，如果实现类是已知的并且可用于测试代码，则可以单独使用动态模拟来完成，如以下示例测试所示：

```
public interface Foo {
    int getValue();
    String bar(String s);
}

static final class FooImpl implements Foo {
    private final int value;
    FooImpl(int value) { this.value = value; }
    public int getValue() { return value; }
    public String bar(String s) { return s; }
}

@Test
public void dynamicallyMockingAllInstancesOfAClass()
{
    final Foo exampleOfFoo = new FooImpl(0);

    new NonStrictExpectations(FooImpl.class) {{
        exampleOfFoo.bar("test"); result = "aBcc";
    }};

    Foo newFoo = new FooImpl(123);
    assertEquals(123, newFoo.getValue());
    assertEquals("aBcc", newFoo.bar("test")); // mocked
    assertEquals("real one", newFoo.bar("real one")); // not mocked
} 
```

# amazon-ec2 - 无法为厨师客户端配置创建具有 FQDN 的节点

> ID：15200924
> 
> 赞同：3
> 
> 时间：2013-03-04T11:52:11.377
> 
> 标签：amazon-ec2, chef-infra, knife

我已经通过命令**Knife node create node1**在我的笔记本电脑中创建了节点（配置为 chef-client）我能够创建节点，但它没有 FQDN 条目，因此它会影响刀操作，例如执行配方以继续，我试图编辑，但没有运气。谁能知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:06:03.353

创建节点后，chef-client 应至少在该节点上成功运行一次，以便自动属性（例如 fqdn）到达 chef-server。

# php - Zend Framework DB >> 带有子查询的查询不起作用

> ID：15200927
> 
> 赞同：1
> 
> 时间：2013-03-04T11:52:14.177
> 
> 标签：php, sql, zend-framework, subquery

我想执行这样的 SQL 查询：

```
SELECT a.*, (time - (SELECT time FROM activity
WHERE time < a.time ORDER BY time DESC LIMIT 1) ) AS czas
FROM activity a WHERE 1 LIMIT 6000 
```

我准备了以下代码 ZF：

```
$activity   = new Application_Model_DbTable_Activity();
$subSql = $activity->select()
//->setIntegrityCheck(false)
->from(array('aw' => 'activity'), array('time'))
->where('time < a.time', '')
->order('time DESC')
->limit(1);

// main query
$sql    = $activity->select()
//->setIntegrityCheck(false)
->from(array('a' => 'activity'), array('a.*', 'czas' => new Zend_Db_Expr('(a.time - (' . $subSql . '))')))
->where(1)
->limit(6000);

$this->rows = $bugs->fetchAll($sql); 
```

不幸的是，这个解决方案不起作用。我应该改进什么？

对不起我的英语不好

# php - MySQL：具有重复任务的运输规划器

> ID：15200929
> 
> 赞同：4
> 
> 时间：2013-03-04T11:52:21.770
> 
> 标签：php, mysql, frequency, project-planning

我正在研究交通规划师。我的 MySQL(i)/PHP 知识是（非常）基础的。

我想显示一个包含某一天所有任务的 HTML 表格。但问题是某些任务需要重复（直到我删除整个任务），所以任务的频率如下：一次、每天、每周、每两周和每月。

所以当然，当我在星期一以每周的频率添加新任务时，该任务必须在每个星期一返回到我的表中。

我应该结合类似的东西：

```
SELECT * FROM planner 
         WHERE frequency = `once` 
         AND date = CURDATE()

SELECT * FROM planner 
         WHERE frequency = `daily/weekly/two-weekly/monthly/yearly` 
         AND day = DAYOFWEEK(CURDATE())
         AND date + INTERVAL 1 DAY/1 WEEK/2 WEEK/1 MONTH 
```

如果是这样，那怎么办？

希望可以有人帮帮我。

**编辑：**

对于一次、每日和每周的任务，这样的查询（可能仍然很糟糕）将执行以下操作：

```
(SELECT *
        FROM planner 
        WHERE frequency = 'once' 
        AND date = NOW())
UNION
(SELECT *
        FROM planner 
        WHERE frequency = 'daily' 
        AND date + INTERVAL 1 DAY)
UNION
(SELECT *
        FROM planner
        WHERE frequency = 'weekly' 
        AND day = DAYOFWEEK(CURDATE()) 
        AND date + INTERVAL 1 WEEK) 
```

虽然，对于“两周一次”和“每月一次”INTERVAL + 2 WEEK / 1 MONTH，每周都会返回**结果**。如何解决这个问题？

**编辑：**

我不在表中使用有效性列，因为我不知道过去的过期/无效任务。我将笔记本电脑年份更改为 2040 年，确实存在 mysql 错误。我改变了计划，我认为重复任务最好在一年内有效，可以选择删除或延长一年。然后我也忘了提到，当我在星期一创建一个每月频率的任务时，该任务在下个月的第一个星期一返回到我的表中。当我尝试您的解决方案时，每天都会出现“一次”频率的任务。

**编辑**

@SparKot，通常每月查看任务的频率，例如，2013-03-05，下一次是 2013-04-05、2013-05-05 等等。尽管在此计划器中设置了每月任务示例，但 2013-03-05 星期二应该会在下个月的第一个星期二重新出现（四月：2013-04-02，五月：2013-05-07，六月：2013-06- 04)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:40:39.193

假设表中有有效性列：

```
SELECT *
  FROM planner
 WHERE     now() >= valid_from
       AND now() <= valid_to
       AND (frequency = 'daily'
            OR (frequency = 'once' AND date(now()) = date)
            OR (frequency = 'weekly' AND 0 = (abs(datediff(now(), date)) % 7))
            OR (frequency = 'two-weekly' AND 0 = (abs(datediff(now(), date)) % 14))
            OR (frequency = 'monthly' 
                AND ceil(dayofmonth(now())/7) = ceil(dayofmonth(date)/7)
                AND dayofweek(now()) = dayofweek(date))
            ); 
```

没有有效性列：您可能会得到尚未删除的过期/无效的过去任务：

```
SELECT *
  FROM planner
 WHERE (frequency = 'daily'
            OR (frequency = 'once' AND date(now()) = date)
            OR (frequency = 'weekly' AND 0 = (abs(datediff(now(), date)) % 7))
            OR (frequency = 'two-weekly' AND 0 = (abs(datediff(now(), date)) % 14))
            OR (frequency = 'monthly' 
                AND ceil(dayofmonth(now())/7) = ceil(dayofmonth(date)/7)
                AND dayofweek(now()) = dayofweek(date))
            ); 
```

# android - 在 android 中使用 xfermode 从图像中剪辑圆形

> ID：15200931
> 
> 赞同：1
> 
> 时间：2013-03-04T11:52:29.127
> 
> 标签：android, view, imageview, xfermode

我需要`ImageView`在 Android 中创建一个圆形。现在我使用`Canvas.clipPath()`但它不支持硬件加速。当然我使用`View.LAYER_TYPE_SOFTWARE`这个视图。

```
public class RoundedCornerImageView extends MaptrixImageView
{   
    private final Path clipPath = new Path();

    public RoundedCornerImageView(Context context)
    {
        this(context, null);
    }

    @SuppressLint("NewApi")
    public RoundedCornerImageView(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        if (Build.VERSION.SDK_INT >= 11) {
               setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        }
    }

    @Override
    protected void onDraw(Canvas canvas) 
    {   
        float radius = ((float) getWidth()) / 2;

        clipPath.reset();
        clipPath.addCircle(radius, radius, radius, Path.Direction.CW);

        canvas.clipPath(clipPath);
        super.onDraw(canvas);
    }
} 
```

但我想在这个视图中使用硬件加速。我可以`XferMode`为此使用课程`ImageView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:42:53.993

XferMode 与硬件加速一起工作。但它有一些限制：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported](http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported)

但是，如果您仍想使用 clipPath，您将无法使用硬件加速。

# c# - 从文件中读取特定字节数据

> ID：15200932
> 
> 赞同：-2
> 
> 时间：2013-03-04T11:52:31.820
> 
> 标签：c#, vb.net

我有一个 8mb 的文件，其中包含一些记录。我想从特定位置读取特定记录。我有文件中每条记录的开始和结束字节索引。

我的问题是如何使用文件对话框来选择特定文件并创建一个读取文件然后将特定记录存储在文本框中的函数。

我对如何一次读取所有文本框中的所有记录也有疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:21:47.870

首先，我需要一个我的文件值的索引，假设***产品 id =id09876543** location =india*然后**id09876543 的索引值为“12 到 23”** ，然后我将在函数调用中传递 12 和 23。

1.  使一个名为“read_value”的用户定义函数以整数形式传递其中的 2 参数并将函数作为字符串，即它将以字符串格式返回值。

2.  在您想要答案的特定位置调用该函数。

像这样。

1)

公共函数 read_value(ByVal strat As Integer, ByVal end1 As Integer) As String

```
 Dim fs As FileStream = New FileStream(f_name, FileMode.Open, FileAccess.Read)

    Dim n As Integer = 0
    Dim s As String = Nothing
    Dim i As Integer = 0
    Dim l As Long = strat
    fs.Seek(l, SeekOrigin.Begin)
    'Seek(strat)
    For i = strat To end1
        n = fs.ReadByte()
        s = s + Convert.ToChar(n)
    Next
    Return s
End Function 
```

Dim ofd1 As New OpenFileDialog ' Dim file_name As String Try If ofd1.ShowDialog = Windows.Forms.DialogResult.OK Then f_name = ofd1.FileName

```
 product_id_txt.Text = read_value(12, 23)
            location_txt.Text = read_value(34, 50)
            form.Show()
        End If
    Catch ex As Exception
        MessageBox.Show("File Not Found")
    End Try 
```

此代码的输出是 label----->Product Id: id09876543 <---- 这是我的文本框值

# bundle - 如何在包中使用使用 MacPorts 构建的库

> ID：15200939
> 
> 赞同：2
> 
> 时间：2013-03-04T11:52:55.433
> 
> 标签：bundle, macports

我有 32 位 Mono 应用程序，它依赖于几个用 macports 构建的外部库。它们位于 /opt/loca/lib 中，我需要找到一种方法将它们放入 bundle 目录而不破坏它们。

是否可以将 macports 库依赖路径从绝对更改为相对？

# java - 休眠插入查询

> ID：15200940
> 
> 赞同：7
> 
> 时间：2013-03-04T11:52:55.590
> 
> 标签：java, hibernate, hql, hibernate-mapping, insert-query

在插入休眠查询期间，我将一些字段作为表类对象传递，这些字段我已映射到相应的表，查询工作正常，但查询变得太大，因为这些映射的对象中的每一个都单独更新到其相应的表。

谁能告诉我这是否是正确的插入方式以及为什么我会收到这些更新查询。

```
Hibernate: insert into ortms.tool_modified_his_tbl (tool_desc, old_tool_desc, connec1, old_connec1, connec2, old_connec2, landed_cost, old_landed_cost, acqui_date, old_acqui_date, manuf_date, old_manuf_date, price_ref, old_price_ref, op_rate_cost, old_op_rate_cost, stb_rate_cost, old_stb_rate_cost, day_rate1_cost, old_day_rate1_cost, day_rate2_cost, old_day_rate2_cost, packermilling_cost, old_packermilling_cost, sale_value, old_sale_value, status, created_date, modified_date, tool_id, tool_modi_reas_id, tool_modi_usr_id, supplier_id, old_supplier_id, tc_status_id, old_tc_status_id, pricing_type_id, old_pricing_type_id, old_ownership_id, ownership_id, unit_id, old_unit_id, branch_id, old_branch_id, reta_tool_choice_id, old_reta_tool_choice_id, non_ser_tol_cho_id, old_non_ser_tol_cho_id, charge_by_id, old_charge_by_id, size_range_id, old_size_range_id, rack_id, old_rack_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: update ortms.master2_tool_master set tool_id=?, tool_desc=?, connec1=?, connec2=?, landed_cost=?, acqui_date=?, manuf_date=?, price_ref=?, op_rate_cost=?, stb_rate_cost=?, day_rate1_cost=?, day_rate2_cost=?, packermilling_cost=?, sale_value=?, uploaded_filename=?, uploaded_file=?, status=?, created_date=?, modified_date=?, supplier_id=?, tc_status_id=?, pricing_type_id=?, unit_id=?, reta_tool_choice_id=?, non_ser_tol_cho_id=?, branch_id=?, charge_by_id=?, size_range_id=?, rack_id=?, ownership_id=? where id=?
Hibernate: update ortms.table_users set user_code=?, username=?, password=?, first_name=?, last_name=?, status=?, created_date=?, modified_date=?, dept_id=?, branch_id=? where id=?
Hibernate: update ortms.table_choice_select set choice_name=?, status=?, created_date=?, modified_date=? where id=?
Hibernate: update ortms.master2_toolmast_chargeby set chargeby=?, status=?, created_date=?, modified_date=? where id=?
Hibernate: update ortms.master2_sizerange set size_code=?, size_range=?, status=?, created_date=?, modified_date=?, grp_lev3_id=? where id=?
Hibernate: update ortms.master2_group_level3 set grp_lev3_name=?, grp_lev3_desc=?, created_date=?, modified_date=?, status=?, grp_lev2_id=? where id=?
Hibernate: update ortms.master2_group_level2 set grp_lev2_name=?, grp_lev2_desc=?, created_date=?, modified_date=?, status=?, grp_lev1_id=? where id=?
After calling action: master2.toolmaster.ToolMaster Time taken: 1234 ms 
```

**更新 2**

**ToolModifiedHisTbl.hbm.xml**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 2, 2013 9:29:05 PM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="mappingfiles.ToolModifiedHisTbl" table="tool_modified_his_tbl" catalog="ortms">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>

        <property name="toolDesc" type="string">
            <column name="tool_desc" length="65535" />
        </property>
        <property name="oldToolDesc" type="string">
            <column name="old_tool_desc" length="65535" />
        </property>
        <property name="connec1" type="string">
            <column name="connec1" length="60" />
        </property>
        <property name="oldConnec1" type="string">
            <column name="old_connec1" length="60" />
        </property>
        <property name="connec2" type="string">
            <column name="connec2" length="60" />
        </property>
        <property name="oldConnec2" type="string">
            <column name="old_connec2" length="60" />
        </property>

        <property name="landedCost" type="string">
            <column name="landed_cost" length="20" />
        </property>
        <property name="oldLandedCost" type="string">
            <column name="old_landed_cost" length="20" />
        </property>
        <property name="acquiDate" type="date">
            <column name="acqui_date" length="10" />
        </property>
        <property name="oldAcquiDate" type="date">
            <column name="old_acqui_date" length="10" />
        </property>
        <property name="manufDate" type="date">
            <column name="manuf_date" length="10" />
        </property>
        <property name="oldManufDate" type="date">
            <column name="old_manuf_date" length="10" />
        </property>

        <property name="priceRef" type="string">
            <column name="price_ref" length="20" />
        </property>
        <property name="oldPriceRef" type="string">
            <column name="old_price_ref" length="20" />
        </property>
        <property name="opRateCost" type="string">
            <column name="op_rate_cost" length="20" />
        </property>
        <property name="oldOpRateCost" type="string">
            <column name="old_op_rate_cost" length="20" />
        </property>
        <property name="stbRateCost" type="string">
            <column name="stb_rate_cost" length="20" />
        </property>
        <property name="oldStbRateCost" type="string">
            <column name="old_stb_rate_cost" length="20" />
        </property>
        <property name="dayRate1Cost" type="string">
            <column name="day_rate1_cost" length="20" />
        </property>
        <property name="oldDayRate1Cost" type="string">
            <column name="old_day_rate1_cost" length="20" />
        </property>
        <property name="dayRate2Cost" type="string">
            <column name="day_rate2_cost" length="20" />
        </property>
        <property name="oldDayRate2Cost" type="string">
            <column name="old_day_rate2_cost" length="20" />
        </property>
        <property name="packermillingCost" type="string">
            <column name="packermilling_cost" length="20" />
        </property>
        <property name="oldPackermillingCost" type="string">
            <column name="old_packermilling_cost" length="20" />
        </property>
        <property name="saleValue" type="string">
            <column name="sale_value" length="20" />
        </property>
        <property name="oldSaleValue" type="string">
            <column name="old_sale_value" length="20" />
        </property>

        <property name="status" type="string">
            <column name="status" length="20" />
        </property>
        <property name="createdDate" type="timestamp">
            <column name="created_date" length="19" />
        </property>
        <property name="modifiedDate" type="timestamp">
             <column name="modified_date" length="19" />
        </property>

        <many-to-one class="mappingfiles.Master2ToolMaster" unique="true" name="toolId" column="tool_id" cascade="all" />
        <many-to-one class="mappingfiles.TableModifiedReason" unique="true" name="toolModiReasId" column="tool_modi_reas_id" cascade="all" />

        <many-to-one class="mappingfiles.TableUsers" unique="true" name="toolModiUsrId" column="tool_modi_usr_id" cascade="all" />

        <many-to-one class="mappingfiles.TableSupplier" unique="true" name="supplierId" column="supplier_id" cascade="all" />
        <many-to-one class="mappingfiles.TableSupplier" unique="true" name="oldSupplierId" column="old_supplier_id" cascade="all" />

        <many-to-one class="mappingfiles.TableToolContractStatus" unique="true" name="tcStatusId" column="tc_status_id" cascade="all" />
        <many-to-one class="mappingfiles.TableToolContractStatus" unique="true" name="oldTcStatusId" column="old_tc_status_id" cascade="all" />

        <many-to-one class="mappingfiles.Master2PriceType" unique="true" name="pricingTypeId" column="pricing_type_id" cascade="all" />
        <many-to-one class="mappingfiles.Master2PriceType" unique="true" name="oldPricingTypeId" column="old_pricing_type_id" cascade="all" />

        <many-to-one class="mappingfiles.TableOwnership" unique="true" name="oldOwnershipId" column="old_ownership_id" cascade="all" />
        <many-to-one class="mappingfiles.TableOwnership" unique="true" name="ownershipId" column="ownership_id" cascade="all" />

        <many-to-one class="mappingfiles.Master2UnitMaster" unique="true" name="unitId" column="unit_id" cascade="all" />
        <many-to-one class="mappingfiles.Master2UnitMaster" unique="true" name="oldUnitId" column="old_unit_id" cascade="all" />

        <many-to-one class="mappingfiles.TableBranchesCompany" unique="true" name="branchId" column="branch_id" cascade="all" />
        <many-to-one class="mappingfiles.TableBranchesCompany" unique="true" name="oldBranchId" column="old_branch_id" cascade="all" />

        <many-to-one class="mappingfiles.TableChoiceSelect" unique="true" name="retaToolChoiceId" column="reta_tool_choice_id" cascade="all" />
        <many-to-one class="mappingfiles.TableChoiceSelect" unique="true" name="oldRetaToolChoiceId" column="old_reta_tool_choice_id" cascade="all" />

        <many-to-one class="mappingfiles.TableChoiceSelect" unique="true" name="nonSerTolChoId" column="non_ser_tol_cho_id" cascade="all" />
        <many-to-one class="mappingfiles.TableChoiceSelect" unique="true" name="oldNonSerTolChoId" column="old_non_ser_tol_cho_id" cascade="all" />

        <many-to-one class="mappingfiles.Master2ToolmastChargeby" unique="true" name="chargeById" column="charge_by_id" cascade="all" />
        <many-to-one class="mappingfiles.Master2ToolmastChargeby" unique="true" name="oldChargeById" column="old_charge_by_id" cascade="all" />

        <many-to-one class="mappingfiles.Master2Sizerange" unique="true" name="sizeRangeId" column="size_range_id" cascade="all" />
        <many-to-one class="mappingfiles.Master2Sizerange" unique="true" name="oldSizeRangeId" column="old_size_range_id" cascade="all" />

        <many-to-one class="mappingfiles.Master2Racks" unique="true" name="rackId" column="rack_id" cascade="all" />
        <many-to-one class="mappingfiles.Master2Racks" unique="true" name="oldRackId" column="old_rack_id" cascade="all" />

    </class>
</hibernate-mapping> 
```

**表用户.hbm.xml**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Jan 13, 2013 4:26:04 PM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="mappingfiles.TableUsers" table="table_users" catalog="ortms">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="userCode" type="string">
            <column name="user_code" length="60" />
        </property>
         <property name="username" type="string">
            <column name="username" length="50" />
        </property>
         <property name="password" type="string">
            <column name="password" length="50" />
        </property>
        <property name="firstName" type="string">
            <column name="first_name" length="60" />
        </property>
        <property name="lastName" type="string">
            <column name="last_name" length="60" />
        </property>
        <property name="status" type="string">
            <column name="status" length="20" />
        </property>
        <property name="createdDate" type="timestamp">
            <column name="created_date" length="19" />
        </property>
        <property name="modifiedDate" type="timestamp">
            <column name="modified_date" length="19" />
        </property>

        <many-to-one class="mappingfiles.TableDepartments" unique="true" name="deptId" column="dept_id" cascade="all" />
        <many-to-one class="mappingfiles.TableBranchesCompany" unique="true" name="branchId" column="branch_id" cascade="all" />
    </class>
</hibernate-mapping> 
```

**更新 3**

我已经`cascade="all"`从所有映射中删除了属性....现在我得到了一个更新，一切都清楚了

```
Hibernate: insert into ortms.tool_modified_his_tbl (tool_desc, old_tool_desc, connec1, old_connec1, connec2, old_connec2, landed_cost, old_landed_cost, acqui_date, old_acqui_date, manuf_date, old_manuf_date, price_ref, old_price_ref, op_rate_cost, old_op_rate_cost, stb_rate_cost, old_stb_rate_cost, day_rate1_cost, old_day_rate1_cost, day_rate2_cost, old_day_rate2_cost, packermilling_cost, old_packermilling_cost, sale_value, old_sale_value, status, created_date, modified_date, tool_id, tool_modi_reas_id, tool_modi_usr_id, supplier_id, old_supplier_id, tc_status_id, old_tc_status_id, pricing_type_id, old_pricing_type_id, old_ownership_id, ownership_id, unit_id, old_unit_id, branch_id, old_branch_id, reta_tool_choice_id, old_reta_tool_choice_id, non_ser_tol_cho_id, old_non_ser_tol_cho_id, charge_by_id, old_charge_by_id, size_range_id, old_size_range_id, rack_id, old_rack_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: update ortms.master2_tool_master set tool_id=?, tool_desc=?, connec1=?, connec2=?, landed_cost=?, acqui_date=?, manuf_date=?, price_ref=?, op_rate_cost=?, stb_rate_cost=?, day_rate1_cost=?, day_rate2_cost=?, packermilling_cost=?, sale_value=?, uploaded_filename=?, uploaded_file=?, status=?, created_date=?, modified_date=?, supplier_id=?, tc_status_id=?, pricing_type_id=?, unit_id=?, reta_tool_choice_id=?, non_ser_tol_cho_id=?, branch_id=?, charge_by_id=?, size_range_id=?, rack_id=?, ownership_id=? where id=? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:23:22.507

不需要的更新来自“级联所有”设置。您可能希望根据需要正确配置它。例如，看看这里：[http ://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/](http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:15:50.657

在课堂上使用`dynamic-insert=true`和`dynamic-update=true`

在此之后，您的查询将很短。它将仅插入和更新指定的非空值。

# python - AppEngine NDB 属性验证

> ID：15200952
> 
> 赞同：0
> 
> 时间：2013-03-04T11:53:30.503
> 
> 标签：python, google-app-engine, app-engine-ndb, wtforms, google-cloud-endpoints

我想知道验证 NDB 实体属性的最佳方法是什么：

*   日期必须在未来
*   等级（整数属性）必须在 1 到 10 之间
*   对另一个实体的引用必须具有某些属性值（例如 book.category.active 必须为 True）

我还使用 WTForms 来验证提交的请求，但我也想在较低级别上执行验证，例如数据存储实体本身。

所以基本上我正在寻找的是在数据存储实体上调用验证以查看它是否有效。如果它有效，我可以将实体放入数据存储区，但如果它无效，我想检索无效属性，包括未成功验证的应用验证器。

WTForms 可能不够用的另一个原因是我正在使用新的 Cloud Endpoints。在这个模型中，我收到的是实际实体而不是 http 请求。

其他 AppEngine 用户如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:52:18.043

不是这总是最好的解决方案，但你可以自己动手。只需使用 reg-exs/mins 和 maxs 等预先定义一堆属性。看起来你的属性很简单，不会太难。

# javascript - 在 Razor 中使用 Jquery

> ID：15200957
> 
> 赞同：1
> 
> 时间：2013-03-04T11:53:40.397
> 
> 标签：javascript, jquery, html, razor

我正在尝试将字符串从 javascript 传递给剃须刀 ActionLink

`string filtering =$("#Hello").val();`

`@Html.ActionLink(Name, ControllerName, new { sort = columm, order = orderby, filters = filtering })`

但是我无法访问此变量，我已经尝试过`@:filtering`，或者`"@filtering"`无论如何都不起作用，

如何将变量传递给控制器​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:02:47.260

我可以做到的方式是将Url传递给控制器 `window.location = window.location.protocol + "//" + location.host + "/Name/Controller/" + "?sort=sort" + "&order=order" + "&page=page" + "&filters=" + filter;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:23:36.650

您必须使用 jQuery 手动将参数添加到 URL 以分配`href`锚标记的属性。

首先，让我们去掉你的过滤器参数`ActionLink`并给它一个ID（这样我们就可以在jQUery中引用它）：

```
@Html.ActionLink(Name, Controller, new { sort = columm, order = orderby }, new { id = "myLink" }) 
```

然后执行以下 jQuery：

```
$(function () {
    var newLink = $("#myLink").attr("href") + "?filter= " + $("#Hello").val();
    $("#myLink").attr("href", newLink); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:12:45.513

如果您想将数据发送或发布到控制器的操作，那么您可以试试这个...

```
 <input type="submit" id="btnFilter" value="Filter" name="btnFilter" />

$('#btnFilter').click(function () {

        var sort = sortValue;
        var order = orderValue;
        var filter= filterValue;

   $.ajax({
            type: 'POST',
            url: '@Url.Action(ActionName, ControllerName)',
            data:'{"sort":"' + sort+ '","order":"' + order+ '","filter":"' + filter+ '"}',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (result) {

            },
            error: function () {

            }
        });

}); 
```

然后....在控制器动作中

```
public ActionResult ActionName(string sort ,string order , string filter)
{
    // do Something here....
} 
```

# javascript - html中的表单提交触发器

> ID：15200960
> 
> 赞同：3
> 
> 时间：2013-03-04T11:53:43.660
> 
> 标签：javascript, jquery, html

在 HTML 中，可以通过以下方式提交表单

*   点击提交按钮
*   当焦点位于提交按钮上时按 Enter
*   通过在输入字段上按 enter

有没有办法找出提交表单的三种方法中的哪一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:40:17.147

据我所知，HTML 没有任何内置的认知方式。您必须捕获必要的事件并将状态保存在内存中。类似于以下内容：

*   当输入获得焦点时将 a 设置`bool`为 true。失去焦点时将其设置回 false。
*   当按钮获得焦点时将 a 设置`bool`为 true。失去焦点时将其设置回 false。
*   订阅按钮上的点击事件，设置a`bool`为true
*   订阅键盘的keydown事件，检查是否为回车键，设置a`bool`为true。

现在您应该有必要的信息来了解用户为提交表单采取了哪些操作。jQuery 应该能够帮助您处理所有这些事件。

另外，我相信当表单具有焦点（不仅仅是按钮或输入）并且您按 Enter 时，也会提交表单。我不确定这是具有焦点的实际表单，还是表单内的任何控件。

因此，您要实现的目标将需要一些技巧。您确定不能以其他方式为用户提供您想要的体验吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:00:59.820

如果用户按下回车键，我会使用[`keypress`](http://api.jquery.com/keypress/)jquery 的方法来捕获。[`mousedown`](http://api.jquery.com/mousedown/)以及捕获点击的方法。jquery 和 HTML 代码如下所示：

HTML：

```
<form id="myForm">
    Name<input type="text" />
    Address<input type="text" />
    <button id="submitBtn" type="button">Submit</button>
</form> 
```

jQuery代码：

```
$('#submitBtn').keypress(function(event){

    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
        alert('You pressed "enter" key on the submit button');  
    }
    event.stopPropagation();

});

$('#myForm').keypress(function(event){

    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
        alert('You pressed "enter" key in the input field');    
    }
    event.stopPropagation();
});

$('#submitBtn').mousedown(function(event){
   alert('You clicked submit'); 
   event.stopPropagation();
}); 
```

[提琴手](http://jsfiddle.net/q4xbN/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T09:11:25.983

只需对每个动作应用不同的功能。为了防止表单触发其默认操作，您必须在回调函数中放置`return false;`或。`event.preventDeafult();`

看例子：http: [//jsfiddle.net/6krYM/](http://jsfiddle.net/6krYM/)

HTML：

```
<form>
    <input type='text' id='input'>
    <input type='submit' value='submit' id='submit-button'>
</form> 
```

JavaScript：

```
$("#submit-button").click(function(){
    alert("click on submit button");
    return false;
});

$("#input").keypress(function(e){
    if (e.which == 13){
        e.preventDefault();
        alert("press enter in text");
    }
});

$("#submit-button").keypress(function(e){
    if (e.which == 13){
        alert("press enter on button");
    }
    return false;
}); 
```

# c# - 如何使 SQL Server 连接（不是来自文件）出现在 ADO.Net 连接模型向导中？

> ID：15200961
> 
> 赞同：0
> 
> 时间：2013-03-04T11:53:45.997
> 
> 标签：c#, sql-server

我正在尝试在运行 VS 2010 的新开发机器上添加与 Adventureworks 的连接。我正在运行 SSMS 并且能够查询 Adventureworks 数据库。但是，当我单击“新建连接”（* 之后的以下步骤）时，我没有看到 SQL Server 连接作为选项。有没有办法配置 VS 2010 以便它看到我的本地主机连接到 SQL Server？

第二个选项：当我尝试从数据库文件中使用 Microsoft SQL Server 选项时，每当我浏览 Adventureworks 的 mdf 文件时，我总是会看到消息“正在使用的文件”，即使我只有一个 VS 2010 实例打开和 SSMS已经关了。

*   我遵循的步骤是新项目类库右键单击解决方案资源管理器添加新项目 ado.net 实体数据管理新连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:38:46.240

只需输入 localhost 作为服务器名称，测试连接并单击确定。它将被保存，下次它会出现在列表中。

*   数据源类型设置为“Microsoft SQL Server (SqlClient)”

如果这没有在您的屏幕中弹出，请在此处安装 SQl Server Native Client：http: [//msdn.microsoft.com/en-us/sqlserver/ff658533.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff658533.aspx)

# php - 如何在 jquery ui 自动完成中使用 json 传递隐藏的 id？

> ID：15200964
> 
> 赞同：3
> 
> 时间：2013-03-04T11:53:55.910
> 
> 标签：php, jquery, json, jquery-ui, jquery-autocomplete

也许它是重复的，但我找不到解决方案，所以我发布了这个问题。我使用 jquery ui 来自动完成搜索框。它工作正常，但问题是我想使用 id.example 进行搜索：当用户键入 paris 时，我尝试在 mysql 中发送 city_id 进行搜索。所以问题是如何用json传递隐藏的id？
这里的代码：

```
 <input type="text" name="grno" id="grno" class="input" title="<?php echo $lng['vldgrno'];?> 
```

`jquery code:`

```
<script>
 $(function() {
function split( val ) {
  return val.split( /,\s*/ );
}
function extractLast( term ) {
  return split( term ).pop();
}

$( "#grno" )
  // don't navigate away from the field on tab when selecting an item
  .bind( "keydown", function( event ) {
    if ( event.keyCode === $.ui.keyCode.TAB &&
        $( this ).data( "ui-autocomplete" ).menu.active ) {
      event.preventDefault();
    }
  })
  .autocomplete({
    source: function( request, response ) {
      $.getJSON( "pages/search.php", {
        term: extractLast( request.term )
      }, response );
    },
    search: function() {
      // custom minLength
      var term = extractLast( this.value );
      if ( term.length < 1 ) {
        return false;
      }
    },
    focus: function() {
      // prevent value inserted on focus
      return false;
    },
    select: function( event, ui ) {
      var terms = split( this.value );
      // remove the current input
      terms.pop();
      // add the selected item
      terms.push( ui.item.value );
      // add placeholder to get the comma-and-space at the end
      terms.push( "" );
      this.value = terms.join( "," );
      alert(data.id);
      return false;
    }
  });
  });
  </script> 
```

`autocomplete.php :`

```
<?php
  mysql_connect('localhost','root','');
 mysql_select_db('school');
 $return_arr = array();
 $term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends
 //create select query
  $query = "select `grno`,`first_name`,`student_id` from `tbl_student` where `grno` like '%".$term."%' or `first_name` like '%".$term."%'";
  // Run the query
  $result = mysql_query ($query);
  $array = array();
 while($obj = mysql_fetch_array($result)){
 $array['name'] = $obj['first_name']."(".$obj['grno'].")";
 array_push($return_arr,$obj['first_name']."(".$obj['grno'].")");
 }  
 $json = json_encode($return_arr);
 echo $json;
 ?> 
```

so.如何传入`student_id`，`autocomplete.php`比如标签和值。{label='xyz' value='1'}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:16:13.220

在 autocomplete.php 中替换此代码

```
array_push($return_arr,array("value"=>$obj['student_id'],"label"=>$obj['first_name']."(".$obj['grno'].")")); 
```

在你的脚本中改变这个

```
 terms.push( ui.item.label );
 $( "#stud_id" ).val( ui.item.value ); 
```

希望，这就是你找到的。

# ios - 绑定到 MvvmCross 中的 UIBarButtonItem 事件

> ID：15200966
> 
> 赞同：3
> 
> 时间：2013-03-04T11:54:01.507
> 
> 标签：ios, mvvmcross, xamarin.ios

`MvvmCross`创建从 a`UIBarButtonItem`到 a的绑定的正确方法是`MvxCommand`什么？

这对我不起作用->

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();
    this.AddBindings (new Dictionary<object, string> (){
       {MyButton, "{'Clicked':{'Path':'MyCommand'}}"}
    });
} 
```

我在控制台中没有收到任何错误。我可以通过避免绑定来解决问题，但你知道，如果所有内容都被绑定，它看起来最好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T13:23:47.293

假设条形按钮 - MyButton - 在您调用 AddBindings 之前已初始化，那么我认为您的代码应该可以工作。

我将会议示例中 WelcomeView 中的代码修改为下面的代码，它似乎可以工作......

```
 var s = new UIBarButtonItem()
        {
            Title = "Click me"
        };

        NavigationItem.SetRightBarButtonItem(s, false);

        this.AddBindings(new Dictionary<object, string>()
            {
                { Button1, "TouchUpInside ShowSponsorsCommand" },               
                { Button2, "TouchUpInside ShowExhibitorsCommand" },             
                { Button3, "TouchUpInside ShowMapCommand" },                
                { Button4, "TouchUpInside ShowAboutCommand" },  
            { s, "Clicked ShowMapCommand" },
            });

        //NavigationItem.SetRightBarButtonItem(new UIBarButtonItem("Tweet", UIBarButtonItemStyle.Bordered, (sender, e) => ViewModel.DoShareGeneral()), false); 
```

抱歉，如果这个“它对我有用”的答案对您的机器没有帮助：/

为了确保它在发布模式下工作，您可能需要在`UIBarButtonItem.Clicked`某处添加一些代码。

如果您想从绑定中获得更多跟踪，那么您可以设置一个诊断跟踪级别（但这可能会变得非常冗长）。

可能值得检查您`MyCommand`是否被呼叫但不知何故失败 - 这尤其可能发生在电子邮件、电话、推文等并不总是在模拟器上工作的事情上。

# android - 列表项的背景拉伸超过高度？

> ID：15200967
> 
> 赞同：0
> 
> 时间：2013-03-04T11:54:01.610
> 
> 标签：android, android-listview, custom-adapter, android-drawable

我有一个带有自定义适配器（平铺）设计的列表视图。一切都应该正常工作，但问题是尽管我给 layout_height 一个固定值，但 til （listview 项目背景）拉伸太多。这是代码：

这是自定义磁贴的 xml。注意 85dp 的固定高度。背景可绘制不应超出此高度？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="85dp"
    android:background="@drawable/tile_job" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="9dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="13dp"
        android:text="Title" />

    <TextView
        android:id="@+id/pickup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="38dp"
        android:layout_alignLeft="@+id/title"
        android:textSize="11dp"
        android:text="Pickup Address" />

    <TextView
        android:id="@+id/destination"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/pickup"
        android:layout_below="@+id/pickup"
        android:layout_marginTop="6dp"
        android:textSize="11dp"
        android:text="Destination Address" />

    <TextView
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/destination"
        android:layout_alignParentRight="true"
        android:layout_marginRight="40dp"
        android:text="Time"
        android:textSize="11dp" />

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/time"
        android:layout_below="@+id/time"
        android:text="Date"
        android:layout_marginTop="7dp"
        android:textSize="11dp" />

</RelativeLayout> 
```

现在我在一个简单的列表视图中使用它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/app_bg" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/strip_top" >

        <TextView
            android:id="@+id/strip_text"
            style="@style/TopStripText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="Locate" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="280dp"
        android:layout_height="440dp"
        android:layout_below="@+id/relativeLayout1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:background="@drawable/bg_booking" >

        <ListView
            android:id="@+id/activebookings"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" >
        </ListView>
    </RelativeLayout> 
```

是什么导致瓷砖垂直过度拉伸？

===========

**编辑** 这是请求的代码：

布局膨胀：

```
public class JobAdapter extends BaseAdapter
{
    private ArrayList<Job> bookingArrayList;
    private LayoutInflater mInflater;

    public JobAdapter(Context context, ArrayList<Job> results)
    {
        bookingArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount()
    {
        return bookingArrayList.size();
    }

    @Override
    public Object getItem(int arg0)
    {
        return bookingArrayList.get(arg0);
    }

    @Override
    public long getItemId(int position)
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder;
        if (convertView == null)
        {
            convertView = mInflater.inflate(R.layout.tile_job, null);
            holder = new ViewHolder();
            holder.date = (TextView) convertView.findViewById(R.id.date);
            holder.time = (TextView) convertView.findViewById(R.id.time);
            holder.pickup = (TextView) convertView.findViewById(R.id.pickup);
            holder.destination = (TextView) convertView.findViewById(R.id.destination);
            holder.title = (TextView) convertView.findViewById(R.id.title);

            convertView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.date.setText(bookingArrayList.get(position).getDate());
        holder.time.setText(bookingArrayList.get(position).getTime());
        holder.pickup.setText(bookingArrayList.get(position).getPickup());
        holder.destination.setText(bookingArrayList.get(position).getDestination());
        holder.title.setText(bookingArrayList.get(position).getTitle());

        return convertView;
    }

    static class ViewHolder
    {
        TextView date;
        TextView time;
        TextView pickup;
        TextView destination;
        TextView title;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:53:10.760

您使用以下内容创建行：

```
convertView = mInflater.inflate(R.layout.tile_job, null); 
```

现在试试这个：

```
convertView = mInflater.inflate(R.layout.tile_job, parent, false); 
```

如果您不附加父布局，则 xml 中的布局参数将被忽略。您设置 false 因为您没有立即将视图附加到根目录（这在返回视图时自动发生）。[您可以在此处](https://stackoverflow.com/a/5027921/969325)阅读有关此问题的更多信息。

# perl - perl中的日期转换

> ID：15200970
> 
> 赞同：0
> 
> 时间：2013-03-04T11:54:12.733
> 
> 标签：perl, perl-module

我正在使用 perl 来访问一个数据库，我从中获取 DD-MON-YYYY 格式的日期。我需要执行 2 个操作：

1.  将此格式转换为 MM/DD/YYYY 格式。
2.  将此日期与两个日期进行比较，以查看它是否在该时间范围内。

    我的 $chdate = '15-Feb-2013';

    子get_stats {

    ```
    my %map = ( 'Jan' => '01', 'Feb' => '02', 'Mar' => '03', 'Apr' => '04',
                'May' => '05', 'Jun' => '06', 'Jul' => '07', 'Aug' => '08',
                'Sep' => '09', 'Oct' => '10', 'Nov' => '11', 'Dec' => '12');

        $chdate =~ s/(..)-(...)-(....)/$map{$2}\/$1\/$3/;
        print "New date: $chdate"; 
    ```

    }

如何执行 (2) 操作？

我有一个旧版本的 Perl（没有 Time::Piece 模块），我没有更新的权限:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:21:05.283

我建议您使用该[`Time::Piece`](https://metacpan.org/module/Time%3a%3aPiece)模块。自 Perl5 v9.5 以来它一直是核心模块，因此可能不需要安装。

只需使用解码日期`strptime`并使用重新编码`strftime`。

```
use strict;
use warnings;

use Time::Piece;

my $date = '28-jul-1986';

print Time::Piece->strptime($date, '%d-%b-%Y')->strftime('%m/%d/%Y'); 
```

**输出**

```
07/28/1986 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:16:27.267

If you convert your dates to [Time::Piece](https://metacpan.org/module/Time%3a%3aPiece) object then you can compare them using the standard numeric comparison operators. So you could do something like this.

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use Time::Piece;

my $start_date_str = '1-mar-2013';
my $end_date_str   = '31-mar-2013';
my $date_to_test_str = '4-mar-2013';

my $in_fmt  = '%d-%b-%Y';
my $out_fmt = '%m/%d/%y'; # Warning: Illogical format!

my $start_date_tp = Time::Piece->strptime(
  $start_date_str, $in_fmt
);
my $end_date_tp = Time::Piece->strptime(
  $end_date_str, $in_fmt
);
my $date_to_test_tp = Time::Piece->strptime(
  $date_to_test_str, $in_fmt
);

print $date_to_test_tp->strftime($out_fmt), ' is ';
unless ($start_date_tp <= $date_to_test_tp and
    $date_to_test_tp <= $end_date_tp) {
      print ' not ';
}
say 'between the two test dates'; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T02:23:42.283

For (2) you can do this:

```
sub dateAsNumber # Arg mm/dd/yyyy - Converts to a number to be compared
{
   $_[0]=~m%(\d\d)/(\d\d)/(\d\d\d\d)%;
   return (($3 * 400 + $1) * 40 + $2);
}

$test = &dateAsNumber($testDateAsString);

if (&dateAsNumber($startDateAsString) < $test &&
    &dateAsNumber($endDateAsString) > $test)
{
   print "$test date is between $startDateAsString and $endDateAsString\n";
}
else
{
   print "$test date is NOT between $startDateAsString and $endDateAsString\n";
} 
```

# iphone - 如何检测设备令牌是否已过时？

> ID：15200972
> 
> 赞同：0
> 
> 时间：2013-03-04T11:54:18.133
> 
> 标签：iphone, ios, push-notification, push, apple-push-notifications

我有一个带有设备令牌的大型数据库。

我想我的很多基础都是过时的令牌。

如何检测设备令牌是否已过时？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:42:45.637

正是出于这个原因，Apple 提供了反馈服务。您应该在数据库中设置批处理或存储过程，定期获取无效令牌并在数据库中删除或标记为不活动。

[APNS : 反馈服务](http://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)

# html - div 图像对齐

> ID：15200976
> 
> 赞同：1
> 
> 时间：2013-03-04T11:54:35.667
> 
> 标签：html, alignment

当我调整浏览器窗口的大小时，排列在 div 中的图像不能很好地对齐（左）。

这是我网站的网址； [http://www.robinkleijnen.com/index.php](http://www.robinkleijnen.com/index.php)

我希望任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:05:15.580

它是导致它的第二张图像的高度，因为它比其他图像小 1 像素，所以当它们全部浮动时，第三张图像就不能一直越过。像其他人一样将图像高度增加到 174px 解决了它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T12:18:34.703

我会尝试删除图像上的浮动 - 这里似乎不需要浮动

# date - 带有日期列的 CellTable

> ID：15200979
> 
> 赞同：1
> 
> 时间：2013-03-04T11:54:46.120
> 
> 标签：date, gwt, gwt-celltable

我正在尝试构建一个用于时间跟踪的 CellTable 小部件。第一列必须以下列形式表示当月的所有天数

```
Fri, 1
Sat, 2
Sun, 3
Mon, 4
Tue, 5
… 
```

等到月底（28 -31 行）。

我的代码如下所示：

```
Column<Rec,String> dayColumn = new Column<Rec,String>(new TextCell())
{   
    @Override
    public String getValue(Rec rec) 
    {
        dayNr = DateTimeFormat.getFormat( "EE,d" ).format(new Date());
        return dayNr;    
    }
}; 

table.addColumn(dayColumn, "Date"); 
```

所以我只能在所有单元格中看到此列中的今天日期。如何在此列中的每个月（1...28/30/31）在其自己的单元格中获取所有天数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:14:19.620

如果您准备了带有 Date 变量的 Rec 项目列表，那将是理想的。

## 用日期声明一个 Rec pojo

```
Class Rec{
 Date date;
 //getter and setters.
} 
```

## 填充 Rec 项目列表

```
List<Rec> recItems = new ArrayList<Rec>();

Date now = new Date();
int nowMonth = now.getMonth();
int nowYear = now.getYear();
List<Date> listOfDatesInThisMonth = new ArrayList<Date>();
Date beginningOfMonth = new Date(nowYear,nowMonth,1);
Date beginningOfNextMonth = new Date(nowYear,nowMonth+1,1);
Date start = beginningOfMonth;
while(start.before(beginningOfNextMonth)){
 listOfDatesInThisMonth.add(start);
 start = new Date(nowYear,nowMonth,start.getDate()+1);
}
for(Date date:listOfDatesInThisMonth){
 Rec recItem = new Rec();
 recItem.setDate(date);
 recItems.add(recItem );
} 
```

## 渲染

```
Column<Rec,String> dayColumn = new Column<Rec,String>(new TextCell())
{   
    @Override
    public String getValue(Rec rec) 
    {
        dayNr = DateTimeFormat.getFormat( "EE,d" ).format(rec.getDate());
        return dayNr;    
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:28:00.043

像这样的东西？？

```
private static String getMonthsString() {
StringBuffer buffer = new StringBuffer();
Date date = new Date() ;
 int i = date.getMonth();
   if(i==2)//feb {
    for (int j = 0; j < 28; j++) {
       buffer.append(DateTimeFormat.getFormat( "EE,d" ).format( new Date(new Date().getTime() + ((1000 * 60 * 60 * 24*j)))));   
                }
            return buffer.toString(); 

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:39:21.390

在单元格表中，每一行都是一条记录。一个月至少有28天。因此，您必须建立至少 28 条记录并在单元格表上执行 setList 或 setData。下面给出了一个简短的代码片段 -

```
Date currentDate = new Date();

Map<Integer, String> daysMap = new HashMap<Integer, String>();
daysMap .put(0,"Sunday");
.
.
daysMap .put(6, "Saturday");

Map<Integer, Integer> monthMap = new HashMap<Integer, Integer>();
monthMap.put(0, 31);
.
.
monthMap.put(0, 31);

List<Rec> list = new ArrayList<Rec>();

for(int i=1;i <= monthMap.get(currentDate.getMonth());i++)
{
       list.add(new Rec( daysMap.get(currentDate.getDay())+" , "+ i ));
}

Column<Rec,String> dayColumn = new Column<Rec,String>(new TextCell())
{   
    @Override
    public String getValue(Rec rec) 
    {
        return rec.getDayDateString(); // which returns Friday, 1 etc.   
    }
}; 

table.addColumn(dayColumn, "Date");

ListDataProvider<Rec> listDataProvider = new ListDataProvider<Rec>();

listDataProvider.addDataDisplay(table);
listDataProvider.setList( list ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T19:54:16.817

您可以使用 java.util.Calendar 在服务器端获取每个月的日期

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T04:04:14.433

显示日期的可滚动列表是可怕的可用性。我建议改用 DatePickerCell。它使用日期选择器，因此用户只需单击日期即可选择它。

# ios - 在 iOS 中以百分比显示 UIProgressView

> ID：15200982
> 
> 赞同：1
> 
> 时间：2013-03-04T11:54:55.077
> 
> 标签：ios, uiprogressview

如何显示`UIProgressView`百分比？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:20:26.107

正如 Vlad 提到的，您可以使用一种方法来更新 progressView 的值及其相关标签。发生任何更新时调用以下方法。

```
- (void)updateProgress
{
    CGFloat stepSize = 0.1f;
    [self.progressView setProgress:self.progressView.progress+stepSize];
    self.progressLabel.text = [NSString stringWithFormat:@"Completed : %.0f",self.progressView.progress*100];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:59:01.390

进度指示器控件不提供同时显示进度百分比的选项。为了实现这一点，一种解决方案是在进度条下方/上方添加一个标签，并且在每一步刷新进度指示器视图上的进度时，您还可以更新标签上的字符串值以显示加载百分比。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T11:59:45.600

iOS SDK 中已经有一个可用的小部件 - [UIProgressView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html)

你可以在哪里设置和获取它的属性：*progress*

希望这可以帮助你。

# python - 使用python在cmd中打印UTF-8字符

> ID：15200990
> 
> 赞同：3
> 
> 时间：2013-03-04T11:55:22.640
> 
> 标签：python, windows, utf-8, character-encoding, cmd

```
# -*- 编码：utf-8 -*-
打印“ÆØÅ”

```

在 Windows 7 中使用 python 2.7.3 运行上述脚本时，`cmd`我得到以下输出：`powershell``cygwin`

```
├å├ÿ├à 
```

该文件是一个 UTF-8 文件，在我的文本编辑器中运行良好。如何让它打印“ÆØÅ”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:06:38.923

在这里聚会有点晚了，试试

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals
print "ÆØÅ" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:10:29.313

You can force unicode when printing:

```
print u'ÆØÅ' 
```

# bash - 这个语句对期望或 bash 意味着什么？

> ID：15200994
> 
> 赞同：1
> 
> 时间：2013-03-04T11:55:32.207
> 
> 标签：bash, expect

探索期望第 219 页：

```
#!/bin/bash
set kludge { ${1+"$@"}
shift
shift
exec expect -f $0 ${1+"$@"}
}
# rest of script follows 
```

我可以在这个 bash 解释器中执行我的期望脚本，即使我可以传递命令行参数，比如： `./scriptname arg1 arg2 arg3`等等，但是当我尝试 `sh -x ./scriptname arg1 arg2 arg3`它时会抛出一些错误。请澄清上述陈述，将期望脚本放入 bash 中是否真的有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:20:52.780

先从Expect来看，很简单。该[`set`](http://tcl.tk/man/tcl8.5/TclCmd/set.htm)命令在给定 2 个参数时设置变量的值。这里，变量名是`kludge`，值是 . 之间的多行字符串`{braces}`。请注意，在 Tcl（和 Expect）中，大括号抑制扩展（变量替换、命令扩展等），与单引号在 shell 中的作用相同。假设`kludge`从未使用过该变量，这是一个完全无害的声明。

从外壳上看有点棘手。在这种情况下，shell 的[`set`](http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)命令将设置位置参数。在此命令之后：

```
$1 = "kludge"
$2 = "{"
$3, $4, ... <= will be the original command line parameters 
```

然后有 2 个`shift`命令可以弹出`"kludge"`和`"{"`退出参数“堆栈”，恢复原始位置参数。然后该`exec`命令将启动 expect，*替换*当前正在运行的 shell 进程。如果`exec`未使用，expect 将运行并（可能）终止，然后 shell 将在下一行报告语法错误：`}`

总体而言，这是启动期望程序的一种过于聪明的方式。将“# rest of script follow”之前的所有内容替换为

```
#!/usr/bin/expect -f 
```

或者，如果外壳部分发生*了*更多事情，请使用以下命令：

```
#!/bin/bash
do whatever shell initialization required
expect -c << 'END_OF_EXPECT'
# rest of expect script follows
# ...
END_OF_EXPECT 
```

在这种情况下传递选项：

```
expect - "$@" << 'END_OF_EXPECT'
# ... 
```

单曲`-`告诉期望命令将出现在标准输入上。

# cordova - 将 phonegap 项目打包到 Windows

> ID：15200996
> 
> 赞同：0
> 
> 时间：2013-03-04T11:55:33.497
> 
> 标签：cordova

我正在寻找一种将 Phonegap 项目打包到 Windows 包/可执行文件中的方法，以便用户在所有平台上拥有相同的体验，或者寻找一种无需使用模拟器即可交付相同内容的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:16:53.837

您需要将自己的浏览器与 PhoneGap 包一起打包，以便确保获得一致的体验。您可能想查看[Chromium Embedded](https://code.google.com/p/chromiumembedded/)，它很小，可以让您轻松构建托管您的 PhoneGap 项目的可执行文件。

要创建可执行文件，请查看 CEF 的可用绑定，例如 CEFSharp，它允许您使用 .NET 构建“引导”应用程序

请注意，某些 PhoneGap 特定的 API 无法在桌面浏览器中运行，并且可能需要更改一些代码。

# php - 将二维数组转换为多维数组

> ID：15200997
> 
> 赞同：0
> 
> 时间：2013-03-04T11:55:35.477
> 
> 标签：php, arrays, multidimensional-array

我有这个数组：

```
$data=array(
   array('id'=>12,'name'=>'box1','color'=>'red','content_id'=>18,'content'=>'roses'),
   array('id'=>12,'name'=>'box1','color'=>'red','content_id'=>22,'content'=>'daisies'),
   array('id'=>38,'name'=>'box2','color'=>'green','content_id'=>22,'content'=>'daisies'),

); 
```

我想用这个结构来转换它：

```
 $structure = array('id'=>
    array('name','color','content_id'=>array(
      'content'))); 
```

所以它变成：

```
array(
  '12'=>array('name'=>'box1','color'=>'red','content_id'=>array(
     '18'=>'roses',
     '22'=>'daisies')),
   '38'=>array('name'=>'box2','color'=>'green','content_id'=>array(
     '22'=>'daisies'))
); 
```

我创建了一个适用于单个 $data 数组的函数（即 x_array($data[0],$structure)）：

```
 function x_array($data,$struc,$first=true)
    {
        foreach ($struc as $struc_field=>$inner_struc)
        {
            if (!is_array($inner_struc))
                {$result[$inner_struc]=$data[$inner_struc];}
            else {
                $res=x_array($data,$inner_struc,false);

                //ignore the first field name and use it's value as key instead
                if ($first) {$result[$data[$struc_field]]=$res;}
                else {$result[$struc_field][$data[$struc_field]]=$res;}

                }

        }
        return $result;

    } 
```

检查它： http: [//phpfiddle.org/main/code/y3e-wxh](http://phpfiddle.org/main/code/y3e-wxh)

但是，当涉及到集成多个数组的信息而不复制或覆盖信息时，我一直坚持下一步该做什么。请注意，我发布了一个简化的数据和结构数组，最终函数应该能够管理任何深度结构和任何数量/名称的字段。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:59:16.563

尝试这个 ：

```
$data=array(
   array('id'=>12,'name'=>'box1','color'=>'red','content_id'=>18,'content'=>'roses'),
   array('id'=>12,'name'=>'box1','color'=>'red','content_id'=>22,'content'=>'daisies'),
   array('id'=>38,'name'=>'box2','color'=>'green','content_id'=>22,'content'=>'daisies'),

);

$res = array();
foreach($data as $key=>$val){
   $res[$val['id']]['name']          = $val['name'];
   $res[$val['id']]['color']         = $val['color'];
   $res[$val['id']]['content_id'][$val['content_id']]  = $val['content'];
}

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [12] => Array
        (
            [name] => box1
            [color] => red
            [content_id] => Array
                (
                    [18] => roses
                    [22] => daisies
                )

        )

    [38] => Array
        (
            [name] => box2
            [color] => green
            [content_id] => Array
                (
                    [22] => daisies
                )

        )

) 
```