# StackOverflow 问答 14646000-14646999

# mysql - mysql 按多数票排序

> ID：14646000
> 
> 赞同：1
> 
> 时间：2013-02-01T12:10:04.390
> 
> 标签：mysql, ruby-on-rails

我在排序连接的 mysql 结果时遇到问题，有两个相关的表：

表用户：

```
id, name
--------
1,  Alex
2,  John 
```

表投票：

```
user_id, vote
-------------
1,         1
1,         1
1,         1
1,        -1
1,        -1
2,         1
2,         1
2,         1 
```

总而言之，亚历克斯有 1 票得分约翰有 3。因此约翰将是第一，亚历克斯第二。

如何获取按投票表上“投票”字段的总和排序的用户列表？“投票”字段是整数（可以是 1、-1、0 或任何其他整数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:14:16.173

您可以使用这个使用 GROUP BY 和聚合函数 SUM 的 MySql 查询：

```
SELECT name
FROM users inner join votes
     ON users.id = votes.user_id
GROUP BY users.id
ORDER BY SUM(vote) DESC 
```

[在这里](http://sqlfiddle.com/#!2/638bb/2)看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:30:53.193

```
select users.* from users
left join 
(
 select user_id,SUM(vote) as sum_vote 
 from votes 
 group by user_id
) as v on users.id=v.user_id
order by v.sum_vote 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:06:26.453

尝试

`User.joins(:votes).sum('votes.vote', group: 'votes.user_id', order: 'sum_votes_vote')`

`sum_votes_vote`来自 Rails 给 sum 的别名。你也可以使用

`User.joins(:votes).sum(:vote, group: 'votes.user_id', order: 'sum_vote')`

这将给出相同的结果。如果需要，您可以附加`DESC`或附加`ASC`到。`sum_vote`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:16:20.167

```
 select u.name from users u inner join votes v on u.id=v.user_id  group by u.id order by sum(vote) desc 
```

# php - 单击codeigniter分页链接时，url会重新启动

> ID：14646001
> 
> 赞同：1
> 
> 时间：2013-02-01T12:10:04.450
> 
> 标签：php, codeigniter

我必须在“网格”视图或列表“视图”中显示产品信息。

最初我传递了一个 url，`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/1/grid` 但如果我点击分页链接，那么我的 url 将重新启动到`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/1`. 因此，正因为如此，我无法加载我的视图格式数据。如何修复此错误？

这个疑问是我朋友问题[的一部分 浏览主要问题链接](https://stackoverflow.com/questions/14642445/how-to-handle-multiple-parameters-in-codeigniter)

MyContoller.php

```
function books()
{
    $config = array();  
    $config['base_url'] = base_url().'viewallbooks/books/pgn/';
    $config["total_rows"] = $this->Booksmodel->record_count_for_secondtopBooks('3');
    $config['uri_segment'] = 4;
    $config['per_page'] = 3;
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>'; 

       $this->pagination->initialize($config);
       $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;

    $data["query"] = $this->Subjectmodel->get_subjects();
    $data["query1"]=  $this->Editionmodel->get_edition(); 

    $data["query2"]=$this->Booksmodel->get_all_book_list_atHomeTop('3',$config["per_page"], $page);
     $data["links"] = $this->pagination->create_links();

   //---------For getting view type and passing to the view to show data accordingly-----
    $viewType = ($this->uri->segment(5)) ? $this->uri->segment(5) : 'list';
    $data["vt"]=$viewType;
    // ----Ends here For getting view type and passing to the view to show data accordingly-----

   $this->load->view('commonfiles/booksview',$data);   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:30:39.090

将您更改`base_url`为：

```
$config['base_url'] = base_url().'viewallbooks/books/pgn/grid'; 
```

并将您的 URL 结构更改为：

`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/grid/1`

页码应该是 url 中的最后一件事。

# c++ - 如何用 C++11 中的 lambda 调用替换函子调用？

> ID：14646002
> 
> 赞同：0
> 
> 时间：2013-02-01T12:10:07.353
> 
> 标签：c++, c++11, lambda

我有一个抽象模板类

```
template <typename T>
class Predicate1
{
  public:

    Predicate1();

    virtual ~Predicate1();

    virtual bool operator() (const T item) const = 0;
}; 
```

一个实现

```
class Pred : public Predicate1<string>
{
  public:

    virtual bool operator() (const string item) const;
};

bool Pred::operator()(const string item) const
{
  return item == "";
} 
```

和一个模板类，其方法`filter`采用谓词：

```
template <typename T>
class TList : public boost::enable_shared_from_this<TList<T> >
{
  public:

    typedef boost::shared_ptr<const TList<T> > List;

    const List filter(const Predicate1<T>& p) const;

    ...
}; 
```

然后我按如下方式使用过滤器：

```
int main(int argc, char *argv[])
{
  const TList<string>::List l1 = ...;

  const TList<string>::List l2 = l1->filter(Pred());
} 
```

这工作正常。但是，我不知道如何用匿名函数替换仿函数。我努力了：

```
const TList<string>::List l2 =
  l1->filter([] (const string item) -> bool { return item == ""; }); 
```

据我了解，匿名函数与仿函数的运算符具有相同的签名`()`，因此它应该可以工作。相反，我得到编译器错误：

```
error: no matching function for call to ‘TList<std::basic_string<char> >::filter(main(int, char**)::<lambda(std::string)>) const’
note: candidate is: const TList<T>::List TList<T>::filter(const Predicate1<T>&) const [with T = std::basic_string<char>, TList<T>::List = boost::shared_ptr<const TList<std::basic_string<char> > >] 
```

所以，不知何故，这些类型似乎是不兼容的，但我不明白我是否忽略了某些东西或我做错了什么。或者换句话说，我该如何声明该`filter`方法，以便它可以（仅）接受带有签名的匿名函数

```
const string -> bool 
```

或者，一般来说，`const T -> bool`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:17:58.373

不要编写自己的接口类，而是使用`std::function`：

```
const List filter(const std::function<bool (const T)>& p) const; 
```

`std::function`具有来自 lambda 和仿函数的构造函数，因此您可以继续使用`Pred`.

# jquery - 按下回车时从自动完成中选择的项目的 ID

> ID：14646006
> 
> 赞同：0
> 
> 时间：2013-02-01T12:10:27.670
> 
> 标签：jquery, autocomplete, knockout.js, keypress

我有一个 jquery 自动完成功能，它使用他们的 id 选择成员名。当 select 事件被调用时，我得到了选定的成员 ID，如下所示：

```
//For autocomplete extender generating members
    $(function () {
            $('.tags').autocomplete({
                //make ajax call to get all members
                source: function (request, response) {
                        $.ajax({
                                self.memberOptions(data.d);
                        });
                    }
                },
                select: function (event, ui) {
                        self.selectedMemberId(ui.item.value); //selected memberid
                }
            })
            .keypress(function (e, data, ui) {
                 if (e.which == 13) {
        //selected memberid when pressing enter key
        //self.selectedMemberId(ui.item.value); //selected memberid
             }
            });
    }); 
```

在选择事件中，我正在获取成员的 ID，我想在自动完成的按键事件中获取 memberId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:48:17.663

```
$('.tags').keypress(function (e) 
{
   e.preventDefault();
   var memberId = $(e.target).val();
}); 
```

# php - oci_connect 连接失败

> ID：14646007
> 
> 赞同：1
> 
> 时间：2013-02-01T12:10:29.553
> 
> 标签：php, oracle, zend-server-ce

我在从本地 Zend 服务器 CE 连接到外部 ORA DB 11g 时遇到严重问题。OCI8 已启用并运行版本 1.4.6（由于`phpinfo()`）。

我尝试了许多连接选项（如下所列），但返回了相同的错误：

```
oci_connect(): ORA-28547: connection to server failed, probable Oracle Net admin error 
```

在谷歌搜索了一整天后，我只能说这个错误意味着 PHP 能够与服务器通信，但无法连接到具体的服务/数据库，并且错误不应该来自 PHP 本身......

我已将环境变量设置`TNS_ADMIN`为包含此连接描述`c:\oracle_instantclient_11_2`的文件所在的位置：`tnsnames.ora`

```
MYDB =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = X.X.X.X)(PORT = 1521))
    )
    (CONNECT_DATA = (SID = MYDB)(SERVER = DEDICATED))
  ) 
```

使用此描述

```
(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=X.X.X.X)(PORT=1521)))(CONNECT_DATA=(SID=MYDB)(SERVER=DEDICATED))) 
```

我能够使用`sqlplus`控制台连接到服务器和服务/数据库，所以连接非常正确。我也使用相同的 HOST、PORT 和 SID 来使用`Sqldeveloper`工具连接到服务器。问题是在 PHP 中连接到服务器时...

到目前为止我尝试了什么：

```
oci_connect("user", "password", "X.X.X.X:1521", "AL32UTF8", 0);
oci_connect("user", "password", "MYDB", "AL32UTF8", 0);
oci_connect("user", "password", "(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=X.X.X.X)(PORT=1521)))(CONNECT_DATA=(SID=MYDB)(SERVER=DEDICATED)))", "AL32UTF8", 0); 
```

上面所有这些`oci_connect`调用都返回提到的相同错误。

我也尝试过`ezconnect`11g 的方式，如此[处](http://php.net/manual/en/function.oci-connect.php)所述- `[//]host_name[:port][/service_name][:server_type][/instance_name]`：

```
oci_connect("user", "password", "X.X.X.X:1521/MYDB", "AL32UTF8", 0); 
```

但问题是我不知道`service name`，只有`service ID`（`SID`），因此返回的错误是这样的：

```
oci_connect(): ORA-12514: TNS:listener does not currently know of service requested in connect descriptor 
```

这表示没有使用提供的服务名称运行的服务（或者 ORA 侦听器不知道此类服务）。

PHP 版本：5.3.14
Appache v.：2.2.22（32 位）Zend
Zend 服务器 CE：5.3.6

OCI8 的 PHP 信息：

```
OCI8 Support                   enabled
Version                        1.4.6
Revision                       $Revision: 313688 $
Active Persistent Connections  0
Active Connections             0
Oracle Instant Client Version  Unknown
Temporary Lob support          enabled
Collections support            enabled

Directive                     Local Value   Master Value
oci8.connection_class         no value      no value
oci8.default_prefetch         100           100
oci8.events                   Off           Off
oci8.max_persistent           -1            -1
oci8.old_oci_close_semantics  Off           Off
oci8.persistent_timeout       -1            -1
oci8.ping_interval            60            60
oci8.privileged_connect       Off           Off
oci8.statement_cache_size     20            20 
```

也许问题是虽然它的路径在环境变量和环境变量中都设置了`unknown`版本...`Oracle instant client``TNS_ADMIN``PATH`

**我的问题是：**有人知道我做错了什么吗？我错过了什么吗？我昨天用谷歌搜索了一整天，所以可能（有 99% 的机会）任何谷歌链接你想提供给我我已经看过并尝试过......

虽然这个问题可以被认为是这个问题的完全重复[-](https://stackoverflow.com/questions/9099158/oracle-11-1-0-7-and-wamp-oci-connect-failure)它还没有得到回答，我想即使我发表评论，也没有人会回到那个旧问题，我也有连接问题。**还要记住，在类似的问题中，会返回并询问不同的错误。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:49:47.590

由于几个错误配置和在寻找解决方案时失去了 3 天的时间，我转而在 Linux 服务器上进行开发，所有问题都消失了。

我发现了什么：

*   两者`php_oci8.dll`都`php_oci8_11g.dll`依赖于 Oracle Instant Client 库
    *   这些库不包含`oci_`函数（like `oci_connect`），只有奇怪的`ociX`函数（like ）......`ociLogon`
*   虽然我很确定我已经下载了 Oracle Instant Client **Basic**和所有扩展，但由于未知字符集，我无法连接到另一台 Oracle 服务器，并且错误说我只使用**Lite**即时客户端...
*   我尝试了 64 位和 32 位即时客户端版本均无济于事
*   我的 Apache 是 64 位，windows 是 64 位，PHP 是 32 位，远程 Oracle 服务器是 64 位，远程 Linux 服务器是 64 位...
*   尝试了许多环境设置（`ORA_HOME`, `TNS_ADMIN`，调整`PATH`为即时客户端安装）无济于事
*   由于可能的环境设置干扰，尝试卸载本地 Oracle XE 服务器无济于事
*   几乎失去了我的头 - 无济于事......

所以最后在 Linux 服务器上，我连接到远程 Oracle 服务器没有问题。某处（在浏览数以千计的 PHP-Oracle 相关页面时）我发现了一条信息“不应开发连接到 Windows 下的 Oracle 服务器的 PHP 应用程序”，而应坚持使用 UNIX 系统...

因此，**任何**遇到类似或相同问题的人 - 如此友善，不要浪费您的时间，安装 VirtualBox，在其上运行 Linux 并继续前进！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T07:58:33.370

要将 php 连接到 Oracle 11g 版本 11.2，您需要执行以下操作；

第 1 步：使用 sys 作为 sysdba 登录到您的数据库并执行以下脚本。

**

```
execute dbms_connection_pool.start_pool();
execute dbms_connection_pool.restore_defaults(); 
```

**

第 2 步：在您的 PHP 脚本中

**

```
$conn = oci_connect("username", "password", "//hostname/servicename");
if (!$conn) {
   $m = oci_error();
   echo $m['message'], "\n";
   exit;
}
else {
   print "Connected to Oracle!";
}
// Close the Oracle connection
oci_close($conn); 
```

**

注：一）。确保启用 PHP_OCI8 和 PHP_OCI8_11g 功能

## ii)。Oracle 11 区分大小写。

最好的问候亚西尔哈什米

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T12:40:56.900

我遇到了同样的问题，并尝试从本地计算机连接到远程服务器。经过 2 周的调试，我终于让它工作了。

该解决方案非常简单，但未在 PHP 文档中记录

因此，让我们以提供的示例 PHP 为例：

$conn = oci_connect('hr', 'welcome', 'localhost/XE');

他们没有提到的是它指向服务器上的默认端口。

如果您的设置为不同的，则需要指定。请参阅下面的新示例：

$conn = oci_connect('hr', 'welcome', 'localhost:1234/XE');

尝试使用您指定的端口。

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-20T18:50:50.907

只需加上我的两分钱，因为我用这个把头撞在墙上......如果一切都失败了，试试这个，一旦你下载了即时客户端，[http://www.oracle.com/technetwork/topics/ winsoft-085727.html](http://www.oracle.com/technetwork/topics/winsoft-085727.html)，将提取的内容复制到 apache/bin 文件夹。它可能会要求您覆盖 oci.dll。这样做，然后重新启动 apache/php。幸运的是，这将解决问题...

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T21:29:01.353

我在 Fedora 17 上的解决方案：

```
1\. yum install httpd httpd-devel.
2\. yum install php php-mysql php-pear php-devel
3\. Install oracle instantclient:

rpm -Uvh oracle-instantclient11.2-basic-11.2.0.3.0-1.x86_64.rpm 
rpm -Uvh oracle-instantclient11.2-devel-11.2.0.3.0-1.x86_64.rpm 

4\. pecl install oci8

This gives:

**
downloading oci8-1.4.7.tgz ...
Starting to download oci8-1.4.7.tgz (Unknown size)
.....done: 168,584 bytes
10 source files, building
running: phpize
Configuring for:
PHP Api Version:         20100412
Zend Module Api No:      20100525
Zend Extension Api No:   220100525
Please provide the path to the ORACLE_HOME directory.
Use 'instantclient,/path/to/instant/client/lib' if you're compiling
with Oracle Instant Client [autodetect] :' 
** 

Just press enter.

5\. Enable the OCI8 extension by creating a file, oci8.ini for example, with the following line at /etc/php.d/:

extension=oci8.so

6\. service httpd restart 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-07T21:00:45.167

作为记录（PHP 8.0.12），您也可以尝试：

在 Apache bin 文件夹中，复制到下一个文件中

apache24
.... bin
....... oraociei12.dll
....... oci.dll
.. oraons.dll

您可以在 Instant 客户端文件夹和 bin 文件夹中找到这些文件。

然后重新启动Apache，就是这样。

即时客户端、apache 版本和 PHP 版本必须是 32 位或 64 位。

您也可以尝试使用 ez-connection 进行连接（如果您想避免使用 tnsnames）。

# jquery - jQuery DatePicker 最小最大日期

> ID：14646008
> 
> 赞同：9
> 
> 时间：2013-02-01T12:10:31.220
> 
> 标签：jquery, datepicker, maxdate, mindate

我有 jQuery 日期选择器设置和工作，但希望帮助设置 minDate 和 maxDate 选项。我当前的代码如下（没有这些选项）。如何将 minDate 设置为 defaultDate 前 3 个月，将 maxDate 设置为 defaultDate 后 28 天？

```
var expdisp = $("#expdisp").attr("value");

$("#expirydate" ).datepicker({
    showOn: "button",
    buttonImage: "images/calendar.gif",
    buttonImageOnly: true,
    dateFormat: "dd/mm/yy",
    defaultDate: expdisp,
    showOtherMonths: true,
    selectOtherMonths: true,
    changeMonth: true,
    changeYear: true,
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T12:17:47.813

```
$(function() {

    $( "#datepicker" ).datepicker({ 
        changeYear: true,
        minDate: '-3M',
        maxDate: '+28D',
    });
}); 
```

[JSFiddle 演示](http://jsfiddle.net/kGjdL/114/)

**更新**

您可以从默认日期计算游览最大和最小有效日期，然后将其分配给日期选择器。

```
var expdisp = $("#expdisp").attr("value");

$("#expirydate" ).datepicker({
    showOn: "button",
    buttonImage: "images/calendar.gif",
    buttonImageOnly: true,
    dateFormat: "dd/mm/yy",
    defaultDate: expdisp,
    showOtherMonths: true,
    selectOtherMonths: true,
    changeMonth: true,
    changeYear: true,

    minDate: '-3M',
    maxDate: '+28D',
}); 
```

[更新演示](http://jsfiddle.net/kGjdL/120/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T17:08:48.800

**maxDate** :- 设置可以选择的最大日期。接受日期对象或相对数字。例如：+7，或 +6m 等字符串。

**minDate :-**设置可以选择的最小日期。接受数字、日期对象或字符串。

```
$(document).ready(function() {
  $("#date").datepicker({
      minDate: -3,
      maxDate: "1w"
  }); 
```

});

参考：-[将最小和最大日期设置为 jquery datepicker](http://goo.gl/xE3ZFr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:16:05.720

你可以试试：

```
var expdisp = $("#expdisp").attr("value");

$("#expirydate" ).datepicker({
    showOn: "button",
    buttonImage: "images/calendar.gif",
    buttonImageOnly: true,
    dateFormat: "dd/mm/yy",
    defaultDate: expdisp,
    showOtherMonths: true,
    selectOtherMonths: true,
    changeMonth: true,
    changeYear: true,

    minDate: -3M,
    maxDate: +28D
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T20:37:09.123

您还可以使用特定的日期范围。我添加了一个最小开始日期，最大 +14D。您只需要记住与您的日期格式保持一致，并在 MM/DD/YYYY 之间使用“/”而不是“-”。

```
$('#Date').datepicker({
  changeMonth: true,
  minDate: '10/19/2016',
  maxDate: '+14D',
});
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-14T08:35:28.680

```
$(document).ready(function () {
    $('input[id$=tbDate]').datepicker({   
        dateFormat: 'dd-mm-yy',
         minDate: '-0D',
         maxDate: '+28D',
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-15T16:47:08.780

```
var startDate = new Date(); // Now
var endDate = new Date();
endDate.setDate(startDate.getDate() + 30); // Set now + 30 days as the new date
$('#myDatePicker').datepicker('setEndDate', endDate);//1st set  end date
$('#myDatePicker').datepicker('setStartDate', startDate);// 
```

# cross-compiling - Scratchbox v/s Qemu

> ID：14646009
> 
> 赞同：0
> 
> 时间：2013-02-01T12:10:32.027
> 
> 标签：cross-compiling, embedded-linux, qemu, scratchbox

我正在浏览以下链接：-- [http://jecxjo.motd.org/code/blosxom.cgi/devel/cross_compiler_environment](http://jecxjo.motd.org/code/blosxom.cgi/devel/cross_compiler_environment)

这里的 Scratchbox 被称为监狱，而 QEmu 被称为模拟器。

> 我们的监狱（Scratchbox2）和我们的模拟器（QEmu）

据我所知，Scratchbox 创建了一个编译环境，那么 QEmu 会做什么？

Qemu & Scratchbox 在交叉编译中的确切作用是什么。

使困惑 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:05:20.993

[QEmu](http://en.wikipedia.org/wiki/QEMU)基本上通过动态二进制转换提供（模拟）中央处理二进制文件，并提供一组设备模型，使其能够运行各种未经修改的客户操作系统。意味着如果您要为任何类型的硬件（在 QEmu 列表中）构建一些内核或驱动程序，而没有您可以构建任务的硬件。

[Scratchbox2](http://en.wikipedia.org/wiki/Scratchbox2)是交叉编译工具包，旨在使嵌入式 Linux 应用程序开发更容易。它还提供了一整套工具来集成和交叉编译整个 Linux 发行版。它还具有为硬件构建特定内核或驱动程序所需的 QEmu 和其他工具。

# arrays - (MS FoxPro) - 使变量重复/附加记录

> ID：14646011
> 
> 赞同：0
> 
> 时间：2013-02-01T12:10:47.103
> 
> 标签：arrays, duplicates, append, row, foxpro

我需要编写一个程序，根据其中一个数据字段中提供的数字复制一些行。

每行包含一个名称/地址数据 && 一个数字，该数字表明该行必须复制多少次，如下例所示（4 是这个数字）

辛普森先生，纽约阳光街 20490 号，4
*！*因此，此记录需要另外 3 个重复，总共 4 个，如下
：A Simpson, Sunshine Street 20490, New York, 4
Mr A Simpson, Sunshine Street 20490, New York, 4
Mr A Simpson, Sunshine Street 20490, New约克，4

程序要么在表格底部追加新记录，然后用相关数据填充它们（并对其进行排序，使重复项一个接一个），或者如果可能的话，在每一行之后制作一个重复项。我想这是要做阵列的事情，我一点也不熟悉，而且我已经花了几个小时才能完成。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:16:50.140

需要复制的数据是否附加到同一个表中？如果是这样，有几种技术可以尝试。

1：确保您在需要复制的行上，然后：

```
SCATTER MEMVAR    &&Save fields to memory varibles of the same name
APPEND BLANK      &&Adds a blank record to the end of the current table
GATHER MEMVAR     &&Adds the memory variables values to the appropiate columns 
```

2：使用 INSERT 命令

```
SCATTER MEMVAR    &&Save fields to memory varibles of the same name
INSERT INTO myTableName FROM MEMVAR   &&Adds a record and populates the columns 
```

至于获得您需要的重复数，例如您的示例中的 4，您可以在过滤后的表上执行循环，例如：

```
&&Get records that need dups processed. Add WHERE condition if needed.
SELECT * FROM myTableName INTO CURSOR myTemp  
SELECT myTemp
SCAN
    SCATTER MEMVAR
    FOR i = 1 TO m.CountFieldName
       INSERT INTO myTableName FROM MEMVAR
    ENDFOR
ENDSCAN 
```

我还没有测试过代码，但它应该非常接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T00:31:55.833

正如上面评论中提到的 Tamar，附加到同一个表中可能会导致递归结果。您可能会考虑将您的结果从原始表格放入“备用”工作区域，以执行任何最终操作（打印或其他），然后在完成后关闭。这样，原始条目保持不变，只需一个条目。

也就是说，基于重复，我将创建一个带有记录（或更多）的临时游标来模拟结果集......即：1 有 1 条记录，2 有 2，5 有 5......

```
create cursor C_TempNumbers ( int numMatch )
index on numMatch tag numMatch
for i = 1 to 10
   for j = 1 to i
      insert into C_TempNumbers ( numMatch ) values ( i )
   endfor
endfor 
```

所以现在，我有一个表和索引，其中包含类似的记录

```
1
2
2
3
3
3
4
4
4
4 
```

ETC..

现在，我将根据 numMatch 从连接到该游标的原始表中进行查询。如果只有 1，它将找到 1 条记录，返回 1 行。如果数字为 4，则返回 4 次。好消息...如果您有 20 个 4 条目、30 个 3 条目等...他们仍然会得到正确的计数。

```
select YT.*; 
   from YourOriginalTable YT ;
      join C_TempNumbers ;
         on YT.YourNumberColumn = C_TempNumbers.numMatch; 
   into cursor C_FinalResult readwrite 
```

完成...您的决赛桌准备就绪，您的原件完好无损，没有将所有重复项放入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:33:52.750

谢谢两位，我们（我和我的同事）处理这个问题的方式有点不同，我会用一种更简单的方式说，因为我们远不是专家。我现在唯一的问题，我们需要处理的不是一个，而是其中两个字段（下面称为 hopa_gold 或 hwc_red）。因此，例如，如果一个读取“2”而另一个读取“3”，我们需要生成第一个的 1 个副本（总共制作两个）和另一个副本的两个（因此总共会产生三个）。这种情况不会经常发生，所以我认为如果有必要我们会“手工”完成。我们的（非常简单！）代码如下。第一行将字段更改为数字，否则它不起作用。请让我知道你的想法。干杯

```
ALTER table input alter hopa_gold n(10)
ALTER table input alter hwc_red n(10)
COUNT TO lastrec
Initval = 1
Varname = 1
trec = 1
GO top
replace ALL tnum WITH hopa_gold+hwc_red
GO top
FOR trec = 1 TO lastrec
    FOR VarName = Initval TO (tnum-1)  

      SCATTER MEMVAR 
      APPEND BLANK
      GATHER MEMVAR 

    ENDFOR
    GOTO trec + 1

ENDFOR 
```

# android - 如何从文本文件中读取下一行

> ID：14646012
> 
> 赞同：0
> 
> 时间：2013-02-01T12:10:49.577
> 
> 标签：android, text-files

我想从文本文件中读取几行。当我单击下一步按钮时，这些行应该一一显示。我能够将字符串存储在文件中并读取第一行。但是当我尝试使用下一个按钮读取下一行时，它停止工作。谁能告诉我一个解决方案。提前致谢。

我定义了以下内容，

```
BufferedReader buffreader;      
String line;
String fav;
StringBuilder text;   
InputStream instream;     
String favQuote0; 
```

这是在我的 oncreate 方法中

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_save);
    StringBuilder text = new StringBuilder();        

    try {
        // open the file for reading
        InputStream instream = openFileInput("myfilename.txt");

        // if file the available for reading
        if (instream != null) {             
            // prepare the file for reading
            InputStreamReader inputreader = new InputStreamReader(instream);
            BufferedReader buffreader = new BufferedReader(inputreader);   

            while (( line = buffreader.readLine()) != null) {       
                text.append(line);
                text.append('\n');                  
                fav = text.toString();             
            }
        }
    } catch (IOException e) {}

    TextView tv1 = (TextView)findViewById(R.id.textView2);
    tv1.setText(fav);   
} 
```

这是我的下一个按钮

```
public void next (View view1) {         
    try {
        // open the file for reading
        InputStream instream = openFileInput("myfilename.txt");

        // if file the available for reading
        if (instream != null) {
            while (( line = buffreader.readLine()) != null) {               
                text.append(line);
                text.append('\n');                  
                fav = text.toString();             
            }
        }
    } catch (IOException e) {}

    TextView tv1 = (TextView)findViewById(R.id.textView2);
    tv1.setText(fav);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:24:38.163

两个答案都是错误的。我将在我的代码下方发布描述。这是正确的做法。

```
private int mCurrentLine;
private ArrayList<String> mLines;
private TextView mTextView;
private Button mButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_save);

    mCurrentLine = -1;
    mLines = new ArrayList<String>();
    mTextView = (TextView) findViewById(R.id.text_view);
    mButton = (Button) findViewById(R.id.button);

    try {
        readLinesAndSaveToArrayList();
    }

    catch (IOException e) {
        e.printStackTrace();
    }

    setTextAndIncrement();

    mButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            setTextAndIncrement();
        }
    });
}

private void readLinesAndSaveToArrayList() throws IOException {
    File file = new File("myfilename.txt");

    if (!file.exists()) {
        throw new FileNotFoundException("myfilename.txt was unable to locate");
    }

    FileReader fileReader = new FileReader(file);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    String line;

    while ((line = bufferedReader.readLine()) != null) {
        mLines.add(line);
    }

    bufferedReader.close();
}

private void setTextAndIncrement() {
    if (mCurrentLine == mLines.size() - 1) {
        return;
    }

    mCurrentLine++;
    mTextView.setText(mLines.get(mCurrentLine));
} 
```

我所做的是将文件的内容缓存在可扩展的`ArrayList`. 每一行都将被分配给数组中的一个索引，例如。0、1、2 等等。

`mCurrentLine`负责阵列中的定位。它从 -1 开始，因为没有当前行。在`setTextAndIncrement()`它将被设置为0，这在数组中是第一个索引（第一行）。连续调用将增加位置并占用下一行。如果您达到极限，我会检查`mCurrentLine`是否等于行的最大大小（mLines.size() - 1, a - 1，因为数组从 0 开始而不是 1）。

除此之外，我建议您在方法和变量上使用全长名称；没有必要让它们保持简短，这只会使阅读它们变得更加困难。XML 也应该只包含小写字母而不是驼峰式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T12:53:08.790

尝试这个。这是我为我工作

```
BufferedReader reader = new BufferedReader(new InputStreamReader(instream));
StringBuffer bf = new StringBuffer();
String json = reader.readLine();
try {
do {

    bf.append(json);
    json = reader.readLine();
}while (json != null);
wt.flush();
wt.close();
Log.d("LOG", " read line output "+new String(bf)+" json "+json);
reader.close();     
} catch (Exception e) {
e.printStackTrace(); } 
```

wt 是我用来写行的缓冲写入器。我从阅读器读取并写入本地存储的文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T12:20:56.053

```
try {
// open the file for reading
InputStream instream = new FileInputStream("myfilename.txt");

 // if file the available for reading
 if (instream != null) {
 // prepare the file for reading
 InputStreamReader inputreader = new InputStreamReader(instream);
 BufferedReader buffreader = new BufferedReader(inputreader);

  String line;

   // read every line of the file into the line-variable, on line at the time
   while (buffreader.hasNext()) {
 line = buffreader.readLine();
// do something with the line 
}

}
 } catch (Exception ex) {
  // print stack trace.
} finally {
 // close the file.
 instream.close();
 } 
```

# database - 我是否需要为关系数据库表的主键创建单独的索引

> ID：14646014
> 
> 赞同：28
> 
> 时间：2013-02-01T12:10:57.387
> 
> 标签：database, indexing, derby, create-table

如果我使用主键创建表是为表自动创建的索引，还是需要单独执行。

即，如果这是表 ddl

```
 CREATE TABLE release(guid varchar(36) NOT NULL PRIMARY KEY,
name varchar(255),xmldata  CLOB(512 K)) 
```

我也需要做吗

```
CREATE INDEX release_idx ON release(guid) 
```

或不

（我使用的是 Java 自带的 Derby 数据库）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-01T12:12:45.107

你不需要。主键已经是一个索引。

# php - 正则表达式字符串获取括号中的数据

> ID：14646018
> 
> 赞同：1
> 
> 时间：2013-02-01T12:11:21.807
> 
> 标签：php, mysql, regex

我遇到了一个正则表达式问题，希望有人能提供帮助。

我有以下类型的字符串：

```
" name VARCHAR(11) NOT NULL, " 
```

其中我试图只提取长度 - 换句话说，括号内的数字。

我看过这个：[True regex for get content from括号中的方括号](https://stackoverflow.com/questions/8086981/true-regex-for-getting-content-from-parentheses-in-square-brackets)，但我只是不知道如何使它适用于我的案例。

我知道我可以使用 str_replace 删除不需要的数据，但这会很混乱并浪费资源。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:14:09.143

这应该这样做：

```
$matches = Array();
preg_match("/\w+\((\d+)\)/i", " name VARCHAR(11) NOT NULL, ", $matches); 
```

`$matches`现在将包含

```
Array
(
    [0] => VARCHAR(11)
    [1] => 11
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:15:46.907

如果您要查找的只是括号之间的一些数字，那么您可以使用一些类似于此的代码 -

```
$str = " name VARCHAR(11) NOT NULL, ";
$matches = array();
$pattern = '/\((\d+)\)/';
preg_match_all($pattern,$str,$matches); 
```

此代码使用[`preg_match()`](http://www.php.net/manual/en/function.preg-match.php)执行正则表达式匹配的函数。

> 如果`matches`提供，则填充搜索结果。`$matches[0]`将包含与完整模式匹配的`$matches[1]`文本，将具有与第一个捕获的带括号的子模式匹配的文本，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:15:54.363

试试这个模式：

```
/.*\(([0-9]+)\).*/ 
```

# xamarin.ios - 从 Steema 条形图中删除标签

> ID：14646020
> 
> 赞同：1
> 
> 时间：2013-02-01T12:11:25.493
> 
> 标签：xamarin.ios, teechart

![在此处输入图像描述](../Images/bdab490860dd81adf49c0b4e96baf8a1.png)

如何删除图表中每个条形的标签

并且需要为图表设置标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:24:20.663

> 如何删除图表中每个条形的标签

```
 tChart1[0].Marks.Visible = false; 
```

> 并且需要为图表设置标题。

```
 tChart1.Header.Visible = true;
  tChart1.Header.Text = "Chart title"; 
```

# unix - tr [az] [AZ] 在 unix 中显示错误

> ID：14646022
> 
> 赞同：3
> 
> 时间：2013-02-01T12:11:32.897
> 
> 标签：unix, tr

在 unix 中，该行`echo "abc" | tr [a-z] [A-Z]`显示以下错误：

```
 tr: extra operand `b'
    Try tr --help' for more information. 
```

`ABC`如果它从同一服务器或任何其他服务器中的任何其他目录运行，它不会显示错误并打印正确的输出。在特定目录中，它显示上述错误。
我验证并发现没有这样的冲突文件或脚本。不存在名为 的脚本`tr`。
`which tr`目录内和目录外的命令给出相同的输出`/usr/bin/tr`。
代替`tr`，我什至试图`echo "abc" | /usr/bin/tr [a-z] [A-Z]`避免与其他文件发生冲突（如果有的话）。但同样的错误仍然存​​在。
如果我尝试`echo "abc" | tr 'a' 'B'`，它会产生输出为`Bbc`. 我无法找出错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T12:15:34.433

`tr`不需要括号：

```
tr a-z A-Z 
```

`[a-z]`对您的 shell 有特殊含义（扩展为匹配文件名的列表）。目录中可能有一个匹配的文件（或多个匹配的文件）不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T03:45:03.667

您想用来`[:upper:]` `[:lower:]`避免模棱两可的文件名和表达式。

> 回声“ABC” | tr [：下：] [：上：]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T13:52:50.397

是的，它是正确的，`tr [a-z]`除了转换它会寻找一个从`a`到开始的文件名，`z`在这种情况下`[a-z]`转换为那个文件

转到用户主目录并查找文件名，例如

```
ls -lrth 

-rw-r--r--   1 root         root          1.5M Aug  3 11:02 a 
```

重命名它

```
mv a a_backup 
```

# java - 在 jdk 8 的接口上定义静态（非继承）方法的正确语法是什么？

> ID：14646027
> 
> 赞同：0
> 
> 时间：2013-02-01T12:11:49.393
> 
> 标签：java, static, java-8

虚拟扩展方法/又名默认可覆盖方法的语法（在 jdk 8 中）有据可查：

```
 public interface Foo {
      default void bar(String out) {
          System.out.println(out);
      };
    } 
```

但是我找不到**接口上静态非继承方法**的正确语法的任何参考 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:40:16.530

语法与方法在类中的语法相同：

```
public static void bar() {
    System.out.println("hello");
} 
```

# android - Android：使用 Eclipse 内存分析器检测泄漏

> ID：14646029
> 
> 赞同：1
> 
> 时间：2013-02-01T12:11:52.910
> 
> 标签：android, memory, memory-leaks

我有这个问题[Android: Screenorientation error + VM won't let us allocate x bytes](https://stackoverflow.com/questions/14643895/android-screen-orientation-error-vm-wont-let-us-allocate-x-bytes) 所以我决定下载 Eclipse Memory Analyzer。当我的错误出现并且我有 3 个可疑问题时我运行它，但我不明白它可能来自哪里。+ 我真的不知道我的问题是否是由于内存泄漏，因为可能的泄漏只占用 2.2;B 空间 ![在此处输入图像描述](../Images/442784ec64b18c4595a8c7aa48dc8e2d.png)

问题嫌疑人 1

```
2,094 instances of "java.lang.Class", loaded by "<system class loader>" occupy 789,200 (33.76%) bytes. 

Biggest instances:
•class android.text.Html$HtmlParser @ 0x4018d3f0 - 126,632 (5.42%) bytes. 
•class org.apache.harmony.security.fortress.Services @ 0x400e2e58 - 53,880 (2.30%) bytes. 
•class com.android.internal.R$styleable @ 0x400882c0 - 38,072 (1.63%) bytes. 
•class libcore.icu.TimeZones$CachedTimeZones @ 0x40444fa8 - 37,712 (1.61%) bytes. 
•class android.R$styleable @ 0x40055940 - 37,640 (1.61%) bytes. 
•class android.content.res.Resources @ 0x40075178 - 36,032 (1.54%) bytes. 
•class android.text.AutoText @ 0x40178980 - 31,656 (1.35%) bytes. 

Keywords
java.lang.Class 
```

问题嫌疑人2

```
128 instances of "org.bouncycastle.jce.provider.X509CertificateObject", loaded by "<system class loader>" occupy 455,112 (19.47%) bytes. These instances are referenced from one instance of "java.util.Hashtable$HashtableEntry[]", loaded by "<system class loader>"

Keywords
org.bouncycastle.jce.provider.X509CertificateObject
java.util.Hashtable$HashtableEntry[] 
```

问题嫌疑人 3

```
6,822 instances of "java.lang.String", loaded by "<system class loader>" occupy 418,104 (17.89%) bytes. 

Keywords
java.lang.String 
```

你觉得我有漏吗？我们可以从我发布的内容中说出来吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:14:02.860

在 Android 上，我认为泄漏 Activity 上下文非常容易。因此，我用来查找内存泄漏的最常见方法是打开 OQL 选项卡，然后输入 'select * from instanceof android.app.Activity' 。然后你可以看到那里有多少个 Activity 实例，你可以根据自己的判断来判断是否存在泄漏。您也可以右键单击其中一个 Activity 实例，然后单击“GC 路径”->“排除所有软/弱/幻像引用”。然后你可以看到对链中活动的引用。祝你好运 ！

# javascript - 通过 Javascript 调用 SOAP webservice(Made in .NET)

> ID：14646031
> 
> 赞同：0
> 
> 时间：2013-02-01T12:11:59.140
> 
> 标签：javascript, jquery, html, cordova, soap

我正在开发一个移动网络应用程序。

在此，我想调用 Web 服务并仅使用 Java 脚本从他们那里获取数据。

我搜索了很多并尝试实现一些代码，但它并没有帮助我。

一件事是 Web 服务是使用 SOAP在**.NET中创建的。**

所以，请帮助我立即解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:46:28.730

一种简单的方法是围绕您当前的 Web 服务创建一个 ASP.NET Web API Http 服务包装器，并使用 jQuery 来访问它。这将比使用 JS 访问 SOAP 服务简单得多。

更多关于 ASP.NET Web API：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

# ios - UIWebview 使用自动换行缩放

> ID：14646039
> 
> 赞同：2
> 
> 时间：2013-02-01T12:12:16.480
> 
> 标签：ios, uiwebview, pinchzoom

我已经阅读了许多有关 webview 和缩放的问题，但似乎没有一个问题能解决我正在处理的问题。

在我的 uiwebview 中，用户可以通过捏合来放大，但随后用户必须平移才能看到整个内容，这对我来说是不行的。我想要的是，在捏合之后，webview 中的文本被重新包装。

我可能尝试了所有组合设置和取消设置：

```
in the html of the webview: <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=8.0; user-scalable=1;">    
in Objective-C: setScalesPageToFit:NO and YES 
```

和一个 javascript 解决方案中描述的：[如何将手势识别器添加到 UIWebView 子类？](https://stackoverflow.com/questions/3302000/how-to-add-a-gesture-recognizer-to-a-uiwebview-subclass)

...并且在任何解决方案中，用户都必须平移。

有人解决了这个问题吗？

# iphone - 如何在 iOS 中触发从一个视图控制器到另一个视图控制器的操作

> ID：14646042
> 
> 赞同：0
> 
> 时间：2013-02-01T12:12:38.730
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

我将如何更改另一个视图控制器中的 UILabel 属性？

我已`#import "SecondViewController.h"`导入 FirstViewController.m 文件，然后

我在 FirstViewController 的方法中有以下内容

```
-(IBAction) someAction {

    SecondViewController *objV1 = [[SecondViewController alloc]init];

    objV1.secondViewControllerLabel.alpha = 0.2;

NSLog(@"someAction");

} 
```

当调用 someAction 时，SecondViewController 中的 UILabel 没有任何反应。

此外，在这个例子中，第一个和第二个视图控制器都在另一个名为 MainViewController 的视图控制器中。因此，它们同时出现在屏幕上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:26:27.703

从您告诉我们的情况来看，您似乎需要将“嵌入式视图控制器”设置为父视图控制器的子级。

```
[mainViewController addChildViewController:childViewController];
[childViewController.view setFrame:self.view.bounds];
[self.childContainerView addSubview:childViewController.view];
[childViewController didMoveToParentViewController:self]; 
```

这非常强大，因为您可以将 IBActions 从`mainViewController`他们的孩子转发...

```
[mainViewController childViewControllers] 
```

返回它们的数组，也看看

```
– shouldAutomaticallyForwardRotationMethods
– shouldAutomaticallyForwardAppearanceMethods 
```

因此，您的孩子会自动获知其父母的轮换情况。

要回答您的问题，您可以执行以下操作：

```
// In Parent View Controller
- (IBAction) anAction:(id) sender
{
    for (CustomChildController *child in self.viewControllers) {
        [child handleSomeAction];
    }
} 
```

查看[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)所说的以了解更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:55:29.143

@Goles 答案将起作用，但如果您特别想从 FirstViewController.m 触发更改，则需要以某种方式传入对 SecondViewController 的引用。

因此，您可以使用自定义初始化来执行此操作，该初始化将引用您的第二个视图控制器作为参数，或者在您的 FirstViewController 上创建一个可以从外部设置的属性，如下所示：

第一控制器.h：

```
@interface
..
@property (strong, nonatomic) UIViewController *second;
...
@end 
```

第一控制器.m：

```
@implementation
@synthesize second 
```

在您的父 ViewController 中，您将创建两个子视图控制器，然后：

```
ViewController1.second = ViewController2; 
```

然后您的操作方法将变为：

```
-(IBAction) someAction {
    self second.secondViewControllerLabel.alpha = 0.2;
NSLog(@"someAction");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:16:52.467

由于在 secondViewController 中，还没有创建 secondViewControllerLabel，所以 'objV1.secondViewControllerLabel.alpha' 将不起作用。理想情况下，您应该在 secondViewController 中创建一个名为 labelAlpha 的 NSNumber 属性，在 firstViewController 中设置该属性，然后在第二个控制器的 viewDidLoad 中添加此行 ::

```
self.secondViewControllerLabel.alpha = self.labelAlpha; 
```

这对你有用。

# excel - 将工作簿保存在当前目录中，标题来自单元格

> ID：14646049
> 
> 赞同：0
> 
> 时间：2013-02-01T12:12:46.603
> 
> 标签：excel, vba

我下载了需要根据单元格 A1 中包含的名称重命名的文件。该文件已经保存在当前目录中，所以我只需要保存到当前目录，文件名在调用 A1 中，扩展名为“.xls”

试过这段代码：

```
Sub SaveToRelativePath()
    Dim relativePath As String, sname As String
    sname = ActiveWorkbook.Worksheets(1).Range("A1") & ".xls"
    relativePath = Application.ActiveWorkbook.Path & "\" & sname
    ActiveWorkbook.SaveAs Filename:=relativePath
End Sub 
```

但是调试器在最后一行报错：ActiveWorkbook.SaveAs Filename:=relativePath

关于如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:43:37.633

未指定错误，但如果您看到：

![无宏 WB 保存警告](../Images/3b93896fb736d847cf733e857e770393.png)

这意味着您尝试将带有上述代码的工作簿保存为“XLS”（实际上，不完全是，见下文） - 这意味着无**宏**格式。Excel 警告您将丢失代码。

还有一个问题 - 无论您编码的扩展名是什么，都会将该书保存为您使用的 Excel 版本的**默认**格式（即 XLSX 或`xlOpenXMLWorkbook`2007 以及未来版本，我有 2007）。结果，您将打开保存的文件，如下所示：

![格式不正确](../Images/39a67e5375390dc3a17571b2d89fe22d.png)

解决方案：

1.  为避免第一次警告 - 在运行宏之前将初始工作簿（即保存 VBA 代码的工作簿）保存为**启用**宏。
2.  为 Save 方法添加正确的格式描述 - 在您的情况下，`FileFormat:=xlExcel8`您将获得真正的 XLS。
3.  还有一件事 - 为避免在将文件另存为 XLS 时出现兼容性警报，请在保存`.CheckCompatibility = False`前添加。结果代码应该是这样的：

    ```
    Sub SaveToRelativePath()
        Dim relativePath As String, sname As String
        sname = ActiveWorkbook.Worksheets(1).Range("A1") & ".xls"
        relativePath = Application.ActiveWorkbook.Path & "\" & sname
        Application.DisplayAlerts = False
        ActiveWorkbook.CheckCompatibility = False
        ActiveWorkbook.SaveAs Filename:=relativePath, FileFormat:=xlExcel8
        Application.DisplayAlerts = True
    End Sub 
    ```

但是要小心——这样的结构会默默地覆盖任何现有的文件。希望这对您有所帮助。

# c# - 使用 HttpClient.GetAsync() 时如何确定 404 响应状态

> ID：14646052
> 
> 赞同：35
> 
> 时间：2013-02-01T12:13:01.100
> 
> 标签：c#, exception-handling, httpclient, .net-4.5, async-await

在使用 C# 和 .NET 4.5 出现 404 错误的情况下，我试图确定`response`返回`HttpClient`的`GetAsync`方法。

目前我只能说发生了错误，而不是错误的状态，例如 404 或超时。

目前我的代码我的代码如下所示：

```
 static void Main(string[] args)
    {
        dotest("http://error.123");
        Console.ReadLine();
    }

    static async void dotest(string url)
    {
        HttpClient client = new HttpClient();

        HttpResponseMessage response = new HttpResponseMessage();

        try
        {
            response = await client.GetAsync(url);

            if (response.IsSuccessStatusCode)
            {
                Console.WriteLine(response.StatusCode.ToString());
            }
            else
            {
                // problems handling here
                string msg = response.IsSuccessStatusCode.ToString();

                throw new Exception(msg);
            }

        }
        catch (Exception e)
        {
            // .. and understanding the error here
            Console.WriteLine(  e.ToString()  );                
        }
    } 
```

我的问题是我无法处理异常并确定其状态和其他问题的详细信息。

我将如何正确处理异常并解释发生了什么错误？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-01T12:16:34.163

您可以简单地检查[`StatusCode`](http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.statuscode.aspx)响应的属性：

```
static async void dotest(string url)
{
    using (HttpClient client = new HttpClient())
    {
        HttpResponseMessage response = await client.GetAsync(url);

        if (response.IsSuccessStatusCode)
        {
            Console.WriteLine(response.StatusCode.ToString());
        }
        else
        {
            // problems handling here
            Console.WriteLine(
                "Error occurred, the status code is: {0}", 
                response.StatusCode
            );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-07T09:05:15.667

该属性`response.StatusCode`是一个[HttpStatusCode](https://docs.microsoft.com/en-us/dotnet/api/system.net.httpstatuscode)枚举。

这是我用来取名的代码

```
if (response != null)
{
    int numericStatusCode = (int)response.StatusCode;

    // like: 503 (ServiceUnavailable)
    string friendlyStatusCode = $"{ numericStatusCode } ({ response.StatusCode })";

    // ...

} 
```

或仅应报告错误时

```
if (response != null)
{
    int statusCode = (int)response.StatusCode;

    // 1xx-3xx are no real errors, while 3xx may indicate a miss configuration; 
    // 9xx are not common but sometimes used for internal purposes
    // so probably it is not wanted to show them to the user
    bool errorOccured = (statusCode >= 400);
    string friendlyStatusCode = "";

    if(errorOccured == true)
    {
        friendlyStatusCode = $"{ statusCode } ({ response.StatusCode })";
    }

    // ....
} 
```

# python - 在 Python 中将 QVariant 转换回 dict

> ID：14646053
> 
> 赞同：2
> 
> 时间：2013-02-01T12:13:01.840
> 
> 标签：python, dictionary, casting, qvariant

我已经用 QSetting 保存了 dict，当我加载它时，我得到了 QVariant

```
>>dict
{u'key1': u'val1', u'key2': u'val2',....}
...
>>loadedDict
<PyQt4.QtCore.QVariant object at 0x02B11848> 
```

如何将其转换回 dict 以便我可以再次像这样使用它：

```
>>dict['key2']
val2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T01:15:32.813

您可以将字典转换为字符串，然后在 eval(str) 之后将其转换回字典：

```
pydict  = {'key1': 'val1', 'key2': 'val2'}
variant = QtCore.QVariant( pydict )
...
pydict = eval( str( variant.toString() ) )
print pydict
>>> {'key1': 'val1', 'key2': 'val2'} 
```

请记住，如果无法将键或值之一从字符串转换为字典，则 eval 可能会失败。如果您没有内置类型（str，int，list..），则可能会发生这种情况，但在您的情况下，它不会有任何问题。

# caching - 从 TypeScript 文件中收集参考依赖树

> ID：14646055
> 
> 赞同：3
> 
> 时间：2013-02-01T12:13:11.473
> 
> 标签：caching, typescript, ondemand

**问题：**

关于在服务器端编译 TypeScript 代码，有没有办法获取单个 .ts 文件的所有引用路径的列表 - 或者更好的是，整个编译（从单个 .ts 文件开始）？按顺序，最好。

如果可能，我宁愿使用现有的解析器，而不是用新代码解析文件。

**语境：**

由于我认为它不完全存在，我想写：

1.  一个服务器端 Web 用户控件，它采用 .ts 路径并生成一个缓存清除脚本标记，指向
2.  一个 HttpHandler，它在第一次请求时编译请求的 .ts 文件一次，然后将 CacheDependencies 添加到所有引用依赖项路径。当文件更改时，生成脚本的 Web 用户控件会更新其后续请求的缓存清除后缀。

所以在发布模式下，`<tsb:typescript root="app.ts" runat="server" />`产量

```
<script type="text/javascript" src="app.ts?32490839"></script> 
```

其中交付的脚本是按需缓存的单文件脚本。

在调试模式下，未修改的标签会产生：

```
<script type="text/javascript" src="dependency1.ts?32490839"></script>
<script type="text/javascript" src="dependency2.ts?32490839"></script>
<script type="text/javascript" src="app.ts?32490839"></script> 
```

据我所知，TypeScript Visual Studio 插件和任何优化器捆绑程序都不支持这种操作模式。捆绑器确实接近我的要求，但它们不会缓存破坏，并且它们不会在不烦人的文件显式捆绑的情况下进行单文件编译。

在编译脚本时，我不介意在第一次请求时对性能造成任何影响。除此之外，也许有一个很好的理由认为这个设置不应该或不能存在。如果这不能或显然不应该这样做，我也会很感激这方面的答案。

我在 StackOverflow 上看到了其他问题，这些问题在我的解释中围绕着这个愿望跳舞，但没有什么比这个更明确，也没有相关答案。

谢谢！

此外，在不同的进程中执行 tsc.exe 是我的 HttpHandler 在运行时编译的最佳方式，还是有一种巧妙、安全且简单的方式来在进程中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:12:55.203

如果您启用优化并使用捆绑 HTML 帮助程序，捆绑会为 JavaScript 执行此操作，也可以将捆绑添加到页面。cache-bust URL 是 JavaScript 文件的简短哈希，因此如果您更改包中的任何脚本，新的哈希会将其从客户端缓存中分离出来。

我的建议是捆绑编译后的 JavaScript，并让捆绑器缩小和缓存破坏。您可以使用 out 标志让 TypeScript 生成具有所有依赖项的单个文件...

```
tsc --out final.js app.ts 
```

你的包现在只需要包含 final.js - 它节省了显式列出所有文件并在以后添加新文件。

您仍然可以编写一些东西来在运行时拦截和编译。我的偏好是在运行时之前完成这项工作，因为 TypeScript 的好处之一是编译时检查——如果客户端需要脚本，你将如何处理编译错误。即使您在运行时执行此操作，我仍然会将 JavaScript 引用添加到页面，而不是 .ts 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-16T14:46:44.263

2021年我们有[`--explainFiles`](https://www.typescriptlang.org/tsconfig/#explainFiles)

如果您想更仔细地检查您的代码库（例如区分仅类型导入和运行时导入），您可以使用 Typescript API。可能性是无限的，但也许下面的这些部分可以帮助您找到一个好的方向（可能有错误）：

```
import * as ts from "typescript";

interface FoundReference {
    typeOnly: boolean;
    relativePathReference: boolean;
    referencingPath: string;
    referencedSpecifier: string;
}

const specifierRelativeFile = /^\..*(?<!\.(less|svg|png|woff))$/;
const specifierNodeModule = /^[^\.]/;

const diveDeeper = (path: string, node: ts.Node, found: FoundReference[]) =>
    Promise.all(node.getChildren().map(n => findAllReferencesNode(path, n, found)));

const findAllReferencesNode = async (path: string, node: ts.Node, found: FoundReference[]) => {
    switch (node.kind) {
        case ts.SyntaxKind.ExportDeclaration:
            const exportDeclaration = node as ts.ExportDeclaration;

            if (exportDeclaration.moduleSpecifier) {
                const specifier = (exportDeclaration.moduleSpecifier as ts.StringLiteral).text;

                if (specifier) {
                    if (specifierRelativeFile.test(specifier)) {
                        found.push({
                            typeOnly: exportDeclaration.isTypeOnly,
                            relativePathReference: true,
                            referencingPath: path,
                            referencedSpecifier: specifier
                        });
                    } else if (specifierNodeModule.test(specifier)) {
                        found.push({
                            typeOnly: exportDeclaration.isTypeOnly,
                            relativePathReference: false,
                            referencingPath: path,
                            referencedSpecifier: specifier
                        });
                    }
                }
            }

            break;
        case ts.SyntaxKind.ImportDeclaration:
            const importDeclaration = node as ts.ImportDeclaration;
            const importClause = importDeclaration.importClause;

            const specifier = (importDeclaration.moduleSpecifier as ts.StringLiteral).text;

            if (specifier) {
                if (specifierRelativeFile.test(specifier)) {
                    found.push({
                        typeOnly: (!!importClause && !importClause.isTypeOnly),
                        relativePathReference: true,
                        referencingPath: path,
                        referencedSpecifier: specifier
                    });
                } else if (specifierNodeModule.test(specifier)) {
                    found.push({
                        typeOnly: (!!importClause && !importClause.isTypeOnly),
                        relativePathReference: false,
                        referencingPath: path,
                        referencedSpecifier: specifier
                    });
                }
            }

            break;
        case ts.SyntaxKind.CallExpression:
            const callExpression = node as ts.CallExpression;

            if ((callExpression.expression.kind === ts.SyntaxKind.ImportKeyword ||
                (callExpression.expression.kind === ts.SyntaxKind.Identifier &&
                    callExpression.expression.getText() === "require")) &&
                callExpression.arguments[0]?.kind === ts.SyntaxKind.StringLiteral) {

                const specifier = (callExpression.arguments[0] as ts.StringLiteral).text;

                if (specifierRelativeFile.test(specifier)) {
                    found.push({
                        typeOnly: false,
                        relativePathReference: true,
                        referencingPath: path,
                        referencedSpecifier: specifier
                    });
                } else if (specifierNodeModule.test(specifier)) {
                    found.push({
                        typeOnly: false,
                        relativePathReference: false,
                        referencingPath: path,
                        referencedSpecifier: specifier
                    });
                } else {
                    await diveDeeper(path, node, found);
                }
            } else {
                await diveDeeper(path, node, found);
            }

            break;
        default:
            await diveDeeper(path, node, found);

            break;
    }
}

const path = "example.ts";

const source = `
import foo from "./foo";
import * as bar from "./bar";
import { buzz } from "./fizz/buzz";

export foo from "./foo";
export * as bar from "./bar";
export { buzz } from "./fizz/buzz";

const whatever = require("whatever");

const stuff = async () => {
    require("whatever");

    const x = await import("xyz");
}
`

const rootNode = ts.createSourceFile(
    path,
    source,
    ts.ScriptTarget.Latest,
    /*setParentNodes */ true
);

const found: FoundReference[] = [];

findAllReferencesNode(path, rootNode, found)
.then(() => { 
    console.log(found); 
}); 
```

```
 [
  {
    "typeOnly": true,
    "relativePathReference": true,
    "referencingPath": "example.ts",
    "referencedSpecifier": "./foo"
  },
  {
    "typeOnly": true,
    "relativePathReference": true,
    "referencingPath": "example.ts",
    "referencedSpecifier": "./bar"
  },
  {
    "typeOnly": true,
    "relativePathReference": true,
    "referencingPath": "example.ts",
    "referencedSpecifier": "./fizz/buzz"
  },
  {
    "typeOnly": false,
    "relativePathReference": true,
    "referencingPath": "example.ts",
    "referencedSpecifier": "./bar"
  },
  {
    "typeOnly": false,
    "relativePathReference": true,
    "referencingPath": "example.ts",
    "referencedSpecifier": "./fizz/buzz"
  },
  {
    "typeOnly": false,
    "relativePathReference": false,
    "referencingPath": "example.ts",
    "referencedSpecifier": "whatever"
  },
  {
    "typeOnly": false,
    "relativePathReference": false,
    "referencingPath": "example.ts",
    "referencedSpecifier": "whatever"
  },
  {
    "typeOnly": false,
    "relativePathReference": false,
    "referencingPath": "example.ts",
    "referencedSpecifier": "xyz"
  }
] 
```

一旦你有了referencedSpecifier，你需要一些基本的逻辑来将它解析到下一个路径，并用下一个解析的文件重复你的探索，递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-16T01:39:07.777

您可以以交互方式或在节点中使用[Madge 。](https://github.com/pahen/madge)

另请参阅：[如何查看从给定文件开始的完整 nodejs“require()”树？](https://stackoverflow.com/questions/30548132/how-can-i-see-the-full-nodejs-require-tree-starting-at-a-given-file)

# ios6 - Facebook 登录模式视图未关闭

> ID：14646061
> 
> 赞同：1
> 
> 时间：2013-02-01T12:13:41.387
> 
> 标签：ios6, uinavigationcontroller, uitabbarcontroller, modalviewcontroller, facebook-login

应用程序从 Facebook 登录返回后，我在关闭模式视图时遇到问题。我遵循了 facebook 教程并对代码进行了一些自由化，因为我不想使用应用程序委托。我会发布一些代码片段

我正在使用两个类。一个类是我的初始视图，如果用户已登录，则会弹出一个名为 DayViewController 的类，然后如果用户未登录，则会弹出我的模式视图。 LoginViewController。

还应该注意的是，我正在使用故事板，并且我构建了我的应用程序，以便 DayViewController 嵌入了一个导航栏，然后嵌入到选项卡栏中。我认为我的问题出在 facebook 教程中，他们使用一些代码来获取当前显示的视图，然后将其关闭……我无法实现。

DayViewController 类——

ViewDidLoad

```
- (void)viewDidLoad
{
    if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        [self openSession];
}else {
    [self showLoginView];
}
   [super viewDidLoad];
} 
```

显示登录视图

```
- (void)showLoginView{

UIViewController *topViewController = [self.navigationController topViewController];
UIViewController *modalViewController = [topViewController presentedViewController];

if (![modalViewController isKindOfClass:[LoginViewController class]]) {

    LoginViewController *lvc = [self.storyboard instantiateViewControllerWithIdentifier:@"loginView"];
    [self presentViewController:lvc animated:NO completion:nil];

} else {
    LoginViewController *loginVC = [[LoginViewController alloc] init];
    [loginVC loginFailed];
}
} 
```

sessionStateChanged

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
switch (state) {
    case FBSessionStateOpen: {

        UIViewController *topViewController =  [self.storyboard instantiateViewControllerWithIdentifier:@"loginView"];

        //LoginViewController *lvc = [self.storyboard instantiateViewControllerWithIdentifier:@"loginView"];

        if ([[topViewController presentedViewController]
             isKindOfClass:[LoginViewController class]]) {
            [self dismissViewControllerAnimated:NO completion:nil];

        }else{
        }
    }
        break;
    case FBSessionStateClosed:

    case FBSessionStateClosedLoginFailed:
        // Once the user has logged in, we want them to
        // be looking at the root view.
        //[self.navController popToRootViewControllerAnimated:NO];

        [FBSession.activeSession closeAndClearTokenInformation];

        [self showLoginView];

        break;
    default:

        break;
}

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    NSLog(@"Error");
    [alertView show];
}
} 
```

默认 OpenSession

```
- (void)openSession{
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler: ^(FBSession *session,FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }];
} 
```

LoginViewController 类---

这个类没有什么戏剧性的，只有一个登录按钮，它通过 openSession 函数抛出 facebook 状态

```
- (IBAction)signInButton:(id)sender {
[self.loginActivityIndicator startAnimating];
dvc = [[DayViewController alloc] init];
[dvc openSession];

//[self dismissViewControllerAnimated:YES completion:Nil];
} 
```

# c++ - 在 32 位 gdb 工具上调试 64 位 C++ 应用程序

> ID：14646063
> 
> 赞同：2
> 
> 时间：2013-02-01T12:13:44.693
> 
> 标签：c++, solaris-10

我们使用 Sun Solaris 进行应用程序开发，并使用 -m64 编译 64 位应用程序。

但是 32 位 GDB 工具已经安装在我的机器上，我们无法调试我们的 64 位应用程序。

输出为

```
$ gdb cxlog
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.10"...
(gdb) break main
Breakpoint 1 at 0x100001464: file cxlogger.c, line 147.
(gdb) run
Starting program: /usr33/SIR07140/GTB_HOME/GoTx_HOME/samples/cxlog
procfs:4337 -- process not stopped.
procfs: ...giving up...
(gdb) n
procfs: couldn't find pid 12372 (kernel thread 1) in procinfo list.
(gdb). 
```

像下一步和步骤这样的正常调试推荐不起作用。

如果我使用 -m32 GDB 编译我的应用程序是工作文件。

提前致谢。桑达尔·拉金德兰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:18:27.630

你基本上有三个选择 - 按我的喜好排列：

1.  在机器上安装 64 位 GDB。
2.  在 32 位模式下重新构建您的应用程序并以这种方式进行调试。
3.  从源代码为 64 位目标构建您自己的 gdb 版本。

调试 64 位二进制文​​件的唯一方法是使用为 64 位构建的 gdb [或其他一些调试器，但无论是哪种，都需要为 64 位目标构建]

# javascript - 闭包的javascript工作

> ID：14646067
> 
> 赞同：0
> 
> 时间：2013-02-01T12:13:50.467
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascript 闭包不能正常工作](https://stackoverflow.com/questions/14645471/javascript-closure-not-working-as-it-should)

看第一个代码：

```
var count = 0;
(function addLinks() {
    var count = 0; //this count var is increasing

    for (var i = 0, link; i < 5; i++) {
        link = document.createElement("a");
        link.innerHTML = "Link " + i;

        link.onclick = function () {
            count++;
            alert(count);//here all the paragraph updates the same variable
        };

        document.body.appendChild(link);
    }
})(); 
```

当点击链接时，每个链接元素的计数器变量不断增加。这是一个方面的结果

第二：

```
var count = 0;
$("p").each(function () {
    var $thisParagraph = $(this);
    var count = 0; //this count var is increasing too.so what is different between them .They both are declared within the scope in which closure was declared

    $thisParagraph.click(function () {
        count++;
        $thisParagraph.find("span").text('clicks: ' + count);
        $thisParagraph.toggleClass("highlight", count % 3 == 0);
    });
}); 
```

这里的闭包函数没有按方面工作。每次单击段落元素时，计数器变量都会增加，但单击第二个段落元素时不会显示该增量？这是什么原因？为什么会发生这种情况？计数每个段落元素的变量都没有增加。在我之前的问题中，我没有得到满意的答案，所以我要求

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:18:33.720

`counter`变量在循环内声明`.each`。因此，每个`<p>`都有自己的计数器，因为该函数是为每个执行的`<p>`。任何两个段落都不会更新同一个变量。

另一方面，在第一个片段中，只`counter`使用了一个变量（在循环之外），通过单击 any 来更新它`<p>`。作为旁注，请注意在循环内声明不会有什么不同 - 您必须*为每个`<p>`单独*创建一个闭包，以使每个`<p>`都有自己的计数器变量。

# php - magento 设置属性的值

> ID：14646068
> 
> 赞同：2
> 
> 时间：2013-02-01T12:13:51.113
> 
> 标签：php, magento

我为所有产品创建了一个新的属性序列号。现在我不知道订单完成后如何设置它的值。我知道在哪里改变它，但我没有这个功能。这是代码。新属性的代码为“serial_number”。

```
if($status == 'complete'){

    foreach ($this->getAllItems() as $item) {
      // Here I want to update the value, I am sure something like the following will work.         
      $this->setAttribute($item, 'serial_number', '123');

}
} 
```

另外在管理员中应该是什么设置。当订单状态更改为完成时，我正在更改值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T11:09:03.893

以下是您的不同做法：（颜色 = 属性名称，红色 = 属性 value_id）

让我们开始假设您已经有 $product 可用。

```
$attr = $product->getResource()->getAttribute('color');
if ($attr->usesSource()) {
$avid = $attr->getSource()->getOptionId('red');
$product->setData('color', $avid);
$product->save();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:54:21.920

您似乎正在设置属性，但是将项目保存（）到数据库的代码在哪里

```
if($status == 'complete'){   
    foreach ($this->getAllItems() as $item) {
         $item->setSerialNumber('123');
         $item->save()   
     }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T12:19:29.963

您可以使用以下代码执行此操作 -

```
if($status == 'complete'){

    foreach ($this->getAllItems() as $item) {

         $item->setSerialNumber('123');

     }
} 
```

希望这能解决您的问题。

# php - 停止直接访问文件

> ID：14646078
> 
> 赞同：0
> 
> 时间：2013-02-01T12:14:21.533
> 
> 标签：php, wordpress, security, download

我想知道，我已经为 wordpress 制作了一个 php 插件，它要求作为图像存储。如果您登录，您会看到分配给您的文件。然后你点击下载，它会下载它们。

问题是，如果您知道 URL，则无论如何都可以下载图像。如果他们知道图像的唯一 URL，我如何轻松阻止用户下载图像，而只允许具有登录权限的人查看它。

我的想法是：

1.  某种检查引用 URL 的 HTACCESS hack
2.  一种 KEY 系统，仅在提供密钥的情况下才允许下载文件。

任何信息或想法都会非常有用，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:17:49.460

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg|js|css)$ - [F] 
```

请务必将“mydomain.com”替换为您自己的。当指定文件类型的热链接发生时，上面的代码会创建一个失败的请求。如果是图像，则会显示损坏的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:18:35.980

如果您使图像对世界不可读（例如 www 目录之外的目录，或者只是使用 .htaccess 阻止它（无需进行推荐检查），您可以确保没有人可以访问您的图像。

`getImage.php?imageid=xxxx`然后通过检查凭据的文件（例如 ）提供您的图像，如果确定则读取图像（您的 php 进程可以读取图像，例如使用`file_get_contents()`）然后提供它。

（使用正确的标题，你会没事的`header("content-type: image/your_image_type");`：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:21:56.690

要保护文件，您可以执行以下两项操作之一

1.  将文件放在安全区域（在您的公共可访问文件夹之外）。将其名称存储在数据库中，当某人单击下载时，您会选择该文件并让他们下载。
2.  切勿将文件 url 公开。当有人想要下载图像时，他们将单击下载，您可以使用时间戳在当时生成一个唯一的文件名，并使用别名文件名传输下载。显然，该文件实际上不会存在于服务器上。您只是拿起原始文件并更改其名称，因此当有人收到它时，他们将无法猜测其路径。但是，如果由于某种原因路径公开，那么他们可以访问该文件。

选项 1 主要用于人们存储文档签名等时，如果您无权访问此类文件夹（例如在共享托管环境等中），则可以使用选项 2。

# c++ - 默认构造函数参数

> ID：14646079
> 
> 赞同：2
> 
> 时间：2013-02-01T12:14:27.227
> 
> 标签：c++, class

```
#include <vector>

class A {
private:
    std::vector<int> v_;
public:
    A(int size = 100, int init_val = 100){
        for(int i=0; i<size; i++)
            v_.push_back(init_val);
    }
}; 
```

总的来说，如果我这样做：

```
A a(1000, 100); 
```

真的会发生什么？这是我第一次在构造函数中看到硬编码参数！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:16:08.600

传递的值将简单地用传递的参数替换参数的默认值。

*   定义`A a;`将导致调用`A::A(100, 100)`
*   定义`A a(5);`将导致调用`A::A(5, 100)`
*   定义`A a(5, 6);`将导致调用`A::A(5, 6)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T12:15:29.823

这些不是“硬编码”的，只是默认参数。如果您不提供参数，则`size`默认为 100 和`init_val`100。您提供的参数*会*覆盖默认值。因此：

```
A a1();            // size = 100, init_val = 100
A a2(1000);        // size = 1000, init_val = 100
A a3(1000, 1000);  // size = 1000, init_val = 1000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:17:13.477

宣言

```
A(int size = 100, int init_val = 100) 
```

没有定义“硬编码参数”，而是*默认*值。如果您调用`A::A()`保留参数，编译器将使用默认值。这里的所有都是它的。

# dart - DOM元素的使用值

> ID：14646082
> 
> 赞同：2
> 
> 时间：2013-02-01T12:14:34.037
> 
> 标签：dart

在最新更新之前，我编写了这段代码，例如

```
<input type="text" id="link">
<p> {{variable}} </p> 
```

```
// other code
var input = query('#link');
var variable = input.value; 
```

这段代码仍然有效，但是有人知道为什么编辑器会报告此消息吗？

```
"value" in not a member of Element 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:13:40.937

Dart 编辑器报告说，因为它认为`input`变量是`Element`. 为什么？因为`query()`总是返回一个元素，但编辑器不知道*在你的情况下*，它是一个输入（类型`InputElement`）。

您可以忽略警告。IDE 无法知道查询的结果是`InputElement`，除非您告诉它：

```
InputElement input = query('#link'); 
```

或者我认为这也有效：

```
var input = query('input#link'); 
```

如果你真的想告诉 Dart 运行时你期望一个变量是某种类型，你可以使用 cast 操作符：`as`。这样做的好处是通知编辑器期望的类型，如果变量不是期望的类型，它也会抛出错误。

```
var input = query('#link') as InputElement; 
```

请注意，Dart 是一种动态语言，因此我告诫不要使用`as`，除非您认为其他开发人员可能会对您的意图感到困惑。

# sql - 在 postgresql 中更改 `*_id_seq` 表的值

> ID：14646085
> 
> 赞同：3
> 
> 时间：2013-02-01T12:14:41.463
> 
> 标签：sql, postgresql

我有下**表**`postgresql`：`myapp_mymodel_id_seq`

```
 Column     |  Type   |           Value            
---------------+---------+----------------------------
 sequence_name | name    | myapp_mymodel_id_seq
 last_value    | bigint  | 3
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 32
 is_cycled     | boolean | f
 is_called     | boolean | t 
```

**如何`3`在`Value`和`last_value`to下更改`40`？**

我尝试更新`last_value`，但它无法识别该列。

```
UPDATE myapp_mymodel_id_seq SET Value=40 WHERE Value=3;

ERROR:  column "value" does not exist 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:16:37.210

```
select setval('myapp_mymodel_id_seq', 40); 
```

有关详细信息，请参阅手册：[http ://www.postgresql.org/docs/current/static/functions-sequence.html](http://www.postgresql.org/docs/current/static/functions-sequence.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T12:18:37.243

更新 myapp_mymodel_id_seq SET last_value = 40 WHERE last_value = 3;

# ios - iOS 6/iPhone 5 上的 UIGlassButton 无法正常工作

> ID：14646086
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:14:49.443
> 
> 标签：ios, ios6, uibutton, uikit, uiglassbutton

我正在尝试在运行 iOS 6.1 final 的 iPhone 5 上使用 UIGlassButton。没有错误，只是 UIGlassButton 没有出现。我还在 GitHub 等上尝试[了这个](https://github.com/hamrickdavid/UIGlassButton-Creator/tree/master/GlassButtonCreator)和许多其他尚未完成的 GlassButton 项目，但它们都不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:23:53.517

这正是您不应该使用私有 API 的原因。因为像这样的类仅供内部使用，它们可能会在操作系统更新之间更改甚至被删除。

想象一下，您将在商店中已经存在的应用程序中使用它，它会崩溃或只是不显示按钮。对待用户的好方法。

`UIGlassButton`是私有类，不应使用。要创建类似的效果，请自行构建按钮或使用图像。

# excel - 将范围复制到新工作簿的宏

> ID：14646099
> 
> 赞同：0
> 
> 时间：2013-02-01T12:15:40.180
> 
> 标签：excel, vba

如何创建一个可以执行以下操作的宏：

1.  将范围 A2:AT10000 从一个工作簿复制到新工作簿的第一张工作表。
2.  返回初始工作簿并在代号为 Sheet11 的工作表中选择范围 A6:HF10000
3.  将所选内容粘贴到步骤 1 中创建的工作簿的新添加工作表（工作表 2）

我得到一个运行时错误 424，调试时，突出显示的行是 `Sheet11.Range("A6:HF10000").Select`

```
Sub Copy2RangesNewWorkbook()
'
' Copy2RangesNewWorkbook Macro
'
Dim pvt_wbk_New As Excel.Workbook
Dim pvt_xls_Current As Excel.Worksheet

With pvt_xls_Current
ActiveSheet.Range("A2:AT10000").Select
Selection.Copy
End With

Set pvt_wbk_New = Application.Workbooks.Add
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

With pvt_xls_Current
Sheet11.Range("A6:HF10000").Select
Selection.Copy
End With

With pvt_wbk_New
Sheets.Add After:=Sheets(Sheets.Count)
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:22:19.907

尝试：

```
Sub Copy2RangesNewWorkbook()

Dim pvt_wb_New As Excel.Workbook
Dim pvt_ws_NewTarget1 As Worksheet
Dim pvt_ws_NewTarget2 As Worksheet
Dim pvt_ws_Current As Worksheet
Dim pvt_wb_Current As Workbook

Set pvt_ws_Current = ActiveSheet
Set pvt_wb_Current = ActiveWorkbook
Set pvt_wb_New = Application.Workbooks.Add
Set pvt_ws_NewTarget1 = pvt_wb_New.Sheets(1)
Set pvt_ws_NewTarget2 = pvt_wb_New.Worksheets.Add

pvt_ws_Current.Range("A2:AT10000").Copy
pvt_ws_NewTarget1.Range("A2").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False

pvt_wb_Current.Sheets("Sheet11").Range("A6:HF10000").Copy
pvt_ws_NewTarget2.Range("A6").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False

End Sub 
```

# android - Android libpng 错误：处理PNG图像失败 - maven-plugin

> ID：14646113
> 
> 赞同：1
> 
> 时间：2013-02-01T12:16:19.097
> 
> 标签：android, maven, m2e, aapt

用 android-maven-plugin 编译我的项目给了我以下 png 错误。带有 android-m2e 的 Eclipse 可以毫无问题地编译并部署到我的平板电脑上。这是 aapt 命令和 libpng 的问题吗？

```
[INFO] /Users/foo/android-sdk-macosx/platform-tools/aapt [package, -f, -M, 
/Users/foo/source/app/abc-android/AndroidManifest.xml, -S, /Users/foo/source/app/abc-
android/res, -S, /Users/foo/source/app/abc-
android/target/unpack/apklibs/com.abc.aws.android_aws_apklib_1.0/res, --auto-add-overlay, 
-A, /Users/foo/source/app/abc-android/target/generated-sources/combined-assets/assets, -I, 
/Users/foo/android-sdk-macosx/platforms/android-15/android.jar, -F, 
/Users/foo/source/app/abc-android/target/abc-android-0.1-SNAPSHOT.ap_, --debug-mode]
[INFO] libpng error: Not a PNG file
[INFO] ERROR: Failure processing PNG image /Users/foo/source/app/abc-android/res/drawable-hdpi/login_full_screen.png
[INFO] /Users/foo/source/app/abc-android/res/layout/achievement_grid_item.xml:7: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/achievement_3_in_arow').
[INFO] /Users/foo/source/app/abc-android/res/layout/achievement_grid_item_post_class.xml:6: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/achievement_3_in_arow').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:8: error: Error: No resource found that matches the given name (at 'background' with value '@drawable/distance_bg').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:89: error: Error: No resource found that matches the given name (at 'background' with value '@drawable/cadence_bg').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:168: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/heat_arrow_narrow_full_both').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:198: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/avg_max_separator').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:231: error: Error: No resource found that matches the given name (at 'background' with value '@drawable/power_bg').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:318: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/total_effort_bg').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:350: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/heat_arrow_wide_full_both').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:380: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/avg_max_separator').
[INFO] /Users/foo/source/app/abc-android/res/layout/ant_fragment.xml:415: error: Error: No resource found that matches the given name (at 'background' with value '@drawable/resistance_bg'). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T10:40:08.103

在 MS Paint 中打开 png 文件并将其重新保存为 png 文件。它会将 png 转换为 32 位格式。由于 Android 同时支持 24 位和 32 位 png，这让我觉得**Adob​​e Photoshop**生成的 png 有一些 Android 不喜欢的东西。

参考：[Canvas & Drawables](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

# javascript - 添加 DOM 元素时获取通知

> ID：14646127
> 
> 赞同：4
> 
> 时间：2013-02-01T12:16:51.010
> 
> 标签：javascript, html, ajax, dom

> **可能重复：**
> [如何检测何时在 jquery 的文档中添加了新元素？](https://stackoverflow.com/questions/4780822/how-can-i-detect-when-a-new-element-has-been-added-to-the-document-in-jquery)

我有一个普通 ul 元素中的评论列表。加载页面时，我使用类似的东西（系统基于模板）

```
<li id="someId">Some Content</li>
<script>doStuffWithLi('someId');</script> 
```

因此，如果页面被加载并且有一些 li，每个都基于模板，那么每个 li 都有这个块。

现在人们可以发布新评论，模板和内容再次加载到页面中 - 但这次脚本没有执行。我猜想一般文件准备好后加载的js没有被执行，那些文件被加载了？

不幸的是，没有像`$('li').live('ready', function() {});`. 我尝试使用 livequery 插件，例如`$('li').livequery(function() {//DO STUFF});`- 但这也不起作用。我不能简单地添加对元素创建的调用，因为我无法影响添加注释的函数。

是否可以在添加另一个 li 时调用函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:25:40.543

你可以使用事件`DOMSubtreeModified`。将此事件分配给您的 lis 的父级，如果有新的 li，则检查该事件是否被触发。在这种情况下，您为该 li 分配一个新的处理程序。

```
$("#li_parent").bind("DOMSubtreeModified", function() {
    alert("possibly a li has been inserted");
    // do your magic here
}); 
```

# .net - 如何在 VBScript 中构建 PDFbox

> ID：14646133
> 
> 赞同：1
> 
> 时间：2013-02-01T12:17:09.153
> 
> 标签：.net, vbscript, pdfbox

是否可以在 VBscript 中使用 PDFbox，我曾尝试使用 .Net 和 Java 来自动填充 PDF 表单，效果很好，但我不知道它在 VBscript 中的功能。有没有人可以分享一下看法 谢谢

# wamp - .docx 和 xlsx 文件未在 Google 文档查看器中查看

> ID：14646138
> 
> 赞同：1
> 
> 时间：2013-02-01T12:17:22.887
> 
> 标签：wamp, google-docs-api

我正在使用 Google 文档查看器查看我网站中的文档。（[https://docs.google.com/viewer](https://docs.google.com/viewer)）

当我尝试使用我的专用服务器域中的 Google 文档查看文件时，仅针对 docx 和 xlsx 无法正确查看文件

我列出了以下场景

[https://docs.google.com/viewer?url=http://----.com/testfinal.docx](https://docs.google.com/viewer?url=http://----.com/testfinal.docx)

使用网络服务器 wamp

当我尝试在其他域、dropbox 等中查看相同的文件（docx 和 xlxs）时，它运行良好。

你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:35:05.023

在 Wamp 服务器 apache httpd.conf 文件中取消注释 mime_module 和其他文件类型需要在文件中添加。

请按照以下链接中的步骤操作

[http://niallodoherty.com/post.cfm/microsoft-office-2007-mime-types-with-apache-and-iis](http://niallodoherty.com/post.cfm/microsoft-office-2007-mime-types-with-apache-and-iis)

# android - 移动应用程序是否需要遵守欧盟 Cookie 法？

> ID：14646139
> 
> 赞同：16
> 
> 时间：2013-02-01T12:17:23.817
> 
> 标签：android, ios, cookies, mobile-application, user-data

我从一位客户那里收到了一个关于欧盟 cookie 法以及它如何影响他们的移动应用程序的有趣问题。

如您所知，Cookie 法要求网站让用户知道该网站使用 cookie，并告诉他们如何禁用这些。

Android/IOS 应用程序的地位如何？我没有专门存储 cookie，但我确实存储了用户登录详细信息，以便在应用启动时自动检查访问权限。

这受法律影响吗？当应用程序开始警告用户时，我是否需要添加弹出窗口？

应用程序中的 webviews 呢？

基本上，我找不到关于这个主题的任何澄清，我不能说我见过一个应用程序可以告诉用户存储数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T12:41:56.207

简短的回答：

不会。作为移动应用程序开发人员，您无需担心*Cookie 法*。

长答案：

这是 Wired 文章的摘录（链接在底部）：

> “Cookie 法”源于 2009 年 11 月对欧盟隐私和电子通信指令的修改。它旨在保护在线隐私并保护网络用户免受不必要的营销。Cookie 可用于建立关于您去过哪里以及您在网上的行为方式的档案。该法律旨在确保任何寻求收集网络用户信息的公司都必须先征得他们的同意。在此修改之前，网站必须允许人们选择退出 cookie。现在他们必须选择加入所有“非必要”cookie。该法律于 2011 年 5 月引入英国法律，但英国公司有一年的时间来遵守。合规截止日期为 2012 年 5 月 26 日。

在我看来，考虑到移动应用程序不是网站或网页，除非法律规定，否则您无需通知用户您将存储他们的登录详细信息。您知道，作为开发人员，该信息（在首选项文件中。我不知道 iOS 等效项）非常安全。如果对隐私有任何偏执，那么这样的*警报*可能最终会进一步加剧它。在我看来完全没有必要。其他人可能会或可能不会对此有所不同。理想的做法是在用户首次安装和运行您的应用程序时显示**隐私政策。**开发者控制台中的 Google Play 也有一项功能，允许您提供隐私政策 URL。在我看来，这些措施再次足够好。

*如果您对 Cookie 法感兴趣，请阅读以下文章：*

1.  Wired 上的文章，标题为：[cookie 的简单指南以及如何遵守欧盟 cookie 法](http://www.wired.co.uk/news/archive/2012-05/25/cookies-made-simple)
2.  [Cookie 法的权威指南](http://silktide.com/cookielaw)
3.  [您需要了解的欧盟 Cookie 法](http://gigaom.com/2012/05/25/cookie-law-explainer/)

# apache - 如何避免在http请求中弹出

> ID：14646140
> 
> 赞同：0
> 
> 时间：2013-02-01T12:17:23.510
> 
> 标签：apache, http, url, url-routing

我有一个网址。当我通过浏览器访问它时，会出现一个弹出窗口并询问用户名和密码，并通过提供正确的凭据打开页面。我想知道如何通过传递用户名和密码 url 本身来避免弹出窗口以及如何做到这一点

注意我的用户名包含*@*符号

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:27:57.630

您可以使用以下表格：

```
http://<user>:<pass>@<host>:<port>/<path> 
```

它甚至可以与用户名中的 @ 一起使用（IE 可能不支持这一点）。

# groovy - 扩展 spock 规范会导致代码错误

> ID：14646142
> 
> 赞同：1
> 
> 时间：2013-02-01T12:17:33.997
> 
> 标签：groovy, spock, geb

Geb Groovy 和 spock 大师，您能帮我理解为什么下面的代码对我不起作用（变量 'closr' 给出一个空值）

```
import geb.Browser
import spock.lang.Specification

class somclass extends Specification{
def clos = {
    go()

    }
def Browser driveit(Browser browser, Closure script) {
    script.setDelegate(browser)
    script()
    browser
    }
}

objnew = new somclass()
def closr =  objnew.clos
objnew.driveit(new Browser(),closr) 
```

尽管

```
import geb.Browser

class somclass {
def clos = {
    go()

    }
def Browser driveit(Browser browser, Closure script) {
    script.setDelegate(browser)
    script()
    browser
    }
}

objnew = new somclass()
def closr =  objnew.clos
objnew.driveit(new Browser(),closr) 
```

这个对我有用（变量'closr'返回了闭包）。？第二个的唯一区别是我删除了扩展 spock 规范

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:58:18.183

I don't know what you are trying to achieve with this code, but Spock can't be used in this way. Spock specifications have to be executed via JUnit, and they have to conform to certain rules (e.g. test methods have blocks like `setup:` or `expect:`).

# ruby-on-rails - Ruby on Rails：比较 html.erb 中的值

> ID：14646143
> 
> 赞同：0
> 
> 时间：2013-02-01T12:17:34.273
> 
> 标签：ruby-on-rails, erb

我正在使用此[示例在 Ruby on Rails 中上传文件。](https://github.com/tors/jquery-fileupload-rails-paperclip-example) 我对 uploads/index.html.erb 有一些问题

我还有一些变量，例如：
current_user.id - 用户的 id 现在如何在线
user_id - 上传表中的 user_id，所以它就像一个外键，将多个上传分配给一个用户。

所以，我只想列出那些 user_id 对应于 current_user.id 的上传。我试着在这条线上做

```
((({%=file.user_id%}).to_i)==((<%=current_user.id%>).to_i)) 
```

不知何故，它不起作用，因为其 user_id 与 current_user.id 不对应的上传也被列出。

```
<script id="template-download" type="text/x-tmpl">

  {% for (var i=0, file; file=o.files[i]; i++) { %}
  {% if ((({%=file.user_id%}).to_i)==((<%=current_user.id%>).to_i)){ %} 
    <tr class="template-download fade">    

      <td class="l">
       <a href="{%=file.url%}" download="{%=file.name%}">{%=file.user_id%}</a>
      </td>
      <td class="k">
       <a href="{%=file.url%}" download="{%=file.name%}"><%=current_user.id%></a>
      </td>  

      <td class="name">
       <a href="{%=file.url%}" download="{%=file.name%}">{%=file.name%}</a>
      </td>

       <td class="delete">
        <button class="btn btn-mini btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"> 
          <i class="icon-trash icon-white"></i>

        </button>
        <input type="checkbox" name="delete" value="1">
      </td>

       <td></td>

    </tr>
{% } %}

    {% } %}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:46:00.840

您可以在控制器中获取上传。像

```
@files = Upload.where(:user_id => current_user.id) 
```

或者如果你的`User`模型`has_many :uploads`你可以制作

```
@files = current_user.uploads 
```

然后在视图中的@files 变量中，您将只上传对应于`current_user`

# c# - 对象引用未设置为局部视图上的对象实例

> ID：14646154
> 
> 赞同：1
> 
> 时间：2013-02-01T12:18:23.660
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, partial-views

> **可能重复：**
> [对象引用未设置为对象的实例 - 部分视图](https://stackoverflow.com/questions/11419753/object-reference-not-set-to-an-instance-of-an-object-partial-view)

在下面的代码中，您可以看到我的控制器操作代码、查看页面和模型类。每次运行应用程序时，我都会收到错误消息：对象引用未设置为对象的实例。此消息出现在 View lint 上，以`foreach(var item in (IEnumerable....)`. 我该如何解决这个问题？

控制器：

```
public ActionResult Upload()
    {          

        var FilesInfoData = new List<FileInfoModel>(){

             new FileInfoModel(){Name = "sa",Length = 5, LastWriteTime = DateTime.Now},
             new FileInfoModel(){Name = "saa",Length = 5, LastWriteTime = DateTime.Now}

            };

        ViewData["FilesInfoView"] = FilesInfoData;

        return View();
    } 
```

看法：

```
 <%@ Control Language="C#"             Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<FileInfoModel>>" %>
  <%@ Import Namespace="MembershipTest.Models"%>
  <fieldset>
  <legend>
   Upload File:
  </legend>
  <% using (Html.BeginForm("Upload", "Home", FormMethod.Post, new {  @enctype="multipart/form-data"}))
  { %>
   <span>Filename:</span>
  <input type="file" name="file" id="file" />
  <input type="submit" value="Upload" />
  <% } %>

  </fieldset>
  <div id="uploadTable">
  <table border="0" cellpadding="0" cellspacing="0">
  <thead>
  <tr>
  <th>
  Filename
  </th>
  <th>
  Length
  </th>
  <th>
  LastModified
  </th>
  </tr>
  </thead>
  <tbody>

  <% 
  foreach (var item in ((IEnumerable<FileInfoModel>)ViewData["FilesInfoView"]))
  { %>
  <tr>
  <td>
  <%: item.Name %>
  </td>
  <td>
  <%: item.Length %>
  </td>
  <td>
  <%: item.LastWriteTime %>
  </td>
  </tr>
  <% } %>
  </tbody>
  </table> 
  </div> 
```

模型：

```
public class FileInfoModel
{     
    public string Name { get; set; }
    public double Length { get; set; }
    public DateTime LastWriteTime { get; set; }       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:23:23.030

如果您的局部视图**总是**循环通过`FileInfoModel`中的集合`ViewData`，那么将其模型类型设置为并将其发送到局部视图不是**更好吗？**`IEnumerable<FileInfoModel>`

此外，**您需要对 Model 进行空检查**，因为在呈现局部视图时，您的集合似乎为空。

像这样：

```
public ActionResult Upload()
{          
    var model = new List<FileInfoModel>(){

         new FileInfoModel(){Name = "sa",Length = 5, LastWriteTime = DateTime.Now},
         new FileInfoModel(){Name = "saa",Length = 5, LastWriteTime = DateTime.Now}
        };

    return View(model);
} 
```

然后在视图顶部，设置模型类型：

```
<% model IEnumerable<FileInfoModel> %> 
```

然后改变你的`foreach`：

```
if (Model != null)
{
    foreach (var item in Model)
    {
       //do stuff
    }
} 
```

# batch-file - Returning the surrounding lines to a string windows batch file

> ID：14646162
> 
> 赞同：2
> 
> 时间：2013-02-01T12:18:47.780
> 
> 标签：batch-file, windows-scripting, findstr

I'm using `findstr` to search for a string in a file in the following manner:

```
findstr "test" file.txt 
```

This is returning the line where `test` is found, but I would like to return the 3 lines above and below the matching line. I've had a look and it doesn't seem like there are any in-built options to `findstr` to return surrounding lines.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:40:07.100

Here you go

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=1 delims=:" %%a in ('findstr /n "hello" file.txt') do (
set /a line=%%a
)
set /a num=0
for /l %%b in (3,-1,1) do (
set /a lines[!num!]=!line!-%%b
set /a num+=1
)
for /l %%c in (1,1,3) do (
set /a lines[!num!]=!line!+%%c
set /a num+=1
)
set /a count=1
for /f "tokens=* delims=" %%d in (file.txt) do (
for /l %%e in (%lines[0]%,1,%lines[5]%) do (
if !count!==%%e if not %%e==!line! echo %%d
)
set /a count+=1
)
pause >nul 
```

# objective-c - 以编程方式更改 NSTextView 的文本

> ID：14646163
> 
> 赞同：29
> 
> 时间：2013-02-01T12:18:48.473
> 
> 标签：objective-c, macos, cocoa, nstextview

我找不到任何似乎与`NSTextView`. 我知道 a`NSTextView`使用复杂的结构（带有`NSLayoutManager`等...），但我找不到修改当前`text`值的有效方法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-12T08:57:04.143

正确的方法是“setString”`[textView setString:@"the string"];`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-30T15:37:46.560

在插座 textView Swift Xcode 8.0 上设置文本

```
textView.string = newString 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-07T06:31:38.873

如果您想设置属性文本（格式化文本），请尝试

```
[myTextView setAttributedString:(NSAttributedString*)attrString]. 
```

NSTextView 包含一个实际保存文本的 NSTextStorage 对象...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-03T10:10:36.167

**目标 C** / **Xcode 9**

```
[myTextView setString:@"The string"];
self.myTextView.string = @"My String"; 
```

**斯威夫特**/ **Xcode 9**

```
self.myTextView.setString("MyString")
self.myTextView.string = "My String" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-01T12:21:05.003

像这样的东西：

```
[textView setString:@"new value"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-26T13:39:19.200

几乎就在那里 - 程序在下面 - 这几乎可以工作。有两个突出的问题：

1）在文本中设置正确的选择点需要两次鼠标单击，第一个总是到文本的末尾。第二个到所需
位置

2）在shell中打印一个奇怪的错误--[LUPresenter animationControllerForTerm:atLocation:options:]中的断言失败，/SourceCache/Lookup/Lookup-160/Framework/Classes/LUPresenter.m：

```
 import Cocoa

  class MyAppDelegate: NSObject, NSApplicationDelegate {

      let window = NSWindow()

      func applicationDidFinishLaunching(aNotification: NSNotification) {

          window.setContentSize(NSSize(width:600, height:200))
          window.styleMask = NSTitledWindowMask | NSClosableWindowMask |
                             NSMiniaturizableWindowMask |
                             NSResizableWindowMask

          window.opaque = false
          window.center();
          window.title = "My window"

          let ed = NSTextView(frame: NSMakeRect(20, 10, 180, 160))
          ed.font = NSFont(name:"Helvetica Bold", size:20)
          ed.string = "edit me"
          ed.editable = true
          ed.selectable = true

          window.contentView!.addSubview(ed)

          window.makeKeyAndOrderFront(window)
          window.level = 1
      }

      func applicationWillTerminate(aNotification: NSNotification) {
          // Insert code here to tear down your application
      }

  }

  let app = NSApplication.sharedApplication()
  app.setActivationPolicy(.Regular)

  let obj = MyAppDelegate()

  app.delegate = obj
  app.run() 
```

# vb.net - Dev Express 使用 RunWorkerAsync 皮肤问题填充 XtraGrid.GridControl

> ID：14646164
> 
> 赞同：0
> 
> 时间：2013-02-01T12:18:53.057
> 
> 标签：vb.net, outlook, interop, devexpress

我有一个奇怪的问题，如果我使用 RunWorkerAsync 填充我的 XtraGrid.GridControl，当前选定的皮肤不会将自身应用于网格滚动条 [在程序加载时]。

如果我不异步填充网格，则主题将应用于滚动条。

更多关于我的代码：

我使用 Outlook 互操作来收集电子邮件列表并填充它们以模拟电子邮件收件箱。我需要它来异步运行，否则程序会咆哮起来。

我在用：

```
Private WithEvents m_backgroundWorkerInbox As New BackgroundWorker  

Public Sub New()
    InitializeComponent()
    ' some general settings code + connection to outlook
    m_backgroundWorkerInbox.RunWorkerAsync()

end sub

Private Sub m_backgroundWorkerInbox_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles m_backgroundWorkerInbox.DoWork
    ' do some work
End Sub

Private Sub m_backgroundWorkerInbox_RunWorkerCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles m_backgroundWorkerInbox.RunWorkerCompleted
    ' do some work

End Sub 
```

如果我绕过异步并从异步工作人员中复制代码并将其放在`New()`滚动条中，则在第一次程序加载时收集正确的主题。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:24:15.057

经过一番调查，我发现：

如果在数据加载到网格后设置皮肤，它会将皮肤应用到滚动条。问题是你不能重新应用相同的皮肤，你需要换掉它。

一个好的但 hacky 的解决方案可能是使用来自不同数据源的 20 行 duff 数据填充网格，然后当 tbe 数据加载为空并重新填充网格时。

# vba - 合并excel中的单元格，具体取决于它的值

> ID：14646165
> 
> 赞同：1
> 
> 时间：2013-02-01T12:18:55.293
> 
> 标签：vba, excel

如果单元格具有特定的`value ("vv")`. 我发现的一个解决方案是每次进行更改时检查数组中的每个单元格，但认为有可能`cell`在它之后检查 a 的值`changed`？

因此，如果我输入一个空白单元格`"vv"`（不带引号）并选择一个不同的单元格，我希望该单元格（其中包含 vv）与它下面的那个单元格合并。在我的数组解决方案中，每次更改单元格都需要一秒钟，如果进行大量更改，这并不整洁。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:24:30.107

在您的工作表中尝试此代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    如果 Target.Value = "vv" Then Target.Resize(2).Merge
结束子

```

如果您想阻止下面单元格中的任何内容，此代码将询问您是否应合并单元格以防找到任何内容：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    如果 Target.Value = "vv" 那么
        如果 Target.Offset(1).Value "" 那么
             if MsgBox("是否覆盖下面的单元格（包含'" & _
                 Target.Offset(1) & "?", vbYesNo) = vbYes 然后
                 Target.Resize(2).Merge
            万一
        别的
            Target.Resize(2).Merge
        万一
    万一
结束子

```

注意：代码需要进入目标工作表，而不是新模块，因为它是一个事件过程：

![代码放置](../Images/05557bb039e0ff908b70b4605135e4c5.png)

# jquery - Accordionza：幻灯片动画完成时触发事件

> ID：14646168
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:01.057
> 
> 标签：jquery, animation, slide

我在网站上使用 Accordionza JQuery 手风琴插件。我想在幻灯片动画完成时触发一个事件。没有例如`slide_complete`功能或`callback`手风琴。我的意思是这样的：

```
$('#slide1').bind('slide_complete', function(event, slider){...}); 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T14:19:41.937

```
onSlideOpen: function() {
    var href = $(this).find("a").data('url');
    if(href) {
        setTimeout(function(){
            //do something here
        }, 500);
    }
} 
```

请记住：500 代表延迟（动画的持续时间）。所以如果你改变默认的“slideSpeed”，你也必须改变超时值。上面的例子是我能做你想做的事的唯一方法:)。希望对你有帮助

# c# - 为 youtube 视频添加评论

> ID：14646169
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:05.850
> 
> 标签：c#, asp.net, youtube-api, gdata-api

我的网页是在 .net 中开发的，我正在尝试使用以下代码向 youtube 视频添加评论。

```
 string lsDeveloperKey = "myDeveloperKey";

    //This will ask user to login to accounts.google for posting comment
        if (!Request.QueryString.AllKeys.Contains("token"))
        {
            string lsUserName = "myusername";
            string lsPassword = "mypassword";

            YouTubeRequestSettings loSettings = new YouTubeRequestSettings(Keys.PortalName, lsDeveloperKey, lsUserName, lsPassword);
            YouTubeRequest loRequest = new YouTubeRequest(loSettings);

            Uri videoEntryUrl = new Uri(string.Format("{0}/{1}", Google.GData.YouTube.YouTubeQuery.DefaultVideoUri, "ofjQ_Gf5CQc"));
            Google.YouTube.Video loVideo = loRequest.Retrieve<Google.YouTube.Video>(videoEntryUrl);

            string lsRandomVideoId = getRandomId() + loVideo.VideoId;
            Session[lsRandomVideoId] = loVideo; ;

            Response.Redirect(AuthSubUtil.getRequestUrl(Request.Url.ToString() + "?v=" + lsRandomVideoId, "http://gdata.youtube.com", false, true));
        }

    //This will post a comment for logged user
        else
        {
            Session["token"] = AuthSubUtil.exchangeForSessionToken(Request.QueryString["token"], null).ToString();

            YouTubeRequestSettings loSettings = new YouTubeRequestSettings(Keys.PortalName, lsDeveloperKey, (String)            Session["token"]);
            YouTubeRequest loRequest = new YouTubeRequest(loSettings);

            Video loVideo = (Video)Session[Request.QueryString["v"]];

            Comment loComment = new Comment();
            loComment.Content = "This is my comment from my app";
            loRequest.AddComment(loVideo, loComment);
        }
    } 
```

此代码执行没有任何错误。如果我使用“myusername”和“mypassword”登录，它也会发表评论。

但是如果我用任何其他用户登录它会给我以下错误：E

```
Execution of request failed: 
```

> [https://gdata.youtube.com/feeds/api/videos/ofjQ_Gf5CQc/comments](https://gdata.youtube.com/feeds/api/videos/ofjQ_Gf5CQc/comments)

```
 Stacktrace: at Google.GData.Client.GDataRequest.Execute() at
 Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter) at
 Google.GData.Client.GDataGAuthRequest.Execute() at
 Google.GData.Client.Service.EntrySend(Uri feedUri, AtomBase baseEntry,
 GDataRequestType type, AsyncSendData data) at
 Google.GData.Client.MediaService.EntrySend(Uri feedUri, AtomBase
 baseEntry, GDataRequestType type, AsyncSendData data) at
 Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry,
 AsyncSendData data) at Google.GData.Client.Service.Insert[TEntry](Uri
 feedUri, TEntry entry) at
 Google.YouTube.YouTubeRequest.AddComment(Video v, Comment c) at
 YouTubeComment.Page_Load(Object sender, EventArgs e) 
```

我在这方面做了很多工作。我不确定这里有什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:28:02.280

看起来您正在使用已弃用且可能无法正常工作的 ClientLogin。请考虑改用 OAuth2，这是一个示例：[http](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs) ://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs 。此外，YouTube 会拒绝某些评论，请尝试使用没有特殊字符的简单字符串。

# ios - Ios - 在后台模式下检测设备方向

> ID：14646170
> 
> 赞同：2
> 
> 时间：2013-02-01T12:19:09.337
> 
> 标签：ios, background, notifications, device-orientation

我的应用程序在后台模式下运行，因为我正在播放和录制音频。我希望在录制时找到设备方向。我设置了通知，告诉我方向何时发生变化，并且当应用程序在屏幕上处于活动状态时它可以正常工作。我的问题是，当我进入后台模式时，通知停止了。有没有办法在我的应用程序处于后台模式时继续收到这些通知？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:32:55.900

当您的应用从后台恢复时，您可以检查设备方向。`UIApplicationDelegate`协议有几种方法来处理应用程序从后台到前台的转换；检查[这个答案](https://stackoverflow.com/a/9860393/988769)以获得很好的文章。

# c - 索引结构中指针指向的数组

> ID：14646171
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:17.473
> 
> 标签：c, arrays, pointers, type-conversion, structure

看着我的[上一个问题](https://stackoverflow.com/questions/14629103/indexing-to-get-access-members-of-a-structure-c-programming)。我用这组代码得到了解决方案

```
const MEMBERS *some_members = (MEMBERS *) GET_MEM();
unsigned value1 = some_members->mem1;
unsigned value2 = *some_members->mem2; 
```

没有像我预期的那样工作。但是在样本是

```
unsigned sample [4] = {2,5,6,1}; 
```

如果我需要从结构中对数组的第三个字符（即 sample [3] =1\. ）进行索引，我该如何在数组中进行索引。我是否也将 value2 设为指针？

谢谢大家。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:22:47.520

在这种情况下，是的，做`value2`一个指针。以机智：

```
const MEMBERS *some_members = (MEMBERS *) GET_MEM();
unsigned value1 = some_members->mem1;
unsigned *value2 = some_members->mem2;

// These are true statements
value2[0] == 2;
value2[1] == 5;
value2[2] == 6;
value2[3] == 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:23:48.417

指针和数组的访问方式相同。

例如：

```
int array[4] = { 1, 2, 3, 4 };
printf("Third entry in array = %d\n", array[2]);

int *pointer = array;
printf("Third entry in array using pointer = %d\n", pointer[2]); 
```

如果指针是否在结构中无关紧要，只需使用正常的字段访问（例如`structure.pointer[2]`or `structpointer->pointer[2]`）。

# javascript - "NaNundefined"[10] ="e" 或 ([+[][[]]]+[][[]])[++[[]][+[]]+[+[]]] = “e”？

> ID：14646173
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:18.770
> 
> 标签：javascript

> **可能重复：**
> [你能解释为什么 ++[[]][+[]]+[+[]] = 10](https://stackoverflow.com/questions/7202157/can-you-explain-why-10)

众所周知，备忘单是我们可以找到的使用字符集完成任务的最短方法。我无法理解它是如何执行的。任何人都可以澄清吗？

怎么样`"NaNundefined"[10] ="e"` ？`([+[][[]]]+[][[]])[++[[]][+[]]+[+[]]] = "e"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:24:42.387

`"NaNundefined"[10] ="e"`很简单 -`e`是字符串中的第十一个字符。

`([+[][[]]]+[][[]])[++[[]][+[]]+[+[]]] = "e"`有点难，但您可以轻松地将其拆分：

```
[+[][[]]] -> [ NaN ]
[][[]] -> undefined
[ NaN ] + undefined -> "NaNundefined"
++[[]][+[]] -> 1
[+[]] -> "0"
1 + "0" -> "10"
"NaNundefined"["10"] -> "e" 
```

第二个版本实际上是构造第一个版本的一种方法，(ab) 使用 javascript 运算符的弱类型（例如，`[NaN] + "" -> "NaN"`）。它还使用了 javascript 中的数组始终由字符串索引的事实（因此`array[10]`等同于`array["10"]`）。

如果您想阻止某人理解代码，则第二个版本可能被视为一种混淆。不过，它并没有真正起到多大的作用，至少在日常编码生活中是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:23:14.603

索引 10 处的字符是 e: `"NaNundefin`**e**`d"[10] ="e"`

# android - 如何在 onReceive() 中停止来自 BroadcastReceiver 的线程

> ID：14646174
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:19.357
> 
> 标签：android

主要思想是如何从 onReceive() 停止运行线程，例如，如果连接丢失，停止正在连接互联网的线程？我有一个扩展 BroadcastReceiver 的类，我想访问另一个类中正在运行的线程来停止它。

# eclipse - 使用 Chrome 开发工具调试 JavaScript 时，Eclipse 中的变量评估失败

> ID：14646176
> 
> 赞同：0
> 
> 时间：2013-02-01T12:19:19.973
> 
> 标签：eclipse, google-chrome-devtools

我已经按照[http://code.google.com/p/chromedevtools/中的描述安装了](http://code.google.com/p/chromedevtools/)*Chrome Dev Tools* Eclipse 插件，并且调试 JavaScript 基本上可以工作。我可以在我的 JavaScript 源文件中设置断点，当我在 Chrome 中运行 JavaScript 代码时，Eclipse 会停止执行并打开*Debug*透视图。单步执行代码工作正常，我还可以在“*变量*”视图中看到局部变量和全局变量。

 **单击其中一个变量时，详细视图会显示一条错误消息，但是：

```
Helper script failed on remote: _com_chromium_debug_helper is not defined 
```

我在安装过程中遗漏了什么吗？

![有错误的变量视图](../Images/c71c458d919932f548114a957ca972c7.png)

**更新**

在项目页面上添加了一个问题：[http ://code.google.com/p/chromedevtools/issues/detail?id=85](http://code.google.com/p/chromedevtools/issues/detail?id=85)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:17:35.160

您很可能应该在项目页面上打开一个问题。这绝对是一个错误，修复它可能需要您提供额外的上下文。

这是 ChromeDevTools SDK 针对 WebKit 远程调试协议限制的解决方法的内部结构。**

# python - paramiko中的ftplib retrbinary？

> ID：14646185
> 
> 赞同：1
> 
> 时间：2013-02-01T12:19:55.083
> 
> 标签：python, sftp, paramiko

我正在研究 paramiko sftp。有没有类似于`ftplib` `retrbinary`paramiko中的功能的功能？

我的项目已经支持 ftp，并且数据存储在内存中，`cStringIO`然后用于访问它。我必须使用 paramiko 对 sftp 做同样的事情，但它不支持这些功能。`retrbinary``storebinary`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:33:24.590

没有任何`retrbinary`功能，因为 SSH 将*所有*文件都视为二进制文件。

另一方面，FTP 默认将文件视为文本文件，翻译行尾，因此`retrbinary`添加了一个单独的文件以防止对二进制文件进行翻译。

引用[`SFTPClient.file()`方法](http://lag.net/paramiko/docs/paramiko.SFTPClient-class.html#file)：

> 模式指示如何打开文件：`'r'`读取、`'w'`写入（截断现有文件）、`'a'`追加、`'r+'`读取/写入、`'w+'`读取/写入（截断现有文件）、`'a+'`读取/追加。python`'b'`标志被忽略，因为 SSH 将所有文件视为二进制文件。

# javascript - 灯箱登录表单停止工作

> ID：14646188
> 
> 赞同：0
> 
> 时间：2013-02-01T12:20:06.100
> 
> 标签：javascript, ajax, jquery, lightbox

我网站上的注册和登录链接放在主页上的灯箱 JS 脚本上。它曾经工作得很好，直到某个时候，但突然我意识到这些链接根本不起作用。我不记得在最近的任何时候摆弄过代码。

我自己不是开发人员，但是当我按照此处相关线程上的建议检查 Firebug 控制台上的代码时，我没有发现任何丢失的 JS 文件或括号或任何类似的东西。有人可以帮我解决这个问题吗？这是有问题的页面：http: [//bridgeurl.com](http://bridgeurl.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:35:17.383

```
 "NetworkError: 404 Not Found - http://bridgeurl.com/js/jquery-1.3.2.min.js"

            jquery....min.js

            TypeError: $(...).validate is not a function
            [Break On This Error]   

            errorPlacement: function(error, element) {

            bridgeurl.com (line 46)

            TypeError: $(...).validate is not a function
            [Break On This Error]   

            errorPlacement: function(error, element) { 
```

我从 bridgeurl.com 收到上述所有错误。仔细检查所有文件。您的 Jquery 包含路径错误。更正一个和所有 JS 包含文件的路径。

你可以在你的 HTML 中包含谷歌托管的 jquery

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script> 
```

# ruby-on-rails - PDFKit，TypeError“无法将哈希转换为字符串”

> ID：14646191
> 
> 赞同：0
> 
> 时间：2013-02-01T12:20:12.703
> 
> 标签：ruby-on-rails, ruby, typeerror, pdfkit

我正在使用 PDFKit 和它的 Middlware 将 HTML 呈现为 PDF，但是当我尝试转到 localhost:3000/booklets/1.pdf 时它一直出现 TypeError

```
can't convert Hash into String 
```

它说错误在 BookletsController#show 中。**这是我的booklets_controller.rb**的摘录

 **```
 def show
    @booklet = Booklet.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.pdf {
        html = render_to_string(:action => "show.html.erb", :formats => [:html])
        kit = PDFKit.new(html)
        send_data(kit.to_pdf, :filename => "booklet.pdf", :type => 'application/pdf')
      return
      }
    end
  end 
```

**环境.rb**

```
# Initialize the rails application
Ziin::Application.initialize!

Mime::Type.register "application/pdf", :pdf 
```

摘自**application.rb**

```
require 'pdfkit'
config.middleware.use "PDFKit::Middleware"

PDFKit.configure do |config|
    config.wkhtmltopdf = { :exe_path => '/usr/local/bin/wkhtmltopdf' }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:50:00.457

问题是您指定的执行路径。我只是在我自己的机器（ubuntu 12.04）上复制了这个问题，我通过不使用 wkhtmltopdf 的 gem install 来修复它，它添加了一些不起作用的 wkhtmltopdf 版本。

1.) 在此处查看如何安装 wkhtmltopdf（非 gem 版本） [https://github.com/pdfkit/pdfkit/wiki/Installing-WKHTMLTOPDF](https://github.com/pdfkit/pdfkit/wiki/Installing-WKHTMLTOPDF)

2.) 从您的 gem 文件中删除 'wkhtmltopdf'

3.) 通过执行“which wkhtmltopdf”找到 wkhtmltopdf 可执行文件。使用 exe_path 声明中返回的路径。

4.）不知道下一步是否重要，但我搬家了：

PDFKit.configure 做 |config| config.wkhtmltopdf = { :exe_path => "#{PATH}" 结束

进入 config/initializers/pdfkit.rb

*   还可以通过“gem uninstall wkhtmltopdf”删除 gem**

# three.js - SceneExporter 输出错误？

> ID：14646192
> 
> 赞同：0
> 
> 时间：2013-02-01T12:20:16.267
> 
> 标签：three.js

在 Three.js SceneExporter 中，当我导出整个场景时，在输出的 json 数据中，我意识到纹理没有正确导出。它产生纹理线为

```
"Texture_3": { "url" : "undefined", .... 
```

但是有质感。所以我检查了 SceneExporters 代码

```
var output = [
    '\t' + LabelString( getTextureName( t ) ) + ': {',
'   "url"    : "' + t.sourceFile + '",',
'   "repeat" : ' + Vector2String( t.repeat ) + ',',
'   "offset" : ' + Vector2String( t.offset ) + ',',
'   "magFilter" : ' + NumConstantString( t.magFilter ) + ',',
'   "minFilter" : ' + NumConstantString( t.minFilter ) + ',',
'   "anisotropy" : ' + t.anisotropy,
'}'
]; 
```

t 参数是材质的贴图属性，即 THREE.Texture。但是 THREE.Texture 中没有“sourceFile”属性或字段。那么它应该是什么？它是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:25:23.573

我自己的答案如下，更改 SceneExporters 代码更正了输出。我不确定这是官方解决方案，但我为我工作。

```
var output = [
    '\t' + LabelString( getTextureName( t ) ) + ': {',
'   "url"    : "' + t.image.src + '",',
'   "repeat" : ' + Vector2String( t.repeat ) + ',',
'   "offset" : ' + Vector2String( t.offset ) + ',',
'   "magFilter" : ' + NumConstantString( t.magFilter ) + ',',
'   "minFilter" : ' + NumConstantString( t.minFilter ) + ',',
'   "anisotropy" : ' + t.anisotropy,
'}' 
]; 
```

# xcode - 添加 UITextfield 后 UIScrollview 不起作用

> ID：14646193
> 
> 赞同：1
> 
> 时间：2013-02-01T12:20:16.397
> 
> 标签：xcode, uiscrollview, uitextfield

我有一个完美的滚动视图。

但是当我在滚动视图中放置带有界面构建器的 UITextfield 时，滚动视图不再滚动。

有什么建议么？

# sql - SQL Server 清除内存

> ID：14646195
> 
> 赞同：5
> 
> 时间：2013-02-01T12:20:19.970
> 
> 标签：sql, sql-server

是否可以从 SQL Server 填写的数据中清除 RAM 内存？

是否有任何程序或选项可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:27:55.677

您可以使用

```
CHECKPOINT
DBCC DROPCLEANBUFFERS 
```

从内存中[删除所有数据页](http://msdn.microsoft.com/en-us/library/ms187762.aspx)。测试服务器性能很有用：如果未缓存查询所需的数据页，则查询的执行方式会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:25:45.427

你不释放内存。如果您希望它使用更少的内存，请在服务器设置中添加限制。

如果您确实释放了内存，它会减慢您的查询速度，因为所有内容都必须再次从磁盘读取。

# jquery - 表列与 IE 中的固定标题不对齐

> ID：14646197
> 
> 赞同：2
> 
> 时间：2013-02-01T12:20:32.273
> 
> 标签：jquery, html, css, internet-explorer

我正在创建一个带有固定标题的滚动表，除了一个小问题外，它工作得很好。这些列与 IE 中的标题不对齐，但它们在其他主要浏览器（Chrome、firefox、opera、safari）中正确对齐

我的问题是我需要添加甚至删除什么，以便我可以在 IE 中对对齐进行排序？

下面是一个屏幕截图，显示了它的样子：

![在此处输入图像描述](../Images/25ac5bb96f8dc7245b9a26a84bbc147d.png)

下面是关于上表的 HTML 和 CSS 及其虚拟数据：

HTML：

```
 <table id="tableqanda" align="center" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="5%" class="questionno">Question No.</th>
        <th width="29%" class="question">Question</th>
        <th width="7%" class="option">Option Type</th>
        <th width="6%" class="noofanswers">Number of Answers</th>
        <th width="8%" class="answer">Answer</th>
        <th width="6%" class="noofreplies">Number of Replies</th>
        <th width="6%" class="noofmarks">Number of Marks</th>
        <th width="11%" class="image">Image</th>
        <th width="11%" class="video">Video</th>
        <th width="11%" class="audio">Audio</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" align="center" cellpadding="0" cellspacing="0">
    <tbody>
        <tr class="tableqandarow">
<td width="5%" class="questionno">1</td>
<td width="29%" class="question">What is 4+4</td>
<td width="7%" class="option">A-E</td>
<td width="6%" class="noofanswers">1</td>
<td width="8%" class="answers">B</td>
<td width="6%" class="noofreplies">Multiple</td>
<td width="6%" class="noofmarks">5</td>
<td width="11%" class="imagetd">&nbsp;</td>
<td width="11%" class="videotd">&nbsp;</td>
<td width="11%" class="audiotd">&nbsp;</td>
</tr>
<tr class="tableqandarow">
<td width="5%" class="questionno">2</td>
<td width="29%" class="question">Name these 2 things</td>
<td width="7%" class="option">A-D</td>
<td width="6%" class="noofanswers">2</td>
<td width="8%" class="answers">A,C</td>
<td width="6%" class="noofreplies">Multiple</td>
<td width="6%" class="noofmarks">5</td>
<td width="11%" class="imagetd">&nbsp;</td>
<td width="11%" class="videotd">&nbsp;</td>
<td width="11%" class="audiotd">&nbsp;</td>
</tr>
    </tbody>
    </table>
    </div> 
```

CSS：

```
#tableqanda_onthefly_container
{
    width:100%;
    overflow-y: scroll;
    overflow-x: hidden;
    max-height:500px;
    clear:both;
}

#tableqanda_onthefly
{
    width:100%;
    clear:both;
    overflow:auto;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}   

#tableqanda{
    width:100%;
    margin-left:0;
    float:left;
}   

#tableqanda td { 
    vertical-align: middle;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

#tableqanda_onthefly td{
    border:1px black solid;
    border-collapse:collapse;
    word-wrap:break-word;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
} 
```

我还有一个 jQuery 代码，它设置了滚动 abr 的宽度，但不知道这是否会有所不同：

```
$(document).ready(function(){
    var flag = true;

    if(flag == true)
    {
        var qanda_tbl = $("#tableqanda").width();
        $("#tableqanda").css({"width": (qanda_tbl - 16)+ "px"});
    }

    var qanda_tbl_onthefly = $("#tableqanda_onthefly").width();

    if(qanda_tbl > qanda_tbl_onthefly)
    {
         $("#tableqanda").css({"width": (qanda_tbl_onthefly - 16)+ "px"});
         $("#tableqanda_onthefly_container").css({"width": (qanda_tbl_onthefly)+ "px"});
    }
    }); 
```

**更新：**

我忘了包含一个 Jfiddle，这是一个 jsfiddle，如您所见，它将列与当前代码正确对齐。但是 ie 中必须缺少一些东西才能在 ie 中执行此操作：http: [//jsfiddle.net/q5ukD/1/](http://jsfiddle.net/q5ukD/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:03:55.273

怎么`width:100%`去掉`#tableqanda_onthefly`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:06:46.727

为什么你的 thead 和 tbody 在单独的表中？把它们放在同一张桌子上为我解决了这个问题。

# c - 如何将此while循环更改为C中的for循环？

> ID：14646206
> 
> 赞同：-4
> 
> 时间：2013-02-01T12:20:50.967
> 
> 标签：c, robotics

此代码用于使用 C 使模拟器中的机器人在特定路径中移动。while***循环***的代码是我需要进行更改的地方，我想知道如何更改代码以使机器人直线移动并停止，以及如何使用“定时距离”使其在三角形中移动。

```
while (1) {
    sprintf(buf, "M LR 60 -60\n");
    write(sock, buf, strlen(buf));
    memset(buf, 0, 80);
    read(sock, buf, 80);
} 
```

`M LR`是机器人左右电机的名称（机器人有两个电机使其移动），60 和 -60 是它们的速度。此代码使机器人旋转。

完整代码在此链接中：[ [C Robot](https://docs.google.com/document/d/1Wv8afdcxeNp9wT-uidCjOILHOaLutXi37a4iK-8HXEg/edit?usp=sharing) ]

如何使这段代码工作？

```
int k = 1;

for (k = 1; k < 3 ; k++){
    sprintf(buf, "M LR 20 10\n");
    write(sock, buf, strlen(buf));
    memset(buf, 0, 80);
    read(sock, buf, 80);
}

for (k=3; k > 3; k++) {
    sprintf(buf, "M LR 0 0\n");
    write(sock, buf, strlen(buf));
    memset(buf, 0, 80);
    read(sock, buf, 80);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:21:45.400

```
for(;;) {
    sprintf(buf, "M LR 60 -60\n");
    write(sock, buf, strlen(buf));
    memset(buf, 0, 80);
    read(sock, buf, 80);
} 
```

我认为没有理由这样做。

# c++ - 将 SDL 库添加到我的程序

> ID：14646208
> 
> 赞同：2
> 
> 时间：2013-02-01T12:20:56.583
> 
> 标签：c++, sdl

已经有几个问题了，但是所有的提问者，可以这么说，比我高一级。我只知道这里有一些下载链接[，](http://www.libsdl.org/download-1.2.php)我可能应该下载**SDL-1.2.15-win32-x64.zip（64 位 Windows）**以匹配我的系统和**SDL-devel-1.2.15-mingw32.tar.gz (Mingw32)**来匹配我的编译器。怎么办？开发档案包含一些 C++ 项目，我不知道该怎么处理它。要包括哪些文件？链接器中要链接哪些文件？

**编辑：**

# 信息

系统：Windows 7x64
IDE：代码：：块编译器：G++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:17:47.350

所以我的问题的实际答案只是这个傻瓜手册的链接：http: [//lazyfoo.net/SDL_tutorials/lesson01/index.php](http://lazyfoo.net/SDL_tutorials/lesson01/index.php)
在这里任何人都可以选择他的环境来获得帮助。我对这个答案没有任何贡献 - @Ergo Proxy 已将其发布为对我的问题的评论。但这正是我所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T12:34:24.207

这似乎是一个好的开始：使用 SDL2 创建应用程序窗口。您只需链接静态 sdl.lib（或 sdl2.lib，如果您拥有最新版本的 SDL）。尝试编译并执行它。

```
#include <SDL2/SDL.h>
#include <iostream>

int main(int argc, char* argv[]){

  SDL_Init(SDL_INIT_VIDEO);   // Initialize SDL2

  SDL_Window *window;        // Declare a pointer to an SDL_Window

  // Create an application window with the following settings:
  window = SDL_CreateWindow( 
    "An SDL2 window",                  //    window title
    SDL_WINDOWPOS_UNDEFINED,           //    initial x position
    SDL_WINDOWPOS_UNDEFINED,           //    initial y position
    640,                               //    width, in pixels
    480,                               //    height, in pixels
    SDL_WINDOW_SHOWN|SDL_WINDOW_OPENGL //    flags - see below
  );

  // Check that the window was successfully made
  if(window==NULL){   
    // In the event that the window could not be made...
    std::cout << "Could not create window: " << SDL_GetError() << '\n';
    return 1;
  }

  // The window is open: enter program loop (see SDL_PollEvent)

  SDL_Delay(3000);  // Pause execution for 3000 milliseconds, for example

  // Close and destroy the window
  SDL_DestroyWindow(window); 

  // Clean up
  SDL_Quit(); 
  return 0;   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:42:22.073

我已经在 Visual Studio 上安装了 SDL。这很容易，你最好使用它，因为它不需要 mingw。访问 SDL 网站并下载 SDL-devel-1.2.15-vc.zip 包。然后将其提取到您的系统中。然后打开你的Visual Studio，在“VC 目录”部分进入你的项目属性，你应该设置SDL地址。将 SDL\lib 添加到“lib 目录”，将 SDL\include 添加到“包含”。在此之后，在项目属性中转到链接器\输入，然后将“SDL.lib”添加到它的第一个属性中。毕竟你可以用它编译你的代码。

# objective-c - 如何从ios中的数组中获取json

> ID：14646215
> 
> 赞同：0
> 
> 时间：2013-02-01T12:21:12.803
> 
> 标签：objective-c, nsarray

我有一个包含字符串的数组，而 json 有对象，我只需要从数组中获取 json。如何从数组中获取json？我在下面显示了数组：

```
array (
    "",
    "",
    "",
    "sda@sdas.com",
    "[{  \"field_value\" : \"\\/Users\\/poornima\\/Library\\/Application Support\\/iPhone Simulator\\/5.1\\/Applications\\/BCA9D949-D85D-4CA7-B753-7315C0383137\\/Documents\\/EGOoTtqT4e.png\",  \"field_name\" : \"Photo\"},{  \"field_value\" : \"\",  \"field_name\" : \"Signature\"},{  \"field_value\" : \"\",  \"field_name\" : \"File Upload\"}]",
    "",
    "",
    "",
    "37.785834",
    "-122.406417",
    "2013-02-01 05:44:01",
    "superadmin@gmail.com",
    ""
) 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:49:47.883

你所要做的 ：

for(NSString *string in arrayName) {
NSDictionary *dicReturn = [string JSONValue]; if(dicReturn !=nil){ `NSString * fieldvalue =[dicReturn objectForKey:@"field_value"]; NSString *fileName =[dicReturn objectForKey:@"field_name"]; }` }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:34:06.883

看起来像这样..

```
NSString *jsonString = @"your json";
NSData *JSONdata = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *jsonError = nil;
if (JSONdata != nil) {
    //this you need to know json root is NSDictionary or NSArray , you smaple is NSDictionary
    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:JSONdata options:0 error:&jsonError];
    if (jsonError == nil) {
        //every need check value is null or not , json null like ( "count": null )
        if (dic == (NSDictionary *)[NSNull null]) {
            return nil;
        }

        //every property you must know , what type is

        if ([dic objectForKey:@"count"] != [NSNull null]) {
            [self setCount:[[dic objectForKey:@"count"] integerValue]];
        }
        if ([dic objectForKey:@"item"] != [NSNull null]) {
            NSArray *itemArray = [dic objectForKey:@"item"]; // check null if need
            for (NSDictionary *itemDic in itemArray){
                NSString *_id = [dic objectForKey:@"id"]; // check null if need
                NSNumber *found = (NSNumber *)[dic objectForKey:@"found"];
                //.....
                //.... just Dictionary get key value
            }

        }
    }
} 
```

# vb.net - 如何读取传递的参数

> ID：14646217
> 
> 赞同：1
> 
> 时间：2013-02-01T12:21:29.093
> 
> 标签：vb.net, winforms

我试图读取传递的参数，
例如：
shell：

```
MyApplication.exe -t 1233123 
```

我的应用程序代码：

```
dim tt as string = GetArgo(0).toString() 
```

我想得到“1233123”（我试过 Me.Startup 但我的表单中没有启动事件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:23:44.150

您可以通过调用来获取参数[`Environment.GetCommandLineArgs`](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)：

```
Dim args() As String = Environment.GetCommandLineArgs() 
```

然后你可以像遍历任何其他数组一样遍历这个数组。请记住，数组中的第一项是执行程序的文件名。

# c++ - C++ 中的交互式管道

> ID：14646219
> 
> 赞同：3
> 
> 时间：2013-02-01T12:21:31.660
> 
> 标签：c++, fork, pipe, popen, interactive

我需要执行一个外部程序并交替访问它的标准输入和标准输出，就像控制台终端本身一样。我使用了 popen()，但它不提供双向管道。使用 pipe() 和 fork() 也不能交互地工作，因为必须关闭写管道才能访问读管道。

请给我一些帮助来想出它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:26:04.040

您需要打开两个管道，一个连接到子进程的标准输入，一个连接到标准输出。您可能还需要一些方法在您的流程中多路复用输入/输出。

另一种选择可能是使用伪终端，这将使您与具有伪终端的客户端软件进行双向通信，因为它是 I/O 通道 - 尽管我不太确定您要执行的步骤这个，我只是建议它，因为我知道其他程序，例如 xterm 和 ssh 使用该方法。

之前也问过同样的问题，答案和我在第一段中描述的差不多： [popen 同时读写](https://stackoverflow.com/questions/6171552/popen-simultaneous-read-and-write) （这个答案包括一些看起来不错的代码！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:29:36.480

您将不得不使用特定于操作系统的工具来为 stdout 和 stdin（以及 stderr，如果您愿意）创建单独的管道。在 POSIX 平台上，您可以使用`dup2()`将适当的管道末端放置到标准输出和标准输入（以及标准错误）。之后您将不得不恢复原始描述符`fork()`，所以不要忘记在放置新描述符之前保存它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:26:45.783

管道不是那样工作的。您只能使用读取或写入管道。

此外，由于方向的原因，标准输入和输出不能是同一个端点。它来自“管道工作”。有人开始并把一些东西放到标准输出中，这些东西可以被其他人用作标准输入，然后又把它放在标准输出中作为第三个......

对于双向通信，您需要找到另一种进程间通信方式。它是什么取决于您的实施。

# php - 出现在正文标签 wordpress 中的标题

> ID：14646223
> 
> 赞同：0
> 
> 时间：2013-02-01T12:21:48.493
> 
> 标签：php, wordpress, header

我已经将一个新主题上传到 wordpress 网站，并且标题链接和脚本出现在 body 标记内。我读过其他人也遇到过这个问题，我需要用 UTF8 保存 header.php 而不使用 BOM 编码。但是我尝试在文件元标记中包含'charset =“UTF8-without-BOM'但仍然没有！网站位于：[http ://rarebreeddigital.com/](http://rarebreeddigital.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:50:02.323

首先，检查主题是否有空字符串或之前的一些符号`<!DOCTYPE`，或者某些函数打印字符串或之前的符号`<!DOCTYPE`。如果是，则删除此字符串或符号：`<!DOCTYPE`- 必须是 html-document 的开头，浏览器解析器区分这一行，如何解析文档。然后使用notepad++或其他富文本编辑器，打开主题的header.php文件，然后使用菜单Encoding（在Notepad++中）将编码改为“UTF8-without-BOM”，但元标记编码必须是：`<meta charset="UTF-8" />`，不要在这里使用“无 BOM”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T15:30:37.980

我使用了**包含'some_other.php'；**在我的functions.php中，同样的事情发生了：标题出现在正文中。

我删除了**include**，并将代码复制到它的位置，然后瞧 - 标题移回了 head 标签之间。

**如果我使用包含**而不是将代码放在functions.php中，我无法找出问题所在，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-25T23:09:30.497

我对 Wordpress 4.9.4-en_GB 也有同样的问题。

我通过执行以下操作来修复它：

将数据库的字符集设置为`utf8`并将排序规则设置为`utf8_general_ci`

使用 Notepad++ 或任何其他编辑器将文件的编码更改为 ANSI 或 utf8`index.php`而无需 BOOM。`header.php`

# javascript - 覆盖 Asp.net ReportViewer 工具栏分页事件

> ID：14646226
> 
> 赞同：1
> 
> 时间：2013-02-01T12:21:56.573
> 
> 标签：javascript, jquery, asp.net, jquery-events, reportviewer

如何使用 jQuery 或 JavaScript 覆盖 Asp.net ReportViewer 工具栏的分页点击事件？

![在此处输入图像描述](../Images/99d43acc41737ba42e696a6b3d122e04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:12:21.183

以下答案定义了一个样式类，该类以具有 ID 的控件为目标。

```
 <style>
        /* this will remove the spinner */
        div#ReportViewer1_AsyncWait_Wait img{ display: none; } 
        /* this allows you to modify the td that contains the spinner */
        div#ReportViewer1_AsyncWait_Wait table tbody tr td:first-child{ background: red; width: 100px; height: 100px; } 
    </style> 
```

[ASP.NET 中的 Reportviewer 控件加载指示器](https://stackoverflow.com/questions/10784737/reportviewer-control-loading-indicator-in-asp-net)

我还在寻找其他解决方案，如果我找到了，我会添加它们。

# ssrs-2008 - 在 ssrs 中查找未显示 tablix 中的值。

> ID：14646227
> 
> 赞同：1
> 
> 时间：2013-02-01T12:21:57.300
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, sharepoint-list

工作环境是sharepoint2010。我们已经在 vs2008 中将 sharepoint 列表数据源连接到了报表项目。可以使用 tablix 在单个数据集中显示数据。我们有 2 个数据集 1)salesMain 2)Customers

在 salesMain 中，我们有 SalesID、CustomerID、saleDate、TotalAmount、taxAmt、netAmount 等字段

在客户中，我们有客户 ID、客户名称、地址

我需要显示 SalesID、CustomerName、Address、netAmount、TaxAmt、TotalAmount 等数据

我们已将 SalesMain 数据集分配给 Tablix，它按原样显示数据。问题是显示的某些数据是外键值，例如 CustomerID。我们需要使用外键值（CustomerID）获取像“customername”这样的值。我们接下来要做的是使用占位符而不是 customerID 字段，我们使用 Lookup 设置了一个表达式，但该字段显示为空白。查找方法类似于这种[查找](http://msdn.microsoft.com/en-us/library/ee210531.aspx)方法。SalesMain 数据集是 Tablix 表 1 的源（数据集名称）。我们使用的查找函数是 =Lookup(Fields!CustomerID.Value, Fields!customerID.Value, Fields!CustomerName.Value, "Customer")

其中第一个参数是查找的键（foriegnkey），第二个参数是要匹配的键（客户的主键），第三个参数是要检索的值（要显示在 tablix 单元格中），第四个参数是报告（客户）

任何人都可以建议为什么 Lookup dosent wrk。在 sharepointlist 中，我们没有使用任何查找（在没有设置表关系的意义上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-19T18:26:41.577

我在使用 Sharepoint 数据集和 lookupset 函数时遇到了同样的问题，我注意到在 Sharepoint 源定义中，外键字段是 Lookup 类型，所以我在 SSRS 中修复了这个转换字段，如下所示：

```
=Lookup(**CInt(Fields!CustomerID.Value)**, Fields!customerID.Value, Fields!CustomerName.Value, "Customer") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:38:18.890

很抱歉让您失望，但一张表（tablix）只能处理一个数据集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T12:58:21.273

Jijeshan009，你是对的，Lookup 应该为你解决问题。

注意：
- 在 Business Intelligence Development Studio 中预览报告时，打开错误列表并检查警告。查找错误可能在该列表中（例如转换失败）。
- 有时所有代码看起来都是正确的，但#error 将显示在使用查找的列中。关闭投标，重新启动机器等将不起作用。*但是可以*使用*不同*参数（如果有的话）执行报告。您将获得新数据而不是缓存数据，并且查找可能会起作用。
- dataset1 和 dataset2 的列必须是同一类型。您甚至可以将来自 Oracle 的数据集与来自 SQL Server 的数据集混合在一起：例如，一个 varchar2 列和一个 varchar 列。
- @Gil Peretz，查找将适用于每一行，而不仅仅是第一行。我认为数据被缓存了，因为我没有性能问题（甚至使用多列）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T00:00:16.453

稍微偏离主题，但在使用外键（第一个参数）的值为 NULL 的 Lookup 函数时也会出现此错误。至少这是我在尝试使用 Lookup 连接两个数据集（两个 SharePoint 列表）时发现的。

# iphone - 像上传的图片一样在 iphone 中下拉

> ID：14646230
> 
> 赞同：-3
> 
> 时间：2013-02-01T12:22:08.620
> 
> 标签：iphone, ios5, dropdownlistfor

![在此处输入图像描述](../Images/6a9963e3193a13ad6c7f0a339fb7f0b6.png)

如何在 iphone 中创建这种类型的 DropDown 像上传的图像..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:39:26.777

您必须创建一个包含 uitableview 的视图并将其添加到 self.view 。或者您可以使用**UIPicker**这个组件作为 A 列表工作

# jquery - Bootstrap 崩溃 - 转到打开项目的顶部？

> ID：14646231
> 
> 赞同：15
> 
> 时间：2013-02-01T12:22:10.457
> 
> 标签：jquery, twitter-bootstrap, scrollto, collapse

我正在使用引导折叠功能，但是当我打开一个内容很多的元素，然后打开下一个元素时，它会跳下并且不会到达打开元素的顶部。我尝试使用如下所示的 scrollto 插件，但它不起作用：

JS：

```
$(function(){
    $('a.accordion-toggle').click(function(){
        $.scrollTo( this, 500);                                             
    })
}); 
```

HTML：

```
<div class="accordion" id="accordion2">
    <div class="accordion-group heading-left-11">
        <h5 class="accordion-heading row">
            <a class="accordion-toggle span11" data-toggle="collapse" data-parent="#accordion2" href="#collapse1">Austria</a>
            <div class="icon-rt span1">
                <span class="icn"></span>
            </div>
        </h5>
        <ul id="collapse1" class="member_list accordion-body collapse row">
            <li class="accordion-inner pull-left span4">
                <a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=101">Filmladen</a>
                <span> Michael Stejskal</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=101" title="Filmladen" ><img src="http://dev.europa-distribution.org/assets/logos_film_laden-570x190.png" alt="Filmladen" ></a>
            </li>
            <li class="accordion-inner pull-left span4">
                 <a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=194">Polyfilm</a>
                 <span> Hans Koenig</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=194" title="Polyfilm" ><img src="http://dev.europa-distribution.org/assets/logos_polyfilm-570x190.png" alt="Polyfilm" ></a>
             </li>
             <li class="accordion-inner pull-left span4">
                 <a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=228">Stadtkino Filmverleih</a>
                 <span> Claus Philipp</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=228" title="Stadtkino Filmverleih" ><img src="http://dev.europa-distribution.org/assets/logos_stadtkino_filmverleih-570x190.png" alt="Stadtkino Filmverleih" ></a>
             </li>
        </ul>
    </div>
    <div class="accordion-group heading-left-11">
        <h5 class="accordion-heading row">
            <a class="accordion-toggle span11" data-toggle="collapse" data-parent="#accordion2" href="#collapse2">Belgium</a>
            <div class="icon-rt span1">
                <span class="icn"></span>
            </div>
        </h5>
        <ul id="collapse2" class="member_list accordion-body collapse row">
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=6">ABC</a><span> Nicolaine Den Breejen</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=6" title="ABC" ><img src="http://dev.europa-distribution.org/assets/logos_genci_kino_abc-570x190.png" alt="Genci kino abc" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=61">Cineart-Cinelibre</a><span> Eliane du Bois &amp; Stephan de Potter</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=61" title="Cineart-Cinelibre" ><img src="http://dev.europa-distribution.org/assets/logos_cineart-570x190.png" alt="Cineart" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=127">Imagine Film Distribution</a><span> Christian Thomas &amp; Tinne Bral</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=127" title="Imagine Film Distribution" ><img src="http://dev.europa-distribution.org/assets/logos_imagine-570x190.png" alt="Imagine" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=214">Le Parc Distribution</a><span> Jean-Pierre Pécasse</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=214" title="Le Parc Distribution" ><img src="http://dev.europa-distribution.org/assets/logos_le_parc-570x190.png" alt="le Parc distribution" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=145">Lumière</a><span> Jan de Clerq &amp; Annemie Degryse</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=145" title="Lumière" ><img src="http://dev.europa-distribution.org/assets/logos_lumiere-570x190.png" alt="logos_lumiere" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=383">O’Brother</a><span> Olivier Bronckart</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=383" title="O’Brother" ><img src="http://dev.europa-distribution.org/assets/logos_obrother_distribution-570x190.png" alt="obrother distribution" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=185">Paradiso Filmed Entertainment</a><span> Olivier Mortagne</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=185" title="Paradiso Filmed Entertainment" ><img src="http://dev.europa-distribution.org/assets/logos_paradiso-570x190.png" alt="Paradiso Films" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=529">U-Dream</a><span> Stephanie Van den Berge</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=529" title="U-Dream" ><img src="http://dev.europa-distribution.org/assets/logos_udream-570x190.png" alt="uDream" ></a></li>                                
        </ul>
    </div>
    <div class="accordion-group heading-left-11">
        <h5 class="accordion-heading row">
            <a class="accordion-toggle span11" data-toggle="collapse" data-parent="#accordion2" href="#collapse3">Bulgaria</a>
            <div class="icon-rt span1">
                <span class="icn"></span>
            </div>
        </h5>
        <ul id="collapse3" class="member_list accordion-body collapse row">
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=337">Artfest</a><span> Stefan Kitanov &amp; Mira Staleva</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=337" title="Artfest" ><img src="http://dev.europa-distribution.org/assets/logos_artfest-570x190.png" alt="Art Fest" ></a></li>
            <li class="accordion-inner pull-left span4"><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=302">Pro Films</a><span> Emil Simeonov</span><a href="http://www.cidinet.eu/display_distributor.php?id_target_distributor=302" title="Pro Films" ><img src="http://dev.europa-distribution.org/assets/logos_pro_films-570x190.png" alt="Pro Films" ></a></li>                                     
        </ul>
    </div>
    <div class="accordion-group heading-left-11">
        <h5 class="accordion-heading row">
            <a class="accordion-toggle span11" data-toggle="collapse" data-parent="#accordion2" href="#collapse4">Canada</a>
            <div class="icon-rt span1">
                <span class="icn"></span>
            </div>
        </h5>
    <ul id="collapse4" class="member_list accordion-body collapse row">
        <li class="accordion-inner pull-left span4">Metropole Films<span> Charles Tremblay</span><img src="http://dev.europa-distribution.org/assets/logos_metropole_film_distribution-570x190.png" alt="métropole Films Distribution" ></li>
    </ul>
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-23T17:27:44.210

Bootstrap 3 中的事件名称已更改，因此 @bboymaanu 将无法如图所示工作。它应该改用“shown.bs.collapse”事件。

```
$(".accordion-body").on("shown.bs.collapse", function () {
    var selected = $(this);
    var collapseh = $(".collapse.in").height();
    $.scrollTo(selected, 500, {
        offset: -(collapseh)
    });
}); 
```

[此处记录了](http://getbootstrap.com/javascript/#collapse)新事件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T02:50:04.417

我已经滚动到使用引导崩溃，但代码适用于 WordPress。我带来了你的内容，它有效。Bootstrap Collapse 有一个显示事件，然后您需要知道要向上滚动的内容的高度。

```
$(".accordion-body").on("shown", function () {
    var selected = $(this);
    var collapseh = $(".collapse .in").height();
    $.scrollTo(selected, 500, {
        offset: -(collapseh)
    });
}); 
```

您可能需要稍微调整一下，但它应该可以工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-29T05:29:23.253

```
$(".accordion-body").on("shown", function () {
var id = $(this).attr('id');
$('html, body').animate({scrollTop: $('#'+id).offset().top + -50}, 1000);
});
}); 
```

简单的例子。".top + -50" 是从元素顶部减去 50 像素，允许顶部有一些填充。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-05T13:08:52.383

这是基于其他建议的解决方案：

*   也适用于嵌入式手风琴
*   滚动，因此标题也显示
*   仅当尚未出现在屏幕上时
*   动画也

代码：

```
$('#accordion').on('shown.bs.collapse', function (e) {

  // Validate this panel belongs to this accordian, and not an embedded one
  var actualAccordianId = $('a[href="#' + $(e.target).attr('id') + '"').data('parent');
  var targetAccordianId = '#' + $(this).attr('id');
  if (actualAccordianId !== targetAccordianId) return;

  var clickedHeader = $(this).find('.panel > .collapse.in').closest('.panel').find('.panel-heading');
  var offset = clickedHeader.offset();
  var top = $(window).scrollTop();
  if(offset) {
    var topOfHeader = offset.top;
    if(topOfHeader < top) {
      $('html,body').animate({ scrollTop: topOfHeader}, 100, 'swing');
    }
  }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-04T08:38:39.753

```
$('#accordion').on('shown.bs.collapse', function () {

  var panel = $(this).find('.in');

  $('html, body').animate({
        scrollTop: panel.offset().top
  }, 500);

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-16T20:53:36.667

你可以试试这个：

我使用了以下，就像一个魅力：

```
$("#accordion2").bind('shown', function() {
        var active=$("#accordion_univlist .in").attr('id');
        scrollhere('#'+active);
        $('.closebutton-right').hide(); 
}); 

$('.accordion-heading').click(function () { 
  // Do something if you want to do on click  else ignore this handler.
}

function scrollhere(destination){
    var stop = $(destination).offset().top - 80;
    var delay = 1000;
    $('body,html').animate({scrollTop: stop}, delay);
    return false;
} 
```

它还提供弹跳效果，我喜欢它。

# ios - 带有 AVPlayer 的多个视频

> ID：14646235
> 
> 赞同：46
> 
> 时间：2013-02-01T12:22:24.197
> 
> 标签：ios, objective-c, avplayer, avcomposition, avplayerlayer

我正在为 iPad 开发一个 iOS 应用程序，它需要在屏幕的某些部分播放视频。我有几个视频文件需要按照编译时未给出的顺序依次播放。它必须看起来好像只是一个视频播放。当从一个视频切换到下一个视频时，这两个视频的最后一帧或第一帧会显示一些延迟，这很好，但不应该出现没有内容的闪烁或白屏。视频不包含音频。重要的是要考虑内存使用情况。这些视频具有非常高的分辨率，并且可以同时播放多个不同的视频序列。

为了获得这一点，我已经尝试了一些解决方案。它们在下面列出：

## **1\. 带有 AVComposition 的 AVPlayer，其中包含所有视频**

在这个解决方案中，我有一个 AVPlayer，它将仅在使用 AVComposition 制作的 AVPlayerItem 上使用，该 AVComposition 包含彼此相邻的所有视频。当转到特定视频时，我会寻找下一个视频开始的合成时间。此解决方案的问题是，在寻找播放器时，它会快速显示它正在寻找的一些帧，这是不可接受的。似乎没有办法直接跳转到构图中的特定时间。我尝试通过制作刚刚完成的视频中最后一帧的图像来解决这个问题，然后在搜索时将其显示在 AVPLayer 前面，最后在搜索完成后将其删除。我正在使用 AVAssetImageGenerator 制作图像，但由于某种原因，图像的质量与视频不同，因此在视频上显示和隐藏图像时会有显着变化。另一个问题是 AVPlayer 使用大量内存，因为单个 AVPlayerItem 包含所有视频。

## **2.具有多个AVPlayerItems的AVPlayer**

此解决方案为每个视频使用 AVPlayerItem，并在切换到新视频时替换 AVPlayer 的项目。这样做的问题是，当切换 AVPlayer 的项目时，它会在加载新项目时短时间显示白屏。要解决此问题，可以使用在加载时将图像放在最后一帧前面的解决方案，但仍然存在图像和视频质量不同且显着的问题。

## **3\. 两个 AVPlayer 相互叠放轮流播放 AVPlayerItem**

我尝试的下一个解决方案是让两个 AVPlayer 相互叠加，轮流播放 AVPlayerItems。因此，当播放器完成播放时，它将停留在视频的最后一帧。另一个 AVPlayer 将被带到前面（其 item 设置为 nil，因此它是透明的），并且下一个 AVPlayerItem 将插入到该 AVPlayer 中。一旦加载它就会开始播放，并且两个视频之间的流畅交易的错觉将完好无损。此解决方案的问题是内存使用情况。在某些情况下，我需要同时在屏幕上播放两个视频，这将导致 4 个 AVPlayer 同时加载一个 AVPlayerItem。这只是太多的内存，因为视频可以是非常高分辨率的。

* * *

是否有人对上面发布的整体问题和经过尝试的解决方案有一些想法、建议、评论或其他内容。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-07-01T19:45:58.990

所以这个项目现在已经在 App Store 中上线了，是时候回到这个帖子并分享我的发现并揭示我最终做了什么。

**什么没有奏效**

我在包含所有视频的大型 AVComposition 上使用的第一个选项不够好，因为没有办法在没有小的擦洗故障的情况下跳转到合成中的特定时间。此外，由于 API 无法为暂停提供帧保证，因此我在组合中的两个视频之间准确暂停视频时遇到了问题。

第三个有两个 AVPlayer 并让他们轮流在实践中效果很好。特别是在 iPad 4 或 iPhone 5 上。RAM 量较低的设备是一个问题，因为同时在内存中保存多个视频会消耗太多内存。特别是因为我必须处理非常高分辨率的视频。

**我最终做了什么**

好吧，左边是选项 2。在需要时为视频创建一个 AVPlayerItem 并将其提供给 AVPlayer。这个解决方案的好处是内存消耗。通过懒惰地创建 AVPlayerItems 并在不再需要它们时将它们丢弃可以将内存消耗保持在最低限度，这对于支持 RAM 有限的旧设备非常重要。这个解决方案的问题是，当从一个视频转到下一个视频时，在下一个视频加载到内存中时，会出现一个空白屏幕。我解决此问题的想法是在 AVPlayer 后面放置一个图像，该图像将在播放器缓冲时显示。我知道我需要与视频完全像素到像素完美的图像，所以我捕获的图像是视频最后一帧和第一帧的精确副本。

**这个解决方案的问题**

我遇到的问题是，如果视频/图像不是其本机大小或模块 4 缩放，则 UIImageView 内的图像位置与 AVPlayer 内视频的位置不同。换句话说，我对如何使用 UIImageView 和 AVPlayer 处理半像素有疑问。它似乎不是同样的方式。

**我是如何解决的**

我尝试了很多东西，因为我的应用程序以交互方式使用视频，并以不同的尺寸显示。我尝试更改 AVPlayerLayer 和 CALayer 的 magnificationfilter 和 minificationFilter 以使用相同的算法，但并没有真正改变任何东西。最后，我最终创建了一个 iPad 应用程序，它可以自动截取我需要的所有尺寸的视频，然后在视频缩放到特定尺寸时使用正确的图像。这提供了在我展示特定视频的所有尺寸中像素完美的图像。不是一个完美的工具链，但结果是完美的。

**最后的反思**

这个位置问题对我来说非常明显（因此解决非常重要）的主要原因是因为我的应用正在播放的视频内容是绘制动画，其中很多内容处于固定位置，并且只有一部分图片在移动。如果所有内容仅移动一个像素，则会产生非常明显且丑陋的故障。在今年的 WWDC 上，我与一位是 AVFoundation 专家的 Apple 工程师讨论了这个问题。当我向他介绍这个问题时，他的建议基本上是选择选项 3，但我向他解释说这是不可能的，因为内存消耗，而且我已经尝试了该解决方案。鉴于此，他说我选择了正确的解决方案，并要求我在视频缩放时为 UIImage/AVPlayer 定位提交错误报告。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-20T14:33:51.790

您可能已经看过这个，但是您是否查看过`AVQueuePlayer` [文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVQueuePlayer_Class/Reference/Reference.html)

它是为`AVPlayerItems`在队列中播放而设计的，并且是 AVPlayer 的直接子类，因此只需以相同的方式使用它。你设置它如下：

```
AVPlayerItem *firstItem = [AVPlayerItem playerItemWithURL: firstItemURL];
AVPlayerItem *secondItem = [AVPlayerItem playerItemWithURL: secondItemURL];

AVQueuePlayer *player = [AVQueuePlayer queuePlayerWithItems:[NSArray arrayWithObjects:firstItem, secondItem, nil]];

[player play]; 
```

如果您想在运行时将新项目添加到队列中，只需使用此方法：

```
[player insertItem:thirdPlayerItem afterItem:firstPlayerItem]; 
```

我还没有测试过这是否会减少您提到的闪烁问题，但似乎这是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T10:48:04.457

更新——https: [//youtu.be/7QlaO7WxjGg](https://youtu.be/7QlaO7WxjGg)

这是您使用集合视图作为示例的答案，一次将播放 8 个（请注意，不需要任何类型的内存管理；您可以使用 ARC）：

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = (UICollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:kCellIdentifier forIndexPath:indexPath];

    // Enumerate array of visible cells' indexPaths to find a match
    if ([self.collectionView.indexPathsForVisibleItems
         indexOfObjectPassingTest:^BOOL(NSIndexPath * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
             return (obj.item == indexPath.item);
         }]) dispatch_async(dispatch_get_main_queue(), ^{
             [self drawLayerForPlayerForCell:cell atIndexPath:indexPath];
         });

    return cell;
}

- (void)drawPosterFrameForCell:(UICollectionViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    [self.imageManager requestImageForAsset:AppDelegate.sharedAppDelegate.assetsFetchResults[indexPath.item]
                                                          targetSize:AssetGridThumbnailSize
                                                         contentMode:PHImageContentModeAspectFill
                                                             options:nil
                                                       resultHandler:^(UIImage *result, NSDictionary *info) {
                                                           cell.contentView.layer.contents = (__bridge id)result.CGImage;
                                                       }];
}

- (void)drawLayerForPlayerForCell:(UICollectionViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    cell.contentView.layer.sublayers = nil;
    [self.imageManager requestPlayerItemForVideo:(PHAsset *)self.assetsFetchResults[indexPath.item] options:nil resultHandler:^(AVPlayerItem * _Nullable playerItem, NSDictionary * _Nullable info) {
        dispatch_sync(dispatch_get_main_queue(), ^{
            if([[info objectForKey:PHImageResultIsInCloudKey] boolValue]) {
                [self drawPosterFrameForCell:cell atIndexPath:indexPath];
            } else {
                AVPlayerLayer *playerLayer = [AVPlayerLayer playerLayerWithPlayer:[AVPlayer playerWithPlayerItem:playerItem]];
                [playerLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];
                [playerLayer setBorderColor:[UIColor whiteColor].CGColor];
                [playerLayer setBorderWidth:1.0f];
                [playerLayer setFrame:cell.contentView.layer.bounds];
                [cell.contentView.layer addSublayer:playerLayer];
                [playerLayer.player play];
            }
        });
    }];
} 
```

drawPosterFrameForCell 方法将图像放置在无法播放视频的位置，因为它存储在 iCloud 上，而不是设备上。

无论如何，这是起点；一旦你了解了它是如何工作的，你就可以做你想做的所有事情，而不会出现你描述的记忆方面的任何故障。

# android - 使用 ACTION_SEND 意图附加图像

> ID：14646240
> 
> 赞同：1
> 
> 时间：2013-02-01T12:23:15.290
> 
> 标签：android, android-intent

我正在开发一个应用程序，我正在使用 EditText 字段（ **textArea.setDrawingCacheEnabled(true); textArea.buildDrawingCache(true);**）生成图像并将其保存在 SD 卡上。同时我希望使用 ACTION_SEND 意图在其他应用程序之间共享该图像。这里我面临的问题是我能够从 EditText 生成图像，但相同的图像没有附加到意图（在本例中**共享意图**），请告诉我哪里出错了..

提前致谢..

```
Intent share = new Intent(Intent.ACTION_SEND);
    share.setType("image/*");
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        File picDir = new File(Environment.getExternalStorageDirectory()
                + "/myPic");

        if (!picDir.exists()) {
            picDir.mkdir();
        }
        textArea.setDrawingCacheEnabled(true);
        textArea.buildDrawingCache(true);
        Bitmap bitmap = textArea.getDrawingCache();
        Date date = new Date();
        String fileName = "img" + date.getTime() + ".png";
        File picFile = new File(picDir + "/" + fileName);
        try {

            picFile.createNewFile();
            FileOutputStream picOut = new FileOutputStream(picFile);
            boolean saved = bitmap.compress(CompressFormat.PNG, 100,
                    picOut);

        if (saved) {

                Toast.makeText(
                        getApplicationContext(),
                        "Image saved to your device Pictures "
                                + "directory!", Toast.LENGTH_SHORT).show();

                share.putExtra(Intent.EXTRA_STREAM, Uri.parse(Environment.getExternalStorageDirectory() +"/" +picFile));
                startActivity(Intent.createChooser(share, "Send picture using:"));

            } else {
                //Error
            }
            picOut.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        textArea.destroyDrawingCache();
    } else {
        //Error

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:08:22.410

这是我用于将文件附加到电子邮件的内容：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,getResources().getString(R.string.lorem));
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{emailto});
emailIntent.setType("text/plain");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,getResources().getString(R.string.lorem));
emailIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
emailIntent.setType("image/jpeg");
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+file.getAbsolutePath()));
startActivity(Intent.createChooser(emailIntent, getResources().getString(R.string.send_mail))); 
```

这应该为您解决问题。

# php - 使用 facebook 登录

> ID：14646245
> 
> 赞同：0
> 
> 时间：2013-02-01T12:23:28.300
> 
> 标签：php, facebook, codeigniter, web-applications

我对我的 web 应用程序上的 facebook 登录有疑问。

用户可以使用 facebook 登录或手动注册。手动注册后，用户将添加到数据库“用户”中。当用户第一次使用 facebook 登录时，也会发生同样的情况（但是，没有将密码添加到数据库中）

我的问题：是否可以允许使用 facebook 登录的人使用“普通”登录表单，即用户手动注册的登录表单？如何检查用户输入的密码是否与他们的 Facebook 密码匹配？

或者这完全不可能？

顺便说一句，我正在使用 codeigniter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:26:41.053

我认为最好的可能性是让用户能够为他们的帐户创建密码，因为您无法与 Facebook 交换密码（这是使用 OAuth 的基础，不知道外部提供商的用户密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:26:56.570

唯一可能的方法是在他们登录后要求他们输入密码。这样，他们将能够使用 facebook 或他们的电子邮件地址和他们刚刚指定的密码登录。

没有办法确保密码与 Facebook 的相同，我不建议这样做，即使这是可能的（不可能，并且会让你在使用 facebook TOS 时遇到麻烦）。您的用户可以选择他们想要的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:46:11.940

是的，实际上这很简单，而且我已经不止一次这样做了。除此之外，我认为这是一个很好的做法，众所周知，Facebook 过去会更改他们的 API 并搞砸 FB 登录。

您可以通过以下两种方式之一进行。

第一个不需要用户交互，但不是最安全的做事方式，也不是任何需要真正安全的站点的好主意。只需在第一次输入用户数据时生成一个随机密码，然后通过他们的 FB 电子邮件将其通过电子邮件发送给用户。问题是，首先通过电子邮件发送密码可能会带来危险的安全性，其次很多人使用丢弃的 FB 电子邮件帐户，因此他们可能永远看不到电子邮件。

其次是通过用户控制面板上的用户交互。只需允许他们更新密码字段即可。对于通过 FB 登录的用户，您不能要求提供以前的密码，但您可以使用从 FB 帐户中抓取的一些其他数据，即使询问他们的 FB 电子邮件地址也会有些安全，因为 FB 现在会掩盖公众的信息。

**不，没有办法获得他们的 FB 密码，而且 Facebook 永远不会改变他们的 API 来允许这样做。**

# java - java - 如何将两个List与java中的字段名结合起来？

> ID：14646246
> 
> 赞同：0
> 
> 时间：2013-02-01T12:23:28.283
> 
> 标签：java

我有两个列表，即**plist**和**brlist**。**plist**有产品表的内容，**brlist**有品牌表的价格表。我想合并两个列表并创建一个新列表。我尝试了以下代码，但它复制了两个列表的最后一行值。

例如，

列表**plist**有product1,product2 **,product3**和各自的**品牌**和 brlist 有product1,product2 **,product3**有各自的价格**price1,price2,price3 。在**我的例子中，结果列表有 3 行，所有的值都是相同的**product3 --brandname3 --price3** . 帮助我克服这个错误。

**代码 ：**

```
 Map<String, Object> fields = FastMap.newInstance();
 List<Map<String, Object>> products = FastList.newInstance();

   /* actually plist and brlist has the values and displays all the values i checked */

  iter = plist.iterator();
 while (iter.hasNext())

{
  group = iter.next()

  brlist1.add(brlist.price);

  fields.put("productId",group.productId);
  fields.put("brandName",group.brandName);
  fields.put("price",brlist.price);

 products.add(fields);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:28:51.437

我认为对您来说最简单的解决方案是创建一个新对象，该对象存储您从 plist 和 brlist 中提取的字段。这有点令人困惑，但如果你这样做了，那么你就可以制作一个直接满足你需求的新对象列表，而不是创建一个列表的一部分和另一部分的列表。尽管您之前的解释很清楚，但我很难遵循您的代码，但代码变量对我来说没有多大意义。

另外，我将不得不对其进行研究，但是由于某种原因，您对字段方法的调用对我来说似乎是倒退的，尽管自从我使用地图/Java 以来已经有一段时间了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:43:49.547

干得好：

```
new class Product {

private Long productId;
private String brandName;
private Double price;

constructor ...
getters / setters ...

} 
```

然后在你的代码中的某个地方......

```
Map<Long, Product> products = new HashMap<Long, Product>();

// Not really certain what type of map you got here... but regardless
iter = plist.iterator();
while (iter.hasNext()) {

  // Again, some sort of either object or identifier
  group = iter.next()

  Product p = new Product();
  p.setBrandName(group.getBrandName());
  p.setProductId(group.getProductId());

  products.put(group.productId(), p);

}

iter = brlist.iterator();

while (iter.hasNext()) {

  group = iter.next();

  // Let's assume the both brlist and plist have the same amount of products
  // That way we can grab the value from the map and set the price.
  products.get(group.getProductId()).setPrice(group.getPrice());

} 
```

# javascript - 如何在 window.open() 中应用窗口的 css

> ID：14646249
> 
> 赞同：0
> 
> 时间：2013-02-01T12:23:32.053
> 
> 标签：javascript, asp.net, css

如何在 Window.open() 创建的弹出窗口中应用 Window 表单外观。

谢谢卡马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:26:53.620

您无法控制 Web 浏览器窗口的外观。然而，你可以做一些基本的技巧，比如设置高度和宽度，隐藏地址栏，改变滚动的颜色，但不多。

# jquery - 在第一个循环之后跳过第一张幻灯片 jQuery 循环插件

> ID：14646262
> 
> 赞同：2
> 
> 时间：2013-02-01T12:24:29.883
> 
> 标签：jquery, drupal, slideshow, jquery-cycle, skip

我正在为我的drupal 网站使用slideshow cycle.all.js jquery 插件。( [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/) ) 我试图在第一张幻灯片循环一次后跳过它。不知道该怎么做，有人可以给我提示或解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:54:45.800

也在努力解决这个问题 - 使用以下代码成功

```
$('.slider').cycle({
  after: onAfter; 
}); 

function onAfter(curr,next,opts) {
  //if next slide is 0, then it's the first slide. switch to "1", second slide
  if(opts.nextSlide == 0 ) {opts.nextSlide = 1}; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T10:45:58.660

```
$(window).ready(function() {
$('#slideshow').cycle({
fx: 'fade',
startingSlide: 0,
random:  1,
speed: '200', 
timeout:'2000',
delay: 5000,
next:   '#next', 
prev:   '#prev', 
slideResize: true,
containerResize: false,
width: '100%',
fit: '1',
cleartypeNoBg: 'true',
cleartype: 'true',
after: onAfter
}); 

function onAfter(curr,next,opts) {

  if(opts.nextSlide == 0 ) {opts.nextSlide = 1}; 
}

});

    $(document.documentElement).keyup(function (e) {
    if (e.keyCode == 39)
    {        
       $('#slideshow').cycle('next');
    }

    if (e.keyCode == 37)
    {
        $('#slideshow').cycle('prev');
    }

});
function MM_goToURL() { //v3.0
  var i, args=MM_goToURL.arguments; document.MM_returnValue = false;
  for (i=0; i<(args.length-1); i+=2) eval(args[i]+".location='"+args[i+1]+"'");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:31:34.860

在插件中，您可以选择 `startingSlide`要开始的幻灯片的索引（0 是第一个）。因此，在显示第一张幻灯片后，您可以尝试更改此选项以`1`在下一个周期跳过第一张幻灯片。

像这样的东西可能会起作用：

```
$('#mydiv').cycle({ 
    after: function(currSlideElement, nextSlideElement, options, forwardFlag) {
        $(this).cycle({startingSlide: 1});
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:35:02.183

我知道这可能不是最好的方法，但它似乎有效。

```
$(document).ready(function() {
    //Call the slider so that the images overlap
    $('.slideshow').cycle({
        timeout:  800,
        speed: 200
    });
    //Display the first slide for 1000ms
    setTimeout(function(){
        //Remove first slide
        $('.slideshow img:first').remove();
        //Reinit the cycle
        $('.slideshow').cycle('destroy').cycle({
            timeout:  800,
            speed: 200
        });
        }, 1000);
}); 
```

[http://jsfiddle.net/Q8HK3/3/](http://jsfiddle.net/Q8HK3/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-24T15:02:45.580

也可以从管理员通过滑块 API 执行此操作（但第一张幻灯片可能会闪烁一秒钟：（）：

```
var ended = false;
revapi1.bind("revolution.slide.onchange",function (e,data) {
    var totalSlides = revapi1.revmaxslide();
    if (data.slideIndex === totalSlides) {
       ended = true;
    }
});
revapi1.bind("revolution.slide.onbeforeswap",function (e, data) {
    if (ended && data.nextslide.index() === 0) {
      console.log("Slider: skip first slide after loop")
      revapi1.revshowslide(2); 
      ended = false;
    } 
}); 
```

# php - 如何回显在我的数据库中存储为 blob 的图像？

> ID：14646268
> 
> 赞同：0
> 
> 时间：2013-02-01T12:24:46.280
> 
> 标签：php, mysql, image, blob, echo

我只是想知道 PHP 代码是什么来回显我存储在数据库的特定表中的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:30:10.940

好吧，这是您想要的图像的 html：

```
<img src="image_render.php?image_id=4" /> <!-- or any unique identifier for that image --> 
```

在`image_render.php`您将要执行以下操作：

```
// get the image information base on the unique identifier passed in the URL
 header("Content-Type: image/png"); // tell the browser that this is an image
 echo $imageBlog; // this is what you took from the database 
```

确保你没有在这个文件中添加额外的输出，否则事情会变糟。

就是这样。

**笔记**

在大多数情况下，将图像位置而不是整个图像简单地存储在服务器上会更好/更快，因此在做出此决定之前您可能需要更多地记录自己。

这是关于[将图像存储在数据库中的优点和缺点的](http://forums.asp.net/t/1096999.aspx)讨论，这里是[另一个](https://stackoverflow.com/questions/5613898/what-about-storing-images-in-sql-server)讨论。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:32:16.560

如果使用任何编辑器上传图像，我希望 echo html_entity_decode($blobfield) 可以帮助您编写图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:32:18.867

根据关于SO的[类似主题的另一个](https://stackoverflow.com/questions/13225726/i-need-my-php-page-to-show-my-blob-image-from-mysql-database/13225757#13225757)[答案，](https://stackoverflow.com/a/13225757/1882885)

```
echo "<dt><strong>Technician Image:</strong></dt><dd>" . 
 '<img src="data:image/jpeg;base64,'.
  base64_encode($row2['image']).
  '" width="290" height="290">' . "</dd>"; 
```

*发布前请尝试搜索。

# java - 找到单词时如何断开字符串

> ID：14646270
> 
> 赞同：3
> 
> 时间：2013-02-01T12:24:49.100
> 
> 标签：java, string

我的 String 对象中有一个数据，如下所示

```
Scanner Inlist 1,2,3
 Resolved scan set NotEqual to  Non Scan Set
 Area of intrest equal to Total Intrest
 Initial responder Inlist enter values 
```

现在，当我阅读每一行时，如果我找到了单词 (Inlist ,NotEqual,Inlist )，那么它需要换行并需要阅读下一行。

```
Output would be:

Scanner 
Resolved scan set
Area of intrest
Initial responder 
```

到目前为止，我尝试过的是

```
String filterstringobj=promtchild.toString();
StringTokenizer str=new StringTokenizer(filterstringobj,"");
while(str.hasMoreTokens())
{
    String Inlistremove=str.nextToken("InList");
    if(Inlistremove.length()!=0)
    {                       
         System.out.println(Inlistremove);
         if(Inlistremove.equalsIgnoreCase("InList") && 
            Inlistremove.equalsIgnoreCase("NotEqual") && 
            Inlistremove.equalsIgnoreCase("Equal")
           )
         {
            System.out.println(Inlistremove);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:32:04.763

你的逻辑有一个很大的缺陷：

看着你的`if`我看到了

```
if(Inlistremove.equalsIgnoreCase("InList")&&Inlistremove.equalsIgnoreCase("NotEqual")&&... 
```

怎么可能`Inlistremove`同时等于`"InList"` **AND**等于`"NotEqual"`？您在寻找**或**吗？那将是`||`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:29:39.940

使用这一行：

```
StringTokenizer str=new StringTokenizer(filterstringobj," "); 
```

代替

```
StringTokenizer str=new StringTokenizer(filterstringobj,""); 
```

**编辑**
好的，然后观看以下演示代码：

```
import java.util.StringTokenizer;
class  WordsFromString
{
    public static void main(String st[])
    {
        String data = "Scanner Inlist 1,2,3\n"+
                      "Resolved scan set NotEqual to  Non Scan Set\n"+
                      "Area of intrest equal to Total Intrest\n"+
                      "Initial responder Inlist enter values";
        StringTokenizer tokenizer = new StringTokenizer(data,"\n",true);
        StringBuilder output = new StringBuilder();
        while (tokenizer.hasMoreElements())
        {
            String sLine = tokenizer.nextToken();
            StringTokenizer tokenizerWord = new StringTokenizer(sLine," ",true);
            while (tokenizerWord.hasMoreElements())
            {
                String word = tokenizerWord.nextToken();
                if ("Inlist".equals(word) || "NotEqual".equals(word) || "Inlist".equals(word) || "equal".equals(word))
                {
                    break;
                }
                else
                {
                    output.append(word);
                }
            }
        }
        System.out.println(output.toString());
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:36:40.847

非常灵活，只有一行：

```
public static String parseLine(String line){
    return line.replaceAll("(?i)(inlist|notequal|equal).*", "");
}

public static void main(String[] a){
    System.out.println(parseLine("Resolved scan set NotEqual to  Non Scan Set"));
    System.out.println(parseLine("Area of intrest equal to Total Intrest"));
    System.out.println(parseLine("Initial responder Inlist enter values"));
} 
```

将打印：

> 解析扫描集
> 
> 感兴趣的领域
> 
> 总利息 初始响应者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:32:22.843

您不需要使用 StringTokenizer。请看[一个老问题](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)知道为什么？

您可以使用正则表达式代替 StringTokenizer 来匹配您不需要的字符串部分并将它们替换为空字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:35:21.697

您的代码中存在三个问题：

```
StringTokenizer str=new StringTokenizer(filterstringobj,""); 
```

应该是

```
StringTokenizer str=new StringTokenizer(filterstringobj," "); 
```

第二个在这里：

```
if(Inlistremove.equalsIgnoreCase("InList") && 
            Inlistremove.equalsIgnoreCase("NotEqual") && 
            Inlistremove.equalsIgnoreCase("Equal")
           ) 
```

应该是：

```
if(Inlistremove.equalsIgnoreCase("InList") ||
            Inlistremove.equalsIgnoreCase("NotEqual") || 
            Inlistremove.equalsIgnoreCase("Equal")
           ) 
```

第三个是，你将如何移动到字符串数组的下一行？您必须稍微更改代码以将移动到另一个字符串进行解析。

为此，我建议您创建一个函数：

```
public static void Parse(String s){ 
   String filterstringobj=s;
   StringTokenizer str=new StringTokenizer(filterstringobj," ");
   while(str.hasMoreTokens())
   {
       String Inlistremove=str.nextToken("InList");
       if(Inlistremove.length()!=0)
       {                       
           System.out.println(Inlistremove);
            if(Inlistremove.equalsIgnoreCase("InList") ||
               Inlistremove.equalsIgnoreCase("NotEqual") ||
               Inlistremove.equalsIgnoreCase("Equal")
            )
           {
               System.out.println(Inlistremove);
               return;
           }
      }
   }
} 
```

在`main()`你这样做的方法中：

```
public static void main(String[] args)
{
    String[] array = new String[3];
    array[0] = "Resolved scan set NotEqual to  Non Scan Set";
    array[1] = "Area of intrest equal to Total Intrest";
    array[2] = "Initial responder Inlist enter values";
    for(int i = 0; i < 3; i++) {
          Parse(array[i]);
    }
} 
```

# javascript - jQuery mobile ajax加载jsonp在页面更改后不起作用

> ID：14646272
> 
> 赞同：2
> 
> 时间：2013-02-01T12:25:08.157
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我用 jQuery Mobile 制作了一个移动网页。`.ajax()`我在页面加载时使用 jQuery 的方法加载推文。它可以工作，但是当我通过单击链接更改页面时，推文将不再加载。

这是HTML：

```
<ul data-role="listview" data-divider-theme="c" data-inset="true" id="tweets">
    <li data-role="list-divider">Latest Tweets</li>
</ul> 
```

Javascript：

```
$(document).bind('pageinit',function(){
    $.ajax({
        url:'https://api.twitter.com/1/statuses/user_timeline/LicsonLee.json',
        dataType:'jsonp',
        success:function(data){
            $.each(data,function(i){
                if(i < 5){
                    var tweet = data[i];
                   $('#tweets').append($('<li/>').html('<a href="https://twitter.com/'+tweet.user.screen_name+'/status/'+tweet.id_str+'" data-rel="external"><h4>'+tweet.text+'</h4><p>at '+tweet.created_at+'</p></a>'));
                 }
            });
            $('#tweets').listview('refresh');
        }
    });
}); 
```

[有问题的页面](http://serve-licson.net23.net/mobile/)

**目前的进展**

我试过 Gajotres 的答案，但它仍然只工作一次。这些页面是通过 AJAX 加载的。我还检查了其他页面的 HTML 结构是否正确。我仍然无法弄清楚为什么会这样。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:36:16.107

## 解决方案

在这种情况下不应该使用：

```
$(document).bind('pageinit',function(){ 
```

它只会触发一次，而是应该使用它：

```
$(document).bind('pagebeforeshow',function(){ 
```

## 编辑 ：

这应该这样做：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){ 
```

如果您想了解更多相关信息，请查看我的**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，更透明的是我的个人博客。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。

## 编辑 2：

此解决方案有效：

```
$(document).on('pageshow',function(){
    $.ajax({
        url:'https://api.twitter.com/1/statuses/user_timeline/LicsonLee.json',
        dataType:'jsonp',
        success:function(data){
            $('#tweets *:not([data-role=list-divider])').remove();
            $.each(data,function(i){
                if(i < 5){
                    var tweet = data[i];
                    $.mobile.activePage.find('#tweets').append($('<li/>').html('<a href="https://twitter.com/'+tweet.user.screen_name+'/status/'+tweet.id_str+'" data-rel="external"><h4>'+tweet.text+'</h4><p>at '+tweet.created_at+'</p></a>'));
                }
            });
            $.mobile.activePage.find('#tweets').listview('refresh');
        }
    });
}); 
```

每次您附加内容时，它都会附加到**`#tweets`**第一页，这只会将其附加到当前活动页面。

# jquery - HTML 注入后的 $(document).ready(function()

> ID：14646274
> 
> 赞同：4
> 
> 时间：2013-02-01T12:25:21.927
> 
> 标签：jquery, inject, document-ready

我正在尝试实时编辑数据。为此，我找到了这个脚本

[http://www.9lessons.info/2011/03/live-table-edit-with-jquery-and-ajax.html](http://www.9lessons.info/2011/03/live-table-edit-with-jquery-and-ajax.html)

当在 php 文件中创建表时，该脚本可以完美运行，但我试图通过 javascript 注入表来做到这一点。

这是我的 php 页面

```
<script type="text/javascript" src="javascript/default/gebruikers.js"></script>
<div id="adminGebruikersDiv" class="adminGebruikersDiv"></div>
<script type="text/javascript">
    onload = function() { loadGebruikers(); };
</script> 
```

函数 loadGebruikers 创建表并将其注入到 div 中。现在我希望这段代码能够工作

```
$j(document).ready(function() {
    $j(".rij").click(function() {}).change(function() {});
    $j(".editbox").mouseup(function() {});
$j(document).mouseup(function() {});
}); 
```

那么我怎样才能使用jquery做到这一点

编辑：现在有点作品

```
$j(document).on("ready", function() {
    $j(document).on("click", ".rij", function() {}).on("change", function() {});
    $j(document).on("mouseup", ".editbox", function() {});
    $j(document).on("mouseup", ".document", function() {});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:27:12.867

您应该使用[.on](http://api.jquery.com/on/)将事件附加到动态元素。

```
$j(document).on("click", ".rij", function() { ... }); 
```

# oracle - 获取预言机日期

> ID：14646276
> 
> 赞同：0
> 
> 时间：2013-02-01T12:25:28.430
> 
> 标签：oracle, datetime, oracle11g

我需要找出最接近的早上 7 点的日期。可以是今天（如果是 00-07AM）或明天（如果是 07AM-12PM）。有没有什么东西可以做这个“内联”而不是`if`声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:00:45.663

您可以在截断日期之前调整日期；用一些假`sdate`值代替真实值`sysdate`：

```
alter session set nls_date_format = 'DD/MM/YYYY HH24:MI:SS';

with t as (
    select to_date('01/02/2013 00:00:00') as sdate from dual
    union all select to_date('01/02/2013 06:59:59') from dual
    union all select to_date('01/02/2013 07:00:00') from dual
    union all select to_date('01/02/2013 07:00:01') from dual
    union all select to_date('01/02/2013 23:59:59') from dual
    union all select to_date('02/02/2013 00:00:00') from dual
)
select sdate,
    trunc(sdate + interval '17' hour) + interval '7' hour
from t
order by sdate;

SDATE               TRUNC(SDATE+INTERVA
------------------- -------------------
01/02/2013 00:00:00 01/02/2013 07:00:00
01/02/2013 06:59:59 01/02/2013 07:00:00
01/02/2013 07:00:00 02/02/2013 07:00:00
01/02/2013 07:00:01 02/02/2013 07:00:00
01/02/2013 23:59:59 02/02/2013 07:00:00
02/02/2013 00:00:00 02/02/2013 07:00:00 
```

所以`trunc(sysdate + interval '17' hour)`如果它在 07:00:00 之前给你今天午夜，如果它是 07:00:00 或之后给你明天午夜；然后`+ interval '7' hour`在第一个决定的那一天将其设为 07:00:00。

您可以使用`+ 17/24`and`+ 7/24`代替间隔，但我认为间隔更容易让人们以后理解。

这假设如果您恰好在 07:00:00 运行它，则算作明天；如果那是错误的，那么您可以调整一秒钟：

```
with t as (
    select to_date('01/02/2013 00:00:00') as sdate from dual
    union all select to_date('01/02/2013 06:59:59') from dual
    union all select to_date('01/02/2013 07:00:00') from dual
    union all select to_date('01/02/2013 07:00:01') from dual
    union all select to_date('01/02/2013 23:59:59') from dual
    union all select to_date('02/02/2013 00:00:00') from dual
)
select sdate,
    trunc(sdate + interval '16:59:59' hour to second) + interval '7' hour
from t
order by sdate;

SDATE               TRUNC(SDATE+INTERVA
------------------- -------------------
01/02/2013 00:00:00 01/02/2013 07:00:00
01/02/2013 06:59:59 01/02/2013 07:00:00
01/02/2013 07:00:00 01/02/2013 07:00:00
01/02/2013 07:00:01 02/02/2013 07:00:00
01/02/2013 23:59:59 02/02/2013 07:00:00
02/02/2013 00:00:00 02/02/2013 07:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:00:11.197

如果时间 < 07:00 或明天，这将给您今天。

```
trunc(sysdate+17/24) 
```

trunc 删除日期的时间部分。17/24 为当前时间增加 17 小时。

# javascript - 何时使用 Twitter 的 Flight Framework？

> ID：14646278
> 
> 赞同：14
> 
> 时间：2013-02-01T12:25:41.833
> 
> 标签：javascript, twitter, twitter-flight

Twitter几天前在 github上发布了他们的[Javascript Framework Flight 。](https://github.com/twitter/flight)根据我收集到的信息，Flight 将 JS 逻辑置于另一层之后，其中单独的组件只能通过特定的事件调用（如 API？）来访问。

我不太确定我是否了解使用 JS 框架的好处以及 Flight 带来的好处。如果我制作一个移动应用程序来提高性能~~（服务器端的 JS？）~~并更好地控制哪些事件调用组件，我会使用它吗？

以下是到目前为止我能找到的一些文章/相关帖子：

*   [InfoQ](http://www.infoq.com/news/2013/02/Twitter-Flight)
*   [博客](http://www.blogeek.com.ar/2013/01/31/twitters-flight-js-framework-first-thoughts-and-comparison-with-backbone/)
*   [SO：为什么我们需要 JS 框架？](https://stackoverflow.com/questions/13838395/why-do-we-need-backbone-js-or-any-js-mvc-framework)

# iphone - 如何检查从 iphone 导入的联系人

> ID：14646282
> 
> 赞同：0
> 
> 时间：2013-02-01T12:25:53.063
> 
> 标签：iphone, xcode

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    // setting the first name
    NSString *fname = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

    // setting the last name
    NSString *lname = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);
    NSString *mail=(__bridge NSString*)ABRecordCopyValue(person, kABPersonEmailProperty);
        //NSString *mobile=(__bridge NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty);

    NSString *pNo = (__bridge NSString*)ABMultiValueCopyValueAtIndex(multi, 0);
    NSLog(@"LLname%@",lname);
    NSLog(@"fLname%@",fname);
    NSLog(@"mobile%@",pNo);
    NSLog(@"mail%@",mail);
     if([fname isEqualToString:@""] || fname == nil)
     {
        UIAlertView *locationAlert = [[UIAlertView alloc] initWithTitle:nil message:@"Please enter first name." delegate:nil cancelButtonTitle:NSLocalizedString(@"ok", @"") otherButtonTitles:nil];
        [locationAlert show];
     // return;
     }
     else if([lname isEqualToString:@""]|| lname == nil)
     {
        UIAlertView *locationAlert = [[UIAlertView alloc] initWithTitle:nil message:@"Please enter last name." delegate:nil cancelButtonTitle:NSLocalizedString(@"ok", @"") otherButtonTitles:nil];
        [locationAlert show];
     //return;
     }
     else if([pNo isEqualToString:@""]|| pNo == nil)
    {
         UIAlertView *locationAlert = [[UIAlertView alloc] initWithTitle:nil message:@"Please enter mobile no." delegate:nil cancelButtonTitle:NSLocalizedString(@"ok", @"") otherButtonTitles:nil];
         [locationAlert show];
    // return;
     }

    else if([mail isEqualToString:@""] || mail == nil)
    {
        UIAlertView *locationAlert = [[UIAlertView alloc] initWithTitle:nil message:@"Please enter email address." delegate:nil cancelButtonTitle:NSLocalizedString(@"ok", @"") otherButtonTitles:nil];
        [locationAlert show]; 
    //return;
    }
    else
    {
    ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFStringRef email = ABMultiValueCopyValueAtIndex(emails, 0);
    NSLog(@"email %@\n",(__bridge NSString *) email);

    // setting the number
    /*
     this function will set the first number it finds

     if you do not set a number for a contact it will probably
     crash
     */

    NSString *mNo = pNo;
    mNo=[mNo stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mNo=[mNo stringByReplacingOccurrencesOfString:@")" withString:@""];
    mNo=[mNo stringByReplacingOccurrencesOfString:@" " withString:@""];
    mNo=[mNo stringByReplacingOccurrencesOfString:@"-" withString:@""];
//    NSLog(@"mno %@\n",mNo);

    NSString *name = [fname stringByAppendingFormat:[NSString stringWithFormat:@" %@",lname]];

    [clist setValue:mNo forKey:name];
//    NSLog(@"dic %@\n",clist);

//    [allcontactArray addObject:name];
    //    [contactList addObject:(NSArray *)allcontactArray];
    [contacts addObject:name];
//    NSLog(@"contacts %@\n",contacts);

//    NSLog(@"str %@\n",[clist objectForKey:name]);

    [contactArr addObject:name];
    [contactDic setObject:mNo forKey:name];

//    NSLog(@"arr: %@\n",contactArr);
//    NSLog(@"dic: %@\n",contactDic);

    contactname = name;

    [contactStr appendFormat:@"%@, ",name];
//     NSLog(@"contactstr: %@\n",contactStr);

//    NSLog(@"mno %@\n",mNo);

    [phoneNoArray addObject:mNo];
    [phoneStr appendFormat:@"%@=",mNo];

//    NSLog(@"phonearr: %@\n",phoneNoArray);
//    NSLog(@"phonestr: %@\n",phoneStr);

    tf.text = contactStr;

    // remove the controller
    [self dismissModalViewControllerAnimated:YES];

    return NO;
    }
} 
```

我正在使用这个开源从 iphone 导入联系人。当名字或姓氏或手机号码或电子邮件为空时，我的应用程序崩溃。我可以检查名字和姓氏是否为空。我无法检查手机号码和电子邮件。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:32:31.013

要检查电话号码是否存在，您可以这样做，

```
ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(person, kABPersonPhoneProperty);
NSArray* phoneNumbers = (NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty); 
if([phoneNumbers count] > 0)
{
    // more than one phone numbers exist
} 
```

对于电子邮件，

```
ABMultiValueRef emailprperty = ABRecordCopyValue(person, kABPersonEmailProperty);
NSArray* emails = (NSArray*)ABMultiValueCopyArrayOfAllValues(emailprperty);

if([emails count] > 0)
{
    // email exists
} 
```

希望这可以帮助你...

# dynamic - Infragistics XamGrid 动态列

> ID：14646287
> 
> 赞同：0
> 
> 时间：2013-02-01T12:26:08.707
> 
> 标签：dynamic, binding, infragistics, xamgrid

我最近遇到了一种情况，我确实需要将动态集合绑定到 Infragistics XamGrid，其中要显示的列不固定。所以我想要像 ObservableCollection 这样的东西被绑定到列表中。然而，基础设施尚不支持动态/扩展。我尝试使用 DataTable，它没有用。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:26:08.707

所以最后我能够使用匿名类型来实现它。如果您知道要选择哪些列，则可以将匿名对象绑定到网格。

我还有一个要显示的字段列表和要显示的数据。为了合并这些，我借助 Exprssion 树和类型构建器在运行时构建类型并向其添加属性，将这个新类型绑定到网格。您可以获取有关表达式构建和动态类型生成的 stackoverflow 本身的代码。

# android - 读取其他应用程序写入的 nfc 标签

> ID：14646290
> 
> 赞同：0
> 
> 时间：2013-02-01T12:26:16.070
> 
> 标签：android, nfc

我正在实现两个不同的应用程序。1) 一个人将在 nfc 标签上写入内容并读取 2) 仅在标签上读取内容。

但是在编写标签时，我们必须提到我的第二个应用程序无法读取标签的包。有没有办法以我的两个应用程序都可以读取的方式编写标签。任何帮助或代码片段都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T07:59:09.490

我现在这是前一阵子写的，我希望你现在已经想出了答案，但如果你还没有，这里是答案：

创建 2 个单独的 NdefRecords，上面有 2 个应用程序。如果您想将其用作意图过滤器（即 application/vnd.company.app），请将 MimeType 保留为您的原始写作应用程序名称。

所以你要做的是：

```
NdefRecord app1 = NdefRecord.createApplicationRecord(com.company.writer);
NdefRecord app2 = NdefRecord.createApplicationRecord(com.company.reader);

byte[] payload = xyz.getBytes();
byte[] mimeBytes = "com.company.writer".getBytes();
NdefRecord record = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
NdefMessage message = new NdefMessage(new NdefRecord[]{ record, app1, app2}); 
```

# java - 使用 Java/Guava 可选 创建和处理对象矩阵的类

> ID：14646298
> 
> 赞同：1
> 
> 时间：2013-02-01T12:26:52.970
> 
> 标签：java, multidimensional-array, matrix, guava

我正在考虑使用 Guava 库中的 Optional<T> 类来处理对象的矩阵（2D 网格），同时避免使用空引用来表示空单元格。

我正在做类似的事情：

```
class MatrixOfObjects() {
    private Optional<MyObjectClass>[][] map_use;

    public MatrixOfObjects(Integer nRows, Integer nCols) {
        map_use = (Optional<MyObjectClass>[][]) new Optional[nRows][nCols];
        // IS THIS CAST THE ONLY WAY TO CRETE THE map_use INSTANCE?
    }

    public MyObjectClass getCellContents(Integer row, Integer col) {
         return map_use[row][col].get();
    }

    public void setCellContents(MyObjectClass e, Integer row, Integer col) {
         return map_use[row][col].of(e);
         // IS THIS THE CORRECT USE OF .OF METHOD?
    }

    public void emptyCellContents(Integer row, Integer col) {
         map_use[row][col].set(Optional.absent());
         // BUT SET() METHOD DOES NOT EXIST....
    }

    public Boolean isCellUsed(Integer row, Integer col) {
         return map_use[row][col].isPresent();
    }
} 
```

我对上面的代码有三个问题：

1.  如何创建可选数组的实例？
2.  如何将 MyObjectClass 对象分配给单元格（我认为这应该是正确的）
3.  如何分配给“空”一个单元格，使其不再包含引用？

我想我错过了这个 Optional 类的一些重要内容。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:30:40.610

我修复了您的代码中的一些错误，并添加了注释来解释：

```
class MatrixOfObjects { // class declaration should not have a "()"
    private Optional<MyObjectClass>[][] map_use;

    public MatrixOfObjects(Integer nRows, Integer nCols) {
        map_use = (Optional<MyObjectClass>[][]) new Optional[nRows][nCols];
    }

    public MyObjectClass getCellContents(Integer row, Integer col) {
         return map_use[row][col].get();
    }

    public void setCellContents(MyObjectClass e, Integer row, Integer col) {
         // removed "return" keyword, since you don't return anything from this method
         // used correct array assignement + Optional.of() to create the Optional
         map_use[row][col] = Optional.of(e); 
    }

    public void emptyCellContents(Integer row, Integer col) {
         // unlike lists, arrays do not have a "set()" method. You have to use standard array assignment
         map_use[row][col] = Optional.absent();
    }

    public Boolean isCellUsed(Integer row, Integer col) {
         return map_use[row][col].isPresent();
    }
} 
```

以下是创建泛型数组的一些替代方法：[如何在 Java 中创建泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

请注意，如果您对 Java 如何处理泛型没有很好的理解，则很难同时使用数组和泛型。使用集合通常是更好的方法。

综上所述，我将使用 Guava 的 Table 接口而不是您的“MatrixOfObjects”类。

# android - Android：如何将传感器数据 onSensorChanged 保存到数据库？

> ID：14646304
> 
> 赞同：0
> 
> 时间：2013-02-01T12:27:03.190
> 
> 标签：android, database, arraylist, dynamic-data, android-sensors

我正在编写一个 android 应用程序，在该应用程序中我从手机的传感器获取**加速度计数据，****直到**用户退出。之后我修改数据并尝试将其保存到现有数据库中。一切正常，但是当我在 onSensorChanged 方法中调用我的**saveToDatabase** **(** ) 方法时，应用程序开始运行非常缓慢并且变得无响应并在不久之后崩溃。所以，问题是我**经常**调用 saveToDatabase() ......

 ****有没有办法避免这种情况？

*   可能与必须收集传感器数据并在 5 分钟后保存到数据库的*ArrayList/LinkedList/ArrayDeque一起使用？*
*   还是将所有内容都放在*缓冲区*中，当用户退出时，然后将所有内容从其中提取到数据库中？
*   修改 saveToDabase 方法，使其使用*beginTransaction*而不是*insert*方法？

    ```
     protected void saveToDatabase(){
             contentValues.put("SensorSensitivity", sensorSensitivity);
             contentValues.put("AccDataX", accelerometerData[0]);
             contentValues.put("AccDataY", accelerometerData[1]);
             contentValues.put("AccDataZ", accelerometerData[2]);
             contentValues.put("timeStamp", System.currentTimeMillis());
             long affectedColumnId = sqliteDatabase.insert("tName", null, contentValues);
             contentValues.clear();
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:30:59.620

Android 文档建议在您使用 IO 的每个地方，使用不同的线程进行磁盘操作。

我建议您应该使用一个线程来接收 onSensorChanged 事件，将其保存到内存中，或者添加时间戳和值。将几个这样的值添加到数组中，然后使用处理程序或其他方式将此结构传递给另一个线程。该线程应将其保存到数据库中，即。遍历所有收集的值并像 saveToDatabase 一样保存每个值。这边走。UI 应该始终响应，即使在长队列等待写入磁盘时也是如此。

这可能有效，但应该有一些关于值保存速度和传入队列有多大的反馈。如果它太长，您可能会删除一些值以防止内存满。也许保存线程会使用处理程序事件发送到 UI 线程，该队列已满，并且暂时不需要新值。当它减少队列或使其为空时，它会告诉 UI 线程重新开始发送。****

# android - 可以 setConnectionTimeout 阻止下载完成吗

> ID：14646309
> 
> 赞同：0
> 
> 时间：2013-02-01T12:27:25.103
> 
> 标签：android, http, sockets, timeout

我正在我的应用程序中下载一个文件并使用以下超时。

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000); 
```

时不时地只下载部分文件。如果在慢速移动网络上没有在 5 秒内完成下载，5 秒的 setSoTimeout 可以停止下载吗？

从谷歌开发文档它说：

> 以毫秒为单位设置默认套接字超时 (SO_TIMEOUT)，即等待数据的超时。

这是指等待第一个数据的时间，还是等待任何进一步数据的时间？IE 下载开始，但 5 秒内没有更多数据到达。

**编辑** 我做了一个测试，我将 SO_TIMEOUT 减少到 100 毫秒，但它对阻止下载仅在一秒钟后完成没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:57:03.747

> 如果在慢速移动网络上没有在 5 秒内完成下载，5 秒的 setSoTimeout 可以停止下载吗？

不，但如果任何特定的 read() 调用需要超过 5 秒来接收任何数据，它可能会抛出 SocketTimeoutException。当你得到那个例外时你会做什么取决于你。你可以重试。

如果您收到读取超时，则可能是发件人停止，网络出现故障，或者您的读取超时太短。5000 毫秒是一个非常短的超时。举起它，看看会发生什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T12:53:29.487

如果读取调用花费的时间比指定的时间长（在您的情况下为 5000 毫秒，此等待时间指的是从下载开始的时间），则根据文档设置`SO_TIMEOUT`将引发异常，这意味着异常将中断您的下载过程。`java.net.SocketTimeoutException`

> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。将此选项设置为非零超时，对与此 Socket 关联的 InputStream 的 read() 调用将仅阻塞此时间量。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。必须在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。

# php - 如何更改 Paypal 定期方法中的定期金额（每月）

> ID：14646310
> 
> 赞同：0
> 
> 时间：2013-02-01T12:27:28.160
> 
> 标签：php, paypal, paypal-sandbox, paypal-subscriptions, recurring-billing

我需要在我的一个项目中实施定期付款。我使用 paypal API 做了这个演示。但我的主要问题是在我的项目中，每个人的数量都不一样。它是根据用户在该月使用的服务计算得出的。所以我想制作这样一个模块，一旦用户在网站上订阅，每个月他都应该被收费，但金额不同。

下面的脚本非常适用于 paypal recuring 方法。它每月从买家的贝宝账户中扣除 79 美元，直到 15 个周期，并且还贷记到我测试过的商家账户。

现在我想以编程方式将最后 5 个周期的重复金额更改为 49 美元（针对特定周期），所以请帮助我更改该重复金额。

```
<form id="paypal_form" class="paypal" action="payments.php" method="post">

<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="MERCHANT_EMAIL">
<input type="hidden" name="item_name" value="Subscription Plan - GOLD">
<input type="hidden" name="item_number" value="123">
<input type="hidden" name="image_url" value="https://www.google.com">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="return" value="RETURN_URL">
<input type="hidden" name="cancel_return" value="CANCLE_URL">

<input type="hidden" name="a3" value="79.00">
<!-- a3 - amount to be invoiced each recurrence -->
<input type="hidden" name="p3" value="1">
<!-- p3 - number of time periods between each recurrence -->
<input type="hidden" name="t3" value="M">
<!-- t3 - time period (D=days, W=weeks, M=months, Y=years) -->

<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
<input type="hidden" name="srt" value="15">
<input type="hidden" name="no_note" value="1">

<input type="hidden" name="usr_manage" value="1">
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" border="0" name="submit" alt="Make payments with PayPal - it’s fast, free and secure!">
</form> 
```

我将所有这些参数发布到贝宝网址：[https ://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)

请指导我，或者我在这个集成中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:03:00.740

您可以在javascript中处理案例并动态更改付款金额和频率

# regex - 用 sed 命令查找和替换 Tcl 命令 args 符号

> ID：14646311
> 
> 赞同：2
> 
> 时间：2013-02-01T12:27:43.237
> 
> 标签：regex, sed, replace

我正在尝试使用`tcl`命令分隔符“[]”替换文件中的字符串`sed`

例子：

`string [$HelloWorld]`必须替换为`$HelloWord`. 请注意，它没有括号，要修改的文件是 TCL 文件。我将如何使用`sed`命令来做到这一点？

我试过这个：

```
sed -i 's@[$HelloWorld]@$HelloWorld@g' <file_path> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:39:21.943

您需要转义`[`，`]`因为它们被解释为正则表达式中的字符类而不是文字方括号：

```
$ sed 's/\[$HelloWorld\]/$HelloWorld/g' file
string $HelloWord 
```

您可以在此处使用捕获组：

```
$ sed 's/\[\($HelloWorld\)\]/\1/g' file
string $HelloWord 
```

如果`sed 's/[][]//g'`要从文件中删除所有方括号，请使用：

```
# First check changes are correct
$ sed 's/[][]//g' file
string $HelloWorld

# Store the change back to the file 
$ sed -i 's/[][]//g' file

# Store changes back to the file and create back up of the original 
$ sed -i.bak 's/[][]//g' file 
```

# jquery - 在 jquery 延迟链中用较新的 Promise 替换旧的 Promise

> ID：14646314
> 
> 赞同：0
> 
> 时间：2013-02-01T12:27:49.057
> 
> 标签：jquery, jquery-deferred, promise

我有一个使用 jQuery 的对象`Deferred`来创建我自己的承诺，我会在超时后解决。然后我链接一个 ajax 调用，并返回承诺。

```
var Obj = function() {
  var _obj = new $.Deferred();

  setTimeout(function() {
      _obj.resolve("Resolve One!");
  }, 2000);

  return _obj.promise();
}

new Obj()
.done(function(message) {
  document.write(message);
  return $.get("http://www.jsonip.com/");
})
.done(function(response) {
  document.write(response);
}) 
```

我希望消息有“解决一个！” 并响应来自 ajax 调用的响应

预期结果：

```
Resolve One!{"ip":"256.256.0.0","about":"/about"} 
```

我得到的是：

```
Resolve One!Resolve One! 
```

由于我正在返回`$.get()`，这是一个承诺，我希望旧的承诺会被 jQuery 的承诺覆盖。我应该怎么做才能让网页内容响应？

jsfiddle：http: [//jsfiddle.net/7zUKg/](http://jsfiddle.net/7zUKg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:30:24.437

`.done`只添加处理程序。你想要`.then`，这也允许你返回一个新的承诺：http: [//jsfiddle.net/7zUKg/1/](http://jsfiddle.net/7zUKg/1/)。

```
new Obj()
.then(function(message) {
  document.write(message);
  return $.get("http://www.jsonip.com/");
})
.done(function(response) {
  document.write(response);
}) 
```

# orbeon - 隐藏部分时的错误

> ID：14646320
> 
> 赞同：0
> 
> 时间：2013-02-01T12:27:58.260
> 
> 标签：orbeon

我们在存在数据库的 tomat 7 上的 4.0 Beta3 PE 上遇到 2 种错误

1.  用一个非常简单的形式。一个单选按钮和一个部分。该部分的可见性由该语句控制（$control-3 = 'two'）。该功能有效。单击第二个单选按钮显示该部分。单击另一个会隐藏该部分并显示此错误

    独立表达式中未声明的变量：oxf:/xbl/orbeon/section/section.xbl 中的 $fb-can-do-classes 第 72 行 (org.orbeon.saxon.trans.XPathException) 独立表达式中未声明的变量：$open在 oxf:/xbl/orbeon/section/section.xbl 第 112 行（org.orbeon.saxon.trans.XPathException）

2.  第二个测试表格更大，包含必填字段，并且隐藏了很多部分和控件。隐藏和显示使用与第一种形式相同的语句完成。当用户保存表单时，会发生此错误：

    normalize-space() 的第一个参数所需的项目类型是 xs:string；提供的值在 oxf:/apps/fr/includes/persistence/persistence-model.xml 第 306 行中具有项目类型 xs:date (org.orbeon.saxon.trans.XPathException)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:11:13.487

好消息，两者都是[刚刚](https://github.com/orbeon/orbeon-forms/issues/799) [修复](https://github.com/orbeon/orbeon-forms/issues/797)的错误。

PS：最好将错误报告到 Orbeon 邮件列表或在 github 上输入它们。

# wireshark - Nmap 扫描不同（？）子网（ARP 请求）

> ID：14646321
> 
> 赞同：0
> 
> 时间：2013-02-01T12:28:01.513
> 
> 标签：wireshark, arp, nmap

好遇见！

我有两台机器和一台交换机，一台机器的地址为“192.168.233.1”，另一台的地址为“192.168.1.1”。如何使用 nmap 扫描 233.1 机器的 192.168.1.1-254 范围？我希望能够在 Wireshark 中只看到对 192.168.1.1 的请求。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:34:03.677

主机必须通过 a 互连`gateway`（假设它们的子网掩码是 a `/24`）。

如果网关存在，则两个子网可以互通，可以正常使用nmap（例如`nmap -sP 192.168.1.1-254`）

然后，如果您只想查看流向主机的流量`192.168.1.1`，请设置`ip.addr == 192.168.1.1`为过滤器`wireshark`

# facebook - Facebook 在分享 url 时忽略 og:image？

> ID：14646327
> 
> 赞同：8
> 
> 时间：2013-02-01T12:28:21.187
> 
> 标签：facebook, thumbnails, share, status

我创建了一个网站 - [http://mati.ravpage.co.il/check4](http://mati.ravpage.co.il/check4) 该网站包含一个 og:image 标记，并且已正确处理。

但是，当我想共享此链接时（通过将其放置在新创建的状态中）：它显示两个可能的缩略图，默认值与 og:image 中声明的不同。您可以在以下屏幕截图中看到这一点：[屏幕截图](http://images.ravpages.co.il/xsite_resources/user_content/a2fa09f7e331c73ec8ba3b64b846d7dd/images/d3ee6664db5e4078207911f8e6cdb06b.png)

*   显示为默认缩略图的图片是页面中包含的图片。

我正在使用 Chrome，并且很确定几周前它有所不同 - 那时只显示了 og:image 缩略图。

我在这里做错了什么， og:... 标签不正确还是 Facebook 的新行为？

在此先感谢，马蒂斯基巴

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-20T05:16:38.330

这个页面会告诉你出了什么问题，如果有的话：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug 。对我来说，图像太小（200 x 200 分钟）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:49:45.220

不仅可以在 Facebook linter 中检查 html，还可以在 HTML 验证工具中检查 html。其中之一是由[W3C](http://validator.w3.org/)创建的。

对于提到的网站，它指出了[一些错误](http://validator.w3.org/check?uri=http%3A%2F%2Fmati.ravpage.co.il%2Fcheck4&charset=%28detect+automatically%29&doctype=Inline&group=0)，并且由于 <meta> 标签也有问题，这可能是 Facebook 解析整个页面以获取图片的原因。

例如：

```
<meta xmlns="" property="og:url" content="http://mati.ravpage.co.il/check4"> 
```

应该是（注意最后的斜线）

```
<meta property="og:url" content="http://mati.ravpage.co.il/check4" /> 
```

# javascript - “递归过多”主干错误

> ID：14646328
> 
> 赞同：1
> 
> 时间：2013-02-01T12:28:26.890
> 
> 标签：javascript, backbone.js, collections, models, backbone-model

我正在为我的应用程序使用 BackboneJS。在我的场景中，我有一个包含`booksCollection`所有书籍列表（比如模型）的集合（比如`Book`）。我需要根据 获取某本书`id`并将其传递给视图。我有以下代码：

```
var book = booksCollection.get(1);
book.save(); // this obtained model is passed to some view, which makes few changes to the model and saves to the server

// booksCollection is a Backbone collection with model: Book 
```

在检查`book`时，我发现它具有`collection`所有模型的属性`booksCollection`。所以，当试图保存（设置几个属性后）这个模型时，我得到这个错误“递归太多”。

通过在集合上调用`get`方法返回的模型是对象吗？`Backbone``readonly`

作为快速修复，我正在取消设置`collection`属性`book`，然后保存模型

> book.unset('collection', {静默: true });

这是一个正确的方法吗？

谢谢，安吉

# php - 从 php post 表单设置 cookie

> ID：14646329
> 
> 赞同：2
> 
> 时间：2013-02-01T12:28:41.893
> 
> 标签：php, post, cookies

我试图获取一个 php 表单来从 cookie 中自动填充用户 ID 字段，或者如果它是一台新电脑，则为用户提供“记住我”的选项。当我手动添加 cookie 然后加载表单页面时，它会正确填充用户框，但是当它从表单本身发布时，我似乎无法设置 cookie。

来自 php 表单的代码：

```
<form action="./post_cookies.php" method="post" id="HOME">
    <div id="nav">
        <ul>
            <li><i>Whats your username:</i></li>
           <li><i><input type="text" size="40" name="User_ID" 

           <?php
if (isset($_COOKIE["user"]))
  echo "value=\"" . $_COOKIE["user"] . "\"</i></li>";
else
  echo "placeholder=\"12345\"></i></li>";
?> 
            <li><i>Remember me: <INPUT TYPE="checkbox" NAME="remember" VALUE="1"> Yes</i></li>
        </ul>
    </div>

<div id="nav" style="text-align:center;">
        <ul>
            <li><i><button form="HOME" type=submit style="width:200px;height:40px">Submit</button></i></li>
        </form>
        </ul>
    </div>

</div> 
```

此表单发布到“post_cookies.php”，代码为：

```
 <?php
// creating a variable to store the timestamp in
$posttime = time();

// if the remember me checkbox returns a 1 then add the users, username as a cookie

if($_POST[remember]==1)
{   
    setcookie('user', $_POST[User_ID], $posttime + 3600);        // Sets the cookie 
}

// this is where the data base connection would go

header("Location: http://www.domain.com/index.php");
?> 
```

这个想法是，如果“记住我”被选中，那么 post_cookies.php 将使用用户 ID 设置一个 cookie。

我看不到 post_cookies.php 哪里出错了，也没有设置 cookie。非常感谢任何帮助。

谢谢！马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:30:38.007

它应该是：

```
if ($_POST['remember'] == 1) {   
    setcookie('user', $_POST['User_ID'], $posttime + 3600);        // Sets the cookie 
} 
```

数组键在引号中。试试看

与

```
$_POST['User_ID'] 
```

还

```
echo "value=\"" . $_COOKIE["user"] . "\"</i></li>"; 
```

`>`在_`</i>`

# macos - 如何在 OS X 中安装缺少的代码页（charmap）

> ID：14646330
> 
> 赞同：1
> 
> 时间：2013-02-01T12:28:46.933
> 
> 标签：macos, character-encoding, osx-snow-leopard, locale, darwin

我错过了系统 (IBM-1146) 上的某个代码页，需要安装它。但我找不到怎么做。谷歌对此非常沉默。

我知道它丢失了，因为 iconv 抱怨： `iconv: conversion from IBM-1146 unsupported`

并`iconv -l`确认没有安装charmap。一些研究暗示我可以使用它来安装它，`localedef`但我在网上的任何地方都找不到相应的charmap文件。

非常感谢任何帮助。

# c# - nettcpbinding 如何正确添加服务引用？

> ID：14646333
> 
> 赞同：1
> 
> 时间：2013-02-01T12:28:51.567
> 
> 标签：c#, .net, wcf, service, nettcpbinding

请帮我。我使用 netTcpBinding 和安全`mode="Message"` 消息创建服务`clientCredentialType="UserName"`，这是我的配置

```
 <system.serviceModel>
<client>
  <endpoint address="http://topaznet.hq.eximb.com/RS/Svc/RS.svc"
    binding="wsHttpBinding" bindingConfiguration="wsHttpBindingEndpoint"
    contract="RSClient.IRS" name="wsHttpBindingEndpoint" />
</client>
<services>
  <service behaviorConfiguration="CredoServiceBehavior" name="CredoService.Credo">
    <endpoint address="" binding="netTcpBinding" name="netTcpBindingEndpoint"
      contract="CredoService.ICredo" />
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" contract="IMetadataExchange" endpointConfiguration="" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost/CredoService/" />
      </baseAddresses>
    </host>
  </service>
</services>

<bindings>
  <netTcpBinding>
    <binding name="netTcpBinding" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
      <security mode="Message">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </netTcpBinding>
  </bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="CredoServiceBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="CredoService.Common.CustomUserNameValidator, CredoService"/>
        <serviceCertificate storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" findValue="91797E67B20D0853A90CA8E228AF460A382ED94B" />
        <windowsAuthentication allowAnonymousLogons="true"/>
      </serviceCredentials>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceThrottling maxConcurrentCalls="2147483647" maxConcurrentSessions="2147483647" maxConcurrentInstances="2147483647"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

服务托管在 IIS 中并且工作正常。我创建新的 Windows 窗体项目并单击添加服务引用，Visual Studio 为我的配置生成：

```
 <system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="netTcpBindingEndpoint1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="65536">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://localhost/CredoService/Credo.svc"
            binding="netTcpBinding" bindingConfiguration="netTcpBindingEndpoint"
            contract="CredoClient.ICredo" name="netTcpBindingEndpoint">
            <identity>
                <servicePrincipalName value="host/home" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

在这个网络配置中：

```
 <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security> 
```

但在我的服务中

```
 <security mode="Message">
    <message clientCredentialType="UserName"/>
  </security> 
```

如果我更改此客户端不起作用并引发异常。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:55:10.530

我刚刚发现您的代码存在另一个问题。您的服务没有选择绑定！

```
<endpoint address="" binding="netTcpBinding" name="netTcpBindingEndpoint"
  contract="CredoService.ICredo" /> 
```

需要是

```
<endpoint address="" binding="netTcpBinding" bindingConfiguration="netTcpBinding" name="netTcpBindingEndpoint" contract="CredoService.ICredo" /> 
```

在你的`<services><service><endpoint>`部分。

这可以解释为什么 VS 使用默认的 NetTcpBinding 而不是您的选项。

# python - Pandas - 按日期对日内时间序列进行分组

> ID：14646336
> 
> 赞同：16
> 
> 时间：2013-02-01T12:29:00.990
> 
> 标签：python, numpy, pandas, time-series

我有一个多天的日内日志返回系列，我想将其下采样到每日 ohlc。我可以做类似的事情

```
hi = series.resample('B', how=lambda x: np.max(np.cumsum()))
low = series.resample('B', how=lambda x: np.min(np.cumsum())) 
```

但是每次调用计算 cumsum 似乎效率低下。有没有办法先计算 cumsums 然后将 'ohcl' 应用于数据？

```
1999-08-09 12:30:00-04:00   -0.000486
1999-08-09 12:31:00-04:00   -0.000606
1999-08-09 12:32:00-04:00   -0.000120
1999-08-09 12:33:00-04:00   -0.000037
1999-08-09 12:34:00-04:00   -0.000337
1999-08-09 12:35:00-04:00    0.000100
1999-08-09 12:36:00-04:00    0.000219
1999-08-09 12:37:00-04:00    0.000285
1999-08-09 12:38:00-04:00   -0.000981
1999-08-09 12:39:00-04:00   -0.000487
1999-08-09 12:40:00-04:00    0.000476
1999-08-09 12:41:00-04:00    0.000362
1999-08-09 12:42:00-04:00   -0.000038
1999-08-09 12:43:00-04:00   -0.000310
1999-08-09 12:44:00-04:00   -0.000337
...
1999-09-28 06:45:00-04:00    0.000000
1999-09-28 06:46:00-04:00    0.000000
1999-09-28 06:47:00-04:00    0.000000
1999-09-28 06:48:00-04:00    0.000102
1999-09-28 06:49:00-04:00   -0.000068
1999-09-28 06:50:00-04:00    0.000136
1999-09-28 06:51:00-04:00    0.000566
1999-09-28 06:52:00-04:00    0.000469
1999-09-28 06:53:00-04:00    0.000000
1999-09-28 06:54:00-04:00    0.000000
1999-09-28 06:55:00-04:00    0.000000
1999-09-28 06:56:00-04:00    0.000000
1999-09-28 06:57:00-04:00    0.000000
1999-09-28 06:58:00-04:00    0.000000
1999-09-28 06:59:00-04:00    0.000000 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T13:12:35.537

```
df.groupby([df.index.year, df.index.month, df.index.day]).transform(np.cumsum).resample('B', how='ohlc') 
```

我想这可能是我想要的，但我必须测试。

编辑：在 zelazny7 的回复之后：

```
df.groupby(pd.TimeGrouper('D')).transform(np.cumsum).resample('D', how='ohlc') 
```

工作，也比我以前的解决方案更有效率。

**更新**：

> pd.TimeGrouper('D') 自[pandas v0.21.0](https://pandas.pydata.org/pandas-docs/stable/whatsnew.html#whatsnew-0210-deprecations)起已弃用。

改用[`pd.Grouper()`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Grouper.html#pandas.Grouper)：

```
df.groupby(pd.Grouper(freq='D')).transform(np.cumsum).resample('D', how='ohlc') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T14:14:16.703

我无法让您的重新采样建议起作用。你有运气吗？这是一种在工作日级别聚合数据并一次性计算 OHLC 统计数据的方法：

```
from io import BytesIO
from pandas import *

text = """1999-08-09 12:30:00-04:00   -0.000486
1999-08-09 12:31:00-04:00   -0.000606
1999-08-09 12:32:00-04:00   -0.000120
1999-08-09 12:33:00-04:00   -0.000037
1999-08-09 12:34:00-04:00   -0.000337
1999-08-09 12:35:00-04:00    0.000100
1999-08-09 12:36:00-04:00    0.000219
1999-08-09 12:37:00-04:00    0.000285
1999-08-09 12:38:00-04:00   -0.000981
1999-08-09 12:39:00-04:00   -0.000487
1999-08-09 12:40:00-04:00    0.000476
1999-08-09 12:41:00-04:00    0.000362
1999-08-09 12:42:00-04:00   -0.000038
1999-08-09 12:43:00-04:00   -0.000310
1999-08-09 12:44:00-04:00   -0.000337"""

df = read_csv(BytesIO(text), sep='\s+', parse_dates=[[0,1]], index_col=[0], header=None) 
```

在这里，我创建了一个字典词典。外部键引用您要应用函数的列。内部键包含聚合函数的名称，内部值是您要应用的函数：

```
f = {2: {'O':'first',
         'H':'max',
         'L':'min',
         'C':'last'}}

df.groupby(TimeGrouper(freq='B')).agg(f)

Out:
                   2
                   H         C         L         O
1999-08-09  0.000476 -0.000337 -0.000981 -0.000486 
```

# symfony - 如何在没有渲染路线的情况下获取树枝中的当前绝对网址？

> ID：14646337
> 
> 赞同：15
> 
> 时间：2013-02-01T12:29:05.313
> 
> 标签：symfony, twig

在 twig 中，我需要获取当前的完整 uri (url + uri)，而不是像这样渲染它

```
path('route_test', {param1:1}) 
```

如何得到它？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-01T12:39:57.247

尝试使用：

```
{{ app.request.uri }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-03T16:06:02.207

正如上面所说，一些答案不再有效。

**截至2017'09 年**对我有用的是这个

```
{{ url('<current>') }} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-18T13:47:13.450

在最新版本的树枝中不再起作用`{{app.request.uri}}`

试试`{{global.request.uri}}`吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-05T10:37:53.220

您可能对子请求（`$this->forward`来自控制器或`{{ render(controller('...')) }}`视图）有问题，我更喜欢为此使用 Twig 扩展。

```
<?php

namespace AppBundle\Twig\Extension;

// ...    

class MyExtension extends \Twig_Extension
{
    // ...

    public function getFunctions()
    {
        return [
            new \Twig_SimpleFunction('current_locale', [$this, 'currentLocale']),
            new \Twig_SimpleFunction('current_uri', [$this, 'currentUri']),
        ];
    }

    public function currentLocale()
    {
        return $this->get('request_stack')->getMasterRequest()->getLocale();
    }

    public function currentUri()
    {
        return $this->get('request_stack')->getMasterRequest()->getUri();
    }

    public function getName()
    {
        return 'my';
    }
} 
```

# wordpress - 短代码在 Wordpress 中没有给我想要的输出

> ID：14646339
> 
> 赞同：0
> 
> 时间：2013-02-01T12:29:11.390
> 
> 标签：wordpress, shortcode

**插件代码**

```
function myShortcode( $atts ) {  
    extract( shortcode_atts( array( 'cat' => '', ), $atts ) );  
    ob_start();  
    if ( $cat == '' ) { echo "Do Nothing!"; } 
    $output_string = ob_get_contents();  
    ob_end_clean();  
    return $output_string;  
}  
add_shortcode( mycatlist, myShortcode); 
```

**在帖子中添加以下短代码（在 wp-admin 的帖子部分中）**

```
 [mycatlist cat=4] 
```

**在 wordpress 模板文件中添加以下代码**

```
 <?php echo do_shortcode("[mycatlist]"); ?> 
```

**我得到那个输出**什么都不做！

但我想得到 cat 值，我的意思是 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:01:34.423

您发布的代码有很多与您的测试场景没有太大关系的代码。将其简化为：

```
 function myShortcode( $atts ) {  

    // maybe add some debugging?
    // print_r($atts);

    extract( shortcode_atts( array( 'cat' => '', ), $atts ) );  
    return $cat;
 }  
 add_shortcode( 'mycatlist', 'myShortcode'); 
```

现在这样称呼它：

```
<?php echo do_shortcode("[mycatlist cat=\"4\"]"); ?> 
```

它应该在您的页面上打印 4。

# java - Java如何从文本文件中删除一行

> ID：14646340
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:29:16.777
> 
> 标签：java, file-io

我正在用 Java swing api 创建一个应用程序。我正在使用 txt 文件作为我的数据库来存储、更新等。我成功完成了存储过程。但我无法更新。如果我单击应用程序上的更新按钮，则无法替换文件中的数据。你能告诉我如何替换文件中的数据吗？

提前致谢...

```
import java.io.*;

public class test {

    public static void main(String args[]) {
        try {
            String data = null;
            File file = new File("student.txt", true);
            FileReader fr = new FileReader(file);
            BufferedReader br = new BufferedReader(fr);
            while ((data = br.readLine()) != null) {
                String[] de = data.split(" ");
                if (de[0].equals("vimal")) {
                    data.trim();
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:36:23.993

毕竟你需要关闭你的缓冲阅读器，并且在你的 fileReader 中需要一个“True”

```
 import java.io.*;
 public class test {
   public static void main(String args[]) {
    try {
      String data= null;
      File file=new File("student.txt");
      FileReader fr =new FileReader(file,true);
      BufferedReader br = new BufferedReader(fr);
      while((data=br.readLine())!= null) {
        String[] de = data.split(" "); 
        if(de[0].equals("vimal")) {
           data.trim();
        }
      }
    } catch (IOException e) {
        e.printStackTrace();
    }
    br.close()
  }
 } 
```

# ios - 使用 id3taggenerator 和 mediafilesegmenter 将定时元数据插入 HLS（HTTP Live Stream）

> ID：14646343
> 
> 赞同：7
> 
> 时间：2013-02-01T12:29:34.023
> 
> 标签：ios, objective-c, metadata, http-live-streaming, id3

我尝试将定时元数据插入 .mov 或 .mp4 视频文件。我确实在这里读过它：

*   [Apple HTTP Live Streaming 中的实时流元数据读取](https://stackoverflow.com/questions/8187532/live-stream-metadata-reading-in-apple-http-live-streaming)
*   [http://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/](http://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/)
*   [https://developer.apple.com/streaming/](https://developer.apple.com/streaming/)

基本上，我的问题是无论我尝试什么，我都会按预期得到生成的 .m3u8 和一堆 .ts 文件，没有任何错误，但我觉得元数据没有插入。

让我详细解释一下我的工作。

首先，我生成一些 id3 标签，如下所示：

```
id3taggenerator -o tag1.id3 -t "Test" 
```

然后我编写了一个名为“macrofile.txt”的宏文本文件，其中包含：

```
5 id3 tag1.id3 
```

我确保文件以换行符结尾，并且每个字段由一个空格而不是制表符分隔。

然后，我使用 mediafilesegmenter 创建带有 .ts 文件的 m3u8，其命令还包括宏文件，如下所示：

```
mediafilesegmenter -index-file test.m3u8 -M macrofile.txt -no-floating-point-duration -iframe-index-file none test.mp4 
```

这将成功生成 m3u8 文件 + 一堆 .ts 文件（每 10 秒视频一个 ts）

我将它们上传到我的网络服务器上（显然我添加了正确的 MIME 类型等），然后从我的 iOS 应用程序中打开流：

```
NSURL* url = [NSURL URLWithString:@"http://url.com/test.m3u8"];
player = [[MPMoviePlayerController alloc] initWithContentURL:url]; 
```

我还确保添加 MPMoviePlayerTimedMetadataUpdatedNotification 通知，如下所示：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
[center addObserver:self
           selector:@selector(metadataUpdate:)
               name:MPMoviePlayerTimedMetadataUpdatedNotification
             object:nil]; 
```

现在的问题是，永远不会触发 MPMoviePlayerTimedMetadataUpdatedNotification。

如果我尝试使用 Apple 测试流（[https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8](https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8)），其中包含每 5 秒一次的定时元数据 -> 它可以完美运行

所以这就是为什么我假设我生成的 .ts 文件不包含任何元数据，或者至少我在某个地方做错了什么，但我检查了我能做的一切，现在我没有想法了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:13:10.373

在这上面花了更多时间后，我决定联系 Apple 开发者技术支持。

确实是mediafilesegmenter工具最新版本1.1(130110)的一个bug

这是访问错误报告的直接链接 [https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/67/wo/quUWkJlEHk4L6S6U9geEZ0/21.83.28.0.13](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/67/wo/quUWkJlEHk4L6S6U9geEZ0/21.83.28.0.13)

BUG ID为**13178898**

一旦错误得到解决或 Apple 为我提供了解决方法，我将在此处更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T00:27:43.320

这个 wordpress 博客在您遇到的问题方面对我有很大帮助。[https://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/](https://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/)

# jquery - 响应式设计 - 修改 JQuery 以更改手机和平板电脑的操作

> ID：14646344
> 
> 赞同：0
> 
> 时间：2013-02-01T12:29:34.193
> 
> 标签：jquery, responsive-design

我有以下代码，鼠标悬停时会隐藏图像并在下面显示 div 的内容，一旦单击 div，它会将您带到另一个页面。鼠标悬停不适用于平板电脑等，因此我将悬停更改为单击以显示 div 内容，而不是悬停。但是，当我将悬停更改为单击时，会显示 div，然后通过一个操作进入下一页。我需要点击两次。谁能建议我如何实现这一目标？

提前谢谢了。

```
$(document).ready(function() {

    //Custom settings
    var style_in = 'easeOutBounce';
    var style_out = 'jswing';
    var speed_in = 1000;
    var speed_out = 250;

    //Calculation for corners
    var neg = Math.round($('.qitem').width() / 2) * (-1);  
    var pos = neg * (-1);  
    var out = pos * 2;
    var pos_h = Math.round($('.qitem').height() / 2);   

    $('.qitem').each(function () {

        //grab the anchor and image path
        url = $(this).find('a').attr('href');
        img = $(this).find('img').attr('src');

        //remove the image
        $('img', this).remove();

        //append four corners/divs into it
        $(this).append('<div class="topLeft"></div><div class="topRight"></div><div class="bottomLeft"></div><div class="bottomRight"></div>');

        //set the background image to all the corners
        $(this).children('div').css('background-image','url('+ img + ')');

        //set the position of corners
        $(this).find('div.topLeft').css({top:0, left:0, width:pos, height:pos_h});  
        $(this).find('div.topRight').css({top:0, left:pos, width:pos, height:pos_h});   
        $(this).find('div.bottomLeft').css({bottom:0, left:0, width:pos, height:pos_h});
        $(this).find('div.bottomRight').css({bottom:0, left:pos, width:pos, height:pos_h}); 

    }).hover(function () {  //change to click

        //animate the position
        $(this).find('div.topLeft').stop(false, true).animate({top:neg, left:neg}, {duration:speed_out, easing:style_out});
        $(this).find('div.topRight').stop(false, true).animate({top:neg, left:out}, {duration:speed_out, easing:style_out});   
        $(this).find('div.bottomLeft').stop(false, true).animate({bottom:neg, left:neg}, {duration:speed_out, easing:style_out});  
        $(this).find('div.bottomRight').stop(false, true).animate({bottom:neg, left:out}, {duration:speed_out, easing:style_out}); 

    },

    function () {

        //put corners back to the original position
        $(this).find('div.topLeft').stop(false, true).animate({top:0, left:0}, {duration:speed_in, easing:style_in});  
        $(this).find('div.topRight').stop(false, true).animate({top:0, left:pos}, {duration:speed_in, easing:style_in});   
        $(this).find('div.bottomLeft').stop(false, true).animate({bottom:0, left:0}, {duration:speed_in, easing:style_in});
        $(this).find('div.bottomRight').stop(false, true).animate({bottom:0, left:pos}, {duration:speed_in, easing:style_in}); 

    }).click (function () {

        //go to the url
        window.location = $(this).find('a').attr('href');  
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:44:01.003

如果`$.hover()`用 click 替换，则必须将最后一个替换为`$.click`，[`$.dblclick`](http://api.jquery.com/dblclick/)否则会同时触发两个 click 处理程序。

# java - 如何使用 apache POI 在单元格注释中添加换行符

> ID：14646349
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:29:54.297
> 
> 标签：java, apache-poi

我需要在单元格注释中添加多行。如何使用 apache POI 打破单元格注释中的行

前任：

```
Comment = "This is comment 1";
comment = comment + "This is comment2";
comment = comment + "This is comment3";
cell.setCellComment(comment); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:41:31.813

您可以使用 \n 换行。

```
Comment = "This is comment 1";
comment = comment + "\n This is comment2";
comment = comment + "\n This is comment3";
cell.setCellComment(comment); 
```

# spring - JSON 使用 Spring MVC 3.2 延迟结果错误返回

> ID：14646354
> 
> 赞同：3
> 
> 时间：2013-02-01T12:30:07.223
> 
> 标签：spring, rest, spring-mvc, asynchronous

我正在尝试将 Spring MVC 3.2 异步延迟结果用于 RESTful JSON 服务。

使用同步方法：

```
@ResponseBody
@RequestMapping(value = "/catalog", method = RequestMethod.GET, produces = "application/json")
public Entry catalog() {
  Entry entry = new Entry();
  entry.timestamp = System.currentTimeMillis();
  entry.summary = "Hello World!";
  entry.body = new HashMap<String, Object>();
  entry.body.put("key1", "value1");
  entry.body.put("key2", "value2");
  entry.body.put("key3", "value3");
  return entry;
} 
```

我得到以下 JSON 结果：

```
{"timestamp":1359721240340,"summary":"Hello World!","body":{"key3":"value3","key2":"value2","key1":"value1"}} 
```

使用异步方法（人为示例）：

```
@ResponseBody
@RequestMapping(value = "/catalogs", method = RequestMethod.GET, produces = "application/json")
public DeferredResult<Entry> catalogs() {
    Entry entry = new Entry();
    entry.timestamp = System.currentTimeMillis();
    entry.summary = "Hello World!";
    entry.body = new HashMap<String, Object>();
    entry.body.put("key1", "value1");
    entry.body.put("key2", "value2");
    entry.body.put("key3", "value3");
    DeferredResult<Entry> result = new DeferredResult<Entry>();
    result.setResult(entry);
    return result;
} 
```

我得到以下信息：

```
{}{"timestamp":1359721240340,"summary":"Hello World!","body":{"key3":"value3","key2":"value2","key1":"value1"}} 
```

那么前缀空对象（即{}）是怎么回事？我是在做一些明显愚蠢的事情，还是`MappingJackson2JsonView`不能很好地使用新的异步功能？

仅供参考，这是我的 Spring MVC bean 配置：

```
<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="1" />
    <property name="contentNegotiationManager">
        <bean class="org.springframework.web.accept.ContentNegotiationManager" />
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJackson2JsonView" />
        </list>
    </property>
</bean>

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="order" value="2" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:56:48.923

我真的很想评论而不是“回答”这个问题，但我还不能这样做。我得到和你一样的结果。`MappingJackson2JsonView`似乎无法与 DeferredResult 一起正常工作。此外，一旦我更新到 Spring 3.2.3，生成的 JSON 会在前面加上 {} && {}，即使我的配置中有：`<property name="prefixJson" value="false" />`

我最初尝试解决这个问题涉及编写一个`HttpServletRequestWrapper`和一个过滤器，我可以从中擦洗结果，但即使这在 Async Servlet 领域似乎也不能很好地发挥作用。

我发现适用于我的特定应用程序的唯一方法是使用 JavaScript 过滤掉多余的垃圾。虽然这行得通，但它确实让我想自杀，或者至少拔出一两个指甲。

我知道这不是很有帮助。我希望你能从我也为这种看似简单的蛋蛋痛苦而哭泣的事实中找到一些安慰。

# file-upload - 如何按块上传大文件？

> ID：14646355
> 
> 赞同：9
> 
> 时间：2013-02-01T12:30:07.587
> 
> 标签：file-upload, upload, chunking

我有一个小文件共享网页。使用它是免费的。我想上传 0mb 到 1GB 的文件。两天以来我一直在谷歌搜索，但我找不到任何我需要的东西......

我的网页：[http](http://boxy.tigyisolutions.hu) ://boxy.tigyisolutions.hu但是我现在只能上传 20-30mb。我想**一次只上传一个文件。**但它可能大于 500-600mb ......有人可以帮我吗？

我尝试了 jquery fileupload，但它没有为我上传任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:04:47.193

Blob.slice方法将允许您将文件客户端拆分为块[。](https://developer.mozilla.org/en-US/docs/DOM/Blob)然后，您必须单独发送每个块。这仅适用于支持[File API](https://developer.mozilla.org/en-US/docs/Web/API/File)的浏览器。

如果您不想自己编写此代码，[Fine Uploader](http://fineuploader.com)是一个 javascript 上传器库，它能够为您分块文件并将它们发送到您的服务器。

# android - 背景可绘制形状边距

> ID：14646357
> 
> 赞同：0
> 
> 时间：2013-02-01T12:30:12.377
> 
> 标签：android

我有一个带有圆角的 xml 可绘制形状，它是 listview 的背景（边距为 10dp）。现在我在列表视图中添加了页眉/页脚。

但是我怎样才能让背景不影响页眉/页脚？我希望它从数组中的第一个（不是页眉）元素开始并在最后一个（不是页脚）结束。列表视图中项目的大小是已知的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:26:12.247

如果您可以提供您的 listView 项 XML 和 listView 适配器的代码，我可以给您一个详细的答案。

基本上这就是你必须做的

1) 在您的 listView 项目 XML 中，添加页眉和页脚。设置 id 并将可见性属性设置为`gone`

2）在您的适配器中，在`getView (int position, View convertView, ViewGroup parent)`方法中；检查位置。如果位置为 0，则将标题可见性设置为`View.VISIBLE`

如果位置大小等于 ，则`getCount()`设置`View.VISIBLE`为页脚。

# c# - 如何在 SQL Server 2000 中创建扩展存储过程

> ID：14646363
> 
> 赞同：1
> 
> 时间：2013-02-01T12:30:36.470
> 
> 标签：c#, sql, stored-procedures, sql-server-2000, extended-procedures

我需要使用 Visual Studio 在 SQL Server 2000 中创建一个扩展存储过程。它在 SQL Server 2008 和 2012 中运行良好。添加 dll 后，我按照[此处](http://msdn.microsoft.com/en-us/library/ms164653.aspx)描述的说明操作 ，存储过程无法运行！

[此处](http://msdn.microsoft.com/en-us/library/ms164653.aspx)为 SQL Server 2012描述了创建扩展过程的过程。但是我需要在 SQL Server 2000 中以相同的方式创建相同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:35:22.733

恐怕根本不可能。

如果您查看链接到的页面 ( [http://msdn.microsoft.com/en-us/library/ms164653.aspx](http://msdn.microsoft.com/en-us/library/ms164653.aspx) )，您会看到 SQL Server 2000 未列在“其他版本”下拉列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:47:02.803

你不能这样做。

SQL Server **2005**和更新版本引入了这种**CLR 支持**- 在 SQL Server 中包含 .NET 代码的能力。

SQL Server **2000**没有类似的功能。您将需要使用本机 C++ API -[在此处查看此链接以了解初学者](http://msdn.microsoft.com/en-us/library/aa215790%28v=sql.80%29.aspx)。

# php - Symfony2 生产缓存错误

> ID：14646366
> 
> 赞同：0
> 
> 时间：2013-02-01T12:30:40.707
> 
> 标签：php, caching, symfony

我使用 monolog 来接收在我的 symfony 应用程序中发生的错误，并且每次发生一些 404 时，我都会在我的电子邮件中收到错误日志。

我已经有一段时间反复收到同样的错误：

> [2013-02-01 10:15:32] request.ERROR: Symfony\Component\HttpKernel\Exception\NotFoundHttpException: 在 {my_path}/app/cache/ 找不到“GET /cache/65c40e67bd5236d5be8e3637b4c5c61c”（未捕获的异常）的路由prod/classes.php 第 5179 行 [] []

发生在我拥有的其他一些路线上，例如“/login/cache/65c40e67bd5236d5be8e3637b4c5c61c”

好吧，我不知道为什么会这样，我想避免这种错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:36:39.177

当有人请求时，这些问题就会发生`yoururl.com/cache/65c40e67bd5236d5be8e3637b4c5c61c`。由于这些是 http 请求，因此如果您运行特定类型的应用程序来解释这一点，很可能会进行测试。有许多脚本只是简单地抓取网络，对他们可以找到的每个域执行一些 http 请求，如果他们得到某种响应，他们会尝试更多。

如果您不想在独白中出现此类错误，可以将级别更改为`critical`. 目前无法更改这些 404 错误的级别。

# javascript - 如何在 node.js 中引入插件模块？

> ID：14646373
> 
> 赞同：1
> 
> 时间：2013-02-01T12:30:56.387
> 
> 标签：javascript, node.js, oauth-2.0, mocha.js

我正在使用 Mocha 框架和[SuperAgent](https://github.com/visionmedia/superagent/)模块测试服务器（不是我做的），但是我需要测试服务器 Ouath 协议。我找到了[superagent-oauth](https://github.com/LearnBoost/superagent-oauth)模块以发出签名请求。

但是，当我需要该模块时，出现以下错误

> TypeError: Object.keys 在非对象上调用

我的代码遵循 superagent-oauth 存储库中的自述文件，它是

```
var superagent = require('superagent');
var log = require('./log.js');
var Oauth = require('node-oauth');
var oauth = new Oauth({..});

require('superagent-oauth')(superagent); 
```

然后在运行测试时，我得到了 TypeError: Object.keys 在非对象上调用。

使用超级代理时，我只是这样做

```
var superagent = require('superagent');
agent = superagent.agent(); 
```

但我不知道如何使用/需要 superagent-oauth 模块。那么正确的方法是什么？谢谢

添加了跟踪

> 2) Login 'Username:Password' test: POST with a valid logins logins into AM with a valid login: TypeError: Object.keys called on non-object at Function.keys (native) at Request.query (/home/maldo /testingAM/node_modules/superagent-oauth/superagent-oauth.js:22:23) 在上下文中。(/home/maldo/testingAM/loginUserPass.js:74:6) 在 Test.Runnable.run (/home/maldo/node_modules/mocha/lib/runnable.js:196:15) 在 Runner.runTest (/home/ maldo/node_modules/mocha/lib/runner.js:343:10) 在 Runner.runTests.next (/home/maldo/node_modules/mocha/lib/runner.js:389:12) 在下一个 (/home/maldo/ node_modules/mocha/lib/runner.js:269:14) 在 Runner.hooks (/home/maldo/node_modules/mocha/lib/runner.js:278:7) 在下一个 (/home/maldo/node_modules/mocha/ lib/runner.js:226:23) 在 Runner。

我总是在代理的 .query() 状态中多次在文件 loginUserPass 中获得此跟踪。当我在 OauthAM.js 中添加 superagent-ouath 要求时会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T14:37:48.033

在使用`npm init`. 此 GitHub 问题讨论建议将以下行添加到`package.json`项目文件（即您尝试创建的项目，而不是您尝试安装的项目）：

```
 "dependencies": {} 
```

这为我解决了。当然，您提到您在 package.json 中安装了依赖项，因此此答案更适合可能搜索错误消息的其他人。

[https://github.com/stephenplusplus/grunt-bower-install/issues/9](https://github.com/stephenplusplus/grunt-bower-install/issues/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:02:33.307

您是否`npm install`已从 npm 检索所有模块依赖项？似乎[superagent](https://npmjs.org/package/superagent)的依赖项可能不可用？

新的依赖项与 . 一起安装（并放入`package.json`文件中）`npm install superagent --save`。

这样，您将获得超级代理模块所需的所有依赖项。

# magento - 限制可以在 Magento 中购买/添加到购物车的产品

> ID：14646376
> 
> 赞同：2
> 
> 时间：2013-02-01T12:31:07.663
> 
> 标签：magento, shopping-cart, configure

所以我们的商店基本上销售我们企业网站的 6 个月和年度订阅。我想知道是否有一种方法可以使他们只能将一个订阅（产品）添加到购物车，而不是多个订阅，这样客户就不会犯购买双重订阅的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:49:12.563

**每个订单仅限一件商品**

如果购物车已经有数量，则使用观察者创建自定义模块以禁止添加商品（请参阅 getItemsQty()）。您还应该知道 updateItem() 可用于更改购物车中商品的数量

```
checkout_cart_update_items_after
checkout_cart_product_add_after
checkout_cart_add_product_complete
checkout_cart_update_item_complete
checkout_cart_save_before
checkout_cart_save_after 
```

请参阅 - [Magento - 以编程方式将多个产品添加到购物车](https://stackoverflow.com/questions/13701446/magento-adding-multiple-products-to-cart-programatically)

**限制每个订单中的每种产品**

您可以通过在产品管理中编辑“库存”选项卡上的值来限制可以添加到购物车的产品的最大数量。

请参阅[Magento：将产品最大数量限制为每个订单 1 个。数量 2 = 2 个订单](https://stackoverflow.com/questions/10856770/magento-limit-product-max-quantity-to-1-per-order-quantity-2-2-orders)

# html - 使用选项卡菜单单击后突出显示指向内容的链接

> ID：14646377
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:08.980
> 
> 标签：html, slider, sudo, nav

您好，我已将 sudo 图像滑块转换为我网站的更多内容滑块，我希望在活动时突出显示导航链接（文本）（在滑块的某些幻灯片上）

我试过使用：“活动选择器”，但它似乎只适用于真实的页面链接，如

```
<a href="http://stackoverflow.com">Home</a> 
```

与滑块相反：

```
<a href="javascript:void(0);" class="customLink" rel="1">Home</a> 
```

注意：菜单不在滑块内。

我的意思的一个例子就像这里的菜单，但只是文本：[http](http://rbista.com/demos/zwin/) ://rbista.com/demos/zwin/ （这是使用简单的标签，我正在使用 sudo 滑块）

这可以在 css/html 中完成，因为我没有 JQuery 吗？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:21:37.510

这应该足够了

```
$(".customLink").click(function(e)
{
    $(".customLink").removeClass("active");
    $(this).addClass("active");
});

.customLink.active
{
   some css here
} 
```

# rvm - dead simple chef rvm 安装脚本失败

> ID：14646381
> 
> 赞同：1
> 
> 时间：2013-02-01T12:31:25.267
> 
> 标签：rvm, chef-infra

我有什么：**厨师**；

我需要什么**：**为`node[:deploy][:user][:name]`. 我需要用户范围的安装，而不是系统范围的。

我最近尝试的：

```
script 'install_rvm' do
  user = node[:deploy][:user][:name]
  interpreter '/bin/bash'
  code "su -l #{user} -c '\curl https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable'"
  not_if { ::File.exists? "/home/#{user}/.rvm" }
end 
```

`su -l <username> -c '\curl <long_url> | bash -s stable'`当我在测试服务器上手动运行时，它**肯定**可以完美运行。我希望 Chef 运行相同的代码，并且在日志中看起来确实如此，但是下一个`execute`资源失败了，因为实际上不`/home/<username>/.rvm`存在。是的，我知道在 Chef 中我可以将用户指定为`user node[:deploy][:user][:name]`而不是更改用户，`su`但由于某种原因，如果我这样做`rvm`会尝试将自身安装在`/root/.rvm`（env 未正确重置？）。好吧，我想问一下，为什么即使对于如此简单的任务，厨师也如此糟糕，但看起来我选择了错误的地方，所以*问题是我做错了什么还是我错过了一些明显的事情*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:49:27.340

为什么不使用Fletcher [Nichol](https://github.com/fnichol)[的 chef-rvm](https://github.com/fnichol/chef-rvm) - 这是在 Chef中处理[RVM的受支持方式。](https://rvm.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:46:33.120

好吧，如果使用 Chef 的所有更好的方法都失败了，那么至少这有效并且可能有用。这是安装 ruby​​ 的资源

```
execute 'install_rvm' do
  user('root')
  user = node[:deploy][:user][:name]
  command "su -l #{user} -c '\curl https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable'"
  not_if { ::File.exists? "/home/#{user}/.rvm" }
end 
```

`gemset`如果它不存在，则创建的奖励：

```
execute 'rvm_install_ruby' do
  user('root')
  user = node[:deploy][:user][:name]
  ruby = node[:deploy][:ruby]
  gemset = node[:deploy][:gemset]
  command "su -l #{user} -c 'rvm use #{ruby}@#{gemset} --install --create'"
  not_if do
    if latest_patchlevel = `rvm list`.scan(/(ruby-#{ruby}-p)(\d+)/).map{ |a| a.last.to_i }.sort.last
      `rvm list gemsets`.match /ruby-#{ruby}-p#{latest_patchlevel}@#{gemset}/
    end
  end
end 
```

# c# - 缓存清单中的 web.config 文件不起作用

> ID：14646382
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:27.697
> 
> 标签：c#, asp.net, web-config, cache-manifest

我正在使用 HTML5 缓存清单进行构建，即使没有 Internet 连接，也能够从数据库加载一些动态 ASP.NET 页面（文本和图像）。

当我在后面的代码中将 connectionString 列为字符串时，一切正常（c#），但是当我尝试从 web.config 文件访问它时，它不起作用，因为 web.config 文件无法以某种方式缓存。我将它与所有其他正确缓存的文件一起包含在清单的 CACHE 部分中。

您可以缓存 app.config 文件还是有其他解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:44:07.917

缓存清单与 web.config 无关。

Web.config 仅供服务器使用。缓存清单由浏览器处理。

您的缓存不起作用必须有不同的原因。

# mysql - 使 SQL 类似于 DDL 语句

> ID：14646383
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:34.000
> 
> 标签：mysql, sql, import, ddl

当我跑步时`mysql -u root -p -D foo < bar.sql`

它一直在争论语法

> 第 4 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '[Article_Category] ​​附近使用的正确语法

该脚本是从 ERM 生成的，所以我想保留它。

```
CREATE TABLE [Article_Category]
(
[idArticle] []  NOT NULL,
[idCartegory] []  NOT NULL
) 
```

我怎样才能导入这个并摆脱错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:59:20.413

此方括号语法特定于 Microsoft 的表服务器产品。MySQL 不使用它。大多数 ERM 都有一个设置，用于选择应该为其生成 DDL 的表服务器的品牌和型号。

# mysql - 无法为受约束的 PK（自动增量）列插入具有 NULL 值的记录

> ID：14646385
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:37.290
> 
> 标签：mysql, foreign-keys, relational-database, innodb

我有两张桌子，我们称它们为`charts`和`charts_tree`。( `charts_tree.idDir`auto-increment, integer) 列被限制为`charts.chart_tree_dir`. 这两个表都是基于 InnoDB 的。

现在我正在尝试在`charts_tree`其中插入一行`null`值`idDir`（由于其自动增量性质），但我在此列上收到外部约束失败错误消息。考虑到这两个表最初都是空白的并且没有相互连接的列，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:44:10.350

idDir 列上的外键约束并引用 chart_tree_dir 列？这就是我从你所说的情况中理解的；如果是这种情况，当您尝试在charts_tree中插入一行时，mysql生成的auto_incremented值在创建时不存在于图表中（因为两个表都是空白的），因此外键失败。我认为应该是相反的。

# zend-framework2 - zfcuser 注册过程不工作

> ID：14646386
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:38.277
> 
> 标签：zend-framework2, zfcuser

我正在学习 Zend Framework(2.0)，我已经下载了框架应用程序并安装了 zfcuser。当我尝试注册过程时，它只会重新加载其他内容。数据库连接工作正常，因为我从快速入门教程中尝试了专辑模块，并且工作正常。

请指导，先谢谢了。

环境：Apache 2.0、Zendframework 2.0、PHP 5.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:23:39.703

你见过这个吗：

[http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser](http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser)

易于启动和运行

# asp.net-mvc - 如何正确、充分地在 asp.net mvc Razor 中使用 Knockout.js？

> ID：14646387
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:39.833
> 
> 标签：asp.net-mvc, razor, knockout.js, asp.net-mvc-viewmodel

我尝试在 asp.net mvc razor 上学习 knockout.js。我一直在编码下面的代码来学习和测试自己但是查看端给我一个 js 错误。

“var model = @Html.Raw(Json.Encode(Model));”发生错误 错误：Microsoft JScript 运行时错误：'fromJSON' 无法获取属性值：对象为空或未定义

控制器：

```
 [HttpGet]
        public ActionResult GetGift()
        {
            GiftModel gift = new GiftModel();
            gift.Price = 120;
            gift.Title = "Test";

            return View(gift);
        }

View:    

@using System.Web.Script.Serialization;
@model knockout1.Models.GiftModel

@{
    ViewBag.Title = "GetGift";
}

<h2>GetGift</h2>

<script src="/Scripts/knockout-2.1.0.js" type="text/javascript"></script>

<script type="text/javascript">

var initialData =   @Html.Raw( new JavaScriptSerializer().Serialize(Model));

var viewModel = ko.mapping.fromJSON(initialData);

    $(document).ready(function () { ko.applyBindings(viewModel); });
    </script>

<p>Title: <strong data-bind="text: Title"></strong></p>
<p>Price: <strong data-bind="text: Price"></strong></p> 
```

但我改变了我的js代码。错误消失。我无法理解第一次使用为什么不正确？我读了 Darin Dimitrov 的回复：

[达林·季米特洛夫](https://stackoverflow.com/questions/5970951/visual-studio-conditiional-compilation-is-turned-off-error-in-view-when-passin)：

```
 <script type="text/javascript">
    var jsonResultData = @Html.Raw(Json.Encode(Model));
</script> 
```

我：（效果很好。）

```
 <script type="text/javascript">

   $(function()
   {
      var model = @Html.Raw(Json.Encode(Model));

// Activates knockout.js
ko.applyBindings(model);
   });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:49:51.333

根据错误信息

> 'fromJSON' 无法获取属性值：对象为空或未定义

和页面设置您的问题是您尝试使用[KO 映射](http://knockoutjs.com/documentation/plugins-mapping.html)插件而不包括该插件。

所有作为字符串的方法都是`ko.mapping`映射插件的一部分，要使用它们，您需要`knockout.mapping.js`在 HTML 页面中引用该文件。

可以从[github下载映射插件吗](https://github.com/SteveSanderson/knockout.mapping/tree/master/build/output)

# c++ - 模板函数作为默认模板参数

> ID：14646390
> 
> 赞同：0
> 
> 时间：2013-02-01T12:31:59.987
> 
> 标签：c++, templates, default-parameters

我的班级声明开始如下：

```
template< 
    class P, 
    class B, 
    class comparePosition = compareHorizontal< P >
>
class BlahBlah  { ... 
```

`compareHorizontal`模板函数在哪里。当我尝试编译时，clang 吐出

```
[...]/entity.hpp:57:33: error: type name requires a specifier or qualifier
        class comparePosition = compareHorizontal< P >
                                ^

[...]/entity.hpp:57:33: error: C++ requires a type specifier for all declarations
        class comparePosition = compareHorizontal< P >
                                ^~~~~~~~~~~~~~~~~ 
```

（以及同一行上的许多其他错误）。

如果我只是删除默认模板参数，而其他所有内容都保持不变，那么它编译得很好。所以我想知道，如果可能的话，我将如何使用函数模板作为默认参数？或者我最好只用一个`operator()`调用`compareHorizontal`并使用它来创建一个仿函数类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:47:18.710

我认为原因是模板函数不是类型。如果您想到它，它是一个特定的值，函数的类型如下所示：

```
 template<
       class P,
       class B,
       class C=bool (*)(P&)
   >
   class BlahBlah  {
   }; 
```

它编译。就好像你说 C=5; 这也不会编译，因为 5 不是类型。我建议你在这种情况下使用结构。

# android - 图像按钮的 setBackgroundResource

> ID：14646394
> 
> 赞同：1
> 
> 时间：2013-02-01T12:32:09.760
> 
> 标签：android, imagebutton

我在我的应用程序中以 7 X 7 表格形式包含了 49 个图像按钮。当单击其中任何一个按钮时，我希望将背景资源设置为所有 7 个按钮，它们是相同的原始按钮......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:55:51.913

让您的活动实现`OnClickListener`，声明所有 49 个图像按钮的类成员并为图像按钮分配相同的 onclick 侦听器。

```
IB1.setonclicklistener(this);
.
.
.
. 
```

在功能组的定义中，图像按钮

```
onclick( view v)
{
    switch(v.getID())
    {
     case r.id.ix1:
     .
     .
     case r.id.ib7: //setbackground to all ImageButtons 1 to 7
     break;
     case r.id.ib8:
     .
     .
     case r.id.ib14: //setbackground to all ImageButtons 8 to 14
     break;
     .....
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:36:02.673

```
public void onClick(View v) {
        if (v == B1||v==B2||...) {
B1.setBackgroundResource(R.drawable.YourRes);
B2.setBackgroundResource(R.drawable.YourRes);
.
.
.}} 
```

这应该做你想做的

# c# - 尝试使用错误密钥解密时的 AesCryptoServiceProvider 行为

> ID：14646403
> 
> 赞同：2
> 
> 时间：2013-02-01T12:32:44.107
> 
> 标签：c#, .net, encryption, cryptography

我正在使用`AesCryptoServiceProvider`和`CryptoStream`加密一些数据，当我使用相同的密钥进行解密时，它似乎工作正常。但是，如果我尝试用错误的密钥解密它，我不会得到异常，只是垃圾数据。我在 .Net 文档中找不到任何说明应该发生的事情，但据此：

[http://books.google.co.uk/books?id=_Y0rWd-Q2xkC&pg=PA631](http://books.google.co.uk/books?id=_Y0rWd-Q2xkC&pg=PA631)

和这个：

[为什么密码错误会导致“填充无效，无法删除”？](https://stackoverflow.com/questions/11762/c-sharp-cryptographicexception-padding-is-invalid-and-cannot-be-removed)

我应该得到一个 CryptographicException。我做错了吗？我的功能是这样的：

```
public static byte[] Encrypt(byte[] data, string password, string salt, bool decrypt)
{
    SymmetricAlgorithm aes = new AesCryptoServiceProvider();
    Rfc2898DeriveBytes rfc2898 = new Rfc2898DeriveBytes(password, Encoding.UTF8.GetBytes(salt));
    aes.IV = rfc2898.GetBytes(aes.BlockSize / 8);
    aes.Key = rfc2898.GetBytes(256 / 8);
    ICryptoTransform enc;
    if (decrypt) {
        enc = aes.CreateDecryptor();
    } else {
        enc = aes.CreateEncryptor();
    }
    using (enc) {
        using (MemoryStream ms = new MemoryStream()) {
            using (CryptoStream cs = new CryptoStream(ms, enc, CryptoStreamMode.Write)) {
                cs.Write(data, 0, data.Length);
            return ms.ToArray();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:37:08.050

依靠填充错误不是确定密钥是否正确的好方法。您真的应该考虑为此目的使用[Authenticated Encryption 。](http://en.wikipedia.org/wiki/Authenticated_encryption)

我有一个在 C# 中工作的公共域 snip-it，用于[字符串的对称身份验证加密的现代示例。](https://stackoverflow.com/a/10366194/637783)我尽量保持最新并进行审查。

PS 此外，尚不清楚您的盐是按域、按用户还是来自示例中的每个密文，但如果它不是您的代码中的每个密文，IV 将是可预测的，并且对于许多不适合 AES-CBC 的密文来说是相同的. 实施加密是困难的。

我还研究了一个高级加密库，[即 Google Keyczar 的 C# 端口](http://jbtule.github.com/keyczar-dotnet/)。但这对你来说可能不是很好，它只支持随机生成密钥和密钥集，然后这些密钥集可以被密码加密，但只有密钥集。高级加密框架是加密的最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:55:21.890

如果您在解密时没有设置填充，则解密方法将无法识别垃圾。将填充设置为 PKCS#7 用于加密和加密，并且解密方法可能能够识别垃圾。

正如 jbtule 所说，为了充分保证，您将需要身份验证。要在一个数据传递中包含身份验证和加密，请使用[GCM 模式](http://en.wikipedia.org/wiki/GCM_mode)。对于单独的身份验证，请使用[HMAC](http://en.wikipedia.org/wiki/HMAC)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:51:57.487

我将不得不举起双手并说虚惊一场。

我不知道周五发生了什么，但现在我得到了我所期望的——大多数情况下 CryptographicException 按预期发生。我不知道我是否只是对我的测试数据非常不走运，或者我的测试工具中是否存在我无意中修复的错误，但现在一切都按预期运行。

顺便说一句，我做了一个快速的经验测试，验证了 rossum 的 1/256 数字，但这对我的目的来说是可以接受的。在一般情况下，我完全接受这里关于 HMAC 等的其他评论，但我正在做的是一个测试工具

# r - R将周数（英国）转换为POSIXct问题

> ID：14646406
> 
> 赞同：1
> 
> 时间：2013-02-01T12:33:00.940
> 
> 标签：r, posixct

我有包含英国周数的字符串（strptime 文档中的 %W），我可以将包含相同的字符串转换为 POSIXct

```
# create dummy data in June
x1 <- as.POSIXct('2012-06-01 01:00', format='%Y-%m-%d %H:%M', tz='UT')
(x2 <- format(x1, '%Y %W %a %H %M'))
[1] "2012 22 Fri 01 00"
as.POSIXct(x2, format='%Y %W %a %H %M', tz='UT')
[1] "2012-06-01 01:00:00" 
```

所以这很好用......但是，如果我想要 2012 年 1 月的第一天，它就行不通了——我只是得到一个 NA

```
x1 <- as.POSIXct('2012-01-01 01:00', format='%Y-%m-%d %H:%M', tz='UT')
(x2 <- format(x1, '%Y %W %a %H %M'))
[1] "2012 00 Sun 01 00"
as.POSIXct(x2, format='%Y %W %a %H %M', tz='UT')
[1] NA 
```

如何解决此问题，以便可以将年初的这些日期转换为 POSIXct ？

*更新*

以下 C 代码为我在 libc 2.15（ubuntu 12.04 LTS）上的机器演示了真正的问题是底层的 libc

```
#define _XOPEN_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
  int
main (void)
{
  struct tm tm;
  char buf[255];

  memset (&tm, 0, sizeof (struct tm));
  // ok what week number is the 1st of January 2012?
  // according to this it is week 01 in %U format 
  // and 00 in %W format...
  strptime ("2012-01-01 01:00", "%Y-%m-$d %H:%M", &tm);
  strftime (buf, sizeof (buf), "%Y-%m-%d %U %W %a %b %H:%M", &tm);
  puts("To demonstrate the different week numbers in %U %W");
  puts("Using format %Y-%m-%d %U %W %a %b %H:%M");
  puts (buf);
  // to demonstrate it works
  strptime ("2012 02 Sun 01 00", "%Y %W %a %H %M", &tm);
  strftime (buf, sizeof (buf), "%Y-%m-%d %a %b %H %M", &tm);
  puts("\nUsing format %Y-%m-%d %a %b %H%M for 2012 02 Sun 01 00");
  puts (buf);
  // but then the potential bug...
  strptime ("2012 01 Sun 01 00", "%Y %W %a %H %M", &tm);
  strftime (buf, sizeof (buf), "%Y-%m-%d %a %b %H %M", &tm);
  puts("\nUsing format %Y-%m-%d %a %b %H%M for 2012 01 Sun 01 00");
  puts("and this is wrong...");
  puts (buf);
  strptime ("2012 00 Sun 01 00", "%Y %W %a %H %M", &tm);
  strftime (buf, sizeof (buf), "%Y-%m-%d %a %b %H %M", &tm);
  puts("\nUsing format %Y-%m-%d %a %b %H %M for 2012 00 Sun 01 00");
  puts("and this is VERY wrong...");
  puts (buf);
  exit (EXIT_SUCCESS);
} 
```

它给出以下输出

```
To demonstrate the different week numbers in %U %W
Using format %Y-%m-%d %U %W %a %b %H:%M
2012-01-00 01 00 Sun Jan 00:00

Using format %Y-%m-%d %a %b %H%M for 2012 02 Sun 01 00
2012-01-08 Sun Jan 01 00

Using format %Y-%m-%d %a %b %H%M for 2012 01 Sun 01 00
and this is wrong...
2012-01-01 Sun Jan 01 00

Using format %Y-%m-%d %a %b %H %M for 2012 00 Sun 01 00
and this is VERY wrong...
2012-00--371 Sun Saturday 01 00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:52:44.403

看起来像 00 造成了问题。

```
x3 <- gsub(' 00 ' , ' 01 ',x2)             ## dirty workaround 00 -> 01
> as.POSIXct(x3, format='%Y %W %a %H %M')
[1] "2012-01-01 01:00:00 CET"
> x1
[1] "2012-01-01 01:00:00 CET" 
```

**编辑**

使用 %U 代替 %WI 得到这个：

```
x1 <- as.POSIXct('2012-01-01 01:00', format='%Y-%m-%d %H:%M')
> (x2 <- format(x1, '%Y %U %a %H %M'))
[1] "2012 01 dim. 01 00"
> as.POSIXct(x2, format='%Y %U %a %H %M')
[1] "2012-01-01 01:00:00 CET"

x1 <- as.POSIXct('2012-01-08 01:00', format='%Y-%m-%d %H:%M')
> (x2 <- format(x1, '%Y %U %a %H %M'))
[1] "2012 02 dim. 01 00"
> as.POSIXct(x2, format='%Y %U %a %H %M')
[1] "2012-01-08 01:00:00 CET" 
```

# ruby-on-rails - 与 facebook rails 连接后呈现 current_page

> ID：14646408
> 
> 赞同：1
> 
> 时间：2013-02-01T12:33:17.460
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3.2, omniauth

我有博客应用程序，如果已经登录到 facebook，用户可以在博客上发表评论，我正在使用omniaut-facebook gem。

我在任何地方都放了一个带有 facebook 的链接`localhost:3000/blogs/:permalink`

**当用户单击链接连接 w/facebook`localhost:3000/blogs/rails`并成功然后渲染时**如何渲染 current_page**`localhost:3000/blogs/rails`**

 **```
class User::SessionsController < ApplicationController
 def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    render "localhost:3000/blogs/:permalink"
    end

end 
```

我该怎么做？请帮我..

感谢**谁关闭**了我的问题..

好的**问题解决了**

```
origin = request.env['omniauth.origin']
redirect_to "#{origin}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:50:53.397

首先，您需要添加一些路由来处理 OmniAuth 使用的路径。

**/config/routes.rb**

```
 match 'auth/:provider/callback', to: 'users/sessions#create'
  match 'auth/failure', to: redirect('/')
  match 'signout', to: 'users/sessions#destroy', as: 'signout' 
```

当 Facebook 现在重定向回您的应用程序时，它将在 SessionsController 中查找创建操作。

**/app/controllers/user/sessions_controller.rb**

```
class User::SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
  end
end 
```**

# java - 禁用视图的 onClick 声音

> ID：14646413
> 
> 赞同：1
> 
> 时间：2013-02-01T12:33:34.640
> 
> 标签：java, android, xml, android-layout

我正在使用 LinearLayout（内部有一些视图）来表示“设置”屏幕中的声音开/关按钮。

当我将 OnClickListener 设置为此布局时，它会在单击时自动播放系统“onClick”声音。

我只想在声音从“NoSound”变为“Sound”时播放声音。在另一种情况下如何抑制声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:36:20.310

您是否尝试过使用`setSoundEffectsEnabled(false/true);`which 应该按照文档工作

> 布尔值，控制视图是否应为单击和触摸等事件启用声音效果。

# php - php-chmod(): 没有这样的文件或目录

> ID：14646417
> 
> 赞同：5
> 
> 时间：2013-02-01T12:33:45.840
> 
> 标签：php, file-upload, permissions

我试图将图像上传到 php 服务器，然后使用此文档从那里将图像发送到[parse.com：https://parse.com/docs/rest#files](https://parse.com/docs/rest#files)

但是在 parse 中，我只能看到 0 大小的图像。我认为问题出在文件权限上

所以我尝试更改文件权限。

```
 $target_path = "uploads/";
            $img =rand().basename( $_FILES['image']['name']);
            $target_path=dirname(__FILE__)."/".$target_path.$img;
            print($target_path);
            chmod($target_path,0777); 
```

但是在执行此操作时，我收到以下警告

`Warning: chmod(): No such file or directory in /var/www/test/new.php on line 15`

我可以在上传文件夹中看到该文件。该文件的所有者是 www-data。任何指针

PS：我也尝试使用相对路径而不是绝对路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:38:02.803

您通过执行' **FILE** '来定位脚本文件而不是PATH。

在尝试权限验证之前，使用“ **DIR** ”并验证文件夹是否存在 is_dir()。

```
$target_path = "uploads/";
$img =rand().basename( $_FILES['image']['name']);
$target_path=dirname(__DIR__)."/".$target_path.$img;
print($target_path);
chmod($target_path,0777); 
```

# javascript - raphael js - IE 中的斜体字体

> ID：14646418
> 
> 赞同：2
> 
> 时间：2013-02-01T12:33:49.207
> 
> 标签：javascript, raphael

我在 IE 中遇到文本问题 - 无论我尝试什么，它都显示为斜体 - 这是我的代码，任何人都可以帮忙

```
var clear_text = paper.text(50, 260, "Dept A");
clear_text.attr("fill", "#000");
clear_text.attr({ "font-size": 16, "font-family": "Times New Roman,Georgia,Serif", "font-weight": "bold", "font-style": "normal"}); 
```

发现这仅适用于 IE8 64bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:26:38.693

已确认 - IE8 64 位版本的已知 VML 错误会导致此问题。

# node.js - 启动使用 Node.js 编写的服务器

> ID：14646420
> 
> 赞同：0
> 
> 时间：2013-02-01T12:33:51.540
> 
> 标签：node.js

我写了这个示例服务器，

```
runServer = function(){
    var http = require("http");
    http.createServer(function (request, response) {
    request.on("end", 
    function () 
    {
        response.writeHead(200, {'Content-Type': 'text/plain'});
        response.end('Hello HTTP!');
    });
}).listen(8075); 
```

}

现在我想从一个 html 页面运行这个服务器 onClick，有可能吗？如果是那怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:26:41.287

当然，你可以这样做，但这并没有多大意义。如果您从服务器获得 HTML 页面，那么为什么要启动另一台服务器在另一个端口上提供 http 请求？为什么不只运行你的服务器并监听两个端口呢？您可能只想做的是通过运行从命令行启动服务器

```
node myserver.js 
```

在您的终端中。

但是，如果由于某种原因您真的想从像这样的 php 脚本启动另一个 http 服务器，您可以执行以下操作：

*   单击按钮，向一些 php/python/something 脚本发出 AJAX 请求
*   在 php/python/whatever 脚本中执行“node myServer.js”
*   向 localhost:8075 发出请求

但是，我认为您确实应该在继续之前阅读一下 node.js 的目的以及它如何充当 Web 服务器，因为您的问题似乎反映了对该领域缺乏了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:40:15.807

您必须使用不同的 Web 服务器（例如 LAMP 堆栈）在同一台机器上提供 HTML 页面，并使用服务器端脚本来运行 OS 命令“node servername.js”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:43:38.273

通常您需要将此代码保存到文件中并从命令行运行：

```
 node mycode.js 
```

但是，如果您想在本地机器上从 JavaScript 启动它，这里还[讨论了](https://stackoverflow.com/questions/2687530/what-are-some-methods-to-link-to-and-run-a-local-exe-file-in-a-local-browser)两种解决方案：跨平台签名的 Java Applet 和 Windows 特定的 WScript.Shell。Java 小程序可以检查操作系统并在 Windows、Mac 和 Linux 可执行文件之间进行选择。

您还可以生成一个自定义 .exe 文件，该文件将启动 node.exe 并将所需的参数传递给它。

然而，从网络上下载的代码存在许多安全问题，无论解决方案如何，浏览器都可能会显示各种可怕的警告。考虑绕过浏览器启动节点可执行文件可能不是那么糟糕。

# c++ - 如何找到满足特定属性的各种长度的连续序列数？

> ID：14646423
> 
> 赞同：2
> 
> 时间：2013-02-01T12:34:15.320
> 
> 标签：c++, arrays, algorithm

我得到一个数组 A[] 有 N 个正整数元素。我必须找到满足特定属性的长度为 1,2,3,..,N 的序列数？我已经建立了一个复杂度为 O(nlogn) 的区间树。现在我想计算满足某个属性的序列数？

问题所需的所有属性都与序列的总和有关

注意一个数组将有 N*(N+1)/2 个序列。如何在 O(nlogn) 或 O(n) 中迭代所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:48:35.753

@user1907531：首先，如果您正在参加如此重要的国家级在线比赛，您应该避免使用这种廉价的技巧和方法来领先于其他应得的人。其次，像你这样的作弊者总是作弊者，但这一切都阻碍了那些提出问题的人和与你不同的竞争对手的辛勤工作。第三，如果@trumetlicks 问你为什么不把这些问题标记为作业，你会在那里撒另一个谎。最后，我不知道怎么会有这么多人回答这个作弊者在不知道出处/网站/的情况下提出的这个问题这个问题的来源。这肯定不能由任何印度学校的老师给家庭作业。告诉大家，这个作弊者在比赛结束前 6 小时向你询问了印度大学跑步比赛的完整解决方案，他肯定得到了很多直接的帮助，最重要的是，他邀请了 100 名其他人从这里给出的答案中作弊。所以，祝所有这些作弊者好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:40:01.143

如果我们让 k 是从 0 到 N（元素）的移动索引，我们将运行一个算法，该算法本质上是寻找满足条件的 MIN R（假设是 I），那么 L = k 的每个其他子集也都满足对于 R >= I （这是你的短路）。找到 I 后，只需返回 (L=k, R>=I) 的输出。这当然假设您的集合中的所有数字都> = 0。

要找到 I，对于每个 k，从元素 k + (Nk)/2 开始。弄清楚 (L=k, R=k+(Nk)/2) 中定义的子集是否满足您的条件。如果是这样，则递减 R 直到不满足您的条件，然后 R=1 是您的 MIN（您可以选择随时打印这些结果，但在这些情况下它们的结果将基本上向后打印）。如果 (L=k, R=k+(Nk)/2) 不满足您的条件，则递增 R 直到满足，这将成为您的 L=k 的最小值。这会将每个 L=k 的搜索空间降低 2 倍。随着 k 增加并接近 N，您的搜索空间会不断减小。

```
// This declaration wont work unless N is either a constant or MACRO defined above
unsigned int myVals[N];
unsigned int Ndiv2 = N / 2;
unsigned int R;

for(unsigned int k; k < N; k++){

    if(TRUE == TESTVALS(myVals, k, Ndiv2)){ // It Passes
        for(I = NDiv2; I>=k; I--){
            if(FALSE == TESTVALS(myVals, k, I)){
                I++;
                break;
            } 
        }
    }else{                                  // It Didnt Pass
        for(I = NDiv2; I>=k; I++){
            if(TRUE == TESTVALS(myVals, k, I)){
                break;
            } 
        }
    }

    // PRINT ALL PAIRS from L=k, from R=I to R=N-1

    if((k & 0x00000001) == 0) Ndiv2++;

} // END --> for(unsigned int k; k < N; k++) 
```

上述算法的复杂度为 O(N^2)。这是因为对于 N 中的每个 k（即 N 次迭代/测试），每个需要测试的值都不大于 N/2。大 O 表示法不关心 N/2，也不关心真正的 N 随着 k 的增长而变小，它只关心总大小。因此它会说每 N 个值进行 N 次测试，因此 O(N^2)

有一种替代方法会更快。这种方法是每当您希望在辅助（内部）for 循环中移动时，您可以执行具有距离算法的移动。这将使您进入您的 O(nlogn) 步骤集。对于 N 中的每个 k（都必须进行测试），您运行这种半距离方法以在 logN 时间内找到您的 MIN R 值。例如，假设您有一个 1000 个元素的数组。当 k = 0 时，我们基本上开始在索引 500 处搜索 MIN R。如果测试通过，我们将测试 250，而不是从 500 线性向下移动到 0。假设 k = 0 的实际 MIN R 为 300。然后查找 MIN R 的测试如下所示：

R=500 R=250 R=375 R=312 R=280 R=296 R=304 R=300

虽然这过于简单，但您很可能需要优化，并测试 301 和 299 以确保您处于最佳状态。当您必须连续多次沿同一方向移动时，另一个不应该是在除以 2 时要小心。

# vba - application.worksheetfunction.sum 不评估字符串

> ID：14646424
> 
> 赞同：2
> 
> 时间：2013-02-01T12:34:18.187
> 
> 标签：vba, excel, worksheet-function

我在我的程序中有以下代码，可以在更大的循环中进行评估

```
CalculationHoldArray(Loopcount) = "'[" & Usefile1.Name & "]" & _ 
                 Worksheet1 & "'!" & Cells1      & ",'[" & Usefile2.Name & "]" & _ 
                 Worksheet2 & "'!" & Cells2

Sheets("ECAP PARAMETER INPUTS").Cells(31, "F").Value = 
Application.WorksheetFunction.Sum(CalculationHoldArray(Loopcount)) 
```

为数组返回的字符串是：

```
'[Control Model v1.35- nonfunctional.xlsm]Input'!E2, _
      '[Control Model v1.35- nonfunctional.xlsm]Input'!E3 
```

但 application.worksheetfunction.sum 返回错误 1004。“无法获取工作表类的 sum 属性”。任何人都知道问题是什么，它不会让我在这里使用 sum 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:53:21.843

而不是使用`Application.Worksheet.Function`命令，只需使用`Evaluate`命令，这需要添加“sum”和括号以使其成为有效的公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:21:37.077

但我找到了一个解决方案——我可以简单地使用“EVALUATE”命令，而不是使用 application.worksheet.function 命令，只需添加“sum”和括号即可使其成为完整的公式 -</p>

# svn - 哈德逊 + 自定义电子邮件

> ID：14646426
> 
> 赞同：1
> 
> 时间：2013-02-01T12:34:23.147
> 
> 标签：svn, jenkins, tortoisesvn, hudson, hudson-plugins

我正在使用带有 Hudson 的可编辑电子邮件通知插件。使用的版本控制工具是SVN（Subversion）。在电子邮件扩展插件中，有一个选项可以将邮件发送给“提交者”。如果启用此选项，它将从 SVN 获取用户详细信息并将邮件发送给这些人。

在我们的例子中，SVN 配置了活动目录（NT 登录），因此 hudson 试图将邮件发送到 NTLogin@domain.com，这是不正确的。我有一个文本文件，其中包含所有人的 NT 登录名及其电子邮件 ID。

有什么方法可以配置 Hudson 来读取这个文本文件并将电子邮件发送到实际的电子邮件 ID 而不是 NTLogin@domain.com。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:00:16.237

要更改默认电子邮件后缀（`@domain.com`部分）：

*   去**管理哈德逊**
*   单击**配置系统**
*   向下滚动到**电子邮件通知**
*   例如，更改`Default user e-mail suffix`为您需要的任何内容`@yourcompany.com`
*   点击**保存**

这样，它将`NTLogin`为每个用户附加此后缀。

如果您的电子邮件实际上不符合`NTLogin@yourcompany.com`标准，您可以尝试让 Jenkins 从 AD 信息中提取它。清除此`Default user e-mail suffix`字段并将其留空。

如果这不起作用（这取决于您的 AD 配置），您可能需要分别覆盖每个用户的电子邮件地址：

*   点击**人物**链接
*   选择您想要的用户，然后单击**配置**
*   手动输入所需用户的电子邮件地址。
*   点击**保存**

请注意，对于出现在人员列表中的用户，Hudson 应该知道该用户（即，在 Hudson 中手动创建，或者在 Hudson 已签出的过去犯过某些事情）

# python - Python，子线程上的函数超时而不使用信号和thread.join

> ID：14646431
> 
> 赞同：1
> 
> 时间：2013-02-01T12:34:53.117
> 
> 标签：python, python-multithreading

我想在一个在子线程中调用的函数上添加超时。我不能使用信号，因为信号应该在主线程上。我不能使用`thread.join(time_out)`，因为该函数有时可以在几秒钟内执行，在这种情况下，线程将始终等待`time_out`.

还有其他方法吗？

资料来源：

*   `thread.join`:[在 python 中使用线程的超时功能不起作用](https://stackoverflow.com/questions/13821156/timeout-function-using-threading-in-python-does-not-work)
*   `signal`:[超时功能，如果完成时间过长](https://stackoverflow.com/questions/2281850/timeout-function-if-it-takes-too-long-to-finish)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-05T16:09:44.483

您可以使用鲜为人知的`ctyps`技巧来提高`TimeoutError`针对特定线程的目标。我`non_blocking`用这个方法做了一个超时脚本，刚刚在GitHub上发布：[https ://github.com/levimluke/PyTimeoutAfter](https://github.com/levimluke/PyTimeoutAfter)

实现起来超级简单，但技术上很复杂。

```
 def raise_caller(self):
        ret = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(self._caller_thread._ident), ctypes.py_object(self._exception))
        if ret == 0:
            raise ValueError("Invalid thread ID")
        elif ret > 1:
            ctypes.pythonapi.PyThreadState_SetAsyncExc(self._caller_thread._ident, NULL)
            raise SystemError("PyThreadState_SetAsyncExc failed") 
```

[https://github.com/levimluke/PyTimeoutAfter/blob/main/timeout_after.py#L47](https://github.com/levimluke/PyTimeoutAfter/blob/main/timeout_after.py#L47)

我使用一个类对象并将调用线程保存到，这样我就可以从定时子线程中引发父类中的异常。

# c# - 测试站点连接限制

> ID：14646434
> 
> 赞同：0
> 
> 时间：2013-02-01T12:35:02.230
> 
> 标签：c#, load-testing, performance-testing

我刚刚接手了一个由其他人创建的项目，预计早上 8 点到 9 点之间会有大量的人登录。我需要的是一个工具，当我提供用户名和密码时，它可以在一个页面上模拟 100 次登录。有这样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:26:24.760

看看[Web Performance Load Tester](http://www.webperformance.com/load-testing/free-load-tester-lite.html)。LITE 版本是免费的。免责声明：我在那里工作。

# python - Python条带法

> ID：14646436
> 
> 赞同：10
> 
> 时间：2013-02-01T12:35:04.497
> 
> 标签：python

今天在python终端，我试过了

```
a = "serviceCheck_postmaster"
a.strip("serviceCheck_") 
```

但我没有得到`"postmaster"`，而是得到了`"postmast"`。

什么可能导致这种情况？我怎样才能得到`"postmaster"`输出？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T12:36:50.210

你误解了`.strip()` *什么*。它会删除您传递的字符串中的*任何字符。*从[`str.strip()`文档](http://docs.python.org/2/library/stdtypes.html#str.strip)中：

> *chars*参数是一个字符串，指定要删除的字符集**。**

强调我的；那里的词`set`很关键。

因为`chars`被视为一个集合，所以将从输入字符串的开头和结尾`.strip()`删除所有`s`, `e`, `r`, `v`, `i`, `c`, `C`, `h`,`k`和字符。`_`因此，输入字符串*末尾*`e`的and`r`字符也被删除了；这些字符是集合的一部分。

 *要从开头或结尾删除字符串，请改用切片：

```
if a.startswith('serviceCheck_'):
    a = a[len('serviceCheck_'):] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T12:41:01.140

Martijn 回答的替代方案将使用`str.replace()`

```
>>> a = "serviceCheck_postmaster"
>>> a.replace('serviceCheck_','')
'postmaster' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T13:39:18.463

如果你仔细看一下strip函数的帮助它是这样说的：

```
Help on built-in function strip:

strip(...)
    S.strip([chars]) -> string or unicode

    Return a copy of the string S with leading and trailing
    whitespace removed.
    If chars is given and not None, remove characters in chars instead.
    If chars is unicode, S will be converted to unicode before stripping 
```

它将删除所有前导和尾随字符和空格。在您的情况下，字符集是

```
s, e, r, v, i, c, C, h, k and _ 
```

你可以通过这样的方式获得邮局局长

```
a = "serviceCheck_postmaster"
print a.split("_")[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T12:49:39.350

您还可以使用以下内容隔离“postmaster”：

```
a = "serviceCheck_postmaster"
b = a.split("_")[1]             # split on underscore and take second item 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-02T22:55:36.073

Strip 将带走您输入到其函数中的所有字母。因此，字母“e”和“r”被剥夺邮政局长的原因。试试：a = “serviceCheck_postmaster” print(a[13:])*

# java - SingleConnectionDataSource 连接在大约 40 分钟不活动后关闭

> ID：14646437
> 
> 赞同：2
> 
> 时间：2013-02-01T12:35:05.713
> 
> 标签：java, database, oracle, spring, database-connection

我们有问题`org.springframework.jdbc.datasource.SingleConnectionDataSource`？

我们希望在应用程序运行时连接永远不会关闭，即使应用程序和数据库之间没有流量。

我们为数据源配置 `<property name="suppressClose" value="true"/>`了应该解决问题的方法。

问题是连接在大约 30-40 分钟不活动后关闭（当数据库和应用程序之间没有流量时）。

也许有 SingleConnectionDataSource 经验的人可以帮助解决这个错误或功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T15:37:01.597

如果在 SimpleConnectionDataSource 下使用了 MySql 连接，那么它通常会在 30-40 分钟不活动后被丢弃。即使您使用直接 JDBC 并通过以下方式创建连接：

```
Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager
                 .getConnection("jdbc:mysql://localhost/mydatabase?user=username&password=pass"); 
```

它也将在 30-40 分钟后被丢弃。

# css - Sharepoint Designer 2010、CSS 和母版页

> ID：14646443
> 
> 赞同：0
> 
> 时间：2013-02-01T12:35:23.393
> 
> 标签：css, sharepoint-2010, sharepoint-designer

我的部分工作是能够更改 Sharepoint 2010 企业网站的 CSS。我可以使用 Sharepoint Designer。我用它制作了 v4.master 的副本，将其设置为母版页，添加了几行：

```
<SharePoint:CssRegistration runat="server" name="/Style Library/... myfile.css" After="corev4.css"/>
<SharePoint:CssRegistration runat="server" name="/Style Library/... myfile.css" After="corev4.css"/> 
```

两个问题：

1) 如果只添加这些代码行，通过 Sharepopint Designer 制作新的母版页是否有任何危险？

我看到有些人写到 Sharepoint Designer 有点冒险。我自己不是编码员。我对 SP Designer 的唯一用途是在母版页中添加这些行并在样式库中编辑 CSS。

2）我们有*很多*子网站。当我只想更改其中一两个的设计时，我是否应该继续使用相同的路径并在样式库中添加一个 uniqe css 文件并将该文件链接到子站点上的母版页副本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:39:51.563

就我而言，如果您创建自己的母版页或 css 文件，则没有风险。但是更改站点的默认母版页或 css 文件是有风险的。所以不要更改默认母版页或 css 文件。创建您自己的母版页或 css 文件。如果您对创建的母版页或 css 文件感到有问题，它们会恢复为默认的母版页或 css 文件。它不会影响您的网站。

谢谢。

# hadoop - 在 HBase 上运行 Hadoop MapReduce 作业时出现 NoServerForRegionException

> ID：14646446
> 
> 赞同：1
> 
> 时间：2013-02-01T12:35:32.343
> 
> 标签：hadoop, mapreduce, hbase

我正在执行一个简单的 Hadoop MapReduce 程序，其中 HBase 作为输入和输出。我收到错误消息：

```
java.lang.RuntimeException: org.apache.hadoop.hbase.client.NoServerForRegionException: Unable to find region for OutPut,,99999999999999 after 10 tries. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T01:08:09.247

当 hbase 版本存在差异时，我们会出现此异常。

我们的代码是使用 0.94.X 版本的 hbase jar 构建并运行的。而 hbase 服务器在 0.90.3 上运行。

当我们使用正确版本（0.90.3）的 hbase jar 更改我们的 pom 文件时，它开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:22:46.790

查询`bin/hbase hbck`查找Region server在哪台机器上运行。确保您的所有区域服务器都已启动并正在运行。用于`start regionserver`启动 Region 服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:49:25.570

即使机器上的 Regionserver 启动了，它也可能因为时间同步而失败。

确保在所有 Regionserver 节点和 HbaseMaster 节点上都安装了 NTP。

由于 Hbase 在使用时间戳作为索引的键值对上工作，因此它允许时间偏差小于 3 秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T14:18:37.180

删除（或移至 /tmp）WAL 日志在我们的案例中有所帮助：

```
hdfs dfs -mv /apps/hbase/data/MasterProcWALs/state-*.log /tmp 
```

# android - 如何从服务中显示多个吐司

> ID：14646448
> 
> 赞同：0
> 
> 时间：2013-02-01T12:35:53.780
> 
> 标签：android, multithreading, service, toast

我想在来电状态下显示多个 toast 但是当我摘机状态时它显示 toast 但在空闲状态下不显示 toast 我有使用线程和异步任务但问题是相同的它没有显示错误所以我什么都没有我的日志猫。目前我正在使用下面的方法来显示吐司。

```
handler.post(new Runnable() {  
               public void run() {  
                  Toast.makeText(getApplicationContext(), "import started", Toast.LENGTH_SHORT).show();  
                  Log.d("TAG", "Recording Toast stop");
               }  
            }); 
```

**注意：**当通话结束并且代码正在服务上运行时，我必须在主屏幕上显示 toast。

# python - Python中的递归和列表

> ID：14646449
> 
> 赞同：2
> 
> 时间：2013-02-01T12:35:55.637
> 
> 标签：python, recursion

这是我正在尝试做的简化版本：

```
class a():
    Requirement = 0
    def func(self, oldlist, x):
        newlist = [None]*3
        newlist = oldlist
        newlist[x]  = b()
        print "Class a"
        g(newlist)

class b():
    Requirement = 1

def g(list):
    for i in range(3):
        if list[i].Requirement==0:
            list[i].func(list,i)

Initiallist=[None]*3
Initiallist[0]=a()
Initiallist[1]=b()
Initiallist[2]=a()
g(Initiallist) 
```

我没有试图用文字表达我的期望，而是制作了一些图表来表达我的想法应该发生的事情：

![在此处输入图像描述](../Images/0c047333e55c3b681c0ed702ae77c1e6.png)

这意味着 a 类中的函数应该被调用 4 次。但是，它只被调用了 2 次，所以似乎正在发生这种情况：

![在此处输入图像描述](../Images/308c521360f7f31b3e0560ec02772ced.png)

我不明白为什么会发生这种情况或我应该如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:44:58.363

不确定，但我认为你的问题是这一行：

```
newlist = oldlist 
```

我猜你想复制列表（而不是改变`oldlist`），所以你应该简单地使用：

```
newlist = oldlist[:] 
```

* * *

所以`func`改为

```
def func(self, oldlist, x):
    newlist = oldlist[:]
    newlist[x] = b()
    print "".join(x.__class__.__name__ for x in newlist)
    g(newlist) 
```

印刷

> bba
> bbb
> bbb
> bbb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:45:25.523

在`func`你需要创建一个副本`oldlist`，否则它会修改相同的列表。

# java - GUI 线程作业未从可调用对象中调用

> ID：14646450
> 
> 赞同：1
> 
> 时间：2013-02-01T12:35:59.133
> 
> 标签：java, user-interface, swt, callable

我正在尝试从可调用更新 UI，但失败了。为什么`System.out.println("UI thread.");`从未调用？我正在使用 SWT。

```
Callable<Boolean> callable = new Callable<Boolean>() {
    @Override
    public Boolean call() throws Exception {
        System.out.println("Executing Callable.");

        Display.getDefault().asyncExec(new Runnable() {
            @Override
            public void run() {
                System.out.println("UI thread.");
            }
        });

        System.out.println("End.");
        return true;
    }
};

ExecutorService executor = Executors.newFixedThreadPool(10);
executor.submit(callable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:29:07.987

问题发生了，因为我在 JunitTest 中执行了上面的代码。在可以执行异步 Runnable 之前，测试返回。等待测试结束 - 帮助！

```
@Test
public void jobs() {

    Callable<Boolean> callable = new Callable<Boolean>() {
    @Override
    public Boolean call() throws Exception {
        System.out.println("Executing Callable.");

        Display.getDefault().asyncExec(new Runnable() {
            @Override
            public void run() {
                System.out.println("UI thread.");
            }
        });

        System.out.println("End.");
        return true;
    }
};

ExecutorService executor = Executors.newFixedThreadPool(10);
executor.submit(callable);

long stopTimestampt = System.currentTimeMillis() + 1000;
 while (System.currentTimeMillis() < stopTimestampt) {
        Display.getDefault().readAndDispatch();
 }
} 
```

# php - 在为 Apache 索引使用自定义标头时设置 PHP cookie

> ID：14646454
> 
> 赞同：2
> 
> 时间：2013-02-01T12:36:06.873
> 
> 标签：php, apache, .htaccess, cookies

我到处搜索，但找不到任何有关此的信息。

情况如下：

我正在使用 PHP 文件作为我的网站空间的“HeaderName”：

.htaccess 具有以下内容：

```
Options +Indexes
HeaderName /.resource/header.php 
```

在 header.php 中，我包括（首先，在回显任何数据之前）一个小包含，用于检查参数的存在并设置一个 cookie：

```
if (isset($_GET['css_style']) && $_GET['css_style'] != "") {
  $css_style = $_GET['css_style'];
  if (setcookie('css_style', $css_style, 0, "/", "xxx.xxxx.xxx") !== false) {
    echo "<!-- cookie set! ".$css_style." -->";
  } else {
    echo "<!-- cookie NOT set! ".$css_style." -->";
  }
} 
```

现在，我在同一站点上的其他 PHP 页面中使用这个片段，在任何目录中，cookie 总是在我期望的时候设置。它列在浏览器的 cookie 列表中并包含所需的值。

**但是**，当在 header.php 中作为自动索引的一部分执行相同的脚本时，我会得到“cookie set”输出，所以我知道正确的条件都适用，但是浏览器的 cookie 列表中不存在 cookie。*如果我直接*调用 header.php ，那么 cookie 会被设置并出现在浏览器的列表中。

**所以我的问题是：** Apache 是否做了一些可能阻止 cookie 被丢弃的事情？该站点在托管环境中的 Apache 上运行，但我无权访问中央服务器配置。

我尝试了各种不同的方法来设置 cookie，使用默认值，过期时间为 0 或 time() + 3600*24，有和没有路径和域，没有运气。我难住了。特别是因为它适用于与我正在查看的索引位于同一目录中的常规文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:26:53.620

您想通过查询参数来决定是否要发送 cookie mod_index 创建 text/* 但没有标题

您可以使用 mod_headers 发送 cookie：

[http://httpd.apache.org/docs/current/mod/mod_headers.html](http://httpd.apache.org/docs/current/mod/mod_headers.html)

和 mod_setenfif 用于条件发送：

[http://httpd.apache.org/docs/current/mod/mod_setenvif.html](http://httpd.apache.org/docs/current/mod/mod_setenvif.html)

# objective-c - Cocoa：绑定到复合对象并观察子属性

> ID：14646459
> 
> 赞同：1
> 
> 时间：2013-02-01T12:36:25.067
> 
> 标签：objective-c, cocoa, cocoa-bindings, key-value-observing

是否可以绑定到自定义对象并在该对象的特定属性更改时得到通知？

例子：

每个销售代表对象都有一个对销售统计对象的引用，该对象包含汽车和卡车销售的统计数据。自定义`NSView`用于在一个图形中绘制汽车和卡车销售。

自定义视图需要访问完整的统计对象，所以我将它绑定到`salesRep.salesStats`.

但是，当我更改`carSales`属性时，我需要一种更新视图的方法。目前它没有更新，因为它绑定到父对象。

我想避免为每种销售类型建立绑定（这只是一个例子，我的具体情况更复杂）。

```
@interface SBSalesRep : NSObject {

@property (strong) SBSalesStatistics *salesStats;
}

@interface SBSalesStatistics : NSObject
{
@property (assign) NSInteger carSales;
@property (assing) NSInteger truckSales;
}

@interface SBProgressView : NSView
{
@property (strong) SBSalesStatistics *statsToDisplay;
}

// Setup
SBSalesRep *salesRep = [SBSalesRep new];

// Bind to stats object, because we need car and tuck sales:
[progressView bind:@"statsToDisplay" 
          toObject:salesRep 
       withKeyPath:@"salesStats"  // How to get notified of property changes here?
           options:nil];

// This needs to trigger an update in the statistics view
salesRep.salesStats.carSales = 50;

// I tried this, but it does not work:
[salesRep willChangeValueForKey:@"salesStatistics"];
salesRep.salesStats.carSales = 50;
[salesRep didChangeValueForKey:@"salesStatistics"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:35:17.483

你说：

```
// I tried this, but it does not work:
[salesRep willChangeValueForKey:@"salesStatistics"];
salesRep.salesStats.carSales = 50;
[salesRep didChangeValueForKey:@"salesStatistics"]; 
```

我的猜测是这不起作用，因为您要通知的`salesStatistics`密钥是，但您要绑定的密钥是`salesStats`。如果这些键相同，我希望这种方法能够奏效。

除此之外，更好的方法可能是添加这样的依赖项：

```
@implementation SBSalesRep

+ (NSSet *) keyPathsForValuesAffectingSalesStats
{
    return [NSSet setWithObjects: @"salesStats.carSales", @"salesStats.truckSales", nil];
}

@end 
```

这将导致对密钥的任何观察（绑定或其他）`salesStats`也隐式观察`salesStats.carSales`and `salesStats.truckSales`，并且应该达到预期的效果而无需手动通知 with `-will/didChangeValueForKey:`。

# symfony - 在 Symfony2 中找不到可翻译的列

> ID：14646462
> 
> 赞同：1
> 
> 时间：2013-02-01T12:36:31.300
> 
> 标签：symfony, doctrine, translation

您好想使用 Doctrine Extensions ins Symfony2 中的可翻译行为。

我使用 Doctrine，在尝试了自己的课程后，我 100% 复制了 Article 课程

[http://gediminasm.org/article/translatable-behavior-extension-for-doctrine-2](http://gediminasm.org/article/translatable-behavior-extension-for-doctrine-2)

在我的项目中，只调整了命名空间。但我得到一个例外：

```
[2/2] DBALException: An exception occurred while executing 'SELECT t0.id AS id1, t0.title AS title2, t0.content AS content3 FROM articles t0 WHERE t0.id = ?' with params {"1":1}:

SQLSTATE[42S22]: Column not found: 1054 Unknown column 't0.content' in 'field list' 
```

发送的 MySql 查询是

```
 SELECT t0.id AS id1, t0.title AS title2, t0.content AS content3 FROM articles t0 WHERE t0.id = 1 
```

为什么 Doctrine/Symfony 尝试访问文章而不是 ext_translations。如果我使用 TranslationEntity，一切正常，所以我确信可翻译已在我的配置中激活。但这是我的配置，让一切都清楚

配置.yml

```
doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
                mapping_types:

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        default_entity_manager: default
        entity_managers:
            default:
                auto_mapping: true
                mappings:
                    gedmo_translatable:
                        type: annotation
                        prefix: Gedmo\Translatable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
                        alias: GedmoTranslatable # this one is optional and will default to the name set for the mapping
                        is_bundle: false
                    gedmo_translator:
                        type: annotation
                        prefix: Gedmo\Translator\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translator/Entity"
                        alias: GedmoTranslator # this one is optional and will default to the name set for the mapping
                        is_bundle: false
                    gedmo_loggable:
                        type: annotation
                        prefix: Gedmo\Loggable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
                        alias: GedmoLoggable # this one is optional and will default to the name set for the mapping
                        is_bundle: false
                    gedmo_tree:
                        type: annotation
                        prefix: Gedmo\Tree\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"
                        alias: GedmoTree # this one is optional and will default to the name set for the mapping
                        is_bundle: false

stof_doctrine_extensions:
        default_locale: en_us
        translation_fallback: true
        orm:
            default:
              timestampable: true
              translatable: true
              sluggable: true 
```

有谁知道为什么这不起作用？非常感谢你的帮助

# c# - 实体框架：调用保存更改时出错

> ID：14646469
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:01.720
> 
> 标签：c#, mysql, web-config, connection-string

我正在使用实体框架来连接 MySql。我已经使用 MySql 数据库创建了一个实体数据模式，它会自动在 web.config 中生成连接字符串，在我的例子中如下所示：-

```
 <add name="entityframework1" connectionString="metadata=res://*/EntityFramework.csdl|res://*/EntityFramework.ssdl|res://*/EntityFramework.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;User Id=root;database=entityframework&quot;" providerName="System.Data.EntityClient" /> 
```

现在我想将记录保存在数据库中，代码如下：-

```
 employee emp = new employee();
        emp.Name = txtName.Text;
        emp.Age = Convert.ToInt32(txtAge.Text);

        using (entityframework context =
              new entityframework())
        {

            context.AddToemployees(emp);
            if (context.SaveChanges() == 1)
            {
                lblMsg.Text = "Saved Successfully.";
            }
        } 
```

它给出了错误

> 在具有“context.SaveChanges”的 if 条件下，“对象引用未设置为对象的实例”。

我还尝试在创建上下文时传递连接字符串

```
string connectionstring = "SERVER=localhost;DATABASE= entityframework ;UID= root;"; 
```

但它给出了“不支持关键字：'”服务器'的错误。”这是我在实体框架中的第一次尝试，有没有人可以建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:52:11.210

您还需要将以下内容添加到您的 web.config 文件中（将版本字符串替换为您的 MySQL .NET 连接器的适当版本）

```
<system.data><DbProviderFactories>
  <clear />
  <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
</DbProviderFactories></system.data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:42:54.880

如果您可以从服务器检索数据，则连接字符串很好。

至于 SaveChanges() 尝试`context.ChangeTracker.DetectChanges()`首先调用，作为成功条件，您可以将实体的初始 id 设置为 -1 例如，然后检查它是否 >= 0。（也就是说，如果您的 PrimaryKey 也是 Autoincrement/Identity )

# php - 将 MySQL 结果存储在关联数组中

> ID：14646470
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:16.060
> 
> 标签：php, mysql, arrays

您好我正在尝试将 MySQL 结果存储到全局数组中

```
class db
{
 function CustomLoad($table_name,$Fields)
  {
     global $_MYSQL_DATA;

     $_MYSQL_DATA=array();

     $qry = mysql_query("SELECT * FROM $table_name") or die(mysql_error());
     while($row = mysql_fetch_assoc($qry))
     {
       foreach($Fields as $r=>$key)
       {

        $_MYSQL_DATA[$r] = $row[$r];
       }

     }

   }
} 
```

我这样打电话

```
$dbObj = new db();
$fields = array("FIELD_1"=>"FIELD 1","FIELD_2"=>"FIELD 2","FIELD_3"=>"FIELD  3","FIELD_4"=>"FIELD 4");
$dbObj->CustomLoad("registrations",$fields);

print_r($_MYSQL_DATA); 
```

问题是我只得到最后一个结果。像`Array ( [FIELD_1] => A [FIELD_2] => B [FIELD_3] => C [FIELD_4]=> D )`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:42:26.843

只需使用以下内容：

```
 $_MYSQL_DATA = array(); // you should declare your variables, even if it's not mandatory
 while($row = mysql_fetch_assoc($qry)) // USE PDO or MySQLi !!!!!
 {
    $_MYSQL_DATA[] = $row;
 } 
```

**笔记**

该`[]`运算符生成数组中未使用的最小的正数字键。

**例子：**

```
$array = array(0 => 'b', 1 => 'a');
$array[] = 'c'; // will place it in $array[2]

$array = array();
$array[] = 'a'; // will place in $array[0] 
```

**现在**......关于 PDO / MySQLi 的咆哮（因为我不得不说：P）。

MySQL 自 PHP 5.5 起正式弃用，并且不再维护。您应该考虑将代码移植到 MySQLi 或 PDO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:40:28.267

在 foreach 中应该有 $row 而不是 $Field。还经营一个柜台

```
$i=0;       
while($row = mysql_fetch_assoc($qry))
{
    foreach($row as $r=>$key)
    {
        $_MYSQL_DATA[$i][$r] = $key;
    }
    $i++;
} 
```

# spring-roo - 禁用 roo 打开/关闭日志记录

> ID：14646472
> 
> 赞同：1
> 
> 时间：2013-02-01T12:37:17.577
> 
> 标签：spring-roo, spring-tool-suite

我们正在开发一个使用 Spring Roo 的项目，当团队使用相同的代码（在括号中）时，有一个非常烦人的细节会发挥作用。

我们在 STS 中工作（它会自动打开 Roo shell），问题是每次打开/关闭 Roo shell 时，都会将时间记录到“log.roo”中，所以如果有多个开发人员。在分支中的相同代码库上工作，我们最终会不时合并这些日志。

我们可以在 SCM 中添加“log.roo”来忽略，但是记录使用 Roo 实际完成的操作是相当方便的事情。

有没有办法调整 Roo（或 STS），使其不会记录我们最终合并的这些垃圾（打开/关闭时间记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:15:52.007

为什么不保留 log.roo 文件的副本？这是我使用的方法，一个名为 script.roo 的文件，允许我在必要时对其进行编辑（用于删除或添加评论），它还允许我忽略 SCM 中的 log.roo

# vba - 从excel中的多行生成多页文档

> ID：14646474
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:19.707
> 
> 标签：vba, excel

在我的excel中，我有多行是这样的：

```
Name  Age Tel 
John  5    12345677
Peter 10   4547567
Mary  6     46u7687867 
```

我想知道如何从excel生成多个文档到多个发票，如下所示：

第 1 页：

```
Certification of XXXXX

John      Age 5 
```

第2页：

```
Certification of XXXXX

Peter     Age 10 
```

第 3 页：

```
Certification of XXXXX

Mary      Age 6 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:11:41.310

假设上述输入和注释，以下代码将完成这项工作：

```
Sub ListPrinting()

Dim i As Long

i = 1

For i = 2 To ThisWorkbook.Sheets(1).Range("A1").CurrentRegion.Rows.Count

    ThisWorkbook.Sheets("Invoice").Range("F40").Formula = ThisWorkbook.Sheets(1).Cells(i, 1).Formula
    ThisWorkbook.Sheets("Invoice").Range("I38").Formula = ThisWorkbook.Sheets(1).Cells(i, 2).Formula
    ThisWorkbook.Sheets("Invoice").Range("I9").Formula = ThisWorkbook.Sheets(1).Cells(i, 3).Formula
    ThisWorkbook.Sheets("Invoice").PrintOut Copies:=1, ActivePrinter:="pdfFactory Pro on FPP4:" 'Specify your printer

Next i

MsgBox i - 2 & " invoice(s) printed."

End Sub 
```

请注意：

1.  您应该指定所需打印机的名称 - 使用宏记录器，然后在“打印”对话框的可用打印机列表中选择它。
2.  列表中的记录数量实际上是无限的......好吧，纸张和墨水/碳粉不是）））所有这些都将从第 2 行开始打印，直到在工作表上找到的最后一个非空字符串`list`。
3.  在 1-2 项上测试代码以避免纸张丢失）

共享示例文件（代码也经过测试）：[https ://www.dropbox.com/s/296e200496gd7gb/ListPrinting.xlsm](https://www.dropbox.com/s/296e200496gd7gb/ListPrinting.xlsm)

PS 也许您应该根据需要重新格式化日期字段 - 它使用区域设置，因此将以不同方式显示给您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-05T09:27:45.123

要从 excel 中的多行生成多页文档行，您应该执行一些步骤并知道您可以访问[http://fetchflow.com/support/question/How-do-I-create-a-new-purchase-order .html](http://fetchflow.com/support/question/How-do-I-create-a-new-purchase-order.html)

# android - 如何在布局中的特定位置添加视图（在 java 类中描述）？

> ID：14646478
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:28.167
> 
> 标签：android, android-linearlayout, android-canvas, surfaceview

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout0"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".CanvasActivity"
android:baselineAligned="false">

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" 
    android:layout_weight="1"
    android:background="#f9dfcb">  
</LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout2"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="3"
    android:background="#000000" 
    >

</LinearLayout>

</LinearLayout> 
```

我的活动代码

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.Canvas;
import android.graphics.Color;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.LinearLayout;
import android.widget.Toast;

public class CanvasActivity extends Activity {

private GestureDetector gestureDetector;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_canvas);
    gestureDetector = new GestureDetector(this, new GestureListener());

    LinearLayout LinearLayout1=(LinearLayout)findViewById(R.id.LinearLayout1);
    LinearLayout1.setOnTouchListener(new OnTouchListener(){
        public boolean onTouch(View v, MotionEvent event){
            if (gestureDetector.onTouchEvent(event)) 
            {

                return true;
            }
            return false;
        }
    });

/*********EDITED*******/

    LinearLayout LinearLayout2=(LinearLayout)findViewById(R.id.LinearLayout2);
    int width=LinearLayout2.getWidth();
    int height=LinearLayout2.getHeight();
    LinearLayout2.addView(new Canvasview(this), width, height)  ;

    LinearLayout2.setOnTouchListener(new OnTouchListener(){
        public boolean onTouch(View v, MotionEvent event){

            Canvasview cv= new Canvasview(v.getContext());
            cv.onTouchEvent(event);

            return true;
        }
    });
}

//discerning swipes
    class GestureListener extends SimpleOnGestureListener
    {

        private static final int SWIPE_MIN_DISTANCE = 120;
        private static final int SWIPE_THRESHOLD_VELOCITY = 200;

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2,
                                        float velocityX, float velocityY) 
        {
             if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE &&
                     Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            //From Right to Left
             Toast.makeText(CanvasActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();

                  return true;           

        } 
             else if(e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE &&
                    Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
            //From Bottom to Top
            Toast.makeText(CanvasActivity.this, "Top Swipe", Toast.LENGTH_SHORT).show();

            return true;
        }

            return false;
        }
        @Override
        public boolean onDown(MotionEvent e) 
        {

            return true;
        }
    }

} 
```

我的 Canvasview 看起来像这样

```
public class Canvasview extends SurfaceView implements SurfaceHolder.Callback{

private int width, height;
private Paint textPaint = new Paint();
private Paint touchPaint = new Paint();
private int colors[] = new int[10];

public Canvasview(Context context) {
    super(context);
    SurfaceHolder holder = getHolder();
    holder.addCallback(this);

    setFocusable(true); // make sure we get key events
    setFocusableInTouchMode(true); // make sure we get touch events
    init();
}

private void init() 
{
    textPaint.setColor(Color.WHITE);
    colors[0] = Color.RED;

    touchPaint = new Paint();
    touchPaint.setColor(colors[0]);

}

public boolean onTouchEvent(MotionEvent event) 
{
    Canvas c = getHolder().lockCanvas();

    if (c != null) 
    {

        if (event.getAction() == MotionEvent.ACTION_UP) 
        {
            // clear everything

        }
        else 
        {
            int xval = (int)event.getX();
            int yval = (int)event.getY();
            drawCircle(xval,yval,touchPaint,c);
        }

        getHolder().unlockCanvasAndPost(c);
    }

    return true;

}

public void clear(Canvas c){
    c = getHolder().lockCanvas();
    c.drawColor(Color.BLACK);
    getHolder().unlockCanvasAndPost(c);

}

private void drawCircle(int x, int y, Paint paint, Canvas c) 
{
    c.drawCircle(x, y, 2, paint);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height){

    Canvas c = getHolder().lockCanvas();

    if (c != null) 
    {
        // clear screen
        c.drawColor(Color.BLACK);

        getHolder().unlockCanvasAndPost(c);
    }
}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

}

} 
```

我只需要linearlayout2中的画布，但画布占据了整个屏幕。我不确定我哪里出错了。

编辑：好吧，我做了一些更改，我在linearlayout2中获得了Canvasview，Canvasview的ontouchevents检测到触摸事件，但在Canvasview public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 方法没有初始化画布，因此它始终为空。要绘制，我需要画布不为空。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:22:38.090

为第一个线性布局设置 layout_width 的硬编码值，然后重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:14:31.740

第一个问题是您想要获取尚未在 onCreate() 中绘制的视图的高度和宽度：

```
int width=LinearLayout2.getWidth();
int height=LinearLayout2.getHeight(); 
```

一个可能的解决方案是设置静态值或使用 ViewTreeObserver ( [https://stackoverflow.com/search?q=get+measured+width+height+android](https://stackoverflow.com/search?q=get+measured+width+height+android) )。

您可能遇到的另一个问题是线性布局不调用 onTouch() 方法。您可以尝试使用滚动视图（例如滚动视图）而不是线性布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:34:35.407

我更改了我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout0"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
tools:context=".CanvasActivity"
android:baselineAligned="false">

 <View
    android:id="@+id/view0"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" 
    android:layout_weight="3"
    android:background="#f9dfcb"

/>
<com.multitel.testwidget.Canvasview
                xmlns:android="http://schemas.android.com/apk/res/android" 
                android:id="@+id/surfaceView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1">                  
</com.multitel.testwidget.Canvasview>

</LinearLayout> 
```

并将 Canvasview 中的构造函数更改为

```
public Canvasview(Context context, AttributeSet attrs) 
{
    super(context, attrs);
    // TODO Auto-generated constructor stub
    SurfaceHolder holder = getHolder();
    holder.addCallback(this);
    setFocusable(true); // make sure we get key events
    setFocusableInTouchMode(true); // make sure we get touch events
    init();
    holder.getSurface();
} 
```

我可以在画布上画画！！

# php - 如何从mysql数据库中获取添加到页面的项目，每个项目都有一个复选框？

> ID：14646481
> 
> 赞同：1
> 
> 时间：2013-02-01T12:37:40.510
> 
> 标签：php, jquery, mysql, checkbox

我需要编写一个做两件事的函数。它从 mysql 数据库中提取查询，并为找到的每一行显示该行的项目（表 id、标题、描述、时间戳和布尔值中有 5 个字段）。对于显示的每个项目，我需要显示一个复选框，如果用户单击，布尔值将从关闭更改为打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:18:09.780

请多加一点盐，我没有采取任何形式的安全措施，我相信有很多更好的方法，但在短时间内我有这可能会帮助你开始。

```
<?php

$query = " SELECT id, title, description, timestamp, checkbox FROM database WHERE x = y";
$stmt = $db->prepare($query);
$stmt->execute();

echo '<form action="">';
while ($row = $continent_results->fetch(PDO::FETCH_ASSOC)) {

    $id             =$row['id'];
    $title          =$row['title'];
    $description    =$row['description'];
    $timestamp      =$row['timestamp'];
    $checkBox       =$row['checkBox'];

    echo 'ID: ', $id;
    echo '<br>';
    echo 'Title: ', $title;
    echo '<br>';
    echo 'Desc: ', $description;
    echo '<br>';
    echo 'Time: ', $timestamp;
    echo '<br>';
    if (checkbox == true){
        echo 'Check <input type="checkbox" name="vehicle" value="$id" checked="checked">';
    }else{
        echo 'Check <input type="checkbox" name="vehicle" value="$id">';
    }
}
echo '</form>';

?> 
```

# git - 使用 Amazon AWS Elastic Beanstalk 运行具有多个 git 存储库的平台的最佳方式是什么？

> ID：14646483
> 
> 赞同：2
> 
> 时间：2013-02-01T12:37:41.487
> 
> 标签：git, amazon-web-services, amazon-elastic-beanstalk

我有一个用 PHP 构建的 Web 应用程序平台，由多个应用程序组成，这些应用程序位于不同的 Git 存储库中。

据我了解，您只能运行一个 AWS Elastic Beanstalk，并提供一个 Git 存储库。

有什么方法可以运行一个来自多个 Git 存储库的 EB 环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:15:03.477

从那以后，我发现这是不可能的。AWS 仅允许在任何时候将一个 Git 存储库部署到 EB 环境。

Git 子模块可能是问题的答案，但我不同意。

幸运的是，AWS 提供了另一种半托管解决方案：AWS OpsWorks。

对于其他在我上面做的同样问题上苦苦挣扎的人，那么你绝对应该尝试一下。

[http://aws.amazon.com/opsworks/](http://aws.amazon.com/opsworks/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T15:51:14.840

嗯，Elastic beanstalk 提供了借助配置文件自定义环境的能力。在此处查看详细信息：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html)。

如果您需要从不同的 github 存储库中拉取您的应用程序，您可以通过以下方式执行：使用引导脚本创建配置文件，该文件将从您的 github 存储库中拉取应用程序，而不是通过 git aws.push 发布。

你知道 git aws.push 是如何工作的吗？此命令将源推送到 aws 服务，并使用您的源创建 zip 文件，然后将其放在 s3 存储桶上。然后调用环境更新并提供指向 s3 存储桶的链接。

也可以将您的项目拉到本地。然后在 .ebextensions 中创建包含源代码和脚本的 zip 包，用于部署您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T15:13:43.267

老问题，但我正在回复有人从谷歌绊倒，就像我一样。

我发现解决此问题的一种方法是自己构建要上传到 AWS Elelastic Beanstalk 的 .zip 包，并配置 EB CLI 以使用它。这是相关的文档：

[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-configuration.html#eb-cli3-artifact](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-configuration.html#eb-cli3-artifact)

您可以有一个简单的脚本来运行 git 存档，将所有这些合并到一个 .zip 文件中，因为您的项目需要它（或运行您可能需要的任何构建过程），然后部署它。

# jpa - 如何使用 jpa 2 从连接表中删除行

> ID：14646484
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:43.870
> 
> 标签：jpa, jpa-2.0, jpql, jointable

我有一个生成连接表的一对多关系，我需要做的是从该连接表中删除一行，但我什至不知道如何执行 jpql 查询以到达该表，因为它不是实体我的数据模型。

给出我的问题的想法：

我有下一张桌子：

用户---（一对多）--->权限，生成表user_permission。

我需要从 user_permissions 中删除行，因为如果我在权限中删除所有具有特定权限的用户将丢失它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:24:06.383

从用户的权限列表中删除权限，然后保存用户对象。如果级联配置正确，则应从连接表中删除相应的条目。

# c++ - 用毕达哥拉斯方程画一个圆

> ID：14646486
> 
> 赞同：0
> 
> 时间：2013-02-01T12:37:50.300
> 
> 标签：c++, math, geometry, trigonometry

我必须用下面的代码画一个圆（检查点是否在圆上）。

```
int rad=10;
// i=x,j=y
for (int j=ymid-rad;j<=ymid+rad;j++){
   for (int i=xmid-rad;i<=xmid+rad;i++){
      if (((i-xmid)*(i-xmid)+(j-ymid)*(j-ymid)) == rad*rad)
         Image1->Canvas->Pixels[i][j]=clRed;
   }
} 
```

然而，它只绘制了圆圈的几个点。我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:39:34.687

您正在整数算术中完成所有这些操作；（对于固定的）[很少有整数](http://en.wikipedia.org/wiki/Pythagorean_triple#Distribution_of_triples)解。`x^2 + y^2 == r^2``r`

我建议改用[*中点圆算法*](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:14:13.990

基于范围的版本将像这样工作：

```
bool RangeCheck(float val, float r1, float r2) {
   return val >= r1 && val <= r2;
}
bool Circle(float x, float y, float rad) {
   return RangeCheck(sqrtf(x*x+y*y), rad-0.8, rad+0.8);
}
bool CircleWithCenter(float x, float y, float cx, float cy, float rad) {
   x-=cx; y-=cy;
   return Circle(x,y,rad);
} 
```

这种范围是他们在天气预报中绘制等值线的方式，但也适用于圆圈。

# c - 为什么未初始化的局部变量总是具有相同的初始值？

> ID：14646490
> 
> 赞同：1
> 
> 时间：2013-02-01T12:38:15.373
> 
> 标签：c, static, local-variables

在这段代码中，为什么在我的测试中结果总是`1`,`2`和`3`？

```
#include <stdio.h>

void test() {
    int a;
    a++;

    printf("%d",a);
}

int main(int argc, char *argv[]) {
    test();
    test();
    test();
} 
```

我认为变量`test()`是静态的，不是吗？为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T12:41:07.033

变量不是静态的。您正在访问一个未初始化的变量。行为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:22:42.600

正如其他答案所说，您的变量未初始化。它打印 1, 2 和 3 可能是因为**您的编译器编译了代码，`prolog(prologue)`用 zeros 清理了堆栈**。

C中的局部变量，其实是指向你栈上的偏移量，`stack frame`调用返回后会恢复。

我在谷歌上搜索并随机选择了一篇关于此的文章，请参阅[[函数调用如何工作？](http://abrickshort.wordpress.com/2005/04/)]。

[这是一个关于[汇编编程汇编函数堆栈框架解释](http://www.youtube.com/watch?v=vcfQVwtoyHY)]的视频讨论（再次，随机选择）。

维基百科也解释了[[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T12:41:10.047

因为您正在使用未初始化的值...（在这种情况下为随机行为）。

初始化您的变量（例如为 0）：

```
#include <stdio.h>
void test(){
    int a=0;
    a++;
    printf("%d",a);
}
int main(int argc, char *argv[]) {
    test();
    test();
    test();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T12:43:43.983

不，您的变量根本不是静态的！

[https://stackoverflow.com/a/1597426/1758762](https://stackoverflow.com/a/1597426/1758762)

静态变量（文件范围和函数静态）初始化为零：

```
int x; // zero
int y = 0; // also zero

    void foo() {
        static int x; // also zero
    } 
```

非静态变量（局部变量）是不确定的。在赋值之前读取它们会导致未定义的行为。

```
void foo() {
    int x;
    printf("%d", x); // the compiler is free to crash here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T12:43:56.277

您尝试打印的变量不是静态的，也不是初始化的，因此它采用垃圾值，这对您来说似乎是随机的，如果您在另一台机器上执行此程序，那么您将有不同的输出，因为您将有不同的垃圾值

为了避免它，你必须用一些值来初始化你的变量

# java - java.util.Timer 无异常停止

> ID：14646491
> 
> 赞同：3
> 
> 时间：2013-02-01T12:38:17.833
> 
> 标签：java, timer, scheduledexecutorservice

我每 2 分钟去一次 FTP 上传新文件。我用 java.util.Timer 实现了它。但过了一段时间——几天甚至一周——它毫无例外地停止了，也没有任何理由。

我找到了线程： [Java无限线程在一段时间后停止](https://stackoverflow.com/questions/3596525/java-unlimited-thread-stops-after-some-time)

但是里面并没有什么特别的解决办法。我阅读了有关 ScheduledExecutorService 的信息，但据我所知 - 它与 Timer 相同。

请给我一些想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:34:56.317

您可以尝试`Thread.setDefaultUncaughtExceptionHandler()`在主线程中使用 API 设置默认异常处理程序，并尝试记录任何可能被默默吞下的可抛出/异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T13:02:41.953

我刚刚看到没有人回答这个问题，可能是因为这是重复的。

ScheduledExecutorService 使用`System.nanotime()`，Java.util.Timer 使用`System.currentTimeMillis()`.

`System.currentTimeMillis()`取决于系统时间并`System.nanotime()`给出纳秒，因为一些固定的任意初始时间与系统时间无关。因此，系统时间的任何变化（由于 NTP 时间校正或系统待机）可能会也可能不会影响 Timer 的执行。这将是您的计时器失败的原因。

有关更多详细信息，请参阅 -[如果时钟发生变化，Timertask.scheduleAtFixedRate 应该做什么？](https://stackoverflow.com/questions/17588167/what-should-timertask-scheduleatfixedrate-do-if-the-clock-changes)

# networking - 区分不同的 Selenium Grid 节点

> ID：14646492
> 
> 赞同：1
> 
> 时间：2013-02-01T12:38:24.433
> 
> 标签：networking, selenium-grid

我现在正在处理以下问题：

我的 Selenium Grid 实例应该连接位于不同位置的几个节点，我想在每个位置运行每个测试。我如何指向 Selenium Grid，它应该从每个位置选择一个节点并在那里发送测试？我尝试操纵浏览器名称或平台（例如，将其命名为 firefox-pl/firefox-fr 或 windows-pl/windows-fr），但我总是收到以下异常：

```
 Selenium::WebDriver::Error::UnknownError:
   Error forwarding the new session cannot find 
```

我发现这些值是不可改变的。

有没有其他方法可以做到这一点？我不想更改浏览器或其版本，因为这些测试的本质是比较不同位置的网络响应，并且不同的浏览器可以更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-09T12:07:11.207

我也遇到过同样的情况，我只是想到了节点并做了如下。

```
In one folder 
  1.place the selenium-server-standalone-2.44.0.jar file and set the environment variable as well.

  2.create the hub: Type "java -jar selenium-server-standalone-2.44.0.jar -role hub -port 4444" in the text file and save it as Hub.bat and run it

  3.Create the node: Type "java -jar selenium-server-standalone-2.44.0.jar -role node -hub http://(IP Address of the parent machine which has above two files):4444/grid/register -port 8882 -browser "browserName=firefox,maxInstances=1,applicationName=two"" and put this file in another machine and run this. Now this node will be connected with the hub.

  4.If you want particular test should run in one node(client machine) then you can just specify the applicationName in the node as like in above point(3) and in setting the capabilities in the test class file as "desiredCapability.setCapability("applicationName", nodeName);". 
```

在节点中设置应用程序名称是 selenium 中的隐藏功能。现在只需测试和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T10:13:34.687

当您启动节点并指定功能时，您可能会考虑设置 maxInstances。该值控制可以在该节点上打开的该浏览器的并发实例数。如果将此设置为 1 - 您可以针对 Grid 并行运行测试，但每个节点上一次只能打开一个浏览器。

> java.exe -jar selenium-server.jar -role node -browser "browserName=firefox,maxInstances=1,platform=ANY,seleniumProtocol=WebDriver"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:11:25.310

听起来您希望并行运行测试，testng 是帮助您设置的好工具。看看下面的链接

[http://www.deepshiftlabs.com/sel_blog/?p=1932&lang=en-us](http://www.deepshiftlabs.com/sel_blog/?p=1932&lang=en-us)

# c++ - 在 Visual Studio 下编译和调试 GLUT

> ID：14646493
> 
> 赞同：1
> 
> 时间：2013-02-01T12:38:29.020
> 
> 标签：c++, opengl, glut

我正在开发一个使用 OpenGL 的应用程序。为了做到这一点，我真的很想挖掘和调试 GLUT，以便查看在 GLUT 的每个函数下调用的源代码并对其进行调试。

我已经下载了 GLUT 的源文件，它带有 Makefile，但是 Visual Studio 2010 在尝试转换时失败。我已经为此搜索过，但似乎没有人解释如何做到这一点，缺点是 GLUT 已经很老了。

有谁知道如何将 GLUT 作为项目添加到 Visual Studio（我更喜欢 2010）中，以便在运行使用 GLUT 功能的应用程序时对其进行调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:16:02.267

使用[freegult](http://freeglut.sourceforge.net/) - 它带有 Visual Studio 2008 和 Visual Studio 2010 解决方案和项目文件。因此，您应该很容易将其集成到您的项目中。Freegult 提供与 Mark Kilgard 编写的原始 GLUT lib 相同的 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T16:56:45.790

我建议远离过剩和自由过剩。[GLFW](http://www.glfw.org/)更现代，更容易理解。比 GLUT 更常用，并且在更多平台上得到支持。如果您从他们的网站下载二进制文件，您将能够正常链接并包含它。否则使用可以使用[premake4](http://industriousone.com/premake)生成一个vs2010项目来构建它。

您还使用哪个加载库？

编辑。如果你下载[glsdk](http://glsdk.sourceforge.net/docs/html/index.html)。您将能够使用[premake4](http://industriousone.com/premake)生成 vs2010 项目。然后，您将能够运行示例项目。提供了 GLUT 和 GLFW 示例，并且开箱即用。

# java - Java JPA：选择“属性在列表<>中”

> ID：14646495
> 
> 赞同：0
> 
> 时间：2013-02-01T12:38:45.450
> 
> 标签：java, jpa, eclipselink

我正在使用 JPA 并尝试选择`Product`给定`List`父母（ ）的所有子实体（ `Category`）。关系是`Category OneToMany Product`。我想将其保留为一个查询，而不是创建一个`Predicate`like `product.get("category") == category.get(0) || product.get("category") == category.get(1) || ...`。

我已经尝试了以下代码，但这似乎不起作用（如底部的堆栈所示）。有没有人建议如何做到这一点？

**代码**

```
public List<Product> findProductsBy(List<Category> categories) {
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Product> query = cb.createQuery(Product.class);
    Root product = query.from(Product.class);
    Predicate predicateCategory = product.get("category").in(categories);

    query.select(product).where(predicateCategory);
    return em.createQuery(query).getResultList();
} 
```

**堆**

```
WARNING: Local Exception Stack: 
Exception [EclipseLink-6075] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.QueryException
Exception Description: Object comparisons can only use the equal() or notEqual() operators.  Other comparisons must be done through query keys or direct attribute level comparisons. 
Expression: [
Relation operator [ IN ]
   Query Key category
      Base (...).Product 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:31:56.003

您可以做的是使用类别 id 而不是类别对象（作为错误状态：*不支持对象比较*）：

（假设您的类别 id 是 a `Long`，您可以执行以下操作。）

```
public List<Product> findProductsBy(List<Category> categories) {
    List<Long> categoryIds = new ArrayList<Long>();
    for(Category category:categories){
        categoryIds.add(category.getId());
    }
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Product> query = cb.createQuery(Product.class);
    Root product = query.from(Product.class);
    Predicate predicateCategory = product.get("categoryId").in(categoryIds);

    query.select(product).where(predicateCategory);
    return em.createQuery(query).getResultList(); 
```

}

# maven - 使用 Maven 将 WAR 项目上传到 Tomcat，而不提供“管理器应用程序”

> ID：14646497
> 
> 赞同：2
> 
> 时间：2013-02-01T12:38:52.893
> 
> 标签：maven, tomcat, deployment

### 货物问题

使用 Maven，上传到服务器似乎是通过**Cargo 插件**或“ **Tomcat 插件**”完成的。但似乎他们使用 Tomcat**管理器应用程序**上传到服务器：

*   这个链接：[Maven: copy WAR to Tomcat's webapps directory](https://stackoverflow.com/questions/369639/mvn-copy-war-to-webapps)，不提供上传方式，它是关于复制（本地）包。**我不想在本地复制。想上传到远程服务器。**
*   这个：[将 maven 项目部署到现有的 Tomcat 服务器](https://stackoverflow.com/questions/14454215/deploying-maven-project-into-an-existing-tomcat-server?lq=1)中，建议使用 Tomcat 插件。但**我不想依赖于 manager application access**。

### 只想上传文件

我只想拥有类似的任何方式：只需为插件提供对目标文件夹（通常是 $CATALINA_HOME/webapp）的 SFTP 访问权限，它只是将战争文件上传到目标。没有经理访问权限，没有类似的。其余部分由Tomcat中的*自动部署完成。*

那么，解决方案是什么？

PS`mvn delpoy`似乎不是一个解决方案，因为它说它是用于“存储库”而不是运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:19:22.683

您可以使用其中任何一个[`maven-exec-plugin`](http://mojo.codehaus.org/exec-maven-plugin/)来执行任何执行`scp`.

另一种解决方案，如果您熟悉 ant，则使用[`maven-antrun-plugin`](http://maven.apache.org/plugins/maven-antrun-plugin/)ant 任务执行 scp

有用的网址 ：

*   [执行插件](https://stackoverflow.com/questions/3491937/i-want-to-execute-shell-commands-from-mavens-pom-xml)
*   [antrun 插件 + scp](http://maksim.sorokin.dk/it/2010/08/26/copy-files-with-scp-using-maven/)

# android - 如何在从图像按钮弹出的弹出窗口中显示日期选择器

> ID：14646499
> 
> 赞同：0
> 
> 时间：2013-02-01T12:38:59.353
> 
> 标签：android, android-imageview, popupwindow, layout-inflater, android-datepicker

我正在构建需要这种复杂机制的应用程序。请帮帮我。当我单击图像按钮时，它应该显示一个弹出窗口。在这个弹出窗口中，我保留了两个 editText。我已将两个 editTexts 都设置为 OnclickListener。现在，当我单击 edittext 时，它应该显示 DatePicker，最后当我在 datepicker 上设置日期时，它应该在那些 editTexts 上设置。

我不知道该怎么做。阅读一些教程，我使我的 java 代码看起来像：

```
package com.addictioncounterapp;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout.LayoutParams;
import android.widget.PopupWindow;
import android.widget.TextView;

public class AddictionDetails extends Activity 
{
TextView tv_addiction_name, tv_today, tv_yesterday, tv_this_week, tv_this_month, tv_total;
ImageView iv_back, iv_filter;
int year, month, day;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addiction_details);

    tv_addiction_name = (TextView) findViewById(R.id.textViewAddictionDetails);
    tv_total = (TextView) findViewById(R.id.textview_total);
    tv_today = (TextView) findViewById(R.id.textview_today);
    tv_yesterday = (TextView) findViewById(R.id.textview_yesterday);
    tv_this_week = (TextView) findViewById(R.id.textview_this_week);
    tv_this_month = (TextView) findViewById(R.id.textview_this_month);

    iv_back = (ImageView) findViewById(R.id.imageViewAddictionDetailsBack);
    iv_back.setClickable(true);
    iv_back.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {
                                            Intent intent = new Intent(AddictionDetails.this, StartActivity.class);
                                            startActivity(intent);
                                        }
                                    }
                                );
    iv_filter = (ImageView) findViewById(R.id.imageViewAddictionDetailsFilter);
    iv_filter.setClickable(true);
    iv_filter.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {
                                            LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
                                            View popupView = layoutInflater.inflate(R.layout.activity_filter_addiction_form, null);
                                            final PopupWindow popupWindow = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

                                            final EditText etStartDate = (EditText)popupView.findViewById(R.id.editTextFilterStartDate);
                                            etStartDate.setOnClickListener(new OnClickListener()
                                                                                {   
                                                                                    @Override
                                                                                    public void onClick(View v)
                                                                                    {
                                                                                        final int DATE_DIALOG_ID = 1;
                                                                                        showDialog(DATE_DIALOG_ID);
                                                                                        protected Dialog onCreateDialog(int id)
                                                                                        {
                                                                                                switch(id)
                                                                                                {
                                                                                                    case DATE_DIALOG_ID:
                                                                                                        return new DatePickerDialog(this, dateListener, year, month, day);
                                                                                                }
                                                                                                return null;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            );

                                            final Calendar cal = Calendar.getInstance();
                                            year = cal.get(Calendar.YEAR);
                                            month = cal.get(Calendar.MONTH);
                                            day = cal.get(Calendar.DAY_OF_MONTH);

                                            etStartDate.setText(new StringBuilder().append(day).append('/').append(month + 1).append('/').append(year));

                                            DatePickerDialog.OnDateSetListener dateListener = new DatePickerDialog.OnDateSetListener()
                                                                                                    {
                                                                                                        @Override
                                                                                                        public void onDateSet(DatePicker view, int yr, int monthOfYear, int dayOfMonth)
                                                                                                        {
                                                                                                            year = yr;
                                                                                                            month = monthOfYear;
                                                                                                            day = dayOfMonth;
                                                                                                            etStartDate.setText(new StringBuilder().append(day).append('/').append(month + 1).append('/').append(year));
                                                                                                        }
                                                                                                };

                                            EditText etEndDate = (EditText)popupView.findViewById(R.id.editTextFilterEndDate);
                                            etEndDate.setOnClickListener(new OnClickListener()
                                                                                {   
                                                                                    @Override
                                                                                    public void onClick(View v)
                                                                                    {

                                                                                    }
                                                                                }
                                                                        );

                                            ImageView iv_ok = (ImageView) popupView.findViewById(R.id.imageViewOk);
                                            iv_ok.setClickable(true);
                                            iv_ok.setOnClickListener(new ImageView.OnClickListener()
                                                                        {
                                                                             @Override
                                                                             public void onClick(View v)
                                                                             {

                                                                             }
                                                                         }
                                                                    );

                                            ImageView iv_cancel = (ImageView) popupView.findViewById(R.id.imageViewCancel);
                                            iv_cancel.setClickable(true);
                                            iv_cancel.setOnClickListener(new ImageView.OnClickListener()
                                                                            {
                                                                                 @Override
                                                                                 public void onClick(View v)
                                                                                 {
                                                                                     popupWindow.dismiss();
                                                                                 }
                                                                             }
                                                                        );

                                        }
                                    }
                                );

    Intent intent = getIntent();
    String cat_name = intent.getStringExtra("cat_name");

    tv_addiction_name.setText(cat_name);

    SQLiteDatabase db = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.OPEN_READWRITE, null);

    Cursor cursor = db.query("category", new String[]{"cat_id"}, "cat_name=?", new String[]{cat_name}, null, null, null);

    //----------------------fetching id-------------------

    int cat_id = 0;
    if(cursor.getCount() > 0)
        while(cursor.moveToNext())
            cat_id = cursor.getInt(0);
    cursor.close();

    //----------------------fetching total-------------------

    int total;
    cursor = db.query("counter", new String[]{"cat_id"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
    total = cursor.getCount();
    tv_total.setText(total+"");

    //----------------------fetching today's count---------------

    cursor = db.query("counter", new String[]{"counter_entry_date"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);

    Calendar cal1 = Calendar.getInstance();
    SimpleDateFormat dateFormat1 = new SimpleDateFormat("dd/MM/yyyy");

    String todays_date = dateFormat1.format(cal1.getTime());
    String cursor_date;
    int counter = 0;
    if(cursor.getCount() > 0)
    {
        while(cursor.moveToNext())
        {
            cursor_date = cursor.getString(0)+"";
            if(cursor_date.equals(todays_date))
                counter++;
        }
    }
    tv_today.setText(counter+"");

    //----------------------fetching yesterdays count------------------

    Calendar cal2 = Calendar.getInstance();
    SimpleDateFormat dateFormat2 = new SimpleDateFormat("dd/MM/yyyy");
    cal2.add(Calendar.DATE, -1);

    String yesterdays_date = dateFormat2.format(cal2.getTime());

    counter = 0;
    cursor.moveToFirst();
    if(cursor.getCount() > 0)
    {
        while(cursor.moveToNext())
        {
            cursor_date = cursor.getString(0)+"";
            if(cursor_date.equals(yesterdays_date))
                counter++;
        }
    }
    tv_yesterday.setText(counter+"");

    //-------------------------fetching current week count--------------------

    ArrayList<String> current_week_dates = new ArrayList<String>();

    Calendar c = Calendar.getInstance();
    c.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
    SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    for (int i = 0; i < 7; i++)
    {
        current_week_dates.add(df.format(c.getTime()));
        c.add(Calendar.DATE, 1);
    }

    counter=0;
    cursor.moveToFirst();
    while(cursor.moveToNext())
    {
        if(current_week_dates.contains(cursor.getString(0)))
        {
            counter++;
        }
    }
    tv_this_week.setText(counter+"");

    //----------------------fetching current month count--------------------

    cursor.moveToFirst();
    counter=0;

    Date date = new Date();
    SimpleDateFormat sdf;

    sdf = new SimpleDateFormat("MM/yyyy");
    String current_month= sdf.format(date);

//      Toast.makeText(getBaseContext(), current_month, Toast.LENGTH_SHORT).show();

    while(cursor.moveToNext())
    {
        if((cursor.getString(0)).matches("(.*)"+current_month))
        {
            counter++;
        }
    }
//      Toast.makeText(getBaseContext(), counter+"", Toast.LENGTH_SHORT).show();

    tv_this_month.setText(counter+"");
    cursor.close();
}
} 
```

这是我的主要 xml 文件，其中包含 imageview，从中显示弹出窗口：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/black_red_texture" >

<ImageView
    android:id="@+id/imageViewAddictionDetailsBack"
    android:layout_width="25dp"
    android:layout_height="25dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/arrow_left"
    android:clickable="true" />

<TextView
    android:id="@+id/textViewAddictionDetails"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:text="Addiction Details"
    android:textSize="20sp" />

<TableLayout
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignParentEnd="false"
    android:layout_below="@id/textViewAddictionDetails"
    android:layout_centerHorizontal="true"
    android:background="#20ffffff"
    android:shrinkColumns="1" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Today:" />

        <TextView
            android:textColor="#ffffff"
            android:id="@+id/textview_today"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="today" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp" >

        <TextView
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Yesterday:" />

        <TextView
            android:textColor="#ffffff"
            android:id="@+id/textview_yesterday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="yesterday" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp" >

        <TextView
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="This Week:" />

        <TextView
            android:textColor="#ffffff"
            android:id="@+id/textview_this_week"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="this week" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp" >

        <TextView
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="This Month:" />

        <TextView
            android:textColor="#ffffff"
            android:id="@+id/textview_this_month"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="this month" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:paddingTop="10dp" >

        <TextView
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Total:" />

        <TextView
            android:textColor="#ffffff"
            android:id="@+id/textview_total"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_weight="1"
            android:text="total" />
    </TableRow>

</TableLayout>

<ImageView
    android:id="@+id/imageViewAddictionDetailsFilter"
    android:layout_width="25dp"
    android:layout_height="25dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/filter" />

</RelativeLayout> 
```

这是我的弹出布局 xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#20000000"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="10dp" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="Start Date : "
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/editTextFilterStartDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_weight="1"
                android:hint="Select start date"
                android:clickable="true"
                android:focusableInTouchMode="false" />

        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="10dp" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="End Date : "
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/editTextFilterEndDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_weight="1"
                android:hint="select end date"
                android:clickable="true"
                android:focusableInTouchMode="false" />

        </TableRow>

    </TableLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageViewCancel"
            android:layout_width="50dp"
            android:layout_height="60dp"
            android:layout_weight="1"
            android:src="@drawable/buttons_cancel"
            android:clickable="true" />

        <ImageView
            android:id="@+id/imageViewOk"
            android:layout_width="50dp"
            android:layout_height="60dp"
            android:layout_weight="1"
            android:src="@drawable/buttons_ok"
            android:clickable="true" />

    </LinearLayout>

</LinearLayout> 
```

这是我的日期选择器布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
<DatePicker 
    android:id="@+id/DatePicker01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"></DatePicker>
</LinearLayout> 
```

我没有运行代码，因为它在 java 代码中的某些行或其他行上显示错误，而我自己被困住了，使这变得更加复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:59:54.720

你是怎么解决的？我也想像你打开的那样打开日期选择器。

我的解决方案

//.java 文件

```
public void InitializePopupWindow() {
    LayoutInflater inflater = (LayoutInflater) getActivity()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // Inflate the view from a predefined XML layout
    layout = inflater.inflate(R.layout.popup_datepicker,
            (ViewGroup) getActivity().findViewById(R.id.popup));
    // create a 300px width and 470px height PopupWindow
    popup_window = new PopupWindow(layout, LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT, true);
    popup_window.setOutsideTouchable(true);
    try {
        datepicker = (DatePicker) layout.findViewById(R.id.date_picker);
        popup_ok = (Button) layout.findViewById(R.id.btn_ok);
        popup_ok.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (dateSelection == 1) {
                    fromDate.set(Calendar.DAY_OF_MONTH,
                            datepicker.getDayOfMonth());
                    fromDate.set(Calendar.MONTH, datepicker.getMonth());
                    fromDate.set(Calendar.YEAR, datepicker.getYear());

                    fromDate = CommonFunctios
                            .getCurrentDateFromTime(fromDate);
                    btnFromDate.setText(fromDate.get(Calendar.DATE) + "/"
                            + fromDate.get(Calendar.MONTH) + "/"
                            + fromDate.get(Calendar.YEAR));

                } else if (dateSelection == 2) {

                    ToDate.set(Calendar.DAY_OF_MONTH,
                            datepicker.getDayOfMonth());
                    ToDate.set(Calendar.MONTH, datepicker.getMonth());
                    ToDate.set(Calendar.YEAR, datepicker.getYear());
                    ToDate = CommonFunctios.getCurrentDatetoTime(ToDate);
                    btnToDate.setText(ToDate.get(Calendar.DATE) + "/"
                            + ToDate.get(Calendar.MONTH) + "/"
                            + ToDate.get(Calendar.YEAR));
                }
                popup_window.dismiss();

            }
        });

        popup_cancel = (Button) layout.findViewById(R.id.btn_cancel);
        popup_cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                popup_window.dismiss();

            }
        });

        txtDateTitle = (TextView) layout.findViewById(R.id.txtDateTitle);
        txtDateTitle.setTypeface(CommonFunctios
                .getSegoUIBold(getActivity()));

        popup_window.setOutsideTouchable(true);
        popup_window.setTouchable(true);
        popup_window.setBackgroundDrawable(new BitmapDrawable());
        popup_window.setTouchInterceptor(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                return false;
            }
        });
    } catch (Exception e) {

    }
} 
```

用于弹出窗口的 .xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/popup"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@android:drawable/alert_light_frame"
android:gravity="center"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtDateTitle"
    style="@style/thankyouTextstyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="Select Date" />

<DatePicker
    android:id="@+id/date_picker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingTop="10dp" >

    <Button
        android:id="@+id/btn_ok"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@android:string/ok" />

    <Button
        android:id="@+id/btn_cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@android:string/cancel" />
</LinearLayout>
</LinearLayout> 
```

调用此弹出窗口

```
popup_window.showAsDropDown(btnFromDate);
popup_window.update(); 
```

这样我就解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:01:24.177

这就是我实现我想要的方式：

```
public class AddictionDetails extends Activity 
{
    TextView tv_addiction_name, tv_today, tv_yesterday, tv_this_week, tv_this_month, tv_total;
    ImageView iv_filter;
    int year, month, day;
    int placeData;
    Boolean state = false;
    DatePickerDialog.OnDateSetListener dateListener;
    SQLiteDatabase database;
    LinearLayout layout;
    int cat_id = 0;
    String startDateToCalculate = "";
    String endDateToCalculate = "";

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_addiction_details);

        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
        final View popupView = layoutInflater.inflate(R.layout.activity_filter_addiction_form, null);
        popupView.setVisibility(View.INVISIBLE);

        Intent intent = getIntent();
        final String cat_name = intent.getStringExtra("cat_name");
        tv_addiction_name = (TextView) findViewById(R.id.textViewAddictionDetails);
        tv_addiction_name.setText(cat_name);

        tv_total = (TextView) findViewById(R.id.textview_total);
        tv_today = (TextView) findViewById(R.id.textview_today);
        tv_yesterday = (TextView) findViewById(R.id.textview_yesterday);
        tv_this_week = (TextView) findViewById(R.id.textview_this_week);
        tv_this_month = (TextView) findViewById(R.id.textview_this_month);

        iv_filter = (ImageView) findViewById(R.id.imageViewAddictionDetailsFilter);
        iv_filter.setClickable(true);
        iv_filter.setOnClickListener(new OnClickListener()
                                        {
                                            @Override
                                            public void onClick(View v)
                                            {
                                                if(state == false)
                                                {
                                                    state = true;
                                                    popupView.setVisibility(View.VISIBLE);
                                                    final PopupWindow popupWindow = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                                                    final EditText etStartDate = (EditText)popupView.findViewById(R.id.editTextFilterStartDate);
                                                    popupWindow.showAtLocation(findViewById(R.id.relativeLayoutAddictionDetails), 0, 0, 100);
//                                                  popupWindow.showAtLocation(popupView.findViewById(R.id.editTextFilterStartDate), 48, 0, 70);

                                                    final Calendar cal = Calendar.getInstance();
                                                    year = cal.get(Calendar.YEAR);
                                                    month = cal.get(Calendar.MONTH);
                                                    day = cal.get(Calendar.DAY_OF_MONTH);

                                                    etStartDate.setOnClickListener(new OnClickListener()
                                                                                        {   
                                                                                            @Override
                                                                                            public void onClick(View v)
                                                                                            {
                                                                                                showDialog(1);
                                                                                                placeData = 1;
                                                                                            }
                                                                                        }
                                                                                    );

                                                    final EditText etEndDate = (EditText)popupView.findViewById(R.id.editTextFilterEndDate);
                                                    etEndDate.setOnClickListener(new OnClickListener()
                                                                                        {   
                                                                                            @Override
                                                                                            public void onClick(View v)
                                                                                            {
                                                                                                showDialog(1);
                                                                                                placeData = 2;
                                                                                            }
                                                                                        }
                                                                                );

                                                    Button btn_done = (Button) popupView.findViewById(R.id.buttonDone);
                                                    btn_done.setOnClickListener(new OnClickListener()
                                                                                {
                                                                                     @Override
                                                                                     public void onClick(View v)
                                                                                     {
                                                                                         if(etStartDate.getText()+""=="" || etEndDate.getText()+""=="")
                                                                                         {
                                                                                             AlertDialog.Builder adb = new Builder(AddictionDetails.this);
                                                                                             adb.setTitle("Error");
                                                                                             adb.setMessage("Fields can't be blank.");
                                                                                             adb.setIcon(R.drawable.ic_launcher);
                                                                                             adb.setPositiveButton("Ok",new DialogInterface.OnClickListener()
                                                                                                                             {
                                                                                                                                 public void onClick(DialogInterface dialog, int which)
                                                                                                                                 {
                                                                                                                                     dialog.dismiss();
                                                                                                                                 }
                                                                                                                             }
                                                                                                                    );
                                                                                             AlertDialog ad = adb.create();
                                                                                             ad.show();
                                                                                         }
                                                                                         else
                                                                                         {
                                                                                            SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
                                                                                            SimpleDateFormat sdf2 = new SimpleDateFormat("MMMM dd, yyyy");

                                                                                            Date date1 = null, date2 = null;
                                                                                            try
                                                                                            {
                                                                                                date1 = sdf.parse(startDateToCalculate);
                                                                                                date2 = sdf.parse(endDateToCalculate);
                                                                                            }
                                                                                            catch (ParseException e)
                                                                                            {
                                                                                                e.printStackTrace();
                                                                                            }

                                                                                            if(date1.compareTo(date2)>0)
                                                                                            {
                                                                                                AlertDialog.Builder adb = new Builder(AddictionDetails.this);
                                                                                                adb.setTitle("Error");
                                                                                                adb.setMessage("Start date cannot be greater than End date.");
                                                                                                adb.setIcon(R.drawable.ic_launcher);
                                                                                                adb.setPositiveButton("Ok",new DialogInterface.OnClickListener()
                                                                                                                             {
                                                                                                                                     public void onClick(DialogInterface dialog, int which)
                                                                                                                                     {
                                                                                                                                         dialog.dismiss();
                                                                                                                                     }
                                                                                                                                 }
                                                                                                                        );
                                                                                                 AlertDialog ad = adb.create();
                                                                                                 ad.show();
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                Intent intent = new Intent(AddictionDetails.this, FilteredData.class);
                                                                                                intent.putExtra("start_date", startDateToCalculate);
                                                                                                intent.putExtra("end_date", endDateToCalculate);
                                                                                                intent.putExtra("start_date_to_display", etStartDate.getText()+"");
                                                                                                intent.putExtra("end_date_to_display", etEndDate.getText()+"");
                                                                                                intent.putExtra("cat_id", cat_id);
                                                                                                intent.putExtra("cat_name", cat_name);
                                                                                                startActivity(intent);
                                                                                                popupWindow.dismiss();
                                                                                                finish();
                                                                                            }
                                                                                         } 
                                                                                     }
                                                                                 }
                                                                            );

                                                    Button btn_cancel = (Button) popupView.findViewById(R.id.buttonCancel);
                                                    btn_cancel.setOnClickListener(new OnClickListener()
                                                                                    {
                                                                                         @Override
                                                                                         public void onClick(View v)
                                                                                         {
                                                                                             etStartDate.setText("");
                                                                                             etEndDate.setText("");
                                                                                             popupView.setVisibility(View.INVISIBLE);
                                                                                             popupWindow.dismiss();
                                                                                             state = false;
                                                                                         }
                                                                                     }
                                                                                );

                                                    dateListener = new DatePickerDialog.OnDateSetListener()
                                                    {
                                                        @Override
                                                        public void onDateSet(DatePicker view, int yr, int monthOfYear, int dayOfMonth)
                                                        {
                                                            SimpleDateFormat DateFormatToDisplay = new SimpleDateFormat("MMMM dd, yyyy");
                                                            SimpleDateFormat DateFormatToCalculate = new SimpleDateFormat("yyyy/MM/dd");
                                                            Calendar tmpC1 = Calendar.getInstance();
                                                            tmpC1.set(yr, monthOfYear, dayOfMonth);
                                                            Date tmpD1 = tmpC1.getTime();
                                                            String tmpDateString = DateFormatToDisplay.format(tmpD1);
                                                            String dateToCalculate = DateFormatToCalculate.format(tmpD1);
                                                            update(placeData, tmpDateString, dateToCalculate);
                                                        }

                                                        private void update(int position, String strDate, String date)
                                                        {
                                                            switch(position)
                                                            {
                                                                case 1:

                                                                    etStartDate.setText(strDate);
                                                                    startDateToCalculate = date;
                                                                    break;

                                                                case 2:

                                                                    etEndDate.setText(strDate);
                                                                    endDateToCalculate = date;
                                                                    break;
                                                            }
                                                        }
                                                    };
                                                    popupWindow.showAsDropDown(iv_filter);
                                                }                                               
                                            }
                                        });

        loadDB();

        Cursor cursor = database.query("category", new String[]{"cat_id"}, "cat_name=?", new String[]{cat_name}, null, null, null);

        //----------------------fetching id-------------------

        if(cursor.getCount() > 0)
            while(cursor.moveToNext())
                cat_id = cursor.getInt(0);
        cursor.close();

        //----------------------fetching attribute----------------

        String attribute = null;
        Cursor attributeCursor = database.query("category_attribute", new String[]{"cat_attribute_name"}, "cat_id=?", new String[]{cat_id+""}, null, null, null);
        if(attributeCursor.getCount() > 0)
            while(attributeCursor.moveToNext())
                attribute = attributeCursor.getString(0);
        cursor.close();

        //----------------------fetching total-------------------

        int totalCounter;
        Cursor totalCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+";", null);
        if(totalCursor.moveToNext())
            totalCounter = totalCursor.getInt(0);
        else
            totalCounter = 0;
        totalCursor.close();
        tv_total.setText(totalCounter+"  "+attribute);

        //----------------------fetching today's count---------------

        Calendar cal1 = Calendar.getInstance();
        SimpleDateFormat dateFormat1 = new SimpleDateFormat("yyyy/MM/dd");

        String todays_date = dateFormat1.format(cal1.getTime());
        int todayCounter;

        Cursor todayCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date = '"+todays_date+"';", null);
        if(todayCursor.moveToNext())
            todayCounter = todayCursor.getInt(0);
        else
            todayCounter = 0;
        todayCursor.close();

        tv_today.setText(todayCounter+"  "+attribute);

        //----------------------fetching yesterdays count------------------

        Calendar cal2 = Calendar.getInstance();
        SimpleDateFormat dateFormat2 = new SimpleDateFormat("yyyy/MM/dd");
        cal2.add(Calendar.DATE, -1);

        String yesterdays_date = dateFormat2.format(cal2.getTime());

        int yesterdayCounter = 0;

        Cursor yesterdayCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date = '"+yesterdays_date+"';", null);

        if(yesterdayCursor.moveToFirst())
            yesterdayCounter = yesterdayCursor.getInt(0);
        else
            yesterdayCounter = 0;

        yesterdayCursor.close();

        tv_yesterday.setText(yesterdayCounter+"  "+attribute);

        //-------------------------fetching current week count--------------------

        SimpleDateFormat weekDateFormat = new SimpleDateFormat("yyyy/MM/dd");
        Calendar c1 = Calendar.getInstance();
        c1.set(Calendar.DAY_OF_WEEK, 1);
        Date weekFirstDate = c1.getTime();
        String strWeekFirstDay = weekDateFormat.format(weekFirstDate);

        Cursor weekCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strWeekFirstDay+"' AND '"+todays_date+"';", null);

        int weekCounter = 0;
        if(weekCursor.moveToFirst())
            weekCounter = weekCursor.getInt(0);
        else
            weekCounter = 0;
        weekCursor.close();

        tv_this_week.setText(weekCounter+"  "+attribute);

        //----------------------fetching current month count--------------------

        SimpleDateFormat monthDateFormat = new SimpleDateFormat("yyyy/MM/dd");
        Calendar c2 = Calendar.getInstance();
        c2.set(Calendar.DAY_OF_MONTH, 1);
        Date monthFirstDate = c2.getTime();
        String strMonthFirstDay = monthDateFormat.format(monthFirstDate);

        Cursor monthCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strMonthFirstDay+"' AND '"+todays_date+"';", null);
        int monthCounter = 0;
        if(monthCursor.moveToFirst())
            monthCounter = monthCursor.getInt(0);
        else
            monthCounter = 0;
        monthCursor.close();

        tv_this_month.setText(monthCounter+"  "+attribute);
        database.close();
    }

    private void loadDB() 
    {
        database = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.OPEN_READWRITE, null);
    }

    protected Dialog onCreateDialog(int id)
    {
        return new DatePickerDialog(this, dateListener, year, month, day);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if(keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
        {
            finish();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

# graph - 在java的主内存中加载直到深度N的图形

> ID：14646500
> 
> 赞同：1
> 
> 时间：2013-02-01T12:39:10.640
> 
> 标签：graph, orientdb

java - 如何在java中加载以顶点V为根的整个图？

我有一个 veertex V，它是根节点。现在它连接到其他一些顶点，实习生连接到更多顶点等等。

我想加载整个图直到深度 N。

有可能吗？

```
public class GraphLoader{

   public void loadGraph(RootID id){
      //load here
      //What will be return type ??Vertex??I mean class of rootNode?
   }

}

1)How can i to it using native libs? <br>
2)How can i do it using ThinkerPop bluprientAPI 
```

我不赞成从顶点获取顶点然后获取下一个然后下一个。这将需要很长时间。我的图表深度约为 100，节点数可能很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:24:38.560

关于 (1)[乐于 OrientDB Java Traverse](https://github.com/nuvolabase/orientdb/wiki/Java-Traverse)。

# reactiveui - ReactiveUI ObservableAsPropertyHelper 抛出无法转换为类型异常

> ID：14646501
> 
> 赞同：1
> 
> 时间：2013-02-01T12:39:12.077
> 
> 标签：reactiveui

我正在尝试使用 ObservableAsPropertyHelper 来设置只读属性，但无论我尝试什么，我似乎都无法让它按预期工作。

我可以将它提炼成一个测试（使用 ReactiveUI 4.3.2.0、Nunit.Framework 和 Should，全部来自 NuGet）

```
[TestFixture]
public class ObservableAsPropertyHelperTests : ReactiveObject 
{
    private bool _Updated;

    public bool Updated
    {
        get { return _Updated; }
        set { this.RaiseAndSetIfChanged(x => x.Updated, value); }
    }

    [Test]
    public void ShouldSetProperty()
    {
        var input = new Subject<bool>();
        var propertyHelper = input.ToProperty(
                source: this, 
                property: x => x.Updated);//Exception here 

        input.OnNext(true);

        this.Updated.ShouldBeTrue();
    } 
```

但这会导致

```
System.ArgumentException : Object of type 'ReactiveUI.ObservableAsPropertyHelper`1[System.Boolean]' cannot be converted to type 'System.Boolean'.
   at System.RuntimeType.TryChangeType(Object value, Binder binder, CultureInfo culture, Boolean needsSpecialCast)
   at System.RuntimeType.CheckValue(Object value, Binder binder, CultureInfo culture, BindingFlags invokeAttr)
   at System.Reflection.RtFieldInfo.InternalSetValue(Object obj, Object value, BindingFlags invokeAttr, Binder binder, CultureInfo culture, Boolean doVisibilityCheck, Boolean doCheckConsistency)
   at System.Reflection.RtFieldInfo.SetValue(Object obj, Object value, BindingFlags invokeAttr, Binder binder, CultureInfo culture)
   at ReactiveUI.OAPHCreationHelperMixin.ToProperty[TObj,TRet](IObservable`1 This, TObj source, Expression`1 property, TRet initialValue, IScheduler scheduler, Boolean setViaReflection) in y:\Dropbox\ReactiveUI_External\ReactiveUI\ObservableAsPropertyHelper.cs:line 184#0
   at RxUILearning.ObservableAsPropertyHelperTests.ShouldSetProperty() in C:\Dev\RxUILearning\ObservableAsPropertyHelperTests.cs:line 45#1 
```

我可以验证传入的参数

```
 //   source:
    //     The ReactiveObject that has the property
    //
    //   property:
    //     An Expression representing the property (i.e.  'x => x.SomeProperty' 
```

在查看 GitHub 上的源代码后，我可以通过调用

```
var propertyHelper = input.ToProperty(source: this, property: x => x.Updated, setViaReflection:false); 
```

我的代码避免了异常，但也没有通过测试。

我怎样才能避免*做错了^(TM)*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:01:31.070

_Updated 实际上应该是 ObservableAspropertyHelper

```
[TestFixture]
public class ObservableAsPropertyHelperTests : ReactiveObject 
{
    private ObservableAsPropertyHelper<bool> _Updated;

    public bool Updated
    {
        get { return _Updated.Value; }
    }

    [Test]
    public void ShouldSetProperty()
    {
        var input = new Subject<bool>();
        input.ToProperty(
                source: this, 
                property: x => x.Updated);//Now should work

        input.OnNext(true);

        this.Updated.ShouldBeTrue();
    } 
```

# objective-c - 如何更新 UIImageView？

> ID：14646505
> 
> 赞同：0
> 
> 时间：2013-02-01T12:39:32.203
> 
> 标签：objective-c, uiimageview, uiimage

我有一个 UIImageView 类“贴纸”。我在另一个类中创建这个类的不同对象来添加贴纸。

```
Sticker  *stick = [[Sticker alloc]initWithFrame:[self calculateSize:img]];
stick.contentMode = UIViewContentModeScaleAspectFit;
[stick update:img];
//stick.image = img;
[imageView addSubview:stick];
[stick release]; 
```

其中 imageView 是父类的 UIImageView，在此我添加贴纸。但是当我想编辑那个 Sticker 图像时，我使用全局 UIImage 从 Sticker ImageView 获取图像，但是在编辑之后，编辑后的图像不会更新到旧的 Sticker imageView。

谁能告诉我如何解决这个问题？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:59:01.507

使用标签在数组中添加所有贴纸对象，并通过图像视图的标签访问修改贴纸。

# javascript - Javascript OOP 和咖啡

> ID：14646508
> 
> 赞同：1
> 
> 时间：2013-02-01T12:39:43.170
> 
> 标签：javascript, oop, coffeescript

我试图了解在 Javascript 中处理 OOP 的方式，我偶然发现了 coffescript 定义构造函数和原型的方式。有人能告诉我这段代码有什么好处吗

```
Animal = (function() {

  function Animal(name) {
    this.name = name;
  }

  Animal.prototype.move = function(meters) {
    return alert(this.name + (" moved " + meters + "m."));
  };

  return Animal;

})(); 
```

与此相比

```
function Animal(name) {
  this.name = name;
}

Animal.prototype.move = function(meters) {
  return alert(this.name + (" moved " + meters + "m."));
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:46:11.793

第一个示例有一个包装 Animal 对象的匿名自执行函数。

在给出的示例中，这不提供额外的封装。但是通常您可能希望返回一个更复杂的对象或依赖将在全局范围内声明的其他变量（一件坏事）。

# html - 通过 href 向 Twitter 用户发送推文

> ID：14646511
> 
> 赞同：4
> 
> 时间：2013-02-01T12:39:47.007
> 
> 标签：html, twitter, hyperlink

只是一个快速的，我如何直接从我网站上的 href 链接向用户发送推文？例子：

```
<a href="twitter.com/user?newtweet=">@name</a> 
```

希望你明白我在追求什么！不确定是否可以完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:48:10.390

按照建议查看推特按钮后，您可以简单地使用

```
<a href="https://twitter.com/intent/tweet?screen_name=@twittername">Tweet to @twittername</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T12:43:08.850

我相信你会得到最接近的是使用[Twitter 推文按钮](https://twitter.com/about/resources/buttons)，除非你想编写你自己的后端服务，你可以通过 HTTP GET 访问，而后者又必须通过他们的 API 与 Twitter 交互。

使用上面引用的代码生成器，你会得到一个看起来像这样的代码，你必须将`c_eliasson`我的 Twitter 句柄换成你想使用的那个：

```
<a href="https://twitter.com/intent/tweet?screen_name=c_eliasson" class="twitter-mention-button" data-related="c_eliasson">Tweet to @c_eliasson</a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

*不过，我建议使用代码生成器，因为它为您提供了一些额外的机会来自定义它的外观和行为。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T06:11:20.757

```
 <a href="https://twitter.com/intent/tweet?screen_name=c_eliasson" class="twitter-mention-button" data-related="c_eliasson"> Tweet to @twitteralbgoom </a> <script> !function(d,s,id){ var js,fjs=d.getElementsByTagName(s)[0];

 if(!d.getElementById(id))
{ js=d.createElement(s); 
js.id=id; 
js.src="//platform.twitter.com/widgets.js";
fjs.parentNode.insertBefore(js,fjs);
}
}
(document,"script","twitter-wjs"); </script> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-20T17:32:30.910

```
<a href="https://twitter.com/intent/tweet?screen_name=c_eliasson" class="twitter-mention-button" data-related="c_eliasson">
  Tweet to @twitteralbgoom
</a>

<script>
  !function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
      js=d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script> 
```

# android - Android 逼近警报不起作用

> ID：14646512
> 
> 赞同：0
> 
> 时间：2013-02-01T12:39:51.373
> 
> 标签：android

我想向我的位置管理器添加近似警报。我给出纬度和经度，并在距离参数中给出 20。当我从模拟器中给出相同的纬度和经度时，我的近似未决意图不会触发。怎么了？

这是我的 onCreate()

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        lm = (LocationManager) getSystemService(LOCATION_SERVICE);
        lm.addProximityAlert(31.4474, 73.08, 20, -1, PendingIntent.getActivity(
                Main.this, 0, new Intent(android.content.Intent.ACTION_VIEW,
                        Uri.parse("http://www.google.com")), 0));
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new LocationListener() {

        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

        @Override
        public void onProviderEnabled(String arg0) {}

        @Override
        public void onProviderDisabled(String arg0) {}

        @Override
        public void onLocationChanged(Location arg0) {
            Toast.makeText(Main.this,arg0.getLatitude()+" "+arg0.getLongitude(), 300).show();
        }
    });
} 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.proximityalert"
    android:versionCode="1"
    android:versionName="1.0" 

>

<uses-sdk
    android:minSdkVersion="6"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.proximityalert.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:11:41.693

尝试这个 ：

```
Intent intent = new Intent(PROX_ALERT_INTENT);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

        locationManager.addProximityAlert(
            latitude, // the latitude of the central point of the alert region
            longitude, // the longitude of the central point of the alert region
            POINT_RADIUS, // the radius of the central point of the alert region, in meters
            PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration 
            proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected
       );

       IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);  
       registerReceiver(new ProximityIntentReceiver(), filter); 
```

ProximityIntentReceiver.java

```
public class ProximityIntentReceiver extends BroadcastReceiver {

    private static final int NOTIFICATION_ID = 1000;

    @Override
    public void onReceive(Context context, Intent intent) {

        String key = LocationManager.KEY_PROXIMITY_ENTERING;

        Boolean entering = intent.getBooleanExtra(key, false);

        if (entering) {
            Log.d(getClass().getSimpleName(), "entering");
        }
        else {
            Log.d(getClass().getSimpleName(), "exiting");
        }

        NotificationManager notificationManager = 
            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);       

        Notification notification = createNotification();
        notification.setLatestEventInfo(context, "Proximity Alert!", "You are near your point of interest.", pendingIntent);

        notificationManager.notify(NOTIFICATION_ID, notification);

    }

    private Notification createNotification() {
        Notification notification = new Notification();

        notification.icon = R.drawable.ic_menu_notifications;
        notification.when = System.currentTimeMillis();

        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;

        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notification.defaults |= Notification.DEFAULT_LIGHTS;

        notification.ledARGB = Color.WHITE;
        notification.ledOnMS = 1500;
        notification.ledOffMS = 1500;

        return notification;
    }

} 
```

所需权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.VIBRATE" />

private static final String PROX_ALERT_INTENT = "<your pack name>.ProximityAlert"; 
```

# html - 在 HTML 上绘制图表？

> ID：14646515
> 
> 赞同：0
> 
> 时间：2013-02-01T12:40:02.887
> 
> 标签：html, drawing, diagramming

我需要准备一个**HTML 页面**，人们可以在上面**绘制**UML、网络、bpmn 等**图表**。我研究了**MS Visio**是否可以通过这种方式与插件一起使用，但我找不到任何信息。我们还需要创建**自己的模板**，这在 Visio 中是可能的。我认为人们使用**Dojo 之**类的 js 库来实现这一点，但我想征求您的建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:44:49.167

您可以使用 html5 来实现这一点。只需谷歌“ *html5 画布绘图*”

你会看到很多样本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:42:46.220

如果您不能使用 HTML5（Canvas 和 SVG），那么您可能需要恢复使用一种基于插件的良好旧解决方案。Silverlight 是一个非常成熟和高性能的平台，尽管人们倾向于称其为支持 HTML5 已弃用 - 基于 Flash (Flex) 的解决方案也是如此，当然还有好的旧 Java 小程序也是如此。对于所有这些平台，都有可用的开源和商业支持的闭源解决方案：

[http://www.google.com/search?q=silverlight+diagramming+control](http://www.google.com/search?q=silverlight+diagramming+control)

[http://www.google.com/search?q=flex+diagramming+library](http://www.google.com/search?q=flex+diagramming+library)

[http://www.google.com/search?q=java+diagramming+library](http://www.google.com/search?q=java+diagramming+library)

# c# - 阅读所有 内的值 C# asp.net 中的标记

> ID：14646522
> 
> 赞同：0
> 
> 时间：2013-02-01T12:40:15.230
> 
> 标签：c#, jquery, asp.net, html, tags

我正在尝试读取段落中的所有值：示例

页面.ASPX

```
<div id="div1">

<p> text1 </p>
<p> text2 </p>
<p> text3 </p>

</div> 
```

我想在服务器端代码（C#）中获取值 text1、text2、text3。

顺便说一句，我需要 div 标签永远不会有 runat="server"。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:54:03.490

如果页面中有一个元素超过了第一个父服务器端元素，例如占位符或表单元素，您可以在服务器端解析（使用 HtmlAgiltyPack）它的 innerHtml。我的意思是这样的。

```
var document = new HtmlDocument();
document.LoadHtml(placeHolder.innerHtml);

var nodeToSplit = document.DocumentNode.SelectNodes("p");
var lines = nodeToSplit.SplitIntoLines(3);

foreach (var line in lines)
    Console.WriteLine(line.ToString()); 
```

您应该为自己的场景修改此代码。我希望，这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:42:56.410

尝试这个：

```
function call()
        {

            alert($("#div1").children(0).html());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:44:16.967

Jquery、JSON 和控制器/代码隐藏。提前欢迎你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:45:45.737

或者，您可以使用 HTTPWebRequest 获取 HTML 并使用 XPath 获取这些值。

# laravel - laravel 4 验证 - 验证不起作用

> ID：14646523
> 
> 赞同：0
> 
> 时间：2013-02-01T12:40:18.213
> 
> 标签：laravel, laravel-4

我已经开始使用 Laravel 4 Beta 2 并且遇到了验证问题。

我有这条路线：

```
Route::post('inscription', function()
{   
    $rules = array(
        array('nom' => 'required'),
        array('passe' => 'required')
    );
    $validator = Validator::make(Input::all(), $rules);

    if ($validator->fails())
    {
        echo var_dump(Input::all());
        $messages = $validator->messages();
        print_R($messages->all());
    }
}); 
```

当我在表单中输入值时，我得到了：

```
array (size=2)
  'nom' => string 'Dupont' (length=6)
  'passe' => string 'monpasse' (length=8)

Array ( [0] => The 0 field is required. [1] => The 1 field is required. ) 
```

告诉我字段是必需的，但有值！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:40:50.090

好的，我错了，这是正确的代码：

```
Route::post('inscription', function()
{   
    $rules = array(
        'nom' => 'required',
        'passe' => 'required'
);
$validator = Validator::make(Input::all(), $rules);

if ($validator->fails())
{
    echo var_dump(Input::all());
    $messages = $validator->messages();
    print_R($messages->all());
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:43:10.177

因为它是一个测试版，你应该在 github 上创建一个问题来为你的问题找到一个好的答案。社区很乐意为您提供帮助。

[https://github.com/laravel/framework](https://github.com/laravel/framework)

# login - PHP登录脚本

> ID：14646531
> 
> 赞同：1
> 
> 时间：2013-02-01T12:40:45.290
> 
> 标签：login

当我尝试按照浏览器上的错误消息执行 php 时，出现以下错误。请帮我解决这个问题。

解析错误：语法错误，第 5 行 /var/www/html/includes/functions.inc.php 中的意外 T_STRING

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:48:33.147

不要在引号内使用相同的引号，例如在“”内不要使用“”

```
"hello,"rohit"" 
```

会引起问题

像使用它一样`'hello,"rohit"'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:45:28.410

这意味着在第 5 行有一个脱离上下文的字符串。可能你有未转义的引号？`"fred said "have a nice day.""`应该`"fred said \"have a nice day.\""`

# c# - 无法添加对现有服务的引用。服务所需的 HTTP 标头

> ID：14646533
> 
> 赞同：0
> 
> 时间：2013-02-01T12:40:57.787
> 
> 标签：c#, soap, service, http-headers

我必须使用提供的 Java Web 服务。但问题是此服务需要自定义 HTTPHeaders。我已经寻找解决方案。如果我可以添加参考，我认为[这个会起作用。](https://stackoverflow.com/a/1310055/1380428)但是当我尝试添加对服务的引用时，出现以下错误：

> ```
> There was an error downloading 'http://.....'.
> The request failed with HTTP status 400: Bad Request.
> Metadata contains a reference that cannot be resolved: 'http://......'.
> The remote server returned an unexpected response: (400) Bad Request.
> The remote server returned an error: (400) Bad Request.
> If the service is defined in the current solution, try building the solution and adding    the service reference again. 
> ```

我认为安全服务器不允许我访问元数据。我已经尝试过MSDN 提供的[这个解决方案，并添加了如下自定义标头：](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

```
 // Create a request using a URL that can receive a post. 
    WebRequest request = WebRequest.Create("http://....");
    // Set the Method property of the request to POST.
    request.Method = "POST";
    // Create POST data and convert it to a byte array.

    string postData = string.Empty;
    using (StreamReader contentReader = new StreamReader("D:\\test.txt"))
    {
        postData = contentReader.ReadToEnd();
    }

    //Add headers to request
    request.Headers.Add("UserName", "myUserName");
    request.Headers.Add("Password", "myPassword");
    request.Headers.Add("SomeCustomHeader", "myCustomHeaderValue");

    //string postData = "This is a test that posts this string to a Web server.";
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    // Set the ContentType property of the WebRequest.
    request.ContentType = "text/xml";
    // Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length;
    // Get the request stream.
    Stream dataStream = request.GetRequestStream();
    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);
    // Close the Stream object.
    dataStream.Close();
    // Get the response.
    WebResponse response = request.GetResponse();
    // Display the status.
    Console.WriteLine(((HttpWebResponse)response).StatusDescription);
    // Get the stream containing content returned by the server.
    dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();

    using (StreamWriter resultWriter = new StreamWriter("D:\\result.xml"))
    {
        resultWriter.Write(responseFromServer);
    }

    // Display the content.
    //Console.WriteLine(responseFromServer);
    // Clean up the streams.
    reader.Close();
    dataStream.Close();
    response.Close();

    Console.ReadLine(); 
```

它对我有用。我现在可以从服务中获得结果（作为 xml 文件），而且我也有 WSDL。所以我想我可以将这个结果解析为适当的对象。但我希望能够添加服务引用并像普通服务一样使用它。我的意思是使用名称调用方法，而不是使用 SOAP 消息，并将结果作为解析的对象。有什么解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:32:01.743

您可以使用 wsdl.exe 工具创建代理类。看看这个[http://msdn.microsoft.com/en-us/library/aa529578.aspx](http://msdn.microsoft.com/en-us/library/aa529578.aspx)

# javascript - 在 IE 中收到 getElementsByClassName 错误

> ID：14646535
> 
> 赞同：0
> 
> 时间：2013-02-01T12:41:03.197
> 
> 标签：javascript, jquery

> **可能重复：**
> [我们在 javascript 中有 getElementsByClassName 吗？](https://stackoverflow.com/questions/1818865/do-we-have-getelementsbyclassname-in-javascript)

我仅在 IE 中收到以下错误，在任何其他浏览器中均未收到：

```
Object doesn't support property or method 'getElementsByClassName' 
```

所以我假设它不假设 IE 中的 getElementByClassName 。那么我的问题是在下面的示例中应该使用什么来代替它：

```
var numb = document.getElementsByClassName('num_questions'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:26:30.690

试试这个

```
var numb = $('.num_questions'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:31:04.017

[IE < 9](http://caniuse.com/getelementsbyclassname)不`getElementsByClassName`支持。

由于您使用的是 jQuery，因此您可以通过`$('.num_questions')`

# html - IFrame src 不理解#

> ID：14646540
> 
> 赞同：1
> 
> 时间：2013-02-01T12:41:20.500
> 
> 标签：html, url, iframe

嗨，我在 iframe src 的查询字符串中使用了 # 但它被截断了。

```
<IFRAME src="Test.jsp?name=check#comment"></IFRAME> 
```

它给我的名字只是“检查”而不是“检查#comment”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:48:21.643

`#`分隔[片段标识符](http://www.w3.org/DesignIssues/Fragment.html)。

如果要包含`#`在查询参数中，则需要将其正确编码为`%23`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:48:18.473

哈希标签（位于`#`URL 之后的所有内容）永远不会随请求传递给服务器。它不取决于您是否单击链接、加载 iframe 或执行 ajax 请求。

您应该编码`#`或更改值，使其不包含`#`

# r - 使用 R 求解方程

> ID：14646542
> 
> 赞同：5
> 
> 时间：2013-02-01T12:41:31.503
> 
> 标签：r, numerical-methods

我如何在 R 中以数值方式求解以下形式的方程的根：

```
f(r)=r*c+1-B*c-exp(-M(B-r)) 
```

其中 M、B 和 c 是已知常数。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:08:59.533

由于 R 无法实现此功能，您可能需要使用 Sage 等超集包。Sage 包含 R 和许多其他软件包，并且可以使用 Web 浏览器界面执行您想要的操作。该网站是[http://www.sagemath.org/](http://www.sagemath.org/)

示例位于： http: [//www.sagemath.org/doc/reference/sage/symbolic/relation.html](http://www.sagemath.org/doc/reference/sage/symbolic/relation.html)

您可以在以下位置尝试以下内容：http: [//www.sagenb.org/](http://www.sagenb.org/)

```
var('r', 'c', 'B', 'M')
f = r*c+1-B*c-exp(-M(B-r))
print solve(f, r) 
```

这样做的结果是：

r == (B*c + e^(-B + r) - 1)/c

# css - 有没有办法让 2 或 3 或 4 div 共享容器 div 的相同空间

> ID：14646543
> 
> 赞同：0
> 
> 时间：2013-02-01T12:41:34.307
> 
> 标签：css, html

这就是我试图实现的目标：div 以相等的比例共享相同的空间。三个 div 在彼此的右侧对齐。

```
<div>
    <div>
        <p>MyContentA</></p>
    </div>
    <div>
        <p>MyContentB</></p>
    </div>
    <div>
        <p>MyContentC</></p>
    </div>
</div> 
```

我正在玩这种`float`风格，但我不知道它是如何工作的……它永远不会做我想要的，元素之间总是有一条新线：我希望它们并排。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:47:21.603

**CSS**

```
.parent {width:300px; height:100px;}
.child {width:33%; float:left; height:100px; background-color:red;}
.child2 {width:33%; float:left; height:100px; background-color:green;}
.child3 {width:33%; float:left; height:100px; background-color:blue;} 
```

**HTML**

```
<div class="parent">
    <div class="child">1</div>
    <div class="child2">2</div>
    <div class="child3">3</div>
</div> 
```

示例：http: [//jsfiddle.net/7uE84/](http://jsfiddle.net/7uE84/)

您还可以将子类更改为 1 个类...我刚刚制作了 3 个，因此您可以在该父 div 中看到所有 3 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:54:01.700

CSS

```
div#container { width: 300px; height: 100px; }

div#container > div { float: left; width: 33%; height: 100%; }

/* Optional coloring */

div#one   { background: #ff0000; }

div#two   { background: #00ff00; }

div#three { background: #0000ff; } 
```

HTML

```
<div id="container">

    <div id="one">
        One
    </div>

    <div id="two">
        Two
    </div>

    <div id="three">
        Three
    </div>

</div> 
```

# java - Android上的字符串复制

> ID：14646545
> 
> 赞同：0
> 
> 时间：2013-02-01T12:41:38.493
> 
> 标签：java, android, string, dalvik

我有 android 应用程序，它从 telnet 客户端获取巨大的字符串对象。后来我只使用大字符串的一小部分。我用

`new String(Part of old string);`

将新字符串字符数组与旧字符串字符数组分开。所以旧的字符串应该被垃圾收集，但令人惊讶的是新字符串仍然有对旧对象的引用。我可以用“Eclipse Memory Analyzer”看到它。这很快就会溢出我的 16Meg 应用程序内存。

如何避免这种情况？

```
 private WifiChannel parse1(String channLine){
    //scanning with "iwlist wlan0 scanning" the getChans1 method
    String[] input = channLine.split(System.getProperty("line.separator"));
    if (input.length < 4);
    String segment[];
    String segment2[];
    WifiChannel chan = new WifiChannel();
    try {
        if (input.length > 5){
            chan.setMacAddress(new String(input[0]));
            segment = input[1].split(":");
            chan.setChannel(Integer.parseInt(segment[1].trim()));
            segment = input[3].split(" ");
            segment2 = segment[20].split("=");
            chan.setQuality(new String(segment2[1]));
            segment2 = segment2[1].split("/");
            chan.setSignalStrength((Integer.parseInt(segment2[0].trim())*100)/Integer.parseInt(segment2[1].trim())+"%");
            segment2 = segment[23].split("=");
            try{chan.setSignalLevel(Integer.parseInt(segment2[1].trim()));}catch(Exception e){chan.setSignalLevel(0);}
            segment = input[5].split(":");
            chan.setName(new String(segment[1].replaceAll("^\"|\"$", "")));
            for (int i = 6;i<input.length;i++)
                if (input[i].contains("Mode"))
                    segment = input[i].split(":");
            chan.setChannelMode(new String(segment[1]));
            String band = "";
            if(channLine.contains("5.5 Mb/s"))band = band +"b";
            if(channLine.contains("12 Mb/s") )band = band +"g";
            chan.setBand(new String(band));
        }
    }catch (Exception e){Log.e("","",e);}
    return chan;
} 
```

方法输入也是更大字符串的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:33:16.007

每个 String 实例都由一个 char 数组支持：

```
public class String {

    private final char[] value;

    ...
} 
```

由于效率原因，对字符串的某些操作可以创建一个`char[]`与原始字符串共享的新字符串实例。这是可能的，因为所有字符串都是不可变的。这方面的一个例子是`substring()`方法：

```
public String substring(int start) {
    if (start == 0) {
        return this;
    }
    if (start >= 0 && start <= count) {
        return new String(offset + start, count - start, value); // !!!
    }
    throw indexAndLength(start);
} 
```

添加了我的评论的那一行调用了一个构造函数，它不创建 的副本`char[]`，而是直接引用它。您不能直接调用此构造函数，因为它是包私有的，因此它仅在子字符串等方法内部使用：

```
/*
 * Internal version of the String(char[], int, int) constructor.
 * Does not range check, null check, or copy the character array.
 */
String(int offset, int charCount, char[] chars) {
    this.value = chars;
    this.offset = offset;
    this.count = charCount;
} 
```

现在，如果您从一个非常长的字符串创建一个短子字符串，那么这个短子字符串仍然引用原始的大`char[]`. 即使在原始字符串被垃圾回收之后，它的大数组仍然保留在内存中，即使现在只有一小部分可以被新的子字符串访问。这有效地造成了*内存泄漏*。

为了解决这个问题，通常的技术是使用复制构造函数从子字符串创建一个新字符串，它只复制原始所需范围的副本`char[]`。

```
String longString = "1234567890";
// backed by char[] of length 10

String substring = longString.substring(5);
// value is "67890", but still backed by the original char[] of length 10

String copy = new String(substring);
// also has value "67890", but now backed only by char[] of length 5 
```

**编辑：**

为了完整起见，这是复制构造函数的来源。如您所见，如果原始字符串引用了与字符串本身长度相同的数组，则不需要复制该数组，因为其中没有“死字符”。但是，如果数组大于字符串的长度，则执行数组“活动”范围的副本。

```
public String(String toCopy) {
    value = (toCopy.value.length == toCopy.count)
        ? toCopy.value
        : Arrays.copyOfRange(toCopy.value, toCopy.offset,
            toCopy.offset + toCopy.length());
    offset = 0;
    count = value.length;
} 
```

**注：** 以上所有源代码均来自Android API 15

# entity-framework - 如何在 SaveChanges 期间获取实体框架中的标识值？

> ID：14646547
> 
> 赞同：0
> 
> 时间：2013-02-01T12:41:43.673
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, entity-framework-5

我有一个基表和从属表，以及其他表。由于外键关系，当基表的标识值映射到依赖表时，EF 4.0（使用 MS VS 2010 Ultimate）表现良好。我更期待的是，应该将相同的标识值映射/复制到跟踪键/值对的未关联/不相关表中的列。例如，如果基表的第一个记录标识生成为 1，我希望将此数字复制到该键/值表中。当我尝试时，它在实体框架中的 SaveChanges() 上下文中仅插入为 0。此特定列映射到基表的列的标识属性。它就像，

> ```
> BaseTable baseTable = new BaseTable();
> // Added properties of basetable values
> KeyValueTable table = new KeyValueTable();
> table.Key = baseTable.BaseId;
> table.Value = name;
> AddToKeyValueTable(table);
> SaveChanges(); 
> ```

如果我查看 KeyValueTable，这个键被写为 0 而不是 baseTable 生成的值。我怀疑这个问题是这些表没有与关系相关联。我不应该这样做，因为钥匙也可以容纳其他桌子。

请在这部分帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:35:01.543

您无法以这种方式`value`从所需的*主键*中获取 ，因为[@@scope_identity](http://msdn.microsoft.com/en-us/library/ms190315.aspx)尚未准备好`get`。

尝试这样做

```
BaseTable baseTable = new BaseTable();
...
// Added properties of basetable values
SaveChanges();

KeyValueTable table = new KeyValueTable();
table.Key = baseTable.BaseId;
table.Value = name;
AddToKeyValueTable(table); 
```

# wpf - 将图标添加到 WPF 数据网格中

> ID：14646548
> 
> 赞同：2
> 
> 时间：2013-02-01T12:41:53.573
> 
> 标签：wpf, xaml, datagrid, icons

我想在我的数据网格的每一行中添加一个图标。这些列是自动生成的，我添加了一个带有 datagridtemplatecolumn 的列，以在第一列中显示一个图标。

这是我显示图标的 xaml 代码：

```
 <DataGrid ItemsSource="{Binding User.myDataTable}" IsReadOnly="True" FrozenColumnCount="1">
        <DataGrid.Columns>
            <DataGridTemplateColumn x:Name="IconHeader"  Header="" CanUserResize="False">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="myImage" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

效果很好。现在我想更改图标，如果在行的一列中条件为真。例如。如果第 11 列的值为“真”，则图标 1，如果值为“假”，则图标 2。

我可以使用数据网格中的 loadingrow 事件来执行此操作吗？如何使用 mvvm 执行此操作？还是有其他方法可以做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:46:31.170

这里最简单的做法是在 CellTemplate 中使用 DataTrigger，它将基于与列数据的绑定触发：

```
<DataTemplate>
    <Image Source="myImage1" x:Name="img" />
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=[11]}" Value="False">
            <Setter TargetName="img" Property="Source" Value="myImage2" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

DataRow 具有用于通过索引或名称获取列的 int 和字符串索引器，因此对于您的绑定路径，您可以使用`[]`列索引 ( `[3]`) 或列名 ( `[MyColumn]`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:56:20.093

这听起来像是转换器的工作。只需将 Image 的 Source-property 绑定到所需的 Property：

```
<Image Source="{Binding Path=BoolProp, Converter={StaticResource BoolToImageConv}}" 
```

您的转换器可能看起来像

```
public class BoolToImageConverter:IValueConverter
{
    public string FalsePath { get; set; }
    public string TruePath { get; set; }
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (System.Convert.ToBoolean(value))
        {
            return new BitmapImage(new Uri(TruePath));
        }
        return new BitmapImage(new Uri(FalsePath));
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

在您的 Window/UserControl 的资源中，您必须参考您的转换器。

```
<Window.Resources>
    <conv:BoolToImageConverter FalsePath="pathforimageiffalse" TruePath="pathforimageiftrue" x:Key="BoolToImageConv"/>
</Window.Resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:56:12.490

我相信最好的方法是实现一个 IValueConverter。如果 column11 为真，则显示一张图像，如果为假，则显示另一张图像。

IValueConverter：http: [//msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

就像是 ：

```
public class IconConverter : IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
  {
     if ((bool)value == true)
     {
        // column11 = true, so show icon 1
        return image1;
     }
     else
     {
        return image2;
     }
  }
} 
```

# php - 使用不寻常的字母/符号时，MySql 数据库无法正确存储数据

> ID：14646550
> 
> 赞同：0
> 
> 时间：2013-02-01T12:42:12.657
> 
> 标签：php, mysql, database, phpmyadmin

我有一个简单的表单，可以（通过 php）将一些变量发送到 mySql 数据库。

问题是它针对的是葡萄牙语观众，我们使用了几个不寻常的字母，比如“ç”和“ã”。每当有人使用这些字母发送数据时，phpMyAdmin 中的结果就会非常“乱码”。

字段的快速示例是“Escola de Condução Clássica”在 phpMyAdmin 中显示为“4573636f6c6120646520636f6e6475c383c2a7c383c2a36f20436c617373696361”。

我尝试将排序规则设置为“utf8_bin”，但无济于事。

有什么想法吗？

谢谢你。

编辑：字段类型为 varchar(30)，字符集显示为“utf8”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:52:25.803

更改表`mytable`转换为字符集 utf8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T09:08:29.997

我发现了问题。原来我只需要调用我的主机来更改 php 设置。我希望我事先尝试过这个，但我认为这是我的问题。此外，考虑到基于葡萄牙（欧洲）的托管，他们使用 UTF-8 以外的其他编码是没有意义的。

无论如何，如果有人收到此错误，请尝试询问主机在 php 设置中使用了哪种编码（在我的情况下应该是 UTF-8，可能对您来说不同）。

是的，这个问题花了一段时间，因为我最终忽略了它，但我最近不得不在不同的网站上做类似的事情（使用相同的主机）。

# java - 是否可以用 itext 覆盖 PDF 标题？

> ID：14646552
> 
> 赞同：0
> 
> 时间：2013-02-01T12:42:20.093
> 
> 标签：java, pdf, itext

我将一些文档合并到一个 pdf 文件中。有些页面有页眉和页脚，但不是全部。我试图从文档中删除标题，但我无法编辑文档。我只能玩pdf文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:10:35.897

是的，可以在合并过程中在所需位置绘制内容。

```
 //in merge a loop
                for (int i = 1; i <= pages; i++) 
                { 
                    PdfImportedPage page = copy.GetImportedPage(reader, i); 
                    PdfCopy.PageStamp stamp = copy.CreatePageStamp(page); 
                    PdfContentByte cb = stamp.GetUnderContent(); 
                    // use cb to draw your new content
                    stamp.AlterContents(); 
                    copy.AddPage(page); 
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:33:30.357

我假设您要合并的文档没有可预测的格式。我的意思是：你事先不知道 PDF 是否被标记，你不提前知道页眉/页脚是否是 OCG 的一部分，你不提前知道是否定义了额外的页面边界，你不知道'事先不知道页眉/页脚是否存储在单独的 XObject 等中...

您尝试合并的 PDF 很可能是带有传统内容流的传统 PDF。在这种情况下，页眉/页脚的定义可以在页面内容流中的任何位置，并且 PDF 没有任何关于它们存在的概念。就 PDF 文档而言，标题是在页面上绘制的一串单词、路径和形状，就像内容的任何其他部分一样。例如：PDF 无法区分标题或章节标题。

所以请澄清：页眉/页脚是否定义为工件？他们是否以任何方式标记？等等......如果没有，您应该了解您的要求不可能满足任何库，包括 iText。

# java - 相同视图 ID PrettyFaces 的不同规则

> ID：14646555
> 
> 赞同：2
> 
> 时间：2013-02-01T12:42:38.997
> 
> 标签：java, jsf-2, prettyfaces

我有一个接收 2 到 6 个参数的 jsf 页面，我想让这个 url 看起来更好，所以我开始使用漂亮的面孔。当我为 2 个参数创建规则时，一切正常，但是当我创建第二个规则时，页面也可以正常工作，url 正确，但我在 Eclipse 控制台中收到错误消息。我认为这是因为我正在尝试为相同的 view-id 创建一个规则……这可能吗？

漂亮的配置：

```
 <url-mapping id="departamento">
   <pattern value="/#{codDep}/#{departamento} " />
   <view-id value="/departamento.jsf" />
  </url-mapping>

 <url-mapping parentId="departamento" id="sessao">
  <pattern value="/#{codSec}/#{secao}" />
  <view-id value="/departamento.jsf" />
 </url-mapping> 
```

控制台错误：

```
java.lang.NumberFormatException: For input string: "javax.faces.resource"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:492)
at java.lang.Integer.parseInt(Integer.java:527)
at project.Controller.inicializar(Controller.java:82) 
```

控制器方法：

```
 public void inicializar(ComponentSystemEvent event)
{
FacesContext context = FacesContext.getCurrentInstance();
if (!context.isPostback())
{

    departamento = new Departamento(Integer.parseInt(codigoDepartamento), descricaoDepartamento, null, null);
    }
  } 
```

问题是它不应该传递这个参数“javax.faces.resource”，有时是“css”，我什至不知道它来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:57:31.227

我猜这是因为 JSF 资源请求（包含`javax.faces.resource`）与您的一种模式匹配。PrettyFaces 拦截请求并将请求路径的一部分写入您的 bean。

你必须改变你的模式，使它只匹配你想要的 URL，而不是像 JSF 资源、CSS 或图像文件这样的东西。您可以像这样添加一些唯一的固定字符串前缀`/dep/`：

```
<url-mapping id="departamento">
  <pattern value="/dep/#{codDep}/#{departamento} " />
  <view-id value="/departamento.jsf" />
</url-mapping> 
```

或者限制路径参数允许的值。如果`codDep`例如是一个数字，你可以使用这个：

```
<url-mapping id="departamento">
  <pattern value="/#{ /[0-9]+/ codDep }/#{departamento} " />
  <view-id value="/departamento.jsf" />
</url-mapping> 
```

有关详细信息，请参阅 PrettyFaces 文档的这一部分：

[http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/Configuration.html#config.pathparams.regex](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/Configuration.html#config.pathparams.regex)

# sql - SQL 创建表在列中使用 %type

> ID：14646561
> 
> 赞同：6
> 
> 时间：2013-02-01T12:42:59.713
> 
> 标签：sql, oracle, declaration

我正在尝试为我的一个表创建一个备份表（在一个函数中），

```
CREATE TABLE TBTestBackup
           (
             colum1           user.TBTest.colum1%type,
             colum2           user.TBTest.colum2%type,
             colum3           user.TBTest.colum3%type
             colum31           user.TBTest.colum3%type, --new column with same type as colum3
             colum4           user.TBTest2.column15type, --column from other table
             colum4           CHAR    (12 BYTE), --new column with fixed type
           ) TABLESPACE user_DATA 
```

但是我把这行不通了，现在我的问题是我怎样才能让它尽可能地动态化，这样我就不必每次更改数据类型时都在备份脚本中更新数据类型，例如：

`VARCHAR2(24 CHAR)`至`VARCHAR2(50 CHAR)`

（表列是固定的，它们不会改变）这不会经常发生，但我们不得不这样做一些时候，因为该字段对于特定值来说不够大，然后没有人更新备份表和 id 给出了一些错误.

编辑：我忘记了一些必要的事情：

*   我必须添加 2 个不在原始表中的列，但应具有与现有表之一相同的数据类型。我可以使用 select as 所以它的类型相同但名称不同吗？如果是，我该怎么做？
*   和一些来自不同表的字段（所以我必须使用连接）

和：

*   具有来自多个表的类型的多个列
*   具有固定类型的新列
*   具有变量类型的新列，例如表 ABC 中的列 XY

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:41:45.567

根据您更新的要求，根据这两个表中的类型创建一个表：

```
create table t1 (col1 number, col2 varchar2(2), col3 date);
create table t2 (col1 varchar2(10 char)); 
```

您可以将它们连接在一起，并使用一个始终评估为 false 的过滤器，正如 Orangecrush 建议的那样：

```
create table tb tablespace users as
select t1.col1 as col1, t1.col2 as col2, t1.col3 as col3,
    t1.col3 as col4, t2.col1 as col5, cast(null as varchar2(12 byte)) as col6
from t1
cross join t2
where null is not null; 
```

通常 a`cross join`是不受欢迎的，但优化器足够聪明，可以意识到过滤器意味着它根本不需要实际命中表。当然，如果有可以加入的字段，则可以使用普通的内部联接。

```
desc tb

Name Null Type              
---- ---- ----------------- 
COL1      NUMBER            
COL2      VARCHAR2(2)       
COL3      DATE              
COL4      DATE               -- new column with same type as t1.col3
COL5      VARCHAR2(10 CHAR)  -- column from other table
COL6      VARCHAR2(12)       -- new column with fixed type 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T12:47:31.737

您可以使用该语句来创建备份。

```
CREATE TABLE TBTestBackup AS SELECT * FROM ORIGINAL_TABLE_NAME WHERE 1=2; 
```

这是假设您不想要备份表中的数据。如果您也需要数据，只需`WHERE`从上述语句中删除条件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T12:46:30.060

您可以使用以下命令创建表：

```
CREATE TABLE TBTestBackup AS 
SELECT colum1, column2, column2
FROM user.TBTest 
```

根据您的编辑：您可以将 select 语句更改为您喜欢的任何内容。连接两个表，从一个表中选择 3 列，从另一个表中选择 2 列

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T12:50:07.277

语法是

```
CREATE TABLE TBTestBackup as (SELECT * FROM TBTest) 
```

不确定如何自动更改数据类型，但无论如何它不应该经常更改（如果确实需要这样做）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T13:09:48.910

听起来[物化视图](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm)可以满足您的需求。

```
create materialized view my_backup
tablespace whatever
nologging
build immediate
refresh complete on demand
as
select t.* 
from some_table t; 
```

当您想刷新备份时，请在 mat 视图上进行完全刷新：

```
exec dbms_mview.refresh('MY_BACKUP', 'C', atomic_refresh=>false); 
```

另请注意，这不能替代[RMAN](http://docs.oracle.com/cd/B28359_01/server.111/b28294/rman.htm)或 DBA 用于执行备份的其他工具，但符合您的要求。

另请注意，您可以根据需要轻松地将额外的列添加到查询中。

# c# - 为什么在 finally 块中不允许等待？

> ID：14646563
> 
> 赞同：10
> 
> 时间：2013-02-01T12:43:14.890
> 
> 标签：c#, async-await, c#-5.0

为什么`await`不允许在一个`finally`块中？

```
public async void Fn()
{
    try
    {
    }
    finally
    {
        await Task.Delay(4000);
    }
} 
```

知道可以`Awaiter`手动获取

```
public void Fn()
{
    try
    {
    }
    finally
    {
        var awaiter = Task.Delay(4000).GetAwaiter();
     }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T12:53:28.380

摘自：[*我在哪里不能使用“等待”？*](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx#14)

> 在 catch 或 finally 块内。您可以在 try 块内使用“await”，无论它是否具有关联的 catch 或 finally 块，但您不能在 catch 或 finally 块内使用它。 **这样做会破坏 CLR 异常处理的语义。**

**这在 C# 6.0 中显然不再适用**

取自：[*AC# 6.0 语言预览*](http://msdn.microsoft.com/en-us/magazine/dn683793.aspx)

> C# 6.0 消除了这个缺陷，现在允许在 catch 和 finally 块中调用 await（它们已经在 try 块中得到支持）

# c++ - strncmp 没有正确匹配

> ID：14646565
> 
> 赞同：0
> 
> 时间：2013-02-01T12:43:20.933
> 
> 标签：c++, c, strncmp

我不知道如何在 C 中使用字符串：

这是我服务器的一部分：即使我通过 telnet 提供字符“/”，也不会调用中断。

理想情况下，这将通过一次又一次地向它添加字符串 ch 来缓冲名为 get 的字符串，直到它到达某个字符，或者更好的是，一个字符串（但现在写它应该与一个字符一起工作，但我'我很想知道如何用字符串来做，所以我可以设计一个使用 CR+LF 作为分隔符的协议）。

```
 char ch;
    int index = 0;
    char get[1024];
    const char str[] = "/";

    if ( read( client, &ch, 1 ) < 0 )
    {
        perror( "read" );

        get[index] = ch;
        index++;

        int compareResult = strncmp(str, &ch, 5);

        if(compareResult == 0){
            index = 0;
            close( client );
            printf( "server responded, connection closed" );
            break;
        }
    }

    //if ( write( client, &ch, 1 ) < 0 ) { perror( "write" ); break; }

    printf( "got stuff" ); 
```

为什么达不到

```
printf( "server responded, connection closed" ); 
```

线？

服务器的完整代码：http: [//pastebin.com/j5tX3TEx](http://pastebin.com/j5tX3TEx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:49:55.963

这个：

```
int compareResult = strncmp(str, &ch, 5); 
```

调用未定义的行为。您将`&ch`, 单个的地址传递`char`给期望*字符串*指针的函数。所以，它会从 的地址开始最多查看 5 个字符`&ch`，当然这只是数据的*一个*字符。

您的整个读取逻辑非常奇怪，它应该进行更大的读取，而不是一次读取一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:49:05.037

线

```
int compareResult = strncmp(str, &ch, 5); 
```

是不正确的

ch 是一个字符，但您比较 5 个字符。第二个参数必须是字符串而不是字符。

如果这是一个错字，并且您的意思是，`get`那么您需要在收到最后一个字符后 \0 终止字符串才能`get`用作参数。或者用于`memcmp`比较字节，无论它们是否为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:49:13.123

试试这个，看看。好像您正在将 char (str) 数组与 char (ch) 进行比较

```
if(ch == '/'){
    index = 0;
    close( client );
    printf( "server responded, connection closed" );
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:49:26.943

你可以这样做：

```
if(ch == '/'){
      index = 0;
      close( client );
      printf( "server responded, connection closed" );
      break;
} 
```

这也比使用函数（例如`strncmp`）更快

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:49:37.490

```
read( client, &ch, 1 ) < 0 
```

为什么`< 0`？一切似乎都在您的代码中完成，而 read 返回读取的字节数。

# .htaccess - Apache 文件夹中的子域（MAMP 安装）

> ID：14646567
> 
> 赞同：3
> 
> 时间：2013-02-01T12:43:27.260
> 
> 标签：.htaccess, mamp, domain-name

我在 OS X Mountain Lion 上安装了 MAMP，它运行良好。MAMP 没有问题，只是我网站的 .htaccess

我添加了一个域 www.mycity1.localhost，它被添加到 HOSTS 文件中，并且该站点运行良好。

我如何从文件夹中创建子域，因为我有三个文件夹：

伦敦

曼彻斯特

诺里奇

而不是[http://www.mycity1.localhost/london](http://www.mycity1.localhost/london)，我怎样才能让 URL 成为[http://london.mycity1.localhost](http://london.mycity1.localhost)（以及其他示例）。

我有我的 .htaccess

```
RewriteEngine on 
```

但我不确定如何做到这一点。

这些都存储在 /Applications/MAMP/htdocs/www.mycity1.localhost 作为目录。

感谢您提供任何帮助，因为当我实际将这些在线移动到我的正确站点（目前离线）时，它将很有用。

*   请注意，尽管这些域被超链接，但它们将**不起作用**，因为它们（显然）仅限本地主机。

# ios - 仅使用 Apple 地图获取路线

> ID：14646574
> 
> 赞同：1
> 
> 时间：2013-02-01T12:43:45.910
> 
> 标签：ios, map, navigation, mkpinannotationview, apple-maps

我的应用程序中有一个地图视图，我正在使用苹果地图，我[**在这里**](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html)读到 Mapkit 可以提供方向详细信息，就像在 Mapview 上我使用当前位置和纬度/经度一样，我希望用户可以从中获取行车路线他当前的位置到他输入的指定纬度/经度，这样当我点击按钮方法或标注方法时，他可以在 nextview 上轻松获取行车方向路线......

`-(void)getDirection`

所以在下一个视图中它应该向我显示到那个地方的行车路线，请任何人帮助我解决这个问题我是一个初学者，我从来没有对 mapview 做过那么多，任何人都可以给我一些提示或代码对我很有帮助的片段。[**或者如果我可以做这样**](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497)的事情，但我不知道如何用我的项目做到这一点。

![在此处输入图像描述](../Images/e5d9d6da24e6ee613238249590bef4e8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:20:24.737

使用此代码前两个是目的地纬度经度其他是源代码此代码重定向您在苹果地图上并显示路线（如果可用）。

```
 NSString *urlString = [NSString stringWithFormat:@"http://maps.apple.com/?daddr=%f,%f,&saddr=%f,%f",_desLatitude,_desLongitude,_latitude,_longitude];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T04:55:36.347

```
 if (SYSTEM_VERSION_LESS_THAN(@"6.0")) {
       NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%1.6f,%1.6f&saddr=%1.6f,%1.6f",pin_lat,pin_long,mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];

        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];
    }

    else {
        NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%1.6f,%1.6f&saddr=%1.6f,%1.6f",pin_lat,pin_long,mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];
        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];

    }   
}
else if ([buttonTitle isEqualToString:@"Google Maps"]) {
    NSLog(@"Other 2 pressed");
    //choose existing

    if (SYSTEM_VERSION_LESS_THAN(@"6.0")) {
        NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%1.6f,%1.6f&saddr=%1.6f,%1.6f",pin_lat,pin_long,mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];

        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];
    }

    else {
        NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%1.6f,%1.6f&saddr=%1.6f,%1.6f",pin_lat,pin_long,mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];
        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];

    }

} 
```

其中 pin_lat 和 pin_long 是包含 place 值的浮点值。

# windows - 捕获输出命令 CMD

> ID：14646575
> 
> 赞同：1
> 
> 时间：2013-02-01T12:43:47.243
> 
> 标签：windows, batch-file, windows-xp, cmd

平台 Windows XP

在编写命令文件（.bat）时，我如何将命令的输出“捕获”到变量中？

我想做这样的事情

```
SET CR='dir /tw /-c b.bat | findstr /B "[0-9]"' 
```

但这不起作用

问候斯特凡

*PS不，我不能下载grep，cygwin或任何其他软件，它必须是CMD DS*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:51:26.497

您可以`for /f`为此使用：

```
for /f %%L in ('dir /tw /-c b.bat ^| findstr /b "[0-9]"') do set CR=%%L 
```

不过，这假设只有一行输出。您不能（微不足道或有用地）在一个变量中捕获多于一行。

不过，我只能猜测您在这里*真正*想要做什么。如果您需要文件大小（只是猜测`/-c`），那么它肯定更容易使用

```
for %%X in (b.bat) do set size=%%~zX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:55:20.140

您可以使用`FOR /F`并通过批处理文件中的一些循环来捕获输出：

```
@echo off
setlocal enabledelayedexpansion
set var=
for /f "tokens=* delims=" %%i in ('dir /tw /-c b.bat ^| findstr /B "[0-9]"') do set var=!var!^

%%i

echo %var% 
```

**`!var!^`尤其重要的是在和`%%i`下面之间有两个换行符。**

此外，您需要转义（再次使用`^`）命令行中`FOR`对 shell 具有特殊含义的所有字符，例如本例中的管道。

该解决方案通过迭代命令的输出并将每一行附加到`var`增量的内容来工作。为了以某种方便的方式执行此操作，脚本启用延迟变量扩展（`!var!`语法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:54:18.300

你可以设置一个你退出的错误[级别](http://www.robvanderwoude.com/errorlevel.php)，你可以在你的批处理文件中询问一个命令的退出代码。我不确定这是你的意思，但我希望它有所帮助。

# objective-c - Objective-C中的单例，兼容ARC和线程安全

> ID：14646576
> 
> 赞同：1
> 
> 时间：2013-02-01T12:43:52.553
> 
> 标签：objective-c, singleton, automatic-ref-counting

我想要一个线程安全、与 ARC 兼容的单例，但在我看来，这是我发现的最常见的单例示例，此处粘贴了一个示例：

```
+ (MyClass *)sharedInstance
{
    static MyClass *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[self alloc] init];
        // Do any other initialisation stuff here
    });
    return sharedInstance;
} 
```

不会阻止其他开发人员调用 [[MyClass alloc] init] 并覆盖所需的流程。处理它的正确方法是什么（除了在init中抛出异常）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:05:45.967

您还必须重写该`+alloc`方法以避免分配多个单例实例。

**编辑#3：** *嗯，我**真的**知道官方文档中关于覆盖该* `+alloc` *方法的内容，但是要实现所要求的好处，没有办法避免它。我个人不同意这样做，但它可以提供预期的结果。*

它会是这样的：

```
static MyClass *_sharedInstance = nil;
static BOOL _bypassAllocMethod = TRUE;

+ (id)sharedInstance {
    @synchronized([MyClass class]) {
         if (_sharedInstance == nil) {
              _sharedInstance = [[MyClass alloc] init];
         }
    }
    return _sharedInstance;
}

+ (id)alloc {
    @synchronized([MyClass class]) {
         _bypassAllocMethod = FALSE; // EDIT #2
         if (_sharedInstance == nil) {
              _sharedInstance = [super alloc];
              return _sharedInstance;
         } else {
              // EDIT #1 : you could throw an exception here to avoid the double allocation of the singleton class
              @throw [NSException exceptionWithName:[NSString stringWithFormat:@"<%@: %p> Double allocation issue", [_sharedInstance class], _sharedInstance] reason:@"You cannot allocate the singeton class twice or more." userInfo:nil];
         }
    }
    return nil;
}

// EDIT #2 : the init method
- (id)init {
    if (_bypassAllocMethod)
        @throw [NSException exceptionWithName:@"invalid allocation" reason:@"invalid allocation" userInfo:nil];

    if (self = [super init]) {
    }

    return self
} 
```

* * *

**编辑#1**

您绝对不需要在这里抛出异常，但是对于他们以错误方式使用您的类的开发人员来说，这比发回简单的`nil`指针要多得多的视觉反馈。

**编辑#2**

我添加了一个简单的技巧来避免开发人员实例化该类以绕过修改后的`+alloc`方法，在这种情况下分配将正常工作，但`-init`会引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:03:43.940

使用 Borg 模式而不是 Singleton 模式：允许类的多个实例化并让实例共享相同的静态状态。

```
// Shared data
static NSDictionary *sharedData = nil;

+ (void) initialize {
  // Initialize shared data
  sharedData = [[NSDictionary alloc] init];
}

- (id) init {
  self = [super init];

  if (self) {
    self.data = sharedData;
  }
} 
```

这样，客户端可以任意使用静态`getInstance`方法或`init`方法，并接收共享相同状态的对象。他们甚至不需要意识到这是一个单例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T20:23:28.993

我倾向于使用以下内容：（使用更新的`instancetype`编译器语法）

```
@implementation MyClass

+ (instancetype)myClass {
  static MyClass *singleton; // keep global variables in the most minimal scope

  if (singleton == nil) @synchronized (self) {
    singleton = [[MyClass alloc] initPrivate];
  }

  return singleton;
}

- (instancetype)initPrivate { // ARC requires the method start with "init…"
  self = [super init];

  return self;
}

- (instancetype)init {
  return nil;
}

@end 
```

这也不会**阻止**其他人调用`[[MyClass alloc] privateInit]`，但会警告他们（除非他们编写自己的静默代码）。

如果有人打电话，这也会泄漏 pre-ARC `[[MyClass alloc] init]`- 但如果发生这种情况，你会遇到更大的问题。或者，您可以在调用 init 时抛出异常。（如holex的回答）

此外，理论上子类可能会进入竞争状态。如果您担心更改`@synchronized (self)`为`@synchronized ([McClass class])`. 我更喜欢更简洁的`self`代码，而且我知道不会有子类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:06:11.757

将实例转换为类方法并将 Class 对象用作单例。

例如你有一个像这样的单例类

```
@interface MySingleton {
    int count;
}

+ (MySingleton *)sharedInstance;
- (int)getNext;

@end 
```

我建议您将其转换为

```
@interface MySingleton

+ (int)getNext;

@end 
```

在 MySingleton.m

```
static int count; 
```

然后你可以像使用它一样

```
[MySingleton getNext]; 
```

或者

```
id obj = [MySingleton class]; // Class objects are singleton provided by runtime
[obj getNext]; 
```

* * *

**编辑**

我只想指出，单例模式已经有很多 ObjC 实现。

[http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html) [https://github.com/fadingred/objc-singleton](https://github.com/fadingred/objc-singleton)

简单的谷歌搜索会找到它们。一切都考虑在内。（远远超出我的预期）

# sql - 强制零出现在计数中

> ID：14646577
> 
> 赞同：2
> 
> 时间：2013-02-01T12:43:52.417
> 
> 标签：sql, sql-server, tsql, sql-server-2012

以下代码采用一个包含车辆名称的表和一个包含区域名称的表，并将它们组合成一个结果表。然后我对结果表执行 COUNT 以显示每个区域有多少车辆。

我需要修改代码以强制计算所有地区和所有车辆。目前 COUNT 语句不显示任何不包含车辆的区域（我已从结果中手动删除了一些条目以显示这一点）。谁能说明一个快速的方法来做到这一点？我正在使用 SQL 2012，并希望有一个简单的解决方案......

![在此处输入图像描述](../Images/424374849f3ef67db4c960d9030facf5.png)

为了回答这个问题，请假设两个原始表不再可访问，我们现在只使用@tbl_results。谢谢你。

注意：我知道我可以直接从车辆和区域表中执行此操作，但我需要在实际工作中为其他流程使用结果表变量。

```
DECLARE @tbl_vehicles TABLE (vehicleID int, vehicleName nvarchar(100))
DECLARE @tbl_regions TABLE (regionID int, regionName nvarchar(100))
DECLARE @tbl_results TABLE (regionID int, regionName nvarchar(100), vehicleID int, vehicleName nvarchar(100))

INSERT INTO @tbl_regions (regionID, regionName) VALUES (1, 'England')
INSERT INTO @tbl_regions (regionID, regionName) VALUES (2, 'United States')
INSERT INTO @tbl_regions (regionID, regionName) VALUES (3, 'Arctic')

INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (1, 'Planes')
INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (2, 'Trains')
INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (3, 'Automobiles')

DECLARE @i INT
SET @i = 0 

WHILE @i < 100
    BEGIN
        INSERT INTO @tbl_results
            (regionID, regionName, vehicleID, vehicleName) 
        SELECT
            r.regionID, r.regionName, v.vehicleID, v.vehicleName 
        FROM
            @tbl_regions r CROSS JOIN
            @tbl_vehicles v 
        WHERE
            (r.regionID = CAST(RAND() * 4 AS INT)) AND
            (v.vehicleID = CAST(RAND() * 4 AS INT)) 
        SET @i = @i + 1
    END

-- remove trains in the arctic for count example
DELETE FROM @tbl_results WHERE (regionID=3) AND (vehicleID=2)

-- this statement needs to include ALL vehicles and ALL regions (even if no vehicles are found at a region)
SELECT 
    regionName,
    vehicleName,
    COUNT(*) as VehicleCount
FROM
    @tbl_results 
GROUP BY
    regionID,
    regionName,
    vehicleID,
    vehicleName
ORDER BY regionName, vehicleName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:46:33.357

```
SELECT  r.regionName
,       v.vehicleName
,       COUNT(res.vehicleName) as VehicleCount
FROM    (
        select  distinct regionName
        from    @tbl_results
        ) r
CROSS JOIN 
        (
        select  distinct vehicleName
        from    @tbl_results
        ) v
LEFT OUTER JOIN
        @tbl_results res
ON      r.regionName = res.regionName
        AND v.vehicleName = res.vehicleName
GROUP BY
        r.regionName
,       v.vehicleName
ORDER BY
        r.regionName
,       v.vehicleName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:47:52.623

尝试这个：

```
DECLARE @tbl_vehicles TABLE (vehicleID int, vehicleName nvarchar(100))
DECLARE @tbl_regions TABLE (regionID int, regionName nvarchar(100))
DECLARE @tbl_results TABLE (regionID int, regionName nvarchar(100), 
                            vehicleID int, vehicleName nvarchar(100))

INSERT INTO @tbl_regions (regionID, regionName) VALUES (1, 'England')
INSERT INTO @tbl_regions (regionID, regionName) VALUES (2, 'United States')
INSERT INTO @tbl_regions (regionID, regionName) VALUES (3, 'Arctic')

INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (1, 'Planes')
INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (2, 'Trains')
INSERT INTO @tbl_vehicles (vehicleID, vehicleName) VALUES (3, 'Automobiles')

DECLARE @i INT
SET @i = 0 

WHILE @i < 100
    BEGIN
        INSERT INTO @tbl_results
            (regionID, regionName, vehicleID, vehicleName) 
        SELECT
            r.regionID, r.regionName, v.vehicleID, v.vehicleName 
        FROM
            @tbl_regions r CROSS JOIN
            @tbl_vehicles v 
        WHERE
            (r.regionID = CAST(RAND() * 4 AS INT)) AND
            (v.vehicleID = CAST(RAND() * 4 AS INT)) 
        SET @i = @i + 1
    END

-- remove trains in the arctic for count example
DELETE FROM @tbl_results WHERE (regionID=3) AND (vehicleID=2)

-- this statement needs to include ALL vehicles 
-- and ALL regions (even if no vehicles are found at a region)
SELECT 
    R.regionName,
    VE.vehicleName,
    ISNULL(COUNT(RES.regionID),0) as VehicleCount
FROM @tbl_regions R
CROSS JOIN @tbl_vehicles VE
LEFT JOIN @tbl_results RES
    ON R.regionID = RES.regionID AND VE.vehicleID = RES.vehicleID
GROUP BY
     R.regionName,
    VE.vehicleName
ORDER BY R.regionName, VE.vehicleName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:18:16.817

我会这样做：

```
WITH VehicleRegions AS
(
  SELECT
    *
  FROM
    tbl_vehicles,
    tbl_regions
 )
SELECT 
  VehicleRegions.VehicleName,
  VehicleRegions.RegionName,
  COUNT(tbl_results.regionID)
FROM
  VehicleRegions
  LEFT JOIN tbl_results ON VehicleRegions.VehicleID = tbl_results.VehicleID AND VehicleRegions.RegionID = tbl_results.RegionID
GROUP BY
  VehicleRegions.VehicleName,
  VehicleRegions.RegionName 
```

见[小提琴](http://www.sqlfiddle.com/#!3/fadce/3)

在小提琴中，我使用了表而不是表变量，但这个想法是成立的。创建一个包含所有车辆和区域对的公用表表达式。然后做一个计数（结果。[AnyColumn]）。如果您执行 Count(*)，则结果中的 NULL 值将被计算在内。你不想要那个。您只想计算结果包含值的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:13:53.970

您可以通过结合使用 left join 和 isNull 来实现您的目标。总体思路如下：

```
select f1, f2, isNull(count(*), 0) records
from t1 left join t2 on something
where whatever
group by f1, f2 
```

您可以添加详细信息。

# java - 如何获取未选择元素的列表？

> ID：14646579
> 
> 赞同：0
> 
> 时间：2013-02-01T12:43:57.107
> 
> 标签：java, list

我有两个arrayLists `readAllNames`，另一个是`selectedNames`.现在我想获得另一个有`unSelectedNames`.ex的列表。

```
List<Name>readAllNames = {"a","b","c","d","e","f","g"};
List<Name>selectedNames = {"a","b"}; 
```

我怎样才能得到： `unSelectedNames`{"c","d","e","f","g"} 从`readAllNames`？

不使用`remove()`And`removeAll()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:51:26.530

```
List<String> unread = new ArrayList<String>();
for(String s : readAllNames ){
    if(!selectedNames.contains(s))
        unread.add(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:50:48.337

如果你不想使用`remove()`/`removeAll()`你总是可以遍历`readAllNames`每个元素并检查它是否被`contains()`'ed in`selectedNames`和如果没有添加到`unselectedNames`.

但你*真的*应该使用`removeAll()`; 向我们展示您的`Name`课程，我们可能会告诉您出了什么问题（提示：阅读`equals()`和`hashCode()`语义wrt。`Collection`操作。）

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:57:14.737

```
ArrayList<Name> unselectedName = new ArrayList<String>();
for(Name s: readAllNames){
    if(!selectedNames.contains(s)){
        unselectedName.add(s);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:11:50.967

尝试这个

```
List<Name>readAllNames = {"a","b","c","d","e","f","g"};
List<Name>selectedNames = {"a","b"};
List<Name>unselectedNames = null;
Collections.copy(unselectedNames , readAllNames);
unselectedNames.removeAll(selectedNames); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:46:24.793

为什么不看一下源代码`remove()`并使用它呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T13:02:26.603

尝试这个：

```
List<String> unSelectedNames = new ArrayList<String>(readAllNames);
unSelectedNames.removeAll(selectedNames); 
```

您不必触摸原件`List`，只需触摸它的副本。

# javascript - JQuery 选择器比 DOM 属性更安全吗？

> ID：14646582
> 
> 赞同：5
> 
> 时间：2013-02-01T12:44:03.847
> 
> 标签：javascript, jquery

这两个表达式做同样的事情，但哪一个更安全或更有效？

```
var indexedCellValue = selectedCell.srcElement.parentElement.cells[index].innerText;

var indexedCellValue = $(selectedCell.srcElement).parent('tr').get(0).cells[index].innerText; 
```

（获取单元格、选定单元格、父行和索引到该父行上的列。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:49:46.713

纯 JavaScript 总是比 jQuery 快，但是使用 jQuery，您可以确保代码在大多数浏览器中都能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:30:42.547

使用 jQuery，您只选择具有`tr`父级的元素。我还认为纯 javascript 版本适用于 firefox 9+，但不适用于较旧的版本。

在幕后，如果你看一下 jQuery 的源代码，在`parent()`（第 5666 行，从版本 1.9.0 开始）的定义：

```
parent: function( elem ) {
    var parent = elem.parentNode;
    return parent && parent.nodeType !== 11 ? parent : null;
}, 
```

您会看到它不使用`parentElement`，但是`parentNode`，浏览器更支持它（主要不是旧版本的 Firefox，实际上在版本 9 之前它不支持它，如果您想知道两者的区别，请参阅此答案：[DOM parentNode 和 parentElement 之间的区别](https://stackoverflow.com/questions/8685739/difference-between-dom-parentnode-and-parentelement)）。

它还检查节点是否为 a `DOCUMENT_FRAGMENT_NODE`（坦率地说，我不知道为什么会这样，如果有人知道我会感兴趣的话）。

在不支持旧浏览器的 2.0 开发分支上（感谢 pimvdb），他们切换到 parentElement（[减少遍历模块 - 提交](https://github.com/jquery/jquery/commit/65bdfbf07f911d5014e32ab126ef0c568c22bf49#L0R137)）：

```
parent: function( elem ) {
    return elem.parentElement;
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:17:13.193

这是一个优化的 JQuery 解决方案

```
var indexedCellValue = $($(selectedCell.srcElement).parent('tr').children()[index]).text(); 
```

不使用 parentElement、单元格或 innerText。

谢谢您的帮助。

# php - DateTime 错误结果（潜在错误？）

> ID：14646583
> 
> 赞同：0
> 
> 时间：2013-02-01T12:44:04.320
> 
> 标签：php, datetime

作为一个错误的验证，有人可以用他的 php 测试这个：

```
$timeZone = new DateTimeZone('Europe/Berlin');
$startDate = new DateTime('first day this month 00:00:00', $timeZone);
echo $startDate->format('d.m.Y'); 
```

结果：

```
02.02.2013 
```

我已经用 php 5.2 和 PHP 5.3 对其进行了测试，结果相同......

作为“解决方案”，最好的替代方法是什么？

```
$timeZone = new DateTimeZone('Europe/Berlin');
$startDateAlt = new DateTime('now', $timeZone);
$startDateAlt->setTimestamp(mktime(0, 0, 0, date("m") , 1, date("Y"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:51:23.560

我认为你错过*了*in `first day this month`。尝试：

```
$timeZone = new DateTimeZone('Europe/Berlin');
$startDate = new DateTime('first day of this month 00:00:00', $timeZone);
echo $startDate->format('r') . PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:51:40.987

您省略了`of`，因此它将其解析为其他内容：

```
$timeZone = new DateTimeZone('Europe/Berlin');
$startDate = new DateTime('first day of this month 00:00:00', $timeZone);
echo $startDate->format('d.m.Y'); 
```

返回

```
01.02.2013 
```

如果由于某种原因这不起作用（您的评论中似乎是旧的 php 版本），您可以试试这个吗？有点黑客可能......

```
$startDate = new DateTime();
$days = $startDate->format('d');
$days = $days - 1;
$startDate->modify("-{$day} days");
$startDate->setTime(0,0,0);
echo $startDate->format('d.m.Y'); 
```

# storage - 在文件系统级别确定 PostgreSQL 中表的实际文件名

> ID：14646584
> 
> 赞同：2
> 
> 时间：2013-02-01T12:44:06.777
> 
> 标签：storage, filenames, postgresql-9.1

我正在使用以下代码来确定我在 postgresql 中的数据库中每个表的磁盘大小：

```
 SELECT pg_size_pretty(pg_total_relation_size('"my_schema"."my_table"')); 
```

我想我应该找到每个表的实际文件名以获得确切的磁盘大小。有人知道如何在文件系统级别确定实际文件名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:54:15.117

像这样的东西：

```
select t.relname, current_setting('data_directory')||'/'||pg_relation_filepath(t.oid)
from pg_class t
  join pg_namespace ns on ns.oid = t.relnamespace
where relkind = 'r'
and ns.nspname = 'public'; 
```

如果涉及多个表空间，我不是 100% 这将显示正确的路径。

# sql - 将插入与选择语句合并

> ID：14646585
> 
> 赞同：11
> 
> 时间：2013-02-01T12:44:07.383
> 
> 标签：sql, sql-server, merge, sql-server-2008-r2

这对我有用

```
MERGE Table1 AS tgt
USING
(
    SELECT
        TOP 1
        *
    FROM
        Table2,
        (
            SELECT
                itmid
            FROM
                Table3
            WHERE
                id = @id
        ) as a
    WHERE
        id = @id
) AS src
ON ( tgt.id = src.id )
WHEN MATCHED THEN
    UPDATE SET qty = qty + @qty
WHEN NOT MATCHED THEN
    INSERT itmid
    VALUES itmid; 
```

但是当我这样改变时，它不起作用，最后显示错误`select`

```
MERGE Table1 AS tgt
USING
(
    SELECT
        TOP 1
        *
    FROM
        Table2
    WHERE
        id = @id
) AS src
ON ( tgt.id = src.id )
WHEN MATCHED THEN
    UPDATE SET qty = qty + @qty
WHEN NOT MATCHED THEN
    INSERT itmid
    SELECT itmid FROM Table3 WHERE id = @id; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T13:14:04.427

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb510625.aspx)

```
<merge_not_matched>::=
{
    INSERT [ ( column_list ) ] 
        { VALUES ( values_list )
        | DEFAULT VALUES }
} 
```

`INSERT` *from* 的语法`SELECT`如下：

```
 WHEN NOT MATCHED THEN
            INSERT itmid SELECT itmid FROM Table3 WHERE id=@id; 
```

**不被允许！**

我会尝试通过与`Table3`.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-01T12:47:04.103

做这个

```
 MERGE Table1 AS tgt
 USING (SELECT TOP 1 * FROM Table2
        WHERE id = @id) AS src
ON (tgt.id = src.id)
            WHEN MATCHED THEN UPDATE SET qty = qty + @qty
            WHEN NOT MATCHED THEN
                INSERT (itmid) 
                 SELECT itmid FROM Table3 WHERE id=@id; 
```

根据[http://msdn.microsoft.com/en-us/library/bb522522(v=sql.105).aspx应该可以正常工作](http://msdn.microsoft.com/en-us/library/bb522522(v=sql.105).aspx)

对不起，我解释错了，我原来的答案是

```
MERGE Table1 AS tgt
     USING (SELECT TOP 1 * FROM Table2
            WHERE id = @id) AS src
    ON (tgt.id = src.id)
                WHEN MATCHED THEN UPDATE SET qty = qty + @qty
                WHEN NOT MATCHED THEN
                    INSERT (itmid) values (SELECT top 1 itmid FROM Table3 WHERE id=@id); 
```

由于合并插入一次需要一个插入，并且多次插入可能会失败。

# google-apps - 如何安全地使用 Google Drive SDK 让外部用户通过我的 php 代码上传到我的云端硬盘

> ID：14646591
> 
> 赞同：0
> 
> 时间：2013-02-01T12:44:13.453
> 
> 标签：google-apps, google-drive-api

我已经读到服务帐户可能是允许客户上传他们的文件以在我们的网站上使用的好主意。但是，出于安全原因，我还读到 Drive SDK 未设置服务帐户。

我们正在寻找能够将在我们网站上使用的小册子上传给我们的用户。这主要是针对 Google Docs 文档呈现功能而非存储空间。

例如

用户通过我们的站点上传文件 文件上传到 Google Docs 上传的 URL/文件 ID 传回给我们，以便我们在数据库中存储/引用。在我们的网站上，小册子显示为显示文档的 Google 页面的弹出窗口。

我们将来会希望做更多使用 Drive SDK 功能的事情，所以不想排除使用它。

有什么建议么？

亲切的问候，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:11:09.353

Drive SDK 支持服务帐户，文档包含多种语言的示例，说明如何使用它们：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

# c - 无法使用 getchar() 获得正确的 ASCII 值

> ID：14646592
> 
> 赞同：0
> 
> 时间：2013-02-01T12:44:15.747
> 
> 标签：c

这可能是一个简单的更正，因为程序非常短，但请帮助我理解为什么我得到奇怪的输出：

```
#include <stdio.h>

int main(void)

{
    char x;
    printf("please enter a word, and ctrl + d to see the resault\n");

    while ((x = getchar()) != EOF)
    {
        printf("%d", x);
    }

    return 0;
}

intput: 'd'
output: 10010 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:52:11.397

你得到 10010 的原因是你按 'd' 然后按 'return'。

将您的 printf 格式更改为 "%d\n" 以更轻松地对其进行可视化。

修复可能是：

```
while ((x = getchar()) != '\n' )
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:45:47.287

这是因为您正在截断返回值。

`getchar()`返回`int`，查看[任何文档](http://linux.die.net/man/3/getchar)。

必须这样，因为`EOF`不允许与任何角色“碰撞”。由于`int`大于`char`，这允许`EOF`在可表示为的数字空间内的某个位置`int`，同时在的集合*之外*`char`。

正如 user876651 所解释的，输出“10010”实际上是两个相邻打印的十进制整数：

*   100 是小写字母的 ASCII 码`'d'`
*   10 是换行的 ASCII`'\n'`

你应该用换行符打印：`printf("%d\n", x);`让这些在他们自己的行上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:47:40.620

更改`char x`为退货`int x`，这就是您要打印的内容。`getchar()``int`

编辑：

`getchar()`要工作，您需要按 Enter 键，即`\n`也会被打印出来。

# ios - 如何以一对多关系清除/重置所有CoreData

> ID：14646595
> 
> 赞同：2
> 
> 时间：2013-02-01T12:44:30.083
> 
> 标签：ios, ios5, core-data, ios6, persistent-storage

我正在使用 coreData，具有一对多的关系，我有一个文件夹实体和一个文件实体。一个文件夹可以有很多文件等等。

所以，我有两个 ViewControllers，FolderViewController 和 FileViewController，它们分别包含文件夹和文件。现在我有一个 modalView，它可以从文件夹和文件 viewcontroller 访问。在这个 VC 中，我有一个按钮来重置所有数据。因此，当我单击此按钮时，我希望所有数据都应重置。

我使用了这段代码，这个函数是在 appdelegate.m 中编写的，并从我的 VC 中调用。

```
- (void)resetToDefault
{
    NSError * error;
    // retrieve the store URL
    NSURL * storeURL = [[__managedObjectContext persistentStoreCoordinator] URLForPersistentStore:[[[__managedObjectContext persistentStoreCoordinator] persistentStores] lastObject]];
    // lock the current context
    [__managedObjectContext lock];
    [__managedObjectContext reset];//to drop pending changes
    //delete the store from the current managedObjectContext
    if ([[__managedObjectContext persistentStoreCoordinator] removePersistentStore:[[[__managedObjectContext persistentStoreCoordinator] persistentStores] lastObject] error:&error])
    {
        // remove the file containing the data
        [[NSFileManager defaultManager] removeItemAtURL:storeURL error:&error];
        //recreate the store like in the  appDelegate method
        [[__managedObjectContext persistentStoreCoordinator] addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error];//recreates the persistent store
    }
    [__managedObjectContext unlock];
    //that's it !

    NSLog(@"buttonReset Pressed");
} 
```

因此，当我关闭视图时单击 resetButton 后，出现此错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Object's persistent store is not reachable from this NSManagedObjectContext's coordinator' 
```

那么如何解决这个问题。

问候兰吉特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:31:19.357

我已经解决了这个问题，下面是代码，

这个函数已经写在 appdelegate.m

```
- (void) resetApplicationModel
{
    NSError *error;
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"AppName.sqlite"];
    [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil];
    for (NSManagedObject *ct in [self.managedObjectContext registeredObjects]) {
        [self.managedObjectContext deleteObject:ct];
    }

    //Make new persistent store for future saves   
    if (![self.persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        // do something with the error
    }  
} 
```

在我的 SettingsViewController 中，我在以这种方式单击的 resetbutton 上调用它。

```
- (void)resetButtonclicked
{
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [appDelegate resetApplicationModel];  
} 
```

问候兰吉特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:23:56.730

```
 NSPersistentStore *store = [self.persistentStoreCoordinator.persistentStores lastObject];
    NSError *error;
    NSURL *storeURL = store.URL;
    NSPersistentStoreCoordinator *storeCoordinator = self.persistentStoreCoordinator;
    [storeCoordinator removePersistentStore:store error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];
//    Then, just add the persistent store back to ensure it is recreated properly.    
    if (![self.persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 
```

# ios - iOS 用户界面 - 这个用户界面是如何在 YouTube 和 Facebook 应用程序中实现的

> ID：14646597
> 
> 赞同：2
> 
> 时间：2013-02-01T12:44:40.843
> 
> 标签：ios, user-interface

我注意到许多应用程序切换到以下用户界面格式作为最大化用户当前选择的视图控制器可用空间量的一种手段，并且还优雅地显示选项/视图控制器列表供用户选择。

示例 - YouTube 应用：

![在此处输入图像描述](../Images/13ca02b66ce258f2fbd146c4acfbf2e4.png) ![在此处输入图像描述](../Images/d5fce2f59d6a79a0713f179ece2a454e.png)

我希望关于如何模拟这种“菜单”/UI 风格的建议 - 具体的示例/教程会很棒，但我也很感激关于我应该朝着什么方向努力的建议

**到目前为止，我将其分解为：**

1.  点击时 UINavigationController 中的条形按钮项加载容器
2.  容器中有一个 UITableView。
3.  当点击一行时，这会以某种方式影响用户看到的“主”视图控制器 - 即当前屏幕上的视图控制器成为用户刚刚点击的视图控制器。

**我不确定是否：**

1.  上面的分解是正确的吗？
2.  如何在导航控制器中点击左栏按钮项时创建漂亮的过渡幻灯片
3.  然后如何使视图控制器（我当然假设我会将“菜单”中的每一行绑定到特定的视图控制器）屏幕上的“主”视图控制器。

提前感谢您的宝贵时间！

PS我打算针对iOS 6.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:25:33.157

github上有几个开源控件：

[https://github.com/pkluz/PKRevealController](https://github.com/pkluz/PKRevealController)
[https://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)
[https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)

我认为不值得花时间重新发明轮子:)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T13:43:08.150

我知道的最好的，比如 Facebook、youtube 应用程序。

[http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels](http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels)

# c++ - 重新定义包含路径 C++

> ID：14646602
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:45:04.543
> 
> 标签：c++, g++

我有一个文件，不在项目根目录中 - 比如说“ *root/libs/lib.h* ”。现在，这个文件本身包括几个（实际上很多）文件。而且，它们都在另一个子目录中，比如说“ *root/libs/includes* ”。现在，我必须在*lib.h*中写下这个：

```
#include "includes/file1.c"
#include "includes/file2.c"
/*and so on*/
#include "includes/file20.c" 
```

现在，如果我可以更改实际包含路径，会不会更容易，更灵活？

```
#set_include_path "includes";
#include "file1.c"
/* ... */
#include "file20.c"
#set_include_path "..";   //returning to original folder 
```

我相信这是依赖于编译器的功能，所以对于回复，也请提及编译器。我自己正在使用 G++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:47:38.327

您想使用`-I`命令行参数：

```
g++ -Iincludes somefile.cpp ... 
```

有关详细信息，请参阅[参考资料](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)。

# html - 元 http-equiv 在头部之外？

> ID：14646603
> 
> 赞同：0
> 
> 时间：2013-02-01T12:45:07.277
> 
> 标签：html, opera, head, meta

我一直习惯于在头脑中看到元标记。新的 Opera 12.12 在保存页面的同时消除了这个元数据：

```
<!DOCTYPE html>
<html dir="ltr" lang="pl-PL">
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<head> 
```

这是一个负担得起的东西还是 Opera 中的一个错误？

**Jukka K. Korpela 的更新**

该页面具有以下 URL：[http](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application) ://www.espeo.pl/2012/02/26/authentication-in-angularjs-application并将其保存为“带有图像的 HTML 文件”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:52:42.390

此链接应该可以帮助您找到答案：

[http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.1](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.1)

也根据 w3schools（不能被视为真正的规范）：“*注意：`<meta>`标签总是在`<head>`元素内部。* ”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:57:13.787

It isn't valid HTML. Meta elements may only be children of the head element.

It is probably a bug, but might be a deliberate violation of the HTML spec on Opera's part to ensure that the character encoding information is parsed before any attributes on the `<head>` element (in case they contain characters that aren't in the default encoding).

# python - 检查列表的元素是否存在于另一个列表的元素中

> ID：14646606
> 
> 赞同：2
> 
> 时间：2013-02-01T12:45:11.063
> 
> 标签：python, python-2.7

我在使用列表时遇到了一些问题。所以，基本上，我有一个清单：

```
a=["Britney spears", "red dog", "\xa2xe3"] 
```

我还有另一个列表，看起来像：

```
b = ["cat","dog","red dog is stupid", "good stuff \xa2xe3", "awesome Britney spears"] 
```

我想做的是检查元素 in`a`是否是某些元素的一部分`b`- 如果是，则将它们从`b`的元素中删除。所以，我想`b`看起来像：

```
b = ["cat","dog","is stupid","good stuff","awesome"] 
```

实现这一目标的最 Pythonic（在 2.7.x 中）的方法是什么？

我假设我可以循环检查每个元素，但我不确定这是否非常有效 - 我有一个`b`大小约为 50k 的列表 ( )。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:51:21.050

我想我会在这里使用正则表达式：

```
import re

a=["Britney spears", "red dog", "\xa2xe3"]

regex = re.compile('|'.join(re.escape(x) for x in a))

b=["cat","dog","red dog is stupid", "good stuff \xa2xe3", "awesome Britney spears"]

b = [regex.sub("",x) for x in b ]
print (b)  #['cat', 'dog', ' is stupid', 'good stuff ', 'awesome '] 
```

这样，正则表达式引擎可以优化替代列表的测试。

这里有一堆替代方法来展示不同的正则表达式的行为方式。

```
import re

a = ["Britney spears", "red dog", "\xa2xe3"]
b = ["cat","dog",
     "red dog is stupid", 
     "good stuff \xa2xe3", 
     "awesome Britney spears",
     "transferred dogcatcher"]

#This version leaves whitespace and will match between words.
regex = re.compile('|'.join(re.escape(x) for x in a))
c = [regex.sub("",x) for x in b ]
print (c) #['cat', 'dog', ' is stupid', 'good stuff ', 'awesome ', 'transfercatcher']

#This version strips whitespace from either end
# of the returned string
regex = re.compile('|'.join(r'\s*{}\s*'.format(re.escape(x)) for x in a))
c = [regex.sub("",x) for x in b ]
print (c) #['cat', 'dog', 'is stupid', 'good stuff', 'awesome', 'transfercatcher']

#This version will only match at word boundaries,
# but you lose the match with \xa2xe3 since it isn't a word
regex = re.compile('|'.join(r'\s*\b{}\b\s*'.format(re.escape(x)) for x in a))
c = [regex.sub("",x) for x in b ]
print (c) #['cat', 'dog', 'is stupid', 'good stuff \xa2xe3', 'awesome', 'transferred dogcatcher']

#This version finally seems to get it right.  It matches whitespace (or the start
# of the string) and then the "word" and then more whitespace (or the end of the 
# string).  It then replaces that match with nothing -- i.e. it removes the match 
# from the string.
regex = re.compile('|'.join(r'(?:\s+|^)'+re.escape(x)+r'(?:\s+|$)' for x in a))
c = [regex.sub("",x) for x in b ]
print (c) #['cat', 'dog', 'is stupid', 'good stuff', 'awesome', 'transferred dogcatcher'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:03:19.073

好吧，我不知道这是否算作*pythonic*了，因为在python3中`reduce`被流放`functools`，有人不得不在桌子上放一个单行：

```
a = ["Britney spears", "red dog", "\xa2xe3"]
b = ["cat","dog","red dog is stupid", "good stuff \xa2xe3", "awesome Britney spears"]

b = [reduce(lambda acc, n: acc.replace(n, ''), a, x).strip() for x in b] 
```

甚至更快

```
[reduce(lambda acc, n: acc.replace(n, '') if n in acc else acc, a, x).strip() for x in b] 
```

但是随着可读性的降低，我认为它越来越不那么*Pythonic了。*

这是处理`transferred dogcatcher`此案的人。我借用了 mgilson 的正则表达式，但我认为这没关系，因为它非常简单:-)：

```
def reducer(acc, n):
    if n in acc:
        return re.sub('(?:\s+|^)' + re.escape(n) + '(?:\s+|$)', '', acc)
    return acc

b = [reduce(reducer, a, x).strip() for x in b] 
```

为了便于阅读，我将其提取`lambda`到命名函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:48:51.173

嗯，最简单的就是一个直接列表推导式，只要`a`它很小，它甚至是一个非常有效的方法。

```
b = [i for i in b if i not in a] 
```

# c# - Arial 字体中的某些数字太短？

> ID：14646610
> 
> 赞同：1
> 
> 时间：2013-02-01T12:45:21.580
> 
> 标签：c#, wpf, xaml

我注意到在我的 WPF 应用程序中，有些数字比其他数字短一些。我使用了 Arial 字体。数字是 1、2、4 和 7。 ![在此处输入图像描述](../Images/85ee98f3caca8e3a8e2c36563fce66cc.png) 是否有可能使每个数字都达到相同的水平？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:17:10.380

字体是视觉元素。因此，它们不必在数学上精确，但它们必须看起来不错。有助于字体看起来不错的一件事是一致的视觉基线。

即使边界框相同，字符的圆边似乎比平边略短。这就是为什么底线处的圆形边缘通常会略微延伸，以呈现出一致的基线。

顶部边缘对于字体的可读性和外观可能并不那么重要。我想，这就是为什么顶部边缘没有类似地延伸的原因。

# types - 在 ocaml 中定义新的数据类型

> ID：14646615
> 
> 赞同：0
> 
> 时间：2013-02-01T12:45:34.400
> 
> 标签：types, ocaml

谁能解释一下我们如何在 Ocaml 中定义新的数据类型，我对 ocaml 完全陌生。说，我必须定义一个新的类型 bitseq，也就是说所有的二进制数。

因此，在浏览了各种在线教程后，我为它所做的就是输入`num = Nil| 0 |1;;`并尝试了它的一些变体，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:19:28.383

您是否看过有关变体类型的[手册？](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual003.html#toc7)

> 每个案例都由一个名称标识，称为构造函数，它既用于构造变体类型的值，也用于通过模式匹配检查它们。**构造函数名称大写**以区别于变量名称（必须以小写字母开头）。

因此，您不能使用`0`or`1`作为构造函数名称。如果我是你并且我不关心二进制数表示中的前导零，我会选择以下内容：

```
type bit = Zero | One
type bitseq = bit list 
```

# jquery - 使用 jQuery 将图像插入表格

> ID：14646622
> 
> 赞同：0
> 
> 时间：2013-02-01T12:46:09.833
> 
> 标签：jquery, html-table

我一周前问过这个问题，但是没有人帮我解决这个问题，这是我的问题，我希望这次有人帮助我......

我正在尝试将包含图像的 jQuery 代码插入到`<td>`表格中，但图像超出了表格范围。我尝试了很多方法，但没有奏效。

**Javascript**

```
<script type="text/javascript">
    $(document).ready(function() { 
       var $elements = $('#picOne, #picTwo, #picTree, #picFour');

       function anim_loop(index) {
           $elements.eq(index).fadeIn(4000, function() {
               var $self = $(this);
               setTimeout(function() {
               $self.fadeOut(4000);
               anim_loop((index + 1) % $elements.length);
               }, 6000);
           });
        }
        anim_loop(0); // start with the first element

    });
</script> 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1     /DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>title</title>

 <style>
 div {
     display: none;
     position: absolute;
 table-layout:fixed;

 }

 </style>

 </head>

 <body>

 <table align="center" width="975" border="1" >

 <tr height="54">
 <td width="250" width="185">
 <img src="logo.png" />
 </td>
 <td width="303" colspan="3">
 bolbol
 </td>
 </tr>
 <tr>  
 <td height="480" colspan="3">
 <div id="imageHolder">
 <div id="picOne"><img src="pic1.jpg" width="975px" /></div>
 <div id="picTwo"><img src="pic1b.jpg" width="975px" /></div>
 <div id="picTree"><img src="2b.jpg" width="975px" /></div>
 <div id="picFour"><img src="2.jpg" width="975px" /></div>
 </div>
 </td>
 </tr>

 <tr>
 <td width="206">

 </td>
 <td width="444">

 </td>
 <td>

 </td>
 </tr>
 </table>

 </body>
 </html> 
```

以下是图片：

[http://postimage.org/image/i5g1jceuv/](http://postimage.org/image/i5g1jceuv/)

[http://postimage.org/image/n5hfzp28b/](http://postimage.org/image/n5hfzp28b/)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:59:36.777

尝试添加`table-layout: fixed`到表格中，这将防止图像“超出表格范围”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:41:45.313

测试了您的代码，该表格正在调整以适合我的每个图像，也许您的页面上有其他代码强制大小？

我不知道您的图片尺寸，但如果您添加：

```
<div id="picTwo"><img src="2.jpg" width="50px" /></div> 
```

图像的宽度它们都将具有相同的大小。如果它们的宽度超过 975 像素，您应该考虑为网络调整它们的大小......

我还让所有图像显示，然后一次消失，但我假设您正在其他地方限制表格单元格的高度（我使用 jquery 1.9.0 测试）正如@Mr_Green 所说，表格是一个奇怪的结构，尝试：

的HTML：

```
<div id="imageHolder">
<div id="picOne"><img src="1.jpg" width="975px" /></div>
<div id="picTwo"><img src="2.jpg" width="975px" /></div>
<div id="picTree"><img src="3.jpg" width="975px" /></div>
<div id="picFour"><img src="4.jpg" width="975px" /></div>
</div> 
```

使用CSS：

```
#imageHolder{
width:975px;
background-color:#564;
padding:10px;
} 
```

（测试后更改背景颜色和填充）。

在 javascript 中添加此行以默认隐藏元素（在 var $elements... 行之后）：

```
$('#picOne, #picTwo, #picTree, #picFour').hide(); 
```

编辑：我重新排列了代码，所以下一张图片在最后一张消失之前不会显示，该功能也不需要在文档中准备好：

```
var $elements = $('#picOne, #picTwo, #picTree, #picFour');
function anim_loop(index) {
    $elements.eq(index).fadeIn(4000, function() {
        var $self = $(this);
        setTimeout(function() {
            $self.fadeOut(4000, function(){
                anim_loop((index + 1) % $elements.length);
            });

        }, 6000);
    });
} 
$(document).ready(function() { 
    $('#picOne, #picTwo, #picTree, #picFour').hide();
    anim_loop(0); // start with the first element
}); 
```

新编辑：这里有完整的代码工作版本，没有表格，所有图像都通过 wiki commons 动态加载。来自 jquery.com 的最新 jquery：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1     /DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>title</title>
 </head>
 <body>
<table align="center" width="975" border="1" >

<tr height="54">
<td width="250" width="185">
<img src="logo.png" />
</td>
<td width="303" colspan="3">
bolbol
</td>
</tr>
<tr>  
<td height="480" colspan="3">
 <div id="imageHolder">
 <div id="picOne"><img     src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Basel_2012-10-02_Mattes_%2812%29.JPG/800px-Basel_2012-10-02_Mattes_%2812%29.JPG" width="975px" /></div>
 <div id="picTwo"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Natanjap052.jpg/800px-Natanjap052.jpg" width="975px" /></div>
 <div id="picTree"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Chelone_lyonii2.jpg/800px-Chelone_lyonii2.jpg" width="975px" /></div>
<div id="picFour"><img src="http://upload.wikimedia.org/wikipedia/commons/a/aa/Long-tailed_Duck_%28Clangula_hyemalis%29_%286663015595%29.jpg" width="975px" /></div>
 </div>
</td>
</tr>

 <tr>
<td width="206">

 </td>
<td width="444">

</td>
<td>

</td>
</tr>
</table>    
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script type="text/javascript">
var $elements = $('#picOne, #picTwo, #picTree, #picFour');
function anim_loop(index) {
    $elements.eq(index).fadeIn(4000, function() {
        var $self = $(this);
        setTimeout(function() {
            $self.fadeOut(4000, function(){
                anim_loop((index + 1) % $elements.length);
            });

        }, 6000);
    });
}
$(document).ready(function() { 
    $('#picOne, #picTwo, #picTree, #picFour').hide();
    anim_loop(0); // start with the first element
});
</script>
</body>
</html> 
```

# php - 将内置颜色配置文件应用于图像

> ID：14646625
> 
> 赞同：6
> 
> 时间：2013-02-01T12:46:17.137
> 
> 标签：php, image-processing, imagemagick, jpeg, color-profile

我有一张嵌入颜色配置文件的 JPEG 图片。一些网络浏览器显示带有应用配置文件的图像，有些则不显示。如何将颜色配置文件应用于图像和删除配置文件，所有浏览器都以相同的方式显示图像。

我尝试通过图像魔法扩展解决问题，但图像在不同的浏览器中仍然显示不同：

```
 function add_color_profiles($source_path, $target_path){

            $all_exts = get_loaded_extensions();
            if(!in_array('imagick',$all_exts))
                    return true;

            $im1 = new Imagick($source_path);
            $im2 = new Imagick($target_path);

            $profiles = $im1->getImageProfiles();

            if(!$profiles)
                    return true;

            foreach($profiles as $name => $profile){

                    $im2->setImageProfile($name,$profile);
            }

            $im2->writeImage ($target_path);

            return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T00:46:04.687

将配置文件应用于图像（将图像色彩空间转换为 RGB）：

```
$im->setImageColorspace(IMagick::COLORSPACE_RGB); 
```

从输出文件中去除配置文件信息：

```
$im->profileImage('*', NULL); 
```

剥离所有配置文件的图像，exif（评论 GPS 数据等）：

```
$im->stripImage(); 
```

# jquery - jQuery / CSS 仅缩放 div 内容

> ID：14646632
> 
> 赞同：2
> 
> 时间：2013-02-01T12:46:41.313
> 
> 标签：jquery, css

我想放大 div 的内容，但我希望 div 保持位置和高度/宽度，而不管它的缩放级别。

我做了这个小提琴：http: [//jsfiddle.net/fD7L7/5/](http://jsfiddle.net/fD7L7/5/)

问题是，我想要放大/缩小的 div 充当了许多可拖动对象的容器。

哈普？

```
var currZoom = 1;

$(".zoomIn").click(function(){
    currZoom+=0.1;
    $('.board').css(
    {
        'position' : 'absolute',
        'top' : '45px',
        'left' : '20px',
        'height' : $(window).height()-65,
        'width' : $(window).width()-40,
        'zoom' : currZoom
    });
});

$(".zoomOff").click(function()
{
    currZoom=1;
    $(".board").css(
    {
        'position' : 'absolute',
        'top' : '45px',
        'left' : '20px',
        'height' : $(window).height()-65,
        'width' : $(window).width()-40,
        'zoom' : currZoom
    });
});

$(".zoomOut").click(function()
{
    currZoom-=0.1;
    $('.board').css(
    {
        'position' : 'absolute',
        'top' : '45px',
        'left' : '20px',
        'height' : $(window).height()-65,
        'width' : $(window).width()-40,
        'zoom' : currZoom
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:34:35.423

尝试这样的事情：http: [//jsfiddle.net/vaFQ9/](http://jsfiddle.net/vaFQ9/)

```
<div class='outboard'>
    <div class="board">
        <div class="draggable"></div>
    </div>
</div> 
```

一个绝对定位的容器 div（'.outboard'）和一个相对定位的内部 div（'.board'）。容器 div 的溢出属性（在此示例中为滚动）创建固定大小容器的外观，其内容放大和缩小。

```
.outboard
{
    position: absolute;
    top: 45px;
    left: 45px;
    width: 80%;
    height: 80%;
    padding: 0px;
    border: 1px solid black;
    overflow: scroll;
}

.board
{
    background-color: #334433; /* not actually relevant */
} 
```

.outboard 元素是您在页面上指定明显位置/块属性的位置，.board 元素以相同大小的 div 开始（您可能需要摆弄填充和边距以确保它们齐平到首先。

我已经在 jsfiddle 中对您的原始代码进行了一些处理，但希望它是有意义的。

# php - 将数组转换为具有前缀“suf_”的特定键

> ID：14646634
> 
> 赞同：1
> 
> 时间：2013-02-01T12:46:47.757
> 
> 标签：php

我有一个关联数组。在这个数组中，一些键具有前缀“suf_”。如何使用这些后缀键和值创建一个新数组？见下面的例子

```
Array
(
[buildings_sum] => 
[accidental_damage] => 0
[landslip_cover] => 0
[loss_of_rent] => 
[loss_period] => 
[contents_sum] => 
[suf_household_contents_sum] => 
[damage_cover] => 0
[suf_tobacco_stock_sum] => 
[stock_sum] => 
[suf_buisness_interruption] => gb
[suf_buisness_interruption_indemnity] => 24 Months
[suf_increased_cost] => vb
[suf_increased_cost_indemnity] => 24 Months
[employer_liability] => 0
[liability_sum] => 2000000
[property_owner_liability] => 1000000
[goods_sum] => hvb
[freezer_stock] => bv
[money_night_safe] => vb
[money_locked_safe] => bv
[money_not_locked_safe] => cv
[private_dwelling_money] => fcv
[suf_change_machine_money] => cfv
[suf_gaming_machine_money] => 0
[personal_accident] => cfv
[glass] => cv
[book_debts] => cv
[suf_cover_guest] => 0
[terrorism_cover] => 0
[legal_expenses_cover] => 0
[loss_of_licence] => 0
[risks_cover] => 0
[voluntary_excess] => 250
[compulsory_excess] => h
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:32:44.700

使用`foreach`循环和`preg_match`. 这是一个以 youd 数据为例的工作示例。

```
$data_array = array();
$data_array['stock_sum'] = ''; 
$data_array['suf_buisness_interruption'] = 'gb';
$data_array['suf_buisness_interruption_indemnity'] = '24 Months';
$data_array['suf_increased_cost'] = 'vb';
$data_array['suf_increased_cost_indemnity'] = '24 Months';
$data_array['employer_liability'] = 0;
$data_array['liability_sum'] = 2000000;
$data_array['property_owner_liability'] = 1000000;
$data_array['goods_sum'] = 'hvb';
$data_array['freezer_stock'] = 'bv';
$data_array['money_night_safe'] = 'vb';
$data_array['money_locked_safe'] = 'bv';

$suf_array = array();

foreach ($data_array as $key => $value) {
    if (preg_match('/^suf_/', $key)) {
        $suf_array[$key] = $value;
    }
}

echo '<pre>';
print_r($suf_array);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:51:21.563

遍历数组并获取所有`suf_`在键中包含该部分的元素：

```
$new_array = array();

foreach ($array as $key => $value) {
    if (substr($key, 0, 4) == 'suf_') {
        $new_array[$key] = $value;
    }
}

print_r($new_array); 
```

# ruby-on-rails - Rails3 / Devise 的 CanCan 方法的问题

> ID：14646639
> 
> 赞同：0
> 
> 时间：2013-02-01T12:47:03.633
> 
> 标签：ruby-on-rails, devise, cancan

两天后，我自己无法解决这个问题。看起来它应该很简单，但我错过了一些东西。我正在使用帖子和作者创建一个简单的博客。作者有一个布尔管理列。

现在给我一个错误的行是我检查权限以在帖子中显示编辑按钮。当前错误是：

帖子中的 NoMethodError#show

显示 .../posts/show.html.erb 其中第 18 行提出：

未定义的方法 `stringify_keys' 用于#

**帖子/show.html.rb**

```
 <% if @author.can? :update, @post %>
          <p><%= link_to 'Edit', edit_post_path(@post), :class => 'btn' %> &nbsp; <%= link_to 'Destroy', @post, confirm: 'Are you sure?', method: :delete %></p>
          <% end %> 
```

**application_controller.rb**

```
class ApplicationController < ActionController::Base
  protect_from_forgery  
  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_url, :alert => exception.message
  end
  helper_method :current_author
  def current_user
    @current_ability ||= Author.new(current_author)
  end
end 
```

**能力.rb**

```
class Ability
  include CanCan::Ability
  def initialize(author)
    author ||= Author.new # guest user (not logged in)   
    if author.admin?
      can :manage, :all
    else
      can :read, :all
    end  
  end
end 
```

此外，据我所知，CanCan 正确包含在 gem 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:00:11.067

两件事情。

首先，您需要`current_user`在控制器中有一个方法，cancan 依赖该方法。如果你没有，你可以

*   `current_user`您的方法的别名`current_whatever`或
*   手动实例化能力 like`@ability = Ability.new(current_whatever)`并在您的视图中调用您`can?`生成的能力（like `@ability.can? :edit, @post`）。

其次，您在第 4 行和第 5 行都`Ability`使用了，但是您的方法中没有。不过，你有。如果没有对象可用/没有提供给能力的初始化程序，则您使用非持久作者（而不是 AuthorAbility，除非您的 AuthorAbility 是返回的或在您的能力中作为参数获得）。像这样的东西：`current_author``current_author``initialize``author``Author``current_user``initialize`

```
class Ability
  include CanCan::Ability
  def initialize(author)
    author ||= Author.new # guest user (not logged in)
    if author.admin?
      can :manage, :all
    else
      can :read, :all
    end  
  end
end 
```

* * *

根据评论进行编辑以使其更简单：

理想情况下，您将一个`current_user`方法放在应用程序控制器中，并使其在您的视图中用作助手（因为您可能希望根据登录用户有条件地显示/隐藏/更改视图中的内容）。

```
class ApplicationController < ActionController::Base
  helper_method :current_user

  def current_user
    # return the currently logged in user record
  end
end 
```

如果这对您来说是新的，我建议您看一下身份验证 gem。Devise 也介绍了这一点，authlogic 在其操作指南和示例应用程序中对此进行了描述。如果您从头开始进行身份验证，则只需要根据会话返回用户。

* * *

编辑2.您实际上需要了解您的工作，恕我直言，目前情况并非如此。你在这里做的有点乱 ;-)

问题 1：`current_user`需要返回**当前登录的作者/用户**（不是 abilty 或后备用户或其他用户），或者`nil`如果没有作者登录。所以你可以例如`<% if current_user %>`在你的视图中做。`@current_ability ||= Author.new(current_author)`是完全错误的。能力类的回退需要保留在能力类中，因为 cancan 的方法只能应用于对象而不能应用于`nil`. 因此，`author ||= Author.new`在您的能力范围内，您确保有一个对象，即使没有作者登录（在这种情况下`current_author`返回`nil`）。

问题 2：`helper_method :current_author`实际上什么都不做，因为`current_author`您的应用程序控制器中没有方法。你需要以某种方式定义`current_author`.

问题 3：在您看来，您调用`can?`的实例`Author`是错误的。`can?`是一种方法`Ability`。所以你需要使用`@my_ability.can?`where @my_ability 是 eg 的一个实例`Ability.new(Author.first)`。如果您需要使用多种能力或自定义某些东西，则使用此功能，此处不是这种情况，因此`can?`无需接收器即可直接使用（如`@author.can?`）。

出于测试目的，我将创建以下内容：

```
class ApplicationController < ActionController::Base
  helper_method :current_user # as defined below...

  def current_user
    # Return a static user here, for testing purposes,
    # like @current_user = User.first or Author.first
  end
end 
```

因此，您`current_user`返回了一个有效用户（我希望，您至少需要在数据库中存储一个），然后才能解决能力问题。如果您的能力有效，那么您就实施您的身份验证。作为初学者，我要么坚持使用[authlogic](https://github.com/binarylogic/authlogic)要么[设计](https://github.com/plataformatec/devise).

# asp.net - JIRA SOAP：错误消息：[Could not load validator class] for progressWorkflowAction

> ID：14646641
> 
> 赞同：0
> 
> 时间：2013-02-01T12:47:04.260
> 
> 标签：asp.net, soap, jira, jira-plugin, jira-rest-java-api

我正在使用 JIRA 的 SOAP API 通过从一种状态跳转到另一种状态来更改缺陷的状态，一切都很好，直到我需要跳转到用户需要在文本框字段中输入一些文本的“已验证”状态。

我正在使用**progressWorkflowAction**方法并尝试跳转到此状态，但出现异常：

```
com.atlassian.jira.rpc.exception.RemoteException: Error occurred when running workflow
action To Verified: 
Errors: {}
Error Messages: [Could not load validator class] 
```

任何想法如何指定此工作流元素所需的文本？

ps：试过这个：

```
JiraClient.progressWorkflowAction(token, "DEF-5", "171", new RemoteFieldValue[] { new RemoteFieldValue { id = "customfield_10175", values = new string[] { "test" } } }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:30:52.237

首先，尝试根据您的 Jira 版本安装[JIRA Suite Utilities 插件](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)（[源代码）。](https://confluence.atlassian.com/display/JIRAKB/Could+not+Load+Validator+Class+due+to+JIRA+Suite+Utilities)这可能是此错误的原因。

如果没有帮助，请查看[由于“无法加载验证器”类错误而导致的无法创建问题：](https://confluence.atlassian.com/display/JIRAKB/Cannot+Create+Issues+due+to+%27Could+not+load+validator%27+class+Errors)

> **原因**
> 
> 一些 JIRA 实例依赖 3rd 方工作流验证器工具在工作流中的某个问题操作或转换过程中，在问题的生命周期内设置条件、验证器或后期函数。JIRA 将在第一次使用时延迟加载所需的任何 3rd 方类。如果该类不存在，则问题创建可能会失败。
> 
> **诊断**
> 
> *   浏览到相应的项目管理屏幕。
> *   从那里，浏览到正在使用的工作流。
> *   找到引发错误的转换。
> *   请注意特定的验证器。验证器将指定一个代码，建议您需要哪个插件。检查导致此问题的已知插件的解决方案。
> 
> **解析度**
> 
> 从供应商处下载适用的 Jar。负责插件的线索通常来自堆栈跟踪；检查供应商的名称。导致此问题的一组已知插件包括：
> 
> *   JIRA 套件实用程序
> *   JIRA 其他实用程序
> *   明雅套房
> 
> *请务必使用正确的版本，并删除该插件的任何先前版本。*
> 
> 安装后，重新启动 JIRA。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T20:15:25.350

查看 DEF 项目的工作流程，了解 DEF-5 的问题类型。找到要执行的转换。查看 Validators 选项卡 其中一个验证器将只显示其类名 这是因为提供该验证器的插件不存在 重新安装或启用适当的插件。

另一个有用的测试是尝试从 UI 而不是 Remote API 执行相同的转换。

# search - Solr拼音搜索没有找到任何东西

> ID：14646642
> 
> 赞同：4
> 
> 时间：2013-02-01T12:47:11.017
> 
> 标签：search, solr, phonetics

我的 solr 4.1.0 安装没有找到任何带有语音编码的东西。schema.xml 的摘录：

```
<field name="textsuggest" type="text_suggest" indexed="true" stored="true" omitNorms="true" multiValued="true" />
<field name="textphon" type="text_phonetic_do" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="false" multiValued="true" />
<copyField source="textsuggest" dest="textphon"/>

...

<fieldType name="text_phonetic_do" class="solr.TextField"
    positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory" />
        <filter class="solr.GermanNormalizationFilterFactory" />
        <filter class="solr.SynonymFilterFactory" synonyms="lang/synonyms_de.txt"
            ignoreCase="true" expand="false" /> 
        <filter class="solr.PhoneticFilterFactory" encoder="ColognePhonetic" inject="false" />
    </analyzer>
</fieldType> 
```

`text_suggest`或多或少是原始文本的小写版本，用`solr.StandardTokenizerFactory`and标记`solr.WordDelimiterFilterFactory`。语音编码器是一种专门用于德语单词的编码器。同义词过滤器处理一些特定领域的词。我受到[http://www.cominvent.com/2012/01/25/super-flexible-autocomplete-with-solr/](http://www.cominvent.com/2012/01/25/super-flexible-autocomplete-with-solr/)的启发。

我用“Geprüfter Betriebswirt”和 textsuggest 中的其他项目索引一个条目。现在，当我搜索“Betriebswirt”时，我得到了预期的结果。然而，搜索“Betribswirt”这只是原始德语单词的一个小错误拼写，solr 报告 0 命中。

在 solr 的管理 gui 的分析视图中，我尝试了“Betriebswrt”和我的字段类型的不同拼写`text_phonetic_do`，它们都被编码为相同的数字流：

*   betriebswirt => 12718372
*   betribswirt => 12718372
*   betribswiirt => 12718372
*   petribswiert => 12718372

因此编码（分析时间和搜索时间）按预期工作。但是如上所述，solr 在搜索拼音变体时没有找到任何文档。

我使用查询视图，甚至查询`textphon:Betriebswirt`也不返回单个结果。完整的查询结果（我去掉了计时部分）如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>

<lst name="responseHeader">
  <int name="status">0</int>
  <int name="QTime">1</int>
  <lst name="params">
    <str name="debugQuery">true</str>
    <str name="indent">true</str>
    <str name="q">textphon:Betriebswirt</str>
    <str name="wt">xml</str>
  </lst>
</lst>
<result name="response" numFound="0" start="0">
</result>
<lst name="debug">
  <str name="rawquerystring">textphon:Betriebswirt</str>
  <str name="querystring">textphon:Betriebswirt</str>
  <str name="parsedquery">textphon:12718372</str>
  <str name="parsedquery_toString">textphon:12718372</str>
  <lst name="explain"/>
  <str name="QParser">LuceneQParser</str>
</lst>
</response> 
```

我不知道为什么它什么也没找到。如果我正确理解调试输出，甚至会搜索索引以查找正确的（阅读：语音编码）令牌。

那么我错过了什么？谁能指出我正确的方向？谢谢

# c# - 如果凭据错误，我可以禁用 MS CRM 2011 SDK 的登录提示吗？

> ID：14646645
> 
> 赞同：2
> 
> 时间：2013-02-01T12:47:20.370
> 
> 标签：c#, wcf, dynamics-crm-2011

现在我访问**CRM SDK**如下

```
IServiceManagement<IDiscoveryService> serviceManagement =
                        ServiceConfigurationFactory.CreateManagement<IDiscoveryService>(discoveryUri);
ClientCredentials credentials = new ClientCredentials();
credentials.Windows.ClientCredential = new System.Net.NetworkCredential(userName, password, domain);
using (DiscoveryServiceProxy serviceProxy = new DiscoveryServiceProxy(new DiscoveryServiceProxy(serviceManagement, credentials))
{
    RetrieveOrganizationsRequest orgRequest = new RetrieveOrganizationsRequest();
    RetrieveOrganizationsResponse orgResponse =
                (RetrieveOrganizationsResponse)service.Execute(orgRequest);
    // do something with organisations
} 
```

但是，如果域凭据不正确，则会出现**Windows**登录提示（在 中的某处`service.Execute`）。我不想要那个登录提示。我通过在将凭据`PrincipalContext`传递给之前使用验证凭据来解决此问题`DiscoveryServiceProxy`，但我对此并不完全满意。

有没有办法禁用登录提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-18T12:35:47.637

[CRM 论坛](http://social.microsoft.com/Forums/en-US/665ca5aa-64c7-4f53-9249-f440270c30a7/can-i-disable-the-login-prompt-for-ms-crm-2011-sdk-if-credentials-are-wrong)上的某个人告诉我该怎么做：

`credentials.ClientCredentials.SupportInteractive = false;`

# php - 使用 mb_convert_encoding 、 mb_detect_encoding 和 UTF-8 编码的 MySql 的安全性

> ID：14646647
> 
> 赞同：0
> 
> 时间：2013-02-01T12:47:23.243
> 
> 标签：php, mysql, security, sanitization, mb-convert-encoding

我计划使用下面的代码以安全的方式将记录添加到 MySql 中。我的问题：

1.  我总是使用管理页面的表格输入我自己的文章。由于我的mysql数据库和表是用UTF-8编码的，整理：utf8_unicode_ci; 并且我所有的网页都是 charset=utf-8 那么我还需要函数中的第一句话吗（句子以 mb_convert_encoding ... 开头）
2.  2 - ) 网页查看器是否有可能，尽管我的所有编码（web&mysql）aer 设置为 utf-8，但他/她在我的 textarea 中输入的评论没有以 utf-8 编码
3.  下面的代码需要改进吗？

    `function safe_input_into_mysql($safe_str)
    {
    $safe_str = mb_convert_encoding($safe_str, 'UTF-8', mb_detect_encoding($safe_str));
    $safe_str = mysqli_real_escape_string($dbc, $safe_str);
    return $safe_str;
    }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:42:41.537

您希望数据库记录以何种方式“安全”？防范什么？

对于与数据库的通信，您应该使用参数化查询。这意味着在数据库级别不会存在安全风险。这并不意味着如果在其他地方以不受保护的方式使用存储的数据（例如，作为 HTML 文档的一部分输出），存储的数据可能不会有危险。

您提到表字符集是 UTF-8，但您没有提到连接字符集。您还应该确保正确设置了连接字符集。

# php - cURL 未将文件发送到 API CALL

> ID：14646653
> 
> 赞同：0
> 
> 时间：2013-02-01T12:47:40.673
> 
> 标签：php, file, file-upload, curl

我正在构建一个从 API 运行的移动站点，并且有一个 API CALL 处理程序类，它执行我从主函数文件运行的所有调用。

这里的问题是我的文件没有被发送到 API，它没有识别什么是文件并且返回文件不存在错误。

**注意：问题已解决且工作代码如下**

下面的代码：

形式

```
<form id="uploadPhoto" action="<?php uploadStreamPhoto(); ?>" method="post" enctype="multipart/form-data">
    <input type="file" name="streamPhotoUpload" id="streamPhotoUpload" />
    <input type="submit" name="streamPhotoUploadSubmit" id="streamPhotoUploadSubmit" value="Upload" />
</form> 
```

上传功能

```
function uploadStreamPhoto()
{

    if(isset($_POST['streamPhotoUploadSubmit']))
    {

        $apiHandler = new APIHandler();
        $result = $apiHandler->uploadStreamPhoto($_FILES['streamPhotoUpload']['tmp_name']);
        $json = json_decode($result);
        var_dump($json);

        //header('Location: '.BASE_URL.'stream-upload-preview');

    }

} 
```

处理方法

```
public function uploadStreamPhoto($file)
{

    $result = $this->request(API_URL_ADD_PHOTO, array(
    'accessToken' => $this->accessToken,
    'file' => "@$file;filename=".time().".jpg",
    'photoName' => time(),
    'albumName' => 'Stream'
    )); 

    return $result;

} 
```

卷曲请求方法

```
/**
* Creates a curl request with the information passed in post fields
*
* @access private
* @param string $url
* @param array $postFields
* @return string
**/
private function request($url, $postFields = array())
{

    $curl = curl_init();

    //Check the SSL Matches the host
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

    if($this->debug == true)
    {

        //Prevent curl from verifying the certificate
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);

    }

    //Set the URL to call
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_HEADER, 0);

    //Set the results to be returned
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    //Set the curl request as a post
    curl_setopt($curl, CURLOPT_POST, 1); 

    //Set the post fields
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postFields); 

    $result = curl_exec($curl);

    if($result === false)
    {

        $result = 'Curl error: '.curl_error($curl);

    }

    curl_close($curl);

    return $result;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-23T10:20:02.630

在 PHP 5.5 发布之后，我为那些在这里结束的人支付 2 美分。有两点值得一提：

### PHP 5.5 更改

在 PHP 5.5 中引入了一个改变文件上传过程的新函数。[rfc:curl-file-uploads](https://wiki.php.net/rfc/curl-file-upload)描述得最好。因此，如果您使用的是 PHP 5.5 或更新版本，您可能应该尝试使用[curl_file_create()](http://php.net/manual/en/function.curl-file-create.php)而不是添加`@/full/file/path`为文件字段值。

### 在 PHP 5.5 或更高版本中使用旧方法

如果您使用的是 PHP 5.5 或更新版本，则在使用旧的上传文件方式时可能会遇到问题。

首先是您必须使用`CURLOPT_SAFE_UPLOAD`option 并将其设置为`FALSE`.

其次，让我花费数小时调试的事情是，您必须在设置`CULROPT_POSTFIELDS`. 如果使用`curl_setopt_array()`then`CURLOPT_SAFE_UPLOAD`应该添加到该数组之前`CURLOPT_POSTFIELDS`。如果你正在使用，`curl_setopt()`那么你只需要在`CURLOPT_SAFE_UPLOAD`之前设置。不这样做将导致文件字段作为包含`@/full/file/path`字符串的文本发送，而不是正确上传文件。

### 使用旧方法的示例，但即使使用较新版本也应该适用

```
<?php
$options = array(
  CURLOPT_URL => $url,
  CURLOPT_RETURNTRANSFER => TRUE,
  CURLOPT_SAFE_UPLOAD => FALSE,
  CURLOPT_POSTFIELDS => array(
    'text1' => 'test',
    'submit' => 'Send!',
    'file1' => '@' . realpath('images/a.jpg'),
    'file2' => '@' . realpath('images/b.jpg'),
  ),
);
$ch = curl_init();
// Needed for PHP > 5.5 to enable the old method of uploading file.
// Make sure to include this before CURLOPT_POSTFIELDS.
if (defined('CURLOPT_SAFE_UPLOAD')) {
  curl_setopt($ch, CURLOPT_SAFE_UPLOAD, FALSE);
}
curl_setopt_array($ch, $options);
$content = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

[完整代码在这里](https://github.com/Luxian/php-curl-upload-example/blob/master/send-legacy.php)

### PHP 5.5 或更新版本应该这样使用

```
$options = array(
  CURLOPT_URL => $url,
  CURLOPT_RETURNTRANSFER => TRUE,
  CURLOPT_POSTFIELDS => array(
    'text1' => 'test',
    'submit' => 'Send!',
    'file1' => curl_file_create(realpath('images/a.jpg')),
    'file2' => curl_file_create(realpath('images/b.jpg')),
  ),
);

$ch = curl_init();
curl_setopt_array($ch, $options);
$content = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

[完整代码在这里](https://github.com/Luxian/php-curl-upload-example/blob/master/send-php55.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:26:35.407

好的，我已经找到了问题所在，希望该解决方案能帮助很多不想改变他们的代码代替其他人的人。

cURL 没有检测到它应该将此表单作为多部分发送，因此它将帖子作为默认编码发送，这意味着另一端没有接收到 $_FILES 变量。

要解决此问题，您需要将 postdata 作为数组提供，我正在为发送创建字符串，我已将其删除并为 CURLOPT_POSTFIELDS 提供了一个数组。

使用 cURL 直接从表单上传时，另一件重要的事情是将文件信息与实际文件一起包含在内。

我的 API 调用处理程序现在按如下方式创建了数组：

```
public function uploadStreamPhoto($file)
{

    $result = $this->request(API_URL_ADD_PHOTO, array(
    'accessToken' => $this->accessToken,
    'file' => "@$file;filename=".time().".jpg",
    'photoName' => time(),
    'albumName' => 'Stream'
    )); 

    return $result;

} 
```

请注意 $file 变量是 $_FILES['tmp_name'] 然后您还必须定义文件名。我将使用解决方案更新问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:54:09.970

```
function curl_grab_page($url,$data,$secure="false",$ref_url="",$login = "false",$proxy = "null",$proxystatus = "false")

            {
                if($login == 'true') {
                    $fp = fopen("cookie.txt", "w");
                    fclose($fp);
                }
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
                curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");

                curl_setopt($ch, CURLOPT_TIMEOUT, 60);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
                if ($proxystatus == 'true') {
                    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
                    curl_setopt($ch, CURLOPT_PROXY, $proxy);
                }
                curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

                if($secure=='true')
                {
                    curl_setopt($ch, CURLOPT_SSLVERSION,3);
                }

                curl_setopt( $ch, CURLOPT_HTTPHEADER, array( 'Expect:' ) );

                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

                curl_setopt($ch, CURLOPT_URL, $url);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_REFERER, $ref_url);
                curl_setopt($ch, CURLOPT_HEADER, TRUE);
                curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
                curl_setopt($ch, CURLOPT_POST, TRUE);
                curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
                ob_start();

                return curl_exec ($ch); // execute the curl command

                curl_getinfo($ch);
                ob_end_clean();
                curl_close ($ch);
                unset($ch);
            } 
```

根据您的需要使用此 curl 功能，因为我使用它在 post even 文件中发送数据。

和

```
$data['FileName'] = '@'.$ProperPath; 
```

// 正确路径 = c:/images/a.jpg

```
curl_grab_page("url", $data); 
```

# d3.js - 在 d3.js 中绘制已经投影的 geoJSON 地图

> ID：14646656
> 
> 赞同：5
> 
> 时间：2013-02-01T12:47:43.240
> 
> 标签：d3.js, geojson

使用 d3.js 的 v3，我在使用 geoJSON 数据绘制地图时遇到问题。代码和生成的地图显示在：[http](http://bl.ocks.org/73833ec90a8a77b0e29f) ://bl.ocks.org/73833ec90a8a77b0e29f 。此示例使用 d3.js 的 v2 生成正确的地图。

1.  我的数据已经被投影（它们是荷兰国家电网/Rijksdriehoekstelsel 坐标）。为了弥补这一点，我编写了自己的投影函数，它只是将地图的坐标系转换为像素（例如缩放和平移）。
2.  d3.js v3 中的 d3.geo.path() 重新采样数据。但是，重采样中生成的点似乎与我的地图不在同一个坐标系中（我假设它们是 lon、lat 坐标）。

我不想将我的地图坐标转换为 lon,lat 坐标，因为地图已经按照我想要的方式投影，而且据我所知，这不是一个微不足道的投影。

如果问题确实是由重采样引起的，我想禁用重采样。但是，在文档中我真的找不到如何做到这一点。我可以传递一个流对象，而不是将投影函数传递给 d3.geo.path.projection()。我认为以下方法会起作用：

```
var projection = d3.geo.projection(function(x, y) {
    return [ scale*(x-xmin), height-scale*(y-ymin) ];
  }).precision(0); 
```

但事实并非如此。可能也与我没有纬度，经度坐标的事实有关。如何使用自定义投影功能禁用重采样？

或者当其他原因导致问题时，我想听听。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T05:58:36.653

我最近遇到了同样的问题。

这样做的方法是明确告诉 d3 你不想要投影。答案在这个[链接](https://github.com/mbostock/d3/wiki/Geo-Paths)中。

```
"If projection is null, the path uses the identity transformation, where the input 
geometry is not projected and is instead rendered directly in raw coordinates. This can be 
useful for fast rendering of already-projected geometry, or for fast rendering of the 
equirectangular projection." 
```

所以你想拥有

```
var path = d3.geo.path().projection(null); 
```

然后，像这样

```
g.selectAll("path")
            .data(json.features)
            .enter().append("path")
            .attr("d", path) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T11:33:57.390

作为对 user603124 回答的回应，我重新审视了这个问题（直到现在我坚持使用 d3.js 的 v2）。我最初创建对象的想法有效。但是，在我最初的实现中，我的缩放和缩放错误。使用[另一个问题的答案来](https://stackoverflow.com/questions/14492284/center-a-map-in-d3-given-a-geojson-object)正确缩放和缩放：

```
<script>
  var height = 400;
  var width  = 400;

  var vis = d3.select("#vis").append("svg")
      .attr("width", width).attr("height", height)

  d3.json("po_2012_simplified.json", function(json) {

      var projection = d3.geo.projection(function(x, y) { return [x, y];})
        .precision(0).scale(1).translate([0, 0]);

      var path = d3.geo.path().projection(projection);

      var bounds = path.bounds(json),
          scale  = .95 / Math.max((bounds[1][0] - bounds[0][0]) / width, 
                  (bounds[1][1] - bounds[0][1]) / height),
          transl = [(width - scale * (bounds[1][0] + bounds[0][0])) / 2, 
                  (height - scale * (bounds[1][1] + bounds[0][1])) / 2];

      projection.scale(scale).translate(transl);

      vis.selectAll("path").data(json.features).enter().append("path")
        .attr("d", path)
        .style("fill", "#D0D0D0")
        .style("stroke-width", "0.5px")
        .style("stroke", "black")
    });

</script> 
```

有关完整的工作解决方案，请参阅[http://bl.ocks.org/djvanderlaan/5336035](http://bl.ocks.org/djvanderlaan/5336035)。

# http - 什么是“延迟缓存”？

> ID：14646657
> 
> 赞同：4
> 
> 时间：2013-02-01T12:47:45.417
> 
> 标签：http, caching, browser-cache, errordocument

我在重读[这篇很棒的文章](http://terrychay.com/article/php-coders.shtml)时偶然发现了一些我之前没有注意到的东西，这就是作者所说的 Lazy Caching。准确地说，这里是上下文：

> 他们知道如何使用错误文档进行延迟缓存吗？

什么是延迟缓存以及错误文档与此有何关联？我一直在谷歌搜索这些被改写和分开的短语，但没有成功。

有人可以解释那是什么以及在哪里使用吗？我认为只是有一个不同的名称，我不知道是什么。

[PS如果你知道如何更好地标记这个问题，请这样做！]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T04:52:14.780

“错误文档”可能只是指 HTTP 状态代码，特别是`304 Not Changed`状态。有人可能会称其为“延迟缓存”，因为在静态网站上，您通常不需要做任何事情来设置它。

它如何在静态网站上工作：

1.  浏览器请求 URL。
2.  服务器返回响应，包括`Last-modified: [last modified date of static file]`标头。
3.  浏览器稍后请求相同的 URL，包括`If-Modified-Since: [last modified date from first request]`请求标头。
4.  服务器返回`304 Not Modified`响应。

由于动态页面显然不能依赖文档的修改日期，因此您必须竭尽全力实现这种缓存。它的工作方式完全相同，但不是依赖 HTTP 服务器自动执行任何操作，而是`Last-modified`根据数据库值（或其他值）计算日期并将其与每个响应一起发送。然后，当您收到包含`If-Modified-Since`标头的请求时，您可以跳过计算上次修改日期所需的任何处理并发送`304 Not Modified`响应，从而可能节省大量带宽和 CPU 周期。

如果您正在寻找的话，这里有[一个 PHP 示例可以帮助您入门。](http://www.justsoftwaresolutions.co.uk/webdesign/provide-last-modified-headers-and-handle-if-modified-since-in-php.html)

# asp.net - 我正在为我的 ASP.NET MVC 应用程序寻找分布式数据/对象缓存

> ID：14646658
> 
> 赞同：1
> 
> 时间：2013-02-01T12:47:50.713
> 
> 标签：asp.net, .net, asp.net-mvc, caching, azure

我正在为我的 ASP.NET MVC 应用程序寻找分布式数据（对象）缓存解决方案。类似 Scale Out 或 NCache 但最好是免费的。

我相信这`System.Runtime.Caching.MemoryCache`是缓存的单个服务器实现。

我相信 Azure 有一个 ASP.NET 应用程序可以使用的分布式缓存，但我不确定两件事：

1) 我真的不知道 Azure 是什么，只是模糊地理解它是 Microsoft 提供的某些服务的营销名称，例如 (1) 在其硬件基础架构上部署应用程序的能力（通常称为cloud) 和 (2) 软件基础架构产品的统称，例如 Visual Studio 和 Eclipse 插件、可在应用程序内部使用的类库等，以帮助您完成 (1)。

2) 我不确定我希望在我自己的硬件上部署的 ASP.NET 应用程序是否可以使用他们的 Azure 提供的缓存，因为我读到了一个模糊的断言，类似于“Azure 为 ASP.NET 应用程序提供分布式缓存使用 Azure”，它正在成为微软所有通信的相当普遍的事实上的标准。

帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:08:08.433

您可以使用[memcached](http://memcached.org/)。这是一个非常流行的分布式缓存系统，您可以将其部署在自己的基础架构上并使用托管客户端，例如[`enyim`](https://github.com/enyim/EnyimMemcached).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:11:47.570

1.  [Couchbase](http://www.couchbase.com/)是对 memcached 的 .Net 改编。它是开源和免费的。
2.  [NCache](http://www.alachisoft.com/)是付费且更成熟的解决方案（他们确实提供免费的 Express 版本）。

我个人喜欢 Couchbase 的简单方法，但它缺乏枚举缓存对象、清除缓存等功能。另一方面，NCache 提供与 System.Web.Caching.Cache 相同的功能，同时为分布式缓存解决方案提供额外的功能。

PS我不隶属于上述任何一家公司。

# java - 有没有办法显示正在运行的 JVM 中使用的标志？

> ID：14646660
> 
> 赞同：4
> 
> 时间：2013-02-01T12:47:54.357
> 
> 标签：java, jvm

尽管我们已经为我们的应用程序明确设置了许多 JVM 标志，但很难知道： 1\. 默认情况下，布尔标志已经打开（默认值在 JDK/JRE 次要更新之间更改） 2\. 一个标志否定其他 3。给定任意标志的默认值在您的特定系统上是什么（由 Java 人体工程学设置）

总结一下：有没有类似的命令行工具

```
java -XX:+PrintFlagsFinal 
```

，我可以在哪里检查已经运行的 JVM 的所有标志值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:50:48.557

对于 HotSpot，您可以使用（来自 ehcache）

```
private static String getHotSpotVmOptionValue(String name) {
    try {
        MBeanServer server = ManagementFactory.getPlatformMBeanServer();
        ObjectName beanName = ObjectName.getInstance("com.sun.management:type=HotSpotDiagnostic");
        Object vmOption = server.invoke(beanName, "getVMOption", new Object[] {name}, new String[] {"java.lang.String"});
        return (String)((CompositeData)vmOption).get("value");
    } catch (Throwable t) {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:12:11.717

您正在寻找[jinfo](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jinfo.html)。它允许您从命令行查看和设置 JVM 标志。它是用于 JVM的众多广为人知的[工具和实用程序之一。](http://docs.oracle.com/javase/7/docs/technotes/tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T05:09:49.413

此技术适用于任何本地或远程运行的 java 应用程序。

1.  启动您的 Java 应用程序
2.  运行JDK 中找到的[JVisualVM](http://docs.oracle.com/javase/7/docs/technotes/guides/visualvm/)（例如 C:\Program Files\Java\jdk1.8.0_05\bin\jvisualvm.exe）
3.  当这个有用的工具启动时，查看“本地”树节点下正在运行的 java 应用程序的列表。
4.  双击树中的 [您的应用程序] (pid [n])
5.  在右侧，应用程序选项卡中将显示检查内容。在 Overview 选项卡的中间，您将看到应用程序的 JVM 参数。

jvisualvm 可以在自 JDK 6 Update 7 以来的任何 JDK 中找到。关于 jvisualvm 的视频教程在[这里。](https://www.youtube.com/watch?v=z8n7Bg7-A4I)

# c# - 在单独的表格行中插入值

> ID：14646662
> 
> 赞同：0
> 
> 时间：2013-02-01T12:47:57.990
> 
> 标签：c#, asp.net, checkboxlist, sqlcommand

我正在尝试`checkboxlist`在数据库中插入多个值，

这是我的插入代码：

```
 string str = string.Empty;
    try
    {
        var sb = new StringBuilder();

        var collection = ListLawCat.CheckedItems;
        foreach (var item in collection)
        {
            str += item.Value + ",";
        }

        SqlConnection con = new SqlConnection();
        con.ConnectionString = connString;

        SqlCommand com = new SqlCommand();
        com.Connection = con;
        com.CommandText = "Insert into TABLE (COL1, COL2) values ('" + str + "','" + DocID + "') ";
        com.CommandType = CommandType.Text;

        con.Open();

        int j = com.ExecuteNonQuery();

        if (j > 0)
        {
            Response.Write("insert successfully");
            Response.Write(str);
        }
        else
        {
            Response.Write("Not Inserted");
        }
        con.Close();
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
    } 
```

但是此代码会将所有`checkboxlist`值存储在一行中。

这是一种将值存储在单独的表行中的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:55:18.230

尝试这个

```
 string str = string.Empty;
 try
 {
    var sb = new StringBuilder();
    SqlConnection con = new SqlConnection();
    con.ConnectionString = connString;

    SqlCommand com = new SqlCommand();
    com.Connection = con;
    var collection = ListLawCat.CheckedItems;
    foreach (var item in collection)
    {

    com.CommandText = "Insert into TABLE (COL1, COL2) values ('" +  item.Value+ "','" + DocID + "') ";
    com.CommandType = CommandType.Text;

    con.Open();

    int j = com.ExecuteNonQuery();
    if (j > 0)
    {
        Response.Write("insert successfully");
        Response.Write( item.Value);
    }
    else
    {
        Response.Write("Not Inserted");
    }
    con.Close();
    }
}
catch (Exception ex)
{
    Response.Write(ex.Message);
} 
```

# php - Twig：如何围捕？

> ID：14646664
> 
> 赞同：14
> 
> 时间：2013-02-01T12:48:02.443
> 
> 标签：php, symfony, twig, number-formatting

我在树枝上有一个部门。有时，结果可能是小数，我需要总是有一个四舍五入的结果。

前任。

```
7 / 2 = 3.5 
```

我想拥有

```
7 / 2 = 4 
```

我知道如何在树枝中使用地板：

```
7 / 2 | floor = 3 
```

但这是四舍五入到下位，而不是上位。

我也知道我可以使用 number_format

```
7 / 2 | number_format(0, '.', ',') = 3 
```

所以这也将占用下位数。

关于如何告诉树枝取高位数字的任何想法？

这可以在控制器（Symfony）中完成，但我正在寻找树枝版本。

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-01T13:01:17.293

### 更新

在 1.15.0+ 版本上，`round`过滤器可用。

```
{{ (7 / 2)|round(1, 'ceil') }} 
```

[http://twig.sensiolabs.org/doc/filters/round.html](http://twig.sensiolabs.org/doc/filters/round.html)

* * *

您可以扩展 twig 并编写自定义函数，如此处[所述](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html)

它会是这样的：

```
<?php
// src/Acme/DemoBundle/Twig/AcmeExtension.php
namespace Acme\DemoBundle\Twig;

class AcmeExtension extends \Twig_Extension
{
    public function getFilters()
    {
        return array(
            'ceil' => new \Twig_Filter_Method($this, 'ceil'),
        );
    }

    public function ceil($number)
    {
        return ceil($number);
    }

    public function getName()
    {
        return 'acme_extension';
    }
} 
```

所以你可以在树枝中使用它：

```
(7 / 2) | ceil 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-17T14:30:50.950

1.15.0 版中的新功能：在 Twig 1.15.0 中添加了圆形过滤器。

例子：`{{ 42.55|round(1, 'ceil') }}`

圆形过滤器有两个可选参数；第一个指定精度（默认为0），第二个指定舍入方法（默认为常用）

[http://twig.sensiolabs.org/doc/filters/round.html](http://twig.sensiolabs.org/doc/filters/round.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-21T11:32:30.290

不知道它在以前的版本中是怎样的，但在 Symfony 2.2.1 中，您必须在计算周围使用括号（假设您创建了扩展）：

`(7 / 2)|ceil`

显然`7 / 2|ceil`是一样的，`7 / (2|ceil)`因为它们都给出了相同的（错误的）结果，并且只有上述解决方案对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T12:51:27.147

你试过`7 // 2`吗？

此[文档页面](http://twig.sensiolabs.org/doc/templates.html#math)可能很有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-17T18:40:09.470

[http://twig.sensiolabs.org/doc/filters/round.html](http://twig.sensiolabs.org/doc/filters/round.html)

从 Twig 1.15.0 开始，您可以使用“round”过滤器并将“ceil”作为第二个参数传递。解决方案如下所示：

```
{{ (7 / 2)|round(0, 'ceil') }} 
```

显示的格式化数字绝对属于视图，而不是控制器。这将被视为显示逻辑——这与控制器中的业务逻辑不同，控制器中的业务逻辑应尽可能保持干净。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-09T15:55:29.717

圆形过滤器将第一个参数作为精度。因此，回答 OP 问题的正确表述是：

```
{{ (7 / 2)|round(0, 'ceil') }} 
```

而不是

```
{{ (7 / 2)|round(1, 'ceil') }} 
```

[http://twig.sensiolabs.org/doc/filters/round.html](http://twig.sensiolabs.org/doc/filters/round.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-09T20:39:27.413

如果您使用的是 1.12.0 或更高版本，则可以使用三元运算符并执行以下操作：

`{{ ((7 / 2) > (7 // 2)) ? (7 // 2) + 1 : (7 // 2) }}`

它不是那么“优雅”，但它仍然有效。

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2013-02-01T12:54:22.223

[http://php.net/manual/en/function.ceil.php](http://php.net/manual/en/function.ceil.php)

使用php的天花板功能做你想做的事

# php - 谁能告诉我如何编写代码来抑制 htaccess 文件中的以下错误？

> ID：14646665
> 
> 赞同：1
> 
> 时间：2013-02-01T12:48:07.227
> 
> 标签：php, apache, .htaccess

谁能告诉我如何编写代码来抑制 htaccess 文件中的以下错误？

*   警告
*   电子通知
*   致命错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:54:14.143

```
php_value error_reporting 0
php_flag display_errors Off 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:58:17.140

To display error messages caused by your PHP script you can include these lines of code:

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:52:07.887

使用以下`error_reporting()`功能集启用错误。

```
<?php

    // Report simple running errors
    error_reporting(E_ERROR | E_WARNING | E_PARSE);

    // Reporting E_NOTICE can be good too (to report uninitialized
    // variables or catch variable name misspellings ...)
    error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

    // Report all errors except E_NOTICE
    // This is the default value set in php.ini
    error_reporting(E_ALL ^ E_NOTICE);

    // Report all PHP errors (see changelog)
    error_reporting(E_ALL);

    // Report all PHP errors
    error_reporting(-1);

    // Same as error_reporting(E_ALL);
    ini_set('error_reporting', E_ALL);

    ?> 
```

# algorithm - Algorithm to solve find max no at a time

> ID：14646668
> 
> 赞同：4
> 
> 时间：2013-02-01T12:48:11.203
> 
> 标签：algorithm, language-agnostic

Question: We are given an array of 2n integers wherein each pair in this array of integers represents the year of birth and the year of death of a dinosaurs respectively. The range of valid years we want to consider is [-100000 to 2005]. For example, if the input was:

```
-80000 -79950 20 70 22 60 58 65 1950 2004 
```

it would mean that the first dinosaur had a birth year of –80000 and an year of death of –79950 respectively. Similarly the second dinosaur lived from 20 to 70 and so on and so forth.

We would like to know the largest number of dinosaurs that were ever alive at one time. Write a method to compute this, given the above array of 2n integers.

Can anyone suggest the way to find out solution?

Edit tried with this-> rough code

```
#include<stdio.h>
#include<stdlib.h>
#include <stddef.h>
static void insertion_sort(int *a, const size_t n) {
    size_t i, j;
    int value;
    for (i = 1; i < n; i++) {
        value = a[i];
        for (j = i; j > 0 && value < a[j - 1]; j--) {
            a[j] = a[j - 1];
        }
        a[j] = value;
    }
}

int  main(){
    int arr[10]={-80000,-79950,20,70,22,60,58,65,1950,2004};
    int strt[5],end[5];
    int bal[5];
     int i,j,k,l,m,length;
     l=0;
     m=0;
   for (i=0; i<10; i++){
       //printf("i = %2d arr[i] = %2d\n", i, arr[i]);
       if(i%2==0){
       strt[l]=arr[i];
       l++;
       }else{
       end[m]=arr[i];
       m++;
       }
   }
   insertion_sort(strt, sizeof strt / sizeof strt[0]);
   insertion_sort(end, sizeof end / sizeof end[0]);
   k=sizeof(end)/sizeof(int);
   for(j=0;j<5;j++){
       bal[i]=strt[i]-end[k-1];
       k--;

   }
   length=sizeof bal / sizeof bal[0];
   insertion_sort(bal, sizeof bal / sizeof bal[0]);
   printf("answer is = %2d",bal[length-1]);

} 
```

But output is not as expected. Please tell me what I miss.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T12:57:25.540

Consider each dinosaur birth as an open parenthesis and death as a close one. Then sort the parenthesis by date - this will give you chronological order of every event of birth and death. After that pass over the parenthesis sequence and compute the balance (increment on '(' and decrement on ')' ). Track the maximal balance and it will be the answer.

**Update:**

Sample source in C++.
Input: number of dinosaurs *n*, then *2n* dates of birth and death.
Output: number of maximal quantity of dinos living at the same time

```
#include <algorithm>
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    int n;
    cin >> n;
    vector<pair<int, int> > dinos(2*n); // <date, died/born>
    int i;
    for( i = 0; i < n; ++i )
    {
        cin >> dinos[ 2 * i ].first >> dinos[ 2 * i + 1 ].first;
        dinos[ 2 * i ].second = 1; // born
        dinos[ 2 * i + 1 ].second = 0; // died
    }
    sort( dinos.begin(), dinos.end()); // sorts by date first
    int ans = 0, balance = 0;
    for( i = 0; i < dinos.size(); ++i )
        if( dinos[ i ].second ) // someone's born
        {
            ++balance;
            ans = max( ans, balance ); // check for max
        }
        else
            --balance;
    cout << ans << endl;
    return 0;
} 
```

**P.S.** I assumed that if two dinos born and died at the same time then they didn't live together. If you want the opposite, just change the values as born=0, died=1.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:10:25.170

```
Largest number of dinosaurs that were ever alive at one time? 
```

This is sample source code for **java**.

Input: number of dinosaurs n, n dates of birth and n dates of death.

Output: largest number of dinosaurs that were ever alive at one time

```
import java.util.Arrays;

public class Dinosaur {

   public static void main(String args[]) {
        int birthAndDeath[] = { -80000, -79950, 20, 70, 22, 60, 58, 65, 1950, 2004};
        System.out.print("Maximum number of dinosaurs that were ever alive at one time: " + new Dinosaur().findMaxdinosaur(birthAndDeath));
    }

   /**
    * Find the Maximum number of dinosaurs that were ever alive at one time.
    * @param years
    * @return maximum number of dinosaurs that were ever alive at one time.
    */
   public int findMaxdinosaur (int[] years) {
        /** For birth array */
        int birthArray[] = new int [years.length/2];

        /** For death array */
        int deathArray[] = new int [years.length/2]; 

        int birthCounter = 0, deathCounter = 0;
        int currentAliveDinos = 0;

        /** Maximum number of dinosaurs that were ever alive at one time. */
        int maxDinos = 0; 

        int position = 0;

        /** To get the birth and death values in different array */
        for(int index = 0; index < years.length; index = index + 2) {
            birthArray[position] = years[index];
            deathArray[position] = years[index + 1];
            position++;
        }       

        /** Sort the birth and death array in ascending order. */
        Arrays.sort(birthArray);
        Arrays.sort(deathArray);

        /** Calculating max number of dinosaurs that were ever alive at one time **/
        while( birthCounter != years.length/2 && deathCounter != years.length/2) {
            if(birthArray[birthCounter] < deathArray[deathCounter]) {
                currentAliveDinos++;
                birthCounter++;
            } else {
                currentAliveDinos--;
                deathCounter++;
            }
            if(maxDinos < currentAliveDinos) {
                maxDinos = currentAliveDinos;
            }
        }
        return maxDinos;
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T12:55:05.387

Create a structure called `DinosaurEvent` and have it store one year- the year when the event occurred and the type of event - birth or death. Implement your own compare function to pass to qsort to first sort according to year and than to event(take into consideration if the deaths happen before births or the other way around i.e. is the range inclusive in either end) Iterate over the array you are given and put all events in a vector. After that sort the vector and process events in turn. Process all events for a given year at the same time(or only births or death depending on the statement) and re-compute the current number of living dinosaurs(for birth increase by one for death decrease by one). Store the maximum value at all times and this will be your answer. Hope that makes sense.

Sorry for giving the whole solution by I could not figure out a way to give you a hint without actually saying it all.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T15:19:40.510

Here a python scrypt

```
n=5
birthAndDeath = [-80000, -79950, 20, 70, 22, 60, 58, 65, 1950, 2004]
birth = [] #date of birth of dinos 
death = [] #date of death of dinos

currentAliveDinos=0
maxDinos=0
dateLastBornForMax=0
b = 0
d = 0

#we populate the both arrays for births and deaths
for i in range(0,2*n,2):
    birth.append(birthAndDeath[i])
    death.append(birthAndDeath[i+1])

#don't forget to sort arrays particuliary for death
death.sort()
birth.sort()
print birth
print death

while b!=5 and d!=5:#there are still unborn dino
    if birth[b] < death[d]: # a dino born
        currentAliveDinos = currentAliveDinos + 1
        b = b + 1 
    else: # a dino died
        currentAliveDinos = currentAliveDinos - 1
        d = d + 1       

    if maxDinos < currentAliveDinos:
        maxDinos = currentAliveDinos
        dateLastBornForMax=birth[b-1]

    print currentAliveDinos

print "max dinos = ", maxDinos, " and last dino born in ", dateLastBornForMax, " when max achieved" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T09:19:10.560

```
#include <iostream>
#include <algorithm>
#include <vector>

using namespace std;

int main()
{

unsigned int n;
cin >> n;
vector<pair<int, int> > dinos(2*n); // <date, died/born>

unsigned int i;
for( i = 0; i < n; ++i )
{
cin >> dinos[ 2 * i ].first >> dinos[ 2 * i + 1 ].first;
dinos[ 2 * i ].second = 1; // born
dinos[ 2 * i + 1 ].second = 0; // died
}

sort( dinos.begin(), dinos.end()); // sorts by date first
int ans = 0, balance = 0;

for( i = 0; i < dinos.size(); ++i ) {
if( dinos[ i ].second ) // someone's born
{
++balance;
ans = max( ans, balance ); // check for max
} else
--balance;
}
cout << ans << endl;
return 0;
} 
```

# javascript - jQuery 添加 style="overflow: hidden;"

> ID：14646669
> 
> 赞同：14
> 
> 时间：2013-02-01T12:48:14.067
> 
> 标签：javascript, jquery, css

我创建了一些代码来隐藏我的菜单，菜单不完整，但我正在尝试使用`jQuery.slideUp()`功能，但它会添加`style="overflow: hidden;"`到代码中，所以当我使用 .show 时，我的一个元素被隐藏了`#nav:after`，`#nav:before`它添加了一个小箭头到菜单底部

这是js代码

```
 $("span#start_button").click(function () {
        if ($("#nav").is(":hidden")) {
            $("#nav").show("fast");
        } else {
            $("#nav").slideUp();
        }
    }); 
```

这是[这个网站上的结果](http://laggy.koding.com/)

我怎样才能停止`.slideUp()`创作`style="overflow: hidden;"`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T13:17:24.060

您必须删除函数`overflow:hidden`的回调，`slideUp()`以便您可以尝试

```
$("#nav").slideUp('fast', function(){ $('#nav').css('overflow','visible') }); 
```

或者你可以通过 css 强制它

```
#nav{overflow:visible!important} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-30T11:01:47.147

这是旧 jquery 中的[错误](http://bugs.jquery.com/ticket/12630)。此代码替换标准函数“slideDown”并删除溢出属性。

```
!(function (jQuery, origSlideDown) {
jQuery.fn.slideDown = function (speed, easing, callback) {
    var self = this;
    var args = Array.prototype.slice.call(arguments);
    var origCallback;

    for (var i = 0, len = args.length; i < len; i++) {
        if (jQuery.isFunction(args[i])) {
            origCallback = args[i];
            args[i] = function () {
                origCallback.call(this);
                self.css('overflow', '');
            }
        }
    }

    if (!origCallback) {
        args.push(function () {
            self.css('overflow', '');
        });
    }

    return origSlideDown.apply(this, args);
};
})(jQuery, jQuery.fn.slideDown); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:56:52.233

覆盖那种风格 -

```
 $("#nav").slideUp();
   $("#nav").css({'overflow':'visible'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:51:16.263

通过修改 html 的 style 属性来覆盖默认样式。

```
else {
       $("#nav").slideUp();
       $("#nav").attr("style","overflow:visible");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:52:26.950

试试这个...

```
else {
   $("#nav").slideUp();
   $("#nav").css("overflow","visible");
} 
```

# for-loop - for 循环没有按预期运行，我忘记了什么？

> ID：14646672
> 
> 赞同：0
> 
> 时间：2013-02-01T12:48:19.997
> 
> 标签：for-loop

仅一次警报，仅适用于 0。任何帮助将不胜感激。谢谢卡格拉尔

```
var ayIsimleri = new Array ( "Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık" );

for (i = 0; i < 12; i++)
{ 
     alert(i);
     secenekAy = secenekAy + '<input type="checkbox" id="'+ i +'">'+ ayIsimleri[i] + '<br>';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:52:14.713

您的 javascript 正在破坏您的代码，它不是 for 循环问题。

检查 javascript 控制台，让我们知道那里的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:54:13.660

因为您还没有定义 variable `secenekAy`，所以异常中止了循环。只需添加`var secenekAy = ""`即可解决您的问题。

# javascript - Javascript：在 js 文件中包含大列表

> ID：14646676
> 
> 赞同：2
> 
> 时间：2013-02-01T12:48:33.497
> 
> 标签：javascript

我有一个城市名称列表。我想使用 javascript 在 html 选择列表中填充此列表。列表有 1000 多个城市名称。不需要服务器请求。列表是静态的。

将如此大的列表包含到您的 js 文件中的最佳方法是什么？考虑到性能问题，我认为在 js 中声明大数组会使其变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:56:11.430

将其作为 javascript 数组包含在内。这样您就可以轻松地循环遍历它并填充您的选择框。

```
var cities = [ 'London', 'Paris', 'Rome' ]; 
for (index in cities) {
    var city = cities['index'];
    //add value to select box
} 
```

如果您需要的不仅仅是城市名称，您可以创建一个对象数组：

```
var cities = [ { id : '1', name : 'Rome' }, { id : '2', name : 'London' }, ... ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:54:22.013

将其作为 JSON 包含在具有`script`浏览器未处理的 mime 类型的标签中，例如

```
<script type="conf/cities" id="citieslist">
['New York', 'London' ... 'Amsterdam']
</script> 
```

然后可以检索内容，例如使用 jQuery：

```
var citylist = $.parseJSON($("#citieslist").text()); 
```

**更新：** 另一种方法是将列表包含为一个简单的文本字符串，其名称由换行符分隔。这将允许您简单地使用`string.split()`来获取列表。

```
var citylist = $("#citieslist").text().split('\n'); 
```

如下所示，这是相当节省空间的。

```
<script type="conf/cities" id="citieslist">
New York
London
Amsterdam
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:59:51.133

如果只涉及JS，你可以创建这样的东西

var city = ['City1', 'City2', 'City3', ... ];

如果控制器也参与。您可以在控制器中形成城市数组，将其分配给视图和视图文件

var city = [ echo $cityList; ];

其中 $cityList 是一个来自控制器的数组。

# objective-c - 在 Objective-C 中，如何检测是否有多个线程正在访问该方法？

> ID：14646677
> 
> 赞同：1
> 
> 时间：2013-02-01T12:48:37.157
> 
> 标签：objective-c, multithreading

在Objective-C中，我们知道@synchronized可以用来定义临界区，但是有没有办法知道多个线程是否在访问一个方法或代码块呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:53:24.923

您可以使用一个`NSLock`对象（[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html)）并使用以下方法测试锁`tryLock`：

```
@interface MyObject : NSObject
{
    NSLock *_lock;
}
...

@end

@implementation MyObject

- (id)init
{
    ...
    _lock = [[NSLock alloc] init];
    ...
}

- (BOOL)myMethod
{
    if (![_lock tryLock])
    {
        NSLog(@"Failed to acquire lock");
        return NO;
    }

    // Thread has exclusive access
    // Caution; the lock won't be automatically unlocked if this method throws an exception
    // so add some exception handling here to ensure it's always unlocked...
    @try
    {
        // Do stuff
    }
    @finally
    {
        [_lock unlock];
    }
    return YES;
}

@end 
```

# javascript - 将项目名称从组合框设置为淘汰列表

> ID：14646678
> 
> 赞同：0
> 
> 时间：2013-02-01T12:48:38.257
> 
> 标签：javascript, knockout.js

我在显示从组合框到淘汰赛列表的值时遇到一个问题。请在下面的图片中我从组合框中选择项目。当我从组合框中选择项目时，它会更新所有具有相同值的行。 ![具有相同值的列表](../Images/06b88f686f5ead7bc8f10ff2e2bad62f.png)

左侧的列表不存储数据库中组合框中的名称，但它存储 id。所以组合框和列表与称为状态的列相连。在我的 html 中，我定义了如下列表，其中 ChangeControlName 是我要绑定到列表的列表

```
<tbody data-bind="foreach: versionDataByProduct">

    <tr data-bind="click: $root.EditVersionDetail, css: { selected: isSelected}"   >

        <td data-bind="text: Name "></td>
        <td data-bind="text: Code"></td>
        <td data-bind ="text: PlatformVersionName"></td>
        <td data-bind ="text: ChangeControlName"></td>
      </tr> 
```

组合框在我的视图模型中加载如下

```
 // Load Change Control List
    function loadChangeControlList() {
        $.ajax({
            url: "../RestService/Product/ChangeControlList",
            type: "PUT",
            contentType: 'application/json',
            processData: false,
            error: function (XMLHttpRequest, textStatus, errorThrown) {

            },
            success: function (allData) {
                var mappedChangeControls = $.map(allData, function (item) {

                    return new changeControlList(item);
                });
                self.ChangeControls(mappedChangeControls);

            }
        });
    } 
```

我已经在 html 中绑定了我的组合框，如下所示

```
<td><select id="selModuleType"  data-bind="options: $root.modules,  optionsCaption: 'Please select Module...' , value: $root.editModuleId , optionsText: 'ModuleName'" /></td> 
```

当我在左手边选择行时，如上图所示，我得到 selectedrow。在值 editModuleId 的订阅事件上，我尝试将值分配给选定的行，如下所示。

```
self.editChangeControl.subscribe(function (value) {
        if (!value) {
            return;
        }

        self.selecteditem().ChangeControlId(value.Status());

        self.selecteditem().ChangeControlName(value.ChangeControl());

    }); 
```

在上面的代码中 selecteditem 包含我们选择的行。正如您在上面的代码中看到的，ChangeControlId 是我们从组合框中选择的值的 id，它已正确设置到列表中。但是名称设置不正确。原因是 ChangeControlId 存储在数据库中。ChangeControlId 是显示这些行的表的一部分。我想要的 ChangeControlName 仅用于显示目的。我应该怎么办？我也尝试使用计算的 observable，但它在列表中显示为“对象对象”。我使用如下计算的 observable

```
 this.ChangeControlName = ko.computed({
            read: function () {
                debugger;
                return ko.utils.arrayFirst(self.ChangeControls(), function (item) {
                    if (item.Status() === productVersionId.ChangeControlId()) {
                        return item.ChangeControl();
                    }
                });
            },

            write: function (value) {
                console.log("Value i get " + value);
                return value;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:19:32.547

给你，你的设计让你很难到达你想去的地方。

```
var VersionModel = function () {
  var self = this;

  self.changeControls = ko.observable([{
    name: "Addressed",
    value: 1
  }, {
    name: "Not Addressed",
    value: 2

  }]);

  console.log(self.changeControls()[0].value);
  self.versionDataByProduct = [{
    Name: "DS",
    Code: "sd",
    PlatformVersionName: "5.5.3",
    ChangeControl: ko.observable(self.changeControls()[0]),
  }, {
    Name: "EF",
    Code: "sd",
    PlatformVersionName: "5.5.3",
    ChangeControl: ko.observable(self.changeControls()[0])
  }];
  self.selected = ko.observable(self.versionDataByProduct[0]);
  self.EditVersionDetail = function (item) {

    self.selected(item);
  };
  self.editModuleId = ko.observable();
  self.modules = [{
    editModuleId: 1,
    ModuleName: "ABW-BP-Batch Input"
  }];

  self.editChangeControl = ko.computed({
    read: function () {
      if (self.selected()) {
          console.log('something selected and editChangeControl is changing');
        return self.selected().ChangeControl();
      }
      return '';
    },
    write: function (value) {
      if (value && value != '') {
          console.log('writing new value');
        self.selected().ChangeControl(value);
      }
    }
  });

}
ko.applyBindings(new VersionModel()); 
```

和html：

```
<table class="floatLeft">
  <thead>
    <tr>
      <th>Version name</th>
      <th>Version Code</th>
      <th>Framework version</th>
      <th>Change control</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: versionDataByProduct">
    <tr data-bind="click: $root.EditVersionDetail, css: { selected: $root.selected() == $data}">
      <td data-bind="text: Name "></td>
      <td data-bind="text: Code"></td>
      <td data-bind="text: PlatformVersionName"></td>
      <td data-bind="text: ChangeControl().name,attr:{'data-value':ChangeControl().value}"></td>
    </tr>
  </tbody>
</table>
<select id="selModuleType" data-bind="options: $root.modules,  optionsCaption: 'Please select Module...' , value: $root.editModuleId , optionsText: 'ModuleName'"></select>
<select id="selfChangeControl" data-bind="options: $root.changeControls,  optionsCaption: 'Please select Change control...' , value: editChangeControl , optionsText: 'name'"></select> 
```

[http://jsfiddle.net/2Khk3/4/](http://jsfiddle.net/2Khk3/4/)

# asp.net - ASP Report Viewer 11 渲染问题

> ID：14646679
> 
> 赞同：0
> 
> 时间：2013-02-01T12:48:38.867
> 
> 标签：asp.net, reporting-services, reportviewer

我正在尝试在我们将在内部使用的 ASP webapp 中显示我们的几个 SSRS 报告，我选择通过远程使用本地报告，重新创建其中一个，并从 VS2012 模板和一个快速的 ASP 表单站点放在一起带有报表查看器控件的页面，报表似乎在各种仪表和图表之间呈现大量额外空间，下面是报表设计器中的报表图片链接和 FireFox 中的报表查看器（它在 Chrome 中以这种方式呈现和 IE10），因为您可以看到所有对象的额外空间量并不相同，并且移动报告中的仪表板以在它们之间留出更少或更多的空间没有影响，我尝试了面板一半重叠另一个，它在报表查看器中以相同的方式显示。

我已经尝试了几乎所有我能想到的东西，所以想知道其他人是否有任何想法？

提前致谢！

[https://picasaweb.google.com/110986692033703031755/ReportViewer?authuser=0&feat=directlink](https://picasaweb.google.com/110986692033703031755/ReportViewer?authuser=0&feat=directlink)

这是报告查看器配置：

```
<asp:Content ID="LineReportViewer" ContentPlaceHolderID="MainContent" Runat="Server">
    <rsweb:ReportViewer ID="ReportViewer_Line_Overview" runat="server" Font-Names="Verdana" Font-Size="8pt" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Height="768px" Width="1280px" ShowToolBar="False" SizeToReportContent="True"  ShowWaitControlCancelLink="False">
        <LocalReport ReportPath="Reports\Line_Overview.rdlc" EnableExternalImages="True" EnableHyperlinks="True">
            <DataSources>
                <rsweb:ReportDataSource DataSourceId="Production_Data" Name="OEEView" />                </DataSources>
        </LocalReport>
    </rsweb:ReportViewer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:24:44.117

在页面检查器中，我能够找到几个空表部分，它们放置在两个仪表和一个图表旁边，我不知道它们为什么在那里，但我删除并重新创建了受影响的报告部分，一切看起来现在好了。

# python - 带有 AttributeError 的 OpenCV 的 Python 绑定：“模块”对象没有属性“FeatureDetector_create”

> ID：14646692
> 
> 赞同：4
> 
> 时间：2013-02-01T12:49:27.590
> 
> 标签：python, opencv, computer-vision, surf, object-detection

我正在使用 OpenCV 2.4.X 和 OpenCV 3.1 的 python 绑定，但使用以下简单的两行

```
import cv2
detector = cv2.FeatureDetector_create("SURF") 
```

我得到以下输出：

```
Traceback (most recent call last):
   File "version_test.py", line 3, in <module>
    detector = cv2.FeatureDetector_create("SURF")
AttributeError: 'module' object has no attribute 'FeatureDetector_create' 
```

每个版本中出现此错误的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-01T01:01:55.790

对于 2.4.X 版本，我似乎也需要 opencv-devel 和 opencv-debuginfo (rpm/deb) 软件包。

关于 3.1 版本，这些功能已被删除，取而代之的是类似的功能

```
detector = cv2.TYPE_create() 
```

where `TYPE`can be`ORB`或您选择的其他检测器，但不是`SURF`，`SIFT`并且已移至非[自由](https://github.com/opencv/opencv_contrib)包。有关更多信息，请查看此[来源](http://www.aichengxu.com/other/6815650.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-27T15:19:00.487

您还可以使用以下代码行：

```
detector=cv2.xfeatures2d.SURF_create() 
```

您还可以设置 Hessian 阈值。

```
detector=cv2.xfeatures2d.SURF_create(400) 
```

这里 Hessian 阈值=400

# php - 在 PHP 中处理多个（未）选中复选框的最简单和最干净的方法

> ID：14646693
> 
> 赞同：3
> 
> 时间：2013-02-01T12:49:27.780
> 
> 标签：php, html, mysql, checkbox, laravel

我有一个电子邮件系统，订阅者可以订阅多个列表。在订阅者编辑模式下，我有一个表格，其中列出了所有列表，其中包含检查订阅者订阅的复选框。

到目前为止，一切都很好 ：）

但是，我需要在表单提交时处理这些复选框。到目前为止，复选框代码如下所示：

```
<input type="checkbox" name="lists[]" value="<?= $list->id ?>" /> 
```

提交时将返回以下数据：

```
array(2) {
    [0]=> string(1) "7"
    [1]=> string(1) "8"
} 
```

但这里是“硬”部分。我总是可以循环数组并将订阅者添加到这些列表中，但用户可能已经订阅了这些列表。即使未操作任何复选框，也会发送这些 ID。

我想我可以做的是获取数组中的所有可用列表，标记那些取消订阅和订阅的列表，并忽略那些没有被操纵的列表。唯一的问题是，这听起来有点太复杂了。

你会怎么做？肯定有更简单的方法来做到这一点。最重要的是，如果订阅没有通过复选框进行操作，我不想更新它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:58:39.840

我如何解决它首先是通过创建一个列表数组，其中键是 id，值是检查 (1) 或不检查 (0) 的任何内容。

然后循环通过它来创建复选框。

并在保存时使用[array_diff_key](http://www.php.net/manual/en/function.array-diff-key.php)来找到它们的值发生变化的那些。然后将差异保存在数据库中。

有人建议使用`INSERT IGNORE`，但是对于大量数据来说效率很低。PHP 中的处理应该更快（因为无论如何您都需要从数据库中提取这些数据 - 以显示 checkbxes，因此您已经拥有它并且数据库没有真正的开销）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:16:35.007

感谢您的建议。我没有提到我使用 Laravel 作为框架，他们有一个功能可以解决这样的问题。

我使用以下代码解决了它：

```
$subscriber = Subscriber::find(Input::get('subscriber_id'));
$subscriber->maillist()->sync(Input::get('lists')); 
```

现在这让我的关系保持同步:)

# c++ - C++ 默认构造函数，用新对象初始化指针

> ID：14646696
> 
> 赞同：6
> 
> 时间：2013-02-01T12:49:30.563
> 
> 标签：c++, class, pointers, dynamic, default-constructor

我有以下问题： 在 myClass 中，我想默认初始化指向 yourClass 的指针，并使用新的 yourClass 地址。不幸的是，如果我想在任何时候删除指针，我都会得到一个（核心转储）。

```
class myClass
{
      protected:
      yourClass * yc;

      public:
      myClass() { yc = new yourClass(); }

      myClass(yourClass * tyc ) { delete yc; yc = tyc; }

      ~myClass() { delete yc; yc = NULL; }

      void setMyClass (yourClass * tyc) { delete yc; yc = tyc; }

      void print () { yc->print(); }
};

int main()
{
  yourClass b (//parameter);
  myClass * a = new myClass();
  a->print();
  a->setMyClass(&b)
  a->print();

  delete a;
  return 0;
} 
```

a 的 print() 应该会产生两个不同的打印，具体取决于 //parameters。

我考虑过你的类 yc；而不是 yourClass* yc，但我想知道是否可能。

**编辑：** 我以以下方式重新编写了代码并且它有效。看起来仍然很复杂，智能指针似乎很有希望，我仍然没有应用“三法则”。这里是代码。谢谢大家。

```
class myClass
{
      protected:
      yourClass * yc;
      bool dynamic;

      public:
        myClass() { dynamic = true; yc = new yourClass (); }
        myClass (yourClass * tyc ) 
        { 
          // dynamic init (like default)
          if (tyc == NULL ) { dynamic = true; yc = new yourClass (); }
          // static use of yc
          else { dynamic = false; yc = tyc; } 
        }
        // because only if dynamic is true, we need to erase
        ~blu () { if (dynamic) { delete yc; dynamic = false; } } 

        void setMyClass(yourClass* tyc) 
        { 
          // leaving unchanged if new-stuff is NULL or like old-stuff
          if ( tyc == yc || tyc == NULL ) return;
          else // treating dynamic and static differently
          { 
            if (dynamic) // if flag is set, must be deleted 
            {
              delete yc; yc = tyc; dynamic = false;
            }
            else // must not be deleted, dynamic is still false
            {
              yc = tyc;
            }
          }
        }
        void print () { yc->print(); }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T13:02:14.757

那是因为你试图删除太多：

*   您正在第二个构造函数中删除未分配的对象（删除`delete yc;`）
*   您正在尝试删除堆栈分配的对象，b。`delete a;`将尝试删除指向 b 的指针，该指针是堆栈上的一个对象；会发生什么取决于您的操作系统（我希望出现异常/核心转储/无论如何）

编辑：我发现的另一个问题.. `a->setMyClass(NULL)`

我会建议：

*   [这篇](https://stackoverflow.com/a/106614/863564)关于智能指针的帖子
*   这篇关于 RAII[的博文](http://blogs.msdn.com/b/hsutter/archive/2004/07/31/203137.aspx)
*   任何 C/C++ 入门解释堆栈与堆分配（静态与动态？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:06:34.940

你违反了三原则。

[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

这也是灾难的秘诀：

```
 myClass(yourClass * tyc ) { delete yc; yc = tyc; } 
```

如果 会发生什么`tyc==yc`？正确的。不漂亮 ：）

```
 myClass(yourClass * tyc ) { if (yc!=tyc) { delete yc; yc = tyc; } } 
```

# javascript - 基于 HTML5、Css3 和 Javascript 的游戏应用程序的最佳框架

> ID：14646700
> 
> 赞同：0
> 
> 时间：2013-02-01T12:49:42.600
> 
> 标签：javascript, html, css

我是网络开发人员，知道 HTML5/CSS 3 和 Javascript/Jquery。我是游戏开发的新手，我想创建应该在 IOS/Android/Blackberry 手机上运行的游戏 APP。我必须选择哪个框架来使用我知道的上述技术进行基于移动的游戏开发。

在我看来，我可能会选择的几个选项是：-

1.  电话间隙
2.  上风者
3.  移动应用
4.  同步茶
5.  钛或其他我不知道的东西。

我是否需要更改我的 javascript 代码以使其与这些框架兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:04:20.337

我已经这样做了，可以告诉我我做了什么，但我认为你有点困惑。如果您想使用 html5、css3 和 javacript 创建游戏，请将其作为原生应用程序部署到移动设备。有一些更大的考虑因素：

1) 你需要决定一个基于 javascript 的游戏引擎。有很多可供选择。对于我的第一个项目，我选择了 crafty.js ，它的重量非常轻，并且允许与它一起使用其他 js 库。你选择什么取决于你。

2）然后我设置了一个h5bp。我还在我的项目中使用了主干、require 和 jquery，以及crafty.js

3）开发你的游戏

4）一旦它在您的浏览器中运行，您就可以部署到 phonegap 以在您的各种设备上作为本机应用程序进行测试。相信我，您需要这样做，因为在您的目标设备上构建的每个设备和操作系统可能并不总是像它的 html5 对应物那样执行。

5）最后，当您能够构建每个原生应用程序包时，使用您的开发许可证（假设您为每台设备都购买了一个）在各个市场上发布您的应用程序：即 iTunes、Play、亚马逊应用商店等。

# c# - 从 C# Win CE 向 SQL Server 消息队列发送消息

> ID：14646705
> 
> 赞同：0
> 
> 时间：2013-02-01T12:49:53.483
> 
> 标签：c#, sql-server, windows-ce, message-queue

我在 SQL Server ITSERVER 上的数据库 cja 中有一个名为 log_line_queue 的队列。

我有一个在移动设备上运行的 C# Win CE 应用程序。我想从这个应用程序向 log_line_queue 发送一条消息。

到目前为止，这是我的代码：

```
var myQueue = new System.Messaging.MessageQueue("FormatName:Direct=OS:itserver\\private$\\dbo.cja.log_line_queue");

myQueue.Send("My Message Data.", MessageQueueTransactionType.Automatic); 
```

结果是

```
System.Messaging.MessageQueueException: Message Queue service is not available.
   at System.Messaging.MessageQueue.MQCacheableInfo.get_WriteHandle()
   at System.Messaging.MessageQueue.StaleSafeSendMessage(MQPROPS properties, IntPtr transaction)
   at System.Messaging.MessageQueue.SendInternal(Object obj, MessageQueueTransactionType transactionType)
   at System.Messaging.MessageQueue.Send(Object obj, MessageQueueTransactionType transactionType)
   at cjaTest1.MessageQueue.FrmSendToQueue.button1_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.ButtonBase.WnProc(WM wm, Int32 wParam, Int32 lParam)
   at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
   at Microsoft.AGL.Forms.EVL.EnterModalDialog(IntPtr hwnModal)
   at System.Windows.Forms.Form.ShowDialog()
   at cjaTest1.FrmMainForm.button9_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.ButtonBase.WnProc(WM wm, Int32 wParam, Int32 lParam)
   at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
   at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
   at System.Windows.Forms.Application.Run(Form fm)
   at cjaTest1.Program.Main() 
```

我确定我做错了很多事情。欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:19:39.480

`System.Messaging.MessageQueue`用于与[MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)交互。`A queue called log_line_queue in database cja on SQL Server ITSERVER`是表或 Service Broker 队列。这是苹果和橘子，MSMQ 与 SQL Server 无关。要将消息发送到 SQL Server 队列，您必须使用[SEND](http://msdn.microsoft.com/en-us/library/ms188407.aspx) T-SQL 动词，并且您必须连接到 SQL Server 实例。

# gwt - 如何在 gwt 按钮中换行

> ID：14646707
> 
> 赞同：1
> 
> 时间：2013-02-01T12:49:56.500
> 
> 标签：gwt, button, line, break

嗨，我尝试了很多，但我不知道如何打破按钮线。我#m 使用 GWT Widgets 而没有 HTML，这就是它不那么容易的原因。我只是找到了标签的例子，但没有找到按钮的例子。你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:00:14.033

使用换行符 ie`<br/>`代替`\n`and`setHTML`代替`setText`

这就足够了：

```
this.laneRequest.setHTML(this.currentStatus + "<br/> Selection is required."); 
```

`setText`采用普通字符串参数并`setHTML`采用 html 代码参数。

# objective-c - 带有 uiwebviews 内存泄漏的基于页面的应用程序

> ID：14646708
> 
> 赞同：1
> 
> 时间：2013-02-01T12:50:00.133
> 
> 标签：objective-c, memory-leaks, uiwebview, automatic-ref-counting, uipageviewcontroller

我正在使用 Arc 对简单的 Xcode 页面基础应用程序进行一些测试。

我在 dataviewcontroller 中加载了一个 uiwebview，我一直在使用 Instruments 测试活动，当我滚动页面时，内存使用量不断上升，看起来以前的页面永远不会从内存中释放。

这是我对默认模板所做的更改。我已将模型修改为运行 240 页而不是 12 个默认值。

在 dataViewController 中，我以编程方式添加 uiwebview 并向 google 加载请求并将 webview 添加到控制器视图中。

内存使用量从大约 20Mb 开始，最终超过 70Mb，然后崩溃。

有人知道我哪里出错了吗？如何释放视图以释放内存？

修改代码如下：

数据视图控制器.h

```
#import <UIKit/UIKit.h>
@interface RXBDataViewController : UIViewController<UIWebViewDelegate>
{
    UIWebView *pageContent;
}

@property (strong, nonatomic) IBOutlet UILabel *dataLabel;
@property (strong, nonatomic) id dataObject;

@end 
```

数据视图控制器.m

```
#import "RXBDataViewController.h"
@interface RXBDataViewController ()
@end

@implementation RXBDataViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    pageContent = [[UIWebView alloc] initWithFrame:CGRectMake(8, 30, 260, 350)];
    pageContent.userInteractionEnabled = NO;
    [pageContent setDelegate:self];

    [pageContent loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com/"]]];
    [self.view addSubview:pageContent];    
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.dataLabel.text = [self.dataObject description];
}
@end 
```

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:59:33.430

我找到了解决方案

```
- (void)viewDidDisappear:(BOOL)animated
{
    [pageContent removeFromSuperview];
    pageContent = nil;
} 
```

# c# - 如何使用c#通过发送网格读取邮件

> ID：14646709
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:50:03.357
> 
> 标签：c#, email, serialization, sendgrid

我必须阅读通过 C# 代码发送网格发送的邮件。

我读过这样的流

```
 --xYzZY
Content-Disposition: form-data; name="headers"

Received: by 127.0.0.1 with SMTP id 8KwcWqETbu Fri, 25 Jan 2013 03:49:42 -0600 (CST)
Received: from mail-ve0-f173.google.com (mail-ve0-f173.google.com [209.85.128.173]) by mx5.sendgrid.net (Postfix) with ESMTPS id A1D5A2621B68 for <pk@replydev.socialboards.com>; Fri, 25 Jan 2013 03:49:42 -0600 (CST)
Received: by mail-ve0-f173.google.com with SMTP id b10so69883vea.32 for <pk@replydev.socialboards.com>; Fri, 25 Jan 2013 01:49:42 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=20120113; h=mime-version:x-received:date:message-id:subject:from:to :content-type:x-gm-message-state; bh=w5qN+xkC2AsH6lrtfF/wYnPJ3C3PTO0oVvChHKiLsXM=; b=hgrflJqveG6cOlK5XNz7qI3fJjIOvOeJsmZhyPU+vRFsKlLPctb91oGxz/0v+kzABj us04rC6cW6CWIIR4W1dYfUEpXYdBgbVoOMPs4ef005jMHPOfpMx81YAW6tpq1HQyLh1W 4n49LBm1GssCJhbhwSMUKRwIVqBmLtxMzVPnWVrCqMB8e2KSn78yw58JFOtf7qv+tKE3 oqa4n04ywmcVCKhEx2bhIvpo7IJQ5BjC62Q3iNdQgTJLw1eKQ9nMF8BTxXLFlFZK5HHb fpLFkgiIGqqYJioKtyS0slkJQA1P8OSrjkDnlmLXJU7btatnxd+a94wYKNB6yHwYpL+M f4SQ==
MIME-Version: 1.0
X-Received: by 10.52.179.136 with SMTP id dg8mr4231328vdc.81.1359107382079; Fri, 25 Jan 2013 01:49:42 -0800 (PST)
Received: by 10.58.155.42 with HTTP; Fri, 25 Jan 2013 01:49:42 -0800 (PST)
Date: Fri, 25 Jan 2013 15:19:42 +0530
Message-ID: <CAJfhHSq2qTRHK_0_6jWQyTd9ecB61SJYDyy8mM7G3-atUN13qA@mail.gmail.com>
Subject: dfdsfdsfds
From: Pragati Kumar <pragati.kumar@sdplabs.com>
To: Eric Test <pk@replydev.socialboards.com>
Content-Type: multipart/alternative; boundary=bcaec5014c15b870c904d419d845
X-Gm-Message-State: ALoCoQmTr/zLwW3mbRCZRyL5EOYaPnPrpXB+GEtN+sTQ1PdGB/ulN//n2SaQiYaSbKRyVaqLJfBq

--xYzZY
Content-Disposition: form-data; name="dkim"

none
--xYzZY
Content-Disposition: form-data; name="to"

Eric Test <pk@replydev.socialboards.com>
--xYzZY
Content-Disposition: form-data; name="html"

<div dir="ltr"><br clear="all"><div style>fdsfdsfdsfdsfdsfds</div>-- <br><div dir="ltr"><div>Thanks With Regards.</div><div><br></div><div><b>Pragati Kumar Singh</b></div><div><b>Software Developer (.NET)</b></div><div><b>Mob:  +91 902-363-6285</b></div>
<div><b><br></b></div><div><b>SDPLabs</b></div><div><b><a href="mailto:pragati.kumar@sdplabs.com" target="_blank">pragati.kumar@sdplabs.com</a></b></div><div><b><a href="http://www.sdplabs.com" target="_blank">www.sdplabs.com</a></b></div>
<div><br></div><div>India:  +91 0172 401 0125 (Office)</div><div>           +91 0172 465 0337 (Office)</div><div>USA:   +1 646-462-4634 (Office)</div><div>           +1 646-789-5302 (Cell)</div><div>Fax:   +1 928-563-1783</div>
</div>
</div>

--xYzZY
Content-Disposition: form-data; name="from"

Pragati Kumar <pragati.kumar@sdplabs.com>
--xYzZY
Content-Disposition: form-data; name="text"

fdsfdsfdsfdsfdsfds
-- 
Thanks With Regards.

*Pragati Kumar Singh*
*Software Developer (.NET)*
*Mob:  +91 902-363-6285*
*
*
*SDPLabs*
*pragati.kumar@sdplabs.com*
*www.sdplabs.com*

India:  +91 0172 401 0125 (Office)
           +91 0172 465 0337 (Office)
USA:   +1 646-462-4634 (Office)
           +1 646-789-5302 (Cell)
Fax:   +1 928-563-1783

--xYzZY
Content-Disposition: form-data; name="spam_report"

Spam detection software, running on the system "mx5.sendgrid.net", has
identified this incoming email as possible spam.  The original message
has been attached to this so you can view it (if it isn't spam) or label
similar future email.  If you have any questions, see
the administrator of that system for details.

Content preview:  fdsfdsfdsfdsfdsfds -- Thanks With Regards. *Pragati Kumar
  Singh* *Software Developer (.NET)* *Mob:  +91 902-363-6285* * * *SDPLabs* *pragati.kumar@sdplabs.com*
   *www.sdplabs.com* India:  +91 0172 401 0125 (Office)  +91 0172 465 0337 (Office)
   USA:  +1 646-462-4634 (Office)  +1 646-789-5302 (Cell) Fax: +1 928-563-1783
   [...] 

Content analysis details:   (-0.7 points, 5.0 required)

 pts rule name              description
---- ---------------------- --------------------------------------------------
 0.0 HTML_MESSAGE           BODY: HTML included in message
-0.7 RCVD_IN_DNSWL_LOW      RBL: Sender listed at http://www.dnswl.org/, low
                            trust
                            [209.85.128.173 listed in list.dnswl.org]
 0.0 T_MIME_NO_TEXT         No text body parts

--xYzZY
Content-Disposition: form-data; name="envelope"

but I am unable verify its format so that it could be inserted into our database.
Please help to decode it so that I can read the following fields in the best possible way.
1\. To
2\. From
3\. BCC
4\. Body
5\. Subject
6\. Attachment.

Thanks in anticipation

{"to":["pk@replydev.socialboards.com"],"from":"pragati.kumar@sdplabs.com"}
--xYzZY
Content-Disposition: form-data; name="attachments"

0
--xYzZY
Content-Disposition: form-data; name="subject"

dfdsfdsfds
--xYzZY
Content-Disposition: form-data; name="spam_score"

-0.689
--xYzZY
Content-Disposition: form-data; name="charsets"

{"to":"UTF-8","html":"ISO-8859-1","subject":"UTF-8","from":"UTF-8","text":"ISO-8859-1"}
--xYzZY
Content-Disposition: form-data; name="SPF"

none
--xYzZY-- 
```

我必须将其序列化为 json 格式。

我试过了

```
 private string RequestInputStreamToString()
    {
        System.Text.StringBuilder sb = new StringBuilder();
        int streamLength;
        int streamRead;
        System.IO.Stream s = HttpContext.Current.Request.InputStream;
        streamLength = Convert.ToInt32(s.Length);
        Byte[] streamArray = new Byte[streamLength];
        streamRead = s.Read(streamArray, 0, streamLength);
        for (int i = 0; i < streamLength; i++)
        {
            sb.Append(Convert.ToChar(streamArray[i]));
        }
       return sb.ToString();
    }
 string jsontext =RequestInputStreamToString();
 var json = JObject.Parse(jsontext); 
```

但它是拥挤的错误

```
Error reading JObject from JsonReader. 
```

如需更多参考，请查看[http://sendgrid.com/docs/API_Reference/Webhooks/parse.html](http://sendgrid.com/docs/API_Reference/Webhooks/parse.html) 但它是在 php 中给出的，我想要在 C# 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:05:17.243

经过艰苦的努力，我找到了解决方案。这些是 multipart/form-data 的内容。每个数据都可以读取

```
 HttpContext context;
    String to=context.Request.Params["to"];
    String from=context.Request.Params["from"];
    String html=context.Request.Params["html"];
        .......etc.............. 
```

读取其内容和节点后，可以将其传递给类属性，然后可以根据您的要求将其序列化为 json 或 xml。

# jquery - jquery - 选择/过滤数组中的项目

> ID：14646713
> 
> 赞同：0
> 
> 时间：2013-02-01T12:50:13.810
> 
> 标签：jquery, arrays, sorting, filter, gallery

我有一个图像库，我希望能够按专辑排序。

我有一个像这样的数组：

```
var images_gallery = [
    {
        image_src: "images/xmas-1.jpg",
        album: "xmas"
    },
    {
        image_src: "images/xmas-2.jpg",
        album: "xmas"
    },
    {
        image_src: "images/xmas-3.jpg",
        album: "xmas"
    },
    {
        image_src: "images/xmas-4.jpg",
         album: "summer"
    }
] 
```

我的 html 中也有一个选择：

```
 <select name="album">
        <option selected="selected" id="all">All</option>
        <option id="xmas">Xmas Party</option>
        <option id="summer">Summer Party</option>
    </select> 
```

然后在我的 js 文件中：

```
$("select[name='album']").change(function() {
    var thisAlbum = $(this).children(":selected").attr("id");
}); 
```

我的问题是，如何按与我的选择选项 id 匹配的专辑过滤我的数组（然后显示它们，我有一个函数用于 (showImages) ）。

编辑：

使用我在这里得到的以下答案：

```
$("select[name='album']").change(function() {
    var thisAlbum = $(this).children(":selected").attr("id");

    var filteredArray = images_gallery.filter(function(x) {
        return x.album == thisAlbum;
    });

    $('#librarian-page-container-gallery').html(' ');

    Shadowbox.setup("a.gallery", {
        gallery:   "gallery",
    });

    filteredArray.showImages2();

}); 
```

我不确定如何将我的函数应用于新的过滤数组？

我的功能看起来像：

```
function showImages2(){
$.each(images_gallery,function(i,image_gallery){
           // stuff in here
    });
} 
```

感谢您一直以来的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:52:15.937

您可以使用以下方法过滤您的数组`filter`：

```
var filteredArray = images_array.filter(function(x) {
   return x.album == thisAlbum;
}); 
```

这是旧浏览器支持[的垫片。](http://www.tutorialspoint.com/javascript/array_filter.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:57:11.857

Using David's answer to filter the results.

```
$("select[name='album']").change(function() {
    var thisAlbum = $(this).children(":selected").attr("id");
    var result = images_gallery.filter(function(x) {
       return x.album == thisAlbum;
    });
    //Clear images
    $('#images').html(' ');
    //Show images in new result array
    for(img in result){
        $('#images').append('<img src="' + result[img].image_src + '" />');
    }
}); 
```

[http://jsfiddle.net/vyaTC/1/](http://jsfiddle.net/vyaTC/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:57:22.093

if you want to use jQuery you could use [`.grep`](http://api.jquery.com/jQuery.grep/):

```
var filterArray = $.grep(images_gallery, function(obj) {
    return obj.album === thisAlbum;
}); 
```

did a change on thisAlbum if its 'all' then get all objects in the array: [http://jsfiddle.net/4tEz4/](http://jsfiddle.net/4tEz4/)

```
var filterArray = $.grep(images_gallery, function(obj) {
    return thisAlbum === 'all' || obj.album === thisAlbum;
}); 
```

or just:

```
var filterArray = thisAlbum === 'all' ? images_gallery : $.grep(images_gallery, function(obj) {
    return obj.album === thisAlbum;
}); 
```

# objective-c - Objective-c 如何重新加载视图

> ID：14646716
> 
> 赞同：0
> 
> 时间：2013-02-01T12:50:37.357
> 
> 标签：objective-c, refresh, reload

我有一个页面检查互联网连接，然后根据结果执行各种操作。例如，如果没有互联网连接，下载文件的按钮被禁用，导航栏中不存在某些按钮，某些文本颜色不同等。

我想添加一个“刷新”按钮，以便用户可以连接到互联网并重新加载页面。

我的问题是，如何刷新视图？调用 [self viewDidLoad]; 肯定是不对的，即使这是所有逻辑都存在的地方。我是否需要从 superView 中删除视图并重新插入它，或者有没有办法在不删除的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:58:51.760

如果您的功能是检查互联网并且您使用`Reachability`的是 Apple 类，那么请写

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil]; 
```

在你的`viewDidLoad`,

然后写这段代码

```
-(void)startInternetAvailableCheck
{
    internetReach = [Reachability reachabilityForInternetConnection];
    [internetReach startNotifier];
    [self updateInterfaceWithReachability: internetReach];
}

-(void)updateInterfaceWithReachability:(Reachability*)curReach
{
    if(curReach == internetReach)
    {   
        NetworkStatus netStatus = [curReach currentReachabilityStatus];
        switch (netStatus)
        {
            case NotReachable:
            {
                MyLog(@"Access Not Available");

                break;
            }

            case ReachableViaWWAN:
            {
                MyLog(@"Reachable WWAN");

                break;
            }
            case ReachableViaWiFi:
            {
                MyLog(@"Reachable WiFi");

                break;
            }
        }

    }
}

//Called by Reachability whenever status changes.
- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
    [self updateInterfaceWithReachability: curReach];
} 
```

在上述`updateInterfaceWithReachability`功能中，您可以更新您的视图，即相应地启用和禁用按钮。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:15:54.763

在单独的方法中编写刷新或查看设计的整个逻辑，并在再次刷新时调用它。

```
 ViewDidLoad
  {
    [self loadViewDesign];
  [[(uibutton *) addTarget:self action:@selector(refreshData) forControlEvents:UIControlEventTouchUpInside];
  }

- (void)loadViewDesign
  {
     ....
       ...
        ..
     }

 - (void)refreshData
   {
 [self loadViewDesign];
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:23:51.807

我会这样做：

在 viewDidLoad 中，我将创建所有自定义 UI 元素。我什至可以在那里布局它们，除非布局有点动态地对数据本身做出反应。我只会创建一次 UIElements。

在一个单独的方法中，也许命名为 configureView 我会 - 加载数据（除非这是异步的 - 我建议这样做） - 相应地设置 UI 元素。设置开关值、标签文本等 - 可能布局元素或隐藏/取消隐藏它们或启用/禁用它们。

在大多数情况下，我会从 viewDidLoad 调用 configureView。或者我会从 viewWillBecomeVisible 中调用它。在这种情况下，即使从任何其他推送视图返回或在选项卡栏中切换回视图时视图变得可见，视图也会更新。

刷新机制（可能是链接到按钮的操作）将重新加载数据，然后也调用 configureView 方法。

# java - 连接到 https://mail.google.com 被拒绝，apache httpclient

> ID：14646717
> 
> 赞同：0
> 
> 时间：2013-02-01T12:50:38.687
> 
> 标签：java, apache, https, httpclient

我可以下载这样的文件：

如果 url 是，例如 http:/b.net/Doc1.pdf 它下载得很好，但如果是，例如 "https:/mail.google.com/mail/u/0/?ui=2&ik=e3036d4c0a&view =att&th=13c8b8af8687d931&attid=0.1&disp=safe&realattid=f_hckh9zby0&zw"（gmail 附件pdf），无法下载。我有那个错误

***线程“主”org.apache.http.conn.HttpHostConnectException 中的异常：与[https://mail.google.com](https://mail.google.com)的连接被拒绝***

```
HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        HttpResponse response = httpclient.execute(httpget);

        HttpEntity entity = response.getEntity();
        if (entity != null) {
            long len = entity.getContentLength();
            InputStream inputStream = entity.getContent();
            File temp = File.createTempFile("Google", ".pdf", new File("/")); 
            OutputStream output = new FileOutputStream(temp);
            byte[] buffer = new byte[1024];
            int n = 0;
            while ((n = inputStream.read(buffer)) != -1){
                output.write(buffer, 0, n);
            }
            output.close();
        } 
```

org.apache.http.conn.HttpHostConnectException：连接到[https://mail.google.com](https://mail.google.com)被拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:20:49.047

我已经解决了这个问题“ [http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientExecuteProxy.java](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientExecuteProxy.java) ”

我有代理问题；

# c - if 语句整数

> ID：14646718
> 
> 赞同：35
> 
> 时间：2013-02-01T12:50:39.193
> 
> 标签：c, if-statement, integer

我认为这是一个简单的问题，但我正在努力解决以下问题。在我的示例中，我有以下语句（语言为 C）：

```
int foobar

if (foobar)
{
// do something.
} 
```

现在，如果我对此是正确的，那么当`foobar`不为零时，此陈述为真。所以它应该与`if (foobar!=0)`.

但是如果`foobar`变成负数会怎样？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-01T12:52:27.980

消极或积极。任何不是 0 的都是真值`if`

另外，考虑一个负数：-1

-1 在 C 内部表示为: `0xFFFFFFFF`，在这种情况下，如果我将其转换为无符号整数，它将是一个正数。

但是在 C99 标准编译器出现之后，我建议你 `<stdbool.h>`改用它。使猜测工作少了很多：

[在此处阅读有关 stdbool.h 的信息](http://pubs.opengroup.org/onlinepubs/007904875/basedefs/stdbool.h.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T12:53:21.657

同样，

```
if (foobar) 
```

表示 foobar 不为零，因此无论是正数还是负数都无所谓，它仍然不为零

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:58:30.980

如果 foobar 是负数（它仍然不同于零），您的语句应该返回 true，但您应该避免这种测试，因为以这种方式测试可能具有不同“真”值的变量不是最佳实践。

# google-maps - Google Maps API V3 脚本错误？

> ID：14646724
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:51:03.383
> 
> 标签：google-maps, google-maps-api-3

我试图在我的新 Windows 8 应用程序中使用 Google Maps API V3。它工作正常，但是当没有互联网连接并且我尝试放大和缩小时，它会显示“抱歉，我们这里没有图像”。这很好，但是当我尝试放大和缩小太多时，它会意外地结束我的应用程序说“0x800a138f - JavaScript 运行时错误：无法获取未定义或空引用的属性'长度'”。

我尝试了很多，但没有找到任何解决方案。此外，当我在 chrome 中执行相同操作时，一切正常，但当我尝试通过在其中加载简单的谷歌地图来执行相同操作时，IE9 也会冻结。

我只是不希望我的应用程序意外终止。我该怎么办？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:58:44.620

有一个属性[navigator.onLine](http://msdn.microsoft.com/en-us/library/ie/ms534307%28v=vs.85%29.aspx)。您可以检测到它并决定是否绘制地图。

当地图已经绘制好后，您可以间隔检查此属性并禁用任何交互，例如，当网络连接丢失时，通过覆盖覆盖整个地图

# javascript - 画布元素未定义

> ID：14646725
> 
> 赞同：0
> 
> 时间：2013-02-01T12:51:14.170
> 
> 标签：javascript, canvas

有人可以看看这段代码并告诉我为什么我得到未定义的画布元素吗？或者为什么我不能使用这种语法？

```
var Canvas = {

   element : document.getElementById("canvas"),
   context : Canvas.element.getContext("2d"), // Uncaught TypeError: Cannot read property 'element' of undefined 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:54:12.870

您不能以这种方式声明它。你能做的最好的事情是：

```
var Canvas = {
   element: document.getElementById("canvas"),
   context: document.getElementById("canvas").getContext("2d")
} 
```

如果您`Canvas`是一个函数并且您将元素存储在 中`this`，那么您可以通过以下方式访问它`this.element`：

```
var Canvas = function (id) {
    this.element = document.getElementById(id);
    this.context = this.element.getContext('2d');
} 
```

# windows-7 - 注册 DLL 时出错

> ID：14646736
> 
> 赞同：2
> 
> 时间：2013-02-01T11:03:49.317
> 
> 标签：windows-7, windows, command-line, window

我正在尝试使用命令 regsvr32 dll_name.dll 注册 DLL，但出现以下错误

> 模块“Addition.dll”已加载，但未找到入口点 DLLRegisterServer
> 
> 确保“Addition.dll”是有效的 DLL 或 OCX 文件，然后重试

谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:12:27.490

您要注册的每个 DLL 都必须具有函数 DLLRegisterServer。每当您运行 regsvr32.dll DLL_NAME 时都会调用此函数。它基本上修改了注册表，只做需要将此 dll 安装到系统中的事情。

从您的错误中可以明显看出模块“Addition.dll”没有此功能。如果是定制的DLL，则添加此功能并再次运行。

该函数主要用于 COM（组件对象模型）组件在系统中注册自己。不用作 COM 服务器的 DLL 不需要此功能。

# mysql - 在 mysql 中为“ft_min_word_len”FULLTEXT 设置新值

> ID：14646738
> 
> 赞同：14
> 
> 时间：2013-02-01T12:51:56.883
> 
> 标签：mysql, full-text-search, database-administration, fulltext-index

我更改为`"ft_min_word_len" = 4` 位于`my-innodb-heavy-4G.ini`我的系统路径`"C:\Program Files\MySQL\MySQL Server 5.1"`中，但是当我运行时

```
SHOW VARIABLES LIKE 'ft_min_word_len' 
```

我还是得到了结果`value= 4`。我没有在`my.ini`文件中找到这个变量。所以我也创造了我的逻辑。我复制到`ft_min_word_len`变量并放入`my.ini`文件中，现在我的结果显示`value=3`。

但它不适用于三字符搜索。我已经重启了服务器。

我怎样才能实现也能够搜索三个字符值。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T13:01:06.223

您应该更改此系统参数，重新启动服务器，然后重建所有 FULLTEXT 索引。

```
REPAIR TABLE <TableName> QUICK; 
```

*   [用 MySQL 改变全文索引最小字长](http://www.electrictoolbox.com/mysql-full-text-index-word-length/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T20:21:41.107

这就是我用来获取所有需要的修复命令的方法：

```
SELECT DISTINCT CONCAT("REPAIR TABLE `", TABLE_SCHEMA, "`.`", 
TABLE_NAME, "` QUICK;") FROM information_schema.STATISTICS 
WHERE index_type = 'FULLTEXT'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-15T06:15:48.233

我认为您应该尝试通过删除索引更改表并再次添加索引。它肯定会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T06:33:40.943

您可以只删除并添加 FULLTEXT 索引

或者分阶段做，提前看看能有多大

```
CREATE TABLE models_new LIKE models;

ALTER TABLE models_new DROP INDEX name;

ALTER TABLE models_new ADD FULLTEXT name (name);

ALTER TABLE models_new DISABLE KEYS;

INSERT INTO models_new SELECT * FROM models;

ALTER TABLE models_new ENABLE KEYS;

ALTER TABLE models RENAME models_old;

ALTER TABLE models_new RENAME models; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-31T00:03:47.043

我刚刚解决了我自己的类似问题。我的问题是我需要编辑以更改 ft_min_word_len 变量的 my.ini 文件位于 Windows 7 中默认隐藏/受保护的目录中。即：“c:/programdata/mysql/mysql server 5.7 ”。

Windows 文件资源管理器和搜索不会显示此位置，直到您进入文件夹选项并指定要查看隐藏文件/文件夹（以及可能受保护的操作系统文件——我都做了）。

最初我在 Program Files/MySQL Server 5.7 下创建了一个 my.cnf 文件。但是当我重新启动服务器时， ft_min_word_len 变量并没有改变。然后我输入了一些我知道应该触发错误的随机文本，但服务器正常启动。似乎 MySQL 没有读取该文件，即使它位于 MySQL 客户端 shell 的帮助文本中指定的位置之一。

我的想法是 MySQL 服务器开始按照帮助文本中指定的顺序搜索 .cnf/.ini 文件，但是一旦找到有效文件，就会停止搜索。只是一个理论，但我可以肯定地说它没有识别它应该在其他地方寻找的配置文件。

我认为它就像 CSS，每个新的 CSS 文件都会覆盖之前的设置。显然不是。

无论如何，我希望这对遇到同样问题的其他人有所帮助。

# iphone - 自定义 UITableCell 并将 TableCell 导出为 png 文件

> ID：14646740
> 
> 赞同：0
> 
> 时间：2013-02-01T12:52:00.423
> 
> 标签：iphone, ios, xcode, ipad, uitableview

我想要一个应用程序，当我在某些表格单元格中输入大量数据时。然后所有数据将汇总在最低的表格单元格中。（我已经这样做了）。

我的问题是如何将最低或任何特定的表格单元格作为图像专门导出为 PNG 格式？

我曾尝试使用打印屏幕，但它不是那么好，并且数量不同的设备。有没有我只能导出该单元格的代码？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:43:04.237

```
// Specify your index path
NSUInteger index[] = {0, 1}; // section, row
NSIndexPath *indexPath = [[NSIndexPath alloc] initWithIndexes:index length:2];

// Get the cell
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

// Render a graphics context to turn your cell into a UIImage
CGSize imageSize = cell.bounds.size;
UIGraphicsBeginImageContext(imageSize);
CGContextRef imageContext = UIGraphicsGetCurrentContext();
[cell.layer renderInContext:imageContext];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// Save the image as PNG
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex:0];
NSString *dest = [docDir stringByAppendingPathComponent:@"image.png"];
[UIImagePNGRepresentation(image) writeToFile:dest atomically:YES]; 
```

**编辑**

要获得更精确的单元格快照，您可以使用单元格的 contentView 属性，即

```
[cell.contentView.layer renderInContext:imageContext]; 
```

# ruby - nanoc：如何将选项传递给 pandoc-ruby？

> ID：14646741
> 
> 赞同：3
> 
> 时间：2013-02-01T12:52:00.567
> 
> 标签：ruby, pandoc, nanoc

我正在尝试将 nanoc 3.5.0 与[`pandoc`](https://github.com/nanoc/nanoc/blob/master/lib/nanoc/filters/pandoc.rb)使用[`pandoc-ruby`](https://github.com/alphabetum/pandoc-ruby). 具体来说，我无法从我的`Rules`文件中传递几个选项，以便最终调用`PandocRuby.convert()`如下所示：

```
PandocRuby.convert(content,
                   {:from => :markdown, :to => :html}, :no_wrap, 
                   :table_of_contents, :mathjax, :standalone,
                   {"template" => Dir.getwd + '/layouts/pandocTemplate.html'}) 
```

当我将上述调用放在自定义过滤器中时，一切正常。但是，我想指定 pandoc 选项，`Rules`这样我就不必为每组选项创建一个特殊的过滤器。

默认 pandoc 过滤器被定义为函数`run(content, params={})`并简单地调用`PandocRuby.convert(content, params)`. `params`我该如何设置才能`PandocRuby.convert()`正确调用？以下指令`Rules`不起作用：

```
filter :pandoc, :params => { :from => :markdown, :to => :html, :no_wrap, :table_of_contents, :mathjax, :standalone, "template" => Dir.getwd + '/layouts/pandocTemplate.html' }
filter :pandoc, :params => { :from => :markdown, :to => :html, :no_wrap => true, :table_of_contents => true, :mathjax => true, :standalone => true, "template" => Dir.getwd + '/layouts/pandocTemplate.html' } 
```

第一个指令导致 Ruby 错误，第二个指令运行但给了我一个空白页，表明 pandoc 没有被正确调用。我对 Ruby 不是很熟悉，所以我目前的努力只是在黑暗中摸索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:28:16.410

nanoc 附带的`pandoc`过滤器此时无法正确执行此操作。给过滤器的参数直接传递给`PandocRuby.convert`：

```
def run(content, params={})
  PandocRuby.convert(content, params)
end 
```

（[来源](https://github.com/nanoc/nanoc/blob/master/lib/nanoc/filters/pandoc.rb)）

您对过滤器的调用有两个以上的参数，这就是它崩溃的原因。过滤器当然需要更新（我对如何调用它的想法太天真了）。如果您想尝试改进过滤器，当然欢迎您提交拉取请求！同时，我已将此问题报告为问题（[链接](https://github.com/nanoc/nanoc/issues/210)）。

（希望我能尽快用正确的答案更新这个答案！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-24T13:15:23.790

我编写了一个基本的 nanoc pandoc 过滤器，它调用 pandoc 目录而不使用`pandoc-ruby`：

```
# All files in the 'lib' directory will be loaded
# before nanoc starts compiling.
# encoding: utf-8

module Nanoc::Filters

  class PandocSystem < Nanoc::Filter
    identifier :pandoc_system
    type :text => :text

    def run(content, params = {})
      if item[:extension] == 'org'
        `pandoc -f org -t html < #{item.raw_filename}`
      elsif ["md", "markdown"].index(item[:extension])
        `pandoc -f markdown -t html < #{item.raw_filename}`
      end
    end

  end

end 
```

您可以根据 将您自己的选项传递给 pandoc `item[:extension]`。希望能帮助到你。

* * *

更新，我创建了一个新的 gist，它为 nanoc 提供了 pandoc 过滤器的改进版本，检查：[https](https://gist.github.com/xiaohanyu/9866531) ://gist.github.com/xiaohanyu/9866531 。

# javascript - 在特定的 html5 视频时间段后显示隐藏的 div

> ID：14646748
> 
> 赞同：0
> 
> 时间：2013-02-01T12:52:17.147
> 
> 标签：javascript, video, html5-video

视频播放约 9 分钟。我在视频下方有一个隐藏的 div。我希望视频达到 8 分钟时显示隐藏的 div。那可能吗？我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:57:56.857

You can use the `timeupdate` event and check the `currentTime` property: [http://jsfiddle.net/sEbwj/1/](http://jsfiddle.net/sEbwj/1/).

```
var passed = false;
document.querySelector("video").addEventListener("timeupdate", function() {
    if(!shown && this.currentTime > 8 * 60) {
        console.log("mark passed");
        passed = true;
    }
}); 
```

# c++ - 如何通知其他进程文件已标记为删除？

> ID：14646750
> 
> 赞同：5
> 
> 时间：2013-02-01T12:52:25.810
> 
> 标签：c++, c, linux

我目前正在为嵌入式系统（有限的磁盘空间）编写一个**C应用程序 在这个系统上，几个进程访问我必须在某些事件（例如****磁盘空间不足）时**使用我的应用程序删除的文件。但是由于其他进程仍然可以写入这些文件，因此磁盘空间情况并没有改善。

**是否有可能实际删除文件并让其他进程的写访问失败？**

我只能有限地访问其他进程的行为，所以如果不需要这些进程的合作会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:48:05.577

想到两个想法来解决文件实际上在关闭所有对它的引用之前不会被删除的事实：

1.  如果可能或在您的情况下允许，请取消链接这些文件，然后重新启动其他进程。
2.  截断/清空这些文件而不删除它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-02T14:16:33.280

如果我是“其他进程”的所有者，只要它们的大小达到给定阈值，我就会让它们关闭、重命名并重新打开日志文件。这样，日志轮换可以以“标准”方式执行（例如：[logrotate](https://linux.die.net/man/8/logrotate)）

但是，您似乎已经拥有一些*遗留*应用程序。

在这种情况下，我建议在启动*旧*应用程序之前使用[mkfifo](https://linux.die.net/man/1/mkfifo)创建命名管道来代替日志文件。

 *您的**C**应用程序将从这些特殊文件中读取，并且通过这种方式，它将能够例如创建不超过指定数量的日志文件。例如，通过这种方式，您将能够使用**logrotate**。

缺点：如果您的**C**应用程序没有运行，*遗留*应用程序将停留在`write()`系统调用中，试图写入*未连接的*管道。*

# c# - 活动目录成员与 memberOf

> ID：14646759
> 
> 赞同：2
> 
> 时间：2013-02-01T12:52:50.283
> 
> 标签：c#, active-directory

我在`member`和`memberOf`属性之间感到困惑。假设我有一个名为“ABX”的组，该组具有以下属性值：

1.  成员：`cn="foo", OU="Groups"`
2.  成员：`cn="test", OU="Groups"`

ABX 的子组是什么？是 foo 还是 test？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:59:18.937

1.  `member`表示此对象是此提供的（现在查看）组的成员。
2.  `memberOf`表示此对象是组的成员。

所以一个组可以是一个组的成员 => 嵌套组。

在您的情况下：`foo`is a member of `ABX`and `ABX`is a member of the group `test`。

# regex - 读取文件内容并使用正则表达式在 Perl 中的每个文件中定位一个模式

> ID：14646764
> 
> 赞同：-4
> 
> 时间：2013-02-01T12:53:27.933
> 
> 标签：regex, perl, directory

我有大约 200 个文件位于同一目录中，所有这些文件都包含我需要使用 RegExp 匹配的特定内容，并将所有匹配的内容保存到单个数组中或将它们存储在新文件中。

使用 notepad++ 正则表达式引擎时，我执行以下操作来定位模式：

```
<div class="opacity description">(.*)</div> 
```

所以这就是我正在寻找的模式。

这就是我打开并列出目录中所有文件的方式。

```
my $d = shift;

opendir(D, "details/") || die "Can't opedir $d: $!\n";
my @list = readdir(D);
closedir(D);

foreach my $f (@list) {
  print "\$f = $f\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:35:59.777

```
use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my ($dir) = @ARGV;

my @files = glob "$dir/*";

for my $file (@files) {
  my $tree = HTML::TreeBuilder::XPath->new_from_file($file);
  my @opacity = $tree->findnodes_as_strings('//div[@class="opacity description"]');
  print "\n$file\n";
  print "  $_\n" for @opacity;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:11:53.220

你可以用 shell 做到这一点：

如果您有最近的 xarg，它将并行运行 grep (-p) 并且每个进程 (-n) 几个文件。这很好，如果你有大量的文件。

```
ls -1 | xargs -p3 -n 5 -i grep -HP '<div class="opacity description">(.*)</div>' {} 
```

或使用 perl

```
foreach my $f (@list) {
  local $/='';  
  print "\$f = $f\n";
  open(FILE,'<',$f) or die $f;
  my $c = <FILE>;
  close(FILE);
  if ($c =~ m!<div class="opacity description">(.*)</div>!){
    print "Found in $f\n";
  }
} 
```

对于处理 HTML 文件，使用理解 HTML 并且可以在 DOM 树中行走的模块要安全得多。

# c++ - 将 STL List 迭代器传递给函数

> ID：14646768
> 
> 赞同：0
> 
> 时间：2013-02-01T12:53:37.497
> 
> 标签：c++, list, iterator

不明白为什么我必须增加/减少列表迭代器才能使这个函数调用工作。有没有一种不那么复杂的方式来称呼它？参考嵌套的for循环，“insertDDNode(*(--DD_it), *(++DD_it), data[ji], data[j+1]);” 部分。

```
void insertDDNode(DataNode *l, DataNode *r);
vector<DataNode*> data;
list<DDNode*> DDT;

int main()
{
  unsigned int n = 5;
  // insert data into vector structure
  data.push_back(new DataNode(0, -1, 13));
  data.push_back(new DataNode(1, 0, 2));
  data.push_back(new DataNode(2, 2, -14));
  data.push_back(new DataNode(3, 4, 18));
  data.push_back(new DataNode(4, 5, 67));
  data.push_back(new DataNode(5, 6, 91));
  vector<DataNode*> :: iterator it = data.begin();
  list<DDNode*> :: iterator DD_it;

  while(it != data.end())
  {
    insertDDNode(*it, *(it+1));
    it++;
    if((*it)->i == data.back()->i){break;}
  }

  DD_it = DDT.begin();
  for (int i = 1; i < n; i++)
  {
    for (int j = i; j < n; j++)
     {
       insertDDNode(*(--DD_it), *(++DD_it), data[j-i], data[j+1]);
       DD_it++;
     }
    DD_it++;
  }
}

void insertDDNode(DataNode *left, DataNode *right)
{
  T div_diff = (right->y - left->y) / (right->x - left->x);
  DDT.push_back(new DDNode(*left, *right, div_diff));
  left->r = right->l = DDT.back();
} 
```

# php - 通过ajax发送php代码不起作用

> ID：14646772
> 
> 赞同：0
> 
> 时间：2013-02-01T12:53:57.793
> 
> 标签：php, jquery, ajax, http-status-code-403

我正在尝试使用 jquery 发出 ajax 请求，但每次发送 php 函数时都会收到 403 Forbidden 错误。我需要的一个例子是这个 stackoverflow 注释输入，它也接受源代码。

我做了什么：

**PHP**

```
class Error {
  public function __construct() {
    // etc
  }

  public function comment($error_id, $content) {

    if(!$this->user->loged)
      return false;

    $error_id = $this->mysqli->real_escape_string($error_id);
    if(!is_numeric($error_id))
      return false;

    $this->mysqli->query("INSERT INTO comments 
                          VALUES (NULL, '" . $error_id . "', '" . $this->user->user_id . "', '" . $content . "', NULL)");
    return $this->mysqli->insert_id;

  }
} 
```

where使用类内的函数`$content`进行转义：`escapeString``Common`

```
public function escapeString($text) {
  return htmlspecialchars($this->mysqli->real_escape_string($text));
} 
```

**我的 JS 是：**

```
$('div.left-content').on('click','form.comment input[type=button]',function(){

        $but = $(this);

        if(!erori.user.loged) {

            showTooltip($but, 'Trebuie să fii autentificat pentru a putea comenta!');

            return false;
        }

        if($but.prev('textarea').val() == $but.prev('textarea').data("text") || $but.prev('textarea').val().trim() == '') {

            showTooltip($but, 'Completează câmpul de text pentru a putea trimite comentariul!');

            return false;
        }

        if($but.prev('textarea').hasClass('disabled'))
            return false;

        $but.attr('disabled', 'disabled');
        $but.prev('textarea').addClass('disabled');

        $.post(
            $but.parent().attr('action'),
            $but.parent().serialize(),
            function(data){
                if(data.content) {
                    $('<div class="comment"></div>').html(data.content).insertBefore($but.parent().parent());
                    if($but.prev('textarea').hasClass('disabled'))
                        $but.prev('textarea').val('').trigger('blur').animate({height: '20px'}, 300);
                    $but.prev('textarea').removeClass('disabled');
                }

                $but.removeAttr('disabled');

            },
            'json')
        .fail(function(xhr, textStatus, errorThrown) {
            if(errorThrown == 'Forbidden') {
                showTooltip($but, 'Comentariul nu a putut fi trimis!<br />Dacă vrei să trimiți sursă de cod folosește <strong>` cod sursă `</strong>!');

                $but.prev('textarea').removeClass('disabled');
                $but.removeAttr('disabled');

                return false;
            }
        })                                                         
    }); 
```

**动作代码是：**

```
$error = new Error($mysqli, $user);

$content = $common->escapeString($_POST['error_comment']);

$comment_id = $error->comment($_POST['error_id'], $content); 
```

如何在将源代码发送到服务器之前对其进行转义，以免返回此 403 Forbidden 错误？

我想说的是，如果我试图评论例如：`This is my comment with <?php $sql = mysql_query(); ?>`服务器正在抛出 403 错误代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:57:34.380

You cannot really filter your code before sending, because user can just turn off javascript and send code to you directly, skipping any clientside filtering.

And 403 error - it's a "rights" error, so you need to fix headers or right for php-file.

# c++ - 时间戳之间的差异（以分钟为单位）

> ID：14646774
> 
> 赞同：-2
> 
> 时间：2013-02-01T12:54:08.743
> 
> 标签：c++, time, compare

如何将两个时间戳与格式进行比较`yyyy-mm-dd hh-mm-ss`以获得分钟的总差异？

时间戳是从 MySQL 中检索的。到目前为止，我已经尝试使用 time_t 甚至分解整个字符串进行比较，但后者的问题是它无法识别天数的差异。

提前致谢！

编辑1：通过比较时间戳，我需要检查差异是否大于 x 分钟。

像：

```
timestamp1 = getTimestampFunction1();
timestamp2 = getTimestampFunction2();

difference = timestamp1 - timestamp2; //difference in minutes

if (difference > 60)
{
    do this;
}
else
{
    do that;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:03:15.340

您提到了两个/三个问题，尚不清楚其中哪些是您的实际问题。

如果您只想与您知道它们具有您提到的格式的日期进行比较，您可以进行简单的字符串比较：

```
const std::string A = "2012-11-11 01-01-59",
                  B = "2011-11-11 01-01-59";

if (A < B) {} // A lies before B
if (A > B) {} // A lies after B 
```

这是有效的，因为两个字符串的长度相同，并且数字按从最高有效到最低有效的顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:08:11.143

像这样的东西怎么样：

```
char d1[] = "2013-02-01 12:56:09";
char d2[] = "2013-01-02 13:14:27";

char *parts1[6];
char *parts2[6];
char *p1, *p2;

for(int i = 0; i < 6; i++)
{
     parts1[i] = strtok_r(i?0:d1, "-: ", &p1);
     parts2[i] = strtok_r(i?0:d2, "-: ", &p2);
}

struct tm t1, t2;

t1.year = strtol(parts1[0], 0, NULL);
t1.month = strtol(parts1[1], 0, NULL);
t1.day = strtol(parts1[2], 0, NULL);

t1.hour = strtol(parts1[3], 0, NULL);
t1.hour = strtol(parts1[4], 0, NULL);
t1.hour = strtol(parts1[5], 0, NULL);

t2.year = strtol(parts2[0], 0, NULL);
t2.month = strtol(parts2[1], 0, NULL);
t2.day = strtol(parts2[2], 0, NULL);

t2.hour = strtol(parts2[3], 0, NULL);
t2.hour = strtol(parts2[4], 0, NULL);
t2.hour = strtol(parts2[5], 0, NULL);

time_t tt1, tt2;

tt1 = mktime(&t1);
tt2 = mktime(&t2);

double diff = difftime(tt1, tt2) / 60;  // Seconds -> make it minutes. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:02:53.560

这可以通过提升来完成

```
#include <boost/date_time/local_time/local_time.hpp>

#include <string>
using namespace std;
using namespace boost::local_time;
using namespace boost::posix_time;

class DateTimeDiff {
    istringstream ss;
    local_time_input_facet* facet;
public:
    DateTimeDiff(char const * format)
    : facet(new local_time_input_facet(format)) {
        ss.imbue(locale(ss.getloc(), facet));
    }
    double delta_minutes( string t0, string t1 ) {
        local_date_time ldt0(not_a_date_time), ldt1(not_a_date_time);
        ss.str(t0); ss >> ldt0;
        ss.str(t1); ss >> ldt1;
        return time_duration(ldt1 - ldt0).total_seconds() / 60.0;
    }
};

int main() {
    DateTimeDiff dt("%Y-%m-%d %H-%M-%S");

    const string t0 = "2013-01-02 13-14-27",
                 t1 = "2013-02-01 12-56-09";

    double diff = dt.delta_minutes(t0,t1);

    cout << t0 << " and "
         << t1 << " are "
         << diff << " minutes apart."
         << endl;

    cout << diff << " minutes is ";
    if (diff > 60) {
        cout << "more than";
    } else {
        cout << "less than or equal to";
    }
    cout << " one hour." << endl;

    return 0;
} 
```

输出是

```
2013-Jan-02 13:14:27 UTC and 2013-Feb-01 12:56:09 UTC are 43181.7 minutes apart.
43181.7 minutes is more than one hour. 
```

# c# - Observablecollection 更改不会触发更新

> ID：14646785
> 
> 赞同：0
> 
> 时间：2013-02-01T12:54:32.443
> 
> 标签：c#, wpf, observablecollection

我想我知道问题是什么，但我不知道解决方案。

我有一个可观察的集合，我填充在 WPF DataGrid 中。`DataGrid`然后，我为to 子网格中的行实现了拖放。如果将一行拖到另一个网格中，我会更改其中的一个值，`ObservableCollection`然后像这样显示基础数据：

```
 var q = from standard in DispatchResult
                        where DispatchResult.Route == RouteName
                        select standard;

                dgRoutedData.ItemsSource = q; 
```

我想我将 itemssource 设置为上述 LINQ 查询的结果会破坏来自 observable 集合的整个自动通知，那么如何让数据网格显示过滤视图，当项目的“Route”值发生更改时，这些视图将实际更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:02:55.557

您需要通知已发生更改 - 您始终可以尝试将 linq 查询的结果包装在一个新的`ObservableCollection`

例如

```
var col = new ObservableCollection<DispatchResult>();
col.AddRange(q);
dgRoutedData.ItemsSource = col; 
```

（这有一个缺点，您需要对新的 observable 进行操作，因为以前的 observable 不会为新的 observable 引发项目更改事件）

或者只是清除/重新添加到现有集合中。

我假设您已经避免了这种情况，因为原始集合包含您想要在删除过滤器后过滤“返回”的项目。在这种情况下，您可能希望保留一个私有支持字段来保存实际数据，并`ObservableCollection<T>`用作该支持字段的过滤窗口。

例如

```
_myList = new List<MyObject>(); // Populate it etc
SomeObservable.Clear(); 
SomeObservable.AddRange(from item in _myList where item.ID == 1 select item); 
```

或者不要重新发明轮子并`PagedCollectionView`像有人建议的那样使用包装上述功能（一个带有过滤谓词和其他功能的私有支持字段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:00:12.337

重新加载支持 obvservable 集合 (collection.Clear(); collection.AddAll(q)) 中的项目，而不是更改网格的 ItemsSource 引用

# ios - 如何从 iPad 的弹出视图中隐藏导航栏？

> ID：14646787
> 
> 赞同：3
> 
> 时间：2013-02-01T12:54:45.027
> 
> 标签：ios, ipad, ios6, xcode4.5, uipopovercontroller

我有一个显示弹出视图的应用程序。所有的东西都运行良好，但我无法从弹出视图中隐藏导航栏。

我也搜索了很多东西，但没有得到任何解决方案。

这个问题可能是现有popover相关问题的重复，但我没有从中得到帮助，所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:18:50.970

仅当有`UINavigationController`实例作为弹出框内容时才会出现导航栏。使用不同的控制器或隐藏控制器本身的导航栏。

# jquery - 悬停在孩子上时如何禁用父悬停

> ID：14646790
> 
> 赞同：5
> 
> 时间：2013-02-01T12:54:50.787
> 
> 标签：jquery, html, css, hover

我将尝试通过一些简单的示例来展示我的问题。

**是）我有的？**
[http://jsfiddle.net/JGzSh/3/](http://jsfiddle.net/JGzSh/3/)
这是一些简单的按钮，稍后会有onlick事件。当我将鼠标悬停在绿色 div（父级）上时，会`:hover`稍微改变它的颜色。

**有什么问题？**
问题是，当我将鼠标悬停在黄色部分上时，我想更改黄色元素的背景，但我不想让父母`:hover`工作。

**问题**那么当悬停在孩子上时
如何禁用父母？`:hover`（所以父母的背景会回到起始颜色？）

到目前为止，这些只是关于悬停的 CSS 规则

```
.przycisk:hover{
    background-color: #383;
}
.skrot:hover{
    background-color: red;
} 
```

**到目前为止我尝试了什么？**
这是最重要的问题，我知道。我做了一些研究，到目前为止，我找到了一些可以帮助我的解决方案，但它们都使用 jQuery，我的问题是，~~如果它可能只在 CSS 中完成~~，让它尽可能简单吗？

在 google 中找到的 jQuery 解决方案示例：

```
$('.przycisk').hover(function(e){
    if($(e.target).is('.skrot')){
        // your child span is being hovered over
        e.stopPropagation();
    }else if($(e.target).is('.przycisk')){
        // your parent element is being hovered over
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:30:20.490

我想我找到了一些非常快速的解决方案。

```
$('.deHover').hover(function(){
    $(this).parent().css('background-color', '#008000');
}, function(){
    $(this).parent().css('background-color', '#383');
});

$('.przycisk').hover(function(){
    $(this).css('background-color', '#383');
}, function(){
    $(this).css('background-color', '#008000');
}); 
```

对于我想要禁用父悬停的所有内容，我添加`deHover`了类，它只是更改了 mousein/mouseout 上的父背景颜色。但我还需要记住让父悬停（进出）工作，所以我也为它添加了一个 jQuery。

**[这](http://jsfiddle.net/UkBvx/1/)**是 jsfiddle 检查它是否有效。没发现有什么可抱怨的。

# d3.js - 有代码辅助编辑器吗？

> ID：14646791
> 
> 赞同：2
> 
> 时间：2013-02-01T12:54:51.750
> 
> 标签：d3.js

如何在 d3 库中使用代码辅助？aptana 或任何东西，我尝试使用 Aptana，但它不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:00:52.417

对于 Aptana 3 中的代码辅助：

1.  在主菜单中选择 Window 转到 Preferences
2.  选择 Aptana Studio → 内容辅助
3.  查看自动显示内容辅助
4.  您将看到一个下拉菜单
5.  单击下拉菜单并选择默认延迟。

这将为您提供内容帮助。

在 Aptana 2 中：

要使代码辅助正常工作，只需将 .js 文件的默认编辑器从 JavaScript 编辑器更改为 Aptana JS 编辑器（转到 Preferences->General->Editors->File Associations，然后在顶部列表中选择 *.js。Aptana JS Editor在底部列表中，单击“默认”按钮）。

# javascript - 将对象添加/删除到数组中，并检查对象是否已经存在

> ID：14646792
> 
> 赞同：0
> 
> 时间：2013-02-01T12:54:52.543
> 
> 标签：javascript, extjs, sencha-touch

我有一个任务，我需要将一个对象推送到一个数组中，在推送之前需要检查对象是否已经退出，如果需要从数组中删除/删除对象。我已经编写了示例代码，但没有得到预期的输出。

```
optionlistItemTap : function (data, index) {
    var record = data.getStore().getAt(index);
    var Id = record.raw.id;
    var arraysize = names.length;

    for (i = 0; i <= arraysize; i++) {
        if (arraysize == 0) {
            names.push(record);
            var indexId = names[i].raw.id
            var Id = record.raw.id
            break;
        }
        else if (indexId == Id) {
            names.splice(i, 1);
            break;
        }
        else
        names.push(record);
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:08:59.577

查看您的代码，我最好的猜测是您需要这个：

```
optionlistItemTap : function (data, index) {
    var record = data.getStore().getAt(index); // Get the record
    var Id = record.raw.id;                    // Get the record's id
    var arraysize = names.length;              // Get the length of the `names` array

    if (arraysize == 0) {                      // If the `names` array is empty,
        names.push(record);                    // Push the record to the array.
        return;                                // Break out of the function.
    }else{                                     // Otherwise,
        for (var i = 0; i <= arraysize; i++) { // Loop through the array,
            if (names[i].raw.id == Id) {       // And if names[i]'s id matches the id of the element to add,
                names.splice(i, 1, record);    // Replace the element in `names` with the record.
                return;                        // Break out of the function.
            }
        }
    }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:02:33.800

indexId 在 else if 块中未定义

# jquery - Jquery - Ajax - 加载图像后显示提交按钮？

> ID：14646795
> 
> 赞同：0
> 
> 时间：2013-02-01T12:55:04.383
> 
> 标签：jquery, html

```
 $.ajax({
            type:"GET",
            url:"<?php echo Yii::app()->request->baseUrl; ?>/admin/"+urlPage+"?t=ajax&img="+$("#image_name").val()+"&w="+
                thumb_width+"&h="+thumb_height+"&x1="+x_axis+"&y1="+y_axis,
            cache:false,

            success:function(rsponse)
            {  
                $("#cropimage1").hide();
                $("#thumbs1").html("");
                if(th_size == '1'){
                $("#thumbs").html("<img src='<?php echo Yii::app()->request->baseUrl; ?>/upload/temporary/thumb/"+rsponse+"?version="+Math.ceil(Math.random()*100)*10+"' /><input type='button' class='save-btn' onclick='refresh();' name='save' value='<?php echo Yii::t(Yii::app()->session["translator"], "Save and continue");?>'>");
               $('html, body').animate({ scrollTop: $('#thumbs').offset().top }, 'slow');
                document.getElementById("small_image").value =rsponse;
               //alert(document.getElementById("small_image").value)
                }

    } 
```

这里是根据ajax调用的响应动态加载一个div id“thumbs”。在这个thumbs div中有一个图像和提交按钮..问题是提交按钮加载速度很快，但如果图像很重，加载需要时间。我怎样才能使提交按钮在图像后加载..任何帮助表示赞赏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:04:39.157

您可以使用[`.onload`](http://www.w3schools.com/jsref/event_img_onload.asp)图像对象。

代码如下：

```
var img = new Image();
img.onload = function(){
    $("#thumbs").append(img).append("<input type='button' class='save-btn' onclick='refresh();' name='save' value='<?php echo Yii::t(Yii::app()->session["translator"], "Save and continue");?>'>");
};
img.src = '<?php echo Yii::app()->request->baseUrl; ?>/upload/temporary/thumb/"+rsponse+"?version="+Math.ceil(Math.random()*100)*10+"'; 
```

我不运行此代码，如果有任何错误请指出，因为该值包含 php 代码。

但是设置`src`和`onload`正是这样使用的。

这是一个简单的jsfiddle。[http://jsfiddle.net/U7nYb/2/](http://jsfiddle.net/U7nYb/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:38:20.877

这是我的建议，我始终使用 jQuery 而不是混合使用

```
$.ajax({
  type:"GET",
  url:"<?php echo Yii::app()->request->baseUrl; ?>/admin/"+urlPage+"?t=ajax&img="+$("#image_name").val()+"&w="+thumb_width+"&h="+thumb_height+"&x1="+x_axis+"&y1="+y_axis,
  cache:false,
  success:function(rsponse) {  
    $("#cropimage1").hide();
    $("#thumbs1").empty();
    if(th_size == '1'){
      $("#thumbs").html('<img id="thumbImage" src="<?php echo Yii::app()->request->baseUrl; ?>/upload/temporary/thumb/'+rsponse+'?version='+Math.ceil(Math.random()*100)*10+' />');
      $("#thumbImage").on("load",function() {
        $("#thumbs").append('<input id="saveBtn" type="button" class="save-btn" onclick="refresh();" name="save" value="<?php echo Yii::t(Yii::app()->session["translator"], 'Save and continue');?>">');
      });
      $('html, body').animate({ scrollTop: $('#thumbs').offset().top }, 'slow');
      $("#small_image").val(rsponse);
    }
  }
.
.
. 
```

# svn - 如何列出远程 SVN 存储库中的所有文件？

> ID：14646798
> 
> 赞同：37
> 
> 时间：2013-02-01T12:55:06.817
> 
> 标签：svn, repository, remote-access

我访问了一个**大型**远程 SVN 存储库。由于我通常只需要其内容的一小部分，因此我进行了“稀疏结帐”：

```
svn checkout --depth empty svn+ssh://... src 
```

每当我需要存储库中的文件夹时，我都可以

```
svn up folder 
```

当我不再需要它时，我会使用

```
svn up --set-depth exclude folder 
```

**但是现在我需要存储库中所有**文件的完整列表，并且我不想为了获取文件和文件夹名称而进行完整的签出。

我已经尝试过`svn ls -R`，它确实会列出一些我没有签出的文件，但仍然有一些文件丢失。我知道，因为它确实显示了当前目录中的所有内容。现在我可以半手动地执行`svn ls`每个`svn up --depth empty`新找到的目录，但我想知道是否有更好的选择。

与[如何列出曾经提交到存储库的所有文件相反？](https://stackoverflow.com/questions/1695010/)我只对存储库的当前内容感兴趣，我无权访问`svnadmin`. 我也不能在存储库服务器上安装软件。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-01T13:00:08.107

这会递归地列出所有文件：

```
svn ls -R URL-OF-REPO 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T12:59:55.763

```
svn list --recursive https://myrespository.my.com/Myproject 
```

我认为这适用于我尝试的当前和所有子目录。这一个也列出了所有分支和标签，以及它们的所有子目录和文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-18T14:20:02.390

你可以试试我的实用程序[fast-svn-crawler](https://sourceforge.net/projects/fastsvncrawler/)，它比“svn list --recursive”[快得多。](http://vcs.atspace.co.uk/2013/03/16/fast-listing-of-svn-repository-with-svn-crawler/)

```
$ svn-crawler https://myrespository.my.com/Myproject 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-28T14:03:07.143

没有网址

`svn list --recursive -r HEAD`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-24T14:17:42.293

如果你想得到所有文件而不是文件夹的完整列表，你可以像这样通过管道*svn list*和*grep*命令：

```
svn list -R svn://url/to/your/main/folder/on/repo | grep '[^\/]$' 
```

列出的文件夹的路径

> *svn list -R svn://url/to/your/main/folder/on/repo*

总是以“/”结尾，而文件路径则不是。输出作为输入传递给

> *grep '[^\/]$'*

它排除了所有带有尾随*“/”*的路径；其余路径仅与文件有关。

示例：假设我们在 my.svnserver.com 上有一个名为 myrepo 的存储库*作为*域*，*并且我们想要获取 myrepo 的子目录中列出的所有文件，*即*mysubdir *：*命令是

 ***```
svn list -R svn://my.svnserver.com/myrepo/mysubdir | grep '[^\/]$' 
```

此外，如果您将结果通过管道传递给*wc -l*命令（打印换行符的数量，因为每个输出行仅包含一个路径），您可以获得*mysubdir*下所有文件的数量，如下所示

```
svn list -R svn://my.svnserver.com/myrepo/mysubdir | grep '[^\/]$' | wc -l 
```***

# javascript - 未捕获的 ReferenceError：Spinner 未在 chrome 上定义

> ID：14646799
> 
> 赞同：0
> 
> 时间：2013-02-01T12:55:07.723
> 
> 标签：javascript, jquery, jquery-ui-spinner

我正在使用`spin.js`库来加载微调器。Chrome 抛出此错误

> [未捕获的 ReferenceError：未定义微调器]。

微调器在所有其他浏览器中运行良好！

以下是相关代码：

```
//Jquery Spinner 
$.fn.spin = function(opts) {
    this.each(function() { 
       var $this = $(this), data = $this.data();
       if (data.spinner) {
           data.spinner.stop();
           delete data.spinner; 
       } 
       if (opts !== false) {
           data.spinner = new Spinner($.extend({
                      color: $this.css('color')}, opts)).spin(this);
       } 
    });
    return this; 
}; 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T18:30:54.033

所以我遇到了同样的问题，我不确定你是否使用我正在使用的同一个 AngularJS、Yeoman Stack，但我解决它的方法非常简单。我只是改变了的顺序，`<script src="...">`所以我`spin.js`在它们的最底部。请参见下面的示例

修复之前（给出未捕获的引用错误：未定义微调器）

```
<!-- startbuild -->
    <script src="scripts/js/spin.js"></script>

    <script src="scripts/app.js"></script>
    <script src="scripts/controllers/main.js"></script>
    <script src="scripts/controllers/admin.js"></script>
<!-- endbuild --> 
```

修复后

```
<!-- startbuild -->
    <script src="scripts/app.js"></script>
    <script src="scripts/controllers/main.js"></script>
    <script src="scripts/controllers/admin.js"></script>

    <script src="scripts/js/spin.js"></script>
<!-- endbuild --> 
```

# java - 更新 JFrame 大小和扩展状态

> ID：14646802
> 
> 赞同：1
> 
> 时间：2013-02-01T12:55:18.223
> 
> 标签：java, swing, jframe, fullscreen, taskbar

您好，当用户更改屏幕分辨率时，我想设置 JFrame 的大小。

```
this.setSize(myWidth, myHeight); 
```

这工作正常，窗口变小/变大。但是如果我设置了扩展状态，它不会影响。我仍然可以看到菜单栏。

```
this.setExtendedState(Frame.MAXIMIZED_BOTH);
this.setUndecorated(true); 
```

当我更改 ExtendedSate 并且 JFrame 正在运行时，我必须调用一个函数吗？在初始化过程中，ExtendedState 工作正常，无需调用重建或重新加载 JFrame 的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T21:50:27.463

我发现没有真正简单的本地方式，没有库。

# asp.net - 将值从外部 .js 文件传递 到 asp 隐藏字段

> ID：14646808
> 
> 赞同：0
> 
> 时间：2013-02-01T12:55:36.820
> 
> 标签：asp.net, vb.net

我正在尝试将从外部 js 文件中获取的值传递到我的 .aspx 页面中。

这是我的 .js 文件代码：

```
function GETdateTime() {
    var d = new Date()
    var date = new String(d.getDate() + "/" + (d.getMonth() + 1) + "/" + d.getFullYear());
    var time = new String(d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds());
    document.getElementById("test").outerHTML = "<br>" + date + "<br>" + time;
} 
```

在我的 .aspx 页面中，我正在调用上述函数并检索结果，例如：

```
 <form id="form1" runat="server" method =" post">
    <span id = "test"> </span>

    <script type =" text/javascript" src="JavaScript1.js"  >
    </script>     

     <script type ="text/javascript">
            GETdateTime();
     </script>
</form> 
```

我想要实现的是，我计划拥有一个`HiddenField`存储`date, time and other things`然后抓取其中的值`HiddenField`并将它们传递给我的 vb.net 代码后面以将它们存储在字符串中的值。问题是我已经看到了很多方法，我有点困惑，比如[这里](http://www.foliotek.com/devblog/extending-jquery-to-select-asp-controls/)、[这里](http://forums.asp.net/t/1238046.aspx/1) [和这里](https://stackoverflow.com/questions/1861103/how-can-i-access-server-controls-from-my-external-javascript-file)，应该选择哪一种。我也在考虑效率、一致性、灵活性和整体性能。任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:03:44.947

如果你有这样的表格：

```
<form id="form1" runat="server" method =" post">
    <asp:HiddenField runat="server" id="test" />
    <script type =" text/javascript" src="JavaScript1.js"  >
    </script>     

     <script type ="text/javascript">
            GETdateTime("<%=test.ClientID %>");
     </script>
</form> 
```

比你需要一个javascript：

```
function GETdateTime(hiddenFieldID) {
    var d = new Date()
    var date = new String(d.getDate() + "/" + (d.getMonth() + 1) + "/" + d.getFullYear());
    var time = new String(d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds());
    document.getElementById(hiddenFieldID).value = "<br>" + date + "<br>" + time;
} 
```

比，在提交表单后的代码中，要使用 JS 设置值，您可以简单地执行以下操作：

```
hiddenFieldVal = test.Value 
```

# r - 绘制R中不同文件的重叠位置

> ID：14646809
> 
> 赞同：3
> 
> 时间：2013-02-01T12:55:42.370
> 
> 标签：r, plot, ggplot2, lattice

我有两个大文件`Start`和`End`位置和两个示例列（数字）。

`File 1:`

```
Start  End  Sample1  Sample2
1         60      1       4
100       200     2       1
201       250     1       4
300       450     1       1 
```

`File 2:`

```
Start  End  Sample1  Sample2
40         60      1       1
70        180      1       1
240       330      2       1
340       450      1       4
500       900      1       4
980       1200     2       1 
```

首先，我想从第一个文件中获取第一个`Start`和`End`位置并制作一个段图。该图还必须考虑到第一个文件`Start-20`中`End+20`的每个位置。

然后我想从第二个文件中获取**重叠** `Start`和`End`位置并将其绘制在上面的图上。这样，将基于第一个文件中的`Start`和`End`位置绘制许多图，并且还将单独绘制没有重叠的图。

每个`color`段的 将基于两个样本编号（例如，在两个文件`1 and 4`中，段的颜色`red`是否`1 and 1`为 ，段的颜色是否为`green`，依此类推）。

如果有人让我了解如何在 R 中为此创建函数，我将不胜感激。

提前致谢。

PS我已附上图纸以供![在此处输入图像描述](../Images/53c8b09685f52aaf11c69b8070b074d2.png)输出。我只展示了两个结果。

下面是我写的代码，但它给出了一个错误

**match.names(clabs, names(xi)) 中的错误：名称与以前的名称不匹配**

我还需要为 dataset1 线段指定红色，为 dataset2 线段指定绿色。我将如何在下面的代码中实现它？

```
overlap_func <- function(dataset1,dataset2) {

for(i in 1:nrow(dataset1))
 {

 loop_start <- dataset1[i,"Start"]
 loop_end <- dataset1[i,"End"]
 p <- dataset2[,c(1,2)]   
 dataset1_pos <- data.frame(loop_start,loop_end)
 dataset2_filter <- p[p$Start >= (loop_start-(loop_start/2)) & p$End <= (loop_end+ (loop_end/2)), ]
 data_in_loop <- rbind(dataset1_pos,dataset2_filter)
 plot_function(data_in_loop,loop_start,loop_end)

 }
 }

plot_function <- function(loop_data,start,end){ 
 pos <- 1:nrow(loop_data)
 dat1 <- cbind(pos,loop_data)
 colnames(dat1) <- c("pos","start","end")
 pdf(file=paste0("path where plots are generated","_",start,"-",end,"_","overlap.pdf"))
 plot(dat1$pos, type = 'n', xlim = range(c(start-(start/2), end+(end/2))))
 segments(dat1$start, dat1$pos, dat1$end, dat1$pos)
 dev.off()
 }

df1 <- read.table(header=T, text="Start  End  Sample1  Sample2
1         60      1       4
100       200     2       1
201       250     1       4
300       450     1       1")

df2 <- read.table(header=T, text="Start  End  Sample1  Sample2
40         60      1       1
70        180      1       1
240       330      2       1
340       450      1       4
500       900      1       4
980       1200     2       1")

 overlap_func(df1,df2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:49:59.673

像这样的东西？？

```
df1 <- read.table(header=T, text="Start  End  Sample1  Sample2
1         60      1       4
100       200     2       1
201       250     1       4
300       450     1       1")

df2 <- read.table(header=T, text="Start  End  Sample1  Sample2
40         60      1       1
70        180      1       1
240       330      2       1
340       450      1       4
500       900      1       4
980       1200     2       1")

require(IRanges)
require(ggplot2)
require(plyr)

df1$id <- factor(1:nrow(df1))
ir2 <- IRanges(df2$Start, df2$End)
out <- ddply(df1, .(id), function(x) {
    ir1 <- IRanges(x$Start, x$End)
    o.idx <- as.data.frame(findOverlaps(ir1, ir2))$subjectHits
    df.out <- rbind(x[, 1:4], df2[o.idx, ])
    df.out$id1 <- x$id
    df.out$id2 <- seq_len(nrow(df.out))
    df.out
})
out$id1 <- factor(out$id1)
out$id2 <- factor(out$id2)
out$id3 <- factor(1:nrow(out))

p <- ggplot(out, aes(x = Start, y = id3 , colour = id2)) 
p <- p + geom_segment(aes(xend = End, ystart = id3, yend = id3))
p <- p + scale_colour_brewer(palette = "Set1")
p 
```

![gglot2_no_facet_geom_segment](../Images/1d114df704022230836f67dea310d15f.png)

**编辑：**查看您更新的图纸后，也许这就是您想要的？

```
p + facet_wrap( ~ id1, scales="free") 
```

![ggplot2_facet_geom_segment](../Images/d628eb9407f5d98b4b8ff7bf4a803b99.png)

**编辑：**将构面中的每个图保存在单独的文件中。您可以通过每次拆分生成图来做到这一点`id1`

```
d_ply(out, .(id1), function(ww) {
    p <- ggplot(ww, aes(x = Start, y = id3 , colour = id2)) 
    p <- p + geom_segment(aes(xend = End, ystart = id3, yend = id3))
    p <- p + scale_colour_brewer(palette = "Set1")
    fn <- paste0("~/Downloads/id", as.numeric(as.character(ww$id1[1])), ".pdf")
    ggsave(fn, p)
}) 
```

相应地设置路径`fn`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:07:36.460

我尝试使用 package.json 解决这个问题`lattice`。我特别使用函数`Shingle`来了解要比较的间隔。我希望我可以合并 2 个带状疱疹，但我不能。所以，一旦我有了第一个情节，我就使用（如上面的解决方案）`IRanges`包来计算重叠。这个想法是有一个决赛`dotplot`。

```
## I red the input data
dat <- read.table(text = 'Start  End  Sample1  Sample2
1         60      1       4
100       200     2       1
201       250     1       4
300       450     1       1', header = T) 

dat1 <- read.table(text = 'Start  End  Sample1  Sample2
40         60      1       1
70        180      1       1
240       330      2       1
340       450      1       4
500       900      1       4
980       1200     2       1', header = T) 

## I create my 2 shingles
dat.sh <- shingle(x = dat[,3], intervals = dat[,c(1,2)])
dat1.sh <- shingle(x = dat1[,3], intervals = dat1[,c(1,2)])
## compute max value for plot comparison
max.value <- max(c(dat$End,dat1$End))
## I plot the 2 series with differents color
p1<- plot(dat.sh, xlim= c(0,max.value),col = 'red')
p2 <- plot(dat1.sh,xlim= c(0,max.value), col ='green')
library(gridExtra)
grid.arrange(p1,p2) 
```

这是比较我的间隔的快速方法。

![在此处输入图像描述](../Images/9ed49b9a4a0a07dbab7b29a30e2121b8.png)

这看起来不错，但我无法进一步使用 shingle，因为我无法将它们合并到同一个情节中。所以我将使用`IRanges`包来计算重叠。

```
library(IRanges)
rang1 <- IRanges(start=dat[,1], end = dat[,2])
rang2 <- IRanges(start=dat1[,1], end = dat1[,2])
dat.plot     <- dat1                    # use the first data.frame
dat.plot$group <- 'origin'
dat.plot$id <- rownames(dat1)           ## add an Id for each row
rang.o <- findOverlaps(rang2,rang1)     # get overlaps
dat.o <- dat1[rang.o@queryHits,]        ## construct overlaps data.frame 
dat.o$id <- rang.o@subjectHits
dat.o$group <- 'overlap'
dat.plot <- rbind(dat.plot,dat.o)      ## union of all 
dotplot(id ~End-Start|group  , data=dat.plot, 
                               groups = col,type = c("p", "h")) 
```

![在此处输入图像描述](../Images/8d908e68683b20121bdc549db811f53e.png)

# css - 自定义字体位移问题

> ID：14646811
> 
> 赞同：0
> 
> 时间：2013-02-01T12:55:49.780
> 
> 标签：css, html, font-face

我已经设置了一个页面来演示这个问题（请参阅）： [http ://www.vdovgan.ru/font-issue/](http://www.vdovgan.ru/font-issue/)

我正在为块级元素使用自定义字体。

问题是这种字体卡在我的 Linux 机器上 Google Chrome 的顶部。在 Windows 机器和相同的浏览器上，它正好位于边界框的垂直中心（正如预期的那样）。

问题是：为什么它在我的 Linux 机器上被取代了？

我在我的 Linux 机器上使用**Google Chrome 版本 24.0.1312.57 ，在我的 Windows 机器上使用 Google** **Chrome 版本 24.0.1312.57 m**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:17:15.790

Windows 和 Linux 中 Chrome 的渲染引擎是不同的。我会在 javascript 中设置一个测试来判断它是什么浏览器并添加一些填充。

linux 的 UserAgent 结果“Mozilla/5.0 (X11; CrOS x86_64 2913.331.0) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.111 Safari/537.11”

这是一个 JavaScript 示例：

```
if ((navigator.userAgent.indexOf('Chrome') && navigator.userAgent.indexOf('Gecko')) != -1)
{
  // add some padding via javascript because it is using the Gecko engine
} 
```

# ibm-doors - 是否有 DXL API 来获取打开模块的引用计数？

> ID：14646819
> 
> 赞同：0
> 
> 时间：2013-02-01T12:56:22.980
> 
> 标签：ibm-doors

DOORS 8.3 的“管理打开的模块”对话框列出了所有打开的模块、它们的模式（如果可见）等以及引用的数量。我想使用该引用计数来确定我的脚本是否可以安全地关闭模块并避免在当前使用时关闭。我不确定“参考”列到底显示了什么。我在互联网上的帮助或相应信息中没有找到它的描述。有人知道是否有一些未记录的 DXL API 可以让我访问该信息吗？

编辑：我找到了`refcount_`返回整数的函数。但我不知道返回值是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:20:45.030

看起来引用是指当前引用该模块的打开模块的数量。例如：当您打开具有链接的模块时，DOORS 还会在后台打开链接使用的所有链接模块。因此，如果我通过 LINKMOD_A 打开包含链接的文档，LINKMOD_A 将显示 1 个参考。如果我随后打开另一个具有通过相同 LINKMOD_A 链接的文档，则引用数将增加到 2。我没有看到正式模块上的引用数高于 1。在你的一些模块上试试这个，看看你什么时候在一个链接模块上得到多个引用，然后`refcount_`对那个链接模块运行你的函数，看看你是否得到相同的数字。我不确定这是否是您正在寻找的功能，但它肯定是可能的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T07:41:43.233

我假设您的脚本正在打开模块，所以您需要做的就是首先检查它是否已经打开。

```
string sModuleFullName = "/Some/Module/Path"
Module oModule = module(sModuleFullName)
bool bClose = null(oModule)
if(null(oModule)) {
oModule = read(sModuleFullName, true,true)
}

// do stuff

if(bClose) {
close(oModule)
} 
```

编辑：关闭由触发器、属性或布局 dxl 打开的模块的替代方法

```
// Save currently open Modules to a Skip
Skip oOpenModulesSkip = createString()
Module oModule
for oModule in database do {
    put(oOpenModulesSkip, fullName(oModule), fullName(oModule))
}

// do stuff

// Close Modules not in the Skip
for oModule in database do {
    if(!find(oOpenModulesSkip, fullName(oModule))) {
        close(oModule, false)
    }
}
delete(oOpenModulesSkip) 
```

# php - 如何重定向到 php 肥皂服务器中的页面

> ID：14646820
> 
> 赞同：2
> 
> 时间：2013-02-01T12:56:28.503
> 
> 标签：php, nusoap

我已经调用了一个 nusoap 服务器函数来做一些事情并重定向。

这就是我调用 nusoap 函数的方式

```
$client=newnusoap_client($endpoint);
$wrapperdiv = $client->call('testFunction', array('details' => $formname )); 
```

在测试功能中，我使用标题标签来重定向

```
header("location:www.google.com"); 
```

但我收到一个错误

> 在此服务器上未找到请求的 URL serverpath/http//www.google.com。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:58:25.473

你可以使用 with `http://`，它总是调用那个真实的服务器，否则它会调用你服务器中的相对路径。

```
header("location:http://www.google.com"); 
```

# c - SystemTimeToFileTime 在 linux 中的精确替换

> ID：14646822
> 
> 赞同：0
> 
> 时间：2013-02-01T12:56:42.693
> 
> 标签：c, linux, time

试图找到函数 SystemTimeToFileTime 的完整模拟，但找不到。

我有所有 SYSTEMTIME 和 FILETIME 结构，在 linux 上正确工作的 SYSTEMTIME 用于日期差异函数：

```
int64_t Delta2(const SYSTEMTIME st1, const SYSTEMTIME st2) { 

    union timeunion { FILETIME fileTime; ULARGE_INTEGER ul; } ;
    timeunion ft1;
    timeunion ft2;
    SystemTimeToFileTime(&st1, &ft1.fileTime);
    SystemTimeToFileTime(&st2, &ft2.fileTime);

    return ft2.ul.QuadPart - ft1.ul.QuadPart; 
} 
```

有人知道该`SystemTimeToFileTime`功能的确切替换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:05:20.223

A`FILETIME`只是一个分辨率为 10 毫秒的时间戳，分为两个 32 位数字。一个 POSIX 时间戳（具有第二个分辨率）可以简单地乘以 100 来得到它。

要从 a`SYSTEMTIME`到 a `FILETIME`，您可以`struct tm`使用相关字段创建 a，并用于`mktime`创建`time_t`. 将该时间戳放在一个 64 位整数中，乘以 100（以获得 10 毫秒的分辨率）并添加该`SYSTEMTIME` `wMilliseconds`字段（除以 10），然后您就拥有了`FILETIME`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:58:18.457

我建议您查阅 WINE 项目的源代码，其中包含您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:21:25.363

[`SYSTEMTIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)

> 指定日期和时间，使用月、日、年、工作日、小时、分钟、秒和毫秒的各个成员。时间采用协调世界时 (UTC) 或本地时间，具体取决于所调用的函数。

最接近的类型是[`struct tm`](http://linux.die.net/man/3/ctime)，尽管它没有毫秒。

[`FILETIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)

> 包含一个 64 位值，表示自 1601 年 1 月 1 日 (UTC) 以来的 100 纳秒间隔数。

您可以使用`struct timeval`（支持微秒）或`struct timespec`（支持纳秒）

例如，并非所有文件系统都支持纳秒`ext4`。

[`SystemTimeToFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)

您可以使用[`mktime`](http://linux.die.net/man/3/mktime)它，尽管您将只获得自纪元 (1970-01-01 00:00 UTC) 以来的秒数。

所以，至少可以说，一个*精确的*替换是困难的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:21:47.407

Linux 本身没有“文件时间”的概念。根据您正在做什么，最好使用`difftime`（以秒为单位给出两个 time_t 之间的差异作为浮点数），或者使用一些更精确的时间戳并将其转换为 10ms 间隔的差异？

您可以使用`mktime`将日期/时间值转换为`time_t`.

# mysql - 加载数据失败时会发生什么

> ID：14646835
> 
> 赞同：1
> 
> 时间：2013-02-01T12:57:27.070
> 
> 标签：mysql, sql

我正在从我的主数据库中的 CSV 文件加载数据。

我的 CSV 文件大小为 160 GB。

我的问题：

1.  加载数据是否会并行加载到从站中？
2.  如果master中的磁盘已满，整个过程会回滚还是部分失败？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:17:17.550

以我个人的经验，当您使用导入功能时，它会为您在 csv 中的每一行触发一个查询...这意味着如果您发现任何行有问题或磁盘已满，它将不会被回滚...所以它部分失败

并且还有一个疑问是它是否允许您的 csv 执行，因为它的大小......

# python - Python 3 上 __future__ 模块中 print_function 的奇怪行为

> ID：14646839
> 
> 赞同：2
> 
> 时间：2013-02-01T12:57:37.107
> 
> 标签：python, python-import

我观察到`__future__`模块`print_function`在 Python 3.2 中的奇怪行为。

以这段代码为例：

```
from __future__ import print_function
import sys

print('Enter the base path of the images: ', end='')
path = sys.stdin.readline().strip().strip('"')
if len(path) == 0:
    print("No path entered")
else:
    print(root)
print("\n\nPress ENTER to exit")
exit = sys.stdin.readline() 
```

`ENTER`当脚本运行时，控制台会在显示第一`print`条语句之前等待用户按下。
然后输出如下所示：

```
输入图像的基本路径：未输入路径

按 ENTER 退出

```

不用说，向用户显示一个空提示会导致很多混乱，尤其是因为很多人害怕带有白色文本的黑色窗口（命令提示符）。

当代码更改为此

```
from __future__ import print_function
import sys

print('\nEnter the base path of the images: ', end='') #line now starts with \n
path = sys.stdin.readline().strip().strip('"')
if len(path) == 0:
    print("No path entered")
else:
    print(path)
print("\n\nPress ENTER to exit")
exit = sys.stdin.readline() 
```

然后输出如预期的那样（假设我们忽略前面的空行）：

```
输入图像的基本路径：c:\
C：\

按 ENTER 退出

```

然而，当代码在 python 2.6 中运行时，第一个代码按预期工作（即它在等待接收输入`Enter the base path of the images:` *之前显示）。*

这让我问：
为什么我需要在`print`函数前面加上 a才能在 Python 3.2 中显示输出，而在 Python 2.6 中运行时`\n`不需要？ 难道这两个版本的实现方式不同吗？`\n`
`print_function`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:03:11.537

您正在看到行缓冲的效果。首先刷新`stdout`（`sys.stdout.flush()`用于向后兼容 Python 2）：

```
print('Enter the base path of the images: ', end='')
sys.stdout.flush() 
```

Python 2 中的`print()`函数肯定与 Python 3 中的函数不同（该`from __future__ import print_function`行实际上毫无意义）。在 Python 3 中，I/O 已经过彻底检查，`stdout`缓冲语义也发生了微妙的变化。在 Python 2 中，`sys.stdin.readline()`调用会自动刷新`stdout`，在 Python 3 中不再是这种情况。

如果您使用该`input()`函数而不是直接读取`stdin`，则根本不需要刷新：

```
msg = 'Enter the base path of the images: '
try:
    # python 2
    path = raw_input(msg)
except NameError:
    # python 3
    path = input(msg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:09:20.100

在这种情况下，我会检查我的 python 版本并替换适当的“输入”函数：现在你可以在`input`任何你想要用户交互的地方使用。

```
from __future__ import print_function
import sys

if sys.version_info < (3,):
    input = raw_input

path = input('Enter the base path of the images> ').strip().strip('"')
if len(path) == 0:
    print("No path entered")
else:
    print(path)

print("\n\nPress ENTER to exit")
exit = input() 
```

# css - Text inside a div should always be aligned to middle

> ID：14646841
> 
> 赞同：0
> 
> 时间：2013-02-01T12:57:49.713
> 
> 标签：css

I've tried something, but vertical align doesn't work.

HTML:

```
<div class="browseBuildsArea-pro">
    <img class="champion" src="http://wiki.guildwars.com/images/d/d3/60px-Ranger-tango-icon-200.png">
    <div class="build-poster">
        <span class="middle-text">
            aaaaaaaaaaaa<br>
            bbbbbbbbbbbb<br>
            ccccccccccccc<br>
            dddddddddddd<br>
        </span>
    </div>
</div> 
```

CSS:

```
div.browseBuildsArea-pro {
    float: left;
    position: relative;
    width: 790px;
    height: 90px;
    background-image:url('http://revistaverzus.com/online/background.jpg');
    background-repeat:no-repeat;
}
div.browseBuildsArea-pro img.champion {
    float: left;
    display: block;
    height: 72px;
    margin-left: 14px;
    margin-top: 7px;
    border-radius: 9px;
    -moz-border-radius: 9px;
    -khtml-border-radius: 9px;
    -webkit-border-radius: 9px;
}
div.browseBuildsArea-pro div.build-poster {
    display: block;
    position: relative;
    margin-left: 150px;
    margin-top: 10px;
}
span.middle-text {
    vertical-align: middle;
} 
```

[http://jsfiddle.net/sCWfS/1/](http://jsfiddle.net/sCWfS/1/)

How can I make the text align middle regardless of the length of the content?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:01:04.143

尝试使用以下 CSS：

```
div {
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:04:56.053

您需要`display: table`在父级和`display: table-cell`子级上使用垂直对齐才能工作。

这是一个工作示例：http: [//jsfiddle.net/sCWfS/3/](http://jsfiddle.net/sCWfS/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:05:19.263

```
div.browseBuildsArea-pro div.build-poster {
display: block;
 position: relative;
    text-align: center;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:04:07.283

垂直对齐 css 属性不适用于 div。看看这个答案：
[div中元素的垂直对齐](https://stackoverflow.com/questions/79461/vertical-alignment-of-elements-in-a-div)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:00:39.280

你试过这个吗？[http://jsfiddle.net/sCWfS/2/](http://jsfiddle.net/sCWfS/2/)

而不是跨度使用带有边距的DIV：0 auto？

```
div.middle-text {
    margin: 0 auto;
} 
```

# objective-c - StoryBoard image from referenced folder

> ID：14646842
> 
> 赞同：0
> 
> 时间：2013-02-01T12:57:52.993
> 
> 标签：objective-c, xcode, storyboard

I have been trying to get images in my referenced folder(blue folder) in Storyboard. But I haven't had any luck. I tried putting something like this in the image field "images/image.png" but apparently it doesn't work.

Anybody ever encountered the same problem?

# android - 在小部件中打开一个活动

> ID：14646846
> 
> 赞同：0
> 
> 时间：2013-02-01T12:58:11.730
> 
> 标签：android, android-activity, android-widget, widget

我知道如何从小部件打开活动。它将全屏打开。

是否可以在小部件内打开一个？

我的活动是应用程序的一部分，它有一个大代码。该活动打开一个摄像头并运行一些算法。我可以有一个 4x4 小部件，并使用我的项目算法在小部件内运行活动吗？（基本上是活动的快捷方式，但在小部件内播放）。

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent intent = new Intent(context, ClassToLaunch.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);
        views.setOnClickPendingIntent(R.id.widget_id, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:02:38.817

不要使用 Activity 并使用[Fragment](http://developer.android.com/training/basics/fragments/creating.html)。它可以做 Activity 所做的一切（如果需要，可以调用父 Activity 的方法），也可以植入屏幕的专用部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:04:53.643

你不能这样做，但你可以充分利用你的布局和它的更新间隔，因为小部件有它自己的生命周期。

# regex - Wordpress rewrite url

> ID：14646852
> 
> 赞同：0
> 
> 时间：2013-02-01T12:58:27.513
> 
> 标签：regex, wordpress, .htaccess

I've been looking at rewriting rules for wordpress, since i have a site [http://mysite.com/abc/def/ghi](http://mysite.com/abc/def/ghi) , and I want to be able to visit [http://mysite.com/def/ghi](http://mysite.com/def/ghi) without having 'abc' in the URL.

All the tutorials I've been able to found only describe the opposite way.

Thanks in advance!

# java - 下载并安装 JavaFX for Eclipse

> ID：14646856
> 
> 赞同：10
> 
> 时间：2013-02-01T12:58:38.110
> 
> 标签：java, eclipse, maven, javafx

我是一位经验丰富的（Java、Eclipse 和 Maven）开发人员，到目前为止已经使用了几个框架。每次我尝试从新事物开始时，似乎有无数种配置可供下载和安装。

我在[这里](http://docs.oracle.com/javafx/1.2/gettingstarted/eclipse-plugin/index.html#downloadinfo)查看了说明和所有附近的页面，但它们似乎过时了，Eclipse 插件路径无效，当我安装最新版本时，我发现没有该站点（2.0.2），它说我安装了更新的版本。

此外，我读过的大多数帖子中的 Maven 设置似乎都晦涩难懂。

**我正在使用：**

*   Windows 7的
*   Eclipse x64 靛蓝
*   JDK x64 1.6.0.24
*   Maven 3.0.3

而且我不记得安装 JavaFX。

我错过了什么？为了开始使用这个框架，我可以在哪里阅读有关设置的信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T13:14:19.533

如果您从 Oracle 安装最新的 JDK 7（共同捆绑），则会安装 JavaFX。

你可以在这里找到 Eclipse 插件：

[http://efxclipse.org/](http://efxclipse.org/)

如果您对 Maven 构建感兴趣：我最近发布了 Drombler FX 的初始版本，这是一个基于 OSGi 和 Maven（POM-first）的 JavaFX 模块化 RCP：

[http://puces-blog.blogspot.ch/2012/12/dromler-fx-building-modular-javafx.html](http://puces-blog.blogspot.ch/2012/12/drombler-fx-building-modular-javafx.html)

[http://wiki.dromler.org/GettingStarted](http://wiki.drombler.org/GettingStarted)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-22T13:46:30.283

我确实尝试过**efxclipse**，但这对我来说还不够。我还尝试将 javafx jar 文件的路径提供给**efxclipse**

> 窗口->首选项->javafx->“javafx jar 的路径，即 **jfxrt.jar** ”

. **但没有什么**对我有用，我不知道出了什么问题。

然后我只需将**jfxrt.jar**文件添加到我的库中，一切正常：-

```
 1\. Right click your JRE System Library
 2\. Build Path
 3\. Configure Build Path
 4\. Add External Jars
 5\. "The path to jfxrt.jar" 
```

[您可以从此](https://github.com/qweasdzxcpoi/JavaFX/raw/master/jfxrt.jar)链接下载**jfxrt.jar**文件。

或者

如果您已经下载了最新的 oracle JAVA JDK，您将在此路径中找到

> Extracted_oracle_jdk_folder/jre/lib/ext/jfxrt.jar

就是这样，一切都应该正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:12:27.230

[在http://efxclipse.org/](http://efxclipse.org/)尝试 e(fx)clipse 。我是一名 netbeans 开发人员，但从我的 Eclipse 中使用朋友听到了很多关于该插件的好消息。

# javascript - JavaScript 超时触发 3 次而不是一次（clearTimeout 不起作用？）

> ID：14646860
> 
> 赞同：11
> 
> 时间：2013-02-01T12:58:58.980
> 
> 标签：javascript, jquery

我想在用户暂停输入时触发 ajax 操作（而不是在每次按键后）。所以我做了这样的事情：

当用户在空闲 3 秒后停止输入时，将执行功能完成......（它是 - 但为什么长短语要运行 3 次 - 我希望它只运行一次，因为我在每次按键后清除超时）。问题是什么 ？

```
var timer; 
var interval = 3000; 
$('#inp').keyup(function() {
  timer = setTimeout(done, interval); 
}); 

$('#inp').keydown(function() {
  clearTimeout(timer)  
}); 

function done() {
  console.log('ajax'); 
} 
```

关于 jsfiddle 的工作示例：http: [//jsfiddle.net/vtwVH/](http://jsfiddle.net/vtwVH/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T13:01:57.980

键入时，有时您可能会先按下另一个键，然后再松开第一个键。您可能不会注意到这一点，尤其是在您输入长短语时。在这种情况下，事件的顺序不是`down up down up`but `down down up up`，因此将设置两个超时。

在设置超时之前（在同一个事件处理程序中）清除超时更加一致。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T13:08:07.603

问题是您正在覆盖`timer`keydown 事件中的变量。

因此，如果您在 Timout 被清除之前按下另一个键，*例如继续按住一个键*

对 timeOut 的引用丢失，您无法再次清除它。

要解决此问题，您可以在`keyUp`事件中清除并设置计时器，例如

```
var timer; 
var interval = 3000; 

$('#inp').keyup(function(e){ 
    if(timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(done, interval); 

}); 

function done() {
    console.log('ajax'); 
} 
```

这是一个工作[小提琴](http://jsfiddle.net/XRKa2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:04:52.553

这些事件似乎没有遵循严格的顺序规则，第二个 keydown 比第一个 keyup 早，因此计时器被初始化多次。

试试这个模组：

```
$('#inp').keyup(function(){
  clearTimeout(timer);
  timer = setTimeout(done, interval); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:03:26.560

只要确保清除间隔：

```
var timer; 
var interval = 3000; 

$('#inp').keyup(function(){
  clearTimeout(timer)  
  timer = setTimeout(done, interval); 
}); 

$('#inp').keydown(function(){
  clearTimeout(timer)  
}); 

function done() {
  console.log('ajax'); 
} 
```

[JSFiddle](http://jsfiddle.net/vtwVH/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:11:04.120

除非用户输入速度真的很慢，否则`keydown`and`keyup`不会按照你想象的顺序出现。例如，您可以获取两个`keydown`事件，然后是两个`keyup`事件。如果你不处理，第二个`keyup`事件将启动另一个计时器并覆盖对第一个计时器的引用，这样它就不会被清除。

跟踪超时是否正在运行，`keyup`如果正在运行则将其清除：

```
var timer = null;
var interval = 3000; 
$('#inp').keyup(function(){
  if (timer != null) {
    window.clearTimeout(timer)  
  }
  timer = window.setTimeout(done, interval); 
}); 

$('#inp').keydown(function(){
  if (timer != null) {
    window.clearTimeout(timer);
    timer = null;
  }
}); 

function done() {
  timer = null;
  console.log('ajax'); 
} 
```

演示：http: [//jsfiddle.net/Guffa/vtwVH/3/](http://jsfiddle.net/Guffa/vtwVH/3/)

# ios - 打印捕获的屏幕截图 - 图像模糊

> ID：14646862
> 
> 赞同：0
> 
> 时间：2013-02-01T12:59:05.143
> 
> 标签：ios, objective-c, printing, contentmode

我有一些代码可以打印屏幕截图。问题是，默认操作不是“适合”图像，而是用图像“填充”纸张，这会导致拉伸。如果是 iphone 的打印屏幕（例如非视网膜），它看起来很糟糕。

我找不到属性或任何方法来打印图像而不拉伸它，有人可以帮忙吗？

```
// print
UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.outputType = UIPrintInfoOutputPhoto;
printInfo.jobName = [NSString stringWithFormat:@"something")];
pic.printInfo = printInfo;

UIPrintFormatter *printFormatter = [[UIPrintFormatter alloc] init];
[printFormatter setMaximumContentHeight:image.size.height];
[printFormatter setMaximumContentWidth:image.size.width];
pic.printFormatter = printFormatter;

pic.printingItem = image; //low-res image 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:11:52.217

您可能必须设置 contentInsets。使用 UIEdgeInsets UIEdgeInsetsMake ( CGFloat top, CGFloat left, CGFloat bottom, CGFloat right ); 设置 contentInsets 的函数。

# android - 如何检测 SD 卡或挂载点是否将挂载为可移动存储或 MTP？

> ID：14646863
> 
> 赞同：1
> 
> 时间：2013-02-01T12:59:12.727
> 
> 标签：android

当 android 手机通过 USB 电缆连接到计算机时，它可能会安装为可移动存储，但有些手机可能会将其安装为 mtp（媒体传输协议）有没有办法在 android 中检测到 sdcard 是否安装为可移动存储或 mtp ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:15:30.167

您可以使用

```
Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED); 
```

查看外部存储是否已安装并且您可以使用

```
Environment.getExternalStorageState().equals(Environment.MEDIA_REMOVED); 
```

看看它是否被完全删除。您将在 Environment 类中找到所需的所有不同案例。

# java - @ManyToOne，@OneToMany 删除错误

> ID：14646867
> 
> 赞同：0
> 
> 时间：2013-02-01T12:59:23.303
> 
> 标签：java, database, jpa, one-to-many, many-to-one

作者等级：

```
@Id
@GeneratedValue(
        strategy = GenerationType.AUTO)
private int id;
private String firstName;
private String lastName;
@OneToMany(
        mappedBy = "author")
private List<Book> bookList; 
```

书类：

```
@Id
@GeneratedValue(
        strategy = GenerationType.AUTO)
private int id;
private String name;
private String language;
private int isbn;
@ManyToOne
@JoinColumn(
        name = "author_fk")
private Author author; 
```

我想删除作者，但出现以下错误：“更新或删除表“作者”违反了表“书”上的外键约束“fk_book_author_fk””。如何删除作者？我想先删除作者，而不是书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:15:20.307

默认情况下，JPA 不会将操作从父实体级联到子实体。要启用此级联从`Author`down 到`Book`，请更改以下行：

```
@OneToMany(mappedBy = "author")
private List<Book> bookList; 
```

到：

```
@OneToMany(mappedBy = "author", cascade = CascadeType.ALL)
private List<Book> bookList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:02:42.567

作者和书在数据库中是相关的，并且它们具有删除属性，在您的情况下可以级联。您可以将其更改为“设置 Null”并执行删除。

# c# - LINQ 包含 Nullable guid 字段

> ID：14646871
> 
> 赞同：2
> 
> 时间：2013-02-01T12:59:45.470
> 
> 标签：c#, .net, mysql, linq

我想为“ *ids* ”数组中的每个*QuestionID选择最新的 DataItem 记录。*因为我不能在 LINQ 中使用**.Value**，所以我已将 id 转换为*Nullable*。但是我现在得到一个**“对象必须实现 IConvertible”**

 ******表：数据项

```
------------------------------------
ID                  |   Guid        |
DataItemTimeLocal   |   DateTime    |
QuestionID          |   Guid?       |
------------------------------------

Guid?[] ids = GetAllQuestions().Select(x => (Guid?)x.ID).ToArray();
var latestItems = (from di in DataObjects.DataItems
                       where di.QuestionID != null && ids.Contains(di.QuestionID)
                       group di by di.QuestionID into g
                       select g.OrderByDescending(x => x.DataItemTimeLocal).FirstOrDefault()
           ).ToDictionary(x => x.QuestionID, y => y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:10:52.097

```
Guid[] ids = GetAllQuestions().Select(x => x.ID).ToArray();

var latestItems = (from di in DataObjects.DataItems
                   where di.QuestionID.HasValue && 
                         ids.Contains(di.QuestionID.Value)
                   group di by di.QuestionID into g
                   select g.OrderByDescending(x => x.DataItemTimeLocal)
                           .FirstOrDefault()
                   ).ToDictionary(x => x.QuestionID, y => y); 
```******

# java - 编程设计效率

> ID：14646877
> 
> 赞同：0
> 
> 时间：2013-02-01T13:00:03.940
> 
> 标签：java, performance

我目前正在编写一段代码来处理我的应用程序的用户界面。该代码的目标是将文本的位置设置为其他两个点（使文本居中）。例如：

```
PointX 1 = 50;
PointX 2 = 150; 
```

此输入将产生文本的 X 值`100`。

我现在的问题是，每次刷新 UI 时都会执行这个简单的计算。这是允许的还是我应该创建一个存储 x 值的变量？

注意：我不使用变量方法的原因是，这会增加我的代码中的变量数量，我不是很喜欢，因为我试图让我的代码保持干净，尽可能简单和可维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:32:50.737

如果您想保持简单并减少记忆，我会保持您现在拥有的方式。我假设您正在找到两个值之间的平均值，这不是一个非常昂贵的操作。

# php - 重定向所有子域并使用 get 发送请求文件

> ID：14646884
> 
> 赞同：0
> 
> 时间：2013-02-01T13:00:12.507
> 
> 标签：php, .htaccess

我如何在**不更改 url的情况下重定向所有子域**

aslo使用**GET方法将****子域**和**请求文件**发送到 index.php 文件，例如使用 .htaccess

 **[http://testsubdomain.mysite.ir/test.php](http://testsubdomain.mysite.ir/test.php)

重定向到

[http://mysite.ir/users/index.php?domain=testsubdomain&file=test.php](http://mysite.ir/users/index.php?domain=testsubdomain&file=test.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:38:38.870

使用 mod_rewrite。例子：

```
RewriteEngine On
RewriteBase /testsubdomain/
RewriteRule ^(.*)\.php$  http://mysite.ir/users/index.php?domain=testsubdomain&file=$1.php 
```

详细信息：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)**

# c# - 在 enabled=false 时触发文本框的 OnTextChanged

> ID：14646890
> 
> 赞同：1
> 
> 时间：2013-02-01T13:00:42.370
> 
> 标签：c#, asp.net

我有一个 ajax 工具包日历扩展器附加到我的文本框，并且试图在将日期输入文本框后触发 OnTextChanged。

问题是我不希望用户手动输入数据，所以我禁用了文本框，但事件不会为禁用的文本框触发。

周围有吗？我想过更改为标签，但没有 OnTextChanged 事件。

谢谢

```
<asp:TableCell CssClass="cssWidth" Width="150px">
            <asp:CalendarExtender ID="CalendarExtender1" PopupButtonID="Image1" runat="server" TargetControlID="TextBoxAddDate" Format="dd/MM/yyyy"></asp:CalendarExtender>
            <asp:TextBox ID="TextBoxAddDate" ReadOnly="true"  CssClass="cssWidth" ToolTip="תאריך הוספה" runat="server" Style="font-size: large;background-color:aliceblue;" AutoPostBack="true" AutoCompleteType="Search" MaxLength="0" TextMode="SingleLine" OnTextChanged="txtSearch_TextChanged" ViewStateMode="Enabled" autocomplete="off" >      
            </asp:TextBox>&nbsp
            <asp:ImageButton runat="Server" ID="Image1"
   ImageUrl="~/Calendar_scheduleHS.png" AlternateText="Click to show calendar" /><br />

        </asp:TableCell> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:02:56.810

您可以使用 ReadOnly 代替 Enabled = false 吗？

**更新：** 好的，这是对我有用的完整解决方案：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript">
    function dateSelectionChanged(x) {
        debugger;
        javascript: __doPostBack('TextBoxAddDate', '')
    }
</script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <h2>
        Welcome to ASP.NET!
    </h2>
    <p>
        To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>
    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
            <asp:CalendarExtender ID="CalendarExtender1" PopupButtonID="Image1" runat="server" TargetControlID="TextBoxAddDate" Format="dd/MM/yyyy" OnClientDateSelectionChanged="dateSelectionChanged" ></asp:CalendarExtender>
            <asp:TextBox ID="TextBoxAddDate" CssClass="cssWidth" ToolTip="תאריך הוספה" runat="server" Style="font-size: large;background-color:aliceblue;" AutoCompleteType="Search" MaxLength="0" TextMode="SingleLine" OnTextChanged="txtSearch_TextChanged" ViewStateMode="Enabled"> 
            </asp:TextBox>&nbsp
            <asp:ImageButton runat="Server" ID="Image1"
   ImageUrl="~/Calendar_scheduleHS.png" AlternateText="Click to show calendar" /><br />
   </ContentTemplate>
        </asp:UpdatePanel>
</asp:Content> 
```

似乎`CalendarExtender`“窃取”了它使用的 texbox 中的事件。使用这种方法，我设法触发了`OnTextChanged`事件并`txtSearch_TextChanged`执行了处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:03:03.823

您是否将文本框设为只读？

# android - Android：在文本视图中添加缩放

> ID：14646892
> 
> 赞同：1
> 
> 时间：2013-02-01T13:00:53.010
> 
> 标签：android, textview

我在我的 xml 布局中定义了一个文本视图。但有时它包含很多文本，所以我想添加缩放，以便当用户点击时，它会缩放我的文本。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:05:24.453

缩放可能不是解决您的问题的正确词，您实际上想要**增加**文本大小并可能添加一些动画，使其看起来像缩放效果。

*   制作一个从 TextView 扩展的 customView
*   在这个 customView 上实现 touch/onclick
*   这些事件的 onCallback 会增加 fontsize

额外：您可以添加动画来为“缩放”设置动画

# android - ListView 中的上下文操作会在每次单击时强制适配器 getView

> ID：14646893
> 
> 赞同：2
> 
> 时间：2013-02-01T13:00:55.247
> 
> 标签：android, android-listview, android-adapter

我有一个 ListFragment（出于兼容性原因，我使用 android.support.v4.app.ListFragment）并且想要使用上下文操作模式。

因此我编码：

```
public class CustomListFragment extends ListFragment {
...
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        setListAdapter(new CustomListAdapter(getActivity().getApplicationContext(), TYPE));

        if(Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB){
             registerForContextMenu(getListView());
        } else {
            getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
            getListView().setMultiChoiceModeListener(new CustomMultiSpamItemChoiceModeListener());          
        }
   }
...
}

class CustomMultiSpamItemChoiceModeListener implements MultiChoiceModeListener{
    @Override
    public boolean onActionItemClicked(ActionMode arg0, MenuItem arg1) {
        return false;
    }
    @Override
    public boolean onCreateActionMode(ActionMode arg0, Menu arg1) {
        return false;
    }
    @Override
    public void onDestroyActionMode(ActionMode arg0) {
    }
    @Override
    public boolean onPrepareActionMode(ActionMode arg0, Menu arg1) {
        return false;
    }
    @Override
    public void onItemCheckedStateChanged(ActionMode arg0, int arg1,
            long arg2, boolean arg3) {
    }
}

public class CustomListAdapter extends BaseAdapter{
...
    @Override
    public View getView(int pos, View view, ViewGroup vg) {
    ...
    }
} 
```

问题是，只要我将 设置**`setChoiceMode`**为**`ListView.CHOICE_MODE_MULTIPLE_MODAL`**适配器方法**`getView(int pos, View view, ViewGroup vg)`** ，就会在每次单击（*短按单击*）的项目上调用`ListView`. 上下文动作模式甚至没有被激活。

这会在一个持久的项目按下动画中体现出来。通常，按下的项目的蓝色指示器会持续几毫秒，但在我的情况下，它大约是一秒钟，因为它需要一些时间来收集创建 ListItems 所需的所有信息。

这种行为是否符合预期？我不认为**`ListView.CHOICE_MODE_MULTIPLE_MODAL`**旗帜需要再次“重新启动”整体`ListItems`。

# javascript - 在 HTML (SVG) 元素中包含 data/datakey

> ID：14646897
> 
> 赞同：0
> 
> 时间：2013-02-01T13:01:07.340
> 
> 标签：javascript, html

在我后面的代码中，我使用常量 String 和 String.Format 来创建一系列 svg 元素，如下所示：

```
const string BoxTemplate = "<rect x=\"{0}\" y=\"{1}\" height=\"{2}\" width=\"{3}\" fill=\"{4}\" stroke=\"#707070\" onmouseover=\"showToolTip()\"/>";
string s = String.Format(BoxTemplate, x, y, h, w, color); 
```

然后我使用文字控件来渲染图像。

我想在元素中包含数据或至少一个数据键，以供鼠标悬停或使用其他事件。我考虑过将 id 设置为 datakey，但在某些情况下，不止一个图像会引用相同的数据。

什么是让我的 javascript 函数识别“鼠标悬停”的元素并访问其数据/数据键的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:22:04.657

您可以将`this`用作函数的参数。如果您在渲染时有附加参数，您还可以添加一个附加参数。

这对我有用：

```
<html>

    <script>
        function showToolTip(obj, datakey) {
            alert("ID=" + obj.id + " datakey=" + datakey);
        }
    </script>
    <body>
        <svg>
            <rect id="The_ID" x="10" y="10" height="100" width="100" fill="black" stroke="#707070" onmouseover="showToolTip(this, 'datakey1')"/>
        </svg>
        <svg>
            <rect id="The_other_ID" x="110" y="10" height="100" width="100" fill="black" stroke="#707070" onmouseover="showToolTip(this, 'datakey2')"/>
        </svg>
    </body>
</html> 
```

# mysql - IF Else 在存储过程中不起作用

> ID：14646898
> 
> 赞同：2
> 
> 时间：2013-02-01T13:01:09.387
> 
> 标签：mysql, sql, stored-procedures

```
CREATE PROCEDURE p1 
(
    IN name_val VARCHAR(255),
    OUT iJobID  INT
)

BEGIN

    IF NOT EXISTS (SELECT id FROM test WHERE id='11')

        BEGIN

            INSERT INTO test(name) VALUES(name_val);
            SET iJobID :=  LAST_INSERT_ID();
        END

    ELSE
        BEGIN

             UPDATE test SET name=name_val WHERE id = 11; 
        END 

    INSERT INTO vasu2(vname) VALUES(name_val);
    SET @ivD :=  LAST_INSERT_ID();

    INSERT INTO vasu(id, id2) VALUES(iJobID, @ivD); 
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:14:05.583

`IF`您使用的语法最有可能用于`T-SQL`. 此外，您需要更改`delimiter`.

```
DELIMITER $$
CREATE PROCEDURE p1 
(
    IN name_val VARCHAR(255),
    OUT iJobID  INT
)
BEGIN

    SET @recCount := (SELECT COUNT(*) FROM test WHERE id = 11);
    IF @recCount > 0 THEN
        INSERT INTO test(name) VALUES(name_val);
        SET iJobID :=  LAST_INSERT_ID();
    ELSE
        UPDATE test SET name=name_val WHERE id = 11; 
    END IF;

    INSERT INTO vasu2(vname) VALUES(name_val);
    SET @ivD :=  LAST_INSERT_ID();

    INSERT INTO vasu(id, id2) VALUES(iJobID, @ivD); 
END $$
DELIMITER ; 
```

*   [使用存储过程](http://www.brainbell.com/tutorials/MySQL/Using_Stored_Procedures.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:14:37.943

您忘记了：，，`delimiter`希望 对您有所帮助`then``end if`

```
delimiter $$

CREATE PROCEDURE test.p1 
(
    IN name_val VARCHAR(255),
    OUT iJobID  INT
)
BEGIN
    IF NOT EXISTS (SELECT id FROM test WHERE id='11') THEN
            INSERT INTO test(name) VALUES(name_val);
            SET iJobID :=  LAST_INSERT_ID();
    ELSE
             UPDATE test SET name=name_val WHERE id = 11; 
    END IF;
    INSERT INTO vasu2(vname) VALUES(name_val);
    SET @ivD :=  LAST_INSERT_ID();
    INSERT INTO vasu(id, id2) VALUES(iJobID, @ivD); 
END
$$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:16:15.937

我认为 IF not exists 在 mysql 中不存在然后

# android - 如何获取电子邮件\gmail 数据以进行活动？

> ID：14646900
> 
> 赞同：0
> 
> 时间：2013-02-01T13:01:14.923
> 
> 标签：android, android-intent, permissions, gmail, whatsapp

如何通过选择从电子邮件中获取邮件好友？我在 stackoverflaw 发现了一些 sulition，但是当我最终发现一些可能有用的东西时，我发现了许可错误，正如我从这里的用户那里了解到的那样，它被谷歌阻止了。

真的被封锁了吗？

(java.lang.SecurityException: Permission Denial: 从 ProcessRecord{4284e9f0 15683:com.example.buylist/10158} (pid=15683, uid=10158) 打开提供程序 com.google.android.gm.provider.MailProvider 需要 com.google .android.gm.permission.READ_GMAIL 或 com.google.android.gm.permission.WRITE_GMAIL）-> 这是错误。我按照我的要求添加了许可，但它仍然无法正常工作。

如果是这样，你能给我打开 gmail imbox（gmail 内置应用程序）的简单互联网吗？

在相关问题中，我确实从短信中获取了数据，但我可以用 whatsup 来做吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:17:06.550

> 你能给我打开gmail imbox（gmail内置应用程序）的简单互联网吗？

不，因为[不再允许这样做](http://commonsware.com/blog/2011/08/08/gmail-gone-risk-undocumented-apis.html)。一开始只有傻瓜才会这样做，因为它不是操作系统的一部分，没有文档记录，也不受支持。

# jquery - jquery 只能在 x 秒后点击 iframe

> ID：14646905
> 
> 赞同：0
> 
> 时间：2013-02-01T13:01:31.990
> 
> 标签：jquery, iframe

```
<iframe src="www.google.com" id="iFrame" ></iframe> 
```

现在我希望用户能够在 10 秒后单击此框架或此框架中的任何内容

加号是可能的，因此在 2 秒后，例如在用户单击框架以更改框架高度之后

```
<script>$("#button2").click(function(){
  $("#frameID").animate({
    height: "720px"
  }, 1500 ); // how long the animation should be
});

</script> 
```

我这个脚本只在他们点击框架后 2 秒后运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:13:10.317

这是一个非常奇怪的用例，但这是解决您的问题的一部分：

在 iframe 上使用 CSS 覆盖元素`opacity: 0`以防止其获得点击。10 秒后移除该元素。

如果 iframe 不在同一个域下，我认为它不是 - 你指向 google.com，你不能在 iframe 内收听事件`contentDocument`。iframe 需要与父文档在同一个域下，或者您需要它发送`window.postMessage`带有其内部状态的事件，以便您可以更改 iframe 的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:19:25.323

首先禁用 iframe：

```
window.onload = function () {
    var iframes = document.getElementsByTagName('iframe');
        var iframe = iframes[0],
            d = document.createElement('div');
        d.style.width = iframe.offsetWidth + 'px';
        d.style.height = iframe.offsetHeight + 'px';
        d.style.top = iframe.offsetTop + 'px';
        d.style.left = iframe.offsetLeft + 'px';
        d.style.position = 'absolute';
        d.style.opacity = '0';
        d.style.filter = 'alpha(opacity=0)';
        d.style.background = 'black';
        d.setAttribute("id", "blockDiv");
        iframe.offsetParent.appendChild(d);
}; 
```

然后10秒后取出

```
setTimeout(function() {
    $('#blockDiv').remove();
}, 10000); 
```

**“加号是可能的，例如在用户单击框架以更改框架高度后 2 秒后”**

在您的示例中这是不可能的。您可以做的是在用户将鼠标移到 iframe 上时更改宽度。

# android - 以编程方式在 Android 手机上启动手机内部设置对话框

> ID：14646907
> 
> 赞同：0
> 
> 时间：2013-02-01T13:01:34.140
> 
> 标签：android, android-scripting, dual-sim

我有一部飞利浦 w626 双卡安卓 2.3.5 手机。

当我手动打开数据连接时，会出现 SIM 选择对话框，我必须选择打开数据的卡。我想以编程方式启动这个对话框，例如当我启动需要数据连接的应用程序时使用一些 Tasker 插件。

手机已经root了，可以用adb shell，logcat，

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:14:42.113

使用以下代码段

```
 int adb = Settings.Secure.getInt(context.getContentResolver(),
  Settings.Secure.ADB_ENABLED, 0);
 // toggle the USB debugging setting
 adb = adb == 0 ? 1 : 0;
 Settings.Secure.putInt(context.getContentResolver(), 
Settings.Secure.ADB_ENABLED, adb); 
```

添加这些权限

```
 <uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission>

<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"></uses-permission> 
```

如需进一步帮助，请查看以下[链接](http://code.google.com/p/secure-settings-widget/source/browse/src/com/lieryan/adbwidget/ADBAppWidgetProvider.java?r=eb23b2d6989ccade05f095806db5888f1ba62737)

# ruby-on-rails - 无法使用 ruby xmpp4r 获取以前的群聊历史记录

> ID：14646908
> 
> 赞同：7
> 
> 时间：2013-02-01T13:01:35.510
> 
> 标签：ruby-on-rails, ruby, xmpp, openfire, xmpp4r

我正在使用 ruby​​ xmpp4r 库通过 openfire 服务器实现多用户群聊应用程序。我已经成功在 openfire 服务器上创建了聊天室。如果用户使用 openfire 凭据加入聊天室，它不会返回以前的群聊历史记录，它只返回我正在使用的`add_message_callback()`方法的几条消息。

以下是 openfire 群聊历史设置：
** 显示整个聊天历史（向加入房间的用户显示整个聊天历史。）-- True

我在这里想念什么？有人有示例代码来获取以前的组历史吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:30:14.443

我运行了一个 Wildfire 服务器（openfire 的继任者），这个设置似乎是服务器端的。在野火管理控制台上，它在群聊 > 历史设置下控制。它有以下选项：

不显示历史 - 不向加入房间的用户显示聊天历史。

显示整个聊天历史 - 向加入房间的用户显示整个聊天历史。

显示特定数量的消息 - 在聊天中显示特定数量的最新消息。使用下面的框指定该数字。

# java - 无法初始化 com.avaje.ebean.Ebean 类？

> ID：14646910
> 
> 赞同：0
> 
> 时间：2013-02-01T13:01:52.057
> 
> 标签：java, html, wicket, ebean

我有一个检票口应用程序，我正在使用 Ebean ORM 映射。我已经在 ebean.properties 中设置了所有凭据。但是当我在服务器上部署它时，我收到一条错误消息“无法初始化类 com.avaje.ebean.Ebean”，它给出的错误如下

```
Last cause: Could not initialize class com.avaje.ebean.Ebean
WicketMessage: Can't instantiate page using constructor 'public com.zipgrocery.pages.HomePageNew(org.apache.wicket.request.mapper.parameter.PageParameters)' and argument ''. Might be it doesn't exist, may be it is not visible (public).

Stacktrace

Root cause:

java.lang.NoClassDefFoundError: Could not initialize class com.avaje.ebean.Ebean
     at com.zipgrocery.data.Merchant.getMerchantsByZone(Merchant.java:374)
     at com.zipgrocery.pages.HomePageNew.<init>(HomePageNew.java:77)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:173)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:77)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)
     at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:103)
     at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:264)
     at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
     at org.apache.wicket.request.handler.render.PageRenderer.getPage(PageRenderer.java:78)
     at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:105)
     at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:224)
     at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:167)
     at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
     at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
     at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
     at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
     at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
     at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
     at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
     at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:311)
     at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
     at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
     at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
     at java.lang.Thread.run(Thread.java:619)

Complete stack:

org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor 'public com.zipgrocery.pages.HomePageNew(org.apache.wicket.request.mapper.parameter.PageParameters)' and argument ''. Might be it doesn't exist, may be it is not visible (public).
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:196)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:77)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)
     at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:103)
     at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:264)
     at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
     at org.apache.wicket.request.handler.render.PageRenderer.getPage(PageRenderer.java:78)
     at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:105)
     at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:224)
     at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:167)
     at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
     at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
     at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
     at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
     at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
     at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)

java.lang.reflect.InvocationTargetException
     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:173)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:77)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)
     at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:103)
     at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:264)
     at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
     at org.apache.wicket.request.handler.render.PageRenderer.getPage(PageRenderer.java:78)
     at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:105)
     at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:224)
     at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:167)
     at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
     at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
     at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
     at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
     at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
     at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188) 
```

但是当我将它部署在我的本地主机上时它工作正常。我试图找到解决方案，但没有得到。所以帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:13:54.980

我对“Ebean ORM”这个家伙不熟悉，但是错误跟踪非常通用，似乎与“Ebean ORM”本身没有任何关系。根据我过去的经验，它更像是一个类加载器问题。你说它在本地运行良好，然后？哪里坏了？当您遇到诸如“NoClassDefFoundError”之类的问题时，请始终检查正在使用的类加载器。此外，值得检查您的损坏环境是否有多个版本的类/jar，以及服务器是否具有此类/jar 的嵌入式版本。

# iphone - UITableView 部分出现不同单元格颜色的问题

> ID：14646913
> 
> 赞同：0
> 
> 时间：2013-02-01T13:02:02.697
> 
> 标签：iphone, ios, xcode, uitableview

我是 iPhone 开发的新手。我有一个包含多个部分的表格视图。我正在改变这样的单元格的颜色，它工作正常。

```
if ([indexpath row]%2)
{
    trackCell.contentView.backgroundColor = [UIColor clearColor];
}
else
{
    trackCell.contentView.backgroundColor = [UIColor colorWithRed:212/255.0 green:212/255.0 blue:212/255.0 alpha:0.1];
} 
```

但是现在一个部分的最后一个单元格与下一个部分的第一个单元格具有相同的颜色。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:31:12.300

这很脏，但是您可以计算当前单元格之前的所有单元格，然后使用该计数来计算所需的颜色。这是未经测试的，但应该这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int cellCount = 0;
    for (int i=0;i<indexPath.section-1;i++)
    {
        cellCount+=[self numberOfRowsInSection:i]
    }

   cellCount+=indexPath.row;

   if(cellCount%2==0)
   {
    //set one color
   }
   else
   {
    //set other color 
   }
   // blah
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:08:02.267

问题是，如果单元格在第 1 节（或 2、3、...）中，并且前一节有奇数个单元格，则它以与前一个单元格的最后一个单元格相同的颜色结束。

因此，您需要检查上一节的单元格数，如果该数字是奇数，请反转您的“if”语句，如果它是偶数则保持原样

**编辑：**

```
int toBeAdded = 0;
if (indexPath.section>0) {
    toBeAdded = ([self tableView:tableView numberOfRowsInSection:(indexPath.section -1)]) %2 ;
}

if (([indexpath row]+toBeAdded)%2) {
    trackCell.contentView.backgroundColor = [UIColor clearColor];
} else {
    trackCell.contentView.backgroundColor = [UIColor colorWithRed:212/255.0 green:212/255.0 blue:212/255.0 alpha:0.1];
} 
```

**编辑2：**

看到“Will Jenkins”...他是对的...您需要查看所有前面的部分，而不仅仅是前一个...

他计算一个部分中所有单元格的方法不如我的好和快，但他的答案是正确的，+1 对他来说......无论如何，最好的方法可能是将他的循环和我对 tableView 的调用结合起来： tableView numberOfRowsInSection：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:10:37.893

这是由于您在每个部分**中的行数...**

假设您尝试为奇数行提供红色，为**偶数行****提供**绿色，**并且****第一节**有3 行，那么最后一个单元格将具有红色，第二节的第一个单元格也具有红色。

 ******因此，您只需要检查**Previous Section 中的行数**。如果是**偶数**，则应**保持颜色顺序**，否则只需**更改该**部分的颜色顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:09:26.727

关于部分更改颜色，需要编写自己的逻辑，例如，

需要使用静态 int 值而不考虑部分，并使用已经使用的代码并将 indexpath.row 替换为您的值。IE

静态 int 索引；

```
 if ( Index % 2)
   {
     trackCell.contentView.backgroundColor = [UIColor clearColor];
   } else  {
trackCell.contentView.backgroundColor = [UIColor colorWithRed:212/255.0 green:212/255.0 blue:212/255.0 alpha:0.1];
   }
 Index++; 
```******

# silverlight-4.0 - 如何在 WCF Ria 服务中同时调用我的 DomainService 的两个方法

> ID：14646914
> 
> 赞同：0
> 
> 时间：2013-02-01T13:02:05.897
> 
> 标签：silverlight-4.0

我正在使用 silverlight 4.0 WCF Ria 服务，我想同时调用我的 DomainService 的两个方法。

在我的 GUI 中，我有两个按钮：第一个调用 method1，它需要很长时间才能完成处理（处理中有一个迭代，并且有一个计数器变量）。第二个调用方法2，该方法返回一个指示第一次治疗进展的计数器值。

当我调用method1然后method2我只有在method1完成时才能获得method2的结果

但是每当我点击按钮2时，我都想跟踪治疗的进展

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:03:39.723

如果我理解错误的问题，请纠正我。*当您单击按钮 1 时，我将使用相同的“完成事件”*调用 Method1 和 Method2，这将等待这两个方法完成。另一方面，当单击按钮 2 时，您只需要调用方法 2，**不同** *的 on complete event*，这样，方法 1 永远不会被调用，您将直接获得进度指示器。

# php - php按数组键排序

> ID：14646916
> 
> 赞同：0
> 
> 时间：2013-02-01T13:02:16.150
> 
> 标签：php, sorting

这方面有很多主题，但没有一个是我需要的。我有一个包含 fname、lname 等的数组。我需要使用以下代码按 lname 排序：

```
if ($myvar)

   foreach( $myvar as $key => $row) {

     echo "<p>$row->fname $row->lname";
     echo "$row->intro</p>";

     sort($row->lname);

    } else 

  echo "<p>No Results for your search.</p>"; 
```

您可以看到我进行了排序，我也尝试了 ksort 但没有任何反应。我从这个论坛尝试了其他一些东西，但没有运气。顺序错了吗？语法不正确吗？

我对此的了解有限，我认为这样做会更容易！:) 如果可以，请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:08:50.883

```
usort($myvar, function($a,$b) {return strcmp($a->lname, $b->lname);}); 
```

但是，正如评论中所说，如果这是通过数据库或搜索引擎进行搜索，那么最好让它们对您的东西进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:22:12.180

在您的代码中，您似乎有一个数组数组。如果您只有一个数组，则不需要在 foreach 中使用排序。排序 - 对数组进行排序，所以直接像这样使用它：

```
if ($myvar) {
   uasort($myvar, function($a,$b) {return strcmp($a->lname, $b->lname);}));
}else{
    echo "<p>No Results for your search.</p>";
} 
```

# php - CSV 下载到 Chrome - 错误：MIME 类型文本/csv

> ID：14646917
> 
> 赞同：16
> 
> 时间：2013-02-01T13:02:16.487
> 
> 标签：php, google-chrome, csv, mime-types

我正在使用 jQuery 来识别单击按钮，然后触发对文件的调用：

```
window.location.href = "url"; 
```

该文件查询数据库，返回结果，然后将其写入 CSV 文件。我设置了以下标题：

```
header('Content-Type: text/csv;');
header('Content-Disposition: attachment; filename=data.csv'); 
```

这适用于除 Chrome 之外的所有浏览器，它在控制台日志中返回以下错误“资源解释为文档但使用 MIME 类型文本/csv 传输：“url””。

奇怪的是，如果我直接调用该文件，它可以在所有浏览器中使用。

代码：

```
 $fp = fopen('php://output', 'w');

                header('Content-Type: text/csv;');
                header('Content-Disposition: attachment; filename=data.csv');
                header("Expires: 0");
                header("Cache-control: private");

                //Field Headers
                $ncols = oci_num_fields($stid);
                $headers_row = array();
                for ($i = 1; $i <= $ncols; ++$i) {

                    $headers_row[] = oci_field_name($stid, $i); 

                }

                while ($row = oci_fetch_array($stid, OCI_NUM+OCI_RETURN_NULLS)) {

                    if(!empty($row)){
                        if(!empty($headers_row)){
                            fputcsv($fp, $headers_row);
                            $headers_row = '';
                        }

                        fputcsv($fp, $row);
                    }

                }

                fclose($fp);                    
                oci_close($conn); 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-24T15:39:03.533

```
try {
    $conn = new PDO("mysql:host=$servername;dbname=db_1", $username, $password);
    //set the PDO error mode to exception
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    //echo "Connected successfully"; 
    }
catch(PDOException $e)
    {
      echo "Connection failed: " . $e->getMessage();
    }

$query = $conn->prepare("SELECT * FROM csv_filds order by id asc");
$query->execute();
$data = "";
 while($row=$query->fetch(PDO::FETCH_BOTH)){ 
  $data .= $row['id'].",".$row['Name'].",".$row['father_name'].",".$row['address']."\n";
}
header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename="csvfile.csv"');
echo $data; exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:19:21.420

header("内容类型：应用程序/强制下载");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:22:27.060

header("过期时间：0");

header("缓存控制：私有");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T12:41:00.473

尝试生成文件的 readfile() 并添加标题“content-length”。如果它有效，那么您可能必须先写入文件，然后再进行输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-14T07:30:22.303

尝试应用程序内容类型

> header("content-type: application/octet-stream");

也是用户公共访问，因此用户可以下载

> header("Pragma: public");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-20T14:36:11.070

我遇到了同样的问题，但 chrome 将其显示为警告而不是错误。我设法通过将标题更改为`'Content-Type', 'text/plain'`. 很烦人的是，这个问题在手术后 6 年左右仍然存在。

# php - 获取特定设备信息

> ID：14646918
> 
> 赞同：6
> 
> 时间：2013-02-01T13:02:18.193
> 
> 标签：php

仅使用 PHP，是否可以检测页面是否正在从特定设备加载？说，如果只有我的 iPhone 正在加载页面，我希望页面做出不同的反应，没有其他人的？

到目前为止，我唯一的解决方案是将 $_SERVER['REMOTE_PORT' 与 $_SERVER['HTTP_USER_AGENT'] 结合使用来验证 iPhone，但这并不能确保**特定**的iPhone..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T19:45:55.467

这里有一个非常简单的使用 Mobile-detect 的解决方案：[https ://github.com/serbanghita/Mobile-Detect/](https://github.com/serbanghita/Mobile-Detect/)

享受！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T13:08:11.503

[$_SERVER['HTTP_USER_AGENT']](http://php.net/manual/en/reserved.variables.server.php)包含有关浏览器和所用设备的信息。因此，如果您知道用户代理 - 由您的设备发送 - 那么您可以很容易地编写一个 if 语句，这将查看它是否是您想要的。

但是，通常您并不想手动瞄准设备，尤其是涉及到手机时。考虑使用类似[wurfl](http://wurfl.sourceforge.net/php_index.php)的东西，这是一个允许您确定加载网页的设备类型的类。

如果您想针对特定的 iPhone，您很可能希望将其用户代理与其他型号的用户代理进行比较。但据我所知 - 这是一种非常有缺陷的方法，并且不能长期有效。这么长的回答简短：没有办法针对一个特定的 iPhone 型号（因为如果它们都拥有相同的 iOS 和相同的浏览器，它们中的任何一个都会向服务器发送大致相同的数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:05:20.633

仅当该设备发送此类信息时。

您可以使用 cookie - 有一个需要*您*登录的设置页面，然后将 cookie 发送到设备。从那时起，您的设备将把 cookie 发送到其他页面，而无需再次登录。

默认情况下，设备不会发送序列号或任何其他专门识别设备的方式，可能是因为这会违反一些隐私规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:10:01.440

通过使用[Mobile_Detect](http://code.google.com/p/php-mobile-detect/) PHP 类，您可以检测您的移动设备。它使用用户代理字符串结合特定的 HTTP 标头来检测移动环境。

# ios - 旋转时保持一个视图方向

> ID：14646924
> 
> 赞同：0
> 
> 时间：2013-02-01T13:02:36.027
> 
> 标签：ios, ios6, uinavigationcontroller, rotation

我有两个视图控制器的应用程序。

第一个视图控制器包含两个子视图：一个会保持它的方向；第二 - 将被旋转（如 iOS 相机应用程序中的相机图层和控件）。第二个——应该支持所有方向。我找到了一个解决方案：通过处理 UIDeviceOrientationDidChangeNotification 将第一个视图控制器保持在纵向模式并手动旋转子视图。问题出在 iOS 6.0 中。我尝试为 UINavigationController 添加类别，但似乎轮换规则是全局的。

附上示例代码 [https://dl.dropbox.com/u/2167984/temporary/rotationSample.zip](https://dl.dropbox.com/u/2167984/temporary/rotationSample.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:42:05.767

我已经解决了这个问题：刚刚将第一个视图控制器移出导航控制器并将第二个视图控制器显示为模态。

# cordova - Phonegap - 在页面之间传递 JS 数据

> ID：14646947
> 
> 赞同：5
> 
> 时间：2013-02-01T13:03:48.463
> 
> 标签：cordova, jquery-mobile

我有一个关于从一个 JQM / Phonegap 应用程序的页面之间传递数据的问题。

如果我有一个 JS 对象，其中包含一些数据，例如：搜索词、位置和其他一些过滤器值，例如，用户从搜索页​​面跳转到设置页面并再次返回到搜索页面......怎么能我保存了信息，我在预览页面中有什么？是否有类似 cookie 的东西，或者我是否应该使用 sqlite 来保存信息并在每次用户进入搜索页面时阅读它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T13:50:04.973

我会使用[LocalStorage](http://www.w3schools.com/html/html5_webstorage.asp)，使用起来非常简单。它允许您存储纯文本：

```
// Writing 'something' in localStorage.myvariable
localStorage.myvariable = 'something'

// Displaying the previous variable
console.log(localStorage.myvariable) 
```

如果纯文本还不够，并且您需要存储数据结构，您可以实现以下内容：

```
Storage.prototype.setObject = function(key, value) { this.setItem(key, JSON.stringify(value)); }
Storage.prototype.getObject = function(key) { var value = this.getItem(key);return value && JSON.parse(value); }

// Storing a JSON object
localStorage.setObject('myObject', {key1: 'value', key2: 'value2'});

// Accessing the object
localStorage.getObject('myObject') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-24T21:49:58.510

我使用了这种标签方法（现在是 2014 年），因为我只有 1 或 2 项要通过。你可以通过#标签传递它，然后用JS将结果拆分成数组......例如：

来自 URL：index.html#var1?var2

已解决页面：

```
var str = str.window.location.hash.substr(1);
var res = str.split("?");
alert(res[0]+","+res[1]); 
```

希望对某人有所帮助。LocalStorage 和其他选项对于这种类型的提升 IMO 来说太重了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:37:49.870

我认为一种可能的方法是使用查询字符串在页面之间来回发送数据，您可以将它们附加到页面 url。像newpage.html?val=12，如果你需要传递的数据量不多，这个方法更好，比sqlite轻得多。您还可以使用 localstorage，它是键值对（与关系型 sqlite 不同）。它比 sqlite 更容易实现（虽然它不是持久的）。

此外，如果您真的需要多个 html 页面，您可能需要重新考虑，jquery mobile 和 sencha touch 等框架可以很好地使用一个带有多个 div 的 html 页面作为您的应用程序的屏幕。所以你也可以试一试。

# c# - c#搜索结果没有文件扩展名

> ID：14646948
> 
> 赞同：1
> 
> 时间：2013-02-01T13:03:50.803
> 
> 标签：c#, winforms, search

我需要在列表框中显示的搜索结果中隐藏文件扩展名（.jpg、.exe）。有人可以帮我弄这个吗？这是我的代码。我有文本框、按钮和列表框。

button1 代码：此代码在指定路径上搜索我的文本框上的单词并将其显示在 listbox1 上：

```
private void button1_Click(object sender, EventArgs e)
{
    x = 0;
    var path = "C:\\Users\\john\\Desktop\\FLASH\\SEARCH";
    listBox1.DataSource = Directory.GetFiles(path, "*" + textBox1.Text + "*")
        .Select(f => Path.GetFileName(f)).ToList();
} 
```

listbox1 代码：此代码在单击时运行搜索结果：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    var fileName = listBox1.SelectedItem as string;
    if (fileName != null)
    {
        var path = Path.Combine("C:\\Users\\thesis\\Desktop\\THESIS\\FLASH\\SEARCH", fileName);

        if (x != 0)
        {
            Process.Start(path);
        } 
    }
    x += 1;
} 
```

使用此代码，我的输出如下所示：“result.exe”“result.jpg”。我需要的输出是这样的：“结果”，“输出”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T13:05:24.547

采用[`GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

```
private void button1_Click(object sender, EventArgs e)
        {
            x = 0;
            var path = "C:\\Users\\john\\Desktop\\FLASH\\SEARCH";
            listBox1.DataSource = Directory.GetFiles(path, "*" + textBox1.Text + "*")
                               .Select(f => Path.GetFileNameWithoutExtension(f))
                               .ToList();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:05:30.687

采用

```
Path.GetFileNameWithoutExtension(filePath) 
```

检索没有扩展名的文件名。您的查询将如下所示：

```
listBox1.DataSource = Directory.GetFiles(path, "*" + textBox1.Text + "*")
                               .Select(f => Path.GetFileNameWithoutExtension(f))
                               .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:09:56.230

这应该工作

```
 var liist = Directory.GetFiles(path, "*" + textBox1.Text + "*")
                         .Select(Path.GetFileNameWithoutExtension).ToList(); 
```

# python - csv 和其他扩展的 HttpResponse 内容类型在 Firefox 中不起作用，但在 Chrome 和 IE 中起作用

> ID：14646952
> 
> 赞同：0
> 
> 时间：2013-02-01T13:04:22.387
> 
> 标签：python, django, content-type, httpresponse

我正在使用 PYTHON+DJANGO 来实现文件共享系统。当用户尝试下载文件时，它在 Chrome 和 IE 中运行良好，但在 Firefox 中运行良好，如果 Firefox 无法识别扩展名（例如 .pl 和 .csv），则返回部分文件名并且不返回扩展名

看法

```
filename = os.path.join(MEDIA_ROOT, entry.myfile.url)
wrapper = FileWrapper(file(filename,'rb'))
response = HttpResponse(wrapper, content_type='application/octet-stream')
response['Content-Length'] = os.path.getsize(filename)
response['Content-Disposition'] = "attachment; filename=" + entry.name 
```

我尝试了 content_type=mimetypes.guess_type(filename) 但这并没有解决问题我还尝试用句点替换文件名中的任何空格，这确实有效！但我确信有一个干净的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T14:32:29.773

回答一个老问题，我知道，但实际问题是您没有用双引号将文件名括起来（它必须是双引号，而不是单引号）。IE 和 Chrome 会读取到行尾，但 Firefox 会读取到第一个空格并停止。

因此，只需更改`response['Content-Disposition'] = "attachment; filename=" + entry.name`为即可`response['Content-Disposition'] = 'attachment; filename="%s"'%(entry.name)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:25:21.620

基于`django.views.static`：

```
import mimetypes
import os
import stat
from django.http import HttpResponse

statobj = os.stat(fullpath)
mimetype, encoding = mimetypes.guess_type(fullpath)
mimetype = mimetype or 'application/octet-stream'

with open(fullpath, 'rb') as f:
    response = HttpResponse(f.read(), mimetype=mimetype)

if stat.S_ISREG(statobj.st_mode):
    response["Content-Length"] = statobj.st_size
if encoding:
    response["Content-Encoding"] = encoding
response['Content-Disposition'] = 'inline; filename=%s'%os.path.basename(fullpath)
return response 
```

# angularjs - 使用 ESC 键清除 Angular / AngularUI 中的输入文本字段

> ID：14646954
> 
> 赞同：25
> 
> 时间：2013-02-01T13:04:26.660
> 
> 标签：angularjs, input, angular-ui

在我的 Angular 应用程序的几个地方，我需要使用 ESC 键清除用户的输入。问题是，我不知道如何使用文本输入字段（textarea 清除 OK）。看到这个小提琴：

[jsFiddle演示问题](http://jsfiddle.net/aGpNf/188/)

捆绑：

```
<input ng-model="search.query" ui-keypress="{esc: 'keyCallback($event)'}" /> 
```

我使用的回调：

```
$scope.keyCallback = function($event) {
  $event.preventDefault();
  $scope.search.query = '';
} 
```

任何人都可以，请弄清楚**我需要做什么才能使用 ESC 键清除文本输入**？

**解决方案：** 根据[bmleite](https://stackoverflow.com/users/651480/bmleite)的建议，您不应该听 'keypress' 而是听**'keydown'**和**'keyup'**。问题是，'keydown' 在 Firefox 中不起作用，所以只有 'keyup' 在监听 ESC 时起到了神奇的作用。;)

工作小提琴：http: [//jsfiddle.net/aGpNf/190/](http://jsfiddle.net/aGpNf/190/)

**解决方案更新：** 最后我不得不同时监听“keydown”和“keyup”事件。因为在我的情况下，FF 确实将 ESC keydown 上的输入字段重置为以前的状态，所以它弄乱了我的模型。因此，'keyup' 清除模型，'keydown' 检查模型是否为空并执行适当的操作。我还需要手动散焦输入以防止文本重新弹出。：/

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-11-20T16:11:46.010

接受的答案[不适](https://github.com/angular/angular.js/issues/7297)用于 IE 10/11。这是[基于另一个问题](https://stackoverflow.com/questions/17470790/how-to-use-a-keypress-event-in-angularjs)的解决方案：

**指示**

```
.directive('escKey', function () {
  return function (scope, element, attrs) {
    element.bind('keydown keypress', function (event) {
      if(event.which === 27) { // 27 = esc key
        scope.$apply(function (){
          scope.$eval(attrs.escKey);
        });

        event.preventDefault();
      }
    });
    scope.$on('$destroy', function() {
        element.unbind('keydown keypress')
    })
  };
}) 
```

**HTML：**

```
<input ... ng-model="filter.abc" esc-key="resetFilter()" > 
```

**Ctrl**

```
$scope.resetFilter = function() {
  $scope.filter.abc = null;
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-24T01:41:10.793

我这样解决这个问题（Controller as vm Syntax）：

**HTML**

```
<input ... ng-model="vm.item" ng-keyup="vm.checkEvents($event)"> 
```

**控制器**

```
...
vm.checkEvents = function ($event) {
    if ($event.keyCode == 27) {
        vm.item = "";   
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-01T13:59:11.337

监听“keydown”或“keyup”事件而不是“keypress”：

```
<input ng-model="search.query" ui-keydown="{esc: 'keyCallback($event)'}" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-21T13:08:41.613

目前，使用 Angular v4，这有效：`(keyup.esc)="callback()"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-07T00:29:24.710

我已经设法`directive`直接建立一个输入元素的清除`ng-model`并且在`Firefox`. 为此，我需要检查该值是否已被清除（`modelGetter(scope)`）并将分配包装到零`$timeout`方法（以在下一次摘要调用中应用它）。

```
mod.directive('escClear', ['$timeout', '$parse', function($timeout, $parse) {
  return {
    link : function(scope, element, attributes, ctrl) {
      var modelGetter = $parse(attributes.ngModel);
      element.bind('keydown', function(e) {
        if (e.keyCode === $.ui.keyCode.ESCAPE && modelGetter(scope)) {
          $timeout(function() {
            scope.$apply(function () {modelGetter.assign(scope, '');});
          }, 0);
        }
      });
    }
  };
}]); 
```

我的`$`财产是`jQuery`，随意用[幻数](https://en.wikipedia.org/wiki/Magic_number_%28programming%29) `27`替换它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-14T17:19:05.183

Angular 2 版本也更新了 ngModel

指示

```
import { Directive, Output, EventEmitter, ElementRef, HostListener } from '@angular/core';

@Directive({
  selector: '[escapeInput]'
})
export class escapeInput {

  @Output() ngModelChange: EventEmitter<any> = new EventEmitter();
  private element: HTMLElement;
  private KEY_ESCAPE: number = 27;

  constructor(private elementRef: ElementRef) {
    this.element = elementRef.nativeElement;
  }

  @HostListener('keyup', ['$event']) onKeyDown(event) {
    if (event.keyCode == this.KEY_ESCAPE) {
      event.target.value = '';
      this.ngModelChange.emit(event.target.value);
    }
  }

} 
```

用法

```
<input escapeInput class="form-control" [(ngModel)]="modelValue" type="text" /> 
```

# python - 无法用 ?= 理解 python 正则表达式

> ID：14646955
> 
> 赞同：6
> 
> 时间：2013-02-01T13:04:27.583
> 
> 标签：python, regex

我无法理解这些正则表达式是如何工作的以及何时使用它们。我还没有在 python 网站上找到这些正则表达式的具体示例。我知道 sed awk 但在那里没有使用过这些类型的正则表达式

```
(?=...)
(?<=...)
(?(id/name)yes-pattern|no-pattern) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T13:06:47.687

`(?=...)`是一个[*积极的前瞻断言*](http://www.regular-expressions.info/lookaround.html)。如果`?=`当前位置匹配后有括号中的部分，则匹配，但不会为匹配消耗任何字符。例如，正则表达式`a(?=b)`将匹配 an`a`后跟 a `b`，但不会将 the`b`作为匹配的一部分返回。

`(?<=...)`是一样的，但看 *后面*，即向后看。同样，它不消耗任何东西。

`(?(id/name)yes-pattern|no-pattern)`是[*有条件*](http://www.regular-expressions.info/conditional.html)的。如果[*命名组*](http://www.regular-expressions.info/named.html) `id/name`匹配，则字符串此时必须匹配`yes-pattern`，否则`no-pattern`.

不过，老实说，这些都是相当高级的功能，我不记得曾经使用过条件。Lookaround 更为常见，但经常受到正则表达式引擎的限制，例如，在许多情况下，lookbehind 只能使用固定长度的字符串来完成。

# php - Foreach 在 php 中不起作用

> ID：14646957
> 
> 赞同：0
> 
> 时间：2013-02-01T13:04:31.897
> 
> 标签：php, foreach

我有这样的代码：

```
<?php

$kode ["J"]= array (20, C, D, F);
$kode ["K"]= array (50, B, G, U);
$kode ["T"]= array (70, V, W);

function kota ($start, $end){
    if (is_array($kode)) {
        foreach ($kode as $kota => $path){
            if ($kota=$end) {
                for ($i=1; $i < count ($kota); $i++){
                    $jalur=$start.$path[$i];
                }
            }
        }
        return $jalur;
    }
}
$start = "J";
$end = "T";
$hasil=kota ($start, $end);
echo "".$hasil;
?> 
```

我希望输出是`J-V-W`
我不知道出了什么问题，有人可以帮助我吗？请...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:07:25.140

## 语法错误

看起来你忘了使用相等运算符`==`

```
if ($kota = $end){ ... } 
```

应该 -

```
if ($kota == $end){ ... } 
```

通过仅使用一个等号，您实际上是在为*分配*一个值`$kota`，而不是将该值与条件表达式中的值进行*比较。*`$end`

我不认为这是唯一在这里造成麻烦的事情..但绝对应该解决它:)

* * *

## 变量范围

我在您的代码中注意到的另一件事是您在`kota`函数中引用了未在其范围内定义的变量。这意味着该数组在函数`$kota`内不可访问。`kota`您应该将`$kota`数组传递给函数，以便您可以在函数范围内使用它。[这是有关 PHP 中变量作用域的更多信息](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 命名约定

关于变量名选择的最后一点...您可能应该考虑更改变量`$kota`或函数`kota`，以使它们的名称不相同。这将有助于提高可读性，并可能在您整晚调试时防止凌晨 4 点出现一些错误；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:08:44.703

在线上

```
if ($kota=$end){ 
```

您不是在比较，而是在覆盖 $kota 中的值，这始终是正确的。

此外，`$kode`在函数范围内不可用，请尝试将其添加到参数列表中，或使用`global`（不建议）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:07:44.967

您需要`$kode`作为参数传入函数或`global $kode;`在函数内部调用。我推荐前者。

此外，`if ($kota=$end)`需要`if ($kota==$end)`像其他人提到的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:16:39.477

不确定，这`$jalur=$start;`是在正确的地方，但这个脚本给出了你想要的：

```
<?php

$kode ["J"]= array (20, 'C', 'D', 'F');
$kode ["K"]= array (50, 'B', 'G', 'U');
$kode ["T"]= array (70, 'V', 'W');

function kota ($start, $end){
      global $kode;

      if(is_array($kode)){

            foreach ($kode as $kota => $path){

                  if ($kota == $end){
                        $jalur=$start;
                        for ($i=1; $i < count ($path); $i++){
                              $jalur .= "-" . $path[$i];
                        }
                  }
            }
            return $jalur;
      }
}
$start  = "J";
$end    = "T";
$hasil=kota ($start, $end);
echo $hasil;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:33:46.563

你的代码有很多问题

1.  正如其他人指出的那样，在 中`if ($kota=$end) {`，您分配`$end`给`$kota`并始终返回`true`，即 IF 子句中的代码始终执行

2.  PHP 有函数作用域。简单地说，函数内部声明的变量不能在外部使用，反之亦然。使用参数将您传递`$kode`到函数中。

3.  使用裸字符串 ie`V`和`W`in`$kode ["T"]= array (70, V, W);`等地方。强烈建议不要这样做，PHP 确实会就此发出警告。

4.  正如其他人指出的那样，每次`$jalur=$start.$path[$i];`都会覆盖。`$jalur`外面的for循环是没有意义的。您将使用`.=`附加到运算符。请注意，您还需要在使用此运算符之前初始化变量。

5.  `$kota`在您的代码中始终是一个字符串，因为在`foreach`循环中，`=>`符号之前的变量意味着获取数组的键，而数组键只能是字符串或整数。也就是说，这`for ($i=1; $i < count ($kota); $i++){`是没有意义的，因为`count($kota)`不能大于 1 - 你的 for 循环实际上永远不会运行。

6.  用空字符串附加一个变量是毫无意义的，如`echo "".$hasil;`

我想这就是你想要的。

```
<?php

$kode ["J"] = array (20, 'C', 'D', 'F');
$kode ["K"] = array (50, 'B', 'G', 'U');
$kode ["T"] = array (70, 'V', 'W');

function kota ($kode, $start, $end){
    $jalur = $start;
    if (is_array($kode)) {
        foreach ($kode as $kota => $path){
            if ($kota == $end) {
                for ($i = 1; $i < count($path); ++$i) {
                    $jalur .= '-' . $path[$i];
                }
            }
        }
        return $jalur;
    }
}
$start = "J";
$end = "T";
$hasil = kota($kode, $start, $end);
echo $hasil;
?> 
```

此代码为您提供以开头的字符串`$start`和除第一个元素之外的所有其他元素`$kode[$end]`

# c++ - 是否可以在另一个窗口中绘制（使用 Opencv/ffmpeg

> ID：14646961
> 
> 赞同：2
> 
> 时间：2013-02-01T13:04:48.437
> 
> 标签：c++, winapi, opencv, dll

我意识到这个问题可能会因“研究不足”而结束。但是，我确实花了 2 天的时间在谷歌上搜索它，但没有找到确凿的答案。

好吧，我有一个生成窗口的应用程序，而不是用 C++ 编写的。这个应用程序可以有一个带有 dll 的 c 接口。现在我希望使用 OpenCV 的强大功能，所以我开始使用 dll 进行扩展。Ss 从/向应用程序传递图像数据几乎是不可能的（只能直接传递 c 字符串和双精度值 - 使用硬盘驱动器进行绘图对于实时图像处理来说太慢了）。

我正在考虑让 opencv 直接将图像数据绘制到窗口上。我可以轻松地获得窗口句柄，那么是否可以让 openCV 将他们的数据“绘制”在另一个窗口上 - 或者更好地绘制到另一个窗口中？任何库（FFMPEG 或其他）都可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:05:45.353

[是](https://stackoverflow.com/q/5559366/176769)的，这是可能的，但远非理想。您可以[使用 GDI 在另一个窗口顶部绘制](http://www.devx.com/tips/Tip/18191)（[只需将](http://howto-code-it.blogspot.com.br/2011/05/how-to-convert-iplimage-to-hbitmap.html) [IplImage 转换为 HBITMAP](https://stackoverflow.com/questions/13530344/display-iplimage-mat-opencv-in-mfc-picture-box)）。[另一种技术是在](https://stackoverflow.com/a/3687615/176769)*无边界* [分层窗口](http://msdn.microsoft.com/en-us/library/ms997507.aspx)中进行此类绘制。

**一个更简单的方法是**，因为您拥有这两个应用程序，所以编写一个使用标准 C 数据类型在它们之间传递一个函数的函数，`IplImage`毕竟，`IplImage`它只不过是从这些标准类型构建的数据类型。

以下是您将如何分解`IplImage`为 5 个标准参数：

*   图像的大小（**int, int**）（宽/高）；
*   图像的 ( **int** ) 位深度；
*   通道数（**int**）；
*   以及图像的（**unsigned char***）像素；

对方接收到这些参数后，你可能会想：*[如何`IplImage`从头](https://stackoverflow.com/a/10125322/176769)组装一个？*呼叫[`cvCreateImageHeader()`](http://opencv.willowgarage.com/documentation/operations_on_arrays.html#createimageheader)后跟[`cvSetData()`](http://opencv.willowgarage.com/documentation/operations_on_arrays.html?highlight=cvsetdata#cvSetData)。

# c# - 来自 ASMX 的回应

> ID：14646965
> 
> 赞同：0
> 
> 时间：2013-02-01T13:04:56.310
> 
> 标签：c#, web-services, asmx

我们有一段旧代码，ASMX WebService，我们已经失去了源代码。我正在尝试复制这种行为，以便我们可以再次控制它而不影响任何客户端。

我创建了一个模拟响应的行为和属性的类，soap 请求返回如下

```
 <soap:Body>
<LoginResponse>
  <LoginResult>
    <UserId>string</UserId>
    <Password>string</Password>
  </LoginResult>
</LoginResponse> 
```

现在我试图复制的服务返回

```
 <soap:Body>
    <LoginRS xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <UserId>string</UserId>
        <Password>Password</Password>
    </LoginRS>
</soap:Body> 
```

现在 LoginRS 是我创建的类的名称。我的问题是如何让我的回复看起来像第二个回复。

我在 c# ASMX 中复制它并使用以下

```
 [WebMethod(MessageName="Login")]
    public LoginRS Login(string password, string userId) 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:20:42.457

如果您的目标是对服务进行逆向工程，并且服务 dll 与您同在，则可以使用 .NET Reflector (google it) 来读取 dll 并为您提供准确的源代码。

# eclipse - WebSockets 无法建立与服务器的连接

> ID：14646976
> 
> 赞同：0
> 
> 时间：2013-02-01T13:05:30.577
> 
> 标签：eclipse, tomcat, websocket

我正在运行 WebSockets 的简单 Echo 示例，但它似乎没有建立连接。这发生在 Windows 7、Eclipse 和 Tomcat 上。

Firefox 中的错误消息是：

```
"NetworkError: 404 Not Found - http://my_ip_address:8080/websockets/echo" 
```

和

```
Firefox can't establish a connection to the server at ws://my_ip_address:8080/websockets/echo. 
```

我错过了什么？我需要设置一些配置吗？

我在构建路径中的罐子是`javax.annotation_1.0.jar and websocket-api-0.2.jar`

我正在运行的代码：

```
package org.javaee.glassfishwebsocket;
import org.glassfish.websocket.api.annotations.WebSocket;
import org.glassfish.websocket.api.annotations.WebSocketMessage;

@WebSocket(path="/echo")
public class EchoBean {
    @WebSocketMessage
    public String echo(String message) {
        System.out.println("##################### Message received");
        return message + " (from your server)";
    }     
} 
```

这是 index.jsp：

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
</head>

<body>
    <meta charset="utf-8">
    <title>WebSocket Echo Client</title>
    <script language="javascript" type="text/javascript">

        console.log("trying to connect");

        var wsUri = "ws://my_ip_address:8080/websockets/echo";
        console.log("wsUri = ");
        console.log(wsUri);
        var websocket = new WebSocket(wsUri);
        console.log("websocket = " );
        console.log(websocket);
        websocket.onopen = function(evt) { onOpen(evt) };
        websocket.onmessage = function(evt) { onMessage(evt) };
        websocket.onerror = function(evt) { onError(evt) };

        function init() {
            console.log("init called");
            output = document.getElementById("output");
        }

        function send_echo() {
            console.log("sending_echo with " + textID.value);
            websocket.send(textID.value);
            writeToScreen("SENT: " + textID.value);
        }

        function onOpen(evt) {
            console.log("onOpen");
            writeToScreen("CONNECTED");
        }

        function onMessage(evt) {
            console.log("onMessage");
            writeToScreen("RECEIVED: " + evt.data);
        }

        function onError(evt) {
            console.log("onError");
            writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
        }

        function writeToScreen(message) {
            var pre = document.createElement("p");
            pre.style.wordWrap = "break-word";
            pre.innerHTML = message;
            output.appendChild(pre);
        }

        window.addEventListener("load", init, false);
    </script>

    <h2 style="text-align: center;">WebSocket Echo Client</h2>
    <div style="text-align: center;"><img style=" width: 64px; height: 64px;" alt=""src="HTML5_Logo_512.png"></div>
    <br></br>
    <div style="text-align: center;">
        <form action=""> 
            <input onclick="send_echo()" value="Press me" type="button"> 
            <input id="textID" name="message" value="Hello WebSocket!" type="text"><br>
        </form>
    </div>
    <div id="output"></div>
</body>
</html> 
```

# ruby - 如何使用水豚更改文本框中的值？

> ID：14646987
> 
> 赞同：2
> 
> 时间：2013-02-01T13:06:37.233
> 
> 标签：ruby, capybara

例如文本框的值为 10 我需要将值更改为 20

当我使用下面的 Capybara 命令时，

> > fill_in "#{ID}", :with => "20"

该值没有改变......而是附加为1020。

给我你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:22:40.243

我不得不使用javascript来做到这一点。在更改值之前，我编写了一个单独的步骤来清除该字段。

```
page.execute_script("$('#{field_id}').val('');") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:15:08.440

我相信正确的语法是

```
 fill_in "ID", :with => "20" 
```

# google-maps-api-3 - 谷歌地图标记在 setMap(null) 处添加缓出效果

> ID：14646995
> 
> 赞同：0
> 
> 时间：2013-02-01T13:07:01.447
> 
> 标签：google-maps-api-3, google-maps-markers

我有一个带有多个标记的 Googlemap，我在四处移动或放大/缩小地图时会刷新。到目前为止，一切都很好。问题是，如果刷新标记，我的意思是在地图上重新绘制，然后它会闪烁一个实例，因为它首先作为旧标记被删除，然后被绘制为新标记。我`setMap(null)`用来隐藏标记。有没有办法避免这种闪烁？有没有办法在`setMap(null)`使用 jQuery 或其他东西时添加缓动效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:44:29.480

编写代码不要这样做。不要删除所有现有标记，只删除那些不再出现在更新数据中的标记并添加新标记。

# apache - Apache - RewriteCond QUERY_STRING

> ID：14646996
> 
> 赞同：0
> 
> 时间：2013-02-01T13:07:02.553
> 
> 标签：apache, mod-rewrite, query-string

我在这里搜索了一些接近我需要的东西，但没有找到。所以我们开始了。我有一个 MediaWiki，MediaWiki vhost 使用 mod_authnz_ldap 通过 LDAP 进行身份验证，但是，Collection 扩展名（创建 PDF），当我单击生成 pdf 文件时，它会向 Apache 发送请求，发生这种情况时，Apache 会询问它对于身份验证没有答案，它返回一个错误。这是我在渲染中遇到的错误：

```
ERR: HTTP Error 401: Authorization Required
ERR: HTTP Error 401: Authorization Required
ERR: HTTP Error 401: Authorization Required
ERR: HTTP Error 401: Authorization Required 
```

我正在尝试使用 QUERY_STRING 搜索字符串“writer=rl”或“render”或其他字符串，这些字符串是“创建 PDF 请求”中的字符串。我是这样使用的：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^writer=rl$
RewriteRule .* - [E=free_access] 
```

其中“free_access”是我的环境变量。

然后，我这样做：

```
 AllowOverride All
     Options Indexes FollowSymLinks
     Order deny,allow
     deny from all
     allow from env=free_access
     AuthType Basic
     AuthName "Wiki - Autenticacao via LDAP"
     AuthBasicProvider ldap
     AuthzLDAPAuthoritative off
     AuthLDAPGroupAttributeIsDN off
     AuthLDAPURL "ldap://xxx.yyy.zzz.www:389/ou=users,dc=dc,dc=BLABLA,dc=UN?uid?sub?(objectClass=posixAccount)"
     AuthLDAPRemoteUserIsDN off
     AuthLDAPGroupAttribute memberUid
     Require valid-user
     Satisfy any 
```

好吧，我不能让它与这个一起工作，有人做过吗？