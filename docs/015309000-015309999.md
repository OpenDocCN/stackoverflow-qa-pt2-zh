# StackOverflow 问答 15309000-15309999

# java - 在 Runtime.getRuntime().exec(...) 中传递文件名时出错

> ID：15309001
> 
> 赞同：0
> 
> 时间：2013-03-09T09:06:27.423
> 
> 标签：java, compiler-construction, runtime-error, runtime.exec

我正在尝试从 java 程序编译 python 文件。当我直接传递文件名时，它工作正常。但是当我尝试在函数中传递一个包含文件名的字符串时，我得到一个错误。我需要传递一个包含文件名的字符串，因为我从另一个函数获取路径。我拆分路径以获取文件名。谁能帮助我实现这一目标？

看看我到目前为止所做的尝试：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;

public class Python_Compiler {
    static String newName = null;
    static String r2;
    static String result;
    public static void main(String args[]) throws IOException{
        InputStream inStream = null;
        OutputStream outStream = null;

        String filepath = "C:\\Hello.py";

          String p = filepath;
          System.out.println(p);
          int pos1 = p.lastIndexOf("\\");
          int pos2 = p.lastIndexOf(".py");
          result = p.substring(pos1+1, pos2);
          r2 = p.substring(0,pos1);
          System.out.println("PartialPath: "+r2+"\\");
          System.out.println("The file name only: "+result+".py");

        newName = filepath.replaceAll("(\\.\\S+?$)","1$1");
        File originalcopy =new File(newName);

        inStream = new FileInputStream(filepath);
        outStream = new FileOutputStream(originalcopy);

        byte[] buffer = new byte[1024];

        int length;
        //copy the file content in bytes 
        while ((length = inStream.read(buffer)) > 0){

            outStream.write(buffer, 0, length);

        }

        inStream.close();
        outStream.close();
        System.out.println("File is copied successful!");

        String ret = compile();
        System.out.println("Returned String from Inside Log: "+ret);

        int counter = 0;

        while(!ret.equals("Compilation Successful !!!") && counter!=50)
        {

            System.out.println("Your file contains errors");
            String myReturnedErrorDetails = Reggex_Capture.Extracter(ret);
            System.out.println("My Returned Error Details: "+myReturnedErrorDetails);
            String[] splitted = myReturnedErrorDetails.split(" ");

            int lineNumber = Integer.parseInt(splitted[0]);
            System.out.println("Line number: "+lineNumber);
            System.out.println("Error:  "+splitted[1]);
            String theError = splitted[1];
            String myWholeSolution;
            myWholeSolution = Fixer.PythonFix(theError);
            String[] secondSplitted = myWholeSolution.split(" ");
            String mySolution = secondSplitted[1];
            int myPercentage = Integer.parseInt(secondSplitted[0]);
            System.out.println("The solution proposed by the fixer is: "+ mySolution);
            System.out.println("The best percentage returned by the fixer is: "+myPercentage);
            //Python_Replacer.fix(lineNumber,theError, filepath, mySolution);
            Python_Replacer.fix(lineNumber,theError, newName, mySolution);

            counter++;
            ret = compile();

        }

    }
        public static String compile()
        {
            String log="";

            String myDirectory = r2;

             try {
                 String s= null;
               //change this string to your compilers location
                // String fileName = "Hello1.py";
                 Process p = Runtime.getRuntime().exec("cmd /C python result", null, new java.io.File(myDirectory));

             BufferedReader stdError = new BufferedReader(new 
                  InputStreamReader(p.getErrorStream()));
             boolean error=false; 

             log+="";
             while ((s = stdError.readLine()) != null) {
                 log+=s;
                 error=true;
                 //log+="";

             }if(error==false) log+="Compilation Successful !!!";

         } catch (IOException e) {
             e.printStackTrace();
         }
             /*String log2 = log;
             System.out.println("LOG2: "+log2);
             Reggex_Capture.Extracter(log2);*/

            return log;
        }

      public int runProgram() 
        {
            int ret = -1;
           try
             {            
                 Runtime rt = Runtime.getRuntime();
                 Process proc = rt.exec("cmd.exe /c start a.exe");
                 proc.waitFor();
                 ret = proc.exitValue();
             } catch (Throwable t)
               {
                 t.printStackTrace();
                 return ret;
               }
           return ret;                      
        }} 
```

看看错误：

```
C:\Hello.py
PartialPath: C:\
The file name only: Hello.py
File is copied successful!
Returned String from Inside Log: python: can't open file 'result': [Errno 2] No such file or directory
Your file contains errors
Received String: python:#can't#open#file#'result':#[Errno#2]#No#such#file#or#directory
Line Number: null
Z atfer while: null
Keywords: null
Error details: null null
My Returned Error Details: null null
    Exception in thread "main" java.lang.NumberFormatException: For input string: "null"
        at java.lang.NumberFormatException.forInputString(Unknown Source)
        at java.lang.Integer.parseInt(Unknown Source)
        at java.lang.Integer.parseInt(Unknown Source)
        at Python_Compiler.main(Python_Compiler.java:66) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:42:06.787

`Process p = Runtime.getRuntime().exec("cmd /C python result", null, new java.io.File(myDirectory));`
应该：
`Process p = Runtime.getRuntime().exec("cmd /C python " + result + ".py", null, new java.io.File(myDirectory));`

你想传入你的 String 的值，`result`而不是字面的“结果”。

此外，您的`myDirectory`变量必须包含有效目录，例如“C:\”，而不仅仅是“C:”。因此，您可能需要像这样修改该变量： `myDirectory = myDirectory + "\\";`

# linux - 如何使用 awk shell 脚本（如下所示？）对时间 A（格式为“hh:mm:ss”）和时间 B 之间的行进行排序？

> ID：15309003
> 
> 赞同：1
> 
> 时间：2013-03-09T09:06:34.047
> 
> 标签：linux, shell, unix, awk

我想使用 awk shell 脚本对行之间`time A`和`time B`格式之间的行进行排序`"00:00:00"`（通过直接比较时间的时间列）：

```
awk '{
        if ("15:21:14" <= $1 && $1 <= "15:51:14")
        {print $0}
     }' 
```

我得到了正确的行，但是这样做对我来说绝对正确吗？
***如果没有，正确的方法是什么？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:51:26.110

假设当您说“...我想对行进行排序...”时，您的真正意思是您想选择行，以下是在 awk 中编写的方法：

```
awk '("15:21:14" <= $1) && ($1 <= "15:51:14")' file 
```

只要您的所有时间戳都遵循相同的格式并为每个数字使用完整的 2 位数字，例如用前导零填充一位数小时，这将起作用。如果要对结果进行排序，请通过管道输出进行排序：

```
awk '("15:21:14" <= $1) && ($1 <= "15:51:14")' file | sort 
```

# wpf - 绑定转换器参数

> ID：15309008
> 
> 赞同：178
> 
> 时间：2013-03-09T09:07:59.057
> 
> 标签：wpf, xaml, styles

有没有办法我可以做到这一点`Style`：

```
<Style TargetType="FrameworkElement">
    <Setter Property="Visibility">
        <Setter.Value>
            <Binding Path="Tag"
                RelativeSource="{RelativeSource AncestorType=UserControl}"
                Converter="{StaticResource AccessLevelToVisibilityConverter}"
                ConverterParameter="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}" />                        
        </Setter.Value>
    </Setter>
</Style> 
```

我只需要将`Tag`顶级父级和`Tag`控件本身发送到我的转换器类。

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2013-03-09T10:48:27.370

该`ConverterParameter`属性无法绑定，因为它不是依赖属性。

因为`Binding`不是从`DependencyObject`它的任何属性中派生的都不能是依赖属性。因此，一个 Binding 永远不能成为另一个 Binding 的目标对象。

然而，还有一个替代解决方案。您可以将 a[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)与[多值转换器](http://msdn.microsoft.com/en-us/library/ms613613.aspx)一起使用，而不是普通的 Binding：

```
<Style TargetType="FrameworkElement">
    <Setter Property="Visibility">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource AccessLevelToVisibilityConverter}">
                <Binding Path="Tag" RelativeSource="{RelativeSource Mode=FindAncestor,
                                                     AncestorType=UserControl}"/>
                <Binding Path="Tag" RelativeSource="{RelativeSource Mode=Self}"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
</Style> 
```

多值转换器获取源值数组作为输入：

```
public class AccessLevelToVisibilityConverter : IMultiValueConverter
{
    public object Convert(
        object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values.All(v => (v is bool && (bool)v))
            ? Visibility.Visible
            : Visibility.Hidden;
    }

    public object[] ConvertBack(
        object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-09T10:47:10.970

不，不幸的是，这是不可能`ConverterParameter`的，因为不是，`DependencyProperty`所以您将无法使用绑定

但也许您可以作弊并使用`MultiBinding`with`IMultiValueConverter`来传递 2 个`Tag`属性。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-01-16T17:10:16.417

还有另一种使用方式`MarkupExtension`，以便`Binding`用于`ConverterParameter`. 使用此解决方案，您仍然可以使用默认值`IValueConverter`而不是，`IMultiValueConverter`因为就像您在第一个示例中所期望的那样`ConverterParameter`传递到。`IValueConverter`

这是我的可重复使用`MarkupExtension`：

```
/// <summary>
///     <example>
///         <TextBox>
///             <TextBox.Text>
///                 <wpfAdditions:ConverterBindableParameter Binding="{Binding FirstName}"
///                     Converter="{StaticResource TestValueConverter}"
///                     ConverterParameterBinding="{Binding ConcatSign}" />
///             </TextBox.Text>
///         </TextBox>
///     </example>
/// </summary> 
```

```
[ContentProperty(nameof(Binding))]
public class ConverterBindableParameter : MarkupExtension
{
    #region Public Properties

    public Binding Binding { get; set; }
    public BindingMode Mode { get; set; }
    public IValueConverter Converter { get; set; }
    public Binding ConverterParameter { get; set; }

    #endregion

    public ConverterBindableParameter()
    { }

    public ConverterBindableParameter(string path)
    {
        Binding = new Binding(path);
    }

    public ConverterBindableParameter(Binding binding)
    {
        Binding = binding;
    }

    #region Overridden Methods

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var multiBinding = new MultiBinding();
        Binding.Mode = Mode;
        multiBinding.Bindings.Add(Binding);
        if (ConverterParameter != null)
        {
            ConverterParameter.Mode = BindingMode.OneWay;
            multiBinding.Bindings.Add(ConverterParameter);
        }
        var adapter = new MultiValueConverterAdapter
        {
            Converter = Converter
        };
        multiBinding.Converter = adapter;
        return multiBinding.ProvideValue(serviceProvider);
    }

    #endregion

    [ContentProperty(nameof(Converter))]
    private class MultiValueConverterAdapter : IMultiValueConverter
    {
        public IValueConverter Converter { get; set; }

        private object lastParameter;

        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {
            if (Converter == null) return values[0]; // Required for VS design-time
            if (values.Length > 1) lastParameter = values[1];
            return Converter.Convert(values[0], targetType, lastParameter, culture);
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            if (Converter == null) return new object[] { value }; // Required for VS design-time

            return new object[] { Converter.ConvertBack(value, targetTypes[0], lastParameter, culture) };
        }
    }
} 
```

在您的代码库中使用它`MarkupExtension`，您可以简单地绑定`ConverterParameter`以下方式：

```
<Style TargetType="FrameworkElement">
<Setter Property="Visibility">
    <Setter.Value>
     <wpfAdditions:ConverterBindableParameter Binding="{Binding Tag, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}"
                 Converter="{StaticResource AccessLevelToVisibilityConverter}"
                 ConverterParameterBinding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}" />          
    </Setter.Value>
</Setter> 
```

这看起来几乎就像你最初的提议。

# jsf - ICEfaces dataPaginator actionListener

> ID：15309011
> 
> 赞同：0
> 
> 时间：2013-03-09T09:08:18.723
> 
> 标签：jsf, icefaces

在中`ice:dataPaginator`我们可以添加一个`actionListener`. 使用该事件处理程序或以其他方式，我们可以跟踪我们单击的分页按钮（锚点）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:40:12.420

是的，该`actionListener`方法接受一个`ActionEvent`参数，您可以调用该参数`getComponent()`并将其转换为 DataPaginator。有了这个对象，你可以使用`getPageIndex()`,`getPageCount()`和`getPaginatorMaxPages()`方法。

它都写在冰文档中：http: [//icefaces-showcase.icesoft.org/showcase.jsf ?grp=compatMenu&exp=paginator](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=paginator)

**编辑：**

```
public void actionListener(ActionEvent event) {
    setStatus("Data Paginator clicked.");

    if ((event.getComponent() != null) &&
        (event.getComponent() instanceof DataPaginator)) {
        DataPaginator clicked = (DataPaginator)event.getComponent();

        StringBuilder sb = new StringBuilder(80);
        sb.append("Data Paginator clicked. Current page is ");
        sb.append(clicked.getPageIndex());
        sb.append(" of ");
        sb.append(clicked.getPageCount());
        sb.append(" and a maximum of ");
        sb.append(clicked.getPaginatorMaxPages());
        sb.append(" pages will be displayed.");
        setStatus(sb.toString());
    }
} 
```

# javascript - 将相同id的多个div更改为不同的高度

> ID：15309012
> 
> 赞同：0
> 
> 时间：2013-03-09T09:08:22.203
> 
> 标签：javascript, html

所以我有多个具有相同 id 'stick' 的 div。我想遍历所有这些元素并给每个元素一个随机高度。这是我尝试过的：

```
 <script type="text/javascript">
        for(var i = 0; i < 47; i++) {
            var rand = 200;
            document.getElementsById('stick')[i].style.height= rand+'px';  
        }
    </script> 
```

可悲的是，此代码不起作用。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:11:52.077

您不应为多个元素添加相同的 id。使用类名。并且`document.getElemetsById`不是一个定义的函数，只有`document.getElementById`（没有“s”）应该返回一个元素。

HTML：

```
 <div class="stick"> </div>
    <div class="stick"> </div> 
```

JS：

```
<script type="text/javascript">
    var divs = document.getElementsByClassName('stick');
    for(var i = 0; i < divs.length; i++) {
        var rand = 200 * Math.random();
        divs[i].style.height= rand+'px';  
    }
</script> 
```

这可能有效。但我推荐使用 jQuery 框架来进行 JavaScript 编码，因为这些行在 jQuery 中变成了更简单的代码：

```
<script type="text/javascript">
     $('.stick').each(function(){            //iterates all elements having stick class
         $(this).height(200 * Math.random());       //inside the callback the 'this' is the current html element. etc ...
     });
</script> 
```

jQuery 主页：http: [//jquery.com/](http://jquery.com/)

快速包含到您的网站，只需从头部的 CDN url 导入 jQuery：

```
 <head>
       ...
       <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
   </head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:11:43.450

ID 在文档中应该是完全唯一的。将您的 ID 更改为唯一值，您可以单独引用它们。如果您希望对一组元素进行操作，请使用`class`标签将它们链接在一起。要继续阅读，`CSS Classes`您可以查看[此文档](http://www.tizag.com/cssT/class.php)。这将帮助您了解 HTML 和 CSS 中类的用途。

**你的问题**

`getElementsByID()`不起作用。`getElementByID()`是正确的语法。

所以

```
document.getElementsById('stick')[i].style.height= rand+'px'; 
```

会变成

```
document.getElementById('stick')[i].style.height= rand+'px'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:12:01.623

你不能有多个相同的元素`id`。`id`必须是*唯一的*。您需要`class`使用类名来使用和检索您的元素。您可以使用 jquery 来帮助您：`var elements = $('.stick')`

# android - 在 android 的查看器中打开受密码保护的 PDF 文件

> ID：15309013
> 
> 赞同：2
> 
> 时间：2013-03-09T09:08:28.760
> 
> 标签：android, pdf

我正在开发一个 pdf 阅读器，因为 android 没有任何本机 pdf 查看器，所以我必须使用第三方 pdf 查看器。在这种情况下，我选择了适用于 android 的 Adob​​e pdf 查看器。我可以打开存储在设备 SD 卡中的 pdf 文件。现在我想从我的应用程序中打开受密码保护的 pdf 文件。如果用户想要手动打开受密码保护的 pdf 文件，则必须在打开时提供密码。但我想在没有任何密码提示的情况下从我的应用程序中打开那些密码 pdf 文件。应用程序提供密码，[应用程序知道密码]并且没有任何密码提示，pdf将打开。

目前，如果我想从我的应用程序中打开任何受密码保护的 pdf 文件，则会出现密码提示并且需要密码才能打开它。

我正在使用此代码从 SDCARD 中存储的 pdf 文件中打开 pdf。

====

```
File pdfFile = new File(fileLocation); 
if (pdfFile.exists()) 
{ 
    Uri pdfFilepathUri = Uri.fromFile(pdfFile); 
    Intent intent = new Intent(Intent.ACTION_VIEW);    

    intent.setDataAndType(pdfFilepathUri, "application/pdf");      
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
    try 
    { 
        startActivity(intent);
    } 
    catch (ActivityNotFoundException e) 
    { 
        Toast.makeText(this,"No Application Available to View PDF : "+fileLocation,Toast.LENGTH_LONG).show(); 
    } 
} 
 else 
Toast.makeText(this,"File cannot found : "+fileLocation,Toast.LENGTH_SHORT).show(); 
```

====

任何人都可以帮助我如何从应用程序中提供密码，以便它可以自动打开 pdf 文件而不会提示任何密码窗口。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:48:58.280

> 如果用户想要手动打开受密码保护的 pdf 文件，则必须在打开时提供密码。但我想在没有任何密码提示的情况下从我的应用程序中打开那些密码 pdf 文件。

欢迎您联系各种 PDF 查看应用程序的作者，看看他们是否支持通过`Intent`额外或其他方式传递 PDF 密码。文档中的协议中肯定没有任何`ACTION_VIEW`内容旨在支持这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-05T09:52:58.910

> 如果是 SD 卡中的 PDF：

```
private void displayPDF() {

     dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/Data/1.pdf/");

            pdfView.fromFile(dir)
                    .password("12345678")
                    .load();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-06T12:56:45.843

简而言之，你不能。我知道那里*没有*支持此功能的 PDF 阅读器，但即使有，您也不能依赖安装了该特定阅读器的用户 - 所以没有办法让它普遍工作。

但是，您可以通过使用[处理 PDF 渲染的所有繁重工作](https://github.com/barteksc/AndroidPdfViewer)的库来解决此问题，以便在您的应用程序中构建您自己的基本 PDF 视图，然后使用该视图打开 PDF。一些这样的库，例如`AndroidPdfViewer`链接的库允许您指定密码，例如：

```
pdfView.fromFile(file)
    .password("password123")
    .load(); 
```

这将使您能够提供一个通用的解决方案来显示受密码保护的 PDF 文件，并且还具有在上下文之间不泄露密码的额外安全优势。

# facebook - actionscript facebook 登录失败并出现错误 #2032：流错误。在移动设备上

> ID：15309015
> 
> 赞同：1
> 
> 时间：2013-03-09T09:08:37.497
> 
> 标签：facebook, actionscript-3, apache-flex, facebook-actionscript-api

我正在尝试在 flex 移动应用程序中使用我的 facebook 帐户登录。

我的方案的步骤是：

1.  按下 Facebook 登录按钮

2.  facebook登录弹出窗口出现

3.  用户输入用户名和密码，点击登录按钮。

    我的代码：

    ```
     public function performLogin():void
    {
        var facebookWebView:StageWebView = new StageWebView();
        facebookWebView.viewPort = new Rectangle (0,0, m_stage.width, m_stage.height);

        FacebookMobile.login(loginCallback ,m_stage, m_appPermissions, facebookWebView)
    }

        private function loginCallback(success:Object, fail:Object):void
    {
     if (success) // using the Flex Emulator a success object is returned and everyting works as it should
        {
            var session:FacebookSession = success as FacebookSession;
            //save access token
            PersistanceMechanism.instance.add(sAccessToken, session.accessToken);

            //forward to success view
            if (m_successView != null)
               m_viewNavigator.pushView(m_successView);
            return;
        } 
    ```

Flex Emulator 一切正常，并且 loginCallback 包含正确的“成功”对象。

然而，当在我的 Galaxy SIII 上测试这个时，回调会得到一个失败的对象，而不是下面的消息：

```
 Error #2032: Stream Error. URL: https://graph.facebook.com/me?access%5Ftoken=AAAFA7Xkx1wwBAC7ZAQmrvHcZBwYv5ZBLcUvZClaGSrpNzVXRA1HsgQShIOQCOqy2tGAHVHKTbwH8taTrS8XBtVSN4JxW6ZAH8Az5ldJiMiwZDZD 
```

你能告诉我这是什么原因吗？为什么这个问题只能在真正的移动设备上重现？

谢谢

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:16:16.733

看起来 Adob​​e AIR 版本有问题。更新到最新版本并正常工作。

# html - 如何在css3中创建一个阴影框

> ID：15309016
> 
> 赞同：1
> 
> 时间：2013-03-09T09:08:56.013
> 
> 标签：html, css

我一直在寻找创建如下阴影框的方法。在网上查了各种教程，好像都搞不定。

![在此处输入图像描述](../Images/9596566590c05d5d0c95b1959cfc6689.png)

我正在尝试为我的网站创建一个如上所示的阴影框，但我不知道如何获得适合框中心的像素数。

CSS3应该如何？任何帮助都会帮助我。

谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:03:05.160

检查我一年前做的这个[**演示。**](http://dabblet.com/gist/2789364)

还有我现在做的这个[**简化版本。**](http://dabblet.com/gist/5124442)

**HTML**：`<div class="box"></div>`

相关**CSS**：

```
.box {
    width: 20em; height: 6em;
    border: solid 1px #ccc;
    position: relative;
    background: white;
}
.box:before, .box:after {
    min-height: 45%; width: 65%;
    border-radius: .2em;
    box-shadow: 0 0 .625em rgba(204,204,204,.4);
    position: absolute;
    z-index: -1;
    background: rgba(204,204,204,.4);
    content: '';
}
.box:before {
    bottom: 0; left: .3em;
    transform: rotate(-5deg);
}
.box:after {
    right: .3em; bottom: 0; 
    transform: rotate(5deg);
} 
```

您不需要获取像素数。您可以使用`%`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:33:22.983

该技术应用于单个元素。从这个元素生成了几个伪元素，然后推到它后面，比如`#box:before, #box:after` . 这些伪元素比显式定位。然后，您必须将 css3 框阴影应用于这些元素并应用变换。在以下网站上阅读有关它们的更多信息：

[http://nimbupani.com/drop-shadows-with-css3.html](http://nimbupani.com/drop-shadows-with-css3.html)
[http://nicolasgallagher.com/css-drop-shadows-without-images/](http://nicolasgallagher.com/css-drop-shadows-without-images/)
以下代码也来自[http://www.red-team -design.com/how-to-create-slick-effects-with-css3-box-shadow](http://www.red-team-design.com/how-to-create-slick-effects-with-css3-box-shadow)
Html

```
<div id="box">
   <p>Content and content</p>
</div> 
```

的CSS：

```
 #box 
  {
  position: relative;
  width: 60%;
  background: #ddd;
 -moz-border-radius: 4px;
  border-radius: 4px;
  padding: 2em 1.5em;
  color: rgba(0,0,0, .8);
  text-shadow: 0 1px 0 #fff;
  line-height: 1.5;
  margin: 60px auto;
    }

  #box:before, #box:after 
  {
  z-index: -1; 
  position: absolute; 
  content: "";
  bottom: 15px;
  left: 10px;
  width: 50%; 
  top: 80%;
  max-width:300px;
  background: rgba(0, 0, 0, 0.7); 
 -webkit-box-shadow: 0 15px 10px rgba(0,0,0, 0.7);   
 -moz-box-shadow: 0 15px 10px rgba(0, 0, 0, 0.7);
  box-shadow: 0 15px 10px rgba(0, 0, 0, 0.7);
 -webkit-transform: rotate(-3deg);    
 -moz-transform: rotate(-3deg);   
 -o-transform: rotate(-3deg);
  -ms-transform: rotate(-3deg);
   transform: rotate(-3deg);
   }

#box:after 
{
 -webkit-transform: rotate(3deg);
 -moz-transform: rotate(3deg);
 -o-transform: rotate(3deg);
 -ms-transform: rotate(3deg);
  transform: rotate(3deg);
  right: 10px;
  left: auto;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:32:30.473

在 html5 中，有 box-shadow 属性用于产生这样的阴影......之前它需要 flash 或 photoshop 来创建这样的东西......

这应该会有所帮助：它还具有所有其他功能......

[http://w3schools.com/css3/default.asp](http://w3schools.com/css3/default.asp)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-09T09:46:20.107

这种阴影在 CSS3 中是不可能的，解决这个问题的方法是创建一个阴影的外部图像，然后将其作为背景图像应用到元素上。

您还可以找到用于创建逼真阴影的 Photoshop 操作，然后将其用作背景图像以增加深度。

# java - wicket - PageableListView 不起作用

> ID：15309018
> 
> 赞同：0
> 
> 时间：2013-03-09T09:09:17.233
> 
> 标签：java, wicket, wicket-1.5

我正在研究检票口，我应该在点击导航栏后呈现 vthe 视图没有任何反应，请帮助我。

```
<div class="colums data" wicket:id="BooksListViewContainer"> 
```

```
 <div wicket:id="booksListView">
        <div class="col-left data" wicket:id="bookName"></div>
        <div class="col-middle data" wicket:id="author"></div>
        <div class="col-middle data" wicket:id="genre"></div>
        <div class="col-middle data" wicket:id="language"></div>
        <div class="col-middle data" wicket:id="datePublished"></div>
    </div>
    <div wicket:id="navigator" class="navi">xxx</div>
</div> 
```

和java：

```
 public class HomePage extends WebPage {

    transient LibaryServices libaryService ;
    Component sortBtns [] ;

public HomePage(final PageParameters parameters) {
    super(parameters);
    initPage();
}

private void initPage() {
    libaryService = new LibaryServices();
    add(getBooksListViewContainer());
}

private WebMarkupContainer getBooksListViewContainer(){
    String id = "BooksListViewContainer" ;
    WebMarkupContainer c = (WebMarkupContainer) get(id);
    if (c != null)
        return c;

    final WebMarkupContainer container = new WebMarkupContainer(id);
    container.add(getBooksListView());
    container.add(getNavigator());
    container.setOutputMarkupId(true);
    return container;
}

@SuppressWarnings("unchecked")
private PageableListView<Book> getBooksListView() {
    String id = "booksListView";
    PageableListView<Book> c = (PageableListView<Book>)get(id);
    if (c != null)
        return c;
    final PageableListView<Book> booksListView = new PageableListView<Book>(id, libaryService.getBooks(), 4) {
        @Override
        protected void populateItem(ListItem<Book> listBookItem) {
            Book book = (Book) listBookItem.getModelObject();

            listBookItem.add(new Label("author", book.getAuthor()));
            listBookItem.add(new Label("bookName", book.getBookName()));
            listBookItem.add(new Label("language", book.getBookLanguage()));
            listBookItem.add(new Label("genre", book.getGenre()));
            listBookItem.add(new Label("datePublished", book.getDatePublished()));

            listBookItem.setVisible(listBookItem.isVisible()&&
                        book.isShouldBeDisplayedAfterPassFilter());     
        }
        @Override
        protected IModel<Book> getListItemModel(
                IModel<? extends List<Book>> listViewModel, int index) {
            return super.getListItemModel(listViewModel, index);
        }
    };
    booksListView.setOutputMarkupId(true);
    booksListView.setMarkupId(id);
    return booksListView;
}
    public SortingDataUtil getSortingDataUtil(){
    return SortingDataUtil.getInstace();
}

private AjaxPagingNavigator getNavigator() {
String id = "navigator";
AjaxPagingNavigator navigator = (AjaxPagingNavigator) get(id);
if (navigator == null) {
    navigator = new AjaxPagingNavigator(id, getBooksListView()) {
    @Override
    protected void onAjaxEvent(AjaxRequestTarget target) {
        super.onAjaxEvent(target);
    }
    };
    navigator.setOutputMarkupId(true);
}
return navigator;
} 
```

}

这是我得到的例外

意外的运行时异常

```
 Last cause: Argument 'component' may not be null.
 WicketMessage: Method onRequest of interface      org.apache.wicket.behavior.IBehaviorListener targeted at      org.apache.wicket.ajax.markup.html.navigation.paging.AjaxPagingNavigationLink$1@321af6fe on component [AjaxPagingNavigationLink [Component id = pageLink]] threw an exception 
```

堆栈跟踪

根本原因：

```
 java.lang.IllegalArgumentException: Argument 'component' may not be null.
 at org.apache.wicket.util.lang.Args.notNull(Args.java:41)
 at org.apache.wicket.ajax.AjaxRequestHandler.add(AjaxRequestHandler.java:226)
 at org.apache.wicket.ajax.markup.html.navigation.paging.AjaxPagingNavigator.onAjaxEvent(AjaxPagingNavigator.java:152)
 at com.wicketlibary.HomePage$3.onAjaxEvent(HomePage.java:146)
 at org.apache.wicket.ajax.markup.html.navigation.paging.AjaxPagingNavigationBehavior.onEvent(AjaxPagingNavigationBehavior.java:82)
 at org.apache.wicket.ajax.AjaxEventBehavior.respond(AjaxEventBehavior.java:131)
 at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:603) 
```

编辑：我的版本是

```
 <wicket.version>6.6.0</wicket.version> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:28:13.077

如果您认为这是一个错误，您应该创建一个快速入门并提交。

在你这样做之前，我会改变你获取 PageableListView 引用的方式，而是创建一个类变量，设置它并在创建 AjaxPagingNavigator 时使用它。当从 AjaxPagingNavigator 调用时，您是否使用调试来确保“c”不为空。我使用与您相同的检票口版本在我的环境中工作。我的代码中唯一的区别是我没有通过调用 get(id) 来获取我的变量

# c# - 我们可以像在 c# 中的数据库中那样以排序方式填充文本框中的数据吗

> ID：15309019
> 
> 赞同：3
> 
> 时间：2013-03-09T09:09:23.970
> 
> 标签：c#, .net, database

我目前正在使用此代码将字段加载到文本框中：

```
this.empTableAdapter.Fill(this.empDataSet.emp); 
```

但是如果我们添加一个关键元素值小于数据库中已经存在的数据记录的问题，当我单击调用此方法的查看所有按钮时，最后添加的数据出现在最后，但我想拥有它以有序的方式出现。

我已经设置了两个导航按钮来导航到下一个和上一个字段。

数据正在我的数据库中进行排序，但是当我调用它时

```
this.empTableAdapter.Fill(this.empDataSet.emp); 
```

它没有像那样更新。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:02:03.833

此问题的简单解决方案不是直接绑定到 empTableAdapter，而是使用中间[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)。

其工作方式是将 TableAdapter 指定为 BindingSource 的源，然后在将数据绑定到 UI 组件时使用 BindingSource。

BindingSource 具有确保您的数据保持过滤和排序的选项，并且由用于分页/导航的漂亮 UI 控件进一步支持。

我已经很长时间没有使用数据集了，但我记得这个调用都是使用组件工具箱和 Windows 窗体设计器创建和连接的。

# haskell - Haskell：IO 与 Ints 混淆

> ID：15309020
> 
> 赞同：1
> 
> 时间：2013-03-09T09:09:25.560
> 
> 标签：haskell, io, int

嘿，所以我正在尝试学习haskell，但我在编写一个需要我从终端中的用户那里收集整数的程序时遇到了麻烦。我该怎么做我试过这样的事情

```
import Data.Char (digitToInt)

getArguments :: IO Int
getArguments =
    do putStrLn "Enter the number of arguments you want to have"
       arguments <- getChar
       return (digitToInt arguments)

main :: IO()
main = do
    putStrLn "Welcome to Random Argument Generator"
    let x = getArguments
    print x+1 
```

但这不起作用请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T09:26:51.897

替换`let x = getArguments`为`x <- getArguments`

`getArguments`is (correctly)的类型签名`:: IO Int`，这意味着它`Int`被“包装”在 IO monad 中，这意味着您*必须*使用`val <- func`语法来解包它。

*如果* `getArguments`是纯函数 ( `:: Int`)，那么 let 语法应该是正确的。

# rdf - RDF三元组的高效存储和查询

> ID：15309021
> 
> 赞同：4
> 
> 时间：2013-03-09T09:09:40.370
> 
> 标签：rdf, jena, triplestore

对于我的项目，我有一个关系数据库。我的关系数据库模式经常发生变化。所以最近我将所有关系数据库表数据存储到一个大 RDF 表中。表存储数据为三元组。它具有三列主题，谓词，对象。以下是 RDF 表的示例：

```
Subject->Predicate->Object 

1->name->Center

1->description->sample description

1->data->measure

2->data->parameter

2->relation->1 
```

我将表存储在 Oracle 中，目前使用 SQL 来查询数据库。但是，我的表增长得非常快，它有很多记录和 SQL 查询处理需要时间。我相信在不久的将来，表会增长得更多，查询处理效率会很低。所以，我关心的是效率。

您能否告诉我如何有效地存储 RDF 三元组，这样即使表非常大，查询数据库的时间也会更少。

我不太了解 RDF 数据库和查询语言。是否可以使 Oracle RDF 表高效？我看到人们在谈论 Apache Jena 工具和 SPARQL 语言。它会解决我的问题吗？如果我使用 Jena，那么我需要以 XML 格式存储我的 RDF 三元组还是我当前的格式可以？如何使用 Jena 工具？使用图形数据库而不是 Oracle DB 也会有帮助吗？如果是这样，那么选择哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:41:21.927

[http://jena.apache.org/](http://jena.apache.org/)

Jena 有两个适用于此的存储层：使用 SQL 数据库的 SDB 和原生存储 TDB。TDB 更快。SDB 使用它自己的模式来存储 RDF。

您还可以使用 Oracle 赢得的 RDf 存储（它具有 jena 接口）。

在任何这些方法中，您都不会为 RDf 存储 XML - 它是经过解析并使用的高效存储。

# android - Android Paint描边宽度定位

> ID：15309029
> 
> 赞同：36
> 
> 时间：2013-03-09T09:10:22.160
> 
> 标签：android, drawing, paint, stroke

鉴于此代码绘制一条线：

```
Paint p;

p = new Paint(Paint.ANTI_ALIAS_FLAG);
p.setColor(android.graphics.Color.WHITE);
p.setStyle(Paint.Style.FILL);
p.setStrokeWidth(21);

canvas.drawLine(0,50,100,50,p); 
```

有 3 种可能的笔画绘​​制策略：

*   内：线画在矩形（0,50,100,70）
*   中心：线画在矩形（0,40,100,60）
*   外：线画在矩形（0,30,100,50）

在实践中，默认行为似乎遵循中心策略。是否可以修改油漆以产生与其他策略之一相对应的结果？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-27T06:17:27.370

不，你不能；笔划始终居中。您可以控制的唯一事情是：

*   [中风斜接](http://developer.android.com/reference/android/graphics/Paint.html#getStrokeMiter())
*   [中风帽](http://developer.android.com/reference/android/graphics/Paint.html#getStrokeCap())
*   [中风连接](http://developer.android.com/reference/android/graphics/Paint.html#getStrokeJoin())
*   [笔画宽度](http://developer.android.com/reference/android/graphics/Paint.html#getStrokeWidth())

在定义绘图路径时，您必须手动考虑笔划宽度。

# magento - magento xml文件中类型和名称部分的含义是什么？

> ID：15309031
> 
> 赞同：1
> 
> 时间：2013-03-09T09:10:32.023
> 
> 标签：magento

我是 magento 的新手，我在模板 xml 文件中看到如下代码。

```
<reference name="top.menu">
    <block type="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml"/>
</reference> 
```

引用和块部分中的名称部分是什么意思？它们之间有什么区别吗？块部分的类型部分是什么意思？如果我想使用自己的类型和名称，我该怎么做？它们有什么用？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:35:42.737

名称是调用它以供以后使用的方式。您可以在 phtml 中调用您的块来呈现它：

```
echo $this->getChildHtml('yourname'); 
```

您也可以在引用中使用名称，如果您想在另一个布局中更改此块，您将引用此布局，这要归功于它的名称

```
<reference name="yourname">
      YOUR CHANGES HERE
</reference> 
```

正如您可能已经理解的那样，reference 是您的更改将影响的块的名称。例如，如果在我的结帐中我想更改名为“right”的块以添加一个内部块：

```
<checkout_cart_index>
     <reference name="right">
          <block type="core/template" name="yourname" template="yourtemplate.phtml" />
     </reference>
</checkout_cart_index> 
```

最后是类型，它是块文件的路径（模块目录下的 php 文件）。

示例 type="catalog/navigation" 指的是 app/code/core/Mage/ `Catalog`/Block/ `Navigation`.php 如果 Navigation.php 文件位于名为 Menu 的子文件夹中，则名称为 module/path_to_block 示例，您将拥有 type="catalog /menu_navigation"

# python - 从元组中删除空格

> ID：15309034
> 
> 赞同：3
> 
> 时间：2013-03-09T09:11:21.710
> 
> 标签：python, python-2.7, tuples, strip

我有这个清单：

```
[('', '', '654', 'Tom', '- Jerry', '', '', ''),
 ('', '', '', '', '', '756', 'X-Man -', 'Batman'), 
 ('453', 'Hulk - Superman', '', '', '', '', '', '')] 
```

如何删除不需要的（主要是外部）字符，使其保持如下状态：

```
[('654', 'Tom' , '- Jerry'), 
 ('756', 'X-man' -', Batman'),
 ('435','Hulk - Superman')] 
```

这是一个元组，所以我想我不能使用该`.strip()`方法

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T09:13:43.127

使用`filter()`；默认情况下，它会删除“空”（假）值：

```
[tuple(filter(None, tp)) for tp in inputlist] 
```

演示：

```
>>> [tuple(filter(None, tp)) for tp in inputlist]
[('654', 'Tom', '- Jerry'), ('756', 'X-Man -', 'Batman'), ('453', 'Hulk - Superman')] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T09:14:01.000

尝试这个：

```
>>> t = [('', '', '654', 'Tom', '- Jerry', '', '', ''),
         ('', '', '', '', '', '756', 'X-Man -', 'Batman'),
         ('453', 'Hulk - Superman', '', '', '', '', '', '')]

>>> [tuple(filter(None, i)) for i in t]
[('654', 'Tom', '- Jerry'), ('756', 'X-Man -', 'Batman'), ('453', 'Hulk - Superman')] 
```

`filter(None, i)`删除任何`False`-ish 值`i`，只留下非空字符串。

* * *

`0`, `False`,`None`和任何空容器（例如`[]`,`''`等）都是`False`-ish 值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T09:14:12.563

如果您想摆脱空字符串，我建议您使用过滤器：

```
In [4]: myList = [('', '', '654', 'Tom', '- Jerry', '', '', ''), ('', '', '', '', '', '756', 'X-Man -', 'Batman'), ('453', 'Hulk - Superman', '', '', '', '', '', '')]

In [5]: [tuple(itertools.ifilter(None, t)) for t in myList]
Out[5]: 
[('654', 'Tom', '- Jerry'),
 ('756', 'X-Man -', 'Batman'),
 ('453', 'Hulk - Superman')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:38:30.737

我在您的列表中尝试了以下代码，它正在工作：

```
list1 = [('', '', '654', 'Tom', '- Jerry', '', '', ''), ('', '', '', '', '', '756', 'X-Man -', 'Batman'), ('453', 'Hulk - Superman', '', '', '', '', '', '')]  ##you can add the elements as you want
tuple2 =()
for i in range(len(list1)):
   if type(list1[i]) == tuple:
       k = 0
       for e in list1[i]:
           if not e == ' ' and not e == '':
               tuple2 = tuple2 + (e,)
               k+=1

       list1[i] = tuple2

print list1 
```

它的作用是：

1.  它检查元素的类型是否为元组
2.  然后对于元组中的所有元素，如果是空格，则忽略它，否则将其添加到元组中
3.  最后，这被分配以代替先前的元组

这是我得到的输出：

```
>>> list1
[('654', 'Tom', '- Jerry'), ('654', 'Tom', '- Jerry', '756', 'X-Man -', 'Batman'), ('654', 'Tom', '- Jerry', '756', 'X-Man -', 'Batman', '453', 'Hulk - Superman')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T17:01:05.807

试试这个简短的东西...

```
lst = [tuple(i for i in tpl if i) for tpl in lst] 
```

# gwt - GWT - Datagrid：键盘单选，启用多选时

> ID：15309042
> 
> 赞同：4
> 
> 时间：2013-03-09T09:12:02.253
> 
> 标签：gwt, datagrid, gwt-celltable, gwt-2.5, gwt-2.4

当我启用键盘选择策略和多选时，`DataGrid`我遇到了这个问题。

**案例一**：鼠标键盘多选

当我想通过鼠标选择多行时，我按住`Ctrl`键或`Shift`键，这很好用。默认情况下通过键盘，此操作由 提供`spacebar`。当我想通过键盘组合`shift`键进行串行选择`spacebar`并成功时。

**案例2**：通过鼠标和键盘单选（*这是问题开始的地方*）

当我想通过鼠标选择单行时，我只需执行`left click`. 如果我不持有任何一个`ctrl`键`shift`并执行 a `left click`，即使选择了多行，它也会被取消选择，并且只有当前行被选中。这是预期的行为，我对此没有任何问题。

***但同样的事情是无法通过键盘实现的。***无法通过键盘选择单行。如果我按下`spacebar`一行被选中，如果我`spacebar`在没有键的其他行上再次`shift/ctrl`，它会被多选并且前一个选定的行不会被取消选择。

**我的问题是**：如何通过类似于鼠标的键盘实现单选？

**编辑**：我[在 gwt 问题中打开了这个问题](https://code.google.com/p/google-web-toolkit/issues/detail?id=8065)。我希望他们对此作出回应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T11:22:04.880

您必须[使用](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#setSelectionModel%28com.google.gwt.view.client.SelectionModel,%20com.google.gwt.view.client.CellPreviewEvent.Handler%29)自[定义选择事件管理器](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/DefaultSelectionEventManager.html#createCustomManager%28com.google.gwt.view.client.DefaultSelectionEventManager.EventTranslator%29)，其[翻译](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/DefaultSelectionEventManager.EventTranslator.html)器会为您想要的行为返回适当的值[`clearCurrentSelection`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/DefaultSelectionEventManager.EventTranslator.html#clearCurrentSelection%28com.google.gwt.view.client.CellPreviewEvent%29)。

[默认行为](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.1-rc1/user/src/com/google/gwt/view/client/DefaultSelectionEventManager.java#527)是始终从键盘添加/删除选择，并使用 control 或 meta 键切换是否在使用鼠标时清除当前选择。

# c - C-不正确范围内具有字符数组成员的结构

> ID：15309044
> 
> 赞同：-3
> 
> 时间：2013-03-09T09:12:07.193
> 
> 标签：c, arrays, struct, scope

我的范围有问题，需要帮助。

我有 2 个源文件和一个头文件：main.c、parser.c 和 parser.h

在 parser.h 中：

```
struct buffer{
    char member1[30];
    char member2[20];
    char member3[20];
    char member4[20];
}buf;
void parse(char* line); 
```

在 parser.c 中：

```
void parse(char* line){
    clear_buf(); //I clear my current buffer before running this function
    char temp[30];
// .... some code which copies from my line into my temporary buffer (temp)
// .... some code which decides which of my buffers I want to copy this to
strcpy(buf.member1,temp);
//Check the addresses- the struct buf is the same, the member is not:
//printf("buffer INSIDE function %p\n",&buf.member1);
//printf("STRUCT BUF, INSIDE function %p\n",&buf);
// at THIS point, when checking, buf.member1 does have the correct data copied into it
} 
```

在 main.c 中：

```
while(fgets(line,100,fp)!=NULL){
    /*parse the line into our internal buffer*/
    parse(line);
    //check addresses in main- buf.member1 is different, but the struct buf is the same
    //printf("STRUCT BUF, in main %p\n",&buf);
    //printf("buffer in main %p\n",&buf.member1);
    //rest of code...
    } 
```

问题是我的缓冲区中的值没有被保留......为什么不呢？

**请注意，这不是“按值调用”问题，因为我没有将结构作为参数传递给任何函数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:32:38.280

由于您未显示的代码中的错误，很可能不会保留值...我怀疑是否有人有足够的洞察力，可以在没有看到错误代码的情况下进行猜测。

因此，请改为使用一些调试提示：

*   只需使用调试器，单步执行代码，然后将缓冲区放到手表上，这样您就可以看到它的值何时发生变化（因为如果不保留它肯定必须更改）。

*   如果调试器有问题，请尝试`printf("buf at line %d: %p\n", __LINE__, &buf);`调试所有相关位置的语句，以确保您确实在同一个结构实例上运行。

*   如果调试器有问题，请尝试`printf("buf strings at line %d: '%30s' '%20s' '%20s' '%20s'\n", __LINE__, buf.member1, buf.member2, buf.member3, buf.member4);`调试所有相关位置的语句以查看值如何变化。

*   确保字符串确实是以 '\0' 结尾的。

*   当您进行字符串复制时，不要让目标缓冲区溢出，使其不可能以一种或另一种方式发生（注意：使用`strncpy`时要小心，不保证添加终止`'\n'`，因此`strncat`或`snprintf`可能更容易使用）。

# php - 如何在不刷新页面的情况下获得价值

> ID：15309045
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:12:07.910
> 
> 标签：php, mysql, wordpress

所有城市都显示在侧边栏中，当我点击一个城市时，我想要该城市的公司列表，所有城市都在侧边栏中，并且所有城市都来自基于 state_id 动态的表，

为了得到我写的所有城市。这段代码

```
<?php
 $s_name= $_POST["submit"];

 mysql_connect("localhost","root","");//database connection
    mysql_select_db("itcompanylist");

    $query  = "SELECT s_id FROM states WHERE `state_name` = '$s_name'";
$result1 = mysql_query($query);
$row = mysql_fetch_array($result1);
//echo $row['s_id'];

 $result2 = mysql_query("SELECT city_name FROM `city` WHERE s_id ='".$row['s_id']."'");

$i = 0;

echo "<form method='post' action='demo2.php'><table border='1' ><tr>";

while ($row = mysql_fetch_row($result2)){
 echo '<td><input type="submit" name="ok" value="'.$row['0'].'"></td>'; 

  if ($i++ == 2) 
  { 
     echo "</tr><tr>";
     $i=0;
  }
}

echo "</tr></table></form>";

?> 
```

-谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:20:58.090

为此，您需要使用 ajax。

要了解有关 ajax 的更多信息，请阅读。

[http://www.w3schools.com/ajax/default.ASP](http://www.w3schools.com/ajax/default.ASP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:32:25.530

在您的 html 页面中，将`onclick`您所在城市的事件设置为功能。XXX 是您要传递的 id：

```
<div onclick="onCity('XXX')">City A</div> 
```

在函数内部，使用 jquery 通过传递状态 ID 来获取状态信息。例如，使用输出显示在它的 div 上`id="myDiv"`：

```
<script>
function onCity(id){
    $.post('getstate.php', {state_id:id}, function(output) {
        $('#myDiv').html(output);
    });
}
</script> 
```

在您的 php 中，只需使用`$_POST`来获取 ID：

```
<?php
$stateID=$_POST['state_id'];
//using the state ID ...
//echo some values as the output
?> 
```

# iphone - 为 UILocalNotification 设置 fireDate

> ID：15309053
> 
> 赞同：0
> 
> 时间：2013-03-09T09:12:39.597
> 
> 标签：iphone, ios, ipad, uilocalnotification

我想将 UILocalNotification 添加到我的应用程序中。我想将 fireDate 设置为获取时间和日期，并在特定分钟后发出通知。例如，如果我给它的时间是 13:00，日期是 2013 年 3 月 10 日，我希望它在此时间之后 10 分钟、15 分钟、30 分钟、45 分钟或 1 小时通知用户。如何编码？

希望有人明白我的意思。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:35:47.200

这是我得到的最佳答案

```
- (void)scheduleNotificationWithItem:(ToDoItem *)item interval:(int)minutesBefore {
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:item.day];
[dateComps setMonth:item.month];
[dateComps setYear:item.year];
[dateComps setHour:item.hour];
[dateComps setMinute:item.minute];
NSDate *itemDate = [calendar dateFromComponents:dateComps];
[dateComps release];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;
localNotif.fireDate = [itemDate addTimeInterval:-(minutesBefore*60)];
localNotif.timeZone = [NSTimeZone defaultTimeZone];

localNotif.alertBody = [NSString stringWithFormat:NSLocalizedString(@"%@ in %i minutes.", nil),
     item.eventName, minutesBefore];
localNotif.alertAction = NSLocalizedString(@"View Details", nil);

localNotif.soundName = UILocalNotificationDefaultSoundName;
localNotif.applicationIconBadgeNumber = 1;

NSDictionary *infoDict = [NSDictionary dictionaryWithObject:item.eventName forKey:ToDoItemKey];
localNotif.userInfo = infoDict;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
[localNotif release];
} 
```

# jquery - 从来没有一个元素在 jquery 中采用特定的类

> ID：15309055
> 
> 赞同：2
> 
> 时间：2013-03-09T09:13:09.753
> 
> 标签：jquery, jquery-ui, jquery-selectors

我正在编写一个 jquery 代码，如果单击元素，该元素会给出一个类。现在我希望那个特定的元素永远不要使用特定的类。

概括：

```
$('element').*never take a specific class* 
```

HTML 代码：

```
<article class="wrapper ui-widget-content">
<div class="ui-widget-header">SSSSSS </div>
<ul id="selectable">
    <li class="ui-state-default"><span>HHHH</span> </li>
    <li class="ui-state-default"><span>CCCC</span></li>
    <li class="ui-state-default"><span>JJJJ SCRIPT</span></li>
    <li class="ui-state-default"><span>AAAA</span></li>
    <li class="ui-state-default"><span>XXX</span></li>
    <li class="ui-state-default"><span>MMMMM</span></li>
</ul>
</article> 
```

根据jquery代码，当我点击每个时`<li>`，这已经采用“ui-selected”类，但有时`<span>`标签也采用“ui-selected”类。我不想`<span>`上这门课：“ui-selected”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:38:16.310

```
$('li').click(function(){
    if($(this).find('span').hasClass('your_class_here'))
    $(this).find('span').removeClass('your_class_here');
}); 
```

每次单击 li 时检查您的课程是否已添加到您的跨度中。如果是，请将其删除。

# c++ - 无法调用 VBO 实现所需的函数...未声明错误

> ID：15309057
> 
> 赞同：1
> 
> 时间：2013-03-09T09:13:13.743
> 
> 标签：c++, opengl-es, blackberry-10

嗨，我想`VBO`在我的本机应用程序中使用`bb10 (C++)`. 我想调用像`glBindBufferARB`. 但它说

> `glBindBufferARB was not declared in this scope`

我正在使用opengl-es 1.1。我可以调用`glBindBuffer`函数。

**编辑：**我包括了这些头文件

```
#include <EGL/egl.h>
#include <GLES/gl.h>
#include <GLES/glext.h> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:07:34.413

`glBindBuffer`是一个标准的 OpenGL ES 1.1 函数，所以可以尝试不带`ARB`后缀调用它。

> 1.1.12 版（2008 年 4 月 24 日），第 2.9 节

```
void BindBuffer( enum target, uint buffer ); 
```

[GL 规范不使用`gl`前缀，但你必须]

# ckeditor - CKEDITOR 4.0 工具栏不加载所有给定项目

> ID：15309061
> 
> 赞同：0
> 
> 时间：2013-03-09T09:13:43.597
> 
> 标签：ckeditor, toolbar

我现在在工具栏上挣扎了几个小时。我使用这个配置：

```
CKEDITOR.editorConfig = function( config ) {
    // config.toolbar  = 'Full';
    config.language = 'nl';

    config.enterMode      = 'CKEDITOR.ENTER_BR';
    config.shiftEnterMode = 'CKEDITOR.ENTER_DIV';

    config.contentsCss = [
        '/bundles/mvcms/admin/css/bootstrap.css'
    ];

    // Remove plugin.
    config.removePlugins = 'elementspath';

    config.toolbar = [
        [ 'Source', '-', 'Bold', 'Italic' ]
    ];
}; 
```

他显示粗体和斜体，但源被隐藏......如果我实现完整工具栏，项目也被隐藏？我确定 ckeditor 使用该配置文件，如果我切换粗体和斜体，它也会在 de ckeditor 中使用。

怎么了？

*   版本：4.0.0
*   按类替换`ckeditor`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:12:22.267

也许您已经下载了不包含**sourcearea**插件的**基本包。**下载标准或完整包或将 sourcearea 插件添加到由[在线构建器构建](http://ckeditor.com/builder)的包中。

# android - eclipse模拟器中不显示键盘

> ID：15309067
> 
> 赞同：0
> 
> 时间：2013-03-09T09:14:32.763
> 
> 标签：android, eclipse, android-emulator

我是 android 新手，我已经下载了最新版本的 Eclipse，当我使用 edittext 时，键盘不可见，我该怎么办？

这是模拟器中的结果

![在此处输入图像描述](../Images/1798f3c663dd8d8eb2b6825389676dc6.png)

![在此处输入图像描述](../Images/993b28bac028784baa3b6168628d9db2.png)

这是模拟器的设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:41:17.850

只需在 AVD 配置中检查一次（转到->Windows->AVD 管理器->选择 AVD-->编辑）是否检查了硬件键盘。如果没有检查它就不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:32:43.903

看起来您正在模拟具有硬件键盘的设备。

您仍然可以使用系统键盘在模拟器上的 EditText 中键入数据以进行测试。

但是，如果您真的想在单击 EditText 时显示键盘，则需要模拟仅支持软键盘的设备。或者，转到 Eclipse 中的 AVD Manager 并选择您创建的虚拟设备。编辑 AVD 并从 AVD 的属性中删除硬件键盘。这样，您的模拟器将被配置为仅支持软键盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:19:14.053

如果您使用硬件键盘模拟设备，则不会弹出键盘。

转到 AVD，选择您的 AVD 名称并单击编辑。将出现编辑 Android 虚拟设备对话框。您可以验证这一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T14:16:48.627

Here, you have enabled the option for hardware keyboard, you can only see the keyboard if you enabled soft keyboard for you AVD, you can use you physical keyboard for interaction or edit your AVD

# multithreading - D中的多线程与for循环

> ID：15309071
> 
> 赞同：6
> 
> 时间：2013-03-09T09:14:54.580
> 
> 标签：multithreading, d, rust

我知道 Rust 可以使用轻量级线程运行循环。就像是：

```
use task::spawn;

fn main() {
  for 100.times {
    do spawn {
      io::println("Hello");
    }
  } 
```

我怎么能在 D 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T10:10:44.410

相关 API 文档：[std.parallelism](http://dlang.org/phobos/std_parallelism.html)

以下是完成示例的几种方法：

**并行 foreach，使用 TaskPool 的[并行](http://dlang.org/phobos/std_parallelism.html#.TaskPool.parallel)：**

```
foreach (i, val; taskPool.parallel(new int[50])) {
    writeln("Hello:", i);
} 
```

**[常规 foreach，使用put](http://dlang.org/phobos/std_parallelism.html#.TaskPool.put)将任务添加到任务池：**

```
foreach (i; 0 .. 50) {
    auto t = task!writeln("Hello:", i);
    taskPool.put(t);
} 
```

**[在新线程](http://dlang.org/phobos/std_parallelism.html#.task)而不是 TaskPool中执行每个任务：**

```
foreach (i; 0 .. 50) {
    auto t = task!writeln("Hello:", i);
    t.executeInNewThread();
} 
```

Rust 的运行时有一个内置的任务调度器，但是对于 D，这是作为一个库来实现的。话虽如此，第二个在功能方面是最接近的，最后一个在语法方面是最接近的（但它们是操作系统线程，而不是轻量级的）。

在 D 中，轻量级线程由程序员显式控制。A`TaskPool`类似于 Rust/Go 中的调度程序，但它为程序员提供了更细粒度的控制。这使它稍微冗长一些，但它也为您提供了`map`、`reduce`、`foreach`等的并行版本。这使得更容易有效地表示更复杂的算法。

运行每个示例应该会给您预期的结果：乱序写入。

**笔记：**

从文档：

> 此池中的工作线程是守护线程，这意味着在终止主线程之前无需调用 TaskPool.stop 或 TaskPool.finish。

第二个示例不会等到所有工作人员都完成后，因此在测试中您可能不会得到任何结果（当 main 完成时，所有剩余的任务都被杀死）。您可能需要通过调用[完成](http://dlang.org/phobos/std_parallelism.html#.TaskPool.finish)来阻止：

```
taskPool.finish(true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T10:16:27.907

D 没有针对轻量级线程的内置抽象。相反，您可以：

*   使用线程（参见[std.concurrency](http://dlang.org/phobos/std_concurrency.html)和[std.parallelism](http://dlang.org/phobos/std_parallelism.html)）
*   通过显式让步执行手动使用[纤](http://dlang.org/phobos/core_thread.html#.Fiber)程和多任务
*   使用诸如[Vibe.d 之](http://vibed.org/)类的库，它使用纤程实现异步 I/O，并在阻塞操作上隐式让步

# php - PHP从字符串中删除html标签

> ID：15309077
> 
> 赞同：11
> 
> 时间：2013-03-09T09:15:34.493
> 
> 标签：php, html

我有字符串：

```
<p justify;"="">Vers­lo cent­rai Lie­tu­vos ne­kil­no­ja­mo­jo turto plėt­ros aso­cia­ci­jos kon­kur­se  ...</p> 
```

并且想要删除标签

```
<p justify;"=""></p> 
```

我的代码：

```
$content = strip_tags($text, '<p>'); 
```

但我得到空字符串：`string(0) ""`，我做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T09:19:30.073

试着这样说

```
$content = strip_tags($text); 
```

或者你可以用这样的正则表达式来做到这一点：

```
$content = preg_replace('/<[^>]*>/', '', $text); 
```

通过这个`$content = strip_tags($text, '<p>');`，您允许`<p>`字符串中的标签。

有关更多信息，请参阅链接[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T09:18:54.053

由于 HTML 格式不正确，您可能需要编写自己的正则表达式来删除标签，或者在尝试删除标签之前清理 HTML。

您可以尝试这样做以删除“看起来像”标签的所有内容：

```
$str = preg_replace("/<.*?>/", " ", $str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T09:20:17.213

由于您的 HTML 格式不正确，您可以选择一种`preg_replace()`方法：

```
$text = '<p justify;"="">Vers­lo cent­rai Lie­tu­vos ne­kil­no­ja­mo­jo turto plėt­ros aso­cia­ci­jos kon­kur­se ... </p>';
$content = preg_replace('/<[^>]*>/', '', $text); 
var_dump($content);
// string(108) "Vers­lo cent­rai Lie­tu­vos ne­kil­no­ja­mo­jo turto plėt­ros aso­cia­ci­jos kon­kur­se ... " 
```

[键盘示例](http://codepad.org/7givAwHA)

在[strip_tags() 文档](http://php.net/manual/en/function.strip-tags.php)上它说：*因为 strip_tags() 实际上并不验证 HTML，部分或损坏的标签可能导致删除比预期更多的文本/数据。*

第二个参数也是 for `$allowable_tags`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-15T09:50:35.517

这将删除所有内容 - 标签、ascii、换行符，但纯文本：

```
strip_tags(preg_replace('/<[^>]*>/','',str_replace(array("&nbsp;","\n","\r"),"",html_entity_decode($YOUR_STRING,ENT_QUOTES,'UTF-8')))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-04T18:58:45.293

这将替换所有 html 标签， [https://regex101.com/r/jM9oS4/4](https://regex101.com/r/jM9oS4/4)

```
preg_replace('/<(|\/)(?!\?).*?(|\/)>/',$replacement,$string); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-15T21:45:31.647

从 PHP 7.4.0 开始，strip_tags() 可以选择接受带有允许标签的数组，

那么这个：

```
<?php

$html = '<div id="my-div"><p>text<strong><a href="#link"></a></strong></p></div>';

echo strip_tags($html, ['p', 'a']); //accept p and a tags 
```

返回这个：

```
<p>text<a href="#link"></a></p> 
```

请注意，仅删除了不允许的标签。

# iphone - 调整多个UILabel的位置

> ID：15309082
> 
> 赞同：0
> 
> 时间：2013-03-09T09:16:05.800
> 
> 标签：iphone, ios

我有一个有多个`UILabel`. 标签与`[myLabel sizeToFit];`一起设置`myLabel.numberOfLines = 2;`。这会导致该多行标签下方的所有标签重叠。有没有更聪明的方法来自动调整`UILabel`这个多行标签下方的所有位置，这样它们就不会重叠并相应地调整。我不能使用 layoutSubviews，因为我们的应用仍然需要支持 4.3。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:38:06.190

1.  不，它不会自动调整。你必须在代码的帮助下完成。
2.  由于您的大小`UILabel`是动态决定的。您必须相应地调整其位置`UILabel`。
3.  **您的问题的替代解决方案是，您可以使用`UITableView`.**
4.  所以即使你的文字增加了。将在另一个单元格中的其余部分`UILabels`将正确放置。
5.  因为您可以轻松地将属性设置为`cell.textLabel`它，所以创建`UITableView`.

# debugging - matlab如何进入调试模式？

> ID：15309085
> 
> 赞同：3
> 
> 时间：2013-03-09T09:17:04.807
> 
> 标签：debugging, matlab

我想使用“Step”、“Step In”、“Step Out”等在调试模式下运行我的程序。但是按钮或图标被遮蔽或禁用。那么，我怎样才能进入调试模式呢？请帮帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T11:39:19.623

您需要在某些时候中断执行才能对其进行调试。最简单的方法是`keyboard`在要调试的位置添加命令。到达该行时，执行将停止，您将能够检查变量并单步执行您的代码。您可能还想使用在`dbstop if error`遇到错误时进入调试模式的命令，允许您检查导致错误的状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T11:42:21.947

你有断点吗？
Matlab 中没有调试模式，你应该在某个地方有一个断点并简单地执行你的代码，执行将在断点处停止。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T12:28:14.733

MATLAB中**没有显式调试模式**。原因很简单，MATLAB 脚本是被解释的，而不是被编译的，而且当你的代码完成执行时，当前的数据对象会保存在你的文件中`workspace`，除非你明确地清除它。

因此，要*调试*MATLAB 程序，您只需运行您的代码（`breakpoints`根据需要使用）并在执行流程中断或终止时检查您的数据元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-17T19:05:43.683

在要开始单步执行脚本的任何行处设置断点。运行脚本，菜单将扩展为所有正常的调试步骤功能。效果很好，但不直观，缺乏进入第一行代码的能力。如果它是一个小脚本，只需将断点放在代码的第一行，如果你愿意，你可以单步执行整个事情

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T14:58:36.613

仅当正在运行的脚本到达其第一个断点时，才会出现（在编辑器选项卡上）步入、退出、运行到光标等标准调试类型选项。

要设置断点，请左键单击脚本编辑器窗口的左侧边距（就在行号的右侧（如果显示它们））。

按`F5`开始运行脚本，然后它将在第一个断点处停止，然后其他选项将变为可用。如果您将鼠标悬停在这些选项上，这些选项会有工具提示 - 例如`F10`执行下一行，...

# ruby - 从ruby中的初始化调用方法时未定义的方法

> ID：15309088
> 
> 赞同：2
> 
> 时间：2013-03-09T09:17:55.847
> 
> 标签：ruby

我有一个从另一个继承的类。在子级调用构造函数时，它正在调用父级，父级调用一个方法。对我来说，这应该工作得很好，但我得到了一个例外。红宝石代码如下所示：

```
class MyTestClass
    def initialize
        @foo = "hello world"
        puts "init parent"
        writeFoo
    end

    def writeFoo
        puts @foo + " from base"
    end
end

class MySubClass < MyTestClass
    def initialize
        puts "init sub"
        super
    end

    def writeFoo
        puts @foo + " from sub"
        super.writeFoo
    end
end

@foo = MySubClass.new 
```

运行该代码时，我得到一个未定义的方法异常，如下所示，但打印了正确的输出。有人可以解释为什么吗？

```
/Users/tj/dev/coursera/sml/hw6/test.rb:21:in `writeFoo': undefined method `writeFoo' for nil:NilClass (NoMethodError)
    from /Users/tj/dev/coursera/sml/hw6/test.rb:5:in `initialize'
    from /Users/tj/dev/coursera/sml/hw6/test.rb:16:in `initialize'
    from /Users/tj/dev/coursera/sml/hw6/test.rb:25:in `new'
    from /Users/tj/dev/coursera/sml/hw6/test.rb:25:in `<main>'
init sub
init parent
hello world from sub
hello world from base
[Finished in 0.1s with exit code 1] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T09:31:07.810

在 ruby`super`​​ 中，意味着调用当前方法的超类实现——与某些语言不同，它不是从基类调用任意方法的机制。

```
super.writeFoo 
```

调用当前方法（即`writeFoo`）的超类植入，然后在其结果上调用 writeFoo（因此出现错误）。

# javascript - 如何将具有回调函数的第三方 Javascript 插件添加到 Angular JS 应用程序

> ID：15309092
> 
> 赞同：2
> 
> 时间：2013-03-09T09:18:22.007
> 
> 标签：javascript, function, plugins, callback, angularjs

我必须将带有回调函数的第三方 JavaScript 插件添加到 Angular JS 应用程序。

JavaScript 插件提供了这样的功能：

```
thirdPartyFunction(parameter1, parameter2, parameter3, callback); 
```

在回调函数中，我得到插件计算的结果。

回调函数如下所示：

```
callback(resultobject)
{ ... } 
```

我想在我的角度应用程序中显示结果。如何在 $scope 中获取结果对象？到目前为止，无法重写 JavaScript 插件。

我的想法是提供像这样的角度服务，但我应该如何实现该服务？：

```
app.factory('myservice', function () {

    function callback(resultobject) {
    ???
    }

    return {

        getResult: function(parameter1, parameter2, parameter3) {
        thirdPartyFunction(parameter1, parameter2, parameter3, callback);
            return ???;
        }

    };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:31:18.170

服务在这里可能无济于事。看看`directives` [这里](http://docs.angularjs.org/guide/directive)的角度。根据插件在页面上的集成方式，您必须创建一个公开插件功能的指令。

指令创建自己的范围并可以广播\发出消息，这些消息可以引导到控制器，您可以在其中更新模型，插件回调并调用 $scope.apply() 然后刷新 UI

如果您可以直接在 Controller 中引用插件，那么在异步回调之后您唯一需要做的就是更新模型并调用 $scope.apply()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:23:13.547

首先，感谢您的回复。现在，这是我的解决方案，如何在需要时调用函数“thirdPartyFunction”。只需更改范围内的变量。

```
app.directive('somePlugin', function() {
return {
  scope: true,
  link: function(scope, element, attrs) {

    function callback(resultObject) {
       scope.model.prop1 = resultObject.propx;
       scope.model.state = "waiting";
       scope.$apply();
    }

    scope.$watch('model.state', function(newValue, oldValue) {
            if (newValue == "request") {
               thirdPartyFunction(scope.model.parameter1, scope.model.parameter2,    
               scope.model.parameter3, callback);
            }
        });

  }
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:18:27.233

假设您的控制器有一些您希望插件最终更新的模型：

```
$scope.model = { prop1: 'plugin will update this value' }; 
```

正如@Chandermani 已经建议的那样，定义一个指令。在链接函数中，定义回调函数。当回调被调用时，由于我们创建了闭包，它将可以访问指令的`scope`.

就指令范围而言，您有相当多的自由。您可以使用与父级相同的范围（这是指令默认执行的操作）并直接更新`scope.model.prop1`. 您可以创建一个新范围 ( `scope: true`) 并且仍然可以`scope.model.*`通过原型继承访问。您可以创建一个隔离范围 ( `scope: { ... }`) 并使用 '=' 语法将属性绑定到父范围。

```
app.directive('somePlugin', function() {
   return {
     scope: true,
     link: function(scope, element, attrs) {
        // define the callback here
        function callback(resultObject) {
           scope.model.prop1 = resultObject.propx;
           scope.$apply();  // let Angular know about the change we just made
        }
        // initialize the plugin here
        thirdPartyFunction(parameter1, parameter2, parameter3, callback);
        // do other directive stuff here
        // ...
     }
   }
}); 
```

# jquery - ng-repeat 渲染后更新 jquery 滚动条

> ID：15309094
> 
> 赞同：0
> 
> 时间：2013-03-09T09:18:48.050
> 
> 标签：jquery, angularjs, scrollbar

滚动条看不到 div 的高度，因为滚动条更新在子元素渲染之前应用。我如何查看编译了哪些元素？

我用手表来查看对象何时添加到数组中。它工作正常，但 tinyscrollab_update 看到空 div，因为 ng-repeat 尚未编译。

```
$scope.$watch('comments', function(){
    angular.element('#comment-list').tinyscrollbar_update('relative');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:20:10.667

我把它写在指令中。

```
app.directive('commentsDirective', function(){
   $scope.$watch('comments', function(){
      angular.element('#comment-list').tinyscrollbar_update('relative');
   });
}) 
```

# php - php activerecord 多对多

> ID：15309095
> 
> 赞同：2
> 
> 时间：2013-03-09T09:18:51.660
> 
> 标签：php, phpactiverecord

我有三个模型：

```
// student_id student_name
Student extends ActiveRecord\Model
{
    static $has_many = array(
        array('studentcourses')
    );
}

// course_id course_name
Course extends ActiveRecord\Model
{
    static $has_many = array(
        array('students')
    );
}

// course_id student_id
Studentcourse extends ActiveRecord\Model
{
    static $belongs_to = array(
        array('student')
    );
} 
```

因此，通过这样做，我将能够轻松地从这些表中检索数据：

```
$student = Student::find(1);

foreach ($student->studentcourses as $course)
{
    echo $course->name;
} 
```

但是我不想输入“studentcourses”，我想输入 $student->courses 来获取学生参加的所有课程，并输入 $course->students 来获取特定课程的学生列表。关系设置将如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-27T16:42:17.873

我认为你需要的是多对多的关系。在 PHP-AR 中进行设置：

```
// student_id student_name
Class Student extends ActiveRecord\Model
{
    static $has_many = array(
        array('courses', 'through' => 'studentcourses'),
        array('studentcourses')
    );
}

// course_id course_name
Class Course extends ActiveRecord\Model
{
    static $has_many = array(
        array('students', 'through' => 'studentcourses'),
        array('studentcourses')
    );
}

// course_id student_id
Class Studentcourse extends ActiveRecord\Model
{
    static $belongs_to = array(
        array('student'),
        array('course')
    );
} 
```

不要忘记*studentcourses*表必须包含：**id**（主键）、**student_id**和**course_id**。

# php - 很多ajax POST请求

> ID：15309098
> 
> 赞同：0
> 
> 时间：2013-03-09T09:19:16.953
> 
> 标签：php, ajax, architecture, nginx, memcached

我有一个有很多发布请求的站点（如果需要，我可以更改为 GET），现在 ajax 正在为每个用户每个打开的选项卡每秒发出 1 个请求。所以 20 个用户在线 = 20 个请求/秒 + 他们在访问网站不同页面时发出的正常请求。那是假设他们都只有 1 个选项卡。

我正在寻找更好的解决方案。我在 nginx 中看到了关于微缓存的好文章，但是当我尝试使用 nginx fastcgi_cache（到期时间为 1 秒）时，它给了我 1 秒的洞（返回：12:00:00、12:00:00、12:00:01、12 :00:01 等等）我可以在这个请求中有 10 到 80 组不同的参数。

我正在考虑在服务器上生成一个包含所有所需响应的静态文件 - 但它可以使文件大至 4mb，所以我认为这不是一个好主意。

有任何想法吗？想法？我可以搜索的关键字？;)

# iphone - 包含的笔尖中没有调用 didSelectRowAtIndexPath

> ID：15309099
> 
> 赞同：0
> 
> 时间：2013-03-09T09:19:19.313
> 
> 标签：iphone, objective-c, uitableview, didselectrowatindexpath

我有一个类说 clsBase，是所有其他类的基类。我有一个 Title 类，它在顶部包含 TitleBar。在 TitleBar nib 中有一个菜单按钮单击它，它显示一个`UITableView`. 这`UITableView`是在 TitleBar nib 文件中。

我想要的是将此 TitleBar nib 文件包含到我的所有其他 nib 文件中。假设我有一个扩展 clsBase 类的 UserProfile nib，并且在 clsBase 中有一个方法说`setTitleView`

```
- (void)setTitleView:(UIView*)view
{
    TitleBar = [[TitleView alloc]initWithNibName:@"TitleView" bundle:[NSBundle mainBundle]];

    [TitleBar.view setFrame:CGRectMake(0, 0, view.frame.size.width, 44)];
    TitleBar.Target = self;
    TitleBar.Action = @selector(onButtonClicked:);

    [view addSubview:TitleBar.view];
} 
```

在`viewDidLoad`我的 UserProfile 类中，我调用父 (clsBase) 类方法`setTitleView`，以便它包含 TitleBar。

我的问题是我`didSelectRowAtIndexPath`在 TitleBar 类中重写了。当我单击一个单元格`didSelectRowAtIndexPath`方法时，从我的 UserProfile 笔尖没有被调用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:56:44.423

我遇到了同样的问题，但是通过将表格视图的允许选择设置为 true 来解决这个问题。

```
[YourTableView setAllowsSelection:TRUE]; 
```

# perl - 为什么这个 Mojolicious websockets 示例不起作用？

> ID：15309102
> 
> 赞同：2
> 
> 时间：2013-03-09T09:19:33.710
> 
> 标签：perl, websocket, mojolicious

我已经尝试了一些 websockets 简单示例来尝试它们，但没有人适合我。这是一个示例[WebSocket Mojolicious/DBI 示例](http://blogs.perl.org/users/joel_berger/2012/10/a-websocket-mojoliciousdbi-example.html)

我在端口 5000 上使用 plackup 运行它，一切正常。但是当尝试添加一些我在终端上看到的记录时：

```
[Sat Mar  9 11:05:57 2013] [debug] GET /insert (Anonymojo).
[Sat Mar  9 11:05:57 2013] [debug] Template "not_found.development.html.ep" not found.
[Sat Mar  9 11:05:57 2013] [debug] Template "not_found.html.ep" not found.
[Sat Mar  9 11:05:57 2013] [debug] Rendering cached inline template.
[Sat Mar  9 11:05:57 2013] [debug] Rendering cached inline template.
[Sat Mar  9 11:05:57 2013] [debug] 404 Not Found (0.012583s, 79.472/s).
127.0.0.1 - - [09/Mar/2013:11:05:57 +0200] "GET /insert HTTP/1.1" 404 6440 "-" "-" 
```

当我在“/insert”上定位浏览器时，我得到了几乎相同的（除了 UserAgent 部分）结果。

在示例脚本中定义了 websockets 路由，但它永远不会被命中：

```
# setup websocket message handler
websocket '/insert' => sub { 
```

那么，这里可能有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T22:20:14.650

Websockets（以及 IIRC 的其他实时功能）仅适用于 Mojolicious 服务器：daemon、morbo 和 hypnotoad。你的例子在说 morbo 下有效吗？

# php - 匹配美元符号和后面的第一个字母

> ID：15309104
> 
> 赞同：-2
> 
> 时间：2013-03-09T09:19:41.420
> 
> 标签：php, regex

我有一些奇怪的数据库条目，看起来像这样：

```
$sSomeTextHere$uTextAgain$pText 
```

我想使用正则表达式删除 $ 符号和该符号后面的一个字母。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:22:42.057

你可以使用这个：

```
echo preg_replace('/\$\w/', '', $string) 
```

# sql - SQL Server 检查列数据中的重复

> ID：15309106
> 
> 赞同：1
> 
> 时间：2013-03-09T09:19:46.847
> 
> 标签：sql, sql-server-2005, repeat

为了将其导入我们的系统，我获得了一个巨大的 Excel 数据。我将它导入到 SQL 表中，以便进行所需的数据转换。我遇到了很多愚蠢的问题。我找不到解决方案的最新问题如下：

在 CompanyName 中，很多时候我的名称重复了两次（并非总是如此）：

```
[CompanyName]
INTERDYN SA   INTERDYN SA
EARTH TOUR   EARTH TOUR
SOUNDLIGHTS JAJ CYTER 
```

如您所见，没有模式。是否有一种巧妙的方法可以发现重复项并删除孪生公司名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:46:11.707

只需比较字符串的第一部分和最后一部分并检查中间字符是否为空格即可。

```
CREATE TABLE Companies
( 
   id int identity
 , CompanyName varchar(50)
)

INSERT INTO Companies (CompanyName) 
VALUES ('test') 
     , ('test test') 
     , ('testtest') 
     , ('testz test')

-- Just query the corrected list
SELECT CASE WHEN substring(CompanyName, LEN(CompanyName)/2+1, 1) = ' ' and substring(CompanyName, 1, LEN(CompanyName)/2) = substring(CompanyName, LEN(CompanyName)/2+2, LEN(CompanyName)) 
            THEN substring(CompanyName, 1, LEN(CompanyName)/2) 
            ELSE CompanyName 
       END
FROM Companies

-- update the incorrect values
UPDATE Companies
   SET CompanyName = substring(CompanyName, 1, LEN(CompanyName)/2) 
 WHERE substring(CompanyName, LEN(CompanyName)/2+1, 1) = ' ' 
   AND substring(CompanyName, 1, LEN(CompanyName)/2) = substring(CompanyName, LEN(CompanyName)/2+2, LEN(CompanyName))

select * from Companies

drop table Companies 
```

# php - @dl php 导致错误

> ID：15309111
> 
> 赞同：-2
> 
> 时间：2013-03-09T09:20:19.420
> 
> 标签：php, php-extension

我网站的一个页面卡在这些代码中：

```
if (@dl("gmp.so")) { 
    echo '**';
    $loaded = true;
    break;
}
else
    echo '%%'; 
```

没有回声发生。看来问题是因为 @dl 。php5-gmp 安装在服务器上。

我该如何调试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:29:52.710

'@' 禁用 PHP 通知/警告/错误。删除'@'，PHP 会告诉你哪里出了问题。

来自 php.net

```
This function has been removed from some SAPIs in PHP 5.3. 
```

# javascript - 使用 .data() 在 Jquery 中添加任意数据

> ID：15309112
> 
> 赞同：0
> 
> 时间：2013-03-09T09:20:37.313
> 
> 标签：javascript, jquery, performance, security, jquery-data

我在这样做的同时尝试添加任意数据，但我心中有以下疑问：

1.  我可以添加多少数据，有什么限制吗？

2.  它是否会影响性能/执行速度？

3.  那么数据的安全性呢，它安全吗？

4.  这些存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:57:39.940

由于您没有提供任何带有您想使用的属性的真实或示例标记，所以让我们简单地谈谈[`HTML5's data-`-prefixed 属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)：它们是什么，它们*为什么*存在，以及它们*不*存在什么。这应该对消除你的焦虑大有帮助。

首先，*它们是什么*？W3C 规范很明确：

**3.2.3.9 使用 data-* 属性嵌入自定义不可见数据**

> ... 没有名称空间中的属性，其名称以字符串“data-”开头 ...**旨在**存储**自定义数据**...**没有更合适的属性或元素**。

您可能会注意到，它还着重说明*了它们不打算做什么*。在我们开始讨论之前，以及为它们的适当实现而设计的机制之前，让我们简单地退后一步，考虑一下之前`data-`的情况。

* * *

如果您[熟悉 HTML](http://www.w3.org/TR/html4/index/attributes.html)，就会知道[定义了所有元素都继承的核心（全局）属性](http://www.w3.org/html/wg/drafts/html/master/dom.html#global-attributes)（`id`、`class`等）。`src`由于不同的原因（ ，`accesskey`？等） ，有些属性在组之间浮动。有专门的事件属性，一些相当具体或已弃用或其他古怪的属性。

甚至还有微[语法](http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#common-microsyntaxes)和[微格式](http://microformats.org/wiki/html5http://www.w3.org/html/wg/drafts/html/master/dom.html#global-attributes)。不过，让我们集中在这里；前者是关于表达性属性语法（`<input type="email" required ...`），后者禁止*包含*属性`data-`（由于结构化属性特异性规则）。

你应该得到一个想法，最终，有人把这些东西想通了。以上所有内容都与向浏览器有目的地（如果可能的话）*描述此标记内容的方式有关。*它不是随意存在的。它既不是一成不变的（HTML5 现在已经存在），也不等同于XHTML-doctype 网页声称的那种*无 XML 名称空间的流氓行为。*

如果您从未翻阅过一个，请阅读 HTML5 规范。有趣的是，一旦你掌握了阅读的窍门，它就会变得生硬和摇摆不定，不符合人性。

* * *

回去的路上，我们现在得到了这种奇怪`data-*`的语法，加上一个笨拙的散文描绘了一些`dataset`和脚本野兽，这将使这一切变得美妙。

所以你（自然地）认为这是为了什么，我能用它做什么？好问题。

有两个答案，你应该做什么，以及你应该不惜一切代价避免什么。前者将让您在菊花林立的芬芳花园中嬉戏；后者，别西卜本人可能会寻找你的灵魂。（或者至少想知道你在做什么。）

您应该做的是`data-`解决需要将某种数据与页面上的一个或多个元素相关联的情况。不是任性的；不要被地狱的烧烤火焰所诱惑。当您*需要*这些数据并且您发现自己可能会诉诸以下方法时：

```
var = '<?=json_encode($restaurants)?>'; // This is so sad, really. 
```

或者，上帝帮助我们：

```
<a id="client-005" rel="200907,$5000;200908:$3500;oh,why" ... 
```

得到它？该元素中“客户”的销售数据（我们认为……希望……）。异步抓取数据已经消除了对这些古怪方法的一些需求。此外，一些聪明的人发现你可以：

```
<script type="text/x-data-csv">
Client, Year, Sales
Bill's Salon, 200904, $5300
... 
```

漂亮。对于数据球，一个庞大的 d3.js 立体数据可视化，这绝对足够好。此外，它***不太***适合`data-`属性。但这可能是：

```
<select name="service_tech">
  <option data-name="Bobby Jones" 
          data-email="bjones@job.com" 
          data-phone="xxx.xxx.xxxx"
          data-title="Diesel Mechanic"
          data-days-available="MON-THU"
          data-shifts-available="2ND3RD"
          value="EMP00345">Bobby Jones</option> 
```

或者：

```
<section id="quiz"
         class="quiz stage block"
         data-quiz-hard-end="2013-03-10 00:00:00"
         data-question-total="10"
         data-question-current="6"
         data-session-keep-alive="30 minutes">
  <article id="question"
           class="single view deadline warning"
           data-question-save-state="true"
           data-question-record-incorrect="false"
           data-question-incorrect="block with hint"
    <ol id="quiz-possibles"
        class="block multiples unanswered"
        data-answer-timeout="60 seconds"
        data-answer-time-expiry-action="replace in-place random fresh"
        data-answer-timer-display="top right #quez.frame"
        data-answer-hint-pop="elapse 30 seconds"
        data-answer-hint="The square of the hypotenuse is left of right to this."> 
```

棒极了。想一想，在不通过一千个查询导致疯狂、沮丧或 AJAX 死亡的情况下嵌入这样的临时相关数据块会有多麻烦？

想象一下该配置与[Select2](http://ivaynberg.github.com/select2/)`$.change()`以及对这些属性的自定义搜索相结合。现在我们用煤气做饭。

什么`data-`属性*不是*更抽象，因为从本质上讲，它都是关于*某种*糟糕的实现。所以考虑：

```
<body data-wednesday-salutation="Hello" ...

<img data-class-name="dogs"
     data-filename="rover.png" 
     data-url="/some/path/rover.png"
     data-dog-bark="yes" ...

<p data-groovy-font="blue dog demi mono" ...

<em data-what-is="today" data-answer="Monday!" ... 
```

这有什么意义吗？当然，还有更微妙的方式可以让愚蠢或胡思乱想地蠕虫或闯入`data-`误用和盗用，但它们或多或少都归结为上述相同的问题：

1.  这可能完全没用。另外，你知道它会在一周中的每一天结束。
2.  什么？行。`class`已经存在，`filename`应该是`src`价值的一部分`data-url`，以及关于狗吠的任何东西。
3.  我敢肯定这对某人来说意味着什么。（*如果这不是一个人为的例子。*）
4.  荒谬, 正方形.

我很难给出一组明确的无知和值得大张旗鼓的不当行为。我能想到的最糟糕的事情就是去*快乐*`data-`和死记硬背。*单*。*元素*。在页面上。与. 不只是可怕的健谈和不熟练的人浪费带宽。***`data-`***

 **** * *

那么，在这之后，该怎么办？这完全取决于你如何处理它。考虑：

1.  **它并不是针对所有远程数据问题的。**至少按照*规范*（想象一下这里的手指摇摆），如果它适合另一个属性，它是`data-`不可行的。如果它是围绕由专家或系统发布的可广泛访问和标准化的格式构建的，[那么它就是一种*微格式*](http://microformats.org/wiki/what-are-microformats)，因此不再是`data-`-land。

例如：

```
<div class="vcard">
    <span class="fn">Sally Ride</span>
    (<span class="n">
        <span class="honorific-prefix">Dr.</span>
        <span class="given-name">Sally</span>
        <abbr class="additional-name">K.</abbr>
        <span class="family-name">Ride</span>
        <span class="honorific-suffix">Ph.D.</span></span>),
    <span class="nickname">sallykride</span> (IRC)
    <div class="org">Sally Ride Science</div>
    <img class="photo" src="http://example.com/sk.jpg"/>
    <a class="url" href="http://sally.example.com">w</a>,
    <a class="email" href="mailto:sally@example.com">e</a>
    <div class="tel">+1.818.555.1212</div>
    <div class="adr">
        <div class="street-address">123 Main st.</div>
        <span class="locality">Los Angeles</span>,
        <abbr class="region" title="California">CA</abbr>,
        <span class="postal-code">91316</span>
        <div class="country-name">U.S.A</div></div>
    <time class="bday">1951-05-26</time> birthday
    <div class="category">physicist</div>
    <div class="note">1st American woman in space.</div>
</div> 
```

那是一个人的[微格式`hcard`](http://microformats.org/wiki/hcard)描述。它可以而且可能通常不那么冗长，但这说明了一点。走近一看，注意类和缺少`data-`属性怎么用？

尽管`data-`以一种有意义的方式进行操作是一种赋权，但不要使用散弹枪的方法在每一个棉花采摘的标记中添加任何和所有可能——可能不是——数据片段到您的内容中。它没有，也不应该，必须是这样。抵制这种冲动。

1.  明智地使用它。当您遇到某种非常广泛的列表时（例如一个跨度为 20 年的中型公司的客户列表），不要将所有这些都推送到页面中并期望所有浏览器都能处理 20,000 行`data-`客户细节`aside`. 换句话说，它不是一个全面的数据存储。必要或适当时，使用 AJAX，或往返，或诸如此类。

2.  具有现代硬件的现代浏览器和现代浏览器（是的，甚至 IE8，IE7 都没有）可以相当轻松地处理大量标记（尤其是 Chrome）。但是，这并不意味着您不应该找到最小化该大小的方法或制定远离 3mb HTML 文档的策略。

3.  如果您过度使用和过度使用它，您可能会发现自己因属性太多而无法轻松管理而头疼。`data-`有目的的使用。同样，明智的管理和对所需内容的明确关注应该可以帮助您管理任何用看不见的字节可能未使用（或无法访问）的数据字节来膨胀内容的冲动。

我给你留下了这个：

> **一句警告**
> 
> 随着数据属性的使用越来越广泛，***命名约定发生冲突的可能性也越来越大***。如果您使用一个难以想象的属性名称，例如 data-height，那么您很可能最终会遇到使用相同属性名称的库或插件。***多个脚本获取和设置公共数据属性可能会导致混乱。***为了避免这种情况，我鼓励人们选择一个标准字符串（可能是站点/插件名称）作为所有*数据*属性的前缀——例如 *data-html5doctor-height*或*data-my-plugin-height*。

[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:29:46.063

您可以使用 jquery[数据将数据存储到任何元素](http://api.jquery.com/jQuery.data/)

在这里演示：http: [//jsfiddle.net/namkha87/TGxdH/](http://jsfiddle.net/namkha87/TGxdH/)

```
$('h1').data('a', "abc"); 
```

您可以存储任何数据类型（对象、数字、字符串...），当然，存储太多会损害性能，但这取决于客户端计算机。

[使用data](http://api.jquery.com/jQuery.data/)方法存储数据是没有问题的，事实上，大多数jquery插件都使用[数据](http://api.jquery.com/jQuery.data/)来存储它们的数据（状态，配置......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:39:52.593

关于问题 #4 和 #5：几乎没有安全性，因为任何其他脚本以及用户可以查看和操作数据。并且数据属性不会存储在任何地方，因为它可以在页面刷新或任何情况下幸存下来。***

# amazon-s3 - Amazon CloudFront 不遵守我的 S3 网站存储桶的 index.html 规则

> ID：15309113
> 
> 赞同：75
> 
> 时间：2013-03-09T09:20:47.997
> 
> 标签：amazon-s3, amazon-cloudfront

我正在使用静态网站托管选项在 Amazon S3 上托管一个静态网站，这样 S3 将呈现一个文件夹，而无需让我明确指向我的 index.html 文件。

例如，这里是我的 S3 存储桶中一个页面的直接链接：http: [//new.rdegges.com.s3-website-us-east-1.amazonaws.com/category/2009/](http://new.rdegges.com.s3-website-us-east-1.amazonaws.com/category/2009/)如您所见，当如果您访问该 URL，Amazon S3 会自动在该目录中呈现 index.html 文件，从而让我拥有干净的 URL。

这一切都在 S3 上运行良好。我遇到的问题是让 Amazon Cloudfront 也能正确处理这种行为。当我创建一个将 S3 存储桶指定为源的 Cloudfront Distribution 并告诉它使用“index.html”作为根时，S3 的 index.html 行为刚刚停止工作。

例如，这是我在 Cloudfront 上的相同 URL：http: [//d1mj00c6pby3gc.cloudfront.net/category/2009/](http://d1mj00c6pby3gc.cloudfront.net/category/2009/)

不幸的是，上面的 URL 不起作用，但如果我手动指定索引文件，它会起作用，例如：[http ://d1mj00c6pby3gc.cloudfront.net/category/2009/index.html](http://d1mj00c6pby3gc.cloudfront.net/category/2009/index.html)

我的问题是：我需要如何配置 Cloudfront 以使其尊重我网站的 S3 存储桶设置？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-20T16:04:54.940

S3 网站功能可以与 Amazon CloudFront 结合使用。但是，S3 网站使用与常规 S3 存储桶不同的域名。在这种情况下，您需要将`Origin Domain Name`CloudFront 分配的源配置的 设置为`new.rdegges.com.s3-website-us-east-1.amazonaws.com`。

您可以从 S3 上的静态网站托管面板获取此 URL（端点）：

![S3 上的静态网站托管面板](../Images/20c1eb1b7d688e7e3e46c98a3c6d39a4.png)

一旦 CloudFront 指向 S3 网站域名，S3 网站功能应该可以工作。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-06-05T22:28:15.223

我想在接受的答案中添加一些内容。

首先，确保您`Default Root Object`的云前端有一个。如[文档](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DefaultRootObject.html)中所述，这不适用于`subdirectories`.

在设置新的 cloudfront 发行版时，它会让您选择您的存储桶`bucket-name.s3.amazonaws.com`。请注意，该区域未在 URL 中指定。您需要做的是从 s3 中获取静态站点 url 并将其用作`origin url`（该区域将在那里）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-20T18:25:39.813

这可能是游戏的后期，但请查看[Lambda@Edge](https://docs.aws.amazon.com/lambda/latest/dg/lambda-edge.html)。您可以拦截不带扩展名的*Origin 请求*，并将它们指向文件夹中的 index.html 文档。这些结果会被缓存，因此 Lambda 仅在收到新请求时才会执行。

# c++ - 在 QML 或 C++、BB10 上设计 UI

> ID：15309115
> 
> 赞同：2
> 
> 时间：2013-03-09T09:21:16.937
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我需要编写一个 BB-10 应用程序。该应用程序可能涉及到 UI、动态页面等。我正在考虑用 C++ 编写应用程序逻辑（数据模型等）。我应该使用 QML 进行 UI 设计吗？C++ 和 QML 之间的集成有多好和多灵活？我会不会遇到一些问题？我的 UI 可能包含许多 QML 页面（或对话框，显示在导航窗格等中），当用户单击 QML 中的某些操作时，我可能想要调用一些 C++ 代码或导航到其他 QML 页面等。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:59:08.763

我对移动开发一无所知，但 QML 很好，应该使接口更易于维护、修改和移植到其他设备。

QML 和 C++ 的集成很容易，只要你用好 Qt 框架，使用 QObjects`Q_PROPERTY`和`Q_INVOKABLE`方法……真的很容易。

编辑：不过，我必须补充一点，我发现从 C++ 访问 QML 对象并不像相反那么容易。这是因为 QML 将对象组织在几个数据类型的层次结构中，并且您必须动态地发现子节点，使用`findChild`或检查`objectName`.

无论如何，由于 QML 允许绑定属性，您应该能够使用您的数据创建一些 C++ 类，并在 UI 上轻松访问它们；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:13:00.647

当您需要使用 C++ 控制应用程序时，我也会遇到这种情况，而 qml 并不多。最好的方法是通过 NavigationPane 继承您的类，并将逻辑添加到您的第一页，`QmlDocument::create()`如果您在导航使用表旁边有一些页面并添加一些方法此类，`Q_INVOKABLE`并在您创建新页面时通过 setContext 此类`QmlDocument::create()`来访问这些方法.. 最后永远不要忘记添加或处理`OnTrasitionEnded(Page*)`信号以删除页面并释放内存

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:47:45.120

简短回答：C++/QML 集成非常好。有时可能非常冗长，但在 C++ 中没有什么是您不能做的。

即使用 C++ 做所有事情都快一点点。黑莓正在推动用 QML/Javascript 编写所有 UI 工作流程的想法。

优点是业务逻辑和应用程序流之间的明确分离。另一个优点是 QML 编写起来更短，并且希望可以维护。不要忘记您可以在 C++ 中创建新的 QML 对象。

```
onTriggered: {
    var item = dataModel.data(indexPath);
    if (item.count > 0) {
        appLogic.updateFeed(item.id);
        navPane.push(resultPage);
    }
} 
```

# ios - XCode 4.6 组织者不象征我的应用程序崩溃堆栈跟踪

> ID：15309116
> 
> 赞同：5
> 
> 时间：2013-03-09T09:21:23.450
> 
> 标签：ios, xcode, crash, organizer, symbolicate

自从我在 XCode 中使用 symbolicate 已经有一段时间了，它曾经可以工作。今天当我尝试这个...

1.  归档我的应用程序。
2.  从 XCode 在我的设备上安装应用程序。（只需连接设备并在发布模式下运行应用程序）。
3.  从 Xcode 停止应用程序。
4.  在我的设备（连接到 Mac）上运行应用程序，这当然崩溃了。
5.  现在，当我打开管理器并转到设备日志时，它会显示一个新的崩溃日志文件。
6.  但它无法象征我的应用程序的符号。所有苹果图书馆的东西都象征性很好。

我搜索了整个网络，似乎没有任何工作。

编辑：在构建设置中，如果我禁用“复制期间剥离调试符号”，即使是发布版本，一切正常。但我猜 Xcode 应该能够使用 dSYM 文件进行符号化。我不想分发带有调试符号的应用程序。

提前致谢。

![](../Images/35eca9d96fcedb3741b7edecc27c82d4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:01:34.900

本文将帮助找出问题所在：http: [//support.hockeyapp.net/kb/how-tos-faq/how-to-solve-symbolication-problems](http://support.hockeyapp.net/kb/how-tos-faq/how-to-solve-symbolication-problems)

既然你说你`run in release mode`，那么设备上运行的版本**不是**你存档的那个！因此，如果目录中已有可用的发布版本`DerivedData`，它将采用该版本。否则它将创建一个新版本并安装该版本。

现在有两种可能导致符号化不起作用：

1.  您稍后将进行另一个版本构建，因此之前的构建和 dSYM 会被覆盖（请参阅上面链接中的说明）
2.  Spotlight 没有找到崩溃报告中写有 UUID 的 dSYM 和应用程序二进制文件（请参阅上面链接中的说明以验证这一点）

更新：关于剥离符号的注意事项：当您不剥离已编辑帖子中提到的符号时，符号化已经在设备上完成。但当然你会错过行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:01:01.570

按照上述解决方案中 Kerni 给出的链接，我发现它是 Spotlight，它无法使用崩溃日志文件的 UUID 找到 dSYM 文件。

运行以下命令...

导入。

...在产品文件夹（MyApp1.app 和 myApp.app.dSYM 所在的文件夹）中，问题已解决。

我不确定为什么每次构建应用程序时都必须运行它，我的 mac 出于某种原因没有自动运行它。但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T02:46:50.210

我已经在带有空格的目录上安装了 Xcode。我通过删除目录的空格并运行 xcode-select 来修复它。（mdimport 对我不起作用）

```
 sudo xcode-select -switch <myxcodedir> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T16:02:18.123

我有同样的问题。

在 Xcode 中的项目 Build Settings 中，在 DEBUG_INFORMATION_FORMAT 下，设置`DWARF with dSYM File`为 Debug 配置。Xcode 默认为`DWARF`.

# asp.net - 将水晶报表部署到服务器

> ID：15309117
> 
> 赞同：1
> 
> 时间：2013-03-09T09:21:26.050
> 
> 标签：asp.net, deployment, crystal-reports, assemblies

嗨，我需要将带有水晶报告的 asp.net 项目部署到我的服务器。我尝试从[http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_3.exe](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_3.exe)下载文件。

但是现在我在安装文件时遇到错误 **“您必须已经安装了 VS 2010 才能继续安装”**

这是什么意思？这意味着我应该将 Visual Studio 安装到我的部署服务器？

这是我在运行我的 asp.net 项目时遇到的错误

```
 arser Error Message: 
Could not load file or assembly 'System.Design, Version=4.0.0.0, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.

Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

Could not load file or assembly 'CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified. 
```

所有与**crystaldecision**相关的程序集都会抛出上述错误。有人有解决方案吗？我使用的是window server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:46:33.850

您尝试安装 cyrstal report 的开发人员版本，而您只需要服务器上的运行时版本。

[下载链接](http://service.sap.com/sap/bc/bsp/spn/bobj_download/main.htm)

您还可以在*哪里可以找到所需的运行时下找到下载链接？*在[这个页面上](http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2011/06/28/crystal-reports-for-visual-studio-2010--deployment)。

# python - 在 Django 中使用另一个模型作为外键

> ID：15309119
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:21:38.193
> 
> 标签：python, django, models

所以我的问题是我目前正在创建一个 Django 站点来跟踪我当地社区各个场所的事件。我已经设置了网站的所有基础知识，但是我已经到了拥有单独的*场地*和*活动*模型的地步。

现在我想要它，所以当您选择添加事件时，您会选择当前托管它的场所，因此我需要以某种方式链接模型。我对 Django 很陌生，所以去谷歌搜索答案，但结果一片空白。

我目前的模型看起来像：

**事件：**

```
from django.db import models

class Event(models.Model):
    venue = models.CharField(max_length=200)
    date = models.CharField(max_length=200) 
```

**场地：**

```
from django.db import models

class Venue(models.Model):
    address1 = models.CharField(max_length=200)
    address2 = models.CharField(max_length=200)
    postcode = models.CharField(max_length=15)
    email = models.CharField(max_length=200)
    tel = models.CharField(max_length = 15) 
```

所以理想情况下，我想从 Event 获取场地以某种方式链接到 Venues 模型，只是想知道我将如何去做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:27:23.500

尝试

```
class Event(models.Model):
    venue = models.ForeignKey(Venue) 
```

# highcharts - 如何为 highstock 设置 rangeSelector

> ID：15309124
> 
> 赞同：5
> 
> 时间：2013-03-09T09:22:07.473
> 
> 标签：highcharts, highstock

我正在使用高库存。如何设置图表的 rangeSelector？我用过：

```
chart.rangeSelector({ selected: 5 });   * 
```

但它没有用。

我知道像这个例子一样设置它：http: [//jsfiddle.net/Pffxt/2/](http://jsfiddle.net/Pffxt/2/) 但我创建一次图表然后添加系列。当我创建图表（如示例）并添加系列时，rangeSelector 不起作用。我想我必须像 *** 一样使用

请帮我！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T14:07:33.587

而不是 using `.rangeSelector({settings})`，而是使用以下`.clickButton`功能：

```
chart.rangeSelector.clickButton(0,{type: 'month', count: 1},true); 
```

但是，据我所知，此功能似乎有些奇怪且未记录。

它接受以下参数：

```
* @param {Number} i The index of the button
* @param {Object} rangeOptions
* @param {Boolean} redraw 
```

`redraw`默认为 true，并且`i`只会在视觉上选择一个按钮（除此之外，它似乎什么都不做）。面包和黄油似乎在 rangeOptions 中，这是一个具有类型和计数的对象。例如，在上面的示例中，它选择最近的 1 个月。其他可用选项包括：

```
* millisecond
* second
* minute
* hour
* day
* week
* month
* ytd
* year
* all 
```

但是，请注意，您不能`.destroy();`使用范围选择器并且仍然可以使用它，您可能需要做一些黑客攻击才能使其正常工作。

这是一个说明它的 JSFiddle：http: [//jsfiddle.net/HFPr2/](http://jsfiddle.net/HFPr2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T13:24:34.557

您不必为 rangeSelector 提供要使用的选项。您可以简单地调用：

```
chart.rangeSelector.clickButton(0, true); 
```

因此，第一个按钮将在使用其当前选项时被单击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:09:21.937

如果您销毁范围选择器对象，则无法显示不存在的对象。因此，如果您只想显示 rangeselector，只需通过[http://api.highcharts.com/highstock#rangeSelector.enabled](http://api.highcharts.com/highstock#rangeSelector.enabled)启用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T01:00:36.263

要使用 clickButton() 你需要这样调用它......

```
chart.rangeSelector.clickButton(0, chart.rangeSelector.buttonOptions[0], true); 
```

buttonOptions[] 项与第一个参数匹配的位置。

# javascript - 如何使用jquery随机删除同一类的元素

> ID：15309125
> 
> 赞同：0
> 
> 时间：2013-03-09T09:22:22.940
> 
> 标签：javascript, jquery, html, css, dom

我有大约 72 个部门的 class="box"

这些是覆盖我整个页面的一些黑色框，我想在我的功能完成后一个一个地随机删除这些分区。

这是我随机删除这些盒子的方法，

```
function removeBoxes(){

    var erase;
            //var to store the length of array of divisions
    var total = $(".box").length;
    while(total > 0)
    {
              //generating a random number
        erase = Math.floor(Math.random() * total);
        $(".box").eq(erase).fadeOut(10000, function(){
            $(this).remove();
        });
        total = $(".box").length;
    }
} 
```

后来我还会在两次移除之间添加一些时间延迟，但现在我只想知道如何一一移除这些盒子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:28:55.537

一个小插件怎么样：

```
(function($) {
    $.fn.random = function() {
        var n = this.length;
        var r = Math.floor(n * Math.random());
        return n ? $(this[r]) : $();
    };
})(jQuery); 
```

用法：

```
(function iterate() {
    $('.box').random().fadeOut(1000, function() {
        $(this).remove();
        iterate();
    });
})(); 
```

元素将一次消失一个，当没有更多`.box`元素时循环将自动终止。

有关演示，请参见[http://jsfiddle.net/alnitak/cddhL/](http://jsfiddle.net/alnitak/cddhL/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:32:12.853

```
function removeBoxes(){

    var total = $(".box").length - 1;
    var randomnumber = Math.floor(Math.random()*total);
    jQuery(".box:eq('"+randomnumer+"')").fadeOut(1000, function() {
        $(this).remove();
    });
} 
```

//这是每5秒删除一次DIV

```
setInterval(function(){ 
    removeBoxes();    
}, 5000); 
```

我希望这可以帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:34:34.377

您已经知道如何在淡出后触发某些内容，即在您已经删除框的回调中执行此操作。不要使用循环，而是编写一个只删除一个随机框的函数，并在回调中调用它。

例子：

```
function removeRandomBox() {
  var boxes = $(".box"); // don't repeatedly search for the boxes
  var total = boxes.length;
  if (length > 0) {
    var erase = Math.floor(Math.random() * total);
    boxes.eq(erase).fadeOut(10000, function(){
       $(this).remove();
       removeRandomBox();
    });
  }
} 
```

# php - 选择间隔日期最大日期和最小日期

> ID：15309126
> 
> 赞同：-2
> 
> 时间：2013-03-09T09:22:24.007
> 
> 标签：php, mysql

我想从表中选择最大日期和最小日期。使用表格

```
$datemax=$_POST['maxdate'];
$datemin=$_POST['mindate'];
    ("select * from demande inner join gestionnaire on gestionnaire.idgab = demande.idgab  where demande.idgab='$idgabsess' order by demande.dateincidnt") 
```

我想从 dateincidnt 列中选择 ($datemax) ------> (datemin)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:24:47.093

您可以使用`MySQL` `between`子句。

```
SELECT * FROM table WHERE date BETWEEN $start_date AND $end_date 
```

在您的代码中

```
select * from table where dateincidnt between $datemax and datemin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T09:24:56.190

使用`BETWEEN`运算符

```
$sql = "select * from demande
        inner join gestionnaire on gestionnaire.idgab = demande.idgab
        where demande.idgab='$idgabsess'
              and dateincidnt between $datemin and $datemax
        order by demande.dateincidnt"; 
```

# java - 倒着写单词

> ID：15309133
> 
> 赞同：2
> 
> 时间：2013-03-09T09:24:24.723
> 
> 标签：java

当我将新单词与原始单词进行比较时，我遇到了问题。我想输入像“banana”这样的单词并将第一个字母放在最后，它应该向后拼写为“banana”。这两个词是相等的。如果我输入“dog”，它就会变成“dgo”。但是在我的代码中，如果我输入“香蕉”，它仍然显示它不相等。不知道该怎么办。

```
import java.util.Scanner;
public class Project9 
public static void main(String [] args)
{
Scanner keyboard = new Scanner(System.in);
String word, afc, newWord;
String s="";

do
    {
    word=keyboard.next().toLowerCase();
    int i =word.length()-1;
    char firstLetter=word.charAt(0);
    afc=word.substring(1);
    newWord= afc+firstLetter;

    for( ; i>=0; )
    {
        s += newWord.charAt(i--);
    } 
    System.out.println(word + "," + s);

        if (s.equals(word))
            System.out.println("Words are equal.");
        else
            System.out.println("Words are not equal.");
    }
while (!(word.equals("quit")));

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:36:28.313

问题是您的代码将单词反向打印为

```
for( ; i>=0; )
  System.out.print(newWord.charAt(i--)); 
```

但是然后您将非反转版本与

```
newWord.equals(word) 
```

我想你想要这样的东西：

```
String s = "";
for( ; i>=0; )
  s += newWord.charAt(i--);
System.out.println(s);

if (s.equals(word))
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:32:57.663

您正在比较**香蕉**和**ananab**
，除了它之外，您正在为一项小任务执行如此多的操作。
字符串操作不是一个好习惯，因为每次更改字符串时，都会创建一个新的 String 对象。我已经为您的要求编写了一个代码，希望它有助于
**当您需要多次操作它时，char 数组比 String 更好**

```
public static void main(String [] args)
{
    Scanner keyboard = new Scanner(System.in);
    String word, newWord;
    do  
    {
        word=keyboard.next().toLowerCase();
        int i =word.length()-1;
        char[] ca=new char[i+1];
        ca[0]=word.charAt(0);
        for( int j=1; i>0;j++ )
        {
            ca[j]=word.charAt(i--);
        }
        newWord= new String(ca);

        System.out.println(word+","+newWord);

        if (newWord.equals(word))
            System.out.println("Words are equal.");
        else
            System.out.println("Words are not equal.");
    }
    while (!(word.equals("quit")));
} 
```

# php - 通过文本框、表单插入部分链接 - 单击时获取个人资料图片？

> ID：15309134
> 
> 赞同：-2
> 
> 时间：2013-03-09T09:24:29.143
> 
> 标签：php, facebook, image, forms, hyperlink

我只知道 ccs 和 html，所以以下内容对我来说很难理解

我想要一个文本框表单，用户可以输入 facebook 用户 ID，按下按钮并将个人资料图片加载到框架或按钮旁边的东西中。

我知道这里有一些关于这个的我有一个很好的环顾四周但不知道 php 没有帮助

我在想“文本框表单”应该以某种方式在按钮单击时将**用户 ID插入到下面的代码中？**我还想要配置文件名称？但不想太超前:)

```
<img src="https://graph.facebook.com/User ID/picture" alt="Profile Picture" height ="42" width="42"> 
```

正如我所说，我知道的不多，所以任何帮助都会很棒，尤其是简单来说

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:29:17.550

您将通过以下方式获取用户个人资料图片：

```
http://graph.facebook.com/USER_ID/picture 
```

你非常接近：

```
<img src="https://graph.facebook.com/USER_ID/picture" 
     alt="Profile Picture" height ="42" width="42"> 
```

以及更多关于他的信息：

```
http://graph.facebook.com/USER_ID 
```

在 PHP 中使用`curl`or`file_get_content`来检索请求的内容。

# iphone - 当我只有 IPA 文件时，如何制作应用程序的演示视频？

> ID：15309137
> 
> 赞同：1
> 
> 时间：2013-03-09T09:24:41.767
> 
> 标签：iphone, ios, cocoa-touch, ios-simulator, ipa

我想在模拟器上运行/测试我的 .ipa 文件，因为我想拍摄应用程序的演示视频。我现在搜索了两个小时，没有结果说可以。我已经浏览了以下链接。1) [有没有办法在没有源代码的情况下在模拟器上测试 iOS 构建？](https://stackoverflow.com/questions/8015405/is-there-a-way-to-test-ios-builds-on-simulator-without-the-source-code) 2） [在模拟器中运行苹果应用程序](http://iphonedevsdk.com/forum/iphone-sdk-development/24508-how-to-run-apple-apps-in-iphone-simulator.html)

**注意：**我没有源代码，我知道我可以通过将它放入设备中来测试它。另外我的应用程序没有上传到应用程序商店，所以没有从应用程序商店下载。（它是由开发者发送的）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:38:51.130

正如其他人回答的那样，您无法在模拟器上运行 IPA 文件，因为模拟器在 Mac 的 x86 CPU 上运行本机代码，而 IPA 文件仅包含设备 ARM CPU 的代码。

您**可以**在 Mac 上运行 AirPlay 服务器。在您的 iOS 设备上安装 IPA 并[打开从设备到 Mac 的镜像](http://support.apple.com/kb/ht5209)。然后录制您的 Mac 屏幕。

Mac 有几个 AirPlay 服务器应用程序。我玩过的一个是[Reflector](https://www.reflectorapp.com/)。它支持将设备的 AirPlay 流直接录制到视频文件中，这使得该过程更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:26:22.857

如果`.ipa`是为分发而构建的，那么它不会为 i386 编译，所以它不会在模拟器上运行；这是使用我的一个应用程序的示例：

```
$ unzip MyApp.ipa
$ cd Payload/MyApp.app
$ xcrun -sdk iphoneos lipo -info MyApp
Architectures in the fat file: MyApp are: armv7 armv7s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:28:50.967

[阅读本网站。](http://jabbleashish.blogspot.in/2013/02/install-app-or-ipa-file-on-iphone.html)

`.ipa`文件是`iPhone`存储 iPhone 应用程序的应用程序存档文件。它通常使用**Apple 的 FairPlay DRM 技术**进行加密。每个 .ipa 文件都使用**ARM**架构的二进制文件进行压缩，并且只能安装在`iPhone, iPod`Touch 上，或者可以通过将扩展名更改为并解压缩来解压缩带有 .ipa 的文件。 `iPad.``.ipa extension``.zip`

**.ipa 文件无法安装在 iPhone 模拟器上，** *因为它们不包含 x86 架构的二进制文件。要在模拟器上运行应用程序，需要可以使用打开的原始项目文件`Xcode SDK`。*

[有关更多信息，请阅读此问题。](https://stackoverflow.com/questions/517463/how-can-i-install-a-ipa-file-to-my-iphone-simulator)

# android - Android 创建自定义 UI 对象，红/绿连接按钮

> ID：15309140
> 
> 赞同：0
> 
> 时间：2013-03-09T09:25:06.360
> 
> 标签：android

再会，

我想创建一个可以添加到我的 Android 应用程序视图的新对象，

我只是想要一个圆圈显示为红色或绿色，具体取决于网络是否连接。我想要一个类似于单选按钮的外观，只是颜色必须改变。

最好只使用图像吗？或者我应该创建一个新的视图对象/组件？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:37:01.377

一个简单的选择：您可以使用 PNG 图像。您需要一张要使用的两种颜色的图像。如果你喜欢，你可以用你的 PNG 创建一个 9Patch。9Patch 为您提供可以拉伸以适合的图像。

然后在 XML 文件中使用 StateList drawable。Statelist drawable 使您能够根据状态更改图像

这是您的可绘制文件夹中的 button_statelist.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
        android:drawable="@drawable/redbutton" />
    <item android:drawable="@drawable/bluebutton" />
</selector> 
```

您可以使用其他状态而不是 state_pressed

在您的布局文件夹中，您将按钮定义为：

```
<Button        
       android:id="@+id/button1"        

       android:background="@drawable/button_statelist"      

       /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:41:59.567

看看这个：[android - 按钮样式](https://stackoverflow.com/questions/4489069/android-button-style)

您可以将样式应用于您的按钮/图像按钮/图像视图，您可以在其中定义背景的外观和边框半径以获取圆形。将其另存为 your_style.xml 在 drawable 文件夹中。代码看起来像这样：

```
 <shape>
            <solid
                android:color="#f00" />
            <stroke
                android:width="1dp"
                android:color="#d00" />
            <corners
                android:radius="40dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape> 
```

使用 设置形状和背景颜色`android:background="@drawable/your_style"`。如果你想要一个额外的图像（为了获得那个单选按钮的外观），你只需添加`android:drawableLeft="@drawable/your_overlay_image`.

# android - ActionBarSherlock 和 ActionBar.OnNavigationListener

> ID：15309141
> 
> 赞同：3
> 
> 时间：2013-03-09T09:25:11.667
> 
> 标签：android, android-actionbar, actionbarsherlock

我有带有列表导航的 ActionBar。如我所见，仅对新选择的位置调用 ActionBar.OnNavigationListener 。即使我选择了已经选择的项目，有没有办法为每个选择进行回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:20:05.830

我对此只有一个 hacky 解决方案，我愿意就如何改进它提出建议。但它有效。

诀窍是在实际选择后选择一个不可见的项目。这样，`onNavigationItemSelected`当您重新选择所选项目时会再次调用。

```
public class ReselectAdapter extends ArrayAdapter<String> {
    private Context mContext;
    private ArrayList<String> mItems;
    private int mInternalPosition;

    public ReselectAdapter(Context context, ArrayList<String> items) {
        super(context, R.layout.sherlock_spinner_item, items);
        mContext = context;
        mItems = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView textView = (TextView) convertView;
        if (textView == null) {
            textView = (TextView) LayoutInflater.from(mContext).inflate(
                    R.layout.sherlock_spinner_item, null);
            textView.setText(mItems.get(mInternalPosition));
        }
        return textView;
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup
            parent) {
        TextView textView = null;
        if (position == mItems.size() - 1) {
            textView = new TextView(mContext);
            textView.setHeight(0);
        } else {
            textView = (TextView) LayoutInflater.from(mContext)
                    .inflate(R.layout.sherlock_spinner_dropdown_item, 
                            parent, false);
            textView.setText(mItems.get(position));
        }
        parent.setVerticalScrollBarEnabled(false);
        return textView;
    }

    public void setInternalPosition(int internalPosition) {
        mInternalPosition = internalPosition;
    }
} 
```

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // [...]
    ArrayList<String> items = new ArrayList<String>();
    items.add("A");
    items.add("B");
    items.add("C");
    items.add(""); // the last item is the invisible one
    mReselectAdapter = new ReselectAdapter(context, items);
    getSupportActionBar().setListNavigationCallbacks(mReselectAdapter, this);
} 
```

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    int navigationItemCount = getSupportActionBar().getNavigationItemCount();
    if (itemPosition == navigationItemCount - 1) {
        return true;
    }
    Log.i("onNavigationItemSelected", mReselectAdapter.getItem(itemPosition));
    mReselectAdapter.setInternalPosition(itemPosition);
    getSupportActionBar().setSelectedNavigationItem(navigationItemCount - 1);
    return true;
} 
```

# java - 从 ArrayList 中删除元素

> ID：15309144
> 
> 赞同：0
> 
> 时间：2013-03-09T09:25:38.997
> 
> 标签：java, loops, for-loop, arraylist

我正在尝试使用 ArrayList 和 for 循环删除字符串匹配“Meg”。到目前为止，我已经编写了下面的代码，但不确定为什么它不起作用。我认为问题在于下面的`while`循环

```
while((customerName.get(i)).equals("Meg"))
{
  customerName.remove(i);
} 
```

提前致谢。

完整代码如下：

```
import java.util.ArrayList;
public class CustomerLister2
{
  public static void main(String[] args)
  {
    ArrayList<String> customerName = new ArrayList<String>(); 
    customerName.add("Chris");
    customerName.add("Lois");
    customerName.add("Meg");
    customerName.add("Peter");
    customerName.add("Stewie");
    customerName.add(3, "Meg");
    customerName.add(4, "Brian");

    int currentSize = customerName.size();

    for(int i = 0; i < currentSize - 1; i++)
    {

      while((customerName.get(i)).equals("Meg"))
      {
        customerName.remove(i);
      }
    }
    for(String newStr: customerName)
    {
      System.out.println(newStr);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:30:58.987

将其更改为以下

```
for(int i = 0; i < currentSize; i++)
{
  if((customerName.get(i)).equals("Meg"))
  {
    customerName.remove(i);
    i--;  //because a new element may be at i now
    currentSize = customerName.size(); //size has changed
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:38:01.573

或者，如果您不必使用 for 循环：

```
 public static void main(String[] args) {

        ArrayList<String> customerName = new ArrayList<String>();
        customerName.add("Chris");
        customerName.add("Lois");
        customerName.add("Meg");
        customerName.add("Peter");
        customerName.add("Stewie");
        customerName.add(3, "Meg");
        customerName.add(4, "Brian");

        while (customerName.remove("Meg")) {}

        for (String s : customerName) {
            System.out.println(s);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:43:22.653

这将帮助你

```
System.out.println("Customer Name (including Meg)"+customerName);
for(int i=0; i<customerName.size(); i++)
{
  String s = customerName.get(i);
  if(s.equals("Meg"))
  {
     customerName.remove(i);
     i--;
  }
}
System.out.println("Customer Name (excluding Meg)"+customerName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:55:48.460

使用迭代器`customerName.iterator()`（iterator() 是非静态方法）迭代器负责列表的计数修改。当我们使用`for`循环时，我们可能会忘记处理列表的计数修改。

```
Iterator<String> itr= customerName.iterator();
while(itr.hasNext())
{
    if(itr.next().equals("Meg")){
        itr.remove();
    }
} 
```

迭代器中也存在缺点。如果两个线程同时访问同一个列表对象，它就不起作用。前任。一个线程正在读取，另一个线程正在从列表中删除元素，然后它会抛出`java.util.ConcurrentModificationException.`Better to use `Vector`in concurrent 场景。

如果您仍想使用相同`for`的循环，请添加以下代码行。

```
int currentSize = customerName.size();

for(int i = 0; i < currentSize; i++)
{

  while((customerName.get(i)).equals("Meg"))
  {
    customerName.remove(i);
    currentSize = customerName.size(); //add this line to avoid run-time exception.
  }
} 
```

# ruby-on-rails - 如何或在 ruby on rails Mongodb 查询？

> ID：15309145
> 
> 赞同：-5
> 
> 时间：2013-03-09T09:25:43.427
> 
> 标签：ruby-on-rails, mongodb, rails-console

我需要在 Rails 控制台中执行这个 sql 查询（我使用的是 mongodb）：

```
SELECT * FROM Member WHERE name='x' OR age='42' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:02:09.633

对于 Mongoid，我使用“any_of”。这应该有效：

```
Member.any_of({:name => x, :age => 42}) 
```

这里还有一个链接到您可以与 mongoid 一起使用的其他一些查询。我在他们的主文档页面中没有看到这些：

[http://two.mongoid.org/docs/querying/criteria.html#any_of](http://two.mongoid.org/docs/querying/criteria.html#any_of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:04:13.110

你应该从阅读[Active Record Query Interface RailsGuide 开始](http://guides.rubyonrails.org/active_record_querying.html)，它会回答你的问题，并且可能会教你一些你还不知道的东西。

# javascript - 定期 AJAX

> ID：15309154
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:26:36.543
> 
> 标签：javascript, ajax

我从 javascript 定期（10 秒）调用 ajax 以从数据库加载数据。响应列在一个小 div 中。但是每 10 秒一次，我面临界面不响应用户操作（如鼠标单击、按键等）的问题。对此主题的任何帮助将不胜感激。

代码

```
var onlineLeads = function () {
var reqst ="";
var size="";
var url ="<s:property value="str_applicationPath"/>/Marketing/Online_showNewRequest";   
xmlHttp.open("POST", url, false);                                           
xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");  
xmlHttp.setRequestHeader("Connection", "close");
xmlHttp.onreadystatechange = function() {//Call a function when the state changes.
if(xmlHttp.readyState == 4 && xmlHttp.status == 200) {

//Code for display

}
}
xmlHttp.send(); 
setTimeout(onlineLeads, 15000);
};
setTimeout(onlineLeads, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:08:24.207

您没有执行 Ajax：

```
xmlHttp.open("POST", url, false); 
//                        ^^^^^ 
//        Puts the request into synchronous mode 
```

在同步模式下，调用会阻塞，直到响应返回。这将绑定 JS 事件循环。

更改`false`为`true`。

# css - CSS使用位置相对+绝对或负边距

> ID：15309157
> 
> 赞同：2
> 
> 时间：2013-03-09T09:26:52.023
> 
> 标签：css, position, css-position, margin

我想在另一个 div (200x200) 的中心放置一个小 div (50x50)。

我有两种方法：

[使用绝对位置和相对位置](http://jsfiddle.net/WrAFB/)

```
position:relative
position:absolute
top:75px;
left:75px; 
```

或者

[使用负边距](http://jsfiddle.net/Y9LFY/1/)

```
margin:-125px 0 0 75px; 
```

我想知道哪种方式更好，为什么...
我听到有人说不推荐这个位置..这是真的吗？为什么？

**编辑：**
div 是示例。
实际上，我在另一张图片上方获得了图片（youtube 预览图片，并在其上方播放按钮图片）。
图像在手风琴内，在 ie6 中关闭手风琴/打开它会导致绝对容器漂浮在所有东西之上......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T09:39:40.010

使用`absolute`和`relative`定位都没有问题，它们已经完全支持了很长时间。在您的两种方法中，我肯定会使用绝对和相对位置一种，因为边距一种有点笨拙。

就个人而言，我不会使用您的任何一种方法，而是将其放入`#small`内部`#big`，因为它在语义上更正确（因为`#small`is within `#big`）。

[参见 jsFiddle](http://jsfiddle.net/GfD8S/)

**HTML**

```
<div id="con">
    <div id="big">
        <div id="small"></div>
    </div>
</div> 
```

**CSS**

```
#big {
    width:200px;
    height:200px;
    background:red;
    position:relative;
}
#small {
    position:absolute;
    width:50px;
    height:50px;
    margin-left:-25px;
    margin-top:-25px;
    left:50%;
    top:50%;
    background:blue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:38:33.590

使用保证金更好！如果你使用

```
position:relative
position:absolute 
```

您需要了解与外部 div 的相关性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T11:11:08.113

不建议不知道如何使用它的人使用位置，对于我们其他人来说，它工作得很好。

我绝对不会使用负边距。就像 Tyriar[所说](https://stackoverflow.com/a/15309269/766570)的那样，它很老套，而且不容易阅读。

至于 ie6 的 bug，你有很多 ie 的 bug，解决它们的方法是用故障安全代码补充你原本健全的 html/css，而不是为了 ie 而将你的健全的 html 退化为 hacky html。

# haskell - 在 emacs 中安装接穗

> ID：15309161
> 
> 赞同：1
> 
> 时间：2013-03-09T09:27:11.640
> 
> 标签：haskell, emacs, cabal, cabal-install, haskell-mode

我正在寻找`scion`为我的 emacs 安装的。但是，正如自述文件所建议的那样，当我运行时`cabal install`会弹出以下错误：

```
Resolving dependencies...
In order, the following will be installed:
scion-0.3 (reinstall) changes: atto-lisp-0.2.1.1 added, attoparsec-0.10.4.0
added
Warning: Note that reinstalls are always dangerous. Continuing anyway...
Configuring scion-0.3...
Building scion-0.3...
Preprocessing library scion-0.3...

src/Scion/Cabal.hs:30:18:
    Could not find module `GHC.Paths'
    There are files missing in the `ghc-paths-0.1.0.9' package,
    try running 'ghc-pkg check'.
    Use -v to see a list of the files searched for.
cabal: Error: some packages failed to install:
scion-0.3 failed during the building phase. The exception was:
ExitFailure 1 
```

运行 ghc-pkg check 给出：

```
There are problems in package scion-0.3:
  Warning: library-dirs: /home/sudeep/.cabal/lib/scion-0.3/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/scion-0.3/ghc-7.4.2 doesn't exist or isn't a directory
  file Scion/Cabal.hi is missing
  file Scion/Ghc.hi is missing
  file Scion/Session.hi is missing
  file Scion/Types/Compiler.hi is missing
  file Scion/Types/Commands.hi is missing
  file Scion/Types/Core.hi is missing
  file Scion/Types/Monad.hi is missing
  file Scion/Types/Note.hi is missing
  file Scion/Types/Session.hi is missing
  file Scion/Types/Worker.hi is missing
  file Scion/Utils/Convert.hi is missing
  file Scion/Utils/IO.hi is missing
  file Scion/Worker/Commands.hi is missing
  file Scion/Worker/Main.hi is missing
  file Paths_scion.hi is missing
  cannot find libHSscion-0.3.a on library path
There are problems in package atto-lisp-0.2.1.1:
  Warning: library-dirs: /home/sudeep/.cabal/lib/atto-lisp-0.2.1.1/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/atto-lisp-0.2.1.1/ghc-7.4.2 doesn't exist or isn't a directory
  file Data/AttoLisp.hi is missing
  cannot find libHSatto-lisp-0.2.1.1.a on library path
There are problems in package blaze-textual-0.2.0.8:
  Warning: library-dirs: /home/sudeep/.cabal/lib/blaze-textual-0.2.0.8/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/blaze-textual-0.2.0.8/ghc-7.4.2 doesn't exist or isn't a directory
  file Blaze/Text.hi is missing
  file Blaze/Text/Double.hi is missing
  file Blaze/Text/Int.hi is missing
  file Blaze/Text/Double/Native.hi is missing
  cannot find libHSblaze-textual-0.2.0.8.a on library path
There are problems in package vector-0.10.0.1:
  Warning: library-dirs: /home/sudeep/.cabal/lib/vector-0.10.0.1/ghc-7.4.2 doesn't exist or isn't a directory
  Warning: include-dirs: /home/sudeep/.cabal/lib/vector-0.10.0.1/ghc-7.4.2/include doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/vector-0.10.0.1/ghc-7.4.2 doesn't exist or isn't a directory
  file Data/Vector/Internal/Check.hi is missing
  file Data/Vector/Fusion/Util.hi is missing
  file Data/Vector/Fusion/Stream/Size.hi is missing
  file Data/Vector/Fusion/Stream/Monadic.hi is missing                                                                                                                                          
  file Data/Vector/Fusion/Stream.hi is missing                                                                                                                                                  
  file Data/Vector/Generic/Mutable.hi is missing                                                                                                                                                
  file Data/Vector/Generic/Base.hi is missing                                                                                                                                                   
  file Data/Vector/Generic/New.hi is missing
  file Data/Vector/Generic.hi is missing
  file Data/Vector/Primitive/Mutable.hi is missing
  file Data/Vector/Primitive.hi is missing
  file Data/Vector/Storable/Internal.hi is missing
  file Data/Vector/Storable/Mutable.hi is missing
  file Data/Vector/Storable.hi is missing
  file Data/Vector/Unboxed/Base.hi is missing
  file Data/Vector/Unboxed/Mutable.hi is missing
  file Data/Vector/Unboxed.hi is missing
  file Data/Vector/Mutable.hi is missing
  file Data/Vector.hi is missing
  cannot find libHSvector-0.10.0.1.a on library path
There are problems in package unix-compat-0.3.0.2:
  Warning: library-dirs: /home/sudeep/.cabal/lib/unix-compat-0.3.0.2/ghc-7.4.2 doesn't exist or isn't a directory
  Warning: include-dirs: /home/sudeep/.cabal/lib/unix-compat-0.3.0.2/ghc-7.4.2/include doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/unix-compat-0.3.0.2/ghc-7.4.2 doesn't exist or isn't a directory
  file System/PosixCompat.hi is missing
  file System/PosixCompat/Extensions.hi is missing
  file System/PosixCompat/Files.hi is missing
  file System/PosixCompat/Temp.hi is missing
  file System/PosixCompat/Time.hi is missing
  file System/PosixCompat/Types.hi is missing
  file System/PosixCompat/Unistd.hi is missing
  file System/PosixCompat/User.hi is missing
  cannot find libHSunix-compat-0.3.0.2.a on library path
There are problems in package network-2.3.2.0:
  Warning: library-dirs: /home/sudeep/.cabal/lib/network-2.3.2.0/ghc-7.4.2 doesn't exist or isn't a directory
  Warning: include-dirs: /home/sudeep/.cabal/lib/network-2.3.2.0/ghc-7.4.2/include doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/network-2.3.2.0/ghc-7.4.2 doesn't exist or isn't a directory
  file Network.hi is missing
  file Network/BSD.hi is missing
  file Network/Socket.hi is missing
  file Network/Socket/ByteString.hi is missing
  file Network/Socket/ByteString/Lazy.hi is missing
  file Network/Socket/Internal.hi is missing
  file Network/URI.hi is missing
  file Network/Socket/ByteString/IOVec.hi is missing
  file Network/Socket/ByteString/MsgHdr.hi is missing
  file Network/Socket/ByteString/Internal.hi is missing
  cannot find libHSnetwork-2.3.2.0.a on library path
There are problems in package parsec-3.1.3:
  Warning: library-dirs: /home/sudeep/.cabal/lib/parsec-3.1.3/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/parsec-3.1.3/ghc-7.4.2 doesn't exist or isn't a directory
  file Text/Parsec.hi is missing
  file Text/Parsec/String.hi is missing
  file Text/Parsec/ByteString.hi is missing
  file Text/Parsec/ByteString/Lazy.hi is missing
  file Text/Parsec/Text.hi is missing
  file Text/Parsec/Text/Lazy.hi is missing
  file Text/Parsec/Pos.hi is missing
  file Text/Parsec/Error.hi is missing
  file Text/Parsec/Prim.hi is missing
  file Text/Parsec/Char.hi is missing
  file Text/Parsec/Combinator.hi is missing
  file Text/Parsec/Token.hi is missing
  file Text/Parsec/Expr.hi is missing
  file Text/Parsec/Language.hi is missing
  file Text/Parsec/Perm.hi is missing
  file Text/ParserCombinators/Parsec.hi is missing
  file Text/ParserCombinators/Parsec/Char.hi is missing
  file Text/ParserCombinators/Parsec/Combinator.hi is missing
  file Text/ParserCombinators/Parsec/Error.hi is missing
  file Text/ParserCombinators/Parsec/Expr.hi is missing
  file Text/ParserCombinators/Parsec/Language.hi is missing
  file Text/ParserCombinators/Parsec/Perm.hi is missing
  file Text/ParserCombinators/Parsec/Pos.hi is missing
  file Text/ParserCombinators/Parsec/Prim.hi is missing
  file Text/ParserCombinators/Parsec/Token.hi is missing
  cannot find libHSparsec-3.1.3.a on library path
There are problems in package mtl-2.1.2:
  Warning: library-dirs: /home/sudeep/.cabal/lib/mtl-2.1.2/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/mtl-2.1.2/ghc-7.4.2 doesn't exist or isn't a directory
  file Control/Monad/Cont.hi is missing
  file Control/Monad/Cont/Class.hi is missing
  file Control/Monad/Error.hi is missing
  file Control/Monad/Error/Class.hi is missing
  file Control/Monad/Identity.hi is missing
  file Control/Monad/List.hi is missing
  file Control/Monad/RWS.hi is missing
  file Control/Monad/RWS/Class.hi is missing
  file Control/Monad/RWS/Lazy.hi is missing
  file Control/Monad/RWS/Strict.hi is missing
  file Control/Monad/Reader.hi is missing
  file Control/Monad/Reader/Class.hi is missing
  file Control/Monad/State.hi is missing
  file Control/Monad/State/Class.hi is missing
  file Control/Monad/State/Lazy.hi is missing
  file Control/Monad/State/Strict.hi is missing
  file Control/Monad/Trans.hi is missing
  file Control/Monad/Writer.hi is missing
  file Control/Monad/Writer/Class.hi is missing
  file Control/Monad/Writer/Lazy.hi is missing
  file Control/Monad/Writer/Strict.hi is missing
  cannot find libHSmtl-2.1.2.a on library path
There are problems in package transformers-0.3.0.0:
  Warning: library-dirs: /home/sudeep/.cabal/lib/transformers-0.3.0.0/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/transformers-0.3.0.0/ghc-7.4.2 doesn't exist or isn't a directory
  file Control/Applicative/Backwards.hi is missing
  file Control/Applicative/Lift.hi is missing
  file Control/Monad/IO/Class.hi is missing
  file Control/Monad/Trans/Class.hi is missing
  file Control/Monad/Trans/Cont.hi is missing
  file Control/Monad/Trans/Error.hi is missing
  file Control/Monad/Trans/Identity.hi is missing
  file Control/Monad/Trans/List.hi is missing
  file Control/Monad/Trans/Maybe.hi is missing
  file Control/Monad/Trans/Reader.hi is missing
  file Control/Monad/Trans/RWS.hi is missing
  file Control/Monad/Trans/RWS/Lazy.hi is missing
  file Control/Monad/Trans/RWS/Strict.hi is missing
  file Control/Monad/Trans/State.hi is missing
  file Control/Monad/Trans/State/Lazy.hi is missing
  file Control/Monad/Trans/State/Strict.hi is missing
  file Control/Monad/Trans/Writer.hi is missing
  file Control/Monad/Trans/Writer/Lazy.hi is missing
  file Control/Monad/Trans/Writer/Strict.hi is missing
  file Data/Functor/Compose.hi is missing
  file Data/Functor/Constant.hi is missing
  file Data/Functor/Identity.hi is missing
  file Data/Functor/Product.hi is missing
  file Data/Functor/Reverse.hi is missing
  cannot find libHStransformers-0.3.0.0.a on library path
There are problems in package blaze-builder-0.3.1.0:
  Warning: library-dirs: /home/sudeep/.cabal/lib/blaze-builder-0.3.1.0/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/blaze-builder-0.3.1.0/ghc-7.4.2 doesn't exist or isn't a directory
  file Blaze/ByteString/Builder.hi is missing
  file Blaze/ByteString/Builder/Int.hi is missing
  file Blaze/ByteString/Builder/Word.hi is missing
  file Blaze/ByteString/Builder/ByteString.hi is missing
  file Blaze/ByteString/Builder/Char/Utf8.hi is missing
  file Blaze/ByteString/Builder/Char8.hi is missing
  file Blaze/ByteString/Builder/Html/Utf8.hi is missing
  file Blaze/ByteString/Builder/HTTP.hi is missing
  file Blaze/ByteString/Builder/Internal.hi is missing
  file Blaze/ByteString/Builder/Internal/Write.hi is missing
  file Blaze/ByteString/Builder/Internal/Types.hi is missing
  file Blaze/ByteString/Builder/Internal/Buffer.hi is missing
  file Blaze/ByteString/Builder/Internal/UncheckedShifts.hi is missing
  cannot find libHSblaze-builder-0.3.1.0.a on library path
There are problems in package attoparsec-0.10.4.0:
  Warning: library-dirs: /home/sudeep/.cabal/lib/attoparsec-0.10.4.0/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/attoparsec-0.10.4.0/ghc-7.4.2 doesn't exist or isn't a directory
  file Data/Attoparsec.hi is missing
  file Data/Attoparsec/ByteString.hi is missing
  file Data/Attoparsec/ByteString/Char8.hi is missing
  file Data/Attoparsec/ByteString/Lazy.hi is missing
  file Data/Attoparsec/Char8.hi is missing
  file Data/Attoparsec/Combinator.hi is missing
  file Data/Attoparsec/Lazy.hi is missing
  file Data/Attoparsec/Number.hi is missing
  file Data/Attoparsec/Text.hi is missing
  file Data/Attoparsec/Text/Lazy.hi is missing
  file Data/Attoparsec/Types.hi is missing
  file Data/Attoparsec/Zepto.hi is missing
  file Data/Attoparsec/ByteString/FastSet.hi is missing
  file Data/Attoparsec/ByteString/Internal.hi is missing
  file Data/Attoparsec/Internal.hi is missing
  file Data/Attoparsec/Internal/Types.hi is missing
  file Data/Attoparsec/Text/FastSet.hi is missing
  file Data/Attoparsec/Text/Internal.hi is missing
  cannot find libHSattoparsec-0.10.4.0.a on library path
There are problems in package text-0.11.2.3:
  Warning: library-dirs: /home/sudeep/.cabal/lib/text-0.11.2.3/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/text-0.11.2.3/ghc-7.4.2 doesn't exist or isn't a directory
  file Data/Text.hi is missing
  file Data/Text/Array.hi is missing
  file Data/Text/Encoding.hi is missing
  file Data/Text/Encoding/Error.hi is missing
  file Data/Text/Foreign.hi is missing
  file Data/Text/IO.hi is missing
  file Data/Text/Internal.hi is missing
  file Data/Text/Lazy.hi is missing
  file Data/Text/Lazy/Builder.hi is missing
  file Data/Text/Lazy/Builder/Int.hi is missing
  file Data/Text/Lazy/Builder/RealFloat.hi is missing
  file Data/Text/Lazy/Encoding.hi is missing
  file Data/Text/Lazy/IO.hi is missing
  file Data/Text/Lazy/Internal.hi is missing
  file Data/Text/Lazy/Read.hi is missing
  file Data/Text/Read.hi is missing
  file Data/Text/Encoding/Fusion.hi is missing
  file Data/Text/Encoding/Fusion/Common.hi is missing
  file Data/Text/Encoding/Utf16.hi is missing
  file Data/Text/Encoding/Utf32.hi is missing
  file Data/Text/Encoding/Utf8.hi is missing
  file Data/Text/Fusion.hi is missing
  file Data/Text/Fusion/CaseMapping.hi is missing
  file Data/Text/Fusion/Common.hi is missing
  file Data/Text/Fusion/Internal.hi is missing
  file Data/Text/Fusion/Size.hi is missing
  file Data/Text/IO/Internal.hi is missing
  file Data/Text/Lazy/Builder/Functions.hi is missing
  file Data/Text/Lazy/Builder/RealFloat/Functions.hi is missing
  file Data/Text/Lazy/Encoding/Fusion.hi is missing
  file Data/Text/Lazy/Fusion.hi is missing
  file Data/Text/Lazy/Search.hi is missing
  file Data/Text/Private.hi is missing
  file Data/Text/Search.hi is missing
  file Data/Text/Unsafe.hi is missing
  file Data/Text/Unsafe/Base.hi is missing
  file Data/Text/UnsafeChar.hi is missing
  file Data/Text/UnsafeShift.hi is missing
  file Data/Text/Util.hi is missing
  cannot find libHStext-0.11.2.3.a on library path
There are problems in package temporary-1.1.2.4:
  Warning: library-dirs: /home/sudeep/.cabal/lib/temporary-1.1.2.4/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/temporary-1.1.2.4/ghc-7.4.2 doesn't exist or isn't a directory
  file System/IO/Temp.hi is missing
  file Distribution/Compat/Exception.hi is missing
  file Distribution/Compat/TempFile.hi is missing
  cannot find libHStemporary-1.1.2.4.a on library path
There are problems in package primitive-0.5.0.1:
  Warning: library-dirs: /home/sudeep/.cabal/lib/primitive-0.5.0.1/ghc-7.4.2 doesn't exist or isn't a directory
  Warning: include-dirs: /home/sudeep/.cabal/lib/primitive-0.5.0.1/ghc-7.4.2/include doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/primitive-0.5.0.1/ghc-7.4.2 doesn't exist or isn't a directory
  file Control/Monad/Primitive.hi is missing
  file Data/Primitive.hi is missing
  file Data/Primitive/MachDeps.hi is missing
  file Data/Primitive/Types.hi is missing
  file Data/Primitive/Array.hi is missing
  file Data/Primitive/ByteArray.hi is missing
  file Data/Primitive/Addr.hi is missing
  file Data/Primitive/MutVar.hi is missing
  file Data/Primitive/Internal/Compat.hi is missing
  file Data/Primitive/Internal/Operations.hi is missing
  cannot find libHSprimitive-0.5.0.1.a on library path
There are problems in package multiset-0.2.1:
  Warning: library-dirs: /home/sudeep/.cabal/lib/multiset-0.2.1/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/multiset-0.2.1/ghc-7.4.2 doesn't exist or isn't a directory
  file Data/MultiSet.hi is missing
  file Data/IntMultiSet.hi is missing
  cannot find libHSmultiset-0.2.1.a on library path
There are problems in package ghc-paths-0.1.0.9:
  Warning: library-dirs: /home/sudeep/.cabal/lib/ghc-paths-0.1.0.9/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/ghc-paths-0.1.0.9/ghc-7.4.2 doesn't exist or isn't a directory
  file GHC/Paths.hi is missing
  cannot find libHSghc-paths-0.1.0.9.a on library path
There are problems in package canonical-filepath-1.0.0.2:
  Warning: library-dirs: /home/sudeep/.cabal/lib/canonical-filepath-1.0.0.2/ghc-7.4.2 doesn't exist or isn't a directory
  import-dirs: /home/sudeep/.cabal/lib/canonical-filepath-1.0.0.2/ghc-7.4.2 doesn't exist or isn't a directory
  file System/FilePath/Canonical.hi is missing
  cannot find libHScanonical-filepath-1.0.0.2.a on library path

The following packages are broken, either because they have a problem
listed above, or because they depend on a broken package.
scion-0.3
atto-lisp-0.2.1.1
blaze-textual-0.2.0.8
vector-0.10.0.1
unix-compat-0.3.0.2
network-2.3.2.0
parsec-3.1.3
mtl-2.1.2
transformers-0.3.0.0
blaze-builder-0.3.1.0
attoparsec-0.10.4.0
text-0.11.2.3
temporary-1.1.2.4
primitive-0.5.0.1
multiset-0.2.1
ghc-paths-0.1.0.9
canonical-filepath-1.0.0.2 
```

# javascript - jQuery UI 和拆分器

> ID：15309163
> 
> 赞同：10
> 
> 时间：2013-03-09T09:27:42.720
> 
> 标签：javascript, jquery, jquery-ui, portlet

[使用 jQuery UI，我怎样才能使用像http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html)上的一种拆分器功能 ？

我问这个是因为我需要在我的页面上实现两件事；Portlet（可拖动） :: [http://jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets) 和垂直拆分器 :: [http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html)

我不确定如果我包含 2 个独立的库（即使两者都是基于 jQuery）的编码实践有多好；像[http://host.sonspring.com/portlets/](http://host.sonspring.com/portlets/)用于 Portlets 和[http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html)用于拆分器

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-07T12:12:46.090

下面是一个关于如何使用 jQuery UI 创建拆分器的示例：

HTML：

```
<div class="wrap">
    <div class="resizable resizable1"></div>
    <div class="resizable resizable2"></div>
</div> 
```

脚本：

```
$(function () 
{
    $(".resizable1").resizable(
    {
        autoHide: true,
        handles: 'e',
        resize: function(e, ui) 
        {
            var parent = ui.element.parent();
            var remainingSpace = parent.width() - ui.element.outerWidth(),
                divTwo = ui.element.next(),
                divTwoWidth = (remainingSpace - (divTwo.outerWidth() - divTwo.width()))/parent.width()*100+"%";
                divTwo.width(divTwoWidth);
        },
        stop: function(e, ui) 
        {
            var parent = ui.element.parent();
            ui.element.css(
            {
                width: ui.element.width()/parent.width()*100+"%",
            });
        }
    });
}); 
```

这是一个流行的脚本。我为流体布局添加了一些修改。

[jsFiddle 示例](http://jsfiddle.net/8qzTJ/86/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T06:15:24.057

我使用 Dmitriy 的回答作为我实施的基础。请注意，当滑块向右拖动时，没有什么可以阻止特定实现将边界框加倍。

我现在需要一个简单的不可移动拆分器（以使窗格将来可调整大小），并且我的应用程序已经在使用 jQuery，因此我通过更改他的部分代码来实现这一点，如下所示：

```
$(function () 
{
    $(".resizable1").resizable(
    {
        autoHide: false,
        containment: "#wrap",
        ... 
```

我还更改了 css 光标样式（除其他外）以防止可调整大小的光标显示如下：

```
.ui-resizable-e { 
    cursor: default; 
    ... 
```

谢谢德米特里！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T14:17:21.917

我的第一个想法是：首先选择除最后一个之外的所有框。那些在他们的右侧有一个分离器。然后，当拆分器移动时，只有接触拆分器的两个框被调整大小。

这是一个可以复制粘贴的示例；它按原样工作。这可以用于任意数量的列；只要确保你也适应了CSS。

我添加了一些按钮来展开 1 个框；还有一个重置按钮。

```
<!DOCTYPE HTML> 
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jQuery UI 4-Column Splitter</title>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
    <style>
      body {
        padding: 0;
        margin: 0;
      }
      .wrap {
        width: 100%;
        white-space: nowrap;
        background-color: #c0c0c0;
      }
      .resizable {
          width: 25%;
          height: 120px;
          display: inline-block;
          overflow: hidden;
      }
      .ui-resizable-e { 
          cursor: e-resize; 
          width: 10px; 
          top: 0; 
          bottom: 0; 
          background-color: gray;
          z-index: 10;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="resizable"> HELLO  </div>
      <div class="resizable"> WORLD </div>
      <div class="resizable"> FOO </div>
      <div class="resizable"> BAR </div>
    </div>
    <div id="controls">
      <input type="button" value="expand 0" data-index="0" class="expand">
      <input type="button" value="expand 1" data-index="1" class="expand">
      <input type="button" value="expand 2" data-index="2" class="expand">
      <input type="button" value="expand 3" data-index="3" class="expand">
      <input type="button" value="reset" class="reset">
    </div>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
    <style type="text/css" media="all">
    </style>
    <script type="text/javascript">
      $(function () {
        // settings
        var minWidth = 15;
        var splitterWidth = 10;  // this sh ould match the css value

        var splitter   =  $('.ui-resizable-e');
        var container =   $('.wrap');
        var boxes =       $('.resizable');

        var subBoxWidth = 0;

        $(".resizable:not(:last)").resizable({
          autoHide: false,
          handles: 'e',
          minWidth: minWidth,

          start: function(event, ui) {
            // We will take/give width from/to the next element; leaving all other divs alone.
            subBoxWidth = ui.element.width() + ui.element.next().width();
            // set maximum width
            ui.element.resizable({
              maxWidth: subBoxWidth - splitterWidth - minWidth
            });
          },

          resize: function(e, ui) {
            var index = $('.wrap').index( ui.element );
            ui.element.next().width(
              subBoxWidth - ui.element.width()
            );
          },

        });
        // collapses all the other boxes to the minimum width; expands the chosen box to what ever width is left
        $('.expand').click(function () {
          var index = $(this).data('index');
          var boxesToCollapse = boxes.length - 1;
          var widthLeft = container.width() - boxesToCollapse * (minWidth + splitterWidth);
          for (var i=0; i<boxes.length; i++) {
            boxes.eq(i).width( i==index ? widthLeft : minWidth);
          }
        });
        $('.reset').click(function () {
          boxes.removeAttr('style');
        });
      });
    </script>

  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T16:21:53.553

Shield UI 框架的拆分[器组件](http://demos.shieldui.com/web/splitter/basic-usage)部分允许您混合使用水平和垂直拆分器。

# hibernate - 堆异常的解决方案

> ID：15309166
> 
> 赞同：2
> 
> 时间：2013-03-09T09:27:58.983
> 
> 标签：hibernate, memory-management, solr, heap-memory

我有一个专用服务器来托管我的应用程序，它有一个 mysql、tomcat 和一个为 solr 服务器运行的专用服务器应用程序。服务器有一个 64gb 硬盘和 4gb 内存。

所以现在我的数据库增加到了 14gb，solr 索引大小增加到了 4.5gb，堆大小从 tomcat 增加到了 4gb，但是当我尝试执行数据库操作时，我得到了 jave 堆空间异常并且具有小数据库条目的相同应用程序运行良好。

那么如何在不妨碍我当前正在运行的应用程序的情况下摆脱异常，以及可能的解决方案是什么。

这个异常是由于我的应用程序中使用的休眠查询引起的吗？如果是的话，应该做哪些改变，这样应用程序就不会再次面临这个异常，因为我的数据库和 solr 可能打算增长。

任何建议都是可观的。提前致谢

异常跟踪：

```
[ERROR] Exception while dispatching incoming RPC call
x.x.action.StandardDispatchService.execute(x.x.action.Action) throws x.x.action.exception.DispatchException' threw an unexpected exception: java.lang.OutOfMemoryError: Java heap space
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:263)
    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:178)
    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:62)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2931)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2871)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3414)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:910)
    at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1405)
    at com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2816)
    at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:467)
    at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2510)
    at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1746)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2135)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1869)
    at org.hibernate.loader.Loader.doQuery(Loader.java:718)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:1953)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3270)
    at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)
    at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1080)
    at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1028)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:623)
    at org.hibernate.type.EntityType.resolve(EntityType.java:431)
    at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:140)
      [ERROR] Out of memory; to increase the amount of memory, use the -Xmx flag at startup (java -Xmx128M ...)
[ERROR] 500 - POST /x/dispatch (x) 57 bytes
   Request headers
      Host: x
      User-Agent: Mozilla/5.0 (X11; Linux i686; rv:16.0) Gecko/20100101 Firefox/16.0
      Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
      Accept-Language: en-US,en;q=0.5
      Accept-Encoding: gzip, deflate
      Connection: keep-alive
      Referer: http://x/x.html
      X-GWT-Permutation: HostedMode
      X-GWT-Module-Base: http:/x/x/
      Content-Type: text/x-gwt-rpc; charset=utf-8
      Content-Length: 6554
      Pragma: no-cache
      Cache-Control: no-cache
      Cookie: JSESSIONID=685w5nqkzsap
   Response headers
      Content-Type: text/plain 
```

# javascript - 用d3绘制路径？

> ID：15309170
> 
> 赞同：0
> 
> 时间：2013-03-09T09:28:23.867
> 
> 标签：javascript, json, d3.js

我正在尝试使用 d3 生成路径并按数据集设置颜色。路径的颜色由“Req”设置，并通过一组点绘制路径，但是在获取数据时我遇到了一些解析问题。我的数据格式如下所示。

```
var feature = {"section":[
  {"ID": 1,"Req": 10,"Name": "Jame","point": [{"x": 1,"y": 1},{"x": 5,"y": 5},{"x": 20,"y": 30},{"x": 200,"y": 200}]},
  {"ID": 2,"Req": 20,"Name": "John","point": [{"x": 1,"y": 1},{"x": 7,"y": 10},{"x": 100,"y": 10},{"x": 20,"y": 200}]}  
]}; 
```

为了获得数据集中 x 和 y 的坐标，我具有线生成器的功能，如下所示

```
var line = d3.svg.line()
     .interpolate("linear")
     .x(function(d) { d.point.forEach(function(a){ return a.x;});})
     .y(function(d) { d.point.forEach(function(a){ return a.y;});}); 
```

我在数据集中使用“Req”值设置路径的样式颜色。

```
canvas.selectAll("path")
    .data(feature.section)
    .enter()
    .append("path")
    .attr("d", line(feature.section))
    .attr("fill", "none")
    .style("stroke", function(d) {
       var returnColor;
       if (d.Req > 5){returnColor ="green";}
       else if (d.Req > 10){returnColor ="purple";}
       else if (d.Req > 15){returnColor ="red";}
       else{returnColor = "#ccc";}
       return returnColor;
    }); 
```

但我没有在屏幕上显示线。调试控制台总是显示 Error: Problem parsing d="MNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaN"

我错过了什么？

[您还可以在http://jsfiddle.net/agadoo/RZQxV/](http://jsfiddle.net/agadoo/RZQxV/)上看到我的此代码示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:09:31.223

看起来您正在尝试绘制多条路径，每个请求 ID 一条。在这种情况下，您需要的是[嵌套选择](http://bost.ocks.org/mike/nest/)。

要绘制路径，您可以将数组传递给函数，并在定义中`.data()`给出`x`和函数，以从该数组的每个元素中提取相关数据。也就是说，您在那里指定的函数应该只返回一个点的和坐标。所以你会把它们改成类似`y``d3.svg.line()``x``y`

```
.x(function(d) { return d.x; }) 
```

我在[这里](http://jsfiddle.net/RZQxV/2/)修改了你的 jsfiddle 。请注意，在这种情况下，您无法以与您不再相同的方式获取线条的颜色，因为该数据在该级别不可用。有几种方法可以克服这个问题，最直接的可能是重新格式化您的数据。d3 数组函数（尤其是[`d3.nest()`functions](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest)）在这里应该很有帮助。

最后一点，您设置线条颜色的检查不会像您预期的那样工作。`d.Req > 5`如果 ，则为真`d.Req > 10`，因此您的第二个和第三个条件将永远不会满足，因为它们已经被第一个条件覆盖。

# java - 从Java中给定范围内的URL逐字节读取

> ID：15309171
> 
> 赞同：0
> 
> 时间：2013-03-09T09:28:27.900
> 
> 标签：java, url, bytearray, httpurlconnection, urlconnection

嗨 StackOverflow 家族，

我的目标是获取`URL`给定范围内的文件内容。为了做到这一点，我有两个字节，一个是起始字节，另一个是结束字节。

但是，我不知道该怎么做。我实际上是使用字节数组逐字节读取。

我在代码上添加了解释，谢谢。

这是我的代码：

```
 // Scenario - 1
        if(args.length == 3){ // 3 OLACAK
            con.setRequestMethod("GET");

            fromURL = new BufferedInputStream(con.getInputStream(), bufSize);
            toFile = new BufferedOutputStream(new FileOutputStream(outputFile), bufSize);   

            if(con.getResponseCode() == HttpURLConnection.HTTP_OK){
                // READING BYTE BY BYTE HERE
                int read = -1;
                byte[] buf = new byte[bufSize];
                while ((read = fromURL.read(buf, 0, bufSize)) >= 0) {
                    toFile.write(buf, 0, read);
                }
                toFile.close();
                System.out.println("ok");
            }
        // Scenario - 2
        }else if(args.length == 0){
            con.setRequestMethod("HEAD");

            if(con.getResponseCode() == HttpURLConnection.HTTP_OK){
                byte startRange =  0; //Integer.parseInt(args[3]);
                byte finishRange =  25;//Integer.parseInt(args[4]);

                System.out.println(con.getContentLength());
                if(startRange < 0 || finishRange > ((byte)con.getContentLength())){
                    System.out.println("Range is not OK.");
                }else{                     

                    int read = -1;
                    byte[] buf = new byte[finishRange];

                    // HOW TO INCLUDE START AND END BYTES TO THIS PART OF CODE??????
                    //////////////////////////////////////////////////////////////
                    while ((read = fromURL.read(buf, 0, finishRange)) >= startRange) {
                        //toFile.write(buf, 0, read);
                    }
                    toFile.close();

                    System.out.println("AAA");   
                }  
            }
        }else{
            System.out.println("Wrong argument count.");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:47:20.990

假设您要读取 range 中的字节，一种解决方案是跳过起始字节，`[startRange, finishRange]`然后读取`finishRange`.`InputStream`

```
long skipped = fromURL.skip(startRange);
if(skipped == startRange) {
   // OK There was enough bytes to be skipped
   if((read = fromURL.read(buf, 0, finishRange)) > -1) {
      //toFile.write(buf, 0, read);
   }
} else {
   // TODO Handle error when there was not enough bytes to be skipped
} 
```

# google-app-engine - 用python更新实体值GAE

> ID：15309172
> 
> 赞同：-5
> 
> 时间：2013-03-09T09:28:44.323
> 
> 标签：google-app-engine

```
class UserData(db.Model):
    user_name = db.StringProperty()
    pass_word = db.StringProperty() 
    points = db.IntegerProperty() 
```

如果我想更新“点”实体怎么办？阅读谷歌文档，发现没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:16:12.160

我不认为你搜索/阅读文档很辛苦。

[https://developers.google.com/appengine/docs/python/datastore/overview#Python_Datastore_API](https://developers.google.com/appengine/docs/python/datastore/overview#Python_Datastore_API)

讨论如何使用和创建/更新实体。

基本的 API 文档也详细介绍

模型类文档甚至告诉你

[https://developers.google.com/appengine/docs/python/datastore/modelclass](https://developers.google.com/appengine/docs/python/datastore/modelclass)

# video-streaming - QVC 如何将其频道流式传输到其网站？

> ID：15309175
> 
> 赞同：0
> 
> 时间：2013-03-09T09:28:58.500
> 
> 标签：video-streaming, magento-1.7

我有关于如何将电视流式传输到网站的一般信息。一个购物频道询问我是否可以像 QVC 一样将实时频道供稿集成到他们的网站上。

他们目前使用 Magento 作为他们的平台，但我不确定 QVC 使用什么。

我很想知道是否有人对此有任何想法或想法...

这是我所指内容的链接。我不太确定这是直播

[http://www.qvcuk.com/LiveShowDisplay?storeId=10252&catalogId=10152&langId=-2](http://www.qvcuk.com/LiveShowDisplay?storeId=10252&catalogId=10152&langId=-2)

# python - 正则表达式仅在特定字符出现之前匹配字符（条件正则表达式）

> ID：15309179
> 
> 赞同：4
> 
> 时间：2013-03-09T09:29:15.217
> 
> 标签：python, regex, regex-lookarounds

开发移动（以色列）电话号码正则表达式。目前我有

```
re.compile(r'^[\(]?0?(5[023456789])\)?(\-)?\d{7}$') 
```

它涵盖了大多数用例。只有出现第一个括号时，问题才匹配第二个括号。

所以 (055)-5555555 或 (055)5555555 或 0555555555 会匹配，但： 055)-5555555 不会。我知道我可以使用 2 个正则表达式来测试条件（如果第一个匹配另一个条件的测试），但这似乎不是一个聪明的解决方案。

我想我需要一些类似正则表达式的东西，但不确定如何使用它，或者我正确理解了这个概念

**编辑：解释逻辑**

区号：应以 5 开头，然后是一个数字（来自特定列表），前面有一个选项 0。也可能在括号内。然后是一个可选的连字符和 7 位数字

**澄清：**只有当另一个括号存在时，我才需要匹配两个括号，第一个也是如此，不仅是第二个，错过了这一点

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T10:07:59.823

首先，您必须捕获左括号，然后使用[条件模式](http://www.php.net/manual/en/regexp.reference.conditional.php)（*我知道链接指向 php.net，但我发现它在引用正则表达式时很有用，它还包括一个与您的情况完全匹配的示例*），只有在第一个左括号匹配。

图案..

```
^(\()?0?(5[02-9])(?(1)\))-?(\d{7})$ 
```

将**匹配**：

```
(055)-5555555
(055)5555555 
0555555555 
```

但**不是**：

```
055)-5555555 
```

## 捕获的组

1.  左括号（如果没有找到则为空）
2.  区号（例如 55）
3.  电话号码（例如 5555555）

## 这个怎么运作

该部分`(\()?`与左括号匹配。这是可选的。

该部分`(?(1)\))`检查第一个捕获的组（在我们的例子中是左括号）是否匹配，如果**是**，则字符串也**必须**匹配右括号。

如果没有找到左括号，则有效地忽略该条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T09:39:08.540

仅当左括号匹配时，才使用`(?(id/name)yes-pattern|no-pattern)`语法匹配右括号：

```
re.compile(r'^(\()?0?(5[023456789])(?(1)\))-?\d{7}$') 
```

如果存在组 1，则该`(?(1)\))`部分匹配（无模式是可选的）。`\)``|`

演示：

```
>>> phone.search('(055)-5555555')
<_sre.SRE_Match object at 0x101e18a48>
>>> phone.search('055)-5555555') is None
True 
```

# android - 安卓。异步任务

> ID：15309188
> 
> 赞同：0
> 
> 时间：2013-03-09T09:30:13.293
> 
> 标签：android, ddms

我正在使用广告网络在我的应用中展示一些广告。他们库中的`loadAd`函数有时会导致模拟器冻结（可能是因为某些防火墙问题）。

无论如何，我已经开始使用`AsyncTasks`我实际调用该`loadAd`方法（因此 UI 不再冻结）从他们的服务器请求横幅或任何内容。

每当我重新启动我的 时，都会调用`Activity`的`onDetroy`方法。`Activity`在那里，我调用该`AscynTask's` `cancel`方法，以便它取消任务并......大概停止/删除线程。

通过 DDMS，我注意到以下几点：

见快照：[http ://bayimg.com/EAkBaAaEH](http://bayimg.com/EAkBaAaEH)

每次我调用` `execute`onDestroy () `AsyncTask`.`AsynkTasks``cancel(true)`

重新启动后`Activity`，将创建另外两个`AsyncTasks`线程（#3 和#4）。

在另一个重新启动之后，又创建了`Activity`一个`AsynkTask`（#5）。

**我怎样才能真正杀死任务？就像完全停止他们的执行一样？还是他们真的停止了，我只是误解了 DDMS？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:38:56.017

确保您没有在 Asynctask doinBackground 中执行一段时间（真）（长连续任务）之类的事情，asynctask 不应用于后台线程中的长/连续进程，如果它是一个小的后台任务，它将完成而不是 onPostExecute如果在 doinbackground 执行期间调用了取消，则将调用 oncancellistener...

至于仍然留在 DDMS 中，请检查： [执行后 AsyncTask 线程仍然存在，这正常吗？](https://stackoverflow.com/questions/6714085/asynctask-thread-still-there-after-execute-is-that-normal)

它没有什么可怕的只是空闲线程，因为 asynctasks 在线程池中运行。空闲线程等待下一个异步任务被执行

# tomcat - 如何在 IntelliJ 10.5 中使用 2 个不同的 Tomcat 服务器？

> ID：15309189
> 
> 赞同：1
> 
> 时间：2013-03-09T09:30:14.817
> 
> 标签：tomcat, intellij-idea

我正在使用 IntelliJ 10.5

我想部署 2 个不同的战争文件，它们将在不同的端口上工作。我尽我所能，但无法让它发挥作用。

有什么帮助吗？

（我想要 2 个不同端口上的 2 个 Tomcat 服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:00:49.943

在 IDEA 中定义 2 个不同的 Tomcat 服务器`Settings`| `Application Servers`，其中一个需要更改端口，`config/server.xml`以便您可以同时启动 2 个副本。在 IDEA 中创建 2 个 Tomcat 运行/调试配置，它们将使用不同的服务器和不同的工件进行部署。

请注意，您不仅需要更改 HTTP 端口，还需要更改`shutdown`端口。

# php - 数组键与字符串字符的比较

> ID：15309190
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:30:23.850
> 
> 标签：php, comparison

我有一个**字符串**，也有一个带有两个键的**数组**，如下所示：

```
$string = "black"; // a string that has 5 characters 

$array = array(0=>"c", // an array that has two keys "c" and "b"
               1=>"b") 
```

**要求：**

我需要一个循环来迭代数组的第一个键值并将其与字符串的所有字符进行比较，然后将数组的第二个键值与字符串的所有字符进行比较。

如果键与字符串的字符匹配，则打印字符串字符，否则打印星号 (*)。像这样的东西：

```
if($string[$character] == $array[$key]){

echo $string[$character];

      }
         else{
                echo "*";

                            }
//So in this case, Final Output should be:
// Final Output = b**c* 
```

我怎样才能实现**最终输出**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:33:15.070

循环字符串并使用`in_array()`：

```
$string = "black"; // a string that has 5 characters 
$array = array(0=>"c", // an array that has two keys "c" and "b"
               1=>"b");

for($i=0; $i<strlen($string); $i++){

    if(in_array($string[$i], $array)){
        echo $string[$i];
    } else {
        echo '*';
    }

}

// b**c* 
```

[键盘示例](http://codepad.org/Ii6wWSxf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:36:12.307

我知道我有点晚了，但这也可以解决问题：

```
$string = "black"; 
$array = array(0=>"c",
               1=>"b") ;

echo preg_replace("/[^". implode($array) ."]/", "*", $string); 
```

输出：`b**c*`

# c++ - 是否有一种快速算法的计算能力是二分之一的倍数？

> ID：15309192
> 
> 赞同：2
> 
> 时间：2013-03-09T09:30:36.810
> 
> 标签：c++, performance, differential-equations, computation

我正在编写一个解决平面受限三体问题的程序。其方程如下。此函数计算位置和速度的导数并将它们写入数组。

```
valarray<double> force(double t, valarray<double> r)
{
    valarray<double> f(dim);
    valarray<double>r0(r-rb0);
    valarray<double>r1(r-rb1);      

    f[0]=   2 * r[1] + r[2] - (1 - mu)*r0[2]/norm3(r0) - mu*r1[2]/norm3(r1);
    f[1]= - 2 * r[0] + r[3] - mu*r0[3]/norm3(r0) - mu*r1[3]/norm3(r1);
    f[2] = r[0];
    f[3] = r[1];
    return f;
}

double norm3(valarray<double> x)
{
    return pow(x[2]*x[2]+x[3]*x[3],1.5);
} 
```

所以我必须计算位置向量的平方，然后将其提高到 3/2 的幂。我认为这些操作占用了很大一部分计算时间。

现在我使用 math.h 的 pow 函数。是否有另一种更快的算法来计算这种能力？我尝试使用[快速反平方根](http://en.wikipedia.org/wiki/Fast_inverse_square_root)（稍后再进行立方），但它为我的目的提供了太不精确的值并且工作时间更长（可能是因为立方）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:36:34.143

一个简单的方法可能是尝试 x*sqrt(x)，但可以肯定地对其进行基准测试。

```
double norm3(valarray<double> x)
{
    double result=x[2]*x[2]+x[3]*x[3];
    result=result * sqrt(result);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:57:50.520

`FSQRT`Family 15h AMD64 处理器需要 52 个周期。SSE2 变体将 29 用于标量值，将 38 用于打包操作。C 版本的`sqrt()`可能是一些额外的指令，但我怀疑它更多。

如果您想要相对精确的结果，我怀疑从其他一些操作中可以获得更好的结果。最有可能的是，任何产生良好精度的涉及`pow()`和`exp()`等`log()`的东西都需要更长的时间。

但是，在互联网上询问并不能超过您自己的基准。如果这是您代码的关键部分，请尝试一些不同的变体，看看您会得到什么。

# xml - XML Twig 总是编辑 XML

> ID：15309193
> 
> 赞同：1
> 
> 时间：2013-03-09T09:30:41.797
> 
> 标签：xml, perl, xml-twig

我确定我没有正确使用它，我的代码：

```
#!/usr/bin/env perl
use strict;
use warnings;
use XML::Twig;

XML::Twig->new( pretty_print  => 'indented',
                twig_handlers => { '//Item[@PartNumber]' => \&_pitem
                                  },
)->parsefile_inplace( 'order2.xml', '.bak' );

sub _pitem {
    $_->set_text(...) if (....);
} 
```

如果 XML 中没有与该 XPath 表达式匹配的元素，则 XML 似乎是空的……它会截断文件。我想要的行为是：如果没有匹配的元素，则根本避免编辑 XML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:00:51.620

如果您使用`parsefile_inplace`，则无论如何该文件都将被覆盖。

您需要`flush`该文件，或在必要时自行管理新文件的创建。

您可以使用代码 from[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)作为基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:04:54.187

您没有编写任何*输出*任何 XML 的内容。

你应该`twig_roots`这样使用

```
my $twig = XML::Twig->new(
    twig_roots               => { '//Item[@PartNumber]' => \&_pitem },
    twig_print_outside_roots => 1,
    pretty_print             => 'indented',
);

$twig->parsefile_inplace( 'order2.xml', '.bak' );

sub _pitem {
    $_->set_text(...) if (....);
    $_->print;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:01:06.857

在 _pitem 的末尾，您必须

```
$_->flush; 
```

# http - 如何使用 Emacs 通过 HTTP 打开远程文件？

> ID：15309204
> 
> 赞同：19
> 
> 时间：2013-03-09T09:31:57.080
> 
> 标签：http, emacs

大多数开源软件都通过一些 HTTP 服务公开其代码。我想从 Emacs 打开和浏览这样的代码，但 AFAICS tramp 只允许`ssh`和`ftp`.

因此，我的第一个问题是如何打开一个 HTTP URL 以便从 Emacs 中读取。然后，可能更高级的问题是如何从 shell 和`emacsclient`.

你会怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-10T04:31:36.567

`M-x` `browse-url-emacs` `RET` `http...` `RET`

之后您可能需要使用`M-x` `normal-mode` `RET`来为缓冲区设置适当的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T02:57:21.363

emacs 有两个或三个 html 查看器；我会使用[emacs-w3m](http://www.emacswiki.org/emacs/emacs-w3m)。如果你想通过 HTTP(S) 远程编辑一些东西，也许 Tramp 的[`dav`外部方法](http://www.gnu.org/software/tramp/#GVFS-based-methods)对你有用。

# r - 在 R 中的聚合中命名列

> ID：15309205
> 
> 赞同：65
> 
> 时间：2013-03-09T09:31:58.070
> 
> 标签：r, rename, aggregate

我知道我可以在聚合数据后 *re*name 列：

```
blubb <- aggregate(dat$two ~ dat$one, ...)
colnames(blubb) <- c("One", "Two") 
```

没有错。但是有没有办法一次性聚合和命名列？有点像：

```
blubb <- aggregate( ... , cols = c("One", "Two")) 
```

以某种方式捕获原始列名并这样做会特别好（并且防错字）：

```
blubb <- aggregate( ... , cols = c(name_of_dat$one, name_of_dat$two."_Mean")) 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-09T09:34:05.067

您可以使用`setNames`如下：

```
blubb <- setNames(aggregate(dat$two ~ dat$one, ...), c("One", "Two")) 
```

或者，您可以绕过巧妙的公式方法，并使用如下语法：

```
blubb <- aggregate(list(One = dat$one), list(Two = dat$two), ...) 
```

* * *

### 更新

此更新只是帮助您开始自行获取解决方案。

如果您检查 的代码`stats:::aggregate.formula`，您将在最后看到以下几行：

```
if (is.matrix(mf[[1L]])) {
    lhs <- as.data.frame(mf[[1L]])
    names(lhs) <- as.character(m[[2L]][[2L]])[-1L]
    aggregate.data.frame(lhs, mf[-1L], FUN = FUN, ...)
}
else aggregate.data.frame(mf[1L], mf[-1L], FUN = FUN, ...) 
```

如果您只想将函数名称附加到聚合的变量中，也许您可​​以将其更改为：

```
if (is.matrix(mf[[1L]])) {
  lhs <- as.data.frame(mf[[1L]])
  names(lhs) <- as.character(m[[2L]][[2L]])[-1L]
  myOut <- aggregate.data.frame(lhs, mf[-1L], FUN = FUN, ...)
  colnames(myOut) <- c(names(mf[-1L]), 
                       paste(names(lhs), deparse(substitute(FUN)), sep = "."))
}
else {
  myOut <- aggregate.data.frame(mf[1L], mf[-1L], FUN = FUN, ...)
  colnames(myOut) <- c(names(mf[-1L]), 
                       paste(strsplit(gsub("cbind\\(|\\)|\\s", "", 
                                           names(mf[1L])), ",")[[1]],
                             deparse(substitute(FUN)), sep = "."))
} 
myOut 
```

`FUN`这基本上捕获了使用输入的值`deparse(substitute(FUN))`，因此您可以修改函数以接受自定义后缀，甚至可能是后缀向量。这可能可以通过一些工作来改进，但我不会这样做！

这是应用此概念[的要点](https://gist.github.com/mrdwab/5123896)，创建了一个名为“myAgg”的函数。

*以下是结果列名的*一些示例输出：

```
> names(myAgg(weight ~ feed, data = chickwts, mean))
[1] "feed"        "weight.mean"
> names(myAgg(breaks ~ wool + tension, data = warpbreaks, sum))
[1] "wool"       "tension"    "breaks.sum"
> names(myAgg(weight ~ feed, data = chickwts, FUN = function(x) mean(x^2)))
[1] "feed"                         "weight.function(x) mean(x^2)" 
```

请注意，只有聚合变量名称会更改。但也要注意，如果你使用自定义函数，你最终会得到一个非常奇怪的列名！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-18T08:49:47.543

你的第一个问题的答案是肯定的。您当然可以在聚合函数中包含列名。使用上面示例中的名称：

`blubb <- aggregate(dat,list(One=dat$One,Two=dat$Two),sum)`

我喜欢关于可能自动提取原始列名的部分。如果我弄清楚了，我会发布它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-12T09:42:43.510

如果您更喜欢编写聚合，因为`formula`文档显示了`cbind`. 并`cbind`允许您命名它的参数，由`aggregate`.

```
aggregate(cbind(SLength = Sepal.Length) ~ cbind(Type = Species),
  data = iris, mean)
#  Type SLength
#1    1   5.006
#2    2   5.936
#3    3   6.588 
```

但`cbind`取而代之`factors`的是他们的内部代码。为避免这种情况，您可以使用：

```
aggregate(SLength ~ Type, with(iris, data.frame(SLength = Sepal.Length,
  Type = Species)), mean)
#        Type SLength
#1     setosa   5.006
#2 versicolor   5.936
#3  virginica   6.588 
```

或者

```
with(iris, aggregate(data.frame(SLength = Sepal.Length),
  data.frame(Type = Species), mean))
#        Type SLength
#1     setosa   5.006
#2 versicolor   5.936
#3  virginica   6.588 
```

或者

```
aggregate(data.frame(SLength = iris$Sepal.Length),
  data.frame(Type = iris$Species), mean)
#        Type SLength
#1     setosa   5.006
#2 versicolor   5.936
#3  virginica   6.588 
```

使用`cbind`或`data.frame`比较的优点`list`是并非所有列都需要指定一个（新的）名称。可以通过多个分组因子聚合多个列，如下所示：

```
aggregate(cbind("Miles/gallon" = mpg, Weight = wt, hp) ~ cbind(Cylinders =
  cyl) + cbind(Carburetors = carb) + gear, data = mtcars, mean)
#   Cylinders Carburetors gear Miles/gallon  Weight    hp
#1          4           1    3        21.50 2.46500  97.0
#2          6           1    3        19.75 3.33750 107.5
#... 
```

如果您想使用多个功能：

```
aggregate(cbind(cases=ncases, ncontrols) ~ cbind(alc=alcgp) + tobgp,
  data = esoph, FUN = function(x) c("mean" = mean(x), "median" = median(x)))

#   alc    tobgp cases.mean cases.median ncontrols.mean ncontrols.median
#1    1 0-9g/day  1.5000000    1.0000000      43.500000        47.000000
#2    2 0-9g/day  5.6666667    4.0000000      29.833333        34.500000
#... 
```

它将使用的聚合函数添加到 colname 中。

赫拉再次被他们的内部代码`cbind`取代。`factors`为避免这种情况，您可以使用：

```
with(esoph, aggregate(data.frame(cases=ncases, ncontrols),
 data.frame(alc=alcgp, tobgp),
 FUN = function(x) c("mean" = mean(x), "median" = median(x))))
#         alc    tobgp cases.mean cases.median ncontrols.mean ncontrols.median
#1  0-39g/day 0-9g/day  1.5000000    1.0000000      43.500000        47.000000
#2      40-79 0-9g/day  5.6666667    4.0000000      29.833333        34.500000
#... 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-08-18T23:07:10.953

```
w <- data.frame(Funding<-"Fully Insured",Region="North East",claim_count=rnbinom(1000, 300.503572818, mu= 0.5739467))
x <- data.frame(Funding<-"Fully Insured",Region="South East",claim_count=rnbinom(1000, 1000, mu= 0.70000000))
y <- data.frame(Funding<-"Self Insured",Region="North East",claim_count=rnbinom(1000, 400, mu= 0.80000000))
z <- data.frame(Funding<-"Self Insured",Region="South East",claim_count=rnbinom(1000, 700, mu= 1.70000000))
names(w)<-c("Funding","Region","claim_count")
names(x)<-c("Funding","Region","claim_count")
names(y)<-c("Funding","Region","claim_count")
names(z)<-c("Funding","Region","claim_count")
my_df <- rbind(w,x,y,z)
my_df2<-with(my_df, aggregate(x=claim_count, by=list(Funding,Region), FUN=sum))
colnames(my_df2)<-colnames(my_df) 
```

# java - android将十六进制转换为字符

> ID：15309211
> 
> 赞同：0
> 
> 时间：2013-03-09T09:32:56.270
> 
> 标签：java, android, hex

我想知道如何将“\u106A”转换为“A”或其他什么？我发现以下编码将十六进制转换为字符，但它失败了

```
public static String convertHexToString(String hex){         
  StringBuilder sb = new StringBuilder();
  StringBuilder temp = new StringBuilder();

  for( int i=0; i<hex.length()-1; i+=2 ){
      String output = hex.substring(i, (i + 2));
      int decimal = Integer.parseInt(output, 16);
      sb.append((char)decimal);
      temp.append(decimal);
  }
  return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:50:26.827

您可以[`StringEscapeUtils.unescapeJava`](http://commons.apache.org/proper/commons-lang//javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#unescapeJava%28java.lang.String%29)在[`Commons Lang`](http://commons.apache.org/proper/commons-lang//download_lang.cgi)Apache 库中使用。

```
final String input = "\\u0048\\u0065\\u006c\\u006c\\u006f\\u002c\\u0020\\u0057\\u006f\\u0072\\u006c\\u0064\\u0021";
final String output = StringEscapeUtils.unescapeJava(input);

System.out.println("Output : " + output);
// Output : Hello, World! 
```

# excel - 确定列表 A 中的名称是否完全匹配、部分匹配或未在列表 B 中找到？

> ID：15309214
> 
> 赞同：1
> 
> 时间：2013-03-09T09:33:17.270
> 
> 标签：excel

在 Excel 中，我有两列属性名称。我需要确定 A 列中的名称在 B 列中是完全匹配、部分匹配还是不匹配。

除了设置它之外让我感到困惑的是，如果有多个部分匹配怎么办 - 我认为用“最佳匹配”组件将其复杂化是不合理的，但我不确定如何处理这个部分。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:40:04.113

**完全符合**

找出是否有完全匹配很容易 - 您可以使用以下`MATCH`功能：

```
=匹配（B1，A：A，0）

```

将返回找到 B1 的行号。将它与 IFERROR 结合起来处理没有任何匹配的元素：

```
=IFERROR(MATCH(B1,A:A,0),"没有完全匹配")

```

或者，如果您只对是否有匹配感兴趣，而不是在哪里，请使用以下`ISERROR`功能：

```
=NOT(ISERROR(匹配(B1,A:A,0)))

```

**部分匹配**

从您的评论中，我了解到“部分匹配”意味着 B 列中的完整字符串作为 A 列中的子字符串出现。您可以使用该`SEARCH`函数。但是，由于搜索只会检查出现在一个单元格中，因此您需要将其组合为数组公式：

```
=匹配（错误，错误（搜索（B1，A1：A100）），0）

```

用`Ctrl`- `Shift`-输入`Enter`。

另请注意，出于性能原因，最好限制搜索范围，即代替`A:A`, 使用`A1:A100`- 或任何您的行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T22:45:19.107

如果您想知道这些值的匹配程度，请考虑使用 Excel 的模糊查找加载项 [http://www.microsoft.com/en-us/download/details.aspx?id=15011](http://www.microsoft.com/en-us/download/details.aspx?id=15011)

下面的这个链接提供了一个演示： [http ://www.k2e.com/tech-update/tips/431-tip-fuzzy-lookups-in-excel](http://www.k2e.com/tech-update/tips/431-tip-fuzzy-lookups-in-excel)

# mysql - 如何结合大小写写总和

> ID：15309215
> 
> 赞同：1
> 
> 时间：2013-03-09T09:33:23.027
> 
> 标签：mysql, spring, hibernate, hql

这是我的代码，它使用休眠期待这样的事情

```
SUM( CASE WHEN model.voter.age 
            between '"+18+"' and '"+25+"' 
            THEN 1 ELSE 0 END) as 18ageCount

org.springframework.orm.hibernate3.HibernateQueryException: 
     expecting IDENT, found '18' near line 1, column 325 
```

我尝试了不同的组合但没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:14:55.843

hibernate`where`子句中使用的[表达式。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#queryhql-expressions)要解决方法，您需要重写查询

```
select sum(1) from model.voter where age between 18 and 25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:49:02.890

只是因为`18ageCount`这个，我重写了它

# android-emulator - 无法从主机连接到 android 模拟器上的服务器

> ID：15309216
> 
> 赞同：1
> 
> 时间：2013-03-09T09:33:23.393
> 
> 标签：android-emulator, android-ndk

我用 NDK 在 android 上编写了简单的服务器，它将在 android 模拟器上的端口 8888 上工作，但我无法从主机上的客户端连接到它。

我添加了

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在清单中。

我尝试使用 telnet 进行重定向：

```
 telnet localhost 5554
 redir add tcp:6666:8888 
```

这里的服务器代码：

```
#include <string.h>
#include <jni.h>

#include <stdio.h>
#include <string.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>

jstring
Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
jobject thiz )
{
int socket_desc , client_sock , c , read_size;
struct sockaddr_in server , client;
char* client_message;
int LEN = 512;

client_message = "I am android server";

socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1)
{
return (*env)->NewStringUTF(env, "Could not create socket");
}

server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8888 );

if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
{
return (*env)->NewStringUTF(env, "bind failed. Error");
}

listen(socket_desc , 3);

c = sizeof(struct sockaddr_in);

client_sock = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);
if (client_sock < 0)
{
return (*env)->NewStringUTF(env, "accept failed");
}

while( (read_size = recv(client_sock , buf , 2*LEN+1 , 0)) > 0 )
{
write(client_sock , client_message , strlen(client_message));
}

if(read_size == 0)
{
return (*env)->NewStringUTF(env, "Client disconnected");
}
else if(read_size == -1)
{
return (*env)->NewStringUTF(env, "recv failed");
}

return (*env)->NewStringUTF(env, "Server closed");
} 
```

以及主机上的客户端代码：

```
#include "stdafx.h"
#include <winsock2.h>
#include <windows.h>
#include <fcntl.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#include <stdio.h>
#include <conio.h>
#include <iostream>

#pragma comment(lib, "Ws2_32.lib")

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{ 

int host_port= 6666;
char* host_name= "localhost";

unsigned short wVersionRequested;
WSADATA wsaData;
int err;
wVersionRequested = MAKEWORD( 2, 2 );
err = WSAStartup( wVersionRequested, &wsaData );

if ( err != 0 || ( LOBYTE( wsaData.wVersion ) != 2 ||
HIBYTE( wsaData.wVersion ) != 2 )) {
fprintf(stderr, "Could not find useable sock dll %d\n",WSAGetLastError());
return 0;
}

int hsock;
int * p_int ;
hsock = socket(AF_INET, SOCK_STREAM, 0);
if(hsock == -1){
printf("Error initializing socket %d\n",WSAGetLastError());
return 0;
}

p_int = (int*)malloc(sizeof(int));
*p_int = 1;

if( (setsockopt(hsock, SOL_SOCKET, SO_REUSEADDR, (char*)p_int, sizeof(int)) == -1 )||
(setsockopt(hsock, SOL_SOCKET, SO_KEEPALIVE, (char*)p_int, sizeof(int)) == -1 ) ){
printf("Error setting options %d\n", WSAGetLastError());
free(p_int);
return 0;
}
free(p_int);

struct sockaddr_in my_addr;

my_addr.sin_family = AF_INET ;
my_addr.sin_port = htons(host_port);

memset(&(my_addr.sin_zero), 0, 8);
my_addr.sin_addr.s_addr = inet_addr(host_name);

cout<<"client ready\n";
if( connect( hsock, (struct sockaddr*)&my_addr, sizeof(my_addr)) == SOCKET_ERROR ){
fprintf(stderr, "Error connecting socket %d\n", WSAGetLastError()); getchar();
return 0;
}
cout<<"connected to server\n"; 

char buffer[1024];
int buffer_len = 1024;
int bytecount;

int c;
memset(buffer, '\0', buffer_len);

for(char* p=buffer ; (c=getch())!=13 ; p++){
printf("%c", c);
*p = c;
}

if( (bytecount=send(hsock, buffer, strlen(buffer),0))==SOCKET_ERROR){
fprintf(stderr, "Error sending data %d\n", WSAGetLastError());
return 0;
}
printf("Sent bytes %d\n", bytecount);

if((bytecount = recv(hsock, buffer, buffer_len, 0))==SOCKET_ERROR){
fprintf(stderr, "Error receiving data %d\n", WSAGetLastError());
return 0;
}
printf("Recieved bytes %d\nReceived string \"%s\"\n", bytecount, buffer);

closesocket(hsock);

return 0;
} 
```

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:18:20.190

解决了！

这是因为我的 Windows 防火墙阻止了此端口（在我的情况下为 6666）并且客户端无法连接到模拟器上的服务器

在 Windows 中解锁端口 - 打开防火墙的额外选项并添加收入连接规则（所有人免费）

# variables - vim：将插件变量的默认值放在哪里？

> ID：15309218
> 
> 赞同：6
> 
> 时间：2013-03-09T09:33:36.720
> 
> 标签：variables, vim, default, vim-plugin

为插件变量设置默认值的最佳方法是什么？

理想情况下，我希望在`.vimrc`加载之前设置这些变量，以便用户可以根据需要覆盖这些值。那可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T10:02:55.063

你在写插件吗？

您的插件可能会在您的用户之后执行`~/.vimrc`：在此之前您不能做任何事情。

您可能会忘记`~/.vimrc`在脚本中执行和使用条件之前做任何事情：

```
if !exists("g:pluginname_optionname")
  let g:pluginname_optionname = default_value
endif 
```

或者，您可以使用自动加载脚本 ( `:h autoload`) 并要求您的用户`~/.vimrc`在进行任何自定义之前将以下内容放入其中：

```
call file_name#function_name() 
```

用那个函数做所有的初始化工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T10:02:20.800

只有在加载插件时变量不存在时，您的插件才应设置默认值。您可以使用该`exists()`功能进行检查。

例如，在插件脚本的顶部：

```
if !exists("g:MyPluginVariable")
    let g:MyPluginVariable = default_value
endif 
```

现在，如果`g:MyPluginVariable`在 vimrc 中设置，它不会被你的插件重新定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T09:16:59.243

还有一种`get()`方法，利用您可以访问全局范围`g:`的优势`Dictionary`：

```
let g:pluginname#optionname = get(g:, 'pluginname#optionname', default_value) 
```

`get()` 查询`g:`范围作为键的 a ，如果在那里找不到`Dictionary`键`pluginname#optionname`，将返回。`default_value`该`let`语句要么重新分配它具有的相同值，要么`default_value`.

优点是，如果您在插件中使用大量具有默认值的变量，则它会更短。

# ruby - Ruby 替代 void 返回类型

> ID：15309219
> 
> 赞同：9
> 
> 时间：2013-03-09T09:33:40.740
> 
> 标签：ruby, void, return-type

我的经验是使用基于 C 的语言（C、C++、Java、C#），其中函数的返回类型可以是 void，即不返回。但在 Ruby 中，似乎每个函数都会返回一些东西。我想知道在 Ruby 中返回什么以获取在 Java 或 C++ 中不返回任何内容的方法。我最好的猜测是 nil 或包含方法（用于链接）的对象，或者只是忽略最后发生的任何事情，但我似乎找不到任何关于此的信息。

Ruby 中 void 的替代方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T09:37:03.393

放

```
return nil 
```

在方法的最后一条语句中。

或者干脆

```
nil 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-19T05:20:26.847

nil 与 void 不同。您可以将变量设置为 nil，但不能将其设置为 void。如果一个函数返回 nil ，它可以被分配给一个没有错误的变量，但是尝试使用一个 void 函数（在 java 或一些支持 void 函数的语言中），编译器会叫。我不是 ruby​​ 超级专家，但我找不到任何迹象表明支持 void 的概念。所有函数都会返回一些东西，即使它是 nil。如果这是不正确的，那么我希望对 ruby​​ 有更多了解的人可以提供一个反例。

变量，尤其是在一切都是对象的 ruby​​ 中，是一个有名称和位置的东西，用于存储指向堆上某处对象的地址。将变量设置为 nil 意味着将其指针设置为 NilClass 的唯一实例。（true 和 false 相似；TrueClass 和 FalseClass 有单个实例。）

我意识到 C 有一个叫做 void 指针的东西。这是对“无效”一词的完全不同的用法。一个 void 指针实际上包含一个地址并指向某个东西。让我们暂时忽略这些；我只是提到他们来阻止徒劳的反驳。我们专注于 ruby​​ 中真正返回*nothing的**函数*，据我所知这些函数并不存在。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:40:45.397

如果您不想返回任何东西，是的，您可以使用 return nil 。但为什么？

通过不将函数调用分配给变量，您可以幸福地忘记返回的内容。该返回值将不会存储在任何地方，并且会在垃圾收集中丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T18:56:31.947

在现代版本的 Ruby 中，[RBS 支持`void`](https://github.com/ruby/rbs/wiki/Writing-Signatures-Best-Practices#prefer-void-over-untyped).

如果您不能使用 RBS，您可以`Void`使用`method_missing`. 它不会阻止分配，但它确实使调试更容易。

```
# frozen_string_literal: true

# Responds to all messages by raising Void::Error.
#
# Use for methods that only produce side-effects and do not return anything.
# The meaning is the same as in C or Java.
#
# ```
# def void_method
#   # do side-effect
#   Void.new
# end
#
# unintentional_assignment = void_method
# # much later ..
# unintentional_assignment.foo
# # => Void::Error (Void from void_method.rb received: foo)
# ```
class Void
  class Error < RuntimeError
  end

  def initialize
    @instantiation_source_location = caller[1] || 'Source unknown'
  end

  def method_missing(method)
    raise(
      Error,
      format(
        'Void from %s received: %s',
        @instantiation_source_location,
        method
      )
    )
  end

  def respond_to_missing?(*)
    true
  end
end 
```*

# android - 图像到blob android

> ID：15309234
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:36:20.483
> 
> 标签：android, image, blob

我在 Android 应用程序中工作。我想将以**JPG/PNG**格式存储的图像转换为 SQL（SQL Server 2008/10）的**BLOB**数据类型。你能给我Java/Android代码吗？任何类型的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:45:29.237

如图所示，首先将图像转换为数组字节，并将字节保存为`blob`sqlite

```
URL url = new URL(UrlToDownlaodImageFrom);
        URLConnection conn = url.openConnection();
        InputStream inStr = conn.getInputStream();
        BufferedInputStream buffInStr = new BufferedInputStream(inStr);
        // Need to check the size of Byte Array Buffer.
        ByteArrayBuffer baf = new ByteArrayBuffer(500);
        int current = 0;
        while ((current = buffInStr.read()) != -1) {
            baf.append((byte) current);
        }
        byte[] array = baf.toByteArray();
        return array; 
```

# php - 如果服务器中不存在文件夹名称，则删除行

> ID：15309235
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:36:27.403
> 
> 标签：php, mysql, delete-row

如果文件夹'files/'中的子文件夹名称在服务器中不存在，我想删除 mysql 数据库行

```
mysql database

id  username   folder_name
1   namenlos   sssgggdddd   
2   megi       terf4vnvsd
3   mike       12gdf23124
.
.

directory:

server directory: 'files/'
                         terf4vnvsd    //subfolder name 'files'
                         12gdf23124    //subfolder name 'files' 
```

但文件夹`sssgggdddd`不存在。

`sssgggdddd`如果文件夹中不存在文件夹名称，如何删除行`files`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:40:20.860

[循环遍历 php 中的所有文件夹名称，并使用is_dir()](http://php.net/manual/en/function.is-dir.php)对它们进行检查：

```
if (!is_dir('files/' . $foldername_name)) {
  DELETE FROM table_name WHERE folder_name = $folder_name
} 
```

# azure - Azure Web-Role 连接到虚拟机上的 SQL Server 的连接字符串

> ID：15309237
> 
> 赞同：2
> 
> 时间：2013-03-09T09:36:32.707
> 
> 标签：azure, azure-web-roles, azure-virtual-machine, azure-virtual-network

我正在使用以下连接字符串将 Azure Web-Role 连接到在虚拟机上运行的 SQL 实例。它工作正常！

```
<add key="VMConnectionString" value="Server=tcp:<mydomain>.cloudapp.net,1433;Database=myDatabase;User Id=myUserID;Password=**********;" /> 
```

我的问题是，我应该使用虚拟机的内部 IP 地址（例如 10.1.0.0/16）而不是公共 DNS 来减少延迟吗？我是否需要将 Web 角色和 VM 放在 Azure 中的同一虚拟网络上？我尝试使用门户中所述的 VM 的内部 IP 地址，但它无法连接，尽管端口 1433 完全打开。我应该补充一点，没有虚拟网络。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:51:08.273

我现在已经设法通过首先在 Azure 门户中创建一个虚拟网络并将一个新的 VM 部署到该网络来引用运行具有内部 IP 10.0.0.4 的 SQL Server 的虚拟机。

使用 web 角色，您无法在通过门户进行配置时指定虚拟网络设置。因此，要将 web-role 带入网络，您需要在 .cscfg 文件中定义它：

```
<NetworkConfiguration>
  <VirtualNetworkSite name="VirtualNetworkName" />
  <AddressAssignments>
    <InstanceAddress roleName="MyWebRole">
      <Subnets>
        <Subnet name="AppSubnet" />
      </Subnets>
    </InstanceAddress>
  </AddressAssignments>
</NetworkConfiguration> 
```

您现在可以在门户中确定 VM SQL Server 的内部 IP，并将其添加到我的应用程序 web.config 中定义的连接字符串中。将您的应用程序发布到 Azure 并提供您已正确配置端点并打开防火墙它应该可以正常工作。

在运行了一些性能测试之后，通过公共 DNS 使用内部 IP 可以获得利润。我推荐将[Web 角色连接到 VM](http://michaelwasham.com/2012/08/06/connecting-web-or-worker-roles-to-a-simple-virtual-network-in-windows-azure/#comment-1833)的指南作为一个很好的参考点。

另一件事。在连接字符串中使用 DNS（例如 myvm.cloudapp.net）时，我找不到可预测的方法来知道 Web 角色将从哪个 IP 调用。因此，很难在 VM 上打开端口 1433 以仅允许 Web 角色通过。使用内部 IP，我刚刚打开了整个子网。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:40:37.907

您是否在门户中启用了 VM 的端点？这是一个简单的操作，您只需选择端口和协议。这是一篇文章，解释了如何：

[http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)

我还建议您使用 A 记录 mydomain.cloudapp.net 而不是 vip，因为重新部署时 vip 可能会发生变化。vip 在重启时不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:00:13.380

您需要使用公共虚拟 IP 地址：[Windows Azure 是否为 VM 提供静态 IP？](https://stackoverflow.com/questions/14068448/does-windows-azure-offer-static-ip-for-vms)

但是我要问，您为什么要在 Windows Azure 的 VM 上安装自己的 SQL 服务器实例而不使用 SQL Azure？

如果您想托管自己的 SQL Server，在此阶段我建议您使用 Amazon EC2 实例，因为它们具有更多功能，例如永久静态 IP。但是，您还需要将其他所有内容转移到同一个数据中心，因为让一个站点跨不同的数据中心访问 SQL Server 确实很糟糕的延迟明智。

# android - adb -d 找不到我的设备，但它显示在 adb devices 中

> ID：15309238
> 
> 赞同：0
> 
> 时间：2013-03-09T09:36:34.087
> 
> 标签：android, debugging, adb

我通过 TCP/IP（在平板电脑上使用 adbWireless）连接到我的设备：

```
$ adb connect 192.168.178.21
connected to 192.168.178.21:5555

$ adb devices
List of devices attached 
192.168.178.21:5555 device

$ adb -d install program.apk
error: device not found
- waiting for device -

$ adb -s 192.168.178.21:5555 install program.apk
577 KB/s (1673947 bytes in 2.832s)
        pkg: /data/local/tmp/program.apk
Success 
```

我已经等了 5 分钟，但没有任何反应。

我怎样才能`adb -d`工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:01:58.220

有时使用控制台命令尝试帮助。-d 标志仅适用于 USB 设备：

```
zaytzev@piec-ubu:/opt/android-sdk-linux/platform-tools$ ./adb --help
Android Debug Bridge version 1.0.31

-d        - directs command to the only connected USB device
          returns an error if more than one USB device is present. 
```

# c# - 自动编号未按顺序生成

> ID：15309240
> 
> 赞同：0
> 
> 时间：2013-03-09T09:36:40.717
> 
> 标签：c#, sql, sql-server, sql-server-2008

我的一个表包含一个自动编号字段 ShiftPk ，我将其用作该表的主键，但是当我将值插入记录时，生成的主键不是顺序的

我知道自动编号不必总是按顺序排列，但我所有其他自动编号都按顺序工作请在下面找到我的脚本，如果我有任何问题，请提供建议

```
 ****** Object:  Table [dbo].[ShiftMasterNew_tbl]    Script Date: 03/09/2013 13:21:13 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[ShiftMasterNew_tbl](
    [ShiftPK] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [ShiftName] [varchar](50) NOT NULL,
    [Duration] [numeric](18, 0) NULL,
 CONSTRAINT [PK_ShiftMasterNew_tbl] PRIMARY KEY CLUSTERED 
(
    [ShiftPK] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
 CONSTRAINT [IX_ShiftMasterNew_tbl] UNIQUE NONCLUSTERED 
(
    [ShiftName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO 
```

是什么让这个表自动编号与其他的不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:37:22.103

我想我发现了问题..任何失败的尝试插入也正在消耗一个标识符

例如，如果我插入 1 2 3 然后插入失败

然后如果我插入下一个它的标识符是

5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:07:41.047

数据是如何插入到表中的？我怀疑您的身份列中是否存在空白，例如，它如下所示：

```
1
2
5
6
8
9
10
15 
```

...这可能是在将数据插入表时出现错误的症状。您能否将有关更新过程的更多信息添加到您的`OP`.

正如评论所说 - 它肯定是**连续**的，但可能存在差距。如果您需要向自己证明它们是连续的，您可以添加一个 DateTime 字段，例如“WhenUpdated”吗？

# linux - 如何解决 UNIX 中的 Not a Directory 错误消息

> ID：15309244
> 
> 赞同：0
> 
> 时间：2013-03-09T09:37:11.887
> 
> 标签：linux, bash, shell, unix, sh

我使用以下命令创建了一个目录

```
/usr/bin/mkdir -p  "${exa}/isrvce-backup"; 
```

exa ---> /示例/示例

我看到 isrvce-backup 已创建，当我尝试访问该文件夹时，我收到以下错误消息

```
isrvce-backup is not a Directory 
```

任何人都可以帮助如何解决这个问题，我正在使用 Shell 脚本

当我执行`ls`命令时，我可以看到`isrvce-backup`该列表中的条目

我试图访问该文件夹，作为`cd isrvce-backup`命令

**编辑：**执行`ls -l isrvc*`命令后，我得到以下输出

```
-rwx------+ username none 37 date/time  isrvce-backup 
```

如果我看到 isrvce-backup 文件夹的描述，它似乎是文件。

**我想知道 mkdir 将如何创建一个具有文件权限的文件夹，而不是作为一个完整的目录**

2）我尝试直接在 unix 框中创建相同的目录，它工作正常，但有些不是从 shell 脚本中工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:44:29.690

我无法重现您提到的错误。我使用 bash-3.2 并看到正在按预期创建的目录。如果您使用 bash 尝试此操作，请指定您的 bash 版本（或任何其他 shell）、导致此错误的确切代码片段以及以下命令的输出正在创建的目录（cat，ls -l，file，stat）等。

```
$ cat mkdir.sh
#! /bin/bash
exa="/sample"
mkdir -p "${exa}/c"
touch "${exa}/c/d"
file "${exa}/c/d"

$ sudo bash mkdir.sh  ## asks password as the dir is being created on /
Password: 
/sample/c/d: empty

$ ls -l /sample/
total 0
drwxr-xr-x  3 root  wheel  102 Mar  9 18:02 c

$ ls -l /sample/c
total 0
-rw-r--r--  1 root  wheel  0 Mar  9 18:07 d 
```

# laravel - LMongo 包不再使用 Laravel 4 Composer 自动加载

> ID：15309245
> 
> 赞同：0
> 
> 时间：2013-03-09T09:37:20.827
> 
> 标签：laravel, laravel-4, composer-php

今天早上之后`php composer.phar update`，LMongo 不再添加到我的自动加载文件中。

从我正在使用的 composer.json 文件中：

```
"navruzm/lmongo": "*",
"navruzm/laravel-mongo-session": "*", 
```

我已经删除了模块并且作曲家删除了它们。我已将其添加回来并再次安装。它不再被添加到自动加载文件中。我做过`php composer.phar dump-autoload`无数次。

有人对我应该从哪里开始寻找一些想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:54:46.380

这已通过`/app/storage`在作曲家更新后清除来解决。

# c# - 如何在asp.net mvc4中添加外键数据

> ID：15309246
> 
> 赞同：0
> 
> 时间：2013-03-09T09:37:26.983
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

`websecurity`好的，所以我在助手创建的同一个数据库中创建了我的表。

我的课是

```
public class MovieModels
{
    public int id { get; set; }
    public string name { get; set; }

    [ForeignKey("UserProfile")]
    public int UserId { get; set; }
} 
```

每部电影都是由用户添加的。现在这里的问题是我不想根据当前登录的用户的 ID 自动填充 UserId 的字段。我认为触发器会在这里使用，但由于我对 asp.net mvc 完全陌生，我不知道如何这是可以做到的。

任何帮助，将不胜感激。

* * *

**更新**

好的，所以我已将代码更改为

```
[ForeignKey("UserProfile")] 
    private int id_of_the_user;
    public int UserId
    {
        get { return id_of_the_user; }
        set { id_of_the_user = WebSecurity.CurrentUserId; }
    } 
```

但现在奇怪的是，UserId 字段总是显示 0 而不是当前登录的用户的 id。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:57:16.097

可能这个工作

```
 public class MovieModels
    {    
        public int id { get; set; }
        public string name { get; set; }

        [ForeignKey("UserProfile")]
        public int UserId
        {
            get { return WebSecurity.CurrentUserId; }            
        }
    } 
```

# javascript - 灵活的 http JavaScript "file.js" 包含在 html 页面中

> ID：15309252
> 
> 赞同：0
> 
> 时间：2013-03-09T09:38:03.047
> 
> 标签：javascript, html, http

我的问题是我必须通过 http 包含一些脚本。我正在寻找一个灵活的解决方案，我可以通过文本框更改 IP 地址。

现在我在 html head 中这样做：

**src="http://192.168.1.103:8000/socket.io/socket.io.js"**

或者是否可以在 JavaScript 中包含 http ？

谢谢，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:28:54.850

根据我对您询问的问题的理解，您想从不同的 IP 地址加载 javascript。这将由用户通过文本框提供并动态加载。为此，我返回了一个示例代码并将其粘贴到已经在 FireFox 上测试过的下方。在文本框中输入 IP 地址，然后按“LoadJs”按钮。

片段：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
var src=":8000/socket.io/socket.io.js";

function changeIp()
{
    var temp = '<script src=http://'+ $('#stack_id_ip').val() + src;
    temp = temp +' />';
    $('body').append(temp);
}

</script>
</head>

<body>

    <input type="text" id="stack_id_ip"/>
    <input type="button" onclick="changeIp()" value="LoadJS"/>
</body>
</html> 
```

# php - 请求类的实例全完成，如何选择下一个请求？

> ID：15309265
> 
> 赞同：0
> 
> 时间：2013-03-09T09:38:59.740
> 
> 标签：php, vim

我`ctags --recursive`在我的 zend 框架库文件所在的项目的根文件夹中运行。

我知道我可以使用 导航到标签的来源`:ta`，如果标签有多个来源，我可以获取来源列表并使用 (for `Request`tag)导航`:ts Request`，然后选择我想要的来源，例如：

![ts Requesr 的 VIM 输出](../Images/0f2287a6855f8bf526f4d46d94f79721.png)

但是当我处于插入模式并想使用全向完成时，我会得到

![基于标签的全方位完成结果](../Images/b37f83707cbbc7397382af7aeac25d08.png)

这是`composer.phar`请求类的功能（ts 的第一个结果）。我怎样才能让omni-completion明白​​我想要另一个`Request`类功能，完成？

# android - 填充列表视图时出现 JSON 错误

> ID：15309273
> 
> 赞同：0
> 
> 时间：2013-03-09T09:39:45.390
> 
> 标签：android, json, listview

我在下面有这段代码：

```
package com.example.test.center;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class Posts extends Activity {
String type,firstname,lastname,email,number,username;   
HttpClient httpclient;
HttpPost httppost;
ArrayList<NameValuePair> nameValuePairs;
HttpResponse response;
HttpEntity entity;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Bundle gotBasket=getIntent().getExtras();
        type=gotBasket.getString("type_post");
       this.setTitle(type);

        setContentView(R.layout.addpost);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

 httpclient = new DefaultHttpClient();
 httpclient = new DefaultHttpClient();
 httppost = new HttpPost("http://192.168.1.38/LTC/Uploadposts.php?type="+type+"");
 try{
 nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("type",type));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
response = httpclient.execute(httppost);

 if(response.getStatusLine().getStatusCode()==200)
 {

 entity=response.getEntity();
 if(entity !=null)
 {
    InputStream instream=entity.getContent();
 JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
 //Toast.makeText(getBaseContext(),jsonResponse.toString(),Toast.LENGTH_LONG).show();
 String retUser=jsonResponse.getString("username");// username is the name of a column
 String retcont=jsonResponse.getString("Content");
 String getf=jsonResponse.getString("FirstN");
String getl=jsonResponse.getString("LastN");
String dop=jsonResponse.getString("Dateofp");

try {
    JSONArray jArray = new JSONArray(jsonResponse.toString());

    int jArrayLength = jArray.length();
    List<String> listContents = new ArrayList<String>(jArrayLength);

    for(int i =0; i<jArray.length(); i++){

        JSONObject json_data = jArray.getJSONObject(i);
        listContents.add(json_data.getString("username"));

    }

    ListView myListView = (ListView) findViewById(R.id.listView2);
    myListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listContents));

}catch(JSONException e){
    Log.e("log_tag","Error parsin data "+e.toString());
}

 }}

 }//End of first try

 catch(Exception e)
 {
     Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show();

 } // End of first catch

    } //End of oncreate bundle

      private static String convertStreamToString(InputStream is)
       {

       BufferedReader reader = new BufferedReader(new InputStreamReader(is));
       StringBuilder sb = new StringBuilder();
       String line = null;
       try
       {

       while ((line = reader.readLine()) != null) {
           sb.append(line + "\n");
       }
       }catch(IOException e)
       {
        e.printStackTrace();
       }
       finally
       {
        try{
            is.close();
        }catch(IOException e)
        {
            e.printStackTrace();
        }
        }return sb.toString();

       }

} //End of Class 
```

它没有正确读取 json 格式，我想获取我的 php 文件的结果（结果为 json 格式）并将其存储在 json 数组中，然后每次获取“用户名”列的值并将其加载到列表显示。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:19:11.597

为了使上面的代码能够使用 [] 将您的 json 响应括起来。您将获得一个 JSonObject 并且您正在尝试将其解析为 JSONARRAY ...

```
 [{"username":"you","Dateofp":"2013-03-03","Content":"test1","IDpost:"1","LastN":"‌​    Yaghi","Type":"CARS","FirstN":"Mounzer"}] 
```

或使用简单的 JSON 对象解析并将对象添加到 listContents.. 删除与 JSONARRAY 相关的代码

改变

```
 {"IDpost":"1","username":"you","FirstN":"Mounzer","LastN":"Yaghi","Content":"tes‌​t1","Type":"CARS","Dateofp":"2013-03-03"}{"IDpost":"2","username":"boss","FirstN"‌​:"Marwan","LastN":"Geha","Content":"test2\r\n","Type":"CARS","Dateofp":"2013-03-0‌​5"} 
```

到

```
 [{"IDpost":"1","username":"you","FirstN":"Mounzer","LastN":"Yaghi","Content":"tes‌​t1","Type":"CARS","Dateofp":"2013-03-03"},{"IDpost":"2","username":"boss","FirstN"‌​:"Marwan","LastN":"Geha","Content":"test2\r\n","Type":"CARS","Dateofp":"2013-03-0‌​5"}] 
```

注意两个对象之间添加的“[”“]”和“，”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:19:58.177

你不能这样做：`JSONArray jArray = new JSONArray(jsonResponse.toString());` jsonResponse 包含 JSONObject 而不是 JSONArray

# android - Android中的“应用程序已意外停止”错误

> ID：15309280
> 
> 赞同：0
> 
> 时间：2013-03-09T09:40:22.670
> 
> 标签：android

java文件---Bttest11.java

```
**package niebttest11.example.bluetoothtesta;
/*import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
public class Bttest11 extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bttest11);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.bttest11, menu);
        return true;
    }
    */
import android.bluetooth.BluetoothAdapter;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;
public class Bttest11 extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {  

        int state = intent.getExtras().getInt(BluetoothAdapter.EXTRA_STATE);

     switch (state) {

   case BluetoothAdapter.STATE_OFF:

      Toast.makeText(context, "Off", Toast.LENGTH_SHORT).show();

           break;

   case BluetoothAdapter.STATE_TURNING_OFF:

   Toast.makeText(context, "Turning Off", Toast.LENGTH_SHORT).show();

        break;

     case BluetoothAdapter.STATE_ON:
            Toast.makeText(context, "On", Toast.LENGTH_SHORT).show();

          break;

 case BluetoothAdapter.STATE_TURNING_ON:

      Toast.makeText(context, "Turning On", Toast.LENGTH_SHORT).show();

         break;
        }
    }
}**

//manifest file---Bluetoothtest11 Manifest

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="niebttest11.example.bluetoothtesta"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="niebttest11.example.bluetoothtesta.Bttest11"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="Bttest11" >
            <intent-filter>
            <action android:name="android.bluetooth.adapter.action.ACTION_FOUND"/>
            <action android:name="android.bluetooth.adapter.action.ACTION_DISCOVERY_FINISHED"/>

            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

错误：

代码正在运行。但是在 android 手机中运行 .apk 时，它会显示一个错误，

> “应用程序 Bluetoothtest11（进程 nietest11.example.buetoothtesta）已意外停止”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:33:15.360

如果您仅使用 BroadcastReceiver 则不要在活动 bcoz 中写 Bttest11 那不是活动。

如果你想要活动，那么创建一个活动类并从那里调用接收器。在 android manifest 中定义该活动。在活动标签下，您的接收者在接收者标签中写入

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    startService(new Intent(MainActivity.this, MyService.class));
} 
```

}

# objective-c - 在新窗口中打开 html 文件的 xcode 可可按钮

> ID：15309282
> 
> 赞同：0
> 
> 时间：2013-03-09T09:40:44.923
> 
> 标签：objective-c, xcode, macos, cocoa

我有点卡住了，...

我已经编写了我的应用程序，现在我只需要一个按钮来打开我的应用程序资源文件夹中的 HTML 文档。

因此，如果您单击按钮，html 文件将在新窗口或 safari 中打开。不管那是最简单的方法。

谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:02:31.003

干得好：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"your file name" ofType:@"html"];
NSURL *baseURL = [[NSURL alloc] initFileURLWithPath:path isDirectory:YES];
NSString *html = [NSString stringWithContentsOfURL:[NSURL fileURLWithPath:path]  encoding:NSUTF8StringEncoding error:nil];
[webview setDelegate:self];
webview.dataDetectorTypes = UIDataDetectorTypeAll;
[webview loadHTMLString:html baseURL:baseURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:27:51.777

您需要从路径中读取文件。

如果它在资源文件夹（即 NSBundle）中，则可以，否则获取路径。

阅读html并显示它。

你可以通过两种方式做到这一点，第二种方式是使用 NSAppleScript，这对沙盒应用程序不利。

第一种方法是在 webView 中显示它。

```
NSString *path=[[NSBundle mainBundle] pathForResource:@"index" 
                                               ofType:@"html"/*or htm as per your file extension*/
                                          inDirectory:@"yourDirectoryName"];
NSURL *url=[NSURL fileURLWithPath:path];
NSURLRequest *urlRequest=[NSURLRequest requestWithURL:url];
[[webView mainFrame] loadRequest:urlRequest]; 
```

# salesforce - Visualforce 编码 Javascript

> ID：15309285
> 
> 赞同：1
> 
> 时间：2013-03-09T09:40:50.613
> 
> 标签：salesforce, visualforce

我的 Visualforce 代码中有一个字符串，如下所示：

```
字符串 strGood = '';
strGood = item.getGoodPercentage().toPlainString();

```

我想对字符串进行javascript编码。我知道可以在页面本身上使用 JSENCODE 方法，但是是否有可以在 Visualforce 类中使用的等效方法？如果不是最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:42:38.877

JSENCODE 函数在 Visualforce 中可用。查看[http://www.salesforce.com/us/developer/docs/pages/Content/pages_variables_functions.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_variables_functions.htm)。

如果您的控制器中有变量*jsString*，您可以使用以下内容将字符串设置为具有相应转义的 JS 变量：

```
var myVar = {!JSENCODE(jsString)}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:55:00.883

我想你的意思是你想对这个字符串进行 URL 编码。有一个名为[EncodingUtil](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_encodingUtil.htm)的 Apex 函数可用于此目的。

# angularjs - AngularJS：无法从指令内访问范围

> ID：15309286
> 
> 赞同：4
> 
> 时间：2013-03-09T09:41:01.513
> 
> 标签：angularjs, angularjs-directive

`model.data`包含以下内容：

```
{
    "name": "Jamie",
    "age": 25
} 
```

我有一个看起来像这样的指令：

```
<my-directive data="model.data"></my-directive> 
```

我已将指令定义如下：

```
app.directive('myDirective', function(){  
    return {
        restrict: 'E',
        scope: {
            data: '='
        },
        templateUrl: 'grid.html',
        controller: function($scope) {
            console.log($scope);
            console.log($scope.data);
        }
    }
} 
```

问题是`console.log($scope)`返回 $scope 中的值。我可以看到它包含数据：

```
{
    $$asyncQueue: Array[0],
    $$childHead: null,
    ...
    ...
    data: Array[1]
} 
```

但是，`console.log($scope.data)`返回`undefined`. 任何线索为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T15:31:12.753

任何时候类似的`console.log($scope);`工作，但`console.log($scope.someProperty);`没有，这是因为`someProperty`正在设置作为解决承诺的结果（例如 $http 调用或使用 $q 创建的承诺）。

第一个日志似乎可以工作，而实际发生的情况是，当您手动查看日志条目（即单击以展开其内容）时，该值已被填充/解析。

在您的控制器中，您需要 $watch 属性，并设置 watch 回调函数以在数据到达/解决后执行您想要对数据执行的任何操作。

# javascript - 更改按钮单击时文本字段的功能

> ID：15309288
> 
> 赞同：1
> 
> 时间：2013-03-09T09:41:21.243
> 
> 标签：javascript, html

我有一个用于在表单中输入地址的文本字段以及包含设置自定义地址的文本的链接。如果用户开始输入地址，则在 ajax 的帮助下，存储在数据库中的地址将显示在下面。我的问题是当用户单击文本框右侧的链接（即设置自定义地址）时，我不想显示 ajax 事件。我需要知道，如果文本框的 id 可以更改单击链接，或者是否可以在旧文本框上方生成另一个文本框。我的代码是这样的：

```
function set_custom_address()
{
    var custom_venue_link = document.getElementById('custom_venue_link');
    if(custom_venue_link.innerHTML=="custom address")
    {
        document.getElementById('venue').style.display = "none";
        document.getElementById('venue_new').style.display = "block";
        document.getElementById('custom').value= "true";
        custom_venue_link.innerHTML = "tag venue";
    }
    else
    {
        document.getElementById('venue_new').style.display = "none";
        document.getElementById('venue').style.display = "block";
        document.getElementById('custom').value= "false";
        custom_venue_link.innerHTML = "custom address";
    }
} 
```

我的html代码是这样的：

```
<input id="venue" name="venue" type="text"  
placeholder="Tag venue name" onkeyup="showData(this.value)" />
<input id="venue_new" name="venue_new" type="text" 
placeholder="Tag venue_name" style="display:none;"/> &nbsp; or 
<a   id="custom_venue_link" href="" 
onclick="set_custom_address();return false;">custom address</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:56:05.083

您可以通过代码附加和分离事件处理程序，而不是添加另一个输入或更改其 ID。

当页面加载时，您应该附加事件：

```
document.getElementById("venue").onkeyup = function(){showData(this.value);}; 
```

然后在 set_custom_address 上，您可以将其分离：

```
document.getElementById("venue").onkeyup = null; 
```

~~并在最后再次附加它，以防用户再次开始编辑输入值（或者您可以将其设为只读）。~~我看到你在隐藏它。

* * *

*编辑*：以下是使其只读的代码，以防万一：

```
document.getElementById("venue").setAttribute("readonly", "readonly"); 
```

你可以像这样删除它：

```
document.getElementById("venue").removeAttribute("readonly"); 
```

注 1：我不知道是否有任何东西导致 onkeyup 触发，但如果该字段是只读的，它不会从用户输入生成该事件。

注2：有人提到数据库中的地址显示在字段下，我不知道是否需要额外的步骤来隐藏它。也许需要一个函数“hideData()”。

# google-api - 限制对 Google 域共享联系人的可见性

> ID：15309289
> 
> 赞同：0
> 
> 时间：2013-03-09T09:41:21.820
> 
> 标签：google-api, google-contacts-api, google-provisioning-api, google-shared-contacts

是否可以限制谷歌域共享联系人的可见性？

假设我的组织结构有： A 向 B 报告，向 C 报告。

如果 A 添加了新的共享联系人，每个人都可以看到。

如果 B 添加了一个新的共享联系人，对于 C 是可见的，但对于 A 不可见（或有限制）。

也许将其与 Google Provisioning API 结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:10:50.753

未隐藏的共享联系人和用户配置文件将成为域中所有帐户都可以访问的全局地址列表的一部分。无法限制对 GAL 的访问，除非在 CPanel 中的“设置”->“联系人”下为所有用户关闭它。

此外，非管理员无权修改域的共享联系人。但是，Google Apps Marketplace 中有第三方应用程序允许最终用户从共享联系人中添加/删除联系人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T14:32:41.767

谷歌域共享联系人仅供域管理员使用。

# sql - 在关系数据库中合并表结果

> ID：15309293
> 
> 赞同：0
> 
> 时间：2013-03-09T09:41:39.407
> 
> 标签：sql, sqlite, select, join

好的，首先让我说清楚：我对SQL 和数据库*非常*薄弱（我的意思是除了几个简单的语句），但事实证明我必须处理一些**SQLite** DB，所以我想我需要你的帮助在这个查询上（对于比我更熟悉 SQL 的人来说，这应该是非常简单的......）：

**我有 2 张桌子：**

```
TOKENTYPES

TOKENTYPE_ID  TOKENTYPE_NAME
1             nameA
2             nameB
3             nameC

TOKENS

TOKEN_ID TOKENTYPE_ID TOKEN_NAME
1        2            tokA
2        2            tokB
3        3            tokC 
```

**我知道的 ：**

*   通过`SELECT TOKENTYPE_ID,TOKEN_NAME FROM TOKENS`，我可以从 TOKENS 获取所有 (TOKENTYPE_ID,TOKEN_NAME) 对
*   通过`SELECT TOKENTYPE_NAME FROM TOKENTYPES WHERE TOKENTYPE_ID=2`，我可以获得`Name`特定令牌 ID。

现在，这是问题所在：

**我怎样**才能“组合”这两个查询并获得一个带有`TOKENTYPE_NAME`,的表`TOKEN_NAME`？

* * *

**编辑：**

**期望的结果：**

```
TOKEN_NAME TOKENTYPE_NAME

tokA       nameB
tokB       nameB
tokC       nameC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:44:36.320

```
SELECT tt.TOKENTYPE_NAME, t.TOKEN_NAME 
FROM TOKENS AS t
JOIN TOKENTYPES AS tt
    ON tt.TOKENTYPE_ID = t.TOKENTYPE_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:45:58.297

```
SELECT  a.Token_Name,
        b.TokenType_Name
FROM    Tokens  a
        INNER JOIN TokenTypes b
            ON a.TokenType_ID = b.TokenType_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!7/046a4/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

结果

```
╔════════════╦════════════════╗
║ TOKEN_NAME ║ TOKENTYPE_NAME ║
╠════════════╬════════════════╣
║ tokA       ║ nameB          ║
║ tokB       ║ nameB          ║
║ tokC       ║ nameC          ║
╚════════════╩════════════════╝ 
```

# azure - 天蓝色表存储中的事务

> ID：15309294
> 
> 赞同：6
> 
> 时间：2013-03-09T09:41:49.267
> 
> 标签：azure, azure-table-storage

假设我有：

```
using (TransactionScope scope = new TransactionScope()) 
{
    if (IndexExists(index.RowKey))
        DeleteIndex(index.RowKey); //deletes using TableOperation.Delete

    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
    CloudTableClient tableClient = storageAccount.CreateCloudTableClient();
    CloudTable table = tableClient.GetTableReference(Const.IndexTable);

    TableOperation insertOperation = TableOperation.Insert(index);
    table.Execute(insertOperation);   
} 
```

我想要的是：如果插入失败，删除应该被撤消。这是正确的交易方式吗？一切都发生在同一个分区/表中。还有事务的其他限制是什么，我在某处读到事务中可以存储不超过 4 Mb，这仍然正确吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T09:56:57.797

假设需要对其执行操作的所有实体都具有相同的 PartitionKey，您可以利用[`Entity Group Transaction`](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)Windows Azure 表存储中提供的功能。它正是这样做的。如果在事务中对实体的操作失败，则回滚整个事务。

但是，您似乎正在删除一个实体并再次创建相同的实体。该场景不适用于实体批处理事务，因为实体在事务中只能出现一次，并且只能对实体执行一个操作。看起来您感兴趣的是替换实体。在这种情况下，您可以直接使用[`InsertOrReplace()`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tableoperation.insertorreplace.aspx)功能。

# ruby-on-rails - RefineryCMS 仪表板显示 500 Intenal Server Error

> ID：15309302
> 
> 赞同：0
> 
> 时间：2013-03-09T09:43:25.197
> 
> 标签：ruby-on-rails, capistrano, refinerycms

我受雇为基于 Rails 3.0.3 和 RefineryCMS 0.9.9 构建的站点添加一些更改。我是 Rails 和 Capistrano 的新手，所以我尝试对站点进行测试部署，以便掌握使用这些工具的窍门。我下载了该站点的生产版本，并尝试重新部署它。我只更改了 config/deploy.rb 文件中的一些内容，我没有更改 Gemfile 中的任何依赖项或数据库中的任何内容。我尝试使用 github 进行部署，但遇到了 ssh 密钥问题，因此我使用自己的副本进行了部署。我更改了对服务器的所有必要权限，部署工作正常。该网站虽然没有。主页的标题是

```
Ruby (Rack) application could not be started
These are the possible causes:

There may be a syntax error in the application's code. Please check for such errors and fix them.
A required library may not installed. Please install all libraries that this application requires.
The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.
A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service. 
```

因此，我输入了“cap deploy:rollback”来获取以前的正确版本。但是，登录时，仪表板应该出现的位置，我得到一个 500.hmtl 页面。我似乎已登录到该站点，但没有仪表板！

服务器主机是典型的 nginx/0.8.53 + Phusion Passenger 3.0.2 (mod_rails/mod_rack)。错误日志被禁用，所以我找不到任何东西！

以下是我使用的 deploy.rb：

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path'])) # Add RVM's lib directory to the     load path.
#require "rvm/capistrano"                  # Load RVM's capistrano plugin.
#set :rvm_ruby_string, '1.9.2'        # Or whatever env you want it to run in.
#set :rvm_type, :user
#require "bundler/capistrano"

set :application, "xxxxx"
#set :repository "ssh://hg@bitbucket.org/xxxx/xxxxx"
#set :repository,  "ssh://git@bitbucket.org/xxxx/xxxxx.git"
set :repository,  "git@github.com:xxxx/xxxxx.git"
set :scm, :git  
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion`   or   `none`
set :scm_username, 'xxxx'
set :scm_password, proc{Capistrano::CLI.password_prompt('git pass:')}

role :web, "www.xxxxx.gr"                          # Your HTTP server, Apache/etc
role :app, "www.xxxxx.gr"                          # This may be the same as your `Web`    server
role :db,  "www.xxxxx.gr", :primary => true # This is where Rails migrations will run

# If you are using Passenger mod_rails uncomment this: 
# if you're still using the script/reapear helper you will need
# these http://github.com/rails/irs_process_scripts
set :deploy_to, "/var/www/#{application}"
set :deploy_via, :copy #:remote_cache #:copy
set :keep_releases, 5
set :user, "xxxx"
set :use_sudo, true

# before "deploy:bundle_install", "deploy:install_bundler"
# after "deploy:update_code", "deploy:bundle_install"
after "deploy:update_code", "deploy:remove_packaged_assets"
after "deploy:update_code", "deploy:symlink_assets"
#after "deploy:symlink", "deploy:update_crontab"

namespace :deploy do
  task :start do ; end
  task :stop do ; end

desc "Symlink shared folders on each release."
task :symlink_assets do
 run "ln -nfs #{shared_path}/system #{release_path}/public/system"
  end

desc "Remove packaged assets"  
  task :remove_packaged_assets, :roles => :web do
    run "rm -f #{current_path}/public/javascripts/all.js"
    run "rm -f #{current_path}/public/stylesheets/all.css"
 end

 # desc "installs Bundler if it is not already installed"
 # task :install_bundler, :roles => :app do
 #   sudo "sh -c 'if [ -z `which bundle` ]; then echo Installing Bundler; sudo gem   install bundler; fi'"
 # end
 # 
 # desc "run 'bundle install' to install Bundler's packaged gems for the current deploy"
 # task :bundle_install, :roles => :app do
 #   run "cd #{current_path} && bundle install"
 # end

 desc "Update the crontab file"
  task :update_crontab, :roles => :app, :except => { :no_release => true } do
    run "cd #{release_path} && bundle exec whenever --update-crontab #{application}"
 end

 task :restart, :roles => :app, :except => { :no_release => true } do
    run "touch #{File.join(current_path,'tmp','restart.txt')}"
   end
 end 
```

# asp.net-web-api - 试图从asp.net web api self host中的请求中获取用户代理

> ID：15309304
> 
> 赞同：44
> 
> 时间：2013-03-09T09:43:43.727
> 
> 标签：asp.net-web-api, self-hosting

我试图在 web api 自主机中获取用户代理，但我做错了，或者 web api 本身正在改变用户代理字符串。

我尝试使用几种方法来获取字符串，它们都返回相同的结果，而不是例外的“Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.28 Safari /537.31”，我只得到“Mozilla/5.0”。

我试过了：

```
var header = request.Headers.SingleOrDefault(h => h.Key == "User-Agent").Value.First();

var header = request.Headers.UserAgent.SingleOrDefault().Product.ToString();

var header = request.Headers.GetValues("User-Agent").FirstOrDefault(); 
```

我做错了吗，它是自托管的，所以我没有可以使用的上下文。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-05-28T12:42:06.983

从 WebAPI 控制器内部获取完整用户代理的绝对最简单的方法是执行以下操作：

```
var userAgent = Request.Headers.UserAgent.ToString(); 
```

它给出的结果与执行如下手动步骤**完全相同：**

```
// var headers = request.Headers.GetValues("User-Agent");
// var userAgent = string.Join(" ", headers); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-14T21:12:47.297

# **.NET Core 2.0(+)**

就像`Request.Headers["User-Agent"]`（以字符串形式返回）一样简单；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:49:45.853

哎呀，想通了，自己回答，以防其他人遇到这个问题。显然用户代理被切碎了。

这给了我完整的用户代理：

```
// Default empty user agent.
String userAgent = "";

// Get user agent.
if (Request.Headers.Contains("User-Agent"))
{
    var headers = request.Headers.GetValues("User-Agent");

    StringBuilder sb = new StringBuilder();

    foreach (var header in headers)
    {
        sb.Append(header);

        // Re-add spaces stripped when user agent string was split up.
        sb.Append(" ");
    }

    userAgent = sb.ToString().Trim();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T12:27:04.847

```
var context = new HttpContextWrapper(HttpContext.Current);
HttpRequestBase request = context.Request;
var browserdetail = request.UserAgent; 
```

如果您只想要浏览器名称，这对我有用，然后只需编写：

```
var browserdetail = request.browser 
```

如果您想要客户端 IP 地址，那么只需执行以下操作：

`var browserdetail = request.hostaddress`并将其用于生成用于身份验证的令牌密钥。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-13T03:42:17.323

答案很简单，试试下面的。它更短，更不容易折断。

```
String userAgent;
userAgent = Request.UserAgent; 
```

它会给你一个类似于这个的字符串。

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/6.0) 
```

文档： http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx ?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

# python - 使用python发送无符号字符

> ID：15309306
> 
> 赞同：3
> 
> 时间：2013-03-09T09:44:02.587
> 
> 标签：python, c, sockets, ctypes

我正在做一个与密码学相关的项目。我正在构建代码`python`。但是加密函数使用 C 库`PBC`进行计算。因此，我制作了一个包含正确函数的 C 程序，并将其编译为共享库。我使用导入库`ctypes`。到目前为止一切都很好。

我现在面临的问题是我需要将一个`unsigned char`声明为库中的全局变量，我需要通过python套接字将它发送到另一个接收python套接字，在那里它将作为一个传递回`unsigned char`库。

现在，当我尝试`unsigned char`从图书馆检索时，

```
ibc = cdll.LoadLibrary('./libibc.so.1.0.1')
strin = 'some string'
ibc.init_pairing(1, 1, 1)# Initializing the lib
ibc.read_share()
id_str = (c_char * 40)()
id_str.value = strin
ibc.hash_id_s(id_str)    # Passing a char to a function

hsid = (c_ubyte * 1000)()
hsid = c_ubyte.in_dll(ibc, "hid")
ibc.gen_privatekey(hsid, 1, 3) #pass unsigned char to function 
```

最后一行以分段错误结束。因此，我`gen_privatekey`使用以下代码从 c 本身调用了该函数：

```
int genprkey(){
    unsigned char key[100];
    element_to_bytes(key, pks);
    gen_privatekey(key, 1, 2);
} 
```

然后我使用以下命令从 python 调用此函数：

```
ibc.genprkey() 
```

程序成功。

**问题**

上面的函数生成一个`unsigned char`也将存储在另一个全局变量中。我试图检索变量：

```
hsidp = (c_char_p)()
hsidp = c_char_p.in_dll(ibc, "hid") 
```

我在 python 解释器上尝试了上面的代码。当我输入：

```
hsidp 
```

输出是：

```
c_char_p(10598250801977757708) 
```

但是当我输入：

```
hsidp.value 
```

我得到一个`segmentation fault (core dumped)`. 我怀疑我处理变量的方式不正确。一旦我`unsigned char`在 python 中将它作为变量，我需要将它作为消息发送到另一个套接字，该套接字将读取它并将它作为一个传递`unsigned char`给同一个库。

我不知道这怎么可能。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:12:53.370

以下是访问共享库中的数组的方法：

虚拟库：

```
>>> from ctypes import *
>>> import os

>>> open('lib.c', 'w').write(
...   'unsigned char data[] = {0, 1, 2, 3};\n')
>>> ret = os.system('gcc -shared -o lib.so lib.c') 
```

加载库并访问长度为 4 的数组`unsigned char`

```
>>> lib = CDLL('./lib.so')
>>> data = (c_ubyte * 4).in_dll(lib, 'data')
>>> list(data)
[0, 1, 2, 3] 
```

此外，`c_char_p`是一个指针，从数组的前 4 或 8 个字节中获取该指针将指向谁知道在哪里，因此当您尝试取消引用它时可能会出现段错误。另外，下面的第一条语句实例化了一个指针，当您`hsidp`在第二条语句中重新分配时，该指针会立即被释放：

```
hsidp = (c_char_p)()   
hsidp = c_char_p.in_dll(ibc, "hid") 
```

同样，下面的第一行创建了一个长度为 1000 的数组并将其丢弃。我不知道为什么。然后你从库中得到一个字节。

```
hsid = (c_ubyte * 1000)()
hsid = c_ubyte.in_dll(ibc, "hid") 
```

你需要一个字节还是一个字节数组？多长？还是`gen_privatekey`想要一个指向空终止字符串的指针？

* * *

您可以`string_at`用来获取 Python`str`对象：

```
>>> hid = (c_ubyte * 24)(*map(ord, "This is a test."))
>>> string_at(hid, 24)
'This is a test.\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

或者您可以从缓冲区创建一个`c_char`数组（或者从一开始就使用它而不是`c_ubyte`数组）：

```
>>> (c_char * 24).from_buffer(hid).value
'This is a test.' 
```

数组更`c_char`便于处理字符串，因为它`value`和返回 Python对象的`raw`描述符。`str`这些描述符还允许您将字符串写入缓冲区：

```
>>> hid = (c_char * 24)()
>>> hid.value = 'This is a test.'
>>> hid.value
'This is a test.' 
```

# apache2 - 我不知道如何设置 apache2 子域重定向到其他端口

> ID：15309308
> 
> 赞同：0
> 
> 时间：2013-03-09T09:44:20.013
> 
> 标签：apache2, subdomain

我想在 Ubuntu 上使用 apache2 进行端口重定向。

例如，我的站点中有一个 3 子域。- my.kr - blog.my.kr - jira.my.kr

他们都在听 80。因为漂亮的网址：D

现在，我有一个问题！

blog.my.kr在tomcat 8080上的真实系统 jira.my.kr在tomcat 9090上的真实系统

在这种情况下，如何在 apache2 中进行端口转发？

只是，使用url地址。

现在我可以只端口转发，当 blog.my.kr 调用时，blog.my.kr:8080 但我不想要这种方式。我想要的是使用 blog.my.kr，而不是：8080

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:48:47.930

不太确定理解这个问题是如何形成的。但是你看过 mod_proxy 吗？ [http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

或者使用 tomcat 更好的解决方案可以是[http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)

弗雷德干杯

# c# - 我们如何在没有动画的情况下显示 hubtile

> ID：15309312
> 
> 赞同：2
> 
> 时间：2013-03-09T09:44:46.017
> 
> 标签：c#, windows-phone-7

我想在 windows phone 7 应用程序的单个磁贴中显示两个字段。1) 名称 2) 描述 像静态图像一样，平铺应该显示名称和描述

为了显示它们，我不想要瓷砖中的任何动画效果。有没有办法禁用动画效果，因为它破坏了应用程序体验。我在我的应用程序中使用 Toolkit :hubtile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:46:04.047

是的，可以使用 HubTileService 类。假设您在 XAML 中获得了以下 Tile：

```
<toolkit:HubTile Name="myTile" Title="Tile 1" GroupTag="tileGroup" /> 
```

现在您可以使用以下方法仅冻结此图块：

```
HubTileService.FreezeHubTile(myTile); 
```

或者，如果您有多个具有相同 GroupTag 的图块，您可以使用以下方法一次将它们全部冻结：

```
HubTileService.FreezeGroup("tileGroup"); 
```

要再次开始动画，您可以使用：

```
HubTileService.UnfreezeTile(myTile);
HubTileService.UnfreezeGroup("tileGroup"); 
```

如果你想控制你想让哪个动画部分（视觉状态）可见，例如翻转状态可能是你想要的，那么你可以使用视觉状态管理器来改变它，如下所示：

```
VisualStateManager.GoToState(myTile, "Flipped", true); 
```

有关 HubTile 的更深入解释，[Windows Phone Geek 上有一个很好的指南](http://www.geekchamp.com/articles/windows-phone-hubtile-in-depth-part1-key-concepts-and-api)。

# shell - 我可以使用哪些 Haskell 习语在命令行中实现实时查找自动完成？

> ID：15309327
> 
> 赞同：8
> 
> 时间：2013-03-09T09:46:26.953
> 
> 标签：shell, haskell, command-line

我试图通过在命令行上创建 Notational Velocity 样式 find-as-you-type 文件搜索来掌握 Haskell 的基础知识。我没有解决整个问题，而是尝试了一个非常基本的版本：存在一个包含 10 行的文件，每行一个 3 个字母的单词。在我输入每个字母后，我想根据我目前的输入更新可能包含我正在输入的单词的行号列表的显示。

有人可以演示一个 Haskell 程序吗？我认为我的问题在于强制重新评估每个字符输入。提前一百万谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:40:01.710

我不会尝试编写您要求的整个 Haskell 程序，但这里有一个非常简短的示例，显示您目前声称坚持的一点：每次按键后都做一些事情。我们不会做任何令人兴奋的事情（只是敲一个数字并将其打印出来），但它会展示如何完成一项小任务，您也许可以从那里开始进行黑客攻击。

您真正需要知道的唯一一件事是您可以关闭输入上的行缓冲。

```
import System.IO

loop n = do
    c <- getChar
    print n
    -- do whatever recalculation you need to do here, using
    -- n (which can be more complicated than an Integer, as
    -- it is here, of course) and c (which is a Char
    -- representing the key the user whacked)
    -- our recalculation is just to increase n by one
    loop (n+1)

main = do
    hSetBuffering stdin NoBuffering -- do this once before anything else
    loop 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:55:34.803

学习反应式编程可能是一个好的开始。
为此，一个好的库似乎是[响应式香蕉](http://hackage.haskell.org/package/reactive-banana-0.7.1.1)
有一些基本[示例](http://www.haskell.org/haskellwiki/Reactive-banana/Examples)。

如果您想了解更多关于 FRP 的信息，[堆栈](https://stackoverflow.com/questions/1028250/what-is-functional-reactive-programming)上的优秀主题将为您提供清晰的概述。

# php - 将文件链接为目录

> ID：15309331
> 
> 赞同：0
> 
> 时间：2013-03-09T09:46:58.473
> 
> 标签：php, html

我觉得很愚蠢，不知道该怎么称呼它......但我正在努力完成我在这里看到的：http: [//followerblast.org/terms/](http://followerblast.org/terms/)

而不是terms.php，它只是“/terms/”，我试过用谷歌搜索我能想到的一切。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:52:10.627

有多种方法可以实现这一目标

1.  **htaccess(mod_rewrite)** , [http://zenverse.net/seo-friendly-urls-with-htaccess/](http://zenverse.net/seo-friendly-urls-with-htaccess/)
2.  **文件夹**，来吧，这不是一个好方法，它真的很**垃圾**
3.  **MVC & FWs**，如果您熟悉框架和 MVC SW 模式，那么它会为您的检查**CodeIgniter**执行此操作，这是我最喜欢且简单的

另请查看 [.htaccess 简短而友好的 url](https://stackoverflow.com/questions/11146062/htaccess-short-and-friendly-url) 我希望这可以帮助:)

# winforms - Win7 UAC 添加清单后一直弹出

> ID：15309334
> 
> 赞同：0
> 
> 时间：2013-03-09T09:47:32.567
> 
> 标签：winforms, registry, manifest, uac

VS2008 C# winforms 与部署项目。我需要访问注册表来存储设置。但要做到这一点，我需要向项目添加一个外部清单。如果不包含清单，应用程序将无法访问注册表。

（还有其他方法吗？）

仅表现为一个设置：requestedExecutionLevel level="requireAdministrator" uiAccess="false"

我确保 assemblyIdentity 版本与项目名称和版本匹配。

包含清单一切正常，但每次启动应用程序时都会弹出用户访问控制。为什么 UAC 也不记得用户上次点击了 OK？我很高兴用户单击它一次但不是每次都单击它。这个收费需要什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T03:35:34.313

与其将您的应用程序标记为`requireAdministrator`，不如将其标记为`asInvoker`。

然后对于那些您绝对需要管理员访问权限的有限地方，使用 ShellExecute 和神奇的**runas**动词重新启动您的应用程序的副本。

它将触发 UAC 同意对话框并以管理员身份运行您的应用程序。

# javascript - 仅使用 javascript 读取 TXT 文件

> ID：15309338
> 
> 赞同：1
> 
> 时间：2013-03-09T09:48:03.740
> 
> 标签：javascript

可以从我的 HTML5 游戏资源中逐行读取 txt 文件吗？（资源 = 我的游戏项目中的文件夹之一）我在这个文件中保存了有关我的游戏关卡的信息。我只找到了使用 PHP、Ajax 的示例，但所有这些都需要服务器，但我想在服务器或离线模式下运行我的游戏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:00:10.993

模板和预处理语言（如 LESS 或 CoffeeScript）经常使用的一种技术是使用带有`type`浏览器无法识别的属性的脚本标签。这会导致浏览器和搜索引擎忽略它，但 JavaScript 可以访问它。

# [演示](http://jsbin.com/ofapuw/3/)| [代码视图](http://jsbin.com/ofapuw/3/edit)

```
 <script type="text/mygamelevel" id="level1">
    0010011001111011
    0011011100010
    10101110111101101
  </script>

  <script type="text/javascript">
    var level = document.getElementById("level1").text;
    var lines = level.split("\n");
    for (var i=0; i<lines.length; i++) {
      var line = lines[i];
      if (!line.trim()) continue;

      alert(line);
    }
  </script> 
```

* * *

如果首选文件，您可以动态请求它。这是一个使用[jQuery 的 get](http://api.jquery.com/jQuery.get/)函数的例子。

```
$.get('levels/level1.txt', function(level) {
    var lines = level.split("\n");
    for (var i=0; i<lines.length; i++) {
      var line = lines[i];
      if (!line.trim()) continue;

      alert(line);
    }
}); 
```

无法保证回调中的代码将在任何给定时间执行，因此我建议将一些 start-new-level 代码放在那里，而不是在代码中的其他任何地方。否则，您不知道您是否已经下载了关卡信息。如本答案的第一个片段所示，通过内联数据可以避免此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:54:14.463

浏览器的 JavaScript 没有也不应该直接访问本地文件系统。

# ruby - 大虾从图像生成 PDF 时产生空白页

> ID：15309339
> 
> 赞同：2
> 
> 时间：2013-03-09T09:48:04.687
> 
> 标签：ruby, pdf, pdf-generation, prawn

我正在尝试使用 Prawn 从包含一堆图像的目录生成 PDF。到目前为止，我的代码运行良好，只有一个小问题，它在 PDF 的开头插入了一个空白页。

由于我不一定知道图像的大小（除了它们大致相同，任一维度均为 +/- 50 像素）我使用 RMagick 来获取目录中图像的最大尺寸，以便我可以居中它们在每一页上都有一点边距。

以下是简化为重现行为的必要步骤的代码：

```
require 'rmagick'
require 'prawn'

# Page files always have a name in the form of 'page_#.jpg'
pages = Dir.glob('*.jpg').sort_by { |file| file.split('_')[1].to_i }

# There's probably a better way to do this part, but the naive way works just fine, so whatever...
widths = Array.new

heights = Array.new

pages.each do |page|
  image = Magick::Image::read(page).first

  widths << image.columns

  heights << image.rows
end

Prawn::Document.generate('test.pdf', :page_size => [widths.max + 36, heights.max + 36]) do |pdf|
  pages.each do |page|
    pdf.image page, :position => :center, :vposition => :center
  end
end 
```

这是我第一次真正用 Prawn 做过任何事情，所以我可能缺少一些简单的东西。

如果重要的话；我正在使用 Ruby 1.9.3-p327 和 Prawn 0.12.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T05:22:34.123

似乎导致此问题的任何原因都已修复。在 Prawn 1.1.0 中使用与上面相同的代码不会在其他页面之前产生空白页面。

# ruby-on-rails - 自定义路由访问 Rspec

> ID：15309340
> 
> 赞同：0
> 
> 时间：2013-03-09T09:48:05.923
> 
> 标签：ruby-on-rails, rspec, routes

我的 routes.rb 中有这个

```
 scope constraints: lambda { |r| r.env['warden'].user.nil? } do
    get "login", to: "sessions#new", as: "login"
  end 
```

我尝试通过 get "get 'signup'" 在 rspec 上访问这些，但它不起作用。

规格/控制器/sessions_controller_spec.rb

```
describe "/sessions/new" do
    it "will render if user is not yet logged in" do
        get :new
        response.response_code.should eq 200
    end

    it "will not render if user is logged in" do
        user = FactoryGirl.create(:user)
        request.env['warden'].set_user(user)
        get "login"
        response.response_code.should eq 404
    end
end 
```

这是我得到的错误：

```
Failure/Error: get "login"
     ActionController::RoutingError:
       No route matches {:controller=>"sessions", :action=>"login"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:09:51.967

spec/controllers/sessions_controller_spec.rb 用于测试您的 SessionsController。`signup`是用户控制器中的一个动作。测试`signup`spec/controllers/users_controller_spec.rb 中的操作。

# javascript - 如何使用 jquery 选项卡加载多个菜单

> ID：15309342
> 
> 赞同：2
> 
> 时间：2013-03-09T09:48:18.320
> 
> 标签：javascript, jquery, html

您好，我正在使用 jquery 选项卡菜单通过面板中的 ajax 加载内容。这是我的代码：

```
 <head><script>
        $(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                ui.jqXHR.error(function() {
                ui.panel.html(
                "error" );
                });
            }
        });
        });
</script>

</head>
<body>
<div class="wrapper">

    <div id="tabs">
    <div class="menu">
    <ul>
    <li><a href="#tabs-1">Startseite</a></li>
    <li><a href="ajax/content1.html">Link1</a></li>
    <li><a href="ajax/content2.html">FAQ</a></li>

    </ul>
    </div>
    <div id="tabs-1" class="tab-style">
    <h1> content</h1>
  <p> Lorem ipsum dolor sit am...... tristique eget, accumsan eget quam. </p>

  </div><div class="footer"><ul><li><a href="ajax/agb.php" id ="link">AGB</a></li></ul>

  </div> 
```

上面的菜单工作正常，选项卡的内容在面板中正确加载。但是通过单击页脚菜单中的链接，它会离开页面。

我已经尝试过以下方法：

```
<div class="footer"><ul><li><a href="#" id ="link">AGB</a></li></ul>

  <script type="text/javascript">
     $('#link').click(function() {
          $('#tabs').load('agb.php');
     });
</script>
  </div> 
```

因为我还需要内容面板中的链接解决方案，但这也不起作用。希望您能够帮助我。十分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:52:13.733

尝试：

```
$('#link').click(function(e) {
    e.preventDefault();
    $('#tabs').load('agb.php');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:51:17.397

在 jQuery 回调中，返回`false`以阻止默认操作。链接的默认操作是导航到`href`属性的位置。

```
 $('#link').click(function() {
      $('#tabs').load('agb.php');
      return false;
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:54:20.483

```
$('#link').click(function(e) {
    e.preventDefault();
    $('#tabs').load('agb.php');
     return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:51:06.383

在您的页脚链接上，您可以这样做：

```
$('.footer a').on('click', function(e) {
    e.preventDefault();
    var link = $(this).attr('href');
    $('#tabs').load(link);
}); 
```

如果您想在所有链接上执行此操作，请在每个链接上绑定 click 事件：

```
$('a').on('click', function(e) { ... }); 
```

# html - Div 侧边栏不随中心列的内容扩展

> ID：15309344
> 
> 赞同：0
> 
> 时间：2013-03-09T09:48:35.557
> 
> 标签：html, css-float, clearfix

我有一个正在处理的网页，当中间没有内容时，它看起来很棒。最近，当我尝试将内容添加到中心列时，问题就出现了。我正在添加一个表格，其中包含人们必须回答的一长串问题。问题是，当此内容大于窗口大小时，它会向下滚动内容，但侧边栏保持相同大小。

我在 jsfiddle 上附上了我的代码。任何帮助，将不胜感激。:)

[http://jsfiddle.net/qp5Zk/3/](http://jsfiddle.net/qp5Zk/3/) [1](http://jsfiddle.net/qp5Zk/3/)

```
@charset"utf-8";
html, body {
width: 100%; /* IE6 Hacks */
height: 100%; /* IE6 Hacks */
margin: 0;
padding: 0;
}
body {
background-color: green;
background-repeat: repeat;
height: 100%;
}
#content_wrapper {
margin: 0 auto; /* Center it on the page */
width: 93%;
height: 100%;
}
#center_column {
margin: 0 14px 0 14px; /* 0 Right Column 0 Left Column */
background-color: #FFF;
height: 100%;
}
#left_column, #right_column {
width: 14px;
height: 100%;
}
#left_column {
float: left;
background-color: pink;
}
#right_column {
float: right;
background-color: orange;
}
#header_top {
width: 100%;
height: 14px;
background-color: #EEE;
}
#header_top_grad {
width: 100%;
height: 14px;
background-color: blue;
background-repeat: repeat-x;
}
#header_middle {
height: 40px;
width: 100%;
background-color: yellow;
background-repeat: repeat-x;
}
#header_bottom {
background-color: blue;
background-repeat: repeat-x;
height: 14px;
width: 100%;
}
#logo {
width: 100%;
background-color: #EEE;
}
#logo img {
width: 253px;
height: 47px;
margin: 10px 0 10px 20px;
} 
#main_table {
color: #696969;
font-size: small;
width: 90%;
margin: 0 auto;
border-spacing: 0;
border: 0; 
/* IE border-spacing workaround */
border-collapse: collapse;
}
#main_table td {
/* Padding between each question */
padding-bottom: 20px;
}
.q_column, .r_column, .e_column {
background-color: #FFF;
}
.q_column {
font-weight: bold;
text-align: right;
/* Padding between question and response column */
padding-right: 10px;
}
.red {
color: #F00;
font-size: large;
}
 .text_field {
border: 1px solid;
border-collapse: collapse;
border-color: #BBB;
color: #000;
}
.small_text {
font-size: smaller;
}
.r_column {
width: 35%;
}
.e_column {
width: 25%;
} 
```

我没有成功尝试 clearfix，但可能做错了什么，或者它甚至可能不是正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:58:49.193

@user2151158 像这样为 Content 类设置最小高度

```
#content_wrapper {
    margin: 0 auto; /* Center it on the page */
    width: 93%;
    min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:12:55.620

试试这个小提琴：http: [//jsfiddle.net/krish/qp5Zk/7/](http://jsfiddle.net/krish/qp5Zk/7/)

我将 center_coloum 更改为相对并将左右列设置为绝对更改的详细信息如下所示。

改变的CSS

```
 #center_column {
    margin: 0 14px 0 14px; /* 0 Right Column 0 Left Column */
    background-color: #FFF;
    height: 100%;
    position:relative; /*added*/
    }

    #left_column 
    {
    /* removed float: left; */
    background-color: pink;
    position:absolute; /*added*/
    left:0px; /*added*/
    }

    #right_column {
    /*removed float:right*/
    background-color: orange;
    position:absolute; /*added*/
    right:0px; /*added*/
    } 
```

# python - python多线程长线程运行

> ID：15309346
> 
> 赞同：0
> 
> 时间：2013-03-09T09:48:45.247
> 
> 标签：python, multithreading

我正在编写在文本中并行搜索单词的程序。我在运行线程时遇到“问题”，因为它在程序中花费的时间最长。如果有更多线程，则查找单词所需的时间更少，因为文本块在线程之间划分。但我试图衡量哪个部分花费的时间最多，它是启动线程的这一部分。这是代码：

```
startThreadsStart=time.time()
for i in range(0,threads_number):
    threads.append(ParallelStringSearch("something", i)) 
    threads[i].start()
startThreadsEnd = time.time()-startThreadsStart 
```

和 Thread 类中的 run() 方法：

```
 def run(self):
    self.time = time.time()
    self.search()
    self.end_time = time.time()-self.time
    print "EXECUTION: ",self.index,self.end_time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:51:33.580

假设您使用 CPython 来并行化 CPU 密集型任务，python 线程将无法帮助您，因为[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)。尝试使用子流程。

# java - 在 MySql 表中插入特定类型的文本时遇到问题

> ID：15309351
> 
> 赞同：1
> 
> 时间：2013-03-09T09:49:13.660
> 
> 标签：java, mysql, sql

我正在检索有关 youtube 视频的评论。到目前为止，我已经成功地读取和解析 XML 文件。问题是我必须创建一个评论和视频链接数据库。我在java中使用以下查询：

```
sql = "insert into comments_db(`video_link`,`comment`) values(\""
                        + ura[k] + "\",\"" + comment + "\")"; 
```

问题是无法插入*评论*中出现的如下文本：

> “嘿，这“非常”酷”或“嘿，我正在寻找解决方案”

因为`\"`or`\'`引号。我不想删除它们，因为我必须进行一些语言学处理并且我不想改变含义（*I'm->Im 对我来说是不同的*）。我怎样才能插入它们？我对所有这些都使用 java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:54:55.150

使用`PreparedStatement`，例如，

```
String query = "insert into comments_db(video_link, comment) VALUES (?, ?)";
PreparedStatement insertQuery = con.prepareStatement(query); 
insertQuery.setString(1, "He said, \"I'm here!\"");
insertQuery.setString(2, "I'm Here");
insertQuery.executeUpdate(); 
```

*   [使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)
*   [建立连接](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)

`PreparedStatement`帮助您避免[SQL 注入](http://bobby-tables.com/)。

# php - 使用 v2 API 打印标记，其顺序与表格信息不同

> ID：15309353
> 
> 赞同：0
> 
> 时间：2013-03-09T09:49:42.817
> 
> 标签：php, arrays, google-maps-api-2, markers

我有一个 sql 查询，我将 mysql_fetch_array 的结果传递到一个 while 循环中，我正在打印一个表。我的想法是，每行中包含相同的信息，我正在地图上构建标记。在我构建地图时，问题是地图始终以表格的最后一行为中心（C 标记）。而不是这个，我希望地图以标记 A 为中心（表格的第一行）。我正在搜索要反转数组但不起作用。

```
 <?php
   while($info4 = mysql_fetch_array($result4))
   {    

   ?>   

      // A function to create the marker and set up the event window
      function createMarker(point, name, html, flag) 
      {
        //set the icon of the marker        
        var letteredIcon = new GIcon(baseIcon);
        letteredIcon.image = "markers/"+flag+".png";

         // Set up our GMarkerOptions object
        markerOptions = { icon:letteredIcon };
        var marker = new GMarker(point, markerOptions);
        GEvent.addListener(marker, "click", function() {
          marker.openInfoWindowHtml(html);
        });
        // save the info we need to use later for the side_bar
        gmarkers.push(marker);
        // add a line to the side_bar html
        side_bar_html += '<td><a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><\/td>';
         return marker;
      }

      // add the points   
      map.setCenter(new GLatLng(<?php print $info4['placeY'];?>,<?php print $info4['placeX'];?>), 14);    
      var point = new GLatLng(<?php print $info4['placeY'];?>,<?php print $info4['placeX'];?>);
      var marker = createMarker(point,"<?php print utf8_decode($info4['placeName']);?>","<?php print utf8_decode($info4['placeName'])."<br>".utf8_decode($info4['placeAddress'])."<br>".utf8_decode($info4['placeDistrict']);?>","<?=$flag;?>")
      map.addOverlay(marker);

    <?php  $flag=$flag+1;
    } ?> 
```

一个例子： 表：

观光剧场

B 观潮现象

C 观光红楼

在这个例子中，地图以 C 标记而不是我想看到的 A 标记为中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:59:08.857

因此，正确的代码如下所示，而不是使用 while 循环。

```
 //make an array
    $rows = array();
while ($row=mysql_fetch_array($result4)){
//push the rows to the empty array
    array_push($rows, $row);
}
// reverse the order of the rows
$reversedarray=array_reverse($rows);
    //use the info of each row as the variable $info4 
foreach ($reversedarray as $info4) {
    //the code 
```

# wpf - 仅覆盖 MeasureOverride 会影响性能吗？

> ID：15309355
> 
> 赞同：3
> 
> 时间：2013-03-09T09:49:47.707
> 
> 标签：wpf, performance, wpf-controls, custom-controls

我有一个来自 WrapPanel 的派生类，它覆盖了 MeasureOverride 方法。我正在构建我的应用程序的骨架/原型，首先制作视图模型和视图以了解屏幕流程等，同时让其他人提供有关设计的反馈。所以它是一个非常轻量级的应用程序。

我注意到在打开下一个屏幕之前单击特定按钮需要很长时间，因此我对应用程序进行了分析（采样）。在 Startup 方法旁边，MeasureOverride 是占用时间最多的单个方法。这是我的代码：

```
public class GroupWrapPanel : WrapPanel
{
    public const double ItemSize = 120.0;

    protected override Size MeasureOverride(Size availableSize)
    {
        var numberOfRows = (availableSize.Height / ItemSize);
        var numberOfCols = (Children.Count / numberOfRows) + 1;

        var newSize = new Size(numberOfCols * ItemSize, availableSize.Height);

        return base.MeasureOverride(newSize);
    }
} 
```

所以我注释掉了整个覆盖，现在它执行得很快——MeasureOverride 不在占用大部分时间的方法列表中。我只是添加了一个覆盖，除了调用基类之外什么都不做。现在 MeasureOverride 又出现了，需要相当长的时间。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:47:28.833

如果您建议这样做：

```
protected override Size MeasureOverride(Size availableSize)
{
    return base.MeasureOverride(newSize);
} 
```

导致显着放缓，这似乎不太可能。如果您在使用和不使用这种微不足道的覆盖的情况下真正进行分析并注意到不同的结果，我认为您的分析器上很可能有“只是我的代码”或类似设置，或者您已经过滤，以至于您没有看到`WrapPanel.MeasureOverride`你看的时候的成本`GroupWrapPanel.MeasureOverride`。

小组的措施是否真的占用了大量时间是另一回事，但这是可信的 - 我建议挖掘调用树并找到调用的贡献，您可能会发现某些子项目的测量成本很高。

# hibernate - NHibernate.MappingException：没有持久性

> ID：15309369
> 
> 赞同：4
> 
> 时间：2013-03-09T09:51:23.250
> 
> 标签：hibernate, nhibernate, orm, fluent-nhibernate, fluent-nhibernate-mapping

我在使用无状态会话进行更新时遇到问题，我想知道是否有人见过这样的事情。（NHibernate 3.1）。

我基本上在做以下事情：

```
SomeEntity e = statelessSession.Get<SomeEntity>(id); 
e.SomeProperty = "a new value"; 
statelessSession.Update(e); 
```

我收到以下错误：

```
NHibernate.MappingException: No persister for: 
  Castle.Proxies.SomeEntityProxy 
  at NHibernate.Impl.SessionFactoryImpl.GetEntityPersister(String 
  entityName) 
  at NHibernate.Impl.StatelessSessionImpl.GetEntityPersister(String 
  entityName, Object obj) 
  at NHibernate.Impl.StatelessSessionImpl.Update(String entityName, 
  Object entity) 
  at NHibernate.Impl.StatelessSessionImpl.Update(Object entity) 
```

映射 -

```
class SomeEntityMap : ClassMap<SomeEntity>
{
    public SomeEntityMap()
    {           
        Table("Some_Entity");            
        Id(x => x.ID).Column("ID");         
        Map(x => x.Name).Column("NAME");
    } 
```

我已经进入调试器，可以看到 statelessSession.Get(id) 正在返回一个代理。这个对吗？

有人知道问题是什么吗？请分享您的观点和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:58:07.417

正如您在问题中概述的那样，我做了一个测试项目，但无法重现该问题。我能够重现该错误的唯一情况是：

1.  初始化会话工厂时未指定映射的位置，即您丢失了

    ```
    Fluently.Configure()
      .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SomeEntity>()); 
    ```

2.  的属性之一`SomeEntity`已标记为`lazy="no-proxy"`。更多信息可以在[这里](https://groups.google.com/forum/?fromgroups=#!topic/nhusers/Zl2P93Max0I)找到。

# python - 带有字母数字的python中的正则表达式帮助

> ID：15309375
> 
> 赞同：0
> 
> 时间：2013-03-09T09:52:28.400
> 
> 标签：python, regex

我正在尝试从字符串中过滤掉不一致的字符。

目前我有这个..在 python

```
name = re.sub('([^a-zA-Z0-9  -\'!$&])',' ', name) 
```

但我试图包含诸如“（）”括号“/”反斜杠和正斜杠之类的字符。不知何故，它不起作用。有没有人可以看看。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:50:44.070

非正则表达式解决方案

```
accepted = '''!$*()\/.,>-_=+<:;'"?|'''
allowed = string.digits + string.letters + accepted
filter(allowed.__contains__, name) 
```

这将过滤非字母数字字符的字符串**名称，并***否定*过滤**接受**的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:05:08.337

```
name = re.sub('([^a-zA-Z0-9\[\]\(,\)\+\/ \\-\'!$&])',' ', name) 
```

# mysql - 性能：使用连接到 mysql 中的 db1 从另一个 db2.table 中选择

> ID：15309381
> 
> 赞同：0
> 
> 时间：2013-03-09T09:53:25.007
> 
> 标签：mysql, database, database-connection

我想知道如果我使用相同的连接进行选择、更新等是否存在任何性能问题。进入另一个数据库。我的应用程序使用 2 个数据库，一个用于交易数据，一个用于主数据。所以我想只维护一个连接并对 db2 执行所有查询，如 select * from db2.table 或更新 db2.table。任何人都可以建议它与连接到 db2 并进行查询相比是否有任何性能差异？

谢谢

# android - 从 simpleAdapter 转换为 ArrayAdapter

> ID：15309382
> 
> 赞同：0
> 
> 时间：2013-03-09T09:53:40.013
> 
> 标签：android, android-listview, android-arrayadapter, simpleadapter

我已经为自己构建了一个包含列表的应用程序。到目前为止，我一直使用 a`SimpleAdapter`来填充列表，但我决定移至`ArrayAdapter`. 问题是，我不知道如何以`ArrayAdapter`同样的方式填充！这是我使用我的方式`SimpleAdapter`：

```
adapter=new SimpleAdapter(this, listItems, R.layout.custom_row_view, new String[]{"name", "current", "reset"},  new int[] {R.id.text1, R.id.text2, R.id.text3}); 
```

我的 listItems 变量实际上是这样设置的：

```
static final ArrayList<HashMap<String,String>> listItems = new ArrayList<HashMap<String,String>>(); 
```

现在，当尝试使用`ArrayAdapter`具有相同参数的构造函数时，它给了我一个错误。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:35:41.143

> 现在，当尝试使用具有相同参数的 ArrayAdapter 构造函数时，它给了我一个错误。

这是因为 an`ArrayAdapter`是为非常简单的场景设计的，其中数据采用列表/数组的形式，只有一个小部件（通常是 a `TextView`）要绑定到。由于您的布局中有三个小部件，因此您需要扩展`ArrayAdapter`该类以绑定您的数据，因为它无法通过默认实现自行执行此操作，如下所示：

```
listView.setAdapter(
            new ArrayAdapter<HashMap<String, String>>(this, R.layout.custom_row_view,
                    R.id.text1, listItems) {

                        @Override
                        public View getView(int position, View convertView,
                                ViewGroup parent) {
                            View rowView = super.getView(position, convertView, parent);
                            final HashMap<String, String> item = getItem(position);
                            TextView firstText = (TextView) rowView.findViewById(R.id.text1);
                            firstText.setText(item.get("corresponding_key"));
                            TextView secondText = (TextView) rowView.findViewById(R.id.text2);
                            secondText.setText(item.get("corresponding_key"));
                            TextView thirdText = (TextView) rowView.findViewById(R.id.text3);
                            thirdText.setText(item.get("corresponding_key"));
                            return rowView;
                        }

            }); 
```

但最后还有一个问题，你为什么要使用`ArrayAdapter`，什么时候`SimpleAdapter`更适合你的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:13:29.800

您应该像这样定义一个 ArrayAdapter：

```
ListView listView = (ListView) findViewById(R.id.mylist);
String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
  "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
  "Linux", "OS/2" };

// Define a new Adapter
// First parameter - Context
// Second parameter - Layout for the row
// Third parameter - ID of the TextView to which the data is written
// Fourth - the Array of data

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1, android.R.id.text1, values);

// Assign adapter to ListView
listView.setAdapter(adapter); 
```

# jquery-mobile - 未捕获的类型错误：对象# 尝试显示弹出窗口时，d3.js 和 jquery UI mobile 中没有方法“indexOf”

> ID：15309383
> 
> 赞同：1
> 
> 时间：2013-03-09T09:53:42.533
> 
> 标签：jquery-mobile, d3.js

我正在尝试在具有强制导向图的移动应用程序中构建 d3 图表，其中节点应在触摸时显示弹出窗口。但是，在单击节点时，我收到以下错误 -

未捕获的类型错误：对象 # 没有方法 'indexOf'

我已经在 codepen 上重新创建了这个问题 -

[http://codepen.io/madhug/pen/gdiKr](http://codepen.io/madhug/pen/gdiKr)

我尝试为此进行谷歌搜索，但似乎该错误已修复（？） - [https://github.com/mbostock/d3/issues/78](https://github.com/mbostock/d3/issues/78)

我错过了什么吗？我应该寻找什么来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T13:31:22.933

这是同样的问题：[SvgAnimatedString missing method indexOf](https://stackoverflow.com/questions/12588913/svganimatedstring-missing-method-indexof)

我没有使用 d3 也有同样的问题。我只使用纯 SVG 并使用 angularJS 控制器将其附加到 DOM 中。问题不在 d3 中。您可以通过在包含链接的元素上将 return false 值添加到 jQuery click 事件处理程序中来解决此问题。

我的 SVG 的一部分：

```
<g id="1" class="node">
<a xlink:title="title">
<polygon fill="#cccccc" stroke="#cccccc" points="25,-434 25,-457 98,-457 98,-434 25,-434"></polygon>
<polygon fill="none" stroke="black" points="25,-434 25,-457 98,-457 98,-434 25,-434"></polygon>
<text text-anchor="start" x="29.5" y="-442.3" font-family="Arial" font-size="14.00">title</text>
<polygon fill="transparent" stroke="black" points="25,-412 25,-434 98,-434 98,-412 25,-412"></polygon>
<text text-anchor="start" x="37" y="-419.8" font-family="Arial" font-size="14.00">title</text>
</a>
</g> 
```

jQuery重载方法：

```
$('g.node').click(function (element) {
   return false;
}); 
```

希望这可以帮助...

# c# - 使用云服务对 Web 应用程序进行压力测试

> ID：15309386
> 
> 赞同：5
> 
> 时间：2013-03-09T09:54:06.973
> 
> 标签：c#, azure, selenium, cloud, load-testing

我正在做一个关于可扩展性的研究项目。我在 Windows Azure 上创建了一个 Web 应用程序，现在需要数百万用户对其进行测试。我正在考虑执行以下操作：

*   创建一个使用[Selenium](http://docs.seleniumhq.org/)向 Web 应用程序发送请求的简单程序
*   将此程序集成为另一个 Azure 云服务
*   增加实例数以增加并发连接数

我想使用 Selenium 而不仅仅是发送正常的 http 请求的原因是我还需要测试应用程序的 Javascript。我的问题是：

*   是否可以将 Selenium 用作 Windows Azure 辅助角色/虚拟机？
*   Selenium 可以一次发送多个请求吗？我将使用多个实例，但是每个实例需要能够每秒生成大约 2000 个或更多请求，这可能吗？

这可以使用 Selenium 来完成，还是有更好的方法来做到这一点？我也见过 JMeter，但由于它是 Java 语言，我认为我不能将它用作 Azure 工作者角色

要求：在大约 15 分钟到 30 分钟内产生 1 亿次点击我预计在 Azure 上使用大约 40-50 个实例，这意味着每个实例每秒需要生成大约 2000 个请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T09:57:35.360

Selenium 非常适合功能测试，但 AFAIK 它模拟单用户场景。

JMeter 更适合负载测试。

但是，如果您正在寻找可以进行负载测试的基于云的服务，请查看[Blitz.io](https://www.blitz.io/)

其他一些替代品是（有些需要下载）

1.  [索斯塔](http://www.soasta.com/testing-solutions/performance-and-load-testing-tools/)
2.  [新人](http://www.neotys.com/)
3.  [Loadimpact.com](http://loadimpact.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T23:54:11.767

Selenium 的优势在于使用多个浏览器进行测试——因为 Javascript 会破坏不同的浏览器。不过，JMeter 将为您提供许多其他不错的功能。

我们为 Amazon AWS 构建了一个类似的服务。该服务是免费的，负载代理在您的 AWS 账户上作为 Spot 实例运行。不确定 Amazon 现货实例价格与 Azure 相比如何，但我们能够以 2 美元/小时的价格在 200 个 m1.small 实例上模拟 50,000 名用户。我们为其他人发布了这项服务 - [www.redline13.com](http://www.redline13.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T17:50:32.147

由于您使用 C# 标记，因此我假设您使用的是 Visual Studio。

你应该能够通过结合使用 Visual Studio Online 和 Visual Studio Ultimate 来完成你想要的。更多详细信息在此处：[在云中进行负载测试以查找性能问题](http://www.visualstudio.com/get-started/load-test-your-app-vs)

# cassandra - 如何在cassandra中使用cpp thrift api插入整数值而不转换为字符串

> ID：15309389
> 
> 赞同：4
> 
> 时间：2013-03-09T09:54:16.593
> 
> 标签：cassandra, thrift

我正在为 c++ 使用 thrift api。我有 column_name 作为整数类型的列。想要在其中插入价值。
我正在使用以下代码 -

```
Column c1;     `
c1.__set_name("column_name");
c1.__set_value(size);
c1.__set_timestamp(getTS()); 
client.insert("mykey", columnpath, c1, org::apache::cassandra::ConsistencyLevel::ONE);` 
```

__set_value 只接受字符串吗？有没有办法插入整数值而不转换字符串？

# javascript - JavaScript 拖拽 div 滞后

> ID：15309398
> 
> 赞同：2
> 
> 时间：2013-03-09T09:55:40.060
> 
> 标签：javascript

我在使用以下函数拖动 div 时遇到问题，由于某种原因，当我将 div 拖动到页面上的内容（例如图像和文本块）上时它会滞后。

奇怪的是，从左到右拖动时不会发生这种滞后，只是从上到下。

任何想法如何摆脱此功能中的垂直滞后？

```
function enableDragging(ele) {
    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
    enableDragging.z = enableDragging.z || 1;
    var grabber = document.getElementById("wrapper");
    grabber.onmousedown = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        current = target.parentNode;
        dragging = true;
        x = ev.clientX + 2;
        y = ev.clientY + 2;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;

        document.onmousemove = function (ev) {
            ev = ev || window.event;
            if (dragging == true) {
                var Sx = parseFloat(ev.clientX) - x + Ox;
                var Sy = parseFloat(ev.clientY) - y + Oy;
                current.style.left = Math.min(Math.max(Sx, Math.min(viewport().width - Sx, 0)), viewport().width - current.offsetWidth) + "px";

                current.style.top = Math.min(Math.max(Sy, Math.min(viewport().height - Sy, 0)), viewport().height - current.offsetHeight) + "px";
            }
        }

        document.onselectstart = function () {
            return false;
        };

        document.onmouseup = function (ev) {
            ev = ev || window.event;
            dragging && (dragging = false);
            if (ev.preventDefault) {
                ev.preventDefault();
            }
        }

        document.body.style.MozUserSelect = "none";
        document.body.style.cursor = "default";

        return false;
    };
}

function viewport() {
    var e = window
    , a = 'inner';
    if ( !( 'innerWidth' in window ) ) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:47:52.557

我已经放了一个小提琴并在这里创建了一个演示：http: [//jsfiddle.net/N6A4q/](http://jsfiddle.net/N6A4q/) （注意我已经进行了修改以处理`var grabber = ele;`测试。

我确实注意到较慢的行为取决于 css 的定位。
可能问题可能需要一些优化，例如缓存值。

> **例如**：
> current.style.top = Math.min(Math.max(Sx, Math.min(viewport().height - Sx, 0)), viewport().height - current.offsetWidth) + "px";

可以改进

> var viewportHeight = viewport.height();
> current.style.top = Math.min(Math.max(Sy, Math.min(viewportHeight - Sy, 0)), viewportHeight - current.offsetHeight) + "px";

这里有一些关于浏览器重绘/流的好读物：[http ://www.phpied.com/rendering-repaint-reflowrelayout-restyle/](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

该链接建议：

> 例如，快速连续（循环）设置和获取样式是一个坏主意，例如：
> 
> // 不，不！
> el.style.left = el.offsetLeft + 10 + "px";

仅仅因为它喜欢简单的读写。

# ios - 更新 UITableViewCell labelText 文字问题

> ID：15309399
> 
> 赞同：1
> 
> 时间：2013-03-09T09:56:04.403
> 
> 标签：ios, uitableview

完成 UITableView 后，我有一个异步进程来更新 1 个单元格的文本。

更新更改了文本和颜色，例如

```
cell.textLabel.text = @"new text"; 
aCell.textLabel.textColor = [UIColor blackColor]; 
```

我遇到的问题是这些东西被调用了，但细胞似乎需要几秒钟才能真正改变。

就算我也叫

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:cIndex] withRowAnimation:UITableViewRowAnimationMiddle]; 
```

动画以相同的延迟发生。

有没有人知道为什么单元格需要这么长时间才能更新，或者任何人都可以指出我如何调试正在发生的事情的正确方向。没有其他代码在运行应用程序只是坐在那里，所以 UI 线程不忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:05:06.320

在使用异步进程时尝试这种方式来更新 UI

```
dispatch_async(dispatch_get_main_queue(), ^{
     [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:cIndex] withRowAnimation:UITableViewRowAnimationMiddle];
}); 
```

**编辑**

根据[GDC 参考](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

> dispatch_async 在调度队列上提交一个异步执行块并立即返回。

因此，上面的代码块将立即在主队列上异步执行以更新 UI。

# sql - Sql Server 2008 有列显示名称吗？

> ID：15309401
> 
> 赞同：0
> 
> 时间：2013-03-09T09:56:32.020
> 
> 标签：sql, sql-server-2008, datagridview

我实际上没有注意到这一点，在 Access 2003/2007 中，我可以将列显示名称设置为与其在 sql 查询字符串中的名称不同。但是在 sql server 2008 中，我找不到这个选项。我找到了“描述”，但这不是我想要的。

我认为这是Sql Server 2008应该具备的一个非常有用的功能。当我获取数据并显示到DataGridView时，显示sql查询字符串中的列名，不太友好。

而且我知道我可以将我想要的名称嵌入到 sql 查询字符串中，但是如果我有很多列，那将花费很多时间，并且不能重复使用。

**如果有人可以帮助我在 Sql Server 2008 中设置“列显示名称”，我将不胜感激，谢谢大家 :)**

![这是表格设置页面，没有“列显示名称”](../Images/095b91f423d466fbe412991e7d950cb0.png)

![我需要显示列名而不是 col,col2....](../Images/b3dce8b370ec5005030f1df83218db34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:05:01.800

不幸的是，此功能在 SQL Server 中不可用，但是您可以随意命名属性，包括向它们添加空格。

当您使用 T-SQL 中的“AS”关键字查询它们时，您也可以重命名字段（[检查 select 语句以查看列别名](http://msdn.microsoft.com/en-us/library/ms176104.aspx)）

例子

```
Select col1 as [Hello World] from table1 
```

"[,]" 是限定符，以确保列名不会与任何关键字冲突，如果列名中有空格，则应使用该限定符。

DataGridView 还可以设置列名，请查看下面的链接以获取更多信息。

*   [具有关联数据源的 DataGridView 的自定义列名称](https://stackoverflow.com/questions/6228199/custom-column-names-for-datagridview-with-associated-datasource)
*   [如何在Datagridview C#中为特定列设置列标题文本](https://stackoverflow.com/questions/1036948/how-to-set-column-header-text-for-specific-column-in-datagridview-c-sharp)
*   [DataGridView 中的 SQL 数据](https://stackoverflow.com/questions/3163222/sql-data-in-datagridview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:00:42.087

你可以使用这个：

```
select col1 as mycolumname from ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:01:08.153

> SQL Server 没有此功能。
> 您可以通过执行以下操作来设置列名：

```
SELECT ColumnName AS 'DesireColumnName' 
```

`View`或使用您想要的列名创建一个。因此，新的列名在`View`.

# mysql - MySQL选择查询不起作用

> ID：15309409
> 
> 赞同：2
> 
> 时间：2013-03-09T09:57:54.193
> 
> 标签：mysql, sql, select, join

我有 2 个表，我想从中获取用户数据。

**表格1 ：** `frei_session`

```
username    session_id

Prince      51
Dilip       49
Sumit       50 
```

**表 2：** `friendrequest`

```
requestTo   requestFrom     status

49              50              C
50              51              C
49              51              P 
```

**朋友请求**表显示用户之间的关系，其中**C**代表**Complete**，**P**代表**Pending**。表示如果`status = C`两者都是朋友并且`status = P`请求是否待处理。

**frei_session**表显示网站的所有在线用户。

我只想限制与朋友的聊天。我尝试了以下查询，但它显示了所有在线用户

假设用户**49**在线

```
SELECT DISTINCT f.username,f.session_id
    FROM frei_session AS f
    LEFT JOIN friendrequest AS fr ON fr.requestFrom=f.session_id
    LEFT JOIN friendrequest AS frnd ON frnd.requestTo=f.session_id
    WHERE (fr.requestFrom<>49 OR frnd.requestTo<>49) AND (fr.status = 'C' OR frnd.status = 'C') 
```

此查询向我显示这样的输出

```
username    session_id

Prince          51
Sumit           50 
```

但我想要这样的输出

```
username    session_id

Sumit       50 
```

因为用户**51**和用户**49**不是朋友

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:13:18.340

```
SELECT  IF(a.RequestTo = 49, c.userName, b.userName) username,
        IF(a.RequestTo = 49, c.session_ID, b.session_ID) Session_ID
FROM    friendRequest a
        INNER JOIN frei_session b
            ON a.requestTo = b.session_ID
        INNER JOIN frei_session c
            ON a.requestFrom = c.session_ID
WHERE   a.status = 'C' AND
        49 IN (a.requestTo, a.requestFrom) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0bb9b/5)
*   [SQLFiddle Demo（*当 all 处于`friendrequest`has 状态时`C`*）](http://www.sqlfiddle.com/#!2/bdd3d/1)

结果

```
╔══════════╦════════════╗
║ USERNAME ║ SESSION_ID ║
╠══════════╬════════════╣
║ Sumit    ║         50 ║
╚══════════╩════════════╝ 
```

**更新 1**

```
DELIMITER $$
CREATE PROCEDURE ShowAllUserName(IN _sessionID INT)
BEGIN
    SELECT  IF(a.RequestTo = _sessionID, c.userName, b.userName) username,
            IF(a.RequestTo = _sessionID, c.session_ID, b.session_ID) Session_ID
    FROM    friendRequest a
            INNER JOIN frei_session b
                ON a.requestTo = b.session_ID
            INNER JOIN frei_session c
                ON a.requestFrom = c.session_ID
    WHERE   a.status = 'C' AND
            _sessionID IN (a.requestTo, a.requestFrom);
END;
DELIMITER $$ 
```

调用过程时，

```
CALL ShowAllUserName(49); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:02:36.110

你为什么要加入同一张桌子两次？

尝试

```
LEFT JOIN friendrequest AS fr ON fr.requestFrom=f.session_id AND fr.requestTo=f.session_id 
```

比，您可以通过以下方式更改您的 where 查询：

```
WHERE fr.requestFrom<>49 AND fr.status = 'C' 
```

`GROUP BY fr.status`如果我确实了解您的问题，我会尝试，它可能会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T10:08:33.593

尝试使用此查询：

```
SELECT DISTINCT f.username,f.session_id
FROM frei_session AS f
LEFT JOIN friendrequest AS fr ON f.session_id IN (fr.requestFrom, fr.requestTo)
WHERE fr.requestFrom = 49 AND fr.status = 'C' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T15:08:33.830

您可以先获取收到 Dilip 请求的用户。然后，您将获取已向 Dilip 发送请求的用户。之后，您联合这些用户。SQL 类似于：

```
SELECT fs.username, fs.session_id
FROM   frei_session AS fs, friendrequest AS fr
WHERE  fs.username = "Dilip"
  AND  fs.session_id = fr.requestFrom
  AND  fr.status = "C"
UNION
SELECT fs.username, fs.session_id
FROM   frei_session AS fs, friendrequest AS fr
WHERE  fs.username = "Dilip"
  AND  fs.session_id = fr.requestTo
  AND  fr.status = "C" 
```

我相信这个解决方案更容易理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T12:31:19.100

```
SELECT  IF(a.RequestTo = 49, c.userName, b.userName) username,
        IF(a.RequestTo = 49, c.session_ID, b.session_ID) Session_ID
FROM    friendRequest a
        INNER JOIN frei_session b
            ON a.requestTo = b.session_ID
        INNER JOIN frei_session c

            ON a.requestFrom = c.session_ID
WHERE   a.status = 'C' AND
        49 IN (a.requestTo, a.requestFrom) 
```

# dotnetopenauth - Windows 应用程序的 Openid /Oauth 实现

> ID：15309410
> 
> 赞同：0
> 
> 时间：2013-03-09T09:58:03.207
> 
> 标签：dotnetopenauth, google-openid, google-oauth

如何在windows应用程序中实现openid / oauth。需要考虑哪些必要事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:54:10.740

颁发 OpenID 根本不适用于客户端应用程序。它仅适用于网络应用程序。

客户端应用程序当然可以是 OAuth 消费者/客户端。您可以查看[DotNetOpenAuth OAuthConsumerWpf](https://github.com/DotNetOpenAuth/DotNetOpenAuth/archive/master.zip)示例以获取此示例。

# wordpress - 在 Wordpress 中为新闻页面添加边框

> ID：15309414
> 
> 赞同：0
> 
> 时间：2013-03-09T09:58:44.690
> 
> 标签：wordpress, navigation, border

我想在新闻页面上的导航菜单中添加一个虚线底部边框。

这是我正在开发的网站，因此您可以了解我的意思： http: [//www.eclipse-experience.com/subdirectory](http://www.eclipse-experience.com/subdirectory)

知道我会使用什么 CSS 吗？还是条件标签？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:37:38.480

您可以在 header.php 中使用内联样式：

```
<?php 
if($post->ID == ID_OF_YOUR_NEWS_SITE) { ?>
    <styles>
        #nav {border-bottom:1px dotted #AAAAAA;}
    </styles>
<?php } ?> 
```

# vb.net - VB.NET：如何流畅地随机移动对象

> ID：15309416
> 
> 赞同：0
> 
> 时间：2013-03-09T09:58:50.107
> 
> 标签：vb.net

我刚刚编写了一些可以在每个计时器滴答声中随机移动对象的代码。我想平稳地移动对象（不跳入随机坐标）。如何编码？顺便提一句。这是我随机移动对象的代码

```
Label2.Location = New Point(Rnd.Next(0, Me.Width - Label2.Width), Rnd.Next(0, 
Me.Height - (Label2.Height + (Me.Height - Me.ClientSize.Height))))    
Me.Text = "X:" & Label2.Location.X & ", Y:" & Label2.Location.Y 
```

# fluent-nhibernate - 使用 FluentNhibernate 连接到 sql server

> ID：15309418
> 
> 赞同：1
> 
> 时间：2013-03-09T09:59:29.197
> 
> 标签：fluent-nhibernate

我正在使用流利的 nhibernate 作为 ORM，我通过 nuget 获得了最新版本，我的 sql server 是 2012，这可能吗！？当我想配置时，它不提供我 2012

```
MsSqlConfiguration
    .MsSql2008
     .ShowSql() 
```

任何 ！现在，当我运行我的应用程序并请求在我的 sql server 中创建数据库时，我已经获得了最新版本，出现此错误：

> 无法加载文件或程序集“NHibernate，版本=3.3.1.4000，Culture=neutral，PublicKeyToken=aa95f207798dfdb4”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

就在这个错误之前，我在登录 sql server 时遇到了另一个问题，我没有为我的 sql management studio 设置任何用户名和密码！有什么问题？请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:13.203

MsSqlConfiguration.MsSql2008 应该与 MsSql2012 兼容。如果您确实需要 2012 年的特性/功能，可以通过从 MsSql2008Dialect 继承并添加它们来添加它们。

> 无法加载文件或程序集'NHibernate，版本 = 3.3.1.4000

这表明您使用针对 NH 3.3.1 构建的 FLuentNHibernate，但使用 3.3.1 以外的 NH。决定一个版本或在您的`app.config`

# for-loop - 批处理 - 通过 For 循环将用户添加到多个组

> ID：15309422
> 
> 赞同：0
> 
> 时间：2013-03-09T10:00:20.100
> 
> 标签：for-loop, batch-file, cmd

在我的最后一个问题中，我讨论了我是如何编写一个新的大众用户创建脚本的，现在大约有 95 行。我收到了该问题的解决方案，并尝试将其实现到代码的不同部分。现在我正在尝试使用嵌套在创建用户的主 for 循环中的 for 循环将用户从 Excel 文档添加到多个组，邮件启用它们等。

现在这就是我所拥有的：

```
setlocal enabledelayedexpansion
for /f "skip=37 tokens=* delims=," %%a in (Settings.ini) do (
set Groups=%%a
)

for /f "skip=1 Tokens=1,2,3 Delims=," %%a in (C:\UserList.csv) do (
set User=%%a
set "GroupsAdd=net group %groups:,= /add !User! && net group %"
!GroupsAdd! /add %%a
) 
```

如您所见，脚本跳过设置文件中的三十七行，直到到达所需的行并将组变量设置为该行。下一个 for 循环尝试将用户添加到设置文件中定义的指定组，例如 Student、StudentProxy、Year12 等。

那是代码失败的地方，它把我带到了网络组的帮助菜单，我已经尝试了其他的东西，比如不使用延迟扩展，并且提供了一个错误说明：

```
/Add is not recognised as an internal or external command, operable program or batch file. 
```

任何帮助将不胜感激。

**TL;DR 我需要创建一个函数，该函数将使用网络组将 Excel 文件中的用户添加到设置文件中的指定组，但是我现在这样做的方式不断失败，我需要帮助。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:28:01.857

请记住，`!`s 用于*延迟*扩展。这意味着以`!`s 分隔的表达式应该比以 s 分隔的表达式扩展得晚`%`。

在您当前的代码中，一个`!`-delimited 表达式放在一个`%`-delimited 中。这样，前者永远没有机会扩展：

*   `%`扩展发生得更早，并且在它发生的特定时间发生，s`!`不应该被处理和识别为特殊符号。因此，该`/add !User! && net group %`位按字面意思插入，而不扩展`!User!`.

*   后来，当你扩展整个`GroupsAdd`东西时，`!`它里面的 s 就不再起作用了，因为扩展它们的时间正是在`GroupsAdd`扩展的时候，而不是*之后*。换句话说，`!`s 不是递归扩展的。

我可以在这里看到两个选项：

1.  将`!GroupsAdd! /add %%a`放入子例程中，将`!`s替换为`%`s 和：`%%a``%User%`

    ```
    ...
    for /f "skip=1 Tokens=1,2,3 Delims=," %%a in (C:\UserList.csv) do (
    set User=%%a
    set "GroupsAdd=net group %groups:,= /add !User! && net group %"
    call :GroupsAdd
    )
    goto :EOF
    :GroupsAdd
    %GroupsAdd% /add %User% 
    ```

2.  去掉`User`变量，在`set GroupsAdd`命令中，用 替换`!User!`，`%%a`以及`%`用 1 替换扩展`!`：

    ```
    ...
    for /f "skip=1 Tokens=1,2,3 Delims=," %%a in (C:\UserList.csv) do (
    set "GroupsAdd=net group !groups:,= /add %%a && net group !"
    !GroupsAdd! /add %%a
    ) 
    ```

# java - Spring + Hibernate 不会自动打开会话

> ID：15309427
> 
> 赞同：1
> 
> 时间：2013-03-09T10:00:53.500
> 
> 标签：java, spring, hibernate, spring-mvc

我正在使用以下架构在 Spring 应用程序中开发 Hibernate DAO：

我有一个 PersonDAO 接口，我在其中声明了我想要的 CRUD 方法，然后我创建了一个具体的类 PersonDAOImpl 来实现这个接口，这个：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.hibernate.SessionFactory;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

@Repository
@Transactional
public class PersonDAOImpl2 {

    // Factory per la creazione delle sessioni di Hibernate:
        private static SessionFactory sessionFactory;

        // Metodo Setter per l'iniezione della dipendenza della SessionFactory:
        public void setSessionFactory(SessionFactory sessionFactory) {
            this.sessionFactory = sessionFactory;
            System.out.println("Ho iniettato la SessionFactory: " + sessionFactory);

        }

        /** CREATE CRUD Operation:
         * Aggiunge un nuovo record rappresentato nella tabella rappresentato
         * da un oggetto Person
         */
        @Transactional(readOnly = false)
        public Integer addPerson(Person p) {

            System.out.println("Inside addPerson()");
            System.out.println("Connessione aperta: " + sessionFactory.getCurrentSession().isOpen());
            System.out.println("E' connesa:" + sessionFactory.getCurrentSession().isConnected());

            Integer personID = personID = (Integer) sessionFactory.getCurrentSession().save(p);

            return personID;

        }

} 
```

然后我创建了一个包含 main() 方法的**MainApp**类来测试它是如何工作的。

问题是当我尝试在数据库中插入新记录时执行 MainApp 时，我在堆栈跟踪中获得以下错误消息：

```
INFO: Using DataSource [org.apache.commons.dbcp.BasicDataSource@446adaa2] of Hibernate SessionFactory for HibernateTransactionManager
Ho iniettato la SessionFactory: org.hibernate.internal.SessionFactoryImpl@34a8a14b
Contesto recuperato: org.springframework.context.support.ClassPathXmlApplicationContext@70501e4e: startup date [Sat Mar 09 10:02:37 CET 2013]; root of context hierarchy
Creato persona1: org.andrea.myexample.HibernateOnSpring.entity.Person@2d35bcd7
Exception in thread "main" java.lang.ClassCastException: org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl2$$EnhancerByCGLIB$$d0c4a932 cannot be cast to org.andrea.myexample.HibernateOnSpring.dao.PersonDAO
    at org.andrea.myexample.HibernateOnSpring.MainApp.main(MainApp.java:26) 
```

似乎它没有找到 Session 对象，现在我有一个疑问：我知道 Spring 会为每个 @Transactional 方法自动打开和关闭 Session 但它似乎不起作用！

相反，如果我在调用该方法时显式打开一个新会话，它会很好地工作......以这种方式：

```
@Transactional(readOnly = false)
    public Integer addPerson(Person p) {

        System.out.println("Inside addPerson()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;
        Integer personID = null;

        try {
            tx = session.beginTransaction();

            personID = (Integer) session.save(p);
            tx.commit();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }

        return personID;

    } 
```

但我认为我可以说 Spring 在进入方法时自动打开 Session 并在退出时关闭它

这是我的 XML 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd        
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd ">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/SpringTestDb" />
        <property name="username" value="root" />
        <property name="password" value="MY_DB_PSWD" />
        <property name="initialSize" value="2" />
        <property name="maxActive" value="5" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="org.andrea.myexample.HibernateOnSpring.entity" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.show_sql">false</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="personDAOImpl" class="org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl2" >
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- Register @Autowired annotation -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
</beans> 
```

有人可以帮助我吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:04:46.463

您需要为您的 DAO 使用接口或重新配置[代理机制](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch08s06.html)以使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:30:38.847

您必须告诉 Spring 何时“打开”会话。有准备好使用的 Spring 实现，它在处理请求之前打开会话。

```
<mvc:interceptors>
    <bean name="openSessionInViewInterceptor" class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
        <property name="sessionFactory">
            <ref local="sessionFactory"/>
        </property>
    </bean>
</mvc:interceptors> 
```

# r - 从涵盖所有组合的一列中创建两列

> ID：15309433
> 
> 赞同：2
> 
> 时间：2013-03-09T10:01:16.750
> 
> 标签：r, combinatorics

这似乎是一个简单的问题，但让我很头疼（这不是功课，而是实际研究中的症结所在）

我有一个包含 2266 个级别的列表。该列表看起来有点像这样：

```
[1] ~/folder1/folder1/a.bin
[2] ~/folder1/folder1/b.bin
[3] ~/folder1/folder1/c.bin
[4] ~/folder1/folder2/a.bin
[5] ~/folder1/folder2/b.bin
[6] ~/folder1/folder2/c.bin 
```

解释一下：列表是我正在使用该`readBin`函数读取的二进制文件的文件名。我想将每一行与其他每一行进行比较，所以我想要的是**两列，其中包含所有独特的组合，从我的单列派生**。

`(choose 2266,2)`告诉我，我们的单列有 2566245 个组合成两个。

` [expand.grid()](http://stat.ethz.ch/R-manual/R-patched/library/base/html/expand.grid.html)似乎让我走到了一半。但是我需要的组合是我需要的四倍：我得到两行，每行 5132490。这意味着存在重复：1 + 2 和 2 + 1 对我的目的来说是相同的。

`expand.grid.df`with`unique=TRUE`似乎也没有帮助。

我的最后一个想法是 md5 对 500 万行中的每一行进行哈希处理，并尝试以这种方式检测重复项。

我正在寻找制作两个列表的方法，这些列表涵盖了我列表的 2566245 个组合。或者以某种方式删除所有重复项。*我想我并不完全热衷于使用 R 并且已经研究了 awk 或 sed 来做同样的事情。虽然还没有成功。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:23:07.513

我认为您正在寻找`combn`看起来像`expand.grid`，使用@Arun 数据，

```
v <- c("~/folder1/folder1/a.bin", 
       "~/folder1/folder1/b.bin", 
       "~/folder1/folder1/c.bin", 
       "~/folder1/folder2/a.bin", 
       "~/folder1/folder2/b.bin", 
       "~/folder1/folder2/c.bin")
do.call(rbind,combn(v,2,simplify=F))

    [,1]                      [,2]                     
 [1,] "~/folder1/folder1/a.bin" "~/folder1/folder1/b.bin"
 [2,] "~/folder1/folder1/a.bin" "~/folder1/folder1/c.bin"
 [3,] "~/folder1/folder1/a.bin" "~/folder1/folder2/a.bin"
 [4,] "~/folder1/folder1/a.bin" "~/folder1/folder2/b.bin"
 [5,] "~/folder1/folder1/a.bin" "~/folder1/folder2/c.bin"
 [6,] "~/folder1/folder1/b.bin" "~/folder1/folder1/c.bin"
 [7,] "~/folder1/folder1/b.bin" "~/folder1/folder2/a.bin"
 [8,] "~/folder1/folder1/b.bin" "~/folder1/folder2/b.bin"
 [9,] "~/folder1/folder1/b.bin" "~/folder1/folder2/c.bin"
[10,] "~/folder1/folder1/c.bin" "~/folder1/folder2/a.bin"
[11,] "~/folder1/folder1/c.bin" "~/folder1/folder2/b.bin"
[12,] "~/folder1/folder1/c.bin" "~/folder1/folder2/c.bin"
[13,] "~/folder1/folder2/a.bin" "~/folder1/folder2/b.bin"
[14,] "~/folder1/folder2/a.bin" "~/folder1/folder2/c.bin"
[15,] "~/folder1/folder2/b.bin" "~/folder1/folder2/c.bin" 
```

**编辑**

我认为路径格式过度使问题复杂化。如果我们使用例如字母代替文件名，我们会得到：

```
do.call(rbind,combn(letters[1:4],2,simplify=F))
     [,1] [,2]
[1,] "a"  "b" 
[2,] "a"  "c" 
[3,] "a"  "d" 
[4,] "b"  "c" 
[5,] "b"  "d" 
[6,] "c"  "d" 
```

因此，如您所见，没有重复。

# java - Android中的iText合并pdf错误

> ID：15309434
> 
> 赞同：0
> 
> 时间：2013-03-09T10:01:23.993
> 
> 标签：java, android, itext

该代码在 Java 应用程序中运行良好。但是当我转移到Android时我无法编译。错误消息：“无法解析类型 java.awt.geom.AffineTransform。它是从所需的 .class 文件中间接引用的”，位于以下行：

```
cb.addTemplate(page, 0, 0);//compile error at this line 
```

然后我尝试注释掉上面的行......但发生的事情是，这次合并的 pdf 文件是在 Android 中创建的，但里面什么都没有......只有空白页。

这是使用的代码。任何帮助表示赞赏。（也尝试分别使用 droidText 和普通 iText jars ......仍然没有运气）

```
public void concatPDFs() {

          Document document = new Document();
            try {
                uploadedFile.setVisibility(View.VISIBLE);
                File sdCard = Environment.getExternalStorageDirectory();
                 uploadedFile.setText(sdCard.getAbsolutePath());
                List<InputStream> pdfs = new ArrayList<InputStream>();
                pdfs.add(new FileInputStream("/storage/extSdCard/1.pdf"));
                pdfs.add(new FileInputStream("/storage/extSdCard/2.pdf"));
                outputStream = new FileOutputStream("/storage/extSdCard/merge.pdf");
                uploadedFile.setText("Added Files");
                List<PdfReader> readers = new ArrayList<PdfReader>();
                int totalPages = 0;
                Iterator<InputStream> iteratorPDFs = pdfs.iterator();

                // Create Readers for the pdfs.
                while (iteratorPDFs.hasNext()) {
                    InputStream pdf = iteratorPDFs.next();
                    PdfReader pdfReader = new PdfReader(pdf);
                    readers.add(pdfReader);
                    totalPages += pdfReader.getNumberOfPages();
                }
                // Create a writer for the outputstream
                PdfWriter writer = PdfWriter.getInstance(document, outputStream);
                uploadedFile.setText("PdfWriter");
                document.open();
                BaseFont bf = BaseFont.createFont(BaseFont.HELVETICA,
                        BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
                PdfContentByte cb = writer.getDirectContent(); // Holds the PDF
                // data

                PdfImportedPage page;
                int currentPageNumber = 0;
                int pageOfCurrentReaderPDF = 0;
                Iterator<PdfReader> iteratorPDFReader = readers.iterator();

                // Loop through the PDF files and add to the output.
                while (iteratorPDFReader.hasNext()) {
                    PdfReader pdfReader = iteratorPDFReader.next();

                    // Create a new page in the target for each source page.
                    while (pageOfCurrentReaderPDF < pdfReader.getNumberOfPages()) {
                        document.newPage();
                        pageOfCurrentReaderPDF++;
                        currentPageNumber++;
                        page = writer.getImportedPage(pdfReader,
                                pageOfCurrentReaderPDF);
                        cb.addTemplate(page, 0, 0);
                        uploadedFile.setText("getImportedPage");
                        // Code for pagination.
                        if (true) {
                            cb.beginText();
                            cb.setFontAndSize(bf, 9);
                            cb.showTextAligned(PdfContentByte.ALIGN_CENTER, ""
                                    + currentPageNumber + " of " + totalPages, 520,
                                    5, 0);
                            cb.endText();
                        }
                    }
                    pageOfCurrentReaderPDF = 0;
                }
                outputStream.flush();
                document.close();
                outputStream.close();
                uploadedFile.setText("Done Pdf");
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                if (document.isOpen())
                    document.close();
                try {
                    if (outputStream != null)
                        outputStream.close();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:20:02.323

基本上， Android 不`java.awt.*`支持任何包，Android 中包含的唯一来自 awt 的包是`java.awt.font`.

参考： [可用的 Android 软件包](http://developer.android.com/reference/packages.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:45:39.553

我赞成前一个答案，但我想补充一点，user614454 使用的是 iText 的 Java 版本，而不是官方的 Android 端口。官方 Android 端口可以在这里找到：http: [//itextsupport.com/download/android.html](http://itextsupport.com/download/android.html)

在这个官方的 Android 端口中，iText 所需的所有 java.awt 类都被替换为轻量级的替代品。

请注意，我是 iText 的原作者。我删除了对 DroidText 的引用，因为这是不应再使用的 iText 版本的 Android 端口：http: [//lowagie.com/itext2](http://lowagie.com/itext2)

# linux - 清漆没有缓存我的网站

> ID：15309436
> 
> 赞同：0
> 
> 时间：2013-03-09T10:01:51.113
> 
> 标签：linux, security, caching, varnish

这是我的配置

```
backend axelaris {
  .host = "www.axelaris-hosting.com";
  .port = "http";
}

sub vcl_recv {
   if (req.http.host ~ "^(www.)?axelaris-hosting.com$") {
       set req.backend = axelaris;
   }
} 
```

但是当我使用 varnishtop -i rxurl

总是我的列表长度为 0

请帮助缓存我的网站最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:29:26.370

如果 rxurl 给出一个空列表，则意味着您没有收到任何进入清漆的请求。原因似乎是你试图让你的 web 服务器和 varnish 都在同一个端口上监听。如果您在同一台服务器上有 varnish 和 Web 服务器（例如 apache），您需要让 varnish 在端口 80 上侦听，而 Web 服务器在另一个端口（例如 8080）上侦听。当然，然后适当地为该后端设置 .port 。

# java - MVP 中 View 和 Presenter 之间的通信模式是什么？

> ID：15309449
> 
> 赞同：3
> 
> 时间：2013-03-09T10:03:20.457
> 
> 标签：java, mvp

阅读 MVP 模式后，我发现 View 和 Presenter 之间有两种通信模式：

*   **View 不知道 Presenter**，但提供 UI 控件来实现`HasClickHandler`Presenter 注册其事件处理程序的接口。

*   **View 知道 Presenter**，特别是它知道 Presenter 中的处理程序方法名称，例如，当在 View 中单击提交按钮时，视图会调用`onSubmitButtonClicked()`Presenter 中的公共方法。

我发现后者更容易进行 JUnit 测试，因为我可以直接模拟向 Presenter 提交事件。但是，我的理解是 View 不应该知道 Presenter。

解决权衡的第三种方法是让 Presenter 在 View 的控件中注册事件处理程序，其中处理程序调用公共 Presenter 方法：

```
public void bind() {
  display.getSubmitButton().addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
      onSubmitButtonClicked();              
    }
  });
} 
```

但这引入了很多样板代码。

View-Presenter 通信的正确模式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T14:24:29.207

我仍在尝试自己学习这些东西，但是我现在的想法是这样的：

```
public interface View {
    void registerMouseListener(MouseListener listener);
}

public class ViewImpl implements View {
    SomeComponent component; // SomeComponent extends java.awt.Component

    public void registerMouseListener(MouseListener listener) {
        component.addMouseListener(listener);
    }
} 
```

然后，您可以通过添加匿名侦听器或扩展自身等`Presenter`来决定它想要注册这些事件的方式。`MouseListener`

# python - 如何仅使用最后一个字符串的一部分来拼接字符串以创建新字符串？

> ID：15309452
> 
> 赞同：0
> 
> 时间：2013-03-09T10:04:02.730
> 
> 标签：python, string, word, splice

所以对于家庭作业，我必须像

```
GENE="ATGAGTGATGATGTA 
```

并创建新词（`GENE2`, `GENE3`, `GENE4`, 等...）

这是作业：

从单词 开始`GENE1="ATGTTGATGTG"`，
编写一个 Python 程序来创建新单词`GENE2`,`GENE3`和`GENE4`这样`GENE5`：

*   `GENE2`只包含最后两个字母`GENE1`
*   `GENE3`只包含前两个字母`GENE1`
*   `GENE4`仅包含位置 2、4、6、8 和 10 的字母`GENE1`
*   `GENE5`只包含前 3 个和后 3 个字母`GENE1`

这很模糊，我能想到的就是删除不需要的字母，但这就是教授给我们的全部工作。

这是一个好的开始吗？

```
GENE1 = ['A','T','G','T','T','G','A','T','G','T','G'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:40:14.483

是的，你的开始可能会奏效。但是您可以直接访问字符串中的字符，例如：

```
gene1 = "ATGTTGATGTG"
gene1[0]  # this is the first letter
gene1[-1] # this is the last letter
gene1[:2] # these are the first two letters
gene1[2:] # everything after the first two letters 
```

在交互式解释器（IDLE）中尝试这个，然后用`GENE1`定义为`list`. 然后你会看到输出的差异。

有关更多信息，请参阅[此](http://docs.python.org/2/tutorial/introduction.html#strings)（Python 文档）（由@grc 提供）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:58:32.377

是的，您的 start 应该可以工作，但您可能需要使用字符串的 join 方法。

另外，您应该知道，就像`list`, 字符串（或`str`）一样是一个容器。
这意味着您可以切片以及索引字符串，例如

```
>>> x = 'abcdefghij'
>>> x[0]
'a'
>>> x[5:]
'fghij'
>>> x[::3]
'adgj'
>>> x[-1]
'j' 
```

似乎您的教授希望您学习并切片并使用它们...

考虑阅读[此页面](http://docs.python.org/2/tutorial/introduction.html)，
或者至少阅读[Strings](http://docs.python.org/2/tutorial/introduction.html#strings)和[Lists](http://docs.python.org/2/tutorial/introduction.html#lists)上的这两部分（在同一页面上）

# cassandra - 如何在具有多个节点的云上试验 Cassandra？

> ID：15309454
> 
> 赞同：2
> 
> 时间：2013-03-09T10:04:05.420
> 
> 标签：cassandra, cloud, bigdata

我想学习Cassandra。如果我在本地笔记本电脑上下载它，我只能拥有一个节点。我觉得学习 Cassandra 我们需要有多个节点。因此，左边的选项是在云上。关于任何云提供商的任何建议，我可以在其中尝试简约配置，如果可能的话，免费（用于有限使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:55:12.567

DataStax 为 Amazon EC2 提供社区版 AMI，详细说明请[点击此处](http://www.datastax.com/docs/1.2/install/install_ami "这里")。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:27:40.453

另外datastax还提供了本地集群开发工具——ccm；有关与 opscenter 软件一起使用的信息，请参见[此处](http://www.datastax.com/dev/blog/ccm-a-development-tool-for-creating-local-cassandra-clusters)。它有点过时但仍然有用。

# asp.net - 动态显示控件

> ID：15309455
> 
> 赞同：0
> 
> 时间：2013-03-09T10:04:06.210
> 
> 标签：asp.net

我有一个忘记密码的链接。我想在单击链接时显示三个文本框（旧 p/w、新 p/w、确认 p/w）。但是，这些文本框应显示在同一页面上。有没有一个 Ajax 控件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:09:34.577

创建一个面板。将它们设为隐藏默认值。
把你的texbox放进去。
在链接按钮上显示它。
这是一个链接
[http://asp-net-example.blogspot.in/2009/04/how-to-show-hide-visible-panel.html](http://asp-net-example.blogspot.in/2009/04/how-to-show-hide-visible-panel.html)

# java - 如何使我的 Tomcat v6.0 localhost 服务器启用压缩“gzip”？

> ID：15309461
> 
> 赞同：4
> 
> 时间：2013-03-09T10:04:31.987
> 
> 标签：java, tomcat, web-applications, gzip, performance-testing

我已经在**Eclipse IDE**和**Tomcat v6.0**作为 localhost 服务器下完成了**Java EE** Web 应用程序的开发 现在我需要制作我的 localhost 服务器（Tomcat v6.0）**启用压缩“gzip”** 对于*静态资源作为（JavaScript 文件、CSS文件，图像，...）*

 ******** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T10:12:56.220

打开`/conf/server.xml,`在您的 HTTP 连接器中添加此配置：

```
compression="on"
compressionMinSize="2048"
compressableMimeType="application/javascript, text/css" 
```

例如：

```
 <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443"
               compression="on"
               compressionMinSize="2048"
               compressableMimeType="application/javascript, text/css"/> 
```

更多[Apache Tomcat HTTP](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T11:14:41.623

如果您想压缩 js 和 css 文件，那么 Iswanto San 的回答是正确的。

如果您想 gzip html 页面，那么以下配置应该会有所帮助。

```
compression="on" 
compressionMinSize="2048" 
compressableMimeType="text/html,text/xml" 
```

如果你想压缩所有响应

```
compressableMimeType="text/html, text/xml,text/plain,text/javascript,text/css" 
```*******

# upload - 上传并调整图像大小

> ID：15309465
> 
> 赞同：2
> 
> 时间：2013-03-09T10:05:00.360
> 
> 标签：upload, fuelphp

我在上传简单的图片时遇到问题。我已经尝试过，只有在添加图像调整大小功能后，上传部分才能完美地工作，但会出现未知错误。

```
public function post_add_image()
  {
    \Upload::process(array(
        'path'        => '../images/',
        'normalize'   => true,
        'change_case' => 'lower',
        'randomize'   => true,
        'ext_whitelist' => array('jpeg', 'jpg', 'gif', 'png'),
        'max_size'    => 1024 * 1024,

    ));

    if (!\Upload::is_valid()) {
      return $this->response(\Upload::get_errors());
    } else {
      foreach (\Upload::get_files() as $file) {

        // Here comes ERROR
        $image = Image::load($file['file'], false, $file['extension']);
        $image->crop_resize(800, 600);
        $image->save('test');

      }
    }

    //\Upload::save();

    return $this->response(\Upload::get_files());
  } 
```

和错误：

RuntimeException [错误]：库不支持 /tmp/phpOnZReS 的这种文件类型。

COREPATH/classes/image/driver.php@line

我制作了上传文件的 var_dump：

```
array(10) {
  ["name"]=>
  string(27) "crunchbang-logo-minimal.png"
  ["type"]=>
  string(9) "image/png"
  ["error"]=>
  bool(false)
  ["size"]=>
  int(278)
  ["field"]=>
  string(10) "pictures:0"
  ["file"]=>
  string(14) "/tmp/phpDdTLwJ"
  ["errors"]=>
  array(0) {
  }
  ["extension"]=>
  string(3) "png"
  ["filename"]=>
  string(23) "crunchbang-logo-minimal"
  ["mimetype"]=>
  string(9) "image/png"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T04:33:18.367

这会有所帮助（在调整文件大小之前，您必须将图像文件保存在公共资产或任何您想要的位置）

```
public function post_add_image()
{
    \Upload::process(array(
    'path'        => '../images/',
    'normalize'   => true,
    'change_case' => 'lower',
    'randomize'   => true,
    'ext_whitelist' => array('jpeg', 'jpg', 'gif', 'png'),
    'max_size'    => 1024 * 1024,

    ));

   if (!\Upload::is_valid()) {
       return $this->response(\Upload::get_errors());
   } else {

       // Here comes the fix

       Upload::save();
       $saved_image = Upload::get_files();
       $original_name = $saved_image[0]['name'];
       $file_name = $saved_image[0]['saved_as'];  

       $public_asset_path_img = "assets".DS."img";

       $image = Image::load(DOCROOT.$public_asset_path_img.DS.$file_name, false, $file['extension']);
       $image->resize('800');
       $image->save(DOCROOT.$public_asset_path_img.DS.$file_name);

   }

   return $this->response(\Upload::get_files());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:44:31.137

我认为您的问题可能是`Upload::save()`在您尝试调整图像大小后调用。上传的文件将被放入 PHP tmp 文件夹，因此您的`/tmp/phpOnZReS`.

尝试将您`Upload::save()`移到循环之前`foreach (\Upload::get_files() as $file)`，看看是否有帮助。

# php - 如何在 SugarCRM 中为电子邮件模板添加自定义变量？

> ID：15309469
> 
> 赞同：2
> 
> 时间：2013-03-09T10:05:15.723
> 
> 标签：php, sugarcrm

我想为电子邮件模板编辑器定义新变量。

例如，现在我可以使用“$account_name”并将其替换为 Account Name 值。我想在 PHP 代码的位置定义 $end_subscription 之类的东西，即根据创建日期在 PHP 代码中计算的 $end_subscription。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T16:43:08.573

如果您有专业版的 Sugar：

您是否尝试将计算字段添加到模块？

您不必在视图中使用它。无论如何，它都会显示在模板创建中。

使用 CE，您可以尝试：

创建一个“函数”类型的非数据库字段

```
'field_name' => array ( 
   'name' => 'field_name', 
   'vname' => 'LBL_FIELD_NAME', 
   'type' => 'function', 
   'source' => 'non-db', 
   'function_name' => 'function_name', 
   'function_params' => array('date_modified'), 
   'function_params_source' => 'this', 
   'function_require' => 'custom/modules/Accounts/Calculate.php', 
), 
```

它将显示在模板创建中。我不知道该字段是否会填写您必须尝试的电子邮件...

# wolfram-mathematica - 使用 Mathematica 根据一组参数求解方程组

> ID：15309473
> 
> 赞同：0
> 
> 时间：2013-03-09T10:05:29.850
> 
> 标签：wolfram-mathematica, equation-solving

使用 Mathematica，我想求解一个非线性方程组，例如

```
f(x,y;m)=0
g(x,y;m)=0 
```

其中 m 是方程所依赖的外部参数。由于方程非常难，我要做的是明确地修复 m，首先，然后找到 m 的特定值的解（通过 FindRoot[]）。但这非常缓慢且效率低下（更具体地说，在我的情况下，我确实有三个参数）。

我想要的是一种自动方法，它可以在数值上研究 m 的一组离散值的解决方案，在没有我不时明确更改它的情况下修复它。这样我就可以将所有 m 值的解决方案汇总在一起。

如果可以对 FindRoot [] 的初始种子应用类似的过程也很好，因为在我的情况下，我得到了几个改变后者的解决方案，因此对于 m 的值有不同的解决方案，所以同样我会喜欢拥有一组给定初始种子的所有解决方案。

有可能做这样的事情吗？如何？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:39:17.607

对于第一部分，假设您有一个函数 solve[m] 和一个 m={1,2,3,...} 的值范围，您可以使用：

```
Map[solve, m] 
```

我不确定“修复它”是什么意思，但这会给你一个数组，你可以进一步调查。

# java - XML DOM 命名空间

> ID：15309481
> 
> 赞同：0
> 
> 时间：2013-03-09T10:06:34.930
> 
> 标签：java, xml, dom

如果我有一个内存 DOM：

```
<root xmlns="NS1" xmlns:a="NSA">
    <outer>
        <a:inner>Text</a:inner>
    </outer>
</root> 
```

并引用外部节点。

在我调用`outer.setAttributeNS(XMLConstants.XMLNS_ATTRIBUTE_NS_URI, "xmlns:a", "NSB")`并遍历到内部之后，看起来 DOM 规范说`inner.getNamespaceURI()`仍然返回 NSA。

有人知道怎么去`inner`NSB吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:09:15.767

嗯，有时它会在按下“提问”按钮后击中你......

`inner.lookupNamespaceURI(inner.getPrefix())`看起来是要走的路。

# ruby-on-rails - 添加 is_visible 而不是销毁

> ID：15309482
> 
> 赞同：1
> 
> 时间：2013-03-09T10:06:38.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望将其标记为不可见，而不是删除指南（因此它仍在我的数据库中，但用户不会看到它列出）。这有几个主要问题

1.  我似乎无法从视图中删除指南
2.  当我尝试查看我的管理员端 - 指南时，我收到错误

> ActionView::Template::Error（未定义的方法 `comment_ids_contains' for #）：

我怀疑没有 2 是不相关的，但在我进行以下更改之前并没有给我造成问题。在我的guidelines.rb 模型中，我添加了

```
default_scope where(:visible => true)
attr_accessible :visible 
```

在 guideline_controller.rb 我将销毁和创建操作更改为

```
def destroy
    @guideline = Guideline.find(params[:id])
    @guideline.visible=false
    #@guideline.destroy
    respond_to do |format|
      format.html { redirect_to guidelines_url }
      format.json { head :no_content }
    end
  end

def create
    @guideline = current_user.guidelines.new(params[:guideline])
    @guideline.visible=true

    respond_to do |format|

      if @guideline.save
        format.html { redirect_to @guideline, notice: 'Guideline was successfully created.' }
        format.json { render json: @guideline, status: :created, location: @guideline } 
      else
        @specialties = Guideline.order(:specialty).uniq.pluck(:specialty)
        format.html { render action: "new" }
        format.json { render json: @guideline.errors, status: :unprocessable_entity }
      end
    end
  end 
```

在 admin/guidelines.rb 我添加

```
 column :visible 
```

我添加了一个数据库迁移

```
class AddVisibleColumnToGuidelines < ActiveRecord::Migration
  def change
    add_column :guidelines, :visible, :boolean   
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:19:26.650

首先，做：

```
@guideline.visible=false 
```

还不够，因为您只更改了 Ruby 对象。您必须调用`save!`将更改传播回数据库：

```
@guideline.visible = false
@guideline.save! 
```

您也可以使用`update_attribute`一步完成：

```
@guideline.update_attribute(:visible, false) 
```

尽管此方法跳过了一些步骤（例如验证），但最好先[阅读一下](http://apidock.com/rails/ActiveRecord/Persistence/update_attribute)。

另一件事是您可能应该使用以下代码来查找指南，除非您希望其他用户删除彼此的指南：

```
current_user.guidelines.find(params[:id]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T11:27:50.447

我可以看到 Michal 已经回答了您的问题，但您的代码似乎可以更整洁。必须在创建时将 visible 设置为 true 是不必要的额外工作。

我将在您的表中添加一个名为“deleted_at”的日期时间字段，而不是“可见”。然后在你的销毁方法中，你可以这样做：

```
@guideline.deleted_at = Time.zone.now
@guideline.save! 
```

这还具有存储删除日期/时间的好处，以防以后有用。

您的默认范围可以是：

```
 default_scope where(deleted_at: nil) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:56:59.440

在您的迁移中，您应该通过在 add_column 方法调用的末尾添加 default: true 来将默认值设置为 true。您还必须将所有现有准则 :visible 设置为 true，以便它们可见。如果您使用默认值，则不必在创建方法中显式设置可见。

如果您想在没有默认 db 值的情况下将 visible 设置为 true，最好在指南模型的 before_create 回调中执行此操作，而不是在控制器中设置它。

# android - onDraw 时播放声音

> ID：15309483
> 
> 赞同：0
> 
> 时间：2013-03-09T10:06:45.673
> 
> 标签：android, android-mediaplayer

我想在我的游戏中播放声音。但是每次启动应用程序时声音只播放半秒。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Shapes shapes = new Shapes(this);
    setContentView(shapes);
    MediaPlayer mp = MediaPlayer.create(this, R.raw.back);
    try {
        mp.prepare();
    } catch (IllegalStateException e) {}
      catch (IOException e) {}
    mp.start();
    mp.setLooping(true);
} 
```

mp.setLooping(true) 没有帮助，它仅在我删除“setContentView(shapes);”时才有效。我该怎么做才能让声音在半秒后停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:10:04.567

如果这是一个游戏，我假设它在一个线程中运行。你的游戏在线程中运行吗？

您的线程应该有一个 doStart() 或已经声明 MediaPlayer 的类似方法。

在游戏线程中启动背景音乐的截断基本示例：

布尔型 BGMisOn；媒体播放器背景音乐；

doStart() { ... ... if(BGMisOn)BGM.start() ... ... }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:11:41.993

如果声音很短，添加循环

```
mp.setLooping(true); 
```

另外，您在标题中提到了`onDraw()`方法，但是您给出的命令来自`onCreate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:15:16.260

您可以使用 setLooping(true) [http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping(boolean)](http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping(boolean))

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Shapes shapes = new Shapes(this);
        setContentView(shapes);
        MediaPlayer mp = MediaPlayer.create(this, R.raw.back);
        try {
            mp.prepare();
        } catch (IllegalStateException e) {}
          catch (IOException e) {}
        mp.setLooping(true);
        mp.start();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:20:36.490

您的 MediaPlayer 对象 ( `mp`) 在以下情况下播放一次`mp.start()`；

如果您连续播放，请添加`setLooping(true)`.

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.back);
try {
    mp.prepare();
    mp.setLooping(true);
    mp.start();
} catch (IllegalStateException e) { 
    e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
} 
```

# safari - 使用 content-disposition:inline 在 safari 中强制下载 mp3 链接

> ID：15309484
> 
> 赞同：2
> 
> 时间：2013-03-09T10:06:48.373
> 
> 标签：safari, download

我需要从 box.com 强制下载 mp3 文件。不幸的是，Box 将 content-disposition:inline 标头添加到所有响应中，并且无法更改此标头或为文件设置自定义 mimetype。因此浏览器流式传输文件而不是下载。而且出于流量原因，我不能使用任何服务器端解决方案来更改响应标头（所有下载都应直接从 box.com 完成）。

对于 Chrome/Chromium，我可以为 <a> 使用 html5 下载属性，但 safari 不支持它（在 mac 上使用 5.0.4 测试）。

那么 Safari 可以做什么呢？也许有一些 JavaScript 技巧之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T14:17:52.483

您可以在 .htaccess 中添加一行来设置类型吗？

```
AddType application/octet-stream .mp3 
```

octet-stream 将强制下载。

# image-processing - 哈尔小波变换

> ID：15309486
> 
> 赞同：0
> 
> 时间：2013-03-09T10:06:55.647
> 
> 标签：image-processing, transformation, haar-wavelet

我有一个函数可以计算图像的 haar 变换。现在我将图像的像素值直接传递给 haar 函数进行计算。我没有在 LL 子带中恢复原始图像。请帮我看看有什么问题。我非常确定 harr 变换计算是正确的。但我不确定要传递什么值。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:35:50.420

如果您使用**RGB 图像**，则需要将其拆分为**3 个通道**并获取每个通道的**Haar**（红色、绿色、蓝色）。

如果图像是**灰色**的，那么直接在 Haar 函数中使用它的像素

# php - 在 SQL Server 中发布变量时删除空格

> ID：15309489
> 
> 赞同：1
> 
> 时间：2013-03-09T10:07:07.587
> 
> 标签：php, sql

我在这里有这个表格：

```
<label for='per_pjese'>Per Pjese:</label>
<select id = "per_pjese" name="per_pjese" >
<option value = "2">Jo</option>
<option value = "1">Po</option>
</select> 
```

现在，我得到这样的变量：

```
$postPer_pjese = stripslashes($_POST["postPer_pjese"]); 
```

我的问题是，当它发布在数据库中时，它是用空格发布的......即：

```
1' ' where ' '  signifies white space 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:09:27.490

如果您只担心删除前导或尾随空格，请查看 php 的[trim()](http://php.net/manual/en/function.trim.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:10:49.627

用这个：

```
$postPer_pjese = str_replace(' ', '', stripslashes($_POST["postPer_pjese"])); 
```

删除字符串中的任何空格。

**编辑**

这是假设您提供的表格不是使用的表格。

否则问题可能出在未给出的插入语句中。

# jquery - 在自动完成中找不到匹配值时清除文本框

> ID：15309490
> 
> 赞同：2
> 
> 时间：2013-03-09T10:07:15.350
> 
> 标签：jquery, autocomplete

我已经实现了按预期工作的自动完成文本框。

目前，如果在建议中找到“不匹配”，则显示没有结果作为建议，但是当他们单击该值时，该值将应用于 tex 框

```
var error = ["No match"];
if (results.length == 0) {
    responseFn(error);
}
else {
    responseFn(results);
} 
```

**结果**是要在自动建议中显示的匹配项目列表。 如果**结果**为空，它会建议说“不匹配”但我不希望用户选择它，所以我尝试了下面的代码**`if (results.length == 0) {`**

 **```
$("#txtNewAttributes").blur(function () {
    $("#" + txtbxId).val("");
}) 
```

但它会在所有情况下清除文本框，即使找到匹配项也是如此。我该如何实现呢？

如果没有找到匹配项，我需要清除文本框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-12T14:39:25.580

我之前也面临同样的问题。

在jquery.autocomplete中，有焦点、变化等不同的回调函数。

如果未找到匹配项，您可以使用以下回调函数清除文本框。

```
change: function (e, u) {
            //If the No match found" u.item will return null, clear the TextBox.
            if (u.item == null) {
                //Clear the AutoComplete TextBox.
                $(this).val("");
                return false;
            }
        } 
```

这个解决方案对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:13:21.690

您的代码将事件处理程序绑定到输入。尝试直接清除输入，如下所示：

```
$("#" + txtbxId).val(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:11:27.873

有一个全局变量

```
var has_valid_values = false; 
```

如果 results.length == 0 则将其设置为 false ，否则设置为 true 。

在模糊处理程序中，使用

```
if (!has_valid_values)
  $("#" + txtbxId).val(""); 
```**

# android - 在使用 FragmentTransaction 传递数据之前和之后调用了 2 次 onCreateView

> ID：15309496
> 
> 赞同：0
> 
> 时间：2013-03-09T10:07:59.007
> 
> 标签：android, android-asynctask, android-fragments

来自活动的代码。我想将数据传递给`ListFragment`with`FragmentTransaction`

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menudisplay);
        Bundle extras = getIntent().getExtras();
        language = extras.getString("language");
        lang_id = extras.getInt("id");
        TextView tv = (TextView) findViewById(R.id.tv_lang_use);

        //Start passing data
        MyListFragment mylist = new MyListFragment();
        FragmentTransaction fragmentTrans = getFragmentManager()
                .beginTransaction();

        mylist.language = language;
        fragmentTrans.add(mylist, "language");
        Log.d("tes", language +"abc");
        fragmentTrans.commit();

    } 
```

这是我的片段
**编辑**（onActivityCreated）：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

    view = inflater.inflate(R.layout.fragment_menulist_overview, container,
            false);

    return view;

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    Log.d("Test","How many called?");
    new loadcat().execute();
}

public View setUI() {

    values = new ArrayList<String>();
    try {
        if (json.getInt(TAG_SUCCESS) == 1) {
            System.out.println("1");
            menuresto = json.getJSONArray(TAG_MENU);
            String category;

            for (int i = 0; i < menuresto.length(); i++) {
                System.out.println(menuresto.length());
                JSONObject c = menuresto.getJSONObject(i);
                // Toast.makeText(getActivity(), c+"",
                // Toast.LENGTH_LONG).show();
                category = c.getString(TAG_CATEGORY);

                values.add(category);
                System.out.println(values.get(i));
            }
        }
    } catch (Throwable t) {
        Log.e("MyActivity", t.getMessage(), t);
    }

    updateDetail(values.get(0), values.get(0));

    ListView lv = (ListView) view.findViewById(R.id.categoryList);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, values);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int pos,
                long id) {
            // TODO Auto-generated method stub
            int index = pos + 1;
            Toast.makeText(getActivity(), "Click ListItem Number " + index,
                    Toast.LENGTH_LONG).show();

            updateDetail(values.get(pos), values.get(pos));
        }
    });

    return view;
}

public void load() {
    String langs = language;
    System.out.println("a"+langs+"a");
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    // Log.d("language load", language);

    params.add(new BasicNameValuePair("language", langs));
    System.out.println("language = " + langs);

    String url = url1;
    json = jParser.makeHttpRequest(url, "GET", params);
    // ArrayList<String> tes = new ArrayList<String>();
    // String[] tes = new String[]{};
    Log.d("All Category: ", json.toString());

} 
```

这是我的 Asynctask 类：

```
class loadcat extends AsyncTask<String, Void, Object> {

        @Override
        protected Object doInBackground(String... params) {
            // TODO Auto-generated method stub
            load();
            return null;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(getActivity());
            pd.setMessage("tes");
            pd.show();

        }

        @Override
        protected void onPostExecute(Object result) {
            // TODO Auto-generated method stub
            // super.onPostExecute(result);
            if (pd != null) {
                pd.dismiss();
                setUI();
            }

        }

    } 
```

**`FragmentTransaction`上班前如何处理`asynctask`？**
因为`AsyncTask`in`oncreateview`调用早于`fragmentTransaction`。之后`fragmentTransaction`，`oncreateview`再次调用。并`oncreateview`调用了 2 次

**logcat**截图：http: [//i.stack.imgur.com/4NKBL.png](http://i.stack.imgur.com/4NKBL.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:10:21.627

在内部调用 asynctask，`onActivityCreated`因为它在之后调用`onCreateView`

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
} 
```

# objective-c - 了解 Objective-C 运行时

> ID：15309497
> 
> 赞同：6
> 
> 时间：2013-03-09T10:07:59.867
> 
> 标签：objective-c, objective-c-runtime

这是摘录自`Objective-C runtime programming guide`：

> 当一个新对象被创建时，它的内存被分配，它的实例变量被初始化。对象变量中的第一个是指向其类结构的指针。这个称为 isa 的指针使对象可以访问其类，并通过该类访问它所继承的所有类。

isa 是`NSObject`这样声明的：

```
Class   isa; 
```

反过来`Class`，它只不过是一个指向结构的指针

```
typedef struct objc_class *Class; 
```

现在让我们看看这个结构：

```
struct objc_class {
Class isa;

#if !__OBJC2__
Class super_class                                        OBJC2_UNAVAILABLE;
const char *name                                         OBJC2_UNAVAILABLE;
long version                                             OBJC2_UNAVAILABLE;
long info                                                OBJC2_UNAVAILABLE;
long instance_size                                       OBJC2_UNAVAILABLE;
struct objc_ivar_list *ivars                             OBJC2_UNAVAILABLE;
struct objc_method_list **methodLists                    OBJC2_UNAVAILABLE;
struct objc_cache *cache                                 OBJC2_UNAVAILABLE;
struct objc_protocol_list *protocols                     OBJC2_UNAVAILABLE;
#endif

} 
```

我们可以看到，在最新版本的 Objective-C 中，指向超类的指针（以及除另一个 isa 之外的所有其他结构成员）是不可用的。

`super_class`所以我的问题是，如果指针不可用，对象如何访问其超类？它是否可以通过另一个 isa 指针访问超类？但它究竟是如何发生的？这个怎么运作？谁能解释一下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T10:26:28.023

刚刚检查了源文件

[objc-class.m](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/objc-class.mm)

```
Class class_getSuperclass(Class cls)
{
    return _class_getSuperclass(cls);
} 
```

[运行时-new.mm](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/objc-runtime-new.mm)

```
#define newcls(cls) ((class_t *)cls)

Class 
_class_getSuperclass(Class cls)
{
    return (Class)getSuperclass(newcls(cls));
}

static class_t *
getSuperclass(class_t *cls)
{
    if (!cls) return NULL;
    return cls->superclass;
} 
```

所以`Class`实际上是一个指向`class_t`

[objc-运行时-new.h](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/objc-runtime-new.h)

```
typedef struct class_t {
    struct class_t *isa;
    struct class_t *superclass;
    Cache cache;
    IMP *vtable;
    uintptr_t data_NEVER_USE;  // class_rw_t * plus custom rr/alloc flags

    class_rw_t *data() const { 
        return (class_rw_t *)(data_NEVER_USE & ~(uintptr_t)3); 
    }
    void setData(class_rw_t *newData) {
        uintptr_t flags = (uintptr_t)data_NEVER_USE & (uintptr_t)3;
        data_NEVER_USE = (uintptr_t)newData | flags;
    }

    bool hasCustomRR() const {
#if CLASS_FAST_FLAGS_VIA_RW_DATA
        return data_NEVER_USE & (uintptr_t)1;
#else
        return data()->flags & RW_HAS_CUSTOM_RR;
#endif
    }
    void setHasCustomRR(bool inherited = false);

    bool hasCustomAWZ() const {
#if CLASS_FAST_FLAGS_VIA_RW_DATA
        return data_NEVER_USE & (uintptr_t)2;
#else
        return data()->flags & RW_HAS_CUSTOM_AWZ;
#endif
    }
    void setHasCustomAWZ(bool inherited = false);

    bool isRootClass() const {
        return superclass == NULL;
    }
    bool isRootMetaclass() const {
        return isa == this;
    }
} class_t; 
```

这是包含一切的结构

无论如何，这些是内部实现细节，不应依赖。所以不要编写依赖这些的代码，因为它们可能会在下一次运行时更新时损坏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:20:04.103

不要依赖类结构的任何内部结构。-- 你也不依赖其他 pals 实例变量！你寻找房产

您可以安全地使用运行时做的所有事情都在`runtime.h`

获取超类 egcall`class_getSuperclass`

# php - 尝试使代码平台独立 - 从 PHP 读取 SQL 文件

> ID：15309504
> 
> 赞同：0
> 
> 时间：2013-03-09T10:08:32.973
> 
> 标签：php, mysql

大家好，这里是读取 .sql 文件并将每个查询存储在数组元素中的代码。在我的 .sql 文件中有各种语句，如 CREATE TABLE、DROP、INSERT

```
$fileLines = file('alltables.sql');

$templine = '';
foreach ($fileLines as $line)
{
    // Skip it if it's a comment
    if (substr($line, 0, 2) == '--' || $line == '')
    continue;

    // Add this line to the current segment
    $templine .= $line;

    // If it has a semicolon at the end, it's the end of the query
    if (substr(trim($line), -1, 1) == ';')
{
    // Perform the query
    $queries[] = $templine;
    // Reset temp variable to empty
    $templine = '';
}
}

// Here I further process $queries var 
```

它在 Windows 平台下运行良好，但我不确定它是否可以在 linux 服务器上运行，所以我希望您查看代码并让我知道我是否需要更改代码，例如 (\t\r\ 0 \x0B) 来处理不同平台的换行和回车：

```
$tmp=str_replace("\r\n", "\n", $line);
$tmp=str_replace("\r", "\n", $line); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:57:13.653

尝试使用现有的 SQL 解析器库。

例如：

*   [http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:03:13.737

以你的方式去做是不安全的，因为在 SQL 语句中也可能有 \r 或 \n （例如，有很多行的长 TEXT）。

如果您确定没有这样的情况，我建议您使用[trim()](http://www.php.net/trim)而不是[str_replace()](http://www.php.net/str_replace)。它将删除每行末尾的所有空格和 EOL。

```
<?php

$tmp = trim($line);

?> 
```

您也可以像这样指定仅删除 EOL（“\r\n”和“\n”）：

```
<?php

$tmp = trim($line, "\r\n");

?> 
```

# asp.net-mvc - 关于 ASP.NET MVC 项目结构的建议？

> ID：15309506
> 
> 赞同：2
> 
> 时间：2013-03-09T10:08:34.263
> 
> 标签：asp.net-mvc, web, asp.net-mvc-areas

我是一名计算机科学专业的学生，​​虽然我之前使用过 MVC，但我从未从头开始构建过一个项目。该项目用于摄影课程，教师将能够上传特色照片。学生必须登录才能查看图片和作业。

我希望学生登录 www.mysite.com，教师登录 admin.mysite.com，因此我们在一个解决方案中拥有 2 个不同的网站。

据了解，我的解决方案项目是：

*   数据层
*   业务逻辑层
*   管理网站
*   网站

注意：Gearhost 将成为我的主机。

现在，我将如何在两个不同的域上托管 AdminWebsite 和网站，同时它们都来自同一个 BusinessLogic 和 DataLayer？

我应该改为在同一个数据库上创建两个不同的项目吗？甚至可能吗？

我已经进行了研究并阅读了一些关于区域的信息，但是我一直无法找到一个好的教程，使用区域是不是一个最佳实践，如果是这样，你能给我一个好的教程的链接吗？还是一个简单的例子？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:21:34.153

对于简单的站点和实施来说，只为公共站点、成员站点和管理站点使用一个项目是一种常见的做法。

您应该能够根据用户权限划分每个区域，因此无需创建两个单独的网站。

我建议以下资源获取最佳实践和示例。

*   [书呆子晚餐](http://www.nerddinner.com/)（代码托管[在这里](http://nerddinner.codeplex.com/)）
*   [更多最佳实践](http://www.codeguru.com/csharp/.net/net_asp/mvc/top-10-asp.net-mvc-best-practices.htm)

[以及在asp.net](http://www.asp.net/mvc/tutorials)上启动 MVC 页面的最佳位置

Stackoverflow 上还有大量关于最佳实践和网站布局的问题和社区 wiki 条目。

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:37:19.430

答案真的取决于。取决于你的项目规模。你可以把它全部放在一个项目中（主 MVC 之一），你可以进一步拆分它。这个项目的规范形式是这样的：

```
project.WEB
project.Common (here belongs common functionality between projects, so helpers, utilities, even some extension methods belong there)
project.Model (Data entities)
project.BL //(Business Logic)
project.DAL //(Data Access Layer or Persistence)
project.Tests 
```

*注意“项目”是你的命名空间根。如何处理命名空间命名您可以在那里查看：[命名空间命名约定](https://stackoverflow.com/questions/918894/namespace-naming-conventions)

而且您可以将其拆分得越来越远。但是，我建议您不要夸大进一步拆分它。当您必须这样做时，您会知道（一个项目增长过多，存在逻辑分离......）。您尝试遵循[YAGNI](http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it)原则。

还有一件事情。如果您想“按本书”去那里，请查看 DDD - 域驱动设计：http: [//msdn.microsoft.com/en-us/magazine/dd419654.aspx](http://msdn.microsoft.com/en-us/magazine/dd419654.aspx)。

# java - 基于 2d 瓷砖的游戏中的项目

> ID：15309507
> 
> 赞同：1
> 
> 时间：2013-03-09T10:08:44.673
> 
> 标签：java, roguelike

我正在用 Java 制作一个基于 2d 瓷砖的游戏，我想知道在世界上存储物品的最佳方式是什么。过去我一直使用与世界大小相同的数组，但我想制作非常大的世界，而且我知道事实上这不是一个好主意。所以我只是想知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:44:17.933

如果你定义你的瓷砖的类型，例如通过一个**int**，你可以使用它的一位来指示是否有一个项目。您存储在按 x 坐标排序的 List 中的项目本身（如果 x 坐标相同，则使用 y 坐标作为第二个排序属性）。

这样，您可以非常快速地检测图块上是否有项目（**O(1)**并且`List<Item>`仅在有项目时才搜索。在列表中，您可以使用二进制搜索（首先与 x 坐标相关，并且在具有相同 x 坐标的所有项目的子列表中，对想要的 y 坐标使用二进制搜索）**O（log（n））** [n = 项目数]。

如果您想节省内存，我会考虑使用基本数据类型来指定图块（例如 an `int`）并将您的世界存储在例如 an 中`int[][]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:12:17.033

项目列表及其 (x,y) 坐标也应该适用于非常大的世界。

# android - Android：如何提取 1 行 2 列的数据

> ID：15309513
> 
> 赞同：1
> 
> 时间：2013-03-09T10:09:36.793
> 
> 标签：android

这是我的搜索活动代码

```
search.addTextChangedListener(new TextWatcher()
  {
  public void afterTextChanged(Editable s)
  {
                                                                  // Abstract Method of TextWatcher Interface.
  }
  public void beforeTextChanged(CharSequence s,
  int start, int count, int after)
  {
  // Abstract Method of TextWatcher Interface.
  }
  public void onTextChanged(CharSequence s,
  int start, int before, int count)
  {
  textlength = search.getText().length();
  array_sort.clear();
  for (int i = 0; i < listview_array.length; i++)
  {
  if (textlength <= listview_array[i].length())
  {
  if(search.getText().toString().equalsIgnoreCase(
  (String)
  listview_array[i].subSequence(0,
  textlength)))
  {
      array_sort.add(listview_array[i]);
      }
   }}

  listContent1.setAdapter(new ArrayAdapter<String>
  (Search_Food.this,
  android.R.layout.simple_list_item_1, array_sort));
  }

  }); 
```

我的 onclicklistener 代码

```
 AlertDialog.Builder adb = new AlertDialog.Builder(
                 Search_Food.this);
          adb.setTitle("Food Item");
                  adb.setMessage("Selected Food is = "
                  + listContent1.getItemAtPosition(position));
                  adb.setPositiveButton("Ok", null);
                  adb.show(); 
```

我的数据库适配器

```
public LinkedList<String> search(String string) {
    // TODO Auto-generated method stub
    LinkedList<String> results = new LinkedList<String>();
    Cursor cursor = null;
    String search = string;
    try{
        cursor = this.sqLiteDatabase.query(true, MYDATABASE_TABLE , new String[] { KEY_ID , KEY_FOODNAME , KEY_CALORIES  }, KEY_FOODNAME  + " = ?" + "COLLATE NOCASE", 
                new String[] { search }, null, null, null, null);

        if(cursor!=null && cursor.getCount()>0 && cursor.moveToFirst()){

            int foodName = cursor.getColumnIndex(KEY_FOODNAME );
            int keyColories = cursor.getColumnIndex(KEY_CALORIES );

           // boolean moveToNext = cursor.moveToNext();
            //do{
                results.add(
                    new String(

                       cursor.getString(foodName) + "                              " +
                        cursor.getString(keyColories)
                    )
                );
            //}while(moveToNext);
        }
    }catch(Exception e){
        Log.e(APP_NAME, "An error occurred while searching for "+search+": "+e.toString(), e);
    }finally{
        if(cursor!=null && !cursor.isClosed()){
            cursor.close();
        }
    }

    return results;
} 
```

现在，当我在搜索的列表视图上单击数据时，我想将 getitemposition 提取到 2 中，这就是我的列。食物名称和卡路里。我怎样才能分开这两个值。

请回答。帮助。谢谢你

# visual-c++ - 背景减法后如何检测分割对象？

> ID：15309514
> 
> 赞同：0
> 
> 时间：2013-03-09T10:09:46.397
> 
> 标签：visual-c++, opencv, image-processing

我正在尝试使用 opencv 2.4.2 进行对象检测。这是我的移动前景减法的代码。现在我想检测原始帧中的移动对象并在其周围绘制边界框。有人可以帮帮我吗？怎么做？

```
 #include "stdafx.h"
   #include "opencv2/imgproc/imgproc.hpp"
   #include "opencv2/highgui/highgui.hpp"
   #include "opencv2/contrib/contrib.hpp"
   #include "conio.h"

   #include "time.h"
   #include "opencv/cvaux.hpp"
   #include "opencv2/core/core.hpp"
  #include "opencv2/calib3d/calib3d.hpp"

  using namespace std;
 using namespace cv;
   int main(int argc, char *argv[])
  {  

  int key = 0; 

    CvSize imgSize;
    CvCapture* capture = cvCaptureFromFile( "S:\\offline object detection   database\\TwoEnterShop2cor.MPG" );

         IplImage* frame = cvQueryFrame( capture );
         imgSize = cvGetSize(frame);

        IplImage* grayImage = cvCreateImage( imgSize, IPL_DEPTH_8U, 1);
        IplImage* currframe = cvCreateImage(imgSize,IPL_DEPTH_8U,3);
         IplImage* destframe = cvCreateImage(imgSize,IPL_DEPTH_8U,3);
    if ( !capture ) 

  {  
    fprintf( stderr, "Cannot open AVI!\n" );  
    return 1;  
  }

    int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

   cvNamedWindow( "dest", CV_WINDOW_AUTOSIZE );

   while( key != 'y' )
  {
  frame = cvQueryFrame( capture );

   currframe = cvCloneImage( frame );// copy frame to current
   frame = cvQueryFrame( capture );// grab frame
   cvAbsDiff(frame,currframe,destframe);

cvCvtColor(destframe,grayImage,CV_RGB2GRAY);
cvSmooth(grayImage,grayImage,CV_MEDIAN,3,3,0);
   cvAdaptiveThreshold(grayImage,grayImage,230,CV_THRESH_BINARY,CV_ADAPTIVE_THRESH_GAUSSIAN_C,3,5);

     cvDilate(grayImage, grayImage, 0,1);
 cvErode(grayImage,grayImage, 0, 0);
  if(key==27 )break;
  cvShowImage( "fram",currframe);
  cvShowImage( "dest",grayImage);
   key = cvWaitKey( 100 );
   }  
  cvDestroyWindow( "dest" );
  cvReleaseCapture( &capture );
  return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:27:07.863

帧差是最简单的背景减法方法，但是它对你使用的阈值非常敏感，可能不会得到好的结果。更好的方法是估计背景模型，比较每一帧和背景模型来确定运动物体。

您可以从以下链接中找到更多信息：
[OpenCV(C++) 中的](https://stackoverflow.com/questions/7765877/background-subtraction-in-opencvc)
[背景减法 OpenCV 2中的背景减法](https://stackoverflow.com/questions/13100605/background-subtraction-with-opencv-2)

# haskell - 一点范畴论

> ID：15309515
> 
> 赞同：3
> 
> 时间：2013-03-09T10:09:47.333
> 
> 标签：haskell, monads, category-theory

标准的新手 Haskell 问题之一是与“单子到底是什么？！”同构的一句话。这个问题的标准答案臭名昭著地定义为“单子只是内函子类别中的一个幺半群，有什么问题？”

现在显然幺半群只是任何带有关联二元运算符的集合，其身份是集合的一个元素。但什么是“内函子的范畴”？更一般地说，什么是范畴，什么是内函子，而就此而言，什么是函子？（函子的 CT 定义与 Haskell 所说的 a 的关系有多密切`Functor`？）

# java - 从 org.w3c.dom.Element 转换为 SVGSVGElement 失败

> ID：15309517
> 
> 赞同：2
> 
> 时间：2013-03-09T10:10:08.020
> 
> 标签：java, java-me, svg

说真的，如果我这样投：

```
(SVGSVGElement) (((SVGImage)blabla).getDocument().getDocumentElement()) 
```

它有效，但如果我尝试

```
(SVGSVGElement)doc.getElementById(some_id) 
```

我收到转换错误，但 getDocumentElement() 和 getElementById() 返回相同的类型`org.w3c.dom.Element`，我的全局目标是获取从文件加载的 svg-scene 上某些图像的 X 坐标，以便缩放场景以制作此图像适合可见区域。我试图用它来实现这一点， `((SVGSVGElement)doc.getElementById(some_id)).getBBox().getX()`但你看我得到了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:50:20.180

`org.w3c.dom.Element`是 DOM 架构中最低的接口之一，许多类都扩展了它，特别是`SVGSVGElement`.

您需要弄清楚返回什么类型`doc.getElementById(some_id)`，然后根据该信息进行转换：

```
log.debug("Returned class is - " + doc.getElementById(some_id).getClass().getName();
//or
System.out.println("Returned class is - " + doc.getElementById(some_id).getClass().getName(); 
```

而最简单的方法是尝试直接在调试器中知道类型。

我知道的唯一情况是，这种类型似乎是正确的，但是发生了 ClassCastException：

*   类加载器问题（当来自 2 个不同库的一个类被加载到 2 个不同的类加载器中时）
*   AOP 代理问题

# android - 如何通过手机录制应用程序的声音

> ID：15309518
> 
> 赞同：0
> 
> 时间：2013-03-09T10:10:18.963
> 
> 标签：android, audio-recording, android-audiorecord

我确实有一个应用程序，它会发出一些声音。可以说类似于音板。所以，我想记录我的应用程序的输出，然后回放。我看了看，`MediaRecorder`但我必须显示 a `source`，它只能是 a `MIC`。在谷歌搜索和 stackOverflowing 之后，我没有找到我要找的东西。

我想从你那里得到一些建议，因为我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:57:36.700

mediaRecord 或 AudioRecord AFAIK 仅从设备记录。而不是像混音器一样管道音频，只需管道原始数据。在服务中使用 RandomAccessFile 或类似的东西。像电脑一样思考，而不是录音机。

# ant - 如何在 ant build 中使用第三方 jar 覆盖特定的 jre jar

> ID：15309520
> 
> 赞同：0
> 
> 时间：2013-03-09T10:10:25.777
> 
> 标签：ant

我正在使用 Ant 1.7.1 在 Eclipse 中构建我们的应用程序。我的应用程序将部署在 WAS 6.1 上。因为我在我的代码中使用 sun.security.* 包类和子包（我知道不建议使用这个包，但没有其他选择）。

当我在 WAS 中部署 ear 时，我得到了 sun.security.x509.AlgorithmId 类的 ClassDefNotFoundError。我发现 IBM Jre 中所需的包中不存在此类（这就是不建议使用 sun.packages 的原因）。

我不得不将 IBM jars 放在我的开发类路径中，并通过将 IBM jars 放在 eclipse 中的 JRE jars 之前，让 eclipse 使用这些 jars 而不是我的本地 JRE jars - 排序和导出。这工作正常。

现在，我的问题是，如何在 ANT 中对罐子进行相同的排序。我知道如何在 ANT 类路径中指定 jar 的顺序。但是如何在 ANT 中将 IBM jar 放在 JRE jar 之前？

我尝试在引导类路径中设置 IBM jar。但是这样做，ANT 无法找到 java.lang，因为 java 类路径现在不在引导类路径中。

```
 <javac  source="1.5"
            target="1.5"
            bootclasspathref="project.class.path"
            destdir = "${build.classes.dir}"
            srcdir = "${work.dir}/src" 
            debug="true"
            encoding="UTF-8"
    >
    <classpath path="${java.library.path}"/>

    </javac> 
```

请告知如何完成这项工作。

任何帮助都感激不尽。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:16:12.050

我有一个解决方案。我对“javac”任务进行了以下更改：

```
 <javac  source="1.5"
              target="1.5"
              destdir = "${build.classes.dir}"
              srcdir = "${work.dir}/src" 
              debug="true"
              encoding="UTF-8"
      >
       **<compilerarg value="-Xbootclasspath/p:${toString:project.class.path}"/>**
     </javac> 
```

蚂蚁它工作！

# c# - 调用存储对象中的方法

> ID：15309522
> 
> 赞同：1
> 
> 时间：2013-03-09T10:10:39.657
> 
> 标签：c#, reflection

我对自动取款机有点困惑，我认为这不会这么难，因为那时我一定做错了什么。在过去的 2 天里，我现在要做的是访问存储在 List 中的对象内部的方法，但我无法理解它。在我看来，它应该只是让对象恢复其原始类型并调用该方法，但我就是做不到。

我一直在阅读很多关于类型、泛型和反射的内容，但它无法正常工作，所以我显然做错了，我需要帮助找到光！

这是我尝试过的最新代码

```
 Object customer = Hotel.Main.Manager.GetMainList(x);
            Type frsttype = customer.GetType();              
            MethodInfo method = frsttype.GetMethod("GetCustomerSpecificData");
            MethodInfo generic = method.MakeGenericMethod(frsttype);
            String str = generic.Invoke(method); 
```

我想要达到的是对象内部的这个方法：

```
 public override string GetCustomerSpecificData()
    {
        string strout = string.Format("{0,-5}{1,26}{2,28}{3,28}\a", ID, Name, Age, Gender);

        string strInfo = Extra;
        strout += (string.IsNullOrEmpty(strInfo) ? string.Empty : strInfo);

        if (m_specialoffer)
        {
            strout += string.Format("\nSpecial Offer");
        }
        if (IsRegularCustomer)
        {
            strout += (IsDangerus ? "\nIs a regular customer " : "\nIs not a regular customer.");
        }
        strout += Environment.NewLine + PaymentInfo();
        strout += (m_CarPark ? "\nHas car parked in garage." : "\nDoes not have car parked in garage.");
        return strout;
    } 
```

我希望有人能指出我正确的方向，因为我认为我在这个方面没有任何进展：/

任何帮助和提示将不胜感激！！！所有的回复都会被点赞！

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:38:06.947

这里有几件事你需要做，首先让我们看看你发布的代码

您不需要问自己的第一个问题是我是否需要使用反射，我可以使用接口或返回我知道的类型吗？

您是否可以控制 GetMainList(x)？如果是这样，你不能改变它，让它返回比对象更有用的东西吗？

```
Object customer = Hotel.Main.Manager.GetMainList(x); 
```

你能投射到任何东西吗？

其次，您的目标方法不是通用方法，因此下面的行不起作用。

```
MethodInfo generic = method.MakeGenericMethod(frsttype); 
```

您还错误地调用了该方法，您 Invoke 有两个参数，第一个是您希望调用该方法的目标对象以及您可以传递给它的参数。

```
Invoke(object obj, object[] parameters) 
```

要调用您的方法，您需要执行以下操作。

```
Object customer = Hotel.Main.Manager.GetMainList(x);
Type frsttype = customer.GetType();
MethodInfo method = frsttype.GetMethod("GetCustomerSpecificData");
String str = method.Invoke(customer, null) as string; 
```

stackoverflow 上有一些很棒的问题和社区 wiki，当然 MSDN 库中有很多教程和示例。

可以在下面找到一个很好的 .net 反射教程。

*   [C# 教程中的反射](http://www.codeproject.com/Articles/17269/Reflection-in-C-Tutorial)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T10:43:45.513

我的意思是你可以很容易地调用它：

```
 Type myType =customer.GetType();
 MethodInfo method = typeof(customer).GetMethod("GetCustomerSpecificData");
 MethodInfo generic = method.MakeGenericMethod(myType);
 var res= generic.Invoke(this, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T11:16:50.677

最接近您目前拥有的内容可以在不依赖反射的情况下工作。

```
Object customer = Hotel.Main.Manager.GetMainList(x);

string result="";
var custObj = customer as Customer;
if (custObj !=null)
{
    result = custObj.GetCustomerSpecificData();
}

var specialcustObj = customer as SpecialCustomer;
if (specialcustObj !=null)
{
   result = specialcustObj.GetCustomerSpecificData();
}

/* etc */ 
```

或者，如果你可以改变List中不同类型的实现有一个接口（或者替代一个（抽象）基类。

```
/* alternatively name it ISpecificData if you want adhere common used standards */
public interface SpecificData
{
     string GetCustomerSpecificData();
} 
```

对于您的客户和其他可以在列表中的类：

```
public class Customer:SpecificData
{
   /* rest of implemementastion stays the same */
} 
```

您获取客户的代码将如下所示，并且适用于列表中实现该接口的每个对象。

```
Object customer = Hotel.Main.Manager.GetMainList(x);

string result="";
var interfaceObj = customer as SpecificData;
if (interfaceObj != null) 
{
  result = interfaceObj.GetCustomerSpecificData();
} 
```

当您知道列表中只有一个特定接口时，您可以使用通用列表来仅保存该特定类型的对象：

```
mainlist = new List<SpecificData>(); 
```

并且您可以调整 GetMainList 以仅返回接口 SpecificData

# node.js - Node JS Connect 文件服务器未按预期服务

> ID：15309531
> 
> 赞同：0
> 
> 时间：2013-03-09T10:11:39.250
> 
> 标签：node.js, connect

我正在玩一个简单的 Connect 文件服务器：

```
var connect = require('connect'),
    http = require('http');

connect()
    .use(connect.static('.'))
    .listen(3000); 
```

该文件`index.html`在我访问时加载`localhost:3000`。但我似乎无法以我期望的方式访问任何其他文件。例如，地址`localhost:3000/json-parser.html`返回`Error: Forbidden`后跟有关 Connect 模块的信息（除非要求，否则我不会在此处全部包含，因为它很长，我怀疑对此有一个简单的答案）。

[我已经按照此处](https://stackoverflow.com/a/12019645/1563507)的代码更改了我的服务器，以在我的目录中提供一个“公共”文件夹：

```
var connect = require('connect'),
    http = require('http');

connect()
    .use(connect.static('public'))
    .listen(3000); 
```

但是我想访问父目录中文件夹中的脚本和文件，如果不将所有内容都放在“公共”中并将我的 Connect 文件服务器放在该目录之外，这是不可能的。鉴于上述方法似乎不起作用，Connect 有没有办法为它周围的目录提供服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:43:39.677

尝试：

```
var connect = require('connect'),
    http = require('http');

connect()
    .use(connect.static(__dirname))
    .listen(3000); 
```

但是请记住，这将为您运行 server.js 的目录下的所有文件和子目录提供服务，这通常不是一个好计划。

# vb.net - 如何获取所有本地存储的用户配置文件的用户名和域？

> ID：15309535
> 
> 赞同：3
> 
> 时间：2013-03-09T10:11:51.273
> 
> 标签：vb.net, vbscript, user-profile

如何检索存储在计算机上的所有用户配置文件的用户名和域？

这是用户配置文件管理器的屏幕截图，以说明我的意思：

![用户资料](../Images/7a8e461d2ec088749571d08fb3c0787d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:21:45.673

配置文件由 SID 映射。映射存储在此注册表项中：

```
[HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList] 
```

您可以使用 WMI[枚举](http://msdn.microsoft.com/en-us/library/aa390387)SID 并将它们[解析](http://msdn.microsoft.com/en-us/library/aa394450)为用户和域名：

```
Const HKLM = &h80000002
Const profiles = "SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList"

Set wmi = GetObject("winmgmts://./root/cimv2")
Set reg = GetObject("winmgmts://./root/default:StdRegProv")

reg.EnumKey HKLM, profiles, subkeys
For Each sid In subkeys
  Set acct = wmi.Get("Win32_SID.SID='" & sid & "'")
  WScript.Echo acct.ReferencedDomainName & "\" & acct.AccountName
Next 
```

如果您只查找现有配置文件文件夹的用户/域，请检查`ProfileImagePath`子键中的值是否指向现有文件夹：

```
Const HKLM = &h80000002
Const profiles = "SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList"

Set sh  = CreateObject("WScript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject")
Set wmi = GetObject("winmgmts://./root/cimv2")
Set reg = GetObject("winmgmts://./root/default:StdRegProv")

reg.EnumKey HKLM, profiles, subkeys
For Each sid In subkeys
  reg.GetStringValue HKLM, profiles & "\" & sid, "ProfileImagePath", path
  path = sh.ExpandEnvironmentStrings(path)
  If fso.FolderExists(path) Then
    Set acct = wmi.Get("Win32_SID.SID='" & sid & "'")
    WScript.Echo acct.ReferencedDomainName & "\" & acct.AccountName
  End If
Next 
```

# javascript - 在 XMLHttpRequest 中是否需要同时检查 readyState 和状态？

> ID：15309536
> 
> 赞同：2
> 
> 时间：2013-03-09T10:12:03.980
> 
> 标签：javascript, xmlhttprequest, http-status-code-200

在[本次讨论](https://stackoverflow.com/questions/7794673/using-js-to-get-a-particular-entity?rq=1)中，我们可以看到处理*XMLHttpRequest*和防止错误的*readyState*和*状态*组合的语法如下。

```
if (request.readyState == 4 && request.status == 200) { ... } 
```

我一直在使用联合条件信任这两种情况是独立的，允许在联系服务器时操作成功的所有四种组合。

昨天，我在想，我无法解释它们可能是什么。这些是什么？

1.  所有花花公子：*readyState*已完成 (4) 并且*状态*为 OK (200)。
2.  错误的通信：*readyState*已完成 (4) 并且*状态*不正常 (!200)。
3.  尚未完成：*readyState*尚未完成 (!4) 且*状态*正常 (200)。
4.  ?!?!?!?!: : *readyState*未完成 (!4) 且*状态*正常 (!200)。

特别是，我不明白未完成的事情如何既可以也可以不可以（案例 3 和 4）。未完成时不应该始终是*状态 OK*（或始终*状态不是 OK*）吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:16:31.290

> 我不明白未完成的事情如何既可以也可以不可以（案例 3 和 4）。

那不是你要测试的。

测试是：准备好了吗？不？这个条件不成立。

你没有：

```
if (request.readyState != 4 && request.status == 200) { ... } 
```

或者

```
if (request.readyState != 4 && request.status != 200) { ... } 
```

您只关心请求完成**并且**正常时的状态。

您拥有的语法是以下的简写：

```
if (request.readyState == 4) {
  if (request.status == 200) { ... }
} 
```

# jquery-ui - 协调 Kendo 主题与 jQ UI 主题

> ID：15309543
> 
> 赞同：0
> 
> 时间：2013-03-09T10:12:29.560
> 
> 标签：jquery-ui, kendo-ui

我正在使用带有“银色”调色板的剑道。我也将 jQ UI 用于某些事情，但主要是想将 jQ UI sprite 重新用于各种图像。问题：剑道主题是否对应于任何预先推出的 jQ UI 主题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:27:00.300

不，它们使用不同的主题、图像、精灵...但是您可以使用自定义 Kendo UI 主题[`KendoUI ThemeBuilder`](http://demos.kendoui.com/themebuilder/web.html)

# emacs - 如何设置自定义变量

> ID：15309548
> 
> 赞同：8
> 
> 时间：2013-03-09T10:13:00.037
> 
> 标签：emacs, elisp

有[cperl 模式](https://github.com/jrockway/cperl-mode/blob/master/cperl-mode.el)

以及我在源代码中看到的设置：

```
(defcustom cperl-indent-parens-as-block nil
  "*Non-nil means that non-block ()-, {}- and []-groups are indented as blocks,
but for trailing \",\" inside the group, which won't increase indentation.
One should tune up `cperl-close-paren-offset' as well."
  :type 'boolean
  :group 'cperl-indentation-details) 
```

我试图使用`(custom-set-variable '(cperl-indent-parens-as-block t))`，但这不起作用，所以我怎样才能将其更改`t`为全局设置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T11:51:55.800

该函数被称为`...-variables`：

```
(custom-set-variables '(cperl-indent-parens-as-block t)) 
```

或者您可以只使用`setq`，因为该变量没有定义 setter：

```
(setq cperl-indent-parens-as-block t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T15:06:06.923

[最简单](http://www.gnu.org/software/emacs/manual/html_node/emacs/Easy-Customization.html)的方法是`M-x customize-variable` `cperl-indent-parens-as-block`.

这会向您显示一个包含可能值等的漂亮菜单，然后将这些值添加到您的`init.el`（或`emacs.el`）中。

# php - 在 Tiki 我有创建/更新页面的 API，创建时间和日期无法正确显示

> ID：15309550
> 
> 赞同：0
> 
> 时间：2013-03-09T10:13:01.680
> 
> 标签：php, tiki-wiki

我在我的 php 网站上设置了 Tiki。

我使用自己的 Tiki API 文件创建/更新页面，但是当我在历史选项卡中显示页面版本时，不显示创建日期。只显示时间。

这是我在 Tiki 中创建页面的代码。

```
require 'tiki-setup.php';
include_once("tiki-calendar_setup.php");
require_once 'lib/tikilibsohyper.php';
require_once ('lib/userslib.php'); 
include_once ('lib/wiki/histlib.php');
global $tikilib,$calendarlib,$userlib,$histlib;

$tikilib->create_page($pageName, $hits, $pageData, $lastModif, $comment, $username, $ip= '0:0:0:0', $description='' , $lang, $is_html = false, $hash=null, $wysiwyg=NULL, $wiki_authors_style='', $minor=0, $created=''); 
```

这是更新页面

```
$tikilib->update_page($pageName, $pageData, $comment,$username, $ip, $description = ''); 
```

现在在 Tiki 历史页面 (TAB) 中的数据显示如下：

```
 Information                      Version      Action    

        --------------------------------------------------------------
        2013-03-04 09:47 by administrator       3       v  s  b         
        2013-03-04 09:47 by administrator       2       v  s  b         
        09:32 by administrator                  1       v  s  b 
```

首先，为什么它只显示时间？我需要时间和日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:21:50.617

您需要在“常规”>“日期和时间”管理面板上取消选中“跳过同一天的日期”。

# javascript - win.onload 不工作

> ID：15309552
> 
> 赞同：0
> 
> 时间：2013-03-09T10:13:05.940
> 
> 标签：javascript, jquery

这是我的代码。我的问题是，当我单击按钮时，window.open 功能正常工作并显示一个弹出窗口，但在此之后，页面无法重定向到定义位置：

```
<script type="text/javascript">
    var win=null;

    $(document).ready(function() {

        $("#buttonid").live("click",function(){

            var alt = "http://www.testhost.com/test.php";
            var rel = "http://www.testhost.com/test2.php";               
                var width= (window.innerWidth)-450;
                var win = window.open(alt,"mywin","width=450,height="+window.innerHeight+",left="+width+", location=no, menubar=no, status=no, titlebar=no, scrollbars=no");

                win.onload=function(){

                    window.location=rel;
                 }
                 win.blur();
                 //setTimeout(win.focus(), 0);
                 return false;

    });
    });
</script>
</head>
<body>
<button id="buttonid">Click</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:18:43.903

您需要按如下方式指定它，

```
win.onload=function()
{
    window.open.location=rel;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:20:02.677

看看这篇文章：[Detecting the onload event of a window opens open with window.open](https://stackoverflow.com/questions/3030859/detecting-the-onload-event-of-a-window-opened-with-window-open)

如果您要打开另一个域的窗口，您将无法参与此活动。

那篇文章有几件事你可以尝试。

```
win.addEventListener('load', function () {
    alert('popup loaded');
}, false); 
```

这是一个更理想的跨浏览器解决方案（同样，它来自该链接）：

```
win[win.addEventListener ? 'addEventListener' : 'attachEvent'](
  (win.attachEvent ? 'on' : '') + 'load', function () {
    alert('popup loaded');
}, false
); 
```

编辑：刚刚在 IE10、FF18 和 Chrome 25 中尝试了第二个代码片段。 onload 事件效果很好，只要它指向与调用它的站点位于同一域的 URL。即使我将 URL 指向 www.google.com，我的事件也从未触发。这是浏览器的一项安全功能，我认为您对此无能为力...

# ios - iOS 核心图像混合模式与 Photoshop 混合模式不同吗？

> ID：15309559
> 
> 赞同：6
> 
> 时间：2013-03-09T10:13:31.087
> 
> 标签：ios, objective-c, photoshop, core-image, cifilter

我正在使用 CIFilter 和 CIHueBlendMode 来混合图像（前景）和红色层（背景）

我在 Photoshop CS6 中使用 Hue Blend Mode 做同样的事情（复制前景图像并使用相同的红色填充背景层）

不幸的是，结果非常不同：（ ![在此处输入图像描述](../Images/7d6549580f2599f6a3cb7e9b2ed8acb1.png) 同样适用于将 CIColorBlendMode、CIDifferenceBlendMode 和 CISaturationBlendMode 与它们的 Photoshop 对应项进行比较）

我的问题是：是我吗？我在这里做错了吗？还是核心图像混合模式和 Photoshop 混合模式完全不同？

```
// Blending the input image with a red image  
CIFilter* composite = [CIFilter filterWithName:@"CIHueBlendMode"];
[composite setValue:inputImage forKey:@"inputImage"];
[composite setValue:redImage forKey:@"inputBackgroundImage"];

CIImage *outputImage = [composite outputImage];
CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
imageView.image = [UIImage imageWithCGImage:cgimg];
CGImageRelease(cgimg);

// This is how I create the red image:       
- (CIImage *)imageWithColor:(UIColor *)color inRect:(CGRect)rect
{
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef _context = UIGraphicsGetCurrentContext(); 
    CGContextSetFillColorWithColor(_context, [color CGColor]);
    CGContextFillRect(_context, rect); 
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return [[CIImage alloc] initWithCGImage:image.CGImage options:nil];
} 
```

# ruby-on-rails - 是否更改处理架构的迁移/回滚

> ID：15309564
> 
> 赞同：0
> 
> 时间：2013-03-09T10:14:39.543
> 
> 标签：ruby-on-rails, rails-migrations

在新的首选方式中，似乎只有一种方法可以添加一列。这是否意味着您不需要删除列的方法？

```
# the old way
class AddNameToPerson < ActiveRecord::Migration
  def up
    add_column :persons, :name, :string
  end

  def down
    remove_column :person, :name
  end
end

# the new prefered way
class AddNameToPerson < ActiveRecord::Migration
  def change
    add_column :persons, :name, :string
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:19:59.753

这就是 Rails 3.1 及更高版本的魔力。Rails 知道如何迁移您的数据库并在迁移回滚时对其进行反转，而无需编写单独的 down 方法。

Rails 跟踪迁移。因此，当您`roll back`. 之前我们曾经有两种方法`up`和`down`. 在 Rails 3.1 及更高版本上，他们将迁移更改为拥有`change`方法。

在`add_coulmn`反向方法的情况下`remove_column`与其他方法相同。使用跟踪的详细信息，它将调用适当的操作。所以你不需要两种方法（`up`和`down`）。`change`您可以查看method: [here](http://guides.rubyonrails.org/migrations.html#using-the-change-method)支持的方法。如果您有其他方法，则需要使用`up`and `down`。

如果您对 using`change`方法感到困惑，那么我建议您使用`up`and `down`。彻底完成迁移后，您可以开始使用`change`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:21:08.477

你是对的，你不需要单独的方法来删除列。

如果您没有任何数据要丢失，您甚至可以尝试“rake db:rollback”然后再次“rake db:migrate”。

它完美地工作。:)

# visual-studio-2010 - 无法在 Windows 8 中为 Visual Studio 2010 express Windows Phone 7 安装 SP1？

> ID：15309565
> 
> 赞同：1
> 
> 时间：2013-03-09T10:14:52.443
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7.1, async-await, async-ctp

我正在使用异步 CTP 在 Windows 8 OS Visual Studio 2010 express for Windows Phone 上安装，我已经为 Windows Phone 安装了 Visual Studio 2010 express，如下所示： ![在此处输入图像描述](../Images/a8a1203462c45cc7934b133b1e47e2cd.png)

我现在从链接[http://www.microsoft.com/en-in/download/details.aspx?id=23691安装 Windows Phone SP1](http://www.microsoft.com/en-in/download/details.aspx?id=23691)

但它总是给我错误，如下所示： ![在此处输入图像描述](../Images/cbb8dad52a59a99a429fc19f9ea81fde.png)

我应该如何使用异步 CTP。我的目标是在带有 Visual Studio 2010 的 Windows Phone 7.1 应用程序中使用 Async 和 Await，而不是在 Visual Studio 2012 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:29:21.770

您尝试安装的 Service Pack 未针对 Windows 8 提供：

```
Supported Operating Systems: 
Windows 7, Windows Server 2003 R2 (32-Bit x86), Windows Server 2003 R2 x64 editions, 
Windows Server 2003 Service Pack 2, Windows Server 2008 R2, 
Windows Server 2008 Service Pack 2, Windows Vista Service Pack 2, 
Windows XP Service Pack 3. 
```

第二个坏消息：“在没有 .NET Framework 4.5 的情况下使用 async/await” [http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework- 4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

为了使用 await 你需要两个组件：

*   **视觉工作室 2012**
*   一些特定的 .NET API

也许您想使用 VS Express 2012 或 VS 2012 的试用版：http: [//www.microsoft.com/visualstudio/eng/downloads#d-2012-editions](http://www.microsoft.com/visualstudio/eng/downloads#d-2012-editions)而不是 VS2010？

Visual Studio Express 2012 for Windows Desktop 中提供了新的 VS 2012 语言和库功能， 包括Visual Basic 和 C#、C++ AMP 中**的 async 和 await 关键字，以及对 C++ 11 标准一致性的改进。**

**您可以将 Express for Windows Desktop 与您的 Visual Basic 和 C# 应用程序一起使用，以同时面向 .NET 4.0 和 4.5。**

# php - Symfony2 - 如何将服务转移到数组中的另一个服务

> ID：15309566
> 
> 赞同：0
> 
> 时间：2013-03-09T10:14:55.043
> 
> 标签：php, symfony, configuration, dependency-injection

我无法将服务转移到数组中的另一个服务中。

例如这是我的`config.yml`：

```
services:
    car.price.calculator:
        class:        My\SuperBundle\CarCalculator
        arguments:    "something"

product_viewer:
    car:
        rest_client: "@car.price.calculator"  # <- this is the service I cannot transfer
        rest_url: http://example.com 
```

和`service.xml`：

```
<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="product.browser" class="Mrok\ShopBundle\Price\Calculator">
            <argument key="car" type="collection">
                <argument key="rest_client">%product.browser.rest_client%</argument>
                <argument key="rest_url">%product.browser.rest_url%</argument>
            </argument>
        </service>
    </services>
</container> 
```

我的 MrokShopExtension 将配置中的数据重写为容器参数，例如

```
 $container->setParameter('product.browser.rest_client', $config[0]['car']['rest_client']); 
```

`Calculator`班级：

```
class Calculator {

private $set;

public function __contruct(array $set) {
    $this->set = $set;
    var_dump($set);
} 
```

结果我得到（`var_dump`来自代码）：

```
 array (size=2)
     'rest_client' => string '@car.price.calculator' <- and here is a problem, it is a string, should be object 
```

如何而不是将字符串作为`rest_client`获取类实例（服务）。我无法将论点更改为：

```
<argument type="service" id="car.price.calculator" /> 
```

因为我不知道最终用户会注入什么样的服务。

我知道我可以将整个容器和服务 ID 作为参数传递 - 但我想避免注入容器。

# java - 使用spring 3.1不返回json响应

> ID：15309568
> 
> 赞同：0
> 
> 时间：2013-03-09T10:15:01.867
> 
> 标签：java, xml, json, spring

我正在尝试使用 ResponseBody 返回 json 和 xml 响应，它确实适用于 xml，但不返回 json。我对 xml 的请求 uri 是 '../home.xml' 而对于 json 是来自控制器方法的 '../home.json'：

```
@RequestMapping("home.*")
public  @ResponseBody Message homeOther(HttpServletRequest request, HttpServletResponse response, ModelMap mv){
    Message msg = new Message();
    msg.setDetail("I am here at home");
    msg.setUploadDate(new Date());

    mv.addAttribute("message", msg);

    return msg;
} 
```

这是调度程序 servlet：

```
<context:component-scan base-package="com.ym"/>

<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="alwaysUseFullPath" value="true"/>
</bean>

<bean id="velocityConfigurer" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
    <property name="resourceLoaderPath" value="/views"/>
</bean>

<!-- Simple ViewResolver for Velocity, appending ".vm" to logical view names -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
    <property name="order" value="2" />
    <property name="cache" value="true"/>
    <property name="prefix" value=""/>
    <property name="suffix" value=".vm"/>
    <property name="toolboxConfigLocation" value="/WEB-INF/toolbox.xml"/>
    <!-- if you want to use the Spring Velocity macros, set this property to true -->
    <property name="exposeSpringMacroHelpers" value="true"/>
    <property name="contentType" value="text/html; charset=UTF-8" />
</bean>

<bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller" />

<bean id="xmlView" class="org.springframework.web.servlet.view.xml.MarshallingView"
      >
      <constructor-arg ref="xstreamMarshaller" />
</bean>

<bean id="jsonView" class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="jsonHttpMessageConverter" />
            <ref bean="marshallingHttpMessageConverter" />
        </list>
    </property>
</bean>

<bean id="jsonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="supportedMediaTypes" value="application/json" />
</bean>

<bean id="marshallingHttpMessageConverter"
      class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <property name="marshaller" ref="xstreamMarshaller"/>
    <property name="unmarshaller" ref="xstreamMarshaller"/>
</bean>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
  <property name="order" value="1" />
  <property name="mediaTypes">
    <map>
       <entry key="json" value="application/json" />
       <entry key="xml" value="application/xml" />
    </map>
  </property>

  <property name="defaultViews">
    <list>
      <!-- JSON View -->
      <bean
        class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
      </bean>

      <ref bean="xmlView" />
     </list>
  </property>
  <property name="ignoreAcceptHeader" value="true" />

</bean> 
```

这是 XML 响应：

```
<com.ym.mongodb.model.Message>
 <messageId>0</messageId>
 <detail>I am here at home</detail>
 <uploadDate>2013-03-09 09:56:46.606 UTC</uploadDate>
</com.ym.mongodb.model.Message> 
```

我的问题是：1.配置有什么问题？为什么它不返回json响应。？2\. 为什么它返回的xml，显示Message的完全限定名？我正在使用 Spring 3.1。

**编辑**：有趣的是，当请求类型设置正确时，它确实会正确创建 json n xml。但是第二个问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:43:00.187

我不知道您要详细实现什么目标，所以我不知道是否可以提供帮助，但我会试一试。

首先，您可以尝试添加接受标头。下面是一个例子。

```
@RequestMapping(value = "/home/yourpath", method = RequestMethod.GET,
headers = "Accept=application/xml, application/json") 
```

通过添加接受标头 json 和 xml 请求将在调用您的方法和解析数据时被接受，例如使用 curl 客户端。另外，也许您应该考虑明确设置请求方法。

当您向客户端发送请求时，请确保根据您发送的内容，将“Content-Type: application/json”或“Content-Type: application/xml”添加到请求的标头中。否则，您将收到不支持的内容类型错误，因为您可能发送了错误的内容类型。

在 Spring 中有两种实际显示正确内容类型的方法。

1：通过解析/接受请求标头中的正确内容类型（通过在客户端配置接受标头）。

2：通过配置文件扩展名（有一些默认的文件扩展名应该是开箱即用的。xml和json都包括在内。）。尝试将 .xml 或 .json 添加到 uri 的末尾。

看看这里：[http ://static.springsource.org/spring/docs/3.1.0.RELEASE/reference/htmlsingle/#mvc-multiple-representations](http://static.springsource.org/spring/docs/3.1.0.RELEASE/reference/htmlsingle/#mvc-multiple-representations)

看下面的例子： [http ://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

我不能帮你解决你的第二个问题。

我希望这有帮助。祝你好运。

亲切的问候，克里斯

# lwuit - 代号中边框布局的 UI 中的间隙

> ID：15309569
> 
> 赞同：0
> 
> 时间：2013-03-09T10:15:06.950
> 
> 标签：lwuit, codenameone, lwuit-form

我尝试制作一个具有边框布局的框架。在里面我有 3 个容器 - 顶部、中心和底部。所有三个容器都有 3 种不同类型的背景。但是当我看到它们时，这些布局之间的差距很小，这使得 UI 有点分离并且看起来不太好。

请帮助我，我怎样才能消耗这些间隙并且我的容器看起来合并了。

提前致谢...

![在此处输入图像描述](../Images/0959f824bc52c8cecd8e5cf66870ee9c.png)

请检查此图像。它解释了你的差距。我已经用红色提到了它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:03:18.310

确保将容器的边距设置为 0。屏幕截图/代码可能有助于查明这一点。

# openstack - 如何测量openstack swift的集群健康

> ID：15309571
> 
> 赞同：1
> 
> 时间：2013-03-09T10:15:18.163
> 
> 标签：openstack, openstack-swift

`swift-dispersion-populate`我知道有内置工具`swift-dispersion-report`可以测量快速集群的健康状况。`swift-dispersion-report`对所有分区的 1% 进行采样以计算集群的健康状况。

我的问题是，是否有其他有效的方法而不是采样来监控快速集群的健康状况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T04:01:48.610

*   [https://github.com/Dieterbe/graph-explorer](https://github.com/Dieterbe/graph-explorer%20%28graphite%20dashboard%29)图资源管理器
*   [https://github.com/BrightcoveOS/](https://github.com/BrightcoveOS/Diamond)钻石钻石

Dimond 是一个 python 守护程序，它收集系统指标并将它们发布到 Graphite（和其他）。它能够收集 CPU、内存、网络、I/O、负载和磁盘指标。此外，它还具有一个 API，用于实现自定义收集器，用于从几乎任何来源收集指标。它可以与 Swift 集成

希望能帮助到你。

# php - 特殊图中的最重路径（PHP）

> ID：15309574
> 
> 赞同：1
> 
> 时间：2013-03-09T10:15:39.327
> 
> 标签：php, algorithm, graph, tree

我必须在图中搜索最重的路径：

```
 1

      2  1

    4  5  8

  2  2  3  4 
```

（本例中为 1,1,8,4） 像这样的图形。所以它是一个元素，除了最底层之外还有两个孩子。谁有孩子，他们有一个共同的孩子，例如（在上图中）5（在第 3 行中）是 2 和 1（在第 2 行中）的共同孩子。所以这些是节点而不是边，它们具有价值。

我用php写了一个算法：

```
class node{
    public $children = array();
    public $value;
    public $_heavier = null;
    public $_value = null;

    function __construct($value, $children) {
        $this->value = $value;
        $this->children = $children;
    }

    function heavier() {
        if (null !== $this->_value) {
            echo 'b' . $this->value . '<br>';
            return $this->_value;
        }

        $val = $this->value;

        if ($this->children[0]) {
            $c1 = $this->children[0]->heavier();
            $c2 = $this->children[1]->heavier();

            if ($c1 > $c2) {
                $this->_heavier = 0;
                $val += $c1;
            } else {
                $this->_heavier = 1;
                $val += $c2;
            }
        }

        echo 'a' . $this->value . '<br>';
        $this->_value = $val;

        return $val;
    }

    function getPath() {
        if (null !== $this->_heavier) {
            echo $this->children[$this->_heavier]->getPath();
        }
        return $this->value;
    }
}

$exists = array();
function a($row, $item) {
    global $input, $exists;

    $nextRow = $row + 1;
    $child1No = $item;
    $child2No = $item + 1;

    $child1 = null;
    if (isset($input[$nextRow][$child1No])) {
        $child1 = a($nextRow, $child1No);
    }

    $child2 = null;
    if (isset($input[$nextRow][$child2No])) {
        $child2 = a($nextRow, $child2No);
    }

    if (!isset($exists[$row][$item])) {
        $obj = new node($input[$row][$item], array($child1, $child2));
        $exists[$row][$item] = &$obj;
    } else {
        $obj = &$exists[$row][$item];
    }
    return $obj;
}

$nodes = a(0, 0);
$nodes->heavier();
echo $nodes->getPath();
echo '<br>'; 
```

它是有效的，但太多的时间。如何加快速度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:21:44.057

您的算法是最优化的 - 您需要`O(n)`时间`n`节点的数量。可以很容易地证明，没有什么可以做得更快。

我认为你算法的慢部分是`echo`-ing - 这是一个非常繁重的操作，可能会因为你`echo`太多而使你的算法变慢。

PS：顺便问一下，你在多少个节点上执行你的算法？真的只有10吗？

# ruby-on-rails - 有没有可以强制执行 Ruby 代码约定的 gem？

> ID：15309582
> 
> 赞同：10
> 
> 时间：2013-03-09T10:17:03.177
> 
> 标签：ruby-on-rails, coding-style

是否有任何宝石可以强制执行以下指南中提到的 ruby​​/rails 编码约定。

```
https://github.com/bbatsov/ruby-style-guide
https://github.com/bbatsov/rails-style-guide 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-23T09:31:55.267

[RuboCop](https://github.com/bbatsov/rubocop)是基于 Ruby 样式指南的静态代码分析器，由同一作者编写。

[Rails 最佳实践](https://github.com/railsbp/rails_best_practices)gem 可以检测 Rails 项目中的某些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:32:05.907

我最喜欢处理代码清洁度的两个 gem 是 Reek ( [https://github.com/troessner/reek](https://github.com/troessner/reek) ) 和 Cane ( [https://github.com/square/cane](https://github.com/square/cane) )。我不知道他们深入到缩进和间距的本质，但他们发现了很多 Ruby 编码约定，否则这些约定往往会被忽视。

在间距/缩进/大小写等方面，我要么寻找编辑器配置（例如，下载 TextMate / Sublime Text / EMACS / 你有什么的 Ruby 包），要么查看 BeautifyRuby gem（[https： //github.com/CraigWilliams/BeautifyRuby](https://github.com/CraigWilliams/BeautifyRuby)）。

# javascript - 角 JS。我正在尝试使用复选框过滤一个简单的结果列表

> ID：15309584
> 
> 赞同：1
> 
> 时间：2013-03-09T10:17:24.707
> 
> 标签：javascript, angularjs

我试图让我的用户使用复选框过滤我的结果数组。

我刚刚进入 Angular JS 框架工作，不太确定如何处理我的场景。

我正在尝试确定我正在做的事情是否可能以我接近它的方式进行，或者我是否只需要编写一个自定义过滤器函数。

我整理了一个简单的 jsfiddle 来说明我的问题。

[http://jsfiddle.net/arkleyjoe/7jUp6/](http://jsfiddle.net/arkleyjoe/7jUp6/)

这是标记：

```
<div ng-app="">
<div ng-init="friends = [{name:'John', phone:'555-1276'},
                       {name:'Mary', phone:'800-BIG-MARY'},
                       {name:'Mike', phone:'555-4321'},
                       {name:'Adam', phone:'555-5678'},
                       {name:'Julie', phone:'555-8765'}]"></div>Exclude Johns
<input ng-model="search.name" name="name" type="checkbox"
ng-true-value="!John" ng-false-value="">
<br>Exclude Adams
<input ng-model="search.name" name="name" type="checkbox"
ng-true-value="!Adam" ng-false-value="">
<br>
<table id="searchObjResults">
    <tr>
        <th>Name</th>
        <th>Phone</th>
        <tr>
            <tr ng-repeat="friend in friends | filter:search">
                <td>{{friend.name}}</td>
                <td>{{friend.phone}}</td>
                <tr>
</table>
</div> 
```

在此示例中，我使用复选框从列表中过滤某些名称。如果我选择一个或另一个，它工作正常，但我想同时选择。Angular JS 显然在幕后做了一些事情，因为它实际上阻止了我选择两个框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:21:51.000

`search.name`您正在尝试为两个复选框绑定一个属性，因此选中其中一个将覆盖另一个设置的值。如果要过滤两个复选框值，则需要将 ng-model 表达式分配给不同的模型属性。

您可以在控制器上创建一个方法并将其传递给`filter`表达式，该方法将为列表中的每个项目调用一次。如果函数返回 true，则将项目添加到最终结果中。您可以在此处编写自定义过滤器表达式。[在此处](http://docs.angularjs.org/api/ng.filter%3afilter)查看过滤器文档

# php - PHP if 块的正确格式

> ID：15309587
> 
> 赞同：-3
> 
> 时间：2013-03-09T10:17:38.157
> 
> 标签：php, if-statement

在这里完成 PHP noob 并返回错误，因为嵌套`if`块很大。当我更改代码时，错误会有所不同，但它始终与`if`语句有关。执行此语句的正确方法是什么？

这是不正确的`if`块：

```
if(!empty($_GET['x2'])) and (!empty($_GET['x'])) and (!empty($_GET['num']))
    {
    $xsqrd = $_GET['x2'];
    $x = $_GET['x'];
    $num = $_GET['num'];
    if(($xsqrd*2)==0.0)
    {
    print $errdivzero;
    }
    else if(sqrt(pow($x,2)-(4*$xsqrd*$num)))
    {
    print $errsqrtmin1;
    }
    else
    {
    $ans1 = (-$x)+(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
    $ans2 = (-$x)-(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:20:53.917

```
 if(!empty($_GET['x2']) && !empty($_GET['x']) && !empty($_GET['num']))
    {
        $xsqrd = $_GET['x2'];
        $x = $_GET['x'];
        $num = $_GET['num'];
        if(($xsqrd*2)==0.0)
        {
            print $errdivzero;
        }
        else if(sqrt(pow($x,2)-(4*$xsqrd*$num)))
        {
            print $errsqrtmin1;
        }
        else
        {
            $ans1 = (-$x)+(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
            $ans2 = (-$x)-(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
        }
    } 
```

您有额外`(`的`if`条件，并且您声明`and`了哪个不是 php 函数。您需要替换`and`为`&&`.

**现在它工作正常，没有任何错误消息。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:20:39.447

```
if(!empty($_GET['x2']) && (!empty($_GET['x']) && (!empty($_GET['num']))
 //                  ^ extra bracket         ^ extra bracket
{
    $xsqrd = $_GET['x2'];
    $x = $_GET['x'];
    $num = $_GET['num'];
    if(($xsqrd*2)==0.0)
    {
      print $errdivzero;
    }
    else if(sqrt(pow($x,2)-(4*$xsqrd*$num)))
    {
      print $errsqrtmin1;
    }
    else
    {
      $ans1 = (-$x)+(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
      $ans2 = (-$x)-(sqrt(pow($x,2)-(4*$xsqrd*$num)))/(2*$xsqrd);
    }
 } 
```

您在上面突出显示的位置有额外的右括号。也替换`and`为`&&`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:21:02.213

好吧，让我们检查一下您的括号：

```
if(!empty($_GET['x2'])) and (!empty($_GET['x'])) and (!empty($_GET['num']))
  ^                   ^ 
```

第二个突出显示的括号关闭`if`语句 - 这将导致错误，您应该删除不必要的括号，如下所示：

```
if(!empty($_GET['x2']) and !empty($_GET['x']) and !empty($_GET['num'])) 
```

将来，您应该仔细检查每个左括号的右括号是否在您期望的位置，并且不要过度使用括号的数量。

# windows - 在VB.net中加载时如何防止控件闪烁？

> ID：15309590
> 
> 赞同：3
> 
> 时间：2013-03-09T10:17:53.730
> 
> 标签：windows, vb.net, controls, flicker

我目前的 Windows 应用程序存在问题。这是我的问题的视频。

[闪烁问题](http://youtu.be/LBfJ1RWI4Q4)

如您所见，每次我单击某些按钮并加载控件（选项卡控件和面板）时，它们都会闪烁，看起来很烦人。我怎样才能摆脱这个？我已经尝试将其设置`DoubleBuffer`为 true 但仍然无法正常工作。有什么帮助吗？

我还在加载事件中执行了暂停布局（）和恢复布局（），但仍然无法正常工作。或者可能是因为我编码错误。这是我的代码：

```
Private Sub frmAdminPanel_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        lblUser.Text = currentUser
        Me.pnlOverview.SuspendLayout()
        Me.tabPayment.Visible = False
        Me.tabClientReporting.Visible = False
        Me.btnNewEntry.Visible = False
        Me.btnPayment.Visible = False
        setOverview()
        Me.pnlOverview.Visible = True
        Me.pnlOverview.ResumeLayout()
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:28:18.177

而不是使用`SuspendLayout`and `ResumeLayout`，尝试使用`BeginUpdate`and `EndUpdate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:25:31.097

如果表单的 Load 事件中有任何代码操作 UI，那么您应该尝试使用 SuspendLayout() 和 ResumeLayout() 来防止闪烁。

# java - java中的FTP apache commons进度条

> ID：15309591
> 
> 赞同：5
> 
> 时间：2013-03-09T10:17:56.540
> 
> 标签：java, ftp, progress-bar, apache-commons-net

我正在开发一个小程序，它可以将文件上传到我的 FTP 服务器并用它做一些其他的事情。现在...一切正常，我正在使用`org.apache.commons.net.ftp FTPClient`该类进行上传。

```
ftp = new FTPClient();
ftp.connect(hostname);
ftp.login(username, password);

ftp.setFileType(FTP.BINARY_FILE_TYPE);
ftp.changeWorkingDirectory("/shares/public");
int reply = ftp.getReplyCode();

if (FTPReply.isPositiveCompletion(reply)) {
    addLog("Uploading...");
} else {
    addLog("Failed connection to the server!");
}

File f1 = new File(location);
in = new FileInputStream(

ftp.storeFile(jTextField1.getText(), in);

addLog("Done");

ftp.logout();
ftp.disconnect(); 
```

应该上传的文件在 hTextField1 中命名。现在...如何添加进度条？我的意思是，ftp.storeFile 中没有流...我该如何处理？

谢谢你的帮助！:)

问候

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-09T11:08:52.180

您可以使用[CopyStreamListener](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/io/CopyStreamListener.html)来完成，根据 Apache commons docs 是`the listener to be used when performing store/retrieve operations.`

```
CopyStreamAdapter streamListener = new CopyStreamAdapter() {

    @Override
    public void bytesTransferred(long totalBytesTransferred, int bytesTransferred, long streamSize) {
       //this method will be called everytime some bytes are transferred

       int percent = (int)(totalBytesTransferred*100/yourFile.length());
       // update your progress bar with this percentage
    }

 });
ftp.setCopyStreamListener(streamListener); 
```

希望这可以帮助

# algorithm - 找到图的最大子集的大小，其中每个顶点的度数至少为 p

> ID：15309592
> 
> 赞同：2
> 
> 时间：2013-03-09T10:18:11.950
> 
> 标签：algorithm, graph

给定一个无向图。如何找到图中每个顶点的度数至少为 p 的最大顶点子集的大小，其中子集中的度数仅在子集中的顶点中找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:49:31.970

度数小于 p 的顶点永远不能成为解的一部分。完全移除它们，包括它们的边缘。查看新图表并重复，等等。

当这个过程停止时，所有顶点的度数至少为 p。

然后，查看该图的连接组件并选择最大的一个！（正如 Evgeny Kluev 正确指出的那样，这当然是不必要的。在我的脑海中，剩余的子图应该已经连接，但当然原始问题没有这样的要求。）

# javascript - JQuery 代码，适用于 1.5.2 版，但不适用于 1.9.1 版

> ID：15309600
> 
> 赞同：1
> 
> 时间：2013-03-09T10:19:41.717
> 
> 标签：javascript, jquery

我有来自[本教程的 JavaScript/JQuery 代码](http://www.script-tutorials.com/html5-game-development-lesson-1/)

当我使用 1.5.2 版本的 JQuery 时，这段代码工作得很好。但是当我使用最新版本的 JQuery (1.9.1) 时，这段代码不起作用。需要更改此代码才能在最新的 JQuery 中工作。

[这是一个带有 JQuery 1.5.2 的版本](http://www.script-tutorials.com/demos/147/index.html)

[这是一个带有 JQuery 1.9.1 的版本](http://jsbin.com/ukagas/2/edit)

如您所见，Jquery 1.5.2 有效，但 1.9.1 无效。

```
var canvas, ctx;
var circles = [];
var selectedCircle;
var hoveredCircle;

// -------------------------------------------------------------

// objects :

function Circle(x, y, radius){
    this.x = x;
    this.y = y;
    this.radius = radius;
}

// -------------------------------------------------------------

// draw functions :

function clear() { // clear canvas function
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
}

function drawCircle(ctx, x, y, radius) { // draw circle function
    ctx.fillStyle = 'rgba(255, 35, 55, 1.0)';
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, Math.PI*2, true);
    ctx.closePath();
    ctx.fill();
}

function drawScene() { // main drawScene function
    clear(); // clear canvas

    ctx.beginPath(); // custom shape begin
    ctx.fillStyle = 'rgba(255, 110, 110, 0.5)';
    ctx.moveTo(circles[0].x, circles[0].y);
    for (var i=0; i<circles.length; i++) {
        ctx.lineTo(circles[i].x, circles[i].y);
    }
    ctx.closePath(); // custom shape end
    ctx.fill(); // fill custom shape

    ctx.lineWidth = 5;
    ctx.strokeStyle = 'rgba(0, 0, 255, 0.5)';
    ctx.stroke(); // draw border

    for (var i=0; i<circles.length; i++) { // display all our circles
        drawCircle(ctx, circles[i].x, circles[i].y, (hoveredCircle == i) ? 25 : 15);
    }
}

// -------------------------------------------------------------

// initialization

$(function(){
    canvas = document.getElementById('scene');
    ctx = canvas.getContext('2d');

    var circleRadius = 15;
    var width = canvas.width;
    var height = canvas.height;

    var circlesCount = 7; // we will draw 7 circles randomly
    for (var i=0; i<circlesCount; i++) {
        var x = Math.random()*width;
        var y = Math.random()*height;
        circles.push(new Circle(x,y,circleRadius));
    }

    // binding mousedown event (for dragging)
    $('#scene').mousedown(function(e) {
        var canvasPosition = $(this).offset();
        var mouseX = e.layerX || 0;
        var mouseY = e.layerY || 0;
        for (var i=0; i<circles.length; i++) { // checking through all circles - are mouse down inside circle or not
            var circleX = circles[i].x;
            var circleY = circles[i].y;
            var radius = circles[i].radius;
            if (Math.pow(mouseX-circleX,2) + Math.pow(mouseY-circleY,2) < Math.pow(radius,2)) {
                selectedCircle = i;
                break;
            }
        }
    });

    $('#scene').mousemove(function(e) { // binding mousemove event for dragging selected circle
            var mouseX = e.layerX || 0;
            var mouseY = e.layerY || 0;
        if (selectedCircle != undefined) {
            var canvasPosition = $(this).offset();

            var radius = circles[selectedCircle].radius;
            circles[selectedCircle] = new Circle(mouseX, mouseY,radius); // changing position of selected circle
        }

        hoveredCircle = undefined;
        for (var i=0; i<circles.length; i++) { // checking through all circles - are mouse down inside circle or not
            var circleX = circles[i].x;
            var circleY = circles[i].y;
            var radius = circles[i].radius;
            if (Math.pow(mouseX-circleX,2) + Math.pow(mouseY-circleY,2) < Math.pow(radius,2)) {
                hoveredCircle = i;
                break;
            }
        }
    });

    $('#scene').mouseup(function(e) { // on mouseup - cleaning selectedCircle
        selectedCircle = undefined;
    });

    setInterval(drawScene, 30); // loop drawScene
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:30:53.403

jQuery 不再盲目地将对象的**所有**属性`Event`从真实事件对象复制到 jQuery 提供的对象中，所以这些行：

```
var mouseX = e.layerX || 0;
var mouseY = e.layerY || 0; 
```

...在and处理程序`0`中失败（总是返回`mouseX`and `mouseY`），因为[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)没有and 。`mousedown``mousemove``layerX``layerY`

不过， jQuery 使原始事件对象可用作`originalEvent`，因此修复了它：

```
var mouseX = e.originalEvent.layerX || 0;
var mouseY = e.originalEvent.layerY || 0; 
```

[更新了 JSBin](http://jsbin.com/ukagas/7) | [来源](http://jsbin.com/ukagas/7/edit)

或者兼容多个版本：

```
var mouseX = e.layerX || e.originalEvent.layerX || 0;
var mouseY = e.layerY || e.originalEvent.layerY || 0; 
```

[更新了 JSBin](http://jsbin.com/ukagas/9) | [来源](http://jsbin.com/ukagas/9/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:31:58.227

改变：

```
e.layerX
e.layerY 
```

到

```
e.originalEvent.layerX
e.originalEvent.layerY 
```

那工作:)

( [http://jsbin.com/ukagas/3/edit](http://jsbin.com/ukagas/3/edit) )

# c# - 尝试在数据集表中插入新行时出错

> ID：15309607
> 
> 赞同：0
> 
> 时间：2013-03-09T10:20:22.147
> 
> 标签：c#, datarow

我在创建数据行对象的位置出现错误。

> 你调用的对象是空的

```
protected void Button2_Click(object sender, EventArgs e)
    {
        SqlConnection con2 = new SqlConnection("Data Source=AMIT-PC\\SQLEXPRESS;Initial Catalog=Amit;Integrated Security=true");
        con2.Open();
        SqlCommand cmd2 = new SqlCommand("Select * from  hotel.country", con2);

        SqlDataAdapter da2 = new SqlDataAdapter(cmd2);
        SqlCommandBuilder sb = new SqlCommandBuilder(da2);
        DataSet ds2 = new DataSet();
        da2.Fill(ds2);
       /* GridView2.DataSource = ds2;
        GridView2.DataBind();*/

        DataRow dr = ds2.Tables["hotel.country"].NewRow();
        dr[ds2.Tables[TextBox1.Text].Columns[0].ColumnName] = TextBox2.Text;
        dr[ds2.Tables[TextBox1.Text].Columns[1].ColumnName] = TextBox3.Text;
        da2.Update(ds2);
        GridView1.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:35:09.357

您可以创建如下映射：

```
da2.TableMappings.Add("Table", "Hotel.Country"); 
```

或通过以下方式访问它：

```
ds2.Tables[0].NewRow(); 
```

**编辑：**

如果您想使用表名，这可能会更容易。

```
da2.Fill(ds2, "Hotel.Country"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:59:44.700

试试这个...

```
 DataRow dr = ds2.Tables[0].NewRow();
    dr[ds2.Tables[TextBox1.Text].Columns[0].ColumnName] = TextBox2.Text;
    dr[ds2.Tables[TextBox1.Text].Columns[1].ColumnName] = TextBox3.Text;
    da2.Update(ds2); 
```

也许这可以帮助你....

# android - 尝试使用 PhoneGap 和 Meteor 开发 Android 应用程序 - 需要帮助

> ID：15309608
> 
> 赞同：1
> 
> 时间：2013-03-09T10:20:32.837
> 
> 标签：android, cordova, meteor

寻求使用 PhoneGap 和 Meteor 构建 Android 应用程序的帮助。

我在这里看到了关于如何构建一个“瘦客户端”PhoneGap 应用程序的答案，该应用程序指向流星服务器并呈现它，并且基本上对我有用。

但是，我想多做一点客户端（“thick-client”），因此想将 Meteor 客户端代码（js，css）带入 PhoneGap 并让该代码远程调用 Meteor 服务器。我已经看到了一些在某些地方破解硬编码 URL 的方法，但它们对我不起作用（app.html 在模拟器中显示为空白 - 我认为任何/所有引用的 js 文件都没有正确加载） .

我还尝试将我的流星客户端代码更改为使用 Meteor.connect，但我不知道如何使用远程服务器对用户进行身份验证。我正在使用帐户包，它总是通过我的本地机器服务器进行身份验证。

所以我的问题：

(A) 有人做过这样的事情吗？（尤其适用于使用 Windows 开发机器的 Android）

(B) 如果可能，哪些文件需要从流星包中提取到 phonegap 文件夹中，它们到底去哪里了？还需要哪些其他调整？

(C) 如果使用 Meteor.connect 是要走的路（用于远程数据），如何告诉 auth 包与远程服务器通信？

非常感谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:26:22.260

这将需要一些手动编辑，但应该是可能的：

1.  确保引用了所有图像/资源，以便它们可以在本地使用（/使用相对路径）
2.  在您的项目目录中用于`meteor bundle`创建项目的压缩包[http://docs.meteor.com/#meteorbundle](http://docs.meteor.com/#meteorbundle)
3.  提取您的 tarball 并使用`index.html`您的 PhoneGap 或 Cordova 项目 www 文件夹中的文件，可能是在网络检查或流星项目之后
4.  将静态中的内容（来自`public`您的流星项目的目录，例如图像）也复制到您的 www
5.  将您的捆绑包发布到服务器上
6.  编辑您的`index.html`文件，以便从您的服务器加载引用的 javascript

这应该让所有的东西在手机上本地运行，但只能通过 websocket/long polling 从你的服务器获取集合、订阅、流星调用和东西

# java - 如何绘制透明背景？

> ID：15309611
> 
> 赞同：1
> 
> 时间：2013-03-09T10:20:40.980
> 
> 标签：java, swing, jpanel, transparency, graphics2d

我正在尝试使 JPanel 的一部分透明，但我无法让它正常工作。是否有可能做到这一点？

```
import java.awt.*;
import javax.swing.*;

public class ClearPanel extends JPanel{
public static void main(String[] args) {
    ClearPanel c = new ClearPanel();
    c.setPreferredSize(new Dimension(200, 200));
    c.setOpaque(false);

    JPanel backPanel = new JPanel();
    backPanel.setBackground(Color.CYAN);

    backPanel.add(c);

    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setContentPane(backPanel);
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.fillOval(0, 0, 200, 200);
    g.clearRect(45, 45, 50, 50);

    Graphics2D g2 = (Graphics2D) g;
    g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.0f));
    g2.fillRect(75, 75, 50, 50);
}
} 
```

椭圆应该是不透明的，但我希望矩形是透明的。通过透明，我的意思是我应该能够看到 ClearPanel 后面的面板。

脱离 MadProgrammer 的回答，有没有办法让灰色框在该区域外绘制，但在该区域内保持透明？

```
 @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Rectangle fill = new Rectangle(getWidth(), getHeight());
        Graphics2D g2d = (Graphics2D) g.create();

        Rectangle hole = new Rectangle(0, 0, 100, 100);

        Area area = new Area(fill);
        area.subtract(new Area(hole));
        g2d.setColor(getBackground());
        g2d.fill(area);

        g2d.setColor(Color.RED);
        g2d.setComposite(AlphaComposite.SrcOver.derive(0.0f));
        g2d.fill(hole);

        g2d.setComposite(AlphaComposite.SrcOver.derive(1.0f));
        g2d.setColor(Color.DARK_GRAY);
        if(area.contains(0,0,100,200))
            g2d.fillRect(0, 0, 100, 200);

        g2d.dispose();      
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T10:50:56.800

默认情况下，您遇到的问题`JPanel`是不透明的，这意味着重绘不会在其下绘制任何东西。

您需要将面板设置为透明，然后接管背景的绘制。

现在，真正的把戏开始了。如果您只是填充组件，然后尝试在其顶部绘制透明部分，您将只是在不透明背景上绘制透明部分......不是很有帮助。

您需要做的不是填充您想要保持透明的区域。

您可以通过使用`Area`形状来完成此操作，该形状有一个巧妙的技巧，可以添加/添加和删除形状。

![在此处输入图像描述](../Images/f9112a90e4547e7a0d1d0facd859dbd1.png)

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Area;
import java.awt.geom.Ellipse2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransparentPane {

    public static void main(String[] args) {
        new TransparentPane();
    }

    public TransparentPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                BackgroundPane backgroundPane = new BackgroundPane();
                backgroundPane.setBackground(Color.RED);
                backgroundPane.setLayout(new BorderLayout());
                backgroundPane.add(new TranslucentPane());

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(backgroundPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BackgroundPane extends JPanel {

        private BufferedImage bg;

        public BackgroundPane() {
            try {
                bg = ImageIO.read(new File("/path/to/your/image.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return bg == null ? super.getPreferredSize() : new Dimension(bg.getWidth(), bg.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (bg != null) {
                int width = getWidth() - 1;
                int height = getHeight() - 1;
                int x = (width - bg.getWidth()) / 2;
                int y = (height - bg.getHeight()) / 2;
                g.drawImage(bg, x, y, this);
            }
        }

    }

    public class TranslucentPane extends JPanel {

        public TranslucentPane() {
            setOpaque(false);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Rectangle fill = new Rectangle(getWidth(), getHeight());
            Graphics2D g2d = (Graphics2D) g.create();

            int width = getWidth() - 1;
            int height = getHeight() - 1;
            int radius = Math.min(width, height) / 2;
            int x = (width - radius) / 2;
            int y = (height - radius) / 2;

            Ellipse2D hole = new Ellipse2D.Float(x, y, radius, radius);

            Area area = new Area(fill);
            area.subtract(new Area(hole));
            g2d.setColor(getBackground());
            g2d.fill(area);

            g2d.setColor(Color.RED);
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.25f));
            g2d.fill(hole);

            g2d.dispose();
        }

    }

} 
```

**更新**

嗯，这比我预期的要长一点……

![在此处输入图像描述](../Images/92b784977b86fe617567bb34452fe2e5.png)

基本上，我们需要创建一个形状的蒙版，从我们要显示的矩形中减去孔，然后从我们要显示的矩形中减去该结果

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Area;
import java.awt.geom.Ellipse2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransparentPane {

    public static void main(String[] args) {
        new TransparentPane();
    }

    public TransparentPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                BackgroundPane backgroundPane = new BackgroundPane();
                backgroundPane.setBackground(Color.RED);
                backgroundPane.setLayout(new BorderLayout());
                backgroundPane.add(new TranslucentPane());

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(backgroundPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BackgroundPane extends JPanel {

        private BufferedImage bg;

        public BackgroundPane() {
            try {
                bg = ImageIO.read(new File("/Users/swhitehead/Dropbox/MegaTokyo/Evil_Small.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return bg == null ? super.getPreferredSize() : new Dimension(bg.getWidth(), bg.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (bg != null) {
                int width = getWidth() - 1;
                int height = getHeight() - 1;
                int x = (width - bg.getWidth()) / 2;
                int y = (height - bg.getHeight()) / 2;
                g.drawImage(bg, x, y, this);
            }
        }

    }

    public class TranslucentPane extends JPanel {

        public TranslucentPane() {
            setOpaque(false);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Rectangle fill = new Rectangle(getWidth(), getHeight());
            Graphics2D g2d = (Graphics2D) g.create();

            int width = getWidth() - 1;
            int height = getHeight() - 1;
            int radius = Math.min(width, height) / 2;
            int x = (width - radius) / 2;
            int y = (height - radius) / 2;

            Ellipse2D hole = new Ellipse2D.Float(x, y, radius, radius);

            Area area = new Area(fill);
            area.subtract(new Area(hole));
            g2d.setColor(getBackground());
            g2d.fill(area);

            g2d.setColor(Color.RED);
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.0f));
            g2d.fill(hole);
            g2d.dispose();

            g2d = (Graphics2D) g.create();

            // Basically, we create an area that is subtraction of the window/rectangle
            // from the whole.  This leaves us with a rectangle (with a hole in it)
            // that doesn't include the area where the whole is...
            Rectangle win = new Rectangle(
                            x + (radius / 2), 
                            y + (radius / 2), radius, (radius / 4));
            area = new Area(win);
            area.subtract(new Area(hole));

            // Then we create a area that is a subtraction of the original rectangle
            // from the one with a "hole" in it...
            Area actual = new Area(win);
            actual.subtract(area);
            g2d.setColor(Color.BLUE);
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
            g2d.fill(actual);

            g2d.dispose();
        }        
    }
} 
```

# java - 为什么 findViewById(android.R.id.tabhost) 返回 null？

> ID：15309612
> 
> 赞同：2
> 
> 时间：2013-03-09T10:20:46.770
> 
> 标签：java, android

这是来自**ActionBarSherlock**示例的示例，我完全遵循此示例，但 findViewById(android.R.id.tabhost) 返回 null，并且我的应用程序因 NullPointerException 而中断。有谁知道这个问题的解决方案？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated constructor stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_fragment_tabs);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

    mTabManager.addTab(mTabHost.newTabSpec("vote").setIndicator("Vote"), VoteActivity.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

/**
 * This is a helper class that implements a generic mechanism for
 * associating fragments with the tabs in a tab host. It relies on a trick.
 * Normally a tab host has a simple API for supplying a View or Intent that
 * each tab will show. This is not sufficient for switching between
 * fragments. So instead we make the content part of the tab host 0dp high
 * (it is not shown) and the TabManager supplies its own dummy view to show
 * as the tab content. It listens to changes in tabs, and takes care of
 * switch to the correct fragment shown in a separate content area whenever
 * the selected tab changes.
 */
public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost,
            int containerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mTabHost.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }

        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    }

    @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager()
                    .executePendingTransactions();
        }
    }
} 
```

**main_fragment_tabs.xml**

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@android:id/tabhost">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:orientation="horizontal" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:25:38.467

***永远不要***`android.R`在你的项目中使用*（即使有时 eclipse 可能会建议你这样做）*！！！

它不是指`R.java`包含 XML 布局中元素的生成 id 的 generate，因此，它是初学者面临的许多问题的根源！

始终使用**`R`**而不是`android.R`

所以，你的代码应该是**`findViewById(R.id.tabhost)`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:22:02.523

改变这个

```
mTabHost = (TabHost)findViewById(android.R.id.tabhost); 
```

做：-

```
 mTabHost = (TabHost)findViewById(R.id.tabhost); 
```

# google-app-engine - 使用 <%@ include file="/file.jsp" %> 时，Google App Engine 不会部署

> ID：15309621
> 
> 赞同：3
> 
> 时间：2013-03-09T10:21:39.810
> 
> 标签：google-app-engine, jsp, jstl

该项目在我的本地计算机上编译并完美运行。每当我尝试部署时，我都会收到此错误：

```
Unable to update:
com.google.appengine.tools.admin.JspCompilationException: Failed to compile the      generated JSP java files.
at com.google.appengine.tools.admin.Application.compileJavaFiles(Application.java:803)
at com.google.appengine.tools.admin.Application.compileJsps(Application.java:760)
at com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:592)
at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:370)
at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:53)
at com.google.appengine.tools.admin.AppCfg$UpdateAction.execute(AppCfg.java:1163)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:232)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:109)
at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:105) 
```

我搜索了很多并应用了我找到的所有可能的解决方案。我确保 Eclipse 使用的是 JDK 而不是 JRE。我什至尝试将 jdk 中的 tools.jar 放入 AppEngineSDK 的 lib/shared 中。没有任何效果，所以我决定尝试另一种方法 - 我使用留言簿演示作为起点。未修改时，Guestbook 演示部署完美。但后来我修改了它。我将下面的代码从guestbook.jsp 移到单独的.jsp 文件（includement.jsp）中。然后我在 guestbook.jsp 中使用 <%@ include file="/includement.jsp" %>。就是这样。它在我的本地计算机上完美运行。但它不会部署给我上面显示的错误。

这是我移动的代码：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.google.appengine.api.users.User" %>
<%@ page import="com.google.appengine.api.users.UserService" %>
<%@ page import="com.google.appengine.api.users.UserServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreService" %>
<%@ page import="com.google.appengine.api.datastore.Query" %>
<%@ page import="com.google.appengine.api.datastore.Entity" %>
<%@ page import="com.google.appengine.api.datastore.FetchOptions" %>
<%@ page import="com.google.appengine.api.datastore.Key" %>
<%@ page import="com.google.appengine.api.datastore.KeyFactory" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<%
String guestbookName = request.getParameter("guestbookName");
if (guestbookName == null) {
    guestbookName = "default";
}
pageContext.setAttribute("guestbookName", guestbookName);
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser();
if (user != null) {
  pageContext.setAttribute("user", user);
%> 
```

我已经挣扎了一个星期，我非常绝望。它在本地工作并且不会被部署对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T03:37:45.470

嗯...这不能回答您的问题，但也许会对其他人有所帮助。

我只是有一个非常相似的情况。在本地工作正常，但在部署时出现文件未找到错误。我去了这个关于静态文件的页面（[https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles](https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles)），这让我开始思考。

我的包含文件没有 jsp 扩展名，并且被应用程序引擎视为静态文件，因此可以从任何服务器提供它们。与此相反的含义是 jsp 文件仅由一个服务器提供，并且由于包含文件是从 jsp 页面引用的，因此它们具有相同的约束——它们不能是静态文件。当你想到它时，它是有道理的。本地提供的包含文件将按顺序执行，并且页面创建没有问题。将这些相同的文件放在其他服务器上，您就会遇到同步问题。将包含文件保留在所服务页面的本地会更有意义。

就我而言，我将我的包含重命名为 jsp 扩展，并且效果很好。在你的情况下不是这样，因为你已经有了一个 jsp 扩展——这很奇怪。

- 编辑 -

说得太早了。它起作用了，又坏了。现在 gae 返回“无法编译生成的 JSP java 文件”。当然在本地工作得很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T15:25:09.473

我不相信包含在另一个 JSP 中的 JSP 能够在不导入它们自己的正确依赖项的情况下进行编译。我一直无法在任何地方找到这样的例子。您说这在开发服务器中有效，这很奇怪。

下面是两个示例 JSP，一个主页和一个包含在内：

**索引.jsp**

```
<html>                                                                                                                                                                                                    
<head>
</head>                                                                                                                                                                                           
<body>                                                                                         
    <pre>                                                                                                  
        <%@ page import="java.util.List" %> 
        <%@ page import="java.util.ArrayList" %>                                                                   
        <jsp:include page="include.jsp" />                                                                                           
    </pre>                                                                                                                                                                                                                
</body>                                                                                                                                                                                                                 
</html> 
```

**包含.jsp**

```
<%
List<String> cats = new ArrayList<String>();                                                                        
cats.add ("Milo");                                                                                             
cats.add ("Dya");                                                                        
for (Object cat : cats) {                                                                                      
   out.println (cat.toString());                                                                               
}                                                                                                           
%> 
```

通过在浏览器中显示以下内容失败：

```
HTTP ERROR 500

Problem accessing /. Reason:

    Unable to compile class for JSP: 

An error occurred at line: 4 in the jsp file: /include.jsp
List cannot be resolved to a type
1: <%
2: 
3: 
4: List<String> cats = new ArrayList<String>();
5: cats.add ("Milo");
6: cats.add ("Dya");
7: 

An error occurred at line: 4 in the jsp file: /include.jsp
ArrayList cannot be resolved to a type
1: <%
2: 
3: 
4: List<String> cats = new ArrayList<String>();
5: cats.add ("Milo");
6: cats.add ("Dya");
7: 
```

* * *

当在使用它们的 JSP 中正确地页面导入类时，这将得到解决：

```
<%@ page import="java.util.List" %>                                                                    
<%@ page import="java.util.ArrayList" %>                                                                                                                
<%                                                                                                            
List<String> cats = new ArrayList<String>();                                                                   
cats.add ("Milo");                                                                                             
cats.add ("Dya");                                                                                            
for (Object cat : cats) {                                                                                      
   out.println (cat.toString());                                                                               
}                                                                                                             
%> 
```

正如预期的那样，这产生了两只很棒的小猫的名字的漂亮输出：

```
Milo
Dya 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T15:28:58.857

作为一种解决方法，我在包含的页面中进行了以下更改并且它有效！

*   导入并包含所有类和库。
*   在包含页面中声明的变量，通过页面上下文将它们传递给包含页面。

这可能不是完美的解决方案，而是一种解决方法，直到 GAE 团队提供正确的解决方案。

代码片段

**[index.jsp]**其中包括 add_member.jsp 和 update_member.jsp

```
<%@ page import="com.google.appengine.api.blobstore.BlobKey" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%@ page import="com.google.appengine.api.images.ImagesServiceFactory" %>
<%@ page import="com.google.appengine.api.images.ServingUrlOptions" %>

// some more application specific code here
<%
long memberId = -1;
if(request.getParameter("MEMBER_ID")!=null) {
  memberId = Long.parseLong(request.getParameter("MEMBER_ID"));
  System.out.println("memberId: "+memberId);
}
// Look at all of our members
  for (Member member : members) {
    pageContext.setAttribute("member_name", member.firstName + " " +     member.lastName);
    if(memberId == member.id) {
      currentMember = member;
      pageContext.setAttribute("current_member",currentMember);
    }
    System.out.println("member.id: "+member.id);

 %>
     <li> <a href="/index.jsp?MEMBER_ID=<%=member.id%>"> 

${fn:escapeXml(member_name)} </a></li>
  <%
      }
    %>
  </ul>
    <%
    }
  %>

</div>
<%
System.out.println("currentMember: "+currentMember);
  if(currentMember == null) {
%>

  <%@ include file="/pages/add_member.jsp" %>

<%
  } else {
    %>

    <%@ include file="/pages/update_member.jsp" %>

    <%
  }
%> 
```

**[add_member.jsp]** 在这里，我再次导入了必要的库和包以使其在 GAE 中运行。如果您在本地服务器中运行，这将不是必需的。

```
<%@ page import="com.google.appengine.api.blobstore.BlobKey" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%@ page import="com.google.appengine.api.images.ImagesServiceFactory" %>
<%@ page import="com.google.appengine.api.images.ServingUrlOptions" %>

<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<div id="main">
  <%
    String picBlobKey = request.getParameter("blob-key");
    System.out.println("picBlobKey: "+picBlobKey); 
```

**[update_member.jsp]** 与 add_member.jsp 中的更改相同。另一个需要注意的变化是读取在 index.jsp 中设置的页面上下文属性“current_member”。通过这种方式，能够共享父页面中使用的变量。

```
 <%@ page import="com.rotary.server.entities.Member" %>

<%@ page import="com.google.appengine.api.blobstore.BlobKey" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%@ page import="com.google.appengine.api.images.ImagesServiceFactory" %>
<%@ page import="com.google.appengine.api.images.ServingUrlOptions" %>

<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<div id="main">
  <%
    Member current_member = (Member)pageContext.getAttribute("current_member"); 
```

# android - 应用引擎java Android获取用户属性

> ID：15309624
> 
> 赞同：1
> 
> 时间：2013-03-09T10:21:46.700
> 
> 标签：android, google-app-engine, http-get, setcookie

我有一个从应用程序引擎 servlet 接收 JSON 数据的 android 客户端。我还能够获得身份验证 cookie。现在，我想从请求中获取用户到 servlet。

小服务程序代码：

```
 `User user = (User) req.getAttribute("user");
    String cookie = (String) req.getHeader("Cookie");
    if(user == null){
        UserService userService = UserServiceFactory.getUserService();
        user = userService.getCurrentUser();
    }` 
```

安卓帖子：

```
HttpGet get = new HttpGet(Setup.PROD_URL+"/viewselectedclass");
    SharedPreferences prefs = Util.getSharedPreferences(getBaseContext());
    String cookie = prefs.getString(Util.AUTH_COOKIE, null);
    get.setHeader("Cookie", cookie);
    client = new DefaultHttpClient();
    HttpResponse r = client.execute(get); 
```

我在 HttpGet 请求的标头中设置了 auth cookie。我相信这个cookie必须用于识别服务器上的用户。但在 servlet 中，它说用户对象为空。

如何从 Android 向 App 引擎发送请求以获取当前用户。我一定在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:16:41.657

好的，我通过创建自己的名为 MyUser 的数据存储实体来解决这个问题，将注册期间数据存储生成的 ID 发送到 android 客户端，并使用此 ID 在所有进一步的请求中识别用户。我根本没有使用 GAE 的 UserService。

# linux - linux命令ram类型

> ID：15309632
> 
> 赞同：4
> 
> 时间：2013-03-09T10:23:23.977
> 
> 标签：linux, ram

我试图通过运行命令'dmidecode'来确定我的linux机器当前安装的ram类型，但一定有错误，因为ram类型和其他东西仍然未知！？

```
# dmidecode 2.11
SMBIOS 2.4 present.

Handle 0x001A, DMI type 17, 27 bytes
Memory Device
    Array Handle: 0x0019
    Error Information Handle: Not Provided
    Total Width: 2304 bits
    Data Width: 2244 bits
    Size: 2048 MB
    Form Factor: DIMM
    Set: None
    Locator: A0
    Bank Locator: Bank0/1
    Type: Unknown
    Type Detail: None
    Speed: 1333 MHz
    Manufacturer:  
    Serial Number:  
    Asset Tag:  
    Part Number: 
```

还有其他方法可以找出这些统计信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:32:18.593

试一试`lshw`，它会给出内存描述和其他系统信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T16:20:49.553

在 SUSE Linux 中默认不安装 lshw，但 hwinfo 是。

```
hwinfo --bios 
```

给我

```
[...]
Memory Device: #38
  Location: "DIMM1"
  Manufacturer: "Hyundai"
  Serial: "0F3005F1"
  Asset Tag: "000109"
  Part Number: "HMT125U6BFR8C-H9"
  Memory Array: #36
  Form Factor: 0x09 (DIMM)
  Type: 0x01 (Other)
  Type Detail: 0x0080 (Synchronous)
  Data Width: 64 bits
  Size: 2 GB
  Speed: 1333 MHz
Memory Device Mapping: #39
  Memory Device: #38
  Array Mapping: #37
  Row: 1
  Interleave Pos: 0
  Interleaved Depth: 1
  Start Address: 0x00000000
  End Address: 0x80000000
[...] 
```

# javascript - JS：根据数据元素对列表项进行排序

> ID：15309636
> 
> 赞同：1
> 
> 时间：2013-03-09T10:23:50.520
> 
> 标签：javascript, list, sorting

**我想对包含项目的列表进行排序。排序应基于每个项目的数据元素。**

奇怪的是，如果你在你的电脑上**本地尝试它可以工作（下载我的sortingtest.html），****但它不能**在jfiddle在线工作，更重要的是在手机上！

您是否知道我的代码有什么问题，或者我怎样才能做得更好，以便它也可以在手机上运行？

**编码：**

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    function sortEntries() {    
        var elems = $('#mylist').children('li').remove();
        elems.sort(function(a,b){ 
            return parseInt($(b).data('vote')) > parseInt($(a).data('vote'));
        });
        $('#mylist').append(elems);
    }
    </script>
</head>

<body>

    <ul id="mylist">
        <li data-vote="2">Vote: 2</li>
        <li data-vote="4">Vote: 4</li>
        <li data-vote="1">Vote: 1</li>
        <li data-vote="5">Vote: 5</li>
        <li data-vote="3">Vote: 3</li>
    </ul>

    <a href="#" onClick="sortEntries();">Sort me!</a>

</body>
</html> 
```

**JFiddle：http:** [//jsfiddle.net/Q82Qu/](http://jsfiddle.net/Q82Qu/)

**HTML 文件下载：（**另存为） [https://copy.com/c0Ogb8wLtRrg](https://copy.com/c0Ogb8wLtRrg)

提前非常感谢，斯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:25:24.537

```
var elems = $('#mylist').children('li').remove(); 
```

上面的代码所做的是`DOM`从文档中删除，因此您不能将其用作`elems.sort(`

```
<html>
<head>
    <script src="js/jquery.js"></script>
    <script>
    function sortEntries()
    {
        var elems = $('#mylist').children('li');
        elems.sort(function(a,b){ 
            return parseInt($(b).data('vote')) > parseInt($(a).data('vote'));
        });
        $('#mylist').append(elems);
    }
    </script>
</head>

<body>

    <ul id="mylist">
        <li data-vote="2">Vote: 2</li>
        <li data-vote="4">Vote: 4</li>
        <li data-vote="1">Vote: 1</li>
        <li data-vote="5">Vote: 5</li>
        <li data-vote="3">Vote: 3</li>
    </ul>

    <a href="#" onClick="sortEntries();">Sort me!</a>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:33:50.927

我自己整理了一下：

关键是使用这个排序代码：

```
elems.sort(function(a,b){ 
    return $(b).attr('data-vote') - $(a).attr('data-vote');
}); 
```

# javascript - JS / jQuery 对象

> ID：15309639
> 
> 赞同：0
> 
> 时间：2013-03-09T10:23:56.987
> 
> 标签：javascript, jquery

我正在编写一个简单的通知系统，但我只是在学习 JS / jQuery（前端对我来说是新的）并且我遇到了问题。我写了以下代码：

```
 (function ($) {

    var notification = function(title, msg, duration) {
        this.element = $('<div class="notification"><h3>' + title + '</h3><div class="notification_body">' + msg + '<br/><i>(для скрытия уведомления кликните здесь два раза)</i></div></div>');
        this.element.dblclick(notification.hide);
        $('#notifications_bar').prepend(this.element.hide().fadeIn(1000));
    }

    notification.hide = function() {
        var $this = this;
        this.element.fadeOut(1000, function () {
            $this.element.remove();
        })
    }

    $.extend({
        notify: function(title, msg, duration) {
            return new notification(title, msg, duration);
        }
    });
})
    (jQuery); 
```

但是方法中有一个错误`notification.hide`：`this.element`未定义。你能解释一下错误在哪里吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:27:34.907

当您传递直接附加到对象的函数*时*，该函数会*忘记*它附加到的对象（以及`this`更改的值）。这是因为*this*的值直到函数被调用才被解析。

相反，使用与`fadeOut`函数相同的方法（存储对 的引用`this`，并在匿名函数中使用它；

```
var $this = this;
this.element.dblclick(function () {
    $this.hide();
}); 
```

或者，您可以使用`jQuery.proxy()`or `Function.prototype.bind()`（仅兼容 ES5 的浏览器）`this`在函数上强制一个值，无论它稍后附加到何处：

```
this.element.dblclick(jQuery.proxy(notification.hide, this)); 
```

# acoustics - beesel 函数我想根据压力与 x 绘制声波

> ID：15309640
> 
> 赞同：-2
> 
> 时间：2013-03-09T10:24:49.343
> 
> 标签：acoustics

C1*贝塞尔J(0, (500/166203941)*sqrt(-Pi)*sqrt(-1828243351+332407882*x))+C2*贝塞尔Y(0, (500/166203941)*sqrt(-Pi)*sqrt (-1828243351+332407882*x))

上一个是我通过枫的解决方案

我想绘制它，请帮助我提交我的作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:30:04.633

有关使用 Maple 绘图的基础知识，请参阅此页面[http://www.math.sunysb.edu/~scott/Book331/Plotting_with_Maple.html](http://www.math.sunysb.edu/~scott/Book331/Plotting_with_Maple.html)

您需要的第一类和第二类 Bessel 函数在 Maple 中作为内置函数提供：[http ://www.maplesoft.com/support/help/Maple/view.aspx?path=Bessel](http://www.maplesoft.com/support/help/Maple/view.aspx?path=Bessel)

顺便说一下，您需要指定 x 的绘图范围。

# selenium-webdriver - 线程“主”org.openqa.selenium.StaleElementReferenceException 中的异常：缓存中不存在元素

> ID：15309642
> 
> 赞同：-1
> 
> 时间：2013-03-09T10:24:54.823
> 
> 标签：selenium-webdriver

`StaleElementReferenceException`当我尝试单击循环中的元素时，我收到了。以下是代码：

```
WebDriver driver=new ChromeDriver();
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
driver.manage().window().maximize();

driver.navigate().to("URL");
WebElement Links=driver.findElement(By.xpath("//*[@id='chromemenu']"));
List <WebElement> AllLinks=Links.findElements(By.tagName("a"));
System.out.println(AllLinks.size());
//String start_xpath="//*[@id='chromemenu']/ul/li[";     
//String end_xpath="]/a";

for(int i=1;i<AllLinks.size();i++)
{
    System.out.println(AllLinks.get(i).getText());
    System.out.println(AllLinks.get(i).getAttribute("href"));
    //AllLinks.get(i).click();
        //This is where i am clicking  approach 1
    //driver.findElement(By.xpath(start_xpath+i+end_xpath)).click(); 
        //This is where i am clicking  approach 2
    //driver.navigate().back();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T17:10:21.070

问题是您在循环列表时尝试单击链接。您应该将链接保存在另一个元素中并在循环完成后单击它以避免此错误

# c# - itextsharp：复制页面上的意外元素

> ID：15309651
> 
> 赞同：0
> 
> 时间：2013-03-09T10:25:50.537
> 
> 标签：c#, itextsharp

这是拆分 PDF 文档的已知代码：

```
 try
        {
            FileInfo file = new FileInfo(@"d:\С.pdf");
            string name = file.Name.Substring(0, file.Name.LastIndexOf("."));
            // we create a reader for a certain document
            PdfReader reader = new PdfReader(@"d:\С.pdf");
            // we retrieve the total number of pages
            int n = reader.NumberOfPages;
            int digits = 1 + (n / 10);
            System.Console.WriteLine("There are " + n + " pages in the original file.");
            Document document;
            int pagenumber;
            string filename;

            for (int i = 0; i < n; i++)
            {
                pagenumber = i + 1;
                filename = pagenumber.ToString();
                while (filename.Length < digits) filename = "0" + filename;
                filename = "_" + filename + ".pdf";
                // step 1: creation of a document-object
                document = new Document(reader.GetPageSizeWithRotation(pagenumber));
                // step 2: we create a writer that listens to the document
                PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(name + filename, FileMode.Create));
                // step 3: we open the document
                document.Open();
               PdfContentByte cb = writer.DirectContent;
                PdfImportedPage page = writer.GetImportedPage(reader, pagenumber);
                int rotation = reader.GetPageRotation(pagenumber);
                if (rotation == 90 || rotation == 270)
                {
                    cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(pagenumber).Height);
                }
                else
                {
                    cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
                }
                // step 5: we close the document
                document.Close();
            }
        }
        catch (DocumentException de)
        {
            System.Console.Error.WriteLine(de.Message);
        }
        catch (IOException ioe)
        {
            System.Console.Error.WriteLine(ioe.Message);
        } 
```

这是一个拆分页面的左上角： ![在此处输入图像描述](../Images/35f71d8dcb25530a4d479573062641ef.png)

你可以在这里（和其他角落）看到意想不到的线条、圆形……我怎样才能避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:57:55.103

正如之前多次解释的那样（[ITextSharp 包括输入文件中的所有页面](https://stackoverflow.com/questions/15218126/itextsharp-include-all-pages-from-the-input-file/15218677#15218677)，[Itext pdf Merge : Document overflow outside pdf (Text truncated) page and not displayed](https://stackoverflow.com/questions/14770942/itext-pdf-merge-document-overflow-outside-pdf-text-truncated-page-and-not-di/14771651#14771651)，等等），您应该阅读我的[iText in Action](http://itextpdf.com/book)一书的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)（您可以在[此处](http://tinyurl.com/iiacsCH06)找到示例的 C# 版本）。

您正在使用和的组合`Document`来拆分 PDF。请告诉我是谁让你这样做的，这样我就可以诅咒启发你的人（因为我已经回答了数百次这个问题，而且我已经厌倦了重复自己）。这些类不是该工作的好选择：`PdfWriter``PdfImportedPage`

*   你失去了所有的交互性，
*   如果页面是横向的，您需要自己旋转内容（您已经发现了这一点），
*   您需要考虑原始页面大小，
*   ...

您的问题类似于[Itext pdf Merge : Document overflow outside pdf (Text truncated) page and not displayed](https://stackoverflow.com/questions/14770942/itext-pdf-merge-document-overflow-outside-pdf-text-truncated-page-and-not-di/14771651)。显然，您尝试拆分的原始文档包含一个 MediaBox 和一个 CropBox。查看原始文档时，仅显示 CropBox 内的内容。当您查看您的副本时，MediaBox 内的内容会显示出来，显示“打印机标记”。这些打印机标记显示了在发布环境中需要剪切页面的位置。打印书籍或杂志时，打印内容的页面通常比最后一页大。多余的内容在组装书籍或杂志之前被剪掉。

长话短说：阅读文档，替换`PdfWriter`为`PdfCopy`，替换`AddTemplate()`为`AddPage()`.

# algorithm - 找到与 N 互质的某个数的修正阶乘 N

> ID：15309655
> 
> 赞同：0
> 
> 时间：2013-03-09T10:26:16.137
> 
> 标签：algorithm, math, factorial, modular-arithmetic

给定两个数`N`和，`p`让是除以`k`的最大幂。互质数也是如此。`p``p^k``N!``d = N!/(p^k)``d``p`

我如何找到**`d mod p`**？直接迭代将是不切实际的，因为`N!`在高时会非常`N`高。需要更有效的算法来找到表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:04:05.243

这是 O(N) 算法：

```
int d=1;
for(int i=1;i<=N;++i)
{
    d*=i;
    while(d%p==0)
      d/=p;
    d=d%p;
} 
```

它不需要存储大量数字，因此可能是可以接受的。我怀疑 O(p) 算法是可能的（因为数字会在每个 k*p 之后重复），但是代码会更复杂一些。

# java - webview没有正确显示网站android

> ID：15309659
> 
> 赞同：0
> 
> 时间：2013-03-09T10:27:04.727
> 
> 标签：java, android

嗨，我使用过 webview，下面是我的代码

```
 DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int height = displaymetrics.heightPixels;
    int width = displaymetrics.widthPixels;

    RelativeLayout linLayout = (RelativeLayout) findViewById(R.id.relativeLayout);
    myWebView = new WebView(this); 

    linLayout.addView(myWebView, new RelativeLayout.LayoutParams(width, height)); 
```

我想根据屏幕大小调整 webview 的宽度和高度，但此代码无法正常工作，并且 webview 无法正确显示

**UN-USED SPACE 是我手动写的，它是不应该显示的空白空间**

![在此处输入图像描述](../Images/c7f520d369f4ac38f5b71576b7df7a14.png)

任何机构都可以解决吗？如何根据屏幕大小修复 webview 大小

根据屏幕尺寸设置 webview 我从[如何调整与 android 中的屏幕尺寸相关的 webview 宽度得到答案？需要破解](https://stackoverflow.com/questions/6040886/how-to-adjust-the-webview-width-relating-to-screen-size-in-android-need-a-hack)，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:31:01.713

试试这个，我想这就是你想要的

```
getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        mWebView = new WebView(this);
        mWebView.loadUrl("http://google.com/");
        mWebView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        this.setContentView(mWebView);
    } 
```

对于缩放，我认为您可以尝试这段代码，它对我有用

```
Display display = getWindowManager().getDefaultDisplay();
int width=display.getWidth();

String data="<html><head><title>Example</title><meta name=\"viewport\"\"content=\"width="+width+", initial-scale=0.65 \" /></head>";
data=data+"<body><center><img width=\""+width+"\" src=\""+url+"\" /></center></body></html>";
webView.loadData(data, "text/html", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:40:03.500

在java中使用以下代码

```
setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.google.com"); 
```

和xml中的代码

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/webView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/> 
```

# arrays - 获取唯一父母的孩子

> ID：15309661
> 
> 赞同：1
> 
> 时间：2013-03-09T10:27:23.943
> 
> 标签：arrays, actionscript, parent, hittest

我目前正在为一个项目编写一些代码。问题是针对具有独特父母的孩子。例如。假设我有一个人们可以移动的盒子`box_mc`和 3 个可以跳跃的平台：

*   平台_1
*   平台_2
*   平台_3

所有这些平台都有一个名为 hit 的子元素。

*   平台_1
    *   打
*   平台_2
    *   打
*   平台_3
    *   打

我使用一个数组和一个`for each`语句来检测是否`box_mc`命中了其中一​​个平台子节点。

```
var obj_arr:Array = [Platform_1, Platform_2, Platform_3];
for each(obj in obj_arr){
   if(box_mc.hitTestObject(obj.hit)){
      trace(obj + " " + obj.hit);
      box_mc.y = obj.hit.y - box_mc.height;
   }
} 
```

obj 似乎输出了它正在命中的唯一父级，但 obj.hit 输出了命中，所以我的理论是它正在将 y 的变化应用于舞台中所有称为 hit 的子级。是否可以仅检测特定父母的孩子？

再次提前感谢各位！

# ios - 升级 iOS 应用程序

> ID：15309666
> 
> 赞同：0
> 
> 时间：2013-03-09T10:27:51.183
> 
> 标签：ios, objective-c, cocoa-touch, ios5, ios4

我想将我现有的应用程序升级到**iOS 5.0 及更高版本。**

我想要关于要点的**建议和详细的指导方针。**我应该对现有代码进行哪些更改以使其与新的 iOS 编码标准完全兼容。

例如

*   我是否应该更改所有外部框架和我的自定义类以使其与 ARC 兼容？
*   我应该对 sqlite 数据库创建进行更改。
*   我应该更换 Twitter 和 Facebook 的旧框架吗？
*   我应该对图形进行哪些更改？

**简而言之，请提供对使旧应用程序完全兼容新 iOS 标准非常重要的指南和建议。**

> 伙计们感谢您对此问题的评论和回复。
> 
> 通过查看您的回复，我认为你们只关注上述几点。我想从你的经验中得到一般性的建议。即我们应该在 info.plist 中更改哪些内容，应该在图形中进行哪些更改。我们如何通过添加自动 ARC 支持等来改进应用程序......
> 
> 主要是我们如何使它兼容不同分辨率的 iPhone / iPad（即 iPhone 5 和其他设备）。

如果可能，请提供新 iPhone 5 设备和 iPad Mini 设备分辨率的图形更改指南。

您的帮助/建议/指南将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:55:35.187

> 我是否应该更改所有外部框架和我的自定义类以使其与 ARC 兼容？

这完全取决于你。ARC 是一种编译时功能，旨在消除手动内存管理的任务。它并没有通过任何想象来消除它，但它比我们作为程序员大多数时间希望编写的任何东西都要安全几英里。可以在应用程序中混合使用 ARC 和非 ARC 框架和库。

> 我应该对 sqlite 数据库创建进行更改。

iOS 一直附带 libSQLite3，因此您绝对不需要任何工作来“升级”应用程序的这一方面。您可能会考虑迁移到核心数据，因为这又一次避免了与 SQLite 的大部分接口。

> 我应该更换 Twitter 和 Facebook 的旧框架吗？

再次，这取决于。如果您计划支持不附带新的 iOS 社交功能和框架的旧操作系统，那么我会保持原样。新的 API 比访问每个给定社交服务的实际 API 的限制要大得多，但它也更容易实现，尤其是对于简单的墙贴之类的东西。

> 我应该对图形进行哪些更改？

图形文件必须（最好）有 2 种风格，并为新 iPhone 提供可选的第三种格式：标准、视网膜和拉伸视网膜。虽然选择视网膜图形是完全可选的，但建议您提供高分辨率资产以提供最佳用户体验。关于实际的图形库（CoreGraphics），框架处理绘制到屏幕上的元素的缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:38:22.723

**- 我应该更改所有外部框架和我的自定义类以使其与 ARC 兼容吗？**

> 如果您的框架已经过时，是的，您需要对其进行更新，使其与 iOS 5 及更高版本兼容。对于 ARC，它不是必需的。如果您不想处理内存管理，那么您可以。

**- 我应该更换 Twitter 和 Facebook 的旧框架吗？**

> 是的，请。

**- 我应该对图形进行哪些更改？**

> 您需要更改显示的图形。谷歌一下。

# ios - 无效的可执行文件大小 - 来自 iTunes Connect

> ID：15309671
> 
> 赞同：5
> 
> 时间：2013-03-09T10:28:46.023
> 
> 标签：ios, xamarin.ios, app-store-connect

我正在 iTunes 上上传我的 iOS 应用程序。我正在使用 MonoTouch 为 iOS 编译我的 LibGdx 游戏。在 Android 中，它几乎不是 7-8mb。但是当我在 iTunes AppStore 上上传时，它会达到 78 mb。我不知道为什么？请告诉我。

我也收到了来自 Apple 的这个错误。

亲爱的开发者，

我们发现您最近交付的“Run Panda Run: Racing”存在一个或多个问题。要处理您的交付，必须更正以下问题：

无效的可执行文件大小 - 72037504 字节的可执行文件大小超过了 60 MB 的最大允许大小。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T16:06:31.833

没有更多细节很难给出*明确*的答案。有**很多**事情会影响应用程序的大小。让我们从**基本**的.

**您应该检查的内容：**

*   首先，确保您的应用程序**没有使用****Don't link**构建。这将创建非常大的应用程序，因为您将使用 Xamarin.iOS 提供的*几乎*完整的 .NET 框架进行 AOT；

*   其次，确保您正在构建单一架构 (ARMv7)。FAT 二进制文件（例如 ARMv7 和 ARMv7s）被构建两次并且需要两倍的空间；

*   第三，确保您没有启用**Debug**构建（可以在 Release 构建中启用，它是一个复选框）。这将创建更大的二进制文件来支持调试；

*   第四，确保您使用的是**LLVM**编译器。编译需要更多时间，但会生成更好（更小）的代码；

这些初始检查很容易做到，并且是获得非常大的二进制文件的**最常见**原因。

要了解大小来自哪里，您需要知道应用程序是如何构建的。

*   Android 和 iOS 版本的**主要**区别在于 iOS 上不允许 JIT'ing（即时编译）（Apple 的规则）。

*   这意味着代码必须经过 AOT（提前编译），并且该过程会创建更大的可执行文件（因为 IL 比本地代码更紧凑）；

*   如果您的代码是泛型繁重的，那么最终的二进制文件可能会变得非常大，因为它需要本地编译每个泛型可能性（许多情况可以共享，但值类型不能）。

**你可以做些什么来减小尺寸：**

*   首先尝试减少*托管*代码的大小。最简单的方法是在每个程序集上启用链接器，即在您的项目选项中**链接所有程序集。**

许多人认为链接他们自己的代码不值得——因为他们知道在运行时会需要它（因此链接器无法删除它），否则他们就不会编写该代码。

这是对的一半。链接器*可能*无法删除您的大部分应用程序代码**，但**如果您使用的是第 3 方程序集，则它们不太可能 100% 被使用。链接器可以删除该额外代码（也可以从 SDK 中删除为支持该不需要的代码而保留的所有代码）。*您拥有的共享*代码越多，链接器可以为您提供的帮助就越多。

更少的 IL 代码意味着更快的 AOT 时间，这意味着更快的构建**和**更小的最终二进制文件（包括可执行文件大小）。

注意：有很多文档和博客文章介绍了如何控制链接器以跳过某些程序集、某些类型或方法被处理/删除。

*   第二次尝试减少你的*原生*大小。如果您正在构建本机库，请再次查看它们，因为它们将**静态**（非动态）链接到您的最终二进制文件（iOS 应用程序的另一个规则）。其中一些可能不值得（在功能方面）在您的最终二进制文件中占据重要地位（并且可能有*更轻*的替代品）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-28T21:28:17.840

我遇到了同样的问题，但在我的情况下，我在 info.plist 中将最低操作系统版本设置为 8，从而导致更大的 .ipa 文件。我将其更改为版本 10，并且能够通过尺寸要求。即使是10也有点慷慨

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-07T16:01:20.303

不应启用调试，因为它会使构建变得不必要地大。

[![在此处输入图像描述](../Images/1e4b5903d42cd70c512c6c101676c275.png)](https://i.stack.imgur.com/87jtC.png)

有关更多信息，请参阅：[https ://docs.microsoft.com/en-us/xamarin/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store?tabs=windows](https://docs.microsoft.com/en-us/xamarin/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store?tabs=windows)

# c# - 带有字段或成员变量的 C# 内存泄漏

> ID：15309674
> 
> 赞同：0
> 
> 时间：2013-03-09T10:29:13.297
> 
> 标签：c#

我有一个对象 B，它通过它的构造函数接收一个对象 C。现在 C 在 A 的构造函数中创建并设置为字段/成员变量。在 AI 内部创建 B 的多个实例并将它们插入到列表中。后来我清除了这个列表.........我的问题是我是否有内存泄漏，因为 C 在 A 中仍然存在，A 当然还存在。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:33:57.457

C# 具有自动垃圾回收功能，因此框架会发现其中一个对象不再使用，并释放未使用对象的内存。

如果您在清除 B 列表时询问对象 C 是否也被取消分配，我敢打赌它不会发生，因为您仍然通过 A 的属性（字段）引用它。

# phpmyadmin - 如何在 wamp 上设置 phpmyadmin 的设计器选项卡

> ID：15309675
> 
> 赞同：3
> 
> 时间：2013-03-09T10:29:15.867
> 
> 标签：phpmyadmin, wamp

我搜索了网络，观看了 youtube 视频，但无济于事。我正在寻找 phpmyadmin 上的设计器选项卡，在那里我可以像在 ms Access 中一样查看表关系。我已经设置了我的 config.inc.php，就像我在无数网站上看到的一样，运行 sql 来创建 phpmyadmin db，我只是没有得到设计器视图的选项卡。

我使用`config.sample.inc.php`了文件并取消了所有这些行的注释：

```
/* User used to manipulate with storage */

$cfg['Servers'][$i]['controlhost'] = 'localhost';
$cfg['Servers'][$i]['controluser'] = 'root';
$cfg['Servers'][$i]['controlpass'] = 'root';

/* Storage database and tables */

$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs'; 
```

然后将文件保存在 config.inc.php 上，登录并收到此错误。

**“phpMyAdmin配置存储未完全配置，部分扩展功能已停用。了解原因点击这里。”**

单击“此处”将我带到此页面，我猜这基本上是在告诉我一切都已禁用

![在此处输入图像描述](../Images/31f6b4ad76a5a75628fec3d2b5b50be3.png)

这就是我所追求的。它必须能够完成。我显然错过了一些东西

![在此处输入图像描述](../Images/a20faa0c1cf82ea949544aa2b12a3d5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:31:52.253

WAMP 需要重新启动。而且您只会在 db 页面上看到设计器选项卡，而不是在 table 页面上。否则我根据这个 YouTube 视频所做的一切都有效

[http://youtu.be/hPYLbaXa35o](http://youtu.be/hPYLbaXa35o)

# c++ - D3DX 或 DXTK 库是否足以传输稀疏虚拟纹理（Megatextures）？

> ID：15309676
> 
> 赞同：2
> 
> 时间：2013-03-09T10:29:16.023
> 
> 标签：c++, io, directx, textures

我正在尝试在 DirectX11 中实现这种技术：[http ://www.youtube.com/watch?feature=player_embedded&v=p49vOX-_LyU#](http://www.youtube.com/watch?feature=player_embedded&v=p49vOX-_LyU#)！据我所知，我必须做一个传递，我只渲染几何并将它们的 UV 坐标映射到实际分辨率的大约 1/10 或 1/20 的渲染目标。也许是 RWTexture2D，然后读回来在 CPU 上。但是，就流式传输而言，我不明白该怎么做。我怎么知道哪个模型需要哪个 megatexture。我的问题听起来有点令人困惑，可能是因为我不确定我要做什么我在这里做。任何帮助将不胜感激。我阅读了一些关于它的论文，他们建议使用 JPEG 压缩。我可以使用多种压缩，但主要问题是我不知道如何快速流式传输特定部分对应于给定 UV 坐标的纹理。

# java - Android：片段生命周期中的方法

> ID：15309683
> 
> 赞同：3
> 
> 时间：2013-03-09T10:30:35.850
> 
> 标签：java, android, android-fragments, android-viewpager, android-lifecycle

我正在寻找 Fragment Lifecycle 中的一种方法，但我不确定是哪一种。

这是我的情况：我在 ViewPager 中有一个片段。Fragment 显示一个包含一些信息的列表。我在 Fragment 的`onCreateView()`. 当用户打开不同的 Activity（在本例中为设置）并更改某些设置时，Fragment 中的 List 必须显示的信息会发生更改。当用户使用 Back 按钮返回 Fragment 时，`onCreateView()`不会重新调用，因此不会更新 List 中的信息。

我的问题是：`onCreateView()`当用户从不同的Activity返回到片段时，不会调用-method，但是这里调用的是哪个方法？我需要知道这一点，因为这样我就可以在该方法中填写列表。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:44:54.140

重要且不明显的一点是，Fragment 的 onCreateView() 不仅会在您使用此 Fragment 选择 Tab 的情况下被调用。所以**在使用 ViewPager() 时不要依赖 Fragment 的 onCreateView()**。当您选择选项卡时，Android 会创建 sible 视图（缓存它们）或制作类似的东西。

当用户在 ViewPager 中选择正确的选项卡时，您应该调用您的更新方法（不记得确切，但希望它有所帮助）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:38:34.843

`onResume()`是简单的答案，当用户回来时调用。有关更多详细信息，请参阅此处的生命周期[FragmentLifecycle](http://developer.android.com/guide/components/fragments.html)

# python - 如何系统地识别 Python 在其可访问的包/模块树中的依赖关系？

> ID：15309685
> 
> 赞同：2
> 
> 时间：2013-03-09T10:30:41.533
> 
> 标签：python, python-2.7, python-3.x, pythonpath

*问题：*如何系统地探测解释器在任何时候都涉及的文件（如在调试模式下）。

当一切都失败时，我收到错误消息。我要求的是相反的：一切正常，但我不知道与它的使用相比我有多少多余的垃圾，即使我可以想象像 pynotify 这样的东西可能可以追踪它。

*语境：*

我整个上午都在反复试验以使程序包正常工作。我确定我已将相关的 python 包复制到至少 3 个目录中，并`setx -m path`用垃圾严重弄乱了我的窗口。现在我想知道如何在不破坏任何依赖关系的情况下将其全部清理干净，并*实际从过程中学习*。

我不可能是唯一对此感到疑惑的人。一些有才华的测试开发人员必须编写了一个脚本/包：

```
import everything from everywhere
check for all dependencies
E = list(errorMessages)
L = list_of_stuff_that_was_used
print L
print E 
```

因此，如果我存储了不在 中的内容`L`，我可以将其删除。但当然，探测必须彻底，以耗尽所有可访问的文件（或至少积极使用的目录）。

问题**不是**关于什么：我对`sys.path`. 这是微不足道的。

*更多背景：*

我从[The Hitchhikers Guide to Packaging](http://guide.python-distribute.org/)了解到这个问题的未来正在被解决，但它并没有探究过去。那么随着从 Python 2xx 到 3xx 的过渡，这个问题一定会变得越来越重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:33:02.827

python 的动态特性使其成为一项几乎不可能完成的任务。

例如，函数也可以导入。您要运行所有模块中的所有代码吗？

然后是向后兼容性测试；如果不存在则导入，`pysqlite2`如果当前版本的 Python 中不存在`sqlite3`则使用后向端口模块`collections.Counter`等。有特定于平台的模块（`os.path`是`posixpath`，`ntpath`（相同的代码但重命名）或`riscospath`取决于当前平台），以及整个- sale 导入到主模块中（`posix`, `nt`, `os2`,`ce`和`riscos`all 可以由`os`模块使用，具体取决于平台来提供功能）。

使用的包`setuptools`声明它们的依赖关系并且可以通过`pkg_resources`库发现。这是你*可以*合理发现的极限。

# node.js - express.js 如何显示图像？

> ID：15309688
> 
> 赞同：4
> 
> 时间：2013-03-09T10:30:58.673
> 
> 标签：node.js

我在 /public 文件夹中有图像，我想显示它们..就像这样：`<img src="a.jpg">`

我的 app.js 代码

```
var express = require('express')
  , app = express()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server);

server.listen(8080);    
app.use('/public', express.static(__dirname + "/public")); 
```

如果我在本地主机中打开它，这个错误仍然显示

```
NetworkError: 404 Not Found - http://localhost:8080/public/a.jpg" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-11T00:07:05.123

在您的情况下，编写以下内容就足够了：

```
app.use(express.static('public')); 
```

它将直接服务于公用文件夹。

此路径中的图像`/public/images/somePhoto.png`将如下所示：`http://localhost:8080/images/somePhoto.png`

来源：[https ://expressjs.com/en/starter/static-files.html](https://expressjs.com/en/starter/static-files.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:33:28.000

您需要将 /public/ 位从您的 URL 放到您的图像中。
所以它变得只是`http://localhost:8080/a.jpg`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-11T11:29:34.950

在 express 中处理静态文件您只需将保存静态资产的目录的名称传递给 express.static 中间件即可开始直接提供文件。例如，如果您将资产保存在名为 public 的文件夹中，您可以 `app.use(express.static('public'))`按如下方式使用，我的图像在`public\images`

```
var express = require('express');
var app = express();
app.use(express.static('public'));
app.get('/', function (req, res) {
  res.send('Hello World');
})
var server = app.listen(8081, function () {
var host = server.address().address
var port = server.address().port
console.log("Example app listening at http://%s:%s", host, port)
}) 
```

将上面的代码保存到 server.js

`$ node server.js`

现在在任何浏览器中打开[http://127.0.0.1:8081/images/logo.png](http://127.0.0.1:8081/images/logo.png)并显示图像

# java - 最终变量和编译时间常数之间的差异

> ID：15309692
> 
> 赞同：28
> 
> 时间：2013-03-09T10:31:10.687
> 
> 标签：java, compile-time-constant

最终变量和编译时常量有什么区别？

考虑以下代码

```
final int a = 5;
final int b;
b=6;
int x=0;
switch(x)
{
     case a: //no error
     case b: //compiler error
} 
```

这是什么意思？最终变量何时以及如何赋值？运行时会发生什么，编译时会发生什么？为什么我们要给 switch 一个编译时间常数？java的哪些其他结构需要编译时间常数？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-09T10:52:23.733

问题是，**所有`case:`**语句在编译时都**必须是最终的。**你的第一句话*是终极的*。`a`100% 将是`5`.

```
final int a = 5; 
```

但是，*对于*`b`. 如果周围有一个 if 语句`b`怎么办？

```
final int b;
if(something())
   b=6;
else
   b=5; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-09T10:54:04.703

> 这是什么意思？

这意味着“b”不是编译时常量表达式，JLS 要求它是。

> 最终变量何时以及如何赋值？

形式上，当赋值语句或初始化程序被执行时。

但在实践中，如果`final`声明了一个编译时常量，则表达式会在编译时进行计算，并且它的值是硬连接到代码中的。

> 运行时会发生什么，编译时会发生什么？

往上看。

> 为什么我们要给 switch 一个编译时间常数？

因为 JLS*需要*它。

字节码编译器有必要检查 switch 语句的格式是否正确；即开关常数的值不会发生冲突。它还允许 JIT 编译器生成针对开关常量的实际值进行优化的代码。

> java的哪些其他结构需要编译时间常数？

没有一个我能想到的，从我的头顶。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T11:00:42.427

从编译器的角度来看，您正在尝试使用**可能未初始化**的变量 b 。switch 语句被编译成**JVM 字节码 tableswitch 或 lookupswitch**，这要求**case 语句中使用的值既是编译时间常数又是唯一的。**

```
final int a = 4; // compiler is sure a is initialized
final int b;// variable b is not guranted to be assigned 
```

例如，虽然这条语句最终会初始化 b ，但编译器无法检测到它。

```
if (a < 4) b= 10;
if (a >= 4) b = 8 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T10:34:18.113

switch 语句需要一个常量。由于最终变量可以延迟初始化，并且编译器无法确定 b 在 case 分支中有值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-09T11:02:19.673

`final int b;`可以分配一次并且值不确定，这将根据条件在**运行时决定。**这就是原因，即使是**最终**变量，它也不是**编译时间**常量，尽管它将是一个**运行时间**常量并且案例需要编译时间常量。

# android - com.google.android.gms 在哪里？

> ID：15309694
> 
> 赞同：20
> 
> 时间：2013-03-09T10:31:13.573
> 
> 标签：android, google-play-services, google-maps-android-api-2

今天我将 Android SDK 组件更新到最新版本，不知何故整个 com.google.android.gms 包不见了。相反，只有 com.google.android.maps 的类与 gms 包中的类不同。这是谷歌的重大变化还是我做错了什么？我一直在使用 GoogleMap 和 LatLng 类来处理谷歌地图，现在我的项目中出现了错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T11:46:38.857

> 这是谷歌的重大变化还是我做错了什么？

`com.google.android.gms`来自 Play Services SDK，您将其作为 Android 库项目附加到您的应用程序项目中。请检查您的环境以确保您拥有 Play Services 库项目的有效副本，并且您的应用程序项目仍然指向它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-10T00:18:46.740

First off, if you did **not** run any updates with Android SDK Manager make sure the google-play-services-lib' project is open in eclipse. If this doesn't fix your problem then proceed. Note: eclipse(v22.0.1-685705) will close google-play-services-lib project with a 'close unrelated projects' command. The google-play-services-lib project must be open.

I figured this problem out. Initially, you/I installed Google Play services in eclipse directly from the SDK Path, (SDK Path is displayed on the top left of Android SDK Manager). When you updated Google Play services with the Android SDK Manager it deleted the .project file and now eclipse can't find the 'google-play-services-lib' project and your development project fails to compile. :-(

**Solution:**

The basic ideal of this solution is to clean out the old 'google-play-services-lib' project in eclipse, which is now defunct and install a new one with the project copied from the SDK path.

**Delete the old project:**

In eclipse delete any 'google-play-services-lib' project. (In Eclipse see: Project properties-> Android -> Library.)

In In Eclipse see: Project properties-> Android -> Library delete the old entry for 'google-play-services-lib' project. This will most likely have an red 'X' on it.

**Install a new one:**

Follow the instruction from Google to install 'google-play-services-lib' project. These instruction specify to copy the project out of the SDK install folder; and then how to set up the projects.

[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

**Notes:**

Your name for 'google-play-services-lib' may be different.

The key to remember is that Google play services is not a jar file. It is a project in eclipse. Your, development project references the google-play-services-lib project.

By copying the project folder from the SDK path to another location, this will keep the Android SDK Manager from deleting your eclipse .project file, and causing this problem. The draw back is if you would like to update google play services, you have to remember to do all the steps again.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T05:21:18.830

您将需要 Google Play 服务 sdk。如果您使用 sdk for eclipse，您可以从 Android SDK Manager 安装它。
安装 Google Play 服务后，您可以从 ..\sdk\extras\google\google_play_services 文件夹将库项目导入您的 Workspace。清理并构建它。
现在您可以转到有问题的项目的属性并在 Android 部分选择库项目。
这应该工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T07:43:06.583

当前库位于 Google 存储库中。要启用它，请确保您已使用 Android SDK Manager 下载它（一直到列表的最底部）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T19:48:39.893

如果使用 Android Studio，您可以通过向文件添加依赖项来添加 Google Play 服务以使用 Google Android Maps v2 `build.gradle`。

```
dependencies {
    compile 'com.google.android.gms:play-services:3.1.36'
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-14T18:19:44.377

**对于`android create project [...]`基于 ant CLI 的项目**

类似于：[如何在非 Eclipse Android 应用程序中正确包含支持库](https://stackoverflow.com/questions/17659624/how-to-correctly-include-the-support-library-in-non-eclipse-android-application)

我能找到的最好的是[https://stackoverflow.com/a/30689979/895245](https://stackoverflow.com/a/30689979/895245)：

1.  在项目目录中复制粘贴`android-sdk/extras/google/google_play_services/libproject/google-play-services_lib`目录
2.  `cd`进入它并运行`android update project -p . -t android-22`
3.  添加`<property name="android.library.reference.1" value="./google-play-services_lib"/>`到您的`build.xml`.

`android`您可以使用GUI 工具或使用此 CLI 方法安装 extras ：从命令行[下载 Android 支持库](https://stackoverflow.com/questions/23436564/downloading-the-android-support-library-from-command-line)

如果你只是复制粘贴到项目`.jar`的目录`<sdk>/extras/google/google_play_services/libproject/google-play-services_lib/libs/google-play-services.jar`下`libs/`，它会编译但在运行时会中断，因为 required`res/values/version.xml`不包含在`.jar`.

# c# - 从服务器端线程更新面板

> ID：15309695
> 
> 赞同：3
> 
> 时间：2013-03-09T10:31:39.597
> 
> 标签：c#, asp.net, ajax, multithreading, updatepanel

我正在尝试使用 aspx 开发聊天。我已经让它与 asmx + winform 一起使用，但现在我遇到了 asmx + aspx 的问题。

基本上我想要做的是`CheckForMessages`每两秒调用一次 WebMethod，如果有消息，将它们添加到更新面板内的列表框中并执行`UpdatePanel1.Update();`.

问题是显然我不能像在我的 winform 中那样使用线程来执行此操作。

```
void check() {
  while (true) {
    Thread.Sleep(2000);
    string message = CheckForMessages();
    if (message != "") {
      ListBox1.Items.Add(message);
      UpdatePanel1.Update();
    }
  }
} 
```

我这样开始线程：

```
protected void Page_Load(object sender, EventArgs e) {
  timer = new Thread(new ThreadStart(check));
  timer.Start();
} 
```

它不会抛出异常或任何东西，程序按预期运行。调用 Web 服务，如果有消息则返回一个字符串，线程将消息添加到列表中并调用`UpdatePanel1.Update();`. 然而面板没有更新。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:26:35.353

在 ASP.Net 中，您可以使用定时器控件和更新面板。

```
<asp:UpdatePanel runat="server" ID="uxUpdatePanel" UpdateMode="Conditional" EnableViewState="true">
        <ContentTemplate>
            <div>
                <asp:Label ID="Label1" runat="server" style="display:none;"><%=GetMessageLog()%></asp:Label> 
                <asp:ListBox runat="server" ID="ListBox1" EnableViewState="true">

                </asp:ListBox>
            </div>           
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="uxTimer" EventName="Tick" />
        </Triggers>
    </asp:UpdatePanel>
    <asp:Timer runat="server" ID="uxTimer" Interval="2000">
    </asp:Timer> 
```

在代码隐藏中，您可以编写如下代码：

```
public string GetMessageLog()
{
    string message = CheckForMessages();
    if (message != "") {
      ListBox1.Items.Add(message);      
    return DateTime.Now.ToLongTimeString();
} 
```

这应该适合你。但我会推荐你​​使用 Javascript 和 JQuery 来通过 setTimeout 函数异步调用 Web-Service。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:56:44.610

你应该看看 SignalR.net。Jabbr.net 基于 signalR 并且正是您所需要的。[https://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T17:01:14.137

是的，Vishal ...也许不那么复杂：

```
<asp:UpdatePanel ID="updatePanelPromptB" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Label ID="labelPlayback" runat="server"></asp:Label>
</ContentTemplate> 
<Triggers>
<asp:AsyncPostBackTrigger ControlID="timerPromptB" EventName="Tick" />
</Triggers>
</asp:UpdatePanel>
<asp:Timer runat="server" ID="timerPromptB" OnTick="timerPromptB_Tick" Enabled="false" Interval="4000" />

private void promptBottom(string text)
{
    labelPlayback.Text = text;
    updatePanelPromptB.Update();
    timerPromptB.Enabled = true;
}
protected void timerPromptB_Tick(object sender, EventArgs e)
{
    labelPlayback.Text = "OK";
    timerPromptB.Enabled = false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:48:32.200

与其服务器主动向客户端推送更改，不如尝试相反的做法：让客户端主动查询服务器，并相应地更新其状态。

一种方法是创建一个按钮来手动查询服务器。在您验证它是否有效后，使用 css 将按钮隐藏，并设置一个函数以定期单击该按钮。`setInterval`您可以为此使用 javascript 。

要单击 javascript 中的按钮，您可以执行以下操作：

```
setInterval(function(){ document.getElmtById(“&lt;%= theButton.ClientID %>").click(); }, 2000); 
```

上面的代码应该`theButton`每 2 秒点击一次。

# javascript - JS：从函数接收到的参数与实际参数不同

> ID：15309700
> 
> 赞同：1
> 
> 时间：2013-03-09T10:32:08.810
> 
> 标签：javascript

我正面临一个奇怪的情况。我正在向该方法发送一个参数。在接收端我得到了不同的参数。

这是屏幕截图。

![在此处输入图像描述](../Images/aba4ccb564670e53e9536e15abee0d41.png)

**JS代码：**

```
 <script>
var defaultOptions = {
    chart:{
        "type":"series",
        "container":"#container",
        "width":700,
        "height":500,
        "margin":{
            "left":100 , top:50 , right:10 , "bottom":50
        }
    }

};

var Util = {
    /**
     *@return true if the given object is an valid one.
     */
    valid: function(obj){
        return obj !== undefined && obj !== null;
    },
    /**
     *@param a {object} to extend.
     *@param b {object} 
     *@return {object}
     */
    extend:function(a , b){
        var m;
        if(!Util.valid(a)){
            a = {};
        }
        for(m in b){
            a[m] = b[m];
        }
        return a;
    }

};

function Chart(opt){
    console.log(opt);
    /**
     *Setting default chart options.
     */
    Util.extend(opt , defaultOptions);

}

var ChartLite = {}; 

Util.extend(ChartLite , {
    Chart:Chart
});
</script>

<script>
$(function(){
    var chart = new ChartLite.Chart({});
});
</script> 
```

JS 小提琴链接：http: [//jsfiddle.net/993Wu/15/](http://jsfiddle.net/993Wu/15/)

**发送**：{}。

**预期**：{}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:35:20.417

这是因为 的 输出`console`显示 了 对象*现在*的 状态, 而 不是*你 调用 时`console.log`*的 状态.

获取对象*当前*状态的最佳方法是`JSON.stringify()`在输出之前获取它；请注意，这将删除所有函数和非 JSON 属性。

# java - 如何使用 keystone API 扩展发送 JSON 格式请求“向用户添加全局角色”？

> ID：15309704
> 
> 赞同：1
> 
> 时间：2013-03-09T10:32:46.423
> 
> 标签：java, json, api, openstack, keystone

我想使用 java 发送一个 JSON 格式的请求来为 openstack 用户添加一个管理员角色，我看到有一个提供`"add global role to user"`API 的 keystone API 扩展：

这是链接： [2.1.1.5。为用户添加全局角色。](http://docs.rackspace.com/openstack-extensions/auth/OS-KSADM-admin-devguide/content/PUT_addUserRole_v2.0_users__userId__roles_OS-KSADM__roleId__Admin_API_Service_Developer_Operations-d1e1357.html)

但我不知道如何以正确的方式通过 JSON 格式发送，以下是我的代码：我可以`"key_admin_url"`用另一种方法获取，就像：`130.237.215.18:35357/v2.0`130 之前有 http。

user_id 和 role_id 是两个字符串。

```
 //create connection
    public static void addRole(){
    try{
    URL url = new URL(key_admin_url + "/users/" + "user_id" + "/roles/OS-KSADM/" + "role_id");
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setRequestMethod("PUT");
        connection.setUseCaches(false);
        connection.setInstanceFollowRedirects(true);
        connection.setRequestProperty("Content-Type",
                "application/json");
        connection.setRequestProperty("X-Auth-Token",
                "012345SECRET99TOKEN012345");
        connection.connect();
        //put request 
      DataOutputStream out = new DataOutputStream(
                connection.getOutputStream());
                  out.flush();
                 out.close();
      //read response
     BufferedReader reader = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String lines;
        StringBuffer sb = new StringBuffer("");
        while ((lines = reader.readLine()) != null) {
            lines = new String(lines.getBytes(), "utf-8");
            sb.append(lines);
        }
        System.out.println(sb);
        reader.close();
        // disconnect
        connection.disconnect();
       } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
 } 
```

但我没有成功并得到 :java.io.IOException: Server returned HTTP response code: 501 for URL:

有谁知道如何发送正确的 JSON 请求以向用户添加角色？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:43:43.057

问题已经解决了，因为在URI中，没有tenant_id。所以正确的URI是

```
URL url = new URL(key_admin_url + "/tenants/" + "tenant_id" + "/users/" + "user_id" + "/roles/OS-KSADM/" + "role_id"); 
```

# mobile - 移动支付宝

> ID：15309707
> 
> 赞同：0
> 
> 时间：2013-03-09T10:32:52.773
> 
> 标签：mobile, paypal

我正在将 Applicationcraft.com (AC) 用于移动原生应用程序。这将在 iOS 和 Android 上运行。我需要将交易详情发布到 PayPal 并取回授权。

AC 基于 jQuery 并使用 Phonegap 构建。有没有人有一个关于如何实现这一目标的简化示例？我查看了 PayPal 文档，对于新手来说，它们是压倒性的。

AC 允许 http 请求，所以我觉得这将是最简单的路线。

# javascript - 产生未定义变量的函数

> ID：15309718
> 
> 赞同：2
> 
> 时间：2013-03-09T10:33:53.733
> 
> 标签：javascript, var, undefined-function

我正在学习管理系统中工作并创建一些自定义组件

这正在返回 url，但“course_syllabus_code”在 url 之后显示为未定义。我是 Javascript 的初学者，并且在 Google 上查看了其他一些答案，但仍然无法弄清楚。

基本上用户将能够打开代码并在顶部输入变量（会有多个）。然后再往下是所有魔法应该发生的地方......

输入的变量的结构不能改变，但可能没有以最好的方式执行“魔法”。

```
<script type="text/javascript">

var course_syllabus_code = "72524";

function syllabusLink(course_syllabus_code) {
location.href = 'https://foo.com'+course_syllabus_code;
}
</script>

<ul>
<li><a href="javascript:syllabusLink()"><img src="CourseButton3.png" />Syllabus</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T10:39:02.877

您将`course_syllabus_code`作为参数传递给函数，但在没有任何参数的情况下调用函数。当您调用一个参数少于其定义的函数时，您未传递的参数将与 value 一起传递`undefined`。由于您已为函数参数赋予与全局相同的名称，因此它会从函数中的代码中“遮蔽”（模糊、隐藏）全局，这将改为访问该参数。

你有三个选择（只做*其中一个*，而不是全部）：

1.  通过仅删除声明的函数参数来使用全局：

    ```
    function syllabusLink() {
    // Removed here ------^ 
    ```

2.  **或者**，将全局传递给您调用它的函数：

    ```
    <a href="javascript:syllabusLink(course_syllabus_code)"><img src="CourseButton3.png" />Syllabus</a> 
    ```

        我可能也会更改参数的名称（这里我使用过`scode`）：

    ```
    function syllabusLink(scode) {
        location.href = 'https://foo.com'+scode;
    } 
    ```

3.  **或者**，根本不创建`course_syllabus_code`全局变量，并将其传递给函数：

    ```
    <a href="javascript:syllabusLink('72524')"><img src="CourseButton3.png" />Syllabus</a> 
    ```

我可能会选择#3，除非有一个很好的理由它必须是一个全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:36:14.817

更改函数参数，因为它与局部变量同名。

```
var course_syllabus_code = "72524";

function syllabusLink(code) {
    location.href = 'https://foo.com' + code;
} 
```

您应该传递`course_syllabus_code`到属性`syllabusLink`内。`href`

```
<a href="javascript:syllabusLink(course_syllabus_code)"><img src="CourseButton3.png" />Syllabus</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:34:55.913

像这样试试

```
 var course_syllabus_code = "72524";

function syllabusLink() {
location.href = 'https://foo.com'+course_syllabus_code;
} 
```

因为在 onClick() 你没有传递任何参数。

**course_syllabus_code**是全局变量，可以直接在函数中访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:36:16.510

此位不正确：

```
javascript:syllabusLink() 
```

您缺少参数，因此调用该函数

```
function syllabusLink(course_syllabus_code) { 
```

的值`course_syllabus_code`未设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T10:43:17.897

请不要使用 javascript: 协议，除了小书签。

更好的代码是这个

```
<script type="text/javascript">

function syllabusLink(course_syllabus_code) {
   location.href = 'https://foo.com/course?syllabus='+course_syllabus_code;
   return false; // cancel link
}
</script>

<ul>
<li><a href="#" onclick="return syllabusLink('72524')"><img src="CourseButton3.png" />Syllabus</a></li>
</ul> 
```

或者

这

```
<script type="text/javascript">
var course_syllabus_code="72524";

function syllabusLink() {
   location.href = 'https://foo.com/course?syllabus='+course_syllabus_code;
   return false; // cancel link
}
</script>

<ul>
<li><a href="#" onclick="return syllabusLink()"><img src="CourseButton3.png" />Syllabus</a></li>
</ul> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T10:46:32.887

您需要`course_syllabus_code`作为参数传递的简单答案`function`。只需将其从`function`参数中删除并尝试。

```
<script type="text/javascript">
var course_syllabus_code = "72524";
function syllabusLink() {
    location.href = 'https://foo.com'+course_syllabus_code;
}
</script> 
```

原因是`course_syllabus_code`全局变量。您可以直接在函数中访问。

# css - 如何在级联表的右侧放置一个 div - CSS

> ID：15309722
> 
> 赞同：5
> 
> 时间：2013-03-09T10:34:23.770
> 
> 标签：css, html-table, css-float

我有 3 张桌子，一张接着一张。我有一个 div，我想把它放在这些表的右侧。div 的高度可能会根据里面的文字而有所不同。目前 div 显示在表格下方，如下图所示；

![当前的](../Images/7800a3a41b374354809c869cd7d8bc22.png)

```
<table class="class1" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell1</td>
    <td class="cell2">Cell2</td>
  </tr>
    <tr>
    <td class="cell1">Cell3</td>
    <td class="cell2">Cell4</td>
  </tr>
</table>
<table class="class2" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell5</td>
    <td class="cell2">Cell6</td>
  </tr>
    <tr>
    <td class="cell1">Cell7</td>
    <td class="cell2">Cell8</td>
  </tr>
</table>
<table class="class3" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell9</td>
    <td class="cell2">Cell10</td>
  </tr>
    <tr>
    <td class="cell1">Cell11</td>
    <td class="cell2">Cell12</td>
  </tr>
</table>
<div class="mydiv">mydiv</div> 
```

但我想把 div 放在桌子旁边，这样它就可以向下延伸。

这是工作小提琴[http://jsfiddle.net/ZHVuf/1/](http://jsfiddle.net/ZHVuf/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:39:33.033

您应该像这样在桌子周围添加一个容器：

**html**

```
<div id="container">
<!-- Your table -->
</div> 
```

让他`float left`像你的div一样`#myDiv`

**CSS**

```
#container {
    float:left;
} 
```

请参阅更新的[小提琴](http://jsfiddle.net/soyuka/ZHVuf/5/)。

在第二个更新的[小提琴](http://jsfiddle.net/soyuka/ZHVuf/8/)中，我添加了一个带有[clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)的包装器！

*insertusernamehere*评论说您可以使用 overflow:hidden 而不是 clearfix，请参阅[此处](http://jsfiddle.net/soyuka/ZHVuf/9/)了解使用更少代码执行此操作的新工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:40:57.043

适用`float:left;`于所有`table`并添加`clear:both;`到第二个和第三个表。

现在你已经有了`float:left;`for div 只需添加`position:relative;top:0;`并查看。

**或者**

创建两个 div 并将表格添加到一个左浮动的表格中，您已经有了第二个 div。

```
<div class="tableContainerDiv" style="float:left;">
   <table><tr><td></td></tr></table>
   <table><tr><td></td></tr></table>
   <table><tr><td></td></tr></table>
</div>
<div class="yourDiv" style="float:left;"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T10:41:20.313

**html**

```
<div class="cl">
    <div style="float: left">
        your tables
    </div>
    <div class="mydiv" style="float: left">mydiv</div>
</div> 
```

**css**

```
.cl:after{ content: " ";  display: block; height: 0px; clear: both; visibility: hidden;}
.cl {display: inline-block;}
/* Hides from IE-mac \\*/
* html .cl {height: 1%;}
.cl {display: block;}
/* End hide from IE-mac */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:41:40.090

在另一个 div 中移动表格，向左浮动；

HTML

```
<div class="table-wrap">
<table class="class1" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell1</td>
    <td class="cell2">Cell2</td>
  </tr>
    <tr>
    <td class="cell1">Cell3</td>
    <td class="cell2">Cell4</td>
  </tr>
</table>
<table class="class2" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell5</td>
    <td class="cell2">Cell6</td>
  </tr>
    <tr>
    <td class="cell1">Cell7</td>
    <td class="cell2">Cell8</td>
  </tr>
</table>
<table class="class3" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell9</td>
    <td class="cell2">Cell10</td>
  </tr>
    <tr>
    <td class="cell1">Cell11</td>
    <td class="cell2">Cell12</td>
  </tr>
</table>
</div>
<div class="mydiv">mydiv</div> 
```

CSS

```
.class1{
    width: 100px;
    height: 100px;
    background: orange;
}
.class2{
    width: 100px;
    height: 100px;
    background: green;
}
.class3{
    width: 100px;
    height: 100px;
    background: gray;
}
.mydiv{
    width: 200px;
    background: blue;
    float: left
}
.table-wrap{float:left;} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-09T10:43:40.520

```
<table>
   <tr><td>
<table class="class1" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell1</td>
    <td class="cell2">Cell2</td>
  </tr>
    <tr>
    <td class="cell1">Cell3</td>
    <td class="cell2">Cell4</td>
  </tr>
</table>enter code here
<table class="class2" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell5</td>
    <td class="cell2">Cell6</td>
  </tr>
    <tr>
    <td class="cell1">Cell7</td>
    <td class="cell2">Cell8</td>
  </tr>
</table>
<table class="class3" cellpadding="0" cellspacing="0" style="margin-top: 0px;">
  <tr>
    <td class="cell1">Cell9</td>
    <td class="cell2">Cell10</td>
  </tr>
    <tr>
    <td class="cell1">Cell11</td>
    <td class="cell2">Cell12</td>
  </tr>
</table>
       </td>
       <td>
<div class="mydiv">mydiv</div>
       </td>
    </tr>
</table> 
```

# java - pom 文件中的依赖项 - 它是如何工作的

> ID：15309730
> 
> 赞同：3
> 
> 时间：2013-03-09T10:35:15.010
> 
> 标签：java, eclipse, pom.xml

我在互联网上看到一些要求我使用非标准 api 的 java 编程示例。因此，作者提到需要一个 pom 文件。我需要了解这个文件的目的是什么以及它是如何绑定/“绑定”到 java 项目的。

当我在 Eclipse 中将非标准 jar 添加到项目的构建路径中时，它是否与创建 pom 文件、用它做一些“神奇”然后“绑定”到我的项目相同？或者是别的什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T11:35:16.170

pom 文件是 Maven 的主要工件，它是一个构建工具。Maven 有很多用途，但最常见的是依赖管理（构建管理也是一个核心特性）。它的工作方式是它允许您定义项目所需的外部库的依赖关系，当您使用 Maven 构建项目时，它将从 Web（外部存储库）获取这些库并将它们添加到您构建的项目中。所以这是对依赖项的自动处理。

因此，例如，如果您想在 Maven 项目中包含 Spring，则编辑 pom.xml 并添加

```
<dependency>
    <groupId>org.springframework</group>
    <artifactId>spring-core</artifactId>
    <version>3.1.3.Final</version>
</dependency> 
```

其中 groupId 和 artifactId 是您要包含的库的唯一标识符，以及选择正确 jar 文件的版本。现在，当使用 Maven ( `mvn install`) 构建项目时，它将尝试从 Web 获取 jar 并将其添加到构建项目的类路径中。

Maven 可能有点难上手，因为有很多选择，但是对于学习 Maven，我建议从构建周期和依赖管理开始，然后在您对如何进行深入了解后继续学习更高级的主题这些东西有效。

# c# - 如何在 C# 中的 SQLite 中连接新表中的表？

> ID：15309733
> 
> 赞同：0
> 
> 时间：2013-03-09T10:35:17.920
> 
> 标签：c#, sqlite

我在 SQLite 数据库中创建了两个表，并希望将它们连接到一个新表中，因此我可以使用它来显示信息。到目前为止，我所拥有的是：

```
string cmd        = string.Format( "select * from {0} join {1}", table1, table2 );
_sqlCommand.CommandText = cmd;
_sqlCommand.ExecuteNonQuery( ); 
```

但这不会创建一个新表吗？我现在如何访问已加入的信息？

# android - 在片段中使用 sherlockactionbar 导航不起作用

> ID：15309735
> 
> 赞同：0
> 
> 时间：2013-03-09T10:35:24.580
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, android-fragmentactivity

我的问题是当我单击操作栏项目时 onOptionsItemSelected 被调用但不起作用。

我只希望后退按钮起作用。这是我的代码，位于 SherlockFragment 文件中：

```
actionbar = getSherlockActivity().getSupportActionBar();
actionbar.setDisplayHomeAsUpEnabled(true);

@Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
    inflater.inflate(R.menu.menu_detail, menu);
    super.onCreateOptionsMenu(menu, inflater);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.detailitem1:          
        break;
    case android.R.id.home:
        getActivity().onBackPressed();
        break;
    default:
        return super.onOptionsItemSelected(item);
    }
    return false;
} 
```

菜单项是 com.actionbarsherlock.view.MenuItem。我添加了 setHasOptionsMenu(true); 在 onCreate 并尝试过 onCreateView 。

onBackPressed 是这样的，它在 SherlockFragmentActivity 中：

```
@Override
public void onBackPressed() {
    Saved = SP.getBoolean("saved", false);
    if ((getSupportFragmentManager().findFragmentByTag("detail") == null)
            | mTwoPane) {
        ready = true;
    } else
        ready = false;
    if (!Saved && ready) {
        new AlertDialog.Builder(this)
        .....
    }else if (Saved && ready){
        super.onBackPressed();
    }else {
        someListFragment Fragment = new someListFragment ();
        Fragment .setArguments(getIntent().getExtras());
        Fragment .setHasOptionsMenu(true);
        getSupportFragmentManager()
                .beginTransaction()
                .replace(R.id.fragment_container, Fragment, "listview")
                .commit();
    }
} 
```

在 onbackpressed 中，当我们处于双窗格模式时，ready 为真，因此在使用平板电脑时，或者如果我们处于第一个片段中（所以第二个片段为空）。

如果我按下后退按钮一切正常，碎片将被替换。但是，当我单击操作栏中的后退按钮时，它只会返回到上一个活动。

即使我改变 getActivity().onBackPressed(); onBackPressed 的 else 语句我不起作用。

有谁知道解决方案是什么，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:28:42.587

对不起，我有点懒，我忘记了我的 FragmantActivity 中有一个 onOptionsItemSelected，并且后退按钮是 android.R.id.home，所以我在那里放了一个 if 语句，瞧。

# iphone - 如何防止在 RESTKit 中请求重复数据

> ID：15309736
> 
> 赞同：0
> 
> 时间：2013-03-09T10:35:26.430
> 
> 标签：iphone, objective-c, restkit

我是新手`RESTKit`，我一直在为 Restful 服务开发 iOS 客户端。我们使用`since_id`或类似的东西来确保我们不会一遍又一遍地请求相同的数据。但是在`RESTKit`，我还没有找到任何方法来达到这样的目的。

是否有任何完整的开源 Restful 服务客户端使用`RESTKit`？

# android-imageview - 将 ScaleGestureDetector 与 GestureDetector 一起使用？

> ID：15309743
> 
> 赞同：7
> 
> 时间：2013-03-09T10:35:47.730
> 
> 标签：android-imageview, multi-touch, pinchzoom, onfling

在我的 Android 应用程序`ImageView`中，我希望用户能够向左/向右/向上/向下移动以将图像（静态地图）更改为相邻的图像。但除此之外，我还想要捏缩放功能和地图本身。

我可以让投掷或捏缩放工作，但不能一起工作。我正在使用`GestureDetector`(with a `SimpleOnGestureListener`) 进行投掷。我正在使用`ScaleGestureDetector`（来自[Make Sense of Multitouch](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)）进行缩放。

困难在于确定在触摸动作时调用哪个手势侦听器。这不是编码问题，而是逻辑问题。单指触摸动作，是弹跳还是缩放？即使使用捏合缩放，初始`MotionEvent`值也是 ACTION_DOWN。我一直在尝试使用图像大小（固有的还是缩放的？）作为决策点。但是使用 ACTION_DOWN 的初始缩放操作（当图像大小是固有的并且我想放大它时）似乎让我无法理解。

以前有没有人成功解决过这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-11T02:14:03.610

您可以将事件传递给两个手势检测器。

在“更复杂的缩放示例”下查看[http://developer.android.com/training/gestures/scale.html ：](http://developer.android.com/training/gestures/scale.html)

```
public boolean onTouchEvent(MotionEvent event) {
    boolean retVal = mScaleGestureDetector.onTouchEvent(event);
    retVal = mGestureDetector.onTouchEvent(event) || retVal;
    return retVal || super.onTouchEvent(event);
} 
```

当然，鉴于 Ratatat 引用的错误，在上面的示例中永远不会调用 super.onTouchEvent，这可能会也可能不会，这取决于您的用例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-07T22:28:10.380

[Ratatat 的回答](https://stackoverflow.com/a/16886242/414037)的想法是好的，但是即使我们不想滚动，我们仍然应该将事件传递给gestureDetector，否则它会被搞砸。

我最终得到了这样的结果：

```
scaleDetector = new ScaleGestureDetector( ... );

gestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener() {
    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
        if (scaleDetector.isInProgress()) {
            // don't allow scrolling while scaling
            return false;
        }

        // handle scrolling

        return true;
    }
} 
```

然后`onTouchEvent`的实现应该像[aij 的回答](https://stackoverflow.com/a/20509292/414037)：

```
boolean result = scaleDetector.onTouchEvent(event);
result = gestureDetector.onTouchEvent(event) || result;
return result || super.onTouchEvent(event); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T19:05:16.450

Finally found the answer on a link: [http://code.google.com/p/android/issues/detail?id=42591](http://code.google.com/p/android/issues/detail?id=42591)

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean result = mScaleGestureDetector.onTouchEvent(event);

    // result is always true here, so I need another way to check for a detected scaling gesture
    boolean isScaling = result = mScaleGestureDetector.isInProgress();
    if (!isScaling) {
        // if no scaling is performed check for other gestures (fling, long tab, etc.)
        result = mCommonGestureDetector.onTouchEvent(event);
    }

    // some irrelevant checks...

    return result ? result : super.onTouchEvent(event);
} 
```

# php - 从开始日期循环到结束日期

> ID：15309744
> 
> 赞同：1
> 
> 时间：2013-03-09T10:36:06.813
> 
> 标签：php, date, loops

我想制作一个用户可以选择**的日期列表。**日期应从**今天的当前日期**开始，并在**5 天后结束**。我只是不知道如何在循环中执行它，所以我不会一遍又一遍地更改日期。谢谢。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:09:07.587

```
<?php
    $today = date('d/m/y');
    for($i=0; $i<5; $i++) {
          $nextDay = date('m/d/y', time() + (86400*$i));
          //make something with your date
    }
?> 
```

你的意思是这样的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:10:10.157

```
echo "<select name=\"date\">\n";
for($i=time();$i<time()+5*24*60*60;$i+=24*60*60) {
    $d = date('Y-m-d', $i);
    echo echo "<option value=\"$d\">$d</option>\n";
}
echo "</select>\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:13:27.933

快速而肮脏的方式：

```
for ($i = 0; $i < 5; $i++){
    print date('Y-m-d', mktime(0, 0, 0, date('m'), date('d') + $i, date('Y')));
    print "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T11:13:49.803

您可以使用 UNIX 时间戳来存储时间和循环。

用于`date('Y-m-d', $timestamp)`生成日期字符串。

用于`strtotime($string)`将 Ymd 字符串转换为时间戳整数。

```
$now = time();
for($i = $now; $i < $now + 5*86400; $i=$i+86400)
{
    $Ymd = date('Y-m-d', $i);
    //do other things here.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T11:18:11.420

您可以为此使用 php DateTime 函数：

```
<?php

    $date = new DateTime();    // Without argument: now
    $interval = new Dateinterval("P1D"); // Period: 1 day
    for ($i = 0; $i <= 5; $i++) {
       echo $date->format("Y-m-d")."\n";
       $date->add($interval);
    }
?> 
```

# php - 如何从 cron 作业将参数传递给 codigniter 函数？

> ID：15309745
> 
> 赞同：1
> 
> 时间：2013-03-09T10:36:10.460
> 
> 标签：php, codeigniter, crontab

我正在使用`codeigniter`框架。我正在尝试将参数从玉米选项卡传递给函数。下面我发布了我的代码和 cron 命令。

```
class Test extends CI_Controller {
    public function index(){
        $this->home(); //shows the home function
    }

    public function my_test($parameter)
    {
      //do something here using $parameter;
    }
 } 
```

cron作业命令

```
10 5 * * * * /usr/bin/php /var/www/myproject/index.php 'test/my_test/2' 
```

请告诉我我做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:50:54.890

我建议你使用`wget`with cronjobs

wget [http://example.com/index.php/controller/method/paramValue](http://example.com/index.php/controller/method/paramValue)

我遇到了同样的问题，然后将其转换为使用 wget

我知道你想知道出了什么问题，但我希望这可以帮助:)

# java - 在 Java 中生成唯一随机数的更好方法

> ID：15309746
> 
> 赞同：2
> 
> 时间：2013-03-09T10:36:13.940
> 
> 标签：java

我需要指定范围内的唯一随机整数。我使用这种方法：

```
class Main
{
static final int RANGE = 100;

static int uniqueGenerator(int range_, boolean boolArr_[], Random rand_)
{
    int tmpVar = rand_.nextInt(range_);
    while (boolArr_[tmpVar] == true)
    {
        tmpVar = rand.nextInt(range_);
    }
    boolArr_[tmpVar] = true;
    return tmpVar;
}

public static void main(String[] args)
{
    Random rand = new Random();  
    boolean boolArr[] = new boolean[RANGE];
    Arrays.fill(boolArr, false);
    int ceiling = 10;
    int tmp = Main.uniqueGenerator(ceiling, boolArr, rand);
    System.out.println(tmp); => 5
    ceiling = 20;
tmp = Main.uniqueGenerator(ceiling, boolArr);
    System.out.println(tmp); => 17

}
} 
```

似乎很麻烦。也许有人知道更好的方法？编辑：我在游戏代码中使用它，所以我需要最有效的解决方案。下面的答案建议初始化新列表，对其进行改组=>太耗费资源/每次需要更改范围时都需要生成新列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T11:20:09.190

```
List<Integer> list = new ArrayList<Integer>();
for(int i = 1; i <= 100; i++) list.add(i);
Collections.shuffle(list); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T10:40:24.297

用您想要的数字范围填充一个数组，将其随机排列并提取一个项目。

编辑：查看[Eng.Fouad 的示例](https://stackoverflow.com/a/15310071/1864167)，了解它是如何实现的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T11:16:48.930

在集合中生成和存储随机数

```
Set<Integer> set = new HashSet<Integer>(100);
    Random rand = new Random();
    while (set.size() < 1000) {
        set.add(rand.nextInt(100));
    }

    for (Integer integer : set) {
        System.out.println(integer);
    } 
```

# atomic - 原子地设置变量而不首先比较

> ID：15309755
> 
> 赞同：1
> 
> 时间：2013-03-09T10:37:48.993
> 
> 标签：atomic, cas

我一直在阅读并尝试原子内存访问以进行同步，主要用于教育目的。具体来说，我正在研究 Mac OS X 的`OSAtomic*`功能系列。这是我不明白的：为什么没有办法以原子方式*设置*变量而不是修改它（添加、递增等）？`OSAtomicCompareAndSwap*`尽可能接近——但只有交换是原子的，而不是整个函数本身。这会导致以下代码不起作用：

```
const int N = 100000; 

void* threadFunc(void *data) {
    int *num = (int *)data;

    // Wait for main thread to start us so all spawned threads start
    // at the same time.   
    while (0 == num) { }

    for (int i = 0; i < N; ++i) {
        OSAtomicCompareAndSwapInt(*num, *num+1, num);
    }
}

// called from main thread
void test() {
    int num = 0;

    pthread_t threads[5];

    for (int i = 0; i < 5; ++i) {
        pthread_create(&threads[i], NULL, threadFunc, &num);
    }

    num = 1;

    for (int i = 0; i < 5; ++i) {
        pthread_join(threads[i], NULL);
    }

    printf("final value: %d\n", num);

} 
```

运行时，此示例理想情况下会产生 500,001 作为最终值。但是，它没有；即使线程 X 中 OSAtomicCompareAndSwapInt 中的比较成功，另一个线程 Y 也可以在 X 有机会更改变量之前先进入设置变量。

我知道在这个简单的示例中，我可以（并且应该！）简单地使用`OSAtomicAdd32`，在这种情况下代码可以工作。但是，例如，如果我想以原子方式设置一个指针，使其指向另一个线程可以使用的新对象，该怎么办？

我查看了其他 API，它们似乎也缺少此功能，这使我相信这是有充分理由的，而我的困惑只是基于缺乏知识。如果有人可以启发我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T00:22:35.340

我认为您必须检查`OSAtomicCompareAndSwapInt`结果以保证`int`实际设置了。

# python - python random.seed 是如何工作的

> ID：15309757
> 
> 赞同：0
> 
> 时间：2013-03-09T10:38:03.660
> 
> 标签：python, random

我正在关注这个例子 [https://stackoverflow.com/a/9009657/1890488](https://stackoverflow.com/a/9009657/1890488)

他有这个结果

```
>>> import random
>>> rnd = random.Random(0)
>>> [rnd.randint(0, 10) for i in range(10)]
[9, 8, 4, 2, 5, 4, 8, 3, 5, 6]
>>> rnd = random.Random(0)
>>> [rnd.randint(0, 10) for i in range(10)]
[9, 8, 4, 2, 5, 4, 8, 3, 5, 6]
>>> rnd = random.Random(1)
>>> [rnd.randint(0, 10) for i in range(10)]
[1, 9, 8, 2, 5, 4, 7, 8, 1, 0] 
```

我的问题很少

1.  为什么前两个序列相同
2.  当我们将 1 作为参数传递时，这是否意味着第一个值是 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:53:30.413

前两个序列是相同的，因为您为它们播种了相同的值。这是一个**特点**。

可设置的种子使您能够通过重复使用相同的种子来有意地重复您的序列。例如，这可以用于实现与原始游戏完全相同的游戏重播，尽管游戏使用随机数生成器来进行游戏内遭遇或某些 AI 决策。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:45:10.270

因为它只是一个伪随机生成器。这是**一个具有良好平方分布的函数**（在数学意义上）。常见的做法是以毫秒为单位的系统时间作为种子：

```
rnd = random.Random(int(round(time.time() * 1000))) 
```

# ruby-on-rails - 导致 activeadmin 视图问题的新评论模型

> ID：15309759
> 
> 赞同：0
> 
> 时间：2013-03-09T10:38:08.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的新评论模型在网站上运行良好，但 activeadmin 存在问题，因为当我进入管理视图并尝试查看“指南”（另一个模型）时，我收到一条错误消息：

> 未定义的方法“评论”

我的模型comment.rb：

```
belongs_to :guideline
belongs_to :commenter, class_name: 'User'
attr_accessible :body, :commenter_id 
```

我的模型guideline.rb：

```
attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty, :updated_by, :current_user, :subtitle, :slug, :activities, :comment, :visible
belongs_to :user
has_many :favourite_guidelines
has_many :comments, :dependent => :destroy 
```

管理员/guidelines.rb：

```
index do                              
  column :comment     
  default_actions                   
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:15:47.663

您收到未定义的方法错误，因为您的指导模型 has_many 注释，因此有方法`.comments`但没有`.comment`。如果您试图显示指南的评论数量，那么您可以这样做。

```
column "Comments" do |guideline|
  guideline.comments.count
end 
```

如果您想显示列出的所有实际评论，您可以收集包含文本的评论对象中的任何列，并用逗号或换行符等加入它们。

```
column "Comments" do |guideline|
  guideline.comments.collect(&:text_form_of_comment).join(",")
end 
```

[这里](http://activeadmin.info/docs/3-index-pages/index-as-table.html)是有关如何自定义 ActiveAdmin 索引表的更多信息。

# mysql - mysql中的更新语句不起作用，而它必须起作用

> ID：15309766
> 
> 赞同：0
> 
> 时间：2013-03-09T10:39:10.470
> 
> 标签：mysql, sql-update

Mysql 中的更新语句有问题。这是我的声明：

```
update `momtos_kullanici` set `firma_quantity`='1', `auditor_quantity`='1', `print_word`=0, `print_excel`=0 WHERE `MK_ID`='2690' 
```

此代码是通过 PHP 执行的，它不会更改值。我回应它并将其复制到 phpmyadmin 面板，但它仍然返回“0 行受影响”消息，但如果我在 phpmyadmin 中重新键入 0 和 1`print_word`和`print_excel`列值，它就可以工作。

```
Column           Type     null   default

auditor_quantity int(11)  No    1

firma_quantity   int(11)  No    1

print_word       bit(1)   No    0

print_excel      bit(1)   No    0 
```

我试图把数字放在引号中，甚至是真假词，同样的事情。我之前遇到过与 varchar 字段相同的问题。那个时候，我只是说'哦，好吧......'，但这一个真的很疯狂。

谁能帮我？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:51:45.723

```
update momtos_kullanici set firma_quantity=1, auditor_quantity=1, print_word=0, print_excel=0 WHERE MK_ID=2690 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:40:20.520

不要用引号将您的属性名称括起来

# php - MySql Table wise 备份和恢复

> ID：15309767
> 
> 赞同：0
> 
> 时间：2013-03-09T10:39:31.097
> 
> 标签：php, mysql, backup

我正在研究 Mysql 数据备份和恢复系统，但坚持如何使用它。我可能会想到的一个选项

**表明智的备份方法**

使用 Dateandtime 和directoy 创建目录将有一个包含所有数据库及其表名的定义文本文件，以及包含表结构和表INSERTS 的每个表的单独文件。

**表明智的恢复方法**

读取目录和定义文件以根据日期和表名对备份进行排序，用户可以选择所有表或一个特定表进行还原。

我将为此使用 PHP，因为我必须在不同的服务器上自动上传这些备份文件。

**问题**

1-以上备份和还原方法是否有效？

2-有没有一种方法可以为每个数据库编写单个文件，但仍然有某种方法可以仅恢复数据库中选定的表或所有表？

3- 对于此类应用程序，我必须牢记哪些要点？

请让我知道是否有任何歧义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:37:05.603

用一个简单的 shell 脚本试试 mysqldump。它可以扩展到转储表。它现在只转储数据库。

```
#!/bin/bash

USER="username"
PASSWORD="password"
OUTPUTDIR="./"
MYSQLDUMP=`which mysqldump`
MYSQL=`which mysql`

# get a list of databases
databases=`$MYSQL --user=$USER --password=$PASSWORD \
 -e "SHOW DATABASES;" | tr -d "| " | grep -v Database`

# dump each database in turn
for db in $databases; do

    # skip internal databases
    if [ "$db" == "information_schema" ] || [ "$db" == "mysql" ]; then
        continue
    fi  

    # dump whole database 
    echo "$db"
    $MYSQLDUMP --force --opt --user=$USER --password=$PASSWORD \
    --databases $db > "$OUTPUTDIR/$db.sql.bak"

    # get a list of tables inside database
    tables=`$MYSQL --user=$USER --password=$PASSWORD \
     -e "USE $db;SHOW TABLES;" | tr -d "| " | grep -v Tables_in_$db`

    # dump tables
    for tbl in $tables; do
        echo "$db.$tbl"
        $MYSQLDUMP --force --opt --user=$USER --password=$PASSWORD \
         $db $tbl> "$OUTPUTDIR/$db.$tbl.sql.bak"
    done
done 
```

# python - 获取文本区域的内容

> ID：15309773
> 
> 赞同：0
> 
> 时间：2013-03-09T10:40:07.493
> 
> 标签：python, html

我正在解析 HTML 页面，每个页面都有

`<textarea name="content[country]">...</textarea>`

只需要获取此文本区域的内容。

我的 python 版本中没有 lxml 或其他 html 解析模块，因为它在文本编辑器环境中工作。

如何使用 name 解析 textarea 的开始标签和结束标签之间的文本`content[country]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:55:17.323

假设您仍然可以访问 stdlib，那么您可以使用以下内容：

```
import xml.etree.ElementTree as ET

s = '<html><textarea name="content[country]">foo</textarea><textarea name="content[country]">bar</textarea></html>'
tree = ET.fromstring(s)
print [n.text for n in tree.iterfind('.//textarea[@name="content[country]"]')]
# ['foo', 'bar'] 
```

可怕的重新破解：

```
import re
print re.findall(r'<\s*textarea.*?>(.*?)<', s) 
```

# jquery - HTML中的Doctype，Metas，jquery多久一次？

> ID：15309780
> 
> 赞同：0
> 
> 时间：2013-03-09T10:40:42.707
> 
> 标签：jquery, html, meta-tags, doctype

也许是一个简单的问题，但不能很快找到它。我有一个带有导航的 index.html，下面有一个 iframe，通过单击导航可以包含其他 html。在其他 html 中，我想使用与 index.html 中相同的 jquery-、meta-、font-、etc-stuff。我是否需要在包含的 html 的头部附加整个标签？还是将它放在 index.html 中就足够了？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:43:54.537

> 我是否需要在包含的 html 的头部附加整个标签？

是的。它们是独立的文件，它们需要是完整的文件。

# php - 通过 PHP 在 MySql 数据库中保存 url 失败

> ID：15309781
> 
> 赞同：0
> 
> 时间：2013-03-09T10:40:53.247
> 
> 标签：php, ajax, jquery

我有一个 URL 数组，我在 PHP 端迭代后保存在数据库中。我用 Ajax 发送数组并用 PHP 保存它。

**通过 Ajax 发送数据**

```
linksString=http://localhost/phpmyadmin/index.php?db=testdb&token=42d0dde57469a9aa4b6a2f7e0741,
http://localhost/phpmyadmin/index.php?db=testdb&token=98604a9aa4b6a2f7e0741,
http://localhost/phpmyadmin/index.php?db=testdb&token=9864dde57469a9aa4b6a2f7e0741,
http://localhost/phpmyadmin/index.php?db=testdb&token=986042d0dde57469a9aa4b6a2f7e0741,
http://localhost/phpmyadmin/index.php?db=testdb&token=986042d0dde57469a9a23&q=save 
```

**未获取 $linksPieces 中的所有值，仅获取一个值**

但是我没有在 PHP 端得到所有这些字符串；只获取第一个逗号（，）之前的第一个子字符串。IE

```
http://localhost/phpmyadmin/index.php?db=testdb&token=42d0dde57469a9aa4b6a2f7e0741 
```

**PHP**

```
$linksPieces = array();
$links =  $_POST['linksString'];
$linksPieces = explode(",", $links);
foreach($linksPieces as $link)
{
   //operation
} 
```

我需要在 PHP 端获取数组中的所有字符串。

如果我发送这些没有任何 = 的 url，那么工作正常。

```
http://in.yahoo.com/ 

http://www.hotmail.com/

http://www.google.com/

http://www.blah.com/

http://www.blah1.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:59:30.373

您可以在发送此字符串之前尝试`encodeURIComponent()`在 Javascript 中使用`urldecode()`，在使用此字符串之前在 PHP 中使用。

# apache - .htaccess 重写和子目录不起作用

> ID：15309787
> 
> 赞同：0
> 
> 时间：2013-03-09T10:41:27.527
> 
> 标签：apache, .htaccess

我有这个作为我的 .htaccess 文件：

```
AddType text/x-component .htc

ErrorDocument 404 /index.php

RewriteEngine on

RewriteRule ^maps/(\w+)/?$ /maps.php?lang=$1 [L]
RewriteRule ^(\w+)/?$ /index.php?lang=$1 [L] 
```

第二个 RewriteRule 运行良好！没问题。但是，第一个让我非常头疼......它根本不起作用。它重定向到 /maps.php，但它没有给我参数，这对我来说是 BASIC。就像 GET 参数不存在，但应该存在。我不明白...因为我刚刚从 StackOverflow 复制了一个有效的 RewriteRule，并将“搜索”一词更改为“地图”一词。

请问有人可以帮我解决这个问题吗？我很确定这会很简单，但我没有看到它......

编辑：显然，我的服务器中有第二个 .htaccess 文件。“/logs/.htaccess”。

```
Options +Indexes
RemoveHandler .html
RemoveType .html
AddType text/html .html
Satisfy any
Order Deny,Allow
Allow from MY_SERVER_IP
Deny from all
AuthType Basic
AuthName "Access to /logs" 
```

我无法删除此文件。或者我没能做到。我的托管服务提供商是 1&1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:34:35.517

在我意识到这可能是我的托管服务提供商 1and1 的问题后，我通过一些深入的搜索发现了这个问题。我在这里得到了[1and1 mod_rewrite 问题](https://stackoverflow.com/questions/8681959/1and1-mod-rewrite-issues)

这是关于您必须在 .htacces 文件中添加的选项，即：

```
Options -MultiViews 
```

现在工作得很好！感谢@kjetilh 的支持。

# jquery - 重置 Css 值 Onclick

> ID：15309790
> 
> 赞同：0
> 
> 时间：2013-03-09T10:41:33.340
> 
> 标签：jquery, html, css

我对 Jquery 很陌生，所以不要误会我。我有一些图像，当用户单击图像时，它的不透明度应该降低。当用户单击另一个图像时，它应该恢复其原始属性。

正则表达式替换和应用 glass id 是额外的变化。当用户单击其他图像时，如何重置 css 值。

这是我的 Jquery 代码。

```
$("#list img").click(function () {

$(this).css("opacity",".3");
var selectImgName =  $(this).attr("src");

selectImgName = selectImgName.replace("c", "b");

$("#glasses").attr("src", selectImgName);
    });
}); 
```

这是我的 HTML 代码。

```
<div id="list"   >
<img src="img/c1.png" style="display:box; width:125px; margin-left:5px; margin-top:9px" />
<img src="img/c2.png" style="display:box; width:125px;margin-left:5px;margin-top:9px"/>
<img src="img/c3.png" style="display:box; width:125px;margin-left:5px;margin-top:9px" />    
<img src="img/c4.png" style="display:box; width:125px;margin-left:5px;margin-top:9px"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:50:13.107

只需恢复所有图像的原始不透明度，然后更改单击的那个。

```
$("#list img").click(function () {
    $("#list img").css("opacity", "1");
    $(this).css("opacity",".3");
}); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:50:20.830

像这样的东西：

```
$("#list img").css("opacity","1"); //reset all
$(this).css("opacity",".3"); //set on clicked 
```

## [jsFiddle](http://jsfiddle.net/W6XNU/)

# dart - 如何手动删除 DartEditor Files 目录或对其进行更改

> ID：15309792
> 
> 赞同：0
> 
> 时间：2013-03-09T10:41:51.797
> 
> 标签：dart, dart-editor

我已经指出/打开了飞镖文件夹，所以。Darteditors 自己的程序文件所在的位置，在 Darteditors 文件窗口中并开始在那里创建一个 Web 程序。聪明的？不是吗？:) 我想在那里测试我自己的一个程序，以使用 pub 包。

现在编辑器似乎卡住了，没有任何效果，只能打开 FEEDBACK 窗口 2 秒钟，我只能使用 Windows 操作控件关闭编辑器。可能会有某种递归吗？新安装很快，但找到这个过程会很有用..

那么如何在不启动 DartEditor 的情况下清理此 DartEditors 文件目录？我应该避免将自己的程序文件放在 dart 文件夹中吗？

我在 Windows7 中有最新的 Darteditor，19425。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:51:53.403

您应该避免将任何您自己的代码放入编辑器的目录中；该目录由我们的自动更新过程管理，您可能会丢失该代码。

要让您的编辑器恢复到满意的状态，您必须删除其工作区元数据文件夹。在 Windows 上，它应该在 c:\Users\yourname\DartEditor 中。只需删除它（或重命名它），编辑器应该能够重新启动。

展望未来，您需要在编辑器目录之外找到您的代码；我们默认为 c:\Users\username\dart。希望这可以帮助！

# python - 通过将列表作为参数传递的主键从任意表中加载记录

> ID：15309793
> 
> 赞同：1
> 
> 时间：2013-03-09T10:41:54.763
> 
> 标签：python, python-2.7, sqlalchemy

我正在使用没有 ORM 的 SQLAlchemy 核心功能，我需要通过将列表作为参数传递的主键从任意表中加载记录。

目前我正在这样做：

```
records = select([arbitrary_table], list(arbitrary_table.primary_key.columns._all_cols)[0].in_([1, 2, 3])) 
```

`arbitrary_table`作为参数传递，它可以是任何限制主键是整数而不是复合的表，但主键可以有不同的名称。

我有几个问题：

**Q1：** 有什么办法可以优化吗？我很确定这`list(self.arbitrary_table.primary_key.columns._all_cols)[0]`不是获取主键列的最佳方法。

**Q2：** 如何对 ORM 查询做同样的事情？SA 站点的示例具有`my_user = session.query(User).get(5)`但它仅将一个 ID 作为参数，并且没有覆盖以获取 ID 列表。

我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:58:28.163

“primary_key”属性是 的一个实例`PrimaryKeyConstraint`，它可以就地迭代，因此`list(table.primary_key)[0]`您需要在该列中获取所有内容。

下面的例子说明了两种复合兼容技术（编辑：哦，你说“不是复合”。好吧，无论如何它都是很酷的代码......使用 select_by_single_pk()），一种需要元组支持（postgresql，也许是 mysql），另一种是字符串出 AND/OR，以及单一 PK 方法。然后它显示接受元组的 query.get()：

```
from sqlalchemy import tuple_, or_, and_

def select_by_composite_pk(table, values):
    "works only in a high-capability database like postgresql"
    return table.select().where(tuple_(*table.primary_key).in_(values))

def select_by_composite_pk_no_tuples(table, values):
    "works in any database"

    return table.select().where(
            or_(
                *[
                    and_(*[col == val for col, val in zip(table.primary_key, val)])
                    for val in values
                ]
            ))

def select_by_single_pk(table, values):
    "works in any database"
    return table.select().where(list(table.primary_key)[0].in_(values))

if __name__ == '__main__':
    from sqlalchemy import create_engine, Table, Column, Integer, MetaData

    eng = create_engine("postgresql://scott:tiger@localhost/test", echo=True)

    conn = eng.connect()
    trans = conn.begin()

    m = MetaData()

    # single PK column
    a = Table('a', m, Column('x', Integer, primary_key=True),
                            Column('y', Integer))

    # composite PK column
    b = Table('b', m, Column('x', Integer, primary_key=True),
                    Column('y', Integer, primary_key=True))

    m.create_all(conn)

    conn.execute(a.insert(), [
            {'x': i, 'y': i * 2} for i in xrange(10)
        ])
    conn.execute(b.insert(), [
            {'x': i, 'y': i * 2} for i in xrange(10)
        ])

    print conn.execute(
                select_by_composite_pk(a,
                    [tuple_(3, ), tuple_(5, ), tuple_(9, )])).fetchall()

    print conn.execute(
                select_by_composite_pk(b,
                    [tuple_(3, 6), tuple_(5, 10), tuple_(9, 18)])).fetchall()

    print conn.execute(
                select_by_composite_pk_no_tuples(b,
                    [(3, 6), (5, 10), (9, 18)])).fetchall()

    print conn.execute(
                select_by_single_pk(b, [3, 5, 9])).fetchall()

    # ORM query version
    from sqlalchemy.orm import Session
    from sqlalchemy.ext.declarative import declarative_base

    Base = declarative_base()

    class MyCompositeClass(Base):
        __table__ = b

    # get accepts a tuple
    print Session(conn).query(MyCompositeClass).get((5, 10)) 
```

# android - 如何在android的编辑文本字段中显示结果

> ID：15309798
> 
> 赞同：-1
> 
> 时间：2013-03-09T10:42:31.263
> 
> 标签：android, android-edittext

我正在开发一个用于发送带有语音识别界面的短信的安卓应用程序。我正面临从语音识别界面显示结果的问题。我无法在消息列（编辑文本）中显示结果（转换后的文本）。但是当我在窗口中提供文本视图时，我可以在文本字段中显示结果。所以请帮助我在编辑文本字段中获得结果。

代码

```
 package com.voice.sms;

 import android.app.Activity;
 import android.content.Intent;
 import android.content.ActivityNotFoundException;
 import android.os.Bundle;
 import android.telephony.SmsManager;
 import android.speech.RecognizerIntent;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.ImageButton;
 import android.widget.TextView;
 import java.util.ArrayList;
 import android.widget.Toast;

public class SendsmsActivity extends Activity {

protected static final int RESULT_SPEECH = 0;
Button btnsend;
ImageButton btnspk;
EditText tRec;
EditText tMsg;
TextView ttxt;
String tstrg;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sendsms);

    btnsend = (Button) findViewById(R.id.btnsend);
    btnspk = (ImageButton) findViewById(R.id.imgbtnspk);
    ttxt = (TextView) findViewById(R.id.txt1);

    btnsend.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            tRec = (EditText) findViewById(R.id.etxtrec);
            tMsg = (EditText) findViewById(R.id.etextmsg);
            sendSMS(tRec.getText().toString(), tMsg.getText().toString());
        }
    });

    btnspk.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(
                    RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");

            try {
                startActivityForResult(intent, RESULT_SPEECH);
                ttxt.setText("");
            } catch (ActivityNotFoundException a) {
                Toast t = Toast.makeText(getApplicationContext(),
                        "Opps! Your device doesn't support Speech to Text",
                        Toast.LENGTH_SHORT);
                t.show();
            }
        }
    });

}`

// ---sends an SMS message to another device---
private void sendSMS(String phoneNumber, String message) {
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, null, null);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case RESULT_SPEECH: {
        if (resultCode == RESULT_OK && null != data) {

            ArrayList<String> text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

            //String spchtxt = text.get(0).toString();
            ttxt.setText(text.get(0));

        }
        break;
    }

    }

} 
```

}

发送消息.xml

```
`<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"

tools:context=".sendsms"
tools:ignore="ExtraText" >

<TextView
    android:id="@+id/txtrec"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="23dp"
    android:text="@string/rec"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/etxtrec"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txtrec"
    android:ems="10"

    android:inputType="phone" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/txtmsg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/etxtrec"
    android:layout_marginTop="34dp"
    android:text="@string/msg"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/btnsend"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:text="@string/snd" />

<ImageButton
    android:id="@+id/imgbtnspk"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btnsend"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:src="@android:drawable/ic_btn_speak_now" 
    android:contentDescription="@string/spk"/>

<AutoCompleteTextView
    android:id="@+id/etextmsg"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txtmsg"
    android:ems="20"
    android:gravity="top" />

<TextView
    android:id="@+id/txt1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/imgbtnspk"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/etextmsg"
    android:layout_marginBottom="16dp" 
  />

   </RelativeLayout>` 
```

现在我可以在 txt1（文本视图字段）中显示结果（文本）。但我想在文本视图 firld 中显示结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:06:12.117

尝试这个：

```
EditText editText = (EditText)findViewById(R.id.edit_text);
editText.setText("Google is your friend.", TextView.BufferType.EDITABLE); 
```

# vb.net - 矩形面板图形关系

> ID：15309800
> 
> 赞同：0
> 
> 时间：2013-03-09T10:43:09.230
> 
> 标签：vb.net

以下代码不起作用：

```
Private Sub panelButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles panelButton.Click

    Dim myBrush As Brush
    myBrush = New SolidBrush(Color.Yellow)

    fBitmap = New Bitmap(picturePanel.Width, picturePanel.Height)
    Dim gg As Graphics = Graphics.FromImage(fBitmap)
    gg.Clear(Color.White)

    '<<<<<my attempt<<<<<<
    Dim rec As Rectangle
    rec = New Rectangle(picturePanel.Location.X, picturePanel.Location.Y, picturePanel.Width, picturePanel.Height)
    gg.FillRectangle(myBrush, rec)
    '<<<<<<<<<<<<<<<<<<<<< 

    'gg.FillRectangle(myBrush, gg.ClipBounds) '<<actual answer

    gg.Dispose()
    picturePanel.Refresh()
End Sub 
```

在面板的重绘处理程序中，我得到了这个：

```
Private Sub picturePanel_Paint(sender As System.Object, e As System.Windows.Forms.PaintEventArgs) Handles picturePanel.Paint
    If fBitmap IsNot Nothing Then
        e.Graphics.DrawImage(fBitmap, 0, 0)
    End If
End Sub 
```

我已经包含了推荐的代码（标记为`actual answer`），但是为什么标记的部分没有`my attempt`将面板变为黄色？- 可以对其进行调整以使面板变黄吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:52:08.223

```
rec = New Rectangle(picturePanel.Location.X, picturePanel.Location.Y, _
                    picturePanel.Width, picturePanel.Height) 
```

那是错误的矩形。它与面板的父级相关，而不是面板本身。充其量你会在最右下角看到矩形。或者如果它不在位图上，则根本没有。而是相对于位图的左上角进行绘制。使固定：

```
rec = New Rectangle(0, 0, fBitmap.Width, fBitmap.Height) 
```

请注意，您将不再看到任何白色，因为您完全透支了它。目前尚不清楚您要做什么。也许更能说明问题的是给它一个黄色边框：

```
rec = New Rectangle(0, 0, fBitmap.Width-1, fBitmap.Height-1)
gg.DrawRectangle(Pens.Yellow, rec) 
```

支持 Using 语句而不是显式的 Dispose() 调用。也可以在刷子上使用它，它也应该被丢弃。

# symfony - symfony2 + 教义在教义中插入值

> ID：15309802
> 
> 赞同：1
> 
> 时间：2013-03-09T10:43:18.413
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我有一个表名博客下面是它的结构。

```
FieldName       Type
Id              int(5)
blog_title      string(255)
blog_url        string(255)
blog_desc       text
image           string(255)
tags            string(255)
blog_created_at Date
blog_status     string(1) 
```

我在控制器中为这个表创建了一个表单。

```
 public function addAction()
{
    $entity = new Blog();

    $form = $this->createFormBuilder()
        ->add('blog_title')
        ->add('blog_desc' ,'textarea')
        ->add('blog_url')
        ->add('image')
        ->add('tags')
        ->add('blog_status')
        ->getForm();

    $request =  $this->getRequest();
    if ($request->getMethod() == 'POST') 
    {
        $form->bindRequest($request);
        if ($form->isValid()) 
        {
            $em = $this->getDoctrine()->getManager();
             $em->persist($entity);
             $em->flush();
            return $this->redirect($this->generateUrl('admin_index'));
        }
      }
     return $this->render('AdminBlogBundle:default:add.html.twig',array(
        'form' => $form->createView(),
    )); 

} 
```

我想将此表单的值输入到我的数据库中，但它给了我错误

```
 An exception occurred while executing 'INSERT INTO Blog (blog_title, blog_desc,
  blog_url, image, tags, blog_created_at, blog_status) VALUES (?, ?, ?, ?, ?, ?, ?)'
  with params {"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null}: 
```

我从表单中发布的所有值都在请求的对象数组中，我通过调用 print_r($request); 但是在绑定时它给了我这个错误。所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:25:29.343

您必须将您的实体传递给 createFormBuilder 方法，否则表单构建器不知道它必须将表单字段映射到实体。像这样：

```
// ...
$form = $this->createFormBuilder($entity)
// ... 
```

这一切都在文档中：[http ://symfony.com/doc/current/book/forms.html#building-the-form](http://symfony.com/doc/current/book/forms.html#building-the-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:24:47.053

您必须像这样将模型对象传递给构建器：

```
$form = $this->createFormBuilder()
    // ...
    ->setData($entity)
    ->getForm(); 
```

或这个：

```
$form = $this->createFormBuilder('form', $entity)
    // ...
    ->getForm(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:31:50.473

* * *

* * *

像这样：- 用户名：类型：字符串长度：255 固定：假可为空：假

# visual-c++ - 如何在 C++ CLI 中将 String^ 转换为 String？

> ID：15309810
> 
> 赞同：1
> 
> 时间：2013-03-09T10:44:25.833
> 
> 标签：visual-c++, c++-cli

每当我尝试将一个字符串变量直接分配给另一个字符串变量时，我都会收到错误，发现没有合适的对话。
那么有没有办法将 String^ 指针转换为非指针结构 String ？

我想 ：

```
System::String a = System::String('X',256); 
```

我不想要：

```
System::String^ a = %System::String('X',256); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:16:15.717

不，没有，因为正如汉斯在评论中指出的那样，`System::String`它是不可变的。你不能分配它。您只能将句柄与全新的`System::String`对象相关联。

顺便提一句

```
System::String^ a = %System::String('X',256); 
```

不正确，应该是

```
System::String^ a = gcnew System::String('X',256); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T10:47:48.253

使用`System::String a('X', 256);`.

# ruby-on-rails - 更新rails中的属性后需要重新加载变量

> ID：15309811
> 
> 赞同：3
> 
> 时间：2013-03-09T10:44:28.097
> 
> 标签：ruby-on-rails

当我在 rspec 或 cucumber 中进行测试时，每次更新属性时，我都必须再次“重新加载”变量：

```
 @answer.update_attributes(notified: false)
  @answer = Answer.find(@answer) 
```

否则 @answer 不会更新。这似乎效率低下。这是正确的吗？我做错了什么还是这就是它应该工作的方式？

编辑：完整规格

```
describe "notify method" do

  before (:each) do
    @user = FactoryGirl.create(:user)
    friend = generate_friend_for_user(@user)
    @answer = FactoryGirl.create(:answer, user: friend, contact: @user.service)
    @answer.update_attributes(notified: false)
    @answer = Answer.find(@answer)
  end

it "should send an email and update last_email field" do
  @user.update_attributes(last_email: 25.hours.ago)
  @answer.notify.should == true
  @user = User.find(@user)
  @user.last_email.should > 1.minute.ago
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-04T10:09:43.930

我试图复制这个问题，我可以看到使用`ActiveRecord#update`重新加载内存中的记录，而`ActiveRecord#update_attributes`没有。您使用 是否有特定原因`ActiveRecord#update_attributes`？该方法在 Rails 6 中也被弃用了。

# wpf - 是/否切换按钮的 WPF 模板

> ID：15309812
> 
> 赞同：2
> 
> 时间：2013-03-09T10:44:28.727
> 
> 标签：wpf, wpf-controls

任何人都可以帮助我使用一个简单的模板来使 WPF ToggleButton 根据其切换状态显示“是”或“否”吗？

我不希望它看起来像一个按钮，只是一段显示为是或否的文本。

我希望它作为一个模板，我可以将它作为一种样式添加到我所有现有的 Toggle 控件中。

我尝试过使用 Blend，但我是模板新手，不知道该怎么做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T21:06:42.753

以@Batuu 的回复为基础，将内容保留为文本，只需将样式更新为

**更新**

```
<Style x:Key="OnOffToggleStyle" TargetType="ToggleButton">
  <Setter Property="Content" Value="Off"/>
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ToggleButton}">
        <ContentPresenter />
      </ControlTemplate>
    </Setter.Value>
  </Setter>
  <Style.Triggers>
      <Trigger Property="IsChecked" Value="True">
          <Setter Property="Content" Value="On">
          </Setter>
      </Trigger>
  </Style.Triggers>
</Style> 
```

与原始回复相比，此处添加的是

```
 <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ToggleButton}">
        <ContentPresenter />
      </ControlTemplate>
    </Setter.Value>
  </Setter> 
```

您基本上将按钮的模板设置为它所包含的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T11:19:06.900

您可以使用以下样式轻松完成此操作：

```
 <Window x:Class="WpfTest.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style x:Key="OnOffToggleStyle" TargetType="ToggleButton">
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Content">
                        <Setter.Value>
                            <TextBlock Text="Yes"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="Content">
                        <Setter.Value>
                            <TextBlock Text="No"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <ToggleButton Style="{StaticResource OnOffToggleStyle}"/>
    </Grid>
</Window> 
```

# php - 发布 JSON 缺少参数

> ID：15309817
> 
> 赞同：0
> 
> 时间：2013-03-09T10:45:19.673
> 
> 标签：php, restler

得到了一个具有 post 函数的类，该函数应该将大量参数存储到 db。问题是，我无法从请求正文中获取发送参数。我测试了几乎所有的组合：

*   添加 request_data 作为结束参数 - > 不工作（如果我放弃它说 ZEITSTEMPEL 丢失）
*   设置不带 NULL 的参数（必需）-> 不工作
*   只取两个参数（认为太多了）-> 不工作
*   试图通过 $request_data['ZEITSTEMPEL'] 获取参数 -> 不工作（显示为空）

我用restler的最新版本（今天）尝试了所有这些，并通过restler api和restcliebt（firefox插件）发布。

Firefox 插件通过我无法解决的其他错误（添加的内容类型 json 不起作用）

```
{
    "error": {
        "code": 403,
        "message": "Forbidden: Content type application/JSON is not supported."
    }
} 
```

我有点坚持这个希望可以提供帮助。这是我的代码：

```
class messprotokoll {

    /**
     * save messprotokoll
     *
     * one could save a messprotokoll
     * result is the status
     * in JSON format
     *
     *
     * @param string $ZEITSTEMPEL {@from body} comment
     * @param string $ID_MESSPROTOKOLL {@from body} comment
     * @param string $ID_GERAET {@from body} comment
     * @param string $D_229 {@from body} comment
     * @param string $D_230 {@from body} comment
     * @param string $TYP {@from body} comment
     * ....continues...
     * @throws 400 No value given for id
     * @return json
     *
     */
    function post($ZEITSTEMPEL=NULL,$ID_MESSPROTOKOLL=NULL,$ID_GERAET=NULL,$D_229=NULL,$D_230=NULL,$TYP=NULL,$D_226=NULL,$D_227=NULL,$D_228=NULL,$D_223=NULL,$D_224=NULL,$D_225=NULL,$D_220=NULL,$D_221=NULL,$D_222=NULL,$D_217=NULL,$D_218=NULL,$D_219=NULL,$D_214=NULL,$D_215=NULL,$D_216=NULL,$D_211=NULL,$D_212=NULL,$D_213=NULL,$D_208=NULL,$D_209=NULL,$D_210=NULL,$D_205=NULL,$D_206=NULL,$D_207=NULL,$D_202=NULL,$D_203=NULL,$D_204=NULL,$D_199=NULL,$D_200=NULL,$D_201=NULL,$D_196=NULL,$D_197=NULL,$D_198=NULL,$D_193=NULL,$D_194=NULL,$D_195=NULL,$D_190=NULL,$D_191=NULL,$D_192=NULL,$D_187=NULL,$D_188=NULL,$D_189=NULL,$D_184=NULL,$D_185=NULL,$D_186=NULL,$D_181=NULL,$D_182=NULL,$D_183=NULL,$D_178=NULL,$D_179=NULL,$D_180=NULL,$D_175=NULL,$D_176=NULL,$D_177=NULL,$D_172=NULL,$D_173=NULL,$D_174=NULL,$D_169=NULL,$D_170=NULL,$D_171=NULL,$D_166=NULL,$D_167=NULL,$D_168=NULL,$D_163=NULL,$D_164=NULL,$D_165=NULL,$D_160=NULL,$D_161=NULL,$D_162=NULL,$D_157=NULL,$D_158=NULL,$D_159=NULL,$D_154=NULL,$D_155=NULL,$D_156=NULL,$D_151=NULL,$D_152=NULL,$D_153=NULL,$D_148=NULL,$D_149=NULL,$D_150=NULL,$D_145=NULL,$D_146=NULL,$D_147=NULL,$D_142=NULL,$D_143=NULL,$D_144=NULL,$D_139=NULL,$D_140=NULL,$D_141=NULL,$D_136=NULL,$D_137=NULL,$D_138=NULL,$D_133=NULL,$D_134=NULL,$D_135=NULL,$D_130=NULL,$D_131=NULL,$D_132=NULL,$D_127=NULL,$D_128=NULL,$D_129=NULL,$D_124=NULL,$D_125=NULL,$D_126=NULL,$D_121=NULL,$D_122=NULL,$D_123=NULL,$D_118=NULL,$D_119=NULL,$D_120=NULL,$D_115=NULL,$D_116=NULL,$D_117=NULL,$D_112=NULL,$D_113=NULL,$D_114=NULL,$D_109=NULL,$D_110=NULL,$D_111=NULL,$D_106=NULL,$D_107=NULL,$D_108=NULL,$D_103=NULL,$D_104=NULL,$D_105=NULL,$D_100=NULL,$D_101=NULL,$D_102=NULL,$D_097=NULL,$D_098=NULL,$D_099=NULL,$D_094=NULL,$D_095=NULL,$D_096=NULL,$D_091=NULL,$D_092=NULL,$D_093=NULL,$D_088=NULL,$D_089=NULL,$D_090=NULL,$D_085=NULL,$D_086=NULL,$D_087=NULL,$D_082=NULL,$D_083=NULL,$D_084=NULL,$D_079=NULL,$D_080=NULL,$D_081=NULL,$D_076=NULL,$D_077=NULL,$D_078=NULL,$D_073=NULL,$D_074=NULL,$D_075=NULL,$D_070=NULL,$D_071=NULL,$D_072=NULL,$D_067=NULL,$D_068=NULL,$D_069=NULL,$D_064=NULL,$D_065=NULL,$D_066=NULL,$D_061=NULL,$D_062=NULL,$D_063=NULL,$D_058=NULL,$D_059=NULL,$D_060=NULL,$D_055=NULL,$D_056=NULL,$D_057=NULL,$D_052=NULL,$D_053=NULL,$D_054=NULL,$D_049=NULL,$D_050=NULL,$D_051=NULL,$D_046=NULL,$D_047=NULL,$D_048=NULL,$D_043=NULL,$D_044=NULL,$D_045=NULL,$D_040=NULL,$D_041=NULL,$D_042=NULL,$D_037=NULL,$D_038=NULL,$D_039=NULL,$D_034=NULL,$D_035=NULL,$D_036=NULL,$D_031=NULL,$D_032=NULL,$D_033=NULL,$D_028=NULL,$D_029=NULL,$D_030=NULL,$D_025=NULL,$D_026=NULL,$D_027=NULL,$D_022=NULL,$D_023=NULL,$D_024=NULL,$D_019=NULL,$D_020=NULL,$D_021=NULL,$D_016=NULL,$D_017=NULL,$D_018=NULL,$D_013=NULL,$D_014=NULL,$D_015=NULL,$D_010=NULL,$D_011=NULL,$D_012=NULL,$D_007=NULL,$D_008=NULL,$D_009=NULL,$D_004=NULL,$D_005=NULL,$D_006=NULL,$D_001=NULL,$D_002=NULL,$D_003=NULL,$PROTOKOLLNR=NULL,$GERAETENR=NULL,$PRUEFER=NULL,$UEBERTRAGUNGSDATEN=NULL,$ID_GERAET2=NULL,$ID_GERAET3=NULL,$ID_GERAET4=NULL,$GERAETENR2=NULL,$GERAETENR3=NULL,$GERAETENR4=NULL,$Bemerkungen=NULL,$Durchgefuehrte_Arbeiten=NULL,$ID_Techniker=NULL,$request_data=NULL) {

        //function post($ID_MESSPROTOKOLL,$ZEITSTEMPEL=NULL){
        echo "Request:".$request_data['ZEITSTEMPEL']; //this is NULL??
        $sql= "INSERT INTO dbo.MESSPROTOKOLL(ZEITSTEMPEL,ID_MESSPROTOKOLL,ID_GERAET,D_229,D_230,TYP,D_226,D_227,D_228,D_223,D_224,D_225,D_220,D_221,D_222,D_217,D_218,D_219,D_214,D_215,D_216,D_211,D_212,D_213,D_208,D_209,D_210,D_205,D_206,D_207,D_202,D_203,D_204,D_199,D_200,D_201,D_196,D_197,D_198,D_193,D_194,D_195,D_190,D_191,D_192,D_187,D_188,D_189,D_184,D_185,D_186,D_181,D_182,D_183,D_178,D_179,D_180,D_175,D_176,D_177,D_172,D_173,D_174,D_169,D_170,D_171,D_166,D_167,D_168,D_163,D_164,D_165,D_160,D_161,D_162,D_157,D_158,D_159,D_154,D_155,D_156,D_151,D_152,D_153,D_148,D_149,D_150,D_145,D_146,D_147,D_142,D_143,D_144,D_139,D_140,D_141,D_136,D_137,D_138,D_133,D_134,D_135,D_130,D_131,D_132,D_127,D_128,D_129,D_124,D_125,D_126,D_121,D_122,D_123,D_118,D_119,D_120,D_115,D_116,D_117,D_112,D_113,D_114,D_109,D_110,D_111,D_106,D_107,D_108,D_103,D_104,D_105,D_100,D_101,D_102,D_097,D_098,D_099,D_094,D_095,D_096,D_091,D_092,D_093,D_088,D_089,D_090,D_085,D_086,D_087,D_082,D_083,D_084,D_079,D_080,D_081,D_076,D_077,D_078,D_073,D_074,D_075,D_070,D_071,D_072,D_067,D_068,D_069,D_064,D_065,D_066,D_061,D_062,D_063,D_058,D_059,D_060,D_055,D_056,D_057,D_052,D_053,D_054,D_049,D_050,D_051,D_046,D_047,D_048,D_043,D_044,D_045,D_040,D_041,D_042,D_037,D_038,D_039,D_034,D_035,D_036,D_031,D_032,D_033,D_028,D_029,D_030,D_025,D_026,D_027,D_022,D_023,D_024,D_019,D_020,D_021,D_016,D_017,D_018,D_013,D_014,D_015,D_010,D_011,D_012,D_007,D_008,D_009,D_004,D_005,D_006,D_001,D_002,D_003,PROTOKOLLNR,GERAETENR,PRUEFER,UEBERTRAGUNGSDATEN,ID_GERAET2,ID_GERAET3,ID_GERAET4,GERAETENR2,GERAETENR3,GERAETENR4,Bemerkungen,Durchgefuehrte_Arbeiten,ID_Techniker) VALUES(:ZEITSTEMPEL,:ID_MESSPROTOKOLL,:ID_GERAET,:D_229,:D_230,:TYP,:D_226,:D_227,:D_228,:D_223,:D_224,:D_225,:D_220,:D_221,:D_222,:D_217,:D_218,:D_219,:D_214,:D_215,:D_216,:D_211,:D_212,:D_213,:D_208,:D_209,:D_210,:D_205,:D_206,:D_207,:D_202,:D_203,:D_204,:D_199,:D_200,:D_201,:D_196,:D_197,:D_198,:D_193,:D_194,:D_195,:D_190,:D_191,:D_192,:D_187,:D_188,:D_189,:D_184,:D_185,:D_186,:D_181,:D_182,:D_183,:D_178,:D_179,:D_180,:D_175,:D_176,:D_177,:D_172,:D_173,:D_174,:D_169,:D_170,:D_171,:D_166,:D_167,:D_168,:D_163,:D_164,:D_165,:D_160,:D_161,:D_162,:D_157,:D_158,:D_159,:D_154,:D_155,:D_156,:D_151,:D_152,:D_153,:D_148,:D_149,:D_150,:D_145,:D_146,:D_147,:D_142,:D_143,:D_144,:D_139,:D_140,:D_141,:D_136,:D_137,:D_138,:D_133,:D_134,:D_135,:D_130,:D_131,:D_132,:D_127,:D_128,:D_129,:D_124,:D_125,:D_126,:D_121,:D_122,:D_123,:D_118,:D_119,:D_120,:D_115,:D_116,:D_117,:D_112,:D_113,:D_114,:D_109,:D_110,:D_111,:D_106,:D_107,:D_108,:D_103,:D_104,:D_105,:D_100,:D_101,:D_102,:D_097,:D_098,:D_099,:D_094,:D_095,:D_096,:D_091,:D_092,:D_093,:D_088,:D_089,:D_090,:D_085,:D_086,:D_087,:D_082,:D_083,:D_084,:D_079,:D_080,:D_081,:D_076,:D_077,:D_078,:D_073,:D_074,:D_075,:D_070,:D_071,:D_072,:D_067,:D_068,:D_069,:D_064,:D_065,:D_066,:D_061,:D_062,:D_063,:D_058,:D_059,:D_060,:D_055,:D_056,:D_057,:D_052,:D_053,:D_054,:D_049,:D_050,:D_051,:D_046,:D_047,:D_048,:D_043,:D_044,:D_045,:D_040,:D_041,:D_042,:D_037,:D_038,:D_039,:D_034,:D_035,:D_036,:D_031,:D_032,:D_033,:D_028,:D_029,:D_030,:D_025,:D_026,:D_027,:D_022,:D_023,:D_024,:D_019,:D_020,:D_021,:D_016,:D_017,:D_018,:D_013,:D_014,:D_015,:D_010,:D_011,:D_012,:D_007,:D_008,:D_009,:D_004,:D_005,:D_006,:D_001,:D_002,:D_003,:PROTOKOLLNR,:GERAETENR,:PRUEFER,:UEBERTRAGUNGSDATEN,:ID_GERAET2,:ID_GERAET3,:ID_GERAET4,:GERAETENR2,:GERAETENR3,:GERAETENR4,:Bemerkungen,:Durchgefuehrte_Arbeiten,:ID_Techniker)";
        try {
            $db = DB::getInstance();
            $stmt = $db->dbh->prepare($sql);
            $stmt->bindParam(':ZEITSTEMPEL', $ZEITSTEMPEL); //this is also null??
            $stmt->bindParam(':ID_MESSPROTOKOLL', $ID_MESSPROTOKOLL);
            $stmt->bindParam(':ID_GERAET', $ID_GERAET);
            //continues...
            $stmt->execute();
            $count = $stmt->rowCount();
            $db = null;
            $json = '{"count":{'.json_encode($count).'}}';
        } catch(PDOException $e) {
            return '{"error":{"text":'. $e->getMessage() .'}}';
        }
        return $json;
    }
} 
```

如果您需要示例 JSON，请告诉我。

任何想法？谢谢英格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:18:23.287

Restler 处理转换 php 数组或对象 t JSON、XML 等。所以不要自己进行 json_encode。只返回结果

你应该返回类似的东西

```
return array('count'=>$count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:06:19.907

查询字符串显然对总长度有限制，但body参数没有这样的限制

我已经用 Restler 和 API Explorer 测试了以下内容，它工作正常。确保您拥有最新版本的 Restler（来自 master 分支）和最新版本的 API Explorer

```
<?php

class messprotokoll
{

    /**
     * save messprotokoll
     *
     * one could save a messprotokoll
     * result is the status
     *
     *
     * @param string $ZEITSTEMPEL      {@from body} comment
     * @param string $ID_MESSPROTOKOLL {@from body} comment
     * @param string $ID_GERAET        {@from body} comment
     * @param string $D_229            {@from body} comment
     * @param string $D_230            {@from body} comment
     * @param string $TYP              {@from body} comment
     * ....continues...
     *
     * @throws 400 No value given for id
     * @return array
     *
     */
    function post($ZEITSTEMPEL = NULL, $ID_MESSPROTOKOLL = NULL, $ID_GERAET = NULL, $D_229 = NULL, $D_230 = NULL, $TYP = NULL, $D_226 = NULL, $D_227 = NULL, $D_228 = NULL, $D_223 = NULL, $D_224 = NULL, $D_225 = NULL, $D_220 = NULL, $D_221 = NULL, $D_222 = NULL, $D_217 = NULL, $D_218 = NULL, $D_219 = NULL, $D_214 = NULL, $D_215 = NULL, $D_216 = NULL, $D_211 = NULL, $D_212 = NULL, $D_213 = NULL, $D_208 = NULL, $D_209 = NULL, $D_210 = NULL, $D_205 = NULL, $D_206 = NULL, $D_207 = NULL, $D_202 = NULL, $D_203 = NULL, $D_204 = NULL, $D_199 = NULL, $D_200 = NULL, $D_201 = NULL, $D_196 = NULL, $D_197 = NULL, $D_198 = NULL, $D_193 = NULL, $D_194 = NULL, $D_195 = NULL, $D_190 = NULL, $D_191 = NULL, $D_192 = NULL, $D_187 = NULL, $D_188 = NULL, $D_189 = NULL, $D_184 = NULL, $D_185 = NULL, $D_186 = NULL, $D_181 = NULL, $D_182 = NULL, $D_183 = NULL, $D_178 = NULL, $D_179 = NULL, $D_180 = NULL, $D_175 = NULL, $D_176 = NULL, $D_177 = NULL, $D_172 = NULL, $D_173 = NULL, $D_174 = NULL, $D_169 = NULL, $D_170 = NULL, $D_171 = NULL, $D_166 = NULL, $D_167 = NULL, $D_168 = NULL, $D_163 = NULL, $D_164 = NULL, $D_165 = NULL, $D_160 = NULL, $D_161 = NULL, $D_162 = NULL, $D_157 = NULL, $D_158 = NULL, $D_159 = NULL, $D_154 = NULL, $D_155 = NULL, $D_156 = NULL, $D_151 = NULL, $D_152 = NULL, $D_153 = NULL, $D_148 = NULL, $D_149 = NULL, $D_150 = NULL, $D_145 = NULL, $D_146 = NULL, $D_147 = NULL, $D_142 = NULL, $D_143 = NULL, $D_144 = NULL, $D_139 = NULL, $D_140 = NULL, $D_141 = NULL, $D_136 = NULL, $D_137 = NULL, $D_138 = NULL, $D_133 = NULL, $D_134 = NULL, $D_135 = NULL, $D_130 = NULL, $D_131 = NULL, $D_132 = NULL, $D_127 = NULL, $D_128 = NULL, $D_129 = NULL, $D_124 = NULL, $D_125 = NULL, $D_126 = NULL, $D_121 = NULL, $D_122 = NULL, $D_123 = NULL, $D_118 = NULL, $D_119 = NULL, $D_120 = NULL, $D_115 = NULL, $D_116 = NULL, $D_117 = NULL, $D_112 = NULL, $D_113 = NULL, $D_114 = NULL, $D_109 = NULL, $D_110 = NULL, $D_111 = NULL, $D_106 = NULL, $D_107 = NULL, $D_108 = NULL, $D_103 = NULL, $D_104 = NULL, $D_105 = NULL, $D_100 = NULL, $D_101 = NULL, $D_102 = NULL, $D_097 = NULL, $D_098 = NULL, $D_099 = NULL, $D_094 = NULL, $D_095 = NULL, $D_096 = NULL, $D_091 = NULL, $D_092 = NULL, $D_093 = NULL, $D_088 = NULL, $D_089 = NULL, $D_090 = NULL, $D_085 = NULL, $D_086 = NULL, $D_087 = NULL, $D_082 = NULL, $D_083 = NULL, $D_084 = NULL, $D_079 = NULL, $D_080 = NULL, $D_081 = NULL, $D_076 = NULL, $D_077 = NULL, $D_078 = NULL, $D_073 = NULL, $D_074 = NULL, $D_075 = NULL, $D_070 = NULL, $D_071 = NULL, $D_072 = NULL, $D_067 = NULL, $D_068 = NULL, $D_069 = NULL, $D_064 = NULL, $D_065 = NULL, $D_066 = NULL, $D_061 = NULL, $D_062 = NULL, $D_063 = NULL, $D_058 = NULL, $D_059 = NULL, $D_060 = NULL, $D_055 = NULL, $D_056 = NULL, $D_057 = NULL, $D_052 = NULL, $D_053 = NULL, $D_054 = NULL, $D_049 = NULL, $D_050 = NULL, $D_051 = NULL, $D_046 = NULL, $D_047 = NULL, $D_048 = NULL, $D_043 = NULL, $D_044 = NULL, $D_045 = NULL, $D_040 = NULL, $D_041 = NULL, $D_042 = NULL, $D_037 = NULL, $D_038 = NULL, $D_039 = NULL, $D_034 = NULL, $D_035 = NULL, $D_036 = NULL, $D_031 = NULL, $D_032 = NULL, $D_033 = NULL, $D_028 = NULL, $D_029 = NULL, $D_030 = NULL, $D_025 = NULL, $D_026 = NULL, $D_027 = NULL, $D_022 = NULL, $D_023 = NULL, $D_024 = NULL, $D_019 = NULL, $D_020 = NULL, $D_021 = NULL, $D_016 = NULL, $D_017 = NULL, $D_018 = NULL, $D_013 = NULL, $D_014 = NULL, $D_015 = NULL, $D_010 = NULL, $D_011 = NULL, $D_012 = NULL, $D_007 = NULL, $D_008 = NULL, $D_009 = NULL, $D_004 = NULL, $D_005 = NULL, $D_006 = NULL, $D_001 = NULL, $D_002 = NULL, $D_003 = NULL, $PROTOKOLLNR = NULL, $GERAETENR = NULL, $PRUEFER = NULL, $UEBERTRAGUNGSDATEN = NULL, $ID_GERAET2 = NULL, $ID_GERAET3 = NULL, $ID_GERAET4 = NULL, $GERAETENR2 = NULL, $GERAETENR3 = NULL, $GERAETENR4 = NULL, $Bemerkungen = NULL, $Durchgefuehrte_Arbeiten = NULL, $ID_Techniker = NULL, $request_data = NULL)
    {

        var_dump($request_data['ZEITSTEMPEL']); //this is NULL??
        $sql = "INSERT INTO dbo.MESSPROTOKOLL(ZEITSTEMPEL,ID_MESSPROTOKOLL,ID_GERAET,D_229,D_230,TYP,D_226,D_227,D_228,D_223,D_224,D_225,D_220,D_221,D_222,D_217,D_218,D_219,D_214,D_215,D_216,D_211,D_212,D_213,D_208,D_209,D_210,D_205,D_206,D_207,D_202,D_203,D_204,D_199,D_200,D_201,D_196,D_197,D_198,D_193,D_194,D_195,D_190,D_191,D_192,D_187,D_188,D_189,D_184,D_185,D_186,D_181,D_182,D_183,D_178,D_179,D_180,D_175,D_176,D_177,D_172,D_173,D_174,D_169,D_170,D_171,D_166,D_167,D_168,D_163,D_164,D_165,D_160,D_161,D_162,D_157,D_158,D_159,D_154,D_155,D_156,D_151,D_152,D_153,D_148,D_149,D_150,D_145,D_146,D_147,D_142,D_143,D_144,D_139,D_140,D_141,D_136,D_137,D_138,D_133,D_134,D_135,D_130,D_131,D_132,D_127,D_128,D_129,D_124,D_125,D_126,D_121,D_122,D_123,D_118,D_119,D_120,D_115,D_116,D_117,D_112,D_113,D_114,D_109,D_110,D_111,D_106,D_107,D_108,D_103,D_104,D_105,D_100,D_101,D_102,D_097,D_098,D_099,D_094,D_095,D_096,D_091,D_092,D_093,D_088,D_089,D_090,D_085,D_086,D_087,D_082,D_083,D_084,D_079,D_080,D_081,D_076,D_077,D_078,D_073,D_074,D_075,D_070,D_071,D_072,D_067,D_068,D_069,D_064,D_065,D_066,D_061,D_062,D_063,D_058,D_059,D_060,D_055,D_056,D_057,D_052,D_053,D_054,D_049,D_050,D_051,D_046,D_047,D_048,D_043,D_044,D_045,D_040,D_041,D_042,D_037,D_038,D_039,D_034,D_035,D_036,D_031,D_032,D_033,D_028,D_029,D_030,D_025,D_026,D_027,D_022,D_023,D_024,D_019,D_020,D_021,D_016,D_017,D_018,D_013,D_014,D_015,D_010,D_011,D_012,D_007,D_008,D_009,D_004,D_005,D_006,D_001,D_002,D_003,PROTOKOLLNR,GERAETENR,PRUEFER,UEBERTRAGUNGSDATEN,ID_GERAET2,ID_GERAET3,ID_GERAET4,GERAETENR2,GERAETENR3,GERAETENR4,Bemerkungen,Durchgefuehrte_Arbeiten,ID_Techniker) VALUES(:ZEITSTEMPEL,:ID_MESSPROTOKOLL,:ID_GERAET,:D_229,:D_230,:TYP,:D_226,:D_227,:D_228,:D_223,:D_224,:D_225,:D_220,:D_221,:D_222,:D_217,:D_218,:D_219,:D_214,:D_215,:D_216,:D_211,:D_212,:D_213,:D_208,:D_209,:D_210,:D_205,:D_206,:D_207,:D_202,:D_203,:D_204,:D_199,:D_200,:D_201,:D_196,:D_197,:D_198,:D_193,:D_194,:D_195,:D_190,:D_191,:D_192,:D_187,:D_188,:D_189,:D_184,:D_185,:D_186,:D_181,:D_182,:D_183,:D_178,:D_179,:D_180,:D_175,:D_176,:D_177,:D_172,:D_173,:D_174,:D_169,:D_170,:D_171,:D_166,:D_167,:D_168,:D_163,:D_164,:D_165,:D_160,:D_161,:D_162,:D_157,:D_158,:D_159,:D_154,:D_155,:D_156,:D_151,:D_152,:D_153,:D_148,:D_149,:D_150,:D_145,:D_146,:D_147,:D_142,:D_143,:D_144,:D_139,:D_140,:D_141,:D_136,:D_137,:D_138,:D_133,:D_134,:D_135,:D_130,:D_131,:D_132,:D_127,:D_128,:D_129,:D_124,:D_125,:D_126,:D_121,:D_122,:D_123,:D_118,:D_119,:D_120,:D_115,:D_116,:D_117,:D_112,:D_113,:D_114,:D_109,:D_110,:D_111,:D_106,:D_107,:D_108,:D_103,:D_104,:D_105,:D_100,:D_101,:D_102,:D_097,:D_098,:D_099,:D_094,:D_095,:D_096,:D_091,:D_092,:D_093,:D_088,:D_089,:D_090,:D_085,:D_086,:D_087,:D_082,:D_083,:D_084,:D_079,:D_080,:D_081,:D_076,:D_077,:D_078,:D_073,:D_074,:D_075,:D_070,:D_071,:D_072,:D_067,:D_068,:D_069,:D_064,:D_065,:D_066,:D_061,:D_062,:D_063,:D_058,:D_059,:D_060,:D_055,:D_056,:D_057,:D_052,:D_053,:D_054,:D_049,:D_050,:D_051,:D_046,:D_047,:D_048,:D_043,:D_044,:D_045,:D_040,:D_041,:D_042,:D_037,:D_038,:D_039,:D_034,:D_035,:D_036,:D_031,:D_032,:D_033,:D_028,:D_029,:D_030,:D_025,:D_026,:D_027,:D_022,:D_023,:D_024,:D_019,:D_020,:D_021,:D_016,:D_017,:D_018,:D_013,:D_014,:D_015,:D_010,:D_011,:D_012,:D_007,:D_008,:D_009,:D_004,:D_005,:D_006,:D_001,:D_002,:D_003,:PROTOKOLLNR,:GERAETENR,:PRUEFER,:UEBERTRAGUNGSDATEN,:ID_GERAET2,:ID_GERAET3,:ID_GERAET4,:GERAETENR2,:GERAETENR3,:GERAETENR4,:Bemerkungen,:Durchgefuehrte_Arbeiten,:ID_Techniker)";
        try {
            $db = DB::getInstance();
            $stmt = $db->dbh->prepare($sql);
            $stmt->bindParam(':ZEITSTEMPEL', $ZEITSTEMPEL); //this is also null??
            $stmt->bindParam(':ID_MESSPROTOKOLL', $ID_MESSPROTOKOLL);
            $stmt->bindParam(':ID_GERAET', $ID_GERAET);
            //continues...
            $stmt->execute();
            $count = $stmt->rowCount();
            $db = null;
            $array = array('count' => $count);
        } catch (PDOException $e) {
            throw new \Luracast\Restler\RestException(500, $e->getMessage());
        }
        return $array;
    }
} 
```

当我与我们的文档示例一起尝试时产生的 API Explorer

![下载并查看实际大小的图像](../Images/e80d85cb495581d91fe50e4c364645ee.png)

# bash - 将bash中的命令输出解析为变量

> ID：15309818
> 
> 赞同：2
> 
> 时间：2013-03-09T10:45:32.937
> 
> 标签：bash

我有许多 bash 脚本，每个脚本都在愉快地做自己的事情。请注意，虽然我使用其他语言进行编程，但我只使用 Bash 来实现自动化，而且不是很擅长。

我现在正在尝试将其中的一些组合起来创建“元”脚本，如果你愿意的话，它使用其他脚本作为步骤。问题是我需要解析每个步骤的输出，以便能够将其中的一部分作为参数传递给下一步。

一个例子：

`stepA.sh`

```
[...does stuff here...]
echo "Task complete successfuly"
echo "Files available at: $d1/$1"
echo "Logs available at: $d2/$1" 
```

以上都是路径，例如 /var/www/thisisatest 和 /var/log/thisisatest （请注意，文件始终以 /var/www 开头，日志始终以 /var/log 开头）。我只对文件路径感兴趣。

`steB.sh`

```
[...does stuff here...]
echo "Creation of $d1 complete."
echo "Access with username $usr and password $pass" 
```

这里的所有变量都是简单的字符串，可能包含特殊字符（没有空格）

我正在尝试构建的是一个运行脚本`stepA.sh`，然后`stepB.sh`使用每个脚本的输出来做自己的事情。我目前正在做什么（以上两个脚本都符号链接到 /usr/local/bin 没有该`.sh`部分并使其可执行）：

```
 #!/bin/bash

 stepA $1 | while read -r line; do
 # Create the container, and grab the file location
 # then pass it to then next pipe
   if [[ "$line" == *:* ]]
   then
     POS=`expr index "$line" "/"`
     PTH="/${line:$POS}"
     if [[ "$PTH" == *www* ]]
     then
       #OK, have what I need here, now what?
       echo $PTH;
     fi
   fi
done 

# Somehow get $PTH here

stepB $1 | while read -r line; do
 ...
done

#somehow have the required strings here 
```

我被困在传递`PTH`到下一步。我知道这是因为管道在子shell中运行它，但是我看到的所有示例都指的是文件而不是命令，我无法使它工作。我尝试将管道`echo`传输到“下一步”，例如

```
stepA | while ...
    echo $PTH
done | while ...
 #Got my var here, but cannot run stuff
done 
```

如何运行`stepA`并让`PTH`变量可供以后使用？有没有“更好的方法”从输出中提取我需要的路径而不是嵌套`if`的 s ？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:05:08.180

由于您明确使用 bash（在 shebang 行中），因此您可以使用其进程替换功能而不是管道：

```
while read -r line; do
    if [[ "$line" == *:* ]]
        .....
    fi
done < <(stepA $1) 
```

或者，您可以将命令的输出捕获到字符串变量，然后对其进行解析：

```
output="$(stepA $1)"
tmp="${output#*$'\nFiles available at: '}" # output with everything before the filepath trimmed
filepath="${tmp%%$'\n'*}" # trim the first newline and everything after it from $tmp
tmp="${output#*$'\nLogs available at: '}"
logpath="${tmp%%$'\n'*}" 
```

# jsf - 在仪表板页面片段或内联框架的区域中打开commandMenu的链接jsf页面/片段

> ID：15309819
> 
> 赞同：0
> 
> 时间：2013-03-09T10:45:34.670
> 
> 标签：jsf, oracle-adf

我的仪表板页面片段上有不同的菜单，并使用 goMenuLink 转到下一页，但是当我单击任何 goMenuLink 时，页面会在新选项卡中打开。现在我想使用 commandMenu 导航到页面/片段，并且还希望菜单链接页面将在仪表板页面片段的中心打开。如何达到同样的效果

当用户单击另一个命令菜单时如何重新加载页面或刷新区域或内联框架。当我通过创建动态区域并在菜单容器中提供动态区域链接来从任务流制作菜单时，我能够做同样的事情，但同样不适用于 commandMenu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:20:33.057

使用以下内容创建任务流

1) 创建页面片段1 将仪表板内容添加到此页面片段。把它`af:menu-->af:commadMenuItem`放在中间。使用适当的布局进入中心
2）创建页面片段 2，添加“af：inlineFrame”并将您的页面 URL 添加到内联框架的源属性
3）为命令的操作属性提供值“转到片段 2”片段 1 中的菜单项
4) 创建片段 1 和片段 2 之间的导航流，结果值为“转到片段 2”

在运行时，当您单击片段 1 中的命令菜单时，它会将您带到同一选项卡中的片段 2。

# neo4j - 使用密码查询和 spring neo4j 进行通配符搜索

> ID：15309820
> 
> 赞同：0
> 
> 时间：2013-03-09T10:45:36.743
> 
> 标签：neo4j, spring-data-neo4j

当我在 neo4j 控制台中执行以下查询时，我得到了正确的结果集。开始 n=node:search('username:*') return n.username;

我在我的 java web 应用程序中使用 spring data neo4j。

在存储库代码中，我将查询定义为：

@Query("START n=node:search({0}) RETURN n.name as name, n.username as username 参数传递 {0} = 'username:*'

也不例外，但结果集大小为 0。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:58:29.777

不幸的是，据我所知，整个 lucene 查询不能成为 Cypher 中的参数。您可能需要求助于字符串连接/插值。类似于我发布的关于关系类型作为参数的问题：[https ://github.com/neo4j/neo4j/issues/340](https://github.com/neo4j/neo4j/issues/340)

# xcode - 单击 chiledviewcontroller 按钮时应用程序崩溃

> ID：15309822
> 
> 赞同：1
> 
> 时间：2013-03-09T10:45:43.087
> 
> 标签：xcode, ipad, uiviewcontroller, uibutton

我正在创建一个 ipad 应用程序，我需要在 ParentViewController 的视图中显示一个 ChildViewController，下面的代码可以完美运行。

```
- (void)viewDidLoad
{
   FavViewController *aViewController = [[FavViewController alloc] initWithNibName:@"FavViewController" bundle:nil];
   [self.mainView addSubview:aViewController.view];
   [super viewDidLoad];
} 
```

当这`favViewController`加载到`self.MainView`父视图中时，childViewController 中的所有控件都显示正常，但是当我单击 UIButton 时，应用程序崩溃了。下面是崩溃的日志。

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteMapTable myAction:]: unrecognized selector sent to instance 0x8093170' *** First throw call stack: (0x1733012 0x1558e7e 0x17be4bd 0x1722bbc 0x172294e 0x156c705 0x4a02c0 0x4a0258 0x561021 0x56157f 0x560222 0x4cfb1d 0x4cff02 0x4add4a 0x49f698 0x25fddf9 0x25fdad0 0x16a8bf5 0x16a8962 0x16d9bb6 0x16d8f44 0x16d8e1b 0x25fc7e3 0x25fc668 0x49cffc 0x255d 0x2485 0x1) libc++abi.dylib: terminate called throwing an exception`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:12:14.990

这是一个由误用导致的内存管理错误`UIViewControllers`。

在`FavViewController`您`-viewDidLoad`中创建的不会保留，因此在您离开该方法后不久将被释放。

您已经创建了一个带有控制器的视图，将该视图内的控件的操作绑定到控件，允许销毁控制器，然后尝试通过点击按钮来触发其中一个操作。

您看到的错误是因为`NSConcreteMapTable`now 的一个实例恰好占用了曾经包含您的`FavViewController`.

此外，您不应随意嵌套属于`UIViewController`此类子类的视图。如果您需要这样做，您应该使用“容器视图控制器”方法来管理这些子控制器。`- addChildViewController:`是其中一种方法，并且恰好解决了问题，因为父视图控制器现在保留对子控制器的引用，因此不会被释放。

# java - 获取 java.exe 的路径

> ID：15309827
> 
> 赞同：0
> 
> 时间：2013-03-09T10:46:21.263
> 
> 标签：java, linux, windows, macos, path

我需要有关获取 java.exe 路径的帮助。但我需要它与java代码有关。而且我希望它也可以在 Linux 和 Mac 以及其他系统上运行，所以不会有 java.exe，我不知道那里有什么。

有谁知道该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-09T14:06:13.983

看看这个帖子。[获取 JRE 的路径](https://stackoverflow.com/questions/4531626/get-path-to-java-jre)

它解释了如何获取 java.exe bin/java 文件在操作系统上的路径。

另请参阅文档以获取更多可用属性

[Java System.getProperty 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29)

# javascript - XMLHttpRequest 无法正常工作（不返回任何内容）

> ID：15309833
> 
> 赞同：0
> 
> 时间：2013-03-09T10:47:06.860
> 
> 标签：javascript, xmlhttprequest

我正在尝试制作一个 javascript rss 解析器。但是我什至在连接到 url 并取回文档时遇到了问题。

```
function myFunction(){
  var xmlDoc;
  var url="http://www.24ur.com/";
  var conn = new XMLHttpRequest();
  conn.onreadystatechange = function() {
    if (conn.readyState == 4) {
      console.log(conn.status);
    }
  };
  conn.open("GET", url, true);
  conn.send();
} 
```

console.log 中的 conn.status 为 0。我进入 if 子句，但 conn.status 返回 0，responseText 返回 null。这应该工作吗？

# entity-framework - 实体框架 - 创建新子项时重复父项（一个）（很多）

> ID：15309835
> 
> 赞同：8
> 
> 时间：2013-03-09T10:47:12.123
> 
> 标签：entity-framework

因为我的英文不好，我就直接开门见山了。为什么在数据库中记录公司创建新记录而客户记录引用新公司记录？感谢帮助 ：）

```
public class Company : EntityBase
{
    public string Name { get; set; }

    public List<Customer> Customers { get; set; }
    public List<Invoice> Invoices { get; set; }
}

public class Customer : EntityBase
{
    public string Name { get; set; }

    public Company Company { get; set; }
    public List<Card> Cards { get; set; }
}

public class EFRepositoryBase<TEntity> where TEntity : class, IEntity, new()
{
    protected IUnitOfWork UnitOfWork { get; set; }

    protected BenzineFleetContext Context
    {
        get { return (BenzineFleetContext) UnitOfWork; }
    }

    public virtual DbSet<TEntity> GetDbSet<TEntity>() where TEntity : class
    {
        return Context.Set<TEntity>();
    }

    public virtual void Add(TEntity entity)
    {
        GetDbSet<TEntity>().Add(entity);
    }

    public virtual void SaveChanges()
    {
        Context.SaveChanges();
    }
}

    //Save 
```

var cus = 新客户 {Company = SelectedCompany}

```
 _srv.Add(cus);
    _srv.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T11:19:56.150

当您通过`DbSet<T>.Add`方法添加实体时，实体及其所有尚未在上下文中引用的实体将被标记为`Added`在 ChangeTracker 中。这就是添加新公司的原因（看起来公司没有附加到上下文中）：

```
var customer = new Customer {Company = SelectedCompany}
context.Customers.Add(customer);
// at this point customer state will be Added
// company state also will be Added
context.SaveChanges(); 
```

为避免此类行为，请在添加新客户之前将公司附加到上下文中：

```
var customer = new Customer {Company = SelectedCompany}
context.Companies.Attach(SelectedCompany);
context.Customers.Add(customer);
// at this point customer state will be Added
// company state will be Unchanged (if you haven't change it)
context.SaveChanges(); 
```

另一种方法是手动维护状态：

```
var customer = new Customer {Company = SelectedCompany}
context.Customers.Add(customer);
context.Entry(SelectedCompany).State = EntityState.Unchanged;
// at this point customer state will be Added
// company state will be Unchanged
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-09T11:26:38.657

您可以 在实体框架中看到所有基本**CRUD（创建读取更新删除）操作的**[这个](http://www.developer2blog.com/post/2012/08/14/Entity-framework-%28Basic%29.aspx)和[这个。](http://www.developer2blog.com/post/2012/11/17/Entity-framework-%28ONE-TO-MANY-RELATIONSHIP%29.aspx)这对你会有很大帮助。还可以简要了解外键基础和一对多关系。

# android - 检查webview是否正确加载了android

> ID：15309839
> 
> 赞同：0
> 
> 时间：2013-03-09T10:47:52.577
> 
> 标签：android, caching, webview

我想在我的 webview 未正确加载时显示警报。当连接失败时我已经显示了一个警报，但是如果从缓存中加载了 webview，我不想显示那个警报。一个解决方案可能是知道 webview 是否已从缓存中正确加载，但我不知道该怎么做。任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T09:24:30.497

对于所有可能的情况，我找到了一个完整的工作解决方案。它基于手动保存和检索缓存数据。如果我缓存了我的 webview，我会从保存它的位置加载它。如果没有，我检查互联网连接并将其保存在我的“自定义”缓存中（位于我的应用缓存目录中）。然后，当我没有“缓存”我的 webview 并且我没有互联网连接时，我只显示连接警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T10:28:52.533

最后我找到了一个 hack，但我想收到更多可能的解决方案，因为我确信这不是最好的方法。我正在使用“onScaleChanged”事件来确定 webview 是否已加载图像（在我的情况下，我只加载图像）。该事件在从 Internet 或缓存加载图像时触发，因此如果**使用某些特殊比例值**触发它，则表示图像尚未加载。在某些情况下，根据图像大小和比例，这些值并不能指示它是否正确加载，但在大多数情况下它确实如此（并且选择图像比例它总是正确地工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:00:11.563

我不知道这是否有帮助，但是当我的 webview 中发现错误时，我使用以下代码显示警报对话框。

```
@Override
    public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(Webview_Main.this);
        localBuilder2.setTitle(R.string.webview_error_received_title);
        localBuilder2.setMessage(R.string.webview_error_received);
        localBuilder2.setIcon(R.drawable.ic_launcher);
        localBuilder2.setPositiveButton("Ok",
                new DialogInterface.OnClickListener() {
            public void onClick(
                    DialogInterface paramDialogInterface,
                    int paramInt) {
                finish();
            }
        });
        localBuilder2.show();
    }; 
```

# image - 悬停时图像向左移动

> ID：15309843
> 
> 赞同：1
> 
> 时间：2013-03-09T10:48:26.523
> 
> 标签：image, hover, position, padding, transition

我是网页设计的新手，我有一个特殊的例子，好吧，我被困在这里：你有 3 张图片组合了徽标，当你将鼠标悬停在中间的图片上时，侧面的图片每边都像 50px 一样大。我已经实现了使用填充在右侧移动图像的目标，但是当我尝试对左侧执行相同操作时，我的图像开始向左跳并返回到原始位置。

如果 some1 有更好的建议，我喜欢研究它。

这是我希望实现的一个[例子。](http://imageshack.us/photo/my-images/233/exampleuu.png/)

我想出了这段代码：

```
 #logo_levo{
        position: absolute;
        float: right;
        width: 111px;
        height: 111px;
        -moz-transition:all 0.3s linear;

    }
    #logo_levo:hover{
        padding-right: 100px;
    } 
```

html:

```
<img id="logo_levo" src="data/images/Class_B_obroc1_logo.png"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T19:00:50.777

好的，这是您可以处理的事情。小提琴上的CSS规则..检查小提琴

[在这里摆弄](http://jsfiddle.net/RruZ7/)

```
<div id='logo'>
  <div id='a'></div><!--left image-->
  <div id='b'></div><!--middle image-->
  <div id='c'></div><!--right image-->
</div> 
```

# c# - 创建供 Excel 和 C# 使用的 C++ .dll（32/64 位窗口）

> ID：15309846
> 
> 赞同：1
> 
> 时间：2013-03-09T10:48:36.213
> 
> 标签：c#, c++, winapi, vba, dll

最近我想开始用 Visual C++ Express 2010 构建一个 .dll 数学库。

我想将 .dll 用作 BOTH`Excel VBA`和`C#`应用程序的库参考。我希望它可以在两个`32bit/64bit`窗口中工作。.dll 也应该能够在构建后被其他 PC 使用。

1.  从使用 Win32 项目开始我是否正确？（似乎我不能`ATL / MFC`在 Express 版本中使用）

2.  我是否需要在 .dll 中为 VBA 和 C# 指定 2 组不同的接口来加载函数？（VBA 需要使用 __stdcall）

3.  在其他 PC 中使用 .dll 的任何部署设置？（需要任何 regsvr32 cmd 进程吗？）

4.  制作 C++ DLL 以导出类的任何初学者示例？（例如 VBA / C# 可以从这个 dll 实例化一个新类）...

因为我不确定是否可以在 C++ .dll 中使用以下 .header 文件在 VBA/C# 中实例化 ClassA 和 ClassB：

```
#pragma once

#ifdef DLLDIR_EX
    #define DLLDIR  __declspec(dllexport)   // export DLL information
#else
   #define DLLDIR  __declspec(dllimport)   // import DLL information
#endif 

class DLLDIR ClassA
{
public:
   void AMethod1();
   void AMethod2();
};

class DLLDIR ClassB
{
public:
   void BMethodi();
   void BMethodii();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:31:39.280

您不能使用 C++ 构建导出 COM 类型或 C 样式函数的 DLL 文件，并让它在 32 位和 64 位环境中工作。DLL 文件是一种 PE/COFF 映像，PE 只支持每个文件一个 ISA（与 Macintosh 可执行格式相比，它允许在同一个映像文件中有多个 ISA）。您必须重新编译两次，一次用于 x86，另一次用于 x64。此规则的唯一例外是 .NET “AnyCPU” DLL，但这是另一回事。

[根据此比较表](http://msdn.microsoft.com/en-us/library/vstudio/hs24szh9%28v=vs.100%29.aspx)，C++ Express 2010 不包含 x64 编译器，也不包含 MFC 和 ATL 库，尽管您可以将它们作为 Windows SDK 的一部分单独下载。

针对您的问题：

1.  就我个人而言，我会从“空项目”模板开始——我不喜欢 Win32 模板提供的所有不必要的标题和（看似）复杂的初始项目设置。然后，我将自己手动添加自己的 .c/.h/.cpp 文件并删除代码。
2.  如果您只是导出函数而不是 COM 类型，那么您无需担心接口。只要您的函数正确导出（参见此处：http: [//msdn.microsoft.com/en-us/library/ys435b3s%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ys435b3s%28v=vs.80%29.aspx)），它们就可以从.NET（包括 C#和 VB.NET）和 VB6/VBA 和 C/C++。
3.  “其他电脑”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:30:35.743

关于#2，您不需要两组接口，因为 C# 也可以使用 __stdcall 调用约定。

# proxy - PHP 代理 php.ini 设置

> ID：15309849
> 
> 赞同：2
> 
> 时间：2013-03-09T10:49:09.713
> 
> 标签：proxy, php

我正在尝试设置让 PHP`chroot`在 OSX 的监狱中正常运行。因为 DNS 查找在 OSX 上的 chroot 中不起作用，所以我想将所有 TCP 连接设置为通过 127.0.0.1 上的代理

有一个错误报告，据称此选项已[添加到 PHP 5](https://bugs.php.net/bug.php?id=29280)

> 摘要：添加 php.ini 选项以设置包装器的默认代理

但是我似乎无法找出这个选项是什么。如何为所有流包装器设置默认代理？

# php - PHP二次方程计算器奇怪的输出

> ID：15309854
> 
> 赞同：0
> 
> 时间：2013-03-09T10:49:47.493
> 
> 标签：php, calculator, quadratic

用 PHP 编写了一个二次方程计算器后，我认为我的大部分数学问题都会遇到。但并非如此，因为我得到了非常奇怪的输出。该程序应该从表单`$_GET`中获取 x ²、 x 和其他数字的值，计算 x 的值，然后显示它们。当我第一次加载页面时，程序会输出`-10`（即使我没有在表单中输入任何内容），然后如果我输入值则什么也不做。例如，如果我输入`1, 11 and 18`应该输出的文本字段，`x = -9 and -2`程序输出`-22`。我究竟做错了什么？

这是我的代码（`<body>`我的 HTML 文档的部分）：

```
<body>
<h1>Quadratic equation calculator</h1>
<p>Type the values of your equation into the calculator to get the answer.</p>
<?php
    $xsqrd;
    $x;
    $num;
    $ans1 = null;
    $ans2 = null;
    $errdivzero = "The calculation could not be completed as it attempts to divide by zero.";
    $errsqrtmin1 = "The calculation could not be completed as it attempts to find the square root of a negative number.";
    $errnoent = "Please enter some values into the form.";
?>
<form name = "values" action = "calc.php" method = "get">
<input type = "text" name = "x2"><p>x<sup>2</sup></p>
&nbsp;
<input type = "text" name = "x"><p>x</p>
&nbsp;
<input type = "text" name = "num">
&nbsp;
<input type = "submit">
</form>
<?php
    if ((!empty($_GET['x2'])) && (!empty($_GET['x'])) && (!empty($_GET['num']))) {
        $xsqrd = $_GET['x2'];
        $x = $_GET['x'];
        $num = $_GET['num'];

            $ans1 = (-$x) + (sqrt(pow($x, 2) - (4 * $xsqrd * $num))) / (2 * $xsqrd);
            $ans2 = (-$x) - (sqrt(pow($x, 2) - (4 * $xsqrd * $num))) / (2 * $xsqrd);

    }
?>
<p>
<?php 
    if(($ans1==null) or ($ans2==null))
    {
    print $errnoent;
    }
    else
    {
    print "x = " + $ans1 + "," + $ans2;
    }
?>
    </p>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:59:52.013

你有两个错误。

第一个是数学的，应该是

```
$ans1 = ((-$x) + (sqrt(pow($x, 2) - (4 * $xsqrd * $num)))) / (2 * $xsqrd);
$ans2 = ((-$x) - (sqrt(pow($x, 2) - (4 * $xsqrd * $num)))) / (2 * $xsqrd); 
```

正确的公式是`(-b+-sqrt(b^2-4ac))/(2a)`代替`-b+sqrt(b^2-4ac)/(2a)`- 在后一种情况下，除法将优先于没有括号的加法。

第二个是你输出结果的方式，你应该使用连接运算符`.`

```
print "x = " . $ans1 . "," . $ans2; 
```

（虽然我会使用`echo`而不是`print`）

# ruby-on-rails - 将列添加到邮箱迁移

> ID：15309855
> 
> 赞同：0
> 
> 时间：2013-03-09T10:49:52.253
> 
> 标签：ruby-on-rails, ruby, gem, migration, message

我想在迁移中添加两列，为邮箱 gem 提供通知。当我将两者都放入创建通知的迁移中，然后运行它通过的迁移时。然后我将它们输入到表单中，当我提交它们时没有错误，并且日志显示它接受了它们。出于某种原因，当我尝试展示它们时，它们没有出现，唯一展示的是作为主体和身体迁移一部分的原始事物。我的问题是如何向此迁移添加列？

这是将我的 lat 和 long 两列添加到通知部分的迁移。

```
 # This migration comes from mailboxer_engine (originally 20110511145103)
 class CreateMailboxer < ActiveRecord::Migration
   def self.up    
   #Tables
     #Conversations
      create_table :conversations do |t|
        t.column :subject, :string, :default => ""
        t.column :created_at, :datetime, :null => false
        t.column :updated_at, :datetime, :null => false
     end    
      #Receipts
     create_table :receipts do |t|
       t.references :receiver, :polymorphic => true
       t.column :notification_id, :integer, :null => false
       t.column :read, :boolean, :default => false
       t.column :trashed, :boolean, :default => false
       t.column :deleted, :boolean, :default => false
       t.column :mailbox_type, :string, :limit => 25
       t.column :created_at, :datetime, :null => false
       t.column :updated_at, :datetime, :null => false
     end    
      #Notifications and Messages
     create_table :notifications do |t|
       t.column :type, :string
       t.column :body, :text
       t.column :subject, :string, :default => ""
       t.column :lat, :text
       t.column :long, :text
       t.references :sender, :polymorphic => true
       t.references :object, :polymorphic => true
       t.column :conversation_id, :integer
       t.column :draft, :boolean, :default => false
       t.column :updated_at, :datetime, :null => false
       t.column :created_at, :datetime, :null => false
     end    

   #Indexes
     #Conversations
     #Receipts
     add_index "receipts","notification_id"

     #Messages  
     add_index "notifications","conversation_id"

   #Foreign keys    
     #Conversations
     #Receipts
     add_foreign_key "receipts", "notifications", :name => "receipts_on_notification_id"
     #Messages  
     add_foreign_key "notifications", "conversations", :name =>  "notifications_on_conversation_id"
   end

   def self.down
   #Tables      
     remove_foreign_key "receipts", :name => "receipts_on_notification_id"
     remove_foreign_key "notifications", :name => "notifications_on_conversation_id"

   #Indexes
     drop_table :receipts
     drop_table :conversations
     drop_table :notifications
   end
 end 
```

我的显示视图看起来像

```
 %h1= conversation.subject
 %ul
   = content_tag_for(:li, conversation.receipts_for(current_user)) do |receipt|
     - message = receipt.message
     %h3= message.subject
     %p= message.body
     %p= message.lat
     %p= message.long

 = render 'messages/form', conversation: conversation 
```

这就是控制台中出现的内容，对于经纬度，您会看到它显示为空

```
 Notification Load (0.1ms)  SELECT "notifications".* FROM "notifications" ORDER BY   "notifications"."id" DESC LIMIT 1
 --- !ruby/object:Message
 attributes:
   id: 4
   type: Message
   body: game
   subject: wiz
   lat: !!null 
   long: !!null 
   sender_id: 1
   sender_type: User
   conversation_id: 2
   draft: false
   updated_at: 2013-03-10 04:37:54.984277000Z
   created_at: 2013-03-10 04:37:54.984277000Z
   notified_object_id: !!null 
   notified_object_type: !!null 
   notification_code: !!null 
   attachment: !!null 
  => nil 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:19:37.083

我不确定我是否完全理解您在做什么，但听起来您可能没有将两个新列添加到 attr_accessible 并且因此它们没有被保存。这是我要检查的第一件事（它在模型中）。

否则，请转到控制台并查看您的新列是否存在并查看其中是否有数据。这将帮助您找到问题所在。

# c# - 如何将多个区域添加到 mef 容器中

> ID：15309862
> 
> 赞同：0
> 
> 时间：2013-03-09T10:50:37.897
> 
> 标签：c#, wpf, mef, containers

我正在尝试向我的区域注册多个区域，例如在 Unity 中：

```
public class ModuleA : IModule
{
    private IUnityContainer _container;
    private IRegionManager _regionManager;

    public ModuleA(IUnityContainer container, IRegionManager regionManager)
    {
        _container = container;
        _regionManager = regionManager;
    }

    public void Initialize()
    {
        IRegion region = _regionManager.Regions[RegionNames.ToolbarRegion];

        region.Add(_container.Resolve<ToolbarView>());
        region.Add(_container.Resolve<ToolbarView>());
        region.Add(_container.Resolve<ToolbarView>());
        region.Add(_container.Resolve<ToolbarView>());
        region.Add(_container.Resolve<ToolbarView>());
    }
} 
```

}

但我不能用 MEF 成功

```
[ModuleExport(typeof(ModuleAModule))]
public class ModuleAModule : IModule
{
    [Import]
    private IRegionManager _regionManager;

    public void Initialize()
    {
        _regionManager.RegisterViewWithRegion(RegionNames.ContentRegion, typeof(ContentView));

        IRegion region = _regionManager.Regions[RegionNames.ToolbarRegion];

    }
} 
```

我可以得到该区域，但我不知道如何将解析转换为 MEF。

# parameters - ParametersInterceptor - 捕获到意外的异常错误设置表达式'x'的值'

> ID：15309864
> 
> 赞同：3
> 
> 时间：2013-03-09T10:50:39.427
> 
> 标签：parameters, struts2, interceptor, actionresult

```
package com.achala.saraswathi.action;

import com.achala.saraswathi.data.AdminBE;
import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionSupport;

public class AdminLoginAction extends ActionSupport{

    private AdminBE adminBE;

    public String execute(){
        return Action.SUCCESS;
    }

    public String adminLogin(){
        if(adminBE.getUserName().equals("admin")&&adminBE.getPassword().equals("admin")){
            return Action.SUCCESS;
        }
        addActionError("Invalid username or password");
        return Action.INPUT;
    }

    public AdminBE getAdminBE() {
        return adminBE;
    }

    public void setAdminBE(AdminBE adminBE) {
        this.adminBE = adminBE;
    }       
} 
```

单击该提交按钮后

```
ParametersInterceptor - Unexpected Exception caught Error setting expression 'x' with value 
```

错误来了，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-25T10:01:10.330

I suspected that your form is using submit button with type="image". With this button it will post parameter x,y to the request parameter. So to avoid this error you can:

*   Use another type of button such as with background image
*   Add x, y property to your action class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T17:45:16.523

要在不破坏对象模型的情况下解决此问题，请在此处查看详细答案：

[如何使用图像类型按钮以 HTML 表单提交时删除 x 和 y？](https://stackoverflow.com/questions/801702/how-to-remove-x-and-y-on-submit-in-html-form-with-image-type-button)

# c - FILE 指针无缘无故过期

> ID：15309867
> 
> 赞同：0
> 
> 时间：2013-03-09T10:50:55.933
> 
> 标签：c, file

**在以下代码之后添加一些套接字连接代码后**，我遇到了这个问题。什么时候可以`fp`，指向一些内存地址，同时读取数据（第 4 行），但是当调试器（gdb）到达`if`块时，`fp`指针只是指向 0x0。

```
#define CHANNELS_PER_IOM   25

...

int OldValues[CHANNELS_PER_IOM];
FILE * fp;
FILE * fp_t;
int buff;
int i;

fp = fopen("/windcom/tmp/dout_values", "r");
fp_t = fopen("/windcom/tmp/dout_values.tmp", "w");
i = 0;

while(fp && fscanf(fp, "%d\n", &buff) == 1) // fp is pointing some address here.
{
    i++;
    OldValues[i-1] = buff;
    //printf("%d %d \n", OldValues[i-1], buff);
}
if(!fp) //fp is pointing 0x0 here.
{
    for(i=0; i<CHANNELS_PER_IOM; i++)
    {
        OldValues[i] = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:56:28.257

在哪里`OldValues`定义？你可能不够大，不幸的`fp`是，它被无意中覆盖了。

**编辑**

试试这个代码：

```
while(i < CHANNELS_PER_IOM &&
      fp &&
      fscanf(fp, "%d\n", &OldValues[i++]) == 1) // fp is pointing some address here.
{
    // Empty
} 
```

**编辑 2**

放

之后

```
fp = fopen("/windcom/tmp/dout_values", "r"); 
```

放

```
if (!fp) printf("Unable to open file\n"); 
```

这将检查文件是否实际打开。

# c++ - 对 `vtable 的未定义引用

> ID：15309869
> 
> 赞同：1
> 
> 时间：2013-03-09T10:51:03.903
> 
> 标签：c++, eclipse, qt

我正在使用 Qt 创建一个 GUI 应用程序；我尝试`hello world`使用 Qt 并且它运行良好，但是当我创建自定义列表小部件`undefined reference to vtable`时，我在编译它时出现错误：

我正在使用 Eclipse 和 C++

```
#ifndef QMENUFILTER_H_
#define QMENUFILTER_H_
#include <qmenu.h>
class CustomMenuFilter : QMenu
{
    Q_OBJECT
public:
    CustomMenuFilter () ;
    ~CustomMenuFilter() ;
private:
    QMenu FilterMenu;
    QAction *AddFilterAct ;
    QAction *DeleteFilterAct ;

     Q_SLOT
      void contextMenuEvent(QContextMenuEvent *event);
};
#endif /* QMENUFILTER_H_ */

#include "QMenuFilter.h"
CustomMenuFilter::CustomMenuFilter():QMenu()
{
    DeleteFilterAct = new QAction("DeleteFilter" , this);
    AddFilterAct = new QAction("AddFilter" , this);
    AddFilterAct->setText("AddFilter");
    DeleteFilterAct->setText("DeleteFilter");
} 
```

日志文件： [http ://pastebin.com/raw.php?i=qZes6bkm](http://pastebin.com/raw.php?i=qZes6bkm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T10:54:58.190

您还需要定义 dtor，这将创建 vtable

```
CustomMenuFilter::~CustomMenuFilter() { ... } 
```

虽然有一些（依赖于编译器的）规则描述了编译器何时准确地发出一个 vtable，但您知道它通常并不重要。重要的是，您需要定义 dtor，然后编译器将处理 vtable，因此如果您看到错误“未定义对 vtable 的引用”，请始终检查 dtor。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:55:12.530

几个编译器在 TU 中发出 vtable，它定义了虚拟的第一个外线定义——隐含地，在这种情况下就是你的析构函数（因为 QMenu 的析构函数可能是虚拟的）。

所以添加你的析构函数的定义应该可以解决它。

```
// CustomMenuFilter.cpp

CustomMenuFilter::~CustomMenuFilter() {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:12:24.677

从#qt factoids 中，当在 QObject 派生类上收到 vtable 错误时：

1.  确保`Q_OBJECT`宏存在于所有 QObject 派生类的定义中。
2.  确保仅在头文件中声明 QObject 派生类。
3.  确保所有头文件都列在`HEADERS`列表中的 .pro 文件中。
4.  每次添加`Q_OBJECT`到类之一或修改 .pro 文件时运行 qmake。

* * *

我在构建日志的最终可执行文件中没有看到 moc 的输出链接：

> g++ -L/usr/local/lib/ -lQtGui -lQtCore -o "CameraManagerAfterBeta" ./trunk/Source/Camera.o ./trunk/Source/Interface.o ./trunk/Source/Manager.o ./trunk/源/QMenuFilter.o ./trunk/Source/main.o -lopencv_core -lopencv_objdetect -lopencv_video -lopencv_highgui -lopencv_imgproc

没有链接 moc_QMenuFilter.o。**这是错误**。很可能您添加了`Q_OBJECT`宏并忘记重新运行 qmake（或者甚至没有`HEADERS`在 .pro 文件的列表中添加标题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-15T13:23:10.083

将 CMAKE_AUTOMOC 设置为 ON，这解决了我的问题。

```
#Find includes in corresponding build directories
set(CMAKE_INCLUDE_CURRENT_DIR ON)

# Instruct CMake to run moc automatically when needed.
set(CMAKE_AUTOMOC ON) 
```

# hibernate - Informix 休眠查询

> ID：15309877
> 
> 赞同：0
> 
> 时间：2013-03-09T10:53:08.200
> 
> 标签：hibernate

似乎我有类似的问题，比如[Informix 的一个 Hibernate Query 问题，](https://stackoverflow.com/questions/7444426/hibernate-query-problem-with-informix)或者至少我有同样的例外。我使用休眠 3.6.6、jboss 6.1 和 informix10。事实上，当使用 jboss 5 时，在迁移之前一切正常。另外我想提一下我`DELIMIDENT`的网址中没有参数。

我的问题出现在具有相同引用类型的两个嵌入字段的类上（为清楚起见：名称如下，发件人和 cerrier）。两个字段都使用`@AttributeOverride`和`@AssociationOverride`覆盖正确的列名称和带有注释的类的关联`@embeddable`。最后一个也`@OneToOne`与其他实体有关系。我尝试检查该字段的哪个问题，因此如果我删除“发件人”字段，一切都会开始正常工作。这是代码的一部分：

```
@Embeddable
public class ProductsAgent{ @Column(name = "name") private String name; @Column(name = "statute") private String statute; @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL) @JoinColumn(name = "products_agent_address_id") private Address address; }
@Entity
class Registration76v{
@Embedded
@AssociationOverride(name = "address", joinColumns = @JoinColumn(name = "sender_address_id", table = "registration76v"))
@AttributeOverrides(value = { @AttributeOverride(name = "name", column = @Column(name = "sender_name", table = "registration76v")), @AttributeOverride(name = "statute", column = @Column(name = "sender_statute", table = "registration76v")) })
private ProductsAgent1 sender = new ProductsAgent1();
@Embedded
@AssociationOverride(name = "address", joinColumns = @JoinColumn(name = "carrier_address_id", table = "registration76v"))
@AttributeOverrides(value = { @AttributeOverride(name = "name", column = @Column(name = "carrier_name", table = "registration76v")), @AttributeOverride(name = "statute", column = @Column(name = "carrier_statute", table = "registration76v")) })
private ProductsAgent carrier = new ProductsAgent();
} 
```

这是日志的一部分：

```
16:20:38,212 WARN [org.hibernate.util.JDBCExceptionReporter] SQL Error: -79738, SQLState: IX000
16:20:38,212 ERROR [org.hibernate.util.JDBCExceptionReporter] org.hibernate.util.JDBCExceptionReporter] No such column name
16:20:38,215 INFO [org.hibernate.event.def.DefaultLoadEventListener] Error performing load command: org.hibernate.exception.GenericJDBCException: could not load an entity:
16:20:38,215 INFO [org.hibernate.event.def.DefaultLoadEventListener] Error performing load command: org.hibernate.exception.GenericJDBCException: could not load an entity: 
```

不知何故，我的同事发现问题来自错误生成的代码这里 sql. 并且更具体地使用生成的别名，`sender_address_id`稍后搜索给定列的别名。所以，如果有人能给我一个如何解决这个问题的建议，我真的很感激。提前致谢。

# java - 在 SD 卡 Android 中创建符号链接

> ID：15309879
> 
> 赞同：1
> 
> 时间：2013-03-09T10:53:31.763
> 
> 标签：java, android, filesystems, symlink

我想跟踪通过我的应用程序下载的文件。对于下载，我想使用默认的下载目录。但是我想在 SD 卡中的一个单独位置保留一个软链接，这样如果原始文件被移动，我仍然可以跟踪它。

有可能实现这一目标吗？

# postgresql - XPath1 at SQL/XML, count elements returns empty

> ID：15309880
> 
> 赞同：1
> 
> 时间：2013-03-09T10:53:35.587
> 
> 标签：postgresql, xpath, count, sqlxml

I am using [PostgreSQL 9](http://www.postgresql.org/docs/9.0/static/functions-xml.html), that adopts [XPath-1](http://www.w3.org/TR/xpath/) for the [SQL/XML standard](http://en.wikipedia.org/wiki/SQL/XML) cumpliance.

This query is ok, returns the expected data:

```
 SELECT xpath('//img',xhtm) FROM t 
```

but this other one, to count img elements, returns empty (!),

```
 SELECT xpath('count(//img)',xhtm) FROM t 
```

* * *

*NOTE* 1: a `xhtm` field content sample,

```
 <html><p>Hello! <img src="1.png"/></p><img src="2.jpg"/></html> 
```

*NOTE* 2: of course `array_length(xpath('//img',xhtm),1)` show the count result, but it is not a XPath counting.

*NOTE* 3: I don't know if it is a generic SQL/XML peculiarity, or a *PosgreSQL Server 9.0.5* specific bug/problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:04:18.127

**EDIT**: As I noted in the comments below, and as indicated in [this SO Answer](https://stackoverflow.com/a/10692439/1945651), this issue was apparently addressed in Postgresql 9.2\. That answer states:

> With PostgreSQL 9.2 the documentation suddenly has one more sentence covering the xpath function:
> 
> *If the XPath expression returns a scalar value rather than a node set, a single-element array is returned.*
> 
> Just what I need! So in relation to the question another valid answer is: Upgrade to PostgreSQL 9.2.

Below is the rest of my original answer:

This seems to be a known limitation in Postgresql's `xpath()` function - only expressions that evaluate to a node-set return anything; XPath expressions that would return a scalar value just return an empty array.

Some Google searches reveal some discussion about this about 2 years ago primarily from a person named Florian Pflug:

[http://postgresql.1045698.n5.nabble.com/PATCH-Bug-in-XPATH-if-expression-returns-a-scalar-value-td4440233.html](http://postgresql.1045698.n5.nabble.com/PATCH-Bug-in-XPATH-if-expression-returns-a-scalar-value-td4440233.html)

He has developed a patch that supposedly fixes the issue and that is attached to the following thread (though I'm not entirely sure this is the latest version):

[http://www.postgresql.org/message-id/FC60A4F5-5560-438C-97E8-B6D1FDE1CC2B@phlo.org](http://www.postgresql.org/message-id/FC60A4F5-5560-438C-97E8-B6D1FDE1CC2B@phlo.org)

There does seem to be some discussion about the pros and cons of his patch, so I'd suggest reading through these threads to be aware of what is involved:

[http://www.postgresql.org/message-id/201106291957.04251.rsmogura@softperience.eu](http://www.postgresql.org/message-id/201106291957.04251.rsmogura@softperience.eu) [http://www.postgresql.org/message-id/201106291934.23089.rsmogura@softperience.eu](http://www.postgresql.org/message-id/201106291934.23089.rsmogura@softperience.eu)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:17:11.910

JLRishe made me aware of your question. I had the same problem in May last year and I discovered that the problem was fixed in PostgreSQL 9.2.

Since version 9.2\. the documentation states:

> If the XPath expression returns a scalar value rather than a node set, a single-element array is returned.

I just downloaded PostgreSQL 9.2 and ran your example:

```
postgres=# select version();   
                                                    version                                                    
---------------------------------------------------------------------------------------------------------------
 PostgreSQL 9.2.3 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52), 64-bit
(1 row)

postgres=# SELECT xpath('count(//img)','<html><p>Hello! <img src="1.png"/></p><img src="2.jpg"/></html>'::xml);
 xpath 
-------
 {2}
(1 row) 
```

# c# - 在 C# 中双击时如何让表单永远不会进入全屏

> ID：15309882
> 
> 赞同：2
> 
> 时间：2013-03-09T10:53:48.337
> 
> 标签：c#

我有一个 C# 表单，当我双击它时它总是进入全屏模式。表格没有边框并且可以移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:55:57.340

设置表单的最大宽度和高度。您使用`MaximumSize`表单的属性。

`this.MaximumSize = new System.Drawing.Size(500, 500);`

或者`this.MaximumSize = this.Size;`

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximumsize.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximumsize.aspx)

# input - 占位符输入字段不显示值？

> ID：15309885
> 
> 赞同：1
> 
> 时间：2013-03-09T10:54:29.417
> 
> 标签：input, session-variables, placeholder

我有一个带占位符的**输入框**。我正在通过php 中的**Session**变量设置该字段中的值。

这是我写的代码：

```
<input type="text" value=<?=$_SESSION['no_of_persons']?>  name="no_of_persons" id="no_of_persons" placeholder="No. of Person(s)" maxlength="3" /> 
```

当我在 firefox 中运行它并在**Firebug**中观看代码时，以下代码即将出现：

```
<input id="no_of_persons" type="text" maxlength="3" placeholder="No. of Person(s)" name="no_of_persons" value="7"> 
```

问题是我无法在网页的文本字段中看到值。

我去萤火虫并在萤火虫中编辑html。我所做的是当我在输入标签末尾按下**空格键时，即在****value="7"**之后，值**7**在网页上变得可见。

我不明白为什么浏览器会自动更改输入标签的属性序列，而且我已经关闭了输入标签，那么为什么浏览器不关闭它。

我在其他浏览器中也试过了，比如 safari，chrome，但没有用。

请帮助我摆脱这个问题。

提前致谢！！！:)

# ios - 禁用键盘时

> ID：15309894
> 
> 赞同：0
> 
> 时间：2013-03-09T10:55:33.657
> 
> 标签：ios, objective-c, ios6, uitextfield, uistoryboard

当用户单击 a时，`UITextField`我`UIDatePicker`将使用下面的代码显示输入。但是当我这样做时，日期选择器和普通文本键盘会同时显示。我将如何禁用键盘显示？

```
- (IBAction)selectDateBegin:(id)sender {

if ([self.view viewWithTag:9]) {
    return;
}
CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height-216-44, 320, 44);
CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height-216, 320, 216);

UIView *darkView = [[UIView alloc] initWithFrame:self.view.bounds];
darkView.alpha = 0;
darkView.backgroundColor = [UIColor blackColor];
darkView.tag = 9;
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)] ;
[darkView addGestureRecognizer:tapGesture];
[self.view addSubview:darkView];

UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height+44, 320, 216)] ;
datePicker.tag = 10;
[datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:datePicker];

UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 44)];
toolBar.tag = 11;
toolBar.barStyle = UIBarStyleBlackTranslucent;
UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissDatePicker:)];
[toolBar setItems:[NSArray arrayWithObjects:spacer, doneButton, nil]];
[self.view addSubview:toolBar];

[UIView beginAnimations:@"MoveIn" context:nil];
toolBar.frame = toolbarTargetFrame;
datePicker.frame = datePickerTargetFrame;
darkView.alpha = 0.5;
[UIView commitAnimations];} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:59:58.623

```
-(void)textFieldDidBeginEditing:(UITextField *)sender
{
     [self.textFieldName resignFirstResponder];
   //
   //  Code ...continue,......for display DatePicker
   //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:01:57.197

为您的日期选择器（导航栏具有确定和取消按钮）容器创建一个单独的 UIView，然后将其分配给***textfield.inputView***属性。有关更多详细信息，请参阅[*UITextField 类参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)。

这将加载您的日期选择器视图而不是默认键盘。

您会在网上找到更多相同的示例。

希望这是您正在寻找的。

# javascript - 无法将 Base64 显示为 PNG

> ID：15309901
> 
> 赞同：0
> 
> 时间：2013-03-09T10:56:34.017
> 
> 标签：javascript, html, canvas, base64

我一直在使用 HTML 画布来保存绘图。但是，当我尝试使用 base64 代码实现图像时，它不起作用。我哪里错了？

这是我用于画布油漆的代码（抱歉有点乱）：http: [//jsfiddle.net/9ht4N/](http://jsfiddle.net/9ht4N/)

这是我用来显示图像的代码：http: [//jsfiddle.net/QEmcw/](http://jsfiddle.net/QEmcw/) 我只是在使用类似的东西：

```
<img src="base64 code here" alt="img" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T11:20:45.553

你需要在 Base64 代码前面：“data:image/png;base64”

# c# - C# 你能控制客户端窗体的不透明度但保持父控件和控件分开吗？最好也使用 dwmapi Glass

> ID：15309908
> 
> 赞同：0
> 
> 时间：2013-03-09T10:57:37.253
> 
> 标签：c#, winforms

您能否使表单背景清晰，但保持父窗口和表单上的控件@ 100% 不透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:55:11.197

窗体的背景**是**父窗口的，它们是一回事。我认为你应该改写你的问题。

无论如何，DWM API 并没有公开任何工具来允许开发人员更改玻璃区域的不透明度，事实上，玻璃效果在 Windows 8 中完全消失了，它都是不透明的纯色，没有像素着色器。

# javascript - jQuery 双向数据绑定

> ID：15309910
> 
> 赞同：27
> 
> 时间：2013-03-09T10:58:11.503
> 
> 标签：javascript, jquery, data-binding

如何在 jQuery 中实现简单的双向数据绑定？类似于 knockoutJS 的东西，但以最简单的形式出现。

场景 - 将 JSON 对象绑定到表行（每个字段都是**td>input/>/td>**）。

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T17:07:20.117

我的尝试 - HTML

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Data Binding</title>
</head>
<body>
    <table id="content-table">
        <thead>
        </thead>
        <tbody></tbody>
    </table>
    <button id="get-data">Get</button>
    <button id="set-data">Set</button>

    <script src="../js/vendor/jquery-1.9.1.js"></script>
    <script src="../js/vendor/jquery-migrate-1.1.1.js"></script>
    <script src="../js/vendor/watch.js"></script>
    <script src="../js/dataBinder.js"></script>
</body>
</html> 
```

JavaScript

```
var DataBinder = (function ($) {

    var _$table = null,
        _objectList = [],
        _fieldList = [],
        _objectListLength = -1,
        _fieldListLength = -1;

    /* AJAX call or smth. */
    var _loadData = function () {
        var fakeData = [{
            name: 'John',
            surname: 'Doe'
        }, {
            name: 'Foo',
            surname: 'Bar'
        }];

        _objectList = $.map(fakeData, function (element, index) {
            var elementObject = {
                _dataBinderId: index,
                element: element,
                input: {}
            };

            watch(elementObject.element, function (property, action, newValue) {
                _setValue.call(elementObject, property, newValue);
            });

            return elementObject;
        });

        _objectListLength = _objectList.length;
    };

    var _getFields = function () {
        for (var i = 0; i < _objectListLength; i++) {
            for (var field in _objectList[i].element) {
                if (!!!~$.inArray(field, _fieldList)) {
                    _fieldList.push(field);
                }
            }
        }

        _fieldListLength = _fieldList.length;
    };

    var _setValue = function (field, value) {
        this.input[field].val(value);
    };

    var _bindEvents = function () {
        $('#get-data').on('click', function () {
            alert(JSON.stringify(_getRowData()));
        });

        $('#set-data').on('click', function () {
            _objectList[0].element.name = 'PIPA';
            _objectList[1].element.surname = 'BLAAAAAAH';
        });

        _$table.on('keyup', 'input', function () {
            var $this = $(this), field = $this.data('field'), source = $this.closest('tr').data('source');
            source[field] = $this.val();
        });
    };

    var _getRowData = function () {
        var elements = [];

        $.each(_objectList, function () {
            elements.push(this.element);
        });

        return elements;
    };

    var _generateEditableElements = function () {
        var rowList = [], headerRow = $('<tr>');

        for (var k = 0; k < _fieldListLength; k++) {
            headerRow.append($('<th>', {
                text: _fieldList[k].toUpperCase()
            }));
        }
        _$table.find('thead').append(headerRow);

        for (var i = 0; i < _objectListLength; i++) {
            var objectData = _objectList[i], currentRow = $('<tr>');

            currentRow.data('source', objectData.element);
            rowList.push(currentRow);

            for (var j = 0; j < _fieldListLength; j++) {
                var field = _fieldList[j], $inputElement = $('<input>', {
                    type: 'text',
                    value: objectData.element[field]
                });

                $inputElement.data('field', field);
                objectData.input[field] = $inputElement;

                currentRow.append($('<td>').append($inputElement));
            }
        }

        _$table.find('tbody').append(rowList);
    };

    var init = function ($table) {
        _$table = $table;

        _loadData();
        _getFields();

        _generateEditableElements();
        _bindEvents();
    };

    return {
        init: init
    };

})(jQuery);

DataBinder.init($("#content-table")); 
```

![结果](../Images/7e13535a6334dc8b6ce96e714639fb81.png)

我用过很棒的[Watch.JS](https://github.com/melanke/Watch.JS)。[Watch.js 是如何工作的？](http://dailyjs.com/2012/11/12/code-review-watch-js/)

[Watch.js 现在使用 Object.observe](https://github.com/melanke/Watch.JS/commit/d29b7e4931430d117cacee4e5badc0f2e13c4d8a)

这是 JavaScript 中的另一个[简单双向数据绑定](http://www.lucaongaro.eu/blog/2012/12/02/easy-two-way-data-binding-in-javascript/)示例。

还有一个[问题。](https://stackoverflow.com/questions/11904039/plain-javascript-bidirectional-data-binding)

[本机 JavaScript 数据绑定](http://www.sellarafaeli.com/blog/native_javascript_data_binding)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-25T21:29:55.793

这个解决方案非常简单，并且可以扩展为具有更复杂的功能：[http ://cssshowcase.co.uk/two-way-data-binding-with-jquery/](http://cssshowcase.co.uk/two-way-data-binding-with-jquery/)

它实际上将 2 个或多个 HTML 元素绑定在一起，它的当前形式会更改任何元素的内部 html 以及任何输入的值，对于每个具有相同“绑定”属性值的元素。

# header - 从管理面板主题选项中为标题中的 div 添加自定义 bg 颜色和徽标选项 - wp 二十一主题

> ID：15309911
> 
> 赞同：1
> 
> 时间：2013-03-09T10:58:16.397
> 
> 标签：header, wordpress, themes, wordpress-theming

我是 wordpress 新手。我在 wordpress 中创建了一个包含 21 个主题文件的自定义主题。但我无法添加自定义背景选项和自定义徽标选项。我正在尝试在主题选项页面中实现它。我想将自定义背景颜色添加到标题部分中的 div 以及标题中的徽标。

请给我任何建议来完成这个主题创作。

请提供一些关于如何在主题选项页面中添加新字段以及如何在页面中显示它的想法。

我还想添加一些自定义文本字段来显示地址或一些可以从主题选项更新的文本行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:04:15.760

尝试 wp codex ( [https://codex.wordpress.org/Theme_Customization_API](https://codex.wordpress.org/Theme_Customization_API) )，它将帮助您设置默认的 wp 定制器。我个人同时使用默认定制器和 OptionTree 插件（[http://wordpress.org/extend/plugins/option-tree/](http://wordpress.org/extend/plugins/option-tree/)），该插件非常容易实现，我建议您从它开始。

# android - 画廊内的Android捏缩放图像视图

> ID：15309913
> 
> 赞同：0
> 
> 时间：2013-03-09T10:58:58.767
> 
> 标签：android

我正在创建延迟加载的照片库（如 facebook）

我正在使用 cusotme 画廊覆盖 Fling 以制作单个图像分页并使用 custume 图像视图进行捏缩放

结果是图像工作正常（缩放、移动等），但我无法切换图像

我的代码 SlowGallery：

公共类 SlowGallery 扩展画廊 {

```
public SlowGallery(Context context) {
    super(context);

}

public SlowGallery(Context context, AttributeSet attrs) {
    super(context, attrs);

}

public SlowGallery(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

}

private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2){
    return e2.getX() > e1.getX();
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){
    Log.d("SlowGallery::onFling","onFinlg");
    int kEvent;
    if(isScrollingLeft(e1, e2)){ //Check if scrolling left
        kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
    }
    else{ //Otherwise scrolling right
        kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
    }
    onKeyDown(kEvent, null);
    return true;  
} 
```

}

缩放图像视图

```
public class ScaleImageView extends ImageView implements OnTouchListener {
    private float MAX_SCALE = 2f;
    private int DOUBLE_TAP_SECOND = 400;

    private Matrix mMatrix;
    private final float[] mMatrixValues = new float[9];

    // display width height.
    private int mWidth;
    private int mHeight;

    private int mIntrinsicWidth;
    private int mIntrinsicHeight;

    private float mScale;
    private float mMinScale;

    // double tap for determining
    private long mLastTime = 0;
    private boolean isDoubleTap;
    private int mDoubleTapX;
    private int mDoubleTapY;

    private float mPrevDistance;
    private boolean isScaling;

    private int mPrevMoveX;
    private int mPrevMoveY;

    String TAG = "ScaleImageView";

    public ScaleImageView(Context context, AttributeSet attr) {
            super(context, attr);
            initialize();
    }

    public ScaleImageView(Context context) {
            super(context);
            initialize();
    }

    @Override
    public void setImageBitmap(Bitmap bm) {
            super.setImageBitmap(bm);
            this.initialize();
    }

    private void initialize() {
            this.setScaleType(ScaleType.MATRIX);
            this.mMatrix = new Matrix();
            Drawable d = getDrawable();
            if (d != null) {
                    mIntrinsicWidth = d.getIntrinsicWidth();
                    mIntrinsicHeight = d.getIntrinsicHeight();
                    setOnTouchListener(this);
            }
    }

    @Override
    protected boolean setFrame(int l, int t, int r, int b) {
            mWidth = r-l;
            mHeight = b-t;

            mMatrix.reset();
            mScale = (float) r / (float) mIntrinsicWidth;
            int paddingHeight = 0;
            int paddingWidth = 0;
            // scaling vertical
            if (mScale * mIntrinsicHeight > mHeight) {
                    mScale = (float) mHeight / (float) mIntrinsicHeight;
                    mMatrix.postScale(mScale, mScale);
                    paddingWidth = (r - mWidth) / 2;
                    paddingHeight = 0;
                    // scaling horizontal
            } else {
                    mMatrix.postScale(mScale, mScale);
                    paddingHeight = (b - mHeight) / 2;
                    paddingWidth = 0;
            }
            mMatrix.postTranslate(paddingWidth, paddingHeight);

            setImageMatrix(mMatrix);
            mMinScale = mScale;
            zoomTo(mScale, mWidth / 2, mHeight / 2);
            cutting();
            return super.setFrame(l, t, r, b);
    }

    protected float getValue(Matrix matrix, int whichValue) {
            matrix.getValues(mMatrixValues);
            return mMatrixValues[whichValue];
    }

    protected float getScale() {
            return getValue(mMatrix, Matrix.MSCALE_X);
    }

    protected float getTranslateX() {
            return getValue(mMatrix, Matrix.MTRANS_X);
    }

    protected float getTranslateY() {
            return getValue(mMatrix, Matrix.MTRANS_Y);
    }

    protected void maxZoomTo(int x, int y) {
            if (mMinScale != getScale() && (getScale() - mMinScale) > 0.1f) {
                    // threshold 0.1f
                    float scale = mMinScale / getScale();
                    zoomTo(scale, x, y);
            } else {
                    float scale = MAX_SCALE / getScale();
                    zoomTo(scale, x, y);
            }
    }

    protected void zoomTo(float scale, int x, int y) {
            if (getScale() * scale < mMinScale) {
                    return;
            }
            if (scale >= 1 && getScale() * scale > MAX_SCALE) {
                    return;
            }
            mMatrix.postScale(scale, scale);
            // move to center
            mMatrix.postTranslate(-(mWidth * scale - mWidth) / 2,
                            -(mHeight * scale - mHeight) / 2);

            // move x and y distance
            mMatrix.postTranslate(-(x - (mWidth / 2)) * scale, 0);
            mMatrix.postTranslate(0, -(y - (mHeight / 2)) * scale);
            setImageMatrix(mMatrix);
    }

    public void cutting() {
            int width = (int) (mIntrinsicWidth * getScale());
            int height = (int) (mIntrinsicHeight * getScale());
            if (getTranslateX() < -(width - mWidth)) {
                    mMatrix.postTranslate(-(getTranslateX() + width - mWidth), 0);
            }
            if (getTranslateX() > 0) {
                    mMatrix.postTranslate(-getTranslateX(), 0);
            }
            if (getTranslateY() < -(height - mHeight)) {
                    mMatrix.postTranslate(0, -(getTranslateY() + height - mHeight));
            }
            if (getTranslateY() > 0) {
                    mMatrix.postTranslate(0, -getTranslateY());
            }
            if (width < mWidth) {
                    mMatrix.postTranslate((mWidth - width) / 2, 0);
            }
            if (height < mHeight) {
                    mMatrix.postTranslate(0, (mHeight - height) / 2);
            }
            setImageMatrix(mMatrix);
    }

    private float distance(float x0, float x1, float y0, float y1) {
            float x = x0 - x1;
            float y = y0 - y1;
            return FloatMath.sqrt(x * x + y * y);
    }

    private float dispDistance() {
            return FloatMath.sqrt(mWidth * mWidth + mHeight
                            * mHeight);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
            int touchCount = event.getPointerCount();
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_POINTER_1_DOWN:
            case MotionEvent.ACTION_POINTER_2_DOWN:
                    if (touchCount >= 2) {
                            float distance = distance(event.getX(0), event.getX(1),
                                            event.getY(0), event.getY(1));
                            mPrevDistance = distance;
                            isScaling = true;
                    } else {
                            if (System.currentTimeMillis() <= mLastTime + DOUBLE_TAP_SECOND) {
                                    if (30 > Math.abs(mPrevMoveX - event.getX())
                                                    + Math.abs(mPrevMoveY - event.getY())) {
                                            isDoubleTap = true;
                                            mDoubleTapX = (int) event.getX();
                                            mDoubleTapY = (int) event.getY();
                                    }
                            }
                            mLastTime = System.currentTimeMillis();
                            mPrevMoveX = (int) event.getX();
                            mPrevMoveY = (int) event.getY();
                    }
                    break;
            case MotionEvent.ACTION_MOVE:
                    if (touchCount >= 2 && isScaling) {
                            float dist = distance(event.getX(0), event.getX(1),
                                            event.getY(0), event.getY(1));
                            float scale = (dist - mPrevDistance) / dispDistance();
                            mPrevDistance = dist;
                            scale += 1;
                            scale = scale * scale;
                            zoomTo(scale, mWidth / 2, mHeight / 2);
                            cutting();
                    } else if (!isScaling) {
                            int distanceX = mPrevMoveX - (int) event.getX();
                            int distanceY = mPrevMoveY - (int) event.getY();
                            mPrevMoveX = (int) event.getX();
                            mPrevMoveY = (int) event.getY();
                            mMatrix.postTranslate(-distanceX, -distanceY);
                            cutting();
                    }
                    break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
            case MotionEvent.ACTION_POINTER_2_UP:
                    if (event.getPointerCount() <= 1) {
                            isScaling = false;
                            if (isDoubleTap) {
                                    if (30 > Math.abs(mDoubleTapX - event.getX())
                                                    + Math.abs(mDoubleTapY - event.getY())) {
                                            maxZoomTo(mDoubleTapX, mDoubleTapY);
                                            cutting();
                                    }
                            }
                    }
                    isDoubleTap = false;
                    break;
            }
            return true;
    }

    public boolean onTouch(View v, MotionEvent event) {
            return super.onTouchEvent(event);
    } 
```

}

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-13T10:12:26.197

将 ViewPager 与带有通用图像加载器的 ImageView 一起使用，我已经使用您的代码来缩放图像；）

# c# - 将抽象设备库从 python 迁移到 C#

> ID：15309915
> 
> 赞同：0
> 
> 时间：2013-03-09T10:59:29.380
> 
> 标签：c#, python, migration

我来自`python`新来的`C#`。我正在将设备库迁移到 C#。库本身包含所有设备实现并管理它的创建。这是一些python代码：

```
# All supported devices must be added to this list
device_table = [DeviceA, DeviceB, DeviceC, DeviceD]

def DeviceFactory(device, identifier):
    """ 
    Returns an open device for the given identifier. If there is no proper
    driver it raises an NotImplementedError. If wrong device connected to
    port a ValueError is raised
    """
    assert type(identifier) == str

    if device not in device_table:
        # Device not found in device table, so it's not implemented
        raise NotImplementedError("No device driver implemented for "
                                  "identifier {0}.".format(identifier))
    # If no identifier selected, do configuration before
    if identifier == "":
        raise AttributeError("No identifier selected.")

    # Try to open a device and then read identifier
    try:
        dev = DevIOLib.open(identifier)
        dev_identifier = dev.ask_identifier()
        dev.close()
    except Exception:
        raise DeviceError("Error opening device {0} on {1}.".format(device.name(), 
                                                                    identifier))

    # Now check if the opened device is really the right one
    if re.match(device.get_idn_regex(), dev_identifier) is not None:
        return device(identifier)

    raise ValueError("Wrong device connected to identifier {0}.".format(identifier)) 
```

`Device[A-D]`是 concreate 设备的实现。您现在可以创建设备：

```
concrete_device = DeviceFactory(DeviceC, "devicePortC") 
```

我体验到这种模式效果很好，所以我想在`C#`. 如您所见，实现是非常动态的。你将如何在 C# 中实现这一点？

因此，所有设备的实现和管理都应该进入一个类库，以便在其他项目中轻松使用设备。

有没有更好的方法来解决这个问题？

在 C# 的帮助下，我可以创建以下内容

```
public class DeviceFactory
{
    private static List<Type> device_table = new List<Type>() { typeof(DeviceA)};

    public static Device CreateDevice(Type deviceType, string devicePort)
    {
        if (string.IsNullOrEmpty(devicePort))
        {
            throw new ArgumentException("No identifier selected.");
        }

        if (!deviceType.IsSubclassOf(typeof(Device)))
        {
            throw new ArgumentException("Device type unknown.");
        }

        if (!device_table.Contains(deviceType))
        {
            var message = string.Format("No device driver implemented for identifier {0}.", devicePort);
            throw new NotImplementedException(message);
        }

        string dev_identifier;
        DevHandle dev_handle;

        try
        {
            dev_handle = DevManager.Open(devicePort));
            dev_identifier = dev_handle.AskIdentifier();
        }
        catch (Exception)
        {
            throw new Exception(string.Format("Error opening device on {0}.", devicePort));
        }

        var idn_property =  deviceType.GetProperty("Identifier", BindingFlags.Static);

        var match = Regex.Match(dev_identifier,
                                idn_property.GetValue(null, null).ToString());

        if (match.Success)
        {
            return (VisaDevice) Activator.CreateInstance(deviceType, dev_handle);
        }
        else
        {
            dev_handle.IO.Close();
            var dev_name = deviceType.GetProperty("Name", BindingFlags.Static).GetValue(null, null).ToString();
            throw new Exception(string.Format("Wrong device connected to port {0}. " + 
                                              "Expected device {1}", devicePort, dev_name));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:14:31.037

我已经编辑了我的答案，请检查一下。这也是粗略的草图。我希望​​这对你有帮助。

```
namespace DeviceCreation
{
    //public enum DeviceType { DeviceA, DeviceB, DeviceC, DeviceD };
    public abstract class Device
    {
        public string Identifier { get; private set; }
        public Device(string identifier)
        {
            Identifier = identifier;
        }

        public abstract string Name();

        public virtual void Close()
        {

        }

        public string AskIdentifier()
        {
            return Identifier;   
        }

        public static string GetIdentifierPattern()
        {
            return "xyzsdfsdf";
        }
    }

    public class DeviceA : Device
    {
        public DeviceA(string identifier) : base(identifier) { }
        public override string Name()
        {
            return "DeviceA";
        }        
    }

    public class DeviceB : Device
    {
        public DeviceB(string identifier) : base(identifier) { }
        public override string Name()
        {
            return "DeviceB";
        }       

    }

    public class DeviceC : Device
    {
        public DeviceC(string identifier) : base(identifier) { }
        public override string Name()
        {
            return "DeviceC";
        }        
    }

    public class DeviceD : Device
    {
        public DeviceD(string identifier) : base(identifier) { }
        public override string Name()
        {
            return "DeviceD";
        }        
    }

    public class DeviceFactory
    {
        private static List<Type> device_table = new List<Type>() { typeof(DeviceA), typeof(DeviceB), typeof(DeviceC), typeof(DeviceD) };

        public static Device Create(Device device, string identifier)
        {
            if (!device_table.Contains(device.GetType()))
            {
                var message = string.Format("No device driver implemented for identifier {0}.", identifier);
                throw new NotImplementedException(message);
            }

            if (string.IsNullOrEmpty(identifier))
                throw new ArgumentException("No identifier selected.");

            //Try to open a device and then read identifier
            string dev_identifier;
            try
            {
                var dev = DevIOLib.Open(identifier);
                dev_identifier = dev.AskIdentifier();
                dev.Close();
            }
            catch (Exception ex)
            {
                throw new Exception(string.Format("Error opening device {0} on {1}.", device, identifier));
            }

            var match = Regex.Match(dev_identifier, Device.GetIdentifierPattern());
            if (match.Success)
            {
                var newDevice = (Device) Activator.CreateInstance(device.GetType(), dev_identifier);
                return newDevice;
            }
            else
                throw new Exception(string.Format("Wrong device connected to identifier {0}.", identifier));
        }
    }

    public static class DevIOLib
    {
        public static Device Open(string identier)
        {
            return new DeviceA(identier);
        }
    }

    public class DeviceCreationTest
    {
        public static void Main(string[] args)
        {
            var d = new DeviceA("asdfsdf");
            DeviceFactory.Create(d, "asdfsdf");

            Console.ReadKey();

        }   
    }
} 
```

# android - android中的Facebook集成在添加库时显示错误

> ID：15309917
> 
> 赞同：0
> 
> 时间：2013-03-09T10:59:33.593
> 
> 标签：android, facebook

我正在 Android 中进行 Facebook 集成。我完成了[指南](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)中给出的所有 5 个步骤， 但是当我执行第 6 步时，即，将 FacebookSDK 添加到我的应用程序时，我遇到了一些错误。我发布了这些错误，请帮助我......

`

```
[2013-03-09 16:20:47 - FbIntegration] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-03-09 16:20:47 - FbIntegration] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-03-09 16:20:47 - FbIntegration] All versions of the libraries must be the same at this time.
[2013-03-09 16:20:47 - FbIntegration] Versions found are:
[2013-03-09 16:20:47 - FbIntegration] Path: C:\Users\gtm\facebook-android-sdk-3.0\facebook\libs\android-support-v4.jar
[2013-03-09 16:20:47 - FbIntegration]   Length: 349252
[2013-03-09 16:20:47 - FbIntegration]   SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-03-09 16:20:47 - FbIntegration] Path: C:\ste\FbIntegration\libs\android-support-v4.jar
[2013-03-09 16:20:47 - FbIntegration]   Length: 385685
[2013-03-09 16:20:47 - FbIntegration]   SHA-1: 48c94ae70fa65718b382098237806a5909bb096e 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:28:01.777

复制 android-support-v4.jar

```
C:\Users\gtm\facebook-android-sdk-3.0\facebook\libs\android-support-v4.jar 
```

到

```
C:\ste\FbIntegration\libs\android-support-v4.jar 
```

这正是错误所说的。依赖只能有一个版本的android-support-v4.jar

# java - 线程没有给出正确的输出

> ID：15309919
> 
> 赞同：0
> 
> 时间：2013-03-09T10:59:46.017
> 
> 标签：java, multithreading

一个使用线程的小程序真的让我很烦，有人能解释为什么这没有给出我认为应该的输出吗？

```
class FirstClass {
  public static void main(String args[]) {
    Class2 two = new Class2();
    Thread thread1 = new Thread(two);
    thread1.start();

    Class3 three =new Class3(two);
    Thread thread2 = new Thread(three);
    thread2.start();     
  }
}
class Class2 implements Runnable {
  public Boolean variable1 = false;
  @Override
  public void run() {
    System.out.println("Sleeping thread");
    try {
      Thread.sleep(3000);
    }catch(Exception e){}
    variable1=true;
    System.out.println("Variable 1 = " + variable1);
  }
}
class Class3 implements Runnable {
  Class2 two;
  public Class3(Class2 _two) {
    this.two = _two;
  }
  @Override
  public void run() {
    while(!this.two.variable1) {
      //System.out.println("in while");
    }
    System.out.println("Variable1 was changed to true"); 
  }
} 
```

以上，会给我正确的输出，即“睡眠线程”、“变量 1 = 真”、“变量 1 已更改为真”。现在，如果我稍微更改程序并取消注释 'System.out.println("in while");' 我没有得到“Variable1 已更改为 true”，这就像它没有脱离 while 循环，但为什么 'System.out.println("in while")' 会使其中断？或者也许它不是吗？如果有人能解释发生了什么，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:19:51.563

您在`two.variable1`没有任何同步的情况下从多个线程访问。所以你有一个可见性问题：第二个线程从其内部缓存中读取变量的值，并且不知道它已被第一个线程更改。

您应该创建变量`volatile`，或使用`AtomicBoolean`，或使用同步方法访问它，以确保对变量的写入刷新到主存储器并从主存储器读取变量。

由于 println 方法是同步的，因此调用`System.out.println()`具有使变量可见的副作用。

# java - 如何在jsp中创建会话对象和会话变量？

> ID：15309923
> 
> 赞同：-3
> 
> 时间：2013-03-09T10:59:58.783
> 
> 标签：java, jsp, session, object, session-variables

如何在 jsp 中创建会话对象？似乎是一个愚蠢的问题，但视野变量和会话对象有什么区别？谁能告诉我如何创建会话变量以及如何检索变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:08:12.560

[你可以在这里](http://www.exforsys.com/tutorials/jsp/jsp-implicit-and-session-objects.html)找到一些答案

[在](https://stackoverflow.com/questions/5766521/how-do-you-store-java-objects-in-httpsession)这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:24:24.830

`session`是jsp中的一个隐式对象。你不需要创建它。容器为您完成。会话变量是指指向真实对象的变量。
1\. 创建变量（引用）是不同的东西（我们在创建变量（引用）之前使用类类型）
2\. 创建对象是不同的东西（我们使用`new`关键字创建对象）

然后我们必须使用 = 符号将步骤 2 中创建的对象分配给步骤 1。

```
UserClass refUser = new UserClass(); // UserClass is some class for example. 
```

= 符号右侧是对象创建过程
，= 符号左侧是变量（或引用）创建过程。

# ReadHeadFirstCoreJava

# visual-c++ - 通过键盘而不是命令行参数输入文件名？

> ID：15309924
> 
> 赞同：0
> 
> 时间：2013-03-09T11:00:08.800
> 
> 标签：visual-c++

实际上，下面的程序是针对称为 Rabin-IDA 的分散算法的；该算法将数据分成 N 块，然后从 M 块中重新组合（这样`M<N`）。

因此，下面的程序需要命令行参数，通过项目属性/调试输入。这个参数是文件名，执行的程序将文件分成N个文件，然后从M个分割的文件中重新组合，并将其放在另一个文件中，该文件也应该将其名称作为参数传递。

现在我的问题是，我怎样才能让这个程序通过键盘输入文件名？？（我的意思是用户从屏幕输入文件名而不是命令行参数）

下面的代码只是程序的主要功能，它的全部在这个链接（[http://www.juancamilocorena.com/home/projects](http://www.juancamilocorena.com/home/projects)）信息分散算法Rabin-IDA。

```
#include "include.h"

void __cdecl _tmain(int argc, TCHAR *argv[])
{
DWORD ini=GetTickCount();
try
{
if( argc == 3 ) //recombine
{
RabinIDA rabin=RabinIDA(17,10);
long long size=GetFileSize(argv[1]);
int f[]={0,2,3,5,6,8,9,11,14,15};
rabin.recombine(argv[1],
f,
argv[2],
size);
}
else if(argc == 2)
{
RabinIDA rabin=RabinIDA(17,10);
rabin.split(argv[1]);
}
else
{
printf("Error. To split a file pass a parameter with the file to be splitted\n");
printf("To recombine the file give the name of the original file and the output file\n");
printf("The name of the file is used to get the size of the original file only, in a production\n");
printf("environment the length of the original file and the id of the share must be stored along with the share");
return;
}
printf("%d\n",GetTickCount()-ini);
}
catch (int)
{
PrintLastError(_T("MAIN CATCH"));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:21:59.253

如果要从控制台获取文件名，可以这样做：

```
cout << "Enter file name: ";
string filename;
getline(cin, filename); 
```

# python - XML 文件解析和获取标签？

> ID：15309930
> 
> 赞同：0
> 
> 时间：2013-03-09T11:01:41.487
> 
> 标签：python, xml, python-3.x, xml-parsing, xml.etree

xml =

```
<company>Mcd</company>        
<Author>Dr.D</Author> 
```

我想去接 Mcd 和 Dr.D。
我的尝试

```
import xml.etree.ElementTree as et
e = et.parse(xml)
root = e.getroot()
for node in root.getiterator("company"):
   print node.tag 
```

寻求慷慨的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:30:11.603

只需找到*一个*匹配的标签，然后获取`.text`属性：

```
company = root.find('.//company').text
author = root.find('.//Author').text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:18:13.483

尝试这个。

```
 from xml.etree import ElementTree as ET
    xmlFile = ET.iterparse(open('some_file.xml','r'))

    for tag, value in xmlFile:
        print value.text 
```

# android - 活动之间的卡片翻转动画

> ID：15309931
> 
> 赞同：22
> 
> 时间：2013-03-09T11:01:52.837
> 
> 标签：android, animation, android-fragments, android-activity

## 如何在活动之间做**卡片翻转**动画

[http://developer.android.com/training/animation/cardflip.html](http://developer.android.com/training/animation/cardflip.html)

上面的链接在静态布局之间切换..我想做一个`CardFlip`具有动态布局的 2 个活动之间..在此先感谢..:)

我有两个活动...

1.  `Main_Activity`包含产品详细信息的A （例如 Galaxy s3）
2.  一个`Search_Activity`查询用户搜索请求的..

中有一个搜索按钮`Main_Activity`。当您单击按钮时，`Main_Activity`视图必须将卡片翻转到`Search_Activity`。同样，一旦用户选择了产品，它应该`Card-Flip`反之亦然。

我尝试按照上述 URL 中的说明实现。但它只在使用`XML`. 我正在实施搜索`ActionBar`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-09T08:50:31.680

据我所知，您不能在活动之间进行完全相同的卡片翻转。
但是，
您可能已经知道您需要`overridePendingTransition()`在活动之间进行动画转换（[此处的文档](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)）。现在您只需要一个动画资源就可以了。我使用了这些：
fade_in.xml

```
<?xml version="1.0" encoding="utf-8"?><set xmlns:android="http://schemas.android.com/apk/res/android" >
<scale
    android:duration="200"
    android:fromXScale="0.0"
    android:fromYScale="1.0"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:startOffset="200"
    android:toXScale="1.0"
    android:toYScale="1.0" />

<alpha
    android:duration="1"
    android:fromAlpha="0.0"
    android:startOffset="200"
    android:toAlpha="1.0" />
</set> 
```

淡出.xml

```
<?xml version="1.0" encoding="utf-8"?><set xmlns:android="http://schemas.android.com/apk/res/android" >
<scale
    android:duration="200"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0.0"
    android:toYScale="1.0" />

<alpha
    android:duration="1"
    android:fromAlpha="1.0"
    android:startOffset="200"
    android:toAlpha="0.0" />
</set> 
```

请注意，旋转动画仅在给定的枢轴位置（x，y 坐标）处围绕 Z 轴（进入屏幕的方向）旋转，因此您不能使用它围绕 Y 轴翻转。
我所做的是缩放中间周围的宽度，同时保持高度，这会产生活动在其一侧打开的错觉。此外，当宽度为 0 时，进入和退出活动分别淡入和淡出，因此看起来它们正在切换。动画中翻转的属性`duration`必须与两个动画的所有属性相同。 不完美，但对我有用。 希望能帮助到你。`scale``startOffset`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-11T18:20:36.737

不可能像接受的答案中所述那样简单地在活动之间进行卡片翻转动画（这只是将新活动从屏幕中间扩展到两侧）。

这样做的原因是，在调用时`overridePendingTransition()`，您只是将动画应用于*启动的活动*，而不是当前打开的活动。

在链接到的（非常好的）教程中，总共有 4 个动画，每个转换有 2 个动画（一个用于进入屏幕的片段，一个用于退出屏幕的片段）。

这是我如何解决这个问题并在我的 2 个活动之间制作翻转卡片动画的方法，但它对我的活动内容非常定制。在某些情况下，我的第一个活动包含一个全屏图像，我只是希望将该图像翻转到另一个相同大小的视图。

1.  通过调用禁用自动窗口动画`overridePendingTransition(0, 0)`
2.  在第二个活动的捆绑包中，为新活动传递足够的信息以重新创建视图（对我来说，这是图像的大小和位置，以及要加载的资源）
3.  在您的新视图上设置一个 onPreDrawListener，您可以在其中重新创建父活动的视图（在我的例子中是图像）
4.  您只需翻转 2 个视图。为此，我重写了您发布的 Flip Card 片段转换教程中的代码，并使用`ObjectAnimator`s 将其重写为代码。
5.  覆盖您的`onBackPressed()`方法以相反的顺序运行相同的动画

使用这种机制，您绝对可以进行任何自定义转换，因为您只是在视图之间制作动画。以下是有关该技术的更多信息：[https ://www.youtube.com/watch?v=ihzZrS69i_s#t=1001](https://www.youtube.com/watch?v=ihzZrS69i_s#t=1001)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-06T09:23:27.127

**您可以在两个活动之间制作这样的卡片翻转动画（附 gif）。**

[![两个活动之间的卡片翻转动画](../Images/c55594b3012beb6704ea75f15f358704.png)](https://i.stack.imgur.com/ip8lr.gif)

**按着这些次序：**

首先`fade_in.xml`在anim 中创建XML`res > anim > fade_in.xml`

淡入淡出.xml

```
<?xml version="1.0" encoding="utf-8"?><set xmlns:android="http://schemas.android.com/apk/res/android" >
    <scale
        android:duration="2000"
        android:fromXScale="0.0"
        android:fromYScale="1.0"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:pivotX="50%"
        android:pivotY="50%"
        android:startOffset="2000"
        android:toXScale="1.0"
        android:toYScale="1.0" />

    <alpha
        android:duration="1"
        android:fromAlpha="0.0"
        android:startOffset="2000"
        android:toAlpha="1.0" />
</set> 
```

`fade_out.xml`然后在 anim 中 创建第二个 XML`res > anim > fade_out.xml`

淡出.xml

```
<?xml version="1.0" encoding="utf-8"?><set xmlns:android="http://schemas.android.com/apk/res/android" >
    <scale
        android:duration="2000"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="0.0"
        android:toYScale="1.0" />

    <alpha
        android:duration="1"
        android:fromAlpha="1.0"
        android:startOffset="2000" 
        android:toAlpha="0.0" />
</set> 
```

**在创建两个动画 XML 然后在里面设置值`res>value>style.xml`**

现在在所有活动中**仔细**添加此代码`style.xml`以**设置卡片翻转动画。**（如果您希望在选定的两个活动之间使用此动画，请在 中设置动画`.java`。）

在里面添加代码 `style.xml`

```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>    

                            <!-- add code below -->
       <item name="android:windowAnimationStyle">@style/CustomActivityAnimation</item>
   </style>

   <style name="CustomActivityAnimation" parent="@android:style/Animation.Activity">
       <item name="android:activityOpenEnterAnimation">@anim/fade_in</item>
       <item name="android:activityOpenExitAnimation">@anim/fade_out</item>
       <item name="android:activityCloseEnterAnimation">@anim/fade_in</item>
       <item name="android:activityCloseExitAnimation">@anim/fade_out</item>
   </style>

</resources> 
```

**谢谢 ！！快乐编码:)**

# php - 在一行中从 MySQL 中选择随机用户

> ID：15309932
> 
> 赞同：0
> 
> 时间：2013-03-09T11:01:53.653
> 
> 标签：php, mysql

我正在优化查询

（从 1 个表中随机选择 2 个用户）

```
id  | name |  total | img
------------------------ --
1    user1   500      1
2    user2   600      2
3    user3   650      3 
```

需要结果和 ABS(total1 -total2) < 200

```
id1  | id2|  name1 | name2 | img1 | img2 |  total1 | total2
------------------------ -------------------------------------
1       3    user1   user3    1      3        500      650 
```

为了获得更多性能重写这个：

```
SELECT
  C1.id AS id1, C1.img AS img1, C1.name AS name1,
  C2.id AS id2, C2.img AS img2, C2.name AS name2,
  C1.total AS total1, C2.total AS total2
FROM users C1, users C2
WHERE C1.id <> C2.id 
  AND ABS(C1.total - C2.total) < 200
ORDER BY RAND()
LIMIT 1 
```

至

```
$dbh = new PDO ("mysql:host=$hostname;dbname=$dbname","$username","$pw");
$rs = $dbh->query(
"SELECT COUNT(*) AS 'count'
 FROM users C1, users C2
 WHERE C1.id <> C2.id
   AND ABS(C1.total - C2.total) < 200");
$target = rand(0,$rs[0]['count']);
$rs = $dbh->query(
  "SELECT 
   C1.id AS id1, C1.img AS img1, C1.name AS name1,
   C2.id AS id2, C2.img AS img2, C2.name AS name2,
   C1.total AS total1, C2.total AS total2
  FROM users C1, users C2
  WHERE C1.id <> C2.id
   AND ABS(C1.total - C2.total) < 200
  LIMIT ?,1",
array($target));

foreach ($rs as $row) 
                    { 
                     print $row['name1']; 
                     } 
```

返回 empry 结果，我错过了什么，与 db 的连接正常（另一个查询正在工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:24:02.647

要选择两个随机记录，我通常会做一个

```
// Whatever your query is
order by rand() 
limit 2 
```

然后你可以从这两个随机记录中做任何你需要的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:42:57.970

这是您的解决方案：

```
SELECT u1.id1, u2.id2, u1.name1, u2.name2, u1.total1, u2.total2, u1.img1, u2.img2 
FROM 
(
    SELECT u.id id1, u.name name1, u.total total1, u.img img1 
    FROM users u 
    ORDER BY RAND()
) u1
CROSS JOIN
(
    SELECT u.id id2, u.name name2, u.total total2, u.img img2 
    FROM users u 
    ORDER BY RAND()
) u2
WHERE u1.id1 != u2.id2 AND ABS(u1.total1 - u2.total2) < 200
LIMIT 0,1; 
```

[演示](http://sqlfiddle.com/#!2/02695/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:21:17.810

尝试使用`prepare()`和`execute()`：

```
$stmt = $dbh->prepare(
  "SELECT 
   C1.id AS id1, C1.img AS img1, C1.name AS name1,
   C2.id AS id2, C2.img AS img2, C2.name AS name2,
   C1.total AS total1, C2.total AS total2
  FROM users C1, users C2
  WHERE C1.id <> C2.id
   AND ABS(C1.total - C2.total) < 200
  LIMIT ?,1");
$stmt->execute(array($target));

$rs = $stmt->fetchAll(); 
```

单个查询而不是两个查询如何：减少`rand()`计算

```
SELECT C1.id AS id1,
       C1.img AS img1,
       C1.name AS name1,
       C2.id AS id2,
       C2.img AS img2,
       C2.name AS name2,
       C1.total AS total1,
       C2.total AS total2
  FROM(select *, rand() randval from users) C1, users C2
  WHERE C1.id <> C2.id AND ABS(C1.total - C2.total) < 200
  ORDER BY C1.randval DESC
  LIMIT 1; 
```

# c++ - 计算n个最近节点的大数据网络文件处理的高效算法

> ID：15309934
> 
> 赞同：2
> 
> 时间：2013-03-09T11:01:55.097
> 
> 标签：c++, python, algorithm, r, bigdata

**问题：** 我有两个网络文件（比如 NET1 和 NET2）——每个都有一组节点，每个节点都有唯一的 ID 和地理坐标 X 和 Y。NET2 中的每个节点都有*n 个*连接到 NET1 和 ID *n 个*节点将由最小直线距离确定。输出将具有 NET1、NET2 中节点的三个字段 ID 以及它们之间的距离。所有文件均采用制表符分隔格式。

**前进的一种方法..** 一种实现方法是针对 NET2 中的每个节点，我们循环遍历 NET1 中的每个节点并计算所有 NET1-NET2 距离组合。按 NET2 节点 ID 和距离对其进行排序，并写出每个节点的前四个记录。但问题是 NET1 上有接近 200 万个节点，NET2 中有 2000 个节点——即在该算法的第一步中要计算和编写 40 亿个距离……而且运行时间非常令人生畏！

**要求：** 我很好奇你们中是否有人遇到过类似的问题。我很想听听大家关于可用于加速处理的任何算法和数据结构的信息。我知道这个问题的范围非常广泛，但我希望有人能指出正确的方法，因为我在优化这种规模数据的代码方面的经验非常有限。

**语言：** 我正在尝试使用 C++、Python 和 R。

请提出想法！非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:47:13.563

[kd-tree](http://en.wikipedia.org/wiki/K-d_tree)是选项之一。它允许您在合理的时间内找到最近的邻居（或一组最近的邻居）。当然，您必须在一开始就构建树，这需要一些时间。但一般来说，kd-tree 是合适的，如果您不必在运行时添加/删除节点，这似乎是您的情况。它还具有较低维度的更好性能（在您的情况下，维度为 2）。

另一种可能的数据结构是[八叉树](http://en.wikipedia.org/wiki/Octree)（二维的[四叉树](http://en.wikipedia.org/wiki/Quadtree)），它是更简单的数据结构（很容易实现），但 kd-tree 可以更有效。

# javascript - 从加载的文本中获取字母

> ID：15309937
> 
> 赞同：1
> 
> 时间：2013-03-09T11:02:18.330
> 
> 标签：javascript

我有一个代码。它从这里加载文本：

```
<script type="text/mygamelevel" id="level1" src="levels/level1.txt">
        000122341
        124235245
        154456567
</script>

mapa = loadFromFile("level1"); 
```

和 loadFromFile：

```
function loadFromFile(id) {
var level = document.getElementById(id).text;
var lines = level.split("\n");
for (var i = 0; i < lines.length; i++) {
    var line = lines[i];
    if (!line.trim())
        continue;
    var letter = line.charAt(2);
    alert("Second: " + letter + " ");
}
} 
```

但它不起作用：/浏览器中的警报为空。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:18:57.803

我更正了您的功能：

```
function loadFromFile(id) {
    var level = document.getElementById(id).text;
    var lines = level.split("\n");
    //lines.length - 1 to parse each lines from 0 to 8 (9 numbers)
    for (var i = 0; i < lines.length - 1; i++) {
        var line = lines[i].trim(); //trim to remove white spaces
        if(line.length)  //if the line is not empty
        {
            var letter = line.charAt(1); //second letter
           alert("Second: " + letter + " ");
        }
    }
} 
```

请注意，数组从 开始`0`，因此第二个字母是 the并且您必须从不从`charAt(1)`开始计数：`0``1`

`000122341` *=> 9 个数字*

`for 1 to 10` *=> 9 个数字*

`for 0 to 10` *=> 10 个数字*

`for 0 to (10 - 1)` *=> 9 个数字*

请参阅[小提琴](http://jsfiddle.net/soyuka/4j73X/1/)以获取工作示例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:18:43.990

问题是您的变量`line`在开头包含空格，就像`..000122` （每个点都是一个空格）一样，您需要删除那些额外的空格才能获得您想要的值。

# android - 在 Eclipse 中导入 android.R：为什么？

> ID：15309941
> 
> 赞同：19
> 
> 时间：2013-03-09T11:03:05.083
> 
> 标签：android, eclipse, import

[文档](http://source.android.com/source/using-eclipse.html)摘录：

> Eclipse 有时喜欢在使用资源的文件顶部添加 import android.R 语句，尤其是当您要求 eclipse 对导入进行排序或以其他方式管理时。这将导致您的制造中断。留意这些错误的导入语句并删除它们。

我的问题：**为什么？**为什么日食继续这样做？

我已经使用 Eclipse 开发 Android 应用程序已经有一段时间了，但我一直无法理解为什么 Eclipse 会做这样的事情。

当我使用`Ctrl`++`Shift`组织`O`我的导入语句时，**`import android.R`**会自动添加。突然间，我的正确代码突然被红色错误覆盖，说**R 无法解决**。对于初学者来说，这真的很可怕，因为他不知道自己做错了什么。

在另一种情况下，假设我的布局文件有问题并且`R.java`没有生成，它说**R cannot be resolved**，因为 R.java 由于错误而没有生成。当我将光标移动到任何错误时，它建议我`import android.R`.

在Android上工作了一段时间后，我知道**永远不要**导入android.R，但是我一直无法理解为什么eclipse一直建议它，坦率地说，添加import android.R从来没有解决我的任何问题. 它只是增加了现有的问题，这些问题在开发的最初几天确实很痛苦。

那么，有谁知道 eclipse 提出错误导入建议的原因？这只是一个错误吗？我不认为这是一个错误，因为至少在 Android 文档中提到它之后它会得到修复。

如果它不是一个错误，那么它的真正目的是**`android.R`**什么？它究竟指的是什么？

您的意见/经验将非常有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T11:12:01.577

这不是错误。在某些情况下`android.R`可以提供帮助并解决问题。

`android.R`是一个 R.java 文件，就像您在自己的项目中拥有的文件一样。您项目中的一个 ( `your.packagename.R`) 包含对您`/res`文件夹下资源的引用，例如布局、可绘制文件、XML 文件、原始文件、字符串等。

另一方面，该`android.R`文件包含对 Android 内置的某些默认资源的引用，例如`simple_list_item_1`.

Eclipse 有时会建议并自动导入它，就好像您的项目的 R 文件由于 XML 错误或其他原因尚未生成一样，您的代码将引用一个不存在的文件。通过导入`android.R`，eclipse 确保您的代码引用了一个存在的类。但是，`android.R`不太可能拥有与您相同的资源，这将引发另一组错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T09:53:42.877

如果您通过 android 工具重命名您的包名并且不在您的代码中使用相同的名称重命名基本包名，Eclipse 也将始终尝试在您的类中自动导入 android.R，因为他会假设您的文件中有两个 R。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T10:24:33.270

试试这个...

窗口 -> 首选项 -> Java -> 编辑器 -> 保存操作

取消选中“组织导入”。希望那会做到。

在这个设置之后，它对我有用。

# c# - Silverlight，通过更改 img 源 c# 来更新 gui

> ID：15309949
> 
> 赞同：0
> 
> 时间：2013-03-09T11:04:06.070
> 
> 标签：c#, silverlight, windows-phone-7, user-interface

我正在尝试制作一个二进制时钟，它工作正常。

它是这样工作的。

每次调用 run 方法时，它都会设置时间，并更改一些 img 源（img 是我的灯，每次关闭或打开时都更改 img 源）。

但是我怎样才能让它一直运行呢？

如果我做一个循环，它不会在我的手机上启动，就像使用线程做任何事情一样。

更改某些属性后是否有更新 gui 的方法？

XMAL 代码

```
<phone:PhoneApplicationPage 
x:Class="BinSample.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Image Height="80" HorizontalAlignment="Left" Margin="141,187,0,0" Name="imag1" Stretch="Fill" VerticalAlignment="Top" Width="106" Source="/BinSample;component/img/knapSluk.png" />
    </Grid>
</Grid> 
```

```
 public MainPage()
    {
        InitializeComponent();

        //test one
        //try to make a neverending loop
        Run();

        //testc two
        //try loop with thread an sleep funtion.
        thredRun();

    }

    public void thredRun()
    {
        new Thread(new ThreadStart(thredRun));
        while (true)
        {
            Run();
            Thread.Sleep(100);
        }
    }

    public void Run()
    {
        while (true)
        {
            int hour = DateTime.Now.Hour;
            if (hour % 10 == 0)
                imag1.Source = new BitmapImage(new Uri("img/knapTaand.png", UriKind.Relative));
            else
                imag1.Source = new BitmapImage(new Uri("img/knapSluk.png", UriKind.Relative));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:10:08.430

这里有几个问题。

首先，您没有正确使用 Thread 类，[请查看本教程以开始使用](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)

即使您确实更正了对 Thread 类的使用，您最终还是会阻塞 UI 线程，或者最终会出现跨线程异常。

在这种情况下，实现所需目标的最简单方法可能是使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)

```
public MainPage()
{
    InitializeComponent();
    DispatcherTimer timer = new DispatcherTimer() { Interval = TimeSpan.FromHours(1) };
    timer.Tick += new EventHandler(timer_Tick);
    SetImageSource();
    timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    SetImageSource();
}

void SetImageSource()
{
    int hour = DateTime.Now.Hour;
    if (hour % 10 == 0)
        imag1.Source = new BitmapImage(new Uri("img/knapTaand.png", UriKind.Relative));
    else
        imag1.Source = new BitmapImage(new Uri("img/knapSluk.png", UriKind.Relative));
} 
```

# asp.net-mvc-4 - 如果使用实体连接字符串（与 SQL 连接字符串一起使用），则 ASP.NET MVC4 简单成员身份无法初始化

> ID：15309950
> 
> 赞同：7
> 
> 时间：2013-03-09T11:04:11.350
> 
> 标签：asp.net-mvc-4, entity-framework-5

我正在使用 Entity Framework 5 开发 ASP.NET MVC4 应用程序，并且我使用的是模型优先模式。

但是，如果我使用设计器生成的连接字符串，Simple Membership 将引发以下错误：

```
 ......
  InnerException: System.InvalidOperationException
   HResult=-2146233079
   Message=The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588
   Source=STD
   StackTrace:
        at SistemTempahanDewan.Filters.InitializeSimpleMembershipAttribute.SimpleMembershipInitializer..ctor() in c:\Users\Orang\Documents\Visual Studio 2012\Projects\STD\STD\Filters\InitializeSimpleMembershipAttribute.cs:line 45
   InnerException: System.ArgumentException
        HResult=-2147024809
        Message=Unable to find the requested .Net Framework Data Provider.  It may not be installed.
        Source=System.Data
        StackTrace:
             at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
             at WebMatrix.Data.DbProviderFactoryWrapper.CreateConnection(String connectionString)
    .... 
```

设计器生成的连接字符串（不起作用）：

```
<add name="STD" connectionString="metadata=res://*/Models.STD.csdl|res://*/Models.STD.ssdl|res://*/Models.STD.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;initial catalog=STD;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我手动添加的连接字符串（将起作用）：

```
<add name="STD" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=STD;Integrated Security=True;MultipleActiveResultSets=True" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T11:35:30.270

是的，SimpleMembership 仅适用于 SQL Server 连接字符串，因此您需要在 web.config 中添加这样的条目。不理想，但它就像你说的那样工作......

这可能是您的答案：[使用 SimpleMembership 和 EF 模型优先](https://stackoverflow.com/questions/12575311/using-simplemembership-with-ef-model-first)

Jon Galloway 的文章是有关 SimpleMembership 信息的极好资源，如果您还没有看过它：[http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers -and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# php - PHP中的tar路径问题

> ID：15309951
> 
> 赞同：0
> 
> 时间：2013-03-09T11:04:17.753
> 
> 标签：php, command, exec, tar

我正在尝试通过`exec`PHP 创建一个 TAR，其中将包含很多文件夹。每个包含的文件夹都代表一个服务器路径。不幸的是，我创建这个 TAR 的脚本不起作用，我不知道我做错了什么。Linux 不是我的强项，所以如果有人知道可能出了什么问题，我将不胜感激。

**代码**

```
 exec("tar czf ".DIR_PATH."/public/zip_folder/facebook_albums_1.tar.gz / ".DIR_PATH."public/zip_folder/facebook_albums_1"); 
```

**代码结果**

```
var\chroot\home\content\78\10368378\html\domain\Facebook\public\zip_folder\facebook_albums_1 
```

**我想要**

```
zip_folder\facebook_albums_1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:11:04.010

尝试做

`chdir(DIR_PATH . '/public/');`

之前`exec`，然后更改`exec`为

```
exec("tar czf zip_folder/facebook_albums_1.tar.gz zip_folder/facebook_albums_1"); 
```

# c++ - Linux 上的文件搜索 API

> ID：15309952
> 
> 赞同：3
> 
> 时间：2013-03-09T11:04:27.167
> 
> 标签：c++, linux, file, qt

在我的项目中，我需要显示用户驱动器上按文件名过滤的所有文件，并带有文本行。有没有 API 可以做这样的事情？

我知道在 Windows 上，WinAPI 中有 FindFirstFile 和 FindNextFile 函数。

我使用 C++/Qt。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:16:37.730

有[ftw](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/ftw.h.html) ()，linux有[fts](http://man7.org/linux/man-pages/man3/fts.3.html) ()

除此之外，您可以迭代目录，例如使用 opendir8/ [readdir](http://pubs.opengroup.org/onlinepubs/9699919799/functions/readdir.html) ()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T11:11:47.030

Qt 提供了[QDirIterator](http://qt-project.org/doc/qt-4.8/qdiriterator.html)类：

```
QDirIterator iter("/", QDirIterator::Subdirectories);
while (iter.hasNext()) {
    QString current = iter.next();
    // Do something with 'current'...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T11:30:04.673

如果你正在寻找一个 Unix 命令，你可以这样做：

`find source_dir -name 'regex'`

如果你想做 C++ 风格，我建议使用[boost::filesystem](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm)。这是一个非常强大的跨平台库。
当然，您将不得不添加一个额外的库。

这是一个例子：

```
 std::vector<std::string> list_files(const std::string& root, const bool& recursive, const std::string& filter, const bool& regularFilesOnly)
        {
            namespace fs = boost::filesystem;
            fs::path rootPath(root);

            // Throw exception if path doesn't exist or isn't a directory.
            if (!fs::exists(rootPath)) {
                throw std::exception("rootPath does not exist");
            }
            if (!fs::is_directory(rootPath)) {
                throw std::exception("rootPath is not a directory.");
            }

            // List all the files in the directory
            const std::regex regexFilter(filter);
            auto fileList = std::vector<std::string>();

            fs::directory_iterator end_itr;
            for( fs::directory_iterator it(rootPath); it != end_itr; ++it) {

                std::string filepath(it->path().string());

                // For a directory
                if (fs::is_directory(it->status())) {

                    if (recursive && it->path().string() != "..") {
                        // List the files in the directory
                        auto currentDirFiles = list_files(filepath, recursive, filter, regularFilesOnly);
                        // Add to the end of the current vector
                        fileList.insert(fileList.end(), currentDirFiles.begin(), currentDirFiles.end());
                    }

                } else if (fs::is_regular_file(it->status())) { // For a regular file
                    if (filter != "" && !regex_match(filepath, regexFilter)) {
                        continue;
                    }

                } else {
                    // something else
                }

                if (regularFilesOnly && !fs::is_regular_file(it->status())) {
                    continue;
                }

                // Add the file or directory to the list
                fileList.push_back(filepath);
            }

            return fileList;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T11:46:03.443

您还可以使用`glob` [http://man7.org/linux/man-pages/man3/glob.3.html](http://man7.org/linux/man-pages/man3/glob.3.html) 具有存在于许多 Unices（肯定是 Solaris）上的优势，因为它是 POSIX 的一部分。

好吧，它不是 C++，而是纯 C。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T11:31:14.883

看`man find`。`find`支持通过掩码过滤（例如`-name`选项）

# c++ - 在减少模板使用的同时优化性能

> ID：15309965
> 
> 赞同：1
> 
> 时间：2013-03-09T11:07:26.420
> 
> 标签：c++, templates

在我的应用程序中，通过为结构引入特殊情况，我获得了大约 2 倍的加速。

简化后，我的代码如下所示：

```
class SpecialCase
{
   private:
      size_t values[10];
   public:
      void foo();
};

class GenericCase
{
   private:
      std::vector<size_t> values;
   public:
      void foo();
};

template <class Case> void bar()
{
   Case case;
   case.foo();
}

void somewhereElse()
{
   if ( boring_runtime_condition )
   {
      bar<SpecialCase>();
   }
   else
   {
      bar<GenericCase>();
   }
} 
```

这段代码没有问题，但现在我必须通过另一个类来扩展应用程序：

```
class Problem
{
   private:
      std::vector<Case> cases;
   public:
      Case doSomething();
}; 
```

要同时使用 SpecialCase 和 GenericCase，我必须将整个类设为模板。由于我有几个特殊情况，这会大大减慢编译速度。我一点也不喜欢。

我从不在应用程序运行中混合 SpecialCase 和 GenericCase。我非常希望不必*在每个方法中*都将我的 Case 转换为特定类型，因为它会使代码膨胀，而其他开发人员可能会忘记它。

有没有一种避免这种疯狂模板的好方法？（也欢迎 C++11 解决方案）

免责声明：请不要告诉我有多棒`std::vector`，我不应该使用特殊情况。我测量了性能，所以请不要发表您不相信 2 倍加速的评论。这是事实，这个问题与它无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:31:59.747

如果您不想创建很多 的实例`std::vector`，您可以创建一个小型代理类，通过引用存储所有内容并仅在此类中强制转换。如果它很小，则实例化不会太慢。

```
template<class T>
class Problem {
    private:
        std::vector< some_smart_pointer > cases;
    public:
        T cast(Case* x) {
             return (T*)x;
        }
        T doSomething() {
             //doing something
              return cast(returnValue);
        }
}; 
```

我调用了这个类`Problem`，但是最好制作一些`ProxyVector`仅用作代理的其他层并在`Problem`

# java - 通过 JComboBox 中的选定项目从 Array 列表中删除对象

> ID：15309966
> 
> 赞同：1
> 
> 时间：2013-03-09T11:07:27.250
> 
> 标签：java, arraylist, jcombobox

我的学生注册系统遇到了问题。我正在尝试通过从 a 中`ArrayList`选择一个对象来从 a中删除它`JComboBox`。

```
public class Course {

 public List<Student> Students;
 public List<Module> Modules;

    public Course()
    {
         Students = new ArrayList<Student>();
         Modules = new ArrayList<Module>();
    }

public class Del_Student extends JFrame
{

  private Course newCourse;
    public Del_Student(Course aCourse)
    {
        newCourse = aCourse;
        JButton btnDel = new JButton("Delete");
        JButton btnCancel = new JButton("Cancel");
        JComboBox studentsBox = new JComboBox();
        studentsBox.setPreferredSize(new Dimension(185,25));

    for(int i=0; i<newCourse.Students.size();i++ )
    {
        String p = newCourse.Students.get(i).getFirstName();
        studentsBox.addItem(p);
    }

      btnDel.addActionListener
    (
        new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                newCourse.Students.remove(studentsBox.getSelectedItem());
            }
        }
    ); 
```

我已经从对象中添加了一个字符串以显示在 上`JComboBox`，所以我要做的是选择该项目（由学生姓名显示），然后删除所选项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:52:27.670

为了帮助其他有类似问题的人，我通过执行以下操作解决了该解决方案：

```
 btnDel.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            for (int i = 0; i < newCourse.Students.size(); i++) {
                if (newCourse.Students.get(i).getFirstName().equals(studentsBox.getSelectedItem()
                        .toString())) {
                    newCourse.Students.remove(i);
                    JOptionPane.showMessageDialog(null, "Student Deleted");
                    studentsBox.removeAllItems();
                    for (int t = 0; t < newCourse.Students.size(); t++) {
                        String p = newCourse.Students.get(t).getFirstName();
                        studentsBox.addItem(p);
                    }
                }
            }
        }
    }); 
```

# batch-processing - Spring Batch: Can i write to multiple files based on Size

> ID：15309967
> 
> 赞同：1
> 
> 时间：2013-03-09T11:07:34.600
> 
> 标签：batch-processing, spring-batch

We are working on a Spring Batch Job, where we need to write to multiple files based on the size. For Example, we need to write to the output file output1.txt, once we reach 5 mb of the file size then it has to write into output2.txt. Please suggest

Is there any OOTB feature in Spring batch where we can achieve it or do we need to write custom code to achieve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:22:58.200

Spring batch Item writers and especially FlatFileItemWriter's do not support a MaxFileSize property like you need and in fact it is not the job of writer to check the size.

I would suggest 1-) Implement your writer for one file and output output.txt in the first step. 2-) Implement a second step as a tasklet which takes output.txt as input and splits this file for the requested file size.

This way you will separate your file splitting logic from your main step.

# algorithm - 快速排序的优化或错误实现

> ID：15309973
> 
> 赞同：0
> 
> 时间：2013-03-09T11:08:23.540
> 
> 标签：algorithm, delphi, sorting, quicksort

Delphi 在其中一个示例中实现了 QuickSort：

```
procedure QuickSort(var A: array of Integer; iLo, iHi: Integer);
var
  Lo, Hi, Mid, T: Integer;
begin
  Lo := iLo;
  Hi := iHi;
  Mid := A[(Lo + Hi) div 2];
  repeat
    while A[Lo] < Mid do Inc(Lo);
    while A[Hi] > Mid do Dec(Hi);
    if Lo <= Hi then
    begin
      VisualSwap(A[Lo], A[Hi], Lo, Hi); // just for visual
      T := A[Lo];
      A[Lo] := A[Hi];
      A[Hi] := T;
      Inc(Lo);
      Dec(Hi);
    end;
  until Lo > Hi;
  if Hi > iLo then QuickSort(A, iLo, Hi);
  if Lo < iHi then QuickSort(A, Lo, iHi);
  if Terminated then Exit;
end; 
```

它有效，但分区似乎很奇怪。或者这是一个常见的优化？

我用随机值做了一个测试，你会得到 Mid 不在 Hi、Lo 或介于两者之间的情况。在这种情况下，“枢轴”在两个值之间。这是因为它会在翻转后同时增加 Lo 和 Hi，即使其中一个具有 Mid 值。是不是你持有 Pivot 值并在它的左侧和右侧进行另一个 QuickSort 的线索。这是对等键值的优化吗？

另外，这个实现是否存在等值问题？3路分区会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:11:01.927

我还测试了中位数为 3 等的不同变体。唯一能加快速度的就是让它成为快速排序和插入排序之间的混合体，并展开其中一个递归。我删除了关键部分，因为它没有提供任何东西。这是我测试的最终变体：

```
procedure QuickSort3(var A: array of integer; iLo, iHi: integer);
var
  Hi, Lo, T, Mid: integer;
begin
  repeat
    if (iHi-iLo) > 16 then
    begin
      Mid := A[(iHi + iLo) shr 1];
      Lo := iLo;
      Hi := iHi;
      repeat
        while A[Lo] < Mid do inc(Lo);
        while A[Hi] > Mid do dec(Hi);
        if Lo <= Hi then
        begin
          if Lo <> Hi then
          begin
            T := A[Lo];
            A[Lo] := A[Hi];
            A[Hi] := T;
          end;
          inc(Lo);
          dec(Hi);
        end;
      until Hi < Lo;
      if Hi > iLo then
        QuickSort3(A,iLo,Hi);
      iLo := Lo;
    end
    else
    begin
      for Lo := iLo + 1 to iHi do
      begin
        T := Arr[Lo];
        Hi := Lo;
        while (Hi > iLo) and (Arr[Hi-1] > T) do
        begin
          Arr[Hi] := Arr[Hi-1];
          dec(Hi);
        end;
        Arr[Hi] := T;
      end;
      exit;
    end;
  until iHi <= Lo;
end; 
```

1 亿个随机值的增益约为 1.4 秒。

无论如何，到目前为止我所学到的：

分区是正确的，您不需要处理密钥。许多 QuickSort 教程解释了这个“错误”。错误的方式是不需要它。

处理密钥几乎没有什么收获。你接到的电话少了一点，但你也会在额外的处理中受到惩罚，而且它们大致相同。总的来说，我在排序 1 亿个值（总共 13.9 秒）时的按键处理速度提高了 50-100 毫秒。但那是在 Delphi 编译器上。

当元素低于 16 时，插入排序足以在快速排序中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:45:05.843

请对此发表评论，因为我不确定这是一种更好的方法。

我试图理解 QuickSort 的本质。我认为这个更正会使这个实现更好地工作（忽略 VisualSwap，它仅用于演示视觉效果）：

```
procedure QuickSort(var A: array of Integer; iLo, iHi: Integer);
var
  Lo, Hi, Mid, T: Integer;
begin
  Lo := iLo;
  Hi := iHi;
  T := (Lo + Hi) div 2;
  VisualSwap(A[Lo], A[T], Lo, T);
  Mid := A[T];
  A[T] := A[Lo];
  A[Lo] := Mid;

  inc(Lo);
  //Mid := A[(Lo + Hi) div 2];
  repeat
    while A[Lo] < Mid do Inc(Lo);
    while A[Hi] > Mid do Dec(Hi);
    if Lo <= Hi then
    begin
      VisualSwap(A[Lo], A[Hi], Lo, Hi);
      T := A[Lo];
      A[Lo] := A[Hi];
      A[Hi] := T;
      Inc(Lo);
      Dec(Hi);
    end;
  until Lo > Hi;

  if Hi > iLo then
  begin
    VisualSwap(A[iLo],A[Hi],iLo,Hi);
    A[iLo] := A[Hi];
    A[Hi] := Mid;
    dec(Hi);
  end;

  if Hi > iLo then QuickSort(A, iLo, Hi);
  if Lo < iHi then QuickSort(A, Lo, iHi);
  if Terminated then Exit;
end; 
```

我所做的是在找到枢轴的同时移出钥匙，然后将钥匙放在枢轴中，并且只在该关键点之外进行快速排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:59:54.880

代码中的一个错误：

mid = (low + high) 使用最大整数附近的数组时，div 2 可能会溢出。

解决方法：mid = low div 2 + high div 2

有关详细讨论，请参阅[算法](http://algs4.cs.princeton.edu/23quicksort/)

阅读该链接后，您应该知道：

> 这是对等键值的优化吗？

不，相等的值没有问题。（快速排序不是一种稳定的排序）

> 另外，这个实现是否存在等值问题？3路分区会更好吗？

没有问题。不，为什么它应该更好？可以使用随机枢轴元素选择来进行优化。

# php - 如何在没有 codeIgniter MVC 框架的情况下使用数据库 codeigniter 类？

> ID：15309976
> 
> 赞同：10
> 
> 时间：2013-03-09T11:08:52.990
> 
> 标签：php, codeigniter, codeigniter-2

我的目标是使用 CodeIgniter 数据库类，但在一个普通的 PHP 脚本中。我不想为此使用 MVC 结构。

我可以在不使用 CodeIgniter MVC 模式的情况下使用这个数据库类**吗**？

如果是，如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-23T13:19:28.170

请按照以下步骤集成 Codeigniter DB Active Record

1.  [从https://codeigniter.com/](https://codeigniter.com/)下载最新的 codeigniter
2.  复制以下文件

    ```
    application/config/config.php
    application/config/database.php

    system/database/*

    system/core/Common.php
    system/core/Exceptions.php
    system/core/Log.php 
    ```

    [![在此处输入图像描述](../Images/2059e7d1cb46619d6ba96e1d8b58c1e1.png)](https://i.stack.imgur.com/9oXIa.png)

目录结构如上

3.  在中添加数据库连接详细信息`application/config/database.php`
4.  创建数据库连接（connector.php）文件

    ```
    <?php
    defined('DS') OR define('DS', DIRECTORY_SEPARATOR);
    defined('EXT') OR define('EXT', '.php');
    defined('ENVIRONMENT') OR define('ENVIRONMENT', 'development');

    $dir_path = dirname(__FILE__) . DS;
    defined('BASEPATH') OR define('BASEPATH', $dir_path . 'system' . DS);
    defined('APPPATH') OR define('APPPATH', $dir_path . 'application' . DS);

    function getDBConnector(){
        include_once(BASEPATH . "core/Common.php");
        include_once(BASEPATH . "core/Exceptions.php");
        require_once(BASEPATH . 'database/DB' . EXT);
        $conn = & DB();
        return $conn;
    }    

    $db = getDBConnector();

    print_r($db->get('users')->result_array()); 
    ```

5.  现在在您的项目中包含 connector.php 并访问 DB 对象 :)

# php - 使用 javascript 的 PHP 表单验证

> ID：15309980
> 
> 赞同：0
> 
> 时间：2013-03-09T11:09:32.390
> 
> 标签：php, javascript, html

我正在开发一个使用 php 和 mysql 的应用程序。我编写了一个用于表单验证的 javascript 代码，但它可以工作。

```
 function checkForm()
        { if(document.Form1.Gestational_age.value=="")
                {
                   alert('Please select an option for Gestational age in weeks ') ;
                   return false;
                }
            else if(document.Form1.PRBC.value=="")
                {
                    alert('Please select an option for PRBC transfusion ');
                    return false;
                }
            else if(document.Form1.milk_feeding.value=="")
                {
                    alert('Please select an option for Human milk feeding at both day 7     and day 14 of life');
                    return false;
                }
    }
   </script>

    <title>GutCheckNEC for infants < 1500 grams at birth Gephart,2012</title>

   </head>
   <body>

    <div><b>GutCheckNEC   for infants < 1500 grams at birth Gephart, 2012</b></div>
    <br>
    <form name="Form1" method="post" action ="Form1.php" onSubmit="return checkForm();">
        1.&nbsp;&nbsp;&nbsp Gestational age in weeks&nbsp;&nbsp;&nbsp
         <input type="radio" id="Gestational_age" name="Gestational_age" value="0-27"/>0-27
         <input type="radio" name="Gestational_age" value="28-31"/>28-31
         <input type="radio" name="Gestational_age" value=">32" />32
         <br>

        2.&nbsp;&nbsp;&nbsp PRBC transfusion&nbsp;&nbsp;&nbsp
        <input type="radio" id="PRBC" name="PRBC" value="Yes"/>Yes
         <input type="radio" name="PRBC" value="No"/>No
         <br>
        3.&nbsp;&nbsp;&nbsp Human milk feeding at both day 7 and day 14 of life&nbsp;&nbsp;&nbsp
        <input type="radio" id="milk_feeding" name="milk_feeding" value="Yes"/>Yes
         <input type="radio" name="milk_feeding" value="No"/>No
         <br>

     <input type="submit" name="submit" value="Next"/>
    </form>
    </body>
   </html> 
```

这是我的代码示例。请你帮忙，为什么我的 javascript 部分不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:26:02.923

用这个替换验证功能并尝试。这将检查该值是否已设置。

```
 function checkForm()
    { 
        if(!document.forms["Form1"]["Gestational_age"][0].checked && !document.forms["Form1"]["Gestational_age"][1].checked && !document.forms["Form1"]["Gestational_age"][2].checked)
            {
               alert('Please select an option for Gestational age in weeks ') ;
               return false;
            }
        else if(!document.forms["Form1"]["PRBC"][0].checked && !document.forms["Form1"]["PRBC"][1].checked)
            {
                alert('Please select an option for PRBC transfusion ');
                return false;
            }
        else if(!document.forms["Form1"]["milk_feeding"][0].checked && !document.forms["Form1"]["milk_feeding"][1].checked)
            {
                alert('Please select an option for Human milk feeding at both day 7 and day 14 of life');
                return false;
            }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T11:39:02.060

这是一个例子

```
<script>
function checkForm(){ 
if(Form1.Gestational_age[0].checked==false && Form1.Gestational_age[1].checked==false && Form1.Gestational_age[2].checked==false)
   {
      alert('Please select an option for Gestational age in weeks ') ;
      return false;
    }           
   else {
     return true;   
   }
}
</script> 
```

我只为第一组单选按钮做到了这一点。希望这能给你一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T11:25:50.217

你不能像这样获得单选按钮的价值：

```
document.Form1.Gestational_age.value 
```

像这样使用它

```
var ages = document.getElementsByName('Gestational_age');
var ageIsChecked = false;
for (var i = 0, length = ages.length; i < length; i++) {
    if (ages[i].checked) {
        ageIsChecked = true;
    }
}
if (!ageIsChecked) {
    alert('Please select an option for Gestational age in weeks ');
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T11:25:57.753

尝试 ,`Gestational_age`是带有数组的名称，因此您需要传递 as`["Form1"]["Gestational_age"]`和`checked`属性来检查单选按钮的长度，单选按钮是否被选中。

```
function checkForm()
{ 
    if(document.forms["Form1"]["Gestational_age"].checked == "")
    {
        alert('Please select an option for Gestational age in weeks ') ;
        return false;
    }
    else if(document.forms["Form1"]["PRBC"].checked == "")
    {
        alert('Please select an option for PRBC transfusion ');
        return false;
    }
    else if(document.forms["Form1"]["milk_feeding"].checked == "")
    {
        alert('Please select an option for Human milk feeding at both day 7     and day 14 of life');
        return false;
    }
} 
```

**它会根据需要提醒您的验证，因为我已经测试过了。**

# php - 在 PHP heredoc

> ID：15309987
> 
> 赞同：3
> 
> 时间：2013-03-09T11:10:52.777
> 
> 标签：php, javascript, heredoc

为什么我无法在 PHP heredoc 中结束 javascript？

此行下面的其余代码：

```
</script> 
```

不再是 PHP 代码的一部分。它们变成了 HTML 代码。

就像结束脚本代码结束 PHP 块一样。

```
$headerContent = <<<HEAD
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
    <head>
    <title>$title</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />

    <script>
    </script> // Here is the problem
    </head> // code here and below becomes not part of PHP.
    <body>
    .
    . 
    .
HEAD; 
```

![屏幕截图以获得更好的视图](../Images/7c84b5eeb0874ae180c45942b5ca0acc.png)

解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:20:13.730

虽然我无法用 HEREDOC 重现这一点（不同版本的 PHP 在这方面的行为可能不同），但在 PHP 代码中`</script>`是等价的`?>`，因为它是`<script language="php">`. 例子：

```
<script language="php"> $a = 1; </script>
Test: <?= $a ?> 
```

所以无论你遇到`?>`关闭标签的问题，你也会遇到同样的`</script>`关闭标签问题。一种选择是将其存储在变量中并使用它。例子：

```
<?php

$endScript = '</' . 'script>';
$headerContent = <<<HEAD
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
    <head>
    <title>$title</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />

    <script>
    $endScript
    </head>
    <body>
    .
    . 
    .
HEAD; 
```

# java - 稀疏矩阵对齐

> ID：15309990
> 
> 赞同：0
> 
> 时间：2013-03-09T11:11:08.550
> 
> 标签：java, matrix, alignment, sparse-matrix

有没有办法在我的稀疏矩阵中对齐这些值？

```
0  0  0  0 8 2 

0  0  0 19 11  0 

0 11  0 13  0  0 

0 18  0  0 7  0 

0  0  0  0 4  0 

0  0 3  0  0  0 
```

目前我有这个：

```
if (matrix[i][j] < 20)
System.out.print(matrix[i][j] + " ");
else
System.out.print(" " + 0 + " "); 
```

我遇到的问题是，如果值介于 1 和 9 之间，那么值之前就没有空格，因此会打乱我的对齐方式。我可以插入另一个 if 语句，但想知道是否有更简单/更清洁的方法来做到这一点？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:06:33.930

[我在处理la4j](http://la4j.org)（Java 的线性代数）时正在解决类似的任务。la4j 使用覆盖`toString()`方法来满足此需求。因此，我决定使用慢速（因为控制台输出在调试模式下使用主输出，并且 la4j 具有快速有效的发布版本流）但安全的算法。这是代码（`precision`分隔符后的位数）：

```
@Override
public String toString() {

    final int precision = 3; 

    int formats[] = new int[columns];

    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < columns; j++) {
            long value = (long) unsafe_get(i, j);
            int size = Long.toString(value).length() + precision + 2;
            formats[j] = size > formats[j] ? size : formats[j];
        }
    }

    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < columns; j++) {
            sb.append(String.format("%" + Integer.toString(formats[j])
                    + "." + precision + "f", unsafe_get(i, j)));
        }
        sb.append("\n");
    }

    return sb.toString();
} 
```

所以，算法有两个步骤：

1.  将数组计算`formats`为需要打印`i`列对齐的字符数
2.  打印矩阵

# google-chrome-extension - 如何将 chrome 扩展功能移植到 firefox 扩展功能

> ID：15309991
> 
> 赞同：0
> 
> 时间：2013-03-09T11:11:17.473
> 
> 标签：google-chrome-extension, firefox-addon

我有一个 chrome 扩展，其代码行如下：

```
chrome.tabs.executeScript(null, {allFrames:true, file:"myscript.js"}); 
```

和功能，如：

```
chrome.extension.onRequest.addListener

chrome.extension.sendRequest 
```

如何使这些功能适用于 Firefox 扩展？

另外，如何实现选项（弹出）页面和背景页面之间的通信等相同功能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-15T11:18:08.253

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.14/dev-guide/tutorials/modifying-web-pages-url.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.14/dev-guide/tutorials/modifying-web-pages-url.html)

```
// Import the page-mod API
var pageMod = require("sdk/page-mod");
// Import the self API
var self = require("sdk/self");

// Create a page mod
// It will run a script whenever a ".org" URL is loaded
// The script replaces the page contents with a message
pageMod.PageMod({
  include: "*.org",
  contentScriptFile: self.data.url("my-script.js")
}); 
```

# java - 无法实现构造函数（隐式超级构造函数 Item() 未定义）

> ID：15309992
> 
> 赞同：0
> 
> 时间：2013-03-09T11:11:29.200
> 
> 标签：java, constructor, superclass

我正在尝试实现一个比父类具有更多参数的类的构造函数，唯一的共同点是标题。当我尝试在 Book 类中实现构造函数时，它显示一个错误“隐式超级构造函数 Item() 未定义”。

```
public class Book extends Item {

private String author = "";
private String ISBN = "";
private String publisher = "";

public Book(String theTitle, String theAuthor, String theIsbn, String thePublisher){

} 
```

}

父类构造函数；

```
public abstract class Item {

private String title;
private int playingTime;
protected boolean gotIt;
private String comment;

public Item(String title, int playingTime, boolean gotIt, String comment) {
    super();
    this.title = title;
    this.playingTime = playingTime;
    this.gotIt = gotIt;
    this.comment = comment;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T11:13:15.360

您的超类没有无参数默认构造函数，因此您必须使用传递默认值的 super() 关键字显式调用超类的重载构造函数。

```
public Book(String theTitle, String theAuthor, String theIsbn, String thePublisher){
super(thTitle,0,false,null)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:19:17.130

因为您没有定义无参数构造函数，或者在 super(....) 中提供参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:20:08.263

如果您要添加带有一个或多个参数的构造函数，java 不会添加无参数构造函数。如果我们不在类中添加任何构造函数，Java 会添加无参数构造函数。解决您的问题的其他方法是您需要重载构造函数，例如

```
public Item(String title, int playingTime, boolean gotIt, String comment) {
    super(); //remove this constructor or define no-arg constructor in super class.
    super(thTitle,0,false,null); //add this constructor
} 
```

# YouNeedToReadHeadFirstCoreJava

# c++ - 如何强制编译器不要跳过我的函数调用？

> ID：15309993
> 
> 赞同：2
> 
> 时间：2013-03-09T11:11:31.403
> 
> 标签：c++, benchmarking, compiler-optimization

假设我想对某些功能的两个竞争实现进行基准测试`double a(double b, double c)`。我已经有一个`array <double, 1000000> vals`可以从中获取输入值的大数据，因此我的基准测试大致如下所示：

```
//start timer here
double r;
for (int i = 0; i < 1000000; i+=2) {
    r = a(vals[i], vals[i+1]);
}
//stop timer here 
```

现在，一个聪明的编译器可以意识到我只能使用最后一次迭代的结果，然后简单地杀死其余的，给我留下`double r = a(vals[999998], vals[999999])`. 这当然违背了基准测试的目的。

有没有一种好方法（如果它适用于多个编译器，则加分）来防止这种优化*，同时保持所有其他优化到位*？

（我看过其他关于插入空`asm`块的线程，但我担心这可能会阻止内联或重新排序。我也不是特别喜欢`sum += r;`在每次迭代期间添加结果的想法，因为这是不应该包含在*就这个问题而言，如果我们可以专注于其他替代解决方案，那就太好了，尽管对于对此感兴趣的任何人，评论中都会进行热烈的讨论，其中共识是在许多情况下这`+=`*是*最合适的方法.* )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:18:39.450

放入`a`单独的编译单元，不要*使用*LTO（链接时优化）。那样：

*   循环总是相同的（由于基于 的优化而没有区别`a`）
*   函数调用的开销总是一样的
*   要测量纯开销并有一个基线来比较实现，只需对一个空版本的`a`

请注意，编译器不能假设调用`a`没有副作用，因此它不能优化循环并将其替换为仅最后一次调用。

* * *

一种完全不同的方法可以使用 RDTSC，它是 CPU 内核中用于测量时钟周期的硬件寄存器。它有时对微基准测试很有用，但要正确理解结果并非易事。例如，查看[此](https://stackoverflow.com/q/6432669/2073257)内容并使用 goggle/search SO 了解有关 RDTSC 的更多信息。

# android - java.lang.NumberFormatException：无效的 int：“res/drawable/title_bar.xml”

> ID：15309995
> 
> 赞同：5
> 
> 时间：2013-03-09T11:11:42.963
> 
> 标签：android, numberformatexception

我在开发人员控制台中遇到奇怪的错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{my.package/my.package.Main}: java.lang.NumberFormatException: Invalid int: "res/drawable/title_bar.xml"
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
at android.app.ActivityThread.access$1500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4025)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NumberFormatException: Invalid int: "res/drawable/title_bar.xml"
at java.lang.Integer.invalidInt(Integer.java:129)
at java.lang.Integer.parse(Integer.java:366)
at java.lang.Integer.parseInt(Integer.java:357)
at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
at android.content.res.TypedArray.getInt(TypedArray.java:254)
at android.view.animation.Animation.<init>(Animation.java:244)
at android.view.animation.ScaleAnimation.<init>(ScaleAnimation.java:63)
at android.view.animation.AnimationUtils.createAnimationFromXml(AnimationUtils.java:118)
at android.view.animation.AnimationUtils.createAnimationFromXml(AnimationUtils.java:91)
at android.view.animation.AnimationUtils.loadAnimation(AnimationUtils.java:72)
at my.package.FragmentGameType.onActivityCreated(FragmentGameType.java:111)
at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1132)
at android.app.Activity.performStart(Activity.java:4371)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1721)
... 11 more 
```

这是 FragmentGameType.java 的代码：

```
110\. animZoomIn = AnimationUtils.loadAnimation(getActivity(), R.anim.zoom_in);
111\. animZoomOut = AnimationUtils.loadAnimation(getActivity(), R.anim.zoom_out);
112\. animZoomInRot = AnimationUtils.loadAnimation(getActivity(), R.anim.zoom_in_rot);
113\. animZoomOutRot = AnimationUtils.loadAnimation(getActivity(), R.anim.zoom_out_rot); 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T21:57:14.320

尝试查看动画 xml 文件，

我在android 2.3中测试我的代码时遇到了类似的崩溃，问题是一些句子的动画定义，看线，例如：

安卓：fromXScale="1%"

安卓：toXScale="100%"

fromXScale,toXScale 需要一个浮点参数，不喜欢“100%”，为此，在 API 级别 10 我收到了 java.lang.NumberFormatException。API 10 不支持它，但是在更高版本中它运行良好，这会造成混乱。

我将代码更改为：

安卓：fromXScale="0.1"

安卓：toXScale="1.0

并且问题解决了。

# java - http请求得到的字符串会保存在常量池中吗？

> ID：15309997
> 
> 赞同：3
> 
> 时间：2013-03-09T11:11:53.010
> 
> 标签：java, string, permgen

我了解声明如下的 String 将保存在常量池中：

例如。

```
String a = "test'; 
```

然后测试将保存在池中

我想知道字符串是从方法获取的，例如从网络表单发布的请求参数，还是从文件中读取。例如。

```
String name = request.getRequestParameter("name"); 
```

名称中的值会保存在常量池中吗？我猜不是？因为否则你很快就会出现内存不足的perm gen错误？

谁能启发我？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:15:47.357

[否。文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)和 JLS[第 3.10.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)`intern`中描述了何时以及如何编辑字符串。基本上，文字和（其他）字符串常量是自动实习的，但除非你明确地这样做，否则没有其他可能。[`String#intern`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)

作为一个侧面，您似乎假设实习字符串永远不会被垃圾收集。我在 Java 文档中没有看到任何内容实际上是*这样说*的，并且[至少有人](http://blog.kdgregory.com/2009/09/intern-isnt-forever-and-maybe-never-was.html)声称他的测试表明它们实际上是经过 GC 处理的，这表明实习池使用了某种形式的弱引用。

# android - 文本视图没有出现在屏幕上

> ID：15309998
> 
> 赞同：1
> 
> 时间：2013-03-09T11:11:57.000
> 
> 标签：android, android-layout, textview

大家好，我有一个 xml 文件“注册表单”，但是当我运行它时，我在文本视图中看不到所有文本.....可以请一些帮助....我不认为它在代码中据我所知，我上次所做的是来自该 xml 文件的主题选项中的选项

不幸的是，我忘了有人能帮我把它从我的记忆中提取出来吗？

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#3b3b3b"
tools:context=".RegisterActivity" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:orientation="vertical" >

    <!-- View Title Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dip"
        android:text="REGISTER"
        android:textSize="25dip"
        android:textStyle="bold" />

    <!-- Name Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Full Name" />
    <!-- Name TextField -->

    <EditText
        android:id="@+id/registerName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <!-- Email Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Email" />
    <!-- Email TextField -->

    <EditText
        android:id="@+id/registerEmail"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <!-- Password Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dip"
        android:text="Password" />
    <!-- Password TextField -->

    <EditText
        android:id="@+id/registerPassword"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:password="true" />

    <!-- Error message -->

    <TextView
        android:id="@+id/register_error"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip"
        android:textColor="#e30000"
        android:textStyle="bold" />

    <!-- Login Button -->

    <Button
        android:id="@+id/btnRegister"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dip"
        android:text="Register" />

    <!-- Link to Login Screen -->

    <Button
        android:id="@+id/btnLinkToLoginScreen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_marginTop="40dip"
        android:background="@null"
        android:text="Already registred. Login Me!"
        android:textColor="#21dbd4"
        android:textStyle="bold" />
     </LinearLayout>

    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:25:54.680

改变你的textview颜色而不是黑色..如果你使用xml然后设置textColor属性说`#FFFFFF.`