# StackOverflow 问答 14639000-14639999

# linux - 如果通过 /bin/sh -c 运行，命令无法按预期工作

> ID：14639001
> 
> 赞同：1
> 
> 时间：2013-02-01T02:58:10.153
> 
> 标签：linux, bash, shell

我必须连接一组文件。目录结构是这样的：

```
root/features/xxx/multiple_files... -> root/xxx/single_file 
```

我写的（而且效果很好）：

`for dirname in $(ls -d root/features/*|awk -F/ '{print $NF}');do;mkdir root/${dirname};cat root/features/${dirname}/* > root/${dirname}/final.txt;done`

但是当我通过 sh shell 运行相同的东西时

`/bin/sh -c "for dirname in $(ls -d root/features/*|awk -F/ '{print $NF}');do;mkdir root/${dirname};cat root/features/${dirname}/* > root/${dirname}/final.txt;done"`

它给了我错误：

```
/bin/sh: -c: line 1: syntax error near unexpected token `201201000'
/bin/sh: -c: line 1: `201201000' 
```

我的进程总是在运行任何命令之前附加 /bin/sh -c 。任何建议这里可能出了什么问题？有什么替代方法吗？我在这方面花了很长时间，但没有取得太大进展！

编辑： ``ls -d root/features/*|awk -F/ '{print $NF}'`返回

```
201201
201201000
201201001
201201002
201201003
201201004
201201005
201201006
201201007
201202000
201205000
201206000
201207000
201207001
201207002 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:51:28.350

始终使用`sh -c 'cmd1 | cmd2'`单引号。

始终用于`sh -eu -xv -c 'cmd1 | cmd2'`调试。

`bash -c 'cmd1 | cmd2'`如果您的代码是特定于 Bash 的（参见进程替换，...​​），请始终使用。

`;`之后删除。`do`_`for ... ; do; mkdir ...`

在单引号内转义可能的单引号，如下所示： `' --> '\''`.

（有时只是格式化你的代码会澄清很多。）

应用于您的命令，这应该看起来像这样......

```
# test version
/bin/sh -c '
   for dirname in $(ls -d /* | awk -F/ '\''{print $NF}'\''); do
     printf "%s\n" "mkdir root/${dirname}";
     printf "%s\n" "cat root/features/${dirname}/* > root/${dirname}/final.txt"; 
     echo
   done
' | nl

# test version using 'printf' instead of 'ls'
sh -c '
   printf "%s\000" /*/ | while IFS="" read -r -d "" file; do
     dirname="$(basename "$file")"
     printf "%s\n" "mkdir root/${dirname}";
     printf "%s\n" "cat root/features/${dirname}/* > root/${dirname}/final.txt"; 
     echo
   done
' | nl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:25:52.493

我让它在我在盒子上设置的小测试环境中运行。原来它不喜欢双引号。我遇到的问题是 awk 语句周围的引号......如果你用双引号括起来它会打印整个内容......我使用 cut 来获得所需的结果，但我的猜测是你必须将 -f arg 更改为 3 而不是 2 ..我认为。

```
/bin/sh  -c 'for dirname in $(ls -d sh_test/* | awk -F/ '\''{print $NF}'\''); do mkdir sh_test_root/${dirname}; cat sh_test/${dirname}/* > sh_test_root/${dirname}/final.txt;done' 
```

编辑：由 nadu 提出的经过测试的编辑，效果很好。以上反映了这种变化。

# java - 服务器和客户端必须具有声明 ObjectOutputStream 和 ObjectInputStream 的相反顺序吗？

> ID：14639003
> 
> 赞同：3
> 
> 时间：2013-02-01T02:58:29.783
> 
> 标签：java, sockets, serialization, objectinputstream, objectoutputstream

在我的实验中，

如果服务器有这个：

```
ObjectInputStream objectInputStream = new ObjectInputStream(socket.getInputStream());
ObjectOutputStream objectOutputStream = new ObjectOutputStream(socket.getOutputStream()); 
```

然后客户端必须以相反的顺序执行此操作：

```
ObjectOutputStream objectOutputStream = new ObjectOutputStream(socket.getOutputStream());
ObjectInputStream objectInputStream = new ObjectInputStream(socket.getInputStream()); 
```

否则服务器和客户端会死锁。

这是什么原因？是否有正式的 API 规范？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:16:25.680

是的。我知道这怎么可能发生。构造函数的 javadoc 是这样[`ObjectInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#ObjectInputStream%28java.io.InputStream%29)说的：

> *“创建一个`ObjectInputStream`从指定的`InputStream`.`ObjectOutputStream`*

因此，如果客户端和服务器都在它们`ObjectInputStream`之前构造它们`ObjectOutputStream`，那么它们都会阻塞等待另一端发送序列化流标头。

请注意，这发生在对象流级别，而不是套接字或字节流级别。如果您在套接字上执行简单的字节或字符或“数据”I/O，则无需担心构建流的顺序。

也不是，如果您在客户端和服务器端（都）有单独的线程来进行读取和写入，这不是问题。在所有条件相同的情况下，这可能是一个更好的架构，因为它允许通过套接字进行的客户端/服务器通信是“全双工”的。

# ruby - 遍历数组并正确使用yield

> ID：14639004
> 
> 赞同：-1
> 
> 时间：2013-02-01T02:58:32.733
> 
> 标签：ruby

我试图弄清楚如何在 Ruby 中遍历数组并根据值执行操作（并弄清楚如何使用`yield`. 下面是我到目前为止的代码，但是这不起作用。有人可以帮我指点在正确的方向？

```
each_odd("Odd")

def each_odd
  array = [1, 2, 3, 4]
  array.map {|x| 
   if (x % 2 != 0) do x = yield 
   else x = "Even"
   end}
end 
```

我期望这将返回以下数组：`["Odd", "Even", "Odd", "Even"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:06:26.047

要使用 yield 你必须通过一个块。

你可以使用`{}`积木

```
each_odd { 'Odd' } #=> ["Odd", "Even", "Odd", "Even"] 
```

或`do .. end`块

```
each_odd do
  'Odd'
end
#=> ["Odd", "Even", "Odd", "Even"] 
```

这是如何实现该方法

```
def each_odd
  [1, 2, 3, 4].map do |x| 
    (x % 2 != 0) ? yield(x) : 'Even'
  end
end 
```

调用`yield`时，它将评估块内的内容并将其返回到上下文，您也可以将参数传递给块，如下所示：

```
yield(x) 
```

然后你可以做类似的事情

```
each_odd { |num| "#{num} is Odd" } #=> ["1 is Odd", "Even", "3 is Odd", "Even"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:06:36.867

在这种情况下屈服没有意义，只需使用地图

```
[1,2,3,4].map{|x| x % 2 == 0 ? "Even" : "Odd" } 
```

# sas - 在企业指南中，如何重新打开以前的数据步骤输出来查看它？

> ID：14639005
> 
> 赞同：2
> 
> 时间：2013-02-01T02:58:35.980
> 
> 标签：sas

我正在使用企业指南 4.3。

当您运行数据步骤时，生成的输出会在表格等电子表格中打开。

然后，当您运行`proc tabulate`或类似时，类似电子表格的数据视图消失，表格以 SAS 报告或 HTML 表单等形式出现。

然后，您可以在数据步骤中创建的该数据集上运行更多命令。

**问：您如何才能获得类似电子表格的数据集视图？（假设有可能）**

我知道您可以再次运行数据步骤，它会显示它，但这似乎效率很低，尤其是在数据步骤涉及大量计算的情况下。数据显然是“坐在那里”，因为您仍然可以与之交互（使用 proc tabulate 等）。看到它从流程视图中消失，我真的很惊讶。

抱歉，如果我在上面说得不好，我是一个开始涉足 SAS 的 R。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:20:40.597

如果我对你的理解正确，你运行一些代码，结果就会出现。然后，您从同一个代码节点运行其他一些代码，初始结果将从流程中删除。

您始终可以在服务器列表中找到您的数据集。您可以通过单击启用它`View -> Server List`。

还有一个技巧可以做。当您运行代码并在流程中创建数据集节点时，您可以对其进行简单查询。只需做`Right click -> Filter and query`并让它做一些不会花费太长时间的简单事情。

现在，当您运行下一段代码时，该节点不会被替换（至少在 EG 4.1 中会发生这种情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:08:13.353

如果您的意思是从 DATA STEP 查看生成的数据集，请选择 View/Process Flow 并双击您要查看的数据集。此外，在您的程序、日志、数据或结果视图中，顶部应该有选项卡，可让您调出流程的其他项目。

# javascript - ExtJS 浮动面板出现在错误的位置，因为它上面的其他组件需要时间才能显示

> ID：14639006
> 
> 赞同：0
> 
> 时间：2013-02-01T02:58:37.397
> 
> 标签：javascript, extjs, position, floating

我先显示面板 A，然后在其下方显示面板 B。面板 A 使用 JSONP 获取数据并显示在商店加载的回调函数中。所以显示大约需要 1 秒。

我将浮动面板 C 与面板 B 对齐。浮动面板 C 是这样的：

```
Ext.define('MyApp.view.MyWindow', {
    extend: 'Ext.window.Window',

    height: 334,
    width: 540,
    layout: {
        type: 'border'
    },
    title: 'Run report',

    initComponent: function () {
        var me = this;
        floatingpanel = Ext.create('Ext.panel.Panel', {
            html: "something",
            width: 100,
            height: 50,
            floating: true,
            listeners: {
                'show': {
                    fn: function () {
                        floatingpanel.alignTo(PanelB, "tr-tr", [left, top]);
                    },
                    scope: floatingpanel,
                    //delay: 1000, // to wait for other component to show
                    single: true
                }
            }
        });

        Ext.applyIf(me, {
            items: [{
                xtype: 'form',
                bodyPadding: 10,
                region: 'center'
            }]
        });

        me.callParent(arguments);
    }
}); 
```

然后`floatingpanel.show()`被调用来显示面板。但它没有添加到面板 B。

如果我不使用`delay`如上所示，浮动面板 C 出现在面板 A 的某处，因为当浮动面板即将显示时，面板 A 尚不可用。所以我把“延迟”。

1 秒后，面板 A 显示为回调成功。现在浮动面板 C 在正确的位置与面板 B 对齐。

由于回调函数可能在 1 秒或 10 秒内成功，因此延迟时间很难选择。

还有其他方法可以解决这个问题吗？我尝试使用 doConstrain 将浮动面板 C 附加到面板 B: `floatingpanel.doConstrain(PanelB)`。但不知何故，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T10:17:38.543

```
initComponent: function () {
    var me = this;
    floatingpanel = Ext.create('Ext.panel.Panel', {
        html: "something",
        width: 100,
        height: 50,
       // floating: true,
        listeners: {
            'show': {
                fn: function () {
                    me.alignTo(PanelB, "tr-tr", [left, top]);
                },
                scope: floatingpanel,
                //delay: 1000, // to wait for other component to show
                single: true
            }
        }
    });

    Ext.applyIf(me, {
        items: [{
            xtype: 'form',
            bodyPadding: 10,
            region: 'center'
        }]
    });

    me.callParent(arguments);
} 
```

> 请使用上面的代码而不是..

# unit-testing - 为什么 AutoFixture 自定义会导致继承的属性不被填充？

> ID：14639018
> 
> 赞同：7
> 
> 时间：2013-02-01T02:59:51.223
> 
> 标签：unit-testing, autofixture

我编写了以下自定义，并将其作为组合的一部分应用于我的大多数测试。我的实体有一个只读 Id，但我在此自定义中使用他们的 SetId 方法来确保所有实体都有一些 Id，如果它们是临时的（还没有 Id）。

```
public class SetEntityIdCustomization : ICustomization {
    public void Customize(IFixture fixture) {
        var engine = ((Fixture)fixture).Engine;
        fixture.Customizations.Add(new Postprocessor(
            engine, o => {
                var entity = o as BaseEntity;
                if (entity == null || !entity.IsTransient()) {
                    return;
                }
                entity.SetId(fixture.CreateAnonymous<Guid>());
            }));
    }
} 
```

这一直很好，直到我今天发现了一件非常奇怪的事情。如果我提供一个直接从 BaseEntity 继承的实体的测试，那么一切都很好，并且它的可写属性是自动填充的。但是，如果我要求从 BaseEntity 更远的东西继承的实体，我的自定义会阻止属性自动填充。

此测试方法中的 User 实体已正确填充：

```
public class User : BaseEntity {
    public string Email { get; set; }
    public int CoolThings { get; set; }
}

...
[Theory, AutoDomainData]
public void SomeTest(User user, ...) {
    // user.Email and user.CoolThings have auto-filled values, as expected.
    ...
} 
```

但是，以下测试中的 AwesomeUser 实体没有自动填充任何相同的属性。

```
public class AwesomeUser : User {
    ...
}

...
[Theory, AutoDomainData]
public void SomeOtherTest(AwesomeUser user, ...) {
    // user.Email nor user.CoolThings have auto-filled values. What gives?
    ...
} 
```

在这两个测试用例中，由于我的自定义，Id 属性是自动填充的。如果我删除我的自定义，SomeOtherTest 的 AwesomeUser 实例会自动填充其继承的属性。我必须假设我的定制是什么搞砸了。

有没有更好的方法让我的所有 BaseEntity 实例设置它们的 ID，或者 AutoFixture 还缺少什么？我首先、中间和最后应用了我的自定义，但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T20:15:51.920

上面提供的解决方案是一个非常聪明的尝试，但不是我以前见过的。一个更惯用的解决方案是这样的：

```
public void Customize(IFixture fixture)
{
    fixture.Customizations.Add(
        new FilteringSpecimenBuilder(
            new Postprocessor(
                new BaseEntityBuilder(
                    new ConstructorInvoker(
                        new ModestConstructorQuery())),
                new AutoPropertiesCommand().Execute),
            new BaseEntitySpecification()));
}

private class BaseEntityBuilder : ISpecimenBuilder
{
    private readonly ISpecimenBuilder builder;
    private readonly IRequestSpecification specification;

    public BaseEntityBuilder(ISpecimenBuilder builder)
    {
        this.builder = builder;
        this.specification = new BaseEntitySpecification();
    }

    public object Create(object request, ISpecimenContext context)
    {
        if (!this.specification.IsSatisfiedBy(request))
            return new NoSpecimen(request);

        var b = (BaseEntity)this.builder.Create(request, context);
        b.SetId((Guid)context.Resolve(typeof(Guid)));
        return b;
    }
}

private class BaseEntitySpecification : IRequestSpecification
{
    public bool IsSatisfiedBy(object request)
    {
        var t = request as Type;
        if (t == null)
            return false;

        if (!typeof(BaseEntity).IsAssignableFrom(t))
            return false;

        return true;
    }
} 
```

正如你所看到的，这不是一个简单的单行，这表明 AutoFixture 是一个相当固执的库。在这种情况下，AutoFixture 的意见是：

> 优先考虑对象组合而不是类继承。
> 
> *-[设计模式](http://amzn.to/XBYukB)，p。20*

AutoFixture 首先是一个 TDD 工具，而 TDD 的主要优点之一是它提供有关类设计的反馈。在这种情况下，反馈是：*继承很尴尬，很麻烦。重新考虑设计。*

# css - 带图标的 CSS3 按钮

> ID：14639021
> 
> 赞同：3
> 
> 时间：2013-02-01T03:00:17.330
> 
> 标签：css

我正在按照本[教程](http://fortysevenmedia.com/blog/archives/css3_buttons_with_icons/)创建带有图标的 CSS 3 按钮。但是本教程中的问题图标高度取决于`font-size`. 如果我增加文本的字体大小，图标很适合，但如果我尝试减小字体大小，它不适合。我使用的图像是 40x30

```
a.button {
  background-image: -moz-linear-gradient(top, #ffffff, #dbdbdb);
  background-image: -webkit-gradient(linear,left top,left bottom,
      color-stop(0, #ffffff),color-stop(1, #dbdbdb));
  filter: progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#dbdbdb');
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#dbdbdb')";
  border: 1px solid #fff;
  -moz-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  -webkit-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  border-radius: 2px;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  padding: 5px 5px;
  text-decoration: none;
  text-shadow: #fff 0 1px 0;
  float: left;
  margin-right: 15px;
  margin-bottom: 15px;
  display: block;
  color: #597390;
  line-height: 38px;
  font-size: 15px;
  font-weight: bold;
}
a.button:hover {
  background-image: -moz-linear-gradient(top, #ffffff, #eeeeee);
  background-image: -webkit-gradient(linear,left top,left bottom,
      color-stop(0, #ffffff),color-stop(1, #eeeeee));
  filter: progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#eeeeee');
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#eeeeee')";
  color: #000;
  display: block;
}
a.button:active {
  background-image: -moz-linear-gradient(top, #dbdbdb, #ffffff);
  background-image: -webkit-gradient(linear,left top,left bottom,
      color-stop(0, #dbdbdb),color-stop(1, #ffffff));
  filter: progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#dbdbdb', EndColorStr='#ffffff');
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#dbdbdb', EndColorStr='#ffffff')";
  text-shadow: 0px -1px 0 rgba(255, 255, 255, 0.5);
  margin-top: 1px;
}
a.button {
  border: 1px solid #979797;
}
a.button.icon {
  padding-left: 11px;

}

a.button.icon span{
  padding-left: 48px;
  display: block;
  background: url(../img/gmail2.png) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:25:37.693

你的陈述有点模棱两可，没有问题，但我会采取行动。

在这种情况下，`font-size`总是会起一个小因素，因为它将决定图标的高度。在某些时候，您将需要了解有关按钮大小的一些详细信息，但它不必受字体的影响。如果您设置按钮`height`，`img{ height:100%; }`图像将缩放以适合该区域。

```
<div id="container">
    <h1><img src="http://placedog.com/50/50" alt="" />Button</h1>
</div> 
```

结合

```
#container{
    border: 2px solid black;
    width: 200px;
    height: 20px;
}
#container img{
    height:100%;
} 
```

应该给你一些接近你正在寻找的东西。我已经制作了一个小的[jsfiddle](http://jsfiddle.net/FZj4a/)来演示实现此目的的一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:03:48.527

如果您可以共享您的代码，那将会很有帮助。
在您提供的链接的[css3 按钮示例](http://fortysevenmedia.com/tuts/css3buttons/)中，如果我减小字体大小并设置以下 CSS 样式，则可以。

```
span { display: block; } 
```

`span`是将文本包装在按钮内的标记。

# c# - IE6 中的 Jquery Dialog 和 asp.net dropdownlist z-index 问题

> ID：14639023
> 
> 赞同：0
> 
> 时间：2013-02-01T03:00:19.350
> 
> 标签：c#, jquery, asp.net, jquery-ui, internet-explorer

我在我的 aspx 页面中创建了 jquery 弹出对话框和 asp.net 下拉列表控件。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript" ></script>
<script src="//code.jquery.com/ui/1.10.0/jquery-ui.js"  type="text/javascript" ></script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#div_popup').dialog({     
            resizable: true,               
            height: 300,
            width: 300,
            position: 'center',
            zIndex: 10000              
        });

    });
</script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" type="text/css" />
<style type="text/css" >
    #div_dropdownlist
    {
        margin-left : 50%;
        margin-top : 50%;     
        z-index: -1;        
    }
    #div_popup
    {}
</style>
</head>
<body>
<form id="form1" runat="server">
<div id="div_dropdownlist">
    <asp:DropDownList runat="server" ID="ddlList" Width="200px"></asp:DropDownList>
</div>
<div id="div_popup">
        My test Popup
</div>
</form>
</body>
</html> 
```

我的目的是当您将它拖到其他控件上时，在所有其他控件上显示 jquery 对话框弹出窗口。
除了 IE6，所有浏览器都运行良好。

![在此处输入图像描述](../Images/7537e81b56774725a90424751f932332.png)

我试过css zIndex。但它在IE6中没有效果。

所以，请让我知道如何在 IE6 中使其正确。

**更新**

我将 div 弹出样式更改为

```
#div_popup
    {
        z-index: 10000;        
    } 
```

我已将我的 jquery 对话框 css 样式更改为

```
$('#div_popup').dialog({     
            ...

            zIndex: 10000              
        }); 
```

但在 IE6 中，当我拖动该控件时，该 jquery 弹出窗口无法显示在 asp.net 下拉列表框上。

供您参考，这里是[my_source_code](http://www.mediafire.com/?pfbmydqmo1xh093)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:03:56.433

如[http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)中所述， 有一个 ie 错误，选择框显示在顶部。我会按照建议隐藏选择框，或者为 ie6 使用 shim。

# svn - Tortoise SVN 添加文件夹选项

> ID：14639024
> 
> 赞同：0
> 
> 时间：2013-02-01T03:00:22.283
> 
> 标签：svn, tortoisesvn

我使用 TortoiseSVN 1.7.7，Build 22907 - 64 位，我的操作系统是 Windows 7 - 64 位，并且该`Add folder`选项存在问题。

在存储库浏览器窗口中，如果我右键单击，我会看到一个包含 item 的菜单`add folder`。我选择此选项是为了添加一个文件夹，该文件夹包含大量源代码文件 [ ]和`.c, .cpp, .h`一些扩展名为.`.a``.o`

当我检查添加这个文件夹后，我发现一些`.a`文件`.o`没有添加到存储库中。所以我在从存储库中删除旧文件夹后尝试再次添加它。但是同样的文件又丢失了。我尝试了很多次，但无济于事。

然后我尝试将这个文件夹拖放到存储库浏览器窗口中。这次它起作用了，没有文件丢失。

我在想`add folder`选项相当于将文件夹拖放到存储库窗口。但似乎并非如此。如果这些选项是出于相同的目的，那么它可能是一个错误吗？在那种情况下，有人有类似的经历吗？

有人可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:50:30.087

我猜在这些 .o/.a 文件的任何父文件夹上都设置了 svn:ignore 属性。通常最好将生成的内容排除在版本控制之外，因为它会导致很多冲突。

# meteor - 如何获取特殊组件（bootstrap-daterangepicker）的表单值？

> ID：14639028
> 
> 赞同：3
> 
> 时间：2013-02-01T03:00:46.027
> 
> 标签：meteor

我在表单中使用[bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)。我目前获取此选择的价值的方式有效，但我获得价值的方式似乎不是一个好方法。

使用 Session 保存字段选择然后在我完成后取消设置它们似乎很糟糕。我只是想确保我没有遗漏任何东西。

我可以从输入字段中获取值，但我必须解析字符串以提取日期。掺杂这可能是一个令人头疼的维护问题，因为如果我更改 daterangepicker 日期格式，我需要更改解析。

表单域：

```
 <input type="text" name="carpool_eventDates" id="carpool_eventDates" /> 
```

JS激活组件：

```
 Template.add_event.rendered = function () {
      // initialize add event modal;
      $('#addEvent')
       .modal();
      // initialize the date range picker
      $('input[name="carpool_eventDates"]').daterangepicker(
        // default date range options
        {ranges: {'Last 5 Days': [Date.today().add({ days: -4 }), 'today'],
              'Next 5 Days': ['today', Date.today().add({ days: 4 })]}
        },
        // grab the selection
        function(start, end) {
          Session.set("showAddEventDialogue_dateRangeStart",start);
          Session.set("showAddEventDialogue_dateRangeEnd",end);
        });
      }; 
```

JS保存按钮点击处理程序：

```
 Template.add_event.events({
        'click button.save-addEventDialogue': function(e, tmpl) {

          // Get the date range selection from the session
          var start = Session.get("showAddEventDialogue_dateRangeStart");
          var end = Session.get("showAddEventDialogue_dateRangeEnd");

          // Do something with the dates

          // Clear the dates from the session now that we are done with them
          Session.set("showAddEventDialogue_dateRangeStart","");
          Session.set("showAddEventDialogue_dateRangeEnd","");

          // Close the dialogue
          Session.set("showAddEventDialogue", false);
        }             
      }); 
```

这是一个好方法吗？或者，还有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:38:45.313

您可以使用 jQuery 的[.data()](http://api.jquery.com/data/ "。数据（）")将 daterangepicker 数据存储在原始`<input>`元素上，而不是在 Session 中。所以你可以重写你的“抓住选择”代码：

```
// grab the selection
function(start, end) {
  $('input[name="carpool_eventDates"]')
    .data("showAddEventDialogue_dateRangeStart", start)
    .data("showAddEventDialogue_dateRangeEnd", end);
}); 
```

然后从元素中检索数据，而不是从 Session 中检索数据：

```
// Get the date range selection from the element
var start = $('input[name="carpool_eventDates"]').data("showAddEventDialogue_dateRangeStart");
var end = $('input[name="carpool_eventDates"]').data("showAddEventDialogue_dateRangeEnd"); 
```

并且假设`<input>`当模式关闭并且模板被破坏时被丢弃，你没有 Session 或其他变量需要清理。

# c# - 如何通过事件处理程序更改 GUI 控件状态

> ID：14639029
> 
> 赞同：0
> 
> 时间：2013-02-01T03:00:46.727
> 
> 标签：c#, multithreading, winforms, events

## 请求说明

我正在处理一个需要调用后台进程来从数据库中读取一些数据的项目。GUI 的获取数据按钮在此期间会变为灰色，并在数据到达后变为启用。如果后台进程抛出任何异常，则需要打开按钮以启用以确保用户可以发送另一个请求。

## 问题描述

在后台进程中添加了一个获取数据失败事件，以让 UI 线程注意到获取数据进程遇到了异常。但是由于在不同的线程中运行，因此无法在事件处理函数中更改按钮的状态。

## 相关代码片段

*   后台线程代码

    ```
    class DataProcessService
    {
        public static SingletonInstance {get;set;} //Omit the codes implement the singleton pattern
        public event EventHandler GetDataFailed;

        private void FireGetDataFailed()
        {
           if(GetDataFailed != null) GetDataFailed(this, null);
        }

        // in some function 
        try
        {
            // do some get data process
        }
        catch(SqlException ex)
        {
           FireGetDataFailed();
        }

    } 
    ```

*   图形用户界面代码

    ```
    //In the init function subscribe to the event
    DataProcessService.SingletonInstance.GetDataFailed += new Eventhandler(GetDataFailedEventHander_EnableButtonState);

    private void GetDataFailedEventHander_EnableButtonState(object s, EventArgs e)
    {
        btnGet.Enabled = true;  //There will be a exception
    } 
    ```

## 问题

如何从 .net 3.5 中的事件处理程序更改 UI 控件？在 .net 4.0 中，我可能可以使用[TPL](http://msdn.microsoft.com/en-us/library/dd997423.aspx)来处理这个问题。任何建议将不胜感激，谢谢。

## 开发环境

VS2008，.net 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:18:38.000

您必须将其调用回 UI 线程

```
private void GetDataFailedEventHander_EnableButtonState(object s, EventArgs e)
{
    base.Invoke((Action)delegate { btnGet.Enabled = true; }); 
} 
```

# ruby-on-rails - will_paginate 与网络调用一起使用

> ID：14639033
> 
> 赞同：0
> 
> 时间：2013-02-01T03:01:20.977
> 
> 标签：ruby-on-rails, will-paginate

我的索引操作调用了网络

```
response = HTTParty.get('http://www.ask.com/open') 
```

我在索引中添加了分页，因为结果太多

```
@asks = ask.paginate(:page => params[:page], :per_page => 5) 
```

以及在我看来对 will_paginate 的相应调用

我遇到的问题是，当用户单击以移至下一页时，会导致服务全部发送到服务器。如果是分页调用，我只想让它从模型中获取结果，但如果直接调用索引，则调用服务。

# android - 在android中创建带点的图像

> ID：14639034
> 
> 赞同：1
> 
> 时间：2013-02-01T03:01:25.587
> 
> 标签：android, image

我想创建类似于这个问题的东西[我可以将图像转换为点网格吗？](https://stackoverflow.com/questions/11774720/can-i-convert-an-image-into-a-grid-of-dots)但我找不到我的问题的任何答案。基本思想是从手机加载一张图片并应用这个点网格。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T06:08:16.963

正如其他人可能建议的那样，您的问题也可以使用 OpenGL 着色语言 (GLSL) 中的片段着色器来解决。GLSL 可能需要痛苦的设置。

这是我使用 Android Renderscript 的解决方案（很像 GLSL，但专为 Android 设计。它用得不多）。首先，从官方 Android SDK 示例中设置 Renderscript > Hello Compute 示例。接下来，将 mono.rs 替换为以下内容：

```
#pragma version(1)
#pragma rs java_package_name(com.android.example.hellocompute)

rs_allocation gIn;
rs_allocation gOut;
rs_script gScript;

static int mImageWidth;
const uchar4 *gPixels;

const float4 kBlack = {
    0.0f, 0.0f, 0.0f, 1.0f
};

// There are two radius's for each circle for anti-aliasing reasons. 
const static uint32_t radius = 15; 
const static uint32_t smallerRadius = 13;

// Used so that we have smooth circle edges
static float smooth_step(float start_threshold, float end_threshold, float value) {
    if (value < start_threshold) {
        return 0;
    }
    if (value > end_threshold) {
        return 1;
    }
    value = (value - start_threshold)/(end_threshold - start_threshold);
    // As defined at http://en.wikipedia.org/wiki/Smoothstep
    return value*value*(3 - 2*value);
}

void root(const uchar4 *v_in, uchar4 *v_out, uint32_t u_x, uint32_t u_y) {
    int32_t diameter = radius * 2;

    // Compute distance from center of the circle
    int32_t x = u_x % diameter - radius;
    int32_t y = u_y % diameter - radius;
    float dist = hypot((float)x, (float)y);

    // Compute center of the circle
    uint32_t center_x = u_x /diameter*diameter + radius;
    uint32_t center_y = u_y /diameter*diameter + radius;

    float4 centerColor = rsUnpackColor8888(gPixels[center_x + center_y*mImageWidth]);
    float amount = smooth_step(smallerRadius, radius, dist);
    *v_out = rsPackColorTo8888(mix(centerColor, kBlack, amount));
}

void filter() {
    mImageWidth = rsAllocationGetDimX(gIn);
    rsForEach(gScript, gIn, gOut); // You may need a forth parameter, depending on your target SDK.
} 
```

在 HelloCompute.java 中，将 createScript() 替换为以下内容：

```
private void createScript() {
      mRS = RenderScript.create(this);

        mInAllocation = Allocation.createFromBitmap(mRS, mBitmapIn,
                                                    Allocation.MipmapControl.MIPMAP_NONE,
                                                    Allocation.USAGE_SCRIPT);
        mOutAllocation = Allocation.createTyped(mRS, mInAllocation.getType());

        mScript = new ScriptC_mono(mRS, getResources(), R.raw.mono);

        mScript.bind_gPixels(mInAllocation);

        mScript.set_gIn(mInAllocation);
        mScript.set_gOut(mOutAllocation);
        mScript.set_gScript(mScript);
        mScript.invoke_filter();
        mOutAllocation.copyTo(mBitmapOut);
} 
```

最终结果将如下所示 ![在此处输入图像描述](../Images/b763ada6fddcdc8e36cdddf5dddaf22c.png)

## 选择

如果您不关心每个点都是纯色，您可以执行以下操作：

有一种非常简单的方法可以做到这一点。你需要一个`BitmapDrawable`图片和一个`BitmapDrawable`覆盖图块（让我们称之为`overlayTile`）。开`overlayTile`，打电话

```
overlayTile.setTileModeX(Shader.TileMode.REPEAT);
overlayTile.setTileModeY(Shader.TileMode.REPEAT); 
```

接下来，使用[LayerDrawable](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)将两者合并`Drawable`为一个。如果您愿意，可以将结果用作 some 的 src 。或者，您可以[将其转换](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)[为 a](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)并将其保存到磁盘。`Drawable``LayerDrawable``ImageView`[`Drawable``Bitmap`](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:51:35.587

我认为学习[OpenGL](http://developer.android.com/guide/topics/graphics/opengl.html)可能有助于实现您想要实现的目标。

您可能想了解[使用 OpenGL ES 显示图形的基础知识](http://developer.android.com/training/graphics/opengl/index.html)

希望有帮助。:)

# actionscript-3 - 通过 ComboBox AS3 加载外部 SWF

> ID：14639035
> 
> 赞同：0
> 
> 时间：2013-02-01T03:01:28.263
> 
> 标签：actionscript-3, flash, actionscript, combobox

我正在尝试创建一个组合框，该组合框使用 Flash CS5 使用 ActionScript 3.0 将外部 SWF 加载和卸载到舞台上。

目前组合框中有 2 个列表项：主页和关于。从 ComboBox 中选择 Home 或 About 选项后，它会在选中时同时显示 Home 和 About SWF。

我只希望仅在选择时显示 1 个 SWF，而不是全部显示。

```
menuList.addItem({label:"Choose"});
menuList.addItem({label:"Home",path:"home_load.swf"});
menuList.addItem({label:"About",path:"about.swf"});

menuList.addEventListener(Event.CHANGE, Home);
menuList.addEventListener(Event.CHANGE, About);

var loader:Loader = new Loader();
loader.unloadAndStop();

function Home(e:Event):void
{
    if (e.currentTarget.selectedItem.path)
    {
        var loader:Loader = new Loader();
        //loader.unloadAndStop();
        loader.load(new URLRequest("home_load.swf"));

        addChild(loader);
        //loader.unloadAndStop();
        loader.x = 0;
        loader.y = 190;
    }
}

function About(e:Event):void
{
    if (e.currentTarget.selectedItem.path)
    {
        //loader.unloadAndStop();
        var loader:Loader = new Loader();
        loader.load(new URLRequest("about.swf"));

        addChild(loader);
        //loader.unloadAndStop();
        loader.x = 0;
        loader.y = 190;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:40:56.633

您可能必须在 swf 文件完成加载后执行 addChild。

```
//These listeners detect when the file has finished loading, and if the
//correct file is loaded.
swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, finishLoading);
swfLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);

//The load method then loads the SWF file into the loader object.
swfLoader.load(my_url);

//This function adds the external SWF to the stage.
function finishLoading(loadEvent:Event) {
addChild(loadEvent.currentTarget.content);
}

//This function displays a message if the file is not found.
function errorHandler(errorEvent:Event):void {
trace("file missing");
} 
```

# objective-c - 将 NSString 值分配给 UI 标签文本

> ID：14639040
> 
> 赞同：3
> 
> 时间：2013-02-01T03:02:23.043
> 
> 标签：objective-c, uilabel

我正在尝试将我的 NSString 对象的值分配给 UILabel.text 属性，如下所示：

```
lblCalories.text = [NSString stringWithFormat:@"%@", _pickData[row]]; 
```

是的，_pickData[row] 的值都很好——确保确实如此，但不知何故 lblCalories 只是显示为空。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:14:33.930

根据您的评论，我相信这是您的问题。

你的 UILabel 属性应该是这样设置的：

```
@property (weak, nonatomic) IBOutlet UILabel *lblCalories; 
```

然后，您需要将其连接到 Interface Builder 中的实际 UILabel。之后，您可以使用以下方法设置文本：

```
self.lblCalories.text = [NSString stringWithFormat:@"%@", self.pickData[row]]; 
```

也只是一个旁注，最好的做法是使用`self.property`而不是`_property`

# php - 如何仅在请求页面中设置 yii 必填字段而不是创建/更新？

> ID：14639041
> 
> 赞同：2
> 
> 时间：2013-02-01T03:02:24.560
> 
> 标签：php, yii

有没有人知道我应该怎么做才能要求用户只在请求页面而不是在创建/更新页面中填写输入？我有自己的理由想要那样做。

在用户模型中

```
array('user_email, user_name', 'required','on'=>'request'),  //I want this only occur when on my request page 
```

在用户控制器中

```
public function actionRequest()
{
    $id=Yii::app()->user->uid;
    $model=$this->loadModel($id);

    if(isset($_POST['User']))
    {
        $model->attributes=$_POST['User'];
        if ($model->validate('request')) 
        {
            if($model->save())
            {
                $this->redirect(array('view','id'=>$uid));
            }
        }
    }

    $this->render('request',array(
        'model'=>$model,
    ));
} 
```

但不知何故，这不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T03:49:10.433

您必须使用 来创建模型，`scenario`以便`scenario`可以应用适用于该模型的规则。

假设您的`scenario`is `some_scenario`，那么当您`rules`像这样声明使用时：

```
array('user_email, user_name', 'required', 'on'=>'some_scenario')
// now the user_email, user_name will be required properties only when the scenario is 'some_scenario' 
```

现在要将场景应用于模型，我们必须使用该场景创建模型实例，如下所示：

```
$model = new SomeModel('some_scenario'); 
```

这是您可能想要阅读[的 yii wiki 。](http://www.yiiframework.com/wiki/266/understanding-scenarios/ "http://www.yiiframework.com/wiki/266/understanding-scenarios/")

**编辑：**在您的情况下，您可以在`scenario`创建模型对象后通过直接设置[`scenario`属性](http://www.yiiframework.com/doc/api/1.1/CModel#scenario-detail "http://www.yiiframework.com/doc/api/1.1/CModel#scenario-detail")来设置：

```
$model = $this->loadModel($id);
$model->scenario = 'request';

// ... 
```

# python - 如何在 Python 3 中将 SubElement 的内容包装在 XML 标记中？

> ID：14639044
> 
> 赞同：4
> 
> 时间：2013-02-01T03:03:06.130
> 
> 标签：python, lxml, elementtree

我有一个这样的示例 xml 文件：

```
<root>
   She
   <opt>went</opt>
   <opt>didn't go</opt>
   to school.
</root> 
```

我想创建一个名为 of 的子元素，并将 的所有内容放入其中。那是，

```
<root>
   <sentence>
       She
       <opt>went</opt>
       <opt>didn't go</opt>
       to school.
   </sentence>
</root> 
```

我知道用 ElementTree 或 lxml 制作子元素很热门，但我不知道如何从“She”到“shools”进行选择。一次全部。

```
import lxml.etree as ET
ET.SubElement(root, 'sentence')
I'm lost... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:10:49.093

你可以反过来：（而不是添加一个子元素，添加一个新的父元素。）我的意思是，将`root`标签更改为`sentence`，创建一个新`root`元素，并将旧的`root`（现在`sentence`）插入新的`root`：

```
import lxml.etree as ET

content = '''\
<root>
   She
   <opt>went</opt>
   <opt>didn't go</opt>
   to school.
</root>'''

root = ET.fromstring(content)
root.tag = 'sentence'
newroot = ET.Element('root')
newroot.insert(0,root)
print(ET.tostring(newroot))

# <root><sentence>
#    She
#    <opt>went</opt>
#    <opt>didn't go</opt>
#    to school.
# </sentence></root> 
```

# android - 为什么相机不能正常工作？

> ID：14639045
> 
> 赞同：0
> 
> 时间：2013-02-01T03:03:37.177
> 
> 标签：android

我在我的应用程序中使用相机，我没有在相机上做更多的工作我的要求只是拍照并使用前后相机和闪光灯。相机将在自定义视图中打开，因为我正在使用此代码：-

```
public class CaptureDealImage extends Activity implements OnClickListener,
    CameraCallback {
private Camera myCamera;
private MyCameraSurfaceView myCameraSurfaceView;
private MediaRecorder mediaRecorder;
private Button objbtncapture, objbtnback, objbtngalary, objbtnretake,
        objbtnuse;
private Button objbtnflashlight, objbbtnfrontcam;// ,flashButton_p,flashButton_l,cameraRotate_p,cameraRotate_l;
private boolean recording;
private TextView show_p, show_l;
int nCurrentOrientation;
private WakeLock wakeLock;
private int count, mode;
private boolean backendCamera = true;
private FrameLayout mymiddlelayout;
private String sdcardpath;
private boolean flashlight = false;
private boolean cameramode = false;
private boolean isfrontcamera = false;
private RelativeLayout objrelativeLayoutretake, objrelativeLayout3;
private byte[] data;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dealpick);
    PowerManager mgr = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = mgr
            .newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "MyWakeLock");
    wakeLock.acquire();
    // Get Camera for preview
    objbtnflashlight = (Button) findViewById(R.id.btnflashlight);
    objbbtnfrontcam = (Button) findViewById(R.id.bbtnfrontcam);
    objbtncapture = (Button) findViewById(R.id.btncapture);
    objbtngalary = (Button) findViewById(R.id.btngalary);
    objbtnback = (Button) findViewById(R.id.btnback);
    objbtnretake = (Button) findViewById(R.id.btnretake);
    objbtnuse = (Button) findViewById(R.id.btnuse);
    objrelativeLayoutretake = (RelativeLayout) findViewById(R.id.relativeLayoutretake);
    objrelativeLayout3 = (RelativeLayout) findViewById(R.id.relativeLayout3);
    objbtnback.setOnClickListener(this);
    objbtncapture.setOnClickListener(this);
    objbtngalary.setOnClickListener(this);
    objbtnflashlight.setOnClickListener(this);
    objbbtnfrontcam.setOnClickListener(this);
    objbtnretake.setOnClickListener(this);
    objbtnuse.setOnClickListener(this);
}

private Camera getCameraInstance() {
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
        Display getOrient = getWindowManager().getDefaultDisplay();
        if (getOrient.getHeight() > getOrient.getWidth()) {
            c.setDisplayOrientation(90);
        }
    } catch (Exception e) {
    }
    return c; // returns null if camera is unavailable
}

@Override
protected void onPause() {
    super.onPause();
    releaseCamera();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    myCamera = getCameraInstance();
    if (myCamera == null) {
        Toast.makeText(CaptureDealImage.this, "Fail to get Camera",
                Toast.LENGTH_LONG).show();
    }
    myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
    mymiddlelayout = (FrameLayout) findViewById(R.id.middlelayout);
    mymiddlelayout.removeAllViews();
    mymiddlelayout.addView(myCameraSurfaceView);
    myCameraSurfaceView.setCallback(this);
}

private void releaseCamera() {
    /*
     * if (myCamera != null) { myCamera.release(); // release the camera for
     * other applications myCamera = null; }
     */
    Camera camera = this.myCameraSurfaceView.getCamera();
    if (camera != null) {
        camera.stopPreview();
        camera.release();
        camera = null;
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    wakeLock.release();
    /*
     * ReleaseRootBitmap mReleaseRootBitmap=new ReleaseRootBitmap();
     * LinearLayout
     * mLinearLayout=(LinearLayout)findViewById(R.id.record_video_parent);
     * mReleaseRootBitmap.unbindDrawables(mLinearLayout);
     */
}

public class MyCameraSurfaceView extends SurfaceView implements
        SurfaceHolder.Callback {

    private SurfaceHolder mHolder;
    private Camera mCamera;
    private CameraCallback callback = null;
    private boolean isStarted = true;

    public MyCameraSurfaceView(Context context, Camera camera) {
        super(context);
        mCamera = camera;
        initialize(context);
    }

    public MyCameraSurfaceView(Context context) {
        super(context);
        initialize(context);
    }

    public void setCallback(CameraCallback callback) {
        this.callback = callback;
    }

    public void startPreview() {
        mCamera.startPreview();
    }

    public void initialize(Context mcontext) {
        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format,
            int weight, int height) {

        if (holder.getSurface() == null) {
            // preview surface does not exist
            return;
        }
        // stop preview before making changes
        try {
            if (null != mCamera) {
                mCamera.stopPreview();
            }
        } catch (Exception e) {
            // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            if (null != mCamera) {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }

            /*
             * if (null != camera) { camera.startPreview();
             */
        } catch (Exception e) {
            Log.d("check",
                    "Error starting camera preview: " + e.getMessage());
        }

    }

    public Camera getCamera() {
        return this.mCamera;
    }

    public void startTakePicture() {
        mCamera.autoFocus(new AutoFocusCallback() {
            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                takePicture();
            }
        });
    }

    public void takePicture() {
        mCamera.takePicture(new ShutterCallback() {
            @Override
            public void onShutter() {
                if (null != callback)
                    callback.onShutter();
            }
        }, new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                if (null != callback)
                    callback.onRawPictureTaken(data, camera);
            }
        }, new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                if (null != callback)
                    callback.onJpegPictureTaken(data, camera);
            }
        });
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            // mCamera.startPreview();
            try {
                mCamera.setPreviewDisplay(holder);
            } catch (Throwable ignored) {
            }
            mCamera.setPreviewDisplay(holder);
            mCamera.setPreviewCallback(new Camera.PreviewCallback() {
                @Override
                public void onPreviewFrame(byte[] data, Camera camera) {
                    if (null != callback)
                        callback.onPreviewFrame(data, camera);
                }
            });
        } catch (IOException e) {
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        if (mCamera != null) {
            // camera.stopPreview();
            mCamera.release();
            mCamera = null;
        }
    }
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    Display display = getWindowManager().getDefaultDisplay();
    if (display.getHeight() > display.getWidth()) {
        myCamera.setDisplayOrientation(90);
        show_l.setVisibility(View.GONE);
        show_p.setVisibility(View.VISIBLE);
    } else {
        myCamera.setDisplayOrientation(0);
        show_l.setVisibility(View.VISIBLE);
        show_p.setVisibility(View.GONE);
    }
}

private Handler checkHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if (recording && count <= 15) {
            if (mode == 1) {
                show_l.setText(count + "/15");
            } else {
                show_p.setText(count + "/15");
            }
        }
    }
};

@Override
public void onClick(View v) {
    if (v.equals(objbtncapture)) {
        myCameraSurfaceView.startTakePicture();
    }
    if (v.equals(objbtngalary)) {
        // releaseCamera();
        Intent i = new Intent(
                Intent.ACTION_PICK,
                android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
        final int ACTIVITY_SELECT_IMAGE = 100;
        startActivityForResult(i, ACTIVITY_SELECT_IMAGE);
    }

    if (v.equals(objbtnflashlight)) {

        if (!isfrontcamera) {
            if (!flashlight) {
                flashlight = true;
                Parameters params = myCamera.getParameters();
                params.setFlashMode(Parameters.FLASH_MODE_TORCH);
                myCamera.setParameters(params);
            } else {
                flashlight = false;
                Parameters params = myCamera.getParameters();
                params.setFlashMode(Parameters.FLASH_MODE_OFF);
                myCamera.setParameters(params);
            }
        }
    }

    if (v.equals(objbbtnfrontcam)) {

        if (!cameramode) {
            cameramode = true;
            switchToCamera(cameramode);
        } else {
            cameramode = false;
            switchToCamera(cameramode);
        }
    }

    if (v.equals(objbtnback)) {
        finish();
    }
    if (v.equals(objbtnretake)) {
        objrelativeLayoutretake.setVisibility(View.GONE);
        objrelativeLayout3.setVisibility(View.VISIBLE);
        myCameraSurfaceView.startPreview();
    }
    if (v.equals(objbtnuse)) {
        try {
            PhotoComplete(data);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

private void switchToCamera(boolean frontcamera) {
    releaseCamera();
    if (frontcamera) {
        isfrontcamera = true;
        myCamera = getFrontCameraId();
    } else {
        isfrontcamera = false;
        myCamera = getCameraInstance();
    }

    if (myCamera == null) {
        Toast.makeText(CaptureDealImage.this, "fail to get front camera",
                Toast.LENGTH_SHORT).show();
        myCamera = getCameraInstance();
    }
    myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
    mymiddlelayout = (FrameLayout) findViewById(R.id.middlelayout);
    mymiddlelayout.removeAllViews();
    mymiddlelayout.addView(myCameraSurfaceView);
}

Camera getFrontCameraId() {
    int cameraCount = 0;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    Camera camera = null;
    for (int camIdx = 0; camIdx < cameraCount; camIdx++) {
        Camera.getCameraInfo(camIdx, cameraInfo);
        if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            try {
                camera = Camera.open(camIdx);
                Display getOrient = getWindowManager().getDefaultDisplay();
                if (getOrient.getHeight() > getOrient.getWidth()) {
                    camera.setDisplayOrientation(90);
                }
                // myCamera.unlock();
                // mediaRecorder.setCamera(myCamera);
                // myCamera.setParameters(myCamera.getParameters());
            } catch (RuntimeException e) {
                Log.e("",
                        "Camera failed to open: " + e.getLocalizedMessage());
            }
        }
    }
    return camera;
    // No front-facing camera found
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    // TODO Auto-generated method stub

}

@Override
public void onShutter() {
    // TODO Auto-generated method stub

}

@Override
public void onRawPictureTaken(byte[] data, Camera camera) {
    // TODO Auto-generated method stub

}

@Override
public void onJpegPictureTaken(byte[] data, Camera camera) {
    try {
        this.data = data;
        objrelativeLayoutretake.setVisibility(View.VISIBLE);
        objrelativeLayout3.setVisibility(View.GONE);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void PhotoComplete(byte[] data) throws FileNotFoundException,
        IOException {
    try {
        sdcardpath = String.format(getResources().getString(R.string.path),
                System.currentTimeMillis());
        FileOutputStream outStream = new FileOutputStream(sdcardpath);
        outStream.write(data);
        outStream.close();
        Bundle objbundle = new Bundle();
        Intent objintent = new Intent(CaptureDealImage.this,
                com.flashdeal.mycamera.SetDealImageCategory.class);
        objbundle.putString("from", "camera");
        objbundle.putString("imagepath", sdcardpath);
        Log.e("check===path", sdcardpath);
        objintent.putExtras(objbundle);
        startActivity(objintent);
        finish();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
public String onGetVideoFilename() {
    // TODO Auto-generated method stub
    return null;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 100 && resultCode == RESULT_OK) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();
        Bundle objbundle = new Bundle();
        Intent objintent = new Intent(CaptureDealImage.this,
                com.flashdeal.mycamera.SetDealImageCategory.class);
        objbundle.putString("from", "camera");
        objbundle.putString("imagepath", filePath);
        objintent.putExtras(objbundle);
        startActivity(objintent);
        finish();
    }
} 
```

}

但这不起作用，当我单击前置摄像头时，再次单击后置摄像头并再次单击捕获按钮摄像头会冻结。请任何人指导我或为我的要求提供 imp 链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:38:31.733

参考这个链接::

他们面临着与您相同的问题。看看一次。

[链接 1](https://stackoverflow.com/questions/6599454/switch-back-front-camera-on-fly)

[链接 2](https://stackoverflow.com/questions/11246497/android-camera-preview-switch-between-cameras)

希望这可以帮助 ：）

# facebook - 通过 Facebook 分享 URL 时图片未显示

> ID：14639049
> 
> 赞同：0
> 
> 时间：2013-02-01T03:04:11.157
> 
> 标签：facebook, image, share

我正准备推出一个新网站[http://www.careerclaim.com](http://www.careerclaim.com)，如果我通过 FB 分享 URL，则仅显示 URL，而不显示徽标和标题。

我在 FB 的调试器中输入了 URL，它返回：无法下载：无法从 URL 检索数据。

请帮忙！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:36:46.890

您正在重定向到页面的 HTTPS 版本，但您的 og:url 元元素指出仅使用 HTTP 的版本是“真正的”版本 - 这会导致无休止的重定向循环，[https://developers.facebook.com /tools/debug/og/object?q=http%3A%2F%2Fwww.careerclaim.com%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.careerclaim.com%2F)

# python - 从“对象”继承会破坏 __getstate__ 和 __setstate__？

> ID：14639050
> 
> 赞同：5
> 
> 时间：2013-02-01T03:04:13.857
> 
> 标签：python, object, pickle

设置一个基类来处理跟踪类实例，同时仍然允许垃圾收集。这篇[文章](https://stackoverflow.com/questions/12101958/keep-track-of-instances-in-python)的[第二个答案](https://stackoverflow.com/a/12102666/1871362)很接近，但在从保存的实例中解压时，我还需要添加到列表中。`instances`

这是我的代码：

```
import weakref
import pickle
from pprint import pprint
import copy

class BaseClass(object):

    def __new__(cls, *args, **kwargs):
        instance = object.__new__(cls, *args, **kwargs)
        if 'instances' not in cls.__dict__:
            cls.instances = []
        cls.instances.append(weakref.ref(instance))
        return instance

    def __getstate__(self):
        print "pickling"
        d = self.__dict__
        return d

    def __setstate__(self, state):
        print "unpickling"
        self.__dict__ = state
        if 'instances' not in self.__dict__:
            self.instances = []
        self.__class__.instances.append(weakref.ref(self))
        return self

BaseClass.instances = []

if __name__ == '__main__':
    a = BaseClass()
    b = BaseClass()
    c = BaseClass()

    pprint(BaseClass.instances)

    f = file("test.pkl","wb")
    pickle.dump(c,f)
    f.close()

    f = file("test.pkl","rb")
    d = pickle.load(f)
    f.close()

    pprint(BaseClass.instances) 
```

所以，奇怪的是：“unpickling”永远不会被打印出来，并且`d`实例没有进入`instances`列表，表明`__setstate__`永远不会被调用。

如果我替换`d = pickle.load(f)`为`d = copy.copy(pickle.load(f))`，则将`d`其添加到`instances`列表中，并且“酸洗”打印两次而不是一次。

如果我替换`class BaseClass(object):`为`class BaseClass:`，则“酸洗”和“解酸”每个打印一次，如预期的那样，并`d`进入列表但`a`,`b`和`c`不。

有人知道发生了什么吗？似乎显式继承`object`破坏了默认值`__getstate__`和`__setstate__`行为。

# python - Django：来自不同模型的模型实例的有序列表？

> ID：14639053
> 
> 赞同：4
> 
> 时间：2013-02-01T03:04:50.773
> 
> 标签：python, django, sorting, django-models, django-queryset

用户可以将三种不同类型的内容上传到我们的网站：图像、视频、音频。以下是每种类型的模型：

```
class ImageItem(models.Model):
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    image = models.ImageField(upload_to=img_get_file_path)
    title = models.CharFiled(max_length=1000,
                             blank=True)

class VideoItem(models.Model):
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    video = models.FileField(upload_to=vid_get_file_path)
    title = models.CharFiled(max_length=1000,
                             blank=True)

class AudioItem(models.Model):
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    audio = models.FileField(upload_to=aud_get_file_path)
    title = models.CharFiled(max_length=1000,
                             blank=True) 
```

我有一个名为 的页面，它按从*最近上传*`library.html`到最早上传的顺序呈现用户上传的所有项目（它显示每个实例的和，并在左侧放置一个小图标，表示它是什么类型的项目）。*`title``upload_date`*

 *假设它需要三个单独的查询，我该如何合并三个查询集？我如何确保它们从最近上传的顺序排列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:24:04.263

作为替代方案，您可以使用[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)并将公共属性分解到超类模型中。然后你只需`order_by`在超类模型上上传日期。第三方应用程序[django-model-utils](https://bitbucket.org/carljm/django-model-utils/src)提供了一个称为继承管理器的自定义管理器，可让您自动向下转换为查询中的子类模型。

```
from model_utils.managers import InheritanceManager

class MediaItem(models.Model):
    objects = InheritanceManager()

    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    title = models.CharFiled(max_length=1000,
                             blank=True)

class ImageItem(MediaItem):
    image = models.ImageField(upload_to=img_get_file_path)

class VideoItem(MediaItem):
    video = models.FileField(upload_to=vid_get_file_path)

class AudioItem(MediaItem):
    audio = models.FileField(upload_to=aud_get_file_path) 
```

然后，您的查询就是：

```
MediaItem.objects.all().order_by('upload_date').select_subclasses() 
```

这样一来，您就可以通过一个查询（使用 3 个连接）获得所需的内容。另外，您的数据被更好地标准化，并且支持各种更复杂的查询以及分页相当简单。

即使您不这样做，我仍然会使用[抽象基类继承](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)在概念上规范化您的数据模型，即使您没有获得数据库端和 ORM 的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:06:41.853

`attrgetter`可用于提取您可能希望作为排序依据的对象的属性。

```
from operator import attrgetter

results = []
results.extend(list(AudioItem.objects.filter(...)))
results.extend(list(VideoItem.objects.filter(...)))
results.extend(list(ImageItem.objects.filter(...))
results.sort(key=attrgetter("upload_date") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T03:21:41.123

参考这个问题，这是我使用的确切解决方案。受蒙库特的回答和 Frantzdy 在他的评论中的链接的最高回答的影响（谢谢大家）。

```
from itertools import chain
from operator import attrgetter

images = ImageItem.objects.filter(user=user)
video = VideoItem.objects.filter(user=user)
audio = AudioItem.objects.filter(user=user)
result_list = sorted(chain(images, video, audio),
                     key=attrgetter('upload_date'),
                     reverse=True) 
```*

# excel - 是否可以在 Excel 2008 for Mac 中按日期过滤？

> ID：14639059
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:05:35.330
> 
> 标签：excel, macos, excel-2008

数据示例：

```
date,letter
2/2/2012,a
2/3/2012,v
1/1/2011,c 
```

是否可以使用过滤器仅选择 2011 年的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T04:18:49.237

如果您的日期是文本，则过滤以选择以`11`应该服务结束。如果您的日期是日期/时间序列号并且您使用的是 1904 日期系统，那么大于或等于 39082 且小于 39447 的自定义自动过滤器应该可以工作。

如果两者都不适合，那么如果您的数据在列 A 中以 A4 中的标签开头，那么以下公式可能适合：

在 A1 中复制到 B1： `=$A4`
在 A2 中：`>=1/1/11`
在 B2 中：`<=31/12/11`

结合 Sort & Filter, Advanced, Filter the list, in-place, a List range: $A$4:$A$n and Critera range: `$A$1:$B$2`.

`n`最后一个相关行的编号在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:11:56.637

在 Excel 2011 for Mac 中是可能的。我发布了这个答案，以便您检查它是否也适合您。让我知道结果 - 如果它不起作用，我将删除答案。

如果您选择按单元格值过滤，您可以为期间的所有日期选择一个过滤器，2011年等待您检查。这是我为说明情况而拍摄的屏幕截图：

![在此处输入图像描述](../Images/9ffbabb4697e5ac808571001898c7992.png)

# sql - 查询以查找两个字段之间的最大关系

> ID：14639062
> 
> 赞同：0
> 
> 时间：2013-02-01T03:06:15.690
> 
> 标签：sql, sql-server

具有以下数据库结构：

> 电影导演（director_id：int，movie_id：int）
> 角色（actor_id：int，movie_id：int，角色：字符串）

我如何找到与导演合作的电影最多的演员？

```
directors_id, actor_id 
```

尝试查询后得到的结果是：

DIRECTOR_ID ACTOR_ID 合作

* * *

```
 101          1              2
    102          6              1
    105          4              1
    101          2              1
    104          8              1
    101          3              1
    103          7              1
    100         11              1
    101         10              1
    100          5              1
    104          2              1 
```

DIRECTOR_ID ACTOR_ID 合作

* * *

```
 101          9              1 
```

我只需要将每位导演与拥有最多电影的演员结合起来。例如，director_id 101 只应显示 101 1 2 条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:02:09.340

也许您应该使用 TDQD — 测试驱动的查询设计。

### Q1：哪些导演与哪些演员合作

第一步是确定哪些导演与哪些演员合作过电影，这可以通过连接 Movie_ID 列上的两个表来找到：

```
SELECT d.Movie_ID, d.Director_ID, A.Actor_ID
  FROM Movies_Directors AS d
  JOIN Roles AS a
    ON d.Movie_ID = a.Movie_ID 
```

由于您没有告诉我们表的主键，我们无法判断单个演员是否可以被记录为在单个电影中具有多个不同的角色。我将假设 Roles 表的主键是组合 (Movie_ID, Actor_ID)。

### Q2：每位导演与每位演员合作了多少次

我们需要根据上面的查询计算每个演员和导演组合的行数：

```
SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS num_joint_movies
  FROM Movies_Directors AS d
  JOIN Roles AS a
    ON d.Movie_ID = a.Movie_ID
 GROUP BY d.Director_ID, A.Actor_ID 
```

### Q3：对于每位导演，他们与演员合作的最大次数是多少？

我们现在需要从上面的结果中找到每个导演的最大联合电影数量。这就需要把上面的查询当成表，像这样：

```
SELECT n.Director_ID, MAX(n.num_joint_movies) AS max_joint_movies
  FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS num_joint_movies
          FROM Movies_Directors AS d
          JOIN Roles AS a
            ON d.Movie_ID = a.Movie_ID
         GROUP BY d.Director_ID, A.Actor_ID
       ) AS n
 GROUP BY n.Director_ID 
```

### Q4：与每位导演合作最多的演员

现在我们需要结合查询 Q2 和 Q3 来获取参与者：

```
SELECT q3.Director_ID, q2.Actor_ID
  FROM (SELECT n.Director_ID, MAX(n.Num_Joint_Movies) AS Max_Joint_Movies
          FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
                  FROM Movies_Directors AS d
                  JOIN Roles AS a
                    ON d.Movie_ID = a.Movie_ID
                 GROUP BY d.Director_ID, A.Actor_ID
               ) AS n
         GROUP BY n.Director_ID
       ) AS q3
  JOIN (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
          FROM Movies_Directors AS d
          JOIN Roles AS a
            ON d.Movie_ID = a.Movie_ID
         GROUP BY d.Director_ID, A.Actor_ID
        ) AS q2
     ON q3.Director_ID = q2.Director_ID AND q3.Max_Joint_Movies = q2.Num_Joint_Movies 
```

### Q5：使用公用表表达式（CTE）

SQL 标准允许使用 WITH 子句引入的公用表表达式来简化查询，如下所示：

```
WITH cte AS
    (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
       FROM Movies_Directors AS d
       JOIN Roles AS a
         ON d.Movie_ID = a.Movie_ID
      GROUP BY d.Director_ID, A.Actor_ID
    )
SELECT q3.Director_ID, cte.Actor_ID
  FROM (SELECT cte.Director_ID, MAX(cte.Num_Joint_Movies) AS Max_Joint_Movies
          FROM cte
         GROUP BY cte.Director_ID
       ) AS q3
  JOIN cte
    ON q3.Director_ID = cte.Director_ID AND q3.Max_Joint_Movies = cte.Num_Joint_Movies 
```

* * *

### Q6：任何导演的最大合作次数

由于自从我开始回答以来问题已经有所改变，所以上面显示的结果可能并不完全符合要求——尽管修改后的问题并没有明确说明需要什么。然而，将问题分解为可回答的子查询的一般技术是有价值的。这就是我处理任何类似查询的方式。如果你正在寻找合作最多的导演+演员的单一组合，那么我们需要修改Q3以找到所有导演的最大联合电影数量：

```
SELECT MAX(n.num_joint_movies) AS max_joint_movies
  FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS num_joint_movies
          FROM Movies_Directors AS d
          JOIN Roles AS a
            ON d.Movie_ID = a.Movie_ID
         GROUP BY d.Director_ID, A.Actor_ID
       ) AS n 
```

### Q7：合作次数最多的演员和导演

我们现在需要再次将 Q6 与 Q2 结合起来：

```
SELECT q2.Director_ID, q2.Actor_ID
  FROM (SELECT MAX(n.Num_Joint_Movies) AS Max_Joint_Movies
          FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
                  FROM Movies_Directors AS d
                  JOIN Roles AS a
                    ON d.Movie_ID = a.Movie_ID
                 GROUP BY d.Director_ID, A.Actor_ID
               ) AS n
       ) AS q3
  JOIN (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
          FROM Movies_Directors AS d
          JOIN Roles AS a
            ON d.Movie_ID = a.Movie_ID
         GROUP BY d.Director_ID, A.Actor_ID
        ) AS q2
     ON q3.Max_Joint_Movies = q2.Num_Joint_Movies 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:08:02.643

您必须为此使用`max()`功能。

```
SELECT
max(collaborations) 
FROM movies_directors mov 
INNER JOIN roles r 
     on r.movie_id=mov.movie_id 
GROUP BY mov.director_id,r.actor_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:08:11.340

这是完成您想要的简洁的方法：

```
 select top (1) with ties
    M.director_id,
    R.actor_id,
    COUNT(movie_id) as MovieCount
  from movies_directors as M
  join roles as R
  on M.movie_id = R.movie_id
  group by
    M.director_id,
    R.actor_id
  order by rank() over (
  partition by director_id
  order by COUNT(movie_id) desc
  ) 
```

# asp.net-mvc-3 - 如何更新分层 ViewModel？

> ID：14639065
> 
> 赞同：0
> 
> 时间：2013-02-01T03:06:26.157
> 
> 标签：asp.net-mvc-3

我被这个问题困住了。

我有一个模型 AssessmentModel 定义如下：

```
public class AssessmentModel
{
    public Respondent Respondent { get; set; }
    public List<CompetencyModel> Competencies { get; set; }
}

public class CompetencyModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<ResultModel> Results { get; set; }
}

public class ResultModel
{
    public int Id { get; set; }
    public int Score { get; set; }
} 
```

我只需要为 ResultModel 的 Score 属性设置值。分数是这里唯一可编辑的属性。

我只有 1 个视图，这个视图有一个 @model 列表，它显示 CompetencyModel 项目列表，每个项目都有编辑按钮。当我单击 Edit 按钮时，CompetencyModel 的 Id 被传递给同一个 View，并且 View 为属于所选 CompetencyModel 的 ResultModel 项绘制一个 Edit 表单。

但是 ResultModel 项的表单存在于同一个 View 上，并且 View 的模型仍然是@model List。

如何通过对每个 ResultModel 项目使用可绑定的 Html.EditorFor(m=>m.Score) 助手来获取 Score 属性？

视图定义如下：

```
@model List<CompetencyModel>
@foreach(var comp in Model)
{
    <p>@comp.Name</p>
    <a href="@Url.Action("Assessment", new { comp.Id })">Edit</a>
} 
```

在控制器中，我设置 ViewBag.CurrentId = comp.Id，并在视图底部：

```
if(ViewBag.CurrentId != null) //draw a form for ResultModel items
{
 // What should I do now? 
 // how cant I use Html.EditorFor(m=>...) if the Model is still List<CompetencyModel>
} 
```

我需要访问单个 ResultModel 实体来为 Score 属性设置一个值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:57:26.107

您应该能够使用 Linq 完成此操作。考虑在最后一个 if 语句中包含以下代码段

```
var result = Model.Results.FirstOrDefault(r => r.Id == ViewBag.CurrentId); 
```

我没有 IDE，所以要注意语法错误

# php - 错误在说什么？

> ID：14639068
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:06:43.687
> 
> 标签：php, mysql, database

好吧，我是 php 新手。现在我要做的就是在数据库表中插入一些数据。

这是示例代码

```
<?php 
include("DbMethods.php");
connectToDb();

$name=$_POST['name'];
$location=$_POST['location'];
$item=$_POST['item'];

    $result=mysql_query("SELECT id FROM `customer` WHERE `name`='".$name."' AND `location`='".$location."' AND `item`='".$item."')")or die(mysql_error());

?> 
```

这就是错误的样子

```
check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1 
```

究竟是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:08:25.903

`)`您在查询结束时有一个错误。错误消息对此非常明确。

```
$result=mysql_query(" ... AND `item`='".$item."')")or die(mysql_error());
                                                ^ 
```

如评论中所述，**请停止使用`mysql_`功能**。为什么？出于一个原因，有人可能会`'; DROP customer`提交`item`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:13:04.983

用以下内容替换该行：

```
$result = mysql_query("SELECT id FROM `customer` WHERE `name`='".$name."' AND `location`='".$location."' AND `item`='".$item."') or die(mysql_error()); 
```

错误实际上是说明 ')' 字符附近存在语法错误。非常具体和明确的错误信息；）

正如已经提到的，不要再使用 mysql_ 了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:09:08.637

`...$item."')")or die...`应该是`...$item."'")or die...`这意味着它找不到匹配的括号，这就是它给你那个错误的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T03:09:47.303

不要使用 mysql_* ...

删除多余的）

```
$result=mysql_query("SELECT id FROM `customer` WHERE `name`='".$name."' AND `location`='".$location."' AND `item`='".$item."'")or die(mysql_error()); 
```

# android - 将 Google Play 服务 jar 作为项目的一部分包含在内？

> ID：14639070
> 
> 赞同：2
> 
> 时间：2013-02-01T03:06:53.543
> 
> 标签：android, service, jar, google-play

是否可以/建议将 Google Play Services jar 文件包含在您的 android 项目中，而不是将其包含为依赖库？

此页面[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)要求您将 Google Play 服务作为依赖库的一部分。但为了简化目的，我正在考虑将 jar 作为 android 项目本身的一部分。

有人成功地做到了这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T23:06:41.787

库项目包含字符串资源。它们不包含在 jar 文件中。但是，如果您也复制 XML 文件，它可能会正常工作。

# java - Spring Validation on MultiActionController, BindException : how to use custom object name instead of command

> ID：14639074
> 
> 赞同：0
> 
> 时间：2013-02-01T03:07:24.980
> 
> 标签：java, spring-mvc, validation

Sorry for my dumb question and bad English. i trying to make some validation on user change password menu in my new Developed Web using Spring MVC.

i follow instruction from [How to perform Spring validation in MultiActionController?](https://stackoverflow.com/questions/2744587/how-to-perform-spring-validation-in-multiactioncontroller)

i write this code :

```
public ModelAndView hanldeBindException(HttpServletRequest request, HttpServletResponse response, ServletRequestBindingException bindingException) {
    BindException bindException = (BindException) bindingException.getRootCause();
    ModelMap modelmap = new ModelMap();
    ChangePasswordForm cpForm = new ChangePasswordForm();
    cpForm.setUsername(SessionHelper.getUsername());
    modelmap.addAttribute("ChangePasswordForm", cpForm);
    return new ModelAndView("changepassword").addAllObjects(bindException.getModel()).addObject("ChangePasswordForm", cpForm);
} 
```

and in my jsp :

```
<form:form action="update.htm" commandName="ChangePasswordForm" >
    <form:errors path="*" cssClass="errorblock" element="div" />
    <table  class="form">
        <tr>
            <td class="col1"><label>User Name :</label></td>
            <td class="col2"><form:label path="username" >${ChangePasswordForm.username}</form:label></td>
        </tr>
        <tr>
            <td><label>Old Password :</label></td>
            <td><form:password path="oldPassword" id="oldPassword"></form:password>
                <form:errors path="oldPassword" cssClass="error" /></td>
        </tr>
        <tr>
            <td><label>New Password :</label></td>
            <td><form:password path="newPassword"></form:password>
            <form:errors path="newPassword" cssClass="error" /></td>
        </tr>
        <tr>
            <td><label>Confirm New Password :</label></td>
            <td><form:password path="confirmNewPassword"></form:password>
            <form:errors path="confirmNewPassword" cssClass="error" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit" ></td>
        </tr>
    </table>
</form:form> 
```

but it does not appear any error on my screen when i try negative test like empty field. when i try to print out

```
System.out.println("UserController::hanldeBindException::1" + bindException.getObjectName()); 
```

it show the object name is "command" instead of my command name in jsp which is "ChangePasswordForm". When i try to change that commandName to "command" it works. But i just curious is there some way to setObjectName in BindException Class or you have another way to use custom name instead of default "command" Object Name??

**UPDATE**

My Validation works since i change commandName to "command" to like this :

```
<form:form action="update.htm" commandName="command">
   <!-- Form Field and Error define here -->
</form:form> 
```

and of course do some adjustment in my controller also. if i change it to another name it wont work anymore.

I use Spring Framework 3.0.2 RELEASE.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:36:37.877

simple answer would be that most likely you're extending BaseCommandController in some form (AbstractCommandController or otherwise), in which case you should probably override the "getCommandName()" and "getCommand()" methods. But i can't tell from the code you've supplied.

what version of spring are you using? The idea of a "command" is relatively antiquated now as of 3.0+ as are the base classes. Instead use annotation based controllers and model attributes:

```
@Controller
@SessionAttributes({"changePasswordForm"})
public class MyController {
    @InitBinder
    public void initBinder(WebDataBinder binder) {
       binder.setValidator(new ChangePasswordFormValidator());
    }

    @ModelAttribute("changePasswordForm")
    public ChangePasswordForm createChangePasswordForm() {
      ...
    }

    @RequestMapping(...)
    public ModelAndView controllerMethod(
          @Valid @ModelAttribute changePasswordForm ChangePasswordForm) {
      ...
    }
} 
```

This should automatically validate your form before calling the controller method, and bounce back to the calling page.

In your validator, you'll supply error message code in the validate method:

```
public void validate(Object target, Errors errors) {
    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "username", "username.required");
} 
```

You would then make sure "username.required" is a key in whatever MessageSource you've supplied to spring.

The form tags should work exactly as you have them.

Here's the spring reference manual for controllers:

[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-controller](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-controller)

# python - 如何在 Python 中使用 sys.exit()

> ID：14639077
> 
> 赞同：26
> 
> 时间：2013-02-01T03:07:47.737
> 
> 标签：python, python-3.x, exit

```
player_input = '' # This has to be initialized for the loop

while player_input != 0:

    player_input = str(input('Roll or quit (r or q)'))

    if player_input == q: # This will break the loop if the player decides to quit

        print("Now let's see if I can beat your score of", player)
        break

    if player_input != r:

        print('invalid choice, try again')

    if player_input ==r:

        roll= randint (1,8)

        player +=roll #(+= sign helps to keep track of score)

        print('You rolled is ' + str(roll))

        if roll ==1:

            print('You Lose :)')

            sys.exit

            break 
```

* * *

我试图告诉程序如果`roll == 1`没有发生任何事情就退出，当我尝试使用时它只会给我一条错误消息`sys.exit()`

* * *

这是我运行程序时显示的消息：

```
Traceback (most recent call last):
 line 33, in <module>
    sys.exit()
SystemExit 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-03-03T12:36:12.037

我认为你可以使用

```
sys.exit(0) 
```

您可以在 python 2.7 文档中查看[它](https://docs.python.org/2/library/sys.html#sys.exit)：

> 可选参数 arg 可以是给出退出状态的整数（默认为零），也可以是其他类型的对象。如果它是一个整数，则零被认为是“成功终止”，任何非零值都被 shell 等视为“异常终止”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T03:09:51.443

`sys.exit()`引发一个`SystemExit`异常，您可能认为它是一些错误。如果您希望您的程序不引发 SystemExit 而是优雅地返回，您可以将您的功能包装在一个函数中并从您计划使用的地方返回`sys.exit`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-10T15:47:39.687

您没有在代码中导入 sys ，也没有在调用函数时关闭 () ...尝试：

```
import sys
sys.exit() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T03:20:58.530

使用 2.7：

```
from functools import partial
from random import randint

for roll in iter(partial(randint, 1, 8), 1):
    print 'you rolled: {}'.format(roll)
print 'oops you rolled a 1!'

you rolled: 7
you rolled: 7
you rolled: 8
you rolled: 6
you rolled: 8
you rolled: 5
oops you rolled a 1! 
```

然后将“oops”打印更改为`raise SystemExit`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-31T17:07:22.913

与 Pedro Fontez 所说的一些回复一致，您似乎最初从未调用 sys 模块，也没有设法在 sys.exit 末尾粘贴 required ()：

所以：

```
import sys 
```

完成后：

```
sys.exit() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-14T16:13:16.623

# 真实世界的例子

## 选项1：[`sys.exit()`](https://docs.python.org/3/library/sys.html)

退出 Python 并引发 SystemExit 异常。

```
import sys
try:
  sys.exit("This is an exit!")
except SystemExit as message:
  print(message) 
```

输出：

```
This is an exit! 
```

## 选项 2：`sys.exit()`

退出 Python 而不显示消息

```
import sys
sys.exit()

# runtime: 0.07s 
```

# linux - 如何为 linux 控制台编写虚拟键盘？

> ID：14639078
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:07:56.323
> 
> 标签：linux, usb

我想要某种方式将键盘输入发送到没有键盘的 linux 机器。我希望在任何 linux 控制台和 xmbc 中都可以接受这个输入。

我的一个想法是编写某种类型的虚拟 USB 键盘，以这种方式发送输入，但也许这过于复杂了。

基本上我正在寻找的是没有 X（和 XMBC）的 Synergy

有人对在哪里看有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-23T15:47:37.287

您可以编写一个用户空间驱动程序将事件注入内核..这样您就可以 ssh 进入您的 linux 机器，运行驱动程序并注入您键入的按键.. 这样就好像连接了一个物理键盘并且可以使用所有程序。[这](http://thiemonge.org/getting-started-with-uinput)为如何编写用户空间驱动程序提供了很好的信息……如果你不想重新发明轮子，这个程序[TermKeyboard](https://github.com/chaitu236/TermKeyboard)正是这样做的。

免责声明：我编写了程序

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-25T01:57:40.197

sourceforge 上有一个用于 fbcon 的键盘。com;ile 你必须添加 string.h 包括 [http://sourceforge.net/projects/tabletvk/?source=dlp](http://sourceforge.net/projects/tabletvk/?source=dlp)

# css - 带背景的锚 css - 链接文本被压缩成新行

> ID：14639079
> 
> 赞同：0
> 
> 时间：2013-02-01T03:08:15.347
> 
> 标签：css

我在具有特定类的锚标记上使用以下 CSS。工作正常，除了长链接文本被强制换行。我想这与宽度有关...

```
a.interactive {
background:url(../images/icons/icon_interactive.png) left center no-repeat;
padding-left:30px;
height:25px;
width:25px;
display:inline-block;    
text-decoration: none;
vertical-align:text-center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:19:39.117

您需要使用 100% 宽度或设计允许的最大宽度来最大化宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:31:17.730

```
a.interactive {
    /*...*/
    white-space: nowrap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:41:56.983

尝试这个

```
a.interactive {
background:url(../images/icons/icon_interactive.png) left center no-repeat;
height:100%;
width:100%;
display:inline-block;    
text-decoration: none;
vertical-align:text-center;
} 
```

# android - Android：均衡器 - getNumberOfBands()

> ID：14639085
> 
> 赞同：5
> 
> 时间：2013-02-01T03:08:37.727
> 
> 标签：android, equalizer

根据[http://developer.android.com/reference/android/media/audiofx/Equalizer.html#getNumberOfBands()](http://developer.android.com/reference/android/media/audiofx/Equalizer.html#getNumberOfBands())可以看到getNumberOfBands()方法的描述——**获取均衡器引擎支持的频段数**.

这取决于设备还是安卓版本？？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T11:46:07.723

**频率取决于硬件所以据我所知，它必须取决于设备。**

您还可以通过升级手机来测试（检查）它。如果 NumberOfBands 相同，则在升级前和升级后测试频段数，那么我绝对正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-24T13:31:49.390

我想这很可能取决于**Device**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T23:54:34.770

我对此也很好奇。但我不确定这是否取决于设备类型。我在三星 Galaxy S8+ 和三星 J5 上进行了测试，在这两款设备上我都得到了 5 个频段，但我不知道为什么。另一件事是在 Google Play 音乐应用程序中的 J5 上，我有 7 个频段，而在同一应用程序（Google Play 音乐）中的 SGS8+ 上，我有 9 个频段。我不知道为什么，但如果有人知道为什么会这样，请告诉我们。

# bash - 如何在 bash 中回显 PS1 中使用的反斜杠转义特殊字符？

> ID：14639092
> 
> 赞同：0
> 
> 时间：2013-02-01T03:09:35.603
> 
> 标签：bash

我想查看设置时使用的转义特殊字符的输出`$PS1`。例如，放入`\u`PS1 会输出当前用户的用户名。

所以本质上：

```
omar @ ~ > echo -e '\u' 
```

预计：

```
omar 
```

实际输出：

```
\u 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-14T00:18:54.377

您可以使用`@P`运算符进行参数扩展，如下所示：

```
prompt="\u"; echo ${prompt@P} 
```

从 Bash 4.4 开始，您可以在[参数扩展](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)`@P`中使用运算符：

> `${parameter@operator}`
> 扩展要么是参数值的转换，要么是有关参数本身的信息，具体取决于运算符的值。每个运算符都是一个字母：
> 
> **`@P`**扩展是一个字符串，它是扩展参数值的结果，就好像它是一个提示一样

[以下是 PS1 命令可用](https://www.gnu.org/software/bash/manual/bashref.html#Controlling-the-Prompt)的一些常见特殊字符：

> 下面列出了提示变量 PS0、PS1、PS2 和 PS4 中可以出现的特殊字符
> 
> **`\a`**钟形字符
> **`\d`**日期，格式为“Weekday Month Date”（例如，“Tue May 26”）
> **`\e`**转义字符
> **`\H`**主机
> **`\u`**名 当前用户
> **`\w`**的用户名 当前工作目录

**延伸阅读**：

*   [Bash Echo 扩展 PS1](https://stackoverflow.com/q/3451993/1366033)
*   [Bash 4.4 提示当前正在运行的作业数量的转义](https://stackoverflow.com/q/53870897/1366033)
*   [Bash 如何使用运算符参数扩展${parameter@operator}？](https://stackoverflow.com/q/40732193/1366033)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:18:22.100

这是一种可用于显示转义字符值的方法。

下面定义的函数会将您当前的 PS1 更改为给定的字符串。输入命令后，您可以立即看到输出。

1.  将您当前的 PS1 存储在变量中

    `> save=$PS1`

2.  创建重置函数

    `> function reset { PS1=$save; }`

3.  创建打印功能

    `> function omar { PS1="\\$1 "; }`

4.  如下使用它

    `> omar u`：您的命令提示符将是您的用户名

    `omar >`

    `> omar @`：您的命令提示符将是 12 小时 am/pm 格式的当前时间

    `11:19 PM >`

    `> omar h`：您的命令提示符将是主机名，直到第一个 `.'

    `omar-Laptop >`

    ETC...

5.  您可以`PS1`通过调用`reset`或重新启动终端来重置您的

# django - 如何检索 Django 中所有对象的字段列表？

> ID：14639106
> 
> 赞同：45
> 
> 时间：2013-02-01T03:11:06.733
> 
> 标签：django

我想从 django 的查询中检索一个字段的所有值的列表。例如，我有一个用户查询，而不是用户对象的查询集（或列表），我想要一个仅包含用户名（字符串）的列表。从某种意义上说，这是要求仅限制一列数据。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-01T04:12:01.433

你有没有尝试过

```
list(User.objects.all().values_list('username', flat=True)) 
```

> 如果只传入单个字段，也可以传入 flat 参数。如果为 True，这将意味着返回的结果是单个值，而不是一个元组。此外，将其转换为列表会使返回的值成为列表而不是查询集

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T03:14:14.993

要获取用户名列表：

```
>>> User.objects.all().values('username')
>>> [{'username': u'u1'}, {'username': u'u2'}]

>>> User.objects.all().values_list('username')
>>> [(u'u1',), (u'u2',)] 
```

如果你只想要字符串，列表推导可以解决问题：

```
>>> usr_names = User.objects.all().values('username')
>>> [u['username'] for u in usr_names]
>>> [u'u1', u'u2'] 
```

使用`values_list`：

```
>>> usr_names = User.objects.all().values_list('username')
>>> [u[0] for u in usr_names]
>>> [u'u1', u'u2'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-26T14:42:09.397

正如你所写：

“而不是用户对象的查询集（或列表）”

上面的解决方案仍然是查询集

```
usr_names = User.objects.all().values_list('username') 
```

这个解决方案：

```
usr_names = [str(elem) for elem in list(User.objects.all().values_list('username'))] 
```

它将返回一个字符串列表

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-27T10:38:28.673

获取属性对象列表的最简单方法是首先单独使用获取该属性的查询集，`values_list`然后使用将 django 查询集转换为 python 集`set()`，最后使用`list()`.

在您的场景中：

```
user_names = list(set(User.objects.all().values_list('username', flat=True))) 
```

# javascript - 如何停止脚本运行

> ID：14639107
> 
> 赞同：0
> 
> 时间：2013-02-01T03:11:30.880
> 
> 标签：javascript, jquery

我一直试图弄清楚这一点，并且可能第五次问了同样的问题。总有一天我会失去理智。反正

这是我正在做的

我有四个标签。选项卡中的内容是动态生成的。有时它们很长并且与页面布局混乱。所以我这样做是为了限制它们最多 540 个字符

```
<script>
$(function(){
    var myDivThree = $('#pdpTab6');
    myDivThree.html(myDivThree.html().substring(0,540));
    $(myDivThree).append('<div id="readThree">Read More</div>');
    //this is what I am doing to show the extra content
    $('#readThree').click(function(){
        $('#popThree').show();
    });
    $('.closePop').click(function(){
        $('#popThree').fadeOut();
    })
});
</script> 
```

奇怪的是，如果一个标签包含少于 540 个字符，我会看到多读两次。如果选项卡包含少于 540 个字符，我宁愿根本不运行脚本。我是在做白日梦还是可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:16:43.293

```
<script>
$(function(){
    var myDivThree = $('#pdpTab6');
    if (myDivThree.html().length>540){
        myDivThree.html(myDivThree.html().substring(0,540));
        $(myDivThree).append('<div id="readThree">Read More</div>');
       //this is what I am doing to show the extra content
    }

    $('#readThree').click(function(){
        $('#popThree').show();
    });
    $('.closePop').click(function(){
        $('#popThree').fadeOut();
    })
});
</script> 
```

# algorithm - 扫描飞机上的已知位置

> ID：14639108
> 
> 赞同：1
> 
> 时间：2013-02-01T03:11:59.463
> 
> 标签：algorithm, geometry

想象一个在已知位置有许多点的平面。大多数都聚集在一起，但有些是异常值，并且有很大的区域根本没有点。我有多个客户可以通过矩形视口查看飞机。每个客户的视口可能有不同的尺寸，并且可以立即移动到平面上的任何位置。客户不知道点的位置；只有服务器可以。当客户端连接时，它会将其视口的大小传达给服务器，并且服务器应该响应一个位置，在该位置该客户端的视口可以看到一个或多个点。客户端访问该位置，从访问这些点收集数据，将该数据发送回服务器，然后请求下一个访问位置。

我需要一个有效的算法来选择要访问的位置。一个理想的解决方案将通过在视口位置中包含尽可能多的未访问点、最大限度地减少对点的重复访问以及不访问没有未访问点的位置来最小化客户需要访问的位置数量。你能推荐一个算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:38:31.233

去做这个：

```
 1) generate a Dalauney triangulation for the points  
   2) sort the triangles by size    
   3) for each vertex in the largest triangle:  
       3a) locate a corner of the viewport at the vertex  
       3b) try each neighboring point on the longest diameter of the viewport
       3c) determine orientation which encloses the maximum number of points  
       3d) position viewport at that orientation
       3e) goto step (3b)  
   4) delete the visited points
   5) goto step (3) 
```

# list - Ocaml 操作列表

> ID：14639109
> 
> 赞同：1
> 
> 时间：2013-02-01T03:12:00.093
> 
> 标签：list, ocaml

这里真正的基本问题：我是 Ocaml 的新手，我在尝试操作列表时遇到了问题。我已经阅读了[http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)，不幸的是我仍然感到困惑......我是函数式编程的新手。

如果我有以下功能：

```
 let stoverfl list1 list2 list3 =
      match list1 with
      |[]->None
      |h::list1 -> (*what I want to do goes in here*) 
```

我想看一下list2和list3的第一个元素，比较它们，如果相等，将list3的第一个元素添加到list2，否则不要修改列表。我现在并不真正关心错误检查（即检查列表是否至少有一个元素等）。

我的尝试：

```
 h::list1 -> let cmp1 = hd list2 (*this should return the first elemnt of list2??*)
             let cmp2 = hd list3
             if(cmp1=cmp2) then
                let updlist2 = concat list2 hd list3
                let updlist3 = hd list3
                (*pass updlist2 and updlist3 instead of list2 and list3 to next function*)
             else
                (*do nothing; pass list2 and list3 as normal*) 
```

我觉得我做错了……任何建议都将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:31:43.093

您说要添加 to 的第一个`list3`元素`list2`。当一个函数式程序员说这样的话时，这意味着他们想要构建一个所描述的新列表。您实际上无法修改`list2`--lists 是不可变的，并且名称永久绑定到单个值。实际上，您似乎想要构建*两个*新列表。其中一个`list2`在 的前面有第一个元素`list3`。另一个是`list2`（除了第一个元素之外的所有元素）的其余部分。

假设这就是您的意思，并且假设您不担心列表是否为空，那么这是获取这些值的一种方法：

```
let updlist2 = List.tl list2 in
let updlist3 = (List.hd list2) :: list3 
```

它实际上和你写的很接近。

但是，我想知道接下来您将如何处理这些值。如果您想将它们传递给另一个函数，将`let`s*放在*. `if`例如，这里有一些代码`g`使用列表或列表尾部调用函数，具体取决于列表的第一个元素：

```
let arg_for_g =
    match the_list with
    | [] -> []  (* No tail of the list *)
    | head :: tail -> if head = 3 then tail else the_list
in
    g arg_for_g 
```

如果将`let`s 放在 中`if`，则需要编写对下一个函数的两个不同调用。这可能很好，这完全取决于您将如何处理您的价值观。

（作为旁注，您应该担心列表是否为空！如果您使用`match`语句，您可以很容易地检测到这种情况。）

# jsp - 什么时候应该禁用 JSP 缓冲？

> ID：14639112
> 
> 赞同：2
> 
> 时间：2013-02-01T03:12:30.513
> 
> 标签：jsp, buffer, directive, autoflush

Oracle 网站上的一些文档（[http://docs.oracle.com/cd/A97688_16/generic.903/bp/j2ee.htm，3.1.12](http://docs.oracle.com/cd/A97688_16/generic.903/bp/j2ee.htm) Disable JSP Page Buffer If Not Used）说：

> 如果您没有使用任何需要缓冲的 JSP 功能，您可以禁用它以提高性能；创建缓冲区时不会使用内存，输出可以直接到浏览器。您可以使用以下指令禁用缓冲：
> 
> `<%@ page buffer="none" %>`

但是，我还没有找到任何类型的文档来说明究竟什么是“需要缓冲的 JSP 功能”。我通常了解在什么情况下减少或增加缓冲区可能会或可能不会有助于提高性能，但我不知道什么样的功能会“需要”缓冲。

在什么情况下应该关闭缓冲，和/或在什么情况下不应该关闭缓冲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:46:11.527

实际上，我只是有一个“呃”的时刻。您可以在 JSP 中执行一些操作来处理随响应返回的标头，例如`response.setHeader(...)`或`<jsp:forward />`. 这些显然必须始终发生在响应提交和数据开始流向客户端之前。如果您禁用缓冲，您将永远无法设置标头或使用转发标记，这可能是可取的，也可能是不可取的，因为数据将立即开始流向客户端。我不知道为什么我没有想到这一点...

基本上它归结为性能是否比失去设置标题或使用转发标签的能力更重要。如果是，您需要禁用缓冲。如果能够设置标头或使用转发标记很重要，则您希望启用缓冲。

如果有人可以在接下来的两天内纠正我或发布更好的答案，我会很乐意接受它作为答案。

# python - 使用 Numpy 进行逐行缩放

> ID：14639121
> 
> 赞同：3
> 
> 时间：2013-02-01T03:13:45.417
> 
> 标签：python, numpy

我有一个维度为 MxN 的数组 H 和一个维度为 M 的数组 A 。我想用数组 A 缩放 H 行。我这样做，利用 Numpy 的元素行为

```
H = numpy.swapaxes(H, 0, 1)
H /= A
H = numpy.swapaxes(H, 0, 1) 
```

它可以工作，但是这两个 swapaxes 操作不是很优雅，我觉得有一种更优雅和简洁的方式来实现结果，而无需创建临时对象。你能告诉我怎么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:22:23.913

我认为您可以简单地使用`H/A[:,None]`：

```
In [71]: (H.swapaxes(0, 1) / A).swapaxes(0, 1)
Out[71]: 
array([[  8.91065496e-01,  -1.30548362e-01,   1.70357901e+00],
       [  5.06027691e-02,   3.59913305e-01,  -4.27484490e-03],
       [  4.72868136e-01,   2.04351398e+00,   2.67527572e+00],
       [  7.87239835e+00,  -2.13484271e+02,  -2.44764975e+02]])

In [72]: H/A[:,None]
Out[72]: 
array([[  8.91065496e-01,  -1.30548362e-01,   1.70357901e+00],
       [  5.06027691e-02,   3.59913305e-01,  -4.27484490e-03],
       [  4.72868136e-01,   2.04351398e+00,   2.67527572e+00],
       [  7.87239835e+00,  -2.13484271e+02,  -2.44764975e+02]]) 
```

因为`None`（或）在维度上`newaxis`扩展[（示例链接）](http://www.scipy.org/Numpy_Example_List#newaxis)：`A`

```
In [73]: A
Out[73]: array([ 1.1845468 ,  1.30376536, -0.44912446,  0.04675434])

In [74]: A[:,None]
Out[74]: 
array([[ 1.1845468 ],
       [ 1.30376536],
       [-0.44912446],
       [ 0.04675434]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T03:22:08.880

你只需要重塑`A`，以便它能够正确地广泛投射：

```
A = A.reshape((-1, 1)) 
```

所以：

```
In [21]: M
Out[21]: 
array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14],
       [15, 16, 17],
       [18, 19, 20]])

In [22]: A
Out[22]: array([1, 2, 3, 4, 5, 6, 7])

In [23]: M / A.reshape((-1, 1))
Out[23]: 
array([[0, 1, 2],
       [1, 2, 2],
       [2, 2, 2],
       [2, 2, 2],
       [2, 2, 2],
       [2, 2, 2],
       [2, 2, 2]]) 
```

# bash - 使用详细和 xtrace (set -vx) 记录 bash 脚本并自定义 PS4

> ID：14639125
> 
> 赞同：4
> 
> 时间：2013-02-01T03:14:28.410
> 
> 标签：bash, debugging, shell

当我还为详细模式设置了详细时，我正在尝试配置 PS4 以获得更好的 xtrace 输出。我想做的几件事会产生子shell，但我想查看这些操作的任何 -x 或 -v 输出，因为它们会为每一行打印。

我还想摆脱嵌套/间接深度级别指示器 (+)，因为我希望跟踪输出对齐。

我最初的想法是：

```
BACKSPACES=$'\b\b\b\b\b\b\b\b'
PS4='+`printf "%s[\t] %-16.16s:%03d (%-16.16s) $ " ${BACKSPACES:0:$BASH_SUBSHELL} $(basename $BASH_SOURCE) $LINENO ${FUNCNAME[0]:+${FUNCNAME[0]}}`' 
```

我遇到的第一个问题是 $BASH_SUBSHELL 似乎并不总是与要打印的 + 的数量相同。调查 $SHLVL 也无济于事。

```
echo $X
+ 0 2 $ echo x <-- toplevel prints one + and $BASH_SUBSHELL is 0, as expected
x

( echo subshell )
+ 1 2 $ echo subshell <-- $BASH_SUBSHELL increments to 1 as expected, but why only one + instead of two ++?

source ./test2.sh
+ 0 2 $ source ./test2.sh
echo $X$X$X$X
++ 0 2 $ echo xxxx <-- ??? is $BASH_SUBSHELL relative to the current file or something but the + indicators are not???
xxxx
subshell 
```

我想我已经通过忘记使用 $BASH_SUBSHELL 而是将 PS4 中的第一个字符设置为不可打印的字符来解决这个问题，但我仍然想知道为什么 $BASH_SUBSHELL 不是我所期望的。

为了解决在 PS4 中创建子 shell 的问题，我查看了与 PS1 的 PROMPT_COMMAND 等效的内容，但除了一些关于如何自己实现它的指示外，没有找到任何东西。

我认为我发现的最好方法是捕获 DEBUG 信号。

```
trap 'debugfun $BASH_SOURCE' DEBUG 
```

当然，-vx 选项也适用于对 debugfun 的调用。我抑制该输出的解决方案是将函数的步骤包含在 set +vx 和 set -vx 中。

```
debugfun() {
  set +vx
  VAR=`basename $1 .sh`
  set -vx
} 
```

现在......我不得不处理每个呼叫打印的问题：

```
debugfun $BASH_SOURCE <-- from -v
++ debugfun ./test.sh <-- from -x
++ set +vx <-- from -x 
```

我不确定为什么 -v 也不会在“set +vx”行上打印。我认为 -T 选项可能会这样做，但事实并非如此。

无论如何，我认为输出总是一致的，所以我所要做的就是从 debugfun 中删除这 3 行。我丑陋的解决方案是在“set +vx”之后添加这一行：

```
printf "\b\r\033[K\b\r\033[K\b\r\033[K" # clear previous 3 lines 
```

有效！

...除非我不止一次管道。

我将删除 printf 行以说明原因：

```
echo $X$X | sed 's/x/y/' # pipe once... debugfun is called every time before each pipe component
debugfun $BASH_SOURCE
++ debugfun ./test.sh
++ set +vx
debugfun $BASH_SOURCE
++ debugfun ./test.sh
++ set +vx
+ echo xx
+ sed s/x/y/

echo $X$X$X | sed 's/x/y/' | sed 's/y/x/' # pipe twice 
debugfun $BASH_SOURCE
++ debugfun ./test.sh
++ set +vx
debugfun $BASH_SOURCE
++ debugfun ./test.sh
++ set +vx
+ echo xxx 
+ sed s/x/y/ # because this line is here, clearing 3 previous lines from the next "set +vx" would clear it
debugfun $BASH_SOURCE
++ debugfun ./test.sh
++ set +vx
+ sed s/y/x/
xxx 
```

最后，我确实提出了这个解决方案，但我认为它真的很难看，而且虽然很接近，但并不是我想要的：

```
SPACES="                        "
PS4='^@\[\e[31m\]+ [\t] \
${SPACES:0:$((${#BASH_SOURCE} > 24 ? 0 : 24 - ${#BASH_SOURCE}))}${BASH_SOURCE:$((${#BASH_SOURCE} < 24 ? 0 : -24))}:\
${SPACES:0:$((3-${#LINENO}))}$LINENO \
${FUNCNAME:-${SPACES:0:20}}${FUNCNAME:+${SPACES:0:$((20 - ${#FUNCNAME}))}} \
$ \[\e[0m\]' 
```

我不喜欢的主要事情是我不能嵌套 bash 字符串操作，不仅可以反向截断 $BASH_SOURCE，还可以在没有子 shell 的情况下获取它的基本名称（即与 echo ${BASH_SOURCE##*/} 结合）

我没有想法，希望对如何完成我正在尝试做的事情进行澄清和提示。

```
GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:12:27.207

我建议放弃 PS4 并在调试陷阱中执行所有跟踪输出。大多数（如果不是全部）信息 -x 打印在其他地方可用。请参阅 BASH_SOURCE、BASH_LINENO、FUNCNAME 和 BASH_COMMAND。

像这样：

```
function trace()
{
    echo "TRACE" \
         "${BASH_SOURCE[1]}:${BASH_LINENO[0]}:${FUNCNAME[1]}:" \
         "$BASH_COMMAND"
}

set -o functrace
shopt -s extdebug
trap trace DEBUG 
```

# android - 我使用 Display.getsize(point) 方法并出现错误：没有这样的方法错误

> ID：14639128
> 
> 赞同：0
> 
> 时间：2013-02-01T03:14:39.500
> 
> 标签：android, nosuchmethoderror

我写了一个fragment的demo，在android 3.0下，该方法`getWidth()`和`getHeigh()`已弃用。我读了api，发现这`getSize(point)`两种方法是一样的，所以我试试。

```
 Display d = wm.getDefaultDisplay();
  int width=0;
  int height=0;
  Point point = new Point(width,height);
  d.getRealSize(point); 
```

但是当我运行应用程序时，出现错误，有没有人发现这样的问题？：

```
02-01 03:13:06.548: E/AndroidRuntime(558): FATAL EXCEPTION: main
02-01 03:13:06.548: E/AndroidRuntime(558): java.lang.NoSuchMethodError: android.view.Display.getRealSize
02-01 03:13:06.548: E/AndroidRuntime(558):  at com.demo.fragment.FragmentDemoActivity.onCreate(FragmentDemoActivity.java:33)
02-01 03:13:06.548: E/AndroidRuntime(558):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
02-01 03:13:06.548: E/AndroidRuntime(558):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:19:30.813

[Display.getRealSize()](http://developer.android.com/reference/android/view/Display.html#getRealSize%28android.graphics.Point%29)方法是在 Android 4.2 的 API 17 中添加的。如果您尝试在低于此的设备上使用它，您将收到 NoSuchMethodException，因为该方法不存在。

[Display.getSize()](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)是在 Android 3.2 的 API 13 中添加的。您想在 Android 3.0（即 API 11）上使用该应用程序。

因此，对于较旧的设备，甚至是当前设备（我还没有听说过实际从 Android 中删除的已弃用方法），您应该使用[getWidth()](http://developer.android.com/reference/android/view/Display.html#getWidth%28%29)和[getHeight()](http://developer.android.com/reference/android/view/Display.html#getHeight%28%29)。

或者您可以在 if else 语句中运行代码，例如：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.JELLY_BEAN_MR1){
    //Do something for API 17 only (4.2)
    //getRealSize()
}
else if (currentapiVersion >= android.os.Build.VERSION_CODES.HONEYCOMB_MR2){
    // Do something for API 13 and above , but below API 17 (API 17 will trigger the above block
    //getSize()
} else{
    // do something for phones running an SDK before Android 3.2 (API 13)
    //getWidth(), getHeight()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T09:23:02.590

将此代码用于旧版本和新版本。

```
private static Point getDisplaySize(final Display display) {

final Point size= new Point();
try {
    display.getSize(size); /// will support new versions
} catch (java.lang.NoSuchMethodError ignore) { // Older versions
    size.x = display.getWidth();
    size.y = display.getHeight();
}
return size; 
```

}

# git - 在本地设置 Git 以与 Intellij Idea 12 一起使用

> ID：14639129
> 
> 赞同：1
> 
> 时间：2013-02-01T03:14:48.547
> 
> 标签：git, intellij-idea

我整晚都在这，但似乎没有任何工作。

这是我想要做的：

我在 IntelliJ Idea 12 中有一个项目，我想与 Git 一起使用。我想在本地使用 git 供我个人使用。

我已经安装了 git 并将其设置为我在 IntelliJ 中的 VCS。但是，我实际上无法推送任何内容，因为 Intellij 说没有远程设置。在 git bash 中，我在别处设置了一个“远程”文件夹，并将该文件夹命名为“Project.git”。

然后我导航回我的 intelliJ 项目并使用以下命令：

```
git remote add origin C:\Users\Me\RemoteFolder.git 
```

没有错误。

然后我推送并收到以下错误：

```
fatal: 'C:UsersMeRemoteFolder.git' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

有人可以告诉我有什么问题吗？或者只是给我一个使用 Intellij 在本地设置 Git 的简单指南？我已经尝试过他们的文档和大约 100 次谷歌搜索，但似乎永远找不到我的问题的答案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:12:26.433

首先，您需要创建一个**[裸仓库](http://sitaramc.github.com/concepts/bare.html)**( `git init --bare C:\Users\Me\RemoteFolder.git`) 以便推送到它。

其次，您需要声明 remote 考虑到反斜杠 ( `\`) 没有得到很好的支持这一事实。[这应该会更好](https://stackoverflow.com/a/9104446/6309)：

```
git remote add /C/Users/Me/RemoteFolder.git
# or even
git remote add C:/Users/Me/RemoteFolder.git 
```

# jquery - 如何在jquery中循环json数据

> ID：14639130
> 
> 赞同：-2
> 
> 时间：2013-02-01T03:15:07.550
> 
> 标签：jquery, json

我的 JSON 数据就像

```
{
    "Brand":["EM-03","TORRES"],
    "Price":["5.00000","10.00000","15.00000"],
    "Country":["US","SG"]
} 
```

我想循环该 JSON 数据以获取

```
Brand = 
  EM-03 -
  TORRES

Price = 
  5.00000 -
  10.00000 -
  15.00000

Country = US - SG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:19:12.260

和[`$.each`](http://api.jquery.com/jQuery.each/)

```
$.each(data, function(key, value){
   console.log(value); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:26:42.387

尝试这个

```
$.each(data, function(key, value){
   console.log(value.join('-')); 
}); 
```

# debian - Debian 使用 compiz 时只显示空白桌面

> ID：14639133
> 
> 赞同：1
> 
> 时间：2013-02-01T03:15:23.917
> 
> 标签：debian, desktop, compiz

我在 Windows 8 主机上的 virtualbox 上有一个 Debian（挤压）来宾。我给了它 128 MB 视频内存（vb 允许的最大值）和 3 GB RAM。我正在尝试在它上面运行 Compiz，但是每次我从 GNOME 切换到 Compiz 时，我的鼠标、图标、顶部栏和底部栏都消失了，我只剩下一个空白桌面。我已经为基于 GNOME 的 compiz 安装了所有东西，按照 Debian wiki 的指南安装它，并编辑了所有必要的文件以使其工作。我尝试启用窗户装饰，这应该可以修复窗户，但没有奏效。我究竟做错了什么？我有 1200 MB 视频内存，并且启用了 3D 加速（vb 不允许在非 Windows 客户机上进行 2D 加速），但是英特尔集成显卡是否太糟糕而无法运行 Compiz，或者它不会在基于虚拟机的 Debian 上运行?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T02:02:48.013

我还在使用 debian 挤压的 Windows 8 中运行 VirtualBox。这是我的第一次运行，所以我仍在使用`twm`窗口管理器。我得到了和你一样的东西——一个空白的桌面。我唯一能看到任何东西的是当我按住鼠标左键时（twm 很丑！）。当我退出`X`服务器时，我收到以下错误消息：

> 启动 VirtualBox Additions：
> 错误：VbgIR3Init 失败，rc=VERR_FILE_NOT_FOUND 失败！
> (EE) VBoxVideo(0)：无法使用 VirtualBox 设备进行初始化 (rc=-102)
> - 确保正确安装了 VirtualBox 来宾添加。
> 如果您不确定，请尝试重新安装它们。X 窗口图形驱动程序将以兼容模式运行
> 致命：找不到模块 vboxVideo
> (EE) VBoxVideo(0)：DRIScreenInit 失败，禁用 DRI
> SELinux：在系统上禁用，在 X 服务器中未启用

尝试进入文本模式并注意显示的内容。如果您`DRI`像我一样禁用了，那么它将解释空白桌面，因为硬件加速 `OpenGL`依赖于[DRI（直接渲染基础架构） ：](http://en.wikipedia.org/wiki/Direct_Rendering_infrastructure)

> DRI 还适用于在没有运行 X 服务器的情况下在帧缓冲区控制台上提供 OpenGL 加速。

并来自[Compiz](http://en.wikipedia.org/wiki/Compiz)文章：

> Compiz 内部使用 OpenGL 库作为图形硬件的接口

# java - 播放框架scala获取连接表属性

> ID：14639137
> 
> 赞同：1
> 
> 时间：2013-02-01T03:16:09.857
> 
> 标签：java, scala, playframework, ebean

我正在使用带有 Ebean 的 Play 框架。我有两个模型，下面是代码：

```
public class User extends Model {
    @Id 
    public Long id;

    public String name;
   /* rest of attributes */

    public static Finder<Long,User> find = new Finder<Long,User>(
          Long.class, User.class
    );
}

public class Admin extends Model {
    @Id 
    public Long id;

    @OneToOne
    public User user;
    /* rest of attributes */

    public static Finder<Long,Admin> find = new Finder<Long,Admin>(
        Long.class, Admin.class
    );
} 
```

当我`Logger.info(admin.user.name)`使用 Java 时，我可以看到管理员的名字。但是当我使用视图渲染将 Java 对象传递给 Scala 时，如果这样做`@admin.user.id`，我仍然可以获得 id，但如果这样做`@admin.user.name`，我什么也得不到（没有错误）。我只是想知道如何从连接表中访问名称属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:35:57.857

问题解决了。在我进行抓取之前，我做了

```
Admin.find.where()
    .ilike("user.name", "%" + filter + "%")        
    .orderBy("user."+sortBy + " " + order)
    .findPagingList(pageSize)
    .getPage(page); 
```

改成之后

```
Admin.find.fetch("user", new FetchConfig().query())
    .where()
    .ilike("user.name", "%" + filter + "%")        
    .orderBy("user."+sortBy + " " + order)
    .findPagingList(pageSize)
    .getPage(page); 
```

它成功地在 Scala 上显示了实例变量。

# c# - 如何从单元测试中引用 VS 2012 可移植类库？

> ID：14639138
> 
> 赞同：6
> 
> 时间：2013-02-01T03:16:13.753
> 
> 标签：c#, unit-testing, visual-studio-2012, portable-class-library

我在 VS 2012 中从旧项目的来源创建了一个可移植的 C# 类库，但是如果我尝试在针对 .NET 4.0 的单元测试库中添加对新库的引用，它会说：

无法添加对项目“（便携式项目名称）”的引用。当前项目的目标框架不是可移植库项目“（可移植项目名称）”的目标框架之一或不兼容。

如何测试可移植库？

谢谢。

-约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:48:09.487

通常，当可移植库选择的配置文件与为引用它的项目选择的目标平台不匹配时，就会发生这种情况。您的 PCL 面向哪些平台？请注意，如果您以 .NET 4.0.3 而非 .NET 4 为目标，则可以从以 .NET 4.0 为目标的项目中引用它。

# magento - Magento - 扩展 product.info.addtocart 以添加新的“添加到购物车按钮”

> ID：14639140
> 
> 赞同：1
> 
> 时间：2013-02-01T03:16:24.000
> 
> 标签：magento

我想添加一个新的添加到购物车按钮，就像贝宝快速结帐按钮一样。

我设法通过“product.info.extrahint”将插件插入表单，但问题是，当您在 catalog.xml 中使用它时，它会将您的按钮放在“qty”和“addtocart”按钮的上方。我想要做的是将它添加到catalog.xml中“product.info.addtocart”的末尾

（来自目录.xml）

```
 <block type="catalog/product_view" name="product.info.addto" as="addto" template="catalog/product/view/addto.phtml"/>
 <block type="catalog/product_view" name="product.info.addtocart" as="addtocart" template="catalog/product/view/addtocart.phtml"/>
 <block type="catalog/product_view" name="product.info.extra_buttons" as="extra_buttons" template="mycustomexpresscheckout/pay.phtml" /> 
```

添加使按钮出现在正确的位置，但这不是贝宝快递按钮的完成方式。对于 paypal express，按钮被添加到“addtocart”块中。事实上，如果我删除该块，我原来的添加到购物车和 paypalexpress 结帐按钮都消失了。

这是原文： http: [//www.bounceapp.com/86522](http://www.bounceapp.com/86522)

这是我的修改后的：http `catalog.xml`: [//www.bounceapp.com/86523](http://www.bounceapp.com/86523)

任何人都可以提供帮助或指出正确的方向吗？

Magento 1.6 - 默认模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:05:10.490

您可以在**product.info.addtocart**中包含块**product.info.extra_buttons**作为

 **```
<block type="catalog/product_view" name="product.info.addto" as="addto" template="catalog/product/view/addto.phtml"/>
     <block type="catalog/product_view" name="product.info.addtocart" as="addtocart" template="catalog/product/view/addtocart.phtml">
     <block type="catalog/product_view" name="product.info.extra_buttons" as="extra_buttons" template="mycustomexpresscheckout/pay.phtml" />
</block> 
```

之后，您需要将子块（**product.info.extra_buttons）**称为`addtocart.phtml``$this->getChildHtml('extra_buttons');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T09:50:02.070

在您的`local.xml`, 在`<catalog_product_view>`节点下只需放置此代码，它应该可以工作：

```
<reference name="product.info.addtocart">
    <block type="catalog/product_view" name="product.info.extra_buttons" as="extra_buttons" template="mycustomexpresscheckout/pay.phtml" />
</reference> 
```

对我来说，它无需添加即可`getChildHtml('extra_buttons')`工作`addtocart.phtml`。希望对您有用...**

# c# - 创建一个可以从命令行调用或引用的应用程序我如何设置调用

> ID：14639143
> 
> 赞同：0
> 
> 时间：2013-02-01T03:16:32.020
> 
> 标签：c#

我需要在 C# 中创建一个桌面应用程序，该应用程序在加载时需要一组特定的参数，可以通过旧 VB6 应用程序的命令行（或直接引用？）或作为 vb.net 应用程序的引用。

我需要名称、城市、州、邮编和其他一些参数。我还不确定我还需要什么。我知道我需要一些非常基本的帐户信息才能传入。

接受这些参数的最佳方式是什么，可以从任一应用程序调用它们？

我开始创建一个包含所需参数的类，但我不确定 VB6 应用程序是否可以将 exe 作为 dll 引用并将其传递回类。我没有从 vb6 调用 .net 应用程序，所以我不知道要求，也没有安装 vb6。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:24:37.727

编写一个 DLL/库。然后编写一个带有参数的 EXE，并像其他代码一样引用该 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:20:20.843

这可能会有所帮助，命令行参数教程 [http://msdn.microsoft.com/en-us/library/aa288457(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

# linux - 这些导出变量的默认值是什么？

> ID：14639149
> 
> 赞同：0
> 
> 时间：2013-02-01T03:17:15.340
> 
> 标签：linux, sprof

我尝试使用以下步骤设置 sprof（遵循此[http://greg-n-blog.blogspot.com/2010/01/profiling-shared-library-on-linux-using.html ）。](http://greg-n-blog.blogspot.com/2010/01/profiling-shared-library-on-linux-using.html)现在我的程序将无法运行。我需要执行哪些步骤才能撤消以下操作？

2) 导出 LD_PROFILE_OUTPUT= `pwd`
3) 导出 LD_PROFILE=libmylib.so
4) rm -f $LD_PROFILE.profile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:12:30.400

据我所知，**这些步骤与您的程序无关**。

但是，您可以重新导出变量以撤消更改，如下所示：

```
export LD_PROFILE_OUTPUT=
export LD_PROFILE= 
```

但您无法重新创建之前删除的配置文件

> rm -f $LD_PROFILE.profile

确保将*libmylib.so*替换为您的库名称。

# sql-server-2008 - 在使用期间锁定 SQL Server 2008 数据库

> ID：14639150
> 
> 赞同：0
> 
> 时间：2013-02-01T03:17:17.660
> 
> 标签：sql-server-2008, locking

我有一个作为服务运行的文档处理应用程序，可以配置为使用本地或网络数据库。只要服务正在运行，有没有办法确保数据库保持锁定状态？锁定的意思是，如果不先关闭服务，用户就不能删除或撤销对数据库的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:25:35.717

这是非常不寻常的情况。我从来没有这样做过。

不过，我认为这是可能的。您需要做的是创建 SQL Server 的第二个实例并用于后台处理。

在处理开始之前，您需要将数据库与主实例分离并将其附加到后台。在数据库与主实例分离并附加到后台时，在后台实例上执行所有处理。

完成后，将数据库重新附加到主实例。

分离和附加可以通过事务 SQL 轻松完成。阅读这篇 MSDN[文章](http://msdn.microsoft.com/en-us/library/ms190794.aspx)

# hibernate - 没有这样的属性：INTEGER 类：grails.orm.HibernateCriteriaBuilder

> ID：14639151
> 
> 赞同：1
> 
> 时间：2013-02-01T03:17:22.623
> 
> 标签：hibernate, grails, grails-orm, hibernate-criteria

查询组成如下：

```
def subQuery = {
    ge("date", fromDate)
}

def query = {
    projections {
        sqlProjection 'sum(hoursBefore+hoursAfter) as totalHours', 'totalHours', INTEGER
    }
    and subQuery
} 
```

然后执行如下：

```
def results = WorkLog.createCriteria().get(query) 
```

我得到错误：

> 没有这样的属性：INTEGER 类：grails.orm.HibernateCriteriaBuilder

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:40:28.527

我遇到了与我设置尝试此操作的新项目相同的错误。由于某种奇怪的原因，无法用这种方法修复错误。这可能是 Hibernate 版本问题或 grails 不支持该语法。

这是在测试中有效的解决方法：

```
def results = WorkLog.createCriteria().list {
        projections {
            addProjectionToList(Projections.sqlProjection(
                'sum(hours_before+hours_after) as totalHours', ["totalHours"].toArray(new String[1]), [Hibernate.INTEGER].toArray(new org.hibernate.type.Type[1])
                ),'sum')
        }
        and subQuery
    } 
```

# assembly - Binary Bomb Phase 5 - 查找表翻译 -> 字符串比较

> ID：14639155
> 
> 赞同：0
> 
> 时间：2013-02-01T03:17:46.833
> 
> 标签：assembly, x86, reverse-engineering

我一直在为学校研究二进制炸弹，在第 5 阶段我完全迷失了。任务的目的是分解代码并找到一个字符串，我发现它是“传单”并对其进行逆向工程与“传单”相同的数值。但是，我花了过去 3-4 个小时试图找出如何做到这一点？您不必给出答案，但请帮助我了解我需要做什么。这是使用 gdb 的反汇编代码：

```
Dump of assembler code for function phase_5:
0x08048d88 <+0>:    push   %ebx
0x08048d89 <+1>:    sub    $0x28,%esp
0x08048d8c <+4>:    mov    0x30(%esp),%ebx
0x08048d90 <+8>:    mov    %gs:0x14,%eax
0x08048d96 <+14>:    mov    %eax,0x1c(%esp)
0x08048d9a <+18>:    xor    %eax,%eax
0x08048d9c <+20>:    mov    %ebx,(%esp)
0x08048d9f <+23>:    call   0x804902b <string_length>
0x08048da4 <+28>:    cmp    $0x6,%eax
0x08048da7 <+31>:    je     0x8048dae <phase_5+38>
0x08048da9 <+33>:    call   0x804934c <explode_bomb>
0x08048dae <+38>:    mov    $0x0,%eax
0x08048db3 <+43>:    movsbl (%ebx,%eax,1),%edx
0x08048db7 <+47>:    and    $0xf,%edx
0x08048dba <+50>:    movzbl 0x804a4b8(%edx),%edx
0x08048dc1 <+57>:    mov    %dl,0x15(%esp,%eax,1)
0x08048dc5 <+61>:    add    $0x1,%eax
0x08048dc8 <+64>:    cmp    $0x6,%eax
0x08048dcb <+67>:    jne    0x8048db3 <phase_5+43>
0x08048dcd <+69>:    movb   $0x0,0x1b(%esp)
0x08048dd2 <+74>:    movl   $0x804a48e,0x4(%esp)
0x08048dda <+82>:    lea    0x15(%esp),%eax
0x08048dde <+86>:    mov    %eax,(%esp)
0x08048de1 <+89>:    call   0x8049044 <strings_not_equal>
0x08048de6 <+94>:    test   %eax,%eax
0x08048de8 <+96>:    je     0x8048def <phase_5+103>
0x08048dea <+98>:    call   0x804934c <explode_bomb>
0x08048def <+103>:    mov    0x1c(%esp),%eax
0x08048df3 <+107>:    xor    %gs:0x14,%eax
0x08048dfa <+114>:    je     0x8048e05 <phase_5+125>
0x08048dfc <+116>:    lea    0x0(%esi,%eiz,1),%esi
0x08048e00 <+120>:    call   0x8048810 <__stack_chk_fail@plt>
0x08048e05 <+125>:    add    $0x28,%esp
0x08048e08 <+128>:    pop    %ebx
0x08048e09 <+129>:    ret    
End of assembler dump. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:08:43.777

不太清楚是什么`flyers`，我认为这是一个正确的输入，您必须找到其他输入。

重要的部分是`<+47>`和`<+50>`。它使用 16 字节的查找表来转换输入字符串。代码基本上是在做：

```
for(int i = 0; i != 6; i += 1) output[i] = table[input[i] & 0xf]; 
```

很明显，任何共享低 4 位的字符都会产生相同的输出（即使查找表中的值是唯一的）。例如，第一个字符`f`的 ascii 代码为 0x66，因此它由表条目 0x06 映射。这同样适用于任何以 0x06 为低 4 位的字符，例如`&`(0x26)、`6`(0x36)、`F`(0x46)、`V`(0x56)、`v`(0x76)。您可以替换`f`为其中任何一个（为简洁起见，省略了不可打印和完整的 8 位值）。您可以类似地计算出其他字母的等价物。

如果`flyers`相反是所需的输出，那么您必须检查查找表在地址处的内容，`0x804a4b8`并为输入字符串提供映射到预期输出的正确字母。

# c# - 排序列表 > 按长度升序排列

> ID：14639158
> 
> 赞同：10
> 
> 时间：2013-02-01T03:19:11.357
> 
> 标签：c#

我可以知道如何按升序`List<List<string>>`的长度排序吗？`List<string>`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T03:20:19.747

`var result = list.OrderBy(x => x.Length)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T03:23:55.007

看看[List<T>.Sort 方法](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)：

```
listOfListOfStrings.Sort((a, b) => a.Length.CompareTo(b.Length)); 
```

或者，您可以从 List<List<string>> 创建一个 IEnumerable<List<string>>，它在枚举时按排序顺序返回列表，但保持原始列表不变：

```
IEnumerable<List<string>> result = listOfListOfStrings.OrderBy(x => x.Length); 
```

# java - Applet AccessControlException 访问被拒绝

> ID：14639160
> 
> 赞同：0
> 
> 时间：2013-02-01T03:19:19.577
> 
> 标签：java, security, applet, accesscontrolexception, jlayer

我正在尝试引用 JLayer。

```
<applet
code="AppStart.class"
height="480"
width="640"
archive="jl1.0.jar, AnApplet.jar"
</applet> 
```

我不断在控制台上收到此错误

```
Exception in thread "pool-1-thread-1" java.security.AccessControlException: 
  access denied ("java.lang.RuntimePermission" "modifyThreadGroup")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at sun.plugin2.applet.SecurityManagerHelper.checkAccessHelper(Unknown Source)
at sun.plugin2.applet.AWTAppletSecurityManager.checkAccess(Unknown Source)
at java.lang.ThreadGroup.checkAccess(Unknown Source)
at java.lang.Thread.init(Unknown Source)
at java.lang.Thread.<init>(Unknown Source)
at java.util.concurrent.Executors$DefaultThreadFactory.newThread(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.<init>(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.addWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.processWorkerExit(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

有什么帮助吗？

这是我第一次使用引用的 jar。我的其他小程序工作正常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T05:47:16.817

引用的 jar 未签名，它正在尝试创建一个线程，这在 applet 中的未签名 jar 中是不允许的。

签字。

# linux - windows vs linux std::getline 字符串

> ID：14639163
> 
> 赞同：0
> 
> 时间：2013-02-01T03:19:33.547
> 
> 标签：linux, xml-parsing, g++, getline

我有一个 xml 文件，我想从中提取一些特定字段

样本测试文件

```
<ScheduleTask ID="ZmwnBtczlnYOBLyK" Code="000-000.0.0.0" Name="SETTLEMENT.BRIDGE" ParentSummaryTaskID="">
    <Quantities>
        <STQuantity MethodID="416" RecipeID=""/>
    </Quantities>
    <Timings>
        <Timing LocationID="$$$$$&gt;C1&gt;NB" CompletionRate="1">
            <Planned Begin="2012-03-08T07:14:57" End="2012-03-28T07:14:57"/>
            <Actual Begin="2012-03-31T06:00:00" End="2012-05-01T14:00:00"/>
        </Timing>
        <Timing LocationID="$$$$$&gt;C1&gt;SB" CompletionRate="0">
            <Planned Begin="2012-12-04T06:07:29" End="2012-12-24T06:07:29"/>
            <Forecast Begin="2013-04-18T09:16:37" End="2013-06-04T12:06:02"/>
        </Timing>
    </Timings>
    </ScheduleTask> 
```

所以，我有这个函数用 /ScheduleTask 寻找一行（包括 <）

```
//xml file into ontology
list<stack<string> > addWordsFromFile(string filename, int changeLevel)
{
    ifstream ontology;
    ontology.open(filename.c_str()); 
string ontTemp, line;

list<stack<string> > control_list;

while (true) {
    getline(ontology, line); //read line
    if (ontology.fail()) break; //boilerplate check for error
    line.erase(remove(line.begin(), line.end(), '\t'), line.end()); //remove tabs

    if(line == "</ScheduleTasks>") break; //check for end of document

        if(line == "</ScheduleTask>") {
        ontTemp.clear(); //clear memory
    }

    //look for activity
    if(line.substr(1, 15) == "ScheduleTask ID") {
        int i = 41;
        while (line[++i] != '"') {ontTemp += line[i]; }
    }

    if (ontTemp != "" ) {//ready to add
        stack<string> tempMem;

        tempMem.push(ontTemp);

        control_list.push_back(tempMem);
    }
}
ontology.close();
return control_list;
} 
```

在 Windows 中，这个函数可以正常工作并且`/ScheduleTask`被找到 - 在 Linux 中它没有找到，尽管其他字段被发现就好了`if(line.substr(1, 15) == "ScheduleTask ID")`

使用 VisualStudio 2008 和 g++ 编译

我的问题：1）为什么这在 Linux 中不起作用和 2）它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:52:23.620

这归结为行尾的定义。Windows EOL 是`\r\n`，而 Linux EOL 是`\n`. 所以这条线

```
</ScheduleTask>\r\n 
```

`getline`从作为回来

`</ScheduleTask>`在 Windows 上，但`</ScheduleTask>\r`在 Linux 上。

# c - 循环在第一次之后跳过一个 scanf 语句

> ID：14639166
> 
> 赞同：3
> 
> 时间：2013-02-01T03:19:46.777
> 
> 标签：c, loops, for-loop, scanf

这是 main() 的代码：

```
int main (void)
{
float acres[20];
float bushels[20];
float cost = 0;
float pricePerBushel = 0;
float totalAcres = 0;
char choice;
int counter = 0;

for(counter = 0; counter < 20; counter++)
{   
    printf("would you like to enter another farm? "); 

    scanf("%c", &choice);

    if (choice == 'n')
    {
        printf("in break ");
        break;
    }

    printf("enter the number of acres: ");
    scanf("%f", &acres[counter]);

    printf("enter the number of bushels: ");
    scanf("%f", &bushels[counter]);

}

return 0;
} 
```

每次程序运行第一次 scanf 工作正常，但在第二次通过循环时， scanf 输入字符不会运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:28:43.760

`%c`在in之前添加一个空格`scanf`。这将允许`scanf`在阅读之前跳过任意数量的空格`choice`。

`scanf(" %c", &choice);`是唯一需要的更改。

添加`fflush(stdin);`之前`scanf("%c", &choice);`也将起作用。`fflush`call 将在通过 scanf 读取下一个输入之前刷新输入缓冲区的内容。

`scanf(" %c", &choice);`即使输入读取缓冲区中只有一个字符，也会`scanf`将此字符解释为有效的用户输入并继续执行。错误使用 scanf 可能会导致一系列奇怪的错误[比如在循环中使用时出现无限循环`while`]。

# oracle - comp_cd > to_char('0000000000','9999999999')

> ID：14639167
> 
> 赞同：0
> 
> 时间：2013-02-01T03:19:50.143
> 
> 标签：oracle, plsql

我遇到了一条 SQL 语句，其中一个条件是`comp_cd > to_char('0000000000','9999999999')`.

运行`select to_char('0000000000','9999999999') from dual`我得到结果“0”。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:30:19.030

该函数`TO_CHAR`需要一个 NUMBER 或 DATE 作为它的第一个参数，但您提供的是一个字符串 ( `'0000000000'`) 。

因此，Oracle 使用隐式转换先将其转换为 NUMBER；`'0000000000'`转换为数字`0`。

然后，TO_CHAR使用格式模型转换`0`回字符串。`'9999999999'`这应该导致字符串：

```
'          0' 
```

最后：

```
comp_cd > '          0' 
```

将在两个字符串之间进行词汇（字母）比较。

# arrays - 将数组值复制到非活动工作表中的范围以生成图表

> ID：14639172
> 
> 赞同：0
> 
> 时间：2013-02-01T03:19:56.577
> 
> 标签：arrays, excel, charts, range, vba

出于某种原因，我的代码可以编译，但它不会在图表生成的工作表 ArrayData 中插入任何内容......我所说的这一部分是在代码末尾带有 For/If 循环......

由于有很多值，并且 excel 的系列输入的字符限制为 255，我将这些值放在未使用的工作表中......但是当代码写入时它们没有显示......

```
 Private Sub cmdGraphs_Click()

    '*************************************************************************************'
    'The Code below is only for the Graphing Parameter inputs                             '
    '*************************************************************************************'
    Static Counter As Integer
    'Variable to keep track of the amount of graphs generated

    Dim graphName As String
    graphName = form2.textName.Text

    Dim slot As Integer, sheet As String
    'Verify that an item was selected
    If listSlot.ListIndex = -1 Then
    'If ListIndex is -1, nothing selected
        MsgBox "Select a slot number!"
    Else
             'If ListIndex not -1 inform user what was selected
        MsgBox "You selected: " & listSlot.Value
        'As a reference to the selected value
        slot = listSlot.Value
    End If

    If listSheet.ListIndex = -1 Then
        MsgBox "Select a Sheet"
    Else
        MsgBox "You selected: " & listSheet.Value
        sheet = listSheet.Value
    End If

    '*************************************************************************************'
    'The Code below is for setting up the table where the first graphs will be            '
    '*************************************************************************************'

    'Selects sheet for graphic puposes
    Sheets("Sheet2").Select
    Sheets("Sheet2").Cells(2, 1).Select

    'Begin Plotting Table Data
    Dim rang As Range
    Set rang = Range("A3")

    If Counter <> 0 Then
        rang.Offset(Counter, 0) = graphName
        rang.Offset(Counter, 1).Value = sheet
        rang.Offset(Counter, 2).Value = slot
        rang.Offset(Counter, 3).Value = "Formula to be written"
        rang.Offset(Counter, 4).Value = "Formula to be written"
        rang.Offset(Counter, 5).Value = "Formula to be written"

    Else

        'Table Setup
        Sheets("Sheet2").Cells(1, 1).Value = "Current Sheet: " & ActiveSheet.Name
        Sheets("Sheet2").Range("A1:F2").Interior.ColorIndex = 15
        Sheets("Sheet2").Cells(1, 1).Font.Name = "Lucida Calligraphy"
        Sheets("Sheet2").Cells(1, 1).Font.Size = 16
        Sheets("Sheet2").Range("A1:F2").Font.Italic = True
        Sheets("Sheet2").Cells(2, 1).Value = "Graph Name"
        Sheets("Sheet2").Cells(2, 2).Value = "Data Sheet: " & sheet
        Sheets("Sheet2").Cells(2, 3).Value = "Slot No. "
        Sheets("Sheet2").Cells(2, 4).Value = "TW AVG "
        Sheets("Sheet2").Cells(2, 5).Value = "Sigma %"
        Sheets("Sheet2").Cells(2, 6).Value = "Angle"
        Sheets("Sheet2").Columns("A:G").AutoFit

        rang.Value = graphName
        rang.Offset(0, 1).Value = sheet
        rang.Offset(0, 2).Value = slot
        rang.Offset(0, 3).Value = "Formula to be written"
        rang.Offset(0, 4).Value = "Formula to be written"
        rang.Offset(0, 5).Value = "Formula to be written"

        'Adds a sheet for Array sorting due to 255 character limit
        Worksheets.Add(After:=Worksheets(1)).Name = "Array Data" & Counter
    End If

    Sheets("Sheet2").Columns("A:G").AutoFit

    '*************************************************************************************'
    'Search Algorithm for user defined Slot Number                                        '
    '*************************************************************************************'
    Dim slotRang As Range, slotArr() As Variant, i As Long
    Set slotRang = Range("P2", Range("P2").End(xlDown))
    slotArr = slotRang.Value

'This section is to  to search for the value the user selected which is slot and only 
'store the rows in this case into arrays and then to be parsed into another worksheet for 
'another code to be added to generate a graph

    For i = 2 To UBound(slotArr, 1)
        If slotArr(i, 1) = slot Then
            MsgBox ("In the Array Loop")
            Dim xRang As Range, xArr2() As Variant
            Set xRang = slotRang.Offset(0, 4)
            xArr2 = xRang.Value
            Dim arrDatax As Range
            Dim arrDatay As Range
            Set arrDatax = Worksheets("ArrayData" & Count).Range("A1", Range("A1").End(xlDown))
            arrDatax.Value = Application.Transpose(arrDatax(i, 1))
            Dim yRang As Range, yArr() As Variant
            Set yRang = slotRang.Offset(0, 5)
            yArr = yRang.Value
            Set arrDatay = Worksheets("ArrayData" & Count).Range("B1", Range("B1").End(xlDown))
            arrDatay.Value = Application.Transpose(arrDatay(i, 1))
        End If
    Next

    textName.Value = ""
    Counter = Counter + 1

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:02:48.537

假设您的代码放置在 ThisWorkBook 模块或模块中，而不是表模块

您发布的代码的问题：案例`Counter = 0`

您将运行到代码部分：

`Worksheets.Add(After:=Worksheets(1)).Name = "Array Data" & Counter`

这是创建一个新的工作表

此工作表成为`ActiveSheet`

所以，你行： `Set slotRang = Range("P2", Range("P2").End(xlDown))`

P Range 将引用新工作表的范围 P，它是空的 --> 没有结果

如果您的代码在工作**表模块中**

您应该始终`Me`在范围前面添加以使其清楚

**范围属于哪个工作表**。例如`Me.Range("P1:P5")`

代替`Range("P1:P5")`

并且您应该使用**调试模式**来确定问题出在哪一行，并突出显示该行代码。

# c - 如何从系统调用中提取错误？

> ID：14639174
> 
> 赞同：0
> 
> 时间：2013-02-01T03:20:01.713
> 
> 标签：c, unix, system-calls

例如在手册页中它说：

```
The mmap() function shall fail if:

EACCES
The fildes argument is not open for read, regardless of the protection specified,        
fildes is not open for write and PROT_WRITE was specified for a MAP_SHARED type 
mapping. 
```

还有一堆其他的情况。我假设有一种方法可以检查发生了哪个错误，但是一小时的搜索一无所获。您如何检查是否发生了该特定错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:22:54.203

该错误值将保存在全局变量[`errno`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)中。您可以从[`perror(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/perror.3.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:30:38.663

如果你使用 C++，你也可以这样做

```
std::cerr << strerror(errno) << std::endl; 
```

更详细的信息可以从这里找到：

[perror() 的 C++ 替代方案](https://stackoverflow.com/questions/3320898/c-alternative-to-perror)

# java - 分数和 If 语句不起作用 Java

> ID：14639177
> 
> 赞同：0
> 
> 时间：2013-02-01T03:20:17.077
> 
> 标签：java, math

我正在做一个我今晚需要完成的程序，基本上它做了一个廉价版本的因式分解......问题是，它没有给我数字，而是 NaN。这是我的代码：

第 1 类（处理该程序的部分）：

```
 System.out.println("--------------------------------------------------");
        System.out.println("                   ~Factoring~");
        System.out.println("--------------------------------------------------");
        System.out.println("in a polynomial, there are 3 important numbers used");
        System.out.println("to figure out x. they are a, b, and c, shown below.\n");
        System.out.println("\t\t1x^2 +2x -3");
        System.out.println("\t\t^     ^   ^");
        System.out.println("\t\ta     b   c");
        System.out.print("\nPlease type a, b, and c here[a b c]: ");
        int a = input.nextInt();
        int b = input.nextInt();
        int c = input.nextInt();
        mathey factor = new mathey(a,b,c, chooser);
        System.out.print(factor.solvefact()); 
```

第 2 类：

```
 public class mathey
    {
        double a,b,c;

double solution1;
double solution2;
double discriminant;
double x1 = 0;
double x2 = 0;
  public mathey(int aN, int bN, int cN)
{
    a = aN;
    b = bN;
    c = cN;
    discriminant = (b*b)-4*a*c;
    solvea();
    solveb();
}
public String solvea()
{
    solution1 = (-1*b + Math.sqrt(discriminant))/(2*a);
    x1 = solution1;
    if(discriminant > 0) 
    { 
        return"x = " + solution1; 

    } 
    else if(discriminant == 0) 
    { 
        return "x =  " + solution1; 
    } 
    else 
    { 
        double root1complex = -b/(2*a); 
        double root1complex2 = Math.sqrt(-discriminant)/(2*a); 

        return root1complex + " + " + root1complex2 + " i "; 
    }
}
    public String solveb()
{
    solution2 = (-1*b - Math.sqrt(discriminant))/(2*a);
    x2 = solution2;
   if(discriminant > 0) 
    { 
        return"x = " + solution2; 

    } 
    else if(discriminant == 0) 
    { 
        return"x =  " + solution2; 
    } 
    else 
    { 
        double root1complex = -b/(2*a); 
        double root1complex2 = Math.sqrt(-discriminant)/(2*a); 

        return root1complex + " - " + root1complex2 + " i "; 
    }
}
public mathey(int aFact, int bFact ,int cFact, int chooser)
{
    a = aFact; b = bFact; c = cFact;
    discriminant = (b*b)-4*a*c;
    solvea();
    solveb();
    solvefact();
}
public String solvefact()
{
    String Answer = "";
    if((int)solution1 == solution1)
    {
         int wholeNum = (int)solution1/1;
         double numerator = (solution1%1) * 10;
         int denominator = 10;
         while(numerator > denominator) {
             denominator = denominator * 10;
            }   
         Answer+="("+denominator+"x + "+((denominator * wholeNum) + numerator)+")";

    }
    else
    {
        Answer +="( x + " +(solution1*-1) +")";

    }
    if((int)solution2 == solution2)
        {
            int wholeNum = (int)solution2/1;
            double numerator = (solution2%1) * 10;
            int denominator = 10;
            while(numerator > denominator) {
                denominator = denominator * 10;
            }   
            Answer+="("+denominator+"x + "+((denominator * wholeNum) + numerator)+")";

        }
        else
        {
          Answer +="( x + " +(solution2*-1) +")";  
        } 
    return Answer;
} 
```

这是输出：

```
 Choose a Way to Solve
    1\. Quadratic Formula
    2\. Factoring
    Which Method? [1/2]: 2
    --------------------------------------------------
                       ~Factoring~
    --------------------------------------------------
    in a polynomial, there are 3 important numbers used
    to figure out x. they are a, b, and c, shown below.

    1x^2 +2x -3
    ^     ^   ^
    a     b   c

    Please type a, b, and c here[a b c]: 1 2 -3
    (10x + 10.0)(10x + -30.0) 
```

我该如何解决这个问题，所以我得到了我应该得到的输出？(x + 3.0)(x-1.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:52:44.370

在您的 4 参数构造函数`Mathey()`（这是您正在调用的构造函数）中，您正在重新声明变量`a, b, c`并分配传递给它们的值，屏蔽保持等于 0（默认值）的实例变量。这些局部变量仅在构造函数的范围内。在`solveA()`and`solveB()`中，`a, b, c`再次引用实例变量（全为 0），因此您将除以`2*a`= 0，这使得`solution1`and`solution2`等于`NaN`。

将第二个构造函数中的行（如果您继续使用它）从

```
double a = aN, b = bN, c = cN; 
```

到

```
a = aN, b = bN, c = cN; 
```

解决掩蔽问题。不过，您很可能希望实例变量为`double`s 而不是`int`s，因此请更改

```
int a;int b;int c; 
```

到

```
double a, b, c; 
```

（您可以像这样进行相同类型的多个声明）。

我不知道为什么你有两个`Mathey`构造函数，所以要么废弃第二个（什么是`chooser?`）并只使用第一个，或者确保第二个也为`determinant`.

无论如何，这应该是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:25:54.553

您应该通过对功能进行单元测试来检查您的代码是否有可能。例如，我注意到您使用了带有双数的 {%} 运算符。该运算符使用整数，并可能将 NaN 结果拖到最后。

您还在 mathey() 中声明变量，然后尝试在它们不存在的 solvea() solveb() 中使用它们。

# php - 在 PHP 中向 MySQL 添加一个自动增量字段

> ID：14639180
> 
> 赞同：-5
> 
> 时间：2013-02-01T03:20:34.013
> 
> 标签：php, mysql

我不断收到此错误：

**INSERT 失败：INSERT INTO clientcontact VALUES（'Don Jones'、'Walmart'、'need help'、'don@icsbranch.net'、'772-991-0122'）列计数与第 1 行的值计数不匹配**

我正在尝试从 get_post 函数传递一个 NULL 字段，这是一个自动增量 ID 字段。只是想知道我需要更改什么，以便用户可以填写表格并将信息输入到数据库中，并自动填充查询 ID。

```
<?php 

require_once 'login.php';
$db_server = mysql_connect($db_hostname, $db_username, $db_password);

if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database, $db_server)
or die("Unable to select database: " . mysql_error());

{
$name   = get_post('name');
$company   = get_post('company');
$description = get_post('description');
$email     = get_post('email');
$phone    = get_post('phone');
$inquiryID = get_post('inquiryID');

$query = "INSERT INTO clientcontact VALUES" .
    "('$name', '$company', '$description', '$email', '$phone', NULL)";

if (!mysql_query($query, $db_server))
    echo "INSERT failed: $query<br />" .
    mysql_error() . "<br /><br />";
}

echo <<<_END
<form action="index.php" method="post"><pre>
       Name: <input type="text" name="name" />
    Company: <input type="text" name="company" />
    Inquiry Details: <input type="text" name="description" />
     E-Mail: <input type="text" name="email" />
   Phone Number: <input type="text" name="phone" />
     <input type="submit" value="ADD RECORD" />

</pre></form>
_END;

mysql_close($db_server);

function get_post($var)
{
return mysql_real_escape_string($_POST[$var]);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:29:17.923

请执行以下操作：

1.  交叉检查是否存在具有属性 Auto Increment 的主键列。
2.  对于写入的插入查询，请在 VALUE 关键字之前添加列名，例如：

    插入表名 (COLUMN1, COLUMN2, COLUMN3) 值 (value1, value2, value3)

只需忽略列和值集中的自动增量字段。所以你的查询将是

```
$query = "INSERT INTO clientcontact (name_column, company_column, desc_column, email_column, phone_cloumn) VALUES" .
    "('$name', '$company', '$description', '$email', '$phone')"; 
```

请在上述查询中替换您的列名，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:28:44.837

```
$query = "INSERT INTO clientcontact VALUES" .
    "('$name', '$company', '$description', '$email', '$phone')"; 
```

（你不通过 NULL）

但你真的应该使用

```
$query = "INSERT INTO clientcontact VALUES (name, company, description, email, phone) VALUES ('$name', '$company', '$description', '$email', '$phone')"; 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:30:37.780

```
$query = "INSERT INTO clientcontact SET
   name = '" . $name . "',
   company = '" . $company . "',
   description = '" . $description . "',
   email = '" . $email . "',
   phone = " . $phone . ",
"; 
```

# queue - 在 Perl 5 中，如何在进程/应用程序达到最大限制后对其进行排队

> ID：14639181
> 
> 赞同：1
> 
> 时间：2013-02-01T03:20:41.793
> 
> 标签：queue, perl

我有一个程序被符号链接到多个目录，例如

> /main/foo.pl
> /run1/foo.pl -> /main/foo.pl
> /run2/foo.pl -> /main/foo.pl
> /run3/foo.pl -> /main/foo.pl
> /run4 /foo.pl -> /main/foo.pl

它们作为 cron 作业运行，因此我在 crontab 中有以下条目：

> */2 * * * * /run1/foo.pl
> */2 * * * * /run2/foo.pl
> */2 * * * * /run3/foo.pl
> */2 * * * * /run4/foo .pl

**foo.pl**的片段如下：

```
use Fcntl qw(:flock);
use autodie qw(:all);
open my $self, '>', "$FindBin::Bin/lockme";
flock( $self, LOCK_EX|LOCK_NB )
    or die "Cannot acquire lock, already running!";

{
    my $long_proc = Process->new();
    $long_proc->run();
} 
```

你明白了，每个 cron 进程只能运行一次，因为有一个锁信号量检查。但run1、run2、run3和run4可以同时运行。

现在我需要的是我想将进程数限制为最多四个。如果有人添加另一个 cron 进程，例如：

新符号链接：

> /run5/foo.pl -> /main/foo.pl
> /run6/foo.pl -> /main/foo.pl

额外的 crontab：

> */5 * * * * /run5/foo.pl
> * * * * * /run6/foo.pl

每当 run1、run2、run3 和 run4 都仍在运行时，run5 和 run6 都需要排队。因此，在任何给定时间将只有 4 个进程运行。

我怎样才能做到这一点？是否有任何处理它的 CPAN 模块？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:45:32.823

您有一些通用方法：

## 又快又脏

有一个包含 N 个锁定文件的目录，并让每个进程依次尝试锁定每个文件，并稍微休眠。

警告：这是一个繁忙的循环，是的，但它可能已经足够好了。

## 恶魔般的重新设计

变成`foo.pl`一个本地套接字监听守护进程，因为父进程很容易管理其子进程的并发性。将您的 cron 作业变成阻塞对守护进程的请求。（参见例如[Parallel::ForkManager](http://search.cpan.org/dist/Parallel-ForkManager/)）。

警告：如果您使用 cron`foo.pl`作为多个不同用户运行，则必须仔细重新实现 setuid/权限更改代码。

## 进程间信号量，SysV

[IPC::Semaphore](http://perldoc.perl.org/IPC/Semaphore.html)`semget`是 SysV系列函数的一个更方便的接口[`perlfunc`](http://perldoc.perl.org/functions/semget.html)，并且 SEM_UNDO 标志意味着您的某个工作人员的意外进程死亡不会“浪费”信号量增量。

警告：您可能需要在与 不同的单独进程中创建和初始化 SysV 信号量`foo.pl`，因为您无法在原子操作中创建和初始化 SysV 信号量。

## 进程间信号量，POSIXly

[POSIX::RT::Semaphore](http://search.cpan.org/dist/POSIX-RT-Semaphore/)还支持进程间信号量。该 API 比 SysV 更简单，并且可以专门创建信号量并将其初始化为原子系统调用中的值。

这可能是我会使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:32:02.013

请参阅上面@pilcrow 答案中@tsee 的评论。Steffen Muller 的*IPC::ConcurrencyLimit*可以很好地控制协同多处理的并发进程数。

# c# - 不使用 PIVOT 以逗号分隔的字符串形式查询结果？

> ID：14639184
> 
> 赞同：3
> 
> 时间：2013-02-01T03:21:00.383
> 
> 标签：c#, sql-server, database, pivot

我想从多条记录创建一个查询作为一条记录，但我不想使用 Pivot，仅供参考，我有 > 260 条记录，如果我编写手动 PIVOT 是不可能的，有没有简单的解决方案？

这是表格示例：

```
ID   Element_Name  Value
1    Parmitha      100
2    Anggun        200
3    Chandra       300
4    BagusofTerror 400
5    Laras         500
6    Jessica       600
7    Aisyah        700
......
200 Sonya          20000 
```

我希望结果是这样的：

```
paramitha , anggun, chandra , bagusofterror, Laras , Jessica , Aisyah, ..... , Sonya
100 , 200, 300, 400,500,600,700,....,20000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:34:04.363

参考[http://blog.sqlauthority.com/2009/12/21/sql-server-comma-separated-values-csv-from-table-column-part-2/](http://blog.sqlauthority.com/2009/12/21/sql-server-comma-separated-values-csv-from-table-column-part-2/)您可以使用以下 SQL 查询

我没有运行这个，所以我不是 100% 确定它会工作

```
SELECT STUFF(
(SELECT ',' + s.ElementName
FROM tableName s
FOR XML PATH('')),1,1,'') 

UNION ALL

SELECT STUFF(
(SELECT ',' + s.Value
FROM tableName s
FOR XML PATH('')),1,1,'') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:36:04.650

我们曾经将其称为交叉表查询。不确定它是否仍然...

```
SELECT SUM(CASE WHEN id=1 THEN value ELSE 0 END) AS parmitha,
   SUM(CASE WHEN id=2 THEN value ELSE 0 END) AS anggun,
   SUM(CASE WHEN id=3 THEN value ELSE 0 END) AS chandra,

   ...etc...

   SUM(value) AS total
FROM My_Table
WHERE ...etc... 
```

我不知道 c#，但我相信你可以让它遍历列以准备 SUM()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:00:31.170

我在您提供的示例数据集上尝试过这个怎么样。

```
declare @intFlag int
Declare @AnsString nvarchar(2000)

SET @intFlag=1
SET @AnsString=''

While (@intFlag<=200)
Begin
     Select @AnsString=@AnsString
                       +CONVERT(Varchar(20),(SELECT [Element_Name]
                                              FROM TABLE where RowID=@intFlag))
               +', '
SET @intFlag=@intFlag+1
if @intFlag=199
break;
END
Print @AnsString
--Select @AnsSTring 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:37:39.453

如果您希望此数据位于单独的列中，则可以`PIVOT`对 SQL Server 2005+ 中的数据使用动态 SQL。您的代码将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(element_name) 
                    from yourtable 
                    group by element_name, id
                    order by id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select '+@cols+'
       from
       (
         select Element_name, Value
         from yourtable
       ) p
       pivot
       (
          max(value)
          for Element_name in('+@cols+')
       ) piv'

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/ab310/3)。这给出了结果：

```
| PARMITHA | ANGGUN | CHANDRA | BAGUSOFTERROR | LARAS | JESSICA | AISYAH | SONYA |
----------------------------------------------------------------------------------
|      100 |    200 |     300 |           400 |   500 |     600 |    700 | 20000 | 
```

# ios - AFOAuth2Client 和刷新令牌

> ID：14639189
> 
> 赞同：10
> 
> 时间：2013-02-01T03:21:33.323
> 
> 标签：ios, ipad, oauth-2.0, afnetworking

如何在 iPad 应用程序中实现 Oauth？

AFOAuth2Client 在 oauth 2.0 中如何管理刷新令牌机制？

是否有任何方法可以在类中实现它，还是我们必须以自己的方式实现它？如何检查令牌是否过期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T12:19:35.833

我解决这个问题的方法是用一个代码块包装我的所有请求，如果需要，它将刷新访问令牌，例如

为成功和失败块添加一些 typedef：

```
typedef void (^YFRailsSaasApiClientSuccess)(AFJSONRequestOperation *operation, id responseObject);
typedef void (^YFRailsSaasApiClientFailure)(AFJSONRequestOperation *operation, NSError *error); 
```

那么请求方法是：

```
- (void)getProductsWithSuccess:(YFRailsSaasApiClientSuccess)success failure:(YFRailsSaasApiClientFailure)failure {
    NSLog(@"getProductsWithSuccess");

    success = ^(AFJSONRequestOperation *operation, id responseObject) {
        [self getPath:@"api/1/products"
           parameters:nil
              success:^(AFHTTPRequestOperation *operation, id responseObject) {
                  NSLog(@"getProductsWithSuccess: success");

                  // TODO: handle response

                  if (success) {
                      success((AFJSONRequestOperation *)operation, responseObject);
                  }
              } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                  NSLog(@"getProductsWithSuccess: failure");
              if (failure) {
                  failure((AFJSONRequestOperation *)operation, error);
              }
          }];
    };

    [self refreshAccessTokenWithSuccess:success failure:failure];
} 
```

检查令牌过期并在需要时刷新它的方法是：

```
- (void)refreshAccessTokenWithSuccess:(YFRailsSaasApiClientSuccess)success failure:(YFRailsSaasApiClientFailure)failure {
    NSLog(@"refreshAccessTokenWithSuccess");

    if (self.credential == nil) {
        if (failure) {
            NSMutableDictionary *errorDetail = [NSMutableDictionary dictionary];
            [errorDetail setValue:@"Failed to get credentials" forKey:NSLocalizedDescriptionKey];
            NSError *error = [NSError errorWithDomain:@"world" code:200 userInfo:errorDetail];
            failure(nil, error);
        }
        return;
    }  

    if (!self.credential.isExpired) {
        NSLog(@"refreshAccessTokenWithSuccess: credential has not expired");

        if (success) {
            success(nil, nil);
        }
        return;
    }

    NSLog(@"refreshAccessTokenWithSuccess: refreshing credential");

    [self authenticateUsingOAuthWithPath:@"oauth/token"
                            refreshToken:self.credential.refreshToken
                                 success:^(AFOAuthCredential *newCredential) {
                                     NSLog(@"Successfully refreshed OAuth credentials %@", newCredential.accessToken);
                                     self.credential = newCredential;
                                     [AFOAuthCredential storeCredential:newCredential
                                                     withIdentifier:self.serviceProviderIdentifier];

                                     if (success) {
                                         success(nil, nil);
                                     }
                                 }
                                 failure:^(NSError *error) {
                                     NSLog(@"An error occurred refreshing credential: %@", error);
                                     if (failure) {
                                         failure(nil, error);
                                     }
                                 }];
} 
```

完整的源代码在 GitHub 上：[https](https://github.com/yellowfeather/rails-saas-ios) ://github.com/yellowfeather/rails-saas-ios 。

# c - 如何在 lua 中创建一个接受多个参数的 C 函数？

> ID：14639194
> 
> 赞同：2
> 
> 时间：2013-02-01T03:22:14.363
> 
> 标签：c, lua

如何知道从 lua 传递给 C 函数的参数数量？

下面的工作吗？

```
int test(lua_State *l) {
  int result = 0;
  int n=1;
  while(!lua_isnil(l,n)) {
    result = result + lua_tointeger(l, n);
    ++n
  }

  lua_pushnumber(l, result);
  return 1;
} 
```

注意：这本质上是对其所有者[删除的问题](https://stackoverflow.com/questions/14599677/how-to-get-length-of-lua-variable-number-of-arguments-in-c-function)的复活，我认为值得保留。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:23:46.030

所有参数都被推送到 lua 堆栈中，因此您可以通过找出堆栈的初始大小来获取元素的数量。这样做的呼吁是`lua_gettop(L)`。

因此，您的代码大致如下所示：

```
int test(lua_State *l)
{
  int result = 0;
  int nargs = lua_gettop(l);
  for(int i=1; i<=nargs; ++i)
  {
    result += lua_tointeger(l, i);;
  }

  lua_pushnumber(l, result);
  return 1;
} 
```

最初编写的代码的问题是它不能正确处理空参数。例如`test(1,nil,3)`将返回 1，而不是 4。

# jsf - JSF mojarra 2.1.7 restoreView isPostBack：java.lang.NullPointerException

> ID：14639200
> 
> 赞同：1
> 
> 时间：2013-02-01T03:22:57.223
> 
> 标签：jsf

我在 JBoss AS 7.1.1 上使用 PrimeFaces 3.4.2 和 Mojarra 2.1.7。

恢复视图时出现以下异常。

```
21:58:33,203 ERROR  (http--127.0.0.1-8080-7) java.lang.NullPointerException
21:58:36,687 ERROR [stderr] (http--127.0.0.1-8080-7) java.lang.IllegalArgumentException: null source
21:58:36,687 ERROR [stderr] (http--127.0.0.1-8080-7)    at java.util.EventObject.<init>(EventObject.java:38)
21:58:36,687 ERROR [stderr] (http--127.0.0.1-8080-7)    at javax.faces.event.SystemEvent.<init>(SystemEvent.java:71)
21:58:36,703 ERROR [stderr] (http--127.0.0.1-8080-7)    at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:73)
21:58:36,703 ERROR [stderr] (http--127.0.0.1-8080-7)    at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:73)
21:58:36,703 ERROR [stderr] (http--127.0.0.1-8080-7)    at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:271)
21:58:36,703 ERROR [stderr] (http--127.0.0.1-8080-7)    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:257)
21:58:36,703 ERROR [stderr] (http--127.0.0.1-8080-7)    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
21:58:36,718 ERROR [stderr] (http--127.0.0.1-8080-7)    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
21:58:36,718 ERROR [stderr] (http--127.0.0.1-8080-7)    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
21:58:36,718 ERROR [stderr] (http--127.0.0.1-8080-7)    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 
```

```
@Override
public boolean isPostback() {

    assertNotReleased();
    Boolean postback = (Boolean) this.getAttributes().get(POST_BACK_MARKER);
    if (postback == null) {
        RenderKit rk = this.getRenderKit();
        if (rk != null) {
            postback = rk.getResponseStateManager().isPostback(this);
        } else {
            // ViewRoot hasn't been set yet, so calculate the RK
            ViewHandler vh = this.getApplication().getViewHandler();
            String rkId = vh.calculateRenderKitId(this);
            postback = RenderKitUtils.getResponseStateManager(this, rkId)
                  .isPostback(this);
        }
        this.getAttributes().put(POST_BACK_MARKER, postback);
    }

    return postback;

}

public String calculateRenderKitId(FacesContext context) {

    Util.notNull("context", context);

    Map<String,String> requestParamMap = context.getExternalContext()
        .getRequestParameterMap();
    String result = requestParamMap.get(         // <--------- exception here !!!!!!
        ResponseStateManager.RENDER_KIT_ID_PARAM);

    if (result == null) {
        if (null ==
            (result = context.getApplication().getDefaultRenderKitId())) {
            result = RenderKitFactory.HTML_BASIC_RENDER_KIT;
        }
    }
    return result;
} 
```

调用时发生异常`isPostback()`，调用`calculateRenderKitId()`.

```
String result = requestParamMap.get( // <--------- exception here !!!!!!
    ResponseStateManager.RENDER_KIT_ID_PARAM); 
```

`requestParamMap`不可访问。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:22:58.700

您很可能会遇到请求参数限制。不幸的是，由于 JSF 中的异常处理，真正的异常被隐藏了。默认情况下，一个请求只能有 512 个参数，因此如果您提交大型列表，请求将触发未捕获的非法 ArgumentException，该异常将被忽略，并且您的请求将因无意义的空指针异常而失败。

尝试将此添加到您的 jboss Standalone.xml

```
 <system-properties>
     <property name="org.apache.tomcat.util.http.Parameters.MAX_COUNT" value="5000"/>
</system-properties> 
```

# git - 如何修复 git log 作者姓名？

> ID：14639202
> 
> 赞同：0
> 
> 时间：2013-02-01T03:23:02.757
> 
> 标签：git, version-control, git-log

当我的开发团队使用 git 提交时，有时他们会在新环境中进行提交。发生这种情况时，他们的 git 配置没有正确设置，他们使用默认的“root@localhost. localdomain”作者姓名。就 git log 而言，这非常烦人。我们可以通过流程消除这种情况，但有时人为错误是不可避免的。

有没有办法更改那些不正确的作者姓名，或者有办法在提交之前强制执行正确的作者姓名？例如，我可以设置授权作者列表，任何不使用作者姓名的人都不能提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:04:27.333

像这样重写 git 历史记录的问题在于，一旦您更改了一个提交，所有依赖于它的提交也会更改。换句话说，如果您想在尝试更改的提交 ID 之后保留所有提交 ID，则无法更改要更改的提交。

如果您可以在更改的提交之后弄乱提交的 ID，则可以使用这样的方法来更改提交的详细信息：

```
git filter-branch -f --env-filter '
if [ $GIT_COMMIT = %COMMITID% ]
then
    export GIT_AUTHOR_DATE="YYYY-MM-DD hh:mm:ss z"
    export GIT_COMMITTER_DATE="YYYY-MM-DD hh:mm:ss z"
    export GIT_AUTHOR_NAME="Name"
    export GIT_AUTHOR_EMAIL="email@address"
    export GIT_COMMITTER_NAME="Name"
    export GIT_COMMITTER_EMAIL="email@address"
fi
' -- %COMMITID%~..HEAD 
```

其中 `%COMMITID% 替换为您要更改的提交的 ID。例子：

```
git filter-branch -f --env-filter '
if [ $GIT_COMMIT = 1234567890ABCD ]
then
    export GIT_AUTHOR_DATE="2000-01-01 00:00:00 -0500"
    export GIT_COMMITTER_DATE="2000-01-01 00:00:00 -0500"
    export GIT_AUTHOR_NAME="Name"
    export GIT_AUTHOR_EMAIL="email@address"
    export GIT_COMMITTER_NAME="Name"
    export GIT_COMMITTER_EMAIL="email@address"
fi
' -- 1234567890ABCD~..HEAD 
```

警告！同样，您不仅要更改该提交，还要更改其上的每一个提交。

*   由于上述原因，现在“邪恶双胞胎”“幽灵”“旧”提交树仍然存在。您可以使用以下方法进行清理：

    git filter-branch -f --env-filter "" -- %COMMITID%~..HEAD

*   您将不得不用新的提交覆盖远程分支，因为简单地推送它是行不通的——远程服务器会抱怨。在将重写的分支向上推送之前“强制”它，或者删除远程分支：

    git push remote_address_or_name :branch_name

例子：

```
git push origin :feature_a 
```

*   您必须让所有其他团队成员在新树的顶部变基。他们可能必须做一些事情，比如`git fetch --all -p`清理重写远程分支的本地历史，然后才能在它之上重新建立基础。

基于上述内容，您最好查看一些停止包含违规提交的**服务器端** `pre-receive`钩子，`push`并告知团队成员如何使用上述`filter-branch`魔法来消除他们提交的违规消息。

# linux - 如何在linux的命令中间使用xargs传递所有参数

> ID：14639206
> 
> 赞同：35
> 
> 时间：2013-02-01T03:23:30.660
> 
> 标签：linux, xargs

我想在 Linux 上将所有文件作为单个参数传递，但我无法做到这一点。

这是有效的

```
ls | sort -n | xargs  -i pdftk  {} cat output combinewd2.pdf 
```

这会为每个命令传递一个参数，但我想要一个命令。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-11-01T06:42:14.643

使用`-I`选项：

```
echo prefix | xargs -I % echo % post 
```

输出：

```
prefix post 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-01T04:23:28.290

这是一种方法

```
pdftk $(ls | sort -n) cat output combinewd2.pdf 
```

或使用反引号

```
pdftk `ls | sort -n` cat output combinewd2.pdf 
```

例如，如果文件名是 100、2、9、3.14、10、1，则命令将是

```
pdftk 1 2 3.14 9 10 100 cat output combinewd2.pdf 
```

要处理带有空格或其他特殊字符的文件名，请考虑@joeytwiddle*出色答案的这个**固定*版本（它没有按数字排序，请参阅下面的讨论）：

 *```
#-- The following will handle special characters, and
#   will sort filenames numerically
#   e.g. filenames 100, 2, 9, 3.14, 10, 1 results in 
#      ./1 ./2 ./3.14 ./9 ./10 ./100
#
find . -maxdepth 1 -type f -print0 |
  sort -k1.3n -z -t '\0' |
  xargs -0 sh -c 'pdftk "$@" cat output combinewd2.pdf' "$0" 
```

## xargs 的替代品（特定于 bash）

`xargs`是一个外部命令，在前面的示例中，它调用`sh`它反过来调用`pdftk`.

另一种方法是使用内置函数（`mapfile`如果可用），或使用位置参数。以下示例使用两个函数，*print0_files*生成 NUL 终止的文件名和*create_pdf*调用`pdftk`：

```
print0_files | create_pdf combinewd2.pdf 
```

函数定义如下

```
#-- Generate the NUL terminated filenames, numerically sorted
print0_files() {
    find . -maxdepth 1 -type f -print0 |
        sort -k1.3n -z -t '\0'
} 
```

```
#-- Read NUL terminated filenames using mapfile
create_pdf() {
    mapfile -d ''
    pdftk "${MAPFILE[@]}" cat output "$1"
} 
```

```
#-- Alternative using positional parameters
create_pdf() {
    local -r pdf=$1
    set --
    while IFS= read -r -d '' f; do set -- "$@" "$f"; done
    pdftk "$@" cat output "$pdf"
} 
```

## 讨论

正如评论中所指出的，简单的初始答案不适用于包含空格或其他特殊字符的文件名。@joeytwiddle 的答案确实处理了特殊字符，尽管它没有按数字排序

```
#-- The following will not sort numerically due to ./ prefix,
#   e.g. filenames 100, 2, 9, 3.14, 10, 1 results in 
#      ./1 ./10 ./100 ./2 ./3.14 ./9
#
find . -maxdepth 1 -type f -print0 |
  sort -zn |
  xargs -0 sh -c 'pdftk "$@" cat output combinewd2.pdf' "$0" 
```

`./`由于每个文件名都以`find`命令 为前缀，因此它不会按数字排序。[某些版本](https://stackoverflow.com/questions/2596462/how-to-strip-leading-in-unix-find)的`find`命令支持`-printf '%P\0'`不包含`./`前缀。一个更简单、可移植的修复方法是将`-d, --dictionary-order`选项添加到`sort`命令中，以便在比较中仅考虑空格和字母数字字符，但仍可能产生错误的顺序

```
#-- The following will not sort numerically due to decimals
#   e.g. filenames 100, 2, 9, 3.14, 10, 1 results in 
#      ./1 ./2 ./9 ./10 ./100 ./3.14
#
find . -maxdepth 1 -type f -print0 |
  sort -dzn |
  xargs -0 sh -c 'pdftk "$@" cat output combinewd2.pdf' "$0" 
```

如果文件名包含小数，这可能会导致不正确的数字排序。该`sort`命令确实允许在排序时对字段进行偏移，`sort -k1.3n`但如果文件名要尽可能通用，则在定义字段分隔符时必须小心，幸运`sort -t '\0'`的是指定 NUL 作为字段分隔符，并且该`find -print0`选项指示要使用 NUL作为文件名之间的分隔符，因此`sort -z -t '\0'`将 NUL 指定为记录分隔符和字段分隔符——每个文件名都是单个字段记录。`./`鉴于此，我们可以通过将第一个字段的第三个字符指定为数字排序的起始位置来偏移到单个字段并跳过前缀`sort -k1.3n -z -t '\0'`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-01T04:54:55.923

这很难看，但您可以运行并访问as`sh -c`传递的参数列表，如下所示：`xargs``"${@}"`

```
ls | sort -n | xargs -d'\n' sh -c 'pdftk "${@}" cat output combinewd2.pdf' "${0}" 
```

最后的额外`"${0}"`内容就在那里，因为正如[`sh`手册页所说](http://linux.die.net/man/1/sh)

> **-c** *字符串*
> 
> 如果存在**-c**选项，则从*string*读取命令。*如果string*后面有参数，则将它们分配给位置参数，从**$0**开始。

为了测试这一点，让我们首先创建一些名称复杂的文件，这些文件会混淆大多数其他解决方案：

```
$ seq 1 100 | xargs -I{} touch '{} with "spaces"'
$ ls
1 with "spaces"    31 with "spaces"  54 with "spaces"  77 with "spaces"
10 with "spaces"   32 with "spaces"  55 with "spaces"  78 with "spaces"
100 with "spaces"  33 with "spaces"  56 with "spaces"  79 with "spaces"
11 with "spaces"   34 with "spaces"  57 with "spaces"  8 with "spaces"
12 with "spaces"   35 with "spaces"  58 with "spaces"  80 with "spaces"
13 with "spaces"   36 with "spaces"  59 with "spaces"  81 with "spaces"
14 with "spaces"   37 with "spaces"  6 with "spaces"   82 with "spaces"
15 with "spaces"   38 with "spaces"  60 with "spaces"  83 with "spaces"
16 with "spaces"   39 with "spaces"  61 with "spaces"  84 with "spaces"
17 with "spaces"   4 with "spaces"   62 with "spaces"  85 with "spaces"
18 with "spaces"   40 with "spaces"  63 with "spaces"  86 with "spaces"
19 with "spaces"   41 with "spaces"  64 with "spaces"  87 with "spaces"
2 with "spaces"    42 with "spaces"  65 with "spaces"  88 with "spaces"
20 with "spaces"   43 with "spaces"  66 with "spaces"  89 with "spaces"
21 with "spaces"   44 with "spaces"  67 with "spaces"  9 with "spaces"
22 with "spaces"   45 with "spaces"  68 with "spaces"  90 with "spaces"
23 with "spaces"   46 with "spaces"  69 with "spaces"  91 with "spaces"
24 with "spaces"   47 with "spaces"  7 with "spaces"   92 with "spaces"
25 with "spaces"   48 with "spaces"  70 with "spaces"  93 with "spaces"
26 with "spaces"   49 with "spaces"  71 with "spaces"  94 with "spaces"
27 with "spaces"   5 with "spaces"   72 with "spaces"  95 with "spaces"
28 with "spaces"   50 with "spaces"  73 with "spaces"  96 with "spaces"
29 with "spaces"   51 with "spaces"  74 with "spaces"  97 with "spaces"
3 with "spaces"    52 with "spaces"  75 with "spaces"  98 with "spaces"
30 with "spaces"   53 with "spaces"  76 with "spaces"  99 with "spaces"
$  ls | sort -n | xargs -d'\n' sh -c 'set -x; pdftk "${@}" cat output combinewd2.pdf' "${0}"
+ pdftk '1 with "spaces"' '2 with "spaces"' '3 with "spaces"' '4 with "spaces"' '5 with "spaces"' '6 with "spaces"' '7 with "spaces"' '8 with "spaces"' '9 with "spaces"' '10 with "spaces"' '11 with "spaces"' '12 with "spaces"' '13 with "spaces"' '14 with "spaces"' '15 with "spaces"' '16 with "spaces"' '17 with "spaces"' '18 with "spaces"' '19 with "spaces"' '20 with "spaces"' '21 with "spaces"' '22 with "spaces"' '23 with "spaces"' '24 with "spaces"' '25 with "spaces"' '26 with "spaces"' '27 with "spaces"' '28 with "spaces"' '29 with "spaces"' '30 with "spaces"' '31 with "spaces"' '32 with "spaces"' '33 with "spaces"' '34 with "spaces"' '35 with "spaces"' '36 with "spaces"' '37 with "spaces"' '38 with "spaces"' '39 with "spaces"' '40 with "spaces"' '41 with "spaces"' '42 with "spaces"' '43 with "spaces"' '44 with "spaces"' '45 with "spaces"' '46 with "spaces"' '47 with "spaces"' '48 with "spaces"' '49 with "spaces"' '50 with "spaces"' '51 with "spaces"' '52 with "spaces"' '53 with "spaces"' '54 with "spaces"' '55 with "spaces"' '56 with "spaces"' '57 with "spaces"' '58 with "spaces"' '59 with "spaces"' '60 with "spaces"' '61 with "spaces"' '62 with "spaces"' '63 with "spaces"' '64 with "spaces"' '65 with "spaces"' '66 with "spaces"' '67 with "spaces"' '68 with "spaces"' '69 with "spaces"' '70 with "spaces"' '71 with "spaces"' '72 with "spaces"' '73 with "spaces"' '74 with "spaces"' '75 with "spaces"' '76 with "spaces"' '77 with "spaces"' '78 with "spaces"' '79 with "spaces"' '80 with "spaces"' '81 with "spaces"' '82 with "spaces"' '83 with "spaces"' '84 with "spaces"' '85 with "spaces"' '86 with "spaces"' '87 with "spaces"' '88 with "spaces"' '89 with "spaces"' '90 with "spaces"' '91 with "spaces"' '92 with "spaces"' '93 with "spaces"' '94 with "spaces"' '95 with "spaces"' '96 with "spaces"' '97 with "spaces"' '98 with "spaces"' '99 with "spaces"' '100 with "spaces"' cat output combinewd2.pdf 
```

所有论点都被正确引用。请注意，如果任何文件名包含换行符，这将失败，`ls -v`基本上就是`ls | sort -n`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-24T20:14:38.453

这应该适用于包含空格、换行符、撇号和引号的文件名（所有这些在 UNIX 文件系统上都是可能的）：

```
find . -maxdepth 1 -type f -print0 |
  sort -zn |
  xargs -0 sh -c 'pdftk "$@" cat output combinewd2.pdf' "$0" 
```

如果您知道您正在使用简单的文件名，那么与接受的答案相比，这可能是过度的。

但是，如果您正在编写一个将来会再次使用的脚本，那么希望它在遇到异常（但有效）输入时不会爆炸。

这基本上是对[andrewdotn](https://stackoverflow.com/users/14558/andrewdotn)答案的改编，它以零字节而不是换行符终止输入文件，因此保留包含一个或多个换行符的文件名。

各自的 options `-print0`，`-z`并`-0`告诉每个程序输入/输出应该由零字节分隔。三个不同的程序，三个不同的论点！

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-02T19:42:21.220

我发现最直观的方法是：

*   首先用 -I{} 和“echo”构造命令，
*   然后用“bash”执行命令（就像你正在执行一个shell脚本）

这是将扩展名从“.txt”重命名为“.txt.json”的示例：

```
find .|grep txt$|xargs -I{} echo "mv {} {}.json"|bash 
```

将 .txt 重命名为 .json 的稍微高级的示例（删除 .txt 扩展名）

```
find $PWD|grep txt$|cut -d"." -f1|xargs -I{} echo "mv {}.txt {}.json"|bash 
```

我曾经要求将字符串“End of File”附加到所有文件中。

```
find .|grep txt|xargs -I{} echo "echo End of File >> {}"|bash 
```

如果你做对了，xargs 就是所有命令之王！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-02-14T01:27:22.440

这是我为同样的问题所做的，并且实际上在生产中使用：

```
cat chapter_order-pdf-sample.txt | xargs -J % pdftk % cat output sample.pdf 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-20T16:11:11.660

您可以通过链接两个对 xargs 的调用来做到这一点。使用第一个将所有 args 链接到一个字符串中并将其作为参数传递给`echo`，第二个 using`-I`将该 args 链放置到您想要的位置，如下所示：

```
ls | sort -n | xargs echo | xargs -I {} pdftk {} cat output combinewd2.pdf 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-18T14:49:44.147

我知道这不是 OP 的问题，但我发现这很有用。

如果你想重新调整你的论点，你可以`parallel`结合使用`xargs`.

```
# limit the number of arguments per line
echo last first middle last first middle | xargs -n 3
last first middle
last first middle 
```

GNU-parallel 现在可以使用参数随意重新排列这些`--colsep`参数。

```
echo last first middle last first middle | xargs -n 3 | parallel --colsep=" " echo {2} {3} {1}
first middle last
first middle last 
```

您还可以在其中添加常量参数。

```
echo last first middle last first middle | xargs -n 3 | parallel --colsep=" " echo {2} {3} middle2 {1}
first middle middle2 last
first middle middle2 last 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-22T06:27:07.487

不要遵循任何`xargs -I`解决方案，因为它无法正确处理空白并且无法按预期工作。

# TLDR

```
ls | sort -n | xargs -d '\n' sh -c 'echo pdftk "$@" cat output combinewd2.pdf' sh 
```

对于以下解决方案，我将使用`ruby -e 'p ARGV'`检查参数，供您参考：

```
ruby -e 'p ARGV' foo bar buz 
```

```
["foo", "bar", "buz"] 
```

# BSD`xargs`

如果您使用 BSD 系统（如 macOS），这是最简单的方法。

```
echo 3 4 | xargs -J@ ruby -e 'p ARGV' 1 2 @ 5 6 
```

```
["1", "2", "3", "4", "5", "6"] 
```

参考：

```
-J  replstr
         If this option is specified, xargs will use the data read from
         standard input to replace the first occurrence of replstr instead
         of appending that data after all other arguments.  This option
         will not affect how many arguments will be read from input (-n),
         or the size of the command(s) xargs will generate (-s).  The op-
         tion just moves where those arguments will be placed in the com-
         mand(s) that are executed.  The replstr must show up as a dis-
         tinct argument to xargs.  It will not be recognized if, for in-
         stance, it is in the middle of a quoted string.  Furthermore,
         only the first occurrence of the replstr will be replaced.  For
         example, the following command will copy the list of files and
         directories which start with an uppercase letter in the current
         directory to destdir:

           /bin/ls -1d [A-Z]* | xargs -J % cp -Rp % destdir 
```

# GNU`xargs`

因为没有`-J`flag，这里我们创建一个子shell，利用它`$@`来解决问题。

`$@`如果您知道如何工作，这可能有点棘手但很容易记住。

```
echo 3 4 | xargs sh -c 'ruby -e "p ARGV" 1 2 "$@" 5 6' sh 
```

```
["1", "2", "3", "4", "5", "6"] 
```

请注意，最后一个`sh`是必需的，否则 $0 将是`"3"`并且输出将是`["1", "2", "4", "5", "6"]`. 它不需要，`sh`但你应该为`$0`.

```
-c string

    If the -c option is present, then commands are read from string.
    If there are arguments after the string, they are assigned to the positional
    parameters, starting with $0\. 
```

## 为什么不`-I`呢？

因为它不能正确处理空白，例如：

```
echo  3 4 | xargs -I @ ruby -e 'p ARGV' 1 2 @ 5 6 
```

```
["1", "2", "3 4", "5", "6"] 
```

另一个例子：

```
printf "hello world\0goodbye world" | xargs -0 -I @ ruby -e 'p ARGV' before @ after 
```

```
["before", "hello world", "after"]
["before", "goodbye world", "after"] 
```

使用 sub-shell 和得到预期的输出`$@`：

```
printf "hello world\0goodbye world" | xargs -0 sh -c 'ruby -e "p ARGV" before "$@" after' sh 
```

```
["before", "hello world", "goodbye world", "after"] 
```*

# c# - 有关 Vault.dll 和 Vaultcli.dll 的信息

> ID：14639207
> 
> 赞同：1
> 
> 时间：2013-02-01T03:23:40.797
> 
> 标签：c#, c++, c, windows

当我遇到 vault 和 vaultcli dll 时，我在 System32 中的 dll 中磕磕绊绊。我假设这些库与密码存储一起使用，我想知道是否有人对此有更多信息。我尝试搜索谷歌，但只能找到一堆“这是病毒”和“修复此错误”的网站。我假设这些是 C/C++ 库，因为我尝试在 C# 项目中添加对它们的引用但没有成功。我想了解这些 dll 包含哪些方法，以及是否可以使用 C#`DllImport`和`extern`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-10T02:21:30.557

Vaultcmd.exe（及其依赖项 vaultcli.dll）是命令行等效于控制面板中的[凭据管理器](http://www.digitalcitizen.life/credential-manager-where-windows-stores-passwords-other-login-details)（在 Windows7 中，在控制面板 -> 用户帐户和家庭安全 -> 凭据管理器下。）

从 Windows 8（和通用 Windows 平台）开始，Windows 开始包括[Windows.Security.Credentials.PasswordVault](https://docs.microsoft.com/en-us/uwp/api/Windows.Security.Credentials.PasswordVault)。这是一个易于从 C# 使用的 .Net 库。它可以添加、读取和列出凭据。

它似乎是 Windows 的一部分，而不是 .Net 框架。为了让它工作，我必须在我的 .csproj 中设置 PlatformLevel。

```
<PropertyGroup>
  <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
  <TargetPlatformVersion>8.0</TargetPlatformVersion>
</PropertyGroup>

<Reference Include="Windows.Security">
      <HintPath>$(SYSTEMROOT)\System32\WinMetadata\Windows.Security.winmd</HintPath>
</Reference> 
```

# spring - spring 表达式读取文件内容

> ID：14639209
> 
> 赞同：9
> 
> 时间：2013-02-01T03:23:51.300
> 
> 标签：spring, spring-el, fileutils

如何使用spring表达式读取文件内容并将其放入字符串中？

我想做以下事情。

例如，

```
@Value("classpath:myquery.sql")
File f;

@Value("#{org.apache.commons.io.FileUtils.readFileToString(f)}")
String sql; 
```

甚至更好

```
@Value("#{FileUtils.readFileToString(classpath:myquery.sql)}")
String sql; 
```

但是，以上代码都不起作用。

顺便提一下，我使用的是 Spring 3.2.0 版

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T01:54:35.530

终于自己得到了答案...

```
@Value("#{T(org.apache.commons.io.FileUtils).readFileToString(" +
    "T(org.springframework.util.ResourceUtils).getFile('classpath:myquery.sql')" +
    ")}")
String sql; 
```

sql 现在默认由类路径下 myquery.sql 的确切内容填充

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-18T16:14:57.687

[这里](https://stackoverflow.com/a/13740003/906945)回答了一个类似的问题，它使用 Java 配置。

```
@Configuration
public class Spring {

    @Value("classpath:choice-test.html")
    private Resource sampleHtml;

    @Bean
    public String sampleHtmlData() {
        try(InputStream is = sampleHtml.getInputStream()) {
            return IOUtils.toString(is);
        }
    }
} 
```

# java - JDBC 识别 getUpdateCount() 是更新还是插入或删除

> ID：14639213
> 
> 赞同：0
> 
> 时间：2013-02-01T03:24:05.607
> 
> 标签：java, sql, jdbc

Statement 有`getUpdateCount()`方法，但我如何识别它是更新或插入或删除操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:45:37.300

您可以使用[resultSetInstance.getStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)`Statement` ()从中获取原始语句，将其转换为[PreparedStatement ，其 toString() 方法将原始语句作为](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)[String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)吐出。从这里开始，它只是检查语句本身。`ResultSet`

# sql - 如何使用特殊的第一行规则计算行之间的日期差异

> ID：14639217
> 
> 赞同：1
> 
> 时间：2013-02-01T03:24:51.890
> 
> 标签：sql, sql-server

我有多个应用程序，每个应用程序都有唯一的应用程序 ID，每个应用程序都有存储在表中的日志。我想知道如何计算日期差异，例如：

```
 AppID Start           Loggedon   change 
    A1    08/07/2010      08/09/2010 Xchange
    A1    08/07/2010      08/20/2010 Ychange
    A1    08/07/2010      08/30/2010 Zchange
    A2    07/07/2010      07/13/2010 Ychange
    A3    09/07/2010      09/09/2010 Xchange 
```

所以我想要价值观

```
Difference
2   (Difference between the application start date and 1st loggedon date)
11  (difference between 08/20 and 08/09, the prior row because AppID stayed the same)
10  (difference between 08/30 and 08/20, the prior row because AppID stayed the same)
6   (Difference between the application start date and 1st loggedon date)
2   (Difference between the application start date and 1st loggedon date) 
```

希望我清楚。我怎样才能做到这一点，我尝试了 Ranking 和 Row_Number。但我可能在某个地方错了。我正在使用 SQL Server，但无法使用 LAG()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:45:24.950

好的，这会起作用。享受。

现在测试了！谢谢 sgeddes—— [http: //sqlfiddle.com/#!3/e4d28/19](http://sqlfiddle.com/#!3/e4d28/19)

```
WITH tableNumbered AS
(
   SELECT *,
      ROW_NUMBER() OVER (PARTITION BY AppID ORDER BY AppID, Start , Loggedon ) AS row
   FROM Apps
)
SELECT t.*,
  CASE WHEN t2.row IS NULL THEN DATEDIFF(day,t.Start,t.LoggedOn)
       ELSE DATEDIFF(day,t2.LoggedOn,t.Loggedon)
  END as diff
FROM tableNumbered t
LEFT JOIN tableNumbered t2 ON t.AppID = t2.AppID AND t2.row+1 = t.row 
```

我仍然认为您应该在 UI 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:59:48.220

@Hogan 有正确的方法，但由于某种原因，我无法让它完全工作。这是一个似乎产生正确结果的细微变化 - 但是，请接受@Hogan的回答，因为他击败了我:)

```
WITH cte AS (
  SELECT AppId, Start, LoggedOn, 
  ROW_NUMBER() OVER (ORDER BY AppId) rn
FROM Apps
  ) 
SELECT c.AppId,
  CASE 
    WHEN c2.RN IS NULL
    THEN DATEDIFF(day,c.start,c.Loggedon)
    ELSE
         DATEDIFF(day,c2.Loggedon,c.Loggedon)
    END as TimeWanted
FROM cte c
   LEFT JOIN cte c2 on c.AppId = c2.AppId
      AND c.rn = c2.rn + 1 
```

这是[小提琴](http://sqlfiddle.com/#!3/e4d28/15)。

祝你好运。

# c++ - C++ 字符串编码 UTF8 / unicode

> ID：14639218
> 
> 赞同：1
> 
> 时间：2013-02-01T03:24:58.663
> 
> 标签：c++

我试图能够将字符“Т”（不是正常的大写字母 t，Unicode 十进制值 1058）从 C++ 发送到 VB

但是，使用下面的这种方法，消息返回到 VB，它显示为“Ð¢”，这是上面用 ANSI 编码的字符。

```
#if defined(_MSC_VER) && _MSC_VER > 1310
# define utf8(str)  ConvertToUTF8(L##str)
const char * ConvertToUTF8(const wchar_t * pStr) {
    static char szBuf[1024];
    WideCharToMultiByte(CP_UTF8, 0, pStr, -1, szBuf, sizeof(szBuf), NULL, NULL);
    return szBuf;
}
#else
# define utf8(str)  str
#endif

BSTR _stdcall chatTest()
{
    BSTR Message;
    CString temp("temp test");
    temp+=utf8("\u0422");
    int len = temp.GetLength();
    Message = SysAllocStringByteLen ((LPCTSTR)temp, len+1 );
    return Message;
} 
```

如果我只是做 temp+=("\u0422"); 没有 utf8 功能。它将数据发送为“？” 它实际上是一个问号（有时unicode字符在VB中显示为问号，但仍然具有正确的unicode十进制值..这里不是这种情况......它会将其更改为问号。

在 VB 中，如果我将具有来自 Message 的数据的字符串变量输出为“Ð¢”到文本文件，则它显示为“Т”。

因此，据我所知，它在 C++ 中的 UTF8 中，然后以某种方式在 VB 中转换为 ANSI（或在发送之前？），然后当输出到文件时，它又改回 UTF8？

从 C++ 发送到 VB 时，我只需要保持“Т”不变。我知道 VB 字符串可以保存该字符，因为我可以从 VB 中的另一个来源存储它（它显示为“？”，但具有正确的 unicode 十进制值）。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:41:35.307

BSTR 不是 UTF-8，它是 UTF-16，这是您使用`L""`前缀得到的。取出UTF-8转换并使用CStringW。并使用`LPCWSTR`而不是`LPCTSTR`.

# ruby - 厨师：错误：ArgumentError：参数数量错误（1 代表 2）

> ID：14639225
> 
> 赞同：1
> 
> 时间：2013-02-01T03:25:38.100
> 
> 标签：ruby, chef-infra

我在运行时遇到此错误`knife cookbook test`，我无法追踪它。我已经尝试删除所有食谱和属性中的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:25:38.100

此问题通常是由于`metadata.rb`您的食谱文件中的错误造成的。特别是，检查你的`recipe`指令；如果您省略名称后面的配方描述，您将收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T13:26:35.730

我遇到了同样的错误：原来错误是由参数名称引起的，这与 Ruby 方法相同。那是“名字”；现在它是“d_name”并且错误消失了......

另请参阅[https://github.com/vpenso/debian-chef-cookbook/issues/1](https://github.com/vpenso/debian-chef-cookbook/issues/1)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T23:12:17.067

这里的问题是我使用的是相当老的 ruby​​gems (1.4.1)。切换到正确的 gemset 解决了。

# c - C - 非常奇怪的隐式声明

> ID：14639226
> 
> 赞同：0
> 
> 时间：2013-02-01T03:25:39.610
> 
> 标签：c, declaration, implicit

我在文件“draw.h”中有一个函数：

```
void TileSystem() {
    // Some code here.        
} 
```

在“main.c”文件中，我称之为，因为我在文件中#included“draw.h”。该功能运行良好！

但是后来，我决定将函数重命名为

```
void CreateTileSystem() {
    // Some code here.        
} 
```

我得到以下输出：

```
gcc main.c -std=c99 -o main `pkg-config --cflags --libs allegro-5.0 allegro_acodec-5.0 allegro_audio-5.0 allegro_color-5.0 allegro_dialog-5.0 allegro_font-5.0 allegro_image-5.0 allegro_main-5.0 allegro_memfile-5.0 allegro_physfs-5.0 allegro_primitives-5.0 allegro_ttf-5.0`
main.c: In function ‘main’:
main.c:217:12: warning: implicit declaration of function ‘CreateTileSystem’ [-Wimplicit-function-declaration]
/tmp/cclNEg6q.o: In function `main':
main.c:(.text+0xb1e): undefined reference to `CreateTileSystem'
collect2: error: ld returned 1 exit status
make: *** [main] Error 1 
```

然后，我只是将它重命名回 TileSystem 并且运行良好。我在整个代码中没有其他引用。这根本没有意义！我想重命名，以便在函数中使用动词（我认为这是一个更“正确”的标准）。好吧，我真的很想知道会发生什么。我真的找不到错误，而且当我重命名它时，它又恢复了工作，这让我更加沮丧。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:35:22.520

您还必须更改头文件中的名称，`draw.h`.

该错误/警告表明该函数没有前向声明，这在较旧的 C 方言中导致假设该函数是`int fn(int)`（如果有记忆的话）。

当您将其改回时它会起作用，因为标头从未被修改过，因此它仍然提供旧名称的前向声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:47:08.560

我尝试像您在此处描述的那样创建几个简单的文件，但我没有遇到任何问题。所以：

*   你确定你在 draw.h 和 main.c 中为新函数使用了相同的名称（真的确定）？

*   我不了解 allegro：它是否恰好有一个名为 TileSystem 的函数？

除此之外，我建议从一个简单的设置开始（所以只有 include、main 函数和 main.c 中的调用，以及 draw.h 中的声明），确保使用 编译`gcc main.c -std=c99 -o main`，然后构建你的应用程序直到它当前的状态，一块一块地，直到错误再次开始发生。这应该可以帮助您确定问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:00:13.970

我重新创建了头文件，没有更改任何内容，并且它有效。这确实与我从不更改文件有关（我的意思是，重命名文件或排除它）。发生了一些非常地下的编译问题。

# delphi - Delphi中的目录路径操作？

> ID：14639230
> 
> 赞同：6
> 
> 时间：2013-02-01T03:26:16.033
> 
> 标签：delphi, path, delphi-2007

我有给定文件夹的完整路径名，例如

```
c:\foo\bar 
```

现在我想在 c:\foo 中引用一个名为 baz.txt 的文件，

```
c:\foo\bar\..\baz.txt 
```

我目前正在使用 .. 路径运算符向下一层并获取我需要的文件。

是否有可以进行路径操作的函数，例如 UpOneLevel(str) -> str ？我知道我可以通过拆分字符串并删除最后一个标记来编写一个，但我宁愿它是一个内置/库函数，所以如果有例如转义的反斜杠，我以后不会遇到麻烦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T03:47:26.820

使用[`ExpandFileName`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.ExpandFileName)功能：

```
var
  S: string;
begin
  S := 'c:\foo\bar\..';
  S := ExpandFileName(S);
  ShowMessage(S);
end; 
```

来自上述示例的消息将显示`c:\foo`路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T04:36:42.240

看`ExtractFilePath()`和`ExtractFileDir()`。这些几乎在所有 Delphi 版本中都可用，尤其是那些没有 TDirectory、IOUtils 等的版本。

在任何人说之前，无论路径是否以文件名结尾，这些都可以正常工作。`ForceDirectories()`例如，在内部使用它们向后遍历父文件夹的层次结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T03:38:57.127

**这个答案对 Delphi XE + 有效**

使用 IOutils 单元的[TDirectory](http://docwiki.embarcadero.com/VCL/2010/en/IOUtils.TDirectory)类，它具有[GetParent](http://docwiki.embarcadero.com/VCL/2010/en/IOUtils.TDirectory.GetParent)方法，如下所示：

```
uses IOUtils;

procedure TForm1.Button1Click(Sender: TObject);
var
  s: string;
begin
  s := 'c:\foo\bar';
  ShowMessage(TDirectory.GetParent(s));
end; 
```

**在旧版本中**

看看其他答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T08:44:34.977

您可以从[delphi-oop](https://code.google.com/p/delphi-oop/)库中[查看 SvClasses](https://code.google.com/p/delphi-oop/source/browse/trunk/Core/SvClasses.pas)单元中的`TPathBuilder`记录。本单元不支持 Delphi 2007，但实现与此 Delphi 版本兼容。示例用法：`TPathBuilder`

```
var
  LFullPath: string;
begin
  LFullPath := TPathBuilder.InitCustomPath('c:\foo\bar').GoUpFolder.AddFile('baz.txt').ToString;
  //LFullPath = c:\foo\baz.txt 
```

# javascript - Knockout 视图模型更新时未更新 Kendo UI 下拉菜单

> ID：14639232
> 
> 赞同：1
> 
> 时间：2013-02-01T03:26:24.847
> 
> 标签：javascript, knockout.js, telerik, kendo-ui

我有一个 Kendo UI 下拉菜单，当它绑定到的 Knockout 视图模型发生更改时，它不会更新其 UI。我可以获得一个纯 HTML 选择和一个纯文本框来显示新模型值，但不是 Kendo UI。我在看什么？

这是一个代码示例（和[JSFiddle](http://jsfiddle.net/joewilson/dCb5L/24/)）。FruitId 最初应为“2”（橙色），然后在单击按钮后为“3”（香蕉）。文本框和两个下拉列表绑定到 Knockout 视图模型 (fruitId) 中的相同值。

由于手动更改了 Kendo UI 下拉列表，因此更新了 Knockout 视图模型，并且纯下拉列表和文本框显示了新值。但是当单击按钮并在代码中更新视图模型时，文本框和普通下拉列表显示正确的值，但 Kendo UI 下拉列表没有。

的HTML

```
<p>
    <label for="kendoDropDown">Kendo UI Drop Down</label>
    <input id="kendoDropDown" type="text"  data-bind="value: fruitId" />
</p>
<p>
    <label for="select">Plain old select</label>
    <select id="select" data-bind="value: fruitId">
        <option value="1">apple</option>
        <option value="2">orange</option>
        <option value="3">banana</option>
    </select>
</p>
<p>
    <label for="textBox">Plain old text box</label>
    <input id="textBox" type="text" data-bind="value: fruitId" class="k-textbox" />
</p>
<p>
    <button id="changeTo3" class="k-button">change fruitId to "3" (banana) programmatically</button>
</p>
<p>
    <button id="changeTo2" class="k-button">change fruitId to "2" (orange) programmatically</button>
</p> 
```

JavaScript

```
// Define the Knockout view model
var ViewModel = function (data) {
    var self = this;
    self.fruitId = ko.observable(data.fruitId);
}

// Init the drop down
var kendoDropDownData = [
    { id: "1", name: "apple"}, 
    { id: "2", name: "orange" }, 
    { id: "3", name: "banana" }
];
$("#kendoDropDown").kendoDropDownList({
    dataValueField: "id",
    dataTextField: "name",    
    dataSource: kendoDropDownData
});

// Wire up KO bindidng
var initialData = { fruitId: "2" };
ko.applyBindings(new ViewModel(initialData));

// Wire up the buttons
$("#changeTo3").click(function () {
    var newData = { fruitId: "3" };
    ko.applyBindings(new ViewModel(newData));
});
$("#changeTo2").click(function () {
    var newData = { fruitId: "2" };
    ko.applyBindings(new ViewModel(newData));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:13:30.960

您应该使用 Ryan Niemeyer 的 Knockout KendoUI 绑定[http://rniemeyer.github.com/knockout-kendo/web/DropDownList.html](http://rniemeyer.github.com/knockout-kendo/web/DropDownList.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:39:35.173

我最终使用了 Knockout 订阅，而不是 Knockout-Kendo 库。我在订阅功能内的 UI 中设置下拉值。

我还必须更改上面的代码以将 ViewModel 的相同实例保留在内存中。在每次按钮单击时获取一个新的 ViewModel() 意味着更改/订阅代码没有触发。

# php - “使用” PHP 打开模态窗口

> ID：14639235
> 
> 赞同：3
> 
> 时间：2013-02-01T03:26:31.843
> 
> 标签：php, jquery, modal-dialog

我正在用 PHP 创建一个登录系统，并试图让它变得更好一点。

当您注销时，您会被重定向回 index.php。像这样：

```
header("loaction: index.php?logout=true") 
```

这使得 url 看起来像 www.mysite.com/index.php?logout=true。然后我使用以下代码：

```
if(isset($_GET['logout'])) {

$logoutvalue = $_GET['logout'];

if($logoutvalue = "true") {
$notification = "You've been logged out!";  
} 
```

从 URL 中获取 logout 的值并对其进行处理。

我有一个小的弹出窗口，它将显示通知变量的值。在这种情况下，它是“您已注销！” 我的问题是如何在页面加载以及 url 等于 /index.php?logout=true 时显示模式窗口？

非常感谢所有评论，答案和建议！

谢谢！- 瑞安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:54:28.837

首先，

您不能直接“使用 PHP 打开模式窗口”。您只能通过交换变量（通过 JSON 或 XML）或将 PHP 条件直接嵌入到您的标记中来做到这一点。

PHP 和 JavaScript 是独立的。

> 我的问题是如何在页面加载以及 url 等于 /index.php?logout=true 时显示模式窗口？

有两种方法可以实现这一目标。
**第一**：充分利用将 PHP 条件嵌入到标记中。

**第二**：在某个地方隐藏输入，例如 ( `<input type="hidden" id="showModal" />`)，然后通过 JavaScript 本身检查它是否存在。

例如：

```
<!DOCTYPE html>
<html>
<head>

   <script type="text/javascript">

      window.onload = function(){

           if ( document.getElementById('showModal') ){

               alert('Box'); //replace with your own handler
           }

      }

   </script>

</head>
<body>

<?php if ( isset($_GET['logout']) && $_GET['logout'] === 'true' ): ?>

<input type="hidden" id="showModal" />

<?php endif;?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T03:35:27.063

您是否正在寻找类似的东西：

```
<script>
<?php if(isset($_GET['logout']) && $_GET['logout'] === 'true'){
    echo 'alert("You\'ve been logged out!");'
}
?>
</script> 
```

编辑：我相信您正在为模态窗口寻找类似的东西（使用 jQuery）

```
<?php if(isset($_GET['logout']) && $_GET['logout'] === 'true'){
    $message = "You've been logged out!";
?>
    <script>
    $(function() {
        $("#dialog").dialog();//if you want you can have a timeout to hide the window after x seconds
    });
    </script>
    <div id="dialog" title="Basic dialog">
        <p><?php echo $message;?></p>
    </div>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-29T16:05:00.900

我知道这是一个旧帖子，但是为了帮助将来有类似任务的人，我想以下内容可能有助于进入正确的方向（我自己测试了下面的代码，所以请进行调整）。

```
<?php if(isset($_GET['logout']) && $_GET['logout'] === 'true'){
        $message = "You've been logged out!";
    ?>
        <script>
        $(function() {
         $('#myModal').modal('show');
        });
        </script>

    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Edit Data</h4>
                </div>
                <div class="modal-body">
                    <div class="fetched-data"><?php $message ?></div> 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T22:28:41.600

好的，所以你现有的代码就像这个片段，你遇到的问题是你想显示一个由/使用 PHP 触发的 jQuery/Bootstrap 模式，但是 jQuery/JS 还没有加载（所以你会得到“$ 未定义”错误）。

当您说“一个小的弹出窗口”时，我假设您的意思是引导类型模式。

```
if(isset($_GET['logout'])) {
  $logoutvalue = $_GET['logout'];

  if($logoutvalue = "true") {
    $notification = "You've been logged out!";  
  }
} 
```

我所做的是将 PHP 代码块移动到 .php 文件的末尾，在 jQuery（等）之后，并有一个包含，所以它看起来像这样（假设你的模式的名称是 id="logoutModal"）：

**注销.php**

```
if(isset($_GET['logout'])) {
  $logoutvalue = $_GET['logout'];

  if($logoutvalue = "true") {
    include("logout-modal.php");  
  }
} 
```

**注销-modal.php**

```
<?php ?>
  <script>
    $('#logoutModal').modal('show');
  </script>
<?php ?> 
```

不是 100% 肯定这回答了你的问题，但这对我有用。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-06T12:52:32.333

[使用PRG](https://en.wikipedia.org/wiki/Post/Redirect/Get)模式完成此操作的最佳方法。

## 索引.php

**1\. 在 HTML 中为模态内容创建元素**

```
<div id=modal></div> 
```

**`#modal`2\. 为您的元素设置样式**

```
#modal {
    position: fixed;
    display: none; /*important*/
    color: white;
    text-align: center;
    z-index: 1000;
    width: 100%;
    height: 80px;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    background: crimson;
    line-height: 2;
} 
```

**3.定义函数如何使用jQuery显示和消失模态框**

```
'use strict'

window.jQuery ?

    $.fn.notify = function(interval) {      
        let el = $(this),
            text = el.text(),

            modal =()=> { // this will fire after the interval has expired
                el.fadeOut(),
                clearInterval(timer)
            },

            timer = setInterval(modal,interval)

        !text.match(/\S+/) || el.text('') // this will fire when modal box contains text    
            .append(`<h3>${text}</h3>`)
            .show()
    }

: alert('jQuery required.') 
```

**4.附加`.notify()`到jQuery选择器**

```
$(()=>{
    $('#modal').notify(1500) // 1500 is the interval in milliseconds
}) 
```

**5\. 将 PHP 发送的通知插入`#modal`元素内部**

```
<div id=modal>
    <?=
        @$_SESSION["notify"]; // if this variable is not set, nothing will happen
        unset($_SESSION["notify"]); 
    ?>
</div> 
```

**6\. 执行一个简单的`$_GET`请求**

```
<a href=parse.php?logout>Logout</a> 
```

## 解析.php

**`$_SESSION`7.在变量中使用PHP返回一个值**

```
if (isset($_GET["logout"])) {
    $_SESSION["notify"] = "You have been logged out.";
    header("Location: index.php");
} 
```

这是一个很好的做法。一旦注销请求发送到 PHP，它将重定向到索引页面，结果在会话变量中。PRG 模式并不总是需要 POST 请求。此示例发送一个 GET 请求，该请求可以用于注销。请注意，您必须将其放在`session_start();`文件的顶部。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-01T03:39:53.137

或者你甚至可以在 if 语句中编写脚本：

```
<?php
if(isset($_GET['logout']) && $_GET['logout'] === 'true'){ ?>
    <script type="text/javascript>
     window.open(yourhtml);
 </script>
</php } 
else {
// may be some other script
}
?> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-01T03:46:02.543

请下载模态 JS 库[http://simplemodal.plasm.it](http://simplemodal.plasm.it)

并使用条件

```
if(isset($_GET['logout'])) {

$logoutvalue = $_GET['logout'];

if($logoutvalue = "true") {
code to open the Modal as in the JS library..... 
} 
```

# java - JScrollPane.getViewportBorderBounds() 和 JScrollPane.getViewport() 之间的区别

> ID：14639239
> 
> 赞同：0
> 
> 时间：2013-02-01T03:27:14.103
> 
> 标签：java, swing, jscrollpane, jviewport

和有什么区别

> ```
> JScrollPane.getViewportBorderBounds() 
> ```
> 
> 和
> 
> ```
> JScrollPane.getViewport() 
> ```
> 
> 和
> 
> ```
> JscrollPane.getVisibleRect() 
> ```

前两个返回相同的维度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:36:46.797

`getViewportBorderBounds()`返回 Rectangle 代表视口边界的边界

`getViewport()`返回当前的 JViewport。

`getVisibleRect()`返回继承自 JComponent 的 JScrollPane 的可见矩形（包括边框和滚动条）。

我认为这三种方法之间没有任何可比性。他们在告诉你不同的事情。阅读有关[http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html的更多详细信息](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T11:14:27.063

使用不同的 LookAndFeel，getViewportBorderBounds() 和 getViewport() 将给出不同的值。

# facebook - facebook sdk 访问令牌会话过早过期

> ID：14639240
> 
> 赞同：1
> 
> 时间：2013-02-01T03:27:17.457
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk, facebook-login

参考： [https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

状态：

> 默认情况下，大多数访问令牌都有一个有限的有效期，通常约为 1 到 2 小时。为了在过期时间之后继续使用这些令牌，它们需要被延长。

那么为什么在 facebook php sdk 中给出的所有示例中，登录仅在几分钟后过期，然后需要新的登录？

谢谢

*编辑*

这是一个示例的代码（[https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)）

```
 <?php

require '../src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '344617158898614',
  'secret' => '6dc8ac871858b34798bc2488200e503d',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { ?>
      Your user profile is
      <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre>
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:48:42.073

我最近也遇到了这个。我认为它与有关，`/me`所以我尝试将其更改为`/user_id`. 这是我使用的代码：

```
require_once 'facebook-php/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '13********',
  'secret' => '7a***********',
));

$userId = $facebook->getUser();
?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<body>
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '13**********', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
    };
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script>   <?
if ($userId) { 
    $userInfo = $facebook->api('/' . $userId); 
?>
<img src="http://graph.facebook.com/<?php echo $userId; ?>/picture" align="left" width="24px" height="24px" style="padding: 2px 10px 2px 5px"> <div style="margin:0 0 0 0; padding:0 0 0 0; display:inline; height:24px; line-height:28px"><b>Hi there, <?php echo $userInfo['name']; ?>!</b></div>
<? } else { ?>
  <div class="fb-login-button" style="display:inline; position:relative; top:3px" scope="email,user_birthday,publish_stream,offline_access"></div>
<? } ?>
</body>
</html> 
```

该代码对我来说非常有效，只要他们登录 Facebook，他们就会出现在网站上。

# jquery - Backbone 应用程序中的 HoverIntent

> ID：14639243
> 
> 赞同：0
> 
> 时间：2013-02-01T03:27:39.047
> 
> 标签：jquery, backbone.js, hoverintent

我想以最简洁的方式在主干事件中使用 HoverIntent jQuery 插件。

以下是事件（为清楚起见进行了简化）：

```
events:
 'mouseenter'                      : 'onMouseEnter'
 'mouseleave'                      : 'onMouseLeave'

onMouseEnter: ->
  @$('.foo').show()      

 onMouseLeave: ->
  @$('.foo').hide() 
```

基本上，我不希望当有人在页面上运行鼠标时出现和隐藏的古怪，所以 HoverIntent 似乎是要走的路。我已经包含在我的项目中，它已经准备好了……但我不清楚如何在主干视图中正确调用它。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:43:13.897

有一些不同版本的 hoverintent 添加了您应该能够在 Backbone 中使用的自定义事件。看看：[https](https://github.com/LeMisterV/jquery.hoverintent) ://github.com/LeMisterV/jquery.hoverintent 。您应该能够使用`mouseenterintent`和`mouseleaveintent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T17:00:31.227

请注意，已接受答案中的插件不再维护并调用折旧的 jQuery 函数。`$.event.handle.call(this.elem, this.event)`通过替换`$.event.dispatch.call(this.elem, this.event)`插件的第 120 行，可以更新该插件以使用当前版本的 jQuery 。

然而，即使在修补了兼容性问题之后，我还是发现该插件对于我的目的来说过于故障和无响应。`setTimeout`相反，我通过检查元素是否仍然悬停来包装我的 mouseenter/mouseleave 回调来欺骗 hoverintent 功能集。例如：

```
function eventCallback(){
    setTimeout(function() {
        if ($(e.target).is(":hover")) {
            //do your code
        }
     }, 100);
} 
```

根据您的喜好调整超时计时器，该功能仅在用户在一定延迟后继续悬停时执行。

# ocaml - ocaml 函数接受元组，元组列表返回一个元组

> ID：14639244
> 
> 赞同：0
> 
> 时间：2013-02-01T03:27:49.470
> 
> 标签：ocaml

我有以下问题，我的函数采用元组和一对列表，它应该返回一个元组，但我收到错误消息说

```
a is tuple contains (int*list) and x is list of pairs [(a1,b1).....(an,bn)] 
```

我想要做的是将两个列表加在一起假设我传入`[9;9]` `[1;0;2]`然后它应该返回 a `[2;0;1]`，并且我使用`list.fold_left`尾递归来做到这一点。这是我感到困惑的功能，
我传入

```
list.fold_left f (0;[]) (List.combine(List.rev(l1),List.rev(l2)) 
```

所以`a`应该是一个包含`(int*list)` x 的元组是对的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:36:30.790

当您使用`List.fold_left`您的函数时，一次只能获取列表中的一个元素。在我看来，您的函数`f`被编写为期望将事物列表作为`x`. 但`x`将只是一对（如果我正确阅读您的代码）。

**编辑**

既然您写 your `f`as if `x`is a list ，那么当您使用`List.fold_left`with时`f`，您实质上是在说它的参数应该是一个列表列表。这就是错误消息告诉您的内容。如果你重写`f`它`x`是一对（这是你想要的，我很确定），这将修复错误。

# c# - “用于查询运算符 'Where' 的不支持的重载

> ID：14639245
> 
> 赞同：2
> 
> 时间：2013-02-01T03:27:50.107
> 
> 标签：c#, linq, dynamicquery

在它正常工作之前，我使用了相同的查询。然后我决定使用编译查询。所以我不得不对代码做一些改动。

现在，当我尝试执行代码时，我收到错误消息“不支持用于查询运算符'Where'的重载。我从“approvalHelper.GetWhereClauseForApprovalSimpleSearch();”生成的 where 子句 已经过测试并且工作正常。仅对编译后的查询部分不起作用，如我的代码所示

# 代码 ：

```
// Complied Query Class
public static class CompliedQuery
{

    public static Func<GDataContext, Expression<Func<View_ApprovalSimple, bool>>, IQueryable<View_ApprovalSimple>> getApprovalSimple =

    CompiledQuery.Compile<GDataContext, Expression<Func<View_ApprovalSimple, bool>>, IQueryable<View_ApprovalSimple>>(
           (db, whereclause) => (from results in db.View_ApprovalSimples.AsExpandable().Where(whereclause)
                                select results));        
}

// this is what is passed into the where clause; Body = {(vas.siteId = 1)}

//the Calling code
public static List<View_ApprovalSimple> GetApprovalSimple(ApprovalsSearchHelperClass _approvalHelper)
{
    Expression<Func<View_ApprovalSimple, bool>> whrClause = approvalHelper.GetWhereClauseForApprovalSimpleSearch();

    //whrclause; Body = {(vas.siteId = 1)}
    try
    {
        using (GDataContext db = new GDataContext())
        {
            if (whrClause != null)
            {
                var varResults = CompliedQuery.getApprovalSimple(db, whrClause);

                return varResults.ToList();
            }
        }  
    }
    catch (Exception ex)
    {
        // code to handle error        
    }
    finally
    {          
    }

    return null;    
} 
```

知道我可能需要实施哪些新变化吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:53:30.237

检查命名空间（首先将它们全部从 复制`CompliedQuery`）到调用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:35:32.917

首先，我对此有点怀疑，没有选择，所以我终于尝试了它，它确实奏效了。请点击链接查看答案 [史蒂夫的博客 史蒂夫做得](http://srstrong.blogspot.com.au/2008/09/passing-predicates-into-compiled.html) 很好。

# java - Java 客户端服务器“套接字已关闭”

> ID：14639257
> 
> 赞同：0
> 
> 时间：2013-02-01T03:28:57.857
> 
> 标签：java, sockets, client, port

我正在开发一个非常简单的 Java 客户端/服务器系统（只是为了让我的脚沾上套接字）。出于某种原因，我不断收到“套接字已关闭”错误...这是我的代码..

**服务器文件**

```
public class Server {

    public static ServerSocket s = null;

    public static void main(String[] args) {
        //Create the server socket
        int port = 1111;
        if (args.length > 0) {
            if (isInt(args[0]) && Integer.parseInt(args[0]) < 65537) {
                port = Integer.parseInt(args[0]);
            }
        }
        try {
            s = new ServerSocket(port);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            s.setSoTimeout(0);
        } catch (SocketException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        Runnable r = new Runnable() {
            public void run() {
                while (true) {
                    Socket caught = null;
                    try {
                        caught = Server.s.accept();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    if (caught == null) {
                        return;
                    }

                    InputStream is = null;
                    try {
                        is = caught.getInputStream();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    BufferedReader br = new BufferedReader(new InputStreamReader(is));
                    try {
                        String output;
                        while ((output = br.readLine()) != null) {
                            handleCommand(output, caught);
                        }
                    } catch (Exception e) {
                    }
                    try {
                        br.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        };

        Thread t = new Thread(r);
        t.start();
    }

    public static boolean isInt(String in) {
        try {
            Integer.parseInt(in);
            return true;
        } catch (Exception e) {
            return false;
        }
    }

    public static void handleCommand(String in, Socket s1) {
        if (in.equalsIgnoreCase("test")) {
            System.out.println("Recieved Test Command..");
            System.out.println("Sending response..");
            PrintStream ps = null;
            try {
                ps = new PrintStream(s1.getOutputStream(), true);
            } catch (Exception e) {
                e.printStackTrace();
            }
            ps.close();
        }
    }
} 
```

**客户档案**

```
public class Client {

    public static Socket s = null;

    public static void main(String[] args) {
        int port = 1111;
        String server = "localhost";
        if (args.length > 0) {
            if (isInt(args[0]) && Integer.parseInt(args[0]) < 65537) {
                port = Integer.parseInt(args[0]);
            }
        }
        if (args.length > 1) {
            server = args[1];
        }

        try {
            s = new Socket(server, port);
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (s != null) {

            Runnable r = new Runnable() {
                public void run() {
                    while (true) {
                        InputStream is = null;
                        try {
                            is = s.getInputStream();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        BufferedReader br = new BufferedReader(new InputStreamReader(is));
                        try {
                            String output;
                            while ((output = br.readLine()) != null) {
                                System.out.println(output);
                            }
                        } catch (Exception e) {
                        }
                        try {
                            br.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            };

            Thread t = new Thread(r);
            t.start();

            PrintStream ps = null;
            try {
                ps = new PrintStream(s.getOutputStream(), true);
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("Sending Test message..");
            try {

                ps.println("test");

            } catch (Exception e) {
                System.out.println("Error: - " + e.getMessage());
            }

        }
    }

    public static boolean isInt(String in) {
        try {
            Integer.parseInt(in);
            return true;
        } catch (Exception e) {
            return false;
        }
    }
} 
```

我在第 41 行收到客户端错误，然后在第 46 行收到 NullPointerException 错误。

提前感谢您的帮助。我只是想在这里学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:39:26.637

在第 61 行的服务器中，当您第一次读取时，您的客户端没有机会发送数据，因此它不会在循环中停止并继续关闭第 68 行的读取器。

尝试创建一个类来处理服务器上的传入连接，这样可以更容易地考虑在服务器上做什么，像 ClientHandler 这样的东西会是一个不错的选择；）

玩得开心 ！

# mysql - mysql 命令有效，但会杀死我的服务器 - 替代运行方式？

> ID：14639259
> 
> 赞同：0
> 
> 时间：2013-02-01T03:29:31.433
> 
> 标签：mysql

我需要从我的数据库中查找并删除几乎重复的条目，这些条目仅以斜杠结尾。换句话说，一行会有 URL “ [http://www.google.com](http://www.google.com) ”，另一行会有“ [http://www.google.com/](http://www.google.com/) ” 我[在这里发布了这个问题](https://stackoverflow.com/questions/14551809/mysql-statement-to-find-nearly-duplicate-data-with-trailing-slash)，一位非常有帮助的专家给了我[这个解决方案](https://stackoverflow.com/a/14551949/1430996)：

```
DELETE li1
FROM link_info li1
JOIN link_info li2
WHERE TRIM(TRAILING '/' FROM li1.url) =
      TRIM(TRAILING '/' FROM li2.url)
AND li1.id<li2.id 
```

该代码完全在我需要的时候完成了，除了它耗尽了我所有的服务器内存并每次都杀死我的 VPS。是否有任何替代方法可以以更少的资源密集型或更慢的方式运行它，以保持我的服务器正常运行？我在 phpmyadmin 中运行命令。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:46:15.293

如果你用一个语句修剪尾部斜杠怎么办：

```
UPDATE Link_Info
SET url=LEFT(url, LENGTH(url)-1) /*everything but the last character, which can only be a slash*/
WHERE url LIKE '%/'; 
```

*然后*运行清理脚本，但*不*进行斜杠处理：

```
DELETE li1
FROM link_info li1
JOIN link_info li2
WHERE li1.url = li2.url
AND li1.id<li2.id 
```

这样您就可以拆分处理。我对 MySql 知之甚少，但是在连接条件 ( `TRIM(TRAILING '/' FROM li1.url) = TRIM(TRAILING '/' FROM li2.url)`) 中有一个函数可能意味着查询也不能从任何索引中受益。

哦，当您使用它时，您可能还想清理任何空间：

```
UPDATE Link_Info
SET url=LTRIM(RTRIM(url))
WHERE url LIKE '% %'; 
```

所以我会清理空格，然后删除尾部斜杠，然后进行重复数据删除。

# java - Java 的 CopyOnWriteLinkedList 实现

> ID：14639260
> 
> 赞同：0
> 
> 时间：2013-02-01T03:29:44.783
> 
> 标签：java, multithreading

是否有类似于 CopyOnWriteArrayList 的 CopyOnWriteLinkedList？我在网上搜索过，但没有找到。是否有提供此功能的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:39:16.880

正如 Louis Wasserman 建议的那样，建议将 a[`ConcurrentLinkedDeque`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)用于并发的 Deque 操作。

# ruby-on-rails-3 - Rails / Sitemap_Generator：子域站点地图

> ID：14639263
> 
> 赞同：0
> 
> 时间：2013-02-01T03:30:11.713
> 
> 标签：ruby-on-rails-3, sitemap

我正在尝试为我的应用程序创建一个站点地图，该站点地图使用[sitemap_generator gem 具有子域。](https://github.com/kjvarga/sitemap_generator) 但是，我的代码出现错误：

`the scheme http does not accept registry part: .foo.com (or bad hostname?)`

我的站点地图.rb：

```
SitemapGenerator::Sitemap.default_host = "http://www.foo.com"
SitemapGenerator::Sitemap.sitemaps_host = "http://s3.amazonaws.com/foo/"
SitemapGenerator::Sitemap.public_path = 'tmp/'
SitemapGenerator::Sitemap.sitemaps_path = 'sitemaps/'
SitemapGenerator::Sitemap.adapter = SitemapGenerator::WaveAdapter.new

SitemapGenerator::Sitemap.create do
  add '/home' 
end

Customer.find_each do |customer|
  SitemapGenerator::Sitemap.default_host = "http://#{customer.user_name}.foo.com"
  SitemapGenerator::Sitemap.sitemaps_path = "sitemaps/#{customer.user_name}"
  SitemapGenerator::Sitemap.create do
    add '/home'
  end  
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T22:49:42.460

我是这颗宝石的作者。

我相当确定问题在于其中一个客户用户名包含 URL 中不允许的字符。一个简单名称的简单测试可以工作，例如：

```
%w(bill mary bob).each do |customer|
  SitemapGenerator::Sitemap.default_host = "http://#{customer}.foo.com"
  SitemapGenerator::Sitemap.sitemaps_path = "sitemaps/#{customer}"
  SitemapGenerator::Sitemap.create do
    add '/home'
  end  
end 
```

# excel - 如果第一列中的单元格不是粗体，如何删除excel中的行？

> ID：14639270
> 
> 赞同：0
> 
> 时间：2013-02-01T03:31:08.017
> 
> 标签：excel

我在 excel 中有一个大约 20000 行和 4 列的列表。此 Excel 表包含粗体名称，之后的列包含有关它们的信息。每个名称后面都有一些多余的信息，占据 3 或 4 行，但并不一致。我需要遍历工作表并删除所有没有粗体名称的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:17:47.400

```
Sub deleteNonBolded()

    Dim cell As Range
    Dim selectRange As Range

    For Each cell In Intersect(ActiveSheet.Range("A:A"), ActiveSheet.UsedRange)
        If (cell.Font.Bold = False) Then
            If selectRange Is Nothing Then
                Set selectRange = cell
            Else
                Set selectRange = Union(cell, selectRange)
            End If
        End If
    Next cell

    selectRange.EntireRow.Delete

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:09:53.580

您需要创建一个宏来找出当前工作表中有多少行，然后遍历从工作表底部到顶部的行，检查`Font.Bold`该行第一列的属性是否设置为 false . 如果是这样，您删除该行。

以下对我有用：

```
Sub DeleteUnboldRows()
    Dim lastRow As Long
    Dim currentRow As Long

    'Select All the rows in the active worksheet
    lastRow = ActiveSheet.UsedRange.Rows.Count

    ' Iterate through each row from the bottom to the top.
    ' If we go the other way rows will get skipped as we delete unbolded rows!
    For currentRow = lastRow To 1 Step -1

        'Look at the cell in the first column of the current row
        ' if the font is not bolded delete the row
        If ActiveSheet.Rows(currentRow).Columns(1).Font.Bold = False Then
            ActiveSheet.Rows(currentRow).Delete
        End If
    Next currentRow
End Sub 
```

这是该`Bold`属性的参考：http: [//msdn.microsoft.com/en-us/library/office/aa224034%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa224034%28v=office.11%29.aspx)

# ruby-on-rails - 使用 cancan 和 devise 在 Rails 中授权未登录的用户行为

> ID：14639272
> 
> 赞同：2
> 
> 时间：2013-02-01T03:31:29.973
> 
> 标签：ruby-on-rails, authentication, devise, authorization, cancan

```
Post: hidden: boolean 
```

我希望登录用户可以看到所有帖子，而未登录用户只能访问隐藏字段为假的帖子。所以我在cancan的能力模型中是这样写的：

```
if user_signed_in?
    can :read, Post
else 
    can :read, Post, :hidden => false
end 
```

但模型中不允许访问帮助程序 user_signed_in。正如这个问题所述：[Rails 3 devise, current_user is not access in a Model ？](https://stackoverflow.com/questions/3742785/rails-3-devise-current-user-is-not-accessible-in-a-model#3742981). 虽然我们可以使用一些技巧来访问帮助程序，但这样做是不合适的

那么，如何正确授权未登录的用户呢？或者只是使用“包含”来使用这个助手？？

或者我应该把它放在身份验证部分？但如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:46:13.457

您需要做的就是：

```
def initialize(user)
  user ||= User.new # guest user (not logged in)

  can :read, Post, :hidden => false

  if User.exists?(user)
    can :read, Post
  end
end 
```

使用 devise，`current_user`helper 方法在登录时返回当前用户，但在未登录时返回 nil。它在控制器和视图中可用。默认情况下，CanCan 会针对`current_user`方法的返回执行所有授权检查。

现在，每当`can?`从视图或控制器调用该方法时，返回的`current_user`将`Ability`作为局部变量传递给 的新实例`user`。

要检查用户是否已登录，我选择使用`User.exists?()`. 这是一个类方法，用于`ActiveRecord::Base`检查该`user`对象是否保留在数据库中。任何其他方式都可以。例如，这将同样有效或更好：

```
if user.encrypted_password
  can :read, Post
end 
```

这将检查`user`实例的默认设计密码字段是否存在。如果您没有做任何太疯狂的事情，这只会在用户登录时返回一个值。如果第二个选项适用于您的情况，它可能会更好，因为您甚至不必查询数据库。

半相关提示，查看像[Rolify](https://github.com/EppO/rolify)这样的角色处理宝石。与 CanCan 结合使用时非常棒。

# java - 与 USB 加密狗通信，未找到 USB 端点错误

> ID：14639274
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:31:49.577
> 
> 标签：java, usb

我正在[学习 libusbjava](http://libusbjava.sourceforge.net/wp/)库中的[本](http://libusbjava.sourceforge.net/wp/res/demos/ReadWrite.java.html)教程。但是，当我尝试运行它时，它会引发以下错误。

```
ch.ntb.usb.USBException: No USB endpoints found. Check the device configuration 
```

这是程序的相关部分

```
public static void testDevice(){

    //Vendor ID, Product ID
    Device dev = USB.getDevice((short) 0x0bda, (short) 0x2838); 

    try{
        //Data to write to device
        byte[] data = new byte[]{0,1,2,3}; 
        //Data to read from device
        byte[] readData = new byte[data.length];

        dev.open(1, 0, -1);

        dev.writeInterrupt(0x81, data, data.length, 2000, false);

        dev.readBulk(0x81, readData, readData.length, 2000, false);

        logData(readData); 

        dev.close(); 

    }
    catch(USBException e){
        e.printStackTrace(); 
    }
} 
```

这是来自 USB 视图的设备信息

```
Device Descriptor:
bcdUSB:             0x0200
bDeviceClass:         0x00
bDeviceSubClass:      0x00
bDeviceProtocol:      0x00
bMaxPacketSize0:      0x40 (64)
idVendor:           0x0BDA
idProduct:          0x2838
bcdDevice:          0x0100
iManufacturer:        0x01
iProduct:             0x02
iSerialNumber:        0x03
bNumConfigurations:   0x01

ConnectionStatus: DeviceConnected
Current Config Value: 0x01
Device Bus Speed:     Full
Device Address:       0x02
Open Pipes:              1

Endpoint Descriptor:
bEndpointAddress:     0x81
Transfer Type:        Bulk
wMaxPacketSize:     0x0200 (512)
bInterval:            0x00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:48:15.520

您的设备有一种`bulk IN`类型的端点——它只能以批量模式向主机发送数据。但是您尝试写信给它：

`dev.writeInterrupt(0x81, data, data.length, 2000, false);`

这不起作用，您需要一个`interrupt OUT`类型端点。它也将具有不同的端点地址。

# ocaml - 整数列表到整数 OCaml

> ID：14639275
> 
> 赞同：1
> 
> 时间：2013-02-01T03:31:53.207
> 
> 标签：ocaml

我是 OCaml 的新手，所以我正在学习基础知识。我正在编写一个函数来确定列表是否包含给定的整数。

```
let rec int_member (x: int) (l: int list) : bool 
begin match l with
| [] -> false
| hd :: rest -> x = hd || int_member rest x
end 
```

作为测试用例...

```
let test (): bool =
(int_member 1 [1;2;3]) = true
;; run_test "contains 1 [1;2;3]" test 
```

我收到一条错误消息，提示“此表达式的类型为 int 列表，但表达式应为 int 类型”。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:38:56.620

如果您查看您的递归调用，您应该会发现您没有完全正确地传递参数！否则这段代码是相当不错的。（我看到一个缺失的`=`, 并且在这里使用`begin`and`end`不是很惯用的 OCaml。你可以把它们排除在外。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:39:09.280

> int_member 休息 x

的第一个参数`int_member`应该是一个`int`. 您将 a`int list`作为第一个参数传递。这就是错误消息所抱怨的。

您只需切换参数的顺序。

PS：`begin ... end`您的代码中的 是多余的。

# php - 带有插入编码的 PHP/MySQL

> ID：14639276
> 
> 赞同：0
> 
> 时间：2013-02-01T03:32:16.583
> 
> 标签：php, mysql, encoding

我遇到了 MySQL 数据库和 PHP 的问题。这些是旧版本，它是 MySQL 4.1.2 和 PHP 4.3。

问题出在我正在插入数据库的某些值上，它们正在被转换为 UTF8。因此，当我对相同数据运行另一个查询时，它必须转换部分数据，例如下面的更新查询。

```
UPDATE `course_pages` 
SET `body` = '<p>dfhdgfhdfhg</p>', `last_modified` = NOW() 
WHERE CONVERT(`course_pages`.`assigned_id` USING utf8) = 'testCourseForEditor'
AND `course_pages`.`page` = 1 LIMIT 1; 
```

我从 PHP 运行的插入查询是：

```
INSERT INTO " . $this->course_page_table . "
        SET
            assigned_id             = '" . $this->assigned_id . "',
            page                    =  " . $this->page . ",
            body                    = '" . $this->body . "',
            last_modified           = NOW()"; 
```

我正在使用的表的列排序规则设置为“latin1_swedish_ci”。这是在我开始在服务器上工作之前设置的，所以我不想更改它。我已经使用这个服务器一年多了，从来没有遇到过这个问题。我昨天才开始使用 Aptana Studio 3，但直到现在还没有发生过这样的事情。

# css - 样式文本数据库输出

> ID：14639278
> 
> 赞同：0
> 
> 时间：2013-02-01T03:32:27.050
> 
> 标签：css, ruby-on-rails

我有一个输入文本（而不是字符串）的数据库，我将它输出到

html中的标签。不幸的是，它输出了一段文本，我根本不知道如何设置它的样式，甚至不知道如何创建换行符。

数据库字段是：

```
t.string :content 
```

在我的 text_area 输入中，文本是一个简单的知识 ipsum。

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec risus ligula. Nulla quis bibendum justo. Sed nec tempus nisi. Curabitur in justo in mi ornare dictum sed et mi. Praesent sodales arcu nec ligula accumsan et gravida nulla gravida. Nullam in diam odio, a malesuada eros. Nunc et magna quis odio fermentum porta in et magna. Aliquam erat volutpat. Duis interdum, lacus malesuada mollis ullamcorper, tellus turpis placerat magna, non gravida tortor magna vel turpis. Nunc eu nunc nec nisi scelerisque mollis at cursus lectus. Quisque varius condimentum neque elementum rutrum. Cras porta, felis vitae porta cursus, nisl turpis tincidunt turpis, eu molestie ipsum ligula sit amet lectus. Sed aliquam lobortis nunc, at lobortis magna tristique vel. Donec faucibus ipsum non elit rhoncus posuere. 
```

html很简单

```
<p><%= @building.content %></p> 
```

输入 HTML 是

```
<%= f.label :content %>
<%= f.text_area :content %> 
```

我还没有 CSS 样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:17:03.303

试试这个并根据您的要求修复您的宽度。

```
<p style="word-wrap: break-word;"><%= @building.content %></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:09:29.867

您究竟想如何格式化文本？如果您只想更改字体、对齐方式、大小或强调，那么您可以使用 CSS。如果您想将文本转换为多个段落，我可能会以这种方式将其保存到数据库中。虽然您希望先对文本进行 html 编码，然后在将其输出到页面之前进行解码。高温高压

# c# - XML 与 .NET - 构建代码还是从文件中读取？

> ID：14639280
> 
> 赞同：1
> 
> 时间：2013-02-01T03:32:32.733
> 
> 标签：c#, asp.net, .net, xml, vb.net

我正在构建一个 Web 应用程序，它将使用 3rd 方图表组件生成图表和图形。此图表组件需要接收包含设计参数和数据的 XML 文件才能呈现图表。该应用程序可以为每个页面视图呈现多达 10 到 20 个图表。我正在寻找解决此问题的最有效方法的建议。

我需要加载 XML 模板，其中大约有 15-20 个，每个图表类型定义一个。加载模板后，我将添加图表特定数据并将其发送到图表组件进行渲染。我想到的一些可能的处理方法包括 ->

1.  使用 StringBuilder 在代码中构建每个 XML 模板
2.  使用 .NET XML 类之一在代码中构建每个 XML 模板
3.  将每个 XML 模板存储在一个文件中，按需从磁盘加载
4.  将每个 XML 模板存储在一个文件中，在应用程序启动时一次性加载它们

将 XML 模板存储在文件中将大大简化我的开发过程，但我不知道我会受到什么样的性能影响，尤其是如果我不断地从磁盘读取它们。似乎选项 4 会是更好的方法，但我不太确定实施该解决方案的最佳实践方法。

所以..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:49:45.900

我只是在尝试一下，但我会将模板保存到一个常量中，然后使用 string.format 替换任何值并转换为 XML 文件并将其传递给第 3 方组件。

```
const string cChart1 = @"<chart type='pie'>
    <total>{0}</total>
    <sections count={1}>
        <section>{2}</section>
        <section>{3}</section>
        <section>{4}</section>
    </section>
    </chart>";

    XmlDocument xmlChart1 = new XmlDocument();
    xmlChart1.LoadXML(String.format(cChart1, somevalue1, somevalue2, somevalue3, somevalue4, somevalue5));

    3rdPartyChartComponent cc = new 3rdPartyChartComponent(xmlChart1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:43:04.137

谢谢大家的建议。

我创建了一个测试应用程序，为每种建议的方法运行 x 次试验，以查看哪种方法表现最佳。事实证明，直接使用 StringBuilder 构建 XML 字符串的速度要快几个数量级，这不足为奇。

以任何方式涉及 XmlDocument 都会大大降低性能。应该注意的是，我的结果是基于对每种方法运行数千次试验......但在实际意义上，在我看来，这些方法中的任何一种都足够快，可以正确地完成工作。

当然，使用 StringBuilder 构建所有东西有点麻烦。我喜欢 Jarealist 的建议，它看起来更容易，如果我将 XML 作为字符串处理而不是将其加载到 XmlDocument 中，这是最快的方法之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:36:59.980

我很确定您可以告诉编译器将这些 XML 文件捆绑到您的 CLR exe 中。从这些中读取并不意味着明显的性能影响，因为它们已经在内存中。您需要进行一些研究，因为我现在无法将代码从脑海中清除，太困了。

编辑。

[http://msdn.microsoft.com/en-us/library/f45fce5x(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f45fce5x(v=vs.100).aspx) - 有关该主题的更多信息。

使用这种方法的另一个好处是 CLR 可以保证这些文件的可读性和存在性，否则您的可执行文件将损坏并且无法运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T03:37:50.140

是否多次使用相同的模板？您可以将模板存储为静态变量。然后添加一个构建模板的属性获取器（我可能会使用你的#2），如果它还没有被创建，然后返回它。

这会在第一次使用模板时对性能造成影响，之后会非常快。

# iphone - UIImageView 图像未在 GCD 的主线程上更新

> ID：14639282
> 
> 赞同：0
> 
> 时间：2013-02-01T03:33:02.527
> 
> 标签：iphone, ios, cocoa-touch, uiimageview

我有一些代码需要缩略图，对其应用`CoreImage`过滤器，然后将其设置为自定义`UITableViewCell's` `imageView`属性：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
    ^{
        CIImage *inputImage = [[CIImage imageWithCGImage:self.thumbnail.CGImage]retain];
        CIFilter *filter =    [[CIFilter filterWithName:@"CISepiaTone" keysAndValues:
                                kCIInputImageKey, inputImage,
                                @"inputIntensity", [NSNumber numberWithFloat:1.0],
                                nil] retain];
        CIImage *outputImage = [[filter outputImage] retain];
        CGImageRef cgimage = [self.context createCGImage:outputImage fromRect:[outputImage extent]];
        filtersTableViewCellItem.thumbnail = [UIImage imageWithCGImage:cgimage];

        [filter release];
        [outputImage release];
        [inputImage release];
        CGImageRelease(cgimage);

        dispatch_async(dispatch_get_main_queue(),
        ^{
            UITableViewCell *tableViewCell = [[self cellForRowAtIndexPath:indexPath] retain];

            if (tableViewCell)
            {
                [filtersTableViewCell.activityIndicatorView stopAnimating];
                filtersTableViewCell.imageView.image = filtersTableViewCellItem.thumbnail;
            }

            [tableViewCell release];
        });
    }); 
```

缩略图正在正确生成，但它没有在`imageView`. 我试过做`setNeedsDisplay`没有用。有趣的是，当我使用类似这样的代码但没有使用 custom`UITableViewCell`时，它工作得非常好。任何人都知道为什么这可能不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:44:53.607

尝试重新加载该单元格：

```
[self.tableView reloadRowsAtIndexPath:indexPath withAnimation:UITableViewRowAnimationAutomatic] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:26:33.107

发生这种情况是因为我在其 layoutSubviews 方法中加载了 UITableViewCell（我正在设置 UIImageView 的框架），这与我的 GCD 线程发生了一些冲突。我将所有这些代码都移到了 layoutSubviews 中，现在它可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:45:04.637

您需要检查几件事-

首先，您是否可能没有为该 nib 文件设置自定义视图？我有同样的问题。我为该视图控制器创建了一个 UIview 子类，进入 Interface Builder 并将视图设置为该 UIView 子类，然后将 UIView 的导入标头添加到 Controller 类中。这就是为我做的

# c# - 无法序列化类型为“Windows.UI.Xaml.Media.Imaging.BitmapImage”的成员“vehicleImage”

> ID：14639284
> 
> 赞同：0
> 
> 时间：2013-02-01T03:33:27.050
> 
> 标签：c#, xaml, windows-8

当我将类型 BitmapImage 添加到我的**Windows 8 应用程序**（如下）的类中时，我得到：

```
Cannot serialize member vehicleImage' of type 'Windows.UI.Xaml.Media.Imaging.BitmapImage', see inner exception for more details. 
```

内部异常详细信息：

```
 System.Runtime.InteropServices.WindowsRuntime.RuntimeClass is inaccessible due to its protection level. Only public types can be processed. 
```

代码：

```
public BitmapImage vehicleImage

        {
            get
            {
                return m_vehicleImage;
            }
            set
            {
                Uri _baseUri = new Uri("ms-appx:///");
                BitmapImage imageBitmap = new BitmapImage(new Uri(_baseUri, ImagePath));
                m_vehicleImage = imageBitmap;
                OnPropertyChanged("vehicleImage");
            }
        }

        private async void SetImage()
        {
            var file = await Windows.Storage.KnownFolders.PicturesLibrary.GetFileAsync(ImagePath);
            var fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
            var img = new BitmapImage();
            img.SetSource(fileStream);

            vehicleImage = img;
        } 
```

我正在将对象序列化为 XML。当我删除这段代码时，一切正常。我希望能够拥有用户从他们的计算机中选择的图像（这就是我尝试使用 BitmapImage 类型的原因）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:27:01.833

使用 System.Xml.Serialization 命名空间来访问这些属性的 [XMLIgnore()]。

您应该想要存储图像所在位置的字符串，对吗？然后序列化字符串，并 [XMLIgnore()] BitMapImage。

这允许在发生序列化时仍然可以访问位图图像。

# php - UrlRequest 在 SimpleButton 中不起作用

> ID：14639287
> 
> 赞同：0
> 
> 时间：2013-02-01T03:34:12.047
> 
> 标签：php, actionscript-3, flash, cakephp

我的主类中有一个 UrlRequest，它向 cakePHP 中的服务器发出请求，并且工作正常，但是当我通过单击按钮执行完全相同的请求时，它不起作用。

有人能帮我吗？

这是我执行请求的代码：

```
var token:String = LoaderInfo(root.loaderInfo).parameters.requestToken;
var myData:URLRequest = new URLRequest("users/personalInfo/"+token);
myData.method = URLRequestMethod.GET;

loader = new URLLoader(myData);
loader.addEventListener(Event.COMPLETE, onLoaded);
loader.dataFormat=URLLoaderDataFormat.TEXT;
loader.load(myData);

function onLoaded(e:Event):void {
    MovieClip(this.root).gotoAndStop("main");
} 
```

单击处理程序

```
public function SaveProfileButton() {
        addEventListener(MouseEvent.CLICK, mouseClick);
}

private function mouseClick(e:MouseEvent):void{
    MovieClip(this.root).output.text = "loading...";
    send();
} 
```

send() 是执行请求的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:21:21.333

I think you may need a cross domain policy xml on your server where the php is. 99% sure. [http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)

# c# - 检查控件文本是否为空的高效方法

> ID：14639290
> 
> 赞同：0
> 
> 时间：2013-02-01T03:34:51.337
> 
> 标签：c#, text, string

这 4 种方法中哪一种是检查控件文本是否为空性能明智的最有效方法？

```
 someObject.Text != ""

    someObject.Text != string.Empty

    someObject.Text.Length != 0

    !string.IsNullOrEmpty(someObject.Text) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:36:38.067

这就是我们所说的*过早优化*。

简短的回答：别担心。他们中的任何一个都很好。

# c# - Datagrid列可以在不同的行中包含不同类型的控件吗

> ID：14639292
> 
> 赞同：7
> 
> 时间：2013-02-01T03:34:59.260
> 
> 标签：c#, .net, wpf, mvvm

在 Wpf 中，我可以创建一个不同行在同一列中包含不同类型控件的数据网格吗？

对于最简单的情况：具有 5 列、2 行的数据网格，不关心 4 列，在第 5 列：

*   第一行：这是一个文本框
*   第二行：它是一个组合框。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T07:40:51.887

您可以使用 DataGridTemplateColumn 结合一些触发器来实现此功能。

这是一个将 DataGrid 绑定到（字符串）控件类型列表的演示应用程序。第一列只显示控件类型字符串，第二列作用于相同的信息呈现对应的Control。您也许可以使 xaml 更简洁一点，但这是它的要点：

XAML：

```
<Window x:Class="DataGridWithMultipleTypesPerColumn.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid ItemsSource="{Binding ControlTypes}"
              AutoGenerateColumns="False">
        <DataGrid.Columns>
        <DataGridTextColumn Header="Control Type" Binding="{Binding}"/>
            <DataGridTemplateColumn Header="Actual Control">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ContentControl>
                            <ContentControl.Style>
                                <Style TargetType="ContentControl">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding}" Value="TextBox">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <TextBox Text="Default Text"/>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding}" Value="CheckBox">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <CheckBox Content="Check Box"/>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding}" Value="Button">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <Button Content="Button"/>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ContentControl.Style>
                        </ContentControl>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

代码隐藏和视图模型：

```
namespace DataGridWithMultipleTypesPerColumn
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new ViewModel();
        }
    }

    public class ViewModel
    {
        public ObservableCollection<string> ControlTypes
        {
            get;
            private set;
        }
        public ViewModel()
        {
            ControlTypes = new ObservableCollection<string>() { "Button", "TextBox", "CheckBox" };
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T06:57:56.213

是的你可以。您需要为您的列创建一个模板。

请参阅：[WPF DataGrid 在单个列中的不同编辑控件](https://stackoverflow.com/questions/3277874/wpf-datagrid-different-edit-controls-within-a-single-column)

# oracle - 执行“立即执行”查询时出错

> ID：14639296
> 
> 赞同：0
> 
> 时间：2013-02-01T03:35:20.230
> 
> 标签：oracle

我必须将一个表的数据插入另一个表。我已经创建了一个程序。在过程中，一个 varchar2 变量代码如下 -

```
create or replace procedure proc_OneTimeLoad

 as
  query varchar2(5000);

begin

  OneTimeLoad_query := 'INSERT INTO trgt_table
              (Originterminal,
               Destinationterminal,
               Scheduledepartdate,
               Scheduledeparttime,
               Runtypenbr,
               DOW,
               Sched_Slip_Arr_Tm,
               DAY,
               Sched_Arr_Tm,
               Drivercode,
               Puprunflag,
               Sched_Cd,
               Status_Cd)

             SELECT Orgn_Term_Cd,
   Dest_Term_Cd,
   sysdate,
   Sched_Dep_Tm,
   Run_Nbr,
   DOW,
   to_date(
   LPAD(nvl(substr(tn.Sched_Slip_Arr_Tm,1,length(Sched_Slip_Arr_Tm)- 2),0),2,0)
   ||'''':''''||
   RPAD(nvl(TRUNC(TO_NUMBER(substr(Sched_Slip_Arr_Tm,3,length(Sched_Slip_Arr_Tm) - 2)) * .60,0),0),2,0)      
   ||'''':00''''
   ,''''HH24:MI:SS'''')
   as Sched_Slip_Arr_Tm,
   Day,
   to_date(
   LPAD(nvl(substr(tn.sched_arr_tm,1,length(sched_arr_tm)- 2),0),2,0)
   ||'''':''''||
   RPAD(nvl(TRUNC(TO_NUMBER(substr(sched_arr_tm,3,length(sched_arr_tm) - 2)) * .60,0),0),2,0)      
   ||'''':00''''
   ,''''HH24:MI:SS'''') 
   as Sched_Arr_Tm,
   Drvr_Cd,
   Pup_Run_Flg,
   ''''B'''',
   ''''1P''''
FROM src_table tn
WHERE tn.dow = to_char(sysdate - 1, ''''D'''')
AND tn.sched_dep_tm between
       TO_NUMBER(SUBSTR(TO_CHAR(sysdate, ''''HH24:MI:SS''''), 1, 2) ||
                 TRUNC(SUBSTR(TO_CHAR(sysdate, ''''HH24:MI:SS''''), 4, 2) * 100/60,0)) 
  AND
       TO_NUMBER(TO_NUMBER(SUBSTR(TO_CHAR(sysdate, ''''HH24:MI:SS''''), 1, 2)) + 12 ||
                 TRUNC(SUBSTR(TO_CHAR(sysdate, '''' HH24 :MI :SS ''''), 4, 2) * 100 / 60, 0))';

  execute immediate query;

  dbms_output.put_line(' Data loaded successfully');

end; 
```

执行此过程时出现错误“缺少右括号。我认为[']有一些问题。我想在查询中使用''来连接字符串。就像争取时间

**其中时间=to_date(HH||':'||mi||':'||ss,''HH24:MI:SS')**

请帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:06:34.630

您的动态 SQL 似乎逃脱了太多。即它看起来更正确：

```
 OneTimeLoad_query := 'INSERT INTO trgt_table
               (Originterminal,
                Destinationterminal,
                Scheduledepartdate,
                Scheduledeparttime,
                Runtypenbr,
                DOW,
                Sched_Slip_Arr_Tm,
                DAY,
                Sched_Arr_Tm,
                Drivercode,
                Puprunflag,
                Sched_Cd,
                Status_Cd)    
              SELECT Orgn_Term_Cd,
    Dest_Term_Cd,
    sysdate,
    Sched_Dep_Tm,
    Run_Nbr,
    DOW,
    to_date(
    LPAD(nvl(substr(tn.Sched_Slip_Arr_Tm,1,length(Sched_Slip_Arr_Tm)- 2),0),2,0)
    ||'':''||
    RPAD(nvl(TRUNC(TO_NUMBER(substr(Sched_Slip_Arr_Tm,3,length(Sched_Slip_Arr_Tm) - 2)) * .60,0),0),2,0)
    ||'':00''
    ,''HH24:MI:SS'')
    as Sched_Slip_Arr_Tm,
    Day,
    to_date(
    LPAD(nvl(substr(tn.sched_arr_tm,1,length(sched_arr_tm)- 2),0),2,0)
    ||'':''||
    RPAD(nvl(TRUNC(TO_NUMBER(substr(sched_arr_tm,3,length(sched_arr_tm) - 2)) * .60,0),0),2,0)
    ||'':00''
    ,''HH24:MI:SS'')
    as Sched_Arr_Tm,
    Drvr_Cd,
    Pup_Run_Flg,
    ''B'',
    ''1P''
 FROM src_table tn
 WHERE tn.dow = to_char(sysdate - 1, ''D'')
 AND tn.sched_dep_tm between
        TO_NUMBER(SUBSTR(TO_CHAR(sysdate, ''HH24:MI:SS''), 1, 2) ||
                  TRUNC(SUBSTR(TO_CHAR(sysdate, ''HH24:MI:SS''), 4, 2) * 100/60,0))
   AND
        TO_NUMBER(TO_NUMBER(SUBSTR(TO_CHAR(sysdate, ''HH24:MI:SS''), 1, 2)) + 12 ||
                  TRUNC(SUBSTR(TO_CHAR(sysdate, ''HH24:MI:SS ''), 4, 2) * 100 / 60, 0))';

   execute immediate OneTimeLoad_query; 
```

尽管给出了您的示例，但我不明白为什么此处不使用静态 SQL，因为您没有动态构建 SQL。即你为什么不开火：

```
INSERT INTO trgt_table
              (Originterminal,
               Destinationterminal,
               Scheduledepartdate,
               Scheduledeparttime,
               Runtypenbr,
               DOW,
               Sched_Slip_Arr_Tm,
               DAY,
               Sched_Arr_Tm,
               Drivercode,
               Puprunflag,
               Sched_Cd,
               Status_Cd)
             SELECT Orgn_Term_Cd,
   Dest_Term_Cd,
   sysdate,
   Sched_Dep_Tm,
   Run_Nbr,
   DOW,
   to_date(
   LPAD(nvl(substr(tn.Sched_Slip_Arr_Tm,1,length(Sched_Slip_Arr_Tm)- 2),0),2,0)
   ||':'||
   RPAD(nvl(TRUNC(TO_NUMBER(substr(Sched_Slip_Arr_Tm,3,length(Sched_Slip_Arr_Tm) - 2)) * .60,0),0),2,0)
   ||':00'
   ,'HH24:MI:SS')
   as Sched_Slip_Arr_Tm,
   Day,
   to_date(
   LPAD(nvl(substr(tn.sched_arr_tm,1,length(sched_arr_tm)- 2),0),2,0)
   ||':'||
   RPAD(nvl(TRUNC(TO_NUMBER(substr(sched_arr_tm,3,length(sched_arr_tm) - 2)) * .60,0),0),2,0)
   ||':00'
   ,'HH24:MI:SS')
   as Sched_Arr_Tm,
   Drvr_Cd,
   Pup_Run_Flg,
   'B',
   '1P'
FROM src_table tn
WHERE tn.dow = to_char(sysdate - 1, 'D')
AND tn.sched_dep_tm between
       TO_NUMBER(SUBSTR(TO_CHAR(sysdate, 'HH24:MI:SS'), 1, 2) ||
                 TRUNC(SUBSTR(TO_CHAR(sysdate, 'HH24:MI:SS'), 4, 2) * 100/60,0))
  AND
       TO_NUMBER(TO_NUMBER(SUBSTR(TO_CHAR(sysdate, 'HH24:MI:SS'), 1, 2)) + 12 ||
                 TRUNC(SUBSTR(TO_CHAR(sysdate, 'HH24:MI:SS '), 4, 2) * 100 / 60, 0)) 
```

# git - Git Repo 自动提交和推送

> ID：14639299
> 
> 赞同：0
> 
> 时间：2013-02-01T03:35:36.350
> 
> 标签：git, commit, post-commit, post-commit-hook, git-bare

我有一个场景，我有一个存储库，用户可以直接访问文件，他们不知道 git 存在，并对本质上是文本文件的内容进行更改。

我克隆了那个仓库。因此，当进行提交时，使用 post-commit 挂钩将更改推送到克隆的 repo。

现在，我将克隆的仓库作为裸仓库。但是，此时我想做的是在每次推送时运行一个脚本。该脚本将读取刚刚推送的文件的内容。这被视为提交吗？我可以再次使用提交后挂钩吗？

这可以在裸回购上完成吗？既然没有工作目录？如果回购是裸露的，我不知道如何“读取”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:43:35.937

是的，您可以使用挂钩。但是，您必须使用较低级别的 git 命令从裸仓库中检索提交树和文件。例如 [http://git-scm.com/book/ch9-2.html](http://git-scm.com/book/ch9-2.html)

# android - 在测试期间返回未经许可的 Android LVL 库

> ID：14639300
> 
> 赞同：0
> 
> 时间：2013-02-01T03:35:43.347
> 
> 标签：android, android-lvl

在启用 LVL 检查的情况下，我一直在向我的测试人员分发 beta APK，并且我收到了许多关于该应用程序表现得好像没有获得许可的报告。

这在 Play Store 中的当前版本中不是问题，并且 LVL 检查代码自我上次发布以来没有更改。

我想知道：LVL 库是否会返回“未经许可”或在尚未上传到 Android 开发者控制台的 APK 上出现不可预测的行为？从 Play 商店下载此更新后，这些问题是否可能会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:39:59.493

我最终推送了我的更新，并且我没有收到任何关于此代码许可失败的报告。

正如[该](https://plus.google.com/u/0/104649936579980037256/posts/KsempjzPSua)线程中所建议的，注释掉 LicenseValidator 中的 versionCode/mVersionCode 检查可能是我的 beta APK 失败的原因。希望对某人有所帮助。

# android - 应用程序为 Facebook 登录配置错误：Kindle Fire 集成问题

> ID：14639301
> 
> 赞同：3
> 
> 时间：2013-02-01T03:35:47.910
> 
> 标签：android, facebook, kindle-fire

我们在 Kindle Fire 安卓应用上集成了 Facebook 登录。它在大多数情况下都可以正常工作。但偶尔对于某些用户来说，当他们尝试使用 facebook 登录进行注册时，它会失败并显示错误“APP 为 facebook 登录配置错误”。我们检查了哈希键、包名和所有这些，它们都是正确的。正如我所说，它适用于 95% 的用户。对于那些失败的用户，它会反复失败。facebook的任何人都可以帮助我们解决这个问题吗？赞赏。（顺便说一句，我们为我们的 google play 版本的 android 应用程序使用相同的 facebook 应用程序，也使用不同的哈希键，我们的 google play 应用程序从未遇到过这个问题。我们从亚马逊获得了 Kindle 的哈希键。）因为它没有在我们的任何设备中失败，并且仅在某些随机用户的设备上失败，我们无法获得任何调试消息。

PS：我已经阅读了帖子[App is misconfigured for Facebook login: Android Facebook integration issue](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)。我是新用户，我不能在那里问这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-21T20:26:03.820

@Blanka 的回答在技术上是正确的，但是我找到了一种更简单的方法：只需转到亚马逊开发者控制台并复制我在红色矩形中突出显示的值：![SHA1 基数 64](../Images/ac39b1fe72da59fb2839d33561b3d449.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:31:14.517

我们在亚马逊应用商店中的一款应用也遇到了同样的问题。在我们的案例中，我们意识到只有当这三个条件为真时才会出现问题：

*   Kindle Fire HD
*   Facebook 应用程序已安装且用户已登录
*   用户还通过设置 -> 我的帐户 -> 管理社交帐户登录了 facebook

这可以解释为什么在你的情况下它只发生在 5% 的情况下。

据我们所知，亚马逊放弃了 .apk，这打破了 Facebook Android App Key Hash 检查。

涉及的解决方案：

1.  获取我们app的Amazon.apk（不是我们提交的，是亚马逊appstore分发的）
2.  从 .apk 文件中提取签名证书
3.  Base64 对编码证书的 SHA 摘要进行编码
4.  将生成的 Base64 密钥哈希添加到我们的 Facebook 应用设置

这解决了问题。

事实证明，获取 .apk 很棘手。应用程序位于设备文件系统的 /data/app 文件夹中。但是，此目录受到保护以防止将其列出，因此除非您知道要查找的文件的名称，否则您就不走运了。当然，您可以根设备。或者，您可以通过`adb pull /data/app/<app-id><suffix>.apk`where suffix is a empty string 或`-1`,`-2`等来试试运气，直到成功。例如：

```
$ adb pull /data/app/com.example.game.apk
remote object '/data/app/com.example.game.apk' does not exist
$ adb pull /data/app/com.example.game-1.apk
remote object '/data/app/com.example.game-1.apk' does not exist
$ adb pull /data/app/com.example.game-2.apk
3658 KB/s (1085140 bytes in 0.289s) 
```

如果这种方法失败，生根可能是唯一的选择。

获得 .apk 文件后，您可以使用下面的代码来获取密钥哈希。另存为`Main.java`，编译`javac Main.java`并运行`java Main <APK>`，例如：

```
$ javac Main.java
$ java Main com.example.game-1.apk
com.example.game-1.apk: 478uEnKQV+fMQT8Dy4AKvHkYibo= 
```

添加`478uEnKQV+fMQT8Dy4AKvHkYibo=`到我们的 Facebook 应用程序设置的密钥散列然后解决问题。我很好奇其他人是否找到我们得到的相同哈希（这意味着所有亚马逊游戏都使用相同的密钥退出）。在我们的例子中，哈希以`wwYPegrz...`.

这是代码：

```
import java.security.MessageDigest;
import java.security.cert.Certificate;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

import sun.misc.BASE64Encoder;

public class Main {
    public static void main(String[] args) throws Exception {
        for (String jarFilename : args)
            extractHash(jarFilename);
    }

    private static void extractHash(String jarFilename) throws Exception {
        BASE64Encoder base64 = new BASE64Encoder();
        MessageDigest sha1 = MessageDigest.getInstance("SHA");
        Set<Certificate> certificates = new HashSet<Certificate>();
        JarFile jarFile = new JarFile(jarFilename);
        for (JarEntry jarEntry : Collections.list(jarFile.entries())) {
            jarFile.getInputStream(jarEntry).skip(Long.MAX_VALUE);
            Certificate[] certs = jarEntry.getCertificates();
            if (certs == null)
                continue;
            certificates.addAll(Arrays.asList(certs));
        }
        System.out.printf("%s:", jarFilename);
        for (Certificate cert : certificates) {
            byte[] digest = sha1.digest(cert.getEncoded());
            System.out.printf(" %s", base64.encode(digest));
        }
        if (certificates.isEmpty())
            System.out.printf(" NOT SIGNED!");
        System.out.println();
        jarFile.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:35:57.330

Blanka 的解决方案有效。

但是，如果您可以在 Kindle Fire 上重现该问题，那么这里还有一个更容易实现的解决方案。

从 LogCat 中检索 Facebook 发送的身份验证请求：

```
03-13 15:21:19.360: D/WebCore(26863): *-* Total load time: 1535.31 ms, thread time: 287.00 ms for
https://m.facebook.com/dialog/oauth?android_key=XXXXXXXXXXXXX&calling_package_key=<app_package_id>
&client_id=YYYYYYYYYYYY&display=touch&redirect_uri=fbconnect%3A%2F%2Fsuccess&scope=email%
2Cpublish_stream&type=user_agent&_rdr 
```

`android_key`参数是`Hash Key`您的应用程序的。您需要在 Facebook 仪表板上添加此密钥。

**注意：**请注意，您在 https 请求中的哈希编码格式可能与 Facebook 所需的不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T05:02:57.203

发现了一种在 Kindle 或任何其他设备上处理此问题的更简单方法。如果您安装了 FB 应用程序（在我的情况下，我没有尝试其他登录路径，但也可以工作？），并且您使用的登录名在 developer.facebook.com 的 FB 应用程序中列为开发人员有问题的应用程序，哈希将出现在它在应用程序本身给您的错误消息中。表示“无法识别哈希键 xxxxxxxxxxxxxxxxx。在开发人员门户中管理您的哈希键以获取应用程序 ID yyyyyyyyyyyy”。

抱歉，如果文本不完全正确，我在自己解决问题之前没有截图，但这就是它的要点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:10:43.917

我认为 hashkey 的问题，我也面临同样的问题。我通过下载的 openssl 和生成的哈希解决了这个问题。尝试以下答案 [https://stackoverflow.com/a/14826036/1258999](https://stackoverflow.com/a/14826036/1258999)

# android - 加载 SharedPreference 给出 NullPointerException

> ID：14639303
> 
> 赞同：0
> 
> 时间：2013-02-01T03:36:01.227
> 
> 标签：android, nullpointerexception, sharedpreferences

我正在尝试从我的 SharedPreference 加载字符串对象，但我得到一个 NullPointerException 。我对此很陌生，所以我可能没有正确使用它。

错误在

> 加载首选项

在

> SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);

这是我的代码，

```
public class OfflineActivity extends Activity implements NetworkObserver {

    public GeoPoint ourLocationGeoPoint;
    public List<PointOfInterest> pointList = new ArrayList<PointOfInterest>();
    SharedPreferences pointsToAddToServer;
    int index;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.offline_mode_layout);

        //Load preferences
        loadPreferences();

        // Register for network status updates
        if (!NetworkStatus.isConnectedToInternet(getApplicationContext())) {
            NetworkStatus networkStatus = new NetworkStatus(this);
            networkStatus.addObserver(new OfflineActivity());
            Thread thread = new Thread(networkStatus);
            thread.start();
        }

        // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {

            public void onLocationChanged(Location location) {
                // Called when a new location is found by the network location
                // provider.
                /**
                 * Save Location to geopoint
                 */
                int lat = (int) (location.getLatitude() * 1E6);
                int lng = (int) (location.getLongitude() * 1E6);
                ourLocationGeoPoint = new GeoPoint(lat, lng);
            }

            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
            }

            public void onProviderEnabled(String provider) {
            }

            public void onProviderDisabled(String provider) {
            }
        };
        for (String provider : locationManager.getAllProviders()) {
            // Register the listener with the Location Manager to receive
            // location updates
            locationManager.requestLocationUpdates(provider, 0, 0,
                    locationListener);
        }
    }

    /**
     * Add new location to database
     * 
     * @param view
     */
    public void addCurrentLocation(View view) {

        if (ourLocationGeoPoint != null) {

            LayoutInflater inflater = LayoutInflater.from(this);
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            view = inflater.inflate(R.layout.new_location_dialog, null);
            builder.setView(view);

            // Set fields
            final EditText titleBox = (EditText) view.findViewById(R.id.title);
            final EditText descriptionBox = (EditText) view
                    .findViewById(R.id.description);
            final RatingBar ratingBar = (RatingBar) view
                    .findViewById(R.id.ratingBar);
            final Spinner categoryDropdownMenu = (Spinner) view
                    .findViewById(R.id.categoryDropDown);

            // When User clicks Save
            builder.setPositiveButton("Save",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int button) {

                            String title = titleBox.getText().toString();
                            String description = descriptionBox.getText()
                                    .toString();
                            String category = ("" + categoryDropdownMenu
                                    .getSelectedItem())
                                    .toLowerCase(Locale.ENGLISH);

                            int ratingNum = (int) ratingBar.getRating();
                            Log.d("User Setting title / description to: ",
                                    title + " : " + description);

                            // Create new Private Data field containing title /
                            // rating
                            PrivateField privateField = new PrivateField(
                                    "Michael", title, ratingNum);

                            // Create new point of Interest
                            PointOfInterest point = new PointOfInterest(
                                    category, description, ourLocationGeoPoint,
                                    privateField);

                            // Add to list to update later
                            Gson gson = new Gson();
                            String pointOfInterest = gson.toJson(point);

                            savePreferences(String.valueOf(index), pointOfInterest);
                            // Increase our index
                            index++;

                            Log.d("OfflineActivity", "Saving point "
                                    + point.latitude + ":" + point.longitude);
                            Toast.makeText(
                                    getBaseContext(),
                                    "Will add point \""
                                            + point.getTitle()
                                            + "\" when network connection has been made.",
                                    Toast.LENGTH_SHORT).show();
                        }
                    });

            // When User clicks cancel
            builder.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Log.d("Cancel setting Title & adding point", "");
                            return;
                        }
                    });

            builder.show();
        } else {
            Toast.makeText(this, "Could not determine location :(",
                    Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void updateStatus() {

        loadPreferences();
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();

        for (PointOfInterest poi : pointList) {
            UploadPointOfInterest uploadPointOfInterest = new UploadPointOfInterest(poi);
            uploadPointOfInterest.execute();
        }
        // Clear preferences, reset index
        editor.clear();
        editor.commit();
        index = 0;
    }

    /**
     * Save preferences
     * @param key
     * @param value
     */
    private void savePreferences(String key, String value) {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
    }

    /**
     * Load saved Preferences
     */
    private void loadPreferences() {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE); <-- NullPointer here
        PointOfInterest temp;
        PointOfInterest point;
        Gson gson = new Gson();

        /**
         * Load all points from shared prefs
         */
        for(int x =0; ;x++) {
            index = x;
            if(sharedPreferences.contains(String.valueOf(x))){
                temp = gson.fromJson(sharedPreferences.getString(String.valueOf(x), null), PointOfInterest.class);
                point = new PointOfInterest(temp.getType(),temp.getDescription(),temp.getGeoPoint(),temp.getPrivateField());
                Log.d("Offline activity", "Loading point from sharedpref: " + point.getTitle());
                pointList.add(point);
            }
            else {
                break;
            }
        }

    }
} 
```

和堆栈跟踪，

```
02-01 03:32:53.046: E/AndroidRuntime(30325): Uncaught handler: thread Thread-14 exiting due to uncaught exception
02-01 03:32:53.046: E/AndroidRuntime(30325): java.lang.NullPointerException
02-01 03:32:53.046: E/AndroidRuntime(30325):    at android.content.ContextWrapper.getPackageName(ContextWrapper.java:120)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at android.app.Activity.getLocalClassName(Activity.java:3413)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at android.app.Activity.getPreferences(Activity.java:3447)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at com.example.mapproject.OfflineActivity.loadPreferences(OfflineActivity.java:207)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at com.example.mapproject.OfflineActivity.updateStatus(OfflineActivity.java:177)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at com.example.mapproject.NetworkStatus.notifyObservers(NetworkStatus.java:58)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at com.example.mapproject.NetworkStatus.run(NetworkStatus.java:68)
02-01 03:32:53.046: E/AndroidRuntime(30325):    at java.lang.Thread.run(Thread.java:1096)
02-01 03:32:53.226: E/SemcCheckin(30325): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:35:14.677

由于每个人都没有阅读评论，因此 OP 的问题与偏好保存无关，它与他们实例化另一个 Activity 的事实有关。Android**不能**很好地处理这个问题，因为通过构造函数显式实例化的 Activity 是不完整的。操作所要做的就是改变

```
networkStatus.addObserver(new OfflineActivity()); 
```

到

```
networkStatus.addObserver(this); 
```

这样 Android 就不会创建 Activity 的新（坏）实例。

每当你看到类似的东西：

> java.lang.NullPointerException 02-01 03:32:53.046: E/AndroidRuntime(30325): 在
> 
> **android.content.ContextWrapper.getPackageName(ContextWrapper.java:120)**

它通常与由显式实例化引起的幕后操作（怎么可能`getPackageName()`是 null 呢？）有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:25:03.880

```
public void savePreference(String stringToSave){
    Editor custom_editor = custom_editor.edit();
    custom_editor.putString(NameToSaveAs, stringToSave);
    custom_editor.commit();
}

public String getPreferences(){
    return yourPreferenceName.getString(NameToSaveAs, null);
} 
```

你可以用你的其他待办事项修改它..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:35:50.950

问题就在这里，

```
 // Register for network status updates
    if (!NetworkStatus.isConnectedToInternet(getApplicationContext())) {
        NetworkStatus networkStatus = new NetworkStatus(this);
        networkStatus.addObserver(new OfflineActivity()); <----
        Thread thread = new Thread(networkStatus);
        thread.start();
    } 
```

本来应该：

```
 // Register for network status updates
    if (!NetworkStatus.isConnectedToInternet(getApplicationContext())) {
        NetworkStatus networkStatus = new NetworkStatus(this);
        networkStatus.addObserver(this); <----
        Thread thread = new Thread(networkStatus);
        thread.start();
    } 
```

# django - Django south - 无法删除 null

> ID：14639305
> 
> 赞同：0
> 
> 时间：2013-02-01T03:36:09.107
> 
> 标签：django, django-south

我有一个 Django 模型：

```
class Project(models.Model):
    ...
    user = models.ForeignKey(User, null=True, blank=True)
    product = models.ForeignKey(Product, null=True, blank=True) 
```

我想将产品字段更改为：

```
 ...
    product = models.ForeignKey(Product) 
```

但是当我改变它并运行南迁移时，我得到：

```
 django.db.utils.DatabaseError: (1005, "Can't create table 'mydb.#sql-3f5_208'    (errno: 121)") 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T23:39:06.233

我在安装 easy_thumbnails 时遇到了类似的错误。原来这是 South 0.7.3 中的一个错误，通过安装 South 0.8.1 很容易修复。我不知道这是否是同样的问题，但鉴于您使用的是 South，它似​​乎可能是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:23:15.743

出现该错误是因为您使用 InnoDB 表，并且您收到 121 错误，因为数据库您的密钥有问题。当我收到该错误时，我通过重新创建数据库来解决它:)

您也可以尝试阅读 InnoDB 错误日志文件。

PS尝试将一些数据添加到表中，有时它会起作用。

# ios - 情节提要中的 UITabBarController 与 BarItem 没有视图控件

> ID：14639307
> 
> 赞同：0
> 
> 时间：2013-02-01T03:36:22.340
> 
> 标签：ios, xcode, storyboard

我需要一个 baritem，它只执行一些代码而不去视图控制器。这可能吗？

我使用 TabBar Controller 模板开始了一个项目，情节提要显示了带有 2 个视图（第一个视图和第二个视图）的 tabbar 控制器

我想要做的是添加第三个栏项并让它在某个 .m 文件中调用一个函数我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:57:06.037

您可以实施`UITabBarControllerDelegate`. `tabBarController:shouldSelectViewController:`在其中，您执行要执行的代码，然后在最后 return `NO`。您的代码将被执行，但您仍停留在您所在的屏幕上。

但请注意，这不是很常见的 UI 设计，您应该真正考虑一种不同的方法。有关该主题的更多讨论，请参见此 SO[线程。](https://stackoverflow.com/questions/14046331/custom-tabbarcontroller-functionality)

# math - 如何找到具有以下约束的二进制数的数量：

> ID：14639310
> 
> 赞同：2
> 
> 时间：2013-02-01T03:36:37.680
> 
> 标签：math, binary, combinatorics

给定二进制数 n 和最大连续出现数 m，求不同可能二进制数的个数。此外，最左边和最右边的位必须为 1。

例如 n = 5，m = 3。

计数为7：10001 10011 10101 10111 11001 11011 11101

请注意，我们排除了 11111，因为其中存在太多连续的 1。

这是我最近遇到的一个面试问题，一直困扰着我。我不想暴力检查每个数字的合法性，因为 n 可以大于 32。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:59:10.593

如果二进制序列以“1”开头并且最多有连续的“1”位，我们就称它为*几乎有效*的二进制序列。`m`

For`i = 1, ..., n`和`j = 0, ..., m`let是长度以完全连续的“1”数字结尾`a(i, j)`的几乎有效序列的数量。`i``j`

然后

*   `a(1, 1) = 1`和`a(1, j) = 0 for j != 1`，因为“1”是唯一几乎有效的长度为 1 的序列。
*   因为我们有`n >= 2`，因为将“0”附加到任何几乎有效的长度序列都会给出一个几乎有效的以“0”结尾的长度序列。`j = 0``a(i, 0) = a(i-1, 0) + a(i-1, 1) + ... + a(i-1, m)``i-1``i`
*   因为我们有`n >= 2`，因为将“1”附加到带有尾随的几乎有效的序列会给出一个几乎有效的长度序列和尾随的序列。`j > 0``a(i, j) = a(i-1, j-1)``i-1``j``i`

最后，想要的数字是长度几乎有效且`n`尾随“1”的序列的数量，所以这是

```
f(n, m) = a(n, 1) + a(n, 2) + ... + a(n, m) 
```

写成 C 函数：

```
int a[NMAX+1][MMAX+1];
int f(int n, int m)
{
    int i, j, s;

    // compute a(1, j):
    for (j = 0; j <= m; j++)
        a[1][j] = (j == 1);

    for (i = 2; i <= n; i++) {
        // compute a(i, 0):
        s = 0;
        for (j = 0; j <= m; j++)
            s += a[i-1][j];
        a[i][0] = s;

        // compute a(i, j):
        for (j = 1; j <= m; j++)
            a[i][j] = a[i-1][j-1];
    }

    // final result:
    s = 0;
    for (j = 1; j <= m; j++)
        s += a[n][j];
    return s;
} 
```

甚至可以提高存储要求，因为只`a`需要矩阵的最后一列。运行时复杂度为`O(n*m)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:00:15.173

如果没有太多的组合洞察力，您可以使用 DP 解决这个问题。让我们将^(left) # [n,m] ^(right)称为长度为n 的二进制字符串的数量，其中没有连续1 的子字符串比m 长，从字符串left 开始，以字符串right 结束。显然，我们想要找到¹ # [n-2,m] ¹。

关键的观察很简单，就是^(left) # [n,m] ^(right) = ^(left+'1') # [n-1,m] ^(right) + ^(left+'0') # [n-1,m] ^(right)

js 中的一个简单实现（不确定它是否适用于小 m，并且通常未经测试）：

```
function hash(n,m) {

   return _('1',n-2);

   function _(left,n){
      if (m+1 <= left.length && left.lastIndexOf('0') <= left.length-m-2)
         return 0;
      if (n==0)
         return (m <= left.length &&
                 left.lastIndexOf('0') <= left.length-m-1 ? 0:1);
      return _(left+'1',n-1) + _(left+'0',n-1);
   }

}

hash(5,3); // 7 
```

当然这比蛮力更有效，但是运行时复杂度仍然是指数级的，因此对于较大的 n 值是不切实际的。

# excel - Excel VBA 比较两个工作表并将某些单元格输出到一个新的

> ID：14639315
> 
> 赞同：0
> 
> 时间：2013-02-01T03:37:03.803
> 
> 标签：excel, vbscript, compare, range, cells

我已经尝试了几个小时来做​​到这一点，但不是 VBScript 的专家，我想我需要一点帮助。

这就是我所反对的。我有 2 个不同的工作表，其中包含一些相同的信息。

```
WORKSHEET1
Section/Dept    City    Building    SVD User Name   Item Short Code Item Full Name      SUPPLIER_SC Serial Number       IP Address  Product Class   Product     Item Status
BT&IT-         WINNIPEG GATEWAY CO  IT NETWORK      CHK0639V1JX     07JACM401093000MSYS000  CISCO   WNPIMBTVBBN-DSTH    1.2.3.4     SWITCHES       3550-24       ACTIVE

WORKSHEET2
Hostname           Management IP    Device Type        Vendor   Model           Software Version    Serial Number   Location    In Site
wnpimbtvbbn-dsth    1.2.3.4          Cisco IOS Switch   Cisco   catalyst355024  12.1(11)EA1        CHK0639V1JX     Gateway CO   Entire Network\Winnipeg\MTS TV Head End\ 
```

我想要做的是将两者关联起来并输出到第三个，以便重新组织信息以导入数据库。基本上，如果在 WORKSHEET1 的“项目短代码/项目全名/序列号”中的任何一个中找到“主机名”表单 WORKSHEET2，我想输出“sheet1.item 短代码”，然后从 SHEET2 输出整行，但在不同的命令。此外，如果未找到匹配项，则从 SHEET2 输出整行...

据我所知，这大约是：

```
Sub CompareandOutput()
    Dim inv1 As Range
    Dim Assyst1 As Range
    Dim Assyst2 As Range
    Dim Assyst3 As Range
    Dim Inventory1Items As Range
    Dim Assyst1Items As Range
    Dim Assyst2Items As Range
    Dim Assyst3Items As Range
    Sheet3.Cells.Clear

    Set Inventory1Items = Sheet2.Range("A2", Sheet2.Range("A65536").End(xlUp))
    Set Assyst1Items = Sheet1.Range("E4", Sheet1.Range("E65536").End(xlUp))
    Set Assyst2Items = Sheet1.Range("F4", Sheet1.Range("F65536").End(xlUp))
    Set Assyst3Items = Sheet1.Range("H4", Sheet1.Range("H65536").End(xlUp))

    Sheet3.Range("A1") = "Old Short Code"
    Sheet3.Range("B1") = "New Short Code"
    Sheet3.Range("C1") = "New Full Name"
    Sheet3.Range("D1") = "Serial Number"
    Sheet3.Range("E1") = "Version"
    Sheet3.Range("F1") = "IP Address"
    Sheet3.Range("G1") = "Supplier"
    Sheet3.Range("H1") = "Product Class"
    Sheet3.Range("I1") = "Product"
    For Each inv1 In Inventory1Items
        Sheet3.Range("B65536").End(xlUp).Offset(1, 0) = inv1.Value
        Set Assyst1 = Assyst1Items.Find(inv1, LookIn:=xlValues, lookat:=xlWhole)
        If Not Assyst1 Is Nothing Then
        Sheet3.Range("A65536").End(xlUp).Offset(0, 0) = Cells(Assyst1.Row, "E")
        Sheet3.Range("C65536").End(xlUp).Offset(0, 0) = inv1.Value
        'Sheet3.Range("D65536").End(xlUp).Offset(1, 0) = Sheet2(Cells(Assyst1.Row, "D")).Select
        End If
        'Set Assyst2 = Assyst2Items.Find(inv1, LookIn:=xlValues, lookat:=xlWhole)
        'If Not Assyst2 Is Nothing Then
        'Sheet3.Range("B65536").End(xlUp).Offset(1, 0) = inv1.Row
        'End If
        'Set Assyst3 = Assyst3Items.Find(inv1, LookIn:=xlValues, lookat:=xlWhole)
        'If Not Assyst3 Is Nothing Then
        'Sheet3.Range("B65536").End(xlUp).Offset(1, 0) = inv1.Row
        'End If
    Next inv1

End Sub 
```

我确定我在这里完全偏离了轨道，并且有一种更简单的方法可以做到这一点。任何帮助都将不胜感激。

* * *

好的是的......仍然需要帮助。取得了重大进展，但只有最后一件小事不起作用。基本上我一辈子都无法获得函数 CheckForMatch，将其结果“itemShortCode”传递给私有子“exporttonewworksheet”。一切正常，直到函数结束，主子和导出子似乎没有得到值。我确定我在这里不理解一些基本的东西......

```
Public Enum Assyst1Columns
    Section_Dept = 1
    City
    Building
    SVD_User_Name
    Item_Short_Code
    Item_Full_Name
    SUPPLIER_SC
    Serial_Number
    IP_Address
    Product_Class
    Product
    Item_Status
End Enum

Public Enum Inventory1Columns
    Hostname = 1
    Management_IP
    Device_Type
    Vendor
    Model
    Software_Version
    Serial_Number
    Location
    In_Site
End Enum
Public Sub main()
    Dim Assyst As Excel.Worksheet
    Dim Inventory As Excel.Worksheet
    Dim Output As Excel.Worksheet
    Set Assyst = ThisWorkbook.Worksheets("Assyst")
    Set Inventory = ThisWorkbook.Worksheets("Inventory")
    Dim InventoryItems As Range
    Sheet3.Cells.Clear

    'Set Output1 = ThisWorkbook.Worksheets.Add

    'Output1.Name = "Output1"

    Dim newWkRow As Long
    newWkRow = 1

    Dim test As String
    Set InventoryItems = Inventory.Range("A2", Inventory.Range("A65536").End(xlUp))
    ' loop through wk2
    For Each hname In InventoryItems
        ' for each wk2.Cell found, call checkForMatch()
        ' store checkForMatch() value into variable
        itemShortCode = checkForMatch(hname, Assyst)
        'Sheet3.Range("A65536").End(xlUp).Offset(1, 0) = hname
        ' export to new worksheet
        test = itemShortCode

        exportToNewWorksheet Output, Inventory, hname.Row, newWkRow, itemShortCode

        newWkRow = newWkRow + 1 ' the only reason for newWkRow is if you want to skip any
                                ' entries from WORKSHEET2\. So it's best to keep this count separate
                                ' from your current loop row

    Next
End Sub

Private Function checkForMatch(ByVal hname As String, ByRef Assyst As Excel.Worksheet) As String
    ' PLEASE NOTE: wk1 does NOT need to match in the function definition to that of the
    '               variable defined in main()
    ' search for match from Inventory to Assyst
    Dim item As String
    Dim test As String
    Dim matches As String
    Dim Assyst1Items As Range
    Set Assyst1Items = Assyst.Range("A4", Assyst.Range("L65536").End(xlUp))

    On Error Resume Next
    matches = Assyst1Items.Find(hname, LookIn:=xlValues, lookat:=xlWhole)

    ' if found, return the Item_Short_Code
    If Not matches = "" Then
        item = matches
    ' otherwise return vbNullString
    Else
        item = vbNullString
    End If
    itemShortCode = item
End Function

Private Sub exportToNewWorksheet(ByRef Output As Excel.Worksheet, _
                                ByRef Inventory As Excel.Worksheet, _
                                ByRef hname As Long, _
                                ByVal newWkRow As Long, _
                                Optional ByVal itemShortCode As String = vbNullString)

    ' put data into new row. be sure to use the Enum to re-order the column as you like
    If itemShortCode = "" Then
        Sheet3.Cells(newWkRow, 2).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 3).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 4).Value = Inventory.Cells(hname, Inventory1Columns.Management_IP).Value
        Sheet3.Cells(newWkRow, 5).Value = Inventory.Cells(hname, Inventory1Columns.Device_Type).Value
        Sheet3.Cells(newWkRow, 6).Value = Inventory.Cells(hname, Inventory1Columns.Vendor).Value
        Sheet3.Cells(newWkRow, 7).Value = Inventory.Cells(hname, Inventory1Columns.Model).Value
        Sheet3.Cells(newWkRow, 8).Value = Inventory.Cells(hname, Inventory1Columns.Software_Version).Value
        Sheet3.Cells(newWkRow, 9).Value = Inventory.Cells(hname, Inventory1Columns.Serial_Number).Value
    Else
        ' store data another way
        Sheet3.Cells(newWkRow, 1).Value = Assyst.Cells(hname, Assyst1Columns.Item_Short_Code).Value
        Sheet3.Cells(newWkRow, 2).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 3).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 4).Value = Inventory.Cells(hname, Inventory1Columns.Management_IP).Value
        Sheet3.Cells(newWkRow, 5).Value = Inventory.Cells(hname, Inventory1Columns.Device_Type).Value
        Sheet3.Cells(newWkRow, 6).Value = Inventory.Cells(hname, Inventory1Columns.Vendor).Value
        Sheet3.Cells(newWkRow, 7).Value = Inventory.Cells(hname, Inventory1Columns.Model).Value
        Sheet3.Cells(newWkRow, 8).Value = Inventory.Cells(hname, Inventory1Columns.Software_Version).Value
        Sheet3.Cells(newWkRow, 9).Value = Inventory.Cells(hname, Inventory1Columns.Serial_Number).Value
        ' etc...
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:18:28.637

我怀疑有一种简单的方法可以做到这一点。据我了解，您想尝试在另一个工作表的 3 个可能列中匹配一个工作表中的值，然后将两个工作表中的某些数据输出到新工作表。我真的没有看到一个聪明、简单的方法来做到这一点。

但是，这里有一些建议。请原谅我陈述您已经知道的项目，因为它接缝您确实知道如何编程：

**利用 Enum 查找并重新排序复制的数据**

例子：

```
Public Enum wks1Columns
    Section_Dept = 1
    City
    Building
    SVD_User_Name
    Item_Short_Code
    etc
End Enum

Public Enum wks2Columns
    Hostname = 1
    Management_IP
    Device_Type
    etc
End Enum

Public Sub test()
    Dim wk1 As Excel.Worksheet
    Dim wk2 As Excel.Worksheet
    Set wk1 = ThisWorkbook.Worksheets("WORKSHEET1")
    Set wk2 = ThisWorkbook.Worksheets("WORKSHEET2")

    ' imagine Building is in column 5 in WORKSHEET1 and SVD is in column 7 in WORKSHEET1
    ' but you wanted to put them in columns 1 and 2 in the new worksheet
    Sheet1.Cells(1, 1).Value = wk1.Cells(1, wks1Columns.Building).Value
    Sheet1.Cells(1, 2).Value = wk1.Cells(1, wks1Columns.SVD_User_Name).Value

    ' and you wanted stuff from WORKSHEET2 in the same row
    Sheet1.Cells(1, 3).Value = wk2.Cells(1, wks2Columns.Hostname).Value
End Sub 
```

使用枚举，您可以存储已在工作表中设置列的方式，然后使用它们使用枚举方法轻松地重新排序新工作表。很酷的是，如果 Section Dept 的 WORKSHEET1 列移动到第 2 列和 City 到第 1 列，您只需要重新排序枚举和 BOOM，您就完成了修改代码；）

**将您的功能分解为更小的任务**

这绝对是您正在尝试执行的一项复杂任务，如果您将所有这些都放在一个大的`Sub`. 就像是：

```
Public Sub main()
    Dim wk1 As Excel.Worksheet
    Dim wk2 As Excel.Worksheet
    Dim wkNew As Excel.Worksheet
    Set wk1 = ThisWorkbook.Worksheets("WORKSHEET1")
    Set wk2 = ThisWorkbook.Worksheets("WORKSHEET2")
    Set wkNew = ThisWorkbook.Worksheets.Add

    wkNew.Name = "My New Worksheet"

    Dim newWkRow As Long
    newWkRow = 1

    Dim itemShortCode As String

    ' loop through wk2
    ' for each wk2.Cell found, call checkForMatch()
        ' store checkForMatch() value into variable
        itemShortCode = checkForMatch("my value", wk1)

        ' export to new worksheet
        exportToNewWorksheet wkNew, wk2, currentRowFromLoop, newWkRow, itemShortCode

        newWkRow = newWkRow + 1 ' the only reason for newWkRow is if you want to skip any
                                ' entries from WORKSHEET2\. So it's best to keep this count separate
                                ' from your current loop row

    ' next
End Sub

Private Function checkForMatch(ByRef theValue As String, ByRef wk1 As Excel.Worksheet) As String
    ' PLEASE NOTE: wk1 does NOT need to match in the function definition to that of the
    '               variable defined in main()

    ' search for match from wk2 to wk1

    ' if found, return the Item_Short_Code
    ' otherwise return vbNullString

End Function

Private Sub exportToNewWorksheet(ByRef newWs As Excel.Worksheet, _
                                ByRef wk2 As Excel.Worksheet, _
                                ByRef wk2Row As Long, _
                                ByVal newRow As Long, _
                                Optional ByVal Item_Short_Code As String = vbNullString)

    ' put data into new row. be sure to use the Enum to re-order the column as you like
    If (Item_Short_Code <> vbNullString) Then
        ' store data one way
        ' ...
    Else
        ' store data another way
        newWs.Cells(newRow, 1).Value = Item_Short_Code
        newWs.Cells(newRow, 2).Value = wk2.Cells(wk2Row, wks2Columns.Hostname).Value
        ' etc...
    End If
End Sub 
```

我想你可能会被这一切的语法所吸引。我在您的代码中看到的一些提示：

1.  完全限定您的范围对象。该`Cell`对象始终引用活动工作表的单元格，如果您从另一个工作表运行代码，它不会帮助您，而您并不打算这样做。
2.  `Offset(0,0)`不做任何事情。`.Value`如果你想设置一个范围的值，只需使用
3.  如果您的主工作表的所有列的最后一行都相同，您可以将最后一行存储到一个变量中，并在后续的 Range 集中使用它
4.  我认为您之前已经编程过，如果是这样，您将直接浏览一些在线找到的 VBA 教程。值得付出努力，即使您的截止日期很紧。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:22:13.307

适用于任何可能试图做同样事情的人的工作代码。它不漂亮，但它有效。感谢约瑟夫的所有帮助和建议！！！

```
Public Enum Assyst1Columns
    Section_Dept = 1
    City
    Building
    SVD_User_Name
    Item_Short_Code
    Item_Full_Name
    SUPPLIER_SC
    Serial_Number
    IP_Address
    Product_Class
    Product
    Item_Status
End Enum

Public Enum Inventory1Columns
    Hostname = 1
    Management_IP
    Device_Type
    Vendor
    Model
    Software_Version
    Serial_Number
    Location
    In_Site
End Enum
Public Sub main()
    Dim Assyst As Excel.Worksheet
    Dim Inventory As Excel.Worksheet
    Dim Output As Excel.Worksheet
    Set Assyst = ThisWorkbook.Worksheets("Assyst")
    Set Inventory = ThisWorkbook.Worksheets("Inventory")
    Dim InventoryItems As Range
    Sheet3.Cells.Clear

    Sheet3.Range("A1") = "Old Item Short Code"
    Sheet3.Range("B1") = "New Item Short Code"
    Sheet3.Range("C1") = "New Item Full Name"
    Sheet3.Range("D1") = "IP Address"
    Sheet3.Range("E1") = "Product Class"
    Sheet3.Range("F1") = "Supplier"
    Sheet3.Range("G1") = "Product"
    Sheet3.Range("H1") = "Version"
    Sheet3.Range("I1") = "Serial Num"

    Dim newWkRow As Long
    newWkRow = 2

    Set InventoryItems = Inventory.Range("A2", Inventory.Range("A65536").End(xlUp))
    ' loop through Inventory Worksheet
    For Each hname In InventoryItems

        ' for each cell found, call checkForMatch()
        ' store checkForMatch() value into variable
        itemShortCode = checkForMatch(hname, Assyst)

        ' export to new worksheet
        exportToNewWorksheet Assyst, Inventory, hname.Row, newWkRow, itemShortCode

        newWkRow = newWkRow + 1 ' the only reason for newWkRow is if you want to skip any
                                ' entries from WORKSHEET2\. So it's best to keep this count separate
                                ' from your current loop row

    Next
End Sub

Private Function checkForMatch(ByVal hname As String, ByRef Assyst As Excel.Worksheet) As String
    ' PLEASE NOTE: hname does NOT need to match in the function definition to that of the
    '               variable defined in main()
    ' search for match from Inventory to Assyst
    Dim matches As Range
    Dim Assyst1Items As Range
    Set Assyst1Items = Assyst.Range("A4", Assyst.Range("L65536").End(xlUp))

    On Error Resume Next
    Set matches = Assyst1Items.Find(hname, LookIn:=xlValues, lookat:=xlWhole)

    ' if found, return the Item_Short_Code
    If Not matches = "" Then
        checkForMatch = matches.Row

    ' otherwise return vbNullString
    Else
        checkForMatch = vbNullString
    End If

End Function

Private Sub exportToNewWorksheet(ByRef Assyst As Excel.Worksheet, _
                                ByRef Inventory As Excel.Worksheet, _
                                ByRef hname As Long, _
                                ByVal newWkRow As Long, _
                                Optional ByVal itemShortCode As String)

    'store data that's old but update data with Inventory ws
    If itemShortCode = "" Then
        Sheet3.Cells(newWkRow, 2).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 3).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 4).Value = Inventory.Cells(hname, Inventory1Columns.Management_IP).Value
        Sheet3.Cells(newWkRow, 5).Value = Inventory.Cells(hname, Inventory1Columns.Device_Type).Value
        Sheet3.Cells(newWkRow, 6).Value = Inventory.Cells(hname, Inventory1Columns.Vendor).Value
        Sheet3.Cells(newWkRow, 7).Value = Inventory.Cells(hname, Inventory1Columns.Model).Value
        Sheet3.Cells(newWkRow, 8).Value = Inventory.Cells(hname, Inventory1Columns.Software_Version).Value
        Sheet3.Cells(newWkRow, 9).Value = Inventory.Cells(hname, Inventory1Columns.Serial_Number).Value
    Else
        ' store data that's new (doesn't match)
        Sheet3.Cells(newWkRow, 1).Value = Assyst.Cells(itemShortCode, Assyst1Columns.Item_Short_Code).Value
        Sheet3.Cells(newWkRow, 2).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 3).Value = Inventory.Cells(hname, Inventory1Columns.Hostname).Value
        Sheet3.Cells(newWkRow, 4).Value = Inventory.Cells(hname, Inventory1Columns.Management_IP).Value
        Sheet3.Cells(newWkRow, 5).Value = Inventory.Cells(hname, Inventory1Columns.Device_Type).Value
        Sheet3.Cells(newWkRow, 6).Value = Inventory.Cells(hname, Inventory1Columns.Vendor).Value
        Sheet3.Cells(newWkRow, 7).Value = Inventory.Cells(hname, Inventory1Columns.Model).Value
        Sheet3.Cells(newWkRow, 8).Value = Inventory.Cells(hname, Inventory1Columns.Software_Version).Value
        Sheet3.Cells(newWkRow, 9).Value = Inventory.Cells(hname, Inventory1Columns.Serial_Number).Value
        ' etc...
    End If
End Sub 
```

# prolog - 如何在 Prolog 中创建使所有关系对称的规则？

> ID：14639317
> 
> 赞同：7
> 
> 时间：2013-02-01T03:37:20.447
> 
> 标签：prolog

我想要的是当我定义：

```
marriedTo(martin, annie). 
```

它也使以下事实成立：

```
marriedTo(annie, martin). 
```

我尝试了以下方法，但它（显然）是一个无限循环。

```
marriedTo(X,Y) :- marriedTo(Y,X). 
```

我将如何在 Prolog 中执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T09:50:37.620

最简单的解决方法是：

```
marriedTo(martin, annie).
...
married(X,Y) :- marriedTo(X,Y).
married(X,Y) :- marriedTo(Y,X). 
```

然后还有很多其他的方法、实现和语义来解决无限递归的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T18:27:16.013

毕竟我想通了：

```
marriedTo(X,Y) :- marriedTo(Y,Z), X = Z, !. 
```

# meteor - 在meteor.js 中是否可以重新开始已停止的订阅？

> ID：14639318
> 
> 赞同：1
> 
> 时间：2013-02-01T03:37:24.913
> 
> 标签：meteor

例如：

```
var subscription = Meteor.subscribe("allplayers");

//later

subscription.stop();

//later

subscription.start(); 
```

我知道 start() 不存在，因为我已经尝试过了。有不同的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T14:02:02.987

只需重新订阅发布即可重新启动订阅。

```
var subscription = Meteor.subscribe("allplayers");

//later - stop subscription

subscription.stop();

//later - restart subscription

subscription = Meteor.subscribe("allplayers"); 
```

# ruby - Ruby CSV，如何将两个变量和一个数组写入同一行？

> ID：14639321
> 
> 赞同：0
> 
> 时间：2013-02-01T03:37:58.950
> 
> 标签：ruby, csv, file-io

嘿伙计们，我正在编写一个 ruby​​ 程序，它读取 CSV 格式的食品和食谱数据库，并将其写回文件。我在正确写入 CSV 文件时遇到问题

我想将对象属性写入 CSV 文件

```
csv_text = CSV.open("FoodDB1.txt","w") do |i|
    @@dataList.each do |j|
        if j.get_type == "b"
            i << [j.name,j.get_type,j.cal]
        elsif j.get_type == "r"
            i << [j.name,j.get_type,j.print_bFood]
        end
    end
end 
```

我有两种类型的物品，基本食物和食谱。两者都存储在 dataList 数组中。我检查每个对象的类型，如果它是基本食物，编写它很容易，因为它只是三个简单的字段。如果是食谱，我会写下名称、类型和构成该食谱的基本食物。

我遇到的问题是在这条线上

```
i << [j.name,j.get_type,j.print_bFood] 
```

所以它会打印出食谱的名称、类型（无论是基本食物还是食谱），最后是食谱中的食物列表。那就是我遇到问题的地方。

bFood 是存储在对象中的一组基本食物，我无法将其添加到 CSV 行。我尝试创建一个方法（即 print_bFood），该方法使用 .join(",") 返回组合数组的字符串，但由于字符串中的逗号，当 CSV 将其写入文件时，它会用引号引起来

```
"PB&J Sandwich,r,"Jelly,Peanut butter,Bread slice, Bread slice"" 
```

我希望它看起来像这样

```
"PB&J Sandwich,r,Jelly,Peanut butter,Bread slice, Bread slice" 
```

关于什么可以提供帮助的任何想法。我一直在寻找方法来做到这一点，但我再也想不出任何东西了。

我的一个想法是，如果我能够添加到一行，我可以遍历 bFood 数组并将每个数组添加到行中，但我还没有找到任何可以做到这一点的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:57:06.050

如果我没看错，你应该只需要......

```
i << [j.name, j.get_type, j.bFood].flatten 
```

# haskell - Haskell 中高效的哈希映射容器？

> ID：14639322
> 
> 赞同：12
> 
> 时间：2013-02-01T03:38:13.650
> 
> 标签：haskell, hashmap, hashtable, unordered-map

我想使用 Haskell 计算存储在文件中的唯一块。该块只是长度为 512 的连续字节，目标文件的大小至少为 1GB。

这是我的初步尝试。

```
import           Control.Monad
import qualified Data.ByteString.Lazy as LB
import           Data.Foldable
import           Data.HashMap
import           Data.Int
import qualified Data.List            as DL
import           System.Environment

type DummyDedupe = Map LB.ByteString Int64

toBlocks :: Int64 -> LB.ByteString -> [LB.ByteString]
toBlocks n bs | LB.null bs = []
              | otherwise = let (block, rest) = LB.splitAt n bs
                            in block : toBlocks n rest

dedupeBlocks :: [LB.ByteString] -> DummyDedupe -> DummyDedupe
dedupeBlocks = flip $ DL.foldl' (\acc block -> insertWith (+) block 1 $! acc)

dedupeFile :: FilePath -> DummyDedupe -> IO DummyDedupe
dedupeFile fp dd = LB.readFile fp >>= return . (`dedupeBlocks` dd) . toBlocks 512

main :: IO ()
main = do
  dd <- getArgs >>= (`dedupeFile` empty) . head
  putStrLn . show . (*512) . size $ dd
  putStrLn . show . (*512) . foldl' (+) 0 $ dd 
```

它有效，但我对它的执行时间和内存使用感到沮丧。特别是当我与下面列出的 C++ 甚至 Python 实现进行比较时，它慢了 3~5 倍，并且消耗了 2~3 倍的内存空间。

```
import os
import os.path
import sys

def dedupeFile(dd, fp):
    fd = os.open(fp, os.O_RDONLY)
    for block in iter(lambda : os.read(fd, 512), ''):
        dd.setdefault(block, 0)
        dd[block] = dd[block] + 1
    os.close(fd)
    return dd

dd = {}
dedupeFile(dd, sys.argv[1])

print(len(dd) * 512)
print(sum(dd.values()) * 512) 
```

我认为这主要是由于 hashmap 实现，并尝试了其他实现，例如`hashmap`,`hashtables`和`unordered-containers`. 但是并没有什么明显的区别。

请帮助我改进这个程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T04:27:09.110

我认为您无法击败 python 字典的性能。它们实际上是在 c 中实现的，并且经过了多年的优化，另一方面，hashmap 是新的并且没有那么优化。因此，在我看来，获得 3 倍的性能就足够了。您可以在某些地方优化您的 haskell 代码，但这仍然无关紧要。如果您仍然坚持提高性能，我认为您应该在代码中使用高度优化的 c 库和 ffi。

以下是一些类似的讨论

[哈斯克尔初学者](http://comments.gmane.org/gmane.comp.lang.haskell.beginners/10033)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T04:42:11.540

根据您的使用情况，这可能完全无关紧要，但我有点担心`insertWith (+) block 1`. 如果您的计数达到很高的数字，您将在哈希映射的单元格中累积 thunk。你使用 没关系`($!)`，这只会迫使脊椎 - 这些值可能仍然是懒惰的。

`Data.HashMap`没有提供严格的`insertWith'`版本`Data.Map`。但是你可以实现它：

```
insertWith' :: (Hashable k, Ord k) => (a -> a -> a) -> k -> a 
                                   -> HashMap k a -> HashMap k a
insertWith' f k v m = maybe id seq maybeval m'
    where
    (maybeval, m') = insertLookupWithKey (const f) k v m 
```

此外，您可能希望从 输出（但不输入）*严格*的ByteString列表`toBlocks`，这将使散列更快。

这就是我所拥有的——不过，我不是表演大师。

# profiling - gprof 不显示调用图

> ID：14639325
> 
> 赞同：5
> 
> 时间：2013-02-01T03:38:31.617
> 
> 标签：profiling, gprof

我正在使用 -pg 选项运行我的程序。当我打开输出 gmon.out 时，它只是累积列表而不是调用图表。我该如何解决？

我知道之前有人问过这个问题：[gprof - File is missing call-graph data](https://stackoverflow.com/questions/7701201/gprof-file-is-missing-call-graph-data)但是没有人真正回答这个问题，只给出了 gprof 替代方案的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T17:10:10.007

我也在寻找答案时遇到了令人失望的经历。

*具体来说：*以下对我有帮助（最新的 Ubuntu 2013 年 5 月）。尝试两者`-fno-reorder-functions`和`-fno-inline`。例如，在 cmake 下，这有效：

```
if(CMAKE_COMPILER_IS_GNUCXX)
  add_definitions(${CMAKE_CXX_FLAGS} "-Ofast")
  add_definitions(${CMAKE_CXX_FLAGS} "-fno-reorder-functions")
  add_definitions(${CMAKE_CXX_FLAGS} "-fno-inline")
endif() 
```

*通常：*尝试查看编译器优化文档。找到一个有效的优化级别，然后为下一个级别添加所有列出的选项。尝试使用二分法进行添加和删除。同样，在 cmake 中类似：

```
 add_definitions(${CMAKE_CXX_FLAGS} "-O1")
  add_definitions(${CMAKE_CXX_FLAGS} "-fthread-jumps")
  add_definitions(${CMAKE_CXX_FLAGS} "-falign-functions  -falign-jumps")
  add_definitions(${CMAKE_CXX_FLAGS} "-falign-loops  -falign-labels")
  # add_definitions(${CMAKE_CXX_FLAGS} "-fcaller-saves")
  # add_definitions(${CMAKE_CXX_FLAGS} "-fcrossjumping")
  # add_definitions(${CMAKE_CXX_FLAGS} "-fcse-follow-jumps  -fcse-skip-blocks")
  # add_definitions(${CMAKE_CXX_FLAGS} "-fdelete-null-pointer-checks") 
```

很可能是一两个优化选项导致了所有问题。

# oracle10g - Oracle 存储过程错误

> ID：14639326
> 
> 赞同：1
> 
> 时间：2013-02-01T03:38:48.063
> 
> 标签：oracle10g

我是 Oracle 的新手，正在尝试创建一个新程序但出现错误，

错误表达式 P_EMP_SAL 不能用作 SELECT/FETCH 语句的 INTO 目标。

```
CREATE OR REPLACE PROCEDURE getempsal(
        p_emp_id IN NUMBER,
        p_emp_month IN CHAR,
        p_emp_sal in INTEGER)

AS
BEGIN
    SELECT EMP_SAL
    INTO p_emp_sal
    FROM EMPLOYEE_SAL
    WHERE EMP_ID = p_emp_id
    and EMP_MONTH = p_emp_month;

END getempsal; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:48:59.207

您`IN`为要从过程返回的参数指定。试试`p_emp_sal OUT INTEGER`。

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#i4107](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#i4107)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T03:50:41.843

取出 put 参数 refcursor 并更改程序主体

```
Open outCursor for SELECT EMP_SAL
    INTO p_emp_sal
    FROM EMPLOYEE_SAL
    WHERE EMP_ID = p_emp_id
    and EMP_MONTH = p_emp_month; 
```

# c++ - Windows API MONITORINFO 结构

> ID：14639332
> 
> 赞同：5
> 
> 时间：2013-02-01T03:39:32.337
> 
> 标签：c++, winapi

我正在尝试从 Windows API 获取监控数据。该`GetSystemMetrics()`命令返回错误的像素宽度。根据微软的网站，这是因为我需要[`SetProcessDPIAware()`](http://msdn.microsoft.com/en-us/library/ms633543%28VS.85%29.aspx)

这意味着我最好能够创建一个我不理解的[应用程序清单。](http://msdn.microsoft.com/en-us/library/windows/desktop/cc530456%28v=vs.85%29.aspx)

在寻找同样低级的替代方案时，我发现了[多个显示监视器的功能和结构](http://msdn.microsoft.com/en-us/library/dd145073%28v=vs.85%29.aspx)。我必须通过`HMONITOR`才能访问我想要的 rect 结构，但获取`HMONITOR`是我遇到问题的地方。

`MonitorFromWindow(hwnd,MONITOR_DEFAULTTOPRIMARY)` 此命令超出范围 - 很奇怪，因为`GetMonitorInfo()`[我需要`HMONITOR`的] 不会导致任何问题。我已经拥有`windows.h`并`windowsx.h`包括在内。我错过了图书馆还是有什么问题？

在单独的说明中，在查看那里之后很明显，使用户可调节使用的显示器也可能很好。 `SM_CMONITORS`应该返回一个计数，但我想知道如何将这些数字转换为`HMONITOR`我需要获取监视器特定信息的数据。

：：编辑：：

我将编辑放在这里是因为“评论”功能没有为我提供足够的空间来放置所请求的代码剪辑

另外，我将 GNU GCC 与 MinGW 一起使用

```
#include <iostream>//using these libraries
#include <Windowsx.h>
#include <windows.h>

using namespace std;

int main()
{
    //should print screen width in pixels

    LPMONITORINFO target;
        //create a monitor info struct to store the data to
    HMONITOR Hmon = MonitorFromWindow(hwnd,MONITOR_DEFAULTTOPRIMARY);
        //create a handle to the main monitor
        //(should start at top left of screen with (0,0) as apposed to other monitors i believe)
        //if i could gather aditional info on what monitors are available that might be           useful
    GetMonitorInfo(Hmon, target);
        //Get the necessary data and store it to target

    cout << "bottom of selected monitor in pixels: " << target->rcMonitor.bottom
         << "Top of the selected monitor" << target->rcMonitor.top
         << "right extreme of selected monitor" << target->rcMonitor.right
         << "left extreme of selected monitor" << target->rcMonitor.left;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T00:14:20.097

如果要使用 Windows 95/Windows NT 4 之后出现的功能，则必须在编译前指定 WINVER。

Windows 2000 是`WINVER` `0x0500`，所以需要添加编译行`-DWINVER=0x500`才能看到`MONITOR_DEFAULTTOPRIMARY`常量。

您需要分配一个`MONITORINFO`结构，而不是指向结构的指针`MONITORINFO`，并初始化该`cbSize`字段，以便 Windows 知道要填充哪些信息，因此在您的代码中：

```
MONITORINFO target;
target.cbSize = sizeof(MONITORINFO);

HMONITOR hMon = MonitorFromWindow(GetDesktopWindow(), MONITOR_DEFAULTTOPRIMARY);
GetMonitorInfo(hMon, &target); 
```

然后使用显示：

```
 target.rcMonitor 
```

代替

```
target->rcMonitor 
```

使用`SetProcessDPIAware()`, 是 Windows Vista 的一项功能，因此`WINVER`需要设置为`0x0600`，但 MinGW 附带的标头似乎不是 Windows Vista 的完整标头集 - 缺少该函数定义，但存在于 Windows 7 SDK 标头（我手头没有 Windows Vista SDK 来检查它）。

因此，使用清单似乎比使用更新的 API 更简单。

监视器句柄是监视器的不透明表示 - 即您获得的值不应用于其他监视器功能以外的任何内容。如果要遍历监视器结构，则应使用该[`EnumDisplayMonitors`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162610%28v=vs.85%29.aspx)函数和适当的回调例程。

# c++ - C++：使用 memcpy 时，myArray 和 &myArray 有什么区别？

> ID：14639334
> 
> 赞同：1
> 
> 时间：2013-02-01T03:39:40.803
> 
> 标签：c++, arrays, pointers, reference, memcpy

> **可能重复：**
> [为什么数组的地址等于它在 C 中的值？](https://stackoverflow.com/questions/2528318/how-come-an-arrays-address-is-equal-to-its-value-in-c)

在这种情况下：

```
int x = 5;
unsigned char myArray[sizeof (int)]; 
```

这条线...

```
memcpy (&myArray , &x , sizeof (int)); 
```

...产生与以下相同的结果：

```
memcpy (myArray , &x , sizeof (int)); 
```

我对 C++ 非常陌生，但我的印象是数组只是指向其数据的指针。当 &myArray 的工作方式与 myArray 相同时，我感到很震惊。我原以为它会试图复制到指针的地址，这将是非常糟糕的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:45:26.623

关于数组的两件事：

*   数组“衰减”到其元素类型的指针。这就是第二个版本有效的原因。看到这个：[数组名是指针吗？](https://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c)

*   有一个“指向数组的指针”这样的东西。它们很少使用，但看起来像这样：

* * *

```
int a[5];
int (*b)[5] = &a; // pointer to an array of 5 ints 
```

在`&`数组上使用运算符时，会为您提供指向数组类型的指针，这就是以下内容不起作用的原因：

```
int* b = &a; // error 
```

由于`memcpy`的参数是 a `void*`，它接受任何指针类型，两者都可以`&myArray`工作`myArray`。我会推荐使用它，`myArray`因为它更惯用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:44:58.023

您认为类型不同是正确的。`&myArray`is a `unsigned char(*)[]`(指向 unsigned char 数组的指针) 并且`myArray`(当作为参数传递给函数时) 变为 type `unsigned char*`(指向 unsigned char 的指针)。但是，请注意，即使类型不同，值也是**相同的 address**。两者都与 memcpy 一起工作的原因是因为`memcpy`需要`void*`并且不关心类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T03:45:45.417

> myArray 和 &myArray 有什么区别？

它们都指向 myArray 的第一个元素。

数组的名称通常计算为数组第一个元素的地址，因此 myArray 和 &myArray 具有相同的值。

[memcpy](http://en.cppreference.com/w/cpp/string/byte/memcpy)函数将目标内存地址作为输入参数。由于 myArray 和 &myArray 指向同一个地方，所以努力是一样的：

```
void* memcpy( void* dest, const void* src, std::size_t count );

Parameters
dest   -     pointer to the memory location to copy to
src    -     pointer to the memory location to copy from
count  -     number of bytes to copy 
```

# haskell - 在 Haskell 中使用映射和递归函数

> ID：14639335
> 
> 赞同：-3
> 
> 时间：2013-02-01T03:39:41.920
> 
> 标签：haskell, recursion

所以我正在学习如何在 Haskell 中编程。

我想看到的一件事是通过使用 map 和使用不使用列表理解的递归并且不使用 map 或任何其他高阶库函数，将 1 添加到列表的每个元素。

我认为看到这两种实现方式会很酷。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T04:19:48.173

如果您了解什么`map`，那么我认为编写您打算做的事情并不难。当你看到类型`map`

```
*Main> :t map
map :: (a -> b) -> [a] -> [b] 
```

所以它需要一个函数和一个列表，并在将该函数应用于列表的每个元素后返回另一个列表。因此，为了您的预期目的，为每个元素添加一个，您可以选择要使用的功能`(+1)`。所以

```
*Main> map (+1) [3,4,5,1,2]
[4,5,6,2,3] 
```

如果您了解基本的haskell，现在定义自己的函数很容易。您可以查看来源`map`寻求帮助。

```
map _ []     = []
map f (x:xs) = f x : map f xs 
```

它为您提供实现递归递增函数所需的所有帮助，例如

```
add' [] = []
add' (x:xs) = (x+1) : add' xs 
```

现在在 ghci 中试试这个

```
*Main> add' [3,4,5,1,2]
[4,5,6,2,3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:46:35.163

## 等式推理

Satvik 很好地解释了递归版本，但列表理解版本中有一些非常有趣的东西。让我们来看看。

```
add1 xs = [x + 1 | x <- xs] 
```

列表推导的语法与 Python 非常相似，但它们实际上只是普通语言结构的语法糖——`do`符号！

```
add1 xs = do x <- xs
             return (x + 1) 
```

由于我们只是在列表 monad 上进行操作，因此我们可以对`do`符号进行脱糖

```
add1 xs = xs >>= \x -> return (x + 1) 
```

然后应用一些转换

```
add1 xs = xs >>= return . (+1)
        = liftM (+1) xs
        = fmap  (+1) xs
        =  map  (+1) xs 
```

我们又回到了开始的地方。

# django - 用于喜欢/不喜欢的 RESTful api

> ID：14639337
> 
> 赞同：3
> 
> 时间：2013-02-01T03:39:58.553
> 
> 标签：django, rest, tastypie

我建模`like`为数据库表

```
class UserLikeAlbumImage(models.Model):
    user = models.ForeignKey(User)
    album_image = models.ForeignKey(AlbumImage)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ('user', 'album_image') 
```

目前我有

api/v1/userlikealbumimage/
api/v1/userlikealbumimage/3 #3是UserLikeAlbumImage的id

我希望有

/like/user/{user-id}/image/{image-id} 来自[REST 方式来检查/取消选中喜欢/不喜欢收藏/取消收藏资源](https://stackoverflow.com/questions/5665893/the-rest-way-to-check-uncheck-like-unlike-favorite-unfavorite-a-resource)

特别是因为，很自然地认为`like`是（用户，喜欢的对象）的组合。

```
/like/user/{user-id}/image/{image-id} 
GET: find out if user likes image
POST: `create` user likes image
DELETE: `delete` user likes image

/like/user/{user-id}/  
GET: list all images a user likes

/like/image/{image-id}/
GET: list all users who like this image 
```

所以我假设这个寻址方案可以用 django-tastypie 表达，我该如何开始？（我应该搜索什么？）

- - 编辑 - -

好的，我让它工作了

```
 def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/user/(?P<user__id>\d+)/image/(?P<album_image__id>\d+)/$" % self._meta.resource_name,
                self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
            ] 
```

现在的问题是，这样安宁吗？

# python - 在linux和mac中从python查询窗口id

> ID：14639338
> 
> 赞同：0
> 
> 时间：2013-02-01T03:40:02.280
> 
> 标签：python, linux, macos, window, cross-platform

有没有办法通过python的窗口名称查询窗口ID？也许可以跨平台工作的东西（linux / mac）？或者在直接从 os.sys 启动新窗口时更好地捕获该 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:53:40.457

不是在跨平台的基础上。虽然 Windows 在 Linux 和 Mac OS 上都有 ID，但 ID 的含义是完全不同的，你可以用它们做什么。两者之间基本上没有任何共同之处。

不，当您启动应用程序时，您无法获得这些 ID，因为窗口要到稍后才会创建。

# javascript - javascript未终止字符类

> ID：14639339
> 
> 赞同：13
> 
> 时间：2013-02-01T03:40:06.883
> 
> 标签：javascript, regex

```
var badCode = "\(INST1,\\[0,";
var regex = new RegExp(badCode, "igm"); 
```

得到“未终止的字符类”错误。

怎么修？

TIA

尝试响应者对此帖子的建议，请查看以下屏幕打印（您可能必须右键单击图像并在新选项卡中打开以使其清晰可见）：注意 new_bad_thing 的值（相当于上面的 badCode） ![](../Images/71c7f3ef60136908d2b0195eea2c4952.png)

这是我点击运行按钮时的屏幕打印（请注意错误消息）：

![在此处输入图像描述](../Images/037d4e31bf9676b33da1469c5bc1614d.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T03:45:03.300

将另一个反斜杠放在`badCode`：

```
var badCode = "\\(INST1,\\[0,";
var regex = new RegExp(badCode, "igm"); 
```

因为您需要一个`(`在正则表达式本身内部转义（表明它是一个字面括号）和一个用于 javascript 的转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T03:44:34.980

不，它得到“未终止的括号”，因为您忘记了转义反斜杠。为什么不使用正则表达式文字？

```
var regex = /\(INST1,\[0,/igm; 
```

# java - zxing二维码安静

> ID：14639340
> 
> 赞同：0
> 
> 时间：2013-02-01T03:40:07.430
> 
> 标签：java, qr-code

我目前正在使用 ZXing-1.6，我遇到了来自 QRCodeWriter 类的这部分代码的问题

```
private static BitMatrix renderResult(QRCode code, int width, int height) {
ByteMatrix input = code.getMatrix();
int inputWidth = input.getWidth();
int inputHeight = input.getHeight();
int qrWidth = inputWidth + (QUIET_ZONE_SIZE << 1);
int qrHeight = inputHeight + (QUIET_ZONE_SIZE << 1);
int outputWidth = Math.max(width, qrWidth);
int outputHeight = Math.max(height, qrHeight);

int multiple = Math.min(outputWidth / qrWidth, outputHeight / qrHeight);
// Padding includes both the quiet zone and the extra white pixels to accommodate the requested
// dimensions. For example, if input is 25x25 the QR will be 33x33 including the quiet zone.
// If the requested size is 200x160, the multiple will be 4, for a QR of 132x132\. These will
// handle all the padding from 100x100 (the actual QR) up to 200x160.
int leftPadding = (outputWidth - (inputWidth * multiple)) / 2;
int topPadding = (outputHeight - (inputHeight * multiple)) / 2;

BitMatrix output = new BitMatrix(outputWidth, outputHeight);

for (int inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {
  // Write the contents of this row of the barcode
  for (int inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {
    if (input.get(inputX, inputY) == 1) {
      output.setRegion(outputX, outputY, multiple, multiple);
    }
  }
}

return output; 
```

}

问题是当我得到的 datamatrix 大小为 60x60 并且输出矩阵应该为 100X100 时，我得到很多空白 + 静区，我猜你正在使用 int 变量进行操作，因为不可能有类似的 datamarix 节点大小3.23 它应该是整数。你能帮我猜一下，或者给我指点某个地方，那里已经讨论过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:46:09.423

已经在邮件列表上回答了——这是一个非常旧的版本，请使用更新的版本。是的，有一个最小边距，并且模块的大小必须是像素的整数倍。这可以使它比平时更小。这是正常的; 否则图像会失真。

# objective-c - 是否可以使用 Objective-C 中的方法进行算术运算？

> ID：14639341
> 
> 赞同：1
> 
> 时间：2013-02-01T03:40:14.017
> 
> 标签：objective-c, math, methods, addition

在 C# 中，我可以添加 getter `anIntVariable = someMethod1() + someMethod2()...`，但在 Objective-C 中，我收到警告，“函数‘someMethod1’的隐式声明在 c99 中无效。用方法进行算术运算的等效方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:45:40.733

你可以在 Objective C 中做到这一点。

```
NSInteger myNumber = [self method1] + [self method2]; // myNumber is 3 
```

其中method1和method2可以像这样实现：

```
- (NSInteger)method1 {
     return 1;
}

- (NSInteger)method2 {
     return 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:46:40.500

这是非常基本的东西；如果您有兴趣学习该语言，建议您花点时间阅读有关 Obj-C 语法的更多信息。

这是您的示例的等价物。

```
NSInteger anIntVariable = [self someMethod1] + [self someMethod2]; 
```

如果“someMethod1”是“属性”的获取器，您也可以编写“self.method1”来获取该属性的值。

Objective-C 是一门有趣的语言。我想如果你给它一个机会你会喜欢它的。

祝你好运。

# c - 通过执行整数加法在未排序的整数数组中查找目标值

> ID：14639346
> 
> 赞同：4
> 
> 时间：2013-02-01T03:40:43.637
> 
> 标签：c, algorithm, optimization

以下是“亚马逊”向我提出的面试问题。我还没有想出一个优化的解决方案。

**问题陈述：**
给定一个未排序的整数数组 n。如果从该数组中添加的任何整数与**目标值****相匹配，****则返回 'true'**否则**返回 false**。

 ********笔记：**

```
 1)'n' could be 1000 or 10,000.
   2) Target value could be 'negative'
   3) It may be addition of any 'k' integers (not only two) , where k<=n. 
```

**测试条件：**

```
 i/p:- Array A[]= {6,7,3,0,12,-5,-6,100}
    Target =  8
    o/p:- TRUE        
As, 6+7+(-5)=8 
```

如果我们尝试以线性方式或正常方式进行操作，则需要**O(2^n) 时间复杂度**。
所以我正在寻找任何可以进一步优化这个问题的方法或算法。

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T18:26:43.300

子集和问题是一个著名的 NP 完全问题。在这里，我假设您正在寻找任何一组数字来求和到目标（如果您实际上只寻找两个数字，那么有一个使用计数哈希表的五行解决方案，它在 O(n ） 时间）。

有两种基本方法。第一个只是测试每个可能的子序列。正如您已经观察到的那样，这需要 O(2 ^n ) 时间（指数），如果 n 为 1000，这是难以处理的。

第二个是跟踪可以从列表的前缀中获得的总和。这是一种非常简单的方法，如果整数有界，效果很好。举例来说，如果输入是 n k 位整数，它的计算复杂度为 O(2 ^k n ² )（伪多项式）：最大的和是 2 ^k n，所以表最多有 2 ^k n ²个条目。这是一种典型的动态规划方法，其中子问题为`T[s][k] = (A[1..k] has a subsequence summing to s)`，最终解为`T[target][n]`。

这是实现此功能的 Python 解决方案：

```
def subset_sum(A, target):
    T = {0} # T[s][0] = (TRUE iff s == 0)
    for i in A:
        T |= {x + i for x in T}
    return target in T 
```

例子：

```
>>> subset_sum([-5,6,7,1,0,12,5,-6,100], 13)
True
>>> subset_sum([95, -120, 22, 14491], 13)
False 
```

* * *

*奖励*：如果您好奇，这里有一个解决对和问题的方法。它在 O(n) 时间内运行，并告诉您数组是否有两个数字求和到目标。

```
from collections import Counter
def pair_sum(A, t):
    C = Counter(A)
    for k,v in C.iteritems():
        if t == k+k and v > 1: return True # k is in the array twice
        elif t != k+k and t-k in C: return True
    return False 
```

例子：

```
>>> pair_sum([3,3,3,4], 13)
False
>>> pair_sum([3,3,3,10], 13)
True
>>> pair_sum([7,7,2], 14)
True
>>> pair_sum([7,14,2], 14)
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:46:22.347

**注意**这个答案仍然提供信息，所以我保留它，但在 OP 的编辑之后它不太相关。

以下是我如何使用称为“哈希”的概念在`O(n)`运行时复杂性和空间复杂性中解决它。`O(n)`（其中 n 是数组的大小）

让我们拨打我想拨打的号码`d`

首先，我会创建某种`HashTable`（键值存储）。HashMaps 有`O(1)`插入、获取和包含。[你可以在这里](http://en.wikipedia.org/wiki/Hash_table)阅读它们

然后我会将每个对象放在哈希图中的单元格 d-object 中。在我检查下一个数字 x 之前，我会检查哈希映射是否包含单元格 x 处的值。如果是这样，我们就找到了我们的匹配项。

这是一些伪代码（我认为这比 C 代码更适合一般答案）

```
CheckIfTwoNumbersComplementTo(d,arr)
    map <-- new HashTable
    for each number x in Arr
        if(map contains a key for x)
            return true
        else
            add d-x to map if it is not already in map
    return false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:52:09.547

如何对数组进行排序，并为每个元素计算目标值所需的对并搜索它？这将使排序的成本加上每个二进制搜索。******

# linux - 如何在 Linux 中通过 shell 脚本创建新目录？

> ID：14639353
> 
> 赞同：0
> 
> 时间：2013-02-01T03:42:21.623
> 
> 标签：linux, shell

如果不存在，我正在尝试`/proj`使用子目录创建新目录。但是，它不是创建多个子目录，而是创建一个名为`bin, cgi, sbin, etc...``/proj``{Changes...src}`

```
#If project directory exists, then do not create a new one.                             
if [ -d /proj ]; then
     echo "Project directory exists. New directory will not be created."

#Otherwise, create a new project directory.                                             
else
     echo "Project directory does not exist. Creating a new project directory..."
     mkdir -p proj/{Changes,Makefile,bin,cgi,doc,etc,html,lib,sbin,src}
fi 
```

我缺少什么来制作我想要的子目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:45:46.443

```
sgeorge-mn:tmp sgeorge$ ls proj
ls: proj: No such file or directory
sgeorge-mn:tmp sgeorge$ mkdir -p proj/{Changes,Makefile,bin,cgi,doc,etc,html,lib,sbin,src}
sgeorge-mn:tmp sgeorge$ ls proj
Changes     Makefile    bin     cgi     doc     etc     html        lib     sbin        src 
```

**仅供参考：**
以下意味着，目录`proj`位于`/`.

```
if [ -d /proj ]; then 
```

**编辑**

***我看到的一种可能性是（可能不是真的）：***

在评论中，您说您可以使用`mkdir -p proj/{Changes,Makefile,bin,cgi,doc,etc,html,lib,sbin,src}`. 但在那之后，你会说“当我 cd 进入 /proj 时，它仍然是一个单独的子目录”。可能这里是你的问题。

您可能已经有一个名为`/proj`.;-)的目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:07:13.973

我可能找到了[线索](http://www.linuxjournal.com/content/bash-brace-expansion)：

"*大括号扩展通过 "set -B" 命令和 shell 的 "-B" 命令行选项启用，并通过命令行上的 "set +B" 和 "+B" 禁用。* "

您运行的其他一些脚本（可能自动或通过`.bashrc`）是否有可能“关闭”大括号扩展？以下是我做的一些测试：

```
floris% /bin/bash -B
bash-3.2$ echo {1..3}
1 2 3
## ^^ brace expansion is ON

floris% /bin/bash +B
bash-3.2$ echo {1..3}
{1..3}
## ^^ brace expansion is OFF 
```

不过，这里有点疯狂……如果我创建一个简单的 shell 脚本`testbrace-`：

```
#!/bin/bash -B
echo {1..3} 
```

并像这样从命令行运行它：

```
floris% ./testbrace-
{1..3} 
```

等效脚本`testbrace+`：

```
#!/bin/bash +B
echo {1..3} 
```

给我

```
floris% ./testbrace+
{1..3} 
```

换句话说，+-B 标志似乎不会影响脚本的运行方式。在任何一种情况下，大括号扩展都是禁用的。

但是，当我从带有标志的命令行专门调用 bash 时，我可以影响结果：

```
floris% /bin/bash +B testbrace-
{1..5}
floris% /bin/bash +B testbrace+
{1..5}
floris% /bin/bash -B testbrace-
1 2 3 4 5
floris% /bin/bash -B testbrace+
1 2 3 4 5 
```

如您所见，脚本将执行大括号扩展 IFF 我称之为`/bin/bash -B scriptname`- 此时它会忽略脚本中的 B 标志。如果您使用此方法调用您的目录创建脚本，我希望您会得到相同的结果。

另外，请确保将下一行更改为

```
if [ -d ./proj ] 
```

正如几个人指出的那样。

# objective-c - 尝试释放 NSMutableArray 时出现错误的访问错误代码 1

> ID：14639354
> 
> 赞同：0
> 
> 时间：2013-02-01T03:42:46.163
> 
> 标签：objective-c, cocos2d-iphone

我已经创建了一个数组来将我的 spriteFrame 放入其中，当然，我试图在使用它之后释放该数组，这样它就不会泄漏，但是每当我将它放在我的所有代码下面时，我的应用程序就会崩溃并且我得到 Bad Access错误代码 1。这是我尝试释放它的方式：

```
-(void)moveHair {
    NSMutableArray *animateHair = [NSMutableArray arrayWithCapacity:10];
    for (int i = 1; i < 10; i++) {
        NSString *animHair = [NSString stringWithFormat:@"wRightLong%i.png", i];
        CCSpriteFrame *whiteFrame = [frame spriteFrameByName:animHair];
        [animateHair addObject:whiteFrame];
    }

    CCAnimation *blowHair = [CCAnimation animationWithSpriteFrames:animateHair delay:0.15];
    CCAction *blowingHair = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:blowHair]];
    [white runAction:blowingHair];

    [animateHair release];
    animateHair = nil;
} 
```

为什么我会收到该错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:46:21.460

如果您使用 ARC，则无需担心诸如保留和释放之类的事情。删除您的`[animateHair release];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:54:43.893

您不需要最终版本。删除这些行：

```
[animateHair release];
animateHair = nil; 
```

原因是您创建了这样的数组：

```
NSMutableArray *animateHair = [NSMutableArray arrayWithCapacity:10]; 
```

在这种情况下，`NSMutableArray`'`arrayWithCapacity:`方法返回一个`autoreleased`对象。

（通过再次释放它，您实际上是通过您的`CCAnimation`对象释放保留的数组......因此，下次它尝试访问该数组时，您会得到如您所述的“错误访问”异常。）

笔记：

通常，大多数`NS`和类从其类便利创建方法`UI`返回对象。`autoreleased`例外情况是方法中是否包含单词`new`or `create`。

您可以改用 ARC（自动保留计数）让您的生活更轻松。但是，在我看来，学习内存管理的工作原理对于成为 Objective-C 的高级开发人员很重要。如果您有兴趣，这是 Ray Wenderlich 网站上的教程：

[http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial](http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial)

# web - 每个单独的产品都应该有自己的单独网页吗？

> ID：14639360
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:43:14.867
> 
> 标签：web, seo, webpage, web-standards

我是网络开发的新手，所以我不知道这是什么规范。我正在尝试建立一个小型电子商务网站。我们有很多项目。那么每个项目都应该有自己的单独页面吗？对SEO有好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:24:09.187

Yes it is very important to have individual pages for each product. Not only individual pages, you should have the URL of the page having product name.

For example, if you are selling a *Sony Xperia 2200 Mobile*, make a page such as `www.example.com/electronics/mobile/sony-experia-2200.php` or `asp.`.

If your site is dynamic, read on Google how to make your web URL static.

Look at how Amazon does it: `http://www.amazon.com/RCA-AH16100SN-16-Gauge-Speaker-Wire/dp/B0029HHIDY/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T02:36:10.900

正如[蒂姆·伯纳斯-李](http://en.wikipedia.org/wiki/Tim_Berners-Lee) [所写](http://dig.csail.mit.edu/breadcrumbs/node/71)：

> [AWWW](http://www.w3.org/TR/webarch/)说所有重要的东西都应该有一个 URI 。

我会说一般来说，为每个产品设置单独的页面是个好主意。

对于产品*变体*（相同产品、不同尺寸/颜色/……），您还*可以*在同一产品页面上包含所有变体。但也可以在这里使用多个页面/URL（取决于具体情况）。

单独的页面有什么好处（因此每个产品都有唯一的 URL）？

*   每个页面都可以由用户链接/添加书签/共享。
*   每个页面（= 产品）都可以有自己的文档范围的元数据（`meta`/ `link`in `head`）。
*   每个页面都可以是搜索引擎中的结果。如果您在同一页面上包含多个不同的产品，并且有人只搜索其中一个产品，则很难在该页面上排名，因为相关内容只是页面的（小）部分。

此外，如果客户将产品添加到购物车，访问购物车页面并单击产品标题，客户将看到包含相应产品的页面。否则，客户会看到一个包含多个产品的页面，并且不一定清楚其中哪一个在/在购物车中。

# c# - 获取 ObservableCollection 中的项目类型

> ID：14639368
> 
> 赞同：1
> 
> 时间：2013-02-01T03:44:23.573
> 
> 标签：c#, reflection, mvvm, collections

我有一个绑定到某个可观察集合的视图（由一个列表视图组成）。换句话说，我有：

```
var someCollection = new ObservableCollection<ClassFoo>();
// initialize someCollection

ListView someView = new ListView();
someView.DataContext = someCollection;
someView.ItemsSource = someCollection; 
```

笔记：

*   `someView`位于**Project1.dll**和**Project2.dll**`someCollection`上
***   **Project2.dll**引用了**Project1.dll**并且**Project1.dll**没有引用**Project2.dll****

 **因此，在我看来，我有一个对 someCollection 类型的引用，`ObservableCollection<object>`因为如果它的实际类型在哪里，我会得到一个编译错误，`ObservableCollection<ClassFoo>`因为我必须添加对 Project2.dll 的引用。

出于某种原因，我无法添加该引用，并且我的老板希望我创建命令等...

* * *

最后一部分只是解释了我为什么要这样做，但总之我正在寻找：

```
 ObservableCollection<object> myUnknownObservableCollection = someReference;
  // I know that someReferce is of type ObservableCollection<ClassFoo>
  var x = myUnknownObservableCollection.GetType().GetTypeOfItems..... 
```

最后我希望 x 等于`typeof(ClassFoo)`我如何通过反射来做到这一点，因为 someReference 是类型`ObservableCollection<ClassFoo>`？

* * *

## 编辑

我有解决办法！！这里是：

```
 class Person 
    {
        public string Name { get { return "Antonio"; } }
    }

    .. 

    // view code:

    IEnumerable<object> uncknownObject;

    // view model does this:
    uncknownObject = new ObservableCollection<Person>( );

    // continuation of view code:

    var observCol = uncknownObject.GetType( );

    var x = ( ( dynamic )observCol ).GenericTypeArguments[ 0 ]; 

    var instance = ( Person )Activator.CreateInstance( x );

    Console.WriteLine( instance.Name ); // Print Antonio!!! 
```

能够在没有动态数据类型的情况下做到这一点会很好

* * *

## 编辑 2

[**这是一个不使用动态类型运行 .net 4.0 的解决方案**](https://stackoverflow.com/questions/14639987/why-reflection-does-not-find-property)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:14:12.327

如果您打算使用 mvvm，那么动态类型将无助于绑定。您可能必须使用 SLaks 建议的接口

```
public interface IClassFoo
{
   string Name { get; }
}

public class ClassFoo : IClassFoo
{
    public string Name { get { return "Antonio"; } }
}

//Usage 
var someCollection = new ObservableCollection<IClassFoo>(); 
```**

# asp.net - 使用 asp.net 母版页获得淘汰赛

> ID：14639372
> 
> 赞同：0
> 
> 时间：2013-02-01T03:44:50.393
> 
> 标签：asp.net, knockout.js

我只是想获得一个与 asp.net 母版页一起工作的淘汰赛绑定下拉菜单。在母版页中，我有对 jquery 和淘汰赛的脚本引用。在示例内容页面中，我有以下内容，但从未填充选择控件。我错过了什么？

```
<asp:content id="Content1" contentplaceholderid="contentBody" runat="server">

    <select data-bind="options: docTypes ,
        optionsCaption: 'Choose document type',
        optionsText: 'name',
        value: chosenDocType"></select>
<script>
    $(function(){
        function emailViewModel() {
            this.docTypes = [
                { name: "1" },
                { name: "2" },
                { name: "3" }
            ];
            this.chosenDocType = ko.observable();
        }
        ko.applyBindings(emailViewModel);
    });
</script>
</asp:content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:59:54.490

您没有实例化 emailViewModel

改变

```
ko.applyBindings(emailViewModel); 
```

对此

```
ko.applyBindings(new emailViewModel()); 
```

[在这里](http://jsfiddle.net/heads5150/mJsUp/)提琴

# regex - 正则表达式验证字母数字、下划线和连字符，没有空格，只有 40 个字符

> ID：14639378
> 
> 赞同：4
> 
> 时间：2013-02-01T03:45:16.140
> 
> 标签：regex, validation

我想知道如何为我的正则表达式指定字符数。我有正确的正则表达式，我只需要确保它可以验证零到四十个字符。

这是正则表达式

`$fnameRegex = "/^[a-zA-Z0-9{0,40}-_]+$/";`

我可能把它`{0,40}`放在了错误的地方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T03:47:32.710

尝试

```
$fnameRegex = "/^[a-zA-Z0-9\-_]{0,40}$/"; 
```

字符类中的所有内容`[]`都只会匹配一个字符。你把数量限制器放在它外面（你以前有`+`1 个或更多 - 用 0 到 40 之间的 {0, 40} 替换它）。

我也在你的角色类中转义了你`-`的角色，否则它将被解释为一个范围。

我还向您推荐了很棒的[regexr](http://gskinner.com/RegExr/)网站，它非常适合交互式地使用 regex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T05:52:58.400

尝试 **[a-zA-Z0-9]{40}** 这将检查 40 个大小写字母数字字符

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T03:49:20.380

那这个呢？

```
^(\d){0,40}$ 
```

\d 只匹配数字 {0,40} 表示前面的表达式 (\d) 可以出现 0 到 40 次。

您可以使用此工具来检查您的正则表达式。它可能很有用：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

希望这可以帮助

# c# - 代码优先和更改模型类，如何在不重新创建表的情况下更新模型？

> ID：14639379
> 
> 赞同：0
> 
> 时间：2013-02-01T03:45:21.540
> 
> 标签：c#, asp.net-mvc-4, ef-code-first

我使用 Asp.Net MVC 4 的新单页应用程序创建了一个项目。我运行了 Web 应用程序并创建了默认的 Sql Server localDB 数据库，以及以下类的表。

```
public class TodoItem
{
    public int TodoItemId { get; set; }

    [Required]
    public string Title { get; set; }
    public bool IsDone { get; set; }
    // public string Test { get; set; }

    [ForeignKey("TodoList")]
    public int TodoListId { get; set; }
    public virtual TodoList TodoList { get; set; }
} 
```

}

然后

1.  我发现我需要`varchar(max)`为 column生成的数据库`Title`。我将其修改为`varchar(500)`. ( `alter table todoitems alter column Title varchar(500) not null`) Web 应用程序可以毫无问题地运行。
2.  然后我在类中添加一个新属性（取消注释 Test 属性）。运行 Web 应用程序时出现以下异常。

> 自数据库创建以来，支持“TodoItemContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

在

```
[Authorize]
public class TodoListController : ApiController
{
    private TodoItemContext db = new TodoItemContext();

    // GET api/TodoList
    public IEnumerable<TodoListDto> GetTodoLists()
    {
        return db.TodoLists.Include("Todos")
            .Where(u => u.UserId == User.Identity.Name)
            .OrderByDescending(u => u.TodoListId)
            .AsEnumerable()
            .Select(todoList => new TodoListDto(todoList));
    } 
```

1.  我试图修改数据库表（`alter table todoitems add Test varchar(200)`），但仍然引发异常。

是否可以更改模型类并修改（通过 VisualStudio 或手动）表而不是重新创建表？（我想在数据库表上保留我的手动更改。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:00:02.387

您正在寻找的内容被称为`Code First Migrations`- 您可以在 MSDN 上看到一个很棒的演练：http: [//msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

# file - 节点：如何等到一个文件完成后再处理它？

> ID：14639388
> 
> 赞同：10
> 
> 时间：2013-02-01T03:45:58.390
> 
> 标签：file, node.js, io

我的问题是我无法确定何时成功写入文件并且文件已关闭。考虑以下情况：

```
var fs = require('fs');
var outs = fs.createWriteStream('/tmp/file.txt');
var ins = <some input stream>

...
ins.on('data', function(chunk) { out.write(chunk); });
...
ins.on('end', function() {
   outs.end();
   outs.destroySoon();
   fs.stat('/tmp/file.txt', function(err, info) {

      // PROBLEM: Here info.size will not match the actual number of bytes.
      // However if I wait for a few seconds and then call fs.stat the file has been flushed.
   });
}); 
```

那么，我如何强制或以其他方式确保在访问文件之前已正确刷新文件？我需要确保文件存在并且完整，因为我的代码必须生成一个外部进程来读取和处理文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T07:53:12.010

在`writeable stream's` [`close`](http://nodejs.org/api/stream.html#stream_event_close_1)事件中进行文件的后处理：

```
outs.on('close', function() {
  <<spawn your process>>
}); 
```

`destroySoon`另外，后面不需要`end`，它们是[一回事](https://github.com/joyent/node/blob/master/lib/fs.js#L1666)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T18:45:54.917

查看[https://github.com/TomFrost/FlushWritable](https://github.com/TomFrost/FlushWritable) - 我不知道为什么它没有写入 Writable 核心，但这应该可以解决问题。

[此外，在 GitHub https://github.com/nodejs/node-v0.x-archive/issues/7348](https://github.com/nodejs/node-v0.x-archive/issues/7348)上对此进行了讨论。

# javascript - ajax动态加载网页后jQuery元素未加载

> ID：14639390
> 
> 赞同：0
> 
> 时间：2013-02-01T03:46:08.000
> 
> 标签：javascript, html, jquery, jquery-plugins

[像Ibuttons](http://www.givainc.com/labs/ibutton_jquery_plugin.htm)这样的jQuery 元素在通过 ajax 动态内容加载器动态加载时不起作用

我的整个网站完全是通过 Ajax 渲染的 像这样

```
<html>
<header>
{jQuery}
</header>
<form method="post" action="" id="ajaxLoader" name="ajaxLoader" enctype="multipart/form-data">
          <div id="Webpage"><!-- Ajax loader output --></div> </form>
</html> 
```

现在，在浏览器加载 Ajax 加载器后，它会加载内容并将其输出到#Webpage 中，就像这样

```
[..]
<form method="post" action="" id="ajaxLoader" name="ajaxLoader" enctype="multipart/form-data">
              <div id="Webpage">{Content with jQuery plugins like ibuttons}</div> </form>
[...] 
```

现在我的内容（带有 jQ​​uery 元素）在加载/输出 ajax 加载器时工作得很好，但是当它用 ajax 加载器加载时，jquery 插件无法工作。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:00:15.753

您可能需要重新初始化插件

`$("#my_button_id").iButton();`

在 ajax 完成加载之后，如果您还没有这样做的话。

**编辑**：只是一个快速提示：最好将 javascript 放在您的末尾`<body>`而不是页面的`<head></head>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:56:54.647

当您动态加载网页时，您在该页面中的 jquery 脚本不会被注册，用于`jQuery.getScript()`注册它们。

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)上的文档

# php - 基于当前会话 id codeigniter 的 Echo tld

> ID：14639397
> 
> 赞同：0
> 
> 时间：2013-02-01T03:46:22.473
> 
> 标签：php, codeigniter, session-variables

**我有一个控制器**

```
<?php
class Onetimescan extends CI_Controller{
    public function index() {
        #LOAD MODEL
       $this->load->model('scanmodel');
            $this->scanmodel->loadurlbasedonsessid($this->session->userdata('session_id'));      
    }
}
?> 
```

**和一个模型：**

```
<?php
class Scanmodel extends CI_Model{
    function __construct(){
        // Call the Model constructor
        parent::__construct();
    }

    function loadurlbasedonsessid($sid){
        $sid = $this->session->userdata('session_id');
        $this->db->select('tld');
        $this->db->where('session_id', $sid);
        $q = $this->db->get('ClientDomain');
        $r = $q->result_array();
        echo($r[0]['tld']);
    }   
}
?> 
```

我收到以下错误：

```
Call to a member function userdata() on a non-object 
```

我以为我在 and 之间正确传递了，`session_id`但事实并非如此？有人可以帮忙吗？`controller``model`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:53:42.483

看起来[会话](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)库没有加载。

按需加载（通常在控制器中）：

```
$this->load->library('session'); 
```

或将其添加到您的`application/config/autoload.php`：

```
$autoload['libraries'] = array('session'); 
```

# objective-c - 如何在我的应用程序内的 iOS 键盘上创建自定义按钮？

> ID：14639400
> 
> 赞同：2
> 
> 时间：2013-02-01T03:46:46.253
> 
> 标签：objective-c, uiview, ios6

我想在空格键的左侧添加一个按钮（类似于表情符号地球），按下该按钮会在我的应用程序中生成一个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:54:17.670

不要以为你能做到。`inputAccessoryView`但是，您可以通过设置（通常设置为 UIToolbar）在键盘上方添加一个小视图。

[链接到博客示例](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)（我没有阅读，但看起来应该涵盖了一些东西）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T03:55:00.723

iOS 的设计使得开发人员无法自定义键盘。

但是，您可以通过使用键盘上方的 UIToolBar 来伪造它（事实上，许多苹果应用程序就是这样做的——它完全符合人机界面指南）。

这是一个简单的例子：（下一个/上一个/完成按钮）：

![在此处输入图像描述](../Images/c027ecde1ac7a8169ff243a2bf123a14.png)

***iOS 默认键盘的开源替代品***

或者，这是一个 OpenSource 控件，它允许创建一个看起来像内置键盘但允许自定义键的键盘。

[https://github.com/kulpreetchilana/Custom-iOS-Keyboards](https://github.com/kulpreetchilana/Custom-iOS-Keyboards)

# c++ - 可以在 C++11 的 lambda 中使用封闭函数中的模板类型吗？

> ID：14639401
> 
> 赞同：3
> 
> 时间：2013-02-01T03:46:58.170
> 
> 标签：c++, templates, c++11, lambda

所以我目前有一些类似的代码：

（注意：不是实际的代码，只是为了简洁起见，从一个有点冗长和复杂的方法中删减了。）

```
template<typename ArgT0, typename ArgT1, typename FuncT>
static void addMethod( const std::string& name, FuncT func )
{
   Method script_func = [&]( const Arguments& args ) -> Value
   {
      func(UnsafeAnyCast<ArgT0>(args[0]),UnsafeAnyCast<ArgT1>(args[1]));
      return Value::Undefined();
   }

   _prototype->Set( name, script_func );
} 
```

它在 Visual Studio 2010 中运行良好，但我知道这远不能保证它是符合标准的 C++。就在 lambda 中使用模板参数而言，这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:42:17.600

是的，这是符合标准的：lambda 表达式可以访问其封闭范围内的所有可见名称，它只是您需要捕获的变量

**5.1.2 Lambda 表达式 [expr.prim.lambda]**

> 9 最小封闭范围是块范围 (3.3.3) 的 lambda 表达式是本地 lambda 表达式；任何其他 lambda-expression 在其 lambda-introducer 中都不应有捕获列表。本地 lambda 表达式的到达范围是一组封闭范围，直到并包括最里面的封闭函数及其参数

# data-structures - 平衡二叉搜索树的定义

> ID：14639411
> 
> 赞同：2
> 
> 时间：2013-02-01T03:47:49.683
> 
> 标签：data-structures, tree, binary-tree

所以，我一直在研究平衡二叉搜索树。

我用谷歌搜索了它，这就是我发现的：

二叉树，其中每个节点的两个子树的深度相差 1 或更小（来自维基百科）

我们不能将平衡二叉树定义为高度不超过 ceil(log(n+1) / log 2) 的树吗？

从这个答案看来，[二叉搜索树是否平衡？](https://stackoverflow.com/questions/12087880/is-binary-search-tree-balanced)，提问者似乎已经问了很多同样的事情，但接受的答案通过给出斐波那契树的例子来拒绝这个想法。斐波那契树不是平衡树吗？我认为回答者可能对 AVL 树中平衡树的定义感到困惑，据我了解，其中允许某些不平衡树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:14:01.113

除非我的计算是错误的，否则这个定义是行不通的。例如，如果你取一棵高度为 6 的完整二叉树，它有 63 个节点。如果删除底部的两个兄弟姐妹及其父节点，则有 60 个节点。这棵树不平衡，但它的高度仍然等于 ceil(log(n+1) / log 2)。

# laravel - Laravel - 处理多条记录，我如何提取我需要的数据？

> ID：14639412
> 
> 赞同：0
> 
> 时间：2013-02-01T03:47:57.343
> 
> 标签：laravel, records, laravel-3

警告:: LARAVEL 超级初学者，温柔点::

在我的控制器中：

```
public function get_index(){
$lease_rates = DB::table('lease_rates');
$this->layout->nest('content','admin.lease_rates', array('lease_rates' => $lease_rates, )); 
```

在我的 lease_rates 表中：

```
 id   lease_year   class_letter   rate
    1      2012           A          635
    2      2012           B          648
   ...     ....          ...         ...
    5      2012           E          789
    6      2011           A          629 
```

在我的 lease_rates.blade.php 中：

```
<input type="text" 
       name="{{ $lease_rates->rate->find(1) }}" 
       value="{{ $lease_rates->rate->find(1) }}">

<input type="text" 
       name="{{ $lease_rates->rate->find(2) }}" 
       value="{{ $lease_rates->rate->find(2) }}"> 
```

显然上面的行不通。我想要的最终结果：

*   按lease_year 对发送到页面的数组进行排序，然后按class_letter 升序降序。
*   将每个 id 的汇率值放入文本框中，其中文本框名称是 id，显示的文本是该 id 的汇率。
*   之后，我需要提交对表格所做的任何更改
*   之后，我将致力于添加记录

非常感谢！就像我说的，我是新人，但渴望学习（甚至更渴望完成这件事）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:50:07.270

您是否查看了 Fluent Query Builder（或 Eloquent ORM）的文档？[http://laravel.com/docs/database/fluent](http://laravel.com/docs/database/fluent)

你可以做这样的事情（没有检查，但你应该明白）：

```
//In your controller
$lease_rates = DB::table('lease_rates')->order_by('lease_year', 'desc')->order_by('class_letter', 'desc')->get();

//In your view
@foreach($lease_rates as $lease_rate)
    <input type="text" name="{{ $lease_rate->id) }}" value="{{ $lease_rate->rate }}">
@endforeach

//Save controller
foreach(Input::all() as $id => $rate){
    DB::table('lease_rates')->where('id', '=', $id)
    ->update(array('rate' => rate));
} 
```

你也可以使用 Eloquent ORM，让它变得更简单。

# javascript - appendChild 不会将节点添加到子列表的末尾

> ID：14639415
> 
> 赞同：0
> 
> 时间：2013-02-01T03:48:02.077
> 
> 标签：javascript, dom, appendchild

根据文档[https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)， appendChild 将一个节点添加到指定父节点的子节点列表的末尾。

但是，我的示例显示它将孩子添加到孩子列表的顶部。

那个怎么样？知道为什么它会针对文档发生吗？

根据文档，这些代码应该在 targetArea 节点的末尾添加一个新的 div 元素，而不是添加到节点的顶部。

```
var targetArea = document.getElementById('nav');
var div = document.createElement('div');
var snippet = document.createTextNode('this is a new DIV');
div.appendChild(snippet);
targetArea.appendChild(div); 
```

我的在线代码：http: [//jsfiddle.net/dennisboys/BRtYb/6/](http://jsfiddle.net/dennisboys/BRtYb/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:01:56.443

似乎是因为您`<div>`输入了`<p>`并且`<div>`将关闭`<p>`.

另请参阅此问题。[将 <div> 放入 <p> 就是添加一个额外的 <p>](https://stackoverflow.com/questions/10763780/putting-div-inside-p-is-adding-an-extra-p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:59:38.877

您需要研究最终得到的实际 DOM 结构。

在您的 jsFiddle 中，具有 id="nav" 的节点最终有两个子节点，一个显示“我是 P 内容”的文本节点和您附加的 div。div 确实被放置为导航节点的最后一个子节点，就像它应该做的那样。

# c - 线程程序和结构将值更改为垃圾

> ID：14639417
> 
> 赞同：0
> 
> 时间：2013-02-01T03:48:43.327
> 
> 标签：c, multithreading, struct, return-value

此时我正在编写一个测试程序以获取基础，但是当我运行它时，它会将垃圾值输入我的结构中。

如果这有点不完整，我很抱歉，我一直在处理这个问题，在网上搜索了几个小时，我所做的一切似乎都是正确的，但是当我通过 pthread_create 函数传递它们时，我将垃圾插入到一些关键值中.

谢谢你的帮助！

# 这段代码给了我以下输出：

主函数运行！

gWorkerid 的初始集 = 0

工人 ID = 319534848

你好杜迪！

结束睡眠

gWorkerid 现在是垃圾值 = -946297088

# 我期待：

主函数运行！

gWorkerid 的初始集 = 0

工人ID = 0

你好杜迪！

结束睡眠

gWorkerid 现在是垃圾值 = 0

```
 #include <sys/socket.h>
    #include <netinet/in.h>
    #include <arpa/inet.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <sys/types.h>
    #include <pthread.h>

    #define MAX_CONN 3
    #define MAX_LINE 1000

    typedef struct worker_t
    {
        int id;
        int connection;
        pthread_t thread;
        int used;
    }WORKER_T;

    struct sockaddr_in gServ_addr;

    WORKER_T gWorker[MAX_CONN];
    char sendBuff[1025];

    // Thread function
    void * worker_proc(void *arg)
    {
        WORKER_T *me = (WORKER_T*) arg;

        printf("Howdy Doody!\n");

        return NULL;
    }

    int main(int argc, char *argv[])
    {
        printf("main function running!\n");
        pthread_t threadTest;
        int i = 0;

        gWorker[i].id = i;
        printf("initial set of gWorkerid = %d\n", gWorker[i].id);
        gWorker[i].connection = i;
        gWorker[i].used = 1;
        pthread_create(&gWorker[i], NULL, worker_proc, &gWorker[i]);

        sleep(1);

        printf("end sleep\n");
        printf("gWorkerid is now trash value = %d\n", gWorker[i].id);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:53:04.980

该行：

```
pthread_create (&gWorker[i], NULL, worker_proc, &gWorker[i]); 
```

实际上应该是：

```
pthread_create (&(gWorker[i].thread), NULL, worker_proc, &gWorker[i]); 
```

第一个参数`pthread_create()`是存储线程 ID 的位置，对于您的代码，它将它存储在结构的开头，覆盖`id`.

通过传递结构的线程 ID 部分的地址，`id`应该保持不变`pthread_create()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:55:14.727

尝试改变：

```
 pthread_create(&gWorker[i], NULL, worker_proc, &gWorker[i]); 
```

到：

```
 pthread_create(&(gWorker[i].thread), NULL, worker_proc, &gWorker[i]); 
```

`pthread_create()`期望指向 a 的指针`pthread_t`作为第一个参数，然后填充它。在您的情况下，`pthread_create`填充在您的`WORKER_T`结构顶部。

# javascript - Ember：未定义 DS

> ID：14639418
> 
> 赞同：15
> 
> 时间：2013-02-01T03:48:46.023
> 
> 标签：javascript, ember.js

刚开始学习 Ember，跟着几个例子，非常基本的东西对我来说失败了。

我正在`Uncaught ReferenceError: DS is not defined`使用 Chrome。

我在 Ember.js 之前包含 Handlebars

## HTML

```
<html>
  <head>
    <title>Ember Test App</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="js/handlebars.js"></script>
    <script type="text/javascript" src="js/ember.js"></script>

  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span8 offset2" id="app">
        </div>
      </div>
    </div>

  <script type="text/x-handlebars" data-template-name="application">
    <h1>Ember App</h1>
    {{outlet}}
  </script>

  <script type="text/javascript" src="app.js"></script>
  </body>
</html> 
```

## 应用程序.js

```
window.App = Ember.Application.create({
  rootElement: $("#app")
});

App.Store = DS.Store.extend({
  revision: 11
}); 
```

# 已解决 - 提示：

确保 ember-data 包含在 ember 本身之后：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="js/handlebars.js"></script>
<script type="text/javascript" src="js/ember.js"></script>
<script type="text/javascript" src="js/ember-data.js"></script> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T03:54:45.810

您需要 ember-data 才能使用 DS.Store。我已经[在这里](http://www.thetravellingbarman.com.au/scripts/ember-data.js)上传了它，以便我的一个 jsFiddles 工作，因为我在其他任何地方都找不到它。

**但是请注意，您不需要 ember-data 来使用 ember。**

编辑：

不得不删除我上传的那个，所以从[http://github.com/emberjs/data/downloads获取它](http://github.com/emberjs/data/downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:03:35.080

您可以通过克隆 ember-data 存储库并在 repo 文件夹中运行 rake dist 来获取 ember-data。这会将dist文件夹下的相关发布文件推出。

# android - 禁用 Eclipse 验证器和插件？

> ID：14639424
> 
> 赞同：3
> 
> 时间：2013-02-01T03:49:04.157
> 
> 标签：android, eclipse, eclipse-plugin

我使用`eclipse Helios`with`Android SDK`和 ... 作为开发 Android 应用程序的 ID。最近从开始 eclipse 到结束需要很长时间`building workspace`，例如大约 6 或 7 分钟。所以我寻找加速 Eclipse 的方法。我发现了一些建议，例如更改`eclipse.ini`和添加更多内存，禁用启动自动构建和...。我成功地完成了这些，但我在其他 2 种方式上遇到了一些问题：

1.  禁用 Eclipse 验证器：
    我浏览**Windows > Preferences**但在 about **Validation**中看不到任何选项。
2.  禁用插件：
    在 Eclipse 中，我浏览**Windows > Preferences > General > Startup and Shutdown**并且有插件列表：

![在此处输入图像描述](../Images/82761876f2897a3c5b6aee77811f04db.png)

但我不知道可以禁用哪个插件而不会造成任何问题。
感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:19:34.960

1.  要禁用验证器，请转到 windows>preferences 并键入“valida..”（过滤将在您键入时起作用）并取消选中您要停用的验证器。
2.  您可以安全地禁用 Automatic Updates Scheduler 和 Mylyn 插件。Android开发工具包插件负责android开发。当您要安装新插件时，Equinox Provisioning 平台插件负责查看是否存在所需的依赖项。所以杀死 p2 和 android 插件不是一个好主意。

此外，我更喜欢添加内存（mx、ms、堆）并使用以下适用于我的安装的选项。-XX:+积极堆 -XX:+UseParallelGC

# java - 在 Web 层处理异步单向服务对

> ID：14639428
> 
> 赞同：0
> 
> 时间：2013-02-01T03:49:24.780
> 
> 标签：java, jquery, spring-mvc, cxf, apache-camel

我有一个需要在 Web 层处理的异步 Web 服务对。我编写了一个向服务发送查询请求的“请求”服务客户端。客户端收到一个 http '200' 表示服务器已成功接收到消息。

然后我有一个单独的响应侦听器，它是一个接收响应的 Camel/CXF Web 服务。我正在使用 WS-Addressing 消息 ID 来关联请求和响应。

我现在的任务是在 web 层处理这个问题。我希望用户填写表单，单击提交，然后调用 Web 服务。然后我的 CXF Web 服务侦听器会收到响应，查看消息 ID 并将其返回给 Web 层。

使用同步服务，这非常简单。但是，对于异步 Web 服务对，我不知道从哪里开始。我可以使用轮询方法调用 Web 服务，将消息 ID 写入地图，然后轮询地图并等待 Web 侦听器将响应写入地图。但是，我认为有框架支持这一点。

我正在研究 Spring MVC 和 JQuery，因为我认为这是正确的方向，但是在为初学者寻找好的资源时遇到了问题。

有没有人有任何想法？

谢谢，约格什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:06:00.390

一种方法是编写一个调用出站 Web 服务的 Spring MVC 控制器，并等待接收到入站 Web 服务（即：响应）。您可以通过在等待入站服务时暂停线程并在之后恢复线程来实现此目的。发生这种情况时，您可以在网站上显示某种微调器。所以从浏览器的角度来看，它仍然看起来像一个请求和响应。

但是，根据您的网站流量，这可能是一种低效的方法，因为在您等待入站服务时将使用一个 Web 容器线程。如果您的网站流量很大——并且入站和出站请求之间的延迟很长，您可能会很快用完可用线程并导致网站崩溃。

# iphone - UIImageViews 触摸时执行操作

> ID：14639430
> 
> 赞同：0
> 
> 时间：2013-02-01T03:49:44.530
> 
> 标签：iphone, ios, objective-c, uiimageview, ibaction

我想在我的应用程序中放置两个可以移动的 UIImageView。当一个图像与另一个图像接触时，它会触发一个动作，然后将两个图像放回原来的位置。对此有什么建议吗？

我在用

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];

// If the touch was in the placardView, move the placardView to its location
if ([touch view] == resultImage) {
    CGPoint location = [touch locationInView:self.tabBarController.view];
    resultImage.center = location;

    return;
}
} 
```

这允许 resultImage 自由移动。我只需要知道如何检测它的任何部分何时接触到另一个图像（它是静止的）并在它发生时执行一个动作，并将 resultImage 返回到它的起始位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:20:47.750

关闭我的头顶，您可以使用`CGRectContainsPoint`目标的框架和移动图像的四个角使用四次，看看它们是否接触。

```
if(CGRectContainsPoint(collisionTarget.frame, resultImage.frame.origin) ||
   CGRectContainsPoint(collisionTarget.frame, CGPointMake(resultImage.frame.origin.x,resultImage.frame.origin.y+resultImage.frame.size.height)) ||
   CGRectContainsPoint(collisionTarget.frame, CGPointMake(resultImage.frame.origin.x+resultImage.frame.size.width,resultImage.frame.origin.y)) ||
   CGRectContainsPoint(collisionTarget.frame, CGPointMake(resultImage.frame.origin.x+resultImage.frame.size.width,resultImage.frame.origin.y+resultImage.frame.size.height)){
    //do something
} 
```

编辑：我完全忘记了`CGRectIntersectsRect`. 你可以用那个。

```
if(CGRectIntersectsRect(imageView1.frame,imageView2.frame)){
    //do something
} 
```

`touchesMoved`只需在使用两个图像视图的框架移动第一个图像视图后立即在您的方法中进行上述检查。然后，将第一个位置恢复到之前某个时间点的位置。您需要将其位置存储在一个属性或更早的东西中。

# c# - C# 自动检查功能

> ID：14639433
> 
> 赞同：1
> 
> 时间：2013-02-01T03:50:19.890
> 
> 标签：c#, wpf, function

我有一个调用`Checking()`来更新我的 UI 的函数。我想让这个功能自动运行，每 1 秒运行一次并更新我的 UI。

我怎样才能做到这一点？

这是我的功能：

```
public MainWindow()
{
    InitializeComponent();
    Checking()
}

public void Checking()
{
    if (status= Good)
        UI.color.fill= Green
    else
        UI.color.Fill = Red
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:53:26.193

这段代码可以帮助你

```
//need to add  System.Timers in usings
using System.Timers;

//inside you code
//create timer with interval 2 sec
Timer timer=new Timer(2000);
//add eventhandler 
timer.Elapsed+=new ElapsedEventHandler(timer_Elapsed);
//start timer
timer.Start();

private void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        MessageBox.Show("324");
        //or other actions
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:39:32.973

DispathTimer 是计时器，它在一个线程中与 UI 一起工作。这段代码可以帮助你

```
 public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();

        DispatcherTimer timer = new DispatcherTimer(){Interval = new TimeSpan(0,0,0,1)};
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e) {
        Checking();
    }

    public void Checking()
    {   
       .....
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:16:48.590

您需要确保在 Checking() 中所做的更改已绑定并为它发送了 IPropertyNotifyChange。

```
using System.Reactive;
public MainWindow()
{
    InitializeComponent();
    Observable.Interval(TimeSpan.FromSeconds(1))
        .Subscribe( _ => Checking() );
} 
```

# php - PHP的邮件功能不发送电子邮件

> ID：14639443
> 
> 赞同：1
> 
> 时间：2013-02-01T03:52:14.713
> 
> 标签：php

因此，当我提交表单时，一切都很好地存储在数据库中，我收到了一封非常简单的电子邮件，基本上包含“嘿，谢谢，这是你的链接”之类的交易，我收到了就好了。但是现在我已经升级为使用 HTML 正文，突然我没有收到电子邮件，知道为什么吗？

```
$to = $username;
$subject = 'Thanks for Registering on Dota Pub Stars!';
$message = '<html>
                <head>
                    <title>Registration Successful!</title>
                    <link rel="stylesheet" src="http://www.sithhappens.net/css/style.css" />
                </head>
            <body class="bodybg">
                <div id="registrationform">
                <p class="success">Thanks for registering on Dota Pub Stars!</p>
                <br />
                <br />
                <a class="button2" href="http://www.sithhappens.net/?key=' . $activation_key . '&amp;username=' . $username . '&amp;email=' . $email1 . '">Activate Account</a>
                </div>
            </body>
            </html>';

$headers = "MIME-Version: 1.0 \r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\n";
$headers .= "From: $from\r\n";

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:20:24.160

你上面的代码工作正常我像这样检查尝试检查**$username**值是电子邮件

我的例子

```
$to = 'rsharma@gmail.com';
$subject = 'Thanks for Registering on Dota Pub Stars!';
$message = '<html>
                <head>
                    <title>Registration Successful!</title>
                    <link rel="stylesheet" src="http://site...net/css/style.css" />
                </head>
            <body class="bodybg">
                <div id="registrationform">
                <p class="success">Thanks for registering on Dota Pub Stars!</p>
                <br />
                <br />
                <a class="button2" href="http://www.site...net/activateacc.php?key=345345&amp;username=435345&amp;email=34534534">Activate Account</a>
                </div>
            </body>
            </html>';

    $headers = "MIME-Version: 1.0 \r\n";
    $headers .= "Content-type: text/html; charset=iso-8859-1\n";
    $headers .= "From: $from\r\n";

mail($to, $subject, $message, $headers); 
```

还要检查您的 SMTP 设置是否正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:05:25.290

您的服务器可能是 cAse-SEnSitive ...另外，添加 From

```
 $headers="From: $from\r\n";
   $headers.="Content-Type: text/html;charset=iso-8859-1\n";
   mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:06:47.153

请从 $to 末尾删除尾随逗号“，”

它应该是`$to = $username;`

并确保 $username 是电子邮件地址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:18:38.493

您可以尝试通过`\n`而不是分隔标题`\r\n`，不要混合它们并且不要在标题字符串的末尾包含一个。

# api - REST 网址方案

> ID：14639447
> 
> 赞同：0
> 
> 时间：2013-02-01T03:52:52.490
> 
> 标签：api, url, rest

我有许多想要向用户展示的图像子集（排序/过滤）。

其中：

*   列出用户拥有的图像
*   列出用户喜欢的图片

我想知道什么是好的寻址方案：

```
/image/?user_id={user_id}
/image/like/?user_id={user_id} 
```

对比

```
/image/user/{user_id}
/image/like/user/{user_id} 
```

假设我还想列出所有喜欢某张图片的用户：

```
/user/like/image/{image_id} 
```

对比

```
/user/?image_id={image_id}&mode=like 
```

我想我可以想出更多的可能性，我开始思考：这应该很难吗？

我可以选择一个对我最有意义的方案吗？是否有可以消除某些可能性的指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:45:09.440

*   用户喜欢图片，这里用户只是资源的关系/链接`Image`

因此，`/image/like/user`

在 Images like() 中，您可能希望使用隐式更新用户资源`/user/like/image`

整个过程可以反过来

# c# - C# 类继承自类的派生或基版本

> ID：14639450
> 
> 赞同：0
> 
> 时间：2013-02-01T03:53:09.923
> 
> 标签：c#

鉴于下面的示例，是否可以使用 ClassyFoo 扩展类 Foo 并让 ClassyFoo 创建的 Bar 实例从 ClassyFoo 继承，同时保持 Foo 创建的 Bar 实例仍然从 Foo 继承？

例如：

```
 class Foo
    {
        protected Foo()
        {
            Console.WriteLine("Setting up Foo");
        }

        public static void Show()
        {
            Console.WriteLine("Showing Foo");
            var bar = new Bar();
        }
    }

    class ClassyFoo : Foo
    {
        public ClassyFoo() : base()
        {
            Console.WriteLine("Setting up Classy Foo");
        }

        public new static void Show()
        {
            Console.WriteLine("Showing Classy Foo");
            var bar = new Bar();
        }
    }

    class Bar: Foo
    {
        public Bar() : base()
        {
            Console.WriteLine("Setting up Bar");
        }
    } 
```

ClassyFoo.Show() 的期望输出是：

> 显示 Classy Foo
> 设置 Foo
> 设置 Classy Foo
> 设置 Bar

Foo.Show() 的输出是：

> 显示 Foo
> 设置 Foo
> 设置栏

情况是类 Bar 为 Foo 添加了一些配置/专业化，但 Classy Foo 也是如此。但是 Bar 和 ClassyFoo 的特化可以存在于同一个对象上。

我试图避免有一个从 ClassyFoo 继承的重复 Bar。实际上有多个 Bars 但只有一个 ClassyFoo，所以这将是很多重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:20:09.623

不确定您要达到什么目标，但是您调用引用 Bar 实例的 Foo.Show() 与 ClassyFoo si 无关，您无法从那里获得任何期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:09:53.760

我会说这是不可能的。一个类只有一个基类。

您可能能够将 ClassyFoo 和/或 Bar 实现为接口，并让实际的类从一个或另一个或两者继承。

根据实际的表示和代码重用，我将同时制作两个接口（类似的处理）或一个抽象类（你可以在那里塞满一堆代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:13:54.767

由于 C# 不支持多重继承，因此您必须为此使用接口，如果不使用接口，您将无法做到这一点。

# linux - 如何将命令的输出放入 bash 变量中

> ID：14639452
> 
> 赞同：1
> 
> 时间：2013-02-01T03:53:29.417
> 
> 标签：linux, bash, shell

我想将命令的输出放在 bash 变量中，然后在其他命令中进一步使用该变量

假设我想要这样的东西

`ls | $(variable) |awk '/$variable/{print "here"}'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:03:44.693

要将命令输出放入变量中，您可以在 bash 中使用以下格式

```
variable=`pwd`
echo $variable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:07:30.323

或者

```
now=`date` 
```

后记号

这对我来说更容易，因为它适用于任何 shell 或 perl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:56:08.630

我不知道您可以像这样在一个步骤中轻松完成它，但我不知道您为什么要像这样在脚本中使用它`awk` *并使用它。*这是两步版本，但我不确定它*的作用*：

```
variable=$(ls)
echo ${variable} | awk "/${variable}/{printf \"here\"}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:00:18.280

你可以试试：

```
variable=$(ls); awk "/$variable/"'{print "here"}' 
```

注1：`/$variable/`用双引号括起来，否则不会被命令输出代替。

注意2：上述命令可能会失败，因为`ls`可能包含“/”或换行符，这将破坏`awk`命令。您可以更改`ls`为`ls | tr '\n' ' ' | tr -d '/' | sed 's/ *$//g'`（用空格替换所有换行符；删除所有斜杠；删除尾随空格），具体取决于您的目标。

注3：为避免变量赋值污染当前shell的环境，可以将上面的命令用括号括起来，即`(variable=$(some_command); awk "/$variable/"'{print "here"}')`

# http - 在 Adhoc 网络上读取 HTTP 请求

> ID：14639455
> 
> 赞同：-1
> 
> 时间：2013-02-01T03:53:33.783
> 
> 标签：http, networking, request, adhoc

我的 iPhone 上有一个应用程序，它向我的家庭路由器发出 HTTP 请求，以与我的手机通过 wifi 连接的家庭自动化路由器通信。如果我建立一个自组织网络并以这种方式从应用程序发送请求，我如何读取 iPhone 发出的 HTTP 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:29:53.077

如果我理解正确，您所拥有的是：

iPhone - (Internet) - 家庭路由器 - 自动化路由器 - 电话

捕获来自 iPhone 的 HTTP 请求的最简单方法是将任何计算机代替自动化路由器与自动化路由器的 IP 地址连接，然后在计算机上运行 wireshark 以捕获传入的数据包。

如果你想建立一个自组织网络，你只需要：

iPhone - 任何支持 Wifi 的路由器/交换机 - 电脑

然后，您必须在 iPhone 上配置应用程序以发送到计算机的 IP 地址，然后再次在计算机上运行 wireshark 来捕获数据包。

希望这可以帮助。

# linux - 如何更改 qmake PREFIX 位置

> ID：14639459
> 
> 赞同：13
> 
> 时间：2013-02-01T03:54:01.447
> 
> 标签：linux, qt, makefile, qmake

我使用下面的命令来安装一些东西。

```
qmake PREFIX=/path/to/my/dir
make
make install 
```

但是我给出的路径是错误的，如何将 PREFIX 更新到正确的位置并删除旧的安装，然后重新安装？

我试过了：

```
rm -rf /path/to/my/dir/bin    # this is where the program being installed
qmake PREFIX=/path/to/correct/dir
make
make install 
```

但它仍然被安装到旧路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T03:14:42.860

根据“qmake -h”，这将在全局范围内设置它：

`qmake -set prefix /path/to/correct/dir`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-08T19:58:27.460

对于〜QT 5：

在`qmake`安装目录中为标准安装规则来自`qmake`变量`target.path`.

通常，`qmake`不使用名为 的设置`PREFIX`，尽管因为这是 Unix 中用于目标安装目录的传统术语，但对于特定项目而言，创建自己的`PREFIX`变量以在其项目文件中使用是一种足够流行的约定（`*.pro`）。

查看`.pro`项目的文件并找出`target.path`设置的位置。如果它是从环境变量中设置的，即

```
target.path = $$(PREFIX)  # note the regular parentheses 
```

然后你可以在你运行的环境中传递值`qmake`：

```
$ PREFIX=/path/to/my/dir qmake 
```

如果它是从[`qmake`属性](https://doc.qt.io/qt-5/qmake-environment-reference.html#properties)设置的，即

```
target.path = $$[PREFIX]  # note the square brackets 
```

然后您可以永久设置该属性以供将来`qmake`在命令行上运行：

```
$ qmake -set PREFIX /path/to/my/dir 
```

如果它是从内部变量设置的，它看起来像

```
target.path = $$PREFIX 
```

或者

```
target.path = $${PREFIX}  # note the curly braces 
```

无法`qmake`从命令行覆盖内部变量的值；您需要找出`.pro`文件中内部变量的设置位置并进行适当的更改，也许只需编辑`.pro`文件，或者如果那里有某种逻辑，弄清楚如何让它选择不同的值。

# ios - 如何访问类方法？

> ID：14639473
> 
> 赞同：0
> 
> 时间：2013-02-01T03:55:44.637
> 
> 标签：ios, objective-c, nsmutablearray, nsarray, class-method

我有一个以数组为参数的类方法

```
+(void)classMethod:(NSArray*)array; 
```

带有数组值的消息从外部 ViewController 发送到此方法。

```
[ViewController classMethod:ValueofArray] 
```

现在我想从与 Class 方法相同的 ViewController 中的实例方法访问该数组的值

```
-(void)instanceMethod; 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:12:20.437

您必须创建一个静态类级别变量来保存该值。

例如：

```
@implementation SOMyObject

static NSArray *thisArray;

+(NSArray*) thisArray
{
    return thisArray;
}

+(void) myMethod:(NSArray*) array;
{
    thisArray = array;
}

-(void) doWork
{
    //[SOMyObject thisArray]
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:04:24.540

你写了：

> 现在我想从与 Class 方法相同的 ViewController 中的实例方法访问该数组的值

但是类方法的重点在于它不是类的实例。当您不需要查看类的任何变量或属性时，您可以使用类方法。例如，类似的方法`[MyClass countVowels:someString];`可以在没有任何“状态”的情况下执行其操作，因此它可能是类方法的候选者。

另一方面，如果你写“ `[myClass countVowels];`”，它意味着这样的事情：

```
MyClass * myClass = [[MyClass alloc] initWithString:@"some string]];
int howMany = [myClass countVowels]; 
```

第二个版本可能会存储传递给 init 方法的字符串，然后计算该字符串中的元音。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:10:42.903

您可以在类的标头和实现之外创建一个静态类变量。

这是一个例子：

```
// MyClass.h

@interface MyClass : NSObject
+ (void)setClassArray:(NSArray *)array;
+ (NSArray *)classArray;
@end

// MyClass.m

#import "MyClass.h"

static NSArray *_myClassArray;

@implementation MyClass

+ (NSArray *)classArray
{
    return _myClassArray;
}

+ (void)setClassArray:(NSArray *)array
{
    if (_myClassArray != array)
    {
        _myClassArray = array;
    }
}

@end 
```

因此，您可以像这样设置类数组的值：

```
[MyClass setClassArray:[NSArray arrayWithObject:@"Some_Objects"]]; 
```

在该类的实例中，您可以像这样访问它：

```
- (void)myInstanceMethod
{
    // setting to another ivar is optional and only shown for clarity

   NSArray *array = _myClassArray;
    // ... do whatever you want to do with it here...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:11:10.373

确实，类方法通常（并且应该是）无状态功能实体，您正在寻找的是可能的。在这种情况下，所有实例都想使用一个数组`MyViewController`，因此设置该信息的其他类并不关心。

```
MyViewController.m

static NSArray *staticArray;

+ (void)aClassMethod:(NSArray *)array
{
    staticArray = array;
}

- (void)anInstanceMethod
{
    NSLog(@"My staticArray: %@", staticArray);
} 
```

综上所述，这是一个非常具体且非标准的案例。你可能会重新考虑你的用例，也许你真的想要一个委托模式，一个默认的单例，比如`[NSNotificationCenter defaultCenter]`，或者其他东西。或者你实际上有一个很好的用例。好的。

无论如何，你有它。

# c# - .net aes 的目标 c aes 128 加密

> ID：14639475
> 
> 赞同：3
> 
> 时间：2013-02-01T03:56:06.693
> 
> 标签：c#, objective-c, base64, aes

因此，我终于发现在为具有相同加密的 .Net Wcf 服务实施 AES 128 加密时有些不稳定。我现在的问题是，每当它尝试解密字符串时，它都会有一个步骤来执行 FromBase64String 转换，这会给我一个错误：

```
static public string DecryptString(string message, string key)
{
    string output = "";
    Rijndael aes = new RijndaelManaged();

    try
    {
        byte[] encrypted = Convert.FromBase64String(message);
        byte[] cipherText = GetCipherText(encrypted);

        aes.Key = Convert.FromBase64String(key);
        aes.Mode = CipherMode.CBC;

        aes.IV = GetIV(encrypted);

        using (MemoryStream ms = new MemoryStream())
        {
            using (ICryptoTransform decryptor = aes.CreateDecryptor())
            {
                using (CryptoStream cs = new CryptoStream(ms, decryptor, CryptoStreamMode.Write))
                {
                    cs.Write(cipherText, 0, cipherText.Length);
                    cs.FlushFinalBlock();

                    byte[] decrypted = ms.ToArray();
                    output = Encoding.UTF8.GetString(decrypted);
                }
            }
        }
    } 
```

错误是：

> **指数数组的边界之外。**

它发生在

```
cs.FlushFinalBlock(); 
```

这是它为消息“heythere”和密钥“25f9e794323b453885f5181f1b624d0b”生成的加密

> 0suql40BUGiDoFA4SdXJAA==

这来自我的 .Net 加密：

> unNWQfm9RaU/HgKlDNEmoXZaTzsuBoTNsA2UvDKZhc4=

PS 对于 AES 128 的 iPhone 加密，这是我从以下位置获取代码的地方：

> [.Net 和 iPhone 之间的 AES 互操作性？](https://stackoverflow.com/questions/538435/aes-interoperability-between-net-and-iphone/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:31:23.477

查看[MSDN 上的 AES Keeping your documents secure 文章](http://msdn.microsoft.com/en-us/magazine/cc164055.aspx)并向下滚动到标题为“使用 AES 类”的部分，“图 15 使用 AES”有一个很好且简单的加密/解密示例。

PS注意在某些块密码（如AES）模式（如CBC）中使用的填充，当不同的系统相互通信时，这些可能会很痛苦，因为填充/块大小可能因一个系统而异...见[填充乐趣](https://stackoverflow.com/questions/4545387/using-aes-encryption-in-net-cryptographicexception-saying-the-padding-is-inva)

编辑：刚刚发现这个小宝石...... [simple-2-way-encryption-for-c-sharp](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:38:42.057

[您可以在此处](http://automagical.rationalmind.net/2009/02/12/aes-interoperability-between-net-and-iphone/)找到适用于 iPhone 和 .NET 的现成示例

一般来说，密码算法是通用的，应该可以跨不同的语言工作，只是您需要确保两种算法（即在 .NET 和 iPhone 中）：

*   使用以相同方式编码的完全相同的密钥进行存储/传输（通常是 base64）
*   具有完全相同的参数，包括填充模式、操作模式（例如 CBC/ECB）

# python - 返回空迭代器而不是 None 是不好的 Python 风格吗？

> ID：14639480
> 
> 赞同：5
> 
> 时间：2013-02-01T03:56:20.360
> 
> 标签：python, iterator, generator

对此的看法似乎参差不齐——是否有 Pythonic 的“正确方法”来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T04:05:27.287

我认为空迭代器更好，因为迭代没有比首先检查返回值是否不是 None 更快，然后迭代或不迭代。

```
for x in function():
    do_something()

value = function()
if value is not None:
    for x in value:
        do_something() 
```

看看这个。

通常，您也不会使用 None 初始化 iter 属性，而是使用空的 iter 对象。

```
self.list_of_users = [] 
```

不是

```
self.list_of_users = None 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T05:02:21.740

如果可以的话，我被教导要遵循的一般做法是为输入域中的所有有效值返回相同的数据类型。它使其他人更容易使用您的代码，并且您的文档将更清晰。对于有效输入域之外的值，引发异常。

在这种情况下，空迭代器而不是 None 似乎是更好的做法。我知道其他编程语言喜欢在这些情况下返回 null，但在您描述的场景中，我认为这样做没有好处。

# c# - 使用 LINQ 将多个列表合并为一个列表

> ID：14639481
> 
> 赞同：16
> 
> 时间：2013-02-01T03:56:30.533
> 
> 标签：c#, linq, design-patterns

有没有一种巧妙的方法可以使用 LINQ 将多个列表合并到一个列表中以有效地复制它？

```
public class RGB
{
    public int Red { get; set; }
    public int Green { get; set; }
    public int Blue { get; set; }
    public RGB(int red, int green, int blue) { Red = red; Green = green; Blue = blue; }
}

public void myFunction()
{
    List<int> red = new List<int> { 0x00, 0x03, 0x06, 0x08, 0x09 };
    List<int> green = new List<int> { 0x00, 0x05, 0x06, 0x07, 0x0a };
    List<int> blue = new List<int> { 0x00, 0x02, 0x03, 0x05, 0x09 };

    List<RGB> colors = new List<RGB>();

    colors.Add(new RGB(red[0], green[0], blue[0]));
    colors.Add(new RGB(red[1], green[1], blue[1]));
    colors.Add(new RGB(red[2], green[2], blue[2]));
    colors.Add(new RGB(red[3], green[3], blue[3]));
    colors.Add(new RGB(red[4], green[4], blue[4]));
} 
```

或者，由于列表是分开到达的，因此按如下顺序合并它们会更有效。

```
public class RGB
{
    public int Red { get; set; }
    public int Green { get; set; }
    public int Blue { get; set; }

    public RGB(int red, int green, int blue) { Red = red; Green = green; Blue = blue; }
}

public void myFunction()
{
    List<int> red = new List<int> { 0x00, 0x03, 0x06, 0x08, 0x09 };

    List<RGB> colors = new List<RGB>();

    colors.Add(new RGB(red[0], 0, 0));
    colors.Add(new RGB(red[1], 0, 0));
    colors.Add(new RGB(red[2], 0, 0));
    colors.Add(new RGB(red[3], 0, 0));
    colors.Add(new RGB(red[4], 0, 0));

    List<int> green = new List<int> { 0x00, 0x05, 0x06, 0x07, 0x0a };

    colors[0].Green = green[0];
    colors[1].Green = green[1];
    colors[2].Green = green[2];
    colors[3].Green = green[3];
    colors[4].Green = green[4];

    List<int> blue = new List<int> { 0x00, 0x02, 0x03, 0x05, 0x09 };

    colors[0].Blue = blue[0];
    colors[1].Blue = blue[1];
    colors[2].Blue = blue[2];
    colors[3].Blue = blue[3];
    colors[4].Blue = blue[4];
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T04:10:39.790

您实际上是在尝试压缩三个集合。如果只有 LINQ`Zip()`方法支持同时压缩两个以上。但很可惜，它一次只支持两个。但我们可以让它工作：

```
var reds = new List<int> { 0x00, 0x03, 0x06, 0x08, 0x09 };
var greens = new List<int> { 0x00, 0x05, 0x06, 0x07, 0x0a };
var blues = new List<int> { 0x00, 0x02, 0x03, 0x05, 0x09 };

var colors =
    reds.Zip(greens.Zip(blues, Tuple.Create),
        (red, tuple) => new RGB(red, tuple.Item1, tuple.Item2)
    )
    .ToList(); 
```

当然，编写一个扩展方法来做三个（或更多）并不是很痛苦。

```
public static IEnumerable<TResult> Zip<TFirst, TSecond, TThird, TResult>(
    this IEnumerable<TFirst> first,
    IEnumerable<TSecond> second,
    IEnumerable<TThird> third,
    Func<TFirst, TSecond, TThird, TResult> resultSelector)
{
    using (var enum1 = first.GetEnumerator())
    using (var enum2 = second.GetEnumerator())
    using (var enum3 = third.GetEnumerator())
    {
        while (enum1.MoveNext() && enum2.MoveNext() && enum3.MoveNext())
        {
            yield return resultSelector(
                enum1.Current,
                enum2.Current,
                enum3.Current);
        }
    }
} 
```

这使事情变得更好：

```
var colors =
    reds.Zip(greens, blues,
        (red, green, blue) => new RGB(red, green, blue)
    )
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-01T04:02:14.170

是的 - 你可以这样做：

```
List<int> red = new List<int> { 0x00, 0x03, 0x06, 0x08, 0x09 };
List<int> green = new List<int> { 0x00, 0x05, 0x06, 0x07, 0x0a };
List<int> blue = new List<int> { 0x00, 0x02, 0x03, 0x05, 0x09 };

List<RGB> colors = Enumerable
    .Range(0, red.Count)
    .Select(i => new RGB(red[i], green[i], blue[i]))
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-08T16:02:35.927

这是一个简化版本，它采用**任意**数量的相同类型的序列（作为数组）并将它们压缩在一起：

```
public static IEnumerable<TResult> Zip<T, TResult>(this IEnumerable<T>[] sequences, Func<T[], TResult> resultSelector)
{
    var enumerators = sequences.Select(s => s.GetEnumerator()).ToArray();
    while(enumerators.All(e => e.MoveNext()))
        yield return resultSelector(enumerators.Select(e => e.Current).ToArray());
} 
```

## 优点

*   任意数量的序列
*   四行代码
*   LINQ`.Zip()`方法的另一个重载
*   一次压缩所有序列，而不是`.Zip`每次都链接添加一个序列

## 缺点

*   所有序列都需要相同的类型（在您的情况下不是问题）
*   不检查相同的列表长度（如果需要，添加一行）

## 用法

[![拉链颜色](../Images/c354f7915e16cb0d607312eb5278a436.png)](https://i.stack.imgur.com/nsiej.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-11T12:18:53.193

像这样使用 SelectMany：

```
List_A.Select(a => a.List_B).SelectMany(s => s).ToList(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-01T04:04:38.907

```
var colours = red.Select((t, i) => new RGB(t, green[i], blue[i])).ToList(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-19T21:58:58.117

您可以使用 Aggregate with Zip 一次性压缩任意数量的 IEnumerable。

以下是您可以使用示例执行此操作的方法：

```
var colorLists = new List<int>[] { red, green, blue };
var rgbCount = red.Count;
var emptyTriples =
    Enumerable.Repeat<Func<List<int>>>(() => new List<int>(), rgbCount)
    .Select(makeList => makeList());

var rgbTriples = colorLists.Aggregate(
    emptyTriples,
    (partialTriples, channelValues) =>
        partialTriples.Zip(
            channelValues,
            (partialTriple, channelValue) =>
            {
                partialTriple.Add(channelValue);
                return partialTriple;
            }));

var rgbObjects = rgbTriples.Select(
    triple => new RGB(triple[0], triple[1], triple[2])); 
```

通常，依赖 Zip 作为底层组合器可以避免输入长度变化的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-11T19:25:46.353

对于它的价值，我喜欢 LINQ 并经常使用它，但有时老式的方式是最好的。请注意以下示例：

```
 const int Max = 100000;
        var rnd = new Random();
        var list1 = Enumerable.Range(1, Max).Select(r => rnd.Next(Max)).ToList();
        var list2 = Enumerable.Range(1, Max).Select(r => rnd.Next(Max)).ToList();

        DateTime start;

        start = DateTime.Now;
        var r1 = list1.Zip(list2, (a, b) => new { a, b }).ToList();
        var time1 = DateTime.Now - start;

        start = DateTime.Now;
        var r2 = list1.Select((l1, i) => new { a = l1, b = list2[i]}).ToList();
        var time2 = DateTime.Now - start;

        start = DateTime.Now;
        var r3 = new int[0].Select(i => new { a = 0, b = 0 }).ToList();
        //  Easy out-of-bounds prevention not offered in solution #2 (if list2 has fewer items)
        int max = Math.Max(list1.Count, list2.Count);
        for (int i = 0; i < max; i++)
            r3.Add(new { a = list1[i], b = list2[i] });
        var time3 = DateTime.Now - start;

        Debug.WriteLine("r1 == r2: {0}", r1.SequenceEqual(r2));
        Debug.WriteLine("r1 == r3: {0}", r1.SequenceEqual(r3));
        Debug.WriteLine("time1 {0}", time1);
        Debug.WriteLine("time2 {0}", time2);
        Debug.WriteLine("time3 {0}", time3); 
```

输出是：

r1 == r2：真
r1 == r3：真
time1 00:00:00.0100071
time2 00:00:00.0170138
time3 00:00:00.0040028

当然，在这种情况下（对于人类的感知）时间几乎不明显，所以它归结为偏好，但知道 #3 是迄今为止最快的，我倾向于在类型更复杂的关键性能领域使用它或者枚举数可能很大。

另外，请注意使用 3 时的区别：

```
 const int Max = 100000;
        var rnd = new Random();
        var list1 = Enumerable.Range(1, Max).Select(r => rnd.Next(Max)).ToList();
        var list2 = Enumerable.Range(1, Max).Select(r => rnd.Next(Max)).ToList();
        var list3 = Enumerable.Range(1, Max).Select(r => rnd.Next(Max)).ToList();

        DateTime start;

        start = DateTime.Now;
        var r1 = list1.Zip(list2, (a, b) => new { a, b }).Zip(list3, (ab, c) => new { ab.a, ab.b, c }).ToList();
        var time1 = DateTime.Now - start;

        start = DateTime.Now;
        var r2 = list1.Select((l1, i) => new { a = l1, b = list2[i], c = list3[i] }).ToList();
        var time2 = DateTime.Now - start;

        start = DateTime.Now;
        var r3 = new int[0].Select(i => new { a = 0, b = 0, c = 0 }).ToList();
        //  Easy out-of-bounds prevention not offered in solution #2 (if list2 or list3 have fewer items)
        int max = new int[] { list1.Count, list2.Count, list3.Count }.Max();
        for (int i = 0; i < max; i++)
            r3.Add(new { a = list1[i], b = list2[i], c = list3[i] });
        var time3 = DateTime.Now - start;

        Debug.WriteLine("r1 == r2: {0}", r1.SequenceEqual(r2));
        Debug.WriteLine("r1 == r3: {0}", r1.SequenceEqual(r3));
        Debug.WriteLine("time1 {0}", time1);
        Debug.WriteLine("time2 {0}", time2);
        Debug.WriteLine("time3 {0}", time3); 
```

输出：

r1 == r2: 真
r1 == r3: 真
time1 00:00:00.0280393
time2 00:00:00.0089870
time3 00:00:00.0050041

正如预期的那样，.zip 方法必须进行多次迭代并且变得最慢。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-18T11:40:43.303

Jeff Mercado 提供了一个答案，其中三个序列被压缩。这可以推广到任何数量的序列，但所有序列都必须具有相同的项目类型。

这是一个通用的 zip 运算符，它处理不同的输入长度，并具有适当的错误处理和枚举数的适当处置：

```
static class EnumerableExtensions {

  public static IEnumerable<TResult> Zip<TSource, TResult>(
    this IEnumerable<IEnumerable<TSource>> source,
    Func<IEnumerable<TSource>, TResult> resultSelector
  ) {
    if (source == null)
      throw new ArgumentNullException("source");
    if (resultSelector == null)
      throw new ArgumentNullException("resultSelector");

    var enumerators = new List<IEnumerator<TSource>>();
    try {
      foreach (var enumerable in source) {
        if (enumerable == null)
          throw new ArgumentNullException();
        enumerators.Add(enumerable.GetEnumerator());
      }

      while (enumerators.Aggregate(true, (moveNext, enumerator) => moveNext && enumerator.MoveNext()))
        yield return resultSelector(enumerators.Select(enumerator => enumerator.Current));
    }
    finally {
      foreach (var enumerator in enumerators)
        enumerator.Dispose();
    }
  }

} 
```

然后可以使用这个广义的 zip 运算符计算颜色：

```
var reds = new[] { 0x00, 0x03, 0x06, 0x08, 0x09 };
var greens = new[] { 0x00, 0x05, 0x06, 0x07, 0x0a };
var blues = new[] { 0x00, 0x02, 0x03, 0x05, 0x09 };
var colors = new[] { reds, greens, blues }
  .Zip(rgb => new RGB(rgb.First(), rgb.Skip(1).First(), rgb.Skip(2).First())); 
```

该代码可能不像其他一些解决方案那样优雅，但通用的 zip 运算符在某些情况下可能很有用，而且我提供的代码很有效，因为它只迭代每个源序列一次。

# python - 如何在一行中只更改一些 QTableWidgetItems？

> ID：14639484
> 
> 赞同：1
> 
> 时间：2013-02-01T03:57:03.467
> 
> 标签：python, qt, pyqt, pyside, qtablewidget

我有一个带有以下列的 QTableWidget：

```
 Username    Password     URL       Status
   +----------+-----------+---------+---------+
   |  user1   |  passwd1  | url.com |   OK    |
   |  user2   |  passwd2  | url.com |   FAIL  |
   +----------+-----------+---------+---------+ 
```

在我的应用程序的工作人员`QThread`中，发出一个信号，其中包含表中显示的数据。但是，此数据需要稍后更新（尤其是“状态”列）。

例如，我希望能够仅更新第二行。现在，到目前为止，我将遍历表中的所有行，然后尝试将某个唯一字段（例如用户名）与软件发送的数据进行匹配。因此，如果需要将第 2 行的状态从“FAIL”更新为“RETRY”，则发送到 GUI 线程的信号将包含用户名和状态字符串。然后我将比较这两个字符串（来自信号的字符串，即 QThread 与当前在表中的字符串），如果匹配，则更新表。希望这是有道理的。

问题是，我想知道这是否是一个可行的解决方案？还有其他的吗？我已经考虑向 QTableWidget 添加另一个“隐藏”列，该列将包含每个 QThread 生成的随机字符字符串，然后将对其进行更新。但原理还是一样的。

任何人都可以给我任何指示吗？

编辑：每个请求添加代码：

这是我的 GUI 线程代码（搜索和更新部分）：

```
def writeToMainTable(self, param):

    username = param['username']
    statusText = param['statusText']

    for i in xrange(self.mainTable.currentRowCount()):
        if username == self.mainTable.item(i, 0).text():
            found = True
            activerow = i    

    if found:
        if statusText is not None: self.mainTable.setItem(activerow, 3, QTableWidgetItem(statusText)) 
```

虽然 QThread 有这样的东西：

```
def sendToTable(self, param): #param is a dict here as well
    self.mainsig.emit(param) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:23:45.427

看起来您正在使用 a different`QThread`来更新每一行，因此您可以使用 a [`QSignalMapper`](http://doc.qt.digia.com/4.7-snapshot/qsignalmapper.html)，如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import time, random

from PyQt4 import QtGui, QtCore

class MyThread(QtCore.QThread):
    statusChanged = QtCore.pyqtSignal()

    def __init__(self, parent=None):
        super(MyThread, self).__init__(parent)
        self.status = None

    def run(self):
        time.sleep(3)
        self.status = True if not self.status else False
        self.statusChanged.emit()

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.tableWidget = QtGui.QTableWidget(self)
        self.tableWidget.setRowCount(2)
        self.tableWidget.setColumnCount(4)
        self.tableWidget.horizontalHeader().setResizeMode(QtGui.QHeaderView.Stretch)

        self.signalMapper = QtCore.QSignalMapper(self)  
        self.signalMapper.mapped.connect(self.on_signalMapper_mapped)  

        for row in range(2):
            status = random.getrandbits(1)
            state  = "Ok" if status else "Failed"
            thread = MyThread(self)
            thread.status = status

            self.signalMapper.setMapping(thread, row)

            thread.statusChanged.connect(self.signalMapper.map)
            thread.start()

            values = ["user", "passwd", "url.com", state]
            for column, value in enumerate(values):
                item = QtGui.QTableWidgetItem()
                item.setText("{0}: {1}".format(row, value))

                self.tableWidget.setItem(row, column, item)

        self.gridLayout = QtGui.QGridLayout(self)
        self.gridLayout.addWidget(self.tableWidget, 0, 0)

    @QtCore.pyqtSlot(int)
    def on_signalMapper_mapped(self, number):
        state  = "Ok" if self.signalMapper.mapping(number).status else "Failed"
        item   = self.tableWidget.item(number, 3)
        item.setText("{0}: {1}".format(number, state))

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(666, 111)
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:25:15.010

我不确定你到底想要什么。我假设您希望 Qt 为您执行循环？如果是这样，这是一种方法。希望这可以帮助。

```
import sys

from PySide.QtCore import *
from PySide.QtGui import *

class Main(QWidget):

    def __init__(self):
        super(Main, self).__init__()

        self.table = Table(self)
        self.change = QPushButton('Change')

        layout = QHBoxLayout(self)

        layout.addWidget(self.table)
        layout.addWidget(self.change)

        self.change.clicked.connect(self.table.updateCell)

class Table(QTableWidget):

    def __init__(self, parent=None):
        super(Table, self).__init__(2, 2, parent)
        self.setItem(1, 0, QTableWidgetItem('test'))
        self.setItem(1, 1, QTableWidgetItem('False'))

    def updateCell(self):

        item, = self.findItems('test', Qt.MatchExactly)
        new = repr(not eval(self.item(item.row(), 1).text()))
        self.item(row, 1).setText(new)

app = QApplication([])  
main = Main()
main.show()
app.exec_() 
```

# ember.js - 您如何在嵌套对象定义中引用 Ember.js 对象？

> ID：14639487
> 
> 赞同：0
> 
> 时间：2013-02-01T03:57:16.833
> 
> 标签：ember.js

我正在研究 Ember.js 类来帮助处理表单。在下面的代码片段中，我的定义`widget`需要将其绑定到它所`value`嵌套的对象的属性，因此我将绑定设置为`'App.AjaxForm.aField.value'`.

有没有更少重复的方式来表达这个？

```
App.Field = Ember.Object.extend({
    // The Ember.js equivalent of ``django.forms.fields.Field``.
    value: null,
    errors: [],
    widget: null
});

App.AjaxForm = App.Form.create({
    action: '/ajax/',
    fields: [
        'aField'
    ],
    aField: App.Field.create({
        widget: Ember.TextField.extend({
            valueBinding: 'App.AjaxForm.aField.value'
        })
    })
}); 
```

更新：添加了`App.Field`定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:02:53.050

这是我的解决方案。

```
App.Field = Ember.Object.extend({
    // The Ember.js equivalent of ``django.forms.fields.Field``.
    value: null,
    errors: [],
    widget_class: Ember.TextField,
    widget: function () {
        return this.get('widget_class').extend({
            field: this,
            valueBinding: 'field.value'
        });
    }.property()
}); 
```

# google-app-engine - 如何解码 GAE version_id？

> ID：14639488
> 
> 赞同：2
> 
> 时间：2013-02-01T03:57:35.910
> 
> 标签：google-app-engine

我注意到部署中的 version_id 在管理日志中表示为 ISO 时间戳。是否也可以将环境变量 CURRENT_VERSION_ID 解码为时间戳？一些例子：

```
2013-02-01T02:44:34Z 364988112448279806 
2013-02-01T02:46:26Z 364988142569033474
2013-02-01T02:51:39Z 364988226566178837 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:15:48.687

从另一个实际上并不相关的[答案](https://stackoverflow.com/a/5259804/8418)中，您可以将版本 ID[右移 28 位：](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-python/-GAQ5888cbQ)

```
version_id = long(self.request.environ['CURRENT_VERSION_ID'].split('.')[1])
timestamp = version_id >> 28 # epochtime 
```

此外，您可以将其格式化为更易于阅读的形式，如下所示：

```
from datetime import datetime
version = datetime.fromtimestamp(timestamp).strftime('%Y-%m-%d %H:%M:%S') 
```

所以@ShayErlichmen 发现的这个神奇数字是 2^28。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:01:43.743

看来您需要在 268935300.571429 中划分版本才能获得纪元时间。
[我编写了一个简单的电子表格](https://docs.google.com/spreadsheet/ccc?key=0AqK1I3zTjmMAdDBJal9GZk94TzBGelloSlVFZnB0TFE#gid=0)来对数字进行逆向工程，但它需要更多样本才能获得准确的数字。

# python - Python从电子邮件中提取域名（包括几种特殊情况）

> ID：14639491
> 
> 赞同：1
> 
> 时间：2013-02-01T03:57:58.160
> 
> 标签：python, regex, python-3.x

我正在尝试使用 Python 从电子邮件字符串中提取域名。对于 abc@xyz.com 等基本案例，以下方法效果很好：

```
string.split("@")[1].rstrip(".com")   #would give me "xyz" 
```

但我希望找到一个解决方案，可以在以下情况下获得域名：

*   abc@alumni.xyz.com
*   abc@xyz.org
*   abc@xyz.co.in
*   abc@xyz.it

我想到的一个解决方案是使用正则表达式并去掉最后一个点之后的任何内容，但仍然留下特殊域，例如“xyz.co.sy”，我希望在其中只得到“xyz”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-04T23:07:45.777

这也行。

```
str.split("@")[1].split(".")[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:23:45.947

下面的代码应该可以帮助您完成所需的操作：

```
fromAddr = message.get('From').split('@')[1].rstrip('>')
        fromAddr = fromAddr.split(' ')[0] 
```

# android - 如何在android中使用GPS获得位置准确性？

> ID：14639493
> 
> 赞同：0
> 
> 时间：2013-02-01T03:58:09.470
> 
> 标签：android, gps, location

我在使用 GPS 获取位置方面完全是新手。

所以作为参考，我使用了这个链接。

[https://stackoverflow.com/a/3145655/1395259](https://stackoverflow.com/a/3145655/1395259)

这非常适合提供纬度和经度的位置。**但是，如果我使用location.getAccuracy()**检查准确性。它提供超过**500 米的输出**

**我想要50 或 100 米**以下的位置精度 。

谁能告诉我如何获得上述距离的准确性。

这种帮助对我来说会更有用，我一定会喜欢它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:32:48.387

您需要填写[Places API 申请表](http://gmaps-ws-console.appspot.com/)才能访问 Google Places API。此应用程序将由 Google 验证，他们将为您提供必要的访问权限。

可以在此处找到有关 Places API 的更多信息：

[http://code.google.com/apis/maps/documentation/places/](http://code.google.com/apis/maps/documentation/places/)

[这里](https://stackoverflow.com/questions/4291573/how-to-find-hospital-location-near-by-my-location/10479656#10479656)有一个很好解释的答案。

希望这可以帮助 ：）

# java - 如何使用osgi在CQ5中显示“hello world”

> ID：14639494
> 
> 赞同：2
> 
> 时间：2013-02-01T03:58:13.543
> 
> 标签：java, osgi, apache-felix, aem, sling

我需要了解 CQ5 中 sling 和 Felix 之间的代码如何流动。我正在寻找一个基本操作，其中我的 jcr 节点 /jsp 将显示“Hello World”。但是这个消息应该来自一个 OSGi 包。

基本上，我也需要创建和安装捆绑包。但至少我需要知道这里的控制流程。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:20:24.883

查看 dev.day.com 上题为[Sling 和 OSGi](http://dev.day.com/content/ddc/blog/2008/05/slingosgi.html)的博客条目。它描述了创建服务、捆绑它并从 JSP 调用它。它还说你好世界！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T08:13:17.803

[http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html](http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html)教程也应该让您走上正轨。我不使用 OSGi 组件，因为您可能想看看，作为 Slingbucks 示例的下一步，位于[https://svn.apache.org/repos/asf/sling/trunk/samples/slingbucks/](https://svn.apache.org/repos/asf/sling/trunk/samples/slingbucks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T03:55:38.200

您也可以从 servlet 做同样的事情。这样您也可以了解使用 Sling servlet 和 CQ 的基本理念。

您可以调用捆绑为 OSGI 捆绑包并部署在 CQ 的系统控制台中的 sling sevlet。稍后您可以调用，此 OSGI 捆绑包会触发发布请求，您将能够获得响应。这是一个非常好的和非常解释性的教程，解释了每一个步骤。

[http://scottsdigitalcommunity.blogspot.in/2013/06/posting-form-data-to-adobe-cq-using.html](http://scottsdigitalcommunity.blogspot.in/2013/06/posting-form-data-to-adobe-cq-using.html)

并且可以从这里找到示例代码或示例应用程序链接 -

[http://helpx.adobe.com/experience-manager/using/custom-sling-servlets.html](http://helpx.adobe.com/experience-manager/using/custom-sling-servlets.html)

一步一步地按照上面的链接，你最终取得了胜利。

# python - 如何创建任意长度字符串的numpy数组？

> ID：14639496
> 
> 赞同：94
> 
> 时间：2013-02-01T03:58:21.503
> 
> 标签：python, arrays, string, numpy

我是 Python 的新手，但似乎给定的字符串能够（有效地）任意长度。即你可以采取`string str`并不断添加它：`str += "some stuff..."`。有没有办法制作这样的字符串数组？

当我尝试这个时，每个元素只存储一个字符

```
strArr = numpy.empty(10, dtype='string')
for i in range(0,10)
    strArr[i] = "test" 
```

另一方面，我知道我可以初始化一个特定长度字符串的数组，即

```
strArr = numpy.empty(10, dtype='s256') 
```

最多可存储 10 个字符串，最多 256 个字符。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-02-01T04:07:39.633

您可以通过创建一个`dtype=object`. 如果您尝试将长字符串分配给普通的 numpy 数组，它会截断字符串：

```
>>> a = numpy.array(['apples', 'foobar', 'cowboy'])
>>> a[2] = 'bananas'
>>> a
array(['apples', 'foobar', 'banana'], 
      dtype='|S6') 
```

但是当你使用 时`dtype=object`，你会得到一个 python 对象引用的数组。所以你可以拥有python字符串的所有行为：

```
>>> a = numpy.array(['apples', 'foobar', 'cowboy'], dtype=object)
>>> a
array([apples, foobar, cowboy], dtype=object)
>>> a[2] = 'bananas'
>>> a
array([apples, foobar, bananas], dtype=object) 
```

实际上，因为它是一个对象数组，所以您可以将*任何*类型的 python 对象分配给该数组：

```
>>> a[2] = {1:2, 3:4}
>>> a
array([apples, foobar, {1: 2, 3: 4}], dtype=object) 
```

但是，这抵消了使用 numpy 的许多好处，因为它可以在大的连续原始内存块上工作，所以速度如此之快。使用 python 对象会增加很多开销。一个简单的例子：

```
>>> a = numpy.array(['abba' for _ in range(10000)])
>>> b = numpy.array(['abba' for _ in range(10000)], dtype=object)
>>> %timeit a.copy()
100000 loops, best of 3: 2.51 us per loop
>>> %timeit b.copy()
10000 loops, best of 3: 48.4 us per loop 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-01T04:05:43.150

您可以使用对象数据类型：

```
>>> import numpy
>>> s = numpy.array(['a', 'b', 'dude'], dtype='object')
>>> s[0] += 'bcdef'
>>> s
array([abcdef, b, dude], dtype=object) 
```

# php - 带有 mysqli_real_escape_string 的 PHP 无法按预期工作

> ID：14639502
> 
> 赞同：0
> 
> 时间：2013-02-01T03:59:52.727
> 
> 标签：php

我正在尝试创建一个登录页面，但我遇到了未发送数据的问题。谁能帮我吗。

```
 $myusername = stripslashes($username);
    $mypassword = stripslashes($password);
    $myusername = mysqli_real_escape_string($myusername);
    $mypassword = mysqli_real_escape_string($mypassword);

    $sql="SELECT * FROM login_admin WHERE user_name='$myusername' and user_pass=SHA1('$mypassword')";
    $result=mysql_query($dbC, $sql);
    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);
    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count==1){
        // Register $myusername, $mypassword and redirect to file "admin.php"
        session_register("admin");
        session_register("password");
        $_SESSION['name']= $myusername;
        header("location:admin.php");
    }
    else {

        $msg = "$username $password $myusername $mypassword $sql $result Wrong Username or Password. Please retry";
        header("location:login.php?msg=$msg");
    } 
```

我得到的输出是：test test123 SELECT * FROM login_admin WHERE user_name=\'\' and user_pass=SHA1(\'\') Wrong Username or Password。请重试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:06:37.387

您必须提供 $link 标识符作为[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)中的第一个参数，因此这些行看起来更像

```
$myusername = mysqli_real_escape_string($dbconn,$myusername);
$mypassword = mysqli_real_escape_string($dbconn,$mypassword); 
```

其中 $dbconn 是您从中获取的链接`mysqli_connect`。如果您要切换到 mysqli_* 函数集，那么当您应该使用它们的 mysqli_ 等效项时，您也会使用 mysql_query 和 mysql_num_rows。

我强烈建议切换到 mysqli（或 PDO）而不是使用（现在是旧的）mysql 函数。PHP.net 提供了[有关](http://php.net/manual/en/mysqli.overview.php)原因的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:22:50.217

考虑使用我们喜欢称之为[准备查询](http://php.net/manual/en/mysqli.prepare.php)的（美妙的）东西。
这些很棒，因为它们**将数据视为数据，而不是要执行的语句**。这意味着不需要转义，因为您的输入不会被误解。

要在您的情况下实现这一点：

```
$sql = "SELECT user_name FROM login_admin WHERE user_name = ? AND user_pass = SHA1(?)";
if ($query = $db->prepare($sql)) { //returns false if incorrect syntax, error, etc.
    $query->bind_param("ss", $user, $pass);
    // ss = string, string
    // mixed bind_param($params, **args);
    $query->execute();
    $query->bind_result($u);
    $query->fetch();
    $query->close();
} else {
    /* error handling */
}
if ($u) {
    /* session setting */
    header("Location: admin.php");
} else {
    header("Location: login.php?e=1");
} 
```

我还写了一个工作[管理控制面板](https://github.com/HirotoKun/admin-panel)，我将它复制粘贴到实现登录系统几乎所有功能的东西中（请参阅 参考资料[`private.php`](https://github.com/HirotoKun/admin-panel/blob/master/admin/private.php)）

此外，要回答您真正的问题，没有数据库连接就无法在 mysqli 中进行转义。将您的数据库添加到函数的开头：

```
mysqli_real_escape_string($db, $string); 
```

# ruby-on-rails-3 - Carrierwave/Fog Ruby on Rails gem 不会将文件上传到 Amazon S3

> ID：14639505
> 
> 赞同：1
> 
> 时间：2013-02-01T04:00:01.930
> 
> 标签：ruby-on-rails-3

我已经通过 railscast 并在 Stack Overflow 上进行了研究。尽管我发现其他人有同样的问题，但我研究过的任何其他解决方案似乎都不起作用。我已经尝试了其他帖子中建议的代码的多种变体......没有运气。

我正在尝试通过*Carrierwave*和*Fog gem 将 PDF 文件上传和存储到*[Amazon S3](http://en.wikipedia.org/wiki/Amazon_S3)，但无济于事。当我在生产中使用[Heroku](http://en.wikipedia.org/wiki/Heroku)时，我还没有尝试将它部署到 Heroku，因为我什至无法让它在本地工作。返回的错误是

 **> 缺少必需的参数：aws_access_key_id、aws_secret_access_key

我该如何解决这个问题？

### carrierwave.rb（初始化程序）

```
CarrierWave.configure do |config|
    config.fog_credentials = {
        provider: 'AWS',
        aws_access_key_id: ENV['MY_KEY_ID'],
        aws_secret_access_key: ENV['MY_KEY']
    }

    config.fog_directory  = ENV['MY_BUCKET']
    config.fog_public     = false
end 
```

pdf_uploader.rb：

```
class PdfUploader < CarrierWave::Uploader::Base
    storage :fog

    include CarrierWave::MimeTypes
    process :set_content_type

    def store_dir
        "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-12T23:11:51.117

我遇到了同样的问题，将变量包装在字符串上对我来说很重要。

而不是`Rails.application.secrets.aws_access_key_id`我曾经`"#{Rails.application.secrets.aws_access_key_id}"`确保将值作为字符串插入。

这是我的初始化程序：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    provider: 'AWS',
    aws_access_key_id: "#{Rails.application.secrets.aws_access_key_id}",
    aws_secret_access_key: "#{Rails.application.secrets.aws_secret_access_key}"
  }
  config.fog_directory  = Rails.application.secrets.aws_s3_bucket
  config.fog_public     = true
  config.fog_attributes = { 'Cache-Control'=>'max-age=315576000' }
end 
```

这是我的secrets.yml：

```
development:
  secret_key_base: 'xxxxxxxxxxxxxxxxxxxxxxxxx'
  aws_access_key_id: 'xxxxxxxxxxxxxxxxxxxxxxxxx'
  aws_secret_access_key: 'xxxxxxxxxxxxxxxxxxxxxxxxx'
  aws_s3_bucket: 'xxxxxxxxxxxxxxxxxxxxxxxxx'
production:
  secret_key_base: <%= ENV['SECRET_KEY_BASE'] %>
  aws_access_key_id: <%= ENV['AWS_ACCESS_KEY_ID'] %>
  aws_secret_access_key: <%= ENV['AWS_SECRET_ACCESS_KEY'] %>
  aws_s3_bucket: <%= ENV['AWS_BUCKET_NAME'] %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:30:53.507

将 key_id、key AND 存储桶设置为环境变量似乎存在问题。一旦我将这***三个都***更改为字符串常量，它似乎工作正常。我还部署到 Heroku 并验证了生产中的功能。

最终的初始化文件：

```
CarrierWave.configure do |config|
    config.storage = :fog
    config.fog_credentials = {
        provider: 'AWS',
        aws_access_key_id: 'MY_KEY_ID_HERE',
        aws_secret_access_key: 'MY_KEY_HERE'
    }

    config.fog_directory  = 'MY_S3_BUCKET_HERE'
    config.fog_public     = false
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T04:11:59.397

我在中间人设置中遇到了类似的问题。

在控制台中我做了`AWS_ACCESS_KEY='xxxxxx'`，在我的配置文件中我有`ENV['AWS_ACCESS_KEY']`. 它没有用。但是`export AWS_ACCESS_KEY='xxxxx'`使配置文件起作用。这是因为“导出标记要传递给环境中的子进程的每个名称”。而第一个没有。

希望你有同样的问题，这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:09:39.500

此错误可能意味着`ENV['MY_KEY_ID']`和`ENV['MY_KEY']`。`nil`

尝试用您从[Amazon AWS](http://en.wikipedia.org/wiki/Amazon_Web_Services)我的帐户页面获取的字符串替换这些值。

所以：

```
CarrierWave.configure do |config|
    config.fog_credentials = {
        provider: 'AWS',
        aws_access_key_id: "YOUR ACCESS KEY ID",
        aws_secret_access_key: "YOUR SECRET KEY"
    }

    config.fog_directory  = "YOUR BUCKET NAME"
    config.fog_public     = false
end 
```**

# android - 表示室内地图的数据结构

> ID：14639506
> 
> 赞同：1
> 
> 时间：2013-02-01T04:00:05.940
> 
> 标签：android, performance, memory, data-structures

假设我有一张代表室内地图的图像。在这张地图上，某些区域是“允许的”，而其他区域则不是。然后我会定期获得一组坐标`(x,y)`，并需要检查它们是否在“允许”区域内。

目前，我用一个`boolean[][] map`变量来表示这张地图，这`true`意味着允许。要检查，然后我只需检查`map[x][y]`

但是，我所代表的图像可能会变得非常大，比如说最大 5000x5000 像素。结果，我的`map`变量在内存中变得太大（在这种情况下为 25MB，假设 a`boolean`大约需要 1 个字节）

有没有更好的数据结构来解决我的问题？我已经思考了一段时间，但我看不到任何会占用更少空间的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:26:30.653

这种情况的常见场景是使用结构数组`List`。`Rect`然后，您定义这样的矩形定义了“允许”的区域。

然后，给定一个点，`(x, y)`您只需遍历数组/列表并检查该点是否位于集合中的任何矩形内。您可以简单地使用`Rect.contains(x,y)`它。您回答`true`是否有任何`Rect`包含问题的点，`false`否则。

这应该会给你一个非常不错的性能/内存消耗比。它通常用于您的应用程序中，假设“区域”是矩形的（或者每个区域可以表示为 - 理想情况下 - 少量矩形的联合）。

另一种选择（假设矩形不是一个选项）是使用谨慎的多边形来表示区域。如果这是可行的，您可以使用此处介绍的简单算法：http: [//alienryderflex.com/polygon/](http://alienryderflex.com/polygon/)它可以让您及时测试给定点是否在多边形内部（甚至非常复杂），`O(n)`其中`n`所有顶点的数量是定义地图区域的所有多边形。

如果您的区域*非常*分散（即很难使用偶数多边形的矩形来表示它们），那么您可能没有其他简单的选择。您可以做的是（例如）创建一个包含行允许信息的数组。对于每一行，您将有一个数组`int[]`，其中每个`int`包含 32 位，每个位表示`boolean`连续列的值。这与您已经拥有的非常相似，但是您的内存占用会小 8 倍，因为每个值只占用一位而不是整个字节。

# android - 如果应用收到这样的意图，它会遵循下面的游戏启动部分。

> ID：14639508
> 
> 赞同：0
> 
> 时间：2013-02-01T04:00:09.807
> 
> 标签：android, cocos2d-iphone

我正在使用 cocos2d 开发游戏应用程序。我想用 ACTION_VIEW 注册 data content://mocha/gameID/reset
我的清单文件：

```
<intent-filter >
        <action android:name="android.intent.action.VIEW" />
        <data android:scheme="content://mocha/gameID/reset"/>
    </intent-filter> 
```

这是我的代码

```
@Override
public void onPause() {
    super.onPause();
    GamebarLayer.gamestart = false;
    Constants.gameOver     = false;
    CCDirector.sharedDirector().pause();
    Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW); 
    myIntent.setData(Uri.parse("content://mocha/gameID/reset"));
    startActivity(myIntent);
} 
```

这是结果：

```
02-01 09:27:45.308: E/AndroidRuntime(395): FATAL EXCEPTION: main
02-01 09:27:45.308: E/AndroidRuntime(395): java.lang.RuntimeException: Unable to pause activity {ihpc.mocha/ihpc.mocha.MainScene}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=content://mocha/gameID/reset }
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2487)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2444)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2422)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.access$1700(ActivityThread.java:122)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1013)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.os.Looper.loop(Looper.java:132)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.main(ActivityThread.java:4025)
02-01 09:27:45.308: E/AndroidRuntime(395):  at java.lang.reflect.Method.invokeNative(Native Method)
02-01 09:27:45.308: E/AndroidRuntime(395):  at java.lang.reflect.Method.invoke(Method.java:491)
02-01 09:27:45.308: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-01 09:27:45.308: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-01 09:27:45.308: E/AndroidRuntime(395):  at dalvik.system.NativeStart.main(Native Method)
02-01 09:27:45.308: E/AndroidRuntime(395): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=content://mocha/gameID/reset }
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1382)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Activity.startActivityForResult(Activity.java:3095)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Activity.startActivity(Activity.java:3201)
02-01 09:27:45.308: E/AndroidRuntime(395):  at ihpc.mocha.MainScene.onPause(MainScene.java:76)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Activity.performPause(Activity.java:4452)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1194)
02-01 09:27:45.308: E/AndroidRuntime(395):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2474)
02-01 09:27:45.308: E/AndroidRuntime(395):  ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:20:10.113

如果您要开始自己的活动，那么就这样做。

```
Intent intent = new Intent(this, OtherActivity.class);
Intent.setData(...);
StartActivity(intent); 
```

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# odata - 如何通过 WCF 数据服务公开相关数据？

> ID：14639514
> 
> 赞同：0
> 
> 时间：2013-02-01T04:00:31.523
> 
> 标签：odata, wcf-data-services

我一直在阅读 Alex D. James 三年前的博客文章，如下所示：

[http://blogs.msdn.com/b/alexj/archive/2010/02/24/creating-a-data-service-provider-part-8-relationships.aspx](http://blogs.msdn.com/b/alexj/archive/2010/02/24/creating-a-data-service-provider-part-8-relationships.aspx)

这是一个关于通过 WCF 数据服务公开自定义数据的精彩博客系列。在题为“关系”的第 8 篇文章中，他谈到了如何描述和公开相关数据。正如一位评论者指出的那样，该帖子的问题在于他是在内存中进行的，但没有解释如何动态提供相关数据。

使用他的示例，例如，我想通过数据库动态获取我的“产品”。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:28:51.873

您需要编写自定义 IQueryable 实现。WCF DS 服务器将构造一个描述查询（包括所有扩展和对所有属性的访问）的 LINQ 查询。通过自定义实现，您可以将此类查询转换为您想要的任何内容。或者您可以覆盖查询评估（GetEnumerator 和枚举器执行）以从某处检索相关数据。

请注意，这绝对不是一项简单的任务。我写了一系列关于生成的 LINQ 表达式树以及每个部分的含义的博客文章。您至少需要在代码中部分识别这些，以实现相关属性的延迟加载。 [http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx](http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx)

# logic - Shift、Rotate 和 Rotate All：它们有什么用，我需要它们吗？

> ID：14639516
> 
> 赞同：1
> 
> 时间：2013-02-01T04:01:01.423
> 
> 标签：logic, cpu-registers, microprocessors, machine-code, ttl

**我的问题：** Rotate All 功能到底是做什么用的，如果需要，它可以在软件中以另一种方式实现吗？

为什么？我正在尝试用离散逻辑芯片构建 CPU，[类似于此处描述](http://www.scribd.com/doc/71888945/SAP-2-ARCHITECTURE)的 SAP-2 Simple-As-Possible Computer。SAP-2 只能做 Rotate-Left/Right 并忽略进位。我想添加一些利用进位标志的功能，但不想使设计过于复杂。

我有一个可以通过进位左移/右移的电路，但事实证明，使用进位进行 Rotate All 很难实现，并且同时具有这两种功能会更加复杂。这是它现在的工作方式：

如果累加器包含 CY=1 A=0111 0100

然后用进位向左旋转=

CY= **0** A=1110 100 **0**

或使用进位向右旋转=

CY= **0** A= **0** 011 1010

预先感谢您的意见。

# python - 如何使用python获取所需长度的子列表？

> ID：14639518
> 
> 赞同：0
> 
> 时间：2013-02-01T04:01:27.767
> 
> 标签：python, list, extract, nested-lists

给定一个带有子列表的列表，我想提取具有指定长度的子列表。如果子列表的长度小于指定的长度，则全部提取。请参阅下面的说明

在下面的示例中，我正在提取长度 = 2 的子列表。如果长度更大，我将提取子列表中的前两个元素并忽略其余元素。输入

```
A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6,5,4]]] 
```

输出

```
B = [['A',[1,2]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6]]] 
```

我目前正在做如下，它的工作原理，但想知道是否有一个简单的方法

```
B=[]

for el in A:
  l = []

  if len(el[1]) > 2:
     l.append(el[0])
     l.append(el[1][0:2])
     B.append(l)

  else:
     l.append(el[0])
     l.append(el[1][0:2])
     B.append(l)

print B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:05:42.997

您可以为此使用列表理解：

```
In [71]: A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6,5,4]]]

In [72]: [[x[0],x[1][:2]] for x in A]
Out[72]: [['A', [1, 2]], ['D', [3, 4]], ['E', [6, 7]], ['F', [1]], ['G', [7, 6]]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:09:07.633

您可以利用`map`功能

```
>>> a=[[1,[1,2,3]],[2,[1]],[3,[1,2]]]
>>> map(lambda v: [v[0],v[1][:2]], a)
[[1, [1, 2]], [2, [1]], [3, [1, 2]]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:26:26.613

`map`在子列表的每个项目上使用，因为`'A'[:2]`只会返回`'A'`。

```
In [115]: A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6,5,4]]]

In [116]: [map(lambda x:x[:2],x) for x in A]
Out[116]: [['A', [1, 2]], ['D', [3, 4]], ['E', [6, 7]], ['F', [1]], ['G', [7, 6]]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:25:02.033

如果您不想创建新列表，只需执行

```
>>> A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6,5,4]]]
>>> for X in A:
    X[1]=X[1][:2]

>>> A
[['A', [1, 2]], ['D', [3, 4]], ['E', [6, 7]], ['F', [1]], ['G', [7, 6]]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T05:55:54.740

## 如果您想以递归方式进行

```
import collections

def doMagic(data):
    if isinstance(data, collections.Iterable):
        if all(type(elem) in [type(1), type('a')] for elem in data):
            return data[:2]
        else:
            return [doMagic(elem) for elem in data][:2]
    else:
        return data

if __name__ == '__main__':
    data = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]],['G',[7,6,5,4]]]
    print [doMagic(elem) for elem in data] 
```

# asp.net - IIS 如何处理 ASP.net MVC 请求？

> ID：14639525
> 
> 赞同：8
> 
> 时间：2013-02-01T04:02:46.393
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我对 IIS 处理的 ASP.net MVC 请求感到困惑。正如每个人所说，它建立在 ASP.net 引擎之上。因此，只有**Url 路由模块**和**MvcRouteHandler** 有所不同，它们正确地处理了请求。我明白这一点。

但我的问题是 IIS 如何理解它是 MVC 请求。url 中没有像 .aspx 这样的扩展名。那么它如何映射到正确的**ISAPI DLL**。

感谢您帮助消除我的困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:12:42.330

可以在 IIS 中的任何级别定义这些规则。大多数 MVC 应用程序在 web.config 文件中的应用程序级别定义处理程序：

```
<system.webServer>        
    <handlers>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit".../>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit".../>
      <add name="ExtensionlessUrlHandler-Integrated-4.0".../>
    </handlers>
</system.webServer> 
```

# php - MOD REWRITE 在本地主机上工作，但不在服务器上

> ID：14639529
> 
> 赞同：4
> 
> 时间：2013-02-01T04:03:02.293
> 
> 标签：php, apache, mod-rewrite

首先，我向我的托管公司澄清，他们已经验证允许覆盖设置已启用。

其次，如果我在 .htaccess 文件中写入垃圾值，那么我会得到“内部服务器错误”，这进一步证明 .htaccess 没有被跳过。

我正在尝试这样做 输入：all/3 输出：all.php?id=3

我在 .htaccess 文件中编写了以下内容，该文件是从教程站点复制的。

```
# Enable Rewriting  
RewriteEngine on  
# Rewrite user URLs  
#   Input:  user/NAME/  
#   Output: user.php?id=NAME  
RewriteRule ^all/(\w+)/?$ all.php?id=$1 
```

all.php 文件

```
<?php
echo $_GET['id'];
?> 
```

现在，如果我输入`localhost/all/3`，则会显示 3。

如果我输入`www.mydomain.com/all/3`，则页面为空白。

此外，我在 .htaccess 文件中只有上述代码，仅此而已。那么为什么我在 localhost 和我的服务器中会出现不同的行为呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:18:31.650

试试这个 ：

```
RewriteRule ^all/(.*)$ all.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:36:36.380

听起来您的主机已启用该[`MultiViews`选项](http://httpd.apache.org/docs/2.2/content-negotiation.html#multiviews)。解决方案是让他们禁用它或者可能是一个更快的选项，将您的 PHP 文件重命名为 以外的内容`all.php`，只要基本名称（减去扩展名）与您的`RewriteRule`模式不匹配。

# reference - 如何在 gradle 中导出可执行 jar，并且这个 jar 可以运行，因为它包含参考库

> ID：14639536
> 
> 赞同：42
> 
> 时间：2013-02-01T04:04:16.587
> 
> 标签：reference, jar, executable, gradle, noclassdeffounderror

如何在 gradle 中导出可执行 jar，并且这个 jar 可以运行，因为它包含参考库。

构建.gradle

```
apply plugin: 'java'

manifest.mainAttributes("Main-Class" : "com.botwave.analysis.LogAnalyzer")

repositories {
    mavenCentral()
}

dependencies {
    compile (
        'commons-codec:commons-codec:1.6',
        'commons-logging:commons-logging:1.1.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpcore:4.2.1',
        'org.apache.httpcomponents:httpmime:4.2.1',
        'ch.qos.logback:logback-classic:1.0.6',
        'ch.qos.logback:logback-core:1.0.6',
        'org.slf4j:slf4j-api:1.6.0',
        'junit:junit:4.+'
    )
} 
```

在我运行之后：gradle build

它创建构建文件夹，我在 build/libs/XXX.jar 中运行 jar：

java -jar build/libs/XXX.jar

这是一个执行说：

```
Exception in thread "main" java.lang.NoClassDefFoundError: ch/qos/logback/core/joran/spi/JoranException 
```

如何使用参考库运行它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-01T08:50:01.697

[您可以使用Gradle 应用程序插件](http://gradle.org/docs/current/userguide/application_plugin.html)来实现它

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-01-23T14:14:43.583

希望这对某人有所帮助（不幸的是，我花了很长时间试图找到解决方案）。这是对我有用的创建可执行 JAR 的解决方案。我将 Jetty 嵌入到主要方法中，具体来说是 Jetty 9 并使用 Gradle 2.1。

将以下代码包含到您的 build.gradle 文件中（如果子项目是需要从中构建 jar 的“主”项目，则将其添加到应该像此项目（':'）一样开始的子项目中{插入代码在依赖关系之后的某个地方。}。

此外，您需要添加插件 java 才能工作：apply plugin: 'java' 。

我的 jar 任务如下所示：

```
apply plugin: 'java'

jar {

    archiveName = "yourjar.jar"

    from {

        configurations.runtime.collect {
            it.isDirectory() ? it : zipTree(it)
        }

        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }

    manifest {
        attributes 'Main-Class': 'your.package.name.Mainclassname'
    }

    exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'
} 
```

然后你可以通过命令行执行 yourjar.jar ：

```
java -jar yourjar.jar 
```

必须排除META-INF/ *.RSA、META-INF/* .SF 和 META-INF/*.DSA 才能使其工作。否则会抛出 SecurityException。

问题似乎出在嵌入式 Jetty 上，因为 Jetty 迁移到 Eclipse，现在正在签署他们的 JAR，当其他未签名的 JAR 想要加载已签名的 JAR 时，我读到这会成为问题。如果我在这方面错了，请随时教育我，这就是我读到的。

项目所依赖的 JAR 在依赖项中定义如下：

```
dependencies {

    // add the subprojects / modules that this depends on
    compile project(':subproject-1')
    compile project(':subproject-2')

    compile group: 'org.eclipse.jetty', name: 'jetty-server', version: '9.2.6.v20141205'
    compile group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '9.2.6.v20141205'
    compile group: 'org.eclipse.jetty', name: 'jetty-http', version: '9.2.6.v20141205'

} 
```

编辑：之前，而不仅仅是

```
configurations.runtime.collect{...} 
```

我有

```
configurations.runtime.asFileTree.files.collect{...} 
```

这在干净构建的大型项目中导致了奇怪的行为。第一次执行 gradle clean build 后运行 jar （手动清理构建目录后），会抛出 NoClassDefFoundException （在我们有很多子项目的项目中），但在第二次执行 gradle clean build 后运行 jar（没有手动清空构建目录），由于某种原因它具有所有依赖项。如果 asFileTree.files 被忽略，这不会发生。

另外我应该注意，所有编译依赖项都包含在运行时中，但并非所有运行时都包含在编译中。所以如果你只是使用编译

```
 configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        } 
```

然后请务必记住，如果抛出 NoClassDefFoundException，则在运行时找不到某些类，这意味着您还应该包括以下内容：

```
 configurations.runtime.collect {
            it.isDirectory() ? it : zipTree(it)
        } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-06T08:31:12.083

## 快速回答

1.  将以下内容添加到您的`build.gradle`:

    ```
    apply plugin: 'application'

    mainClassName = 'org.example.app.MainClass'

    jar {
        manifest {
            attributes 'Main-Class': mainClassName,
                       'Class-Path': configurations.runtime.files.collect {"$it.name"}.join(' ')
        }
    } 
    ```

2.  从项目目录中，运行`gradle installDist`
3.  跑`java -jar build/install/<appname>/lib/<appname>.jar`

我建议也将应用程序版本添加到您的应用程序版本中`build.gradle`，但这不是必需的。如果这样做，构建的 jar 名称将为`<appname>-<version>.jar`.

*注意：我使用的是 gradle 2.5*

* * *

## 细节

为了创建一个自包含的可执行 jar，您可以简单地运行：

```
java -jar appname.jar 
```

你会需要：

1.  你的 jar 包含一个指向你的应用程序主类的清单文件
2.  以某种方式包含或访问所有依赖项（来自应用程序外部 jar 的类）
3.  您的清单文件以包含正确的类路径

正如其他一些答案指出的那样，您可以使用一些第三方插件来实现这一点，例如[shadow](https://github.com/johnrengelman/shadow)或[one-jar](https://github.com/rholder/gradle-one-jar)。

我尝试了影子，但不喜欢我的**所有**依赖项及其资源与我的应用程序代码一起被完全倾倒到构建的 jar 中的事实。我也更喜欢尽量减少外部插件的使用。

另一种选择是使用上述@erdi 回答的[gradle 应用程序插件](https://docs.gradle.org/current/userguide/application_plugin.html)。Running`gradle build`将为您构建一个 jar，并将它与您的所有依赖项很好地捆绑在一个 zip/tar 文件中。您也可以只运行`gradle installDist`以跳过压缩。

**但是**，正如@jeremyjjbrown 在那里的评论中所写，该插件**本身并没有**创建可执行的 jar。它创建一个 jar 和一个构建类路径并执行命令以运行应用程序的主类的脚本。你将无法运行`java -jar appname.jar`。

为了两全其美，请按照上述步骤将您的 jar 与所有依赖项一起创建为单独的 jar，并将正确的值添加到您的 MANIEST。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-18T20:02:13.870

所有这些答案要么是错误的，要么是过时的。

OP正在要求所谓的“胖罐”。这是一个包含所有依赖项的可执行 jar，因此它不需要外部依赖项即可运行（当然 JRE 除外！）。

[撰写本文时的答案是 Gradle Shadow Jar 插件，在Shadow Plugin User Guide & Examples](http://imperceptiblethoughts.com/shadow/)中解释得很清楚。

我有点挣扎。但这有效：

将所有这些行放在 build.gradle 文件中的某个位置（我将它们放在顶部附近）：

```
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.4' 
    }
}
apply plugin: 'com.github.johnrengelman.shadow'
shadowJar {
    baseName = 'shadow'
    classifier = null
    version = null
}
jar {
    manifest {
        attributes 'Class-Path': '/libs/a.jar'
        attributes 'Main-Class': 'core.MyClassContainingMainMethod'
    }
} 
```

PS不要担心构建文件中其他地方的任何其他“存储库”，“依赖项”或“插件”行，并将**这些**行留在这个“buildscript”块中（我不知道你为什么需要这样做那）。

PPS Shadow Plugin User Guide & Examples 写得很好，但没有告诉你包含该行

```
attributes 'Main-Class': 'core.MyClassContainingMainMethod' 
```

我把它放在上面的地方。也许是因为作者认为你没有我那么无知，而你可能是。我不知道为什么我们被告知要在其中放置一个奇怪的“类路径”属性，但如果它没有损坏，请不要修复它。

当你走的时候

```
> gradle shadowjar 
```

Gradle 有望在 /build/libs（默认名称“shadow.jar”）下构建一个胖可执行 jar，您可以通过执行以下操作来运行它：

```
> java -jar shadow.jar 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-04T05:36:20.447

**我检查了很多解决方案的链接，最后做了下面提到的步骤来让它工作。我正在使用 Gradle 2.9。**

**在您的 build,gradle 文件中进行以下更改：**

*1.提插件：*

```
apply plugin: 'eu.appsatori.fatjar' 
```

*2\. 提供构建脚本：*

```
buildscript {
  repositories {
    jcenter()
   }

dependencies {
  classpath "eu.appsatori:gradle-fatjar-plugin:0.3"
  }
} 
```

*3.提供主类：*

```
fatJar {
  classifier 'fat'
  manifest {
     attributes 'Main-Class': 'my.project.core.MyMainClass'
  }
  exclude 'META-INF/*.DSA', 'META-INF/*.RSA', 'META-INF/*.SF'
} 
```

*4.创建fatjar：*

```
./gradlew clean fatjar 
```

*5\. 从 /build/libs/ 运行 fatjar：*

```
java -jar MyFatJar.jar 
```

# python - 根据python中的规则文件解组数据流

> ID：14639538
> 
> 赞同：0
> 
> 时间：2013-02-01T04:04:20.560
> 
> 标签：python, templates, data-structures, stream

我有一个已写入数据的数据文件（从应用程序形成 C++ 结构的数据）。现在我正在使用 python 来读取这个数据文件。将此结构提供为输入模板然后根据此模板进行读取的逻辑的最佳方法是什么。

想法是，如果结构（在我的 C++ 应用程序中发生更改）那么为了脚本保持兼容性，我想更改模板并且没有其他更改足以满足我读取的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:07:44.067

我会在 Python 中将 ctypes.Struct 类声明为模板，然后使用常规的 ctypes 函数将字节数组编组和解组为结构。

# php - 动态下拉列表验证后的值

> ID：14639550
> 
> 赞同：0
> 
> 时间：2013-02-01T04:05:49.090
> 
> 标签：php, mysql, drop-down-menu

我在 PHP 中有一个下拉列表（动态），它从数据库中提取数据并相应地显示。对于相同的表格，我有一个验证。我面临的问题是无法保存先前选择的值，并且它重置为 0 值，以防验证失败

进一步能够将下拉框的颜色更改为红色以防验证失败，这意味着它正在获取值但无法在下拉列表中打印。

谁能帮我解决这个问题。

请参见下面的代码：

```
<select name=ddcity value="<?php if(isset($selectedcity)){echo $selectedcity;}?>" 
<?php if(isset($code3) && $code3 == 3){echo "class=error";} ?>> 
```

* * *

基本上我想知道的是：这是在下拉列表中打印的方式吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:29:25.600

在两个 PHP 标记之间放置空格，以便 value="XX"class=error 由空格分隔，例如 value="XX" class=error

如果这不能解决您的问题，请在设置 $selectedcity 的位置发布代码，您需要检查此变量是否具有正确的值。

* * *

抱歉，我之前没有注意到，但应该如下所示：

```
<select name=ddcity <?php if(isset($code3) && $code3 == 3){echo "class='error'";} ?>>
<option value="<?php if(isset($selectedcity) && $selectedcity == "XX"){echo " selected=selected "}?>" value ="XX">XYZ city</option>
</select> 
```

您需要比较标签内`option`的值而不是`select`标签。

# python - 加入 pandas 系列，同时保留新索引

> ID：14639551
> 
> 赞同：0
> 
> 时间：2013-02-01T04:05:58.767
> 
> 标签：python, pandas

我有 2 个 pandas.Series：

```
s
-9999.00    26371
240.00       1755
138.99          2

s2
-9999.00    26371
240.00       1755
113.03          6
100.00          4 
```

我试过连接：

```
-9999.00    26371
 240.00      1755
 138.99         2
-9999.00    26371
 240.00      1747
 113.03         6
 100.00         4 
```

和 s+s2：

```
-9999.00    52742
 100.00       NaN
 113.03       NaN
 138.99       NaN
 240.00      3502 
```

但我需要添加现有索引的值并在出现新索引时保留新索引的输出，因此混合使用 concat 和“+”。我怎样才能做到这一点？我的预期输出是

```
swanted:

-9999.00    52742
 100.00         4
 113.03         6
 138.99         2
 240.00      3502 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:16:02.993

您可以使用该`.add`方法`fill_value`：

```
>>> s = pd.Series(index=[-9999, 240, 138.99], data=[26371, 1755, 2])
>>> s2 = pd.Series(index=[-9999, 240, 113.03, 110], data=[26371, 1755, 6, 4])
>>> s.add(s2, fill_value=0)
-9999.00    52742
 110.00         4
 113.03         6
 138.99         2
 240.00      3510 
```

或者您可以先将两者对齐，然后简单地添加它们`+`：

```
>>> s.align(s2, fill_value=0)
(-9999.00    26371
 110.00         0
 113.03         0
 138.99         2
 240.00      1755, -9999.00    26371
 110.00         4
 113.03         6
 138.99         0
 240.00      1755)
>>> s, s2 = s.align(s2, fill_value=0)
>>> s + s2
-9999.00    52742
 110.00         4
 113.03         6
 138.99         2
 240.00      3510 
```

# c# - 如何将当前类设置为返回类型结果

> ID：14639554
> 
> 赞同：1
> 
> 时间：2013-02-01T04:06:19.313
> 
> 标签：c#, class

我有这堂课：

```
using System.IO;
using System.Xml.Serialization;

    namespace ssscc.Settings
    {
      public class AppSettings
      {
        private string _companyName;
        public string CompanyName
        {
          set { _companyName = value; }
          get
          {
            if (string.IsNullOrWhiteSpace(_companyName))
            {
              LoadSettings();
            }
            return _companyName;
          }
        }

        private string _companyPhone;
        public string CompanyPhone
        {
          set
          {

            _companyPhone = value;
          }
          get
          {
            if (string.IsNullOrWhiteSpace(_companyPhone))
            {
              LoadSettings();
            }
            return _companyPhone;
          }
        }

        private string GetSettingsFile()
        {
          var exePath = System.Windows.Forms.Application.StartupPath;
          var sharedDirectory = Path.Combine(exePath, "shared");
          var settingsDirectory = Path.Combine(sharedDirectory, "settings");
          var settingsFile = Path.Combine(settingsDirectory, "ssscc.xml");

          if (!Directory.Exists(sharedDirectory))
          {
            Directory.CreateDirectory(sharedDirectory);
          }

          if (!Directory.Exists(settingsDirectory))
          {
            Directory.CreateDirectory(settingsDirectory);
          }

          return settingsFile;
        }

        internal void SaveSettings(AppSettings settings)
        {
          var serializer = new XmlSerializer(typeof(AppSettings));
          using (var stream = File.OpenWrite(GetSettingsFile()))
          {
            serializer.Serialize((Stream) stream, (object) settings);
          }
        }

        internal void LoadSettings()
        {
          if (!File.Exists(GetSettingsFile()))
          {
            return;
          }

          var serializer = new XmlSerializer(typeof(AppSettings));
          using (var stream = File.OpenRead(GetSettingsFile()))
          {
            var appsetting = (AppSettings) serializer.Deserialize(stream);
            CompanyPhone = appsetting.CompanyPhone;
            CompanyName = appsetting.CompanyName;
          }
        }

      }
    } 
```

我的问题是关于这段代码：

```
 var appsetting = (AppSettings) serializer.Deserialize(stream);
    CompanyPhone = appsetting.CompanyPhone;
    CompanyName = appsetting.CompanyName; 
```

我很确定有一种方法可以将 appsettings 直接返回到包含该方法的类，因此我不必遍历每个属性，例如：

```
 CompanyPhone = appsetting.CompanyPhone;
    CompanyName = appsetting.CompanyName; 
```

我可以直接分配属性而无需维护此代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:12:53.740

您正在`AppSettings`从文件反序列化时获得一个新实例。你可以用它，不是吗？尝试`LoadSettings`用这样的静态工厂方法替换：

```
internal static AppSettings GetInstance()
{
    if (!File.Exists(GetSettingsFile()))
        return null;

    var serializer = new XmlSerializer(typeof(AppSettings));
    using (var stream = File.OpenRead(GetSettingsFile()))
        return (AppSettings)serializer.Deserialize(stream);
} 
```

而要保存您的设置，您无需将设置对象作为参数传递。我想下面的代码应该可以完成这项工作：

```
internal void SaveSettings()
{
    var serializer = new XmlSerializer(typeof(AppSettings));
    using (var stream = File.OpenWrite(GetSettingsFile()))
        serializer.Serialize((Stream)stream, this);
} 
```

使用工厂`GetInstance`方法来初始化设置（好吧，作为一个例子）：

```
var s = AppSettings.GetInstance();
if (s == null)
{
    s = new AppSettings
    {
        CompanyName = "MyCompany",
        CompanyPhone = "######"
    };
    s.SaveSettings();
} 
```

PS：如果属性 getter 和 setter 没有额外的逻辑（`LoadSettings`方法不再存在），你可以使用自动属性：

```
public string CompanyName { get; set; }

public string CompanyPhone { get; set; } 
```

并且`GetSettingsFile`可以声明为`static`，因为它不操作任何实例类成员：

```
private static string GetSettingsFile()
{
    //...
    return settingsFile;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:40:03.877

您是否真的需要在这里进行延迟加载，如果没有，请明确地制定您的方法：

```
public class AppSettings
{
    private static readonly XmlSerializer Serializer 
                  = new XmlSerializer(typeof(AppSettings));

    public string CompanyName { get; set; }
    public string CompanyPhone { set; get; }

    private static string GetSettingsFile()
    {
        return null;
    }

    public static void SaveSettings(AppSettings settings)
    {
        using (var stream = File.OpenWrite(GetSettingsFile()))
            Serializer.Serialize(stream, settings);
    }

    internal static AppSettings LoadSettings()
    {
        if (!File.Exists(GetSettingsFile()))
            return null;

        object appsetting = null;

        using (var stream = File.OpenRead(GetSettingsFile()))
            appsetting = Serializer.Deserialize(stream);

        return appsetting as AppSettings;
    }
} 
```

你可以使用：

```
var setting = AppSettings.LoadSettings(); 
```

和：

```
AppSettings.SaveSettings(setting); 
```

请注意，`XmlSerializer`每次创建[都会导致内存泄漏](http://msdn.microsoft.com/en-us/magazine/cc163491.aspx)，

> XmlSerializer 构造函数将通过使用反射分析 Person 类来生成一对从 XmlSerializationReader 和 XmlSerializationWriter 派生的类。它将创建临时 C# 文件，将生成的文件编译成临时程序集，最后将该程序集加载到进程中。像这样的代码生成也相对昂贵。因此，XmlSerializer 按类型缓存临时程序集。这意味着下一次为 Person 类创建 XmlSerializer 时，将使用缓存的程序集，而不是生成新的程序集。

因此，您应该保持`XmlSerializer`静态。

# java - 非平凡的 Java 数学练习

> ID：14639555
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:06:21.233
> 
> 标签：java, multithreading, math, recursion, geometry

我被问到这个问题是为了测试我的编程能力。虽然我觉得它和编程一样多的数学。老实说，我失败了，但我想知道它是如何完成的，以供将来参考。

理想的答案将使用递归和线程。

你的侄女在生日时收到了一组积木，她决定用 3”×1” 和 4.5”×1” 的积木搭建一个面板。为了结构完整性，积木之间的空间不能在相邻的行中排列. 比如下面这个13.5”×3”的面板是不能接受的，因为前两排的块之间有一些空间是对齐的（如虚线所示）。

7.5”×1”面板有2种方法，7.5”×2”面板有2种方法，12”×3”面板有4种方法，27”×5有7958种方法“ 控制板。您的侄女有多少种不同的方法可以制作 48”×10” 面板？答案将适合 64 位整数。编写程序计算答案。

这就是问题所在，我不知道从数学方面开始。我知道我需要计算第一行的所有可能组合。但我不确定如何。然后，您可以此时在特定线程上计算下一行的所有可能组合，依此类推。然后每个第一行组合可以获得自己的线程并将其设置传递给递归算法，该算法将当前行与最后一行进行比较，并找到可能的答案。但我无法真正对其进行编程，因为我不知道如何计算任何行的可能组合。如果我这样做了，那么也许我可以检查它是否是合法行（没有两个块完全重叠（交错））并继续下一个。就代码而言，每一行可能都是嵌套在下一行周围的 for 循环。但我又一次没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:30:34.210

我认为你对这个问题有一个很好的初步把握。如果我正确理解您的想法，您应该在每个*块放置*上递归，而不是在每个*行放置*上递归- 因为垂直定向的块将很快排除任何普通行。

这是我将采取的方法：您最终将构建一棵树（在内存中显式或隐式：树可以是在递归函数中传递的参数）。树的节点将是树的状态 - 所以根是“没有放置块”。你“以某种方式”放置了第一个块（我们会谈到那个），它代表一个新的状态。

目标将是构建一组完整的叶节点（棋盘已填满）且合法（没有裂缝排列）。那么我们如何到达那里呢？

对于每个块放置，有 4 个“替代现实”：水平放置的 3x1 块、垂直放置的 3x1（称为 1x3）、水平放置的 4.5x1 和 1x4.5。对于这些选项中的每一个，您都将尝试“合法地”将块放置在行中的下一个点。如果它是合法的（合法的是“块不与板边缘重叠，块不共享垂直边缘”），那么您可以接受该板作为中间状态并使用该新状态递归。如果不合法，则必须放弃该状态。

这样想，前 4 个子节点将是左下角的一个块，为 [3x1, 1x3, 4.5x1, 1x4.5]。这四种状态中的每一种都将在 4 种配置中的一种中“向右”有一个块，依此类推。

为了跨行移动，当你点击右边缘时，我会找到“最低”的空白空间，并在它们从左到右连接时任意填充它们。当边缘参差不齐时，这足以修剪大型集合，但在水平平坦时仍然可以很好地工作，就像您刚开始时一样。

本质上，您的树对于每个中间状态将有（最多）4 个节点，边缘表示“尝试放置”。如果你不能合法地将块放置在那个“尝试的位置”，你就不会递归，修剪这种可能性和树上的所有后代。

这种蛮力方法应该可以为您提供一个完整的电路板，即使它的计算复杂度是天文数字。只有*在您可以正确解决一些问题*时，您才应该考虑使用线程进行并行化。递归问题往往很适合线程，因为每个递归通常可以并行化而不会带来太多痛苦。只要确保你先做对了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-04T20:38:58.427

这篇文章已经快 5 年了，但也许我的回答对某人有用。下面有两种解决方案。首先是没有多线程。第二个使用四个线程来解决问题。它计算 48x4 面板（48x10 持续很长时间），但可以通过更改初始值轻松修改：

> nbOfRows、nbOfCols、wallWidth 和墙

没有多线程的解决方案：

```
import java.io.*;
import java.util.*;

class WallFlexOld
{
    static final float blocks[] = {3.0f, 4.5f};
    static final int nbOfRows = 4;
    static final int nbOfCols = 16;
    static final float wallWidth = 48.0f;
    static final float wall[][] = {
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
                            };

    static long nbOfCombinations = 0;

    public static void main(String args[])
    {
        long startTime = System.currentTimeMillis();
        addBlock(0, 0);
        long workingTime = System.currentTimeMillis() - startTime;

        System.out.println("Working time: " + workingTime + "ms");
        System.out.println("noc: " + nbOfCombinations);
    }

    static void addBlock(int row, int col)
    {
        for(float b: blocks)
        {
            wall[row][col] = b;
            if(blockFit(row, col))
            {
                if(rowWidth(row) <= wallWidth)
                {
                    if(rowWidth(row) == wallWidth)
                    {
                        if(row == (nbOfRows - 1))
                            nbOfCombinations++;
                        else
                            addBlock(row + 1, 0);
                    }
                    else //rowWidth < wallWidth
                        addBlock(row, col + 1);

                }
            }   
            wall[row][col] = 0; 
        }
    }

    static float rowWidth(int row)
    {
        float width = 0;
        for(float b: wall[row])
            width = width + b;
        return width;
    }

    static boolean blockFit(int row, int col)
    {
        if(row == 0)
            return true;

        boolean fit = true;
        float currentLenght = 0;
        for(int i = 0; i < col; i++)
            currentLenght = currentLenght + wall[row][i];

        float lowerRowCurLenght = 0;
        for(float b: wall[row - 1])
        {
            lowerRowCurLenght = lowerRowCurLenght + b;
            if((currentLenght == lowerRowCurLenght) & (currentLenght != wallWidth))
                fit = false;
        }

        return fit;
    }
} 
```

多线程解决方案：

```
import java.io.*;
import java.util.*;

class Wall implements Runnable
{
    private float blocks[];
    private int nbOfRows;
    private int nbOfCols;
    private float wallWidth;
    private float wall[][];
    private long nbOfCombinations = 0;
    private int row, col;

    public long getNbOfCombinations() { return this.nbOfCombinations; }

    Wall(float blocks[], int nbOfRows, int nbOfCols, float wallWidth, float wall[][], int row, int col)
    {
        this.blocks = blocks;
        this.nbOfRows = nbOfRows;
        this.nbOfCols = nbOfCols;
        this.wallWidth = wallWidth;
        this.wall = wall;
        this.row = row;
        this.col = col;
    }

    private boolean blockFit(int row, int col)
    {
        if(row == 0)
            return true;

        boolean fit = true;
        float currentLenght = 0;
        for(int i = 0; i < col; i++)
            currentLenght = currentLenght + wall[row][i];

        float lowerRowCurLenght = 0;
        for(float b: wall[row - 1])
        {
            lowerRowCurLenght = lowerRowCurLenght + b;
            if((currentLenght == lowerRowCurLenght) & (currentLenght != wallWidth))
                fit = false;
        }

        return fit;
    }

    private float rowWidth(int row)
    {
        float width = 0;
        for(float b: wall[row])
            width = width + b;
        return width;
    }

    private void addBlock(int row, int col)
    {
        for(float b: blocks)
        {
            wall[row][col] = b;
            if(blockFit(row, col))
            {
                if(rowWidth(row) <= wallWidth)
                {
                    if(rowWidth(row) == wallWidth)
                    {
                        if(row == (nbOfRows - 1))
                            nbOfCombinations++;
                        else
                            addBlock(row + 1, 0);
                    }
                    else //rowWidth < wallWidth
                    {
                        addBlock(row, col + 1);
                    }
                }
            }
            wall[row][col] = 0;
        }
    }

    @Override
    public void run()
    {
        addBlock(row, col);
    }
}

class WallMT
{
    static final float blocks[] = {3.0f, 4.5f};
    static final int nbOfRows = 4;
    static final int nbOfCols = 16;
    static final float wallWidth = 48.0f;
    static final float wall[][] = {
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
                            };

    public static void main(String args[])
    {
        wall[0][0] = blocks[0];
        wall[0][1] = blocks[0];
        Wall myWall1 = new Wall(blocks, nbOfRows, nbOfCols, wallWidth, getWallCopy(wall), 0, 2);
        Thread t1 = new Thread(myWall1);

        wall[0][0] = blocks[0];
        wall[0][1] = blocks[1];
        Wall myWall2 = new Wall(blocks, nbOfRows, nbOfCols, wallWidth, getWallCopy(wall), 0, 2);
        Thread t2 = new Thread(myWall2);

        wall[0][0] = blocks[1];
        wall[0][1] = blocks[0];
        Wall myWall3 = new Wall(blocks, nbOfRows, nbOfCols, wallWidth, getWallCopy(wall), 0, 2);
        Thread t3 = new Thread(myWall3);

        wall[0][0] = blocks[1];
        wall[0][1] = blocks[1];
        Wall myWall4 = new Wall(blocks, nbOfRows, nbOfCols, wallWidth, getWallCopy(wall), 0, 2);
        Thread t4 = new Thread(myWall4);

        long startTime = System.currentTimeMillis();
        t1.start();
        t2.start();
        t3.start();
        t4.start();
        try
        {
            t1.join();  
            t2.join();
            t3.join();  
            t4.join();  
        }
        catch(InterruptedException ie)
        {
            System.out.println("Thread " + t1 + " interrupted.");
        }

        long workingTime = System.currentTimeMillis() - startTime;

        System.out.println("Working time: " + workingTime + "ms");
        System.out.println("noc: " + (myWall1.getNbOfCombinations() + myWall2.getNbOfCombinations() + myWall3.getNbOfCombinations() + myWall4.getNbOfCombinations()));
    }

    static private float[][] getWallCopy(float wall[][])
    {
        float tmpWall[][] = new float[nbOfRows][nbOfCols];

        for(int i = 0; i < nbOfRows; i++)
            for(int j = 0; j < nbOfCols; j++)
                tmpWall[i][j] = wall[i][j];

        return tmpWall;
    }
} 
```

# javascript - 无法在 TypeScript 生成的 javascript 文件中看到注释

> ID：14639559
> 
> 赞同：0
> 
> 时间：2013-02-01T04:06:56.093
> 
> 标签：javascript, visual-studio-2012, typescript

我创建了一个 TypeScript(.ts) 文件。保存后会生成一个缩小的 JavScript 文件和一个普通（可读）的 JavaScript 文件。这一切都很好。但是我添加的注释是 TypeScript 文件在自动生成的 JavaScript 文件中不可见。由于您无法调试 TypeScript 文件（要添加断点，需要使用 JavaScript 文件）并且 JavaScript 文件中没有注释，因此我必须在调试时在 .TS 文件和 .JS 文件之间切换。**有没有办法告诉 TypeScript，而不是删除用户添加的评论？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:09:43.400

传递`--comments`命令行上的开关以保留注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:33:08.097

如果您安装了 WebEssentials，您可以在 WebEssentials 选项中进行设置： ![在此处输入图像描述](../Images/5114336010a568c3ea7a7e236f8684ca.png)

如果您没有安装[WebEssentials](http://vswebessentials.com/)，请停止您正在执行的操作并首先从 NuGet 安装它。这是一个很棒的扩展，它将为 Web 开发添加各种有用的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T19:17:15.157

# 0.8.2.0

如果您使用 TypeScript Visual Studio 扩展（最新版本）的 0.8.2.0 版本创建了 TypeScript 项目，您会发现项目文件中有一个选项：

```
 <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES3</TypeScriptTarget>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
  </PropertyGroup> 
```

默认情况下它是 false，但您可以将其切换为 true：

```
<TypeScriptIncludeComments>true</TypeScriptIncludeComments> 
```

要编辑此设置，您需要右键单击项目并选择“卸载”，然后再次右键单击它并单击“编辑”。这些设置位于您将编辑的文件的底部。

更改设置后，再次右键单击项目并点击“重新加载”，您将再次启动并运行。

# 之前的版本

在以前的版本中（如果您在以前的版本中创建了项目，如果您后来更新到 0.8.2.0），您将不得不摆弄命令，但过程几乎相同。

```
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\tsc&quot;  @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

将其更改为：

```
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\tsc&quot; --comments @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

再次，要编辑此设置，您需要右键单击项目并选择“卸载”，然后再次右键单击它并单击“编辑”。这些设置位于您将编辑的文件的底部。

更改设置后，再次右键单击项目并点击“重新加载”，您将再次启动并运行。

# java - java哈希linkedHashSet的意义

> ID：14639560
> 
> 赞同：6
> 
> 时间：2013-02-01T04:07:01.327
> 
> 标签：java, collections, hash

我知道有关linkedHashSet的以下内容

*   它维护插入顺序
*   使用 LinkedList 保持顺序
*   我的问题是散列是如何出现的？

我明白如果使用散列，那么桶的概念就会出现

**但是，通过检查JDK中的代码， LinkedHashSet的实现**似乎只包含构造函数而没有实现，所以我猜所有的逻辑都发生在HashSet中？

*   所以 hashSet 默认使用 LinkedList 吗？

让我这样提出我的问题......如果目标是写一个集合

1.  保持独特的价值观
2.  使用链表保留插入顺序 THEN ...无需散列即可轻松完成...也许我们可以将此集合称为 LinkedSet

看到了一个类似的问题[，HashSet 和 LinkedHashSet 有什么区别，](https://stackoverflow.com/questions/10681360/whats-the-difference-between-hashset-and-linkedhashset)但不是很有帮助

如果我需要更多解释我的问题，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:18:21.987

如果您仔细观察，您会发现它实际上在 HashSet 上使用了一些受保护的构造函数，这些构造函数只是为它而存在的，而不是常规构造函数。例如，

```
HashSet(int initialCapacity, float loadFactor, boolean dummy) {
    map = new LinkedHashMap<E,Object>(initialCapacity, loadFactor);
} 
```

因此，用于支持 LinkedHashSet 的 keySet 实际上来自 LinkedHashMap 的实现，而不是像常规 HashSet 那样的常规 HashMap。它实际上并不使用 java.util.LinkedList。它只是维护在桶内容的实现中形成列表的指针（`Map.Entry<K,V>`）

```
316    private static class Entry<K,V> extends HashMap.Entry<K,V> {
317        // These fields comprise the doubly linked list used for iteration.
318        Entry<K,V> before, after;
319
320        Entry(int hash, K key, V value, HashMap.Entry<K,V> next) {
321            super(hash, key, value, next);
322        } 
```

散列之所以出现，是因为它是一种创建集合的简单方法，该集合强制唯一性并为大多数操作提供恒定时间性能。当然，我们可以只使用链表并添加唯一性检查，但是几个操作的时间将变为 O(N)，因为您必须迭代整个列表以检查重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:12:28.583

错误的。的实现`LinkedHashSet`真的全在`LinkedHashMap`. （而且实施`HashSet`真的全在`HashMap`.Le喘气！）

`HashSet`根本没有链表。

完全有可能编写一个`LinkedSet`由链表支持的集合，以保持元素的唯一性——只是它的性能会很糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:14:22.713

这是一个“有趣”的实现。LinkedHashSet 的构造函数遵循包私有构造函数，在`HashSet`该构造函数中设置数据结构（LinkedHashMap）以维护迭代顺序。

```
HashSet(int initialCapacity, float loadFactor, boolean dummy) {
    map = new LinkedHashMap<E,Object>(initialCapacity, loadFactor);
} 
```

API 设计者可以简单地将这个构造函数公开，并带有适当的文档，但我猜他们希望代码更加“自我记录”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-10T19:13:40.563

**代码示例**

```
Set<Registeration> registerationSet = new LinkedHashSet<>();
registerationSet.add(new Registeration()); 
```

# **Line2的解释。**

1.  计算注册对象的 hashCode
2.  在registerationSet中搜索hashCode来定位bucket
3.  检查入围存储桶中的相等对象
    *   3.1。如果找到相等，则将其替换为新对象引用
    *   3.2\. 如果没有找到，在桶中追加/添加注册对象的引用

# **与之平行，**

列表维护所有插入元素的进入顺序/队列

1.  总是，在末尾添加新的引用
2.  在替换的情况下（上面的 3.1.），删除以前的事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T05:13:18.477

对于您的问题的具体答案

*   哈希是如何出现的？（在 LinkedHashSet 中）

Java 文档怎么说...

> *   与 HashSet 一样，它为基本操作（添加、包含和删除）提供恒定时间性能，假设哈希函数在桶中正确地分散元素。
> *   该链表定义了迭代顺序，即元素插入集合的顺序（插入顺序）。

哈希码访问的存储桶用于加速随机访问，LinkedList 实现用于返回一个迭代器，该迭代器按插入顺序吐出元素。

希望我已经回答了你的问题？

# javascript - 为单元格设置 colspan/rowspan

> ID：14639561
> 
> 赞同：13
> 
> 时间：2013-02-01T04:07:09.280
> 
> 标签：javascript, html, html-table

我有一张桌子，我想在运行时更改单元格的`colspan`/`rowspan`属性。这是一个例子：

```
<html>
    <head>
        <script type="text/javascript">
            function setColSpan() {
                document.getElementById('myTable').rows[0].cells[0].colSpan = 2
            }
        </script>
    </head>

    <body>
        <table id="myTable" border="1">
            <tr>
                <td>cell 1</td>
                <td>cell 2</td>
            </tr>
            <tr>
                <td>cell 3</td>
                <td>cell 4</td>
            </tr>
        </table>
        <form>
            <input type="button" onclick="setColSpan()" value="Change colspan">
        </form>
    </body>

</html> 
```

我的问题是细胞移位。我应该删除有问题的单元格跨越的单元格吗？

我可以不删除吗？

我想实现一个简单的电子表格。现在我设法能够选择一个矩形范围的单元格并显示一个带有“合并选定单元格”选项的菜单。我希望能够“取消合并”单元格，因此最好跨越单元格而不必删除其他单元格。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-01T04:25:57.313

我认为您需要删除单元格。检查以下代码。我所做的是删除了整行并添加了具有新列跨度的新行

```
function setColSpan() {
    var table = document.getElementById('myTable');
    table.deleteRow(0);
    var row = table.insertRow(0);
    var cell = row.insertCell(0);
    cell.innerHTML= "cell 1"
    cell.colSpan = 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T14:49:09.533

细胞会发生变化，因为这就是你告诉它要做的事情。您正在定义这样的表：

```
<tr>
    <td colspan="2">cell 1</td>
    <td>cell 2</td>
</tr>
<tr>
    <td>cell 3</td>
    <td>cell 4</td>
</tr> 
```

所以你看到的转变是我所期望的。

如果要合并单元格，则必须获取所有合并单元格的内容，将它们连接到一个单元格中，然后删除其余部分。对于一个简单的例子，它会是这样的：

```
function setColSpan() {
    var myTable = document.getElementById('myTable');
    var cell2html = myTable.rows[0].cells[1].innerHTML;
    myTable.rows[0].deleteCell(1);
    myTable.rows[0].cells[0].innerHTML = myTable.rows[0].cells[0].innerHTML + ' ' + cell2html;
    myTable.rows[0].cells[0].colSpan = 2;
} 
```

然而，更强大的解决方案是......有点复杂。特别是如果您想要取消合并的能力。您必须以某种方式保留旧单元结构的信息......可能`<span class="oldCell">cell 2</span>`在合并数据周围放置类似的东西？然后在取消合并时检查“oldCell”跨度是否存在？但是，您必须通过用户编辑来保留该信息。并弄清楚这对于跨行和列合并意味着什么。还要弄清楚这对重叠合并意味着什么。

# php - 如何在 Stripe Invoice 中获取此 Json 值？

> ID：14639562
> 
> 赞同：1
> 
> 时间：2013-02-01T04:07:12.433
> 
> 标签：php, json, parsing, stripe-payments

我能够很好地检索前 4 个值，但`$item_name`我正在逃避。我用来检索计划的语法有什么问题：名称：“LITE”值

这是我的 php - 前 4 个返回正常，但 $item_name 返回无效。

```
 $customer = $event_json->data->object->customer;
    $amount = $event_json->data->object->total;
    $period_end = $event_json->data->object->period_end;
    $paid = $event_json->data->object->paid;
    $item_name = $event_json->data->object->lines->data->plan->name; 
```

这就是 Stripe 发送的内容

```
{
  "id": "evt_1CTCF3tibBeC2y",
  "created": 1359565368,
  "livemode": false,
  "type": "invoice.payment_succeeded",
  "data": {
    "object": {
      "period_end": 1359565367,
      "charge": "ch_1CTCMvOgHE1Q9K",
      "discount": null,
      "period_start": 1359565367,
      "livemode": false,
      "customer": "cus_1CTCYQNoghibwb",
      "amount_due": 7500,
      "lines": {
        "count": 1,
        "object": "list",
        "url": "/v1/invoices/in_1CTCCBbENUpsE6/lines",
        "data": [
          {
            "type": "subscription",
            "livemode": false,
            "period": {
              "end": 1391101367,
              "start": 1359565367
            },
            "object": "line_item",
            "proration": false,
            "plan": {
              "trial_period_days": null,
              "livemode": false,
              "interval": "year",
              "object": "plan",
              "name": "LITE",
              "amount": 7500,
              "currency": "usd",
              "id": "LITE",
              "interval_count": 1
            }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T04:10:32.097

数据是一个数组：

```
$item_name = $event_json->data->object->lines->data[0]->plan->name; 
```

正确的？

# cakephp-1.3 - 如何格式化蛋糕php单选按钮标签

> ID：14639564
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:07:17.847
> 
> 标签：cakephp-1.3

嗨，我正在研究蛋糕 php。我创建了一个单选按钮，代码是

```
<?php echo $form->radio('ElemType', array('M'=>'Male','F'=>'Female'),
array('class'=>'inputType', 'legend'=>false));?> 
```

它显示单选按钮我的问题是它在单选按钮和标签之间保持很大空间。请给我建议以删除空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:24:13.413

你的意思是标签和单选按钮之间的线间距吗？那么它很简单，使用这个，

```
 <?php echo $this->Form->input('ElemType', array('type' =>'radio', 'option'=>('M'=>'Male', 'F' =>'Female'), 'legend' => false, 'div' => false)); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:31:00.300

要修改这些标签的显示，您可以使用周围的 div

```
echo '<div class="inline_labels">';
echo $this->Form->radio('ElemType', $options, $attributes);
echo '</div>'; 
```

并像这样使用 CSS：

```
.inline_labels label
{
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T17:27:51.813

这一定会解决 Cake 用户的问题

```
 <style type="text/css">
    input[type=radio] {
       margin:3px;
       width:23px;
    }

    .locRad {
         margin:3px 0px 0px 3px; 
         float:none;
    }
    </style>

<label>Select Payment Type</label>
<?php
$attributes=array('legend'=>false, 'label'=>false, 'value'=>'US', 'class'=>'locRad validate[required]');

echo $form->radio('Payment.type',array('M'=>'Male','F'=>'Female'),$attributes);
             ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T04:35:08.467

很简单，你只需要使用属性'分隔符'

```
example:
<?php  
 $options=array('M'=>'Male'."<br>" , 'F'=>'Female');          
 $attributes=array('legend'=>false,'label'=>'gender_male.','class'=>'radio', 'div' => false, 'separator' => '&nbsp;&nbsp;');
 echo $this->Form->radio('gender',$options, $attributes);
?> 
```

# android - Admob 和 targetSDKVersion

> ID：14639565
> 
> 赞同：0
> 
> 时间：2013-02-01T04:07:19.080
> 
> 标签：android, admob

我读得越多，我就越困惑。阅读时似乎很容易，但几秒钟后，它就在我脑海中弹跳。无论如何，这是我的问题。

我有一个已发布的应用程序，我希望向其添加 admob 广告。据我所知，我需要在清单文件中包含 targetSDKVersion 为 13 或更高版本。当我将 targetSDKVersion 设置为 13 时，eclipse 向我显示一条警告，

“不针对最新版本的 Android；兼容模式适用。考虑测试和更新此版本。有关详细信息，请参阅 android.os.Build.VERSION_CODES javadoc。”

好了，截至目前，这就是我对minSDKVersion和targetSDKVersion的理解了。

minSDKVersion = 这是为了向后兼容。对于 Android 2.3.3，我的 minSDKVersion 设置为 10，这是我开发应用程序的版本。因此，Android 版本至少为 2.3.3 的人将能够使用我的应用程序。

targetSDKVersion = 这是告诉我在我的应用程序中使用了属于 targetSDKVersion 的功能，版本等于或高于版本的人将看到该功能，而版本较低的人将能够使用该应用程序，但看不到该功能。

那么，如果我的理解是正确的，那么警告呢？这个警告是什么意思？

而且，admob 声明它至少需要 Android 1.5 或更高版本。但是文档说，针对 Android 3.2 版进行编译。那这个呢？

我对 android 和 admob 都很陌生，所以如果这些是非常基本的问题，请多多包涵。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:20:18.280

您将收到该警告，`targetSdkVersion`用于告诉系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为来维护您的应用程序`forward-compatibility`与目标版本。现在`targetSdkVersion`版本是`16`，但你正在设置它，`13`所以它显示警告。

如果您将其更改为`16`then 或`17`then 您将不会收到该警告。

```
android:targetSdkVersion="16" 
```

您可以从这里了解更多[应用程序的兼容性](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# android - 在android中隐藏Webview错误

> ID：14639572
> 
> 赞同：4
> 
> 时间：2013-02-01T04:08:11.293
> 
> 标签：android, error-handling, android-webview

我还没有找到任何特定的解决方案来隐藏 Android 中 webviews 显示的默认错误。我可以通过错误代码捕获特定错误来显示我自己的自定义错误消息。

这里的问题是，在我的自定义错误消息显示之前，我会在一瞬间看到 WebView 错误，然后显示我的自定义错误。

以下是执行错误处理并显示我自己的自定义错误消息的一段代码：

```
protected void onPostExecute(String S) {

        mWebView.setWebViewClient(new WebViewClient() { 

            @Override
            public void onReceivedError(WebView view, int errCode, String errDescription, String failingUrl ) {

                view.clearView();

                Toast.makeText(getApplicationContext(), "Error code is "+errCode, Toast.LENGTH_SHORT).show();
                if(errCode == -2 || errCode == -8) {
                    view.loadData("There seems to be a problem with your Internet connection. Please try later", "text/html", "UTF-8");
                }

                if(errCode == -14) {
                    view.loadData("Page cannot be found on server", "text/html", "UTF-8");
                }

            }

        });

        mWebView.loadUrl(url);

        ShowProgress.dismiss();
    } 
```

有人可以就如何实现隐藏 webview 错误并仅显示我的自定义错误消息提出任何修改或建议吗？感谢您停下来阅读这篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:58:06.617

尝试添加这个：

```
view.stopLoading(); 
```

您的源代码将如下所示：

```
protected void onPostExecute(String S) {

        mWebView.setWebViewClient(new WebViewClient() { 

            @Override
            public void onReceivedError(WebView view, int errCode, String errDescription, String failingUrl ) {

                try {
                       view.stopLoading();
                  } 
                catch(Exception e){}
                view.clearView();

                Toast.makeText(getApplicationContext(), "Error code is "+errCode, Toast.LENGTH_SHORT).show();
                if(errCode == -2 || errCode == -8) {
                    view.loadData("There seems to be a problem with your Internet connection. Please try later", "text/html", "UTF-8");
                }

                if(errCode == -14) {
                    view.loadData("Page cannot be found on server", "text/html", "UTF-8");
                }

            }

        });

        mWebView.loadUrl(url);

        ShowProgress.dismiss();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T01:59:13.740

我找不到具体的解决方案，因为这是一个错误[#2340](http://code.google.com/p/android/issues/detail?id=2340)。因此，我将 webview 从应用程序中取出并使用常规浏览器。

# c - 使用循环展开/代码运动优化 C 代码

> ID：14639577
> 
> 赞同：2
> 
> 时间：2013-02-01T04:08:35.553
> 
> 标签：c, optimization

我有一项任务是优化一段 C 代码（一种我很喜欢的语言），旨在模拟图像中的旋转像素：

```
void naive_rotate(int dim, pixel *src, pixel *dst) {
    int i, j;
    for (i = 0; i < dim; i++)
        for (j = 0; j < dim; j++)
            dst[RIDX(dim-1-j, i, dim)] = src[RIDX(i, j, dim)];
} 
```

和`pixel`的`RIDX`定义如下：

```
typedef struct {
    unsigned short red;
    unsigned short green;
    unsigned short blue;
} pixel;

#define RIDX(i,j,n) ((i)*(n)+(j)) 
```

作业说明包含注释，“你的任务是重写此代码，使其使用代码移动、循环展开和阻塞等技术尽可能快地运行。”

我想我对如何解决这个问题有一些想法。但是，我尝试循环展开：

```
void rotate_unroll(int dim, pixel *src, pixel *dst) {
    int i, j;
    for (i = 0; i < dim; i++) {
        for (j = 0; j < dim; j+=4) {
            dst[RIDX(dim-1-j, i, dim)] = src[RIDX(i, j, dim)];
            dst[RIDX(dim-1-(j+1), i, dim)] = src[RIDX(i, j+1, dim)];
            dst[RIDX(dim-1-(j+2), i, dim)] = src[RIDX(i, j+2, dim)];
            dst[RIDX(dim-1-(j+3), i, dim)] = src[RIDX(i, j+3, dim)];
        }
    }
} 
```

和代码运动（或至少重新组织 RIDX 并将一些计算移出内部循环）：

```
void rotate_motion(int dim, pixel *src, pixel *dst) {
    int i, j;
    int dimsquared = dim * dim;
    for (i = 0; i < dim; i++) {
        int dst_temp = dimsquared - dim + i;
        int src_temp = i * dim;
        for (j = 0; j < dim; j++) {
            dst[dst_temp - (dim * j)] = src[src_temp + j];
        }
    }
}
//   dst[RIDX(dim-1-j, i, dim)] 
// = dst[(dim-1-j)dim + i] 
// = dst[(dim * dim) - dim - (dim)j + i]
//   src[RIDX(i, j, dim)]
// = src[(dim)i + j] 
```

似乎没有工作；与作业打包在一起的计时器声称我的解决方案对程序的 CPE 没有任何影响。我怀疑我可能错误地使用了这两种方法，并且非常感谢任何正确方向的指导。（这是一个家庭作业，所以我不是要求一个完整的解决方案，只是一些指示。）

我的另一个想法是尝试添加一个累加器——类似于以下内容：

```
void rotate_acc(int dim, pixel *src, pixel *dst) {
    int i, j;
    pixel temp = dst;
    for (i = 0; i < dim; i++) {
        for (j = 0; j < dim; j++) {
            temp[RIDX(dim-1-j, i, dim)] = src[RIDX(i, j, dim)];
        }
    }
    dst = temp;
} 
```

但是我的语法在那里非常错误，我不确定如何构建相关结构的临时版本。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:18:30.030

您需要对 C 中的指针有透彻的了解。简单地说：指针表示数据在内存中存储的地址（在您的情况下为像素结构）。

在您的代码中，该函数`rotate_acc`将像素指针作为参数：`pixel *dst`. 一开始你可能会说`pixel *tmp = dst`，但请记住，这就是所谓的*浅拷贝*——只复制地址，而不是它指向的数据——因此，如果你通过说修改 tmp `tmp->red = 0`，它将修改原始数据也

如果你需要一个*深拷贝*，你需要说`pixel tmp = *dst`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:42:36.673

尝试这个：

```
void naive_rotate(int dim, pixel *src, pixel *dst) {
    int dimSq = dim * dim;
    int dstdIxStart = dimSq - dim;
    int endIdx = dimSq - 2 * dim - 2;
    int dstIdx = dimSq - dim;
    for (int i = 0; int < endIdx; ++i)
    {
       dst[dstIdx--] = src[i];
       if (0 == dstIdx)
       {
          dstdIxStart -= dim;
          dstIdx = dstdIxStart;
       }
    }
} 
```

您将不得不仔细检查数学，但我希望您明白这一点。

它删除了所有的乘法。此外，`src`按顺序访问它对缓存也有好处。

# java - 在依赖接口上强制执行参数类型？

> ID：14639579
> 
> 赞同：3
> 
> 时间：2013-02-01T04:09:19.093
> 
> 标签：java, generics

这些接口非常简单：

```
public interface Thawed<F>
{
    F freeze();
}

public interface Frozen<T>
{
    T thaw();
} 
```

这行得通，没问题。

但是现在，我将如何要求`F`实施和实施？`Thawed``Frozen``T``Frozen``Thawed`

我能得到的最接近的是：

```
public interface Thawed<F extends Frozen<? extends Thawed<F>>>

public interface Frozen<T extends Thawed<? extends Frozen<T>>> 
```

但这听起来很递归......（也适用于`Thawed<?>`and `Frozen<?>`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:14:37.040

我认为这应该有效：

```
public interface Thawed<F extends Frozen<?>> { ... }

public interface Frozen<T extends Thawed<?>> { ... } 
```

我认为您不需要比这更深的东西，因为您需要做的就是指定它`F`是某种`Frozen`（并且类似地`T`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:17:07.543

> 我能得到的最接近的是

这是正确的答案; 在 Java 类型系统中，您无法比这更好。

* * *

请注意，这确实允许

```
class Cat implements Thawed<Dog> { }
class HouseCat extends Cat { }
class Dog implements Frozen<HouseCat> { } 
```

您可以通过使用两个通用参数来防止这种情况：

```
public interface Thawed<F extends Frozen<T, F>, T extends Thawed<F, T>> { }

public interface Frozen<T extends Thawed<F, T>, F extends Frozen<T, F>> { } 
```

但是，我认为这太令人困惑而没有用。

它也仍然允许

```
class Cat implements Thawed<Dog, HouseCat> { }

class HouseCat extends Cat { }

class Dog implements Frozen<HouseCat, Dog> { } 
```

# windows - 从注册表中删除时从 Windows 服务器中删除服务

> ID：14639580
> 
> 赞同：0
> 
> 时间：2013-02-01T04:09:23.750
> 
> 标签：windows, service

我在 services.msc 中有一项服务，其描述为“无法读取描述。错误代码：2”。

问题是该服务不在注册表中，使用“sc delete 将不起作用。我尝试将密钥添加到注册表中，并将显示名称的字符串值设置为与 service.msc 中的服务相同，然后尝试删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:33:58.840

AFAIK, the problem lies here::

**Ive tried adding the key into the registry with the string value set for the display name the same as the service in the service.msc.**

The actual Registry Entry SubKey of the service may change from the DisplayName. Ex:: HKLM\SYSTEM\CurrentControlSet\Services\ **ABC** may contain the **DisplayName** Value as **XYZ**.

All service names are defined under: **HKEY_LOCAL_MACHINE\SOFTWARE**.

# android - 在 Webview 中查看 Android 布局

> ID：14639582
> 
> 赞同：2
> 
> 时间：2013-02-01T04:09:37.683
> 
> 标签：android, webview, android-webview

我是 Android 应用程序的新手。我只是想知道是否有办法在 webview 中查看布局？例如。

```
WebView webview = (WebView)findViewById(R.id.webView1);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setBuiltInZoomControls(true);
String url = "Layout location or R.Layout.test";
webview.loadUrl(url); 
```

就像除了使用 Activity 类来查看这样的布局 setContentView(R.layout.test);

我正在尝试在 web 视图中查看布局。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:27:30.187

在 webview 中查看布局？我不太清楚，下面可能是你的一个例子

```
<ProgressBar
android:id="@+id/progWeb"
style="@style/progressbar"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@android:color/darker_gray"
android:max="100"
android:visibility="invisible" />

<WebView
android:id="@+id/web"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/progWeb"
android:layout_marginTop="28dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:38:03.563

为了清楚起见，网页视图不能用于加载布局。

检查这个链接

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:00:08.797

不，你不能。编译后的应用程序不包含资源 XML。它被转换为内部格式：

[http://www.atcomm.com.au/Atcomm-Underground/Java/Compiled-and-Noncompiled-Android-Resources.html](http://www.atcomm.com.au/Atcomm-Underground/Java/Compiled-and-Noncompiled-Android-Resources.html)

[http://developer.android.com/tools/building/index.html](http://developer.android.com/tools/building/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:06:13.717

无论您在教程中看到什么，我认为他们可能不会将布局**加载**到.`WebView``along with``WebView`

换句话说，您实际上可以在 HTML 中使用类似于 div 的布局。您采用布局，将 Webview 添加到其中，然后在 webview 标签之外添加按钮和其他控件，如 lgw150 所示。

***这可能会给人一种印象，即按钮等位于 webview 内部，但实际上并非如此！*** *你可以有这样的东西：*

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_height="fill_parent"
             android:layout_width="fill_parent"
             android:orientation="vertical">
    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <Button android:id="@+id/button1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"                
            android:layout_gravity="top"
            android:layout_weight="1"/>
        <Button android:id="@+id/button2"
            android:layout_width="0dip"
            android:layout_height="wrap_content"                
            android:layout_gravity="top"
            android:layout_weight="1" />
    </LinearLayout>
    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

有关更多信息，请查看[这个](https://stackoverflow.com/questions/5561709/opening-webview-not-in-new-browser)和[这个](https://stackoverflow.com/questions/4359197/embedding-a-webview-into-another-view)。现在单击我的答案左侧的刻度线。

# r - R中的子集数据框

> ID：14639595
> 
> 赞同：2
> 
> 时间：2013-02-01T04:11:24.583
> 
> 标签：r

我是 R 新手，正在学习子集。我有一张桌子，我正在尝试获取表格子集的大小。我的问题是，当我尝试两种不同的方式时，我会得到两个不同的答案。对于我试图选择 RMS 为 5 且 BDS 为 2 的所有行的表“dat”：

```
dim(dat[(dat$RMS==5) & (dat$BDS==2),]) 
```

给了我一个不同的答案

```
dim(subset(dat,(dat$RMS==5) & (dat$BDS==2))) 
```

第二个是正确的，有人可以解释为什么这些不同以及为什么第一个给我错误的答案？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:52:13.687

原因一定是这两种方法对NA值的处理不同。如果您从数据框中删除带有 NA 的行，您应该得到相同的结果：

```
dat_clean = na.omit(dat) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:18:20.230

为我工作......

```
> x = c(1,1,2,2,3,3)
> y = c(4,4,5,5,6,6)
> 
> X = data.frame(x,y)
> 
> dim(X[X$x==1 & X$y==4,])
  [1] 2 2
> 
> (X[X$x==1 & X$y==4,])
   x y
 1 1 4
 2 1 4

> dim(subset(X,(X$x==1) & (X$y==4)))
  [1] 2 2
> subset(X,(X$x==1) & (X$y==4))
  x y
1 1 4
2 1 4 
```

# php - 带有依赖注入的 PHPUnit，使用 instanceof() 测试模拟对象

> ID：14639596
> 
> 赞同：0
> 
> 时间：2013-02-01T04:11:35.317
> 
> 标签：php, testing, pdo, mocking, phpunit

我有使用依赖注入的解耦/抽象代码。然而，使用抽象代码，我的数据库类都返回一个 PDO 对象，因为我有不同的类用于处理不同的数据库。

例如：

```
class MySQL extends \Database
{
...
    public function CreateConnection
    {
        ...
        return $PDOConnection;
    }
}

class Oracle extends \Database
{
...
    public function CreateConnection
    {
        ...
        return $PDOConnection;
    }
} 
```

然后，Database 类具有用于操作查询、创建语句等的通用例程......这使主代码数据库不知道，因为 RunQuery、LimitResults 等内部方法......可能在代码中被调用，并将被转换为每个数据库的正确代码和格式。

我现在的问题是如何测试返回的对象。虽然我知道我将为我的测试模拟它，但我确实想确保我可以检查该类是否返回了正确的对象。我可能想返回一个缓存对象，或者基于配置的其他东西，因为可能不使用 PDO。

因此，我想检查 Mock Object 是否属于正确的实例。

```
public testPDOObjectReturned()
{
    $MockObject = $this->getMock('\Database\MYSQL');
    $MockObject->expects($this->any())
               ->method('CreateConnection');
    $this->assertInstanceof('PDO', $MockObject->CreateConnection(MYSQL::UsePDO));
} 
```

但是，我不知道如何将返回的对象设置为使用 InstanceOf() 进行测试的类/对象。

我收到一个错误：

```
1) lib\Database\PDO\MYSQL_Test::testCreateConnection
Failed asserting that null is an instance of class "PDO". 
```

如何设置返回的类以测试它是否是正确的对象类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:21:28.407

你的`CreateConnection`存根应该返回一些东西。

```
$MockObject->expects($this->any())
           ->method('CreateConnection');
           ->will($this->returnValue($this->getMock('PDO'))); 
```

# fedora - 创建 riak 节点：bitcask 版本冲突

> ID：14639600
> 
> 赞同：0
> 
> 时间：2013-02-01T04:11:50.027
> 
> 标签：fedora, riak

我按照[标准说明](http://docs.basho.com/riak/latest/tutorials/fast-track/Building-a-Development-Environment/#Build-Riak)在 Fedora 17 系统上安装了 riak（但不使用包管理器） ，即：

```
$ wget http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/1.2/1.2.1/riak-1.2.1.tar.gz
$ tar zxvf riak-1.2.1.tar.gz
$ cd riak-1.2.1
$ make all 
```

这行得通，我现在尝试创建四个节点，如[Fast Track 教程](http://docs.basho.com/riak/latest/tutorials/fast-track/Building-a-Development-Environment/#Use-Rebar-to-Start-Up-Four-Nodes)中所述：

```
$ make devrel 
```

这会运行一段时间，然后产生以下错误：

```
==> rel (generate)
ERROR: generate failed while processing /space/surechem/riak-1.2.1/rel: {'EXIT',{{badmatch,{error,"bitcask: Application version clash. Multiple directories contains version \"1.5.2\"."}},
     [{rebar_reltool,generate,2,[]},
      {rebar_core,run_modules,4,[]},
      {rebar_core,execute,4,[]},
      {rebar_core,process_dir,4,[]},
      {rebar_core,process_commands,2,[]},
      {rebar,main,1,[]},
      {escript,run,2,[{file,"escript.erl"},{line,741}]},
      {escript,start,1,[{file,"escript.erl"},{line,277}]}]}}
make: *** [dev1] Error 1 
```

我很难理解该错误消息试图告诉我什么。

这是与bitcask的版本冲突吗？Fedora 软件包`erlang-bitcask`安装在机器上（erlang-bitcask-1.5.2-1.fc17.x86_64）。它应该被删除吗？我需要它的不同版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:53:13.810

实际上，这似乎是由于与系统中安装的 Erlang 包的冲突引起的。从系统中删除`erlang-bitcask`软件包后，我收到了其他软件包的类似错误消息。最后我不得不删除四个包，

```
$ sudo yum remove erlang-bitcask erlang-ebloom erlang-js erlang-luke 
```

让它工作。

# oracle - 在 Toad 中调用存储的 PROCEDURE

> ID：14639604
> 
> 赞同：8
> 
> 时间：2013-02-01T04:12:03.647
> 
> 标签：oracle, stored-procedures, toad

我定义了一个新的存储过程，但在调用它时出错，

```
CREATE OR REPLACE PROCEDURE SCOTT.getempsal(
        p_emp_id IN NUMBER,
        p_emp_month IN CHAR,
        p_emp_sal OUT INTEGER)

AS
BEGIN
    SELECT EMP_SAL
      INTO p_emp_sal
      FROM EMPLOYEE_SAL
    WHERE  EMP_ID = p_emp_id
    AND    EMP_MONTH = p_emp_month;

END getempsal; 
```

并试图称之为：

```
getempsal(1,'JAN',OUT) --Invalid sql statement. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T04:21:29.520

您的过程包含一个 out 参数，因此您需要在块中调用它，例如：

```
declare
a number;
begin 
  getempsal(1,'JAN',a);
  dbms_output.put_line(a);
end; 
```

可以调用一个简单的过程（假设带有数字参数）

```
exec proc(1); 
```

或者

```
begin
proc(1);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-04T12:25:38.193

只需写 EXECUTE procedure_name('provide_the_valueof_IN parameter','value of in parameter', :k) ;

运行此语句，将弹出一个弹出窗口，将参数设置为 in out 和数据类型。U 将在另一个弹出窗口中看到输出。

# android - 我尝试将 layout_weight 与 layout_width 或 layout_height 组合使用，但徒劳无功

> ID：14639609
> 
> 赞同：-3
> 
> 时间：2013-02-01T04:12:30.230
> 
> 标签：android

许多答案都指出：当我们使用 layout_weight 时，我们应该设置 layout_height="0dp"，如果我们设置 layout_height="fill_parent"，结果不是我们的预期。在 OnMeasure 中 layout_height="fill_parent" 做了什么？谁能解释一下？对不起。这是我第一次提问。场景如下：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:background="#a00"
        android:text="r" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="3"
        android:background="#0a0"
        android:text="g" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#00a"
        android:text="b" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:31:02.480

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="50dp"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:background="#a00"
    android:text="r" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:background="#0a0"
    android:text="g" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:background="#00a"
    android:text="b" /> 
```

现在这里 weight 1 会给他们相等的空间，你可以根据你的要求修改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:40:04.503

没有任何代码，很难帮助你，但我会试一试。

首先，`layout_weight`是一个仅适用于 LinearLayout（及其子类）的属性。如果您使用任何其他 ViewGroup 作为父级，它将不起作用。

二`layout_weight`是用来划分UNUSED空间。在布局完所有其他子节点后，具有 layout_weight 的子节点将根据权重占用剩余的可用空间。这就是为什么人们经常建议`layout_height="0dp"`在使用`layout_gravity`. 这意味着在完成其他所有操作之前它不会占用任何空间。如果你有一个孩子填补它的父母，那么就没有任何空间可以分割了。

希望这将帮助您了解如何`layout_weight`更好地使用。

# database - 数据库中的元数据和模式有什么区别？

> ID：14639618
> 
> 赞同：5
> 
> 时间：2013-02-01T04:14:06.093
> 
> 标签：database, schema, metadata

首先，我想问一下元数据的定义是什么？那么，数据库中的元数据和模式有什么区别呢？数据建模过程是否产生元数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-23T02:55:54.297

Schema 是数据库的布局。例如，表格字段、定义、页面、行和列等。

元数据是关于您的数据库的数据。例如，如果您有关于所有说唱音乐的数据，您的元数据将是：作者、曲目数量、发行年份、位置、专辑名称等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T03:51:03.267

`Metadata`是“关于数据的数据”。而`Schema`系统的结构/布局。

*元数据的真实示例*：使用手机拍照时生成的额外信息，例如日期、位置等。

*Schema 的真实示例*：像我们这样的网站的布局，主标题、内容等在哪里。

在数据库系统的上下文中，**模式是元数据的子集**。

数据库元数据包含有关其模式、存储、语言、安全性等的大量信息。而数据库模式由数据库中的数据结构组成，例如数据如何组织成表、行和列等作为这些数据之间的关系和约束。

# ruby - 使用变量等待 webdriver

> ID：14639623
> 
> 赞同：1
> 
> 时间：2013-02-01T04:15:07.423
> 
> 标签：ruby, webdriver, watir

我在浏览器参考中使用变量时遇到问题。我正在尝试传递字段类型，例如 ul、ol 等。如果我键入 ol，则代码有效，但我想使用标记为“字段”的传递变量。我收到“未定义的字段方法”错误。

我也尝试过使用#{field}，但这也不起作用。错误是该字段未定义。

```
def CheckNewPageNoUl(browser, field, text1, output)

  browser.a(:id => 'submitbtn').hover
  browser.a(:id => 'submitbtn').click
  output.puts("text1  #{text1}")      
  browser.body(:id => 'page').wait_until_present
  if browser.table.field.exists?
    output.puts(" #{text1} was found in CheckNewPageNoUl")
  end
end

field = "ol" 

text1 = "<ol>"

CheckText.CheckNewPageNoUl(b, field, text1, outputt) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:09:31.170

要将字符串转换为方法调用，请使用[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)，它可以采用两个参数：

1.  方法名称（作为字符串或符号）
2.  方法的参数（可选）

一些例子：

```
field = 'ol'
browser.send(field).exists?
#=> Translates to browser.ol.exists?

specifiers = {:text => 'text', :class => 'class'}
browser.send(field, specifiers).exists?
#=> Translates to browser.ol(:text => 'text', :class => 'class').exists? 
```

对于您的代码，您需要：

```
if browser.table.send(field).exists?
  output.puts(" #{text1} was found in CheckNewPageNoUl")
end 
```

# android - 带有 2 个 TextView Marquee 的 Android 小部件不起作用

> ID：14639625
> 
> 赞同：2
> 
> 时间：2013-02-01T04:15:24.703
> 
> 标签：android, widget, textview, marquee

我正在使用 Marquee TextView 开发小部件，当我插入 1 个 Textview 时它工作正常，但是当我插入 2 个 Textview 时，第一个 textview 没有选框。也许是因为我在我的文本视图上使用请求焦点所以当我插入另一个文本视图时它会失去焦点

这是一个代码

```
 <TextView
        android:id="@+id/runText1_txtRunningText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:duplicateParentState="true"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:text="1lorem ipsum dolor sit amet 2lorem ipsum dolor sit amet 3lorem ipsum dolor sit amet lorem ipsum dolor">
        <requestFocus android:focusable="true" android:focusableInTouchMode="true" android:duplicateParentState="true" />
    </TextView> 
```

我已经尝试使用自定义文本视图，它在没有焦点的情况下自动运行选框，但它在小部件中不起作用..

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:23:22.310

```
<TextView
    android:id="@+id/mywidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:lines="1"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:text="Simple application for marquee with example as shown"
    android:textColor="#ff4500" />

<TextView
    android:id="@+id/mywidget1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:lines="1"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:text="haihaihaihaihaihaiahaiahaiahaiahaiahaiahaiahaiahaiahaiahiaha"
    android:textColor="#ff4500" /> 
```

试试上面的代码可能对你有帮助

# mysql - 嵌套 SQL 查询，每个嵌套实际发生了什么？

> ID：14639628
> 
> 赞同：4
> 
> 时间：2013-02-01T04:16:09.040
> 
> 标签：mysql, database

我想知道这个查询是如何工作的：

```
SELECT empname FROM Employee WHERE not exists (
    SELECT projid FROM Project WHERE not exists (
        SELECT empid, projid FROM Assigned WHERE empid = Employee.empid and projid = Project.projid
    )
) 
```

它应该返回分配给每个项目的所有员工的姓名，并且它确实有效，但是我对它如何/为什么正确工作感到困惑。

架构是：

> 员工（empID INT,empName VARCHAR(100),job VARCHAR(100),deptID INT,salary INT);
> 已分配（empID INT，projID INT，角色 VARCHAR（100））；
> 项目(projID INT,title VARCHAR(100),budget INT,funds INT);

我是 SQL 新手，因此不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:50:08.007

当我需要尝试了解正在发生的事情时，我会寻找最内部的查询并向外工作。在你的情况下，让我们从：

```
SELECT empid, projid 
FROM Assigned 
WHERE empid = Employee.empid and projid = Project.projid 
```

这匹配已分配表中的所有记录，其中 empid 和 projid 在之前的表中（因此是 Employee.empid 和 Project.projid）。

假设 Projects 表中有 5 个项目，并为每个项目分配了 Employee1。这将返回 5 条记录。还假设 Employee2 被分配到这些项目中的 1 个，因此返回 1 条记录。

接下来看：

```
SELECT projid FROM Project WHERE not exists (
        ...
    ) 
```

现在这表示对于在上一个查询中找到的记录（Employee1 有 5 个项目，Employee2 有 1 个项目），从上一个查询中没有任何匹配项（不存在）的 Project 表中选择任何 projid。换句话说，Employee1 不会从这个查询中返回任何项目，但 Employee2 会返回 4 个项目。

最后，看看

```
 SELECT empname FROM Employee WHERE not exists (
        ...
    ) 
```

与第二个查询一样，对于在前一个查询中找到的任何记录（没有记录将这些员工与所有项目（如 Employee1）匹配，如果员工未分配到每个项目（如 Employee2）则有一些记录），从没有任何匹配项的 Employee 表（同样，不存在）。换句话说，Employee1 会返回，因为之前的查询没有返回任何项目，而 Employee2 不会返回，因为之前的查询返回了 1 个或多个项目。

希望这可以帮助。以下是有关 EXISTS 的一些附加信息：

[http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

从那篇文章中：

> 所有城市都有什么样的商店？

```
SELECT DISTINCT store_type FROM stores s1   WHERE NOT EXISTS (
    SELECT * FROM cities WHERE NOT EXISTS (
      SELECT * FROM cities_stores
       WHERE cities_stores.city = cities.city AND cities_stores.store_type = stores.store_type)); 
```

> 最后一个示例是双嵌套的 NOT EXISTS 查询。也就是说，它在 NOT EXISTS 子句中有一个 NOT EXISTS 子句。形式上，它回答了“一个城市是否存在一个没有商店的商店”的问题？但更容易说嵌套的 NOT EXISTS 回答了“x 对所有 y 都为真吗？”的问题</p>

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:52:02.510

当`NOT EXISTS (subquery)`子查询的结果集没有行时，谓词将返回 TRUE。当找到匹配的行时，它将返回 FALSE。

本质上，查询是在询问

对于 Employee 中的每一行...检查 Project 表中的每一行，以查看 Assigned 表中是否有一行的 empid 与 Employee 行上的 empid 和 projid 匹配项目表。

仅当未找到匹配行时，才会返回来自 Employee 的行。

注意，子查询的 SELECT 列表中的表达式并不重要；正在检查的只是该子查询是否返回一（或多）行。通常，我们在 SELECT 列表中使用文字 1；这提醒我们，我们正在检查的是是否找到了一行。）

我通常会以如下所示的样式编写该查询：

```
SELECT e.empname 
  FROM Employee e 
 WHERE NOT EXISTS
       ( SELECT 1
           FROM Project p
          WHERE NOT EXISTS
                ( SELECT 1 
                    FROM Assigned a 
                   WHERE a.empid = e.empid
                     AND a.projid = p.projid
                )
       ) 
```

我将“ `SELECT 1`”读为“选择一行”）

该查询的结果集本质上等同于该查询的结果集（通常效率低得多）：

```
SELECT e.empname
  FROM Employee e
 WHERE e.empid NOT IN
       ( SELECT a.empid
           FROM Assigned a
           JOIN Project p
             ON a.projid = p.projid
         WHERE a.empid IS NOT NULL
          GROUP
             BY a.empid
       ) 
```

该`NOT IN`查询可能更容易理解，因为您可以运行该子查询并查看它返回的内容。（NOT EXISTS 子查询可能有点令人困惑的是，在 SELECT 列表中返回什么表达式并不重要；重要的是是否返回一行。）NOT IN 有一些“陷阱”子查询除了性能很差；您需要小心确保子查询不返回 NULL 值，因为这样 NOT IN (NULL,...) 将永远不会返回 true。

也可以使用反连接模式返回等效的结果集：

```
SELECT e.empname
  FROM Employee e
  LEFT
  JOIN ( SELECT a.empid
           FROM Assigned a
           JOIN Project p
             ON a.projid = p.projid
         WHERE a.empid IS NOT NULL
          GROUP
             BY a.empid
       ) o
    ON o.empid = e.empid
WHERE o.empid IS NULL 
```

在该查询中，我们正在 empid 上查找“匹配项”。LEFT 关键字告诉 MySQL 从 Employee（JOIN 左侧的表）返回任何不匹配的行。对于这些行，将返回 NULL 值来代替如果存在匹配行时将返回的列的值。然后，“技巧”是丢弃所有匹配的行。我们通过检查如果存在匹配则不会为 NULL 的列中的 NULL 来做到这一点。

如果我要使用`NOT EXISTS`谓词编写这个查询，我可能实际上更喜欢这样写：

```
SELECT e.empname
  FROM Employee e
 WHERE NOT EXISTS
       ( SELECT 1
           FROM Assigned a
           JOIN Project p
             ON a.projid = p.projid
          WHERE a.empid = e.empid
       ) 
```

# javascript - window.setinterval 函数在不同的浏览器引擎中表现不同

> ID：14639629
> 
> 赞同：0
> 
> 时间：2013-02-01T04:16:09.710
> 
> 标签：javascript, cross-browser, dom-events

我写了一个函数`window.setinterval`，后跟两个 if 条件。在 Firefox、Opera、IE 中完全按照我的意愿工作。在 webkit 引擎中，该功能没有被继承。

```
 x = window.setInterval(function() {
            if(a.speed >= a.maxSpeed && b.speed >= b.maxSpeed && c.speed >= c.maxSpeed) {
                 a.stop();
                 b.stop();
                 c.stop();
            }
            if(a.speed === 0 && b.speed === 0 && c.speed === 0 && completed === 3) {
                window.clearInterval(x);
                enableControl();
                printResult();
                enableControl(); 
            }
        }, 100); 
```

我已经设置了一个间隔，当达到 max.speeds 时，应该调用停止函数，如果速度为 0，则应该显示结果。在 Mozilla、IE、Opera 中，它的工作方式完全符合我的要求。但是在 webkit 中，第一个 if 条件本身并没有被执行。一个无限循环正在运行。

我也尝试过嵌套 if ，即使第一个 if 条件没有被执行。请帮我解决这个问题。

如果这不是正确的方法，我可以在之后触发超时`c.stop()`并手动将 a、b、c 的速度设置为 0，然后启用控制并显示结果吗？

这是您要求的停止功能：

```
 Slot.prototype.stop =        function() {
    var _this = this,
        limit = 30;
    clearInterval(_this.si);
    _this.si = window.setInterval(function() {
        if(_this.speed > limit) {
            _this.speed -= _this.step;
            $(_this.el).spSpeed(_this.speed);
        }
        if(_this.speed <= limit) {
            _this.finalPos(_this.el);
            $(_this.el).spSpeed(0);
            $(_this.el).spStop();
            clearInterval(_this.si);
            $(_this.el).removeClass('motion');
            _this.speed = 0;
        }
    }, 100);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:12:23.597

如果您会原谅一个回避您的问题的答案，那么您确实不应该使用一些论点`setInterval`（请参阅[this](http://weblogs.asp.net/bleroy/archive/2009/05/14/setinterval-is-moderately-evil.aspx)和[this](http://bonsaiden.github.com/JavaScript-Garden/#other.timeouts)）。关于时间间隔的保证强度取决于操作系统和浏览器，因此不是很强。您最好使用来安排一个在必要时`setTimeout`重新安排自己使用的功能。`setTimeout`如果您担心间隔的准确性，您可以随时将时间间隔调整为您认为合适的实时。

# c - K&R 练习 1-8 计算空格、制表符和新行

> ID：14639630
> 
> 赞同：1
> 
> 时间：2013-02-01T04:16:23.250
> 
> 标签：c

我正在阅读 K&R 的书，其中一个练习是计算输入中的空格、制表符和新行。但每当我运行以下代码时，它只会正确计算最后一个新行上方所有内容的空格、制表符和新行。如果没有新行，则不算数。

```
hey how 
```

返回

```
0 0 0 
```

和

```
hey how
hey how
hey how 
```

返回

```
2 0 2 
```

如果我使用制表符而不是使用空格，它将是 0 2 2。空格和制表符似乎依赖于新行，我不知道为什么。那么我怎样才能让它工作，所以它最后不需要换行呢？这是我的代码。

```
#include <stdio.h>

/* counts blanks, tabs, and new lines */

main()
{
    int c, blanks, tabs, nl;
    blanks = 0;
    tabs = 0;
    nl = 0;

    while((c = getchar()) != EOF)
    {
        if(c == ' ')
            ++blanks;
        if(c == '\t')
            ++tabs;
        if(c == '\n')
            ++nl;

    }
    printf("\n%d\t%d\t%d\n" , blanks , tabs , nl);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:29:11.760

使用不同的键盘快捷键。您不想杀死程序，而是想使用适当的组合键模拟文件结尾：

*   `Ctrl`+ `C`：杀死程序。
*   `Ctrl`+ `Z`, `Enter`: Windows 中的 EOF 信号。
*   `Ctrl`+ `D`: Linux 中的 EOF 信号。

# css - 如何删除下拉列表的边框：CSS

> ID：14639638
> 
> 赞同：41
> 
> 时间：2013-02-01T04:17:37.307
> 
> 标签：css

我想删除下拉列表之外的边框。
我在尝试：

```
select#xyz option {
  Border: none;
} 
```

但对我不起作用。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-01T04:25:58.623

您不能设置下拉框本身的样式，只能设置输入字段。该框由操作系统呈现。

![在此处输入图像描述](../Images/128cae40496a5b741d1a497a7ef72c0e.png)

如果您想更好地控制输入字段的外观，您可以随时查看[JavaScript 解决方案](https://www.google.com/webhp#hl=en&q=jquery+form+skin+plugin&oq=jquery+form+skin+plugin)。

但是，如果您的意图是从输入本身中删除边框，那么您的选择器是错误的。试试这个：

```
select#xyz {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-02-01T09:00:44.927

你能得到的最多是：

```
select#xyz {
   border:0px;
   outline:0px;
} 
```

你不能完全设置它的样式，但你可以尝试类似的东西

```
select#xyz {
  -webkit-appearance: button;
  -webkit-border-radius: 2px;
  -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
  -webkit-padding-end: 20px;
  -webkit-padding-start: 2px;
  -webkit-user-select: none;
  background-image: url(../images/select-arrow.png), 
    -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);
  background-position: center right;
  background-repeat: no-repeat;
  border: 1px solid #AAA;
  color: #555;
  font-size: inherit;
  margin: 0;
  overflow: hidden;
  padding-top: 2px;
  padding-bottom: 2px;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-12T13:15:00.890

你可以简单地使用：

```
select {
    border: none;
    outline: none;
    scroll-behavior: smooth;
} 
```

由于下拉列表边框不可编辑，因此您无法对其进行任何操作，但这肯定会修复您的初始前景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-14T22:52:14.237

这个解决方案似乎对我不起作用。

```
select {
    border: 0px;
    outline: 0px;
} 
```

但是您可以将`select`边框设置为容器的背景颜色，它会起作用。

# php - 当所有列名 100% 正确时插入查询不插入

> ID：14639642
> 
> 赞同：0
> 
> 时间：2013-02-01T04:18:19.980
> 
> 标签：php, pdo

```
$UniqueID = rand(5400, 40000);
$InsertQuery = $c->prepare("INSERT INTO dbo.Users_Master ( 
UserUID, UserID, Pw, JoinDate, Admin, AdminLevel, UseQueue, Status, Leave, UserType, Point)
VALUES (:UserUID, :UserID, :Pw, :Date, :Admin, :AdminLevel, :UseQue, :Status, :Leave, :UserType, :Point)");
$Param = array ($UniqueID, $_POST['Username'], $_POST['Password'], '2013-21-10', 'False', '0', 'False', '0', '0', 'P', '0');
$InsertQuery->execute($Param); 
```

你好。我上面的代码确实为我的数据库提供了正确的列名/表名，但是我的插入不起作用？谁能明白为什么？

* * *

我已经检查了这个查询 10 次，试图找出错误，但我无法尝试。我尝试以传统方式绑定参数：

```
$InsertQuery->bindParam(':UserUID', $UniqueID, PDO::PARAM_INT);
$InsertQuery->bindParam(':UserID', $_POST['Username'], PDO::PARAM_STR);
$InsertQuery->bindParam(':Pw', $_POST['Password'], PDO::PARAM_STR);
$InsertQuery->bindParam(':Date', '2013-21-10', PDO::PARAM_STR);
$InsertQuery->bindParam(':Admin', 'False', PDO::PARAM_STR);
$InsertQuery->bindParam(':AdminLevel', '0', PDO::PARAM_INT);
$InsertQuery->bindParam(':UseQue', '0', PDO::PARAM_INT);
$InsertQuery->bindParam(':Status', '0', PDO::PARAM_INT);
$InsertQuery->bindParam(':Leave', '0', PDO::PARAM_INT);
$InsertQuery->bindParam(':UserType', 'P', PDO::PARAM_STR);
$InsertQuery->bindParam(':Point', '0', PDO::PARAM_INT); 
```

这也证明不走运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:25:36.250

“试图发现错误”是一种**非常**低效的发现错误的方法。
程序员必须要求他们的程序这样做。

如果出现 PDO 问题，必须告诉 PDO 在错误时引发错误：

```
$c->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

必须在连接后立即设置，甚至更好 - 作为连接选项。
它会告诉你数据库中发生的任何错误 - 所以，你会知道出了什么问题。

您的代码也存在一些问题

1.  永远不要将随机数称为唯一数。改为使用此字段 auto_increment PRIMARY KEY 并让数据库为您保持唯一性。
2.  不要绑定常量。这很无聊。
3.  缩短你的代码。但合理：长行不会使您的代码更短

所以

```
$sql = "INSERT INTO Users_Master VALUES (NULL,?,?,curdate(),'False',0,0,0,0,'P',0)";
$stmt = $c->prepare($sql);
$stmt->execute(array($_POST['Username'], $_POST['Password'])); 
```

# mysql - User.all 在本地需要 5-10 分钟。请求超时以迭代每个

> ID：14639648
> 
> 赞同：0
> 
> 时间：2013-02-01T04:18:39.390
> 
> 标签：mysql, ruby-on-rails, rails-activerecord, sidekiq

我在数据库中有 233_997 条记录供用户使用。遍历这个需要 10 多分钟，我需要遍历每一个才能将工作发送到 sidekiq。服务器在为每个用户创建作业之前超时。我该怎么办？

```
User.find_each do |user|
  UpdateMembershipLevelWorker.perform_async(user.id)
end 
```

如何在不使服务器超时的情况下使此请求通过？这是 User.find_each 部分非常慢......但也许这对于 200k 记录是正常的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:26:11.923

我认为您需要做的是，为您的用户循环有一个后台进程（通过 sidekiq，因为您已经在使用它）。

```
# app/workers/hard_worker.rb
class HardWorker
  include Sidekiq::Worker

  User.find_each do |user|
   UpdateMembershipLevelWorker.perform_async(user.id)
  end 

end 
```

*（从网站复制 :) [http://mperham.github.com/sidekiq/](http://mperham.github.com/sidekiq/)）*

我通常在长时间运行的进程中做的是，在后台运行它们并将状态写入数据库表。所以后来我可以向用户展示错误等。

# css - 捆绑 CSS 文件是否会破坏 Razor 视图中的 CSS Intellisense？

> ID：14639649
> 
> 赞同：3
> 
> 时间：2013-02-01T04:18:40.003
> 
> 标签：css, asp.net-mvc, razor, visual-studio-2012, intellisense

是否在布局视图中包含一组捆绑的 CSS 文件，`@Styles.Render("~/Content/css")`在从属视图文件中包含一个 la stop css 类智能感知？

我问是因为在我的一种观点中`View.vbhtml`，我输入了：

`<div class="`并且没有 Intellisense 推荐捆绑的 css 文件中建立的任何 css 类。

我没有尝试过没有捆绑 - 我认为捆绑是导致它的原因，因为 VS 2012 必须具有 css 类智能感知，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:43:27.957

不，智能感知不适用于捆绑文件。

文件中的样式在`.css`运行之前不会“.Render”。

最后，我一遍又一遍地测试了这个，如果我使用，我什至无法获得智能感知：

```
...
<head>
    <style type="text/css">
        #myElement{color:red}
        .myStyle{color:red}
    </style>
</head>
... 
```

在 _Layout.cshtml 本身中。

召唤狂野：如果我在这方面不正确，我挑战你提供明确的证据和一个我们可以复制的例子，否则我们必须得出结论，在 MVC 视图中没有智能感知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T06:37:57.310

我在 VS2012 和 ASP.NET MVC Razor 视图中观察到类似的问题。在研究与此主题相关的建议/答案和评论时，我无法应用在我的 VS2012 ASP.NET MVC Razor 项目中成功运行的任何内容。但是，我确实从 Microsoft Connect 中发现了一些细节，承认这是一个尚未实现的功能以及在我的 VS2012 中确实有效的解决方案，而所有其他建议在我的 VS2012 环境中都不起作用

您可以在此处查看这些详细信息：[CSS Intellisense not working for MVC 4 project in Visual Studio 2012 Ultimate](https://stackoverflow.com/questions/15987476/css-intellisense-not-working-for-mvc-4-project-in-visual-studio-2012-ultimate/17481806#17481806)

# c - 在一个表达式中多次调用一个表达式

> ID：14639658
> 
> 赞同：0
> 
> 时间：2013-02-01T04:20:41.920
> 
> 标签：c

我是一名学生，是 C 的新手。我的作业问题之一如下：

> max 是一个接受两个 int 参数并返回较大的值的函数。已经声明并初始化了四个 int 变量，population1、population2、population3 和 population4。通过调用 max 编写一个表达式（不是语句！），其值是 population1 、 population2 、 population3 和 population4 中最大的一个。（提示：您需要调用 max 三次，并且需要将其中两次调用的返回值作为参数传递给 max 。记住：编写表达式，而不是语句。）

我理解它的逻辑：

使用前两个变量调用函数 max ，该函数将返回两者中较大的一个，然后取该值（以某种方式传递它而不分配给第五个声明的变量）并将其与第三个变量的值进行比较。取第二对中较大的一个（再次在没有新变量的情况下传递它——记住它是一个表达式，而不是一个语句）并将其与第四个值进行比较。但是我无法编写正确的语法。

另外，请了解这是一个 100 级的课程。因此，对于这个特定问题，任何更高级别的内容都不会被接受。没有库是#include(d)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:26:45.427

好吧，您似乎了解如何做到这一点，是的，问题似乎要求您不要将返回值分配给新变量。您基本上可以将 max() 作为另一个 max() 的参数插入，内部 max() 的返回将是外部 max() 参数的 int。由于 c 是严格的，除非函数的返回类型与参数相同，否则它不会编译（在这种情况下，两者都是 int，所以没关系）

```
max(2, max(3, 4)); // inner returns 4, which puts 4 into the outer max, and compares 2 to 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:22:54.917

一个函数，它返回不同的东西，没有任何东西 ( `void`) 可以在表达式中自由使用。表达式是递归定义的，因为它是由子表达式组成的，直到您到达终端符号（作为常量或函数调用）。

所以理解语法并没有什么奇怪的，对的调用在`max`同步上等同于数字常量。

```
int x = 5;
int y = max(5,10);
int z = 5 + 10;
int k = max(5,10) + 3;
int j = max(3 + 2, 8); 
```

这些都是合法的。当然，赋值只是为了清楚起见，因为赋值是一个语句，而不仅仅是一个表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:23:55.723

函数调用可以嵌套。这里有一个提示：

```
max(population1, max(...)) 
```

你能想出正确的代码`...`吗？

# javascript - 更改具有相同 ID 的页面中所有其他选择菜单的选项

> ID：14639659
> 
> 赞同：-3
> 
> 时间：2013-02-01T04:20:45.163
> 
> 标签：javascript

我是 javascript 新手，需要帮助来解决这个问题。

我有三个菜单可供您选择和选项，并且对于您选择的每个菜单，它都会显示一行数据。在每一行（即 3 行 3 个选项）中，您可以使用另一个选择菜单来选择该产品的供应商。我创建了另一个选择，您选择默认提供程序并 onchange 行中的其他菜单更改。我遇到的问题是它们都具有相同的 id，因为当您选择一个选项时，会调用一个函数。我尝试遍历所有选择，并从那些选择中使用 id=x 更改选定选项，但仅适用于使用该 id 找到的第一个选择

```
echo" function pickprovider($name, $idname){ \n";

echo" <select name='$name' id='idname'> \n";
echo" <option>1stprovider </option> \n";
echo"  <option>2ndprovider </option>\n";
echo " </select>\n";
echo" }\n";

echo" function defaultprovider($name, $idname) {\n";
echo" <select name='$name' id='idname' onchange='changeDflt(this);'> \n";
echo " <option>1stprovider </option> \n";
echo " <option>2ndprovider </option> \n";
echo "</select>\n";
echo" }\n";

 echo "<script type='text/javascript'>\n";
 echo "function ChangeDflt(list) { \n";
 echo "var x = list.options[list.selectedIndex].text;\n";
 echo "var allSelects = document.getElementsByTagName('select');\n";
 echo "for (var i = 0; i < allSelects.length; i++) { \n";
 ....
 change selected options for selects 
 echo "}\n";
 echo "}\n";
 echo "</script<\n"; 
```

我不知道每次调用函数时如何更改函数以生成唯一的 id。....当我获得页面中的所有选择元素时，我可以使用“div”标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:21:38.307

我不太确定你想用这些`select`元素来完成什么，但如果你构造你的 PHP 以不同的方式发出 HTML 和 JavaScript，它会变得更容易阅读和更容易编写你的 HTML 和 JavaScript。

```
<?php
    $base_id = "mySelect";      // set the string used as the basis for ids
    $base_name = $base_id;      // set the string used as the basis for names. There's no reason it cannot be the same as the id.

    $select_id = $base_id;      // set a variable to use for the id of the select
    $select_name = $base_name;  // set a variable to use for the name of the select

    // start a loop to emit the select elements
    for ($i = 0; $i < 3; $i++) {
        $select_id = $base_id.$i;       // set the id of the select to the base concatentated with the incrementer variable
        $select_name = $base_name.$i;   // same for the name. Variable value will be substituted on emission.
        echo "
<select name=\"$select_name\" id=\"$select_id\" onchange=\"changeDefault(this);\">
    <option value=\"0\">1st provider</option>
    <option value=\"1\">2nd provider</option>
</select>
";
    }
    // emit the JavaScript
    echo "
<script type='text/javascript'>
var changeDefault = function changeDefault(list) {
    var val = list.options[list.selectedIndex].value,           // get the value of the selected option
        allSelects = document.getElementsByTagName('select'),   // get the rest of the selects
        options = null,                                         // placeholder for option elements
        i = 0,                                                  // incrementer 1
        j = 0;                                                  // incrementer 2
    // change selected options for selects
    for (i = 0; i < allSelects.length; i += 1) {
        // get all option elements that are children of the select element
        options = allSelects[i].getElementsByTagName('option');
        // loop through the option elements
        for (j = 0; j < options.length; j += 1) {
            // set selected to true if the values match and false if they do not
            options[j].selected = options[j].value === val;
        }
    }
};
</script>
    ";
?> 
```

也就是说，语法结构如下：

```
function defaultprovider($name, $idname) {
<select name='$name' id='idname' onchange='changeDflt(this);'>
 <option>1stprovider </option>
 <option>2ndprovider </option>
</select>
} 
```

是完全无效的 JavaScript 代码，不会运行。您可能想查看有关 JavaScript 的教程。我推荐这个：[http](http://www.hunlock.com/blogs/Essential_Javascript_--_A_Javascript_Tutorial) ://www.hunlock.com/blogs/Essential_Javascript_--_A_Javascript_Tutorial 。它从基础开始，比我能更好地解释 JavaScript。

# html - HTML5 表 1 单元格超过两个单元格

> ID：14639661
> 
> 赞同：0
> 
> 时间：2013-02-01T04:20:46.893
> 
> 标签：html, iframe, html-table

我正在用 HTML5 制作一个表格，我想在另外两个单元格上放置一个单元格。我在表格中有 iframe。我还希望它在任何单元格之间没有间距（没有边框或任何东西）谢谢。

到目前为止我的代码：

```
<table border="0">
    <tr>
        <th> 
            <iframe frameborder="100" src="./top.htm" width="900" height="108" scrolling="no" seamless="seamless"></iframe>
        </th>
    </tr>
        <td>
            <iframe src="./left.htm" name="link1" width="160" height="700" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" seamless="seamless"> </iframe>
        </td>
        <td>
            <iframe src="./home.htm" name="link2" width="740" height="700" scrolling="auto" marginwidth="0" marginheight="0" frameborder="0" seamless="seamless"></iframe>
        </td>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:27:29.943

要使单元格跨越 2 列，请使用or[`colspan`](https://developer.mozilla.org/en-US/docs/HTML/Element/td#attr-colspan)中的属性：`td``th`

```
<table border="0">
    <tr>
        <th colspan="2"> 
            <iframe frameborder="100" src="./top.htm" width="900" height="108" scrolling="no" seamless="seamless"></iframe>
        </th>
    </tr>
    <tr>
        <td>
            <iframe src="./left.htm" name="link1" width="160" height="700" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" seamless="seamless"> </iframe>
        </td>
        <td>
            <iframe src="./home.htm" name="link2" width="740" height="700" scrolling="auto" marginwidth="0" marginheight="0" frameborder="0" seamless="seamless"></iframe>
        </td>
    </tr>
</table> 
```

还要确保所有的`td`和`th`标签都在一个`tr`行标签内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:29:19.203

我只是猜测您正在寻找的答案是`colspan`在第一行 - 但目前尚不清楚您的问题实际上是在问什么。

您的表格代码无效，因此您应该先这样做，但基本上您想要做的是这样的：

```
<table cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="2">TOP ROW CONTENT</td>
    </tr>
    <tr>
        <td>LEFT CONTENT</td>
        <td>RIGHT CONTENT</td>
    </tr>
</table> 
```

（`cellpadding`并`cellspacing`设置为 0`table`将删除单元格周围和单元格之间的间距）

# java - 如何添加一个看起来像苹果操作系统按钮的按钮？

> ID：14639663
> 
> 赞同：0
> 
> 时间：2013-02-01T04:21:02.163
> 
> 标签：java, swt, rcp

我正在开发一个 RCP 应用程序，我想在其中添加一个看起来像苹果操作系统按钮的按钮。我想在windows7中看到这个。这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T04:10:47.213

是的，这是可能的，但正如评论者所提到的，绝对不推荐。SWT 不会开箱即用地支持这一点，因为它被设计为在它运行的任何平台上都有本地外观的小部件。

另一方面，Swing 支持许多不同类型的“外观和感觉”，因为它被设计为在您运行的任何平台上看起来都一样。它不会是完美的（同样，它不是原生小部件），但它比编写自己的小部件更容易。

您的选择是：

1.  为您的小部件使用 Swing。[此相关答案](https://stackoverflow.com/a/1056787/836214)和[此外观文档](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#available)是执行此操作的良好起点。可能还有其他可用的外观实现可以做得更好。
2.  [编写一个](http://www.eclipse.org/articles/Article-Writing%20Your%20Own%20Widget/Writing%20Your%20Own%20Widget.htm)外观和感觉与您想要的按钮相似的自定义 SWT 小部件。这几乎是从[Composite](http://help.eclipse.org/indigo/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Composite.html)或 Canvas 扩展而来，并自己实现所有的绘画和行为。

请记住，使用这两种解决方案，如果按钮的本机呈现发生更改，您的按钮将很快在较新版本的操作系统上显得过时。

# c - OpenMP 中的高斯消除 - 无法并行化

> ID：14639664
> 
> 赞同：0
> 
> 时间：2013-02-01T04:21:04.387
> 
> 标签：c, parallel-processing, openmp, gaussian

我正在尝试使用 OpenMP 将高斯消除与旋转并行化。

以下是我编写的代码的相关部分：

```
struct timeval tvBegin, tvEnd;
gettimeofday(&tvBegin, NULL);

for (k=1; k<=n-1; ++k) {

 amax = (double) fabs(a[k][k]) ;
 m = k;
 for (i=k+1; i<=n; i++){   /* Find the row with largest pivot */
           xfac = (double) fabs(a[i][k]);
           if(xfac > amax) {amax = xfac; m=i;}
 }
 if(m != k) {  /* Row interchanges */
             rowx = rowx+1;
             temp1 = b[k];
             b[k]  = b[m];
             b[m]  = temp1;

             for(j=k; j<=n; j++) {
                   temp = a[k][j];
                   a[k][j] = a[m][j];
                   a[m][j] = temp;
             }
  }
    #pragma omp parallel for private(i,j)
    for (i=k+1; i<=n; ++i) {
      xfac = a[i][k]/a[k][k];

           for (j=k+1; j<=n; ++j) {
               a[i][j] = a[i][j]-xfac*a[k][j];
           }
      b[i] = b[i]-xfac*b[k];
   }                 matrix_print_off (n, n, a);}        

}

gettimeofday(&tvEnd, NULL);
printf("\nTime elapsed in ms: %d\n", diff_ms(tvEnd, tvBegin)); 
```

我用 1000*1000 矩阵测试了这段代码。在 4 核机器上运行此代码（通过 diff_ms 测量）所花费的平均时间与此代码的顺序版本（无编译指示）相同（2142 毫秒）。由于这里发生了巨大的并行化，因此不应该是这种情况。你能告诉我我哪里出错了吗？

作为参考，我还附上了下面的 diff_ms 函数。

```
int diff_ms(struct timeval t1, struct timeval t2)
{
    return (((t1.tv_sec - t2.tv_sec) * 1000) + 
        (t1.tv_usec - t2.tv_usec)/1000);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:21:53.917

在您的并行部分内，您有`matrix_print_off()`. 假设您的打印功能是线程安全的，这将显着减少您可以实现的并行度。另外，如果`matrix_print_off()`使用阻塞 IO，那么这个函数的时间可能会支配你函数的其余部分。

# php - 提交表单以更新 MySQL 行后页面不刷新

> ID：14639667
> 
> 赞同：2
> 
> 时间：2013-02-01T04:21:22.560
> 
> 标签：php, mysql, caching, meta-tags

当我在 php 页面上使用表单更新 Mysql 表时，当我点击提交时页面不会自动刷新。我必须点击刷新才能看到更新的行。我试过了，但这也没有任何好主意？

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">

///////////////////////Edited Bottom////////////////////////////////////////////////////////

<?php

include ("../header.php");
include ("../header2.php");

?>
<?php
include('../config.php');
include ('../ac.thumbs.php');

 if ($_GET['sil']) {
    $sil = htmlspecialchars(stripslashes($_GET['sil']));
    mysql_query("DELETE FROM CloseOut WHERE itemNO = $sil limit 1");
    echo "<h1>$sil item nolu kayit silinmistir</h1><br>";
}

    $edit = htmlspecialchars(stripslashes($_GET['edit']));
 $data = mysql_query("SELECT * FROM CloseOut WHERE itemNO=$edit") or die(mysql_error()); 

 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { echo "
<center>
<a href=\"edit.php?sil=$info[itemNO]\"onclick=\"return confirm('Do you really want to erase this entry?')\">[ Delete ]</a><br>
<a href=../../large.php?f=upload/".$info['resim'], $thumblarge .">
<img src=../../small.php?f=upload/".$info['resim'], $thumbsmall .">
</a>";
$editresim = $info[resim];
$editisim = $info[isim];
$editalan1 = $info[alan1];
$editalan2 = $info[alan2];
$editalan3 = $info[alan3];
$editalan4 = $info[alan4];
} 

 //Resimlerin yuklenecegin yer
 $target = "../../upload/";  
 //////////////////////////////////////////////////////////////////////
 ///////////////////////////////Resim1/////////////////////////////////
 //////////////////////////////////////////////////////////////////////
 $target1 = $target . basename( $_FILES['resim1']['name']) ; 
 //Formdan gelen bilgileri almasi icin
 $resim=($_FILES['resim1']['name']); 
 $isim=$_POST['isim1']; 
 $alan1=$_POST['alan11']; 
 $alan2=$_POST['alan21']; 
 $alan3=$_POST['alan31']; 
 $alan4=$_POST['alan41']; 

/////////////Formdaki bos alanlara bos bilgi kayit etmemesi icin////////////////////////

$updates = array();
if (!empty($resim))
  $updates[] = 'resim="'.mysql_real_escape_string($resim).'"';
if (!empty($isim))
  $updates[] = 'isim="'.mysql_real_escape_string($isim).'"';
if (!empty($alan1))
  $updates[] = 'alan1="'.mysql_real_escape_string($alan1).'"';
if (!empty($alan2))
  $updates[] = 'alan2="'.mysql_real_escape_string($alan2).'"';
if (!empty($alan3))
  $updates[] = 'alan3="'.mysql_real_escape_string($alan3).'"';
if (!empty($alan4))
  $updates[] = 'alan4="'.mysql_real_escape_string($alan4).'"';
$updates = implode(', ', $updates);

/////////////////////////////////////////////////////////////////////////////////////////
 //update etmesi icin
if(move_uploaded_file($_FILES['resim1']['tmp_name'], $target1)) 
{   
mysql_query("UPDATE CloseOut SET $updates WHERE itemNO='$edit' ");
echo "Tebrikler, ". basename( $_FILES['resim1']['name']). " isimli dosya yuklendi ve database'e basariyla islendi!<br>"; 
 } 

?>

<br>
<center> 
<table width="900" border="5" style="background-color:white; "bordercolor="#000000">
    <tr>
        <td width="120" height="50" bgcolor= "545454"><b>RESIM</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>NAME</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>CATAGORY</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>QUANTITY</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>LOCATION</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>PRICE</b></td>
    </tr>
    <tr>
<form enctype="multipart/form-data" method="post" action="">
<td><input type="file" name="resim1" value="<?php echo $editresim;?>"> </td>
<td><input type="text" name="isim1" value="<?php echo $editisim;?>"> </td>
<td><input type="text" name="alan11" value="<?php echo $editalan1;?>"> </td>
<td><input type="text" name="alan21" value="<?php echo $editalan2;?>">  </td>
<td><input type="text" name="alan31" value="<?php echo $editalan3;?>"></td>
<td><input type="text" name="alan41" value="<?php echo $editalan4;?>"></td>
</tr>

<td colspan="6"><center><input type="submit"></center></td>

</form>
</table>
</center> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:49:57.047

你现在能看到吗？`$editresim`值为`$info[resim]`。

当您提交表单时，`$info[resim]`是**当前**数据库值。数据库在下面/之后更新。

提交时，您仍然会看到提交的值实际放入数据库之前的先前数据。因此，您需要重新打开该页面才能查看更新的数据。

修复它的一种方法是，您应该将更新数据的代码移到顶部，在您之前`SELECT * FROM CloseOut WHERE itemNO=$edit`，以便查询将为您提供最新/更新的数据。

很抱歉没有提供示例代码，但恐怕我会犯一些可能会增加混乱的小错误。如果您尝试自己解决它实际上会更好。

祝你好运！

ps：你的逻辑

```
Get data from db

Put to data to VAR

If form is submitted:

    Update data in DB

Show VAR // This is *not* the latest submitted data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:58:58.327

问题是您在获得信息**后**更新数据库。

把这部分代码

```
//Resimlerin yuklenecegin yer
 $target = "../../upload/";  
 //////////////////////////////////////////////////////////////////////
 ///////////////////////////////Resim1/////////////////////////////////
 //////////////////////////////////////////////////////////////////////
 $target1 = $target . basename( $_FILES['resim1']['name']) ; 
 //Formdan gelen bilgileri almasi icin
 $resim=($_FILES['resim1']['name']); 
 $isim=$_POST['isim1']; 
 $alan1=$_POST['alan11']; 
 $alan2=$_POST['alan21']; 
 $alan3=$_POST['alan31']; 
 $alan4=$_POST['alan41']; 

/////////////Formdaki bos alanlara bos bilgi kayit etmemesi icin////////////////////////

$updates = array();
if (!empty($resim))
  $updates[] = 'resim="'.mysql_real_escape_string($resim).'"';
if (!empty($isim))
  $updates[] = 'isim="'.mysql_real_escape_string($isim).'"';
if (!empty($alan1))
  $updates[] = 'alan1="'.mysql_real_escape_string($alan1).'"';
if (!empty($alan2))
  $updates[] = 'alan2="'.mysql_real_escape_string($alan2).'"';
if (!empty($alan3))
  $updates[] = 'alan3="'.mysql_real_escape_string($alan3).'"';
if (!empty($alan4))
  $updates[] = 'alan4="'.mysql_real_escape_string($alan4).'"';
$updates = implode(', ', $updates);

/////////////////////////////////////////////////////////////////////////////////////////
 //update etmesi icin
if(move_uploaded_file($_FILES['resim1']['tmp_name'], $target1)) 
{   
mysql_query("UPDATE CloseOut SET $updates WHERE itemNO='$edit' ");
echo "Tebrikler, ". basename( $_FILES['resim1']['name']). " isimli dosya yuklendi ve database'e basariyla islendi!<br>"; 
 } 
```

**就在之前：**

```
$edit = htmlspecialchars(stripslashes($_GET['edit'])); 
```

# ruby - “请安装 mysql2 适配器”

> ID：14639670
> 
> 赞同：2
> 
> 时间：2013-02-01T04:21:29.017
> 
> 标签：ruby, gem, bundler, redmine, mysql2

我正在尝试遵循这个[Redmine 设置教程](http://www.redmine.org/projects/redmine/wiki/RedmineInstallOSX)。当我开始启动服务器时，我输入`sudo rails server`并收到以下错误：

```
Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (mysql2 is not part of the bundle. Add it to Gemfile.) (LoadError) 
```

我的 Gemfile 的相关部分内容如下：

```
....
if File.exist?(database_file)
database_config = YAML::load(ERB.new(IO.read(database_file)).result)
adapters = database_config.values.map {|c| c['adapter']}.compact.uniq
if adapters.any?
  adapters.each do |adapter|
    case adapter
    when /mysql/
      gem "mysql", "~> 2.8.1", :platforms => [:mri_18, :mingw_18]
      gem "mysql2", "~> 0.3.11", :platforms => [:mri_19, :mingw_19]
      gem "activerecord-jdbcmysql-adapter", :platforms => :jruby
... 
```

并且 Gemfile.lock 包含 mysql2：

```
...
multi_json (1.5.0)
mysql (2.8.1)
mysql2 (0.3.11)
net-ldap (0.3.1)
... 
```

我的 database.yml 文件包括以下内容：

```
...
production:
  adapter: mysql2
  database: redmine
  host: localhost
  username: ****
  password: ****

development:
  adapter: mysql2
  database: redmine_development
  host: localhost
  username: ****
  password: ****
  encoding: utf8
... 
```

运行`bundle install`好像成功了，但是输出中没有列出mysql2，`which mysql2`什么都不返回，又`bundle show mysql2`返回`Could not find gem 'mysql2' in the current bundle.`

我已经卸载并重新安装了 mysql2 gem，每次都取得了明显的成功。

我已经阅读了关于其他 stackoverflow 问题的类似问题的描述，但他们的解决方案都没有解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:58:53.300

You will get this error if `mysql2` is not included in the `Gemfile.lock` file that's generated by `bundle`. While the Gemfile is used to manage dependencies, the lock file is what is actually loaded by the rails app.

That's a more verbose Gemfile than I have seen before (I'm not generally familiar with Redmine)- where is this from? It doesn't appear to be from the most recent stable source. If you know you'll be using mysql2, I don't think there's any reason you need your Gemfile to parse your database config. For whatever reason, it's not properly reading the database.yml file.

Try adding `gem 'mysql2'` outside any blocks or loops and run `bundle` again.

# sql-server-2005 - 如何从 Sql Server 2005 中获取过滤记录？

> ID：14639673
> 
> 赞同：0
> 
> 时间：2013-02-01T04:22:04.710
> 
> 标签：sql-server-2005

考虑到我有两张桌子。

一个是“Table1”，如下所示。

![在此处输入图像描述](../Images/3c600cd8532efd63d0f29e30abe96cc5.png)

另一个表是“Table2”，如下所示。

![在此处输入图像描述](../Images/8f238e0459301daaef6f1449200aba53.png)

现在我需要的是，我需要 Table1 中的所有记录，那些 ID 不在 Table2 的参考列中。

请指导我如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:34:55.503

如何使用您当前的模式来做到这一点（不可能使用索引）：

```
SELECT Table1.*
FROM Table1
WHERE NOT EXISTS
(
    SELECT 1
    FROM Table2
    WHERE CONCAT(',', Table2.Reference, ',') LIKE CONCAT('%,', Table1.ID, ',%')
) 
```

它的工作原理是`Reference`用逗号将列中的每个值完全包裹起来。你最终会`,2,3,`得到`,7,8,9,`你的样本数据。然后您可以安全地`,<Table1.ID>,`在该字符串中搜索。

* * *

如何真正做到：

规范化您的数据库，并摆脱那些丑陋、无用的逗号分隔列表。

将您的 table2 修复为：

```
编号 | 参考
------+------------
    1 | 2
    1 | 3
    2 | 7
    2 | 8
    2 | 9

```

并添加一个 table2Names 为：

```
编号 | 姓名
------+---------
    1 | 测试
    2 | 测试 2

```

然后你可以简单地做：

```
SELECT Table1.*
FROM Table1
WHERE NOT EXISTS(SELECT 1 FROM Table2 WHERE Table2.Reference = Table1.ID) 
```

# javascript - 在 JavaScript 中获取多个文本框 ID

> ID：14639674
> 
> 赞同：0
> 
> 时间：2013-02-01T04:22:08.357
> 
> 标签：javascript, asp.net, textbox, focus, placeholder

我这里有 ASP.NET 格式的代码

```
<asp:TextBox ID="BuildingNameTextBox" runat='server' placeholder="Building Name" Text='<%# Bind("BuildingName") %>' />
<asp:TextBox ID="AddressTextBox" runat="server" placeholder="Example: 8th Floor, Sun Life Centre, 5th Avenue corner Rizal Drive, Fort Bonifacio Taguig City" Text='<%# Bind("Address") %>' />
<asp:TextBox ID="CityTextBox" placeholder="Use the autocomplete." runat="server" Text='<%# Bind("City") %>' />
<asp:TextBox ID="RegionTextBox" placeholder="Use the autocomplete." runat="server" Text='<%# Bind("Region") %>' class="subMarkets"/> 
```

和这段javascript代码

```
$("#BuildingNameTextBox").data("holder", $("#BuildingNameTextBox").attr("placeholder"));
            $("input").focusin(function () {
                $(this).attr("placeholder", "");
            });
            $("input").focusout(function () {
                $(this).attr("placeholder", $(this).data("holder"));
            }); 
```

javascript的功能是在文本框处于焦点时删除占位符并在不处于焦点时恢复相应文本框的文本我似乎找不到为后续文本框恢复适当文本的方法。

例如，当我选择 Building 文本框时，文本框的下一个占位符将被 BuildingTextBox（建筑物）的占位符替换。

我需要找到一种方法使占位符恢复到适当的文本框。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:52:46.647

一旦输入成为焦点，占位符将被删除，如果您输入任何文本，它将不再显示占位符！

因此，即使每次“#buildingnametextbox”失去焦点时都更改占位符值，它也无用，因为您不会使用它。让我们假设如果用户将该字段留空......这也会清空占位符，我认为你不希望这种情况发生:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:26:39.193

添加一个在准备好填充所有文件的文档上调用的方法，而不仅仅是#buildingnametextbox：

```
$("input").each(function () {
    $(this).data("holder", $(this).attr("placeholder"));
}); 
```

或者

在您的标记中，添加数据值：

```
<asp:TextBox ID="BuildingNameTextBox" runat='server' data-holder="Building Name" placeholder="Building Name" Text='<%# Bind("BuildingName") %>' />
<asp:TextBox ID="AddressTextBox" runat="server" data-holder="Example: 8th Floor, Sun Life Centre, 5th Avenue corner Rizal Drive, Fort Bonifacio Taguig City" placeholder="Example: 8th Floor, Sun Life Centre, 5th Avenue corner Rizal Drive, Fort Bonifacio Taguig City" Text='<%# Bind("Address") %>' />
<asp:TextBox ID="CityTextBox" data-holder="Use the autocomplete." placeholder="Use the autocomplete." runat="server" Text='<%# Bind("City") %>' />
<asp:TextBox ID="RegionTextBox" data-holder="Use the autocomplete." placeholder="Use the autocomplete." runat="server" Text='<%# Bind("Region") %>' class="subMarkets"/> 
```

# windows - Windows 2008 R2 系统原生配置

> ID：14639676
> 
> 赞同：1
> 
> 时间：2013-02-01T04:22:26.567
> 
> 标签：windows, windows-server-2008-r2

我刚刚在 VM 上安装了 Windows 2008 R2 Enterprise x64，但我没有看到 C:\Windows\Sysnative 文件夹。

我是否需要执行一些手动步骤来启用重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:29:34.147

Sysnative 是一个虚拟目录，不是真实目录，它只能从 32 位应用程序中看到。Explorer 是 64 位的，因此您不会在此处看到它。

从[文件系统重定向器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)：

> 32 位应用程序可以通过将 %windir%\Sysnative 替换为 %windir%\System32 来访问本机系统目录。WOW64 将 Sysnative 识别为用于指示文件系统不应重定向访问的特殊别名。这种机制灵活且易于使用，因此，建议使用绕过文件系统重定向的机制。请注意，64 位应用程序不能使用 Sysnative 别名，因为它是虚拟目录而不是真实目录。

# asp.net-mvc-4 - 我的视图不绑定viewModel MVC4

> ID：14639678
> 
> 赞同：0
> 
> 时间：2013-02-01T04:22:37.480
> 
> 标签：asp.net-mvc-4, model-binding, html.beginform

抱歉，如果我没有看到任何错误，但我的 View 没有绑定我的 ViewModel。我调试了很多次，断点在action line时模型中没有Data。该项目的其他视图工作正常。

行动：

```
[HttpPost]
public ActionResult Index_Funcionario(FuncionariosViewModel viewModel)
{
... 
```

看法

```
@model ZebraStudio.Models.FuncionariosViewModel

@{
ViewBag.Title = "Index_Funcionario";
}

<div class="main-field">
<div class="linha-cabecalho">
    <div class="aba">Consulta</div>
    <div class="area">Funcionários > Consultar</div>
</div>
<div class="sub-field">

    <div class="search-field">
        @using (Html.BeginForm())
        { 

            <div class="floatleft">
            @Html.RadioButton("TipoFiltro", "1", new { @class = "radioFloat" })
            <div >Código: @Html.TextBoxFor(model => model.cod_Usuario, new { @class = "customeditor"})</div>
            </div>

            <div class="floatleft">
            <div class="radioFloat">@Html.RadioButton("TipoFiltro", "2", new { @class = "radioFloat" })</div> 
            <div>Nome: @Html.TextBoxFor(model => model.nome, new { @class = "customeditor"})</div>
            </div>

            <div class="floatleft">
            @Html.RadioButton("TipoFiltro", "3", true, new { @class = "radioFloat" })
            <div class="inline">Listar Todos.</div>
            </div>
                <br />

            <input type="submit" value="Buscar" class="searchbutton"/>

        }
        </div>

    <table class="search-result">
        <tr>
            <th>Código</th>
            <th>Nome</th>
            <th>Email</th>
            <th>Tipo de Usuário</th>
            <th>Ações</th>
        </tr>
        @foreach (var usuario in Model.usuarios)
        {
            <td>@usuario.UserId</td>
            <td>@usuario.Nome</td>
            <td>@User.Identity.Name</td>
            <td>@foreach (var role in Roles.GetRolesForUser())
                {
                    @role
                }
            </td>
            <td></td>
        }

    </table>

</div> 
```

视图模型

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace ZebraStudio.Models
{
public class FuncionariosViewModel
{
    public IEnumerable<Usuario> usuarios;

    public Usuario usuario;

    public string nome;

    [DataType(DataType.EmailAddress)]
    public string Email;

    public string password;

    public int opcao_Selecionada;

    public int cod_Usuario;

}
} 
```

哪里不对了？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:24:30.430

ASP.Net MVC 模型绑定不支持字段。
您需要将它们更改为属性。

您可以使用自动实现的属性：

```
public string Email { get; set; } 
```

# android - Android 中的 android:layout_alignLeft 是什么？

> ID：14639689
> 
> 赞同：7
> 
> 时间：2013-02-01T04:25:15.303
> 
> 标签：android, android-relativelayout

我无法理解 android:layout_alignLeft 属性。我是 android 开发的新手。

```
<RelativeLayout 
        android:id="@+id/r5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/r4"

        > <TextView
              android:id="@+id/tv3"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_centerHorizontal="true"
              android:layout_centerVertical="true"
              android:layout_marginTop="10dp"
               android:textSize="16sp"
              android:textColor="#663300"
              android:text="TextView"

               />

          <TextView
              android:id="@+id/tv5"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"            
              android:layout_marginTop="10dp"

              android:layout_alignLeft="@id/tv3"
               android:textSize="16sp"
              android:textColor="#663300"
              android:text="TextView"

               />
         <TextView
              android:id="@+id/tv6"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_toRightOf="@id/tv5"
              android:layout_marginTop="10dp"
               android:textSize="16sp"
              android:textColor="#663300"
              android:text="TextView"

               />

          </RelativeLayout> 
```

谁能解释清楚？ android:layout_Leftof 和 android:layout_alignLeft 有什么区别？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T04:28:14.653

`layout_alignLeft`使视图的左边缘与您使用其 ID 作为参数的视图的左边缘匹配。

`layout_toLeftOf`使您的视图放置在您使用其 ID 的视图的左侧（右边缘将与另一个视图的左边缘对齐）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:30:39.063

ALIGN_LEFT 将一个孩子的左边缘与另一个孩子的左边缘对齐的规则。

LEFT_OF 将一个孩子的右边缘与另一个孩子的左边缘对齐的规则。

```
in your above example the align left is used in a way below.

 tv5 textview is align left of the tv3 layout in android. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:45:12.817

这两个参数都用于相对布局。说到`android:layout_Leftof`，这个参数使您的视图被放置在您作为值传递的 id 的视图的“左侧”（不对齐）。另一方面`android:layout_alignLeft`，您将从同一点开始查看（在这种情况下从左侧开始） ) 您已通过 id 的视图开始的位置。同样在这种情况下，您的视图可能会与另一个视图重叠（因为有时它用于将视图保留在另一个视图中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-09T15:42:55.777

android:layout_alignLeft 对齐左侧。（图一）

android:layout_toLeftOf 将一个布局对齐到另一个布局的左侧。（图二）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#D6D6D6"
    android:orientation="vertical">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <LinearLayout
            android:layout_width="400dp"
            android:layout_height="400dp"
            android:layout_alignLeft="@+id/ll1"
            android:background="#00FF00"
            android:orientation="vertical">  </LinearLayout>

            <LinearLayout
                android:id="@+id/ll1"
                android:layout_width="200dp"
                android:layout_alignParentRight="true"
                android:layout_height="200dp"
                android:background="#00FFFF"
                android:orientation="vertical"></LinearLayout>

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp">

        <LinearLayout
            android:layout_width="400dp"
            android:layout_height="400dp"
            android:layout_toLeftOf="@+id/ll2"
            android:background="#00FF00"
            android:orientation="vertical"></LinearLayout>

            <LinearLayout
                android:id="@+id/ll2"
                android:layout_width="200px"
                android:layout_height="200px"
                android:layout_alignParentRight="true"
                android:background="#00FFFF"
                android:orientation="vertical">
        </LinearLayout>

    </RelativeLayout>

</LinearLayout> 
```

[![在此处输入图像描述](../Images/e3b66e3c03102ddc6c1d0296017e89e1.png)](https://i.stack.imgur.com/hqBiq.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T04:30:47.877

android:layout_alignLeft 用于例如：您正在使用 TextView。让我们举个例子。那里有两个

textview.ur 第一个文本 id 为 @+id/t1。下一个 textview 说 t2is @+id/t2。如果你想放置

第一个文本视图左侧的第二个文本视图，您可以参考 t2 中的 id 即

android:layout_Leftof="@+id/t1"

# in-app-purchase - RequestProductPurchaseAsync 是否支持 Consumable 应用内购买？

> ID：14639692
> 
> 赞同：3
> 
> 时间：2013-02-01T04:25:31.227
> 
> 标签：in-app-purchase, windows-phone-8

我正在我的应用中添加应用内购买支持。它说有两种类型的应用内产品：耐用和消耗品。没关系。

但在这里：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh967814.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh967814.aspx)我们可以阅读： ProductReceipt 元素的**ProductType**属性：确定产品类型。**目前仅支持 Durable 的值。**

谁能解释一下这是什么意思？o_o

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T21:44:21.020

在“收据”部分检查[这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949%28v=vs.105%29.aspx)，它说类型可以是耐用或消耗品。

# node.js - 使用节点 ddp-client 从节点插入流星集合

> ID：14639700
> 
> 赞同：16
> 
> 时间：2013-02-01T04:26:01.843
> 
> 标签：node.js, meteor

我正在尝试通过 node.js 将一些系统日志数据流式传输到 Meteor 集合中。它工作正常，但是 ~10 秒的 Meteor 客户端轮询周期对我来说太长了——我希望它是 ~1 秒。

通过控制台的客户端集合插入速度很快，并且所有客户端都会立即更新，因为它使用 DDP。但是从服务器端直接插入 MongoDB 取决于客户端的轮询周期。

因此，目前看来，我只能使用 DDP 从我的节点守护程序插入更新。

在 ddp-client 包示例中，我可以看到我订阅的消息，但我看不到如何通过 DDP 和 node.js 将新消息实际发送**到**Meteor 集合中，从而更新所有客户端立刻...

有什么例子或指导吗？我将不胜感激 - 作为 node 和 Meteor 的新手，我很快就达到了我的极限。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-01T20:46:29.617

好的，在仔细查看了一些代码并意识到我完全是在想事情之后，我得到了它。该协议实际上非常简单，是 RPC 之类的东西。

我很高兴地报告它绝对可以解决服务器端插入延迟（手动 Mongo 插入需要几秒钟来轮询/更新客户端）。

如果你通过 DDP，你会得到所有你已经了解并喜欢 Meteor 的实时（ish）优点 :)

为了后代，并希望帮助推动其他一些人使用有趣的用例，这里是设置。

***用例***

我正在将一些自定义系统日志数据假脱机到 node.js 守护程序中。然后这个守护进程解析数据并将其插入 Mongo。我的想法是为我的第一个 Meteor 实验提出一个基于浏览器的实时报告项目。

所有这些都运行良好，但是因为我是在Meteor**之外**插入 Mongo ，所以客户端必须每 10 秒进行**一次轮询。**在另一篇 SO 帖子中， [@TimDog 建议](https://stackoverflow.com/questions/14637302/meteor-server-side-db-insert-delays)我为此查看 DDP，他的建议看起来效果很好。

我已经在我的系统上对其进行了测试，现在我可以通过 node.js 异步应用程序立即更新所有 Meteor 客户端。

**设置** 这里的基本思想是使用 DDP“调用”方法。它需要一个参数列表。在 Meteor 服务器端，您导出一个 Meteor 方法来使用这些方法并执行您的 MongoDB 插入。其实很简单：

第 1 步：npm 安装 ddp

第 2 步：转到您的 Meteor 服务器代码并在 Meteor.methods 中执行以下操作：

```
Meteor.methods({

'push': function(k,v) { // k,v will be passed in from the DDP client.
    console.log("got a push request")
    var d = {};
    d[k] = parseInt(v);
    Counts.insert(d, function(err,result){ // Now, simply use your Collection object to insert.
        if(!err){ 
            return result
            }else{
            return(err)
            }
        });
     }
  }); 
```

现在我们需要做的就是使用客户端库从我们的 node.js 服务器调用这个远程方法。这是一个示例调用，它本质上是 example.js 调用的直接副本，稍作调整以挂钩我们刚刚导出的新“push”方法：

```
ddpclient.call('push', ['hits', '1111'], function(err, result) {
console.log('called function, result: ' + result);
}) 
```

通过 Meteor 服务器运行此代码插入，这反过来会立即更新连接到我们的客户端 :)

我确定我上面的代码并不完美，所以请提出建议。我对整个生态系统很陌生，所以在这里有很多学习的机会。但我确实希望这有助于为一些人节省一些时间。现在，回到专注于让我的模板与所有这些实时数据一起闪耀 :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-14T11:00:32.373

根据[这个截屏视频](https://www.eventedmind.com/posts/meteor-anatomy-of-a-collection-insert)，可以简单地调用集合声明的流星方法。在您的情况下，代码如下所示：

```
ddpclient.call('/counts/insert', [{hits: 1111}], function(err, result) {
    console.log('called function, result: ' + result);
}) 
```

# python - python - 从另一个文件打开，查找，写入文件

> ID：14639702
> 
> 赞同：0
> 
> 时间：2013-02-01T04:26:05.580
> 
> 标签：python, file, seek

我想我做错了什么。
我不确定它是什么，但我不断得到`TypeError: expected a character buffer object`

我只想打开一个文件，寻找某些偏移量并覆盖patch1和patch2中的数据。

这是我正在使用的代码，请帮助我并告诉我我做错了什么：

```
patch1 = open("patch1", "r");
patch2 = open("patch2", "r");
main = open("patchthis.bin", "w");

main.seek(0xC0010);
main.write(patch1);
main.seek(0x7C0010);
main.write(patch1);
main.seek(0x40000);
main.write(patch2);
main.close(); 
```

在使用 python 处理文件时，我是菜鸟，尽管我已经阅读过它。
我真的很想开始学习更多，但我需要一些很好的例子，任何帮助肯定会不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:32:01.193

您正在尝试将文件对象写入文件，而不是字符串。尝试：

```
patch1_text = patch1.read()
main.write(patch1_text) 
```

等等。

对文件进行操作时也使用 with 语句：

```
with open('patch1', 'r') as patch1:
    patch1_text = patch1.read()
    patch1.close() 
```

并且不要在行尾使用分号！！！

# matlab - 如何仅选择最大像素值以从 matlab 中的 2 个图像创建新的相同大小的图像？

> ID：14639712
> 
> 赞同：0
> 
> 时间：2013-02-01T04:26:59.453
> 
> 标签：matlab, image-processing

假设我有 2 个大小相同的图像，并且这 2 个图像具有相似的像素值，例如

```
img1 = [1 5 1 5,7 2 7 2, 3 9 3 9,8 4 8 4]; 
img2 = [5 1 5 1,2 7 2 7, 9 3 9 3,4 8 4 8]; 
```

`img1`我只需要从和中选择最大值`img2`。我想要新的形象

```
img3 = [5 5 5 5,7 7 7 7, 9 9 9 9,8 8 8 8]; 
```

简而言之，我想比较 and 中的所有像素，`img1`并`img2`创建包含来自and`img3`的最大值的新像素。`img1``img2`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T04:55:52.797

我肯定错过了什么。只是有什么问题：

```
 img3 = max(img1, img2); 
```

根据文档：

```
 MAX(X,Y) returns an array the same size as X and Y with the
    largest elements taken from X or Y. Either one can be a scalar. 
```

所以它应该按预期工作。

好吧，由于每个人都想出了这些复杂的解决方案，所以我不得不自己尝试看看。

```
 >> img1 = [1 5 1 5,7 2 7 2, 3 9 3 9,8 4 8 4];
    >> img2 = [5 1 5 1,2 7 2 7, 9 3 9 3,4 8 4 8];
    >> img3 = max(img1,img2);
    >> img3

    img3 =

 5     5     5     5     7     7     7     7     9     9     9     9     8     8     8     8 
```

编辑：必须自己检查下面的评论（；而不是，）：

```
 >> img1 = [1 5 1 5;7 2 7 2; 3 9 3 9;8 4 8 4];
    >> img2 = [5 1 5 1;2 7 2 7; 9 3 9 3;4 8 4 8];
    >> img3 = max(img1,img2);
    >> img3

    img3 =

         5     5     5     5
         7     7     7     7
         9     9     9     9
         8     8     8     8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T04:44:43.743

img3 = img1 .* (img1 > img2) + img2 .* (img2 > img1);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:30:07.653

您可以在两个 2D 数组中创建一个 3D 矩阵：

```
a(:,:,1)=img1;
a(:,:,2)=img2; 
```

然后

```
ans=max(a,[],3); 
```

# java - jflex中的元音正则表达式

> ID：14639715
> 
> 赞同：0
> 
> 时间：2013-02-01T04:27:02.870
> 
> 标签：java, regex, jflex

所以我使用 jflex 做了一个练习，它是关于从包含超过 3 个元音的输入文本文件中计算单词的数量。我最终要做的是为单词定义一个标记，然后创建一个接收此文本作为输入的 java 函数，并检查每个字符。如果它是元音，我将计数器加起来，然后检查它是否大于 3，如果是，我将单词数量的计数器加起来。

我想知道的是，如果有一个正则表达式可以匹配一个超过 3 个元音的单词。我认为这将是一个更清洁的解决方案。提前致谢。

代币

```
 Letra = [a-zA-Z]
   Palabra = {Letra}+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:43:42.383

很简单。如果您想检查一个单词是否包含至少 3 个元音，请使用此选项。

```
(?i)(?:[a-z]*[aeiou]){3}[a-z]* 
```

你只关心它包含至少 3 个元音，所以其余的可以是任何字母字符。上面的正则表达式可以在`String.matches`和`Matcher`循环中工作，因为有效单词（至少包含 3 个元音）不能是无效单词（包含少于 3 个元音）的子字符串。

* * *

不可能，但是对于辅音，您可以使用字符类交集，这是 Java regex 的独特功能`[a-z&&[^aeiou]]`。因此，如果您想**准确**检查3 个元音（对于`String.matches`）：

```
(?i)(?:[a-z&&[^aeiou]]*[aeiou]){3}[a-z&&[^aeiou]]* 
```

如果您在 Matcher 循环中使用它：

```
(?i)(?<![a-z])(?:[a-z&&[^aeiou]]*[aeiou]){3}[a-z&&[^aeiou]]*(?![a-z]) 
```

请注意，我必须使用环视来确保匹配的字符串（正好 3 个元音）不是无效字符串的一部分（当它有超过 3 个元音时可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:18:33.267

由于您自己编写了一个 Java 方法，因此可以按以下方式完成：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class VowelChecker {
    private static final Pattern vowelRegex = Pattern.compile("[aeiouAEIOU]");

    public static void main(String[] args) {
        System.out.println(checkVowelCount("aeiou", 3));
        System.out.println(checkVowelCount("AEIWW", 3));
        System.out.println(checkVowelCount("HeLlO", 3));
    }

    private static boolean checkVowelCount(String str, int threshold) {
        Matcher matcher = vowelRegex.matcher(str);
        int count = 0;
        while (matcher.find()) {
            if (++count > threshold) {
                return true;
            }
        }
        return false;
    }

} 
```

这里`threshold`定义了您正在寻找的元音的数量（因为您正在寻找大于 3，因此在`main`方法中为 3）。输出如下：

```
true
false
false 
```

希望这可以帮助！

谢谢，
EG

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:33:40.400

我最终使用了我想出的这个正则表达式。如果有人有更好的随时发布

```
 Cons = [bcdBCDfghFGHjklmnJKLMNpqrstPQRSTvwxyzVWXYZ]
      Vocal = [aeiouAEIOU]
       Match = {Cons}*{Vocal}{Cons}*{Vocal}{Cons}*{Vocal}{Cons}*{Vocal}({Cons}*{Vocal}*|{Vocal}*{Cons}*) | {Vocal}{Cons}*{Vocal}{Cons}*{Vocal}{Cons}*{Vocal}({Cons}*{Vocal}*|{Vocal}*{Cons}*) 
```

# iphone - 当repeatCount 为huge_val 时，我如何知道动画（CAKeyFrameAnimation）完成时的迭代次数？

> ID：14639717
> 
> 赞同：1
> 
> 时间：2013-02-01T04:27:15.127
> 
> 标签：iphone, cakeyframeanimation

我正在开发一款赛车游戏，每辆车都在一条路径上行驶。由于比赛是基于时间的，我将 repeatCount 设置为错误值。现在的问题是我无法计算比赛结束时完成了多少圈（换句话说动画重复了多少次）。我尝试将 CGIntersectRect 用于汽车的框架和计时器函数中的某个起点，因为它永远不准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:41:42.070

我可以自己解决它，可能不是最好的答案。

我在起点使用 CaLayer 并检查汽车的框架和该层是否也在计时器中相交。这个问题会随着时间的推移而继续存在，因为它会多次相交，从而给出图像的宽度和高度以及计时器频率。然后我用一面旗帜在相交时只计算圈数一次。

-谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:44:03.810

我认为你可以利用`Animation Delegates`

> CAAnimation 类提供了在动画开始和停止时通知委托对象的方法。
> 
> 如果动画指定了委托，它将接收 animationDidStart: 消息，传递开始的动画实例。当动画停止时，代理会收到 animationDidStop:finished: 消息，传递停止的动画实例和指示动画是成功完成其持续时间还是手动停止的布尔值。

在`animationDidStart:`你可以放置计数器来测量迭代。每次调用递增这个计数器会给你迭代次数

# web - 托管多个没有 www 的网站地址使用主机标头转到错误的网站

> ID：14639718
> 
> 赞同：0
> 
> 时间：2013-02-01T04:27:20.380
> 
> 标签：web, header, host

我托管 2 个网站，每个网站都是使用 2 个主机绑定创建的。具有相同的 IP 和不同的主机名“www.host.com”和“host.com”。

称他们为 website1 和 website2

当我在浏览器中输入 www.website1.com 或 website1.com 时，我被定向到 website1

当我在浏览器中输入 www.website2.com 时，我被定向到 website2

当我在浏览器中键入 website2.com 时，我被定向到 website1 而不是 website2

如果没有 www 转到 website2，我无法弄清楚如何制作 website2.com

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:00:20.733

假设您的服务器是 linux / apache，您可以使用重写来解决问题。如果您的站点上已有 .htaccess 文件，请添加以下内容：

```
RewriteEngine On

#redirect website2.com to www.website2.com

RewriteCond %{HTTP_HOST} !^www\.website2\.com$ [NC]
RewriteRule ^(.*)$ http://www.website2.com/$1 [L,R=301] 
```

如果您还没有，请在与您的主页相同的目录级别创建一个新的 .htaccess 文件。权限 RW- R-- R-- 应该是好的。

[如果您是新手，这里有更多](http://wiki.lunarpages.com/Create_htaccess)关于如何创建 .htaccess 文件的信息。

祝你好运！

# google-bigquery - 访问权限浏览器工具 - Bigquery 导出

> ID：14639719
> 
> 赞同：0
> 
> 时间：2013-02-01T04:27:21.480
> 
> 标签：google-bigquery

我不确定我做错了什么或者我正在寻找的功能不受支持。

我的用户有权访问该项目的“可以查看”。我们所有的数据都存在于数据集-A 中。我在同一个项目中创建了一个新数据集（数据集-B），并明确授予他们创建表的权限。

但是，由于某种原因，他们仍然无权将查询结果导出到新数据集。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:43:01.773

你所描述的应该有效。只要用户在数据集上至少具有写入权限，他们就应该能够在该数据集中创建表。

您能否提供数据集名称、项目名称以及您尝试为其添加权限的用户？您能否描述一下用户是如何尝试创建表格的？

# java - android标签组活动中的后退按钮功能

> ID：14639720
> 
> 赞同：0
> 
> 时间：2013-02-01T04:27:23.960
> 
> 标签：java, android, back-button

我必须在 android 应用程序中开发后退按钮功能。

我在标签组活动中有 4 个标签。在这里，我必须创建第 4 个选项卡是返回。

这里我必须到第 4 个选项卡意味着第 4 个选项卡是转到我以前的活动。

这些是我的标签组活动代码：

```
intent = new Intent().setClass(this, MainGroupActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabhost.newTabSpec("Home").setIndicator("Home", 
                    res.getDrawable(R.drawable.arrow_up_float))
                    .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, CartGroupActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabhost
            .newTabSpec("Cart")
            .setIndicator("Cart",
                    res.getDrawable(R.drawable.arrow_down_float))// debttab moretab
                                                        // expensestab
            .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, LoginGroupActivty.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabhost.newTabSpec("Login").setIndicator("Login",
                   res.getDrawable(R.drawable.btn_default_small))
                   .setContent(intent);
    tabhost.addTab(spec);
    intent = new Intent().setClass(this, GoBackActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabhost
            .newTabSpec("Go Back")
            .setIndicator("Go Back",
                    res.getDrawable(R.drawable.arrow_down_float))// debttab moretab
                                                        // expensestab
            .setContent(intent);
    tabhost.addTab(spec); 
```

**这里 MainGroupActivity 有 2 个子类...我的意思是主组活动有列表视图。我必须单击任何列表意味着它是转到第一个子活动并在下一个屏幕中显示带有 4 个选项卡（选项卡组）的列表视图。现在我有单击第一个子视图中的任何列表意味着它转到第二个子视图并显示带有 4 个选项卡（选项卡组）的列表视图。现在我希望在第二个子视图中单击第四个选项卡（返回）意味着它转到上一个活动（第一个子视图）** ..我能怎么做 ？？？请帮我...

我如何编写第 4 个选项卡的条件。请给我用于这些目的的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:16:00.123

您可以使用

```
Intent intent = new Intent( v.getContext(), YourOtherActivity.class);
   startActivity(intent);} 
```

` 现在，当用户单击选项卡时，它会自动将用户带到您的其他活动。

# jquery - jQuery 脚本不起作用

> ID：14639721
> 
> 赞同：0
> 
> 时间：2013-02-01T04:27:25.220
> 
> 标签：jquery

当我尝试运行这个 jQuery 脚本时：

```
$('#textbox').keyup(function() {
$vari = $(this).val();
$(".user:contains($vari)").css("display", "block");
}; 
```

它不起作用，只是看起来脚本实际上并没有做任何事情！

这是随附的 HTML：

```
<div class="user">hello</div>
<input type="text" id="textbox"> 
```

请建议我必须做什么才能使此脚本正常运行。它应该与用户一起获取 div `class`，并且如果文本框中具有 id 的文本具有`textbox`也在 中的值，则`user`它应该使其可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:19:12.787

为了使其不区分大小写，这是@Joseph fiddle的[变体](http://jsfiddle.net/rg8nU/1/)

```
$('#textbox').keyup(function() {
var $vari = $(this).val();
var reg = new RegExp($vari, "gi");
var $div = $(".user").html();
if($div.match(reg))
    $(".user").css("display", "block");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:28:04.643

您必须将`$vari`变量连接到选择器中：

```
$('#textbox').keyup(function() {
    var $vari = $(this).val();
    $(".user:contains(" + $vari + ")").css("display", "block");
}); 
```

这是小提琴：http: [//jsfiddle.net/rg8nU/](http://jsfiddle.net/rg8nU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:51:59.917

```
do this 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

      $('#textbox').keyup(function() {
    var $vari = $(this).val();
    $(".user:contains(" + $vari + ")").css("display", "block");
});
    });
</script>

 <div>
        <input type="text" id="textbox" />

   </div>
   <div  class="user" style="display:none">a</div> 
```

# java - 为什么java中的每个对象都包含一个哈希码

> ID：14639727
> 
> 赞同：2
> 
> 时间：2013-02-01T04:27:41.917
> 
> 标签：java

我只是想知道为什么java中的每个对象都包含一个哈希码。为什么通常为每个对象分配不同的哈希码，但两个哈希码编号可能具有不同的值。

规则“规则？如果两个 key 相同，则生成相同的 hashcode 编号，但如果两个 hashcode 编号相同，则 key 可能相同或不同。”

如果两个键（在哈希表上下文中）相同，为什么哈希码编号相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:31:35.970

哈希函数的重点是显着缩小您需要查找某个特定键的位置。

一个非常基本的示例是在字典中，具有“单词中的第一个字母”的哈希函数：一旦您将搜索范围缩小到以该字母开头的字典部分，您就已经淘汰了大多数的可能性非常有效。此外，查找字典中以字母 J 开头的部分相对较快：比直接查找特定单词要快得多。

哈希函数的目的是找到与某个特定的键相关联的特定数字*：*它消除了*大多数*可能性，即使它不能消除所有可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:31:59.353

Java 中的每个对象都需要能够*产生*一个哈希码，不一定*包含*一个。

散列码用于在关联容器中查找，例如散列映射和散列集。哈希码不需要唯一，但是当对象用作哈希映射中的键时，哈希码越唯一越好。当两个键相同时，对象需要 (1) 逻辑上相等，或 (2) 覆盖`equals`以区分两个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:32:12.960

在 JDK 内部的许多情况下都需要哈希码，因为某些数据结构使用它及其属性按需要工作（特别是[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)和[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)）。这是因为它能够以*足够安全*的方式识别类的特定实例。

哈希码是**有限的信息**（通常具有固定大小），因此，虽然您必须确保同一个对象具有相同的哈希码，但您不能确保两个不同的对象具有不同的哈希码。这是因为**存储在哈希码中的信息量通常小于生成它的对象中包含的信息量**。你想要的是发生冲突的概率足够低，可以很好地与所需的算法一起工作（当然这意味着你不能假设哈希码的唯一性，除非在特定情况下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:59:38.003

> 如果两个键相同，为什么哈希码编号相同？

仅仅因为这就是使哈希表起作用的原因！

哈希表有效（并且高效），因为它使用“相等”键具有相同哈希码的事实来减少查找时必须查看的键数量。`equals(Object)`和的语义`hashcode()`被定义为按照它们的方式工作，以便对象（符合语义契约......）可以用作哈希表¹中的键。

要了解哈希表的工作方式和原因，您可能应该阅读一本关于算法的好教科书，或者阅读有关此主题的 Wikipedia 页面：[http](http://en.wikipedia.org/wiki/Hash_table) ://en.wikipedia.org/wiki/Hash_table 。他们可以比我们更好地解释它......

* * *

^(1 - 还有另一个先决条件......当密钥在哈希表中使用时，密钥的哈希码不应更改。)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T05:33:31.293

```
public int hashCode() 
```

**返回对象**的哈希码值。支持这种方法是为了有利于哈希表，例如由 提供的哈希表`HashMap`。（这通常通过将对象的内部地址转换为整数（32 位有符号整数）来实现）

**[hashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)的通用合约：**

*   在 Java 应用程序执行期间，只要在同一个对象上多次调用它，该`hashCode`方法必须始终返回相同的`integer`，前提`equals`是没有修改对象比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持*一致。*

*   如果根据方法两个对象相等[`equals(Object)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)，那么对两个对象中的每一个调用该`hashCode`方法必须产生*相同的整数结果*。不要求如果两个对象根据`equals(java.lang.Object)`方法不相等，则对两个对象中的每一个调用 hashCode 方法必须产生*不同的整数结果*。但是，程序员应该意识到，为*不相等的对象*生成不同的整数结果可能会提高哈希表的性能。

*   `hashCode`每当重写此方法时，都必须重写该方法`equals()`，以维护该`hashCode`方法的一般合同，该合同规定相等的对象必须具有相等的哈希码。

**注意：**有 4,294,967,296 (2^32) 个可能的 hashCode 可用，但我们创建的对象数量要大得多，因此某些对象必须共享相同的 hash Code。
[参考](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873)
[1参考2](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6809470)

# php - Magento - 删除“最低购买”通知

> ID：14639735
> 
> 赞同：0
> 
> 时间：2013-02-01T04:28:35.147
> 
> 标签：php, magento, shopping-cart

我正在尝试删除购物车中关于客户如何在他们的购物车中必须有小计 20 美元的通知但是我仍然希望在客户尝试进入结账时限制那里（我个人认为我们不应该删除通知，但订单从高处下降）

目前，这是我的代码

```
$messages = $this->getMessagesBlock()->getMessages();
unset($messages[1]);
$this->getMessagesBlock()->setMessages($messages);
echo $this->getMessagesBlock()->getGroupedHtml(); 
```

我一直在测试代码，方法是使用 1 件商品进入购物车并在新数量像 99999999999999 这样愚蠢的情况下使用更新购物车按钮

从我所做的 var 转储中，`$this->getMessagesBlock()` 有一个名为 _messages 的数据的受保护价格，使用`getMessages()`返回 2 个项目的数组，一个是关于索引 0 处的数量的错误，另一个是关于最低购买量的通知。

我尝试使用`unset($messages[1]);`删除通知作为测试，看看我是否可以删除它，如果它有效，我稍后会修复它以搜索通知并删除它，无论它在数组中的哪个位置。

我设置`setMessages($messages)`并做了另一个 var 转储，我可以看到它已被放回，`$this->getMessagesBlock()`所以我认为它会工作，但没有出现

我做了一个vardump，`$this->getMessagesBlock()->getGroupedHtml()`它显示一个空字符串

我想知道我在这里可能做错了什么，或者是否有更好的方法来删除我不想要的消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:17:25.153

最小订单金额可以在系统 > 配置 > 销售 > 最小订单金额下进行配置。见附图![在此处输入图像描述](../Images/c5c1c1289f21d2ea60b548a024c17597.png)。长话短说，您无需向 cart.phtml 页面添加代码即可删除消息。希望这会有所帮助！

# entity-framework - Azure SQL 数据库映射实体选项

> ID：14639736
> 
> 赞同：0
> 
> 时间：2013-02-01T04:28:37.193
> 
> 标签：entity-framework, azure, azure-sql-database

我有一个 SQL Azure 数据库，我在其中托管外部供应商信息，并且我还有一个为我的 Web 应用程序运行的 SQL Server。

我需要使用从本地 SQL 数据库中提取和修改的一些数据来检索和更新 SQL Azure 数据库中的数据。

现在的问题....

我是否对 SQL Azure 数据库使用实体框架并创建实体模型？或者是否有更好的方法用于 SQL Azure 数据库的 CRUD 操作？

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:14:44.270

在 SQL Azure 数据库上通过 EF 进行 CRUD 操作是不行的。但是对 Worker Role 进行操作。Worker Role 将一直运行，您可以更好地控制模型。

# html - XSLT：表类依赖于 td 的数量

> ID：14639740
> 
> 赞同：1
> 
> 时间：2013-02-01T04:28:51.267
> 
> 标签：html, xml, xslt, xslt-1.0

对于具有固定结构和可变输入内容的表，我还有另一个关于 XSLT 转换的问题。

我概述了两个不同的例子。

但所需的表类取决于输入 XML 中的节数。

我有一个前面的例子，由@Kirill Polishchuk 和@JLRishe 提供

[使用 xsl 从部分属性中提取类](https://stackoverflow.com/questions/13466641/extracting-a-class-from-the-section-attribute-using-xsl)

[XSLT 转换成固定表结构](https://stackoverflow.com/questions/14638508/xslt-transformation-into-fixed-table-structure)

请注意我正在使用 XSLT 1.0。任何建议或指导将不胜感激。

示例 1

输入包含 6 个部分的 XML

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="6" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="7" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="8" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="9" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="10" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="11" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="12" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="13" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="14" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="15" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="16" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="17" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="18" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="19" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="20" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="21" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="22" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="23" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="24" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

期望的输出

```
<table class="col_6">
<tr>
<td class="Stadium">Stadium</td>
<td class="Crowds">Crowds</td>
<td class="Support">Support</td>
<td class="Revenue">Revenue</td>
<td class="Cost">Cost</td>
<td class="Outlook">Outlook</td>
</tr>
<tr>
<td class="Stadium_R2">1-4</td>
<td class="Crowds_R2">5-6</td>
<td class="Support_R2">7-10</td>
<td class="Revenue_R2">11-14</td>
<td class="Cost_R2">15-18</td>
<td class="Outlook_R2">19-22</td>
</tr>
</table> 
```

示例 2

输入 XML 4 部分

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="6" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="7" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="8" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="9" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="10" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="11" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="12" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="13" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="14" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="15" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="16" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

期望的输出

```
<table class="col_4">
<tr>
<td class="Stadium">Stadium</td>
<td class="Support">Support</td>
<td class="Cost">Cost</td>
<td class="Outlook">Outlook</td>
</tr>
<tr>
<td class="Stadium_R2">1-4</td>
<td class="Support_R2">5-8</td>
<td class="Cost_R2">9-12</td>
<td class="Outlook_R2">13-16</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:36:18.520

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kGroup" match="page" use="@section"/>

  <xsl:template match="/*">
    <xsl:variable name="groups"
       select="*[generate-id() = generate-id(key('kGroup', @section)[1])]" />

    <table class="col_{count($groups)}">
      <tr>
        <xsl:apply-templates select="$groups" mode="top" />
      </tr>
      <tr>
        <xsl:apply-templates select="$groups" mode="pageNums" />
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page" mode="top">
    <xsl:variable name="sectName" select="substring-after(@section, 'Arsenal_')" />
    <td class="{$sectName}">
      <xsl:value-of select="$sectName" />
    </td>
  </xsl:template>

  <xsl:template match="page" mode="pageNums">
    <xsl:variable name="groupMembers" select="key('kGroup', @section)" />
    <td class="{substring-after(@section, 'Arsenal_')}_R2">
      <xsl:value-of select="concat($groupMembers[1]/@number, '-', 
                                   $groupMembers[last()]/@number)"/>
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在您的第一个输入上运行时：

```
<table class="col_6">
  <tr>
    <td class="Stadium">Stadium</td>
    <td class="Crowds">Crowds</td>
    <td class="Support">Support</td>
    <td class="Revenue">Revenue</td>
    <td class="Cost">Cost</td>
    <td class="Outlook">Outlook</td>
  </tr>
  <tr>
    <td class="Stadium_R2">1-4</td>
    <td class="Crowds_R2">5-8</td>
    <td class="Support_R2">9-12</td>
    <td class="Revenue_R2">13-16</td>
    <td class="Cost_R2">17-20</td>
    <td class="Outlook_R2">21-24</td>
  </tr>
</table> 
```

在第二个输入上运行时：

```
<table class="col_4">
  <tr>
    <td class="Stadium">Stadium</td>
    <td class="Support">Support</td>
    <td class="Cost">Cost</td>
    <td class="Outlook">Outlook</td>
  </tr>
  <tr>
    <td class="Stadium_R2">1-4</td>
    <td class="Support_R2">5-8</td>
    <td class="Cost_R2">9-12</td>
    <td class="Outlook_R2">13-16</td>
  </tr>
</table> 
```

# yii - yii ErrorHandler 在模块中具有不同的视图布局

> ID：14639741
> 
> 赞同：0
> 
> 时间：2013-02-01T04:28:55.347
> 
> 标签：yii, yii-modules

我有一个自定义模块，它使用它自己的一组布局/视图。但是对于错误，我想使用默认的站点布局和视图。在我的模块中，我`errorHandler` `errorAction`将`site/error`

```
class AdminModule extends CWebModule {

    public function init() {
        $this->setImport(array(
            'admin.models.*',
            'admin.components.*',
        ));

        Yii::app()->setComponents(array(
            'errorHandler'=>array('errorAction'=>'site/error'),
        ));

        $this->layout = 'admin';
    }

    public function beforeControllerAction($controller, $action) {
        if(parent::beforeControllerAction($controller, $action)) {
            $controller->layout = $this->layout;
            return true;
        } else {
            return false;
        }
    }
} 
```

但是它仍在使用管理布局，我希望它使用默认布局。如何仅针对错误操作覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:17:54.097

在你`actionError()`的`SiteController`只需添加默认布局名称

```
class SiteController extends Controller
{

public function actionError()
    {
        $this->layout='defaultLayoutName';
           //rest of the code goes here
    }
} 
```

# batch-file - 以管理员身份运行的批处理脚本

> ID：14639743
> 
> 赞同：20
> 
> 时间：2013-02-01T04:29:11.103
> 
> 标签：batch-file, administrator, runas

我正在编写一个客户端/服务器检查程序，但它需要以管理员身份运行。

我希望它在我的网络和用户上静默运行，并且我不希望“以管理员身份运行”提示。是否有任何开始代码可以放入批处理文件以使其以管理员身份自动运行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-08T14:57:15.670

## 无效的解决方案

否： - 创建快捷方式 [ -> 兼容性 -> “以管理员身份运行此程序” ] 解决方案不起作用。

此选项在 Windows 7 中显示为灰色。即使禁用了 UAC

否：这`runas /env /user:domain\Administrator <program.exe/command you want to execute>`也是不够的，因为它会提示用户输入管理员密码。

## 有效的解决方案

是的：禁用 UAC -> 使用任务计划程序创建作业，这对我有用。

*   在任务计划程序下创建一个作业，并使其以具有管理员权限的用户身份运行。
*   明确标记：“以最高权限运行”
*   禁用 UAC，因此不会提示运行此任务

如果您愿意，您可以通过编辑注册表来让脚本启用 UAC。在我的情况下，该脚本仅通过创建 Windows 虚拟机运行一次，其中 UAC 在映像中被禁用。

仍然期待以管理员身份运行脚本的最佳方法，没有太多麻烦。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-05T08:21:12.757

```
@echo off

 call :isAdmin

 if %errorlevel% == 0 (
    goto :run
 ) else (
    echo Requesting administrative privileges...
    goto :UACPrompt
 )

 exit /b

 :isAdmin
    fsutil dirty query %systemdrive% >nul
 exit /b

 :run
  <YOUR BATCH SCRIPT HERE>
 exit /b

 :UACPrompt
   echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
   echo UAC.ShellExecute "cmd.exe", "/c %~s0 %~1", "", "runas", 1 >> "%temp%\getadmin.vbs"

   "%temp%\getadmin.vbs"
   del "%temp%\getadmin.vbs"
  exit /B` 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-30T12:51:12.737

以下是一种解决方法：

1.  **创建**.bat 文件的快捷方式
2.  **打开快捷方式的属性**。在快捷方式选项卡下，**单击高级**。
3.  **勾选“以管理员身份运行”**

运行快捷方式将以管理员身份执行您的批处理脚本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-01T05:42:11.773

它可能使用语法：

```
RUNAS [/profile] [/env] [/netonly] /user:user Program

Key :
/profile Option to load the user's profile (registry)
/env Use current environment instead of user's.
/netonly Use the credentials specified only for remote connections.
/user Username in form USER@DOMAIN or DOMAIN\USER
(USER@DOMAIN is not compatible with /netonly)
Program The command to execute 
```

例子 ：

```
runas /env /user:domain\Administrator <program.exe/command you want to execute> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-01T13:27:42.263

你有几个选择。

1.  如果您只需要使用批处理文件和本机命令来执行此操作，请查看[如何自动提升我的批处理文件，以便它在需要时请求 UAC 管理员权限？](https://stackoverflow.com/a/12264592/2441).

2.  如果 3rd-party 实用程序是一个选项，您可以使用[Elevate](http://www.winability.com/elevate/)之类的工具。它是一个可执行文件，您可以使用要作为参数运行的程序来调用它。
    像这样： `elevate net share ...`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-29T18:13:02.617

我对 Matt 的脚本进行了轻微修改，以使其能够在单个脚本中运行（只需将其添加到需要 UAC 调用的任何脚本的开头），但请阅读下面的代码以获得更好的解决方案博客：

```
:: ### START UAC SCRIPT ###

if "%2"=="firstrun" exit
cmd /c "%0" null firstrun

if "%1"=="skipuac" goto skipuacstart

:checkPrivileges
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges )

:getPrivileges
if '%1'=='ELEV' (shift & goto gotPrivileges)

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs"
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs"
"%temp%\OEgetPrivileges.vbs"
exit /B

:gotPrivileges

setlocal & pushd .

cd /d %~dp0
cmd /c "%0" skipuac firstrun
cd /d %~dp0

:skipuacstart

if "%2"=="firstrun" exit

:: ### END UAC SCRIPT ###

:: ### START OF YOUR OWN BATCH SCRIPT BELOW THIS LINE ### 
```

如您所见，我的修改使用了两个文件参数，这不是特别优雅，但可以完成工作（并且您始终可以通过使用虚拟占位符保留前几个参数将它们隐藏在尾部）。此外，AFAIK Matt 的脚本不支持文件路径中的空格，此限制也适用于我对此脚本的修改。

这个问题似乎是 VBS 处理这些路径的方式所固有的，但在下面的链接中，有一个更好的基于 VBS 的解决方案，用于调用从单个脚本中运行的 UAC，而不需要像这样使用文件参数的解决方法**，**而且支持文件路径中的空格：

[http://pcloadletter.co.uk/2012/12/11/uac-elevation-for-batch-script/](http://pcloadletter.co.uk/2012/12/11/uac-elevation-for-batch-script/)

如您所见，此链接上的脚本使 VBS 调用略有不同，出于某种原因，它绕过了空格问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-24T12:10:56.813

由于到目前为止我还没有找到任何简单的脚本，这是我的两分钱：

```
set ELEVATE_APP=Full command line without parameters for the app to run
set ELEVATE_PARMS=The actual parameters for the app
echo Set objShell = CreateObject("Shell.Application") >elevatedapp.vbs
echo Set objWshShell = WScript.CreateObject("WScript.Shell") >>elevatedapp.vbs
echo Set objWshProcessEnv = objWshShell.Environment("PROCESS") >>elevatedapp.vbs
echo objShell.ShellExecute "%ELEVATE_APP%", "%ELEVATE_PARMS%", "", "runas" >>elevatedapp.vbs
DEL elevatedapp.vbs 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-05T21:01:44.563

创建快捷方式并将快捷方式设置为始终以管理员身份运行。

How-To Geek 论坛[制作一个批处理文件以管理员身份运行 cmd](http://www.howtogeek.com/forum/topic/make-a-batch-file-to-run-cmd-as-administrator#post-263414)解决方案：

> 在编辑器中创建一个批处理文件并命名it.bat，然后为其创建一个快捷方式。Nameit.bat - 快捷方式。然后右键单击 Nameit.bat - 快捷方式 -> 属性 -> 快捷方式选项卡 -> 高级，然后单击以管理员身份运行。从快捷方式执行它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-13T11:45:59.503

如果您不需要 .bat 文件，我的解决方案是将批处理文件转换为 .exe 文件，然后您将能够设置以管理员身份运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-18T07:31:19.210

如果上述所有答案都不符合您的喜好，您可以使用 autoIT 以特定用户身份使用其凭据运行您的文件（或任何文件）。

将使用该用户权限运行程序的脚本示例。

```
installAdmin()

Func installAdmin()
    ; Change the username and password to the appropriate values for your system.
    Local $sUserName = "xxxxx"
    Local $sPassword = "xxx"
    Local $sDirectory = "C:\ASD4VM\Download\"
    Local $sFiletoRun = "Inst_with_Privileges.bat"

    RunAsWait($sUserName, @ComputerName, $sPassword, 0, $sDirectory & $sFiletoRun)
EndFunc   ;==>Example 
```

[AutoIT 可以在这里找到。](http://www.autoitscript.com/site/autoit/)-> 它使用.ua3 格式，编译成可以运行的.exe 文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-12T20:03:29.940

您可以将其作为启动项...启动项根本不会显示以管理员身份运行的提示。

检查这篇文章[没有 UAC rompt 的提升程序快捷方式](http://www.sevenforums.com/tutorials/11949-elevated-program-shortcut-without-uac-prompt-create.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-03T11:47:39.730

不要浪费你的时间，使用这一行命令以管理员身份运行命令行：

```
echo createobject("shell.application").shellexecute "cmd.exe",,,"runas",1 > runas.vbs & start /wait runas.vbs & del /f runas.vbs 
```

如果您想以管理员权限启动任何应用程序，您只需在我的程序文件中编写此应用程序的孔路径，例如此记事本++：

```
echo createobject("shell.application").shellexecute "%programfiles%\Notepad++\notepad++.exe",,,"runas",1 > runas.vbs & start /wait runas.vbs 
```

# javascript - MVC3 中的自定义验证 .js 文件

> ID：14639748
> 
> 赞同：0
> 
> 时间：2013-02-01T04:29:19.493
> 
> 标签：javascript, jquery, asp.net-mvc

我的问题是

我想在客户端和服务器端的 mvc3 中进行验证。

我知道如何在服务器端使用验证，但客户端验证有问题。

假设我有一个带有剃须刀的文本框

> ```
> **Email : @html.Textboxfor(m=>m.Email)** 
> ```
> 
> 或者

 **所以错误会像这个 **无效的电子邮件一样显示**

现在我想在客户端和服务器端验证电子邮件。

对于客户端，我想使用我的 owan javascript file.on 提交表单首先验证

在客户端，如果它验证然后表单将提交并且服务器端的验证将不会检查。但是如果用户从浏览器中禁用脚本而不是服务器端验证将被执行，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:12:11.507

服务器端验证应始终启用并且比客户端验证更强大。有些事情在客户端可能难以验证，例如模型或模型属性之间的复杂交互。但是，您可以使用`jQuery`验证器插件（VS MVC 项目模板附带）进行客户端验证。您在服务器上有验证属性，该属性实现`IClientValidatable`：

```
public class MyValidationAttribute : ValidationAttribute, IClientValidatable
{

    public override bool IsValid(object value)
    {
        if (value == null) {
            return true;
        }
        //Add validation rules
        if (false) {
            return false;
        }
        return true;
    }

    public override string FormatErrorMessage(string name)
    {
        return "Please provide valid values."
    }

    public IEnumerable<System.Web.Mvc.ModelClientValidationRule> GetClientValidationRules(System.Web.Mvc.ModelMetadata metadata, System.Web.Mvc.ControllerContext context)
    {
        return new ModelClientValidationRule[] { new ModelClientValidationRule {
            ErrorMessage = "Please provide valid values.",
            ValidationType = "validationrule"
        } };
    }
} 
```

在客户端，您需要添加验证规则：

```
jQuery.validator.addMethod("validationrule", function (value, element, param) {
    if (value == "") {
        return false;
    }
    return true;
});
jQuery.validator.unobtrusive.adapters.addBool('validationrule'); 
```

确保将其添加到 jQuery 就绪处理程序之外。请参阅[此问题](https://stackoverflow.com/questions/9245872/asp-net-mvc-3-custom-unobtrusive-validation)的已接受答案。**

# android - 如何在 Android 应用程序中嵌入不同的语言？

> ID：14639751
> 
> 赞同：1
> 
> 时间：2013-02-01T04:29:31.323
> 
> 标签：android

我制作了一个应用程序。（基本版本 Gingerbread 2.3），现在我想在其中嵌入不同的语言，以便用户可以使用该应用程序。用不同的语言。但是嵌入不同语言的过程我不清楚（我是android编程的新手），请有人用代码详细解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:41:42.363

多语言支持很容易为 android 完成。`values`使用语言代码的后缀为该语言创建一个新目录。For `german: values-de`or f`rench: values-fr`而不是将您的内容复制`strings.xml`到其中并翻译每个条目。

有关更多信息，请参阅[此](http://developer.android.com/training/basics/supporting-devices/languages.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:43:35.527

这是一个很好的入门教程：http: [//www.icalocalize.com/site/tutorials/android-application-localization-tutorial/](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)

本质上，您需要为`values`您希望支持的所有语言创建单独的文件夹。

例如，如果您同时支持法语和默认英语，那么您将需要创建一个`values-fr`文件夹。如果您希望支持特定于地区的语言，那么您也需要创建这些语言。例如，法语区域设置为加拿大，那么您将需要创建以下内容：`values-fr-rCA`

其工作原理是： 1\. 如果 Region 设置为**Canada**并且`Language`设置为**French**，操作系统将查找 values 文件夹：`values-fr-rCA` 2\. 如果找不到上述内容，则查找`values-fr`. 3\. 如果以上都找不到，则默认回到普通`values`文件夹。

您需要为您在整个应用程序中使用的所有值编写 Strings.XML。** 硬编码** 字符串不会切换到其他语言。

也是`drawables`如此。

在此处阅读有关[本地化的更多信息](http://developer.android.com/guide/topics/resources/localization.html)

# java - 反射安全

> ID：14639753
> 
> 赞同：8
> 
> 时间：2013-02-01T04:29:45.427
> 
> 标签：java, security, reflection, policy, securitymanager

如何通过不允许`Method`, `Field`,`Constructor`对象调用来强制反射安全`setAccessible(true)`？SecurityPolicy 文件或其他内容？

通常对于独立的 Java 应用程序没有`SecurityManager`注册。

我用这个`System.setSecurityManager(new SecurityManager());`

这种方法适用于调用方法。

我想强制执行整个 jar 或使用 jar 的客户端代码不允许调用`setAccessible(true);`

有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:53:08.193

嗯，它*确实*适用于 setAccessible。看：

```
class A {
  private String method1() {
    return "Hello World!";
  }
} 
```

和

```
import java.lang.reflect.Method;

class B {
  public static void main(String[] args) throws Exception {
    System.setSecurityManager(new SecurityManager());
    Class clazz = A.class;
    Method m = clazz.getDeclaredMethod("method1");
    m.setAccessible(true);
  }
} 
```

结果是

```
Exception in thread "main" java.security.AccessControlException: access denied ("java.lang.reflect.ReflectPermission" "suppressAccessChecks")
        at java.security.AccessControlContext.checkPermission(Unknown Source)
        at java.security.AccessController.checkPermission(Unknown Source)
        at java.lang.SecurityManager.checkPermission(Unknown Source)
        at java.lang.reflect.AccessibleObject.setAccessible(Unknown Source)
        at B.main(B.java:8) 
```

它可能对您不起作用的一个原因是，根据[这篇文章](http://neuroning.com/2007/02/19/violating-javas-privacy)中的评论，它不能在 Java 1.5 中工作，而是在 6 及之后的版本中工作。

* * *

编辑：要拒绝特定罐子，您需要使用策略文件，例如：

```
// specific file
grant codeBase "file:/test/path/tools.jar" {
  // no permissions for this one
};

// default to giving all
grant {
  permission java.security.AllPermission;
}; 
```

有两种指定策略文件的方法，要么将其作为默认值的补充，要么仅提供指定的策略文件（[source](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html#DefaultLocs)）：

> 如果你使用
> 
> ```
> java -Djava.security.manager -Djava.security.policy==someURL SomeApp 
> ```
> 
> （注意双等号）然后只使用指定的策略文件；安全属性文件中指示的所有内容都将被忽略。

...或者实现一个自定义的安全管理器，这[看起来并不难](http://www.java2s.com/Tutorial/Java/0490__Security/extendsSecurityManager.htm)。虽然我自己没有这样做。

# c - 如何在 ncurses 中重新定义颜色对？

> ID：14639765
> 
> 赞同：5
> 
> 时间：2013-02-01T04:31:20.373
> 
> 标签：c, ncurses

标题应该说明了一切，所以假设我创建了一个这样的颜色对：

```
init_pair(1, COLOR_RED, COLOR_BLACK); 
```

然后我想重新定义它，像这样：

```
init_pair(1, COLOR_GREEN, COLOR_BLUE); 
```

现在这不起作用，但是还有其他功能可以让我这样做吗？或者见鬼，有没有功能可以让我在不使用颜色对的情况下只使用明确的前景色/背景色？

提前感谢，如果这还不够清楚，请告诉我。

* * *

**编辑**：尝试后，您*可以*使用重新定义对`init_pair`，而我的代码中的问题出在其他地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:56:10.917

您一次最多可以定义 7 个颜色对，如果您愿意，可以按顺序显示它们。您只需更改数字并刷新。例如。（我们将使用 3 来完成）请参阅[此处](http://snap.nlc.dcccd.edu/learn/fuller3/chap6/chap6.html)以获取 7 示例的电子打印输出

```
 #include  <curses.h>

 int COLOR_PAIR (int PAIR_NUMBER)

 init_pair(1, COLOR_GREEN, COLOR_RED);
 init_pair(2, COLOR_GREEN, COLOR_BLUE);
 init_pair(3, COLOR_RED, COLOR_BLUE);

 for (i=1, i <=3, i++){
   attroffset(A_BOLD)
   attrset(COLOR_PAIR(i))
   refresh();
   sleep(1);
} 
```

请注意，如果您有很多对并且第二种颜色始终相同或第一种颜色在每对中都是唯一的，则可以使用 attron() 将其打开，例如 attron(COLOR_PAIR(COLOR_BLUE)); （这在我们的定义中不起作用）

[您可以在此处](http://www.roguetemple.com/forums/index.php?topic=319.0;wap2)查看 attron 的示例

# asp.net - "Message":"使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串长度超过

> ID：14639767
> 
> 赞同：1
> 
> 时间：2013-02-01T04:31:40.570
> 
> 标签：asp.net, json

我设计了 jqgrid 来显示数据，但在执行时出现错误；

"Message":"使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性设置的值。","StackTrace":"

当我用最少的数据执行网格时，它运行...

我什至尝试通过以下方式更改 web.conf：

```
<scripting>
<webServices>
  <jsonSerialization maxJsonLength="50000000"/>
</webServices> 
```

但错误保持不变..下面是我的 web.conf 文件..

```
<compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="MySql.Data, Version=5.0.9.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"/></assemblies></compilation>
    <!--
      The <authentication> section enables configuration 
      of the security authentication mode used by 
      ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows"/>
    <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
       </customErrors>
    -->
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
</system.web> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:36:24.907

我不确切知道这是解决您问题的方法。尝试在后面的代码中设置 maxJsonLength（即时）：

```
public static string GetJSONString <T> (List<T> data)
{
    JavaScriptSerializer serializer = new JavaScriptSerializer() { MaxJsonLength = Int32.MaxValue, RecursionLimit = 100 };
    return serializer.Serialize(data);
} 
```

创建对象时初始化 MaxJsonLength 属性。如果这个解决方案不起作用，我认为你应该界定你的 JSON 字符串长度。希望这有帮助。

# java - 如何在最大化和最小化时刷新 JScrollPane.viewPort

> ID：14639769
> 
> 赞同：1
> 
> 时间：2013-02-01T04:31:44.517
> 
> 标签：java, swing, jscrollpane, jviewport

您能否告诉我如何刷新 viewPort 或最大化和最小化 JScrollPane 中的窗口。我知道我可能不得不调用 repaint 或 revalidate 但我不知道如何为此编写监听器。

最小化窗口![在此处输入图像描述](../Images/f529af7193b9f0a3b3b0a172d04bff56.png)

最大化窗口![在此处输入图像描述](../Images/3d00771302b16ee33f0f46604f5eeb0b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:34:29.977

内容应实现`Scrollable`：

```
public boolean scrollableTracksViewportWidth() {
    return true;
} 
```

这也将阻止水平滚动。

# ruby - 如何找到远程红宝石的大小？

> ID：14639774
> 
> 赞同：3
> 
> 时间：2013-02-01T04:32:20.137
> 
> 标签：ruby, rubygems

我正在从 ruby​​gems 安装 libv8 gem（大约 512M），想知道为什么要花这么长时间。这...

> gem 规范 -r libv8

... 没有告诉我宝石的大小。然后我查看了[文档](http://guides.rubygems.org/specification-reference/)，看起来 gem 创建者可以选择将有关其 gem 大小的信息放在 ruby​​gems 的预定义“可选 gemspec 属性”之一下。

问：所以在安装远程 gem 之前不能可靠地知道它的大小？

额外问题：将宝石大小作为必需的 gemspec 属性是否不切实际？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T21:03:31.727

这是在 OS X 或 Linux 上执行此操作的一种糟糕方法：

```
curl -s  https://rubygems.org/api/v1/gems/<gem-name>.yaml | sed -n "s/gem_uri: //p" | xargs curl -sLI | grep Content-Length | tail -1 
```

会给你大小（以字节为单位）。

解释：

使用 curl 和[ruby​​gems api](http://guides.rubygems.org/rubygems-org-api/)获取有关 gem 的一些信息：

```
curl -s  https://rubygems.org/api/v1/gems/thor.yaml 
```

获取 gem 文件下载的 URL

```
sed -n "s/gem_uri: //p" 
```

下载 gem 的响应标头（在重定向之后）

```
xargs curl -sLI 
```

仅显示“Content-Length”的最后一个实例

```
grep Content-Length | tail -1 
```

结果（~82k）：

```
Content-Length: 83456 
```

# c++ - 使用线程生成唯一随机数

> ID：14639775
> 
> 赞同：0
> 
> 时间：2013-02-01T04:32:28.843
> 
> 标签：c++, random, pthreads

我有一个使用 pthreads 的程序。在每个线程中，使用 rand() (stdlib.h) 函数生成一个随机数。但似乎每个线程都在生成相同的随机数。这是什么原因？？..我做错了什么吗？？..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:36:33.803

`rand()`是[***伪随机的***](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)，不保证是线程安全的，无论如何，您需要*播种* `rand()`：

```
std::srand(std::time(0)); // use current time as seed for random generator 
```

[**`std::rand()`**](http://en.cppreference.com/w/cpp/numeric/random/rand)有关更多详细信息，请参见[cppreference.com](http://en.cppreference.com/)。

示例程序可能如下所示：

```
#include <cstdlib>
#include <iostream>
#include <boost/thread.hpp>

boost::mutex output_mutex;

void print_n_randoms(unsigned thread_id, unsigned n)
{
    while (n--)
    {
        boost::mutex::scoped_lock lock(output_mutex);
        std::cout << "Thread " << thread_id << ": " << std::rand() << std::endl;
    }
}

int main()
{
    std::srand(std::time(0));
    boost::thread_group threads;
    for (unsigned thread_id = 1; thread_id <= 10; ++thread_id)
    {
        threads.create_thread(boost::bind(print_n_randoms, thread_id, 100));
    }
    threads.join_all();
} 
```

注意伪随机数生成器是如何只用时间播种一次的（而不是*每个*线程）。

# c# - 字典中的一个键和许多不同的值

> ID：14639776
> 
> 赞同：1
> 
> 时间：2013-02-01T04:32:31.590
> 
> 标签：c#, dictionary

如何**`Dictionary`**在一个键下存储许多不同的值？

我这里有一个代码：

```
Dictionary<string, DateTime> SearchDate = new Dictionary<string, DateTime>();

SearchDate.Add("RestDate", Convert.ToDateTime("02/01/2013"));
SearchDate.Add("RestDate", Convert.ToDateTime("02/28/2013")); 
```

但在字典中我了解到只允许使用一个唯一键，所以我的代码产生了错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:00:51.027

使用`Dictionary<string, List<DateTime>>`. 通过键访问列表，然后将新项目添加到列表中。

```
Dictionary<string, List<DateTime>> SearchDate = 
    new Dictionary<string, List<DateTime>>();
...
public void AddItem(string key, DateTime dateItem)
{
    var listForKey = SearchDate[key];
    if(listForKey == null)
    {
        listForKey = new List<DateTime>();
    }
    listForKey.Add(dateItem);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T04:34:50.503

最简单的方法是制作`Dictionary`某种容器，例如

```
Dictionary<string,HashSet<DateTime>> 
```

或者

```
Dictionary<string,List<DateTime>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T04:38:07.983

您可以尝试使用[Lookup Class](http://msdn.microsoft.com/en-us/library/bb460184.aspx)。要创建它，您可以使用[Tuple Class](http://msdn.microsoft.com/en-us/library/dd268536.aspx)：

```
var l = new List<Tuple<string,DateTime>>();
l.Add(new Tuple<string,DateTime>("RestDate", Convert.ToDateTime("02/01/2013")));
l.Add(new Tuple<string,DateTime>("RestDate", Convert.ToDateTime("02/28/2013")));

var lookup = l.ToLookup(i=>i.Item1); 
```

但是，如果您需要修改查找，则必须修改原始元组列表并从中更新查找。因此，这取决于此集合倾向于更改的频率。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T04:36:22.497

如果您使用的是 .NET 3.5，则可以使用[Lookup类](http://msdn.microsoft.com/en-us/library/bb460184.aspx)

# extjs - 防止网格面板的键盘多选

> ID：14639779
> 
> 赞同：3
> 
> 时间：2013-02-01T04:33:14.143
> 
> 标签：extjs, extjs4.1, keyboard-events, extjs-mvc, gridpanel

我想要一个单一的选择网格，起初我没有包含任何选择模型配置，因为这是[**默认的**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.RowModel-cfg-mode)。这适用于鼠标选择，但如果我键入`SHIFT + END`它会选择所有记录（或`PAGE UP`，`HOME`或`END`具有类似效果）。

然后，如果不重新加载网格，就无法取消选择选定的记录（除非我想要一个配置有的网格`allowDeselect: true`- 我没有）。

认为这是关于默认值的 ExtJS 文档的问题，然后我使用`SINGLE`select 显式配置了网格面板，但仍然存在问题。

[**我在这里**](http://docs.sencha.com/ext-js/4-1/#!/example/grid/grid-plugins.html)查看了他们的一些示例网格，它们都有相同的问题 - 任何单个选择网格都会阻止鼠标多选，但可以使用 shift 键和`HOME`、或进行多选。然后*不可能*取消选择记录。`END``PAGE UP``PAGE DOWN`

 *似乎是框架中的一个错误，我将提交一份报告，但由于网格是最常用的组件之一，我认为有人对此有解决方法。

绝望中，我还尝试在全球范围内收听`keypress`并停止该事件，但这甚至都行不通。例如，这将记录到控制台，但事件仍然运行：

```
Ext.getDoc().on('keypress', function(event, target) {
    var key = event.getKey();

    // do not allow multiple grid selection
    if (event.shiftKey && (
        key == event.PAGE_UP ||
        key == event.PAGE_DOWN ||
        key == event.HOME ||
        key == event.END)) {

        console.log('unsuccessfully trying to stop the event!');
        event.stopEvent();
        event.stopPropagation();
        event.shiftKey = false;
        return false;
    }
}); 
```

**编辑：**

我不想禁用所有键盘导航，`enableKeyNav: false`我只是不想用键盘进行多选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:01:05.603

您可以使用：

```
selModel: {
    enableKeyNav: false
}, 
```

在网格配置中。但这对我来说是意想不到的选择模型行为......

**更新**

作为一个非常简单的版本：

```
selModel: {
    selectRange: function() {
        return false;
    }
}, 
```*

# xml - 从 Apache 上的网页调用 SWF 时不会加载 XML 文件

> ID：14639781
> 
> 赞同：1
> 
> 时间：2013-02-01T04:33:37.163
> 
> 标签：xml, flash, apache

我有一个像这样放在我的页面上的 swf

```
<object width='670' height='580'> 
    <embed src='../flash/galeria.swf' width='670' height='580' /> 
</object> 
```

有一个 XML 可以读取并创建一些东西。问题是当我在我的计算机上运行它时它工作正常，但是当它通过页面运行时，它不会加载 xml。路径是正确的，我确信这一点，因为我在服务器（Apache）之外运行它并且它可以工作。

PS：如果我使用“仅访问本地文件”设置的“本地 playblack 安全”选项发布 SWF，则 xml 仅在服务器外部加载。我试图将其更改为“仅访问网络”，它不会在服务器之外工作，也不会在从服务器上的页面调用时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:31:00.280

我解决了这个问题。当我从文件系统启动 SWF 时，在 Windows 上，相对路径是相对于我运行 SWF 的位置的。当我运行它嵌入在我的网页上时，页面和 SWF 位于不同的目录中，但 SWF 所需的所有文件都与以前相同，它不起作用。我不得不将 SWF 调用的文件移动到调用 SWF 的网页的同一目录中——只有这样才能工作。谢谢。

# c++ - 如何在矢量 C++ 中打印元素

> ID：14639782
> 
> 赞同：12
> 
> 时间：2013-02-01T04:33:48.183
> 
> 标签：c++, arrays, vector

我的 void print 函数无法打印出这个向量。我不太确定“std::allocator”在说什么。我收到以下错误：

```
st1.cpp: In function ‘void Print(std::vector<int, std::allocator<int> >)’:
st1.cpp:51: error: declaration of ‘std::vector<int, std::allocator<int> > v’ shadows a      parameter 
```

这是文件：

```
#include <iostream>
#include <string>
#include <vector>
#include <stack>
#include <algorithm>
using namespace std;

void Initialize();
void Print();

int main()
{
stack<string> s1, s2;
s1.push("b");
s2.push("a");

if (s1.top() == s2.top())
{
    cout << "s1 == s2" << endl;
}
else if (s1.top() < s2.top())
{
    cout << "s1 < s2" << endl;
}
else if (s2.top() < s1.top())
{
    cout << "s2 < s1" << endl;
}
else 
{
    return 0;
}

vector<int> v;
Initialize();
Print();
}

void Initialize(vector<int> v)
{
int input;
cout << "Enter your numbers to be evaluated: " << endl;
while(input != -1){
    cin >> input;
    v.push_back(input);
    //write_vector(v);
}
}

void Print (vector<int> v){
vector<int> v;
for (int i=0; i<v.size();i++){
    cout << v[i] << endl;
}
} 
```

我只想将 v 打印到屏幕上。有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T04:35:32.253

您的函数声明和定义不一致，您想从中生成向量`Initialize`，您可以这样做：

```
void Initialize(vector<int>& v); 
```

要打印矢量：

```
void Print(const vector<int>& v); 
```

现在你打电话：

```
vector<int> v;
Initialize(v);
Print(v); 
```

不要忘记更改`Initialize`,的函数定义`Print`以匹配我上面提供的新签名。此外，您正在重新定义一个隐藏函数参数的局部变量`v`，您只需要注释掉该行，还通过 const ref 传递向量：

```
void Print (const vector<int>& v){
  //vector<int> v;
  for (int i=0; i<v.size();i++){
    cout << v[i] << endl;
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T04:35:20.590

您必须通过 const 引用并删除无关的向量。

```
void Print(const std::vector<int>& v){
    for(unsigned i = 0; i< v.size(); ++i) {
        std::cout << v[i] << std::endl;
    }
} 
```

另一种打印出来的方法是使用迭代器，如下所示：

```
void Print(const std::vector<int>& v) {
    std::vector<int>::iterator it;
    for(it = v.begin(); it != v.end(); ++it) {
        std::cout << (*it) << '\n';
    }
} 
```

或者在 C++11 中你可以这样做：

```
void Print(const std::vector<int>& v) {
    for(auto& i : v)
        std::cout << i << '\n';
} 
```

我认为您的`Initialize()`功能不像您期望的那样工作。它似乎只是制作一个副本然后丢弃它，而不是修改现有向量的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T22:29:00.913

利用 c++ std 的 11 及更高版本，这可以在一行中实现，如下所示。std::for_each(v.begin(),v.end(),[](const int &i) { std::cout << i; });

此代码使用从 begin() 到 end() 的 std::vector 迭代器运行 for 循环，连续地为 lambda/[] 函数提供要打印的所需参数。

# c++ - c++ 与 /MT 链接的 heap_alloc 崩溃

> ID：14639783
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:33:51.897
> 
> 标签：c++, stl, crash, mt

我的 c++ Windows 应用程序发生了严重的崩溃。

它总是在某些 stl 类（例如字符串、iostream）的构造函数处崩溃（在没有任何提示的情况下自行终止）。实际上，它在构造函数调用之前的 heap_alloc 函数处崩溃。

该问题仅发生在使用 /MT 选项编译和链接时。如果我切换到 /MD，一切正常。

有什么线索吗？

PS：我的开发环境是 Windows7 x64 + VS2010SP1，我使用的唯一 3rd 方库是 7z (lzma86 SDK)。我正在构建 x86 应用程序......

谢谢，-迈尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:42:38.190

嗯...我发现了问题。

这是由于为项目分配了一个附加选项“/ENTRY”。（我只是忘记了，因为这是一个 6 年的项目）。由于没有调用默认的 _crtmain 函数，因此 STL 函数失败。

# android - 发送附件不适用于内部存储文件

> ID：14639790
> 
> 赞同：3
> 
> 时间：2013-02-01T04:34:31.760
> 
> 标签：android

我正在尝试以编程方式使用我的电子邮件发送附件。附件是我的数据库文件。当数据库文件在 SD 卡上时，我能够完成它。但是当它在内部时，它一直抱怨找不到文件

这是我的代码：

```
 String path = "/data/data/MyPackageName/databases/mydb.db"
    Intent email = new Intent(android.content.Intent.ACTION_SEND);

    email.setType("plain/text");
    email.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
    email.putExtra(android.content.Intent.EXTRA_TEXT, "Hiii");

    email.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + path)); 
```

知道为什么它在这条路上不起作用吗？我是否遗漏了什么或附件仅适用于外部存储上的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:38:34.923

这是正确的行为。该文件位于应用程序的私有存储中，任何其他进程都无法访问该文件。您要么需要先将其复制到外部存储，要么实现内容提供程序来为其传递文件描述符。

有关如何为文件实现 ContentProvider 的出色示例，请参阅[此项目。](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)

# makefile - 获取 make 在特定目录中创建目标文件

> ID：14639794
> 
> 赞同：34
> 
> 时间：2013-02-01T04:34:53.060
> 
> 标签：makefile, gnu-make

```
GNU Make 3.82
gcc 4.7.2
c89 
```

我有以下制作文件：

```
INC_PATH=-I/home/dev_tools/apr/include/apr-1
LIB_PATH=-L/home/dev_tools/apr/lib
LIBS=-lapr-1 -laprutil-1
RUNTIME_PATH=-Wl,-rpath,/home/dev_tools/apr/lib
CC=gcc
CFLAGS=-Wall -Wextra -g -m32 -O2 -D_DEBUG -D_THREAD_SAFE -D_REENTRANT -D_LARGEFILE64_SOURCE $(INC_PATH)
SOURCES=$(wildcard src/*.c)
OBJECTS=$(patsubst %.c, %.o, $(SOURCES))

EXECUTABLE=bin/to

all:    build $(EXECUTABLE)

$(EXECUTABLE):  $(OBJECTS)
    $(CC) $(CFLAGS) -o $@ $(RUNTIME_PATH) $(OBJECTS) $(LIB_PATH) $(LIBS)

$(OBJECTS): $(SOURCES)
    $(CC) $(CFLAGS) -c $(SOURCES) $(LIB_PATH) $(LIBS)

build:
    @mkdir -p bin

clean:
    rm -rf $(EXECUTABLE) $(OBJECTS) bin
    find . -name "*~" -exec rm {} \;
    find . -name "*.o" -exec rm {} \; 
```

我的目录结构是这样的`project/src project/bin`。我的 Makefile 在`project (root)`文件夹中，我所有的 *.h 和 *.c 都在 src 目录中。目前我只有一个名为 timeout.c 的源文件

我收到此错误：

```
gcc: error: src/timeout.o: No such file or directory 
```

我用它来获取所有源文件：

```
SOURCES=$(wildcard src/*.c) 
```

和目标文件：

```
OBJECTS=$(patsubst %.c, %.o, $(SOURCES)) 
```

但是，make 似乎在 Makefile 所在的项目根文件夹中创建目标文件。不应该放在src目录下吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T07:03:56.453

这条规则有两个问题（嗯，三个）：

```
$(OBJECTS): $(SOURCES)
    $(CC) $(CFLAGS) -c $(SOURCES) $(LIB_PATH) $(LIBS) 
```

您还没有注意到，但是该规则使*每个*对象都依赖于*所有*源，并尝试以这种方式构建。只要您只有一个来源，这不是问题。[使用静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)和[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)易于修复：

```
$(OBJECTS): src/%.o : src/%.c
    $(CC) $(CFLAGS) -c $< $(LIB_PATH) $(LIBS) 
```

另外，命令 ("$(CC)...") 没有指定输出文件名，所以 gcc 会从源文件名中推断出来；如果你给它`src/timeout.c`，它会产生`timeout.o`（在工作目录中`project/`）。因此，您应该指定输出文件的所需路径。使用另一个自动变量很容易做到：

```
$(OBJECTS): src/%.o : src/%.c
    $(CC) $(CFLAGS) -c $< $(LIB_PATH) $(LIBS) -o $@ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T05:54:42.323

使用`gcc`'s **-o**选项将输出文件写入特定位置。例如，你可以说：

```
$(CC) $(CFLAGS) -c $(SOURCES) $(LIB_PATH) $(LIBS) -o $(OBJECTS) 
```

不幸的是，这一行有一个问题：如果 中有多个源文件`$(SOURCES)`，它将不起作用，因为`$(OBJECTS)`还会包含多个文件名，并且**-o**选项仅绑定到第一个参数。

编译源代码文件列表中的每个文件的一种方法是使用隐式规则。在`gmake`中，你会写：

```
$(EXECUTABLE):  $(OBJECTS)
        $(CC) $(CFLAGS) -o $@ $(RUNTIME_PATH) $(OBJECTS) $(LIB_PATH) $(LIBS)

%.o : %.c
        $(CC) $(CFLAGS) -c $< -o $@ 
```

其中**$<**替换为输入文件的名称，**$@**替换为输出文件的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-10T04:04:48.650

我解决了这个请求，这是我的 Makefile 和目录树。

```
PROJECT := main.exe

DIR_SRC += .
DIR_SRC += ./src

DIR_INC += -lpthread 
DIR_INC += -I./inc 
DIR_INC += $(addprefix -I, $(DIR_SRC))

SRC_C += $(wildcard $(addsuffix /*.c, $(DIR_SRC)))
#OBJ := $(filter %.o, $(SRC_C:.c=.o))
OBJ := $(patsubst %.c, %.o, $(SRC_C))
EXE := $(PROJECT)

CC_PREFIX := 
CC := $(CC_PREFIX)gcc
CFLAG = 
CLIB = -L .

.PHONY:all

all:$(OBJ) $(EXE)

%.o: %.c
    $(CC) $(CFLAG) $(DIR_INC) -c $< -o $@ 

$(EXE): $(OBJ)
    $(CC) $(CFLAG) $(CLIB) $(OBJ) -o $@ 

clean:
    rm -r $(EXE) $(OBJ) 
```

查看我的目录树：

[![在此处输入图像描述](../Images/e540c902dd8a0cf9ccb51cb4b2b6547b.png)](https://i.stack.imgur.com/Vv6gf.png)

# c - 使用管道在进程之间同步文件写入

> ID：14639797
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:35:10.743
> 
> 标签：c, linux, fork, pipe

我有一些东西我大半夜都在盯着看，却想不通。我正在用 C 编写代码，该代码应该使用管道来回传递一个字节，从而允许我在父进程和子进程之间切换，这将轮流将字符串写入文件。这是我的代码：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
int main()
{
int fd[2];
int fd2[2];
char token = 'a';
int file = open("output.txt", O_RDWR|O_CREAT|O_TRUNC, S_IRUSR|S_IWUSR);
if (pipe(fd) == -1 || pipe(fd) == -1)
{
    printf("Pipe failed");
    return(-1);
}
pipe(fd2);
int pid = fork();
int i;
int j;
write(fd[1], token, 1);
if (pid) // Parent enters here
{
    for (i = 0; i < 100;)
    {
        if (read(fd[0], token, 1) != -1)
        {
            write(file, "ppppppp", 7);
            i++;
            write(fd2[1], token, 1); 

        }
        //usleep(500000);
    }
    wait(); 
}
else if (pid == 0) // Child enters here
{
    for (j = 0; j < 100;)
    {
        if (read(fd2[0], token, 1) != -1)
        {
            write(file, "ccccc", 5);
            j++;
            write(fd[1], token, 1); 
        }
        //usleep(500000);
    } 
}
else // Error creating child
{
    exit (-1);
}        
close(file);
return 0;
} 
```

我知道当我不使用管道时写入文件是有效的，但现在我得到了一个无限循环，我不知道问题是什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T04:52:22.500

我想到了！有趣的是，小事情有多大的不同。

# jquery - 第一次插件

> ID：14639801
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:35:25.283
> 
> 标签：jquery, jquery-plugins

大多数代码都有效，除了它没有抓住`a`我需要的每个人`.post`

```
(function ($) {
'use strict';
var url = window.location.href.split('#')[0];
var post = $('.post').children('a[name]').attr('name');
var helpers = {
        "defaults": {
            "post": post,
            "href": url+'#',
            "send": 'true',
            "layout": 'button_count',
            "width": '125',
            "faces": 'false',
            "font": 'verdana',
            "action": 'like',
            "scheme": 'light',
        },
        "init": function (options) {

            var settings = $.extend({}, helpers.defaults, options),

                easyface = $('<div />').addClass('easyface fb-like').attr({
                    "data-href": settings.href + settings.post,
                    "data-send": settings.send,
                    "data-layout": settings.layout,
                    "data-width": settings.width,
                    "data-show-faces": settings.faces,
                    "data-font": settings.font,
                    "data-action": settings.action,
                    "data-colorscheme": settings.scheme
                });

            return this.each(function (i, elem) {
                var self = $(elem),                 
                    data = self.data('easyface');  
                if (!data) {   

                    self.data('easyface', easyface);
                    self.append(easyface);
                }
            });
        },
        "destroy": function () {
            return this.each(function (i, elem) {
                var self = $(this),                
                    data = self.data('easyface');   // test to see if we've already called init on this element

                $(window).unbind('.easyface');      // unbind any namespaced events, assuming you've namespaced them like "click.easyface"
                self.removeData('easyface');        // remove the data flag
                self.find('.easyface').remove();    // remove the appended div
            });
        }

    };
//define the method "easyface"
$.fn.easyface = function (method) {
    if (helpers[method]) {
        // call the method and pass in the settings
        return helpers[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method) {
        // default to the init method and pass in the arg
        return helpers.init.apply(this, arguments);
    } else {
        // throw an error
        $.error('Method ' + method + ' does not exist on jQuery.tooltip');
    }
};
}(jQuery));
 $(function() {
   $('body').append('<div id="fb-root"></div>');
   (function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=477049588983712";
     fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:11:49.400

检查语句的嵌套。您会发现您认为插件中的大部分代码实际上并非如此。

语句`$(this).attr(...)`应该达到什么目的？即使将它们移到插件中，它们也不会像当前编写的那样工作。他们需要 (a) 使用存储在`options`对象中的数据和 (b) 对创建的`'<div class="fb-like"></div>'`元素进行操作。

仔细看看声明`$('.post-options').before().easyface();`。`.before()`, 没有参数将什么都不做，并且链接`.easyface()`（如果它运行没有错误）也可能什么都不做。您可能想要类似的东西，`$('.post-options').before(easyface(...));`但要使其工作，您必须确保插件返回完全组合的`<div class="fb-like"></div>`元素而不是`this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:46:54.183

关于您尝试过的一些指示，特别是您的模式：

```
$(this).attr('data-send', function () {
    return + send;
});
$(this).attr('data-layout', function () {
    return + layout;
});
$(this).attr('data-width', function () {
    return + width;
}); 
```

我最好用评论来解释：

```
// in your execution scope, "this" is the window object
$(this).attr('data-href', function () {
    // "href" is not in any scope of the IIFE
    // and is therefore either a global variable
    // or is undefined. Also the plus sign, when
    // used like this, will try to convert your
    // "href" to a number which is likely to return
    // NaN given that "href" is likely to be undefined
    // or a non-numeric string
    return + href;
}); 
```

也就是说，这就是我将如何构建您的插件的方式，并附上关于我为什么要这样构建它的注释：

```
// Start with an IIFE and pass in either jQuery, or jQuery.noConflict
// which will map it to the dollar sign so that the the dollar sign
// cannot be overwritten by another library in the scope of its execution.
(function ($) {
    'use strict';
    // contain all methods and settings in a local variable.
    // this helps ensure clean namespacing and
    // preserves scope
    var helpers = {
            "defaults": {
                "post": "",                 //pass the post id in as a parameter
                "href": '/',
                "send": 'true',
                "layout": 'button_count',
                "width": '125',
                "faces": 'false',
                "font": 'verdana',
                "like": 'like'
            },
            "init": function (options) {
                // combine passed in options with the defaults in a new object
                var settings = $.extend({}, helpers.defaults, options),
                    // build the easyface element to attach
                    easyface = $('<div />').addClass('easyface fb-like').attr({
                        "data-href": settings.href + settings.post, // concatenate with your href here.
                        "data-send": settings.send,
                        "data-layout": settings.layout,
                        "data-width": settings.width,
                        "data-show-faces": settings.faces,
                        "data-font": settings.font,
                        "data-like": settings.like
                    });
                // return this.each to preserve chainability
                return this.each(function (i, elem) {
                    var self = $(elem),                 // cached reference to the element
                        data = self.data('easyface');   // test to see if we've already called init on this element
                    if (!data) {    // If the plugin hasn't been initialized yet
                        //Do more setup stuff here
                        self.data('easyface', easyface);
                        self.append(easyface);
                    }
                });
            },
            "destroy": function () {
                return this.each(function (i, elem) {
                    var self = $(this),                 // cached reference to the element
                        data = self.data('easyface');   // test to see if we've already called init on this element
                    // namespacing for the win
                    $(window).unbind('.easyface');      // unbind any namespaced events, assuming you've namespaced them like "click.easyface"
                    self.removeData('easyface');        // remove the data flag
                    self.find('.easyface').remove();    // remove the appended div
                });
            }
            /*
             * other example methods
             *
             *  "reposition": function () {},
             *  "show": function () {},
             *  "hide": function () {},
             *  "update": function (content) {}
             */
        };
    //define the method "easyface"
    $.fn.easyface = function (method) {
        if (helpers[method]) {
            // if the arg passed was a string that indicates a method above
            // call the method and pass in the settings
            return helpers[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            // if the arg passed was an object, or no arg was passed
            // default to the init method and pass in the arg
            return helpers.init.apply(this, arguments);
        } else {
            // don't know what to do with this
            // throw an error
            $.error('Method ' + method + ' does not exist on jQuery.tooltip');
        }
    };
}(jQuery)); 
```

在您的示例小提琴中，您可以将帖子 ID 作为选项传递，如下所示：

```
$('.postfoot').easyface({
    "post": $('.post').children('a[name]').attr('name')
}); 
```

这是一个更新的小提琴来演示：http: **[//jsfiddle.net/zUeFL/9/](http://jsfiddle.net/zUeFL/9/)**

# javascript - 这些字符在 Javascript 中的作用

> ID：14639803
> 
> 赞同：5
> 
> 时间：2013-02-01T04:35:37.167
> 
> 标签：javascript, character

我在这里浏览了一段代码[http://cssdeck.com/labs/bjiau4dy](http://cssdeck.com/labs/bjiau4dy)，我在Javascript框中看到了这个 -

```
!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+! 
```

那有什么作用？为什么它不会在控制台中抛出错误？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:37:52.843

这些符号中的任何一个都将其后面的函数转换为函数表达式，而不是函数声明。把它们放在一起只是为了好玩。

* * *

`()`如果您尝试通过在声明之后放置来调用常规函数：

```
function () {
    // this is a syntax error...
}(); 
```

你会得到一个语法错误：

> SyntaxError：意外的令牌（

因为你不能调用函数声明。

* * *

所以人们通常把一个匿名函数用括号包裹起来，把它变成一个函数表达式：

```
(function () {
    // this will execute immediately
}()); 
```

您可以通过添加任何这些符号来实现相同的目的：

```
!function () {
    // this will also execute immediately
}(); 
```

* * *

有关更多信息，请参见此处： http: [//kangax.github.com/nfe/#expr-vs-decl](http://kangax.github.com/nfe/#expr-vs-decl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:02:49.287

更详细地说，这些运算符中的每一个实际上都会对执行它的操作数执行类型强制。`+`将其后面的操作数转换为 a `number`，`-`运算符也是如此。`!`是非运算符，并将操作数转换为`boolean`（真/假）。

要记住的另一件事是，在 Javascript 中，所有内容都可以评估为某种值。这可能是一个“真”或“假”值，也可以有一个“数字”值（即使该值不是数字，AKA `NaN`）。

因此，如果您打开 JSFiddle 或 Firebug，并弄乱这些值对函数的作用，您会看到它们也会产生某种新的返回值。

例如：

1.  `!function(){}`将评估为值`false`（因为将函数对象强制为布尔值会产生 值`true`）。
2.  `+function(){}`将评估为`NaN`（因为将函数对象强制为数字产量`NaN`）。使用 可以看到相同的结果`-`。
3.  `!+function(){}`产生真（强制多个值`NaN`将产生`false`而不是假产生真。
4.  `!+-+-+!function(){}``!function(){}`产生真（因为yield `false`，`+false`yield`0`和将继续贯穿所有这些`+`和`-`运算符，直到 finally`!0`被评估为真）。
5.  `false`应用示例中列出的运算符将在, -1, 0, 1之间来回切换，`true`直到所有运算符都被评估。

请注意，我使用 Firebug 检查了这些。浏览器之间可能存在差异，也可能是 Firebug 在评估中向我们展示的内容。TL;DR 是 Javascript 执行大量类型强制，并且会以不同于声明的方式评估表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:45:31.090

除了作为风格水印之外，做一长串符号是零点的。

这组符号充当对后面函数的操作，但什么也不做。

在 JS 中，你可以写`1`or +1 (one) or `!1`(false) or !+1 (还是 false)。这只是作用于以下功能的一长串。

所以`!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!1`不会抛出错误。它的价值`false`虽然。

并且`!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!function(){ ... }`只是执行函数并评估为 false （但无论如何都没有对值做任何事情）

*但是*，由于存在*某些东西*，它会将函数定义转换为操作并立即评估该函数。但只是`+function(){ ... }`会做同样的事情。

# ruby - 读取文本文件，对其进行解析，并将其存储到哈希中。如何？

> ID：14639805
> 
> 赞同：2
> 
> 时间：2013-02-01T04:35:57.250
> 
> 标签：ruby, file

我想用三行打开一个文本文件

722.49 的 3 台电视

1 箱鸡蛋 14.99

2 双鞋 34.85

**并将其变成这样：**

```
hash = {
      "1"=>{:item=>"televisions", :price=>722.49, :quantity=>3},    
      "2"=>{:item=>"carton of eggs", :price=>14.99, :quantity=>1},
      "3"=>{:item=>"pair of shoes", :price=>34.85, :quantity=>2}
       } 
```

我很困惑，不知道该怎么做。这是我到目前为止所拥有的：

```
f = File.open("order.txt", "r")
lines = f.readlines
h = {}
n = 1
while n < lines.size
lines.each do |line|
  h["#{n}"] = {:quantity => line[line =~ /^[0-9]/]}
  n+=1
end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T01:37:11.200

没有理由让这么简单的东西看起来很丑！

```
h = {}
lines.each_with_index do |line, i|
  quantity, item, price = line.match(/^(\d+) (.*) at (\d+\.\d+)$/).captures
  h[i+1] = {quantity: quantity.to_i, item: item, price: price.to_f}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T05:04:45.063

```
hash = File.readlines('/path/to/your/file.txt').each_with_index.with_object({}) do |(line, idx), h|
  /(?<quantity>\d+)\s(?<item>.*)\sat\s(?<price>\d+(:?\.\d+)$)/ =~ line
  h[(idx + 1).to_s] = {:item => item, :price => price.to_f, :quantity => quantity.to_i}
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T05:05:37.940

```
File.open("order.txt", "r") do |f|
  n,h = 0,{}
  f.each_line do |line|
    n += 1
    line =~ /(\d) (.*) at (\d*\.\d*)/
    h[n.to_s] = { :quantity => $1.to_i, :item => $2, :price => $3 }
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:08:55.147

我不知道 ruby​​，所以请随意忽略我的回答，因为我只是根据文档做出假设，但我想我会提供一个非正则表达式解决方案，因为在这种情况下它似乎有点矫枉过正。

我假设您可以使用`line.split(" ")`并将位置分配`[0]`给数量，将位置分配`[-1]`给价格，然后将项目分配给`[1..-3].join(" ")`

根据我能找到的第一个 ruby[​​ 控制台：](http://tryruby.org/levels/1/challenges/0)

```
test = "3 telev­isions at 722.4­9"
foo = test.­split(" ")
hash = {1=>{:item=>foo[1..-3]­.join(" "),:q­uantity=>foo[0], :price=>foo[-1]}}

=> {1=>{:item=>"televisions", :quantity=>"3", :price=>"722.49"}} 
```

# node.js - Heroku Node.js - 权限被拒绝

> ID：14639806
> 
> 赞同：1
> 
> 时间：2013-02-01T04:36:05.373
> 
> 标签：node.js, heroku, socket.io, node.js-connect

我正在尝试将一个简单的应用程序部署到 Heroku，它使用模块“socket.io”和“连接”。当我部署应用程序时，我收到 Permission Denied 错误并且应用程序崩溃。我从环境属性“PORT”获取端口号。我正在将 socket.io 配置为使用长轮询而不是 WebSockets（因为我知道它们不受支持）。

有人可以告诉我我做错了什么吗？

```
 var io = require('socket.io'),
        connect = require('connect');

    var port = process.env.PORT || 5000;

    var app = connect().use(connect.static('public')).listen(port);
    var chat_room = io.listen(app);

    chat_room.configure(function () {
        chat_room.set("transports", ["xhr-polling"]);
        chat_room.set("polling duration", 10);
    });

chat_room.sockets.on('connection', function(socket){
    socket.emit('entrance', {message:'Welcome to the chat room.'});
    socket.on('disconnect', function(){
         chat_room.sockets.emit('exit', {message:'A chatter has disconnected.'});
     });

     socket.on('chat', function(data){
        chat_room.sockets.emit('chat',{message: '# ' + data.message});
     });
     chat_room.sockets.emit('entrance', {message: 'A new chatter is online.'});
 }); 
```

这是日志中的错误：

```
2013-02-01T04:24:04+00:00 app[web.1]: Error: EACCES, Permission denied
2013-02-01T04:24:04+00:00 app[web.1]:     at Server.listen (net.js:1063:20)
2013-02-01T04:24:04+00:00 app[web.1]: node.js:134
2013-02-01T04:24:04+00:00 app[web.1]:     at Server._doListen (net.js:1098:5)
2013-02-01T04:24:04+00:00 app[web.1]:     at net.js:1069:14
2013-02-01T04:24:04+00:00 app[web.1]:     at Object.lookup (dns.js:153:45)
2013-02-01T04:24:04+00:00 app[web.1]:     at Object.listen (/app/node_modules/socket.io/lib/socket.io.js:67:12)
2013-02-01T04:24:04+00:00 app[web.1]:     at Object.<anonymous> (/app/main.js:8:20)
2013-02-01T04:24:04+00:00 app[web.1]:     at Module.load (module.js:336:31)
2013-02-01T04:24:04+00:00 app[web.1]:     at Module._compile (module.js:404:26)
2013-02-01T04:24:04+00:00 app[web.1]:     at Function._load (module.js:297:12)
2013-02-01T04:24:04+00:00 app[web.1]:     at Object..js (module.js:410:10)
2013-02-01T04:24:06+00:00 heroku[web.1]: Process exited with status 1
2013-02-01T04:24:06+00:00 heroku[web.1]: State changed from starting to crashed 
```

谢谢！

# list - 附加到python范围内每个索引的列表？

> ID：14639816
> 
> 赞同：1
> 
> 时间：2013-02-01T04:36:52.053
> 
> 标签：list, count, indexing, append, range

请注意，我在使用 Python 时非常可怜，但我想做的是附加三个列表（每个 Myro 光传感器一个 - 左、中、右）总共 15 次，每次在模拟机器人之后转动一点。但由于某种原因，它不会多次迭代这些步骤。

这是我所拥有的：

```
def rotations():
""" Moves robot 360 degrees, appending light values 15 times along the way."""
    arcs = 15
    lightLeftList = []
    lightCenterList = []
    lightRightList = []
    for count in range (1, arcs+1):
        turnRight(1/6.475/15)
        resultLeft = getLight("left")
        lightLeftList.append(resultLeft)
        resultCenter = getLight("center")
        lightCenterList.append(resultCenter)
        resultRight = getLight("right")
        lightRightList.append(resultRight)

    return lightLeftList, lightCenterList, lightRightList 
```

# date - 在 Extjs 中将 utc 格式的日期字符串转换为日期对象

> ID：14639817
> 
> 赞同：1
> 
> 时间：2013-02-01T04:36:57.030
> 
> 标签：date, extjs, internet-explorer-8, utc

我有一个格式为“2013-01-31T10:10:05.000Z”的日期字符串。我想将此字符串转换为 extjs 中的 Date 对象。

我尝试使用 Ext.Date.parse("2013-01-31T10:10:05.000Z","Ym-dTH:i:s.uZ")。但它返回未定义。

我也尝试使用 new Date("2013-01-31T10:10:05.000Z")，但它也返回未定义。

注意：我已经在 IE8 浏览器中尝试过。

谁能帮我将上面的日期字符串转换为 Date 对象？

非常感谢sra。现在我得到的结果是 ...UTC+5:30 ... 有没有办法将其转换为 IST 格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T06:12:06.837

尝试`Ext.Date.parse("2013-01-31T10:10:05.000Z","c");`

这`c`是*ISO 8601*格式日期的格式类型

有关此格式或其他可用格式的更多详细信息，请参阅**[Ext.Date API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T11:18:41.543

这是因为“T”和“Z”是日期格式的特殊字符：[http ://docs.sencha.com/extjs/4.2.1/#!/api/Ext.Date](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.Date)

你必须像这样逃避它们：`Ext.Date.parse("2013-01-31T10:10:05.000Z","Y-m-d\\TH:i:s.u\\Z")`

# xcode - 从 git 中获取源文件

> ID：14639822
> 
> 赞同：1
> 
> 时间：2013-02-01T04:37:44.700
> 
> 标签：xcode, git, file-recovery

我一直在使用 xcode git 存储库保存我的所有源文件。我在网上看到一些关于加快 Mac 性能的文章，我使用了一个名为“单语”的工具来清理硬盘上不需要的语言文件。不幸的是，这也删除了我的整个用户目录以及我的所有源代码。

有什么方法可以从本地 git 中检索文件吗？当我尝试从 xcode 管理器查看它们时，它不显示以前保存的存储库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:07:10.337

问题是：它是否也删除了`.git`包含您的代码历史记录的目录？

如果是，那么您需要至少恢复（例如从时间机器备份）该目录，以便能够从该 git repo 再次签出您的工作树。

# python - 蛋白质序列编码

> ID：14639825
> 
> 赞同：3
> 
> 时间：2013-02-01T04:38:00.167
> 
> 标签：python, pandas

我正在开发一个 python 程序来计算突变残基的数字编码和一组字符串（蛋白质序列）的位置，存储在 fasta 格式文件中，每个蛋白质序列用逗号分隔。我试图找到突变的位置和序列。

我的fasta文件如下：

```
MTAQDDSYSDGKGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYLGAVFQLN,MTSQEDSYSDGKGNYNTIMPGAVFQLN,MTAQDDSYSDGRGDYNTIMPGAVFQLN,MKAQDDSYSDGRGNYNTIYLGAVFQLQ,MKSQEDSYSDGRGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYPGAVFQLN,MTAQEDSYSDGRGEYNTIYLGAVFQLQ,MTAQDDSYSDGKGDYNTIMLGAVFQLN,MTAQDDSYSDGRGEYNTIYLGAVFQLN 
```

示例：
下图（基于另一组fasta文件）将解释其背后的算法。在该图中，第一个框表示输入文件序列的对齐。最后一个框代表输出文件。如何使用 Python 中的 fasta 文件执行此操作？

示例输入文件：

```
MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD

        positions  1  2  3  4  5  6                  1  2  3  4  5  6    
protein sequence1  M  T  A  Q  D  D                     T  A     D
protein sequence2  M  T  A  Q  D  D                     T  A     D    
protein sequence3  M  T  S  Q  E  D                     T  S     E    
protein sequence4  M  T  A  Q  D  D                     T  A     D    
protein sequence5  M  K  A  Q  H  D                     K  A     H

     PROTEIN SEQUENCE ALIGNMENT                   DISCARD NON-VARIABLE REGION    

        positions  2  2  3  3  5  5  5    
protein sequence1  T     A     D       
protein sequence2  T     A     D       
protein sequence3  T        S     E    
protein sequence4  T     A     D       
protein sequence5     K  A           H 
```

变异的残基被拆分为单独的列

输出文件应该是这样的：

```
position+residue   2T  2K  3A  3S  5D  5E  5H    
       sequence1   1   0   1   0   1   0   0    
       sequence2   1   0   1   0   1   0   0    
       sequence3   1   0   0   1   0   1   0    
       sequence4   1   0   1   0   1   0   0    
       sequence5   0   1   1   0   0   0   1

    (RESIDUES ARE CODED 1 IF PRESENT, 0 IF ABSENT) 
```

这是我尝试过的两种方法：

```
ls= 'MTAQDDSYSDGKGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYLGAVFQLN,MTSQEDSYSDGKGNYNTIMPGAVFQLN,MTAQDDSYSDGRGDYNTIMPGAVFQLN,MKAQDDSYSDGRGNYNTIYLGAVFQLQ,MKSQEDSYSDGRGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYPGAVFQLN,MTAQEDSYSDGRGEYNTIYLGAVFQLQ,MTAQDDSYSDGKGDYNTIMLGAVFQLN,MTAQDDSYSDGRGEYNTIYLGAVFQLN'.split(',')
pos = [set(enumerate(x, 1)) for x in ls]
a=set().union(*pos)
alle = sorted(set().union(*pos))
print '\t'.join(str(x) + y for x, y in alle)
for p in pos:
    print '\t'.join('1' if key in p else '0' for key in alle) 
```

*（在这里我得到了突变和非突变残基的列，但我只想要突变残基的列）*

```
from pandas import *
data = 'MTAQDDSYSDGKGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYLGAVFQLN,MTSQEDSYSDGKGNYNTIMPGAVFQLN,MTAQDDSYSDGRGDYNTIMPGAVFQLN,MKAQDDSYSDGRGNYNTIYLGAVFQLQ,MKSQEDSYSDGRGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYPGAVFQLN,MTAQEDSYSDGRGEYNTIYLGAVFQLQ,MTAQDDSYSDGKGDYNTIMLGAVFQLN,MTAQDDSYSDGRGEYNTIYLGAVFQLN'  
df = DataFrame([list(row) for row in data.split(',')])
df = DataFrame({str(col+1)+val:(df[col]==val).apply(int) for col in df.columns for val in set(df[col])})
print df.select(lambda x: not df[x].all(), axis = 1) 
```

*（这里给出输出，但不是有序的，即先是 2K，然后是 2T，然后是 3A。）*

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:57:08.033

该功能`get_dummies`可以帮助您：

```
In [11]: s
Out[11]: 
0    T
1    T
2    T
3    T
4    K
Name: 1

In [12]: pd.get_dummies(s, prefix=s.name, prefix_sep='')
Out[12]: 
   1K  1T
0   0   1
1   0   1
2   0   1
3   0   1
4   1   0 
```

那些具有不同值的列：

```
In [21]: (df.ix[0] != df).any()
Out[21]: 
0    False
1     True
2     True
3    False
4     True
5    False 
```

把这些放在一起：

```
In [31]: I = df.columns[(df.ix[0] != df).any()]

In [32]: J = [pd.get_dummies(df[i], prefix=df[i].name, prefix_sep='') for i in I]

In [33]: df[[]].join(J)
Out[33]: 
   1K  1T  2A  2S  4D  4E  4H
0   0   1   1   0   1   0   0
1   0   1   1   0   1   0   0
2   0   1   0   1   0   1   0
3   0   1   1   0   1   0   0
4   1   0   1   0   0   0   1 
```

注意：我按如下方式创建了初始 DataFrame，但是根据您的情况，这可能会更有效地完成：

```
df = pd.DataFrame(map(list, 'MTAQDD,MTAQDD,MTSQED,MTAQDD,MKAQHD'.split(','))) 
```

# java - 将字符串内容转换为当前类的代码？

> ID：14639828
> 
> 赞同：3
> 
> 时间：2013-02-01T04:38:08.183
> 
> 标签：java

我知道已经有很多关于将字符串转换为可运行代码的问题，但我的问题有点不同。假设您有一个类，其中包含一个名为: 的方法`public boolean isSame(boolean a, boolean b)`，以及一个包含: 的字符串`"if(a == b) { return true; } return false"`。有没有办法将字符串的内容添加到方法的代码中？所以最终的结果将是：

```
public boolean isSame(boolean a, boolean b){
    if(a == b){
        return true;
    }
    return false;
} 
```

非常感谢你。

编辑：我完全理解这是否不可能，但值得一问:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:49:12.467

也许您可以使用[BECL](http://commons.apache.org/bcel/)库——它是一个字节码工程库，虽然不以性能着称，但以易用性着称。

**使您的情况变得有趣的事情：**

与其他在字节码之上提供抽象的字节码工程库不同，它通过反编译一个类、编织*所需的代码*然后再次编译来工作。. . 这发生在类加载阶段。. . 从理论上讲，这将允许您在原始方法调用之前或之后以字符串格式插入有效代码。

基本上根据您问题的评论部分中的建议使用编译器，但会为您做一些额外的工作。

# ruby-on-rails - Rails 路由 - 使用关联的模型属性作为路由根

> ID：14639829
> 
> 赞同：0
> 
> 时间：2013-02-01T04:38:24.473
> 
> 标签：ruby-on-rails, routes

我有一个注册并登录的用户。

现在他们的路线是rails标准的“user/3”。

用户属于一个组织。一个组织有很多用户。

我希望该组织的所有用户在登录时都拥有 URL [http://mysite.com/:organization](http://mysite.com/:organization)名称。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:51:03.490

我不确定您的身份验证是如何设置的，或者您使用什么来处理您的身份验证，但大概当用户成功登录时，您只需更改登录操作中的重定向。就像是：

`redirect_to user.organization`

代替`redirect_to user`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:58:32.790

您需要浏览嵌套资源。请查看[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

更新：更合适的答案

我认为这更适合您的场景[http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-scope](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-scope)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:19:23.487

你必须做这样的事情......

首先向您的组织模型添加一个方法以在 url 中显示名称而不是 id

```
def to_param
    name
end 
```

并根据需要更新您的路线，以及向该组织的用户显示的功能

组织控制者..

```
def show
  @organization = Organization.find(params[:organization])
  @users = @organization.users
end 
```

登录后将用户重定向到用户组织显示路径。

# macruby - 您如何在 macruby/scriptingbridge 中构造“谁的名字是 X”样式语句？

> ID：14639830
> 
> 赞同：1
> 
> 时间：2013-02-01T04:38:28.057
> 
> 标签：macruby

在小程序中：

```
set allItems to every item whose name is "foo" 
```

在 rb-appscript 中：

```
all_items = items[its.name.eq "Foo"] 
```

有没有办法在 MacRuby/ScriptingBridge 中构建类似的搜索/谓词/what-have-you？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:35:36.007

问题解决了！

```
predicate = NSPredicate.predicateWithFormat %(name = "Foo")
all_items = items.filterUsingPredicate(predicate) 
```

[方便参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)。

# php - 尝试回显 HTML 表格的按钮

> ID：14639833
> 
> 赞同：0
> 
> 时间：2013-02-01T04:39:00.697
> 
> 标签：php, html

我试图了解当我运行 btn_actions 函数时，我没有返回任何东西。我试图让两个按钮在我的桌子上回显。

```
echo $this->functions_model->btn_actions(1);
die();

public function btn_actions($item_id)
{
    $content = '<div class="controls center">';
    $content = $this->btn_edit($item_id);
    $content = $this->btn_delete($item_id);
    $content = '</div>';

    return $content;
}

public function btn_edit($item_id)
{
    $button = '<a class="tip" href="'. current_url() . '/edit/' .  $item_id  .'" oldtitle="Edit Task" aria-describeby="ui-tooltip-8"><span class="icon12 icomoon-icon-pencil"></span></a>';
    return $button;
}

public function btn_delete($item_id)
{
    $button = '<a class="tip" href="'. current_url() . '/soft-delete/' . $item_id .'" oldtitle="Delete Task"><span class="icon12 icomoon-icon-remove"></span></a>';
    return $button;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:44:36.813

您需要连接使用`.`

```
$content = '<div class="controls center">';
$content .= $this->btn_edit($item_id);
$content .= $this->btn_delete($item_id);
$content .= '</div>';

return $content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:42:44.670

试试这个 ：

```
echo $this->functions_model->btn_actions(1);
die();

public function btn_actions($item_id)
{
   $content = '<div class="controls center">';
   $content = $content . $this->btn_edit($item_id);
   $content = $content . $this->btn_delete($item_id);
   $content = $content . '</div>';
   return $content;
 }

public function btn_edit($item_id)
{
   $button = '<a class="tip" href="'. current_url() . '/edit/' .  $item_id  .'" oldtitle="Edit Task" aria-describeby="ui-tooltip-8"><span class="icon12 icomoon-icon-pencil"></span></a>';
   return $button;
}

public function btn_delete($item_id)
{
    $button = '<a class="tip" href="'. current_url() . '/soft-delete/' . $item_id .'" oldtitle="Delete Task"><span class="icon12 icomoon-icon-remove"></span></a>';
   return $button;
} 
```

# java - 从 BroadcastReceiver 转到上一个活动？

> ID：14639835
> 
> 赞同：4
> 
> 时间：2013-02-01T04:39:06.830
> 
> 标签：java, android

我需要从广播接收器关闭当前活动。我不确定如何从中调用完成，也许有一种方法可以模拟“返回”键按键。只要能完成工作，任何实现都可以。

```
@Override
public void onReceive(Context context, Intent intent) {
// How can I finish the current activity here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:04:52.737

在你的广播接收器上写： `YourCurrentActivityName.this.finish();`

或者你可以用 this.finish(); 终止前面的活动。所以最后一个被卡住的打开出现在前面。

* * *

**更新：** 第一种情况的代码：

使用广播接收器在后台终止活动：

```
public class ActivityFirstName extends Activity {

    private BroadcastReceiver mFinishReceiver;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // other code

        if (mFinishReceiver == null) {
            IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction("com.example.ACTION_TERMINATE");// a string to identify your action
            mFinishReceiver = new BroadcastReceiver() {
                @Override
                public void onReceive(Context context, Intent intent) {
                    // How can I finish the current activity here?
                    if ("com.example.ACTION_TERMINATE".equals(intent.getAction())) {
                        ActivityFirstName.this.finish();
                    }
                }
            };
            registerReceiver(mFinishReceiver, intentFilter);
        }

        // other code

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (isFinishing()) {
            if (mFinishReceiver != null) {
                unregisterReceiver(mFinishReceiver);
            }
        }
    }

} 
```

以及前面/当前正在运行的活动，广播的发送者：

```
public class ActivitySecondName extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        // code code code

        final Button button = (Button) findViewById(R.id.button_id);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // Perform action on click
                terminateBackActivities();
            }
        });
    }

    private void terminateBackActivities() {
        Intent i = new Intent("com.example.ACTION_TERMINATE"); // the two action strings MUST be same
        // i.putExtra(...); // to send extra data
        sendBroadcast(i);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:44:40.217

从您的评论中假设 BroadcastReceiver 不是活动的内部类，您应该这样做：与其将广播接收器放在单独的类中，不如在您的活动中定义它，如下所示：

```
private BroadcastReceiver mFinishReceiver = new BroadcastReceiver(){
@Override
    public void onReceive(Context context, Intent intent){
        YourActivity.this.finish();
    }
}; 
```

然后，您将希望在 onResume() 中注册接收器，如下所示：

```
@Override
public void onResume(){
    super.onResume();
    registerReceiver(mFinishReceiver, new IntentFilter(yourIntentAction));
} 
```

您还需要在 onPause() 中取消注册此接收器，以免泄漏它：

```
@Override
public void onPause(){
    super.onPause();
    unregisterReceiver(mFinishReceiver);
} 
```

然后，您可以删除具有自己的单独类的另一个接收器，并在清单中删除其定义。上面的示例将确保您始终可以毫无问题地调用 finish()，因为接收器仅在活动运行时注册，因为它是活动类的内部。

编辑：根据 madlymad 的评论，将方法更改为 onCreate() 和 onDestroy() 而不是 onPause() 和 onDestroy()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:49:31.570

你可以简单地打电话`this.finish();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:42:46.840

尝试使用：

```
Intent i = new Intent(context,intent.getClass()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T17:47:49.873

按照 gezdy 关于[如何在 android 中获取当前前台活动上下文的说明进行操作？](https://stackoverflow.com/questions/11411395/how-to-get-current-foreground-activity-context-in-android)以确保您可以从应用程序的任何位置获取对当前活动的引用。

从那里您可以调用 .finish() 来关闭当前活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:11:00.820

不确定这是否对您有帮助，但它曾经帮助过我一次，我认为这里的情况相同，所以我为您回答。

每当广播接收器接到电话时，您都可以通过单击该广播消息导航到任何活动。

就像：

```
@Override
public void onReceive(Context context, Intent intent) {
    // My Notification Code
    notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    int icon = R.drawable.app_icon;
    //System.out.println("The ID Number is: "+Long.parseLong(intent.getData().getSchemeSpecificPart()) );
    contentText = intent.getStringExtra("MyMessage");
    System.out.println("The Message is: "+intent.getStringExtra("MyMessage"));
    CharSequence text = "Your tax amount due period";
    CharSequence contentTitle = "Tax Toolbox";

    long when = System.currentTimeMillis();

    intent = new Intent(context, MenuPageActivity.class); // here i am calling activity
    intent.putExtra("sixMonth", "sixMonth");
    intent.putExtra("messageSixMonth", contentText);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 1, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    notification = new Notification(icon,text,when);

    long[] vibrate = {0,100,200,300};
    notification.vibrate = vibrate;  // To vibrate the Device

    notification.ledARGB = Color.RED;
    notification.ledOffMS = 300;
    notification.ledOnMS = 300;

    notification.defaults |= Notification.DEFAULT_LIGHTS;
    //notification.flags |= Notification.FLAG_SHOW_LIGHTS;

    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    notificationManager.notify(com.project.TaxToolbox.NotificationConstants.NOTIFICATION_ID_SIX_MONTH, notification);

} 
```

现在，在该活动的 onCreate() 上，您必须确定它是否被 Notification 调用。

就像：

```
 NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

    System.out.println("The Extra for twoMonth is:  "+getIntent().hasExtra("twoMonth"));
    System.out.println("The Extra for sixMonth is:  "+getIntent().hasExtra("sixMonth"));
    System.out.println("The Extra for EveryMonth is:  "+getIntent().hasExtra("everyMonth"));

    if(getIntent().hasExtra("sixMonth")){
        notificationManager.cancel(NotificationConstants.NOTIFICATION_ID_SIX_MONTH);
        final AlertDialog alert3 = new AlertDialog.Builder(MenuPageActivity.this).create();
        alert3.setTitle("Tax Toolbox");
        alert3.setMessage(getIntent().getExtras().getString("messageSixMonth"));
        alert3.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                return;
            }
        });
        alert3.setIcon(R.drawable.app_icon);
        alert3.show(); 
```

// 在这里你可以做更多的事情或关闭活动。}

不确定，但可能对您有帮助。

如果对您有帮助，请随时发表评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T00:15:00.937

[ActivityManager 类](http://developer.android.com/reference/android/app/ActivityManager.html)可以为您提供当前的前台活动（即使它不是来自您的应用程序）。[getRunningTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)方法会给你一个正在运行的任务列表，列表的第一个元素是最近启动的活动。不幸的是，这个方法只会给你一个最近任务信息类型的对象，[而](http://developer.android.com/reference/android/app/ActivityManager.RecentTaskInfo.html)不是活动本身，所以没有办法调用它的完成（）方法，我相信：/

另一方面，如果您想从您的应用程序中关闭当前活动，您可以在个人类上实现一个静态变量，每个活动将在其 onResume() 方法中设置该变量。这样，您将始终知道当前活动是什么活动。但我想这不是你要找的。

编辑： getRunningTasks 仅用于调试目的，如文档所述。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T15:33:59.477

正如其他答案所建议的那样，您可以简单地在广播接收器代码中的活动上调用 finish() ，或者您甚至可以自己触发后退按钮按键事件。

```
this.dispatchKeyEvent(new Keyevent(ACTION_DOWN, KEYCODE_BACK)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-08T05:59:13.873

创建一个通用 Activity 类并从所有 Activity 扩展这个通用类，这样您就可以拥有一个集中的代码。在活动的 onStart 中注册广播接收器并在 onStop 中取消注册，这样只有一个活动，可见的活动将被注册用于广播意图。

示例代码：

```
public class BaseActivity extends Activity {

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        registerReceiver(receiver, new IntentFilter(YOUR_INTENT_FILTER)); 
    }
    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onStop()
     */
    protected void onStop(){
        unregisterReceiver(receiver);
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onStart()
     */
    protected void onStart(){
        super.onStart();
        registerReceiver(receiver, new IntentFilter(YOUR_INTENT_FILTER)); 
    }

    private BroadcastReceiver receiver = new BroadcastReceiver() {

        /*
         * (non-Javadoc)
         * 
         * @see
         * android.content.BroadcastReceiver#onReceive(android.content.Context,
         * android.content.Intent)
         */
        @Override
        public void onReceive(Context context, Intent intent) {
            onBackPressed();//on back pressed simply calls finish()
        }
    };
} // End of BaseActivity 
// End of File 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-08T08:55:12.793

`finish();`在你完成课堂上的所有任务后`onReceive()`放置如下`BroadcastReceiver`：

```
 @Override
 public void onReceive(Context context, Intent intent) {
    // Do all the tasks onReceive of BroadCast Receiver
    finish(); // This finishes the current activity here....   
} 
```

# scala - 我应该如何编译这个火花示例？

> ID：14639838
> 
> 赞同：1
> 
> 时间：2013-02-01T04:39:48.897
> 
> 标签：scala, apache-spark

我是 spark 集群的新手，实际上我正在运行 spark 网站上给出的示例。

```
/*** SimpleJob.scala ***/
import spark.SparkContext
import SparkContext._

object SimpleJob extends Application {
  val logFile = "//var//log//syslog" // Should be some file on your system
  val jarName:Seq[String] = "target//scala-2.9.2//simple-project_2.9.2-1.0.jar"
  val sc = new SparkContext("local", "Simple Job", "/home/subodh/Downloads/spark-0.6.1/bin",jarName)
  val logData = sc.textFile(logFile, 2).cache()
  val numAs = logData.filter(line => line.contains("a")).count()
  val numBs = logData.filter(line => line.contains("b")).count()
  println("Lines with a: %s, Lines with b: %s".format(numAs, numBs))
} 
```

当我使用 sbt package 命令编译它时，它给了我以下错误：

```
[error] /home/subodh/Downloads/spark-0.6.1/example/src/main/scala/SimpleJob.scala:7: type mismatch;
**[error]  found   : java.lang.String("target//scala-2.9.2//simple-project_2.9.2-1.0.jar")
[error]  required: Seq[String]**
[error]   val jarName:Seq[String] = "target//scala-2.9.2//simple-project_2.9.2-1.0.jar"
[error]                             ^
[error] one error found
[error] {file:/home/subodh/Downloads/spark-0.6.1/example/}default-9e9e7d/compile:compile: Compilation failed
[error] Total time: 3 s, completed Jan 31, 2013 11:31:21 PM 
```

感谢您在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:47:04.567

`jarName`被声明为类型`Seq[String]`，但你给了它`String`“target//scala-2.9.2//simple-project_2.9.2-1.0.jar”。更改值以`Seq("target//scala-2.9.2//simple-project_2.9.2-1.0.jar")`修复它。

```
scala> val jarName:Seq[String] = Seq("target//scala-2.9.2//simple-project_2.9.2-1.0.jar")
jarName: Seq[String] = List(target//scala-2.9.2//simple-project_2.9.2-1.0.jar) 
```

# c# - ITextSharp 编辑现有的 pdf

> ID：14639839
> 
> 赞同：6
> 
> 时间：2013-02-01T04:39:53.243
> 
> 标签：c#, itextsharp

我想使用 iTextSharp 向现有 PDF 文件添加文本，我发现了不同的方法，但在所有这些方法中，作者和阅读器都是单独的 pdf 文件。我想要一种方法，这样我就可以打开一个 pdf，然后在不同的位置写不同的东西。现在我有这个代码，但它会创建一个新文件。

```
using (FileStream stream1 = File.Open(path, FileMode.OpenOrCreate))
      {
      BaseFont bf = BaseFont.CreateFont(fontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
      PdfReader reader = new PdfReader("C:\\26178DATA\\pdf\\holding.pdf");
      var pageSize = reader.GetPageSize(1);
      PdfStamper stamper = new PdfStamper(reader, stream1);
      iTextSharp.text.Font tmpFont = new iTextSharp.text.Font(bf, fontSize);
      PdfContentByte canvas = stamper.GetOverContent(1);
      Phrase ph = new Phrase(words[1], tmpFont);
      ph.Font = tmpFont;
      canvas.SetFontAndSize(bf, fontSize);
      ColumnText.ShowTextAligned(canvas, Element.ALIGN_LEFT, ph, iTextSharp.text.Utilities.MillimetersToPoints(x * 10), pageSize.GetTop(iTextSharp.text.Utilities.MillimetersToPoints(y * 10)), 0);
      stamper.Close();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:14:21.730

您*想使用 iTextSharp 将文本添加到现有 PDF 文件中，找到了不同的方法，但在所有这些方法中，作者和阅读器都是单独的 pdf 文件。*

由于 iText(Sharp) 使用 PdfStamper 处理 PDF 的常规方式可能涉及对现有 PDF 元素的重大重组，因此 iText 不会就地编辑文件。另一种方式，使用附加模式，将允许就地编辑；但没有实施这样的选择。就地编辑的一大缺点是，如果某些程序出现故障，相关文件可能仍处于中间的不可用状态。

话虽如此，您可以通过首先将文件完全读入内存然后开始使用相同路径创建输出来将新文件保存到原始文件的路径。如果您的示例代码暗示至少在创建输出流之前移动 PdfReader 构造函数使用：

```
PdfReader reader = new PdfReader(path);
using (FileStream stream1 = File.Open(path, FileMode.OpenOrCreate))
{
    BaseFont bf = BaseFont.CreateFont(fontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
    ... 
```

或者，您可以在内存中创建结果文件，即在 MemoryStream 而不是 FileStream 中，完成后，将内存流的内容写入源文件路径。

# sql - Hibernate createSQLQuery 和 Toad SQL 查询返回不同的结果——参数问题？

> ID：14639844
> 
> 赞同：0
> 
> 时间：2013-02-01T04:40:26.810
> 
> 标签：sql, hibernate, jpa

我是 Hibernate 的新手，所以如果其中一些非常明显，请原谅，但这是非常非常漫长的一天。我正在尝试在 Hibernate 和 Toad/Oracle 中创建和执行一个简单的查询。

Toad/Oracle sql 读取： select count(*) from fpps_owner.fee_claim_payment_lines l, fpps_owner.fee_claim_payments p 其中 l.fee_claim_payment_id = p.fee_claim_payment_id 和 p.claim_index = 87167895

以上返回10条记录，正确

以下 Java 代码返回 0 条记录，这是不正确的 String sLinesAvailable = "select count(*) from " + "fpps_owner.fee_claim_payment_lines l, fpps_owner.fee_claim_payments p " + "where " + "l.fee_claim_payment_id = p.fee_claim_payment_id 和 p .claim_index = :id";

```
 Query qLinesAvailable = em.createNativeQuery(sLinesAvailable);
 qLinesAvailable.setParameter("id", "87167895");        // fails
 qLinesAvailable.setParameter("id", 87167895);    // fails

 List<Object> out = (List<Object>) qLinesAvailable.getResultList();
 BigDecimal x = (BigDecimal) out.get(0); 
```

返回 0 条记录。使用 .getSingleResult() 也返回 0 条记录。

我在这里想念什么？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:38:51.357

如果您没有看到任何格式错误的查询错误，则该参数似乎没有正确绑定。

要进行调试，我会在您设置参数后的行中打印出该 SQL 语句。这是您在设置参数后查看 SQL 以便与 Toad 进行比较的唯一方法。

你的绑定文件是什么样的？也许您的 ID 有不同的名称，因此无法根据名称找到它。尝试与参数的 order 值绑定，就像测试一样。

这可能会给出一些想法：[http ://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/](http://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/)

祝你好运！我们都去过那里:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:40:01.417

当您尝试时会发生什么：

```
 (Number) query.getSingleResult(); 
```

您的查询不返回一个列表，而只是一个计数。

祝你好运。

# c# - 在 C# 中编辑已知 HTML 元素并添加属性

> ID：14639845
> 
> 赞同：0
> 
> 时间：2013-02-01T04:40:29.163
> 
> 标签：c#, browser

我想弄清楚我将如何做到这一点：

HTML：

```
<input type="password" id="j_password" name="j_password" autocomplete="on"> 
```

我将如何让我的 webBrowser1 添加`value="testpass"`元素，因此在执行后该文档将具有：

```
<input type="password" id="j_password" name="j_password" autocomplete="on" value="testpass"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:46:34.487

使用`SetAttribute`方法：

```
webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;

void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
    webBrowser1.Document.GetElementById("j_password").SetAttribute("value", "testpass");
} 
```

# node.js - 安装了 node.js 版本 0.8 但 node --version 仍然显示以前的版本 0.6.12

> ID：14639848
> 
> 赞同：6
> 
> 时间：2013-02-01T04:41:10.147
> 
> 标签：node.js, ubuntu, installation, ubuntu-12.04

我尝试在我的 ubuntu 12.04 上安装节点 0.8。它已经有一个节点 0.6.12。安装成功但是当我输入

```
node --version 
```

它仍然显示以前的版本。我尝试使用 sudo apt-get remove node 删除以前的版本，但它说未安装包节点。但是在尝试 node --version 时它显示 0.6.12 为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T06:41:52.353

问题是，您需要将节点的新位置替换为 PATH 变量中的旧位置。如果您有旧的手动安装，请通过运行找到节点的旧路径`echo $PATH`。然后运行这个命令：

```
export PATH=${PATH%$OLD_NODE_PATH/bin*}$NEW_NODE_PATH/bin${PATH#$*OLD_NODE_PATH/bin} 
```

或者，如果您使用来自 apt-get 存储库的安装，只需运行：

```
export PATH=$NEW_NODE_PATH/bin 
```

那应该可以解决您的问题。但是有更好的方法！管理 node.js 环境的最佳工具是[NVM](https://github.com/creationix/nvm)。如果您熟悉这些工具，它与 ruby​​ 的 RVM 和 python 的 virtualenv 完全一样。它允许您非常有效地切换节点版本并下载新版本，并且易于使用。下载并安装：

```
curl https://raw.github.com/creationix/nvm/master/install.sh | sh 
```

然后将此行添加到您的 bash 中（假设您正在运行 bash shell），它将被加载（我更喜欢 .bash_login 用于个人内容，尽管默认情况下不加载）：

```
[[ -s $HOME/.nvm/nvm.sh ]] && . $HOME/.nvm/nvm.sh 
```

获取您的 bash 脚本或重新启动终端，然后输入以下命令：

```
nvm install 0.8.0 && nvm use 0.8.0 
```

这应该让你很好。尽管没有必要，但为了整洁起见，您可能应该摆脱所有其他节点安装。查看他们的 github 页面，但为了让您开始，这里有一个快速概述：

```
nvm ls                   # list all installed versions of node
nvm ls-remote            # list all available versions of node
nvm install 0.9.8        # download and install node v0.9.8
nvm use 0.8.0            # switch current environment to use node v0.8.0
nvm alias default 0.8.0  # set 0.8.0 as default, you can use 'nvm use default' 
nvm deactivate           # use system install of node
nvm run default app.js   # run app.js with default node version 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T04:21:28.113

I had this issue until I followd the directions on [https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)

which included running:

```
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update 
```

first. Then running `sudo apt-get install nodejs npm` got me to 0.8.x

Also see: [http://apptob.org/](http://apptob.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T04:43:51.927

好像你从 Ubuntu repo 安装 nodejs 包并在之后手动安装 node 0.8？尝试删除 nodejs 包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-02T10:32:38.953

The way to get a more recent version of Node.js is to add a PPA (personal package archive) maintained by NodeSource. This will probably have more up-to-date versions of Node.js than the official Ubuntu repositories.

First, you need to install the PPA in order to get access to its contents:

```
curl -sL https://deb.nodesource.com/setup | sudo bash - 
```

The PPA will be added to your configuration and your local package cache will be updated automatically. After running the setup script from nodesource, you can install the Node.js package using the below command.

```
sudo apt-get install nodejs 
```

You can check the node by using this command

```
node -v 
```

# ruby - 是否有适用于 ruby 的 ElastiCache 集群客户端自动发现功能？

> ID：14639856
> 
> 赞同：2
> 
> 时间：2013-02-01T04:41:53.317
> 
> 标签：ruby, amazon-elasticache

是否有为 Ruby 实现/存在的自动发现客户端？

Amazon 的 ElasticCache AutoDiscovery PHP 客户端于 2013 年 1 月 3 日发布。

[http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html](http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html)

Python 的类似问题 - [Memcached：AWS Elasticache 上的自动发现 python 支持？](https://stackoverflow.com/questions/14612632/memcached-auto-discovery-python-support-on-aws-elasticache)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-29T23:27:44.947

看看[dalli-elasticache](https://github.com/ktheory/dalli-elasticache)。

# tsql - 具有来自 TVP 的多个值的 T-SQL UPSERT 表

> ID：14639859
> 
> 赞同：1
> 
> 时间：2013-02-01T04:42:14.737
> 
> 标签：tsql, sql-server-2012, upsert, table-valued-parameters

我使用 SQL Server 2012 和 T-SQL 作为查询语言。

我需要帮助使用作为参数传递的一个 ID 值 (@userGroupID) 和许多函数 ID 来更新/插入 [cross_function_user] 中的多个列。它们是 C# 中的 List，并作为表值参数传递给 sproc - 只有一列 int，名为 Item。

```
ALTER PROCEDURE [whatever]
    @userGroupID INT,
    @listID AS IntList READONLY
AS
BEGIN   
        SET NOCOUNT ON;
    MERGE INTO [dbo].[cross_function_user] USING @listID
    ON [dbo].[cross_function_user].id_group_user = @userGroupID
    WHEN MATCHED THEN
        UPDATE SET [cross_function_user].id_group_user = @userGroupID,
                   [cross_function_user].id_function = (SELECT Item FROM @listID)
    WHEN NOT MATCHED THEN
        INSERT (id_group_user, id_function) 
        VALUES (@userGroupID, (SELECT Item FROM @listID) );

END 
```

首先，它当然会错误“子查询返回多个结果”，但是我缺乏重写它的技能，而且我不确定我的 upsert 是否以正确的方式编写。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:23:32.640

Try this:

You need to replace YourColumn with the name of the column in your TVP.

```
ALTER PROCEDURE [whatever]
@userGroupID INT,
@listID AS IntList READONLY
AS
BEGIN   
    SET NOCOUNT ON;
    MERGE INTO [dbo].[cross_function_user] USING @listID
    ON [dbo].[cross_function_user].id_group_user = @userGroupID
    WHEN MATCHED THEN
        UPDATE SET [cross_function_user].id_function = S.YourColumn
    WHEN NOT MATCHED THEN
        INSERT (id_group_user, id_function) 
        VALUES (@userGroupID, S.YourColumn);

END 
```

# ruby-on-rails - 使用 Capybara 我将如何覆盖现有的字段值？

> ID：14639865
> 
> 赞同：2
> 
> 时间：2013-02-01T04:42:37.767
> 
> 标签：ruby-on-rails, rspec, capybara

我目前正在使用 Capybara 在表单的字段中填写现有值的页面上测试表单。我想测试能够将新值放入字段并使用新值提交表单。

当我尝试使用 Capybara 的 fill_in 方法时，它会忽略具有现有值的字段。无论如何用 Capybara 中的现有值覆盖字段？

我将包括以下表格：

```
<form accept-charset="UTF-8" action="/submissions/1/reviews/4" class=
  "simple_form edit_review" id="edit_review_4" method="post" novalidate="novalidate"
  name="edit_review_4">
    <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="&#10003;"><input name="_method" type=
      "hidden" value="put"><input name="authenticity_token" type="hidden" value=
      "gJ/KKAodeIJD8PPnRNeN4GaGb/yqvUDHrsnl9LqLP/c=">
    </div>

    <div class="input integer optional">
      <label class="integer optional control-label" for=
      "review_rating">Rating</label><input class="numeric integer optional" id=
      "review_rating" name="review[rating]" step="1" type="number" value="33">
    </div>

    <div class="input text required">
      <label class="text required control-label" for="review_comment"><abbr title=
      "required">*</abbr> Comment</label>
      <textarea class="text required" cols="40" id="review_comment" name=
      "review[comment]" rows="20">
hellofsdf
</textarea>
    </div><input class="btn" name="commit" type="submit" value="Update Review">
  </form> 
```

我试过的水豚代码是：

```
find(:xpath, "//*[(@id = 'review_comment')]").set "hello" 
```

我也尝试过使用评级字段的类似方法，因为评级是一个文本字段，而评论是一个文本区域，但我仍然无法改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:45:15.543

使用带有 XSLT 表达式的 find 应该可以解决问题

```
find(:xpath, "//input[@id='field_with_default_value_id']").set "my value" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T21:52:34.667

使用 phantomjs/poltergeist 之类的 javascript 驱动程序，然后使用 javascript 设置类似的值。

```
page.evaluate_script("document.getElementById('#some-id').value = 'some-value'"); 
```

类似于我对[这个](https://stackoverflow.com/questions/10804897/how-to-fill-hidden-field-with-capybara/21893022)问题的回答。

# iphone - 谷歌字体不显示在 iPhone 上

> ID：14639866
> 
> 赞同：0
> 
> 时间：2013-02-01T04:42:38.370
> 
> 标签：iphone, fonts

我需要知道为什么 google font API 不能在 iPhone 上运行，它没有显示我为网站选择的好字体

[http://studioteknik.ca/stada/](http://studioteknik.ca/stada/)

检查侧边栏上的字体...现在应该是压缩的，这很正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:20:18.057

我使用了[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)和 @fontface 的组合，效果很好！

# wordpress - wordpress 3.5 更新后，wordpress 网站的带宽使用量突然增加

> ID：14639868
> 
> 赞同：0
> 
> 时间：2013-02-01T04:42:47.730
> 
> 标签：wordpress, bandwidth

我面临带宽问题，去年（2012 年）我的 wordpress 网站的全年带宽使用量为 11.66 GB，在 2013 年 1 月上旬将 wordpress 更新到 3.5 版后，我的网站在 2013 年 1 月的带宽使用量为 38.76 GB。

有人对这个问题有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:59:49.973

我建议您通过 FTP 到您的站点并检查您的所有子目录...我以前遇到过这种情况，这是由于 FTP 被黑客入侵以及有人在我的托管域上托管 p0rn 图像造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:29:53.547

自更新以来，我的传出带宽也出现了大幅飙升。当我编辑帖子和上传媒体时，它现在显示可用图片的漂亮网格，但它似乎每次都在下载整张图片而不是缩略图。

# java - jar - cvf 命令没有运行？

> ID：14639869
> 
> 赞同：0
> 
> 时间：2013-02-01T04:42:55.863
> 
> 标签：java, hadoop, jar

我在 MapReduce 中创建了一个 wordcount 示例，并尝试使用以下命令制作 jar 文件：

```
hduseros@MT2012018:/usr/local/hadoop$ jar -cvf playground/wordcount.jar -C playground/classes 
```

但它根本没有运行并给我以下结果：

```
hduseros@MT2012018:/usr/local/hadoop$ jar -cvf playground/wordcount.jar -C playground/classes
Usage: jar {ctxui}[vfm0Me] [jar-file] [manifest-file] [entry-point] [-C dir] files ...
Options:
    -c  create new archive
    -t  list table of contents for archive
    -x  extract named (or all) files from archive
    -u  update existing archive
    -v  generate verbose output on standard output
    -f  specify archive file name
    -m  include manifest information from specified manifest file
    -e  specify application entry point for stand-alone application 
        bundled into an executable jar file
    -0  store only; use no ZIP compression
    -M  do not create a manifest file for the entries
    -i  generate index information for the specified jar files
    -C  change to the specified directory and include the following file
If any file is a directory then it is processed recursively.
The manifest file name, the archive file name and the entry point name are
specified in the same order as the 'm', 'f' and 'e' flags.

Example 1: to archive two class files into an archive called classes.jar: 
       jar cvf classes.jar Foo.class Bar.class 
Example 2: use an existing manifest file 'mymanifest' and archive all the
           files in the foo/ directory into 'classes.jar': 
       jar cvfm classes.jar mymanifest -C foo/ . 
```

请纠正我错的地方。我已经设置了类路径。我可以运行已经存在但无法制作 jar 文件的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:04:48.493

这可能是因为您没有给它提供它需要从中选择文件的位置。试试这个：

```
jar -cvf playground/wordcount.jar -C playground/classes . 
```

并包括最后一个点 (.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:46:42.067

尝试消除破折号：`jar cvf`，不`jar -cvf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T04:52:09.957

尝试执行以下命令：

```
jar cvf playground/wordcount.jar playground/classes/*.class 
```

另请参阅：[构建接口类的 JAR 文件](http://docs.oracle.com/javase/tutorial/rmi/compiling.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T15:52:25.060

-C 选项只是将您的目录更改为您之后给出的参数。切换到该目录后，您**仍然**应该添加要添加到 jar 文件的文件/目录。

请查看[jar 命令的文档](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jar.html)。

# asp.net - 当我通过单击菜单重定向到任何页面时如何将登录用户名传递给所有页面

> ID：14639870
> 
> 赞同：1
> 
> 时间：2013-02-01T04:42:58.913
> 
> 标签：asp.net

我正在 asp.net 网站项目中创建一个客户模块。我开发了登录页面，并从登录页面进入客户主页。在这里，我提供菜单项，例如

1.  customerprofile 2.customerpurchased items 3.customervieweditems 4.customerbiilingpage like

在这里，我需要使用的每个页面都应该直接在页面加载中使用登录 ID。

请任何人帮助我如何将登录用户ID传递到以上4个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:51:49.910

你为什么不使用 Session ？会话是您的方案的最佳情况。或者，如果您想使用身份验证机制，请选择 Membership Provider，FormsAuthentication。[如何实现简单表单身份验证](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)

```
Session["UserID"]=yourUseID; 
```

取回

```
var userID=Session["UserID"].ToStrin(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:47:45.517

您应该查看此站点的身份验证。使用 FormsAuthenticationTicket 搜索 FormsAuthentication，或使用更新的 Memebership 和 Roles 功能。正确执行此操作，您实际上不会“通过”登录，而是从`HttpContext.Current.User.Identity`容器中读取它。

# css - 如何将 iframe 设置为 div 样式？（位置：固定）

> ID：14639873
> 
> 赞同：3
> 
> 时间：2013-02-01T04:43:22.257
> 
> 标签：css, iframe, google-chrome-extension

我有一个`div`包含一堆带有相应 css 的标签，所有这些标签都需要移动到 iframe 中。但是，当我这样做时，iframe 版本看起来会有所不同。

我已经将应用于父页面的这些部分的 css 复制到 iframe 的样式表中。但是，在为 的边框设置样式时`div -> iframe`，不清楚哪些样式应该应用于`body`iframe 的标签，哪些样式应该应用于`iframe`父页面中的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:58:50.130

你只需要给两个元素相同的样式。

**HTML**

```
<iframe src="http://example.com" frameborder="0"></iframe>
<div></div> 
```

*注意：*该`frameborder`属性对于 IE<9 以避免难看的 3D 边框至关重要。

**CSS**

```
iframe,div {
    width: 450px;
    height: 250px;
    border: 1px solid #ccc;
    display: block;

    padding: 0;
    margin: 10px 20px;
} 
```

这是一个[包含该代码的小提琴](http://jsfiddle.net/8aaCU/1/)。

# java - Hibernate 中的分页

> ID：14639875
> 
> 赞同：1
> 
> 时间：2013-02-01T04:43:38.870
> 
> 标签：java, spring, hibernate

我有一个 MySQL Strred 过程，我想使用 Hibernate 调用存储过程并希望使用分页显示结果。

我试过下面的代码：

```
public List<Master> getAbsentDetails(String fromdate, String todate,int pno) {
        Query query=getSession().getNamedQuery("AbsentReportproc");
        System.out.println("Test");
        query.setParameter("_fromdate", fromdate);
        query.setParameter("_todate", todate);
        query.setMaxResults(10);
        query.setFirstResult(ps*(pno-1));

        List<Master> empList=query.list();
        return empList;} 
```

但是当我执行上面的代码时，我会显示以下错误：

```
org.hibernate.util.JDBCExceptionReporter logExceptions
WARNING: SQL Error: 1064, SQLState: 42000
Feb 1, 2013 10:08:11 AM org.hibernate.util.JDBCExceptionReporter logExceptions
SEVERE: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'limit 10' at line 1 
```

**注意：** 如果我删除以下语句

```
 query.setMaxResults(10); 
```

然后我在 jsp 页面中显示我的存储过程的结果

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:08:06.057

当我遇到同样的问题时，我将 set maxresult 移到下面并且工作正常

```
criteria.setFirstResult(10* (pageNumber - 1));
criteria.setMaxResults(10); 
```

# c# - c#解析字体错误

> ID：14639876
> 
> 赞同：0
> 
> 时间：2013-02-01T04:43:50.797
> 
> 标签：c#, parsing, fonts

我有一个没有使用 System.Windows.Forms 而是使用 System.Windows.Controls 的两个窗口基本系统，其中一个创建了一个 FontDialog，所以我必须包含 System.Windows.Forms，否则我将无法拥有字体对话框。在另一个窗口中，我有一个 RichTextBox，它应该使用在另一个窗口的 F​​ontDialog 中选择的字体/大小/样式。

这是创建 FontDialog 的窗口的类：

```
public partial class Window1 : Window
{
    public FontDialog font;

    public Window1(String name)
    {
        InitializeComponent();
        this.textBox1.Text = name;
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        font = new FontDialog();
        font.ShowDialog();
    }
} 
```

在这里我调用 Window1 并尝试使用它的字体。

```
private void button2_Click(object sender, RoutedEventArgs e)
{
    Window1 a = new Window1(this.name);
    a.ShowDialog();

    var cvt = new FontConverter();
    string s = cvt.ConvertToString(a.font.Font);

    Console.Out.WriteLine("Value is: " + s);

    System.Windows.Media.FontFamily g = (System.Windows.Media.FontFamily) cvt.ConvertFromString(s);

    if (g != null)
    {
         this.textBox2.FontFamily = g;
    }
} 
```

它准确地输出在 FontDialog 中选择的内容，但随后在“this.textBox2.FontFamily = g;”行崩溃：

```
Value is: Microsoft Sans Serif; 8,25pt
'_.NetworkingGT_Incrementer.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\WindowsBase.resources\v4.0_4.0.0.0_pt-BR_31bf3856ad364e35\WindowsBase.resources.dll'
A first chance exception of type 'System.ArgumentException' occurred in WindowsBase.dll
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll
'_.NetworkingGT_Incrementer.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xaml.resources\v4.0_4.0.0.0_pt-BR_b77a5c561934e089\System.Xaml.resources.dll'
A first chance exception of type 'System.Xaml.XamlObjectWriterException' occurred in System.Xaml.dll
A first chance exception of type 'System.Windows.Markup.XamlParseException' occurred in PresentationFramework.dll

An unhandled exception of type 'System.Windows.Markup.XamlParseException' occurred in PresentationFramework.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:21:37.837

解决了：

```
var cvt = new FontConverter();

string s = cvt.ConvertToString(a.font.Font);

Console.Out.WriteLine("Value is: " + s);

System.Windows.Media.FontFamily g = new System.Windows.Media.FontFamily(s);

Console.Out.WriteLine("Value is: " + g.ToString());

this.textBox2.FontFamily = g; 
```

两个输出相等。

# security - 欺骗回声回复

> ID：14639879
> 
> 赞同：0
> 
> 时间：2013-02-01T04:44:03.190
> 
> 标签：security, networking, network-programming, icmp, spoofing

假设我在本地网络上，如果我可以捕获 ICMP 回显请求数据包，并且考虑到我想欺骗回显回复，那么假设我制作原始数据包的副本，我需要更改原始数据包的哪一部分在我寄回去之前？我猜 IP 标头需要更改（原始的目标 IP 将成为源，反之亦然）以及 ICMP 标头（类型需要更改为 ECHO_REPLYPACKET）。但是除了这两个之外还有其他的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:30:42.753

Quoting [RFC 792](https://www.rfc-editor.org/rfc/rfc792) :

```
Echo or Echo Reply Message

0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Code      |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Identifier          |        Sequence Number        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Data ...
+-+-+-+-+- 
```

> To form an echo reply message, the source and destination addresses are simply reversed, the type code changed to 0, and the checksum recomputed.

`Identifier` and `Sequence Number` must be `0` as well.

[RFC 1071](https://www.rfc-editor.org/rfc/rfc1071) shows you how to calculate the `Checksum`

# css - IE8 - 页脚 div 浮动在中间

> ID：14639888
> 
> 赞同：0
> 
> 时间：2013-02-01T04:45:00.913
> 
> 标签：css, internet-explorer-8, css-float, footer

我已经在 Stackoverflow 的相关线程中尝试了很多建议。然而，它似乎没有奏效。请检查我的网站[http://popundernetwork.com](http://popundernetwork.com) - 页脚在 Chrome、Firefox 等上正常工作。但在 IE 8 上，页脚不仅浮动在中间，而且还阻止人们在表单输入屏幕上输入详细信息。

我已经尝试过这个职位：绝对；底部：0；命令以及 clear:both 在页脚 div 上。这仍然没有解决 IE 8 浏览器上的问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:15:39.573

It's issue is not *fixed* in any browser if you ask me. (no pun intended)

Your body is becoming shorter than page height when you make you footer absolute. Remove the position and the padding entirely from your footer and it should solve everything.

# regex - 如何使用 gsub 提取两个句点之间的单词

> ID：14639892
> 
> 赞同：4
> 
> 时间：2013-02-01T04:45:33.323
> 
> 标签：regex, r, gsub

我有一个看起来像这样的文本：

```
txt <- "w.raw.median" 
```

我想在两个句点（`.`）之间提取第二个单词，给出这个输出

```
> raw 
```

但是为什么这不起作用

```
gsub(".*\\.", "", txt) 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T04:47:36.830

试试这个：

```
gsub(".*\\.(.*)\\..*", "\\1", txt)
[1] "raw" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T04:52:12.547

还要考虑

```
strsplit(txt,'.',fixed=TRUE)[[1]][2] 
```

对于（稍微）更具可读性的版本

# wpf - 如何根据 WPF 中的数据类型更改控件

> ID：14639895
> 
> 赞同：1
> 
> 时间：2013-02-01T04:45:51.960
> 
> 标签：wpf, datatemplate

我必须使用 WCF 服务从 DB 中检索值，并使用 ID-Type 值填充名为“Type”的下拉列表（使用 observable 集合来绑定它）。

应该有另一个由数据模板/控件模板控制的控件，将根据选择的类型显示。例如，如果选择了 TextBox 类型，则应该使用一些默认值显示 TextBox。

InputType 文本框 - 这将用于在 DB 中创建新类型。使用保存按钮来保存价值。

删除按钮 - 这应该从数据库中删除选定的类型。

我已经完成了 DataBase Stuff 和所有内容，但是我应该如何根据 XAML 中的数据类型更改控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:54:32.937

您可以使用具有将选择（通过触发器）包含适当控件类型的不同 ControlTemplates 的样式的通用 ContentControl。

这种方法也可以稍作修改以使用 DataTemplates 而不是 ControlTemplates（可以说是更好的方法）。不要设置 Template 属性（它是一个 ControlTemplate），而是设置 ContentTemplate 属性（它是一个 DataTemplate）并用您想要的控件填充每个 DataTemplate。

```
<Window x:Class="ControlTypeBasedOnComboBox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <ComboBox Grid.Row="0"
              ItemsSource="{Binding Path=ControlTypes}"
              x:Name="ControlTypeComboBox"/>
    <ContentControl Grid.Row="1">
        <ContentControl.Style>
            <Style TargetType="ContentControl">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=ControlTypeComboBox, Path=SelectedItem}" Value="TextBox">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ContentControl">
                                    <TextBox/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=ControlTypeComboBox, Path=SelectedItem}" Value="CheckBox">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ContentControl">
                                    <CheckBox/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=ControlTypeComboBox, Path=SelectedItem}" Value="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ContentControl">
                                    <Button/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</Grid> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new ViewModel();
    }
} 
```

视图模型：

```
public class ViewModel
{
    ObservableCollection<string> controlTypes;
    public ViewModel()
    {
        controlTypes = new ObservableCollection<string>() { "TextBox", "CheckBox", "Button" };
    }

    public ObservableCollection<string> ControlTypes
    {
        get { return controlTypes; }
    }
} 
```

至于保存/删除按钮，您还可以根据 ComboBox 的 SelectedItem 将 Command 属性绑定到 View Model 上的不同 ICommand 对象。我不确切知道您需要什么样的功能，所以我不知道这是否必要/合适。

希望有帮助！

# c++ - 在 cpp 中声明的 C++ 访问常量值

> ID：14639897
> 
> 赞同：0
> 
> 时间：2013-02-01T04:46:04.520
> 
> 标签：c++, visual-c++

我有一个 main 方法，`main.cpp`我想显示`int`我声明的常量的值。

我添加了一个`DeclareConstant`类。

这是我的 DelcareConstant.h

```
#pragma once
class DeclareConstant
    {

 public:
     const int x;
     Part1(void);
     Part1(int x);
     ~Part1(void);
     double getX(){return x;}
 }; 
```

和来源

```
#include "Part1.h"

Part1::Part1() : x(55){
} 
```

如何访问 X 以便在我的主要方法中显示它？我需要检查我是否正确初始化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:47:45.137

您可以`x`通过 getter 函数访问`getX()`，例如：

```
DeclareConstant dc;
std::cout << dc.getX() << std::endl; 
```

或者

```
DeclareConstant dc;
std::cout << dc.x << std::endl; 
```

但是，您应该像这样定义您的 getX：

```
class DeclareConstant
{

 public:
     int getX() const {return x;}

 private:
  const int x; 
 }; 
```

请隐藏你的班级成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:49:32.110

您需要一个*对象*或*实例*来`DeclareConstant`访问`DeclareConstant`的`x`成员。

```
DeclareConstant myConst;
std::cout << myConst.x << std::endl;   // Use x 
```

但是出于您*可能的*目的和意图，您可以将`x`其设为*静态成员*。

```
class DeclareConstant {
public:
   static const int x = 55;
   // ...
} 
```

您现在不需要实例来获取 的值`x`：

```
std::cout << DeclareConstant::x << std::endl;   // Use x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T04:53:20.207

如果所有实例都使用相同的常量值，则可以将其设为静态。这有几个优点。

您可以如下定义它。

类第 1 部分{

公共：静态常量 int x = 42；第 1 部分（无效）；第 1 部分（int x）；〜第1部分（无效）；双 getX(){返回 x;} };

并简单地访问它`Part1::x`。你也应该做`getX`静态，然后你可以做`Part1::getX()`。

`const`如果每个实例都有自己的值，这将不起作用。

# java - Struts 2 s:select tag 动态id

> ID：14639898
> 
> 赞同：5
> 
> 时间：2013-02-01T04:46:08.540
> 
> 标签：java, javascript, jsp, struts2, ognl

我在一个 JSP 页面和一个按钮中有多个不同类型的字段。这些字段是根据从我创建的元数据表中获取的信息生成的。

由于我不知道存在多少和什么类型的字段，**所以我给`id`他们动态的**。我在我的 JSP 中使用 Struts 2 标签。

问题出在`<s:select>`标签上：当我在属性中给出 scriplet 时`id`，它显示以下错误：

> org.apache.jasper.JasperException: /success.jsp(83,12) 需要引用符号

```
<s:if test="%{#masterColDO.controlType=='dropdown'}">
    <s:select styleClass="login-textbox" 
                   style="width:130px"  
                    list="#masterColDO.validation"     
                    name="chngdColumnValues" 
                      id=<%="columnId" + count%> />
</s:if> 
<s:else>
    <input type=<s:property value="#masterColDO.controlType" /> 
          class="login-textbox " 
           name="chngdColumnValues" 
             id=<%="columnId" + count%> />
</s:else> 
```

Javascript如下：

```
var addUpdateBtnId = document.getElementById('addUpdateBtnId');
addUpdateBtnId.value='Update';
addUpdateBtnId.onclick = function() {
    onClickUpdateBtn(rowIndex);
};
var selectedUpdateRow = xmlhttp.responseText.split(",");
for(var i = 0; i < selectedUpdateRow.length; i++){
    var columnElementId = "columnId"+i;
    document.getElementById(columnElementId).value = selectedUpdateRow[i];
}
document.getElementById("columnId"+(primaryKeyPos-1)).readOnly = true; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T10:56:16.213

`Scriptlet`s 是旧的做事方式，[你应该避免在's 中编写`Java`代码`JSP`](https://stackoverflow.com/a/3180202/1654265)；
Struts2 仅使用它的标签帮助您实现相同的目标`OGNL`。

该`<input />`部分正在工作，因为您`scriptlet`在 HTML 标记内注入了一个，这是允许的。

该`<s:select />`部分不起作用，因为您`scriptlet`在 Struts2 标记内注入了一个，这是不允许的。

要使其工作，您应该使用`#attr`语法 in`OGNL`来访问在 中声明*并由您*推送的`Java`变量，如下所示（完全未经测试）：`Scriptlets`*`Page Context`*

 *```
<%
    for (int counter=0;counter<myList.size();counter++) {
       // pushing it into the pageContext
       pageContext.setAttribute("counter",counter);
%>
        <s:select cssClass="login-textbox" 
                  cssStyle="width:130px" 
                      list="#masterColDO.validation" 
                      name="chngdColumnValues"      
                        id="%{'columnId' + #attr['counter']}" />
<%    
    }
%> 
```

但是，即使在技术上可行，也不鼓励这样做。为此，您应该使用纯 Struts2 方式，如下所示：

```
<s:iterator value="myList" status="ctr">
    <s:select cssClass="login-textbox" 
              cssStyle="width:130px" 
                  list="#masterColDO.validation" 
                  name="chngdColumnValues" 
                    id="%{'columnId' + #ctr.index}" />
</s:iterator> 
```

* * *

PS：Struts 标签没有任何`styleClass`属性；您可以使用`cssClass`和/或`cssStyle`；
而且，如果`controlType`是一个字符串，你应该使用`.equals`而不是`==`: `<s:if test="%{#masterColDO.controlType.equals('dropdown')}">`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T06:44:03.940

你应该使用这样的 Struts2 表达式语法：

```
id="%{'columnId' + count}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:50:47.270

Struts2 usage valuestacks, So this count should be fetched in ognl manner, try something like this:

```
id="%{'columnId'+count}" 
```*

# html - 所有浏览器都支持径向渐变

> ID：14639900
> 
> 赞同：-5
> 
> 时间：2013-02-01T04:46:17.297
> 
> 标签：html, css

嗨，我想要的每个人都想要径向渐变 Css 代码，所有浏览器都支持哪一个，这在 html 中是可能的吗？我想在网站主背景中设置它。我总共使用 5 种浏览器 Mozilla、Chrome、ie9 和 ie8、safari、opera。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:07:41.567

尝试 Ultimate CSS Gradient Generator，用于径向或线性渐变，google it :)

# ios - 对于 NimbusKit NIToolbarPhotoViewController 有没有办法设置缩放比例

> ID：14639901
> 
> 赞同：1
> 
> 时间：2013-02-01T04:46:26.543
> 
> 标签：ios, xcode, nimbus, nimbus-ios

我通过继承它来使用 NIToolbarPhotoViewController。到目前为止一切正常，但我无法像使用滚动视图那样更改最大缩放比例。我准备好了

```
photoAlbumView.zoomingAboveOriginalSizeIsEnabled = YES 
```

和

photoAlbumView.pagingScrollView.maximumZoomScale = 100

但这并没有起到任何作用。它仍然使用默认的缩放系数，我认为它在 2 左右，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:08:49.710

尝试在 pageViewForIndex 数据源方法中的返回视图上将 maximumScale 设置为 100。

您看到的问题是在单个照片视图上设置了 maximumScale。分页滚动视图只是包含和管理多页照片的内容。

# java - Runtime.getRuntime().exec 在提示时传递参数

> ID：14639902
> 
> 赞同：4
> 
> 时间：2013-02-01T04:46:31.050
> 
> 标签：java, database, postgresql, process, runtime.exec

我正在使用下面的 Java 语句从 Java 代码启动 PostgreSQL 服务器。我正在使用`Runtime.getRuntime().exec()`方法来实现这一点。

```
 final Process startServer = Runtime.getRuntime().exec("PostgreQL -D data/dir/ start"); 
```

在这里，当服务器启用 SSL 并且密钥受密码保护时，在命令行中会提示输入密码（请参见下面的行）。在这种情况下，我该如何传递密码。

```
Is server running?
starting server anyway
waiting for server to start......Enter PEM pass phrase:.... 
```

提示时，我们是否可以选择将密码作为参数传递？或者在 PostgreSQL 中，我们是否有任何规定可以传递密码（例如`PostgreSQL -d data/dir/ -keyPass password start`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:56:15.173

您可以打开进程的 OutputStream 并传递将由服务器读取的密码，就好像您输入的密码来自 STDIN。

```
final Process startServer = Runtime.getRuntime().exec("PostgreQL -D data/dir/ start");
PrintStream ps = new PrintStream(startServer.getOutputStream());
ps.println(passPhrase); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:59:13.380

上面提供的答案的一种替代方法是创建[密码](http://www.postgresql.org/docs/current/static/libpq-pgpass.html)文件。

（例如`~/.pgpass`文件（Windows 上的 %APPDATA%\postgresql\pgpass.conf）格式为：

```
hostname:port:database:username:password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T05:03:09.613

从看看开始[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，它会让你的生活更轻松......

```
ProcessBuilder pb = new ProcessBuilder("PostgreQL", "-D", "data/dir/" "start");
Process p = pb.start();

InputStream is = p.getInputStream();
OutputStream os = p.getOutputStream();

// Create a separate thread to read the input as needed...
// Create a seperate thread to deal with the output as needed... 
```

# makefile - GNU 可以制作句柄空间吗？

> ID：14639906
> 
> 赞同：-1
> 
> 时间：2013-02-01T04:46:50.913
> 
> 标签：makefile, gnu-make

我有一个makefile，其中包含C INCLUDES，其中包含空格。我无法绕过文件名中的空格。有没有办法在 gnu make 的文件名中有空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:02:05.627

Make 通过转义文件名中的空格对此提供了一些基本支持，因为以下 Makefile 将正确编译和重新编译 C 文件`foo bar.c`：

```
foo\ bar: foo\ bar.c
    gcc -o "${@}" "${<}" 
```

但是，您必须非常小心地引用您运行的每个命令，并且以空格分隔的文件列表的变量（例如，，`SRCS`）`LIBS`将不起作用，尽管使用 Make text 函数进行足够多的黑客攻击是可能[的](http://www.gnu.org/software/make/manual/html_node/Text-Functions.html)可以解析出引号并让一切正常工作……</p>

因此，虽然在规则和模式中对文件名中的空格有基本的支持，但任何复杂的事情都将是一项非常艰巨和令人沮丧的工作。

# ruby - 如何强制 ActiveRecord 始终从数据库中插入、更新、删除和检索？

> ID：14639909
> 
> 赞同：0
> 
> 时间：2013-02-01T04:47:29.600
> 
> 标签：ruby, activerecord

我们使用 ActiveRecord 独立（不是 Rails 应用程序的一部分）来使用 RSpec 进行单元测试。我们正在数据库上测试一个触发器，它将行插入到审计表中。

这些课程是：

文件夹有很多文件

文件夹有很多 FileAudit

事件的顺序是这样的：

*   创建文件夹
*   ***开始测试一***
*   创建文件
*   对文件做一些事情
*   获取 Folder.file_audits
*   检查关联的 FileAudit 记录
*   销毁文件
*   销毁文件审计
*   ***结束测试一***
*   ***开始测试二***
*   创建文件
*   对文件做一些其他的事情
*   获取 Folder.file_audits
*   检查关联的 FileAudit 记录
*   销毁文件
*   销毁文件审计
*   ***结束测试二***
*   销毁文件夹

来自测试一的 FileAudits 被破坏，但不是来自测试二。ActiveRecord 似乎认为在第二次测试结束时该表中没有新内容要删除。

我可以执行 Folder.file_audits(true) 来刷新缓存，但我宁愿禁用任何和所有类型的缓存并让 ActiveRecord 只做我告诉它的事情，而不是做它认为最好的事情。

我还需要将 File 上的标志设置为相同的值，并验证触发器没有创建审计记录。当我将标志设置为不同的值时，我可以在日志中看到更新语句，但是当我将其设置为相同的值并保存时，日志中没有更新。

我确信缓存等对网站来说很好，但我们没有这样做。我们需要它始终从数据库中获取所有记录，并且无论如何都要更新和删除。我们怎么能做到这一点？

我们正在使用 ActiveRecord 3.1.3。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:45:45.123

我最初的猜测是，您正在其中一个测试中对交易进行处理。如果是这样，您实际上是在消除包装单元测试本身的外部事务，在这种情况下会导致单元测试清理没有任何回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:55:27.567

我不知道这是否适用于你，但我过去在做`model.save`而不是`model.save!`. 有时我会在保存时收到验证错误，但如果没有爆炸，验证错误不会引发实际异常，所以我永远不知道保存不成功。

# java - 如何在 jfreechart 中堆叠 xyplots

> ID：14639913
> 
> 赞同：0
> 
> 时间：2013-02-01T04:48:03.927
> 
> 标签：java, plot, jfreechart

我是 jfreecharts 的新手。我有 3 个函数，它们的总和绘制在一张图表中。这很好用（如[http://www.java2s.com/Code/Java/Chart/JFreeChartXYLogAxesDemo.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartXYLogAxesDemo.htm)，除了我的 x 轴是线性的）。

现在我想在一个小范围内改变这些函数的一个参数。我想看到类似 [http://www.originlab.com/www/resources/graph_gallery/images_gallery/Choe_as_3D_Waterfall_500px.gif](http://www.originlab.com/www/resources/graph_gallery/images_galleries/Choe_as_3D_Waterfall_500px.gif)或此条形图[http://www.statsref.com/HTML/bars3d_demo.png](http://www.statsref.com/HTML/bars3d_demo.png)其中每个 xy平面上将绘制 4 个函数。

我也许可以使用某种条形图来组合 4 个函数，例如[http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.2/CLR4.0/html/Images/Chart_Working_2D_Stacked_Column_Chart_Data_01.png](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.2/CLR4.0/html/Images/Chart_Working_2D_Stacked_Column_Chart_Data_01.png)，所以一系列堆叠这些可能会起作用。

如果做不到这一点，如何让 jfreechart 显示矩阵图？jfreechart 中是否内置了一些东西，或者是否必须制作一堆图表面板并将它们添加到面板中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:52:34.853

我无法告诉您如何在 JFreeChart 中执行此操作，但在[XChart](https://github.com/timmolter/XChart)中创建您所描述的图表矩阵非常简单。

查看[示例 4：创建图表矩阵](http://xeiam.com/xchart_examplecode.jsp)。

代码看起来像这样：

```
int numCharts = 4;

List<Chart> charts = new ArrayList<Chart>();

for (int i = 0; i < numCharts; i++) {
  charts.add(QuickChart.getChart("" + i, "X", "Y", null, null, getRandomWalk(1000)));
}
new SwingWrapper(charts).displayChartMatrix(); 
```

，哪里`getRandomWalk(1000)`需要替换为您自己的 y 轴数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T00:51:55.943

我遇到了同样的问题并发现了这个代码片段： [CombinedDomainXYPlot](http://www.google.de/imgres?um=1&client=firefox-a&sa=N&rls=org.mozilla%3ade%3aofficial&hl=de&biw=1920&bih=917&tbm=isch&tbnid=83WSnYtwk-B4eM%3a&imgrefurl=http://www.java2s.com/Code/Java/Chart/JFreeChartCombinedXYPlotDemo1.htm&docid=0hALjGfmEbOuyM&imgurl=http://www.java2s.com/Code/JavaImages/JFreeChartCombinedXYPlotDemo5.PNG&w=508&h=297&ei=gm-ZUdm7MoSC4gTIxYAY&zoom=1&iact=hc&vpx=218&vpy=135&dur=3765&hovh=172&hovw=294&tx=194&ty=102&page=1&tbnh=134&tbnw=229&start=0&ndsp=42&ved=1t:429,r:1,s:0,i:87)

它使用“CombinedDomainXYPlot”来实现它。

# count - 如何确定最常见的子字符串

> ID：14639914
> 
> 赞同：2
> 
> 时间：2013-02-01T04:48:42.347
> 
> 标签：count

我想找到重复的句子/短语并计算它们在段落或文档中的频率。

例如：段落：

**在插入选项卡上**，画廊包括旨在与您的文档的整体外观相协调的项目。您可以使用这些库来插入表格、页眉、页脚、列表、封面和其他文档构建块。当您创建图片、图表或图表时，它们也会与您当前的文档外观相协调。通过从“主页”选项卡上的“快速样式”库中选择所选文本的外观，您可以轻松更改文档文本中所选文本的格式。您还可以使用“主页”选项卡上的其他控件直接设置文本格式。大多数控件提供使用当前主题的外观或使用您直接指定的格式的选择。要更改文档的整体外观，请在“页面布局”选项卡上选择新的主题元素。要更改快速样式库中可用的外观，使用更改当前快速样式集命令。主题库和快速样式库都提供重置命令，以便您始终可以将文档的外观恢复为当前模板中包含的原始外观。**在“插入”选项卡**上，画廊包含旨在与文档的整体外观相协调的项目。

重复的句子/短语之一是*“在插入选项卡上”*。它的频率是*2*。如何找到所有这些？

你有什么主意吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:21:33.997

首先，您需要定义“短语”的含义。如果您可以将其定义为最小匹配词数，例如 4，那么您可以浏览生成所有[4-gram](http://en.wikipedia.org/wiki/Ngram)的文档。将这些从 4 克到某个位置的地图放入地图中，您可以通过这种方式快速找到匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:32:20.750

这听起来像是一个算法设计问题，因为它可以通过蛮力来实现，但也必须有一个很好的分而治之的解决方案。

正如@justinvf 所说，您必须首先定义最小长度才能获得任何有意义的结果，否则您最重复的短语几乎肯定会是`e`，因为这是最常出现的字符（无论如何都是英语）。

蛮力方法是计算最小长度 $m$ 的所有短语，方法是使用子字符串`str[0:m]...[0+1:m+1]...`一直到段落末尾，同时计算任何重复。然后将增量增加到 2 并重复。似乎时间复杂度类似于 $\mathcal{O} (n^{nm})$ 其中 $n$ 是段落中的字符数。

T̶h̶e̶ ̶d̶i̶v̶i̶d̶e̶ ̶a̶n̶d̶ ̶c̶o̶n̶q̶u̶e̶r̶ ̶a̶p̶p̶r̶o̶a̶c̶h̶ ̶w̶o̶u̶l̶d̶ ̶b̶e̶ ̶t̶o̶ ̶r̶e̶c̶u̶r̶s̶i̶v̶e̶l̶y̶ ̶f̶o̶l̶l̶o̶w̶ ̶t̶h̶e̶s̶e̶ ̶s̶t̶e̶p̶s̶:̶ ̶ ̶1̶.̶ ̶C̶a̶l̶c̶u̶l̶a̶t̶e̶ ̶t̶h̶e̶ ̶p̶h̶r̶a̶s̶e̶-̶f̶r̶e̶q̶u̶e̶n̶c̶e̶ ̶i̶n̶ ̶t̶h̶e̶ ̶L̶H̶S̶ ̶o̶f̶ ̶t̶h̶e̶ ̶s̶t̶r̶i̶n̶g̶ ̶2̶.̶ ̶C̶a̶l̶c̶u̶l̶a̶t̶e̶ ̶t̶h̶e̶ ̶p̶h̶r̶a̶s̶e̶-̶f̶r̶e̶q̶u̶e̶n̶c̶e̶ ̶i̶n̶ ̶t̶h̶e̶ ̶R̶H̶S̶ ̶o̶f̶ ̶t̶h̶e̶ ̶s̶t̶r̶i̶n̶g̶ ̶3̶.̶ ̶C̶a̶l̶c̶u̶l̶a̶t̶e̶ ̶t̶h̶e̶ ̶p̶h̶r̶a̶s̶e̶- ̶f̶r̶e̶q̶u̶e̶n̶c̶e̶ ̶f̶o̶r̶ ̶'̶s̶p̶l̶i̶t̶'̶ ̶s̶t̶r̶i̶n̶g̶s̶.̶.̶ ̶i̶.̶e̶.̶ ̶o̶n̶e̶s̶ ̶t̶h̶a̶t̶ ̶s̶t̶r̶a̶d̶d̶l̶e̶ ̶t̶h̶e̶ ̶m̶i̶d̶p̶o̶i̶n̶t̶ ̶o̶f̶ ̶t̶h̶e̶ ̶s̶t̶r̶i̶n̶g̶.̶ ̶ ̶T̶h̶i̶s̶ ̶i̶s̶ ̶o̶f̶f̶ ̶t̶h̶e̶ ̶t̶o̶p̶ ̶o̶f̶ ̶m̶y̶ ̶h̶e̶a̶d̶ ̶s̶o̶ ̶t̶h̶e̶r̶e̶ ̶m̶a̶y̶ ̶b̶e̶ ̶u̶n̶f̶o̶r̶s̶e̶e̶n̶ ̶c̶o̶m̶p̶l̶i̶c̶a̶t̶i̶o̶n̶s̶ ̶I̶'̶m̶ ̶n̶o̶t̶ ̶t̶h̶i̶n̶k̶i̶n̶g̶ ̶o̶f̶,̶ ̶b̶u̶t̶̶t̶h̶e̶̶p̶r̶i̶n̶c̶i̶p̶l̶e̶̶i̶s̶̶t̶h̶e̶r̶e̶。̶ ̶ ̶T̶B̶H̶ ̶t̶h̶i̶s̶ ̶s̶o̶u̶n̶d̶s̶ ̶l̶i̶k̶e̶ ̶a̶ ̶p̶r̶o̶b̶l̶e̶m̶ ̶t̶h̶a̶t̶ ̶c̶o̶m̶e̶s̶ ̶f̶r̶o̶m̶ ̶a̶n̶ ̶a̶l̶g̶o̶r̶i̶t̶h̶m̶ ̶d̶e̶s̶i̶g̶n̶ ̶t̶e̶x̶t̶b̶o̶o̶k̶ ̶a̶n̶d̶ ̶p̶r̶o̶b̶a̶b̶l̶y̶ ̶h̶a̶s̶ ̶a̶ ̶v̶e̶r̶y̶ ̶n̶e̶a̶t̶ ̶s̶o̶l̶u̶t̶i̶o̶n̶ ̶s̶o̶m̶e̶w̶h̶e̶r̶e̶ ̶a̶l̶r̶e̶a̶d̶y̶.̶

编辑：然而，最优化的解决方案是建立一个[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)

# java - 一个字符串中的三个复选框值

> ID：14639917
> 
> 赞同：0
> 
> 时间：2013-02-01T04:49:06.430
> 
> 标签：java, android

我有三个复选框，如下所示

Facebook CheckBox1 GooglePlus CheckBox2 Twitter CheckBox3

我试过下面的代码：

```
if (facebookChackbox.isChecked()) 
    {
        facebook_checkbox = true;

        AppUtil.facebookNetworkList_EditPost ="Facebook";
        list.add("facebook");
        Intent i = new Intent();
        i.putExtra("facebook_boolean", true);
        Log.e("facebook checkbox", "facebook checkbox" + facebook_checkbox);
    }
    else
    {
        AppUtil.facebookNetworkList_EditPost ="";
    }
    if (twitterChackbox.isChecked()) 
    {
        twitter_checkbox = true;
        AppUtil.twitterNetworkList_EditPost ="Twitter";
        list.add("twitter");
        Intent i = new Intent();
        i.putExtra("twitter_boolean", true);
        Log.e("twitter  checkbox", "twitter  checkbox" + twitter_checkbox);

    }
    else
    {
        AppUtil.twitterNetworkList_EditPost ="";
    }
    if (googleChackbox.isChecked()) 
    {
        AppUtil.gpNetworkList_EditPost ="Google Plus";
        googleplus_checkbox = true;
        list.add("gplus");
        Intent i = new Intent();
        i.putExtra("google_plus_boolean", true);
        Log.e("google plus checkbox", "google plus checkbox" + googleplus_checkbox);

    }
    else
    {
        AppUtil.gpNetworkList_EditPost ="";
    }

    AppUtil.SocialNetworkingList_EditPost = AppUtil.facebookNetworkList_EditPost+""+AppUtil.twitterNetworkList_EditPost+""+AppUtil.gpNetworkList_EditPost; 
```

我已经在 APPUTIL 类中声明了所有这些静态字符串。

当我检查所有复选框或一两个复选框时，它给我 null，null，null 取决于检查 chechk 框。

我想要选中复选框的复选框的值。

```
private void processCheckboxes() {
    // TODO Auto-generated method stub

    list = new ArrayList<String>();
    sb = new StringBuilder();

    if (facebookChackbox.isChecked()) 
    {
        facebook_checkbox = true;

        AppUtil.facebookNetworkList_EditPost ="Facebook";
        list.add("facebook");
        Intent i = new Intent();
        i.putExtra("facebook_boolean", true);
        Log.e("facebook checkbox", "facebook checkbox" + facebook_checkbox);
    }
    else
    {
        AppUtil.facebookNetworkList_EditPost ="";
    }
    if (twitterChackbox.isChecked()) 
    {
        twitter_checkbox = true;
        AppUtil.twitterNetworkList_EditPost ="Twitter";
        list.add("twitter");
        Intent i = new Intent();
        i.putExtra("twitter_boolean", true);
        Log.e("twitter  checkbox", "twitter  checkbox" + twitter_checkbox);

    }
    else
    {
        AppUtil.twitterNetworkList_EditPost ="";
    }
    if (googleChackbox.isChecked()) 
    {
        AppUtil.gpNetworkList_EditPost ="Google Plus";
        googleplus_checkbox = true;
        list.add("gplus");
        Intent i = new Intent();
        i.putExtra("google_plus_boolean", true);
        Log.e("google plus checkbox", "google plus checkbox" + googleplus_checkbox);

    }
    else
    {
        AppUtil.gpNetworkList_EditPost ="";
    }

    AppUtil.SocialNetworkingList_EditPost = AppUtil.facebookNetworkList_EditPost+""+AppUtil.twitterNetworkList_EditPost+""+AppUtil.gpNetworkList_EditPost;

    for (int zz = 0; zz < list.size(); zz++) {

        network = list.get(zz);

        if (zz < list.size() - 1) 
        {

            Log.i("list.size()",""+list.size());
            Log.i("list.size() - 1",""+list.size());
            Log.i("network",""+network);

            sb.append(network + "," + network + "," + network);

            Log.i("sb",""+sb);
        } 
        else
        {
            Log.e("log", "List----" + zz + network);
            network_list = network;

            network_list = network + "," + network + "," + network;
            // network_list=network+""+network+"&gplus="+network+"&twitter"+
            // "" +network;

            sb.append(network + "," + network + "," + network);
        }
    }
} 
```

以上是我现在调用的方法，我想将检查的值存储在字符串中，并想用它来设置文本。但是我得到了 facebookfacebook，意味着正在重复字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:56:18.707

```
yourcheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {             

                if (isChecked) {
                    //do something when checkbox is checked
                }
                else {          
                    //do something when checkbox is unchecked
                }
            }}); 
```

使用这些内置的复选框更改侦听器您可以轻松通知所有复选框的更改

为代码中的所有三个复选框创建checkedchangelistener .Friend

# xml - xml命名空间的奇怪行为

> ID：14639918
> 
> 赞同：0
> 
> 时间：2013-02-01T04:49:14.317
> 
> 标签：xml, xslt, xml-namespaces

为什么我得到一个空输出？当我删除 xml 中的 xmlns 部分时，输出符合预期，但智能感知不再起作用。

仓库.xml

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="warehouse.xsl"?>
<warehouse xmlns="http://schema.mynamespace.net">
  <container>
    <item>
      <name>book</name>
      <value>1.23</value>
    </item>
    <item>
      <name>phone</name>
      <value>45.6</value>
    </item>
  </container>
</warehouse> 
```

仓库.xsl

```
<xsl:stylesheet xmlns="http://schema.mynamespace.net" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:apply-templates select="warehouse/container" />"
</xsl:template>

<xsl:template match="container">
  <xsl:apply-templates />"
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:53:43.840

即使您将某个名称空间指定为 XSL 的默认名称空间，没有名称空间前缀的*XPath*也始终位于空名称空间中。你需要做这样的事情：

```
<xsl:stylesheet xmlns:mns="http://schema.mynamespace.net" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="text"/>

   <xsl:template match="/">
     <xsl:apply-templates select="mns:warehouse/mns:container" />"
   </xsl:template>

   <xsl:template match="mns:container">
     <xsl:apply-templates />"
   </xsl:template>

</xsl:stylesheet> 
```

# c++ - 在运行时动态设置向量类

> ID：14639919
> 
> 赞同：0
> 
> 时间：2013-02-01T04:49:29.943
> 
> 标签：c++, vector, smart-pointers

请允许我介绍一些背景。我有一个抽象类，Foo。

```
class Foo {
public:
    virtual void bar() = 0;
} 
```

我有两个从这个类继承的类。

```
class FooOne : public Foo {
public:
    void bar();
} 
```

和

```
class FooTwo : public Foo {
public:
    void bar();
} 
```

现在在一个完全不同的类中，我想在一个函数中创建一个数组，该数组可以保存这两个类之一的实例。我遇到的问题是我不能创建一个像这样的动态类型的数组，可以吗？我已经习惯了 Objective-C，我可以在其中创建一个类型为 的对象`id`。

理想情况下，这就是我正在寻找的（伪代码）：

```
void someFunction(FooType type) {
    class aClass = (type == FooTypeOne ? FooOne : FooTwo);
    vector<aClass> container;

    // Do something with the container.
} 
```

*注意：我不能在这个项目中使用 C++11。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:00:12.800

您可以在 STL 容器中使用智能指针：

```
Foo* MakeFoo(FooType type)
{
  switch(type)
  { 
  case FooTypeOne :
    return new FooOne();
    break;
  case FooTypeTwo :
    return new FooTwo();
    break;
  default:
    break;
  }
  return null;
}

void someFunction(FooType type) 
{
    std::vector<std::shared_ptr<Foo> > container;
    std::shared_ptr<Foo> f_ptr(MakeFoo(type));
    container.push_back(f_ptr);

    // Do something with the container.
    for(std::vector<std::shared_ptr<Foo> >::iterator iter = container.begin(); 
        iter != container.end(); iter++)
    {
       (*iter)->bar();  // call derived object's bar function respectively 
    }
} 
```

当您使用 C++03 时，shared_ptr 可在`std::tr1`

注意：您需要将虚拟析构函数添加到`Foo`

```
class Foo {
public:
    virtual ~Foo() {}
    virtual void bar() = 0;
}; 
```

否则，如果通过指向基类的指针删除派生类型的对象，则会出现未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:58:19.320

我能想到的唯一简单而干净的选择是模板。即，如果您想避免如您所说的那样使用指针。

```
template <typename FooType>
void SomeFunction() {
    vector<FooType> container;

    // Do something with the container.
}

void SomeFunctionCaller(){
...
    if(type == "FooOne")
        SomeFunction<FooOne>();
    else
        SomeFunction<FooTwo>();

} 
```

但它与您的设计完全不同，不确定它是否适合。

编辑：啊，如果你对智能指针没问题，那么这就是要走的路。

# jsp - jsp中的多线程

> ID：14639923
> 
> 赞同：0
> 
> 时间：2013-02-01T04:49:45.660
> 
> 标签：jsp

我已经使用 jsp 和 servlet 很长时间了。但我还没有遇到多线程。可能吗。如果是这样，请有人建议我一些示例程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:00:50.653

JSP 位实际上被编译为 servlet，并且它们无论如何都是多线程的。Servlet 被认为是线程安全的。如果您的 JSP 不是线程安全的，您可以使用页面指令 <%@ page isThreadSafe="false" %>，这样容器使用生成的 servlet 的单线程执行。在这种情况下，容器可以创建 JSP servlet 的多个实例来处理并发请求或使用同步来控制对单个实例的访问。请注意，由于实例化和锁定的开销，可能会影响页面的性能。

# magento - 通过 REST api 接收 JSON 格式而不使用 REST Client

> ID：14639925
> 
> 赞同：0
> 
> 时间：2013-02-01T04:49:59.163
> 
> 标签：magento, magento-1.7, magento-1.4

在 magento 中，因为我使用 REST api 来获取带有[http://myserver.com/magento/api/rest/products](http://myserver.com/magento/api/rest/products)之类的 url 的产品详细信息？但是这个 url 只返回 XML 格式。但我需要 JSON 格式的。

谁能建议我如何在不使用 REST 客户端的情况下以 JSON 格式获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T06:42:59.830

您需要[将请求标头显式设置为 application/json](http://www.magentocommerce.com/api/rest/response_formats.html)然后响应以 json 格式提供。

# c++ - 枚举返回类型不起作用 C [错误 C2440]

> ID：14639929
> 
> 赞同：0
> 
> 时间：2013-02-01T04:50:26.227
> 
> 标签：c++, enums, return

考虑以下：

```
class Specimen
{
public:
enum Gender getGender();
private:
enum Gender { MALE=1, FEMALE=2, ALIEN=3, HYBRID=4};
} 
```

这部分也是：

```
Gender gender; 
```

根据私人

```
enum Gender Specimen::getGender()
{
    return gender;
} 
```

那是编译器说的成员函数“错误C2440：'return'：无法从'Specimen :: gender'转换为'Gender'我还尝试从函数def和函数原型中删除“枚举”

我不确定我需要修复什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:00:59.670

`Specimen`不在范围内，因此您必须对其进行限定：

```
enum Specimen::Gender Specimen::getGender()
{
    return gender;
} 
```

这也适用于 C++11：

```
auto Specimen::getGender() -> Gender
{
    return gender;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T05:00:59.180

目前尚不清楚如何以及在何处声明/定义`gender`和`getGender()`，但以下编译：

```
class Specimen
{
public:
    enum Gender { MALE=1, FEMALE=2, ALIEN=3, HYBRID=4};
    Gender getGender();
private:
    Gender gender;
};

Specimen::Gender Specimen::getGender()
{
    return gender;
}

int main() {} 
```

看到它[在这里](http://ideone.com/WbwmAu)工作。

请注意，它`enum Gender`已移至`getGender()`声明上方，并且在定义中`Gender`被限定。`Specimen::Gender``getGender()`

# spring-mvc - 根据spring控制器传入的值获取页面

> ID：14639934
> 
> 赞同：1
> 
> 时间：2013-02-01T04:51:02.933
> 
> 标签：spring-mvc

我正在尝试使用spring框架在java中开发一个网络监控应用程序。它列出了网络中的所有资源。通过单击其中一个资源 ID，页面必须重定向到一个新页面，该页面显示该资源的所有详细信息。这样，下一个页面会根据我们点击的资源 id 更改为新内容。现在我只是通过在控制器中映射页面来连接下一页，但是页面是空的，即值没有正确传递给控制器​​。

我的控制器：

```
@RequestMapping(value = "/deviceInformation", method = RequestMethod.GET)
public String deviceinfo(ModelMap model, HttpServletRequest request) {
    List<NetworkInterface> list = inventoryService.getNetworkInterfaces("");
    List<NetworkService> list2 = inventoryService.getNetworkServices("ipResource.discoveredName");
    List<Equipment> list3 = inventoryService.getEquipments("resourceId");
    List<Processor> list4 = inventoryService.getProcessors("hostId");
    List<SoftwareRunning> list5 = inventoryService.getSoftwaresRunning("hostId");
    List<StorageDisk> list6 = inventoryService.getStorageDisks("hostId");
    List<StorageMemory> list7 = inventoryService.getStorageMemories("hostId");

    model.addAttribute("INlist", list);
    model.addAttribute("Serlist", list2);
    model.addAttribute("Eqlist", list3);
    model.addAttribute("Prolist", list4);
    model.addAttribute("SRlist", list5);
    model.addAttribute("Storlist", list6);
    model.addAttribute("StoMry", list7);

    return "inventory/deviceInformation";
}

@RequestMapping(value = "/interfaceList/{ipResource.discoveredName}", method = RequestMethod.POST)
public ModelAndView getInterface(@PathVariable String resourceId, HttpServletRequest request,
                                 HttpServletResponse response) {
    System.out.println("Got request param: " + resourceId);

    List<NetworkInterface> list = inventoryService.getNetworkInterfaces("resID");
    List<NetworkService> list2 = inventoryService.getNetworkServices("ipResource.discoveredName");
    List<Equipment> list3 = inventoryService.getEquipments("ipResource.discoveredName");
    List<Processor> list4 = inventoryService.getProcessors("hostId");
    List<SoftwareRunning> list5 = inventoryService.getSoftwaresRunning("hostId");
    List<StorageDisk> list6 = inventoryService.getStorageDisks("hostId");
    List<StorageMemory> list7 = inventoryService.getStorageMemories("hostId");
    ModelAndView modelAndView = new ModelAndView("/inventory/deviceInformation");
    modelAndView.addObject("INlist", list);
    modelAndView.addObject("Serlist", list2);
    modelAndView.addObject("Eqlist", list3);
    modelAndView.addObject("Prolist", list4);
    modelAndView.addObject("SRlist", list5);
    modelAndView.addObject("Storlist", list6);
    modelAndView.addObject("StoMry", list7);
    return modelAndView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:36:45.913

这是一个示例，它有一个弹簧控制器和两个 jsp 文件。此示例仅用于帮助目的，并不意味着使用 Spring MVC 的最佳实践。控制器 ：

```
 @RequestMapping(value="/getdevices")
    public ModelAndView generateTable(){
        ModelAndView mv = new ModelAndView("table");
        List<Device> devices = new ArrayList<Device>();
        devices.add(new Device(1,"Iphone5",500.00));
        devices.add(new Device(1,"Iphone4s",450.00));
        mv.addObject("devices", devices);
        return mv;
    }
    @RequestMapping(value="/getdeviceinfo")
    public ModelAndView getDeviceInfo(@RequestParam Integer id, @RequestParam String name,@RequestParam Double price){
        ModelAndView mv = new ModelAndView("device");
        Device device = new Device(id,name,price);
        mv.addObject("device", device);
        return mv;
    } 
```

table.jsp（生成带有指向每个单独设备信息页面的链接的设备列表）

```
<ul>
<c:forEach var="device" items="${devices}">
    <li><a href="getdeviceinfo?id=${device.id}&name=${device.name}&price=${device.price}">${device.name}</a></li>
</c:forEach>
</ul> 
```

device.jsp（单个设备的信息）

```
<body>
${device.name}
</body> 
```

device.java（简单 pojo）

```
public Integer id;
    private String name;
    private Double price;

    public Device(Integer id, String name, Double price) {
        super();
        this.id = id;
        this.name = name;
        this.price = price;
    } 
```

注意：我注意到在您的最新代码中，您已将视图设置为“/inventory/deviceInformation”。我不确定您的网络应用程序结构是什么样的。View 的值取决于您在 web 根目录下的结构化 jsp 文件的方式以及 spring 视图解析器的前缀。例如，在我的测试 spring web 应用程序中，我在 /webapp/WEB-INF/views 下有 table.jsp 和 device.jsp，spring config 就像

```
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean> 
```

如您所见，在上面的控制器中，视图中没有前导斜杠，例如 new ModelAndView("table.jsp)

# ruby-on-rails - 在 Rails 应用程序中重新启动后，Mongodb 无法正常工作

> ID：14639935
> 
> 赞同：1
> 
> 时间：2013-02-01T04:51:09.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我不得不强制重新启动我的 linux 计算机，重新打开后，与我的 Mongodb 安装相关的任何内容都无法正常运行。

我使用 Mongoid 的 rails 应用程序出现此错误：

```
Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

尝试在rails控制台中加载页面和类似错误。

之前一切都很顺利，我不知道如何修复这艘船。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:45:49.817

当 mongo 守护程序未运行时，我通常会收到此错误。尝试运行这样的东西：

```
sudo mongod --fork --logpath /var/log/mongodb.log --logappend 
```

用于在系统启动时自动启动的方法会因您的操作系统而异。你运行什么风格的 Linux？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T11:19:50.323

我不知道这是对还是错，但它总是对我有用

> rm /data/db/mongod.lock
> 
> mongod --dbpath /data/db --repair
> 
> mongod --dbpath /data/db

# python - 如何读取以“a+”模式打开的文件？

> ID：14639936
> 
> 赞同：13
> 
> 时间：2013-02-01T04:51:27.273
> 
> 标签：python, windows, io

根据定义，“a+”模式打开文件以进行追加和读取。追加作品，但阅读的方法是什么？我做了一些搜索，但找不到任何地方澄清。

```
f=open("myfile.txt","a+")
print (f.read()) 
```

试过这个，它打印空白。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-01T04:53:42.637

用于`f.seek()`将文件偏移量设置为文件的开头。

注意：在 Python 2.7 之前，有一个 bug 会导致某些操作系统不让文件位置始终指向文件末尾。这可能会导致某些用户使用您的原始代码。例如，在 CentOS 6 上，您的代码会按照您的意愿运行，但不会按预期运行。

```
f = open("myfile.txt","a+")
f.seek(0)
print f.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:54:10.543

当您使用 打开文件时`f=open(myfile.txt,"a+")`，可以读取和写入该文件。

默认情况下，文件句柄指向文件的开头，

这可以由`f.tell()`哪个来确定`0L`。

```
In [76]: f=open("myfile.txt","a+")

In [77]: f.tell()
Out[77]: 0L

In [78]: f.read()
Out[78]: '1,2\n3,4\n' 
```

但是，`f.write`在写入之前会注意将指针移动到最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:13:40.420

模式 r+ 读取和写入 从文件开头开始 r 只读 从文件开头开始 a+ 读取/追加。通过写入文件末尾来保留文件内容

祝你好运！伊莎贝尔·鲁伊斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:33:36.677

依赖于操作系统的较新版本的 Python 中仍然存在一些怪癖，这是由于 stdio 中 fopen() 函数的实现存在差异。

Linux的`man fopen`：

> a+ - 打开以供读取和附加（在文件末尾写入）。如果文件不存在，则创建该文件。读取的初始文件位置在文件的开头，但输出始终附加到文件的末尾。

操作系统：

> ``a+'' - 可读写。如果文件不存在，则创建该文件。流位于文件的末尾。对文件的后续写入将始终在文件的当前末尾结束，而与任何干预 fseek(3) 或类似内容无关。

MSDN 并没有真正说明指针最初设置的位置，只是它在写入时移动到末尾。

> 当使用“a”或“a+”访问类型打开文件时，所有写操作都发生在文件末尾。文件指针可以使用 fseek 或 rewind 重新定位，但总是在执行任何写操作之前移回文件末尾。因此，现有数据不能被覆盖。

使用 Python 2.7.x 和 3k 在各种系统上复制差异非常简单`.open` `.tell`

通过操作系统处理任何事情时，采取预防措施（例如使用显式`.seek(0)`.

# php - 在其哈希处加载页面，然后直接显示结果而不首先显示索引

> ID：14639937
> 
> 赞同：0
> 
> 时间：2013-02-01T04:51:44.153
> 
> 标签：php, javascript, jquery, hash

在[http://zentili.koding.com](http://zentili.koding.com)上，我有这个 javascript，它在索引页面的主 #content div 内加载链接菜单项的内容，并应用加载页面名称减去“ .php'，否则它会加载散列 + '.php'，如果它在 url 中输入。效果很好。另一方面，ENG/ITA 条目在 url 中添加 ?locale=lang_LANG，就在哈希之前，因此本地化也可以正常工作。如果您仔细观察，您可能会注意到，当您在 ENG 和 ITA 之间切换时，index-content 会出现一会，然后才会进入散列。我知道这是因为页面首先被加载，然后被带到散列，但我想知道是否有某种方法可以隐藏主页并在加载时直接进入散列位置。

这是我的菜单的代码：

```
<script type="text/javascript"> 
$(document).ready(function() {  
var hash = window.location.hash.substr(1);  
var href = $('#menubar a.item').each(function(){  
var href = $(this).attr('href');  
if(hash==href.substr(0,href.length-4)){  
    var toLoad = hash+'.php';  
    $('#content').load(toLoad);  
    $("#menubar a.item").removeClass("current");
    $(this).addClass("current");
}  
});

$('#menubar a.item').click(function(){  
window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4); 
var toLoad = $(this).attr('href');
    $('#content').fadeOut('fast',loadContent);  
    function loadContent() {  
    $('#content').load(toLoad,'',showNewContent)  }  
    function showNewContent() {  
    $('#content').fadeIn('fast');  }
    $("#menubar a.item").removeClass("current");
    $(this).addClass("current");

    return false; 
});

});

function goENG(){
    var hash = window.location.hash;
    var eng = '?locale=en_EN';
        window.location.replace(eng+hash) ;
};

function goITA(){
    var hash = window.location.hash;
    var ita = '?locale=it_IT';
        window.location.replace(ita+hash) ; 
};

</script> 
```

函数 goENG() 和 goITA() 通过 onclick 调用 ENG 和 ITA a's。我希望找到一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:15:31.970

该页面无法直接转到链接。它将以其自然顺序加载，然后进入散列。对于您想要实现的目标，我相信有一个简单的解决方案。

1.  隐藏主要内容 div 直到文档加载。为此使用 css 规则“**可见性：隐藏**”
2.  如果有任何哈希，请加载它，然后使内容可见。
3.  如果 url 中没有哈希，则使内容在 dom 加载时可见。

    ```
     $(document).ready(function() {  
            var hash = window.location.hash.substr(1);  
            if ($('#menubar a.item').length > 0) { 
                var href = $('#menubar a.item').each(function(){  
                    var href = $(this).attr('href');  
                    if(hash==href.substr(0,href.length-4)){  
                        var toLoad = hash+'.php';  
                        $('#content').load(toLoad, function(){
                            $('#content').attr('visibility', 'visible');
                        });  

                        $("#menubar a.item").removeClass("current");
                        $(this).addClass("current");
                    } else {
                        $('#content').attr('visibility', 'visible');                    
                    }  
                });
            } else {
                $('#content').attr('visibility', 'visible');
            }
        }); 
    ```

- 更新 -

如果您将#content 设置为“可见性：隐藏”

```
$('#content').attr('visibility', 'visible'); 
```

应该始终触发，否则您的#content div 将不可见。这里的技巧是在我们检查完哈希后将其设置为可见。您可以继续加载 div 中的内容并使其可见。完全加载散列后不需要使 #content div 可见。

# javascript - 在按钮单击时移动的 HTML 水平菜单

> ID：14639950
> 
> 赞同：0
> 
> 时间：2013-02-01T04:52:27.607
> 
> 标签：javascript, html

我需要创建一个水平菜单，显示给定浏览器大小的所有可能项目，其余项目被隐藏（它们不会换行到下一行）。然后在 div 的最右侧有一个箭头按钮，单击它时会显示下一行项目。我怎样才能做到这一点？我不是要求任何人为我编写代码，我只是需要一些指导。网上有这方面的例子吗？我不希望箭头按钮在屏幕上缓慢移动项目。我需要它来“跳”到下一行。

例如，如果项目列表由三个组成，每个 li 元素的长度为 100px，总页面为 200px，则其中一个元素将被隐藏。单击按钮后，前两个项目消失，最后一个项目显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:25:54.720

有很多方法可以做到这一点，你可以让ul位置：相对，然后是li位置：绝对，点击时，改变lis的位置来显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:35:46.927

正如纪广所说。有很多方法可以做到这一点。重要的是您希望如何实施它，或者更好地说是如何实施您的项目的其余部分。

对于纪光所说的菜单，您可以创建一个水平样式列表（可能使用 float left on li 为此）。现在必须将 ul 声明为相对且固定的高度或宽度，并隐藏溢出，或者最好根据需要固定高度并设置相对于页面的宽度。对于箭头去扔其余的行，我猜你想要的是某种类型的旋转木马。现在网上有很多不错的插件可用。或者您可以随时自己完成。如果你打算自己做，那么你需要听从纪光的建议。将菜单 ul 放在另一个 div 中，然后玩 ul 的定位。

# .net - .NET RegularExpressionAttribute regexp pattern translation to JavaScript

> ID：14639955
> 
> 赞同：0
> 
> 时间：2013-02-01T04:53:14.370
> 
> 标签：.net, regex, asp.net-mvc, data-annotations

How does RegularExpressionAttribute (System.ComponentModel.DataAnnotations) handle the translation from .NET Regular Expression pattern flavor to the javascript flavor in order to do the validations client-side?

I'm guessing that there is no translation at all, and the regular expression pattern indicated in the attribute must be compatible enough with both engines.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:22:09.757

Your guess is correct, the regular expression is not being translated in any way, just being directly passed to the client side. This can be easly verified by checking the source code of [`RegularExpressionAttributeAdapter`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.Mvc/RegularExpressionAttributeAdapter.cs) and [`ModelClientValidationRegexRule`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.WebPages/Mvc/ModelClientValidationRegexRule.cs) classes.

You can check the following question for more informations about differences between C# and JavaScript Regular Expressions engines: [Differences between C# and JavaScript Regular Expressions](https://stackoverflow.com/questions/3982608/differences-between-c-sharp-and-javascript-regular-expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-20T21:43:58.480

Now that CodePlex has been shut down, try viewing sources on github: [RegularExpressionAttributeAdapter](https://github.com/aspnet/Mvc/blob/master/src/Microsoft.AspNetCore.Mvc.DataAnnotations/RegularExpressionAttributeAdapter.cs) and [ModelClientValidationRegexRule](https://github.com/aspnet/AspNetWebStack/blob/main/src/System.Web.WebPages/Mvc/ModelClientValidationRegexRule.cs).

# jquery - 使用 jquery 手风琴样式菜单保存状态（Maccordion）

> ID：14639958
> 
> 赞同：1
> 
> 时间：2013-02-01T04:53:48.243
> 
> 标签：jquery, save, accordion, state

对于有经验的人来说，这些问题可能看起来相当低端，但我在这方面缺乏经验。但是，我学得很快，有些基本的东西我很困惑。

我的情况是我在服务器端脚本中实现了 Maccordion。Maccordion 是一个基于 jquery 的手风琴式菜单，可以让您同时打开多个面板。我通过在脑海中放置以下脚本块来启动它：

```
<script type="text/javascript">
$(window).load(function(){
$( ".maccordion" ).maccordion( { active: [], heightStyle: false } );
});
</script> 
```

这部分工作正常。仅供参考，“活动：[]”部分将让我在加载时打开各种菜单窗格。例如，“活动：[0,2]”将打开窗格一和三。

我想保存面板的状态更改，并且[https://github.com/Dattaya/Maccordion/blob/master/README.md](https://github.com/Dattaya/Maccordion/blob/master/README.md)上的 Maccordion 页面为我提供了以下有关执行此操作的信息。

**启用**

更改 maccordion 时触发。

```
$( ".maccordion" ).bind("maccordionactivate": function(event, data) {
    data.toggled // headers of the content panels that have been toggled.
}); 
```

我制作可以保存和恢复面板状态的服务器端脚本没有问题，我遇到的问题是采用上述“data.toggled”变量并以某种方式将其传递给后台脚本以保存状态面板。

我猜这个想法是使用 javascript 和 ajax 来做到这一点。如何做到这一点让我在几个层面上感到困惑。

首先，我什至不确定我应该如何使用上面的代码片段。我发现了很多片段来解释如何做到这一点，但不幸的是，他们都假设读者知道如何正确插入 javascript，以及如何从网页中发生的事件中调用事物等。 .. 我已经阅读了 W3C 和其他地方的教程，查看了各种网页上的源代码，但是逻辑中有些东西我没有点击。

基本上，我需要做的是获取该**data.toggled**变量并将其传递给我选择的服务器端脚本，而不会在用户打开或关闭面板时打断他们。

在我写这篇文章时，我一直在阅读肉色右侧菜单中出现的所有提示，并注意到有些人使用 jquery cookie 片段保存状态，例如：

```
jQuery(document).ready(function(){
$( "#accordion" ).accordion({
    change: function(event, ui) {
        //set cookie for current index on change event
        $.cookie('saved_index', null);
        $.cookie('saved_index', $( "#accordion" )
                .accordion( "option", "active" ));
    },
    active:parseInt($.cookie('saved_index'))
});
}); 
```

使用 cookie 代替 db 没有问题，但我无法使用这样的东西来保存多个面板的状态。

任何能帮助我朝着正确方向前进的事情都将非常感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:27:14.060

First i have added an attribute to each `<h3>` element that indicate it's number in the list of tabs. I named the attribute "data-list"

HTML CODE

```
<div class="maccordion">    
    <h3 data-list="0"><a href="#">First header</a></h3>
    <div >First content</div>

    <h3 data-list="1"><a href="#">Second header</a></h3>
    <div >Second content</div>

    <h3 data-list="2"><a href="#">Third header</a></h3>
    <div >Third content</div>
</div> 
```

Now you need to capture the "activate" event of the maccordion and then get the element number were toggled send it to the server

```
$( ".maccordion" ).maccordion(  { active: [], heightStyle: false } );

$( ".maccordion" ).maccordion({
    activate: function(event, data) { 
        var listNumber = data.toggled.attr('data-list');
        var toggleState = data.toggled.next().css('display');
            // block = Open
            // none = Close

        //Send the data to the server
        $.ajax({
          type: "POST",
          url: "URL", //This sould be a url of a page 
                      which suppost to recieve the information
          data: { listToggeld: listNumber } //Sent the list number to the server
        }).done(function( msg ) {
          alert( "Data Saved: " + msg );
        });
    }
}); 
```

1.  First look how i bind the active event
2.  Then i used the "data" variable which hold the DOM element that just have been toggled, to get the data-list attribute.
3.  We get also the state of the tab either it close of opened.
4.  Now that we have the element number and were toggled and status we ready to send it to the server with ajax request. [Look here for more information of ajax requests](http://api.jquery.com/jQuery.ajax/)

[Fiddel Example](http://jsfiddle.net/UeGVn/30/)

# qt - 动态添加组件到模型

> ID：14639959
> 
> 赞同：0
> 
> 时间：2013-02-01T04:53:55.920
> 
> 标签：qt, qml

如何将动态创建的 Qml 对象附加到 ListModel？

我试过这个，但它不起作用。

```
property ListModel projects
Component.onCompleted: {
    var comp= Qt.createComponent("Project.qml");
    var object = comp.createObject(parent,{});
    projects.append(object);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:45:30.273

ListModel append()、insert() 和 set() 将字典作为参数。因此，您需要将 createObject() 返回的对象包装到字典中。

还要创建一个 ListModel 实例以分配给项目属性，以便您可以附加到它。

```
property ListModel projects: ListModel {}
Component.onCompleted: {
    var comp= Qt.createComponent("Project.qml");
    var object = comp.createObject(parent, {});
    projects.append({"name": object});
} 
```

# phantomjs - 根据内容裁剪 PhantomJS 屏幕截图

> ID：14639960
> 
> 赞同：19
> 
> 时间：2013-02-01T04:54:01.953
> 
> 标签：phantomjs

PhantomJS 在为我捕获网页到图像文件方面做得很好。我正在使用基于 rasterize.js 的脚本。

但是，对于某些固定大小的 Web 元素，我需要生成的图像与 Web 元素的大小相匹配。

例如，我有一个这样的页面：

```
<html>
<body>
    <div id="wrapper" style="width:600px; height:400px;">
       Content goes here...
    </div>
</body>
</html> 
```

在此示例中，我需要它来生成大小为 600x400 的图像。是否有一种方法可以根据我正在光栅化的页面中的 Web 元素动态获取视口大小。

我知道这不是一件容易的事......想法？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T05:42:41.117

哇。毕竟没那么难。只需将视口设置得非常大并使用cropRect 函数。多么棒的工具！

rasterize.js 的模组：

```
page.open(address, function (status) {
    if (status !== 'success') {
        console.log('Unable to load the address!');
    } else {
        var height = page.evaluate(function(){
            return document.getElementById('wrapper').offsetHeight;
        }); 
        var width = page.evaluate(function(){
            return document.getElementById('wrapper').offsetWidth;
        }); 
        console.log('Crop to: '+width+"x"+height);

        page.clipRect = { top: 0, left: 0, width: width, height: height };
        window.setTimeout(function () {
            page.render(output);
            phantom.exit();
        }, 200);
    }
}); 
```

# php - mysqli - 对非对象 mysqli 上的成员函数 fetch_array() 的 fetch_Array 错误调用

> ID：14639965
> 
> 赞同：6
> 
> 时间：2013-02-01T04:54:40.120
> 
> 标签：php, mysql, database, mysqli

我是 mysqli 的新手，并开始尝试学习基本的东西。关于这个我的例子（[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)）我正在尝试fetch_array。这是我的代码。

```
$sqlGetChartData    =   "SELECT date, ratepersqft, location 
                          FROM ratepersqft
                         WHERE project_id = 1";
$runGetChartData    =   $mysqli->query($sqlGetChartData);

while($rowGetChartData = $runGetChartData->fetch_array(MYSQLI_BOTH))
    $arrGetChartData[]  =   $rowGetChartData;

    print "<pre>";
    print_r($arrGetChartData);
    exit(); 
```

在这里，我收到此错误 Call to a member function fetch_array() on a non-object on line 旁边的 while 条件行。我尝试用谷歌搜索它并没有得到我的问题的结果。希望我的问题很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T05:02:57.343

这个答案是很久以前写的，变得无关紧要。

从那时起，我学会了解决这个问题的正确方法，并将其写在[这个答案](https://stackoverflow.com/a/22662582)中。请在那里导航。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T04:56:57.997

查询可能失败并`mysqli::query`返回 FALSE。因此`$runGetChartData`不是一个`mysqli_result`对象，而是一个`boolean`，这就是你得到错误的原因。

从[文档中](http://php.net/manual/en/mysqli.query.php)：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

# testing - 仅执行 GET 的 RESTFUL Web 服务的性能测试

> ID：14639969
> 
> 赞同：0
> 
> 时间：2013-02-01T04:55:16.470
> 
> 标签：testing, load-testing, performance-testing, stress-testing

我们已经创建了一个 RESTFUL Web 服务，它当前正在对数据库进行 GET 调用。我正在寻找一些工具，通过模拟我们将在生产中产生的负载，我可以使用这些工具来测试我们的 RESTFUL Web 服务。

我只需要测试 RESTFUL Web 服务的端到端响应时间。如果我们正在拨打大约 10000 个电话或运行大约两三分钟。

那么我们应该为此做什么样的测试呢？我也查看了 JMeter，但对 RESTFUL Web 服务的 GET 调用进行测试让我非常困惑。

我们一般应该使用哪些工具来测试 RESTFUL Web 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:57:25.200

如果您的 Web 服务是基于 Java 的，那么 JMeter 将是一个不错的选择。

# javascript - Javascript Regex - 使用什么来验证电话号码？

> ID：14639973
> 
> 赞同：9
> 
> 时间：2013-02-01T04:55:42.763
> 
> 标签：javascript, regex, validation, whitespace, phone-number

谁能告诉我 RegEx 将如何验证国际电话号码，包括号码之间的空格并允许这些字符：`- ( )`.

字符串中的数字数量并不太重要，我只是希望用户能够输入类似示例 1 或示例 2 的内容（如果他们愿意的话）：

例子：

1.  `+44 (0) 207 111 1111`

2.  `442071111111`

据我所知，我已经通读并测试了一些类似问题的发布答案，但到目前为止，它们都没有按照我希望的方式为我工作。

请有人可以帮助我清楚地解释如何编写上述内容以进行验证？

非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T05:04:50.937

试试这个代码

**HTML 代码**

```
<input type="text" id="phone"/> 
```

**JS代码**

```
$("#phone").blur(function() {
  var regexp = /^[\s()+-]*([0-9][\s()+-]*){6,20}$/
  var no = $("#phone").val();
  if (!regexp.test(no) && no.length < 0) {
    alert("Wrong phone no");
  }
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-14T02:36:25.587

请参阅[电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

## 快速备忘单

*   开始表达： `/^`
*   如果您需要空间，请使用： `[\s]`或`\s`
*   如果您需要括号，请使用: `[(]`和`[)]`. 使用`\(`and`\)`是丑陋的，并且会使事情变得混乱。
*   如果您希望任何内容是可选的，请在`?`其后添加
*   如果您想要连字符，只需键入`-`or `[-]`。但是，如果您没有将它放在一系列其他字符中的第一个或最后一个，则可能需要对其进行转义： `\-`
*   如果您想在插槽中接受不同的选择，请在选项周围加上括号：`[-.\s]`将需要连字符、句点或空格。最后一个括号后面的问号将使所有这些对于该插槽都是可选的。
*   `\d{3}`：需要 3 位数字：000-999。的简写 `[0-9][0-9][0-9]`。
*   `[2-9]`：该插槽需要一个数字 2-9。
*   `(\+|1\s)?`: 接受一个“加号”或一个 1 和一个空格（竖线字符，,`|`是“或”），并使其可选。“加号”必须被转义。
*   如果您希望特定数字与插槽匹配，请输入它们：`[246]`需要 2、4 或 6。 `[77|78]`需要 77 或 78。
*   `$/`: 结束表达式

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-08T09:51:56.713

这是一个很长的正则表达式，但它支持两种格式（例如 2 是一个有效的国际号码，必须以 + 或 00 开头）：

```
/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i 
```

这允许扩展和多种格式和分隔符的选择。

火柴：

*   (+351) 282 43 50 50
*   90191919908
*   555-8909
*   001 6867684
*   001 6867684x1
*   1 (234) 567-8901
*   1-234-567-8901 x1234
*   1-234-567-8901 分机 1234
*   1-234 567.89/01 分机 1234
*   1(234)5678901x1234
*   (123)8575973
*   (0055)(123)8575973

在 $n 上，它节省了：

1.  国家指标
2.  电话号码
3.  扩展

此处给出了相同的答案：[电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation/20971688#20971688)（直接链接到我的答案）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T18:47:07.930

```
/*
@isValidUSPhoneFormat function will check valid US Format
    Allowed US Format
(123) 456-7890
123-456-7890
123.456.7890
1234567890
(734) 555.1212
*/   

    function isValidUSPhoneFormat(elementValue){  
            var phoneNumberPattern = /^[(]{0,1}[0-9]{3}[)]{0,1}[-\s.]{0,1}[0-9]{3}[-\s.]{0,1}[0-9]{4}$/;  
            if(phoneNumberPattern.test(elementValue) == false)
            {
                 var phoneNumberPattern = /^(\()?\d{3}(\))?(.|\s)?\d{3}(.|\s)\d{4}$/; 
                 return phoneNumberPattern.test(elementValue);   
            }
            return phoneNumberPattern.test(elementValue);  
        } 
```

希望这将帮助您理解 JavaScript RegEx..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T15:21:12.467

**甚至不要尝试。**试图防范您认为无效的输入可能会导致愤怒的用户无法输入完全有效的电话号码。如果用户真的想输入一个无效的电话号码，他/她无论如何都可以这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-24T14:22:02.157

尝试使用**libphonenumber-js**包的**isValidPhoneNumber(phoneNumber, countryCode)**方法。首先是开头带有**“+”**的电话号码。第二个参数是国家代码（例如：'US'、'IN'）。这可以帮助您准确验证任何国际号码。

 ***** * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-05T07:03:58.660

```
function checkPhoneNumber(val) {
    var num = document.getElementById(val).value;
    var mob=/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g;
    if (mob.test(num) == false) {
        alert("Please Enter Valid Phone Number.");
        document.getElementById(val).value = "";
        return false;
    }
     if (num.length > 15) {
        alert("Only 15 characters allowed for Phone Number field.");
        document.getElementById(val).value = "";
        return false;
    }

    return true;
} 
```

> 试试看****

# c# - 检索列表框的数据

> ID：14639975
> 
> 赞同：0
> 
> 时间：2013-02-01T04:55:54.847
> 
> 标签：c#, asp.net, gridview, listbox

我从列表框中插入了数据。我想在 gridview 中检索特定技能集的数据。例如，如果我在下拉列表中选择 android 并按下按钮，它必须只给具有 android 技能的人。有人知道怎么做这个吗

```
 private string GetConnectionString()

{

    //Where DBConnection is the connetion string that was set up in the web config file

    return System.Configuration.ConfigurationManager.ConnectionStrings["DBConnection"].ConnectionString;

}

private void InsertRecords(StringCollection sc)

{

    SqlConnection conn = new SqlConnection(GetConnectionString());

    StringBuilder sb = new StringBuilder(string.Empty);

    foreach (string item in sc)

    {

        const string sqlStatement = "INSERT INTO Table1 (Employees) VALUES";

        sb.AppendFormat("{0}('{1}'); ", sqlStatement, item);

    }

    try

    {

        conn.Open();

        SqlCommand cmd = new SqlCommand(sb.ToString(), conn);

        cmd.CommandType = CommandType.Text;

        cmd.ExecuteNonQuery();

        Page.ClientScript.RegisterClientScriptBlock(typeof(Page), "Script", "alert('Records Successfuly Saved!');", true);

    }

    catch (System.Data.SqlClient.SqlException ex)

    {

        string msg = "Insert Error:";

        msg += ex.Message;

        throw new Exception(msg);

    }

    finally

    {

        conn.Close();

    }

}

protected void Page_Load(object sender, EventArgs e)

{

}

protected void Button1_Click(object sender, EventArgs e)

{

    StringCollection sc = new StringCollection();

    foreach (ListItem item in ListBox1.Items)

    {

        if (item.Selected)

        {

            sc.Add(item.Text);

        }

    }

    InsertRecords(sc);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:26:30.987

在配置期间，无论您拥有 SkillsetID 还是其他任何东西，都已配置好您的 gridview 数据源，为此，请使用“WHERE”子句，该子句表示 SkillSetID 绑定到 ID 为 lstBasePackageAsset 且带有“选定值”或只是“选定”的“控件” " 即 gridview1.skillsetID = lstBasePackageAsset.selectedvalue ;

你会完成的。

请下次，甚至现在，让人们知道它是 VisualStudio 查询还是任何其他开发源查询。在 VS 中更容易，但在命令行中需要更多的编程代码（如果你这样做的话）

```
string query="select * from  Employees where skill= '" +yourvalue+ "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T05:41:49.677

是的，您可以使用这样的`where`子句来执行此操作

```
string query="select * from  Employees where skill= '" +yourvalue+ "'"; 
```

# javascript - 使用 getElementById 拉取 CSS 数据

> ID：14639985
> 
> 赞同：0
> 
> 时间：2013-02-01T04:56:34.493
> 
> 标签：javascript, css, getelementbyid

我试图从元素中提取 CSS 数据，但由于某种原因我碰壁了。我一直盯着并试图调整同一行代码一个小时，但我不断得到 undefined 或 NaN。

这是缩写的js：

```
var newVar = document.getElementById("cssItem").style.top; 
```

的CSS：

```
#cssItem {
position:   absolute;
top:        100px;
left:       100px;
width:      600px;
height:     400px; 
} 
```

同样，每次我记录 newVar 时，它都会返回 undefined 或 NaN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:59:31.040

`Node.style`仅适用于内联样式。如果要获得渲染样式，请使用以下命令：

```
var newVar = window.getComputedStyle( document.getElementById("cssItem") ).top; 
```

这是小提琴：http: [//jsfiddle.net/q93B6/](http://jsfiddle.net/q93B6/)

# ios - iOS应用分发中关于分发证书和开发证书的查询

> ID：14639986
> 
> 赞同：0
> 
> 时间：2013-02-01T04:56:36.900
> 
> 标签：ios, ios5, ios6, ios4, ios-simulator

我想知道我们是否需要两者`distribution certificate`，`development certificate`如果我想将我的应用程序提供给其他任何人或想安装在其他手机上？

如何设置我的代码签名与此证书`xcode`？

任何人都可以给我一个截图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:08:49.913

1.  首先，您要注册 Apple Developer Program（99 美元）。
2.  之后，您要添加您的设备 UDID。
3.  然后创建开发者和分发证书。
4.  下载这些证书并将它们安装到您的系统中。
5.  现在在您的 Xcode Build Settings 中设置相应的配置文件。
6.  连接您的设备并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:19:11.987

开发和分发都是必要的。它们都用于存档，这是您想要将应用上传到 App Store 时采取的步骤。如果你想让你的朋友在他们的设备上拥有你开发的应用程序，只需在 xcode 中连接设备并单击用于开发。然后您可以将您的应用上传到他们的设备进行测试。您最多可以将 99 个设备注册到您的开发 ID。如果您决定在 App Store 上发布您的应用程序，那么您需要完成上传应用程序的步骤，然后您需要您的分发配置文件。我希望这能回答你的问题。

# c# - 为什么反射找不到属性

> ID：14639987
> 
> 赞同：3
> 
> 时间：2013-02-01T04:56:46.973
> 
> 标签：c#, dynamic, reflection

我有课：

```
 class Person 
    {
        public string Name { get { return "Antonio"; } }
    } 
```

和守则：

```
 IEnumerable<object> uncknownObject;

        uncknownObject = new ObservableCollection<Person>( );

        var observCol = uncknownObject.GetType( );

        var x = ( ( dynamic )observCol ).GenericTypeArguments[ 0 ];

        var y = observCol.GetProperty( "GenericTypeArguments" );

        var instance = ( Person )Activator.CreateInstance( x );

        Console.WriteLine( instance.Name ); // Print Antonio!!! 
```

为什么`y == null`？

注意图片：

![在此处输入图像描述](../Images/12768bb4ef9b4e319f22516c27233e63.png)

调试器显示属性**GenericTypeArguments**应该存在并且代码显示相反。可以证明调试器是正确的并且该属性存在，因为那么 x 怎么不为空。如果该属性存在，那么为什么`y`等于 null ！！！？？？

* * *

## 编辑

感谢 Ani，我现在拥有：

```
 IEnumerable<object> uncknownObject;

        uncknownObject = new ObservableCollection<Person>();

        var observCol = uncknownObject.GetType();

        var genTypeArgsProperty = typeof(Type).GetProperty("UnderlyingSystemType");

        var genTypeArgsValue = (genTypeArgsProperty.GetValue(observCol, null));

        var f = genTypeArgsValue.GetType().GetMethod("GetGenericArguments");

        IEnumerable<object> result = (IEnumerable<object>)f.Invoke(genTypeArgsValue, null);

        var x = result.FirstOrDefault();

        var instance = Activator.CreateInstance(  (Type)x ); 
```

**[如果有古玩，为什么我需要该功能，请单击此处](https://stackoverflow.com/questions/14639368/get-type-of-items-in-observablecollection)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:10:55.313

我真的不明白你想通过所有这些元元反射来完成什么，但你似乎误解了`Type.GetProperty`它的作用。*它获取实例表示的实际*类型的属性的元数据`System.Type`（在本例中为`ObservableCollection<Person>`）。它不会*获取*在其自身上声明的属性的元数据，除非您当然在代表自身`System.Type`上调用它。`System.Type``System.Type`

在您的情况下，`y`是 null 因为`ObservableCollection<Person>`没有名为“GenericTypeArguments”的属性。

试试这个：

```
var genTypeArgsProperty = typeof(Type).GetProperty("GenericTypeArguments");

var genTypeArgsValue = (Type[]) (genTypeArgsProperty.GetValue(observCol, null));

var onlyTypeArgValue = genTypeArgsValue.Single(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T05:15:10.073

此代码适用于网络框架 4：

```
 IEnumerable<object> uncknownObject;

        uncknownObject = new ObservableCollection<Person>();

        var observCol = uncknownObject.GetType();

        var x = ((dynamic) observCol).UnderlyingSystemType.GetGenericArguments()[0];

        var y = observCol.GetGenericArguments();

        var instance = (Person)Activator.CreateInstance(x);

        Console.WriteLine(instance.Name); // Print Antonio!!! 
```

# jquery - 新手：使用fancybox iframe 的悬停/翻转图像交换按钮

> ID：14639991
> 
> 赞同：0
> 
> 时间：2013-02-01T04:57:03.367
> 
> 标签：jquery, css, fancybox, dreamweaver

我的网站有问题 我正在使用[kirandarren.com](http://www.kirandarren.com/)网站上的图标 我希望进行某种图像交换或悬停时翻转以显示它是一个按钮。起初我尝试使用dreamweaver 进行翻转图像交换，效果很好，但是一旦我实施了fancybox，它似乎与翻转图像交换发生冲突。有任何想法吗？

任何正确方向的帮助将不胜感激！我是一个新手，只是试图让我们的婚礼网站完成，任何朝着正确方向的帮助将不胜感激！提前谢谢！我希望我在下面附上了正确的代码。

```
<body onload="MM_preloadImages('images/our_story_rollover.png','images/directions_rollover.png','images/bridal_party_rollover.png','images/chicago_spots_rollover.png','images/registry_rollover.png')"> 
```

**2013年10月13日晚上5点加入我们**

**仪式将于5:30开始|** **鸡尾酒时间和招待会**

```
<p align="center">

<a class="fancybox fancybox.iframe" href="http://player.vimeo.com/video/58303552"><img src="images/our_story_off.png" name="our_story" width="206" height="210" hspace="14" vspace="0" border="0" id="our_story" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:12:01.933

不要使用 iframe，因为它总是会与各种浏览器发生冲突，并且可能会产生比解决方案更多的问题。

正如您提到的，您想显示图像是按钮，所以只是为了让用户知道这是一个链接或按钮，我建议在 IMG 标记中使用 onmouseover 和 onmouseout。如果需要，可以使用自定义 jQuery 或 javascript 为其提供动画或过渡。例如

```
<script>
function bigImg(x)
{
x.style.height="64px";
x.style.width="64px";
}

function normalImg(x)
{
x.style.height="32px";
x.style.width="32px";
}
</script>
</head>
<body>

<img onmouseover="bigImg(this)" onmouseout="normalImg(this)" border="0" src="smiley.gif" alt="Smiley" width="32" height="32">

<p>The function bigImg() is triggered when the user moves the mouse pointer over the image.</p>
<p>The function normalImg() is triggered when the mouse pointer is moved out of the image.</p>

</body>
</html> 
```

提示：要创建一个更好看的按钮，请使用 box-shadow（您将创建的脚本中的 css 属性）。

# arrays - 比较字符串和数组

> ID：14639993
> 
> 赞同：2
> 
> 时间：2013-02-01T04:57:27.650
> 
> 标签：arrays, vb.net, string, for-loop

我正在尝试使用 Visual Basic 中的 for 循环将字符串变量与字符串数组的元素进行比较。我按顺序将用户输入的字符串变量与具有小写字母的数组进行比较。我有一些逻辑错误，因为我的“计数”变量出于某种原因总是在 25 上，因此它总是说“抱歉，再试一次”，除非用户键入 Z。请帮助！

```
 Dim lower() As String = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l",    "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"}
   For count As Integer = 0 To 25
        input = txtInput.Text
        input = input.ToLower
        If input.Equals(lower(count)) Then
            txtResult.Text = "Correct"
        Else
            txtResult.Text = "Sorry, Try again"
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:33:29.157

欢迎来到 StackOverflow！

仅当您键入“z”时才能获得“正确”结果的原因是“z”是数组的最后一项。如果键入“y”，count = 24 (lower(24) = "y") 的结果将是正确的，但在下一步它会将“y”与 lower(25) 进行比较，实际上是“z”。因此`txtResult.Text`将被“抱歉，重试”覆盖。

当我正确完成您的任务时，您想检查输入字符串是否存在于数组中。为此，您可以使用`Array.Contains`方法：

```
Dim lower() As String = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l",    "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"}
Dim input As String = txtInput.Text
If (lower.Contains(input)) Then
    txtResult.Text = "Correct"
Else
    txtResult.Text = "Sorry, Try again"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:35:39.103

问题是您应该`exit for`在找到匹配项后退出循环（使用 ）。否则，任何不匹配的字符都会将 txtResults.Text 重置为“抱歉，重试”。例如，当您输入“f”时，txtResults.Text 设置为“正确”。但是当你到达 g 时，当前，它会将 txtResults.Text 更改为“对不起，再试一次。”，以及 h、i 等。

这是一个很好的编程练习，但您可以使用一个快捷方式：

```
lower.contains(input.lower) 
```

信息：

[http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)

# iphone - iOS 6 - BluetoothManager 框架 - “NSObject”未找到错误

> ID：14639994
> 
> 赞同：4
> 
> 时间：2013-02-01T04:57:32.433
> 
> 标签：iphone, ios, bluetooth, iphone-privateapi

我的问题是[这个](https://stackoverflow.com/questions/14069892/bluetoothmanager-framework-nsobject-error?lq=1)问题的副本。但是那个（正确地）被关闭为非建设性的，零答案，对任何人都绝对没有用。

我正在尝试从我的 iPhone 5 连接到外部蓝牙配件。该配件**既未通过 MFI 认证，也不支持低功耗蓝牙通信**。

所以我唯一的选择是使用私有框架连接到它，我这样做是因为我不打算将我的应用程序推送到 App Store。该应用程序仅供个人使用。

我正在尝试使用私有 BluetoothManager 框架类，使用 XCode 4.6，并且我的应用程序面向 iOS 6.0。

## 我目前的设置

1.  在 sdk 文件夹中的 bluetoothManager 框架中添加了一个名为 Headers 的文件夹

    > /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/PrivateFrameworks/BluetoothManager.framework

2.  在该文件夹中创建了4个头文件，即

    1.  蓝牙音频插孔.h
    2.  蓝牙管理器.h
    3.  蓝牙设备.h
    4.  CTStructures.h

        我从[这里](http://iphone-dev.googlecode.com/svn/branches/include-1.2-sdk/include/BluetoothManager/)得到了这些头文件。

3.  使用正常方法将 BluetoothManager.framework 添加到我的项目中 `target->Build Phases->Link Binary with Libraries`。

4.  在我的`ViewController.h`文件中，我导入了头文件

    ```
    #import "BluetoothManager.h" 
    ```

就是这个。只是我正在关注[本](http://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.UQtGe1p25Yi)教程，但在此处添加了步骤以防万一教程失败。

## 我的问题

我还没有进入编码部分。当我尝试编译上述给定设置时，出现错误

> 未找到 NSObject.h 文件

在`BluetoothManager.h`我作为标题添加到框架的文件中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T06:22:51.700

Well I finally solved this problem. I just removed those

```
#import "NSObject.h" 
```

calls from 3 header files which I mentioned in the question, and Voila!!

# spring-security - Apache Web 服务器背后的 Spring Webapp - 由 CAS 保护

> ID：14639996
> 
> 赞同：0
> 
> 时间：2013-02-01T04:57:48.160
> 
> 标签：spring-security, apache, cas

我有一个使用 Spring Security CAS 保护的 Web 应用程序。CAS 服务器和 Webapp 位于用于反向代理的 Web 服务器后面（名为 url）。webapp 使用 ServiceAuthenticationDetailsS​​ource 对动态服务 url 进行身份验证。我遇到的问题是服务票证验证失败，因为验证期间提供的 url 与创建票证时提供的 url 不匹配。当系统使用 https://:/ 连接时，该设置在没有网络服务器的情况下工作。

问题似乎是Web服务器在重定向到Web应用程序时修改了HttpServletRequest，其中丢失了“命名的url”信息并被替换为 and 。服务票证是在登录时通过“?service=”使用命名的url获取的。

任何可能的解决方案？apache 可以在不修改请求的情况下重新路由请求，特别是对于自我识别的应用程序或出于安全原因，CAS 试图记录客户端 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:52:44.217

我在下面概述了一些选项：

**设置反向代理**

根据[ServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getServerName%28%29)的Javadoc ： HttpServletRequest.getServerName() 将是：

> Host 标头值中“：”之前部分的值（如果有），或解析的服务器名称，或服务器 IP 地址。

这意味着您可以配置您的代理以确保正确设置主机标头（请注意，某些容器（例如 WebSphere）虽然不遵守规范）。

**使用容器配置覆盖**

如果您使用反向代理，许多服务器的设置可以覆盖此值。[Spring 论坛上](http://forum.springsource.org/showthread.php?108494-Spring-security-s-HTTPS-issue-with-load-balance/)有一个相当不错的线程，其中包含我在下面总结的更多信息。

如果您使用的是 Tomcat，我会参考[反向代理设置页面](http://tomcat.apache.org/connectors-doc/generic_howto/proxy.html)。一种配置方法是将[Http 连接器](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)配置为具有 proxyName 属性以覆盖由 HttpServletRequest.getServerName() 和 proxyPort 以覆盖由 HttpServletRequest.getServerPort() 返回的值。示例配置可能如下所示：

**服务器.xml**

```
<Connector scheme="https" secure="true" 
    proxyPort="443" proxyName="example.com"
    port="8009" protocol="AJP/1.3"
    redirectPort="8443" maxThreads="750" 
    connectionTimeout="20000" /> 
```

Websphere 有一些[自定义属性](http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/rweb_custom_props.html)可以做同样的事情。

```
com.ibm.ws.webcontainer.extractHostHeaderPort = true
trusthostheaderport = true
httpsIndicatorHeader = com.ibm.ws.httpsIndicatorHeader 
```

如果您不使用这些容器中的任何一个或需要支持多个域，则需要查阅容器文档。

**自定义身份验证详细信息来源**

当然 Spring Security 非常灵活，因此您始终可以提供 AuthenticationDetailsS​​ource 的自定义实现，该实现返回一个 ServiceAuthenticationDetails 实例，该实例以您希望的任何方式查找服务 URL。

# ember.js - 为什么元素 ID 作为 ember 视图中的计算属性在 ember 1.0.0-PRE.4 中不起作用？

> ID：14639997
> 
> 赞同：1
> 
> 时间：2013-02-01T04:57:55.180
> 
> 标签：ember.js

下面是描述该问题的jsfiddle。第一个视图具有 elementid 作为计算属性，第二个视图具有显式元素 id。第一个视图的 id 没有改变，而第二个视图的 id 没有改变。 [http://jsfiddle.net/LZjEx/](http://jsfiddle.net/LZjEx/)

```
App = Ember.Application.create();

App.MultiView = Ember.View.extend({
    templateName : 'appl',
     textInput: Ember.TextField.extend({
        elementId : function(){
            return "disk";
        }.property()
    })
})

App.MultiView.create().append();

<script type="text/x-handlebars" data-template-name="appl">
    {{view view.textInput}}
    {{view Ember.TextField elementId="answer"}}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T09:37:26.887

经过一些挖掘和实验，这是我发现的：

在这个线程中，当 elementId 设置时解释：[https ://github.com/emberjs/ember.js/issues/1549](https://github.com/emberjs/ember.js/issues/1549)

> 由于视图在 init 上向 Ember.View.views 注册自身，因此需要在运行 init 之前定义 elementId。它与“inDOM”状态无关。

这是一个小提琴确认：http: [//jsfiddle.net/LLSQD/](http://jsfiddle.net/LLSQD/)

```
App.MultiView = Ember.View.extend({
    templateName : 'appl',

     textInput: Ember.TextField.extend({
        init: function() {
            // This view's id will not be set to 'disk'.
            return this._super();
            this.set('elementId', 'disk');
        }
    }),
    textInput2: Ember.TextField.extend({
        init: function() {
            // This view's id will be set to 'answer'.
            this.set('elementId', 'answer');
            return this._super();
        }
    })
}) 
```

在此线程中解释说，在初始化之前不计算计算属性：[https ://github.com/emberjs/ember.js/issues/777](https://github.com/emberjs/ember.js/issues/777)

> 这在之前已经讨论过了。创建扩展原型，它不是用于设置计算属性值。这不会改变。如果需要，可以考虑使用 setProperties。

总的来说，由于 elementId 是在原型初始化时使用的，所以在构造对象后就无法更改，因此使用计算属性来确定 id 是错误的。最好的办法是在 init 方法中设置 id，然后调用 this._super();

# php - Ajax 加载重复整个页面

> ID：14639998
> 
> 赞同：0
> 
> 时间：2013-02-01T04:57:57.880
> 
> 标签：php, ajax

我正在尝试使用 jquery load(); 刷新一个 div；但加载显示正确的信息，但重复页面中不在 div 中的整个部分

```
$.ajax({
       type: 'POST',
       url: $(this).attr('action'),
       cache: false,
       data: $("#uses_form").serializeArray(),
       success: function(data)
       {
            $('#uses_form_div').load('#uses_form_div');

       }
     });
return false; }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:52:15.433

我认为你有一个误解..

如果您想将外部 url 加载到 div 块中

```
$('#uses_form_div').load("./a.file"); 
```

会做的。请参阅[api 文档](http://api.jquery.com/load/)。

或者，如果您尝试将 $.ajax 调用的 ajax 响应加载到 div 中，它应该是

```
$.ajax({
       type: 'POST',
       url: $(this).attr('action'),
       cache: false,
       data: $("#uses_form").serializeArray(),
       success: function(data)
       {
            $('#uses_form_div').html(data); // see here

       }
}); 
```

**根据以下评论更新：**

如果包含页面的情况要刷新。我有两种方法可以推荐。

1.  将包含的文件作为单独的 url 并最初加载它。因此，`include`您将通过 jquery 加载它，而不是通过 jquery load 调用加载页面。当你想刷新它时，你可以做 `$('#uses_form_div').load("./a.file");`

2.  你可以把它作为包含它自己，当你需要更新时，发出一个 ajx 请求来取回数据。在这里你有2个选择。您可以在服务器上构建 dom 并将 html 作为 ajax 响应提供，`$("#uses_form_div").html(data)`或者将响应作为 json 获取并在客户端构建您的 dom 并通过 same 加载它`$("#uses_form_div").html(data)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T08:56:28.023

我也有同样的问题，但终于找到了答案

```
<script type="text/javascript">
function recp() {
  setInterval(function() 
  {
    $("#result").load(location.href+ ' #my');
  });
}
</script>
```

```
<div id="result">
  <div id="my"><?php echo date('a:i:s'); ?></div>
</div>
```

# asp.net - 如何处理来自 .asmx Web 服务的 xml？

> ID：14639999
> 
> 赞同：0
> 
> 时间：2013-02-01T04:58:04.023
> 
> 标签：asp.net, xml, web-services, asmx, repository-pattern

第一次在这里发帖。我正在使用 ASP.NET（可能最终使用 MVC 4）开发一个相对简单的内部工具，用于查找产品并编辑这些产品的一些数据。我被告知要针对返回一系列产品的现有 .asmx Web 服务进行编程。

一旦我调用 Web 服务，我不确定如何确定使用 xml。我应该将 xml 映射到产品对象吗？使用代理网络服务对象？我是否应该直接绑定到数据控件（例如，因为用户的搜索可能返回多个产品）？存储模式？如果尚未实现，我不会将 Web 服务用于数据层。

最终，在用户输入搜索信息后，我希望能够在页面上显示退回产品的列表。然后，用户将单击产品以转到该产品的编辑页面。很高兴回答任何问题。我只是不断地在不同的想法上兜圈子，所以我想我会把它扔在那里，看看你们能不能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:15:41.893

我刚刚添加了一个 Web 引用并实例化了该引用。无论出于何种原因，它一开始对我不起作用，但我也有点被甩了，因为您不能直接在 Visual Studio 2012 中添加 Web 引用。您必须转到“添加服务引用”->“高级” ' -> '添加网络参考'。作为一名“初级”开发人员，我仍在弄清楚要使用哪些技术，这让我想知道为什么我们不使用 WCF。然而，这完全是另一个话题。